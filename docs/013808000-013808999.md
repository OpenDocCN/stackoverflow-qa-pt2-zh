# StackOverflow 问答 13808000-13808999

# php - 如何将javascript数据发布到PHP？

> ID：13808001
> 
> 赞同：1
> 
> 时间：2012-12-10T19:44:35.407
> 
> 标签：php, javascript, ajax, greasemonkey

如果我有一个变量需要在不刷新页面的情况下发布到 PHP 脚本。这可能吗？如果是这样，怎么办？

我使用 jQuery 的尝试：

```
$.ajax({
   url: "myphpfile.php",
   type: "post",
     data: json/array/whatever,

     success: function(){ // trigger when request was successfull
       window.location.href = 'somewhere'
     }
   }) 
```

我将如何接收在我的 php 脚本中传递的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:06:56.827

用于[`GM_xmlhttpRequest()`](http://wiki.greasespot.net/GM_xmlhttpRequest)允许跨域帖子（在大多数情况下都是如此）。

**Greasemonkey 脚本：**

```
// ==UserScript==
// @name     _Sending arbitrary data, demo
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant    GM_xmlhttpRequest
// ==/UserScript==

var someArray       = [1, 2, 3];
var serializedData  = JSON.stringify (someArray);

GM_xmlhttpRequest ( {
    method:     "POST",
    url:        "http://SERVER.COM/PATH/ShowJSON_PostedData.php",
    data:       serializedData,
    headers:    {"Content-Type": "application/json"},
    onload:     function (response) {
                    console.log (response.responseText);
                }
} ); 
```

**ShowJSON_PostedData.php：**

```
<?php
    echo '<title>JSON data</title>';

    echo '<h2>JSON post data:</h2><pre>';

    $jsonData   = json_decode($HTTP_RAW_POST_DATA);
    print_r ($jsonData);

    echo '</pre>';
?> 
```

控制台。将会呈现：

```
<title>JSON data</title><h2>JSON post data:</h2><pre>Array
(
    [0] => 1
    [1] => 2
    [2] => 3
)
</pre> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:21:38.320

该线程的已接受答案可能非常有用，因为它显示了一个简单的案例：[使用 jquery $.ajax 调用 PHP 函数](https://stackoverflow.com/questions/2269307/using-jquery-ajax-to-call-a-php-function)

我的建议是：做一些有用的东西，然后逐渐增加复杂性，直到你达到你的定制案例。这样，您会感觉更安全，并且您会在潜在问题进入时意识到它们。

要将数组从 php 传递到客户端，您可以`echo json_encode($myArray);`在 php 脚本中使用。

希望这可以帮助

# javascript - 将 onClick 分配给链接标签的问题

> ID：13808002
> 
> 赞同：0
> 
> 时间：2012-12-10T19:44:39.517
> 
> 标签：javascript, html, onclick, href

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:51:36.430

修改您的`doSomething()`函数，使其不会导致问题。（如果功能例如显示一些文本，则不会出现问题。）要获得更具体的帮助，您需要披露更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:47:16.527

[`.addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)使用,将 JavaScript 与 HTML 分开

```
<a href="" id="myLink">link</a>

document.getElementById('myLink').addEventListener('click', doSomething, true); 
```

并`doSomething`记住使用[`event.preventDefault()`](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)来阻止点击执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:16:39.127

实际上这里的 doSomething() 函数创建了一个 MooTools 对话框。这是代码

```
function doSomething(tit,text,id) {

new mBox.Modal({
    content: unescape(text),
    setStyles: {content: {padding: '25px 15px', lineHeight: 25, height:'400px'}},
    title: unescape(tit),
    attach: id
});

} 
```

可能这就是导致问题的原因。但不是很确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T19:50:09.540

在我的电脑中，它通过第一次点击即可工作。

```
<html>
<head>
<script type="text/javascript">
function doSomething() {
alert("Hi :)");
}
</script>
</head>
<body>
<a href="javascript:;" onclick="doSomething()">Click</a>
</body>
</html> 
```

使用火狐。

无论如何，为什么要使用 href="javascript:;" 然后？

# javascript - 在 JavaScript 中测试等式

> ID：13808004
> 
> 赞同：0
> 
> 时间：2012-12-10T19:44:44.303
> 
> 标签：javascript

如何测试数学表达式是否为真？

```
var equation = "1 + 1 = 2";
if (equation === true){
  document.write("1 + 1 = 2");
}else{
  document.write("1 + 1 =/= 2");
} 
```

由于显而易见的原因，这段代码 ^^^ 不起作用，但我只是想知道是否有一个函数可以做到这一点；评估数学表达式，然后将其真实性返回为布尔值（真/假）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:48:30.507

一种方法是使用`eval`; 但请注意，它需要 JavaScript 表示法，而不是 ad-hoc 表示法：

```
var equation = "1 + 1 == 2";         // note: `==`, not `=`
if (eval(equation)){
  document.write("1 + 1 = 2");
}else{
  document.write("1 + 1 =/= 2");
} 
```

这种方法的缺点是不是很“安全”，因为`eval`'d 字符串可以包含任何 JavaScript 代码。这极大地限制了使用它的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:47:36.963

我会编写一个方法来简单地检查两个值是否按预期相加：

```
function addsUp(a, b, x) {
 return a + b === x;
}

if (addsUp(1, 1, 2)){
  document.write("1 + 1 = 2");
}else{
  document.write("1 + 1 =/= 2");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:48:27.150

```
var equation = eval("1+1==2"); 
```

更多细节在这里：[http ://www.w3schools.com/jsref/jsref_eval.ASP](http://www.w3schools.com/jsref/jsref_eval.ASP)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T19:49:18.133

你应该看看这个线程：[Equation (expression) parser with priority?](https://stackoverflow.com/questions/28256/equation-expression-parser-with-precedence)

但是请考虑到您正在做的事情非常复杂，除非您可以将其分解为一些规则。

如果它始终采用以下格式，`X (+-/*) Y = Z`则您可以使用正则表达式或一堆目标字符串替换来删除信息。如果它需要处理`A + B - C = D + Z`（等式两边的变量数量可变），那么您将需要研究递归和/或复杂的字符串解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T19:48:53.000

你必须评估你的表达：

```
eval("1+1==2") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T19:49:10.530

怎么样

```
var equation = "1 + 1 = 2";
equation = equation.replace('=','==');
if (eval(equation)){
  document.write("1 + 1 = 2");
}else{
  document.write("1 + 1 =/= 2");
} 
```

?

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T19:50:08.017

如果您使用用户输入，您可能必须将引号加倍...否则您会收到错误 Invalid left-hand side in assignment

```
var equation = "1 + 1 == 2";

if (eval(equation)){
  document.write("1 + 1 = 2");
}else{
    alert('s');
  document.write("1 + 1 =/= 2");
}​ 
```

# php - 使用 htaccess 从 URL 转发中检索 GET[] 信息

> ID：13808008
> 
> 赞同：-1
> 
> 时间：2012-12-10T19:44:50.973
> 
> 标签：php, apache, url-rewriting, get

我的文件夹中有一个 `index.php`和`news.php`和`.htaccess`文件，`localhost/DIRECTORY/AID/` 我基本上是在尝试发送/接收数据`index.php`到`news.php`

这是 内部的一个函数`index.php`，它从数据库查询中创建一个链接，并回显出一篇文章的标题。

```
function news_preview() {
    $query = "SELECT * FROM updates ORDER BY update_id DESC LIMIT 5  ";
    $result = mysql_query($query) or die(mysql_error());
    while ($row = mysql_fetch_array($result)) {
        $url = "/news/$row[update_id]/" . preg_replace('/[^a-zA-Z0-9-_]/', '_',
            $row['update_title']);
        echo "<a href=\"$url\">  " . substr($row['update_title'], 0, 26) . "...</a><br/>";
    }
}

echo news_preview(); 
```

现在，这就是它的`.htaccess`样子

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^news/([0-9]+)/([A-Za-z0-9_-]+)$ DIRECTORY/AID/news.php?id=$1 [QSA,L] 
```

现在，问题。基本上，当我单击 中显示的链接（由 生成`news_preview()`）时`index.php`，我在**news.php**页面中得到的只是什么。但是，可能是因为我正在尝试使用 `$_GET['title']`虽然，我不确定这是否是我们检索数据的方式。但是，链接带我去`http://localhost/news/46/This_is_news_title` 哪个是完美的，但我收到了`Object Not Found`错误

下面是我得到的错误的图像。

![在此处输入图像描述](../Images/892f0c1a1cc2cc861d3ec38725554ab6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:05:16.563

将此代码放在`htdocs/.htaccess`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On

RewriteBase /

RewriteRule ^news/([0-9]+)/.*$ /DIRECTORY/AID/news.php?id=$1 [QSA,L,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:55:16.297

> 在 AID/ 文件夹中连同`index.php`&`news.php`问题，是我不知道如何从 url 中获取数据`news.php`

htaccess 文件需要位于您的文档根目录中。当请求 URI 采用以下形式时：

```
/news/1234/something-something 
```

apache 用于解决是否应应用覆盖（即 htaccess 文件中的内容）的顺序是首先查看这是否是一个目录`/news/1234/something-something`，如果是，则其中是否有一个 htaccess 文件。那不是一个目录，所以 apache 继续前进。if`/news/1234`是一个目录，如果是，看看里面是否有htaccess文件；因为不是，所以什么也没有发生。然后apache检查是否`/news`是一个目录，如果是，检查htaccess；它也不是一个目录，所以什么也没有发生。最后，apache 检查文档根目录`/`以查看是否有 htaccess。由于文档根目录**是**一个目录，因此您需要在其中放置规则。

该`/DIRECTORY/AID/`目录永远不会在这里混合，除非那实际上是您的文档根目录所在的位置。如果`DIRECTORY/AID/`是您的文档根目录，例如 URI`/`直接映射到该目录，那么您需要将规则更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^news/([0-9]+)/([A-Za-z0-9_-]+)$ news.php?id=$1 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:06:19.953

听起来您希望能够将 URL 的最后一部分读取为`$_GET['title']`，但您的 htaccess 规则并未将其添加到查询字符串中。

尝试改变

```
RewriteRule ^news/([0-9]+)/([A-Za-z0-9_-]+)$ DIRECTORY/AID/news.php?id=$1 [QSA,L] 
```

到

```
RewriteRule ^news/([0-9]+)/([A-Za-z0-9_-]+)$ DIRECTORY/AID/news.php?id=$1&title=$2 [QSA,L] 
```

# jsf - JSF 组件关闭表格单元格

> ID：13808017
> 
> 赞同：2
> 
> 时间：2012-12-10T19:45:28.723
> 
> 标签：jsf

我试图在 ah:panelGrid 组件中嵌套一个表格，而 h:selectOneMenu 通过关闭它出现在其中的单元格并创建一个新的（和不需要的）行来搞砸格式。

我的代码看起来像这样：

```
<h:panelGrid columns="2">
    [Other rows that work just fine]
    <h:outputText value="Match [Stuff] to [More Stuff]:" />
    <table>
        <tr>
            <th>[Stuff]</th>
            <th>[More Stuff]</th>
        </tr>
        <tr>
            <td>
                <h:outputText value="Manually Created First Element of Stuff" />
            </td>
            <td>
                <h:selectOneMenu value="#{bean.moreStuffSetting}">
                    <f:selectItem itemLabel="--None--" itemValue="" />
                    <f:selectItem itemLabel="Manual First Choice" itemValue="manual" />
                    <f:selectItems
                        value="#{bean.listOfMoreStuff}"
                        var="moreStuff"
                        itemLabel="#{moreStuff.name}" 
                        itemValue="#{moreStuff.value}" />
                </h:selectOneMenu>
            </td>
        </tr>
        <ui:repeat value="#{bean.listOfStuff}" var="stuff">
            <tr>
                <td>
                    <h:outputText value="#{stuff.name}" />
                </td>
                <td>
                    <h:selectOneMenu value="#{bean.moreStuffSetting}">
                        <f:selectItem itemLabel="--None--" itemValue="" />
                        <f:selectItem itemLabel="Manual First Choice" itemValue="manual" />
                        <f:selectItems
                            value="#{bean.listOfMoreStuff}"
                            var="moreStuff"
                            itemLabel="#{moreStuff.name}" 
                            itemValue="#{moreStuff.value}" />
                    </h:selectOneMenu>
                </td>
            </tr>    
        </ui:repeat>
    </table>
</h:panelGrid> 
```

问题出现在第一个 h:selectOneMenu 元素上。（但是，ui:repeat 中的 h:selectOneMenu 元素完全符合我的预期。）我期待“手动创建的第一个元素元素”并且该下拉菜单显示为同一行中的两个单元格。但是，这是生成的 HTML 中显示的内容：

```
<tr>
<td>Manually Created First Element of Stuff</td>
<td>
                            </td>
                            <td></td>
</tr>
<tr>
<td><select... 
```

两排。但是，在下面的嵌套中，我得到了这个：

```
 <tr>
                        <td>[Label I'm expecting]
                            </td>
                            <td><select... 
```

...这正是我期望它的行为方式。

我究竟做错了什么？我是否以某种方式滥用 JSF？那里有一些我没有看到的值得一提的错字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:49:05.943

选择 JSF 组件树中的`<h:panelGrid>`第一个同级来开始一个新的表格单元格。您拥有的纯 HTML`<table>`元素不是 JSF 组件。

把它包在一个`<h:panelGroup>`.

```
<h:panelGrid columns="2">
    <h:outputText value="Match [Stuff] to [More Stuff]:" />
    <h:panelGroup>
        <table>
            ...
        </table>
    </h:panelGroup>
</h:panelGrid> 
```

另一种方法是直接使用`<h:dataTable>`。

# svg - 在 MarkDown 中包含一个 SVG（托管在 GitHub 上）

> ID：13808020
> 
> 赞同：215
> 
> 时间：2012-12-10T19:45:51.100
> 
> 标签：svg, github, markdown

我知道可以将图像放置在 MD 中，MD 语法为`![Alt text](/path/to/img.jpg)`or `![Alt text](/path/to/img.jpg "Optional title")`，但我很难将 SVG 放置在代码托管在 GitHub 上的 MD 中。

最终使用 rails3，并且现在经常更改模型，所以我正在使用[RailRoady](https://github.com/preston/railroady)生成模型架构图的 SVG。我希望将该 SVG 放置在 ReadMe.md 中并显示出来。当我在本地打开 SVG 文件时，它确实可以工作，那么如何让浏览器在 MD 文件中渲染 SVG？鉴于代码在最终确定之前将是动态的（似乎永远不会），将 SVG 托管在一个单独的地方似乎有点矫枉过正，而且我错过了实现这一目标的方法。

我试图包含的 SVG[位于](https://github.com/specialorange/FDXCM/blob/master/doc/models_brief.svg)GitHub 上：`https://github.com/specialorange/FDXCM/blob/master/Rails/fdxcm/doc/models_brief.svg`

我尝试了以下方法，并使用实际图像来验证语法是否有效，只是没有呈现 SVG 代码：

```
![Overview][1]
[1]: https://github.com/specialorange/FDXCM/blob/master/doc/controllers_brief.svg  "Overview"

<img src="https://raw.github.com/specialorange/FDXCM/master/doc/controllers_brief.svg">

![Alt text](https://raw.github.com/specialorange/FDXCM/master/doc/controllers_brief.svg)

[Google Doc](https://docs.google.com/drawings/d/1B95ajItJTAImL2WXISX0fkBLYk3nldea4Vm9eo-VyE4/edit) :

<img src="https://docs.google.com/drawings/pub?id=117XsJ1kDyaY-n8AdPS3_8jTgMyITqaoT3-ah_BSc9YQ&w=960&h=720">

<img src="https://raw.github.com/specialorange/FDXCM/master/doc/controllers_brief.svg">

<img src="https://docs.google.com/drawings/d/1B95ajItJTAImL2WXISX0fkBLYk3nldea4Vm9eo-VyE4/edit"> 
```

得到以下结果：

![概述](../Images/e721f805e62b5eb5e4f6737f47b17971.png) [1](https://github.com/preston/railroady)：[https](https://github.com/specialorange/FDXCM/blob/master/Rails/fdxcm/doc/controllers_brief.svg) ://github.com/specialorange/FDXCM/blob/master/Rails/fdxcm/doc/controllers_brief.svg “概述”

![](../Images/7eb91070188ebcdcd2e10bb503362ec8.png)

![替代文字](../Images/7eb91070188ebcdcd2e10bb503362ec8.png)

* * *

[谷歌文档](https://docs.google.com/drawings/d/1B95ajItJTAImL2WXISX0fkBLYk3nldea4Vm9eo-VyE4/edit)：

![](../Images/27985fb9396a2fcadafb6b23f401435f.png) ![](../Images/7eb91070188ebcdcd2e10bb503362ec8.png) ![](../Images/d918cc69603b6a0f00bc9530288050a2.png)

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2013-05-09T12:47:32.083

的目的`raw.github.com`是允许用户查看文件的内容，因此对于基于文本的文件，这意味着（对于某些内容类型）您可能会得到错误的标题并且浏览器中的内容会中断。

当这个问题被问到时（2012 年）SVG 不起作用。从那时起，Github 实施了各种改进。现在（至少对于 SVG），发送了正确的 Content-Type 标头。

# 例子

下面所述的所有方法都将起作用。

^(我将问题中的 SVG 图像复制到[github 上的 repo](https://github.com/potherca-blog/StackOverflow)以创建以下示例)

## 使用相对路径链接到文件（有效，但显然只在 github.com/github.io 上）

**代码**

```
![Alt text](./controllers_brief.svg)
<img src="./controllers_brief.svg"> 
```

**结果**

请参阅[github.com 上的工作示例](https://github.com/potherca-blog/StackOverflow/blob/master/question.13808020.include-an-svg-hosted-on-github-in-markdown/readme.md)。

## 链接到 RAW 文件

**代码**

```
![Alt text](https://raw.github.com/potherca-blog/StackOverflow/master/question.13808020.include-an-svg-hosted-on-github-in-markdown/controllers_brief.svg)
<img src="https://raw.github.com/potherca-blog/StackOverflow/master/question.13808020.include-an-svg-hosted-on-github-in-markdown/controllers_brief.svg"> 
```

**结果**

![替代文字](../Images/7855aa99fa7d59ae85be824ebd503850.png) ![](../Images/7855aa99fa7d59ae85be824ebd503850.png)

## 使用链接到 RAW 文件`?sanitize=true`

**代码**

```
![Alt text](https://raw.github.com/potherca-blog/StackOverflow/master/question.13808020.include-an-svg-hosted-on-github-in-markdown/controllers_brief.svg?sanitize=true)
<img src="https://raw.github.com/potherca-blog/StackOverflow/master/question.13808020.include-an-svg-hosted-on-github-in-markdown/controllers_brief.svg?sanitize=true"> 
```

**结果**

![替代文字](../Images/99144bac1bd6c5c70ef50b62aaee6e5d.png) ![](../Images/99144bac1bd6c5c70ef50b62aaee6e5d.png)

## 链接到[github.io上托管的文件](http://github.io)

**代码**

```
![Alt text](https://potherca-blog.github.io/StackOverflow/question.13808020.include-an-svg-hosted-on-github-in-markdown/controllers_brief.svg)
<img src="https://potherca-blog.github.io/StackOverflow/question.13808020.include-an-svg-hosted-on-github-in-markdown/controllers_brief.svg"> 
```

**结果**

![替代文字](../Images/0421cc400fd4bbffe1c507beab83ab91.png) ![](../Images/0421cc400fd4bbffe1c507beab83ab91.png)

* * *

关于沿途发生的变化的一些评论：

*   Github 实现了一项功能，使 SVG 可以与 Markdown 图像语法一起使用。SVG 图像将被清理并使用正确的 HTTP 标头显示。某些标签（如`<script>`）被删除。

    要查看经过净化的 SVG 或从其他位置（即从不在[http://github.com/](http://github.com/)上的 repos 中托管的降价文件）实现此效果，只需附加`?sanitize=true`到 SVG 的原始 URL。

*   *正如[AdamKatz](https://stackoverflow.com/users/519360/)在评论中所说，使用 github.io 以外的来源可能会带来潜在的隐私和安全风险。有关更多详细信息，请参阅[CiroSantilli](https://stackoverflow.com/a/25606546/153049)的答案和DavidChambers[的答案](https://stackoverflow.com/a/21521184/153049)。*

*   *[解决此问题的问题于](https://github.com/github/markup/issues/556)2015 年 10 月 13 日在 Github 上打开，并于 2017 年 8 月 31 日得到解决*

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-02-03T06:41:16.717

我联系了 GitHub，说 github.io 托管的 SVG 不再显示在 GitHub README 中。我收到了这样的回复：

> 由于潜在的跨站点脚本漏洞，我们不得不在 GitHub.com 上禁用 svg 图像渲染。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-09-01T13:05:15.853

**[2020 年更新：他们如何在避免XSS 攻击](https://security.stackexchange.com/questions/8264/why-is-the-same-origin-policy-so-important/72569#72569)的同时使其工作**

GitHub 似乎使用了两种安全方法，这是一篇好文章：[https](https://digi.ninja/blog/svg_xss.php) ://digi.ninja/blog/svg_xss.php另见：[https ://security.stackexchange.com/questions/148507/how-to-prevent- xss-in-svg-文件上传](https://security.stackexchange.com/questions/148507/how-to-prevent-xss-in-svg-file-upload)

*   在标签内显示 SVG `<img`，这会阻止脚本运行，例如在 README 上：[https ://github.com/cirosantilli/test-git-web-interface/tree/8e394cdb012cba4bcf55ebdb89f36872b4c6c12a](https://github.com/cirosantilli/test-git-web-interface/tree/8e394cdb012cba4bcf55ebdb89f36872b4c6c12a)

*   使用`Content-Security-Policy: default-src 'none'; style-src 'unsafe-inline'; sandbox`. 这会阻止脚本运行，即使`raw`其中包含原始 SVG 文件：[https ://raw.githubusercontent.com/cirosantilli/test-git-web-interface/8e394cdb012cba4bcf55ebdb89f36872b4c6c12a/svg-foreignObject.svg](https://raw.githubusercontent.com/cirosantilli/test-git-web-interface/8e394cdb012cba4bcf55ebdb89f36872b4c6c12a/svg-foreignObject.svg)

    您可以看到带有 的标题`curl -vvv`。常规`github.com`页面也有`content-security-policy`，但要大得多。

**2017 年更新**

GitHub 开发人员目前正在调查此问题：[https ://github.com/github/markup/issues/556#issuecomment-306103203](https://github.com/github/markup/issues/556#issuecomment-306103203)

**2014-12 更新**：GitHub 现在在 blob 显示上渲染 SVG，所以我看不出有什么理由不渲染 README 渲染：

*   [https://github.com/blog/1902-svg-viewing-diffing](https://github.com/blog/1902-svg-viewing-diffing)
*   [https://github.com/cirosantilli/test/blob/2144a93333be144152e8b0d4144b77b211afce63/svg.svg](https://github.com/cirosantilli/test/blob/2144a93333be144152e8b0d4144b77b211afce63/svg.svg)

另请注意，SVG 确实有 XSS 尝试，但它没有运行：[https ://raw.githubusercontent.com/cirosantilli/test/2144a93333be144152e8b0d4144b77b211afce63/svg.svg](https://raw.githubusercontent.com/cirosantilli/test/2144a93333be144152e8b0d4144b77b211afce63/svg.svg)

十亿笑 SVG 确实使 Firefox 44 冻结，但 Chromium 48 还可以：[https ://github.com/cirosantilli/web-cheat/blob/master/svg-billion-laughs.svg](https://github.com/cirosantilli/web-cheat/blob/master/svg-billion-laughs.svg)

[Petah 提到](https://stackoverflow.com/questions/13808020/include-an-svg-hosted-on-github-in-markdown/25606546#comment57747518_21521184)blob 很好，因为 SVG 位于`iframe`.

**GitHub 不提供 SVG 图像的可能原因**

*   一般的 XML 漏洞。例如，打开 10 亿次笑声漏洞利用只会让 Firefox 崩溃我的系统。带有漏洞的 Firefox 错误：[https](https://bugzilla.mozilla.org/page.cgi?id=voting/user.html) ://bugzilla.mozilla.org/page.cgi?id=voting/user.html 。同样在 Chromium 上：[https ://code.google.com/p/chromium/issues/detail?id=231562](https://code.google.com/p/chromium/issues/detail?id=231562)

*   SVG XSS 脚本：虽然大多数浏览器在嵌入 SVG 时不会运行脚本`img`，但这似乎不是标准所要求的，所以 GitHub 可能是安全的。

    如果您直接打开 SVG（但似乎 GitHub 从不直接在`github.com`域上显示图像）或者它是内联的（目前已被 GitHub 完全删除），浏览器会运行它，因此这些情况不应该是安全问题。相关链接：

    *   规格：[http ://www.w3.org/TR/SVG/script.html](http://www.w3.org/TR/SVG/script.html)
    *   交互式 SVG 演示：[http ://www.w3.org/TR/SVG/images/script/script01.svg](http://www.w3.org/TR/SVG/images/script/script01.svg)

以下问题一般询问 SVG 的风险：[https ://security.stackexchange.com/questions/11384/exploits-or-other-security-risks-with-svg-upload](https://security.stackexchange.com/questions/11384/exploits-or-other-security-risks-with-svg-upload)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-07-15T06:23:43.627

[rawgit.com](http://rawgit.com/)很好地解决了这个问题。对于每个请求，它都会从 GitHub 中检索适当的文档，并且至关重要的是，使用正确的 Content-Type 标头为其提供服务。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-08T04:26:14.923

这将起作用。使用以下模式链接到您的 SVG：

`https://cdn.rawgit.com/<repo-owner>/<repo>/<branch>/path/to.svg`

缺点是对路径中的所有者和 repo 进行硬编码，这意味着如果重命名其中任何一个，svg 就会中断。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-10T23:38:17.813

我有一个带有 img-tag 的工作示例，但您的图像不会显示。我看到的区别是内容类型。

我从您的帖子中检查了 github 图像（由于连接失败，google doc 图像根本没有加载）。来自 github 的图像以 content-type: text/plain 的形式提供，浏览器不会将其呈现为图像。

svg 的正确内容类型值为 image/svg+xml。因此，您必须确保 svg 文件设置正确的 mime 类型，但这是服务器问题。

[用http://svg.tutorial.aptico.de/grafik_svg/dummy3.svg](http://svg.tutorial.aptico.de/grafik_svg/dummy3.svg)试试，不要忘记在标签中指定宽度和高度。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-17T12:13:44.580

**就像这在 Github 上对我有用。**

```
![Image Caption](ImageAddressOnGitHub.svg) 
```

或者

```
<img src="ImageAddressOnGitHub.svg"> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-26T19:58:27.883

自 2022 年 1 月以来，这似乎是可能的（而且很容易）：

> ## [允许上传 .svg 文件到 Markdown](https://github.blog/changelog/2022-01-21-allow-to-upload-svg-files-to-markdown/)
> 
> 现在可以将文件上传`.svg`到问题、PR、讨论和 Markdown 文件中的评论，例如`READMEs`.
> 
> 您只需将文件拖放到文本区域中即可。
> 
> [![展示如何将 SVG 图像上传到问题评论的动画。](../Images/c2c1f56f43e80430c5d3aef9c4cf4f7e.png)](https://i.stack.imgur.com/D81XL.gif)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-08T06:32:07.983

使用这个网站：[https](https://rawgit.com) ://rawgit.com ，它对我有用，因为我没有 svg 文件的权限问题。
请注意 RawGit 不是 github 的服务，如[Rawgit FAQ](https://github.com/rgrove/rawgit/wiki/Frequently-Asked-Questions)中所述：

> RawGit 与 GitHub 没有任何关联。请不要联系 GitHub 寻求有关 RawGit 的帮助

输入你需要的svg的url，如：

```
https://github.com/sel-fish/redis-experiments/blob/master/dat/memDistrib-jemalloc-4.0.3.svg 
```

然后，您可以获取可用于显示的 url：

```
https://cdn.rawgit.com/sel-fish/redis-experiments/master/dat/memDistrib-jemalloc-4.0.3.svg 
```

# javascript - 将 Node.js 注入静态 HTML

> ID：13808021
> 
> 赞同：-2
> 
> 时间：2012-12-10T19:46:03.870
> 
> 标签：javascript, html, node.js, templates, express

我目前正在寻找一种从静态 html 进行 node.js-API-calls 的方法。我看过 Express 和类似的模板引擎，但是他们会要求我编写我的 html 并从他们的模板引擎生成它，而不是相反。我经常从设计师那里获得可用于生产的 HTML，并且不想重写它以适应 express。或者是否有从现有 .html 到模板引擎的转换器？

为了更基础一点，我想以与 ajax 类似的方式使用 node.js，基本上能够`<img onClick="someNodeFunctionWithDatabaseCalls()">`从作为服务器在节点上运行的 html 文件调用类似的东西，然后使用 DOM 或操作 .html 文件类似的东西。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:12:06.950

Node.js 仅用于服务器端脚本。为了运行 node.js 代码以响应您网页上的事件，您必须使用 websockets 向您的服务器发送请求，然后服务器可以运行必要的代码（数据库请求等）。

就各种网络套接字而言，我建议使用 socket.io；它使用起来非常简单，并且以在许多不同的设备上工作而闻名。有关更多信息和示例，请参阅[socket.io](http://socket.io)。

# c# - MVC 3 App 为特定用户生成多个线程

> ID：13808025
> 
> 赞同：0
> 
> 时间：2012-12-10T19:46:30.883
> 
> 标签：c#, multithreading, asp.net-mvc-3, entity-framework-4

我正在使用 EF 4 开发一个 mvc3 应用程序。该构建对所有开发人员都运行良好，除了一个用户。当该用户运行该应用程序时，他们在 chrome 中收到重定向循环错误，并且在以该用户身份登录的调试器中检查代码时，我可以看到多个线程无缘无故地产生。应用程序中没有显式的线程启动或管理，并且无论为调试指定的默认起始页如何，此问题都会持续存在。

我很乐意发布代码，但我不知道从哪里开始。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:45:57.717

所以我从入口点开始，从头到尾遍历代码。它最终成为应该被弃用的过滤器属性中的重定向，但仍被调用。它的构造很差，并且 OnActionExecuting 的失败状态导致重定向到“/”，您可以看到结果。

感谢您让我的头虚拟摇晃并让我回到基础。多个线程是一种症状，而不是根本原因。

# ssrs-2008 - SSRS - 在单个页面上显示 tablix

> ID：13808026
> 
> 赞同：3
> 
> 时间：2012-12-10T19:46:34.857
> 
> 标签：ssrs-2008, reportbuilder3.0

我正在使用 Report Builder 3 创建一个简单的报告。我的报告被格式化为在信纸大小的纸张上以横向模式打印。我有一个 3 列的 tablix，它从数据集中返回大约 100 个结果。我希望数据继续显示在整个页面的一组新列中，而不是中断到新页面，以便它们都适合单个页面。我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:48:59.583

在一页上添加三个tablix，然后在上面划分数据..

# objective-c - 2x 图像在视网膜设备上不起作用

> ID：13808034
> 
> 赞同：1
> 
> 时间：2012-12-10T19:46:51.133
> 
> 标签：objective-c, ios, cocoa-touch

我有一个具有以下命名约定的图像。它总是在视网膜设备上显示非 2x 版本。我已从派生数据中删除了缓存图像，但仍未显示。如果我明确地将 imageNamed 设置为“Back”，它就可以工作。这些是图像。返回@2x.png 返回.png

```
UIImage *backImage = [UIImage imageNamed:@"Back"];
NSLog(@"back image height %f",backImage.size.height);
NSLog(@"back image width %f",backImage.size.width);

UIButton *btnBack = [UIButton buttonWithType:UIButtonTypeCustom];
[btnBack setImage:backImage forState:UIControlStateNormal];
btnBack.frame = CGRectMake(0, 0, backImage.size.width, backImage.size.height);
[btnBack addTarget:self action:@selector(Click_On_Btn_Back) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *backBarButton = [[UIBarButtonItem alloc] initWithCustomView:btnBack];
self.navigationItem.leftBarButtonItem = backBarButton; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:51:32.620

尝试

```
[UIImage imageNamed:@"Back.png"]; 
```

此外，确保映像的两个版本都列在 Target->Build Phases->Copy Bundle Resources 下。如果@2x 版本不是，请确保在导入它时选中“复制到目标组的文件夹（如果需要）”框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:28:36.140

@Keller 的回答应该有效。你确定你使用的是png图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:10:40.523

您不应`.png`在 imageNamed: 参数中指定。

示例：文件应该是名称`Back.png`和`Back@2x.png`; 你的代码应该是

```
UIImage *backImage = [UIImage imageNamed:@"Back"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T22:52:08.527

这只是一种方法，但您可以从包中获取路径：

```
// in this example, we load test.png from the bundle
NSString *pathToResource = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"png"]; 
```

之所以如此方便，是因为它不仅会自动确定是否使用图像的@2x 版本，而且当您有本地化文件时，它会提供当前用户区域设置的文件路径。这很方便，因为本地化文件不在主目录中，而是在它们自己的子文件夹中（例如，英文本地化文件在 @"en.lproj" 子文件夹中），并且通过名称调用它们很麻烦，因为您需要完整路径。此方法为您获取路径。

# php - 搜索框 Where 子句？

> ID：13808035
> 
> 赞同：0
> 
> 时间：2012-12-10T19:46:50.443
> 
> 标签：php, mysql

我有一个我制作的搜索框脚本。它在用户输入的 mysql 数据库中查找具有匹配查询的用户，例如用户名、位置等。

当我将它设置为从我的数据库中的一个表中选择时，该脚本工作正常，即“ptb_profiles”，但是当我尝试添加更多表以供它搜索时，它不喜欢它并多次列出同一个用户。它应该只根据用户键入的搜索查询将每个用户调出一次。

我已经对搜索结果的数量进行了限制，以节省空间并允许用户在单独的窗口中打开更多结果（尽管这些位尚未完成）。为了清楚起见，我不想将搜索限制为一个结果，而是列出 5 个结果，并且每个结果仅显示一次，具体取决于用户是在 ptb_profiles 下搜索 display_name 还是在 ptb_stats 下搜索国籍或在 ptb_users 下搜索电子邮件。

谁能建议我在 where 子句中哪里出错了？谢谢。

```
<form method="get" action="">
<input type="text" name="query" class="search" placeholder="Search Name/Location" style="width:120px;"/>
<input type="image" src="../PTB1/assets/img/icons/loginarrow1.png" class="searchbutton" name="submit" value="Start Search" />
</form>

<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="playtime";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT *
                        FROM ptb_profiles p, ptb_stats s, ptb_users u
                        WHERE p.display_name like '%".$query."%' 
        OR p.location LIKE '%".$query."%' OR p.hobbies LIKE '%".$query."%' OR s.nationality LIKE '%".$query."%'
        LIMIT 5");
echo "<div class=\"search-results\">";
while($data_fetch=mysql_fetch_array($query_for_result))
{

    echo "<div class=\"spacing\"><a href=\"profile.php?id={$data_fetch['user_id']}\" class=\"search\">";
    echo "<img width=40px height= 40px src=\"data/photos/{$data_fetch['user_id']}/_default.jpg\" class=\"boxgridsearch\"/> "; 
     echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div>";

}
echo "<div class=\"morebutton-search\"><a href=\"echo '%".$query."%'\">+ view more results</a></div>";

mysql_close();
}

?> 
```

ps 如果有人知道我如何制作超链接以将用户带到一个新页面，在新窗口中列出他们当前的搜索查询，但显然这一次显示超过 5 个并显示该搜索的所有结果，我真的很棒。

我已经尝试过了，但这很可能是完全错误的，因为它不起作用：

```
echo "<div class=\"morebutton-search\"><a href=\"echo '%".$query."%'\">+ view more results</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:08:22.943

您正在做的是交叉连接。其中，profiles 表、stats 表和 users 表中的所有行都被合并到一个包含所有各种组合的表中。因此，您多次获得同一个用户。

您需要的是“内部连接”或表格之间的某种连接来缩小您的选择范围。

如果您确实需要“交叉连接”，请使用 MAXIM 建议的 DISTINCT 关键字。

链接到上述建议：[http ://www.tizag.com/mysqlTutorial/mysqljoins.php](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:47:33.580

假设所有表都有一个 user_id 字段，并且给定用户的每个表中只有一行，那么您可以按照 Bharath Parlapalli 的建议使用内部联接：

```
SELECT *
FROM ptb_profiles p
INNER JOIN ptb_stats s ON (p.user_id = s.user_id)
INNER JOIN ptb_users u ON (u.user_id = s.user_id)
WHERE p.display_name like 'foo' 
    OR p.location LIKE 'foo' 
    OR p.hobbies LIKE 'foo' 
    OR s.nationality LIKE 'foo'
LIMIT 5 
```

至于您的第二个问题，您可以执行以下操作：

```
<div class=\"morebutton-search\"><a href="mypage.php?query=<?php echo $query;?>&start=x">+ view more results</a> 
```

然后使用`$_GET["start"]`找出要获得的结果集。

也不要在没有适当清理的情况下使用 $query ，或者更好的是，使用准备好的语句。由于 $query 来自用户，它可能包含危险内容，例如：

```
"'DROP TABLE foo;--" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:52:56.943

尝试将您的 mySQL 查询更改为：

```
$query_for_result=mysql_query("SELECT DISTINCT *
                    FROM ptb_profiles p, ptb_stats s, ptb_users u
                    WHERE p.display_name like '%".$query."%' 
    OR p.location LIKE '%".$query."%' OR p.hobbies LIKE '%".$query."%' OR s.nationality LIKE '%".$query."%'
    LIMIT 5"); 
```

注意 DISTINCT 语句。它不会复制你的行。

# windows-8 - 为什么在页面控件中为您自动调用 WinJS.UI.processAll() 而不是在其他地方？

> ID：13808038
> 
> 赞同：0
> 
> 时间：2012-12-10T19:46:57.233
> 
> 标签：windows-8, winjs

[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh465493.aspx)解释了何时在您的应用程序中自己调用 WinJS.UI.processAll() 以及何时自动为您完成：

> 如果您没有使用空白应用程序模板，或者如果您将控件添加到您自己创建的页面，您可能需要添加对 WinJS.UI.processAll 的调用。
> 
> *   如果您将控件添加到应用程序的主页（通常是 default.html 文件），请在 onactivated 事件处理程序中添加对 WinJS.UI.processAll 的调用，如前面的示例所示。
>     
>     
> *   **如果您将控件添加到 Page 控件，则无需添加对 WinJS.UI.processAll 的调用，因为 Page 控件会自动为您执行此操作。**
>     
>     
> *   如果您将控件添加到不是您的应用主页的另一个页面，请处理 DOMContentLoaded 事件并使用处理程序调用 WinJS.UI.processAll。

系统在页面控件中自动为您调用 WinJS.UI.processAll() 背后的原因是什么，而不是在其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:40:41.880

这也是因为 Navigation 模板（以及从 Navigation 模板派生的 Grid 模板）包含至少一个 data-win-control 元素，因此需要对其进行处理才能正常工作。我们（微软）不想在空白的项目模板中放太多东西，因为它毕竟是“空白的”。所以空白项目模板只给你一个页面，没有导航，没有控件，因此不需要任何处理。您可以决定自行添加。

# c# - .NET 忽略缓存设置？

> ID：13808039
> 
> 赞同：0
> 
> 时间：2012-12-10T19:47:04.603
> 
> 标签：c#, jquery, web-services, caching, asmx

我有一个从 jQuery AJAX 调用的 WebMethod。无论我做什么，我似乎都无法让缓存在返回的 JSON 数据上正常工作。以下是 C# 的外观：

```
[System.Web.Services.WebMethod(CacheDuration=3600)]
[System.Web.Script.Services.ScriptMethod(UseHttpGet = true)]
public static List<Items> FetchItems() { //code here} 
```

我在我的 Web.Config 中添加了对 HTTP GET 的支持：

```
<webServices>
  <protocols>
    <add name="HttpGet"/>
  </protocols>
</webServices> 
```

下面是 jQuery AJAX 调用的样子：

```
$.ajax({
    url: "/Ajax/ItemAffinity.aspx/FetchItems?ItemID=" +
        escape($("#SearchSelectedPageID").val()),
    type: "GET",
    cache: true,
    async: true,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {
        AffinityItems = data.d;
    }
}); 
```

无论我做什么，我都无法获取响应的 HTTP 标头以允许缓存：

```
Cache-Control: no-cache
Content-Length: 918821
Content-Type: application/json; charset=utf-8
Date: Mon, 10 Dec 2012 19:40:57 GMT
Expires: -1
Pragma: no-cache
Server: Microsoft-IIS/8.0
X-Powered-By: ASP.NET 
```

最后，通过 C# 设置这些标头似乎对缓存行为没有任何影响：

```
HttpContext.Current.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(10));
HttpContext.Current.Response.Cache.SetValidUntilExpires(true);
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.Private); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:03:20.740

这是因为默认情况下不缓存动态数据。

这是允许它的自定义 HttpHandler 的实现：[http ://www.hackification.com/2009/05/01/forcing-the-browser-to-cache-dynamic-content-in-aspnet/](http://www.hackification.com/2009/05/01/forcing-the-browser-to-cache-dynamic-content-in-aspnet/)

# javascript - 哪些浏览器支持多行字符串？

> ID：13808042
> 
> 赞同：5
> 
> 时间：2012-12-10T19:47:28.543
> 
> 标签：javascript, string, cross-browser

哪些浏览器支持[多行字符串](https://stackoverflow.com/a/805113/11236)？

```
"foo \
bar" 
```

像往常一样，我不支持它的主要嫌疑人是 IE。哪个IE版本是第一个支持它的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T19:50:35.723

主流浏览器的所有当前版本都接受多行字符串。

> 注意：这种技术显然不符合浏览器标准；但是，当在所有当前版本的主要浏览器上进行测试时，它运行良好。

*   JSLint 等一些在线工具不允许这样做
*   多行字符串在 JavaScript 中可能很危险，因为如果您不小心在转义字符 ( `\`) 和新行之间放置了一个空格，那么所有的地狱都会崩溃。（@ripper234 评论）

[Google Style Guide 不允许使用](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Multiline_string_literals)多行字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-03T16:37:16.563

在 Firefox 和 Google chrome 中的 Javascript 中，重音符号（反引号、反勾号）类似于引号来定义多行字符串，但在 Internet Explorer 11 中却没有。这些字符串称为[模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)，是 ES6 规范的一部分。我猜测生成的换行序列是您的编辑器生成的，而不是解释 Javascript 代码的计算机所期望的。

例子：

```
var str=`This string
has three
lines.`; 
```

# jquery - 如何在 jQuery 中将 div Id 作为参数传递？

> ID：13808043
> 
> 赞同：0
> 
> 时间：2012-12-10T19:47:31.633
> 
> 标签：jquery, function, click

我有三个 div，我想为它们添加一个点击功能。理想情况下，我希望他们都使用相同的功能并使用他们的 ID 作为参数

当我运行它时，无论我单击哪个框，我都会收到带有“leftBox”的警报。

有人可以解释我做错了什么吗？

```
$('<div id="imageBoxOne">< src="images/carOne.jpg"></div>');
$('<div id="imageBoxTwo">< src="images/carTwo.jpg"></div>');
$('<div id="imageBoxThree">< src="images/carThree.jpg"></div>');

$("#imageBoxOne").click(moveImages);
$("#imageBoxTwo").click(moveImages);
$("#imageBoxThree").click(moveImages);

function moveImages(imageId) {
    if (imageId = imageBoxOne){
        alert('leftBox');
    }

    else if (imageId = imageBoxTwo){
        alert('middleBox');
    }
    else {
            alert('rightBox');
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T19:50:00.620

在您的函数`imageId`中指的是事件对象，而不是元素的 ID，您应该使用`this`关键字。另请注意，您正在设置值而不是比较它。

```
function moveImages(imageId) {
    if (this.id === 'imageBoxOne') { 
        alert('leftBox');
    }
    // ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:49:22.557

```
imageId = imageBoxOne 
```

这**分配** `imageId`给不存在的`imageBoxOne` **变量**。

您想使用**比较**它们`===`，并且您想要使用 的字符串**文字**`"..."`。

另外，`imageId`实际上是事件对象。您可以从 from 获取添加了处理程序的元素`this`，并获取其`id`属性 ( `this.id`)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:50:07.520

点击事件传递的参数就是事件，它包含了很多信息。您可以像这样获取 ID：

```
function moveImages(e) {
  var id = e.target.id;
} 
```

要获取父 div 的 id：

```
function moveImages(e) {
   var id = $(e.target).parent().attr('id');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T19:49:35.550

您使用“=”而不是“==”或通常更好的“===”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T19:50:47.640

您可以`this.id`在函数内部使用它。

当您执行以下操作时。您将 的值分配`imageBoxOne`给`imageId`您应该使用`==`.

```
imageId = imageBoxOne 
```

# tcp - netty 面临大量丢包和延迟

> ID：13808044
> 
> 赞同：1
> 
> 时间：2012-12-10T19:47:34.143
> 
> 标签：tcp, netty

我在 Ubuntu 上使用带有 Jdk 1.7 的 netty 3.5.11 以非常高的频率接收大量的股票价格更新。发送的消息格式是 JSON。数据是从 redis 服务器上的主题订阅的。每个符号都有一个订阅者。通道对象被传递给多个订阅者，并在接收到数据时将其写入客户端。

现在在 2 分钟内接收到的数据量约为 25,000 条记录。每个记录大小平均约为 500 字节长。

在测试运行期间，大约 7500/8000 条记录被丢弃，因为通道不可写。我该如何避免这种情况。?

我还注意到延迟会系统性地增加，导致在很长一段时间后才收到更新。这发生在我使用 Bufferedwritehandler 来避免丢包时。

这是我在引导程序上设置的选项。

```
executionHandler = new ExecutionHandler(
            new OrderedMemoryAwareThreadPoolExecutor(Runtime.getRuntime().availableProcessors() * 2, 1000000, 10000000, 100,
            TimeUnit.MILLISECONDS));
serverBootStrap.setPipelineFactory(new ChannelPipelineFactory()
    {
        @Override
        public ChannelPipeline getPipeline() throws Exception
        {
            return Channels.pipeline(new PortUnificationServerHandler(getConfiguration(), executionHandler));
        }
    });

    serverBootStrap.setOption("child.tcpNoDelay", true);
    serverBootStrap.setOption("tcpNoDelay", true);
    serverBootStrap.setOption("child.keepAlive", true);
    serverBootStrap.setOption("child.reuseAddress", true);
    //setting buffer size can improve I/O
    serverBootStrap.setOption("child.sendBufferSize", 16777216);
    serverBootStrap.setOption("receiveBufferSize", 16777216);//1048576);
    // better to have an receive buffer predictor 
    serverBootStrap.setOption("receiveBufferSizePredictorFactory", new AdaptiveReceiveBufferSizePredictorFactory(1024, 1024 * 16, 16777216));//1048576));

    //if the server is sending 1000 messages per sec, optimum write buffer water marks will
    //prevent unnecessary throttling, Check NioSocketChannelConfig doc   
    serverBootStrap.setOption("backlog", 1000);
    serverBootStrap.setOption("sendBufferSize", 16777216);//1048576);
    serverBootStrap.setOption("writeBufferLowWaterMark", 1024 * 1024 * 25);
    serverBootStrap.setOption("writeBufferHighWaterMark", 1024 * 1024 * 50); 
```

管道和处理程序类

```
public class PortUnificationServerHandler extends FrameDecoder 
```

{

```
private AppConfiguration appConfiguration;
private final ExecutionHandler executionHandler;

public PortUnificationServerHandler(AppConfiguration pAppConfiguration, ExecutionHandler pExecutionHandler)
{
    appConfiguration = pAppConfiguration;
    this.executionHandler = pExecutionHandler;
}

@Override
protected Object decode(ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer) throws Exception
{

    String lRequest = buffer.toString(CharsetUtil.UTF_8);
    if (ConnectionServiceHelper.isValidJSON(lRequest))
    {
        ObjectMapper lObjectMapper = new ObjectMapper();
        StringReader lStringReader = new StringReader(lRequest);
        JsonNode lNode = lObjectMapper.readTree(lStringReader);
        if (lNode.get(Constants.REQUEST_TYPE).asText().trim().equalsIgnoreCase(Constants.LOGIN_REQUEST))
        {
            JsonNode lDataNode1 = lNode.get(Constants.REQUEST_DATA);
            LoginRequest lLogin = lObjectMapper.treeToValue(lDataNode1, LoginRequest.class);

            if (lLogin.getCompress() != null)
            {
                if (lLogin.getCompress().trim().equalsIgnoreCase(Constants.COMPRESS_FLAG_TRUE))
                {
                    enableJSON(ctx);
                    enableGzip(ctx);
                    ctx.getPipeline().remove(this);
                }
                else
                {
                    enableJSON(ctx);
                    ctx.getPipeline().remove(this);
                }
            }
            else
            {
                enableJSON(ctx);
                ctx.getPipeline().remove(this);

            }
        }
    }

    // Forward the current read buffer as is to the new handlers.
    return buffer.readBytes(buffer.readableBytes());
}

private void enableJSON(ChannelHandlerContext ctx)
{
    ChannelPipeline pipeline = ctx.getPipeline();

   boolean lHandlerExists = pipeline.getContext("bufferedwriter") != null;

    if (!lHandlerExists)
    {
        pipeline.addFirst("bufferedwriter", new MyBufferedWriteHandler()); // 80960
    }

    boolean lHandlerExists = pipeline.getContext("framer") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("framer", new DelimiterBasedFrameDecoder(65535,
                new ChannelBuffer[]
                {
                    ChannelBuffers.wrappedBuffer(
                    new byte[]
                    {
                        '\n'
                    })
                }));
    }

    lHandlerExists = pipeline.getContext("decoder") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("decoder", new StringDecoder(CharsetUtil.UTF_8));
    }

    lHandlerExists = pipeline.getContext("encoder") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("encoder", new StringEncoder(CharsetUtil.UTF_8));
    }

    lHandlerExists = pipeline.getContext("executor") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("executor", executionHandler);
    }

    lHandlerExists = pipeline.getContext("handler") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("handler", new ConnectionServiceUpStreamHandler(appConfiguration));
    }

    lHandlerExists = pipeline.getContext("unite") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("unite", new PortUnificationServerHandler(appConfiguration, executionHandler));
    }
}

private void enableGzip(ChannelHandlerContext ctx)
{
    ChannelPipeline pipeline = ctx.getPipeline();

    //pipeline.remove("decoder");
    //pipeline.addLast("decoder", new MyStringDecoder(CharsetUtil.UTF_8, true));
    //pipeline.addLast("compress", new CompressionHandler(80, "gzipdeflater"));
    boolean lHandlerExists = pipeline.getContext("encoder") != null;
    if (lHandlerExists)
    {
        pipeline.remove("encoder");
    }

    lHandlerExists = pipeline.getContext("gzipdeflater") != null;
    if (!lHandlerExists)
    {
        pipeline.addBefore("executor", "gzipdeflater", new ZlibEncoder(ZlibWrapper.GZIP));
    }

    lHandlerExists = pipeline.getContext("lengthprepender") != null;
    if (!lHandlerExists)
    {
        pipeline.addAfter("gzipdeflater", "lengthprepender", new LengthFieldPrepender(4));
    }

} 
```

}

BufferedWriterHandler

```
 public class MyBufferedWriteHandler extends BufferedWriteHandler 
```

{

```
private final AtomicLong bufferSize = new AtomicLong();
final Logger logger = LoggerFactory.getLogger(getClass());

 public MyBufferedWriteHandler() {
     // Enable consolidation by default.
     super(true);
 }

@Override
public void writeRequested(ChannelHandlerContext ctx, MessageEvent e) throws Exception
{
     ChannelBuffer data = (ChannelBuffer) e.getMessage();

    if (e.getChannel().isWritable())
    {
        long newBufferSize = bufferSize.get();
        // Flush the queue if it gets larger than 8KiB.
        if (newBufferSize > 0)
        {
            flush();
            bufferSize.set(0);
        }
        ctx.sendDownstream(e);
    }
    else
    {
        logger.warn( "Buffering data for : " + e.getChannel().getRemoteAddress() );
        super.writeRequested(ctx, e);
        bufferSize.addAndGet(data.readableBytes());
    }
}

@Override
public void channelInterestChanged(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception
{
    if (e.getChannel().isWritable())
    {
        flush();
    }
} 
```

订阅者类中用于写入数据的函数

```
 public void writeToClient(Channel pClientChannel, String pMessage) throws IOException
{
    String lMessage = pMessage;
    if (pClientChannel.isWritable())
    {

            lMessage += Constants.RESPONSE_DELIMITER;
            pClientChannel.write(lMessage);

    }
    else
    {
         logger.warn(DroppedCounter++ + " droppped : " + pMessage);
    }
} 
```

我已经实施了一些我在 stackoverflow 和其他网站上阅读的建议。但我没有成功解决这个问题。

请就我缺少什么提出建议或建议？

谢谢

# android - 片段中的片段不刷新

> ID：13808046
> 
> 赞同：2
> 
> 时间：2012-12-10T19:47:52.903
> 
> 标签：android, fragment

这是我的应用程序（带有片段）：在左侧有一个 ListView 供您选择。如果您选择了右侧加载一个片段并将选项卡添加到操作栏。有代码：

```
import java.util.ArrayList;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class SpieleUndTabelleFragment extends SherlockFragment
{       
    ViewPager mViewPager;
    TabsAdapter mTabsAdapter;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState)
    {
        ActionBar bar = getSherlockActivity().getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setHomeButtonEnabled(true);

        mViewPager = new ViewPager(getSherlockActivity());
        mViewPager.setId(R.id.pager);

        mTabsAdapter = new TabsAdapter(getSherlockActivity(), mViewPager);

        mTabsAdapter.removeAllTabs();
        mTabsAdapter.addTab(bar.newTab().setText("Alle Spiele"), Spiele.class, null);
        mTabsAdapter.addTab(bar.newTab().setText("Tabelle"), Tabelle.class, null);

        return mViewPager;
    }

    public static class TabsAdapter extends FragmentPagerAdapter implements ActionBar.TabListener, ViewPager.OnPageChangeListener
    {
        private final Context mContext;
        private final ActionBar mActionBar;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo
        {
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(Class<?> _class, Bundle _args)
            {
                clss = _class;
                args = _args;
            }
        }

        public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager)
        {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mActionBar = activity.getSupportActionBar();
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args)
        {
            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mActionBar.addTab(tab);
            notifyDataSetChanged();
        }

        public void removeAllTabs()
        {
            mActionBar.removeAllTabs();
            notifyDataSetChanged();
        }

        @Override
        public int getCount()
        {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position)
        {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels)
        {
        }

        public void onPageSelected(int position)
        {
            mActionBar.setSelectedNavigationItem(position);
        }

        public void onPageScrollStateChanged(int state)
        {
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft)
        {
            Object tag = tab.getTag();
            for (int i = 0; i < mTabs.size(); i++)
            {
                if (mTabs.get(i) == tag)
                {
                    mViewPager.setCurrentItem(i);
                }
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft)
        {
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft)
        {
        }
    }

} 
```

Spiele 和 Tabelle-Class 加载到片段中并像我想要的那样运行。如果我单击一个类别（左侧片段），则带有 Spiele 和 Tabelle-Calss 的右侧选项卡会加载并运行。但是，如果我第二次单击左侧其他类别的选项卡，则操作栏中的选项卡将被删除并加载新的选项卡。但是有我的问题。Tabelle 和 Spiele-Tabs 不再加载！我总是有一个空白页！因为 to 类不会再次加载...

这是我使用选项卡刷新正确片段的代码：

```
SpieleUndTabelleFragment fragment = new SpieleUndTabelleFragment();
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.replace(R.id.item_detail_container, fragment);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
ft.commit(); 
```

有谁能够帮助我？！谢谢！

----------------***更新：*** ---------

我使用`getFragmetManager()`是因为我有一个`setOnItemListener()`内部类。如果我想使用`getSupportFragmentManager()`eclipse 说它不支持它。这是`onCreateView()`该课程的代码：

```
View view = inflater.inflate(R.layout.waehle_mannschaft, container, false);

    ListView myList = (ListView) view.findViewById(R.id.list);

    myList.setDivider(null);

    final String[] listContent = {"News", "Gästebuch", "Herren 1", "Herren 2", "Herren 3", "Damen 1", "Damen 2", "männl. A", "männl. B1", "männl. B2", "männl. C", "männl. D", "E-Jugend"}; 

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(view.getContext(), android.R.layout.simple_list_item_1, listContent);
    myList.setAdapter(adapter);

    final View v2 = view;
    myList.setOnItemClickListener(new AdapterView.OnItemClickListener()
    {
        public void onItemClick(AdapterView av, View v, int position, long id)
        {
            Toast.makeText(v2.getContext(), listContent[position], Toast.LENGTH_LONG).show();

            if(twoPanels)
            {                   
                SpieleUndTabelleFragment fragment = new SpieleUndTabelleFragment();
                FragmentTransaction ft = getFragmentManager().beginTransaction();
                ft.replace(R.id.item_detail_container, fragment);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                ft.commit();
            }
            else
            {
                Intent myIntent = new Intent(v2.getContext(), SpieleUndTabelleActivity.class);
                startActivity(myIntent);
            }
        }
    });

    return view; 
```

Spiele此时是空白的。Tabelle 显示一个基本的表。喜欢图片： ![在此处输入图像描述](../Images/dc1f28d4732c85bf78b189658e9d1a6b.png) 我再说一遍。我第一次在左侧片段上选择一个项目时，它会做我想要的。但是如果再次单击 # Verein + 0 - Punkte 就会消失，它是一个空白页面...因为 tabelle 不会再次加载...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:41:39.813

我认为问题在于`onCreateView`第二次加载它时不会被调用，因为它已经创建了。

移动附加片段的代码

到`onActivityCreated()`

# charts - 图表中的缩放气泡

> ID：13808047
> 
> 赞同：0
> 
> 时间：2012-12-10T19:47:54.223
> 
> 标签：charts, kendo-ui, jquery-svg

我从 kendoui 演示中修改了以下代码

[http://jsbin.com/alupin/6/](http://jsbin.com/alupin/6/)

我试图在鼠标悬停时缩放气泡的大小，并在鼠标移出时恢复到原始大小，但是我得到了圆圈边界的痕迹。

我正在使用 kendoui 绘制图表并使用 jquery svg 为 svg 元素设置动画。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:26:59.513

边框作为气泡高亮状态的一部分添加。这似乎没有记录，但您可以通过一个选项控制突出显示边框：

```
{
    type: "bubble",
    highlight: {
        border: {
            width: 0
        }
    },
    ...
} 
```

[在更新的 JSBin](http://jsbin.com/alupin/8)中查看它的实际效果。

我将把它添加到 Kendo UI [Docs 存储库](https://github.com/telerik/kendo-docs)中。

# mysql - 用于获取计数和不同的 SQL 查询

> ID：13808048
> 
> 赞同：2
> 
> 时间：2012-12-10T19:47:59.927
> 
> 标签：mysql, sql

我有下表调用`user_pin_tags`了以下数据，我需要查询并显示不同的标签和每个标签的计数：

```
| user_id | pin_id | tag_id |
+---------+--------+--------+
    1     |   34   |   7
    2     |   34   |   7
    3     |   34   |   15   
    4     |   34   |   16   
    5     |   34   |   16   
    6     |   34   |   16 
```

现在我正在使用以下查询来获取不同的 tag_ids

```
SELECT DISTINCT tag_id
FROM user_pin_tags
WHERE pin_id =  34 
```

结果如下：

```
| tag_id |
+--------+
    7
    15
    16 
```

我需要修改此查询以提供不同的 tag_id 以及该 pin_id 中的计数，因此我想生成此结果集：

```
| tag_id | count |
+--------+-------+
    7    |   2
    15   |   1
    16   |   3 
```

如何修改此查询以实现此目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:49:24.140

使用[`COUNT(*)`和`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)：

```
SELECT tag_id, COUNT(*) AS total
FROM user_pin_tags
WHERE pin_id =  34
GROUP BY tag_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:50:10.063

```
SELECT 
   DISTINCT(tag_id)
   ,count(pin_id)
FROM user_pin_tags
WHERE pin_id =  34
GROUP BY tag_id 
```

Group By 应该这样做......我认为。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:50:00.700

您可以按 tag_id 分组：

```
SELECT tag_id, COUNT(pin_id)
FROM user_pin_tags
WHERE pin_id =  34
GROUP BY tag_id 
```

# perl - 如何更改 Perl 的 LWP 发送的 HTTP 请求标头的顺序？

> ID：13808050
> 
> 赞同：4
> 
> 时间：2012-12-10T19:48:04.227
> 
> 标签：perl, http-headers, lwp

对于测试，我需要对网站进行请求 - 不幸的是，当使用 perl lwp 时，“连接”出现在主机 b4 的标题中。结果，请求被 Web 应用程序防火墙过滤。我只需要删除或向下移动标题中的连接线。当我用我的脚本做请求时：

```
use warnings;
use IO::Socket;
use LWP::UserAgent;
use LWP::Protocol::http;
use HTTP::Request;
my $ua = LWP::UserAgent->new();
push(@LWP::Protocol::http::EXTRA_SOCK_OPTS, SendTE => 0, PeerHTTPVersion => "1.1");
$ua->default_header(Cookie => 'XXX', User-Agent => 'whateva');
my $request = $ua->get('https://www.test.com/test.html?...');
.... 
```

标题如下所示：

```
GET /test.html?... HTTP/1.1
Connection: close
Host: www.test.com
User-Agent: whateva
Cookie: XXXX 
```

但它应该看起来像这样工作（连接在主机之后）：

```
GET /test.html?... HTTP/1.1
Host: www.test.com
Connection: close
User-Agent: whateva
Cookie: XXXX 
```

我如何摆脱 LWP 中的连接线？我只需要重新订购它....并不是说它需要完全删除；我很高兴稍后再将其添加为

```
# $userAgent->default_header ("Connection" => "keep-alive");.. 
```

提前很多！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:52:46.377

要解决防火墙中的错误*，请更改

```
return _bytes(join($CRLF, "$method $uri HTTP/$ver", @h2, @h, "", $content)); 
```

在`Net/HTTP.pm`到

```
my @h3 = ( @h2, @h );
if (my ($idx) = grep /^Host:/, 0..$#h3) {
    unshift(@h3, splice(@h3, $idx, 1));
}

return _bytes(join($CRLF, "$method $uri HTTP/$ver", @h3, "", $content)); 
```

* * *

* — 根据 HTTP/1.1 规范，RFC 2616，“接收具有不同字段名称的标头字段的顺序并不重要。”

# objective-c - UIScrollView 中按钮的中心行

> ID：13808051
> 
> 赞同：2
> 
> 时间：2012-12-10T19:48:06.547
> 
> 标签：objective-c, ios

我在 UIScrollView 中动态添加按钮，但有些视图只有两个按钮，有些有 10 个。我想在滚动视图中居中按钮，所以看起来不像我从左到右构建它们。我已经尝试了 SO 的几种技巧，但似乎没有任何效果。设置内容偏移量是我的第一种方法，但没有我想要的效果。

这是我正在使用的代码：

```
- (void)addButton:(UIButton *)button {
CGFloat contentWidth = 0.0f;
CGRect buttonFrame = button.frame;   
if ([_scrollView.subviews count] == 0) {

    buttonFrame.origin.x = self.contentIndicatorWidth + kButtonSeperator;
    contentWidth = self.contentIndicatorWidth + buttonFrame.size.width + self.contentIndicatorWidth;
} else {
    contentWidth = _scrollView.contentSize.width;
    UIButton *lastButton = [_scrollView.subviews lastObject];
    buttonFrame.origin.x = lastButton.frame.origin.x + lastButton.frame.size.width + kButtonSeperator;
    contentWidth += buttonFrame.size.width + kButtonSeperator;
}
button.frame = buttonFrame;
[_scrollView addSubview:button];
 _scrollView.contentSize = CGSizeMake(contentWidth *kContentMultiplicityFactor, _scrollView.frame.size.height);
 [_buttons setValue:button forKey:button.titleLabel.text];
totalWidth = contentWidth; 
```

// [_scrollView scrollRectToVisible:[self getButtonAtIndex:0].frame animated:YES]; }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:37:40.560

添加按钮后调用此方法：

```
 - (void)centerButtons:(NSArray*)buttons {
  CGSize scrollViewSize = _scrollView.bounds.size;

  // Measure the total width taken by the buttons
  CGFloat width = 0;
  for (UIButton* b in buttons)
    width += b.bounds.size.width + kButtonSeparator;
  if (width > kButtonSeparator)
    width -= kButtonSeparator;

  // If the buttons width is shorter than the visible bounds, adjust origin
  CGFloat origin = 0;
  if (width < scrollViewSize.width)
    origin = (scrollViewSize.width - width) / 2.f;

  // Place buttons
  CGFloat x = origin;
  CGFloat y = 0;
  for (UIButton* b in buttons) {
    b.center = CGPointMake(x + b.bounds.size.width/2.f, y + b.bounds.size.height/2.f);
    x += b.bounds.size.width + kButtonSeparator;
  }

  _scrollView.contentSize = CGSizeMake(MAX(scrollViewSize.width, width), scrollViewSize.height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:15:16.373

最后，这不是一个非常困难的问题。我猜你是动态添加这些按钮的。

您有一个名为 ScrollView 的滚动视图，并且您已经输入了内容大小。

所以你有 10 个不同宽度的按钮：

```
int btnCount = 10;
int totalWidth = 0;
int spacing = 5;
NSMUtableArray *buttons = [[NSMutableArray alloc] init];
for (int i=0; i<btnCount-1; i++) {
    UIButton *b = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [b setTitle:@"some title" forState:UIControlStateNormal];
    [b sizeToFit];
    CGRect frame = b.frame;
    totalWidth += b.frame.size.width;
    [buttons addObject:b];
}
totalWidth += (btnCount * spacing);
UIView *btnView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, totalWidth, 40)];
int priorButtonX = 0;
for (UIButton *b in buttons) {
    CGRect frame = b.frame;
    frame.origin.x = priorButtonX;
    b.frame = frame;
    priorButtonX = frame.origin.x + spacing;
    [btnView addSubview:b];
}

int scrollSizeWidth = scrollView.contentSize.width;
int placeX = (scrollSizeWidth /2) - (btnView.frame.size.width /2)

CGRect btnViewFrame = btnView.frame;
btnViewFrame.origin.x = placeX;
bbtnView.frame = btnViewFrame;

[scrollView addSubView:btnView]; 
```

你可能想用 Y 放置做一些事情，但这很简单。这段代码可以用更少的行编写，并使用更少的变量，但这样做是为了使其更易于阅读。

# sql - 用于计算每个客户的订单数量和总美元金额的 SQL 查询

> ID：13808069
> 
> 赞同：5
> 
> 时间：2012-12-10T19:48:54.390
> 
> 标签：sql, ms-access

我有两个 `Order`带有列的表：

```
OrderID,OrderDate,CID,EmployeeID 
```

并`OrderItem`带有列：

```
OrderID,ItemID,Quantity,SalePrice 
```

我需要返回 CustomerID(CID)、每个客户的订单数量以及所有订单的每个客户的总金额。

到目前为止，我有两个单独的查询。一个给我客户订单的数量....

```
SELECT CID, Count(Order.OrderID) AS TotalOrders
FROM [Order]
Where CID = CID 
GROUP BY CID
Order BY Count(Order.OrderID) DESC; 
```

另一个给我总销售额。我很难将它们组合在一起...

```
SELECT CID, Sum(OrderItem.Quantity*OrderItem.SalePrice) AS TotalDollarAmount
FROM OrderItem, [Order]
WHERE OrderItem.OrderID = [Order].OrderID
GROUP BY CID 
```

我在 Access 2010 中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:53:52.923

您将`COUNT(DISTINCT ...)`在其他 SQL 引擎中使用：

```
SELECT CID, 
       Count(DISTINCT O.OrderID) AS TotalOrders, 
       Sum(OI.Quantity*OI.SalePrice) AS TotalDollarAmount 
FROM [Order] O
INNER JOIN [OrderItem] OI
  ON O.OrderID = OI.OrderID
GROUP BY CID 
Order BY Count(DISTINCT O.OrderID) DESC 
```

不幸的是，哪个 Access 不支持。相反，您可以先获取订单美元金额，然后在计算订单数量之前加入它们：

```
SELECT CID,
       COUNT(Orders.OrderID) AS TotalOrders,
       SUM(OrderAmounts.DollarAmount) AS TotalDollarAmount
FROM [Orders]
INNER JOIN (SELECT OrderID, Sum(Quantity*SalePrice) AS DollarAmount 
      FROM OrderItems GROUP BY OrderID) AS OrderAmounts
  ON Orders.OrderID = OrderAmounts.OrderID
GROUP BY CID
ORDER BY Count(Orders.OrderID) DESC 
```

如果您需要包含订单中没有商品的客户（不寻常但可能），请更改`INNER JOIN`为`LEFT OUTER JOIN`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:06:53.177

创建一个使用您现有的 2 个查询作为子查询器的查询，并将 2 个子查询加入到`CID`. `ORDER BY`在父查询而不是子查询中定义您的。

```
SELECT
    sub1.CID,
    sub1.TotalOrders,
    sub2.TotalDollarAmount
FROM
    (
        SELECT
            CID,
            Count(Order.OrderID) AS TotalOrders
        FROM [Order]
        GROUP BY CID
    ) AS sub1
    INNER JOIN
    (
        SELECT
            CID,
            Sum(OrderItem.Quantity*OrderItem.SalePrice)
                AS TotalDollarAmount
        FROM OrderItem INNER JOIN [Order]
        ON OrderItem.OrderID = [Order].OrderID
        GROUP BY CID
    ) AS sub2
    ON sub1.CID = sub2.CID
ORDER BY sub1.TotalOrders DESC; 
```

# c# - 多次敲击/多次按下/三次敲击算法

> ID：13808074
> 
> 赞同：-1
> 
> 时间：2012-12-10T19:49:06.860
> 
> 标签：c#, java, .net, algorithm, input

我们的信息亭应用程序之一缺少物理键盘，我们需要向其添加文本输入。由于它只有一个数字键盘，我们认为我们不妨使用旧的手机输入方法。我已经能够发现它被称为 multitap (go figure)，但我找不到任何算法实现。有人知道吗？

（我不能将输入限制为字典，所以我不能使用类似 T9 的方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:09:00.423

因此，除零之外的每个按钮都以 4 为增量工作。因此，无论单击某个键盘数字多少次，只需将其除以 4 并取余数，1=数字，2=第一个字母，3=第二个字母， 0 = 第三个字母。然后根据您希望允许用户使用多少个符号，您可以对键盘 0 及其符号使用相同的概念

1-ABC

2-def

3-ghi

4-jkl

5-mno

6-pqr

7-stu

8-vwx

9-yz-空白

0-符号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:41:04.433

我会结合使用计时器和 int 来计算水龙头。这是纯伪代码，但会给出基本概念。

```
long lastEvent = 0;
int lastNum = 0;
int taps = 0;

eventListener(KeyEventArgs e)
{
    if (e.Value == lastNum)
    {
         if ((DateTime.Now.ToFileTimeUtc() - lastEvent) < AppropriateTimeLimit)
         {
              taps++;
         }
         else
         {
              GetLetter(taps, lastNum);
              lastEvant = DateTime.Now.ToFileTimeUtc();
              taps = 0;
         }
    }
    else
    {
              GetLetter(taps, lastNum);
              lastEvant = DateTime.Now.ToFileTimeUtc();
              taps = 0;
              lastNum = e.Value;
    }
}

char GetLetter(int taps, int num)
{
     if (num == 1)
         return punctuationVals[taps % length -1];
     else if (num == 0)
         return ' '; //from what I remember 0 was for spaces on most phones
     else
     {
         int val;
         if (taps > 3)
             val = taps % 4; // old phones wrap around back to the first char if I press the key 5 times
         else 
             val = taps;
          return values[num][val];
     }

}

char[][] values = new char[9][4]; // statically code all of your chars in these arrays
char[] punctuationVals = new char[idkHowMany]; 
```

所以这里是设计概述。首先，我们有一个事件监听器来处理所有的输入事件。我们知道点击序列在以下两种情况之一下完成 1) 时间已过（如果您记得在旧手机上打字，如果我想输入“abc”，我必须按 2 一次，等一秒钟左右，按 2两次 再等一秒钟，按 2 三次）或 2) 按下了一个新键。

在任何一种情况下，我们都需要知道最后按下的键是什么，以便我们跟踪它。如果键输入与最后按下的键不匹配，那么我们可以安全地输出最后按下的键，因此我们调用`GetLetter`，将抽头重置为 0，将最后一个偶数时间设置为现在，并将 设置`lastNum`为刚刚按下的数字。这是更简单的情况。

如果有人尝试输入“abc”，我们需要知道何时区分第一个输入的结束和下一个输入的开始。为此，我们使用计时器。如果第一次轻拍和刚刚发生的轻拍之间的差异在某个限制内（可能是半秒或一秒），那么我们增加轻拍，如果它在它之外，我们决定它们已经从“a”移动到'b'，此时我们会经历与用户按下与上一个不同的键时相同的输出过程，除了我们不更改最后按下的键的值，因为它没有改变。

`GetLetter`是最后值得讨论的事情。这相当简单，您为值 2-9 硬编码一个 2D 数组，为了简化索引，我们将保留 0 和 1，但将它们留空。

意思是，数组类似于；

```
 '', '','', ''
  '', '', '', ''
  '2', 'a', 'b', 'c' 
  '3', 'd', 'e', 'f'
  //ect 
```

这使得索引更简单，`GetLetter(2, 2)`只需返回`values[2][2]`正确的'b'。

因为在 2 键上连续敲击 7 次会产生“c”，如果它大于 3，我们会对值进行 mod 4（三个因为 4 % 4 是 0，这应该产生我在索引 0 处拥有的数字本身）。现在`GetLetter(6, 2)`将返回`values[2][2]`正确的'b'。

1是特例。为此，我们只使用具有许多值（可能是 20 或其他值）的一维数组，并且我们也对其输入进行取模，但显然它基于该数组的长度。我在这种情况下的模数可能是错误的，但修复起来很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T18:44:04.580

它实际上是四次轻击，查看我电话拨号盘上的字母。

我不知道星号和井号键是否有标准，但这些字母可以放在查找表中。

例如，

```
7 key, three taps, returns R
5 key, one tap, returns J 
```

如果你真的需要这个号码，那是一个额外的水龙头。

```
7 key, five taps, returns 7 
```

我相信我古代手机上的井号键从大写变为小写，从小写变为大写。还有一个标题大小写，它将产生一个大写字母并转换为小写字母。

星号键弹出标点符号表。您可以使用 2、4、6 和 8 键来导航表格并选择一个符号。

# android - RuntimeException：无法恢复活动。意图获得额外服务

> ID：13808081
> 
> 赞同：0
> 
> 时间：2012-12-10T19:49:29.617
> 
> 标签：android, android-intent, nullpointerexception, bundle, runtimeexception

我真的不知道出了什么问题：我制作了函数，将用户移动到 AddNewQuestionClass

```
//function is in Activity Class
public void wroc(String sciezka){
    Intent intent = new Intent(this, AddNewQuestion.class);
    intent.putExtra("sciezka1", sciezka);
    startActivity(intent);
} 
```

我还发送“sciezka”变量。现在，我在 AddNewQuestionClass 中得到了这个变量：

```
@Override
protected void onResume() {
    super.onResume();
    Bundle bundle = getIntent().getExtras();
    sciezka_do_pliku_z_obrazem = bundle.getString("sciezka1");
    Uri myUri = Uri.parse(sciezka_do_pliku_z_obrazem);
    try {

        Bitmap jakisobraz = MediaStore.Images.Media.getBitmap(this.getContentResolver(), myUri);
        obrazekdoedycji.setImageBitmap(jakisobraz);
    }
    catch(Exception e){
        Log.e("EO", " " + e);
    }
} 
```

不幸的是，有些东西不起作用：

```
12-10 20:21:12.213: E/AndroidRuntime(9173): FATAL EXCEPTION: main
12-10 20:21:12.213: E/AndroidRuntime(9173): java.lang.RuntimeException: Unable to resume activity {app.piotrek.learning/app.piotrek.learning.AddNewQuestion}: java.lang.NullPointerException
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2701)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2729)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.ActivityThread.access$600(ActivityThread.java:142)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.os.Looper.loop(Looper.java:137)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.ActivityThread.main(ActivityThread.java:4931)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at java.lang.reflect.Method.invoke(Method.java:511)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at dalvik.system.NativeStart.main(Native Method)
12-10 20:21:12.213: E/AndroidRuntime(9173): Caused by: java.lang.NullPointerException
12-10 20:21:12.213: E/AndroidRuntime(9173):     at app.piotrek.learning.AddNewQuestion.onResume(AddNewQuestion.java:185)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.Activity.performResume(Activity.java:5082)
12-10 20:21:12.213: E/AndroidRuntime(9173):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2691)
12-10 20:21:12.213: E/AndroidRuntime(9173):     ... 12 more 
```

这是 #185 行（有错误）：

```
 sciezka_do_pliku_z_obrazem = bundle.getString("sciezka1"); 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:56:57.653

尝试这个

```
getIntent().getStringExtra("sciezka1"); 
```

而不是捆绑...我希望它能解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:01:09.817

看起来你的变量**sciezka**是空的，所以稍后`onResume()`当**sciezka**`bundle.getString('sciezka')`的值为空时会抛出空指针异常。

 **确保**sciezka**不是空的，你可以做一个`Log.i`after

`intent.putExtra("sciezka1", sciezka);`转储变量**sciezka**以确认这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:00:50.487

看起来您尝试调用方法的捆绑包`getString()`为空。这就是你得到空指针异常的原因。**

# asp.net - 获取 NullReferenceException 在 .NET Web 应用程序中创建 SqlConnection

> ID：13808083
> 
> 赞同：-1
> 
> 时间：2012-12-10T19:49:33.227
> 
> 标签：asp.net, vb.net

我的`System.NullReferenceException`Web 应用程序出现异常：

```
[NullReferenceException: Object reference not set to an instance of an object.]
Home..ctor() in D:\Hosting\9651310\html\Home.aspx.vb:6
ASP.home_aspx..ctor() in D:\Hosting\9651310\html\Home.aspx.vb:912304
__ASP.FastObjectFactory_app_web_2ocmh1tt.Create_ASP_home_aspx() +47
System.Web.Compilation.BuildResultCompiledType.CreateInstance() +32
System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp) +109
System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) +31
System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path) +37
System.Web.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +334
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

这是引发异常的行：

```
Dim con As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("Connection").ToString()) 
```

我的 web.config 文件的连接字符串部分如下所示：

```
<connectionStrings> 
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" /> 
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:08:03.663

您的连接字符串名称错误。更改以下行：

```
Dim con As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("Connection").ToString()) 
```

对此：

```
Dim con As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("ApplicationServices").ToString()) 
```

# java - 创建pdf并与pdfbox合并

> ID：13808090
> 
> 赞同：4
> 
> 时间：2012-12-10T19:49:46.260
> 
> 标签：java, pdf, merge, pdfbox

这就是我想要做的：

1.  使用 pdfbox 制作 2 个不同的 pdf 文件

2.  使用 pdfmerger 将这两个文件合并在一起

如果我将#1 保存到服务器端本地硬盘驱动器并加载#2 的文件，我知道该怎么做。但我想做的是使用“直接从内存中”。我已经搜索了这个 pdfboxes 中的所有方法，但仍然找不到。

这是我从本地文件中获取的代码

谢谢你。

```
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import org.apache.pdfbox.exceptions.COSVisitorException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
import org.apache.pdfbox.pdmodel.edit.PDPageContentStream;
import org.apache.pdfbox.pdmodel.font.PDFont;
import org.apache.pdfbox.pdmodel.font.PDTrueTypeFont;
import org.apache.pdfbox.pdmodel.font.PDType1Font;
import org.apache.pdfbox.util.PDFMergerUtility;

/**
* This is an example that creates a simple document
* with a ttf-font.
*
* @author <a href="mailto:m.g.n@gmx.de">Michael Niedermair</a>
* @version $Revision: 1.2 $
*/
public class Test2
{

    /**
    * create the second sample document from the PDF file format specification.
    *
    * @param file     The file to write the PDF to.
    * @param message    The message to write in the file.
    * @param fontfile  The ttf-font file.
    *
    * @throws IOException If there is an error writing the data.
    * @throws COSVisitorException If there is an error writing the PDF.
    */
    public void doIt(final String file, final String message) throws IOException, COSVisitorException
    {

        // the document
        PDDocument doc = null;
        try
        {
            doc = new PDDocument();

            PDPage page = new PDPage();
            doc.addPage(page);
            PDFont font = PDType1Font.HELVETICA_BOLD;

            PDPageContentStream contentStream = new PDPageContentStream(doc, page);
            contentStream.beginText();
            contentStream.setFont(font, 12);
            contentStream.moveTextPositionByAmount(100, 700);
            contentStream.drawString(message);
            contentStream.endText();
            contentStream.close();

            doc.save(file);

            System.out.println(file + " created!");
        }
        finally
        {
            if (doc != null)
            {
                doc.close();
            }
        }
    }

    /**
     * This will create a hello world PDF document
     * with a ttf-font.
     * <br />
     * see usage() for commandline
     *
     * @param args Command line arguments.
     */
    public static void main(String[] args)
    {

        Test2 app = new Test2();
        Test2 app2 = new Test2();
        try {
            app.doIt("C:/here.pdf", "hello");
            app2.doIt("C:/here2.pdf", "helloagain");
            PDFMergerUtility merger = new PDFMergerUtility();
            merger.addSource("C:/here.pdf");
            merger.addSource("C:/here2.pdf");
            OutputStream bout2 = new BufferedOutputStream(new FileOutputStream("C:/hereisthefinal.pdf"));

            merger.setDestinationStream(bout2);
            merger.mergeDocuments();

        } catch (COSVisitorException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T19:59:48.230

您只需要使用该[`PdfMergeUtility.addSource(InputStream)`](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/PDFMergerUtility.html)方法从输入流而不是物理文件添加源。

快速浏览一下 API，您可以做的是使用该[`PDDocument.save(OutputStream)`](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/pdmodel/PDDocument.html#save%28java.io.OutputStream%29)方法将文件写入内存中的字节数组，这样应该可以工作。

```
static byte[] doIt(String message) {
   PDDocument doc = new PDDocument();
   // add the message
   ByteArrayOutputStream baos = new ByteArrayOutputStream();
   doc.save(baos);
   return baos.toByteArray();
}

void main(String args[]) {
   byte[] pdf1 = doIt("hello");
   byte[] pdf2 = doIt("world");
   PDFMergerUtility merger = new PDFMergerUtility();
   merger.addSource(new ByteArrayInputStream(pdf1));
   merger.addSource(new ByteArrayInputStream(pdf2));
   // do the rest with the merger
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-19T07:24:34.887

我使用它来合并一些文档（InputStreams）并将合并的文档写入 HttpServletResponse。

```
 PDFMergerUtility mergedDoc = new PDFMergerUtility();
  ByteArrayOutputStream colDocOutputstream = new ByteArrayOutputStream();

  for (int i = 0; i < documentCount; i++)
  {
    ByteArrayOutputStream tempZipOutstream = new ByteArrayOutputStream();
...
    mergedDoc.addSource(new ByteArrayInputStream(tempZipOutstream.toByteArray()));
  }

  mergedDoc.setDestinationStream(colDocOutputstream);
  mergedDoc.mergeDocuments();

  response.setContentLength(colDocOutputstream.size());
  response.setContentType("application/pdf");
  response.setHeader("Content-Disposition", "attachment; filename=mergedDocument.pdf");
  response.setHeader("Pragma", "public");
  response.setHeader("Cache-Control", "max-age=0");
  response.addDateHeader("Expires", 0);
  response.getOutputStream().write(colDocOutputstream.toByteArray()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-09T05:08:43.913

**您也可以使用这种方式：-**
1) 创建 InputStream 列表
2) 实例化 PDFMergerUtility 类
3) 设置目标输出流
4) 将所有 InputStreams 添加到 PDFMerger 作为需要合并的源文件。5）通过调用“ ”
合并文档`PDFmerger.mergeDocuments();`

```
 List<InputStream> locations=new ArrayList<InputStream>();
        locations.add(new FileInputStream("E:/Filenet Project Support/MergePDFs_Sample_Code/Attorney_new_form.pdf"));
        locations.add(new FileInputStream("E:/Filenet Project Support/MergePDFs_Sample_Code/JH.pdf"));
        locations.add(new FileInputStream("E:/Filenet Project Support/MergePDFs_Sample_Code/Interpreter_new_form.pdf"));
        //Instantiating PDFMergerUtility class
        PDFMergerUtility PDFmerger = new PDFMergerUtility();
        //Setting Destination Output Stream
        OutputStream out = new FileOutputStream("E:/Filenet Project Support/MergePDFs_Sample_Code/merged.pdf");
        //Adding all InputStreams to PDFMerger as Source files which needs to be merged.
        PDFmerger.addSources(locations);
        //Setting Destination Output Stream
        PDFmerger.setDestinationStream(out);
        //Merging the two documents
        PDFmerger.mergeDocuments();
        System.out.println("Documents merged"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-19T12:24:40.920

**使用 REST 和 PDFBOX**

```
@RequestMapping(value = "/getMergePdf", method = RequestMethod.GET)
    public ResponseEntity<byte[]> getMergePdf(@RequestParam(value = "filePath", required = true) String filePath,
            @RequestParam(value = "newFileName", required = true) String newFileName) throws IOException {

            // Step 1: Loading an Existing PDF Document
        File file = new File(filePath);
        File[] listFile = file.listFiles();

        // Step 2: Instantiating the PDFMergerUtility class
        PDFMergerUtility mergePdf = new PDFMergerUtility();

        // Step 3: Setting the source files
        for (File pdfName : listFile) {
            mergePdf.addSource(pdfName);
        }

        // Step 4: Setting the destination file
        ByteArrayOutputStream pdfDocOutputstream = new ByteArrayOutputStream();
        mergePdf.setDestinationFileName(newFileName + ".pdf");
        mergePdf.setDestinationStream(pdfDocOutputstream);
        mergePdf.mergeDocuments(MemoryUsageSetting.setupTempFileOnly());

        // Step 5: write in Response
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_PDF);

        // Here you have to set the actual filename of your pdf
        headers.setContentDispositionFormData(mergePdf.getDestinationFileName(), mergePdf.getDestinationFileName());
        headers.setCacheControl("must-revalidate, post-check=0, pre-check=0");
        ResponseEntity<byte[]> response = new ResponseEntity<>(pdfDocOutputstream.toByteArray(), headers, HttpStatus.OK);
        return response;

    } 
```

# ruby-on-rails-3 - Rails、回形针和s3，提示下载还是查看图片？

> ID：13808091
> 
> 赞同：8
> 
> 时间：2012-12-10T19:49:48.187
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip

所以我在 RoR 3 中成功地工作了 Paperclip 和 S3 上传，但事实证明，一些图像被提示下载，而其他图像可以在浏览器中查看。是什么决定了这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T17:36:17.210

以下其中一项对您有帮助吗？

[回形针力 下载](https://stackoverflow.com/questions/14406082/paperclip-force-download)

[Rails 'link_to' 立即下载图像而不是在浏览器中打开它](https://stackoverflow.com/questions/6756416/rails-link-to-to-download-an-image-immediately-instead-of-opening-it-in-the-br)

他们俩都说将文件作为附件发送到浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T12:24:13.220

其中一部分可能是基于服务器向您的浏览器发送的 MIME 文件类型的特定于浏览器的行为。.png 文件通常是强制下载的罪魁祸首。有关IE 上传、旧 MIME 类型等之间的问题，[请参阅此 SO 问题。](https://stackoverflow.com/questions/9097781/chrome-downloads-png-image-links-i-want-them-to-open-for-viewing-in-a-new-tab)

如果图片类型不一致，[有办法强制下载文件](https://stackoverflow.com/questions/17527713/force-browser-to-download-image-files-on-click)，但没有好办法强制在浏览器中查看图片。

编辑：我知道强制下载不是特定于 rails 的，所以[这里是特定于 rails 的版本](https://stackoverflow.com/questions/14406082/paperclip-force-download)

# android - 使用自定义动画（MyAnimation 扩展动画）在两个 Fragment 之间进行过渡

> ID：13808092
> 
> 赞同：1
> 
> 时间：2012-12-10T19:49:59.210
> 
> 标签：android, android-fragments, android-animation

我正在尝试使用“翻转动画”在两个片段之间进行过渡。我通过编写一个名为 Flip3dAnimation 的扩展动画的单独类来制作我的翻转动画。我在我的应用程序的其他地方使用它，它按预期工作。我现在想用它在片段之间转换。我知道存在以下方法：

`setCustomAnimations(arg0, arg1)`在 FragmentTransaction 对象上，但是此方法的两个参数必须是 xml 资源。由于我编写了自己的动画，因此我没有在 xml 中声明任何动画，并且我不知道如何让我自己的 Flip3dAnimation 类型在 res/anim/my_animation.xml 文件中显示为有效的 xml 标记。这可能吗？

如果上述解决方案是不可能的，那将如何做到这一点？

编辑：我知道[本](http://developer.android.com/training/animation/cardflip.html)教程，但据我了解，`<objectAnimator>`标签是一个属性动画，它使用 API 级别 11 并且不包含在支持库中。我的应用程序必须在 Android 3.0 之前的设备上运行，所以这不是一个真正的选择，除非有某种我不知道的解决方法？

谢谢你。

# msbuild - Dotless 编译器以代码 -1 退出 - MSBuild

> ID：13808100
> 
> 赞同：0
> 
> 时间：2012-12-10T19:50:08.780
> 
> 标签：msbuild, dotless

我正在尝试使用构建脚本来运行 dotless.compiler.exe 以在构建时将我的 .less 文件编译为 .min.css：

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/MsBuild/2003">
  <!--    
    This MSBuild Script will compile all [*.less] files in the /CSS folder to their [*.min.css] counterparts.
    -->
  <ItemGroup>
    <LessFiles Include="Styles\*.less" />
  </ItemGroup>
  <Target Name="CompileDotlessCss" AfterTargets="AfterBuild">
    <ItemGroup>
      <Binaries Include="*.dll;*.exe"/>
    </ItemGroup>

    <!-- Compile dotLess CSS into minified full CSS -->
    <Exec Command="[MSBuild]\dotless.compiler.exe -m %(LessFiles.FullPath)  $([System.String]::Copy('%(LessFiles.FullPath)').Replace('.less','.min.css'))" />

  </Target>
</Project> 
```

但是当我构建时，我得到：

```
The command "[MSBuild]\dotless.compiler.exe -m C:\Source Control\MyProject\MyProject.Web\Styles\main.less  C:\Source Control\MyProject\MyProject.Web\Styles\main.min.css" exited with code -1\. 
```

我怀疑这与我的项目受源代码管理有关，或者只是文件路径在“源代码管理”文件夹中有一个空间。

如何将路径括在引号中（因为命令本身在引号中）？

如果它是源代码控制因素并且由于文件被锁定而失败（我尝试使用签入的文件进行构建）..我该如何处理？我显然想让我的项目处于源代码控制之下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:47:25.680

您可以在 MSBuild files, inc.中使用`""`和互换。`''`对于带有空格的路径，最坏的情况可能需要 XML 转义，例如`&quot;`. 为了在退出代码之外获得更好的输出，请尝试将详细程度提高到[详细或诊断](http://msdn.microsoft.com/en-gb/library/vstudio/ms164311.aspx)，可能与它有关`[MSBuild]`，不应该是一个`$()`属性吗？

# facebook - 在网络或移动设备上登录 facebook 时出现 HTTP 500 错误

> ID：13808102
> 
> 赞同：2
> 
> 时间：2012-12-10T19:50:17.587
> 
> 标签：facebook, http, login, internal

在过去的 36 小时内，我一直收到此错误消息。在解决此问题时，Facebook 支持根本没有任何帮助。我已经多次清除我的 cookie 和缓存。我已经尝试过多台机器以及我的手机。登录仍然没有运气。这是我的错误还是他们正在维护？请协助，我不想在这里发帖，但我别无选择......

网站无法显示页面 HTTP 500
最可能的原因： •网站正在维护中。•该网站有一个编程错误。

您可以尝试：刷新页面。

```
 Go back to the previous page. 

 More information 
```

此错误（HTTP 500 Internal Server Error）表示您访问的网站存在服务器问题，导致网页无法显示。

有关 HTTP 错误的详细信息，请参阅帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:22:54.307

这可能是他们的结局。当服务器知道它以某种方式出错时，使用带有 5xx 状态代码的响应。更具体地说，500 错误具有[以下定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1)：

```
500 Internal Server Error:
The server encountered an unexpected condition which prevented it from 
fulfilling the request. 
```

如果响应有 4xx 状态码，那么故障就在你身上。例如，如果您向不存在的资源发出请求，则会收到 404 响应。就目前而言，他们的服务器出了点问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T01:13:10.750

有同样的问题。它似乎是由这个引起的：

[https://developers.facebook.com/docs/facebook-login/login-flow-for-web/v2.1#asking-for-permissions](https://developers.facebook.com/docs/facebook-login/login-flow-for-web/v2.1#asking-for-permissions)

> 要求超过 public_profile、email 和 user_friends 的应用程序必须经过 Facebook 审核，然后才能向公众提供。

我们要求的不仅仅是默认值，所以我认为 500 是由于缺乏审查造成的。

如果您尚未公开您的应用程序并尝试以除您以外的任何人（创建应用程序的帐户）身份登录，它似乎也可能发生。

# performance - 在 Akka 中创建演员的成本是多少？

> ID：13808103
> 
> 赞同：27
> 
> 时间：2012-12-10T19:50:21.270
> 
> 标签：performance, scala, akka

考虑一个场景，我正在实现一个使用 Akka 处理传入任务的系统。我有一个主要参与者，它接收任务并将它们分派给一些处理任务的工作参与者。

我的第一直觉是通过让调度程序为每个传入任务创建一个演员来实现这一点。工作角色处理完任务后，它会停止。

这对我来说似乎是最干净的解决方案，因为它遵循“一个任务，一个演员”的原则。另一种解决方案是重用演员 - 但这涉及清理和一些池管理的额外复杂性。

我知道阿卡的演员很便宜。但我想知道是否存在与重复创建和删除演员相关的固有成本。Akka 用于记录参与者的数据结构是否存在任何隐藏成本？

负载应该是每秒数十或数百个任务的数量级 - 将其视为一个生产网络服务器，每个请求创建一个参与者。

当然，正确的答案在于根据输入负载的类型对系统进行分析和微调。但我想知道是否有人可以根据自己的经验告诉我一些事情？

**后期编辑：**

我应该提供有关手头任务的更多详细信息：

*   只有 N 个活动任务可以在某个时间点运行。正如@drexin 指出的那样 - 这可以使用路由器轻松解决。但是，任务的执行不是简单的运行和完成类型的事情。
*   任务可能需要来自其他参与者或服务的信息，因此可能必须等待并进入睡眠状态。通过这样做，他们释放了一个执行槽。这个槽可以被另一个等待的actor占据，它现在有机会运行。您可以类比进程在一个 CPU 上的调度方式。
*   每个工人参与者都需要保持一些关于任务执行的状态。

***注意：***我很欣赏我的问题的替代解决方案，我一定会考虑它们。但是，我还想回答有关 Akka 中演员的密集创建和删除的主要问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-10T20:59:02.540

您不应该为每个请求创建一个参与者，而应该使用路由器将消息分发给动态数量的参与者。这就是路由器的用途。阅读这部分文档以获取更多信息：[http ://doc.akka.io/docs/akka/2.0.4/scala/routing.html](http://doc.akka.io/docs/akka/2.0.4/scala/routing.html)

编辑：

创建顶级actor `system.actorOf`（创建子演员（在演员内部`context.actorOf`）要便宜得多。

但我仍然建议你重新考虑这一点，因为根据创建和删除演员的频率，你也会对 GC 施加额外的压力。

编辑2：

最重要的是，演员不是线程！因此，即使您创建了 1M 个actor，它们也只能在池中的线​​程数上运行。因此，根据配置中的吞吐量设置，每个参与者将在线程再次释放到池之前处理 n 条消息。

请注意，阻塞线程（包括睡眠）不会将其返回到池中！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T21:09:13.867

在创建后立即收到一条消息并在发送结果后立即死亡的演员可以被未来替换。期货比演员更轻量级。

完成后，您可以使用它`pipeTo`来接收未来的结果。例如在你的演员启动计算：

```
def receive = {
  case t: Task => future { executeTask( t ) }.pipeTo(self)
  case r: Result => processTheResult(r)
} 
```

`executeTask`您的函数在哪里`Task`返回 a `Result`。

但是，我将通过路由器重用池中的演员，如@drexin 回答中所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T00:14:18.043

I've tested with 10000 remote actors created from some `main` context by a `root` actor, same scheme as in prod module a single actor was created. MBP 2.5GHz x2:

*   in main: main ? root // main asks root to create an actor
*   in main: actorOf(child) // create a child
*   in root: watch(child) // watch lifecycle messages
*   in root: root ? child // wait for response (connection check)
*   in child: child ! root // response (connection ok)
*   in root: root ! main // notify created

Code:

```
def start(userName: String) = {
  logger.error("HELLOOOOOOOO ")
  val n: Int = 10000
  var t0, t1: Long = 0
  t0 = System.nanoTime
  for (i <- 0 to n) {
    val msg = StartClient(userName + i)
    Await.result(rootActor ? msg, timeout.duration).asInstanceOf[ClientStarted] match {
    case succ @ ClientStarted(userName) => 
      // logger.info("[C][SUCC] Client started: " + succ)
    case _ => 
      logger.error("Terminated on waiting for response from " + i + "-th actor")
      throw new RuntimeException("[C][FAIL] Could not start client: " + msg)
    }
  }
  t1 = System.nanoTime
  logger.error("Starting of a single actor of " + n + ": " + ((t1 - t0) / 1000000.0 / n.toDouble) + " ms")
} 
```

The result:

```
Starting of a single actor of 10000: 0.3642917 ms 
```

There was a message stating that "Slf4jEventHandler started" between "HELOOOOOOOO" and "Starting of a single", so the experiment seems even more realistic (?)

Dispatchers was a default (a PinnedDispatcher starting a new thread each and every time), and it seemed like all that stuff is the same as `Thread.start()` was, for a long long time since Java 1 - 500K-1M cycles or so ^)

That's why I've changed all code inside loop, to a `new java.lang.Thread().start()`

The result:

```
Starting of a single actor of 10000: 0.1355219 ms 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-03T21:12:20.817

Actors 可以制作出色的有限状态机，因此让它们在这里帮助推动您的设计。如果您的请求处理状态通过每个请求有一个参与者而大大简化，那么就这样做。根据经验，我发现演员特别擅长管理两个以上的州。

但是，通常情况下，一个请求处理参与者从一个集合中引用请求状态，该集合作为其自身状态的一部分进行维护，这是一种常见的方法。请注意，这也可以通过 Akka 反应流和使用扫描阶段来实现。

# css - 像“空白：无”之类的东西？

> ID：13808104
> 
> 赞同：4
> 
> 时间：2012-12-10T19:50:28.260
> 
> 标签：css, whitespace

> **可能重复：**
> [如何删除行内块元素之间的空间？](https://stackoverflow.com/questions/5078239/how-to-remove-the-space-between-inline-block-elements)

如果我有几个带有 的子元素`display:inline-block`，则元素之间不能有空格，因为这会弄乱总宽度。我要么必须在源代码中不放置空格，要么通过`<?php [whitespace] ?>`在元素之间放置一个空来“作弊”，或者使用 JavaScript 删除空的文本节点。

有没有办法让空白不在 CSS 中呈现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:55:13.177

`display: block;`您可以使用或将元素设置为块级元素`float: left;`。如果您必须使用`inline-block`，那么您将不得不通过删除 HTML 本身中的空格或使用 Javascript 将其剥离来调整您的 HTML。

正如@jValdron 指出的那样，将父元素的字体大小设置为 0，然后在需要它的元素上重新设置字体大小，也可以。但是，这存在潜在的问题（例如，如果父元素中的文本尚未包含在另一个元素中怎么办？）。无论如何，该`font-size`解决方案确实有效，而且它是我自己以前使用过的一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:17:38.900

CSS Tricks 有一篇关于处理`inline-block`空白问题的好文章：

[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:57:18.997

显然，在父元素上将 font-size 设置为 0，然后在元素本身上恢复它，应该可以解决问题。

此处的解决方案：[如何删除内联块元素之间的空间？](https://stackoverflow.com/questions/5078239/how-to-remove-the-space-between-inline-block-elements)

# youtube-api - 如何访问通过 Youtube Direct Lite 上传的视频的 URL

> ID：13808108
> 
> 赞同：1
> 
> 时间：2012-12-10T19:50:42.387
> 
> 标签：youtube-api

我计划将 YouTube 集成到我的网络应用程序中，用户可以将视频上传到 YouTube。我需要以编程方式访问所有上传视频的 URL、上传视频的用户的用户 ID，并将它们记录在我的数据库中。

如何使用 YouTube Direct Lite 做到这一点？

是否有可能...

*   下载完成后 YouTube Direct Lite 会回调我的应用吗？

*   将参数与上传的视频一起保存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:43:31.910

你有两个选择。您可以使用数据 API 检索已提交到播放列表的视频提要，就像 YouTube Direct Lite 在幕后所做的那样。相关的 API 调用类似于

[https://gdata.youtube.com/feeds/api/videos?v=2&orderby=published&category=%7Bhttp%3A%2F%2Fgdata.youtube.com%2Fschemas%2F2007%2Fkeywords.cat%7Dytdl](https://gdata.youtube.com/feeds/api/videos?v=2&orderby=published&category=%7Bhttp%3A%2F%2Fgdata.youtube.com%2Fschemas%2F2007%2Fkeywords.cat%7Dytdl)`PLAYLISTID`

`PLAYLISTID`您用来征集视频的播放列表的 ID 在哪里（省略`PL`前缀）。

您可以定期从您自己的应用程序中进行此查询，以获取正在提交的视频的提要。

或者，您可以使用[YouTube Direct](https://code.google.com/p/youtube-direct/)而不是[YouTube Direct Lite](https://code.google.com/p/youtube-direct-lite/)。YouTube Direct 是一个完整的 Java App Engine 网络应用程序，并且有自己的数据存储区，每当提交发生时都会更新。您可以随意使用该数据。不过，要启动和运行 YouTube Direct 还需要做很多工作。

# statistics - 在 Mathematica 8 中对自定义分布使用 DistributionFitTest[]

> ID：13808111
> 
> 赞同：2
> 
> 时间：2012-12-10T19:51:00.513
> 
> 标签：statistics, mathematica-8

我正在尝试计算双峰高斯分布的拟合优度。为此，Mathematica 似乎需要一个符号分布函数来进行比较。因为这样的双峰分布不是股票分布，所以我试图定义一个。明显的使用

```
MixtureDistribution[{fs,(1-fs),{NormalDistribution[\[mu]S,\[sigma]S],NormalDistribution[\[mu]L,\[sigma]L]}] 
```

生成一个可以绘制的分布，但使用的分析`DistributionFitTest[]`失败。

在@Sasha 和@Jagra 之间的讨论中的先前问题中已经解决了这个主题：

[DistributionFitTest[] 用于 Mathematica 中的自定义分布](https://stackoverflow.com/questions/6361647/distributionfittest-for-custom-distributions-in-mathematica)

[在 Mathematica 中最小化自定义分布的 NExpectation](https://stackoverflow.com/questions/9202531/minimizing-nexpectation-for-a-custom-distribution-in-mathematica?lq=1)

但我找不到能够使用的解决方案

```
DistributionFitTest[data,dist,"HypothesisTestData"] 
```

when`dist`不是内置分发类型。

因为我正在建模的分布由简单的部分组成，所以描述分布的属性并不太难，并且我尝试描述尽可能多的特征，以便创建 Mathematica 8 可以识别的定义明确的分布它自己的一个。我尝试定义我能想到的每个参数如下：

```
modelDist /: 
PDF[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_], x_] :=
PDF[MixtureDistribution[{fS, 1 - fS}, {NormalDistribution[\[Mu]S, \[Sigma]S], NormalDistribution[\[Mu]L, \[Sigma]L]}], x];

modelDist /: 
CDF[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_], x_] :=
CDF[MixtureDistribution[{fS, 1 - fS}, {NormalDistribution[\[Mu]S, \[Sigma]S], NormalDistribution[\[Mu]L, \[Sigma]L]}], x];

modelDist /: 
DistributionDomain[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_]] := 
Interval[{-Infinity, Infinity}];

modelDist /: 
Random`DistributionVector[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_], n_, prec_] := 
RandomVariate[MixtureDistribution[{fS, 1 - fS}, {NormalDistribution[\[Mu]S, \[Sigma]S], NormalDistribution[\[Mu]L, \[Sigma]L]}], n, WorkingPrecision -> prec];

modelDist /: 
DistributionParameterQ[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_]] := 
!TrueQ[Not[Element[{fS, \[Mu]S, \[Sigma]S, \[Mu]L, \[Sigma]L}, Reals] && fS > 0 && fS < 1 && \[Sigma]S > 0 && \[Sigma]L > 0]];

modelDist /: 
DistributionParameterAssumptions[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_]] := 
Element[{fS, \[Mu]S, \[Sigma]S, \[Mu]L, \[Sigma]L}, Reals] && fS > 0 && fS < 1 && \[Sigma]S > 0 && \[Sigma]L > 0;

modelDist /: 
MomentGeneratingFunction[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_], t_] := 
fS E^(t \[Mu]S + (t^2 \[Sigma]S^2)/2) + (1 - fS) E^(t \[Mu]L + (t^2 \[Sigma]L^2)/2);

modelDist /: 
CharacteristicFunction[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_], t_] := 
fS E^(I t \[Mu]S + (t^2 \[Sigma]S^2)/2) + (1 - fS) E^(I t \[Mu]L + (t^2 \[Sigma]L^2)/2)

modelDist /: 
Moment[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_], n_] := 
Piecewise[{{fS*\[Sigma]S^n*(-1 + n)!!*Hypergeometric1F1[-(n/2), 1/2, -(\[Mu]S^2/(2*\[Sigma]S^2))] + (1 - fS) * \[Sigma]L^n*(-1 + n)!! * Hypergeometric1F1[-(n/2), 1/2, -(\[Mu]L^2/(2*\[Sigma]L^2))], Mod[n, 2] == 0}}, \[Mu]S*\[Sigma]S^(-1 + n)*n!!* Hypergeometric1F1[(1 - n)/2, 3/2, -(\[Mu]S^2/(2*\[Sigma]S^2))] + (1 - fS) * \[Mu]L*\[Sigma]L^(-1 + n)*n!! * Hypergeometric1F1[(1 - n)/2, 3/2, -(\[Mu]L^2/(2*\[Sigma]L^2))]];

modelDist /: 
Mean[modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_]] := 
fS \[Mu]S + (1 - fS) \[Mu]L

modelDist /: 
Expectation[expr_, x_ \[Distributed] modelDist[fS_, \[Mu]S_, \[Sigma]S_, \[Mu]L_, \[Sigma]L_]] := 
fS*Expectation[expr, x \[Distributed] NormalDistribution[\[Mu]S, \[Sigma]S]] + (1 - fS)*Expectation[expr, x \[Distributed] NormalDistribution[\[Mu]L, \[Sigma]L]] 
```

一切似乎都通过 Expectation 的定义进行，它抛出

```
TagSetDelayed::tagpos: Tag modelDist in Expectation[expr_,x_\[Distributed]modelDist[fS_,\[Mu]S_,\[Sigma]S_,\[Mu]L_,\[Sigma]L_]] is too deep for an assigned rule to be found. 
```

我不知道对期望进行定义会神奇地使一切正常，但这是尝试的下一步，因为期望允许计算方差，据我所知，这是我的最后一个标签需要定义。是否有一种语法可以正确定义这一点`Expectation[]`并将表达式直接从 my 传递`modelDist[]`到其组成部分`NormalDistribution[]`s？

（如果这完全是错误的方法，那么一些建议将不胜感激。）

# eclipse-plugin - 刻板印象属性和标记值之间的差异

> ID：13808114
> 
> 赞同：7
> 
> 时间：2012-12-10T19:51:13.433
> 
> 标签：eclipse-plugin, uml, modeling, papyrus

UML 中的构造型属性和标记值有什么区别？ *我读过它们，但我不知道主要区别*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:55:58.233

UML 中的构造型使用法文引号（例如`«User»`）表示，而标记值使用大括号（`{something}`）表示。构造型可以附加到任何 UML 元素，从 UML 2.0 开始，带有标记的值实际上是*构造型属性*。

因此，您可以使用构造型注释元素，并且可以将标记值附加到构造型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:34:50.817

UML2.x 没有标记值。它们仍然在 MOF 中定义，但在 UML 中被删除。刻板印象具有标准属性。并且这些属性显示为扩展元素的属性（不带花括号）。它们*可以*使用法语引号显示，但也可以是任何其他方式。

刻板印象是一个强大的概念，可以用额外的属性、约束和依赖来扩展任何元类。它们与标记值不可比，除了它们也是一种扩展机制。

可以在[此处](http://www.eclipse.org/modeling/mdt/uml2/docs/articles/Introduction_to_UML2_Profiles/article.html)找到有关 UML2 构造型的动手 Eclipse 教程。您可以浏览它以了解复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-05T10:46:47.807

构造型不能单独使用，但必须始终与它扩展的元类之一一起使用。刻板印象不能被另一个刻板印象扩展。Stereotype 也可以通过使用附加的图标来改变扩展模型元素的图形外观。

标签表示适用于一种或多种模型元素的特定类型的属性。并且标签和值通常都被编码为字符串，尽管 UML 工具允许使用其他数据类型作为值。例如，{author="Joe Smith"，deadline=31-March-1997，status=analysis}

标签值可以显示在原型名称下的附加注释中。

在注释注释中应用标记值的刻板印象计算机

# sql-server - SQL Server 备份错误 - 不是多系列媒体集的一部分

> ID：13808115
> 
> 赞同：5
> 
> 时间：2012-12-10T19:51:16.477
> 
> 标签：sql-server, sql-server-2008-r2, database-backups

我正在尝试备份我的 SQL Server 2008 R2 数据库。但是，无论我尝试在哪里保存备份，我都会​​收到以下错误。

> *System.Data.SqlClient.SqlError：设备“D:\Programfiles\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\dbName.bak”上的卷不是多系列媒体集的一部分。BACKUP WITH FORMAT 可用于形成新的媒体集。(Microsoft.SqlServer.Smo)。*

任何人都可以对此有所了解吗？

我可以用谷歌搜索的唯一有用的链接是以下但几乎没有用的：

[http://social.msdn.microsoft.com/Forums/en-US/sqldisasterrecovery/thread/a1eb2818-2a97-4c52-aa8d-7c224f1ac282](http://social.msdn.microsoft.com/Forums/en-US/sqldisasterrecovery/thread/a1eb2818-2a97-4c52-aa8d-7c224f1ac282)

和

[http://www.sqlservercentral.com/Forums/Topic279584-24-1.aspx](http://www.sqlservercentral.com/Forums/Topic279584-24-1.aspx)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T21:52:57.347

但是，我无法重现该问题，对于任何可能遇到此问题的人，这里有一个解决方法：使用`WITH FORMAT`子句或*选项 - 备份到新的媒体集并删除 GUI 中的所有现有备份集选项*。

# php - 使 Codeigniter CMS 干燥

> ID：13808118
> 
> 赞同：1
> 
> 时间：2012-12-10T19:51:26.290
> 
> 标签：php, codeigniter

我已经看到一些网站讨论如何制作一个登录功能以使其在每次页面加载后自动运行，而无需在每个控制器中调用该功能，并且想知道是否有人可以将我指向其中一个，因为我输了我看到的几个链接。

我发现这个网站讨论了如何实现这一目标：

[philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)

我创建了一个扩展 CI_Controller 的 MY_Controller 以及扩展了 MY_Controller 的 Frontend_Controller 来控制我的网站的主站点，我还有一个 Backend_Controller 来控制我正在创建的 CMS。

我还有一个扩展 Backend_Controller 的登录控制器。我的问题是，如果我想为整个后端区域运行 if 语句以查看是否有会话变量 isset，如果有，则检查该值是否为数字。如果是，则让他们重定向到登录名，如果不是，则让他们重定向到控制面板控制器，该控制器也扩展了 Backend_Controller。我是否在 Backend_Controller 中执行此 if 语句？

这是我想到的。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Backend_Controller extends MY_Controller
{
    public function __construct()
    {
        parent::__construct(); 

        if (!!isset($this->session->userdata('xtr'))) && (!is_integer($this->session->userdata('user_variable_id'))))
        {
            redirect('login');
        }
    }
} 
```

这是实现这一目标的正确方法和正确的地方吗？如果是这样，我会做任何特定于登录控制器或其他控制器来管理用户的事情吗？

或者有更好的想法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:35:06.207

这个问题对于codeigniter来说真的不是古怪/独特的，这更像是一个面向对象/基于类的问题，而不是其他任何问题。意见问题最好问如何从另一个类扩展一个类，以及我实际上可以在我的类的构造函数中放入什么。但话虽这么说，但更多的是静音点，也许我只是挑剔的意思。那

在这方面您拥有构造函数/解构函数的对象/类。您通常可以放置变量和函数调用。但我不确定 if 语句是否会起作用，也许如果你在类中创建一个包含相同内容的函数/方法`if-else`，并让它相应地执行你的命令，它会比在构造中使用它更好。

但是，我将根据我前一段时间读到的内容进行，从那时起发生了很多变化。

我会说看看

[我可以在 PHP 的构造函数中添加什么？](https://stackoverflow.com/questions/2044055/what-can-i-add-in-constructors-in-php)

和

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

这可能比我目前可以更好地帮助你，因为我已经有一段时间没有完成一个完整的课程了，我创建的方法比现在任何一天都多，我知道从 PHP v 5.3.2 到 5.3。 3 由于与旧 php 和新版本的兼容性，整个逻辑的工作方式发生了一些变化。所以总而言之，我想这更多的是一种提供指导的方式，而不是直接回答这个问题。

我将依靠可能的引擎盖，最有可能取决于您的 PHP 版本的机会是 if-else，在构造中不是您想要做的事情，而是从构造中调用一个方法。

# java - Java RegExp：捕获字符后的部分但不替换字符

> ID：13808123
> 
> 赞同：0
> 
> 时间：2012-12-10T19:51:41.930
> 
> 标签：java, regex

我正在使用 Java 解析 JavaScript 文件。因为范围与我使用它的环境中的预期不同，所以我试图替换 ie 的每个实例

```
test = value 
```

和

```
window.test = value 
```

以前，我只是在使用

```
writer.append(js.getSource().replaceAll("test", "window.test")); 
```

这显然是不可推广的，但对于一个固定的数据集，它工作正常。

但是，在我应该使用的新文件中，旧文件的更新版本，我现在必须处理

`window['test'] = value`

和

`([[test]])`

我不想`test`在这两种情况下匹配，而且似乎只有这两种情况有新格式。所以我的计划是现在做一个正则表达式来匹配除了`'`和`[`作为第一个字符之外的任何东西。那将是`([^'\[])test`; 但是，我实际上并不想替换第一个字符 - 只要确保它不是我不想匹配的两个字符之一。

这对我来说是一个新情况，因为我没有用 RegExps 进行替换，只是模式匹配。所以我环顾四周，找到了我认为的解决方案，称为“非捕获组”。Oracle 页面上的解释听起来像我正在寻找的内容，但是当我将正则表达式重写为 be`(?:[^'\\[])test`时，它​​的行为就像我没有更改任何内容一样 - 替换前面的字符`test`。我环顾了 StackOverflow，但我发现的只是让我更加确信我正在做的事情应该有效。

我做错了什么，它没有按预期工作？我在滥用模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:03:47.967

如果您在正则表达式中包含该字符的表达式，它将成为匹配内容的一部分。

诀窍是使用您在替换字符串中匹配的内容，因此您可以自行替换该位。

尝试 ：

```
replaceAll("([^'\[])test", "$1window.test")); 
```

替换字符串中的 $1 是对匹配的捕获组 1 的反向引用。在这种情况下，这是测试前的字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:12:33.957

为什么不简单地测试一下`"(test)(\s*)=(\s*)([\w\d]+)"`？这样，您只匹配`"test"`，然后是空格，后跟一个`'='`符号，后跟一个值（在这种情况下，由数字和字母以及下划线字符组成）。然后，您可以使用组（在括号之间）将值（如果需要，甚至是空格）复制到新文本中。

# google-maps - 加载后谷歌将 v3 缩放到 GroundOverlay

> ID：13808125
> 
> 赞同：0
> 
> 时间：2012-12-10T19:51:46.977
> 
> 标签：google-maps, google-maps-api-3

嗨，我正在尝试在谷歌地图上加载图像。这是我得到的： ![在此处输入图像描述](../Images/b6fc1a291366d80d03a541ee7d27df45.png) 红色方块 - 我看到的。绿色广场 - 我想看到的。我想在地图加载后缩放到绿色方块，但我无法做到这一点，有什么帮助吗？

代码：

```
<!DOCTYPE html>
<html>
<head>
   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
</head>
<body>
   <div id="map" style="width: 800px; height: 400px;"></div>
   <script type="text/javascript">
   var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 2,
      center: new google.maps.LatLng(0, 0),
      mapTypeId: google.maps.MapTypeId.ROADMAP
   });
   var imageBounds = new google.maps.LatLngBounds(
     new google.maps.LatLng(-90,-180),
     new google.maps.LatLng(90,180));
   var oldmap = new google.maps.GroundOverlay("http://www.dxatlas.com/HamCap/3Y0X/20UT-21MHz.gif", imageBounds);
   oldmap.setMap(map);
   oldmap.setOptions({opacity: 0.5});
   map.fitBounds(imageBounds);
   </script>
</body> 
</html> 
```

我想缩放到覆盖层，该地图看起来像绿色方形显示，它看起来像“map.fitBounds(imageBounds);” 不起作用...有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:31:44.323

这可能是 Google Maps v3 的本质；边界范围超出 -180 到 180 的范围，将经度修改为 179.9999。确保图像边界在谷歌地图的全球范围内可能会解决问题。

[http://jsfiddle.net/wptc/cPcMC/](http://jsfiddle.net/wptc/cPcMC/)

一些代码演示了这个问题：

```
<html>
<head>
   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
</head>
<body>
   <div id="map" style="width: 95%; height: 400px;"></div>
   <script type="text/javascript">
   var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(30, -97),
      mapTypeId: google.maps.MapTypeId.ROADMAP
   });

        var viewportBox;

        google.maps.event.addListener(map, 'idle', function(event) {

            var imageBounds = new google.maps.LatLngBounds(
             new google.maps.LatLng(-90,-179.999),
             new google.maps.LatLng(90,180));
             var oldmap = new google.maps.GroundOverlay("http://www.dxatlas.com/HamCap/3Y0X/20UT-21MHz.gif", imageBounds);
           oldmap.setMap(map);
           oldmap.setOptions({opacity: 0.5});

           map.fitBounds(imageBounds);

            var bounds = map.getBounds();

            var ne = bounds.getNorthEast();
            var sw = bounds.getSouthWest();

            var viewportPoints = [
                ne, new google.maps.LatLng(ne.lat(), sw.lng()),
                sw, new google.maps.LatLng(sw.lat(), ne.lng()), ne
            ];

            if (viewportBox) {
                viewportBox.setPath(viewportPoints);
            } else {
                viewportBox = new google.maps.Polygon({
                    path: viewportPoints,
                    strokeColor: '#FF0000',
                    strokeOpacity: 1.0,
                    strokeWeight: 1 
                });
                viewportBox.setMap(map);
            };

            var info = document.getElementById('info');
            info.innerHTML = 'NorthEast: ' + ne.lat() + '   ' + ne.lng() + 
                '<br />' + 'SouthWest: ' + sw.lat() + '   ' + sw.lng();
        });       

   </script>
</body>
    <div id='info'></div>
</html>​ 
```

# jakarta-ee - 从其他 .ear 注入 @Stateless EJB

> ID：13808130
> 
> 赞同：1
> 
> 时间：2012-12-10T19:51:53.570
> 
> 标签：jakarta-ee, jboss

我有一个多耳项目。一些 EJB 驻留在 project1.ear 中，我需要在 project2.ear 中使用它。

我正在尝试以下操作：

```
@Remote
public interface MyService {

    public static final String JNDI_NAME = "service/MyService"; 

    // methods

}

@Stateless(name = MyService.JNDI_NAME, mappedName = MyService.JNDI_NAME)
public class MyServiceImpl implements MyService {
   // implementations...
} 
```

然后，在一些 project2.ear 类中，我像这样注入 EJB：

```
@Stateless(name = "other/Service")
public class OtherServiceImpl implements OtherService{

    @EJB(mappedName = MyService.JNDI_NAME)
    private MyService service;
} 
```

但是我得到了很多“FailedToConstructException”和 EJB 相关的异常，原因如下：

```
Caused by: javax.naming.NameNotFoundException: service/MyService -- service jboss.naming.context.java.service.MyService
    at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)
    at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)
    at org.jboss.as.naming.InitialContext.lookup(InitialContext.java:113)
    at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:214)
    at javax.naming.InitialContext.lookup(InitialContext.java:411) [rt.jar:1.7.0_05]
    at org.jboss.as.ejb3.deployment.processors.EjbLookupInjectionSource$1.getReference(EjbLookupInjectionSource.java:82) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    ... 104 more 
```

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:31:59.883

尝试浏览 JNDI 树以查看您是否`service/MyService`存在。如果您使用的是 JBoss 6，您可以在[此处](http://geekzguru.wordpress.com/2008/01/22/howto-view-the-jndi-tree-in-jboss/)找到说明。不确定他们是否将其添加到更高版本中。

接下来检查packages-interface`MyService`需要在双耳中在同一个package中，否则lookup会失败。

最后，注解中不需要同时具有`name`和`mappedName`属性，就足够了。您也可以尝试注入不带任何属性的注解，如果 project1.ear 只是实现该接口的一个，应用程序服务器将注入它：`@Stateless``mappedName``MyService``@EJB`

```
@EJB
private MyService service; 
```

# java - 在同一个 JNDI 中的不同模式之间切换

> ID：13808134
> 
> 赞同：0
> 
> 时间：2012-12-10T19:52:11.873
> 
> 标签：java, spring, jpa, jndi

有没有一种方法可以在同一个 JNDI 中的不同模式之间动态切换？比如schema1、schema2是同一个数据库中的两个schema（这个数据库配置了JNDI），那么我们如何在schema1和schema2之间切换呢？

我知道如何使用 AbstractRoutingDataSource。但我不想在我的应用程序中使用 JDBC 连接参数。Instaed，我想配置单个 JNDI（不指定属性'currentSchema'）并能够在该 JNDI 中的不同模式之间动态切换。

这可以做到吗？

# javascript - Highcharts 单独的类别

> ID：13808135
> 
> 赞同：1
> 
> 时间：2012-12-10T19:52:17.303
> 
> 标签：javascript, jquery, graph, highcharts

[检查这个小提琴以了解我在说什么](http://jsfiddle.net/JEGGf/34/)

这是我的 xAxis 配置：

```
 "xAxis": {
        "categories": ["Category ONE", "Category TWO"],
           "allowDecimals": false,
        "title": {
            "text": " ",
            "align": "middle",
            "style": {
                "color": "steelblue"
            }
        },
        "labels": {
            "y": 12,
            "style": {
                "color": "steelblue"
            }
        }
 }, 
```

我需要将第一类和第二类分开几个像素（50,100，我想要的任何数量），但找不到此问题的解决方案。我知道有一种方法可以用于系列，但是当您只想分离类别时没有等效方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:35:02.293

plotOptions 有一些可以控制系列的选项。可以通过更改 groupPadding 的值来获得填充：

```
"plotOptions": {
   "column": {
      "groupPadding": 0.1
   }
} 
```

并现场观看：http: [//jsfiddle.net/JEGGf/42/](http://jsfiddle.net/JEGGf/42/)

# php - 从 Word 文档中清除 HTML

> ID：13808136
> 
> 赞同：0
> 
> 时间：2012-12-10T19:52:33.213
> 
> 标签：php, html, mysql, doc

好的，所以我的公司有一个客户端，它有一个发布内容的接口——标准 MySQL 数据库、基于 PHP 等。

无论如何，他们一直有一个实习生或某人，直接从 MS Word 文档将内容发布到此界面 - 界面编码不佳，并按原样接受此输入，没有格式化。

我的公司现在已经被外包来解决这个特殊的问题，因为它不断地破坏他们的网站，而且我的公司一再不得不手动进入数据库，并删除有问题的值。

有没有一种快速简便的方法可以做到这一点，还是我只需要对每个有问题的角色进行替换操作？

我认为`htmlentities()`可能是部分解决方案 - 但据我所知，这不会删除所有内容。

这个问题有什么好的解决方案？有什么可以让这更容易吗？

我们也在考虑编写一个内容验证器，可能只是服务器端（尽管可能是客户端，如果我的一周进展得足够慢/我足够快地完成剩下的部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:59:09.100

这取决于您支持多少客户（或潜在客户）以及您需要投入多少时间。选项

*   编写您自己的函数以去除元数据

*   教您的客户自己删除它，例如先粘贴到记事本中，
    或提供知识库文章来解释如何在软件中执行此操作。也许他们可以点击“帮助”部分或图标。http://support.microsoft.com/default.aspx?scid=kb;en-us;223396

*   使用内置功能的所见即所得编辑器（例如 TinyMCE）将其删除

但是就像我在评论中说的，除非你使用自己的功能，否则准备让客户继续直接粘贴并想知道为什么会出现问题。

# facebook - Facebook 应用程序登录 - 为 oauth 访问令牌交换代码只能工作一次

> ID：13808138
> 
> 赞同：2
> 
> 时间：2012-12-10T19:52:35.770
> 
> 标签：facebook, authentication, token, access-token, facebook-login

我正在使用下面的 URL 来获取身份验证令牌：

`https://www.facebook.com/dialog/oauth?client_id=CLIENT_ID&redirect_uri=RETURN_URL&scope=manage_pages,publish_stream`

`code`此页面将使用查询字符串中的令牌重定向到另一个 URL 。我正在使用此`code`令牌自动获取页面访问令牌并“离线”发布到页面。

最近几天，Facebook 似乎更改了这个令牌的到期时间`code`。

我可以使用这个令牌一次。有效期很短。有人知道facebook是否真的发生了变化？有没有其他选择可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:53:16.967

这是 12 月 5 日[路线图](https://developers.facebook.com/roadmap/completed-changes/)变更的一部分：`code`只能兑换`access_token`一次，并且必须在生成后的 10 分钟内兑换。

> **OAuth 授权代码的新安全限制** 我们只允许将授权代码交换为访问令牌一次，并要求在创建后 10 分钟内将它们交换为访问令牌。这符合 OAuth 2.0 规范，该规范从一开始就声明“授权码必须是短暂的且一次性使用”。有关更多信息，请查看我们的身份验证文档。

如果您不确定如何正确登录用户，因为您依赖于旧的、不正确的行为，请确保您使用的是最新的 SDK 并详细阅读[登录](https://developers.facebook.com/docs/concepts/login/)文档，特别是显示如何交换的[服务器端登录](https://developers.facebook.com/docs/howtos/login/server-side-login/)文档令牌代码

获得令牌后，使用应用程序使用的任何会话存储机制将其保存（PHP SDK 将为您将其存储在 PHP 会话中）并在后续调用中使用访问令牌，而不是尝试`access_token`从`code`

# wpf - ReadWrite & ReadOnly datagrid 绑定到共享源，导致 ReadWrite 不正确 ReadWrite？

> ID：13808143
> 
> 赞同：4
> 
> 时间：2012-12-10T19:52:59.643
> 
> 标签：wpf, binding, wpfdatagrid, readonly-attribute

我发现了一些奇怪的东西：我有一个带有两个数据网格的表单，它们绑定到同一个集合。根据 Xaml 中数据网格的顺序，行为会有所不同。

这按预期工作（存在用于添加的额外行）：

```
<DockPanel>
    <DockPanel DockPanel.Dock="Right">
        <Label Content="ReadOnlyView" DockPanel.Dock="Top"/>
        <DataGrid ItemsSource="{Binding Persons}" IsReadOnly="True" />
    </DockPanel>
    <DockPanel>
        <Label Content="EditorView" DockPanel.Dock="Top" />
        <DataGrid ItemsSource="{Binding Persons}" IsReadOnly="False" CanUserAddRows="True" />
    </DockPanel>
</DockPanel> 
```

以这种方式排列 xaml 让我感到困惑（没有额外的添加行）

```
<DockPanel>
    <DockPanel>
        <Label Content="EditorView" DockPanel.Dock="Top" />
        <DataGrid ItemsSource="{Binding Persons}" IsReadOnly="False" CanUserAddRows="True" />
    </DockPanel>
    <DockPanel DockPanel.Dock="Right">
        <Label Content="ReadOnlyView" DockPanel.Dock="Top"/>
        <DataGrid ItemsSource="{Binding Persons}" IsReadOnly="True" />
    </DockPanel>
</DockPanel> 
```

下面是我为此使用的虚拟 ViewModel：

```
public class PersonsViewModel
{
    public PersonsViewModel()
    {
        Persons = new ObservableCollection<Person>
                    {
                        new Person {Name = "Johan"},
                        new Person {Name = "Dave"},
                    };
    }

    public ObservableCollection<Person> Persons { get; private set; }
}

public class Person
{
    public string Name { get; set; }
} 
```

我的问题是这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:51:20.797

一个很好的问题约翰！我的猜测是，由于您没有明确地为它提供 a `CollectionViewSource`，因此自动生成的 cvs by`DataGrid`在两者之间共享，因为您指的是同一来源。

因此，当您发出两个`IsReadOnly`分配并作为共享源时，最后一个设置获胜，两者都`DataGrid`显示相同的效果。

为了证实我的猜测，我已经使用了此代码，并且`DataGrids`当您明确提供它们以供使用时，其行为与您所期望的一样`CollectionViewSource`。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <CollectionViewSource Source="{Binding Persons}" x:Key="cvs1" />
        <CollectionViewSource Source="{Binding Persons}" x:Key="cvs2" />
    </Window.Resources>
    <DockPanel>
        <DataGrid ItemsSource="{Binding Source={StaticResource ResourceKey=cvs1}}" IsReadOnly="False" CanUserAddRows="True" />
        <DataGrid ItemsSource="{Binding Source={StaticResource ResourceKey=cvs2}}" IsReadOnly="True" />
    </DockPanel>
</Window> 
```

编辑：进一步的测试表明行为可以被描述为奇怪！我无法解释为什么这会产生三个只读 DG

```
<DataGrid ItemsSource="{Binding Persons}" IsReadOnly="True" />
<DataGrid ItemsSource="{Binding Persons}" IsReadOnly="False" />
<DataGrid ItemsSource="{Binding Persons}" IsReadOnly="True" /> 
```

但这会产生交替的只读和可编辑 DG：

```
<DataGrid ItemsSource="{Binding Persons}" IsReadOnly="True" />
<DataGrid ItemsSource="{Binding Persons}" IsReadOnly="False" />
<DataGrid ItemsSource="{Binding Persons}" IsReadOnly="True" />
<DataGrid ItemsSource="{Binding Persons}" IsReadOnly="False" /> 
```

所以我想上面的 CVS 最好被描述为这种奇怪行为的解决方法，这样你就可以实现你真正想要的。

编辑 2：在更多真假组合之后，我注意到的唯一一致的事情是，如果 Last `IsReadOnly`in`DataGrid`设置为 True，则所有其他都`DataGrids`变为只读。但是如果最后一个设置为 false，那么所有其他 DataGrid 的行为都将根据它们自己的 IsReadOnly 设置进行。这种行为可能是由于这个[MSDN 位](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.isreadonly.aspx)

```
If a conflict exists between the settings at the DataGrid, column,
or cell levels, a value of true takes precedence over a value of false. 
```

# c# - XmlException 在 C# Windows Phone 7 上未处理

> ID：13808144
> 
> 赞同：0
> 
> 时间：2012-12-10T19:53:02.230
> 
> 标签：c#, xml, xml-parsing, windows-phone-7.1, linq-to-xml

我正在尝试打开一个 XML 文件，该文件作为内容复制到`IsolatedStorage`我编译我的应用程序并且遇到一些问题时；

> 根级别的数据无效。第 1 行，位置 411。

我不完全确定这意味着什么，并且访问我的本地搜索引擎只会扩大我的困惑，谁能告诉我我是否做错了什么或者我的数据结构是否不好？

这是我的函数，它从文件中加载数据并将其解析为变量：

```
private void ReadData()
{
    using (var store = IsolatedStorageFile.GetUserStoreForApplication())
    {
        if (store.FileExists("appdata.xml"))
        {
            IsolatedStorageFileStream fileStream = new IsolatedStorageFileStream("appdata.xml", FileMode.Open, store);
            XDocument document;
            using (XmlReader reader = XmlReader.Create(fileStream))
            {
                if (reader != null)
                {
                    document = XDocument.Load(reader); // <-- Error occurs here
                    ListBox listBox = new ListBox();

                    var data = from query in document.Descendants("myData")
                               select new DataHolder
                               {
                                   CashData = (string)query.Element("CashData"),
                                   LandGoData = (string)query.Element("LandGoData"),
                                   FreeParkingData = (string)query.Element("FreeParkData"),
                                   CircuitData = (string)query.Element("FullCircuitData"),
                                   AuctionData = (string)query.Element("AuctionData")
                               };
                    listBox.ItemsSource = data;

                    StartCashRule.Text = (string)listBox.FindName("myData");
                }
            }
            fileStream.Close();
        }
    }            
} 
```

这是我的 xml 文档：

```
<?xml version="1.0" encoding="utf-8" ?>
<RootPath>
    <CashData>Value1</CashData>
    <LandGoData>Value2</LandGoData>
    <FreeParkData>Value3</FreeParkData>
    <FullCircuitData>Value4</FullCircuitData>
    <AuctionData>Value5</AuctionData>
</RootPath> 
```

# c - c编程，链表报错

> ID：13808146
> 
> 赞同：0
> 
> 时间：2012-12-10T19:53:04.820
> 
> 标签：c

当我尝试编译以下代码时，出现错误

```
test.c: In function 'main':
test.c:16: error: incompatible types in assignment 
```

代码是..

```
#include <stdio.h>
#include <ctype.h>
#include <string.h>

typedef struct {
    char name[20];
    struct planet* next;
} planet;

int main(int argc, char *argv[])
{
    planet *p, *start, *first, *second, *third;

    strcpy(start->name, "Suthan");
    start->next = *first;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:54:48.703

1）为您的指针分配一些内存。

```
planet *start, *first; these are uninitialized pointers.

start->next // that's dereferencing an uninitialized pointer. 
```

2）您正在将 start->next （指向行星的指针）设置为 deferenced pointer `first`。这就是你错误的根源。

```
start->next = *first;  // should be  = first; 
```

3) 移动 typedef 名称以消除您看到的警告。

```
typedef struct planet{
   char name[20];
   struct planet* next;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:55:27.340

因为试图将 () 的实例分配给指向 ( ) 的`planet`指针。`*first``planet``start->next`

试试这个：

```
start->next = first; 
```

但是，我也想知道您的`planet`. 这有帮助吗？

```
typedef struct _planet {
    char name[20];
    struct _planet* next;
} planet; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:05:54.100

我认为你的结构不正确

```
typedef struct _planet {
    char name[20];
    struct _planet* next;
} planet; 
```

应该：

```
typedef struct planet {
char name[20];
struct planet* next;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T20:15:36.723

我记得在自引用结构的这方面绊倒了。

```
typedef struct {
    char name[20];
    struct planet* next; /* <-- the trouble is here */
} planet; 
```

在 struct 定义的中间，也就是 typedef 定义的中间，编译器不知道 a`struct planet`长什么样，但很乐意让你定义一个指向它的指针。在您取消引用之前，编译器并不真正需要知道它的样子`*next`。当你到达你的主体时，`main()`你还没有告诉编译器 a`struct planet`是什么，只有一个被调用的类型`planet`恰好是一个未命名的结构。

考虑以下方法。

```
struct foo {
    int bar;
};

typedef struct foo foo_type;

struct foo bar;
foo_type baz; 
```

这表明结构`foo`的名称是 ，定义类型的名称是`foo_type`。我可以像这样组合它们：

```
typedef struct foo {
    int bar;
} foo_type; 
```

您可以通过在您的内联结构定义中添加一个虚拟名称来解决编译器警告。

```
typedef struct planet_struct {
    char name[20];
    struct planet_struct* next;
} planet; 
```

您还需要解决其他人指出的内存分配问题，但这回答了您实际上并未提出的问题。

# c++ - 附加 Char 更改其大小后的字符串

> ID：13808152
> 
> 赞同：0
> 
> 时间：2012-12-10T19:53:26.790
> 
> 标签：c++

我想测试如果 string append char 的大小会怎样，下面是结果。

我知道字符串以空字符结尾，但为什么结果会这样呢？

```
#include <iostream>
#include <string>
using namespace std;
int main(){
    string a = "" + 'a';    //3
    string b = "" + '1';    //2
    string c = "a" + 'a';   //2
    string d = "1" + '1';   //3
    string e = "\0" + 'a';  //20
    string f = "\0" + '1';  //1
    string g = "a" + '\0';  //1
    string h = "1" + '\0';  //1
    string i = "" + '\0';   //0
    string j = "" + '\0';   //0
    cout << a.size() << endl;
    cout << b.size() << endl;
    cout << c.size() << endl;
    cout << d.size() << endl;
    cout << e.size() << endl;
    cout << f.size() << endl;
    cout << g.size() << endl;
    cout << h.size() << endl;
    cout << i.size() << endl;
    cout << j.size() << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:58:46.450

你的代码没有按照你的想法做。

字符串文字衰减为`const char *`, 并且`char`是整数类型。如果您尝试对它们求和，编译器会发现理解这些内容的最简单方法是将`char`s 转换为`int`s，因此结果是对字符串文字执行指针算术 - 例如`""+'a'`，在开始后转到内存中的第 97 个字符字符串文字`""`（如果`'a'`在您的平台上由 97 表示）。

这导致垃圾被传递给`string`构造函数，构造函数将在`string`被构造的内存中存储它在这些内存位置找到的任何内容，直到找到`\0`终止符。因此，您得到的“奇怪”结果（这是不可重现的，因为字符串表的确切内存布局取决于编译器）。

当然，就标准而言，所有这些都是未定义的行为（您正在访问`char`超出其界限的数组，除了您添加的情况`\0`）。

为了使您的代码按照您的意思执行，至少其中一个操作数必须是 type `string`：

```
string c = string("a") + 'a'; 
```

或者

```
string c = "a" + string("a"); 
```

所以编译器会看到相关的`operator+`重载`std::string`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:58:14.893

大多数初始化程序都有未定义的行为。例如，考虑：

```
string a = "" + 'a'; 
```

您正在向指针添加`char`a `char`。这会将指针前进 char 的 ASCII 值，并使用生成的（未定义的）C 字符串来初始化`a`.

要修复，请将以上内容更改为：

```
string a = string("") + 'a'; 
```

# c# - 使用 AbcPdf 从 SVG 文档创建 pdf

> ID：13808155
> 
> 赞同：3
> 
> 时间：2012-12-10T19:53:35.700
> 
> 标签：c#, svg, pdf-generation, abcpdf

我在尝试生成 PDF 方面非常陌生，并且我被赋予了尝试使用 AbcPdf6 重新创建我们的 PDF 生成器之一的任务。旧系统使用未知库，因此难以/不可能进行更新，但它从 SVG 文件中提取了 PDF。旧系统能够抓取“文本”节点并修改它们的内部 HTML，然后将它们吐回 PDF。

我现在遇到的问题是，使用 AbcPdf，我可以看到获取刚刚读入的文档元素的唯一方法是使用 GetText()。但是当我用它来读取我的 SVG 文档时，所有的 Id 都被删除了，这使得我无法找到我需要修改的那些。有谁知道为什么？

这是问题的一个例子：

SVG进入：

```
<text id="DevelopmentName" transform="matrix(1 0 0 1 25 59.1519)" 
font-family="'Verdana-Bold'" width="400" font-size="36">DEVELOPMENT NAME</text> 
```

C＃：

```
Doc pdfDoc = new Doc();
pdfDoc.Read(oContext.Server.MapPath(path));
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(new StringReader(pdfDoc.GetText("SVG"))); 
```

此时我应该能够执行 xmlDoc.GetElementById("DevelopmentName") 并让它返回上面的节点，但是它返回 null。在检查 pdfDoc.GetText("SVG") 返回的内容后，我看到了我的文本节点：

```
<text xml:space=\"preserve\" x=\"25\" y=\"59.1519\" font-size=\"36\" 
font-family=\"Verdana-Bold\" textLength=\"429.408\" >DEVELOPMENT&#160;NAME</text> 
```

我一生都无法弄清楚它为什么要这样做，或者是否有其他方式我应该在这个 SVG 中加载。任何人都可以提供见解吗？

# varnish - 清漆访问日志文件

> ID：13808158
> 
> 赞同：1
> 
> 时间：2012-12-10T19:53:46.790
> 
> 标签：varnish

我有个问题。我正在尝试访问 varnish 日志（网站是 localhost），但是当我在终端上输入 varnishncsa -w test.log 时，它只是空白。关于如何解决这个问题的任何想法？我检查了 /var/log.varnish/access.log，它是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:04:00.287

尝试`varnishncsa -w /var/log.varnish/access.log`，如果这是您想要的路径，并确保您当前的用户对该文件具有写入权限。

# windows - 类型库 (.tlb) 架构是否独立？

> ID：13808162
> 
> 赞同：1
> 
> 时间：2012-12-10T19:54:02.267
> 
> 标签：windows, typelib

很抱歉这个蹩脚的问题，但阅读 MSDN 并没有让我明白这一点。类型库 (.tlb) 是否独立于 Windows SDK 的体系结构和版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:15:19.297

是的，类型库应该适用于不同的 CPU 架构。这不会阻止程序员将指针或句柄锤击成整数，这并非完全不常见的罪过，因为它们不是自动化中允许的类型。这样的组件不太可能在 64 位代码中运行良好。

在 Windows SDK 标头中声明的核心自动化类型（如 BSTR 和 VARIANT）是稳定的，并且永远无法更改。而没有。

# c# - 获取窗口电话信号 C#

> ID：13808163
> 
> 赞同：0
> 
> 时间：2012-12-10T19:54:01.627
> 
> 标签：c#, windows-phone-8

我已经问过了，但是对于 iOS，他们告诉我这是不可能的。我迁移到 android 和 Windows Phone。对于 Android，我发现但没有测试过这个 [http://www.firstdroid.com/2010/05/12/get-provider-gsm-signal-strength/](http://www.firstdroid.com/2010/05/12/get-provider-gsm-signal-strength/) AFAIK 它可以工作。我的问题是我现在正在测试 Windows Phone，但我找不到与此问题相关的任何内容。有些人提到 WMI，我无法弄清楚这是什么。谢谢 Ps，我正在为 Windows Phone 8 和 7.1 编程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:52:43.203

我们拥有的最接近的是[Microsoft.Phone.Net.NetworkInformation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.net.networkinformation.devicenetworkinformation%28v=vs.105%29.aspx)，它是父命名空间[Microsoft.Phone.Net](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff707715%28v=vs.105%29.aspx)。这些 API 不提供信号的原始数据，但它们能够告诉您手机是否在移动宽带上、网络运营商、漫游信息等。它的设计使您的应用程序可以远离数据使用，并且使用 3G 与 Wifi 时智能响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-09T17:48:09.133

ConnectionProfile 中有一个 GetSignalBars 方法，在 Windows Phone 8 中可用

[http://msdn.microsoft.com/library/windows/apps/windows.networking.connectivity.connectionprofile.getsignalbars.aspx](http://msdn.microsoft.com/library/windows/apps/windows.networking.connectivity.connectionprofile.getsignalbars.aspx)

# zend-framework - 如何在 Zend 框架路由中使用扩展

> ID：13808164
> 
> 赞同：0
> 
> 时间：2012-12-10T19:54:12.110
> 
> 标签：zend-framework, frameworks, routing, zend-route

我想在我的网址中使用 .htm 之类的扩展名。有没有办法做到这一点？

我定义了以下规则：

```
frontend.route = '/:standort/:id' 
```

当我使用以下

```
frontend.route = '/:standort/:id.htm' 
```

那么变量的名称是 id.htm，就像在 $params["id.htm"] 中一样。我如何告诉 Zend 框架使用什么作为变量？

问候

//编辑

我的完整配置现在看起来像这样：

```
frontend.type = 'Zend_Controller_Router_Route_Regex'
frontend.route = '/(.?)/(\w+?\.htm)'
frontend.defaults.module = 'frontend'
frontend.defaults.controller = 'index'
frontend.defaults.action = 'index'
frontend.defaults.standort = 'national'
frontend.map.1 = 'standort'
frontend.map.2 = 'id' 
```

这就是我加载配置的方式

```
$file = APPLICATION_PATH . '/modules/' . $module . '/configs/routing.ini';

        if(Zend_Loader::isReadable($file)){
            $config = new Zend_Config_Ini($file);
            $router = Zend_Controller_Front::getInstance()->getRouter();
            $router->addConfig($config);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:51:35.287

您可以使用正则表达式路由执行此操作：

```
frontend.type = "Zend_Controller_Router_Route_Regex"
frontend.route = '/(.?)/(\w+?\.htm)'
frontend.map.1 = "standort"
frontend.map.2 = "id" 
```

但除非您试图保留现有的 URL 结构，否则我只会将 .htm 排除在外 - 它没有任何用处。

# parsing - 野牛解析器错误

> ID：13808165
> 
> 赞同：1
> 
> 时间：2012-12-10T19:54:13.783
> 
> 标签：parsing, bison, lex, flex-lexer, lexical-analysis

我在我的 lex 文件文件中收到以下错误我不知道为什么会发生每个错误都与返回给解析器的每个令牌有关

```
 lexical.l: In function âyylexâ:
lexical.l:29: error: expected expression before â;â token
lexical.l:30: error: âCALLâ undeclared (first use in this function)
lexical.l:30: error: (Each undeclared identifier is reported only once
lexical.l:30: error: for each function it appears in.)
lexical.l:31: error: âIDâ undeclared (first use in this function)
lexical.l:32: error: âNUMâ undeclared (first use in this function)
lexical.l:36: error: âRELOPâ undeclared (first use in this function)
lexical.l:37: error: âADDOPâ undeclared (first use in this function)
lexical.l:38: error: âMULOPâ undeclared (first use in this function)
lexical.l:39: error: âASSIGNâ undeclared (first use in this function)
lexical.l:40: error: âANDâ undeclared (first use in this function)
lexical.l:41: error: âORâ undeclared (first use in this function)
lexical.l:42: error: âNOTâ undeclared (first use in this function) 
```

这是我的 lex 文件，用于向解析器发送令牌

```
%{
#include <stdio.h>
#include"bison.tab.h"
void showToken(char*);
%}

%option yylineno
%option noyywrap
digit [0-9]
letter [a-zA-Z]
whitespace [ \t]

%%
"else"                      {return ELSE;}
"real"                      {return REAL;}
"integer"                   {return INTEGER;}
"write"                     {return XWRITE;}
"while"                     {return WHILE;}
"end"                       {return END;}
"do"                        {return DO;}
"if"                        {return IF;}
"then"                      {return THEN;}
"program"                   {return XPROGRAM;}
"function"                  {return FUNCTION;}
"return"                    {return XRETURN;}
"read"                      {return XREAD;}
"var"                       {return VAR;}
"for"                       {return FOR;}
"begin"                     {return BEGIN;}
"call"                      {return CALL;}
{letter}({letter}|{digit})*         {return ID;}
{digit}{digit}*(("."{digit}{digit}*)?)      {return NUM;}
{digit}{digit}*({letter}|{digit})*      printf("Lexical Error");
[(),:;.]                return yytext[0]; 
^[\t ]+                 ;
(==|<>|<|<=|>|>=)           {return RELOP;}
(\+|-)                  {return ADDOP;}
(\*|\/)                 {return MULOP;}
(=)                 {return ASSIGN;}
(&&)                    {return AND;}
(\|\|)                  {return OR;}
(!)                 {return NOT;}
{whitespace}+               ;
"/*".*"*/"              ;
.                   {   
                    printf("Lexical Error");
                    exit(0);
                    }

%%
void showToken(char* name){
    printf("<%s,%s>",name,yytext);
} 
```

返回的令牌应该是大写字母还是无关紧要？我应该在此处包含解析器文件还是仅包含 tab.c 文件就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:10:11.797

您不能将该名称`BEGIN`用作标记名称，因为flex`BEGIN`已经将其作为其他名称。`#define`我不知道为什么会在第一个错误（第 29 行）之后产生错误，但您应该先尝试修复它，如果没有帮助，请粘贴`bison.tab.h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:06:07.037

这些错误告诉您，您尝试返回的各种标记（`CALL`、`ID`、`NUM`、`RELOP`等）尚未定义。您包含该`bison.tab.h`文件，这意味着您在文件中缺少`%token`这些标记的声明`.y`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-19T05:06:44.877

我遇到了类似的问题-未声明的令牌（在此函数中首次使用）。所以我尝试将我的 lex 和 yacc 文件复制到另一个文件夹并执行 bison 和 flex 命令并再次编译文件，问题得到解决。

# c# - 递归和 await / async 关键字

> ID：13808166
> 
> 赞同：33
> 
> 时间：2012-12-10T19:54:22.097
> 
> 标签：c#, recursion, async-await

我对`await`关键字的工作原理有一个脆弱的掌握，我想扩展我对它的理解。

仍然让我头晕目眩的问题是递归的使用。这是一个例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TestingAwaitOverflow
{
    class Program
    {
        static void Main(string[] args)
        {
            var task = TestAsync(0);
            System.Threading.Thread.Sleep(100000);
        }

        static async Task TestAsync(int count)
        {
            Console.WriteLine(count);
            await TestAsync(count + 1);
        }
    }
} 
```

这显然抛出了一个`StackOverflowException`.

我的理解是因为代码实际上是同步运行的，直到第一个异步操作，之后它返回一个`Task`包含异步操作信息的对象。在这种情况下，没有异步操作，因此它只是在它最终会得到一个`Task`返回的错误承诺下不断递归。

现在稍微改变一下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TestingAwaitOverflow
{
    class Program
    {
        static void Main(string[] args)
        {
            var task = TestAsync(0);
            System.Threading.Thread.Sleep(100000);
        }

        static async Task TestAsync(int count)
        {
            await Task.Run(() => Console.WriteLine(count));
            await TestAsync(count + 1);
        }
    }
} 
```

这个不扔`StackOverflowException`。我可以*理解*它为什么起作用，但我更倾向于将其称为直觉（它可能涉及如何安排代码使用回调来避免构建堆栈，但我无法将这种直觉转化为解释）

所以我有两个问题：

*   第二批代码如何避免a `StackOverflowException`？
*   第二批代码会不会浪费其他资源？（例如，它是否在堆上分配了大量的 Task 对象？）

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T19:57:37.497

任何函数中直到第一个等待的部分都是同步运行的。在第一种情况下，它会因此而陷入堆栈溢出 - 没有任何东西会中断调用自身的函数。

第一个 await （它不会立即完成 - 这很可能是您的情况）导致函数返回（并放弃其堆栈空间！）。它将其余部分排队作为延续。TPL 确保延续永远不会嵌套太深。如果存在堆栈溢出的风险，则继续排队到线程池，重置堆栈（开始填满）。

**第二个例子仍然可以溢出！**如果`Task.Run`任务总是立即完成怎么办？（这不太可能，但可以通过正确的操作系统线程调度来实现）。然后，异步函数将永远不会被中断（导致它返回并释放所有堆栈空间），并且会产生与情况 1 相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T05:12:20.490

在您的第一个和第二个示例中， TestAsync 仍在等待对自身的调用返回。不同之处在于递归是在第二种方法中打印并将线程返回到其他工作。因此递归不够快，不足以成为堆栈溢出。但是，第一个任务仍在等待，最终计数将达到其最大整数大小，否则将再次引发堆栈溢出。关键是调用线程被返回，但实际的异步方法被安排在同一个线程上。基本上，TestAsync 方法在等待完成之前会被遗忘，但它仍保留在内存中。允许线程做其他事情，直到等待完成，然后该线程被记住并在等待停止的地方完成。额外的等待调用存储线程并再次忘记它，直到等待再次完成。直到所有等待都完成并且方法因此完成，TaskAsync 仍在内存中。所以，事情就是这样。如果我告诉一个方法做某事，然后调用等待任务。我在其他地方的其余代码继续运行。当 await 完成时，代码会重新回到那里并完成，然后回到它之前的那个时间正在做的事情。在您的示例中，您的 TaskAsync 始终处于墓碑状态（可以这么说），直到最后一次调用完成并将调用返回到链中。当 await 完成时，代码会重新回到那里并完成，然后回到它之前的那个时间正在做的事情。在您的示例中，您的 TaskAsync 始终处于墓碑状态（可以这么说），直到最后一次调用完成并将调用返回到链中。当 await 完成时，代码会重新回到那里并完成，然后回到它之前的那个时间正在做的事情。在您的示例中，您的 TaskAsync 始终处于墓碑状态（可以这么说），直到最后一次调用完成并将调用返回到链中。

编辑：我一直说存储线程或那个线程，我的意思是例程。它们都在同一个线程上，这是您示例中的主线程。对不起，如果我让你感到困惑。

# orchardcms - 在任意位置的一页中有两个相同类型的字段。

> ID：13808167
> 
> 赞同：2
> 
> 时间：2012-12-10T19:54:26.263
> 
> 标签：orchardcms

我创建了 CategoryPart 并向其中添加了两个文本字段。我想在两个文本字段数据之间的页面中添加一些自定义数据。问题是当我想在 Placement.info 中指定文本字段的位置时，页面中的所有文本字段只有一个 Shap“Fields_Common_Text”，因此我无法为具有相同类型的不同字段指定不同的位置。在果园有什么办法吗？提前致谢。

我的 Placement.info 是这样的：

```
 <Placement>
      <Match DisplayType ="Detail">
         <Place Parts_Category="Content:9"></Place>
        <Place Fields_Common_Text="Content:10"></Place> 
      </Match>
   </Placement> 
```

驱动中的显示方法：

```
 protected override DriverResult Display(CategoryPart part, string displayType, dynamic shapeHelper)
    {          
        return ContentShape("Parts_Category", () => shapeHelper.Parts_Category(CategoryPart: part));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:24:30.820

就在这里。您可以使用形状类型和字段名称指定项目的位置。例如，如果您的文本字段名为`CategoryName`and `CategoryType`，您可以定义以下位置：

```
<Placement>
  <Match DisplayType ="Detail">
     <Place Fields_Common_Text-CategoryName="Content:9"></Place>
     <Place Fields_Common_Text-CategoryType="Content:10"></Place> 
  </Match> 
```

# java - 如何在数组列表中制作 2 个所有内容？

> ID：13808170
> 
> 赞同：-3
> 
> 时间：2012-12-10T19:54:43.507
> 
> 标签：java, arraylist, double

```
public static void main(String[] args){
    List<Integer> two = new ArrayList<Integer>;
    two.add("Kyle");
    two.add("Randy");
    two.add("Shaun"); 
```

这个程序的目标是制作所有字符串中的两个，这样它就会像这样打印出来，但我不确定我会怎么做。

凯尔

凯尔

兰迪

兰迪

肖恩

肖恩

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:57:31.063

嗯...您可以提供类似静态实用程序方法的东西，它遍历集合，将每个条目打印两次，

```
private static void print(List<String> list){
    for(String s : list){
        System.out.println(s);
        System.out.println(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:00:30.437

试试这个

```
List<String> strings = new ArrayList<String>();
List<String> strings2 = new ArrayList<String>();
for (String s : strings) {
  strings2.add(s);
  strings2.add(s);
}

for(String s : strings2){
    System.out.print(s);
} 
```

# php - 在 PHP 中解析 mysql 结果并返回到 Flot

> ID：13808177
> 
> 赞同：0
> 
> 时间：2012-12-10T19:54:59.237
> 
> 标签：php, mysql

我正在从 MySQL 数据库中提取数据并使用 Flot 进行绘图。我的问题出在我们的数据库设计中。
我有 1 个包含以下列的表：

1.  ID（自动递增）（键）
2.  时间戳
3.  SensorData（看起来像：34534.3 32452.4 23454.6 6523.45 67546.4 2233）

我想解析我的传感器数据，以便可以使用单个传感器数据创建 Flot 图。现在，我能够绘制 ID vs Timestamp 并且有效。这是我的代码：

```
 <html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples</title>
    <link href="layout.css" rel="stylesheet" type="text/css">
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/flot/excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="js/flot/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="js/flot/jquery.flot.js"></script>
 </head>
    <body>
    <h1>Title</h1>

    <div id="placeholder" style="width:600px;height:300px;"></div>

<?php

    $server = "www.freesql.org";
    $user="username";
    $password="password";
    $database = "database";

    $connection = mysql_connect($server,$user,$password);
    $db = mysql_select_db($database,$connection);

    $query = "SELECT Id, localtme FROM varia";
    $result = mysql_query($query);

    while($row = mysql_fetch_assoc($result))
    {
        $dataset1[] = array($row['Id'],$row['localtme']);
    }
?>

<script type="text/javascript">
$(function () {
    var dataset1 = <?php echo json_encode($dataset1); ?>;

    $.plot($("#placeholder"), [ dataset1 ]);
});
</script>
 </body>
</html> 
```

# javascript - 节流函数和事件委托

> ID：13808178
> 
> 赞同：1
> 
> 时间：2012-12-10T19:54:59.533
> 
> 标签：javascript, event-delegation, throttling

我的问题，我想去抖动函数调用，但与调用函数的范围有关。

在我的示例中，我查找事件委托的点击并消除点击。

这可行，但去抖动不是特定于元素的！

[http://jsbin.com/itapuf/2/edit](http://jsbin.com/itapuf/2/edit)

有没有优雅的方法？

* * *

**编辑：** 更具体地说（我的英语不是最好的）

我想替换这段代码：

```
$('#blue').on('click',function(id){
    addBeep('trigger');
}.throttle(300) );

$('#green').on('click',function(id){
    addBeep('trigger');
}.throttle(300) ); 
```

通过这个（委托事件）：

```
$('#btns').on('click','button', function(id){
    addBeep('trigger');
}.throttle(300) ); 
```

但如果我这样做，可能会丢失对特定元素的最新点击。

我需要类似的东西：

```
$('#btns').on('click','button', function(id){
    addBeep('trigger');
}.throttle(300, {bindToScopt:true} ) ); 
```

但是如何改变油门功能使其像这样工作呢？

或者这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:32:46.003

我想，您可能想在适当的地方添加以下内容

```
 e.stopPropagation() 
```

这会在冒泡阶段停止事件的所有传播。要获得完整的跨浏览器体验，请执行

```
function doSomething(e) {
    if (!e) var e = window.event;
    e.cancelBubble = true;
    if (e.stopPropagation) e.stopPropagation();
} 
```

[请务必阅读quirksmode.org 上有关事件处理](http://www.quirksmode.org/js/events_order.html)的完整帖子

# java - 通过 Random 类为数组生成数据并排序

> ID：13808184
> 
> 赞同：1
> 
> 时间：2012-12-10T19:55:17.583
> 
> 标签：java, arrays, random

使用 Random 类获取 0 到 99 之间的数字并将它们存储到数组中。使用 for 循环获取每个随机数，将每个随机数存储到数组中，然后打印每个值。

然后使用冒泡排序对数组进行排序，并打印出存储的数组。

这是我的程序

```
import java.util.Random;

public class Randomness
{
    public static void main(String[] args)
    {
        Random randomNum = new Random();
        for (int number = 0; number <= 99; ++number)
        {
            int num = randomNum.nextInt(100);

            System.out.print(num + " ");

            int numValues = num;
            int [] values = new int[numValues];

            boolean swap;
            do
            {
                swap = false;
                int temp;
                for (int count = 0; count < numValues-1; count++)
                    if (values[count] > values[count+1])
                    {
                        temp = values[count];
                        values[count] = values[count+1];
                        values[count+1] = temp;
                        swap = true;
                    }
            } while (swap);

            System.out.print(values[count] + " ");
        }
    }
} 
```

我得到错误

> System.out.print(values[count] + ""); 需要数组，但随机找到。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:59:08.637

您没有在数组中创建任何随机值。您正在创建一个随机长度（0 到 99 之间）的数组。您需要随机初始化数组的每个元素：

```
 Random randomNum = new Random();
    int numValues = 100;
    int[] values = new int[numValues];
    for (int number = 0; number < numValues; ++number)
    {
        int num = randomNum.nextInt(100);
        System.out.print(num + " ");

        values[number] = num;
    } 
```

然后进行冒泡排序。

# python - 如何从 Javascript(jquery/ajax) 调用 Python 脚本中的特定函数/方法

> ID：13808187
> 
> 赞同：3
> 
> 时间：2012-12-10T19:55:23.690
> 
> 标签：python, ajax, function

澄清一下：我通过 Apache Web 服务器将其作为 cgi 运行。这不是问题我的问题是关于当我通过 ajax 请求调用 Python 脚本时指定运行哪个函数的方法。

我读了一个教程，说将我想要调用的函数名作为 var 传递。我这样做了。在 Python 中，我尝试过

这是我的ajax函数

```
 $(document).ready(function() {
    $.ajax({
       url: "monStat.py",
       type: "post",
       data: {'callFunc':'isRunning'},
       success: function(response){
           $('#blurg').html(response).fadeIn(1500);
       }
    });
 }); 
```

这是蟒蛇

```
 def main():
      if callFunc:
           funcResp = isRunning()
      else:
           print("No function passed")

 def isRunning( process_name ):
    ''' the content ''' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:04:39.620

您需要使您的脚本具有网络功能。我没有使用过 CGI，所以这里有一个[Flask](http://flask.pocoo.org/)的例子：

```
from flask import Flask, request

app = Flask(__name__)

@app.route('/is_running', methods=['POST'])
def isRunning():
    process_name = request.values.get('name', None)

    ''' the content '''

if __name__ == '__main__':
    app.run(host='127.0.0.1', port=5000) 
```

现在，您只需发送请求到`/is_running`：

```
$.ajax({
   url: "/is_running",
   type: "post",
   data: {'name': 'ls'},
   success: function(response){
       $('#blurg').html(response).fadeIn(1500);
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:02:38.550

即使您没有提及您使用的是哪种 Web 框架（如果有），我还是会从您的 url 的命名中假设您正在尝试直接调用服务器上的 python 脚本。

唯一可行的方法是，如果您的`monStat.py`脚本被构造为[CGI 脚本](http://docs.python.org/2/library/cgi.html)，并相应地托管在您的服务器上（以执行 CGI 脚本的方式）。您的 javascript 暗示您要向该脚本发出 POST 请求，因此您的 python 脚本将需要接受 POST 请求，然后读取参数并对其进行操作。您不能只在 javascript 中将可调用对象命名为字符串，并让 CGI 脚本自动知道要运行什么。这是提供高级 URL 处理的 Web 框架的位置。

如果您试图通过 url 调用常规的 python 脚本，那是行不通的。最基本的原始方法是使用 python [CGI 模块](http://docs.python.org/2/library/cgi.html)。这对于刚开始学习和入门很有用，但这是一种非常低效且过时的方法。您可能应该研究一个 Web 框架： [Python WebFrameworks](http://wiki.python.org/moin/WebFrameworks)

**更新**

正如您所说，您实际上正在使用 CGI 脚本......
“路由”是您在使用 Web 框架时免费获得的东西。它将传入的请求带入主循环并决定应该去哪里处理它。当您**仅**使用CGI 时，您必须自己执行此操作。每次您向 CGI 脚本发出请求时，它都会像普通脚本一样执行，具有普通入口点。

在该入口点中，您必须阅读请求。如果请求是 POST 并且包含“is_running”，那么您可以将该请求转发给您的`is_running()`处理程序。“函数名”只是字符串数据。由您的代码读取请求并确定要执行的操作。

这是一个超级粗略的示例，您可以在其中将一些可接受的处理程序映射到您允许的函数：

```
#!/usr/bin/env python
import cgi
import cgitb
cgitb.enable()

def isRunning(form):
    print "Content-Type: text/html\n" 
    print "isRunning()"
    print form.getvalue('name') 

def _error(*args):
    print "Content-Type: text/html\n" 
    print "Error"

HANDLERS = {
    'isRunning': isRunning
}

def main():
    form = cgi.FieldStorage()

    h_name = form.getvalue('callFunc')
    handler = HANDLERS.get(h_name, _error)
    handler(form)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:34:26.787

这是一个开始：

```
import cgi
fs = cgi.FieldStorage()

print "Content-type: text/plain\n"
for key in fs.keys():
    print "%s = %s" % (key, fs[key].value) 
```

# javascript - 使用javascript从服务器加载二进制图像到图像

> ID：13808190
> 
> 赞同：12
> 
> 时间：2012-12-10T19:55:28.707
> 
> 标签：javascript, html, dom, binary, xmlhttprequest

我正在通过 XMLHttpRequest 从我的服务器以二进制格式加载 jpeg 图像（我需要这种方式）。它不是 base64 编码的。

是否可以使用 javascript 将其转换为 img 对象？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T20:04:10.153

如果 的字符编码`XMLHttpRequest`已设置为[不会更改二进制数据的](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Handling_binary_data)内容，或者您​​已[设置响应类型](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)`.responseText`，则可以运行`btoa`（将其放入 base64 并让您将其分配为数据 URI）或分别访问`.response`二进制数据。

* * *

假设您的实例已命名`xhr`，并且您在do之前`xhr.send`但之后使用 charset 方法`xhr.open`

```
xhr.overrideMimeType("text/plain; charset=x-user-defined"); 
```

那么当你在`200 OK`

```
var dataURI = 'data:image/jpeg;base64,' + btoa(xhr.responseText); 
```

然后您可以将其*设置*为`<img>`.

* * *

再次假设`xhr`，这个时间`.response`方法；之间`.open`和`.send`,

```
xhr.responseType = "arraybuffer"; 
```

然后在`200 OK`

```
var arrayBufferView = new Uint8Array(xhr.response), // can choose 8, 16 or 32 depending on how you save your images
    blob = new Blob([arrayBufferView], {'type': 'image\/jpeg'}),
    objectURL = window.URL.createObjectURL(blob); 
```

然后您可以将其*设置*为`<img>`. [**例子**](http://jsfiddle.net/ZSJpc/2/)

# android - Android：在图像下方添加文本

> ID：13808191
> 
> 赞同：0
> 
> 时间：2012-12-10T19:55:43.130
> 
> 标签：android, layout

我正在尝试安装一个图像，并在其下方有一个带有一些黑色背景和白色文本的布局。我的问题是布局最终在图像和文本之间留下了空间，我不明白为什么：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scaleType="fitStart" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="15dp"
        android:layout_below="@+id/image" >

        <TextView
            style="@style/text_overlay"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

         <!-- Couple more elements -->

    </RelativeLayout>
</RelativeLayout> 
```

我希望这第二个 15dp 的 RelativeLayout 触摸图像的底部，但除非我将图像高度更改为较小的值，否则它会留下一些空间。此布局指定如何在其下方显示图像 + 一些文本，但我总共有 4 个图像使用此布局以 2x2 显示加载到屏幕上。（每张图片占屏幕的 25%）。

知道如何使 RelativeLayout 与图像底部完全对齐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:06:05.037

尽管我认为您可能会查看我的报纸拼图应用程序的启动器布局，但我并不完全理解您的问题...

*   [http://code.google.com/p/newspaper-puzzles/source/browse/np/res/layout/launcher_layout.xml](http://code.google.com/p/newspaper-puzzles/source/browse/np/res/layout/launcher_layout.xml)

或者也许从 Open Sudoku Game 中查看此处的数字键盘布局：

*   [http://code.google.com/p/newspaper-puzzles/source/browse/np/res/layout/s_im_numpad.xml](http://code.google.com/p/newspaper-puzzles/source/browse/np/res/layout/s_im_numpad.xml)

如果可能的话，使用 ADT 工具来获得正确的布局可能是最好的，但我知道有时很难使用它来获得特定的结果，我仍然建议使用 Android 开发工具中包含的 xml 工具。

*   [http://developer.android.com/tools/help/adt.html#graphical-editor](http://developer.android.com/tools/help/adt.html#graphical-editor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:10:55.033

如果您尝试将文本直接放在 ImageView 下方，我建议您使用复合可绘制对象。

有关详细信息，请参阅以下问题：[如何使用复合可绘制对象而不是包含 ImageView 和 TextView 的 LinearLayout](https://stackoverflow.com/questions/8318765/how-do-i-use-a-compound-drawable-instead-of-a-linearlayout-that-contains-an-imag)

# c++ - 我的程序中的 cin 无法正常工作。我该如何解决？

> ID：13808192
> 
> 赞同：2
> 
> 时间：2012-12-10T19:55:50.947
> 
> 标签：c++, cin

我对cin有一些问题。当我输入一个字符而不是整数时，cin 不起作用，之后我什至无法输入新值。我该怎么办？我已经尝试过 fflush(stdin)

```
struct PersonList
{
    Person person;
    PersonList* personListPtr;
};

void addPerson(PersonList*& ptr, int position);
void deletePersonList(PersonList* ptr);

int main()
{
    PersonList* personListPtr = NULL;

    int flag = 0;
    int pos = 0;
    int i;

    while(flag != 27)
    {
        system("cls");
        cout << "1 - add objects\n"
            << "2 - delete objects\n"
            << "ESC - exit\n";
        switch(flag)
        {
        case '1':
            cout << "Enter position: ";
            **cin >> pos;**
            addPerson(personListPtr, pos);
            break;
        case '2':
            break;
        case '3':
            break;
        }
        flag = _getch();
    }

    deletePersonList(personListPtr);

    return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:13:00.967

你似乎混合了几个成语。我不知道是什么 `_getch()`，但我无法想象它无论如何兼容`std::cin`; `std::cin`例如，将（或可能）提前阅读，阅读您的标志字符。您不能简单地混合来自同一来源的不同流。

至于您描述的特定问题，一旦您输入了无法转换为您正在阅读的内容的内容，流就会进入错误状态（您应该在使用该值之前对其进行检查），并且对其进行的所有操作都将变为 no-操作直到您清除错误 ( `std::istream::clear()`)。但这并不能解决其他问题。如果您坚持使用类似的东西`_getch()`，那么您将不得不将它用于您的所有输入，为位置输入构建一个字符串，并使用`std::istringstream`它来转换它。根据函数实际执行的操作，您可能还必须处理退格、回车甚至回显等操作。

# hadoop - 以 Linux 为主、Windows 7 为从的 Hadoop 集群

> ID：13808195
> 
> 赞同：2
> 
> 时间：2012-12-10T19:56:23.273
> 
> 标签：hadoop

我想建立一个 linux fedora 作为 master 和 windows 7 机器作为 slave 的 hadoop 环境。这种组合是否可行，如果可以，我是否需要在 Windows 7 中安装 cygwin？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-10T20:09:30.677

好的做法是不要在 Windows 上运行 hadoop（就这么简单）。

你为什么要这样做？如果您想测试某些东西，请使用伪分布式模式（在一台机器上运行所有 hadoop 服务）

另外，我建议使用一些 hadoop 发行版，例如 cloudera。此链接逐步解释了如何设置它。

[https://ccp.cloudera.com/display/CDH4DOC/CDH4+Installation+Guide](https://ccp.cloudera.com/display/CDH4DOC/CDH4+Installation+Guide) 这很简单，什么是重要的，非常简短的文档

# perl - CSV 导入 MySQL

> ID：13808197
> 
> 赞同：1
> 
> 时间：2012-12-10T19:56:27.837
> 
> 标签：perl

嗨，当我尝试运行以下 perl 脚本将 csv 文件导入现有的 mysql 数据库表时，我不断收到错误消息。每次我运行它时，我都会收到消息“在 /home/perl/dep_import_2.pl 第 10 行死亡。

任何帮助，将不胜感激

谢谢

```
#!/usr/bin/perl

use DBI;
use DBD::mysql;
use warnings "all";

if ($#ARGV != 0) {
   print "Usage: dep_import_2.pl filename\n";
     die;
}
$filename = $ARGV[0];

# MySQL CONFIG VARIABLES
$host = "localhost";
$user = "standard";
$pw = "standard";

$database = "data_track";
$dsn = "DBI:mysql:database=" . $database . ";host=" . $host;

$dbh = DBI->connect($dsn, $user, $pw)
   or die "Can't connect to the DB: $DBI::errstr\n";

print "Connected to DB!\n";

open FILE, "/home/dep/new_study_forms_2.csv", $filename or die $!;

$_ = <FILE>;
$_ = <FILE>;

while (<FILE>) {
    @f = split(/,/, $_);

    $sql = "INSERT INTO dep (date, subject, weight, size, time, hi_pre, hi_post, hi_afternoon, hi_test, actical_on, actical_off, saggital_1, saggital_2, crown_heel1, crown_heel2, crown_rump1, crown_rump2, scan, record_number, tap, sample, dye, left_chip, right_chip) VALUES('$f[0]', '$f[1]', '$f[2]', '$f[3]' '$f[4]', '$f[5]', '$f[6]', '$f[7]', '$f[8]', '$f[9]', '$f[10]', '$f[11]', '$f[12]', '$f[13]', '$f[14]', '$f[15]', '$f[16]', '$f[17]', '$f[18]', '$f[19]', '$f[20]', '$f[21]', '$f[22]', '$f[23]')";
    print "$sql\n";
    my $query = $dbh->do($sql);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:32:38.720

您的代码存在一些问题。首先，也是最重要的，你没有使用

```
use strict;
use warnings; 
```

这很糟糕，因为没有它们，您将无法获得有关代码中错误的信息。

正如其他人指出的那样，脚本死亡的原因`$#ARGV`是不是零。这意味着您向脚本传递的参数太少或太多。脚本的参数必须完全是一个，就像用法声明所说的那样。

但是，这并不能解决您的问题，因为您在下面的公开声明被搞砸了。我的猜测是你试图直接添加你的文件名。这一行：

```
open FILE, "/home/dep/new_study_forms_2.csv", $filename or die $!; 
```

它可能会给你错误`unknown open() mode ...`。应该是

```
open FILE, "<", $filename or die $!; 
```

然后你`/home/dep/new_study_forms_2.csv`在命令行上传递给脚本，假设这是要使用的正确文件。

此外，在您的查询字符串中，您不应插入变量，而应使用占位符，如[DBI 文档](http://search.cpan.org/perldoc?DBI#Placeholders_and_Bind_Values)中所述。占位符将为您处理报价并避免任何数据损坏。为了使您的查询行更简单，您可以执行以下操作：

```
my $sth = $dbh->prepare(
    "INSERT INTO dep (date, subject, weight, size, time, hi_pre, hi_post, 
     hi_afternoon, hi_test, actical_on, actical_off, saggital_1, saggital_2,
     crown_heel1, crown_heel2, crown_rump1, crown_rump2, scan, record_number, 
     tap, sample, dye, left_chip, right_chip) 
     VALUES(" . join(",", ("?") x @f) . ")");
$sth->execute(@f); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T18:25:45.650

这是一个使用[Text::CSV](https://metacpan.org/module/Text%3a%3aCSV)正确解析 CSV 的脚本。它假定第一行包含列名，然后分批加载 CSV，每 100 次插入后提交。每个参数（用户、密码、数据库）都可以通过命令行选项进行配置。用法是内嵌的 POD 文档。

```
#!/usr/bin/env perl
use strict;
use warnings qw(all);

use DBI;
use Getopt::Long;
use Pod::Usage;
use Text::CSV_XS;

=pod

=head1 SYNOPSIS

    dep_import_2.pl --filename=file.csv --host=localhost --user=standard --pw=standard --database=data_track

=head1 DESCRIPTION

Loads a CSV file into the specified MySQL database.

=cut

my $host = 'localhost';
my $user = 'standard';
my $pw = 'standard';
my $database = 'data_track';
my $commit = 100;

GetOptions(
    'help'          => \my $help,
    'filename=s'    => \my $filename,
    'host=s'        => \$host,
    'user=s'        => \$user,
    'pw=s'          => \$pw,
    'database=s'    => \$database,
    'commit=i'      => \$commit,
) or pod2usage(q(-verbose) => 1);
pod2usage(q(-verbose) => 2) if $help;

my $dbh = DBI->connect("DBI:mysql:database=$database;host=$host", $user => $pw)
    or die "Can't connect to the DB: $DBI::errstr";

my $csv = Text::CSV_XS->new
    or die "Text::CSV error: " . Text::CSV->error_diag;

open(my $fh, '<:utf8', $filename)
    or die "Can't open $filename: $!";

my @cols = @{$csv->getline($fh)};
$csv->column_names(\@cols);

my $query = "INSERT INTO dep (@{[ join ',', @cols ]}) VALUES (@{[ join ',', ('?') x (scalar @cols) ]})";
my $sth = $dbh->prepare($query);

my $i = 0;
while (my $row = $csv->getline_hr($fh)) {
    $sth->execute(@{$row}{@cols});
    $dbh->commit if ((++$i % $commit) == 0);
}

$dbh->commit;
$dbh->disconnect;

$csv->eof or $csv->error_diag;

close $fh; 
```

# c# - Linq to XML 单独处理结果而不是列出

> ID：13808201
> 
> 赞同：1
> 
> 时间：2012-12-10T19:56:44.727
> 
> 标签：c#, xml, linq

我正在使用 C# 中的解析器从多个 xml 文件中获取数据并将它们放入我自己的数据库中。

现在我有这个工作的代码：

```
 List<CaseFile> caseFiles =
            (
                from e in XDocument.Load(xmlDoc).Root.Elements("application-information").Elements("file-segments").Elements("action-keys").Elements("case-file")
                select new CaseFile
                { (......)
}).toList(); 
```

这将创建一个 CaseFile 对象列表，我稍后将其发送到其他方法以将它们的数据放入我的数据库中。这样做的问题是我需要一次解析许多文件，有些文件大到 1GB，没有一个小于 200MB，所以这对内存产生了巨大的需求。

有没有办法修改我的语句，以便对于它找到的每个 CaseFile，它会立即将其发送到其他方法，而不必先创建它们的完整列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:19:33.193

`XDocument.Load`将首先将整个文件加载到内存中。`IEnumerable`对于CaseFire 对象的快速搜索元素返回并用于`XmlReader`逐个节点读取文件（假设您只有`case-file`节点，`root/application-information/file-segments/action-keys`否则您将需要更多逻辑）：

```
static IEnumerable<CaseFile> FindCaseFiles(string uri)
{
    using (XmlReader reader = XmlReader.Create(uri))
    {
        reader.MoveToContent();

        while (reader.Read())
        {
            switch (reader.NodeType)
            {
                case XmlNodeType.Element:
                    if (reader.Name == "case-file")
                    {
                        XElement el = XElement.ReadFrom(reader) as XElement;
                        if (el != null)
                            yield return new CaseFile() {...};
                    }
                    break;
            }
        }
    }
} 
```

用法：

```
foreach(CaseFile file in FindCaseFiles(path_to_xml))
{
    // we have CaseFile here immediately after it found in xml file
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:15:49.133

只需删除 ToList 并将您的变量声明为 IEnumerable（或仅使用 var）就可以解决问题。尽管将所有文件加载到内存中，但对于大文件可能不会指示使用 linq to XML。您应该考虑改用 à XmlReader

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:26:04.627

这里的问题是您在 LINQ 表达式的结果上调用 ToList。这将枚举所有值并将所有内容写入内存。LINQ-Expression 本身不会枚举这些值。它只会返回一个 IEnumerable。LINQ 表达式不会创建任何 CaseFile 对象。

如果您只是遍历 LINQ-Expression 的结果，它将读取一个接一个的值：

```
var caseFiles = from e in XDocument.Load(xmlDoc).Root.
                    Elements("application-information").
                    Elements("file-segments").
                    Elements("action-keys").
                    Elements("case-file")
                select new CaseFile { ... };

foreach (CaseFile cf in caseFiles)
{
    DoTheWork(cf);
} 
```

这样，任何时候都只会创建一个 CaseFile 对象。

# c# - 在 Emgu CV 中划分 blob

> ID：13808204
> 
> 赞同：1
> 
> 时间：2012-12-10T19:57:04.773
> 
> 标签：c#, image-processing, blob, emgucv

我正在使用 Emgu CV 2.4.2 并希望执行以下算法：

1.  **获取 blob**
2.  **设置 ROI 以加快计算速度**
3.  **从 blob 中获取局部最小值的像素位置**
4.  **划分blob**
5.  **将边界矩形绘制成分割的斑点**

我已经完成了步骤 1-2 并使用 BGStatModel 提取了 blob。这是我得到的结果：

[斑点图片](http://chardavid.files.wordpress.com/2012/12/newbox.jpg)

我想在垂直投影中获得局部最小值的像素位置。得到它之后，我想划分blob并绘制这样的矩形：

[垂直投影图片](http://chardavid.files.wordpress.com/2012/12/vertical-projection.jpg)

我试图通过检查 blob 区域中的每个像素来获取局部最小值的像素位置，但这会使我的应用程序运行得非常慢。这是我的代码：

```
Point minPix = new Point(0,0);

//copy the foreground frame
Image<Gray, Byte> foreFrame_copy = foreFrame.Copy();

//find the contour
Contour<Point> contours = foreFrame.FindContours(
    CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE,
    RETR_TYPE.CV_RETR_EXTERNAL);

//looping every contour
while (contours != null)
{
    double PPixel = contours.Area;
    if (PPixel >= 1400)
    {
        //get the contour width
        WR = contours.BoundingRectangle.Width;
        //divide the contour using estimated pixel position
        Num = Convert.ToInt32(WR / 40);

    if (Num > 1)
    {
        //save the estimated pixel position for ROI in arraylist
        ArrayList XList = new ArrayList();
        for (int i = 1; i <= Num; i++)
        {
            int x = i * WR / Num;
            XList.Add(x);
        }

        //get the estimated pixel position 
        foreach (int pos in Xlist)
        {
            //roiWidth= 10px
            int roiWidth = (pos-5) + (pos+5);
            //roiHeight= 20px
            int roiHeight = 20;

            int pixValue = 0;
            //STEP 2: set the ROI to speed up computation
            foreFrame_copy.ROI = new Rectangle(contours.BoundingRectangle.X, contours.BoundingRectangle.Y, roiWidth, roiHeight);
            for (int i = (pos-5); i < roiWidth; i++)
            {
                for (int j = (pos-5); j < (pos+5); j++)
                {
                    pixValue = foreFrame_copy.Data[i, j, 0];
                    //find the white pixel
                    if (pixValue == 255) {
                        //find the position of minimum pixel
                        if (j < j-1) {
                        minPix.X = i;
                        minPix.Y = j;
                        }
                    }

                }
            }
        }

    }
    //draw the red rectangle
    estimatedFrame.Draw(contours.BoundingRectangle, new Bgr(Color.Red), 1);
    contours = contours.HNext;
}
else
{
    contours = contours.HNext;
}
}
//show frame in framebox
blobBox.Image = foreFrame_copy;
estimatedBox.Image = estimatedFrame; 
```

**请帮助我如何使用 Emgu CV 以最快的方式执行步骤 2-5。如果有人详细说明这三个步骤和一些代码，我将不胜感激。**

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:38:12.747

好的，所以问题现在变得更加清楚。我个人同意 mmgp 用户的观点，因为缺乏通用性，您作为参考的论文并不是那么好。它是针对一个非常特殊的场景进行编码的，并且对受控环境进行了一些强有力的假设。

我为您提供了一种计算垂直和水平投影以及绝对最大值点的方法作为一个很好的起点

```
 private void ComputeProjections(Image<Bgr, byte> inputImage)
    {                        
        Image<Gray, Byte> inputGrayImage = inputImage.Convert<Gray, Byte>();
        Matrix<float> imgMatHorizontal = new Matrix<float>(inputGrayImage.Height, 1, 1);
        Matrix<float> imgMatVertical = new Matrix<float>(1, inputGrayImage.Width, 1);

        inputGrayImage.Reduce<float>(imgMatHorizontal, REDUCE_DIMENSION.SINGLE_COL, REDUCE_TYPE.CV_REDUCE_AVG);
        inputGrayImage.Reduce<float>(imgMatVertical, REDUCE_DIMENSION.SINGLE_ROW, REDUCE_TYPE.CV_REDUCE_AVG);
        double minH, maxH, minV, maxV;
        Point minLocH, maxLocH, minLocV, maxLocV;
        imgMatHorizontal.MinMax(out minH, out maxH, out minLocH, out maxLocH);
        imgMatVertical.MinMax(out minV, out maxV, out minLocV, out maxLocV);

        Image<Gray, Byte> maskProvaH = new Image<Gray, byte>(new Size((int)(maxH - minH + 1), imgMatHorizontal.Rows));
        Image<Gray, Byte> maskProvaV = new Image<Gray, byte>(new Size(imgMatVertical.Cols, (int)(maxV - minV + 1)));

        for (int i = 0; i < imgMatHorizontal.Rows; i++)
            maskProvaH.Draw(new CircleF(new PointF((float)(imgMatHorizontal[i, 0] - minH), i), 1f), new Gray(255), 1);

        for (int i = 0; i < imgMatVertical.Cols; i++)
            maskProvaV.Draw(new CircleF(new PointF(i, (float)(imgMatVertical[0, i] - minV)), 1f), new Gray(255), 1);

        inputImage.Draw(new CircleF(new PointF(minLocV.X, minLocH.Y), 2), new Bgr(Color.Green), 1);
        //imageBoxProjected.Image = inputGrayImage;
        imageBoxHorizProj.Image = maskProvaH;
        //imageBoxVerticProj.Image = maskProvaV;

    } 
```

如果您有兴趣找到参考论文中的局部最大值，您可以开始实施简单的局部最大值搜索，例如（水平投影代码）：

```
List<Point> localMaxima = new List<Point>();
        imgMatHorizontal.MinMax(out minH, out maxH, out minLocH, out maxLocH);

        Image<Gray, Byte> maskProvaH = new Image<Gray, byte>(new Size((int)(maxH - minH + 1), imgMatHorizontal.Rows));
        for (int i = 0; i < imgMatHorizontal.Rows; i++)
            maskProvaH.Draw(new CircleF(new PointF((float)(imgMatHorizontal[i, 0] - minH), i), 1f), new Gray(255), 1);

        //// Absolute Horizontal Projection Maxima Drawing
        //inputGrayImage.Draw(new Cross2DF(new PointF(maxLocH.X, maxLocH.Y), 2, 2), new Gray(255), 2);

        // Local maximas search
        for (int i = imgMatHorizontal.Rows - 2; i > 1; i--)
        {
            float prev = imgMatHorizontal[i + 1, 0];
            float curr = imgMatHorizontal[i, 0];
            float next = imgMatHorizontal[i - 1, 0];
            if (curr >= prev && curr >= next)
                localMaxima.Add(new Point((int)curr, i));
        } 
```

此代码来自我的一个 youtube 演示：

[使用投影的面部特征演示](http://www.youtube.com/watch?v=ibjxxrLKcbY)

其余步骤非常简单，您可以根据自己的需要进行调整，或者按照论文中的建议遵循一些交叉比率阈值。

# android - Samsung Galaxy Camera Android API - 自定义相机应用程序

> ID：13808205
> 
> 赞同：4
> 
> 时间：2012-12-10T19:57:07.083
> 
> 标签：android, camera, galaxy

有没有人为三星 Galaxy 相机编写过任何自定义相机应用程序？ [http://www.samsung.com/us/photography/digital-cameras/EK-GC100ZWAATT](http://www.samsung.com/us/photography/digital-cameras/EK-GC100ZWAATT)

我有一个，但是在添加比任何照相手机都包含的更多功能时遇到了麻烦。例如，我想控制快门速度，就像您可以使用安装在设备上的相机应用程序一样。我无法弄清楚如何在代码中做到这一点。我已经阅读了相机 API 的文档：http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

那没有多大帮助。还查看了调试器输出，这是相当神秘的。只是想知道是否还有其他人在修补这款新相机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-09T14:39:15.680

XDA 有帮助！！

不需要 API。

这里的提示：`setParameters("mode", "m")`似乎是开始“黑客”参数的关键，如 ISO、光圈、快门，......

[http://forum.xda-developers.com/showthread.php?t=1997090&page=3#edit39210051](http://forum.xda-developers.com/showthread.php?t=1997090&page=3#edit39210051)

我还没有尝试过，破解它并享受吧！

**编辑**

现在我已经尝试过了，我可以设置 ISO、平滑变焦、测光、自动曝光锁、WBlock……
难的是让它与所有其他设备兼容：大部分 Galaxy Camera 功能都*隐藏*在`Parameters.flatten()`字符串，其他的也不存在。

**提示 0**：始终检查`Parameters.flatten();`发生了什么并使用它来实现您需要的关键字（尽管它并不总是有帮助）

**提示1**：对于您想要破解的每个功能，`set("mode", xxx)`在更改参数之前尝试（将xxx设置为[“smart-auto”，“m”，“program”]或自己测试其他模式值）

**提示 2**：始终`myParam=Camera.getParameters();`在任何其他`myParam.set();`呼叫之前使用。

**提示 3**：[这里](https://stackoverflow.com/questions/18712785/samsung-s4-zoom-does-not-support-smooth-zoom-issmoothzoomsupported-false/18886317?noredirect=1#comment37568162_18886317)是平滑缩放的方法（S4 缩放似乎有类似的行为）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T17:24:58.230

我也有三星 Galaxy 相机，我也在为它构建一个应用程序。我已经尝试联系三星 10 多次，但似乎没有人承认三星制造了相机。更不用说在 api 上获得任何帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T08:24:05.113

我告诉他们我正在为他们的相机 (EK-CG100) 开发一个 Android 应用程序，我需要更多关于某些事情的信息。他们的回答类似于“抱歉，我们的相机中还没有那个系统”。他们在跟我开玩笑吗？他们有什么样的人来回复电子邮件。这太可悲了。

# timezone - 如何在 .Net Micro Framework 4.2 中使用多个时区？

> ID：13808206
> 
> 赞同：2
> 
> 时间：2012-12-10T19:57:14.067
> 
> 标签：timezone, .net-micro-framework

我需要获取 3 个不同时区的当前时间。在 .net 微框架 v4.2 中似乎没有办法获取不同的时区信息。有谁知道我会怎么做？

# php - 使用 PHPThumb 裁剪图像

> ID：13808210
> 
> 赞同：1
> 
> 时间：2012-12-10T19:57:30.583
> 
> 标签：php, imagemagick, gd, phpthumb

[PHPThumb](http://phpthumb.sourceforge.net/)没有关于如何裁剪图像的非常清晰的文档。我一直在尝试将一些图像裁剪为**6.6:10**的比例，即我有**1280 x 854**的图像，我不想改变高度，但我希望减小宽度，以便比例达到 570:854，即大约**6.6:10**。然后它将正常调整大小到大约**180:270**，保持**6.6:10**的比例。

这是我尝试过的，它不是很成功。它就像图像甚至没有被裁剪。

```
phpThumb.php?src=http://imagedomain.com/image.jpg&sx=0&sy=0&sw=570&sh=854&f=jpg&q=95&h=270&w="; 
```

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T17:18:19.790

我直接使用类，而不是 URL 调用。在我的 Windows 开发盒上找不到 ImageMagick，所以它使用的是 GD。我并不太在意，因为它只用于开发而不是用于登台/直播。种植工作完美。

当我部署应用程序进行暂存时，发现裁剪不起作用。我发现设置以下内容会迫使它使用 GD，从而使裁剪工作：

```
$phpThumb->config_prefer_imagemagick = false; 
```

现在我只在裁剪时设置它，但将所有其他调整大小保留为默认设置，以便使用 ImageMagick。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:58:34.867

我不熟悉 PHPThumb，但如果你想要一个非常好的教程来解释一切是如何工作的 - [http://net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/](http://net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/) 我是基地我的缩略图生成器代码结合了： [http](http://us.php.net/manual/en/function.imagecopyresampled.php#77679) ://us.php.net/manual/en/function.imagecopyresampled.php#77679 +额外的东西来处理透明度。

# android - ArrayList 的 TypeToken 错误

> ID：13808213
> 
> 赞同：0
> 
> 时间：2012-12-10T19:57:30.883
> 
> 标签：android, json

我正在尝试遵循本教程 www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/ 而不是 webservice 我从本地 json 文件中获取数据。我已经实现了几乎所有东西，但我总是遇到同样的错误。logcat 显示：

```
java.lang.NoClassDefFoundError: src.blablabla.List_Messages$1
at src.blablabla.soundboard.List_Messages.onCreate(List_Messages.java:72) 
```

第 72 行是：

```
Type collectionType = new TypeToken<ArrayList<messages>>(){}.getType(); 
```

我不熟悉类型和类型令牌，我做错了什么？

为了给你更多的上下文，下面是我的其余代码，包括第 72 行

```
public class List_Messages extends Activity {
JSONArray myJsonArray = null;
String s = "";

//ListView that will hold our items references back to main.xml
ListView listView;
//Array Adapter that will hold our ArrayList and display the items on the ListView
MessagesAdapter arrayAdapter;     
//List that will host our items and allow us to modify that array adapter
ArrayList<messages> messagesArray=null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_messages);
    //Initialize ListView
    listView = (ListView)findViewById(R.id.listView);

  //Initialize our ArrayList
    messagesArray = new ArrayList<messages>();
    //Initialize our array adapter notice how it references the ress_list_row.xml layout
    arrayAdapter = new MessagesAdapter(List_Messages.this, R.layout.ress_list_row, messagesArray);

  //Set the above adapter as the adapter of choice for our list
    listView.setAdapter(arrayAdapter);

  //Pass the parameters if needed , if not then pass dummy one as follows
    Map<String, String> params = new HashMap<String, String>();
    params.put("var", "");

    myJsonArray = fromJsonFileToJsonArray("mssg_source.txt", this);  
    String response = myJsonArray.toString();

    try
    {
        //Parse Response into our object
        Type collectionType = new TypeToken<ArrayList<messages>>(){}.getType();

        //JSON expects an list so can't use our ArrayList from the lstart
        List<messages> lst= new Gson().fromJson(response, collectionType);

        //Now that we have that list lets add it to the ArrayList which will hold our items.
        for(messages m : lst)
        {
            messagesArray.add(m);
        }

        //Since we've modified the arrayList we now need to notify the adapter that
        //its data has changed so that it updates the UI
        arrayAdapter.notifyDataSetChanged();
    }
    catch(Exception e)
    {
        Log.d("Error: ", e.getMessage());
    } 
```

感谢您宝贵的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:40:57.273

看起来 jar 没有正确包含在我的项目中，它现在不再触发错误。虽然，我仍然有一个问题，因为视图是空的，它没有显示应有的消息

# c++ - 如何初始化嵌套结构数组

> ID：13808215
> 
> 赞同：3
> 
> 时间：2012-12-10T19:57:35.217
> 
> 标签：c++, arrays, structure

我正在尝试编写一个程序来设置嵌套结构，然后初始化该结构的数组。它给了我一些奇怪的错误。以下是所有相关代码：

```
//Structure called Stats for storing initial character stats
struct Stats{
    string name;
    int level;
    int HP;
    int STR;
    int CON;
    int DEX;
    int INT;
    int WIS;
    int CHA;};

//Structure called Growth for storing character growth per level.
struct Growth{
    int HPperlvl;
    int STRperlvl;
    int CONperlvl;
    int DEXperlvl;
    int INTperlvl;
    int WISperlvl;
    int CHAperlvl;};

struct Holdstats{
    Stats classstats;
    Growth classgrowth;};

const int SIZE = 10;

Holdstats classlist[SIZE];

Holdstats charlist[SIZE];

//Define initial classes, to be stored in the Classes structure
classlist[0].classstats = {"Fighter", 1, 18, 10, 10, 10, 10, 10, 10};
classlist[0].classgrowth = {1,1,1,1,1,1,1};

classlist[1].classstats = {"Wizard", 1, 10, 10, 10, 10, 10, 10};
classlist[1].classgrowth = {1,1,1,1,1,1,1} 
```

我的编译器认为，当我键入“classlist[0].classstats”时，我正在尝试初始化大小为 0 的数组。我阅读此内容的方式是尝试访问 classlist 数组的第一个元素。这写对了吗？

如果有人能给我一个简短的例子来说明这样的数组是什么样的，那就太好了。从那里我想把它写成一个向量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:07:01.397

您没有展示您的所有类型，但您应该能够采用这种基本方法。

```
Holdstats classlist[SIZE] = {
    { {"Fighter", 1, 18, 10, 10, 10, 10, 10, 10}, {1,1,1,1,1,1,1} },
    { {"Wizard", 1, 10, 10, 10, 10, 10, 10}, {1,1,1,1,1,1,1} },
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:05:30.357

您的结构`Holdstats`包含其他两个类型为`classstats`和的结构`classgrowth`。请记住，这些是结构，而不是数组，所以我不完全确定为什么要这样分配它们：

```
classlist[0].classstats = {"Fighter", 1, 18, 10, 10, 10, 10, 10, 10}; 
```

我猜你想在 holdstats 结构本身中填写 stats 结构，这将在下面完成：

```
classlist[0].classstats.health = 15; //guessing you have a member named health
//OR if you create a constructor for you classstats with the proper copy constructor
classlist[0].classstats = classstats("Fighter", 1, 18, 10, 10, 10, 10, 10, 10);
//OR if you have an assign function
classlist[0].classstats.assign("Fighter", 1, 18, 10, 10, 10, 10, 10, 10); 
```

# sql-server - 大容量插入列太长

> ID：13808217
> 
> 赞同：0
> 
> 时间：2012-12-10T19:57:43.407
> 
> 标签：sql-server, bulkinsert, bcp

我有一个带有固定长度数据的文本文件。这是我的桌子：

```
create table myBulkInsert(
MaxData Varchar(Max)
) 
```

x.fmt 包含：

```
10.0
1
1       SQLCHAR             8       0       ""   1     MaxData                SQL_Latin1_General_CP1_CI_AS 
```

当我发出以下内容时：

```
bulk insert myBulkInsert
from 'C:\inetpub\ftproot\TextFile.txt'
WITH (
    FORMATFILE = 'C:\inetpub\ftproot\Client.fmt'
); 
```

我得到：

> 消息 4866，级别 16，状态 17，第 1 行批量加载失败。数据文件中第 1 行第 1 列的列太长。请验证是否正确指定了字段终止符和行终止符。消息 7399，级别 16，状态 1，第 1 行链接服务器“（null）”的 OLE DB 提供程序“BULK”报告了错误。提供商没有提供有关该错误的任何信息。消息 7330，级别 16，状态 2，第 1 行无法从链接服务器“（null）”的 OLE DB 提供程序“BULK”获取行。

奇怪的是，我将批量插入与逗号分隔的文本文件一起使用，效果很好，所以我认为这不是权限错误。

我只是将它作为 1 个具有最大值的字段的原因是为了简化示例。一旦我让这 1 个字段工作，我将更改布局以包括所有字段及其长度。

# javascript - javascript - 如果不在 url 上，则超时功能

> ID：13808221
> 
> 赞同：0
> 
> 时间：2012-12-10T19:58:01.570
> 
> 标签：javascript, jquery

我有一个新闻提要脚本，它从数据库中检索新项目并时不时地通知用户。问题是我也有一个历史 API 脚本，所以如果用户离开主页（新闻提要所在的位置），该功能仍然执行，我的服务器有问题。所以，我想我会将时间间隔设置为处理程序，并在页面 url 不用于主页时清除它。

```
var currentUrl = $(location).attr('pathname');
var url = currentUrl.replace('/', '');
var handle=self.setInterval(function(){newsCheck()},1000); //set up interval handler for cancellation when not on home page

if (url != 'Home' ){ //timeout newsCheck
       handle = window.clearInterval(handle);
} 
```

然而，这不起作用，因为间隔永远不会被清除。哦，我应该说它可以在 DOM 上运行，可能与它有关。

我在想，由于历史 api 脚本不会在每次`url`变量保持不变并且函数继续运行时重新运行此新闻提要脚本。解决它的明显方法是将其放入`clearInterval`历史 api 脚本中，但当然变量和函数不存在。

我需要解决这个问题，但是；

**1.**我不想再运行ajax请求了，已经够多了。

**2.**解决方案必须是轻量级的，如果不是我还不如让它在后台静默运行。

# c# - Ping MySql 服务器（未登录）

> ID：13808224
> 
> 赞同：0
> 
> 时间：2012-12-10T19:58:13.723
> 
> 标签：c#, mysql, ping, status

我正在为我玩的 mmorpg 游戏编写实用程序。我希望应用程序检查服务器状态并将其报告给用户。我知道服务器是 MySql 并且我有 IP 地址/端口。

有没有办法从我的应用程序（用 C# 编写）*ping服务器。*我可以在不登录的情况下执行此操作吗（我不希望用户必须登录才能使用我的应用程序）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:06:16.297

我想说只是尝试使用伪造的用户名和密码登录。您因无效登录尝试而获得的错误应该与您在 MySQL 不可用时获得的错误不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:43:59.850

Ping 可能在服务器上被禁用。尝试使用您的 IP 地址和端口打开与 MySQL 的套接字连接。如果您可以打开连接，您就知道服务器已启动。查看此链接以了解来自 c# [http://msdn.microsoft.com/en-us/library/ms145128.aspx](http://msdn.microsoft.com/en-us/library/ms145128.aspx)的套接字连接的详细信息。

您可以先尝试使用 telnet 进行连接，以验证您是否可以建立与 MySQL 服务器的连接。telnet ipaddress portnumber 提供与在 c# 中执行此操作类似的功能，但允许您在尝试使其在代码中工作之前从命令行快速测试连接。

# mysql - 使用 concat 和 union 的 MySQL 查询不起作用

> ID：13808226
> 
> 赞同：1
> 
> 时间：2012-12-10T19:58:14.317
> 
> 标签：mysql, union, concat

嗨，人们正在尝试将记录列表放入一个表中，以实现我正在为网站执行的搜索功能

3个表格，1个页面信息，1个项目，1个最新消息。

但是，我的查询出现错误，我看不出它有什么问题。

```
SELECT 'section' AS colTYPE, title_sec AS title,
CONCAT_WS(' ',contentcol1_sec, contentcol2_sec, contentcol3_sec) AS content, 
active_sec AS active 
    FROM sections_sec 
    WHERE content LIKE 'fff' OR title LIKE 'fff' AND active = 1) 
    UNION(SELECT 'latest' AS colTYPE, title_lat AS title,
    content_lat AS content, active_lat AS active 
    FROM latest_lat
    WHERE content LIKE 'fff' OR title LIKE 'fff' AND active = 1) 
    UNION(SELECT 'project' AS colTYPE, title_prj AS title, 
    content_prj AS content,     active_prj AS active 
    FROM projects_prj 
    WHERE content LIKE 'fff' OR title LIKE 'fff' AND active = 1) 
```

我收到的错误是：

```
You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near ') 
    UNION(SELECT 'latest' AS colTYPE, title_lat AS title, 
content_lat AS conten' at line 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:59:10.337

您的第一个语句没有左括号。通常不需要将您的语句括在括号中`UNION`

你还确定你不想使用`UNION ALL`吗？

```
SELECT 'section'
           AS colTYPE, 
       title_sec
           AS title, 
       Concat_ws(' ', contentcol1_sec, contentcol2_sec, contentcol3_sec)
           AS content, 
       active_sec
           AS active 
FROM   sections_sec 
WHERE  content LIKE 'fff' 
        OR title LIKE 'fff' 
           AND active = 1 
UNION ALL
SELECT 'latest'    AS colTYPE, 
       title_lat   AS title, 
       content_lat AS content, 
       active_lat  AS active 
FROM   latest_lat 
WHERE  content LIKE 'fff' 
        OR title LIKE 'fff' 
           AND active = 1 
UNION ALL
SELECT 'project'   AS colTYPE, 
       title_prj   AS title, 
       content_prj AS content, 
       active_prj  AS active 
FROM   projects_prj 
WHERE  content LIKE 'fff' 
        OR title LIKE 'fff' 
           AND active = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:01:11.683

您的第一个`WHERE`子句是`)`没有匹配的左括号的右括号！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:02:29.383

尝试这个：

```
SELECT 'section' AS colTYPE, title_sec AS title, CONCAT_WS(' ',contentcol1_sec, contentcol2_sec, contentcol3_sec) AS content, active_sec AS active 
    FROM sections_sec 
    WHERE (content LIKE 'fff' OR title LIKE 'fff') AND active = 1
    UNION SELECT 'latest' AS colTYPE, title_lat AS title, content_lat AS content, active_lat AS active 
    FROM latest_lat
    WHERE (content LIKE 'fff' OR title LIKE 'fff') AND active = 1 
    UNION SELECT 'project' AS colTYPE, title_prj AS title, content_prj AS content, active_prj AS active 
    FROM projects_prj 
    WHERE (content LIKE 'fff' OR title LIKE 'fff') AND active = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:31:05.937

在第一个子查询中，您必须使用 HAVING，以便您可以匹配计算值。在其他子查询中，您需要使用 WHERE 子句中的列而不是别名。

```
SELECT 'section' AS colTYPE, title_sec AS title,
CONCAT_WS(' ',contentcol1_sec, contentcol2_sec, contentcol3_sec) AS content, 
active_sec AS active 
FROM sections_sec 
HAVING content LIKE 'fff' OR title LIKE 'fff' AND active = 1
UNION
SELECT 'latest' AS colTYPE, title_lat AS title,
content_lat AS content, active_lat AS active 
FROM latest_lat
WHERE content_lat LIKE 'fff' OR title_lat LIKE 'fff' AND active_lat = 1
UNION
SELECT 'project' AS colTYPE, title_prj AS title, 
content_prj AS content, active_prj AS active 
FROM projects_prj 
WHERE content_prj LIKE 'fff' OR title_prj LIKE 'fff' AND active_prj = 1 
```

此外，请确保您了解条件表达式中 AND 和 OR 混合的优先级。`x OR y OR z`被解析为`x OR (y AND z)`，不是`(x OR y) AND z`。

# php - 停止循环重复帖子

> ID：13808230
> 
> 赞同：0
> 
> 时间：2012-12-10T19:58:31.857
> 
> 标签：php, while-loop

我不确定如何表达，所以如果您需要更多说明，我可以尽力解释。

这是代码

```
$file = "shout.txt";
$filed = file_get_contents($file);
preg_match_all('|<div class=\'date\'>(?P<date>.*?)&nbsp;.*<a.*>(?P<user>.*)</a>|i', $filed, $matches);

$shoutlines = file($shout_file);

$aTemp = array();
foreach($matches['user'] as $user) {
    $aTemp[] = "'" . mysql_real_escape_string($user) . "'";
}
$user = implode(",", $aTemp);

$getlevel = $db->query("SELECT * FROM accounts WHERE username IN ( ".$user." )"); 
$isadmin = $db->query("SELECT * FROM accounts WHERE username = '".$_SESSION['username']."'");
$admin = $isadmin->fetch_assoc();
while($status = $getlevel->fetch_assoc()){
    //output the html
    for($i = 0; $i < (1000); $i++)
    {
        if(isset($shoutlines[$i]))
        {
            if ($admin['admin'] == 1 && $status['sblevel'] != Admin && $status['sblevel'] != Banned){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a><a href='javascript: ban({$status['id']});' class='ban' onclick=\"return confirm('Are you sure you want to ban this user?');\">o</a>";
            }
            if ($admin['admin'] == 1 && $status['sblevel'] != Admin && $status['sblevel'] == Banned){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a><a href='?index=shout&unban&user=".$shout['username']."' class='ban' onclick=\"return confirm('Are you sure you want to unban this user?');\">&oslash;</a>";
            }
            if ($admin['admin'] == 1 && $status['sblevel'] == Admin){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a>";
            }
            if ($admin['sblevel'] == Moderator && $status['sblevel'] != Admin && $status['sblevel'] != Moderator){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a><a href='?index=shout&ban&user=".$shout['username']."' class='ban' onclick=\"return confirm('Are you sure you want to ban this user?');\">o</a>";
            }
            if ($status['sblevel'] == Moderator  && $status['sblevel'] != Admin){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a>";
            }
            $shoutline = preg_replace('/<\/div>\n/', ' ', $shoutlines[$i], 1);
            echo showSmileys($shoutline) . $delete . "</div>";
        }
    }
} 
```

问题是它为每个发布的用户复制了所有帖子。我假设这是因为它处于一个while循环中，但我不知道该怎么做，因为我需要检查一个用户是管理员/mod，如果他们在帖子旁边放置了一个删除/禁止按钮以允许他们删除。就目前而言，它会在所有帖子旁边放置一个删除按钮，然后使用它们旁边的删除和禁止按钮将它们全部复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:50:09.133

这是避免重复消息的最简单修改。您必须提供一个函数，该函数`author()`从 say_file 中获取一行并返回作者 ID。

```
while($status = $getlevel->fetch_assoc()){
    //output the html
    for($i = 0; $i < (1000); $i++)
    {
        if(isset($shoutlines[$i]))
        {
            if (author($shoutlines[$i]) != $status['id']) {
                continue;
            }
            if ($admin['admin'] == 1 && $status['sblevel'] != Admin && $status['sblevel'] != Banned){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a><a href='javascript: ban({$status['id']});' class='ban' onclick=\"return confirm('Are you sure you want to ban this user?');\">o</a>";
            }
            if ($admin['admin'] == 1 && $status['sblevel'] != Admin && $status['sblevel'] == Banned){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a><a href='?index=shout&unban&user=".$shout['username']."' class='ban' onclick=\"return confirm('Are you sure you want to unban this user?');\">&oslash;</a>";
            }
            if ($admin['admin'] == 1 && $status['sblevel'] == Admin){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a>";
            }
            if ($admin['sblevel'] == Moderator && $status['sblevel'] != Admin && $status['sblevel'] != Moderator){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a><a href='?index=shout&ban&user=".$shout['username']."' class='ban' onclick=\"return confirm('Are you sure you want to ban this user?');\">o</a>";
            }
            if ($status['sblevel'] == Moderator  && $status['sblevel'] != Admin){
                $delete = "<a href='javascript: delete_shoutline({$i});' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a>";
            }
            $shoutline = preg_replace('/<\/div>\n/', ' ', $shoutlines[$i], 1);
            echo showSmileys($shoutline) . $delete . "</div>";
            unset($shoutlines[$i]);
        }
    }
} 
```

这可能不是最好的方法，因为它为来自作者的每条消息重复“禁止此用户”。最好在每个用户的开头放置一次禁止/取消禁止选项，然后在每一行上“删除”。

# function - Excel - 将一列与另一列进行比较并显示结果

> ID：13808231
> 
> 赞同：1
> 
> 时间：2012-12-10T19:58:33.483
> 
> 标签：function, excel, excel-formula, vba

在 Excel 2007 中，我有两列，相似的数据（名称列表）。如果在两列中都找到该名称，我想将空白列更改为活动。如何才能做到这一点？

对我想做的事情的详细描述：

表 1 上的 A:A 列有 300 个名称。工作表 2 上的 A:A 列有 20 个名称。如果工作表 2 上的名称也在工作表 1 中，我想在工作表 1 上的 A:B 列中填写“活动”一词

如何才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:57:38.450

假设您在两张表的 A 列中都有名称，在 Sheet1 的单元格 B1 中，输入以下公式：

```
=IF(ISNUMBER(MATCH(A1,Sheet2!A:A,0)),"Active","Not Active") 
```

然后，您可以向下拖动该公式 - 如果名称在 BOTH 中都存在，它将显示“Active”，否则将显示“Not Active”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:56:40.433

这可以用一个简单的`VLOOKUP`公式来处理：

```
=IF(VLOOKUP(Sheet2!A1,Sheet1!A:A,1,FALSE)=A1,"Active","") 
```

上面的公式放在 Sheet1 的单元格 B1 中，然后复制到工作表 1 的 A 列中有数据为止。

此公式的唯一警告是 Sheet2 列 A 中的数据必须按字母顺序排序。

接近公式末尾的`FALSE`部分表示需要完全匹配。

# java - 地理应用算法

> ID：13808232
> 
> 赞同：0
> 
> 时间：2012-12-10T19:58:44.273
> 
> 标签：java, android, algorithm

我有一个应用程序，可以在用户驾驶汽车时为他们显示最近的加油站。现在我可以显示前 10 个最近的加油站。我还想构建一个视图，显示用户当前位置和我从数据库收集的前 10 名（即第一个）之间最近的加油站之间的距离。我怎么想的

```
1- The GPS provide a new location to my application.

2- run an SQL query to get the top 10 gas stations in a Circle that it center is the user location and it radius is 2 km.

3- calculate the distance between the current location and the first gas station returned from the Query above (which is the nearest one) .

4- display that distance to user. 
```

现在为什么我认为这不好，因为 gps 提供商可能会迟到提供新位置，因为我将它们过滤到 200m 精度内。我做了一个可能需要很长时间才能返回的 I/O 操作。所有这一切都会导致用户与最近的加油站之间的距离固定，等待更新。

请注意以下事项

1-我为查询中使用的列建立索引以加快和防止完全扫描问题。

2-这就是我如何定义我的更新请求以尽快更新位置。`this.mLocationManager.requestLocationUpdates("gps", 0, 0, this.mLocationListener);`

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:13:59.180

有方法快 1000 倍。为什么一个可怕的慢 sql？在嵌入式系统中，sql 不是最好的选择。读取内存（数组）中的所有加油站。至少坐标和站号。

一个简单的建议：进行暴力搜索并计算所有距离，保持最近当你找到最近的车站时，你可以查询sql中的地址，名称等。

如果您有超过 10.000 个站点，那么您可能需要一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:28:25.993

如果您想使用某些数据库，我会推荐 mongoDB - 没有 SQL 数据库。它具有具有“近”功能的 GeoIndex。

这可以获得非常高的读取性能，并且您无需发明轮子。

见[http://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

# python - 可以使用 python/matplotlib 的 confourf 绘制有限的数据区域吗？

> ID：13808236
> 
> 赞同：0
> 
> 时间：2012-12-10T19:58:59.573
> 
> 标签：python, matplotlib, contour

我试图用matplotlib的contourf制作等高线图。有没有办法放大我的数据的特定区域而其余部分不作图？例如，也许我的水平范围从 -1 到 101，但我只想绘制介于 0 和 100 之间的数据，*并且*我希望将绘图的边界绘制在左侧的 0 处和右侧的 100 处。我认为“extent”关键字可以完成这项工作，但是在给出 X 和 Y 数据时它是不活动的。我知道我可以以各种方式掩盖无关数据，但这会使绘图的边界超出我的兴趣区域，这不是我想要的。我想我也可以过滤或插入我的数据到我感兴趣的区域，然后将过滤后的数据提供给轮廓，但如果我可以让轮廓专注于特定区域，那会容易得多。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:41:44.330

也许您正在寻找`plt.xlim`：

```
import matplotlib.pyplot as plt
import numpy as np
x = np.linspace(-1,101,100)
y = np.linspace(-1,101,100)
x, y = np.meshgrid(x, y)
z = x*x+y*y
plt.figure()
plt.xlim(0, 50)
plt.contourf(x, y, z)
plt.show() 
```

![在此处输入图像描述](../Images/ac8b5b45ecd2dc6005906858ca78aa82.png)

以上，`plt.xlim(0, 50)`被用来代替`plt.xlim(0,100)`仅仅强调变化。没有`plt.xlim(0, 50)`情节看起来像这样：

![在此处输入图像描述](../Images/0ab6ba7fca04e7a9529086485012def1.png)

# android - 如果我尝试使用选择性查询获取数据，则 DB 游标结果始终为空

> ID：13808237
> 
> 赞同：0
> 
> 时间：2012-12-10T19:58:59.343
> 
> 标签：android, sqlite, android-sqlite

我有一个预编译的数据库，我想根据传递的参数获取数据

但由于某种奇怪的原因，光标结果总是空的

我在适配器中的 getData 方法是

```
 public Cursor getData(String uso, String eta, String category,
            String class) {
        try {
            Cursor c;
            if (class.equals(null) && category.equals(null)) {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            } else if (class.equals(null)) {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Tipo LIKE \"" + category
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            } else if (category.equals(null)) {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Certification LIKE \"" + class
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            } else {
                c = mDb.rawQuery("SELECT * FROM dbtable WHERE Uso LIKE \""
                        + uso + "\" AND Eta LIKE \"" + eta
                        + "\" AND Tipo LIKE \"" + category
                        + "\" AND Certification LIKE \"" + class
                        + "\" AND Language LIKE \"" + language
                        + "\" order by Name asc", null);
            }
            if (c != null) {
                c.moveToNext();
            }
            return c;
        } catch (SQLException mSQLException) {
            Log.e(TAG, "getDataCar >>" + mSQLException.toString());
            throw mSQLException;
        }

    } 
... 
```

此游标用于将所有条目放入 Car 对象数组的方法中

```
public Car[] getDataDBCarsArray(String uso, String eta,
            String category, String class) {
        ArrayList<Car> list = new ArrayList<Car>();
        Cursor c = getData(uso, eta, category, class);
        try {
..... 
```

一切正常如果不是上面的 getData(....) 我尝试使用

```
public Cursor getAllData(){
    try {
        Cursor c = mDb.rawQuery("SELECT * FROM dbtable order by Name asc", null);
        if (c != null) {
            c.moveToNext();
        }
        return c;
    }catch (SQLException mSQLException) {
        throw mSQLException;
    }

} 
```

所以 getData(...) 中的查询似乎有问题。

但我无法弄清楚错误在哪里。

如果我尝试打开数据库，则传递的参数有很多元素，但奇怪的是什么也没找到。

注意

*language*是取决于设备语言的静态值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:09:44.747

您忘记了 SQL 通配符...

这个：

```
WHERE column = "John" 
```

是相同的：

```
WHERE column LIKE "John" 
```

您想要合并`%`和`_`通配符来创建一个子句，例如：

```
WHERE column LIKE "%John%" 
```

* * *

此外，您应该利用 SQLite 参数化并保护自己免受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击：

```
c = mDb.rawQuery("SELECT * FROM dbtable " + 
        "WHERE Uso LIKE ? AND Eta LIKE ? AND Language LIKE ? ORDER BY Name",
        new String[] { "%" + uso + "%", 
                       "%" + eta + "%", 
                       "%" + language + "%" }); 
```

# key-value-observing - 模拟观察对象

> ID：13808248
> 
> 赞同：0
> 
> 时间：2012-12-10T19:59:29.983
> 
> 标签：key-value-observing, ocmock

在模拟已经在 KVO 观察下的对象时，我看到了一个异常。这是一个显示问题的简化示例：

```
[sourceObject addObserver:destinationObject forKeyPath:@"stringProperty" options:NSKeyValueObservingOptionNew context:nil];
[OCMockObject partialMockForObject:sourceObject];
[sourceObject removeObserver:destinationObject forKeyPath:@"stringProperty"]; 
```

当调用“-removeObserver:forKeyPath:”时，我得到一个我当前没有观察对象的异常。如果我在调用“-removeObserver:forKeyPath:”之前在模拟上调用“-stopMocking”，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T18:10:08.810

OCMock 和 KVO 都是动态子类对象，因此它们不能一起正常工作。唯一真正的解决方案是以不必模拟被观察对象的方式修改您的测试。在最坏的情况下，您将不得不创建自己的测试子类以在测试时使用。

# wordpress - 用新副本替换旧 WordPress 副本并推送到 GitHub 的最佳方法是什么？

> ID：13808249
> 
> 赞同：1
> 
> 时间：2012-12-10T19:59:44.273
> 
> 标签：wordpress, git, github

很长一段时间以来，我一直在用 Git 控制我的 WordPress 网站并推送到 GitHub。我在本地开发，推送到 GitHub，然后从 GitHub 拉到我的生产服务器。

我想在我的本地环境中废弃我当前的 WordPress 核心并用一个新的副本替换它，然后将其推送到 GitHub 并拉到我的生产服务器。

我的问题是......我是否会通过替换我的 WordPress 核心而在 Git 中遇到任何类型的跟踪错误？当我这样做时，还有什么其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:22:38.593

我通过将 Wordpress 核心添加为子存储库来处理这个问题。[WordPress在 GitHub 上](https://github.com/WordPress/WordPress)维护其 SVN 存储库的镜像。然后，您可以通过进入包含 WordPress 核心文件的子目录并检查当前版本的标签来轻松更新到新版本：

```
git fetch --tags
git checkout 3.3.2 
```

如果您愿意，该存储库还包括 beta 版本。

这是我用来设置此过程的指南：[使用 Git 安装和管理 WordPress](http://davidwinter.me/articles/2012/04/09/install-and-manage-wordpress-with-git/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:13:56.597

我知道你在谈论更新 wordpress。您应该注意，如[更新说明](http://codex.wordpress.org/Updating_WordPress)中所述，在更新期间您应该

*   检查要求
*   备份您的数据库内容
*   禁用您拥有的插件

所以这一切你都应该做。此外，如果需要，您还应该确保更新您的数据库内容。

Wordpress 包含有关[使用 svn 进行更新](http://codex.wordpress.org/Installing/Updating_WordPress_with_Subversion)的说明，据他们说，这似乎是一种非常好的方法。*如果*你能准确地知道哪些文件适合存储在版本控制中，哪些不适合，我认为你用 git 做本质上相同的事情没有太大区别。

# java - 尝试从测试方法读取 WEB-INF 中的包时出现 MissingPackageNameException

> ID：13808250
> 
> 赞同：1
> 
> 时间：2012-12-10T19:59:45.987
> 
> 标签：java, web-applications, drools

我需要从我的测试类中读取 WEB-INF/exam 文件夹中的一个文件。运行测试时出现以下异常

> org.drools.compiler.PackageBuilder$MissingPackageNameException：

```
'PATH = "C:\Project\TestApp\WebContent\WEB-INF\Rule\"

private static RuleBase ruleBase;
File rFile = new File(PATH, "file name");
        try {
FileReader reader = new FileReader(rFile);
ruleBase = RuleBaseLoader.getInstance().loadFromReader(rFile );

}' 
```

有人可以帮助弄清楚我做错了什么吗？我无法弄清楚问题是什么，直到现在......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:10:02.673

我猜你没有在你的规则文件中放一个包名。只需将“package mypackage”（或其他）放在顶部即可。

或者，如果您只是尝试加载规则文件，则不需要构建包。

```
KnowledgeBuilder builder = KnowledgeBuilderFactory.newKnowledgeBuilder();
builder.add(ResourceFactory.newFileResource(ruleFilePath), 
            ResourceType.DRL); 
```

# python - 我需要在 Python 中打开并重写文件中的一行

> ID：13808252
> 
> 赞同：4
> 
> 时间：2012-12-10T19:59:53.787
> 
> 标签：python, file

> **可能重复：**
> [在 Python 中搜索和替换文件中的一行](https://stackoverflow.com/questions/39086/search-and-replace-a-line-in-a-file-in-python)
> [如何在 Python 中修改文本文件？](https://stackoverflow.com/questions/125703/how-do-i-modify-a-text-file-in-python)

我有一个输入文件，我需要在运行程序之前用需要修改的不同文件重写它。我在这里尝试了各种解决方案，但似乎没有一个有效。我最终只是用一个空白文件覆盖了我的文件

```
f = open(filename, 'r+')
text = f.read()
text = re.sub('foobar', 'bar', text)
f.seek(0)
f.write(text)
f.truncate()
f.close() 
```

或者例如使用该代码，每次运行程序时我要更改的名称都不同，因此我需要替换整行而不仅仅是一个关键字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:16:13.137

一种简单的方法可能是将文本读入字符串，然后将字符串与要写入的文本连接起来：

```
infile = open('hey.txt','r+')
content = infile.read()
text = ['foo','bar']
for item in text:
     content +=item  #adds 'foo' on first iteration, 'bar' on second
infile.write(content)
infile.close() 
```

或更改特定关键字：

```
infile = open('hey.txt','r+')
content = infile.read()
table = str.maketrans('foo','bar')
content = content.translate(table)  #replaces 'foo' with 'bar'
infile.write(content)
infile.close() 
```

或逐行更改，您可以使用 readlines 并将每一行称为列表的索引：

```
infile = open('hey.txt','r+')
content = infile.readlines() #reads line by line and out puts a list of each line
content[1] = 'This is a new line\n' #replaces content of the 2nd line (index 1)
infile.write(content)
infile.close() 
```

也许不是一个特别优雅的解决问题的方法，但它可以封装在一个函数中，并且“文本”变量可以是多种数据类型，如字典、列表等。还有很多方法可以替换文件中的每一行，它仅取决于更改行的标准（您是在搜索行中的字符或单词吗？您是否只是想根据文件中的位置替换一行？）- - 所以这些也是需要考虑的一些事情。

***编辑：**为第三个代码示例添加了引号*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:39:57.467

虽然丑陋，但这个解决方案最终会奏效

```
infile = open('file.txt', 'r+')
content = infile.readlines() #reads line by line and out puts a list of each line
content[1] = "foo \n" #replaces content of the 2nd line (index 1)
infile.close
infile = open('file.txt', 'w') #clears content of file. 
infile.close
infile = open('file.txt', 'r+')
for item in content: #rewrites file content from list 
    infile.write("%s" % item)
infile.close() 
```

谢谢大家的帮助！！

# php - Yii 注册 CSS 文件，作为最后一个（在 assets 之后）

> ID：13808253
> 
> 赞同：8
> 
> 时间：2012-12-10T20:00:08.753
> 
> 标签：php, css, yii, registration

Yii 中是否有办法注册 js 或 css 文件以在资产管理器加载它们之后加载它们。

我使用一个 css 文件来覆盖来自一些 Yii 扩展的样式，但是 Yii 将我的文件包含在扩展生成的资产之前。

我知道我可以更改扩展名以从资产管理器中删除 css 文件并手动添加它们，`registerCssFile`但这不是我想要这样做的方式。

这是我所拥有的：

```
<head>
...
    <link rel="stylesheet" type="text/css" href="/css/MY_CSS.css" />
...
    <link rel="stylesheet" type="text/css" href="/assets/8e838803/css/EXTENSION_CSS.css" />
...
</head> 
```

这就是我想要的：

```
<head>
...
    <link rel="stylesheet" type="text/css" href="/assets/8e838803/css/EXTENSION_CSS.css" />
...
    <link rel="stylesheet" type="text/css" href="/css/MY_CSS.css" /> <!-- the last one -->
</head> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T20:53:36.577

CClientScript 注册的资产总是添加**在**标题之前

在您的情况下，您应该在标题**后**添加 CSS ，以保证您想要的顺序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-11T11:02:28.623

在 Yii2 中，实现此目的的一个好方法是使用 registerCssFile 上的 'depends' 选项，如[文档所示](http://www.yiiframework.com/doc-2.0/guide-output-client-scripts.html)

```
$this->registerCssFile("http://example.com/css/themes/black-and-white.css", [
    'depends' => [BootstrapAsset::className()],
    'media' => 'print',
], 'css-print-theme'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T04:59:54.263

```
//example 1
class someWidget extends YourExtendsionClassName
{
    public function init()
    {
        parent::init();
        Yii::app()->getClientScript()->registerCssFile('/path/to/your/css/file.css');
    }

    // or

    public function run()
    {
        Yii::app()->getClientScript()->registerCssFile('/path/to/your/css/file.css');
            parent::run();
    }
}

//example 2

//Layouts file main.php

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
<title>Title</title>
<?php Yii::app()->getClientScript()->registerCssFile('/path/to/your/css/file.css'); ?>
</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T15:11:50.673

在你的 main.php 布局中，找到标签，把这行代码：

```
Yii::app()->clientScript->registerCssFile(Yii::app()->baseUrl.'/path/to/css/file'); 
```

[http://www.codexamples.com/98/how-to-include-javascript-css-in-yii/](http://www.codexamples.com/98/how-to-include-javascript-css-in-yii/)

# xml - xslt 中两个正斜杠的目的是什么？"//"

> ID：13808255
> 
> 赞同：5
> 
> 时间：2012-12-10T20:00:15.880
> 
> 标签：xml, xslt

我在一个 XML 类中，并且有以下代码行..

```
<xsl:value-of select="count(//@qty)" /> 
```

qty 属性前的“//”有什么作用？它指定什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:51:10.190

`//` 简称`/descendant-or-self::node()/`

尽管在某些表达式中它的行为类似于 descendant:: 但并不相同。例如在问题的表达中

```
descendant::@qty 
```

将是一个语法错误，因为您不能在一个步骤中同时拥有后代轴和属性轴。

```
/descendant-or-self::node()/@qty 
```

另一方面是法律表达。

另一个显着的区别是`//*[1]`它选择了作为其父元素的第一个子元素的每个元素。而`/descendant::*[1]`选择文档中的第一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:04:14.923

这里，`//`是`descendant::`轴的等价物，因此它将返回作为上下文节点后代的所有@qty 值。即：在这种情况下，没有给出上下文，因此它应该返回文档的所有值。

如果有，`.//`那么上下文将是当前节点，输出将是该节点的所有后代，而不是文档。

**更新**正如大卫正确指出的那样，这两个表达式并不严格等同，只是在功能上等同于您的问题。他注意到下面的微妙之处。但是，我认为您会发现，尽管在技术上`//`确实等同于`descendant-or-self::node()`：

```
//x == //descendant-or-self::node()/x 
```

`descendant::`使用时期望是有意义的，`//`因为：

```
<x/>//* => ()
<x/>/descendant-or-self::* => <x/> 
```

并且您不能简单地使用`//`而没有可供选择的东西。所以没有任何情况`//`可以真正给你这个`-or-self`角色。

```
/a/b// => {error} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:51:25.140

`//`是一个“宏”，它扩展为

```
/descendant-or-self::node()/ 
```

包括斜线。换句话说`foo//bar`，与 完全相同的 xpath 表达式`foo/descendant-or-self::node()/bar`，并选择作为当前节点`bar`的任何元素子元素的后代的所有元素（因为包括自身 - 这就是位）。`foo``x/descendant-or-self::node()``x``or-self`

# c++ - 我们如何在 C++ 中一次性从 STDIN 扫描 100 个字节

> ID：13808256
> 
> 赞同：0
> 
> 时间：2012-12-10T20:00:24.890
> 
> 标签：c++, string, io, inputstream

扫描器一直等到我们输入 100 字节的数据。因此，如果我们将一个文件重定向到可执行文件的输入，如果该文件有 > 100 字节的数据。我一口气扫描它，而不是逐行扫描`fgets()`或`scanf("%s")`等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:03:27.470

您可以使用它`fread`来读取所需的字节数，而与换行符或其他空白无关：

```
char buf[100];
size_t bytes_read = fread(buf, 1, 100, stdin); 
```

请注意，它`buf`不会以空值终止。因此，如果您想要`printf`它，例如（它需要一个以空字符结尾的字符串），您可以尝试以下操作：

```
char buf[101];
size_t bytes_read = fread(buf, 1, 100, stdin);
buf[100] = '\0'; // The 101th "cell" of buf will be
                 // the one at index `100` since the
                 // first one is at index `0`. 
```

# tsql - 根据日期加入查询

> ID：13808258
> 
> 赞同：2
> 
> 时间：2012-12-10T20:00:30.547
> 
> 标签：tsql, sql-server-2005

我有一个具有时间缩放值的表，我需要能够缩放这些值。我试图使这尽可能简单，但执行速度对我来说是一个重要因素。

让我举一个 tblTSS_DataCollection 的例子：

```
SELECT TOP 5
   [DataPointID]
  ,[DatapointDate]
  ,dc.[DataPointValue] 
FROM [tblTSS_DataCollection] dc
Where DatapointID = 1093 
```

这将返回一个非常简单的表：

```
DataPointID DatapointDate            DataPointValue
1093        2012-07-29 00:00:01.000  0.01869818
1093        2012-07-29 00:01:01.000  0.01882841
1093        2012-07-29 00:02:01.000  0.01895865
1093        2012-07-29 00:03:01.000  0.01908888
1093        2012-07-29 00:04:01.000  0.01921912 
```

现在我有另一个名为 tblTSS_ScaleSettings 的表，如下所示：

```
SELECT [ID]
      ,[DatapointID]
      ,[EffectiveDate]
      ,[ScaleType]
      ,[ScaleValue]
FROM [tblTSS_ScaleSettings] 
```

这将返回如下结果：

```
ID  DatapointID EffectiveDate            ScaleType   ScaleValue
1   1093        2012-07-29 00:03:01.000  *           10.0000 
```

现在我需要能够做的是这样的事情：

```
SELECT TOP 5 
       dc.[DataPointID]
      ,[DatapointDate]
      ,dc.[DataPointValue] AS [DVOld]
      ,CASE sc.ScaleType
            WHEN '*' THEN dc.[DataPointValue] * sc.ScaleValue
            WHEN '/' THEN dc.[DataPointValue] / sc.ScaleValue
            WHEN '+' THEN dc.[DataPointValue] + sc.ScaleValue
            WHEN '-' THEN dc.[DataPointValue] - sc.ScaleValue
            ELSE dc.[DataPointValue]
        END
        AS [DatapointValue]
 FROM [tblTSS_DataCollection] dc
 JOIN [tblTSS_ScaleSettings] sc
 on sc.DatapointID = dc.DatapointID
 Where dc.DatapointID = 1093 
```

哪个会返回：

```
DataPointID DatapointDate            DVOld        DatapointValue
1093        2012-07-29 00:00:01.000  0.01869818   0.1869818
1093        2012-07-29 00:01:01.000  0.01882841   0.1882841
1093        2012-07-29 00:02:01.000  0.01895865   0.1895865
1093        2012-07-29 00:03:01.000  0.01908888   0.1908888
1093        2012-07-29 00:04:01.000  0.01921912   0.1921912 
```

但是，这有什么问题是因为表中的缩放 EffectiveDate 直到 00:03:01 才开始缩放，而不是在所有记录上开始缩放。在下一个生效日期之前，缩放比例应该是那个比例。有时我们会发生多个规模，并且在一年中的不同时间发生变化。所以我需要 Select Query 来计划……这就是它变得棘手的地方。

看起来像这样：

```
DataPointID DatapointDate            DVOld        DatapointValue
1093        2012-07-29 00:00:01.000  0.01869818   0.01869818
1093        2012-07-29 00:01:01.000  0.01882841   0.01882841
1093        2012-07-29 00:02:01.000  0.01895865   0.01895865
1093        2012-07-29 00:03:01.000  0.01908888   0.1908888
1093        2012-07-29 00:04:01.000  0.01921912   0.1921912 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:05:13.647

这样的事情可能对你有用：

```
SELECT TOP 5 
       dc.DataPointID
      ,DatapointDate
      ,dc.DataPointValue AS DVOld
      ,CASE sc.ScaleType
            WHEN '*' THEN dc.DataPointValue * sc.ScaleValue
            WHEN '/' THEN dc.DataPointValue / sc.ScaleValue
            WHEN '+' THEN dc.DataPointValue + sc.ScaleValue
            WHEN '-' THEN dc.DataPointValue - sc.ScaleValue
            ELSE dc.DataPointValue
        END
        AS DatapointValue
 FROM tblTSS_DataCollection dc
 LEFT JOIN tblTSS_ScaleSettings sc
 ON sc.DatapointID = dc.DatapointID
 AND sc.EffectiveDate = (
    SELECT MAX(EffectiveDate)
    FROM tblTSS_ScaleSettings
    WHERE DatapointID = dc.DatapointID
        AND EffectiveDate <= dc.DatapointDate
 )
 WHERE dc.DatapointID = 1093 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:46:36.560

像这样的`from`条款会起作用吗？

```
 FROM [tblTSS_DataCollection] dc
 JOIN sc  on sc.DatapointID = dc.DatapointID inner join
(
    select datapointid, max(effectivedate) as max_dt
    from
        [tblTSS_ScaleSettings] 
    where
        effectiveDate <= getdate()
    group by datapointID
) mx on
sc.datapointid = mx.datapointid and
sc.effectivedate = mx.max_dt 
```

您输入的内容应相当于：

```
SELECT TOP 10
       dc.[DataPointID]
      ,[DatapointDate]
      ,dc.[DataPointValue] AS [DVOld]
      ,EffectiveDate
    ,ScaleType
    ,ScaleValue
    ,CASE ScaleType 
            WHEN '*' THEN dc.[DataPointValue] * ScaleValue 
            WHEN '/' THEN dc.[DataPointValue] / ScaleValue 
            WHEN '+' THEN dc.[DataPointValue] + ScaleValue 
            WHEN '-' THEN dc.[DataPointValue] - ScaleValue 
            ELSE dc.[DataPointValue]
        END
        AS [DatapointValue]

  FROM [tblTSS_DataCollection] dc inner join
(select DatapointID, max(EffectiveDate) as max_effective,
from tblTSS_ScaleSettings ts
    where ts.EffectiveDate <= dc.DatapointDate
group by DatapointID) mx
on dc.datapointid = mx.datapointid and
EffectiveDate = max_effective 
  Where dc.DatapointID = 1093 
```

# python - 如何返回异常？

> ID：13808259
> 
> 赞同：0
> 
> 时间：2012-12-10T20:00:32.327
> 
> 标签：python

我编写了一个需要进行 3 次检查的函数，如果其中一个测试失败，它应该返回 LookupError 类型的异常，但它不起作用。(*verify_checksum 是另一个函数)

```
def check_datagram(datagram, src_comp, dst_app):
    try:
        src_comp==datagram[0:16]
    except LookupError:
        return "Mismatch in src_comp"
    try:
        dst_app==datagram[40:48]
    except LookupError:
        return "Mismatch in dst_app"
    try:
        verify_checksum(datagram)
    except False:
        return "Wrong checksum"
    return True 
```

例如：

输入：

```
check_datagram("1111000000001111000011111111000001010101101010101111111111111111000000001111111100000000","0000111100001111", "11110000") 
```

预期输出：

```
"Mismatch in dst_app" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:03:19.747

```
def check_datagram(datagram, src_comp, dst_app):
    if src_comp != datagram[0:16]:
        raise LookupError("Mismatch in src_comp")
    if dst_app != datagram[40:48]:
        raise LookupError("Mismatch in dst_app")
    if not verify_checksum(datagram):
        raise LookupError("Wrong checksum")
    return True # redundant? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:45:21.710

通过 NPE 的回答构建，您应该使用 try..except 在那里您将使用声明的 check_datagram() 函数。

```
#python3
try:
    check_datagram(a,b,c)
except LookupError as e:
    print(str(e)) 
```

这允许您从引发的错误中获取消息。

# php - 限制 Wordpress 的“the_content”过滤器

> ID：13808260
> 
> 赞同：1
> 
> 时间：2012-12-10T20:00:33.680
> 
> 标签：php, wordpress, filter, hook

使用 Wordpress，您可以向“the_content”添加一个钩子。在我的代码中，它看起来像这样。

```
add_filter("the_content", some_func); 
```

因此，在 Wordpress 中，每次有一个帖子“some_func”都会运行。所以，假设“some_func”看起来像这样。

```
function some_func( $content ) {
    return $content . "<div id='my_div'></div>";
} 
```

使用 ID 属性意味着只能有一个 HTML 元素。发生的情况是，该函数会针对数据库中的每个帖子运行。这意味着如果我有两个帖子，那么我有两个 ID 为“my_div”的 div，如果我有依赖于这些 ID 的 Javascript，那么 Javascript 将无法正确运行。CSS 也一样。

所以，我需要的是一种让这个函数运行一次且不超过一次的方法。任何人都知道一种方法，也许是包装器，或者我应该使用的不同过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:27:45.067

我没有对此进行测试，但也许您可以将其添加到 some_func 函数的顶部：

`remove_filter( 'the_content', 'some_func' );`

理论上，它会调用一次过滤器，并在第一次调用后删除过滤器。

# sed - 如何使用 sed 交换两列？

> ID：13808262
> 
> 赞同：6
> 
> 时间：2012-12-10T20:00:41.527
> 
> 标签：sed

我正在尝试从此更改文件中的文本：

```
file.txt,c:\path\to\file
file.txt,c:\path with spaces\to\file
file.txt,c:\path\to\file with spaces
file.txt,c:\path\to\file with spaces
file.txt,c:\path\to\file with spaces 
```

对于这种输出（文件的一个路径）：

```
c:\path\to\file\file.txt
c:\path with spaces\to\file\file.txt
c:\path\to\file with spaces\file.txt
c:\path\to\file with spaces\file.txt
c:\path\to\file with spaces\file.txt 
```

这几乎可以工作，但在行尾需要一个“，”：

```
sed 's@\(.*\),\(.*\),\(.*\)@\2,\1,\3@g' file 
```

任何帮助将不胜感激，我不太了解 sed ...

**编辑**

这对我有用，但我仍然想在其中添加一个“\”：

```
sed 's@\(.*\),\(.*\)@\2,\1,\3@g' file 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T20:07:56.590

转义反斜杠，`\\`.

```
sed 's/^\(.*\),\(.*\)$/\2\\\1/g' file
                       --^^-- 
```

此外，您只需要两个捕获组。

* * *

但因为我更像一个`awk`男人。

```
awk -F, '{ print $2 "\\" $1 }' file 
```

# .net - 自定义报告中的单元格颜色

> ID：13808264
> 
> 赞同：0
> 
> 时间：2012-12-10T20:00:54.437
> 
> 标签：.net, reporting-services

正如标题所示，我想自定义报告中的单元格颜色（我正在开发报告应用程序），即：我的报告包含一个表格，其中填充了从 1 到 4 的整数。

```
1--> red
2--> green
. 
. 
. 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:36:59.530

您需要转到该字段的背景颜色或字体颜色属性（无论您要着色哪个）。然后去表达。在表达式中做类似这样的事情：

```
=Switch(Fields!Field.Value = 1, "Red" , Fields!Field.Value = 2, "Green", Fields!Field.Value =  3, "Black") 
```

# javascript - 检查 youtube 视频是否为静态图像

> ID：13808268
> 
> 赞同：9
> 
> 时间：2012-12-10T20:01:18.720
> 
> 标签：javascript, jquery, youtube, youtube-api

如何确定 youtube 视频是实际视频还是静态图像？

由于可能无法使用 youtube API，是否有使用 javascript/jquery 扫描窗口给定区域中的像素并确定它们是否已更改的解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T00:46:35.070

这个粗略的想法是基于[Stichoza 的答案](https://stackoverflow.com/a/14856029/376138)，但要简单得多。

### 仅使用缩略图

> 您可以获取视频缩略图[http://i.ytimg.com/vi/VIDEO_ID/X.jpg](http://i.ytimg.com/vi/VIDEO_ID/X.jpg)。例如，如果视频 ID 是 500Pm4mQZQQ（静态图像视频），您将拥有以下缩略图：
> 
> ```
> http://i.ytimg.com/vi/500Pm4mQZQQ/1.jpg
> http://i.ytimg.com/vi/500Pm4mQZQQ/2.jpg
> http://i.ytimg.com/vi/500Pm4mQZQQ/3.jpg 
> ```

如果这些图像非常相似，则视频是静态的（由于压缩噪声，它们不会完全相同）。为了以简单的方式比较三个可用的静止图像，您不需要应用实际的图像比较算法。只需比较它们的文件大小。

### 想法：比较 JPEG 大小

这些是 JPEG 图像。它们的文件大小会有所不同，具体取决于图像的压缩程度。相似的图像将产生相似的文件大小。

上面的例子有 3534、3539 和 3539 字节。检查一些随机的非静态视频，我得到了更大的差异：4179、4726 和 4779 字节。非常相似的文件大小 = 静态视频。

### 开始使用

使用 Javascript 无法（轻松）获取图像的字节大小。但这对于任何服务器端技术都应该是微不足道的。这是[使用 PHP 的简单方法](https://stackoverflow.com/a/12249536/376138)：

```
$head = array_change_key_case(get_headers("http://example.com/file.ext", TRUE));
$filesize = $head['content-length']; 
```

*编辑：*

### PHP中的测试实现：

```
<?php
$urls = array(
    // Actual videos
    'https://www.youtube.com/watch?v=1iTg20x7w2s',
    'https://www.youtube.com/watch?v=uY6ooLaM3_U',
    'https://www.youtube.com/watch?v=E0vNU6pEQLU',
    // Static videos
    'https://www.youtube.com/watch?v=wWiC_I7R2iI',
    'https://www.youtube.com/watch?v=ytbpMht-7OA',
    'https://www.youtube.com/watch?v=x_38wF6bYCw'
);

foreach($urls as $url) {
    echo $url . ":\n";
    echo thumbSizeStandardDeviation($url) . "\n\n";
}

/**
 * This is the main function
 */
function thumbSizeStandardDeviation($url) {
    $videoId = extractVideoId($url);

    for($i = 1; $i <= 3; $i++) {
        $thumbnailUrl =
            "http://i.ytimg.com/vi/" . $videoId . "/" . $i . ".jpg";
        $fileSizes[] = getRemoteFileSize($thumbnailUrl);
    }

    return standardDeviation($fileSizes);
}

/**
 * https://stackoverflow.com/a/3393008/376138
 */
function extractVideoId($url) {
    parse_str( parse_url( $url, PHP_URL_QUERY ), $queryParams );
    return $queryParams['v'];
}

/**
 * https://stackoverflow.com/a/12249536/376138
 */
function getRemoteFileSize($url) {
    $headers = array_change_key_case(get_headers($url, TRUE));
    return $headers['content-length'];
}

/**
 * https://en.wikipedia.org/wiki/Standard_deviation#Basic_examples
 */
function standardDeviation($numbers) {
    $mean = array_sum($numbers) / count($numbers);
    $differenceSum = 0;
    foreach($numbers as $number) {
        $differenceSum += pow($number - $mean, 2);
    }
    return sqrt($differenceSum / count($numbers));
} 
```

### 测试结果：

我使用了三个“普通”视频和三个完全静态的视频，它们的 URL 在代码中。在命令行运行脚本，我得到：

```
$ php youtube-is-static-video.php
https://www.youtube.com/watch?v=1iTg20x7w2s:
271.21496189472

https://www.youtube.com/watch?v=uY6ooLaM3_U:
28.335294049805

https://www.youtube.com/watch?v=E0vNU6pEQLU:
182.70620010157

https://www.youtube.com/watch?v=wWiC_I7R2iI:
4.1899350299922

https://www.youtube.com/watch?v=ytbpMht-7OA:
7.5424723326565

https://www.youtube.com/watch?v=x_38wF6bYCw:
5.1854497287013 
```

在这个（诚然很小的）样本中，确实可以将正常（前三个）与静态（后三个）区分开来。

一个大问题是由**多个**静止图像（幻灯片）组成的视频，这对于音乐上传来说很常见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T14:41:45.913

没有官方方法可以确定视频是否是静态图像，**但**您仍然可以做一些技巧。

您可以获得视频缩略图`http://i.ytimg.com/vi/VIDEO_ID/X.jpg`。例如，如果视频 ID 是*500Pm4mQZQQ*（静态图像视频），您将拥有以下缩略图：

*   [http://i.ytimg.com/vi/500Pm4mQZQQ/1.jpg](http://i.ytimg.com/vi/500Pm4mQZQQ/1.jpg)
*   [http://i.ytimg.com/vi/500Pm4mQZQQ/2.jpg](http://i.ytimg.com/vi/500Pm4mQZQQ/2.jpg)
*   [http://i.ytimg.com/vi/500Pm4mQZQQ/3.jpg](http://i.ytimg.com/vi/500Pm4mQZQQ/3.jpg)

现在您可以使用图像相似度检测库来确定缩略图的相似度。例如，您可以使用这个*js-image-similarity* JavaScript 算法：[https ://github.com/bitlyfied/js-image-similarity](https://github.com/bitlyfied/js-image-similarity)

**注意：**这个 JS 库只应该在最新的 WebKit 中工作。需要支持 Canvas 和 Array.forEach。

您也可以使用**PHP**。[在此处](http://www.intelliot.com/2008/03/sorted-directory-listing-image-resizing-comparison-and-similarity-in-php/)阅读有关算法的更多信息并检查此 PHP 类：[http ://www.phpclasses.org/package/6478-PHP-Compare-two-images-to-find-the-differences.html](http://www.phpclasses.org/package/6478-PHP-Compare-two-images-to-find-the-differences.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T22:44:48.070

不，对不起。YouTube API 不支持检索有关正在播放的音频或视频内容的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T14:29:59.960

YouTube API 不支持此功能，但 HTML5 视频应该可以。使用 HTML5 您可以像复制图像一样复制单个帧。接下来可以操作单个像素。

以下代码从单帧（*视频*）中获取像素数据：

```
bcv.drawImage(video, 0, 0, w, h); /* bcv is a canvas object */
var apx = bcv.getImageData(0, 0, w, h);
var data = apx.data; 
```

*   [http://appcropolis.com/using-html5-canvas-to-capture-frames-from-a-video/](http://appcropolis.com/using-html5-canvas-to-capture-frames-from-a-video/)
*   [http://rocha.la/fun-with-pixels-html5-video-canvas](http://rocha.la/fun-with-pixels-html5-video-canvas)
*   [http://beej.us/blog/data/html5s-canvas-2-pixel/](http://beej.us/blog/data/html5s-canvas-2-pixel/)

# c# - 按月份类型的行过滤器

> ID：13808271
> 
> 赞同：0
> 
> 时间：2012-12-10T20:01:37.813
> 
> 标签：c#, sql, visual-studio-2010

我正在尝试在 C# 中使用 rowfilter，但在尝试按月过滤时不断出现错误。

源文件的格式是 12/1/2012 16:30 等等，但我只想捕获属于特定月份的所有条目。

我该怎么做？

我的代码是：

```
dvjan.RowFilter = "[Status]='Closed' and [Req Start Date]='January'"; 
```

错误是：

> 无法对 System.DateTime 和 System.String 执行“=”操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:13:24.940

您正在将日期字段的值与文字文本`[Req Start Date]='January'"`进行比较，而您需要与一个或多个日期值进行比较，例如`[Req Start Date] >= '1/1/2012' and [Req Start Date] < '2/1/2012'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:13:40.703

这是一个猜测：

```
dvjan.RowFilter = "[Status]='Closed' and datename(month, [Req Start Date])='January'"; 
```

这是使用 SQL Server 语法来提取月份名称，以进行比较。

# php - 我什么时候应该使用我自己定义的 webroot 和服务器 root

> ID：13808272
> 
> 赞同：0
> 
> 时间：2012-12-10T20:01:36.317
> 
> 标签：php

```
$thisFile = str_replace('\\', '/', __FILE__);
$docRoot = $_SERVER['DOCUMENT_ROOT'];

$webRoot  = str_replace(array($docRoot, 'library/config.php'), '', $thisFile);
$srvRoot  = str_replace('library/config.php', '', $thisFile); 
```

这就是我获取 Web 根目录和服务器根目录的方式

*web root*是我的文件所属的文件夹名称，*server root*是`C:/xampp/htdocs/folder_name`

我只想问我什么时候应该使用 webroot 和 server root。

我只是注意到如果你引用一个文件 ex: href 或 img src，那么只有 web root 可以工作，而不是 server root

但是，如果您需要文件，例如。`require_once 'file.php';`只有服务器根工作不是 webroot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:08:45.543

我认为你把事情复杂化了。您可以像这样构建路径：

```
$_SERVER['DOCUMENT_ROOT'] . "/your/path/here" 
```

因此，如果您要`require_once`在脚本顶部添加一个这样做：

```
require_once($_SERVER['DOCUMENT_ROOT'] . "/your/path/here.php") 
```

引用图像时，您可以这样做：

```
<img src="/my/path/image.jpg" alt="" /> 
```

将`/`其带回根并从那里构建路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:17:17.353

您将服务器路径与 URL 路径混淆了。

在您的服务器上，文件存储在`C:/xampp/htdocs/folder_name`，但根据您的网络浏览器，它们位于`http://localhost/folder_name`。当您的浏览器加载文件时，它不知道它们位于`C:/xampp/htdocs/`.

注意：*您拥有的任何代码都不会为您提供“网络根”。*

`__FILE__`将返回您*服务器*上文件的路径，例如：``C:/xampp/htdocs/include/header.php`.

`$_SERVER['DOCUMENT_ROOT']`将返回文件所在*服务器*上的路径，例如：`C:/xampp/htdocs/`.

要获得您的“网络根”，您需要使用`$_SERVER['SERVER_NAME']`. 这将返回您`example.com`（或其他）。你可能需要附加`http(s)://`到它。

```
$serverRoot = $_SERVER['DOCUMENT_ROOT'];
$webRoot = ($_SERVER['HTTPS'] ? 'https://' : 'http://') . $_SERVER['SERVER_NAME']; 
```

您也可以只`/`用作您的网络根目录。

```
<img src='http://example.com/images/wall.png" /> 
```

和

```
<img src='/images/wall.png" /> 
```

应该是等价的。

试试看`var_dump($_SERVER);`，它会给你一些有趣的信息。

**编辑**：[`dirname`](http://php.net/dirname)如果要获取“根文件夹”下的“子文件夹”，请使用。以上将为您提供主根。

```
$serverPath = dirname(__FILE__); // or __DIR__
$webPath = dirname($_SERVER['PHP_SELF']); 
```

# c# - Properties.Resources 未加载图像

> ID：13808274
> 
> 赞同：3
> 
> 时间：2012-12-10T20:01:49.530
> 
> 标签：c#, resources

我在 Visual Studio 2012 C# 中有一个游戏应用程序。我在项目的资源文件中拥有我正在使用的所有 .png 图像。

您知道为什么我可以使用 Properties.Resources 访问所有文件，但只有一个文件？

我检查了完整的文件路径并将其设置为资源文件夹。它像我一样添加到程序中 Add -> Existing Item 并添加了图像。

它看起来就像其他图像一样。我不知道为什么它没有加载。我需要这个，因为我需要通过电子邮件向我的讲师发送一个 .exe，如果没有这个图像，这个项目就什么都不是！

![在此处输入图像描述](../Images/bd0e486caa363405d25868fcc62653c6.png)

我在资源文件中添加了这个

```
internal static System.Drawing.Bitmap grid_fw {
            get
            {
                object obj = ResourceManager.GetObject("grid.fw", resourceCulture);
                return ((System.Drawing.Bitmap)(obj));
            }
        } 
```

虽然现在网格可用，但它返回 null ：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:14:00.893

发现自：[Properties.Resources 图标名称没有出现在智能感知中](https://stackoverflow.com/questions/3520173/properties-resources-the-icon-name-does-not-appear-in-the-intellisense)

> 您还需要将图标添加到`Resources.resx`文件中。在 Visual Studio 中打开它并将您的图标拖到 resx 的图标菜单中，它将变为可用。

另请参阅[添加和编辑资源 (Visual C#)](http://msdn.microsoft.com/en-us/library/7k989cfy%28VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:09:44.953

您可以通过以下方式获取对图像的引用：

```
Image myImage = Resources.yourImage; 
```

如果要制作图像的*副本*，则需要执行以下操作：

```
Bitmap bmp = new Bitmap(Resources.yourImage); 
```

完成后不要忘记处理*bmp*。如果您在编译时不知道资源映像的名称，可以使用资源管理器：

```
ResourceManager rm = Resources.ResourceManager;
Bitmap yourImage = (Bitmap)rm.GetObject("yourImage"); 
```

ResourceManager 的好处是您可以在 Resources.myImage 通常超出范围或您想要动态访问资源的地方使用它。此外，这适用于声音、配置文件等。

# php - 如何将从 canvas.toDataUri 获得的 png 数据 uri 存储在服务器/数据库上

> ID：13808278
> 
> 赞同：0
> 
> 时间：2012-12-10T20:02:04.403
> 
> 标签：php, javascript, image, canvas, png

我想将图像保存为服务器上的文件，并将图像文件的名称存储在数据库中。我如何使用 php 来做到这一点？

还是我应该使用发布请求将图像数据存储在数据库中..？

```
imagedata = canvas.toDataURL("image/png") 
```

我可以简单地使用图像数据作为变量进行发布请求，还是我必须先对其进行编码。我对网络开发比较陌生..

我还想从数据库中检索图像数据..

简而言之，我所拥有的只是`imagedata`如何将它存储在服务器上并稍后再次检索它。

# .net - 调试器.Launch()

> ID：13808280
> 
> 赞同：0
> 
> 时间：2012-12-10T20:02:09.640
> 
> 标签：.net, debugging, system.diagnostics

所以我们在一个windows server 2008 环境中，多个开发人员在终端中工作，处理相同代码的不同部分。（我知道，它很难看，没有修订控制。）问题是，并且无论如何，如果有人使用 Debugger.Launch() 调试 Web 服务，用户会向哪个用户发送消息询问用户是否要调试发送？我问，因为我作为一个尝试调试代码的用户登录，但另一个用户正在收到消息。我想知道如何让它向我发送消息。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T17:02:01.090

该`Debugger.Launch()`语句将为它运行的任何帐户启动调试器对话框，假设有一个终端会话为其打开。如果没有，它会寻找可以向其发送消息的任何其他活动会话。如果失败，它将继续运行。

因此，如果您`Debugger.Launch()`在项目的服务器端代码中有一个语句并且没有在本地运行它（通过 IIS 或其他方式），它可能不会按照您希望的方式工作；）

（问题评论中的内容总结）

# java - 我应该尽可能将可变对象的引用设置为 final 吗？

> ID：13808281
> 
> 赞同：1
> 
> 时间：2012-12-10T20:02:10.707
> 
> 标签：java

我知道将`final`对象字段用于 1）在构造函数中仅设置一次 2）对不可变对象的引用是一种很好的做法。

在构造函数中只设置一次但引用可变对象的字段呢？

目前，我更喜欢`final`仅用于不可变对象引用，因为我可以快速查看哪些字段表示对象的可变状态（那些不是最终状态）。

**更新**：我知道 final 在技术上是如何工作的，特别是将可变对象的引用设置为 final 不会使对象不可变。如果我想最大限度地提高代码的清晰度和可理解性，这个问题是关于何时准确使用 final 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:41:03.170

这可能不是一个流行的观点，但我`final`尽可能使用 - 如果您使用它来声明意图，那么可以通过注释来完成。如果您对此的反应是“评论不好”，那么您也应该重新考虑`final`关键字的使用——因为它基本上是评论，对吧？

但是，final 关键字确实（几乎）向任何阅读代码的人保证该变量*不会*在任何地方重置（当然忽略反射......） - 这有时是一件有用的事情。

您可能还对 Jon 对[这个问题的回答感兴趣](https://stackoverflow.com/questions/4279420/does-use-of-final-keyword-in-java-improve-the-performance)

**编辑：**对不起，我应该澄清“尽可能”适用于字段 - 而不是类、方法等，因为那会很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:04:30.223

即使您声明了变量`final`，引用的对象仍然是可变的。因此，如果这是您要避免的，那么它将不起作用（我的意思是使引用的对象不可变）

# java - 递归Java奇怪的行为，打印节点

> ID：13808287
> 
> 赞同：0
> 
> 时间：2012-12-10T20:02:57.807
> 
> 标签：java, recursion, linked-list

代码：

```
public class NodeType {

    public int value;
    public NodeType next;

    public NodeType(){
        value = 0;
        next = null;
    }

    public void printFollowingNodesInOrder(){
        System.out.println(this.value);
        while(this.next != null){
            this.next.printFollowingNodesInOrder();
        }
    }
} 
```

测试类：

```
public class TestClass {

    public static void main(String[] args){

        NodeType nodeOne = new NodeType();
        NodeType nodeTwo = new NodeType();
        NodeType nodeThree = new NodeType();

        nodeOne.value = 1;
        nodeTwo.value = 2;
        nodeThree.value = 3;

        nodeOne.next = nodeTwo;
        nodeTwo.next = nodeThree;

        nodeOne.printFollowingNodesInOrder();       
    }   
} 
```

当我运行这个main方法时，方法似乎在3之后没有退出。输出为：1 2 3 3 3 3 3 3 3

谁能看出问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T20:05:51.870

改变

```
while(this.next != null){ 
```

至

```
if(this.next != null){ 
```

如果您要迭代地打印列表，您将需要一个循环。在递归解决方案中，您不需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T20:05:23.680

```
while (this.next != null) 
```

一旦它开始`printFollowingNodesInOrder`在最后一个节点上调用，它就会永远循环，因为倒数第二个节点（调用函数的那个​​节点）有一个`next`永远不会消失的节点。当您使用递归访问下一个节点时，您不需要循环执行此操作。取出循环，它会工作，但一定要在调用函数之前检查是否为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T20:05:02.323

您没有基本情况，也没有递归方法的默认退出条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T20:08:05.120

你的打印功能应该是这样的：

```
public void printFollowingNodesInOrder(){
    System.out.println(value);
    if(next != null){
        next.printFollowingNodesInOrder();
    }
} 
```

# embedded - 什么是 4'd# 符号？

> ID：13808290
> 
> 赞同：5
> 
> 时间：2012-12-10T20:03:19.283
> 
> 标签：embedded

在 Atmel 数据表中，我看到了以前从未见过的符号，例如：

> 寄存器位 MAX_BE 定义了 CSMA-CA 算法中退避指数的最大值。它等于 macMaxBE；请参阅 [2] 的第 7.5.1.4 节。有效值为 [4'd8, 4'd7, ... , 4'd3]。

如何解释/解码 4'd# 值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T20:10:13.110

对我来说，这看起来像 verilog（或者至少它与 verilog 使用的格式相同）。

`4'd#`表示 4 位字段，十进制值为 #。

`4'd8`二进制也是如此`1000`。

其他数字格式可以是`'h`（十六进制表示）或`'b`（二进制表示）

例子：

```
16'd1 = 0000000000000001
8'hff = 11111111
5'b10101 = 10101 
```

（ETC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:12:48.267

我不确定这个符号应该是什么意思，但类似的[ADI 芯片](http://www.analog.com/static/imported-files/application_notes/AN-1082.pdf)数据表将有效值列为 3 到 8，所以我猜这个人想要的实际值也是 8,7，.. 3\.

*编辑* 我认为蒂姆是对的。

# ruby-on-rails - Rails：主要是 has_one / 有时是 has_many 关系

> ID：13808296
> 
> 赞同：0
> 
> 时间：2012-12-10T20:03:33.583
> 
> 标签：ruby-on-rails

这可能是一个新手问题，但我无法找出最佳解决方案。我有一个`Color`模型和一个`Cover`模型。大多数时候，一个封面`has_one :color`。也许一百分之一，封面`has_many :colors`。我必须`has_many :through`在两个模型之间实现关联吗？似乎是多余的。定义这种关系的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:08:41.103

我认为你应该涵盖一般情况，当`Cover has_many :colors`. 所以这是一个多对多的关系。在这种情况下，您将有 2 个选项：

1.  使用**join table**，如果你只需要在连接表中存储`cover_id`和`color_id`，那么你将使用它`has_and_belongs_to_many`来定义你的关联。使用此选项，您将必须创建连接表。

2.  使用**join model**，如果您不仅需要存储`cover_id`and `color_id`，还需要存储其他属性，并且您需要进行一些计算，所以您必须使用`has_many :through`来定义您的关联。使用此选项，您将必须创建新模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:21:39.793

掩护`has_many :colors`是最好的方法，即使只有一个案例需要它。

# javascript - 从使用 Link 标头的 API 获取所有页面的正确方法（使用 JavaScript/NodeJS）

> ID：13808297
> 
> 赞同：0
> 
> 时间：2012-12-10T20:03:38.407
> 
> 标签：javascript, node.js, github-api, node-github, link-header

我正在使用一个名为[node-github](http://ajaxorg.github.com/node-github)的 NodeJS 模块，它是[Github API](http://developer.github.com/)的包装器，以获取有关某些用户的一些统计信息，例如他们的关注者：

```
var getFollowers = function(user, callback) {
  github.user.getFollowers(user, function(err, res) {
    console.log("getFollowers", res.length);
    callback(err, res);
  });
};

...

getFollwers({user: mike}, function(err, followers) {
  if(err) {
    console.log(err);
  }
  else {
    console.log(followers);
  }
}); 
```

显然，Github 将调用结果限制为最多 100 个（通过`per_page`参数），并利用[Link 标头](http://www.w3.org/Protocols/9707-link-header.html)让您知道存在“下一页”结果。

我使用的模块提供了几种简单的方法来处理 Link 标头，因此您不需要解析它。基本上，您可以致电`github.hasNextPage(res)`或`github.getNextPage(res)`（`res`您从原始`github.user.getFollowers()`电话中收到的回复在哪里）

我正在寻找的是让我的函数返回由所有页面组成的所有结果的正确方法/范式。我涉足了一个递归函数，虽然它有效，但我不禁觉得可能有更好的方法。

如果标准流行起来，这个答案可以作为处理所有未来 Link 标头调用的好方法——不仅仅是 Github 的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:59:19.980

最后，求助于递归（记住递归的两大弱点：维护它，并解释它:)）。如果有人感兴趣，这是我当前的代码：

```
var getFollowers = function(callback) {
  var followers = []
  ,  getFollowers = function(error, result) {
      followers = followers.concat(result);
      if(github.hasNextPage(result)) {
        github.getNextPage(result, getFollowers);
      }
      else {
        callback(error, followers);
      }
    };              

  github.user.getFollowers(options, getFollowers);
}; 
```

但是，我发现如果你只需要关注者的总数，你可以使用 getLastPage 函数来获取最后一页的关注者数量，然后

total_num_of_followers = num_of_followers_on_last_page + (total_num_of_pages * results_per_page)

# javascript - 缓存带有标签的图像：例如radar_0.jpg?12345

> ID：13808298
> 
> 赞同：1
> 
> 时间：2012-12-10T20:03:42.243
> 
> 标签：javascript, ajax

我正在创建一个 javascript 图像循环（用于天气雷达站点），并且我正在使用以下循环在页面加载时预取所有 10 个图像：

```
Radar_Images = new Array();
var now = new Date();
for (var i = 0; i <= 9; i++){
     Radar_Images[i] = new Image();
     Radar_Images[i].src = "radar_" + i + ".jpg?" + now.getTime();
} 
```

我正在添加“？” + 现在.getTime(); 为了确保浏览器在加载页面时拉取新副本，并且正常工作。下载了 10 个新图像，并且数组正确加载了：

[0] = images/radar_0.jpg?12345 （12345 只是举例......它实际上是一个 13 位数字）

[1] = 图像/radar_1.jpg?12345

[2] = 图像/radar_2.jpg?12345

等等

现在，当我播放 javascript 动画时，循环遍历数组，它可以流畅地播放每个缓存的图像。

我有一个定期轮询，使用 XMLHttpRequest 检查radar_0.jpg 标头中的“Last-Modified”标记（radar_0.jpg 始终是最新的图像）。如果检测到新的时间戳，它会跳转到下载新图像的函数：

```
var now = new Date();
Radar_Images[9].src = Radar_Images[8].src;
Radar_Images[8].src = Radar_Images[7].src;
Radar_Images[7].src = Radar_Images[6].src;
Radar_Images[6].src = Radar_Images[5].src;
Radar_Images[5].src = Radar_Images[4].src;
Radar_Images[4].src = Radar_Images[3].src;
Radar_Images[3].src = Radar_Images[2].src;
Radar_Images[2].src = Radar_Images[1].src;
Radar_Images[1].src = Radar_Images[0].src;
Radar_Images[0].src = "images/radar_0.jpg?" + now.getTime(); 
```

这样做的目的是将图像向下移动一个档次，丢弃最旧的图像，并将更新的 radar_0.jpg 图像下载到 [0] 插槽中。这样，我不必再次重新下载所有 10 张图像，因为其中只有一张发生了变化。它按预期工作，这是更新后的数组：

[0] = images/radar_0.jpg?67890 <- 注意 now.getTime() 中新的、唯一的标签

[1] = images/radar_0.jpg?12345 <- 这曾经在位置 0...

[2] = images/radar_1.jpg?12345 <- 这曾经在位置 1...

等等

这就是问题出现的地方。

当我现在循环浏览图像时，Images[0] 和 Images[1] 都显示最新下载的图像。Image[1]，即使它仍然指向较旧的缓存图像，也会丢失。好像浏览器忘记了.jpg之后的所有内容？并将它们识别为相同的图像，radar_0.jpg，即使 ?12345 与 ?67890 不同。

我想知道的是，**有什么方法可以强制浏览器尊重 .jpg?12345 和 .jpg?67890，并显示独特的图像（因为它们应该被缓存为唯一的），即使它们都是radar_0 .jpg**

非常感谢！

**更新：**

因此，经过进一步调查，似乎没有任何图像被缓存，尽管它们似乎在 javascript 循环期间被很好地缓存。循环播放的速度肯定足够快，以至于它们并非全部连续下载。但是当发生转变时，图像（其中只有 9 个）似乎正在重新下载。换句话说：

[0] = images/radar_0.jpg?67890 <- 这会加载新的 radar_0.jpg 文件（正确）

[1] = images/radar_0.jpg?12345 <- 这也会加载新的radar_0.jpg 文件（不正确）

[2] = images/radar_1.jpg?12345 <- 现在加载之前的radar_0.jpg文件，现在在服务器上重命名为radar_1.jpg

[3] = images/radar_2.jpg?12345 <- 现在加载之前的radar_1.jpg文件，现在在服务器上重命名为radar_2.jpg

...

[9] = 图像/radar_8.jpg?12345

注意，现在没有任何东西指向images/radar_9.jpg?12345，所以重命名的radar_9.jpg（以前是radar_8.jpg）没有下载，这就是为什么我说只重新下载9张图片，而不是全部10.

如果我让页面保持足够长的时间，数组最终会被移出，所有指针都指向 images/radar_0.jpg?... 之后是什么？都是不同的。然而，没有什么可以“循环”了，因为它们都是相同的图像——radar_0.jpg。

因此，似乎缓存被完全忽略了，尽管我不确定它为什么适用于循环本身。

我的 HTML 标头设置如下：

```
<META HTTP-EQUIV="Cache-Control" CONTENT="public"> 
```

非常感谢任何帮助。

# bash - 文件名附加 date -shell 脚本时出现问题

> ID：13808300
> 
> 赞同：3
> 
> 时间：2012-12-10T20:03:52.667
> 
> 标签：bash, shell

我试图将当前日期和时间附加到 shell 脚本中的现有文件名，但我发现我的命令没有按预期工作。

例如，如果我的文件名是 f1.log 并且我需要将它与当前时间一起附加。此附加版本必须用于文件的进一步处理。

我尝试使用以下脚本但出现错误

```
 now=$(date +"%m-%d-%Y/%T")
    echo hi >>time.log
    mv "time.log" "time.$now.log" (error here : file or directory not found)
    echo hello >> time.log$now   (have to continue processing with new file) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:05:42.273

文件名中不能有`/`字符。该`mv`命令正在寻找一个以日期输出的分钟、日和年命名的目录，并尝试创建一个以时间命名的文件。只需将格式更改为不包含`/`在文件名中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:07:35.583

问题在于 shell`/`在您的`date +"%m-%d-%Y/%T"`.

将其更改为 a `-`instead（或其他内容，只要它不是`/`或其他会使文件在未来难以使用的元字符）

# ruby-on-rails - UJS 的问题

> ID：13808306
> 
> 赞同：2
> 
> 时间：2012-12-10T20:04:10.737
> 
> 标签：ruby-on-rails, jquery, ujs

我已经在一个 rails (3.2.6) 应用程序中成功添加了 ujs。将 :remote => true 添加到我的表单标记允许我对我的 js.erb 文件进行 ajax 调用以动态加载 div 等。

但是在同一台机器上的另一个应用程序（Ubuntu 12.0.4）中，ujs 引擎似乎无法正常工作。我总是收到找不到模板，因为表单发送的是格式 => html 而不是 js。如果我强制表单使用 js 格式（格式 => 'js'），那么它只会呈现 js.erb 文件，而不是通过 ajax 调用它。

在 application.js 中，我包含了正确的标头，其中包含以下内容：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

当我实际浏览到使用应用程序布局的主主页时，会包含 javascript 文件，其中包括上面提到的 javascirpt 引用。页面中的表格如下：

```
<%= form_tag list_path, :remote => true, :id => 'frmBookResults', :method => :post do %> 
```

但是虽然它包含：remote => true，并且为 list_path 建立了一个路由（该路由有效，因为如果我将 list.js.erb 更改为 list.html.erb，视图会呈现），以及控制器中的一个方法为了处理请求（def list....end），随后的 list.js.erb 被忽略，我得到一个找不到模板的错误，因为 rails 正在将表单请求作为 html 处理，我可以在日志中确认。

我到处寻找解决方案，但无法弄清楚为什么我的 ujs 不适用于这个特定的应用程序，因为它与我的工作应用程序、gemset、版本和配置几乎相同。

我发现了其他几篇关于堆栈溢出的文章，人们遇到了同样的问题，但没有给出最终的有效答案。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:21:17.520

这确实是ajax被破坏的问题。我用来提交表单的 onkeyup 触发器如下：

```
<%= form_tag list_path, :id => 'frmBookResults', :remote => true do %>
    <input id='keyword' type='text' onkeyup='document.forms["frmBookResults"].submit();'/>
<% end %> 
```

请注意以下事项：

```
document.forms["frmBookResults"].submit(); 
```

显然，通过 javascript 提交表单是问题所在，因为当我更新 onkeyup 以使用如下所述的 jquery 提交时，rails ujs 启动并且对我的 list.js.erb 的 ajax 调用有效：

```
onkeyup="jQuery('#frmBookResults').submit()" 
```

感谢您的所有反馈 mccanff！您与来自linkedIn 的rails 组的其他开发人员的贡献帮助我最终解决了我的问题。

# html - 使用 CodeIgniter 从提交按钮调用控制器

> ID：13808309
> 
> 赞同：1
> 
> 时间：2012-12-10T20:04:14.210
> 
> 标签：html, mysql, codeigniter, model-view-controller

我正在加载一个视图，并从控制器传递 2 个参数，如下所示：

```
$this->load->view('confirm_data_v', $data); 
```

在 confirm_data_v 视图中，我收到 $data 是一个数组。在 confirm_data_v 我有一个提交按钮，但是当我点击它时我想调用另一个控制器。confirm_data_v 中的按钮代码为：

```
 <div class = "container">
        <div class="form-actions">
          <button type="submit" class="btn btn-success">Save</button>
        </div>
    </div> 
```

confirm_data_v 是一个视图，用于向用户确认他提供的信息，因此当他单击“保存”按钮时，它会调用控制器将其保存到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:06:14.487

您通常不能直接从视图中调用控制器 - 但您不需要在按钮单击时将按钮重定向到或 ajax 调用您喜欢的任何 url（本例中为 mysite.com/myurl），然后将其路由到您的控制器：

```
$route['myurl'] = 'mycontroller'; 
```

您在两个页面之间存储数据的主要选项是存储在会话或 cookie 中，或者将所有数据回显到隐藏的表单字段中并重新发布（如果它是敏感数据 - 使用会话选项）：

[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

如果你真的想从一个视图中调用一个控制器，你可以使用wiredesigns模块化codeigniter来做到这一点：[https ://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)

但一般来说，这与 mvc 架构背道而驰，没有必要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:41:15.637

我从你的问题中得到了什么，你想在从控制器 n#2 加载数据后从视图中向控制器 n#1 提交数据

如果是这种情况，您可以这样做

**方法#1**

```
<?php echo form_open('controller/function'); ?>   
 <div class = "container">
            <div class="form-actions">
              <button type="submit" class="btn btn-success">Save</button>
            </div>
        </div>
<?php echo form_close(); ?> 
```

你可以访问任何其他值`$this->post->input('input_name')`

**方法 #2** 使用 Anchor 代替提交按钮

```
<div class = "container">
        <div class="form-actions">
           <?php echo anchor('controller/function/parm','Save',array('class'=>'btn btn-success')); ?>
        </div>
</div> 
```

例如在您的控制器中

```
function confirm_save($parm)
{
   //save to database
   //redirect back to the next controller you want with success message for example using session flash data
   //or load another view but URL will be still the same whatever suits your case 
} 
```

# android - 从 java 服务访问 Android 上下文

> ID：13808311
> 
> 赞同：2
> 
> 时间：2012-12-10T20:04:17.133
> 
> 标签：android, android-intent

我正在尝试创建一个在系统服务器之外运行的 java 服务，它将从引导开始，它基于配置可以监视 Android 设备并监听广播。我一直无法找到有关如何编写作为非 zygote 启动的进程运行的长时间运行的 java 服务的文档。我正在尝试修改平台，并且此服务将添加到通过重建 Android 源代码生成的自定义 system.img 中。

该服务的启动类似于用于从 adb 运行 am 的脚本。

```
base=/system
export CLASSPATH=$base/framework/am.jar
exec app_process $base/bin com.android.commands.am.Am "$@" 
```

我发现尝试添加守护程序的唯一示例是实现在设备上运行的完全[本机服务。](https://groups.google.com/forum/?fromgroups=#!topic/android-porting/xH3ufHVCGk4)

[嵌入式](http://shop.oreilly.com/product/0636920021094.do?sortby=publicationDate)Android 描述了 Android 用户空间和在那里运行的一些本机守护进程，以及如何创建服务并将它们添加到 init 以在设备启动时至少在 Zygote 和系统服务器等之前启动。

```
public class Monitor{
    public static void main(String [] args){
        new Monitor.run();
    }
    public void run(){
         Application app = new Application();
         Context con = app.getApplicationContext();
         BroadcastReceiver receiver = new BroadcastReceiver(){
             public void onReceive(Context context, Intent intent){
                 Log.i(TAG, "Received intent:"+ intent.getAction());
             }   
         }
         IntentFilter filter = new IntentFilter("android.intent.action.TIME_TICK")
    }
} 
```

我还根据 ActivityManagerService 中的一段代码尝试了这个。公共类监视器{私有上下文mContext；

```
 Monitor(){
        Looper.prepare()
        ActivityThread at = ActivityThread.systemMain();
        mContext = at.getSystemContext();
    }
    public static void main(String [] args){
        new Monitor.run();
    }
    public void run(){
         BroadcastReceiver receiver = new BroadcastReceiver(){
             public void onReceive(Context context, Intent intent){
                 Log.i(TAG, "Received intent:"+ intent.getAction());
             }   
         }
         IntentFilter  filter = new IntentFiler("android.intent.action.AIRPLANE_MODE");
         mContext.registerReceiver(receiver,filter);
    }
} 
```

我可以使用 adb 和 am 从命令行生成意图/广播，但无论如何都可以接收广播。任何意见或建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:57:51.363

Activity 管理器具有防止 non_Apps/Zygote 进程在 Android 中接收广播的代码。最终使用不同的方法来满足我自己的需求。

```
public Intent registerReceiver(IApplicationThread caller, String 
callerPackage, 
        IIntentReceiver receiver, IntentFilter filter, String 
permission, int userId) { 
    enforceNotIsolatedCaller("registerReceiver"); 
... 
} 
```

# iphone - 在 iphone 应用程序中解析 acsm

> ID：13808315
> 
> 赞同：2
> 
> 时间：2012-12-10T20:04:44.757
> 
> 标签：iphone, objective-c, ios

我是 iOS 开发的新手。我正在为 iPad 开发一个 ePUB 阅读器应用程序。

服务器向我发送扩展名为 .acsm 的文件。它是一个 XML 格式的文件。现在我需要解析这个 acsm 文件并下载这本书。

服务器端开发人员说它可以正常工作，他可以​​使用 Adob​​e Digital Editions 下载电子书。

我应该怎么做才能下载实际的书并显示它？

这些是 acsm 文件的内容：

```
<fulfillmentToken fulfillmentType="buy" auth="user" xmlns="http://ns.adobe.com/adept">
  <distributor>urn:uuid:861ac232-6f99-4be5-8b78-28d3aa1a1200</distributor>
  <operatorURL>http://litstage.cloudapp.net:8080/fulfillment/</operatorURL>
  <transaction>ACS4-6490845051477798803551940</transaction>
  <expiration>2012-12-05T10:57:33+00:00</expiration>
  <resourceItemInfo>
    <resource>urn:uuid:45c004e9-ff9f-4117-94b9-c6776176fa62</resource>
    <resourceItem>0</resourceItem>
    <metadata>
      <dc:title xmlns:dc="http://purl.org/dc/elements/1.1/">The Divine Comedy</dc:title>
      <dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Dante, Alighieri</dc:creator>
      <dc:publisher xmlns:dc="http://purl.org/dc/elements/1.1/">FeedBooks (www.feedbooks.com)</dc:publisher>
      <dc:identifier xmlns:dc="http://purl.org/dc/elements/1.1/">urn:uuid:7d0300ba-2381-11dd-8c0f-001cc049a027</dc:identifier>
      <dc:format xmlns:dc="http://purl.org/dc/elements/1.1/">application/epub+zip</dc:format>
      <dc:language xmlns:dc="http://purl.org/dc/elements/1.1/">en</dc:language>
      <thumbnailURL>http://litstage.cloudapp.net:8080/media/45c004e9-ff9f-4117-94b9-c6776176fa62.jpg</thumbnailURL>
    </metadata>
    <licenseToken>
      <resource>urn:uuid:45c004e9-ff9f-4117-94b9-c6776176fa62</resource>
      <permissions>
        <display/>
        <excerpt/>
        <print/>
        <play/>
      </permissions>
    </licenseToken>
  </resourceItemInfo>
  <hmac>gGIGmkDLFpWda2dWchW3E46O9oA=</hmac>
</fulfillmentToken> 
```

# android-mapview - Android 以编程方式创建的 MapView v2 不显示

> ID：13808316
> 
> 赞同：6
> 
> 时间：2012-12-10T20:04:49.403
> 
> 标签：android-mapview, google-maps-android-api-2

我在 Android Google Maps v2 示例应用程序中更新了 RawMapViewDemoActivity.java，以编程方式创建 MapView，但未显示地图。我只是得到一个空白屏幕。

我换了

```
 mMapView = (MapView) findViewById(R.id.map); 
```

和

```
 GoogleMapOptions options = new GoogleMapOptions();
    options.camera(new CameraPosition(new LatLng(0, 0), 15, 0, 0));         
    mMapView = new MapView(this, options);
    mMapView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:30:08.567

您是否已将所有 livecycle 方法转发到 new `MapView`？

```
mMapView.onCreate(savedInstanceState); 
```

查看[API 参考](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T21:25:18.950

抱歉 - 我前段时间修复了这个问题，但忘记发布答案。

似乎必须将 MapView 放置在布局容器中才能正确显示。以下片段显示了我为使示例工作所做的工作。

```
LinearLayout linearLayout = new LinearLayout(this);
GoogleMapOptions options = new GoogleMapOptions();
options.camera(new CameraPosition(new LatLng(0, 0), 1, 0, 0));          
mMapView = new MapView(this, options);
linearLayout.addView(mMapView);
setContentView(linearLayout); 
```

# c# - 为什么闪存驱动器在第一次运行时速度较慢？

> ID：13808320
> 
> 赞同：0
> 
> 时间：2012-12-10T20:05:06.137
> 
> 标签：c#, .net

> **可能重复：**
> [为什么 Directory.GetFiles() 在后续运行中运行得更快？](https://stackoverflow.com/questions/12519374/why-does-directory-getfiles-run-faster-on-subsequent-runs)

我正在运行将所有`DirectoryInfo`' （递归地）放在闪存驱动器上的文件夹中的代码。插入驱动后第一次运行大约需要 15~18 秒。在随后的运行中 - 大约 5~6 秒。如果我在插入驱动器后立即运行它，或者在运行前等待大约 45 秒，这两种情况都是如此。

差异的原因是什么？

# android - Android 应用程序：退出与最小化

> ID：13808321
> 
> 赞同：2
> 
> 时间：2012-12-10T20:05:07.767
> 
> 标签：android, back-button

是否有 Android 标准或编码约定/最佳实践说明当用户“退出”应用程序时应用程序是否应该退出（不在后台运行）或最小化（在后台运行）？

例如，您在应用程序的主页上。处理背压的最佳做法是什么？显而易见的答案是让 android 处理它自己的后退按钮按下，然后退出应用程序。但是可以覆盖和最小化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:09:22.690

也许这会有所帮助

“App 遵循 Android 设计指南并使用常见的 UI 模式和图标：App 没有重新定义系统图标的预期功能（例如后退按钮）”。

[Android 核心标准政策](http://developer.android.com/distribute/googleplay/quality/core.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:12:22.190

在我看来，这取决于您提出的申请类型。例如，如果您有一个应用程序需要将某些内容保存到数据库中，或者当用户单击后退按钮时，我同意您只需最小化该应用程序。但即便如此，在应用程序完成保存后，它也应该退出。

但如果可能的话，我建议你退出应用程序，这也会让手机释放内存/CPU，供其他应用程序使用等。它还可以节省电池。

当然，这是 Android 用户的预期行为：如果返回，则关闭应用程序。你不想让你的用户感到困惑;-)

# html - CSS媒体查询http请求

> ID：13808322
> 
> 赞同：2
> 
> 时间：2012-12-10T20:05:10.623
> 
> 标签：html, css

我有一个关于 CSS 媒体查询的问题。我想知道 CSS 媒体查询是否会影响网页上的 http 请求数。

例如：

```
<link rel="stylesheet" href="file.css" media="only screen and (max-width: 640px)">
<link rel="stylesheet" href="file2.css" media="only screen and (max-width: 960px)">
<link rel="stylesheet" href="file3.css" media="only screen and (max-device-width: 480px)"> 
```

我的问题是：根据我对 CSS 媒体查询的理解，如果网页的访问者正在使用一个设备/监视器，那么其他样式表不适用。如果媒体查询不适用于访问者，那么它是否仍向页面添加 http 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:10:11.980

发出 HTTP 请求以下载所有链接的样式表，而不管它们的`media`属性是什么，所以：

```
<link rel="stylesheet" href="devices.css" media="only screen and (max-width : 767px)">
<link rel="stylesheet" href="wider.css" media="all"> 
```

将导致两个 HTTP 请求。请参阅 HTML5 规范工作草案的第 4.12.5.11 节：http `links`: [//www.w3.org/html/wg/drafts/html/master/links.html#link-type-stylesheet](http://www.w3.org/html/wg/drafts/html/master/links.html#link-type-stylesheet)

> 获取资源的适当时间是创建外部资源链接或将其元素插入文档时，以最后发生的为准。如果资源是替代样式表，则用户代理可以推迟获取资源，直到它成为首选样式表集的一部分。

为了最大限度地减少 HTTP 请求，请将您的样式表组合到一个文件中并将它们包装在`@media (max-width:767px){ ... }`等中。

# javascript - 创建具有特定长度和宽度的二维数组

> ID：13808325
> 
> 赞同：4
> 
> 时间：2012-12-10T20:05:18.400
> 
> 标签：javascript, arrays

*见标题。我基本上需要它来创建一个可以是任何尺寸的空白数组，例如 40x60。基本上，也许像这样的东西`makeArray(3, 4)`制作了一个数组：

```
[][][]
[][][]
[][][]
[][][] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T20:13:38.230

Javascript 数组的大小是动态的。但是，如果您希望创建一个特定大小的数组，`Array`构造函数需要一个可选的长度参数：

```
function makeArray(d1, d2) {
    var arr = new Array(d1), i, l;
    for(i = 0, l = d2; i < l; i++) {
        arr[i] = new Array(d1);
    }
    return arr;
} 
```

略短：

```
function makeArray(d1, d2) {
    var arr = [];
    for(let i = 0; i < d2; i++) {
        arr.push(new Array(d1));
    }
    return arr;
} 
```

**更新**

```
function makeArray(w, h, val) {
    var arr = [];
    for(let i = 0; i < h; i++) {
        arr[i] = [];
        for(let j = 0; j < w; j++) {
            arr[i][j] = val;
        }
    }
    return arr;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:18:42.917

那么让 Array 将是一个像这样的简单函数

```
 ​function makeArray(a,b) {
        var arr = new Array(a)
        for(var i = 0;i<a;i++)
            arr[i] = new Array(b)
        return arr
    }
    console.log(makeArray(4,4)) 
```

但是您不必使用函数定义数组，您可以简单地执行类似的操作

```
var arr=[]
arr[10] = 10 
```

这将导致一个包含 10 个元素的数组，0 - 9 是`undefined`

但在这种情况下，答案就足够了，我试图在这个问题中指出一些关于数组的事情，如果你有兴趣可以看看这个[问题](https://stackoverflow.com/a/13725353/1487756)

# java - 使用组件将 jlabel 添加到 jframe

> ID：13808329
> 
> 赞同：-3
> 
> 时间：2012-12-10T20:05:34.367
> 
> 标签：java, swing, jframe, jlabel

我有2节课，

我的主类创建了一个框架，我希望另一个类向它添加内容。一点阅读 arroudn 告诉我我应该使用组件来执行此操作，但是当我运行我的代码时，框架是空的。

```
 public static void main(String[] args)
 {
    // create frame
    JFrame frame = new JFrame();
    final int FRAME_WIDTH = 800;
    final int FRAME_HEIGHT = 600;
    // set frame attributes
    frame.setSize(FRAME_WIDTH, FRAME_HEIGHT);
    frame.setTitle("My Frame");
    frame.setVisible(true);

    Component1 Com = new Component1();
    Component add = frame.add(Com);

} 
```

我的 Component 类创建了一个 JLabel

```
public class Component1 extends JComponent {

   public void paintComponent()
   {
       JLabel label = new JLabel("<html>Some Text</html>");
   }
} 
```

我没有收到任何编译错误，但是我的 JFrame 中没有任何文本。

谁能解释我做错了什么？

克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T20:08:30.370

您需要*添加*. `JLabel`也更好地扩展`JPanel`而不是`JComponent`因为它有一个默认的[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，并且将使任何添加的组件出现而无需设置组件大小。`paintComponent`用于自定义绘画顺便说一句。

```
public class Component1 extends JPanel {

   Component1() {
      JLabel label = new JLabel("<html>Some Text</html>");
      add(label);
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T20:10:47.793

无需创建新的`Component`. 只要打电话`frame.getContentPane().add(label)`。并在此之前初始化您的标签。

# php - 下拉菜单框的 while 循环，并让提交按钮位于此 while 循环之外

> ID：13808332
> 
> 赞同：-1
> 
> 时间：2012-12-10T20:05:44.103
> 
> 标签：php, html, mysql, post, submit

我目前有一个下拉菜单框，它从我的 mySQL 数据库的列中获取一个元素并将其显示在下拉框中。用户还可以从五个预先确定的选项中进行选择。单击提交时，更改会反映在数据库中。

我的代码没有问题，但我想让它对用户更直观。此刻，点击提交后，页面刷新，页面失去滚动位置（一旦刷新，页面将转到顶部）。

如何在 while 循环之外制作提交按钮？我想在页面底部有提交按钮，这意味着它将在迭代 while 循环之外，对吗？我怎么能这样做？

附上我的代码：

```
<?
if (isset($_POST['formSubmit'])){
    $rating = $_POST['rating'];
    $accountID = $_POST['accountID']; 

mysql_query("UPDATE Spreadsheet SET rating='$rating' WHERE accountID='$accountID'");
}

while ($row = mysql_fetch_array($query)){ ?>

<form name ="rating" method ="POST" action ="" > <?

echo "<input type = 'hidden' name = 'accountID' value = '" . $row['accountID'] . "' >";

?>
    <select name="rating">

        <? $values = array('0 - No rating','1 - Very Bad','2 - Bad','3 - Average','4 - Above Average');

        for ($i =0; $i < count($values); $i = $i + 1){
            echo "<option value = \"$i\""; 

            if ($row['rating'] == $i) {
                echo "selected=\"selected\"";
            }

            echo ">" . $values[$i] . "</option>";

        }

        ?>

        </select>
        <input type ="Submit" name ="formSubmit" value ="Submit" />
        </form>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:29:39.457

我建议你用 AJAX 解决这个问题。与其作为表单提交，不如将其作为 AJAX 请求发送。就像是：

```
$('select[name="rating"]').change(function () {
    var rating = $("select[name="rating"] option:selected").val();
    $.post(
        'YOUR-URL.php',
        {'rating' : rating},
        function(response) {
            //do what you got to do
        }
    )
}); 
```

# iphone - 故事板中自定义单元格中的 UIActivity 指示器

> ID：13808340
> 
> 赞同：3
> 
> 时间：2012-12-10T20:06:07.700
> 
> 标签：iphone, ios, ipad, uiactivityindicatorview

我已将 UIActivityIndi​​cator 的 IBOutlet 添加到自定义单元格，但它并未显示在每个单元格上，仅在前 2-3 上显示，然后什么也没有。另一件事，当我滚动表格并返回前 3 个单元格时，UIActivityIndi​​cator 也会从这些单元格中消失......

代码：

细胞.h

```
@interface Cell : UITableViewCell

@property (strong, nonatomic) IBOutlet UIImageView *image;
@property (strong, nonatomic) IBOutlet UILabel *label;
@property (strong, nonatomic) IBOutlet UIActivityIndicatorView *activityIndicator;

@end 
```

细胞.m

```
@implementation Cell

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self)
    {
        // change to our custom selected background view
    }
    return self;
}

@end 
```

在情节提要中 UIactivityIndi​​cator 设置为：行为： - 动画

出于测试目的...

和：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCell";
    Cell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // load the image for this cell
    Wallpaper *wallpaper = [xmlParser.wallpapers objectAtIndex:indexPath.row];

    cell.label.text = wallpaper.title;
    NSString *imageToLoad = wallpaper.thumbnail;

    [cell.image setImageWithURL:[NSURL URLWithString:imageToLoad] placeholderImage:nil options:SDWebImageProgressiveDownload progress:^(NSUInteger receivedSize, long long expectedSize)
     {

     }
                          completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType)
     {
         //[cell.activityIndicator stopAnimating];
     }];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                     initWithTarget:self action:@selector(tapped:)];
    [cell.image addGestureRecognizer:tap];
    [cell.image setTag:indexPath.row];

    CALayer * l = [cell.image layer];
    [l setMasksToBounds:YES];
    [l setCornerRadius:5.0];
    cell.layer.cornerRadius = 7.0;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:31:23.130

1.  如果您注释掉您正在执行的整段代码，您是否在`setImageWithURL`表格的所有行上都成功地获得了动画活动指示器？让我们首先确保您`UIActivityIndicatorView`的工作正常。如果它在您注释掉时有效`setImageWithURL`，那么问题显然就在那里。如果它不起作用，即使你禁用`setImageWithURL`了，那么你有一个更根本的问题。让我们确保您成功启动活动指示器。我知道您正在 IB 中打开它，但我真的建议您在 IB 中手动打开它（在适当的时候）`cellForRowAtIndexPath`，而不是依赖它为您启动它。

2.  在您完成的块中，您确实应该检查以确保有问题的单元格仍在屏幕上并且没有被出列和重用（例如调用`cell = [tableView cellForRowAtIndexPath:indexPath]`并确认非`nil`值），因为我假设您`setImageWithURL`正在异步操作。（注意：此`UITableView`实例方法`cellForRowAtIndexPath`不应与名称相似的`UITableViewController`方法混淆。）每当您对 tableview 单元格执行异步操作时，这种关于假设单元格仍在屏幕上的逻辑可能会出现问题。当我听说某些异步更新没有正确更新的事实时，我担心出队的单元格。（请参阅我在此[Stack Overflow 上的第 3 点答案](https://stackoverflow.com/questions/12703297/uitableview-with-images-scrolls-very-slowly/12721899#12721899)有关如何检查单元格是否仍然可见的示例；这是一个略有不同的答案，但为您提供了一个您需要考虑的问题的示例。）

3.  不相关，但我不会每次都添加 UITapGestureRecognizer。你不是在冒险一个已经出列并重复使用十几次的单元格有十几个点击手势识别器吗？最好在您的`UITableViewCell`子类中进行。我通常这样做`layoutSubviews`（如果你尝试在你的`init`方法中这样做，因为 imageview 还不存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:35:48.313

尝试...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
     static NSString *CellIdentifier = @"CustomCell";
    Cell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.activityIndicator.hidden = NO;
    [cell.activityIndicator startAnimating];
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:.1]];

    // load the image for this cell
    Wallpaper *wallpaper = [xmlParser.wallpapers objectAtIndex:indexPath.row];

    cell.label.text = wallpaper.title;
    NSString *imageToLoad = wallpaper.thumbnail;

    [cell.image setImageWithURL:[NSURL URLWithString:imageToLoad] placeholderImage:nil options:SDWebImageProgressiveDownload progress:^(NSUInteger receivedSize, long long expectedSize)
     {

     }
                      completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType)
     {
         //[cell.activityIndicator stopAnimating];
     }];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                 initWithTarget:self action:@selector(tapped:)];
    [cell.image addGestureRecognizer:tap];
    [cell.image setTag:indexPath.row];

    CALayer * l = [cell.image layer];
    [l setMasksToBounds:YES];
    [l setCornerRadius:5.0];
    cell.layer.cornerRadius = 7.0;

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T10:46:07.950

```
NINetworkImageView *imageView=[[NINetworkImageView alloc]init];
imageView.delegate=self;
[imageView setPathToNetworkImage:[NSString stringWithStdString:imageUrl]]; 
```

使用第三方类来解决此任务。

# wpf - WPF 模块工具栏棱镜

> ID：13808342
> 
> 赞同：1
> 
> 时间：2012-12-10T20:06:16.143
> 
> 标签：wpf, prism, unity-container

谁能提供有关我将如何填充类似于比利霍利斯视频显示在应用程序底部的 StaffLynx 实体工具栏的导航工具栏的提示？

如果确实运行的应用程序版本已加载并可用客户端模块但不确定如何执行此 MVVM 样式，我只想在工具栏中显示“客户端”图标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:22:19.243

你想要的是你的工具栏有一个区域：

```
<controls:MyToolbar Prism:RegionManager.RegionName="ToolbarRegion" /> 
```

然后确保`RegionAdapter`您的工具栏类型有效；您可以在引导程序中覆盖`ConfigureRegionAdapterMappings`以注册其他区域适配器：

```
protected override RegionAdapterMappings ConfigureRegionAdapterMappings()
{
    var mappings = base.ConfigureRegionAdapterMappings();

    var toolbarAdapter = Container.Resolve<MyToolbarRegionAdapter>();
    mappings.RegisterMapping(typeof (MyToolbar), toolbarAdapter);
} 
```

然后在您的模块中，您可以注册要在该区域中显示的视图，例如：

```
public class ModuleA : IModule
{
    private readonly IRegionManager _regionManager;

    public ModuleA(IRegionManager regionManager)
    {
        _regionManager = regionManager;
    }

    public void Initialize()
    {
        _regionManager.RegisterViewWithRegion("ToolbarRegion", typeof(MyToolbarItem));
    }
} 
```

`MyToolbarItem`您希望在工具栏中显示的视图在哪里。

然后，Prism 将自动实例化一个实例`MyToolbarItem`并将其添加到名为 ToolbarRegion 的区域中。

# linux - 处理由 epoll 管理的套接字关闭的安全方法

> ID：13808346
> 
> 赞同：3
> 
> 时间：2012-12-10T20:06:33.057
> 
> 标签：linux, sockets

使用 epoll_wait 来管理使用多个线程的多个连接，尝试释放与关闭的套接字关联的自定义数据存在风险。

考虑以下场景，其中 T 是自定义数据：

1.  收到数据，
2.  因为1，线程A从epoll_wait解除阻塞，处理事件（访问T）
3.  同时，另一个线程B，想要关闭连接

线程 B 不能假设 T 可以安全地删除，即使调用 close 会立即从 epoll 中删除套接字。

我有以下标准想法：

在 T 中维护一个变量，该变量在每次调用 write/read 返回 EAGAIN 时递增，并在每次套接字准备好时递减。调用 close 时，在删除 T 之前等待该变量降至零。我遇到的问题是，如果调用 close，epoll_wait 不会返回取消先前调用以武装套接字的指示。

有人有同样的问题吗？你是如何克服它的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:08:52.663

这里至少有三种可能的方式：

*   不要使用线程，简单干净，*通常*可以工作。

*   让一个专用线程执行所有文件描述符轮询并将*事件*发布到执行实际 I/O 和处理的工作线程池。

*   每个线程有一个[`epoll(7)`](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)实例，因此线程管理不相交的描述符集，除了监听套接字来填充这些集，以及一些控制机制，如[`eventfd(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/eventfd.2.html), 或 self-[`pipe(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)能够关闭整个钻机干净地。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:06:00.737

After many research, I found this recent and remarkable article : [http://lwn.net/Articles/520012/](http://lwn.net/Articles/520012/) Basically it acknowledge the issue I am describing and speaks about a possible future patch to Linux kernel that allows to extend the epoll API in a way that solves the issue.

The extension bring a new command called : EPOLL_CTL_DISABLE. When it is issued, and by means of return value, the calling thread will know if some other thread has just been deblocked from epoll_wait upon same socket. This can help know the safe moment of closure and release of custom data.

# php - PHP 中的 Api - 接受 curl 请求并处理

> ID：13808347
> 
> 赞同：2
> 
> 时间：2012-12-10T20:06:32.840
> 
> 标签：php, api, curl

不确定是否有人可以帮助我解决问题。

我必须为我工作的公司编写一些 php，以便我们与接受 JSON 主体的 API 集成。我使用了 cUrl 方法，脚本运行良好。

如果我想构建另一个可以接受我发送的请求的 php 页面，我该怎么做？

假设我想让某人向我发送相同的请求，然后希望他们发送的信息进入我的数据库，如何将他们的请求转换为 php 字符串？

这是我发送的代码。

```
<?
$json_string = json_encode(array("FirstName" => $name, "MiddleName" => " ", "LastName" => $last));;
// echo $json_string;
// jSON URL which should be requested
$json_url = 'http://www.exampleurl.com';
// jSON String for request
// Initializing curl
$ch = curl_init( $json_url );
// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true,
CURLOPT_HTTPHEADER => array(
    'Accept: application/json;charset=utf-8',
    'Content-Type: application/json;charset=utf-8',
    'Expect: 100-continue',
    'Connection: Keep-Alive') ,
CURLOPT_POSTFIELDS => $json_string
);
// Setting curl options
curl_setopt_array( $ch, $options );
// Getting results
$result =  curl_exec($ch); // Getting jSON result string
echo $result;
$myArray = json_decode($result);
$action = $myArray->Action;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:14:46.053

要从您将收到的 POST 中获取原始数据，您将使用`$postData = file_get_contents('php://input');`

[http://php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)

然后您`json_decode()`将该 POST 的内容返回到 JSON。

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:14:30.960

不太好理解你的问题。可能您正在寻找读取原始 POST 数据的方法？在这种情况下打开并从`php://stdin`流中读取。

```
$stdin = fopen('php://stdin', 'r'); 
```

顺便阅读这里（[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)）如何使用`CURLOPT_POSTFIELDS`。此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。

# php - 如何优雅地停止使用 PHP 的 Quickbooks 连接器传入请求？

> ID：13808350
> 
> 赞同：1
> 
> 时间：2012-12-10T20:06:52.473
> 
> 标签：php, quickbooks, qbxml

我有一个使用[keith-palmer](https://stackoverflow.com/users/26133/keith-palmer)的 PHP 集成框架的系统。

我需要定期对使用它的系统进行维护。带有 Web 连接器的 QB 服务器每 30 分钟自动拨入一次，服务器系统自动将新订单排队等待导入 - 我如何向 quickbooks Web 连接器发送优雅的“无事可做”响应以停止请求而不会导致任何错误？

类似 503 - Try Later 标头是我的想法，但知道 qbXML 的奇迹可能会引起各种头痛！

我看过回复说“100”——我认为这意味着队列已 100% 完成？发送它会导致连接关闭而没有错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:18:14.660

引自框架的作者 Keith Palmer！

* * *

嗨，本，

最简单的方法是设置您自己的身份验证功能，然后当您将站点置于维护模式时，让该功能返回 false，以便从 Web 连接器登录失败。

[http://wiki.consolibyte.com/wiki/doku.php/quickbooks_integration_php_consolibyte_webconnector#custom_authentication_functions](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_integration_php_consolibyte_webconnector#custom_authentication_functions)

* * *

孩子可能会这么容易想到 - 只需将您的身份验证系统短路并返回“false”即可使连接尝试无效。

久经考验：有效！

# c# - 实例化具有相同属性和方法的类

> ID：13808353
> 
> 赞同：1
> 
> 时间：2012-12-10T20:07:03.090
> 
> 标签：c#

我有 2 个班级管理 2 个不同品牌的网络摄像头的运营，每个班级都有完全相同的公共成员，但私人成员却截然不同。其中一个或另一个停靠在 Pane 类中（哪种类型在运行时决定）。Pane 类提供额外的显示功能以及对停靠的任何相机的控制。当应用程序实例化 Pane 类并指定要停靠的相机类型时，我希望 Pane 实例化正确的相机类，以便它可以调用该类。

此示例代码的最后一行说明了我的问题...相机没有 .Start() 方法，因为相机的类型是 Object ，而不是两种 CameraType 类型之一。

如何让“对象相机”在设计时公开分配的类的成员，以便 Pane.Start() 最终调用在 switch/case 块中分配的类的 Start() 方法？

谢谢你的时间，戴夫

```
public class CameraType1  //not to be used directly
{
    public CameraType1()
    {
        Stuff specific to this type of camera
    }

    public void Start()
    {
        // Stuff specific to starting a stream to this type
    }
}

public class CameraType2  //not to be used directly
{
    public CameraType2()
    {
        // Stuff specific to this type of camera
    }

    public void Start()
    {
        // Stuff specific to starting a stream to this type
    }
}

public class Pane
{
    object camera;

    public Pane(string CameraTypeToDeploy)
    {
        switch (CameraTypeToDeploy)
        {
            case "Type1":
                camera = new CameraType1();
                break;
            case "Type2":
                camera = new CameraType2();
                break;
        }
    }

    public void Start()
    {
        camera.Start();   //wrong... camera doesn't have a Start() method
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:17:15.353

您需要一个通用的基本类型。您可以定义一个所有相机类型都实现的接口，或者您可以创建一个所有相机都继承的抽象基类型。或者你可以两者都做。针对接口进行编程并提供实现接口的基类并提供常用成员的实现。

```
public interface ICamera
{
    string Name { get; }
    void Start();
}

public abstract class CameraBase : ICamera
{
    public abstract void Start(); // Needs to be overridden in non abstract classes.
    public virtual string Name { get; protected set; } // May be overridden.
}

public class CameraType1 : CameraBase
{
    public CameraType1()
    {
        // Stuff specific to this type of camera
        Name = "Type 1";
    }

    public override void Start()
    {
        // Stuff specific to starting a stream to this type
    }
}

public class CameraType2 : CameraBase
{
    public CameraType2()
    {
        // Stuff specific to this type of camera
        Name = "Type 2";
    }

    public override void Start()
    {
        // Stuff specific to starting a stream to this type
    }
}

public class Pane
{
    ICamera camera;

    public Pane(string CameraTypeToDeploy)
    {
        switch (CameraTypeToDeploy) {
            case "Type1":
                camera = new CameraType1();
                break;
            case "Type2":
                camera = new CameraType2();
                break;
        }
    }

    public void Start()
    {
        camera.Start();   //OK, all cameras have a Start() method
    }
} 
```

一个接口提供了很大的灵活性和高度的解耦；但是，它没有提供任何可以重用的实现。

没有接口的通用基类（抽象或非抽象）在类之间创建高度耦合，但可以为所有派生类提供现成的成员实现。

您可以结合两者的优点，如我的示例所示。如果相机应该与所有其他相机非常不同，您仍然可以决定让它直接实现接口，而不是从`CameraBase`. 当然，您还可以为不同的相似相机组（例如，来自同一公司的不同相机类型，具有相似的 API）提供多个相机基类。

* * *

**更新#1**

根据您的评论，您的相机类派生自供应商提供的基本类型。你仍然可以让他们实现一个接口。

```
public class VendorSpecificCamera
{
    public string Name { get; } 
    public bool VendorSpecificStart(int mode, int framesPerSecond)
}

public class CameraType1 : VendorSpecificCamera, ICamera
{
    // The 'Name' property is inherited from the vendor specific base class and
    // is therefore already implemented in this example.

    public bool CameraStarted { get; private set; }

    public void Start()
    {
        CameraStarted = VendorSpecificStart(2, 25);
    }
} 
```

如果供应商类型已经具有与接口成员的签名匹配的成员，则您无需在派生类中执行任何操作。如果没有，只需提供缺少的成员。

* * *

**更新#2**

如果应密封供应商特定的相机类，则不能从中派生自己的类。然后，您将围绕供应商类创建一个包装类

```
public class CameraType1 : ICamera
{
    private VendorSpecificCamera _camera;

    public CameraType1()
    {
        _camera = new VendorSpecificCamera();
    }

    public string Name { get { return _camera.Name; } } 

    public bool CameraStarted { get; private set; }

    public void Start()
    {
        CameraStarted = _camera.VendorSpecificStart(2, 25);
    }
} 
```

您还可以通过只读属性使供应商特定的相机可见，从而允许您访问供应商特定的属性。

```
public VendorSpecificCamera Camera { get { return _camera; } } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T20:09:38.763

你让两者都实现一个接口`ICamera`：

```
 public interface ICamera
  {
      void Start();
  } 

  public class Camera1 : ICamera 
  { 
       // your existing implementation 
  }

  public class Camera2 : ICamera 
  { 
       // your existing implementation 
  }

 public class Pane
 {
     ICamera camera;

     public Pane(string CameraTypeToDeploy)
     {
        // Your existing code
     }
     }

     public void Start()
     {
         camera.Start();   //ok, ICamera has a start method
     }
 } 
```

接口是告诉程序几个类提供相同功能并且可以互换使用的最简单方法。另一种选择（抽象类或简单继承）往往会使一切变得更加混乱，但有时也是一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:15:13.853

创建一个包含该`.Start()`方法的接口并同时拥有`CameraType1`并`CameraType2`实现它。并具有该接口的属性`camera`。`Pane`

```
public Interface CameraType
{
    void Start();
}

public class CameraType1 : ICameraType  //not to be used directly
{
    public CameraType1()
    {
        Stuff specific to this type of camera
    }

    public void Start()
    {
        // Stuff specific to starting a stream to this type
    }
}

public class CameraType2 : ICameraType  //not to be used directly
{
    public CameraType2()
    {
        // Stuff specific to this type of camera
    }

    public void Start()
    {
        // Stuff specific to starting a stream to this type
    }
}

public class Pane
{
    ICameraType camera;

    public Pane(string CameraTypeToDeploy)
    {
        switch (CameraTypeToDeploy)
        {
            case "Type1":
                camera = new CameraType1();
                break;
            case "Type2":
                camera = new CameraType2();
                break;
        }
    }

    public void Start()
    {
        camera.Start(); 
    }
} 
```

# javascript - 防止元素被 CSS 操作

> ID：13808356
> 
> 赞同：0
> 
> 时间：2012-12-10T20:07:14.213
> 
> 标签：javascript, jquery, html, css

我目前正在建立一个小型广告网络，主要用于我们自己的网站。

广告是通过在网站上包含脚本来加载的，例如...

```
<script src="http://someurl.com/somejs.js"></script> 
```

在我放置脚本行的任何地方，它都会被广告内容替换，内嵌样式。广告必须是 HTML，这就是困扰我的地方...

例如，假设广告内容类似于

```
<div style="height: 150px; width: 90px; overflow: hidden; display: inline-block;"><p>Buy cheap buttons</p><p><img src="deliciousButtons.png" /></p></div> 
```

然后假设内容已加载到网页中，其中某人的样式表中有以下内容：

```
img { border: 1px solid red; } 
```

现在广告中的图片有一个红色边框 - 太糟糕了。

我唯一的解决方案是使用 iframe……但是，我从来没有真正喜欢过 iframe。

是否有一个 html 元素，您可以在其中放置 HTML，并且放置在其中的所有内容都不受任何样式表首选项的影响 - 只有内联样式？

... 如果不。关于如何做的任何建议？没有 iframe :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:14:58.493

您可以覆盖继承的样式，但要使其正常工作，您需要覆盖所有可能的 CSS 选项，并可能将此类覆盖标记为！或闪光，但我想这也是可能的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:16:22.737

您可以执行以下操作。
添加一个您不想要该样式的类。

`<img src="deliciousButtons.png" class="no-border"/>`

然后在你的CSS上。

```
img:not(.no-border) {
    border: 1px solid red;
} 
```

[**演示**](http://jsfiddle.net/aqN8a/)

# ruby-on-rails - 设计 LDAP Authenticatable 未正确绑定？

> ID：13808357
> 
> 赞同：3
> 
> 时间：2012-12-10T20:07:15.133
> 
> 标签：ruby-on-rails, devise, ldap

出于某种原因，在我的页面上使用 Devise 进行身份验证似乎不起作用，导致出现未经授权的 401 错误。完成 net/ldap 中的步骤似乎绑定得很好。我不确定问题出在哪里。

服务器的输出：

```
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"â", "authenticity_token"=>"0uaLJJKobrDkn1mGDRP/RM6gIec+Wi7oykgWYuutsvk=", "user"=>{"login"=><login>, "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 14ms 
```

来自 ldap.yml：

```
development:
  host: <hostname>
  port: 389
  attribute: sAMAccountName
  base: <base>
  admin_user: <admin user>
  admin_password: <admin pass>
  ssl: false
  # <<: *AUTHORIZATIONS 
```

来自 devise.rb：

```
config.ldap_use_admin_to_bind = true
config.authentication_keys = [ :login ] 
```

从对 irb 的测试：

```
$ irb
irb(main):001:0> require 'rubygems'
=> true
irb(main):002:0> require 'net/ldap'
=> true
irb(main):003:0> ldap = Net::LDAP.new
=> #<Net::LDAP:0x141d19 @host="127.0.0.1", @auth={:method=>:anonymous}, @encryption=nil, @base="dc=com", @port=389, @verbose=false, @open_connection=nil>
irb(main):004:0> ldap.host = <hostname>
=> <hostname>
irb(main):005:0> ldap.port = 389
=> 389
irb(main):006:0> ldap.base = <base>
=> <base>
irb(main):007:0> ldap.auth <admin user>, <admin pass>
=> {:method=>:simple, :username=><admin user>, :password=><admin pass>}
irb(main):008:0> dn = ldap.search( :filter => Net::LDAP::Filter.eq('sAMAccountName', <login>)).first.dn
=> <login dn information>
irb(main):009:0> ldap.auth dn, <password>
=> {:method=>:simple, :username=><login dn information>, :password=><password>}
irb(main):010:0> ldap.bind
=> true 
```

正如您所看到的，绑定通过正常的 net/ldap 测试工作正常，但是当我出于某种原因通过实际的 Rails 站点时它似乎不起作用，即使我复制了 Devise 模块应该做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T02:25:58.210

如果其他人遇到这个问题，[这个问题](https://stackoverflow.com/questions/15577368/devise-ldap-authenticatable-devise-can-authenticate-via-ldap-with-test-script)给了我我需要的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:13:49.513

身份验证密钥不是 :login 而是 :username。它可能会解决您的问题

# javascript - Canvas2Image 或 HTML5 下载属性的跨浏览器替代方案？

> ID：13808359
> 
> 赞同：5
> 
> 时间：2012-12-10T20:07:25.140
> 
> 标签：javascript, html, canvas, base64

在开发[模式生成器](http://bit.ly/hexagrid)时，我遇到了 2011 年[这个问题中描述的相同问题。](https://stackoverflow.com/questions/6045603/name-a-png-file-saved-from-canvas-using-an-open-with-dialog)

给出的答案并没有真正提供**跨浏览器**的**客户端**解决方案。

**单击“导出模式**”按钮时，我将接受以下任何解决方案：

1.  通过 canvas2image 触发下载，同时确保文件以 .png 扩展名保存（无论文件名设置为什么）**或**,

2.  使用该方法产生的图像显示一个小部件（最好是 KendoUI），`Canvas2Image.saveAsPNG()`并让用户从那里保存它，最好不要使用蹩脚的右键单击解决方案，而是使用链接或按钮。

我当前正在使用的按钮的 HTML：

```
<button id="downloadbtn" onClick="javascript:downloadImage()" data-role="button" class="k-button">Export Pattern</button> 
```

触发下载的函数：

```
function downloadImage () {

    //...extra code omitted
    var oCanvas = document.getElementById("my_canvas");
    oCanvas.width = $("#pixels-h").val();
    oCanvas.height = $("#pixels-v").val(); 
    Canvas2Image.saveAsPNG(oCanvas);
    //...extra code omitted    

  } 
```

该文件似乎在 OSX 下使用 Chrome 版本 23.0.1271.95 和 Safari 版本 5.1.7 (6534.57.2) 可以正常下载。

我报告有人在 Firefox 17.0.1 for OSX 下下载后无法打开文件。显然，下载会生成一个 .part 文件。

**最大的问题是，如果没有文件扩展名，我怀疑这种方法是否可靠。**

我正在寻找一种与当前浏览器尽可能兼容的仅限客户端的解决方案，所以我猜 HTML5`download`属性不会起作用，因为它目前仅在 Chrome 中受支持。

有什么创造性的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T18:44:20.250

我遇到了同样的问题。基本问题是需要在标题中添加文件名，但 canvas2images 使用 document.location.href = strData 而 strData 没有标题。所以答案是，canvas2image 不支持我们需要的功能，我们需要尝试另一种解决方案。（例如可能是 FileSaver.js 和 canvas-toBlob.js）

[http://eligrey.com/demos/FileSaver.js/](http://eligrey.com/demos/FileSaver.js/)

# c# - 当我点击列表框项目中的按钮时，如何获取列表框的完整集合？

> ID：13808366
> 
> 赞同：0
> 
> 时间：2012-12-10T20:07:49.513
> 
> 标签：c#, wpf, windows-phone-7

我有一个显示在列表框中的集合。它是主要listBox 的一个listBoxItem。每个列表框的项目（不是主要的）都有一个文本框和按钮。所以，当我点击列表框中的任何按钮时，我需要获取所有集合。这是 windows pnone 7 应用程序。我想获取 listbBox 中的项目列表。如果它不是一个集合，我知道如何获取一个项目（只是主要列表框的项目）

```
 private void Audio_Button_Click(object sender, RoutedEventArgs e)
    {
        string uri = null;
        TextBox tb = null;
        var grid = (Grid)((Button)sender).Parent;
        foreach (var child in grid.Children)
        {
            if (child is TextBox && (string)((TextBox)child).Tag == "URL")
            {
                tb = (TextBox)child;
            }
        }
        uri = tb.Text; 
```

但我不知道如何获得所有物品。问题在于“发件人”具有类型按钮，而不是 listBoxItem。无论如何，如果它的类型为 listBoxItem - 我不确定我是否了解如何制作项目列表（

或者也许我可以使用另一个控件，而无需滚动？收藏不是很大。但我想我会有同样的问题（

更新：

```
 <local:NewsTemplateSelector.Audio>
                                <DataTemplate>
                                    <Grid Name="AudioGrid" MaxHeight="2000">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="75"/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="75"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="28"/>
                                        </Grid.RowDefinitions>
                                        <Image Source="{Binding SourceImage}" Width="75"/>
                                        <TextBlock Text="{Binding SourceName}" Foreground="Black" FontSize="25" Grid.Column="1" TextWrapping="Wrap" />
                                        <TextBlock Text="{Binding Texts}"  Foreground="Black" FontSize="25" Grid.Column="1" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Top" Height="auto" />
                                        <Image Source="{Binding Photo[0].Big}" Margin="10" Grid.Column="1" Grid.Row="2"/>
                                        <TextBlock Text="{Binding Audio[0].Title}"  Foreground="Black" FontSize="25" Margin="96,10,10,10" Grid.Column="1" Grid.Row="3" />
                                        <Button Background="Black"  Content="Play" Grid.Column="1" HorizontalAlignment="Left" Margin="10,7,0,10" Grid.Row="3" d:LayoutOverrides="Height" Width="74" Tap="Audio_Button_Click" />
                                        <Image Source="images\like.jpg" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="4" Width="30" Margin="0,1.5,34,-1.5" d:LayoutOverrides="VerticalMargin"/>
                                        <TextBlock Text="{Binding Likes}" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="4" Foreground="Black" TextWrapping="Wrap" Width="30" Margin="0,0.5,0,-0.5"/>
                                        <Line X1="0" Y1="27" X2="420" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" Grid.Column="1"  />
                                        <Line X1="0" Y1="27" X2="80" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" />
                                        <TextBox Text="{Binding Audio[0].Url}" Tag="URL" Visibility="Collapsed" />
                                    </Grid>
                                </DataTemplate>
                            </local:NewsTemplateSelector.Audio> 
```

和

```
 <local:NewsTemplateSelector.Audios>
                                <DataTemplate>
                                    <Grid Name="AudiosGrid" MaxHeight="2000">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="75"/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="75"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="28"/>
                                        </Grid.RowDefinitions>
                                        <Image Source="{Binding SourceImage}" Width="75"/>
                                        <TextBlock Text="{Binding SourceName}" Foreground="Black" FontSize="25" Grid.Column="1" TextWrapping="Wrap" />
                                        <TextBlock Text="{Binding Texts}"  Foreground="Black" FontSize="25" Grid.Column="1" Grid.Row="1" TextWrapping="Wrap"  VerticalAlignment="Top" Height="auto" />
                                        <Image Source="{Binding Photo[0].Big}" Margin="10" Grid.Column="1" Grid.Row="2"/>
                                        <ListBox Name="audiosListbox" ItemsSource="{Binding Audio}"  MaxHeight="500" Margin="10" Grid.Column="1" Grid.Row="3" >
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="100"/>
                                                            <ColumnDefinition/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Text="{Binding Title}" Grid.Column="1" Foreground="Black" FontSize="25"  />
                                                        <Button Content="Play" Background="Black" Tap="Audios_Button_Click" />
                                                        <TextBox Text="{Binding Audio.Url}" Tag="URL" Visibility="Collapsed" />
                                                    </Grid>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>

                                        <Image Source="images\like.jpg" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="4" Width="30" Margin="0,1.5,34,-1.5" d:LayoutOverrides="VerticalMargin"/>
                                        <TextBlock Text="{Binding Likes}" Grid.Column="1" HorizontalAlignment="Right" Grid.Row="4" Foreground="Black" TextWrapping="Wrap" Width="30" Margin="0,0.5,0,-0.5"/>
                                        <Line X1="0" Y1="27" X2="420" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" Grid.Column="1"  />
                                        <Line X1="0" Y1="27" X2="80" Y2="27" Margin="0,-28,0,0" Stroke="Gray" StrokeThickness="1" />
                                    </Grid>
                                </DataTemplate>
                            </local:NewsTemplateSelector.Audios> 
```

我有![收藏](../Images/dd08d7dfcbd6f7fb9c4fd13f76297c10.png)

![简单的](../Images/5462163e7f985370ea2c44eb4117981f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:30:05.540

您可以使用[Linq To Visual Tree](http://www.scottlogic.co.uk/blog/colin/2010/03/linq-to-visual-tree/)（[下载代码](http://www.scottlogic.co.uk/blog/colin/wp-content/uploads/2010/03/LinqToTree.zip)，只需一个文件）来获取包含所有项目的列表框。点击处理程序上的这段代码应该适用于它。

```
var parentLb = ((Button)sender).Ancestors().FirstOrDefault(x => x is Listbox) as Listbox;
if(parentLb != null)
{
    // Cast the ItemsSource property to the list type you're using...
    var list = parentLb.ItemsSource
    // And do whatever you want with that list.
} 
```

您当然应该`list`转换为其原始类型。

# bash - bash/sh 中的 if 语句数字混淆

> ID：13808371
> 
> 赞同：0
> 
> 时间：2012-12-10T20:08:02.110
> 
> 标签：bash, shell, conditional, sh

我整个上午都在和这段代码争论。在阅读 TL;DP 后，我终于意识到我的 if 语句可能会将输出重定向与比较混淆。

有问题的代码是：

```
#!/bin/sh
...
if [ $DEBUG_LEVEL > 2 ]
then
  echo "I made it here"
  echo "DEBUG: created run_all_somatic_SNV_steps" >>$LOG
fi 
```

我的 if 语句是否将 stderr 重定向与我想要它做的混淆了？（将变量与数字 2 进行比较）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:11:10.943

对于一般外壳：

```
if [ $DEBUG_LEVEL -gt 2 ] 
```

（但如果`DEBUG_LEVEL`从未设置过，那将失败。）

更特定于 bash，并且更好：

```
if (( DEBUG_LEVEL > 2 )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:11:15.933

试试这个测试结构：

```
[ $DEBUG_LEVEL -gt 2 ] 
```

# c# - 更新不重复的树视图

> ID：13808378
> 
> 赞同：0
> 
> 时间：2012-12-10T20:08:31.083
> 
> 标签：c#, drag-and-drop, treeview

我有两个`TreeView`。
第一个是这样设计的：

```
A
|--B1
   |--C1
   |--C2
|--B2
   |--C3
|--B3 
```

第二个是空的。

我实现了一个拖放系统，因此用户可以从我的第一个树视图拖动到第二个树视图来填充它。
当一个节点被拖入时，`TreeView`我希望它带上他所有的父节点和子节点。**不是兄弟姐妹**。

例子 ：

如果我拖动`C2`，我的第二个`TreeView`应该是这样的

```
A
|--B1
   |--C2 
```

如果我也决定添加`C1`，它应该如下所示：

```
A
|--B1
   |--C1
   |--C2 
```

我不想要这样的重复：

```
 A
|--B1
   |--C2
 A
|--B1
   |--C1 
```

所以我从这里有两个问题（考虑到拖放已经像[这样](http://support.microsoft.com/kb/307968)实现，并且只添加了没有父母或孩子的选定节点）。

*   我怎样才能把节点带到孩子和父母身上，而不是兄弟姐妹身上。甚至可能吗？
*   一旦第一个问题得到回答并且我有一个算法来添加一个包含所有父节点和子节点的节点，我如何在不重写整个树两次的情况下使用兄弟节点进行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:36:38.863

更改您`TreeViewDragDrop`的目的地`Treeview`：

```
private void treeView_DragDrop(object sender, System.Windows.Forms.DragEventArgs e)
{
    TreeNode NewNode;

    if (e.Data.GetDataPresent("System.Windows.Forms.TreeNode", false))
    {
        NewNode = (TreeNode)e.Data.GetData("System.Windows.Forms.TreeNode");
        if (!(sender as TreeView).Nodes.Contains(NewNode))
        {
            //Add the droped node 
            List<TreeNode> tt = new List<TreeNode>();
            TreeNode tn = (TreeNode)NewNode.Clone();
            tt.Add(tn);

            //Prepare node with it's parents until the root note
            while ((TreeNode)NewNode.Parent is TreeNode)
            {
                TreeNode tnp = (TreeNode)NewNode.Parent.Clone();

                //prevent siblings to be added
                tnp.Nodes.Clear();

                tt.Add(tnp);
                NewNode = NewNode.Parent;
            }

            //Construct the structure of the treenote to be added to the treeview
            for (int i = tt.Count - 1; i > 0; i--)
            {
                tt[i].Nodes.Add(tt[i - 1]);
            }

            /*Add the whole structured treenode to the treeview*/

            TreeNode rootnote = ExistNotes((sender as TreeView), tt[tt.Count - 1]);
            if (rootnote != null)//Root node exists, add to the existing node
            {
                foreach (TreeNode tsub in tt[tt.Count - 1].Nodes)
                {
                    AddNote(rootnote, tsub);
                }
            }
            else//Root node not exist, add to the treeview as new node.
            {
                (sender as TreeView).Nodes.Add(tt[tt.Count - 1]);
            }

            //  NewNode.Remove();
        }
    }
} 
```

辅助功能：

```
/// <summary>
/// Recursive function to add node
/// </summary>
/// <param name="tnbase">RootNode</param>
/// <param name="tn">Node to be added</param>
private void AddNode(TreeNode tnbase, TreeNode tn)
{
    bool exists = false;
    foreach (TreeNode rt in tnbase.Nodes)
    {
        if (this.IsNodesEquals(rt, tn))
        {
            foreach (TreeNode srt in tn.Nodes)
            {
                this.AddNode(rt, srt);
            }
            exists = true;
        }
    }
    if (!exists)
    {
        tnbase.Nodes.Add(tn);
    }
}

/// <summary>
/// Get exist node from the treeview
/// </summary>
/// <param name="tv">Treeview to check</param>
/// <param name="tn">Node to compare</param>
/// <returns></returns>
private TreeNode ExistNode(TreeView tv, TreeNode tn)
{
    TreeNode existsnote = null;
    foreach (TreeNode rt in tv.Nodes)
    {
        if (this.IsNodesEquals(rt, tn))
        {
            existsnote = rt;
        }
    }
    return existsnote;
}

/// <summary>
/// Compare two nodes by the text
/// </summary>
/// <param name="t1">node to compare</param>
/// <param name="t2">node to compare with</param>
/// <returns></returns>
private bool IsNodesEquals(TreeNode t1, TreeNode t2)
{
    return (t1 != null && t2 != null && t1.Text == t2.Text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:26:38.797

在为某些 torrent 客户端编写 gui 时，我有同样的任务。
打开 torrent 时，应显示包含 torrent 的文件和文件夹的树视图。
我该如何解决：
我有一个文件路径列表，首先我做了什么我已经对其进行了排序，然后使用此函数将排序列表的项目添加到树视图

```
void FileTreeModel::addPath( QString path,QString size )
{
path=QDir::toNativeSeparators(path);
QStringList pathparts=path.split(QDir::separator());

FileTreeItem *iterator=rootItem,*save=rootItem;
if (rootItem->childCount()==0)
{
    //qDebug() << "root item has no childs appending current path";
    FileTreeItem* curitem=rootItem;
    for (int i=0;i<pathparts.count();i++)
    {
        curitem->appendChild(new FileTreeItem(qMakePair(pathparts.at(i),i==pathparts.count()-1? size : ""),curitem));
        curitem = curitem->child(0);
    }
    rootItem=save;
    return;
}
for (int i=0;i<pathparts.count();i++)
{
    int foundnum=-1;
    for (int j=0;j<iterator->childCount();j++)
    {
        //qDebug() << iterator->child(j)->data(0) << " " << pathparts.at(i);
        if (iterator->child(j)->data(0).toString().compare(pathparts.at(i))==0) 
        {
            //qDebug() <<"Found :" << iterator->child(j)->data(0) << " " << pathparts.at(i);
            foundnum=j;
            break;
        }
    }

    if (foundnum >= 0)
    {
        iterator = iterator->child(foundnum);
    }
    else
    {
        //qDebug() << "appending new child" << pathparts.at(i)  << " to "  << iterator->data(0) ;
        iterator->appendChild(new FileTreeItem(qMakePair(pathparts.at(i),i==pathparts.count()-1? size : ""),iterator));
        iterator = iterator->child(iterator->childCount()-1);
        //qDebug() << "new iterator value" << iterator->data(0) ;
    }

}
    rootItem=save;

} 
```

这是Qt，但我认为您可以理解这个想法。

# node.js - Node.js MongoDB Upsert 更新

> ID：13808389
> 
> 赞同：18
> 
> 时间：2012-12-10T20:09:02.317
> 
> 标签：node.js, mongodb, upsert

我正在编写一个对关键字进行评分的小应用程序。因此，如果输入了“beirut”和“education”，如果他们以前没有见过，我想创建一个 mongo 条目，并给他们 1 分。如果有，我想将他们的分数增加 1 . 我正在尝试使用一个更新命令来执行此操作，但我认为我可能做错了。

*   排名是代表数据库的对象
*   “key”是关键字

```
rankingdb.update(
    {keyword:key},
    {keyword:key, {$inc:{score:1}}},
    {upsert:true, safe:false},
    function(err, data) {
      if (err) {
          console.log(err);
      }
      else {
          console.log("score succeeded");
      }
    }
); 
```

`SyntaxError: Unexpected token {`

您不能创建一个带有增量的全新文档吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-10T20:17:01.647

您的一般方法是正确的，但正如错误消息所示，您的代码中存在语法问题。

试试这个：

```
rankingdb.update(
    {keyword: key},
    {$inc: {score: 1}},
    {upsert: true, safe: false},
    function(err,data){
        if (err){
            console.log(err);
        }else{
            console.log("score succeded");
        }
    }
); 
```

当 upsert 需要创建一个新对象时，它会在创建对象时组合来自选择器（第一个参数）和更新对象（第二个参数）的字段，因此您不需要`keyword`在两者中都包含该字段。

请注意，[`update()`](http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#update)在 2.0 驱动程序中已弃用，因此您现在应该使用`updateOne()`或`updateMany()`。

# .net - EF Code First 迁移开发者冲突

> ID：13808390
> 
> 赞同：1
> 
> 时间：2012-12-10T20:09:08.660
> 
> 标签：.net, entity-framework, entity-framework-migrations

与 2 个或更多开发人员一起使用 EF 迁移时，我们遇到了一些冲突。我很好奇是否有人有比我们最终解决这些问题更好的解决方案。首先，这是场景：

2 位开发人员，Dev1 和 Dev2：

**问题：**

1.  Dev1 和 Dev2 都在其应用程序的工作副本中同时进行模型更改。
2.  Dev1 和 Dev2 都创建迁移 (add-migration) 并更新其本地数据库，以便他们可以测试 (update-database)。
3.  Dev1 首先完成并检查他的代码。
4.  Dev2 从 Dev1 中签出代码并运行 update-database。
5.  Dev2 收到一个错误，说有未完成的更改。这些“未完成”的更改是之前在他自己的迁移中应用的更改，但在应用 Dev1 的迁移后现在下落不明，即使这些更改实际上已经应用了。模型验证似乎很混乱，认为这些更改是由于应用 Dev1 的迁移而从未应用过的。

**我们的解决方案：** Dev2 创建一个新的迁移并清空 Up() 和 Down() 方法，然后运行 ​​update-database。这使一切重新同步。

此解决方案有效，但它会导致许多空迁移，除了使模型哈希恢复同步之外没有其他目的。有没有人遇到过类似的问题并找到了另一种解决方法？还是我们错误地使用了数据库迁移？

# jquery - 可以在没有 AJAX 的情况下使用 jQuery mobile - 仅使用样式？

> ID：13808392
> 
> 赞同：0
> 
> 时间：2012-12-10T20:09:15.877
> 
> 标签：jquery, ajax, jquery-ui, jquery-mobile, mobile

我知道有一个 jQuery Mobile 下载定制器，但我不知道我需要检查哪些选项。输入元素的样式似乎与 AJAX 功能相关联？

我想要的只是按钮、菜单、滑块等的样式。我只希望它们看起来干净酷炫，它们不需要异步下载任何东西。

我无意中得到的 - 是所有 AJAX 的东西，这会导致页面加载时出现这些错误：

```
XMLHttpRequest cannot load... 
```

我也尝试过包括这些类型的片段：

```
// disable jQuery mobile AJAX stuff
$(document).live("mobileinit", function() {
    $.mobile.ajaxLinksEnabled = false;
    $.mobile.ajaxFormsEnabled = false;
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.pushStateEnabled = false;
    $.mobile.hashListeningEnabled = false;
}); 
```

因此，无论我尝试过什么，如果没有这些 AJAX 错误，我都无法获得看起来很酷的滑块和按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:31:39.860

[http://jqueryui.com/](http://jqueryui.com/)和[http://jquery.com/](http://jquery.com/)有不同的基本功能，在这方面我相信你试图只使用 UI 部分

检查此响应

*   [https://stackoverflow.com/a/6636467/1815624](https://stackoverflow.com/a/6636467/1815624)

    JavaScript 和 XMLHttpRequest 对象提供了一种在浏览器和服务器之间异步交换数据以避免重新加载整个页面的方法。*

*Ajax（编程），[http](http://en.wikipedia.org/w/index.php?title=Ajax_(programming)&oldid=527356893) ://en.wikipedia.org/w/index.php?title=Ajax_(programming)&oldid=527356893 （上次访问时间为 2012 年 12 月 10 日）。

简单的例子：
客户端“嘿服务器我需要页面 B”
服务器“你现在有什么？”
客户端“页面A”
服务器“那你只需要……”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:11:14.580

你试过[主题滚轮](http://jquerymobile.com/themeroller/index.php)吗？另请查看[棘轮](http://maker.github.com/ratchet/)以了解移动样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:14:59.050

我会按照建议查看主题滚轮，并从您的目标设备查看文档页面：

*   [http://jquerymobile.com/demos/1.2.0/](http://jquerymobile.com/demos/1.2.0/)

此外，您可以尝试此处找到的 alpha 工具：

*   [http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

但正如该页面上所指出的，目前

> 请注意，jQuery Mobile 下载构建器仍处于 alpha 阶段，因此不应在生产网站上使用。

我可能错了，但我相信滑块需要 Ajax 功能才能正常工作...如果您想优化代码以提高速度，请考虑使用 Google 的镜像来加载库...这通常会访问设备上的缓存副本，从而减少给定页面的带宽负载。

*   [https://developers.google.com/speed/libraries/devguide?hl=fr](https://developers.google.com/speed/libraries/devguide?hl=fr)

# drupal - Drupal 7：第二个 URL 参数的上下文过滤器（分类术语）

> ID：13808396
> 
> 赞同：0
> 
> 时间：2012-12-10T20:09:25.093
> 
> 标签：drupal, drupal-7

试图让这个工作伤害我的大脑，也许有人可以帮助我。

我有产品，每个产品都有一个家族。path-auto url 是 {product family}/{product name}

每个产品都有一个家族关系，这意味着您可以通过分类术语选择其父级。

在产品系列页面上，我想要一个可用产品的概要。我尝试使用上下文过滤器，但每个谷歌结果的方法都不起作用，所以我终于来这里寻求帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:21:32.487

好吧，从头开始。预览功能似乎无法正常工作。

我抓住了机会并启用了该块，就在那里。

# jquery - jQuery fadeIn 有效但立即消失

> ID：13808397
> 
> 赞同：0
> 
> 时间：2012-12-10T20:09:28.257
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery 和 fadeIn 淡入页面上的内容片段。它正确淡入，但问题是它在Android中自动淡入后立即淡出。:-\

有任何想法吗？

```
$(document).ready(function (){
    // Fancy intro animation
    $(".scroll-button").fadeIn(1000);

    // Smooth the scrolling
    $(".scroll-button").click(function(event){
            var bodyElement;

            event.preventDefault();

            if($.browser.safari) {
                bodyElement = $("body")
            } else {
                bodyElement = $("html,body")
            }

            bodyElement.animate({
                scrollTop: $('#headerimage').position().top
            }, 500);

            $('.bottom-image').hide();
            $(this.hash).fadeIn(1500);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:06:05.170

So I found out that Android 2.3 doesn't handle click events and there are issues with it. Even attaching jQuery mobile (earlier versions) didn't work.

Eventually adding a div around the image and calling the div instead, worked. Go figure!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:12:42.230

`hash`只属于`location`对象。您试图淡入一个不存在的元素（我怀疑 jQuery 构造函数实际上相当于 $(undefined)）。

使用您发布的代码，`$(this.hash).fadeIn(1500)`正在寻找元素的`hash`属性。`.scroll-button`尝试将该行更改为：

```
$(window.location.hash).fadeIn(1500); 
```

# c++ - c ++计算char数组中的数字数量？

> ID：13808400
> 
> 赞同：1
> 
> 时间：2012-12-10T20:09:39.160
> 
> 标签：c++, char

我有一个 char 数组，其中 0-8 为 char 形式

```
Board[0] = '0';
Board[1] = '1';
Board[2] = '2';
Board[3] = '3';
Board[4] = '4';
Board[5] = '5';
Board[6] = '6';
Board[7] = '7';
Board[8] = '8'; 
```

并且其中一些根据用户输入更改为“x”或“o”但是我需要找出一种方法，以便我可以告诉它们的总数不是“x”或“ o'。

我的意思是，如果说 9 个中有 4 个是“x”或“o”，我需要能够得到剩下 5 个的事实。我试图使用`for each(char c in Board)`并且我已经足够远到我得到它的地方列出不是'x'或'o'的字符，但我不知道如何让它发送剩下多少一个 int 值。这是我得到的。

```
 for each(char c in Board)
    {
        if (c != 'x' && c != 'o')
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:12:24.020

你可以试试

```
auto n = std::count_if(Board, Board+9, std::isdigit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:12:15.340

您应该定义一个计数器来计算这些字符的数量（通过增加它）：

```
int n = 0;
for (char c : Board)
{
    if (c != 'x' && c != 'o')
    {
        n++; // increment n by 1
    }
}

std::cout << n << '\n'; // use the result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:12:36.777

您可以使用[`std::isdigit`](http://en.cppreference.com/w/cpp/string/byte/isdigit)和的组合[`std::count_if`](http://en.cppreference.com/w/cpp/algorithm/count)

```
#include <cctype>    // for std::isdigit
#include <algorithm> // for std::count_if

int num = std::count_if(Board, Board+9, std::isdigit); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T20:20:51.063

假设您不仅想要*任何*数字，而且只有 0 到 8 之间的数字，您可以这样做：

```
int count = 0;

for each(char c in Board)
{
    if (c >= '0' && c <= '8')
    {
        count++;
    }
}

cout << count << " are digits between 0 and 8 (inclusive)" << endl; 
```

# jsf - JSF 到 Bean 到 JSF

> ID：13808401
> 
> 赞同：0
> 
> 时间：2012-12-10T20:09:39.567
> 
> 标签：jsf, javabeans

所以我在尝试传递字符串值时遇到问题。

字符串值通过登录页面作为用户名输入。

然后 JSF 调用 Bean 来验证登录信息，然后进入另一个 JSF 页面。

我想知道如何将用户名传递到新的 JSF 页面。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T20:17:50.830

如果您正在执行导航而不是重定向，那么您基本上不需要做任何事情。该信息也仅在导航页面中可用。

例如在登录页面，

```
<h:inputText value="#{bean.username}" /> 
```

并在导航页面中：

```
<p>You have entered the following username: #{bean.username}</p> 
```

但是，如果您执行的是重定向而不是导航，那么您基本上需要将信息存储在更广泛的范围内。您没有明确阐述问题中的具体功能要求，但如果我猜对了，您只是想记住当前登录的用户以完成剩余的 HTTP 会话。在这种情况下，只需在登录操作期间将其存储在[会话范围内。](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getSessionMap%28%29)

```
public String login() {
    // ...
    User user = userService.find(username, password);
    // ...
    externalContext.getSessionMap().put("user", user);
    // ...
    return "nextpage?faces-redirect=true";
} 
```

这样，它`#{user}`在整个 HTTP 会话中都可用。

```
<p>You're logged in as #{user.name}.</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:13:26.473

您也可以`<t:saveState>`在不使用会话范围的情况下使用。`<t:saveState>`比请求范围长但比会话范围短。

这可能对您有所帮助：http: [//myfaces.apache.org/tomahawk-project/tomahawk12/tagdoc/t_saveState.html](http://myfaces.apache.org/tomahawk-project/tomahawk12/tagdoc/t_saveState.html)

# java - 停止 JSF 事件链

> ID：13808405
> 
> 赞同：2
> 
> 时间：2012-12-10T20:09:52.080
> 
> 标签：java, events, richfaces, jsf-1.2

我正在修改一个用于平板电脑的 jsf-1.2 应用程序。

为此，我使表格的行可单击以打开行内容的详细视图，而不是让用户单击该表格中的链接（在桌面版中就是这种情况）。

到目前为止它工作正常。但是，每一行可以包含两个打开不同链接的丰富按钮。

该链接的内容在新选项卡中打开，就像它应该的那样。我的问题是，rowclick 的操作事件也在原始选项卡中被激活，这不是预期的行为。

如果单击该行中的一个按钮，我现在要做的是停止事件。

我已经知道，按钮的事件是在 rowclick 事件之前触发的。有没有办法在这一点上切断事件链？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:23:42.837

这是由于事件冒泡而发生的。尝试`Event.stop(event);`在您`commandButton`的如下使用。

```
<a4j:commandButton onclick="Event.stop(event);" action="#{myBean.myMethod())}" value="Show" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:39:00.607

我不知道你是否可以打破链条 - 但即使有可能（可能通过抛出异常） - 我建议不要这样做。

在事件驱动的环境中执行此操作的正确（可悲）方法是在按钮的处理程序触发时将某些`boolean`指示器设置为**true** ，并 在处理程序完成其工作时将其设置回**false 。**在`row-clicked`事件的处理程序中，您需要检查 是否`boolean`为**真**- 并且仅当它为**假**时- 继续处理该`row-clicked`事件。

布尔值的建议名称：`isRowButtownClicked`

**免责声明：**我的答案基于我对 C# 的了解——我在 Java 中的 GUI 开发方面没有任何经验，尤其是在 JSF 中。

# regex - 为什么这个正则表达式不只选择电子邮件地址？

> ID：13808406
> 
> 赞同：0
> 
> 时间：2012-12-10T20:09:52.523
> 
> 标签：regex

正则表达式示例：[http ://regexr.com?333h5](http://regexr.com?333h5)

正则表达式：

```
_email=(.+)[^\s"] 
```

样本内容：

```
http://example.com/index.php?package=icard&action=show_birthday_card&cid=3376&name=Gina&unsubscribe_email=myEmail1234@aol.com
[ Unsubscribe from iCard: http://example.com/index.php?package=icard&action=unsubscribe_card&unsubscribe_email=myEmail1234@aol.com ]

--1q2w3e4r5t6y7u8i9o0p1q
Content-Type: text/html;

<table align=""center"">
    <tr>
        <td>
            <div style=""background:#fff; border:10px solid #2d50d6; padding:10px; width:600px;"">
                <h4 style=""background:#2d50d6; color:#fff; border:18px solid #2d50d6; margin-bottom:10px; font-family:Arial, Helvetica, sans-serif; font-size:14px; text-align:center;"">Happy Birthday Gina!</h4>
                <a href=""http://example.com/index.php?package=icard&action=show_birthday_card&cid=3376&name=Gina&unsubscribe_email=myEmail1234@aol.com""><img src=""http://example.com/images/brands/chiro/cards/img_46a6924710bcc_birthdayparty.gif"" alt="""" title=""Happy+Birthday+Gina%21"" width=""600"" style=""border:0; margin-bottom:10px; width:600px; height:150px;"" /></a>
                <p style=""color:#000; font-family:Arial, Helvetica, sans-serif; font-size:12px;"">We hope all your birthday dreams and wishes come true!</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:14:07.837

```
_email=(.+)[^\s"] 
```

表示 "_email=" 后跟 1 个任意类型的字符，后跟一个既不是空格也不是引号的字符。

我认为您正在寻找的是：

```
_email=[^\s"]+ 
```

即 "_email=" 后跟 1 个既不是空格也不是引号的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:17:19.850

这不仅仅是选择电子邮件地址，因为它`+`是一个贪婪的运算符，并且会尝试匹配尽可能多的字符。

电子邮件地址匹配是一个相当常见的正则表达式问题，因此有很多解决方案，其中一个包含在关于[如何使用正则表达式](http://www.regular-expressions.info/)的精彩教程中。我建议使用这些经过良好测试的模式之一......

`_email=(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b)`

# telerik - 在 RowFormatting 事件中设置 Telerik RadGridView (WinForms) 中的 RowElement.BackColor

> ID：13808407
> 
> 赞同：0
> 
> 时间：2012-12-10T20:09:54.843
> 
> 标签：telerik, radgridview, backcolor

在运行时在 RowFormatting 事件中设置 Telerik WinForms RadGridView 中行的背景颜色是否有一些技巧？我可以在此事件中设置 RowElement.Font，但不能设置 RowElement.BackColor。我已经在调试器中逐步完成了代码，并且确定该行正在执行（事件已正确“连接”）。

```
void grid_RowFormatting(object sender, Telerik.WinControls.UI.RowFormattingEventArgs e)
    {
         if   (e.RowElement.RowInfo.Cells["CODE"].Value.ToString() == "X"))
                {
                    // the following line is executed but has no apparent effect
                    e.RowElement.BackColor = System.Drawing.Color.Aqua;
                }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:28:40.580

你的代码看起来不错，你只需要设置`DrawFill`添加`true` 这个：

```
e.RowElement.DrawFill = true; 
```

完整示例：

```
void grid_RowFormatting(object sender, Telerik.WinControls.UI.RowFormattingEventArgs e)
    {
         if   (e.RowElement.RowInfo.Cells["CODE"].Value.ToString() == "X"))
                {   
                     e.RowElement.DrawFill = true;  
                     e.RowElement.BackColor = System.Drawing.Color.Aqua;
                }

     } 
```

# javascript - 我想在对象中使用匿名函数

> ID：13808409
> 
> 赞同：1
> 
> 时间：2012-12-10T20:10:09.050
> 
> 标签：javascript, oop, function, settimeout, infinite-loop

我有这个代码用于我想使用的新闻源。

我希望它看起来像这样：

```
function News(){

    //Load new comments every 5 sec
    setTimeout((function(){
        console.log(this); //Returns Object #News
        this.loadNewsFeed();
    }).call(this),5000);

    this.loadNewsFeed = function(){
        // Implementation here
    }
} 
```

这里的问题是它说 Object News 没有一个名为`loadNewsFeed`!

**如果我将匿名函数放在**对象新闻之外，我已经让它工作了。

像这样：

```
var news = new News();
//Load new comments every 5 sec
(function loopNews(){
    news.loadNewsFeed();
    setTimeout(loopNews,5000);
})(); 
```

那么我怎么能在对象**内部**`News`做到这一点呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:13:35.973

这应该有效：

```
function News()
{
    var self = this;

    this.loadNewsFeed = function(){
        // Implementation here
    };

    //Load new comments every 5 sec
    setInterval(function handler() // setInterval for endless calls
    {
        console.log(self); //Returns Object #News
        self.loadNewsFeed();
        return handler;
    }(), 5000);
} 
```

解释：**直接**
`call(this)`调用处理程序- 并返回这意味着它立即执行但**没有设置处理程序**。 处理程序函数在全局上下文中执行， -object也是如此。局部变量**“注入”**当前（和所需）- as 。**`undefined``setInterval` **`this``window``self` **`this``self`******

 ******编辑 2：现在**立即**
执行***并*****注册**一个处理程序。******

# sql - 如何根据一张表中的两个机场代码选择两个机场名称？

> ID：13808412
> 
> 赞同：-3
> 
> 时间：2012-12-10T20:10:25.077
> 
> 标签：sql, postgresql

我有这个架构：

```
CREATE TABLE Airport (
  airportIATA CHAR(3) NOT NULL,
  name VARCHAR(45) NOT NULL, 
  PRIMARY KEY (airportIATA) 
  );

CREATE TABLE Flight (
  flightNumber VARCHAR(6) NOT NULL,
  timeOfDeparture TIME NOT NULL,
  departureAirport_IATA CHAR(3) NOT NULL REFERENCES Airport(airportIATA),
  stopOverAirport_IATA CHAR(3) REFERENCES Airport(airportIATA),
  arrivalAirport_IATA CHAR(3) NOT NULL REFERENCES Airport(airportIATA),
  PRIMARY KEY (flightNumber, departureAirport_IATA, arrivalAirport_IATA)
  ); 
```

有这些记录：

```
INSERT INTO Airport VALUES ('HEL','Helsinki/Vantaa Airport');
INSERT INTO Airport VALUES ('STO','Stockholm Airport');
INSERT INTO Airport VALUES ('TAL', 'Lennart Meri Tallinn Airport');

INSERT INTO Flight VALUES ('AY101', '13:30', 'HEL', NULL, 'STO');
INSERT INTO Flight VALUES ('AA202', '16:15', 'STO', 'TAL', 'HEL'); 
```

到目前为止，我有这些查询：

```
SELECT flightNumber, timeOfDeparture, departureAirport_IATA, arrivalAirport_IATA
FROM Flight
WHERE stopOverAirport_IATA IS NULL;

SELECT flightNumber, timeOfDeparture, name AS 'Arrival Airport'
FROM Flight, Airport
WHERE Flight.stopOverAirport_IATA IS NULL AND Flight.arrivalAirport_IATA = Airport.airportIATA; 
```

我的问题是，如何更改后一个查询，使其包含到达和离开机场的名称（正如我们在第一个查询中获得的 IATA 代码）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:16:46.773

尝试这样的事情：

```
SELECT
  flightNumber, 
  timeOfDeparture, 
  DA.name AS 'Departure Airport',
  AA.name AS 'Arrival Airport'
FROM
  Flight As F
  INNER JOIN Airport As DA
  ON F.departureAirport_IATA = DA.airportIATA
  INNER JOIN Airport As AA
  ON F.arrivalAirport_IATA = AA.airportIATA
WHERE 
  F.stopOverAirport_IATA IS NULL
; 
```

# java - 使用 Java 运行.reg 文件

> ID：13808413
> 
> 赞同：1
> 
> 时间：2012-12-10T20:10:42.877
> 
> 标签：java, applet

我正在尝试使用 Java 运行 reg 文件。我试过这个没有运气：

```
import java.awt.Desktop;
import java.io.File;
import java.io.IOException;

public class RegEdit {

    public static void main(String[] args) throws IOException {

//      Desktop.getDesktop().open(new File("ihindi.reg"));

        String[] cmd = {"regedit", "ihindi.reg"};
        Process p = Runtime.getRuntime().exec(cmd);
        try {
            p.waitFor();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

印地文.reg

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Policies\Microsoft\Internet Explorer\Control Panel]
"HomePage"=dword:00000001 
```

当我运行它时，它不会产生任何错误。我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-29T18:24:55.467

我认为您需要在两者之间添加“/ s”语句，当您将数据写入注册表时，您的过程可能会受到干扰。我和你的情况完全相同，没有错误，但它无法写入注册表。“/s”完成了这项工作。

```
try{
 // silence all the process without prompting the dialog box to ask if user wanna proceed.
     String[] cmd = { "regedit.exe", "/s", regFilePath};
     Process process = Runtime.getRuntime().exec(cmd);
     process.waitFor();
}catch (InterruptedException e){
     System.out.println(e);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:31:17.000

这有各种各样的问题。以下行：

```
String[] cmd = {"regedit", "ihindi.reg"}; 
```

应该传递`ihindi.reg`文件的完整路径，而不仅仅是文件名。

还，

一个对话框可能会阻止该`waitFor()`调用返回。

您应该使用开关调用 regedit 以`/s`使这些对话框静音。

此外，您可能会考虑像这样使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html "流程构建器")：

```
import java.awt.Desktop;
import java.io.File;
import java.io.IOException;

public class RegEdit {

    public static void main(String[] args) throws IOException {

//      Desktop.getDesktop().open(new File("ihindi.reg"));

        //you will need to figure this out
        String ihindiPath = getIhindiPath();

        ProcessBuilder processBuilder = new ProcessBuilder("regedit", "/s", ihindiPath) 

        try {
            processBuilder.start().waitFor();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:33:36.407

我认为问题在于您的路径，您当前的代码 *.reg 必须与 jar 文件位于同一目录中。但是，您可以在使用时明确设置工作目录`ProcessBuilder`：

```
 ProcessBuilder pb = new ProcessBuilder("regedit", "myreg.reg");
 pb.directory("c:/");//thus our file should be located in c:\myreg.reg
 Process p = pb.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T19:28:44.237

这可以通过 JAVA 中的 Process Builder 来实现。请考虑以下示例：

```
ProcessBuilder processBuilder = new ProcessBuilder("regedit", "reg_file_to_run.reg");
Process processToExecute = processBuilder.start(); 
```

然后您可以选择使用以下行等待流程执行完成：

```
processToExecute.waitFor(); 
```

注意：如果您的注册表文件中的命令在更改注册表项时要求确认提示，您也可以使用*“/s”*选项静默执行它。像这样：

```
ProcessBuilder processBuilder = new ProcessBuilder("regedit", "/s", "reg_file_to_run.reg"); 
```

使用此命令将在没有任何确认提示的情况下静默执行。

# ajax - IE 中的 iframe 和混合内容

> ID：13808415
> 
> 赞同：0
> 
> 时间：2012-12-10T20:10:48.467
> 
> 标签：ajax, salesforce, apex-code, visualforce

我的目标是将这个网页“brokercheck.finra.org/Search/Search.aspx”嵌入到visualforce页面中。我正在使用一个`<apex:iframe/>`来做到这一点。我也尝试过 html iframe。

在 IE8 中，我收到一条消息说“你想查看安全传递的网页吗”http 内容只有在用户单击否时才有效。（这不是一个好习惯）。

在页面底部，我收到一条警告，上面写着：

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; MS-RTC LM 8)
Message: Permission denied
Line: 6
Char: 152
Code: 0
URI: http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js 
```

我能做些什么来绕过弹出窗口吗？

我已经尝试了一些东西，但没有任何结果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:58:10.023

您正在将 visualforce / 常规 salesforce 页面的加密 (https) 内容与未加密的 http 混合。可悲的是，这个网站似乎没有安全版本。

恐怕你无能为力，这个“混合内容”警告只是 IE 的一个特性。事实上，我认为如果网站能以某种方式抑制它，那将毫无意义；）你可以在[MSDN](http://msdn.microsoft.com/en-us/library/ee264315%28v=vs.85%29.aspx)上阅读它，最简单的方法是要求用户[修改他们的安全设置](http://blogs.msdn.com/b/askie/archive/2009/05/14/mixed-content-and-internet-explorer-8-0.aspx)。

您可以尝试使用 Javascript，也许使用一些 AJAX 调用从 finfra 加载内容......但这很可能被 IE 视为跨域 JavaScript 并且也被阻止。您可以简单地将这个页面显示为链接/弹出窗口吗？或者只是在服务器端对其进行 REST GET 调用并显示内容？

# linux - 定位 typesizes.h

> ID：13808416
> 
> 赞同：2
> 
> 时间：2012-12-10T20:10:49.650
> 
> 标签：linux, gcc

typesizes.h 位于哪里？我已经安装了最新的 gcc 版本，我需要将 __FD_SETSIZE 设置为高于 1024 的值。

我尝试在 /usr/lib/bits/ 中查找它应该在的位置。我正在尝试编译 UnrealIRCd，如果不更改 __FD_SETSIZE 就无法继续。

有谁知道我为什么缺少 typesize.h？

感谢您收到的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:16:25.663

你试过了吗

```
locate typesizes.h 
```

它应该为您提供文件所在的路径

# python - Python遍历列表并计算某个值的项目

> ID：13808428
> 
> 赞同：2
> 
> 时间：2012-12-10T20:11:43.037
> 
> 标签：python

嗨，我有一个 python 问题，我必须在具有不同嵌套级别的列表中计算哪些列表元素包含值 2。例如：

```
my_list = [[2,3,2,2], [[2,1,2,1], [2,1,1]], [1,1,1]] 
```

这个列表最多可以有三层嵌套，但也可以是两层或只有一层。

我有一段代码可以工作：

```
count = 0
for i in my_list:
    if len(i) > 1:
        for x in i:
            if 2 in x:
                count += 1
    elif i == 2:
        count += 1 
```

然而，除了非常丑陋之外，这并没有考虑到有一个包含单个元素 2 的列表的可能性。获得`len()`单个`int`.

我知道列表理解应该能够解决这个问题，但我对如何处理潜在的嵌套有点坚持。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T20:17:16.747

我会使用`flatten()`来自[https://stackoverflow.com/a/2158532/367273的生成器的变体](https://stackoverflow.com/a/2158532/367273)

原始版本从任意嵌套和不规则形状的迭代结构中产生每个元素。我的变体（如下）产生最内层的迭代而不是产生标量。

```
from collections import Iterable

def flatten(l):
    for el in l:
        if isinstance(el, Iterable) and any(isinstance(subel, Iterable) for subel in el):
            for sub in flatten(el):
                yield sub
        else:
            yield el

my_list = [[2,3,2,2], [[2,1,2,1], [2,1,1]], [1,1,1]]
print(sum(1 for el in flatten(my_list) if 2 in el)) 
```

对于您的示例，它会打印`3`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:29:24.230

## 更新和最终答案：

我的解决方案递归了一个嵌套的列表列表。如果列表包含`2`，则计数设置为 1。然后添加任何子列表的计数总和。这种方法支持异构列表，其中数字和列表可以在同一级别混合，如下面的第二个使用示例所示：

```
import collections

def list_count(l):
    count = int(2 in l)
    for el in l:
        if isinstance(el, collections.Iterable):
            count += list_count(el)
    return count 
```

这里有几个测试用例：

```
my_list = [[2,3,2,2], [[2,1,2,1], [2,1,1]], [1,1,1]]
print = list_count(my_list)
# 3 is printed

my_list = [2, [2,3,2,2], [[2,1,2,1], [2,1,1]], [1,1,1]]
print = list_count(my_list)
# 4 is printed 
```

@Akavall 的回答提醒我这可以折叠成单行。（但是当我这样做时，我总是会收到（通常是合理的）关于 SO 的可读性投诉。）

```
def list_count(l):
    return ( int(2 in l) +
        sum([list_count(el) for el in l 
            if isinstance(el, collections.Iterable)]) ) 
```

## 原始答案（不是原始问题要寻找的）

更新：@NPE 在指定预期结果后更新了他的答案。他目前的答案符合原始海报的要求。

@NPE 的（原始）答案很接近，但您问：

> 计算哪些列表元素包含值 2

我根据您的需要阅读：

```
my_list = [[2,3,2,2], [[2,1,2,1], [2,1,1]], [1,1,1]]
print(sum([1 for e in [flatten(sl) for sl in ml] if 2 in e])) 
```

但他正在寻找`3`。我的代码生成 2，因为它遍历每个顶级元素并计算它是否包含任何 2，但这不是他真正想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:25:26.713

这是另一种方法：

```
small_list = [2]
my_list = [[2,3,2,2], [[2,1,2,1], [2,1,1]], [1,1,1]]
another_list = [[2,3,2,2], [[2,1,2,1], [2,1,1]], [1,1,1], 2]

from collections import Iterable 

def count_lists_w_two(x):
    if isinstance(x, Iterable) == False:
        return 0
    else:
        return (2 in x) + sum(count_lists_w_two(ele) for ele in x) 
```

结果：

```
>>> count_lists_w_two(small_list)
1
>>> count_lists_w_two(my_list)
3
>>> count_lists_w_two(another_list)
4 
```

# ubuntu - 使用用户指定的脚本重新启动现有的 Amazon EC2 实例？

> ID：13808429
> 
> 赞同：7
> 
> 时间：2012-12-10T20:11:54.923
> 
> 标签：ubuntu, amazon-ec2, amazon

虽然我找到了大量关于如何使用用户数据脚本 ( [ala Eric Hammond](https://stackoverflow.com/questions/10125311/how-to-fire-ec2-instances-and-upload-run-a-startup-script-on-each-of-them!) ) 创建 Amazon EC2 AMI 的新实例的文档，但我还没有看到一种方法来启动一个已经存在但目前已停止的 Amazon重启时带有用户指定脚本的 EC2 实例。

我有许多用于测试和灾难恢复的 Amazon EC2 Ubuntu 实例。我希望能够启动一个并让它，例如，根据需要自动获取和恢复与我们的登台或生产环境相对应的备份。我宁愿不必维护两个独立的实例，每个实例都有自己的弹性 IP。

有没有什么方法可以通过 Amazon ec2tools 的命令行执行此操作，类似于使用 ec2-run-instances 命令的方式？基本上，我希望能够传递一个以 root 身份运行的脚本，就好像它是从 rc.local 或类似文件中调用的一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:54:06.170

1.  您可以在 API 工具的帮助下做到这一点。检查[ec2-modify-instance-attribute](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-ModifyInstanceAttribute.html)命令的`--user-data`属性。

2.  此外，AWS 控制台允许您在停止的实例上执行相同的操作： ![在此处输入图像描述](../Images/6dcd85dffd33055423ecd44ba81bd058.png)

3.  或者，您始终可以通过 ssh 作为最后一个参数运行命令或脚本：

    `ssh [user@]hostname [command]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-04T13:00:00.497

您可以考虑使用[AWS 命令​​行界面停止/重新启动 Amazon EC2 实例的功能，如此](http://aws.amazon.com/cli/)*[处](https://www.built.io/blog/2015/04/stopstart-functionality-for-non-production-aws-instances-using-aws-command-line-interface/)*所述。

没有弹性负载均衡器

```
aws ec2 stop-instances --instance-ids i-1a2b3c4d
aws ec2 start-instances --instance-ids i-1a2b3c4d 
```

使用 Elastic Load Balancer 而不使用 Autoscaling

```
aws elb deregister-instances-from-load-balancer --load-balancer-name elb-name --instances i-12ab34cd
aws elb register-instances-from-load-balancer --load-balancer-name elb-name --instances i-12ab34cd 
```

具有自动缩放功能的弹性负载均衡器

```
aws autoscaling update-auto-scaling-group --auto-scaling-group-name "asg-name"  --launch-configuration-name "launch-config-name" --min-size 0 --max-size 0
aws autoscaling update-auto-scaling-group --auto-scaling-group-name "asg-name"  --launch-configuration-name "launch-config-name" --min-size 1 --max-size 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:44:12.367

您是否查看过云形成模板？[http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/Welcome.html](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/Welcome.html)

我想用这个在实例重启时运行你的脚本会很简单。我这样做是为了在 AWS 上设置 sharepoint 服务器场并调查 CF 脚本。[http://aws.amazon.com/articles/9982940049271604](http://aws.amazon.com/articles/9982940049271604)

我没有测试过这个特定的场景，但我相信这应该提供所需的支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T17:17:27.297

可悲的是，答案似乎是目前不可能按照我的要求去做。

# delphi - clx/vcl 不兼容

> ID：13808430
> 
> 赞同：4
> 
> 时间：2012-12-10T20:12:02.383
> 
> 标签：delphi, components, vcl

我继承了一个使用 clx 组件（TcxMaskEdit、TcxCurrencyEdit）在 Delphi 中构建的应用程序。我无法打开此应用程序，因为我的 Delphi 副本中缺少 clx 组件。如果我忽略警告消息，应用程序会打开，而窗体上没有这些组件，Win32 库就会消失。我无法获得这些组件，因为它们不再由原始开发人员携带。所以，这给我留下了两个选择：要么找到获取 clx 组件的方法，要么将它们转换为 vcl。该应用程序已经投入了如此多的工时，并且对业务至关重要，以至于无法轻松地重写或替换它。所以，我的问题是：如何将 clx 组件转换为 vcl 或以其他方式获取这些已弃用的组件？或者这里有什么我想念的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T20:28:51.980

`TcxMaskEdit`并且`TCxCurrencyEdit`不是 CLX 控件。它们是较旧的[Developer Express](http://www.devexpress.com)组件的一部分（不确定它们是否仍然存在）。为了打开您的项目，您需要获取应用程序使用的任何版本的副本。您需要询问老开发人员那是什么，或者联系 DevEx 支持，看看他们是否可以帮助您。

（CLX 组件与 VCL 对应的组件具有相同的名称。唯一的区别是源代码的 uses 子句中的单元名称；VCL`Dialogs`单元被替换为`QDialogs`、`Forms`变为`QForms`等等。从 CLX 切换到 VCL 就像搜索任何以 开头`Q`的单元，如果有相应的 VCL 单元，则删除该单个字母，然后重新构建您的应用程序。）

# android - Android Action Bar SHerlock 我在 setContentView 上遇到错误

> ID：13808433
> 
> 赞同：0
> 
> 时间：2012-12-10T20:12:19.240
> 
> 标签：android, android-actionbar, actionbarsherlock

我的项目在 android 4 及更高版本上运行良好，但我想让 id 在旧版本上工作，所以我转向操作栏 sherlock。我实现了库，更改了主题，扩展了 SherlockActivity，但是当我尝试在 2.3 上运行它时，出现以下错误。

```
12-10 20:08:33.403: E/AndroidRuntime(753): FATAL EXCEPTION: main
12-10 20:08:33.403: E/AndroidRuntime(753): java.lang.NoClassDefFoundError: com.actionbarsherlock.R$styleable
12-10 20:08:33.403: E/AndroidRuntime(753):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:982)
12-10 20:08:33.403: E/AndroidRuntime(753):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:899)
12-10 20:08:33.403: E/AndroidRuntime(753):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:833)
12-10 20:08:33.403: E/AndroidRuntime(753):  at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:212)
12-10 20:08:33.403: E/AndroidRuntime(753):  at org.tracker.pms2.Home.onCreate(Home.java:42)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.os.Looper.loop(Looper.java:123)
12-10 20:08:33.403: E/AndroidRuntime(753):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-10 20:08:33.403: E/AndroidRuntime(753):  at java.lang.reflect.Method.invokeNative(Native Method)
12-10 20:08:33.403: E/AndroidRuntime(753):  at java.lang.reflect.Method.invoke(Method.java:507)
12-10 20:08:33.403: E/AndroidRuntime(753):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-10 20:08:33.403: E/AndroidRuntime(753):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-10 20:08:33.403: E/AndroidRuntime(753):  at dalvik.system.NativeStart.main(Native Method) 
```

当我双击到第 7 行时，它会将我重定向到此

```
 setContentView(R.layout.home); 
```

任何人有任何线索是什么问题？：/

这是清单：

```
 <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />
    <supports-screens android:resizeable="true"
                  android:smallScreens="true" 
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:xlargeScreens="true"
                  android:anyDensity="true" >
                  </supports-screens>

    <application
        android:icon="@drawable/pecal_launcher"
        android:label="@string/app_name"
        android:theme="@style/MyTheme" >
        <activity
            android:name=".Home"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

这是我的价值观\风格：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="MyTheme" parent="Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/MyActionBar</item>
    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="MyActionBar" parent="Widget.Sherlock.Light.ActionBar">
    <item name="android:background">@drawable/background_menu</item>
    <item name="background">@drawable/background_menu</item>
    <item name="android:titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item>
    <item name="titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item>
</style>

<style name="MyTheme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">#ffffff</item>
  </style>

</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:19:15.527

它说`com.actionbarsherlock.R$styleable`，所以你在 Manifest 中的类名可能拼写错误或没有声明，但你试图在代码中的某个地方使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:04:44.530

好吧，我不知道发生了什么，我创建了一个新应用程序，我导入了 Action Bar Sherlock 库，我开始复制粘贴 xmls 和活动，到目前为止它工作正常，如果我遇到问题我会写再次但创建一个新应用程序并首先导入库似乎可以解决问题

# c++ - 每像素照明黑点/奇怪的伪影

> ID：13808436
> 
> 赞同：1
> 
> 时间：2012-12-10T20:12:31.093
> 
> 标签：c++, opengl, glsl

好吧，几天来我一直在努力实现逐像素照明，这基本上是我通常最终得到的“结果”。 ![着色器异常](../Images/30ce9cf7dde51e744d50c425cac3f8a6.png)

我的网格中都有这些硬黑点，还有那些不平衡的黑点。蓝色阴影“有点”工作正常，除了它在整个网格中应用自身并且它似乎随机应用自身，如图所示。当我将灯光绑定到我的相机时，灯光确实“穿过”网格，尽管大部分时间都很奇怪。我不知道为什么会这样；据我所知，我的网格数据的法线很好（在 MilkShape、3DS、Lightwave、Blender、Maya 等中没有颜色/平滑问题）。

这是我的设置/灯光代码：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();
float lpos[4] = {get_cam_pos().x,get_cam_pos().y,get_cam_pos().z,1};
float lamb[4] = {0,0,1,1};
float ldiff[4] = {1,1,0,1};
float lspec[4] = {1,1,0.5,1};
GLfloat lin[4] = {5.0f,5.0f,5.0f,1};
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glLightfv(GL_LIGHT0, GL_POSITION, lpos);
glLightfv(GL_LIGHT0, GL_AMBIENT, lamb);
glLightfv(GL_LIGHT0, GL_DIFFUSE, ldiff);
glLightfv(GL_LIGHT0, GL_SPECULAR, lspec);
    <from here camera matrix is then loaded and scene is rendered> 
```

这是我的垂直着色器，来自 Lighthouse3D per-pixel-light 教程：

```
varying vec4 diffuse,ambientGlobal,ambient, ecPos;
varying vec3 normal,halfVector;
varying float dist;

void main()
{   
    gl_TexCoord[0] = gl_TextureMatrix[0] * gl_MultiTexCoord0;

    /* first transform the normal into eye space and normalize the result */
    normal = normalize(gl_NormalMatrix * gl_Normal);

    /* compute the vertex position  in camera space. */
    ecPos = gl_ModelViewMatrix * gl_Vertex;

    /* Normalize the halfVector to pass it to the fragment shader */
    halfVector = gl_LightSource[0].halfVector.xyz;

    /* Compute the diffuse, ambient and globalAmbient terms */
    diffuse = gl_FrontMaterial.diffuse * gl_LightSource[0].diffuse;
    ambient = gl_FrontMaterial.ambient * gl_LightSource[0].ambient;
    ambientGlobal = gl_LightModel.ambient * gl_FrontMaterial.ambient;

    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;  
} 
```

...和片段着色器，同样来自 Lighthouse3D 教程：

```
uniform sampler2D color_texture;
varying vec4 diffuse,ambientGlobal, ambient, ecPos;
varying vec3 normal,halfVector;
varying float dist;

void main()
{
    vec4 tex0Color = vec4(texture2D(color_texture,gl_TexCoord[0].st));
    vec3 n,halfV,viewV,lightDir;
    float NdotL,NdotHV;
    vec4 color = ambientGlobal;
    float att;

    /* a fragment shader can't write a verying variable, hence we need
    a new variable to store the normalized interpolated normal */
    n = normalize(normal);

    // Compute the ligt direction
    lightDir = vec3(gl_LightSource[0].position-ecPos);

    /* compute the distance to the light source to a varying variable*/
    dist = length(lightDir);

    /* compute the dot product between normal and ldir */
    NdotL = max(dot(n,normalize(lightDir)),0.0);

    if (NdotL > 0.0) {

        att = 1.0 / (gl_LightSource[0].constantAttenuation +
            gl_LightSource[0].linearAttenuation * dist +
            gl_LightSource[0].quadraticAttenuation * dist * dist);
                               color += att * (diffuse * NdotL + ambient);

        halfV = normalize(halfVector);
        NdotHV = max(dot(n,halfV),0.0);
        color += att * gl_FrontMaterial.specular * gl_LightSource[0].specular 
                               * pow(NdotHV,gl_FrontMaterial.shininess);
     }

     gl_FragColor = tex0Color*color;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:53:46.770

你的法线对我来说看起来不对...

;-)

# java - 如何打印出 hashmap 存储

> ID：13808437
> 
> 赞同：-2
> 
> 时间：2012-12-10T20:12:31.543
> 
> 标签：java, hashmap

```
import java.util.Scanner;

public class MainApp 
{
    private Scanner keyboard = new Scanner(System.in);
    public static void main(String[] args)
    {
        new MainApp().start();  
    }

    public void start()
    {
        Airline airline1 = new Airline("AerLingus");
        PlaneStore planeStore = new PlaneStore("Aer Lingus");

        Flight p1 = new Flight("Aer Lingus","A01", 150.5, 10.5, 500, Flight.AIRPLANETYPE.AIRBUS);
        Flight p2 = new Flight("Aer Lingus","B01", 50.3, 1.5, 91, Flight.AIRPLANETYPE.CORPORATE);
        Flight p3 = new Flight("Aer Lingus","C01", 12.2, -3.1, 56, Flight.AIRPLANETYPE.AIRBUS);

        Flight p4 = new Flight("Ryan Air","D01", 10.5, 1.5, 430, Flight.AIRPLANETYPE.PRIVATE);
        Flight p5 = new Flight("Ryan Air","E01", 0.3, 2.1, 101, Flight.AIRPLANETYPE.CORPORATE);
        Flight p6 = new Flight("Ryan Air","F01", 2.2, -3, 291, Flight.AIRPLANETYPE.AIRBUS);
        planeStore.add(p1);
        planeStore.add(p2);
        planeStore.add(p3);
        planeStore.print();

        airline1.add(planeStore);
        airline1.add(planeStore);
        airline1.add(planeStore);

        airline1.printPlane();
    }

}

import java.util.HashMap;

public class Airline 
{
    private String airlineName;
    private HashMap<String, PlaneStore> map;

    public Airline(String airlineName)
    {
        this.airlineName = "";
        map = new HashMap<String, PlaneStore>();
    }
    public void add(PlaneStore plane)
    {
        map.put(airlineName, plane);
    }
    public void remove(String flight)
    {
        map.remove(flight);
    }
    public void printPlane()
    {
        System.out.println("\n********Flight List********");
        for (PlaneStore plane: map.values()) {
             //System.out.println(plane);
            // class
            // or:
            System.out.println(airlineName);
            System.out.println(plane.toString());

        }

    }

} 
```

嘿，我想打印出飞机商店。平面存储包含字符串和航班的哈希图。这就是 flight.add/print 进入主应用程序的地方。但我现在希望航空公司和航班并行打印，所以我放了一个航空公司商店，我试图把飞机商店和航空公司一起打印出来，但我得到的只是一个内存地址，任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:23:11.680

如果你得到类似的东西`MyClass@abcdef`，那么你需要`toString`像`MyClass`这样覆盖：

```
public class MyClass {

    ...

    @Override
    public String toString() {
        return "My class"; // Make a string here that you want to display
    }
} 
```

因此，例如，如果`PlaneStore`has`int planeCount`和`String name`for 字段，那么您可以执行以下操作：

```
@Override
public String toString() {
    return "Plane store | Name: " + name + ", planes: " + planeCount;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:29:03.640

因为您似乎是编程新手，所以我将交给您他的答案：

```
public class PlaneStore {

    private String name;
    ...

    public String toString() {
        return name;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:20:54.073

尝试使用 Apache ToStringBuilder 类。但当然 toString() 也会有所帮助。[关于ToStringBuilder](http://commons.apache.org/lang/api-3.1/index.html)的更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T20:16:28.963

你可以这样做：

```
System.out.println(map.toString()); 
```

这与

```
System.out.println(map); 
```

然后，为了避免您提到的“内存地址”：
向 PlainStore 添加一个方法

```
public String toString() {
    return this.storeName; // or similar, 
} 
```

这是因为 Map 可以通过调用`toString()`每个键和值的方法打印出它的内容。

如果此输出不够好，您必须自己进行迭代：使用`map.entrySet()`并对其进行迭代。

# c# - 如何检查前一帧是否错过了主要的 Draw 调用？

> ID：13808438
> 
> 赞同：-1
> 
> 时间：2012-12-10T20:12:31.527
> 
> 标签：c#, xna

我希望能够查看`Draw`最后一帧是否没有进行主调用。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:17:55.390

也许你可以有几个变量：

```
int lastupdate
int lastdraw 
```

在你的更新循环之后

```
lastupdate++; 
```

在你的绘制循环之后

```
lastdraw = lastupdate. 
```

这样，您可以使用 和 之间的差异`lastdraw`来`lastupdate`确定自上次绘制调用以来发生了多少更新调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:53:38.797

我不确定你想在这里实现什么。但是 GameTime 中有一个属性可能会有所帮助。

它被称为 GameTime.IsRunningSlowly：

> 获取一个值，该值指示游戏循环所用时间超过其 TargetElapsedTime。在这种情况下，游戏循环可以被认为运行得太慢，应该做一些事情来“赶上”。

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gametime.isrunningslowly(v=xnagamestudio.30).aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gametime.isrunningslowly(v=xnagamestudio.30).aspx)

# drupal-7 - 添加 ubercart 订单项并更新订单总额

> ID：13808447
> 
> 赞同：4
> 
> 时间：2012-12-10T20:12:58.180
> 
> 标签：drupal-7, ubercart

我不知道为什么这么复杂，但我想做的就是当用户在 Ubercart 中更改付款方式时在我的订单中添加一个行项目。我设法通过在我的付款方式中添加以下行来做到这一点。

uc_order_line_item_add($order->order_id, '上门付款','上门付款',5);

这似乎添加了订单项，但订单总额没有更新。当我刷新页面时，我可以看到那里正在添加行项目。显然，我不想刷新屏幕，我希望在我的付款方式回调期间显示新订单总额和行项目。我想这是通过调用 jquery 来实现的，但我在 Google 中找不到任何有用的东西。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:14:43.643

希望这个答案对您来说还不算太晚，但是您是否尝试过以下方法：

```
$order->line_items[] = uc_order_line_item_add($order->order_id, 'Pay at door','Pay at door',5); 
```

问题是 uc_order_line_item_add 只是更新数据库而不是当前传递的订单对象，后来用于计算总计等，幸运的是 uc_order_line_item_add 返回一个可以简单地附加到订单对象的行项目数组。我不确定它是否可以在您的付款方式中使用，但它在 hook_uc_order 中对我有用，在那里我遇到了类似的税收问题，直到第二次刷新才更新。

如果它有助于我的完整示例代码如下：

```
<?php

function my_module_uc_order($op, &$order, $arg2) {
  switch ($op) {
    case 'presave':
      // using presave as taxes are calculated during save
      $line_item_id = FALSE;
      if (!is_array($order->line_items)) {
        $order->line_items = array();
      }
      else {
        foreach ($order->line_items as $index => $line_item) {
          if ($line_item['type'] == 'my_line_item') {
            $line_item_id = $line_item['line_item_id'];
            break;
          }
        }
      }

      if ($line_item_id === FALSE) {
        // Add item.
        // Dummy amount for testing.
        $amount = 3;
        // uc_order_line_item_add returns a line_item array so we can just add it to the order object.
        $order->line_items[] = uc_order_line_item_add($order->order_id, 'my_line_item', 'My Item Title (added)', $amount);
        // uc_order_line_item_add($order_id, $type, $title, $amount, $weight = NULL, $data = NULL).
      }
      else {
        // Update item.
        // Dummy amount for testing.
        $amount = 4;
        // uc_order_update_line_item($id, $title, $amount, $data = NULL).
        uc_order_update_line_item($line_item_id, 'My Item Title (updated)', $amount);
        // Manually modify amount.
        $order->line_items[$index]['amount'] = $amount;
      }
      break;
  }
}

/**
* Implements hook_uc_line_item().
*/

function my_module_uc_line_item() {
 $items[] = array(
  'id' => 'my_line_item',
  'title' => t('Custom text'),
  'weight' => 0,
  'default' => FALSE,
  'stored' => TRUE,
  'add_list' => TRUE,
  'calculated' => TRUE,
 );
 return $items;
} 
```

# entity-framework - 实体框架 SaveChanges 正在保存未更改的记录（通过存储过程映射）

> ID：13808450
> 
> 赞同：1
> 
> 时间：2012-12-10T20:13:05.590
> 
> 标签：entity-framework

我在附加了 2 个实体的上下文中调用 saveChanges。实体“A”接收对其值的更新，“B”没有改变。

当我在 SaveChanges 之前暂停代码并检查“B”实体时，它显示“EntityState = Unchanged(2)”。

我让代码完成运行，最终得到映射到执行“B”实体更新的存储过程。

我预计这不会发生，为什么会这样？

谢谢戈德

EF 4.0.30319

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:53:59.770

[我怀疑这个问题与那个](https://stackoverflow.com/questions/2931628)问题重复。

重复那里给出的答案：

这是在以下情况下发生的问题：

*   在 .NET Framework 4.0 版上运行实体框架；
*   使用自定义映射 SQL 代码；

可以通过以下 3 种方式中的一种来解决此问题：

*   从 Microsoft 获取并部署[MS KB 2390624](http://support.microsoft.com/kb/2390624)中描述的修补程序- 该请求需要 Microsoft 的付费协助（例如，通过公司支持合同）；
*   升级到 .NET 4.5（如果您不再需要担心 Windows XP，这是一个选项）；
*   升级到 Entity Framework 6（目前处于测试阶段，但我希望它不会出现该错误）；

# iphone - 带有 3 个按钮的表格视图

> ID：13808453
> 
> 赞同：0
> 
> 时间：2012-12-10T20:13:15.863
> 
> 标签：iphone, xcode

我有一个带有我创建的单元格的表格视图的代码。每个单元格包含三个按钮。每个按钮都应该有一个图像作为背景图像。

这是我的 CellForRowArIndex 代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"CellView" owner:self options:nil];
        cell = nibLoadedCell;
    }

    for (int i = 1; i < 4; i++) {
        //----- select the correct button from the cell
        button = (UIButton *)[cell viewWithTag:(i)];

        //----- cleaning the button, drawing it's corners, borders and giving it an action
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        button.layer.borderWidth = 2;
        button.layer.cornerRadius = 5;
        button.clipsToBounds = YES;

        //------ Setting up the btnImg in order to place on the buttons (if is for checking i'm not taking pictures out of the array bounds)
        UIImage *btnImg = [[UIImage alloc] init];
        if (((indexPath.row * 3) + i - 1) < photosArray.count) {
            btnImg = [photosArray objectAtIndex:((indexPath.row * 3) + i - 1)];

            //NSLog(@"I am at indexpath.row: %d",indexPath.row);
            //NSLog(@"I show image number %d in the array",[photosArray indexOfObject:btnImg]);
            NSLog(@"Expression is: %d",((indexPath.row * 3) + i - 1));
        }

        //------ Add btnImg to the button
        [button setBackgroundImage:btnImg forState:UIControlStateNormal];

        //------ Giving special tags for each button in order to recognize it later
        button.tag = imageButtonTag;
        imageButtonTag--;
    }

    return cell;
} 
```

如您所见，我的代码中的 for 循环负责从我的“photosArray”中获取图像并将它们放置在单元格中的正确按钮中。

**问题：** 前约 23 个按钮获得正确的图像。之后，（需要向下滚动一点）开始图像 24，图像开始重复。图像 24 等于图像 0。图像 25 等于图像 1，依此类推……</p>

我已经检查了很多东西。一切看起来都很好！我什至检查了 photosArray indexOfObject 并且数字是正确的。

您可能会认为数组是这样制作的。我也是这么想的，但我向你保证没关系。我删除了我的 for 循环，而是输入了以下代码：

```
//----- select the correct button from the cell

button = (UIButton *)[cell viewWithTag:(1)];
 //----- cleaning the button, drawing it's corners, borders and giving it an action
[button setBackgroundImage:nil forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
button.layer.borderWidth = 2;
button.layer.cornerRadius = 5;
button.clipsToBounds = YES;

//------ Setting up the btnImg in order to place on the buttons
UIImage *btnImg = [photosArray objectAtIndex:indexPath.row];

//------ Add btnImg to the button
[button setBackgroundImage:btnImg forState:UIControlStateNormal]; 
```

这给了我一个 tableView，每个单元格中有一个按钮，按钮得到正确的图像......</p>

我尝试的最后一件事是，在创建 btnImg 之后，我之前的代码中的这段代码：

```
if ([btnImg isEqual:[photosArray objectAtIndex:0]]) {
    NSLog(@"Match found at: %d",[photosArray indexOfObject:btnImg]);
} 
```

但是没有任何匹配项（尽管当我运行它时，我看到图像是相同的）。

这个问题让我发疯了大约一个星期，如果有人可以帮助我解决它，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:49:31.870

重置视图标签会导致它无法被识别。识别每个控件的更好方法是通过子类化或其他策略，特别是因为您使用标签来获取控件

# php - 也许是 PHP eval 范围的事情？

> ID：13808459
> 
> 赞同：2
> 
> 时间：2012-12-10T20:13:36.147
> 
> 标签：php, eval

我对以下代码有疑问。我只是猜测这是一个范围问题。

```
public function run() {

    return eval('$this->config();');
    // This will return null.

    return $this->config();
    // This will return my config array right.

} 
```

在有人问之前：

1.  测试时，并非两个返回都是“活动的”。
2.  我知道 eval 是邪恶的，但我正在为管理员构建某种终端来运行 PHP 代码。

有人对这个终端有什么建议吗？（我的基本问题仍然是评估......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T20:16:27.477

[`eval`](http://php.net/eval)正在返回 NULL 因为这是它应该做的。直接从[文档页面](http://php.net/eval)：

> `eval()``return`除非在评估代码中调用，否则返回 NULL ，在这种情况下`return`返回传递给的值。

# matlab - 用户输入后单独绘制点

> ID：13808471
> 
> 赞同：0
> 
> 时间：2012-12-10T20:14:04.690
> 
> 标签：matlab, input, plot, random-walk

我正在尝试运行随机游走模拟并绘制图表。

我想要得到的是绘制图形的第一个点，然后为用户提供一个输入框来猜测下一个点是上升还是下降，然后向他们显示图形上的下一个点，依此类推。

我已经编写了运行随机游走的代码，但我不知道如何让它暂停并允许用户输入。

谁能给我任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:06:24.380

这是一些可以帮助您入门的代码

```
N = 100;
y = rand(1,N);
x = 1:N;

figure;
h = stairs(x(1),y(1));
xlim( [0 100] );
ylim( [0 1] )
hold on;
for ii = 2:N    
    set(h, 'xdata', x(1:ii), 'ydata', y(1:ii))
    pause(0.5) % Pause line to demonstrate to yourself that it works as desired
    % You can replace it with inputdlg() to collect a user response instead
end 
```

# vb.net - 使用 linq 将 2 个类组合成第三个集合

> ID：13808482
> 
> 赞同：0
> 
> 时间：2012-12-10T20:14:56.573
> 
> 标签：vb.net, linq

如果我有 2 个类并且想从每个类中获取 2 个属性，并将它们组合成一个单独的集合，那么如何使用 linq 来完成？

说这两个类是：

```
class guitars
    public ID
    public title
    public manufacturer
end class

class drums
    public ID
    public title
    public manufacturer
end class 
```

我试过这个，但没有奏效：

```
 Private Interface Instruments
       Property ID As String
       Property name As String
   End Interface

   Dim results = From item In guitars _
        Select New Instruments() With _
                         { _
                             .ID = item.ID, _
                             .name = item.Title _
                         }

   Dim results2 = From item In drums _
        Select New Instruments() With _
                          { _
                              .ID = item.ID, _
                              .name = item.Title _
                          }

Dim combined = results + results2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:17:34.183

你可以让它比这简单得多。

只需让两个类都实现`IInstrument`接口。
然后你可以写

```
guitars.Cast(Of IInstrument)().Concat(drums) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:17:59.287

Union 或 Concat 取决于您是否希望在列表中允许重复。

[http://msdn.microsoft.com/en-us/library/vstudio/bb763068.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb763068.aspx)

```
Dim Combined = results.Union(results2) ' no duplicates allowed
Dim Combined = results.Concat(results2) 'duplicates allowed 
```

编辑：应 MatthewWhited 的要求添加了 Concat。他是完全正确的。根据 MSDN，该列表是不同的。

# jquery - 无法使用必填字段验证器获取属性“长度”对象的值为 null 或未定义的 jquery

> ID：13808486
> 
> 赞同：0
> 
> 时间：2012-12-10T20:15:09.180
> 
> 标签：jquery, .net

我在.net中有以下代码

```
<asp:TextBox ID="txtdaStartDate" runat="server"
   ValidationGroup="DA" Columns="10"></asp:TextBox>
                &nbsp;<asp:RequiredFieldValidator ID="txtreqdaStartDate"
                   runat="server"  Enabled="false"
                    ControlToValidate="txtdaStartDate"
                    Text="Start Date is required" 
                    ValidationGroup="DA" 
                    ForeColor="Red"
                    Display="Dynamic"></asp:RequiredFieldValidator> 
```

当我在网页上选择日历控件时，它显示脚本错误。无法获取属性“长度”对象的值为 null 或未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-31T09:17:51.580

这是修复（添加一个空的 onSelect 处理程序）：

```
$("#DateTextBoxId").datepicker({ onSelect: function() {} }); 
```

# oop - 建议的设计模式——某种桥接器或适配器

> ID：13808490
> 
> 赞同：0
> 
> 时间：2012-12-10T20:15:18.440
> 
> 标签：oop, design-patterns

我需要对在以下场景中使用的正确设计模式类型有所了解：

现有框架将允许第 3 方开发人员创建模块以提供我的系统**所需的一小部分功能。**

该功能涉及我系统的一个子集，它本质上非常简单：它确保在我的系统中的特定模型上有两个属性可用，例如清酒“客户”，这两个属性是 getName 和 getEmailAddress。

现在，第 3 方 debelopers 可以提供他们自己的实现，这可能具有生成这些值的非常复杂的过程，但我的系统只关心这两个属性**必须**可用的事实。

我猜困难的部分是第 3 方模块代码如何将自己附加到客户模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:24:34.800

创建一个`CustomerInfo`包含两个客户属性的类和一个`CustomerInfoProvider`包含此唯一方法的接口：

```
CustomerInfo loadCustomerInfo(); 
```

让框架接受该接口的一个实例，用户将直接提供该实例，或者通过在配置文件中配置实现该接口的具体类的名称。

如果是后者，则使用 加载类`Class.forName(...).newInstance()`，并将结果转换为 CustomerInfoProvider 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:27:20.533

> 现有框架将允许第 3 方开发人员创建模块以提供我的系统所需的一小部分功能。

这意味着您的系统和您的客户的代码之间会有一个合同。任何需要与您的系统交互的外部代码都需要履行该合同。在 OO 术语中，接口是契约，因此您需要的是客户需要实现的接口。例子：

```
public interface ICustomer{
   public String getName();
   public String getEmailAddress();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:21:38.793

访客，如果您想让您的实现不透明。“不透明”是指二进制或用户无法以源代码形式访问以使用正常方式进行扩展。

否则，根据情况要求或建议选择聚合/组合、虚拟方法/抽象基类或模板方法。

# iphone - 如何检测所有可用的 Wifi 网络并在 iOS 应用程序中连接到其中一个

> ID：13808492
> 
> 赞同：6
> 
> 时间：2012-12-10T20:15:25.283
> 
> 标签：iphone, ios, wifi

在我的 iOS 应用程序中，我想检测所有可用的 wifi 网络，然后从列表中选择一个网络并连接到它。目标是不打开应用程序内置的设置以连接到 wifi，而是在我的应用程序中完成所有操作。

首先，这可能吗？如果可能，请指出要使用的框架和方法。

我查看了 Reachability 示例，但这对我不起作用，因为我认为它所做的只是监视设备的网络状态。

我还查看了 Captive Network Support 框架，并使用了以下`CNCopySupportedInterfaces`功能：

```
CFArrayRef allWifiNetworks = CNCopySupportedInterfaces();

NSLog(@"%@", allWifiNetworks); 
```

但我所看到的只是设备连接到的当前 wifi 网络。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T20:17:05.953

我很确定你不能这样做，至少如果你想能够在 App Store 上发布的话。

# scala - SBT - 姓名和身份证有什么区别？

> ID：13808502
> 
> 赞同：20
> 
> 时间：2012-12-10T20:15:49.783
> 
> 标签：scala, build, project, sbt

我想知道项目名称和 ID 之间的 SBT 是否存在差异。

我注意到带有以下键的示例 build.sbt 文件：

```
name := "My Project" 
```

我注意到 Build.scala 文件包含：

```
Project(id = "My Project", base = file(".")) 
```

有区别吗？两者应该相同还是无关？它们是用来做什么的？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T21:04:38.437

项目名称应用作项目名称，任何文档的可见标题。

id 用于引用项目以修改设置或在依赖管理方面，即将子项目连接到根项目，您可以说`subproject.dependsOn(rootProjectId)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T21:04:16.320

在您的 build.sbt 文件中，您有一个项目定义。您还可以将名称属性传递给`Project`build.scala 中的设置。由于您可以在构建文件中拥有多个子项目，因此您必须为每个子项目提供一个 id，而项目名称保持不变。

# dotnetnuke - dotnetnuke 从页面隐藏菜单

> ID：13808507
> 
> 赞同：0
> 
> 时间：2012-12-10T20:16:08.853
> 
> 标签：dotnetnuke

我正在运行一个带有 2 个门户的 dotnetnuke 项目 (v7.0)。

我只需要从一页中删除默认的 DDR 菜单。菜单现在适用于多个页面和子页面，但是在 1 个特定页面上，即登录页面，我不想显示菜单。

现在我可以想到两种方法来实现这一点：

*   创建一个新的皮肤模板，删除菜单，将模板应用到该页面

*   使用 jquery 检测 URL，用于该页面隐藏菜单。

我宁愿只在模板文件中编写逻辑代码，但我不擅长 .net/c#，而且我是 DNN 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:08:02.157

今天只有一页。

但是，如果您将它用于登录页面设计，我建议您只创建另一个皮肤并将其排除在外，然后根据需要定制该皮肤。

这样，当您的非技术编辑需要在网站上工作并制作一个可能仅在从 Google Adwords 链接时使用的页面时，或者他们可以在没有导航的情况下选择模板时，您作为开发人员/设计师不需要编辑皮肤以根据 URL 放置另一个异常。

# javascript - 如何从锚标签的 href 属性中提取参数“sid”的值

> ID：13808514
> 
> 赞同：1
> 
> 时间：2012-12-10T20:16:34.750
> 
> 标签：javascript, html, regex

我有块里面有锚标签的 div。

如何从每个锚标记的 href 属性中提取属性“sid”的值？

我获取代码数据的方式：

```
$.getJSON('http://anyorigin.com/get?url=http://www.somesite.com&callback=?', function(data){
        //$('#output').html(data.contents);

 var code = data.contents;

 document.myform.outputtext.value = code 
```

我试过了，但它没有输出 href 的值？

```
var pattern = /<a href="([^"]+?)">/gi;
code = code.match(pattern);
for (i = 0; i < code.length; i++) {
document.write(code[i].replace(pattern, '<a href="./doit.php?Id=$1&title=$2">$2</a><br />'));
} 
```

代码字符串示例：

```
<td width=120 valign="top">                     <div style="height:135px;
    border:1px solid #BBBBBB; background:#BBBBBB; margin-left:2px;
    text-align:center; ">
                    <a href="/now/episodes.php?name=path&id=4000&sid=12345&page=0"><img
    border="0" src="http://www.somesite.com/1234.jpg" width="150"
    height="83"></a><br>
                        <font face="Tahoma" size="2"><b>Star Album</b><br/>
                            episode 4
                        </font>             </div>

        </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:49:25.793

尝试：

```
var url="/now/episodes.php?name=path&id=4000&sid=12345&page=0"

var match = url.match(/sid=(.*)\&/);
alert( match[1] );​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:43:03.390

```
<?php
$referenceStr = "<td width=120 valign=\"top\">                     <div style=\"height:135px;
    border:1px solid #BBBBBB; background:#BBBBBB; margin-left:2px;
    text-align:center; \">
                    <a href=\"/now/episodes.php?name=path&id=4000&sid=12345&page=0\"><img
    border=\"0\" src=\"http://www.somesite.com/1234.jpg\" width=\"150\"
    height=\"83\"></a><br>
                        <font face=\"Tahoma\" size=\"2\"><b>Star Album</b><br/>
                            episode 4
                        </font>             </div>

        </td>";

$key = 'sid';   
preg_match('/(?:&|(\?))' . $key . '=[^&]*(?(1)&|)?/i', $referenceStr,$matches);
foreach($matches as $k => $v) $matches[$k] = str_replace(array('&sid=','sid='),'',$v);
print_r($matches);
?> 
```

这是一个 PHP 解决方案，只需使用该模式，它也适用于 JS。

对于 JS：

```
var code = '<td width=120 valign="top"> <div style="height:135px; border:1px solid #BBBBBB; background:#BBBBBB; margin-left:2px; text-align:center; "> <a href="/now/episodes.php?name=path&id=4000&sid=12345&page=0"><img border="0" src="http://www.somesite.com/1234.jpg" width="150" height="83"></a><br> <font face="Tahoma" size="2"><b>Star Album</b><br/> episode 4 </font> </div> </td>';
matchingelements = code.match(/sid\=*(\d*)/ig);
for(i=0;i<code.length;i++){
    document.write(matchingelements[i].replace('&sid=','').replace('sid=',''));
} 
```

这输出 12345

# .net - 自 .Net 1.1 以来，ILDASM 工具是否已更新？

> ID：13808517
> 
> 赞同：0
> 
> 时间：2012-12-10T20:16:46.077
> 
> 标签：.net

Microsoft 的 ILDASM 是查看 .Net 程序集的非常有用的工具。它具有命令行和 GUI 界面。

每次发布新版本的 .Net 时，都会有描述当前 ILDASM 的文档，以及早期版本的链接，例如：http: [//msdn.microsoft.com/en-us/library/f7dy01k1.aspx](http://msdn.microsoft.com/en-us/library/f7dy01k1.aspx)

...但这些文件只描述了类似命令的界面。我不是一个打字员，所以我倾向于 GUI 界面。但我能在 ILDASM 的 GUI 版本上找到的唯一文档可以追溯到 .Net 1.1 。 [http://msdn.microsoft.com/en-us/library/aa309387%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa309387%28VS.71%29.aspx)

那么自 1.1 以来，ILDASM 是否以任何方式发生了变化，作为它的 GUI 用户，我需要知道这些变化，如果是这样，这些变化是否记录在任何地方？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:37:10.597

至少从我知道的 .NET 2.0 开始，ildasm.exe 没有发生重大变化，这是 .NET 的最后一个版本，IL 格式发生了重大变化。GUI 已经稳定了更长的时间。否则就不需要更改程序，它依赖于允许任何程序读取 .NET 元数据的底层本机 COM 接口 IMetaDataImport。IMetaDataImport2 是该接口的 .NET 2.0 版本。.NET 4 没有变化，尽管接口的实现肯定发生了变化。也是 Reflector 和 ILSpy 等反编译器使用的接口。

不知道您为什么要问这个问题，但您可以从[SSCLI20 发行版](http://www.microsoft.com/en-us/download/details.aspx?id=4917)中获取 ildasm 的源代码。您会在 clr/src/ildasm 文件夹中找到它。它是用 C++ 编写的。

# actionscript-3 - 在 AS3 中模拟鼠标点击

> ID：13808518
> 
> 赞同：1
> 
> 时间：2012-12-10T20:16:56.933
> 
> 标签：actionscript-3, unit-testing, mouseevent

我正在做一个 AS3 项目，我正在努力解决一个特别脆弱的部分，在不久的将来需要大量重构。仅仅对单独的类进行单独的单元测试并不能捕捉到我们遇到的所有问题。例如，我们可能忘记在透明覆盖层上禁用鼠标事件，从而阻止对按钮的所有点击。因此，我正在尝试编写一个模拟真实用户输入的测试。

我试图在正确的位置手动将 MouseEvent 发送到舞台：

```
stage.dispatchEvent(new MouseEvent(MouseEvent.CLICK, true, true, 380, 490, stage)); 
```

由于舞台没有点击事件处理程序，我希望事件通过层次结构传播到实际处理它的按钮（就像我物理单击鼠标时一样）。然而，事实并非如此。

我知道我可以只在按钮上分派事件，但这不会检测到对象是否以某种方式受到阻碍。**是否有某种方法可以模拟鼠标事件，以便它们正确地通过层次结构传播？**

*编辑：* 我设法通过重新实现 Flash 的传播行为来做到这一点：

*编辑 2：* 如果有一个带有点击处理程序的部分透明覆盖，我以前的解决方案不起作用，比如其中有几个形状的 Sprite。问题是 hitTestPoint 方法返回 true，即使有问题的对象在那时是完全透明的。因此，我对其进行了修改以检查实际像素值：

```
private function clickObject(obj:DisplayObject) : void 
{
    var relPos:Point = new Point(obj.width / 2, obj.height / 2);
    var globalPos:Point = obj.localToGlobal(relPos);

    simulateClick(obj.stage, globalPos);
}

private function simulateClick(obj:InteractiveObject, globalPos:Point) : Boolean 
{
    // first, check if we have any children that would rather handle the event
    var container:DisplayObjectContainer = obj as DisplayObjectContainer;
    if (container != null) 
    {
        if (container.mouseChildren)
        {
            for (var i:int = 0; i < container.numChildren; ++i) 
            {
                var child:DisplayObject = container.getChildAt(i);
                var interactive:InteractiveObject = child as InteractiveObject;
                if (interactive != null) 
                {
                    if (simulateClick(interactive, globalPos)) 
                    {
                        // if we have found a handler in the children, we are done
                        return true;
                    }
                }
            }
        }
    }

    if (!obj.mouseEnabled) {
        return false;
    }

    if (obj.hitTestPoint(globalPos.x, globalPos.y)) 
    {
        var localPos:Point = obj.globalToLocal(globalPos);

        // check if object is visible at the clicked location
        var pixel:BitmapData = new BitmapData(1, 1);
        pixel.draw(obj, new Matrix(1, 0, 0, 1, -localPos.x, -localPos.y));
        var color:uint = pixel.getPixel32(0, 0);
        if ((pixel.getPixel32(0, 0) & 0xff000000) != 0)
        {
            // if yes, dispatch the click event
            var e:MouseEvent = new MouseEvent(MouseEvent.CLICK, true, true, localPos.x, localPos.y, obj);
            obj.dispatchEvent(e);
            return true;
        }
    }

    return false;
} 
```

不幸的是，至少还有一种情况没有涉及：如果对象是另一个对象的掩码。我不知道如何检查这一点，因为它可能是显示层次结构中的任何地方的掩码。我将不得不遍历整个树并检查每个显示对象以找出这一点。

所以，我的问题仍然存在：**没有更简单的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:53:54.607

我也遇到了 AS3 中的事件问题。我发现最好的方法是将 eventListeners 添加到调度事件的同一个对象中。在您的情况下，将 .addEventListener 添加到舞台并将函数作为子剪辑上的函数发送。例如：

```
 stage.addEventListener(MouseEvent.CLICK, object.object.clicked); 
```

我希望这可能会有所帮助。我过去曾成功地使用过这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:49:49.040

您可以使用**stage.getObjectsUnderPoint(new Point(pointerX , pointerY ));** 函数，它将返回带有对象的 You 数组。比删除覆盖对象和数组中的最后一个实例应该是最深的 DisplayObject。

注意：最后一个实例可以是图形或类似的东西，所以你应该遍历父对象以找到最近的 InteractiveObject。另外，不要忘记父对象可以有**mouseChildren = false**或**mouseEnabled = false**

# sql-server - 执行计划的TSQL优化

> ID：13808524
> 
> 赞同：0
> 
> 时间：2012-12-10T20:17:19.270
> 
> 标签：sql-server, tsql, sql-server-2005

我有一个 SQL 语句（我不能在这里发布）。当我查看它的执行计划时，我发现大部分时间都处于排序状态，然后是索引扫描。

我能做些什么来减少花在排序上的时间吗？任何类型的索引？我可以做些什么来减少索引扫描所花费的时间？

![在此处输入图像描述](../Images/92cf8b5471fb28b14d7a5f055b18fbbe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:21:02.513

聚集索引扫描本质上是一种表扫描，其中正在检查表中的每一行。

您可能为此查询缺少该表上的索引...查看您正在过滤/加入的字段，并将索引添加到这些列。

这些索引也可能会阻止嵌套循环/排序操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:45:29.323

我只是想在这里大声说出来，但是您的查询中是否涉及任何排名功能？我问是因为我在排序后立即看到分段运算符，如果我正在执行 ROW_NUMBER() 或 RANK() 之类的操作，我通常会看到这些运算符。所有此类运算符都需要在 OVER 子句中进行排序，因此，如果您的数据尚未按该指标排序（即，它不是在从中提取数据的表/索引上以这种方式排序），那么引擎将不得不对数据进行排序以获得正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:40:07.243

首先，如果您希望人们认真对待您，特别是如果您希望从您的问题中得到准确的回答和帮助，那么您必须包含特定信息。如果有人要帮助他们，他们需要足够的信息来重现您的情况，以便他们自己验证建议的实际帮助。信不信由你，做出回应的人非常棒（感谢所有提供帮助的人），他们通常会测试他们所说的话。如果您有代码限制，因为它的工作相关。您应该有足够的理解，能够创建一个与其他表和列类似的示例，以在不影响代码的情况下显示问题。

重点是，您的示例执行以下操作 1) 嵌套循环：2) 排序

在这种情况下，完成排序是因为（嵌套循环）的结果没有按照需要的方式排序。由于（嵌套循环）的源是顶部表（聚集索引扫描），它按照（聚集索引键）的顺序读取，这显然与需要排序不同。

如果实际在 INDEX 的 KEY 的 ss 部分上排序的字段和查询的所有需要​​的列都包含在索引中，那么它应该对该索引使用“索引扫描”，该索引应该已经由ORDER BY KEY 和 SORT 可以避免。

我对此进行了一些测试，显然 SQL Server 确实使用了索引（如预期的那样），但仍然执行排序（因为数据流已经排序，所以没有像预期的那样）。这可能是应该报告给 MS 的东西，因为优化器应该认识到这一点。

希望这可以帮助..

# google-drive-api - 使用 PHP 客户端库将大文件上传到谷歌驱动器

> ID：13808528
> 
> 赞同：10
> 
> 时间：2012-12-10T20:17:47.460
> 
> 标签：google-drive-api, google-api-php-client

我正在尝试通过他们的 PHP 客户端库使用 Google Drive API 来上传一个大文件。目前它失败了，因为似乎唯一可用的方法是“简单”上传方法。不幸的是，这需要您将整个文件作为数据加载，并且它达到了我的 php 内存限制。我想知道它是否可能，并看一个例子来说明它是如何完成的。我知道有一种可恢复和分块上传的方法，但没有关于如何使用它的文档。

```
<?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$client = new Google_Client();
// Get your credentials from the APIs Console
$client->setClientId('YOUR_CLIENT_ID');
$client->setClientSecret('YOUR_CLIENT_SECRET');
$client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));

$service = new Google_DriveService($client);

$authUrl = $client->createAuthUrl();

//Request authorization
print "Please visit:\n$authUrl\n\n";
print "Please enter the auth code:\n";
$authCode = trim(fgets(STDIN));

// Exchange authorization code for access token
$accessToken = $client->authenticate($authCode);
$client->setAccessToken($accessToken);

//Insert a file
$file = new Google_DriveFile();
$file->setTitle('My document');
$file->setDescription('A test document');
$file->setMimeType('text/plain');

$data = file_get_contents('document.txt');

$createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => 'text/plain',
    ));

print_r($createdFile);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T15:53:55.277

看起来这个问题已经回答了吗？将文件作为流读取，一次一个块并将其添加到缓冲区/将其直接写入套接字：

[Google Drive API - PHP 客户端库 - 将 uploadType 设置为可恢复上传](https://stackoverflow.com/questions/13413036/google-drive-api-php-client-library-setting-uploadtype-to-resumable-upload)

# php - Ajax 数据发布

> ID：13808536
> 
> 赞同：0
> 
> 时间：2012-12-10T20:18:14.173
> 
> 标签：php, javascript, jquery, html, ajax

您好，我正在尝试实现一个 ajax 邀请脚本，让用户邀请他/她的朋友参加该活动。我在网站的其他部分使用了几乎相同的 javascript，它们运行良好，但在这种情况下，它不起作用，我确信问题仍然存在，因为 javascript 部分，因为正如我所说，我使用几乎完全相同的脚本，它工作完美，当我发布数据时，它不发送电子邮件，我的邮件功能运行良好（在其他页面我使用相同的没有 ajax 并且它工作）但我认为 javascript 部分可以' t 在这种情况下发布数据。

顺便说一句，获取隐藏部分中的值没有任何问题。

希望你能帮忙。

javascript部分：

```
 <script type=\"text/javascript\">
 $(document).ready(function() {

$('.error').hide(); //Hide error messages 
$('#MainResult').hide(); //we will hide this right now

$(\"#button\").click(function() { //User clicks on Submit button

 var js_name = $(\"#name\").val();
 var js_message = $(\"#message\").val();
 var js_username = $(\"#username\").val();
 var js_useremail = $(\"#useremail\").val();
 var js_eventname = $(\"#eventname\").val();

 if(js_name==\"\"){
     $(\"#nameLb .error\").show(); // If Field is empty, we'll just show error text inside <span> tag.
     return false;}
if( js_message==\"\"){
     $(\"#messageLb .error\").show(); // If Field is empty, we'll just show error text inside <span> tag.
     return false;}

  var myData = 'postName='+ js_name + '&postMessage=' + js_message + '&username=' + js_username  + '&useremail=' + js_useremail  + '&eventname=' + js_eventname;

        jQuery.ajax({
            type: \"POST\",
            url: \"invite.php\",
            dataType:\"html\",
            data:myData,
            success:function(response){
                $(\"#MainResult\").html('<fieldset class=\"response\">'+response+'</fieldset>');
                $(\"#MainResult\").slideDown(\"slow\"); //show Result 
                $(\"#MainContent\").hide(); //hide form div slowly
            },
            error:function (xhr, ajaxOptions, thrownError){
                $(\"#ErrResults\").html(thrownError);
            }    
        });
    return false;
});

$(\"#gobacknow\").live(\"click\", function() { 
            $(\"#MainResult\").hide(); //show Result 
            $(\"#MainContent\").slideDown(\"slow\"); //hide form div slowly

            //clear all fields to empty state
            $(\"#name\").val('');$(\"#message\").val('');
});

$(\"#OpenContact\").live(\"click\", function() { 
            $(\"#form-wapper\").toggle(\"slow\");

});
 });
 </script> 
```

html部分：

```
 <div id="form-wapper">
    <div id="form-inner">
    <div id="ErrResults"><!-- retrive Error Here --></div>
    <div id="MainResult"><!-- retrive response Here --></div>
    <div id="MainContent">
    <fieldset>
        <form id="MyContactForm" name="MyContactForm" method="post" action="">
        <label for="name" id="nameLb">Email : <span class="error" style="font-size:10px; color:red;">Error.</span></label>
        <input type="text" name="name" id="name" />
        <label for="message" name="messageLb" id="messageLb">Message : <span class="error" style="font-size:10px; color:red;">Error.</span></label><textarea style="resize:vertical;" name="message" id="message" ></textarea>
        <input type="hidden" name="username" id="username" value="<?php echo get_username($userid); ?>">
        <input type="hidden" name="useremail" id="useremail" value="<?php echo get_email($userid); ?>">
        <input type="hidden" name="eventname" id="eventname" value="<?php echo $eventname; ?>">
      <br><button id="button">Send</button>

        </form>
    </fieldset>
    </div>
    <div style="clear:both;"></div>
</div> 
```

邀请php文件：

```
$postName       =  filter_var($_POST["postName"], FILTER_SANITIZE_STRING); 
$postMessage    = filter_var($_POST["postMessage"], FILTER_SANITIZE_STRING);
$username = filter_var($_POST["username"], FILTER_SANITIZE_STRING);
$useremail = filter_var($_POST["useremail"], FILTER_SANITIZE_STRING); 
$eventname= filter_var($_POST["eventname"], FILTER_SANITIZE_STRING);
invite($useremail, $postMessage , $username, $eventname, $postName); // this is a functipon that i use, it works in other cases, but not working in here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:40:09.690

Rather than trying to debug that javascript, here is a much much easier / cleaner way to do this for the javascript AJAX post:

```
$.post('invite.php',$('#MyContactForm').serialize(),function(data){
    if(data.success){
      // all your on success stuff here
        alert('success!');
    }else{
      // show error messages
        alert(data.e);
    }
},'json'); 
```

For your PHP part, echo a JSON response array, eg:

```
$data['success']=false;
$data['e']='Some error';
echo json_encode($data); 
```

# javascript - Firefox 调试器不会命中断点，除非在原始负载上

> ID：13808537
> 
> 赞同：0
> 
> 时间：2012-12-10T20:18:40.470
> 
> 标签：javascript, firebug

所以我在使用 tinyMCE 时遇到错误，但这并不是真正的问题。我正在尝试使用 firebug 对其进行调试，但我有点困惑。我这里有个断点。 ![在此处输入图像描述](../Images/9b7bcb21a7b2279ee3e64b032367df4f.png)

这个断点在页面加载时被命中，但是虽然错误说它在第 564 行，但我再也没有看到它被命中（即使我可以一遍又一遍地单击保存并得到相同的错误）。那是因为创建函数的方式吗？显然，JQuery 正在创建某种对象文字，其中包含一堆函数作为变量的值，例如

```
var functions = { 
  func1: function() {...},
  func2: function() {...}
}; 
```

而不是说

```
var myAwesomeFunction = function() { //do awesome }; 
```

我不确定，但如果是这样，我该如何调试？

谢谢

# jquery - 找到一个字符串，然后用标签换行

> ID：13808539
> 
> 赞同：0
> 
> 时间：2012-12-10T20:18:44.500
> 
> 标签：jquery

我试图弄清楚如何选择一个文本片段，然后用 H1 包装它。我正在寻找真正轻量级的东西，因为它只在我的网站上的一个地方使用。看起来很简单，但是要么答案太长而无法打扰，要么我似乎无法让它发挥作用。

**HTML**

```
<div class="innerWrapper">
  Office Current Listings
</div> 
```

**JS**

```
$('div.innerWrapper:contains("Office Current Listings")').html()
.replace('Office Current Listings', '<h1>Office Current Listings</h1>'); 
```

我使用了[上一个问题](https://stackoverflow.com/questions/3413793/jquery-find-a-string-and-wrap-it-in-an-a-tag)的答案，但它似乎不起作用。如果您想看一下，我会为它制作一个演示。

[http://jsfiddle.net/gjtjh/](http://jsfiddle.net/gjtjh/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:27:55.030

这个怎么样？

```
$('div.innerWrapper:contains("Office Current Listings")').wrapInner('<h1/>');​​​​ 
```

- 更新 -

要处理任何地方的文本，包括子 div，试试这个：

```
$('div.innerWrapper').each(
    function(index) {
        var $el = $(this);
        var html = $el.html();
        $el.html(html.replace(/Office Current Listings/g, "<h1>Office Current Listings</h1>"));
    }
);​ 
```

[http://jsfiddle.net/eDyBu/3/](http://jsfiddle.net/eDyBu/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:21:09.497

[http://jsfiddle.net/gjtjh/1/](http://jsfiddle.net/gjtjh/1/)

```
var div = $('div.innerWrapper:contains("Office Current Listings")');
var html = div.html();
div.html(html.replace('Office Current Listings', '<h1>Office Current Listings</h1>'));​ 
```

您实际上并没有设置 div 的 html。 `replace`是 的函数`string`，因此您正在替换文本，然后什么也不做。

# random - XNA 游戏编程：围成一圈生成敌人（代码）

> ID：13808544
> 
> 赞同：1
> 
> 时间：2012-12-10T20:19:13.900
> 
> 标签：random, xna, geometry, spawning

有人可以给我一些关于如何在一个圆圈中产生敌人的方向（XNA 编程）吗？

我希望敌人沿着窗口边界外的圆周随机生成。我希望它们沿直线穿过窗口的中心，然后移到它们开始位置的另一侧（或尽可能靠近该位置）。

理想情况下，这将创造一个敌人从看似四面八方随机出现的环境。

到目前为止，这是我的敌人（“坏人”）课程。我在 SetupTraveling 游戏状态中处理位置。我正在做的并不是真正的工作，所以任何帮助将不胜感激。

```
public class Baddies : Sprite
{
    public enum State
    {
        Inactive,
        SetupTraveling,
        Traveling,
        SetupInactive,
    }

    public State CurrentState
    {
        set
        {
            currentState = value;
            framesInStateCount = 0;
        }
        get
        {
            return currentState;
        }
    }

    int framesInStateCount = 0;
    State currentState = State.SetupInactive;    

    public Baddies()
    {
        Image = getImage("Bad");
        Scale = .2f;
        Rotation = 0f;
        DRotation = .05f;
        TurnedOn = true;
        BounceOn = false;
        WrapOn = false;
        Gravity = 0f;
    }

    public override void Update()
    {
        framesInStateCount++;
        switch (currentState)
        {
            case State.Inactive:
                if (RandOneIn(100)) CurrentState = State.SetupTraveling;
                break;
            case State.SetupTraveling:
                        PositionX = ((Game1.vGameWidth + 100)/2) * (float)Math.Cos(Glob.rnd(0.0, 2.0 * Math.PI));
                        PositionY = ((Game1.vGameHeight + 100)/2) * (float)Math.Sin(Glob.rnd(0.0, 2.0 * Math.PI));                        
                        DDPositionY = 0;
                        DPositionY = -1;
                        DPositionX = 1f;
                        DDPositionX = 0f;                          

                CurrentState = State.Traveling;
                break;
            case State.Traveling:
                if (PositionX > Game1.vGameWidth + (Image.Width / 2) * Scale)
                {
                    currentState = State.SetupInactive;
                }
                if (PositionX < -500f - (Image.Width / 2) * Scale)
                {
                    currentState = State.SetupInactive;
                }
                if (PositionY > Game1.vGameHeight + (Image.Height / 2) * Scale)
                {
                    currentState = State.SetupInactive;
                }
                if (PositionY < 0 - (Image.Height / 2) * Scale)
                {
                    currentState = State.SetupInactive;
                }
                break;
            case State.SetupInactive:
                PositionX = -300f;
                DPositionX = 0f;
                DPositionY = 0f;
                DDPositionX = 0f;
                CurrentState = State.Inactive;

                break;                
        }     

        base.Update();
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:36:24.457

三角函数的其他方法：

1.  决定你的圆半径是多少……通常是：

    ```
    raqdius = sqrt(Viewport.Size.Width^2 + Viewport.Size.Height^2) / 2; 
    ```

2.  生成随机角度

    ```
    angle = (float) Random.NextDouble() * MathHelper.PI * 2; 
    ```

3.  你的坐标是

    ```
    x = ViewPort.Center.X + radius * Math.Cos(angle);
    y = ViewPort.Center.Y + radius * Math.Sin(angle); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:50:44.590

这个怎么样：

1.  决定你圈子的raidius是什么，称之为r
2.  从 [-r, r] 生成 X 值
3.  Y = sqrt(r^2 - X^2)
4.  将 Y 随机设置为 Y 或 -Y。你的坐标是 X,Y

# php - PhP mysql插入语法错误

> ID：13808547
> 
> 赞同：0
> 
> 时间：2012-12-10T20:19:17.583
> 
> 标签：php, mysql, variables, loops, insert

下面我收到一个语法错误，您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'call, County, id, location, callcreated, station, units, calltype, lat, lng) VAL' 附近使用正确的语法，但不知道为什么！任何帮助将不胜感激！

```
<?php

mysql_connect("localhost", "test", "test") or die(mysql_error());
mysql_select_db("firecom") or die(mysql_error());

$data = file_get_contents("http://208.71.205.35/PITS/");//thanks WCCCA!
$pattern = "/id=\"hidXMLID\" value=\"([^\"]+)\"/";//looking for the rnd xml id#
preg_match_all($pattern, $data, $xmlext);

$url = "http://208.71.205.35/PITS/xml/fire_data_" . $xmlext[1][0] . ".xml";//putting together the secret xml url
$xml = simplexml_load_file($url);

foreach ($xml->marker as $element) {

$lat = $element->attributes()->lat;
$lng = $element->attributes()->lng;
$countydirty = $element->AGENCY;// gets agency
$wcccanumberdirty = $element->CALL_NO;
$iddirty = $element->TWO_DIGIT_CALL_NO;// gets call id#
$calldirty = $element->CALL_TYPE_FINAL_D;// gets call type
$locationdirty = $element->LOCATION;// gets location
$callcreateddirty = $element->CALL_CREATED_DATE_TIME;
$stationdirty = $element->BEAT_OR_STATION;// get first marker station
$unitsdirty = $element->UNITS;// get first marker units
$calltypedirty = $element->TYPE; 

//this next section removes the "~" from the start of all the lines
$county = str_replace('~','',$countydirty);
$wcccanumber = str_replace('~','',$wcccanumberdirty);
$id = str_replace('~','',$iddirty);
$call = str_replace('~','',$calldirty);
$location = str_replace('~','',$locationdirty);
$callcreated = str_replace('~','',$callcreateddirty);
$station = str_replace('~','',$stationdirty);
$units = str_replace('~','',$unitsdirty);
$calltype = str_replace('~','',$calltypedirty);

mysql_query("INSERT INTO calls (wcccanumber, call, county, id, location, callcreated, station, units, calltype, lat, lng) VALUES('$wcccanumber', '$call', '$county', '$id', '$location', '$callcreated', '$station', '$units', '$calltype', '$lat', '$lng')") or die(mysql_error()); 

echo "$call - $county - $wcccanumber - $id - $location - $callcreated - $station - $units - $calltype <br />";
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T20:21:38.480

`call`是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，必须用反引号括起来：

```
INSERT INTO calls (wcccanumber, `call`, ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:21:46.390

`call`是 mysql 中的保留字，因此如果将其用作列名，则需要在反引号中引用它：

```
wcccanumber, `call`, county... 
```

除此之外，您需要切换到 PDO / mysqli 和准备好的语句来解决您遇到的潜在 sql 注入问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:21:51.197

`call`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。你必须用反引号引用它：

```
mysql_query("INSERT INTO calls (wcccanumber, `call`, county, id, ... 
```

PS 对于数据库问题（尤其是语法错误），您不需要包含所有这些 DOM 内容。如何获取查询的值几乎总是无关紧要的。

# silverlight - 在 DataGridTemplateColumn 中使用 EventTriggers

> ID：13808549
> 
> 赞同：0
> 
> 时间：2012-12-10T20:19:22.990
> 
> 标签：silverlight, datagridtemplatecolumn

我正在使用 Silverlight 5，在视图中我有一个 Button，单击该按钮会加载特定状态。这是使用 EventTrigger 和 GoToStateAction 标记完成的，如下所示：

```
<Button x:Name="..." Content="...">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <ei:GoToStateAction StateName="MyState"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

以上工作正常，但如果我将 Button 移动到 DataGridTemplateColumn 它不再工作。具体来说，应用程序编译没有错误，DataGrid 在一列中显示按钮，但是当我单击按钮时，状态不会转换到。

```
<data:DataGrid ...>
    <data:DataGrid.Columns>
        <data:DataGridTemplateColumn>
            <data:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button x:Name="..." Content="...">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <ei:GoToStateAction StateName="MyState"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </Button>
                </DataTemplate>
            </data:DataGridTemplateColumn.CellTemplate>
        </data:DataGridTemplateColumn>
    </data:DataGrid.Columns>
</data:DataGrid> 
```

DataGridTemplateColumn 中不可能有 EventTriggers 吗？还是我需要使用替代语法声明它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:19:45.837

GoToStateAction引用指出，如果没有指定目标，它将沿着可视化树向上并在它找到的第一个定义状态的元素上应用状态更改[。](http://msdn.microsoft.com/en-us/library/microsoft.expression.interactivity.core.gotostateaction%28v=expression.40%29.aspx)在您的第二种情况下，我相信 DataGrid 可视化树的某些元素（单元格、行等）可能会在您的用户控件之前被考虑在内，因此您会看到这种行为。

由于您使用的是 Silverlight 5，因此您可以尝试将操作的[TargetObject](http://msdn.microsoft.com/en-us/library/system.windows.interactivity.targetedtriggeraction.targetobject%28v=expression.40%29.aspx)属性设置为您想要的控件，使用具有[相对源](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.ancestortype%28v=vs.95%29.aspx)的绑定，该绑定看起来是 UserControl 类型的祖先。

```
<ei:GoToStateAction StateName="MyState" TargetObject="{Binding RelativeSource={RelativeSource AncestorType=UserControl}}"/> 
```

# github - 在 GitHub 的图形指标中，什么是“添加”？

> ID：13808550
> 
> 赞同：11
> 
> 时间：2012-12-10T20:19:24.297
> 
> 标签：github, code-metrics

是添加了几行代码，还是添加了其他内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T20:25:05.293

它们是添加或修改的代码行。`+`当您执行 a 时，它们是标有 a 的行`git diff`

# c# - 单例还是静态记录器？

> ID：13808552
> 
> 赞同：3
> 
> 时间：2012-12-10T20:19:30.277
> 
> 标签：c#

我当前的 C# 应用程序是一个可执行文件 (EXE) 和一些 DLL（所以多个二进制文件），我想创建一个 LOGGER（一些简单的自定义记录器，它写入单个文本文件，无论从哪里调用它 - 这个应该在所有二进制文件（exe 和 dll）中都可用 - 请注意，它是一个单线程应用程序。

现在我有一个 DLL (Logger)，它有一个类 (Log) 和一个方法 (trace) 记录，每个项目添加对这个 DLL (Logger) 的引用并创建自己的实例（传入文件名）和然后调用 .Trace(...) 函数 - 工作正常......

但是我宁愿不必创建许多不同的跟踪文件（每个项目至少一个），并且每次都必须创建一个新的 Logger 实例似乎是重复的......所以我正在研究创建一个 STATIC 记录器类或使用 SINGLTON 。 ..我只是不确定哪个最好，为什么...

我希望有人能指出我正确的方向，创建一个记录器类（它将是它自己的 DLL）的最佳方法是什么，它将被许多项目（引用）使用，他们都应该写到相同的日志文件...？

任何帮助将非常感激。谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:28:25.940

您在两者之间进行选择`Singleton`和`Static`记录的方式与在两者之间进行选择的方式相同：您希望能够*覆盖*方法（或使用`Logging`接口）吗？如果你使用单例，你就有机会重写方法来改变功能。您甚至可以将行为抽象到接口后面。

使用静态类，您现在并且永远与该类绑定，任何更改都会影响每个人。

在处理我自己的系统时，我已经转向单例实例对象。它提供了静态类所不具备的灵活性。

# r - 融化数据框和拆分值

> ID：13808553
> 
> 赞同：3
> 
> 时间：2012-12-10T20:19:30.123
> 
> 标签：r

我有以下数据框，其测量值连接成一列，由一些分隔符分隔：

```
df <- data.frame(v1=c(1,2), v2=c("a;b;c", "d;e;f"))
df
     v1 v2
  1  1  a;b;c
  2  2  d;e;f;g 
```

我想将其融化/转换为以下格式：

```
 v1 v2
  1  1  a
  2  1  b
  3  1  c
  4  2  d
  5  2  e
  6  2  f
  7  2  g 
```

有没有优雅的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T20:34:04.623

您可以使用 分割字符串`strsplit`。

拆分第二列中的字符串：

```
splitted <- strsplit(as.character(df$v2), ";") 
```

创建一个新的数据框：

```
data.frame(v1 = rep.int(df$v1, sapply(splitted, length)), v2 = unlist(splitted)) 
```

结果：

```
 v1 v2
1  1  a
2  1  b
3  1  c
4  2  d
5  2  e
6  2  f 
```

# xamarin.ios - 是否有关于 MonoTouch AOT 助手的 ServiceStack.Text.JSConfig 文档？

> ID：13808555
> 
> 赞同：4
> 
> 时间：2012-12-10T20:19:45.690
> 
> 标签：xamarin.ios, servicestack, aot

是否有关于 MonoTouch AOT 助手的 ServiceStack.Text.JSConfig 文档？

我发现了这个... [MonoTouch 上的 ServiceStack JIT 错误](https://stackoverflow.com/questions/11385586/servicestack-jit-error-on-monotouch) ，我查看了代码，但没有评论，坦率地说，这有点神秘。

根据我对 AOT 过程的理解，确保发出类型/方法所需要做的就是在编译器认为可以使用/调用它的源中拥有该类型/方法。没有必要在运行时实际使用/调用任何东西。AOT 的全部意义在于它是一个编译时进程。因此，只要优化器不删除它，将使用/调用放在未使用的方法中就可以工作。

我一直在尝试使用 ServiceStack.Text.JsConfig.RegisterTypeForAot(); （以一种未使用的方法）来解决我的 AOT 问题，但是当我有太多调用它时遇到了其他奇怪的问题。看其他问题...

[调用 ServiceStack.Text.JsConfig.RegisterTypeForAot<T>(); 使用 MonoTouch 在设备上启动时导致 SIGSEGV](https://stackoverflow.com/questions/13796704/calling-servicestack-text-jsconfig-registertypeforaott-with-monotouch-cause)

我可能错误地使用了 RegisterTypeForAot() 方法吗？其他方法有什么作用？RegisterForAot() 和 InitAot()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:48:55.720

[除了JsConfig 中](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/JsConfig.cs#L388)`JsConfig.InitForAot()`已经内联的内容之外，没有其他文档，即：

> 为 MonoTouch AOT 编译器提供提示，以便为所有 DTO 预编译通用类。只需要在静态构造函数中调用一次。

您应该只需要为每种类型调用`JsConfig.InitForAot()`存根和 a`JsConfig.RegisterTypeForAot<T>()`来让 MonoTouch 编译器提前知道需要预先生成哪些泛型代码，以便所有代码都可用于泛型反射。[如果您遇到问题，请在GitHub 项目问题](https://github.com/ServiceStack/ServiceStack.Text/issues)上提交一个带有该问题的小型独立测试用例，以便我们查看是否有任何解决方法可以解决。

# r - 如何处理多个列表元素具有相同名称的可能性

> ID：13808558
> 
> 赞同：5
> 
> 时间：2012-12-10T20:19:51.340
> 
> 标签：r

我刚刚注意到可以构建多个元素具有相同名称的列表，例如：

```
l <- list(a=1, a="a") 
```

当元素名称用于提取列表元素时，会返回与名称匹配的第一个元素：`l$a`返回时`1`不会发出警告。

我通常按​​名称提取列表元素。现在我担心我会不小心创建包含多个具有相同名称的元素的列表（例如通过尝试通过公共索引合并列表），访问错误的列表元素，并且永远不知道有问题。

每次使用列表时，我都可以测试它是否有多个同名元素：

```
length(unique(names(l)))==length(names(l)) 
```

...但这很麻烦。有没有更好的方法来处理这个潜在的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:12:21.113

并不是说我会推荐这个**，**但这里有一种可能不太麻烦的方法来确保您不会从包含重复名称的列表中提取元素：

```
## Define a method for `[[` that first checks the list x for repeated names
`[[.CC` <- function(x,i,j,...,exact=TRUE) {
    if(!length(unique(names(x))) == length(names(x))) {
        stop("List contains multiple elements with the same name")
    } else {
        NextMethod()
    }
}

## Write  a function that prepends the class that triggers the method above
CC <- function(X) {
    class(X) <- c("CC", class(X))
    X
}

## Try it out
l <- list(a=1, a="a")
m <- list(a=1, b="a")

CC(l)[["a"]]
# Error in `[[.CC`(CC(l), "a") : 
#   List contains multiple elements with the same name

CC(m)[["a"]]
# [1] 1 
```

# java - Lucene 反向搜索

> ID：13808559
> 
> 赞同：2
> 
> 时间：2012-12-10T20:19:53.683
> 
> 标签：java, lucene

我的数据库中有一个关键字列表。例如：Java 程序、Php 程序等。我使用 Lucene 索引这些关键字。当我搜索比关键字（索引词）更长的文本时，如何获得匹配？例如：我正在搜索“我的 Java 程序比你的更好”。我希望匹配，因为我已经索引了关键字“Java 程序”？如何使用 Lucene 有效地做到这一点？如果不是 Lucene，我还能用什么来做这种工作？

请注意，我不想匹配独立的关键字“java”和“program”。我想要一个“Java 程序”的匹配项（作为我索引的一个关键字）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:25:11.890

如果您已使用 StandardAnalyzer 为关键字编制索引，则可以使用这样的查询字符串非常有效地查询它们

```
My Java Program is better than yours. 
```

除非引用或类似的东西，否则它会有效地解释为 7 个查询（删除停用词后更少），因此在查找“java”和查找“program”时它将匹配。

# jquery-ui - 使用 jQuery UI 可拖动/可放置滚动多个放置容器？

> ID：13808560
> 
> 赞同：3
> 
> 时间：2012-12-10T20:19:53.947
> 
> 标签：jquery-ui

使用 jQuery UI [draggable](http://api.jqueryui.com/draggable/) / [droppable](http://api.jqueryui.com/droppable/)，当可拖动对象被拖动到多个放置容器上时，如何强制它们滚动？

例如，如何让这些“放置目标”列表在将“拖动我”方块拖到它们上方时滚动？

![例子](../Images/3069813b3275e9765873be50d83feb3a.png)

上面的小提琴：http: [//jsfiddle.net/AdrkG/](http://jsfiddle.net/AdrkG/)

注意：该`draggable({ scroll: true })` 选项在此处不起作用，因为可拖动对象不是任一放置容器的子对象。

还有一些满足 StackOverflow 的代码示例（否则它会抱怨我只链接到 JSFiddle）：

```
<div class="draggable">drag me</div>

<div class="dropcontainer">
   <div class="droppable">drop target 0</div>
   <div class="droppable">drop target 1</div>
   …
</div>

<div class="dropcontainer">
   <div class="droppable">drop target 0</div>
   <div class="droppable">drop target 1</div>
   …
</div>

<script>
  $(".draggable").draggable()
  $(".doppable").droppable()
</script>

<style>
   .dropcontainer {
       overflow: auto;
       width: 150px;
       height: 100px;
   }
</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:18:23.917

您可以使用该`drag`事件。

这是一个例子：http: [//jsfiddle.net/AdrkG/8/](http://jsfiddle.net/AdrkG/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T13:42:45.130

I have almost th the same problem now. Thanks @Bali Balo for the direction and great example. I just want to show 2-dimentional scroll variant of his code if somebody else needs:

```
var dropContainers = $(".dropContainer"); 
```

* * *

```
 drag: function (event, ui) {
    dropContainers.each(function () {
        var $this = $(this);
        var cOffset = $this.offset();
        var bottomPos = cOffset.top + $this.height();
        var rightPos = cOffset.left + $this.width();
        clearInterval($this.data('timerScroll'));
        $this.data('timerScroll', false);
        if (event.pageX >= cOffset.left && event.pageX <= cOffset.left + $this.width()) {
            if (event.pageY >= bottomPos - triggerZone && event.pageY <= bottomPos) {
                var moveDown = function () {
                    $this.scrollTop($this.scrollTop() + scrollSpeed);
                };
                $this.data('timerScroll', setInterval(moveDown, 10));
                moveDown();
            }
            if (event.pageY >= cOffset.top && event.pageY <= cOffset.top + triggerZone) {
                var moveUp = function () {
                    $this.scrollTop($this.scrollTop() - scrollSpeed);
                };
                $this.data('timerScroll', setInterval(moveUp, 10));
                moveUp();
            }
        }
        if (event.pageY >= cOffset.top && event.pageY <= cOffset.top + $this.height()) {
            if (event.pageX >= rightPos - triggerZone && event.pageX <= rightPos) {
                var moveRight = function () {
                    $this.scrollLeft($this.scrollLeft() + scrollSpeed);
                };
                $this.data('timerScroll', setInterval(moveRight, 10));
                moveRight();
            }
            if (event.pageX >= cOffset.left && event.pageX <= cOffset.left + triggerZone) {
                var moveLeft = function () {
                    $this.scrollLeft($this.scrollLeft() - scrollSpeed);
                };
                $this.data('timerScroll', setInterval(moveLeft, 10));
                moveLeft();
            }
        }
    });
}, 
```

I added optimization not to search the droppable areas on every drag event - I pre-calculated it before initializing draggable widget. That substantially increased performance and responsiveness of dragging.

One more minor change is that it looks like moveUp and moveDown function names were interchanged ocasionally (I renamed them vise versa).

# ssl - ssl 碰撞查找器如何工作？

> ID：13808562
> 
> 赞同：1
> 
> 时间：2012-12-10T20:20:12.367
> 
> 标签：ssl, certificate, md5, collision, sha

我正在研究 md5 ssl 碰撞漏洞，无法解决一些问题。

如果 md5 ssl 变得易受攻击，为什么浏览器中仍然存在 md5 签名的 Thawte 证书？

而且，ssl 碰撞发现算法是如何工作的？是否与查找 md5/sha 哈希冲突相同，还是只是其中的一部分？我对两个文件感到困惑：密钥和证书。

我的想法：我们正在创建带有文本“a”的密钥文件，然后使用此密钥签署证书并检查 md5 sum 是否等于所需的 md5 sum。然后将“a”更改为“b”。但这似乎是蛮力，而不是碰撞发现。这是对的吗？

# maven - Artifactory 是否支持 SNAPSHOT 工件过期的概念？

> ID：13808568
> 
> 赞同：3
> 
> 时间：2012-12-10T20:21:05.440
> 
> 标签：maven, artifactory

我正在使用 Artifactory 来支持企业多模块项目。通常，我们更改模块的名称，并且 POM 文件中的相关依赖项不会更新为使用新的模块名称。由于 SNAPSHOT 依赖项不会定期自动清理，因此这些旧模块引用可能会在那里停留数月。当我将 Artifactory 迁移到另一台服务器时，我发现了一些，旧的模块依赖关系导致构建错误。我每晚都在使用 Jenkins 构建这些 SNAPSHOT 工件，所以我想要一些方法来自动清理 SNAPSHOT 工件。

Artifactory（或其他工件服务器，如 Nexus）是否支持如果 SNAPSHOT 工件超过 X 天，则删除工件的概念？是否有另一种方法可以自动化工件服务器清理以完成我想做的事情？我唯一能想到的就是创建一个 cron 作业，在每晚构建开始之前定期清除 libs-snapshot-local。有人已经建立了这种能力吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:06:35.853

据我所知，Artifactory 没有自动删除超过某个值的模块的方法。在我的商店中，我们编写了一个 Groovy 客户端，它使用[Artifactory 的 REST API](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s%2bREST%2bAPI&ei=v07GUK6XHs7migLu1YCQAw&usg=AFQjCNExiwGbw6IwKF4_bsOHfak7mH384Q)来执行此操作。

请注意，如果您的工件是共享库，则在删除它们之前，您需要小心不要依赖它们。我们的脚本也考虑到了这一点。

如果您有兴趣跟进，请发表评论，我会看看是否可以与您分享我们的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:17:32.200

另一种解决方案可能是[用户插件](http://wiki.jfrog.org/confluence/display/RTF/User+Plugins)。您可以编写一个简单的 Groovy 脚本，该脚本将按计划在 Artifactory 本身中运行（与 REST Gareth 提出的远程调用相反），[搜索长时间未下载的工件](http://repo.jfrog.org/artifactory/libs-releases-local/org/artifactory/artifactory-papi/2.6.5/artifactory-papi-2.6.5-javadoc.jar!/org/artifactory/search/Searches.html#artifactsNotDownloadedSince%28java.util.Calendar,%20java.util.Calendar,%20java.lang.String...%29)并将[其删除](http://repo.jfrog.org/artifactory/libs-releases-local/org/artifactory/artifactory-papi/2.6.5/artifactory-papi-2.6.5-javadoc.jar!/org/artifactory/repo/Repositories.html#delete%28org.artifactory.repo.RepoPath%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T15:01:18.633

我制作了一个 Ruby 脚本来删除 X 天内未下载的工件。它的工作方式就像 JBaruch 在他的回答中提到的那样。

它不是插件。它适用于 Artifactory 开源。插件仅受 Artifactory Pro 支持。

源代码：[https ://gist.github.com/aleung/5203736](https://gist.github.com/aleung/5203736)

# php - CakePHP 分页和排序

> ID：13808573
> 
> 赞同：2
> 
> 时间：2012-12-10T20:21:37.173
> 
> 标签：php, cakephp

感觉就像我已经尝试了一切，所以我现在来找你。

我正在尝试订购我的数据，但进展不顺利，对 Cake 来说有点新。

这是我的代码：

```
$this->set('threads', $this->paginate('Thread', array(
        'Thread.hidden' => 0,
        'Thread.forum_category_id' => $id,
        'order' => array(
            'Thread.created' => 'desc'
        )
    ))); 
```

它会生成一个 SQL 错误，这是最后一个有趣的部分：

```
AND `Thread`.`forum_category_id` = 12 AND order = ('desc') ORDER BY `Thread`.`created` ASC LIMIT 25 
```

我怎样才能解决这个问题？创建的字段显然存在于数据库中。：/

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T20:41:38.407

`conditions`使用多个过滤器（即订单、限制...）时，您需要传入密钥。如果*只是*指定条件，则可以直接将其作为第二个参数传递。

这应该这样做：

```
$this->set('threads', $this->paginate('Thread', array(
        'conditions' => array(
            'Thread.hidden' => 0,
            'Thread.forum_category_id' => $id
        ),
        'order' => array(
            'Thread.created' => 'desc'
        )
    ))); 
```

或者更清楚一点：

```
$this->paginate['order'] = array('Thread.created' => 'desc');
$this->paginate['conditions'] = array('Thread.hidden' => 0, ...);
$this->paginate['limit'] = 10;
$this->set('threads', $this->paginate()); 
```

如果出现错误，请添加`public $paginate;`到控制器的顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T20:29:05.007

尝试

```
$this->set('threads', $this->paginate('Thread', array(
        'Thread.hidden' => 0,
        'Thread.forum_category_id' => $id
    ),
    array(
        'Thread.created' => 'desc'
    )
)); 
```

我不是蛋糕大师，只是猜测。

编辑。是的，这是正确的。蛋糕[手册](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#control-which-fields-used-for-ordering)摘录：

控制用于排序的字段... `$this->paginate('Post', array(), array('title', 'slug'));`

所以顺序是第三个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-24T04:53:57.757

尝试

```
$all_threads = $this->Threads->find('all', 
            array(
                'order' => 'Threads.created'
            )
        );
        $saida = $this->paginate($all_threads,[
            'conditions' => ['Threads.hidden' => 0]
        ]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T00:36:00.960

在按顺序进行分页时需要注意一些事项。对于 Cake 3.x，您需要：

1) 确保您已将字段包含在“sortWhitelist”中

```
$this->paginate = [

        'sortWhitelist' => [
            'hidden', 'forum_category_id', 
        ],

    ]; 
```

2) 对于'order'，如果你把它放在$this->paginate 下，你将无法在视图中对该字段进行排序。所以最好将“订单”放在查询中（遗憾的是，这在文档中没有说明）

```
$query = $this->Thread->find()
->where( ['Thread.hidden' => 0, 'Thread.forum_category_id' => $id, ] )
->order( ['Thread.created' => 'desc'] );

$this->set('threads', $this->paginate($query) 
```

# php - 使用 $_SERVER['SCRIPT_NAME'] 进行身份验证

> ID：13808577
> 
> 赞同：0
> 
> 时间：2012-12-10T20:21:37.983
> 
> 标签：php

用户在注册时被赋予默认的“member_type”作为“用户”。我正在尝试使用存储在 header.php 中的函数来限制使用 $_SERVER['SCRIPT_NAME'] 的“用户”和未经身份验证的访问者对某些页面的访问。

这个概念是合理的（我相信），但我真的需要一些新鲜的眼睛来帮助我解决逻辑。

这是标题中的函数：

```
$basicAuth = array("member.php", "order.php", "logout.php");
    $adminonly = array("admin.php", "v_feedback.php", "user.php", "v_content.php", "product.php");

    restrictAccess($basicAuth, $adminonly); 
```

这是完整的功能：

```
function restrictAccess($basicAuth, $adminonly){
$error = "You do not have the authentication privileges to access this area, go <a href=\"index.php\" alt=\"Home\">home</a>.";

    if (isset($_SESSION['type'])){
        $auth = "Basic";

        if($_SESSION['type']=="Admin"){
            $auth = "Admin";
        }
    } else {
        $auth = "None";
    }

    //For testing purposes
    echo $auth;

if ($auth == "None"){
    if(($_SERVER['SCRIPT_NAME']==$basicAuth)||($_SERVER['SCRIPT_NAME']==$adminonly)){
        echo $error;
        exit();
    }
}elseif($auth =="Basic"){
    if(($_SERVER['SCRIPT_NAME'])==$adminonly){
        echo $error;
        exit();
    }
} 
```

}

我有一种感觉，这与我构建它的方式背后的逻辑有关，这是错误的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:31:28.653

`if($_SERVER['SCRIPT_NAME']==$basicAuth)`是完全错误的。您不能比较数组和字符串。 `if(array_search($_SERVER['SCRIPT_NAME'],$basicAuth) !== FALSE)`会服务，但你最好使用键而不是值，然后`if(array_key_exists($_SERVER['SCRIPT_NAME'],$basicAuth))`. 而且，顺便说一句，将“basicAuthNeeded.php”包含在某些脚本中并将“adminAuthNeeded.php”包含在其他脚本中而不是您的方法中不是更简单吗？或者使用更复杂但更灵活的方法（定义一些角色，定义资源并使用一些`checkPermissions($role, $resource)`）？

# android - TouchDelegate 没有增加 TextView 上的触摸区域

> ID：13808582
> 
> 赞同：0
> 
> 时间：2012-12-10T20:21:48.047
> 
> 标签：android, android-linearlayout, textview

我想知道我是否正确设置了 TouchDelegate。我想增加我的 LinearLayout 中 TextViews 的触摸区域。

我的布局看起来像这样。

```
<LinearLayout
        android:id="@+id/subcategory"
        android:layout_width="fill_parent"
        android:layout_height="35dp"
        android:background="#000000"
        android:gravity="center_horizontal"
        android:orientation="horizontal"
        android:padding="5dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="30dp"
            android:paddingRight="30dp"
            android:text="All"
            android:textColor="#FFFFFF"
            android:textSize="18sp" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="30dp"
            android:paddingRight="30dp"
            android:text="None"
            android:textColor="#FFFFFF"
            android:textSize="18sp" />
</LinearLayout> 
```

我从 onActivityCreated() 调用以下内容，其中 subCategoryLayout 是 LinearLayout

```
subCategoryLayout.post(new Runnable() {

                @Override
                public void run() {
                    for (int i = 0; i < subCategoryLayout.getChildCount(); i++) {
                        Rect delegateArea = new Rect();
                        TextView d = (TextView) subCategoryLayout.getChildAt(i);
                        d.getHitRect(delegateArea);
                        delegateArea.bottom += 50;
                        delegateArea.top += 200;
                        delegateArea.left += 50;
                        delegateArea.right += 50;

                        TouchDelegate expandedArea = new TouchDelegate(delegateArea, d);
                        subCategoryLayout.setTouchDelegate(expandedArea);
//                        if (View.class.isInstance(d.getParent())) {
//                            ((View) d.getParent()).setTouchDelegate(expandedArea);
//                        }
                    }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T09:05:09.360

第一点是View只能有一个TouchDelegate。因此，实际上在您的 for 循环之后，最后一个 TouchDelegate 设置为 subCategoryLayout。如果您想将多个 TouchDelegate 添加到一个视图中，您可以使用[TouchDelegateComposite](https://stackoverflow.com/questions/6799066/how-to-use-multiple-touchdelegate/20051314#20051314)

第二点是你想将触摸区域扩大到顶部50dp，底部200dp。但是您的 subCategoryLayout 高度是 35dp，只有那些命中 subCategoryLayout 的触摸才会传递给 TouchDelegate。因此，如果您想将触摸区域扩展到更大的值，则必须将 TouchDelegate 添加到一些足够大的父布局中。如果你这样做，你应该记住，你必须相对于更大的布局计算 delegateArea。

# c# - AddModelError 没有被传回控制器

> ID：13808583
> 
> 赞同：0
> 
> 时间：2012-12-10T20:21:48.870
> 
> 标签：c#, asp.net-mvc, razor

我正在使用带有 C# 的 asp.net Razor。我正在尝试验证输入的值是否为货币，但我似乎无法正确执行。

这是在我的 PaymentModel 中：

```
 [Required]
  [DataType(DataType.Currency)]
  [DisplayFormat(DataFormatString = "{0:F2}", ApplyFormatInEditMode = true)]
  [Display(Name = "Payment Amount:")]
  public decimal Amount { get; set; } 
```

这是我的预付款视图：

```
@model SuburbanCustPortal.Models.PaymentModel.PrePayment

@{
    ViewBag.Title = "Make a payment!";
}

<script>
$(function(){
  $("#AccountId").change(function(){
    var val=$(this).val();
    $("#currentBalance").load("@Url.Action("GetMyValue","Payment")", { custid : val });
    document.forms[0].Amount.focus();
  });
});
</script>

<h2>Make a Payment</h2>

  @using (Html.BeginForm("SendPayment", "Payment", FormMethod.Post))
  {
    @Html.ValidationSummary(true, "Please correct the errors and try again.")
    <div>
      <fieldset>
        <legend>Please enter the amount of the payment below:</legend>

        <div class="editor-label">
          Please select an account.
        </div>

        @Html.DropDownListFor(x => x.AccountId, (IEnumerable<SelectListItem>)ViewBag.Accounts)

        <div class="editor-label">
          @Html.LabelFor(m => m.AccountBalance)
        </div>
        <div class="editor-field">
          <label class="sizedCustomerDataLeftLabel" id="currentBalance">@Html.DisplayFor(model => model.AccountBalance)&nbsp;</label>
        </div>      

        <div class="editor-label">
          @Html.LabelFor(m => m.Amount)
        </div>
        <div class="editor-field focus">
          @Html.TextBoxFor(m => m.Amount, new { @class = "makePaymentText" })
          @Html.ValidationMessageFor(m => m.Amount)
        </div>

        <p>
          <input id="btn" class="makePaymentInput" type="submit" value="Pay Now"  onclick="DisableSubmitButton()"/>  
        </p>
      </fieldset>
    </div>
  }

This is my Prepayment ActionResult:

    [Authorize]
    public ActionResult PrePayment(PaymentModel.PrePayment model)
    {
      var list = new List<SelectListItem>();
      var custs = _client.RequestCustomersForAccount(User.Identity.Name);
      foreach (var customerData in custs)
      {
        var acctno = customerData.Branch + customerData.AccountNumber;
        var acctnoname = string.Format(" {0} - {1} ", acctno, customerData.Name);
        // msg += string.Format("*** {0} - {1} ***{2}", customerData.AccountId, acctnoname, Environment.NewLine);
        list.Add(new SelectListItem() { Text = acctnoname, Value = customerData.AccountId });
      }

      if (custs.Length > 0)
      {
        model.AccountBalance = String.Format("{0:C}", Decimal.Parse(custs[0].TotalBalance));
      }

      ViewBag.Accounts = list;
      return View(model);
    } 
```

视图的帖子调用 SendPayment，这是我在视图开始时的检查：

```
 if (model.Amount == 0)
    {    
      ModelState.AddModelError("Amount", "Invalid amount.");
      return RedirectToAction("PrePayment", model);
    } 
```

我似乎无法通过预付款来取回我从 AddModelError 发送的错误。我将其更改为：

```
 if (model.Amount == 0)
    {    
      ModelState.AddModelError("Amount", "Invalid amount.");
      return View("PrePayment", model);
    } 
```

但它永远不会调用控制器并且屏幕错误，因为它没有预期的数据。

如何使用错误重定向回调用视图？

**==== 附加信息 ====**

这是我的预付款视图：

```
[Authorize]
public ActionResult PrePayment(PaymentModel.PrePayment model)
{
    var list = new List<SelectListItem>();
    var custs = _client.RequestCustomersForAccount(User.Identity.Name);
    foreach (var customerData in custs)
    {
      var acctno = customerData.Branch + customerData.AccountNumber;
      var acctnoname = string.Format(" {0} - {1} ", acctno, customerData.Name);
      // msg += string.Format("*** {0} - {1} ***{2}", customerData.AccountId, acctnoname, Environment.NewLine);
      list.Add(new SelectListItem() { Text = acctnoname, Value = customerData.AccountId });
    }

    if (custs.Length > 0)
    {
      var amt =String.Format("{0:C}", Decimal.Parse(custs[0].TotalBalance));
      model.AccountBalance = amt;
      decimal namt;
      if (decimal.TryParse(amt.Replace(",",string.Empty).Replace("$", string.Empty), out namt))
      {
        model.Amount = namt;
      }
    }
  ViewBag.Accounts = list;
  return View(model);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:55:16.813

有几个问题需要解决。

```
1\.  return View("PrePayment", model);  
This will not call the controller, as the function name suggests, it only passing your object to the specified "View"(.cshtml file)

2\.     return RedirectToAction("PrePayment", model);  
You will not persist modelstate data, because you are doing a redirect. 
```

建议的工作流程将解决您的问题。至少它解决了我的问题。

```
1\. Get the form to post to "PrePayment" instead of SendPayment and you will create a new method with the following signature and have all you validation logic in the method
[Authorize]
[HttpPost]
public ActionResult PrePayment(PaymentModel.PrePayment model)

2\. If everything goes well then redirect to the success/send payment page depending on your requirement

3\. If somehow you need to pass model object onto the next action. Use TempData like following. This will temporarily persist the data till the next action. Then it get disposed:
TempData["payment"]=model; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:00:14.960

可能您应该向您的属性添加数据注释并使用`ModelState.IsValid`属性来验证它

```
[Required]
[DataType(DataType.Currency)]
[DisplayFormat(DataFormatString = "{0:F2}", ApplyFormatInEditMode = true)]
[Display(Name = "Payment Amount:")]
[Range(0.01, Double.MaxValue)]
public decimal Amount { get; set; } 
```

在您的`POST`方法中，检查验证是否通过，如果没有将模型发送回视图。

```
[HttpPost]
public ActionResult SendPayment(PrePayment model)
{
  if(ModelState.IsValid)
  {
     //do the fun stuff
  }
  return View(model);
} 
```

# javascript - 检查选中行中的值是否相等

> ID：13808586
> 
> 赞同：0
> 
> 时间：2012-12-10T20:21:53.350
> 
> 标签：javascript, asp.net-mvc

我的应用程序允许您在商店数据库中跟踪订单。该数据库包含一个弱实体，用于`notes`附加到`orderID`. 我希望允许用户能够同时对多个订单应用相同的“注释”，但是`notes`表中的某些字段取决于`location`销售。换句话说，只有在所有销售地点都相同的情况下，您才应该被允许应用相同的注释。

简化视图：

```
@using (Html.BeginForm("Create", "Note", FormMethod.Get, new { name = "editForm" }))
{
    <table id="DataTable">
        <tr>
            <th>
                <input type="button" value="Edit" onclick="checkboxValidation()"/>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OrderID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.location)
            </th>
        </tr>
@foreach (var item in Model)
{   
    <tr >
        <td>
            <input type="checkbox" name="ids" value="@item.orderID" />
        </td>
    <td>
        @Html.ActionLink(item.OrderID.ToString(), "Details", "Search", new { orderID = item.orderID.ToString() }, null)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.location)
    </td>
    </tr>
}
</table> 
```

`checkboxValidation()`是我编写的一个 javascript 函数，用于检查是否至少选中了 1 个复选框。如何添加检查以确保检查线上的所有位置都相同？这甚至可能吗？谢谢

编辑：我错过了一个细节。单击编辑按钮时，如果检查成功，则提交表单，这会调出`notes`编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:32:20.953

使用 JQuery 应该相当简单：

```
// find all the checked rows
var checkedItems = $("#DataTable").find("tr td input[type=checkbox]");

// construct a locations array for all checked items
var locations = [];
checkedItems.each(function(index, element) {
    if ($(element).is(":checked")) {
        locations.push($(this).closest("td").next("td").next("td").text().trim());
    }
});

// confirm each location is the same
var valid = true;
locations.each(function(index, element) {
    if (index > 0 && locations[index-1] != element) {
        valid = false;
        return;
    }
}); 
```

您可能想要做的另一件事是为您的`tr`and`td`元素添加一些数据标签，这样您就可以编写更强大的选择器，而不会因较小的 UI 重新排列（如`tr[data-role=check]`and`tr[data-role=location]`等）而中断。

* * *

（使用[最近的 JQuery](http://api.jquery.com/closest/)和[JQuery](http://api.jquery.com/jQuery.each/)。）

# will-paginate - will_paginate 安装时出现安装超时错误

> ID：13808587
> 
> 赞同：0
> 
> 时间：2012-12-10T20:22:03.363
> 
> 标签：will-paginate

任何在尝试安装 will_paginate 插件时遇到问题的人。当我尝试安装时，出现超时错误。我已经尝试了很多次，但没有运气。

rails 插件安装 svn://errtheblog.com/svn/plugins/will_paginate

> svn：无法连接到主机“errtheblog.com”：操作超时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:36:07.640

对于任何尝试安装插件并遇到像我这样的麻烦的人，请尝试安装 gem。[https://github.com/mislav/will_paginate/wiki/Installation](https://github.com/mislav/will_paginate/wiki/Installation)

# c# - 使用 Google Analytics 跟踪文本框条目

> ID：13808591
> 
> 赞同：1
> 
> 时间：2012-12-10T20:22:24.627
> 
> 标签：c#, asp.net, google-analytics, sitecore

我试图在谷歌分析中捕获输入到文本框中的数据。到目前为止我的代码如下，我正在尝试通过 Javascript 捕获数据，但我似乎无法让它工作。我使用的 CMS 平台是 sitecore。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="SalesRepSearch.ascx.cs"     Inherits="USEndoscopy.Website.layouts.USEndoscopy.Sublayouts.SalesRepSearch" %>
<%@ Import Namespace="USEndoscopy.Library.Search" %>

<script type="text/javascript">
    var textbox = document.getElementById('txtZipCode'),
    submitButton = document.getElementById('btnSalesRepSearch');

submitButton.onClick = function () {
    _trackEvent('data-store', textbox.name, textbox.value, 0);
    // 'data-store' can be replaced with whatever category of data you want, for sortability's sake
    // the 0 can be replaced with any other numerical data you want - but it must be numerical
}
</script>
<p></p>
<p>
    <asp:Panel DefaultButton="btnSalesRepSearch" runat="server">
    <asp:TextBox ID="txtZipCode" runat="server" Width="300px"></asp:TextBox>
    <asp:Button ID="btnSalesRepSearch" runat="server" CssClass="buttonregular" Text="Search" OnClick="btnSalesRepSearch_Click" />
    <asp:RequiredFieldValidator ID="reqTxtZipCode" runat="server" ValidationGroup="ZipCode" ControlToValidate="txtZipCode" Display="Dynamic" ErrorMessage="Please enter a valid US Zip code" CssClass="error"></asp:RequiredFieldValidator>
        <asp:RegularExpressionValidator ID="regExTxtZipCode" runat="server"     ValidationExpression="^\d    {5}(-\d{4})?$" ValidationGroup="ZipCode" ControlToValidate="txtZipCode" Display="Dynamic"     ErrorMessage="Please enter a valid US Zip code" CssClass="error"></asp:RegularExpressionValidator>
    </asp:Panel>
</p>

<p>
    <asp:Repeater ID="salesRepContainer" runat="server">
        <ItemTemplate>
            <%# ((SalesRep)Container.DataItem).RepName %><br />
            <%# ((SalesRep)Container.DataItem).Phone %><br />
            <a href="mailto:<%# ((SalesRep)Container.DataItem).Email %>"><%# ((SalesRep)    Container.DataItem).Email %></a><br />
        </ItemTemplate>
    </asp:Repeater>
</p>
<p>
    <sc:Text Field="InternationalMessage" runat="server" />
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:56:00.157

您是否检查了呈现的 HTML 的源代码？由于嵌套在面板中，ASP.Net WebControl ID 是否最终成为完全不同的东西？

也许你应该给这些添加一个 CSS 类并使用[document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

如果您使用的是 jQuery，那么您可以使用[attributeEndsWith](http://api.jquery.com/attribute-ends-with-selector/)选择器

```
$('input[id$="txtZipCode"]');
$('input[id$="btnSalesRepSearch"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:56:35.207

这是因为在渲染它们时`ASP.NET`改变了`ID`文本框的值。

如果您正在运行 .net V4 或更高版本，请添加`ClientIDMode="Static"`到您的文本框和按钮。这告诉 .net 不要更改控件的 ID。

```
 <asp:TextBox ID="txtZipCode" runat="server" ClientIDMode="Static" Width="300px"></asp:TextBox>
    <asp:Button ID="btnSalesRepSearch" runat="server" ClientIDMode="Static" CssClass="buttonregular" Text="Search" OnClick="btnSalesRepSearch_Click" /> 
```

如果您的运行少于 .net 4，请将您的 Javascript 更改为：（.ClientID 获取 .net 在呈现控件时提供的 ID）

```
 var textbox = document.getElementById('<%= txtZipCode.ClientID %>'),
    submitButton = document.getElementById('<%= btnSalesRepSearch.ClientID %>'); 
```

**更新**

您可能会遇到问题，您的 javascript 函数试图在您的按钮在 DOM 上实际可用*之前*`click`为您的按钮分配一个函数。

 *所以尝试以下方法：

Javascript函数

```
function btnSearchClick(){
     var textbox = document.getElementById('txtZipCode');

     // Change your google code to this:

     _gaq.push(['_trackEvent', textbox.name, textbox.value,  0]);

     return true;
 } 
```

并在您的按钮上添加属性

```
 onClientClick="return btnSearchClick()" 
```*

# python - 在Python中的空格处拆分列表中的每个字符串

> ID：13808592
> 
> 赞同：-3
> 
> 时间：2012-12-10T20:22:30.107
> 
> 标签：python, list, url, split

我有一个列表，其中包含一个 url 和 Python 中一个大列表的每个项目中的一些文本。每次出现空格时，我想将每个项目分成几个项目（每个项目 2-3 个空格）。没有太多代码要发布，它只是一个存储在命名变量中的列表。我尝试过使用 split 功能，但我似乎无法正确使用它。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T20:29:42.017

很难知道你在要求什么，但我会试一试。

```
>>> a = ['this is', 'a', 'list with  spaces']
>>> [words for segments in a for words in segments.split()]
['this', 'is', 'a', 'list', 'with', 'spaces'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:27:05.110

你可以尝试这样的事情：

```
>>> items = ['foo bar', 'baz', 'bak foo bar']
>>> new_items = []
>>> for item in items:
...     new_items.extend(item.split())
...
>>> new_items
['foo', 'bar', 'baz', 'bak', 'foo', 'bar'] 
```

# c++ - openCV 中 YCBCR 帧的最大值和最小值的位置

> ID：13808595
> 
> 赞同：-1
> 
> 时间：2012-12-10T20:22:43.683
> 
> 标签：c++, opencv

我是如果 OpenCV 中有任何函数，该调用告诉我最大值的 X 和 Y 位置或我的 Ycbcr 帧的平均值。我已经完成了从 RGB 的转换，我可以找到最大值和最小值，但是 for 循环占用了我太多的内存

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:26:36.600

该[`minMaxLoc`](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#minMaxLoc)功能应该可以帮助您做到这一点。

**更新：**例如：

```
Mat src = imread("image.jpg"), tmp;
cvtColor(src, tmp, CV_BGR2YCrCb);

//extract Y
extractChannel(tmp, tmp, 0);

Point min, max;
double minV, maxV;
minMaxLoc(tmp, &minV, &maxV, &min, &max);

cout << "Max value is " << maxV << " at position " << max << endl
     << "Min value is " << minV << " at position " << min << endl; 
```

输出：

```
Max value is 255 at position [52, 19]
Min value is 0 at position [28, 1] 
```

# java - Android 模拟器：安装错误：INSTALL_FAILED_VERSION_DOWNGRADE

> ID：13808599
> 
> 赞同：165
> 
> 时间：2012-12-10T20:23:06.843
> 
> 标签：java, android, sdk

我目前正在尝试编译和测试一个小型 Android 应用程序。

我正在使用 Eclipse，并安装了 SDK 4.2（Api 级别 17）。我已经设置

```
<uses-sdk android:targetSdkVersion="17" android:minSdkVersion="8" /> 
```

虽然我也尝试过不同的值（即 17/17）。

我不使用任何 GoogleAPI 函数，也不使用 API Level 8 中不可用的函数。或者至少在这方面我没有收到任何编译错误或警告。

当我编译项目并在运行 Android 2.2.1 的真实设备上运行它时，应用程序运行良好。但是，当我尝试在具有 Android 4.2、Api Level 17 的模拟器（Android 虚拟设备）上运行应用程序时，出现以下错误：

```
[2012-12-10 21:10:29 - SoftKeyboard] Installation error: INSTALL_FAILED_VERSION_DOWNGRADE
[2012-12-10 21:10:29 - SoftKeyboard] Please check logcat output for more details.
[2012-12-10 21:10:29 - SoftKeyboard] Launch canceled! 
```

然而，Logcat 是空的。我真的不知道，这个错误甚至意味着什么......

* * *

## 回答 #1

> 赞同：397
> 
> 时间：2012-12-10T20:55:43.647

这意味着您正在尝试安装与已安装在模拟器上的应用程序具有相同 packageName 的应用程序，但您尝试安装的应用程序具有较低的 versionCode（您的版本号的整数值）。

您可能已经从版本号高于您现在正在使用的副本的代码的单独副本安装。无论哪种情况，都可以：

*   卸载当前安装的副本

*   或打开手机的设置 > 应用程序管理器以确定已安装应用程序的版本号，并`<manifest android:versionCode` 在 AndroidManifest 中将您的版本号递增到更高。

*   或[https://stackoverflow.com/a/13772620/632951](https://stackoverflow.com/a/13772620/632951)

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-02-18T23:49:00.690

您还可以考虑`-d`在 adb install 中添加标志。它应该忽略这个错误。

```
adb install -r -d abc.apk 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-12-10T20:57:01.857

首先从模拟器中卸载您的应用程序：

```
adb -e uninstall your.application.package.name 
```

然后尝试再次安装该应用程序。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-18T23:05:34.840

这发生在我的项目中，因为我使用 XML 资源来设置版本代码。

```
AndroidManifest.xml:
android:versionCode="@integer/app_version_code"

app.xml:
<integer name="app_version_code">64</integer> 
```

这在以前的版本中不是问题`adb`，但是，从`platform-tools`r16 开始，这不再被解析为正确的整数。您可以使用清单中的文字强制重新安装`adb -r`或完全避免该问题：

```
android:versionCode="64" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-01-14T15:38:01.147

当尝试在来自 Play 商店的已签名发布 APK 之上安装调试/未签名 APK 时，可能会发生这种情况。

```
H:\>adb install -r "Signed.apk"
2909 KB/s (220439 bytes in 0.074s)
        pkg: /data/local/tmp/Signed.apk
Success

H:\>adb install -r "AppName.apk"
2753 KB/s (219954 bytes in 0.078s)
        pkg: /data/local/tmp/AppName.apk
Failure [INSTALL_FAILED_VERSION_DOWNGRADE] 
```

解决方案是[卸载](https://stackoverflow.com/a/13809095/588306)然后重新安装或从 IDE 重新运行它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-17T07:41:20.927

> INSTALL_FAILED_VERSION_DOWNGRADE

所有 Android 应用程序都有一个包名称。包名唯一标识设备上的应用程序。如果与设备上已**安装的应用程序****相同**的包名称，则显示此**错误**。

 ****1.  您可以先从您的**设备**上卸载该应用程序，然后再安装新的。
2.  **每次发布新版本时，您只需将数字加一即可**。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-04T14:18:11.903

在棉花糖中，我得到了这个错误，

```
Installation error: INSTALL_FAILED_PERMISSION_MODEL_DOWNGRADE
Please check logcat output for more details.
Launch canceled! 
```

寻找解决方案我搜索并来到这里。我删除了该应用程序，但在 Nexus 6 中仍然存在此问题。后来发现，

```
Settings > Apps > [My app name] have to removed for all user. 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-04-15T14:32:12.830

根据来自 ...\android-22\android\content\pm\PackageManager.java 的 sdk src 代码

```
/**
 * Installation return code: this is passed to the {@link IPackageInstallObserver} by
 * {@link #installPackage(android.net.Uri, IPackageInstallObserver, int)} if
 * the new package has an older version code than the currently installed package.
 * @hide
 */
public static final int INSTALL_FAILED_VERSION_DOWNGRADE = -25; 
```

如果新软件包的版本代码比当前安装的软件包旧。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-12-13T08:03:48.283

你可以试试这个： `adb install -r -d -f your_Apk_path`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-09-19T18:16:56.353

我遇到了同样的问题。当我尝试在我的 android 设备**而不是模拟器**中运行时出现错误。

```
sudo ionic run android 
```

我可以通过运行来解决这个问题

```
adb uninstall com.mypackage.name 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-18T16:00:00.397

此错误出现在我的具有多种 gfx 文件的 android 项目中。最后，没有接受清单文件的任何更改。

因为我对安卓设备缺乏了解，我忘记了我的测试设备有第二个用户。该用户还安装了我的应用程序版本，因此我还必须删除该用户帐户的应用程序并且它可以工作。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-09-28T19:48:15.840

当我将 Android Studio 应用程序导入 eclipse 时，这发生在我身上。

我发现从 android studio 项目导入时需要稍微修改 andoridmanifest.xml 文件。我创建了一个新的测试项目，并复制了标题以使其匹配。瞧，问题解决了。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-24T04:43:06.527

我遇到了同样的问题。我安装了

```
 adb shell pm install --user <userId> test.apk 
```

由于某种原因，屏幕上没有图标。这是一个调试版本，所有其他连续安装都不起作用。只需卸载软件包即可。

```
 adb uninstall com.package.name 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-12-21T06:58:24.113

**只需卸载以前的 Apk 并安装更新的 APK**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-14T10:58:18.743

从设备上卸载您当前的 apk 然后运行

```
sudo adb uninstall com.package.name 
```

这是通过pc**卸载apk**的命令。

然后重试构建

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-10-04T10:58:45.333

请执行下列操作：

1.  只需卸载以前版本的应用程序
2.  重新运行命令
3.  享受 ：）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-10-13T13:19:17.330

一直让我感到沮丧的是，我不知道这个应用程序是为我的访客帐户安装的（尽管我已经为其他帐户卸载了它..）

所以我在应用程序管理器中搜索了该应用程序，然后简单地点击了所有用户的卸载

[![在此处输入图像描述](../Images/7f3e66ee961261a93778cca1fa56ab74.png)](https://i.stack.imgur.com/0QDUt.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-04-10T05:52:29.217

这可能是 Google Play 服务依赖项的问题，而不是实际的应用程序版本问题。

有时，情况并非如此：

a) 安装了现有版本的应用程序，无论是否更新 b) 设备上的另一个用户帐户上安装了现有版本的应用程序

所以错误信息只是假的。

就我而言，我有：

```
implementation 'com.google.android.gms:play-services-maps:16.0.0'
implementation 'com.google.android.gms:play-services-location:16.0.0'
implementation 'com.google.android.gms:play-services-gcm:16.0.0' 
```

但是当我尝试

```
implementation 'com.google.android.gms:play-services-maps:17.0.0'
implementation 'com.google.android.gms:play-services-location:17.0.0'
implementation 'com.google.android.gms:play-services-gcm:17.0.0' 
```

我遇到了与 androidX 相关的错误，因为我还没有升级到 androidX 并且还没有准备好这样做。我发现使用最新的 16.xy 版本可以工作，并且我不再收到错误消息。此外，我可以等到我准备好之后再升级到 androidX。

```
implementation 'com.google.android.gms:play-services-maps:16.+'
implementation 'com.google.android.gms:play-services-location:16.+'
implementation 'com.google.android.gms:play-services-gcm:16.+' 
```****

# rest - 在 Grails 上搜索 RESTful 接口的实现

> ID：13808601
> 
> 赞同：4
> 
> 时间：2012-12-10T20:23:17.960
> 
> 标签：rest, grails

我正在 Grails 2.1.1 应用程序上构建一个 RESTful 接口。我应该如何实现搜索操作？我不想重复我目前的想法需要的大量代码。

服务器结构很正常 Grails-MVC：领域类代表数据，控制器提供接口，服务具有业务逻辑。我在控制器中使用命令对象进行数据绑定，而不是在服务方法上。客户端是一个 Web UI。我的目标是拥有这样的搜索网址：

```
/cars/?q=generic+query+from+all+fields
/cars/?color=red&year=2011 
```

（我知道关于这种带有查询字符串的 URL 的 RESTfulness 的争论：[RESTful URL design for search](https://stackoverflow.com/q/207477/339052)。虽然我认为这是我的目的的最佳模型，但如果他们制作 API 和实现更好。）

正如您从下面的代码示例中看到的那样，我的问题在于第二种 URL，即特定于字段的搜索。为了对具有大量字段的多个域类实现这种搜索操作，我的方法签名会爆炸。

可能有一种“Groovy 方式”可以做到这一点，但我在更精细的 Groovy 技巧中仍然有点 n00b :)

领域：

```
class Car {
    String color
    int year
} 
```

控制器：

```
class CarsController {
    def carService
    def list(ListCommand cmd) {
        def result
        if (cmd.q) {
            result = carService.search(cmd.q, cmd.max, cmd.offset, cmd.order, cmd.sort)
        }
        else {
            result = carService.search(cmd.color, cmd.year, cmd.max, cmd.offset, cmd.order, cmd.sort)
        }
        render result as JSON
    }

    class ListCommand {
        Integer max
        Integer offset
        String order
        String sort
        String q
        String color // I don't want this field in command
        int year // I don't want this field in command

        static constraints = {
            // all nullable
        }
    }
    // show(), save(), update(), delete() and their commands clipped
} 
```

服务：

```
class CarService {
    List<Car> search(q, max=10, offset=0, order="asc", sort="id") {
        // ...
    }

    List<Car> search(color, year, max=10, offset=0, order="asc", sort="id") {
        // ...
    }
} 
```

网址映射：

```
class UrlMappings {
    static mappings = {
        name restEntityList: "/$controller"(parseRequest: true) {
            action = [GET: "list", POST: "save"]
        }
        name restEntity: "/$controller/$id"(parseRequest: true) {
            action = [GET: "show", PUT: "update", POST: "update", DELETE: "delete"]
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:47:01.120

您可以从中获取所有这些参数`params`，例如：

```
result = carService.search(params.color, params.year as Integer, cmd.max, cmd.offset, cmd.order, cmd.sort) 
```

map 的所有值`params`都是字符串，因此您应该将其转换为控制器中的适当数据结构（最好检查这`params.year`是实际数字）

* * *

更新

如果您不想编写字段名称，可以将其作为 Map 传递：

```
resutl = carService.search(params) 
```

在哪里

```
List<Car> search(Map params) 
```

# jquery - 为什么在 Internet Explorer 中使用 jquery 的提交和服务器 302 代码重定向到错误的 url？

> ID：13808602
> 
> 赞同：0
> 
> 时间：2012-12-10T20:23:27.820
> 
> 标签：jquery, internet-explorer, http-status-code-302

我有一个表单会在提交数据之前执行一些验证，所以我在提交按钮的点击事件中绑定了这个验证。

```
$('#myButton').click(function(e){
  e.preventDefault();
  e.returnValue = false;
  //perform validations...
  if(valid) {
    $('#theForm').submit();
  }
}); 
```

到目前为止没有什么神奇的。如果服务器端一切正常，页面将返回 302 http 状态码。

在 Firefox 和 Chrome 中，该 url 已成功重定向，但在 Internet Explorer 8（未在另一个版本中测试）中，这会导致浏览器**重定向到相同的 url**。

如果我删除 javascript 代码，则 IE**重定向正确**。

所以，我的问题是，`submit()`JQuery 与普通的 html 提交有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:25:30.887

我不确定有什么区别，但是你应该可以直接用这个触发表单的提交事件，有效地绕过 jQuery 的提交事件处理：

```
$("#theform")[0].submit(); 
```

如果发生同样的事情，那么问题不在于 jQuery，而很可能是跨浏览器问题。

# asp-classic - 通过经典asp中的虚拟目录访问时找不到文件

> ID：13808603
> 
> 赞同：1
> 
> 时间：2012-12-10T20:23:28.637
> 
> 标签：asp-classic, vbscript, virtual-directory, file-not-found

我正在通过服务器对象使用经典 asp 访问虚拟文件夹中的文件。这是获取文件夹的代码：

```
Set FSO = Server.CreateObject("Scripting.FileSystemObject")
Dim mapPath
mapPath = Server.MapPath("http://development/far/")
Set farFolder = FSO.GetFolder(mapPath) 
```

循环浏览目录时出现文件未找到错误。当我将 //development/far/ 放在浏览器中时，可以看到这些文件。我对asp还很陌生，所以不知道哪里出错了。

这是循环目录时的代码：

```
For Each item in farFolder.Files

Set matches =  re.Execute(item.Name)
if(matches.Count=1) then
Response.Write ("<a target=""_blank""href=""" & item.Path & """>" & item.Name & "</a>  <br>")
End if

Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:18:50.877

[调用Server.MapPath()](http://msdn.microsoft.com/en-us/library/ms524632%28VS.90%29.aspx)时只需使用 URL 的路径部分：

```
mapPath = Server.MapPath("/far/") 
```

# html - 将数据从 xml doc 插入到 xsl

> ID：13808604
> 
> 赞同：0
> 
> 时间：2012-12-10T20:23:29.497
> 
> 标签：html, xml, xslt

我是使用 XSL 和 XML 的初学者。我在从 XML 文档中获取数据并在 XSL 中使用它时遇到问题。目前我正在尝试不同的方法，但似乎无法做到正确，我需要在整个项目中使用这种技术来完成项目。一旦我可以做到这一点，我就可以在整个页面中做到这一点。

以下是我的 XML 和 XSL 文档中的示例：

```
<storelocator> 
    <!--Parent element containing all text on the page-->
    <content_text> 
        <title>
            <titlename>Store Locator</titlename> 
        </title>
        <title>
            <subtitle>FIND A STORE</subtitle>
        </title>
        <title>
            <countrydropdown>Country</countrydropdown>
        </title>
        <title>
            <address>Steet Address, City, Sate/Province OR Postal/Zip Code</address>
        </title>
        <title>
            <radiusdropdown>Radius</radiusdropdown>
        </title>
        <title>
            <featuredstore>FEATURED STORE</featuredstore>
        </title>
        <title>
            <storelocation>Newbury Street, Boston, MA USA</storelocation>
        </title>
</storelocator> 
```

这是 XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
<html>
<body bgcolor="white">

<div id="container" style="100%">

<div id="header" style="background: url('header.png'); height:30px;"></div>

<div id="content_container" align="center" style="text-transform: uppercase; font-family: tahoma; font-weight: normal; font-size: 0.8em">
    <div id="content" align="left" style="background-color:blue;height:845px;width:848px">

   <xsl:value-of select="titlename"/> <!--here I was trying to import the text from XML DOC-->

<br/>
<br/>
<br/>
    <img src="image.png" align="left"/><br/>
<br/>
<br/>
<br/>
<br/>

</div>
</div>

<div id="footer" style="background-color:black;clear:both;text-align:center;height:20px"></div>
</div>
</body>
</html>

</xsl:template>
</xsl:stylesheet> 
```

基本上我要做的是导入“商店定位器”标题，以便它显示在图像上方，但目前在浏览器中打开时没有任何显示。我非常感谢一些帮助，因为我已经尝试了一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:30:19.500

在 XSLT 中要记住的最重要的事情之一是所有路径都将基于上下文。在您的示例中，上下文是`/`因为在您的模板中，您正在匹配`/`. 你不能直接从`/`到`titlename`。

尝试将您的更改`xsl:value-of`为：

```
<xsl:value-of select="storelocator/content_text/title/titlename"/> 
```

此外，XSLT 不会“导入”您的 XML。它正在改变它。如果您只是在浏览器中打开 XSLT，这是行不通的。要在打开 XML 时使转换在浏览器中工作，您必须添加指向 XSLT 的处理指令：

```
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<storelocator> 
...
</storelocator> 
```

# php - Zend Framework 2 和 SELECT count(*) 查询

> ID：13808605
> 
> 赞同：13
> 
> 时间：2012-12-10T20:23:34.940
> 
> 标签：php, zend-framework2

我正在尝试使用 Zend Framework 2 进行这样的查询：

```
SELECT count(*) as num FROM mytable 
```

这是我用来构建我的 select 语句的代码（请记住，我已经导入了必要的类）：

```
$select = new Select();
$select->from('mytable')
       ->columns(array('num'=>'count(*)'), false); 
```

此代码不起作用，因为结果查询如下：

```
SELECT [count(*)] AS [num] FROM [mytable] 
```

...引发以下错误：

```
Invalid column name 'count(*)' 
```

这是由 count(*) 周围的方括号引起的。我怎样才能让它正常工作，基本上是在 SQL 中有 count(*) 而不是 [count(*)] 。另外，我知道您可以只使用常规查询来完成，但我需要它来处理 Select 对象。据我所知，这曾经与以前版本的 Zend 一起工作，我已经看到了很多解决方案，但 Zend Framework 2 没有。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-10T22:13:23.167

另一个论坛上的某个人很友善地给了我这个答案。这是如何完成的：

```
$select->columns(array('num' => new \Zend\Db\Sql\Expression('COUNT(*)'))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T15:57:08.947

是的，没有`new \Zend\Db\Sql\Expression('COUNT(*)')`，只会`COUNT(*)`导致以下错误声明：

> SQLSTATE [42S22]：未找到列：1054 未知列“字段列表”中的“albs.COUNT(*)”

拥有

```
new \Zend\Db\Sql\Expression('COUNT(*)') 
```

解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T01:12:07.037

你能试试这个代码吗？

```
$this->num = $select->columns(array('num' => new \Zend\Db\Sql\Expression('COUNT(*)')));

return $this->num; 
```

# javascript - Javascript inner.HTML 不能与函数一起使用 - 创建可移动的 div

> ID：13808606
> 
> 赞同：2
> 
> 时间：2012-12-10T20:23:36.397
> 
> 标签：javascript, dom, html, drag-and-drop

我想从数据库中获取用户列表，在表格中显示他们的名字，当你点击一个名字时，一个特殊的 div 会显示他的详细信息，你可以移动这个 div 甚至关闭它。

这是如何编写代码的简短方案：

> `function openDiv(id){
> document.getElementById('divsHere').innerHTML +='<`div id="moveable'+id+'">`content`</div>`'}
> 
> ```
>  <?php database connection... while{ 
> ```
> 
> ...
> 
> ```
> <tr onclick='openDiv( ". $row['id'] ." )'>
> $script += 'Drag.init(document.getElementById("moveable'+ $row['id'] +'"));' 
> ```
> 
> ...
> 
> }?>
> 
> ```
> <div id="divsHere"></div> 
> ```
> 
> echo $script;`

 `我用过这个很棒的拖放库。 [http://www.dynamicdrive.com/dynamicindex11/domdrag/index.htm](http://www.dynamicdrive.com/dynamicindex11/domdrag/index.htm) （注意我对 jQuery 有同样的问题）

当 div 由 inner.HTML 添加时，似乎拖放功能不起作用。但是，我没有看到任何其他方式。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:36:20.433

问题是当您执行 Drag.init 时，您提供的 div 尚未创建。

我建议你在一个 php 循环中生成单独的 div，就像你为 th 标签所做的那样，删除你在 openDiv 开头的 innerHTML 的设置，它会起作用。

不过我不得不说，你想要的似乎是一个模态对话框，你可以在其他地方找到它已经制作并且易于使用。例如： http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)它会更容易使用，并且您可能会更喜欢最终结果。

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:18:55.770

尝试使用添加 div `document.createElement`：

```
var newDiv = document.createElement('div'), 
    textNode = document.createTextNode('content');
newDiv.id = "moveable" + id;
newDiv.appendChild(textNode);
document.getElementById('divsHere').appendChild(newDiv); 
```

并初始化拖动只需执行

```
Drag.init(newDiv); 
```

前提是您要初始化拖动的代码部分`newDiv`在其范围内。

（可能你想创建`div`并初始化在同一个地方拖动它的可能性。如果我理解你的方案是正确的，那么问题是它首先尝试初始化不存在的 div 上的拖动，然后只有当用户点击一行，调用函数`openDiv`，是那些div创建的。如果这是正确的，那么要修复它，你需要确保只有在div创建后才初始化拖动*。*）`

# wordpress - 在 Nivo 滑块中使用精选帖子

> ID：13808607
> 
> 赞同：0
> 
> 时间：2012-12-10T20:23:38.787
> 
> 标签：wordpress, nivo-slider

我遵循了以下教程：- [http://www.tutorialstag.com/wordpress-featured-posts-using-nivo-slider.html#codesyntax_1](http://www.tutorialstag.com/wordpress-featured-posts-using-nivo-slider.html#codesyntax_1)

使用特色帖子功能将 nivoslider 集成到我的主题中。然而，滑块似乎没有加载。JS 和 CSS 正在加载，但没有图像。

我已将帖子设置为特色图片，但再次没有运气。

请看下面我的函数文件：

```
<?php
if (!is_admin()) add_action("wp_enqueue_scripts", "my_jquery_enqueue", 11);
function my_jquery_enqueue() {
wp_deregister_script('jquery');
wp_register_script('jquery', "http" . ($_SERVER['SERVER_PORT'] == 443 ? "s" : "") . "://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js", false, null);
wp_enqueue_script('jquery');

wp_register_script( 'jquery-ui', get_template_directory_uri().'/js/jquery-ui.min.js', array('jquery'), true );
wp_enqueue_script( 'jquery-ui' );

wp_register_script( 'custom', get_template_directory_uri().'/js/custom.js', array('jquery-ui'), true );
wp_enqueue_script( 'custom' );

wp_register_script( 'superfish', get_template_directory_uri().'/js/superfish.js', array('jquery'), true );
wp_enqueue_script( 'superfish' );
}
?>
<?php register_nav_menu('main', 'Main navigation menu'); ?>
<?php
if ( function_exists('register_sidebar') )
register_sidebar(array(
'before_widget' => '',
'after_widget' => '',
'before_title' => '',
'after_title' => '',
));
if ( function_exists('register_sidebar') )
register_sidebar(array(
'name' => 'Footer',
'before_widget' => '',
'after_widget' => '',
'before_title' => '<center><h2>',
'after_title' => '</h2></center>',
));
register_sidebar(array(
'name' => 'Footer Widget 1',
'id'        => 'footer-1',
'description' => 'First footer widget area',
'before_widget' => '<div id="footer-widget1">',
'after_widget' => '</div>',
'before_title' => '<h2>',
'after_title' => '</h2>',
));
register_sidebar(array(
'name' => 'Footer Widget 2',
'id'        => 'footer-2',
'description' => 'Second footer widget area',
'before_widget' => '<div id="footer-widget2">',
'after_widget' => '</div>',
'before_title' => '<h2>',
'after_title' => '</h2>',
));
register_sidebar(array(
'name' => 'Footer Widget 3',
'id'        => 'footer-3',
'description' => 'Third footer widget area',
'before_widget' => '<div id="footer-widget3">',
'after_widget' => '</div>',
'before_title' => '<h2>',
'after_title' => '</h2>',
));
?>
<?php
/**
Wordpress Featured Posts with Nivo Slider
*
Author: Kannan C
url: http://www.tutorialstag.com/wordpress-featured-posts-using-nivo-slider.html
*/
//Paste the following code to your theme's functions.php file
//Don't forget to place the required Nivo slider files in to your theme's folder. Otherwise, the slider cannot work.
add_theme_support( 'post-thumbnails' );
if ( function_exists( 'add_image_size' ) ) {
add_image_size( 'sliding-images', 800, 400, true );
}   
//Featured posts using Nivo Slider
add_action("admin_init", "selection_meta_box");
function selection_meta_box(){
//add_meta_box("featured-post", "Set Featured", "featured_post", "post", "side", "low"); Uncomment this line and comment the below foreach loop if you want the Set Featured option only for posts
$post_types_array = get_post_types();
foreach ( $post_types_array as $post_type ) {
add_meta_box("featured-post", "Set Featured", "featured_post", $post-type, "side", "low");
}
}
function featured_post(){
global $post;
$meta_data = get_post_custom($post->ID);
$featured_post = $meta_data["_featured_post"][0];
$selected = ($meta_data["_featured_post"][0] == "yes") ? 'checked' : '';
echo "<p>";
echo "<input $selected type='checkbox' name='featured_post' value='yes' />";
echo "<label>Select this post as Featured.</label>";
echo "</p>";
}
add_action('save_post', 'save_post_details');
function save_post_details(){
global $post;
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) 
    return;
    $featured_post = trim($_POST["featured_post"]);
    update_post_meta($post->ID, "_featured_post", $featured_post);
}

function show_featured_posts($numbers) {
    global $post;
    //get $numbers of featured posts
    $featured_posts_array = get_posts( 'post_type=any&meta_key=_featured_post&meta_value=yes&numberposts='.$numbers.'&post_status=publish');
    $output .= '<div class="slider-wrapper theme-default">';
    $output .= '<div class="ribbon"></div>';
    $output .= '<div id="slider" class="nivoSlider">';
    foreach ($featured_posts_array as $post) :  setup_postdata($post); 
    $nivo_title = "#nivo".get_the_ID(); //assign the postID as title of the image
    if ( function_exists("has_post_thumbnail") && has_post_thumbnail() ) { 
    $output .= get_the_post_thumbnail(get_the_ID(), array(800,400), array( "class" => "post_thumbnail", 'title' => $nivo_title )); }
    $caption .= "<div id='nivo".get_the_ID()."' class='nivo-html-caption'>
            <h2><a href='".get_permalink()."'>".get_the_title()."</a></h2>
            ".get_the_excerpt()."
        </div>";
    endforeach;
    $output .= '</div>';
    $output .= $caption;
    $output .= '</div>';
    return $output;
    //reset WP query
    wp_reset_query();
}

function include_nivo_scripts() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js');
    wp_register_script( 'nivopack', get_bloginfo('template_directory').'/js/jquery.nivo.slider.pack.js');
    wp_enqueue_script( 'jquery' );
    wp_enqueue_script( 'nivopack' );
}    
add_theme_support( 'post-thumbnails' );
if ( function_exists( 'add_image_size' ) ) {
add_image_size( 'sliding-images', 800, 400, true );
}
add_action('wp_enqueue_scripts', 'include_nivo_scripts');

add_action('wp_print_styles', 'add_nivo_stylesheets');
function add_nivo_stylesheets() {
     wp_register_style('nivo_theme_style', get_bloginfo('template_directory').'/js/default.css');
     wp_register_style('nivo_main_style', get_bloginfo('template_directory').'/js/nivo-slider.css');
     wp_enqueue_style( 'nivo_theme_style');
     wp_enqueue_style( 'nivo_main_style');
}

add_action('wp_footer', 'nivo_functioncall');
function nivo_functioncall() {
    echo '<script type="text/javascript">
    $(window).load(function() {
    $("#slider").nivoSlider();
    });
    </script>';
}

function tg_featured_posts($atts, $content = null) {
    extract(shortcode_atts(array(
        "numbers" => '5'
    ), $atts));
    echo show_featured_posts($numbers);
}
add_shortcode('featured', 'tg_featured_posts');

?> 
```

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T08:24:07.153

由于我遇到了同样的问题，插件的 javascript 可能与其他插件的 javascript 冲突。您是否检查过控制台的 javascript 错误？

# actionscript-3 - 单击按钮删除子项

> ID：13808609
> 
> 赞同：2
> 
> 时间：2012-12-10T20:24:03.320
> 
> 标签：actionscript-3, removechild

我收到错误**1120 access of undefined property** on

```
knop_stop.addEventListener(MouseEvent.CLICK,stopVideos); 
```

我想要9个按钮，播放视频。当一个视频被触发时，会出现一个退出视频的按钮，因此当您按下另一个按钮时可以播放另一个视频。

```
import fl.video.*;
import flash.events.MouseEvent;

stop();

knop_1.addEventListener(MouseEvent.CLICK,speel1);
knop_2.addEventListener(MouseEvent.CLICK,speel2);
knop_3.addEventListener(MouseEvent.CLICK,speel3);
knop_4.addEventListener(MouseEvent.CLICK,speel4);
knop_5.addEventListener(MouseEvent.CLICK,speel5);
knop_6.addEventListener(MouseEvent.CLICK,speel6);
knop_7.addEventListener(MouseEvent.CLICK,speel7);
knop_8.addEventListener(MouseEvent.CLICK,speel8);
knop_9.addEventListener(MouseEvent.CLICK,speel9);

knop_stop.addEventListener(MouseEvent.CLICK,stopVideos);
knop_stop.visible=false;

var videoArray:Array = new Array(
    "video/video01.flv",
    "video/video02.flv",
    "video/video03.flv",
    "video/video04.flv",
    "video/video05.flv",
    "video/video06.flv",
    "video/video07.flv",
    "video/video08.flv",
    "video/video09.flv"
 );

var filmAan = false;

function speel1(evtObj:MouseEvent):void {
    trace("knop 1: video 1");
    if (filmAan == false) {
        var myVideo1:FLVPlayback = new FLVPlayback();
        myVideo1.source = videoArray[0];
        addChild(myVideo1);
        myVideo1.x=340; 
        myVideo1.y=227;
        myVideo1.width=1360;
        myVideo1.height=908;
        filmAan = true;
        knop_stop.visible=true;
        function stopVideos(evtObj:MouseEvent):void {
            removeChild(myVideo1);          
        }
    } else {
        knop_stop.visible = false;
    }

} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:12:01.230

如果您希望事件处理程序看到它，您需要将 stopVideos 函数放在 speel1 函数之外。当您将一个函数放在另一个函数中时，您将内部函数的范围限制为父函数。如果您希望 stopVidoes 函数对其他任何东西可见，请尝试以下操作：

```
function speel1(evtObj:MouseEvent):void {
    trace("knop 1: video 1");
    if (filmAan == false) {
        var myVideo1:FLVPlayback = new FLVPlayback();
        myVideo1.source = videoArray[0];
        addChild(myVideo1);
        myVideo1.x=340; 
        myVideo1.y=227;
        myVideo1.width=1360;
        myVideo1.height=908;
        filmAan = true;
        knop_stop.visible=true;
    } else {
        knop_stop.visible = false;
    }
}

function stopVideos(evtObj:MouseEvent):void {
        removeChild(myVideo1);          
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:08:55.400

将`stopVideos`函数放在函数体之外并在该函数之外`speel1`定义`myVideo1`：

```
var myVideo1:FLVPlayback = new FLVPlayback();
addChild(myVideo1);

function speel1(evtObj:MouseEvent):void {
    trace("knop 1: video 1");
    if (filmAan == false) {
        myVideo1.source = videoArray[0];
        myVideo1.x=340; 
        myVideo1.y=227;
        myVideo1.width=1360;
        myVideo1.height=908;
        filmAan = true;
        knop_stop.visible=true;

    } else {
        knop_stop.visible = false;
    }

}
function stopVideos(evtObj:MouseEvent):void {
            removeChild(myVideo1);          
        } 
```

# android - 即使任务由 AsyncTask 处理，主 UI 也会冻结

> ID：13808610
> 
> 赞同：4
> 
> 时间：2012-12-10T20:24:05.487
> 
> 标签：android, service, android-asynctask

我`Service`让它在后台运行，使用从互联网收集数据`AsyncTask`并将它们存储在`Shared Preferences`. 即使工作已经完成，`AsyncTask`它仍然冻结了我的主要活动。

这是服务的代码：

```
public class GetterService extends Service {

    SharedPreferences.Editor editor;
    HashMap<Integer,String> links = new HashMap<Integer,String>();

    @Override
    public void onCreate() {
        editor = PreferenceManager.getDefaultSharedPreferences(this).edit();
        populateLinks();
    }

    private void populateLinks(){
        // Here I add links to HashMap
    }

    @Override
    public IBinder onBind(Intent intent) {
        Toast.makeText(this, "GetterService ON BIND", Toast.LENGTH_LONG).show();
        return null;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "GetterService ON DESTROY", Toast.LENGTH_LONG).show();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        doTasks();

        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public boolean onUnbind(Intent intent) {
        Toast.makeText(this, "GetterService ON UNBIND", Toast.LENGTH_LONG).show();
        return super.onUnbind(intent);
    }

    private void doTasks(){
        for (Integer in : links.keySet()) {

            Document doc = null;

            try {
                doc = new NetTask().execute(links.get(in)).get();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (doc != null) {
                Elements names = doc.select("strong, li");

                if(names != null && names.size() > 0) {
                    for (int j = 0; j < names.size(); j++) {
                        editor.putString("header"+j, names.get(j).text().toString());
                    }
                }
                editor.commit();
            }
        }   
    }

    public class NetTask extends AsyncTask<String, Integer, Document>
    {
        @Override
        protected Document doInBackground(String... params)
        {
            Document doc = null;
            try {
                doc = Jsoup.connect(params[0]).timeout(5000).get();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return doc;
        }
    }
} 
```

这是我从主要活动启动服务的方式：

```
Intent startServiceIntent = new Intent(this, GetterService.class);
        this.startService(startServiceIntent); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T20:27:49.363

> 即使工作是在 AsyncTask 中完成的，它仍然会冻结我的主要活动。

您正在使用[`get()`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)：

```
doc = new NetTask().execute(links.get(in)).get(); 
```

并`get()`阻塞 UI 线程，直到 AsyncTask 完成，对我来说，这种方法违背了使用 AsyncTask 的目的......

* * *

你应该移动这个逻辑：

```
if (doc != null) {
    Elements names = doc.select("strong, li");

    if(names != null && names.size() > 0) {
        for (int j = 0; j < names.size(); j++) {
            editor.putString("header"+j, names.get(j).text().toString());
        }
    }
    editor.commit();
} 
```

在你`NetTask`的`onPostExecute()`方法里面并删除`get()`。现在您的 AsyncTask 不会绑定主线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T20:29:16.683

这是因为

```
new NetTask().execute(links.get(in)).get(); 
```

称呼。

AsyncTask.get() 阻塞，直到异步调用完成。要异步，您需要实现

```
onPostExecute() 
```

并在那里处理结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:37:51.410

不叫`get()`，就叫`execute()`。实现并重写`onPostExecute()`以将`Document`对象作为参数。`onPostExecute()`返回时自动调用`doInBackground()`。代码在`onPostExecute()`UI 线程上执行，因此您可以通过这种方式与 UI 交互。

我建议您查看本文档中的 AsyncTask 部分，[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)和 AsyncTask API 页面，[http://developer.android。 com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T10:04:59.737

我有类似的问题，并弄清楚发生了什么。这段代码不会冻结 UI，**但**如果你在**onProgressUpdate中放置****“for loop”**并**休眠**，那么 UI 将在此过程中被冻结。

 **```
public class Karaoke extends AsyncTask<Void, Integer, Void> {
    private Handler mHandler = new Handler(Looper.getMainLooper());
    protected Void doInBackground(Void... urls) {
        animating = true;
        {
            for (int i = 0;i < 6; i++)
            {
                publishProgress(i);
                try
                {
                    Thread.sleep(1000);
                    publishProgress(i);
                }
                catch (Exception xx){
                }
            }
        }
        animating = false;
        return null;
    }
    @Override
    protected void onProgressUpdate(Integer... values) {
        if (light)
        {
            light = false;
            iv_array[findview(egtxts[values[0]].getText() + "")].setImageResource(onpress);
        }
        else
        {
            light = true;
            iv_array[findview(egtxts[values[0]].getText() + "")].setImageResource(onup);
        }
    }

    protected void onPostExecute(Long result) {
        //showDialog("Downloaded " + result + " bytes");
    }
} 
```**

# c# - 当我尝试将数据从服务器发送到客户端时，什么也没发生

> ID：13808614
> 
> 赞同：-1
> 
> 时间：2012-12-10T20:24:29.730
> 
> 标签：c#, ajax, asp.net-mvc-3, signalr

当我尝试在发布模式下执行此操作但在调试模式下一切正常 - 为什么？

当我通过单击此按钮添加按钮并输出数据时。我的列表行中的内部链接也可以正常工作（[http://clip2net.com/s/2AG04](http://clip2net.com/s/2AG04)）。并且仅在**$(document).ready(function () {**事件这不想工作......

**在客户端我有：**

```
$(document).ready(function () {
    $.ajax({
        url: '@Url.Action("Index", "Product")',
        cache: false,
        type: 'GET',
        dataType: 'json',
        proccessData: false,
        contentType: 'application/json; charset=utf-8'
    }); 
```

**在服务器上我有这个：**

```
public ActionResult Index()
    {
        if (Request.IsAjaxRequest())
        {
            //Отправляем на клиент данные 
            _senderHub.SendMessage();
            return null;
        }
        return View();
    } 
```

**也在服务器上：（SignalR）**

```
readonly ManagerDB _managerDB = new ManagerDB();
    public void SendMessage()
    {
        IEnumerable<ProductModels> list = _managerDB.GetListOfProduct1();
        var listToClient = new List<ProductModels>();
        foreach (var prod in list)
        {
            listToClient.Add(new ProductModels
                                 {
                                     Id = prod.Id,
                                     Name = prod.Name,
                                     LockType = prod.LockType,
                                     LockTime = prod.LockTime,
                                     LockUser = prod.LockUser,
                                     TimeStampF = prod.TimeStampF
                                 });
        }
        var anonimProduct = listToClient;
        IHubContext context = GlobalHost.ConnectionManager.GetHubContext<SenderHub>();
        context.Clients.AddListRows(anonimProduct);
    } 
```

**在客户端（SignalR）尝试捕获此数据：**

```
$(function () {
    var senderHub = $.connection.senderHub;
    senderHub.AddListRows = function (data) {
        var dataFromServer = data;
        var listOfData = "";
        for (var i = 0; i < dataFromServer.length; i++) {
            $("#ListOfProductsTableBody").html(null);
            var userId = '';
            if (dataFromServer[i].LockUser != null) {
                userId = dataFromServer[i].LockUser;
            }
            listOfData += ("<tr><td>" + dataFromServer[i].Id + "</td><td>" + dataFromServer[i].Name + "</td><td>" + userId + "</td><td>" + dataFromServer[i].LockType + "</td>" + "<td id=\"ModifyBlock\"><a id=\"Detail\" href=\"#\" alt=" + dataFromServer[i].Id + " >Детально</a>|<a id=\"Delete\" href=\"#\" alt=" + dataFromServer[i].Id + " >Удалить</a>|<a id=\"Edit\" href=\"#\" class=\"" + dataFromServer[i].LockTime + "\" alt=" + dataFromServer[i].Id + " >Редактировать</a></td></td></tr>");
        }
        $("#ListOfProductsTableBody").append(listOfData);
    };
    $.connection.hub.start();
}); 
```

*强调文本*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:31:29.370

请参阅 David Fowler 对我的问题的回答。看起来你有同样的问题。

[ASP.NET MVC 4 中的 SignalR 未通过服务器到客户端的消息](https://stackoverflow.com/questions/13648605/server-to-client-messages-not-going-through-with-signalr-in-asp-net-mvc-4)

# http - 对 HTTP 规范中使用的实体的混淆

> ID：13808619
> 
> 赞同：1
> 
> 时间：2012-12-10T20:24:58.010
> 
> 标签：http, web, http-headers, webserver

我正在阅读 HTTP 规范，但我无法弄清楚“实体”到底是什么。我阅读了“[什么是 HTTP 实体](https://stackoverflow.com/questions/9197745/what-is-excactly-an-http-entity)”的答案，但我仍然感到困惑。

具体来说，我不明白规范在实体标头和响应/请求/通用标头之间的区别。例如，阅读[Header Field Definitions](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14)部分，诸如`Allow`、`Expires`和`Last-Modified`的标题被归类为“实体标题”。这实际上是什么意思？我猜它们适用于“实体主体”，但是实体主体和消息主体之间有什么区别？

对于实体以及它们在 HTTP 请求/响应中的位置，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:20:49.773

*message*是最通用的术语，指的是整个[HTTP 消息](https://www.rfc-editor.org/rfc/rfc2616#section-4)，包括*start-line*、*message-header*字段和*message-body*（可能为空）。

消息的[*实体*](https://www.rfc-editor.org/rfc/rfc2616#section-7)是要传输的有效负载。这可以与*message-body*相同，但如果对*entity*应用了传输编码，则通过解码任何传输编码从*message-body获得*[*entity-body 。*](https://www.rfc-editor.org/rfc/rfc2616#section-7.2)

 *这种传输编码的一个示例是[*分块*传输编码](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)，其中实体主体以块的形式传输，例如：

```
HTTP/1.0 OK 200
Transfer-Encoding: chunked

9
This is a
C
 chunked mess
4
age.
0
‍ 
```

这里的*消息体*是：

```
9
This is a
C
 chunked mess
4
age.
0
‍ 
```

但*实体主体*是具有解码*分块*编码的*消息主体：*

 *```
This is a chunked message. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T08:01:46.143

案例 1\. 您在 http 请求中上传 3 个文件。这 3 个文件是 3 个实体。他们每个人都有自己`Content-Type`的指示它是什么类型的文件。

案例 2\. 您正在查看一个网页。浏览器通过后台的 http 响应下载了一个 html 文件作为实体。该文件可能会不断更新。因此，您昨天获得的实体可能与您今天获得的不同。

案例 3\. 你有一个`304 Not Modified`. 没有实体被传送。

实体是 http 请求或响应中的可选负载。部分标题用于描述它。**

# c# - 在 C# 控制台中创建一个流阅读器，一次只读取一个学生，而不是使用 .txt 文件读取所有学生

> ID：13808623
> 
> 赞同：1
> 
> 时间：2012-12-10T20:25:18.287
> 
> 标签：c#, console, streamreader

```
class Program
{
    static string strFile = "Student Database.txt";

    static void Main(string[] args)
    {

        string strInput = null; // user input string

    start:
        System.IO.DirectoryInfo dir = new DirectoryInfo("student_results.txt");

        // Request user input as to actions to be carried out
        Console.WriteLine("\nWhat do you want to do?\n" +
            " 1.View Student(s)\n 2.Add a New Student\n 3.Exit program");
        // Save user input to make decision on program operation
        strInput = Console.ReadLine();

        // Switch statement checking the saved user input to decide the action
        // to be carried out
        switch (strInput)
        {
            case "1": // choice for view file
                Console.Clear();

                string file = AppDomain.CurrentDomain.BaseDirectory +
                    @"student_results.txt";
                StreamReader sr = new StreamReader(file);
                string wholeFile = sr.ReadToEnd();
                Console.Write(wholeFile + "");
                sr.Close();

                goto start;
            ...
        }
        ...
    }
    ...
} 
```

我希望我的这部分代码只是单独阅读学生并将他们转发给我，而不是当我按下“1）查看学生”时它只是将他们全部回叫给我几乎说“请输入您要查看的学生的学生姓名或身份证号”。我目前有一个随机数生成器运行的 ID 号。

谢谢你们的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:31:09.787

欢迎使用 SO，首先`goto`在 99% 的情况下在 C# 中不是一个好的选择，您最好使用循环。对于您的代码，我会将每个学生保存在一行中，并且在阅读学生时，我会逐行阅读它们，直到找到该学生。

```
class Program
{
    static string strFile = "Student Database.txt";
    static void Main(string[] args)
    {
        string strInput = ""; // user input string

        while (strInput != "3")
        {
            System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo("student_results.txt");
            Console.WriteLine("\nWhat do you want to do?\n 1.View Student(s)\n 2.Add a New Student\n 3.Exit program"); // request user input as to actions to be carried out
            strInput = Console.ReadLine(); //save user input to make decision on program operation

            switch (strInput)
            {
                case "1":
                    Console.Clear();
                    Console.WriteLine("Enter Student ID: \n");
                    string file = AppDomain.CurrentDomain.BaseDirectory + @"student_results.txt";
                    StreamReader sr = new StreamReader(file);
                    string StudentID = Console.ReadLine();
                    string line = "";
                    bool found = false;
                    while((line = sr.ReadLine()) != null)
                    {
                        if (line.Split(',')[0] == StudentID)
                        {
                            found = true;
                            Console.WriteLine(line);
                            break;
                        }
                    }
                    sr.Close();
                    if (!found)
                    {
                        Console.WriteLine("Not Found");
                    }
                    Console.WriteLine("Press a key to continue...");
                    Console.ReadLine();
                    break;
                case "2":
                    Console.WriteLine("Enter Student ID : ");
                    string SID = Console.ReadLine();
                    Console.WriteLine("Enter Student Name : ");
                    string SName = Console.ReadLine();
                    Console.WriteLine("Enter Student Average : ");
                    string average = Console.ReadLine();
                    string wLine = SID + "," +SName+":"+average;
                    file = AppDomain.CurrentDomain.BaseDirectory + @"student_results.txt";
                    StreamWriter sw = File.Exists(file) ? File.AppendText(file) : new StreamWriter(file);
                    sw.WriteLine(wLine);
                    sw.Close();
                    Console.WriteLine("Student saved on file, press a key to continue ...");
                    Console.ReadLine();
                    Console.Clear();
                    break;
                case "3":
                    return;
                default:
                    Console.Clear();
                    Console.WriteLine("Invalid Command!\n");
                    break;
            }
        }
    }
} 
```

这段代码可能不完整，我想给你一个想法，希望对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:59:00.560

 `````
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ReadStudents
{
    class Program
    {
        static string _filename = "students.txt";

        static void Main(string[] args)
        {
            List<Student> students = new List<Student>();

            // Load students.
            StreamReader reader = new StreamReader(_filename);
            while (!reader.EndOfStream)
                students.Add( new Student( reader.ReadLine()));
            reader.Close();

            string action; 
            bool showAgain = true;

            do
            {
                Console.WriteLine("");
                Console.WriteLine("1\. See all students.");
                Console.WriteLine("2\. See student by ID.");
                Console.WriteLine("3\. Add new student.");
                Console.WriteLine("0\. Exit.");
                Console.WriteLine("");

                action = Console.ReadLine();

                switch (action)
                {
                    case "1":
                        foreach (Student item in students)
                            item.Show();
                        break;

                    case "2":
                        Console.Write("ID = ");
                        int id = int.Parse( Console.ReadLine() ); // TODO: is valid int?

                        foreach (Student item in students)
                            if (item.Id == id)
                                item.Show();
                        break;

                    case "3":
                        Console.WriteLine("ID-Name");

                        Student newStudent = new Student(Console.ReadLine());
                        students.Add(newStudent);

                        StreamWriter writer = new StreamWriter(_filename, true);
                        writer.WriteLine(newStudent);
                        writer.Close();

                        break;

                    case "0":
                        Console.WriteLine("Bye!");
                        showAgain = false;

                        break;

                    default:
                        Console.WriteLine("Wrong action!");
                        break;

                }
            }
            while (showAgain);
        }
    }

    class Student
    {
        public int Id;
        public string Name;

        public Student(string line)
        {
            string[] fields = line.Split('-');

            Id = int.Parse(fields[0]);
            Name = fields[1];
        }

        public void Show()
        {
            Console.WriteLine(Id + ". " + Name);
        }
    }
} 
````  `我假设您的数据采用“ID-Name”格式，例如：

 `````
1-Alexander
2-Brian
3-Christian 
````  `我逐行加载文件并传递给 Student 类，该类将构造函数文本数据转换为更友好的形式。接下来，应用程序显示界面，直到用户写入“0”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:48:28.010

假设您没有处理大量的学生文件，并且基于您想要进行多个查询，我不会每次都逐行读取文本文件。

而是创建一个学生类，在初始化时读取文件一次，然后从数据中创建一个列表<学生>。然后就可以用 LinQ 查询了````

# ssis - 从starschema ETL 到数据仓库

> ID：13808624
> 
> 赞同：-1
> 
> 时间：2012-12-10T20:25:19.517
> 
> 标签：ssis, data-warehouse, dimensions, star-schema, fact-table

我们正忙于学校的一个项目。我们必须建立一个数据仓库，但我卡住了。

**我有以下starschema：**

昏暗位置：

Location_key（主键）

城市

**暗淡条件：**

Condition_key(主键)

描述（例如：好、差、非常差、非常好等）

**昏暗时间：**

时间键

年

日期

四分之一

等等

**事实表地面：**

Time_Key(外)

Location_Key（国外）

Condition_Key(外文)

位置维度应该是一个包含各种位置的表格。条件维度应该是一个包含好、坏、不太坏、非常好等条件的表格。时间维度应该是一个包含所有日期、季度等的表格。

我应该知道的是：“我想知道在某个日期的某个地点，地面有某种状况”

示例：1 月 20 日星期一，阿姆斯特丹的地面状况不佳。

我有一些我应该用来填充这些维度和事实的转储。但我不知道最好的方法是什么，以及如何填写事实表。我已经在 SSIS 中填写了维度，效果很好，但我无法填写事实表。（尝试过：多次查找、合并、合并连接）有人可以分步告诉我我应该如何制作数据仓库并填写它（最好的方法)?

对不起，我的英语不好。

非常感谢帮助。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:37:55.270

最简单的开始方法是完全刷新 - 这样您的设计就可以快速适应。因此，从执行 SQL 任务开始截断您的目标表。然后添加一个数据流任务来重新加载您的事实表。从源（通常是 OLE DB）开始。添加查找（通常是完整缓存）以获取您的维度键，每个维度一个。完成一个目标（通常是 OLE DB，具有快速加载和表锁定）以插入数据。

随着您的打包成熟，您可以添加增量提取和禁用/重建索引等功能。

祝你好运！

# javascript - 如何在模糊时自动隐藏 YUI2 菜单？

> ID：13808625
> 
> 赞同：0
> 
> 时间：2012-12-10T20:25:22.707
> 
> 标签：javascript, yui, yui2

我有一个`YAHOO.widget.Button`“菜单”类型。我的任务很简单：当用户点击按钮时菜单会显示，当用户点击屏幕上的其他地方时菜单会隐藏。

这是我在 jsfiddle 上的代码：http: [//jsfiddle.net/tRssn/](http://jsfiddle.net/tRssn/)

到目前为止我已经尝试过： 1\. 将`clicktohide`Menu 小部件的属性设置为 true （参见上面的代码）和 2\. 订阅 Button/Menu 小部件上的 blur 事件并在菜单可见时关闭它。

方法 1 由于某种原因不起作用，方法 2 适用于 IE 和 Mozilla，但不适用于 Chrome。

不应该有一个简单的方法来做到这一点吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:54:09.067

好的，我能够通过显式创建一个 YAHOO.widget.Menu 对象，渲染它，然后将它作为菜单分配给 YAHOO.widget.Button 对象来解决这个问题。

[http://jsfiddle.net/tRssn/1/](http://jsfiddle.net/tRssn/1/)

奇怪的是，我必须像这样设置菜单小部件的配置，而不是在创建时： `oButton.getMenu().cfg.config.clicktohide.value = true;`

# opengl - 翻译帧缓冲区

> ID：13808627
> 
> 赞同：0
> 
> 时间：2012-12-10T20:25:29.963
> 
> 标签：opengl, drawing, 2d, fbo, tiles-game

我在屏幕上绘制瓷砖地图，并在 FBO 中绘制每个瓷砖灯（灰度）。都是四边形。

我将视图存储在 Rect 中。要移动，我改变 de Rect，然后我这样做......

```
glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(getViewRect().left, 
            getViewRect().left + getViewRect().width,
            getViewRect().top + getViewRect().height, 
            getViewRect().top, 
            -1, 
            1);
glMatrixMode(GL_MODELVIEW); 
```

我只在矩形内绘制瓷砖。

问题是FBO。我必须绘制相同的瓷砖（瓷砖的灯），这是可见的。

我想知道是否有更好的方法，使用瓷砖的偏移量将相同的瓷砖绘制到 fbo，在不完全可见时在边界上绘制一个较小的四边形，并更改 texcoord，因为当我在 FBO 之外绘制时, 它画在对面。

我使用 FBO，因为我将着色器应用于灯光。

如果我不移动视图，它会完美运行，但如果我移动，我不知道如何在 FBO 上绘图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:28:07.507

您应该能够使用[glScissor](http://www.opengl.org/sdk/docs/man/xhtml/glScissor.xml)来限制 FBO 中的所有绘图。每次绑定后调用 glBindBuffer(...) 后执行此操作。

希望这可以帮助！

# regex - VB.Net 删除第三个连字符后的所有内容

> ID：13808629
> 
> 赞同：4
> 
> 时间：2012-12-10T20:25:29.837
> 
> 标签：regex, vb.net, hyphen

这是我要修改的字符串： **170-0175-00B** -BEARING PLATE MACHINING.asm:2

我想保留“ **170-0175-00B** ”。所以我需要删除第三个连字符以及它之后的任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:34:09.393

快速解决方案

```
string test = "170-0175-00B-BEARING PLATE MACHINING.asm:2";
int num = 2;
int index = test.IndexOf('-');
while(index > 0 && num > 0)
{
    index = test.IndexOf('-', index+1);
    num--;
}
if(index > 0)
    test = test.Substring(0, index); 
```

当然，如果您正在搜索最后一个连字符，那么执行起来更简单

```
int index = test.LastIndexOf('-');
if(index > 0)
    test = test.Substring(0, index); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T15:38:36.230

一些LINQ呢？

```
Dim str As String = "170-0175-00B-BEARING PLATE MACHINING.asm:2"
MsgBox(String.Join("-"c, str.Split("-"c).Take(3))) 
```

使用这种方法，您可以在第 N 个连字符之后取出任何内容，其中 N 很容易控制（一个 const）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T20:35:11.513

像这样的东西？

```
regex.Replace(sourcestring,"^((?:[^-]*-){2}[^-]*).*","$1",RegexOptions.Singleline)) 
```

不过，您可能不需要 Singleline 选项，具体取决于您如何使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T13:15:38.687

非常感谢这么快的回复。

这是我采取的路径：

```
FormatDessinName("170-0175-00B-BEARING PLATE MACHINING.asm:2")

Private Function FormatDessinName(DessinName As String)
    Dim match As Match = Regex.Match(DessinName, "[0-9]{3}-[0-9]{4}-[0-9]{2}[A-Za-z]([0-9]+)?") 'Matches 000-0000-00A(optional numbers after the last letter)
    Dim formattedName As String = ""

    If match.Success Then 'Returns true or false
        formattedName = match.Value 'Returns the actual matched value
    End If

    Return formattedName
End Function 
```

效果很好！

# java - Request.getAttribute("javax.servlet.request.X509Certificate") 返回 Null

> ID：13808630
> 
> 赞同：5
> 
> 时间：2012-12-10T20:25:45.310
> 
> 标签：java, tomcat, ssl, client, certificate

我有一个 Request.getAttribute("javax.servlet.request.X509Certificate") 在客户端证书身份验证期间为某些用户返回 NULL 并为其他用户返回有效证书的问题。对于失败的用户，如果我们删除并重建他们的 Windows 用户配置文件，问题就会得到解决。这个问题有一个解决方法，但我希望避免让我们的用户重建他们的 Windows 帐户配置文件。IE 或 ActivIdentity 中是否存在可能导致 IE 不发送客户端证书的特定设置？我们在带有 Tomcat 6 的 Windows 7 上使用 IE8 和 ActivIdentity 6.1。

谢谢。

三

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:00:36.147

您的客户端必须配置 ActivClient 以使其证书可用于 Windows。工具**| 高级 | 使证书可用于 Windows**菜单项将执行此操作。

# jquery-mobile - 对话框上的关闭按钮返回错误页面

> ID：13808631
> 
> 赞同：1
> 
> 时间：2012-12-10T20:25:47.713
> 
> 标签：jquery-mobile, dialog, knockout.js

这是一个非常简单的小提琴：

[http://jsfiddle.net/mmSKj/](http://jsfiddle.net/mmSKj/)

如果单击标题栏中的“预设”按钮，则会打开一个对话框。如果您单击对话框上的“关闭”按钮，而不是返回它来自的页面，它会转到页面上的最后一页（不包括对话框本身）（包含内容的页面`This is another page`）。怎么来的？有没有办法修复自动插入的后退按钮，使其行为正常（就像我在对话框中包含的“主页”按钮），或者如果失败了，有没有办法删除关闭按钮。

```
<div data-role="page" id="index">
    <header data-role="header">
    <h1>Index</h1>
    <a href="#presets" data-icon="star" class="ui-btn-right" data-transition="pop" data-rel="dialog">Presets</a>
    </header>
    <article data-role="content">
        <div>This is the main page</div>
    </article>
</div>
<div data-role="page">
    This is another page
</div>
<div data-role="page" id="presets">
    <header data-role="header">
        <h1>Presets</h1>
        <a href="#index" data-icon="home" data-iconpos="notext"></a>
    </header>
    <div data-role="content">
        This is a dialog!
    </div>
</div> 
```

**更新**

正如 Taifun 所指出的，问题在于页面上缺少 id。添加一个 id 修复了我的第一个小提琴。但是，我的实际情况稍微复杂一些，如下图所示：

[http://jsfiddle.net/mmSKj/2/](http://jsfiddle.net/mmSKj/2/)

在这里，我实际上是使用敲除动态创建页面，并通过数据绑定为这些页面分配 ID，但是，jQuery Mobile 似乎由于某种原因无法识别这些 ID。如果您查看 Firebug，您可以看到 id 已正确添加到页面的属性中，但是当您关闭对话框时，您最终会进入第 3 页而不是原始页面。

**更新 2**

简单的修复，我只是在敲除将用作模板的 html 位中添加了一个虚拟 id：

```
<!-- ko foreach: pages -->
<div data-role="page" data-bind="attr: {id: name}" id="dummy">
    This is <span data-bind="text:name"></span>
</div>
<!-- /ko --> 
```

见[这里](http://jsfiddle.net/mmSKj/4/)。

虚拟 id 被淘汰赛取代，因此指向该页面的链接可以正常工作，并且 jQuery mobile 似乎很高兴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:46:41.113

添加`id`到您的其他页面

```
<div data-role="page" id="anotherpage">
    This is another page
</div> 
```

然后它将起作用，请参阅[jsfiddle](http://jsfiddle.net/mmSKj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:21:44.010

回到另一个解决方案，因为您提到：**有没有办法删除关闭按钮？**是的，只需添加此样式，另请参阅[此答案](https://stackoverflow.com/a/12467701/1545993)...

```
 <style>
   .ui-dialog .ui-header a[data-icon=delete] {
     display: none;
   }
 </style> 
```

和另一个[jsfiddle](http://jsfiddle.net/mmSKj/3/)来证明

# javascript - 在 JSON 对象中创建属性的变量名称

> ID：13808633
> 
> 赞同：1
> 
> 时间：2012-12-10T20:25:55.813
> 
> 标签：javascript, json, javascript-objects

我正在运行这段代码。

```
var output = {"records": []};
for(i = 0; i < data.length; i++)
  output.records[i] = { propertyName : data[i][propertyName] } 
```

我预计输出将采用以下形式。

```
{ "cat" : "mjau" }
{ "dog" : "woff" } 
```

相反，我对此感到惊讶。

```
{ "propertyName" : "mjau" }
{ "propertyName" : "woff" } 
```

如何获取变量*propertyName*？

我正在尝试创建一个解析器，它将创建许多记录，这些记录都是*cat*但是，当从其他地方调用时，这些记录应该具有*dog*属性。我希望避免为此创建两个不同的代码段。

我发现[了这个问题](https://stackoverflow.com/questions/12979335/creating-json-object-with-variables)，**我怀疑**它包含了我的问题的答案。但是，由于无知，我不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:28:56.743

对象字面量中的键不会在 JavaScript 中求值。因此，您需要创建一个空对象 ( `{}`)，然后动态分配密钥：

```
output.records[i] = {};
output.records[i][propertyName] = data[i][propertyName] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:28:49.540

```
var a = {b:'c'} 
```

就像

```
var a = {};
a['b'] = 'c'; 
```

你想要的是

```
a[b] = c 
```

那是

```
output.records[i] = {};
output.records[i][propertyName] = data[i][propertyName]; 
```

您在这个 MDN 文档中有：[使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:30:32.627

在`{ propertyName : data[i][propertyName] }`属性名称部分应该是常量字符串。如果你传递一个变量，它不会获取它的值。

你要做的是

```
for(i = 0; i < data.length; i++){
  var a = {};
  a[propertyName] = data[i][propertyName];
  output.records.push(a);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T20:29:18.777

你可以试试这个：

```
'"' + propertyName + '"' : ... 
```

# javascript - 选择一个文本并突出显示它是永久的并且可以自由绘制任何东西

> ID：13808634
> 
> 赞同：-3
> 
> 时间：2012-12-10T20:25:57.040
> 
> 标签：javascript, html, css

我有一个带有文本的 div，当我选择（从一个字母到另一个字母的鼠标悬停）要与背景和下划线同时突出显示的特定文本片段时，我想要。

另外我想用指针在 div 中绘制随机的东西，就像在油漆中一样。

关于如何实现这一目标的任何想法？至少对于第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:33:11.193

试着理解下面的例子

文字 文字

这部分在 css 中

# 一

{颜色：//定义颜色}

# 一：悬停

{ color://定义高亮颜色}

# objective-c - self = [super init] 的内存/指针行为

> ID：13808637
> 
> 赞同：0
> 
> 时间：2012-12-10T20:26:10.087
> 
> 标签：objective-c, pointers, memory-management, self

请原谅：我是初学者。我正在查看另一个问题/答案，并遇到了以下代码：

```
SpinningView *spinner = [[SpinningView alloc] initWithFrame:CGRectMake(0.0, 0.0, 20.0, 20.0)] 
```

// 现在我们来看看 SpinningView 的 -initWithFrame: 方法的实现

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if (self)
    {
        self.backgroundColor = [UIColor clearColor];
    }

    return self;
} 
```

我相信，在第二段代码中，self 指向了消息被发送到的导致遇到“self”的实例，即[Spin​​ningView alloc] 的结果。（或者这不会产生一个实例？）

那么，当你在第 4 行代码调用 self = [super initWithFrame:frame] 时，你是不是重新分配了与“spinner”关联的指针值？即，你没有放弃你在第一行分配的内存吗？还是有人知道编译器只是复制内存值而不是更改指针值？或者是什么？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:28:42.033

`-init`这是obj-c 对象方法的标准习语。这个想法是，无论分配什么都`+alloc`无关紧要，`-init`重要的是返回什么。现在，*通常*`-init`只会使用. 但这不是必需的。释放该对象并创建一个新对象是自由的。经典的例子是当你分配/初始化一个你实际上并没有得到一个实例时，你得到了一个具体的子类。这是因为是一个“类集群”。因此，当您调用时，您会返回一个，但是当您调用它时，会释放该对象并重新分配其子类之一的对象，初始化该新对象，然后将其交还给您。*`self``NSString*``NSString*``NSString*``+alloc``NSString*``-init`*

 *另一个例子是，如果你有一个试图记忆自己的类。假设您有一个用数字初始化的不可变类。您可以更改您的`-init`以重用该类的现有实例。这是一个示例（注意：不是线程安全的）：

```
static NSDictionary *numberCache;

@interface MyNumber : NSObject
@property (readonly) int number;
- (id)initWithInt:(int)i;
@end

@implementation MyNumber
+ (void)initialize {
    if (self == [MyNumber class]) {
        numberCache = [[NSDictionary alloc] init];
    }
}

- (id)initWithInt:(int)i {
    // find ourself in the numberCache
    NSValue *val = [numberCache objectForKey:@(i)];
    if (val) {
        // yep, we exist. Release the just-allocated object
        [self release];
        // and retain the memoized object and stuff it back in self
        self = [[val nonretainedObjectValue] retain];
    } else if ((self = [super init])) {
        // nope, doesn't exist yet. Initialize ourself
        _number = i;
        // and stuff us into the cache
        val = [NSValue valueWithNonretainedObject:self];
        [numberCache setObject:val forKey:@(i)];
    }
    return self;
}

- (void)dealloc {
    // remove us from the cache
    [numberCache removeObjectForKey:@(_number)];
    [super dealloc];
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:17:59.010

@KevinBallard 涵盖了大部分要点。我们需要 的原因`self =`是因为`init`不能保证返回调用它的相同对象（它可能返回不同的对象或`nil`）。我将回答您的问题并扩展内存管理方面：

> 我相信，在第二段代码中，self 指向了消息被发送到的导致遇到“self”的实例，即[Spin​​ningView alloc] 的结果。

是的

> 那么，当你在第 4 行代码调用 self = [super initWithFrame:frame] 时，你是不是重新分配了与“spinner”关联的指针值？

是的。不`spinner`（`spinner`无论如何此时都不存在）。您正在方法内重新分配指针变量`self`。

> 即，你没有放弃你在第一行分配的内存吗？还是有人知道编译器只是复制内存值而不是更改指针值？或者是什么？？

是的。在 MRC 下，您只是重新分配指针，编译器除了更改指针值之外什么也不做。在 ARC 下，它更复杂，但归根结底，在这种情况下，编译器只是在 MRC 下做同样的事情，即只是重新分配指针。

如果你仔细想想，这并不是真的“放弃”记忆。您会看到，按照惯例，`init`方法拥有（“使用”）一个已保留的对象，它们被调用（通常是调用的返回结果`alloc`），并且它们返回一个保留的对象。但这两个不必是同一个对象。因此，当您的`init`方法被调用时，它`self`已经被保留，并且该`init`方法拥有它，但随后它调用`[super init...]`，它调用超类的`init`方法 on `self`，因此该方法现在*拥有*`self`您拥有的`init`所有权。作为回报，该超类`init`返回给您一个保留的实例，您将其分配给`self`. 你没有“放弃”`self`因为你把它交给了超类的`init`方法，而后者又负责管理它的内存（包括如果它想返回其他东西就释放它）。*

# linux - 在 nasm 中请求 sys_fork 的示例

> ID：13808640
> 
> 赞同：1
> 
> 时间：2012-12-10T20:26:32.593
> 
> 标签：linux, assembly, nasm

我正在尝试运行 bzip 并让它从 nasm 编码的汇编程序（在 linux 下）内部将控制权返回给调用函数。我显然需要结合使用 sys_fork 和 sys_execve 系统调用来实现这一点。经过大量搜索，我找到了如何使用 sys_execve 的示例，但是我找不到如何使用 sys_fork 的示例。对我的请求的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:12:26.753

我的经验有限，但我记得`sys_fork`很容易。“就这样做” - 没有参数。此时，您“同时在两个地方”。如果`eax`是零，你就是孩子——`sys_execve`在 bzip 上做。如果`eax`是非零（非负！），你是父母，`eax`是你的PID。`sys_waitpid`在那个PID上做一个。我记得，这会返回 bzip 向左移动 8 个字节的退出状态——`sys_execve`它本身永远不会返回。

我有一个运行编辑器、nasm 和 ld 的粗略示例（都在硬编码的“hello.asm”上）。发布时间很长，但如果您需要，我可以通过某种方式提供。`sys_execve`我记得，我发现最难的部分是正确的参数。

# internet-explorer - @font-face 特殊字符在 Chrome 中可见，但在 FF 或 IE 中不可见

> ID：13808644
> 
> 赞同：0
> 
> 时间：2012-12-10T20:26:49.200
> 
> 标签：internet-explorer, google-chrome, firefox, fonts, font-face

我有一个使用两种网络字体的 WordPress 网站：[Acknowledgement](http://www.fontsquirrel.com/fonts/Acknowledgement)和[Old Mill Sorts Goudy](http://www.fontsquirrel.com/fonts/Sorts-Mill-Goudy)。正如您在 Font Squirrel 提供的字符映射表中看到的那样，两种字体都包含许多标准特殊字符（对于本网站来说尤其重要的是 E-accent-acute。

两种字体的特殊字符在 Chrome 中都可以很好地呈现，但在 FF 和 IE 中只能呈现为默认字体。我的字符编码设置为 UTF-8。我尝试将编码切换为拉丁语 1，这使得特殊字符完全丢失。

编辑：我的 font-face css 调用的结构类似于这个[CSS Tricks 示例中的那些](http://css-tricks.com/snippets/css/using-font-face/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:21:48.813

好的，事实证明上述字体中缺少的特殊字符是由于默认的 FontSquirrel @font-face 套件没有包含字体打印版本附带的所有特殊字符。您必须通过上传打印字体重新打包（一些）Font Squirrel 网络字体，然后在修改专家设置以包含某些实体后重新下载您的自定义 @font-face 工具包。

TL;DR 在某些浏览器中缺少 FontSquirrel 网络字体的特殊字符？创建您自己的定制字体套件。

# c# - 为 VB 生成代码并在 C# 项目中进行调试

> ID：13808645
> 
> 赞同：-2
> 
> 时间：2012-12-10T20:26:53.373
> 
> 标签：c#, vb.net, code-generation

在 C#-Project 中生成一个 VB 文件，然后在分离的线程中编译该文件并使其成为有用的工作:)。我不仅想生成这个文件，而且想把这个文件加载到调试器并开始调试（如果定义了 DEBUG）。是否可以在 C# 项目中调试 VB 文件？我找到了用于 VB 文件格式的 T4 模板，但我不确定这些模板是否可以帮助我调试文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:42:11.360

英语显然不是你的第一语言，我你所说的没有多大意义。但是我想我对您要完成的工作有一个粗略的了解。

可以在 Visual Studio 中并排运行 C# 和 VB.Net 项目。

1.  打开您的 C# 解决方案
2.  从“文件”菜单中选择“添加...”>“现有解决方案”
3.  选择您的 VB 解决方案
4.  在解决方案资源管理器窗格中，右键单击要作为启动解决方案的任何解决方案，然后选择“设置为启动项目”

您现在应该能够在任一项目中放置断点并轻松调试它们。

希望有帮助！

# python - Python - 如何以结束线程的方式结束函数（即，将 threading.activeCount() 减 1）？

> ID：13808650
> 
> 赞同：0
> 
> 时间：2012-12-10T20:27:34.657
> 
> 标签：python, multithreading

我刚刚开始尝试使用线程作为一次下载多个文件的方式。我的实现使用thread.start_new_thread()。

我想一次下载 10 个文件，然后等待所有 10 个文件完成下载，然后再开始下 10 个文件。在我下面的代码中，threading.activeCount() 永远不会减少，即使 download() 以 exit()、sys.exit() 或 return 结束。

我的解决方法是引入 downloadsRemaining 计数器，但现在活动线程的数量不断增加。在下面的示例程序结束时，将有 500 个活动线程，我一次只需要 10 个。

```
import urllib
import thread
import threading
import sys

def download(source, destination):

    global threadlock, downloadsRemaining

    audioSource = urllib.urlopen(source)
    output = open(destination, "wb")
    output.write(audioSource.read())
    audioSource.close()
    output.close()

    threadlock.acquire()
    downloadsRemaining = downloadsRemaining - 1
    threadlock.release()

    #exit()
    #sys.exit()    None of these 3 commands decreases threading.activeCount()
    #return

for i in range(50):
    downloadsRemaining = 10
    threadlock = thread.allocate_lock()

    for j in range(10):
        thread.start_new_thread(download, (sourceList[i][j], destinationList[i][j]))

    #while threading.activeCount() > 0:  <<<I really want to use this line rather than the next
    while downloadsRemaining > 0:
        print "NUMBER ACTIVE THREADS:  " + str(threading.activeCount())
        time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:31:18.270

根据[文档](http://docs.python.org/2/library/thread.html#thread.start_new_thread)：

> 启动一个新线程并返回其标识符。线程使用参数列表 args（必须是元组）执行函数函数。可选的 kwargs 参数指定关键字参数的字典。**当函数返回时，线程静默退出。**当函数因未处理的异常而终止时，将打印堆栈跟踪，然后线程退出（但其他线程继续运行）。

（强调补充。）

所以当函数返回时线程应该退出。

# java - 字符串的 Java 不变性，带有“+=”运算符

> ID：13808651
> 
> 赞同：3
> 
> 时间：2012-12-10T20:27:35.973
> 
> 标签：java, string, immutability

在 Java 中有[很多](https://stackoverflow.com/questions/1552301/immutability-of-strings-in-java)关于字符串不变性的[问题](https://stackoverflow.com/questions/7494654/strings-immutability)，问题的作者实际上重新分配了参考。

然而，有一个值得注意的情况，似乎没有重新分配字符串：

```
String s = "hello";
s += " world"; 
```

您将其视为对字符串的实际修改。在家里试试。

我很确定这是某种语法糖，并被编译器翻译成具有与以下相同语义的东西：

```
String s = "hello";
s = s + " world"; 
```

有人可以证实这个事实吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T20:29:23.010

错误的。

`x += y`只是`x = x + y`.
它仍然是一个常规的赋值操作，它不会修改任何现有的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T20:47:00.613

它是一个新对象，原始对象不会被修改；

这个：

```
public static void main(String[] args) {

    String s = "hello";
    s += " world";
    System.out.println(s);

} 
```

翻译成这样：

```
public static void main(java.lang.String[]);
    Code:
        0: ldc           #2                  // String hello
        2: astore_1
        3: new           #3                  // class java/lang/StringBuilder
        6: dup
        7: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
        10: aload_1
        11: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        14: ldc           #6                  // String  world
        16: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        19: invokevirtual #7                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
        22: astore_1
        23: getstatic     #8                  // Field java/lang/System.out:Ljava/io/PrintStream;
        26: aload_1
        27: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        30: return
} 
```

这会创建两个`String`s 并将它们添加到一个新`String`对象中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T20:36:07.860

我既不能确认也不能否认。如果优化编译器可以向自己证明没有其他线程可以“看到” `+=`s 的初始（pre-）值，那么它将可以自由地优化连接并将代码编译为等价于

```
String s = "hello world"; 
```

编译器对于它们如何从源代码转换为字节码有很大的自由度，只要它们遵循内存模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T20:59:38.800

为无法阅读 Java 字节码的人扩展 skynorth 的答案，给出以下源代码：

```
public static void main(String... args) {
    String s = "hello";
    s += "world";
} 
```

在编译的类文件上运行[JAD 反编译器](http://www.varaneckas.com/jad/)时，您会得到以下 Java 代码：

```
public static void main(String args[]) {
    String s = "hello";
    s = (new StringBuilder(String.valueOf(s))).append("world").toString();
} 
```

这是不言自明的，并且与 skynort 发布的字节码完全对应。

# internet-explorer-8 - 颜色框和内联 html 未在 IE8 中显示

> ID：13808652
> 
> 赞同：1
> 
> 时间：2012-12-10T20:27:37.923
> 
> 标签：internet-explorer-8, colorbox

我在 ColorBox 中调用内联 html，它在 IE8 中没有显示任何内容。这可以在 Jack Moores 自己的网站上复制。只需转到演示站点[http://www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)，然后单击倒数第二个链接“内联 HTML”。然后单击底部链接以更新内容...在 IE8 中，该框不显示任何内容。

我遇到了同样的问题，但我正在动态创建 div 集合，如下所示。它用于复选框确认。有什么建议么？

```
 $('input[name$=chkApproved]').click(function (e) {
            var th = $(this);
            if (th.is(':checked')) {
                var dialog = '<div">'
                + '<div id="dialog">'
                + '<p style="margin-top: 30px;">'
                + 'Are you sure you want to approve this program?</p>'
                + '<p style="font-size: small;">'
                + '<strong>Note:</strong> This cannot be undone!</p>'
                + '<p style="text-align: center;">'
                + '<a href="#" onclick="javascript:parent.$.colorbox.close();" class="btn btn-small btn-primary">Approve</a>'
                + '&nbsp;&nbsp;&nbsp;&nbsp;'
                + '<a href="#" onclick="' + $(this).attr('id') + '.checked=false;parent.$.colorbox.close(); return false;" class="btn btn-small">Cancel</a>'
                + '</p></div></div>';

                $.colorbox(
                {
                    onLoad: function() {
                        $("#cboxClose").remove();
                    },
                    overlayClose: false,
                    href: dialog,
                    open: true,
                    title: "Program Approval",
                    inline: true,
                    height: "210px",
                    onClosed: function () {
                        $("[id$=btnHiddenApprove]").click();
                    }
                });
                e.stopPropagation();
            } else {

                th.attr('checked', false);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:09:32.480

我页面上的问题是链接断开。刚刚修好了，应该问题不大。这不是 IE8 特有的，我对 IE8 没有任何问题。

`<div>`我看到您发布的唯一问题是您在开始元素中有一个杂散的引号。我在 IE8 中检查了您的内容，这确实是问题所在：

这：

```
var dialog = '<div">' 
```

应该是这样的：

```
var dialog = '<div>' 
```

杂散的引号使您的标记格式不正确，这取决于浏览器他们希望如何响应或从错误中恢复，从而导致非常不一致的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:21:55.740

这是有兴趣的人的修订代码....此代码将在复选框上显示确认，如果选择取消，则取消选中它。onClosed 事件触发隐藏按钮单击事件，该事件通过 gridview 并设置任何选中的复选框。

```
function UnCheckBox(cb) {
        //alert(cb);
        $('#' + cb + '').removeAttr('checked');
    }
    $(document).ready(function () {

        $('input[name$=chkApproved]').click(function (e) {
            var th = $(this);
            if (th.is(':checked')) {
                var dialog = '<div>'
                + '<div id="dialog">'
                + '<p style="margin-top: 30px;">'
                + 'Are you sure you want to approve this program?</p>'
                + '<p style="font-size: small;">'
                + '<strong>Note:</strong> This cannot be undone!</p>'
                + '<p style="text-align: center;">'
                + '<a href="#" onclick="javascript:parent.$.colorbox.close();" class="btn btn-small btn-primary">Approve</a>'
                + '&nbsp;&nbsp;&nbsp;&nbsp;'
                + '<a href="#" onclick="UnCheckBox(\'' + $(this).attr('id') + '\'); parent.$.colorbox.close(); return false;" class="btn btn-small">Cancel</a>'
                + '</p></div></div>';

                $.colorbox(
                {
                    onLoad: function() {
                        $("#cboxClose").remove();
                    },
                    href: dialog,
                    open: true,
                    title: "Program Approval",
                    inline: true,
                    height: "210px",
                    onClosed: function () {
                        $("[id$=btnHiddenApprove]").click();
                    }
                });
                e.stopPropagation();
            } else {

                th.attr('checked', false);

            }
        }); 
```

# html - div内的CSS对象定位

> ID：13808653
> 
> 赞同：0
> 
> 时间：2012-12-10T20:27:39.240
> 
> 标签：html, css

我有一个 div，里面有一些对象。我的左右两边都有物品。左边好像没问题。右侧我有两个需要与右上角对齐的对象。当我得到 mybelmont-icon.png 太靠近它开始垂直拉伸菜单。关于如何解决这个问题的任何想法？

```
<div id="outer">
    <div id="inner">
        <img src="images/belmont-logo.png" align="left">
        <img src="images/dot-divider.png" align="left">
        <img src="images/prospective-students.png" align="left">
        <div class="quicklinks" align="right">
            <div style="margin-left:500px; float:left;"><img src="images/mybelmont-icon.png"></div>
            <ul class="menu">
                <li class="menu-item">
                    <b>Quick Links >></b>
                    <ul class="sub-menu clearfix">
                        <li class="menu-item">
                            <b><u>Heading 1</u></b>
                        </li>
                        <li class="menu-item">
                            <b><u>Heading 2</u></b>
                        </li>
                        <li class="menu-item">
                            <b><u>Heading 3</u></b>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Academics</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Admissions</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Financial Aid</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> President's Message</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Why Belmont</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Board of Trustees</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Giving</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> MyBelmont</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Apply Now</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Majors & Programs</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Facebook</a>
                        </li>
                        <li class="menu-item">
                            <a href="#"> Twitter</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>      
    </div>
</div> 
```

CSS：

```
body{
    background-color: #ccc;
    height:100%;
    margin:0px;
}

.clearfix:before, .clearfix:after {
    content: " "; 
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}

.quicklinks a{
    color: #ffffff;
    text-decoration:none;
}

.quicklinks a:visted{
    color: #ffffff;
    text-decoration:none;
}

.quicklinks a:hover{
    color: #ffffff;
    text-decoration:none;
}

.quicklinks a:active{
    color: #ffffff;
    text-decoration:none;
}

.menu {
    background: #f36f21;
    margin: 0;
    list-style-type: none;
    padding: 5px 15px 5px 15px;
    position: relative;
    width: 110px;
}

.menu .menu-item:hover .sub-menu {
    display: block;
}

.sub-menu {
    background: #f36f21;
    display: none;
    margin: 0; 
    padding: 10px;
    position: absolute;
    right: 0;
    width: 400px;
    text-align: left;
}

.sub-menu .menu-item {
    display: inline;
    float: left;
    padding: 0 10px 0 10px;
    width: 100px;
}

.quicklinks{
    margin: 0;
    padding: 0;
}   

#outer{
    background-color:#003366;
    height:120px;
}

#orangebar{
    background-color:#f36f21;
    height:5px;
}

#inner{
    width:1024px;
    height:auto;
    color: #ffffff;
    background-color:#003366; 
    margin:0px auto 0 auto; 
} 
```

这[是现场预览](http://jsfiddle.net/chaddly/fq7LQ/)。

我想到了。您可以通过将对象分配给浮动来完成任务：对。效果很好。谢谢你们看。

```
<div id="outer">
    <div id="inner">
        <img src="images/belmont-logo.png" align="left">
        <img src="images/dot-divider.png" align="left">
        <img src="images/prospective-students.png" align="left">
        <div class="quicklinks">
            <ul class="menu">
                <li class="menu-item">
                    <b>Quick Links >></b>
                    <ul class="sub-menu clearfix">
                        <li class="menu-item">
                            <b><u>Heading 1</u></b>
                        </li>
                        <li class="menu-item">
                            <b><u>Heading 2</u></b>
                        </li>
                        <li class="menu-item">
                            <b><u>Heading 3</u></b>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Academics</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Admissions</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Financial Aid</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> President's Message</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Why Belmont</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Board of Trustees</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Giving</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> MyBelmont</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Apply Now</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Majors & Programs</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Facebook</a>
                        </li>
                        <li class="menu-item">
                            <a href="#">> Twitter</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <img style="float: right;" src="images/mybelmont-icon.png">     
    </div>
</div>

.quicklinks{
    float: right;
    color: #ffffff;
    text-decoration:none;
}

.quicklinks a{
    color: #ffffff;
    text-decoration:none;
    float: right;
}

.quicklinks a:visted{
    color: #ffffff;
    text-decoration:none;
    float: right;
}

.quicklinks a:hover{
    color: #ffffff;
    text-decoration:none;
    float: right;
}

.quicklinks a:active{
    color: #ffffff;
    text-decoration:none;
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:01:49.343

简单的答案应该只是浮动所需的元素

```
.element{
    float: right;
} 
```

# php - 电子邮件超链接允许用户选择电子邮件客户端

> ID：13808654
> 
> 赞同：0
> 
> 时间：2012-12-10T20:27:41.153
> 
> 标签：php, javascript, ajax, email, hotmail

在某些网站上，当我单击联系人电子邮件链接时，我会看到常用电子邮件程序（如 gmail、yahoo、hotmail 等）的列表或一些图标，我可以选择要打开的电子邮件程序，然后电子邮件程序就会打开并填写收件人：和主题：字段。我找不到任何网页作为示例显示，但我有时会在 Craigslist 上看到它。有人知道如何为此编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:46:27.420

*您可以在大多数*电子邮件客户端中填充主题和正文，如下所示：

`<a href="mailto:example@example.com?subject=Subject+line&body=Body+goes+here.">E-mail</a>`

这通常是一个比让用户选择他们的提供商并依赖某种未记录且随时可能更改的 URL 格式更好的解决方案，更不用说它适用于 Outlook 等桌面客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:42:47.290

在 craigslist 上查看源代码，您可以看到网址；这是gmail：

[https://mail.google.com/mail/?view=cm&fs=1&to=TOADDRESS&su=SUBJECT&body=BODY&tf=1&shva=1](https://mail.google.com/mail/?view=cm&fs=1&to=TOADDRESS&su=SUBJECT&body=BODY&tf=1&shva=1)

您想检查每个站点的文档以获取详细信息

# redis - Redis zrange 将值排序为整数

> ID：13808658
> 
> 赞同：1
> 
> 时间：2012-12-10T20:27:48.460
> 
> 标签：redis

由于 zrange “字典顺序用于相同分数的元素”，我该如何解决这个问题？

例如：

```
zadd s 0 1
zadd s 0 2
zadd s 0 10
zadd s 0 3

zrange s 0 4
1) 1
2) 10
3) 2
4) 3 
```

我如何使它像这样排序（而ofc尊重分数）：

```
1) 1
2) 2
3) 3
4) 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:47:22.567

您不能更改词典顺序。

但是，您可以存储一个字典顺序与数字顺序匹配的值。例如，而不是存储：

```
1
2
12
15
122
321 
```

你可以存储：

```
A1
A2
B12
B15
C122
C321 
```

第一个字母只是一个代码，表示数值的位数（A=1，B=2，等等……），所以数字和字典顺序是一样的。客户端应用程序可以在存储/检索时轻松添加/删除此前缀。

```
 zadd s 0 A1
 zadd s 0 A2
 zadd s 0 B10
 zadd s 0 A3

 zrange s 0 4
 1) "A1"
 2) "A2"
 3) "A3"
 4) "B10" 
```

# eclipse - Eclipse 中最好的支持模板的文本编辑器是什么？

> ID：13808660
> 
> 赞同：2
> 
> 时间：2012-12-10T20:27:56.980
> 
> 标签：eclipse, editor

对于 Eclipse 用户来说，平台当然很棒。现在，支持模板（片段/自动完成）的最佳文本编辑器是什么？

我看到 java/ruby/xml 编辑器有自己的模板部分，但基本编辑器没有。为什么以及我应该安装什么插件才能拥有此功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:35:49.393

Built-in [Eclipse Mylyn's Wiki Text](http://wiki.eclipse.org/Mylyn/Incubator/WikiText) editor support customizable templates.

# java - 获取运行jarfile的文件名

> ID：13808661
> 
> 赞同：-1
> 
> 时间：2012-12-10T20:27:57.353
> 
> 标签：java, jar

有没有办法知道跨平台的运行jar的文件名？

我可以获取路径，我可以获取目录中所有 jar 的名称，或者我可以将命令传递到操作系统上的命令提示符/shell 以尝试找到它，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:38:14.993

Take a look here: [http://mindprod.com/jgloss/wherejars.html](http://mindprod.com/jgloss/wherejars.html)

```
public class Where
   {
   /**
    * main
    * @param args name of fully qualified class to find, using dots, but no dot class.
    * e.g. java.exe Where javax.mail.internet.MimeMessage
     */
   public static void main ( String[] args )
      {
      try
         {
         String qualifiedClassName = args[0];
         Class qc = Class.forName( qualifiedClassName );
         CodeSource source = qc.getProtectionDomain().getCodeSource();
         if ( source != null )
            {
            URL location = source.getLocation();
            System.out.println ( qualifiedClassName + " : " + location );
            }
         else
            {
            System.out.println ( qualifiedClassName + " : " + "unknown source, likely rt.jar" );
            }
         }
      catch ( Exception e )
         {
         System.err.println( "Unable to locate class on command line." );
         e.printStackTrace();
         }
      }
   } 
```

# jquery - 移动设备上的 jQuery UI 滑块触摸和拖放支持

> ID：13808663
> 
> 赞同：114
> 
> 时间：2012-12-10T20:28:17.540
> 
> 标签：jquery, jquery-ui, touch, jquery-ui-slider

我已经在一个项目中设计并实现了 jQuery UI 滑块。虽然它是响应式的，但滑块不会响应被触摸和拖动。相反，您必须触摸您希望滑块移动到的位置。我想避免切换到支持触摸和拖动的 jQuery 移动 UI，因为我们已经广泛使用 jQuery（非移动）UI。

我们想要的功能： [这里](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html)
我们正在使用的功能：[这里](http://jqueryui.com/slider/#steps)

在台式机上，您无法区分。在移动设备上是显而易见的。

任何人都知道如何将此支持添加到 jquery UI？

```
$("#videographers").slider({
  value: 2,
  min: 1,
  max: 3,
  step: 1,
  slide: function(event, ui) {
    return calcTotal(ui.value);
  }
}); 
```

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2012-12-10T20:34:29.360

jQuery ui 没有触控支持。您应该将它与[jQuery-ui touch punch](http://touchpunch.furf.com/)一起使用。

只需在 jQuery ui 之后添加脚本：

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js"></script>
<script src="jquery.ui.touch-punch.min.js"></script> 
```

你也可以使用cdnjs：

```
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script> 
```

**注意：**最好在 Github 上给[这个 repo](https://github.com/furf/jquery-ui-touch-punch)一个 star。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-14T14:01:04.327

你可以只链接这个js。

```
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script> 
```

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-11T04:42:40.140

如果您在**Wordpress**中，您可以在 functions.php 中使用此代码：

```
add_action( 'wp_head', function () {

    // jquery.ui.touch-punch
    wp_enqueue_script( 'jquery.ui.touch-punch', '//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js', [], '0.2.3',false );

}, 999 ); 
```

# ios - UITableViewCell 上 UIActivityIndi cator 的背景颜色被覆盖

> ID：13808671
> 
> 赞同：1
> 
> 时间：2012-12-10T20:28:29.960
> 
> 标签：ios, ios6, uiactivityindicatorview

使用 iOS 6、Xcode 4.5。

我有一个位于 UITableViewCell 上的 UIActivityIndi​​cator（使用动态原型单元格）。当我调用 startAnimating 时，活动指示器的背景颜色变为透明。无论我在情节提要文件中创建活动指示器还是以编程方式创建活动指示器，都会发生这种情况。但是，如果我在“正常”视图上放置一个活动指示器，当我调用 startAnimating 时，背景颜色不会改变。

有谁知道在 TableViewCell 上制作动画时导致透明背景发生变化的原因是什么？

如果我将背景颜色设置回我想要的颜色，我可以解决它，但只有在指示器实际开始动画之后（即在屏幕至少重绘一次之后）。但是，如果可能的话，我想了解原因，或者如果似乎没有合理的解释为什么会发生它，则将其报告为错误。

# mysql - 优化联合和常用条件的查询

> ID：13808672
> 
> 赞同：2
> 
> 时间：2012-12-10T20:28:32.463
> 
> 标签：mysql, sql, database

我有近 18 个选择联合，每个选择包含几乎 10 个相同的条件，只有一个条件不同。请查看下面的 sql 结构。

```
SELECT count(*) AS count, 'blue' as title 
FROM Users
WHERE [a long list of conditions,which are identical] AND eyes='blue'

UNION

SELECT count(*) AS count, 'hazel' as title 
FROM Users
WHERE [a long list of conditions,which are identical] AND eyes='hazel'

UNION

SELECT count(*) AS count, 'Black' as title 
FROM Users
WHERE [a long list of conditions,which are identical] AND eyes='black' 
```

等等。

检索此类数据的更好方法是什么。有更好的主意吗？

编辑：

很抱歉之前没有提到这一点，这些条件不是基于单个字段“眼睛”，它可以是不同的，例如头发、身高等，因此不能按照建议使用 group by。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:31:29.833

你想要条件总和：

```
select count(*),
       sum(case when eyes = 'blue' then 1 else 0 end) as blue,
       sum(case when eyes = 'hazel' then 1 else - end) as hazel,
       . . . 
from users
where <long list of conditions> 
```

这会将所有内容放在一行中。要将所有内容放在单独的行上，您可能需要：

```
select eyes, count(*)
from users
where <long list of conditions>
group by eyes 
```

这将为您提供每种眼睛颜色的单独行。

根据您的评论，最好的方法可能是在一行上进行汇总，然后取消透视值。不幸的是，MySQL 没有 unpivot，所以以下虽然丑陋但应该是有效的：

```
select titles.title,
       max(case when titles.title= 'blue' then blue
                when titles.title = 'hazel' then hazel
                . . .
           end) as cnt
from (select count(*) as cnt,
             sum(case when eyes = 'blue' then 1 else 0 end) as blue,
             sum(case when eyes = 'hazel' then 1 else - end) as hazel,
             . . . 
      from users
      where <long list of conditionss
     ) cross join
     (select 'blue' as title union all
      select 'hazel' union all
      . . .
     ) titles
group by titles.title 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:32:05.670

虽然这与您上面的输出不完全相同，但是

```
select eyes, count(*)
from Users
where [a long list of conditions,which are identical]
group by eyes 
```

应该给你你想要的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:39:13.167

if you are trying to get the number of users for each eyes color you should try :

```
SELECT count( * ) AS c, 'eye'
FROM Users
WHERE .... all your conditions here ...
GROUP BY 'eye' 
```

# mysql - 2 使用 parentID 加入一个查询

> ID：13808674
> 
> 赞同：1
> 
> 时间：2012-12-10T20:28:42.117
> 
> 标签：mysql, join

我有以下两个数据库表：

新闻表：

```
newsID, topic, categoryID 
```

类别表：

```
categoryID, title, parentID 
```

我想获取新闻ID、主题、主类别的标题，并且只有如果 parentID 不为 0，即父类别的标题。目前我坚持这样：

```
SELECT news.newsID, news.topic, category.title
FROM news
LEFT JOIN category
ON news.categoryID = category.categoryID
WHERE news.newsID = 1 
```

如果可用，我仍然缺少父标题。获得它的最佳方式是什么（如果有的话）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:32:31.840

假设桌子上有一`categoryID`列`news`：

```
SELECT n.newsID, n.topic, c.title, cp.title as parenttitle
FROM news n
LEFT JOIN category c ON n.categoryID = c.categoryID
LEFT JOIN category cp ON cp.categoryID = c.parentID
WHERE n.newsID = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:35:30.903

假设您在表中有一个`categoryID`列`news`并且该`category`表是一个自引用层次结构，这意味着一个孩子`parentID`引用`categoryID`同一个表中父行的列：

```
SELECT          n.newsID, n.topic, c.title, p.title as parentTitle
FROM        news n
LEFT JOIN   category c
ON         n.categoryID = c.categoryID
LEFT JOIN   category p
ON     c.parentID = p.categoryID
WHERE       n.newsID = 1 
```

# html - 在具有伪元素的标题标签上居中文本

> ID：13808684
> 
> 赞同：0
> 
> 时间：2012-12-10T20:29:11.140
> 
> 标签：html, css

请看看[这个小提琴](http://jsfiddle.net/sTEmW/)。

```
<h2><span>Some Text</span></h2> 
```

我正在尝试将`h2`标签内的文本垂直居中。我尝试过使用不同的高度、填充、位置和行高，但它们似乎都没有正确定位文本。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:35:50.080

[http://jsfiddle.net/sTEmW/2/](http://jsfiddle.net/sTEmW/2/)

我删除了多余的 span 元素：

```
h2 {
    color: #FFFFFF;
    font-weight: bold;
    background: none repeat scroll 0 0 #007480;

    display: inline-block;
    height: 30px;
    padding: 0 0 0 10px;
    line-height:30px;
}
h2:after {
    content: url("http://i48.tinypic.com/anh5c.png");
    display: inline-block;
    margin-left: 50px;
    width: 17px;
    float:right;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:28:27.090

由于@Shmiddty 的解决方案运行良好，这是一个更简单的代码，它适用于所有浏览器，甚至 IE7：

**HTML**

```
<h2>Our History</h2>​ 
```

**CSS**

```
h2 {
    display: inline-block;
    padding: 0 67px 0 10px;
    background: #007480 url(http://i48.tinypic.com/anh5c.png) no-repeat right 0;
    font-weight: bold;
    line-height: 30px;
    color: #fff;
} 
```

**演示**

[http://jsfiddle.net/5Z9fE/](http://jsfiddle.net/5Z9fE/)

# java - Android ListAdapter 启动@top

> ID：13808685
> 
> 赞同：0
> 
> 时间：2012-12-10T20:29:12.980
> 
> 标签：java, android, android-layout

当前，填充时的列表从列表底部的视图@ 开始。有没有办法使用 listAdapters 强制它到列表的顶部？

目前，方向在创建时滚动到底部。有没有办法在创建时将屏幕固定到顶部？[http://imgur.com/wGTEy](http://imgur.com/wGTEy)在此示例中，您会看到 create 上的条目 1 被向上推，以便为六个腾出空间......相反，我希望它像这样填充。[http://imgur.com/6Lg6e](http://imgur.com/6Lg6e) ...条目 1 是列表的顶部，6 被推到底部以进行滚动。

如果您查看上面的图片，您会注意到它从列表的底部开始，而不是从顶部开始。有任何想法吗？

```
mAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, mStrings);
        setListAdapter(mAdapter);
        registerForContextMenu(getListView());

populateFields();

private void populateFields() {
       if (mRowId != null) {
           Cursor note = mDbHelper.fetchDaily(mRowId);
           startManagingCursor(note);
           String body = note.getString(note.getColumnIndexOrThrow(NotesDbAdapter.KEY_DBODY));
           mAdapter.clear();
           if (!(body.trim().equals(""))){
               String bodysplit[] = body.split(",");
               for (int i = 0; i < bodysplit.length; i++) {
               mAdapter.add(bodysplit[i].trim());
               } 
           }
       }
   } 
```

**已编辑以修复 != 字符串错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:43:28.167

您希望列表中后面的项目位于`ListView`？如果是这样，请查看以下问题：[是否可以从底部填充 ListView？](https://stackoverflow.com/questions/9987402/is-it-possible-to-make-a-listview-populate-from-the-bottom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:20:04.413

您正在完全更改适配器，因此在此过程中会丢失滚动位置...您可以使用：

```
ListView listView = getListView();
int position = listView.getFirstVisiblePosition();
if (!(body.trim().equals(""))){
   String bodysplit[] = body.split(",");
   for (int i = 0; i < bodysplit.length; i++) {
      mAdapter.add(bodysplit[i].trim());
   } 
}

listView.setSelection(position); 
```

但这并不完美，如果`position`在索引关闭之前添加了一行。如果您的列表包含唯一值，您可以使用`ArrayAdapter#getPosition()`, 来查找新索引。

* * *

虽然我仍然建议使用 CursorAdapter，因为它可以更好地处理大型表数据，但我想用您的 ArrayAdapter 代码解决一个关于效率的问题。

通过使用`adapter.clear()`，`adapter.add()`您要求 ListView 在每一步都重新绘制自己......可能会进行数十次或数百次。相反，您应该直接使用 ArrayList，然后`ArrayAdapter#notifyDataSetChanged()`在循环完成后让 ListView 重绘一次。

# php - 在 PHP 中收到新电子邮件后立即发送短信

> ID：13808690
> 
> 赞同：0
> 
> 时间：2012-12-10T20:29:25.747
> 
> 标签：php, cron

> **可能重复：**
> [电子邮件检查，然后根据脚本对短信做出反应](https://stackoverflow.com/questions/5338129/email-checking-and-then-act-upon-script-for-reacting-to-a-sms-message)

假设我有两个名为`recieve_email()`和的函数`send_sms()`。

问题是我应该在收到新电子邮件**后立即发送短信。**

正如我所研究的，有以下两种解决方案：

*   使用 cron 作业检查电子邮件
*   使用始终使用 javascript（如 gmail）打开的网页检查电子邮件

我认为更稳定的方式是cron作业。

我想知道每分钟运行一次 cron 作业是否可以**接受**？还是它会杀死服务器并将我的网站弹走？！

每两分钟运行一次 cron 作业怎么样？！:D

**问题2：**

有没有`on_mail_recieved`类似的解决方案？它当然会更快、更优化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:37:02.960

> 我想知道每分钟运行一次 cron 作业是否可以接受？还是它会杀死服务器并将我的网站弹走？！

一般来说，这很好。如果作业有可能需要超过一分钟，您通常应该实施锁定文件或信号量，以防止它同时运行多个实例。

> 是否有类似 on_mail_recieved 的解决方案？它当然会更快、更优化。

是的，您可以将电子邮件通过管道传输到脚本。这需要您运行邮件服务器，并且在技术上可能会涉及一点。

# c# - LINQ to Entity 查询错误

> ID：13808691
> 
> 赞同：2
> 
> 时间：2012-12-10T20:29:26.590
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, linq-to-entities

我遇到了一个我不熟悉的错误。我试图谷歌没有成功。我在遇到此错误的地方编写了以下查询。

**无法在 LINQ to Entities 查询中构造实体或复杂类型“MyWebProject.Models.UserDetail”。**

**查询：**

```
UsersContext db = new UsersContext();
        var userdata = (from k in db.UserDetails
                        where k.UserId == WebSecurity.CurrentUserId
                        select new UserDetail()
                        {

                            FullName = k.FullName,
                            Email = k.Email,
                            About = k.About,
                            Link = k.Link,
                            UserSchool = new School()
                            {
                                SchoolId = k.UserSchool.SchoolId,
                                SchoolName = k.UserSchool.SchoolName
                            },
                            UserCourse = new Course()
                            {
                                CourseId=k.UserCourse.CourseId,
                                CourseName=k.UserCourse.CourseName
                            },
                            Country=k.Country
                        }).FirstOrDefault(); 
```

**班级：**

```
public class UserDetail
{
    public int Id { get; set; }
    public int UserId { get; set; }
    public string FullName { get; set; }
    public string Link { get; set; }
    public bool? Verified { get; set; }

    public string Email { get; set; }

    public string About { get; set; }
    public School UserSchool { get; set; }
    public Course UserCourse { get; set; }

    public string Country { get; set; }

}
public class School
{
    public int SchoolId { get; set; }
    public string SchoolName { get; set; }
    public string Country { get; set; }
}
public class Course
{

    public int CourseId { get; set; }
    public string CourseName { get; set; }
    public School School { get; set; }
} 
```

知道出了什么问题吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:35:07.453

看起来这是由于您在查询中间创建复杂属性 School 和 Course 的方式。最好选择用户（删除选择转换），然后使用导航属性来访问这些对象，而不是手动构建它们。只要您使用外键建立适当的关系，导航就是为此而设计的。

```
UsersContext db = new UsersContext();

var userdata = (from k in db.UserDetails
    where k.UserId == WebSecurity.CurrentUserId})
    .FirstOrDefault();

// access navigation properties which will perform the joins on your behalf
// this also provides for lazy loading which would make it more effecient. (it wont load the school object until you need to access it)

userdata.School
userdata.Course 
```

* * *

关于导航属性的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/vstudio/bb738520 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb738520(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T20:34:18.473

这应该给你你想要的。它将作为查询的一部分加载您的对象（而不依赖于延迟加载）。

```
UsersContext db = new UsersContext();
var userdata = db.UserDetails.Include(x => x.UserSchool)
                             .Include(x => x.UserCourse)
                             .Include(x => x.Country)
                             .Where(x => x.UserId == WebSecurity.CurrentUserId)
                             .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:13:05.110

我认为这是因为您的实体与您尝试创建的对象具有相同的名称。尝试重命名要返回的对象。如果您想返回与您的实体相同的类型，请尝试使用 .Include("relationshipname") 功能进行预加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:16:27.933

下面给出了@Yakimych 的一个很好的答案。

您不能（也不应该）投影到映射的实体上。但是，您可以投影到匿名类型或 DTO：

```
public class ProductDTO
{
    public string Name { get; set; }
    // Other field you may need from the Product entity
} 
```

您的方法将返回一个 DTO 列表。

```
public List<ProductDTO> GetProducts(int categoryID)
{
    return (from p in db.Products
            where p.CategoryID == categoryID
            select new ProductDTO { Name = p.Name }).ToList();
} 
```

EF 中的映射实体基本上代表数据库表。如果你投影到一个映射实体上，你基本上做的是部分加载一个实体，这不是一个有效的状态。EF 不知道将来如何处理此类实体的更新（默认行为可能是用空值或对象中的任何内容覆盖未加载的字段）。这将是一个危险的操作，因为您可能会丢失数据库中的一些数据，因此不允许在 EF 中部分加载实体（或投影到映射实体上）。

有关更多详细信息，请转到以下链接： [无法在 LINQ to Entities 查询中构造实体](https://stackoverflow.com/questions/5325797/the-entity-cannot-be-constructed-in-a-linq-to-entities-query)

# php - MySQL 左连接

> ID：13808694
> 
> 赞同：2
> 
> 时间：2012-12-10T20:29:36.707
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何 LEFT JOIN 两个具有相同列名的表](https://stackoverflow.com/questions/8119515/how-to-left-join-two-tables-with-the-same-column-name)

我有这样的声明：

```
$sql = "SELECT * FROM deliveries AS del 
        LEFT JOIN job_sheet ON job_sheet.job_id=del.jID
        LEFT JOIN hierarchy AS h ON job_sheet.h_str=h.hID
        LEFT JOIN customers ON h.cust=customers.ID"; 
```

我的问题是“客户”表有一个名为 ID 的列，“交货”表也是如此。当我运行 while 循环以输出结果时，问题就开始了。

```
while($data = mysql_fetch_array($sql))
{
     echo $data['ID'];
} 
```

它输出最后一个加入的表的值......我怎样才能将两者分开？我的意思是，我需要能够从两个表中输出“ID”，但在查询中，它是最后一个获胜的表。重命名列不是一种选择...

有什么输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:34:19.673

您需要显式调用列，而不是`*`在查询中使用和别名列具有相同名称：

```
SELECT 
   del.ID as delivery_id,
   customers.ID as customer_id,
   .....
FROM deliveries AS del 
LEFT JOIN job_sheet ON job_sheet.job_id=del.jID 
LEFT JOIN hierarchy AS h ON job_sheet.h_str=h.hID 
LEFT JOIN customers ON h.cust=customers.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:59:35.990

我通过一些调整弄清楚了：

```
 SELECT 
       deliveries.*, 
       job_sheet.*,
       customers.ID as CUSTOMERID
       FROM deliveries 
          LEFT JOIN job_sheet ON job_sheet.job_id=deliveries.jID 
          LEFT JOIN hierarchy ON job_sheet.h_str=hierarchy.hID 
          LEFT JOIN customers ON hierarchy.cust=customers.ID 
```

鉴于我需要从客户表中获取的唯一内容是别名“ID”，同时保留其他两个表中的所有其他列。

我的 while 循环最终将变为：

```
while($data = mysql_fetch_array($sql))
{
    echo $data['CUSTOMERID']; // For the customer's ID
    echo $data['ID']; // For the delivery ID
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:34:47.507

您需要明确指定所需的列。就个人而言，我对选择列表中的“*”没有这么大的问题，只要它是别名。就像是：

```
select del.*, job_sheet.col1, . . . 
```

# html - 图像预览上的后退按钮

> ID：13808697
> 
> 赞同：0
> 
> 时间：2012-12-10T20:29:52.377
> 
> 标签：html

我有一个小问题，我只想要一个简单的图像预览，带有返回按钮或类似的东西，我做了

```
<div id="image1">
   <a href="../assets/image_large1.jpg"><img src="../assets/image_1.jpg"  width="160" height="107" alt="Example 1" /> 
</div> 
```

但我不知道如何在里面放一个按钮

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:47:04.233

在解决您的问题的最简单方法中，我会做特殊`show_image.php`页面，例如：

```
<?php

$directory = 'assets/';
$filename = $_GET['image'];

if(empty($filename) || is_file( $directory . $filename ))
{
    echo 'No such image!';
}
else
{
    echo '<img src="' . $directory . $filename . '" />';
}
echo '<br />';
echo '<a href="<?php echo $_SERVER['HTTP_REFERER']; ?>">Go back</a>';

exit; 
```

图片的链接是： http://mysite.com/show_image.php?image= [image_1.jpg](http://mysite.com/show_image.php?image=image_1.jpg)
当然，这段代码应该更安全，这件事可以通过其他方式完成。

# java - Spring/JAVA 连续进程同步

> ID：13808703
> 
> 赞同：2
> 
> 时间：2012-12-10T20:30:24.733
> 
> 标签：java, spring, concurrency

我有四个不同的进程（不同的方法），它们分别运行并计划在不同的时间启动。此过程也可以手动启动，并且必须同时运行一个。有没有处理这种并发的队列实现？我试图避免同一个进程在队列中两次，或者两个进程同时运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:34:58.187

看来您正在寻找[Executors.newSingleThreadScheduledExecutor()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor%28%29)：

> 创建一个单线程执行程序，可以安排命令在给定延迟后运行，或定期执行。（但请注意，如果该单线程在关闭前的执行过程中因失败而终止，则如果需要执行后续任务，则新线程将取代它。）任务保证按顺序执行，并且不会有多个任务处于活动状态在任何给定时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:39:24.680

除了对并发性的需求之外，您的需求似乎更多地与这些流程的许可数量有关。如果是这种情况，您可以使用信号量。

# ios - 触摸事件 touchesCancelled 和 touchesEnded

> ID：13808704
> 
> 赞同：0
> 
> 时间：2012-12-10T20:30:26.253
> 
> 标签：ios, uigesturerecognizer, touch-event, tap, touchescancelled

我有一个项目，我开始使用点击手势识别器。我意识到我对点击手势识别器没有足够的控制，所以我开始使用我的 viewcontroller 作为`UIGestureRecognizerDelegate`. 为了确保我走在正确的轨道上，我添加了`touchesBegan`, `touchesMoved`, `touchesEnded`,的方法`touchesCancelled`。除了`NSLog`调用之外，这些方法都是空的，所以当我尝试不同的事情时，我可以知道正在触发什么。

事情按预期进行，只是我接到了一堆对 touchesCancelled 的调用。我认为这是因为我仍然有点击手势识别器。我还没有准备好删除点击手势识别器，所以我只是想确认如果我使用的手势实际上是点击会发生这种情况。

文档说：

> 该方法在Cocoa Touch框架接收到需要取消触摸事件的系统中断时调用；为此，它生成`UITouch`一个相位为 的对象 `UITouchPhaseCancel`。中断可能会导致应用程序不再处于活动状态或视图从窗口中移除。当对象接收到消息时，它应该清除在其实现`touchesCancelled:withEvent:`中建立的任何状态信息 。`touchesBegan:withEvent:`

但我怀疑我刚才概述的情况同样可能。我对么？

# wordpress - 在 wordpress 的永久链接中包含自定义变量时分页失败

> ID：13808707
> 
> 赞同：3
> 
> 时间：2012-12-10T20:30:34.113
> 
> 标签：wordpress, .htaccess, pagination, permalinks

我是这里的wordpress新手，所以请放轻松。

我在一个 wordpress 网站上工作，我遇到了两个问题，我似乎无法在任何地方找到答案。我在我的 wordpress 网站上设置了永久链接以及分页，例如，www.mysite.com/links/page/2 会将您发送到链接的第二页。

我刚刚创建了一个自定义模板，该模板引入了两个具有相同标签名称的不同分类法。为此，我创建了一个名为 tags 的页面，该页面使用我的自定义模板，并且我有一个自定义链接，其结构如下： www.mysite.com/tags/?tag=mytag 这很丑陋，但它适用于测试目的.

当我转到第二页并且链接是： www.mysite.com/tags/?tag=mytag/page/2 不起作用时，就会出现问题。

我不想弄乱我当前的永久链接，但我想添加一条新规则，即 a) 阻止页面中断，并且 b) 实际上看起来不错。我希望链接只是 www.mysite.com/tags/mytag/page/2

经过大量的挖掘，我能够得到我认为正确的代码。这是我在我的主题目录中添加到我的functions.php的内容：

```
add_action( 'generate_rewrite_rules', 'my_tag_rewrite_rules' );
//add_filter( 'query_vars', 'my_tag_query_vars' );

function my_tag_query_vars( $vars )
{
    // $vars[] = 'tag'; // might not need this because 'tag' should already be         registered
}
function my_tag_rewrite_rules( $wp_rewrite )
{
    $wp_rewrite->rules = array(
        'tags/([^/]+)/page/?([0-9]{1,})/?$' => $wp_rewrite->index . 'tags/?tag=' . $wp_rewrite->preg_index( 1 ) . '&paged=' . $wp_rewrite->preg_index( 2 ),
        'tags/([^/]+)/?$' => $wp_rewrite->index . 'tags/?tag=' .     $wp_rewrite->preg_index( 1 )

    ) + $wp_rewrite->rules;
} 
```

（我注释掉了 add_filter 部分，因为 'tag' 已经是 wordpress 识别的查询变量）。从我读到的内容看来，我需要做的就是进入 wordpress 仪表板并转到设置-> 永久链接，据说它会更改 .htaccess。它没有。

我的第一个问题是：我的重写规则是否正确？其次，我还需要做什么才能让 wordpress 更新 .htaccess 文件？

非常感谢您的帮助！

# java - 我应该关闭从适配器获得的光标吗？

> ID：13808709
> 
> 赞同：1
> 
> 时间：2012-12-10T20:30:40.977
> 
> 标签：java, android, memory, pass-by-value

如果我有一个 SimpleCursorAdapter 并且我在实例化的适配器上调用 getCursor() ，那么我是否应该在完成后关闭这个游标，因为 java 是按值传递的？

简单的例子：

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(.....);
myListView.setAdapter(adapter);

Cursor cursor = adapter.getCursor();
cursor.moveToFirst();
int id = cursor.getInt(0);
...? 
```

如果我在这里关闭光标，是否会为适配器关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:35:25.487

> 如果我有一个 SimpleCursorAdapter 并且我在实例化的适配器上调用 getCursor() ，那么我是否应该在完成后关闭这个游标，因为 java 是按值传递的？

正如你所说，适配器仍在使用光标，所以不，你不应该关闭它。只有在*完全*使用完光标后才应关闭光标。

# ruby - 基本 rspec 测试未通过

> ID：13808711
> 
> 赞同：0
> 
> 时间：2012-12-10T20:30:42.430
> 
> 标签：ruby, rspec

如果有人能告诉我为什么这不会通过，将不胜感激，它变得 nil 而不是 value

```
class Hello
  def hi
    puts "hello"
  end
end

describe Hello do

  before do
    @obj = Hello.new
  end

  describe "#hi" do
    it "should say hello" do
      @obj.hi.should == "hello"
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:35:30.650

因为`puts`总会回来`nil`，`#hi`总会回来`nil`。

将其更改为：

```
class Hello
  def hi
    "hello"
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:36:34.847

`puts`只是输出字符串，但`nil`作为值返回，所以`hi`只是返回那个 nil 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:00:04.090

我还没有测试过，但你也应该能够针对 $stdout 进行测试。它应该收到

# c++ - 访问文件中的单个字符效率低下？(C++)

> ID：13808714
> 
> 赞同：9
> 
> 时间：2012-12-10T20:30:51.053
> 
> 标签：c++, file-io, fstream

我一直认为，在处理文本文件时，首先将内容（或其中的一部分）读入 std::string 或 char 数组会更有效，因为——根据我有限的理解——文件是从内存中读取的块远大于单个字符的大小。但是，我听说现代操作系统通常实际上并不直接从文件中读取，这使得我手动缓冲输入几乎没有什么好处。

假设我想确定文本文件中某个字符的数量。以下会是低效的吗？

```
while (fin.get(ch)) {
    if (ch == 'n')
        ++char_count;
} 
```

当然，我想这取决于文件大小，但有没有人对什么是最好的方法有任何一般规则？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T21:58:45.087

这里很大程度上取决于性能对您/您的应用程序的真正关键程度。反过来，这往往取决于您正在处理的文件有多大——如果您正在处理数十或数百千字节的文件，您通常应该只编写可以工作的最简单的代码，而不必太担心它——你能做的任何事情基本上都是即时的，所以优化代码不会真正完成太多。

另一方面，如果您正在处理大量数据——大约几十兆字节或更多，效率上的差异可能会变得相当大。除非您采取相当具体的步骤来绕过它（例如使用`read`），否则您的所有读取都将被缓冲——但这并不*意味着*它们都将具有相同的速度（或者甚至必须非常接近相同的速度）。

例如，让我们尝试快速测试几种不同的方法，这些方法基本上可以完成您所询问的事情：

```
#include <stdio.h>
#include <iomanip>
#include <iostream>
#include <iterator>
#include <fstream>
#include <time.h>
#include <string>
#include <algorithm>

unsigned count1(FILE *infile, char c) { 
    int ch;
    unsigned count = 0;

    while (EOF != (ch=getc(infile)))
        if (ch == c)
            ++count;
    return count;
}

unsigned int count2(FILE *infile, char c) { 
    static char buffer[4096];
    int size;
    unsigned int count = 0;

    while (0 < (size = fread(buffer, 1, sizeof(buffer), infile)))
        for (int i=0; i<size; i++)
            if (buffer[i] == c)
                ++count;
    return count;
}

unsigned count3(std::istream &infile, char c) {    
    return std::count(std::istreambuf_iterator<char>(infile), 
                    std::istreambuf_iterator<char>(), c);
}

unsigned count4(std::istream &infile, char c) {    
    return std::count(std::istream_iterator<char>(infile), 
                    std::istream_iterator<char>(), c);
}

template <class F, class T>
void timer(F f, T &t, std::string const &title) { 
    unsigned count;
    clock_t start = clock();
    count = f(t, 'N');
    clock_t stop = clock();
    std::cout << std::left << std::setw(30) << title << "\tCount: " << count;
    std::cout << "\tTime: " << double(stop-start)/CLOCKS_PER_SEC << "\n";
}

int main() {
    char const *name = "test input.txt";

    FILE *infile=fopen(name, "r");

    timer(count1, infile, "ignore");

    rewind(infile);
    timer(count1, infile, "using getc");

    rewind(infile);
    timer(count2, infile, "using fread");

    fclose(infile);

    std::ifstream in2(name);
    in2.sync_with_stdio(false);
    timer(count3, in2, "ignore");

    in2.clear();
    in2.seekg(0);
    timer(count3, in2, "using streambuf iterators");

    in2.clear();
    in2.seekg(0);
    timer(count4, in2, "using stream iterators");

    return 0;
} 
```

我用一个大约 44 兆字节的文件作为输入来运行它。使用 VC++2012 编译时，得到以下结果：

```
ignore                          Count: 400000   Time: 2.08
using getc                      Count: 400000   Time: 2.034
using fread                     Count: 400000   Time: 0.257
ignore                          Count: 400000   Time: 0.607
using streambuf iterators       Count: 400000   Time: 0.608
using stream iterators          Count: 400000   Time: 5.136 
```

使用相同的输入，但使用 g++ 4.7.1 编译：

```
ignore                          Count: 400000   Time: 0.359
using getc                      Count: 400000   Time: 0.339
using fread                     Count: 400000   Time: 0.243
ignore                          Count: 400000   Time: 0.697
using streambuf iterators       Count: 400000   Time: 0.694
using stream iterators          Count: 400000   Time: 1.612 
```

因此，即使所有读取都被缓冲，我们看到 g++ 的变化率约为 8:1，而 VC++ 的变化率约为 20:1。当然，我还没有测试（甚至接近）读取输入的所有可能方式。如果我们测试更多的阅读技巧，我怀疑我们会看到更广泛的时间，但我可能错了。无论我们是否这样做，我们都看到了足够多的变化，至少如果您正在处理大量数据，那么您很可能有理由选择一种技术而不是另一种技术来提高处理速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:50:15.520

不，您的代码是有效的。文件旨在按顺序读取。在幕后，保留一块 RAM 以缓冲传入的数据流。事实上，因为您在读取整个文件之前就开始处理数据，所以您的 while 循环应该会稍早完成。此外，您可以毫无问题地处理远远超出计算机主 RAM 的文件。

编辑：令我惊讶的是，杰里的号码出现了。我会假设通过读取和解析块获得的任何效率都会与从文件读取的成本相形见绌。我真的很想知道这些时间花在了哪里，以及当文件没有被缓存时变化会降低多少。尽管如此，我不得不推荐 Jerry 的答案，尤其是他指出，在你知道你有性能问题之前，你真的不应该担心它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T03:36:16.893

它在很大程度上取决于上下文，并且由于没有围绕代码的上下文，所以很难说。

毫无疑问，您的操作系统可能正在为您缓存至少一小部分文件，正如其他人所说......但是，在用户和内核之间来回切换是昂贵的，这可能是您的瓶颈所在。

如果您要`fin.rdbuf()->pubsetbuf(NULL, 65536);`在此代码之前插入，您可能会注意到显着的加速。这是标准库尝试一次从内核读取 65536 个字节的提示，并将它们保存以供以后使用，而不是在用户和内核之间为每个字符来回切换。

# c# - 计算 SKU 的可能组合

> ID：13808717
> 
> 赞同：0
> 
> 时间：2012-12-10T20:31:02.200
> 
> 标签：c#, .net, combinations

我有这种情况：

*   带有 SKU 的产品
*   此产品具有带有 SKU 后缀的属性（复选框）
*   （想象一个带有插件的产品）

属性总是按固定顺序排列，不是强制性的。产品的最终 SKU 是 basesku + 选定属性的后缀。

例如，带有 basesku 的产品`XXX`有 3 个带有后缀的属性`A`,`B`和`C`.

该产品的可能组合是：

```
XXX-A
XXX-A-B
XXX-A-B-C
XXX-A-C
XXX-B
XXX-B-C
XXX-C 
```

因为属性的顺序是固定的，所以永远不可能有`XXX-C-B`例如。

计算这些 SKU 的最佳方法是什么？

编辑：我应该告诉这些属性是动态创建的。所以不可能有attA + "-" + attB。我需要一种方法来动态生成可能的 SKU 列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:42:42.240

用一个`StringBuilder`

```
var sb = new StringBuilder("XXX");
if (skuACheckBox.Checked) {
    sb.Append("-A");
}
if (skuBCheckBox.Checked) {
    sb.Append("-B");
}
if (skuCCheckBox.Checked) {
    sb.Append("-C");
}
string skuWithSuffix = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:48:03.990

我建议维护一个不重复的选定后缀属性集合，最后使用该集合连接 sku。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:35:58.037

我看到另一个答案是计数。
对不起，如果我读错了问题。

```
Public String SKU { get; set; }

Public bool Aattr { get: set; }
Public bool Battr { get: set; }
Public bool Cattr { get: set; }

Public String SKUwSuffix 
{
   get
   {
      string sKUwSuffix = SKU; 
      if (Aattr) sKUwSuffix += "-A";
      if (Battr) sKUwSuffix += "-B";
      if (Cattr) sKUwSuffix += "-C";
      return sKUwSuffix;
   }
} 
```

# performance - Windows Phone 8 HTML5 - 本地与远程 HTML 性能

> ID：13808718
> 
> 赞同：4
> 
> 时间：2012-12-10T20:31:03.290
> 
> 标签：performance, html, windows-phone-8, windows-phone

我有一个使用“Windows Phone HTML5 App”模板设置的 HTML5 游戏。这实际上只是在 WebBrowser 控件中加载 HTML 游戏。

当使用相对 URI 在本地加载 index.html 时，性能不佳，分析器显示大约 10fps：

当仅从我的远程服务器加载完全相同的 HTML 时，我得到了很好的 45fps。

有谁知道这种差异是什么以及如何解决它？

**编辑 -> 远程加载所有图像时，性能问题消失了。问题在于本地加载图像，而不是远程加载。扑朔迷离。**

**编辑 2 -> 将图像编码为数据 URI 的 Base64 也具有同样巨大的性能提升。不幸的是，这对我们来说不可行，但表明在本地加载图像存在严重问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:34:04.410

你找到问题的原因了吗？

首先，为了确保您没有任何 xss 问题，您可以设置 Fiddler 并监控手机上的流量吗？

第二，疯狂的想法：在你自己的应用程序中创建一个简单的 http 服务器会起作用吗？然后，您可以设置网络浏览器从中加载您的游戏，并查看与从本地加载相比如何工作

# powershell - Get-Member Showing Incorrect Properties When Using Pipes

> ID：13808727
> 
> 赞同：2
> 
> 时间：2012-12-10T20:31:42.527
> 
> 标签：powershell

```
wwwroot> $nsmgr.gettype()

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     False    XmlNamespaceManager                      System.Object

wwwroot> Get-Member -InputObject $nsmgr

   TypeName: System.Xml.XmlNamespaceManager

wwwroot> $nsmgr | Get-Member

   TypeName: System.String 
```

It seems like Get-Member is type-converting to a String in first `Get-Member` call, but this seems to be very strange behavior for a Cmdlet like `Get-Member`.

I've read [How to use PowerShell Get-Member cmdlet](https://stackoverflow.com/questions/668321/how-to-use-powershell-get-member-cmdlet) but I don't believe that's the same issue.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T20:42:29.833

XmlNamespaceManager implements `IEnumerable` so PowerShell will output the items contained within the XmlNamespaceManager down the pipeline. To prevent that you can use the comma operator:

```
,$nsmgr | Get-Member 
```

This will create a simple array wrapper around the XmlNamespaceManager so that it gets propagated down the pipe instead of its contents.

# haskell - 这个 Haskell 示例是否有效地证明了懒惰？

> ID：13808729
> 
> 赞同：2
> 
> 时间：2012-12-10T20:31:53.550
> 
> 标签：haskell, lazy-evaluation

我是 Haskell 的新手，我正在为我的编程语言课写一篇关于它的论文。我想用一些示例代码来展示 Haskell 的懒惰，但我不确定我所看到的是否真的是懒惰。

```
doubleMe xs = [x*2 | x <- xs] 
```

在 ghci 中：

```
let xs = [1..10]
import Debug.Trace
trace (show lst) doubleMe (trace (show lst) doubleMe (trace (show lst) doubleMe(lst))) 
```

输出：

```
[1,2,3,4,5,6,7,8,9,10]
[1,2,3,4,5,6,7,8,9,10]
[1,2,3,4,5,6,7,8,9,10]
[8,16,24,32,40,48,56,64,72,80] 
```

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T20:55:53.333

您对`trace`此处的使用并不是特别有见地，或者实际上根本没有。您所做的只是在评估的四个不同点打印出相同的列表，这并不能告诉您有关程序实际状态的任何信息。这里实际发生的是`trace`在计算甚至开始之前在每个加倍步骤中强制执行（当结果列表被请求为弱头范式时）。这与使用完全严格评估的语言几乎相同。

要看到一些懒惰，你可以做类似的事情

```
Prelude Debug.Trace> let doubleLsTracing xs = [trace("{Now doubling "++show x++"}")$ x*2 | x<-xs]
Prelude Debug.Trace> take 5 $ doubleLsTracing [1 .. 10]
{Now doubling 1}
{Now doubling 2}
{Now doubling 3}
{Now doubling 4}
{Now doubling 5}
[2,4,6,8,10] 
```

您可以看到只有五个数字加倍，因为只请求了五个结果；即使`doubleLsTracing`给出的列表有 10 个条目。

请注意，这`trace`通常不是监视“执行流程”的好工具，它只是一种允许“查看”局部变量以查看某些函数中发生了什么的技巧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T00:25:29.330

无限流总是一个很好的例子。如果没有特殊的结构，你无法在其他语言中获得它们——但在 Haskell 中它们是非常自然的。

一个例子是斐波那契流：

```
fib = 0 : 1 : zipWith (+) fib (tail fib)

take 10 fib => [0,1,1,2,3,5,8,13,21,34] 
```

另一种是通过试除法获得素数流：

```
primes = sieve [2..]
    where sieve (x:xs) = x : filter (not . (== 0) . (`mod` x)) (sieve xs)

take 10 primes => [2,3,5,7,11,13,17,19,23,29] 
```

此外，在 Haskell 中实现回溯非常简单，让您能够按需懒惰地获取解决方案列表：

[http://rosettacode.org/wiki/N-queens_problem#Haskell](http://rosettacode.org/wiki/N-queens_problem#Haskell)

一个更复杂的例子，展示了如何实现 min 是在这里找到的：

[惰性评估和时间复杂度](https://stackoverflow.com/questions/12057658/lazy-evaluation-and-time-complexity)

它基本上展示了如何使用 Haskell 的惰性来获得`minimum`函数的非常优雅的定义（在元素列表中找到最小值）：

```
minimum = head . sort 
```

你可以通过人为的例子来证明 Haskell 的懒惰。但我认为展示惰性如何帮助您为常见问题开发解决方案要好得多，这些解决方案表现出比其他语言更大的模块化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T21:12:56.407

最简洁的答案是不”。leftaroundabout 在他的回答中很好地解释了这一点。

我的建议是：

1.  阅读并理解[惰性求值](http://en.wikipedia.org/wiki/Lazy_evaluation)的定义。
2.  编写一个函数，其中一个参数可以发散，这个例子*不能*在你最喜欢的严格（非惰性）语言（C、python、Java）中工作。例如**sumIfFirstArgIsNonZero** (x, y)，如果 x != 0 则返回 x+y，否则返回 0。
3.  对于加分，定义你自己的函数**ifThenElse**不使用 Haskell 的内置 if-then-else 语法，并解释为什么用惰性语言编写新的控制流结构很容易。

这应该比试图围绕无限数据流或打结技巧更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T03:00:03.117

懒惰的要点是不需要计算的值 - 所以为了证明这一点，你必须显示**没有**被评估的东西。您的示例并不是展示惰性的最佳方式，因为最终会计算所有值。

这是一个小例子，作为一个起点：

```
someValueThatNeverTerminates = undefined -- for example, a divide-by-zero error

main = do (greeting, _) = ("Hello terminating world!", someValueThatNeverTerminates)
          putStrLn greeting 
```

这立即打招呼——如果它不懒惰，整个事情就会中途中断。

# c# - 带有断点的外部文件在运行时不断添加到解决方案中

> ID：13808730
> 
> 赞同：0
> 
> 时间：2012-12-10T20:32:03.170
> 
> 标签：c#, visual-studio-2010

这让我发疯了，整天都在降低我的工作效率。在进行调试的时候，我将另一个项目中的外部文件拖到了我当前的解决方案（Visual Studio 2010）中，这样我就可以调试它，因为我正在处理的解决方案正在使用其中定义的类。

一切都很好，完成后我将其从解决方案中删除，一切正常。然而，在某些时候，Visual Studio 已经决定，每次我运行我的解决方案时，它都会将外部文件带回并替换我在调试时使用的断点。无论我删除断点多少次并从解决方案中删除外部文件，每次运行时都会继续发生这种情况。

我猜有某种文件或设置保存在某处告诉 VS 执行此操作？任何人都可以帮我弄清楚事情，这样我就不必在每次需要运行我的应用程序时处理我目前并不关心的文件中的断点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:38:17.383

停止调试器后。通过打开该文件或从断点列表中手动删除该断点。是的，Visual Studio 将其存储为 pdb 文件的一部分。如果您不介意丢失所有调试信息，也可以选择删除该文件。

# c# - HttpWebResponse Close() 方法

> ID：13808733
> 
> 赞同：0
> 
> 时间：2012-12-10T20:32:22.737
> 
> 标签：c#, .net

我是否需要在使用 HttpWebResponse 类的实例后调用 Close 方法或其他一些清理方法。我没有访问响应流，而只是访问响应的标头和状态代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:35:20.417

是的。你不知道它的内部结构，这意味着你不知道*不*丢弃它是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:40:17.053

Yes, it is safe to close it.. scoping it with using clause is the best practice under such circumstances.

# c# - 互操作对象的内存管理

> ID：13808737
> 
> 赞同：0
> 
> 时间：2012-12-10T20:32:34.963
> 
> 标签：c#, memory-management

为了修复可能的内存泄漏，这里是它背后的历史： 有一个 VB 6.0 或 VC 6.0 文本编辑器控件，我们也必须在 .NET 中使用它。因此，在该控件的组件中，我看到了对该文本编辑器的一些 Interop 引用，然后我们创建了一个 .NET 自定义控件，将该文本编辑器放入其中，并在需要它的项目中使用它。

所以在 Designer.cs 文件中，我仍然看到如下变量：

```
private AxTextEditorLib.AxTextEditor ctlTEEditor; 
```

然后是这样的公共属性：

```
[Obsolete("This accessor method was added as a convenience for migrating to this component. Remove at earliest convenience.")]
[Browsable(false)]
public AxTextEditor TextEditor
{
    get
    {
        return ctlTEEditor;
    }
} 
```

.NET 设计器本身已经为此生成了标准的 dispose 方法，如下所示：

```
protected override void Dispose(bool disposing)
{
    if (disposing && (components != null))
    {
        components.Dispose();
    }
    base.Dispose(disposing);
} 
```

但这足够了吗？我需要更多的内存处理吗？我需要使用 Marshal.ReleaseObjects 或类似的东西吗？我需要手动释放事件处理程序吗？

![在此处输入图像描述](../Images/fa2c1715f0de92ad2c4e8cb894788f72.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:42:39.930

调用的有效性`Dispose()`始终取决于调用链中发生的情况`Dispose`。因此，在本例中，设计器代码正在调用`Dispose`已添加到`components`集合中的每个组件的方法。

要确定这是否有用，您需要查看`components`集合中有哪些组件，以及`Dispose`这些组件的方法是什么。

当然，如果您在代码的其他部分附加了事件处理程序，那么您应该确保它们作为`Dispose`.

对于您的包装组件，值得将其设置`null`为处置的一部分，但还要查看它是否具有自己的 Dispose 方法，或任何其他可能释放资源的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:43:27.747

如果 ctlTEEditor 尚未为 null，则将其设置为 null。还要检查这个控件的公共属性/方法，看看是否有暴露的方法来释放内存。

# php - WHERE 语法问题中的 PHP 变量 :(

> ID：13808739
> 
> 赞同：0
> 
> 时间：2012-12-10T20:32:40.893
> 
> 标签：php, variables

所以，我正在尝试做一个简单的查询，当我手动将 URL 作为字符串输入时，它可以正常工作。但是当我把它作为一个变量时它不起作用。我什至检查了变量，变量中有 URl。永远不要将变量放在 WHERE 语句中，因此不确定它是回声还是什么，只是似乎没有任何作用。

```
$external_result = $facebook->api(
    array(
        'method' => 'fql.query',
        'query' => 'SELECT share_count, 
                           like_count, 
                           comment_count, 
                           total_count 
                      FROM link_stat 
                     WHERE url="{$urlf}";'
    )
);

echo $external_result[0]['total_count']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:35:29.187

单引号字符串不允许变量插值：

```
$foo = 5;
echo("This is $foo"); # "This is 5"
echo('This is ' . $foo); #ditto
echo('This is $foo'); # "This is $foo"
echo("This is \$foo"); # ditto 
```

我建议您阅读一些 PHP 教程或拿起一本书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:37:48.003

PHP 语法中的**单**引号和**双**引号字符串是有区别的。单引号字符串不提供变量插值。而双引号字符串确实允许您在字符串文字中插入变量。有关详细信息，请参阅[PHP 字符串手册。](http://php.net/language.types.string)

这是你需要做的。

```
$external_result = $facebook->api(
    array(
        'method' => 'fql.query',
        'query' => "SELECT share_count, like_count, comment_count, total_count FROM link_stat WHERE url=\"{$urlf}\";"
    )
); 
```

通过将该字符串周围的单引号替换为双引号，您现在可以让 PHP 替换`$urlf`为它的实际值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:35:25.893

将您的代码更改为：

```
$external_result = $facebook->api(
    array(
        'method' => 'fql.query',
        'query' => 'SELECT share_count, like_count, comment_count, 
                    total_count FROM link_stat WHERE url="' . $urlf . '";'
    )
); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T20:35:13.180

如果您要执行类似的操作，请使用双引号。

```
'query' => "
            SELECT share_count, like_count, comment_count, total_count 
            FROM link_stat WHERE url='{$urlf}';
           " 
```

# c# - 安装过程中的 ActiveX CAB 错误

> ID：13808740
> 
> 赞同：1
> 
> 时间：2012-12-10T20:32:47.653
> 
> 标签：c#, permissions, activex, installshield, cab

好的，所以我一直在构建 ac#activeX 控件，并且在此过程中遇到了书中的每一个问题......话虽如此，除了安装程序之外，我现在已经准备好了一切

在深入研究问题本身之前，我需要解释一下我的设置过程是如何工作的，以及为什么我选择了这条路线。

1.  我有一个签名的 CAB 文件，用于存储我的设置 exe，该文件是使用对象标签通过网页加载的
2.  setup exe 是一个 InstallShield LE 项目，其中嵌入了我的项目（即要安装的文件是最终安装二进制文件的一部分）
3.  CAB 文件中有一个 INF 文件，它告诉调用者运行 setup exe 来安装控件

此过程运行良好并启动设置应用程序，然后成功安装控件。但是，在设置过程快结束时，非管理员用户会收到一条错误消息，说明如下：

```
An error occurred while copying file myINFFile.inf

Cannot copy file to destination directory.

Click Retry to retry the operation or click Cancel to 
```

（是的，它只是在'to'这个词之后切断）

如果您点击重试，它只会一遍又一遍地重复错误，直到您点击取消。如果您点击取消，它会显示“您希望安装程序在出现此错误后继续吗？”，然后继续成功安装控件。

由于此错误仅发生在权限有限的用户身上，我认为问题在于 cab 提取过程无法将 inf 文件提取到它试图将其提取到的位置……这很烦人，因为该文件没有其他用途，尤其是在安装过程中，但我无法弄清楚问题发生的原因或如何解决它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:57:35.913

使用[进程资源](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)管理器（由 Microsoft/SysInternals 提供）查看写入的文件。

我的猜测是您没有正确编写设置以允许每个用户安装您的 ActiveX 控件。

（作者：Robert Petz）如果将以下钩子添加到 INF 文件中，它会正确运行并将 cab 提取到允许的位置：

```
 [Deployment]
     InstallScope=user 
```

# javascript - 带有 d3.js 和关联数组的条形图

> ID：13808741
> 
> 赞同：2
> 
> 时间：2012-12-10T20:32:48.527
> 
> 标签：javascript, d3.js, associative-array, bar-chart

我放弃了，我想不通。
我试图创建一个条形图，`3d.js`但我无法让它工作。可能我对处理复杂的关联数组的理解还不够。

我的数组具有以下结构：

```
{"January"=>{"fail"=>13, "success"=>6},  
 "February"=>{"success"=>10, "fail"=>4},  
 "March"=>{"success"=>9, "fail"=>13},  
 "April"=>{"success"=>16, "fail"=>5},   
 "May"=>{"fail"=>52, "success"=>23},   
 "June"=>{"fail"=>7, "success"=>2},   
 "July"=>{},  
 "August"=>{"fail"=>6, "success"=>3},  
 "September"=>{"success"=>54, "fail"=>59},   
 "October"=>{"success"=>48, "fail"=>78},  
 "November"=>{"fail"=>4, "success"=>6},  
 "December"=>{"fail"=>1, "success"=>0}}` 
```

我得到了轴工作的显示： ![在此处输入图像描述](../Images/c2d9528f3a4fd6d27eace978bf7b274e.png)

代码看起来很丑，因为我将名称转换为“普通”数组：

```
monthsNames = new Array();
i = 0;
for (key in data) {
  monthsNames[i] = key;
  i++;
}

x.domain(monthsNames);
y.domain([0, 100]); 
```

但我无法弄清楚如何处理数据。

我试过这样的事情，`svg.selectAll(".bar").data(d3.entries(data))` 我猜这是一个好的开始，但我无法连接到轴工作。

我想要创建的是一个`bar-chart`以月份为 x 轴并且每个月都有两个条形图（分别是一个有两种颜色的条形图） - 一个代表成功，一个代表失败。

有人可以帮我如何处理数据吗？提前致谢！

编辑：

我不知道如何缩放 x 和 y。如果我使用此代码：

```
var x = d3.scale.ordinal()
   .domain(monthsNames)
   .range([0, width]);

var y = d3.scale.linear()
   .domain([0,100])
   .range([0, height]); 
```

什么都没有出现。如果我打印出使用例如 x(d.key) 或 x(d.value.fail) 后评估的值，它们真的是奇怪的数字，有时甚至是 NaN。

编辑：

```
d3.selectAll(".barsuccess")
      .on('mouseover', function(d){
                    svg.append('text')
                    .attr("x", x(d.key))
                    .attr("y", y(d.value.success))
                    .text(d.value.success+"%")
                    .attr('class','success')
                    .style("font-size","0.7em")
                })
                .on('mouseout', function(d){
                    d3.selectAll(".success").remove()
                });  

d3.selectAll(".barfail")
          .on('mouseover', function(d){
                        svg.append('text')
                        .attr("x", x(d.key)+x.rangeBand()/2)
                        .attr("y", y(d.value.fail))
                        .text(d.value.fail+"%")
                        .attr('class','fail')
                        .style("font-size","0.7em")
                    })
                    .on('mouseout', function(d){
                        d3.selectAll(".fail").remove()
                    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:05:29.657

[请务必在此处](http://mbostock.github.com/d3/tutorial/bar-1.html)和[此处](http://mbostock.github.com/d3/tutorial/bar-2.html)查看条形图教程。你基本上已经拥有了你所需要的一切。轴和数据之间的连接是将输入值（例如“March”）映射到输出坐标（例如 125）的函数。您（大概）使用`d3.scale.*`. 现在您需要做的就是使用相同的函数将数据映射到 SVG 中的坐标。

您需要添加的代码的基本结构如下所示

```
svg.selectAll(".barfail").data(d3.entries(data))
   .enter().append("rect")
   .attr("class", "barfail")
   .attr("x", function(d) { x(d.key) })
   .attr("width", 10)
   .attr("y", function(d) { y(d.value.fail) })
   .attr("height", function(d) { y(d.value.fail) }); 
```

和类似的`success`。如果您对两种类型的条形图使用相同的 x 轴比例，请向其中一种类型添加一个恒定偏移量，这样条形图就不会重叠。颜色等可以在 CSS 类中设置。

# php - 网站内容重叠

> ID：13808742
> 
> 赞同：0
> 
> 时间：2012-12-10T20:32:56.010
> 
> 标签：php, html, wordpress

我在为某人工作的网站上遇到内容过度包装的问题。

我在顶部添加了倒数计时器/注册区域。但是，它在所有主要浏览器中都有重叠。起初我认为这是一个简单的修复，只是添加了一个透明图像来进一步降低内容。但是，后来我意识到它为 FireFox 修复了它，但在 Chrome 和 Safari 上仍然重叠。

我认为部分原因是我查看代码的时间太长了，并且遗漏了一些简单的东西。如果有人可以发布需要添加/更改的内容，那就太好了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:40:54.917

您的标题 ( `#header_wrapper`) 中包含倒计时，其高度设置为 131 像素。

这意味着，布局不会考虑倒计时的完整大小。

您可能希望将倒计时移出标题包装器并进入内容包装器，或者适当地更正标题的高度。

# c - 从文件中读取文本到嵌套循环

> ID：13808745
> 
> 赞同：0
> 
> 时间：2012-12-10T20:33:14.020
> 
> 标签：c, loops, nested

我在将文件中的某些输入读取到多维数组时遇到了一些麻烦。我有两个嵌套的 for 循环，它们打印出不同的输出，但我希望它们打印出相同的输出。我已经坚持了几个小时，可能只是处于精神障碍中。输入文件是一组 9x9 的数字。我的问题发生在 [0][8]、[1,8] 等处。因为它只是从 [1,0]、[2,0] 等处复制值……这是第一个嵌套循环及其输出：

```
for(j=0;j<9;j++){
    if(j!=0){
        printf("%c",fgetc(file));
    }
    for(k=0;k<9;k++){
        array[j][k]=fgetc(file);
        printf("array[%i][%i] :%c \n",j,k,array[j][k]);
    }
    printf("\n");
} 
```

一些输出：

```
array[0][0] :8   
array[0][1] :5   
array[0][2] :2     
array[0][3] :7    
array[0][4] :1    
array[0][5] :3    
array[0][6] :9   
array[0][7] :4  
array[0][8] :6  

array[1][0] :4  
array[1][1] :3  
array[1][2] :1  
array[1][3] :9  
array[1][4] :2  
array[1][5] :6  
array[1][6] :5  
array[1][7] :7  
array[1][8] :8  

array[2][0] :9  
array[2][1] :7  
array[2][2] :6  
array[2][3] :5  
array[2][4] :4  
array[2][5] :8  
array[2][6] :2  
array[2][7] :3  
array[2][8] :1 
```

这是我的第二个嵌套循环，它位于前一组代码的正下方。我想做的只是读取我刚刚写入的多维数组的内容。

```
for(j=0;j<9;j++){
    for(k=0;k<9;k++){   
        printf("array[%i][%i] :%c \n",j,k,array[j][k]);
    }
    printf("\n");
} 
```

这是这个循环的输出：

```
array[0][0] :8  
array[0][1] :5  
array[0][2] :2  
array[0][3] :7  
array[0][4] :1  
array[0][5] :3  
array[0][6] :9  
array[0][7] :4  
array[0][8] :4  

array[1][0] :4  
array[1][1] :3  
array[1][2] :1  
array[1][3] :9  
array[1][4] :2  
array[1][5] :6  
array[1][6] :5  
array[1][7] :7  
array[1][8] :9  

array[2][0] :9  
array[2][1] :7  
array[2][2] :6  
array[2][3] :5  
array[2][4] :4  
array[2][5] :8  
array[2][6] :2  
array[2][7] :3  
array[2][8] :7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:01:05.397

问题是数组被声明为：

```
int array[8][8]; 
```

但数组应该是 9x9（因此`int array[9][9];`）。如果您的数组是 8x8，那么您的有效循环索引是 0..7，而不是 0..8。您正在覆盖数组的边界，导致完全未定义的行为。值得注意的是，一旦你在第九行，你就完全超出了数组的范围，在谁知道其他数据上乱涂乱画。

显示的覆盖正是您在这种情况下所期望的。第二行的第一个数字会覆盖“第一行”的最后一个数字，因此输入的代码不会看到 6，而是看到 4。

第一个循环：

```
array[0][8] :6  

array[1][0] :4 
```

第二个循环：

```
array[0][8] :4  

array[1][0] :4 
```

# sql - 如何让所有员工的工资低于平均工资？

> ID：13808746
> 
> 赞同：-2
> 
> 时间：2012-12-10T20:33:17.543
> 
> 标签：sql

我可以获得员工人数和平均工资，但是当我尝试获得列出低于平均工资的员工人数的附加选择时，它失败了。

```
select count(employee_id),avg(salary) 
from employees
Where salary < avg(salary); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:41:34.500

问题是这`AVG`是一个聚合函数。SQL 不够聪明，无法弄清楚如何在行中混合聚合结果。传统的方法是使用连接：

```
select count(*), avg(e.salary),
        sum(case when e.salary < const.AvgSalary then 1 else 0 end) as NumBelowAverage
from employees e cross join
     (select avg(salary) as AvgSalary from employees) as const 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T20:35:20.917

```
select count(*), (select avg(salary) from employees)
from employees 
where salary < (select avg(salary) from employees); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:44:00.240

不清楚您希望在结果集中包含哪些列，这使得您很难回答您的问题。使问题清晰可提高答案的质量。

你似乎想要 3 个事实：

1.  在职员工人数。
2.  平均工资。
3.  收入低于平均工资的员工人数。

并且您显示了一个查询，该查询完成了前两个事实的工作：

```
SELECT COUNT(*) AS NumberOfEmployees,
       AVG(Salary) AS AverageSalary
  FROM Employees 
```

`COUNT(*)`和有什么区别`COUNT(Employee_ID)`？不同之处在于后者只计算 Employee_ID 列中存在非 NULL 值的行。一个好的优化器会识别 Employee_ID 是一个主键并且不包含 NULL 值，并且查询将是相同的。但是`COUNT(*)`更传统，对优化器的依赖更少。

其他统计信息可以通过子查询在选择列表中生成为简单值：

```
SELECT COUNT(*) AS NumberOfEmployees,
       AVG(Salary) AS AverageSalary,
       (SELECT COUNT(*)
          FROM Employees
         WHERE Salary < (SELECT AVG(Salary) FROM Employees)
       ) AS NumberOfEmployeesPaidSubAverageWages
  FROM Employees 
```

在很多情况下，这样写子查询是不合适的，但是对于指定查询的解释，就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T20:38:02.853

```
 select TotalNumberOfEmployees,
          AverageSalary,
          count(e.employee_id) NumberOfEmployeesBelowAverageSalary
     from (
            select count(employee_id) TotalNumberOfEmployees,
                   avg(salary) AverageSalary
              from employees
          ) preagg
left join employees e on e.salary < preagg.AverageSalary
 group by TotalNumberOfEmployees,
          AverageSalary 
```

Note: I used a LEFT join so if you had 3 equal employees, it would show 0 instead of no results (nobody below below average).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T18:53:12.243

```
SELECT e.ename,e.deptno,e.sal,d.avg
FROM emp e,(SELECT deptno, avg(sal) avg
             FROM emp
             GROUP BY deptno) d
 WHERE e.deptno=d.deptno
 AND
 e.sal < d.avg 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-19T15:09:25.473

```
select * from <table name> where salary < (select avg(<salary column name) from <table name>); 
```

例子：

```
select * from EMPLOYEE where sal < (select avg(emp_sal) from EMPLOYEE); 
```

# twitter4j - 带有地理位置的 Twitter4j 流式传输

> ID：13808748
> 
> 赞同：2
> 
> 时间：2012-12-10T20:33:21.763
> 
> 标签：twitter4j, twitter-streaming-api

我正在使用 Twitter4j 流媒体 API。我正在使用地理位置约束来仅从特定区域获取推文。这是代码的那一部分：

```
 twitterStream.addListener(listener);
    String[] keywordsArray = { "iphone", "america", "samsung" };
    FilterQuery filterQuery = new FilterQuery();
    filterQuery.track(keywordsArray);
    double[][] locations = { { 40.714623d, -74.006605d },
            { 42.3583d, -71.0603d } };
    filterQuery.locations(locations);
    twitterStream.filter(filterQuery); 
```

这实际上返回了我的结果，但几乎所有的推文都带有地理定位为 NULL。25-30 条（甚至更多）推文中的一条将带有地理标签。谁能指出我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:04:46.123

据我所知，twitter 流 API 不允许同时按关键字**和**位置进行搜索。您的代码正在搜索具有以下关键字的推文：{ "iphone", "america", "samsung" }**或**属于以下位置：{ { 40.714623d, -74.006605d },{ 42.3583d, -71.0603d } } . 因此，您获得的带有地理标签的推文是属于给定位置的推文，而其他推文则属于给定的关键字。

# objective-c - 以编程方式选择uitableview行

> ID：13808752
> 
> 赞同：12
> 
> 时间：2012-12-10T20:33:42.810
> 
> 标签：objective-c, ipad, uitableview

我已经阅读了很多关于这个论点的内容，我已经测试了这个有效的例子： [源代码示例](https://github.com/vikingosegundo/my-programming-examples/tree/master//TwoTableViews/)。但这不使用情节提要（我不知道这是否是使我的项目无法正常工作的原因）我使用情节提要制作了另一个项目，相同的指令顺序不起作用...

```
-(void)viewDidAppear:(BOOL)animated{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:1 inSection:0];
    [firstController.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    [firstTable.delegate tableView:firstTable didSelectRowAtIndexPath:indexPath];
} 
```

这是我的项目，与上一个链接相同，仅添加 viewDidAppear [我不工作的项目](http://www.2shared.com/file/6sBsVFB7/test.html) 可以有人告诉我出了什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-10T20:49:50.080

我试图研究您下载项目的代码。问题是 firstController.tableView 为零。
所以修复它：

```
[firstTable selectRowAtIndexPath:indexPath 
                        animated:NO 
                  scrollPosition:UITableViewScrollPositionNone]; 
```

或者将 firstController.tableView 分配给表格视图。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-10T20:44:14.343

```
- (void)viewDidLoad {
    [self.tableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:UITableViewScrollPositionNone];
} 
```

如果您想要来自委托的回调：

```
if ([self.tableView.delegate respondsToSelector:@selector(tableView:didSelectRowAtIndexPath:)]) {
    [self.tableView.delegate tableView:self.tableView didSelectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
} 
```

# objective-c - 目标 C：前向声明与解析问题中未找到属性：预期类型

> ID：13808758
> 
> 赞同：0
> 
> 时间：2012-12-10T20:34:07.583
> 
> 标签：objective-c, forward-declaration

我有一个名为 DataManager 的单例类。这个类被其他几个类用来处理加载和保存 plist 文件。

我正在添加 DataManager 保存屏幕截图和 plist 文件的功能。这需要我加载我希望截屏的视图。我正在加载的视图来自导入 DataManager 的控制器。

显然这是循环依赖，所以我使用了：

```
@class GardenView; 
```

但是，这导致了以下错误：

*   类消息的接收者“GardenView”是前向声明
*   接收器类型“GardenView”例如消息是转发
*   在转发类中找不到声明属性“边界”
*   在转发类对象“GardenView”中找不到对象“GardenView”属性“层”

这似乎找不到从 UIView 超类继承的属性。前向类声明是这样吗？

如果我使用标准的#import 而不是@class，我会得到：

*   解析问题：预期 A 类型

对于 GardenView 中引用 Plant 的方法（我可以很好地导入）：

```
- (void) addPlantToView: (Plant*) plant;
- (void) addPlantToGarden: (Plant*) plant;
- (void) addPlantToViewAndGarden: (Plant*) plant; 
```

Plant 类确实导入了 DataManager，但如果我将其更改为 @class，我会得到：

*   选择器“sharedDataManager”没有已知的类方法

这个问题的解决方案是什么？类方法在头文件（+sharedDataManager）中。我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:37:11.403

You haven't made it clear where exactly you're doing the imports vs `@class`. And I think that's causing confusion. Here's what you want to do:

*   In GardenView.h, use `@class Plant`
*   In Plant.h, use `@class GardenView`
*   In GardenView.m, use `#import "Plant.h"`
*   In Plant.m, use `#import "GardenView.m"`

This breaks the circular dependency in the headers, but still allows the implementations to see the full information of the dependent class.

Now the reason why `@class` alone isn't sufficient is because all `@class Foo` does is it tells the compiler "There exists a class named Foo", without telling it anything at all about the class. The compiler doesn't know its methods. It doesn't know its superclass. All it knows is if it sees the token `Foo`, then that represents a class type. You can use this in header files so you can refer to the class in arguments and return types, but in order to actually do anything with values of that type you still need the full `#import`. But you can put that `#import` in the .m file without any problem.

The only time you need `#import` instead of `@class` in your header is if you want to inherit from the class in question. You cannot inherit from forward-declared classes, so you need the full `#import`. Of course, you may also need the `#import` if you need access to other types defined in the same header (e.g. structs, enums, etc.), but that's less common in obj-c.

# android - 将 Google play 作为新应用程序打开

> ID：13808763
> 
> 赞同：3
> 
> 时间：2012-12-10T20:34:21.383
> 
> 标签：android, android-intent, google-play

我目前正在以许多地方描述的方式打开 Google Play：通过启动指向市场的新意图，如下所述：

[在手机版android中打开google play store的链接](https://stackoverflow.com/questions/10922762/open-link-of-google-play-store-in-mobile-version-android)

但是，如果用户没有点击后退按钮，而是再次点击我的应用程序的图标，这会使市场保持开放。

有没有一种简单的方法可以强制 Google Play 在自己的应用程序中加载，而不是作为我的新 Activity 加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:47:45.283

```
public void goToMarket(){
    Uri uri = Uri.parse("market://details?id=" + getPackageName());
    Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
    goToMarket.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    try {
        startActivity(goToMarket);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(this, getResources().getString(R.string.errorLaunchMarket), Toast.LENGTH_LONG).show();
    }
} 
```

如前所述，您可以`Intent.FLAG_ACTIVITY_NEW_TASK`将`setFlags()`.

# python-2.6 - 使用 python 的 ftplib 下载二进制格式的 zipfile

> ID：13808769
> 
> 赞同：1
> 
> 时间：2012-12-10T20:34:44.943
> 
> 标签：python-2.6, zipfile

我已经发布了很多似乎相关的问题，但与我遇到的问题并不完全相同：

我正在使用 python 的 ftplib 模块和 zipfile 从 ftp 下载二进制格式的 zip 文件。但是，由于某种原因，下载的 zip 文件似乎是 ascii 格式的。

我已确保`/`我正在下载的文件的路径中不存在前导（以匹配 zip 规范）。

```
outFile = zipfile.ZipFile(local_file_path, 'w')
myftp.retrbinary('RETR %s' %i, outFile.write(i))  #i - target file path on ftp server 
```

此代码未能给我以下错误：

```
st = os.stat(filename)
OSError: [Errno 2] No such file or directory: //$i 
```

我尝试为二进制添加“b”选项，但 zipfile 似乎不喜欢它：

```
outFile = zipfile.ZipFile(local_file_path, 'wb') 
```

这会引发错误：

```
RuntimeError: ZipFile() requires mode "r", "w", or "a" 
```

我正在使用python v2.6。

我做错了什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T23:52:47.790

根据python doc（[http://docs.python.org/2/library/ftplib.html](http://docs.python.org/2/library/ftplib.html)）似乎`retrbinary`需要一个回调作为第二个参数：

```
>>> ftp.retrbinary('RETR README', open('README', 'wb').write)
'226 Transfer complete.'
>>> ftp.quit() 
```

文档说：

> FTP.retrbinary（命令，回调[，maxblocksize [，休息]]）
> 
> *以二进制*传输模式检索文件。命令应该是适当的 RETR 命令：“RETR 文件名”。为接收到的**每个数据块调用****回调**函数 ，并使用单个字符串参数给出数据块。[...]

 **在您的示例中，它应该是`outfile.write`（而不是`outfile.write(i)`）。

```
>>> ftp.retrbinary('RETR %s' % i, outFile.write) 
```**

# codeigniter - Recaptcha 不会在 CodeIgniter 项目中发布

> ID：13808773
> 
> 赞同：1
> 
> 时间：2012-12-10T20:34:52.073
> 
> 标签：codeigniter, recaptcha

我在 CodeIgniter 应用程序中实现 recaptcha 时遇到问题。问题是 recapctha_challenge_field 和 recaptcha_response_field 没有被发布，但是，recapctcha（和那些字段）在页面上（在表单内）是可见的。recapctha_challenge_field 和 recaptcha_response_field 出现在页面的 HTML 中，但在我发布表单时没有出现在标题中。

我已经下载了 de recaptcha 库并将其添加为 CI 中的助手。在我看来，我在表单中回显了 recaptcha_get_html($publickey) （带有公钥集）。在我的控制器中，我加载了 recaptchalib_helper 并为 recapctha_challenge_field 添加了一个表单验证规则。

这是我的看法：

```
<h1>Register</h1>

<fieldset>
    <legend>Personal information</legend>

    <?php
    echo form_open('login/create_user');

    echo form_label('First name:', 'first_name');
    echo form_input(
            array(
                'name' => 'first_name',
                'id' => 'first_name',
                'value' => set_value('first_name')
            )    
    );

    echo form_label('Last name:', 'last_name');
    echo form_input(
            array(
                'name' => 'last_name',
                'id' => 'last_name',
                'value' => set_value('last_name')
            )
    );

    echo form_label('Birth date:', 'birth_date');
    echo form_input(
            array(
                'name' => 'birth_date',
                'id' => 'birth_date',
                'value' => set_value('birth_date')
            )
    );

    echo form_label('E-mail:', 'email');
    echo form_input(
            array(
                'name' => 'email',
                'id' => 'email',
                'value' => set_value('email')
            )
    );
    ?>
</fieldset>

<fieldset>
    <legend>Login information</legend>

    <?php
    echo form_label('Username:', 'username');
    echo form_input(
            array(
                'name' => 'username',
                'id' => 'username',
                'value' => set_value('username')
            )
    );

echo form_label('Password:', 'password1');
echo form_password(
        array(
            'name' => 'password1',
            'id' => 'password1',
            'value' => set_value('password1')
        )
);

echo form_label('Confirm password:', 'password2');
echo form_password(
        array(
            'name' => 'password2',
            'id' => 'password2',
            'value' => set_value('password2')
        )
);

$publickey = "mypublickey"; // here I entered my public key
echo recaptcha_get_html($publickey);

echo form_label(nbs(1), 'submit');
echo form_submit(
        array(
            'name' => 'submit',
            'id' => 'submit',
            'value' => 'Registreren'
        )
    );

    echo form_close();
    ?>

    <?php echo validation_errors('<p class="error">'); ?>
</fieldset>
</div> 
```

这是我的控制器的一部分：

```
function create_user() {
    print_r($_POST);//for debugging
    $this->load->library('form_validation'); 
    $this->load->model('user');

    $this->form_validation->set_rules('recaptcha_challenge_field', 'Captcha', 'callback_validate_captcha');
    $this->form_validation->set_rules('first_name', 'First name', 'trim|xss_clean|required');
    $this->form_validation->set_rules('last_name', 'Last name', 'trim|xss_clean|required');
    $this->form_validation->set_rules('email', 'E-mail', 'trim|xss_clean|valid_email|callback_is_email_available|required');

    $this->form_validation->set_rules('username', 'Username', 'trim|xss_clean|min_length[5]|callback_is_username_available|required');
    $this->form_validation->set_rules('password1', 'Password', 'trim|xss_clean|min_length[8]|max_length[32]|required');
    $this->form_validation->set_rules('password2', 'Confirm password', 'trim|xss_clean|matches[password1]|required');

    if ($this->form_validation->run() == FALSE) {
        $this->signup();
    } else {
        if ($this->user->create_user($this->input->post('username'),$this->input->post('password1'),$this->input->post('email'),$this->input->post('first_name'),$this->input->post('last_name'),$this->input->post('birth_date'))) {
            $data['main_content'] = 'login/signup_successful';
            $this->load->view('includes/template', $data);
        } else {
            $this->load->view('login/signup_form');
        }
    }
}

 public function validate_captcha($recaptcha_challenge_field) {
    $this->load->helper('recaptchalib');
    $privatekey = "myprivatekey";//this is et to my private key
    $resp = recaptcha_check_answer ($privatekey,
                                    $this->input->ip_address(),
                                    $this->input->post("recaptcha_challenge_field"),
                                    $this->input->post("recaptcha_response_field"));

    if (!$resp->is_valid) {
        $this->form_validation->set_message('validate_captcha', 'Invalid Capctha code entered.');
        return FALSE;
    } else {
        return TRUE;
    }
} 
```

验证码字段未在 HTTP 标头中设置：

```
Form data:
csrf_test_name:8cc3f2391784867df2d46f193a65a317
first_name:Myfirstname
last_name:Mylastname
birth_date:10-12-2012
email:myemail@adres.com
username:username
password1:password
password2:password
submit:Register 
```

我究竟做错了什么？

忠实于你的，

阿尔文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:11:39.487

表单标签不是在表格、tbody 或 tr 中开始吗？

# python - 我想根据相似的属性对元组进行分组

> ID：13808774
> 
> 赞同：2
> 
> 时间：2012-12-10T20:34:55.113
> 
> 标签：python, list, tuples

我有一个元组列表。[ (1, 2), (2, 3), (4, 3), (5, 6), (6, 7), (8, 2) ]

我想根据连接的元组（具有相关值）将它们分组到列表中。

所以最终结果是两个相关元组值列表 = [ [1, 2, 3, 4, 8], [5, 6, 7] ]

我怎样才能写一个函数来做到这一点？这是一个求职面试问题。我试图在 Python 中做到这一点，但我很沮丧，只想看看答案背后的逻辑，所以即使是伪代码也会帮助我，所以我可以看到我做错了什么。

我只有几分钟的时间当场这样做，但这是我尝试过的：

```
def find_partitions(connections):
 theBigList = []     # List of Lists
 list1 = []          # The initial list to store lists
 theBigList.append(list1)

 for list in theBigList:
 list.append(connection[1[0], 1[1]])
     for i in connections:
         if i[0] in list or i[1] in list:
             list.append(i[0], i[1])

         else:
             newList = []
             theBigList.append(newList) 
```

本质上，这家伙想要一个相关值列表的列表。我尝试使用 for 循环，但意识到它不起作用，然后时间用完了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:51:53.057

在我们填写组件时，在每个阶段都需要考虑三种情况（因为您**必须**匹配重叠的组）：

1.  x 或 y 均不在已找到的任何组件中。
2.  两者都已经在**不同的集合**中，x 在 set_i 和 y 在 set_j。
3.  一个或两个都在一个组件中，x 在 set_i 中或 y 在 set_i 中。

我们可以使用内置的`set`帮助。*（见@jwpat 和@DSM 的更棘手的例子）*：

```
def connected_components(lst):
    components = [] # list of sets
    for (x,y) in lst:
        i = j = set_i = set_j = None
        for k, c in enumerate(components):
            if x in c:
                i, set_i = k, c
            if y in c:
                j, set_j = k, c

        #case1 (or already in same set)
        if i == j:
             if i == None:
                 components.append(set([x,y]))
             continue

        #case2
        if i != None and j != None:
            components = [components[k] for k in range(len(components)) if k!=i and k!=j]
            components.append(set_i | set_j)
            continue

        #case3
        if j != None:
            components[j].add(x)
        if i != None:
            components[i].add(y)

    return components               

lst = [(1, 2), (2, 3), (4, 3), (5, 6), (6, 7), (8, 2)]
connected_components(lst)
# [set([8, 1, 2, 3, 4]), set([5, 6, 7])]
map(list, connected_components(lst))
# [[8, 1, 2, 3, 4], [5, 6, 7]]

connected_components([(1, 2), (4, 3), (2, 3), (5, 6), (6, 7), (8, 2)])
# [set([8, 1, 2, 3, 4]), set([5, 6, 7])] # @jwpat's example

connected_components([[1, 3], [2, 4], [3, 4]]
# [set([1, 2, 3, 4])] # @DSM's example 
```

这当然不是最有效的方法，但可能与他们所期望的相似。*正如 Jon Clements 指出的那样，有一个用于这些类型计算的库：[networkx](http://networkx.lanl.gov/index.html)，在那里它们将更加有效。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:57:06.063

```
l = [ (1, 2), (2, 3), (4, 3), (5, 6), (6, 7), (8, 2) ]

# map each value to the corresponding connected component
d = {}
for i, j in l:
  di = d.setdefault(i, {i})
  dj = d.setdefault(j, {j})
  if di is not dj:
    di |= dj
    for k in dj:
      d[k] = di

# print out the connected components
p = set()
for i in d.keys():
  if i not in p:
    print(d[i])
  p |= d[i] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:51:34.053

这当然不优雅，但它有效：

```
def _grouper(s,ll):
    for tup in ll[:]:
        if any(x in s for x in tup):
            for y in tup:
                s.add(y)
                ll.remove(tup)

def grouper(ll,out=None):
    _ll = ll[:]
    s = set(ll.pop(0))
    if out is None:
        out = [s]
    else:
        out.append(s)

    l_old = 0
    while l_old != len(_ll):
        l_old = len(_ll)
        _grouper(s,_ll)

    if _ll:
        return grouper(_ll,out=out)
    else:
        return out

ll = [ (1, 2), (2, 3), (4, 3), (5, 6), (6, 7), (8, 2) ]
print grouper(ll) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T20:56:31.543

使用`sets`：

```
In [235]: def func(ls):
    new_lis=sorted(sorted(ls),key=min) 
    lis=[set(new_lis[0])]
    for x in new_lis[1:]:
            for y in lis:
                    if not set(x).isdisjoint(y):
                            y.update(x);break 
            else:lis.append(set(x))
    return lis
   .....: 

In [236]: func([(3, 1), (9, 3), (6, 9)])
Out[236]: [set([1, 3, 6, 9])]

In [237]: func([[2,1],[3,0],[1,3]])
Out[237]: [set([0, 1, 2, 3])]

In [239]: func([(1, 2), (4, 3), (2, 3), (5, 6), (6, 7), (8, 2)])
Out[239]: [set([8, 1, 2, 3, 4]), set([5, 6, 7])] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T04:37:33.917

怎么样

```
ts = [(1, 2), (2, 3), (4, 3), (5, 6), (6, 7), (8, 2)]
ss = []
while len(ts) > 0:
    s = set(ts.pop())
    ol = 0
    nl = len(s)
    while ol < nl:
        for t in ts:
            if t[0] in s or t[1] in s: s = s.union(ts.pop(ts.index(t)))
        ol = nl
        nl = len(s)
    ss.append(s)

print ss 
```

# php - 是否可以在检查某些方程式的 2 列时按不同的表排序

> ID：13808783
> 
> 赞同：0
> 
> 时间：2012-12-10T20:35:17.803
> 
> 标签：php, mysql

所以可以说我有 2 张桌子。

**表用户：**

编号 | 姓名 | 日期

**表权重跟踪；**

编号 | 用户 ID | 以前的重量 | 当前重量 | 日期

weight_tracking 表每天都会更新用户当前体重和previous_weight。

我正在尝试按 previous_weight - current_weight 显示所有用户排序（因此通过重量差异 - 减掉最多体重的人将首先出现）

可以通过 1 个电话完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:37:30.213

```
SELECT users.*, weight_tracking.*
FROM users left join weight_tracking on users.id = weight_tracking.user_id
ORDER BY previous_weight - current_weight desc 
```

如果用户可以在 weight_tracking 表中拥有多于一行，则可以使用以下内容：

```
SELECT users.*
FROM users left join weight_tracking on users.id = weight_tracking.user_id
GROUP BY users.id
ORDER BY max(previous_weight) - min(current_weight) desc 
```

# html - 如何让 Div 与中间对齐，并且相对于父 Div？

> ID：13808788
> 
> 赞同：0
> 
> 时间：2012-12-10T20:35:21.977
> 
> 标签：html, css

**html:**

```
<div class="parent">
<div>
         <a href="">First Page</a><a href="">Second Page</a><a href="">Third Page</a>
</div>
</div> 
```

**CSS：**

```
div.parent > div > a {
margin-right: 2em;              
}
div.parent {
border: 1px solid red;
height: 100px;
background-color: #bbb;
}
div.parent > div {
border: 1px solid lightblue;
background-color: #fff;

height: 40px;
width: 900px;

display: block;
float: default;
margin: 0 auto 0;
} 
```

* * *

**例子：**

样式表的结果可以在 JSFiddle 上看到：http: [//jsfiddle.net/BMEXR/2/](http://jsfiddle.net/BMEXR/2/)

*注意：设置颜色和间距是为了更好地区分。*

怎么会`div`在`aligned`中`middle`，而那`relative`到其`parent`？这样`div`会移动`relative`到`height setting`的`parent div`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:32:48.933

Maybe you could try something like this using jQuery: [http://jsfiddle.net/BMEXR/32/](http://jsfiddle.net/BMEXR/32/)

**HTML:**

```
<div class="parent">
    <div class="container">
        <ul>
            <a href="">First Page</a> | <a href="">Second Page</a> | <a href="">Third Page</a>
        </ul>
    </div>
</div> 
```

​</p>

**CSS:**

```
div.parent {
    border: 1px solid red;
    height: auto;
    background-color: #bbb;
    text-align: center;
    padding: 5px;
}

div.container {
    margin: 0 auto;
    border: 1px solid lightblue;
} 
```

​</p>

**JS:**

```
$(function() {
    var aSize = $('a').size();
    var aTotalSize = 0;

    for(var i = 0; i < aSize; i++) {
        aTotalSize += $('a').eq(i).width()+10;
    }
    $('.container').width(aTotalSize);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:14:29.733

如果您不介意一些标记更改：http: [//jsfiddle.net/BMEXR/30/](http://jsfiddle.net/BMEXR/30/)

HTML：

```
<div class="parent">
    <div class="childContainer">
        <div class="childContents">
             <a href="">First Page</a><a href="">Second Page</a><a href="">Third Page</a>
        </div>
    </div>
</div> 
```

CSS：

```
div.childContents a {
   margin-right: 2em;              
}
div.childContents{
   background-color:white;
   height: 25px;
   width: 900px;    
}
div.parent {
   border: 1px solid red;
   height: 100px;
   background-color: #bbb;
   display:table-row;
}
div.childContainer {
   border: 1px solid lightblue;
   background-color: transparent;
   vertical-align:middle;
   display: table-cell;
} 
```

# java - 尝试从孩子的进程标准输出中读取时程序挂起

> ID：13808792
> 
> 赞同：0
> 
> 时间：2012-12-10T20:35:32.010
> 
> 标签：java, process, io

我等待启动一个进程，将一个整数传递给它，然后得到一个它打印出来的值。我尝试了以下（在 Windows 中）：

```
public class Example {

    public static Boolean call() throws IOException {
        String mFilename = "f.exe";
        int mParam = 0;
        Process p = Runtime.getRuntime().exec(mFilename);
        BufferedReader input = new BufferedReader
                (new InputStreamReader(p.getInputStream()));
        BufferedWriter output = new BufferedWriter
                (new OutputStreamWriter(p.getOutputStream()));
        output.write(mParam);
        output.flush();
        char retVal = (char) input.read();
        return !(retVal == '0');
    }

    public static void main(String[] args) throws IOException {
        System.out.println(call());
    }
} 
```

`mFilename`是可执行文件的路径。该过程返回正输入 1，负输入 0，如果为 0，则保持无限循环`mParam`。但是，我发现无论传递给它的值`retVal`是什么，始终是 1。我做错了什么？

请原谅我几分钟前删除了这个问题，我认为问题出在`retVal`但显然这不是这段代码中唯一的问题。

子进程，用 C++ 编写：

```
#include <iostream>
#include <Windows.h>

bool f(int x)
{
    if (x)
        return x > 0;

    while (1)
        Sleep(100);
}

int main()
{
    int x;
    std::cin>>x;
    std::cout<<f(x);
} 
```

**更新：**

我发现了至少一个错误。由于`mParam`是一个整数，它由一个可选的符号和一堆数字组成，并且`output.write`写入字符，我需要将我的整数写入一个字符数组：

```
char[] arr = String.valueOf(mParam).toCharArray();
output.write(arr); 
```

但是，无论输入如何，在此修复程序挂起之后

```
char retVal = (char) input.read(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:12:32.733

好吧，结果证明解决方案非常简单：`std::cin`只需要​​一个换行符来成功读取整数。结果代码如下：

```
public Boolean call() throws IOException, InterruptedException, ExecutionException, TimeoutException {
    Process p = Runtime.getRuntime().exec(mFilename);
    final BufferedReader input = new BufferedReader
            (new InputStreamReader(p.getInputStream()));
    final BufferedWriter output = new BufferedWriter
            (new OutputStreamWriter(p.getOutputStream()));
    output.write(Integer.toString(mParam));
    output.newLine();
    output.flush();

    ExecutorService executor = Executors.newFixedThreadPool(2);
    Callable<Character> readTask = new Callable<Character>() {
        @Override
        public Character call() throws Exception {
            return Character.valueOf((char)input.read());
        }
    };
    Future<Character> future = executor.submit(readTask);
    char readVal;
    try {
        readVal = future.get(3L, TimeUnit.SECONDS);
    } finally {
        p.destroy();
        executor.shutdownNow();
    }

    return !(readVal == '0');
} 
```

请注意，我添加了对“无限循环”情况的支持。如果我们无法在 3 秒内从 stdout 获得输出，我们会抛出异常并终止子进程。我在这里不处理异常，因为函数必须返回一些结果，但在无限循环的情况下，我没有任何结果要返回。

# geocoding - YQL 地理编码从不同的 IP 返回不同的结果

> ID：13808799
> 
> 赞同：0
> 
> 时间：2012-12-10T20:36:14.597
> 
> 标签：geocoding, yql

我正在使用雅虎地理编码 YQL 来获取用户输入位置的纬度/经度。奇怪的是，从不同的 IP 地址查询时，我得到了不同的结果。例如，此查询尝试解析*London, United Kingdom*：

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20geo.places%20where%20text%3D%22london%2C+United+Kingdom%22&appid=my_app_id 
```

（在你问之前，`my_app_id`是真实的 ID，出于显而易见的原因，我没有在这里展示）

当我从本地机器（`wget`在控制台中使用）运行它时，我得到了有效的结果。当我从我们的测试服务器运行它时，我得到了相同的结果。但是，当我从我们的实时服务器运行它时，我得到了不同的响应`count="0"`。因此，该应用程序在我的本地计算机和我们的测试服务器上运行，但在实时服务器上失败。

肯定有问题，但我不知道是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:58:19.113

我会尝试将诊断选项添加到 YQL。这应该让您更深入地了解 YQL 代表您进行的查询，并可能提供线索。

这是启用了诊断的查询：

[`select * from geo.places where text="london, United Kingdom"`](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20geo.places%20where%20text%3D%22london%2C%20United%20Kingdom%22)

启用诊断后，您可以比较来自不同 IP 的结果以找出差异。如果你得到零结果的回报，我认为这通常是一个速率限制问题。

# javascript - Javascript表单在调用时不起作用

> ID：13808800
> 
> 赞同：0
> 
> 时间：2012-12-10T20:36:17.487
> 
> 标签：javascript, html, css

[我的网站在这里](http://www.inside-guides.co.uk/brentwood/pages/index.html)使用[“uniform” jscript 插件](http://uniformjs.com/)，但它不起作用，我只是不确定将函数调用代码放在哪里。

如果您转到“联系我们”，您将看到该表格。这是代码：

```
<head>
<script src="/js/Uniform/jquery.uniform.js" type="text/javascript"></script>
<link rel="stylesheet" href="/css/Uniform.css" type="text/css" media="screen" charset="utf-8" />
<script type="text/javascript">
   $("select, input, button, textarea").uniform();
</script>
</head>
<body class="contact">
<!--#include virtual="/Assets/Templates/Public/Franchise/Contact.asp"-->
<div class="middle-content-grey">
<%
If blnShowForm = True then
%>

<form name="FeedbackForm" method="post" action="Feedback.asp">
<input type="hidden" name="FormAction" value="New" />
<label>Name:
<span class="smaller">Main contact</span>
</label>
<input type="text" name="strCustomerName" value="<% = strCustomerName %>" size="50" maxlength="112" />
<br />
<label>Company Name:
<span class="smaller">If applicable</span>
</label>
<input type="text" name="strCompanyName" value="<% = strCompanyName %>" size="50" maxlength="100" />
<br />
<label>Email Address:
<span class="smaller">Primary email</span>
</label>
<input type="text" name="strEmailAddress" value="<% = strEmailAddress %>" size="50" maxlength="255" />
<br />
<label>Phone Number:
<span class="smaller">Primary phone</span>
</label>
<input type="text" name="strContactPhone" value="<% = strContactPhone %>" size="50" maxlength="20" />
<br />
<label>Comments:
<span class="smaller">Reason for your enquiry</span>
</label>
<textarea name="strComments" rows="8" value="<% = strComments %>" cols="30"></textarea>
<button class="medium blue form" type="submit">Submit</button>
<div class="spacer"></div>
</form>
    </div>
<br />
</div>
</body> 
```

它使用来自 uniform.css 的精灵图像。

如果有人能告诉我它应该去哪里，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:45:54.280

我注意到的一件事是，uniform.js 出现错误，使其无法通过 uniform() 调用。似乎制服需要 jQuery 1.4+，而您使用的是 1.2.6。

来自制服.js

```
/*

Uniform v1.7.5
Copyright Â© 2009 Josh Pyles / Pixelmatrix Design LLC
http://pixelmatrixdesign.com

Requires jQuery 1.4 or newer

...

*/ 
```

# php - Why is my JSON object undefined?

> ID：13808809
> 
> 赞同：0
> 
> 时间：2012-12-10T20:36:41.437
> 
> 标签：php, javascript, jquery, json

I'm trying to parse a JSON data structure but what I think should be data is returning undefined.

Here is the jQuery I'm using:

```
....
var messages = data.messages;

$.each(messages, function(i, val) {

    var user = messages[i];

    //console.log(user);
    console.log(user['msg']);

}); 
```

The PHP data structure look like this:

```
...
$message_info = array();

$message_info[$row['username']]['prvt'] = 1;
$message_info[$row['username']]['msg'] = stripslashes($row['message']);
$message_info[$row['username']]['ts'] = $row['timestamp'];

...

$message_list[] = $message_info;

...

$res->messages = $message_list;
echo json_encode($res); 
```

If I dump user to the console the output look like this:Object

```
{john: Object}
  john: Object
  msg: "test msg"
  prvt: 0
  ts: "2012-12-10 09:16:13" 
```

This is what data looks like in the console:

```
Object {success: true, lastid: "60", messages: Array[15]}
lastid: "60"
messages: Array[15]
  0: Object
    john: Object
      msg: "test msg"
      prvt: 0
      ts: "2012-12-10 09:16:13"
  1: Object
    john2: Object
      msg: "test msg2"
      prvt: 1
      ts: "2012-12-10 09:18:13"
 ... 
```

Any idea why I can't access and retrieve the contents of msg?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:55:18.937

重写你的 PHP 以避免嵌套`msg`在`$row['username']`：

```
$message_info = array();
$message_info['username'] = $row['username']; // find this in JS with user['username']
$message_info['prvt'] = 1;
$message_info['msg'] = stripslashes($row['message']);
$message_info['ts'] = $row['timestamp']; 
```

通过这种更改，您的 JavaScript 应该可以按原样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:53:06.307

您的用户对象包含一个由键“john”、“john2”等引用的对象。

```
user.john.msg or user.john2.msg 
```

应该管用。

因此，要在 php 中构建更通用的 json 结构，我将执行以下操作：

```
...
$message_info['user']['name'] = $row['username'];
$message_info['user']['prvt'] = 1;
... 
```

# vb.net - WebKitBrowser and Iframe - vb.net

> ID：13808825
> 
> 赞同：1
> 
> 时间：2012-12-10T20:38:06.120
> 
> 标签：vb.net, iframe, webkit, browser, frames

At first , You need to know that this is my first question and i'm from Poland so very sory for any mistake.

I'm making program in VB.net. I have site , not my , and there are Iframe. In the iframe is a text input. I need to change value of this input .

I make this in WebBrowser , but i need to make it in WebKitBrowser . In WebBrowser this looks like:

```
WebBrowser1.Document.Window.Frames("NameOfFrame").Document.GetElementById("Text_Input").SetAttribute("value", "something") 
```

In WebKitBrowser this don't work.

I'm trying this:

```
 For Each oneelement As WebKit.DOM.Node In WebKitBrowser1.Document.GetElementById("NameOfFrame").ChildNodes

        MsgBox(oneelement.NodeValue.ToString)
    Next 
```

One problem .. I'm getting the msg:

"You need iframe support!"

# knockout.js - jquery和敲除，与数字框相关的复选框

> ID：13808830
> 
> 赞同：0
> 
> 时间：2012-12-10T20:38:39.063
> 
> 标签：knockout.js

我有一个复选框列表，单击时隐藏并显示一个数字框。这是该工作的 JSfiddle：http: [//jsfiddle.net/bjornmann/yXUqf/3/](http://jsfiddle.net/bjornmann/yXUqf/3/)

基本思想是：

`$('.numberthing').each(function(){push the data to an array here.})`

然后我说“让我们学习淘汰赛并将整个应用程序移动到那个框架中”，所以这就是底部退出的时候。

我有一个项目列表（复选框）推送到一个数组，然后是视图中的一个 ko foreach，但我不知道如何从数字框中添加数据。

我花了很长时间弄清楚如何将输入的值绑定到淘汰赛中数组中复选框的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:39:51.583

KO 中的绑定是双向的；如果您更新视图模型，UI 也会更新。如果您更新绑定的控件，则视图模型会更新。

您还可以创建计算属性，只要任何引用的 observables 更新，它就会更新。

```
function ViewModel(data) {
    data = data || {};
    this.checkboxes = ko.observableArray(
        ko.utils.arrayMap(data.checkboxes, function (title) {
            return new CheckboxModel(title);
        })
    );
    this.checkedCheckboxes = ko.computed(function () {
        return ko.utils.arrayFilter(this.checkboxes(), function (cb) {
            return cb.checked();
        });
    }, this);
}

function CheckboxModel(title) {
    this.title = ko.observable(title);
    this.checked = ko.observable(false);
    this.number = ko.observable(1);
}

$(function() {
    ko.applyBindings(new ViewModel({
        checkboxes: [ 'Champion', 'Reserve champion',
            '1st', '2nd', '3rd', '4th', '5th', '6th',
            '7th', '8th', '9th', '10th', 'Other']
    }));
});
​    ​ 
```

```
<div data-bind="foreach: checkboxes" id="cblist">
    <label data-bind="visible: checked">
        <input type="number" data-bind="value: number"/>
        <span data-bind="text: title"></span>
    </label>
    <label data-bind="visible: !checked()">
        <input type="checkbox" data-bind="checked: checked"/>
        <span data-bind="text: title"></span>
    </label>
    <br/>
</div> 
```

[http://jsfiddle.net/MizardX/zHTRP/](http://jsfiddle.net/MizardX/zHTRP/)

# php - php/mysqli 中出现错误的验证消息

> ID：13808832
> 
> 赞同：0
> 
> 时间：2012-12-10T20:38:29.527
> 
> 标签：php, mysqli

我在下面有一段代码，它在验证和成功时执行某些 php/mysqli 任务。我在下面的代码中遇到的问题是，如果用户输入了由 SELECT 查询确定的不正确的用户名或电子邮件，如果没有匹配的用户名和电子邮件，那么它应该显示错误消息`Your Username or Email was not Correct`。但相反，它显示此错误消息`An error has occured, your Email was not sent containing your new Password`。

我的问题是为什么它显示不正确的错误消息，我怎样才能让它显示正确的错误消息？

```
 if(isset($_POST['resetbtn'])){
                //get form data
                $user = $_POST['user'];
                $email = $_POST['email'];

 $errors = array();

if(!$errors) {

            $query = "SELECT TeacherUsername, TeacherEmail FROM Teacher WHERE TeacherUsername = ? AND TeacherEmail = ?";
            // prepare query
            $stmt=$mysqli->prepare($query);
            // You only need to call bind_param once
            $stmt->bind_param("ss",$user, $email);
            // execute query
            $stmt->execute(); 
            // get result and assign variables (prefix with db)
            $stmt->bind_result($dbTeacherUsername, $dbTeacherEmail);
            //get number of rows
            $stmt->store_result();
            $numrows = $stmt->num_rows();                                  

            if ($numrows == 1){

                   $pass = rand();
                   $teacherpassword = md5($pass);
                   $teacherpassword = substr($pass, 0, 15);
                   $teacherpassword = md5(md5("g3f".$pass."rt4")); 

                //update password in db   
                $updatesql = "UPDATE Teacher SET TeacherPassword = ? WHERE TeacherUsername = ?";                                            
                $update = $mysqli->prepare($updatesql);
                $update->bind_param("ss", $teacherpassword, $user);
                $update->execute();

            $query = "SELECT TeacherUsername, TeacherPassword FROM Teacher WHERE TeacherUsername = ? AND TeacherPassword = ?";
            // prepare query
            $stmt=$mysqli->prepare($query);
            // You only need to call bind_param once
            $stmt->bind_param("ss",$user,$teacherpassword);
            // execute query
            $stmt->execute(); 
            // get result and assign variables (prefix with db)
            $stmt->bind_result($dbTeacherUsername, $dbTeacherPassword);
            //get number of rows
            $stmt->store_result();
            $selectnumrows = $stmt->num_rows();

                            }else{
                        if(!$numrows){
                        $errormsg = "Your Username or Email was not Correct"; 
                        $user = "";
                        $email = "";
                    }
                }
        }

        if(empty($errors)) {
            if ($selectnumrows == 1){

                   $errormsg = "<span style='color: green'>Your Password has been Reset. An Email has been sent with your New Password</span>";

                    else{
                     $errormsg = "An error has occured, your Email was not sent containing your new Password";   

               }
           } 
```

下面是表格：

```
 echo "<form action='./forgotpass.php' method='post'>
            <table>
            <tr>
            <td></td>
            <td id='errormsg'>$errormsg</td>
            </tr>
            <tr>
            <td>Username</td>
            <td><input type='text' name='user' value='$user'/><br/>".$error_user."</td>
            </tr>
            <tr>
            <td>Email</td>
            <td><input type='text' name='email' value='$email'/><br/>".$error_email."</td>
            </tr>
            <tr>
            <td></td>
            <td><input type='submit' name='resetbtn' value='Reset Password' /></td>
            </tr>
            </table>
            </form>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:45:50.647

发生的情况是，如果 $query 没有返回任何行，首先您的 $errormsg 变为“您的用户名或电子邮件不正确”，然后变为：“发生错误，您的电子邮件未发送包含您的新密码”。

条件完全相同（相同的查询！），所以如果第一个为真，那么第二个也为真。我不确定你为什么需要两个相同的查询，但如果你确实需要它，请尝试将最后几行中的 $errormsg 变量更改为另一个变量（例如 $errormsg2）并在表单中分别回显它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:52:02.077

```
$numrows = $stmt->num_rows(); 
```

应该

```
$numrows = $stmt->num_rows; 
```

和

```
if ($numrows == 1){ 
```

应该

```
if ($numrows === 1){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:37:24.293

`@John`提到了一个问题——

```
$selectnumrows = $stmt->num_rows(); 
```

需要采用 OOP 风格-

```
$selectnumrows = $stmt->num_rows; 
```

（在您的情况下， `==`vs`===`是可选的，但很好的做法）

* * *

但是你得到的原因 -`An error has occured, your Email was not sent containing your new Password`而不是`Your Username or Email was not Correct`因为你正在设置`$errormsg`你的第一次检查并用你的第二次检查重置它。我已经压缩了你的代码并添加了`//Comments`

```
$errors = array();

if(!$errors) {  //This is returning true
  ...
  if ($numrows == 1){ //This is returning false
   ...
  }else{
     if(!$numrows){
         $errormsg = "Your Username or Email was not Correct";  //So this is getting set
         ...
     }
  }
}
if(empty($errors)) {  // But this is also returning true
  if ($selectnumrows == 1){   // And this is also returning false
      $errormsg = "<span style='color: green'>Your Password has been Reset. An Email has been sent with your New Password</span>";
  } //This closing '}' is missing in your posted code!!
  else{
       $errormsg = "An error has occured, your Email was not sent containing your new Password";   //So now $errormsg is being reset.
  }
} 
```

# javascript - 如何在javascript中引用html图像

> ID：13808833
> 
> 赞同：0
> 
> 时间：2012-12-10T20:38:34.637
> 
> 标签：javascript, html5-canvas

我有一个网页将在 HTML5 画布上显示许多图像。

在使用 JavaScript 在画布上绘制它们之前，我首先将图像加载到 HTML 的隐藏部分中，以加快它们加载和呈现在画布上的时间。

一旦所有图像都被绘制到画布上，就必须可以在画布周围拖放它们。目的是在画布上同时显示四个“描述桶”，用户需要将每个图像拖到其对应的描述桶中。

一旦我在 HTML 中加载了图像，我想创建一个 JavaScript 数组来在它们被 JavaScript 访问和操作时存储它们，即我希望能够像处理 JavaScript 图像一样操作它们，尽管它们的来源将是 HTML 元素，而不是图像的直接来源。

我正在关注以下教程：[http](http://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/) ://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/这正是我想做的，除了图像是静态的。在我的游戏中，我将提供一个 Web 表单，管理员可以使用该表单来更改显示的图像，具体取决于他们使用游戏的环境。

这就是为什么该教程有代码的原因：

```
window.onload = function() {
    var sources = {
      beach: "beach.png",
      snake: "snake.png",
      snake_glow: "snake-glow.png",
      snake_black: "snake-black.png",
      lion: "lion.png",
      lion_glow: "lion-glow.png",
      lion_black: "lion-black.png",
      monkey: "monkey.png",
      monkey_glow: "monkey-glow.png",
      monkey_black: "monkey-black.png",
      giraffe: "giraffe.png",
      giraffe_glow: "giraffe-glow.png",
      giraffe_black: "giraffe-black.png",
    };
    loadImages(sources, initStage);
  }; 
```

我想将来源更改为我在 HTML 的隐藏部分中加载的图像的来源：

```
<section hidden>
<img id="startButton" src="images/startButton.png" alt="Start Button" width="179" height="180" href="javascript:drawLevelOneElements();"/>

<img id="building" src="images/assets/building.png" alt="Asset" />
<img id="chair" src="images/assets/chair.gif" alt="Asset" />
<img id="drink" src="images/assets/drink.gif" alt="Asset" />
<img id="food" src = "images/assets/food.gif" alt="Asset"/>
<img id="fridge" src = "images/assets/fridge.png" alt="Asset"/>
<img id="land" src = "images/assets/land.jpg" alt="Asset"/>
<img id="money" src = "images/assets/money.jpg" alt="Asset"/>
<img id="oven" src = "images/assets/oven.jpg" alt="Asset"/>
<img id="table" src = "images/assets/table.gif" alt="Asset"/>
<img id="van" src = "images/assets/van.jpg" alt="Asset"/>

<img id="burger" src = "images/expenses/direct/burger.png" alt="Direct Expense"/>
<img id="chips" src = "images/expenses/direct/chips.png" alt="Direct Expense"/>
<img id="drink" src = "images/expenses/direct/drink.jpg" alt="Direct Expense"/>
<img id="franchiseFee" src = "images/expenses/direct/franchiseFee.jpg" alt="Direct Expense"/>
<img id="wages" src = "images/expenses/direct/wages.jpg" alt="Direct Expense"/>

<img id="admin" src = "images/expenses/indirect/admin.jpg" alt="Indirect Expense"/>
<img id="cleaners" src = "images/expenses/indirect/cleaners.gif" alt="Indirect Expense"/>
<img id="electricity" src = "images/expenses/indirect/electricity.gif" alt="Indirect Expense"/>
<img id="insurance" src = "images/expenses/indirect/insurance.jpg" alt="Indirect Expense"/>
<img id="manager" src = "images/expenses/indirect/manager.jpg" alt="Indirect Expense"/>
<img id="rates" src = "images/expenses/indirect/rates.jpg" alt="Indirect Expense"/>
<img id="training" src = "images/expenses/indirect/training.gif" alt="Indirect Expense"/>
<img id="water" src = "images/expenses/indirect/water.gif" alt="Indirect Expense"/>

<img id="burger" src = "images/income/burger.png" alt="Income"/>
<img id="chips" src = "images/income/chips.png" alt="Income"/>
<img id="drink" src = "images/income/drink.jpg" alt="Income"/>

<img id="creditors" src = "images/liabilities/creditors.gif" alt="Liability"/>
<img id="electricity" src = "images/liabilities/electricity.png" alt="Liability"/>
<img id="food" src = "images/liabilities/food.jpg" alt="Liability"/>
<img id="hirePurchase" src = "images/liabilities/hirePurchase.jpg" alt="Liability"/>
<img id="loan" src = "images/liabilities/loan.png" alt="Liability"/>
<img id="overdraft" src = "images/liabilities/overdraft.jpg" alt="Liability"/>
<img id="payeTax" src = "images/liabilities/payeTax.jpg" alt="Liability"/>
<img id="tax" src = "images/liabilities/tax.jpg" alt="Liability"/>
</section> 
```

但我不确定如何引用 HTML 图像。我尝试以与直接从源代码引用 JavaScript 中的图像类似的方式进行操作：

```
window.onload = function(){
    var sources = {
        asset1: document.getElementById("building");
        asset2: document.getElementById("chair");
    }
} 
```

但是当我在浏览器中加载页面时，我的画布不再显示。到目前为止，我已经设法让画布显示出来，一张可以使用以下代码在画布周围拖放的图像：

```
var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,
      // puts the image in teh middle of the canvas
      x: stage.getWidth() / 2 - 50 / 2,
      y: stage.getHeight() / 2 - 50 / 2,
      draggable: true
    });

var imageObj = new Image();
  imageObj.onload = function() {
    drawImage(this);
  };
  imageObj.src = 'images/assets/building.png'; 
```

但显然问题在于，如果我要向管理员提供一个表单，他们可以将从“building.png”绘制的图像的 src 更改为其他图像文件，我将无法替换在我的 HTML 的隐藏部分中加载“建筑”图像的行现在改为加载新图像。

有谁知道我如何从 JavaScript 中引用 HTML 图像？

**编辑 2012 年 10 月 12 日 @ 21:00**

我尝试将代码更改为：

```
var sources = {
        asset1: document.getElementById("building"),
        asset2: document.getElementById("chair")
    } 
```

但是在浏览器中查看页面时，我的画布仍然没有显示。我还在第二行后用逗号尝试过，但没有显示画布。

**编辑 2012 年 10 月 12 日 @ 22:55**

我现在有这个功能：

```
window.onload = function(){
    var sources = {
        asset1: document.getElementById("building").src,
        asset2: document.getElementById("chair").src,
    };
    loadImages(sources, drawImage);
}; 
```

并尝试使用以下代码在画布上绘制图像：

```
var imageObj = new Image();
  imageObj.onload = function() {
    drawImage(this);
  };
  imageObj.src = sources.asset1; 
```

但由于某种原因，这再次阻止了画布在浏览器中的显示......自从它在浏览器中显示以来，我唯一改变的是以下行：`imageObj.src = sources.asset1;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:46:51.003

你的代码

```
var sources = {
    asset1: document.getElementById("building");
    asset2: document.getElementById("chair");
} 
```

产生语法错误。您的属性声明应该以**逗号**结尾，而不是分号（正如您在第一个对象声明中所做的那样）。

尝试该代码时画布消失的原因是脚本解释器因语法错误而停止。

**编辑：**

如果您想使用 DOM 中的图像元素重新创建您的第一个对象（带有图像 URL 字符串的对象），请获取`src`每个元素的属性：

```
var sources = {
    asset1: document.getElementById("building").src,
    asset2: document.getElementById("chair").src
} 
```

# cakephp - cakephp login form validation on blank username and password

> ID：13808834
> 
> 赞同：0
> 
> 时间：2012-12-10T20:38:56.960
> 
> 标签：cakephp, cakephp-2.1

I have checked cakephp validation for a long time to validate my login form. My problem is when i enter username and password as blank the validation not showing.

Login function in UserController.php contains

```
 if ($this->request->is('post')) {
            $this->user->set($this->request->data);
            $errors = $this->user->invalidFields(); 

            if ($this->Auth->login()) {
                return $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash($this->Auth->authError, 'default', array(), 'auth');
                $this->redirect($this->Auth->loginAction);
            }
        } else {

            if ($this->Auth->login()) {
                return $this->redirect($this->Auth->redirect());
            }
        } 
```

My User.php Model contains validator as

```
 public $validate = array(
        'username' => array(
            'isUnique' => array(
                'rule' => 'isUnique',
                'message' => 'The username has already been taken.',
            ),

            'notEmpty' => array(
                'rule' => 'notEmpty',
                'message' => 'This field cannot be left blank.',
            ),
        ),
        'email' => array(
            'email' => array(
                'rule' => 'email',
                'message' => 'Please provide a valid email address.',
            ),
            'isUnique' => array(
                'rule' => 'isUnique',
                'message' => 'Email address already in use.',
            ),
        ),
        'password' => array(
            'rule' => array('minLength', 6),
            'message' => 'Passwords must be at least 6 characters long.',
        ),
        'current_password' => array(
            'rule' => '_identical',
            ),
        'name' => array(
            'rule' => 'notEmpty',
            'message' => 'This field cannot be left blank.',
        ),
    ); 
```

Actually my login form contains only usgername and password. But i have set this validation for userregistration form. The validation worked correctly in registration form but in the case of login the validation not working. Yes io know there is lot of questions posted on this website itself regarding the same issue, but nothing solve my problem, i have tried all the stackoverflow questions. Please Help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:46:11.447

验证仅在保存时发生，或者当您使用以下方法直接调用验证方法时：

```
$this->Model->validates(); 
```

您没有收到验证错误，因为您实际上并没有验证您的数据。要获得验证错误，您需要执行以下操作：

```
if ($this->request->is('post')) {
        $this->User->set($this->request->data);
        if ($this->User->validates()) {
             echo "This is valid!";
        } else {
             echo "This is invalid";
             $errors = $this->User->validationErrors;
        }
} 
```

# asp.net-mvc - Do I have to let SimpleMembershipProvider (Entity) manage the custom user account?

> ID：13808837
> 
> 赞同：1
> 
> 时间：2012-12-10T20:39:00.843
> 
> 标签：asp.net-mvc, asp.net-mvc-4, simplemembership

**Setup**

So I am attempting to use the new Simple Membership/role providers in ASP.net MVC (specifically 4.5) specifically through the WebMatrix.WebData.Websecurity.

I have utilized the providers ability to point the providers to my custom Users table.

I am also using NHibernate as my ORM of choice.

**Problem**

It appears to me that in the above setup, I would have to allow the Entity framework that the simple providers use to create user accounts, and be limited to loading (with NHibernate) the user account after created, to update it with additional data.

Is this correct?

**NOTE**

Yes, this question based on not trying to create custom providers based on either the simple or any of the .NET membership providers.

# r - Function not returning appropriate value when applied to a data.table column while successful on one variable

> ID：13808838
> 
> 赞同：2
> 
> 时间：2012-12-10T20:39:08.767
> 
> 标签：r, data.table

> **Possible Duplicate:**
> [Filtering a data frame by factors in R](https://stackoverflow.com/questions/11099179/filtering-a-data-frame-by-factors-in-r)

I wrote a simple function to map a variable against a table and return the value in a corresponding column. The idea is very the same as vlookup in Excel. The function I wrote is the following:

```
ApplyMap <- function(mappingtable,variable){
  if(ncol(mappingtable)!=2){
    "Mapping table needs to have two columns"
  }else{
    names(mappingtable) <- c("col1","col2")
    output <- mappingtable[col1==variable]$col2[1]
    output <- as.character(if(is.na(output)){variable}else{output})
    return(output)
  }
} 
```

My map:

```
require(data.table)

mapping <- structure(list(Field1 = structure(c(4L, 1L, 2L, 3L), .Label = c("Amsterdam", 
"Arnhem", "Groningen", "Rotterdam"), class = "factor"), Field2 = structure(c(4L, 
3L, 1L, 2L), .Label = c("Gelderland", "Groningen", "Noord-Holland", 
"Zuid-Holland"), class = "factor")), .Names = c("Field1", "Field2"
), row.names = c(NA, -4L), class = c("data.table", "data.frame"
), .internal.selfref = <pointer: 0x7f93f1018578>) 
```

When I apply this to a simple variable such as:

```
ApplyMap(mapping,"Arnhem")
[1] "Gelderland" 
```

or

```
ApplyMap(mapping,"New York")
[1] "New York" 
```

it seems to be working fine. However, now I would like to apply it to the following data.table and add another column with the second column in the map where appropriate. The list is the following:

```
list <- structure(list(List = structure(c(6L, 1L, 2L, 3L, 4L, 5L, 7L), .Label = c("Amsterdam", 
"Arnhem", "Groningen", "Haarlem", "Maastricht", "Rotterdam", 
"Utrecht"), class = "factor")), .Names = "List", class = "data.frame", row.names = c(NA, 
-7L)) 
```

I try to do this with the following code:

```
list$Province <- ApplyMap(mapping,list$List) 
```

Unfortunately this does not seem to work appropriately. Is there anybody who can help me to understand why it is not working correctly? I get the following error message when I execute the line above:

```
Error in Ops.factor(col1, variable) : level sets of factors are different 
```

Obvious, I would like to get second column to the table with the values from the second column of the mapping-table.

# c++ - C++ 如何获取对包含对象的引用？

> ID：13808840
> 
> 赞同：1
> 
> 时间：2012-12-10T20:39:03.980
> 
> 标签：c++, pointers, inheritance

我有三个类——专辑、曲目和扩展曲目的播放列表曲目。

Track 包含一个 Time 对象，以及艺术家和标题的两个字符串。Album 包含一个 Tracks 向量和一个标题字符串。PlaylistTrack 扩展了 Track，因为它包含一个指向它所属专辑的指针。

我的问题是，我怎样才能获得指向在 PlaylistTrack 类中包含它的专辑的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:55:20.057

曲目属于给定的专辑，并且这种关系永远不会改变，因此最简单的解决方案是将包含专辑对象的指针传递给 Track 对象（或 PlaylistTrack，如果你喜欢这样的话）的构造函数，并保存它在构造函数代码中的指针成员中。

请注意，PlaylistTracks 可以引用包含它们的专辑对象，但不能通过调用`delete`成员指针来删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:58:44.207

我不太明白你在问什么，但听起来你想有一种方法从 PlaylistTrack 中获取专辑。

```
class PlaylistTrack : public Track
{
     public:
         PlaylistTrack(Album * owner){ m_owner = owner; }
         Album* getAlbum(){return m_owner;}
     private:
         Album* m_owner;

}

int main()
{

    Album albumA;
    PlaylistTrack newTrack(&albumA);

    //Now the track knows what album it belongs to, but the album does not own the track yet.
    std::cout << "New Track's Album: " << newTrack.getAlbum.getTitle() << std::endl;

    //Now the album owns this track
    albumA.addTrack(newTrack);

    //The PlaylistTrack constructor could add itself to the album if you wanted to I think.

    return 0;
} 
```

# ruby-on-rails - 简化 if 子句和记录检索

> ID：13808842
> 
> 赞同：0
> 
> 时间：2012-12-10T20:39:28.440
> 
> 标签：ruby-on-rails, ruby

我有这样的代码结构：

```
if params[:one] && params[:two]
  object = Something.where(:one => params[:one], :two => params[:two])
elsif params[:one]
  object = Something.where(:one => params[:one])
elsif params[:two]
  object = Something.where(:two => params[:two])
else
  object = Something.all
end 
```

基本上，URL 中的两个可选参数用于过滤要进行的查询。这可以更清洁吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:48:46.233

我会写：

```
objects = Something.where(params.slice(:one, :two)) 
```

笔记：

1.  通常一个空的参数也被认为是不存在的。在这种情况下：`Something.where(params.slice(:one, :two).select { |k, v| v.present? })`。

2.  看起来很奇怪，在你的代码片段中你应该写`object = if ...`，它是更惯用的语言，因为 Ruby 是一种条件是表达式而不是语句的语言。

3.  不要`all`以无操作的身份打电话，您不再有`ActiveRecord::Relation`（酷），而是`Array`（不那么酷）。`where({})`很好。

4.  起名很重要！如果你看到`object`你认为“单一元素”（这里不是真的），如果你看到`objects`你认为“收藏”。

5.  如果参数键与数据库列不匹配：有很多方法可以做到，例如：

    ```
    pairs = {:x => :db_x, :y => db_y}.map { |k, v| [v, params[k]] if params[k] }]
    Something.where(Hash[pairs.compact]) 
    ```

或者只是两个属性：

```
attrs = {:db_one => params[:one], :db_two => params[:two]}
Something.where(attrs.select { |k, v| v }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:55:20.420

您可能会考虑这样做（链接标准）：

```
object = Something.all
object = object.where(:one => params[:one]) if params[:one]
object = object.where(:two => params[:two]) if params[:two] 
```

# ruby-on-rails-3 - Bootstrap typeahead avoid other value

> ID：13808844
> 
> 赞同：0
> 
> 时间：2012-12-10T20:39:44.697
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, typeahead

i still try in rails 3.2 to use bootstrap typeahead, it works fine, but how can i avoid users to type anything in text field.
I code looks like this

```
<%= text_field_tag(:text, "", :data => {:provide => "typeahead", :items=>"4", :source=>'["Swiss","German","English"]'}) %> 
```

users may only type Swiss, German and English in the text field, but not for example Chinese.
How can i validate the value in text field?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:33:17.883

Set tag attribute disabled="disabled"

# installation - how to programmatically install apk with monodroid

> ID：13808845
> 
> 赞同：0
> 
> 时间：2012-12-10T20:39:47.443
> 
> 标签：installation, xamarin.android

I have tried to implement the code in monodroid for this question here [Android: install .apk programmatically](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically), which deals with how to implement what I want on Android with Java. I want to do it with monodroid.

Anyone any idea how I keep getting an error...

```
File apkFile = new File({path to APK});
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(apkFile), "application/vnd.android.package-archive");
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T00:01:36.027

对于这一行：intent.setDataAndType(Uri.fromFile(apkFile), "application/vnd.android.package-archive");

你试过了吗：intent.setDataAndType(Uri.fromFile(new Java.IO.File("pathToAPK"), "application/vnd.android.package-archive");

# html - HTML class attribute with spaces, it is a W3C valid class?

> ID：13808846
> 
> 赞同：36
> 
> 时间：2012-12-10T20:39:51.570
> 
> 标签：html, css

About HTML *class* attribute, that assigns CSS class (or classes?) to a tag. The use of spaces, like in

```
<tag class="a b">....</tag> 
```

is valid?

This syntax is used by some web-designers and occurs into exported HTML of Adobe InDesign (tested with versions 5 and 6), and another HTML generation softwares...

**It (`class="a b"`) is a valid W3C syntax?** What versions of CSS and HTML? (starting from which version became valid?)

* * *

EDIT: a natural *subquestion* "W3C say how to interpret it?" (it is an "override" or another renderization behaviour?) [was posted here](https://stackoverflow.com/q/13849655/287948).

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-10T20:41:36.243

这是两个不同的类别`a`，`b`并由空格分隔。见[w3c 文档](https://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

### 类 = cdata 列表 [CS]

> 此属性为元素分配一个类名或一组类名。可以为任意数量的元素分配相同的类名或名称。多个类名必须用空格字符分隔。

* * *

如果你有两个班级

```
.a { font-weight: bold; }
.b { font-weight: normal; } 
```

**并在class="a b"**或**class="b a"**中分配，然后以后的类将覆盖具有相同属性的先前类，因此**字体粗细将是正常**的。

如果更改 CSS 定义顺序，

```
.b { font-weight: normal; }
.a { font-weight: bold; } 
```

现在后面的类是粗体的，所以“覆盖具有相同属性的先前类”会导致**字体粗细粗体**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T21:15:34.977

这在 IE 7 及更高版本中受支持，包括所有现代的非 IE 浏览器。正如其他评论者所指出的，它实际上是一个类列表，而不是一个带空格的类。

理解这一点的更好方法是为您的示例提供更多选项：

```
<tag class="a b">....</tag>
<tag class="a">....</tag>
<tag class="b">....</tag> 
```

`.a.b {}`在您的 css 中将定位第一个标签。
`.a {}`将针对第一个和第二个标签。
`.b {}`将针对第一个和第三个标签。

这就是为什么在单个元素上使用多个类会非常有帮助。

对于 CSS 选择器和伪选择器的问题，我喜欢使用这个（稍微过时的）表[http://kimblim.dk/css-tests/selectors/](http://kimblim.dk/css-tests/selectors/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T20:43:35.650

单个类名不能有空格。一个元素可以通过列出由空格分隔的类名来定义多个类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T20:45:15.993

这在 CSS 文件或 HTML 中不起作用。 `<div class="a b c"></div>`表示 div 元素具有类 a AND 类 b 和类 c。

同时，在样式表方面，`.a b c { property: value; }`它是无效的，因为它的字面意思是“元素 c 与祖先 b，祖先具有类 a”（并且 b 和 c 显然不是有效的 HTML 元素），而`.a .b .c { property: value; }`将意味着“元素具有类 c 与祖先具有类 b 的元素和具有类 a 的祖先元素”。如果这对您没有意义，请查找 CSS 特异性规则。

使用破折号或下划线代替空格。

# plugins - Wordpress Download Link for Audio File

> ID：13808848
> 
> 赞同：0
> 
> 时间：2012-12-10T20:40:03.900
> 
> 标签：plugins, wordpress

I am using the plugin mb.miniAudioPlayer to handle audio player on my wordpress site.

It allows for nice download button that does not require a "right click and save as" The only problem is that is does not save the file as expected.

I get mp3 file with no filename or anything. even when I rename the file to filename.mp3 it is not playable.

The plugin dev says it is something wrong with my server. I am totally lost. any help would be appreciated.

example page is here [link](http://jonbennett.co/lab/gym-name5-team-name-2012-2013-descriptor-2/)

Response from dev here [link](http://wordpress.org/support/topic/file-names?replies=2#post-3536379)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:12:55.163

我没有找到任何`mp3`要下载的文件链接，但如果它是服务器端问题，那么它可能是一个`myme-type`问题。您的服务器必须配置为处理`mp3`文件。在服务器根目录的文件中添加以下代码`.htaccess`，它可能会解决问题。

```
<Files *.mp3>
    ForceType application/octet-stream
</Files> 
```

另请记住，您`mp3`在服务器上的文件必须具有`mp3`扩展名。也[看看这个](https://stackoverflow.com/questions/3401650/stop-mp3-file-from-streaming-in-browsers)。

# ios - 为什么找不到用于归档的静态库的头文件？

> ID：13808853
> 
> 赞同：19
> 
> 时间：2012-12-10T20:40:24.660
> 
> 标签：ios, xcode, compiler-errors, mbprogresshud

我可以构建调试就好了。我已经三重检查了静态库是否包含在项目的构建阶段设置中。我也尝试过其他的东西，比如标题包含路径等等，但都无济于事。

当我尝试为试飞构建 IPA 时，出现错误： `#import <MBProgressHUD/MBProgressHUD.h>`

我之前已经能够构建 IPA，但它之前没有实现/使用 MBProgressHUD 静态库。

我可以手动包含头文件和代码文件，而不是静态链接它，但我更愿意知道这里发生了什么。

谢谢。

PS - 我使用了[https://github.com/jdg/MBProgressHUD给出的“静态库”指令](https://github.com/jdg/MBProgressHUD)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T15:27:34.430

默认情况下，Xcode 将构建产品放入`$(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)`，这相当于`build/Release-iphoneos`例如。这是产品内置的文件夹，以及标题将被复制到的文件夹。

当我们将 Release 配置复制为一个名为“App Store”的配置时，Xcode 现在构建到`build/App Store-iphoneos`. 实际上，问题是静态库仍在使用它们的 Release 配置构建到 Release 构建文件夹中。

因为 App Store 配置（至少对我而言）只是为了在配置文件之间轻松切换，我的解决方案是更改 App Store 配置的“按配置构建产品路径”，`$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)`以便 App Store 配置也构建进入发布构建文件夹。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T22:31:47.267

在另一个 SO 问题（[https://stackoverflow.com/a/10159481/143225](https://stackoverflow.com/a/10159481/143225)）的帮助下，我能够获得包含的头文件。

显然，归档构建过程与调试构建过程有所不同。通过添加`"$(BUILD_ROOT)/../IntermediateBuildFilesPath/UninstalledProducts"`成功构建的“用户标题搜索路径”构建设置。

我仍然想了解为什么这不能按我的预期工作。我有一种预感，该项目被构建为自动包含用于调试和发布版本的头文件，但不知何故不适用于存档版本。这很奇怪，因为我认为存档构建继承自 Xcode 方案设置的调试或发布设置。

欢迎提供任何其他信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-03T18:11:27.683

Daniel Tull 的回答将起作用，但您可以更新静态库项目配置以包含“App Store”配置或您的应用目标正在构建的任何其他命名配置，而不是更改“按配置构建产品路径”，是发布配置的副本。这样，静态库将把它的库和头文件/包含文件输出到适当的目录，这将由“Per-configuration Build Products Path”中使用的 $(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME) 宏解析'; 和 walllaaaaa...公共库头文件现在可以由 Xcode 正确解析。总而言之，如果您的应用程序目标中有一个名为“App Store”的配置，并且您链接到一个导出标头的静态库，

# visual-studio-2010 - TFS 2010 可以构建代理运行测试吗？

> ID：13808862
> 
> 赞同：0
> 
> 时间：2012-12-10T20:40:44.647
> 
> 标签：visual-studio-2010, tfsbuild

如果是这样，我们为什么要使用测试代理和测试控制器的架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:32:58.727

这取决于您所指的测试。构建代理可以运行单元测试。但是，为了运行编码的 UI 测试或 Web 测试，这些测试将被安排在测试代理上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:42:49.120

只有测试代理可以运行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:26:04.513

您可以拥有多个构建代理（和一个控制器），因此您不能并行构建，测试代理是否相同？所以您可以同时进行多个测试运行？

# cloud-foundry - vmc 实例应用程序名称 3 给出错误：未知应用程序 '3'

> ID：13808863
> 
> 赞同：1
> 
> 时间：2012-12-10T20:40:50.593
> 
> 标签：cloud-foundry, vmc

我已经安装了 Ruby 和 Gems，还按照 cloudfoundry 网站上的文档安装了 VMC。我可以成功部署一个简单的 hello world 应用程序。几个命令似乎工作正常。但是，很少有命令会失败，我不知道为什么。当我运行以下命令时：

vmc 实例 hello 3

我收到一个错误：Unknwon app '3'

当我刚刚运行时：

vmc instances hellor 它可以很好地检索实例并显示它而没有任何错误。但是，当我在那之后指定一个数字来增加实例时，它似乎只是将该数字视为一个应用程序名并给我错误。可能是什么原因。我在任何论坛上都找不到其他人面对这个问题。对此的任何帮助将不胜感激。我在 cloudfoundry.com 上进行部署

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:15:03.857

此命令的行为取决于您使用的 vmc 版本。您可以看到正在运行的 vmc 版本`vmc --version`。

使用 vmc 版本 0.3.x，该`instances`命令可以按照您在问题中的预期工作。如果您`vmc help`使用 0.3.x 版本运行，您将在其他输出中看到以下内容：

```
instances <appname> <num|delta>              Scale the application instances up or down 
```

正如 Hitesh 所说，对于 vmc 版本 0.4.x（也称为 vmc-ng），该`instances`命令的工作方式有所不同，并且引入了该命令。`scale`如果您`vmc help --all`使用 0.4.x 版本运行，您将在其他输出中看到以下内容：

```
instances APPS...           List an app's instances
scale [APP]                 Update the instances/memory limit for an application 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:53:27.707

“vmc instances [APP]”用于列出您拥有的实例数量。要实际扩展您的应用程序，您可以执行“vmc scale [APP]”，如下所示：

hghia@SEA-007~/workgalaxy/hello$ vmc scale hello

实例> 3

1：64M

2：128M

3：256M

4：512M

5：1G

6：2G

内存限制>64M

缩放你好...好的

hghia@SEA-007~/workgalaxy/hello$ vmc 实例你好

获取 hello 的实例...好的

实例 #0：运行开始时间：2012-12-10 03:41:39 PM

实例 #1：运行开始时间：2012-12-10 03:46:56 PM

实例 #2：运行开始时间：2012-12-10 03:46:56 PM

谢谢， - Hitesh

# symfony-1.4 - 如何为 Symfony Autoloader 设置类路径？

> ID：13808865
> 
> 赞同：0
> 
> 时间：2012-12-10T20:40:55.167
> 
> 标签：symfony-1.4

我将我的工作主干重命名为trunk-alldone，检查了一个新的主干副本，在主干上运行了一些symfony命令（如单元测试），然后删除了主干并将主干重命名为主干。

现在，当我尝试运行任何 symfony 命令时，我得到：

```
 sym cc
   PHP Warning:  require(/home/kiwi/checkouts/trunk-alldone/kiwi-    web/plugins/kcEmailPlugin/l                                                                                                                                                                     pleAutoload.class.php on line 123
    PHP Stack trace:
    PHP   1\. {main}() /home/kiwi/checkouts/trunk/kiwi-web/symfony:0
    PHP   2\. include() /home/kiwi/checkouts/trunk/kiwi-web/symfony:37
    PHP   3\. sfCommandApplication->__construct() /home/kiwi/checkouts/trunk/kiwi-web/lib/vend
    PHP   4\. sfSymfonyCommandApplication->configure() /home/kiwi/checkouts/trunk/kiwi-web/lib
    PHP   5\. sfSymfonyCommandApplication->loadTasks() /home/kiwi/checkouts/trunk/kiwi-web/lib
    PHP   6\. class_exists() /home/kiwi/checkouts/trunk/kiwi-web/lib/vendor/symfony/lib/comman
    PHP   7\. sfSimpleAutoload->autoload() /home/kiwi/checkouts/trunk/kiwi-web/lib/vendor/symf 
```

它仍在寻找trunk-alldone 中的东西！

如何重置它以使其再次出现在正确的位置？

# jsf - 丰富建议项的默认长度：自动完成

> ID：13808869
> 
> 赞同：0
> 
> 时间：2012-12-10T20:41:19.327
> 
> 标签：jsf, autocomplete, richfaces

`rich:autocomplete`来自标签的显示建议的长度有一个默认值。我找不到哪个属性控制这个值。

`popupClass`并`inputClass`分别定义输入框和弹出框的样式。

但它不影响显示文本的长度。

有谁知道如何更改显示的文本长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:17:13.273

使用`minChars`属性来控制自动完成开始工作时要输入的最少字符数。

```
<rich:autocomplete minChars="2"  /> 
```

就最大字符数而言，当用户开始输入很长的文本并且在建议框中找不到他正在搜索的内容时，您认为用户仍会继续输入它们吗？

# jquery - Telerik Kendo 从网格拖放到树视图 - 获取目标值

> ID：13808871
> 
> 赞同：3
> 
> 时间：2012-12-10T20:41:23.717
> 
> 标签：jquery, kendo-ui, kendo-treeview

我的视图中有一个名为“Grid”的剑道网格，我有一个名为“treeview”的树视图。

我正在尝试启用从网格拖动到树视图。我能够获得我正在拖动的项目的价值，但我无法获得我将其丢弃的位置（目的地）的价值。

这是我的 document.ready()...

```
var grid = $("#Grid").data("kendoGrid"), treeview = $("#treeview").data("kendoTreeView"), itemUID;
        grid.table.kendoDraggable({
            cursorOffset: {
                top: 5,
                left: 5
            },
            filter: "tbody > tr",
            group: "Grid",
            hint: function (e) {
                itemUID = e.attr(kendo.attr("uid"));
                var z = $(e).find('.ZID');
                itemUID = z.html();
                return $('<div class="k-grid k-widget"><table><tbody><tr>' + e.html() + '</tr></tbody></table></div>');
            }
        });

        treeview.element.kendoDropTarget({
            group: "Grid",
            drop: function (e) {
                console.log(e.draggable);

                // Value of dragged item
                alert("Dragged row 'Id' " + itemUID);

                itemUID = null;
            }
        }); 
```

**我最终弄清楚了：**

```
var dest = $(e.toElement).text(); 
```

现在我得到了目标和目的地，如何用新拖动的项目更新树视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:55:27.333

我最终弄清楚了：

```
var dest = $(e.toElement).text(); 
```

# javascript - 从 oracle 创建的大型 xml 有错误

> ID：13808872
> 
> 赞同：0
> 
> 时间：2012-12-10T20:41:32.630
> 
> 标签：javascript, xml, xml-parsing, oracle11g

我们有一个生成 xml 文件的查询。然后通过 javascript 例程获取 xml，然后使用 bing 映射映射到浏览器。我已经编辑了查询以生成另一个用户组的数据，但 xml 中突然出现错误。无法弄清楚出了什么问题，错误是文档深处的“无效字符”。这是我尝试过的事情

*   检查数据库中的信息以确保没有任何特殊字符，没有。
*   试图强制加载最新的 xml，类似于[这个例子](http://snipplr.com/view/45873/)。
*   通过javascript例程运行另一个xml，它可以工作，运行第二个xml，没有。
*   使用 IE 查看时错误为“无效字符”，使用记事本 ++ 打开时看不到任何可能导致问题的内容

这是用于生成 xml 的 oracle 查询，唯一改变的部分是“描述”的内容，从`sitedesc`到`sitecode`

```
SELECT XMLELEMENT("rss", 
            XMLATTRIBUTES('http://www.georss.org/georss' AS "xmlns:georss"),
                    XMLELEMENT("channel",
                                 XMLAGG(XMLELEMENT("item",
                                                   XMLFOREST(title AS "title",
                                                              description AS "description",
                                                              point AS "georss:point"))))).EXTRACT('/*')
    FROM (SELECT trim(s.sitedesc) AS title, 
          s.sitecode AS description,
          trim(s.latitude) || ' ' || trim(s.longitude) AS point
          FROM ls s
          WHERE s.sold <> 1
            AND s.longitude != ' '
        )
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:44:33.080

这是我的文件属性，它们没有正确设置。

# c# - 确保 WPF 中自定义控件的正确边界

> ID：13808879
> 
> 赞同：0
> 
> 时间：2012-12-10T20:41:18.397
> 
> 标签：c#, wpf

我创建了自己的自定义 WPF 控件，该控件仅在其`OnRender`方法中绘制一些文本，但是，当我在设计器中查看此控件时，它不会占用任何空间。我需要做些什么来确保我的控件占用了`FormattedText`我拥有的对象所报告的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:00:57.177

这是我使用 render 方法所做的一个示例。除了文本之外，我真的不需要任何东西，但是，在创建新几何图形之后，我错过了对`InvalidateMeasure`和的调用。`InvalidateArrange`

```
private Geometry textGeometry;

protected override void OnRender(System.Windows.Media.DrawingContext drawingContext)
{
    if (textGeometry == null)
    {
        var currentTypeface = new Typeface(FontFamily, FontStyle, FontWeight, FontStretch);

        var formattedText = new FormattedText(Text
            , System.Globalization.CultureInfo.CurrentCulture
            , System.Windows.FlowDirection.LeftToRight
            , currentTypeface
            , FontSize
            , Foreground
            );

        var d = LineHeight - formattedText.Baseline;

        textGeometry = formattedText.BuildGeometry(new Point(-formattedText.OverhangLeading, d));
        textGeometry.Freeze();

        this.InvalidateMeasure();
        this.InvalidateArrange();
    }

    drawingContext.DrawGeometry(Foreground, null, textGeometry);
} 
```

# .net - 将 Microsoft SQL Compact Edition 部署到非英语 Windows XP 计算机。

> ID：13808881
> 
> 赞同：1
> 
> 时间：2012-12-10T20:41:35.183
> 
> 标签：.net, sql-server-ce

我有一个使用 Microsoft SQL Compact Edition 的应用程序。我遵循了 MSDN 并部署了以下描述的 DLL：http: [//msdn.microsoft.com/en-us/library/aa983326%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa983326%28VS.80%29.aspx)

在安装程序中包含这些 DLL 效果很好……直到现在。

现在我正在尝试在非英语版本的 Windows 上安装该应用程序。非英语 Windows 7 工作正常，但使用非英语 Windows XP SP3（特别是葡萄牙语）时，每当应用程序尝试连接到数据库时，我都会崩溃。

错误是：

> 无法加载 DLL 'sqlceme35.dll'：Falha na inicialização do aplicativo devido a configuração incorreta。一个 reinstalação 做 aplicativo pod resolver o problema。（来自 HRESULT 的异常：0x800736B1）

...是的，它是葡萄牙语。谷歌将其翻译为：

> 由于配置错误，应用程序初始化失败。重新安装应用程序可能会解决问题

如果您采用 MSDN 页面上推荐的其他方法并手动安装葡萄牙语版本的 SQL Compact Edition。一切正常。但是，这是我想避免的解决方案，因为这意味着使用我们的安装程序为每种语言分发 SQL CE 安装程序，或者为每种语言使用不同的安装程序。巨大的痛苦。

我可以为国际 Windows 版本复制一些其他 DLL 吗？知道在哪里可以找到这个 DLL 列表吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:36:42.710

谢谢 ErikEJ，你的建议让我意识到我们的错误。

我们安装并使用 .Net Framework 4.0，但无论出于何种原因，我们都坚持使用 SQL CE 3.5，而且由于大多数 PC 都预装了 Visual C++ Runtime 2005，因此碰巧它可以正常工作。

有几种方法可以解决这个问题：

1.  使用 MS SQL CE 4.0 因为它依赖于 Visual C++ Runtime 2008，它包含在我们已经作为先决条件安装的 .Net Framework 4.0 中。

2.  找到 SQL CE 3.5 使用的 DLL 并让我们的安装程序自己复制它们（可能不可能）

3.  随安装程序一起安装 Visual C++ Runtime 2005。（不是一个很好的安装程序，并且没有所有语言）

4.  安装 .Net 3.5 和 4.0，因为它具有 Visual C++ Runtime 2005（更好的安装程序）

选项 1 可能是最好的，但需要我们做一些工作才能从 3.5 迁移到 4.0。所有其他选项都是解决方法，但应该可以解决问题。

# python - 在 mongodb 中进行插入或更新时，使用 Python 是否可以监听更改

> ID：13808886
> 
> 赞同：2
> 
> 时间：2012-12-10T20:42:34.247
> 
> 标签：python, mongodb, mod-wsgi, pymongo, uwsgi

我正在构建一个从 mongodb 集合中抛出数据的小型系统，它已经可以正常工作，但是每次进行更改时都必须重新启动它。我已经有一个监视器可以检测更改并自动重新启动服务器，但我想对 mongodb 更改执行类似的操作。我目前正在使用 CentOs 5、Nginx、uWsgi 和 python2.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:07:47.937

我会考虑使用[tailable cursors](http://www.mongodb.org/display/DOCS/Tailable+Cursors)，它们在到达集合末尾后仍然保持活动状态，并且可以阻塞直到有新对象可用。

使用[PyMongo](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.find)，您可以调用`Collection.find`一个`tailable=True`选项来启用此行为。这篇[博](http://shtylman.com/post/the-tail-of-mongodb/)文给出了一些很好的例子来说明它的用法。

此外，您可能希望查询数据库的*oplog* ，而不是只查询集合，它只会提醒您*添加*到该集合中的新对象，它是对数据库中任何集合调用的所有插入、更新和删除的集合. 请注意，必须为 mongo 启用复制才能保留 oplog。查看这篇[博](http://www.kchodorow.com/blog/2010/10/12/replication-internals/)文，了解有关 oplog 和启用复制的信息。

# python - 如何在 pymongo 中禁用“_id”

> ID：13808906
> 
> 赞同：1
> 
> 时间：2012-12-10T20:43:59.633
> 
> 标签：python, mongodb, primary-key, pymongo

我刚开始学习mongodb，还不是很了解。

所以我的代码：

```
#! /usr/bin/env python2.7

import pymongo
import datetime

class AccountsDB():
    def __init__(self):
        self.store_info()

    def store_info(self):
        try:
            conn = pymongo.Connection('localhost', 27017)
            db_name = 'accountsdb'
            coll_name = 'user_info'

            db = conn[db_name]
            coll = db[coll_name]

            print "Successfully connected to '%s'" % db_name

            for i in xrange(20):
                post = {
                    'f_name' : 'Sergey',
                    'l_name' : 'Ivanov',
                    'number' : '777-9-777',
                    'user_id': i
                }
                coll.insert(post)

            print "Done"
        except:
            print "Can't connect to the database"

if __name__ == "__main__":
    acc = AccountsDB() 
```

它给了我：

```
> db.user_info.find()
{ "_id" : ObjectId("50c64872bdbff34435192a94"), "l_name" : "Ivanov", "f_name" : "Sergey", "user_id" : 0, "number" : "777-9-777" }
{ "_id" : ObjectId("50c64872bdbff34435192a95"), "l_name" : "Ivanov", "f_name" : "Sergey", "user_id" : 1, "number" : "777-9-777" }
{ "_id" : ObjectId("50c64872bdbff34435192a96"), "l_name" : "Ivanov", "f_name" : "Sergey", "user_id" : 2, "number" : "777-9-777" }
{ "_id" : ObjectId("50c64872bdbff34435192a97"), "l_name" : "Ivanov", "f_name" : "Sergey", "user_id" : 3, "number" : "777-9-777" }
{ "_id" : ObjectId("50c64872bdbff34435192a98"), "l_name" : "Ivanov", "f_name" : "Sergey", "user_id" : 4, "number" : "777-9-777" }
{ "_id" : ObjectId("50c64872bdbff34435192a99"), "l_name" : "Ivanov", "f_name" : "Sergey", "user_id" : 5, "number" : "777-9-777" }

and so on.... 
```

但我想摆脱 '_id' 而使用 'user_id' 作为我的主键。我很确定可以做到，但不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:50:52.780

我很确定答案是否定的，你不能禁用“_id”。为什么？看看[pymongo 的源代码](https://github.com/mongodb/mongo-python-driver)。查看[collection.py](https://github.com/mongodb/mongo-python-driver/blob/master/pymongo/collection.py)并搜索“_id”。

嗯，我认为这可以通过猴子补丁来完成，但它是黑魔法。只是一个想法，我根本不推荐猴子修补。这就是为什么我的答案是否定的:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:17:04.357

做这个：

```
post = {
            'f_name' : 'Sergey',
            'l_name' : 'Ivanov',
            'number' : '777-9-777',
            '_id': i
} 
```

使用 mongoDB，您只需使用“_id”作为值的键，它将使用您提供的值而不是自动生成的值。

或者，只需在 user_id 上创建另一个索引并将其标记为“唯一”

```
db.collection.createIndex({"user_id":1}, {unique:true}) 
```

# bash - awk 是否应该在命令行分配的变量中扩展转义序列？

> ID：13808909
> 
> 赞同：1
> 
> 时间：2012-12-10T20:44:30.570
> 
> 标签：bash, awk, posix

我最近发现 Awk`-v VAR=VAL`用于在命令行上初始化变量的语法扩展了 VAL 中的转义序列。我以前认为这是将字符串传递给 Awk 的好方法，而无需先对它们运行转义函数。

例如，以下脚本：

```
awk -v VAR='x\tx' 'BEGIN{printf("%s\n", VAR);}' 
```

我希望打印

```
x\tx 
```

但实际上打印：

```
x       x 
```

顺便说一句：环境变量以未经修改的方式传递字符串，这个问题不是在问如何获得我以前期望的行为。

以下是手册页关于此事的内容：

> **-v var=val** , **--assign var=val**在程序开始执行之前将值 val 分配给变量 var。此类变量值可用于 AWK 程序的 BEGIN 块。

再往下：

> **字符串常量** AWK 中的字符串常量是用双引号括起来的字符序列（如“值”）。在字符串中，可以识别某些转义序列，就像在 C 中一样。它们是：
> 
> ...转义序列列表...
> 
> 转义序列也可以在常量正则表达式中使用（例如，/[ \t\f\n\r\v]/ 匹配空白字符）。
> 
> 在兼容模式下，由八进制和十六进制转义序列表示的字符在用于正则表达式常量时按字面意思处理。因此，/a\52b/ 等价于 /a*b/。

我读这个的方式，`val`in`-v var=val`不是字符串常量，也**没有**文字表明字符串常量转义规则适用。

我的问题：

1.  awk 语言是否有比手册页更权威的来源，如果有，它具体说明了什么？
2.  如果有的话，POSIX 对此有什么看法？
3.  是否所有版本的 Awk 都以这种方式运行，即如果我真的想要它，我可以依赖正在完成的扩展吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:52:23.510

赋值是一个字符串常量。

[该标准](http://pubs.opengroup.org/onlinepubs/9699919799/)的相关部分是：

-v assignment 应用程序应确保赋值参数与赋值操作数的格式相同。指定的变量分配应在执行 awk 程序之前发生，包括与 BEGIN 模式相关的动作（如果有）。可以指定多次出现此选项。

和

以可移植字符集中的下划线或字母字符开头的操作数（请参阅 XBD 可移植字符集中的表），后跟可移植字符集中的一系列下划线、数字和字母，后跟“=”字符, 应指定变量赋值而不是路径名。'=' 前面的字符代表 awk 变量的名称；如果该名称是 awk 保留字（参见 Grammar ），则行为未定义。<equals-sign> 后面的字符应被解释为好像它们出现在 awk 程序中，前后都有双引号 (')' 字符，作为 STRING 标记（请参阅语法），除非最后一个字符是一个未转义的，它应该被解释为一个文字而不是序列“\”的第一个字符

# java - 什么是在队列中上传图像的最佳方法

> ID：13808914
> 
> 赞同：0
> 
> 时间：2012-12-10T20:44:52.940
> 
> 标签：java, android

我喜欢在屏幕上有一个摄像头捕捉选项的安卓应用程序，用户可以继续点击图片，一旦点击图片就需要上传，用户仍然停留在相机里，按他喜欢的次数点击捕捉按钮。我是在通知区域通知用户状态。

我需要知道一种以故障安全方式实现此上传任务的方法。我很困惑应该使用服务还是线程或多个踏板。

请提出实现上传内容的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:53:45.133

您需要使用[Async Task](http://developer.android.com/reference/android/os/AsyncTask.html)。您可以安全地在另一个线程中执行网络操作。这就是我将采取的方法，如果需要，我可以为您添加一些示例代码。

# php - php mysql 搜索数据的最佳方式，单个查询与多个查询

> ID：13808918
> 
> 赞同：0
> 
> 时间：2012-12-10T20:45:05.233
> 
> 标签：php, mysql

我对 php 和 mysql 有很好的了解，但是我的实践较少。在我用搜索、ajax 类型的建议等建立网站之前。但是他们都缺乏一些能力。

现在我要为我的网站创建一个搜索，该网站有大约 10 个具有不同字段名称的表。我花了一些时间弄清楚如何调用 mysql 查询。所以我寻求一些建议和帮助。

如果我选择一些类似于给定字符串的数据，那么我必须创建表的顺序，首先在哪里搜索，哪个表应该是第二个，依此类推。这就是我问这个问题的主要原因。在不同的表上手动运行多个 mysql 搜索查询并尝试处理放入一个数组中的数据，该数组与其他表搜索形成的数组结构相同，这不是一种糟糕的方法吗？我的意思是，如果文章页面的相似度更高，我为什么要先搜索新闻？

后来我想到了一个适合所有表的单个 mysql 查询的想法，但是我不知道如何想出这样的代码来返回布局的数组并包含有关所需搜索查询的所有内容。

请告诉我您认为可能对我有帮助的任何先进技术或做法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:48:39.100

搜索许多表不是一个好主意。最好有一个索引。索引可以是单个结构化数据库表或外部引擎，如 sphinx 或 lucene。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:48:10.557

提示：使用主要用于搜索的多个表中的所需数据创建[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T20:48:38.183

尝试 solr search(http://lucene.apache.org/solr/)、memcache (http://memcached.org/) 或使用 mysql 的索引。阅读以上链接并选择最合适的链接

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T20:48:52.837

如果您的可搜索文本分布在如此多的表中，您应该使用一些单独的搜索索引。

您可以使用现成的库来执行此操作，例如[Apache Solr](http://lucene.apache.org/solr/)。

# jquery-ui-dialog - 选择 Jquery UI 对话框项目

> ID：13808919
> 
> 赞同：0
> 
> 时间：2012-12-10T20:45:06.390
> 
> 标签：jquery-ui-dialog

我在[http://jsfiddle.net/xBJeV/6/](http://jsfiddle.net/xBJeV/6/)添加了我的代码跟踪。我需要一些帮助 1\. 在对话框中选择值而不消失对话框。2.当鼠标离开div时，对话框应该关闭。

提前致谢

```
<div class="editionDetailAction">Action for Item 1</div>
<div class="editionDetailAction">Action for Item 2</div>
<div class="editionDetailAction">Action for Item 3</div>
<div class="editionDetailAction">Action for Item 4</div>

<div id="actionsPopup">
    <ul><li><a href="http://www.google.com">Add xyz</a></li></ul>
    <ul><li>Manage xyz</li></ul>
    <ul><li>Show xyz</li></ul>
</div> 
```

jQuery代码

```
$(document).ready(function () {
    $('.editionDetailAction').click(function (e) {
        $("#actionsPopup").dialog("option", { position: [e.pageX+5, e.pageY+5] });
    });

    $("#actionsPopup").dialog({
            autoOpen: false,  
dialogClass: 'actionsPopup',
        maxWidth:100,
                    maxHeight: 100,
                    width: 200,
        height: 80,
resizable: false,

    });
    $(".editionDetailAction").bind("click", function () {
        $("#actionsPopup").dialog('open'); 
    });
    $(".editionDetailAction").bind("mouseleave", function () {
        $("#actionsPopup").dialog('close'); 
    });

   }); 
```

我的 CSS

```
.editionDetailAction { width: 150px; height: 30px; border: solid 1px #ddd; }
.actionsPopup .ui-dialog-titlebar { display:none; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:04:15.437

Thanks for your time guys... I added below code and its working for me. Just want to post solution so that others can get benefit out of similar issue....

```
$(".actionsPopup").bind("mouseover", function () {
        $("#actionsPopup").dialog('open');
    }); 
```

# c++ - C++ ostream << 运算符

> ID：13808928
> 
> 赞同：0
> 
> 时间：2012-12-10T20:45:51.863
> 
> 标签：c++, operators

我有一个`Class`处理音乐专辑的。`artists`和`albums`是`strings`。_ 它还有一个名为 ( `vector`) 的曲目集合`contents`。每个轨道都有一个`title`和一个`duration`。

这是我的`ostream <<`：

```
 ostream& operator<<(ostream& ostr, const Album& a){
        ostr << "Album: "    << a.getAlbumTitle() << ", ";
        ostr << "Artist: "   << a.getArtistName() << ", ";
        ostr << "Contents: " << a.getContents()   << ". "; //error thrown here
        return ostr;
    } 
```

`<<`旁边的下划线`a.getContents()`表示：`"Error: no operator "<<" matches these operands.`

我错过了什么或做错了什么？你不能用这种方式使用向量吗？或者也许是我在 Track 课上缺少的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:50:55.607

假设`Album::getContents()`退货`std::vector<Track>`，您需要提供

```
std::ostream& operator<<(std::ostream& o, const Track& t); 
```

和

```
std::ostream& operator<<(std::ostream& o, const std::vector<Track>& v); 
```

后者可以使用前者。例如：

```
struct Track
{
  int duration;
  std::string title;
};

std::ostream& operator<<(std::ostream& o, const Track& t)
{
  return o <<"Track[ " << t.title << ", " << t.duration << "]";
}

std::ostream& operator<<(std::ostream& o, const std::vector<Track>& v)
{
  for (const auto& t : v) {
    o << t << " ";
  }
  return o;
} 
```

[这里](http://ideone.com/GFmFCl)有一个 C++03 演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:53:25.660

如果`Album::getContents()`是关于你的向量，你只是返回`vector`比`ostream`不知道如何写它，因为没有`'<<' operator`.

只需超载`'<<' operator`for a `vector`，您就会很高兴。

# c# - 如何在可执行文件中包含保存在文本文件中？

> ID：13808930
> 
> 赞同：0
> 
> 时间：2012-12-10T20:45:53.593
> 
> 标签：c#, executable

我在 Visual Studio C# 中有一个应用程序，其中包括保存到文本文件中，如何将 .exe 发送到另一台计算机并且在保存时没有异常？

我需要通过电子邮件发送一个 .exe 文件（是的，这是可能的），这个应用程序包括保存游戏状态。请问如何发送这个 .exe 文件并让用户能够保存在他的计算机中？

问题是当我在另一台计算机上发送我的应用程序的可执行文件时，我在保存时遇到异常。因为在另一台计算机上我没有保存游戏的文本文件。

我在这里保存：

StreamWriter myFile = File.CreateText(Directory.GetCurrentDirectory()+"//ConnectFour.txt");

在项目的 obj/Debug/ 中..

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:52:39.093

发送可执行文件应该可以正常工作。

确保另一台计算机安装了适当的 Microsoft .NET Framework。

最新框架安装程序：[MSDN](http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx)

此外，请确保您保存文件的路径存在于远程计算机上。例如，如果您尝试保存到 D:\ 驱动器但它不存在。你会得到一个例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:06:59.437

通过电子邮件发送可执行文件时的问题是防病毒扫描程序。他们中的一些人拒绝包含可执行文件的电子邮件。其他人接受邮件但删除附件。

解决方案在于隐藏可执行文件。这可以通过压缩可执行文件并发送 zip 文件来完成。

通常这足以解决问题，但一些反病毒扫描程序非常聪明，甚至可以识别 zip 附件中的可执行文件。这里的解决方案是使用密码加密 zip 文件。我经常只使用密码“pwd”并在电子邮件文本中提及它。防病毒软件（还）不够聪明，无法理解本文。

* * *

**更新**

现在我明白你的问题了。它与发送可执行文件无关。

应用程序可以像这样确定它是从哪个目录启动的

```
string dir = System.IO.Path.GetDirectoryName(
    System.Windows.Forms.Application.ExecutablePath
); 
```

另一种方法是（如果您没有对 WinForms 的引用）：

```
string dir = System.IO.Path.GetDirectoryName(
    System.Reflection.Assembly.GetEntryAssembly().Location
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:14:48.937

当前用户最有可能无法写入当前位置。

使用“当前目录”是危险的，因为您无法控制应用程序的启动位置。它对于命令行实用程序非常有用，但对于常规的窗口应用程序却没有那么多。使用您知道可以将文件保存到的位置 - 即“我的文档”。

```
var filePath = Path.Combine(
   Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + "\\",
   ConnectFour.txt");
using(var  myFile = File.CreateText(filePAth))
{
  // save data here.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T21:33:00.100

您可能没有足够的权限将文件保存在远程计算机上。如果您向我们提供有关正在引发的确切异常的更多信息（异常类型、消息、堆栈跟踪等），您将得到更准确的答案。

# c++ - 什么是声明和声明符，标准如何解释它们的类型？

> ID：13808932
> 
> 赞同：49
> 
> 时间：2012-12-10T20:46:01.270
> 
> 标签：c++, types, c++11, standards, declaration

标准是如何定义的，例如，`float (*(*(&e)[10])())[5]`声明一个类型为“对 10 的数组的引用，指向 () 返回指向 5 的数组的指针的函数的指针”类型的变量`float`？

[灵感来自[与@DanNissenbaum 的讨论](https://stackoverflow.com/a/13779331/150634)]

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-10T20:46:01.270

[我在这篇文章中参考了 C++11 标准]

# 声明

**我们关心的类型声明在 C++ 语法中称为**simple** *-declaration*，它是以下两种形式之一（§7/1）：**

 **> *decl-specifier-seq [opt]* *init-declarator-list [opt]*；
> *属性说明符序列* *decl 说明符序列[opt]* *init-declarator-list*；

属性说明*符*序列是一系列属性 ( `[[something]]`) 和/或对齐说明符 ( `alignas(something)`)。由于这些不影响声明的类型，我们可以忽略它们以及上述两种形式中的第二种。

## 声明说明符

因此，我们声明的第一部分*decl-specifier-seq*由声明说明符组成。其中包括一些我们可以忽略的东西，例如存储说明符（`static`,`extern`等）、函数说明符（`inline`等）、说明`friend`符等。然而，我们感兴趣的一个声明说明符是**类型说明符**，它可能包括简单的类型关键字（、、、`char`等`int`）`unsigned`、用户定义类型的名称、cv 限定符（`const`或`volatile`）以及其他我们不知道的关心。

*示例：所以**decl-specifier-seq*的一个简单示例，它只是一个类型说明符序列`const int`。另一个可能是`unsigned int volatile`。

你可能会想“哦，所以类似的东西`const volatile int int float const`也是一个*decl-specifier-seq*吗？” 你是对的，它符合语法规则，但语义规则不允许这样的*decl-specifier-seq*。实际上，只允许使用一个类型说明符，除了某些组合（例如`unsigned`与`int`或`const`与除自身之外的任何东西）并且至少需要一个非 cv 限定符（第 7.1.6/2-3 节）。

**快速测验**（您可能需要参考标准）

1.  是否是`const int const`有效的声明说明符序列？如果不是，它是否被句法或语义规则所禁止？

    > 语义规则无效！`const`不能与自身结合。

2.  是否是`unsigned const int`有效的声明说明符序列？如果不是，它是否被句法或语义规则所禁止？

    > 有效的！将from`const`分开并不重要。`unsigned``int`

3.  是否是`auto const`有效的声明说明符序列？如果不是，它是否被句法或语义规则所禁止？

    > 有效的！`auto`是声明说明符，但在 C++11 中更改了类别。之前它是一个存储说明符（如`static`），但现在它是一个类型说明符。

4.  是否是`int * const`有效的声明说明符序列？如果不是，它是否被句法或语义规则所禁止？

    > 语法规则无效！虽然这很可能是声明的完整类型，但只有`int`声明说明符序列。声明说明符仅提供基本类型，而不提供复合修饰符，如指针、引用、数组等。

## 声明者

*简单声明*的第二部分是*init-declarator-list*。它是由逗号分隔的**声明**符序列，每个声明符都有一个可选的初始化器（第 8 节）。每个声明器都在程序中引入一个变量或函数。最简单的声明器形式就是您要介绍的名称 - *declarator-id*。该声明`int x, y = 5;`有一个声明说明符序列，它只是`int`，后跟两个声明符`x`和`y`，第二个声明符有一个初始化器。但是，我们将在本文的其余部分忽略初始化程序。

声明符可以具有特别复杂的语法，因为这是声明的一部分，允许您指定变量是指针、引用、数组、函数指针等。请注意，这些都是*声明符*而不是声明的一部分作为一个整体。这正是`int* x, y;`不声明两个指针的原因——星号`*`是声明符的一部分，`x`而不是声明符的一部分`y`。一个重要的规则是每个声明者必须有一个*声明者ID——*它声明的名称。一旦确定了声明的类型（我们稍后会谈到），就会强制执行有关有效声明符的其余规则。

*示例*：声明符的一个简单示例是`*const p`，它声明了一个`const`指向...某物的指针。它指向的类型由其声明中的声明说明符给出。一个更可怕的例子是问题中给出的例子`(*(*(&e)[10])())[5]`，它声明了一个对函数指针数组的引用，该数组返回指向...的指针。同样，类型的最后部分实际上是由声明说明符给出的。

您不太可能遇到如此可怕的声明符，但有时会出现类似的声明符。能够阅读问题中的声明是一项有用的技能，并且是一项伴随实践而来的技能。了解标准如何解释声明的类型会很有帮助。

**快速测验**（您可能需要参考标准）

1.  `int const unsigned* const array[50];`声明说明符和声明符有哪些部分？

    > 声明说明符： 声明符`int const unsigned`
    > ：`* const array[50]`

2.  `volatile char (*fp)(float const), &r = c;`声明说明符和声明符有哪些部分？

    > 声明说明符： 声明符`volatile char`
    > #1：声明符`(*fp)(float const)`
    > #2：`&r`

# 声明类型

现在我们知道声明是由声明符说明符序列和声明符列表组成的，我们可以开始思考声明的类型是如何确定的。例如，`int* p;`定义`p`为“指向 int 的指针”可能很明显，但对于其他类型，它就不是那么明显了。

具有多个声明符的声明，比如说 2 个声明符，被认为是特定标识符的两个声明。也就是说，`int x, *y;`是一个标识符`x`,`int x`的声明，和一个标识符`y`,的声明`int *y`。

类型在标准中表示为类似英语的句子（例如“pointer to int”）。这种类似英语的形式的声明类型的解释分两部分进行。首先，确定声明说明符的类型。其次，对整个声明应用递归过程。

## 声明说明符类型

声明说明符序列的类型由标准的表 10 确定。它列出了序列的类型，因为它们以任何顺序包含相应的说明符。因此，例如，任何包含`signed`并`char`以任何顺序排列的序列，包括`char signed`，都具有“signed char”类型。任何出现在声明说明符序列中的 cv 限定符都被添加到类型的前面。`char const signed`类型“const signed char”也是如此。这确保无论您放置说明符的顺序如何，类型都是相同的。

**快速测验**（您可能需要参考标准）

1.  声明说明符序列的类型是什么`int long const unsigned`？

    > “常量无符号长整数”

2.  声明说明符序列的类型是什么`char volatile`？

    > “挥发性炭”

3.  声明说明符序列的类型是什么`auto const`？

    > 这取决于！`auto`将从初始化程序中推导出来。例如，如果推断为`int`，则类型将为“const int”。

## 申报类型

现在我们有了声明说明符序列的类型，我们可以计算出整个标识符声明的类型。这是通过应用第 8.3 节中定义的递归过程来完成的。为了解释这个过程，我将使用一个运行示例。我们将计算`e`in的类型`float const (*(*(&e)[10])())[5]`。

**步骤 1**第一步是将声明拆分为声明`T D`说明`T`符序列和声明符的形式`D`。所以我们得到：

```
T = float const
D = (*(*(&e)[10])())[5] 
```

的类型`T`当然是“const float”，正如我们在上一节中确定的。然后我们寻找 §8.3 中与当前形式相匹配的`D`. 您会发现这是 §8.3.4 数组，因为它声明它适用于具有以下形式的形式`T D`的声明`D`：

> `D1 [` *常量表达式[选择]* `]` *属性说明符序列[选择]*

我们`D`确实是那种形式 where `D1`is `(*(*(&e)[10])())`。

现在想象一个声明`T D1`（我们已经摆脱了`[5]`）。

```
T D1 = const float (*(*(&e)[10])()) 
```

它的类型是“<some stuff> `T`”。本节说明我们的标识符 , 的类型`e`是“<some stuff> array of 5 `T`”，其中 <some stuff> 与虚构声明的类型相同。所以要算出类型的其余部分，我们需要算出 的类型`T D1`。

这就是递归！我们递归地计算出声明的内部部分的类型，在每一步都去掉它的一部分。

**第 2 步**因此，和以前一样，我们将新声明拆分为以下形式`T D`：

```
T = const float
D = (*(*(&e)[10])()) 
```

这与第 8.3/6 段相匹配，其中`D`is 的形式为`( D1 )`。这种情况很简单，类型`T D`就是 的类型`T D1`：

```
T D1 = const float *(*(&e)[10])() 
```

**第 3 步**让我们现在调用`T D`它并再次拆分它：

```
T = const float
D = *(*(&e)[10])() 
```

这匹配 §8.3.1 指针 where `D`is 的形式`* D1`。如果`T D1`类型为“<some stuff> `T`”，则`T D`类型为“<some stuff> pointer to `T`”。所以现在我们需要以下类型`T D1`：

```
T D1 = const float (*(&e)[10])() 
```

**第 4 步**我们调用它`T D`并将其拆分：

```
T = const float
D = (*(&e)[10])() 
```

这与 §8.3.5 Functions where `D`is 的形式相匹配`D1 ()`。如果`T D1`具有类型“<some stuff> `T`”，则`T D`具有类型“<some stuff> function of () returned `T`”。所以现在我们需要以下类型`T D1`：

```
T D1 = const float (*(&e)[10]) 
```

**第 5 步**我们可以应用与第 2 步相同的规则，其中声明符被简单地加上括号以结束：

```
T D1 = const float *(&e)[10] 
```

**第 6 步**当然，我们将其拆分：

```
T = const float
D = *(&e)[10] 
```

我们再次将 §8.3.1 指针与`D`形式匹配`* D1`。如果`T D1`类型为“<some stuff> `T`”，则`T D`类型为“<some stuff> pointer to `T`”。所以现在我们需要以下类型`T D1`：

```
T D1 = const float (&e)[10] 
```

**步骤 7**拆分：

```
T = const float
D = (&e)[10] 
```

我们再次匹配 §8.3.4 数组，`D`格式为`D1 [10]`。如果`T D1`类型为“<some stuff> `T`”，则`T D`类型为“<some stuff> array of 10 `T`”。那么什么是`T D1`类型？

```
T D1 = const float (&e) 
```

**步骤 8**再次应用括号步骤：

```
T D1 = const float &e 
```

**步骤 9**拆分：

```
T = const float
D = &e 
```

现在我们匹配 §8.3.2 References where `D`is 的形式`& D1`。如果`T D1`类型为“<some stuff> `T`”，则`T D`类型为“<some stuff> reference to `T`”。那么是什么类型的`T D1`呢？

```
T D1 = const float e 
```

**第 10 步**当然是“T”！在这个级别没有<some stuff>。这是由第 8.3/5 节中的基本案例规则给出的。

**我们完成了！**

所以现在如果我们查看我们在每个步骤中确定的类型，将 <some stuff> 替换为下面每个级别的，我们可以确定`e`in的类型`float const (*(*(&e)[10])())[5]`：

```
<some stuff> array of 5 T
│          └──────────┐
<some stuff> pointer to T
│          └────────────────────────┐
<some stuff> function of () returning T
|          └──────────┐
<some stuff> pointer to T
|          └───────────┐
<some stuff> array of 10 T
|          └────────────┐
<some stuff> reference to T
|          |
<some stuff> T 
```

如果我们将这一切结合在一起，我们得到的是：

```
reference to array of 10 pointer to function of () returning pointer to array of 5 const float 
```

好的！这显示了编译器如何推断声明的类型。请记住，如果有多个声明符，这将应用于标识符的每个声明。试着弄清楚这些：

**快速测验**（您可能需要参考标准）

1.  `x`声明中的类型是什么`bool **(*x)[123];`？

    > “指向 123 数组的指针指向 bool 的指针”

2.  声明中的`y`和类型是什么？`z``int const signed *(*y)(int), &z = i;`

    > `y`是“指向（int）函数的指针，返回指向 const signed int 的指针”
    > `z`是“对 const signed int 的引用”

[如果有人有任何更正，请告诉我！]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T17:47:45.580

这是我解析的方式`float const (*(*(&e)[10])())[5]`。首先，确定说明符。这里的说明符是`float const`. 现在，让我们看看优先级。`[] = () > *`. 括号用于消除优先级的歧义。考虑到优先级，让我们识别变量 ID，即`e`. 因此，e 是对包含 10 个函数指针的数组（since `[] > *`）的引用，该函数（since `() > *`）不带参数并返回，并且是指向 5 个 float const 的数组的指针。所以说明符排在最后，其余部分根据优先级进行解析。**

# coldfusion - CF10 / IIS7.5 - cffile 在 Web 根目录之外读取文件

> ID：13808936
> 
> 赞同：2
> 
> 时间：2012-12-10T20:46:13.173
> 
> 标签：coldfusion, iis-7.5, coldfusion-10

带有 IIS 7.5 的 Win 2K8 上的 CF10。我的 webroot 是 d:\web[sitename] ，其中 [sitename] 是实际站点的文件夹。

我想读取存储在其他地方的 .txt 文件 - 比如说 d:\web\somefile.txt 或 d:\somefile.txt，但似乎无论我给文件或它的父文件夹什么权限，我都会收到文件未找到错误：

```
 An error occurred when performing a file operation read on file d:/web/somefile.txt.
The cause of this exception was: java.io.FileNotFoundException: d:/web/somefile.txt (The system cannot find the file specified). 
```

我的 CF 服务以特定用户身份运行，我已经为该用户提供了从读取到完全控制该文件的所有内容，但仍然没有骰子。我的 IIS 应用程序池也以特定用户身份运行，为其添加权限也无济于事。

这是我需要配置的Tomcat吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:00:07.317

您可能启用了沙盒安全性，这会阻止 CF 读取文件。登录 CF 管理员并检查它。

# javascript - document.write 内容替换现有内容而不是显示在其下方

> ID：13808938
> 
> 赞同：1
> 
> 时间：2012-12-10T20:45:58.520
> 
> 标签：javascript, xml, ajax

我有一个 XML 文件，每个元素都有一个名为 category 的子元素。在我的 HTML 页面上，我创建了一个下拉表单，其中列出了可能的类别（以及“全部”）。当用户从下拉列表中选择一个类别时，它会分配一个与该类别对应的 javascript 变量，然后我使用 javascript/ajax 遍历 XML 文件并显示具有该类别的元素列表。这一切正常......但是当它显示列表时，而不是在下拉列表下显示它，下拉列表完全消失了，你看到的只是列表。我想在下拉列表下方显示列表，以便用户可以选择不同的类别（如果他/她选择）。请帮我弄清楚为什么它摆脱了下拉菜单以及如何修复它。提前致谢！（而且，如果这是一个非常愚蠢的问题，请道歉......

```
<html>
<head>
<script>

//This is the basic XML stuff.
if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }

else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

xmlhttp.open("GET","websites.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

var x=xmlDoc.getElementsByTagName("site");

//This is the part that handles printing the items under the various categories.
function printCat(cat)
    {
        if(cat=="all")
            {
                for (i=0;i<x.length;i++)
                    {
                        document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue + "<br/>");
                    }
            }

        else
            {
                for (i=0;i<x.length;i++)
                    {
                        if (x[i].getElementsByTagName("category")[0].childNodes[0].nodeValue==cat)
                            {
                                document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue + "<br/>");
                            }
                    }
            }
    }
</script>
</head>
<body>

    <form action='../'>
        <select onchange='printCat(this.options[this.selectedIndex].value)'>
                <option value='all'>All</option>
                <option value='search'>Search</option>
                <option value='social_media'>Social Media</option>
        </select>
    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:58:01.943

而不是 document.write，使用你必须创建一串站点名称（或其他）的循环。在每个字符之后包含换行符，即：+ "\n" +

在函数末尾添加以下行：this.innerHTML = myString;

“this”指的是函数调用元素，“innerHTML”指的是调用元素打开和关闭标签之间的空间。它将覆盖那里的任何其他内容（就像 document.write 将覆盖 doc 标签之间的所有内容一样）。从那里微调以获得您想要的结果。

例如，创建第二个下拉元素并从该元素调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:35:37.000

jQuery 非常适合添加和删除这样的元素。这是一个基于您的 printCat() 函数的示例：http: [//jsfiddle.net/hansvedo/kxcvx/](http://jsfiddle.net/hansvedo/kxcvx/)

您可以看到下面的 jQuery 部分会将新的 LI 元素“附加”到现有列表中。

```
<ul id="websites">
    <li>websites added here</li>
</ul>

// jQuery
$('ul#websites').append('<li>' + x[i] + '</li>'); 
```

# android - 未定义 Notification 类型的 setPriority (int) 方法

> ID：13808939
> 
> 赞同：3
> 
> 时间：2012-12-10T20:46:23.577
> 
> 标签：android, notifications

由于 Jelly Bean 可以设置通知的优先级。这样你甚至可以设置 PRIORITY_MIN 来隐藏状态栏上的通知图标。我读过它，它很简单，你只需要使用它：

```
MyNotification.setPriority(Notification.PRIORITY_MIN); 
```

我的问题是我收到编译错误： **“方法 setPriority (int) is undefined for the type Notification”**

我的应用程序必须在不同版本的 Android 中运行，因此，我知道 JellyBean 下不提供该功能，因此有没有办法包含编译器标签或类似的东西来根据 Android 版本添加该功能。我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T20:53:01.630

Android 会自动处理这个问题。无需对特定版本号进行额外标记。当涉及到您的编译错误时，我很幸运能够使用下面的代码。您要确保使用`NotificationCompat`并确保您也导入`android.support.v4.app.NotificationCompat;`。

## 此代码应该可以工作：

```
int pri = 0;
NotificationCompat.Builder MyNotification = new NotificationCompat.Builder(ctx);
MyNotification.setPriority(pri); 
```

![在此处输入图像描述](../Images/1438eb760da7767b6aee605ab14ed7bd.png)

* * *

![在此处输入图像描述](../Images/d76c590191a49a277a6873fe5c01522c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-06T14:44:35.923

我只想添加一点改进**@EGHDK**的答案。

# 这是很好的代码：

```
int pri = 0;
NotificationCompat.Builder MyNotification = new NotificationCompat.Builder(ctx);
MyNotification.setPriority(pri); 
```

# 几乎没有改进：

```
NotificationCompat.Builder MyNotification = new NotificationCompat.Builder(ctx);
MyNotification.setPriority(NotificationCompat.PRIORITY_DEFAULT); // or any priority 
```

不易出错的方法。因为我正在使用`Notification.PRIORITY_DEFAULT`它**必须**是`NotificationCompat.PRIORITY_DEFAULT`

> 任何可能出错的事情都会出错

[墨菲定律](https://en.wikiquote.org/wiki/Murphy%27s_law)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-07-23T15:25:49.707

它不能工作超过 26 个 android API，所以检查条件：

```
if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.O){
val notificationBuilder:Notification.Builder=Notification.Builder(this,CHANNEL_Id)
                .setContentText("Big Text Notification")
                .setSmallIcon(R.drawable.ic_launcher_background)
                .setLargeIcon(ic)
                .setStyle(bigTextNotification)
                .setContentText("this is Big Text Notification..")

}
else{
         .setContentText(" big text")
                .setSmallIcon(R.drawable.ic_launcher_background)
                .setLargeIcon(ic)
                .setStyle(bigText)
                .setPriority(NotificationCompat.PRIORITY_DEFAULT)

} 
```

您可以使用`NotificationCompat.PRIORITY_DEFAULT`

# python - 将值传递给我的 Python 脚本的 procmal 配方

> ID：13808950
> 
> 赞同：1
> 
> 时间：2012-12-10T20:47:35.777
> 
> 标签：python, procmail

我以前从未使用过 procmail，但我相信（根据我的研发）这可能是我破解谜语的最佳选择。我们的系统收到一封电子邮件，其中我需要 3 个值，它们是：

1.  来自 SUBJECT 行的 4 位或 5 位整数。（我们将其称为“N”）

2.  来自 REPLY-TO 行的电子邮件别名（我们将称为“R”）

3.  确定它的电子邮件类型，我的意思是说“案例”或“项目”。（我们将称为“T”）这个值将被解析出 SUBJECT 行。

如果有人能帮我做那个食谱，我将不胜感激。

接下来我需要做的是：

1.  将这 3 个值发送到 Python 脚本（我可以直接从 procmail 执行此操作吗？管道？还有别的吗？）
2.  删除电子邮件

我只需要接受来自 4 个域名的这些电子邮件，例如：

```
(@sjobeck.com|@cases.example.com|@messages.example.com|@bounces.example.com) 
```

最后，是将这 3 个值通过管道传输到第二个脚本，并提供一些关于这样做的最佳语法的建议。这里的任何建议都是非常感激的。这会是这样的吗：

```
this-recipe $N $T $R | second-script.py 
```

或者究竟会是什么样子？或者这不是 procmail 问题和 Python 问题？（如果是，那没关系，我去那边处理。）

非常感谢！

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:22:10.740

Procmail 可以提取这些值，或者您可以将整个消息传递给标准输入上的 Python。

假设您想要最后的数字并且需要 4 或 5，如下所示：

```
R=`formail -zxReply-to: | sed 's/.*<//;s/>.*//'`
:0
* ^From:.*@(helpicantfindgoogle\.com|searchengineshateme\.net|disabled\.org)\>
* ^Subject:(.*[^0-9])?\/[0-9][0-9][0-9][0-9][0-9]?$
| scriptname.py --reply-to "$R" --number "$MATCH" 
```

这说明了提取标头值的两种不同技术；通过调用来提取回复标头`formail`（这将根据您的评论仅提取电子邮件终点；如果您通过“别名”表示其他含义，请正确定义它），而尾随的 4 或 5 数字整数来自主题被我在特殊运算符的条件下匹配`\/`。

*更新：*添加了一个附加条件，以仅处理 From: 标头指示发件人位于域`helpicantfindgoogle.com`、`searchengineshateme.net`或`disabled.org`.

正如管道操作所暗示的那样，您的脚本将能够读取其标准输入上的触发消息，但如果您不需要它，请不要读取标准输入。

如果交付成功，Procmail 将在此配方完成时停止处理。因此，您不需要显式丢弃匹配的消息。（如果您想继续前进，请使用`:0c`而不是仅使用`:0`.）

作为一种效率调整（例如，如果您收到大量电子邮件，并且只需要将其中的一小部分传递给此脚本），您可能希望重构为仅在条件匹配时提取回复：

```
:0
* ^From:.*@(helpicantfindgoogle.com|searchengineshateme\.net|disabled\.org)\>
* ^Subject:(.*[^0-9])?\/[0-9][0-9][0-9][0-9][0-9]?$
{
  R=`formail -zxReply-To: | sed 's/.*<//;s/>.*//'`
  :0
  | scriptname.py --reply-to "$R" --number "$MATCH"
} 
```

只有同时满足两个条件时才会输入块（和之间的东西`{`） 。`}`从 Subject: 标题中提取数字的`$MATCH`方法与以前一样；如果 From: 条件匹配且 Subject: 条件匹配，则提取的数字将在`$MATCH`.

# python - 烧瓶、nginx 和 uwsgi

> ID：13808952
> 
> 赞同：5
> 
> 时间：2012-12-10T20:47:45.020
> 
> 标签：python, nginx, flask, uwsgi

我的烧瓶应用程序看起来像这样......
**myapp.py**

```
from flask import Flask  
app = Flask(__name__) 

@app.route("/")  
def hello():  
   return "Hello World!"  

if __name__ == "__main__":  
   app.run('0.0.0.0') 
```

我的 nginx 设置

```
server {
         root /home/admin.jeremylspencer.com;
         server_name admin.jeremylspencer.com;

         location / { try_files $uri @yourapplication; } 
         location @yourapplication {
                 include uwsgi_params;
                 uwsgi_pass unix:/tmp/uwsgi.sock;
         }       

         #error_page 404 /404.html;
         #error_page 500 502 503 504 /50x.html;
         location = /50x.html {
                 root /usr/share/nginx/www;
         }        
         location ~ /\.ht {
                 allow all;
         }
} 
```

最后我重新启动 nginx 并运行它：

> sudo uwsgi -s /tmp/uwsgi.sock --module myapp --callable app 这是输出

```
*** Starting uWSGI 1.4.3 (64bit) on [Mon Dec 10 15:41:00 2012] ***
compiled with version: 4.6.3 on 10 December 2012 13:06:15
os: Linux-3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012
nodename: jeremylspencer.com
machine: x86_64
clock source: unix
detected number of CPU cores: 2
current working directory: /home/admin.jeremylspencer.com
detected binary path: /usr/local/bin/uwsgi
uWSGI running as root, you can use --uid/--gid/--chroot options
*** WARNING: you are running uWSGI as root !!! (use the --uid flag) *** 
*** WARNING: you are running uWSGI without its master process manager ***
your processes number limit is 31285
your memory page size is 4096 bytes
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
uwsgi socket 0 bound to UNIX address /tmp/uwsgi.sock fd 3
Python version: 2.7.3 (default, Aug  1 2012, 05:25:23)  [GCC 4.6.3]
*** Python threads support is disabled. You can enable it with --enable-threads ***
Python main interpreter initialized at 0x1dfa790
your server socket listen backlog is limited to 100 connections
mapped 72392 bytes (70 KB) for 1 cores
*** Operational MODE: single process ***
WSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x1dfa790 pid: 13645 (default app)
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI worker 1 (and the only) (pid: 13645, cores: 1) 
```

但我得到的只是一个 502 错误......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T06:24:24.830

unix 套接字是文件系统对象，因此 nginx 需要对 /tmp/uwsgi.sock 的写入权限

您正在以 root 身份运行 uWSGI（为什么 ???），因此 /tmp/uwsgi.sock 将归 root 所有，而 nginx 通常以无人身份或 www-data 身份运行。

如果您不想考虑权限，只需使用 TCP 套接字，但显然不要以 root 身份运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T16:27:53.367

你可以看看这个：[Python flask with Nginx and uWSGI](https://github.com/source-nerd/Python-flask-with-uwsgi-and-nginx) as the repo 提供了关于如何**在生产模式下使用 Flask**的确切案例/场景。

# php - 对 SEO URL 的 POST 请求被禁止

> ID：13808954
> 
> 赞同：4
> 
> 时间：2012-12-10T20:48:02.533
> 
> 标签：php, apache, mod-rewrite

我有一个基本的 MVC 系统，它将 POST 数据发送到 URL，例如

管理员/产品/添加/

但这给了我一个错误

> 禁止的
> 
> 您无权访问此服务器上的 /admin/product/add/。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

RewriteRule 很简单

```
RewriteRule ^(.*)/$ index.php?uri=$1 
```

上次我在服务器上看到这个将文件/目录权限更改为 755 似乎解决了它，但这次没有。我从来没有真正理解错误的原因，所以希望有人能够提供更多信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T22:45:05.283

您有 2 个错误：

1.  您无权访问此服务器上的 /admin/product/add/。
2.  此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

第二个肯定是同一个错误的结果。您的 apache 配置中可能有一些东西可以从默认的 http 服务器处理中删除 404 错误并将其推送到您的 php 应用程序，如果这个 php 应用程序正在运行，我们将有一个不错的 404，但是......

第一个告诉您您的 php 应用程序根本没有运行。

所以。第一个错误告诉我们 apache 确实尝试直接访问`/path/to/documentroot/admin/product/add/`您服务器上的目录并生成它的列表（只有当 apache 被授权这样做时才会列出目录内容）。但是，这当然不是您服务器上的真实目录。它是应用程序中的**虚拟路径。**所以 apache 以 404 结束（导致错误 2）。

应用程序处理**虚拟**路径，apache 不管理它。RewriteRule 的工作是在apache 尝试提供请求**之前**捕获请求的路径，并将其`index.php`作为查询字符串参数提供给单个 php 文件 ()。

所以......这个重写规则没有应用。可能阻止应用此规则的事情有很多：

1.  mod_rewrite 未激活：模块是否存在并启用（`RewriteEngine on`）？
2.  语法错误：mod rewrite 语法很难阅读，有时真的很复杂。但在这里看起来很简单。
3.  RewriteRule 结果文件可能不是 apache 的有效目标。如果 index.php 文件不在 DocumentRoot 中，或者 apache 用户无法读取，则 apache 将失败。**警告**：拥有 apache 用户可读的文件意味着对文件具有读取权限，而且对 apache 用户的所有 **父目录具有****执行**权限。这是您的经典/解决方案正在解决问题的地方。**`chmod``chown`**
***   该规则必须位于有效的配置文件中。此规则是否在位置或目录部分内的 apache 配置文件中？或者可能在全局范围内——这可能会改变重写规则语法——。还是在 .htaccess 文件中？如果它是 .htacces，apache 是否会读取 .htacces 文件，并且那里允许使用 mod-rewrite 指令（`AllowOverride None`）。没有其他 .htaccess 文件优先吗？**

 **所以要解决这个问题：

*   如果您的 apache 版本高于 2.2.16，您可以将 RewriteRule 替换为**[FallbackRessource /index.php](http://httpd.apache.org/docs/2.4/mod/mod_dir.html#fallbackresource)**以检查这不是来自 mod-rewrite 问题。
*   尝试**直接**请求`index.php`，以便至少对该文件的直接请求有效
*   尝试**直接访问 documentRoot 上的有效资源**（txt 文件、图像、不应该由重写处理但直接提供的东西）
*   检查您的任何虚拟路径是否可以映射真实的物理路径 Apache 并未尝试为物理路径提供服务（例如当您编写 a 时`RewriteCond %{REQUEST_FILENAME}-d`），而是将路径真正推送到`index.php`
*   检查 apache 错误**日志**。
*   **`RewriteLog`使用and**调试**mod_rewrite`RewriteLogLevel`**
***   收集事实、设置和测试，然后将其推送到 SO 或[Servfault](http://serverfault.com)。**

 **所以问题很简单：php 应用程序没有收到请求。但是有很多方法可以结束这种状态。消息本身并不是很重要。找到错误的唯一方法是检查所有参数（或者拥有多年的错误修复经验并为灯错误开发预认知直觉器官 - 通常是胡须 - 就像管理员一样）。我们帮助您的唯一方法是在大量配置细节中找到奇怪的事实，这就是为什么好的问题包含大量信息，即使所有这些信息对您来说看起来都只是“经典”。

**编辑**

要澄清问题，您应该编辑您的答案，`POST` 使用 Chrome 开发者工具或 firebug 等工具跟踪请求（将网络跟踪保持在记录模式以捕获多个 POST）或尝试使用 Live HTTP 标头回复重播该帖子。您应该尝试隔离有问题的 POST 并向我们提供详细信息。调试并不神奇。

现在我知道一个神奇的随机 POST 失败。这是空的**GET url 错误**。可能是（或不是）。例如，如果您在某处隐藏了一个空的 GET url ( `<IMG SRC="">`，`url()`在 css 中，或者在标头中有一个空的 LINK。因为这些隐藏的 POST 在 HTTP 中定义为“replay-the-request-which-launched-the-source-page,并且一些浏览器甚至会重放 POST，如果他们找到了就会给你的页面。这可能会导致隐藏的 POST 被破坏。

也可能是 POST 未发送到正确的服务器。很难说。因此，请从您的评论中收集信息，添加更多网络分析并编辑现在确实包含的事实不足的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:54:01.817

尝试这个：

```
RewriteCond %{REQUEST_METHOD} =POST
RewriteRule ^(.*)/$ index.php?uri=$1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:36:50.600

用这个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?uri=$1 [L] 
```

也只能使用 www 或非 www 域，但不能同时使用两者。使用 htaccess 将用户重定向到您想要的位置...

非万维网到万维网：

```
RewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

万维网到非万维网：

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^www\.(.*)$ http://%1/$1 [R=301,L] 
```****

# asp.net-mvc - WebApi 是否支持开箱即用的 application/x-www-form-urlencoded

> ID：13808958
> 
> 赞同：7
> 
> 时间：2012-12-10T20:48:17.797
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-web-api

嗨，我正在尝试设置一个 api 以允许第 3 方 webhook 目标发布 application/x-www-form-urlencoded。

我只在 webapi 中使用过 json 和 xml。

我需要创建一个自定义媒体类型来接受这个还是应该默认工作？

任何建议，将不胜感激。

更新

我查看了提供的示例，但我仍然不确定 webhook 将发送到我的 api 的数据示例的样子。

我该如何设置我的控制器来接受这个？

```
POST /some-path HTTP/1.1
主机：your.host.example.com
内容类型：application/x-www-form-urlencoded
内容长度：2837
连接：保持活动
接受：*/*environment=prod&domain_prefix=example&type=product.update&payload=%7B%22id%22%3A%229fe945bc-2d20-11e2-8057-080027706aa2%22%2C%22retailer_id%22%3A%229a5521c3-2d20-11e2-8057-080027706aa2 %2C%22sku%22%3A%229416050901074%22%2C%22handle%22%3A%221000001%22%2C%22source%22%3A%22USER%22%2C%22active%22%3A%221%22%2C %22name%22%3A%22Ginger+Beer%22%2C%22description%22%3A%22%3Cp%3EA+美味+姜+啤酒+that+is+both+提神+and+good+value+for+money .%3C%5C%2Fp%3E%22%2C%22supplier%22%3A%7B%22id%22%3A%229fc84329-2d20-11e2-8057-080027706aa2%22%2C%22retailer_id%22%3A%229a5521c3- 2d20-11e2-8057-080027706aa2%22%2C%22name%22%3A%22Brewer+Supplies+Ltd.%22%2C%22description%22%3A%22We+supply+all+things+brewed%5Cn%22%2C%22source%22%3A%22USER%22%7D%2C%22brand%22%3A%7B%22id %22%3A%229fb8e69d-2d20-11e2-8057-080027706aa2%22%2C%22name%22%3A%22Vaughan%27s+姜+啤酒+酿造+公司%22%7D%2C%22库存%22%3A%5B %7B%22product_id%22%3A%229fe945bc-2d20-11e2-8057-080027706aa2%22%2C%22outlet_id%22%3A%229aee412b-2d20-11e2-8057-080027706aa2%22%2C%22attributed_cost%22% %22%2C%22count%22%3A%2222%22%2C%22reorder_point%22%3A%2212%22%2C%22restock_level%22%3A%2240%22%7D%2C%7B%22product_id%22%3A %229fe945bc-2d20-11e2-8057-080027706aa2%22%2C%22outlet_id%22%3A%229ae97219-2d20-11e2-8057-080027706aa2%22%2C%22attributed_cost%22%3A%221%22count%2C%22 %3A%2214%22%2C%22reorder_point%22%3A%226%22%2C%22restock_level%22%3A%2220%22%7D%5D%2C%22price_book_entries%22%3A%5B%7B%22id%22 %3A%22a1098b59-2d20-11e2-8057-080027706aa2%22%2C%22product_id%22%3A%229fe945bc-2d20-11e2-8057-080027706aa2%22%2C%22price%22%3A%222.00%22%2C%22tax%22%3A%220.25%22%2C%22type%22% 3A%22BASE%22%2C%22customer_group_id%22%3A%229b097e69-2d20-11e2-8057-080027706aa2%22%2C%22customer_group_name%22%3A%22All+Customers%22%2C%22tax_id%22%3A%229a025ff0- 2d20-11e2-8057-080027706aa2%22%2C%22tax_name%22%3A%22NZ+GST%22%2C%22tax_rate%22%3A%220.150000%22%7D%2C%7B%22id%22%3A%22a1318cf0- 2d20-11e2-8057-080027706aa2%22%2C%22product_id%22%3A%229fe945bc-2d20-11e2-8057-080027706aa2%22%2C%22price%22%3A%221.90%22%2C%22tax%22%3A% 220.24%22%2C%22type%22%3A%22GENERAL%22%2C%22customer_group_id%22%3A%229b097e69-2d20-11e2-8057-080027706aa2%22%2C%22customer_group_name%22%3A%22All+Customers%22% 2C%22tax_id%22%3A%229a025ff0-2d20-11e2-8057-080027706aa2%22%2C%22tax_name%22%3A%22NZ+GST%22%2C%22tax_rate%22%3A%220。150000%22%7D%2C%7B%22id%22%3A%22a13a6320-2d20-11e2-8057-080027706aa2%22%2C%22product_id%22%3A%229fe945bc-2d20-11e2-8057-080027706aa2%22%C%2 22min_units%22%3A%2210.00%22%2C%22price%22%3A%221.50%22%2C%22tax%22%3A%220.19%22%2C%22type%22%3A%22BASE%22%2C%22customer_group_id% 22%3A%229b097e69-2d20-11e2-8057-080027706aa2%22%2C%22customer_group_name%22%3A%22All+Customers%22%2C%22tax_id%22%3A%229a025ff0-2d20-11e2-8057-080027706aa2% 2C%22tax_name%22%3A%22NZ+GST%22%2C%22tax_rate%22%3A%220.150000%22%7D%5D%7D19%22%2C%22type%22%3A%22BASE%22%2C%22customer_group_id%22%3A%229b097e69-2d20-11e2-8057-080027706aa2%22%2C%22customer_group_name%22%3A%22All+Customers%22% 2C%22tax_id%22%3A%229a025ff0-2d20-11e2-8057-080027706aa2%22%2C%22tax_name%22%3A%22NZ+GST%22%2C%22tax_rate%22%3A%220.150000%22%7D%5D% 7D19%22%2C%22type%22%3A%22BASE%22%2C%22customer_group_id%22%3A%229b097e69-2d20-11e2-8057-080027706aa2%22%2C%22customer_group_name%22%3A%22All+Customers%22% 2C%22tax_id%22%3A%229a025ff0-2d20-11e2-8057-080027706aa2%22%2C%22tax_name%22%3A%22NZ+GST%22%2C%22tax_rate%22%3A%220.150000%22%7D%5D% 7D

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:52:41.427

是的，它支持开箱即用。

请看一下该示例：[ASP.NET Web API：发送表单-网址编码数据](https://docs.microsoft.com/en-us/aspnet/web-api/overview/advanced/sending-html-form-data-part-1)

# iphone - 用于使用 UDID 构建错误安装到远程设备的 iOS 应用程序

> ID：13808968
> 
> 赞同：0
> 
> 时间：2012-12-10T20:49:02.930
> 
> 标签：iphone

嗨，我对钛并不陌生，但我是使用钛创建 ipa 的新手。问题是，当我向钛提供配置文件时，它开始构建，但出现以下错误

```
 ERROR] [DEBUG] While reading /Users/aadilf/Desktop/QLD Best Bets/build/iphone/build/Debug-iphoneos/QLD Best Bets.app/images/icon.png pngcrush caught libpng error:
  [ERROR] [ERROR] While reading /Users/aadilf/Desktop/QLD Best Bets/build/iphone/build/Debug-iphoneos/QLD Best Bets.app/images/icon.png pngcrush caught libpng error:
[ERROR] 
[ERROR] Error: Traceback (most recent call last):
  File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/iphone/builder.py", line 1477, in main
execute_xcode("iphoneos%s" % iphone_version,args,False)
 File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/iphone/builder.py", line 1231, in execute_xcode
output = run.run(args,False,False,o)
 File "/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/iphone/run.py", line 41, in run
sys.exit(rc)
SystemExit: 65 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:10:12.073

为项目提供干净的构建并再次运行它已经解决了问题

谢谢

# jquery - JQuery 创建元素的动态和水平/缩进列表

> ID：13808969
> 
> 赞同：1
> 
> 时间：2012-12-10T20:49:06.340
> 
> 标签：jquery, html, list, parent-child

我正在尝试构建一个工具，允许我们的管理员创建关键字级别，然后与他们的文档相关联。例如，关键字的布局如下所示：

```
Level 2: NBA Teams
   Level 3: Eastern Conference
   Level 3: Western Conference
      Level 4: Oklahoma City Thunder
      Level 4: Memphis Grizzlies 
```

等等......这应该给你一个想法。我有一个非常接近的模型，但是一旦开始引入 4 级，项目是否被添加到正确的巢中似乎是零星的。

[http://jsfiddle.net/mrU5n/1/](http://jsfiddle.net/mrU5n/1/)

我真的不知道如何描述这个问题，但花点时间点击 jsFiddle 测试以查看第 4 级的问题。在某些情况下，它运行顺利，但在其他情况下，它没有，我还没有找到链接以确定究竟是什么原因导致四级关键字被添加到错误的三级关键字中。在某些情况下，如果我将一个 4 级关键字添加到一个 3 级关键字，然后添加一个新的 3 级关键字，它不会将其添加到列表的底部，而是将其添加到 4 级关键字的上方。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:20:03.430

在重新思考了一下逻辑后，我放弃了这个想法并完全重新设计了它。对于任何有兴趣的人。

这是一个片段：

```
var index_2 = 16;
$("#container").on('click','.addlevel2', function() {
    $(level2_div).insertAfter(".level2_main:last").find("input").attr("name","field_"+index_2).attr("id","field_"+index_2);
    index_2++;
    return false;
}); 
```

这是一个显示工作版本的新 jsfiddle：

[http://jsfiddle.net/xJ94F/](http://jsfiddle.net/xJ94F/)

# database - sql server 2005 还原卡在还原

> ID：13808970
> 
> 赞同：1
> 
> 时间：2012-12-10T20:49:06.740
> 
> 标签：database, sql-server-2005, database-backups, database-restore

我正在为运行 [SQL server] 2005 的数据库镜像设置第二台服务器。我从生产服务器执行了完整的数据库备份。我正在将该数据库恢复到辅助（镜像）服务器。恢复开始，但只是停留在恢复中。`NORECOVERY`我做了一些研究，发现如果您选择了我选择的恢复状态，数据库将陷入恢复状态。但是我选择了`NORECOVERY`，因为我读到那是您在恢复时想要的状态。

谁能指出我正确的方向？我有 9 个数据库需要还原，然后配置镜像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:05:41.373

这是正确的状态——它没有被卡住。

不要将数据库置于 RECOVERY 模式。当数据库仍处于此模式时，您可以并且应该开始镜像到辅助节点。

启用镜像后，您会看到您的数据库将从“Restoring...”变为“Synchronizing...”，这意味着镜像工作正常。

# ruby - Ruby - 合并 2 个对象数组并按一个属性分组，并将其余部分相加

> ID：13808973
> 
> 赞同：1
> 
> 时间：2012-12-10T20:49:10.490
> 
> 标签：ruby, arrays, ruby-on-rails-3

鉴于我有 2 个包含对象的数组。在这些对象上有一个日期时间属性和固定数量的指标。我需要做的是合并两个数组并按日期时间对指标求和。

阵列 1：

```
#<ReadingsProvider::Reading:0x007fc52dd5a0a8 @start_date=2012-12-09 03:00:00 UTC, @item1=13, @item2=46, @item3=6, @item4=4, @item5=9, @item6=17, @item7=34>, 
#<ReadingsProvider::Reading:0x007fc52dbd54d0 @start_date=2012-12-09 04:00:00 UTC, @item1=43, @item2=90, @item3=7, @item4=4, @item5=9, @item6=17, @item7=34>, 
```

阵列 2

```
#<ReadingsProvider::Reading:0x007fc52db95f88 @start_date=2012-12-09 03:00:00 UTC, @item1=23, @item2=16, @item3=5, @item4=6, @item5=8, @item6=20, @item7=36>, 
#<ReadingsProvider::Reading:0x007fc52db591f0 @start_date=2012-12-09 04:00:00 UTC, @item1=76, @item2=12, @item3=6, @item4=5, @item5=10, @item6=17, @item7=33> 
```

最终数组（假设我的手工数学是正确的......）

```
#<ReadingsProvider::Reading:0x007fc52db95f88 @start_date=2012-12-09 03:00:00 UTC, @item1=36, @item2=62, @item3=11, @item4=10, @item5=17, @item6=37, @item7=70>, 
#<ReadingsProvider::Reading:0x007fc52db591f0 @start_date=2012-12-09 04:00:00 UTC, @item1=119, @item2=102, @item3=13, @item4=9, @item5=19, @item6=34, @item7=67> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:20:03.537

我最终做了什么......需要测试以确保它按预期工作。

```
def merge_arrays(array1, array2)
  result = array1.concat(array2).group_by(&:start_date).map do |date, array|
    my_hash = {
      start_date: date,
      item1: array.map(&:item1).inject(:+),
      item2: array.map(&:item2).inject(:+),
      item3: array.map(&:item3).inject(:+),
      item4: array.map(&:item4).inject(:+),
      item5: array.map(&:item5).inject(:+),
      item6: array.map(&:item6).inject(:+),
      item7: array.map(&:item7).inject(:+)
    }
    ReadingsProvider::Reading.new(my_hash)
  end

  result
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:23:27.683

具体任务，但我尝试写一些代码。首先，将方法包含到 ReadingsProvider::Reading

```
def concat_with(another)
  if @reading_start_date == another.instance_variable_get(:@reading_start_date)
    instance_variables.each do |var|
      if var.to_s.include?("item") && another_value = another.instance_variable_get(var)
        another.instance_variable_set(var, another_value + instance_variable_get(var))
      end
    end
  end
end 
```

然后一般做法：

```
array1.map do |reading|
  array2.map do |another|
    reading.concat_with(another)
  end
end.flatten.compact 
```

如果我想知道更多，代码应该更优雅。这段代码看起来很难看。

# blackberry-10 - 如何让 DateTimePicker 等控件在没有空间的情况下展开

> ID：13808974
> 
> 赞同：1
> 
> 时间：2012-12-10T20:49:12.790
> 
> 标签：blackberry-10, blackberry-cascades

我的问题是我在堆栈布局中的页面上几乎没有控件。当我单击 DateTimePicker 时，它正试图适应页面，由于没有空间，我只看到一小块控件。我已经看到设置应用程序中没有这样的行为。如何做到这一点？

# html - CSS 媒体查询顺序

> ID：13808978
> 
> 赞同：0
> 
> 时间：2012-12-10T20:49:35.450
> 
> 标签：html, css

我有一个关于 CSS 媒体查询的问题。我的问题是我的 CSS 媒体查询的顺序是否会产生影响。

例如：

```
<link rel="stylesheet" href="desktop.css" media="">
<link rel="stylesheet" href="laptop.css" media="">
<link rel="stylesheet" href="mobile.css" media="">

<link rel="stylesheet" href="mobile.css" media="">
<link rel="stylesheet" href="laptop.css" media="">
<link rel="stylesheet" href="desktop.css" media=""> 
```

假设我要针对具有多个媒体查询的台式机、笔记本电脑和移动设备。这会改变设计在多个设备上的显示方式吗？链接的顺序是否重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:56:18.423

简而言之，是的，它会的。相当大量。

但它们有可能产生连锁反应。

如您所知`Cascading Style Sheets`，顾名思义，层叠通过不同的样式。

因此，例如，如果您有样式，`desktop.css`它们将推广到页面中的所有元素。然后`laptop.css`出现并具有另一种样式，该样式所针对`desktop.css`的样式`laptop.css`将作为先例。此外，适用于样式`mobile.css`

例子：

```
//Desktop.css
body {
      background: pink;
 }

//laptop.css
body {
      background: yellow;
 }

//mobile.css
body {
      background: green;
 } 
```

如果没有媒体查询，则意味着背景将为绿色。

如果我们这样做：

```
//laptop.css
body {
      background: yellow;
 }

//mobile.css
body {
      background: green;
 }

//Desktop.css
body {
      background: pink;
 } 
```

背景将是粉红色的。

按照您希望它们在文档中层叠的顺序放置项目。除非您希望移动设备成为您网站的默认版本，否则不要将移动设备放在桌面之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:59:26.553

不，通常避免仅依赖于使用台式机或手持设备等媒体类型。众所周知，移动设备会伪造此查询，以便获得更好的样式表。使用更强大的媒体查询来指定屏幕分辨率、像素密度等。在您的样式表中，您可以：

```
@media (min-width: 768px) and (max-width: 1024px) {
  body {
    background: #ccc;
  }
} 
```

如果您的查询重叠，它们会受到正常级联的影响并且可以被覆盖。

规格： [http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

教程： [http ://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:58:05.367

您应该首先放置移动和笔记本电脑的媒体查询。因为如果您使用 min-width:...px 例如，css 将被更大的屏幕覆盖，如果屏幕具有最小宽度，则不会被覆盖。

例如，将使用您的 mobile.css，当 min-width 为 0 时，您的 laptop.css 为 min-width 700 和 desktop.css 为 min-width 1000。如果您的屏幕为 800px 宽度，则移动将使用 .css 和 notebook.css，但不会使用 desktop.css。如果你反过来做，mobile.css 每次都会覆盖，因为每个屏幕的最小宽度都是 0px。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T16:13:49.047

由于相同 css 的最后一个声明将覆盖前一个，因此它应该声明样式的超集，然后将其缩小。

例如，所有桌面、移动设备的颜色通常相同，并且元素的大小不同。

# php - PHP系统应该如何生成菜单链接？

> ID：13808979
> 
> 赞同：0
> 
> 时间：2012-12-10T20:49:42.907
> 
> 标签：php, menu, switch-statement, href, event-driven

我的计算机课程的一部分要求我构建一个完整的 PHP 系统。我选择为一家虚构的股票经纪公司创建一个，该公司希望其客户能够通过网络系统查看他们的资产（股票和债券）。

对于菜单，我的第一个想法是使用一些简单的“hrefs”，因为菜单将被固定为显示页面链接，如“查看股票；查看债券；我的帐户等”。但是，我的老师坚持不能使用“hrefs”，唯一可行的方法是使用 switch 语句（或者他称之为：case 语句）。这是真的？应该注意的是，我的老师几乎没有 PHP 经验，而且我们似乎对他所说的一切都发生了冲突（他一直在谈论 PHP 是事件驱动的并涉及系统循环等。我一直认为这是不真实的...... ）。

那么，有人有什么建议吗？我应该违背他的意愿坚持使用“hrefs”，还是使用其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:24:36.293

我希望你们两个之间只是通信失败...... href 是 < a > 标签的一个属性。这些是 HTML 元素，与 PHP 完全无关。它只是“链接”到页面的公认方法。如果您不允许使用 href，那么为了在页面之间导航，您将需要 AJAX 或表单 POST。这对菜单都没有意义。PHP 中无法生成 href 的功能，因为 PHP 是一种服务器端脚本语言，而 href 用于客户端导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:12:56.350

我会说你的教授是对的，也是对的。我实际上正在与工程学院网络开发团队合作，我们用 PHP 做所有事情。我不认为他真的是正确的，因为从它的声音来看，hrefs 对你正在做的事情非常满意。我们主要使用 switch case 语句通过 AJAX 将 POST 语句传递给自己，然后通过独立的 case 处理它们。这方面的一个例子是

```
if (isset($_POST['whatever'])) {
switch($_POST['whatever']) {
case "1":
//I can now do something if the POST variable passed as "whatever" was deemed '1"
break;
case "2":
//I can do something if the POST variable pass as "whatever" was deemed "2"
break; 
```

等等等等……

因此，它的两个主要优点是它使它变得非常简单，因为您不必处理数百万个 href 站点。我敢肯定，对于您的应用程序来说，这可能没什么大不了的，但是当您真正开始执行每个网站彼此非常相似的大型项目时，很高兴知道您可以依靠 php 的动态框架。另一个优点是人们看不到你的代码 ^_^ 如果我查看源代码并看到大量的 href 链接，我可能会更多地了解你的文件树结构，但这从来都不是好事（那里是通过重定向和使用 PHP/javascript 来解决这个问题的方法，但是是的......）

总的来说，虽然他是你的教授，但只是为了让你知道你想要达到的目标，hrefs 完全没问题。我知道很多专业网站，如 Yahoo 甚至 Stackoverflow 都使用 href 链接他们的网站（只需在相关问题中查看左侧。它们都使用 href 链接）。

您说计算机课程希望您创建一个完整的 PHP Web 系统，只是为了让您知道计算机课程通常是用于教育而不是实际实用性。我认为您通过提问是在做正确的事情，但是为了上课，您的教授可能会鼓励您学习 PHP，尽管它不是最好的方法（尽管这总是主观的）。也许您可以找到一种方法来找到一个可以在 PHP 中进行开发但仍然使用 hrefs 的中间地带？希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T20:54:41.803

你的问题不是很清楚，但对我来说。我所要做的就是使用 swich 作为菜单。

```
if(isset($_GET['id']) && !empty($_GET['id'])) {                     

    $id = htmlentities($_GET['id']);                    
    $id = mysql_real_escape_string($_GET['id']);

    switch($id) {

        case "about";       // About us
        echo $about;
        break;
case "timeline";        // About us
echo include('timeline.php');
break;
            case "participate";     // Rules
            echo  $participate;
            break;
case "reg_success";     // Register Success     
echo $reg_success;
break;

    default:    // Contribution
    echo err('Page not Found!');
    break; 
```

# objective-c - 如何链接和更新多个 NSSlider？

> ID：13808990
> 
> 赞同：0
> 
> 时间：2012-12-10T20:50:31.713
> 
> 标签：objective-c, cocoa-bindings, nstextfield, nsslider

我有 3 个`NSSliders`并`NSTextFields`设置了绑定。

每个滑块代表一个 NSInteger 值，一列为低，一列为中，一列为高。我将 Low 的最大值设置为 98，Medium 的最大值设置为 99，High 的最大值设置为 100。值的范围是 0-100，每个滑块之间的差异代表一个可用范围：

示例：如果 Low 是 10，Medium 是 21，Low 是 10-21，Medium 是 21-High 的值。

如何使低总是低于中和高，中总是在低和高之间，高总是大于低和中？

理想情况下，如果满足其中一个条件，我希望能够滑动其中一个并让其他滑块自动滑动——但我不确定解决这个问题的最佳方法（我有很多条件现在的陈述，似乎不正确，并不总是有效）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:01:44.883

```
[slider setTarget:self]; // assume the handler is [self sliderDidMove:]
[slider setAction:@selector(sliderDidMove:)]; 
```

并`sliderDidMove`更改另一个滑块的值

```
[self.otherSlider setDoubleValue:0.1]; 
```

# c++ - 超类可以从其子类继承方法吗？

> ID：13808992
> 
> 赞同：2
> 
> 时间：2012-12-10T20:50:42.110
> 
> 标签：c++, inheritance

我知道子类可以从超类继承方法，但是超类可以为其子类做同样的事情吗？例如：

```
Alpha *a = new Alpha ();
Beta *b = new Beta ();
Gamma *g = new Gamma ();
g = b; 
```

在第四个语句中，我正在创建一个 Gamma 对象作为 Beta 对象，但 Gamma 是超类，而 beta 是子类。所以要么 g 得到一个指向 b 的指针，要么这个代码不会编译，我不太明白哪个答案是正确的。如果有人可以请澄清一下，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:08:52.460

从技术上讲，它不能*继承*它们，但是如果您使用[Curiously Recurring Template Pattern (CRTP) ，它可以](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)*使用*它们。

```
template<class SubClass>
class SuperClass
{
    void DoSomething()
    {
        static_cast<SubClass *>(this)->Foo();
    }
};

class SubClass: public SuperClass<SubClass>
{
    void Foo();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:52:57.003

不，超类不能从其子类继承方法，因为通常超类**不应该**知道从它派生的内容。

# php - CodeIgniter 自定义路由损坏（可能是 PHP 5.4 问题）

> ID：13808996
> 
> 赞同：0
> 
> 时间：2012-12-10T20:50:58.443
> 
> 标签：php, codeigniter, routing, controller

好的，我的应用程序已经运行好几个月了。从今天早上开始，我所有的自定义路线都不再起作用。

在名为“mL”的文件夹中有一个名为“stuff”的控制器。设置自定义路由：

```
$route['default_controller'] = "mL/stuff"; 
```

然后访问“website.com/”，工作正常，将我带到“控制器/mL/stuff”控制器。现在，如果我尝试使用自定义路线：

```
$route['stuff'] = "mL/stuff"; 
```

并访问 'website.com/stuff' 我会被发送到我的 404 页面（在 $route['404_override'] 中设置）。

这对我的所有控制器都是如此，如果我将其设置为 default_controller 它可以正常工作。周末有人将服务器升级到 php 5.4.9，这是我能想到的唯一可能会影响这一点的事情，但我不知道如何/为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:39:41.540

我不认为 php 升级本身会做到这一点，但其他东西肯定有修补。

我唯一能想到的是 htaccess 或 apache 配置/设置已更改 - 结果可能您的全部或部分 htaccess 不再工作（例如不再启用 mod_rewite）

尝试恢复配置中的 index.php 和 url 以查看页面是否加载？

你能检查一下是否启用了mod-rewrite。检查 httpd.conf 是否设置为您的目录的 allowOverride ALL 并且 mod_rewrite 行没有被注释掉。

在此处查看完整详细信息：[http ://www.tildemark.com/enable-htaccess-on-apache/](http://www.tildemark.com/enable-htaccess-on-apache/)

将来，如果它没有损坏，请不要更新它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:30:06.220

我也遇到了同样的情况，无法弄清楚，但我回滚到 php 5.3.x，它会再次工作，直到我们从 codeigniter 团队获得适当的更新，但最后一次更新如下所示

> 我高度怀疑这是与 PHP 相关的。我猜想 PHP 5.4 使用了另一个版本的 Apache（和 mod_rewrite），我会查看 httpd.conf 和/或 .htaccess

通过 narfbg

# android - 触摸时更改gridview中项目的背景颜色

> ID：13808998
> 
> 赞同：4
> 
> 时间：2012-12-10T20:51:15.773
> 
> 标签：android, gridview, ontouchlistener

我有一个填充了 textView 元素的 gridView 布局。我有一个用于 gridView 的 onTouch() 实现，其中被触及的单元格需要更改背景颜色。下面是我的代码，但它不起作用，当我触摸时 VM 会关闭。

```
gridView.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent me) {

            int action = me.getActionMasked();
            float currentXPosition = me.getX();
            float currentYPosition = me.getY();
            int position = gridView.pointToPosition((int) currentXPosition, (int) currentYPosition);

            // Change the color of the key pressed
            ((TextView) gridView.getItemAtPosition(position)).setBackgroundColor(Color.RED);
            return true;
    }
} 
```

编辑：Logcat 跟踪

```
12-10 15:34:28.081: E/InputEventReceiver(829): Exception dispatching input event.
12-10 15:34:28.081: E/MessageQueue-JNI(829): Exception in MessageQueue callback: handleReceiveCallback
12-10 15:34:28.221: E/MessageQueue-JNI(829): java.lang.ClassCastException: java.lang.String cannot be cast to android.widget.TextView
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at com.example.helloworld.GridViewActivity$1.onTouch(GridViewActivity.java:62)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.View.dispatchTouchEvent(View.java:7122)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.View.dispatchPointerEvent(View.java:7307)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3174)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3119)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4155)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4134)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4226)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.os.MessageQueue.nativePollOnce(Native Method)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.os.MessageQueue.next(MessageQueue.java:125)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.os.Looper.loop(Looper.java:124)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at android.app.ActivityThread.main(ActivityThread.java:4745)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at java.lang.reflect.Method.invokeNative(Native Method)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at java.lang.reflect.Method.invoke(Method.java:511)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-10 15:34:28.221: E/MessageQueue-JNI(829):    at dalvik.system.NativeStart.main(Native Method)
12-10 15:34:28.263: D/AndroidRuntime(829): Shutting down VM
12-10 15:34:28.263: W/dalvikvm(829): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-10 15:34:28.362: E/AndroidRuntime(829): FATAL EXCEPTION: main
12-10 15:34:28.362: E/AndroidRuntime(829): java.lang.ClassCastException: java.lang.String cannot be cast to android.widget.TextView
12-10 15:34:28.362: E/AndroidRuntime(829):  at com.example.helloworld.GridViewActivity$1.onTouch(GridViewActivity.java:62)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.View.dispatchTouchEvent(View.java:7122)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
12-10 15:34:28.362: E/AndroidRuntime(829):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
12-10 15:34:28.362: E/AndroidRuntime(829):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
12-10 15:34:28.362: E/AndroidRuntime(829):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.View.dispatchPointerEvent(View.java:7307)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3174)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3119)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4155)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4134)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4226)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.os.MessageQueue.nativePollOnce(Native Method)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.os.MessageQueue.next(MessageQueue.java:125)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.os.Looper.loop(Looper.java:124)
12-10 15:34:28.362: E/AndroidRuntime(829):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-10 15:34:28.362: E/AndroidRuntime(829):  at java.lang.reflect.Method.invokeNative(Native Method)
12-10 15:34:28.362: E/AndroidRuntime(829):  at java.lang.reflect.Method.invoke(Method.java:511)
12-10 15:34:28.362: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-10 15:34:28.362: E/AndroidRuntime(829):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-10 15:34:28.362: E/AndroidRuntime(829):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:15:46.987

其实，我想通了！

我在这里对错误的返回类型进行了类型转换

```
((TextView) gridView.getItemAtPosition(position)).setBackgroundColor(Color.RED); 
```

我真正需要的是方法 getChildAt 而不是 getItemAtPosition （它返回一个字符串）

```
String s = (String) gridView.getItemAtPosition(position);
TextView tv = (TextView) gridView.getChildAt(position);
tv.setBackgroundColor(Color.RED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:05:27.593

改为使用`gridView.setOnItemClickListener`。您还将获得`onItemClick`方法中的位置，而不必像现在这样计算它。

**编辑** 我刚刚意识到您想在仍按下该项目时更改颜色。在这种情况下，我建议将适配器中项目的背景设置为可绘制的选择器