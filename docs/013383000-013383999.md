# StackOverflow 问答 13383000-13383999

# java - 使用 libgdx 从屏幕键盘获取输入

> ID：13383001
> 
> 赞同：4
> 
> 时间：2012-11-14T16:32:50.497
> 
> 标签：java, android, libgdx, android-input-method, on-screen-keyboard

我正在尝试编写游戏，如果他们做某事，它将启动屏幕键盘。然后，如果他们触摸几个键，游戏会将场景更改为奖励级别。我目前正在使用 libgdx，它在带有真正键盘的桌面版本上运行良好。我无法让它在 android 版本上运行。

在渲染方法中：

```
if (Gdx.input.isTouched()) {
    Vector3 touchPos = new Vector3();
    touchPos.set(Gdx.input.getX(), Gdx.input.getY(), 0);
    camera.unproject(touchPos);

    ...
} else if (touchPos.x > 0 && touchPos.x < 200 
           && touchPos.y > 0 && touchPos.y < 50) {
    Gdx.input.setOnscreenKeyboardVisible(true);
} 
```

这很好用。这样做的全部目的是让键盘出现。它确实做到了。但是，当我尝试通过以下方式检测按键时：

```
if (Gdx.input.isKeyPressed(Keys.A)) {
    // Do What I need it to do.
} 
```

我从来没有得到真正的价值。无论是什么键或值。如何从 libGDX 中的屏幕 Android 键盘检测按键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:03:21.167

`Gdx.input.isKeyPressed`正在轮询键盘的状态，因此只有在实际按住键时才会为真。这可能不是屏幕键盘甚至可以报告的状态。

切换到 an[`InputProcessor`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/InputProcessor.html) 使得每个键盘事件都作为一个不同的事件传递。

有关详细信息，请参阅[http://code.google.com/p/libgdx/wiki/InputEvent 。](http://code.google.com/p/libgdx/wiki/InputEvent)

# magento - 无法将产品添加到购物车 - Magento 商店

> ID：13383003
> 
> 赞同：0
> 
> 时间：2012-11-14T16:32:52.843
> 
> 标签：magento, session, cookies, magento-1.7

几个小时前，我的商店一切正常。然后由于某种原因，我将在前端使用 SID 的设置更改为 NO。之后，我无法再访问管理面板了。`web/session/use_frontend_sid`所以我通过将in的值设置为`core_config_data`1 来解决这个问题。我通过 ftp 手动清除了缓存，并且能够登录到管理面板。现在奇怪的部分。毕竟我无法将产品添加到购物车。每次我尝试将产品添加到我的购物车时，magento 都会将我重定向到`enable-cookies`CMS 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:16:26.193

好的，我解决了这个问题。在配置面板中禁用 cookie 时，我将重定向设置为 NO。现在它像以前一样工作。

# android - Android 4.2 上的加密错误

> ID：13383006
> 
> 赞同：31
> 
> 时间：2012-11-14T16:32:57.563
> 
> 标签：android, unit-testing, encryption

以下代码适用于除最新 4.2 之外的所有 android 版本

```
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.KeyGenerator;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

/**
 * Util class to perform encryption/decryption over strings. <br/>
 */
public final class UtilsEncryption
{
    /** The logging TAG */
    private static final String TAG = UtilsEncryption.class.getName();

    /** */
    private static final String KEY = "some_encryption_key";

    /**
     * Avoid instantiation. <br/>
     */
    private UtilsEncryption()
    {
    }

    /** The HEX characters */
    private final static String HEX = "0123456789ABCDEF";

    /**
     * Encrypt a given string. <br/>
     * 
     * @param the string to encrypt
     * @return the encrypted string in HEX
     */
    public static String encrypt( String cleartext )
    {
        try
        {
            byte[] result = process( Cipher.ENCRYPT_MODE, cleartext.getBytes() );
            return toHex( result );
        }
        catch ( Exception e )
        {
            System.out.println( TAG + ":encrypt:" + e.getMessage() );
        }
        return null;
    }

    /**
     * Decrypt a HEX encrypted string. <br/>
     * 
     * @param the HEX string to decrypt
     * @return the decrypted string
     */
    public static String decrypt( String encrypted )
    {
        try
        {
            byte[] enc = fromHex( encrypted );
            byte[] result = process( Cipher.DECRYPT_MODE, enc );
            return new String( result );
        }
        catch ( Exception e )
        {
            System.out.println( TAG + ":decrypt:" + e.getMessage() );
        }
        return null;
    }

    /**
     * Get the raw encryption key. <br/>
     * 
     * @param the seed key
     * @return the raw key
     * @throws NoSuchAlgorithmException
     */
    private static byte[] getRawKey()
        throws NoSuchAlgorithmException
    {
        KeyGenerator kgen = KeyGenerator.getInstance( "AES" );
        SecureRandom sr = SecureRandom.getInstance( "SHA1PRNG" );
        sr.setSeed( KEY.getBytes() );
        kgen.init( 128, sr );
        SecretKey skey = kgen.generateKey();
        return skey.getEncoded();
    }

    /**
     * Process the given input with the provided mode. <br/>
     * 
     * @param the cipher mode
     * @param the value to process
     * @return the processed value as byte[]
     * @throws InvalidKeyException
     * @throws IllegalBlockSizeException
     * @throws BadPaddingException
     * @throws NoSuchAlgorithmException
     * @throws NoSuchPaddingException
     */
    private static byte[] process( int mode, byte[] value )
        throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException,     NoSuchAlgorithmException,
        NoSuchPaddingException
    {
        SecretKeySpec skeySpec = new SecretKeySpec( getRawKey(), "AES" );
        Cipher cipher = Cipher.getInstance( "AES" );
        cipher.init( mode, skeySpec );
        byte[] encrypted = cipher.doFinal( value );
        return encrypted;
    }

    /**
     * Decode an HEX encoded string into a byte[]. <br/>
     * 
     * @param the HEX string value
     * @return the decoded byte[]
     */
    protected static byte[] fromHex( String value )
    {
        int len = value.length() / 2;
        byte[] result = new byte[len];
        for ( int i = 0; i < len; i++ )
        {
            result[i] = Integer.valueOf( value.substring( 2 * i, 2 * i + 2 ), 16     ).byteValue();
        }
        return result;
    }

    /**
     * Encode a byte[] into an HEX string. <br/>
     * 
     * @param the byte[] value
     * @return the HEX encoded string
     */
    protected static String toHex( byte[] value )
    {
        if ( value == null )
        {
            return "";
        }
        StringBuffer result = new StringBuffer( 2 * value.length );
        for ( int i = 0; i < value.length; i++ )
        {
            byte b = value[i];

            result.append( HEX.charAt( ( b >> 4 ) & 0x0f ) );
            result.append( HEX.charAt( b & 0x0f ) );
        }
        return result.toString();
    }
} 
```

这是我为重现错误而创建的一个小型单元测试

```
import junit.framework.TestCase;

public class UtilsEncryptionTest
    extends TestCase
{
    /** A random string */
    private static String ORIGINAL = "some string to test";

    /**
     * The HEX value corresponds to ORIGINAL. <br/>
     * If you change ORIGINAL, calculate the new value on one of this sites:
     * <ul>
     * <li>http://www.string-functions.com/string-hex.aspx</li>
     * <li>http://www.yellowpipe.com/yis/tools/encrypter/index.php</li>
     * <li>http://www.convertstring.com/EncodeDecode/HexEncode</li>
     * </ul>
     */
    private static String HEX = "736F6D6520737472696E6720746F2074657374";

    public void testToHex()
    {
         String hexString = UtilsEncryption.toHex( ORIGINAL.getBytes() );

         assertNotNull( "The HEX string should not be null", hexString );
         assertTrue( "The HEX string should not be empty", hexString.length() > 0 );
         assertEquals( "The HEX string was not encoded correctly", HEX, hexString );
    }

    public void testFromHex()
    {
         byte[] stringBytes = UtilsEncryption.fromHex( HEX );

         assertNotNull( "The HEX string should not be null", stringBytes );
        assertTrue( "The HEX string should not be empty", stringBytes.length > 0 );
        assertEquals( "The HEX string was not encoded correctly", ORIGINAL, new String( stringBytes ) );
    }

    public void testWholeProcess()
    {
         String encrypted = UtilsEncryption.encrypt( ORIGINAL );
         assertNotNull( "The encrypted result should not be null", encrypted );
         assertTrue( "The encrypted result should not be empty", encrypted.length() > 0 );

         String decrypted = UtilsEncryption.decrypt( encrypted );
         assertNotNull( "The decrypted result should not be null", decrypted );
         assertTrue( "The decrypted result should not be empty", decrypted.length() > 0 );

         assertEquals( "Something went wrong", ORIGINAL, decrypted );
} 
```

}

抛出异常的行是：

```
byte[] encrypted = cipher.doFinal( value ); 
```

完整的堆栈跟踪是：

```
 W/<package>.UtilsEncryption:decrypt(16414): pad block corrupted
    W/System.err(16414): javax.crypto.BadPaddingException: pad block corrupted
    W/System.err(16414):    at com.android.org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(BaseBlockCipher.java:709)
    W/System.err(16414):    at javax.crypto.Cipher.doFinal(Cipher.java:1111)
    W/System.err(16414):    at <package>.UtilsEncryption.process(UtilsEncryption.java:117)
    W/System.err(16414):    at <package>.UtilsEncryption.decrypt(UtilsEncryption.java:69)
    W/System.err(16414):    at <package>.UtilsEncryptionTest.testWholeProcess(UtilsEncryptionTest.java:74)
    W/System.err(16414):    at java.lang.reflect.Method.invokeNative(Native Method)
    W/System.err(16414):    at java.lang.reflect.Method.invoke(Method.java:511)
    W/System.err(16414):    at junit.framework.TestCase.runTest(TestCase.java:168)
    W/System.err(16414):    at junit.framework.TestCase.runBare(TestCase.java:134)
    W/System.err(16414):    at junit.framework.TestResult$1.protect(TestResult.java:115)
    W/System.err(16414):    at junit.framework.TestResult.runProtected(TestResult.java:133)
D/elapsed (  588): 14808
    W/System.err(16414):    at junit.framework.TestResult.run(TestResult.java:118)
    W/System.err(16414):    at junit.framework.TestCase.run(TestCase.java:124)
    W/System.err(16414):    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
    W/System.err(16414):    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
    W/System.err(16414):    at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
    W/System.err(16414):    at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1661) 
```

有没有人知道可能发生的事情？是否有人知道任何引用的类中 android 4.2 的重大变化？

非常感谢

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-14T21:10:33.573

从[Android Jellybean 页面](https://source.android.com/devices/tech/security/enhancements/enhancements42.html)：

> 修改 SecureRandom 和 Cipher.RSA 的默认实现以使用 OpenSSL

他们将默认提供程序更改为`SecureRandom`使用 OpenSSL 而不是以前的 Crypto 提供程序。

以下代码将在 pre-Android 4.2 和 Android 4.2 上产生两种不同的输出：

```
SecureRandom rand = SecureRandom.getInstance("SHA1PRNG");
Log.i(TAG, "rand.getProvider(): " + rand.getProvider().getName()); 
```

在 4.2 之前的设备上：

> rand.getProvider：加密

在 4.2 设备上：

> rand.getProvider：AndroidOpenSSL

幸运的是，很容易恢复到旧的行为：

```
SecureRandom sr = SecureRandom.getInstance( "SHA1PRNG", "Crypto" ); 
```

可以肯定的是，根据 Javadocs 的规定进行调用是很`SecureRandom.setSeed`危险[的](http://developer.android.com/reference/java/security/SecureRandom.html#getInstance%28java.lang.String,%20java.lang.String%29)：

> 播种 SecureRandom 可能不安全
> 
> 种子是用于引导随机数生成的字节数组。为了产生加密安全的随机数，种子和算法都必须是安全的。
> 
> 默认情况下，此类的实例将使用内部熵源生成初始种子，例如 /dev/urandom。这个种子是不可预测的并且适合安全使用。
> 
> 您也可以使用种子构造函数显式指定初始种子，或者在生成任何随机数之前调用 setSeed(byte[])。指定固定种子将导致实例返回可预测的数字序列。**这可能对测试有用，但不适合安全使用。**

但是，对于编写单元测试，正如您所做的那样，使用`setSeed`可能没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-01T14:03:31.917

正如**Brigham**指出的那样，在 Android 4.2 中，有一个[安全增强功能](https://source.android.com/devices/tech/security/enhancements/enhancements42.html)，将默认实现`SecureRandom`从 Crypto 更新为 OpenSSL

> **Cryptography** - 修改 SecureRandom 和 Cipher.RSA 的默认实现以使用 OpenSSL。使用 OpenSSL 1.0.1 添加了对 TLSv1.1 和 TLSv1.2 的 SSL 套接字支持

bu Brigham 的答案是一个临时解决方案，不推荐，因为虽然它解决了问题，但它仍然做错了。

推荐的方法（查看[Nelenkov 的教程](http://nelenkov.blogspot.com.au/2012/04/using-password-based-encryption-on.html)）是使用正确的密钥派生 PKCS（公钥加密标准），它定义了两个密钥派生函数 PBKDF1 和 PBKDF2，其中更推荐使用 PBKDF2。

这就是你应该如何获得钥匙，

```
 int iterationCount = 1000;
    int saltLength = 8; // bytes; 64 bits
    int keyLength = 256;
    SecureRandom random = new SecureRandom();
    byte[] salt = new byte[saltLength];
    random.nextBytes(salt);
    KeySpec keySpec = new PBEKeySpec(seed.toCharArray(), salt,
            iterationCount, keyLength);
    SecretKeyFactory keyFactory = SecretKeyFactory
            .getInstance("PBKDF2WithHmacSHA1");
    byte[] raw = keyFactory.generateSecret(keySpec).getEncoded(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-26T23:34:20.837

因此，您要尝试的是使用[伪随机生成器](https://en.wikipedia.org/wiki/Pseudorandom_number_generator)作为[密钥推导函数](https://en.wikipedia.org/wiki/Key_derivation_function)。这很糟糕，原因如下：

*   PRNG 在设计上是非确定性的，您依赖它是确定性的
*   依赖错误和不推荐使用的实现有一天会破坏您的应用程序
*   PRNG 并非设计为好的 KDF

更准确地说，谷歌[不赞成`Crypto`在 Android N](https://android-developers.googleblog.com/2016/06/security-crypto-provider-deprecated-in.html) (SDK 24)中使用提供程序

*这里有一些更好的方法：*

### [基于散列消息验证码 (HMAC) 的密钥派生函数 (HKDF)](https://en.wikipedia.org/wiki/HKDF)

使用这个[库](https://github.com/patrickfav/hkdf)：

```
String userInput = "this is a user input with bad entropy";

HKDF hkdf = HKDF.fromHmacSha256();

//extract the "raw" data to create output with concentrated entropy
byte[] pseudoRandomKey = hkdf.extract(staticSalt32Byte, userInput.getBytes(StandardCharsets.UTF_8));

//create expanded bytes for e.g. AES secret key and IV
byte[] expandedAesKey = hkdf.expand(pseudoRandomKey, "aes-key".getBytes(StandardCharsets.UTF_8), 16);

//Example boilerplate encrypting a simple string with created key/iv
SecretKey key = new SecretKeySpec(expandedAesKey, "AES"); //AES-128 key 
```

### [PBKDF2（基于密码的密钥派生函数 2）](https://en.wikipedia.org/wiki/PBKDF2)

具有[密钥拉伸](https://en.wikipedia.org/wiki/Key_stretching)，这使得暴力破解密钥更加昂贵。将此用于弱键输入（如用户密码）：

```
SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
    KeySpec keySpec = new PBEKeySpec(passphraseOrPin, salt, iterations, outputKeyLength);
    SecretKey secretKey = secretKeyFactory.generateSecret(keySpec);
    return secretKey; 
```

还有更多的 KDF，例如[BCrypt](https://en.wikipedia.org/wiki/Bcrypt)、[scrypt](https://en.wikipedia.org/wiki/Scrypt)和[Argon2](https://en.wikipedia.org/wiki/Argon2)

# java - java中如何解析静态方法的调用？

> ID：13383009
> 
> 赞同：2
> 
> 时间：2012-11-14T16:33:01.680
> 
> 标签：java, static

如果在编译时解析静态方法，对象实例如何能够调用静态方法？

```
class StaticCall
{
    public static void main(String[] args)
    {
        String arr[]={"Class StaticCall","calls static method of class MyMainClass"};

        MyMainClass h=new MyMainClass();
        h.main(arr);         //How is an instance able to call a static method?
        System.out.println("this is StaticCall main");  
    }   

}

class MyMainClass 
{
    public static void main(String[] args){
        System.out.println(args[0]+" "+ args[1]);
    }
} 
```

运行 StaticCall 类后，输出为

类 StaticCall 调用类 MyMainClass 的静态方法

这是静态调用主

由于静态字段和方法属于 Class 对象，实例如何能够调用静态方法？另外，什么时候创建 Class 对象，它是第一次访问它的任何字段或方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T16:35:25.030

> 实例如何能够调用静态方法？

它没有。试试这个

```
MyMainClass h = null;
h.main(arr); 
```

您会看到该实例被忽略，因为这与

```
MyMainClass.main(arr); 
```

* * *

扩展你的例子......如果你有

```
class AnotherMainClass extends MyMainClass 
{
} 
```

然后所有以下调用相同的方法。

```
AnotherMainClass amc = null;
amc.main(args);

((AnotherMainClass) null).main(args);

AnotherMainClass.main(args);

MyMainClass mmc = null;
mmc.main(args);

((MyMainClass) null).main(args);

MyMainClass.main(args); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T16:36:20.113

```
 h.main(arr);         //How is an instance able to call a static method? 
```

这只是 . 的一种快捷方式`MyMainClass.main(arr)`，即 . 的静态类型`h`。这种用法通常不受欢迎，大多数 IDE 会建议您使用类型而不是实例。

由于这发生在编译时，`h`可以为 null

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:36:22.143

您可以通过内部调用`classname.staticMethod`甚至调用静态方法。`instance.staticMethod``instance.staticMethod``classname.staticMethod`

# msbuild - MSBuild AssemblyInfo CreateItem 失败

> ID：13383012
> 
> 赞同：0
> 
> 时间：2012-11-14T16:33:19.033
> 
> 标签：msbuild, cruisecontrol.net

我们正在从 CruiseControl.net 运行 MSBuild。
我们有一个分支，当通过 CC 在构建服务器上构建时，它失败并出现以下错误：

```
<target name="UpdateAssemblyInfo" startTime="11/13/2012 18:48:35" elapsedTime="00:00:01" elapsedSeconds="1" success="false">        
<error code="MSB4018" file="C:\Continuous Integration Projects\Project\Release\Build\Master.build" line="88" column="5" timeStamp="11/13/2012 18:48:36"><![CDATA[The "CreateItem" task failed unexpectedly.System.IO.PathTooLongException: The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters.   at System.IO.PathHelper.GetFullPathName() 
```

错误持续多行......

该任务在 master.build 中定义：

```
<Target Name="UpdateAssemblyInfo">    
    <CreateItem Include="$(SourcePath)\**\Properties\AssemblyInfo.cs">      
        <Output TaskParameter="Include" ItemName="UpdateAssemblyInfoFiles"/>
    </CreateItem>    
    <Attrib Files="@(UpdateAssemblyInfoFiles)" Normal="true" />    
    <AssemblyInfo AssemblyInfoFiles="@(UpdateAssemblyInfoFiles)"   AssemblyVersion="$(CCNetLabel)" AssemblyFileVersion="$(CCNetLabel)"/>  
</Target> 
```

我们如何确定是哪个 AssemblyInfo.cs 导致了问题？
有没有办法将诊断输出添加到 master.build 文件？

感谢您的任何见解...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:28:45.617

异常确实表明路径或文件名超出了长度限制。

`System.IO.PathTooLongException: The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters.`

由于长度`AssemblyInfo.cs`小于`260`字符，我们可以推断它不喜欢路径。

您是否能够检查路径部分是否为`248`字符或更多？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:53:27.693

将 MSBuild 的详细级别设置为`diag`并检查输出。假设您正在使用 CCNET 的[`<msbuild>`任务](http://www.cruisecontrolnet.org/projects/ccnet/wiki/MsBuild_Task)，这应该是：

```
<msbuild>
  <!-- ... -->
  <buildArgs>/v:diag</buildArgs>
</msbuild> 
```

# ember.js - ember 观察员的临时停职

> ID：13383014
> 
> 赞同：0
> 
> 时间：2012-11-14T16:33:26.733
> 
> 标签：ember.js

使用 Ember.js，我有以下场景：

My Class 有一个属性，需要在实例化时进行一些操作。为了实现这一点，我调用了一个从 init 开始工作的函数。我还想**观察**这个属性变化，这样如果消费者在运行时设置新值，我将在新值上运行我的操作逻辑。问题是，作为初始化流程的一部分，我在操作后将自己设置为属性的新值，这会调用触发器（如预期的那样）。我不希望这段代码运行两次。

考虑以下代码。'here' 将在控制台打印两次。

```
 var MyObj = Ember.Object.extend({

        prop: null,

        init: function init() {

            this._super.apply(this, arguments);
            this._applyProp();

        },

        _applyProp: function prop() {

            console.log('here');

            var prop = this.get('prop');

            if (prop === 'Dan') {

                prop = 'Hi' + prop;
            }

            this.set('prop', prop);

        }.observes('prop')

    });

    MyObj.create({prop: 'Dan'}); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:38:48.827

让观察者设置它正在观察的属性似乎是个坏主意。您的特定示例可以使用计算属性 getter/setter 来实现：

```
var MyObj = Ember.Object.extend({
  prop: function(key, value) {
    if (value !== undefined) {
      if (value == 'Dan') {
        return 'Hi ' + value;
      }
      return value;
    }
  }.property(),
});
MyObj.create({prop: 'Dan'}); 
```

这足以涵盖您的用例吗？

# php - 停止脚本执行超过 5 秒

> ID：13383016
> 
> 赞同：0
> 
> 时间：2012-11-14T16:33:29.980
> 
> 标签：php, time

> **可能重复：**
> [在一定数量的查询/解析时间后停止脚本（没有致命错误）](https://stackoverflow.com/questions/7502758/stop-a-script-without-fatal-error-after-a-certain-amount-of-query-parse-time)

如果脚本在 PHP 中运行超过 5 秒，是否可以停止脚本？

我不知道我怎么能知道它运行了多长时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T16:34:43.223

用于[`set_time_limit()`](http://php.net/manual/en/function.set-time-limit.php)限制执行时间：

```
// At the beginning of your script
set_time_limit(5); 
```

另请阅读文档站点上的警告框：

> 当 PHP 在安全模式下运行时，此功能无效。除了关闭安全模式或更改 php.ini 中的时间限制之外，没有其他解决方法。

# django - 加载模板标签变量以在模板中使用

> ID：13383021
> 
> 赞同：1
> 
> 时间：2012-11-14T16:33:43.163
> 
> 标签：django, django-tagging

如何将 templatetag 的结果加载到 aa 模板中进行迭代？基本上我的目标是在模型对象上加载标签（使用 django-tagging），然后遍历标签以创建基于这些标签的相关产品列表。然后我想遍历这些产品对象以显示有关它们的更多信息。

例如，我的模板标签：

```
@register.simple_tag
def get_rel_from_tag(tag_list):
   try:
       relproducts = UniPart.objects.filter(part__contains = partbase)
    except:
       print "no related products"
       return None
   else:
       relproducts = UniPart.objects.filter(part__contains = partbase)
       return relproducts 
```

如何使它`relproducts`作为变量返回？这就是我在模板中调用它的方式：

`{% tags_for_object design as tag_list %}` `{% get_rel_from_tag tag_list %}`

基本上现在我现在想迭代相关产品，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:44:24.447

`simple_tag`帮助程序不允许您以这种方式将结果分配给上下文变量。尝试[`assignment_tag`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#assignment-tags)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:35:39.130

您是否使用加载模板标记文件`{% load 'your_file_name %}`

更新：尝试使用 'with' 缓存来自 tags_for_object_design 的结果

```
{% with tag_list=tags_for_object design %} 
```

# javascript - 用JS按顺序遍历3个数组

> ID：13383028
> 
> 赞同：0
> 
> 时间：2012-11-14T16:34:00.323
> 
> 标签：javascript, arrays

我知道这只是一个简单的问题，但我不知道我哪里出错了。我有 3 个 arryas

名称：

```
Alex, John, Sam 
```

爱好

```
Baseball, Hockey, Golf 
```

城市

```
Sudbury, Toronto, Ottawa 
```

我已经设置了以下代码，但是第二个和第三个数组没有改变。

```
for(var n=0;n<names.length;n++){  
var h=0;t<hobby.length;h++;
var c=0;c<city.length;c++;

alert (names[n]);
alert (hobby[h]);
alert (city[c]);
} 
```

我如何将它们设置为按顺序循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:37:36.897

在做任何其他事情之前，您应该将它们放入适当的数据结构中。

```
var people = [];

for( var i = 0; i < names.length; ++i ){
    people.push({
        name: names[i],
        hobby: hobby[i],
        city: city[i]
    });
} 
```

然后：

```
for( var i = 0; i < people.length; ++i ) {
    var person = people[i];
    alert( person.name );
    alert( person.hobby );
    alert( person.city );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:39:07.547

假设它们的长度都相同，并且没有丢失条目，您可以：

```
for(var n=0;n<names.length && n<hobby.length && n<city.length;n++){
  alert (names[n]);
  alert (hobby[n]);
  alert (city[n]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:38:03.853

```
var h=0;t<hobby.length;h++;
var c=0;c<city.length;c++; 
```

这两行对您的代码几乎没有任何作用。在每次迭代中，两个变量都设置为`0`，然后加一。因此，当来到`alert()`s 时，他们总是`1`.

假设始终具有相同索引的项目相互关联，这将为您提供相应的集合：

```
for(var n=0;n<names.length;n++){  
  alert (names[n]);
  alert (hobby[n]);
  alert (city[n]);
} 
```

# android - facebook API 添加照片

> ID：13383032
> 
> 赞同：1
> 
> 时间：2012-11-14T16:34:12.553
> 
> 标签：android, facebook, facebook-graph-api, post

我需要将位图连同消息和 url 链接一起发布到 Facebook 墙上。

根据[https://developers.facebook.com/docs/reference/api/user/#photos](https://developers.facebook.com/docs/reference/api/user/#photos)，将照片添加到 Facebook 相册有 4 个参数：

`source`, `message`, `place`, `no_story`.

但是，我建议使用这样的代码：

```
Bitmap bm = ...;
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bm.compress(CompressFormat.JPEG, 100, baos);
final byte[] data = baos.toByteArray();
Bundle postParams = new Bundle();

postParams.putByteArray("photo", data);
postParams.putString("message", "My message here");
postParams.putString("link", "http://www.google.com");

Request request = new Request(session, "me/photos", postParams, HttpMethod.POST, callback);
RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

...并且此代码工作正常，只是它没有在墙上显示链接（“http://www.google.com”）。

我有三个问题：

1.  为什么`postParams.putByteArray("photo", data)`有效？`photo`根据文档没有参数（见上文）。

2.  如果无法使用`link`参数，SLComposeViewController 类（http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html）如何工作？它有`- (BOOL)addURL:(NSURL *)url`方法。

3.  如果可以使用`link`参数，为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:59:09.897

好的，我找到了问题 (2) 和 (3) 的答案。它看起来很简单：不要使用`link`，只需将其附加到`message`：

```
postParams.putByteArray("photo", data);
postParams.putString("message", "My message here" + " " + "http://www.google.com");
//postParams.putString("link", "http://www.google.com"); 
```

至于我的问题（1），我仍然不清楚：为什么`postParams.putByteArray("photo", data);`工作正常而不是`postParams.putByteArray("source", data);`？文档对`photo`参数只字未提。

# asp.net - ASP.NET Web API 控制器特定的序列化程序

> ID：13383035
> 
> 赞同：13
> 
> 时间：2012-11-14T16:34:22.547
> 
> 标签：asp.net, xml, xml-serialization, asp.net-web-api

我有一个带有 2 个控制器的自托管 Web API：

*   对于控制器 1，我需要默认 DataContractSerializer（我正在公开 EF 5 POCO）
*   对于控制器 2，我需要将参数 UseXmlSerializer 设置为 true 的 XmlFormatter（我正在公开一个 XmlDocument）

我尝试在控制器初始化期间设置格式化程序，但配置似乎是全局的，影响所有控制器：

```
public class CustomConfigAttribute : Attribute, IControllerConfiguration
{
    public void Initialize(HttpControllerSettings settings,
    HttpControllerDescriptor descriptor)
    {
        settings.Formatters.XmlFormatter.UseXmlSerializer = true;

    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T08:52:10.013

你走在正确的轨道上。但是你需要`XmlMediaTypeFormatter`在你的配置属性中初始化一个新的实例，否则你会影响全局引用。

如您所知，您需要根据`IControllerConfiguration`界面创建 2 个属性。

```
public class Controller1ConfigAttribute : Attribute, IControllerConfiguration
{
    public void Initialize(HttpControllerSettings controllerSettings,
                           HttpControllerDescriptor controllerDescriptor)
    {
        var xmlFormater = new XmlMediaTypeFormatter {UseXmlSerializer = true};

        controllerSettings.Formatters.Clear();
        controllerSettings.Formatters.Add(xmlFormater);
    }
}

public class Controller2ConfigAttribute : Attribute, IControllerConfiguration
{
    public void Initialize(HttpControllerSettings controllerSettings,
                           HttpControllerDescriptor controllerDescriptor)
    {
        var xmlFormater = new XmlMediaTypeFormatter();
        controllerSettings.Formatters.Clear();
        controllerSettings.Formatters.Add(xmlFormater);
    }
} 
```

然后用相关的属性装饰你的控制器

```
[Controller1ConfigAttribute]
public class Controller1Controller : ApiController
{

[Controller2ConfigAttribute]
public class Controller2Controller : ApiController
{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:13:49.243

配置：

```
config.Formatters.Remove(config.Formatters.JsonFormatter);
config.Formatters.Insert(0, new CustomXmlMediaTypeFormatter()); 
```

自定义格式化程序：

```
public class CustomXmlMediaTypeFormatter : XmlMediaTypeFormatter
{
    public CustomXmlMediaTypeFormatter()
    {
        UseXmlSerializer = true;
    }
} 
```

这**似乎**有效，好吧不是那么优雅。删除默认的 Xml 格式化程序不起作用，所以我得出的结论是该框架仍在使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:53:59.710

我想你可以写一个 custom `ActionFilterAttribute`。

在`OnActionExecuting`中，将原始值存储在 HttpContext 中，然后在 中`OnActionExecuted`，恢复原始值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:08:53.173

控制器的操作本身不应该关心数据是如何序列化的。你应该能够请求数据，并且检索数据所需的任何格式都是相同的。

默认情况下，web api 序列化为 json 对象。但是，如果您将请求的内容类型设置为 xml，则应该返回相同的结果，但格式为 xml 而不是 json。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-24T13:26:23.697

Mark Jones 的回答有一个很大的缺点：通过清除所有格式化程序，不可能请求不同的 ContentType 并使用相关的格式化程序。

为每个控制器启用 XMLSerializer 的更好方法是替换默认格式化程序。

```
public class UseXMLSerializerAttribute : Attribute, IControllerConfiguration
{
    public void Initialize(HttpControllerSettings controllerSettings, HttpControllerDescriptor controllerDescriptor)
    {
        // Find default XMLFormatter
        var xmlFormatter = controllerSettings.Formatters.FirstOrDefault(c => c.SupportedMediaTypes.Any(x => x.MediaType == "application/xml"));

        if (xmlFormatter != null)
        {
            // Remove default formatter
            controllerSettings.Formatters.Remove(xmlFormatter);
        }

        // Add new XMLFormatter which uses XmlSerializer
        controllerSettings.Formatters.Add(new XmlMediaTypeFormatter { UseXmlSerializer = true });
    }
} 
```

并像这样使用它：

```
[UseXMLSerializer]
public TestController : ApiController
{
    //Actions
} 
```

# java - 如何确保我的 OSGi 片段在主机包之前安装？

> ID：13383038
> 
> 赞同：4
> 
> 时间：2012-11-14T16:34:22.907
> 
> 标签：java, osgi, jboss7.x

我正在尝试将 guice 部署到 JBoss AS7 (7.2.0-Alpha) 中。这是许多罐子。我感兴趣的是

*   吉斯
*   guice-servlet
*   guice-persist

guice 是一个主机包，guice-servlet 和 guice-persist 是这个主机的片段。

当我启动容器时，主机包总是被安装、解析并激活。片段总是会被安装，有时会被解析并“包含”在主机包中，有时不会。这似乎是随机的。

我也尝试过 Eclipse Virgo 并且行为是相同的，但是它具有定义计划的能力，您可以通过定义安装顺序来规避这个问题。（无论如何我似乎都能让它工作）。

查看 OSGi 规范并阅读此[问题](https://stackoverflow.com/questions/11029768/when-is-an-osgi-fragment-attached-to-host)的答案，这似乎是预期的行为。JBoss 是一个 OSGi 4.2 容器，因此不能选择`Require-Capability`and`Provide-Capability`标头 - 另外我真的不想修改不属于我的 jar。

我应该如何让我的主机/片段包可靠地安装和解析？

我有一个想法（我不愿意这样做，因为它看起来不正确）是使用 maven-bundle-plugin/bndtools 并将 guice 包合并到一个单一的超级 guice 包中 - 在构建时有效地执行容器在 runtme 未能为我做什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:17:37.390

正如我在回答您链接到的问题时所说：如果在主机解析之前安装片段，它将附加到主机。实现这一点的最简单方法是先安装所有捆绑包（包括片段），然后再允许它们中的任何一个进行解析。

在许多情况下，解析是通过尝试启动捆绑来触发的。人们在 OSGi 中犯的最常见错误之一是试图在安装后立即启动每个包。您不能这样做，也就是说，在您安装完*所有*要运行的捆绑软件之后，您不应该启动*任何捆绑软件。*

# wpf - 奇怪的 WPF DataGrid 行为：像 nubbies 一样的小按钮缩进出现在第一列左侧的一些行

> ID：13383046
> 
> 赞同：5
> 
> 时间：2012-11-14T16:34:46.547
> 
> 标签：wpf, datagrid

我将 DataGrid 绑定到自定义对象的 ObservableCollection。间歇性地，我得到（可能在 2 或 3 行上）一个按钮，如 nubbie 对象（大约 4 像素宽和行的高度）出现在左边缘，并导致该行的列略微缩进，以便它们不会t 排队。我不认为这些行有什么特别之处，因为如果我将网格重新绑定到相同的对象，小块可能根本不会发生或可能出现在不同的行上。

我正在使用一些自定义样式，并且我的第一列是 DataTemplate，因此我将其包含在下面，以防任何人都可以看到其中可能导致我的问题的任何内容。在这一点上我有点难过...

```
<DataGrid  Style="{DynamicResource WPFDataGridStyle}" Background="White" BorderBrush="LightGray" FontSize="13"
        CanUserReorderColumns="True" HorizontalGridLinesBrush="#FFEFEFEF" VerticalGridLinesBrush="#FFEFEFEF" HeadersVisibility="Column" 
        AlternatingRowBackground="#FFF4F4F4" CanUserResizeRows="False" SelectionMode="Single" AutoGenerateColumns="False" 
        CanUserAddRows="False" CanUserDeleteRows="False" CanUserSortColumns="True" FrozenColumnCount="3"
        ItemsSource="{Binding VM.FilteredSteamJobs,Mode=TwoWay,Source={StaticResource VM}}" 
        SelectedItem="{Binding VM.SelectedJob,Mode=TwoWay,Source={StaticResource VM}}"
        Visibility="{Binding VM.IsScheduleLoaded,Mode=OneWay,Source={StaticResource VM},Converter={StaticResource BoolToVisConv}}"  >
    <DataGrid.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#AAA7CDF0"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#AAA7CDF0"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="Black"/>

        <Style x:Key="WPFDataGridStyle" TargetType="{x:Type DataGrid}" BasedOn="{StaticResource {x:Type DataGrid}}">
            <Setter Property="ColumnHeaderStyle" Value="{DynamicResource ColumnHeaderStyle1}"/>
            <Setter Property="CellStyle" Value="{DynamicResource CellStyle1}"/>
        </Style>

        <Style x:Key="ColumnHeaderStyle1" TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
            <Setter Property="Height" Value="25"/>
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FFC8E0FF" Offset="1"/>
                        <GradientStop Color="#FFF5FAFF" Offset="0"/>
                        <GradientStop Color="#FFDBEBFF" Offset="0.5"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Padding" Value="3"/>
            <Setter Property="BorderThickness" Value="0.5,0"/>
            <Setter Property="BorderBrush" Value="DarkGray"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontSize" Value="13" />
        </Style>

        <Style x:Key="CellStyle1" TargetType="{x:Type DataGridCell}">
            <Setter Property="Height" Value="25"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Padding" Value="3,0"/>
        </Style>
    </DataGrid.Resources>

    <DataGrid.Columns>

        <!--Selection Checkbox Column-->
        <DataGridTemplateColumn IsReadOnly="True" CanUserResize="False" CanUserSort="False" Width="Auto">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid>
                        <CheckBox VerticalAlignment="Center" HorizontalAlignment="Center" Margin="3"
                                  IsChecked="{Binding Path=IsSelected,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                  Visibility="{Binding Status,Converter={StaticResource StatusToSelectVisConv}}">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1.2" ScaleY="1.2"/>
                            </CheckBox.LayoutTransform>
                        </CheckBox>
                    </Grid>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.HeaderTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox VerticalAlignment="Center" Checked="HeaderSelect_Checked" Unchecked="HeaderSelect_Unchecked">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1.3" ScaleY="1.3"/>
                            </CheckBox.LayoutTransform>
                        </CheckBox>
                    </StackPanel>
                </DataTemplate>                 
            </DataGridTemplateColumn.HeaderTemplate>
        </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T17:24:02.190

我也一直在努力解决这个问题，如果我没有弄错，你必须`RowHeaderWidth="0"`在 DataGrid 上设置以避免这个“错误”。

显然，某些随机行的行标题显示，即使`HeadersVisibility`设置为`Column`.

# ios - UrbanAirship的handleBackgroundNotification的使用

> ID：13383051
> 
> 赞同：3
> 
> 时间：2012-11-14T16:34:58.443
> 
> 标签：ios, push-notification, apple-push-notifications, urbanairship.com

我正在尝试使用 UrbanAirship 开发一个 iOS 应用程序。我收到推送通知，但当应用程序在后台时无法调用任何委托。我（似乎错误地）假设来自 UAPushNotificationDelegate 类的 handleBackgroundNotification API 将为我提供在应用程序处于后台时接收通知时执行自定义操作的功能。

这就是他们的文档所说的：“handleBackgroundNotification：

当应用程序在后台收到推送通知时调用

```
- (void)handleBackgroundNotification:(NSDictionary *)notification 
```

参数

通知

```
the push notification 
```

" - 见[https://docs.urbanairship.com/ios-lib/Classes/UAPushNotificationHandler.html#//api/name/handleBackgroundNotification](https://docs.urbanairship.com/ios-lib/Classes/UAPushNotificationHandler.html#//api/name/handleBackgroundNotification)：

似乎不是那样工作 - 操作系统似乎正在为自己保留通知 - 这与 Apple 的文档是一致的。

如果操作系统不允许，我会质疑该功能的目的。我使用 didReceiveRemoteNotification 接收远程推送通知，效果很好！

但是，由于这是一个企业应用程序（即不是 App Store），如果有私有 APÏs 和框架允许我这样做，我将不胜感激。这个应用程序永远不可能进入应用程序商店！

例如，我尝试执行的自定义操作包括发送到服务器的通知回执，该回执将“证明”收件人应用程序确实收到了通知，以最大音量播放自定义声音（绕过静音和请勿打扰模式） . 这是客户的一些要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:56:53.810

这就是我使用的，它工作得很好：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if(!loggedIn) return;

    NSLog(@"WOW: got notification! %@", userInfo);

    // see this for fine tuning: http://fivelakesstudio.blogspot.com/2012/04/push-notifications-and-urban-airship.html
    [[UAPush shared] handleNotification:userInfo applicationState:application.applicationState];
    [[UAPush shared] resetBadge];

    sharedApplication.applicationIconBadgeNumber = 0;   // probably redundant

    [self handlePushNotification:userInfo isBooting:NO]; // my common handler
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T08:11:42.400

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler {
UA_LINFO(@"Application received remote notification: %@", userInfo);
[[UAPush shared] appReceivedRemoteNotification:userInfo applicationState:application.applicationState fetchCompletionHandler:completionHandler];

NSDictionary *values = [userInfo objectForKey:@"aps"];
NSString *title = [values objectForKey:@"alert"]; 
```

}

处理此块中所有状态的通知。注意。您可以监控 application.applicationState 值以记录收到通知时应用程序的状态。希望这可以帮助

# objective-c - 水平和垂直滚动的表格视图

> ID：13383052
> 
> 赞同：0
> 
> 时间：2012-11-14T16:35:01.270
> 
> 标签：objective-c, ios, uitableview, scrollview

我正在尝试创建一个像 TeacherKit 应用程序一样水平和垂直滚动的表格视图。如果我垂直滚动，第一行是固定的，如果我水平滚动，第一列是固定的。你们对此有什么建议吗？这是 TeacherKit 应用程序的屏幕截图。

[https://www.dropbox.com/s/65cknxg9vnea8jq/Photo%20Nov%2015%2C%2012%2027%2010%20AM.png](https://www.dropbox.com/s/65cknxg9vnea8jq/Photo%20Nov%2015%2C%2012%2027%2010%20AM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:41:15.467

最常见的解决方案是创建一个与 UITableview 大小相同的 UIScrollView，并将表格放置在滚动视图中。

在这种情况下，表格不会滚动，因为它完全包含在 scrollView 中（它具有相同的大小），您将滚动 scrollView

让我们知道怎么回事！

# vb.net - 在 VB 项目中，是否可以有一个与表单同名的 resx 文件？

> ID：13383054
> 
> 赞同：0
> 
> 时间：2012-11-14T16:35:02.493
> 
> 标签：vb.net, winforms, resx

早上好，

我在一个 VB 项目中工作（通常我主要在 C# 上工作）并且在编译时有一个我不明白的问题：

在我的 VB 项目中，我有一个 Windows 窗体（具有其自己的 Designer.vb 和 .resx）和一个资源文件（具有其 Designer.vb），两者具有相同的名称，并且似乎会产生以下编译错误：

> 错误 13 在“Resources”参数中多次指定了“obj\Debug[projectName].[fileName].resources”项。“资源”参数不支持重复项。

我不能更改其中一个的名称，因为它是一种内部设计模式（它适用于 C# 项目）。

VB不接受这种模式吗？如果是，是否有任何解决方法？还是我的一个项目文件有问题？

问候

编辑：由于我的问题可能不是很清楚，这是我在这个项目中必须尊重的模式：

![在此处输入图像描述](../Images/2cd78bc2b9227e315fc1837232725f9b.png)
这不编译。仅在 VB 中，因为我在 C# 项目中使用此模式没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:35:12.743

您可能在 form.designer 中有重复的条目。我曾经遇到过这个问题

转到您的解决方案资源管理器，选择您的项目，然后单击解决方案资源管理器顶部的显示所有文件图标。然后您应该能够展开您的 form.vb 以查看所有子文件。查找 frmMain.Designer.vb 并检查它是否存在重复的资源条目。如果这不起作用，请尝试清洁您的解决方案

从这里提取，检查它可能有帮助的链接：

[VB.net 设计器错误](https://stackoverflow.com/questions/7375548/vb-net-designer-error-how-do-i-resolve-it)

编辑：我会删除表格。将代码保存在后面，并使用粘贴代码的另一个名称创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:27:33.527

最后我发现问题出在哪里：
这是命名空间的问题，因为在 VisualStudio 中生成的 VB 在 WinForms 中默认不提供任何命名空间，我为表单和表单的设计者提供了命名空间，并给出了不同的命名空间到它编译的第二个 resx（通过它的属性/自定义工具命名空间）。

# html - CSS3 旋转/变换奇怪的问题

> ID：13383060
> 
> 赞同：1
> 
> 时间：2012-11-14T16:35:19.107
> 
> 标签：html, css, transform, css-transforms

我有一个独特的情况，我没有做一个模态来显示一些选项，而是尝试使用一些 3D 变换来进行“翻转”运动，该运动在视图的“背面”显示一些输入。

我创建了一个 codepen 来显示功能和问题。

问题是当我翻转 div 时，我的背面表单的下半部分不可点击，就像它上面有一些我看不到的元素一样。正是底部的 50% 是不可编辑的，所以我猜测我的轮换方式是错误的。

[http://codepen.io/CollinEstes/pen/qcwhd](http://codepen.io/CollinEstes/pen/qcwhd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:07:33.683

我能够修复您的示例：[http ://codepen.io/MikeFielden/pen/haHrG](http://codepen.io/MikeFielden/pen/haHrG)

我最终所做的只是将您的更改`rotateX(180deg)`为`rotateX(-180deg)`，这似乎可以清除它。至于为什么这样做，我不能说。也许是浏览器错误？

# javascript - Bootstrap输入字段上的jQuery focus（）不起作用

> ID：13383063
> 
> 赞同：4
> 
> 时间：2012-11-14T16:35:21.943
> 
> 标签：javascript, jquery, twitter-bootstrap

我想要一个搜索输入字段来自动关注页面加载。所以我尝试了以下方法：

```
(function () {
    $('#searchbox').focus();
}) 
```

然而，这根本没有任何作用。我认为它可能与我拥有的其他一些代码冲突，所以我在 Bootstrap 示例页面[http://twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)上做了一个简单的测试。在 Chrome 控制台中，我输入`$('input:first').focus();`了这个`<input class="span2" type="text" placeholder="Email">`作为返回值，但它也没有关注电子邮件字段。

加载页面时仅关注某个输入字段我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:58:01.707

您的初始代码应该可以正常工作，但是您没有添加第二对括号来调用您的匿名函数。如果它在页面底部，那么 DOM 的相关部分将在那时准备好，从而使 jQuery domready 变得不必要。

`;(function () { $('#searchbox').focus(); })();`

应该工作得很好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:39:08.160

您可能需要等到页面加载完毕。尝试类似：

```
$(document).ready(function () {$('#searchbox').focus(); }); 
```

# codeigniter - CodeIgniter - 路由不起作用

> ID：13383066
> 
> 赞同：2
> 
> 时间：2012-11-14T16:35:30.017
> 
> 标签：codeigniter, url, routing

我在 CodeIgniter 中有一个路由问题。

我可以使用`http://localhost/MySite`. 所以我认为路由配置是好的。

当我提交登录页面的登录表单时，我收到`Not found`错误 404 并且显示的 URL 是`http://localhost/MySite/login`？

`http://localhost/MySite/index.php/login`当我在 url 中插入“index.php”（ ）时，它可以工作。在文档中写道，我必须在以下内容中添加一些行`.htaccess`：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L,QSA] 
```

这个 URL 路由有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:40:37.713

试试我现在在我的项目中使用的这个东西......

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:21:35.267

请试试这个..

```
RewriteEngine on
RewriteCond $1 !^(index\.php|public|\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 
```

我希望一切都会好起来的。

# c++ - OpenCV - TranCascade 错误 (bad_alloc)

> ID：13383067
> 
> 赞同：1
> 
> 时间：2012-11-14T16:35:30.677
> 
> 标签：c++, opencv

我在训练级联分类器时遇到问题。

首先，我使用 opencv_createsamples 创建示例：

```
./opencv_createsamples -vec test.vec -img ./positive/speed_50.jpeg -bg /home/boris/src/cascade/neg.txt -num 50 -w 150 -h 150 
```

它工作得很好，输出如下：

```
Info file name: (NULL)
Img file name: ./positive/speed_50.jpeg
Vec file name: test.vec
BG  file name: /home/boris/src/cascade/neg.txt
Num: 50
BG color: 0
BG threshold: 80
Invert: FALSE
Max intensity deviation: 40
Max x angle: 1.1
Max y angle: 1.1
Max z angle: 0.5
Show samples: FALSE
Width: 150
Height: 150
Create training samples from single image applying distortions...
Done 
```

然后是级联训练器：

```
./opencv_traincascade -data /home/boris/src/cascade -vec ./test.vec -bg ./neg.txt -numPos 50 -numNeg 2 -w 150 -h 150 
```

我收到以下错误：

```
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc
Emergency stop (core dumped) 
```

neg.txt 文件：

```
img/img1.jpeg  
img/img2.jpeg 
```

这两个文件都存在于 img 目录中。

OpenCV 版本是 2.4.2，操作系统是 Ubuntu 12.04。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T03:23:49.950

您需要将 w 和 h 设置为与生成的样本相同的大小，在您的情况下为 150。对于任何太大的样本量，我都会遇到同样的问题。它适用于 48x48，不适用于 96x96。如果您解决了更大样本的问题，请告诉我。

问候

# javascript - 在窗口加载之前运行函数

> ID：13383068
> 
> 赞同：1
> 
> 时间：2012-11-14T16:35:31.930
> 
> 标签：javascript, jquery

我不确定如何正确地用词标题，但这就是我正在做的事情。我在 html 的正文中有两个图像。

```
<img src="http://www.narm.org.uk/home/images/Daylight%20design.jpg" id="b1" alt="day" />
<img src="http://www.aphoenix.ca/photoblog/photos/NighttimeColours.jpg" id="b2" alt="night" /> 
```

对应的css如下（基本上就是把其中一个作为背景）：

```
#b1, #b2 {
width: 100%;
height: 100%;
z-index: -1;
position: absolute;
} 
```

这是javascript：

```
window.onload = function() {
setBackground();
}

function setBackground() {
var back1 = $('#b1').hide();
var back2 = $('#b2').hide();
//setTimeout(function() {setBackground()}, 1000);
} 
```

现在发生的情况是，一个图像将短暂显示，因为我正在等待页面加载以隐藏两个背景。我将如何在页面完全加载之前隐藏背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:37:36.153

也许在您的图像上使用 css：

```
display: none; 
```

因此，样式将如下所示：

```
#b1, #b2 {
    width: 100%;
    height: 100%;
    z-index: -1;
    position: absolute;
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:37:41.053

我想你想使用[jQuery.ready](http://api.jquery.com/ready/)：

```
jQuery(function($) {
    var back1 = $('#b1').hide();
    var back2 = $('#b2').hide();
}); 
```

* * *

`window.onload`当加载所有外部源（样式、脚本、图像等）时会触发该函数

当 DOM 准备好时，会触发jQuery 的`ready`方法。

[关于区别的小文章](http://web.enavu.com/daily-tip/daily-tip-difference-between-document-ready-and-window-load-in-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:38:59.927

从 window.onload 调用中取出函数，并将其移动到页面顶部的两个脚本标记之间。浏览器从上到下读取，所以它一看到代码就会执行。

所以让你的代码看起来像这样：

```
<head>...
<script>
setBackground();
</script>
...</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:09:23.300

如果我理解正确，您想预加载图像并将它们隐藏起来，直到您需要它们。

css 似乎不是 JavaScript，而是这里的方式。但是，如果您使用`display:none;`某些浏览器可能会决定延迟图像加载。我的建议是将图像移出屏幕：

```
#b1, #b2 {
left: -9999px;
top: -9999px;
z-index: -1;
position: absolute;
} 
```

[更新] 这里是 display:none 的测试页面： [http ://www.quirksmode.org/css/displayimg.html](http://www.quirksmode.org/css/displayimg.html)

它提到Opera不会加载图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T16:43:55.740

我认为你必须为此创建一个自定义函数，你可以隐藏所有内容，一旦页面准备好 .load() 你隐藏你的背景然后显示新的背景和内容

# ruby - 这个＆符号是什么意思？

> ID：13383074
> 
> 赞同：4
> 
> 时间：2012-11-14T16:35:42.150
> 
> 标签：ruby

> **可能重复：**
> [map(&:name) 在 Ruby 中是什么意思？](https://stackoverflow.com/questions/1217088/what-does-mapname-mean-in-ruby)
> [你如何称呼 Ruby 中的 &: 运算符？](https://stackoverflow.com/questions/2259775/what-do-you-call-the-operator-in-ruby)

只是看一些 railscast 并看到这样的代码：

```
[Category, Product, Person].each(&:delete_all) 
```

我知道它会删除这些模型的所有记录，但我不知道这`&:delete_all`意味着什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T16:37:20.953

它基本上是这个的简写：

```
[Category, Product, Person].each { |e| e.delete_all } 
```

也就是说，它发送`delete_all`到迭代器的每个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:40:55.280

**&:delete_all**基本上转换为**|obj| obj.delete_all**。& 号在循环上的当前对象上调用 to_proc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:18:27.677

当您将`Proc`对象`pr`放在`&`最后一个参数位置时，例如：

```
some_method(&pr) 
```

然后，对应的块`pr`将被传递给`some_method`. 如果给定`non_pr`一个不是 a 的对象，`Proc`例如：

```
some_method(&non_pr) 
```

然后，`non_pr`将隐式转换为 a `Proc`by `to_proc`。

例如，when `non_pr`is a `Symbol`, then`Symbol#to_proc`将被应用，它恰好是这样的：

```
class Symbol
  def to_proc
    proc{|obj, *args| obj.send(self, *args)}
  end
end 
```

特别是`each(&:delete_all)`，`:delete_all.to_proc`将返回`Proc`对象：

```
proc{|obj, *args| obj.delete_all(*args)} 
```

所以相应的块将被传递给`each`这样的：

```
each{|obj, *args| obj.delete_all(*args)} 
```

注意到一个块的元数`Enumerable#each`是一，这被简化为：

```
each{|obj| obj.delete_all} 
```

# android - 在 Android 的 Mono 上设置屏幕旋转后的图像时出现内存错误

> ID：13383090
> 
> 赞同：1
> 
> 时间：2012-11-14T16:36:27.227
> 
> 标签：android, memory-leaks, imageview, xamarin.android, xamarin

事情进展顺利，直到我关闭设备上的屏幕锁定，然后事情开始间歇性地出错。

我已经设法追踪问题并考虑了一些解决方法，但我想知道是否有避免或消除问题的“最佳实践”。

**问题：**
我有一个应用程序可以根据应用程序状态更改图像。图像不是很大，但相当大（231k~），并作为资源存储。经过几次屏幕旋转（我在使用单个 ImageView 的项目中计算了 27 次），加载图像失败，出现“Java.Lang.OutOfMemoryError”类型的异常

剥离到最简单的项目，以下演示了该问题：

```
 protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        //get a reference to the ImageView
        var imageView = FindViewById<ImageView>(Resource.Id.imageView1);
        imageView.SetImageBitmap( Android.Graphics.BitmapFactory.DecodeResource( this.Resources, Resource.Drawable.Ready) );
    } 
```

上面的代码是我用来重现该问题的唯一方法。

在尝试解决的同时，我扩展了示例，以便在 OnDestry 中发布 imageView：

```
 protected override void OnDestroy ()
    {
        base.OnDestroy ();
        imageView.SetImageBitmap( null );
        imageView.DestroyDrawingCache();
        imageView.Dispose();
    } 
```

除非我添加了我不想做的 GC.Collect() ，否则这没有什么区别。

到目前为止，我目前想到的最好的解决方法是修改代码如下：

```
 static Bitmap _ready = null;

    private Bitmap GetReadyImage {
        get {
            if (_ready == null) {
                _ready = Android.Graphics.BitmapFactory.DecodeResource (this.Resources, Resource.Drawable.Ready);
            }
            return _ready;
        }
    }

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        //get a reference to the ImageView
        imageView = FindViewById<ImageView>(Resource.Id.imageView1);
        imageView.SetImageBitmap( GetReadyImage );
    } 
```

这依赖于对每个位图的静态引用和每个位图的属性访问器。

我什至可以编写一个将图像存储在静态列表中的方法，以保存为每个不同的属性/变量编写属性访问器。

我也许可以添加标志`ConfigurationChanges = ConfigChanges.Orientation | ConfigChanges.ScreenSize |ConfigChanges.KeyboardHidden)`，但这会破坏我读过的正常活动生命周期不是最佳实践吗？

我觉得很奇怪，在网上搜索过，我还没有遇到过类似的问题或例子。我想知道大多数其他人如何处理这个问题？

非常感谢任何想法或评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:35:46.847

我只能从真正原生的角度来解决这个问题，因为我没有直接使用 Mono 框架。

所描述的症状 100% 表明 Activity 中存在内存泄漏，但代码没有显示任何真实证据。如果您真的可以在仅包含一个 Activity 和那四行代码的项目中产生问题，那么在我看来，这可能是一个框架错误，应该向 Xamarin 提交。您是否尝试过在纯 Java 中创建相同的简单项目，以查看在您使用的同一设备/模拟器上的结果如何？知道问题是否本地化到特定版本的 Android 也会很有趣。我以前从未在本机应用程序项目中看到过这种特殊行为。

尴尬的部分是您声明强制垃圾收集会使问题消失。你是对的，你不应该这样做，但是即使你多次点击 GC，真正的内存泄漏（即未释放的引用）仍然会持续存在。在每次旋转时销毁和重新创建 Activity 的 Android 范例是这样的，即使旧的 Activity 存在一段时间，当内存紧张时，它（及其所有引用）也会很快被收集起来，为新实例腾出空间。如果这没有发生，并且即使系统触发 GC 通过，每个 Activity 仍然存在，则可能是 Mono 生成的本机代码中存在卡住的引用。

有趣的是，从技术上讲，您的解决方法实际上确实引入了真正的泄漏，方法是将 附加`Bitmap`到永远不会清除的静态字段。但是，我同意相比之下，这似乎是一个更有效的举措。一个更简单的解决方法也可能是编写您的 Activity 以手动处理配置更改（我不知道 Mono 是否不同，但这是通过添加`android:configChanges="orientation"`到清单文件来完成的）。这将防止您的 Activity 在每次旋转时重新创建，但如果您有不同的横向和纵向布局，它可能还需要您重新加载视图层次结构。但是，即使您必须这样做，Acitivity 实例也将是相同的，您可以安全地保存`Bitmap`而不使用静态字段。

但是，如果您无法在本地 Java 项目中重现相同项目的问题，我会报告 Mono 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:53:06.577

没有整个代码很难看到，但显然听起来你有内存泄漏。已知屏幕旋转（由于活动的破坏/创建）会导致这些。您可能想阅读[Romain Guy 的这篇文章](http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/)以及去年 IO 的[演讲。](http://www.youtube.com/watch?v=_CruQY55HOk)

# arrays - 时间序列排序

> ID：13383093
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:36:32.670
> 
> 标签：arrays

我有 200 个数据文件要处理。我需要一个文件的解决方案，我会为其余的文件做同样的事情。这是一个典型的每日时间序列问题。

我的降雨数据是这样排列的：1990年到2011年为年份，每年下为12个月，每月前为29天或30天或31天，视月份而定。

我的问题是把每个月的所有日子都放在那个月和每年的下面。结果将是两个列向量；一个用于日期，一个用于每年每个月的每天降雨。

提前致谢。

一首歌。

我的数据形状如下：

```
1960           1           2           3           4           5           6       4
1961           1           2           3           4           5           6       4 
```

我希望它是 1960 1 。. 1961 年 1 . . N 等作为列而不是行的形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:51:22.947

我使用 reshape(a.',1,[]) 得到了答案。

然而，一个问题仍然存在。我的数据包含所有月份的 31 天。如何告诉 matlab 删除 2 月的最后两三天和 4 月的最后一天以及其他本应有 30 天但在我的时间序列中有 31 天的月份？

# grails - 从本地 Grails 插件中排除依赖项

> ID：13383094
> 
> 赞同：4
> 
> 时间：2012-11-14T16:36:32.623
> 
> 标签：grails, plugins, dependencies

我在 googlytubes 上没有看到任何类似答案的东西，所以这里......

我们在 grails 项目中使用了几个本地插件。我们的一个插件最近依赖于 SLF4J。我们的主 webapp（使用插件）也依赖于 SLF4J。这会在运行时产生完全无害但令人恼火的警告：

```
Error SLF4J: Class path contains multiple SLF4J bindings. 
```

通常我只会在插件 SLF4J 依赖项上定义一个“排除”，但由于这是一个本地插件，我看不到任何方法可以这样做。我试过了...

```
grails.plugin.location.'localpluginname' = '../localplugindir'

grails.project.dependency.resolution = {
    plugins {
        runtime("com.ourcompany:localpluginname:1.0") {
            excludes('slf4j-api')
        }
    }
} 
```

...但随后它尝试实际解析远程存储库上的所述插件，但失败了。我们也不想直接在插件中排除依赖项，因为该插件可能会在其他尚未提供依赖项的项目中使用。

在有人建议我们将本地插件部署到本地 maven 存储库以执行此操作之前，让我把它从我们不想这样做的方式中解脱出来。我们将它们放在本地是有原因的……所以我们可以快速进行更改并查看所述更改。我们宁愿忍受烦人的警告消息，也不愿增加部署每次更改的痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:40:02.003

您收到的警告与类路径中存在多个版本的 slf4j-api 无关。SLF4J API 旨在一次绑定一个且仅一个底层日志框架。如果类路径上存在多个绑定，SLF4J 将发出警告，列出这些绑定的位置。您可以在[SLF4J 警告或错误消息及其含义中了解更多信息](http://www.slf4j.org/codes.html)文档。Slf4J 提出的解决方案是：当类路径上有多个绑定可用时，选择一个且只有一个您希望使用的绑定，并删除其他绑定。在您的情况下，最好的方法是直接从插件中排除 Slf4J 绑定。插件不应依赖于拥有自己的绑定，而是假设 Grails 应用程序将提供绑定（这就是它的作用）

# javascript - 更新时间线

> ID：13383103
> 
> 赞同：1
> 
> 时间：2012-11-14T16:37:04.033
> 
> 标签：javascript, twitter

我正在使用 twitter 的 API 来搜索推文，并且我希望能够更新时间线。

根据[“使用时间线”](https://dev.twitter.com/docs/working-with-timelines)，我需要传递参数`max_id`和`since_id`（第一条和最后一条推文的 id），我通过以下方式获得：

```
 var max_id = tweets.max_id_str;
   var since_id = tweets.results[tweets.results.length - 1].id_str; 
```

但是当我更新时，我得到相同的推文减一。显然我做错了什么，但是什么？

# javascript - 在 asp gridview 中将日期格式从 25-01-2012 更改为 25-JAN-2012

> ID：13383105
> 
> 赞同：0
> 
> 时间：2012-11-14T16:37:04.360
> 
> 标签：javascript, asp.net, gridview

在 ASP Gridview 表中，其中一列（日期）将以 25-01-2012 格式显示。

如何使用 javascript 函数将格式从`25-01-2012`更改为 ？`25-JAN-2012`标记是

```
<asp:BoundColumn  DataField="MyDate"  HeaderText="Day&amp;" >    
<ItemStyle Wrap="False" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:43:27.933

您可以使用 asp.net 代码更改日期格式

```
<asp:GridView runat="server">
<Columns>
   <asp:BoundColumn DataField="MyDate" DataFormatString="{0:dd-MMM-yyyy}" />
</Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:10:13.587

```
 <asp:BoundColumn DataField="MyDate" HeaderText="Day&amp;" DataFormatString="{0:dd-MMM-yyyy}">
<ItemStyle Wrap="False" /> 
```

# r - 逻辑回归中的折刀

> ID：13383106
> 
> 赞同：0
> 
> 时间：2012-11-14T16:37:18.230
> 
> 标签：r, glm

我有兴趣应用 Jackknife 分析来量化我的由逻辑回归估计的系数的不确定性。我正在使用 glm(family='binomial') 因为我的自变量是 0 - 1 格式。

我的数据集有 76000 个 obs，我使用 7 个自变量加上一个偏移量。这个想法涉及将数据拆分为 5 个随机子集，然后通过从数据集中一次删除一个子集来获得 7 个估计参数。然后我可以估计参数的不确定性。

我了解该程序，但我无法在 R 中执行此操作。

这是我适合的模型：

```
glm(f_ocur ~ altitud + UTM_X + UTM_Y + j_sin + j_cos + temp_res + pp +
             offset(log(1/off)), data = mydata, family = 'binomial') 
```

有谁知道我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:20:03.433

Jackknifing 逻辑回归模型的效率非常低。但是一个简单的时间密集型方法是这样的：

```
Formula <- f_ocur~altitud+UTM_X+UTM_Y+j_sin+j_cos+temp_res+pp+offset(log(1/off))
coefs <- sapply(1:nrow(mydata), function(i)
  coef(glm(Formula, data=mydata[-i, ], family='binomial'))
) 
```

这是您的留一法系数估计矩阵。该矩阵的协方差矩阵估计参数估计的协方差矩阵。

`glm`通过使用的主力函数，可以显着缩短时间`glm.fit`。您可以通过线性化模型走得更远（使用一步估计，`niter`在 Newton Raphson 算法中限制为仅一次迭代，使用 Jackknife SE 进行一步估计仍然是稳健的、无偏的、整体......）

# asp.net - 强制单个背景图像 *NOT* 缓存

> ID：13383108
> 
> 赞同：2
> 
> 时间：2012-11-14T16:37:19.217
> 
> 标签：asp.net, http, iis-7, http-headers, iis-7.5

我的网站上有一个使用背景图片的 div 标签。当我们对该图像进行微小的文本更改并将其通过 ftp 传输回服务器时，它会继续将其作为 304 未修改并使用缓存版本提供服务。只有在我们强制刷新浏览器之前，它才会获取新图像。

我已经阅读了您可以在 HTTP 响应标头中将 Cache-Control 设置为 no-cache 的位置（我使用的是 IIS 7.5），但这仍然没有任何作用，仍然使用缓存的图像并发送回 304。我的解决方法是重命名图像并更改 div 的 css 并且确实有效，但我正在寻找更好的方法。理想情况下，我们希望这个单一图像是动态的，以便我们可以经常更改它，但我们不希望我们的客户必须知道刷新他们的浏览器。

有解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:39:45.140

更改 url 是最常见的解决方法。就我而言，当我遇到此类问题时，我已将图像移动到单独的控制器中（或者它可能是页面，甚至是 hadler），并添加了由`datetime`类生成的小 url 参数，例如：

```
http:\\mysite.com\myimage\dynamic.jpg?bla=20121119184001 
```

# python - python将画布上的图像排列成一个圆圈

> ID：13383112
> 
> 赞同：1
> 
> 时间：2012-11-14T16:37:28.827
> 
> 标签：python, python-imaging-library

我有一堆图像（比如 10 个）我已经生成为数组或 PIL 对象。

我需要将它们集成到圆形方式中以显示它们，它应该根据屏幕的分辨率自行调整，python 中有什么可以做到这一点吗？

我尝试过使用粘贴，但是弄清楚要粘贴的分辨率画布和位置很痛苦，想知道是否有更简单的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:53:12.533

`theta`当相邻点之间的角度恒定时，我们可以说点均匀排列在一个圆圈中。`theta`可以计算为 2*pi 弧度除以点数。第一个点`0`与 x 轴成角度，第二个点成角度`theta*1`，第三个点成角度`theta*2`，等等。

使用简单的三角函数，您可以找到位于圆边缘上的任何点的 X 和 Y 坐标。`ohm`对于位于半径为 的圆上的角度点`r`：

```
xFromCenter = r*cos(ohm)
yFromCenter = r*sin(ohm)

```

使用这个数学，可以将图像均匀地排列在一个圆圈上：

```
import math
from PIL import Image

def arrangeImagesInCircle(masterImage, imagesToArrange):
    imgWidth, imgHeight = masterImage.size

    #we want the circle to be as large as possible.
    #but the circle shouldn't extend all the way to the edge of the image.
    #If we do that, then when we paste images onto the circle, those images will partially fall over the edge.
    #so we reduce the diameter of the circle by the width/height of the widest/tallest image.
    diameter = min(
        imgWidth  - max(img.size[0] for img in imagesToArrange),
        imgHeight - max(img.size[1] for img in imagesToArrange)
    )
    radius = diameter / 2

    circleCenterX = imgWidth  / 2
    circleCenterY = imgHeight / 2
    theta = 2*math.pi / len(imagesToArrange)
    for i, curImg in enumerate(imagesToArrange):
        angle = i * theta
        dx = int(radius * math.cos(angle))
        dy = int(radius * math.sin(angle))

        #dx and dy give the coordinates of where the center of our images would go.
        #so we must subtract half the height/width of the image to find where their top-left corners should be.
        pos = (
            circleCenterX + dx - curImg.size[0]/2,
            circleCenterY + dy - curImg.size[1]/2
        )
        masterImage.paste(curImg, pos)

img = Image.new("RGB", (500,500), (255,255,255))

#red.png, blue.png, green.png are simple 50x50 pngs of solid color
imageFilenames = ["red.png", "blue.png", "green.png"] * 5
images = [Image.open(filename) for filename in imageFilenames]

arrangeImagesInCircle(img, images)

img.save("output.png") 
```

结果：

![在此处输入图像描述](../Images/f6ed021c57064f5bc4b3c926a3499a47.png)

# c++ - g++ -std=c++0x 和兼容性

> ID：13383124
> 
> 赞同：6
> 
> 时间：2012-11-14T16:38:04.773
> 
> 标签：c++, g++, backwards-compatibility

我正在使用 g++ 4.4 在 linux 上编译一个共享库。如果可以的话，我想在库中使用一些 C++11 功能，但我无法更新编译器的版本，也无法为我的库的用户提供任何特殊的编译器开关。

我有两个问题，我很难找到一个明确的答案。

1.  如果我用 -std=c++0x 或 -std=g++0x 编译共享库，我是否保证使用我的库的程序不需要这些开关（前提是我在头文件）？它似乎有效，但我不想为未来的微妙问题而注册。

2.  g++ 4.4 中的 C++11 标准库是相当不完整的。由于大部分标准库都是仅头文件，并且 gnu 的头文件通常充满版本 ifdefs，我认为可能有一种方法可以使用 libstdc++ 中至少头文件的更新版本。不过，我不能为它使用不同的 .so 。我敢肯定我可以把它拼凑在一起，但是有可能正确地做这样的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:26:15.193

> 1\. 如果我用 -std=c++0x 或 -std=g++0x 编译共享库，我是否保证使用我的库的程序不需要这些开关（前提是我没有 c++0x头文件中的功能）？它似乎有效，但我不想为未来的微妙问题而注册。

C++11 支持在 GCC 4.x 版本中仍然是实验性的（从 GCC 5 开始不再是实验性的）。尽管我们试图保持工作正常，但答案是否定的，您通常不能保证在所有情况下都能正常工作。使用导致的许多 ABI 更改`-std=c++0x`可能会导致混合 C++03 代码和 C++11 代码的程序出现问题，有关更多详细信息，请参阅[http://gcc.gnu.org/wiki/Cxx11AbiCompatibility](http://gcc.gnu.org/wiki/Cxx11AbiCompatibility)。如果您的库没有导出该页面上描述的任何符号，那么您应该没问题。

> 2.g++ 4.4中C++11的标准库相当不完整。由于大部分标准库都是仅头文件，并且 gnu 的头文件通常充满版本 ifdefs，我认为可能有一种方法可以使用 libstdc++ 中至少头文件的更新版本。不过，我不能为它使用不同的 .so 。我敢肯定我可以把它拼凑在一起，但是有可能正确地做这样的事情吗？

不，绝对没有任何可能会奏效。更高版本的标头使用 4.4 不支持的功能，即使您可以使用它们，您也需要使用较新的`libstdc++.so`. 就是不行。

标头中*没有*完整的版本，几乎您会发现只有在使用时由 G++ 定义的`#ifdefs`检查，但这并不意味着您的 4.4 版本支持 lambda、非静态数据成员初始化器、正确的右值引用语义，默认/删除的函数等，以后的标头可以自由使用。您**必须**将 libstdc++ 标头与它们随附的相同版本的 GCC 一起使用。`__GXX_EXPERIMENTAL_CXX0X__``-std=c++0x`

 **简而言之，如果您想要适当的 C++11 支持，您需要使用更新的编译器。

如果您不能使用较新的编译器，则无法获得适当的 C++11 支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T16:56:19.467

我不会尝试这个。只需在头文件中使用一个 C++11 定义的宏来更改类或函数的定义，您的最终用户将违反单一定义规则。我想这些用途可能非常微妙。

然后在类似的说明`vector(count, item = T())`中，C++11 中不再存在构造函数（现在是两个构造函数）。

简而言之，您必须非常小心您在库中使用的标准库组件，以避免违反单一定义规则，而且我无法想象损坏的风险值得使用这些功能。

您*可以*做的是使用`boost`并`tr1`填补语言空白，直到您可以使用新的编译器和/或被允许要求您的最终用户使用 C++11 支持进行编译。**

# ruby-on-rails - 清理传递给 ActiveRecord 订单的用户输入

> ID：13383125
> 
> 赞同：3
> 
> 时间：2012-11-14T16:38:04.847
> 
> 标签：ruby-on-rails, activerecord

我想知道清理传递给订单查询的用户输入的最佳方法。

我正在为 Rails 应用程序编写 API，并希望用户能够将 order_by 选项传递给 api 请求。

例如

```
get :index, :order_by => 'number asc' 
```

我已经看到使用白名单作为一种常见的解决方案来限制实际通过订单调用（[要点示例](https://gist.github.com/4072943)）的内容，但我认为我需要更多的东西。我还希望能够对任何嵌套的关联列进行排序，例如：

```
get :index, :order_by => 'user.last_name asc' 
```

我怎样才能做到这一点，同时防止任何 SQL 注入的发生？

# sorting - 按类别组织产品列表

> ID：13383126
> 
> 赞同：3
> 
> 时间：2012-11-14T16:38:06.553
> 
> 标签：sorting, magento, collections

我想知道，对于那些 Magento 开发人员，您认为过滤掉产品集合产品列表的最明智的方法是，您通过分类来组织结果？

例如，假设您销售自行车和配件。当人们搜索**自行车**时，您将有 3 个类别：

```
1.) Bicycles (Category ID #3)
2.) Bicycle Helmet (Category ID #4)
3.) Bicycle Accessory - Water Bottles (Category ID #10) 
```

如果我有一个自定义控制器并创建自己的集合，并且我想对首先列出类别 ID #3 产品的产品进行排序，然后是类别 ID #4，然后是类别 ID #5。

无论这出现在搜索结果页面还是仅出现在“购买所有产品”页面中，同样的问题都适用 - 我是否应该找到一种按类别排序的方法，如果是，那么最好的方法是什么？当我查看使用产品控制器功能的方法时，我不确定哪种方法可以让我说“先显示这个类别，然后是这个类别，然后是那个类别”

从逻辑上讲，处理此请求的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:17:31.147

你试过`Category Filter`吗？

它是分层导航的一部分，可用于所有产品列表（甚至 catalog_search）

要激活它，只需将`is_anchor`类别的参数放入`True`（在`Display Settings`选项卡中）。

这样，在产品列表的左栏中，您会看到您可以按类别过滤您的产品列表（仅一项一项，不能多选）

你可以在这里看到一个例子：http: [//demo.magentocommerce.com/catalogsearch/result/ ?q=and](http://demo.magentocommerce.com/catalogsearch/result/?q=and)

# c# - 在 RDLC/ReportViewer 输出中合并 DataTable 行

> ID：13383129
> 
> 赞同：2
> 
> 时间：2012-11-14T16:38:09.920
> 
> 标签：c#, datatable, rdlc, reportviewer

我一直在从事涉及 RDLC 文件的工作。

我的 ReportViewer 数据源（数据表）以如下所示的格式发送行：

> 客户 A - 产品 1 - 产品 1 销售额的总和
> 客户 A - 产品 2 - 产品 2 销售额的总和
> 客户 A - 产品 3 - 产品 3 销售额的总和
> 
> 客户 B - 产品 1 - 产品 1 销售额的总和
> 客户 B - 产品 2 - 产品 2 销售额的总和
> 客户 B - 产品 3 - 产品 3 销售额的总和

等等……
我的问题是，可以使用 RDLC/ReportViewer 轻松地将这些数据输出为以下格式：

> 客户 A - 产品 1 的总和 - 产品 2 的总和 - 产品 3 的总和
> 客户 B - 产品 1 的总和 - 产品 2 的总和 - 产品 3 的总和

# http - Http PUT 请求：基本语法是什么？

> ID：13383133
> 
> 赞同：0
> 
> 时间：2012-11-14T16:38:21.223
> 
> 标签：http, rest, tcp, localhost, put

在 Max/MSP 模块中，我有一个将数据发送到服务器的简单 Tcp 客户端。我想用它向我的 MIDI/OSC 控制器（一个 Eigenharp）发送一个 PUT 请求。它请求 PUT 请求以打开其中一个灯。

现在，以下在 cURL 中起作用：

```
curl http://localhost:1024/column/1/row/5 -X PUT --data green 
```

然而，

在没有任何额外库的情况下，如何使用基本的 TCP 流来完成类似的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:48:11.107

这是一种通用的解决方法（可以这么说，用抹子代替鱼）：

第一的，

```
> nc -l -p 7070 
```

它将开始监听 tcp 端口 7070。然后（从单独的 shell）

```
> curl http://localhost:7070/column/1/row/5 -X PUT --data green 
```

之后`nc`将打印如下内容：

```
PUT /column/1/row/5 HTTP/1.1
User-Agent: (Some curl info here)
Host: localhost:7070
Accept: */*
Content-Length: 5
Content-Type: application/x-www-form-urlencoded

green 
```

这或多或少是您需要通过套接字发送的内容。

您也可以使用与网络瑞士军刀相同的`nc`( [netcat ) 实用程序来发送数据：](http://netcat.sourceforge.net/)

```
> cat request.txt | nc host port 
```

也就是说，[HTTP RFC](http://www.w3.org/Protocols/rfc2616/rfc2616.html)是你最好的朋友。

# javascript - 通过前缀抓取 ID

> ID：13383136
> 
> 赞同：0
> 
> 时间：2012-11-14T16:38:26.953
> 
> 标签：javascript, jquery, forms

我有一个关于在提交之前/期间从电子邮件表单中获取内容的问题。

我正在使用代码

```
 <script>
            $('#nm_mc_form_id-1352905826').submit(function(e){
                // Grab the email address from the form
                var email = $('#EMAIL-1352905826').val();
            });
        </script> 
```

如您所见，发件人 ID 和电子邮件 ID 是动态的。有没有办法根据他们的前缀来获取 ID？

我确实在另一个 SO（是的，我环顾四周；））看到了一些类似的东西：

```
$('#id').find('p') 
```

只是不确定它是如何工作的，或者它是否是我需要的？

我是那些喜欢学习的人之一，所以请提供一些关于您的建议的见解。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:39:44.033

使用通配符`^ is used for element starting with given string`。

```
$('[id^=nm_mc_form_id-]').submit(function(e){
            // Grab the email address from the form
            var email = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:41:05.217

您可以使用属性选择器 -

```
var email = $('[id^="EMAIL-"]').val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:46:33.043

您可以使用`attribute starts with ^`或`attribute contains selector *`

```
$('[id^="nm_mc_form_id-"]')  // Starts with

$('[id*="nm_mc_form_id-"]')  // contains 
```

# javascript - 在 Jquery 中，如何延迟包含异步调用的同步函数的执行？

> ID：13383139
> 
> 赞同：1
> 
> 时间：2012-11-14T16:38:33.543
> 
> 标签：javascript, jquery

我很困惑。在此代码的情况下：

```
function prepareit(list){
    for(i=0;i<list.length;i++){
         var test = list[i];
         $.ajax({....});
    }
}

function testit(list){
    for(i=0;i<list.length;i++){
         var test = list[i];
         $.ajax({....});
    }
}

$(document).ready(function() {
    var list = ['ti','meti','medes','fra','u','w','ro','sit','hd','i'];
    prepareit(list);
    testit(list);
}); 
```

当“prepareit”完成时，我需要执行函数“testit”。我已经尝试过使用“when-then”方法，但功能同时启动。

（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:42:12.377

创建一个延迟对象，该对象在所有 ajax 请求完成后解析。

```
function prepareit(list){
    var defArr = [];
    for(i=0;i<list.length;i++){
         var test = list[i];
         defArr.push($.ajax({....}));
    }
    return $.when.apply($,defArr);
}

function testit(list){
    var defArr = [];
    for(i=0;i<list.length;i++){
         var test = list[i];
          defArr.push($.ajax({....}));
    }
    return $.when.apply($,defArr);
}

$(document).ready(function() {
    var list = ['ti','meti','medes','fra','u','w','ro','sit','hd','i'];
    prepareit(list).done(function(){
        testit(list).done(function(){
            alert("All done!");
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:39:53.603

您可以在 中调用`testit`ajax 请求的成功函数`prepareit`，如下所示：

```
function prepareit(list){
    for(i=0;i<list.length;i++){
         var test = list[i];
         $.ajax({ success: function (data) { testit(list); } });
    }
}

function testit(list){
    for(i=0;i<list.length;i++){
         var test = list[i];
         $.ajax({....});
    }
}

$(document).ready(function() {
    var list = ['ti','meti','medes','fra','u','w','ro','sit','hd','i'];
    prepareit(list);
    //testit(list);
}); 
```

但是，如果您依赖于在“测试”之前“准备”整个列表，这将不起作用。我想说循环 ajax 请求不是最好的方法——如果可能的话，你应该改变你的代码以在 ajax 调用中传递整个列表，而不是循环多次（不知道你想要完成什么课程）。

# ios - 以编程方式在 iPhone 中保存 PDF

> ID：13383140
> 
> 赞同：0
> 
> 时间：2012-11-14T16:38:36.317
> 
> 标签：ios, uiimageview, core-animation, catiledlayer

我在我的应用程序中得到一个 PDF 文件，如下所示：

```
NSURL* pdfURL = [NSURL URLWithString:urlStr];
CGPDFDocumentRef PDFDocument = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfURL);
CGPDFPageRef PDFPage = CGPDFDocumentGetPage(PDFDocument, 1); 
```

我知道对于图像，我们可以使用此方法将其保存在 iPhone 中：

```
[UIImagePNGRepresentation(image) writeToFile:uniquePath atomically:YES]; 
```

但是有没有办法以编程方式在 iPhone 中写入/保存 PDF 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:44:14.863

这是一种简单的方法：

```
NSData *myFile = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"your_url"]]; 
[myFile writeToFile:[NSString stringWithFormat:@"%@/%@", [[NSBundle mainBundle] resourcePath], @"yourfilename.pdf"] atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2014-01-07T14:51:00.417

除了 UIImage 之外，无法以编程方式将任何数据保存到 iPad 内存中。

# mysql - 如何在 Propel 中应用 Mysql concat？

> ID：13383141
> 
> 赞同：0
> 
> 时间：2012-11-14T16:38:34.733
> 
> 标签：mysql, orm, where, propel, concat

我正在尝试对数据网格进行远程过滤。

网格有一个文本字段，用户在其中输入发送到服务器以刷新网格的字符。

我的问题是我使用 Propel 来处理数据库，我需要连接两个 MySQL 字段来进行比较。我不知道如何`where concat(firstname, ',', lastname) like '%aText%'`在 Propel 中进行简单的操作。

我试过了：

```
$usuarios = UsuariosQuery::create()
  ->where("(concat(usuarios.apellido,' , ',usuarios.nombre)) LIKE '%?%'",$filter)
  ->orderByApellido('ASC')
  ->find(); 
```

这行不通。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:03:03.143

[根据文档](http://trac.propelorm.org/wiki/Documentation/1.5/WhatsNew)试试这个（搜索`concat`）：

```
$usuarios = UsuariosQuery::create()
  ->where('CONCAT(Usuarios.Apellido, ",", Usuarios.Nombre) LIKE ?', $filter)
  ->orderByApellido('ASC')
  ->find();
}}} 
```

# javascript - RegexPal 与浏览器不同

> ID：13383142
> 
> 赞同：1
> 
> 时间：2012-11-14T16:38:35.100
> 
> 标签：javascript, regex

当我注意到一些奇怪的事情时，我正在回答一个[关于 regexes的问题。](https://stackoverflow.com/q/13381596/206403)我在[RegexPal](http://regexpal.com/)中测试正则表达式，得到的结果与 Chrome 和 Firefox 告诉我的结果不同。

有问题的正则表达式是：`/^\d*(\.\d{1,2}$)?/`.

在 Firefox 和 Chrome 中：`/^\d*(\.\d{1,2}$)?/.test('-1')`返回`true`，但 RegexPal 说它不匹配。

> [http://regexpal.com/?flags=m®ex=%5E%5Cd%2A(%5C.%5Cd%7B1%2C2%7D%24)%3F&input=-1](http://regexpal.com/?flags=m&regex=%5E%5Cd%2A(%5C.%5Cd%7B1%2C2%7D%24)%3F&input=-1)

我的猜测是它与正则表达式不匹配的事实有关，我的意思是空字符串。

正则表达式匹配字符串的开头，然后是 0 个数字，然后是组的 0，因此它会 "match" `-1`，因为它适合该模式，但 "match" 将是 "nothing" （空字符串）。

为什么 RegexPal 说它不匹配，但我的网络浏览器说它匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:45:25.213

RegexPal 正在工作，但它并不明显。正则表达式匹配空字符串，因此 RegexPal 会为您突出显示。

好吧，由于空字符串是空的，所以你看不到它正在突出显示它。

# python - Readline 有时可以在 iPython 中工作，有时不能

> ID：13383143
> 
> 赞同：0
> 
> 时间：2012-11-14T16:38:40.703
> 
> 标签：python, bash, ipython, readline

我找不到这种模式，但是当我从 Bash shell 启动 ipython 时，有时我发现 readline 命令喜欢`ctrl` `a`并且`ctrl` `e`可以很好地移动到一行的前面/后面。有时，莫名其妙地，这些命令只是**将 ^a**或**^e**打印到屏幕上。

发生这种情况时，我该如何找回 readline？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:21:25.087

这迫使 a `readline`：

```
$ rlwrap -a ipython 
```

`iPython`(v.12)`readline`自动为我而来。您可以进行更多检查： file `~/.inputrc`，或者`readline`在您调用之前是否存在`iPython`。希望这有帮助。

# php - 读取文件系统并返回

> ID：13383144
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:38:42.680
> 
> 标签：php, header

在 PHP 中，我知道如何读取文件。但是，我希望脚本能够返回要下载的文件的内容。

例如： [http://example.com/myfiles.php?source=images.zip](http://example.com/myfiles.php?source=images.zip) 我需要 myfiles.php 来返回 zip 文件的标题，然后是其内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:42:28.740

您需要更改 myfiles.php 脚本文件中的标题，以便强制下载：

```
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=images.zip");
header("Content-Type: application/zip");
header("Content-Transfer-Encoding: binary"); 
```

# android - 在 Android 应用中更新静态数据库

> ID：13383147
> 
> 赞同：1
> 
> 时间：2012-11-14T16:38:48.037
> 
> 标签：android, sqlite, upgrade

我有一个应用程序需要更新数据库的新数据。没有其他需要更新的内容，没有架构更改，没有代码更改。我想要做的就是将一些行添加到用户无法修改的数据库中。

通常在第一次安装时，我从`assets/`. 之后，当程序运行时，我检查数据库文件是否存在`/data/data/my.package/databases`，如果存在，我不会第二次复制。

现在，新版本的应用程序将完整保留完整的数据库，我想为拥有旧版本的人添加新行。我有几个选择：

*   使用 的`onUpgrade()`功能`SQLiteOpenHelper`插入行。我不想这样做，因为有很多行，我宁愿将它们放在`assets/`要导入的文件夹中。有没有办法`assets/`从内部访问`onUpgrade()`？
*   每次启动时删除并重新创建数据库。这很浪费，但它确保了无论安装了哪个应用程序的先前版本，都存在完整的数据库。
*   检查以查看已安装的应用程序的先前版本，并在首次启动时有选择地删除数据库，以便仅在首次启动时复制具有新行的数据库`assets/`。为此，我不太清楚我应该检查什么。运行时无法知道旧的应用程序版本。我想过使用`PackageInfo.firstInstallTime`or`PackageInfo.lastUpdateTime`并检查一段时间，如果用户在此之前安装/更新，那么他们显然拥有我正在寻找的第一个版本。我知道这很容易出错，但我现在已经将该应用程序从市场上撤下，所以我在这里有一些余地。

表达这个问题的另一种方式是：如果我正在升级一个应用程序并且我有一些文件`/data/data/my.package/*`想要删除或更新，基于版本更改，我怎么能做到这一点，因为我不知道以前的版本安装了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:13:19.207

`onUpgrade`回调告诉你旧版本和新版本。

# javascript - 在 jQuery 中组合多个选择器

> ID：13383149
> 
> 赞同：2
> 
> 时间：2012-11-14T16:38:52.520
> 
> 标签：javascript, jquery

我正在尝试找到一种解决方案来使这段代码更干净：

```
$(document).keypress(function(ev){
         if($("#dialog").is(':visible') === false && $("#alertDialog").is(':visible') === false){
            if(ev.keyCode=='13' && !$('#resetBtn').is(':focus') && !$('.edit-new').is(':focus') && !$('.edit-trash').is(':focus')){
                return validateForm('valueTable');
            } 
            if(ev.keyCode=='27'){
                $('#resetBtn').click();
            }
         }
     }); 
```

如您所见，在执行我的事件之前，我正在检查三个单独的输入是否不在焦点中。有没有办法将#resetBtn、.edit-new、.edit-trash 定位到一个包装精美的选择器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:41:38.723

这会做你想要的吗？

`$('#resetBtn:focus, .edit-new:focus, .edit-trash:focus').length === 0`

您也可以使用类似的语句进行可见性检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:40:11.757

是的，像这样`$('#resetBtn, .edit-new, .edit-trash')`:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:56:32.987

您可以使用单个选择器并简单地检查其返回元素的长度。`false`当我们可以检查长度属性时，没有理由显式检查是否相等：

```
// Handle the keypress event on the document object
$(document).on("keypress", function (event) {
    // Proceed if no visible dialogs
    if (!$("#dialog:visible, #alertDialog:visible").length) {
        // Checking which key was pressed
        switch (event.which) {
            case 13:
                // If no focus is on #resetBtn, .edit-new, or .edit-trash
                if (!$("#resetBtn:focus, .edit-new:focus, .edit-trash:focus").length) {
                    return validateForm("valueTable");
                }
                break;
            case 27:
                // Trigger the click event on #resetBtn
                $("#resetBtn").trigger("click");
        }
    }
}); 
```

# objective-c - 为什么编译器会抱怨我的简单函数调用？

> ID：13383155
> 
> 赞同：2
> 
> 时间：2012-11-14T16:39:12.817
> 
> 标签：objective-c

刚从 Java 背景学习 Objective-C。我正在尝试编写一个除了教我如何用这种语言编写函数之外没有其他目的的程序，而且我到处都遇到错误。问题是因为我昨天刚开始使用这种语言，所以这些错误对我来说毫无意义。这是我到目前为止所拥有的。

**主要方法：**

```
int main (int argc, const char * argv[])
{
    @autoreleasepool
    {
        NSString * prompt = @"Hello World";

        prompt = writePromptMessage(prompt);

        NSLog(@"%@", prompt);
    }

    return 0;
} 
```

**特殊方法：**

```
NSString *writePromptMessage(NSString * prompt)
{
    return prompt;
} 
```

**我的错误：**

*   函数 writePromptMessage 的隐式声明在 C99 中无效
*   ARC 不允许将“int”隐式转换为“NSString *”
*   从 int 分配 NSString strong 的不完整整数到指针转换
*   writePromptMessage 的冲突类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:43:35.853

与 Java 不同，您需要在使用它之前添加一个*函数声明*（也称为*函数原型*）。函数声明就像函数定义一样，但没有函数体（即代码），并以分号结尾：

```
// This is a function declaration:
NSString *writePromptMessage(NSString * prompt);

// This is a function definition:
NSString *writePromptMessage(NSString * prompt)
{
    // Function body goes here
} 
```

为了能够调用一个函数，你需要在使用站点*之前写一个声明：*

```
NSString *writePromptMessage(NSString * prompt);  // declaration

int main (int argc, const char * argv[])
{
    ...
    writePromptMessage(...);  // usage
}

// definition follows 
```

或者，您可以将整个定义放在使用站点之前，但这并不总是可行的（例如，如果您有两个可以相互调用的函数）。

C 和 Objective-C 实际上允许你调用没有可见声明的函数，但这被认为是一个弃用的特性，因为它很容易被误用并导致细微的错误：

如果在没有可见声明的情况下调用函数，编译器会创建一个*隐式声明*：

*   隐式声明采用任意数量和类型的参数
*   隐式声明返回`int`

因此，发生的事情是编译器假设它在第一次看到它时`writePromptMessage`返回`int`，这是错误的，并且会导致一连串其他错误。对于不返回的函数`int`，你**绝**不能使用隐式函数声明，而对于确实返回的函数`int`，你**不应该**使用隐式函数声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:45:18.757

您要么需要在 之前添加函数声明`main`，要么在那里定义整个函数。例如，它编译：

```
#import <Foundation/Foundation.h>

void hello(NSString *text) {
    NSLog(@"%@", text);
}

int main(int argc, const char * argv[])
{
   @autoreleasepool {
        hello(@"Foo");
    }
    return 0;
} 
```

这也是如此：

```
#import <Foundation/Foundation.h>

void hello(NSString*);

int main(int argc, const char * argv[])
{
   @autoreleasepool {
        hello(@"Foo");
    }
    return 0;
}

void hello(NSString *text) {
    NSLog(@"%@", text);
} 
```

编译器会自动注意到 Objective-C*方法*（[那是另一回事](https://stackoverflow.com/questions/7982613/what-is-the-difference-between-an-objective-c-function-and-an-objective-c-method)），因此无需提前声明它们；这编译得很好：

```
@interface Foo : NSObject
@end

@implementation Foo

- (void) doA
{
    [self doB];
}

- (void) doB
{}

@end 
```

显然编译器对常规 C 函数并不那么聪明，可能是为了符合 C 语言规范。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:46:32.890

所有这些错误很可能源于同一个问题。看来您尚未在方法之前声明或`writePromptMessage` *定义*`main`。在 C（和 Objective-C）中，您必须在使用函数之前声明或定义函数。编译器一无所知`writePromptMessage`，导致您的错误消息。

> 函数 writePromptMessage 的隐式声明在 C99 中无效

表示你还没有声明`writePromptMessage`，所以...

> ARC 不允许将“int”隐式转换为“NSString *”

在 C 中，假定函数默认返回一个`int`；由于您尚未声明`writePromptMessage`，编译器假定它是一个返回 a 的函数，`int`不应将其转换为 a `NSString *`。

> 从 int 分配 NSString strong 的不完整整数到指针转换

见上文（基本上是同一个问题）。

> writePromptMessage 的冲突类型

哦！现在编译器*已经*看到了`writePromptMessage`……但是等等。它已经假定`writePromptMessage`返回一个`int`，现在它看到它返回`NSString`，导致错误。

* * *

如果你把`writePromptMessage` *before* `main`的定义，或者至少声明它的原型，à la：

```
NSString *writePromptMessage(NSString * prompt); 
```

*之前* `main`，你应该没事。

# stanford-nlp - 如何自定义 Stanford Classifier 以获得流水线执行方式？

> ID：13383156
> 
> 赞同：3
> 
> 时间：2012-11-14T16:39:12.483
> 
> 标签：stanford-nlp

我正在使用[斯坦福 NLP 分类](http://nlp.stanford.edu/software/classifier.shtml)器，并且非常了解如何使用命令行和通过 ClassifierDemo.java 以编程方式运行，ClassifierDemo.java 是 stanford 在下载文件中提供的示例文件。我也非常了解在程序作为输入的配置/属性文件中设置所有必要的参数。有了这些知识，我只是想知道我是否可以满足以下场景。

我只知道 stanford nlp 分类器执行诸如词干提取、词形还原、pos 标记器、NER、基于正则表达式的拆分词、标记化、特征向量的构建、为每个单独的特征分配权重等操作。我只是在寻找一种管道方式来处理所有这些操作。也就是说，将一个步骤输出作为下一步的输入，直到生成最终输出。此外，我知道在 pdf 讲义和斯坦福分类器的 wiki 页面中找到了足够的解释，并亲自尝试在属性/配置文件中使用 printTo，但这仍然不足以满足我的需要。

简而言之，寻找一种管道内衬的工作方式，这样我需要在每个单独的操作之后获得输出，并再次将相同的文件作为输入提供给下一个操作。尽管随包一起提供了 java 文档，但 stanford 目前的下载中没有提供源代码。也有可能在每个操作之后生成输出，如词形还原、词干提取、pos 标记器、NER、基于正则表达式的拆分词、标记化、特征向量的构建、为每个单独的特征分配权重、建立类模型...... ETC..

# core-data - RestKit / Core Data：NSFetchedResultsController 无法识别映射对象的变化

> ID：13383160
> 
> 赞同：2
> 
> 时间：2012-11-14T16:39:38.403
> 
> 标签：core-data, restkit, nsfetchedresultscontroller

只是对我的问题所指的内容的简短概述。数据模型基于名为“Customer”和“Reservation”的两个 NSManagedObject 类。我从 Web 服务获得的 JSON 如下所示：

```
"Reservation": {
    "Id": 1,
    "Reservation": "Just a description",
    "Note": "Just anything",
    "Customer": {
        "Id": 1,
        "Name": "Smith",
        "Firstname": "John",
        "Phonenumber": "00000"
    }
} 
```

我使用 NSFetchedResultsController 及其委托来管理表格视图。接收新条目正常工作。我的 fetchController 代码如下所示：

```
fetchedResultsController = [Reservation fetchAllSortedBy:@"name" ascending:YES withPredicate:nil groupBy:@"name"];
fetchedResultsController.delegate = self; 
```

如果 Reservation 对象发生任何变化，表格视图也会正确更新。当映射的“客户”对象（如姓名、名字或电话号码）发生任何变化时，问题就出现了。

检查 database.sql 文件可以确保数据库中的数据得到更改，并且 RestKit / Core Data 可以正常工作。似乎唯一的问题是取决于未调用的代表。如果我更改“Reservation”和“Customer”中的属性，则代表会正确触发（可能是因为“Reservation”中的更改），并且所有 Customer 和 Reservation 属性的表视图都会正确更新。

如果我关闭并重新打开应用程序，表格视图会按应有的方式完美加载。

# matlab - 如何在调制后和添加噪声后绘制 BPSK、QPSK 和 MSK 的同相/象限？

> ID：13383168
> 
> 赞同：0
> 
> 时间：2012-10-18T08:54:38.320
> 
> 标签：matlab

谁能帮我解决这个问题：

任务是绘制两个图表，显示每种调制方案的 I/Q 分量：BPSK、QPSK、16 QAM 和 MSK，仅用于调制后和添加高斯白噪声后的一个数据集。

所以我想了解如何在调制后和添加噪声后使用 scatterplot() 函数绘制这些分量。

这是与调制和高斯白噪声相关的代码部分：

```
%******************** BPSK Modulation ***********************
data1=data.*2-1;
data2] = oversamp( data1, nd , IPOINT);
data3 = conv(data2,xh);  % conv: built in function 
```

在添加噪音之后：

```
%************ Add White Gaussian Noise (AWGN) ***************
inoise=randn(1,length(data3)).*attn;  % randn: built in function
data4=data3+inoise;
data5=conv(data4,xh2);  % conv: built in function
sampl=irfn*IPOINT+1;
data6 = data5(sampl:8:8*nd+sampl-1); 
```

对于 QPSK

```
 %************* QPSK Modulation ********************************  
[ich,qch]=qpskmod(data1,1,nd,ml);
[ich1,qch1]= compoversamp(ich,qch,length(ich),IPOINT);
[ich2,qch2]= compconv(ich1,qch1,xh);

%********************* Add White Gaussian Noise (AWGN) **********************

[ich3,qch3]= comb(ich2,qch2,attn);% add white gaussian noise
[ich4,qch4]= compconv(ich3,qch3,xh2);
syncpoint=irfn*IPOINT+1;
ich5=ich4(syncpoint:IPOINT:length(ich4));
qch5=qch4(syncpoint:IPOINT:length(qch4)); 
```

对于 MSK

```
%*************************** MSK Modulation ********************************
[ich,qch]=qpskmod(data1,1,nd/2,2);
smooth1=cos(pi/2*[-1+1./4.*[0:IPOINT-1]]); %IPOINT point filtering
for ii=1:length(ich)
  ich2((ii-1)*IPOINT+1:ii*IPOINT)=(-1)^(ii-1)*smooth1.*ich(ii);
  qch2((ii-1)*IPOINT+1:ii*IPOINT)=(-1)^(ii-1)*smooth1.*qch(ii);
end
ich21=[ich2 zeros(1,IPOINT/2)];
qch21=[zeros(1,IPOINT/2) qch2];

%********************* Add White Gaussian Noise (AWGN) **********************
[ich3,qch3]= comb(ich21,qch21,attn);% add white gaussian noise
syncpoint=1;
ich5 = ich3(syncpoint+IPOINT/2:IPOINT:length(ich2));
qch5 = qch3(syncpoint+IPOINT:IPOINT:length(ich2)+IPOINT/2);
ich5(2:2:length(ich5))=-1*ich5(2:2:length(ich5));
qch5(2:2:length(ich5))=-1*qch5(2:2:length(ich5)); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:35:01.557

您不需要使用专门的功能，例如`scatterplot`; 你让这比你必须做的更复杂。`scatterplot`只是一个薄薄的包装`plot`。请记住，为了绘制向量`y`与向量`x`，您只需使用`plot(x,y)`. 因此，对于您的各种情况，您需要做的就是`plot(I_data,Q_data)`.

# java - 带有详尽列表的 switch 语句：默认标签是否相关？

> ID：13383171
> 
> 赞同：0
> 
> 时间：2012-11-14T16:40:02.323
> 
> 标签：java, switch-statement

使用包含`switch`可用项目的详尽列表（例如`enum`）的语句时，如果每个项目都有自己的条件代码，我应该使用`default`标签吗？例如：

```
public class MyClass {

    public enum Type {
        TYPE1, TYPE2
    }

    private Type type;

    public void withDefault() {
        switch (type) {
        case TYPE1:
            // some conditional code for TYPE1
            break;
        default:
            // some conditional code for TYPE2
            break;
        }
    }

    public void withoutDefault() {
        switch (type) {
        case TYPE1:
            // some conditional code for TYPE1
            break;
        case TYPE2:
            // some conditional code for TYPE2
            break;
        }
    }

} 
```

在那种情况下，我应该使用什么：`withDefault()`方法还是那个`withoutDefault()`？或者也许只是口味问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T16:42:23.803

我通常为每个 TYPE1 和 TYPE2 使用一个 case，然后使用一个引发异常的默认值，以便稍后添加类型时，异常会提醒我更改开关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:42:52.687

这对于将来的校对很方便。当你有一个详尽的列表时，默认抛出一个 IllegalStateException 或类似的东西来表明系统中的某些东西发生了变化

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:44:34.183

这取决于你的要求。在中，除第二部分`withDefault()`之外的任何类型，即，但在 中不是这种情况，**这是更排他的。**`TYPE1``default``withoutDefault()`

 **我更喜欢`withoutDefault()` ***with added default to throw some exception**的一些不同版本），因为它只支持预先确定的`enums`并且枚举中的任何更改都会引起您的注意。

如果您认为除 Type1 以外的任何内容都应**始终**设为默认值，那就`withDefault()`更好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T16:45:14.403

我认为这取决于您的喜好。例如，我可以想象一种情况，当您认为您的条目中不会有新条目`enum`并且有人在您背后添加它并且这会破坏您的代码。因此，在这种情况下，最好`Exception`在默认情况下抛出：

```
 switch (type) {
        case TYPE1:
            // some conditional code for TYPE1
            break;
        case TYPE2:
            // some conditional code for TYPE2
            break;
            // ...
        default:
            throw new IllegalArgumentException("This type is not yet supported.");
        } 
```

更好的方法是使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)而不是`switch`大块。使用不断增加的`switch`块可能会使您的代码混乱并使其更难以维护。**

# ant - Ant 在 InteliiJ 社区版上构建，未显示编译器错误

> ID：13383183
> 
> 赞同：17
> 
> 时间：2012-11-14T16:40:54.820
> 
> 标签：ant, intellij-idea

我有一个现有项目，我想在 Ubuntu 12.04.1 LTS 上运行的 IntelliJ Community Edition 11.1.4 中构建

在 Ant Build 窗口中，我`build.xml`通过单击`+`窗口左上角的按钮并导航到文件来添加项目。列出了与构建文件关联的 ant 任务，我单击绿色播放按钮运行 ant 构建，它按预期开始。

我期待看到编译器错误并让 IntelliJ CE 显示这些编译器错误，并允许我在“消息”窗口中双击错误后跳转到（有问题的）源。

相反，消息窗口显示以下错误，当我双击它时，它会将我带到文件`javac`中的 ant 任务`build.xml`。

```
build.xml:389: Compile failed; see the compiler error output for details. 
```

这是一个很好的建议，我非常想遵循它，但我不能，因为编译器错误不会显示在**消息**窗口的任何地方。Next 和 Previous Message 不会导航到实际的编译器错误。

我想知道如何在运行 Ant 构建的 IntelliJ 中查看编译器错误消息。

我尝试将 -v 标志添加到 Ant 命令行：执行属性中的字段。这对行为没有影响。

然后我尝试从 Ant 1.8 降级到 Ant 1.7。这次我确实看到了行为的变化。构建根本没有运行，我在终端收到以下错误[https://gist.github.com/4073149](https://gist.github.com/4073149)。

`javac`蚂蚁任务看起来像这样。

```
<target name="compile-only" depends="">
    <stopwatch name="Compilation"/>
<javac destdir="${build.classes.dir}" debug="on" deprecation="off" 
       classpathref="base.path" excludes="/filtering/**/**">
    <src path="${src.dir}"/>
    <src path="${build.autogen.dir}"/>
</javac>
<!-- Copy all resource files to the output dir -->
<copy todir="${build.classes.dir}">
    <fileset dir="${src.dir}">
        <include name="**/*.properties"/>
        <include name="**/*.gif"/>
        <include name="**/*.png"/>
        <include name="**/*.jpg"/>
        <include name="**/*.svg"/>
        <include name="**/*.jpeg"/>
        <exclude name="**/.svn"/>
    </fileset>
</copy>
<stopwatch name="Compilation" action="total"/> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-14T17:19:52.307

IDEA 只是打印 Ant 的输出。尝试使用消息面板左侧的相应按钮将输出从树视图切换到纯文本视图：

![纯文本视图](../Images/116cd8292e9957dfe0edc955a1bfd1d5.png)

如果输出包含错误，您应该能够在那里看到它们。

`Build`此外，使用 IDEA 提供的增量编译 ( | )更快、更容易`Make`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T16:00:21.057

当对 ant IntelliJ 使用普通（不是树）输出时，使用 `file (line,col): error msg`javac 错误的格式。但是错误视图解析器只理解`file:line: error msg`格式。

您可以在 antIntegration.jar [http://grepcode.com/file/repository.grepcode.com/java/ext/com.jetbrains/intellij-idea/10.0/com/intellij/lang/ant/config的 PlainTextView 类中对其进行调整/执行/PlainTextView.java#98](http://grepcode.com/file/repository.grepcode.com/java/ext/com.jetbrains/intellij-idea/10.0/com/intellij/lang/ant/config/execution/PlainTextView.java#98)

我只是将 addJavacMessage 方法更改为跟随并重新编译了类 ``` java

```
 public void addJavacMessage(AntMessage message, String url) {
    final VirtualFile file = message.getFile();
    if (message.getLine() > 0) {
      final StringBuilder builder = StringBuilderSpinAllocator.alloc();
      try {

        if (file != null) {
          ApplicationManager.getApplication().runReadAction(new Runnable() {
            public void run() {
              String presentableUrl = file.getPresentableUrl();
              builder.append(presentableUrl);
//              builder.append(' ');
            }
          });
        }
        else if (url != null) {
          builder.append(url);
//          builder.append(' ');
        }
//        builder.append('(');
        builder.append(':');
        builder.append(message.getLine());
        builder.append(':');
        builder.append(' ');
//        builder.append(message.getColumn());
//        builder.append(")");
        print(builder.toString(), ProcessOutputTypes.STDOUT);
      }
      finally {
        StringBuilderSpinAllocator.dispose(builder);
      }
    }
    print(message.getText(), ProcessOutputTypes.STDOUT);
  }

  public void addException(AntMessage exception, boolean showFullTrace) {
    String text = exception.getText();
    showFullTrace = false;
    if (!showFullTrace) {
      int index = text.indexOf("\r\n");
      if (index != -1) {
        text = text.substring(0, index) + "\n";
      }
    }
    print(text, ProcessOutputTypes.STDOUT);
  } 
```

```

现在我在 ant 工具的“纯文本”输出模式下有了可点击的链接。请注意，“树模式”正确显示行和列 - 我使用了 IDEA 13 CE。

如果有人就这个问题为 Intellij 创建拉取请求，那就太好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-23T13:51:04.873

Ant 在 IntelliJ 中的正确用法：

```
javac includeantruntime="false" srcdir="${src.dir}" fork="yes" executable="D:/jdk1.7/bin/javac"
      destdir="${classes.dir}" includes="**/*.java" source="7" classpathref="library.classpath" ... 
```

最重要的：

```
executable="D:/jdk1.7/bin/javac" 
```

# java - Numberformat 最大整数位数不能按需要工作

> ID：13383185
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:40:59.483
> 
> 标签：java, number-formatting

我需要格式化一个数字，最好使用 numberformat。目前我有：

```
 NumberFormat nf = NumberFormat.getInstance();
    nf.setMaximumFractionDigits(2);
    nf.setMaximumIntegerDigits(4);
    System.out.println(nf.format(123456.1234)); 
```

这导致 3.456,12 但是，我*希望*得到 1.234,12 作为结果。有没有一种简单的方法可以使用数字格式来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:08:48.040

setMaximumFractionDigits() 和 setMaximumIntegerDigits() 定义将出现在格式化数字上的最大位数（分别用于小数部分和整数部分）。

它们不会为将成为格式化字符串一部分的数字设置上限。

您可以在此处查看 api：http: [//docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html#setMaximumFractionDigits](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html#setMaximumFractionDigits(int) (int ) [http://docs.oracle.com/javase/7 /docs/api/java/text/NumberFormat.html#setMaximumIntegerDigits(int](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html#setMaximumIntegerDigits(int) )

如果你想过滤掉数字，你必须自己做（afaik）。这是一个简单的例子：

```
 String[] parts = "123456.1234".split("\\.");

    String integerPart = parts[0].replaceAll("[^0-4]", "");
    String decimalPart = parts[1].replaceAll("[^0-2]", "");

    float filteredFloat = Float.parseFloat(integerPart + "." + decimalPart);

    NumberFormat nf = NumberFormat.getInstance();
    System.out.println(nf.format(filteredFloat)); 
```

这应该返回 1234.12 的本地化字符串版本

# python - 遍历嵌套字典

> ID：13383187
> 
> 赞同：1
> 
> 时间：2012-11-14T16:41:02.937
> 
> 标签：python, dictionary, trie

我想为我的“玩具”Trie 实现编写一个迭代器。

添加已经像这样工作：

```
class Trie:
    def __init__(self):
        self.root = dict()
        pass
    def add(self, string, value):
        global nops
        current_dict = self.root
        for letter in string:
           nops += 1
           current_dict = current_dict.setdefault(letter, {})
        current_dict = current_dict.setdefault('value', value)              
        pass 
```

添加的输出如下所示：

```
trie = Trie()
trie.add("hello",1)
trie.add("world",2)
trie.add("worlds",12)
print trie.root
{'h': {'e': {'l': {'l': {'o': {'value': 1}}}}}, 'w': {'o': {'r': {'l': {'d': {'s': {'value': 12}, 'value': 2}}}}}} 
```

我知道，我需要[一个`__iter__`and`next`方法](https://stackoverflow.com/questions/19151/build-a-basic-python-iterator)。

```
def __iter__(self):
    self.root.__iter__()
    pass

 def next(self):
    print self.root.next() 
```

但是`AttributeError: 'dict' object has no attribute 'next'`。我该怎么做？

[更新] 在完美的世界中，我希望输出是一个包含所有单词/条目及其对应值的字典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:52:23.360

你的`__iter__`特殊方法应该返回一个*迭代器*；也就是说，您可以调用的类的对象`next`。玩具迭代器类将类似于：

```
class MyIterator:
    def __init__(self):
        self.i = 10
    def next(self):
        self.i -= 1
        if self.i == 0:
            raise StopIteration
        else:
            return self.i 
```

除非你有一个自然的对象可以调用，否则制作一个*生成器*`iter`通常更容易：`__iter__`

 *```
def __iter__(self):
    for i in range(10)
        yield i 
```

这是您的基于堆栈的生成器迭代器`Trie`：

```
 def __iter__(self):
        stack = [('', self.root)]
        while stack:
            prefix, d = stack.pop()
            for k, v in d.items():
                if k == 'value':
                    yield prefix, v
                else:
                    stack.append((prefix + k, v)) 
```

您也可以尝试递归编写它，尽管您需要使用`itertools.chain`or `yield from`（仅从 Python 3.3 开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:31:50.907

假设我正确理解您在迭代器中寻找的内容，我会按照这些思路做一些事情（注意添加的字段`__init__`：

```
class Trie:
    def __init__(self):
        self.root = dict()
        self.stack = ''

    def add(self, string, value):
        """map it to the given value."""
        global nops
        current_dict = self.root
        for letter in string:
           nops += 1
           current_dict = current_dict.setdefault(letter, {})
        current_dict = current_dict.setdefault('value', value)              
        pass

    def __iter__(self, input_dict=None):
        if not input_dict:
            input_dict = self.root

        if 'value' in input_dict:
            yield (self.stack, input_dict['value'])

        keys = [x for x in input_dict.keys() if x != 'value']
        for key in keys:
            self.stack += key
            for item in self.__iter__(input_dict[key]):
                yield item
            self.stack = self.stack[:-1] 
```

那会给你：

```
trie = Trie()
trie.add("hello", 1)
trie.add("world", 2)
trie.add("worlds", 12)
print trie.root
print [x for x in trie]

# {'h': {'e': {'l': {'l': {'o': {'value': 1}}}}}, 'w': {'o': {'r': {'l': {'d': {'s': {'value': 12}, 'value': 2}}}}}}
# [('hello', 1), ('world', 2), ('worlds', 12)] 
```

因此，可以在没有`itertools.chain`or的情况下递归地执行此操作`yield from`。*

# ember.js - 无法在 Ember.js 中加载外部 JSON

> ID：13383189
> 
> 赞同：3
> 
> 时间：2012-11-14T16:41:03.727
> 
> 标签：ember.js

我是 Ember 的新手，从 URL 加载 JSON 时遇到问题。这是我所拥有的：

```
var App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({ templateName: 'application' });

App.OrdersListController = Ember.Controller.extend();
App.OrdersListView = Ember.View.extend({ templateName: 'orders' });

App.Order = Ember.Object.extend();
App.Order.reopenClass({
  find: function(){
     //not implemented yet 
  },
  findAll: function(){
      var content = [];
      $.ajax({
      url: 'http://api.domain/orders',
      dataType: 'jsonp',
      success: function(response){
        response.data.forEach(function(order){
          this.content.addObject(App.Order.create(order))
        }, this)
      }
    });
    return this.content;
  }
});

App.Router = Ember.Router.extend({
  enableLogging: true,
   // The initial state for the router, contains every other.
  root: Ember.Route.extend({
    goOrders: Ember.Route.transitionTo('orders'),
    goLocations: Ember.Route.transitionTo('locations'),
    goReports: Ember.Route.transitionTo('reports'),
    goUsers: Ember.Route.transitionTo('users'),
    goHelp: Ember.Route.transitionTo('help'),
    //Authenticated routes
    index: Ember.Route.extend({
        route: '/',
        redirectsTo: 'orders'
      }),
    orders: Ember.Route.extend({
      route:'/orders',
      initialState: 'index',
      //Orders view.
      index: Ember.Route.extend({
        route: '/',
        connectOutlets: function(router) {
          router.get('applicationController').connectOutlet({
            name:'ordersList', 
            context: App.Order.findAll()
          });
        }
      })
    })
  })
});

App.initialize(); 
```

在我的模板（简化）中：

```
<script type="text/x-handlebars" data-template-name="application">
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="orders">
    {{#each order in controller.content}}
<p>id: {{order.ord_id}}</p>
    {{/each}}
</script> 
```

有了这个，我没有得到错误，但什么也没有出现。如果我将他的 JSON 粘贴到 connectOutlet 的上下文中，它仍然可以工作。我的 findAll() 函数有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:53:41.907

我会试试这个：

```
findAll: function(){
      var content = [];
      $.ajax({
      url: 'http://api.domain/orders',
      dataType: 'jsonp',
      success: function(response){
        response.data.forEach(function(order){
          content.addObject(App.Order.create(order))
        }, this)
      }
    });
    return content;
  } 
```

如您所见，我刚刚删除了 this 指针两次。我认为本例中的 this 指针指向 Order 类，该类没有 content 属性。但是你想引用你定义的 var。因此它应该没有这个。

**注意：在获取数据时，我有时也会遇到 this 指针问题。但到目前为止，这种结构一直对我有用。所以它应该有效，但我的解释可能并不完美。**

# django - loader.get_template_from_string() 和创建模板有什么区别？

> ID：13383194
> 
> 赞同：1
> 
> 时间：2012-11-14T16:41:23.897
> 
> 标签：django, django-templates

我一直在研究一种让用户存储他们自己的模板的方法，我知道我将不得不即时创建模板。例如：

```
>>> from django.template import Template
>>> Template("Testing {{test}}")
<django.template.base.Template object at 0x10c58f990> 
```

但是，当我询问加载模板字符串时，建议我使用`get_template_from_string`：

```
>>> from django.template import loader
>>> loader.get_template_from_string("Testing {{test}}")
<django.template.base.Template object at 0x10c8b5450> 
```

这两种方法有什么区别？一种方式更pythonic，还是更喜欢另一种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:09:58.967

[模板代码](https://docs.djangoproject.com/en/dev/ref/templates/api/)的Django 文档描述了使用您描述的第一种方法：使用`Template()`.

它没有提及`get_template_from_string`，文档中的其他任何地方也没有提及。

因此，我会严重依赖第一种方法的使用，因为另一种可能在未来更有可能发生变化，因为它是一个未记录的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:53:46.613

在当前版本的 Django 中，get_template_from_string 只是以与您相同的方式实例化一个新模板。

```
def get_template_from_string(source, origin=None, name=None):
"""
Returns a compiled Template object for the given template code,
handling template inheritance recursively.
"""
    return Template(source, origin, name) 
```

源代码在这里：[https ://github.com/django/django/blob/master/django/template/loader.py](https://github.com/django/django/blob/master/django/template/loader.py)

# javascript - 如何查看页面中js脚本的加载顺序

> ID：13383196
> 
> 赞同：3
> 
> 时间：2012-11-14T16:41:31.113
> 
> 标签：javascript, jquery, firebug

如何查看页面中js脚本的顺序？

我目前看到源 html 并通过脚本声明。但是有没有更好的方法来查看加载顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:43:56.677

html 代码中脚本的顺序可能不会给出确切的顺序，因为可能存在脚本在远程服务器上并且它已关闭或速度很慢的情况。最好的了解方法是使用 chrome 的内置开发工具在时间轴上对其进行可视化分析。

1.  用chrome打开页面
2.  右键单击并检查元素
3.  点击网络
4.  刷新页面以获取时间线视图。

![在此处输入图像描述](../Images/3cbe5158a5321e8901fd07550a699759.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T16:44:29.203

您也可以使用 Firebug 的 NET 控制台或其他开发人员工具的挂件。这为您提供了以下内容：

![例子](../Images/2b8a411c1f1179f4a2c78bf514eabf10.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T16:49:08.310

使用简单的控制台，试试这个：

```
$(function(){
    $('script',document).each(function(){
          console.log($(this).attr('src') || $(this).text());   
    });
})​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T16:43:09.423

脚本标签按照它们出现的顺序依次加载。

这意味着它们会按照它们在 HTML 中出现的顺序一一加载。

# c# - asp:UpdatePanel + postback + JQuery 类选择器

> ID：13383199
> 
> 赞同：1
> 
> 时间：2012-11-14T16:41:54.240
> 
> 标签：c#, jquery, asp.net, postback

我有一个简单的页面，带有 asp:UpdatePanel 和执行回发的按钮。Page 有一个简单的脚本，它位于 Page_Load 服务器方法中：

```
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "initPage", "initPage();", true); 
```

Javascript 函数 initPage() 如下所示：

```
function initPage(){
  $('.textBoxClass').each(function (index) {
    alert(index);
  }
} 
```

问题是，点击回发按钮后，$('.textBoxClass') 的长度增加了 1。没有代码生成、DOM 操作或类添加。我认为它与 UpdatePanel（？）有关，但有什么办法可以摆脱类数的增加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:41:36.037

尝试设置：

```
UpdateMode="Conditional" 
```

在 updatepanel 属性中，仅在必要时使用方法 Update() 更新面板。

您还可以尝试评论更新面板以使用警报消息进行一些测试

告诉我们这种行为是否仍然存在。

# .net - 用于 Shell 扩展安装的 ClickOnce 的替代方案

> ID：13383204
> 
> 赞同：3
> 
> 时间：2012-11-14T16:42:03.223
> 
> 标签：.net, clickonce

我需要为需要包含 shell 扩展的应用程序创建安装程序。我在博客中阅读了以下内容。

> ClickOnce 并不是所有解决方案的灵丹妙药，例如，如果您想安装 shell 扩展或将组件安装到 GAC 中，您需要创建一个完整的 MSI 项目（Visual Studio 也支持）。但是对于通过内网部署的“典型”部门应用程序来说，这是一个很好的解决方案。

任何人都可以建议替代支持外壳扩展的 ClickOnce 安装程序。基本上，我正在寻找一种在发布较新版本时更新我的​​ dll/模块的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:33:31.320

如果您不介意购买解决方案，我们已经非常成功地使用[了 Wybuild 。](http://wyday.com/wybuild/)您可能需要在注册表选项卡上的注册表中手动添加 shell 扩展。

您还需要创建一个安装程序。WyBuild 只进行自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:42:45.027

我们通过使用 ClickOnce 部署应用程序并捆绑一个负责向其注册 Shell 扩展的 msi 文件解决了类似的问题。

msi 文件注册了 shell 扩展并将值写入注册表，主应用程序只有在验证注册表值后才能启动。

# function - 在VBA中的数组中找到最小正值（大于0）

> ID：13383208
> 
> 赞同：1
> 
> 时间：2012-11-14T16:42:22.567
> 
> 标签：function, vba, excel

我有一个具有以下值的数组（AlphaVector）：

```
-0.2
-0.7
0
0.4
0.3
0.1 
```

我想从上面的数组中选择正值并将其放在另一个名为 Alpha 的数组中，以便我可以从 Alpha 中选择最小的正值。我的目标是从上面的数组中获取值 0.1。这是我到目前为止的代码。Alpha 填充正常，因为 Msgbox 指示正确的值，但我得到的返回值是 0 而不是 0.1。

```
Function FindMin(AlphaVector)
Dim iCount As Long
Dim N As Integer, i As Integer
N = AlphaVector.Cells.Count
Dim Alpha() As Double
ReDim Alpha(N) As Double
For i = 1 To N
    If AlphaVector(i) > 0 Then
        Alpha(i) = AlphaVector(i)
    Else
        Alpha(i) = 100000000000#
    End If
    MsgBox ("Alpha(i)= " & Alpha(i))
    MsgBox ("AlphaVector(i)= " & AlphaVector(i))
Next i
FindMin = WorksheetFunction.Min(Alpha)
End Function 
```

你能告诉我如何解决吗？另外，如果有更高效的写法，也许不介绍Alpha，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:16:01.927

您为 array 使用了错误的索引`Alpha`。它是从零开始的，由于您使用 填充它`i`，从 1 开始，您保留`Alpha(0)`默认值，即 0。

`WorksheetFunction.Min(Alpha)`返回最小值，您现在知道它始终为 0。:-)

你需要重新设计你的函数来处理这个问题。很快就会有例子。

**编辑 - 代码示例 - 更新为作为 UDF 工作**

我在看到您的评论之前完成了这个示例，所以在我的代码`AlphaVector`中是一个数组。无论如何，最好显式声明任何变量并尽可能避免使用该`Variant`类型，如果您不声明变量则使用该类型。这就是我使用`Option Explicit`. 你也应该。:-)

可能有很多方法可以做你想做的事，但这是其中之一：

```
Option Explicit

Function FindMin(AlphaVector)
    Dim iNew As Integer, i As Integer
    Dim iCount As Integer
    Dim Alpha() As Variant

    iCount = AlphaVector.Cells.Count

    '***** Use size of AlphaVector
    ReDim Alpha(0 To iCount - 1)
    iNew = 0

    For i = 1 To iCount
        '***** Only save values greater than 0
        If AlphaVector(i) > 0 Then
            Alpha(iNew) = AlphaVector(i)
            '***** Keep track of how many values you save
            iNew = iNew + 1
        End If
    Next i

    '***** Remove any empty items in the Alpha array
    ReDim Preserve Alpha(0 To iNew - 1)

    '***** Reture result of the Min function
    FindMin = WorksheetFunction.Min(Alpha)
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T18:49:38.000

仅供参考，您可以使用数组函数在 Excel 中的单个单元格中执行此操作。如果您的示例数字在 A1:A6 中，请使用

```
 =MIN(IF(A1:A6<=0,"",A1:A6)) 
```

但请确保输入它`Ctrl-Shift-Enter`以使其成为数组公式。不需要 VBA。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:17:43.577

这里的问题是如何设置`Alpha`变量数组的维度。在您的代码中，我假设您的模块没有`Option Base 1`声明。结果，`Alpha`具有维度`Alpha(0 to 6)`并且因为它是一个`Double`数组，所以第一个零元素默认为 0。简单的更改是将代码更改为：

```
ReDim Alpha(1 to N) As Double 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:58:10.510

您可以更改为以下内容，更简洁：

```
 Function FindMinUpdated(AlphaVector As Range)

Dim cell As Range
Dim lowValCell As Double

```
lowValCell = Abs(AlphaVector(1))

For Each cell In AlphaVector

    lowValCell = IIf(cell < lowValCell And cell > 0, cell, lowValCell)

Next cell 
```

FindMinUpdated = lowValCell

End Function 
```

# html - 如何使用 Bootstrap 和 960.gs 分离样式和 html

> ID：13383213
> 
> 赞同：2
> 
> 时间：2012-11-14T16:42:25.730
> 
> 标签：html, css, twitter-bootstrap, sass, 960.gs

我开始使用 Bootstrap，我非常沮丧！而且我也使用 Rails，所以我的理念是尽可能多地组织 Web 实体。

我要谈谈 Bootstrap*网格*。

Bootstrap 使我们能够使用它们的类将我们的 div 放置在网格中。在我的站点中，我有侧边栏和多个嵌套网格对象。我经常使用缩进（haml - 但我也缩进普通 HTML）和 Bootstrap 方式。这是一个例子：

```
 <div class="row">

            <div class="span5">

                <div class="row">
                    <div class="span2">
                        <p>
                            hohohohohohoho
                        </p>
                    </div>
                    <div class="span3"> .... 
```

在这里，我有 4 个类仅用于定位。

换句话说，我的观点不再干净......它们充满了引导类，这些引导类实际上仅用于样式设置。如果我决定改变网格系统，那么我将不得不改变我所有的观点！（恶梦）。这让我们回到了内联样式时代......

因为这是一个我们提问的论坛，所以这是我的问题：

*我可以在不丑化我的观点的情况下享受引导网格（或 960.gs 网格）的好处吗？* 换句话说，我能以某种方式将所有这些样式嵌入到我的 css 中而不显着改变我的 html 吗？

就像是：

```
side-bar{
    color:red;
    span:span_5;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:59:28.530

使用 SASS[1] 或 LESS[2]（或手写笔，或任何其他 CSS 预处理器）

[1] - [http://sass-lang.com/](http://sass-lang.com/)
[2] - [http://lesscss.org/](http://lesscss.org/)

它将完全允许您这样做。网上有很多关于如何用预处理器加星的教程，这对你有很大帮助。您可以在此处阅读预处理器简介（在这种情况下为 LESS）：http: [//coding.smashingmagazine.com/2011/09/09/an-introduction-to-less-and-comparison-to-sass/](http://coding.smashingmagazine.com/2011/09/09/an-introduction-to-less-and-comparison-to-sass/)

* * *

此外，在我看来，css/html 的完全分离是一个神话。你很少做“改变网格系统”之类的事情，你很少只通过改变 CSS 来重新设计，你总是不得不改变 HTML。

# java - JSP中字符串变量中的单引号转义

> ID：13383221
> 
> 赞同：1
> 
> 时间：2012-11-14T16:43:00.097
> 
> 标签：java, jsp, double-quotes

我们已经决定不再为我们的代码设置严格的引号转义为 false，但在我们这样做之前，我们将经历并修复所有 JSP 严格的引号转义问题。

通常我们在引号内有一行引号，最简单的解决方法是使外部引号单而不是双引号。不过，我今天遇到了这一部分：

```
url="<%= "javascript:deleteFromHistory('" + personStatus.getId() + "');" %>" 
```

在外面粘贴单引号不起作用，因为在双引号内的双引号内有单引号。

所以我尝试将内部引用的内容粘贴到一个字符串变量中并使用它，它似乎编译得很好，但是由于我不确定这个页面在我们的产品中的什么位置以及我对如何测试这些东西的知识有限，我不确定这个解决方案是否真的有效，或者字符串变量中的单引号是否也需要转义。

```
String link = "javascript:deleteFromHistory('" + personStatus.getId() + "');";
....
....
<td....><ia:btn.... url ="<%=link%>".... 
```

这个解决方案会起作用吗？如果没有，处理这个问题的合适方法是什么？

我不想只是假设我做对了，因为它编译了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:40:50.563

我还可以在我可以测试的页面上找到另一个示例。问题中提供的解决方案确实适用于 JSP 中的三引号问题。

# c - 按值传递和返回结构（带有数组成员）

> ID：13383224
> 
> 赞同：3
> 
> 时间：2012-11-14T16:43:12.480
> 
> 标签：c, arrays, return, structure, pass-by-value

我知道在 C 中，您可以按值传递（或返回）结构，但不能按值传递数组。当结构包含数组时会发生什么？当结构按值传递（或返回）时，数组（在结构内）是否会被复制？我[在 ideone.com 上运行了一个示例，](http://ideone.com/oeu0Kq)它可以工作，但我想知道标准中的哪个位置（是的，我已经看过了）。

[http://open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf](http://open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)

```
typedef struct
{
    float aValue;
    int anArray[5];
} myStruct;

myStruct addValueToArray(myStruct in)
{
    myStruct out = in;

    int i;
    for (i = 0; i < 5; i++)
    {
        out.anArray[i] = in.anArray[i] + in.aValue;
    }

    return out;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:46:33.430

是的，它会被复制。整个结构是一个值，所以它可以传递给一个函数，返回，并且（许多人似乎忘记了这一点，但你使用它，很好！）分配。

*请注意，不需要*复制可能存在的任何填充，这使得它可以`=`比手动调用*更快*`memcpy()`，因为它永远无法做到这一点。

很难在 PDF 中找到一个支持这一点的地方，但我在寻找方面并不是很有经验。基本上，`struct`实例是 C 意义上的“值”，所以大部分讨论只是自动涵盖`struct`s。

像：

> （6.2.5，第 1 部分）存储在对象中或由函数返回的值的含义取决于用于访问它的表达式的类型。
> 
> （6.2.5，第 20 部分）结构类型描述了一组顺序分配的非空成员对象（并且在某些情况下，是一个不完整的数组），每个对象都有一个可选的指定名称和可能的不同类型。
> 
> （6.8.6.4，第 3 部分）如果执行带有表达式的 return 语句，则表达式的值作为函数调用表达式的值返回给调用者。

# asp.net-web-api - Ninject 3 - BeginBlock() 是否覆盖 asp.net WebAPI 中的 InRequestScope？

> ID：13383228
> 
> 赞同：5
> 
> 时间：2012-11-14T16:43:25.897
> 
> 标签：asp.net-web-api, ninject, ninject.web

我的 asp.net WebApi 项目由服务、核心和数据访问的多个程序集组成。为了在项目中使用 Ninject 作为我的 DI 容器，我从 NuGet 添加了 Ninject.Web.Common 包。然后，我将 IDependencyResolver 实现为：

```
public class NinjectDependencyResolver : NinjectDependencyScope, IDependencyResolver
{
    readonly IKernel kernel;

    public NinjectDependencyResolver(IKernel kernel) : base(kernel)
    {
        this.kernel = kernel;
    }

    public IDependencyScope BeginScope()
    {
        return new NinjectDependencyScope(this.kernel.BeginBlock());
    }
}

public class NinjectDependencyScope : IDependencyScope
{
    IResolutionRoot resolver;

    public NinjectDependencyScope(IResolutionRoot resolver)
    {
        this.resolver = resolver;
    }

    public object GetService(System.Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has been disposed");

        var resolved = this.resolver.Get(serviceType);
        return resolved;
    }

    public System.Collections.Generic.IEnumerable<object> GetServices(System.Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has been disposed");

        return this.resolver.GetAll(serviceType);
    }

    public void Dispose()
    {
        IDisposable disposable = resolver as IDisposable;
        if (disposable != null)
            disposable.Dispose();

        resolver = null;
    }
} 
```

这是我的 Ninject.Web.Common.cs。

```
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
        RegisterServices(kernel);

        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind(x =>
            x.FromAssembliesMatching("WebApiTest.DataAccess.dll")
            .SelectAllClasses()
            .BindAllInterfaces()
            .Configure(config => config.InRequestScope()));

        kernel.Bind(x =>
            x.FromAssembliesMatching("WebApiTest.*.dll")
            .SelectAllClasses()
            .BindAllInterfaces()
            .Configure(config => config.InTransientScope()));
    }        
} 
```

**我的问题是关于 NinjectDependencyResolver -> BeginScope() 方法中的代码：** return new NinjectDependencyScope(this.kernel.BeginBlock());

我想让我的存储库（在 WebApiTest.DataAccess.dll 中实现）成为请求范围。我从 Nate Kohari 那里看到了这篇[文章。](http://kohari.org/2009/03/06/cache-and-collect-lifecycle-management-in-ninject-20/)我意识到这篇文章很旧，但关于激活块的描述让我想知道这是否仍然是当前的实现。

> 在 Ninject2 中还有最后一种处理作用域的方法，即通过激活块。块是>一种覆盖在绑定上声明的范围的方法，而是将>激活的实例与块本身相关联。...

那么，**我的存储库的实际范围是什么？**

另外，在我看来，使用 BeginBlock() 是可选的，但是当我删除它时，对 Controller 的第一次调用成功，但任何后续调用都会引发异常：

> Ninject component ICache 内核的组件容器中没有注册过这样的组件

为什么？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T15:48:48.047

现在使用这个 [NinjectDependencyResolver](https://github.com/ninject/Ninject.Web.WebApi/blob/master/src/Ninject.Web.WebApi/NinjectDependencyResolver.cs)和这个[NinjectDependencyScope](https://github.com/ninject/Ninject.Web.WebApi/blob/master/src/Ninject.Web.WebApi/NinjectDependencyScope.cs)实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:07:24.817

为了在请求范围内使用依赖项，不要使用 Ninject 设置它们，`InRequestScope()`而是使用`GetDependencyScope()`

我整理了一篇关于[http://www.strathweb.com/2012/11/asp-net-web-api-and-dependencies-in-request-scope/的博客文章](http://www.strathweb.com/2012/11/asp-net-web-api-and-dependencies-in-request-scope/)

# asp.net-mvc-3 - MVC 3 RAZOR - @model IEnumerable - 如何获得特定值

> ID：13383231
> 
> 赞同：1
> 
> 时间：2012-11-14T16:43:28.300
> 
> 标签：asp.net-mvc-3, razor, ienumerable

在我看来，我正在使用：

```
@model IEnumerable<UserManager.Models.vw_UserManager_Model> 
```

因为我正在使用 webgrid 和我的模型在我的页面上创建一个网格。我也试图从我的模型中得到一个特定的值：

```
<input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("FilterGrid", "UserManager", new { filterVal = Model.Single(model => model.alfIntelligence) })')" id="chkboxGridFilter" /> 
```

我不知道如何从使用 IEnumerable 的对象中获取值。有谁知道调用模型的正确方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:47:16.933

你可以试试`FirstOrDefault()`

```
var someValue = Model.FirstOrDefault().alfIntelligence; 
```

然后在你想要的地方使用这个变量。

如果您可以向我提供更多详细信息，`vw_UserManager_Model`我认为我可以为您提供更好的答案，但我认为这应该为您服务。

# php - SQL 语法；....在第 1 行的 ') VALUES ( )' 附近使用正确的语法

> ID：13383235
> 
> 赞同：-6
> 
> 时间：2012-11-14T16:43:48.103
> 
> 标签：php, mysql

我在尝试打开表单时遇到了他的错误。

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ') VALUES ( )' 附近使用正确的语法

这是文件

```
<?php
 $con = mysql_connect("localhost","*********","**************");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("**********", $con);

    $sql = "INSERT INTO pc_owner (pcname,pcphone,pccellphone,pcworkphone,pcmake,pcemail,pcaddress,pcaddress2,pcstate,pccity,pczip,pcram,pcproc,pchd,pcserial,pcextra,pcgroupid,custsourceid,prefcontact,pcnotes,)
VALUES (
$_POST[pcname]
$_POST[pcaddress]
$_POST[pcaddress2]
$_POST[pcstate]
$_POST[pccity]
$_POST[pczip]
$_POST[pccellphone] 
$_POST[pcphone]
$_POST[pcworkphone]
$_POST[pcemail]
$_POST[pcmake]
$_POST[pcram]
$_POST[pcproc]
$_POST[pchd]
$_POST[pcserial]
$_POST[pcextra]
$_POST[pcgroupid]
$_POST[prefcontact]
$_POST[pcnotes]
$_POST[custsourceid])";
    if (!mysql_query($sql,$con))
    {
    die('Error: ' . mysql_error());
    }
    $last_insert_pcid = mysql_insert_id();

    $sql = "INSERT INTO pc_wo (pcid, probdesc, virusesfound, custnotes, technotes, dropdate, pickupdate, readydate, pcstatus, called, thepass, custassets, bench, workarea, pcpriority, cityuser, cobyuser, commonproblems, storeid, thesig, assigneduser) VALUES ('$last_insert_pcid','NULL','$_POST[woid]','$_POST[pcid]','$_POST[probdesc]','$_POST[virusesfound]','$_POST[custnotes]','$_POST[technotes]','$_POST[dropdate]','$_POST[pickupdate]','$_POST[readydate]','$_POST[pcstatus]','$_POST[pcstatus]','$_POST[called]','$_POST[thepass]','$_POST[custassets]','$_POST[bench]','$_POST[workarea]','$_POST[pcpriority]','$_POST[cibyuser]','$_POST[cobyuser]','$_POST[commonproblems]','$_POST[storeid]','$_POST[thesig]','$_POST[assigneduser]')";
    if (!mysql_query($sql,$con))
    {
    die('Error: ' . mysql_error());
    }
    $last_insert_woid = mysql_insert_id();

    $result = mysql_query("SELECT * FROM pc_owner WHERE pcid='$last_insert_pcid'");

    $result1 = mysql_query("SELECT * FROM pc_wo WHERE woid='$last_insert_woid'");
    echo "<table border='1'>
    <tr>
    <th>Computer id</th>
    <th>Name</th>
    <th>Phone Number</th>
    <th>Mobile</th>
    <th>Work</th>
    <th>Email</th>
    <th>Address</th>
    <th>Second Line</th>
    <th>State</th>
    <th>City</th>
    <th>Postal Code</th>
    <th>WorkOrder Id</th>
    <th>PC Id</th>
    <th>Pc make</th>
    <th>probdes</th>
    <th>virusesfound</th>
    <th>Ram</th>
    <th>pcprod</th>
    <th>HDD</th>
    <th>Pc Serial No</th>
    <th>Pc Extra</th>
    <th>Pc Note</th>
    <th>custnotes</th>
    <th>technotes</th>
    <th>dropdate</th>
    <th>pickupdate</th>
    <th>readydate</th>
    <th>pcstatus</th>
    <th>called</th>
    <th>thepass</th>
    <th>custassets</th>
    <th>bench</th>
    <th>workarea</th>
    <th>pcpriorty</th>
    <th>Checked in by</th>
    <th>Checked out by</th>
    <th>Common Problems</th>
    <th>Store Id</th>
    <th>Assigned User</th>
    </tr>";
    while($row = mysql_fetch_array($result))
    {
    echo "<tr>";
    echo "<td>" . $row['pcid'] . "</td>";
    echo "<td>" . $row['pcname'] . "</td>";
    echo "<td>" . $row['pcphone'] . "</td>";
    echo "<td>" .$row['pccellphone'] . "</td>";
    echo "<td>" .$row['pcworkphone'] . "</td>";
    echo "<td>" .$row['pcemail'] . "</td>";
    echo "<td>" .$row['pcaddress'] . "</td>";
    echo "<td>" .$row['pcaddress2'] . "</td>";
    echo "<td>" .$row['pcstate'] . "</td>";
    echo "<td>" .$row['pccity'] . "</td>";
    echo "<td>" .$row['pczip'] . "</td>";
    }
    //considering these are the values returned by 1st query (ie., table client)
    while($row = mysql_fetch_array($result1)) {

    echo "<td>" .$row['woid'] . "</td>";
    echo "<td>" .$row['pcid'] . "</td>";
    echo "<td>" .$row['pcmake'] . "</td>";
    echo "<td>" .$row['pcprobdesc'] . "</td>";
    echo "<td>" .$row['virusesfound'] . "</td>";
    echo "<td>" .$row['pcram'] . "</td>";
    echo "<td>" .$row['pcproc'] . "</td>";
    echo "<td>" .$row['pchd'] . "</td>";
    echo "<td>" .$row['pcserial'] . "</td>";
    echo "<td>" .$row['pcextra'] . "</td>";
    echo "<td>" .$row['pcnotes'] . "</td>";
    echo "<td>" .$row['custnotes'] . "</td>";
    echo "<td>" .$row['technotes'] . "</td>";
    echo "<td>" .$row['dropdate'] . "</td>";
    echo "<td>" .$row['pickupdate'] . "</td>";
    echo "<td>" .$row['readydate'] . "</td>";
    echo "<td>" .$row['pcstatus'] . "</td>";
    echo "<td>" .$row['called'] . "</td>";
    echo "<td>" .$row['thepass'] . "</td>";
    echo "<td>" .$row['custassets'] . "</td>";
    echo "<td>" .$row['bench'] . "</td>";
    echo "<td>" .$row['workarea'] . "</td>";
    echo "<td>" .$row['pcpriority'] . "</td>";
    echo "<td>" .$row['cibyuser'] . "</td>";
    echo "<td>" .$row['cobyuser'] . "</td>";
    echo "<td>" .$row['commonproblems'] . "</td>";
    echo "<td>" .$row['storeid'] . "</td>";
    echo "<td>" .$row['thesig'] . "</td>";
    echo "<td>" .$row['assigneduser'] . "</td>";
    echo "</tr>";
    }
    echo "</table>";
    echo "woid is complete";
    print "Thank you for booking with us and your Repair ID number is ".$last_insert_woid;
    mysql_close($con);
    ?> 
```

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:44:38.083

去掉逗号

```
... prefcontact,pcnotes,) VALUES ...
                       ^----------here 
```

你需要逗号来分隔你的价值观。

### 并且您永远不应该使用您的输入数据将其放入您的数据库中而不转义它。

了解[如何防止 SQL 注入](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:46:13.197

3件事，从这里删除多余的逗号`$sql = "INSERT INTO pc_owner (pcname,pcphone,pccellphone,pcworkphone,pcmake,pcemail,pcaddress,pcaddress2,pcstate,pccity,pczip,pcram,pcproc,pchd,pcserial,pcextra,pcgroupid,custsourceid,prefcontact,pcnotes,)`

并且您需要用引号将值括起来`'`，后跟逗号，例如`VALUES ('$_POST[pcname]','$_POST[pcaddress]', ....)"`;

# javascript - 找出for循环javascript中的第四个数字？

> ID：13383238
> 
> 赞同：-2
> 
> 时间：2012-11-14T16:43:57.147
> 
> 标签：javascript

我有这个小 javascript 代码，它循环十二次显示数字 col，但同时我想控制台“新行”，每次它遇到第四个元素时：

JS：

```
for(var col= 0; col < 12; col++){
    if((col + 1) % 4 === 0)
      console.log("New Row");

    console.log(col)
} 
```

这似乎不起作用，它在第三个元素上控制台“新行”，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:47:34.113

您的代码在第四个元素上输出“新行”。唯一的区别是 col 从零开始：

```
0 <-- first element
1 <-- second element
2 <-- third element
"New Row" <-- fourth element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:45:58.270

```
for(var col= 0; col <= 12; col++){
    if(col % 4 == 0 && col != 0) { // col != 0 to not write "New Row" for first row, if you want on first row remove that condition
      console.log("New Row");
    }

    console.log(col)
} 
```

在第 4、8 和 12 行上，它输出“新行”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:46:08.287

`col`当is时，它将记录“新行” `3`。

这实际上是循环的第 4 次迭代，第一次`col`是`0`.

您也可以直接检查`col`是否等于 3：

```
col === 3 
```

代替：

```
(col + 1) % 4 === 0 
```

# wordpress - Wordpress，字体看起来很丑

> ID：13383241
> 
> 赞同：0
> 
> 时间：2012-11-14T16:44:13.627
> 
> 标签：wordpress, fonts

我遇到了一些字体问题，它确实影响了许多不同的字体。

我将添加一张图片来解释问题。

字体可以在**[这里看到](http://tordenfryd.com)**

Futura 用于第一篇文章的标题。

![在此处输入图像描述](../Images/97ce2ceadfd93bb5d151d93df5669ac1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:51:35.517

你用的是谷歌字体吗？我和他们的成绩很差。我不确定您的主题是如何设置字体的，但您可以尝试切换服务。或者将字体上传到您的服务器并使用[@font-face](http://www.font-face.com/)

在你的 CSS 中看起来像这样：

```
@font-face {
    font-family: Futura;
    src: url(http://www.font-face.com/fonts/futura/Futura.ttf);
    font-weight:400;
}

h1{
    font-family: Futura, sans-serif;
} 
```

# php - 具有多个日期范围的 MySQL

> ID：13383242
> 
> 赞同：0
> 
> 时间：2012-11-14T16:44:13.337
> 
> 标签：php, mysql

我目前的查询：

```
 Select `userSubUnitsID`, `userSubUnits`.`userID`, CONCAT(`u`.`fname`,' ',`u`.`lname`) AS `full`, `pID`, SUM(`quantComp`) AS `total`
    From `userSubUnits`
    JOIN `u` ON `u`.`userID` = `userSubUnits`.`userID`
    GROUP BY `userID` 
```

我需要的是在约会之前得到这个。所以它看起来更像这样。

```
 +-----+------------+----------+-------------+
    |user |current week|prev week |two weeks ago|
    +-----+------------+----------+-------------+
    |John |         564|       354|          687|
    +-----+------------+----------+-------------+
    |Paul |         451|       328|          845|
    +-----+------------+----------+-------------+
    etc 
```

这可以通过单个查询来实现吗？我知道如何在本周限制它，但不知道如何在前几周添加。

仅供参考，星期天午夜结束。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:55:36.320

```
SELECT user, SUM(WEEKOFYEAR(datefield) = WEEKOFYEAR(now()) AS current_week,
    SUM(WEEKOFYEAR(datefield) = WEEKOFYEAR(now() - INTERVAL 1 WEEK)) AS last_week,
    SUM(WEEKOFYEAR(datefield) = WEEKOFYEAR(now() - INTERVAL 2 WEEK)) AS two_weeks_ago
FROM ...
GROUP BY WEEKOFYEAR(now()) 
```

丑陋，但应该做的伎俩。请注意，如果您的日期跨越一年边界，这将失败。为了解决这个问题，您必须添加一些额外的基于年份的逻辑。

同样，您最好在客户端进行这种转换。扩展是丑陋的，如果你需要开始做的不仅仅是几个星期，它很快就会变得非常低效，例如：

```
SELECT user, YEAR(datefield), WEEKOFYEAR(datefield), COUNT(*)
FROM ...
GROUP BY YEAR(datefield), WEEKOFYEAR(datefield) 
```

# python - 使用格式说明符的 Python 中心字符串

> ID：13383244
> 
> 赞同：28
> 
> 时间：2012-11-14T16:44:18.610
> 
> 标签：python, python-3.x, formatting, string-formatting, python-3.2

我有一个名为`message`.

```
message = "Hello, welcome!\nThis is some text that should be centered!" 
```

我正在尝试使用以下语句将其置于默认终端窗口的中心，即 80 宽度：

```
print('{:^80}'.format(message)) 
```

哪个打印：

```
 Hello, welcome!
This is some text that should be centered! 
```

我期待类似的东西：

```
 Hello, welcome!                                 
                   This is some text that should be centered! 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-14T17:00:21.470

您需要将每条线分别居中：

```
'\n'.join('{:^80}'.format(s) for s in message.split('\n')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-27T13:45:56.873

这是一个替代方案，它将根据最长宽度自动居中您的文本。

```
def centerify(text, width=-1):
  lines = text.split('\n')
  width = max(map(len, lines)) if width == -1 else width
  return '\n'.join(line.center(width) for line in lines)

print(centerify("Hello, welcome!\nThis is some text that should be centered!"))
print(centerify("Hello, welcome!\nThis is some text that should be centered!", 80)) 
```

```
<script src="//repl.it/embed/IUUa/4.js"></script>
```

# php - Textarea 的换行符是什么？

> ID：13383245
> 
> 赞同：1
> 
> 时间：2012-11-14T16:44:19.780
> 
> 标签：php, html, textarea, newline

> **可能重复：**
> [php :: textarea 中的新行？](https://stackoverflow.com/questions/3911261/php-new-line-in-textarea)

我需要做的就是在文本区域中跳过一行，我似乎无法弄清楚。

```
<textarea>
<?php echo $to;?>
new line character should be here
<?php echo $message?>
</textarea> 
```

我读过的所有东西（很多）都给出了详尽的解释，没有字面答案。有性格吗？如果是，角色是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:46:41.240

```
<textarea>
<?php echo "\n" ?>
</textarea> 
```

确保使用双引号`echo`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:54:43.083

尝试这个：

```
<textarea cols="50" rows="5" id="tweet">
<?php echo "$to \n\r $message"; ?>
</textarea> 
```

# c# - 无法加载程序集。. Interop.Word 版本 14.0.0.0

> ID：13383250
> 
> 赞同：2
> 
> 时间：2012-11-14T16:44:34.573
> 
> 标签：c#, winforms, interop

我有一个用 C# 编写的 WinForms 应用程序，它会在 Word 中自动生成字母。该应用程序适用于安装了 Office 2010 的客户端计算机，但不适用于安装了 Office 2007 的那些计算机，相反，我收到以下错误消息 -

```
could not load file or assembly 'Microsoft.Office.Interop.Word version=14.0.0 
```

我怀疑我需要添加对旧版本 Interop.Word 的引用，例如 version=12，但在可通过 Visual Studio 获得的引用列表中没有这样的选项。

我是否需要较旧的参考资料？如果可以，我在哪里可以找到它？

或者，如果我还有其他需要考虑的事情，请告知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:45:29.710

请注意，.NET 框架 4.0 支持嵌入式主互操作程序集 (PIA)。您可以通过将“嵌入互操作类型”设置为“真”来在 Microsoft.Office.Interop.Word 参考上启用它。
有关这方面的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/dd997297(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd997297(v=vs.100).aspx)。

支持多个 Office 版本的另一种方法是使用这样的库：http: [//netoffice.codeplex.com/](http://netoffice.codeplex.com/)
该库通过 COM 互操作使用后期绑定调用，根本不需要使用主互操作程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:53:49.640

是的，您应该参考 2007 PIA，因为它们适用于 Office 2007 和 Office 2010。通常，您应该参考您将支持的最旧版本的 Office 的 PIA。

[您可以从此处](http://www.microsoft.com/en-us/download/details.aspx?id=18346)下载 Office 2007 PIA

来自[MSDN](http://msdn.microsoft.com/en-us/library/15s06t57.aspx)：

> 在全局程序集缓存中安装和注册 Office PIA（使用 Office 或通过安装 PIA 的可再发行包）时，绑定重定向程序集也仅安装​​在全局程序集缓存中。这些程序集有助于确保在运行时加载正确版本的主互操作程序集。例如，当引用 2007 Microsoft Office 主互操作程序集的解决方案在具有相同主互操作程序集的 Microsoft Office 2010 版本的计算机上运行时，绑定重定向程序集指示 .NET Framework 运行时加载 Microsoft Office 2010 版本的主要互操作程序集。

# python - Python中字典的自定义排序？

> ID：13383251
> 
> 赞同：1
> 
> 时间：2012-11-14T16:44:36.347
> 
> 标签：python, python-2.6

我想对我在嵌套循环中生成的字典进行自定义排序。我知道五条记录将永远存在，但根据我浏览的数据可能还有其他记录。我本质上希望这五条记录按特定顺序排列，然后顺序对于这五条之后的所有记录都无关紧要。

例如，我想要这个：

```
{"Entries": [], "Groups": [], "Admin": [], "Network": [], "XYZ": [], "Subnets": []} 
```

排序为：

```
{"Admin": [], "Groups": [], "Network": [], "Subnets": [], "Entries": [], "XYZ": []} 
```

因此，Admin、Groups、Network、Subnets 和 Entries 是我想要在字典开头按特定顺序排列的五个，之后其余条目的顺序无关紧要。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:49:32.963

你需要[collections.OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict) ……

因此，基于此，解决方案类似于：

```
def custom_order(dct, spec):
    """
    dct - the dictionary
    spec - a list of dedicated keys
    """
    res = collections.OrderedDict()
    dct = dict(dct)
    for key in spec:
        if key in dct:
            res[key] = dct.pop(key)
    res.update(dct.items())
    return res 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T16:56:48.773

你首先需要

*   通过获取项目列表创建（键，值）对列表
*   自定义排序生成的列表
*   根据排序结果创建 OrderedDict

这是一个示例，我根据键的长度对数据进行排序

```
>>> from collections import OrderedDict
>>> some_dict = {"Entries": [], "Groups": [], "Admin": [], "Network": [], "XYZ": [], "Subnets": []}
>>> some_dict = OrderedDict(sorted(some_dict.items(),key = lambda e:len(e[0])))
>>> some_dict
OrderedDict([('XYZ', []), ('Admin', []), ('Groups', []), ('Subnets', []), ('Network', []), ('Entries', [])]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:52:48.243

将数据存储为对列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:34:48.213

我重新考虑了如何处理整个情况，并找到了一种适合我的方法。

使用如下数据集：

```
{"Entries": [], "Groups": [], "Admin": [], "Network": [], "XYZ": [], "Subnets": []} 
```

我只是执行以下操作，这对我来说很好：

```
for menu in ["Admin", "Groups", "Network", "Subnets", "Entries"]:
    try:
        doWork(my_dataset[menu])
        del my_dataset[menu]
    except KeyError:
        # The user might not have any entries for that menu, so don't worry about it
        pass
for menu in my_dataset.keys():
    doWork(my_dataset[menu]) 
```

所以基本上，对这五个项目做我需要做的事情，然后从数据集中删除它们。我很乐意这样做，因为在这段代码之后我没有使用所述数据集。在我处理完剩下的那些之后，我不会删除它们，因为那是不必要的。垃圾回收只会在函数完成后吹走整个数据集，对吧？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-29T20:14:18.303

我遇到了完全相同的问题，并设计了一个轻量级的通用解决方案：

```
from collections import OrderedDict

def make_custom_sort(orders):
    orders = [{k: -i for (i, k) in enumerate(reversed(order), 1)} for order in orders]
    def process(stuff):
        if isinstance(stuff, dict):
            l = [(k, process(v)) for (k, v) in stuff.items()]
            keys = set(stuff)
            for order in orders:
                if keys.issuperset(order):
                    return OrderedDict(sorted(l, key=lambda x: order.get(x[0], 0)))
            return OrderedDict(sorted(l))
        if isinstance(stuff, list):
            return [process(x) for x in stuff]
        return stuff
    return process 
```

首先，您创建一个自定义顺序排序函数的实例：

```
custom_sort = make_custom_sort([ ["Admin", "Groups", "Network", "Subnets", "Entries"] ]) 
```

现在，实际排序：

```
result = custom_sort(my_dataset) 
```

丢失的键最终以未指定的顺序被拒绝。请注意，此闭包是递归的。如双括号所示，您可以指定嵌套在结构中的各种字典所需的排序顺序。

GitHub上的项目：[https ://github.com/laowantong/customsort](https://github.com/laowantong/customsort)

# class - 子类与包装器 - 带有附加参数的构造函数

> ID：13383254
> 
> 赞同：1
> 
> 时间：2012-11-14T16:44:46.657
> 
> 标签：class, parameters, constructor, subclass, wrapper

在尝试添加带有附加参数的构造函数时，通常认为哪种方法更受欢迎？子类还是包装器？也就是说，创建该类的子类，然后只使用该子类的构造函数？或者添加一个包装方法，该方法将采用额外的参数并返回具有该参数集的对象？

感谢您的时间！

编辑：

我无权访问超类的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:49:45.943

答案取决于语言。在 C#/.NET 中，您通常会使用重载的构造函数：

```
public class Foo 
{
   private readonly string _greeting;

   public Foo() : this("Hello") { }

   public Foo(string greeting) {
     _greeting = greeting;
   } 

   //...
} 
```

# ruby-on-rails - 使用 to_json 在 Rails REST API 中自定义 json 输出

> ID：13383258
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:44:59.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, api, rest

我是第一次开发一个简单的 API。我有这样的模型`publisher has_many products`和`products belongs_to publisher`。目前我正在显示所有产品，包括他们的每个发布者详细信息。现在我希望将发布者详细信息作为单独的资源（我不想在第一个请求中显示发布者详细信息），换句话说，在 json 输出中具有一个属性将带有发布者详细信息的链接。我该怎么做？另外，如果有人有你过去做过的更复杂的 API 开发示例代码，请与我分享，因为我正在努力学习更多。非常感谢. 这就是我所拥有的。

产品控制器

```
 respond_to :json, :xml
 def index
 @products=Product.paginate(:page=>params[:page],:per_page => params[:per_page]).all(:include =>  :publisher)
  respond_to do |format|
  format.json { render json: @products.to_json(
    :include=>:publisher) }
  format.xml
   end
   end 
```

json输出

```
 [

 {
    "category_id": null,
    "created_at": "2011-03-25T13:35:16Z",
    "details": "Molestias pariatur consequuntur ut voluptas aperiam facere et et autem ad laudantium ut qui dolorem iste sit ut in dignissimos. Et debitis et et sunt quidem qui est est et",
    "id": 1,
    "product_name": "Velit",
    "publisher_id": 1,
    "updated_at": "2012-11-12T18:45:13Z",
    "publisher": {
        "created_at": "2012-11-12T18:45:13Z",
        "email": "ibrahim@greenholt.net",
        "id": 1,
        "password": "Madelyn Parker",
        "password_confirmation": null,
        "publisher_id": null,
        "updated_at": "2012-11-12T18:45:13Z"
    }
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:54:25.690

[https://github.com/josevalim/active_model_serializers](https://github.com/josevalim/active_model_serializers)是一个流行的项目，用于自定义 activemodel 对象的序列化

# ios - Apple 开源和 CocoaTouch 类？

> ID：13383259
> 
> 赞同：1
> 
> 时间：2012-11-14T16:45:06.260
> 
> 标签：ios, cocoa-touch, open-source

我只是想验证这一点，以确保我没有犯愚蠢的错误。

Apple 是否为开源提供任何 CocoaTouch 类？我检查了[opensource.apple.com](http://opensource.apple.com)，但没有看到任何内容。[http://www.google.com/#q=nsuuid+site:opensource.apple.com](http://www.google.com/#q=nsuuid+site:opensource.apple.com)。

我对 iOS 5 和更低版本的 NSUUID 类（它在 iOS 6 中可用）感兴趣，并且很乐意复制/粘贴它而不是自己滚动它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T01:41:11.843

不，这不会是开源的。

但是您不需要自己动手，因为您可以直接使用[CFUUIDRef](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFUUIDRef/Reference/reference.html)

# javascript - 使用蓝牙键盘时隐藏移动 Safari 键盘。

> ID：13383261
> 
> 赞同：0
> 
> 时间：2012-11-14T16:45:14.853
> 
> 标签：javascript, iphone, html, ios, ipad

我正在使用蓝牙键盘在 safari 的表单上输入内容，但是......如何在连接蓝牙时隐藏键盘......同时打开两个键盘没有意义。

我有权更改我需要执行此操作的网站的 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:48:10.637

嘿，据我所知，总是显示移动 Safari 键盘。因此，将显示蓝牙键盘以及默认键盘。您只能通过更改软件来隐藏键盘。但是，可以通过越狱调整来实现；只有当你准备好这样做的时候。

-InfiniDaZa

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:50:28.560

我在 ipad 上测试了 iOS 6.0。没有这样的问题。单击表单时不显示键盘，例如登录 google。它只在底部显示一个栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:48:26.203

每次开始输入表单域时都会调用键盘显示功能。除非您更改软件，否则这是您无法更改的。

# excel - excel宏突出显示列中值的第一个实例

> ID：13383272
> 
> 赞同：0
> 
> 时间：2012-11-14T16:45:44.090
> 
> 标签：excel, vba

我找到了一个突出显示重复项的宏

```
Public Sub MarkDuplicates()
    Dim iWarnColor As Integer
    Dim rng As Range
    Dim rngCell As Variant

    Set rng = Range("A1:A65000")
    iWarnColor = xlThemeColorAccent2

    For Each rngCell In rng.Cells
        vVal = rngCell.Text
        If (WorksheetFunction.CountIf(rng, vVal) = 1) Then
            rngCell.Interior.Pattern = xlNone
        Else
            rngCell.Interior.ColorIndex = iWarnColor
        End If
    Next
End Sub 
```

但我需要它来突出显示除第一个实例之外的所有重复项。也许更好的方法是突出显示唯一值的第一个实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:12:54.290

仅仅因为，这是一个与 Sean Cheshire 的代码相同的条件格式选项：

```
=COUNTIF(INDIRECT("$A$1:A" & ROW()),INDIRECT("A"&ROW()))>1 
```

编辑：

这是与列无关的条件格式方法的改进形式：

```
=COUNTIF(INDIRECT("R1C"&COLUMN()&":R"&ROW()&"C"&COLUMN(),FALSE),INDIRECT("R"&ROW()&"C"&COLUMN(),FALSE))>1 
```

编辑2：

如果您真的想使用以下代码，则将第二个条件格式应用于所有选定的单元格，将匹配的单元格字体变为红色。这可以很容易地修改为使用任何范围而不是选择。

```
Dim conditionalFormula As String
conditionalFormula = "=COUNTIF(INDIRECT(""R1C""&COLUMN()&"":R""&ROW()&""C""&COLUMN(),FALSE),INDIRECT(""R""&ROW()&""C""&COLUMN(),FALSE))>1"
With Selection.FormatConditions.Add(xlExpression, , conditionalFormula)
    .Font.ColorIndex = 3
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:19:18.493

检查当前单元格上方的范围以查看计数是否大于 1，而不是检查整个范围。

此修改也将仅运行带有数据的测试行，如果它实际上没有填充任何内容，则不会运行 65535 个单元格

```
Option Explicit

Public Sub MarkDuplicates()
Dim iWarnColor As Integer
Dim rng As Range
Dim rngCell As Variant
Dim LR As Long
Dim vVal

LR = Cells(Rows.Count, "A").End(xlUp).Row

Set rng = Range("A1:A" & LR)
iWarnColor = xlThemeColorAccent2

For Each rngCell In rng.Cells
    vVal = rngCell.Text
    If (WorksheetFunction.CountIf(Range("A2:A" & rngCell.Row), vVal) = 1) Then
        rngCell.Interior.Pattern = xlNone
    Else
        rngCell.Interior.ColorIndex = iWarnColor
    End If
Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:51:24.483

快速解决：

定义计数器

> 将 cnt 变暗为整数

将其设置为 1

> cnt = 1

为每个循环步骤添加一个

> cnt = cnt + 1

如果 cnt 等于 1，则添加语句以跳过循环语句

> if( cnt==1 ) 然后继续

# objective-c - for 循环在editingStyleForRowAtIndexPath 中只执行一次

> ID：13383276
> 
> 赞同：0
> 
> 时间：2012-11-14T16:46:05.757
> 
> 标签：objective-c, ios, for-loop, tableview

代码：

```
if(self.editing == YES)
{
    if(self.editing == YES && indexPath.section == 7 && indexPath.row == [[self pickGoalsFromAnd:0] count])
    {   
        NSLog(@"INSERT editingStyleForRowAtIndexPath.section: %d", (indexPath.section));
        return UITableViewCellEditingStyleInsert;
    }
    NSLog(@"Net voor FORLUS");
    for(int sectieId = 0; sectieId < [[self pickAnd] count]; sectieId++)
    {

        NSLog(@"Binnen FORLUS , sectieId/pickAndCount: (%d)/(%d)", sectieId, [[self pickAnd] count]);

        sectieId = sectieId + 8;
        NSLog(@"indexPath.section '==' %d '&&' indexPath.row '==' %d", sectieId , [[self pickGoalsFromAnd:(sectieId-8)] count]  );

                    if(indexPath.section == sectieId && indexPath.row < [[self pickGoalsFromAnd:(sectieId-8)] count])
                    {
                        NSLog(@"INSERT editingStyleForRowAtIndexPath.section: %d", (indexPath.section));
                    return UITableViewCellEditingStyleInsert;
                    }
                    else 
                        if(indexPath.section != ([[self pickAnd] count] + 7))
                        {
                    {
                        NSLog(@"ifELSE");
        return UITableViewCellEditingStyleDelete;
                    }
                        }
    } 
```

正如我使用 NSLogs 所看到的，for 循环只执行一次。当它“返回”某些东西时，for循环是否有可能停止？

For 循环：for(int sectieId = 0; sectieId < [[self pickAnd] count]; sectieId++)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:52:37.240

返回后，退出函数并且 lopp 中断，这就是它只执行一次的原因。

# php - __get 魔术方法 - 如何抛出和捕获属性重载的错误？

> ID：13383281
> 
> 赞同：3
> 
> 时间：2012-11-14T16:46:25.337
> 
> 标签：php, try-catch, magic-methods

我通过利用`__get`魔法方法来定义当一个不存在的属性被访问时会发生什么。

所以如果`$property->bla`不存在我会得到`null`。

```
return (isset($this->$name)) ? $this->$name : null; 
```

`$property->bla->bla`但是当我知道`$property->bla`不存在时，我想抛出并捕获错误。

我会在`return (isset($this->$name)) ? $this->$name : null;`下面得到这个错误，

```
<b>Notice</b>:  Trying to get property of non-object in... 
```

所以我`throw and catch`在课堂上使用错误，

类属性 {

```
public function __get($name)
{
    //return (isset($this->$name)) ? $this->$name : null;

    try {
        if (!isset($this->$name)) {
          throw new Exception("Property $name is not defined");
        }
        return $this->$name;
      }
      catch (Exception $e) {

        return $e->getMessage(); 
      }
} 
```

}

但结果不是我想要的，因为它`throw`是错误消息`("Property $name is not defined")`而不是`null`for `$property->bla`。

我怎样才能让它**只**为`$property->bla->bla`,`$property->bla->bla->bla`等抛出错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:57:27.470

你不能。

在`__get()`函数的范围内，你只知道`$property->blah`. 你不知道它之后会发生什么，因为那是语言的功能。

请注意对 的评估顺序`$foo = $property->blah->blah2->blah3`：

1.  `$temp1 = $property->blah;`
2.  `$temp1 = $temp1->blah2;`
3.  `$foo = $temp1->blah3;`

当然，`$temp1`这是虚构的，但这本质上是执行该语句时发生的情况。您的`__get()`呼叫只知道该列表中的第一个呼叫，仅此而已。您可以做的是处理调用方的错误，使用[`property_exists()`](http://php.net/property_exists)或检查`null`：

```
$temp = $property->blah;
if( $temp === null || !property_exists( $temp, 'blah2')) {
    throw new Exception("Bad things!");
} 
```

请注意，如果返回的对象也依赖于，`property_exists()`则会失败，但这在 OP 中并不清楚。`$temp``__get()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:49:19.170

实际上，当您调用`$property->foo->bar`并且`$property`类具有魔术 __get 方法时，您只能验证`foo`属性并仅为它抛出错误。

但是如果你`foo`也是同一个类的实例（或具有相同魔法`__get`方法的类似类），你也可以验证`bar`属性并抛出下一个错误。

例如：

```
class magicLeaf {
    protected $data;
    public function __construct($hashTree) {
        $this->data = $hashTree;
    }
    // Notice that we returning another instance of the same class with subtree
    public function __get($k) {
        if (array_key_exists($k, $this->data)) {
             throw new Exception ("Property $name is not defined");
        }
        if (is_array($this->data[$k])) { // lazy convert arrays to magicLeaf classes
            $this->data[$k] = new self($this->data[$k]);
        }
        return $this->data[$k];
    }
 } 
```

现在只是使用它的示例：

```
$property = new magicLeaf(array(
    'foo' => 'root property',
    'bar' => array(
        'yo' => 'Hi!',
        'baz' => array(
            // dummy
        ),
    ),
));
$property->foo; // should contain 'root property' string
$property->bar->yo; // "Hi!"
$property->bar->baz->wut; // should throw an Exception with "Property wut is not defined" 
```

所以现在你可以看到如何让它几乎像你想要的那样。

现在只需修改一点 your`__construct`和 magic`__get`方法并添加新参数以了解我们在每个级别的位置：

```
...
    private $crumbs;
    public function __construct($hashTree, $crumbs = array()) {
        $this->data = $hashTree;
        $this->crumbs = $crumbs;
    }
    public function __get($k) {
        if (array_key_exists($k, $this->data)) {
             $crumbs = join('->', $this->crumbs);
             throw new Exception ("Property {$crumbs}->{$name} is not defined");
        }
        if (is_array($this->data[$k])) { // lazy convert arrays to magicLeaf classes
            $this->data[$k] = new self($this->data[$k], $this->crumbs + array($k));
        }
        return $this->data[$k];
    }
... 
```

我认为它应该像你想要的那样工作。

# javascript - 调整大小的图像 jquery

> ID：13383288
> 
> 赞同：1
> 
> 时间：2012-11-14T16:46:33.167
> 
> 标签：javascript, jquery

我的 Jquery 代码有问题。我正在尝试做一个画廊。我希望当一个人单击图像时，将该图像附加到 div 并将其显示在屏幕中央。我的问题是图像大于当前屏幕尺寸。我调整图像大小以匹配屏幕大小，但是当我将它淡入 div 时它会滞后。我不知道为什么会这样，而且我敢肯定这不仅仅是因为图像很大，如果我不调整它的大小，让它离开屏幕，它就会消失得很好。的HTML：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Gallery</title>
    <link rel="stylesheet" href="Gallery.css">
</head>
<body>

<div class="gallery">
    <div class="images">
        <ul class="resize">
            <li><img src="img/img1.jpg" alt="image1"></li>
            <li><img src="img/img2.jpg" alt="image2"></li>
            <li><img src="img/img3.jpg" alt="image3"></li>
            <li><img src="img/img4.jpg" alt="image4"></li>
            <li><img src="img/img5.jpg" alt="image5"></li>
            <li><img src="img/img6.jpg" alt="image6"></li>
            <li><img src="img/img7.jpg" alt="image7"></li>
            <li><img src="img/img8.jpg" alt="image8"></li>
        </ul>
    </div>
    <div class="backgroundOpacity"></div>
    <div class="imageBox">
        <img class="displayImage" src="" alt="displayImage">
        <img class="loadingGif" src="img/loading.gif" alt="loadgindGif">
        <img class="closeImage" src="img/closeImage.png" alt="close">
        <p class="imageNumber">1</p>
    </div>
</div>

<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="Gallery.js"></script>
<script type="text/javascript">
    var content = $('.gallery'),
        gallery = new Gallery(content);
</script>

</body>
</html> 
```

的CSS：

```
*{
    margin: 0;
    padding: 0;
}
/*-------------------------gallery-----------------------*/
.gallery{
    width: 1300px;
    margin: 100px auto 0;
};
/*------------------------------------------------*/
/*-------------------------images-----------------------*/
.images{
    width: inherit;
    height: inherit;
}
.images li{
    list-style-type: none;
    float: left;
    margin: 0 20px 20px 0;
    width: 300px;
    height: 150px;
    cursor: pointer;
}
.resize img{
    width: inherit;
    height: inherit;
}
/*------------------------------------------------*/
/*-------------------------imageBox-----------------------*/
.imageBox{
    background-color: white;
    clear: both;
    width: 300px;
    height: 150px;
    display: none;
    position: fixed;
    overflow: visible;
}
.backgroundOpacity{
    background-color: black;
    width: 5000px;
    height: 5000px;
    position: fixed;
    left: 0px;
    top: 0px;
    opacity: 0.7;
    display: none;
}
.loadingGif{
    display: block;
    position: absolute;
}
.displayImage{
    display: none;
}
.closeImage{
    position: absolute;
    top: -10px;
    right: -10px;
    cursor: pointer;
}
.imageNumber{
    position: absolute;
    bottom: 0px;
    left: 0px;
    font-family: sans-serif;
    font-size: 18px;
    font-weight: bold;
    opacity: 0.6;
}
/*------------------------------------------------ 
```

*/

和Java：

```
function Gallery (galleryDiv, resizeDuration, fadeInDuration) {
    this.config = {
        resizeDuration: 1000,
        fadeInDuration: 500
    };

    this.galleryDiv = galleryDiv;

    this.imagesUl = this.galleryDiv.find('.images ul');
    this.images = this.imagesUl.find('img');
    this.backgroundOpacity = this.galleryDiv.find('.backgroundOpacity'); // the background div which when is clicked hides the imageBox
    this.imageBox = this.galleryDiv.find('.imageBox'); // where the images will be displayed when they'r clicked
    this.closeButton = this.imageBox.find('.closeImage'); // top-right x
    this.loadingGif = this.imageBox.find('.loadingGif'); // the animated gif that gives the effect of 'loading'
    this.imageNumber = this.imageBox.find('.imageNumber'); // bottom-left text
    this.displayImage = this.imageBox.find('.displayImage'); // image to be displayed

    this.imagesWidth = new Array(); // the images default widths
    this.imagesHeight = new Array(); // the images default heights
    this.imagesLength = this.images.length // number of images
    this.imageBoxSize = new Array(); // [0] is width, [1] is height
    this.loadingGifSize = new Array() // [0] is width, [1] is height

    this.resizeDuration = resizeDuration || this.config.resizeDuration; // duration to resize imageBox
    this.fadeInDuration = fadeInDuration || this.config.fadeInDuration; // duration for image to fadeIn

    this.init();
};

Gallery.prototype.init = function () { // puts things into move
    this.getImageSize();
    this.bind();
};

Gallery.prototype.bind = function () { // bind events 
    var self = this;
    this.images.on('click', function () {
        var index = $(self.images).index( $(this) );
        self.showImage(index);
    });

    $(window).on('resize', function () { // center the imagebox whenever the window is resized
        self.centerImageBox(self.imageBoxSize[0], self.imageBoxSize[1]);
    });

    $(this.closeButton).on('click', function () { // hide the image
        // self.hideImage();
        self.displayImage.hide();
        self.displayImage.fadeIn(500);
    });

    $(this.backgroundOpacity).on('click', function () {
        self.hideImage();
    });
    return this;
};

Gallery.prototype.getImageSize = function () { // get the default images sizes
    var self = this;

    this.imagesUl.removeClass('resize');
    $.each(this.images, function (index, value) {
        self.imagesWidth[index] = value.width;
        self.imagesHeight[index] = value.height;
    });
    this.imagesUl.addClass('resize');

    this.imageBox.show();
    this.loadingGifSize = [this.loadingGif.width(), this.loadingGif.height()];
    this.imageBox.hide();

    return this;
};

Gallery.prototype.showImage = function (index) { // shows the image when it is clicked
    var self = this,
        imageWidth = this.imagesWidth[index], imageHeight = this.imagesHeight[index],
        imageSrc = $(this.images[index]).attr('src'),
        windowWidth = $(window).width(), windowHeight = $(window).height(),
        ratio = imageWidth / imageHeight, margin = 100, // margin - the distance from the image borders to the window borders (if image is to big)
        imageBoxHeight, imageBoxWidth;
    // resize the image to the current monitor size
    while(imageWidth > (windowWidth - margin) || imageHeight > (windowHeight-margin)){
        if(imageWidth > windowWidth){
            imageWidth = windowWidth - margin;
            imageHeight = imageWidth / ratio;
        }
        else{
            imageHeight = windowHeight - margin;
            imageWidth = imageHeight * ratio;
        }
    }
    //show imageBox and resize it
    this.imageBoxSize = [imageWidth, imageHeight]; // captures the current imageBox size
    this.imageNumber.text('Image ' + (index+1) + ' of ' + this.imagesLength) // set bottom-left text
    this.displayImage.attr('src', imageSrc).css({
        'width': imageWidth,
        'height': imageHeight
    });

    this.backgroundOpacity.show();
    this.imageBox.show();
    this.loadingGif.show();

    this.imageBox.animate({
        'width': imageWidth,
        'height': imageHeight
    },{
        duration: self.resizeDuration,
        step: function () {
            // center the image box with every resize;
            imageBoxWidth = self.imageBox.width();
            imageBoxHeight = self.imageBox.height();
            self.centerImageBox(imageBoxWidth, imageBoxHeight);
            // center the loadingGif
            self.loadingGif.css({
                'right': (imageBoxWidth - self.loadingGifSize[0])/2,
                'top': (imageBoxHeight - self.loadingGifSize[1])/2
            });
        },
        complete: function () {
            self.closeButton.show();
            self.imageNumber.show();
            self.loadingGif.hide();
            self.displayImage.fadeIn(500);
        }
    });

    return this;
};

Gallery.prototype.hideImage = function () { // hide the image
    this.imageBox.hide();
    this.backgroundOpacity.hide();
    this.closeButton.hide();
    this.imageNumber.hide();
    this.displayImage.hide();

    return this;
};

Gallery.prototype.centerImageBox = function (width, height) {
    var windowWidth = $(window).width(),
        windowHeight = $(window).height();

    this.imageBox.css({
        'right': (windowWidth - width)/2, 
        'top': (windowHeight - height)/2
    });

    return this;
}; 
```

尝试使用大于 2000x2000 的大图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:52:48.813

这是由于图像太大。使用 jQuery 的动画实际上在性能上相当缓慢。我建议您在服务器上使用 imagemagick 来创建您希望画廊变宽的任何大小的小图像。之后动画将顺利运行。

# arrays - 我需要一个单线阵列。我正在使用嵌套循环将元素推送到数组中。该数组包含多行

> ID：13383291
> 
> 赞同：0
> 
> 时间：2012-11-14T16:46:41.567
> 
> 标签：arrays, perl, push

我正在使用 perl 生成一个元素数组，这些元素排列为单个制表符分隔的行。但是，我的数组中只有一部分是这样的。其他部分打印为单独的行。

以下是代码的相关部分。

它是一个 foreach 循环，其中`for`嵌入了三个条件循环。该命令在四种不同的/条件下`push`使用了四次。我遇到问题的特定数组称为. 在开头附近定义了几个变量，可以忽略。我不认为这些是问题。`if``else``@imputed_positions`

`$distance`当变量为时，我得到的输出正确打印为单行`> 1`，即使这些值由 push 命令的 3 个单独实例（前三个）处理。$distance 的值和浮点值`$distance`都`> 1`打印为单行。当`$distance`是`< 1`或`= 1`时，它们被打印为单独的行。这些行对应于由四个推送命令中的最后一个推送到 @imputed_positions 的元素。

我无法识别“类似问题”中的类似问题，这可能是因为我对问题所在没有足够精确的线索。

谢谢！！！

```
foreach my $distance ( @distances ) {

    if ( $distance > 1 &&
       ( int ( $distance ) != $distance ) ) {       ###just asking whether $variable is an integer and whether it is > than 1.

        my $rounded_up = rounding_up( $distance );
        my $rounded_down = rounding_down( $distance );

        my $up_distance = $distance/$rounded_up;
        my $down_distance = $distance/$rounded_down;

        my $abs_up = abs ( 1 - $up_distance );
        my $abs_down = abs ( 1 - $down_distance );  

        if ( $abs_up < $abs_down ) {
            for ( my $i = 0; $i < $rounded_up; $i++ ) {
                push ( @imputed_positions, "IMP!$up_distance!A\tIMP!$up_distance!D\tIMP!$up_distance!I\t" );
            }
        }
        else {
            for ( my $i = 0; $i < $rounded_down; $i++ ){
                push ( @imputed_positions, "IMP!$down_distance!A\tIMP!$down_distance!D\tIMP!$down_distance!I\t" );
            }
        }
    }
    else {
        if ( $distance > 1 ){

            for ( my $i = 1; $i <= $distance; $i++ ) {
                push ( @imputed_positions, "IMP!1!A\tIMP!1!D\tIMP!1!I\t" );
            }
        }
        else {
            push ( @imputed_positions, "IMP!$distance!A\tIMP!$distance!D\tIMP!$distance!I\t" );
        }
    }
}

#print @imputed_positions;

#rounding down subroutine
sub rounding_down {
    my ( $round_me ) = @_;
    my $rounded_down = int( $round_me );
    return $rounded_down;
}

#rounding up subroutine
sub rounding_up {
    my ( $round_me ) = @_;
    my $rounded_up = int( $round_me ) + 1;
    return $rounded_up;
} 
```

如果我解释输入可能会有所帮助。@distances 只是一个 txt 文件，其中每一行都是一个数字。数字都是正数，可以是 0、整数或浮点数。例如，`@distance = ( 1, 3, 5.9999, 4.9, 3.1, 3.000001, 0, 0, 0.3 )`。

当`@distance`包含上述元素时，输出不会打印为单行，而是如下所示：

```
IMP!1
!A      IMP!1
!D      IMP!1
!I      IMP!1!A IMP!1!D IMP!1!I IMP!1!A IMP!1!D IMP!1!I IMP!1!A IMP!1!D            IMP!1!IIMP!0.999999998333333!A   IMP!0.999999998333333!D IMP!0.999999998333333!I IMP!0.999999998333333!A IMP!0.999999998333333!D IMP!0.999999998333333!I IMP!0.999999998333333!A IMP!0.999999998333333!D IMP!0.999999998333333!I IMP!0.999999998333333!AIMP!0.999999998333333!D  IMP!0.999999998333333!I IMP!0.999999998333333!A IMP!0.999999998333333!D IMP!0.999999998333333!I IMP!0.999999998333333!A IMP!0.999999998333333!D IMP!0.999999998333333!I IMP!0.98!A  IMP!0.98!D  IMP!0.98!I  IMP!0.98!A  IMP!0.98!D  IMP!0.98!I  IMP!0.98!A  IMP!0.98!D  IMP!0.98!I  IMP!0.98!A  IMP!0.98!D  IMP!0.98!I  IMP!0.98!A  IMP!0.98!D  IMP!0.98!I  IMP!1.03333333333333!A  IMP!1.03333333333333!D  IMP!1.03333333333333!I  IMP!1.03333333333333!A  IMP!1.03333333333333!D  IMP!1.03333333333333!I  IMP!1.03333333333333!A  IMP!1.03333333333333!D  IMP!1.03333333333333!I  IMP!1.00000003333333!A  IMP!1.00000003333333!D  IMP!1.00000003333333!I  IMP!1.00000003333333!A  IMP!1.00000003333333!D      IMP!1.00000003333333!I  IMP!1.00000003333333!A  IMP!1.00000003333333!D  IMP!1.00000003333333!I   IMP!0
!A      IMP!0
!D      IMP!0
!I      IMP!0
!A      IMP!0
!D      IMP!0
!I      IMP!0.3
!A      IMP!0.3
!D      IMP!0.3
!I 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:06:38.207

我的猜测是错误发生在你的代码中，你带来了距离。您似乎没有从输入行中删除尾随换行符。

当您使用 执行某些计算时`$distance`，Perl 将其视为整数。但是，除非您已显式转换`$distance`为数字类型（例如，`$distance += 0;`），否则它会尽可能被视为字符串，因此当您将其插入字符串时，您的字符串中将包含换行符。

如果您有类似以下的代码：

```
while(my $line = <INPUT>) {
    # Do some stuff with $line
} 
```

将其更改为：

```
while(my $line = <INPUT>) {
    chomp $line;
    # Now do your stuff with $line
} 
```

有关详细信息，请参阅[perldoc](http://perldoc.perl.org/functions/chomp.html)。

# ios - UITextField 仅包含数字并在 iPhone 上的键盘上“完成”

> ID：13383292
> 
> 赞同：1
> 
> 时间：2012-11-14T16:46:43.497
> 
> 标签：ios, keyboard, uitextfield, numeric

我正在学习 obj-c 并给自己一个简单的任务，即创建一个具有 2 `uitextfields`、`label`&的应用程序`button`（按钮汇总 2 个数字并在标签中显示结果）。我制作了这个应用程序，但我还没有弄清楚如何`textfields`与“完成”按钮和“仅限数字”一起进行交互。

下面是我的代码：

```
#import UIKit/UIKit.h

@interface ViewController : UIViewController

@property IBOutlet UILabel *label;
@property IBOutlet UITextField *textField1;
@property IBOutlet UITextField *textField2;
@property NSInteger textFieldInt1, textFieldInt2;
@property NSString *textFieldStr1, *textFieldStr2;

-(IBAction)button:(id)sender;
-(IBAction)hideKeyboard:(id)sender;

@end

#import "ViewController.h"

@interface ViewController ()
@end

@implementation ViewController

@synthesize label, textField1, textField2, textFieldInt1, textFieldInt2, textFieldStr1, textFieldStr2;

-(IBAction)button:(id)sender {
    textFieldInt1=[textField1.text integerValue];
    textFieldInt2=[textField2.text integerValue];
    label.text=[NSString stringWithFormat: @"%d", textFieldInt1+textFieldInt2];
    [self.view endEditing:YES];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    [self.textField1 setReturnKeyType:UIReturnKeyDone];
    [self.textField2 setReturnKeyType:UIReturnKeyDone];

}

-(IBAction)hideKeyboard:(id)sender
{
    [self.view endEditing:YES];
}

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range     replacementString:(NSString *)string {
    if(![string intValue] && ![string isEqualToString:@""] && ![string isEqualToString:@"0"])
    {
    return NO;
    } else {
    return YES;
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [self.view endEditing:YES];
    [super touchesBegan:touches withEvent:event];
}

@end 
```

我还（在情节提要中）连接`textFields`到`hideKeyboard (didEndOnExit)`、 和`button`以及`button (touchUpInside)`所有出口（`textfields`、`button`、`label`）。

**问题是：** `numbers only`输入不适用于`done`. 如果我使用`delegate`（情节提要中的新引用插座连接到两者`textfields`）我会`numbers only`输入`textfields`但`done`按钮不起作用（当我在 iPhone 上按下它时没有任何反应）。如果我不使用`delegate`我会得到`all characters`输入但`done`工作正常（当我按下它时 iPhone 键盘隐藏）。

有什么建议我可能在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:50:18.173

实现 UITextFieldDelegate 方法：

```
// This is how we get rid of the keyboard.
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    //Do whatever you need to to save etc...
    [textField resignFirstResponder];
    return NO;
} 
```

这告诉键盘在按下完成按钮时隐藏。请务必将您的视图控制器设置为文本字段的委托： myTextField.delegate = self; （可能在 viewDidLoad 中）

# c# - 有没有办法绕过 RenderBody() 要求？

> ID：13383293
> 
> 赞同：5
> 
> 时间：2012-11-14T16:46:44.787
> 
> 标签：c#, asp.net-mvc, razor

我有一个 ASP.NET MVC Web 应用程序，其中所有页面都使用一个母`Layout.cshtml`版页。虽然我通常想要`RenderBody()`，但我有一个可以在我的数据库中启用的站点关闭机制，所以我基本上想要一个看起来像这样的布局页面：

```
@if(DbHelper.SiteIsShutDown) {
    <h1>Site is shut down temporarily</h1>
}
else {
    <h1>Welcome to the site</h1>
    @RenderBody()
} 
```

问题是如果`SiteIsShutDown`是真的，那么`RenderBody()`不会被调用，我得到了异常：

> 尚未为布局页面调用“RenderBody”方法...

那么有没有办法解决这个问题？我*只想*从我的布局页面呈现一些输出，而*不是*从我的视图页面呈现任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:08:54.907

您可能应该将主布局留给呈现视图，并且在站点关闭的情况下不要短路您的视图。

最好的办法是检查并在 Global.asax 中处理它，即`BeginRequest`：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    if(DbHelper.SiteIsShutDown)
    {
        HttpContext.Current.Response.Redirect("SiteDown");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T22:06:40.347

请注意，如果您真的愿意，您实际上可以“忽略”内容。通常，您`@RenderBody()`在视图代码中编写，该代码评估正文内容，将其粘贴在 a`HelperResult`中，然后将其写入输出流。这样做时，MVC 将主体标记为已渲染。`@{ RenderBody(); }`您可以通过编写（注意大括号）或只是`RenderBody();`已经在代码上下文中来欺骗它，使其认为主体已被渲染而没有实际编写任何内容。这会评估正文内容，而不会将其实际写入输出流。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-07T12:18:22.073

最后，我决定采用与 Jerad Rose 的解决方案非常相似的方法，但经过修改后，它只在根目录提供了一个`SiteDisabled.htm`名为禁用：

```
protected void Application_BeginRequest(object sender, EventArgs ea) {
    string siteDisabledFilePath = "/SiteDisabled.htm";

    if (CachingAndUtils.IsSiteDisabled && HttpContext.Current.Request.FilePath != siteDisabledFilePath) {
        HttpContext.Current.Response.Redirect(siteDisabledFilePath);
    }
} 
```

# maven - Maven按顺序构建

> ID：13383297
> 
> 赞同：4
> 
> 时间：2012-11-14T16:47:19.927
> 
> 标签：maven, parent

我有一个项目，我所有的项目都有一个父 pom，定义如下：

```
<parent>
    <groupId>MyProject</groupId>
    <artifactId>MyApp</artifactId>
    <version>1.0</version>
</parent> 
```

但是，这个父 pom 没有在 modules 元素中指定模块。

因此，当我运行`mvn install -f parent/pom.xml`命令时，它什么也不做。

有没有其他方法可以按*顺序*构建整个项目，以便构建所有的 pom？

“按顺序”是指“按依赖顺序构建”。因为几个项目依赖于其他项目，我们不能只按字母顺序构建每个项目。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T17:45:30.537

如果你有一个*reactor pom*（一个带有`<modules>`元素的 pom，`<packaging>`定义为`pom`），那么模块将按依赖顺序构建。无论模块在 pom.xml 中指定的顺序如何，都会发生这种排序。

有几种方法可以解决这个问题：

**选项1**

你的 reactor pom 不需要和你的父 pom 是同一个 pom。所以你可以有：

```
project/pom.xml          # Reactor pom with <modules> element
project/parent/pom.xml   # Parent pom
project/module-a/pom.xml # Some module 'a'
project/module-b/pom.xml # Some module 'b' 
```

在这种情况下，reactor pom 包含：

```
<modules>
  <module>parent</module>
  <module>module-a</module>
  <module>module-b</module>
</modules> 
```

`mvn install`在顶层运行将构建你的父 pom，以及依赖顺序的两个模块。

**选项 2**

将你的父 pom 向上移动一个目录，并将它用作父 pom 和反应器 pom，所以你的项目看起来像这样

```
project/pom.xml          # Parent/Reactor pom with <modules> element
project/module-a/pom.xml # Some module 'a'
project/module-b/pom.xml # Some module 'b' 
```

其中的模块部分如下所示

```
<modules>
  <module>module-a</module>
  <module>module-b</module>
</modules> 
```

同样，`mvn install`在顶层运行将构建您的父 pom，以及依赖顺序的两个模块。

**选项 3**

将您的父 pom 留在原处，并添加一个模块部分：

```
<modules>
  <module>../module-a</module>
  <module>../module-b</module>
</modules> 
```

在这种情况下，运行 mvn install -f parent/pom.xml 将构建父 pom，以及依赖顺序的两个模块。

**结论**

我通常使用选项 2。它是 maven 本身最常用的模式，我尽量避免偏离被广泛理解和测试的“人迹罕至的路径”太远。

有关详细信息，请参阅[使用多个模块的指南](http://maven.apache.org/guides/mini/guide-multiple-modules.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:07:38.343

没有其他方法可以在构建期间自动解决项目之间的依赖关系。

您可以解决依赖关系的方法是指定需要完成构建的顺序。在您的父 POM 上创建一个模块部分来执行此操作。

```
 <modules>
      <module>Proj A to Build/module>
      <module>Proj B dependent or Proj A</module>
    </modules> 
```

# jquery - jQGrid 冻结列在放置在 jQuery 选项卡中时不起作用

> ID：13383300
> 
> 赞同：0
> 
> 时间：2012-11-14T16:47:30.780
> 
> 标签：jquery, jquery-ui, jqgrid, tabs, frozen-columns

我有 2 个部分，由 jQuery TAB 分隔。在我的第一个选项卡中，我有一个带有冻结列的 jqGrid，到目前为止它可以工作。但是，在我的第二个选项卡中，我有另一个 jQgrid 的冻结列不起作用。

当我删除转换`<div>`为选项卡的代码时，两个表都显示在同一页面中，并且它们各自的冻结列都可以正常工作。

我认为问题出在标签本身，但我找不到解决这个问题的方法。

```
<script type=\"text/javascript\">

  jQuery(document).ready(function(){
    jQuery( \"#tabs\" ).tabs({});
tableToGrid('#super_summ', {
                    caption: \"Performance Summary By Supervisor\",    
                    shrinkToFit: false,
                    width: '850',
                    height: '180',
                    hidegrid: false,
                    rowNum: 150,
                    sorttable:false,
                    colNames :['Sor','Staime','A T',
                                'NR','C And','Callsd',
                                'T Planned','Tickets Cld','A','S','T',
                                'TA2','Total','TO KP','KP'],
                    colModel: [
                        {name: 'Su', width: '120px',align:'center',frozen:true},
                        {name: 'St', width: '120px', align:'center'},
                        {name: 'AvT', width: '120px',align:'center'},
                        {name: 'N', width: '120px',align:'center'},
                        {name: 'Ca', width: '120px',align:'center'},
                        {name: 'Caled', width: '120px',align:'center'},
                        {name: 'Td', width: '120px',align:'center'},
                        {name: 'Ti', width: '120px',align:'center'},
                        {name: 'C', width: '90px',align:'center'},
                        {name: 'S', width: '90px',align:'center'},
                        {name: 'T1', width: '90px',align:'center'},
                        {name: 'T2', width: '90px',align:'center'},
                        {name: 'Tot', width: '90px',align:'center'},
                        {name: 'TOK', width: '90px',align:'center'},
                        {name: 'KP', width: '90px',align:'center'}
                        ]
                });
                jQuery(\"#super_summ\").jqGrid('setFrozenColumns').jqGrid('sortGrid','Supervisor');
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:49:20.837

更改了绘制事物的顺序，首先是网格，然后是选项卡。

# java - 跳过像素问题

> ID：13383301
> 
> 赞同：1
> 
> 时间：2012-11-14T16:47:33.167
> 
> 标签：java

我正在编写一个程序，它将获取二维码图像并识别黑白像素并将它们保存在一个数组中。但我的问题是；我有 294x294 像素图像和一个固定大小为 21x21 的矩阵。所以一个方形模块对我来说是 294/21=4.0 像素。如何按 4.0 像素到 4.0 像素搜索像素？这是我的代码：

```
public static void printAllARGBDetails(BufferedImage image) {
        int width = image.getWidth();
        int height = image.getHeight();
        System.out.println("Image Dimension: Height-" + height + ", Width-"
                + width);
        System.out.println("Total Pixels: " + (height * width));
        int pixels[][]=new int[21][21];
        int pixel=width/21;
        System.out.println("Pixel=" +pixel);

        for (int i = 20; i>=0 ; i--) {
            for (int j = 20; j>=0 ; j--) {
                if(image.getRGB(i, j)==-1)
                {

                    pixels[i][j]=0;
                }
                else
                {
                    pixels[i][j]=1;
                }

            }
        } 
  } 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:02:43.090

下面编辑的代码应该可以工作，但它只测试每个元素中 16 个像素中的 1 个

```
 for (int i = 0; i<20 ; i++) {
        for (int j = 0; j<20 ; j++) {
            if(image.getRGB(i*4, j*4)==-1)
            {

                pixels[i][j]=0;
            }
            else
            {
                pixels[i][j]=1;
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:03:05.033

您可能应该引入一种方法，该方法以某种方式将 4x4 像素阵列评估为`0`or `1`，例如基于平均亮度：

```
public static void printAllARGBDetails(BufferedImage image) {
    int width = image.getWidth();
    int height = image.getHeight();
    System.out.println("Image Dimension: Height-" + height + ", Width-"
            + width);
    System.out.println("Total Pixels: " + (height * width));
    int pixels[][]=new int[21][21];
    int pixel=width/21;
    System.out.println("Pixel=" +pixel);

    for (int i = 20; i>=0 ; i--) {
        for (int j = 20; j>=0 ; j--) {
                pixels[i][j] = getPixel (image, i, j);
                System.out.println(String.format ("Pixel[%d,%d]=%d", i, j, pixels[i][j]));
        }
    } 
}

private static final long LUMINOSITY_THRESHOLD = 23000;

private static int getPixel (BufferedImage image, int i, int j) {
   long totalLuminosity = 0;
   for (int k = 0; k < 4; k++) {
      for (int m = 0; m < 4; m++) {
          long luminosity = getLuminosity (image.getRGB (i*4 + k, j*4 + m));
          totalLuminosity += luminosity;
      }
   }

   return totalLuminosity/16 > LUMINOSITY_THRESHOLD ? 0 : 1;
}

private static int getLuminosity (int rgb) {
    int r = rgb >> 16;
    int g = (rgb >> 8) & 0xFF;
    int b = rgb & 0xFF;

    int luminosity = 21*r + 71*g + 7*b;

    return luminosity;
} 
```

# c# - COM方法从输出变量读取？

> ID：13383305
> 
> 赞同：0
> 
> 时间：2012-11-14T16:47:46.710
> 
> 标签：c#, com-interop, out

我在 for 循环中调用一个方法，该方法调用 COM 对象上的一个方法（Inventor 2012）。

以前的代码是：

```
foreach (var occ in occurrences)
{
    // [...]
    SomeMethod(occ);
    // [...] 
```

重构时，我决定内联方法调用：

```
foreach (var occ in occurrences)
{
    // [...]
    BOMQuantityTypeEnum quantityType;
    object quantity;
    occ.Definition.BOMQuantity.GetBaseQuantity(out quantityType, out quantity);
    if (quantityType ==
    // [...]
} 
```

虽然没有改变其他任何东西，但它开始失败，抛出 E_INVALIDARG。此外，它只会在第二次调用该方法时失败。但是，通过将其更改为以下内容，它会再次起作用：

```
 BOMQuantityTypeEnum quantityType = 0;
    object quantity = null;
    occ.Definition.BOMQuantity.GetBaseQuantity(out quantityType, out quantity); 
```

为什么会发生这种情况？

编辑：

会不会是 COM 对象读取了上一次迭代的值？

签名在文档（在 VB 中）中给出：

```
Sub GetBaseQuantity(ByRef QuantityType As BOMQuantityTypeEnum, ByRef Quantity As [optional] VARIANT) 
```

C#签名错了吗？COM 接口不是自动生成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:03:16.247

> 会不会是 COM 对象读取了上一次迭代的值？

是的，它确实。除了方法的返回值之外，在 COM 自动化中没有等价的*out 。*你如何以*out*而不是*ref*结束是相当神秘的。可能只是用于声明 COM 接口的 IDL 中的一个错误。唯一与 COM 自动化兼容的 IDL 属性是 [in]、[in,out] 和 [out,retval]。

仍然不应该是一个问题，COM 服务器可以调用 VariantClear() 来重置变体。似乎它也不想这样做。您无法修复该代码，自己重置值当然是一个足够好的解决方法。

# regex - 连接 Perl 正则表达式选择

> ID：13383306
> 
> 赞同：0
> 
> 时间：2012-11-14T16:47:50.763
> 
> 标签：regex, perl

> **可能重复：**
> [如何将 $1 与正则表达式中的数字连接起来](https://stackoverflow.com/questions/11762552/how-to-concatenate-1-with-number-in-a-regex)

我正在尝试使用命令行中的简单正则表达式替换替换`SomeText`文件中的所有实例（在 Windows 上）：`SomeText2`

```
perl -pi.bak -e "s/(SomeText)/$12/g" sometext.txt 
```

这不起作用，因为没有`$12`选择。如何正确指示`$1`选择标记后没有空格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:51:50.473

`${1}`

作为一般规则，在 Regexp 或内插字符串文字中，您可以`{}`在 any`$`或`@`sigil 之后使用来明确界定您关心的变量的名称。

是的，正如@Mat 所说，如果您使用的是某种 Unix 系统，请使用单引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:57:11.120

我认为，这最适合环视断言或`\K`转义：

```
perl -pi.bak -e "s/SomeText\K/2/g" sometext.txt 
```

或使用后视断言：

```
perl -pi.bak -e "s/(?<=SomeText)/2/g" sometext.txt 
```

这将防止`\K`删除之前或后视内部的任何内容，因此您无需将其放回原处。

您还可以对变量使用长语法，即使用`${name}`, 即`${1}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:54:18.470

对于您的特定情况，您根本不需要使用捕获变量：

```
s/SomeText/SomeText2/g 
```

有关变量插值的更一般问题的答案，请参阅 Dan 的回答。

# json - JSON 数据在脚本的一部分中起作用，但在另一部分中不起作用

> ID：13383307
> 
> 赞同：1
> 
> 时间：2012-11-14T16:47:56.337
> 
> 标签：json, jquery, jquery-selectors

我有以下脚本由于某种原因无法正常工作：

```
success: function( widget_data ) 
{ 

    if( widget_data.d[0] ) {

        var j = 0;

        for ( j = 0; j <= widget_data.d.length - 1; j++ ) {

            $.getScript( "js/" + widget_data.d[j].script, function() {

                // this line is complaining about .widget_id
                alert(widget_data.d[j].widget_id);
            });

            // but this line works fine...
            alert(widget_data.d[j].widget_id);

        }

    }

} 
```

我在以下行出现错误，其中一个 withing `.getScript`：

```
alert(widget_data.d[j].widget_id); 
```

错误信息是：

```
Cannot read property 'widget_id' of undefined 
```

但奇怪的是，以下警报可以正常工作并返回正确的值：

```
alert(widget_data.d[j].widget_id); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:51:49.140

getScript 调用异步运行，捕获变量`j`而不是它被调用时的值。这意味着`j`可能具有在调用返回时终止循环的值。您应该`getScript`在函数内调用，这样您就可以捕获的值`j`而不是它的引用。实际上，正如您在代码示例中看到的那样，实际捕获“小部件”对象本身可能会更好。

```
success: function( widget_data ) 
{ 

    if( widget_data.d[0] ) {

        var j = 0;

        for ( j = 0; j <= widget_data.d.length - 1; j++ ) {

            getWidgetScript( widget_data.d[j] );

            alert(widget_data.d[j].script);

            // but this line works fine...
            alert(widget_data.d[j].widget_id);
            alert(widget_data.d[j].title);

        }

    }

}

function getWidgetScript(widget) {
    $.getScript( "js/" + widget.script, function() {
        $( ".widget_header_" + widget.widget_id ).text( widget.title );
    });
} 
```

# ruby - Stalker/beanstalk 异步处理作业

> ID：13383308
> 
> 赞同：0
> 
> 时间：2012-11-14T16:47:58.553
> 
> 标签：ruby, asynchronous, beanstalkd

好的，我正在使用 Stalker 和 Beanstalkd 进行一些测试。我的目标是将 500kb 的 post 请求卸载到队列并异步处理它们。

到目前为止，在我的测试中，我有一个非常简单的例子。

```
#worker.rb
require 'stalker'
include Stalker

job 'hello' do |args|
  puts "hi"
  sleep 1
  puts "hello"
end 
```

和这个文件添加到队列

```
# stalker.rb
require 'rubygems'
require 'stalker'

10.times do 
    Stalker.enqueue('hello')
    puts 'queued'
end 
```

所以在一个终端我跑

> $ stalk worker.rb
> 工作 1 个工作：[你好]

然后我运行跟踪文件

> $ ruby​​ stalker.rb

stalker 几乎按预期立即执行，因此没有阻止。

但工作人员大约需要 10 秒才能运行。真的，我希望这 10 个作业的时间更接近 1 秒，因为我希望它们并行运行。

有关执行此操作的下一个最佳步骤的任何建议？

更新：我意识到我可以从不同的终端运行多个工作人员，它会更快地处理队列，例如 2 个工作人员将在大约一半的时间内完成该过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:36:56.460

作为提醒，您可能想查看我创建的名为[Backburner](http://nesquena.github.com/backburner/)的新 gem ，它是一种更现代的方式来管理 ruby​​ 中的 beanstalkd 的异步作业。它遵循一个更干净、类似 resque 的接口，有一个真正的异步工作者（使用分叉和多线程以获得更快的吞吐量），并且有更好的错误处理和重试支持。在写 backburner 之前，我使用了 stalker 2 年，因为我想要一个更好的解决方案。

它为您提供以下支持：

```
SomeObject.async(:pri => 1000, :delay => 2).some_method(1, 2, 3) 
```

然后该方法会自动排入 beanstalkd 并由 backburner 工作人员异步处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:55:58.067

Stalker.enqueue 有 3 个选项：作业名称字符串、参数散列、选项散列。在选项哈希中，您可以传递 start 所需的秒数。例子：

```
Stalker.enqueue('hello',{},{:delay => 5}) 
```

# java - TextView 和原始文件的问题

> ID：13383309
> 
> 赞同：0
> 
> 时间：2012-11-14T16:47:59.207
> 
> 标签：java, android, android-layout, textview, togglebutton

我正在编写一个处理原始文本文件的 Android 应用程序。我注意到的是，当使用切换按钮时，文本视图会在文件的实际文本之前显示一些奇怪的字符。下图显示了我正在谈论的角色。我想知道如何摆脱这些字符，因为它们不能出现在应用程序的最终版本中。有人知道会是什么问题吗？ ![奇怪的字符在首都之前用红色框起来](../Images/82f4f14843080f53f7264f2b78ccb84d.png) ![在此处输入图像描述](../Images/341a667467ad0dd0f7c3ada6f46bab3e.png)

处理切换按钮的代码如下：

```
ELswitch = (ToggleButton)findViewById(R.id.toggleButton1);
    ELswitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if(isChecked==true)
            {
                InputStream iFile = getResources().openRawResource(R.raw.sunday_compline_latin);
                System.out.println(R.raw.sunday_compline_english);
                try {

                    text.setText(inputStreamToString(iFile));
                    text.setFocusable(false);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {
                InputStream iFile = getResources().openRawResource(R.raw.sunday_compline_english);
                try {

                    text.setText(inputStreamToString(iFile));
                    text.setFocusable(false);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }); 
```

该代码运行良好，并且似乎没有任何内容会更改文本文件，因为这些字符不会出现在原始文件中。此外，我有一个类似的活动，它不使用切换按钮，这些字符只出现在这个实例中（使用切换按钮）。代码有问题吗？有人有建议吗？

这是我的 inputStreamToString：

```
public String inputStreamToString(InputStream is) throws IOException
{
    StringBuffer sBuffer = new StringBuffer();
    DataInputStream dataIO = new DataInputStream(is);
    String strLine = null;
    while ((strLine = dataIO.readLine()) != null)
    {
        sBuffer.append(strLine + "\n");
    }

    dataIO.close();
    is.close();

    return sBuffer.toString();
} 
```

}

# java - Tomcat Javamail 端口 365？

> ID：13383310
> 
> 赞同：0
> 
> 时间：2012-11-14T16:48:09.500
> 
> 标签：java, tomcat, tomcat6, jakarta-mail

我遵循了一个示例，将资源添加到我的 webapp context.xml

```
<Resource auth="Container" mail.smtp.host="localhost" 
    name="containeremail" type="javax.mail.Session" /> 
```

在 web.xml 我有：

```
<resource-ref>
<description>Container Email resource</description>
<res-ref-name>containeremail</res-ref-name>
<res-type>javax.mail.Session</res-type>
<res-auth>Container</res-auth>
<res-sharing-scope>Shareable</res-sharing-scope> 
```

然后我使用 Javamail 发送这样的电子邮件：

```
Context initCtx = new InitialContext();
Context envCtx = (Context) initCtx.lookup("java:comp/env");            
mailSession=(Session)envCtx.lookup("containeremail");                                             
mailSession.setDebug(true);

Transport.send(message); 
```

这在我的开发环境中运行良好。

但是，当我在我的生产 CENTOS 框中部署时，我得到了这个异常：

```
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 365; 
```

嵌套异常是：java.net.ConnectException：连接被拒绝

Postfix 已安装并在两台机器上运行。我什至尝试在 context.xml 中将端口指定为 25：

```
mail.smtp.port="25" 
```

但即使这样，它仍然有上面提到端口 365 的例外 ????

关于什么是错的任何想法？

谢谢

斯普诺格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:14:15.473

在这种情况下，我不知道 Tomcat 是如何创建 javax.mail.Session 实例的，但如果它使用 Session.getDefaultInstance 而不是 Session.getInstance 你可能会得到一个带有其他人配置的 Session，这就是它使用端口 365 的原因.

您总是可以绕过 Tomcat 的资源配置并自己调用 Session.getInstance。

# asp.net-mvc - SignalR - 在 Web 应用程序的多个页面之间保留相同的连接

> ID：13383311
> 
> 赞同：4
> 
> 时间：2012-11-14T16:48:09.450
> 
> 标签：asp.net-mvc, signalr

我想提供一种用户体验，在我的 ASP.NET MVC 应用程序的多个页面中可以使用 SignalR 连接。

如果我在我的 _Layout.cshtml 中包含 SignalR 启动代码 (JS)，每次用户导航到不同的页面时，服务器是否会将其视为“新”客户端连接？或者 SignalR 是否会开箱即用地支持这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:58:30.683

每个页面都表示为一个“客户端”，因此每个页面都有一个唯一的连接（无法绕过）。此问题的替代方案是：

1.  动态加载页面并将其显示在当前页面上。基本上只有一个物理页面。
2.  将用户状态保存在 cookie 或会话中，当您开始新连接时，用您保存的状态填充它。警惕这种方法的安全问题。

希望这可以帮助！

# ruby-on-rails - 使用参数查找重写 Rails 路由

> ID：13383315
> 
> 赞同：1
> 
> 时间：2012-11-14T16:48:23.910
> 
> 标签：ruby-on-rails, routing

有没有办法在匹配之前重写路由（有点像 before_filter），以便我可以读取和解析请求？

例如，如果我收到这个 PUT 请求

```
http://localhost:3000/post 
```

并且 a`params[:my_id]`存在（带有 value `my_value`），将其重写为

```
http://localhost:3000/post/my_value 
```

并因此将其与 PUT 请求的适当路由匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:04:46.993

听起来您正在寻找一个 Rack 中间件：特别是[rack-rewrite](https://github.com/jtrupiano/rack-rewrite)。

如果 rack-rewrite 不能为您解决这个问题，您可能需要编写自己的中间件。[Rails 指南](http://guides.rubyonrails.org/rails_on_rack.html)是一个很好的起点，但否则您可能需要在 Google 上搜索一下以找出您正在寻找的正确语法以及如何准确地实现您想要的。

# android - 以编程方式在 android 中打开 .msg 文件（Outlook 项目文件）

> ID：13383318
> 
> 赞同：1
> 
> 时间：2012-11-14T16:48:38.880
> 
> 标签：android, outlook

我正在尝试通过我的应用程序打开一个 .MSG 文件。我尝试将 MIMETYPE 设置为`vnd.ms-outlook`，但仍然无法按预期打开 .MSG 文件，然后我尝试在电子邮件中附加相同的 .MSG 并在我的设备中打开。它像魅力一样打开。

所以我的问题是，如何在应用程序中以编程方式打开 .MSG 文件。

尝试了以下方法，

方法一：手动设置 MIMETYPE

```
mimetype = "application/vnd.ms-outlook"; 
```

方法2：通过获取MIMETYPE`MimeTypeMap`

```
String extension = android.webkit.MimeTypeMap.getFileExtensionFromUrl(Uri.fromFile(file).toString());
String mimetype = android.webkit.MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension); // extension is msg 
```

通过另一个已安装的应用程序打开 .MSG 文件

```
Log.i(TAG, "Extension :" + extension + "\n" + "MIME :" + mimetype); // Prints msg for extension and mimetype = application/vnd.ms-outlook for method 1 and null when i use method 2
intent.setDataAndType(Uri.fromFile(file),mimetype);
startActivity(intent); 
```

方法 2 中的 mimetype 结果为 null，并且显式设置的 mimetype 也不起作用。

任何人都可以分享他们对解决这个问题的想法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:06:10.170

您应该使用意图用另一个应用程序打开文件。试试这个：

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setDataAndType(msgURI, mimeTypeString);
startActivity(i); 
```

这应该允许任何已在其清单中注册 MSG 数据类型的应用程序打开它。

# python - 通过继承扩展 subprocess.Popen

> ID：13383322
> 
> 赞同：2
> 
> 时间：2012-11-14T16:48:48.020
> 
> 标签：python, inheritance, subprocess

作为系统管理员，我发现自己多次编写通过子进程调用命令的脚本。有时，我不希望命令实际执行，我只想看看会执行什么。因此，我的代码是这样的：

```
alaroffcmd = 'someBinary -h %s' %someHostName
...
if options.tstmd:       
   print alaroffcmd
else:
   chctxt = sp.Popen(alamoffcmd,shell=True, stdout=sp.PIPE) 
   ... 
```

我在想“测试模式”会非常有用。

作为使用示例：

```
lsp=nPopen('ls -l',shell=True, stdout=sp.PIPE, testmode=True) 
```

只会打印要发出的命令。这似乎是多余的，但在现实生活中，我有时会使用一些非常复杂的命令来调用子进程，这些命令是根据脚本中确定的条件决定的（上面有一个示例`someHostName`）

我以此作为[示例，如何通过覆盖函数的**init**方法](https://stackoverflow.com/q/576169/492620)来扩展函数。这是我扩展的方式`subprocess.Popen`，以满足我的需求：

```
import subprocess as sp

class nPopen(sp.Popen):
    def __init__(self, args, bufsize=0, executable=None,
                 stdin=None, stdout=None, stderr=None,
                 preexec_fn=None, close_fds=False, shell=False,
                 cwd=None, env=None, universal_newlines=False,
                 startupinfo=None, creationflags=0,testmode=False):

        if testmode: 
            print args
            return None

     p = sp.Popen.__init__(self,args, bufsize, executable,
                 stdin, stdout, stderr,
                 preexec_fn, close_fds, shell,
                 cwd, env, universal_newlines,
                 startupinfo, creationflags)

        return p 
```

这正如我所期望的那样工作，但由于我从未通过覆盖它的`__init__`方法来扩展一个类，所以我想知道这个的正确性，或者换句话说：有没有更 Pythonic 的方法来做到这一点？我应该使用`super`更好的 Python3 兼容性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:00:42.730

我根本不会使用子类，因为听起来您不想更改`Popen`对象的功能。听起来您只想更改其构造函数的功能。

我会创建一个`Popen`只打印出它的论点的虚拟类。（这是使用 Python 3.x 风格编写的，但很容易转换为 Python 2.x。）

```
class DummyPopen(object):
    def __init__(self, *args, **kw):
        print('Popen({})'.format(
            ', '.join([repr(arg) for arg in args] +
                      ['{}={!r}'.format(*pair) for pair in kw.items()])))
        self.returncode = 1

    def wait(self):
        return 1

    # et cetera 
```

然后，您可以根据需要触发虚拟类的使用。

```
def Popen(*args, testmode=False, **kw):
    if testmode:
        return DummyPopen(*args, **kw)
    return subprocess.Popen(*args, **kw) 
```

甚至：

```
if testmode:
    Popen = DummyPopen
else:
    Popen = subprocess.Popen 
```

这利用了 Python 的“鸭子类型”约定——任何与对象具有相同接口的`Popen`对象在功能上与对象没有区别`Popen`，只要您不滥用`isinstance()`太多。

请注意，*这两种*`Popen`方法都允许您从模块导入。

```
from mymodule import Popen 
```

# sorting - 在 MS Word 中按时间顺序对文本块进行排序

> ID：13383333
> 
> 赞同：0
> 
> 时间：2012-11-14T16:49:34.727
> 
> 标签：sorting, ms-word, date-sorting

有谁知道在 MS Word 中按时间顺序对文本块进行排序的方法？

将有一个节标题（H1 样式），包括带有日期的文本，然后是不同数量的段落（普通样式），然后是另一个 H1 等。所以我需要对标题以及它在整个文档中的所有相关文本进行排序。这是一个例子：

**Markham 和 Ellesmere 左手腕 X 光片，2007 年 1 月 2 日**

正常检查

**Marksville X 射线和超声波，2007 年 3 月 28 日**

病历：痛。查询胆囊结石。

腹部超声

解释： 正常

这有意义吗？

# scala - 在 Scala 中检查 ClassManifest 的子类型

> ID：13383336
> 
> 赞同：1
> 
> 时间：2012-11-14T16:49:48.033
> 
> 标签：scala, manifest, implicit, subtype

我想比较两个类清单（通过隐式获得）以检查类 A 是否扩展了特征 B。在我询问类是否扩展接口的情况下，下面的代码应该产生 true：

```
trait X[T,S]

class Y extends X[Double,Int]

val mX = implicitly[ClassManifest[X[Double,Int]]]
val mY = implicitly[ClassManifest[Y]]

println(mX <:< mY)

println(mY <:< mX)

println(mX,mY) 
```

但是，我从终端得到以下输出：

```
felix@felix-UX32VD:~/Desktop$ scala Test.scala
false
false
(Main$$anon$1@7ad0e999.type#Main$$anon$1$X[Double, Int],Main$$anon$1@7ad0e999.type#Main$$anon$1$Y) 
```

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:42:57.050

清单的行为被破坏了。这就是为什么它们在 2.10 中被替换为[TypeTags](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.api.TypeTags)的原因，它们直接作用于底层类型：

```
scala> typeTag[Y].tpe <:< typeTag[X[Double,Int]].tpe
res21: Boolean = true

scala> typeOf[Y] <:< typeOf[X[Double,Int]]
res22: Boolean = true 
```

在 2.10 的想法是弃用 Manifests，但由于新反射库的质量还没有达到正确的水平，这个想法被拒绝了。这意味着 Manifests 仍然可以使用，但人们仍然记得有一天它们会从 stdlib 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:54:37.367

看起来您实际上并不对`ClassManifest`s 之间的子类型关系感兴趣，而是对已擦除类型之间的子类型关系感兴趣。也许这对你有用：

```
println(mX <:< mY) // false
println(mX.erasure.isAssignableFrom(mY.erasure)) // true

println(mY <:< mX) // false
println(mY.erasure.isAssignableFrom(mX.erasure)) // false 
```

# bash - wget: 下载一个 LIVE txt 文件

> ID：13383337
> 
> 赞同：0
> 
> 时间：2012-11-14T16:49:54.863
> 
> 标签：bash, wget

我的 bash 脚本末尾有这一行：

```
wget -q $URL -Y off 
```

包含我的 bash 脚本的控制台输出的**LIVE**`URL` txt 文件的路径在哪里。

 ******LIVE txt 文件**的**说明**：**

 **这个 txt 文件会随着过程不断更新，因为它存储了控制台输出。我的 shell 脚本包含一些“繁重”的程序，因此控制台输出非常冗长，生成 txt 文件需要一些时间（可能延迟 3~5 秒）。

**问题**：有时我得到不完整的 txt 文件，其中只包含最终 txt 文件的一小部分。（预计会在`wget`命令之前获取所有内容）而且很有趣，我下载的大多数不完整的txt文件都卡在第9999行。我不知道这是否是限制，但如果控制台似乎没问题输出低于 5k 行。

**问题：**有没有办法让`wget`等待特定时间？

ps 我知道有一个超时选项`-T`，`wget`默认为 900 秒。但我的问题与慢速连接无关，而是与生成文件的延迟有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:58:06.163

如果此`wget`语句作为生成输出的脚本*的一部分*运行，您可能会遇到某种输出缓冲问题……也就是说，由于脚本尚未退出，因此尚未刷新输出。

你如何重定向输出？一种方法是将语句以外的所有内容包装在子shell中`wget`并重定向该输出*：*

```
#!/bin/sh

(
  a bunch
  of commands
) > output 2>&1

wget -q $URL ... 
```

这可确保其他命令已完成，并且在运行时*包含的 shell 已退出*`wget`。****

# android - 重新加载 Webview android

> ID：13383340
> 
> 赞同：2
> 
> 时间：2012-11-14T16:50:02.960
> 
> 标签：android, webview

我有一个异步任务，它从远程服务器检索一些数据，比如......

```
public void doInBackground(String...params) {

//does some process and store obtained data in Shared Preferences 
} 
```

**---------- * *layout.xml*** *-----------* *

```
 <customWebview attr1="somevalue"/> 
```

* * *

**自定义Webview 类**

* * *

我有 customWebview 类，它在类的构造函数中初始化一些值并使用 customWebView.loadurl("someurl")// 显示内容

这里的问题是......，我们从异步任务中获取包含用于初始化 customWebview 的值的数据......

最初...自定义 Web 视图会加载一些默认数据...

我只需要使用从 AsyncTask 获得的值重新初始化布局中的那些 customwebviews ...（仅重新加载 customwebviews 而不是整个布局或活动）

请指导我完成这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:59:04.587

您可以在 XML 中为您的自定义 webview 提供一个 id，然后`findViewById(id)`在其上使用和设置值。如果您为您的值定义了公共方法，则可以从 AsyncTask 内部更改它们，然后`loadData()`从`onPostExecute()`.

# java - 使用文件上传访问 pdf 文件

> ID：13383341
> 
> 赞同：1
> 
> 时间：2012-11-14T16:50:03.550
> 
> 标签：java, swing, jfilechooser

我想访问一个 pdf 文件，以便使用 JFileChooser 将其拆分，但 PdfReader 无法读取该文件。IOException 读取“Publishing Letter.pdf 未找到作为文件或资源”。

```
private void butSelectActionPerformed(java.awt.event.ActionEvent evt) {
    int returnValue  = fileChooserPdf.showOpenDialog(this);
    if(returnValue == JFileChooser.APPROVE_OPTION)
    {
        int n;
        String theFile = fileChooserPdf.getSelectedFile().getName();
        String theFileInLower = theFile.toLowerCase();

        JOptionPane.showMessageDialog(null, "Reading the file " + theFileInLower, "Ok", JOptionPane.INFORMATION_MESSAGE);
        try
        {
            PdfReader reader = new PdfReader(theFileInLower);
            n = reader.getNumberOfPages();
            System.out.println("there are " + Integer.toString(n) + " number of pages");
        }
        catch(IOException io)
        {
            JOptionPane.showMessageDialog(null, io.toString(), "Ok", JOptionPane.ERROR_MESSAGE);

        }

    }
    else
    {
        JOptionPane.showMessageDialog(null, "An error occured", "Ok", JOptionPane.ERROR_MESSAGE);
    }

} 
```

是否可以使用 JfileChooser 访问 pdf 文件以进行拆分？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:00:15.183

这是因为您正在使用带有文件名的构造函数。这样文件将在本地目录中搜索。您应该将`InputStream`构造函数与`FileInputStream`. 这样您就可以直接传递选定的`File`对象。

# html - CSS Float - 1px 间距两页完全相同的代码

> ID：13383343
> 
> 赞同：0
> 
> 时间：2012-11-14T16:50:07.773
> 
> 标签：html, css, css-float

为什么我在[http://techmobile.com/contact-usTESTBOX.html](http://techmobile.com/contact-usTESTBOX.html)上的搜索框和页面右边缘之间出现 1-2 像素宽的间隙？

搜索框的完全相同的代码在[http://techmobile.com/open-service-call.html](http://techmobile.com/open-service-call.html)上 ，这个页面没有差距。

我花了超过 2 1/2 小时寻找解决方案。

```
#container #search #searchbox_left   { background-image: url("../images/stories/search_left.gif"); background-repeat: no-repeat; width: 5px; height: 45px; float: left }
#container #search #searchbox_right   { background-image: url("../images/stories/search_right.gif"); background-repeat: no-repeat; width: 6px; height: 45px; float: left }
#container #search #searchbox_area {
float: left;
font: 12px Arial, Helvetica, sans-serif;
background-color: #000000;
height: 33px;
min-width: 410px;
width: auto !important;
width: 410px;
padding: 12px 10px 0px 10px;
color: #FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:55:55.923

在您的`container`div 中`table`有两行。`td`第二行有两个额外空格的页面，每个 1px 宽。

```
<div id="container">
<table width="960" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<tr>
<td width="1" valign="top">
<td valign="top" align="left">
<td width="1" valign="top"> </td>
<td width="1" valign="top"> </td>
<td width="1" valign="top"> 
```

与

```
<div id="container">
<table width="960" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<tr>
<td width="1" valign="top">
<td valign="top" align="left">
<td width="1" valign="top"> 
```

在页面上正确呈现。

**编辑**

只是为了确保解决方案是明确的，要么删除额外`td`的 s ，要么在第二个某处添加一个 colspan 以包含那些额外的单元格来处理间距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:15:32.933

Mookamafoob 的回答是解决问题的一种方法，即使用 HTML 标记而不是样式：在两个页面上，您的顶行唯一的列假定它下面的第二行有三列，其中：

```
<td colspan="3" align="right">...</td> 
```

由于“损坏”页面实际上在第二行中有五列，因此浏览器必须以某种方式处理它们——而且由于额外的两列是空的，它只是将它们压缩到您看到的一两个像素空间中。如果出于某种原因，您需要在“损坏”页面的底行保留额外的两列，只需将顶行的 td 的 colspan 属性更改为 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:38:27.193

在[http://techmobile.com/contact-usTESTBOX.html](http://techmobile.com/contact-usTESTBOX.html)的后续行 (<tr>) 中有 2 个额外的单元格 (<td>) ：

```
 <tr>
    <td valign="top" width="1">...</td>
    <td align="left" valign="top">...</td>
    <td valign="top" width="1"></td>
    <td valign="top" width="1"></td>
    <td valign="top" width="1">...</td>
  </tr> 
```

两种解决方案是可能的。

**第一个解决方案：**将“搜索”行/单元格中的 colspan 值从 3 更改为 5：

```
<td colspan="5" align="right"> ... </td> 
```

**第二种解决方案（*更好*）：**从后续表格行中删除第 3 和第 4 个单元格：

```
 <tr>
    <td valign="top" width="1">...</td>
    <td align="left" valign="top">...</td>
    <td valign="top" width="1">...</td>
  </tr> 
```

两者都有效。选择最适合您的情况的一种。

# javascript - 如何访问此 Javascript 属性？

> ID：13383345
> 
> 赞同：0
> 
> 时间：2012-11-14T16:50:23.237
> 
> 标签：javascript, unit-testing, mocking, sinon

我需要确保`UserMock`调用了下面显示的类中的某个方法。我创建了这个模拟版本来注入另一个模块，以防止测试期间的默认行为。

我已经在使用`sinon.js`，那么如何访问诸如`isValid()`spy/stub 之类的方法并将其替换？是否可以在不实例化类的情况下做到这一点？

```
var UserMock = (function() {
  var User;
  User = function() {};
  User.prototype.isValid = function() {};
  return User;
})(); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:53:10.407

```
var UserMock = (function() {
  var User;
  User = function() {};
  User.prototype.isValid = function() {};
  return User;
})(); 
```

* * *

只需通过`prototype`：

```
(function(_old) {
    UserMock.prototype.isValid = function() {
        // my spy stuff
        return _old.apply(this, arguments); // Make sure to call the old method without anyone noticing 
    }
})(UserMock.prototype.isValid); 
```

* * *

**解释：**

```
(function(_old) { 
```

和

```
})(UserMock.prototype.isValid); 
```

`isValue`对变量的方法进行引用`_old`。进行了闭包，因此我们不会将父范围与变量混合。

```
UserMock.prototype.isValid = function() { 
```

重新声明原型方法

```
return _old.apply(this, arguments); // Make sure to call the old method without anyone noticing 
```

调用旧方法并从中返回结果。

`this`使用 apply 可以将所有参数放入正确的范围 ( ) 中，
例如。如果我们制作一个简单的函数并应用它。

```
function a(a, b, c) {
   console.log(this, a, b, c);
}

//a.apply(scope, args[]);
a.apply({a: 1}, [1, 2, 3]);

a(); // {a: 1}, 1, 2, 3 
```

# c++ - 关于 Qt 的几个问题

> ID：13383346
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:50:25.577
> 
> 标签：c++, qt, cross-platform

1.  它是免费的吗？它看起来像在网站上写着*“立即尝试”*，这让我担心它只是给你一个演示。

2.  您是否必须向 Qt 公司支付任何费用才能使用 Qt 分发程序，或者您可以将其（程序）扔在那里并说您使用了 Qt。

3.  它是本机 C++，还是奇怪的东西，就像 .NET 程序不是真正的 C++ 一样，它们只是看起来像它。

4.  使用我的程序的人是否必须先安装 Qt 框架才能运行它，或者程序会在没有任何安装的情况下运行吗？

5.  它可以轻松编译以在 Windows、Linux 和 Mac OS 上运行吗？

PS：很确定这个问题与：“程序员常用的软件工具”有关，我不明白为什么会有所有的不喜欢并关闭问题。（艰难的人群）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:57:52.477

> 它是免费的吗？它看起来像在网站上显示“立即尝试”，这让我担心它只是给你一个演示。

LGPL 如此自由的言论和免费的啤酒。您必须发布对 Qt 本身的任何更改，但您可以在您的商业应用程序中免费使用它。您可以购买商业许可证，它可以为您提供更好的支持，并有权对库进行任何修改或添加。

> 它是本机 c++，还是奇怪的东西，就像 .NET 程序不是真正的 c++ 一样，它们只是看起来像它。

它是 c++，有一个额外的预编译步骤，它为 GUI 和一些特殊功能（信号/插槽）生成本机 C++ 代码。由于历史原因，它包含自己的许多 c++ 版本，现在是标准的（例如，它自己的 STL 等价物和它自己的线程），但您可以随意混合 STL/boost/Qt 类型。它适用于任何常规的 c++ 编译器。

> 使用我的程序的人是否必须先安装 QT 框架才能运行它，或者程序会在没有任何安装的情况下运行吗？

您需要包含您使用的 Qt 共享库 (dll/so) 以及您的应用程序。在 linux 上，您可以使用系统 Qt 库，在 Windows 上，跨编译器混合 dll 比较棘手。

> 它可以轻松编译以在 Windows、Linux 和 Mac OS 上运行吗？

它很容易构建，`configure --a list of options for stuff you want`或者您可以为所有平台下载已编译的二进制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:03:07.433

（顺便说一句，它拼写为“Qt”，而不是“QT”。）

1.  你去错了网站。相反，请访问[Qt 项目](http://qt-project.org)网站。Qt 是免费和开源的（LGPL 和 GPL）。Digia 提供的商业许可证是可选的。

2.  如果您不购买商业许可证，则无需支付任何费用。当您分发您的程序时，您需要遵守 GPL 或 LGPL 的条款，根据您选择的这两个许可证中的哪一个。

3.  它是原生 C++，除了 QML 模块，它使用 JavaScript 引擎。QML 模块是可选的；如果你愿意，你可以坚持使用 C++。

4.  如果您静态链接到 Qt，那么不会。如果不这样做，则需要在应用程序中包含 Qt DLL。

5.  这三个我都做了，很容易。实际上，为了创建我的应用程序的 Windows 版本，我使用[MXE](http://mxe.cc)在 Linux 中交叉编译它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:00:43.503

1.  [它是双重许可的](http://qt.digia.com/Product/Licensing/License-Comparison/)。如果您正在制作 FOSS，您几乎可以做任何您想做的事情。如果你生产闭源商业软件，如果它在 DLL/.so 中，你可以免费使用它，但如果你将它静态链接到你的应用程序中，则必须付费。
2.  看上面。取决于你如何链接到它。
3.  它是本机 C++，无需任何虚拟机或类似的东西即可运行。它确实使用“元对象编译器”（MOC）来生成部分代码，所以要做*一些*事情，你用另一种语言编写一些东西，将 MOC 翻译成 C++，然后编译它。
4.  如果您静态链接它，它只会在您的可执行文件中。如果您动态链接，它将位于 DLL/.so 中，但我相信您可以将其安装为程序的一部分（即，它将位于单独的文件中，但用户不必安装它分别地）。
5.  是的，无论如何都相当容易。

# c# - DateTime.Parse 带有“+”符号

> ID：13383349
> 
> 赞同：4
> 
> 时间：2012-11-14T16:50:48.067
> 
> 标签：c#, .net, datetime, iso8601

我有一段代码可以解析和验证用户输入：

```
DateTime myDateTime = DateTime.Parse(userInput,currentCulture); 
```

当前文化正在设置（为 en-ca 或 fr-ca），用户输入始终采用 ISO 8601 格式“yyyy-MM-dd”。

如果用户输入 1900-01-01，则按预期创建日期。 **如果输入是“1900-01+01”，则创建的日期时间是 1899-12-31 6:00:00 PM** 没有抛出异常，DateTime.Parse 很乐意将其转换为错误的日期。

为了完成这项工作，我正在使用`DateTime.ParseExact(userInput,"yyyy-MM-dd",currentCulture)`.

所以我的问题不是如何使这项工作（我有），而是 +01 或任何 + 值是怎么回事？我在 ISO 标准中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:59:30.513

ISO8601 中唯一`+`的时间偏移部分，在这种情况下看起来是这样解析的。但据我所知，在允许时间偏移之前，日期的所有 3 个部分都需要具有有效值。

我建议使用`DateTime.ParseExact(userInput,"yyyy-MM-dd",...`（甚至可能使用`InvariantCulture`）。

`DateTime.Parse`接受各种各样的输入，并试图对用户的意图做出最好的猜测。当它只是以令人困惑的方式猜测时，这感觉就像一个案例。

样本值（第一个本地 PDT，另外 2 个具有显式时间偏移）：

```
DateTime.Parse("1900-02"   ).ToUniversalTime()    //  2/ 1/1900  8:00:00 AM 
DateTime.Parse("1900-02+00").ToUniversalTime()    //  2/ 1/1900 12:00:00 AM
DateTime.Parse("1900-02+03").ToUniversalTime()    //  1/31/1900  9:00:00 PM 
```

这似乎`Parse`本质上`"YYYY-MM+0x"`被视为`"YYYY-MM-01T00:00+0x"`.

# c++ - 从私有嵌套类型继承在 C++11 中是否合法？

> ID：13383351
> 
> 赞同：4
> 
> 时间：2012-11-14T16:50:54.313
> 
> 标签：c++, c++11, language-lawyer, pimpl-idiom

我想要做的是在我的库类中将可变大小的 POD 作为 Pimpl：

```
// header file
class foo {
public:
    // ctors, copy, move, dtor, etc.

private:
    struct impl; // forward-declared
    impl* pimpl; // pointer to private implementation
}; 
```

然后像这样定义几个固定大小的实现：

```
// .cpp implementation file
struct foo::impl {
    uint32_t refs;
    uint32_t size;
    uint32_t len;
    uint32_t data;
};

static_assert( sizeof( typename foo::impl ) == 16, "paranoia" );

namespace { // anonymous
    typedef typename foo::impl base;

    template <size_t S>
    struct block : base {
        static_assert( S > 16, "invalid block size" );
        static_assert((( S - 1 ) & S ) == 0, "block size must be power of 2" );

        uint8_t pad[S - 16];
    };

    typedef block<64>  block64;
    typedef block<128> block128;
    // ...
}

// foo implementation using the above PODs 
```

GCC 版本 4.6 和 4.7 用 编译这个没有问题`-std=c++0x -Wall -pedantic`，但我仍然对使用这样的私有嵌套类型名称的合法性感到模糊。翻阅我的 C++11 标准的 [可能是过时的草案] 副本并没有给我任何更好的线索。

如果有人能指出我的任何东西（最好是标准中的一个部分）可以证明这种方式或另一种方式（合法与否），我将永远感激不尽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:53:52.443

我认为这是不允许的。虽然标准中有一条说明

> 因为访问控制适用于名称，如果访问控制适用于 typedef 名称，则仅考虑 typedef 名称本身的可访问性。不考虑 typedef 引用的实体的可访问性。

所以在

```
struct block : base 
```

该名称`base`是可访问的。但是 typedef 本身使用 name `foo::impl`，这是私有的，因此无法访问。在 static_assert 中也无法访问该名称。

我没有看到任何允许在这些上下文中访问名称的异常。

我的编译器为此代码产生了这些错误：

```
main.cpp:16:27: error: 'impl' is a private member of 'foo'
static_assert(sizeof(foo::impl) == 16, "paranoia");
                          ^
main.cpp:4:12: note: declared private here
    struct impl; // forward-declared
           ^
main.cpp:19:27: error: 'impl' is a private member of 'foo'
    typedef typename foo::impl base;
                          ^
main.cpp:4:12: note: declared private here
    struct impl; // forward-declared
           ^ 
```

* * *

一种选择可能是在其中包含一个公共朋友`foo`，该朋友可以访问其中的私人名称`foo`。然后，您可以将该朋友类型的定义放在 cpp 文件中，以便它公开的名称仅在该文件中公开：

```
// header
struct foo {
    struct private_public_access;
private:
    struct impl;
};

// cpp
struct foo::impl {};

struct private_public_access {
    typedef foo::impl foo_impl;
};

typedef private_public_access::foo_impl base; 
```

任何人都可以使用 name `private_public_access`，但他们没有定义，因此无法访问`private_public_access::foo_impl`（尽管他们可以自己定义它以获得访问权限......）。尽管如果这是可以接受的，那么将名称`foo::impl`公开并将其定义隐藏起来（并且 like`private_public_access`的定义已隐藏）也许同样可以接受。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T17:55:53.407

您拥有的实现是不合法的：访问`foo::impl`是私有的，即只有定义`foo`或其成员可以引用它。在实现文件中，您在命名空间范围内引用名称。

标准的相关部分是 11 [class.access] 第 1 段和第 4 段。

# c# - 剪贴板 + PresentationFramework = OutOfMemoryException？

> ID：13383354
> 
> 赞同：3
> 
> 时间：2012-11-14T16:51:02.410
> 
> 标签：c#, .net, wpf, clipboard

为什么`System.Windows.Clipboard`（PresentationCore.dll）对 `System.Windows.Thickness`（PresentationFramework.dll）不友好但对`System.Windows.Point`（WindowsBase.dll）友好

```
using System;
namespace ConsoleApplication5 {
    class Program {
        /*
        * Add references to 
        * WindowsBase.dll (Point)
        * PresentationFramework.dll (Thickness)
        * PresentationCore.dll (Clipboard)
        */

        [STAThread]
        static void Main(string[] args)
        {
            Test myTest = new Test();
            System.Windows.Clipboard.SetData("myformat", myTest);
            // OutOfMemoryException
            Object myPastedTest = System.Windows.Clipboard.GetData("myformat");
        }
    }

    [Serializable]
    class Test
    {
        // COMMENT THE LINES BELLOW PresentationFramework TO WORK OK!
        // PresentationFramework.dll
        //public System.Windows.Thickness MyThickness { get; set; } 
        public System.Windows.Media.Brush MyBrush { get; set; }

        // WindowsBase.dll
        public System.Windows.Point MyPoint { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:30:34.713

Brush 类不可序列化并导致抛出 OutOfMemoryException（请参阅[http://www.grumpydev.com/2009/09/05/system-outofmemoryexception-gotcha-using-clipboard-getdata-in-wpf/](http://www.grumpydev.com/2009/09/05/system-outofmemoryexception-gotcha-using-clipboard-getdata-in-wpf/)）。您也许可以将 Test 类序列化为 XAML 并将其放到剪贴板上，请参阅此链接以获取信息：

[我怎样才能序列化xaml“画笔”？](https://stackoverflow.com/questions/4488476/how-can-i-serialize-xaml-brush)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:30:52.600

根据 msdn，[`Point`](http://msdn.microsoft.com/en-us/library/system.windows.point.aspx)有`SerializableAttribute`，而[`Thickness`](http://msdn.microsoft.com/en-us/library/system.windows.thickness.aspx)没有。`SerializableAttribute`不适用于班级成员。这解释了为什么`Clipboard.SetData()`静默失败，以及为什么`Clipboard.GetData()`返回垃圾。

`Thickness`您可以围绕该 implements`ISerializable`和 has编写一个包装器`SerializableAttribute`，如下所示：

```
[Serializable]
public struct SerializableThickness : ISerializable
{
    public Thickness Data;

    public SerializableThickness(Thickness t)
    {
        Data = t;
    }

    #region ISerializable
    private const string LeftField = "LeftField";
    private const string TopField = "TopField";
    private const string RightField = "RightField";
    private const string BottomField = "BottomField";

    private SerializableThickness(SerializationInfo info, StreamingContext context)
    {
        if (info == null)
            throw new ArgumentNullException("info");

        var enumerator = info.GetEnumerator();
        bool[] found = { false, false, false, false };
        double[] values = new double[4];
        while (enumerator.MoveNext() && !found.All(x => x))
        {
            switch (enumerator.Name)
            {
                case LeftField:
                    found[0] = true;
                    values[0] = (double)enumerator.Value;
                break;

                case TopField:
                    found[1] = true;
                    values[1] = (double)enumerator.Value;
                break;

                case RightField:
                    found[2] = true;
                    values[2] = (double)enumerator.Value;
                break;

                case BottomField:
                    found[3] = true;
                    values[3] = (double)enumerator.Value;
                break;
            }
        }

        if (!found.All(x => x))
            throw new SerializationException("Missing serializable members");

        Data = new Thickness(values[0], values[1], values[2], values[3]);
    }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue(LeftField, Data.Left);
        info.AddValue(TopField, Data.Top);
        info.AddValue(RightField, Data.Right);
        info.AddValue(BottomField, Data.Bottom);
    }
    #endregion
} 
```

# c++ - C++：为什么 boost::ptr_vector 调整大小需要对象具有默认构造函数

> ID：13383357
> 
> 赞同：3
> 
> 时间：2012-11-14T16:51:20.143
> 
> 标签：c++, pointers, boost, vector, ptr-vector

我在 std::vector 上使用 boost::ptr_vector 因为它将为我处理所有指针的删除。但是，当我这样做时：

```
ptr_vector<SoftLabelRandomTreeFunctor> functors;
functors.resize(number_of_functors); 
```

它抱怨`SoftLabelRandomTreeFunctor`没有默认构造函数。但是，我的印象是它只需要调整大小以适应`number_of_functors`* 指向 a 的指针的大小`SoftLabelRandomTreeFunctor`，而不是`number_of_functors`* a`SoftLabelRandomTreeFunctor`本身的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:10:47.277

我对 Boost 并没有真正的经验，所以对我的回答持保留态度。但是，浏览文档`boost::ptr_vector`让我认为你想要的（从问题的评论如下）应该可以这样做：

```
boost::ptr_vector< boost::nullable<SoftLabelRandomTreeFunctor> > functors;
functors.resize(number_of_functors, 0); 
```

供您阅读并得出自己结论的参考资料：

*   [空值](http://www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/tutorial.html#null-values)
*   [`class nullable`](http://www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/reference.html#class-nullable)
*   [`void resize( size_type size, T* to_clone );`](http://www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/ptr_sequence_adapter.html#modifiers)`to_clone`-如果容器支持空值，请参阅可以为 0的备注

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:04:53.310

当您编写时，`functors.resize(number_of_functors)`您可能会增加向量的大小以包含其中的`number_of_functors`元素。由于`ptr_vector`默认情况下不允许存储`NULL`值，因此需要将有意义的数据放入膨胀数组中。该函数打算调用`new SoftLabelRandomTreeFunctor()`每个新元素，并且它需要一个默认构造函数。

如果您想允许 NULL，您需要`boost::nullable`Alexey Kukanov 回答所建议的，以及手册中包含的教程（[(here)](http://www.boost.org/doc/libs/1_53_0/libs/ptr_container/doc/tutorial.html#null-values)）。

但是，如果您只是打算为`number_of_functors`元素保留足够的内存而不在语义上创建它们并且不增加数组大小——您不需要`nullable`并且应该调用：

`functors.reserve(number_of_functors)`

请注意，在此之后，您仍然需要在放置新元素时增加数组大小（例如 via `push_back`）。您将得到保证，`push_back`只要您的大小不超过，就不会调用内存重新分配`number_of_functors`。

# java - 找不到自己的类 Java 的符号

> ID：13383358
> 
> 赞同：2
> 
> 时间：2012-11-14T16:51:20.497
> 
> 标签：java

我意识到这已经被问了很多，但无法从这些答案中找出问题所在。

我有一个抽象类任务：

```
package crowdtrust;

public abstract class Task
{

  public enum Type
  {
    BinaryImageClassification;
  };

  public abstract void assignCrowd();
}; 
```

一个实施任务：

```
package crowdtrust;

import java.util.Collection;
import java.util.List;

public class BinaryTask extends Task
{

  private List<SubTask> subtasks;

  public BinaryTask(String name, String question)
  {
    super();
    this.name = name;
    this.question = question;
  }

  public boolean assignSubtask(SubTask s)
  {
      return subtasks.add(s);
  }

  public void assignCrowd()
  {
    //TODO 
  }

}; 
```

和子任务类：

```
package crowdtrust;
public class SubTask {
  //not important
} 
```

这些都在 ct/src/crowdtrust

从 ct 我运行这个 makefile：

```
CONTEXT   = webapps/ROOT
SRCDIR    = src

CLASSDIR  = $(CONTEXT)/WEB-INF/classes
LIBDIR    = $(CONTEXT)/WEB-INF/lib

JAVAC     = javac

SOURCES   = $(wildcard $(SRCDIR)/crowdtrust/*.java)
CLASSES   = $(SOURCES:.java=.class)

all: install clean

clean:
    rm -f $(CLASSES)

install: $(CLASSES)
    install -m600 $(CLASSES) $(CLASSDIR)/crowdtrust

%.class: %.java
    $(JAVAC) -cp $(LIBDIR) $< 
```

得到这些（加上更多类似的）错误：

```
javac -cp webapps/ROOT/WEB-INF/lib src/crowdtrust/BinaryTask.java
src/crowdtrust/BinaryTask.java:6: cannot find symbol
symbol: class Task
public class BinaryTask extends Task
                                ^
src/crowdtrust/BinaryTask.java:9: cannot find symbol
symbol  : class SubTask
location: class crowdtrust.BinaryTask
  private List<SubTask> subtasks;
               ^ 
```

任何想法是什么导致了错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:06:12.247

我相信它没有正确找到依赖关系并且`BinaryTask`在`Task`. 要解决此问题，请在您的 make 文件中将显式依赖项定义为：

```
 SOURCES = Task.java SubTask.java BinaryTask.java
  BinaryTask.class: Task.class SubTask.class 
```

# python - Python：Urllib2 检查标头中缺少的内容长度

> ID：13383362
> 
> 赞同：1
> 
> 时间：2012-11-14T16:51:30.007
> 
> 标签：python, urllib2, content-length

我有一个脚本“似乎”在我们的测试环境中工作，因为缺乏可见性。但是，我们现在正在我们的预生产环境中进行测试，我们注意到以下问题......

该脚本的基本功能是在主机 Web 前端执行 HTTP/URL 请求并返回状态码以及内容大小（即`content-length`）。我无法解决问题，如何`content-lenght`在将其分配给变量之前对其进行检查。目前我有以下内容：

```
#... Code ...
try:
  conn = urllib2.urlopen(line, timeout=1)
  contentLen = conn.headers['content-length']
#... Code ... 
```

但是，对于缺少此内容长度的 URL，如果缺少内容长度，它只会破坏脚本。而不是引发异常，我想在分配之前简单地检查它是否存在`contentLen`，然后如果它存在则分配实际`content-length`值，如果它不存在则分配值“NULL”。所以这可以打印为“ `Null`”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:55:20.440

`conn.headers`是 a `httplib.HTTPMessage`，它是 的子类，`rfc822.Message`因此具有（有限的）类似[`dict`interface](http://docs.python.org/2/library/rfc822.html#rfc822.Message.get)。您可以使用 2 参数调用来`get`提供默认值。

```
contentLen = conn.headers.get('content-length','NULL') 
```

# html - Facebook 喜欢按钮不回帖到 Facebook

> ID：13383367
> 
> 赞同：2
> 
> 时间：2012-11-14T16:51:47.417
> 
> 标签：html, facebook, facebook-like, xfbml

我在我的网站 (xfbml) 和所有必要的元标记 (app_id、title、type、url、image、site_name、desc) 中添加了类似 facebook 的按钮。当我点击点赞按钮时，无论我是否指定评论，我都看到点赞数增加了，但没有任何帖子发布到我的 Facebook。直到我使用 LINT 工具进行调试，帖子才如我所愿出现。所以我认为问题是facebook不要在第一时间刮掉我的页面。我从开发者页面读到：

> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。

我已经等了超过 24 小时，但在我使用 Linter 之前什么都没有发生。但是对于我使用 Linter 的任何链接，类似 facebook 的按钮都可以正常工作。谁能帮我解决这个问题？我的网站即将部署到生产环境中，但我不能不解决它。我已经花了4天了。

我的网站还使用 Spring Social 通过 facebook 身份验证登录。

这是我的代码：

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
        appId : XXXXXXXX, 
        status : true, 
        cookie : true, 
        xfbml : true
    });

};

(function(d, debug) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement('script');
    js.id = id;
    js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "")
            + ".js";
    ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/false)); 
```

在我的html中：

```
<fb:like href="http://example.com/abc" send="true" width="460" show_faces="true"></fb:like>
<br /> <br /> <br />
<fb:comments href="http://example.com/abc" num_posts="5" width="460"></fb:comments> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:11:13.390

您是否包含了 xml 命名空间

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

在文件的开头？？？为什么不使用 iframe 代替？？？从我那里工作得更好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:00:34.910

由 facebook 开发人员提供：

在您的页面上包含一次 JavaScript SDK，最好是在开始标记之后。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1&appId=500886696626919";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

将 XML 命名空间添加到文档的标记中。这是 XFBML 在早期版本的 Internet Explorer 中工作所必需的。

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

将插件代码放置在您希望插件出现在页面上的任何位置。

```
<fb:like href="http://www.frisianallies.nl" send="true" width="450" show_faces="true"></fb:like> 
```

如果您将这些东西添加到您的网站，一切都会正常工作，您甚至可以调整它们的 css。

# objective-c - Xcode 4 和分支

> ID：13383369
> 
> 赞同：3
> 
> 时间：2012-11-14T16:51:49.433
> 
> 标签：objective-c, ios, xcode

我正在使用 Xcode 4.5 和 Git 进行版本控制。我创建了一个新分支并向其中添加了一些代码。当我转到管理器/我的存储库并单击切换分支时，我无法切换到分支，因为我收到以下错误消息：

> 工作副本已修改

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:03:03.920

弄清楚了。我不得不删除 xcuserstate 并将其添加到我的 .gitignore

```
git rm --cached ProjectFolder.xcodeproj/project.xcworkspace/xcuserdata/myUserName.xcuserdatad/UserInterfaceState.xcuserstate
git commit -m "Removed file that shouldn't be tracked" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:57:55.203

您必须先提交对该分支的更改，然后才能切换分支。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T20:17:36.757

我昨天也遇到了同样的问题，我只是去项目目录，使用这些命令，就能解决问题。混帐添加。和 git commit -m “已解决的工作副本已修改”

# c# - Windows 8 应用商店应用程序中的 SetSuspendState

> ID：13383370
> 
> 赞同：0
> 
> 时间：2012-11-14T16:51:49.287
> 
> 标签：c#, windows-8, windows-runtime

是否可以通过 Windows 8 商店应用程序以某种方式暂停计算机？在 Windows 窗体中，我可以使用 Application.SetSuspendState，或者通过 powrprof.dll 中的 P/Invoke 调用 SetSuspendState，但这里似乎没有任何效果。我怀疑实际上不允许应用程序暂停计算机，但我想确定这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:00:08.823

查看Windows 应用商店应用程序支持的[C#](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)和[Native API ，答案是](http://msdn.microsoft.com/en-us/library/windows/apps/br205762.aspx)**否定**的。这些列表不包含对这些 API 的引用，因此如果要接受它们，则不要使用它们。

# git - 如何从合并到我们自己的仓库中的外部仓库中提取更改

> ID：13383372
> 
> 赞同：0
> 
> 时间：2012-11-14T16:51:50.677
> 
> 标签：git

我已将外部仓库中的一个文件夹合并到我自己的仓库中。这是通过调用以下命令完成的：

```
git remote add -t master -f slidingmenu https://github.com/jfeinstein10/SlidingMenu.git
git merge -s ours --no-commit --squash slidingmenu/master
git read-tree --prefix=SlidingMenu/ -u slidingmenu/master:library
git commit -m "Merge Project SlidingMenu into SlidingMenu folder" 
```

如您所见，我只合并了slidingmenu repo 的“library”子文件夹，并将其放入我的repo 中的SlidingMenu 文件夹中。现在有一种简单的方法可以将外部存储库中的更新拉到我自己的库中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:17:49.057

您现在应该能够进行正常合并 - 它会看到您在 repo 中所做的更改，并且只会合并需要合并的内容。

# php - 繁忙的 PHP 连接到 MYSQL？

> ID：13383373
> 
> 赞同：0
> 
> 时间：2012-11-14T16:51:55.150
> 
> 标签：php, mysql, pdo, pdostatement

`PHP & MySQL Novice to Ninja, 5th Edition`这是一部分 `Kevin Yank`

> 通常，当我们执行 SELECT 查询时，我们使用 while 循环或 foreach 循环的条件来检索结果的每一行，一次一个：

```
while ($row = $result->fetch()) foreach ($result as $row) 
```

> 当我们以这种方式处理查询结果时，PHP 实际上会在循环请求时从数据库中检索每一行，并在它移动到下一行时将其丢弃。这使 PHP 不必使用大量内存来一次保存所有结果行。
> 
> 大多数时候，我们开发人员不需要知道 PHP 正在走这条聪明的捷径。但是每隔一段时间，我们会想在处理完前一个查询的所有结果之前向 MySQL 服务器发送另一个 SQL 查询。
> 
> 如果我们不小心的话，这正是这段代码中即将发生的事情：我们刚刚运行了一个 SELECT 查询来询问属于特定作者的所有笑话的列表，当我们处理这个列表时，我们想为每一个执行一个 DELETE 查询。问题是，据 MySQL 所知，它仍然会忙着向我们发送 SELECT 查询的结果；我们不能只是打断它并要求它开始运行 DELETE！这样做会导致我们的 DELETE 失败并出现错误。
> 
> 这就是 fetchAll 方法的用武之地。通过在准备好的语句 ($s) 上调用此方法，我们要求 PHP 检索查询的整个结果集并将它们存储在 PHP 数组 ($result) 中：

我的问题是为什么我可以`PDOStatement` `result sets`在我的 PHP 代码中使用一个或多个语句时执行 MYSQL 语句？甚至我可以`delete`在这些行中引用所有行`result sets`

```
<?php
    include_once $_SERVER["DOCUMENT_ROOT"] . '/DBconnection.inc.php';

        $pds1 = $dbi->query("SELECT name FROM tbl1");
        $row = $pds1->fetch();
        var_dump($row['name']);

        $pds2 =  $dbi->query("SELECT user FROM tbl2");
        $row = $pds2->fetch();
        var_dump($row['user']);

        $row = $pds1->fetch();
        var_dump($row['name']);

        $row = $pds2->fetch();
        var_dump($row['user']);

        $pds3= $dbi->prepare("DELETE FROM tbl1;");
        $pds3->execute();

        $row = $pds1->fetch();
        var_dump($row['name']);

        $row = $pds2->fetch();
        var_dump($row['user']);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:30:21.770

这是一个 PDO 的行为将取决于您正在使用的数据库和 PDO 驱动程序实现的区域。当您仍在获取 select 语句的结果时，您可能能够执行新查询，**[或者您可能不会](https://stackoverflow.com/questions/13364852/unbuffered-query-error-with-pdo-and-stored-procedures)**。

一般来说，使用 PDO 连接的最安全和最兼容的方式是：

1.  执行您的 SELECT 语句
2.  获取您需要的所有行
3.  关闭光标（例如：用`$pds1->closeCursor()`）
4.  执行你的下一个查询

# objective-c - 音频会话更改时 MPVolumeView 滑块消失

> ID：13383376
> 
> 赞同：3
> 
> 时间：2012-11-14T16:52:01.833
> 
> 标签：objective-c, ios, avaudioplayer, ipod, mpvolumeview

这是我在这里的第一个问题，所以如果我在问题的格式上犯了任何错误，我提前道歉。

我的应用程序中有一个设置屏幕，我在其中放置了一个 UISlider 来控制音量，我从 MPVolumeView 获得了这个滑块，如下所示：

```
- (UISlider *)getSystemVolumeSlider {
    UISlider *volumeSlider;
    UISlider *designTemplateSlider = [[UISlider alloc] init];
    ///////volume slider////////////////////////////////

    MPVolumeView *volumeView = [[MPVolumeView alloc] init];

    //get only the slider
    for (id current in volumeView.subviews){
        if ([current isKindOfClass:[UISlider class]]) {
            volumeSlider = (UISlider *)current;

            UIImage *minimumTrackImage = [[designTemplateSlider minimumTrackImageForState:UIControlStateNormal] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 6, 0, 6)];
            [volumeSlider setMinimumTrackImage:minimumTrackImage forState:UIControlStateNormal];
            UIImage *maximumTrackImage = [[designTemplateSlider maximumTrackImageForState:UIControlStateNormal] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 6, 0, 6)];
            [volumeSlider setMaximumTrackImage:maximumTrackImage forState:UIControlStateNormal];
            [volumeSlider setThumbImage:[designTemplateSlider thumbImageForState:UIControlStateNormal] forState:UIControlStateNormal];

            Method originalThumbRect = class_getInstanceMethod(NSClassFromString(@"MPVolumeSlider"),
                                                               @selector(thumbRectForBounds:trackRect:value:));
            Method newThumbRect = class_getInstanceMethod([CustomUISlider class],
                                                          @selector(thumbRectForBounds:trackRect:value:));
            method_exchangeImplementations(originalThumbRect, newThumbRect);
            [volumeSlider setFrame:CGRectMake(0, 0, 120, 27)];

        }
    }
    return volumeSlider;
} 
```

问题是当我更改音频会话（插件耳机或以编程方式）时，滑块会从屏幕上消失。该滑块位于表格视图内，因此如果我再次向下和向上滚动，滑块将再次显示。任何人都知道如何将其保留在屏幕上或为什么会消失？顺便说一句，我使用 AVAudioPlayer 播放声音。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:08:17.937

看起来您正在使用 ARC，并且您的实例可能已被释放并且系统将其从其超级视图中删除......只是一个快速的想法。

我没有检查这个，但我会尝试将你的滑块移动到你班级的一个属性，然后分配它并再次测试。

# android - 布局中的颜色不一致

> ID：13383377
> 
> 赞同：0
> 
> 时间：2012-11-14T16:52:03.433
> 
> 标签：android, android-layout

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativelayout01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#000000" >

    <RelativeLayout
        android:id="@+id/relativeLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:padding="20dp"
            android:text="@string/secondary_user_title"
            android:textColor="#ffffff"
            android:textSize="24sp"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/tweddleimage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/title"
            android:layout_centerHorizontal="true"
            android:focusable="true"
            android:paddingBottom="20dp"
            android:paddingTop="20dp"
            android:src="@drawable/secondary_user_icon" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout03"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/relativeLayout02" >

        <TextView
            android:id="@+id/line1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"

            android:background="@drawable/border"
            android:visibility="visible" />

        <TextView
            android:id="@+id/line2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/line1"
            android:background="@drawable/border"
            android:visibility="visible" />
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/linearLayout04"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/relativeLayout03"
        android:background="#000000"
        android:orientation="vertical"
        android:paddingLeft="4dp"
        android:paddingRight="4dp" >

            <Button
                android:id="@+id/Tweddle"
                android:layout_width="fill_parent"
                android:layout_height="75dp"
                android:background="@drawable/chrysler_btn_bkg"
                android:drawableRight="@drawable/tweddle_status"
                android:paddingLeft="82dp"
                android:paddingRight="60dp"
                android:text="via Mobile"
                android:textColor="#ffffff"
                android:textSize="24sp"
                android:visibility="visible" />

        </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout06"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/linearLayout04"
        android:background="#000000"
        android:orientation="horizontal"
        android:paddingLeft="4dp"
        android:paddingRight="4dp" >

        <ImageButton
            android:id="@+id/contactus"
            style="@style/chryslerButtonStyle"
            android:src="@drawable/icon_contactus" />

        <ImageButton
            android:id="@+id/help"
            style="@style/chryslerButtonStyle"
            android:src="@drawable/icon_help" />

        <ImageButton
            android:id="@+id/ext1"
            style="@style/chryslerButtonStyle"
            android:background="@drawable/chrysler_btn_bkg"
            android:visibility="invisible" />

        <ImageButton
            android:id="@+id/ext2"
            style="@style/chryslerButtonStyle"
            android:background="@drawable/chrysler_btn_bkg"
            android:visibility="invisible" />
    </LinearLayout>

</RelativeLayout> 
```

以上是我的布局代码，但看起来像[这样](http://i.imgur.com/cIYxj.png)。

在图形模式下，我单击底部的部分，我看到：@+id/relativelayout01 和背景 #000000 有人能发现这个吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:55:20.320

您的高度设置为包裹内容。底部背景是默认的深色背景。`android:layout_height="match_parent"`如果您希望黑色填充整个屏幕，请更改要使用的根标签。

# c# - 内部文本框的自定义控件属性

> ID：13383378
> 
> 赞同：2
> 
> 时间：2012-11-14T16:52:08.817
> 
> 标签：c#, winforms, visual-studio-2012, custom-controls, designer

考虑一个具有属性 Rows 的自定义控件：

```
private EMRow[] _rows;

public CustControl()
{
    InitializeComponent();
}

public EMRow[] Rows
{
    get
    {
        return _rows;
    }
    set
    {
        _rows = value;
    }
} 
```

每个 EMRow 创建一个 TextBox 并公开两个属性，一个用于 Text，另一个用于控件本身：

```
private TextBox _txtValue;

public EMRow()
{
    if (_txtValue == null)
        _txtValue = new TextBox();
}

public string Value
{
    get
    {
        return _txtValue.Text;
    }
    set
    {
        _txtValue.Text = value;
    }
}

public TextBox ValueTextBox
{
    get
    {
        return _txtValue;
    }
    set
    {
        _txtValue = value;
    }
} 
```

如果将此自定义控件拖放到窗体上并修改 Value 属性，它会更新并保护对 Designer.cs 文件的更改。

当您深入研究 ValueTextBox 属性（同样，所有这些都在 Visual Studio 设计器中，而不是代码中）并修改属性时，更改不会保存到 Designer.cs 文件中。就设计者而言，甚至没有创建和引用此属性的 TextBox 对象。

我确信这是“预期的”行为，但我不知道为什么。我在这里错过了 VS 设计师的基础知识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:55:05.110

经过一番挖掘，我找到了解决这个问题的方法，告诉设计者通过添加 DesignerSerializationVisibility 属性来序列化这个对象本身

```
private TextBox _txtValue;

public EMRow()
{
    if (_txtValue == null)
        _txtValue = new TextBox();
}

public string Value
{
    get
    {
        return _txtValue.Text;
    }
    set
    {
        _txtValue.Text = value;
    }
}

[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
public TextBox ValueTextBox
{
    get
    {
        return _txtValue;
    }
    set
    {
        _txtValue = value;
    }
} 
```

[Winforms Designer：修改（并保留）子对象中的属性](https://stackoverflow.com/questions/600759/winforms-designer-modify-and-keep-properties-in-sub-objects?rq=1) 感谢 Hans！

# php - 如何捕获 MySql 错误代码？

> ID：13383380
> 
> 赞同：2
> 
> 时间：2012-11-14T16:52:16.817
> 
> 标签：php, mysql, pdo

例如：

```
SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction ROLLING BACK 
```

我从代码中抛出的 PDOEception 中收到此消息。我想截取错误代码（`1213`）并对其进行具体处理。

为什么？
例如死锁意味着我只需要在一微秒左右后重新提交查询。其他错误，意味着我需要提醒开发人员等）。

现在我必须编码（在继承的类中`PDO`）：

```
 try{
        $this->lastStatement = $sql;
        $this->lastStatement->execute($params);
    }catch (PDOException $e){
        return $this->error($e);
    } 
```

我不能使用`getCode`of，`$E`因为它似乎没有 MySQL 的全部错误范围。例如，下面的错误：`SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; try restarting transaction` 将返回`HY000`这是一个非常通用的代码。用于许多不同的错误类型。

**我应该解析错误消息吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:55:59.837

```
$e->getCode(); 
```

它包含 SQLSTATE 代码，其中的`40001`意思是“死锁”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:17:54.510

现在，我看到的唯一选择是解析错误消息本身并提取四位数的错误代码。

```
$s='SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; try restarting transaction';
$p='/\b[0-9]+/';
preg_match($p,$s,$m);
var_dump($m); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T14:31:16.077

PDO 语句有一个函数 ->errorInfo()，它返回一个有用信息的数组 - 检查 $err[2] 其中 $err 是从上述函数返回的数组。

[http://php.net/manual/en/pdo.errorinfo.php](http://php.net/manual/en/pdo.errorinfo.php)

# django - 更改密码后显示消息？

> ID：13383381
> 
> 赞同：5
> 
> 时间：2012-11-14T16:52:19.490
> 
> 标签：django, django-authentication

我正在使用django 提供的[默认更改密码机制。](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.password_change)

我`post_change_redirect`过去常常让提交的表单直接返回我的设置页面，但是我想显示一条消息以向用户保证操作已成功。如何检测我是否由于密码更改成功而进入设置视图，并为此添加一条消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-03T11:10:35.083

我不建议在设置视图中检查用户是否通过密码更改到达。我认为理想情况下，密码更改的所有逻辑都包含在同一个地方。这使得查找逻辑变得更容易，并且不需要设置视图了解密码更改视图（因此您可以轻松更改逻辑以将用户重定向到其他地方）。

最好的办法是基于`PasswordChangeForm`而不是使用内置视图编写自己的`password_change`视图。通过这种方法，您可以使用[消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)来显示成功消息。（您还必须启用消息框架并将其标记放在您的视图中。）

例如，如果您想显示一条简单的消息并重定向回名为 的 URL 模式`'settings'`，您可以编写如下视图：

```
from django.contrib import messages
from django.contrib.auth.forms import PasswordChangeForm
from django.core.urlresolvers import reverse_lazy
from django.views.generic import FormView

class PasswordChangeView(FormView):
    template_name = 'registration/password_change_form.html'
    form_class = PasswordChangeForm
    success_url = reverse_lazy('settings')

    def get_form_kwargs(self):
        kwargs = super(PasswordChangeView, self).get_form_kwargs()
        kwargs['user'] = self.request.user
        return kwargs

    def form_valid(self, form):
        form.save()
        messages.success(self.request, "Your password has been changed.")
        return super(FormView, self).form_valid(form) 
```

希望`password_change`将来该视图将基于类，从而允许使用更少的样板实现相同的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-13T04:19:15.097

当用户成功更改密码时，您可以使用[Django 消息框架](https://docs.djangoproject.com/en/1.11/ref/contrib/messages/)`django.contrib.auth.views.PasswordChangeView`进行子类化以添加消息。

在`views.py`：

```
from django.contrib import messages
from django.contrib.auth.views import PasswordChangeView
from django.urls import reverse_lazy

class CustomPasswordChangeView(PasswordChangeView):
    # Optional (default: 'registration/password_change_form.html')
    template_name = 'myapp/my_password_change_form.html'
    # Optional (default: `reverse_lazy('password_change_done')`)
    success_url = reverse_lazy('settings')

    def form_valid(self, form):
        messages.success(self.request, 'Your password has been changed.')
        return super().form_valid(form) 
```

然后在您的应用程序中`urls.py`：

```
from django.conf.urls import url
import myapp.views as views

urlpatterns = [
    url(r'^settings/password/change/$',
        views.CustomPasswordChangeView.as_view(),
        name='password_change'),
    # ...
] 
```

这个答案通过以下方式改进了@enginoid 提供的答案：

*   该表单的行为与默认密码更改机制几乎相同。
*   更少的代码重复。

# php - .htaccess，重写 url 有一些例外

> ID：13383387
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:52:39.300
> 
> 标签：php, .htaccess

我有一个这样的网址：
`page.com?c=example1&a=example2`
但我想拥有这样的网址：
`page.com/example1/example2`

但是，如果用户`page.com/public/...`不做任何事情，因为我有目录`public/css/smth.css`并且当我尝试访问它时，它会更改为类似于`page.com?c=public&a=css/smth.css...`我不想要的东西。

我如何仅对不以 开头的网址执行此操作`public`？

我当前的.htaccess：

```
Options +FollowSymlinks  
RewriteEngine on   
RewriteRule ^([^/]+)/([^/]+) index.php?c=$1&a=$2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:08:51.740

您的 .htaccess 文件需要如下所示：

```
# Follow symbolic links
Options +FollowSymlinks

# Turn on the rewrite engine
RewriteEngine On

# Set the general first level rewrites
RewriteRule ^(.+)/((?!public).*)/(.+)/?$ $1.php?c=$2&a=$3 [NC] 
```

我没有测试过以上，但它应该是正确的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:04:30.767

希望这可以帮助！

```
RewriteRule ^page.com/public/([a-zA-Z0-9-]*)/$ page.com?c=public&a=$1 
RewriteRule ^page.com/([a-zA-Z0-9-]*)/([a-zA-Z0-9-]*)/$ page.com?c=$1&a=$2
RewriteRule ^page.com/([a-zA-Z0-9-]*)/([a-zA-Z0-9-]*)$ page.com?c=$1&a=$2 
```

# android - Android，计算每秒点击次数？

> ID：13383394
> 
> 赞同：-2
> 
> 时间：2012-11-14T16:52:58.973
> 
> 标签：android, time, tap

标题几乎是不言自明的，我想当用户在屏幕上快速点击时尽可能准确地计算当前的“每秒点击次数”有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:00:36.093

这是我认为可以做到的解决方案：

1.  设置定时器
2.  调用View的onTouch（要做到这一点，可能需要创建自定义view），每次触摸self增加1
3.  做计算

# c++ - 在 C++ 中使用对

> ID：13383395
> 
> 赞同：2
> 
> 时间：2012-11-14T16:52:59.133
> 
> 标签：c++, stl

有人可以告诉我为什么我无法编译以下程序：

```
#include<iostream>
#include<string>
#include<cmath>
#include<iostream>
#include<cfloat>
#define MOD 10000009

using namespace std;

double distance(pair<int,int> p1,pair<int,int> p2)
{
    double dist;
    dist = sqrt( (p1.first-p2.first)*(p1.first-p2.first) + (p1.second-p2.second)*(p1.second-p2.second) );
    return(dist);
}

int main()
{
        int N,i,j;
        cin >> N;
        pair<int,int> pi[N];
        for(i=0;i<N;i++)
        {
            cin >> pi[i].first >> pi[i].second;
        }

        for(i=0;i<N;i++)
        {
            cout << pi[i].first << " "<< pi[i].second << endl;
        }

        distance(pi[0],pi[1]); // This line is giving error

    return 0;
} 
```

![在此处输入图像描述](../Images/e1d4fb33e5f58e2dc3eff8680afd9020.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:01:54.240

`distance`由标准库定义，您已经将其`using`编入全局命名空间，因此它尝试使用该标准库，而不是您编写的（和预期的）。

调用其他函数以避免名称冲突。

同样就像样式注释一样，在 C++ 中代码`#define`通常可以替换为 const 或内联函数以提供更大的类型安全性，并且我喜欢为`using std::cout`我需要的每个项目编写 , 等等而不是`using namespace std`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T16:58:40.990

您的代码至少有 3 个问题使其不合法 C++。有问题的是这样的：

```
distance(pi[0],pi[1]); // This line is giving error 
```

标准库中有一个`distance`，编译器正在解析调用它。这是由于您这样做`using namespace std`。最好根本不做`using namespace std`，尤其是在标题中，但正如您所看到的，它在这里也造成了问题。

有一些潜在的解决方案。

1.  删除`using namespace std`并限定您对标准库对象的所有使用（如`std::cin`）
2.  将 替换为`using namespace std`特定的 using 声明，仅从 StdLib 中引入您实际使用的那些部分（如`using std::cin`）
3.  更改远程调用以显式引用全局命名空间： `::distance(...);`

**编辑**此外，这不是合法的 C++：

```
int N,i,j;
cin >> N;
pair<int,int> pi[N]; 
```

标准 C++ 仅允许在编译时知道大小时声明 C 样式的数组。您可能正在使用 gcc 工具来构建它，这就是它不会导致错误的原因。但是，您使用的是 GCC 特定的语言扩展、动态大小的数组，并且您编写的代码并不是 C++ 语言本身的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T17:18:52.470

John Dibling 很好地解释了这个问题，但即使删除`using namespace std;`也不够，因为距离与 pair 在同一个标​​头中定义，并且它被解析为计算两个迭代器之间距离的函数。

我认为这是您尝试实现的 C++ 中的最小重写

```
#include <iostream>
#include <utility>
#include <vector>

typedef std::pair<int,int> intPair;
typedef std::vector<intPair> vectorPairs;

double Distance2D(const intPair& p1, const intPair& p2)
{
    double dist;
    dist = sqrt( (p1.first-p2.first)*(p1.first-p2.first) + (p1.second-p2.second)*(p1.second-p2.second) );
    return(dist);
}

int main()
{
    int numEntries;
    std::cin >> numEntries;
    vectorPairs pairs(numEntries);
    for(vectorPairs::iterator itor = pairs.begin(); itor != pairs.end(); ++itor)
    {
        std::cin >> itor->first >> itor->second;
    }
    for(vectorPairs::iterator itor = pairs.begin(); itor != pairs.end(); ++itor)
    {
        std::cout << itor->first << " " << itor->second << std::endl;
    }

    if(pairs.size() >= 2) // need to validate that 0 and 1 and within the range of pairs
    {
        double dist = Distance2D(pairs.at(0), pairs.at(1)); 
        std::cout << dist;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T10:16:49.350

C++中pair的用法

```
pair<some_datatype, some_other_datatype> my_pairs; 
```

上面的行将使第一个元素与第二个元素成对，现在你可以像这样使用这个对：

```
pair<int,int> my_pairs;
my_pairs  = make_pair(5,6);
cout<<my_pairs.first<<" "<<my_pairs.second<<endl; 
```

现在假设您要创建“n”对的列表（或数组或向量），为此我们可以使用这样的向量数据结构：

```
typedef pair<some_datatype,some_other_datatype> my_pairs;
vector<my_pairs> v;

for(int i=0; i<n; i++)
{
    int j,k;
    cin>>j>>k;
    v.push_back(make_pair(j,k));
}

for(int i=0; i<n; i++)
    cout<<v[i].first<<“ “&lt;<v[i].second<<endl; 
```

上面的代码将创建一个对的列表，这些对将存储在一个名为 v 的向量中。然后将 n 个元素与它们各自的对一起打印出来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-07T17:21:15.573

您必须使用参考变量作为距离函数的参数。正确的代码如下：

```
#include<bits/stdc++.h>
#define MOD 10000009

using namespace std;

double distance(const pair<int,int> &p1, const pair<int,int> &p2)
{
   double dist;
   dist = sqrt((p1.first-p2.first)*(p1.first-p2.first) + (p1.second-p2.second)*(p1.second-p2.second));
   return dist;
}

int main()
{
        int N,i,j;
        cin >> N;
        pair<int,int> pi[N];
        for(i=0;i<N;i++)
        {
            cin >> pi[i].first >> pi[i].second;
        }

        for(i=0;i<N;i++)
        {
            cout << pi[i].first << " "<< pi[i].second << endl;
        }

        cout<<distance(pi[0],pi[1]); 

      return 0;
} 
```

# json.net - Windos8 应用程序认证工具包上的 Newtonsoft Json.NET DLL 失败

> ID：13383398
> 
> 赞同：1
> 
> 时间：2012-11-14T16:53:08.317
> 
> 标签：json.net, windows-store, app-certification-kit, wack

我们正试图让我们的应用程序通过 Microsoft 的 Windows8 桌面应用程序的 ACK（应用程序认证工具包）。但是，当我们运行 ACK 时，我们会在我们引用的其中一个 DLL 上收到以下警告：

> 文件 C:\Program Files\Development\Newtonsoft.Json.Net35.dll 未能通过 APTCACheck 检查。

还有一个指向以下页面的链接：http: [//msdn.microsoft.com/library/windows/apps/hh750314.aspx#binscope_1](http://msdn.microsoft.com/library/windows/apps/hh750314.aspx#binscope_1)

有什么办法可以避免这个警告？

非常感谢，

去脑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:42:02.387

Json.NET 有一个为 Windows 8 构建的版本。使用该 dll 的最新版本。

# c# - wcf 服务的奇怪问题

> ID：13383401
> 
> 赞同：2
> 
> 时间：2012-11-14T16:53:20.833
> 
> 标签：c#, .net, wcf, datacontract, operationcontract

我有这个奇怪的问题。我编写了一个 wcf 服务并添加了对其他项目的服务引用，以便我可以使用它。引用此服务的项目中的用法如下所示：

```
private DataAccessServiceReference.DataAccessServiceClient Client = new DataAccessServiceReference.DataAccessServiceClient();

Client.UserGetByIdAsync(id); 
```

在我将此方法添加到服务之前，一切正常：

IDataAccessService.cs：

```
[ServiceContract]
public interface IDataAccessService
{
     ...

    [OperationContract]
    void UserGetContactsAsync(long userId, Action<ContactDTO[]> onSuccess, Action<Exception> onFailure);

     ...
} 
```

重建我的服务项目并更新服务引用后，类型“DataAccessServiceClient”从我的 DataAccessServiceReference 命名空间中消失了。而不是它，Visual Studio 生成了这种看起来很奇怪的类型：DataAccessServiceReference.ActionOfArrayOfContactDTOx0gUquOn

我玩了一下代码，似乎问题出在 type`Action< UserDTO[]>`上。现在，当我在我的服务中创建另一个方法时：

IDataAccessService.cs：

```
[ServiceContract]
public interface IDataAccessService
{
     ...

    [OperationContract]
    void method(Action<int[]> action);

     ...
} 
```

问题类似 -> 再次类型`DataAccessServiceClient`不可用，相反我有另一种看起来很奇怪的类型，但这次是：`DataAccessServiceReference.ActionOfArrayOfintuHEDJ7Dj.`

当我使用`Action< int >`或`Action< UserDTO >`一切正常。

我被困住了。感谢您的帮助。

编辑。

如果不是`Action< UserDTO[] >`我使用我自己的委托：

```
public delegate void ActionArrayOfUserDTO(UserDTO[] users); 
```

代理仍然没有生成。

甚至可以在 wcf 合同中使用代表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:42:44.630

不幸的是，您被 WCF 序列化程序生成的名称所困扰（臭名昭著的“这种行为是设计使然”）。这篇[博客文章](http://jeffbarnes.net/blog/post/2007/05/10/wcf-serialization-and-generics.aspx)很好地解释了为什么 WCF 以这种方式生成客户端类名称。

经过一些澄清，`Action`问题中代表一个 .NET 委托，并且它不能被 WCF 序列化，因为它代表可执行代码。方法参数和返回值必须是可序列化的类或值类型。

从评论更新：

```
[DataContract]
public class ActionArrayOfUserDto
{
    public string ActionProperty1 { get; set; }
    public string ActionProperty2 { get; set; }
    // ... the rest of the Action generic class properties

    public UserDto[] UserDtos { get; set; }
}

[DataContract]
public class UserDto
{
    //UserDto properties...
} 
```

您将在您的服务中编写代码以适当地填充 ActionArrayOfUserDto 并且不公开 Action 泛型类。

# google-drive-api - 与特定于应用程序的帐户共享文件夹/文件

> ID：13383404
> 
> 赞同：1
> 
> 时间：2012-11-14T16:53:36.947
> 
> 标签：google-drive-api

我正在尝试将我的个人帐户中的文件夹与通过以下操作创建的特定于应用程序的帐户[共享](https://developers.google.com/drive/service-accounts)。

我已使用 Google Doc 的共享表单与我的 developer.gserviceaccount.com 电子邮件地址共享该文件夹。

但是，列出此帐户驱动器中的文件不会显示此文件夹。

```
public void retrieveAllFiles() throws IOException, GeneralSecurityException, URISyntaxException {
Drive service=getDrive();
List<com.google.api.services.drive.model.File> result = new ArrayList<com.google.api.services.drive.model.File>();
Files.List request = service.files().list();

do {
  try {
    FileList files = request.execute();

    result.addAll(files.getItems());
    request.setPageToken(files.getNextPageToken());
  } catch (IOException e) {
    System.out.println("An error occurred: " + e);
    request.setPageToken(null);
  }
} while (request.getPageToken() != null &&
         request.getPageToken().length() > 0);

//return result;

} 
```

有什么建议么？

如果能够以该帐户的所有者身份登录 Google Drive，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T16:38:57.453

不是一个完整的答案，但我发现这个 api 测试页面很有帮助。 [API测试页面](https://developers.google.com/apis-explorer/#s/drive/v2/drive.files.list?_h=1&)

# c++ - 相同的 this 指针和可变参数类型的麻烦

> ID：13383406
> 
> 赞同：2
> 
> 时间：2012-11-14T16:53:40.157
> 
> 标签：c++, c++11, this-pointer

我希望只输入一段我不明白它为什么会这样的代码是可以的。

下面的代码有两个问题。

1）为什么`this`两个实例的指针显示相同的值？这里是程序的输出：

```
WJ::WJ(Jit&)
this = 0x7ffff1743950 JV<T, N>::JV(Jit&, indices<Is ...>) [with int ...Is = {0}; T = WJ<float>; int N = 1]
RS<T>::RS(Jit&) [with T = WJ<float>]
this = 0x7ffff1743950 JV<T, N>::JV(Jit&, indices<Is ...>) [with int ...Is = {0}; T = RS<WJ<float> >; int N = 1]
PS<T>::PS(Jit&) [with T = RS<WJ<float> >]
go for it
ptr = 0x7ffff1743950 JV<T, N>::JV(Jit&, JV<T, N>*, indices<Is ...>) [with int ...Is = {0}; T = RS<WJ<float> >; int N = 1]
PS<T>::PS(const PS<T>&) [with T = RS<WJ<float> >; PS<T> = PS<RS<WJ<float> > >] 
```

它显示 2 倍的值`0x7ffff1743950`。这让我很惊讶，因为我确信第一个实例在创建第二个实例之前没有被破坏。

2）我尝试制作设置为原始`PS`位置的深层副本。`orig_ptr`这里使用的设置是递归模板实例化设置。因此`orig_ptr`，在每个级别上都应该尊重层次结构并相应地指出。我不明白的是为什么代码编译`F{{(void(Is),j,ptr->F[Is])...}}`（它在代码中标记），为什么它不编译`F{{(void(Is),j,&ptr->F[Is])...}}`？（我认为这是正确的）。我看不到编译器正在调用`T`（aka ）的哪个构造函数。`RS<WJ<float> >`不仅存在`RS<WJ<float> >::RS(Jit&,RS<WJ<float> >)`指针版本。

```
#include<iostream>
#include<array>

struct Jit {};

template <int... Is>
struct indices {};

template <int N, int... Is>
struct build_indices
  : build_indices<N-1, N-1, Is...> {};

template <int... Is>
struct build_indices<0, Is...> : indices<Is...> {};

template<class T,int N>
struct JV {

  JV(Jit& j) : JV(j,build_indices<N>{}) {}
  template<int... Is>
  JV(Jit& j, indices<Is...>) : 
    jit(j), F{{(void(Is),j)...}} {
    std::cout << "this = " << (void*)this << " " << __PRETTY_FUNCTION__ << "\n";
  }

  JV(Jit& j,JV<T,N>* ptr) : JV(j,ptr,build_indices<N>{}) {}
  template<int... Is>
  JV(Jit& j,JV<T,N>* ptr, indices<Is...>) : 
    // Why does this not compile with &ptr->F[Is] ??
    // What is it calling now (there is no T::T(Jit&,sub_T))
    jit(j), orig_ptr(ptr), F{{(void(Is),j,ptr->F[Is])...}} {  
    std::cout << "ptr = " << (void*)ptr << " " << __PRETTY_FUNCTION__ << "\n";
  }
  std::array<T,N> F;
  JV<T,N>* orig_ptr;
  Jit& jit;
};

template<class T>
struct RS : public JV<T,1>
{
  RS(Jit &j): JV<T,1>(j) {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }

  RS(Jit &j, RS* orig): JV<T,1>(j,orig) {
    std::cout << "orig = " << orig << " " << __PRETTY_FUNCTION__ << "\n";
  }
};

template<class T>
struct PS : public JV<T,1>
{
  PS(Jit& j): JV<T,1>(j) {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }

  PS(const PS& rhs) : JV<T,1>(rhs.jit,const_cast<JV<T,1>*>(  static_cast<const JV<T,1>*>(&rhs) ) ) {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }
};

template<class T>
struct WJ
{
  WJ(Jit& j) {
    std::cout << "WJ::WJ(Jit&)\n";
  }
  WJ(Jit& j,WJ* ptr) {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }
};

int main() {
  Jit j;
  PS<RS<WJ<float> > > w(j);
  std::cout << "go for it\n";
  PS<RS<WJ<float> > > wcopy(w);
} 
```

** 编辑 **

我添加了指针接口，`WJ`以便实例化过程`F`可以全程递归。我认为这可能是由于 SFINE。但事实并非如此。

用 g++-4.7 (Ubuntu/Linaro 4.7.2-4precise1) 4.7.2 和`-O0`.

** 编辑 **

@sehe 的回答为我指明了正确的方向。当然，第二种构造函数`void(Is)`中不需要。`JV`只有在第一种类型中，它用于模拟`std::fill`. 但是我们在初始化列表中！序列运算符的默认实现有助于`(void)Is`完全消除。

现在在第二种情况下还有另一种用法`Is`，即in `ptr->F[Is]`，所以不用人工介绍了`void`。现在，这看起来更好：

** 编辑 **

```
JV(Jit& j,JV<T,N>* ptr, indices<Is...>) : 
    jit(j), orig_ptr(ptr), F{{T(j,&ptr->F[Is])...}} { } 
```

它现在编译并运行良好！

然而，问题 1 仍然存在：为什么`this`2x 相同？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:59:33.670

模板参数包的扩展在这里：

```
F {{(void(Is),j,ptr->F[Is])...}} 
```

很有创意，但不是你所期望的。

```
(void(Is),j,ptr->F[Is]) 
```

是单个表达式，使用*序列运算符*( `operator,`)。它与以下“伪函数”块具有大致相同的语义：

```
{
    (void)Is;
    (void)j;
    return ptr->F[Is];
} 
```

注意除了副作用之外没有任何其他影响`Is`，`j`它们没有。所以整个表达式等价于

```
F {{(ptr->F[Is])...}} 
```

老实说，我没能理解你代码的意图。这是我为验证您似乎所追求的语法是否**可以**工作而做的一些概念证明：

```
#include <iostream>
#include <vector>
#include <array>

typedef std::vector<std::string> Vec;

template <int... I>
    void foo(Vec const& v)
{
    std::array<std::string, sizeof...(I)> expand {{ v.at(I)... }};
    for(auto i: expand)
        std::cout << i << '\n';
}

int main()
{
    const Vec v { "zero", "one", "two", "three", "four", "etc" };
    foo<2,1,3,0>(v);
    foo<42>(v);
} 
```

输出：

```
two
one
three
zero
terminate called after throwing an instance of 'std::out_of_range'
  what():  vector::_M_range_check 
```

因此，它完全符合您的预期（在 GCC 和 Clang++ 中测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:36:29.300

由于 this = 0x7ffff1743950 的两个打印出现在“go for it”之前，它们来自构造 w。“去吧”之后的一个来自构建 copyw ，我怀疑在此之后你还有额外的输出 this = 。

在您的合资企业类型中，您是成员：

```
std::array<T,N> F 
```

并且由于 PS 和 RS 都从 JV 继承提供给 JV 的类型，处理 PS 是 RS，这意味着从 JV 派生 PS 的 F 具有从 JV 派生的 PS。

# performance - ADD 1 真的比 INC 快吗？x86

> ID：13383407
> 
> 赞同：19
> 
> 时间：2012-11-14T16:53:40.910
> 
> 标签：performance, optimization, assembly, x86

我已阅读各种优化指南，声称 ADD 1 比在 x86 中使用 INC 更快。这是真的吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-14T16:58:07.973

在某些具有某些指令流的微架构上，`INC`将导致“部分标志更新停顿”（因为它更新了一些标志，同时保留了其他标志）。 `ADD`设置所有标志的值，因此不会冒这种停顿的风险。

`ADD`并不总是比 快`INC`，但它几乎总是至少一样快（在某些较旧的微架构上存在一些极端情况，但它们非常罕见），有时甚至快得多。

有关更多详细信息，请参阅[Intel 的优化参考手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)或[Agner Fog 的微架构说明](http://www.agner.org/optimize/microarchitecture.pdf)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-08T02:17:36.820

虽然这不是一个确定的答案。编写这个 C 文件：

```
=== inc.c ===
#include <stdio.h>
int main(int argc, char *argv[])
{
    for (int n = 0; n < 1000; n++) {
        printf("%d\n", n);
    }
    return 0;
} 
```

然后运行：

```
clang -march=native -masm=intel -O3 -S -o inc.clang.s inc.c
gcc -march=native -masm=intel -O3 -S -o inc.gcc.s inc.c 
```

注意生成的汇编代码。相关的clang输出：

```
mov     esi, ebx
call    printf
inc     ebx
cmp     ebx, 1000
jne     .LBB0_1 
```

相关 gcc 输出：

```
mov     edi, 1
inc     ebx
call    __printf_chk
cmp     ebx, 1000
jne     .L2 
```

这证明了 clang 和 gcc 的作者都认为在现代架构上`INC`是更好的选择。`ADD reg, 1`

这对你的问题意味着什么？好吧，我相信他们对您已阅读的指南的判断，并得出结论，这与由于较短的寄存器编码而节省的一个字节`INC`一样快，因此更可取。`ADD`编译器作者只是人，所以他们可能会出错，但这不太可能。:)

更多的实验告诉我，如果您不使用该`-march=native`选项，那么 gcc 将`add ebx, 1`改为使用。Clang otoh，总是最喜欢 inc。我的结论是，当你在 2012 年问这个问题时，`ADD`有时更可取，但现在在 2016 年你应该总是选择`INC`.

# c# - 我如何让应用程序接受正确的输入..？

> ID：13383410
> 
> 赞同：1
> 
> 时间：2012-11-14T16:53:50.270
> 
> 标签：c#

这是我的 Windows 应用程序将摄氏度转换为华氏度的一种布局。问题是，当我尝试输入温度时，它会显示一些垃圾（例如：如果我输入“3”，它会显示在“3.0000009”中），有时甚至会显示堆栈溢出异常。输出也没有正确显示：

`cel.text`是摄氏度的文本框。 `fahre.text`是华氏温度的文本框。

```
namespace PanoramaApp1
{
    public partial class FahretoCel : PhoneApplicationPage
    {
    public FahretoCel()
    {
        InitializeComponent();

    }

    private void fahre_TextChanged(object sender, TextChangedEventArgs e)
    {

        if (fahre.Text != "")
        {
            try
            {
                double F = Convert.ToDouble(fahre.Text);
                cel.Text = "" + ((5.0/9.0) * (F - 32)) ; //this is conversion expression

            }

            catch (FormatException)
            {
                fahre.Text = "";
                cel.Text = "";
            }

        }
        else
        {
            cel.Text = "";
        }
    }

    private void cel_TextChanged(object sender, TextChangedEventArgs e)
    {

        if (cel.Text != "")
        {
            try
            {
                Double c = Convert.ToDouble(cel.Text);
                fahre.Text = "" + ((c *(9.0 / 5.0 )) + 32);

            }
            catch (FormatException)
            {
                fahre.Text = "";
                cel.Text = "";
            }

        }
        else
        {
            fahre.Text = "";
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:58:39.120

正在发生的事情是，您的`Text_Changed`事件处理程序正在相互触发，并且它们不断更改彼此的文本。

当您从摄氏度转换为华氏度时，它会无限地来回转换。

这解释了您的堆栈溢出错误和您输入的文本更改。

我会做什么，我会用按钮执行转换吗，或者，你可以有一个布尔变量来打开或关闭其他事件处理程序。

想象这样的事情

```
protected bool textChangedEnabled = true;

private void cel_TextChanged(object sender, TextChangedEventArgs e)
{
    if(textChangedEnabled)
    {
        textChangedEnabled = false;
        if (cel.Text != "")
        {
            try
            {
                Double c = Convert.ToDouble(cel.Text);
                fahre.Text = "" + ((c *(9.0 / 5.0 )) + 32);

            }
            catch (FormatException)
            {
                fahre.Text = "";
                cel.Text = "";
            }

        }
        else
        {
            fahre.Text = "";
        }
        textChangedEnabled = true;
    }
} 
```

可能有一种更优雅、更线程安全的方法来完成它，但这只是一个简单的修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:55:54.727

您可以使用 Math.Round 将值四舍五入到小数点后所需的位数。四舍五入到零将删除小数部分。

改变

```
cel.Text = "" + ((5.0/9.0) * (F - 32)) ; 
```

至

```
cel.Text = Math.Round( ((5.0/9.0) * (F - 32)), 2).ToString() ; 
```

# css - css:fixed 和 flash 对象上的 webkit 浏览器

> ID：13383411
> 
> 赞同：0
> 
> 时间：2012-11-14T16:53:52.293
> 
> 标签：css, flash, object, jwplayer, css-position

我当前编码的网站有一个固定的标题元素。它包括导航等，并保持在网站的顶部区域，即使您滚动。该网站还有一个背景图像，并且由于标题部分透明，因此背景图像也在标题内部，以覆盖其下方的内容。现在这工作正常，直到内容包含一个 Flash 对象。如果是这样，并且您向下滚动并且对象碰到固定的标题，标题的背景图像会奇怪地重新定位。我对此没有任何解释。这只发生在 webkit 上。

检查[小提琴](http://jsfiddle.net/honk1/jAJfc/1/)并确保使用 mac safari/chrome 或 win chrome

我从渲染的网站中获取了代码，对象由 jwplayer 生成。他们对那个食人没有任何解释。

两个图像容器都有以下 CSS 类

```
.back {
    background: url(../img/back_img1.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

# math - 计算变换平面所需的旋转

> ID：13383412
> 
> 赞同：1
> 
> 时间：2012-11-14T16:53:57.947
> 
> 标签：math, 3d, isometric

我目前正在尝试在等距（html5 画布 2d 上下文）中渲染多边形网格。
我的工作几乎完成了，除了我找不到正确的计算/算法来找到平面旋转。

在示例中，我有由 2 个向量 Ox, Oy 定义的平面 A 和 B

```
var planeA = {
    Ox: {
        x: 1,
        y: -2,
        x: 1,
    }, Oy: {
        x: 1,
        y: -1,
        z: 0,
    }
}

var planeB = {
    Ox: {
        x: 0,
        y: 1,
        x: 0,
    }, Oy: {
        x: 0,
        y: 0,
        z: -1,
    }
} 
```

我想找到 alpha（围绕 Ox 旋转）、beta（围绕 Oy 旋转）和 gamma（围绕 Oz 旋转）以应用于平面 A 以使平面 A 与平面 B 具有相同的法线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:10:56.400

首先，通过取向量的叉积然后归一化来找到法线。

**要获取两个向量A**和**B**的叉积，请使用以下公式：

C [x] = A [y] *B [z] - A [z] *B [y]
C [y] = -A [x] *B [z] + A [z] *B [x]
C [z] = A [x] *B [y] - A [y] *B [x]

（注意顺序很重要。一般来说，**A** x **B** ≠ **B** x **A**。）

因此，对于您的两架飞机，叉积是 (1,1,1) 和 (-1,0,0)。

要将向量归一化，请将其除以其大小。所以你的飞机的法线向量是 (1/sqrt(3))(1,1,1) 和 (-1,0,0)。

现在将向量旋转到另一个（我假设你有`atan2()`，并且你有右手定则）：

**1\. 绕 O [x]旋转：**为了让**A**进入 XZ 平面，旋转 atan2(A [y] , A [z] )。**[2\. 围绕 O y]**
**旋转：**以获得正确的 phi（与 O [z]的角度））。Phi [B]是 atan2(sqrt(B [x] ² +B [y] ² ), B [z] )，所以旋转 atan2(sqrt(B [x] ² +B [y] ² ), B [z] ) - atan2(A [x] , A [z] )
**3。绕 O [z]旋转：**要获得正确的“经度”，旋转 atan2(B [y], B [x] ) - atan2(A [y] , A [x] )。

因此，在您的示例中，您将**A**围绕**O [x]**旋转π/4 以获得 (sqrt(2/3), 0, sqrt(1/3))，然后围绕**O [y]**旋转π/2 - atan(sqrt(2 )) 得到 (1,0,0)，然后在**O [z]**附近乘 π 得到 (-1,0,0)。

# javascript - 格式化文本未呈现并在视图中显示为代码

> ID：13383417
> 
> 赞同：2
> 
> 时间：2012-11-14T16:54:06.500
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我正在为我的应用程序使用[bootstrap-wysihtml5 gem](https://github.com/Nerian/bootstrap-wysihtml5-rails)，一个所见即所得的表单文本编辑器。当我在文本区域中输入类似这样的内容时：

“这是一个测试，看看**粗体**和*斜体*是否有效”

我认为这是：

```
"this is a test to see if **bold** and *italic* are working" 
```

任何 html 都显示为代码，而不是呈现为格式化文本。似乎格式正在被编码，它只是没有正确呈现。这可能是什么原因造成的？

我的代码如下，并紧跟自述文件。

**帖子/_form.html.erb**

```
<%= form_for @post, :html => { :multipart => true } do |f| %>

  <%= f.label :content %>
  <%= f.text_area :content, :class => 'wysihtml5' %>

  <%= f.label :photo %>
  <%= f.file_field :photo %>

  <script type="text/javascript">
    $('.wysihtml5').each(function(i, elem) {
      $(elem).wysihtml5();
    });
  </script>

  <div class="actions">
    <%= f.submit %>
  </div>

<% end %> 
```

**帖子/_post.html.erb**

```
<div class="photo"><%= image_tag post.photo.url %></div>
<div class="content"><%= post.content %></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:11:37.867

**在posts/_post.html.erb**中试试这个

 **```
<div class="content"><%= post.content.try(:html_safe) %></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:56:48.993

尝试将其更改为`<div class="content"><%= raw post.content %></div>`，看看是否有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:43:51.567

我用

```
<%= post.content.html_safe %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:03:52.067

```
 <%= f.text_area :content,  escape: => false, :class => 'wysihtml5' %> 
```**

# c# - 使用令牌信息拆分

> ID：13383423
> 
> 赞同：0
> 
> 时间：2012-11-14T16:54:29.053
> 
> 标签：c#, string, parsing, split

我想使用多个字符来拆分字符串以进行拆分。例如，考虑旋转文本格式：

```
This is a {long|ugly|example} string 
```

我想解析这个字符串并将其拆分为“{”、“|”和“}”字符

```
myString.Split('|','{','}') 
```

现在我有了可以使用的令牌，但我想要保留有关使用哪个 char 来拆分返回的数组的每一部分的信息。

任何现有的代码可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:58:03.453

我倾向于对此使用正则表达式。然后您可以使用匹配组来跟踪匹配的内容。

看看[这个正则表达式测试器](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)。使用您的测试数据和这个正则表达式模式：

```
([^{|}]+)([{|}]?) 
```

这有效地将字符串拆分为 5 个匹配项。每个匹配包含 2 个组：拆分字符串和拆分的字符。

运行它的代码是这样的：

```
MatchCollection m = Regex.Matches("This is a {long|ugly|example} string ",@"([^{|}]+)([{|}]?)"); 
```

现在匹配集合 m 将为每个匹配的字符串包含一个 Match 对象，该对象又将包含 2 个组，即字符串和被分割的字符。

```
m[0].Groups[0].Value; // 1st split string
m[0].Groups[1].Value; // 1st split character 
```

# spring - PrimeFaces 3.4.1 Spring 3.2.0RC 休眠 4.0.1

> ID：13383427
> 
> 赞同：0
> 
> 时间：2012-11-14T16:54:39.347
> 
> 标签：spring, hibernate, jsf, primefaces

我想用 PrimeFaces、Spring 和 Hibernate 开发我的应用程序，我举了这个例子，但它确实有效。我不知道如何配置 applicationContext.xml、web.xml、faces-config.xml，我不知道我是否错过了 jar 。

我有这个错误：

> javax.el.PropertyNotFoundException: /index.xhtml @14,50 value="#{customer.lists}": 在类型 comtic.scrum.managedBean.CustomerBean 上找不到属性“列表”

我使用 tomcat 7 和 JBoss Dev Studio、primeFaces 3.4.1、spring-3.2.0.RC1、hibernate-release-4.0.1.Final

我的表是带有 (customerId, name, address, createdDate) 列的客户

这是 WEB-INF/lib 中的 jar 列表：

> 1.  antlr-2.7.7.jar
> 2.  common-annotations.jar
> 3.  commons-beanutils.jar
> 4.  commons-collections.jar
> 5.  commons-collections-3.2.1.jar
> 6.  commons-digester.jar
> 7.  commons-logging.jar
> 8.  dom4j-1.6.1.jar
> 9.  hibernate-commons-annotations-4.0.1.Final.jar
> 10.  hibernate-core-4.0.1.Final.jar
> 11.  hibernate-jpa-2.0-api-1.0.1.Final.jar
> 12.  javassist-3.15.0-GA.jar
> 13.  jboss-logging-3.1.0.CR2.jar
> 14.  jboss-transaction-api_1.1_spec-1.0.0.Final.jar
> 15.  jsf-api-2.1.6.jar
> 16.  jsf-impl-2.1.6.jar
> 17.  jslt.jar
> 18.  mysql-connector-java-5.0.8-bin.jar
> 19.  primefaces-3.4.1.jar
> 20.  spring-aop-3.2.0.RC1.jar
> 21.  spring-aspects-3.2.0.RC1.jar
> 22.  spring-beans-3.2.0.RC1.jar
> 23.  spring-context-3.2.0.RC1.jar
> 24.  spring-context-support-3.2.0.RC1.jar
> 25.  spring-core-3.2.0.RC1.jar
> 26.  spring-expression-3.2.0.RC1.jar
> 27.  spring-instrument-3.2.0.RC1.jar
> 28.  spring-instrument-tomcat-3.2.0.RC1.jar
> 29.  spring-jdbc-3.2.0.RC1.jar
> 30.  spring-jms-3.2.0.RC1.jar
> 31.  spring-orm-3.2.0.RC1.jar
> 32.  spring-oxm-3.2.0.RC1.jar
> 33.  spring-struts-3.2.0.RC1.jar
> 34.  spring-test-3.2.0.RC1.jar
> 35.  spring-tx-3.2.0.RC1.jar
> 36.  spring-web-3.2.0.RC1.jar
> 37.  spring-webmvc-3.2.0.RC1.jar
> 38.  spring-webmvc-portlet-3.2.0.RC1.jar
> 39.  标准.jar

这是 Customer.java

```
import java.util.Date;

/**
 * Customer generated by hbm2java
 */
public class Customer implements java.io.Serializable {

    private Integer customerId;
    private String name;
    private String address;
    private Date createdDate;

    public Customer() {
    }

    public Customer(String name, String address, Date createdDate) {
        this.name = name;
        this.address = address;
        this.createdDate = createdDate;
    }

    public Integer getCustomerId() {
        return this.customerId;
    }

    public void setCustomerId(Integer customerId) {
        this.customerId = customerId;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return this.address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public Date getCreatedDate() {
        return this.createdDate;
    }

    public void setCreatedDate(Date createdDate) {
        this.createdDate = createdDate;
    }

} 
```

客户DAO.java：

```
import java.util.List;

import comtic.scrum.customer.model.Customer;

public interface CustomerDao{

    void addCustomer(Customer customer);

    List<Customer> findAllCustomer();

} 
```

CustomerDaoImp.java

```
import java.util.Date;
import java.util.List;

import comtic.scrum.customer.dao.CustomerDao;
import comtic.scrum.customer.model.Customer;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public class CustomerDaoImpl extends 
       HibernateDaoSupport implements CustomerDao{

    public void addCustomer(Customer customer){

        customer.setCreatedDate(new Date());
        getHibernateTemplate().save(customer);

    }

    public List<Customer> findAllCustomer(){

        return getHibernateTemplate().find("from Customer");

    }
} 
```

客户服务.java

```
import java.util.List;

import comtic.scrum.customer.model.Customer;

public interface CustomerService {
    void addCustomer(Customer customer);

    List<Customer> findAllCustomer();

} 
```

CustomerServiceImp.java

```
import java.util.List;

import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

import comtic.scrum.customer.dao.CustomerDao;
import comtic.scrum.customer.model.Customer;
import comtic.scrum.customer.service.CustomerService;

public class CustomerServiceImp extends 
HibernateDaoSupport  implements CustomerService {

    CustomerDao customerDao;

    public CustomerDao getCustomerDao() {
        return customerDao;
    }

    public void setCustomerDao(CustomerDao customerDao) {
        this.customerDao = customerDao;
    }

    public void addCustomer(Customer customer){

        customerDao.addCustomer(customer);

    }

    public List<Customer> findAllCustomer(){

        return customerDao.findAllCustomer();
    }

} 
```

客户Bean.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="customerService" 
         class="comtic.scrum.customer.service.imp.CustomerServiceImp" >
        <property name="customerDao" ref="customerDao" />
    </bean>

    <bean id="customerDao" 
         class="comtic.scrum.customer.dao.imp.CustomerDaoImp" >
        <property name="sessionFactory" ref="sessionFactory">
        </property>

    </bean>

</beans> 
```

CustomerBean.java

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;

import comtic.scrum.customer.model.Customer;
import comtic.scrum.customer.service.CustomerService;

public class CustomerBean implements Serializable {
    //DI via Spring
        CustomerService customerService;

        public String name;
        public String address;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getAddress() {
            return address;
        }

        public void setAddress(String address) {
            this.address = address;
        }

        //get all customer data from database
        public List<Customer> customerList(){
            return customerService.findAllCustomer();
        }

        //add a new customer data into database
        public String addCustomer(){

            Customer cust = new Customer();
            cust.setName(getName());
            cust.setAddress(getAddress());

            customerService.addCustomer(cust);

            clearForm();

            return "";
        }

        //clear form values
        private void clearForm(){
            setName("");
            setAddress("");
        }

        public comtic.scrum.customer.service.CustomerService getCustomerService() {
        return customerService;
    }

        public void setCustomerService(
            comtic.scrum.customer.service.CustomerService customerService) {
        this.customerService = customerService;
    }

} 
```

数据源.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<bean 
   class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
   <property name="location">
     <value>WEB-INF/classes/config/database/db.properties</value>
   </property>
</bean>

  <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
  </bean>

</beans> 
```

HibernateSessionFactory.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- Hibernate session factory -->
<bean id="sessionFactory" 
     class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <property name="dataSource">
      <ref bean="dataSource" />
    </property>

    <property name="mappingResources">
    <list>
          <value>comtic/scrum/customer/hibernate/Customer.hbm.xml</value>
    </list>
     </property>

    <property name="hibernateProperties">
       <props>
         <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
         <prop key="hibernate.show_sql">true</prop>
       </props>
    </property>     

</bean>
</beans> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

 <managed-bean>
  <managed-bean-name>customer</managed-bean-name>
  <managed-bean-class>comtic.scrum.managedBean.CustomerBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
  <managed-property>
   <property-name>customerService</property-name>
   <property-class>comtic.scrum.customer.service.CustomerService</property-class>
   <value/>
  </managed-property>
 </managed-bean>

 <application>
  <resource-bundle>
   <base-name>resources</base-name>
   <var>msgs</var>
  </resource-bundle>
 </application>
</faces-config> 
```

web.xml

```
<?xml version="1.0"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
 <display-name>Template</display-name>
 <!-- Spring Context Configuration' s Path definition -->
 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/applicationContext.xml</param-value>
 </context-param>
 <!-- Project Stage Level -->
 <context-param>
  <param-name>javax.faces.PROJECT_STAGE</param-name>
  <param-value>Development</param-value>
 </context-param>
 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.faces</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
 </servlet-mapping>
 <welcome-file-list>
  <welcome-file>index.xhtml</welcome-file>
 </welcome-file-list>
</web-app> 
```

索引.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:pf="http://primefaces.org/ui">

<h:head>

</h:head>
<h:body>
    <h1>PrimeFaces + Spring + Hibernate Example</h1>
    <pf:dataTable value="#{customer.lists}" var="c">
        <h:column>
            <h:outputText value="customerId"/>
        </h:column>
        <h:column>
            <h:outputText value="#{c.name}"/>
        </h:column>
        <h:column>
            <h:outputText value="#{c.address}"/>
        </h:column>
        <h:column>
            <h:outputText value="#{c.createdDate}"/>
        </h:column>     
    </pf:dataTable>

    <h2>Add New Customer</h2>
    <h:form>
        <pf:panelGrid columns="3" >
            Name :              
                    <pf:inputText id="name" label="Name" required="true" size="20" value="#{customer.name}">                        
                    </pf:inputText>                 
                <h:message for="name" style="color:red" />

                Address :               
                    <pf:inputTextarea cols="30" id="address" label="Address" required="true" rows="10" value="#{customer.address}">                     
                    </pf:inputTextarea>
                <h:message for="address" style="color:red" />               
            <pf:button outcome="#{customer.addCustomer}" value="Submit">

            </pf:button>
        </pf:panelGrid>
    </h:form>   
</h:body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:43:24.690

是否真的需要所有 Spring/Hibernate/XML 代码来证明问题？当只有一个 XHTML 文件和一个托管 bean 类而没有所有 Spring/Hibernate/XML 噪音时，您会遇到完全相同的问题。学会将问题分成 1 或 2 页。你的问题将近10页长......

无论如何，你得到的例外

> javax.el.PropertyNotFoundException: /index.xhtml @14,50 value="#{customer.lists}": 在类型 comtic.scrum.managedBean.CustomerBean 上找不到属性“列表”

只是想告诉您`CustomerBean`该类缺少 getter 方法`getLists()`。添加它并确保它返回一个`List<Customer>`.

```
public List<Customer> getLists() {
    return lists;
} 
```

* * *

**与具体问题无关**`s`，属性名称中的复数顺便说一句很奇怪。它只返回*一个*列表，对吗？如果我是你，我会`#{customer.list}`用`getList()`吸气剂将其重命名为。

# wcf - WCF SOA 服务客户端注册表

> ID：13383432
> 
> 赞同：2
> 
> 时间：2012-11-14T16:54:47.990
> 
> 标签：wcf, soa

我有兴趣创建一个注册表，它将所有调用到 WCF REST 服务集合中的客户端编目。

我想知道：

*   谁在打电话（网址）
*   他们调用什么服务方法

有人对如何实现这一点有任何建议吗？或者可能是对当前存在的实现的引用？

# rft - 通过RFT打开mozila

> ID：13383434
> 
> 赞同：1
> 
> 时间：2012-11-14T16:54:59.457
> 
> 标签：rft

# 代码：

```
import resources.Script4Helper;
import com.rational.test.ft.*;
import com.rational.test.ft.object.interfaces.*;
import com.rational.test.ft.object.interfaces.SAP.*;
import com.rational.test.ft.object.interfaces.WPF.*;
import com.rational.test.ft.object.interfaces.dojo.*;
import com.rational.test.ft.object.interfaces.siebel.*;
import com.rational.test.ft.object.interfaces.flex.*;
import com.rational.test.ft.object.interfaces.generichtmlsubdomain.*;
import com.rational.test.ft.script.*;
import com.rational.test.ft.value.*;
import com.rational.test.ft.vp.*;
import com.ibm.rational.test.ft.object.interfaces.sapwebportal.*;

public class Script4 extends Script4Helper
{
     public void testMain(Object[] args) 
    {

        setSimplifiedScriptLine(1); //firefox.exe: Mozilla Firefox Start Page - Mozilla Firefox                         
        timerStart("firefoxexeMozillaFirefoxStartPageMozilla_1");                           
        setSimplifiedScriptLine(2); //Click  Mozilla Firefox Start Page - Mozilla Firefox  Index  17  
        mozillaFirefoxStartPageMozilla().click(atIndex(17),atPoint(257,55));

        setSimplifiedScriptLine(3); //Type  Value  google.com{ENTER}
        mozillaFirefoxStartPageMozilla2().inputKeys("google.com{ENTER}");

        timerStop("firefoxexeMozillaFirefoxStartPageMozilla_1");                
    }
} 
```

如何运行这个脚本？当我运行它时，它不会打开浏览器。它说“找不到Mozilla”..

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:38:28.177

在脚本中，我没有看到任何说启动浏览器或启动应用程序的语句。此外，似乎没有启用浏览器，并且 html 控件被识别为 Windows 控件。
在 RFT 中，您可以使用 Simplified Scripting（您当前正在使用的），也可以使用 Java 脚本。这可以在首选项中进行配置。或者使用新版本的 RFT，也可以在创建脚本时选择它。

您可以手动编辑脚本以插入代码片段以启动浏览器。RFT 帮助将包含有关 startBrowser() 和 startApp() APIs 的文档。

-希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:39:30.713

请按照本指南了解如何配置 Mozilla Firefox。
[http://www.xcarecrows.com/eclipse/doc/Xcarecrows4SMV/current_version/html/userGuide/RFT%20-%20configure%20mozilla.html](http://www.xcarecrows.com/eclipse/doc/Xcarecrows4SMV/current_version/html/userGuide/RFT%20-%20configure%20mozilla.html)

请注意，您必须使用非常旧的 Firefox 版本（最高 3.6）。`startApp("Firefox");`在您的代码中，您必须在浏览器中执行任何操作之前使用名称启动应用程序。

我建议禁用简化脚本，因为它非常烦人 [https://stackoverflow.com/a/12243216/423955](https://stackoverflow.com/a/12243216/423955)

# linux - BeagleBoard XM 上的precision-armhf v3.6.2-x3 上的内核源代码

> ID：13383439
> 
> 赞同：0
> 
> 时间：2012-11-14T16:55:23.997
> 
> 标签：linux, ubuntu, kernel, beagleboard

我有一个 BeagleBoard XM，我从[rcn-ee](http://rcn-ee.net/deb/rootfs/precise/)安装了 Ubuntu 。现在，我正在寻找安装 8192cu 驱动程序，因为我无法让 WiFi 与内核驱动程序一起工作。但是，驱动程序的 makefile 需要内核源的路径，我找不到。

我认为内核在 /lib/modules/3.6.2-x3/kernel 中，但这似乎没有来源。为了安装驱动程序，我如何/在哪里可以获得源代码？

注意：如果我给 `KSRC := /lib/modules/3.6.2-x3/` 我得到 `No rule to make target 'modules'. Stop.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:51:18.513

要构建驱动程序，您应该只需要内核头文件。[beagleboard group](https://groups.google.com/forum/?fromgroups#!topic/beagleboard/zaFBY77Xt4U)上有一个帖子解释了在哪里可以找到源代码和标头（请注意，它相当旧，因此您可能需要针对您的构建进行调整）。

这篇[文章](http://lakm.us/logit/2012/01/compile-usb-serial-modem-using-option-c-ubuntu-on-beagleboard-xm/)看起来也很相关

# c++ - C++ 构造函数实现错误

> ID：13383442
> 
> 赞同：0
> 
> 时间：2012-11-14T16:55:36.070
> 
> 标签：c++

C++ 构造函数实现错误

我有2节课

```
Map2D(parent) & Map3D(child) 
```

所以这就是发生的事情......

```
class Map3D : public Map2D
{
private:
int z;

public:
Map3D();
Map3D(int,int,int);
int getZ();

} 
```

下面是我的 Map2D

```
class Map2D
{

friend ifstream& operator>>(ifstream&, Map2D&);

protected:
int x;
int y;

public:
Map2D();
Map2D(int,int);

};

Map2D::Map2D()
{
x=0;
y=0;
}

Map2D::Map2D(int xIn,int yIn)
{
x = xIn;
y = yIn;
} 
```

现在的问题是我尝试实现 Map3D 但遇到了问题..我尝试的是下面

返回 Map3D.cpp

```
Map3D::Map3D()
{
x=0;
y=0;
z=0;
}

Map3D::Map3D(int xIn,int yIn,int zIn)
{
x=xIn;
y=yIn;
z=zIn;
}

map3d.cpp:18:1: error: extra qualification ‘map3D::’ on member ‘map3D’ [-fpermissive]
map3d.cpp:18:1: error: ‘map3D::map3D()’ cannot be overloaded
map3d.cpp:14:1: error: with ‘map3D::map3D()’
map3d.cpp:25:1: error: extra qualification ‘map3D::’ on member ‘map3D’ [-fpermissive]
map3d.cpp:25:1: error: ‘map3D::map3D(int, int, int)’ cannot be overloaded
map3d.cpp:15:1: error: with ‘map3D::map3D(int, int, int)’ 
```

我应该改变什么以使我的实施正确。感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:59:16.903

`Map3D`声明末尾好像缺少分号

```
class Map3D : public Map2D
{
private:
int z;

public:
Map3D();
Map3D(int,int,int);
int getZ();

}; // SEMI-COLON HERE!!!! 
```

# java - 试图制作一个双数组，编号为 2 到 50

> ID：13383444
> 
> 赞同：2
> 
> 时间：2012-11-14T16:55:40.437
> 
> 标签：java, arrays, numbers, double

我正在尝试使用双数组制作一个 5 x 10 的表格。第一个框应该是空白的，然后其余的编号为 2-50。

到目前为止我有这个，但它不工作。

```
int array[][] = new int[5][10];
      for(int row=1; row<5;row++){
         for(int col=1;col<10;col++)
            array[row][col] = row*col;}
         System.out.println(array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:57:29.893

`row * col`不能给你连续的数字`2 to 50`。在您的代码中，您不仅仅是离开了，`first box`而是完全离开了。`first row``first column`

您应该从`0 to max`. 对于`[0][0]`，不要打印任何东西。

此外，对于从 打印`2 to 50`，只需有一个以 开头的计数变量，`2`打印后将其递增`1`。

这是修改后的代码： -

```
int array[][] = new int[5][10];
int count = 2;

for(int row=0; row<5;row++){
    for(int col=0;col<10;col++) {
        if (row == 0 && col == 0) {
            continue;
        }
        array[row][col] = count++;
    }
}
for (int[] inner: array) {
    System.out.println(Arrays.toString(inner));
} 
```

**输出 ： -**

```
[0, 2, 3, 4, 5, 6, 7, 8, 9, 10]
[11, 12, 13, 14, 15, 16, 17, 18, 19, 20]
[21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
[31, 32, 33, 34, 35, 36, 37, 38, 39, 40]
[41, 42, 43, 44, 45, 46, 47, 48, 49, 50] 
```

**笔记： -**

由于您希望您`first box`的为空白，因此您不能`Arrays.toString`在此处使用。您将不得不再使用一个循环，并以简单的方式打印您的数组。当你的指数`[0][0]`是`sysout("");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:03:37.777

第一个框不能为空......它可以为零，这就是你想要的吗？

变化：

1.  使用`0`索引，而不是`1`索引
2.  您必须手动打印数组的内容，请参阅下面我打印逗号的位置
3.  `row * col`不是正确的值。采用`row * 10 + col + 1`

试试这个：

```
int array[][] = new int[5][10];
for(int row=0; row<5;row++){
    for(int col=0;col<10;col++) {
        array[row][col] = row * 10 + col + 1;
        if (array[row][col] < 2) {
            System.out.print(" ");
        } else {
            System.out.print(array[row][col]);
        }
        if (col < 9) System.out.print(",");
    }
    System.out.println();
} 
```

**输出：**

```
 ,2,3,4,5,6,7,8,9,10
11,12,13,14,15,16,17,18,19,20
21,22,23,24,25,26,27,28,29,30
31,32,33,34,35,36,37,38,39,40
41,42,43,44,45,46,47,48,49,50 
```

# matlab - matlab中更快的插值方法

> ID：13383445
> 
> 赞同：2
> 
> 时间：2012-11-14T16:55:42.117
> 
> 标签：matlab, interpolation

我正在使用 interp1 插入一些数据：

```
temp = 4 + (30-4).*rand(365,10);
depth = 1:10;

dz = 0.5; %define new depth interval
bthD = min(depth):dz:max(depth); %new depth vector

for i = 1:length(temp);
    i_temp(i,:) = interp1(depth,temp(i,:),bthD);
end 
```

在这里，我通过将测量值从 1 m 增量内插到 0.5 m 增量来提高测量的分辨率。这段代码运行良好，即它为我提供了我正在寻找的矩阵。但是，当我将它应用到我的实际数据时，它需要很长时间才能运行，主要是因为我正在运行一个额外的循环，该循环贯穿各个单元格。有没有一种方法可以在不使用循环的情况下实现上述内容，换句话说，是否有更快的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:04:33.147

将您的 for 循环替换为：

```
i_temp = interp1(depth,temp',bthD)'; 
```

`temp`如果您更改定义的方式，并且您可以`i_temp`接受 19x365 数组而不是 365x19 ，则可以摆脱转置。

顺便说一句，interp1 的[文档](http://www.mathworks.com/help/matlab/ref/interp1.html)非常清楚，您可以传入一个数组作为第二个参数。

# php - 如何将文本添加到从 php 联系表单发送的电子邮件中

> ID：13383448
> 
> 赞同：1
> 
> 时间：2012-11-14T16:55:53.883
> 
> 标签：php, email, contact-form

嗨，这一切都是 PHP 即时通讯使用：

```
<?php
$name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent=" From: $name \n Phone: $phone \n Message: $message";
$recipient = "sophiec@fdb.co.uk";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!" . " -" . "<a href='contact.html' style='text-decoration:none;
color:#ff0099;'> Return Home</a>";
?> 
```

它工作得很好，但我希望在这封电子邮件中发送一些文本，上面写着“这是来自您的网站”或类似的内容，告诉收件人它不是垃圾邮件（我的客户对技术不友好，看到所有内容都是纯文本作为垃圾邮件）。我对 PHP 非常陌生，知识几乎为零，不知道如何添加类似的东西。我确实尝试过用里面的字符串创建一个新变量，然后将其包含在：

```
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!"); 
```

行，但没有成功。感谢您花时间提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:57:41.490

更改此行：`$formcontent=" From: $name \n Phone: $phone \n Message: $message";`

添加你想要的内容：

```
$formcontent="This is from your website\n From: $name \n Phone: $phone \n Message: $message"; 
```

或者如果你想改变主题，这一行：`$subject = "Contact Form";`

添加你想要的内容：

```
$subject = "Contact Form - From your website"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:59:00.550

您可以将其添加到`$subject`或`$message`中。

```
 $subject = "Contact Form: This is from your website"; // OR
  $message .= "This is from your website"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:08:33.270

$formcontent='这是来自您的网站\n 来自: ' 。$名称。'\n 电话：' 。$电话。'\n 消息：' 。$消息；

# c# - 长时间运行进程的并行化和性能优化

> ID：13383450
> 
> 赞同：2
> 
> 时间：2012-11-14T16:55:56.590
> 
> 标签：c#, .net, task-parallel-library, async-await, tpl-dataflow

我想并行化逐帧处理多个视频剪辑的应用程序。每个剪辑的每一帧的序列很重要（显然）。我决定使用 TPL 数据流，因为我相信这是数据流的一个很好的例子（电影帧是数据）。

所以我有一个从数据库加载帧的进程（可以说是一批 500 个，全部聚集在一起）

```
Example sequence:    
|mid:1 fr:1|mid:1 fr:2|mid:2 fr:1|mid:3 fr:1|mid:1 fr:3|mid:2 fr:2|mid:2 fr:3|mid:1 fr:4| 
```

并将它们发布到 BufferBlock。对于这个 BufferBlock，我将 ActionBlocks 与过滤器链接起来，让每个 MovieID 有一个 ActionBlock，这样我就可以获得某种数据分区。每个动作块都是顺序的，但理想情况下，多部电影的多个动作块可以并行运行。

我确实有上述网络工作并且它确实并行运行，但根据我的计算，只有八到十个动作块同时执行。我计时了每个 ActionBlock 的运行时间，大约为 100-200 毫秒。我可以采取哪些步骤来至少双倍并发？

我确实尝试将操作委托转换为异步方法并在 ActionBlock 操作委托中使数据库访问异步，但它没有帮助。

**编辑：**我实现了额外级别的数据分区：具有奇数 ID 的电影的帧在 ServerA 上处理，偶数电影的帧在 ServerB 上处理。应用程序的两个实例都访问了同一个数据库。如果我的问题是 DB IO，那么我不会看到处理的总帧数有任何改善（或者很少，低于 20%）。但我确实看到它翻了一番。所以这让我得出结论，Threadpool 没有产生更多线程来并行处理更多帧（两台服务器都是四核的，分析器显示每个应用程序大约有 25-30 个线程）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:00:33.680

一些假设：

*   从您的示例数据中，您正在接收乱序的电影帧（可能还有电影中的帧）

*   您的[`ActionBlock<T>`](http://msdn.microsoft.com/en-us/library/hh194684.aspx)实例是通用的；它们都调用相同的处理方法，您只需根据每个电影 ID 创建一个列表（您事先有一个电影 ID 列表），如下所示：

```
// The movie IDs
IEnumerable<int> movieIds = ...;

// The actions.
var actions = movieIds.Select(
    i => new { Id = i, Action = new ActionBlock<Frame>(MethodToProcessFrame) });

// The buffer block.
BufferBlock<Frame> buffer = ...;

// Link everything up.
foreach (var action in actions) 
{
    // Not necessary in C# 5.0, but still, good practice.
    // The copy of the action.
    var actionCopy = action;

    // Link.
    bufferBlock.LinkTo(actionCopy.Action, f => f.MovieId == actionCopy.Id);
} 
```

如果是这种情况，则说明您创建了太多`ActionBlock<T>`没有得到工作的实例；因为你的帧（可能还有电影）是乱序的，所以你不能保证所有的`ActionBlock<T>`实例都会有工作要做。

此外，当您创建一个`ActionBlock<T>`实例时，它将使用[`MaxDegreeOfParallelism`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism.aspx)1 创建，这意味着它是线程安全的，因为只有一个线程可以同时访问该块。

此外，TPL DataFlow 库最终依赖于[`Task<TResult>`类](http://msdn.microsoft.com/en-us/library/dd321424.aspx)，默认情况下它在线程池上调度。线程池将在这里做一些事情：

*   确保所有处理器内核都已饱和。这与确保您的实例饱和*非常不同，**这*是您应该关注的指标`ActionBlock<T>`

**   确保在处理器内核饱和时，确保工作均匀分布，并确保没有*太多*并发任务正在执行（上下文切换代价高昂）。* 

 *看起来您处理电影的方法是通用的，并且传入电影中的哪一帧并不重要（如果*确实*重要，那么您需要用它来更新您的问题，因为它会改变很多事情）。这也意味着它是线程安全的。

此外，如果可以假设一帧的处理不依赖于任何先前帧的处理（或者，看起来电影的帧是按顺序排列的），您可以使用*单个* `ActionBlock<T>`但调整`MaxDegreeOfParallelism`值，像这样：

```
// The buffer block.
BufferBlock<Frame> buffer = ...;

// Have *one* ActionBlock<T>
var action = new ActionBlock<Frame>(MethodToProcessFrame,
    // This is where you tweak the concurrency:
    new ExecutionDataflowBlockOptions {
        MaxDegreeOfParallelism = 4,
    }
);

// Link.  No filter needed.
bufferBlock.LinkTo(action); 
```

现在，你`ActionBlock<T>`将*永远*饱和。诚然，任何负责任的任务调度程序（默认为线程池）仍然会限制最大并发量，但它会尽可能多地同时合理地做。

为此，如果您的操作是*真正*线程安全的，您可以设置`MaxDegreeOfParallelism`to [`DataflowBlockOptions.Unbounded`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.dataflowblockoptions.unbounded.aspx)，如下所示：

```
// Have *one* ActionBlock<T>
var action = new ActionBlock<Frame>(MethodToProcessFrame,
    // This is where you tweak the concurrency:
    new ExecutionDataflowBlockOptions {
        // We're thread-safe, let the scheduler determine
        // how nuts we can go.
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded,
    }
); 
```

当然，所有这些都假设其他一切都是最优的（I/O 读/写等）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T17:01:58.280

奇怪的是，这是最佳的并行化程度。老实说，线程池非常擅长确定要激活的实际线程的最佳数量。我的猜测是您的硬件可以支持实际上并行工作的许多并行进程。如果您添加更多内容，您实际上不会增加​​吞吐量，您只会花费更多时间在线程之间进行上下文切换，而实际处理它们的时间会减少。

如果您注意到，在很长一段时间内，您的 CPU 负载、内存总线、网络连接、磁盘访问等都在容量不足的情况下工作，那么您可能遇到了问题，您需要检查一下是什么实际上是瓶颈。尽管某处的某些资源可能已达到其容量，但 TPL 已经认识到这一点并确保它不会过度饱和该资源。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T18:52:18.117

我怀疑你是 IO 绑定的。问题是在哪里？在读或写上。你写的数据比读的多吗？CPU 可能低于 50%，因为它无法更快地写入。

我并不是说 ActionBlock 是错误的，但我会考虑使用 BlockingCollection 的生产者消费者。优化您读取和写入数据的方式。

这不同，但我有一个应用程序，我可以在其中阅读文本块。解析文本，然后将单词写回 SQL。我在单个线程上读取，然后并行解析，然后在单个线程上写入。我写在一个线程上，以免破坏索引。如果您受 IO 限制，则需要弄清楚最慢的 IO 是什么，然后优化该过程。

告诉我更多关于那个 IO 的信息。

在您提到从数据库中读取的问题中。
我会试试 BlockingCollections。
[BlockingCollection 类](http://msdn.microsoft.com/en-us/library/dd267312.aspx)
并且每个都有大小限制，这样你就不会浪费内存。
让它足够大，以至于它（几乎）永远不会变空。
最慢步骤后的阻塞集合将变为空。如果你可以并行处理，那么就这样做。
我发现表中的并行插入并不快。
让一个过程锁定并保持它并保持软管打开。
仔细看看你是如何插入的。
一次一排很慢。
我使用 TVP 并一次插入 10,000 个，但很多人喜欢 Drapper 或 BulkInsert。
如果您删除索引和触发器并插入按聚集索引排序将是最快的。拿一个小块并握住它。我正在 10 毫秒范围内插入。
现在更新是最慢的。看看那个——你一次只做一排吗？
看看拿 tabblock 和做视频剪辑。
除非它是一个丑陋的更新，否则它不应该比插入花费更长的时间。*

# sencha-touch-2 - Sencha touch 2.0轮播，图像分辨率

> ID：13383454
> 
> 赞同：2
> 
> 时间：2012-11-14T16:56:01.727
> 
> 标签：sencha-touch-2

-App 使用 Sencha touch 2.0 carousel -carousel
中的图像全屏显示（减去屏幕顶部的导航栏）
-App 针对 iPad2、iPad2 Retina 显示屏、Android xhdpi（平板电脑）

目标：在所有目标设备的轮播中显示全屏图像

问题：图像的分辨率应该是多少？我在轮播中尝试了 1028x768 图像。在 iPad2 视网膜上显示良好（全屏），但在三星 Galaxy Tab 10 上，我看到侧面有垂直条。我知道分辨率低于视网膜，但我认为它会自动缩小到目标设备的分辨率并全屏显示图像，但显然它没有这样做。

有没有达到，如果有，请分享。

欣赏它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:46:45.503

知道了！

图像的分辨率并不重要！真的。重要的是确保图像标签通过自动调整图像大小来显示完整的图像。

方法如下：
- 定义具有指定高度 (window.innerHeight) 和宽度 (window.innerWidth) 的 DIV 标记。
- 将 img 标签作为高度 = 100% 和宽度 = 100% 的 DIV 标签的子元素放置

无论图像的分辨率、设备的分辨率、设备的屏幕尺寸如何，图像都将始终自动调整大小和全尺寸显示。

使轮播工作的完整代码在这里：

# 轮播代码

```
{
    xtype: 'panel'
    layout: 'fit',
    flex: Ext.os.is.Phone ? 5 : 6,
    items: [
        {
            xtype: 'carousel',
            direction: 'horizontal',
            directionLock: true,
            id: 'ImgId',
            flex: Ext.os.is.Phone ? 5 : 6,
            config: {
                fullscreen: true
            }
        }
    ]
} 
```

# 轮播商品代码

```
Ext.each(images, function (picture) {
    var img = picture.url;
    var bigImg = picture.bigUrl;
    itemsoverlay.push({
        xtype: 'label',
        html: '<div style="width:' 
               + window.innerWidth 
               + 'px;height:' + 'px;"><img src=' 
               + imgURL 
               + ' style="width: 100%;height: 100%;" /></div>'
     });
}); 
```

此代码适用于平板电脑和智能手机、iOS 或 Android。

高温高压

# c++ - reinterpret_cast 和 c-style cast 是否兼容（按 C++ 标准）？

> ID：13383456
> 
> 赞同：0
> 
> 时间：2012-11-14T16:56:07.793
> 
> 标签：c++, casting, reinterpret-cast

C++ 标准提到这`reinterpret_cast`是实现定义的，并且不提供任何保证，除了将（使用`reinterpret_cast`）转换回原始类型将导致原始值传递给 first。

至少某些类型的 C 风格转换的行为方式大致相同 - 以相同的值来回转换结果 - 目前我正在使用枚举和`int`s，但还有一些其他示例。

虽然 C++ 标准为两种类型转换提供了这些定义，但它是否也为混合类型转换提供了相同的保证？如果库 X 从函数返回`int Y()`某个值，可以使用上述任何一种转换，而不必担心在 Y 的主体`enum`中使用什么转换将初始转换`enum`为？`int`我没有 X 的源代码，所以我无法检查（无论如何它可能会随着下一个版本而改变），并且在文档中几乎没有提到类似的事情。

我知道在这种情况下的大多数实现下，两种强制转换的行为都是一样的；我的问题是：C++ 标准对这种情况有什么看法——如果有的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:01:35.563

C++ 根据和定义 C 强制转换语法的`static_cast`语义。因此，无论您使用何种语法来实现相同的操作，您都可以获得相同的保证。`const_cast``reinterpret_cast`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:48:29.037

`reinterpret_cast`只能用于特定的转换：

*   指向（足够大的）整数的指针，反之亦然
*   函数指针指向函数指针
*   对象指针指向对象指针
*   指向成员的指针到指向成员的指针
*   *要引用的左值*表达式

加上（有条件地）指向对象指针的函数指针，反之亦然。在大多数情况下，转换后的值是未指定的，但可以保证转换后的转换将产生原始值。

特别是，您不能使用`reinterpret_cast`在整数和枚举类型之间进行转换；必须使用`static_cast`（或隐式地，将无作用域的枚举转换为整数类型时）进行转换，这对于足够大的整数类型是明确定义的。唯一可能的问题是图书馆是否做了一些完全疯狂的事情，例如`return reinterpret_cast<int&>(some_enum);`

C 风格的强制转换将执行 a`static_cast`或 a `reinterpret_cast`，然后根据`const_cast`需要执行 a ；因此，任何由 定义的转换`static_cast`也由 C 样式转换定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:10:07.903

不，**不**`reinterpret_cast`等同于 C 风格的演员表。C 风格的强制转换允许抛弃 const-volatile（因此它包括 的功能）不允许在. 如果在源类型和目标类型之间允许，它将执行与 具有不同语义的 a 。如果不允许转换，它将回退到. 最后还有一个极端情况，C 转换不能用任何其他转换来表示：它忽略了访问说明符。**`const_cast``reinterpret_cast``static_cast``static_cast``reinterpret_cast``reinterpret_cast`**

 **一些说明差异的示例：

```
class b0 { int a; };
class b1 { int b; };
class b2 { int c; };
class d : public b0, public b1, b2 {};
int main() {
   d x;
   assert( static_cast<b1*>(&x) == (b1*)&x );
   assert( reinterpret_cast<b1*>(&x) != (b1*)&x ); // Different value
   assert( reinterpret_cast<b2*>(&x) != (b2*)&x ); // Different value, 
                                                   // cannot be done with static_cast
   const d *p = &x;
   // reinterpret_cast<b0*>(p);                    // Error cannot cast const away
   (b0*)p;                                         // C style can
} 
```**

# android - 如何使用 multipart 和 Carrierwave 将图像从 Android 和 iOS 接收到 Rails 3.2.8？

> ID：13383457
> 
> 赞同：0
> 
> 时间：2012-11-14T16:56:08.727
> 
> 标签：android, ios, ruby-on-rails-3, file-upload, carrierwave

从 Android 或 iPhone 接收图像时，我的控制器操作应该如何？

我的图像模型如下：

```
class Image < ActiveRecord::Base
  attr_accessible :user_id, :file_path

  belongs_to :user
  mount_uploader :file_path, FileUploader
end 
```

当前控制器：

```
class ImagesController < ApplicationController
  protect_from_forgery :except => [:upload]

  def upload
    user = User.find(params[:user_id])
    # I have no idea what else I have to do...
  end
end 
```

我怀疑 Carrierwave 如何神奇地将文件保存到服务器，以及我应该在控制器中做什么来接收该帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:43:00.177

`file_path`现在是您模型中的一个字段。这意味着当您在创建新模型时将该字段传递到控制器时，它将自动拾取并保存它。

假设您的控制器中的方法正在被传递，您的多部分文件数据应该`params[:image][:file_path]`在创建新模型时发送。`create``params[:image]`

# ios - 在 UICollectionView 上禁用单元格重用

> ID：13383462
> 
> 赞同：10
> 
> 时间：2012-11-14T16:56:27.190
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewcell

我在我的应用程序中使用 UICollectionView，在单个单元格上带有手势识别器，允许用户“滑动打开”单元格以显示下面的更多数据。

问题是，我经常在 CollectionView 中重新加载数据；因为应用程序每 3 秒左右接收一次更新。这会导致在滑动单元格的过程中，collectionview 单元格被重用的不良行为。

用户将开始滑动一个单元格，应用程序将收到更新、reloadData，而另一个单元格将开始接收手势并开​​始滑动。

我曾尝试在幻灯片发生时禁用应用程序的更新，但这会导致应用程序内出现其他并发症，所以我想知道是否有办法禁用单元格重用，（我最多只有 20 个单元格，所以我没有'不认为性能会大幅下降）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:05:12.610

`needsReload`如果有新数据可用，为什么不使用类似的标志并设置它。幻灯片后，您检查该标志并重新加载collectionView，如果需要？这不工作吗？

如果您不想重复使用单元格，只需使用默认的滚动视图并将所有视图都放入其中！？

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-11-14T17:00:00.117

禁用重用很简单。只是不要使用 dequeueReusableCell 方法。相反，只需分配，初始化您的单元格。我会小心这样做的性能和内存影响......

# javascript - 我如何创建一个带有谷歌脚本的子菜单

> ID：13383464
> 
> 赞同：2
> 
> 时间：2012-11-14T16:56:36.573
> 
> 标签：javascript, google-apps-script

我需要知道如何创建一个包含 2 个菜单项（**A**和**B**）的简单菜单：第一个（A）包含 1 个项目（**A1**），第二个（B），包含 3 个项目（**B1,B2,B3**）

我可以创建一个示例但总是失败：

**代码**

```
 var handler = app.createServerHandler();
     //Create menu bar
      var menuBar = app.createMenuBar(true);

      var data =  ss.getSheets()[LOG_SHEET_INDEX].getDataRange().getValues();

      var lastRow = ss.getLastRow();
      for(var row = 1; row < lastRow; row++){
        var id_menu =1;
        if(data[row][0]==0){
          var nivel = data[row][1];
          var menuItem = app.createMenuItem(data[row][2], handler);

          var separator = app.createMenuItemSeparator();
          menuBar.addSeparator(separator);
          var subMenu = app.createMenuBar(true).setId("subMenu"+nivel);
          for(var i = 1; i< lastRow; i++){
            if(data[i][0]==nivel){
              var sm = app.getElementById("subMenu"+nivel)
              this[sm.addItem(data[row][2], handler)];
            }

          }menuItem.setSubMenu(sm);

        }menuBar.addItem(data[row][2], app.createMenuBar(true));

      }

      app.add(menuBar); 
```

**结果**

![失败](../Images/0f5abc1b63cf3c2e5c288aa392fd0bfd.png)

我需要类似的东西（隐藏 A1、B1、B2、B3：当焦点 A|B 时显示）：

```
 ____
    A
        A1
    ____
    B
        B1
        B2
        B3 
```

**这是我的传播：**

![失败2](../Images/76ae59c59dc9ce2be03241e4a3df7812.png)

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:50:42.023

我做到了，但是由于参数“e”未定义或无效，因此无法使用处理程序（服务器句柄和客户端处理程序）有问题：（MenuItemID 也有问题）

*   我需要知道知道“e”而按下了哪个按钮，但不知道出了什么问题。

    ```
    do get(){
    var app = UiApp.createApplication()
    var menu = menuBar();
    var panel = app.createAbsolutePanel().setId("Panel");
    var horizontalPanel = app.createHorizontalPanel().setId("horizontalPanel");
    var verticalPanelDoc = app.createVerticalPanel().setId("verticalPanelDoc");
    var verticalPanelMenu = app.createVerticalPanel().setId("verticalPanelMenu");
    var scrollPanelDoc = app.createScrollPanel().setId("scrollPanelDoc").setSize('1000', '600');

    verticalPanelMenu.add(menu);
    verticalPanelDoc.add(scrollPanelDoc);
    horizontalPanel.add(verticalPanelMenu);
    horizontalPanel.add(verticalPanelDoc);

    panel.add(horizontalPanel)
    app.add(panel);

    return app;
    }

    function show(e){

      var ss =SpreadsheetApp.openById(TABLA_MENU);
      //**testing 'e' = undefined or void**
      var e_source = e.parameter.source;
      ss.getSheetByName("menu").getRange("B"+6).setValue(e_source);
      ss.getSheetByName("menu").getRange("C"+6).setValue(e);
      //**result in cells :   e_source = undefined   e = {parameter={}}**

      var app = UiApp.getActiveApplication();
      var panel = app.getElementById("Panel");
      var verticalPanelDoc = app.getElementById("verticalPanelDoc");
      var horizontalPanel = app.getElementById("horizontalPanel");
      var scrollPanelDoc = app.getElementById("scrollPanelDoc");
      verticalPanelDoc.clear();
      verticalPanelDoc.remove(scrollPanelDoc);

      //**this will depend of 'e' **

      var panelToShow = app.createCaptionPanel().setTitle("Show").setText("Show");
      //
      var label = app.createLabel().setText("Works!");
      panelToShow.add(label);
      verticalPanelDoc.add(panelToShow);

      return app;
    };

    function menuBar(){
      var ss = SpreadsheetApp.openById(TABLA_MENU);
      var app = UiApp.getActiveApplication();
      var absolutePanel = app.getElementById("absolutePanel");
      var verticalPanelMenu = app.getElementById("verticalPanelMenu");
      var horizontalPanel = app.getElementById("horizontalPanel");

      var option_menu = app.getElementById("option_menu");

      var arrayMenu = ss.getSheetByName("menu").getDataRange().getValues();
      var arraySubMenu =ss.getSheetByName("submenu").getDataRange().getValues();
      var arrayEnlacesSubMenu =ss.getSheetByName("enlaces").getDataRange().getValues();
      var test1 = arraySubMenu[1][1];//A1
      var test2 = arrayMenu[1];//A
      var test3 = arrayEnlacesSubMenu[1][1]
      // **create menu**
      var menuBar = app.createMenuBar(true).setAnimationEnabled(true);

      var handler = app.createServerHandler("show")
      .addCallbackElement(verticalPanelMenu)
      .addCallbackElement(horizontalPanel)
      .addCallbackElement(absolutePanel);

      // **add structure to menu**
      for(var k=1; k<arrayMenu.length; k++) {

        menuBar.addItem(arrayMenu[k][1], arrayMenu[k][1] = app.createMenuBar(true).setWidth("100%")).setWidth("100%");

        for(var j=1; j<arraySubMenu[k].length; j++){
          if(arraySubMenu[k][j]!=''){
            var enlace = arrayEnlacesSubMenu[j][1].toString();

            var a = arrayMenu[k][1];
            var b = arraySubMenu[k][j];
            //var c = this[arrayMenu[k][1]].addItem(arraySubMenu[k][j],handler).addSeparator(app.createMenuItemSeparator())
            arrayMenu[k][1].addItem(arraySubMenu[k][j],handler).setId("1"+arraySubMenu[k][j])).addSeparator(app.createMenuItemSeparator());
            //**THIS ID nither set the ID* show in navigator ID = ... class="gwt-MenuItem" id="gwt-uid-18" role="menuitem" aria-hasp....pan="1">Publicaciones 2012</td>
          }
        }
        menuBar.addSeparator(app.createMenuItemSeparator());
      } 
      return menuBar;
    }; 
    ```

**菜单电子表格**

![菜单1](../Images/940bf3e09890ce11621eec96020e2be1.png)

**submenu电子表格**

![在此处输入图像描述](../Images/d1205fddf7b802955e9ee92d12be1a8f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:54:40.783

嗯，正如 Serge 指出的那样。答案是错误的。同时我发现，真正的原因是：具有子菜单的 MenuItem 不能有处理程序：

```
 var menuBar=app.createMenuBar();
 var subb1=app.createMenuBar(true);
 subb1.addItem (app.createMenuItem("S1", handler1));
 subb1.addItem (app.createMenuItem("S2", handler2));
 var mi1=app.createMenuItem("X1", null); // passing null and not a handler makes submenu work...
 mi1.setSubMenu(subb1);
 menuBar.addItem(mi1);
 app.add(menuBar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:59:52.803

对不起，你不能拥有它（还）：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=317](http://code.google.com/p/google-apps-script-issues/issues/detail?id=317)

# c# - 任务的 C# 控制台应用程序线程问题

> ID：13383465
> 
> 赞同：2
> 
> 时间：2012-11-14T16:56:44.413
> 
> 标签：c#, multithreading, locking, race-condition

我有以下代码片段：

```
lock (lockObject) 
{
  foreach (KeyValuePair<string, List<string>> entry in productDictionary) 
  {
    string writePath = String.Format(@"{0}\{1}-{2}.txt", directoryPath, hour,entry.Key);
    Task writeFileTask = Task.Factory.StartNew(() => WriteProductFile(writePath, entry.Value));
  }
} 
```

productDictionary 是我试图迭代的`ConcurrentDictionary`一个。`<string, List<string>>`对于每个键值对，我尝试基于 构造一个文件路径`Key`，然后写出存储在`Value`. 为此，我启动了一个调用以下方法的新任务：

```
public static void WriteProductFile(string filePath, List<string> productQuotes)
{
    using(StreamWriter streamWriter = new StreamWriter(filePath)) 
    {
        productQuotes.ForEach(x => streamWriter.WriteLine(x));
    }
} 
```

单步执行代码一开始看起来一切都很好。在方法调用处设置断点`WriteProductFile`表明正确的参数正在通过任务传递到方法中。但是，当我的程序实际上将其归结为 WriteProductFile 方法时，参数已变得不匹配。即，已传入与文件路径不匹配的字符串列表，因此一旦程序完成，我的数据就不好了。没有抛出错误并且程序执行良好，但错误的信息被写入错误的文件。

我认为 ConcurrentDictionary 和 Lock 会处理可能出现的任何线程问题，但显然我错过了一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:01:36.987

您正在捕获一个循环变量。您必须在循环内声明一个本地。

```
foreach (KeyValuePair<string, List<string>> entry in productDictionary) 
{
  string writePath = String.Format(@"{0}\{1}-{2}.txt", directoryPath, hour, entry.Key);
  List<string> list = entry.Value; // must add this.
  Task writeFileTask = Task.Factory.StartNew(() => WriteProductFile(writePath, list));
} 
```

在 C# 5 之前，单个循环变量用于循环的所有迭代。每个闭包都引用相同的变量，因此当循环的新循环开始时会更新该值。要获得明确的解释，您应该阅读 Eric Lippert 的帖子：[关闭循环变量被认为是有害的。](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)

# c# - 对嵌入式资源的强类型访问

> ID：13383466
> 
> 赞同：3
> 
> 时间：2012-11-14T16:56:47.697
> 
> 标签：c#, visual-studio-2010, embedded-resource

我正在尝试建立对我在类库中创建的嵌入式 SQL 资源文件的访问。但是，我不确定从这里去哪里。

我已经使用以下方法访问了资源：

```
Assembly.GetExcecutingAssembly().GetManifestResourceStream("InsertTest.sql"); 
```

我的理解是，有一种以强类型方式访问它们的方法，但我似乎无法掌握项目或解决方案以编程方式浏览它们各自的属性或资源。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T20:08:51.393

尽管我确实得到了一些很好的建议（请参阅 Philip Daniels 的回答 - 好东西），但它们都没有真正解决我的具体问题。但是，我发现完成此操作的最简单方法是执行以下操作：

1.  右键单击您的项目并选择“属性”
2.  选择“资源”选项卡。如有必要，创建一个新的资源文件。
3.  在左上角有一个默认为“字符串”的下拉菜单。单击此框并选择“文件”。
4.  拖放要嵌入到项目中的资源文件。

您现在可以使用以下语法访问强类型资源：

```
Project.Properties.Resources.ResourceName; 
```

在我的情况下，这非常有效，因为我将内联 SQL 存储在这些文件中，并返回嵌入在文件中的 sql。但是请记住，默认情况下，这些资源是***链接***的而不是嵌入的，但是您可以更改它们的属性以将它们设置为嵌入的。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:32:22.287

您快到了。我有几个用于此的功能。你可以对图像做一些非常相似的事情。我不确定是否值得创建您想要的属性（如果您坚持，可以通过项目属性的“资源”选项卡执行此操作）。

```
/// <summary>
    /// Gets an open stream on the specified embedded resource. It is the
    /// caller's responsibility to call Dispose() on the stream.
    /// The filename is of the format "folder.folder.filename.ext"
    /// and is case sensitive.
    /// </summary>
    /// <param name="assembly">The assembly from which to retrieve the Stream.</param>
    /// <param name="filename">Filename whose contents you want.</param>
    /// <returns>Stream object.</returns>
    public static Stream GetStream(Assembly assembly, string filename)
    {
        string name = String.Concat(assembly.GetName().Name, ".", filename);
        Stream s = assembly.GetManifestResourceStream(name);
        return s;
    }

    /// <summary>
    /// Get the contents of an embedded file as a string.
    /// The filename is of the format "folder.folder.filename.ext"
    /// and is case sensitive.
    /// </summary>
    /// <param name="assembly">The assembly from which to retrieve the file.</param>
    /// <param name="filename">Filename whose contents you want.</param>
    /// <returns>String object.</returns>
    public static string GetFileAsString(Assembly assembly, string filename)
    {
        using (Stream s = GetStream(assembly, filename))
        using (StreamReader sr = new StreamReader(s))
        {
            string fileContents = sr.ReadToEnd();
            return fileContents;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-19T15:21:06.737

在资源文件上，您将无法使用智能感知来构建您的 sql 脚本，以将它们作为项目中的单独文件进行比较。您可以创建一个辅助类来以强类型方式访问它们：

```
public class Scripts
{
    public static string Sql1
    {
        get
        {
            return GetResource("sql1.sql");
        }
    }

   public static string Sql2
   {
        get
        {
           return GetResource("sql2.sql");
        }
   }

    private static string GetResource(string name)
    {
        var assembly = Assembly.GetExecutingAssembly();
        using(var stream = new StreamReader(assembly.GetManifestResourceStream("Myproject.Sql." + name)))
        {
            return stream.ReadToEnd();
        }
    }
} 
```

例如，在 Dapper 中，您可以像这样访问您的脚本：

```
using(var db = new SqlConnection("yourconnectionstring")){
    db.Open();
    var results = db.Query(Scripts.Sql1);
} 
```

# events - Symfony2 从服务中正确挂钩事件

> ID：13383467
> 
> 赞同：1
> 
> 时间：2012-11-14T16:56:47.277
> 
> 标签：events, symfony, service

我有一个类，用于从各种互连的捆绑包中生成导航。我有一个导航服务来完成这个。

为了将此服务与导航的其他位连接，我希望允许其他捆绑包定义自己的服务，然后侦听事件侦听器并在适当的时间添加其导航项。

问题是，如果不先手动调用该服务以创建它，我无法弄清楚如何让服务监听事件。

有任何想法吗？

* * *

为了给出更具体的想法，我有这样的事情：

```
// Set up as a service in the bundle.
class Navigation {
    // ...
    protected $dispatcher; // event dispatcher passed in to service

    // ...
    public function generateNavigation() {
        $items = array();
        // add some items

        $event = new NavigationEvent($items); // custom event
        $this->eventDispatcher->dispatchEvent('navigation_event', $event);
    }
}

// Set up as a service in some secondary bundle.
class NavigationWorker {
    /**
     * @param $dispatcher Same instance as Navigation
     */
    public function __construct(EventDispatcher $dispatcher) {
        $dispatcher->addListener('navigation_event', array($this, 'doSomething'));
    }
} 
```

有了这个设置，如果 NavigationWorker 在某个时候被调用并被构造，它应该可以工作，但我不能总是直接调用它们，所以它永远不会被构造并且永远不会添加侦听器。

我目前这样做的方式是将所有 NavigationWorkers 传递给 Navigation 并让它添加他们的侦听器，但这非常难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:08:39.723

我正在改变这个答案，因为虽然这让我走上了正确的道路，但这并不是完整的答案。那篇文章实际上只允许您连接到预定义的内核事件。但是我需要自己的，所以我从那里开始工作。

最后，我最终创建了自己的标签，一个编译器传递来处理这些任务。我还添加了我自己的 EventDispatcher 扩展，虽然这不是非常必要的（你可以使用普通的）。

这是文件解决方案的样子。

配置：

```
parameters:
    my_bundle.navigation.event.class: My\Bundle\DependencyInjection\NavigationEvent

    my_bundle.event_dispatcher.class: My\Bundle\DependencyInjection\EventDispatcher
    my_bundle.navigation.class: My\Bundle\DependencyInjection\NavigationGenerator
    my_bundle.navigation_listener1.class: My\Bundle\DependencyInjection\NavigationListener
    my_bundle.navigation_listener2.class: My\Bundle\DependencyInjection\NavigationListener

services:
    my_bundle.event_dispatcher:
        class: %my_bundle.event_dispatcher.class%
    my_bundle.navigation:
        class: %my_bundle.navigation.class%
        arguments:
            - @my_bundle.event_dispatcher
    my_bundle.navigation_listener1.class:
        class: %my_bundle.navigation_listener1.class%
        tags:
            - { name: my_bundle.event_listener, event: my_bundle.navigation.generate, method: onGenerateNavigation }
    my_bundle.navigation_listener2.class:
        class: %my_bundle.navigation_listener2.class%
        tags:
            - { name: my_bundle.event_listener, event: my_bundle.navigation.generate, method: onGenerateNavigation } 
```

编译器通行证：

```
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\Reference;

class EventListenerCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        if (!$container->hasDefinition('my_bundle.event_dispatcher')) {
            return;
        }

        $definition = $container->getDefinition(
            'my_bundle.event_dispatcher'
        );

        $taggedServices = $container->findTaggedServiceIds(
            'my_bundle.event_listener'
        );

        foreach ($taggedServices as $id => $tagAttributes) {
            foreach ($tagAttributes as $attributes) {
                $definition->addMethodCall(
                    'addListener',
                    array($this->getEventString($attributes['event'], $container),     array(new Reference($id), $attributes['method']))
                );
            }
        }
    }

protected function getEventString($str, ContainerBuilder $container)
{
    preg_match('/(.*)\.([^.]*)$/', $str, $matches);
    $parameterName = $matches[1];
    $constName = strtoupper($matches[2]);

    $eventClass = $container->getParameter($parameterName . '.event.class');

    if (!$eventClass) {
        throw new Exception('Unable to find parameter: ' . $eventClass . '.event.class');
    }

    // Return the value of the constant.
    return constant($eventClass . '::' . $constName);
} 
```

将这样的函数添加到您的编译器类（类似于 MyBundleBundle）。

```
public function build(ContainerBuilder $container)
{
    parent::build($container);

    $container->addCompilerPass(new EventListenerCompilerPass());
} 
```

现在 EventListener 将为每个事件添加侦听器。您不仅仅是完全按照您的预期实现其他所有内容（导航调度它也侦听的事件）。您可以从任何捆绑包中挂接新的事件侦听器，它们甚至不需要共享公共类/接口。

这也适用于任何自定义事件，只要具有事件常量的对象在最后使用“.event.class”注册在参数中（因此 my_bundle.navigation.generate 会查找参数 my_bundle.navigation。 event.class，使用该类和常量 GENERATE）。

希望这会帮助其他想要做类似事情的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:34:35.327

请参阅[事件侦听器文档](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)。Make`NavigationWorker`和事件监听器，它不需要显式构造。

# language-agnostic - 什么是服务？

> ID：13383470
> 
> 赞同：3
> 
> 时间：2012-11-14T16:56:56.170
> 
> 标签：language-agnostic

我经常听到“服务”这个词，但我对它的理解很模糊。有人可以引用一些实际示例来解释什么是服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:04:00.660

这取决于上下文。非常抽象地说，服务是某种提供某种功能的程序，但其内部是完全不透明的。即，*Web 服务*是在 Web 某处运行的东西，具有某种 API，您可以联系它来获取或提交一些数据。它到底做什么不关你的事，它只是为你提供*服务*。例如，在系统上，*Windows 服务*可能是在后台持续运行的程序，正在*做某事*。在应用程序内部，您可能有一个*服务层*，它提供一些功能，您可以通过 API 在应用程序的其余部分使用这些功能，但它的工作原理无关紧要。

这与您通常更直接地导入、操作和使用的函数、库或类等形成对比。服务更加独立，仅提供其功能而没有太多的内省方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T17:00:35.263

麦当劳是一项服务。你交出一些钱，他们会给你一个巨无霸。

政客是一种服务。你把选票交给他们，他们交出谎言并偷走你的午餐钱，然后向你收取费用。

在计算方面，您交出一些数据（数字、文本字符串等），服务获取该数据，对其进行处理并返回结果。

例如，谷歌翻译是一项服务。谷歌搜索是一项服务。godaddy 的 DNS 注册器是一项服务。计算服务与现实世界的服务没有什么不同。

# asp.net-mvc - Html.LabelFor 和 Html.TextBoxFor 生成空的html代码

> ID：13383473
> 
> 赞同：0
> 
> 时间：2012-11-14T16:57:04.863
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在编写我的第一个 ASP.NET MVC 应用程序，但我遇到了一个大问题。我想制作一个代表表单的控件，但是当我尝试生成标签和文本框时，它返回给我一个空白页面。

所以，这是我的**模型**文件（MyModel.cs）：

```
namespace MyNamespace.Models
{
  public class MyModel
  {
    [Required(ErrorMessage = "You have to fill this field")]
    [DisplayName("Input name")]
    public string Name{ get; set; }
  }
} 
```

这是带有我的控件的 MyFormControlView.ascx 文件：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<MyNamespace.Models.MyModel>"%>
<div>
    <%
        using (Html.BeginForm())
        {
            Html.LabelFor(m => m.Name);
            Html.TextBoxFor(m => m.Name);
            Html.ValidationMessageFor(m => m.Name);
        }
    %>
</div> 
```

这是我在其中呈现控件的 Index.aspx 文件：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Main.Master" Inherits="System.Web.Mvc.ViewPage<System.Collections.IEnumerable>" %>

<asp:Content runat="server" ID="MainContent" ContentPlaceHolderID="MainContent">
This is my control test!
<%Html.RenderPartial("MyFormControlView", new MyNamespace.Models.MyModel { Name = "MyTestName"}); %>
</asp:Content> 
```

所以，当我运行我的应用程序时，结果是孤独的标题：“这是我的控制测试！” 并且生成的页面上没有标签或文本框。如果我检查生成页面的源代码，我可以看到我的`<div>`块，但它的内部文本是空的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:58:07.787

这些方法返回带有生成的 HTML 代码的字符串。
您没有对它们的返回值做任何事情。

您需要使用`@`符号在页面上打印返回值：

```
<%= Html.LabelFor(m => m.Name) %> 
```

请注意，由于这些不是语句，因此不应有`;`. 在您的示例中，它`;`是无害的（它被解析为一个空的 C# 语句）；如果它位于 HTML 标记内，它会打印`;`到 HTML 源代码中。

# visual-studio - 如何使用 Emacs 仿真扩展将文本从另一个应用程序粘贴到 Visual Studio？

> ID：13383480
> 
> 赞同：6
> 
> 时间：2012-11-14T16:57:31.633
> 
> 标签：visual-studio, emacs

从另一个程序复制文本后，当我使用 Emacs Emulation 扩展切换到 Visual Studio 并尝试粘贴文本时，以下方法均无效：

*   Ctrl-Y（'yank' [粘贴] 的 Emacs 仿真扩展键绑定）
*   点击工具栏上的粘贴
*   编辑 > 粘贴
*   右键单击>粘贴

**如何将来自外部应用程序的文本粘贴到运行[Emacs Emulation 扩展](http://visualstudiogallery.msdn.microsoft.com/09dc58c4-6f47-413a-9176-742be7463f92)**的 Visual Studio 副本中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T12:19:04.970

如上所述 - `Ctrl`- `Shift`- `Ins`( `Edit.CycleClipboardRing`) 确实可以解决这个问题（至少它对我在 VS2012 中加载 emacs 插件有用），因此您可以进入 Tools->Options，选择 Environment->Keyboard，然后删除`Ctrl`-`Y`快捷方式，然后将-`Ctrl`分配`Y`给`Edit.CycleClipboardRing`。

重复`Ctrl`-`Y`确实循环剪贴板环，这是我可以忍受的副作用......我想如果你重新分配`Alt`-`Y`成为相同的命令，那么通常这将达到你的预期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T16:57:31.633

`Ctrl-Shift-Ins`( `Edit.CycleClipboardRing`) 会将 Windows 剪贴板的内容粘贴到 Visual Studio 中。

至于其他更标准的方法不起作用，这是 Emacs Emulation 扩展中的一个已知错误。从[扩展的 Visual Studio Gallery 页面](http://visualstudiogallery.msdn.microsoft.com/09dc58c4-6f47-413a-9176-742be7463f92)：

> 从其他应用程序剪切/复制/粘贴到 Visual Studio 中不适用于安装的 Emacs 扩展。我们正在努力解决此问题，并在修复可用时发布扩展的更新版本。

# redis - How to create a local Windows-based service bus outside of Azure, similar to Redis with automatic fail-over?

> ID：13383489
> 
> 赞同：0
> 
> 时间：2012-11-14T16:57:43.600
> 
> 标签：redis, signalr, azureservicebus

We are implementing a service/message-bus feature in our [SignalR](https://github.com/SignalR/SignalR/wiki) application and have been looking at [Redis](http://redis.io/), with automatic fail-over using [Redis Sentiel](http://redis.io/topics/sentinel). We would like to maintain our own servers and have read [SignalR powered by Service Bus](http://vasters.com/clemensv/2012/02/13/SignalR+Powered+By+Service+Bus.aspx). Since this is a Winddows Azure implementation, how can I accomplish this in our internal network with VM's with automatic fail-over similar to the Redis solution discussed above?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:03:23.313

You may want to look at Service Bus for Windows Server: [http://msdn.microsoft.com/en-us/library/windowsazure/jj193022(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj193022(v=azure.10).aspx)

It has API symmetry between Azure Service Bus and the Windows Server API (particularly for messaging: queues and topics/similar to SignalR). It doesn't include the caching and ACS services. However, if you want the Azure Service Bus - Caching...you can get that in:

AppFabric for Windows Server [http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)

# regex - 如何在 Sublime Text 2 文档中找到所有带单引号的属性并用双引号替换？

> ID：13383497
> 
> 赞同：3
> 
> 时间：2012-11-14T16:58:24.433
> 
> 标签：regex, sublimetext2

我今天感觉特别挑剔。我正在处理一些 HTML 文档，这些文档通过文档在所有属性值周围都有单引号，如下所示：

`<div class='classone classtwo'>`

我希望能够在每个文档中进行查找和替换并用双引号替换，如下所示：

`<div class="classone classtwo">`

文档中的许多元素将具有多个属性：

`<div class='classone classtwo' data-scripts='lazyload'>`

有些会有正确的双引号：

`<div class='classone classtwo' data-scripts="lazyload">`

用双引号替换所有单引号包装值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:48:35.260

做一个“替换”操作，我可能会尝试这样简单的事情：

查找内容：      `=\s*'(.*?)'`
替换为： `="$1"`

确保启用正则表达式切换按钮 ( `.*`)

在 SublimeText2 中这样做的好处是它会在你执行替换之前立即显示哪些部分将被匹配。所以正则表达式不必是完全证明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:36:19.793

在 Ruby 中，我会使用该正则表达式：

```
ruby-1.9.2-p290 :001 > s = "<div class='classone classtwo' data-scripts='lazyload'>"
 => "<div class='classone classtwo' data-scripts='lazyload'>" 
s.gsub(/=\s?'([^']+)'/,"=\"#{$1}\"")
=> "<div class=\"lazyload\" data-scripts=\"lazyload\">" 
```

这一切都归结为捕获两个''中的所有内容：

```
'([^'])' 
```

并使用“”返回捕获的匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:12:14.603

如果除标签之外的其他任何地方都没有单引号，并且您想全部替换它们，那么这会更快：

突出显示文档中任何位置的任何单引号。

按`Alt`+ `F3`。

键入一个`"`。

# vb.net - VB.NET pinvoke 声明错误？

> ID：13383498
> 
> 赞同：0
> 
> 时间：2012-11-14T16:58:26.727
> 
> 标签：vb.net, pinvoke

我从 pinvoke 网站复制并粘贴了以下 VB.NET 结构。

[http://www.pinvoke.net/default.aspx/Structures/BITMAPINFOHEADER.html](http://www.pinvoke.net/default.aspx/Structures/BITMAPINFOHEADER.html)

但是，当我将它粘贴到这样的模块名称下的模块中时，VB.NET 告诉我需要声明：

```
Option Strict Off
Option Explicit On

Imports System
Imports System.Diagnostics
Imports System.Drawing
Imports System.Drawing.Drawing2D
Imports System.Runtime.InteropServices
Imports System.Windows.Forms

Module modDrawing

    StructLayout(LayoutKind.Explicit)>Public Structure BITMAPINFOHEADER
    <FieldOffset(0)> Public biSize As Int32
    <FieldOffset(4)> Public biWidth As Int32
    <FieldOffset(8)> Public biHeight As Int32
    <FieldOffset(12)> Public biPlanes As Int16
    <FieldOffset(14)> Public biBitCount As Int16
    <FieldOffset(16)> Public biCompression As Int32
    <FieldOffset(20)> Public biSizeImage As Int32
    <FieldOffset(24)> Public biXPelsperMeter As Int32
    <FieldOffset(28)> Public biYPelsPerMeter As Int32
    <FieldOffset(32)> Public biClrUsed As Int32
    <FieldOffset(36)> Public biClrImportant As Int32
End Structure 
```

请问我哪里做错了？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:05:28.330

看看这个：（不是完整的代码）

```
 Module modDrawing

        <StructLayout(LayoutKind.Explicit)> _
        Public Structure BITMAPINFOHEADER
            <FieldOffset(0)> Public biSize As Int32
            <FieldOffset(4)> Public biWidth As Int32
            <FieldOffset(8)> Public biHeight As Int32
            <FieldOffset(12)> Public biPlanes As Int16
            <FieldOffset(14)> Public biBitCount As Int16
            <FieldOffset(16)> Public biCompression As Int32
            <FieldOffset(20)> Public biSizeImage As Int32
            <FieldOffset(24)> Public biXPelsperMeter As Int32
            <FieldOffset(28)> Public biYPelsPerMeter As Int32
            <FieldOffset(32)> Public biClrUsed As Int32
            <FieldOffset(36)> Public biClrImportant As Int32
        End Structure

   End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:50:01.483

pinvoke.net 代码中的错误是该属性缺少初始的`<`. 代替

```
StructLayout(LayoutKind.Explicit)> 
```

它应该读

```
<StructLayout(LayoutKind.Explicit)> 
```

但是，`LayoutKind.Explicit`在这里并不是很明智。当然你可以指定所有的字段偏移量，但为什么要让自己很难呢？使用`LayoutKind.Sequential`. 由于这是默认设置，您可以简单地省略该属性。

```
Public Structure BITMAPINFOHEADER
    Public biSize As Int32
    Public biWidth As Int32
    Public biHeight As Int32
    Public biPlanes As Int16
    Public biBitCount As Int16
    Public biCompression As Int32
    Public biSizeImage As Int32
    Public biXPelsperMeter As Int32
    Public biYPelsPerMeter As Int32
    Public biClrUsed As Int32
    Public biClrImportant As Int32
End Structure 
```

# jquery - Jquery双击链接删除div内容

> ID：13383503
> 
> 赞同：0
> 
> 时间：2012-11-14T16:58:38.363
> 
> 标签：jquery

当有人点击链接时，我编写了这段代码来加载 DIV 的内容。

现在，如果您单击一个链接两次，它正在删除内容。

这是代码：

```
$('a').click(function() {
   var id = $(this).attr('class');
 if(id == 'first')
    {
      $('.active').removeClass('active');   
      $('a.first').addClass('active');  
    } 
else if(id == 'second')    
     {
      $('.active').removeClass('active');   
      $('a.second').addClass('active');  
    } 

   $('#first').toggle(id == 'first');

   $('#second').toggle(id == 'second');
});​ 
```

HTML：

```
<a class="first">one</a>
<a class="second">two</a>
<div>
   <li id="first">
       <h2>pen</h2>
       <div>
           <div>parker</div>
       </div>
  </li>
  <li id="second" style="display: none;">
        <h2>car</h2>
        <div>Bugatti</div>
     </div>
   </li>
</div>​ 
```

CSS：

```
.active { color: green; }​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:01:48.110

使用您的代码最简单的解决方法是在点击回调函数上使用检查条件：

[http://jsfiddle.net/UuFgt/](http://jsfiddle.net/UuFgt/)

```
if($(this).is('.active')) return false; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T17:06:29.357

您不是在“加载”内容，而是在隐藏（使用 ）之后显示它`display: none`。所以内容没有被“删除”，它被隐藏了。任何时候使用`removeClass('active');`，都会隐藏相应的元素。`toggle()`您的代码中的想法是什么？我认为你用错了。要么你应该颠倒两者（第一个使用第二个，第二个使用第一个），或者做不同的事情。

# .net - 按数据集和 id 列表查询生成器

> ID：13383505
> 
> 赞同：0
> 
> 时间：2012-11-14T16:58:48.013
> 
> 标签：.net, sql, dataset

我搜索了一种通过使用数据集作为数据库模拟器来创建查询的方法。数据集包含具有主键列的每个表。它也有外键。 [模拟数据库 vb.net](https://stackoverflow.com/questions/13186174/simulate-database-vb-net)

我通过提供键/值列表来搜索创建“位置”部分的方法。

数据集将为空，这是创建查询的指数列表的唯一方法。

样品： 样品：

```
Table A
colA 
```

和

```
Table B
colB
colD 
```

通过链接

```
Table C
colA
colB 
```

和

```
Table D
colD 
```

我给名单

```
[colA] 1
[colA] 2
[colA] 3
[colB] 5
[colB] 6
[colD] 8 
```

我想要查询表 A 中包含列表中指定元素的每个项目。

```
Select * 
from TableA
where colA in (1,2,3)
and colA in (
            select colA 
            from TableC
            where colB in (5,6)         
            and colB in (
                            select colB
                            from TableB
                            where colD in (8)
                        )
            ) 
```

所以我正在搜索算法来创建查询。像任何查询生成器一样工作。

* * *

我可以从任何这些表中获取数据。

这是一个函数

```
function GetSubQuery(table, list(of keyValue) as string 
```

我的示例要求 TableA。但我可以希望 TableB 或 C 或 D. 具有相同的 id 列表。

* * *

情况（模拟）

```
I want table A,B or D.

I can ask for table A, giving id from colD. 
I can ask for table A, giving id from colB.
I can ask for table A, giving id from colA.
I can ask for table A, giving id from colB and colD.
I can ask for table A, giving id from colB and colA.
I can ask for table A, giving id from colB and colD and colA.

I can ask for table B, giving id from colD.
... 
```

我们这里有 18 种可能性。

但我不想查询最大可能性并将其用于每个可能性。我的意思是查询“表 A，从 colB 和 colD 和 colA 给出 id”。如果您只有 colA 的 id，则不应使用。因为它可以在另一个表中有很多数据，你会在不需要的情况下搜索。

算法需要知道，如果你不需要去那里，你不需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:46:50.350

数据集和数据表不支持 TSQL。
TSQL 只是与数据库引擎对话。

您可以定义 PK、PK FK 关系，并遍历这些关系。
[导航 DataRelations](http://msdn.microsoft.com/en-us/library/d6s958d6.aspx)
您可以转换为 List 并使用 LINQ 进行查询。

[LINQ（语言集成查询）](http://msdn.microsoft.com/en-us/library/bb397926.aspx)

或者您可以只迭代行并进行相等比较。

SQL CE 是一个支持 TSQL 的嵌入式数据库。

另一种选择是 XML 并使用 LINQ 来查询 XML。

就我个人而言，我会使用类（而不是数据集）并覆盖 gethashcode 和 equals。DataSet 很重而且很慢，在 .NET 中收集已经走了很长一段路。
对集合使用 HashSets（或 KeyedCollection 字典）。
甚至有代表连接的类 TblATblD 并使用 HashSet。
如果您的 ID 可以是 Int16，那么您可以在 TblATblD 上将两个 Int16 打包成 Int32。
我使用用户组和 UrsGrp 执行此操作。
用户可以看到某些字段。
查询有点像您在 LINQ 中谈论的所有内容。

# asp.net - .NET 将文件转换为图像以存储在数据库中

> ID：13383514
> 
> 赞同：0
> 
> 时间：2012-11-14T16:59:12.193
> 
> 标签：asp.net, .net

有谁知道.NET 中的一种方法来获取文件的传入流并将其转换为要存储在数据库中的图像？（不确定这是否可能，但想检查一下）。

编辑：不一定是图像流

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:59:56.627

您需要将流读入 a `byte[]`，然后将其保存到数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:00:08.337

您可以将图像流转换为字节数组并以二进制或 varbinary 数据类型存储在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:03:47.923

这是在 C# 中将图像传输到字节数组的简短示例：

```
private static byte[] ReadImage(string p_postedImageFileName, string[] p_fileType)
{
    bool isValidFileType = false;
    try
    {
        FileInfo file = new FileInfo(p_postedImageFileName);

        foreach (string strExtensionType in p_fileType)
        {
            if (strExtensionType == file.Extension)
            {
                isValidFileType = true;
                break;
            }
        }
        if (isValidFileType)
        {
            FileStream fs = new FileStream(p_postedImageFileName, FileMode.Open, FileAccess.Read);

            BinaryReader br = new BinaryReader(fs);

            byte[] image = br.ReadBytes((int)fs.Length);

            br.Close();

            fs.Close();

            return image;
        }
        return null;
    }
    catch (Exception ex)
    {
        throw ex;
    }
}

#endregion 
```

# .net - 如何使用 .Net EF 从 MySql TinyInt(1) 列中读取 > 1 的值？

> ID：13383517
> 
> 赞同：1
> 
> 时间：2012-11-14T16:59:17.263
> 
> 标签：.net, mysql, c#-4.0, entity-framework-4

我正在用额外的 .net 支持的报告来补充一个开源 Web 应用程序。在数据库中，有一列是 TinyInt(1)，Entity Framework 假定它是一个布尔值。

我发现的问题是应用程序正在使用该列作为枚举，其中的值也为 2 或更高。不幸的是，我无法更改此应用程序的架构。

尝试将框架设置为将列映射到 SByte 而不是 boolean 会导致编译错误，并且 Google 和 Stack 搜索尚未成功。

在我编写一个包含手动 SQL 的自定义类来获取这些值之前，有没有办法说服 EF 将该列视为除 bool 之外的任何内容？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:02:36.553

tinyint(1) 是一个 8 位值，但限制为 1 个字符显示 (the `(1)`)。旧版本的 mysql 不支持布尔字段，因此 tinyint(1) 传统上用于模拟它们。删除显示大小限制，它应该被视为任何其他 1byte int。

# objective-c - setScrollDirection：对于 CollectionView 不起作用

> ID：13383518
> 
> 赞同：0
> 
> 时间：2012-11-14T16:59:25.960
> 
> 标签：objective-c

我在 ViewController 中以编程方式实现了一个集合视图，并将它与 Storyboard 连接，但滚动不起作用，并且一半的单元格没有出现，因为它们向右淡化：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self.collectionView registerClass:[FotoCell class]
            forCellWithReuseIdentifier:@"cell"];

    UICollectionViewFlowLayout *myLayout = [[[UICollectionViewFlowLayout alloc]init]autorelease];
    [myLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
    [self.collectionView setCollectionViewLayout:myLayout];

} 
```

你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:35:47.937

您需要删除 viewDidLoad 中的 registerClass 行，并在 UICollectionViewDelegate 的 Datasource 方法中设置重用标识符，如下所示 -

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:      (NSIndexPath *)indexPath
{
    FotoCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];

  ....

    return cell;
} 
```

# android - ViewPager + Fragments + 使用按钮更改页面

> ID：13383531
> 
> 赞同：1
> 
> 时间：2012-11-14T17:00:08.570
> 
> 标签：android, android-viewpager

我正在使用 ViewPager 并使用按钮更改页面。我已经让它工作了，但它的性能不一致。有时它只是不会反应。您仍然可以通过触摸滚动，但按钮不起作用。我有一个带有一些片段的 ViewPager。这是 FragmentActivity 中的 ViewPager 代码：

```
private void initializeViewPager() {
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
    mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

        ActionBar actionBar = getActionBar();

            @Override
            public void onPageSelected(int position) {
                currentPage = position;
            }

            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

            }

            @Override
            public void onPageScrollStateChanged(int state) {
                Log.d(TAG, "onPageScrollStateChanged: " + state);

            }

        });
} 
```

这是片段之一中的代码：

**// 从 FragmentActivity 引用 ViewPager**

```
static ViewPager mViewPager = MainActivity.mViewPager; 
```

**//注册onClick和setPagerItem**

```
ImageView next = (ImageView)v.findViewById(R.id.ic_menu_next);
    next.requestFocus();
    next.setOnClickListener(new OnClickListener() {
     @Override
           public void onClick(View view) {
               mViewPager.setCurrentItem(getItem(+1), true);
           }

        }); 
```

**// 这会确定您在 ViewPager 中的位置**

```
private static int getItem(int i) {
    int a = mViewPager.getCurrentItem();
    i += a;
    return i;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:08:52.877

尝试将您的`currentPage`领域用于该职位。在 ViewPager 上调用 getCurrentItem() 似乎无法正确获取位置。

```
mViewPager.setCurrentItem(currentPage + 1, true); 
```

# javascript - 向 Backbone 销毁/删除发送不同或额外的参数？

> ID：13383533
> 
> 赞同：1
> 
> 时间：2012-11-14T17:00:18.913
> 
> 标签：javascript, backbone.js

我不想将 ID 作为参数发送，而是发送要删除的模型，类似于 PUT 和 POST 方法。

这可能吗？如果没有，是否可以简单地添加额外的参数？为了能够从服务器中删除，我实际上需要的不仅仅是 ID。

编辑：我应该重写销毁方法并进行自己的 AJAX 调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:20:16.410

您可以使用自定义标头来执行此操作，如下所示： [https ://stackoverflow.com/a/13075029/1067061](https://stackoverflow.com/a/13075029/1067061)

只需将其写在您的删除中：

```
model.destroy({
   headers: {
      'param_1': 1,
      'param_2': 2
   }
}); 
```

希望能帮助到你。

# css - 如何防止 GWT 覆盖 CSS

> ID：13383535
> 
> 赞同：0
> 
> 时间：2012-11-14T17:00:31.457
> 
> 标签：css, gwt

我的 GWT 应用程序有一个`core.css`包含整个应用程序的 CSS 的大文件。

对于下面的 HTML，我为父级和子级添加了 CSS，以及专门为子级添加了 CSS。但是，我的 CSS 更改会以某种方式被覆盖。我相信这些 CSS 更改不会被我的 CSS 覆盖，因为父级或子级没有其他 CSS。

```
<DIV class="parent">
   <DIV class="child">
   <Anchor ...>
</DIV> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:38:50.327

覆盖 GWT 样式类可能特别痛苦。查看这个关于如何正确覆盖 GWT 样式类的[SO 答案。](https://stackoverflow.com/questions/1159739/override-gwt-styling)

另一种但非常不鼓励的方法是*非常*保守地使用该`!important`规则。这通常被认为是不好的做法，但有时在 GWT 中，当您只想覆盖单个 Widget 的特定属性时，这是必要的。

您也可以尝试在代码中设置样式属性。

```
widget.getElement().setAttribute("backgroundColor", "red"); 
```

请注意，GWT 要求对属性名称使用驼峰式大小写。

# android - Android Shuffle String Array，然后将 shuffle 的数组拆分为单独的 TextView

> ID：13383546
> 
> 赞同：0
> 
> 时间：2012-11-14T17:00:50.370
> 
> 标签：android, arrays

我有一个简单的 3 项数组，我已将其改组并输出到单个 texview 中。我想做的是将每个数字输出到它自己的文本视图中。我有这个代码，但是在`chop[0];`并且`chop[2];`我得到了错误`Syntax error on token ";", invalid AssignmentOperator`。也许我对阵列的切割完全错误？这是代码：

```
 String[] numbArray = { "1", "2", "3" };
    List<String> aList = new ArrayList<String>();
    for (String s: numbArray)
        aList.add(s);
    Collections.shuffle(aList);
    for (String showNum : aList) {
        String[] chop = showNum.split(" ");
        chop[0];
        chop[1];
        chop[2];

        textview1.setText(chop[0]);
        textview2.setText(chop[1]);
        textview3.setText(chop[2]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:07:42.413

我想你想要这个：

```
String[] numbArray = { "1", "2", "3" };
List<String> aList = new ArrayList<String>();
for (String s: numbArray)
    aList.add(s);
Collections.shuffle(aList);
TextView[] textViews = {textview1, textview2, textview3};
for (int i = 0; i<textViews.lenght; i++) {
    textviews[i].setText(aList.get(i));
} 
```

这些行：

```
chop[0];
chop[1];
chop[2]; 
```

是不正确的，因为他们什么都不做。编译器希望您为这些引用分配一些值。

# python - 如何将数据存储到numpy中的视图中？

> ID：13383547
> 
> 赞同：2
> 
> 时间：2012-11-14T17:00:53.347
> 
> 标签：python, numpy

如何在不将数据更改为 numpy 视图的情况下将数据存储到 numpy 视图`view`中`copy`？此代码片段举例说明了我的问题：

```
>>> import numpy as np

>>> #-- init arrays and view
>>> a = np.ones([4])
>>> z = np.zeros([2,4])
>>> z0 = z[0,:]  #-- view
>>> z0.flags.owndata
False

>>> #-- This works!
>>> #-- modify view in-place
>>> np.add(a,z0,z0)
>>> z0.flags.owndata
False
>>> z
array([[ 1.,  1.,  1.,  1.],
       [ 0.,  0.,  0.,  0.]])

>>> #-- reinit arrays and view
>>> z = np.zeros([2,4])
>>> z0 = z[0,:]  #-- view

>>> #-- This does NOT work!
>>> #-- store data into view
>>> z0 = a 
>>> z0.flags.owndata
True 
```

`+=` `-=` `*=` `/=`我知道使用带有参数的 numpy 函数进行就地修改`out`，因此您可以执行诸如获取就地`np.abs(x, x)`绝对值之类的操作。`x`

但是如何只将数据存储到一个`view`而不做修改呢？

滥用该`add`功能（添加零和存储）有效，但感觉不“正确”：

```
np.add(a,0,z0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:30:11.077

当你这样做时`z0 = a`， then是与python 逻辑`z0`相同的对象。`a`你想要做的是：

```
z0[...] = a 
```

使用切片语法。它使用就地`__setitem__`python逻辑。在 numpy 1.7 上。或者以后你也可以使用`np.copyto`，这可能会快一点，但我个人喜欢切片语法。

# c# - Mono 启动线程中的 Quartz.Net 冻结系统

> ID：13383548
> 
> 赞同：1
> 
> 时间：2012-11-14T17:00:54.383
> 
> 标签：c#, multithreading, mono, quartz.net

我在单声道中使用 Quartz.net。当我创建这样的调度程序时：

```
ISchedulerFactory quartzSchedulerFactory = new StdSchedulerFactory();
IScheduler quartzScheduler = quartzSchedulerFactory.GetScheduler(); 
```

在 Quartz.Net 中，SimpleThreadPool 类中调用了以下方法：

```
/// <summary>
/// Called by the QuartzScheduler before the <see cref="ThreadPool" /> is
/// used, in order to give the it a chance to Initialize.
/// </summary>
public virtual void Initialize()
{
    if (workers != null && workers.Count > 0) 
    {
        // already initialized...
        return;
    }

    if (count <= 0)
    {
        throw new SchedulerConfigException("Thread count must be > 0");
    }

    // create the worker threads and start them
    foreach (WorkerThread wt in CreateWorkerThreads(count))
    {
        wt.Start();

        availWorkers.AddLast(wt);
    }
} 
```

在 Windows 中这工作正常，但在 CentOS 中，调用 wt.Start() 时系统会冻结。即使我杀死了该进程，它也会失效，只有重新启动系统才能杀死它。尽管有时它会起作用，但我执行该程序的次数大约为五分之一。

以下是 WorkerThread 启动时调用的代码：

```
public override void Run()
{
    bool ran = false;
    bool shouldRun;
    lock (this)
    {
        shouldRun = run;
    }

    while (shouldRun)
    {
        try
        {
            lock (this)
            {
                while (runnable == null && run)
                {
                    Monitor.Wait(this, 500);
                }

                if (runnable != null)
                {
                    ran = true;
                    runnable.Run();
                }
            }
        }
        catch (Exception exceptionInRunnable)
        {
            log.Error("Error while executing the Runnable: ", exceptionInRunnable);
        }
        finally
        {
            lock (this)
            {
                runnable = null;
            }
            // repair the thread in case the runnable mucked it up...
            if (Priority != tp.ThreadPriority)
            {
                Priority = tp.ThreadPriority;
            }

            if (runOnce)
            {
                lock (this)
                {
                    run = false;
                }
                tp.ClearFromBusyWorkersList(this);
            }
            else if (ran)
            {
                ran = false;
                tp.MakeAvailable(this);
            }
        }

        // read value of run within synchronized block to be 
        // sure of its value
        lock (this)
        {
            shouldRun = run;
        }
    }

    log.Debug("WorkerThread is shut down");
} 
```

会不会是死锁问题？如果是，为什么它不在 Windows 中发生？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:02:25.120

我在 CentO 中遇到了类似的问题。Mono 2.10.8.1 在创建默认线程池线程时卡住了。卡住后，无法终止进程或获取堆栈跟踪。

我已经设法通过更新操作系统的核心来解决这个问题。从 2.6.32-71.el6.x86_64 到 2.6.32-279.14.1.el6.x86_64。

# solr - MapReduce 和类似的方法来加速 Apache Solr 的索引

> ID：13383549
> 
> 赞同：1
> 
> 时间：2012-11-14T17:01:04.003
> 
> 标签：solr, mapreduce, elasticsearch, elastic-map-reduce

我正在构建一个 Web 应用程序，其中用户的内容由 Solr 索引，然后显示在仪表板类型的界面中。最终，这些要求应该允许用户上传一个 50 兆的文件（某天 1 场演出），并将他们的内容编入索引并准备好尽快浏览。任意基准：1 分钟。首选基准：50 毫秒。

我对扩大 Solr**索引**操作容量的方法很感兴趣。我一直在阅读[这里](http://architects.dzone.com/articles/solr-hadoop-big-data-love)、[这里](http://java.dzone.com/articles/scaling-solr-indexing)、[这里](http://blog.cloudera.com/blog/2012/03/indexing-files-via-solr-and-java-mapreduce/)、[这里](http://www.elasticsearch.org/tutorials/)的方法。似乎 AWS [elastic map reduce](http://aws.amazon.com/elasticmapreduce/)、[elastic search](http://www.elasticsearch.org/)和[SolrCloud](http://wiki.apache.org/solr/SolrCloud)都是解决这个问题的潜在方法。我想知道是否有可接受的方法来扩展按需服务器资源的索引，尤其是可以轻松集成到现有 AWS 架构中的解决方案。

请注意，该应用程序使用 Solr 4.0。

# ajax - 如果 setInterval 上的 .get() 数据相同，如果重新加载数据不同，则什么也不做

> ID：13383550
> 
> 赞同：0
> 
> 时间：2012-11-14T17:01:07.720
> 
> 标签：ajax, jquery

我有一个 DIV，它是从准备好的文档中的 $.get 数据填充的，然后我每 5 秒调用一次 setInterval。如果#are_friends 的html 数据与以前相同，我试图做的是setInterval $.get 的成功，但如果它不同，则再次将数据加载到#are_friends。

有没有人知道我将如何做到这一点或比我试图实施的更好的方法。

```
<div id="are_friends"></div>

<script type="text/javascript">
    $(document).ready(function() {  
                $.get('<?php echo $siteUrl ?>are_friends.php?userid=<?php echo $userid; ?>', function(data) {
                           $("#are_friends").html(data);
                });

        var auto_refresh = setInterval(
         function ()
        {

            $.ajax({
              url: "<?php echo $siteUrl ?>are_friends.php?userid=<?php echo $userid; ?>",
              success: function(newdata){
                var oldcontent = $("#are_friends").html();
                if(oldcontent != newdata) {
                    $("#are_friends").html(newdata);
                }
              }
            });
        }, 5000); // refresh every 5000 milliseconds
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:06:58.320

至少，您可以重用获取数据的函数，如下所示：

```
 function getData(callback)
  {
        $.ajax({
          url: "<?php echo $siteUrl ?>are_friends.php?userid=<?php echo $userid; ?>",
          success: function(newdata){
            callback(newdata);
          }
        });
  }

  $(document).ready(function() 
  {  
        getData(function(data)
        {
            $("#are_friends").html(data);
        });

        var auto_refresh = setInterval(function ()
        {
            getData(function(newdata)
            {
                if($("#are_friends").html() != newdata) {
                    $("#are_friends").html(newdata);
                }
            });
        }, 5000);
    }); 
```

实际上，初始调用和后续调用是一样的，那为什么不重用呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:13:18.500

这与您正在使用的数据有很大关系。现在，您只是在产生大量无用的流量。我建议您在请求 are_friends.php 时也发送一些当前状态标记。PHP 将使用该标记检查是否有更改并返回“无更改”或更新的 HTML。如果没有任何更改并且流量减少（假设大多数请求将返回“无更改”），您应该在此处降低服务器负载。但又一次。这取决于你在 are_friends.php 中做什么，你需要什么数据等等。

# c - C中的数组声明和指针赋值

> ID：13383551
> 
> 赞同：2
> 
> 时间：2012-11-14T17:01:15.243
> 
> 标签：c, arrays, pointers, syntax

我对 C 中指针和数组声明的基础知识感到困惑。我想知道以下两个语句之间的区别，除了数组的基地址在第二个语句中分配给 ptr 。

```
int a[2][3]= { (1,2,3),(4,5,6)};
int (*ptr)[3] = &a[0]; 
```

请举出例子来澄清。第 2 行 R 侧的 [3] 有什么影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:14:25.067

**1、二维数组：**

```
int a[2][3]= { {1,2,3},{4,5,6}}; 
```

使用内存中的此语句，您有 2x3 整数，所有在内存中相邻。我想您知道如何访问它们，但如果您不知道，我会澄清一下：

```
a[0][0] : 1
a[0][1] : 2
a[0][2] : 3
a[1][0] : 4
a[1][1] : 5
a[1][2] : 6 
```

**2\. 指向数组的指针：**

```
int (*ptr)[3] = &a[0]; 
```

ptr 指向一个 int[3] 内存块。所以你只能将它分配给一个 int[3] 类型：

```
ptr= &a[0];
ptr= &a[1]; 
```

不同之处在于该指针没有自己的内存，您必须将其分配给 int[3] 变量或分配它：

```
ptr= malloc (2*sizeof(int[3]); 
```

这样你就可以使用ptr指向的内存，如果你用这种方式初始化ptr：

```
for(int j=0; j<2; j++)
    for(int i=0; i<3;i++)
        ptr[j][i]=i+j*3+1; 
```

在这种情况下，您将拥有与 int a[2][3] 相同的内存表示，除了此内存位于堆中而不是堆栈中。您始终可以选择重新分配/释放内存并且此内存不会被删除一旦你的函数终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:21:15.257

您应该知道 C 中的运算符优先规则：[http ://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedencehttp://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedencehttp://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)

`int (*ptr)[3]`与`int * ptr [3]`

第一个是指向大小为 3 的 int 数组的指针（注意 * 更接近 var 名称）。第二个等于`int (*(ptr [3]))`int 指针上的大小为 3 的数组。

如果您对如何解释表达式有疑问，也可以使用此站点：[http ://cdecl.org/。](http://cdecl.org/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T17:02:27.467

a 是行大小为 2 列大小为 3 的二维数组。

而是指向大小为 3`ptr`的数组的指针`int`

但是您的数组`a`初始化方式不正确

由于您使用`()`了所以逗号运算符将生效并将使用 and 进行初始化，`3`并且`6`数组的其他元素`a`将进行`0`实际初始化使用`{}`

&a[0] 是数组第一个元素的地址（意味着它也会为 a 打印相同的值）。

但这`&a[0]`在您执行指针算术运算时生效`ptr`

如果是数组，请记住 3 件事：

--->`int *ptr=&a[0][0];`第一个元素的地址`ptr++`将为您提供下一个元素`a[0][1]`

---> &a[0] = 第一个元素的地址，但如果你这样做，`int (*ptr)[3]=&a[0]` 那么`ptr++`指针将增加整行的大小，并且 ptr 将直接指向下一行意味着现在 ptr 将指向`&a[1]`

---> &a = 整个数组的地址，如果你保留它`int (*ptr)[2][3] =&a`并且 do`ptr++`指针将增加整个数组的大小。

# javascript - AngularJS 过滤器导致 IE8 不呈现双向绑定

> ID：13383552
> 
> 赞同：1
> 
> 时间：2012-11-14T17:01:25.537
> 
> 标签：javascript, jquery, angularjs

我对 IE8 有一个奇怪的问题，如果我尝试`$scope`通过 AngularJS 的双向数据绑定在模板中呈现变量，它不会替换`{{child.name}}`为正确的值。这肯定与以下过滤器的低效率有关：

```
 filter('truncate', function() {
    return function(name) {
      // It's just easier to use jQuery here
      var windowWidth = $(window).width(),
          nameElement = $('a:contains("' + name + '")'),
          truncPnt = Math.floor(name.length * 0.9);

      while (nameElement.width() > windowWidth * 0.75 && truncPnt > 6) {

        truncPnt = Math.floor(truncPnt * 0.9);
        name = name.substring(0, truncPnt);
        nameElement.text(name + ' ...');
      }
      return name;
    }
  }); 
```

然后，我将此过滤器与 with`ng-repeat`一起使用：

```
<a class="entity-name" href="{{child.url}}" title="{{child.name}}" ng-cloak>{{child.name|truncate}}</a> 
```

总体目标是根据屏幕宽度将传递到过滤器的变量截断，用“...”替换任何截断的字符。我相当有信心这个过滤器是原因，因为我有一个类似的函数在处理程序的 a 上被调用`.resize()`，`$(window)`如果我使用 IE8 并调整浏览器窗口的大小，它会导致`{{child.name}}`渲染为正确的值，但是仅当我调整浏览器大小时。

**更新：**

* * *

所以我已经摆脱了上面的过滤器，并用一个非常相似的指令代替了它。这是我第一次尝试创建自定义指令，所以我相当肯定它可以做得更好，减去我目前似乎无法解决的明显缺陷。该指令如下：

```
.directive('truncate', function() {

  return {
    restrict: 'A',
    replace: true,
    template: '<a class="entity-name" href="{{child.url}}" title="{{child.name}}">{{child.display}}</a>',
    link: function(scope, element, attr) {
      var widthThreshold = $(element[0]).parent().parent().width() * 0.85;

      scope.$watch('child', function(val) {
        var elementWidth = $(element[0]).width(),
            characterCount = scope.child.name.length;

        while ($(element[0]).width() > widthThreshold || characterCount > 5) {
          characterCount--;
          scope.child.display = scope.child.name.substring(0, characterCount) + ' ...';
        }
      });
    }
  }
}); 
```

我将部分替换为简单的：

```
<a truncate="child"></a> 
```

这与过滤器的区别如下（减去明显的过滤器与指令）：

1.  替换`windowWidth`为`widthThreshold`, 通过链接 jQuery`.parent()`两次来识别值（本质上，当获取父 (x2) 元素而不是窗口的宽度时，它是一个更准确的值）。
2.  `child`为被调用添加了一个附加键`display`。这将`child.name`是用于显示的截断版本，而不是使用 jQuery`.text()`并仅使用截断的`child.name`.
3.  `truncPnt`变成`characterCount`（尽量记住不要缩写变量）

现在的问题是 jQuery 冻结了浏览器，直到我终止了 javascript（如果出现提示）。Firefox 可能会显示它，Chrome 还没有挂起，虽然我还没有在 IE 中进行测试，但我想比前者更糟。

可以做些什么来正确获取相关主元素上方的两个父元素的值，并截断`child.display`以使其不会包裹/延伸到父 div 之外？

**更新 2：**

* * *

我决定放弃主要基于 DOM 的计算的想法，转而使用数学，考虑父 div 的宽度、字体大小和天知道的比例。我认真地插入了一个公式，直到我得到了无论字体大小都始终给出相似结果的东西。媒体查询确实会影响相关字符串的字体大小 CSS，因此我需要考虑这一点，否则不同字体大小的截断字符串的长度会有一些巨大差异：

```
.directive('truncate', function() {
  return {
    restrict: 'A',
    replace: true,
    // {{child.display}} will be a truncated copy of child.name
    template: '<a class="entity-name" href="{{child.url}}" title="{{child.name}}">{{child.display}}</a>',
    link: function(scope, element, attr) {
      var widthThreshold = $(element).parent().parent().width() * 0.85,
          // get the font-size without the 'px' at the end, what with media queries effecting font
          fontSize = $(element).css('font-size').substring(0, $(element).css('font-size').lastIndexOf('px')),
          // ... Don't ask...
          sizeRatio = 29760/20621,
          characterCount = Math.floor((widthThreshold / fontSize) * sizeRatio);

      scope.$watch('child', function(val) {
        // Truncate it and trim any possible trailing white-space
        var truncatedName = scope.child.name.substring(0, characterCount).replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        // Make sure characterCount isn't > the current length when accounting for the '...'
        if (characterCount < scope.child.name.length + 3) {
          scope.child.display = truncatedName + '...';
        }
      });
    }
  }
}); 
```

有趣的是，我相信我又回到了 Brandon Tilley 关于修改 DOM 与修改范围内的属性的评论。现在我已将其更改为修改属性，它可能会更好地用于过滤器？对于这种操作是否应该在过滤器和指令中处理，通常决定因素是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:32:36.743

我参考文档：

**指令**

> 指令是一种教授 HTML 新技巧的方法。在 DOM 编译期间，指令与 HTML 匹配并执行。这允许指令注册行为，或转换 DOM。

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

**过滤器**

> Angular 过滤器格式化数据以显示给用户。除了格式化数据，过滤器还可以修改 DOM。这允许过滤器处理诸如有条件地将 CSS 样式应用于过滤后的输出等任务。

[http://docs.angularjs.org/guide/dev_guide.templates.filters](http://docs.angularjs.org/guide/dev_guide.templates.filters)

我只会将过滤器用于更改数据格式的目的，仅此而已。老实说，我相信为您的目的使用过滤器是合适的。正如文档所说，过滤器可以修改 DOM 我看不出你应该使用指令的原因，过滤器似乎就是你要找的东西。（除了一个错误可能会迫使你使用指令）

# asp.net - 如何通过内联代码获取当前页面的 Title 属性？

> ID：13383553
> 
> 赞同：0
> 
> 时间：2012-11-14T17:01:27.130
> 
> 标签：asp.net, vb.net

我这样设置我的页面标题：

```
<%@ Page Title="Sub Page Title" %> 
```

在我的 Master Page 的 Page_Load 事件中，我修改了标题以在它们前面加上站点名称，如下所示：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Page.Title = "My Website Name - " + MyMainContentPlaceholder.Page.Title
End Sub 
```

现在..在我的每个内容页面中，我都有一个标题，我想匹配页面标题。但是当我尝试使用内联代码设置文本时，它会抓取最终连接的母版页标题。

```
<%@ Page Title="Sub Page Title" ...blah blah... %>

<asp:Content ID="Content1" ContentPlaceHolderID="MyMainContentPlaceholder" runat="server">
    <div class="pageHeader"><%=Me.Page.Title%></div>
</asp:Content> 
```

`<%=Me.Page.Title%>`返回“我的网站名称 - 子页面标题”，而不仅仅是“子页面标题”。

我怎样才能让它只拉当前子页面的标题属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:07:16.893

我的建议是在您的代码中创建一个类常量

```
Private Const PAGE_SUB_TITLE As String = "Sub Page Title"

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Page.Title = "My Website Name - " & PAGE_SUB_TITLE;
End Sub 
```

然后，当您设置`Page.Title`在标题中包含您的应用程序名称时，您仍然可以访问常量。这将避免需要额外的方法或字符串解析。如果您不想使用常量，因为您喜欢使用 Html 端的 Title 属性，您总是可以将其设为变量并稍微不同地使用它：

```
Private _pageSubTitle As String

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    _pageSubTitle = Page.Title
    Page.Title = "My Website Name - " & PAGE_SUB_TITLE;
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:05:23.673

如果

> “我的网站名称——”

是一个固定的字符串，那么你可以这样做：

```
Me.Page.Title.Substring("My Website Name -") 
```

或者您可以创建一个静态格式化程序方法并这样做：

```
<% Namespace.Classname.FormatMyPageName(Me.Page.Title) %> 
```

# python - Python 命名空间和全局变量

> ID：13383565
> 
> 赞同：1
> 
> 时间：2012-11-14T17:02:27.323
> 
> 标签：python, namespaces, global

我已经阅读了几个关于使变量成为全局变量并使用 class.var 功能在类之间共享它们的答案，但这些似乎都不适用于我的示例。

我只有一个文件：`app.py`它实例化了多个类。但是，我想要全局化的变量不在一个类中，它只是在主脚本中。然后，当我在其中一个类中的函数中键入 global globvar 时，我收到错误：`

```
NameError: global name 'globvar' is not defined. 
```

我怎样才能通过引用将此变量传递给类（我知道，不是pythonic语言），以便类可以修改它但其他类可以访问它，或者使它成为全局以便所有类都可以访问它？

**编辑**没有缩进的文件底部：

```
app = MyApp(False)
logFile = open('C:/Python26/temp/test.txt', 'w')
globvar = 7
ser = serial.Serial('com5',115200,timeout=0.01)
app.MainLoop() 
```

然后在我的第一堂课中，我有：

```
class MyApp(wx.App):
    def MainLoop(self):
        line = ser.readline()
        if len(line) > 2:
            global globvar
            globvar = line 
```

在我的第二堂课中，我有：

```
class MyFrame(wx.Frame):
    def OnMove(self, event):
        pos = event.GetPosition()
        global globvar
        self.posCtrl.SetValue("%s, %s" % (globvar, pos.y)) 
```

这些都在同一个文件中。错误文本是：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\wxPython2.8 Docs and Demos\samples\mainloop\mainloop.py", line 66, in OnMove
    self.posCtrl.SetValue("%s, %s" % (globvar, pos.y))
NameError: global name 'globvar' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:12:06.413

所有参数都通过引用传递（在 C++ 意义上）。Python 语言没有按值传递（在 C++ 意义上），尽管它可以通过复制来模拟，并且某些东西会自动复制到 mutate 上，比如数字、字符串和元组，这样它们可能会看起来像是被传递了按价值。具体来说，python 是[按对象](http://effbot.org/zone/call-by-object.htm)调用（也称为按共享调用，按对象引用调用），如前面在 stackoverflow 上指出的[那样。](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference/986495#986495)

要使变量成为全局变量，您需要在任何函数之外对其进行第一次赋值，或者使用 global 关键字在函数中创建。要在函数中修改它，您还需要使用 global 关键字。有关 global[关键字](https://stackoverflow.com/questions/4693120/use-of-global-keyword-in-python)的更多详细信息，请参见此处。

例如：

```
i = 0
print i
class A(object):
    global i
    i = 1
print i
class B(object):
    def Foo(self):
        global i
        i = 2
b = B()
b.Foo()
print i 
```

产生以下输出：

```
0
1
2 
```

# macos - Sublime Text 2 - 调整缩进模板

> ID：13383566
> 
> 赞同：0
> 
> 时间：2012-11-14T17:02:27.613
> 
> 标签：macos, sublimetext2, sublimetext

有没有办法更改 Sublime Text 2 中自动完成的默认缩进模板？例如，如果我有：

```
div {} 
```

并在括号之间按回车键，我得到：

```
div {

} 
```

但我想得到的是：

```
div {

    } 
```

这只是个人品味，但我想知道是否可以通过其中一个配置文件来实现。任何帮助将非常感激！谢谢！

达伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:15:50.910

不幸的是，它是某种错误。

在javascript文件中（至少在我编写nodeJs的东西时）它会弄乱缩进。

尝试选择所有内容并选择“reindent”。

期待崇高3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:25:49.053

看看这里：

```
~/Library/Application Support/Sublime Text 2/Packages/Default/Add Line in Braces.sublime-macro 
```

# python - Cython AttributeError：“模块”对象没有属性“声明”

> ID：13383567
> 
> 赞同：2
> 
> 时间：2012-11-14T17:02:32.427
> 
> 标签：python, cython, attributeerror

编译 .pyx 文件工作正常，但是当我输入时它突然开始引发错误：

```
python setup.py build_ext --inplace 
```

我得到错误：

```
c:\Python27\cython\helloworld>python setup.py build_ext --inplace
running build_ext
cythoning hello.pyx to hello.c
Traceback (most recent call last):
  File "setup.py", line 8, in <module>
    ext_modules = [Extension("hello", ["hello.pyx"])]
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\site-packages\Cython\Distutils\build_ext.py", line 163,
in run
    _build_ext.build_ext.run(self)
  File "C:\Python27\lib\distutils\command\build_ext.py", line 340, in run
    self.build_extensions()
  File "C:\Python27\lib\site-packages\Cython\Distutils\build_ext.py", line 170,
in build_extensions
    ext.sources = self.cython_sources(ext.sources, ext)
  File "C:\Python27\lib\site-packages\Cython\Distutils\build_ext.py", line 317,
in cython_sources
    full_module_name=module_name)
  File "C:\Python27\lib\site-packages\Cython\Compiler\Main.py", line 605, in com
pile
    return compile_single(source, options, full_module_name)
  File "C:\Python27\lib\site-packages\Cython\Compiler\Main.py", line 546, in com
pile_single
    return run_pipeline(source, options, full_module_name)
  File "C:\Python27\lib\site-packages\Cython\Compiler\Main.py", line 386, in run
_pipeline
    import Pipeline
  File "C:\Python27\lib\site-packages\Cython\Compiler\Pipeline.py", line 7, in <
module>
    from Visitor import CythonTransform
  File "Visitor.py", line 9, in init Cython.Compiler.Visitor (Cython\Compiler\Vi
sitor.c:12838)
  File "C:\Python27\lib\site-packages\Cython\Compiler\Nodes.py", line 6, in <mod
ule>
    cython.declare(sys=object, os=object, copy=object,
AttributeError: 'module' object has no attribute 'declare' 
```

我尝试在一个简单的 .pyx 文件 helloworld 上运行它：

```
def say_hello_to(name):
    print "Hello %s!" %name 
```

使用 setup.py：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

setup(
  name = 'Hello world app',
  cmdclass = {'build_ext': build_ext},
  ext_modules = [Extension("hello", ["hello.pyx"])]
) 
```

它已经工作了好几次，有些东西已经改变了，但是当我用谷歌搜索这个问题时，我找不到任何信息。我正在使用 Python 2.7 64 位，最新版本的 Cython 并编译文件我使用 Windows SDK C/C++ 编译器并通过运行准备环境：

```
C:\Program Files\Microsoft SDKs\Windows\v7.0>set DISTUTILS_USE_SDK=1
C:\Program Files\Microsoft SDKs\Windows\v7.0>setenv /x64 /release 
```

对可能发生的事情有任何想法吗？提前Tnx！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:43:25.690

从 python 脚本运行时，我遇到了同样的错误：

```
os.system("python setup.py build_ext --inplace") 
```

尽管

```
python setup.py build_ext --inplace 
```

从命令提示符工作。

原因是我的测试包的名称是“cython”......愚蠢的我

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:05:36.663

我有同样的错误。花了一整天的时间，直到我意识到我已经按照一些博客条目在我的目录中创建了一个 cython.py 文件，其中包含一些如何编译的信息。我不记得我在哪里找到的，但是通过删除这个文件一切正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:47:44.307

我不确定这是否有帮助，但是当我收到此错误时，我删除了所有`.pyc`文件并通过 IDLE 再次运行脚本（在 IDLE 中打开并单击 F5），然后它工作得很好。

# azure - 果园 Azure 网站错误

> ID：13383569
> 
> 赞同：3
> 
> 时间：2012-11-14T17:02:38.643
> 
> 标签：azure, orchardcms, azure-sql-database, azure-web-app-service

我有一个托管在 azure 上的果园网站连接到 sql azure 数据库，我不断收到 No row with the given identifier exists[Orchard.Roles.Models.PermissionRecord#33] 这是堆栈跟踪。

```
[ObjectNotFoundException: No row with the given identifier exists[Orchard.Roles.Models.PermissionRecord#33]]
NHibernate.Impl.DefaultEntityNotFoundDelegate.HandleEntityNotFound(String entityName, Object id) +56
NHibernate.Proxy.AbstractLazyInitializer.CheckTargetState() +48
NHibernate.Proxy.AbstractLazyInitializer.Initialize() +87
NHibernate.Proxy.DefaultLazyInitializer.Intercept(InvocationInfo info) +85
PermissionRecordProxy.get_Name() +192
Orchard.Roles.Services.RoleService.GetPermissionsForRole(Int32 id) +128
Orchard.Roles.Services.RoleService.GetPermissionsForRoleByNameInner(String name) +37
Orchard.Roles.Services.<>c__DisplayClasse.<GetPermissionsForRoleByName>b__d(AcquireContext`1 ctx) +26
Orchard.Caching.Cache`2.CreateEntry(TKey k, Func`2 acquire) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Caching\Cache.cs:57
Orchard.Caching.<>c__DisplayClass2.<Get>b__0(TKey k) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Caching\Cache.cs:19
System.Collections.Concurrent.ConcurrentDictionary`2.AddOrUpdate(TKey key, Func`2 addValueFactory, Func`3 updateValueFactory) +125
Orchard.Caching.Cache`2.Get(TKey key, Func`2 acquire) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Caching\Cache.cs:17
Orchard.Caching.DefaultCacheManager.Get(TKey key, Func`2 acquire) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Caching\DefaultCacheManager.cs:33
Orchard.Roles.Services.RoleService.GetPermissionsForRoleByName(String name) +100
Orchard.Roles.Services.RolesBasedAuthorizationService.TryCheckAccess(Permission permission, IUser user, IContent content) +595
Orchard.Security.Authorizer.Authorize(Permission permission, IContent content, LocalizedString message) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Security\Authorizer.cs:72
Orchard.Security.Authorizer.Authorize(Permission permission) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Security\Authorizer.cs:60
Orchard.Security.SecurityFilter.OnAuthorization(AuthorizationContext filterContext) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Security\SecurityFilter.cs:24
System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor) +97
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +311
System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__19() +23
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +19
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +39
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29
System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
Orchard.Mvc.Routes.HttpAsyncHandler.EndProcessRequest(IAsyncResult result) in c:\Users\sebros\My Projects\Orchard\src\Orchard\Mvc\Routes\ShellRoute.cs:162
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

我在 PermissionRecord 表中查看了数据库，数据库中根本没有 ID #33。当我将果园网站下载到 webmatrix 以对其进行本地开发时，该网站根本没有给我任何错误并且工作正常，它也正确连接到 sql azure 数据库。所以我有点困惑为什么这在 azure 上不起作用，因为它在本地工作，并且它应该使用与 azure 网站上相同的文件，因为我直接从 azure 网站下载了文件。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:07:18.663

这已经很晚了，但我今天早上在果园 1.6 上遇到了类似的情况。不知道它是如何发生的！我希望这对遇到同样问题的其他人有所帮助。

（我想我在很久以前启用模块权限后已经更改了模块权限，并且在将损坏的角色分配给用户之前没有注意到任何问题）

我使用这段 sql 来查找违规记录：

```
SELECT        TOP (1000) MyPrefix_Orchard_Roles_RolesPermissionsRecord.Id, MyPrefix_Orchard_Roles_RolesPermissionsRecord.Role_id, 
                     MyPrefix_Orchard_Roles_RolesPermissionsRecord.Permission_id, MyPrefix_Orchard_Roles_RolesPermissionsRecord.RoleRecord_Id, 
                     MyPrefix_Orchard_Roles_RoleRecord.Name AS RoleName, MyPrefix_Orchard_Roles_PermissionRecord.Name AS PermissionName, 
                     MyPrefix_Orchard_Roles_PermissionRecord.FeatureName AS PermissionFeatureName, 
                     MyPrefix_Orchard_Roles_PermissionRecord.Description AS PermissionDescription
FROM            MyPrefix_Orchard_Roles_RolesPermissionsRecord LEFT OUTER JOIN
                         MyPrefix_Orchard_Roles_PermissionRecord ON 
                         MyPrefix_Orchard_Roles_RolesPermissionsRecord.Permission_id = MyPrefix_Orchard_Roles_PermissionRecord.Id LEFT OUTER JOIN
                         MyPrefix_Orchard_Roles_RoleRecord ON MyPrefix_Orchard_Roles_RolesPermissionsRecord.Role_id = MyPrefix_Orchard_Roles_RoleRecord.Id
WHERE        (MyPrefix_Orchard_Roles_RolesPermissionsRecord.Role_id = 1) -- broken administrator role 
```

发现有两条记录缺少 Permission 记录。一个将 RoleRecord_Id 设置为 NULL，另一个设置为 1 - 管理员。因此，当使用管理员加载权限时，查找权限记录将失败。这在一定程度上帮助了日志记录。

admin 中的几个角色部分似乎仍然存在问题：“Admin/Roles”，所以我运行了上面的 sql 脚本来查找来自不同角色的更多违规行。

我认为随机行不会引起任何问题，其他一切似乎都可以再次按预期工作。

谢谢，马特

# android - 从 ADB 设备命令中看不到通过 USB 在 Eclipse 上的 android mini pc 连接

> ID：13383576
> 
> 赞同：1
> 
> 时间：2012-11-14T17:03:09.350
> 
> 标签：android, debugging, adb

我想在 Android 4.0 迷你电脑（中文）上安装我的应用程序。问题是当我通过 USB 将它连接到我的电脑时，笔记本电脑找不到任何新设备。太好了，我无法调试我的应用程序

我还检查了是否启用了 USB 调试以及是否有任何驱动程序，但我找不到任何有用的东西。

也许有人遇到过和我一样的问题，可以帮忙吗？

我尝试使用此电缆（usbMINI-USB）但无法正常工作

从 OTG (MINIPC) 到 USB (PC)

* * *

> **最后我得到了解决方案**
> 
> 谢谢我有解决方案，改变其他新的默认带来的电缆，并下载这个驱动程序
> 
> Allwinner A10 驱动程序 [http://colonelzap.blogspot.com.ar/2012/01/allwinner-a10-adb-drivers.html](http://colonelzap.blogspot.com.ar/2012/01/allwinner-a10-adb-drivers.html)
> 
> 使用 USB 端口上的 OTG 设备端口。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:39:56.783

如果您的问题中的 OTG 代表 OnTheGo USB 电缆 - 那么您使用了错误的电缆。OTG 电缆用于将 USB 外围设备连接到 Android 主机。使用常规 USB 电缆（不是 OTG 电缆）将您的 Android 设备连接到 PC。

[关于 USB OTG 的维基百科文章](http://en.wikipedia.org/wiki/USB_On-The-Go)

# php - Phonegap ajax 和 php

> ID：13383577
> 
> 赞同：0
> 
> 时间：2012-11-14T17:03:11.397
> 
> 标签：php, jquery, ajax, cordova

我是 jquery 和 phonegap 的新手，我无法在任何地方找到我的问题的答案。

这是我的 index.html

```
 <!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Auth Demo 2</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script src="jquery.mobile/jquery-1.7.2.min.js"></script>
    <script src="jquery.mobile/jquery.mobile-1.1.0.min.js"></script>
    <script src="main.js"></script>
</head>

<body onload="init()">

<div id="launcherPage" data-role="page">
    <!-- I'm just here waiting for deviceReady -->
</div>

<div id="loginPage" data-role="page">

    <div data-role="header">
        <h1>Auth Demo</h1>
    </div>

    <div data-role="content">    

        <form id="loginForm">
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for="username">Username:</label>
            <input type="text" name="username" id="username" value="" placeholder="Username" />
        </div>

        <div data-role="fieldcontain" class="ui-hide-label">
            <label for="password">Password:</label>
            <input type="password" name="password" id="password" value="" placeholder="Password" />
        </div>

        <input type="submit" value="Login" id="submitButton">
        </form>

    </div>

    <div data-role="footer">
        <h4>&copy; Camden Enterprises</h4>
    </div>

</div>

</body>
</html> 
```

还有我的 Js。

```
function init() {
    document.addEventListener("deviceready", deviceReady, true);
    delete init;
}

function checkPreAuth() {
    console.log("checkPreAuth");
    var form = $("#loginForm");
    if(window.localStorage["username"] != undefined && window.localStorage["password"] != undefined) {
        $("#username", form).val(window.localStorage["username"]);
        $("#password", form).val(window.localStorage["password"]);
        handleLogin();
    }
}

function handleLogin(){

    var form = $("#loginForm");
    var u = $("#username", form).val();
    var p = $("#password", form).val();

                                              //remove all the class add the messagebox classes and start fading

    if(u != '' && p!= '') {
        $.post("http://www.myaddress.com/loginlogin.php",{ user_name:$('#username', form).val(),password:$('#password', form).val(),rand:Math.random() } ,function(data)

                                                     {
                                                     if(data=='yes') //if correct login detail
                                                     {
                                                     //store
                                                     window.localStorage["username"] = u;
                                                     window.localStorage["password"] = p;
                                                    // $.mobile.changePage("some.html");
                                                    $.mobile.changePage( "some.html", { transition: "slideup"} );

                                                     }
                                                     else
                                                     {
                                                     navigator.notification.alert("Your login failed", function() {});
                                                     }
                                                     });

    } else {
                //Thanks Igor!
                navigator.notification.alert("You must enter a username and password", function() {});
                $("#submitButton").removeAttr("disabled");
           }
                                              return false;//not to post the  form physically

}

function deviceReady() {
    console.log("deviceReady");
    $("#loginPage").on("pageinit",function() {
        console.log("pageinit run");
        $("#loginForm").on("submit",handleLogin);
        checkPreAuth();
    });
    $.mobile.changePage("#loginPage");
} 
```

这不是我自己的工作，但从这里 [http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap](http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap)

我将示例更改为使用 php。这非常简单，仅用于测试目的

php在这里

```
<?//get the posted values

    require_once("backend/functions.php");
    dbconn(true);

    $username = $_POST['user_name'];

    if ($username=='Steven'){
                    echo "yes";
    }else{

        echo "no";
    }

    ?> 
```

现在这一切正常，当满足条件时，页面 some.html 将打开。

现在我的问题是。我如何将登录人的用户名发送到 some.html 页面？一旦从 php 文件中确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:07:33.427

您应该可以访问

```
window.localStorage["username"] 
```

在您的 some.html 页面上

# iphone - NSCoder 的 encodeObject: 和 encodeObject:forkey: 有什么区别？

> ID：13383579
> 
> 赞同：3
> 
> 时间：2012-11-14T17:03:32.353
> 
> 标签：iphone, objective-c, ios, nskeyedarchiver, nscoder

在 NSCoder 中，你可以调用`encodeObject:`和`encodeObject:forkey:`。这适用于许多数据类型。这些电话之间有什么区别？如何使用它们？为什么没有 `encodeDataObject:forkey:`or `encodePropertyList:forKey:`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:14:04.367

## 键控与非键控访问器

大多数情况下，您只需调用该`encodeSomething:forKey:`方法并提供一个密钥，稍后您可以使用该密钥从解码器中获取值：

```
- (void) encodeWithCoder: (NSCoder*) coder
{
    [coder encodeObject:someProperty forKey:@"someProperty"];
}

- (id) initWithCoder: (NSCoder*) decoder
{
    self = [super init];
    if (self) {
        [self setSomeProperty:[decoder decodeObjectForKey:@"someProperty"]];
    }
    return self;
} 
```

调用的无键版本较旧，我猜在 10.2 之前序列化的工作方式有所不同。

## 专用对象访问器

由于符合，因此没有单独的`encodeDataObject:`调用，因此您可以使用常规对其进行编码。这同样适用于属性列表——属性列表只是一个字典，而字典是一个可以使用.`NSData``NSCoding``encodeObject:``encodeObject:`

`BOOL`可能让您感到困惑的是用于编码原始类型（如or ）的专用方法的数量`NSUInteger`。这些与类型系统有关。在对对象进行编码和解码时，接口可以使用该`id`类型，并且无论特定的对象类型如何，它都可以工作：

```
// can pass NSObject*, NSData*, any object
- (void) encodeObject: (id) anObject {…}
- (id) decodeObject {…} 
```

原始类型没有这种通用的“通配符”类型，因此专门的 getter 和 setter 的数量：

```
- (void) encodeBool: (BOOL) flag {…}
- (BOOL) decodeBool {…} 
```

从理论上讲，您可以使用`void*`和转换，但这很笨拙，并且编码接口无论如何都不知道要编码的对象的大小。

# javascript - 在循环中自动执行函数

> ID：13383583
> 
> 赞同：0
> 
> 时间：2012-11-14T17:03:49.337
> 
> 标签：javascript, jquery

我有这个滑块，当按下导航链接时，gotoslide 函数会更改幻灯片。 [http://jsfiddle.net/AHYVr/](http://jsfiddle.net/AHYVr/)

gotoslide函数从0自动运行到lastone然后返回开始的循环的方法是什么？

```
var num_slides;
var slides;
var current;
var sa_auto = true;

jQuery(document).ready(function() {
  init_slide()
});

function init_slide(){
  slides = jQuery('.slides_container div');
        num_slides = (slides).length;
        pagination = '<ul class="pagination">';
        var i=1;
        jQuery.each(slides, function() {
    pagination += '<li><a href="javascript:gotoslide('+i+')">'+i+'</a></li>';
                i++;
  });
  pagination += '</ul>';
  jQuery(pagination).insertBefore('#slides');

}

function gotoslide(n){
  sa_auto = false;
        showslide(n);
}

function showslide(n){
     current = n;
        var leftpos = (1-n)*700;
        pagination = jQuery('.pagination li')
     pagination.removeClass('current');
        jQuery(pagination[n-1]).addClass("current");
     slides.removeClass('current');
        jQuery(slides[n-1]).addClass("current");
  jQuery('.slides_container').animate({
    left: leftpos
  }, 2000);
} 
```

我试图制作一个将 gotoslide 参数增加 1 的函数，然后将其与 setInterval 一起使用，但它失败了。这是代码：

```
 var t;
        function time (){
         if ( j < num_slides ) {
               show_slide(j++);
         }
        };

        t= setInterval(time, 2000);
        clearInterval(t); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:09:23.197

你有没有尝试过：

```
function init_slide(){
    slides = jQuery('.slides_container div');
    num_slides = (slides).length;
    pagination = '<ul class="pagination">';
    var i=1;
    jQuery.each(slides, function() {
    pagination += '<li><a href="javascript:gotoslide('+i+')">'+i+'</a></li>'; 
            i++;
});
pagination += '</ul>';
jQuery(pagination).insertBefore('#slides');
for ( var n=0;n <num_slides; n++ ){
    gotoslide(n)
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:31:48.077

我仍然不确定我 100% 理解你的问题，但我会说你的 setInterval 什么都不做，因为你创建它的那一刻，你取消了它。`clearInterval(t)`当您希望间隔停止而不是再次触发时，使用调用。因此，通过在创建后调用`clearInterval`下一行，它永远不会触发。

如果您想每 2 秒切换一次幻灯片，并在到达终点后重新开始，请尝试以下操作：

```
var currentSlide = 0;
var nextSlide = function(){
    currentSlide++
    if(currentSlide >= num_slides){
        currentSlide = 0;
    }

    show_slide(currentSlide);
}

var interval = setInterval(nextSlide, 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:27:13.323

我添加了在您想要的任何幻灯片上开始和停止幻灯片放映的功能。

```
function initSlideshow( slides, duration, fadeDuration ) {

    var slide = 0;

    function nextSlide( ) {

        if( slide >= slides.length ) slide = 0;

        slides.hide();
        $(slides[slide]).fadeIn( fadeDuration );

        slide++;
        setTimeout( nextSlide, duration );
    }

    function stopSlideshow( num ) {

        slide = ( num >= 0 && num < slides.length ) ? num : 0;
        window.clearTimeout( timer );
        slides.hide();
        $(slides[slide]).fadeIn( fadeDuration );
    }

    function startSlideshow( num ) {

        if( timer ) window.clearTimeout( timer );

        slide = ( num >= 0 && num < slides.length ) ? num : 0;
        timer = setTimeout( nextSlide, 1 );

    }

    var timer = setTimeout( nextSlide, 1 );

    return {
            stop: stopSlideshow,
            start: startSlideshow
    };
}

// example usage
var controller = initSlideshow( $(".slides"), 3000 );
controller.stop( 3 );
controller.start( 1 ); 
```

[在这里](http://jsfiddle.net/GApsF/2/)提琴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:52:23.983

我们去：

```
for ( var n=1;n <= i; ++n ){
    if(n == i) { gotoslide(1);}
    else {
     gotoslide(n);
    }
} 
```

我不知道你为什么使用 var i = 1; 恕我直言，这有点令人困惑。

# sql - SQL Server：CTE 在 where 子句中回到一个级别

> ID：13383585
> 
> 赞同：3
> 
> 时间：2012-11-14T17:03:54.093
> 
> 标签：sql, sql-server, common-table-expression, recursive-query

我想为递归查询设置一个限制。但我不想丢失我限制递归的最后一个条目。

现在查询看起来像这样：

```
WITH MyCTE (EmployeeID, FirstName, LastName, ManagerID, level, SPECIAL)
AS ( 
    SELECT a.EmployeeID, a.FirstName, a.LastName, a.ManagerID, 0 as Level
    FROM MyEmployees as a
    WHERE ManagerID IS NULL

    UNION ALL
    SELECT b.EmployeeID, b.FirstName, b.LastName, b.ManagerID, level + 1
    FROM MyEmployees as b
    INNER JOIN MyCTE ON b.ManagerID = MyCTE.EmployeeID
    WHERE b.ManagerID IS NOT NULL and b.LastName != 'Welcker' 
)
SELECT *
FROM MyCTE
OPTION (MAXRECURSION 25) 
```

它受到 Manager Welcker 的限制，结果如下所示：

```
EmployeeID; FirstName; LastName; ManagerID; level
1           Ken        Sánchez   NULL       0 
```

我想要的是让员工“Welcker”包括在内。问题是我的名单上只有我需要的最后一个人的名字。命令结构下面有一些条目，但我不知道它们，我不想看到它们。

这是我想象查询结果的示例。

```
EmployeeID FirstName LastName ManagerID level
1          Ken       Sánchez  NULL        0
273        Brian     Welcker  1           1 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:35:12.587

```
WITH MyCTE (EmployeeID, FirstName, LastName, ManagerID, level, NotMatched)
AS ( 
    SELECT a.EmployeeID, a.FirstName, a.LastName, a.ManagerID, 0 as Level, 0 AS NotMatched
    FROM MyEmployees as a
    WHERE ManagerID IS NULL
    UNION ALL
    SELECT b.EmployeeID, b.FirstName, b.LastName, b.ManagerID, level + 1,
           CASE WHEN (MyCTE.LastName = 'Welcker' AND MyCTE.level = 1) THEN 1 ELSE MyCTE.NotMatched END
    FROM MyEmployees as b
    INNER JOIN MyCTE ON b.ManagerID = MyCTE.EmployeeID
)
SELECT *
FROM MyCTE
WHERE NotMatched != 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:34:18.553

你能把那一行改成`b.LastName = 'Welcker'`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:20:20.417

```
select distinct
   t.b_eid as empId,
   t.b_name as name, 
   case t.b_mid when 0 then null else t.b_mid end as managerId

   --convert(varchar,t.b_eid) + ', ' + 
   --t.b_name + ', ' + 
   --case t.b_mid when '0' then 'null' else convert(varchar,t.b_mid) end
      --as bvals

from(
   select
      coalesce(a.mid, 0) as a_mid,
      a.eid as a_eid,
      a.name as a_name,
      coalesce(b.mid, 0) as b_mid,
      b.eid as b_eid,
      b.name as b_name
   from 
      (values(null,1,'adam'),(null,2,'barb'),(201,3,'chris')) as a(mid,eid,name) cross join 
      (values(null,1,'adam'),(null,2,'barb'),(201,3,'chris')) as b(mid,eid,name)
) as t
where (t.a_mid = t.b_eid or t.a_mid = 0 or t.b_mid = 0) and t.a_name != 'chris' 
```

# cloud-foundry - eclipse 中的 Cloud Foundry 插件：尝试启动应用程序时抛出异常

> ID：13383586
> 
> 赞同：2
> 
> 时间：2012-11-14T17:03:59.990
> 
> 标签：cloud-foundry

我可以通过通过 Eclipse 启动的云铸造服务器连接到本地云铸造 vm。但是，当我尝试启动应用程序时，会引发以下异常。有没有人对此异常有任何见解。我目前正在使用

> Spring Tools Suite 版本：3.1.0.RELEASE 和 Build ID：201210061306

异常堆栈跟踪

> 无法写入 JSON：java.lang.Boolean 无法转换为 java.lang.Integer（通过引用链：org.cloudfoundry.client.lib.domain.CloudApplication["resources"]->java.util.LinkedHashMap["sudo "]); 嵌套异常是 org.codehaus.jackson.map.JsonMappingException: java.lang.Boolean cannot be cast to java.lang.Integer (通过引用链：org.cloudfoundry.client.lib.domain.CloudApplication["resources"]-> java.util.LinkedHashMap["sudo"])

问候， Preetham

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:15:56.403

这是 Stackato 2.2 的一个已知问题，已[在 Stackato 2.4 中修复](http://docs.stackato.com/reference/release-notes.html#release-v2-4-october-29-2012)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:17:48.187

您能否尝试定位到[http://api.cloudfoundry.com](http://api.cloudfoundry.com)并查看 Eclipse 的 CF 插件是否有效。可能是代码更新导致 cf 插件与 stackato 不兼容。

此外，如果您可以检查 .metadata/.log 上的日志，则可能会有有用的信息来说明潜在问题。

# c# - C# 套接字 - 禁止 IP 地址

> ID：13383588
> 
> 赞同：1
> 
> 时间：2012-11-14T17:04:04.667
> 
> 标签：c#, sockets, ip

我有一个关于 C# 中的套接字的问题。我有一个服务器，我想阻止它连接到 IP 被禁止的客户端。两者都是用 .NET 4.0 制作的。

服务器通过 Internet 运行（无 IP 主机名），而不仅仅是在本地网络中。问题是客户端的IP每天都在变化，所以我不知道如何永久禁止这些客户端。我知道我可以通过简单地将客户端的 IP 与任何被禁止的地址进行比较来禁止它们。

```
if ( banned_ip == clients_ip )
{
     client.Disconnect();
} 
```

但是如何获取我可以永久禁止的客户 IP 呢？

如果您需要更多信息，我会发布它们。

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:11:23.123

永久禁止 IP 地址是一个坏主意，因为许多 ISP:s 使用**[动态寻址](http://en.wikipedia.org/wiki/IP_address#Uses_of_dynamic_addressing)**。在没有大量附带损害的情况下，没有简单的方法可以实现您的要求。

我认为可行的唯一方法是实现一个简单的身份验证机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:09:45.363

显然，在您获得客户的 MAC 地址之前是没有办法的（但是最好的方法是通过硬件防火墙来处理它）。

如果您需要查找 MAC 地址，请参阅此： [Reliable method to get machine's MAC address in C#](https://stackoverflow.com/questions/850650/reliable-method-to-get-machines-mac-address-in-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:09:12.613

我同意 Marc 的观点，即您应该在防火墙级别禁止。

如果您想获取客户端的 IP，请使用套接字的[RemoteEndPoint 属性](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.remoteendpoint.aspx)，然后您可以将该[端点（父类）](http://msdn.microsoft.com/en-us/library/system.net.endpoint.aspx) 转换为[IPEndPoint](http://msdn.microsoft.com/en-us/library/system.net.ipendpoint.aspx)并使用[Address 属性](http://msdn.microsoft.com/en-us/library/system.net.ipendpoint.address.aspx)和[ToString](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tostring.aspx)来获取 IPv4 或 IPv6 的好格式。

# javascript - 将 XML 数据存储到 HTML5 indexedDB 中

> ID：13383590
> 
> 赞同：0
> 
> 时间：2012-11-14T17:04:22.737
> 
> 标签：javascript, jquery, html, indexeddb

我必须显示来自 xml 的数据，其中 66730 行存储在 14 MB xml 文件中。

我想将数据存储在 HTML5 indexedDB 中。我阅读了[Mozilla 的“使用 IndexedDB”](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB)、[HTML5ROCKS“使用 indexeddb 的数据绑定 UI 元素”](http://www.html5rocks.com/en/tutorials/indexeddb/uidatabinding/)和[HTML5ROCKS“使用 HTML5 IndexedDB 的简单 TODO 列表](http://www.html5rocks.com/en/tutorials/indexeddb/todo/)。

由于使用异步调用进行管理，我无法执行我想要的操作，而且我不知道在哪里实例化 objectStore。你能帮忙吗？

```
window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB;
var IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
var IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;

var request = indexedDB.deleteDatabase("opinions");
console.log("opinions DB is deleted");

var db;

function handleSeed() {
  db.transaction(["opinion"], "readonly").objectStore("opinion").count().onsuccess = function(e) {
    var count = e.target.result;
    if(count == 0) {

      $.ajax({
        type: 'GET', url: 'data/mergedXML_PangLee.xml.tag.sample.xml', dataType: 'xml',
        success: function(xml) {
          console.log("Need to generate fake data - stand by please...");
          $("#status").text("Please stand by, loading in our initial data.");
          var done = 0;
          var trans = db.transaction(["opinion"], "readwrite");
          var opinionsObjectStore = trans.objectStore("opinion");
          var comments = $(xml).find('Comment');

          // CODE1
          for(var c = 0 ; c < comments.length ; c++) {
            var opinions = $(comments[c]).find('Opinion');
            for(var o = 0 ; o < opinions.length ; o++) {
              var opinion = {};
              opinion.type = "jugement";
              var resp = opinionsObjectStore.add(opinion);
              resp.onsuccess = function(e) {
                done++;
                if(done == 33) {
                  $("#status").text("");
                  renderOpinion();
                } else if (done % 100 == 0) {
                  $("#status").text("Approximately " + Math.floor(done / 10) + "% done.");
                }
              }
            }
          }
        }
      });
    } else {
      console.log("count is not null: " + count);
      $("#status").text("ObjectStore already exists");
      renderOpinion();
    }
  };
}

function renderOpinion() {

  var transaction = db.transaction(["opinion"], "readonly");
  var objectStore = transaction.objectStore("opinion");
  objectStore.openCursor().onsuccess = function(e) {
    var cursor = e.target.result;
    if(cursor) {
      $("#opinions").append("<li>" + cursor.value.type + "</li>");
      cursor.continue();
    }
    else {
      alert("No more entriese");
    }
  };
}

$(document).ready(function(){
  console.log("Startup...");

  var openRequest = indexedDB.open("opinions", 1);

  openRequest.onupgradeneeded = function(e) {
    console.log("running onupgradeneeded");
    var thisDb = e.target.result;

    if(!thisDb.objectStoreNames.contains("opinion")) {
      console.log("I need to make the opinion objectstore");
      var objectStore = thisDb.createObjectStore("opinion", {keyPath: "id", autoIncrement: true});
    }
    else {
      console.log("opinion objectstore already exists");
    }
  }

  openRequest.onsuccess = function(e) {
    db = e.target.result;

    db.onerror = function(e) {
      console.log("***ERROR***");
      console.dir(e.target);
    }
    handleSeed();
  }
}) 
```

[编辑]

观察到的行为：

*   当页面打开时，`alert("Sorry, an unforseen error was thrown.")`出现 30 次（因为我有 30 个项目要存储）。
*   `$("#todoItems").append("<li>" + cursor.value.type + "</li>");`永远不会被调用
*   就像我不能用 firebug 跟踪运行，我的断点不起作用，就像异步是一个问题。fi 如果我在 和 行上有两个断点`resp = objectStore.add(opinion);`，`alert("Sorry, an unforseen error was thrown.");`则永远不会调用第二个断点。

预期行为：

*   将 xml 项存储到 html5 indexeddb
*   检索存储在 html5 indexeddb 中的项目并将它们显示到`<ul>`html 列表中。

控制台日志：

*   显示文本“插入意见时出错”
*   还有一个`NotFoundError: The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened. [Break On This Error] var objectStore = db.objectStore(["opinions"], "readonly");`

[编辑2]

我更正了代码块。它现在正在工作。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-19T10:38:25.880

通过尝试和错误，我终于使代码正常工作。问题中的代码可用于其他*XML 到 indexedDB*用途。

# autolayout - 使用自动布局中的固有大小动态调整 UICollectionView 的大小

> ID：13383592
> 
> 赞同：2
> 
> 时间：2012-11-14T17:04:26.850
> 
> 标签：autolayout, uicollectionview

我正在尝试使用 UICollectionView 实现一个日历，它在更改月份时具有与内置日历应用程序类似的滚动行为。目前，随着月份之间发生调整大小，视图正在闪烁。

我正在使用 UICollectionViewScrollLayout 和 UICollectionView，在 1 部分中有 10000 个索引。通过计算索引的日期来填充单元格。我遇到的问题是，当尝试调整视图大小以适合该月的正确周数时，随着滚动和视图大小的变化，collectionview 似乎没有足够快地在单元格中绘制。放慢动画速度后，随着视图大小的变化，似乎单元格被过早地从视图中删除了。缩小和放大视图都会发生这种情况。即，当它们即将滚动出视图时，它们会在滚动出视图之前被移除。

布局全部使用自动布局完成，上面有一个固定视图，下面有一个可调整大小的视图。随着集合视图大小的变化，下面的视图会发生变化以填充空间。我似乎设法实现这种行为的唯一方法是根据下面的代码更改内在大小。我尝试更改框架/边界，但它似乎不适用于自动布局。我是否正在以正确的方式调整视图的大小？

我是否应该将行为移动到视图控制器并更改固定高度的约束。

```
// Scroll the view to the date given.
-(void) moveViewToDate:(NSDate*) date
{
    NSIndexPath *indexPath=[self indexPathForFirstDayInMonth:date];
    [self scrollToItemAtIndexPath:indexPath atScrollPosition:UICollectionViewScrollPositionTop animated:YES];

    [UIView animateWithDuration:0.25f animations:^{
        self.isize=[self weeksInViewForDate:date];
       [self invalidateIntrinsicContentSize];
       [self.superview layoutIfNeeded];
    }];
}

-(CGSize)intrinsicContentSize
{
    return CGSizeMake(322,self.isize*46);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:08:13.060

我终于弄清楚发生了什么。由于我正在提交一个改变视图大小并进行滚动的动画，因此这两个单独的动画相互冲突。

我最终使用 UIScrollView 重写了集合，但遇到了同样的问题。我通过将 UIScrollView 放在 UIView 中来解决它。UIView 使用对动画高度的约束来调整大小。

# maven - 为 servlet api 选择哪个工件？

> ID：13383597
> 
> 赞同：0
> 
> 时间：2012-11-14T17:04:41.430
> 
> 标签：maven, sonatype

下面的 servlet api 的 sonatype 端点返回 5 个不同的工件：[http ://repository.sonatype.org/service/local/lucene/search?sha1=3fc542fe8bb8164e8d3e840fe7403bc0518053c0](http://repository.sonatype.org/service/local/lucene/search?sha1=3fc542fe8bb8164e8d3e840fe7403bc0518053c0)

为什么返回 5 个不同的工件？基于给定工件的组 ID、工件 ID 和版本，我将创建一个 Maven 依赖项。例如：

```
 <groupId>javax.servlet</groupId> 
 <artifactId>servlet-api</artifactId> 
 <version>2.4.public_draft</version> 
```

变成：

```
<dependency>
<groupId>javax.servlet</groupId> 
<artifactId>servlet-api</artifactId> 
<version>2.4.public_draft</version> 
</dependency> 
```

我应该选择哪个神器还是有关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:24:18.997

当我将每个工件转换为依赖项时，每个工件都会返回相同的响应 jar 文件，因此我使用哪个工件详细信息并不重要。

# css - 这个 CSS 有效吗？

> ID：13383602
> 
> 赞同：-4
> 
> 时间：2012-11-14T17:04:58.163
> 
> 标签：css

这个 CSS 代码有效吗？如果不是，它将如何影响页面的其余部分？

```
<style type="text/css">
    .detpage .fieldarea-row { position: static;!important;}
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:06:24.593

你有1个分号太多了。但不应该影响其余的。

```
<style type="text/css">
    .detpage .fieldarea-row { position: static !important;}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:06:48.977

不，它无效。你`!important`只是在那里晃来晃去，因为你提前“关闭”了声明：

```
.detpage .fieldarea-row {
   position: static !important;
                   ^---- no ;
} 
```

至于它会做什么。没办法说。css 只是提供了一些规则来更改匹配时的布局/外观，但是您没有提供任何内容来显示此规则将适用于什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:06:52.060

我会这样

```
.detpage .fieldarea-row { position: static !important; } 
```

并将样式放在单独的 CSS 文件中，以避免将 CSS 与 HTML 代码混合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:14:54.963

[http://jigsaw.w3.org/css-validator/validator](http://jigsaw.w3.org/css-validator/validator)说它无效，因此整个声明无效/被忽略。

尽管整个语句将被忽略，但我不确定这是否正确（因为这与我对 CSS 错误恢复规范的理解相矛盾）。

# windows - 表格（frmName）不起作用

> ID：13383603
> 
> 赞同：1
> 
> 时间：2012-11-14T17:04:59.703
> 
> 标签：windows, excel, vba, ms-office

我正在尝试使用字符串变量而不是硬编码表单名称，如下所示。

```
FrmMainControl.Controls 
```

但想用这个。

```
Forms("FrmMainControl").Controls 
```

但是，我收到错误 Sub 或 Function not defined。请帮忙。这是在 VBA 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:31:33.113

假设表单是`load`ed，您可以搜索`UserForms`集合；

```
Dim form As UserForm: Set form = getInstanceOfLoadedUfrm("frmMainControl")
If Not form Is Nothing Then
    MsgBox form.Controls.Count
Else
    '//load
    Set form = UserForms.Add("frmMainControl")
    MsgBox form.Controls.Count
End If

Function getInstanceOfLoadedUfrm(name As String) As UserForm
name = UCase$(name)
For Each form In UserForms
    If (Ucase$(form.name) = name) Then
        Set getInstanceOfLoadedUfrm = form
    End If
Next
End Function 
```

# ruby-on-rails - 轨道中的会合模式

> ID：13383604
> 
> 赞同：2
> 
> 时间：2012-11-14T17:05:01.330
> 
> 标签：ruby-on-rails, events, design-patterns

我正在寻找类似 Rendezvous 的设计模式示例或 Rails 中的实现？基本上只在一组输入事件都被触发时才触发输出事件。一般来说，我希望输入事件在不同的时间触发。这是一个人为的例子

输入事件： 1\. 燃油泵故障 2\. Bank 2 中的阈值低 3\. EV 启动器无效

每个事件都会排队，当所有输入事件都已触发（满足条件）时，会触发一个输出事件。

A. 检测到燃油泄漏

基于 MVC 模式，我知道我需要在控制器中实现集合模式，但希望最有效地实现它，因为这些事件的数量、速度和可变性部分将会很高。

谢谢萨蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:11:06.447

我特别不熟悉会合模式，但我想我会在模型级别通过回调来处理这个问题。像这样的东西：

```
class Pump < ActiveRecord::Base
  before_save :check_fuel_leak

  private

  def check_fuel_leak
    Pump.fuel_leak_detected! if self.failure? && self.bank_2_threshold <= 20 && self.ev_initiator_inactive?
  end
end 
```

但是，很大程度上取决于您的用例：什么响应触发的事件？导致输出事件的实际事件是什么？不过，我认为这是一个相对不错的起点。

# wpf - 当 Row 比 Viewport 高时，如何让 DataGrid 平滑滚动？

> ID：13383613
> 
> 赞同：10
> 
> 时间：2012-11-14T17:05:33.323
> 
> 标签：wpf, datagrid

我有一个装满笔记的 DataGrid，并且一个笔记可能会比 DataGrid 的高度高。发生这种情况时，如果您尝试向下滚动以阅读注释的下半部分，DataGrid 会立即跳到下一行。

这不仅会阻止用户查看完整的笔记，而且还会导致滚动感觉不连贯，因为它看起来会跳来跳去。

有没有办法告诉 WPF 在不禁用默认 DataGrid 虚拟化的情况下平滑滚动过长音符？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-14T17:37:51.967

我相信您正在寻找`VirtualizingPanel.ScrollUnit`可以在 DataGrid 上设置的附加属性。

如果将其值设置为`Pixel`而不是 default `Item`，它应该做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:53:29.507

如果您不想升级到 .NET 4.5，您仍然可以`IsPixelBased`在底层 VirtualizingStackPanel 上设置该属性。但是，此属性在 .NET 4.0 中是内部的，因此您必须通过反射来实现。

```
public static class VirtualizingStackPanelBehaviors
{
    public static bool GetIsPixelBasedScrolling(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsPixelBasedScrollingProperty);
    }

    public static void SetIsPixelBasedScrolling(DependencyObject obj, bool value)
    {
        obj.SetValue(IsPixelBasedScrollingProperty, value);
    }

    // Using a DependencyProperty as the backing store for IsPixelBasedScrolling.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty IsPixelBasedScrollingProperty =
        DependencyProperty.RegisterAttached("IsPixelBasedScrolling", typeof(bool), typeof(VirtualizingStackPanelBehaviors), new UIPropertyMetadata(false, OnIsPixelBasedScrollingChanged));

    private static void OnIsPixelBasedScrollingChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
        var virtualizingStackPanel = o as VirtualizingStackPanel;
        if (virtualizingStackPanel == null)
            throw new InvalidOperationException();

        var isPixelBasedPropertyInfo = typeof(VirtualizingStackPanel).GetProperty("IsPixelBased", BindingFlags.Instance | BindingFlags.DeclaredOnly | BindingFlags.NonPublic);
        if (isPixelBasedPropertyInfo == null)
            throw new InvalidOperationException();

        isPixelBasedPropertyInfo.SetValue(virtualizingStackPanel, (bool)(e.NewValue), null);
    }
} 
```

在你的 xaml 中：

```
<DataGrid>
    <DataGrid.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel IsItemsHost="True" local:VirtualizingStackPanelBehaviors.IsPixelBasedScrolling="True" />
        </ItemsPanelTemplate>
    </DataGrid.ItemsPanel>
</DataGrid> 
```

# c# - 检查用户是否使用会话登录

> ID：13383616
> 
> 赞同：0
> 
> 时间：2012-11-14T17:05:38.387
> 
> 标签：c#, asp.net, session

我想检查用户是否已登录，如果已登录，则拒绝他们访问注册和登录页面。当用户登录时，我正在设置这些会话变量：

```
HttpContext.Current.Session["LoggedIn"] = true;
HttpContext.Current.Session["FullName"] = (string)Reader["FirstName"] + " " + (string)Reader["LastName"];
Response.Redirect("Default.aspx"); 
```

我正在注册和登录页面的顶部检查它们，如下所示：

```
if ((bool)HttpContext.Current.Session["LoggedIn"])
{
    Response.Redirect("Default.aspx");
} 
```

但是，当我在未登录的情况下尝试转到该页面时，会抛出此异常：

> 你调用的对象是空的。

我假设它是 ebcause`LoggedIn`密钥不存在，因为我只在成功登录后创建它。

那么，如何检查`LoggedIn`密钥是否存在，如果不存在，将用户重定向到`Default.aspx`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:08:05.993

我认为你可以对这个做一个简单的空检查......

```
if (HttpContext.Current.Session["LoggedIn"] != null)
{
   // once inside this loop
   // you can now read the value from Session["LoggedIn"]
   Response.Redirect("Default.aspx");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:08:13.273

您需要在拆箱之前确保该对象不为空

```
if(HttpContext.Current.Session["LoggedIn"]!=null)
{

  if ((bool)HttpContext.Current.Session["LoggedIn"])
   {
    Response.Redirect("Default.aspx");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:11:15.710

为什么要完全避免默认的 webforms 身份验证模型？只需使用 web.config 定义一个限制区域，正确设置所有设置，您就不必对每个页面都执行这样的检查。

但是，如果你想重新发明轮子......
你检查一些可能还不存在的东西。您必须像这样修改您的 if 语句：

```
bool isLoggedIn = (HttpContext.Current.Session["LoggedIn"] == null ? false : (bool)HttpContenxt.Current.Session["LoggedIn"];

if (isLoggedIn)
{
    Response.Redirect("Default.aspx");
} 
```

# asp.net-mvc - 用户可以在现场切换区域设置

> ID：13383618
> 
> 赞同：2
> 
> 时间：2012-11-14T17:05:56.747
> 
> 标签：asp.net-mvc, localization

我有一个 Web 应用程序，它使用本地化来为我们的法裔加拿大客户显示英语或法语。

根据用户的区域设置，它工作得很好。但是，如果用户的区域设置设置为法语，我们需要允许用户切换回英语。

如果他愿意，是否可以覆盖用户的区域设置？如果是这样...我将如何编码？（例如，在布局页面上有一个显示英语的链接，单击此链接会将其改回英文或改回法文）

此外，我正在使用资源文件来保存文本字符串并使用相同的视图集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:35:22.283

在他们单击按钮选择语言后，在您的代码中的某处：

```
Session["customLocalization"] = "de-DE"; //Or whatever language 
```

在您的 Global.asax

```
protected void Application_BeginRequest(object sender, EventArgs e)
{   
    String sessionOverrideLocale;    
    if (HttpContext.Current != null && HttpContext.Current.Session != null) 
    {
        sessionOverrideLocal = (String) HttpContext.Current.Session["customLocalization"];
    } 
    if (sessionOverrideLocale != null) 
    {
        Thread.CurrentThread.CurrentUICulture = new CultureInfo(sessionOverrideLocale);
        Thread.CurrentThread.CurrentCulture = new CultureInfo(sessionOverrideLocale);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:36:04.077

是的，这是可能的，但我目前无法访问我最近处理的代码，我们允许用户更改他们当前的渲染区域。

这是一篇博客文章，其中详细介绍了如何执行此操作。他有一篇较旧的帖子，我相信它使用 MVC3，然后这个较新的帖子是从 MVC4 的角度编写的，所以这应该让您有所了解。

我希望它有帮助：

[http://geekswithblogs.net/shaunxu/archive/2012/09/04/localization-in-asp.net-mvc-ndash-upgraded.aspx](http://geekswithblogs.net/shaunxu/archive/2012/09/04/localization-in-asp.net-mvc-ndash-upgraded.aspx)

# java - 将 SqlCipher 与 android 应用程序集成（在 Windows 上）

> ID：13383619
> 
> 赞同：2
> 
> 时间：2012-11-14T17:05:57.490
> 
> 标签：java, android, sql, eclipse, sqlcipher

我不太了解以下文档：[http ://sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

我应该怎么做，步骤是什么？似乎这些说明只属于 MAC 用户，我的操作系统是 Windows 7。

谁能告诉我我该怎么办？二进制文件包含“libs”和“assets”文件夹。如何将这些集成到我现有的应用程序中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:16:15.303

步骤#1：将文件夹的内容复制`assets/`到项目的`assets/`文件夹中。

步骤#2：将文件夹的内容复制`libs/`到项目的`libs/`文件夹中。

第 3 步：编写 SQLCipher API 的代码，用它们的 SQLCipher 等价物替换对之类`SQLiteDatabase`的`SQLiteOpenHelper`引用。

[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Database/ConstantsSecure)，展示了正在使用的 Android 的 SQLCipher。

# vaadin - Vaadin 列表框选项工具提示

> ID：13383622
> 
> 赞同：1
> 
> 时间：2012-11-14T17:06:11.690
> 
> 标签：vaadin

是否可以将标题（工具提示）属性添加到 Vaadin 中的 twincolselect 列表框？我尝试将 setItemCaptionPropertyId() 与 setItemCaptionMode() 一起使用，但徒劳无功。

最后，当 Vaadin 呈现页面时，生成的 html 仅具有 select 组件的 value 属性，并且不存在 title 属性。

*   更新 - 我的问题应该被重新表述为 - 我需要在列表框或双选中的每个单独项目（单独的行）上使用工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:00:13.117

这是 Nativeselect 组件的示例

```
// Create the selection component
final NativeSelect mynativeselect= new NativeSelect("myLabel");

// Add some items
for (int i = 0; i < 25; ++i) {
    mynativeselect.addItem(i);
}
//set tooltip
mynativeselect.setDescription("My tooltip"); 
```

# arrays - Visual Studio - 我如何将变量用于对象名称？

> ID：13383626
> 
> 赞同：0
> 
> 时间：2012-11-14T17:06:27.520
> 
> 标签：arrays, vb.net

我正在学习视觉，我正在尝试这样做：

```
 For Each folder In Dir.Subfolders
        list = list + 1
        C1CheckBox(list).Text = folder.Name
    Next 
```

我有很多名为 C1CheckBox1、C1CheckBox2、C1CheckBox3 等的复选框...然后我想通过文件夹名称更改每个复选框的文本（使用列表变量来引用对象）...

我怎么能这样做？

谢谢你阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:26:28.413

您可以在所有复选框中循环设置其文本。有关 如何枚举复选框的示例，请参[见此答案](https://stackoverflow.com/a/10559699/1428388)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:04:37.997

[您可以使用Controls.Find](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28v=vs.80%29.aspx)按名称查找控件：

```
For Each folder In Dir.Subfolders
    list = list + 1
    Dim cb As CheckBox = Me.Controls.Find("C1CheckBox" & list, True)(0)
    cb.Text = folder.Name
Next 
```

这将搜索整个表单，包括其子容器。如果您知道所有复选框都在 panel1 中，则可以更具体：

```
Dim cb As CheckBox = Me.Panel1.Controls.Find("C1CheckBox" & list, False)(0) 
```

# python - uwsgi - 不使用 virtualenv 中的 python2.7.3，而是使用 venv 中的 2.6，即使 2.6 仅全局安装

> ID：13383628
> 
> 赞同：6
> 
> 时间：2012-11-14T17:06:28.070
> 
> 标签：python, django, uwsgi

我的系统（ubuntu）有 python 2.6.5 版本（全局安装在 /usr/bin/ 中）。
我想使用 python 2.7.3 。
为此，我尝试使用这个答案创建一个 virtualenv[是否可以将另一个版本的 Python 安装到 Virtualenv？](https://stackoverflow.com/questions/5506110/python-it-is-possible-to-install-another-version-of-python-to-virtualenv)（没有从答案中进行任何模拟链接）。我成功了，当我激活 env 并使用“python manage.py shell”时效果很好。

问题是：我们使用 uwsgi 来运行服务器。到目前为止，我们直接使用系统范围的 python(2.6.5) 。因为我在 virtualenv 中新安装了所有东西，所以我添加了选项

```
'-H /path/to/virtualenv' 
```

在运行 uwsgi 服务器时。

执行“import os”行时出现错误“no module named 'os'”。（从错误日志中发现错误）

所以，我添加了 import sys; 在命令 'import os' 之前打印 sys.path 命令。然后，当它打印路径时，它具有以下内容：

```
 /home/name/venv/bin/python/lib/python2.6/  #(one of the items in the array sys.path) 
```

但是，当我查看我的 venv 文件夹时，“lib”文件夹中没有像 python2.6 这样的东西。，我的 venv 的 lib 文件夹只包含 'python2.7' 。

我的要求是，uwsgi 应该使用 python 2.7(of venv)，而不是 2.6(global)。

另外，在我的 sh 文件中，我使用了命令“which python”，这表明它使用的是全局版本。所以，我必须首先告诉 shell 文件使用 virtualenv 中的 python，而不是默认的全局文件。我尝试了“source /path/to/activate”，但说找不到命令。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T09:42:09.240

1.  **激活 virtualenv**，
2.  **安装 uwsgi**：`pip install uwsgi`
3.  **从 virtualenv**运行 uwsgi 。****

# android - Android：如何为新联系人预先填充照片？

> ID：13383630
> 
> 赞同：2
> 
> 时间：2012-11-14T17:06:39.127
> 
> 标签：android, android-contacts

我正在通过启动一个“新联系人”意图来创建一个新联系人，如下所示：

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
    intent.putExtra(..., ...);
    startActivity(intent); 
```

有谁知道在这种情况下我如何预先填充照片字段？由于 API 级别 11，我可以使用[ContactsContract.Intents.Insert.DATA](http://developer.android.com/reference/android/provider/ContactsContract.Intents.Insert.html#DATA) 将照片传递到意图的附加内容中，但我还需要支持早期版本。

如果您知道解决方法，那也会有所帮助。我知道的一种解决方法是首先手动创建联系人（使用照片集），然后启动“编辑联系人”意图，但如果有更好的选择，我不希望这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:37:24.183

ContactsContract.Intents.Insert.DATA 旨在插入多个数据项，正如您所注意到的，它在 11 之前的平台中不可用。

预填充照片的用例是什么？

# c# - ascx 用户控件，当它在 aspx 页面上注册时

> ID：13383632
> 
> 赞同：1
> 
> 时间：2012-11-14T17:06:50.973
> 
> 标签：c#, asp.net, visual-studio-2010, user-controls

嗨，我已经在 appx 控件的顶部注册了一个用户控件。

```
<%@ Register Src="../Controls/Attachments.ascx" TagName="Attachments" TagPrefix="uc7" %>
<%@ Register Src="../Controls/Help.ascx" TagName="Help" TagPrefix="uc8" %>
<%@ Register Src="~/Controls/WRControls/WRDetails.ascx" TagName="WR" TagPrefix="uc9"  %> 
```

不幸的是，当我尝试调用新的用户控件时。IE

" `<uc9:WR"`（uc9:WR 没有出现在 ittelisense 下拉菜单中）用于我添加的新用户控件。

基本用户控件与其他用户控件位于不同的文件路径下。正如你在上面看到的。

由于我无法在智能感知中找到用户控件，因此我无法将控件添加到 aspx 页面。

我在基本控件上尝试了各种方法，即删除designer.cs 页面中的所有代码，然后剪切并重新粘贴html 以重新生成designer.cs 页面，但均无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:17:17.463

如本文所示，在 web.config 文件中注册您的用户控件：

[http://weblogs.asp.net/scottgu/archive/2006/11/26/tip-trick-how-to-register-user-controls-and-custom-controls-in-web-config.aspx](http://weblogs.asp.net/scottgu/archive/2006/11/26/tip-trick-how-to-register-user-controls-and-custom-controls-in-web-config.aspx)

在`<pages>`web.config 文件下，添加`<controls>`如下块：

```
<?xml version="1.0"?>

<configuration>

  <system.web>

    <pages>
      <controls>
        <add tagPrefix="scottgu" src="~/Controls/Header.ascx" tagName="header"/>
        <add tagPrefix="scottgu" src="~/Controls/Footer.ascx" tagName="footer"/>
        <add tagPrefix="ControlVendor" assembly="ControlVendorAssembly"/>
      </controls>
    </pages>

  </system.web>

</configuration> 
```

# python - 如何在任何文本编辑器中使腌制文件不可读

> ID：13383633
> 
> 赞同：0
> 
> 时间：2012-11-14T17:06:50.467
> 
> 标签：python, pickle

如果我们强行打开它，我使用这种方法创建的腌制文件在文本编辑器中是可读的，

```
import pickle,os
print os.path.split(__file__)[0]
storloc= os.path.normpath(os.path.join(os.path.split(__file__)[0],"test.pkl"))

newD={"String":"this is the world", "int":1,"float":1.5}
print newD
print storloc
d = open(storloc, 'wb')
pickle.dump(newD,d)
d.close() 
```

如何在任何文本编辑器中使腌制文件（test.pkl）不可读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:15:32.980

只需在转储调用中添加第三个参数 - 它是协议参数，只有默认的一个 (0) 是 ASCII 编码的 - 协议 1 和 2 只是二进制的，应该在文本编辑器中进行修改。

但是，这**并不**安全——如果您不想看到密码，请检查 pycripto，并对您的文件进行一些适当的加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:28:31.963

尝试使 Python 泡菜等简单格式对密码安全是一种愚蠢的游戏。

请改用该[`keyring`](http://pypi.python.org/pypi/keyring)软件包并将其留给操作系统以安全地存储您的密码。

```
import keyring

username = # Obtain a stored username or ask the user
password = keyring.get_password('your_application_name', username)

if password is None or verify_password_failed:
    password = # Obtain a password from the user
    keyring.set_password('your_application_name', username, password) 
```

该`keyring`软件包使用操作系统提供的密钥环（OS X、Windows、KDE、Gnome），但如有必要，将退回到它自己的加密存储。

# javascript - 如何制作标签文本框

> ID：13383634
> 
> 赞同：7
> 
> 时间：2012-11-14T17:06:50.827
> 
> 标签：javascript, jquery, jquery-ui, knockout.js

在stackoverflow中，当我们发帖时，我们可以看到一个文本框“标签”。

在输入一个单词和一个空格时，它就变成了一个标签。成为标签后，我们继续从单词中删除一个字母。但是我们可以通过单击 X 图像来删除单词本身。

我想为标签创建一个类似的文本框。在 stackoverflow 中，自动建议也与此文本框相关联，但我不需要。

任何帮助/链接将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T17:09:23.047

网上有一大堆这样的东西。我发现有些人很容易使用谷歌。例如，看看这个：

[http://xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T17:34:28.900

***编辑：***这是一个类似的例子，功能略有不同（更好）：
[https ://stackoverflow.com/a/14083331/383904](https://stackoverflow.com/a/14083331/383904)

* * *

一个不错的小演示，您可以轻松升级和修改：

```
$('#tags input').on('focusout',function(){    
  var txt = $.trim( this.value );
  if(txt) {
    $(this).before('<span class="tag">'+txt+'</span>');
  }
  this.value = "";  
});

$('#tags').on('click','.tag',function(){
  if( confirm("Really delete this tag?") ) $(this).remove();
});
```

```
#tags{
  float:left;
  border:1px solid #ccc;
  padding:5px;
  font-family:Arial;
}
#tags span.tag{
  display:block;
  float:left;
  color:#fff;
  background:#689;
  padding:5px;
  padding-right:25px;
  margin:4px;
}
#tags span.tag:after{
  position:absolute;
  content:"x";
  border:1px solid;
  padding:0 4px;
  margin:3px 0 10px 5px;
  cursor:pointer;
  font-size:10px;
}
#tags input{
  background:#eee;
  border:0;
  margin:4px;
  padding:7px;
  width:auto;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="tags">
  <input type="text" value="" placeholder="Add a tag" />
</div>
```

# mysql - SQL - 如果它是空字符串（''），如何忽略插入重复数据（UNIQUE）？

> ID：13383637
> 
> 赞同：1
> 
> 时间：2012-11-14T17:06:56.910
> 
> 标签：mysql, duplicates, unique, string

我的表地籍：

```
cod_bolsa VARCHAR(7) PRIMARY KEY
nome VARCHAR(70) NOT NULL
endereco VARCHAR(100) NOT NULL
email VARCHAR(50) NOT NULL
telefone VARCHAR(13) NOT NULL
celular VARCHAR(14) NOT NULL
cpf VARCHAR(14) UNIQUE
cnpj VARCHAR(18) UNIQUE
rg VARCHAR(12) UNIQUE
datanasc VARCHAR(12) NOT NULL 
```

* * *

查询：

```
INSERT INTO cadastro VALUES(
'000036',
'JULIO CESAR',
'AV. FRANZ VOEGELI, 300 - VILA YARA, SÃO PAULO/SP',
'julio.c@mail.com',
'(11)2345-6789',
'(11)99876-5432',
'987.654.321.00',
'',
'98.765.432-1',
'1972-5-12'
);

INSERT INTO cadastro VALUES(
'000125',
'JOAO MARIA',
'AV. FRANZ VOEGELI, 300 - VILA YARA, SÃO PAULO/SP',
'joao.m@mail.com',
'(11)2345-6789',
'(11)91676-1334',
'012.234.567-89',
'',
'01.234.345-8',
'1991-1-20'
); 
```

* * *

MySQL显然说

```
ERROR 1062 (23000): Duplicate entry '' for key 'cnpj' 
```

如何避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:12:05.670

“解决”这个问题的最明显方法当然是使该字段不唯一。

但也许，您想要“如果违反唯一约束，则使用其他内容更新上一个条目”之类的内容。

在这种情况下，您可能想要使用“ON DUPLICATE KEY UPDATE”或“REPLACE INTO”，这[两者都在此处进行了说明](http://thomashunter.name/blog/mysql-replace-vs-insert-on-duplicate-key-update/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:13:57.813

您的表在 ; 上有一个 UNIQUE 约束`[cnpj VARCHAR(18)]`。UNIQUE 约束保证 cnpj 列的唯一性，因此您不能插入 2 条具有相同 cnpj 值的记录。

# android - 带按钮的操作栏 Sherlock

> ID：13383638
> 
> 赞同：8
> 
> 时间：2012-11-14T17:06:59.453
> 
> 标签：android, tabs, action, actionbarsherlock

我正在构建一个应用程序，我真的想使用 ABS (action bar sherlock) 4.0 将按钮向左对齐我真的很喜欢 Dropbox 界面，如下所示：

![Dropbox 界面](../Images/6b5e9b606253c4052a6eea3988a7a401.png)

所以，我的问题是：如何将按钮向左对齐，如何使用按钮在 ViewFlow 中的视图之间跳转？

我已经看到人们可以将标签添加到他们的 ABS，但不能像 Dropbox 界面那样使用标题。

谢谢。另外，如果您需要我的源代码，我会在以后添加。

问候

斯蒂安·英斯特博

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T22:08:01.430

[setCustomView()](http://developer.android.com/reference/android/app/ActionBar.html#setCustomView%28int%29)是您可能正在寻找的神奇方法。

要实现 Dropbox 应用中显示的相同布局，您首先要在 ActionBar 上调用[setDisplayShowHomeEnabled(false) 。](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowHomeEnabled%28boolean%29)

接下来，您可以在 XML 中的某处定义按钮的布局。一旦完成，调用 setCustomView(R.layout.my_actionbar_nav) 就可以了。（它现在将位于 ActionBar 的左侧）。

为布局的内部按钮视图连接适当的 onClick 侦听器将是您的责任，但为设置自定义导航付出的代价也不错。

# maven - 如何将生成的文件包含到与 maven 的战争中，但不将其添加到源中

> ID：13383639
> 
> 赞同：2
> 
> 时间：2012-11-14T17:06:59.450
> 
> 标签：maven, war

我在我的 Maven 项目中需要来自其他项目（.jsp、.tag 文件）的依赖项。为了解决这个问题，我从这些其他项目中创建了一个“资源”jar，并将它们指定为 maven 中的依赖项。然后我解压缩 jar（在 ant 中，在 generate-sources 生命周期阶段）并将文件复制到他们需要去的地方。这就是问题所在（也欢迎提出更好的整体方法的建议）。我在想我可以将这些文件移动到我想要它们的目标目录中，并且它们会与战争一起打包，但这不起作用。常见的方法似乎是在war插件中添加一个额外的资源目录：

[如何创建文件并将其与 Maven 交战？](https://stackoverflow.com/questions/12842957/how-create-file-and-put-it-in-a-war-with-maven)

[在构建 WAR 之前在 Maven 中重命名生成的文件](https://stackoverflow.com/questions/10230566/rename-a-generated-file-in-maven-before-building-war)

但是，我真的不想将这些文件保留在我的源代码中，因为它们属于另一个项目。有没有办法可以将临时资源包含到 jar 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:38:20.690

我想说这是您应该查看[Maven War Overlay](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)的典型案例。

> 覆盖用于跨多个 Web 应用程序共享公共资源。WAR 项目的依赖项收集在 WEB-INF/lib 中，但覆盖在 WAR 项目本身上的 WAR 工件除外。

这意味着您可以将另一场战争的碎片应用到您自己的战争中。最好的情况是，如果所有公共资源都在一个父战争中，而其他战争将使用覆盖技术。

您将依赖项添加到要用作覆盖的战争中：

```
<dependency>
    <groupId>com.acne</groupId>
    <artifactId>acne-web-style</artifactId>
    <type>war</type>
    <scope>compile</scope>
</dependency> 
```

然后你将它应用到`maven-war-plugin`：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <overlays>
            <overlay>
                <groupId>com.acne</groupId>
                <artifactId>acne-web-style</artifactId>
                <includes>
                    <include>**/resources/*.jpg</include>
                </includes>
            </overlay>
            <overlay>
                <!-- empty groupId/artifactId represents the current build -->
            </overlay>
        </overlays>
    </configuration>
</plugin> 
```

# ios - 滚动出视图时，UITableView 中的 UITextField 清空

> ID：13383640
> 
> 赞同：0
> 
> 时间：2012-11-14T17:07:11.743
> 
> 标签：ios, forms, uitextfield

我有一个带有 6 个 UITextFields 的 UITableView，这些 UITextFields 在 cellForRowAtIndexPath: 方法中标记：方法（0 到 5）。我还将 datePicker 视图附加到 textFieldShouldBeginEditing: 方法中基于标签（4 和 5）的字段 5 和 6 的 inputView。

当数据输入到字段 2，然后点击字段 6（日期字段）进行输入时，datePicker 视图向上滑动，字段 2 被遮挡。输入完成后（或者如果您向上滚动以显示字段 2，我可以看到其内容已被擦除/清空/删除。

我对为什么会发生这种情况感到困惑。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:09:57.597

当它滚出表格视图的可见区域并在它回来时重新创建它（擦除内容）时，它正在删除文本字段。当您的表格视图重新创建它们时，您需要存储文本字段的值并将其值设置为文本字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:09:00.583

发生这种情况是因为单元已被释放以节省内存。为了解决这个问题，您需要将文本字段的内容存储在一个变量中。然后在重新创建单元格时加载保存的内容。如果您需要更多详细信息，请告诉我...

# c# - C#：需要从文件名路径中删除最后一个文件夹

> ID：13383643
> 
> 赞同：35
> 
> 时间：2012-11-14T17:07:13.827
> 
> 标签：c#

我正在从数据库中提取文件路径以用作文件源。我需要从源路径中删除最后一个文件夹，然后我可以创建新文件夹以用作目标路径。

示例源文件路径： `\\\\ServerName\\Documents\\MasterDocumentFolder\\`

我需要从该字符串中删除最后一个文件夹并得到这个： `\\\\ServerName\\Documents\\`

所以我可以创建一个这样的文件夹： `\\\\ServerName\\Documents\\NewDocumentFolder1\\`

编辑：我已经更新了我的示例路径，以说明为什么 Path.GetDirectoryName() 在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-14T17:18:33.243

您正在寻找的是 Directory 类中的 GetParent() 方法

```
string path = @"C:\Documents\MasterDocumentFolder\";
DirectoryInfo parentDir = Directory.GetParent(path);
// or possibly
DirectoryInfo parentDir = Directory.GetParent(path.EndsWith("\\") ? path : string.Concat(path, "\\"));

// The result is available here
var myParentDir = parentDir.Parent.FullName 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T17:11:03.437

这很难看，但有效

```
string path = @"C:\Documents\MasterDocumentFolder\file.any";
var lastFolder = Path.GetDirectoryName(path);
var pathWithoutLastFolder = Path.GetDirectoryName(lastFolder); 
```

但是如果你的目录少于一级（驱动根目录），那么`pathWithoutLastFolder`就会是`null`，所以你必须处理它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-17T22:59:58.167

[System.IO.DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo%28v=vs.110%29.aspx)可能是完成您所要求的最干净的方法。

```
var path = "\\\\ServerName\\Documents\\MasterDocumentFolder\\";
string newPath = new DirectoryInfo(path).Parent.CreateSubdirectory("NewDocumentFolder1").FullName;
Console.WriteLine(newPath.FullName);
//> "\\ServerName\Documents\NewDocumentFolder1\" 
```

请注意， DirectoryInfo 不需要现有的或可访问的目录：

```
var dir = new DirectoryInfo(@"C:\Asdf\Qwer\Zxcv\Poiu\Lkj\Mn");
Console.WriteLine( dir.Exists );
//> False 
```

但是确保它的存在是一件轻而易举的事

```
var dir = new DirectoryInfo(@"C:\Asdf\Qwer\Zxcv\Poiu\Lkj\Mn");
dir.Create();
Console.WriteLine( dir.Exists );
//> True 
```

它还会做一些漂亮的事情，比如解析相对路径：

```
var dir = new DirectoryInfo(@"C:\Asdf\Qwer\Zxcv\Poiu\Lkj\..\..\..\Mn");
Console.WriteLine( dir.FullName );
//> C:\Asdf\Qwer\Mn 
```

关于修剪和附加斜杠的其他答案，请注意 Directory.GetParent("...\") 和 DirectoryInfo("...\").Parent 在处理尾随 \'s 时的行为差异 - DirectoryInfo 更加一致：

```
Console.WriteLine( Directory.GetParent( @"C:\Temp\Test" ).FullName );
//> C:\Temp
Console.WriteLine( Directory.GetParent( @"C:\Temp\Test\" ).FullName );
//> C:\Temp\Test
Console.WriteLine( new DirectoryInfo( @"C:\Temp\Test" ).Parent.FullName );
//> C:\Temp
Console.WriteLine( new DirectoryInfo( @"C:\Temp\Test\" ).Parent.FullName );
//> C:\Temp 
```

同样，为避免处理尾部斜杠，请始终使用 Path.Combine() 连接路径和文件名。无论路径是否包含尾随\，它都会正确处理路径：

```
Console.WriteLine( Path.Combine( @"C:\Temp\Test\", "Test.txt" ) );
//> C:\Temp\Test\Test.txt
Console.WriteLine( Path.Combine( @"C:\Temp\Test", "Test.txt" ) );
//> C:\Temp\Test\Test.txt
Console.WriteLine( Path.Combine( @"C:\", "Temp", "Test", "Test.txt" ) );
//> C:\Temp\Test\Test.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T17:19:10.490

这应该说明路径是文件还是目录

```
DirectoryInfo parent = null;
if (File.Exists(path))
{
    parent = new FileInfo(path).Directory.Directory
}
if(Directory.Exists(path))
{
    parent = new DirectoryInfo(path).Directory;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T17:11:39.927

您是否尝试过按“\”拆分字符串，然后通过连接除最后一个元素之外的每个元素来重建新路径？

您还需要考虑原始路径位于根目录以及何时以反斜杠结尾的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-20T22:04:42.723

使用此方法，您可以通过 dirPath 创建 dir（如果 dir 不存在）并在需要时从 filePath 创建目录

```
private void CreateDirIfNotExist(string dirPath, bool removeFilename = false)
{
    if (removeFilename)
        dirPath = Directory.GetParent(dirPath).FullName;

    if (!Directory.Exists(dirPath))
        Directory.CreateDirectory(dirPath);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-06-20T22:31:49.180

在 VB 中：

```
Dim MyNewPath As String = StrReverse(Strings.Split(StrReverse(MyPath), "\", 2)(1)) 
```

这适用于根目录，例如，`C:\MyPath`但对于裸文件夹会失败（未经验证）。

显然，如果附加了文件，则需要进行不同的处理。

# parameters - openam auth - 发送额外参数

> ID：13383646
> 
> 赞同：0
> 
> 时间：2012-11-14T17:07:18.933
> 
> 标签：parameters, single-sign-on, openam

我已经设置了 OpenAM (SingleSignOn) 并且可以成功登录。下一步（不知道这是否可能）是使用身份验证请求发送额外的参数。

即：[http ://auth.mysite.com/openam/identity/authenticate?username=gareth&password=myFirstPassword&uri=realm%3Dboohoo&extraParam=whateverIWant](http://auth.mysite.com/openam/identity/authenticate?username=gareth&password=myFirstPassword&uri=realm%3Dboohoo&extraParam=whateverIWant)

如您所见，我想发送一些与用户相关的自定义数据。

OpenAM 有可能吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:17:13.317

使用基于 REST 的身份 Web 服务这是不可能的，因为 HttpRequest 没有通过。

同样在基于 AuthContext 的 auth 下方，它使用了一个回调...参见 javadoc。

问题是你想用这个额外的参数做什么？

# javascript - 如何确定谷歌翻译已加载？

> ID：13383647
> 
> 赞同：4
> 
> 时间：2012-11-14T17:07:20.370
> 
> 标签：javascript, jquery, events, load

我的页面上有谷歌翻译。它看起来像一个下拉列表，但我页面上的所有其他下拉列表都有另一种样式。所以我创建了 jQuery 函数来改变谷歌翻译下拉列表样式。该函数添加或删除一些样式参数。我想知道什么时候应该调用这个函数？在当前代码中，我在 3 秒后调用它。在 document.ready 之后

```
 $(document).ready(function () {
      setTimeout(wrapGoogleTranslate, 3000);
  }); 
```

目前的情况是我隐藏了放置 Google 翻译的 Div，并在我的函数更正了它的样式后显示它。这意味着我的页面加载完毕，然后等待 3 秒，*然后*Google 翻译会以更正的样式出现。

我想知道如何确定 Google 翻译下拉菜单已加载，然后调用我的函数来更改样式。我不想让用户等待 3 秒（也许在某些情况下谷歌翻译会加载超过 3 秒，然后我的函数将永远不会被执行）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T18:11:50.910

我最近想将“选择语言”更改为简单的“语言”，所以我还必须在执行 Google 的代码后运行代码。我是这样做的：

**HTML**

`div`将 Google 设置为很重要`display:none`——我们将使用 JavaScript 将其淡入，这样用户就不会看到文本从“选择语言”切换到“语言”。

```
<div id="google_translate_element" style="display:none;"></div>
<script type="text/javascript">function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, gaTrack: true, gaId: 'UA-35158556-1'}, 'google_translate_element');}</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

**JavaScript**

```
function changeLanguageText() {
  if ($('.goog-te-menu-value span:first-child').text() == "Select Language") {    
    $('.goog-te-menu-value span:first-child').html('Language');
    $('#google_translate_element').fadeIn('slow');
  } else {
    setTimeout(changeLanguageText, 50);
  }
}
changeLanguageText(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T01:21:44.843

我有类似的情况，我不得不将“选择语言”更改为只显示“语言”。这是我的 CSS 解决方案：

```
div#google_translate_element{
  display: inline-block;
  vertical-align: top!important;
}

div#google_translate_element *{
  margin: 0px;
  padding: 0px;
  border: none!important;
  display: inline-block;
  vertical-align: top!important;
}

div#google_translate_element .goog-te-gadget-icon{
  display: none;
}

div#google_translate_element .goog-te-menu-value{
  color: #899290;
}

div#google_translate_element .goog-te-menu-value:hover{
  color: #a6747e;
}

div#google_translate_element .goog-te-menu-value *{
  display: none;
}

div#google_translate_element .goog-te-menu-value span:nth-child(3){
  display: inline-block;
  vertical-align: top!important;
}

div#google_translate_element .goog-te-menu-value span:nth-child(3)::after{
  content: "Language"!important;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-14T17:12:06.513

您可以使用纯 JavaScript 来完成。[`onLoad` 它在属性](http://www.w3schools.com/jsref/event_onload.asp)的 W3 文档中说，您可以在 HTML 元素中添加一个属性，该属性作为参数，当元素加载时要执行的 JavaScript 代码。

问题是，该属性仅支持以下几个元素：-

*   `<body>`
*   `<frame>`
*   `<frameset>`
*   `<iframe>`
*   `<img>`
*   `<input type="image">`
*   `<link>`
*   `<script>`
*   `<style>`

所以，我建议使用`<iframe>`or `<frame`。它现在应该看起来像这样：

```
<frame onLoad="wrapGoogleTranslate();" /> 
```

或者，你可以用 jQuery 试试这个：

```
$("div#googleTranslateWrapper").load(function() {
  setTimeout(wrapGoogleTranslate, 3000);
}); 
```

这是jQuery[`load`方法的文档](http://api.jquery.com/load/)

# c# - 是否会在发布版本中评估提供给 Debug.Assert 的表达式？

> ID：13383651
> 
> 赞同：7
> 
> 时间：2012-11-14T17:07:52.723
> 
> 标签：c#, .net, conditional-compilation

假设我有一个相当昂贵的断言：

```
bool IsCompatible(Object x, Object y) { 
  // do expensive stuff here
} 
```

如果我用以下方法测试这个断言：

```
Debug.Assert(IsCompatible(x,y)); 
```

IsCompatible 会在发布版本中执行吗？

我的理解是 Debug.Assert 被标记为 [Conditional("DEBUG")]，对它的调用只会在调试版本中发出。我认为这不会阻止表达式在发布模式下被评估，因为方法调用可能有副作用，只有将结果传递给 Debug.Assert 不会被发出。那是对的吗？

我应该这样做：

```
#if DEBUG
Debug.Assert(IsCompatible(x,y));
#endif 
```

确保我在发布模式下不支付 IsCompatible 的费用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T17:08:46.950

不。

`Debug.Assert`装饰有`[Conditional("DEBUG")]`。

当编译器编译对该方法的调用时，它将删除整个语句，除非`DEBUG`在调用项目中定义。

# ruby-on-rails - wicked_pdf：是否可以让页眉仅显示在第一页而页脚仅显示在最后一页？

> ID：13383653
> 
> 赞同：2
> 
> 时间：2012-11-14T17:08:09.697
> 
> 标签：ruby-on-rails, wkhtmltopdf, wicked-pdf

现在我已经`:header => {:html => {:template => "layouts/pdf_header.html.erb"}}`设置好了。有什么我可以传递的只会在文档第一页显示标题的东西吗？

我也可以为页脚执行此操作吗？这在这里几乎更重要，因为我真的想不出任何其他方法来让页脚动态地粘在页面底部，因为它每次都会有不同的长度和不同的页面数量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T18:24:02.717

一些快速的 javascript 可以解决这个问题。遵循[wkhtmltopdf上“页脚和页眉”下列出的样板文件](https://github.com/antialize/wkhtmltopdf/blob/master/README_WKHTMLTOPDF "wkhtmltopdf")

这些分别是您的页眉和页脚模板。要跟踪的关键变量是 URL 哈希中可用的“页面”。您的标题将如下所示：

```
<div class="headerContent" style="display:none">
   ...my awesome html
    <hr />
</div>
<script type="text/javascript">
    var headerCheck = function() {
      var x=document.location.search.substring(1).split('&');
      for (var i in x) {
        if(x[i] == "page=1")
          document.getElementsByClassName("headerContent")[0].style.display = "block";
       }
     }();
</script> 
```

同样，对于您的页脚，代码将如下所示：

```
<div class="footerContent" style="display: none">
    ...awesome footer html
</div>
<script type="text/javascript">
    var footerCheck = function() {
       var x=document.location.search.substring(1).split('&');
       var currentPage = 1;
       for (var i in x) {
         var z=x[i].split('=',2);
         if(z[0] == "page")
           currentPage = unescape(z[1]);
         if(z[0] == "topage" && currentPage == unescape(z[1]))
           document.getElementsByClassName("footerContent")[0].style.display = "block";
        }
     }();
 </script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-19T10:12:30.193

渲染pdf时添加布局

```
format.pdf do
  render :pdf => "my_pdf",
  :layout => 'pdf
end 
```

视图/布局/pdf.haml

```
%html
  %head

  %body
    = render "layouts/header"
    = yield
    = render "layouts/footer" 
```

# concurrency - 是否可以为只写操作设置竞争条件？

> ID：13383656
> 
> 赞同：3
> 
> 时间：2012-11-14T17:08:17.793
> 
> 标签：concurrency, cuda, gpgpu

如果我有多个线程试图将相同的值写入内存中的单个位置，是否可能存在竞争条件？数据会在写入过程中以某种方式损坏吗？没有前面的读取或测试条件，只有写入...

编辑：澄清一下，我在 GPU 上计算一个点积。我正在使用多个线程来计算单个产品（每行/列元素一个线程）并将它们保存到内存中的临时位置。然后我需要对这些中间产品求和并保存结果。

我正在考虑让所有线程单独执行此求和/存储操作，因为在 GPU 上进行分支会损害性能。（您会认为无论是由单个线程还是所有线程完成的求和/存储都应该花费相同的时间，但是我已经对此进行了测试，并且性能受到了很小的影响。）所有线程都将获得相同的总和，但是当他们每个人都尝试将答案写入内存中的同一位置时，我担心竞争条件。在我所做的有限测试中，一切似乎都很好，但我仍然很紧张......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:22:25.763

在大多数平台上的大多数线程标准下，这只是被禁止或未定义的。也就是说，你不允许这样做，如果你这样做，任何事情都可能发生。

像 C 和 C++ 这样的高级语言编译器可以自由地优化代码，前提是你不会做任何你不允许做的事情。因此，“只写”操作可能不是这样的事情。如果您`i = 1;`使用 C 或 C++ 编写，编译器可以自由生成与您编写`i = 0; i++;`. 类似的混淆优化确实发生在现实世界中。

相反，请遵循您使用的任何线程模型的规则，以使用适当的同步原语。如果您的平台提供它们，请使用适当的原子操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T16:18:58.200

多个线程在 CUDA 中写入单个（可能是共享的或全局的）内存位置没有问题，即使是“同时”，即从同一行代码。

如果您关心写入的顺序，那么这是一个问题，因为 CUDA 不保证顺序，因为多个线程对同一内存位置执行相同的写入操作。如果这是一个问题，您应该使用原子或其他重构代码的方法来解决它。（听起来这对你来说不是问题。）

*据推测，正如另一位响应者所说，您在某些*时候关心结果。因此，有必要设置某种屏障，无论是显式的（例如，__synchthreads()，用于使用共享内存的块中的多个线程）或隐式的（例如，内核的结尾，用于多个线程写入全局内存中的位置） ) 在您阅读该位置并期待一个合理的结果之前。请注意，这些并不是唯一可以为您提供合理结果的屏障方法，仅举两个例子。可以利用 Warp 同步行为或其他聪明的编码技术来确保在写入集合之后读取的完整性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T17:24:21.923

尽管从表面上看答案似乎是否定的，但没有竞争条件，但答案更加微妙。Boris 是对的，在某些 32 位架构上，存储 64 位长或地址可能需要两次操作，因此可能会在无效状态下读取。这可能很难重现，因为内存页面通常是更新的，而 long 永远不会跨越内存页面。

但是，更重要的问题是您需要意识到，如果没有内存同步，则无法保证线程*何时*会看到更新的值。线程可能会运行很长时间，从内存中读取过期值。它不会是无效值，但不会是最近写入的值。这可能不会特别导致“竞争条件”，但可能会导致您的程序以意想不到的方式执行。

此外，尽管您说它是“只写”，但显然有人正在读取该值，否则将没有理由执行更新。代码的哪一部分正在读取该值的详细信息将更好地告知我们不同步的只写是否真正安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T17:15:24.440

如果只写操作显然不是原子的，那么会有一段时间另一个线程可能会观察到处于损坏状态的数据。

例如写入 64 位整数，它们存储为一对 32 位整数。

线程A——刚写完高位字，线程B刚写完低位字，准备设置高位字；

线程 C 可能会看到整数由线程 B 写入的低位字和线程 A 写入的高位字组成。

PS这个问题很笼统，实际结果将取决于环境（语言）的内存模型和底层处理器架构（硬件）。

# c# - 在 C# 中为列表框格式化字符串

> ID：13383657
> 
> 赞同：0
> 
> 时间：2012-11-14T17:08:27.590
> 
> 标签：c#, listbox, string-formatting

我将首先说列表框是类项目的要求。我只是想通过在将字符串添加到列表框之前对其进行格式化来使它看起来更好。我有一个用于`Product.ToString()`格式化字符串的覆盖，但是当我将它添加到列表框中时，格式就会消失。

`ToString`类中的方法`Product`：

```
public override string ToString()
{
    string newFormat = string.Format("{0,0}{1,20}", Name, Price);
    return newFormat;
} 
```

更新方法：

```
protected void updateLists()
{
    availableProducts_LB.Items.Clear();
    foreach (Product p in customer.AvailableProducts)
        availableProducts_LB.Items.Add(p.ToString());

    shoppingCart_LB.Items.Clear();
    foreach (Product p in customer.shoppingCartList)
        shoppingCart_LB.Items.Add(p.ToString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:13:40.133

只需将您的 Product 实例直接添加到 ListBox（不要调用 ToString）：

```
availableProducts_LB.Items.Clear();
foreach (Product p in customer.AvailableProducts)
    availableProducts_LB.Items.Add(p); 
```

ListBox 将使用 Product.ToString 方法来显示列表中的项目。

然后在 ToString 中的 return 语句上放置一个断点，以确保它是您期望的值。

# objective-c - 为什么我的 NSString 常量被认为是重复的？

> ID：13383660
> 
> 赞同：1
> 
> 时间：2012-11-14T17:08:44.133
> 
> 标签：objective-c

> **可能重复：**
> [Xcode 重复符号错误](https://stackoverflow.com/questions/11773974/xcode-duplicate-symbol-error)

我有一个`Constant.h`存储我的常量字符串的文件。但是，当我尝试将`Constant.h`文件添加到两个不同的类（使用`#import "Constant.h"`）时，出现重复符号错误。如何在不同的类中使用此文件而不会出现重复符号错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:26:59.593

你在声明常量是错误的。`NSString`常量的正确方法是：

```
extern NSString *const ConstantName; // in Constant.h
NSString *const ConstantName = @"ConstantName"; // in Constant.m 
```

另请参阅[此问题](https://stackoverflow.com/questions/25746/whats-the-difference-between-a-string-constant-and-a-string-literal)和相关问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T17:24:07.290

尝试使用下面的代码在 2 个不同的类中使用常量文件

```
 @class Constant; 
```

在视图控制器的 .m 文件中的 @implementation 之前使用它

# git - Git - Windows的“编辑”命令？

> ID：13383667
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:08:51.240
> 
> 标签：git, version-control

我正在从 pdf 在 Windows 上学习 git，我看到有一个名为`edit`编辑文件的命令，但不幸的是它在我的 PC 上不起作用。它回复一条消息`sh: edit: command not found`。我该如何解决我的问题？我想从终端编辑文件。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:19:07.657

我想你很困惑。如果要在终端中编辑，则需要安装[vim](http://www.thegeekstuff.com/2009/12/vim-editor-for-windows/)或[emacs 。](http://www.gnu.org/software/emacs/windows/faq.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:25:39.543

我没有听说过 git edit 命令。也许它是在说关于编辑提交消息。

1）如果您希望 git 在编辑提交消息时启动自定义编辑器，您可以尝试配置 git 以使用它（emacs 编辑器的配置）：

```
git config --global core.editor emacs 
```

2）如果您只想从命令行快速编辑文件，只需在其中提示

```
notepad.exe patch_to_file 
```

（或其他一些编辑器执行文件）

无论如何，我个人建议阅读[http://git-scm.com/book](http://git-scm.com/book)而不是一些奇怪的 pdf

# javascript - Jquery 菜单 ul 切换

> ID：13383668
> 
> 赞同：0
> 
> 时间：2012-11-14T17:08:51.240
> 
> 标签：javascript, jquery, css, ajax

我有这个菜单：

```
 <ul id="submenu" class="clearfix">
                <li><a href="javascript:void(0)">Vedella</a></li>
                <li><a href="javascript:void(0)">Minis de vedella</a></li>
                <li><a href="javascript:void(0)">Vaca</a></li>
                <li><a href="javascript:void(0)">Poltre</a></li>
                <li><a href="javascript:void(0)">Porc Ibèric</a></li>
                <li><a href="javascript:void(0)">Pollastre</a></li>
                <li><a href="javascript:void(0)">Gall d´indi</a></li>
                <li><a href="javascript:void(0)">Bou</a></li>
            </ul> 
```

每个“#submenu” li 淡入一个 ul 子列表并隐藏其他子列表。

这是子列表：

```
 <ul class="sublist first_sublist">
                <li><a href="javascript:void(0)">Normal </a></li>
                <li><a href="javascript:void(0)">All i Julivert</a></li>
                <li><a href="javascript:void(0)">Formatge Roquefort</a></li>
                <li><a href="javascript:void(0)">Ceba</a></li>
            </ul>

            <ul class="sublist second_sublist">
                <li><a href="javascript:void(0)">Mini-Hamburgueses</a></li>
                <li><a href="javascript:void(0)">Surtit Mini-Hamburgueses</a></li>
            </ul>

            <ul class="sublist third_sublist">
                <li><a href="javascript:void(0)">Normal</a></li>
            </ul>

            <ul class="sublist fourth_sublist">
                <li><a href="javascript:void(0)">Poltre</a></li>
            </ul>

            <ul class="sublist fifth_sublist">
                <li><a href="javascript:void(0)">Porc ibèric de Gla</a></li>
            </ul> 
```

这个CSS：

```
 .second_sublist, .third_sublist, .fourth_sublist, .fifth_sublist, .sixth_sublist{
        display: none;
    } 
```

使用此脚本：

```
$('#submenu li').click{
    $('#submenu li').removeClass('active');
    $(this).addClass('active');    
    $('.sublist.second_list').hide();
    $('.sublist.first_list').fadeIn();
}); 
```

脚本的问题是，如果我有五个子列表，它会变得更大，因为我必须根据“#submenu”li 制作每个点击功能。

有人可以帮我简化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:11:07.233

使用 class 而不是 id 来绑定事件，这样您就不需要 id 来绑定 click 事件。

```
$('.clearfix li').click(function(){
    $('#submenu li').removeClass('active');
    $(this).addClass('active');    
    $('.sublist.second_list').hide();
    $('.sublist.first_list').fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:10:46.827

这是我会采取的方法：

**更新：**我忘了提，你也[可以摆脱 clearfix 类](http://www.ejeliot.com/blog/59)。

**HTML**

```
<ul id="submenu" class="clearfix">
    <li><a href="javascript:void(0)">Vedella</a></li>
    <li><a href="javascript:void(0)">Minis de vedella</a></li>
    <li><a href="javascript:void(0)">Vaca</a></li>
    <li><a href="javascript:void(0)">Poltre</a></li>
    <li><a href="javascript:void(0)">Porc Ibèric</a></li>
    <li><a href="javascript:void(0)">Pollastre</a></li>
    <li><a href="javascript:void(0)">Gall d´indi</a></li>
    <li><a href="javascript:void(0)">Bou</a></li>
 </ul>

<ul class="sublist">
    <li><a href="javascript:void(0)">Normal </a></li>
    <li><a href="javascript:void(0)">All i Julivert</a></li>
    <li><a href="javascript:void(0)">Formatge Roquefort</a></li>
    <li><a href="javascript:void(0)">Ceba</a></li>
</ul>

<ul class="sublist">
    <li><a href="javascript:void(0)">Mini-Hamburgueses</a></li>
    <li><a href="javascript:void(0)">Surtit Mini-Hamburgueses</a></li>
</ul>

<ul class="sublist">
    <li><a href="javascript:void(0)">Normal</a></li>
</ul>

<ul class="sublist">
    <li><a href="javascript:void(0)">Poltre</a></li>
</ul>

<ul class="sublist">
    <li><a href="javascript:void(0)">Porc ibèric de Gla</a></li>
</ul> 
```

**JavaScript**

```
$('#submenu li').on('click',function(){
    $this = $(this);
    // move active class to current list item
    $this.addClass('active').siblings().removeClass('active');
    // make sure all the sublists are hidden,
    // then determine the position of the list item
    // in the ul, and select the corresponding sublist
    // ex: selecting the 2nd list item in submenu would
    // find the 2nd sublist and fadeIn
    $('.sublist').hide().eq($this.index()).fadeIn();
}); 
```

当然，这意味着子列表必须与子菜单列表项的顺序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:19:00.163

如果您以这种方式完成结构或以这种方式更改结构，请使用它：

```
<ul id="submenu" class="clearfix">
    <li><a href="javascript:void(0)">Vedella</a>
        <ul class="sublist first_sublist">
            <li><a href="javascript:void(0)">Normal </a></li>
            <li><a href="javascript:void(0)">All i Julivert</a></li>
            <li><a href="javascript:void(0)">Formatge Roquefort</a></li>
            <li><a href="javascript:void(0)">Ceba</a></li>
        </ul>
    </li>
</ul>

$('#submenu li').click(function(){
    $('#submenu li').removeClass('active');
    $(this).addClass('active');    
    $('.sublist.second_list').hide();
    $('ul',this).fadeIn();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:21:52.990

**[检查这个小提琴](http://jsfiddle.net/sushanth009/fKPVu/)**

使用 HTML-5 数据属性在其中存储相应的子列表。通过这种方式，您可以使用单个处理程序来显示/隐藏页面上的子列表。

**HTML**

```
 <ul id="submenu" class="clearfix">
    <li><a href="javascript:void(0)" data-class="first_sublist">Vedella</a></li>
    <li><a href="javascript:void(0)" data-class="second_sublist">Minis de vedella</a></li>
    <li><a href="javascript:void(0)" data-class="third_sublist">Vaca</a></li>
    <li><a href="javascript:void(0)" data-class="fourth_sublist">Poltre</a></li>
    <li><a href="javascript:void(0)" data-class="fifth_sublist">Porc Ibèric</a></li>
    <li><a href="javascript:void(0)" data-class="first_sublist">Pollastre</a></li>
    <li><a href="javascript:void(0)">Gall d´indi</a></li>
    <li><a href="javascript:void(0)">Bou</a></li>
 </ul> 
```

**Javascript**

```
$('#submenu li a').on('click',function() {
    var $this = $(this);
    var className = $this.data("class");
    $('#submenu li a').removeClass('active');
    $this.addClass('active');
    $('.sublist').hide();

    $('.'+ className).show();
});​ 
```

# c# - 无法使用 Prism NavigationAsyncExtensions 'RequestNavigate' 捕获 ActivationException

> ID：13383671
> 
> 赞同：2
> 
> 时间：2012-11-14T17:09:02.410
> 
> 标签：c#, .net, exception, navigation, prism

我正在使用 Prism的`NavigationAsyncExtensions`方法：`RequestNavigate``IRegion`

```
// Attempt to navigate to the given view
try
{
    _mainRegion.RequestNavigate(viewName);
}
catch
{
    throw new MissingViewException(viewName);
} 
```

我可以传递一个注册的视图名称并获得成功的导航。但是当我传递一个未注册的视图名称时，我会在`RequestNavigate`. 我希望它失败（我希望能够捕获失败并抛出自定义异常），但由于某些未知原因我无法捕获异常：

![在此处输入图像描述](../Images/84f836cb31995894f004a799704c67ee.png)

我尝试了几种选择：

1.  抢先`ActivationException`。
2.  使用`RequestNavigate`并传递一个`navigationCallback`.
3.  使用`RequestNavigate`并传递 a `navigationCallback`（没有 try-catch 块）。

任何替代方案都没有奏效。有没有人有任何想法/建议？提前致谢！我的直觉告诉我这是某种类型的线程问题，因为扩展方法是异步的。但我认为他们`navigationCallback`会解决这个问题，但遗憾的是结果是一样的。

# javascript - 在 ASP.NET 中使用来自 Javascript 的参数调用服务器端函数

> ID：13383672
> 
> 赞同：1
> 
> 时间：2012-11-14T17:09:07.380
> 
> 标签：javascript, asp.net, vb.net, cross-site

我在**VB.NET中有一个****ASP.NET**应用程序。我的页面中有一个**Javascript**函数和另一个函数。我需要这个脚本来渲染和提交一个on .****`mypage.aspx``callback.aspx``IFrame``mypage.aspx`****

 ****当我点击提交按钮时：

```
<asp:Button ID="subbtn" Name="Submit" OnClientClick="onsubmit_action();" runat="server" /> 
```

执行此脚本，其中`iframeId`的 id 是`IFrame`：

```
function onsubmit_action() {

            submitPage('iframeId');           
        } 
```

（验证或成功）的响应`IFrame`被提交到`callback.aspx`文件中。我猜这是通过调用文件中的回调函数的**跨站点脚本**`callback.aspx`发生的；

```
function callback()
{
     parent.pagecallback_success('<%=Request.QueryString("Id")%>');
} 
```

调用函数`mypage.aspx`

```
function pagecallback_success(ref_id) {
        var Url = "mypage.aspx?";
        Url += "id=" + id;
        window.location.href = Url;
    } 
```

该脚本按预期工作。现在，我想调用一个服务器函数

```
Protected Function Store(ByVal id As String) As Boolean 
```

输入`mypage.aspx.vb`并传递变量`id`：

```
function hostedpagecallback_success(id) {
            var Url = "mypage.aspx?";
            Url += "id=" + id;
            window.location.href = Url;
            "<%= Store(id) %>"
        } 
```

问题是编译器将其`id`视为服务器端函数并给出编译错误。但是，如果我使用 a `sub`（不带参数）而不是函数，`sub`则执行 3 次， on `page_load`，当`IFrame`接收到时，再执行一次（连接是 https 无法有效地调试**Javascript**）。

我不擅长跨站点脚本和代码块，可能真的很琐碎但我不知道如何解决这个问题。有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:18:22.420

我认为您正在寻找 MS-Ajax 的一项功能的页面方法。将 [WebMethod] 放在您要调用的方法（服务器端）上，并使用 PageMethods.GetData(f, s, OnRequestComplete, OnRequestError); 之类的方法调用它的客户端。

整个模式用一篇文章来描述。 [http://www.dotnetfunda.com/articles/article454-using-pagemethods-and-json-in-aspnet-ajax.aspx](http://www.dotnetfunda.com/articles/article454-using-pagemethods-and-json-in-aspnet-ajax.aspx)****

# coding-style - IntelliJ IDEA 闭包缩进设置

> ID：13383675
> 
> 赞同：1
> 
> 时间：2012-11-14T17:09:16.777
> 
> 标签：coding-style, intellij-idea, settings, indentation

IC中是否有闭合压痕的设置？

我想要这个（默认的IDEA方式）

```
deleteButton.setOnClickListener(new

                                   OnClickListener() {
                                       @Override
                                       public void onClick(View view) {
                                           onDeleteClicked(view);
                                       }
                                   }); 
```

看起来像这样（默认的 Eclipse 方式）

```
deleteButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            onDeleteClicked();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:43:25.970

[这是在 YouTrack](http://youtrack.jetbrains.com/issue/SCL-4421)中登录的 Clojure 插件的一个已知错误。随意加星/投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:13:50.763

可以使用[Eclipse Code Formatter](http://plugins.intellij.net/plugin/?idea&id=6546)插件覆盖此行为

# xml - xsl 中的少量修改

> ID：13383676
> 
> 赞同：0
> 
> 时间：2012-11-14T17:09:19.103
> 
> 标签：xml, xslt

我已经创建了报告，提供了在特定日期完成的部门明智销售，它的设计正在 xsl 中完成，如下所示..请参阅部门销售报告...

![在此处输入图像描述](../Images/158e89db4b42e971990b6c6c3d614f6e.png)

用于此的 xsl 是

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:set="http://exslt.org/sets" extension-element-prefixes="set" exclude-result-prefixes="fo">
  <xsl:output method="xml" version="1.0" omit-xml-declaration="no" indent="yes"/>

  <xsl:template match="/">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
      <fo:layout-master-set>
        <fo:simple-page-master master-name="A4" page-width="21cm" page-height="29.7cm" margin-top="2cm" margin-bottom="1cm" margin-left="1cm" margin-right="1cm">
           <fo:region-body margin-bottom="2cm" margin-top="4cm"/>
          <fo:region-after extent="2cm"/>
          <fo:region-before extent="4cm"/>
        </fo:simple-page-master>
              </fo:layout-master-set>
      <fo:page-sequence master-reference="A4" initial-page-number="1">
        <fo:static-content flow-name="xsl-region-after">
            <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  >
               </fo:block>
          <fo:block font-size="9pt" text-align="end">
            <fo:table table-layout="fixed">
              <fo:table-column column-width="9.5cm"/>
              <fo:table-column column-width="9.5cm"/>
               <fo:table-body>
                <fo:table-row>
                        <fo:table-cell
                                        text-align="center">
                    <fo:block text-align="left">
                                            Run:
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 6, 2 )" />
                                        /
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 9, 2 )" />
                                        /
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 1, 4 )" />
                                        @
                                    <xsl:value-of select="DepartmentSalesReport/currentTime" />
                                        </fo:block>
                            </fo:table-cell>
                   <fo:table-cell text-align="right">
                    <!--fo:block space-before="8mm">
                      <xsl:text>Keep this report for 6 months</xsl:text>
                    </fo:block-->
                  </fo:table-cell>
                  <fo:table-cell >
                    <fo:block space-before="8mm">Page <fo:page-number/> of <fo:page-number-citation ref-id="terminator"/></fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>

          </fo:block>
        </fo:static-content>

        <fo:static-content flow-name="xsl-region-before">
          <fo:block text-align-last="center" space-after="1.5cm">
            <fo:table table-layout="fixed">
              <fo:table-column column-width="4cm"/>
              <fo:table-column column-width="10cm"/>
               <fo:table-column column-width="2cm"/>
               <fo:table-column column-width="2cm"/>
              <fo:table-body>
                <fo:table-row>
                  <fo:table-cell  font-size="9pt">
                    <fo:block>Store Number:
                      <xsl:value-of select="DepartmentSalesReport/store_code"/>
                    </fo:block>
                  </fo:table-cell>
                   <fo:table-cell text-align="center">
                             <fo:block  text-align-last="center" font-size="14pt" font-weight="bold" space-after="1mm">
                                <fo:inline text-decoration="underline">Department Sales Report</fo:inline>
                               </fo:block>
                  </fo:table-cell>
                  <fo:table-cell text-align="right"   font-size="9pt">
                     <fo:block > 
                        <xsl:value-of select="DepartmentSalesReport/tradingday"/>   
                     </fo:block>
                  </fo:table-cell>
                  <fo:table-cell text-align="right" font-size="9pt">
                    <xsl:variable name="date"><xsl:value-of select="DepartmentSalesReport/tradingdate"/></xsl:variable>
                    <fo:block> 
                        <xsl:value-of select="substring($date,5,2)"/>/<xsl:value-of select="substring($date,7,2)"/>/<xsl:value-of select="substring($date,1,4)"/>
                    </fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>
          <fo:table table-layout="fixed">
              <fo:table-column column-width="19cm"/>
          <fo:table-body>
                <fo:table-row>
                   <fo:table-cell text-align="center">
                                      <fo:block text-align-last="center" font-size="9pt" >
                                        Summary of Sales by department, only those
                                            departments with activity (Sales,
                                            refunds, voids) will appear on this
                                            report.Use this report to monitor sales in
                                            key departments and make merchandising
                                            decisions as needed.
                          </fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>
          </fo:block>
          <fo:block font-size="9pt" >
           <fo:table table-layout="fixed" >
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.8cm" 
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-body>
                            <fo:table-row>
                            <fo:table-cell number-columns-spanned="9"> <fo:block color="black"
                        space-before.optimum="-8pt">
                        <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  />

                    </fo:block></fo:table-cell>
                            </fo:table-row>
                            <fo:table-row font-weight="bold">
                                <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="left"><xsl:text>-------------------------Department-------------------</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>Net Sales</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>Qty</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>% of Sales</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="right"><xsl:text>--------Void--------</xsl:text></fo:block>
                            </fo:table-cell>
                                <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="right"><xsl:text>-------Return-------</xsl:text></fo:block>
                            </fo:table-cell>        
                                </fo:table-row>
                                <fo:table-row font-weight="bold">
                                    <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:text>#</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:text>Description</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Qty</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Amount</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Qty</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Amount</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                </fo:table-row>
                    <fo:table-row >
                            <fo:table-cell number-columns-spanned="9" > <fo:block color="black"
                        space-before.optimum="-8pt">

                    </fo:block></fo:table-cell>
                            </fo:table-row>

                            </fo:table-body>
                            </fo:table>
          </fo:block>
          <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  />

     </fo:static-content>

        <fo:flow flow-name="xsl-region-body">
        <xsl:variable name="storeSales" select="sum(DepartmentSalesReport/DepartmentDesc/netSales)"/>
        <br/>
          <!--          <fo:block font-size="9pt" space-after="3mm" break-before="page">-->
            <xsl:for-each select="DepartmentSalesReport/DepartmentDesc">
                    <fo:block font-size="9pt" space-after="1mm">
                    <fo:table table-layout="fixed" >
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.8cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                    <fo:table-body>
                        <xsl:variable name="levelNo"><xsl:value-of select="levelNbr"/></xsl:variable>
                                <xsl:variable name="levelCheck"><xsl:value-of select="level"/></xsl:variable>
                                <xsl:if test="$levelCheck!=''">
                                    <xsl:if test="$levelNo='2'">
                                    <fo:table-row>  
                                    <fo:table-cell number-columns-spanned="9">
                                    <fo:block>
                                           <xsl:text>&#160;</xsl:text>
                                    </fo:block>
                                    </fo:table-cell>
                                    </fo:table-row>
                                </xsl:if>
                     <fo:table-row >
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:value-of select="level"/>
                                            </fo:block>
                                        </fo:table-cell>

                                        <xsl:choose>
                                        <xsl:when test="$levelNo!='2'">
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:value-of select="prgpName"/>
                                            </fo:block>
                                        </fo:table-cell>
                                            </xsl:when>
                                        <xsl:otherwise>
                                            <fo:table-cell>
                                                <fo:block text-align="left">
                                                    ***DEPT TOTAL*** </fo:block>
                                            </fo:table-cell>
                                        </xsl:otherwise>
                                            </xsl:choose>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(netSales,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(prodCount,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>

                                        <fo:table-cell>
                                            <xsl:variable name="salesPercentage"><xsl:value-of select="format-number((netSales div $storeSales)*100, '###,##0')"/></xsl:variable>
                                            <xsl:if test="$salesPercentage='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$salesPercentage!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$salesPercentage"/>
                                            </fo:block>
                                            </xsl:if>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(postVoidQuantity,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(postVoidAmount,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(returnQuantity,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(returnAmount,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                    </fo:table-row>
                        <xsl:if test="$levelNo='2'">
                                    <fo:table-row>  
                                    <fo:table-cell number-columns-spanned="9">
                                    <fo:block>
                                           <xsl:text>&#160;</xsl:text>
                                    </fo:block>
                                    </fo:table-cell>
                                    </fo:table-row>
                                </xsl:if>
                                    </xsl:if>
                    </fo:table-body>

                  </fo:table>
                </fo:block>
            </xsl:for-each>

            <fo:block border-bottom-style="solid" text-align="left"
                font-size="9pt" space-before="3mm" />
            <fo:block font-size="9pt" space-after="4mm">

                <fo:table>
                    <fo:table-column column-width="1.5cm" />
                    <fo:table-column column-width="4.5cm" />
                    <fo:table-column column-width="3.3cm" />

                    <fo:table-header>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block font-weight="bold"></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block text-align="left" space-after="4mm"
                                    space-before="3mm" font-weight="bold">
                                    <xsl:text>DEPARTMENT TOTALS</xsl:text>
                                </fo:block>
                            </fo:table-cell>

                        </fo:table-row>
                    </fo:table-header>

                    <fo:table-body>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold">
                                    <xsl:text>SS SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right">
                                    <xsl:variable name="ssSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/ssSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$ssSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$ssSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$ssSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold">
                                    <xsl:text>CIGARETTE SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block text-align="right" font-weight="bold">
                                <xsl:variable name="cigeratteSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/cigeratteSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$cigeratteSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$cigeratteSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$cigeratteSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block space-after="1.5mm" font-weight="bold">
                                    <xsl:text>LIQUOR SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right"
                                    space-after="4mm">
                                    <xsl:variable name="liquorSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/liquorSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$liquorSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$liquorSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$liquorSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:block></fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" space-after="8mm">
                                    <xsl:text>TOTAL FRONT END SALES</xsl:text>
                                </fo:block>
                            </fo:table-cell>
                            <fo:table-cell>
                                <fo:block font-weight="bold" text-align="right"
                                    space-after="4mm">
                                    <xsl:variable name="totalSales"><xsl:value-of select="format-number(DepartmentSalesReport/DepartmentTotals/totalSales,'0.00')"/></xsl:variable>
                                            <xsl:if test="$totalSales='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$totalSales!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$totalSales"/>
                                            </fo:block>
                                            </xsl:if>
                                </fo:block>
                            </fo:table-cell>
                        </fo:table-row>

                    </fo:table-body>

                </fo:table>

            </fo:block> 

              <fo:block space-before="5mm" text-align="center" font-size="9pt" font-weight="bold" id="terminator">
                 <xsl:text></xsl:text>
          </fo:block>

        </fo:flow>

      </fo:page-sequence>
    </fo:root>
  </xsl:template>

</xsl:stylesheet> 
```

而xml是..

```
<?xml version="1.0" encoding="UTF-8"?>
<Report Name="DepartmentSalesReport" Title="Department Sales Report"
    Description="Department Sales Report" Version="1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <InitParam Name="tradingdate" Type="java.lang.String" />
      <InitParam Name="tradingday" Type="java.lang.String" />
      <ReportBand BandType="HeaderBand" Name="DepartmentSalesReportBand">
        <ReportElement Type="Header" DataSource="OutletSQL">
        <DataField Name="store_code" Type="Data" FieldName="ORGU_CODE" />
        </ReportElement>
        <ReportElement Type="Header" DataSource="InitParams">
        <DataField Name="tradingdate" Type="Data" FieldName="tradingdate" />
        </ReportElement>
        <ReportElement Type="Header" DataSource="InitParams">
        <DataField Name="tradingday" Type="Data" FieldName="tradingday" />
        </ReportElement>
    </ReportBand>
    <ReportBand BandType="DetailBand" Name="Terminal">
        <ReportElement Type="Detail" Name="DepartmentDesc" DataSource="DataSql">
            <DataField Name="level" Type="Data" FieldName="LEVEL"/>
            <DataField Name="levelNbr" Type="Data" FieldName="LEVELNBR"/>
            <DataField Name="prgpName" Type="Data" FieldName="PRGP_NAME"/>
            <DataField Name="prodCount" Type="Data" FieldName="PROD_COUNT"/>
            <DataField Name="netSales" Type="Data" FieldName="NET_SALES"/>
            <DataField Name="postVoidQuantity" Type="Data" FieldName="POST_VOID_QUANTITY"/>
            <DataField Name="postVoidAmount" Type="Data" FieldName="POST_VOID_AMOUNT"/>
            <DataField Name="returnQuantity" Type="Data" FieldName="RETURN_QUANTITY"/>
            <DataField Name="returnAmount" Type="Data" FieldName="RETURN_AMOUNT"/>  

        </ReportElement>
        <ReportElement Type="Detail" Name="DepartmentTotals" DataSource="TotalsDataSql" MaxResults="1">
            <DataField Name="ssSales" Type="Data" FieldName="LINE_NUM_50"/>
            <DataField Name="cigeratteSales" Type="Data" FieldName="LINE_NUM_30"/>
            <DataField Name="liquorSales" Type="Data" FieldName="LINE_NUM_60"/>
            <DataField Name="totalSales" Type="Data" FieldName="TOTAL_FRONT_END_SALES"/>
        </ReportElement>

        <ReportElement Type="Header" DataSource="DateSQL">
            <DataField Name="CurrentDate" Type="Data" FieldName="1" />
            <DataField Name="currentTime" Type="Data" FieldName="2" />
        </ReportElement>
    </ReportBand>
    <DataSource
        Type="walgreens.pos.maintenance.eod.CurrentDepartmentSalesReportDataSource"
        Name="DataSql"
        Statement="">
    </DataSource>
    <DataSource
        Type="walgreens.pos.maintenance.eod.DepartmentTotalsReportDataSource"
        Name="TotalsDataSql"
        Statement="">
    </DataSource>
    <DataSource
        Type="com.pcmsgroup.v21.star.framework.application.reports.SpringReadOnlySQLStatement"
        Name="OutletSQL"
        Statement="select ORGU_CODE,OUTL_TRADE_DATE from outlet,org_unit where outlet.OUTL_ID = org_unit.OUTL_ID">
    </DataSource>

    <DataSource
        Type="com.pcmsgroup.v21.star.framework.application.reports.SpringReadOnlySQLStatement"
        Name="DateSQL"
        Statement="SELECT current date,current time FROM sysibm.sysdummy1">
    </DataSource>

</Report> 
```

现在问题来了，当报告从一页增加到第二页或更多时，如下所示标题部门总数也会打印在下一页上，这不应该如下所示。

![图片 2](../Images/22f19ac672409bcb13c1a8590fc38f42.png) 请告知需要在 xsl 中为此进行哪些更改，以免它出现在第二页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:28:28.853

你需要给分页符。请在此处参考几个示例如何[使用 XSL-FO 进行分页符和表格](http://www.ibm.com/developerworks/xml/library/x-tippgbk/index.html)

你可以试试这个：

```
<fo:block keep-with-next="always" text-align="left" space-after="4mm"
                                space-before="3mm" font-weight="bold">
     <xsl:text>DEPARTMENT TOTALS</xsl:text>
</fo:block> 
```

这将使表格保持在单页中。

# windows-phone-7 - 块软面板输入语言切换

> ID：13383682
> 
> 赞同：0
> 
> 时间：2012-11-14T17:09:31.737
> 
> 标签：windows-phone-7, on-screen-keyboard

如何让屏幕键盘只使用英语，即使设置选择了英语以外的其他语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:02:31.867

抱歉，您无法在 WP7 上更改代码中的键盘语言。

*更新*

我对从应用程序线程中提取当前语言（Locale）进行了一些研究，并提出了这篇关于代码中应用程序内语言选择的帖子。这看起来像是为本地化文本而设计的，但是，我有预感键盘语言会效仿。祝你好运！

[http://dotnetbyexample.blogspot.com/2011/07/mvvmlight-based-language-selection-for.html](http://dotnetbyexample.blogspot.com/2011/07/mvvmlight-based-language-selection-for.html)

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo(CurrentLanguage.Locale);
      Thread.CurrentThread.CurrentCulture = Thread.CurrentThread.CurrentUICulture; 
```

# c++ - 在 C++ 中恢复临时赋值

> ID：13383683
> 
> 赞同：4
> 
> 时间：2012-11-14T17:09:42.157
> 
> 标签：c++, variable-assignment

在访问者上下文中，我需要在访问孩子之前临时设置一个变量，然后再恢复该变量。我正在使用以下代码，但我确信有一种更优雅和正确的方法可以做到这一点：

```
template <typename TYPE> class TemporaryAssignment {
protected:
    TYPE& mVariable;
    TYPE mOriginalValue;
public:
    TemporaryAssignment(TYPE& inVariable, TYPE inValue) 
        : mVariable(inVariable), mOriginalValue(inVariable) {
        mVariable = inValue;
    }
    ~TemporaryAssignment(void) {
        mVariable = mOriginalValue;
    }
}; 
```

这使我可以编写如下内容：

```
{
    ...
    TemporaryAssignment<string> t(myVariable, myTemporaryValue);
    visitChildren();
    ...
}
// previous value of myVariable is restored 
```

当临时赋值对象超出范围时，该变量将恢复为之前的值。有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:13:18.750

对我来说看起来不错，除了析构函数可以抛出，这很糟糕。`swap`使用原始值而不是分配（编辑：这涉及`std::string`，但请参阅评论以了解用户友好度低于 的类可能存在的问题`string`）。

如果您从这部分代码中退后一点，也许您可​​以找到一种根本不需要设置临时值的方法。对象中的共享可变状态可能很糟糕，原因与可变全局变量不好的原因相同，但程度较轻，因为它只会弄乱您的类而不是弄乱整个程序。

例如，也许您可​​以复制整个对象，为变量设置一个新值并访问副本而不是访问您自己。显然，这不一定是可能的或有效的，您必须根据具体情况寻找替代方案。就孩子而言，也许副本可能很浅（即引用相同的子对象），这可能足以使其便宜。

关于用法，您可以推断出这样的类型（未经测试的代码）：

```
template <typename T, typename ARG>
TemporaryAssignment<T> temp_value(T &var, ARG &&newvalue) {
    return TemporaryAssignment(var, std::forward<ARG>(newValue));
} 
```

用法：

```
auto t = temp_value(myVariable, myTemporaryValue); 
```

然后你需要一个 TemporaryAssignment 的移动构造函数：

```
template <typename TYPE> class TemporaryAssignment {
    // change data member
    TYPE *mVariable;
    TYPE mOriginalValue;
public:
    TemporaryAssignment(TYPE &inVariable, TYPE inValue) 
    : mVariable(&inVariable), mOriginalValue(std::move(inVariable)) {
        *mVariable = std::move(inValue);
    }
    TemporaryAssignment(TemporaryAssignment &&rhs) {
        mOriginalValue = std::move(rhs.mOriginalValue);
        mVariable = rhs.mVariable;
        rhs.mVariable = 0;
    }
    ~TypeAssignment() {
        using std::swap;
        if (mVariable) {
            swap(*mVariable, mOriginalValue);
        }
    }
    // can't remember whether this is needed
    TemporaryAssignment(const TemporaryAssignment &) = delete;
    TemporaryAssignment &operator=(const TemporaryAssignment &) = delete;
    TemporaryAssignment &operator=(TemporaryAssignment &&) = delete;
}; 
```

我想了一些关于指定`operator=`for`TemporaryAssignment`以使用法看起来像一个作业，但我没有想出任何好的东西。

```
auto t = (temporary(myVariable) = myTemporaryValue); 
```

`TemporaryAssignment`是合理的，但您可能不想`operator=`定义，因为以下含义：

```
t = otherTemporaryValue; 
```

不一定清楚，可能不应该被允许。也许有第二个类要从返回`temporary`，并且`TemporaryAssignment`从它返回`operator=`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T07:53:05.547

`swap`不是最好的解决方案，因为如果`TYPE`有一个`std::string`成员，崩溃问题也可能发生。我认为我们可以使用这样的一些方法：

```
char buffer[sizeof(TYPE)];
memcpy(buffer, &mVariable, sizeof(TYPE));
memcpy(&mVariable, &mOriginalValue, sizeof(TYPE));
memcpy(&mOriginalValue, buffer, sizeof(TYPE)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:18:57.020

补充史蒂夫杰索普的答案。从 RIIA（或 RAII）的角度来看，您的类的析构函数最终可能会在它应该只释放资源的地方获取资源（内存）。为避免这种情况，您可能会考虑使用 myVar 在正确的时间指向正确的对象，因此只能在构造或获取时正确创建新对象，并且只会在发布时发生删除和指针重新分配.

# python - 是否可以在 Python 中使用在 matlab 中生成的 svm_model？

> ID：13383684
> 
> 赞同：0
> 
> 时间：2012-11-14T17:09:43.127
> 
> 标签：python, matlab, libsvm

是否可以在 Python 中使用在 matlab 中生成的 svm_model？（我使用 libsvm）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:26:27.927

通常你只需调用 libsvm 中的一个方法来将你的模型保存到一个文件中。然后，您可以使用他们的 svm.py 在 Python 中使用它。所以是的，你可以 - 它都以 libsvm 格式保存。

# objective-c - iOS6 中的 iOS 自定义电子邮件附件处理

> ID：13383685
> 
> 赞同：2
> 
> 时间：2012-11-14T17:09:43.580
> 
> 标签：objective-c, ios, ios6

我的应用程序允许将带有或不带有图像和音频的文本文件通过电子邮件发送给其他用户。当没有图像或音频时，应用程序会“按原样”发送带有自定义扩展名（例如 text.xxx）的文本文件。当有音频和图像时，应用程序会将文本文件与图像和音频一起压缩到一个名为 text.xxx.zip 的文件中。

在 iOS 6 之前，这工作得很好。在 iOS 6 之前，应用程序被赋予了 text.xxx.zip 文件的 URL。现在，在 iOS 6 中，该文件似乎已被 Mail 解压缩，并且只有 text.xxx 被发送到 openURL 处理程序。

有没有人有这方面的经验？对更好方法的建议？我想我需要为拉链箱想出一个独特的扩展......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:59:43.483

因此，在过去 24 小时左右我对此进行了猛烈抨击之后，这就是“解决”问题的方法：

1) 将任何现有的附件文件名从 test.xxx.zip 更改为 test.zip。看起来 iOS6 Mail 假设任何形式的文件名.xxx.zip 都只是文件名.xxx 的压缩版本。（也许这是某个地方的标准？）还指出，如果我将文件名更改为 test.yyy.zip，它会说它无法打开附件。（大概是因为没有人注册“.yyy”扩展名）。

2) 重写代码，以后不再使用 .zip 扩展名，以防止出现类似问题。

我还发现，对于多种文档类型（例如，.xxx、.zzz），您必须在 UTI 声明中为每种类型指定不同的 mime 类型 - 否则 Mail 会将它找到的第一个 UTI 扩展附加到对象，然后调用 openURL。因此，换句话说，如果您设置为处理平面文件 (.xxx) 和 zip 文件 (.zzz)，但您使用相同的 mime 类型（例如 application/myappname）并且首先定义“xxx” ，当为您的文件“test.zzz”调用 openURL 时，它实际上会将其作为“test.xxx”传递给 openURL。

# drupal - 主题欧米茄 3 - 区域的使用

> ID：13383687
> 
> 赞同：0
> 
> 时间：2012-11-14T17:09:46.620
> 
> 标签：drupal, drupal-7, drupal-theming

你熟悉 Omega 3 的主题吗？我刚刚创建了一个子主题，并在适合我的内容类型的页面上配置了我需要的区域。

我加入了两个区域，在其中我想要从我的内容类型中使用 php 获取的内容。

![在此处输入图像描述](../Images/1755294956f7f9ad189c4b7a1b30935e.png)

但在这一点上，我陷入了困境。与其他主题一样，我在 div 块内使用单个页面 .tpl.php 来控制布局现在如何打破不同区域中内容类型的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:03:00.453

查看显示套件。您可以将内容类型的不同部分安排到不同的主题区域中。

[http://drupal.org/project/ds](http://drupal.org/project/ds)

# c++ - 拉盖尔插值算法，我的实现有问题

> ID：13383688
> 
> 赞同：0
> 
> 时间：2012-11-14T17:09:47.830
> 
> 标签：c++, math, polynomial-math

这是一个我已经苦苦挣扎了一周的问题，回来只是为了在浪费时间后放弃......

我应该找到以下拉盖尔多项式的系数：

```
P0(x) = 1

P1(x) = 1 - x

Pn(x) = ((2n - 1 - x) / n) * P(n-1) - ((n - 1) / n) * P(n-2) 
```

我相信我的实现存在错误，因为由于某种原因，我得到的系数似乎太大了。这是该程序生成的输出：

```
a1 = -190.234
a2 = -295.833
a3 = 378.283
a4 = -939.537
a5 = 774.861
a6 = -400.612 
```

代码说明（如下所示）：

如果您将代码向下滚动到我声明数组的部分，您会发现给定的 x 和 y。

函数多项式只是用特定 x 的所述多项式的值填充数组。这是一个递归函数。我相信它运作良好，因为我已经检查了输出值。

高斯函数通过对输出数组执行高斯消元来找到系数。我认为这是问题开始的地方。我想知道，如果这段代码有错误，或者我的验证结果的方法不好？我正在尝试这样验证它们：

```
-190.234 * 1.5 ^ 5 - 295.833 * 1.5 ^ 4 ... - 400.612 = -3017,817625 =/= 2 
```

代码：

```
#include "stdafx.h"
#include <conio.h>
#include <iostream>
#include <iomanip>
#include <math.h>

using namespace std;

double polynomial(int i, int j, double **tab)
{
    double n = i;
    double **array = tab;
    double x = array[j][0];

    if (i == 0) {
        return 1;
    } else if (i == 1) {
        return 1 - x;
    } else {
        double minusone = polynomial(i - 1, j, array);
        double minustwo = polynomial(i - 2, j, array);
        double result = (((2.0 * n) - 1 - x) / n) * minusone - ((n - 1.0) / n) * minustwo;
        return result;
    }
}

int gauss(int n, double tab[6][7], double results[7])
{
    double multiplier, divider;

    for (int m = 0; m <= n; m++)
    {
        for (int i = m + 1; i <= n; i++)
        {
            multiplier = tab[i][m]; 
            divider = tab[m][m];

            if (divider == 0) {
                return 1;
            }

            for (int j = m; j <= n; j++)
            {
                if (i == n) {
                    break;
                }

                tab[i][j] = (tab[m][j] * multiplier / divider) - tab[i][j];
            }

            for (int j = m; j <= n; j++) {
                tab[i - 1][j] = tab[i - 1][j] / divider;
            }
        }
    }

    double s = 0;
    results[n - 1] = tab[n - 1][n];
    int y = 0;
    for (int i = n-2; i >= 0; i--)
    {
        s = 0;
        y++;
        for (int x = 0; x < n; x++)
        {
            s = s + (tab[i][n - 1 - x] * results[n-(x + 1)]); 

            if (y == x + 1) { 
                break;
            }
        }
        results[i] = tab[i][n] - s;
    }

}

int _tmain(int argc, _TCHAR* argv[])
{
    int num;
    double **array;

    array = new double*[5];
    for (int i = 0; i <= 5; i++)
    {
        array[i] = new double[2];
    }
                         //i         0      1       2       3       4       5
    array[0][0] = 1.5;  //xi         1.5    2       2.5     3.5     3.8     4.1
    array[0][1] = 2;    //yi         2      5       -1      0.5     3       7
    array[1][0] = 2;
    array[1][1] = 5;
    array[2][0] = 2.5;
    array[2][1] = -1;
    array[3][0] = 3.5;
    array[3][1] = 0.5;
    array[4][0] = 3.8;
    array[4][1] = 3;
    array[5][0] = 4.1;
    array[5][1] = 7;

    double W[6][7]; //n + 1

    for (int i = 0; i <= 5; i++)
    {
        for (int j = 0; j <= 5; j++)
        {
            W[i][j] = polynomial(j, i, array);
        }
        W[i][6] = array[i][1];
    }

    for (int i = 0; i <= 5; i++)
    {
        for (int j = 0; j <= 6; j++)
        {
            cout << W[i][j] << "\t";
        }
        cout << endl;
    }

    double results[6];
    gauss(6, W, results);

    for (int i = 0; i < 6; i++) {
        cout << "a" << i + 1 << " = " << results[i] << endl;
    }

    _getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:35:20.310

我相信您对递归多项式生成的解释要么需要修改，要么对我来说有点太聪明了。

给定 P[0][5] = {1,0,0,0,0,...}; P[1][5]={1,-1,0,0,0,...};
那么 P[2] 就是 a*P[0] + 卷积(P[1], { c, d });
其中 a = -((n - 1) / n) c = (2n - 1)/n 和 d= - 1/n

这可以概括为： P[n] == a*P[n-2] + conv(P[n-1], { c,d }); 在每一步中，都涉及与 (c + d*x) 的多项式乘法，这会将次数增加一（仅增加一...）并添加到与标量 a 相乘的 P[n-1]。

那么插值因子 x 很可能在 [0..1] 范围内。

（卷积意味着你应该实现多项式乘法，幸运的是这很容易......）

```
 [a,b,c,d]
                * [e,f]
        ------------------
           af,bf,cf,df  +
        ae,be,ce,de, 0  +
--------------------------
 (= coefficients of the final polynomial) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:16:23.970

的定义`P1(x) = x - 1`未按所述执行。你`1 - x`在计算中。

我没有再看下去。

# java - 对于使用二维数组的每个循环

> ID：13383692
> 
> 赞同：14
> 
> 时间：2012-11-14T17:09:56.587
> 
> 标签：java, arrays, foreach

这是Java代码片段：

```
int[][] uu = new int[1][1];
uu[0][0] = 5;
for(int[] u: uu){
    System.out.println(u[0]);
} 
```

它打印 5。但是为什么声明了 for 循环的声明部分`as int[] u`，但没有声明`as int[][] u`？

在 uu 中，您引用 2D 数组...这不是功课。我正在准备 Java 认证。干杯

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-14T17:11:53.010

因为你`uu`是一个`array of array`. 因此，当您迭代它时，您将首先获得一个`array`，然后您可以迭代该数组以获取单个元素。

因此，您的外部循环具有`int[]`as 类型，因此具有该声明。如果您`u`在另一个内部循环中迭代，您将获得类型`int`：-

```
for (int[] u: uu) {
    for (int elem: u) {
        // Your individual element
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T17:11:48.273

这是因为`uu`是一个数组`int[]`数组。所以里面的每一项都是`int[]`。在`for`循环中，您声明您迭代的数组中项目的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T17:11:38.270

循环在 的元素上进行迭代，这些元素是`uu`类型的对象`int[]`。（或者换句话说 -`u`是 中的一个元素`uu`，因此它是一个`int[]`）。

声明始终是迭代检索到的对象的类型 - 在这种情况下 - 它是`int[]`-

与迭代 an 相同的`int[]`是：

```
 for (int x : myArray) { ...} 
```

因为 的每个元素`x`都是 type `int`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:42:11.390

*“为什么for循环的声明部分被声明为int [] u，而不是int [] [] u？”*

该数组是二维的，因此您正在处理双层迭代。您在另一个“内部”有一个数组，其原理与`List<List<Integer>>`工作原理相同。

要遍历所有元素，您应该考虑行元素结构。有必要从容器中获取每一行，然后从每一行中获取每个元素。

`for(int[] u: uu)`只是一个for-each 迭代rows，具有相同的原理`for(int row = 0; row < container.length; row++)`，and `u`or 分别`container[row]`不是元素本身，而是元素的行（数组）。这意味着您需要第二个迭代层来获取元素：

```
int[][] container = new int[10][10];
//... - Fill elements.
for(int row = 0; row < container.length; row++){
  for(int element = 0; element < container[row].length; element++){
    System.out.printf("Row: %d Element: %d Value: %d\n", row, element, container[row][element]);
  }
} 
```

# ruby - 带有行 ID 的 Sequel Migration 更新

> ID：13383694
> 
> 赞同：0
> 
> 时间：2012-11-14T17:09:59.737
> 
> 标签：ruby, migration, sequel

如何运行 Sequel 迁移，使用行中的值更新新添加的列？

Sequel 文档显示了如何使用静态值更新列：

`self[:artists].update(:location=>'Sacramento')`

我需要做的是使用 ID 列的值更新新列：

就像是：

```
self[:artists].each |artist| do
  artist.update(:location => artist[:id])
end 
```

但上述方法不起作用，我一直无法弄清楚如何让它去。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:50:00.537

`artist`在你的循环中是 a `Hash`，所以你正在调用`Hash#update`，它只是更新`Hash`实例，它不会修改数据库。这就是为什么您的循环似乎没有做任何事情的原因。

我可以解释如何使循环工作（使用`all`而不是`each`更新限制为匹配主键值的数据集），但是由于您只是将一列的值分配给所有行的另一列的值，因此您可以做：

```
self[:artists].update(:location=>:id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T22:35:09.330

如果您需要更新表的所有行，因为它是需要填充的新列

```
artists = DB[:artists]
artists.update(:column_name => 'new value') 
```

或者，如果需要，仅将唯一行更新到迁移文件中，您可以：

```
artists = DB[:artists]
artists.where(:id => 1).update(:column_name1 => 'new value1', :column_name2 => "other") 
```

# mysql - 如何显示 MySQL 数据库中每月的记录数（包括零）？

> ID：13383696
> 
> 赞同：0
> 
> 时间：2012-11-14T17:10:15.937
> 
> 标签：mysql, sql, count

根据以下评论于 2012 年 11 月 24 日修订。

我有一个成员的 MySQL 数据库（v5.0.95），其中列出了他们加入的时间

```
CREATE TABLE IF NOT EXISTS `members` (
  `id` int(11) NOT NULL,
  `group_id` int(11) NOT NULL,
  `name` varchar(64) NOT NULL,
  `joined` datetime NOT NULL,
  KEY `id` (`id`),
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我还有第二个表，其中包含指示哪个 YYYY-MM 的记录

```
CREATE TABLE IF NOT EXISTS `blocker` (
    `group_id` int(11) NOT NULL,
    `YYYYMM` char(7) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

理想情况下，以下联接将提供以下内容

```
 SELECT date_format( m.joined, '%Y-%m' ) AS DateJoined, count( * ) AS NumJoined 
  FROM members AS m
  LEFT OUTER JOIN blocker AS b
  ON b.YYYYMM = date_format( m.joined, '%Y-%m')
  WHERE m.group_id =1637017 AND b.group_id =1637017
  GROUP BY DateJoined
  ORDER BY DateJoined ASC 
```

会给我这个

```
DateJoined  NumJoined 
2012-01     0
2012-02     0
2012-03     0
2012-04     17
2012-05     0
2012-06     12
2012-07     10
2012-08     10
2012-09     11
2012-10     14
2012-11     4 
```

不幸的是，它没有提供零结果月份，而是给了我这个

```
DateJoined  NumJoined 
2012-04     17
2012-06     12
2012-07     10
2012-08     10
2012-09     11
2012-10     14
2012-11     4 
```

任何指针将不胜感激。我接近了吗……？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:12:08.183

sql 数据库无法为您生成不存在的数据。如果在某个特定月份没有人加入，你就不能让它神奇地从无到有产生那个月。

如果你想强制它，你必须有一个临时表，其中列出了你想要的范围内的各个月份，然后你可以加入该临时表并获得你的 0 计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:14:02.967

您可以创建年/月表并使用左联接到成员表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:19:29.323

创建另一个表（可以命名为 dateCalender）存储每个月的值，如下所示：

```
2012-01
2012-02
2012-03
2012-04
2012-05
2012-06
2012-07
2012-08
2012-09
2012-10
2012-11 
```

现在使用这个新表与原始表的左外连接来检索结果，对于具有有效值的月份将返回值，对于没有任何值的月份，它将返回 Null（可以表示为 0）

# asp.net - 防止 jQueryui css 使包含的元素变大

> ID：13383698
> 
> 赞同：0
> 
> 时间：2012-11-14T17:10:27.557
> 
> 标签：asp.net, jquery-ui

我使用典型的方法来使用 jQuery UI 创建选项卡，通过如下包装 asp.net 用户控件 -

```
<div id="tabs">
    <ul>
        <li><a href="#tab1">Schools</a></li>
        <li><a href="#tab2">Colleges</a></li>
    </ul>
    <div id="tab1">
        <uc:schools id="ucSchools" runat="server" />
    </div>
    <div id="tab2">
        <uc:colleges id="ucColleges" runat="server" />
    </div>
</div> 
```

选项卡很棒，但包括 jQueyui.css。使我的用户控件的所有内容比平时更大。

```
<link href="jquery-ui.css" rel="stylesheet" type="text/css" /> 
```

我在 jqueryui.css 中没有看到与我们的样式表有任何名称冲突。

如果您遇到此问题，请建议如何调整 css 以保持包含 div size `intact`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:13:48.967

无论`class`您想要拥有第一优先权还是优先权，那么您应该使用`!important`

## 例子：

```
div { 
   color: #ff0000 !important; 
} 
```

## 更新：

除了`!important`，另一种方式是“在页面上的 jquery-ui 样式表链接之后呈现链接标签。因此您的文件优先并适用于页面”。

## 例子：

```
<link href="jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css" /> 
```

# javascript - Jquery .datepicker() - 在动态表上

> ID：13383711
> 
> 赞同：1
> 
> 时间：2012-11-14T17:11:30.220
> 
> 标签：javascript, jquery, datepicker

我正在尝试创建一个动态表，每行包含两个日期字段。我正在使用 Jquery 日期选择器。由于某种原因，日期选择器日历中仅显示第一行。其他动态创建的字段不显示日历。我应该提一下，加载此页面时，默认情况下第一行就位。仅从第二行开始，它是动态创建的。所有解决方案都说我应该重新初始化 .datepicker()。我做到了，但它不起作用。我尝试更改名称和 ID 仍然没有解决方案。有什么我在这里想念的吗。下面是用于此目的的代码。

是的，我知道这个网站上有几个与此相关的问题。但是有些我无法找到解决方案，因为它们不适合我。

Javascript：

```
$("#addurl").click(function(){
var idValue = "input[id='breachCount']";
var counter = $(idValue).val();
var trValue = $("#rowPH"+counter).html();
var countNew = parseInt(counter)+1;
$(idValue).val(countNew);
var newFile = "<tr id='rowPH"+countNew+"'>"+trValue+"</tr>";
$(newFile).insertBefore("#addLink");
var nameTemp, actNm;
var dcounter=0;
$('#rowPH'+countNew+' input').each(function(){
    nameTemp = $(this).attr("name");
    if(nameTemp){
        actNm = nameTemp.substring(nameTemp.indexOf("."));
  $(this).attr("name","breachList["+countNew+"]"+actNm+countNew);
    }
    });
$('.datepicker').each(function(i) {
            this.id = 'datepicker' + i;
    }).datepicker();                
}); 
```

html:

```
<table>.....
<tr id="rowPH0">
<td>
<input type="checkbox" checked="checked">
</td>
<td>
<input class="text_box_2 div_center" type="text" value="" name="breachList[0].breachText">
</td>
<td>
<input id="datepicker0" class="datepicker date_txt hasDatepicker" type="text" value="" name="breachList[0].activationDt"><img class="calendar" src="assets/images/calendar_icon.png">
</td>
<td>
   <input id="datepicker1" class="datepicker date_txt hasDatepicker" type="text" value=""  name="breachList[0].deactivationDt">
   <input type="checkbox" name="breachList[0].deactiveNa" checked="checked">
</td>
<td>
   <input class="text_box_2" type="text" value="" name="breachList[0].note">
</td>
</tr>
</tbody>
<tbody>
<tr id="rowPH1">
<td>
    <input type="checkbox" checked="checked">
</td>
<td>
    <input class="text_box_2 div_center" type="text" value="" name="breachList[1].breachText1">
</td>
<td>
  <input id="datepicker2" class="datepicker date_txt hasDatepicker" type="text" value="" name="breachList[1].activationDt1">
    <img class="calendar" src="assets/images/calendar_icon.png">
</td>
<td>
     <input id="datepicker3" class="datepicker date_txt hasDatepicker" type="text" value="" name="breachList[1].deactivationDt1">
    <input type="checkbox" name="breachList[1].deactiveNa1" checked="checked">
</td>
<td>
</tr>
<tr id="addLink">
    <td colspan="5" ><a href="javascript:void(0);" id="addurl">+ Add another row</a>
     <input type="hidden" id="breachCount" value="${fn:length(auditStandardBreachsForm.breachList)-1}"/>
</td></tr>
...</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:20:02.830

不必为每个字段分配唯一的 ID。Datepicker 可以唯一地识别每个。尝试将以下代码放入您的 js 中。

```
$('.datepicker').each(function(){
    $(this).datepicker();
}); 
```

我已经将它用于多个领域。

****更新****

我读了你的js代码，它搞砸了。您要做的就是（根据您所说的）是当用户单击**Add Another Link**时，您想在表中添加一个新行并希望他们能够使用 jQuery datepicker。对？

上面的代码不起作用的原因是，在这种情况下，文本字段正在被动态添加。虽然`datepciker`在`onDocumentReady`. 因此 datepicker 不能将自己附加到这些新创建的表单字段。一种解决方案是在创建新字段本身时附加日期选择器。

这是我为您想要实现的目标准备的工作模型。请参阅[http://jsfiddle.net/phazorrise/bRE6q/上的演示](http://jsfiddle.net/phazorrise/bRE6q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:31:23.140

这是我更新的代码

Javascript 在上面的javascript底部修改

```
var nameTemp, actNm;
$('#rowPH'+countNew+' input').each(function(){
    nameTemp = $(this).attr("name");
    if(nameTemp){
      actNm = nameTemp.substring(nameTemp.indexOf("."));
      $(this).attr("name","breachList["+countNew+"]"+actNm);
      $(this).attr("id","breachList["+countNew+"]"+actNm+countNew); //added 
    }
});
$('.datepicker').each(function(i) {
    $(this).removeClass('hasDatepicker').datepicker(); //changed ref: phazor comment
 }); 
```

# ruby-on-rails - 生成设计视图时如何禁用 simple_form

> ID：13383712
> 
> 赞同：1
> 
> 时间：2012-11-14T17:11:30.010
> 
> 标签：ruby-on-rails, internationalization, devise, simple-form

对于我的 rails 3 应用程序，我正在使用 simple_form 并进行设计。因为我需要自定义我运行的设计视图

```
rails generate devise:views 
```

视图中生成的表单当然是 simple_form 表单。

这破坏了 i18n 的功能，因为 simple_form 使用 simple_form 键而不是设计键来查找翻译。例如：

```
I18N keys: [:it, :simple_form, :placeholders, :user, :edit, :email]
I18N keys: [:it, :simple_form, :placeholders, :user, :email]
I18N keys: [:it, :simple_form, :placeholders, :defaults, :edit, :email]
I18N keys: [:it, :simple_form, :placeholders, :defaults, :email]
I18N keys: [:it, :simple_form, :labels, :user, :edit, :email]
I18N keys: [:it, :simple_form, :labels, :user, :email]
I18N keys: [:it, :simple_form, :labels, :defaults, :edit, :email] 
```

我想在生成设计视图时禁用 simple_form，以便我可以利用预格式化的建议语言环境（https://github.com/plataformatec/devise/wiki/I18n）

你怎么能那样做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:57:03.403

使用 Devise I18n 视图重新生成您的视图：[https](https://github.com/mcasimir/devise-i18n-views) ://github.com/mcasimir/devise-i18n-views 。

这应该整理出翻译的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:38:46.120

我意识到该设计支持 i18n，但仅适用于 Flash 消息。Simple_form 也支持 i18n，但用于标签、提示和占位符

正如我在问题中所怀疑的那样，这两组翻译是脱节的，并且不会相互影响。所以在设计中使用 simple_form 没问题

最后，第三套翻译附带了 tigrish 提到的 gem。它们涉及视图中出现的短语和单词。正如我上面所说，我也想将它与 simple_form 一起使用，但我什至无法尝试它，因为我解释了对 tigrish 的回答的评论。

# vim - 匹配时突出显示整行

> ID：13383726
> 
> 赞同：2
> 
> 时间：2012-11-14T17:11:59.000
> 
> 标签：vim, line, match, highlight

有谁知道在搜索后是否有匹配项或匹配项时如何突出显示整行。

pe 我搜索 /user

现在，如果有匹配项，我想突出显示整行。

**编辑**
我想在搜索突出显示中使用突出显示。
我不想使用突出显示组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T18:49:52.673

突出显示行的替代方法可能是使用`quickfix`列表。例如，执行以下操作会将与模式匹配的所有行`/user/`放入当前文件 ( `%`) 的快速修复列表中。

```
:vimgrep /user/ % 
```

您可以通过执行在单独的窗口中显示`quickfix`列表的内容`:copen`。`:cnext`您可以通过、`:cprev`和 朋友在匹配的行之间移动。我个人推荐 Tim Pope 的优秀[unimpaired.vim](https://github.com/tpope/vim-unimpaired)插件，以提供一些相当漂亮和自然的感觉映射，例如`[q`并`]q`在`quickfix`列表中移动。您还可以添加一个`g`标志来查找每行的多个匹配项并将它们也添加到`quickfix`列表中。

您可能希望映射到此 `vimgrep`命令以使其更快一些。我个人在我的`~/.vimrc`

```
nnoremap <leader>/ :vimgrep/<c-r>//g %<cr>:copen<cr> 
```

使用`:vimgrep`命令的一个缺点是它需要一个保存的文件，所以必须先保存未保存的缓冲区。您可以通过使用 和 的组合来克服这个问题`:global`，`:cgetexpr`如下所示。

```
:cexpr []
:g//caddexpr expand("%").":".line(".").":".getline(".") 
```

但是，也许您真的只想用匹配突出显示行而不是使用`quickfix`列表。我建议`:match`像这样使用

```
:match Search /.*user.*/ 
```

你可以使用任何你想要的高亮组。我选择`Search`它看起来合适。要关闭突出显示，只需在`:match`没有任何参数的情况下执行。

我个人更喜欢使用`:vimgrep`和`quickfix`列表，但您的需求可能与我的不同。

如需更多帮助，请参阅：

```
:h quickfix
:h :vimgrep
:h :cnext
:h :cexpr
:h :caddexpr
:h :match 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T07:48:56.810

如果你使用

```
:let @/ = '.*\%(' . @/ . '\m\).*' 
```

that should work for most regexp patterns (e.g. the bracketing takes care of `\|` branches). You could refine that to recognize `^` and `$`, and magic modifiers like `\V`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:26:30.463

我不知道这是否适合您：

首先你需要定义一个亮点`group`：例如`userline`

```
:highlight userline ctermbg=darkred guibg=darkred 
```

那么你可以：

```
:match userline /.*user.*/ 
```

所有包含“用户”的行都将突出显示。

# php - MHTML 文件头重定向显示带有 MIME 段的源代码

> ID：13383727
> 
> 赞同：7
> 
> 时间：2012-11-14T17:12:01.593
> 
> 标签：php, iframe, header, http-headers, mhtml

我在获取 iframe 以显示 MHT 文件时遇到问题：

```
if( strtolower( substr( $filename , -4 ) ) == ".mht" ){

    $filename = str_replace( "/" , "\\" , $filename );

    header("Content-type: $filetype");
    header("Content-Length: $filesize");
    header('Content-Disposition: attachment; filename="'.$title.'.mht"');

    readfile( HT_STORAGE . $filename );
}
else{
    $filename = str_replace( "\\" , "/" , $filename );
    header( "location: https://secure.***************.com/" . $filename );
} 
```

上述方法有效，但它需要我的客户不满意的两个步骤（下载和打开）。

如您所见，现在我只是强制浏览器打开 MHT 作为下载。我希望它使用标头位置重定向，以便它在此 iframe 中显示 MHT，就像它对没有 MHT 扩展名的文件一样。我假设这只是一个标头调用，它告诉浏览器它的 MHT 内容。使用常规重定向，浏览器只显示一堆 MHT 标记，没有实际内容（这就是我假设需要特殊标头的原因）。有任何想法吗？

**编辑：**

这是我发现的有关此问题的更多信息。MHT 文件包含几个如下所示的段：

```
From: "Saved by Windows Internet Explorer 9"
Subject: Print Preview
Date: Tue, 2 Aug 2011 12:06:51 -0500
MIME-Version: 1.0
Content-Type: multipart/related;
type="text/html";
boundary="----=_NextPart_000_0186_01CC510C.A9789090"
X-MimeOLE: Produced By Microsoft MimeOLE V6.1.7600.16807

This is a multi-part message in MIME format. 
```

和

```
------=_NextPart_000_0186_01CC510C.A9789090
Content-Type: application/octet-stream
Content-Transfer-Encoding: quoted-printable
Content-Location: https://*******.net/packages/js/jquery.header.js 
```

出于某种原因，如果我使用附件方法并“打开”文件，IE/Firefox 呈现文档没有问题。如果我使用标题“位置”方法，它只显示文件的内容（html 标记、mime 内容等），即解释的内容。这样做会显示原始 HTML 输出，而不是实际显示 MHT 页面：

```
if( strtolower( substr( $filename , -4 ) ) == ".mht" ){

    $filename = str_replace( "\\" , "/" , $filename );

header("Content-type: message/rfc822");
header( "location: " . $filename );
//header("Content-Length: $filesize");
//header('Content-Disposition: attachment; filename="'.$title.'.mht"');

//readfile( HT_STORAGE . $filename );
}
else{
$filename = str_replace( "\\" , "/" , $filename );
header( "location: https://secure.*****************.com/" . $filename );
} 
```

通过使用内容类型和位置，在 IE 和 FF（以及很可能所有其他浏览器）上的输出如下：

```
From: "Saved by Windows Internet Explorer 9"
Subject: Print Preview
Date: Tue, 2 Aug 2011 12:06:51 -0500
MIME-Version: 1.0
Content-Type: multipart/related;
    type="text/html";
    boundary="----=_NextPart_000_0186_01CC510C.A9789090"
X-MimeOLE: Produced By Microsoft MimeOLE V6.1.7600.16807

This is a multi-part message in MIME format.

------=_NextPart_000_0186_01CC510C.A9789090
Content-Type: text/html;
    charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Location: https://kinnser.net/am/printwrapper.cfm?PatientTaskKey=36184728

=EF=BB=BF<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" =
"http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" =
"http://www.w3.org/TR/html4/loose.dtd"><HTML><HEAD><TITLE>Print=20
Preview</TITLE>... 
```

因此，它并没有实际渲染 MHT，而是吐出所有标签和数据。

有任何想法吗？我是否必须从文件中删除“MIME”数据？：

```
------=_NextPart_000_0186_01CC510C.A9789090
    Content-Type: text/html;
        charset="utf-8"
    Content-Transfer-Encoding: quoted-printable
    Content-Location: https://kinnser.net/am/printwrapper.cfm?PatientTaskKey=36184728 
```

如果是这样，那怎么办？

**编辑**

具有讽刺意味的是，如果我将其设置为 content-disposition: attachment 并使用 readFile，我可以打开文档并正确显示。只有当我尝试直接将其内联注入 iframe 时，它​​才会呈现源代码并且没有内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:10:19.540

在查看 MHT 时，Google-Chrome 目前存在一个已知问题 - 它始终会将它们视为`Content-Disposition: attachment`并下载它们。

IE 应该总是很好地查看 MHT。

如果您为其安装插件，Firefox 会很好地查看它们。

如果浏览器实际上能够正确显示 MHT，那么以下标头就足够了：

```
Content-Type: message/rfc822
Content-Disposition: inline 
```

我也遇到了 Chrome 查看 MHT 文件的问题，最后我使用的解决方案是将 MHT 动态转换为单个 HTML 页面。这适用于我正在处理的情况，但可能不适用于通用 MHT 文件。

# css - 无法覆盖“border-collapse”的 CSS 值，IE7 开发者工具似乎具有误导性

> ID：13383732
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:12:22.820
> 
> 标签：css, cross-browser, internet-explorer-7

我正在创作的网页中有一个表格。TABLE 的边框折叠属性由我导入为“折叠”的第 3 方 CSS 文件设置。

当我在 IE7 中打开页面时，我注意到表格看起来不正确（单元格的边框显示为白线）。

使用 IE 的开发者工具，我可以使用开发者工具 UI 中旁边的复选框启用/禁用我所包含的 CSS 的“border-collapse:collapse”属性。

当我取消选中该框时，表格再次看起来正确（没有可见的边框）。所以，我想如果我在表格元素上放置一个内联样式，将属性值设置为“单独”，这将覆盖 CSS 文件的值，表格看起来会正确。

但是，当我将内联样式添加到 TABLE 时，它不会影响它的外观。在开发人员工具中，我看到现在 CSS 的“border-collapse:collapse”属性具有“删除线”样式，即：它看起来被“划掉”，但它似乎仍在应用中，因为如果我取消选中/选中它旁边的框，它仍然会切换单元格边框的可见性。

我的问题是：内联样式值不应该覆盖该属性的 CSS 导入值吗？为什么 CSS 中的属性在开发者工具中被划掉但显然没有被禁用？有没有其他方法可以防止将 CSS 值应用于此表的边框折叠？

谢谢，

注意：我还尝试在“单独”之后添加“！重要”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:25:01.450

是的，与来自导入样式表的样式相比，内联样式规范将覆盖（具有更高的特异性）。但这可能会被 JS 应用的样式所覆盖。

# ios - 仅当我通过该区域时，iOS才会删除覆盖

> ID：13383733
> 
> 赞同：0
> 
> 时间：2012-11-14T17:12:48.327
> 
> 标签：ios

我使用以下代码在 mapView 中创建了许多叠加层：

```
MKCircle *circle = [MKCircle circleWithCenterCoordinate:userLocation.coordinate radius:1000];
[mapView addOverlay:circle]; 
```

我只想在执行methode时一一删除：

```
-(void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region 
```

我的问题是：当我从一个地区出来时，不知道我经历了什么覆盖。知道如何删除这些吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:32:58.073

您将要监控与您的圈子相对应的区域。

创建你的`CLRegion`：

`- (id)initCircularRegionWithCenter:(CLLocationCoordinate2D)center radius:(CLLocationDistance)radius identifier:(NSString *)identifier`

监控`CLLocationManager`：

`- (void)startMonitoringForRegion:(CLRegion *)region`

它将向您的侦听器发送事件，因此您可以在收到事件时添加/删除覆盖：

`- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region`

`- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region`

可能对您来说最简单的方法是存储`MKCircle`对象和相应`CLRegion`对象之间的关系，以便您可以适当地更新地图。

# android - 从 Activity 转换为 Fragment

> ID：13383734
> 
> 赞同：0
> 
> 时间：2012-11-14T17:12:50.387
> 
> 标签：android

嗨我试图从一个活动去一个片段。

这是我的活动中的代码

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TableLayout;
import android.widget.TextView;

public class SummaryActivity extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        SimpleBookManager testBook = new SimpleBookManager();
        setContentView(R.layout.summary);

        TableLayout tableSummary = (TableLayout) this.findViewById(R.id.tableSummary);
        tableSummary.setBackgroundResource(R.drawable.book2);

        TextView nrOfBooksfield = (TextView) this.findViewById(R.id.nrOfBooksInCollection);   
        String text = Integer.toString(testBook.count());
        nrOfBooksfield.setText(text);

    }
} 
```

还有她的我的片段

```
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;

public class BFragmentTab extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        return inflater.inflate(R.layout.summary, container, false);

    }

SimpleBookManager testBook = new SimpleBookManager();
TableLayout tableSummary = (TableLayout) getView().findViewById(R.id.tableSummary);
tableSummary.setBackgroundResource(R.drawable.book2);
TextView nrOfBooksfield = (TextView) getView().findViewById(R.id.nrOfBooksInCollection);
String text = Integer.toString(testBook.count());
nrOfBooksfield.setText(text);
} 
```

现在它抱怨`tableSummary.setBackgroundResource(R.drawable.book2);`说这是“setBackgroundResource”和“。”的语法错误。需要标识符。

`nrOfBooksfield.setText(text);`并且在“。”上的“错误构造”和令牌“文本”VariableDeclarationId 上的语法错误上还有另一个错误， 预计在此令牌之后。

什么错误，它在 Activity 中运行良好，现在它在片段中抱怨（是的，我是 Android 上的新手）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:20:22.153

膨胀视图并将代码放入其中`onCreateView()`

```
 public class BFragmentTab extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    View view = inflater.inflate(R.layout.summary, 
    SimpleBookManager testBook = new SimpleBookManager();
    TableLayout tableSummary = (TableLayout) view.findViewById(R.id.tableSummary);
    tableSummary.setBackgroundResource(R.drawable.book2);
    TextView nrOfBooksfield = (TextView) view.findViewById(R.id.nrOfBooksInCollection);
    String text = Integer.toString(testBook.count());
    nrOfBooksfield.setText(text);

    return inflater.inflate(R.layout.summary, container, false);
                }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:17:59.800

例如，将代码放在`onActivityCreated`方法中。

```
public void onActivityCreated(Bundle savedInstanceState) {
    SimpleBookManager testBook = new SimpleBookManager();
    TableLayout tableSummary = (TableLayout) getView().findViewById(R.id.tableSummary);
    tableSummary.setBackgroundResource(R.drawable.book2);
    TextView nrOfBooksfield = (TextView) getView().findViewById(R.id.nrOfBooksInCollection);
    String text = Integer.toString(testBook.count());
    nrOfBooksfield.setText(text);
} 
```

# javascript - JavaScript TypeError: ele("XYZ") 为空

> ID：13383737
> 
> 赞同：-2
> 
> 时间：2012-11-14T17:13:06.577
> 
> 标签：javascript, javascript-events

我有一个我认为应该是返回 TypeError 的简单函数：ele("XYZ") is null 并且没有返回正确的值。在我的例子中，元素 XYZ 被称为“AgeCount”。这是我的脚本：

```
function countAgesSelected(){
    var agesSelectedCount = 0;
    if (document.myform.a4049.checked==true) {
         agesSelectedCount++;
    }
    if (document.myform.a5064.checked==true) {
         agesSelectedCount++;
    }
    if (document.myform.a65plus.checked==true) {
         agesSelectedCount++;
    }
    ele('AgeCount').value = agesSelectedCount;
} 
```

浏览器在最后一行抛出错误。

这是相关的HTML：

```
<input name="4049" type="checkbox" value="4049" id="a4049" starweb_type="Checkbox/Radio Button" checked="checked" onclick="countAgesSelected()" />40-49
<input name="5064" type="checkbox" value="5064" id="a5064" starweb_type="Checkbox/Radio Button" checked="checked" onclick="countAgesSelected()" />50-64
<input name="65plus" type="checkbox" value="65plus" id="a65plus" starweb_type="Checkbox/Radio Button" checked="checked" onclick="countAgesSelected()" />65+
<input type="hidden" value="0" name="AgeCount" /> 
```

我希望因为我是一个 JavaScript 新手，所以我只是有一个简单的语法错误。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T17:14:59.817

```
function countAgesSelected(){
    var agesSelectedCount = 0;
    if (document.myform.a4049.checked==true) {
         agesSelectedCount++;
    }
    if (document.myform.a5064.checked==true) {
         agesSelectedCount++;
    }
    if (document.myform.a65plus.checked==true) {
         agesSelectedCount++;
    }
    document.getElementsByName('AgeCount')[0].value = agesSelectedCount;
} 
```

抱歉，将其读取为 ID，而不是名称

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T17:16:24.973

**更新**

*混合了 getElementsByName 和 getElementsByTagName，代码现已更新。*

函数从何`ele`而来？

使用`document.getElementsByName("AgeCount")[0]`代替 ele 函数或像这样创建 ele 函数：

```
function ele(element)
{
    return document.getElementsByName(element)[0];
} 
```

# ruby-on-rails - twilio-ruby gem 是否处理 SMS 响应？

> ID：13383741
> 
> 赞同：1
> 
> 时间：2012-11-14T17:13:22.517
> 
> 标签：ruby-on-rails, rubygems, twilio

自述文件中对 SMS的唯一[引用](https://github.com/twilio/twilio-ruby)是关于发送 SMS 消息。

```
# send an sms
@client.account.sms.messages.create(
  :from => '+14159341234',
  :to => '+16105557069',
  :body => 'Hey there!'
) 
```

我想知道 twilio-ruby gem 是否提供对 SMS 响应的可见性？我想做一些关键字响应逻辑[，例如他们在 PHP 中给出的示例](http://www.twilio.com/help/faq/sms/how-do-i-build-a-sms-keyword-response-application)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:41:37.423

对于可能遇到此问题的其他人，我发现此[问题中的](https://stackoverflow.com/questions/11022471/how-do-i-use-twilio-to-receive-text-messages-from-users-and-reply-to-that-text-w)[示例应用程序](https://github.com/crabasa/twilio-rails-demo)非常有用。你需要做的是：

1.  设置您的 Twilio 号码 SMS URL 以发布到您的应用程序中的某个控制器（例如，myapp.com/twilio/process-sms）
2.  添加路由以将该 URL 与 Twilio 控制器中的正确操作相匹配
3.  根据您的自定义业务逻辑编写一些类似下面的简单逻辑来处理对您号码的响应/消息
4.  如有必要，使用如下所示的 .xml.erb 文件进行响应

类 TwilioController < ApplicationController

```
 def process_sms
    @city = params[:FromCity].capitalize
    @state = params[:FromState]
    @from = params[:From]
    u = User.find_by_phone_number(@from)
    @user = u.name
    b = params[:Body]

if b.downcase.include?("question")
    @type = "Question"
    @question = u.questions.build(:description => b)
    @question.save!
    render 'new_question.xml.erb', :content_type => 'text/xml'
elsif b.downcase.include?("contact")
    @type = "Contact"
    @contact = u.contacts.build(:name => b)
    @contact.save!
    render 'new_contact.xml.erb', :content_type => 'text/xml'
else
    @type = "Not sure"
    render 'not_sure.xml.erb', :content_type => 'text/xml'
end 
```

.build 将创建对象，.save 将保存对象。然后，您只需将要响应用户的 TWIML 返回给 Twilio。如：

应用程序/views/twilio/new_contact.xml.erb

```
<Response>
  <Sms>We added a new contact for you.</Sms>
</Response> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:17:38.843

当您的 Twilio 号码收到短信时，Twilio 将向您的服务器[发出 HTTP 请求](http://www.twilio.com/docs/api/twiml/sms/twilio_request)。您可以通过使用 XML 响应请求来响应传入的 SMS，如下所示：

```
<Response>
    <Sms>This is my response</Sms>
</Response> 
```

您可以自己生成 XML 响应，或者帮助程序库包含帮助您将 XML 返回到客户端的方法。我建议看一下[Twilio Ruby SMS 快速入门](http://www.twilio.com/docs/quickstart/ruby/sms/hello-monkey)作为一个简单的示例，然后从那里开始。

# python - 当我不引用列表时，Python 会覆盖我的列表值

> ID：13383743
> 
> 赞同：1
> 
> 时间：2012-11-14T17:13:24.600
> 
> 标签：python, list, loops, python-2.7

我一直在尝试在 Python 中使用列表。我调用它一次以在一个循环中存储一个值。然后我在另一个循环中再次调用它，但是当我向列表中添加一些内容时，它已经用新条目覆盖了我的旧条目，然后我才真正添加了新条目。可能是我对 Python 不是很了解，但我会在下面贴一个简单版本的代码，然后是完整版本：

```
ret=[]
plan=argument
for i in range(x):
    plan.changeY
    ret.append(plan)
    plan=argument
for i in range(Z):
    plan.changeD
    ret.append(plan)
    plan=argument 
```

在我进行第二个附加之前出现了问题：第一个附加的所有值都被更改了。它的代码如下。

```
global PLANCOUNTER
global VARNUM
ret=[]
ret=[]
plan = node.state
keep = plan
if printPlans:
    print "fringe[0].state:",plan.id, "---"
    printstate(plan)
if node.parent:
    print "parent: plan",node.parent.state.id
if len(plan.openconds)>0:
    print plan.openconds[0],"is the condition being resolved\n"
    openStep = plan.openconds[0][1]#access the step
    openStep1=openStep
    openCond = plan.openconds[0][0]
    plan.openconds = plan.openconds[1:]
    keep=plan
    if(len(plan.steps)>1):#has init and goal!
    ########################
    #NOT GETTING RID OF THE OPENCOND, SO ASTAR NEVER TAKING IT
    #######################
        if openStep!="init" and openStep!="goal":
            val = openStep.index("*")
            openStep=openStep[:val]
        numPreConds=len(preconds[openStep])
        numStep=len(plan.steps)
        for i in plan.steps:
            i2=i
            plan = keep
            if i!="init" and i!="goal":
                i=i[:i.index("*")]
            if  i !="goal" and i!=openStep:
                for j in adds[i]:
                    bool=0
                    if j==openCond:
                        plan.causallinks.append((i2,openCond,openStep1))#problem
                        plan.ordercons.append((i2,openStep1))
                        PLANCOUNTER+=1
                        plan.id=PLANCOUNTER
                        #threats
                        bol=0
                        for t in plan.steps:#all steps
                            t2=t
                            if t!="init" and t!="goal":
                                val = t.index("*")
                                t=t[:val]
                            for k in deletes[t]:
                                if k == openCond:
                                    for b in plan.ordercons:
                                        if b ==(t,i):
                                            bol=1
                                if bol==0 and t!=i:
                                    for v in plan.threats:
                                        if v[0]==(i2,openCond,openStep1) and v[1]==t2:
                                            bol=1
                                if bol==0 and t!=i and i2!="init":
                                    plan.threats.append(((i2,openCond,openStep1),t2))
                                else:
                                    bol=0
                        ret.append(plan)
                        print len(plan.openconds)+len(plan.threats)," upper\n"
                        plan=keep
    meh=ret
    counter=0
    arr={}
    for k in ret:
        print len(k.openconds)+len(k.threats)," ", k.id,"middle"
        key = counter
        arr[counter]=k
        print arr[counter].id
        counter+=1
    for i in adds:#too many conditions
        stepCons = i
        plan2 = keep
        if i!="goal" and i!="init" and i!=openStep:
            for j in adds[i]:
                if j==openCond:
                    nextStep=i
                    st = str(i)+"*"+str(VARNUM)
                    VARNUM+=1
                    plan2.steps.append(st)
                    plan2.ordercons.append(("init",st))
                    plan2.ordercons.append((st, "goal"))
                    plan2.ordercons.append((st,openStep1))
                    plan2.causallinks.append((st,openCond,openStep1))
                    ##################################################
                    for k in preconds[i]:#issue is htereeeeeeeee
                        plan2.openconds.append((k,st))
                    for k in meh:
                        print len(k.openconds)+len(k.threats)," ", k.id,"middle2s"
                    PLANCOUNTER+=1
                    plan2.id=PLANCOUNTER
                    #threats
                    cnt=0
                    for tr in range(len(arr)):
                        print len(arr[cnt].openconds)+len(arr[cnt].threats)," ", arr[cnt].id,"middlearr"
                        cnt+=1
                    bol=0
                    for t in plan2.steps:#all steps
                        t2=t
                        if t!="init" and t!="goal":
                            val = t.index("*")
                            t=t[:val]
                        for k in deletes[t]:#check their delete list
                            if k == openCond:#if our condition is on our delete lise
                                for b in plan2.ordercons:
                                    if b ==(t,i):# and it is not ordered before it
                                        bol=1
                            if bol==0 and t!=i:
                                for v in plan2.threats:
                                    if v[0]==(i2,openCond,openStep1) and v[1]==t2:
                                        bol=1
                            if bol==0 and t!=i and st!="init":
                                plan2.threats.append(((st,openCond,openStep1),t2))
                            else:
                                bol=0
                            #and y is not before C
                            #causal link, threatening step
                    for k in ret:
                        print len(k.openconds)+len(k.threats)," ", k.id,"middle3"
                    ret.append(plan2)
                    print len(plan2.openconds)+len(plan2.threats)," ",plan2.id," lower\n"
elif len(plan.threats)>0:
    #keep=plan
    openThreatProducer = plan.threats[0][0][0]#access the step
    openThreat=plan.threats[0][1]
    plan.threats=plan.threats[1:]
    print openThreatProducer, " ", openThreat
    i=0
    while i<2:
        plan = keep
        if i==0:
            bool=0
            for k in plan.ordercons:
                if (k[0]==openThreat and k[1]==openThreatProducer) or (k[1]==openThreat and k[0]==openThreatProducer):
                    bool=1
            if bool==0:
                plan.ordercons.append((openThreatProducer,openThreat))
        elif i==1:
            bool=0
            for k in plan.ordercons:
                if (k[0]==openThreat and k[1]==openThreatProducer) or (k[1]==openThreat and k[0]==openThreatProducer):
                    bool=1
            if bool==0:
                plan.ordercons.append((openThreat,openThreatProducer))
        ret.append(plan)
        i+=1
t=len(ret)
for k in ret:
    print len(k.openconds)+len(k.threats)," ", k.id,"lowest"
print t
return ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:31:33.280

似乎在做之后`plan=argument`，`plan`并且`argument`指向同一个位置。你应该做这样的事情

```
import copy  
plan = copy.deepcopy(argument) 
```

这将创建参数的精确副本。

# c# - 使用 Visual Studio 2012 的本地数据库

> ID：13383746
> 
> 赞同：2
> 
> 时间：2012-11-14T17:13:36.223
> 
> 标签：c#, visual-studio-2012

我正在创建一个应用程序，我想使用存储在客户端本地计算机上的本地数据库。我正在争论是否应该使用`SQLITE`或者 Visual Studio 中有什么东西可以帮助我。另一件事是我想在启动应用程序时以编程方式在用户目录中创建数据库。

我在网上看到了一些东西，但这些文章都是关于 SQL Server 的东西，我不想用这个应用程序做。所有数据都需要存储在本地机器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:18:35.187

您可以使用[SQL Server Compact](http://msdn.microsoft.com/en-us/data/ff687142.aspx)，它在 Visual Studio 中有工具。它与 SQL Server 语法兼容，但将其数据存储在本地文件中，您可以动态创建该文件（例如，在应用程序启动时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:22:49.383

您可以使用其网站提供的库即时创建 SQLite 数据库。我已经在许多项目中将它用于我的个人代码，并在 Data Explorer（IBM 产品）的一些内部架构中使用它。一些用于创建数据库文件的示例 C#：

```
 if (!Directory.Exists(Application.StartupPath + "\\data"))
        {
            Directory.CreateDirectory(Application.StartupPath + "\\data");
        }
        SQLiteConnection conGlobal;
        if (!File.Exists(dbGlobal))
        {
            conGlobal = new SQLiteConnection("Data Source=" + dbGlobal + ";New=True;Compress=True;PRAGMA synchronous = 1;PRAGMA journal_mode=WAL");
            conGlobal.SetExtendedResultCodes(true);
            firstRun = true;
        }
        else
        {
            conGlobal = new SQLiteConnection("Data Source=" + dbGlobal + ";Compress=True;PRAGMA synchronous = 1;PRAGMA journal_mode=WAL");
            conGlobal.SetExtendedResultCodes(true);
        }
        try
        {
            conGlobal.Open();
        }
        catch (Exception)
        {
            //do stuff
        } 
```

如果 new=true 作为连接字符串传递，只需启动到文件的连接就会创建它。然后您可以像查询任何数据库一样查询它并获得结果。

您还可以对数据库文件进行密码保护，以防止仅使用 SQLite-Shell 或不同的 SQLite DB 查看器打开它们即可访问它们。

有关在连接字符串中传递的 pragma 语句的更多信息，请参见以下内容：[http ://www.sqlite.org/pragma.html](http://www.sqlite.org/pragma.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:19:27.580

我不确定是否以编程方式（这可能是您的意思，对吗？）创建数据库，但[SQL Server Compact Edition](http://www.microsoft.com/en-us/download/details.aspx?id=17876)过去为我提供了简单的应用程序。它是嵌入式的，甚至在中等信任下运行。

# ormlite - 在 Ormlite 中使用 GROUP BY、HAVING 和 ORDER BY 返回错误结果

> ID：13383748
> 
> 赞同：0
> 
> 时间：2012-11-14T17:13:44.490
> 
> 标签：ormlite, android-sqlite

下面的代码给出了一个错误

```
List<List<Consumption>> children = new ArrayList<List<Consumption>>();
try {
    for(DrinkType drinkType : groups){
        QueryBuilder<Consumption, ?> qb = getHelper()
                .getConsumptionDao().queryBuilder();
        qb.groupBy(Consumption.COLUMN_DRINK_ID).having("MIN("+Consumption.COLUMN_PRICE+")").orderBy(Consumption.COLUMN_PRICE, true);
        QueryBuilder<Drink, Integer> qb2 = getHelper().getDrinkDao().queryBuilder();
        qb2.where().eq(Drink.COLUMN_DRINKTYPE, drinkType.getFlag());
        qb.join(qb2);
        Log.d("Query", qb.prepareStatementString());
        children.add(qb.query());   
    }

} catch (SQLException e) {
    e.printStackTrace();
} 
```

似乎 QueryBuilder 将 HAVING 子句放在 ORDER BY 子句后面而不是前面。

```
java.sql.SQLException: Problems executing Android query: 
SELECT `consumption`.* FROM `consumption` INNER JOIN `drink` ON
 `consumption`.`drink_id` = `drink`.`_id` WHERE `drink`.`drink_type` = 'P'
 GROUP BY `consumption`.`drink_id` ORDER BY `consumption`.`price` HAVING MIN(price) 
```

我尝试通过执行原始查询来解决此问题，但是如果我使用以下查询

```
SELECT co.* FROM consumption co INNER JOIN drink dr ON dr._id = co.drink_id
 WHERE dr.drink_type = 'P' GROUP BY co.drink_id HAVING MIN(price) ORDER BY price 
```

与我使用 SQLite Manager 直接在我的 sqlite 数据库上执行相同的查询相比，这会返回不同的结果。我认为在同一个查询中同时使用 HAVING 和 ORDER BY 时，ORMlite 可能会出现问题。

是否有可能的解决方法，以便我可以让这个查询工作？

# c++ - C ++ 11：返回类型基于输入类型的仿函数的return_type（用于std :: bind）

> ID：13383749
> 
> 赞同：2
> 
> 时间：2012-11-14T17:13:46.427
> 
> 标签：c++, c++11, std, boost-bind

我正在玩仿函数组合，其中仿函数的返回类型取决于输入类型：

```
template<typename V>
class F
{
protected:
    V v_;
public:
    using return_type = ?;

    F(V v) : v_(v) {}

    template<typename T>
    typename T::U operator()(T t)
    {
        v.method(t);
    }
};

...

X x;
Y y;
F<X> f(x);
F<Y> g(y);
auto h = std::bind(f, std::bind(g, _1));
h(...);  // problem is here :( 
```

是否有可能找到`return_type`使用`decltype`这样的方法`std::bind`？如果是这样，怎么做？

**编辑**：我替换`U<T>`为`typename T::U`因为返回类型取决于类型。我希望这现在更清楚了。

**编辑 2 (4?)**：添加了一个重现问题的可编译示例。

```
#include <functional>

using namespace std::placeholders;

template<typename I>
struct R
{
    using IT = I;
    R(I x, I y) : b(x), e(y) {}
    I b;
    I e;
};

template<typename IN, typename II>
class CI
{
    CI(II i) {}
};

template<typename IN>
class C
{
    template<typename IR>
    R<CI<IN, typename IR::IT> >
    operator()(IR& i)
    {
        return R<CI<IN, typename IR::IT> >(
            CI<IN, typename IR::IT>(i.b),
            CI<IN, typename IR::IT>(i.e));
    }
};

struct F {};
struct G {};
struct H {};

int main(int argc, char* argv[])
{
    C<F> a;
    C<G> b;
    auto c = std::bind(a, std::bind(b, _1));
    R<H> r{H{}, H{}};
    c(r);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:36:52.673

忘记使用`std::bind`一分钟，只需尝试直接方法：

```
C<F> a;
C<G> b;
R<H> r{H{}, H{}};
a(b(r)); 
```

这甚至不会编译，所以`bind`版本不可能！

`b(r)`由于访问冲突而无效，并且如果`a(b(r))`由于尝试将临时绑定到非 const 左值引用而修复失败

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:17:38.877

解决了！我不得不替换`C::operator()(IR& i)`为，`C::operator()(IR i)`因为它是递归的。也许添加一个`move`构造函数`IR`会有助于提高性能，但是......？事实上，发生的事情是`clang`'s 的错误不如`gcc`'s 有用。好吧，怪我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:18:04.550

您的示例可以使用替代函数语法来解决：

```
#include <iostream>
#include <functional>

template<typename T>
struct Number {
  T t_;
  Number(T t) : t_(t) {}
  T operator+(T t) { return t_ + t; }
};

struct F {
  template<typename T>
  auto operator()(T x) -> decltype(x + 1)
  {
    return x + 1;
  }
} f, g;

int main(int argc, char* argv[])
{
  using namespace std::placeholders;
  auto h = std::bind(f, std::bind(g, _1));
  std::cout << h(Number<int>(1)) << std::endl;
} 
```

并且`value_type`在这里不需要，而且它提供的问题是`int`从内部返回的，`g(_1)`而.`int::value_type``f`

# facebook-php-sdk - FQL 错误'未能打开流失败打开流：HTTP 请求失败！'中的 HTTP/1.0 500 内部服务器错误

> ID：13383755
> 
> 赞同：0
> 
> 时间：2012-11-14T17:14:02.070
> 
> 标签：facebook-php-sdk, facebook-fql

我是 2 个 Facebook 帐户。我用一个用于测试（有 600 个朋友），另一个用于开发（5 个朋友）。我正在尝试使用代码获取用户朋友的所有 id

```
function get_photo($access_token){
    // Run fql query 
    $fql_query_url = 'https://graph.facebook.com/'
    . '/fql?q=SELECT+pid+,object_id+,owner+FROM+photo+WHERE+owner+=+me()+OR+owner+IN+(SELECT+uid2+FROM+friend+WHERE+uid1+=+me())+LIMIT+50'
    . '&access_token=' . $access_token;
     // First logically check the result, TRUE: Result is passed to $fql_query_result.
  //                                   FALSE: $flq_query_result = 0 or false.
  $fql_query_result = file_get_contents($fql_query_url)?file_get_contents($fql_query_url):0;
  // Only json_decode the result if it was valid.
  $fql_query_obj = (!$fql_query_result == 0) ? json_decode($fql_query_result, true) : "FQL was not a valid query";

  //display results of fql query
  echo '<pre>';
  //print_r("query results:");
  print_r($fql_query_obj);
  echo '</pre>';
  return $fql_query_obj;} 
```

我已获得以下权限 user_about_me,read_stream,user_activities,email,user_location,user_photos,friends_photos,publish_actions,user_birthday,user_likes,read_insights,read_insights,user_status';

问题是代码在开发人员帐户中工作，但在测试帐户中出现以下错误。

```
file_get_contents(https://graph.facebook.com//fql?q=SELECT+pid+,object_id+,owner+FROM+photo+WHERE+owner+=+me()+OR+owner+IN+(SELECT+uid2+FROM+friend+WHERE+uid1+=+me())+LIMIT+50&access_token=AAAEEKwQN3CMBAEUC6DqfakwkSZCdeLI2zk5Ec2evZBJvZB14Nh9e4ZBs8bOOw36F9T2winWRyzSx3vSCcWOl4A80AgcOjEvft1sbW7MLeEE2cyVPCIAb): failed to open stream: HTTP request failed! HTTP/1.0 500 Internal Server Error in /var/www/JMJ_test/facebook_include1.php on line 190
FQL was not a valid query 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:18:15.760

我在其他 API 中发现了这个问题。通常情况下，代码没有问题，但是帐户上的朋友数量。开发者只有 5 个朋友，而测试者没有，因为它有 600 个朋友。我会试着在一秒钟内为你找到极限。 **编辑**

抱歉，我找不到限制，但我读到每个 iP 每 600 秒大约 600 个请求。不确定这是否与它有关。

# .net - 我可以使用 ServiceStack 自行托管 Web UI 吗？

> ID：13383757
> 
> 赞同：7
> 
> 时间：2012-11-14T17:14:02.540
> 
> 标签：.net, servicestack

我正在评估 ServiceStack（到目前为止它很糟糕）。
我有自托管网络服务工作，但我看不到如何自托管 UI，或者即使可以这样做。

*自托管对我们来说是理想的，UI 偶尔会被有限数量的内部用户用来配置一些后端服务*

我看过自定义 AppHost `AppHostHttpListenerBase`，但看不到从哪里开始。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:50:32.100

ServiceStack 的[RazorRockstars GitHub 项目](https://github.com/ServiceStack/RazorRockstars/)显示了 Razor Rockstars 网站在不同支持的主机中的多种配置：

*   [ASP.NET 主机-](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.WebHost) [razor.servicestack.net](http://razor.servicestack.net)上的现场演示
*   [独立自主机 - razor-console.servicestack.net](http://razor-console.servicestack.net)[上](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.SelfHost)的现场演示
*   [独立的 Windows 服务](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.WinService)

听起来您想查看独立的自我主机控制台应用程序或独立的 Windows 服务，它们都包含自己的 HttpListener。

# ruby-on-rails - Rails 按关联数组中的属性查找

> ID：13383758
> 
> 赞同：0
> 
> 时间：2012-11-14T17:14:03.660
> 
> 标签：ruby-on-rails, arrays

我有两个模型 A 和 B。A has_many B's。B 有一个属性 :number

什么是rails方式（我可以对每个进行一些编码，但这不是重点）来查找A是否具有给定数字的B对象？

我试过 find 但因为它是一个关联，所以它给了我这个错误：

```
>> bs.find{|f| f.number == 8}
>> ActiveRecord::RecordNotFound: Couldn't find A without an ID 
```

**编辑**

为了更清楚。

如果我必须编码，这将是这样的：

```
def is_number_in_use(number)?
    self.bs.each do |b| #Consider bs as the has_many association between A and B
        return true if b.numero == number
    end
    return false
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:30:45.407

`find`在您的关联上被 ActiveRecord 覆盖。我想你想要的是`Enumerable#select`：

```
bs = B.all
bs_with_number_eq_8 = bs.select {|f| f.number == 8} 
```

这不会生成 SQL 查询，但只会遍历集合`bs`并过滤它们`number == 8`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:16:03.867

那个更好吗？

```
a.bs.select{ |b| b.number == 8 }.any? #=> return true if a has one b o more with number == 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:26:42.290

我不明白你想要什么。你能放很多代码吗，我可以有更多的信息。

你也可以试试这个：

> bs.find{|f| f.try(:number) == 8}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:49:53.390

尝试这个，

```
def is_number_in_use(number)?
  self.bs.collect(&:number).include?(number)
end 
```

**更新**

```
self.bs.where(:number => some_number).present? #this will return true or false 
```

这将只调用一个 sql 查询。

# javascript - 在具有复杂数组的控制器中绑定 MVC 模型

> ID：13383761
> 
> 赞同：3
> 
> 时间：2012-11-14T17:14:06.277
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, jquery

我的大部分模型都是使用 填充的`$('form').serializeArray()`，但是需要从其管理器填充形成分页网格的对象数组。例如：

```
public JsonResult SubmitForm(MyViewModel input)
{ 
```

...

```
public class MyViewModel
{
  [Display(Name = "Name")]
  public string GridName { get; set; }

  [Display(Name = "Description")]
  public string GridDescription { get; set; }

  public GridRow[] GridRows { get; set; } 
```

名称和描述将由 提取`serializeArray()`，没有问题。如果`GridRow`是 a `string[]`，那么它接受我只需将多个实例推送到 jquery 制作的序列化数组中：

```
var data = $('form').serializeArray();
for (var i in gridData) {
   data.push({ name: 'GridRows', value: gridData[i].id });
}
$.ajax({
   type: "POST",
   url: '/Central/Results/SubmitForm',
   dataType: "json",
   data: data, 
```

这样我至少可以得到一个ID数组。`gridData[i]`但是，当我想填充正确的数据类型时，它不允许我将整个对象推入其中 ( )。当它到达控制器时，我总是得到一个空值。

知道我需要如何处理数据以使 MVC 正确填充模型吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:23:02.520

我很确定这与必须在您的 Ajax 帖子中设置`traditional`选项有关。`true`就数组发布到 MVC 控制器操作的时间而言，jQuery 处理数组的方式与您预期的略有不同。

所以这样做：

```
$.ajax({
   type: "POST",
   url: '/Central/Results/SubmitForm',
   dataType: "json",
   traditional: true,
   data: data,
   ... 
```

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/4402080/213902)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:48:24.950

结果只需要添加一行和属性引用，并分别添加每个变量。

```
 for (var i in gridData) {
           for (var j in gridData[i]) {
              data.push({ name: 'GridRows[' + i + '].' + j, value: gridData[i][j] });
           }
        } 
```

编辑：只是想我会发布我不久前为此编写的更新的辅助方法。

```
function serializeArray(obj, data, name) {
   /// <summary>Turns an object into an MVC standard array of values </summary>
   /// <param name="obj" type="Object">Object to serialise (required)</param>
   /// <param name="data" type="Array">Array to append data to end of (optional)</param>
   /// <param name="name" type="String">Name prefix for all entries (optional/ignore)</param>

   if (!data || !(data instanceof Array)) {
      data = [];
   }
   if (obj instanceof Array) {
      if (!name) {
         throw "Need an object name when converting an array";
      }
      for (var index = 0; index < obj.length; index++) {
         data = serializeArray(obj[index], data, name + '[' + index + ']');
      }
   } else if (obj instanceof Object) {
      for (var property in obj) {
         if (obj.hasOwnProperty(property)) {
            data = serializeArray(obj[property], data, name ? (name + '.' + property) : property);
         }
      }
   } else {
      data.push({ name: name, value: obj });
   }
   return data;
} 
```

# sqlite - 有没有办法在 sqlite 中禁用宽松的引用规则？

> ID：13383763
> 
> 赞同：3
> 
> 时间：2012-11-14T17:14:17.743
> 
> 标签：sqlite, debugging, escaping, literals, double-quotes

如果没有找到匹配的列，SQLite 显然作为“兼容性功能”，将双引号标识符解析为字符串文字。

我知道它适用于编写不正确 sql 的人，以及与这些人创建的遗留项目的向后兼容性，但是对于我们这些在全新项目上编写正确 sql 的人来说，调试非常困难。

例如，

```
SELECT * FROM "users" WHERE "usernme" = 'joe'; 
```

返回一个有 0 行的查询，因为字符串 'usernme' 不等于字符串 'joe'。

这让我摸不着头脑，想知道为什么即使我知道有一个叫这个名字的用户，我也没有得到 joe 的行，直到我煞费苦心地回溯我的代码并意识到我遗漏了一个 a。

是否有任何“严格模式”PRAGMA 或 API 选项来强制执行引用规则并将所有双引号字符串视为标识符，以便在拼写错误时立即通知我？

（请没有答案告诉我在不需要时不要引用标识符，因为任何这样的答案基本上都在告诉我，为了获得正确的调试，您必须首先编写错误的代码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:11:46.340

这是在 SQLite 解析器中硬编码的，不能从外部更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:02:58.480

我还在 SQLite 频道中询问过，有人非常友好地查看了源代码并创建了一个补丁，甚至在邮件列表上启动了一个线程来描述该补丁：

[http://www.mail-archive.com/sqlite-users@sqlite.org/msg73832.html](http://www.mail-archive.com/sqlite-users@sqlite.org/msg73832.html)

这不是一个适用于官方版本的答案，但可能有一天。目前，我只是打算用这个补丁自己重新编译它。

# c - 从 void 转换为 MPI_Aint

> ID：13383769
> 
> 赞同：2
> 
> 时间：2012-11-14T17:14:37.500
> 
> 标签：c, fortran, mpi, implicit-conversion, fortran-iso-c-binding

我在将一些变量从 void* 转换为 MPI_Aint 时遇到了一些麻烦。这是代码的一部分：

```
C:
void myfunc_(MPI_Aint *out_ptr, ...)
...
void *ptr = mmap(...)
...
*out_ptr = (MPI_Aint) ptr;

Fortran :
#ifdef DOUBLE_PREC
  integer, parameter, public :: mytype = KIND(0.0D0)
  integer, parameter, public :: real_type = MPI_DOUBLE_PRECISION
#endif
INTEGER BSIZ, CORE_COMM, status
real(mytype), pointer :: SND
...
call myfunc(SND, BSIZ, real_type, CORE_COMM, status) 
```

mmap 正在工作但出现错误（当我评论最后一行时没有错误）

```
...
mmap succeeded 0x7fab7b490000
...
*** Process received signal ***
Signal: Segmentation fault (11)
Signal code: Address not mapped (1)
Failing at address: (nil) 
```

有什么想法可以帮忙吗？以下是完整的 C 函数代码：

```
void myfunc_(MPI_Aint *out_ptr, MPI_Fint *nelem, MPI_Fint *type,
            MPI_Fint *comm, MPI_Fint *ret)
{
MPI_Comm world;
int mype;

world = MPI_Comm_f2c(*comm);
MPI_Comm_rank(world, &mype);

char filename[20];

#define POSIX_SHM

int i,j;

int world_rank = -1, world_size = -1;
int mpi_result = MPI_SUCCESS;

int color = -1;
int ranks_per_node = -1;
MPI_Comm IntraNodeComm;

int node_shmem_bytes; 

mpi_result = MPI_Comm_rank(MPI_COMM_WORLD, &world_rank);
assert(mpi_result==MPI_SUCCESS);
mpi_result = MPI_Comm_size(MPI_COMM_WORLD, &world_size);
assert(mpi_result==MPI_SUCCESS);

if (world_rank==0)
{
    char * env_char;
    int units = 1;
    int num_count = 0;
    env_char = getenv("NODE_SHARED_MEMORY");
    if (env_char!=NULL)
    {
        if      ( NULL != strstr(env_char,"G") ) units = 1000000000;
        else if ( NULL != strstr(env_char,"M") ) units = 1000000;
        else if ( NULL != strstr(env_char,"K") ) units = 1000;
        else                                     units = 1;

        num_count = strspn(env_char, "0123456789");
        memset( &env_char[num_count], ' ', strlen(env_char)-num_count);

        node_shmem_bytes = units * atoi(env_char);
        printf("%7d: NODE_SHARED_MEMORY = %d bytes \n", world_rank, node_shmem_bytes );
    }
    else
    {
        node_shmem_bytes = getpagesize();
        printf("%7d: NODE_SHARED_MEMORY = %d bytes \n", world_rank, node_shmem_bytes );
    }
}
mpi_result = MPI_Bcast( &node_shmem_bytes, 1, MPI_INT, 0, MPI_COMM_WORLD );
assert(mpi_result==MPI_SUCCESS);

int node_shmem_count = node_shmem_bytes/sizeof(double);
node_shmem_count = (int) *nelem;
node_shmem_bytes = node_shmem_count * sizeof(double) * 2;

fflush(stdout);
MPI_Barrier(MPI_COMM_WORLD);

IntraNodeComm = world;

int subcomm_rank = -1;
mpi_result = MPI_Comm_rank(IntraNodeComm, &subcomm_rank);
assert(mpi_result==MPI_SUCCESS);

sprintf(filename,"/foo_%d_%d_%d",*nelem,*type,*comm);

#if defined(POSIX_SHM)
int fd;
if (subcomm_rank==0)
    fd = shm_open(filename, O_RDWR | O_CREAT, S_IRUSR | S_IWUSR );

mpi_result = MPI_Barrier(MPI_COMM_WORLD);
assert(mpi_result==MPI_SUCCESS);

if (subcomm_rank!=0)
    fd = shm_open(filename, O_RDWR, S_IRUSR | S_IWUSR );

if (fd<0) printf("%7d: shm_open failed: %d \n", world_rank, fd);
else      printf("%7d: shm_open succeeded: %d \n", world_rank, fd);
#elif defined(DEV_SHM)
int fd = open("/dev/shm/foo", O_RDWR | O_CREAT, S_IRUSR | S_IWUSR );
if (fd<0) printf("%7d: open failed: %d \n", world_rank, fd);
else      printf("%7d: open succeeded: %d \n", world_rank, fd);
#else
int fd = -1;
printf("%7d: no file backing \n", world_rank);
#endif
fflush(stdout);
mpi_result = MPI_Barrier(MPI_COMM_WORLD);
assert(mpi_result==MPI_SUCCESS);

if (fd>=0 && subcomm_rank==0)
{
    int rc = ftruncate(fd, node_shmem_bytes);
    if (rc==0) printf("%7d: ftruncate succeeded \n", world_rank);
    else       printf("%7d: ftruncate failed \n", world_rank);
}
fflush(stdout);
mpi_result = MPI_Barrier(MPI_COMM_WORLD);
assert(mpi_result==MPI_SUCCESS);

#ifdef __bgp__
double * ptr = NULL;
_BGP_Personality_t pers;
Kernel_GetPersonality(&pers, sizeof(pers));

if( BGP_Personality_processConfig(&pers) == _BGP_PERS_PROCESSCONFIG_SMP )
{
    printf("SMP mode => MAP_PRIVATE | MAP_ANONYMOUS \n");
    ptr = mmap( NULL, node_shmem_bytes, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, fd, 0 );
}
else
{
    if (node_shmem_bytes>pers.Kernel_Config.SharedMemMB)
    {
        printf("node_shmem_bytes (%d) greater than pers.Kernel_Config.SharedMemMB (%d) - allocating the latter \n", 
               node_shmem_bytes, pers.Kernel_Config.SharedMemMB );
        node_shmem_bytes = pers.Kernel_Config.SharedMemMB;
    }
    ptr = mmap( NULL, node_shmem_bytes, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0 );
}
#else
void *ptr = mmap( NULL, node_shmem_bytes, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0 );
#endif
if (ptr==NULL) printf("%7d: mmap failed \n", world_rank);
else           printf("%7d: mmap succeeded %p\n", world_rank,ptr);
fflush(stdout);
mpi_result = MPI_Barrier(MPI_COMM_WORLD);
assert(mpi_result==MPI_SUCCESS);

mpi_result = MPI_Comm_size(IntraNodeComm, &ranks_per_node );
assert(mpi_result==MPI_SUCCESS);
if (0==subcomm_rank) printf("%7d: ranks_per_node = %d \n", world_rank, ranks_per_node);
fflush(stdout);

for (i=0; i<ranks_per_node; i++)
{
    if (i==subcomm_rank)
   {
        printf("%7d: subcomm_rank %d setting the buffer \n", world_rank, subcomm_rank );
        //for (j=0; j<node_shmem_count; j++ ) ptr[j] = (double)i;
        printf("%7d: memset succeeded \n", world_rank);

        int rc = msync(ptr, node_shmem_bytes, MS_INVALIDATE | MS_SYNC);
        if (rc==0) printf("%7d: msync succeeded, %p \n", world_rank, ptr);
        else       printf("%7d: msync failed \n", world_rank);
    }

    fflush(stdout);
    mpi_result = MPI_Barrier(MPI_COMM_WORLD);
    assert(mpi_result==MPI_SUCCESS);

    //printf("%7d: ptr = %lf ... %lf \n", world_rank, ptr[0], ptr[node_shmem_count-1]);
    fflush(stdout);

    mpi_result = MPI_Barrier(MPI_COMM_WORLD);
    assert(mpi_result==MPI_SUCCESS);
}
fflush(stdout);
mpi_result = MPI_Barrier(MPI_COMM_WORLD);
assert(mpi_result==MPI_SUCCESS);

if (ptr!=NULL)
{
    int rc = munmap(ptr, node_shmem_bytes);
    if (rc==0) printf("%7d: munmap succeeded %p, %d\n", world_rank,ptr, (MPI_Aint) ptr);
    else       printf("%7d: munmap failed \n", world_rank);
}
fflush(stdout);
mpi_result = MPI_Barrier(MPI_COMM_WORLD);
assert(mpi_result==MPI_SUCCESS);

#if defined(POSIX_SHM)
//if (fd>=0)
if (fd>=0 && subcomm_rank==0)
{
    int rc = -1;

    rc = shm_unlink(filename);
    if (rc==0) printf("%7d: shm_unlink succeeded %p\n", world_rank,ptr);
    else       printf("%7d: shm_unlink failed \n", world_rank);
}
#elif defined(DEV_SHM)
if (fd>=0 && subcomm_rank==0)
{
    int rc = -1;

    rc = ftruncate(fd, 0);
    if (rc==0) printf("%7d: ftruncate succeeded \n", world_rank);
    else       printf("%7d: ftruncate failed \n", world_rank);

    rc = close(fd);
    if (rc==0) printf("%7d: close succeeded \n", world_rank);
    else       printf("%7d: close failed \n", world_rank);
}
#endif
fflush(stdout);
mpi_result = MPI_Barrier(MPI_COMM_WORLD);
assert(mpi_result==MPI_SUCCESS);

*out_ptr = (MPI_Aint) ptr;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:30:17.897

我本来想给你写一个简短的评论，但它不知何故增长了一点点……

MPI 标准体和实现者多年来一直在为这个 C 到 Fortran 内存传递问题而苦苦挣扎。为什么不重用他们的努力，而不是重新发现圆形轮子比方形轮子更好用的事实呢？

只需看一下 MPI 标准函数`MPI_ALLOC_MEM`，它应该在 MPI 中分配特殊内存并将其返回给用户代码。MPI-2.2 标准将其 Fortran 接口定义为：

```
MPI_ALLOC_MEM(SIZE, INFO, BASEPTR, IERROR)
    INTEGER INFO, IERROR
    INTEGER(KIND=MPI_ADDRESS_KIND) SIZE, BASEPTR 
```

MPI-3.0 中的现代 Fortran 2008 接口使用`ISO_C_BINDING`并提供如下：

```
MPI_Alloc_mem(size, info, baseptr, ierror)
    USE, INTRINSIC :: ISO_C_BINDING, ONLY : C_PTR
    INTEGER(KIND=MPI_ADDRESS_KIND), INTENT(IN) :: size
    TYPE(MPI_Info), INTENT(IN) :: info
    TYPE(C_PTR), INTENT(OUT) :: baseptr
    INTEGER, OPTIONAL, INTENT(OUT) :: ierror 
```

该标准给出了如何使用调用的以下示例：

```
USE mpi_f08
USE, INTRINSIC :: ISO_C_BINDING
TYPE(C_PTR) :: p
REAL, DIMENSION(:,:), POINTER :: a
INTEGER, DIMENSION(2) :: shape
INTEGER(KIND=MPI_ADDRESS_KIND) :: size
shape = (/100,100/)
size = 4 * shape(1) * shape(2)
CALL MPI_Alloc_mem(size,MPI_INFO_NULL,p,ierr)
CALL C_F_POINTER(p, a, shape)
...
a(3,5) = 2.71
...
CALL MPI_Free_mem(a, ierr) 
```

基本上，`C_F_POINTER`例程`ISO_C_BINDING`将 C 指针绑定到 Fortran 指针，然后前者指向的内存通过后者变得可用。

这就是 Open MPI 实现 F08 的方式`MPI_Alloc_mem`：

```
subroutine MPI_Alloc_mem_f08(size,info,baseptr,ierror)
   use, intrinsic :: ISO_C_BINDING, only : C_PTR
   use :: mpi_f08_types, only : MPI_Info, MPI_ADDRESS_KIND
   use :: mpi_f08, only : ompi_alloc_mem_f
   implicit none
   INTEGER(MPI_ADDRESS_KIND), INTENT(IN) :: size
   TYPE(MPI_Info), INTENT(IN) :: info
   TYPE(C_PTR), INTENT(OUT) :: baseptr
   INTEGER, OPTIONAL, INTENT(OUT) :: ierror
   integer :: c_ierror

   call ompi_alloc_mem_f(size,info%MPI_VAL,baseptr,c_ierror)
   if (present(ierror)) ierror = c_ierror

end subroutine MPI_Alloc_mem_f08 
```

`ompi_alloc_mem_f`是一个将内部 C 实现与 Fortran 接口的 C 函数：

```
void ompi_alloc_mem_f(MPI_Aint *size, MPI_Fint *info, char *baseptr, MPI_Fint *ierr)
{
    int ierr_c;
    MPI_Info c_info = MPI_Info_f2c(*info);

    ierr_c = MPI_Alloc_mem(*size, c_info, baseptr);
    if (NULL != ierr) *ierr = OMPI_INT_2_FINT(ierr_c);
} 
```

因此，您可以看到`TYPE(C_PTR)` `baseptr`来自 Fortran 的参数只是作为指针传入，（像往常一样）通过引用传递。这在这里不是很明显，因为 MPI 标准定义了 的最后一个参数`MPI_Alloc_mem`，其中返回指向已分配内存的指针，因为`void *`它实际上是`void`通过引用传递的指针（即`void **`）。虚拟`baseptr`参数实际上`void **`也只是简单地声明，`char *`因为原因:) 相同的函数用于实现旧的 Fortran 接口，因此`char *baseptr`映射到`INTEGER(KIND=MPI_ADDRESS_KIND)`实际参数。

教训是，虽然`MPI_ADDRESS_KIND`Fortran 中的整数用于存储指针和指针差值，但不应`MPI_Aint`在 C 中用作指针参数类型，而应使用常规双指针，如`void **`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:28:00.290

我不确定您是否可以注释掉以避免该问题的行如下：

```
*out_ptr = (MPI_Aint) ptr; 
```

您的取消引用不一致。

`ptr`是 a`double *`并且不能直接转换为 a `MPI_Aint`。

也许你想要

```
*out_ptr = *(MPI_Aint *)ptr; 
```

如果调用者将指针（作为 out_ptr，）传递到您想要存储`MPI_Aint`在`*ptr`. 但是，鉴于您的分配`node_shmem_bytes`，这可能没有意义：

```
out_ptr = (MPI_Aint *)ptr 
```

这会将（myfunc 副本的本地）out_ptr 设置为 MPI_Aint 对象块，但调用者不会看到。我不知道正在使用的 Fortran -> C 调用约定，但也许您想传递一个指向`MPI_Aint *`C 程序可以放置 ptr 的指针？

# opencl - 使用原子函数编译的问题

> ID：13383772
> 
> 赞同：1
> 
> 时间：2012-11-14T17:14:59.543
> 
> 标签：opencl, gpu

我正在尝试编译这个 openCl 代码：

```
#pragma OPENCL EXTENSION cl_khr_local_int32_base_atomics : enable

__kernel void nQueens( __global int * data, __global int * result, __local int * stack, __local int *stack_size, int board_size)
{
    atom_inc( stack_size );
} 
```

我得到这个错误：

> 您的 OpenCL 内核无法编译：错误：代码选择无法选择：0x5307370: i32,ch = AtomicLoadAdd 0x53072e8, 0x5303d68, 0x53011a8 <0x4edf478:0> alignment=4
> 
> 错误：CL_BUILD_PROGRAM_FAILURE

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:18:30.090

atom_inc 是 64 位版本， atomic_inc 是 32 位版本。stack_size 也应该被声明为 volatile。因此，由于您使用的是 32 位整数，因此您应该改用 atomic_inc。

来自[http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/atomic_inc.html](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/atomic_inc.html)：

int atomic_inc (volatile __local int *p )

“这个函数的 64 位版本 atom_inc 由 cl_khr_int64_base_atomics 启用。”

# c# - 所有区域的启用保护模式必须设置为相同的值（启用或禁用）

> ID：13383773
> 
> 赞同：4
> 
> 时间：2012-11-14T17:15:06.327
> 
> 标签：c#, internet-explorer, selenium

我正在尝试使用`Selenium Internet Explorer`驱动程序，但是当我尝试实例化它时它会中断：

```
[TestInitialize]
public void TestInitialise() {
  ieDriver = new InternetExplorerDriver();
} 
```

出现以下错误：

> 必须将所有区域的启用保护模式设置为相同的值（启用或禁用）。(NoSuchDriver)。

我在[这里](http://seleniumdotnet.blogspot.co.uk/2012/01/internetexplorerdriver-issue-by.html)找到了我的问题的明显解决方案，它建议设置驱动程序`DesiredCapabilities`，如下所示：

```
var capabilitiesInternet = new OpenQA.Selenium.Remote.DesiredCapabilities();
capabilitiesInternet.SetCapability("ignoreProtectedModeSettings", true);
IWebDriver webDriver = new InternetExplorerDriver(capabilitiesInternet); 
```

唯一的问题是，我使用的是我能找到的最新版本的驱动程序，并且没有`InternetExplorerDriver`作为`DesiredCapabilities`参数的替代。

现在是否有一些新的或其他设置方式`DesiredCapabilites`而不是我使用的示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:39:41.763

该设置将解决该问题，但会引入一些微妙的问题。你没有正确设置IE的保护模式吗？这是它的正确解决方案。

这个指南住在这里：

[https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver](https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver)

基本上只是为每个区域关闭 IE 中的保护模式。

或者，如果您确实必须使用覆盖功能，那么您可以做两件事：

使用`InternetExplorerOptions`类。注意属性的**名称**，它会给你一个很大的线索，使用它不是一个好主意。

```
var options = new InternetExplorerOptions;
options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
var driver = new InternetEplorerDriver(options); 
```

或者使用 RemoteWebDriver，它可以接受`ICapabilities`接口的任何实现，它`DesiredCapabilites`实现：

```
var capabilities = new DesiredCapabilities("internet explorer", string.Empty, new Platform(PlatformType.Windows));
capabilities.SetCapability("ignoreProtectedModeSettings", true);
var webDriver = new RemoteWebDriver(capabilities); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T14:27:43.807

[Jim Evans](https://stackoverflow.com/users/374693/jimevans) （Selenium 的贡献者）的[这篇博客文章](http://jimevansmusic.blogspot.com/2012/08/youre-doing-it-wrong-protected-mode-and.html)对围绕这个异常的上下文提供了一个非常深入的视图。我将在这里引用它以供后代使用：

在 IE 中，从“工具”菜单（或更高版本的工具栏中的齿轮图标）中，选择“Internet 选项”。转到安全选项卡。在每个区域的对话框底部，您应该会看到一个标有“启用保护模式”的复选框。对于每个区域，将复选框的值设置为相同的值（选中或未选中）。这是供参考的对话框：

![Internet Explorer 安全设置对话框](../Images/7bb9881cc2a185369c6389f9482d0305.png)

请注意，您不必更改安全级别的滑块，也不必禁用保护模式。我通常在所有区域都打开保护模式的情况下运行，因为我认为它提供了更安全的浏览体验。

注意：这仅在关闭保护模式时对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-23T06:13:48.270

我无法在我的系统上手动修改保护模式设置，因为它们已被禁用。但是下面用于更新注册表值的 VBA 代码片段对我有用。

```
Const HKEY_CURRENT_USER = &H80000001
strComputer = "."

Set ScriptMe=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _
    strComputer & "\root\default:StdRegProv")

'Disable protected mode for local intranet'
strKeyPath = "Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\1\"
strValueName = "2500"
dwValue = 0
ScriptMe.SetDWORDValue HKEY_CURRENT_USER,strKeyPath,strValueName,dwValue

'Disable protected mode for trusted pages'
strKeyPath = "Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\2\"
strValueName = "2500"
dwValue = 0
ScriptMe.SetDWORDValue HKEY_CURRENT_USER,strKeyPath,strValueName,dwValue

'Disable protected mode for internet'
strKeyPath = "Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\3\"
strValueName = "2500"
dwValue = 0
ScriptMe.SetDWORDValue HKEY_CURRENT_USER,strKeyPath,strValueName,dwValue

'Disable protected mode for restricted sites'
strKeyPath = "Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\4\"
strValueName = "2500"
dwValue = 0
ScriptMe.SetDWORDValue HKEY_CURRENT_USER,strKeyPath,strValueName,dwValue

msgbox "Protected Mode Settings are updated" 
```

只需将上面的代码复制粘贴到记事本中并使用 .vbs 扩展名保存并双击它！

现在尝试再次运行您的自动化脚本

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-05-14T16:38:01.790

[此问答](https://stackoverflow.com/questions/30242503/how-do-i-avoid-issues-with-protected-mode-using-iedriverserver-in-selenium)也可能对尝试处理保护模式问题的任何人有用。我无法通过 Internet Explorer 选项窗格让它工作，最终不得不手动调整注册表。

# inheritance - Symfony2 继承

> ID：13383774
> 
> 赞同：1
> 
> 时间：2012-11-14T17:15:07.157
> 
> 标签：inheritance, symfony

由于我们不仅可以在实体中使用继承，还可以在表单中使用继承，我设计了以下结构：

实体

*   班级人
*   班教授扩展人
*   学生类扩展人

表单类型

*   类 PersonType
*   类 ProfessorType 扩展 PersonType
*   StudentType 类扩展了 PersonType

现在，我的问题出在控制器上。我不知道是否应该对所有子实体使用 person 控制器，或者是否应该为每个子类创建一个特定的控制器。

使用通用控制器对实体之间的共同逻辑有很大帮助，而且每次创建新子类时都不需要添加整个控制器，但另一方面，处理每个子类的特定数据很复杂一。例如，如果我加载一个“人”，然后我想编辑或显示它，我需要知道它对应的表单类型和模板，但这在那个级别是不可能的。我应该使用嵌套的“if”来获取人的类，从而创建正确的表单类型和模板（硬代码）。这不会是“动态的”。

也许我可以使用不同的路线解决它，但我想知道这个问题的最佳（或至少是一个好的）解决方案是什么？我也应该在控制器中使用继承吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:34:03.590

我们需要[更多] 了解您的申请。

无论如何，这实际上取决于控制器的目的。您可以定义一个共同的祖先控制器，然后是扩展前者的子控制器，您将在其中重新定义您需要的方法。

当然，您需要为每个操作指定特定的路线。

# reference - PJSIP libsocket 编译错误

> ID：13383776
> 
> 赞同：1
> 
> 时间：2012-11-14T17:15:23.433
> 
> 标签：reference, undefined, symbols, pjsip

当我尝试在 Blackberry 10 IDE 中编译 pjsip 库时出现以下错误：

```
libpj-i486-pc-nto-qnx8.0.0.a(sock_bsd.o): undefined reference to symbol 'send@@libsocket.so.2'

'send@@libsocket.so.2' is defined in DSO /home/f3795594/bbndk/target_10_0_9_386/qnx6/x86/lib/libsocket.so.3 so try adding it to the linker command line 
```

有没有人遇到过这个错误？我知道这与 libsocket 库有关，但不知道从哪里开始。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:15:50.050

简单插入链接过程：

添加以下库：

LIBS += /Applications/bbndk/target_10_0_9_386/qnx6/x86/lib/libsocket.so.3

我有限的 c 编译知识妨碍了我。

# php - 如何在 PHP 类中声明静态变量，但在扩展基类的类中定义它？

> ID：13383780
> 
> 赞同：3
> 
> 时间：2012-11-14T17:15:32.787
> 
> 标签：php, mysql, static, extend

我有一个定义了选择、插入、更新和删除方法的 DatabaseObject 类。该类的目的是将我的 MySQL 数据库中的行子集表示为 PHP 对象。构造函数调用 MySQL 的 SELECT 命令，而析构函数调用 DELETE 命令（除非我要求它不要这样做）。

这是我的 DatabaseObject 类：

```
class DatabaseObject {  
    protected $table;
    protected $index_field;

    private $data;

    function __construct($id) {
        //MySQL SELECT and assign resource to data
    }

    function __destruct() {
        //MySQL UPDATE
    }

    public function insert($data) {
        global $db;     //Database Class for using MySQL

        $fields = array();
        $values = array();

        foreach ($data as $field => $value) {
            $fields[] = "`".$field."`";
            $values[] = "'".$db->escape($value)."'";
        }

        $sql = "INSERT INTO ".$this->table." (".join(', ', $fields).") VALUES (".join(', ', $values).")";
        if($db->query($sql)) {
            return $db->insertID();
        } else {
            return false;
        }
    }

    //More methods; update(), delete(), select()
} 
```

当我想访问特定表时，我扩展了 DatabaseObject 类。例如，我的 User 类用于我的用户表。这里是：

```
class User extends Object {
    public static $anonymous_data = array('user_id' => 0, 'user_level' => ANONYMOUS, 'username' => 'Anonymous');

    function __construct($user_id = NULL) {
        global $db;
        $this->db = $db;

        $this->table = USER_TABLE;
        $this->index_field = 'user_id';

        parent::__construct($user_id);
    }

    function __destruct() {
        parent::__destruct();
    }

    //Other user methods; login(), logout() etc.
} 
```

现在，我希望能够从用户类调用插入方法，而无需实例化用​​户类。我很确定，我必须让它静态才​​能这样做。如何使插入方法静态，但仍允许它使用扩展类中定义的表？

换句话说，我希望能够做到这一点：

```
User::insert($data);        //INSERT into user table
AnotherClass::insert($data);    //INSERT into another table 
```

...没有实例化任何一个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:24:45.093

```
<?php
class Foo {
    public static $anonymous_data = array();

    public static function aStaticMethod() {
        self::$anonymous_data = array(key, value);

        foreach (self::$anonymous_data as $key => $value) {
             echo "$key => $value";
        }
    }
}

Foo::aStaticMethod();
$classname = 'Foo';
$classname::aStaticMethod(); // As of PHP 5.3.0
?> 
```

对于静态方法。但是请注意静态变量不能以这种方式访问​​。在此处阅读有关此示例和静态关键字的更多信息：[PHP.net](http://php.net/manual/en/language.oop5.static.php)

更新：使用`self`而不是`$this->`示例。

# objective-c - postPath AFHTTPClient 中的 JSON 响应

> ID：13383784
> 
> 赞同：6
> 
> 时间：2012-11-14T17:15:57.660
> 
> 标签：objective-c, restkit, afnetworking, restkit-0.20

我刚刚切换到 RestKit 0.2，我目前正在使用新的“HttpClient”，它基本上是一个 AFHTTPClient。我有这行代码：

```
RKObjectManager* objectManager = [RKObjectManager sharedManager];
NSDictionary* params = [[NSDictionary alloc] initWithObjectsAndKeys: login, @"username", password, @"password", nil];

[[objectManager HTTPClient]postPath:@"users/login/?format=json" parameters:params
    success:^(AFHTTPRequestOperation *operation, id responseObject)
    {
        //reponseObject vs operation.response
        NSLog(@"%@", responseObject);
    }
    failure:^(AFHTTPRequestOperation *operation, NSError *error)
    {
        NSLog(@"ERROR");
    }]; 
```

此 POST 调用以以下形式返回 JSON 响应：{"api_key":"....","username":"...."}。就如此容易。

在切换到 0.2 之前，我可以通过以下方式在响应中获取 api_key 键：

```
 [[RKClient sharedClient] post:@"/users/login/?format=json" usingBlock:^(RKRequest *request)
 {
    request.onDidLoadResponse = ^(RKResponse *response)
    {
        id parsedResponse = [response parsedBody:NULL];
        NSString *apiKey = [parsedResponse valueForKey:@"api_key"];
    }
  }.....]; 
```

[http://restkit.org/api/master/Classes/RKResponse.html](http://restkit.org/api/master/Classes/RKResponse.html)

但是现在，我不能这样做，如果我在 responseObject 上执行 NSLog，我会得到：

<7b227265 61736f6e 223a2022 41504920 4b657920 666f756e 64222c20 22617069 5f6b6579 223a2022 61356661 65323437 66336264 35316164 39396338 63393734 36386438 34636162 36306537 65386331 222c2022 73756363 65737322 3a207472 75657d>

奇怪的是，如果我这样做：

```
 NSLog(@"%@", operation.responseString); 
```

我确实显示了 JSON（在 NSString 中）。

所以两个问题：

1）为什么打印 responseObject 显示 HEX 代码，而不是实际的 JSON 响应？

2) 为什么如果我执行 operation.responseString 会显示实际的响应对象？从 JSON 解析后，有没有办法在 ResponseObject 中获取实际数据？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-01T11:08:07.567

AFNetworking 应该实例化一个`AFJSONRequestOperation`. 可能它创建了一个基本的`AFHTTPRequestOperation`代替（检查`[operation class]`），导致一个 NSData 对象作为响应。

确保在 AFHTTPClient 子类 (initWithBaseURL) 的 init 方法中注册操作类：

```
[self registerHTTPOperationClass:[AFJSONRequestOperation class]];

// Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
[self setDefaultHeader:@"Accept" value:@"application/json"]; 
```

您也可以尝试像这样直接使用 AFJSONRequestOperation：

```
NSURLRequest *request = [[objectManager HTTPClient] requestWithMethod:@"POST" path:@"users/login/?format=json" parameters:params];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"JSON: %@", JSON);
} failure:nil];
[[objectManager HTTPClient] enqueueHTTPRequestOperation:operation]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-01T06:25:35.993

如果我没记错的话，您所看到的是调用成功块时提供给您的 NSData 的原始字节。

您发布的十六进制内容为：

`{"reason": "API Key found", "api_key": "a5fae247f3bd51ad99c8c97468d84cab60e7e8c1", "success": true}`

第二个`NSLog`向您显示您想要的内容的原因是`%@`格式字符串调用了您传递它的对象的描述（如果我在这里错了，请纠正我，SO）并且`NSData`可能知道它是下面的字符串。

那么，关于如何获取 JSON。这真的很简单。获得响应对象后，您可以执行以下操作：

`NSDictionary* jsonFromData = (NSDictionary*)[NSJSONSerialization JSONObjectWithData:responseObject options:NSJSONReadingMutableContainers error:&error];`

这将为您做的是使用 return an`NSDictionary`对 JSON 中的根对象进行编码，然后字典中的每个值的类型将是`NSString`, `NSNumber`, `NSArray`,`NSDictionary`或`NSNull`。有关文档，请参阅[NSJSONSserialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

使`NSJSONReadingMutableContainers`字典和数组可变。这只是我的代码的剩余部分。

希望您使用的是 iOS 5 或更高版本，或者您需要为解析找到另一个解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T15:29:45.863

```
success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSData *responseData = operation.HTTPRequestOperation.responseData;
    id parsedResponse = [RKMIMETypeSerialization objectFromData:responseData    MIMEType:RKMIMETypeJSON error:nil];
    NSString *apiKey = [parsedResponse valueForKey:@"api_key"]
} 
```

# arrays - matlab-返回矩阵

> ID：13383785
> 
> 赞同：1
> 
> 时间：2012-11-14T17:15:58.540
> 
> 标签：arrays, matlab, matrix, return

我需要帮助，如何从 matlab 中的函数返回矩阵？我有一个零矩阵（大小 NxN）。我将矩阵发送到某个函数以更新她。如何返回更新后的矩阵？

在代码中：

```
matrix = zeros(size); %put zeros
updateMatrix(radius,x0,y0,matrix);%call to function

function updateMatrix(radius,x0,y0,matrix)
    update the matrix
end

continue the prog with the updated matrix 
```

我只需要返回更新后的矩阵，我不会更改其他变量。

我试图这样做：

```
matrix = zeros(size); %put zeros
matrix=updateMatrix(radius,x0,y0,matrix);%call to function

function [matrix]=updateMatrix(radius,x0,y0,matrix)
    update the matrix
end

continue the prog with the updated matrix 
```

但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:16:52.920

Matlab 不支持指针，除非指定，否则不能更改输入。尝试这样的事情。

```
matrix=updateMatrix(radius,x0,y0,matrix)    

function matrix=updateMatrix(radius,x0,y0,matrix)
    %update the matrix
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:26:11.510

您不能像在 C 或 C++（或任何数量的其他语言）中那样传递指向 MATLAB 函数的指针或引用，并让它对数据进行就地操作。但是，MATLAB 优化器应该能够识别意图在函数内就地改变数据的情况。[这种优化](http://blogs.mathworks.com/loren/2007/03/22/in-place-operations-on-data/)是几年前添加的。

把你的函数写成

```
function matrix = updateMatrix( radius, x0, y0, matrix )
  % do whatever to the matrix variable
end 
```

称它为

```
m = zeros( row, col );
m = updateMatrix( r, x0, y0, m ); 
```

诀窍是保持输入和输出变量的名称相同，以便优化器意识到您希望就地改变数据。

# git - 如何将 git 存储库转换为可以与补丁一起应用的单个 .diff 文件

> ID：13383795
> 
> 赞同：0
> 
> 时间：2012-11-14T17:16:30.023
> 
> 标签：git, diff, patch

我有多个 git 存储库，并希望为每个存储库生成一个大的 .diff 文件。

然后，客户将使用“补丁”实用程序之类的工具应用此 .diff 补丁，以在存储库中生成文件减去 git 历史记录。

有谁知道我怎么能做到这一点？

谢谢你的时间，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:53:56.720

如果您想与任何事物进行比较……为什么不这样做呢？

```
$ mkdir empty
$ ls
empty myproject
$ diff -ruN empty myproject > diff-against-nothing.patch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:56:39.947

git diff 4b825dc642cb6eb9a060e54bf8d69288fbee4904 > diff-against-nothing.patch 我发现了 git 的魔法空 SHA1！

# javascript - 使用对象字面量而不是 switch 语句

> ID：13383798
> 
> 赞同：13
> 
> 时间：2012-11-14T17:16:46.467
> 
> 标签：javascript, loops, if-statement, switch-statement

**关于switch**和**if/else**语句中的最佳实践有很多讨论和评论。我看到有人说*我们都应该尽可能使用对象字面量而不是 switch*。

所以我复制了这个案例，并在 switch 之间进行[了一些简单的测试：](http://jsperf.com/switch-from-switches)

```
(function(test){
    var bar;

    switch(bar) {
        case 1:
            bar = 'red';
            break;
        case 2:
            bar = 'blue';
            break;
        case 3:
            bar = 'yellow';
            break;
        case 4:
            bar = 'green';
            break;
        case 5:
            bar = 'black';
            break;
    }

    return bar;
})(5); 
```

并通过对象文字传递：

```
(function(test){
    return { 1: 'red', 2: 'blue', 3: 'yellow', 4: 'green', 5: 'black' }[ test ];
})(5); 
```

运行此[测试](http://jsperf.com/switch-from-switches)后，显然 switch 语句比在对象字面量中调用测试值更快。

我的测试错了吗？在这种情况下使用一种或另一种方法之前我应该​​考虑什么？或者也许我看到的关于这个主题的自以为是的评论是错误的，我不应该试图绕过基本面......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T17:29:08.243

您可能会看到规模效应：switch 语句是`O(n)`，而哈希表查找（可能用于查找对象文字中的方法）是 (amortized) `O(1)`。但是 Big-O 度量只能准确地描述性能如何在真正的大输入上扩展。`if`在您的测试中，五个语句比哈希表查找更快也就不足为奇了。

所以基本上： *你有多少把钥匙？* 如果您只有五个键，则每次查找平均会命中 2.5 个键，这比单个哈希表查找要快。但是如果你有 500 个呢？这是平均 250 条`if`语句 - 仍然与*单个*哈希查找相比。哈希表（对象文字）方法在这一点上几乎肯定会更好。

但最终的答案是什么？每个人都讨厌听到这个，但这是唯一权威的方法：使用您的实际生产代码进行基准测试。这是一种痛苦，但你肯定知道。

希望有帮助！

**PS：** 这是抛开编码风格偏好的所有考虑因素，但我真的不想进入那个......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:46:18.557

好吧，我修改了你的代码（[在这里](http://jsperf.com/switch-from-switches/2)），让你看看什么时候对象概念会更好。

正如 Xavier 所描述的，但它不必达到 500 左右。大约有 40 个案例暴露了开关。

另一件事，除了要注意的**列表**的大小之外，在对象概念中，查找积分将没有任何好处，而 switch 可以优化该位。

# javascript - 有没有办法告诉服务器端重定向将完成什么？

> ID：13383800
> 
> 赞同：0
> 
> 时间：2012-11-14T17:16:50.513
> 
> 标签：javascript, mime-types

我看到人们在他们的论坛签名中使用 bitly 链接来显示图像。这对我来说是新事物。Javascript有没有办法确定位链接（或任何其他服务器端重定向链接）是否转发到**或**生成图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:28:09.417

此函数将确定链接是否是或转发到图像

```
function isImageLink(uri,callback) {
    var img = document.createElement("img");
    img.onerror = function() {
       callback(false);        
    }
    img.onload = function() {
        callback(true);
    }
    img.src = uri
} 
```

它需要使用 URL 和 Callback 调用，如下所示：

```
isImageLink("http://bit.ly/SVIR5g",function(isImage){
    if(isImage) {
        console.log("Valid Image");                
    }
    else {
        console.log("Invalid Image");            
    }
}); 
```

在这里工作小提琴：http: [//jsfiddle.net/RLeRW/6/](http://jsfiddle.net/RLeRW/6/) ​</p>

# java - OpenCV 的 FrameGrabber 的输出图像不正确

> ID：13383802
> 
> 赞同：0
> 
> 时间：2012-11-14T17:16:53.797
> 
> 标签：java, image-processing, opencv, webcam, javacv

我正在开发一个依赖于手指检测的 OpenCV 项目。目前我有一个`OpenCVFrameGrabber`抓取框架并将其放在`IplImage`. 然后我将该图像绘制到我的 GUI 上。

这一切都有效，但即使我有彩色相机，绘制的图像似乎也是黑白的。图像中有明显的垂直线条，当有一些颜色时，它似乎沿着这些线条分割成组件。

有谁知道获取原始网络摄像头图像的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:35:40.477

我最近开始使用 JavaCV，我一直试图避免使用这些新类并坚持使用“*原始*”OpenCV 方法。

我建议您尝试以下代码并确保最简单的捕获过程有效：

```
public static void main(String[] args) 
{
    CvCapture capture = cvCreateCameraCapture(0);
    if (capture == null)
    {
        System.out.println("!!! Failed cvCreateCameraCapture");
        return;
    }

    cvNamedWindow("camera_demo");

    IplImage grabbed_image = null;

    while (true)
    {
        grabbed_image = cvQueryFrame(capture);
        if (grabbed_image == null)
        {
            System.out.println("!!! Failed cvQueryFrame");
            break;
        }                    

        cvShowImage("camera_demo", grabbed_image);
        int key = cvWaitKey(33);
        if (key == 27)
        {
            break;
        }
    }

    cvReleaseCapture(capture);
} 
```

如果这有效，您的问题可能与`OpenCVFrameGrabber`. 如果没有，您可能想用另一台相机试验您的代码。

# php - /etc/php5/conf.d 文件夹中的 .ini 文件有什么用？

> ID：13383806
> 
> 赞同：19
> 
> 时间：2012-11-14T17:17:12.283
> 
> 标签：php, linux, ubuntu, configuration

我知道 .ini 文件`/etc/php5/cli`与 PHP 的 CLI 使用有关，其中的文件`/etc/php5/fpm`是关于 PHP 的 FastCGI/FPM 方面的，但是位于的 .ini 文件`/etc/php5/conf.d`呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-01-11T14:44:33.247

这些文件将覆盖 php.ini 中的设置。将配置内容放在这里可以让您在保持更新更简单的同时进行自定义设置：如果您修改 php.ini 本身，那么您要么必须保留旧的 php.ini，要么在更新 PHP 时覆盖它。如果您保留自定义设置，例如。`conf.d/local.ini`那么您可以轻松地更新 PHP，同时保留任何特定于环境的设置。

（归功于[这篇博文](http://www.phpdeveloper.org.uk/overriding-default-php-settings-in-debian-and-ubuntu/)）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-14T17:21:14.517

从`/usr/share/doc/php5-common/README.Debian.gz`（在安装了 PHP 的 Ubuntu 系统上）：

> 此外，每个 SAPI 都配置了编译时选项
> 
> ```
>  --with-config-file-scan-dir=/etc/php5/$SAPI/conf.d 
> ```
> 
> 对于所有 SAPI，它实际上是一个指向中央目录 /etc/php5/conf.d 的符号链接。在此目录中找到的任何以 .ini 结尾的文件都将被 php SAPI 视为配置文件。
> 
> 这种方法的基本原理是，每个 SAPI 都可以通过最少的 conffile 处理进行相同的配置，但同时，如果您想要特定于 SAPI 的配置，您可以删除符号链接。

# c# - 将项目划分为csv的一批数字

> ID：13383807
> 
> 赞同：1
> 
> 时间：2012-11-14T17:17:13.123
> 
> 标签：c#, linq

我有一个项目清单，例如

> 编号 1 2 3 4 5 6 7 8 9 10 11 12 13

我想将此写入 csv 并以 5 个为一组进行，因此当它达到 id 5 时，它将进入下一批。我正在考虑做mod来迎合这个所以

```
int noOfIds = MyIDList.Count % 5; // to get the number of loops i need

List<MyIDList> topFiveID = (from c in MyIDList
                select c).Take(5).ToList(); // get top 5 from the list 
```

然后我得到剩下的

```
List<MyIDList> restOfIDs = MyIDList.Where(c => !topFiveID.Any(tc => tc.ID == c.ID)).ToList(); 
```

现在我可以看到这最多可以容纳 9 个 id，有人可以告诉我如何满足所有 id 的需求，无论有多少。

希望它足够清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:23:49.147

以下将从枚举中返回给定大小的批次：

```
public static IEnumerable<IEnumerable<TSource>> Batch<TSource>(
    this IEnumerable<TSource> source,
    int batchSize)
{
    var batch = new List<TSource>();
    foreach (var item in source)
    {
        batch.Add(item);
        if (batch.Count == batchSize)
        {
             yield return batch;
             batch = new List<TSource>();
        }
    }

    if (batch.Any()) yield return batch;
} 
```

像这样使用：

```
foreach (var list in MyIdList.Batch(5))
{
    // list is an IEnumerable<T> containing up to 5 items
    Console.WriteLine("{0}", String.Join(",", list));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:51:33.127

您可以执行以下操作

```
MyGroupedIDs = MyIDList.Select((v, i) => new {GID = i/5; Value = v})
                       .GroupBy(p => p.GID); 
```

这将按索引除以 5 对 id 进行分组，因为它们是整数，所以会下限。所以前 5 个项目的“GID”为 0，接下来的 5 个项目为 1，以此类推。

# android - 变量不更新值

> ID：13383809
> 
> 赞同：2
> 
> 时间：2012-11-14T17:17:25.970
> 
> 标签：android, class, variables

这很奇怪，也许有人可以帮忙。我有两个类，当我尝试从主类访问变量时，值始终为 0.0

```
MAIN CLASS

public class MainActivity extends Activity {
  public float angleCurrent;
  - do something whith angleCurrent
  //System.out.println(angleCurrent);    - I get right values
}

SECOND CLASS

public class SecondClass extends ImageView {
  public float curAngle = new MainActivity().angleCurrent;
  //System.out.println(curAngle);   - I get 0.0 all the time
} 
```

代码只是说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:24:24.150

这里有几个大问题。首先，为什么会发生这种行为：

您没有从`MainActivity`内部的第一个实例访问变量`SecondClass`，而是创建了 的第二个新实例`MainActivity`，因此您可以访问与原始变量不同的变量。

现在，第二个问题围绕在 Android 中执行此操作的正确方法。你不应该***直接***实例化 Activity 实例。传递对 Activity 的引用比框架已经做的更多也不是好的做法。如果您的 Activity 需要将一些信息传递给您的 custom `ImageView`，您应该在您的上创建一个方法`ImageView`，您可以使用该方法让 Activity 向前传递值（即`SecondClass.setCurrentAngle(angleCurrent)`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:23:42.313

如果您正在寻找一个视图来访问活动中的变量，那么它将无法正常工作。您需要将 setMethod 添加到自定义视图并设置活动的值。Chthlu 关于为什么你没有获得价值是正确的：`new`创建一个与你在屏幕上的不同的实例。你永远不应该调用`new`Activity 类。您甚至不应该拥有 Activity 的构造函数，您应该在`onCreate`方法中设置所有内容。

# html - Google+ 按钮徽章错误

> ID：13383813
> 
> 赞同：1
> 
> 时间：2012-11-14T17:17:40.720
> 
> 标签：html, google-chrome, google-plus

我想在我的页面上使用这个按钮，但是当我使用 chrome 脚本创建一个新圈子时，同样的情况发生在 Firefox 和 safari explorer 仅适用于使用控制台进行分析时出现此错误

**加载资源失败：服务器响应状态为 400 (Bad Request)** /+1/fastbutton?bsv&annotation=inline&width=300&hl=en-US&origin=file%3A%2F%2F&url=file%3A%2F%2F%2FC %3A%2FUsers%2Fusuario%2FDesktop%2Fnoche.html&jsh=m%3B%2F%2Fapps-static%2F_%2Fjs%2Fgapi%2F_*功能*_%2Frt%3Dj%2Fver%3DlgJnpFHo_sE.es.%2Fsv%3D1%2Fam% 3D!9YrXPirxx2-ITyEIjA%2Fd%3D1%2Frs%3DAItRSTMUGsaYaMyYb_qFDQo8MG8RKB82aQ#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Conload&id=I1_1352910%40042F">https://plusone%400423&parent%3400423&parent .com/ */+1/fastbutton?bsv&annotation=inline&width=300&hl=en-US&origin=file%3A%2F%2F&url=file%3A%2F%2F%2FC%3A%2FUsers%2Fusuario%2FDesktop%2Fnoche.html&*jsh=m%3B%2F %2Fapps-static%2F_%2Fjs%2Fgapi%2F_*特性*_%2Frt%3Dj%2Fver%3DlgJnpFHo_sE.es.%2Fsv%3D1%2Fam%3D!9YrXPIrxx2-ITyEIjA%2Fd%3D1%2Frs%3DAItRSTMUGsaYaMyYb_qFDQo8MG8RKB82aQ#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Conload&id =I1_1352910400423&父=文件%3A%2F%2F

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:38:34.597

我认为问题在于您正在通过`file://`协议在本地测试此代码，如查询参数所示：

```
origin=file%3A%2F%2F&url=file%3A%2F%2F%2FC%3A%2FUsers%2Fusuario%2FDesktop%2Fnoche.html 
```

将您的文件放在可以通过 http 提供服务的位置。将页面上传到您的站点或安装 Web 服务器进行测试。

我相信我能够复制您在 Chrome 和 Safari 中看到的内容；但是，这种方法不是使用插件的受支持方法，也不会用于将页面提供给真实用户。

# mod-rewrite - mod_rewrite 摆脱端口号以支持目录

> ID：13383814
> 
> 赞同：0
> 
> 时间：2012-11-14T17:17:41.647
> 
> 标签：mod-rewrite

我如何 mod_rewrite`ip:4040`到`ip/streamer`？

我有应用程序，`ip:4040`但用户很难记住端口号。所以我创建了目录`/var/www/streamer`

现在我正在创建 apache 虚拟主机：

```
<VirtualHost *:80>

        DocumentRoot /var/www/streamer

        RewriteEngine On
        RewriteRule / :4040 

</VirtualHost> 
```

显然 rewriteRule 是不正确的，但是对正则表达式一无所知，对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:54:53.170

假设您的 Web 服务器也在侦听端口 80 和 4040：

```
RewriteEngine On
RewriteCond %{HTTP_HOST}  4040
RewriteRule .*            http://xxxxxxx/   [L,R=301] 
```

其中**xxxxxxx**是服务器主机名或 IP，没有端口号。

# regex - 在期望脚本中显示 cdp 邻居

> ID：13383821
> 
> 赞同：3
> 
> 时间：2012-11-14T17:18:00.447
> 
> 标签：regex, expect, cisco

一般来说，我对脚本很陌生。我正在编写一个将 ssh 连接到 Cisco 交换机的期望脚本，并运行“show cdp neighbors”命令以获取连接到交换机的所有设备的列表。然后我将输出保存到一个变量中并退出 ssh 会话。我在包含的文件中设置了用户名和密码。

```
#!/usr/bin/expect -f
#exp_internal 1

source accountfile
set timeout 10
spawn $env(SHELL)
expect "#"
send "ssh $USERNAME@<hostname>\r"
expect {
  "continue connecting" {
    send_user "Adding host to ssh known hosts list...\n"
    send "yes\n"
    exp_continue
  }
  "Do you want to change the host key on disk" {
    send_user "Changing host key on disk...\n"
    send "yes\n"
    exp_continue
  }
  "assword:" {
    send "$PASSWORD\r"
  }
}
expect "#"
send "term len 0\r"
expect "#"
send "show cdp neighbors\r"
expect "#"
set result $expect_out(buffer)
send "exit\r"
expect "#" 
```

因此，我想获取 $result 并查找包含“ R ”的行，并将这些行保存到文件中（R 两边有空格表示路由器，这是我感兴趣的）

问题是，如果连接的设备的名称很长，它会将设备名称放在一行中，然后将有关该设备的其余数据放在下一行。所以如果我匹配'R'字符串，我不会得到设备的名称，因为名称在前一行。

```
Device ID        Local Intrfce     Holdtme     Capability Platform  Port ID
...
<device_name_really_long>
                 Gig 2/0/52        171             R S I  WS-C6509  Gig 3/14
<device_name2>   Gig 2/0/1         131             H P M  IP Phone  Port 1
... 
```

有任何想法吗？可能有一个正则表达式可以做到这一点，但我不知道正则表达式。

解决：感谢格伦杰克曼

我最终不得不添加一个期望条件来检查我是否有一个完整的缓冲区，所以我的最终代码如下所示：

```
#!/usr/bin/expect
#exp_internal 1
match_max 10000
set expect_out(buffer) {}
set timeout 30

source accountfile
spawn $env(SHELL)
expect "#"
send "ssh $USERNAME@ol2110-3750stack.sw.network.local\r"
expect {
    "continue connecting" {
        send_user "Adding host to ssh known hosts list...\n"
        send "yes\n"
        exp_continue
    }
    "Do you want to change the host key on disk" {
        send_user "Changing host key on disk...\n"
        send "yes\n"
        exp_continue
    }
    "assword:" {
        send "$PASSWORD\r"
    }
}
expect "#"
send "term len 0\r"
expect "#"
send "show cdp neighbors\r"
set result ""
expect {
    {full_buffer} {
        puts "====== FULL BUFFER ======"
        append result $expect_out(buffer)
        exp_continue
    }
    "#" {
        append result $expect_out(buffer)
    }
}
send "exit\r"
expect "#"
set devices [list]
set current_device ""
set lines [split $result "\n"]
foreach line $lines {
    set line [string trim $line]
    if {[llength $line] == 1} {
        set current_device $line
        continue
    }
    set line "$current_device$line\n"
    if {[string match {* R *} $line]} {
        lappend devices $line
    }
    set current_device ""
}

puts $devices 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:40:21.310

```
set devices [list]
set current_device ""
foreach line [split $result \n] {
    if {[llength [split [string trim $line]]] == 1} {
        set current_device $line
        continue
    }
    set line "$current_device$line"
    if {[string match {* R *} $line]} {
        lappend devices $line
    }
    set current_device ""
}

# devices list should now contain "joined" routers. 
```

# android - 原生多线程和 JNI

> ID：13383823
> 
> 赞同：3
> 
> 时间：2012-11-14T17:18:13.170
> 
> 标签：android, java-native-interface

我有一个 Android 应用程序，它由一些需要能够调用 Java 对象的方法的本机线程（未附加到 JVM）组成。

我打算这样做的方式是创建一个 JNI 函数，我从相关的 Java 对象调用该函数，它允许我在静态本机数据结构中获取和缓存所需的 Java 对象方法 ID、JNIEnv 和对象引用，以便我的本机线程可以（线程安全地）访问所需的方法（例如使用 (*env)->CallVoidMethod(env, this, JavaMethodID, ...) 等；

我不相信这种方法会奏效，因为我读到 JNIEnv 指针不能在线程之间共享，并且只有附加到 JVM 的线程才能做这种事情......

这是一种可行的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:48:10.277

1.  在`JNI_OnLoad`，缓存`JavaVM*`。这是跨线程持久且有效的唯一事物。
2.  一旦您设置了一些本机线程，调用`AttachCurrentThread`并获取`JNIEnv*`，这仅对该单个线程有效。
3.  使用`JavaVM*`and `JNIEnv*`，查找您的`jclass`es、`jobject`s 和`jmethodID`s。*这些仍然仅对您附加的单个线程有效。*
4.  将`jclass`es 和`jobject`s 转换为全局引用，以便它跨线程持久存在。`jmethodID`s 不需要全球化，它们不是工作项目。
5.  在任何其他本机线程上，您再次需要调用`AttachCurrentThread`以获取该线程的有效值`JNIEnv*`。
6.  当您不再需要它们时，不要忘记删除创建的全局引用（`JNI_OnUnload`最迟）

# php - 在连接的 var 上使用 addChild 时出现 PHP SimpleXML 致命错误

> ID：13383824
> 
> 赞同：1
> 
> 时间：2012-11-14T17:18:13.910
> 
> 标签：php, xml, simplexml, addchild

我正在尝试在连接的 var 上使用 addChild 函数，但它似乎不起作用。我想它来自参数的对象类型，但我似乎无法将手指放在它上面。当我尝试使用标准 var 时，它可以工作：

```
$prnp = $ndprofileASz2tnrap_portrestrictions->addChild('portRestriction'); 
```

但是当我尝试使用多个变量时，会出现错误：

```
$asversion = 'z2tnrap';
$nppr = '$ndprofileAS'.$asversion.'_portrestrictions';
$prnp = $nppr->addChild('portRestriction'); 
```

如果我“回显”$nppr var，我会得到正确的 var，但 addChild 函数会导致错误消息：“致命错误：在非对象上调用成员函数 addChild()”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:20:22.687

`$nppr`那时将只是一个字符串。它不再是一个 simplexml 对象了。同样，您的语法不正确：

```
$nppr = '$ndprofileAS'.$asversion.'_portrestrictions';
        ^-           ^- 
```

单引号字符串中的变量不会被插值。您正在将一个 literal `$`、一个 literal `n`、一个 literal`d`等插入到您的字符串中，而不是 $ndprofileAS 变量的值。

# objective-c - Facebook sdk：在我给予许可后，ActiveSession 仍然关闭

> ID：13383826
> 
> 赞同：0
> 
> 时间：2012-11-14T17:18:18.073
> 
> 标签：objective-c, ios, facebook-graph-api

我正在我的应用程序中集成 facebook 登录。我只是希望用户能够登录并且我得到他的生日和位置。

我获得了最新的 Facebook SDK 并成功地将其添加到我的应用程序中。我还在 facebook 上创建了一个新应用程序，并添加了提供给我的应用程序的密钥。

我创建了一个“使用 facebook 登录”按钮并完成了以下操作

当用户点击按钮时

```
// handler for button click
- (IBAction)facebookLoginTouched:(id)sender {
    [self openSessionWithAllowLoginUI:YES];
} 
```

此方法将向用户显示 facebook 登录页面以获得他的许可

```
-(BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_location",
                            @"user_birthday",
                            nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self HandleLogin];
                                     }];
} 
```

然后如果登录和许可成功

```
- (void)HandleLogin {
    if (FBSession.activeSession.isOpen) {
        //THIS IS NEVER REACHED

        [FBRequestConnection
         startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                       id<FBGraphUser> user,
                                       NSError *error) {
             //DO SOMETHING WITH THE USER INFO
         }];
    }
} 
```

**我的问题：**

当我点击按钮时，facebook 页面正确进入，我输入了我的用户名/密码。它正确记录了我，并且我允许该应用程序访问我的信息。完成后，我成功返回应用程序。

但是，当代码到达时，`FBSession.activeSession.isOpen`它会返回 false。

为什么我正确登录并授予权限后会话仍然关闭？

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:26:31.907

您可能缺少处理从 Facebook 应用返回的代码。在您的应用委托实现文件中添加以下内容：

```
- (BOOL)application:(UIApplication *)application 
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
   return [FBSession.activeSession handleOpenURL:url]; 
} 
```

# ios - 在 EKEventEditViewController 中响应“取消”或“完成”

> ID：13383827
> 
> 赞同：4
> 
> 时间：2012-11-14T17:18:19.103
> 
> 标签：ios, nscalendar, ekevent

我正在使用一个 EKEventEditViewController，我可以用我需要的信息填充它。我被授予访问日历和所有内容的权限。我的问题是当我单击“取消”时没有任何反应。当我单击“完成”时，我收到一条错误消息，提示未设置日历、未设置日期以及“该事件不属于该事件存储”。

我不认为我的 didCompleteWithAction 委托方法被调用了。

我的 viewController 符合：

```
@interface EventoViewController : UIViewController <EKEventEditViewDelegate> 
```

当我尝试将 self 设置为委托时，出现错误：

```
sending EventoViewController *const__strong' to parameter of incompatible type 'id<UINavigationControllerDelegate>' 
```

原始代码.h

```
#import <UIKit/UIKit.h>
#import <EventKit/EventKit.h>
#import <EventKitUI/EventKitUI.h>

@interface EventoViewController : UIViewController <EKEventEditViewDelegate>

@property (weak, nonatomic) IBOutlet UILabel *eventDetailTitleLabel;
@property (weak, nonatomic) IBOutlet UILabel *eventDetailDateLabel;
@property (weak, nonatomic) IBOutlet UILabel *eventDetailDescriptionLabel;

- (IBAction)closeModalView:(id)sender;
- (IBAction)addEventToNative:(id)sender;

@end 
```

原始.m

```
#import "EventoViewController.h"

@implementation EventoViewController

@synthesize eventDetailTitleLabel, eventDetailDateLabel, eventDetailDescriptionLabel;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad { [super viewDidLoad]; }

- (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; }

- (IBAction)closeModalView:(id)sender { [self dismissModalViewControllerAnimated:YES]; }

- (IBAction)addEventToNative:(id)sender {
NSLog(@"Clicked ");
EKEventStore *eventStore = [[EKEventStore alloc] init];

if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
    // iOS 6 and later
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {

        // perform the main thread here to avoid any delay. normally seems to be 10 to 15 sec delay.
        [self performSelectorOnMainThread: @selector(presentEventEditViewControllerWithEventStore:) withObject:eventStore waitUntilDone:NO];

        if (granted){
            NSLog(@"We are granted to access Calendars!");
            //---- codes here when user allow your app to access theirs' calendar.

        }
        else {
            //---- code for no permission
            NSLog(@"We have no permission to access calendars!");
        }
    }];
}
}

- (void)presentEventEditViewControllerWithEventStore:(EKEventStore*)eventStore {
EKEventEditViewController* eventEditVC = [[EKEventEditViewController alloc] init];
eventEditVC.eventStore = eventStore;

EKEvent* event = [EKEvent eventWithEventStore:eventStore];
event.title = self.eventDetailTitleLabel.text;
event.startDate = [NSDate date];
event.endDate = [NSDate date];
event.URL = [NSURL URLWithString:@"http://portalsatuat.plataforma.sat.gob.mx/m/sp/paginas/home.aspx"];
event.notes = @"Evento SAT";
event.allDay = YES;
eventEditVC.event = event;

//eventEditVC.delegate = (id)self;
[self presentViewController:eventEditVC animated:YES completion:nil];
}

- (void)eventEditViewController:(EKEventEditViewController *)controller didCompleteWithAction:(EKEventEditViewAction)action {
    NSLog(@"Clicked Cancel or Done");
    [self dismissModalViewControllerAnimated:YES];
}

- (void)eventViewController:(EKEventViewController *)controller didCompleteWithAction:(EKEventViewAction)action {
    NSLog(@"No se que esta pasando aqui!");
}

- (void)viewDidUnload {
    [self setEventDetailTitleLabel:nil];
    [self setEventDetailDateLabel:nil];
    [self setEventDetailDescriptionLabel:nil];
    [super viewDidUnload];
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:36:26.803

您需要在视图控制器类中将 self 分配给控制器上的**editViewDelegate**属性 - EKEventEditViewController 类是 UINavigationController 的子类，因此继承的委托属性用于处理导航事件。希望有帮助。

```
- (void)presentEventEditViewControllerWithEventStore:(EKEventStore*)eventStore {
    EKEventEditViewController* eventEditVC = [[EKEventEditViewController alloc] init];
    eventEditVC.eventStore = eventStore;
    // Add this line:
    eventEditVC.editViewDelegate = self; 
```

# mpi - mpi 多个初始化完成

> ID：13383828
> 
> 赞同：5
> 
> 时间：2012-11-14T17:18:20.453
> 
> 标签：mpi

假设我有充分的理由做以下事情（我想我有），如何让它发挥作用？

```
#include "mpi.h"

int main( int argc, char *argv[] )
{
    int myid, numprocs;

    MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&numprocs);
    MPI_Comm_rank(MPI_COMM_WORLD,&myid);
    // ...
    MPI_Finalize();

    MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&numprocs);
    MPI_Comm_rank(MPI_COMM_WORLD,&myid);
    // ...
    MPI_Finalize();

    return 0;
} 
```

我得到了错误：

```
--------------------------------------------------------------------------
Calling any MPI-function after calling MPI_Finalize is erroneous.
The only exceptions are MPI_Initialized, MPI_Finalized and MPI_Get_version.
--------------------------------------------------------------------------
*** An error occurred in MPI_Init
*** after MPI was finalized
*** MPI_ERRORS_ARE_FATAL (your MPI job will now abort)
[ange:13049] Abort after MPI_FINALIZE completed successfully; not able to guarantee     that all other processes were killed! 
```

这样做的原因：

我用 Python 封装了 C++ 代码。一些包装类具有调用 MPI_Init 的构造函数和调用 MPI_Finalize 的析构函数。我希望能够在 Python 中自由创建、删除重新创建包装这个 C++ 类的 Python 对象。最终目标是完全在 Python 中创建一个 Web 服务，一次导入 Python C++ 扩展，并根据用户请求执行一些 Python 代码。

编辑：我想我会重构 C++ 代码，以便在构造函数和析构函数中不使用 MPI_Init 和 MPI_Finalize，因此可以在 Python 脚本中只执行一次（使用 mpi4py）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:44:12.683

你基本上得到了正确的解决方案，所以我只是确认一下。实际上多次调用`MPI_Init`和调用是错误的，如果您有一个实体在创建/销毁时在内部调用这些，那么您只能实例化该实体一次。`MPI_Finalize`如果要创建多个实例，则需要更改实体以执行以下操作之一：

1.  提供用户可以在外部设置的不调用 Init 和 Finalize 的选项
2.  使用`MPI_Initialized`and`MPI_Finalized`来决定是否需要调用以上任何一个

# java - 上传图片到服务器

> ID：13383833
> 
> 赞同：0
> 
> 时间：2012-11-14T17:18:32.963
> 
> 标签：java, android, file-upload

我用谷歌搜索了很多，但它不起作用。我发现了很多有信息的网站，但是我的应用程序在所有网站上都崩溃了。我要打开的图片是：“lastfile.png”。它存储在内部存储中，所以我用 openFileInput("lastfile.png"); 打开它

我在 AsyncTask 中执行此操作。

到目前为止，这是我的代码：

```
class PostTask extends AsyncTask<String, String, String>{
        @Override
        protected String doInBackground(String... uri) {
            if(picture == null) {
                HttpClient httpclient = new DefaultHttpClient();
                HttpResponse response;
                String responseString = null;
                try {
                    response = httpclient.execute(new HttpGet(uri[0]));
                    StatusLine statusLine = response.getStatusLine();
                    if(statusLine.getStatusCode() == HttpStatus.SC_OK){
                        ByteArrayOutputStream out = new ByteArrayOutputStream();
                        response.getEntity().writeTo(out);
                        out.close();
                        responseString = out.toString();
                    } else{
                        response.getEntity().getContent().close();
                        throw new IOException(statusLine.getReasonPhrase());
                    }
                } catch (ClientProtocolException e) {
                    Toast.makeText(AddStoryActivity.this, getResources().getString(R.string.error), Toast.LENGTH_LONG).show();
                    e.printStackTrace();
                } catch (IOException e) {
                    Toast.makeText(AddStoryActivity.this, getResources().getString(R.string.error), Toast.LENGTH_LONG).show();
                    e.printStackTrace();
                }
                return responseString;
            } else {
                /* IMAGE UPLOAD */
            }
            return "";
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            progress.cancel();
            Toast.makeText(getApplicationContext(), result, Toast.LENGTH_LONG).show();       
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:33:22.490

我这样做的方法是将img压缩为一种字符串，然后将其作为名称值对发送，然后使用php在服务器端解码字符串。

位图 bitmapOrg = BitmapFactory.decodeResource("您在设备上的图像路径");

```
 ByteArrayOutputStream bao = new ByteArrayOutputStream();
        bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
        byte [] ba = bao.toByteArray();
        String ba1= Base64.encodeToString(ba, 0);
         ArrayList<NameValuePair> nameValuePairs = new
ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("image",ba1));

try{

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://your_url/sink.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
          }catch(Exception e){

                Log.e("log_tag", "Error in http connection "+e.toString());
          } 
```

接收器.PHP

```
<?php

$base=$_REQUEST['image'];
$name=$_REQUEST['name'];
echo $base;
// base64 encoded utf-8 string
$binary=base64_decode($base);
// binary, utf-8 bytes
header('Content-Type: bitmap; charset=utf-8');

$file = fopen(name, 'wb');
fwrite($file, $binary);
fclose($file);
echo '<img src='+name+'>'; 
```

?>

# drupal - Drupal 视图字段

> ID：13383834
> 
> 赞同：0
> 
> 时间：2012-11-14T17:18:33.200
> 
> 标签：drupal, views, field

在 Drupal 中，我想在他们的“我的帐户”页面上显示一些与用户相关的节点。我想通过创建一个视图来做到这一点，我将在用户实体上添加一个字段（通过 admin/config/people/accounts/display）。我可以使用计算字段来加载和渲染视图，但这不是很方便，因为它需要我编写 PHP 代码。

简而言之，是否有一个模块允许在实体的“管理显示”部分添加包含视图的虚拟字段？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:34:56.983

是的，[视野](http://drupal.org/project/viewfield)。这允许您引用视图并渲染它。

# wcf - 仅在并行运行时出现 WCF 合同不匹配错误

> ID：13383837
> 
> 赞同：0
> 
> 时间：2012-11-14T17:18:36.787
> 
> 标签：wcf, task-parallel-library

我有一个调用我的 WCF 服务的负载测试器，并且我已经使用选项来构建它以并行或不并行运行调用。仅当并行运行时，所有线程都会出现以下错误：“服务器没有提供有意义的回复；这可能是由合同不匹配、会话过早关闭或内部服务器错误引起的。”

这或多或少是我的代码：

```
 if (runMultiThreaded)
            {
                ParallelOptions options = new ParallelOptions();
                options.MaxDegreeOfParallelism = System.Environment.ProcessorCount;
                ParallelLoopResult loopResult = Parallel.For(0, numberOfTimesToTest, options,
                    (i, loopState) =>
                    {
                        myService.MyOperation();
                        if (loopState.ShouldExitCurrentIteration) return;
                    });
            }
            else
            {
                for (int i = 0; i < test1NumberOfRuns; i++)
                {
                        myService.MyOperation();
                }
            } 
```

有任何想法吗？如果您需要更多详细信息，请告诉我。

更新： myService 是我的服务操作合同接口的一个实例，它是使用 ChannelFactory 使用 CreateChannel 方法创建的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:36:26.957

我假设您`myService`是`ClientBase<T>`通过显式创建的子类或频道`ChannelFactory<T>::CreateChannel`？如果是这样，则不能保证这些实例是线程安全的，因此您需要每个工作线程都有一个实例。

# c# - WebGrid Helper 分页不适用于 .NET 4.5 MVC 4

> ID：13383838
> 
> 赞同：2
> 
> 时间：2012-11-14T17:18:38.603
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, webgrid

我已经将一个 mvc3 项目升级为 mvc4 项目，并将目标框架从 .NET 4.0 更改为 .NET 4.5（我不知道是否重要）。

现在，无论我在哪里使用 webgrid 助手，分页都完全被破坏了。实际上，更新请求被发送了 4 次，并且以“displayClient”为 Id 的元素完全从 html 文档中删除。

这是我的源代码的几行：

```
@{
    var grid = new WebGrid(canPage: true, canSort: true, ajaxUpdateCallback: "UpdateWebGridClient", ajaxUpdateContainerId: "displayClient", rowsPerPage: Model.RowPerPageClientId);
    grid.Bind(Model.ClientList, rowCount: Model.ClientNumber, autoSortAndPage: false);
    @grid.GetHtml(
        htmlAttributes: new { id = "grid", @class = "clientTable" },
        rowStyle: "odd",
        alternatingRowStyle: "even",
        footerStyle: "footerWebGrid",
        mode: WebGridPagerModes.All,
        numericLinksCount: 10,
        columns: grid.Columns(
            grid.Column("Id", SUResources.Admin.ClientRef, style: "ref"),
            grid.Column("FullName", SUResources.Admin.ClientFullName, style: "name"),
            grid.Column("Town", SUResources.Admin.ClientTown, style: "town"),
            grid.Column("Country", SUResources.Admin.ClientCountry, style: "country"),
            grid.Column("Email", SUResources.Admin.ClientEmail, style: "email"),
            grid.Column("PurchasedPicture", SUResources.Admin.ClientPurchasedPicture, style: "purchasedPicture"),
            grid.Column("Ca", SUResources.Admin.ClientRevenue, style: "ca"),
            grid.Column(
                style: "first-icon icons",
                format: (item) => Ajax.ActionLink(
                    " ",
                    "ClientInformation",
                    new { clientId = item.Id },
                    new AjaxOptions
                    {
                        HttpMethod = "Get",
                        UpdateTargetId = "showClientInformation",
                        InsertionMode = InsertionMode.Replace
                    },
                    new
                    {
                        @class = "record"
                    }
                )
            ),
            grid.Column(
                style: "icons",
                format:
                @<text>
                    @Html.ActionLink(" ", "Index", "SendMail", new { CustomerId = item.Id }, new { @class = "green-mail" })
                </text>
            ),
            grid.Column(
                style: "icons",
                format:
                @<text>
                    @if (item.StatusId == (short)Shootus.Domain.EnumTypes.CustomerState.Active)
                    {
                        <a onclick="ChangeCustomerStatus(this);" data-customer-id="@item.Id"> <img alt="" title="@SUResources.Admin.ClientEditionActiveUser" src="/Areas/Admin/Content/Images/Icons/ico-client-active-account.png"/></a>
                    }
                    else
                    {
                    string CustomerCurrentStatus = SUResources.Admin.ClientEditionBannedUser;

                    CustomerCurrentStatus = (item.StatusId == (short)Shootus.Domain.EnumTypes.CustomerState.NotValidated) ? SUResources.Admin.ClientEditionEmailNotValidatedUser : CustomerCurrentStatus;
                    CustomerCurrentStatus = (item.StatusId == (short)Shootus.Domain.EnumTypes.CustomerState.TurnedOff) ? SUResources.Admin.ClientEditionUnactiveUser : CustomerCurrentStatus;
                    <a onclick="ChangeCustomerStatus(this);" data-photographer-id="@item.Id"> <img alt="" title="@CustomerCurrentStatus" src="/Areas/Admin/Content/Images/Icons/ico-client-inactive-account.png"/></a>
                    }
                </text>
            ),
            grid.Column(
                style: "icons",
                format: @<text>
                    @Html.ActionLink(" ", "Delete", new { Id = item.Id }, new { @class = "delete" })
                </text>
            )
        )
    );
}
<div class="dot-line">
</div>
<div class="pager client-line-pager">
    @grid.Pager()
</div> 
```

webgrid 中的默认分页器使用 css 属性显示隐藏。

我在生成的 html 中看到有一些新的属性，如表上的 data-swhgajax、data-swhgcallback 和为寻呼机生成的代码：data-swhgcontainer、data-swhglnk、...

我使用 jQuery.ajaxPrefilter 来处理来自页面中外部表单的一些额外数据。

有没有人有同样的问题，他解决了吗？关于这个问题的起源的想法？

感谢您花时间阅读这篇文章，我希望有人可以帮助我:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:30:44.297

我处理过类似的问题。

就我而言，我在 AJAX 后调用后刷新了 webgrid 内容。每次刷新 webgrid 时，都会在单击标题链接时再发送一个 get 请求。我找不到原因。

我以“ajaxifying”网格的排序结束：

```
$("thead tr a").click(function (e) { e.preventDefault(); $.get($(this).attr('href'), function (data) { $('#idGrid').html(data) }) }) 
```

还有寻呼机：

```
$("tfoot tr a").click(function (e) { e.preventDefault(); $.get($(this).attr('href'), function (data) { $('#Grid').html(data) }) }) 
```

我撤回了 ajaxUpdateContainerId webgrid 参数。并修改我的控制器，仅返回包含 webgrid 的部分视图是否有 ajax 调用：

```
if (Request.IsAjaxRequest(){} 
```

我不知道这是否对任何人有用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:08:50.243

将大量使用 WebGrid 的项目从 MVC3 升级到 MVC4 后，我遇到了同样的问题。我设法解决了我的项目的问题，因此解决方案可能相同/相似

分页/排序不起作用 - 我添加了一个 jQuery 事件处理程序，该处理程序向网格显示了一个 ajax 微调器并且必须进行更改，例如

```
$("#my-grid a").click(function () { blockGrid($("#my-grid-div")); }); 
```

至

```
$("#my-grid a").click(function () { blockGrid($("#my-grid-div")); return true; }); 
```

即在处理点击后返回true，这修复了分页/排序

链接提交不止一次 - 默认情况下，新网格会启用其中的所有链接 ajax，这意味着如果您还使用确认对话框，它将被提交，然后如果您选择确定，则再次提交。就我而言，我不得不改变

```
myGrid.Column(format: (item) => Html.ActionLink(Strings.Remove, "removemember", new { id = ViewBag.GroupId, uid = item.Id }, new { onclick = "return confirmDialog(this, 'Remove Member?', 'Remove Member?')", rel = "remove" })))) 
```

至

```
myGrid.Column(format: (item) => Html.ActionLink(Strings.Remove, "removemember", new { id = ViewBag.GroupId, uid = item.Id }, new { data_ajax = "false", onclick = "return confirmDialog(this, 'Remove Member?', 'Remove Member?')", rel = "remove" })))) 
```

即添加`data_ajax = "false"`

# r - 通过数字索引选择 data.table 中的多个列

> ID：13383840
> 
> 赞同：150
> 
> 时间：2012-11-14T17:18:44.247
> 
> 标签：r, data.table

我们如何使用它们的数字索引（位置）的向量来选择多列`data.table`？

这就是我们对 a 的处理方式`data.frame`：

```
df <- data.frame(a = 1, b = 2, c = 3)
df[ , 2:3]
#   b c
# 1 2 3 
```

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-11-14T17:28:02.677

对于**data.table** `>= 1.9.8`的版本，以下所有内容都可以正常工作：

```
library(data.table)
dt <- data.table(a = 1, b = 2, c = 3)

# select single column by index
dt[, 2]
#    b
# 1: 2

# select multiple columns by index
dt[, 2:3]
#    b c
# 1: 2 3

# select single column by name
dt[, "a"]
#    a
# 1: 1

# select multiple columns by name
dt[, c("a", "b")]
#    a b
# 1: 1 2 
```

* * *

对于**data.table** `< 1.9.8`的版本（需要使用数字列选择`with = FALSE`），请参阅此答案的[此先前版本](https://stackoverflow.com/revisions/13383995/9)。另见关于 v1.9.8 的[新闻，潜在的重大变化，第 3 点。](https://github.com/Rdatatable/data.table/blob/master/NEWS.0.md)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-05-05T20:28:45.483

这有点冗长，但我已经习惯了使用隐藏`.SD`变量。

```
b<-data.table(a=1,b=2,c=3,d=4)
b[,.SD,.SDcols=c(1:2)] 
```

这有点麻烦，但是您不会失去其他 data.table 功能（我不认为），因此您仍然应该能够使用其他重要功能，例如连接表等。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2015-08-16T20:57:26.550

如果要使用列*名*来选择列，只需使用`.()`，它是 的别名`list()`：

```
library(data.table)
dt <- data.table(a = 1:2, b = 2:3, c = 3:4)
dt[ , .(b, c)] # select the columns b and c
# Result:
#    b c
# 1: 2 3
# 2: 3 4 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-05-02T06:48:13.903

从 v1.10.2 开始，您还可以使用`..`

```
dt <- data.table(a=1:2, b=2:3, c=3:4)

keep_cols = c("a", "c")

dt[, ..keep_cols] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-04T08:46:04.167

@Tom，非常感谢您指出这个解决方案。这对我很有效。

我正在寻找一种方法来从打印和上面的示例中排除一​​列。要排除第二列，您可以执行以下操作

```
library(data.table)
dt <- data.table(a=1:2, b=2:3, c=3:4)
dt[,.SD,.SDcols=-2]
dt[,.SD,.SDcols=c(1,3)] 
```

# android - android如何包装微调器下拉文本（android 4）

> ID：13383847
> 
> 赞同：2
> 
> 时间：2012-11-14T17:19:03.767
> 
> 标签：android, android-layout, android-spinner

我有一个`Spinner`微调器内部的文本和微调器展开时的选择（下拉视图）可能会很长，具体取决于语言环境。我为微调器视图和下拉视图设置了一个自定义视图，应该允许文本行换行，

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    style="?android:attr/spinnerDropDownItemStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="none"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:singleLine="false" /> 
```

在代码中，

```
 spinnerPermission = (Spinner) layout.findViewById(R.id.permission_spinner);
    ArrayAdapter<CharSequence> permissionAdapter = ArrayAdapter.createFromResource(getActivity(), R.array.add_share_dialog_permissions,
        R.layout.multiline_spinner_dropdown_item);
    permissionAdapter.setDropDownViewResource(R.layout.multiline_spinner_dropdown_item);
    spinnerPermission.setAdapter(permissionAdapter); 
```

这在 android 2 中工作正常，但在 android 4 中，下拉视图中的文本仍然不会换行，

![在此处输入图像描述](../Images/3b505e817a855c7e77b783f84e723e83.png)

尽管从图像中看不清楚，但微调器视图中的文本确实可以正确换行。我不能确定，但​​下拉视图周围的容器似乎不受屏幕的限制，而是从屏幕向右扩展。这将阻止文本换行，因为就`TextView`而言，有足够的空间。

这是层次结构查看器中微调器的弹出视图，

![在此处输入图像描述](../Images/2654c6b939e244e1728e5480165ba317.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:05:43.823

我已经通过自定义布局解决了这个问题，我在 LinearLayout 中有 TextView。TextView 和 LinearLayout 都有固定的宽度 200dp。然后它会在 Android 2.3 和 4.0 上正确包装文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T11:49:07.210

创建自定义布局，首先转到 res 文件夹->创建新的 XML 布局文件，例如：simple_spinner_layout.xml

链接：http: [//justpaste.it/edit/2866098/aab2f5f3](http://justpaste.it/edit/2866098/aab2f5f3)

它为我工作。如果你满意，请投票给这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:29:41.710

`CheckedTextView`extends `TextView`，它有`inputType, maxLines, minLines`属性。尝试将`android:inputType="textMultiline"`属性应用于您的`CheckedTextView`，这应该会有所帮助。

# objective-c - iOS6自转混淆及对iOS5的支持

> ID：13383848
> 
> 赞同：2
> 
> 时间：2012-11-14T17:19:06.160
> 
> 标签：objective-c, ios, ios6, uiinterfaceorientation

从 iOS6 开始，我意识到该`shouldAutorotateToInterfaceOrientation:`方法已被弃用。我的大部分应用程序都希望用户能够旋转，目前在 iOS6 和 5 中都可以使用。但是，我有一个我只想成为的模态视图`portrait`，所以我添加了以下内容但它实际上没有工作（在模拟器和设备中测试）：

```
// Tell the system what we support
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationPortrait;
}

// Tell the system It should autorotate
- (BOOL) shouldAutorotate {
    return NO;
}

// Tell the system which initial orientation we want to have
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

**为什么这段代码不能阻止我的模态旋转？对于 iOS5 上的用户，我如何仍然支持 iOS5 方法和 iOS6 方法而不会崩溃？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:46:33.570

您必须将呈现的 vc 嵌入导航控制器中，您可以在其中设置首选方向。

[https://stackoverflow.com/a/12522119](https://stackoverflow.com/a/12522119)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:43:28.823

您错过了`-(void)viewDidLoad`方法中的这一行

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"UIApplicationSupportedInterfaceOrientationsIsEnabled"]; 
```

我希望这可以帮助你

# javascript - 了解地理位置示例

> ID：13383852
> 
> 赞同：0
> 
> 时间：2012-11-14T17:19:12.190
> 
> 标签：javascript, html, geolocation, google-api

我正在查看一个地理位置示例，该示例为用户提供了从他们的地理位置到柏林亚历山大广场的方向，但我无法理解这两个独立的后备方案：

```
 function () {
                // Gelocation fallback: Defaults to Stockholm, Sweden
                createMap({
                    coords : false,
                    address : "Sveavägen, Stockholm"
                });
            }
        );
    }
    else {
        // No geolocation fallback: Defaults to Lisbon, Portugal
        createMap({
            coords : false,
            address : "Lisbon, Portugal"
        }); 
```

这是完整的代码：

```
<script src="http://maps.google.se/maps/api/js?sensor=false"></script>
<script>
    (function () {
        var directionsService = new google.maps.DirectionsService(),
            directionsDisplay = new google.maps.DirectionsRenderer(),
            createMap = function (start) {
                var travel = {
                        origin : (start.coords)? new google.maps.LatLng(start.lat, start.lng) : start.address,
                        destination : "Alexanderplatz, Berlin",
                        travelMode : google.maps.DirectionsTravelMode.DRIVING
                        // Exchanging DRIVING to WALKING above can prove quite amusing :-)
                    },
                    mapOptions = {
                        zoom: 10,
                        // Default view: downtown Stockholm
                        center : new google.maps.LatLng(59.3325215, 18.0643818),
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };

                map = new google.maps.Map(document.getElementById("map"), mapOptions);
                directionsDisplay.setMap(map);
                directionsDisplay.setPanel(document.getElementById("map-directions"));
                directionsService.route(travel, function(result, status) {
                    if (status === google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(result);
                    }
                });
            };

            // Check for geolocation support    
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                        // Success!
                        createMap({
                            coords : true,
                            lat : position.coords.latitude,
                            lng : position.coords.longitude
                        });
                    }, 
                    function () {
                        // Gelocation fallback: Defaults to Stockholm, Sweden
                        createMap({
                            coords : false,
                            address : "Sveavägen, Stockholm"
                        });
                    }
                );
            }
            else {
                // No geolocation fallback: Defaults to Lisbon, Portugal
                createMap({
                    coords : false,
                    address : "Lisbon, Portugal"
                });
            }
    })();
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:31:42.140

该代码将首先检查浏览器的[地理定位](http://html5demos.com/geo)支持：

```
// Check for geolocation support    
if (navigator.geolocation) { 
```

如果浏览器不支持该新 API，该`else`分支会将地图的地址设置为*葡萄牙里斯本*：

```
// else branch of geolocation check
else {
  // No geolocation fallback: Defaults to Lisbon, Portugal
  createMap({
    coords : false,
    address : "Lisbon, Portugal"
  });
} 
```

**但**如果浏览器确实提供了 Geolocation API，代码将尝试获取当前位置。
存在检索失败的可能性，例如，如果用户不允许使用他的位置。然后地图的地址将设置为*Sveavägen, Stockholm*。

```
navigator.geolocation.getCurrentPosition(
  function (position) {
    // This is the success function: location stored in position!
  },

  function () {
    // This is the 'fail' function: location could not be retreived!
  }
); 
```

# jquery - 在 Codeigniator 中获取 Jquery JSON 数据的问题

> ID：13383853
> 
> 赞同：1
> 
> 时间：2012-11-14T17:19:14.027
> 
> 标签：jquery, json, codeigniter

我已经创建了一个视图

```
 $.getJSON("/admin/sync/sync_curl/4/whois",          
    function(data) {
        log("Who is onboard table has been updated with " + data + " records after " + modifiedSince);               
    }); 
```

在我的控制器中，我通过 rest 调用从远程服务器获取一些 json 字符串，然后更新我的本地数据库 - 我只将我更新的记录发送回我的视图。

```
 function sync_curl($shipid, $table)  {  

        $this->load->model('whois/whois_m');

        $this->load->spark('curl/1.2.0');

        // Build remote URL            

        $remoteURL = 'http://192.201.00.22/api/1/';

        $remoteURL .= $table;

        $remoteURL .= '?API-KEY=xjkljioeo884444ssf'

        // Simple call to remote URL
        $result = json_decode($this->curl->simple_get($remoteURL), true);  

        // count records
        $count = 0;            
        foreach ($result[$table] as $record) {
            $this->whois_m->update_insert($record);            
            $count++;
        }

       header('Content-Type: application/x-json; charset=utf-8');
       echo $count;           
    } 
```

我可以直接在我的浏览器中使用我视图中的 url for $.getJSON = **"local/admin/sync/sync_curl/4/whois"**并且我收到记录数。

当我尝试从我的视图中运行此功能时 - 我单击一个按钮以开始操作 - 我没有调试任何事情发生并且我没有得到任何结果 - 当我通过添加**“http://”**来更改 $.getJSON 请求时

```
 $.getJSON("local/admin/sync/sync_curl/4/whois", 
```

我的问题是为什么我需要拥有**“localhost”** ——我只想拥有**admin/sync/sync_curl/4/whois——**因为我需要在许多不同的服务器上部署它并且请求始终是本地的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:11:25.853

```
$.getJSON("<?php echo site_url('admin/sync/sync_curl/4/whois'); ?>" 
```

# javascript - WebRTC getUserMedia 不显示视频

> ID：13383860
> 
> 赞同：0
> 
> 时间：2012-11-14T17:19:42.027
> 
> 标签：javascript, webrtc

我有以下代码：

```
document.addEventListener('DOMContentLoaded', function () {

  var video = document.querySelector('video');

  window.navigator.webkitGetUserMedia({ video: true, audio: true }, function (stream) {

    var url = window.webkitURL.createObjectURL(stream);
    video.src = stream;

  }, function (err) {
    console.log('error: ', err);
  });

}); 
```

html:

```
<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>getUserMedia Video Example</title>
  <script src='index.js'></script>
</head>
<body>
  <video controls autoplay />
</body>
</html> 
```

为什么不显示视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:46:41.547

您必须分配`url`to `video.src`，而不是`stream`：

```
navigator.webkitGetUserMedia({ video: true, audio: true }, function ( stream ) {
    video.src = window.webkitURL.createObjectURL( stream );
}, function ( err ) {
    console.log( 'error: ', err );
});​ 
```

**现场演示： http:** [//jsfiddle.net/FcTMk/2/](http://jsfiddle.net/FcTMk/2/)（仅限 Webkit）

# magento - 如何定位 Magento 使用但未显示在管理面板中的块？

> ID：13383862
> 
> 赞同：0
> 
> 时间：2012-11-14T17:19:51.030
> 
> 标签：magento

我继承了一个 Magento 商店网站，而之前的开发人员已经离开了。所以我只剩下一张纸，基本上告诉我如何做一些基本的事情，比如改变主页上的横幅。差不多就是这样。

拥有该页面的人现在想要更改位于产品页面右侧的广告。我在 CMS 下的管理面板中搜索并绘制了一个空白。我浏览了模板文件，发现了我认为包含实际广告的 3 列 HTML 文件。

它没有。相反，它具有以下代码：

```
<div class="col-right sidebar"><?php echo $this->getChildHtml('right') ?></div> 
```

在哪里可以找到子 HTML？我已经在所有文件夹中搜索了我假设名为“Right”的文件。但我似乎找不到它。

任何人都知道这样的事情可以或将在哪里举行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:36:22.847

这绝对是最根本的功能，放置在子“正确”中的任何内容都将显示在这里，并且肯定不是您想要进行编辑的地方。

实际上有一百种不同的方式可以在这里发布内容，我建议首先确定它是静态块还是模板文件。

1.  转到系统-> 配置-> 开发人员。
2.  将“当前配置范围：”更改为您当前正在排除故障的商店。
3.  找到您的 IP 并将其放在“允许的 IP（逗号分隔）”中，这样​​接下来的步骤将只对您可见。
4.  在“调试”部分下，您现在应该看到“模板路径提示”启用此功能并重新加载页面。

如果该块现在有类似：“app/design/base/default/catalog/product/view.phtml”，您知道它在 phtml 文件中，您可以去那里。如果没有：

1.  它可能是一个横幅，去 CMS -> 横幅并在那里检查。
2.  它可能是一个静态块，转到 CMS -> 静态块
3.  它可能是......任何数量的东西。

您说它在产品页面上，下一步是检查布局文件夹中的 catalog.xml。搜索并查看里面是否有任何关于它可能是什么的意义。如果以前的开发人员很精通，它就不会在 catalog.xml 中，而是在 local.xml 或自定义主题布局目录中的自定义模块的 .xml 文件中。

尝试在代码库中搜索块内的内容，看看是否弹出任何内容。如果没有，请使用 phpmyadmin 在数据库中搜索一些内容。

希望这有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-05T19:52:41.487

搜索：

```
<reference name="right"> 
```

# sockets - 如果没有人监听指定端口，make-network-process 将永远挂起

> ID：13383863
> 
> 赞同：0
> 
> 时间：2012-11-14T17:19:55.917
> 
> 标签：sockets, emacs, tcp, elisp

有没有办法减轻这种行为？最好是返回 nil 或抛出错误。

即假设我正在尝试连接到本地主机上的未绑定套接字 - 在这种情况下`make-network-process`会阻塞，即使之后有人绑定了套接字，它也没有意识到它发生了，所以它基本上被卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:48:08.853

好的，必须更加注意文档。有一个`:nowait`关键论点可以防止这种行为。下面是处理它的示例代码：

```
(defun haxe-network-process-sentinel (process input)
  (message "haxe-network-process-sentinel <%s>" input)
  (when (stringp input)
      (cond
       ((or
         (haxe-string-starts-with input "failed with code")
         (haxe-string-starts-with input "connection broken by"))
        (setq haxe-network-status 'error))
       ((string= input "open")
        (setq haxe-network-status 'open))
       (t (setq haxe-network-status 'open)
        (haxe-append-server-response input)))))

;;;###autoload
(defun haxe-connect-to-compiler-server ()
  "Starts HaXe compilations server and connects to it.
This function is bound to \\[haxe-connect-to-compiler-server]"
  (interactive)
  (let ((old-proc (get-process haxe-compiler-process)))
    (if (and old-proc (equal (process-status old-proc) 'open))
        (setq haxe-network-process old-proc)
      (haxe-log 3 "Trying to connect to HaXe compiler on %s:%s"
                haxe-server-host haxe-server-port)
      (while (not (eql haxe-network-status 'open))
        (setq haxe-network-process
              (make-network-process
               :name haxe-compiler-process
               :family 'ipv4
               :host haxe-server-host
               :nowait t
               :service haxe-server-port
               ;; :buffer haxe-network-process-buffer
               :sentinel #'haxe-network-process-sentinel
               :filter #'haxe-listen-filter))
        (sleep-for 1))
      (haxe-log 3 "Connected to HaXe compiler")))) 
```

# mfc - 如何将 Shift + Lbutton 点击 事件发送到其他进程？

> ID：13383867
> 
> 赞同：0
> 
> 时间：2012-11-14T17:20:09.250
> 
> 标签：mfc, keyboard, mouse, message

我想将 shift + Button 单击事件发送到其他进程。

我像这样使用了 SendNotifyMessage。

```
while(1)
{

  if( g_bSendEvent )
  {
     sleep(1000);

     if( g_dwSubStatus == 0 )
     {
        SendNotifyMessage(g_hWndMain, WM_KEYDOWN, VK_LSHIFT, 0);
        SendNotifyMessage(g_hWndMain, WM_LBUTTONDOWN, MK_LBUTTON, g_lClickPos);

        g_dwSubStatus = 1;
      }
      else if( g_dwSubStatus == 1 )
      {
        SendNotifyMessage(g_hWndMain, WM_LBUTTONUP, MK_LBUTTON, g_lClickPos);
        SendNotifyMessage(g_hWndMain, WM_KEYUP, VK_LSHIFT, 0);
      }
  }
} 
```

但这不起作用。

按钮单击事件已发送到其他进程。

请帮忙。

工具：VS 2008，MFC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:24:32.933

不要使用消息！[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)函数正是您要寻找的。（请记住，如果要将输入发送到另一个提升的进程，则需要提升您的进程。）

# java - System.getenv("computername") 截断返回值

> ID：13383868
> 
> 赞同：2
> 
> 时间：2012-11-14T17:20:11.300
> 
> 标签：java, windows, hostname, getenv, computer-name

`System.getenv("computername")`Java和Java有什么区别`System.getenv("hostname")`？

使用该方法检索计算机名称时是否有字符限制`getenv()`？

我有一个冗长的主机名，`System.getenv("computername")`似乎将其截断为 15 个字符。使用的操作系统是 Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T15:46:58.730

Windows 中的截断是由于 NetBIOS 的计算机名称长度限制为 15 个字符。

[http://support.microsoft.com/kb/909264](http://support.microsoft.com/kb/909264)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T08:01:20.217

这是有效的：

```
try {
return InetAddress.getLocalHost().getHostName();
} catch (UnknownHostException e) {
return "Error: UnknownHostException";
} 
```

希望我能帮助你。

山姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:00:19.287

我写了一个简单的测试应用程序：

```
public class Test {
  public static void main(String[] args) {
    System.out.println(System.getenv("computername"));
  }
} 
```

然后执行：

```
set COMPUTERNAME=abcdefghijklmnopqrstuvwxyz
java Test 
```

其中打印：

`abcdefghijklmnopqrstuvwxyz`

在 Windows 上的 Java 5 和 7 中都可以正常工作。没有截断的迹象。

# iphone - 将 admob 添加到我的应用程序时架构 armv7s 的 64 个重复符号

> ID：13383869
> 
> 赞同：3
> 
> 时间：2012-11-14T17:20:15.493
> 
> 标签：iphone, ios, xcode, admob

架构 armv7s clang 的 64 个重复符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

不知道有没有人遇到过这个问题并解决了。预先感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T07:33:42.633

我和 admob 有过类似的情况，我拉头发 2 天，直到我很难弄清楚，但多亏了它，我对它的工作原理有了更好的了解。您可以通过分别向每个有效架构添加链接器标志来解决此问题。

![](../Images/ee576f7ab8043190c19a15487900fd57.png)

您可以在此处看到我为 armv7s 架构添加了单独的链接器标志，并为此删除了“-all_load”。其他体系结构（armv6、7 等）使用 -all_load 编译，而 armv7s 没有。即使这个问题已经存在几个月了，我希望有人会觉得它有用。

# mp4 - 更正特定 rtsp 流的 gstreamer 管道

> ID：13383873
> 
> 赞同：0
> 
> 时间：2012-11-14T17:20:33.460
> 
> 标签：mp4, gstreamer, rtsp

我正在尝试使用此 gst 管道将此 RTSP URL 转换为其他内容（任何内容！）：

```
gst-launch rtspsrc location=rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov ! rtpmp4vdepay ! filesink location=somebytes.bin 
```

这给出了以下错误：

```
ERROR: from element /GstPipeline:pipeline0/GstRTSPSrc:rtspsrc0/GstUDPSrc:udpsrc0: Internal data flow error.
Additional debug info:
gstbasesrc.c(2791): gst_base_src_loop (): /GstPipeline:pipeline0/GstRTSPSrc:rtspsrc0/GstUDPSrc:udpsrc0:
streaming task paused, reason not-linked (-1) 
```

所以我想这是关于将 rstp 源连接到 depayloader 的问题。如果我将管道更改为使用 rtpmp4gdepay 而不是 vdepay，它会工作并产生*一些东西*，但我不确定输出格式是什么。

有谁知道我应该使用什么管道从这个 URL 获取视频？我假设它是 mp4/h264/aac，但也许不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:32:40.603

先试试这个：

```
gst-launch-0.10 -v playbin2 uri=rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov 
```

或者

```
gst-launch-1.0 -v playbin uri=rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:32:06.617

mov 文件不能直接流式传输。因此，您的 RTSP 源可能会向您发送两个基本流。（我猜这是 darwin 或其他类似的服务器）所以您可能需要从 rtspsrc 设置两个输出，一个用于音频，一个用于视频。

rtpmp4vpay 用于基本的 mpeg4 流。您的源文件是否具有 mpeg4 视频编解码器？如果是 h.264，则将其替换为 rtph264depay。您可以将输出传递给解码器并根据需要播放。将其输入到 decodebin。要将其转储到 h.264 中，您首先必须对其进行解析并添加 nal 标头（也许是 h264parse 解析？）

rtpmp4gpay 最有可能被音频流接受。

我猜你的文件是 h.264/aac，这就是为什么 rtpmp4vdepay 不起作用而 rtpmp4gdepay 会起作用的原因。但是当您设置 rtpmp4gdepay 时，您没有对视频做任何事情，所以您需要这样做。

# javascript - 如果最后一个子元素发生变化，如何将点击事件绑定到最后一个子元素？

> ID：13383875
> 
> 赞同：0
> 
> 时间：2012-11-14T17:20:35.730
> 
> 标签：javascript, jquery

假设我们正在制作一个待办事项列表，我如何在单击最后一个列表项时附加一个新列表项。在下面的示例代码中，第四个列表项保留了点击事件，但我希望它每次都在最后一个列表项上。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js" type="text/javascript"></script>

<ul id="foo">
<li><input placeholder="One"></input></li>
<li><input placeholder="Two"></input></li>
<li><input placeholder="Three"></input></li>
<li><input placeholder="Click Me Add More"></input></li>
</ul>

<script>
    $('#foo li:last-child').bind( "click", function(){
        var li = $(this).clone();
        $('#foo').append(li);
    })
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:25:41.847

对于 jquery 1.7+，使用这个：

[http://jsfiddle.net/NeQ5q/](http://jsfiddle.net/NeQ5q/)

```
 $('#foo').on( "click","li:last-child", function(){
        var li = $(this).off('click').clone();
        $('#foo').append(li);
    })​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:26:03.700

试试这个

```
$('#foo li:last-child').bind( "click", function(){
        var li = $(this).clone(true);
        $('#foo li:last-child').unbind( "click");
        $('#foo').append(li);
    })​ 
```

而是使用`.on()` 和`.off()`

```
$('#foo li:last-child').on( "click", function(){
      var li = $(this).clone(true);
      $('#foo li:last-child').off( "click");
      $('#foo').append(li);
 })​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/QBYBn/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:21:59.143

我正在尝试绑定而不是直播

```
$('#foo li:last-child').live( "click", function(){
    var li = $(this).clone();
    $('#foo').append(li);
}) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T17:27:12.063

试试这个：http: [//jsfiddle.net/xu4wc/](http://jsfiddle.net/xu4wc/)

```
$('#foo').on( "click","input:last-child", function(){
     var li = $(this).parent().clone();
        $('#foo').append(li);
    }) 
```

# c# - 2GB+ 内存分配

> ID：13383876
> 
> 赞同：-4
> 
> 时间：2012-11-14T17:20:37.873
> 
> 标签：c#, memory

我需要在一块中分配超过 2GB 的内存。

1.  我不能使用数组，因为有 2GB 限制
2.  即使我使用允许我分配超过 2GB 的 .net Framework 4.5，我仍然不想使用数组对象
3.  我需要类似的东西`GlobalHAlloc`，但这种方法只有 32 位大小的参数

我应该使用 Windows API 还是什么？我知道这很难做到，而且我知道我会泄漏很多内存，因为我没有这样做的技能......

但是 .NET 框架 4.5 中是否有类似的东西`GlobalHAlloc`可以让我轻松地分配内存？我想做自己的课`MemoryBlock`，因为我不喜欢数组课。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:25:19.987

您可以使用多种方法来获得更大的内存块。

*   `AllocHGlobal`实际上需要`IntPtr`一个 64 位大小的 64 位值。
*   调用本机函数`HeapAlloc`。同样，它需要一个指针大小的参数。
*   调用`CoTaskMemAlloc function`也采用指针大小参数的本机函数。

由于您声明`AllocHGlobal`仅采用 32 位参数，因此您的进程似乎是 32 位的。这才是真正的问题。在 32 位进程中，您不能分配超过 4GB（总计）。这个限制是由你的指针的大小强加的。作为进一步的限制，在 32 位操作系统中，进程不能分配超过 2GB（总计）。

所以，我建议您需要切换到 64 位进程来解决您的问题。

# arrays - Powershell：为输出格式化多维数组

> ID：13383877
> 
> 赞同：1
> 
> 时间：2012-11-14T17:20:37.657
> 
> 标签：arrays, powershell, format

我正在探索以某种指定格式呈现多维数组的选项。所需的输出是单行字符串，每个维度内的元素由指定字符分隔。例如：

```
$foo = @(@("A","B","C"),@("1","2","3"))
$bar = @()

foreach ($i in $foo)
{
    $bar += $i -Join ", "
}

$bar -join "; " 
```

产生所需的输出。当数组中的维数增加或在嵌套元素中可变时，这种方法变得很麻烦。

我想知道是否存在一些 Powershell 魔法来协助完成这项任务。理想情况下，类似：

```
$foo[([] -join ", ")] -join "; " 
```

也许是一种可以很好地扩展以适应更复杂的阵列配置的解决方案。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:25:59.250

这边走？

```
$foo = @(@("A","B","C"),@("1","2","3"))

($foo | % { $_ -join ',' }) -join '; ' 
```

# css - twitter bootstrap：（右浮动）下拉导航栏菜单中的字形图标未正确显示

> ID：13383879
> 
> 赞同：0
> 
> 时间：2012-11-14T17:21:02.833
> 
> 标签：css, twitter-bootstrap

我正在尝试在下拉菜单中包含一个图标。该图标导致菜单呈现不正确（似乎图标在菜单栏和菜单上重复出现）。片段：

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">

    <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>

    <a class="brand" href="#">Project X</a>

    <div class="nav-collapse">
      <ul class="nav">
        <li class="active"><a href="#">Home</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Menu 1
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li class="nav-header">Nav header</li>
            <li><a href="#">Separated link</a></li>
            <li><a href="#">One more separated link</a></li>
          </ul>
        </li>
      </ul>

      <ul class="nav pull-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Menu 2
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><i class="icon-off"><a href="#">Logout</a></li>
          </ul>
        </li>
      </ul>
    </div>

  </div>
</div> 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:37:01.917

您需要关闭标签。

```
<i class="icon-off"></i> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T13:50:31.167

这对我有用

```
<li> <a href="#"> <i class="icon-off"> </i>  Sign Out </a> </li> 
```

# javascript - localStorage 的方括号语法与函数

> ID：13383880
> 
> 赞同：9
> 
> 时间：2012-11-14T17:21:04.023
> 
> 标签：javascript, local-storage

以下两段代码有什么区别？方括号语法是旧的、已弃用的语法吗？当我第一次使用 localStorage 时，我找到的所有文档都肯定说使用方括号语法，但现在我根本找不到任何文档。

记录的语法：

```
localStorage.setItem('hello', 'world');
localStorage.getItem('hello'); // world 
```

方括号语法：

```
localStorage.hello = 'world';
localStorage.hello; // world 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:33:33.500

这就是[文档](https://developer.mozilla.org/en-US/docs/DOM/Storage)所说的：

> 尽管可以使用标准 JavaScript 属性访问方法设置和读取值，但建议使用 getItem 和 setItem 方法。

# javascript - 为 document.querySelectorAll 创建一个短别名

> ID：13383886
> 
> 赞同：58
> 
> 时间：2012-11-14T17:21:22.840
> 
> 标签：javascript, native-methods

我将运行 document.querySelectorAll() 很多，并且想要一个简写别名。

```
var queryAll = document.querySelectorAll

queryAll('body')
TypeError: Illegal invocation 
```

不工作。然而：

```
document.querySelectorAll('body') 
```

仍然如此。如何使别名起作用？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-02-19T00:33:03.457

这似乎有效：

```
const queryAll = document.querySelectorAll.bind(document); 
```

`bind`返回一个与函数相同的新函数`querySelectorAll`，其中方法`this`内部的值`querySelectorAll`绑定到`document`对象。

绑定功能仅在 IE9+（和所有其他浏览器）中受支持 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

**更新：**事实上，您可以创建一系列文档方法的快捷方式，如下所示：

```
const query = document.querySelector.bind(document);
const queryAll = document.querySelectorAll.bind(document);
const fromId = document.getElementById.bind(document);
const fromClass = document.getElementsByClassName.bind(document);
const fromTag = document.getElementsByTagName.bind(document); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-09-06T15:29:14.827

一个常见的答案是使用`$`and`$$`和。这个别名模仿了 jQuery 的别名。`querySelector``querySelectorAll`

例子：

```
const $ = document.querySelector.bind(document)
const $$ = document.querySelectorAll.bind(document)

$('div').style.color = 'blue'
$$('div').forEach(div => div.style.background = 'orange')
```

```
div {
  margin: 2px;
}
```

```
<div>
  test
</div>
<section>
  <div>
    hello
  </div>
  <div>
    foo
  </div>
</section>
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-14T17:29:46.247

JavaScript 解释器抛出错误，因为`querySelectorAll()`应该在文档上下文中调用。

当您尝试调用`console.log()`别名时会引发相同的错误。

所以你需要像这样包装它：

```
 function x(selector) {
     return document.querySelectorAll(selector);
 } 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-02-29T08:40:57.437

我的解决方案涵盖以下四个用例：

*   document.querySelector(...)
*   document.querySelectorAll(...)
*   element.querySelector(...)
*   element.querySelectorAll(...)

编码：

```
let doc=document,
    qsa=(s,o=doc)=>o.querySelectorAll(s),
    qs=(s,o=doc)=>o.querySelector(s); 
```

在参数方面，选择器`s`是必需的，但容器元素对象`o`是可选的。

用法：

*   `qs("div")`: 查询整个文档的第一个 div，返回那个元素
*   `qsa("div")`：查询整个文档的所有 div，返回所有这些元素的 nodeList
*   `qs("div", myContainer)`: 在 myContainer 元素中查询第一个 div，返回该元素
*   `qsa("div", myContainer)`：在 myContainer 元素中查询所有 div，返回所有这些元素的 nodeList

为了使代码略短（但效率不高），`qs`代码可以编写如下：

```
let qs=(s,o=doc)=>qsa(s,o)[0]; 
```

上面的代码使用了 ES6 特性（`let`、箭头函数和默认参数值）。一个 ES5 等价物是：

```
var doc=document,
    qsa=function(s,o){return(o||doc).querySelectorAll(s);},
    qs=function(s,o){return(o||doc).querySelector(s);}; 
```

或等效的较短但效率较低的 ES5 版本`qs`：

```
var qs=function(s,o){return qsa(s,o)[0];}; 
```

下面是一个工作演示。为了确保它适用于所有浏览器，它使用 ES5 版本，但如果你要使用这个想法，请记住 ES6 版本更短：

```
var doc = document;

var qs=function(s,o){return(o||doc).querySelector(s);},
    qsa=function(s,o){return(o||doc).querySelectorAll(s);}

var show=function(s){doc.body.appendChild(doc.createElement("p")).innerHTML=s;}

//           ____demo____       _____long equivalent______      __check return___      _expect__ 
//          |            |     |                          |    |                 |    |         |

let one   = qs("div");      /* doc.querySelector   ("#one") */ show(one  .id    ); // "one"
let oneN  = qs("div",one);  /* one.querySelector   ("div")  */ show(oneN .id    ); // "oneNested"
let many  = qsa("div");     /* doc.querySelectorAll("div")  */ show(many .length); // 3
let manyN = qsa("div",one); /* one.querySelectorAll("div")  */ show(manyN.length); // 2
```

```
<h3>Expecting "one", "oneNested", 3 and 2...</h3>
<div id="one">
  <div id="oneNested"></div>
  <div></div>
</div>
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-14T17:28:18.953

这会起作用，您需要使用`call()`或`apply()`使用适当的上下文来调用别名。

```
func.call(context, arg1, arg2, ...) 
func.apply(context, [args]) 

var x = document.querySelectorAll;
x.call(document, 'body');
x.apply(document, ['body']); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-05-09T06:58:26.877

我采用了@David Muller 的方法，并使用 lambda 对其进行了单线化

```
let $ = (selector) => document.querySelector(selector);
let $all = (selector) => document.querySelectorAll(selector); 
```

例子：

```
$('body');
// <body>...</body> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-14T17:23:42.117

```
function x(expr)
{
    return document.querySelectorAll(expr);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-12-16T17:59:43.487

这是我的看法。如果选择器有多个匹配项，则返回 like `querySelectorAll`。如果只找到一个匹配项，则返回类似`querySelector`.

```
function $(selector) {
  let all = document.querySelectorAll(selector);
  if(all.length == 1) return all[0];
  return all;
}

let one = $('#my-single-element');
let many = $('#multiple-elements li'); 
```

**2019 年更新**

今天我对这个问题有了新的看法。在这个版本中，您还可以使用这样的基础：

```
let base = document.querySelectorAll('ul');

$$('li'); // All li
$$('li', base); // All li within ul 
```

**功能**

```
function $(selector, base = null) {
  base = (base === null) ? document : base;
  return base.querySelector(selector);
}

function $$(selector, base = null) {
  base = (base === null) ? document : base;
  return base.querySelectorAll(selector);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-01T22:37:01.780

如果您不关心支持没有人应该再使用的古老、糟糕的浏览器，那么您可以这样做：

```
const $ = (sel, parent = document) => parent.querySelector(sel);
const $$ = (sel, parent = document) => Array.from(parent.querySelectorAll(sel)); 
```

以下是一些使用示例：

```
// find specific element by id
console.log($("#someid"));
// find every element by class, within other element
// NOTE: This is a contrived example to demonstrate the parent search feature.
// If you don't already have the parent in a JavaScript variable, you should
// query via $$("#someparent .someclass") for better performance instead.
console.log($$(".someclass", $("#someparent")));
// find every h1 element
console.log($$("h1"));
// find every h1 element, within other element
console.log($$("h1", $("#exampleparent")));
// alternative way of finding every h1 element within other element
console.log($$("#exampleparent h1"));
// example of finding an element and then checking if it contains another element
console.log($("#exampleparent").contains($("#otherelement")));
// example of finding a bunch of elements and then further filtering them by criteria
// that aren't supported by pure CSS, such as their text content
// NOTE: There WAS a ":contains(text)" selector in CSS3 but it was deprecated from the
// spec because it violated the separation between stylesheets and text content, and you
// can't rely on that CSS selector, which is why you should never use it and should
// instead re-implement it yourself like we do in this example.
// ALSO NOTE: This is just a demonstration of .filter(). I don't recommend using
// "textContent" as a filter. If you need to find specific elements, use their way
// more reliable id/class to find them instead of some arbitrary text content search.
console.log($$("#exampleparent h1").filter(el => el.textContent === "Hello World!")); 
```

我提供的函数使用了大量的现代 JS 特性：

*   `const`确保函数变量不能被覆盖。
*   定义为箭头函数又名 lambda 的函数：`(args) => code with implied return statement`
*   默认参数（2016年之前的浏览器不支持）
*   no `{}`or `return`，因为如果函数体中只有 1 条语句，则可以跳过这些语句。
*   使用了现代函数`Array.from()`，它将`querySelectorAll`结果（始终是[NodeList](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)或空 NodeList）转换为[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)，这基本上是每个开发人员都想要的。因为这就是您访问`.filter()`其他 Array 函数的方式，这些函数允许您使用干净、简短的代码进一步处理发现的节点。并`Array.from()`创建所有元素的浅表副本，这意味着它的速度非常快（它只是将内存引用/指针复制到原始 NodeList 中的每个[Node](https://developer.mozilla.org/en-US/docs/Web/API/Node) DOM 元素）。它是一个主要的 API 增强器。

如果你关心古老的浏览器，你仍然可以使用我的功能，但在你发布网站时使用[Babel将现代 JS 转换为旧的 ES5。](https://babeljs.io/)

我的建议是用 ES6 或更高版本编写您的整个网站，然后如果您关心来自 Windows XP 和其他死操作系统的访问者，或者只是 5 年以上未更新浏览器的随机人，则使用 Babel。

但我不建议使用 Babel。不要再担心那些使用旧浏览器的人了。这是**他们的问题，**不是你的。

现代“应用程​​序”世界非常深刻地基于 Web 浏览器、JavaScript 和现代 CSS，而如今，您的大多数访问者都拥有现代的、自动更新的浏览器。没有现代浏览器，你基本上**无法**过现代生活，因为现在有很多网站需要它。

在我看来，从 1993 年开始，期望**网页设计师**浪费时间和理智试图让网站在浏览器上运行的日子已经**结束。**现在是**最懒惰的客户/访客**更新他们的旧浏览器的时候了。这并不难。即使是旧的和死的操作系统通常也有办法在它们上安装新版本的浏览器。如今，没有更新浏览器的人只占百分之一的一小部分。

例如，世界上最流行的移动/响应式网站框架 Bootstrap 框架**只**关心支持所有主流浏览器的 2 个最新主要版本（至少 0.5% 的市场份额）。以下是他们目前的名单：

*   0.5% 或更高的市场份额
*   仅最后 2 个主要版本
*   不是死浏览器（未停产）
*   铬 >= 60
*   火狐 >= 60
*   火狐 ESR
*   iOS >= 12
*   野生动物园 >= 12
*   not Explorer <= 11（意味着根本没有 Internet Explorer 版本）

我完全同意这一点。在 2000 年代初期，我是一名网络开发人员，那绝对是地狱。期望让它在一些随机的、愚蠢的用户的古老浏览器上运行是地狱。它带走了 Web 开发的所有乐趣。它让我**讨厌**并**退出了**Web 开发。因为我 90% 的时间都浪费在浏览器兼容性上。这不是生活应该有的样子。一些顾客/访客**懒惰不是你的错。**这些天来，游客没有更多的借口保持懒惰。

相反，您应该只针对拥有现代浏览器的用户。这些天基本上是每个人。任何人都没有理由使用旧浏览器。如果他们使用旧的浏览器，你的网站应该显示一个又大又肥的横幅，上面写着“请为了你自己加入现代世界。下载一个新的浏览器。你怎么能用这么旧的浏览器过正常的生活？你是穴居人时代的时间旅行者吗？

人们**再也没有借口**使用旧浏览器了：

1.  Linux：默认附带最新版本的 Firefox。
2.  Mac：随 Safari 一起提供，这是一种现代浏览器。但是一些旧的 macOS 版本不会获得更新版本的 Safari，而且旧机器通常也无法安装最新的 macOS 版本。好吧，这些游客运气不好。他们不仅会在您的网站上遇到麻烦。他们可以安装现代浏览器（例如 Chrome），即使在旧版本的 macOS 上也能做到。所以他们没有任何借口。不要浪费你的生命去迎合那些使用非常老旧、漏洞百出的 Safari 版本的人。
3.  Windows：Windows 10 附带 Edge，它基于 Chromium，并且与 Chrome 一样与网站兼容。人们没有借口拥有旧浏览器。大多数 Windows 用户使用 Chrome。至于非常旧的、已停产的 Windows 版本（XP、Vista、7、8），好吧，我们再次遇到与以前相同的问题：您是否关心 0.0000001% 使用死操作系统和旧 Internet Explorer 的愚蠢访问者版本？无论如何，整个该死的网络都会被他们破坏，所以谁在乎你的网站是否也被他们破坏了**？**他们应该停止偷懒，只需将他们的操作系统升级到 Windows 10，或者至少在他们当前的操作系统上安装 Chrome 或 Firefox。他们没有任何借口。
4.  iOS：如果您卡在超级旧的 iOS 设备上，那么您将无法使用现代网络。倒霉。很多网络都会为你而崩溃。获取新设备。甚至像世界排名第一的移动 Web 框架 Bootstrap 这样的框架也不支持 iOS 11 或更早版本。这不是我们的问题。如果他们仍然挂在这么旧的设备上，那就是小气鬼游客的问题。他们几乎可以不花钱就能得到一台更新的二手 iOS 设备，并解决他们在访问现代网络时遇到的所有问题。而且他们无论如何都需要购买它，因为大多数应用程序（甚至是银行/重要应用程序）都需要现代 iOS 版本。
5.  Android：浏览器独立于操作系统更新，甚至可以侧载，所以即使你被困在旧的 Android 版本上，你也可以使用现代浏览器。所以你没有任何借口。

如今，大多数人都拥有完全最新且自动更新的浏览器。这就是事实。

所以，是的……网站设计师仅仅为了迎合旧浏览器而受苦受难的日子已经结束了。因此我建议人们在他们的网站上使用 ES6 和 CSS3，让网页设计第一次成为一种乐趣。

希望你喜欢我提供的 ES6 函数！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-08T12:57:21.640

> ```
> function $(selector, base = null) {
>   base = (base === null) ? document : base;
>   return base.querySelector(selector);
> }
> 
> function $$(selector, base = null) {
>   base = (base === null) ? document : base;
>   return base.querySelectorAll(selector);
> } 
> ```

为什么不更简单？？？：

```
let $ = (selector, base = document) => {
  let elements = base.querySelectorAll(selector);
  return (elements.length == 1) ? elements[0] : elements;
} 
```

# java - 读取文件并将其转换为数组（Java）

> ID：13383890
> 
> 赞同：3
> 
> 时间：2012-11-14T17:21:47.907
> 
> 标签：java

所以我有一组用换行符分隔的短语，我想用这些短语填充一个数组。这是我到目前为止所拥有的：

```
 Scanner s;
   s = new Scanner(new BufferedReader(new FileReader("Phrases.txt")));
   for(i = 0; i < array.length;i++)
   {
   s.nextLine() = array[i];
   } 
```

有没有一种快速简单的方法来填充一个用换行符分隔的短语的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:25:07.050

分配应该是相反的： -

```
array[i] = s.nextLine(); 
```

而且，我认为您应该根据从文件接收到的输入来填充您的数组。在这里，您将根据预先声明的数组的长度接收输入。我的意思是，由于您使用的是`array`，因此您的大小是固定的。所以你只能用固定数量的短语填充它。

* * *

更好的方法是使用`ArrayList`.

```
List<String> phrases = new ArrayList<String>(); 
```

现在，您可以根据从文件中获得的短语来填充您的数组列表。您不需要预先定义大小。它的大小动态增加。

要添加短语，您可以：-

```
phrases.add(s.nextLine()); 
```

使用`while`循环读取直到`EOF`.

```
while (s.hasNextLine()) {
    phrases.add(s.nextLine());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:25:09.970

因为你不知道你可能有多少个短语（我怀疑），所以一旦你完成，我会使用[ArrayList.toArray()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)`ArrayList<String>`填充一个并将其转换为一个数组。不过，为了更大的灵活性，我可能会将其保留为 Java 集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:27:47.397

您将赋值操作反转 (`array[i]`应该设置为`s.nextLine()`，而不是相反。此外，最好修改 for 循环以在不再存在行时终止：

```
for(i = 0; i < array.length && s.hasNextLine() ;i++) {
     array[i] = s.nextLine()
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T17:28:33.710

不要浪费你的时间`Scanner`。`BufferedReader`很好。试试这个：

```
BufferedReader br = new BufferedReader(new FileReader("Phrases.txt")));
LinkedList<String> phrases = new LinkedList<String>();
while(br.ready()) {
    phrases.add(br.readLine());
}
String[] phraseArray = phrases.toArray(new String[0]); 
```

顺便说一句，如果文件很大，则不要使用它很**重要。**这样你最后只创建一个数组。否则，您将创建大量大型数组并浪费内存。`LinkedList``ArrayList`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T17:30:15.860

它可以用 1 班轮和[apache commons](http://commons.apache.org)来完成，特别是[`FileUtils.readLines()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readLines%28java.io.File%29)

```
FileUtils.readLines(myFile).toArray(new String[0]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T17:24:56.133

你这样做是不对的。它一定要是

```
for(i = 0; i < array.length;i++)
   {
   array[i]=s.nextLine();
   }

array[i] = value; // the value would be assigned into the array at index i. 
```

但是，更好的选择是使用 List 实现类，例如 ArrayList，它可以为您提供动态大小的优势。

```
 List<String> list = new ArrayList<>();
 list.add(s.nextLine(()); 
```

# java - Rally：如何向测试集添加更多测试用例

> ID：13383892
> 
> 赞同：0
> 
> 时间：2012-11-14T17:21:50.527
> 
> 标签：java, rally, testcase

我的情况是，已经有一些测试用例与测试集相关联，我想向该测试集添加更多测试用例。查看 WSAPI，我只能将一组测试用例添加到测试集中。如果我只需要在一个测试集中再添加一个测试用例怎么办？目前，我正在以 JsonArray 的形式将所有测试用例重新添加到测试集中？我更喜欢一种我可以简单地将一个测试用例添加到测试集中的方式，每次将一组测试用例添加到测试集中可能是一种冒险的方式。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:33:35.797

看看这个问题的答案：

[如何使用 Rally REST API 从测试集中删除（取消映射）测试用例？](https://stackoverflow.com/questions/11231449/how-do-you-remove-unmap-a-test-case-from-test-set-with-rally-rest-api/11233375#11233375)

它正朝着相反的方向发展，即从测试集中删除而不是添加测试用例，但是，它说明了同样的事情-不幸的是，您必须更新整个集合。

您使用 JsonArray 的方法是正确的。您也是正确的，这并非没有风险 - 如果集合中的测试用例在测试集上的更新操作期间发生更改，则可能会出现并发问题。

# r - nlsBoot 和 foreach %dopar%：范围问题

> ID：13383895
> 
> 赞同：1
> 
> 时间：2012-11-14T17:22:06.843
> 
> 标签：r, foreach, scope, nls, statistics-bootstrap

我想为`nls`循环中的拟合做残差的引导。我使用`nlsBoot`and 为了减少计算时间，我想并行执行（目前在 Windows 7 系统上）。这是一些代码，它重现了我的问题：

```
#function for fitting
Falge2000 <- function(GP2000,alpha,PAR) {
  (GP2000*alpha*PAR)/(GP2000+alpha*PAR-GP2000/2000*PAR)
}

#some data
PAR <- 10:1600
GPP <- Falge2000(-450,-0.73,PAR) + rnorm(length(PAR),sd=0.0001)
df1 <- data.frame(PAR,GPP)

#nls fit
mod <- nls(GPP~Falge2000(GP2000,alpha,PAR),start=list(GP2000=-450,alpha=-0.73),data=df1, upper=c(0,0),algorithm="port")

#bootstrap of residuals
library(nlstools)
summary(nlsBoot(mod,niter=5))
#works

#now do it several times
#and in parallel
library(foreach)
library(doParallel)

cl <- makeCluster(1)
registerDoParallel(cl)

ttt <- foreach(1:5, .packages='nlstools',.export="df1") %dopar% {
  res <- nlsBoot(mod,niter=5)
  summary(res)

}
#Error in { : 
#task 1 failed - "Procedure aborted: the fit only converged in 1 % during bootstrapping"

stopCluster(cl) 
```

我怀疑这是环境问题，在查看`nlsBoot`问题的代码后，似乎是由于在调用中使用了匿名函数`lapply`：

```
l1 <- lapply(1:niter, function(i) {
    data2[, var1] <- fitted1 + sample(scale(resid1, scale = FALSE), 
        replace = TRUE)
    nls2 <- try(update(nls, start = as.list(coef(nls)), data = data2), 
        silent = TRUE)
    if (inherits(nls2, "nls")) 
        return(list(coef = coef(nls2), rse = summary(nls2)$sigma))
})
if (sum(sapply(l1, is.null)) > niter/2) 
    stop(paste("Procedure aborted: the fit only converged in", 
        round(sum(sapply(l1, is.null))/niter), "% during bootstrapping")) 
```

有没有办法`nlsBoot`在并行循环中使用？还是我需要修改功能？（我可以尝试使用`for`循环而不是`lapply`.）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:09:13.513

通过将`mod`对象的创建移动到`%dopar%`循环中，看起来一切正常。此外，这会自动导出`df1`对象，因此您可以删除`.export`参数。

```
ttt <- foreach(1:5, .packages='nlstools') %dopar% {
  mod <- nls(GPP~Falge2000(GP2000,alpha,PAR),start=list(GP2000=-450,alpha=-0.73),data=df1, upper=c(0,0),algorithm="port")
  res <- nlsBoot(mod,niter=5)
  capture.output(summary(res))

} 
```

但是，您可能需要确定要返回的内容。使用`capture.output`只是为了看看事情是否正常，因为`summary(res)`似乎只返回`NULL`。

# objective-c - 从文档文件夹目标 C 保存和读取图像

> ID：13383899
> 
> 赞同：1
> 
> 时间：2012-11-14T17:22:36.797
> 
> 标签：objective-c, uiimage, save

我在文档目录中保存了一张图片，但是当我尝试读取它时，似乎根本没有保存该文件。读取路径OK，和save一样。

```
[_IDBanners addObject:@"44"];
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsPath = [paths objectAtIndex:0]; //Get the docs directory
            NSString * name = [NSString stringWithFormat:@"%@.png",[_IDBanners objectAtIndex:i]];
            NSString *filePath = [documentsPath stringByAppendingPathComponent:name]; //Add the file name

            NSData *pngData = [NSData dataWithContentsOfFile:filePath];
            UIImage *image = [UIImage imageWithData:pngData]; 
```

当我登录时：

```
NSLog(@"%@",image); 
```

它返回（空）。

# arrays - 从参数添加到 ruby 数组时修复可怕的格式

> ID：13383900
> 
> 赞同：0
> 
> 时间：2012-11-14T17:22:37.403
> 
> 标签：arrays, ruby-on-rails-3, formatting

我有一些添加到会话数组中的代码，如下所示：

```
if policy_session[:modalities] #array exists just add new value to it
    policy_session[:modalities] << [params[:modality], policy_session[:mode_list]]
else #the array does't exist yet, so create and add first one. 
    policy_session[:modalities] = [params[:modality], policy_session[:mode_list]] 
```

但这会在我的`:modalities`数组上产生可怕的格式。它看起来像这样：

```
>> policy_session[:modalities]
>># [["var_1"], "1",[["var_2"], ["2"]], [["var_3"], ["1"]]] 
```

稍后在我的程序中尝试和迭代是一件非常痛苦的事情。

我尝试了很多不同的东西，但还没有想出比这个更好的东西。

如何创建然后添加到数组中，以便我的输出可读？并且所有格式都相同！

我想要这样的东西：

```
>>policy_session[:modalities]
>># [["var_1", "1"], ["var_2", "2"], ["var_3", "1"]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:39:17.280

像这样的东西...

```
policy_session[:modalities] ||= [] # set it to an empty array if nil
policy_session[:modalities] << [params[:modality], policy_session[:mode_list]] 
```

编辑：摆脱多余的 [] ......

```
policy_session[:modalities] ||= [] # set it to an empty array if nil
policy_session[:modalities] << [params[:modality], policy_session[:mode_list]].flatten 
```

# zend-framework - Zend 框架动态路由

> ID：13383901
> 
> 赞同：2
> 
> 时间：2012-11-14T17:22:42.580
> 
> 标签：zend-framework, routing

我有一个纯数据库驱动的网站。我是 Zend Framwork 和路由概念的新手，虽然我已经做了很多阅读。大脑几乎是一块海绵，有些东西仍在试图被理解。我主要将 ZF 用于路由，但我计划在可能的情况下实现它的其他方面。在大多数情况下，这是一个学习过程，所以有些东西我想在没有框架的情况下自己编写。

以下是该站点的工作方式： URL 可以是任何内容，从“/” - 根索引，到“/contact/ - 根文件”，再到“/deposits/” - “/deposits/ira/”的子目录 -子目录中的一个文件。

当用户单击链接代码时，需要解析 REQUEST_URI 以查看数据库的“页面”表。这样做的唯一目的是获取与 REQUEST_URI 匹配的记录的 ID。该 ID 是页面所有内容的关键，然后检查其他表以查看是否需要获取页面其他方面的任何数据。迫切需要的是模板名称。该站点将使用几个不同的页面，具体取决于它是主页、部分登录页面还是部分的内容。此信息是在将页面保存到数据库时决定的。

我希望能够获取这些数据，然后决定如何路由它，以便它使用正确的模板并可以从该点收集其余数据以完成页面。

由于可以随时创建部分和页面，因此必须有控制器可以根据返回的模板数据处理要做什么。这几乎意味着控制器等将需要一些标准化的名称，这些名称与 REQUEST_URI 中传递的值无关。

我将如何在 Zend 中完成此操作，以便所有这些都发生在选择控制器之前，并且只有模板名称可以用于选择正确的控制器？

谢谢，赛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:14:49.233

如果您的*所有*路由（至少对于前端）确实是动态的，那么听起来您可以这样做：

1.  在引导程序中，删除所有默认路由。

2.  在插件中`routeStartup`，获取`REQUEST_URI`并查询您的数据库。大概该记录包含足够的信息让您找出所需的控制器、操作、布局等。

    2.1 添加单个路由（匹配REQUEST_URI）映射到控制器和动作。

    2.2 将布局设​​置为所需布局。

然后在正常调度期间，路由将匹配，控制器/动作将被调用，您将正确设置布局。

如果请求与存储在您的数据库中的任何页面都不匹配，您必须自己调用错误控制器/操作以给出 404 响应。

但是，如果您的应用程序中最终有一些静态（即非数据库存储）路由（我想一定是这种情况），那么您需要在点击数据库搜索之前匹配它们请求了一个。这种匹配听起来很痛苦（尽管可能有一种方法可以询问路由器本身是否匹配请求的路由，就像标准调度程序一样）。

在这种情况下，也许另一种方法是在引导时以标准方式将所有这些（非数据库存储的）路由添加到路由器，并将所有这些`REQUEST_URI`检查、数据库搜索和控制器/动作/布局处理放入404 处理程序。如果请求的 url 与您的数据库中的某些内容匹配，则`_forward()`（不重定向）到该控制器/操作并设置布局，如上所述。

它可能不是最高效的解决方案——因为`_forward()`在调度循环中触发了另一个迭代——但它似乎可以工作。

# tomcat - 参数没有注册配置（容器 [id = [tomcat7x]

> ID：13383904
> 
> 赞同：3
> 
> 时间：2012-11-14T17:22:58.297
> 
> 标签：tomcat, maven, maven-plugin, maven-cargo

我的 pom.xml 中有以下内容

```
<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <configuration>
        <wait>true</wait>
        <container>
            <containerId>tomcat7x</containerId>
            <type>remote</type>
        </container>
        <configuration>
            <type>remote</type> 
            <properties>
                <cargo.tomcat.manager.url>http://<myhost>:8080/manager</cargo.tomcat.manager.url>
                <cargo.remote.username>admin</cargo.remote.username>
                <cargo.remote.password>password</cargo.remote.password>
            </properties>
        </configuration>
        <deployer>
            <type>installed</type>
            <deployables>
                <deployable>
                    <groupId>com.mycode</groupId>
                    <artifactId>myartifact</artifactId>
                    <type>war</type>
                </deployable>
            </deployables>
        </deployer>
    </configuration>
    <executions>
        <execution>
            <id>start-container</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>deployer-deploy</goal>
            </goals>
        </execution>
        <execution>
            <id>stop-container</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>deployer-undeploy</goal>
            </goals>
        </execution>
        <execution>
            <id>verify-deploy</id>
            <phase>install</phase>
            <goals>
                <goal>deployer-deploy</goal>
            </goals>
        </execution> 
        <execution>
            <id>clean-undeploy</id>
            <phase>pre-clean</phase>
            <goals>
                <goal>deployer-undeploy</goal>
            </goals>
        </execution> 
    </executions>
</plugin> 
```

在此之后我发出命令`mvn deploy`但是我收到以下错误：

> [错误] 无法在项目 fismacm 上执行目标 org.codehaus.cargo:cargo-maven2-plugin:1.3.1:deployer-deploy (start-container)：执行目标 org.codehaus.cargo:cargo-maven2 的启动容器-plugin:1.3.1:deployer-deploy failed: 无法创建配置。参数没有注册配置（容器 [id = [tomcat6x]，类型 = [remote]]，配置类型 [remote]）。此配置的有效类型是：

`http://<myhost>:8080/manager`我可以从我的浏览器成功访问。我正在运行的tomcat版本是7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-15T15:33:51.507

@maba：有两种类型标签

```
<container>
    <type></type>
</container> 
```

在那里你可以嵌入/远程

接着

```
<configuration>
    <type>runtime</type>
</configuration> 
```

实际上，您可以在哪里拥有您提到的值：独立、现有或运行时

@birdy：我面临同样的问题：如果您摆脱它，请提及它:) 顺便说一句，日志错误还为您提供了可能的类型，但您没有将其粘贴到您的帖子中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T10:24:06.540

刚刚在调查一个稍微不同的问题时遇到了这个问题。希望这可以帮助将来的人：

我相信

```
<configuration>
    <type>remote</type>
</configuration> 
```

应该：

```
<configuration>
    <type>runtime</type>
</configuration> 
```

以下是对我有用的 pom.xml 的摘录：

```
<plugins>
    <plugin>
        <groupId>org.codehaus.cargo</groupId>
        <artifactId>cargo-maven2-plugin</artifactId>
        <version>1.6.0</version>
        <configuration>
            <container>
                <containerId>tomcat7x</containerId>
                <type>remote</type>
            </container>
            <configuration>
                <type>runtime</type>
                <properties>
                    <cargo.hostname>hostname</cargo.hostname>
                    <cargo.servlet.port>port</cargo.servlet.port>
                    <cargo.tomcat.manager.url>http://${cargo.hostname}:${cargo.servlet.port}/manager</cargo.tomcat.manager.url>
                    <cargo.remote.username>username</cargo.remote.username>
                    <cargo.remote.password>password</cargo.remote.password>
                </properties>
            </configuration>
            <deployables>
                <deployable>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>${project.artifactId}</artifactId>
                    <type>${project.packaging}</type>
                </deployable>
            </deployables>
        </configuration>
    </plugin>
</plugins> 
```

# javascript - 通过 ajax 调用将 html、js 和 css 小部件加载到外部站点

> ID：13383908
> 
> 赞同：0
> 
> 时间：2012-11-14T17:23:14.443
> 
> 标签：javascript, html, css, ajax

我有一个网页应该触发一个 ajax 请求以将一个小部件加载到一个 div 中，该小部件由一个 html 块、一个 css 文件和 2 个 js 文件（jquery lib 和包含小部件逻辑的文件）组成。

将外部代码导入主站点的最佳方式是什么？为了不干扰主站点中加载的其他 .js 库和 .css 类，该怎么做？

目前我正在使用 iframe，但由于几个原因，我想删除它们。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:29:35.360

长和短？您无法从您的页面以编程方式访问第 3 方内容。可以这么说，您可以创建“页面中的页面”（iframe）。

或者，您可以使用 html 标签（如`<script>`和）将第 3 方内容作为页面的一部分`<style>`。但是，这意味着内容可能会与您的内容交互。

如果您有权访问第 3 方服务器，则可以使用 CORS。

但由于许多跨站脚本安全问题，禁止跨站编码

# jquery - Struts2 AJAX验证成功后需要重定向到另一个页面

> ID：13383909
> 
> 赞同：1
> 
> 时间：2012-11-14T17:23:17.463
> 
> 标签：jquery, struts2

我是`not using struts2-jquery-plugin`。只使用`struts2-json-plugin with JQuery`最新的。

*验证成功后想`redirect/actionredirect`转到另一个页面。如果我这样做，`<result type="redirect">/quiz-success.jsp</result>`或者`<result>/quiz-success.jsp</result>`不工作。*

**问题：你们是怎么做到的？**

```
1 - Is it possible to do redirection etc in struts.xml during AJAX request?
2 - I have to redirect/page refresh in $.ajax({ success: function (data) {} }); like below?

$.ajax({
                    url: url,
                    type: 'POST',
                    data: viewData,
                    //dataType: "json",
                    cache: false,
                    complete: postValidation,
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        console.log("error :"+XMLHttpRequest.responseText);
                    },
                    success: function (data) {
                        Window.location = "/cms/home.action"+sessiontoken;
                    }
                }); 
```

**struts.xml**

```
<package name="validation" namespace="/validation" extends="json-default">
        <action name="quizAjax" class="com.myapp.action.QuizAction" method="sayHi">
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <result name="input">/quiz-ajax.jsp</result>
            <result type="redirect">/quiz-success.jsp</result>
        </action>
    </package> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:36:24.050

您不能使用，`<result type="redirect">/quiz-success.jsp</result>`因为您正在使用 javascript 调用服务器。它是从服务器获取答案的脚本，而不是页面，因此您必须在脚本中处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:31:43.557

改变这一行，看看这是否适合你：

改变这个

```
Window.location = "/cms/home.action"+sessiontoken; 
```

对此

```
window.location.replace(window.location.href+"/cms/home.action"+sessiontoken); 
```

# c# - C# 和 Node.js/crypto 的常见加密/解密代码示例

> ID：13383910
> 
> 赞同：9
> 
> 时间：2012-11-14T17:23:24.843
> 
> 标签：c#, node.js, express, forms-authentication, connect

我正在尝试在 IIS 中使用应用程序请求路由 (ARR) 将一组路径传递给 Node.js 网站。我的问题是能够在任一侧获取/设置身份验证票。

我只需要一个简单的加密/解密对示例，它可以在 C# 和 Node.js 中使用，并且开箱即用，两者的结果相同。在接下来的几天里，如果时间允许，我将自己解决这个问题，如果没有人在我之前提出答案，我打算回答。

我的意图是将节点端编写为 Node.js 端的连接/表达模块。我已经在 ASP.Net 解决方案中进行了自定义身份验证，并且可以轻松地将我当前的方法替换为可以在两个平台上都安全的方法（只要它们共享相同的密钥）。

* * *

用于创建身份验证 cookie 的当前代码`AccountController.cs`

```
private void ProcessUserLogin(MyEntityModel db, SiteUser user, bool remember=false)
{
  var roles = String.Join("|", value:user.SiteRoles.Select(sr => sr.Name.ToLowerInvariant().Trim()).Distinct().ToArray());

  //update the laston record(s)
  user.UserAgent = Request.UserAgent;
  user.LastOn = DateTimeOffset.UtcNow;
  db.SaveChanges();

  // Create and tuck away the cookie
  var authTicket = new FormsAuthenticationTicket(
    1
    ,user.Username
    ,DateTime.Now
    ,DateTime.Now.AddDays(31) //max 31 days
    ,remember
    ,string.IsNullOrWhiteSpace(roles) ? "guest" : roles
  );
  var ticket = FormsAuthentication.Encrypt(authTicket);
  var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, ticket);
  if (remember) cookie.Expires = DateTime.Now.AddDays(8);
  Response.Cookies.Add(cookie);
}
```

* * *

读取身份验证 cookie 的当前代码`Global.asax.cs`

```
void Application_AuthenticateRequest(object sender, EventArgs args)
{
  HttpCookie authCookie = Context.Request.Cookies[FormsAuthentication.FormsCookieName];
  if (authCookie == null) return;

  FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

  string[] roles = authTicket.UserData.Split(new Char[] { '|' });

  //create new generic identity, and corresponding principal...
  var g = new GenericIdentity(authTicket.Name);
  var up = new GenericPrincipal(g, roles);

  //set principal for current request & thread (app will handle transitions from here)
  Thread.CurrentPrincipal = Context.User = up;
}
```

* * *

相关部分`Web.config`

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <membership>
      <providers>
        <!-- Remove default provider(s), so custom override works -->
        <clear />
      </providers>
    </membership>
  </system.web>
</configuration>
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T19:46:50.553

这是一个使用 DES 算法的工作示例。[参考](https://stackoverflow.com/questions/8889547/what-would-this-c-sharp-crypto-code-look-like-in-nodejs)

```
using System;
using System.Text;
using System.Security.Cryptography;

public class Test
{
    public static string Encrypt(string toEncrypt, string key, bool useHashing) 
    {     
        byte[] keyArray;     
        byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);      

        if (useHashing)     
        {         
            MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
            keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));     
        }     
        else
            keyArray = UTF8Encoding.UTF8.GetBytes(key);      

        var tdes = new TripleDESCryptoServiceProvider();
        tdes.Key = keyArray;     
        // tdes.Mode = CipherMode.CBC;  // which is default     
        // tdes.Padding = PaddingMode.PKCS7;  // which is default

        Console.WriteLine("iv: {0}", Convert.ToBase64String(tdes.IV));

        ICryptoTransform cTransform = tdes.CreateEncryptor();     
        byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0,
            toEncryptArray.Length);      
        return Convert.ToBase64String(resultArray, 0, resultArray.Length); 
    }  

    public static void Main()
    {
        Console.WriteLine("encrypted as: {0}", Encrypt("12345", "abcdefghijklmnop", false));
    }
} 
```

哪个输出

```
iv: pdMBMjdeFdo=
encrypted as: 3uDkdT6aQ3c= 
```

并在 node.js 中使用正确的算法**des-ede-cbc ：**

```
var crypto = require('crypto');

var alg = 'des-ede-cbc';

var key = new Buffer('abcdefghijklmnop', 'utf-8');
var iv = new Buffer('pdMBMjdeFdo=', 'base64');

var encrypted = new Buffer('3uDkdT6aQ3c=', 'base64');
var source = '12345';

var cipher = crypto.createCipheriv(alg, key, iv);
var encoded = cipher.update(source, 'ascii', 'base64');
encoded += cipher.final('base64');

console.log(encoded, encrypted.toString('base64'));

var decipher = crypto.createDecipheriv(alg, key, iv);
var decoded = decipher.update(encrypted, 'binary', 'ascii');
decoded += decipher.final('ascii');

console.log(decoded, source); 
```

哪个输出

```
3uDkdT6aQ3c= 3uDkdT6aQ3c=
12345 12345 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-14T10:42:00.757

@xiaoyi 答案是正确的。另外，我只是添加了一些清晰的细节代码。

> 在 C# 中使用 DES 算法进行加密

```
 public static string EncryptTest(string toEncrypt, string key, bool useHashing)
        {
            byte[] keyArray;
            byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);
            byte[] initVectorBytes = Encoding.ASCII.GetBytes("$secure#");

            if (useHashing)
            {
                MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
                keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
            }
            else
                keyArray = UTF8Encoding.UTF8.GetBytes(key);

            var tdes = new TripleDESCryptoServiceProvider();
            tdes.Key = keyArray;
            tdes.Mode = CipherMode.CBC;  // which is default     
            tdes.Padding = PaddingMode.PKCS7;  // which is default
            tdes.IV = initVectorBytes;

            ICryptoTransform cTransform = tdes.CreateEncryptor();
            byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0,
                toEncryptArray.Length);
            return Convert.ToBase64String(resultArray, 0, resultArray.Length);
        } 
```

输出时`EncryptTest("1234", "abcdefghijklmnop", false)`：`GD/JSd91ZnQ=`

> 在nodejs中使用DES算法加密

```
var algorithm = 'des-ede-cbc';

function encryption(plainText) {

    var key = new Buffer.from("abcdefghijklmnop", 'utf-8');
    var iv = new Buffer.from("$secure#", "ascii");

    var cipher = crypto.createCipheriv(algorithm, key, iv);
    var encoded = cipher.update(plainText, 'ascii', 'base64');
    encoded += cipher.final('base64');

    console.log(encoded);

    return encoded;
} 
```

输出时`encryption("1234")`：`GD/JSd91ZnQ=`

节点：`new Buffer('', '')`已弃用。我把它换成了`new Buffer.from()`

> 在 C# 中使用 DES 算法解密

```
public static string DecryptTest(string cipherString, string key, bool useHashing)
        {
            byte[] keyArray;
            byte[] toEncryptArray = Convert.FromBase64String(cipherString);
            byte[] initVectorBytes = Encoding.ASCII.GetBytes("$secure#");

            if (useHashing)
            {
                MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
                keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
            }
            else
                 keyArray = UTF8Encoding.UTF8.GetBytes(key);

            var tdes = new TripleDESCryptoServiceProvider();
            tdes.Key = keyArray;
            tdes.Mode = CipherMode.CBC;  // which is default     
            tdes.Padding = PaddingMode.PKCS7;  // which is default
            tdes.IV = initVectorBytes;

            ICryptoTransform cTransform = tdes.CreateDecryptor();
            byte[] resultArray = cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);

            return UTF8Encoding.UTF8.GetString(resultArray);
        } 
```

输出时`DecryptTest("GD/JSd91ZnQ=", "abcdefghijklmnop", false)`：`1234`

> 在nodejs中使用DES算法解密

```
var algorithm = 'des-ede-cbc';

function decryption(chipertext) {

   var key = new Buffer.from("abcdefghijklmnop", 'utf-8');
    var iv = new Buffer.from("$secure#", "ascii");
    var encrypted = new Buffer.from(chipertext, 'base64');

    var decipher = crypto.createDecipheriv(algorithm, key, iv);
    var decoded = decipher.update(encrypted, 'binary', 'ascii');
    decoded += decipher.final('ascii');

    console.log(decoded);

    return decoded;
} 
```

输出时`decryption("GD/JSd91ZnQ=")`：`1234`

[有关DES 算法](https://academic.csuohio.edu/yuc/security/Chapter_06_Data_Encription_Standard.pdf)的更多详细信息

# vim - 让 Vim 在 Windows 上处理中等大小的文本文件？

> ID：13383915
> 
> 赞同：3
> 
> 时间：2012-11-14T17:23:45.933
> 
> 标签：vim

我正在尝试在 Windows 上的 gvim 中打开一个 200MB 的文本文件，结果令人窒息。vim 窗口打开并保持空白且无响应。我的系统有 8GB 的​​ RAM，使用记事本在大约 2-5 秒内打开文件。

我发现[这篇关于在 vim 中编辑非常大的文本文件的 SO 帖子](https://stackoverflow.com/questions/908575/how-to-edit-multi-gigabyte-text-files-vim-doesnt-work)，我尝试在关闭插件的情况下打开文件：

```
vim -u "NONE" my200MBfile.text 
```

但这没有帮助。我还能做些什么来让它发挥作用吗？奇怪的是，vim 会在我的机器上阻塞实际上不是那么大的文件。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T19:05:52.207

**很**可能是使 vim 停止的语法插件。我对 Mbs-Gbs 文件从来没有任何问题。**除非**我不小心用一些不那么好的文件类型打开它们。

加载/挂起时按 ^C（中断插件）

```
:syntax off 
```

行得通。还有其他*语法*选项可以更轻松地处理文件而无需完全“同步”语法突出显示

* * *

我又玩了一些，我发现我的一些插件确实会使对（非常）大文件的操作非常慢。我这样做是为了好玩：

在大型输入文件（~600Mb）上：

```
$ wc input.txt.full 
  2674568   2674568 608825278 input.txt.full 
```

我通过以下调整启动了 vim：

```
vim -u NONE -n +'se nonu nowrap ul=-1 | syn off' input.txt.full 
```

注意这个

*   `-u NONE`阻止执行初始化（用户）脚本和插件
*   `-n`禁用交换文件的写入（在慢速/小型磁盘上非常重要）
*   `se nonu nowrap ul=-1`禁用

    *   行号
    *   换行
    *   撤消历史记录（设置`undolevels`为负值）

    基本上，所有可能占用大量 CPU 或内存的东西

*   `syn off`禁用语法高亮（仅当语法高亮对文件类型有效时才会有所不同）

现在，我想复制行本身的每一行（*全局：复制行，与上一个连接*）：

```
:g/^/t.|-j 
```

不幸的是，文件对于可用内存 (~3Gb) **¹**来说太大了，所以我选择对前 20%（~535,000 行）采取行动：

```
:exec "norm 20%"|1,.g/^/t.|-j 
```

这可以“快速”工作并且没有问题。手动导航（跳跃、滚动、模式切换、搜索等）似乎反应灵敏。

命令行基准：

```
$ xxd -c 44 /dev/urandom | head -n 3800000 >  input.txt.full 
$ wc input.txt.full 
  3800000  91820644 627000000 input.txt.full
$ time vim -u NONE -n +'se nonu nowrap ul=-1 | syn off' input.txt.full +'exec "norm 10%"|1,.g/^/t.|-j' +wq

real    0m7.778s
user    0m6.680s
sys 0m0.952s

$ wc input.txt.full 
  3800000 101002757 689940307 input.txt.full 
```

（请注意`689940307 ÷ 627000000 = 110.03 %`，这是完全正确的）。

这在我的书中***并不慢。***作为比较，`wc`调用*本身* ***需要相同的时间***（7.7 秒）。

* * *

**¹**执行所有测试`tmpfs`以避免缓存差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T18:58:36.610

问题更可能是 vim 不喜欢那么长的行。

首先尝试使用`json_reformat`文件上的工具...

如果您绝对必须按原样编辑文件，请尝试`:syntax off`并可能`:set nowrap`在您`:edit`有问题的文件之前尝试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T20:40:35.077

尽管 Vim 打开该大小（或更大）的文件没有问题，但有人提到它在打开文件时遇到问题，就像您的情况一样，只有一行（该大小）。

您可以尝试各种解决方法，但我建议使用“正确工作的正确工具”方法，并尝试[EmEditor](http://www.emeditor.com/)，这是一个专门用于编辑大文件（以及其他内容）的文本编辑器。

请注意，这不是对 Vim 的抨击，而是 Vim 是一个主要用于编辑源代码的编辑器。在这方面非常出色，但与其他所有工具一样，它也有其局限性。

# oracle - 如何在Oracle中同时导入2个几乎相同的数据库副本？

> ID：13383917
> 
> 赞同：0
> 
> 时间：2012-11-14T17:23:50.067
> 
> 标签：oracle, impdp

我在本地有一个运行正常的最新 10g 数据库，我不想弄乱它。我需要在本地对客户的数据库进行一些查询，这是我们当前软件落后的几个版本。我已经使用 expdp 导出了他们的完整数据库。用户是一样的，结构也差不多。同时加载两个数据库的正确方法是什么？

如果我的措辞很有趣，或者以错误的方式处理这个问题，请告诉我！谢谢！

**编辑：** 主应用程序中的每个组件/应用程序都有一个主用户和另一个用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:27:08.347

使用带有“重新映射架构”选项的导入数据泵 (impdp) 将导出的架构加载到现有数据库中的另一个架构中：

[http://www.database.fi/2011/05/using-expdp-impdp-and-changeing-schemas-with-remap_schema/](http://www.database.fi/2011/05/using-expdp-impdp-and-changing-schemas-with-remap_schema/)

# css - 文本超出其 div（溢出）

> ID：13383928
> 
> 赞同：0
> 
> 时间：2012-11-14T17:24:25.877
> 
> 标签：css

[http://maniamicizia.it/index.php?page=home&lang=it](http://maniamicizia.it/index.php?page=home&lang=it)

我的网站基于我的网站，`float:left`效果很好（IE 不仅仅是因为 rgba 背景和改编背景）。我现在遇到了这个奇怪的问题，它阻止了文本站在自己的 div 中。

这是 CSS/HTML

```
<div style='
border:10px solid rgb(239,226,173);
background:rgba(200,200,200,0.7);
margin-left:320px;
margin-top:290px;
width:150px;
height:200px;
box-shadow: 0px 0px 6px 3px rgba(100, 100, 100, 1);
-webkit-transform:rotate(0deg);
'> Hello World </div> 
```

只是……为什么？我知道如何处理这个位置，但是为什么文本会这样呢？div“*显然*”是便利贴右边的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:31:39.283

我自己试过了，但文本根本没有溢出，它留在 div 内。可能您正在从父 div 继承样式属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:29:57.823

在您的元素样式中使用`float:left;`以将文本保留在所需的框中。

```
<div style="
border:10px solid rgb(239,226,173);
background:rgba(200,200,200,0.7);
margin-left:320px;
margin-top:220px;
width:150px;
height:200px;
box-shadow: 0px 0px 6px 3px rgba(100, 100, 100, 1);
-webkit-transform:rotate(0deg);
float:left;">

Wth am I doing here?

</div> 
```

# rest - Promise 响应适用于 GET，但不适用于 XHR 中的 POST

> ID：13383932
> 
> 赞同：0
> 
> 时间：2012-11-14T17:24:43.433
> 
> 标签：rest, dojo, promise, get-headers

我正在尝试通过 DOJO 1.8 上的 XHR.post 调用 URL。我需要从承诺响应中捕获 STATUS 属性和 getHeader() ，但问题是，当我使用 POST 调用我的 URL 时，我没有任何承诺，而当我使用 GET 调用时，我拥有我需要的所有属性，但我只能将请求作为 POST 发送。

最奇怪的是我在 AngularJS 中有另一个运行良好的代码，这个代码做同样的事情。我正在测试 DOJO 和 AngularJS。

我需要捕获 STATUS 信息以检查它是否为 201（已创建），如果为真，我需要捕获 getHeader('location') 并调用从 getHeader('location') 获取的 URL。

看看我在 Dojo 1.8 中的方法：

```
checkCreation: function(typeFile, id){

    var promise = xhr('/rest/list/one', {
        handleAs: 'json',
        method: 'post',
        accepts: 'application/json',
        headers: {
            Accept: 'application/json',
            id: id,
            type: typeFile
        }
    });

    promise.response.then(function(response) {
        console.log("status", response.status);
        console.log("options", response.options);
        console.log("url", response.url);
        console.log("timestamp", response.options.timestamp);

        console.log(response);
    });

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:45:08.827

我发现了这个问题，我评论了以下几行，现在工作正常。

```
//handleAs: 'json',
//accepts: 'application/json', 
```

只有当您有 JSON 响应时才需要使用 handleAs。关于“接受”我还没有发现“接受”和“接受”（内部标题）之间的区别。

现在我可以获取我的信息：

```
console.log('location: ', response.getHeader('location'));
console.log("status: ", response.status); 
```

# php - Webstorm 不在 Chrome 中调试 .php 文件

> ID：13383934
> 
> 赞同：4
> 
> 时间：2012-11-14T17:24:47.680
> 
> 标签：php, webstorm

当我点击“调试”

![Webstorm调试按钮](../Images/0b3305ba2a935cf0e136f500795aac61.png)

在 Firefox 中，我得到了 html 格式的结果页面，我可以检查：

![在 Firefox 中调试 PHP 文件](../Images/4d83b9518305639666c478280ed1b21e.png)

但在 Chrome 中，我只得到 PHP 源代码： ![在 Chrome 中调试 PHP 文件](../Images/f4bb1ffe89663c11874af8a827b6d06e.png)

问题是什么？有没有人遇到过？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:26:07.603

您正在直接访问磁盘上的文件。尝试通过您的网络服务器访问它（换句话说，*将页面作为 HTML 提供*）。

# javascript - 如何将 HTML 表格放入下拉框中？

> ID：13383937
> 
> 赞同：0
> 
> 时间：2012-11-14T17:24:52.670
> 
> 标签：javascript, jquery, html

如何将 HTML 表格放入下拉框中？所以，像：

```
<select>
     <table></table>
</select>

or

<select>
    <option>
        <table></table>
    </option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:27:59.280

使用纯 CSS 和 HTML 这是不可能的。

javascript 可能是您解决此问题的最佳方法。使用 Jquery 也会极大地帮助你的 JavaScript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:27:21.830

`select`仅使用 -tag无法实现您想要实现的目标。在此标签中，只允许使用`optgroup`- 和 -标签`option`。参见 w3c.org：“17.6 [SELECT、OPTGROUP 和 OPTION 元素](http://www.w3.org/TR/html401/interact/forms.html#h-17.6)”。

当我们进一步讨论`option`-tag 时，您会看到*内容模型*只允许`text`在此元素中使用。再次在 w3c.org 上：“ [4.10.12 选项元素](http://www.w3.org/TR/2011/WD-html5-20110525/the-button-element.html#the-option-element)”

`option`因此，实现这一目标的唯一方法是使用其他 HTML 元素创建一个外观和行为类似于 -tag 的元素。

在这个[关于 jsfiddle 的演示中，](http://jsfiddle.net/yKDTY/)您可以看到一个示例，说明可能的解决方案的外观。这个无需 JavaScript 即可工作，因为内容显示在`:hover`. 当然，您可以`click`使用 JavaScript 或 jQuery 将其更改为 -event。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:28:29.927

如果你想这样做，你将需要一些自定义的自制元素。标记中不允许有其他 HTML`<option>`标记。

例如，查看增强标准选择元素的 javascript 库，例如[Chosen](http://harvesthq.github.com/chosen/)。也许你可以从那里得到一些关于如何实现你的表逻辑的灵感。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T17:31:51.443

我认为你不能这样做......你必须刺激它。

您需要构建一个包含多行的 div 并将向下箭头添加到第一行以使其看起来像下拉列表。

# python - 宾果号码检查

> ID：13383938
> 
> 赞同：0
> 
> 时间：2012-11-14T17:24:54.463
> 
> 标签：python

所以我为我的妻子建立了一个小型宾果游戏程序，供她在蜡烛派对上使用。板已经生成。这只是一个调用数字的程序。

```
import random
a = []
a = list(range(1,76))
random.shuffle(a)

def pop(x):
    while 1:
        b = a.pop(0)
        if b <= 15:
            print 'b', b,
        elif b > 15 and b <=30:
            print 'i', b,
        elif b > 30 and b <=45:
            print 'n', b,
        elif b > 45 and b <=60:
            print 'g', b,
        else:
            print 'o', b,
        raw_input('')

pop(1) 
```

现在她的派对越来越大，她担心有人作弊，所以我想添加一个功能，我可以输入应该赢得的号码，并让程序让我知道这些号码是否确实被调用。我试过将它运行到一个文件中

```
def pop(x):
    while 1:
        b = a.pop(0)
        with open('bingo.txt', 'w') as file1:
            file1.write(b,'\n')
        if b ... 
```

但它只是打开然后关闭。文件中没有错误或任何文本。它不需要转到文件。我只是想，如果确实如此，我可以在最后添加一个搜索文件功能，并知道该号码是否被调用。找出“获胜”线上的数字是否真的被调用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:38:30.527

我会累积在 a`set`中调用的数字，这些数字将从`pop`. 然后我会添加一个函数来读取“获胜”数字（进入一个集合）并检查该新集合是否是被调用数字的子集：

```
import random
import ast

def pop(a,accumulated=None):
    print "type q to move on to verification"
    if accumulated is None:
        accumulated = set()
    v = 'I can put any string here, as long as it is not "q" :-)'
    while v.lower() != 'q':
        b = a.pop(0)
        if b <= 15:
            print 'b', b,
        elif b > 15 and b <=30:
            print 'i', b,
        elif b > 30 and b <=45:
            print 'n', b,
        elif b > 45 and b <=60:
            print 'g', b,
        else:
            print 'o', b,
        accumulated.add(b)
        v = raw_input('')
    return accumulated

def verify(numbers):
    new_nums = raw_input("enter numbers separated by ',': ")
    nums = ast.literal_eval(new_nums)
    assert( len(nums) == 5 ) #Need 5 numbers to win
    result = set(nums).issubset(numbers)
    print "Verified? ",result
    return result
    #alternatively, and probably slightly more efficient
    # print numbers.issuperset(nums)
    #I prefer the other though as `subset` is easier for me to remember

def robust_verify(numbers):
   """
   keep trying to verify the numbers until we succeed
   """
   try:
       verify(numbers)
   except (AssertionError,SyntaxError,TypeError):  #other error conditions might go here too, but these are the ones I can think of right now ...
       robust_verify(numbers)

def play_bingo(game_vals=None,accumulated=None):
    if game_vals is None:
        game_vals = list(range(1,76))  #list strictly not necessary here, but why not?
        random.shuffle(game_vals)

    nums = pop(game_vals,accumulated=accumulated)
    if not robust_verify(nums):
        play_bingo(game_vals=game_vals,accumulated=nums)

play_bingo() 
```

通过确保`verify`成功（例如，您的用户不会意外输入数字作为`15a,17,22,...`） ，这会变得更加健壮

作为旁注，您使用文件的尝试失败了，因为您正在打开一个文件，向其中写入一个数字并在每次“绘制”一个新数字时关闭它。由于您正在打开文件，因为`'w'`任何已经存在的文件都会被破坏 - 因此您只能存储该方法绘制的*最后一个数字。*您希望将`while`循环移动到`with`语句中以使该方法正常工作（或打开文件以进行附加 ( `'a'`)，但重复打开文件以进行附加通常不是一个好的解决方案）。

# xml - 如何在 drupal7 中显示使用 xml_field 模块创建的字段的标题？

> ID：13383944
> 
> 赞同：1
> 
> 时间：2012-11-14T17:25:09.190
> 
> 标签：xml, drupal-7, field

我一直在研究一个模块，我在其中使用[XML Field](http://drupal.org/project/xml_field)模块，如下所示。

我创建了一个具有 xml 类型字段的实体类型。

我已将此字段设置为接受多个值。例如，我的实体如下所示。

```
Entity (item description, body, Metadata(this is xml field with multiple value))
with data --> Item1 ('This is item 1', 'this is body', (

(

    <page>
       <title>metadata item 1</title>
       <description>this is item 1</description>
    </page>

)

(

    <page>
       <title>metadata item 2</title>
       <description>this is item 2</description>
    </page>

)
) 
```

现在在 Metatdata 字段下，我看不到每个 XML 数据节点的标题。

根据模块标题必须使用 显示 `hook_node_view_alter()`，但由于我最近开始模块开发，我无法实现这个钩子。

元数据的期望输出是：

```
**Metadata(xml):**

metadata item 1:  (<--- how to display these titles??)

This is item 1

metadata item 2: (<--- how to display these titles??)

This is item 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-04T13:31:45.430

尝试这个

`<field type="spacer" name="myspacer1" label="&lt;b&gt; metadata item 1 &lt;/b&gt;" /> <field type="spacer" name="myspacer2" label="&lt;b&gt; metadata item 2 &lt;/b&gt;" />`

# jquery - 在 jQuery 中更改 Wordpress 表单上的单选按钮标签

> ID：13383945
> 
> 赞同：1
> 
> 时间：2012-11-14T17:25:09.687
> 
> 标签：jquery, wordpress

我有一个带有单选按钮输入标签和值的 Wordpress 表单，我需要根据另一个字段的输入动态生成该表单。

我无法控制表单的生成方式（没有深入研究插件，时间对我不利，所以我只需要一个快速的解决方案）

Wordpress 生成的 html 如下

```
<input type="text" name="vfb-22" id="vfb-4-50-22" value="" class="vfb-text  vfb-medium number" />
<label for="vfb-4-50-22" class="vfb-desc">Number * 4.50:></label>     

<span>
  <input type="radio" name="vfb-28" id="vfb-and-then-28-1" value="4.50" class="vfb-radio inline" /> 
  <label for="vfb-and-then-28-1" class="vfb-choice">4.50</label>
</span> 
```

如果有人在字段 A(vfb-22) 中输入值。我需要 jQuery 将输入单选按钮和标签的值更改为 A * 当前值

我目前得到所有相关数据并正确更新另一个字段（vfb-42），如下所示

```
$('#vfb-monthly-tickets-4-50-each-86').change(function() { 
  var number=$('input[name=vfb-86]').val();
  var multiplier=4.50;
  total=number*multiplier;
  $('input[name=vfb-42]').val(total);
}) 
```

我所缺少的只是更改单选按钮（vfb-28）的值。我有几次刺伤，没有成功的价值标签。

感谢任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:39:56.653

如果 HTML 总是以这种方式构造.. 你可以试试这个

```
$('.vfb-text').on('change' , function() {  // change event of textbox
  var $this = $(this);      // cache the selector

  var count = this.value ;  // textbox value
  var cost = $this.nextAll('span:first').find('.vfb-choice').text(); 
  // Label text value
  total=number * cost ;

  $this.next('vfb-desc').text(total);    // populate label
  $this.nextAll('span:first').find('.vfb-radio').val(total); 
  // new value of checkbox
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:32:35.000

诚然，这只是您自己方法的重构，但您可以尝试：

```
$('input[name=vfb-22]').change(function() { 
  var number=$('input[name=vfb-22]').val();
  var current = $('input[name=vfb-28]').val();

  total=number*current;

  $('input[name=vfb-22]').val(total);
  $('.vfb-choice').text(total);
}); 
```

# python - 从未在 Python / PyQt 中定义的（子）类访问 GUI 元素

> ID：13383946
> 
> 赞同：1
> 
> 时间：2012-11-14T17:25:16.597
> 
> 标签：python, pyqt

我有一个由 Qt Designer 创建的 GUI。一个元素（“屏幕截图”）用作另一个类定义的占位符。它的 Python 代码翻译如下：

```
...

class Ui_endomess(object):

    def setupUi(self, endomess):
        ...
        self.screenshot = screenshot(self.centralwidget)
        ...        

from screenshot import screenshot 
```

“截图”类如下所示：

```
...
class screenshot(QGraphicsView):
... 
    def some_function(self):
        ... 
```

两者都由具有以下结构的主脚本使用：

```
...
from endomess_ui import Ui_endomess
...

class endomess(QMainWindow, Ui_endomess):

    def __init__(self):
        QMainWindow.__init__(self)
        self.setupUi(self)
    ...

def main(argv):
    app = QApplication(argv, True)
    wnd = endomess()
    wnd.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main(sys.argv) 
```

当然，我可以像这样在“endomess”类中操作 GUI 对象：

```
self.calibrateButton.setEnabled(True) 
```

我想要做的是从“屏幕截图”类中的函数操作 GUI 元素。我搞砸了“全球”电话，但我只是不知道该怎么做。这可能吗？

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:00:36.057

qt 方式是在您的`screenshot`类中定义一个信号并将其连接到您的类中的一个插槽，`endomess`然后可以执行修改。

在`screenshot`类中，您也可以访问对象，因为`self.parent().parent()`（self.parent() 应该是`centralWidget`，并且是`endomess`实例的父对象），但是如果层次结构中的某些内容发生更改，这可能会中断。

# type-conversion - Go - for 循环条件中的 uint32（不匹配的类型 int 和 uint32）

> ID：13383951
> 
> 赞同：24
> 
> 时间：2012-11-14T17:25:28.493
> 
> 标签：type-conversion, go

为了类型严格，我有时将我的尺寸存储为 uint，当尺寸不能为负时。在 for 循环中使用时，我希望它看起来像这样：

```
var size uint32 = 8
for i := 0; i < size; {
    n := //doesn't matter how how this value is determined
    i += n
} 
```

但是，我收到以下错误消息：`invalid operation: i < size (mismatched types int and uint32)`

重写 for 循环以指定如下类型：

```
for var i uint32 = 0; i < size; { 
```

产生此编译器错误：`syntax error: var declaration not allowed in for initializer`

解决这些错误的唯一方法是：

```
for i := 0; uint32(i) < size; { 
```

或者

```
var i uint32 = 0
for i < size { 
```

第一个是低效的，因为我在每次迭代中都进行投射，而第二个则不那么优雅。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-14T17:45:19.333

你可以做：

```
for i := uint32(0); i < size; {
    //whatever
} 
```

一般来说，我不建议使用无符号整数，即使大小永远不会是负数。我不知道有什么好处。当我故意溢出时，我只使用无符号整数。

# css - 将 Aptana 用于使用 FP Extensions 创建的站点？

> ID：13383954
> 
> 赞同：1
> 
> 时间：2012-11-14T17:25:41.577
> 
> 标签：css, aptana, frontpage-extensions

我的网站是使用 FP Extensions 创建的。使用 Aptana 是否会破坏任何扩展或导致任何功能/外观问题，例如 CSS 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:26:15.173

**Frontpage Extensions**是一个服务器插件：

[http://en.wikipedia.org/wiki/FrontPage_Server_Extensions](http://en.wikipedia.org/wiki/FrontPage_Server_Extensions)

使您的服务器与**Frontpage**客户端一起工作：

[http://en.wikipedia.org/wiki/Microsoft_FrontPage](http://en.wikipedia.org/wiki/Microsoft_FrontPage)

如果您使用**Aptana**修改您的网站，您将不会从 FP Extensions 中获得任何好处，但您将能够毫无问题地工作。

Frontpage 的最新版本是 2003 年，所以你不会松太多，但 Aptana 不是 WYSIWYG 编辑器。

我建议卸载 FP Extensions：

[http://www.gregthatcher.com/Papers/IT/frontPage.aspx](http://www.gregthatcher.com/Papers/IT/frontPage.aspx)

因为已经发现了如此多的漏洞，使其非常不安全。

# php - 连接 img src 字符串

> ID：13383957
> 
> 赞同：-1
> 
> 时间：2012-11-14T17:25:52.653
> 
> 标签：php, concatenation, echo, image

我想使用`img`标签显示数据库中的图像。这是我的代码：

```
if(  !empty( $cat_id ) ) {
    $cats = getImagesByCategory( $cat_id );
    foreach( $cats as $image ) {
        $id = $image['id'];

        echo <<<IMAGE
        <img src="images/'.$category['name']. '/' .$image['name'].'" />
IMAGE; 
```

我在 img 标签上遇到错误：`Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING`

我显然连接错误 - 我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:28:58.183

您的`<img>`标签已损坏：

```
<img src="images/'.$category['name']. '/' .$image['name'].'" />
                ^^^                ^^^   ^^^            ^^^ 
```

您正在使用`heredoc`语法，您不会在`heredoc`. 尝试以下方式：

```
<img src="images/$category[name]/$image[name]" /> 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:11:49.507

从长远来看，学习使用[`printf()`](http://ca2.php.net/manual/en/function.printf.php)函数系列对您非常有用。

```
printf('<img src="images/%s/%s"/>', $category['name'], $image['name']); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T17:29:06.223

您的 echo 语句中混合了 ' 和 "。

只需像这样制作回声：

```
echo '<img src="images/' . $category['name'] . '/' . $image['name'].'"/>' 
```

# select - 使用 UNPIVOT 的动态 SQL SELECT 列名和相关数据

> ID：13383965
> 
> 赞同：2
> 
> 时间：2012-11-14T17:26:11.690
> 
> 标签：select, sql-server-2008-r2, unpivot, columnname

我有一个表`PERSONNELSERVICELEVELS`，其中包含一般信息，例如`ID`and `Name`，还有许多列标识`ServiceLevel%`如下：

```
Person_ID  Last_Name  First_Name  ServiceLevel1  ServiceLevel2  ServiceLevel3  etc.
---------  ---------  ----------  -------------  -------------  -------------
222        Doe        John        4              5              NULL  
555        Doe        Jane        2              6              9 
```

我想创建一个`SELECT`语句来产生这个输出：

```
Person_ID  Last_Name  First_Name  ServiceLevel  Level
---------  ---------  ----------  ------------  ----- 
222        Doe        John        ServiceLevel1 4
222        Doe        John        ServiceLevel2 5
222        Doe        John        ServiceLevel3 NULL
555        Doe        Jane        ServiceLevel1 2
555        Doe        Jane        ServiceLevel2 6
555        Doe        Jane        ServiceLevel3 9 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:56:32.573

可以说，要将列转换为行，您可以使用 a `UNION`，如下所示：

```
select Person_ID, Last_Name, First_Name, 'ServiceLevel1' as ServiceLevel, ServiceLevel1 as [Level]
from PERSONNELSERVICELEVELS
union all
select Person_ID, Last_Name, First_Name, 'ServiceLevel2' as ServiceLevel, ServiceLevel2 as [Level]
from PERSONNELSERVICELEVELS
union all
-- etc. 
```

我在`union all`这里使用是因为 union 也隐式地运行了一个不同的操作，而这在这里是不必要的。

您也可以使用[`UNPIVOT`](http://blogs.msdn.com/b/mab/archive/2008/06/16/sql-server-2005-unpivot-command-changings-columns-to-rows-normalizing.aspx).

# javascript - Jcrop 在回调中返回对象的小数

> ID：13383970
> 
> 赞同：3
> 
> 时间：2012-11-14T17:26:35.787
> 
> 标签：javascript, jcrop

使用[jcrop](http://deepliquid.com/content/Jcrop_Manual.html)库，我无法追查为什么回调上的返回对象可以并且有时包含小数。我希望所有 x1、x2、y1、y2、宽度和高度都是整数。

我对 jcrop 的初始化是：

```
$('img.jsEditable').Jcrop({
    bgColor: 'black',
    bgOpacity: .4,
    setSelect: [0, 0, crop_width, crop_height],
    aspectRatio: 1,
    onSelect: saveCoordinates,
    minSize: [crop_width, crop_height],
    maxSize: [400, 400]
  }); 
```

其中crop_width 和crop_height 只是我在其他地方设置的变量，恰好是150。我期望（如在演示中）它们是一个设置像素。

有什么想法吗？
有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:35:42.690

这似乎是 Jcrop 0.9.9 和 0.9.10 之间的差异。[如果您从网站http://deepliquid.com/projects/Jcrop/demos.php?demo=handler](http://deepliquid.com/projects/Jcrop/demos.php?demo=handler)进入演示并拖动您周围的框，只会在回调中获得整数。该演示不是最新的，使用的是 Jcrop 0.9.9。

但是，如果您下载 Jcrop，您将获得 0.9.10 版本。下载中包含的演示也使用 Jcrop 0.9.10，并且您在回调中获得小数。如果您在演示中换出版本 0.9.10 并改用 0.9.9，则您只能在回调中获得整数坐标。

进一步研究，看起来在 jquery.Jcrop.js 的 0.9.10 版本中的第 656 行，坐标的舍入已被删除。回报来自：

```
return [ Math.round(xa), Math.round(ya), Math.round(xb), Math.round(yb) ]; 
```

至

```
return [xa, ya, xb, yb]; 
```

我不确定这是什么原因（我查看了 github 上的提交评论，但没有任何反应）但是如果你添加四舍五入，你将不会再在回调中得到小数。

# android - 片段中的 StackOverflow 异常

> ID：13383972
> 
> 赞同：1
> 
> 时间：2012-11-14T17:26:40.493
> 
> 标签：android

我有一个带有 5 个标签的标签主机，它们是`FragmentActivity`. 其中一个包含一系列 7 个视图。我认为每个都是一个片段，但是当我到达片段 7 时，应用程序爆炸了。

![在此处输入图像描述](../Images/3cc7081054f3716012d2dffe2ae510e0.png)

![在此处输入图像描述](../Images/b56f4cfecada80b8b51d4e71d56d2b50.png)

当我在每个片段中按下继续按钮时，我以这种方式开始一个新片段：

```
 MyFragment newFragment = new MyFragment ();
    FragmentTransaction transaction = getFragmentManager().beginTransaction();
    transaction.replace(R.id.publish_map_direction, newFragment);
    transaction.addToBackStack(null);
    transaction.commit(); 
```

这是错误：

```
11-14 13:50:33.640: I/dalvikvm(13823): threadid=1: stack overflow on call to Landroid/text/Layout;.draw:VLLLI
11-14 13:50:33.640: I/dalvikvm(13823):   method requires 288+20+60=368 bytes, fp is 0x4428a42c (300 left)
11-14 13:50:33.640: I/dalvikvm(13823):   expanding stack end (0x4428a300 to 0x4428a000)
11-14 13:50:33.640: I/dalvikvm(13823): Shrank stack (to 0x4428a300, curFrame is 0x4428cc74)
11-14 13:50:33.640: D/AndroidRuntime(13823): Shutting down VM
11-14 13:50:33.640: W/dalvikvm(13823): threadid=1: thread exiting with uncaught exception (group=0x40015578)
11-14 13:50:33.703: E/AndroidRuntime(13823): FATAL EXCEPTION: main
11-14 13:50:33.703: E/AndroidRuntime(13823): java.lang.StackOverflowError
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.widget.TextView.onDraw(TextView.java:4229)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6933)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.buildDrawingCache(View.java:6695)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.onAnimationStart(ViewGroup.java:1259)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1505)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.View.draw(View.java:6936)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1904)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewRoot.draw(ViewRoot.java:1527)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1263)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.os.Looper.loop(Looper.java:130)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at android.app.ActivityThread.main(ActivityThread.java:3687)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at java.lang.reflect.Method.invokeNative(Native Method)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at java.lang.reflect.Method.invoke(Method.java:507)
11-14 13:50:33.703: E/AndroidRuntime(13823):    at com. 
```

我应该以不同的方式构建我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:32:26.480

是的。

我建议只使用片段，而不是在选项卡主机内嵌套片段活动。我通常创建一个标签栏，并在其下方有一个框架布局，我将一个片段放入其中。然后我根据点击的内容替换片段。那肯定会有所帮助，因为我认为您同时要做的事情太多了。

# web-applications - 流量高的网站能否拉低其他网站

> ID：13383974
> 
> 赞同：1
> 
> 时间：2012-11-14T17:26:46.583
> 
> 标签：web-applications, webserver

我有一个菜鸟问题。假设我们在服务器 1 上有一个网站 (www.abc.com)，在服务器 2 上有第二个网站 www.xyz.com，第二个网站在服务器 1 上引用了一些文件（css 或 javascript）。服务器 1 上的流量可能很高减慢服务器 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:46:23.500

是的，它可以减慢托管在同一服务器上或托管在其他服务器上的其他网站。

它可能由于以下几个问题而发生：

1.  硬件：如果您使用低容量的 RAM
2.  IIS 池
3.  IIS 缓存

如果您没有正确管理 IIS，它会影响服务器性能。

如果您使用 IIS7 及更高版本，则 IIS 可以在内部为您管理第二个和第三个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:30:18.250

对的，这是可能的。你可以阅读相关的东西，维基百科上的[斜线效应](http://en.wikipedia.org/wiki/Slashdot_effect)，它以一种信息丰富的方式解释了真实案例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T17:31:02.960

是的。我已经看到它发生了。在我目睹的情况下，服务器 2 提供的服务比静态文件更复杂，它是一个显示在服务器 1 站点上的小部件。反过来，该小部件对服务器 2 的数据库进行了数据库查询，剩下的就是历史记录。

如果服务器 2 只提供静态文件，那么它肯定不会那么麻烦，但简短的回答是肯定的，如果流量足够高，无论提供什么服务，流量都会对服务器 2 造成压力。

# javascript - 将 HTML 元素复制并插入到新的弹出块中

> ID：13383975
> 
> 赞同：0
> 
> 时间：2012-11-14T17:26:50.673
> 
> 标签：javascript, html, innerhtml, appendchild, createelement

我想完全复制所有元素

```
<div id="articleFull"> ... </div> 
```

（+ div 包括）在新的弹出窗口中显示其内容

```
<div id="newPopUp"> ... </div> 
```

```
<div id="articleFull">
    <p>lorem ipsum</p>
    <img src="1.png" />
    <p>lorem ipsum</p>
    <p>lorem ipsum</p>
    <h3>Test title</h3>
    <img src="1.png" />
    <p>lorem ipsum</p>
</div> 
```

我试着做这个简单的方法：http: [//jsfiddle.net/ApBSN/3/](http://jsfiddle.net/ApBSN/3/)

```
articleFull = document.getElementById('articleFull');

function copyHtml(){
    div = document.createElement('div')
    div.id = 'newPopUp';
    document.body.appendChild(div);

    var t = document.getElementById('articleFull');
    div.appendChild(t);
} 
```

它可以工作...但是该函数不会复制代码，而是将其从一个地方移动到另一个地方，从而有效地将其从原始位置删除。我只想复制块。是的，我知道页面不能是 2 个“ID”，但是有了这个，我会更加照顾自己。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:48:46.197

如果对 Jquery 感兴趣，您可以尝试 Clone ... [http://api.jquery.com/clone/](http://api.jquery.com/clone/)这将复制 html 而不是在追加的情况下替换它

我已经更新了你的[http://jsfiddle.net/ApBSN/9/](http://jsfiddle.net/ApBSN/9/)​​但现在你需要处理 css

```
var t1 = document.getElementById('newPopUp');

var t = document.getElementById('articleFull');

$(t).clone().appendTo(t1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:39:04.030

如果我理解正确，应该这样做：

```
function copyHtml(){
    div = document.createElement('div')
    div.id = 'newPopUp';
    document.body.appendChild(div);

    var t = document.getElementById('articleFull');
    t.id = "articleFull2";
    div.appendChild(t);
} 
```

# javascript - Javascript 书签 - 从浏览器收集 Cookie

> ID：13383978
> 
> 赞同：0
> 
> 时间：2012-11-14T17:26:56.700
> 
> 标签：javascript, string, cookies, string-comparison

我在 Firefox 中将此用作书签，但是当我访问该页面并尝试加载书签时，它什么也没做。我的 JS 代码有问题吗？

在用户 KURT 的建议下，我能够通过以下方式解决这个问题：

```
javascript: (function () {
    function getCookie(name) {
        if (document.cookie.length > 0) {
            c_start = document.cookie.indexOf( 'JSESSIONID' + '=');
            if (c_start != -1) {
                c_start = c_start + 'JSESSIONID'.length + 1;
                c_end = document.cookie.indexOf(';', c_start);
                if (c_end == -1) c_end = document.cookie.length;
                return unescape(document.cookie.substring(c_start, c_end))
            }
        }
        return null;
    }

    function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
    }

    var thedc = readCookie("dc"); 

    if (thedc.substring(0, 2) == 'SP') { 
        alert(' in SP ');
    } else {
        alert(' in WC '); 
    }

}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:37:00.273

您需要将其包装在自调用函数中。

```
(function() { /* Your code */ })(); 
```

您的 getDC 函数还需要显式调用，因此需要调用它。

```
javascript: (function () {
    function getCookie(cookieName) {
        if (document.cookie.length > 0) {
            c_start = document.cookie.indexOf( cookieName + '=');
            if (c_start != -1) {
                c_start = c_start + cookieName.length + 1;
                c_end = document.cookie.indexOf(';', c_start);
                if (c_end == -1) c_end = document.cookie.length;
                return unescape(document.cookie.substring(c_start, c_end))
            }
        }
        return null;
    }

    var thedc = getCookie("dc"); 

    if (thedc.substring(0, 2) == 'SP') { 
        alert(' in SP ');
    } else {
        alert(' in WC '); 
    }
}()); 
```

并压缩：

```
javascript:(function(){function e(){if(document.cookie.length>0){c_start=document.cookie.indexOf(cookieName+"=");if(c_start!=-1){c_start=c_start+cookieName.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return unescape(document.cookie.substring(c_start,c_end))}}return null}var t=e("dc");if(t.substring(0,2)=="SP"){alert(" in SP ")}else{alert(" in WC ")}})() 
```

# javascript - D3.js 水平翻转图

> ID：13383986
> 
> 赞同：1
> 
> 时间：2012-11-14T17:27:20.610
> 
> 标签：javascript, canvas, d3.js

我正在渲染一个与 D3 的[Cluster Dendogram Example](http://bl.ocks.org/4063570 "聚类树状图示例")非常相似的树结构。

我需要水平翻转图形，使父节点在右侧，子节点在左侧。标签上的文字不能翻转。哪些 D3 方法对此负责？

示例中的代码：

```
var width = 960,
height = 2200;

var cluster = d3.layout.cluster()
    .size([height, width - 160]);

var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.y, d.x]; });

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(40,0)");

d3.json("flare.json", function(error, root) {
    var nodes = cluster.nodes(root),
        links = cluster.links(nodes);

    var link = svg.selectAll(".link")
        .data(links)
      .enter().append("path")
        .attr("class", "link")
        .attr("d", diagonal);

    var node = svg.selectAll(".node")
        .data(nodes)
      .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })

    node.append("circle")
        .attr("r", 4.5);

    node.append("text")
        .attr("dx", function(d) { return d.children ? -8 : 8; })
        .attr("dy", 3)
        .style("text-anchor", function(d) { return d.children ? "end" : "start"; })
        .text(function(d) { return d.name; });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:54:49.667

在这种情况下，坐标来自集群布局。您可以修改布局或在代码中减去`.x`布局的宽度，即`width - 160`. 您可能还想调整`text-anchor`属性值。

# php - 检查数组中是否存在值

> ID：13383994
> 
> 赞同：0
> 
> 时间：2012-11-14T17:28:02.450
> 
> 标签：php, arrays

我正在尝试将字符串与数组进行比较，以查看字符串是否存在于数组中，如果存在则回显“在数组中”。对于数组中的最后一个条目，我只能按照我的意愿进行回声工作。

```
foreach($array as $key => $value) {
    foreach($entries as $entry) {
        if($entry == $value) echo 'in array 1';
    }
    if (in_array($value, $entries)) {
        echo 'in array 2';
    }
    if(isset($entries[$value])) {
        echo 'in array 3';
    }
} 
```

'in array 1' 和 'in array 2' 的 echo 仅适用于 $entries 数组中的最后一个条目，而'in array 3' 的 echo 根本不起作用。

它可能是愚蠢的，但我没有看到它......

编辑：

这是数组的一些示例

```
$entries =
array(5) {
  [0]=>
  string(14) "example text 1"
  [1]=>
  string(14) "example text 2"
  [2]=>
  string(14) "example text 3"
  [3]=>
  string(14) "example text 4"
  [4]=>
  string(14) "example text 5"
}

$array = 
array(5) {
  [0]=>
  string(14) "example text 1"
  [1]=>
  string(14) "example text 2"
  [2]=>
  string(14) "example text 3"
  [3]=>
  string(14) "example text 7"
  [4]=>
  string(14) "example text 8"
} 
```

所以现在当我这样做的时候

```
foreach($array as $key => $value) 
```

$value 应该具有我的 $array 中的值，我需要比较这些值中的每一个以查看它们是否存在于我的 $entries 数组中。如果是这样，我想回显“数组中”

编辑2：

如果它有所不同，我的 $entries 数组是由 file() 创建的，因为信息来自日志。每次添加新文件时，都会记录它，然后我想将传入的文件与日志进行比较，确定它们是否已经添加，如果没有，添加它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:29:02.127

您的代码似乎只是检查两个数组中的共同点，并以三种不同的方式进行。一个人会在另一个人身上工作的原因取决于数据。那里的比较器`==`，`in_array`并且`isset`工作方式不同。确实需要查看您的数组结构/示例数据才能进一步评论。

但是，您目前正在做的事情，找到两个数组的共同元素，可以很容易地用`array_diff()`or`array_intersect()`

你的第一行 -

> 我正在尝试将字符串与数组进行比较，以查看字符串是否存在于数组中，如果存在则回显“在数组中”。

只需一次调用即可实现`in_array`，例如`in_array('cat', array('cat', 'dog', 'mouse'));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:29:18.603

`$value`不是钥匙。

价值是一个“价值”。

如果你**真的**想做你正在做的事情，你可以这样做：

```
if(isset(array_flip($entries)[$value])) {
    echo 'in array 3';
} 
```

但是，如果您有多个具有相同值的元素，它可能不起作用。

[见文档](http://php.net/manual/en/function.array-flip.php)

# javascript - 需要在 JavaScript 中进行批量文件上传

> ID：13383998
> 
> 赞同：1
> 
> 时间：2012-11-14T17:28:25.937
> 
> 标签：javascript, jquery

我猜我有一点不寻常的情况。我有一个用于下新订单的页面，新订单的一部分是要上传并与后端订单相关联的可变（0-n）个文件数。用户还需要为每个文件指定描述。

我已经成功使用了几个 jQuery 上传插件，但在这种情况下，当用户点击“确定”时，我不希望上传单个文件。我真正需要做的是通过将本地路径传递给将进行上传的某个方法来上传文件。

有谁知道有什么插件可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:34:05.260

[Ajax Uploader](http://ajaxuploader.com/download.htm)会有所帮助吗？我相信它允许多次上传。