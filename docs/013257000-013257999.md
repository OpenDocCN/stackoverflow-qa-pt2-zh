# StackOverflow 问答 13257000-13257999

# objective-c - 如何在平移/拖动事件后检测保持 (UIGestureRegonizer / iOS)

> ID：13257003
> 
> 赞同：3
> 
> 时间：2012-11-06T18:23:41.353
> 
> 标签：objective-c, ios

只是想知道您是否有任何提示来识别**首先是拖动（平移）手势，然后如果用户继续握住手指，另一个“按住”事件？**

所以我想要的效果是常规平移事件会在移动完成时完成它的事情，如果用户握住手指，经过短暂的延迟，另一个事件会发生。**此事件应继续触发，直到手指被抬起。**希望这是有道理的。

我尝试结合`UIPanGestureRecognizer`，`UILongPressGestureRecognizer`但长按事件更多的是关于点击、按住然后滑动。我想要反过来。我也尝试了一个常规的点击事件，但是直到取景器从屏幕上移除后才会触发？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:39:38.130

您可能需要使用计时器或 dispatch_after 来模拟您的高级识别器。

```
-(void)panGesture:(UIPanGestureRecognizer *)gesture;
{

    if ([gesture state] == UIGestureRecognizerStateBegan || [gesture state] == UIGestureRecognizerStateChanged) {
        fireEvent = YES;
        //Alternatively, use display_after
        [self performSelector:@selector(fireAnotherEventIfNecessary) withObject:nil afterDelay:2];
    } else {
        fireEvent = NO;
    }
}

-(void)fireAnotherEventIfNecessary {

    if (fireEvent) {
        // Fire Event
    }
} 
```

# php - 无法从有效的 stdClass 对象中获取属性

> ID：13257006
> 
> 赞同：0
> 
> 时间：2012-11-06T18:23:48.510
> 
> 标签：php, json, stdclass

我在使用 PHP 时遇到了一个非常有趣的问题。以下代码从文本文件中获取一行，将该文本作为 json 解码为 stdClass 对象，然后根据其属性之一有条件地将其放入数组中。

```
$fileStream = @fopen($fileName, 'r+');
    $lastUpdate = $_POST['lastUpdate'];
    if($fileStream) {
        $eventArray = array();
        while (($buffer = fgets($fileStream, 8192)) !== false) {
                $decodedEvent = json_decode($buffer);
                echo var_dump($decodedEvent);
            if ($decodedEvent->timestamp > $lastUpdate) {
                array_push($eventArray, $decodedEvent);
            }
        }
        $jsonEvents = json_encode($eventArray);
        echo $jsonEvents;
    }
    else {
        $fileStream = @fopen($fileName, 'a');
    }
    @fclose($fileStream); 
```

这会产生错误：

```
Notice:Trying to get property of non-object in C:\****\gameManager.php on line 23 
```

我知道该对象以多种方式有效。例如， var_dump 正在生成：

```
object(stdClass)#1 (3) {
 ["name"]=>
 string(4) "move"
 ["args"]=>
 array(3) {
   [0]=>
   int(24)
   [1]=>
   int(300)
   [2]=>
   int(50)
 }
 ["timestamp"]=>
 float(1352223678463)
} 
```

如果我尝试使用 $decodedEvent 访问，则会`$decodedEvent["timestamp"]`收到一条错误消息，告诉我对象不能作为数组访问。

此外，它确实回显了正确的 json，它只能从正确的对象编码：

```
[{"name":"move","args":[24,300,50],"timestamp":1352223678463}] 
```

我在这里遗漏了什么，还是 PHP 行为不端？任何帮助是极大的赞赏。

**编辑**：这是来自文件的输入：

```
{"name":"move","args":[24,300,50],"timestamp":1352223678463} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:30:43.237

您的 JSON 格式*不正确*。这并不是说*无效*。但是给定这种格式，根元素是一个`stdClass`.

```
array(1) {
  [0] =>
  class stdClass#1 (3) {
     // ... 
```

如果这是一个真正的单个对象，我将在源头使用以下正确的 JSON 解决此问题：

```
{"name":"move","args":[24,300,50],"timestamp":1352223678463} 
```

如果这不可能，您需要在 PHP 中使用正确的数组表示法访问它：

```
echo $decodedEvent[0]->timestamp; 
```

### 更新

根据您的代码，您提供的更新后的 JSON 似乎有效且格式正确。我的猜测是文件中的一行不包含有效的 JSON（例如空行），因此`json_decode()`失败*，*导致 PHP 通知。

我鼓励您在循环中对此进行测试：

```
if ($decodedEvent && $decodedEvent->timestamp > $lastUpdate) 
```

还要记住这是一个*通知*。虽然我提倡干净的代码，但严格来说这不是一个*错误。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:29:52.833

您可以尝试使用此函数将 stdClass 对象转换为多维数组

```
 function objectToArray($d) {
        if (is_object($d)) {
            // Gets the properties of the given object
            // with get_object_vars function
            $d = get_object_vars($d);
        }

        if (is_array($d)) {
            /*
            * Return array converted to object
            * Using __FUNCTION__ (Magic constant)
            * for recursive call
            */
            return array_map(__FUNCTION__, $d);
        }
        else {
            // Return array
            return $d;
        }
    } 
```

[来源](http://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensional-array-to-stdclass-object/)

# javascript - 用 jQuery 查看输入是否有空格

> ID：13257007
> 
> 赞同：4
> 
> 时间：2012-11-06T18:23:50.913
> 
> 标签：javascript, jquery

我正在尝试编写一个读取输入值的函数，并确定在创建它时是否使用了空间。我不是要修剪任何东西——只是看看它是否需要修剪的能力。

我什至不确定从哪里开始，所以我没有任何代码可以查看。如果可以的话请帮忙！

我正在尝试这个解决方案，但它似乎不起作用（我认为我没有正确使用 .has() ）

```
if ($('#id').val().has(" ")) {
            alert('has spaces')
        } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-06T18:24:39.257

使用[val](http://api.jquery.com/val/)和[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)：

```
var hasSpace = $('#myInputId').val().indexOf(' ')>=0; 
```

如果您想测试其他类型的“空格”（例如表格），您可以使用正则表达式：

```
var hasSpace = /\s/g.test($('#myInputId').val()); 
```

[示范](http://jsfiddle.net/MzfLF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-07T06:56:03.767

使用 contains 作为包含空间：

```
var value = $('#myInputId').val();
if(value.contains(' ')){
   console.log("has space");
} 
```

或者你可以找到这些 ascII 代码   和 \xA0

```
if(value.contains('&nbsp;')){
   console.log("has space");
} 
```

# windows-8 - 从 Windows 8 Metro 应用程序中与单独的程序交互

> ID：13257008
> 
> 赞同：0
> 
> 时间：2012-11-06T18:23:51.833
> 
> 标签：windows-8

我想创建一个 Win8 Metro 应用程序。为了避免编写过多的代码，我想知道是否可以从 Metro 应用程序中与非 Metro 程序进行交互。

```
Metro app <----> External program 
```

^(ASCII图！！！)

我有这个程序的几个不同语言版本的源代码（我可以使用任何语言），我可以用任何 Metro 应用程序语言（C#、C++ 或 VB）创建我的应用程序（我猜我不会使用 JavaScript！ ！！））

那我可以这样交流吗？

# ffmpeg - 通过局域网使用 VLC +FFmpeg 流式传输网络摄像头 - 错误：无法预填充缓冲区

> ID：13257025
> 
> 赞同：4
> 
> 时间：2012-11-06T18:25:13.000
> 
> 标签：ffmpeg, streaming, webcam, vlc

我一直在尝试使用 VLC 和 FFmpeg 通过局域网流式传输我的网络摄像头

但我最终得到错误“主流错误：无法预填充缓冲区”

这是我尝试过的代码

```
ffmpeg -f x11grab -s 1680x1050 -r 30 -i :0.0+0,0 -vf "movie=/dev/video0:f=video4linux2, scale=180:-1, setpts=PTS-STARTPTS [movie]; [in] setpts=PTS-STARTPTS, [movie] overlay=main_w-overlay_w-10:main_h-overlay_h-10 [out]" -f alsa -ac 2 -i pulse -vcodec libx264 -preset ultrafast -s 1280x768 -acodec libfaac -threads 0 -f mpegts - | vlc -I dummy - --sout '#std{access=http,mux=ts,dst=thalha:3030}' 
```

这是输出

```
VLC media player 1.1.9 The Luggage (revision exported)
FFmpeg version 0.6.6-4:0.6.6-0ubuntu0.11.04.1, Copyright (c) 2000-2010 the Libav developers
  built on Jun 12 2012 16:28:21 with gcc 4.5.2
  configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --enable-shared --disable-static
  WARNING: library configuration mismatch
  libavutil   configuration: --extra-version=4:0.6.6-1ubuntu1+medibuntu1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libdirac --enable-libgsm --enable-libopenjpeg --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-version3 --enable-vaapi --enable-libopenjpeg --enable-libfaac --enable-nonfree --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libfaad --enable-libdirac --enable-libfaad --enable-libmp3lame --enable-librtmp --enable-libx264 --enable-libxvid --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavcodec  configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavformat configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavdevice configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavfilter configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libswscale  configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libpostproc configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavutil     50.15\. 1 / 50.15\. 1
  libavcodec    52.72\. 2 / 52.72\. 2
  libavformat   52.64\. 2 / 52.64\. 2
  libavdevice   52\. 2\. 0 / 52\. 2\. 0
  libavfilter    1.19\. 0 /  1.19\. 0
  libswscale     0.11\. 0 /  0.11\. 0
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
[x11grab @ 0x98e8420]device: :0.0+0,0 -> display: :0.0 x: 0 y: 0 width: 1680 height: 1050
[x11grab @ 0x98e8420]shared memory extension  found
X Error of failed request:  BadMatch (invalid parameter attributes)
  Major opcode of failed request:  140 (MIT-SHM)
  Minor opcode of failed request:  4 (X_ShmGetImage)
  Serial number of failed request:  11
  Current serial number in output stream:  11
Warning: call to srand(1352225865)
Warning: call to rand()
Blocked: call to unsetenv("DBUS_ACTIVATION_ADDRESS")
Blocked: call to unsetenv("DBUS_ACTIVATION_BUS_TYPE")
[0x9782aec] dummy interface: using the dummy interface module...
[0x987258c] main access out: creating httpd
[0x98d0764] main stream error: cannot pre fill buffer 
```

请帮助我实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:08:38.083

也许您可以尝试使用 v4l2 模块和转码模块。

```
vlc v4l2:// :v4l2-dev=/dev/video0 :v4l2-width=1680 :v4l2-height=1050 :v4l2-fps=30 :sout=#transcode{vcodec=h264,venc=x264{preset=ultrafast},vb=512,fps=15,width=1280,height=768}:std{access=http,mux=ts,dst=:3030} 
```

[VLC v4l2 模块](http://wiki.videolan.org/Documentation%3aModules/v4l2)

# classification - 如何在训练分类器时自动标记主题

> ID：13257030
> 
> 赞同：1
> 
> 时间：2012-11-06T18:25:31.037
> 
> 标签：classification

在训练分类器时需要一些关于如何自动标记主题的想法。我的数据集大约有 50000 个文本，并且需要为每个文本分配预定义的主题，有没有自动执行此操作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:29:57.157

如果您可以自动执行此操作，那么为什么需要您的分类器呢？

所以答案是：如果你真的想生成真实数据，没有自动的方法。

如果可能，您应该寻找预先准备好的、标记的数据集。否则，您将手动标记所有数据，对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:06:02.330

您需要一些分类器的训练数据，这是您的意思吗？

我最近实际上遇到了同样的问题，所以我最终做的是我得到了一个简单的类别和子类别列表，我对它们进行了迭代，并尝试自动为每个类别提取一篇维基百科文章。

对于类别分类法本身，请查看[http://rdf.dmoz.org/rdf/](http://rdf.dmoz.org/rdf/)，有一个 categories.txt 文件，您可以将其精简为所需的级别数。（我使用了两个级别，所以只有类别和直接子类别）

对于文章提取，您可以使用[Goose](https://github.com/jiminoc/goose/wiki)，它是一个非常易于使用的 Python 库，可以提取文档的 HTML 并从中剥离文章主体。

因为我遇到了完全相同的事情，所以我创建了一个小脚本来完成所有这些，在[这里查看](https://github.com/yebrahim/tagger_trainer)。

# javascript - jQuery UI 选项卡 - 选项卡和 onselect 的组合以转到 URL

> ID：13257033
> 
> 赞同：5
> 
> 时间：2012-11-06T18:25:39.273
> 
> 标签：javascript, jquery, jquery-ui

如何修改我的 javascript 和 HTML，以便第一个选项卡正常工作，第二个选项卡将我的窗口引导到一个全新的页面？

我发现了这个：[http](http://snipplr.com/view/9513/) ://snipplr.com/view/9513/ ，但不知道如何实现它。

我的脚本：

```
<script type="text/javascript">
$(document).ready(function(){

$('#tabs').tabs();      

    if($("#tabs") && document.location.hash){
        $.scrollTo("#tabs");
    }
    $("#tabs ul").localScroll({ 
        target:"#tabs",
        duration:0,
            hash:true
    });

    $('#tabs-min').tabs();

}); 
```

我的 HTML

```
<div id="tabs"><ul>
  <li><a href="#tab1">Tab 1</a></li>
  <li><a href="URL HERE" class="leave">Tab 2</a></li></ul>

  <div id="tab1">tab1 content</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:28:32.147

我有一个小提琴在[这里](http://jsfiddle.net/Twawv/18/)运行。它并不完全有效，我猜这是因为运行小提琴不会让你离开小提琴（因此`window.location`实际上不起作用），但你可以看到它是如何完成的。我已经在自己的环境中测试了这段代码，它确实有效。

您实质上为要离开的链接添加了一个类（在我的情况下，我添加了类`leave`）。然后，在 beforeActivate 上，您检查新选项卡的链接是否具有类`leave`，如果有，则前往它的链接位置。

让我知道这是否适合您。

```
<script>
$(function() {
    $( "#tabs" ).tabs({

            beforeActivate: function(event, ui) {

                if (ui.newTab.find("a").hasClass("leave")) {

                     alert("leaving...");
                     window.location = ui.newTab.find("a").attr("href");
                     return false;
                }            
        }
    });
});
</script>
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="http://www.google.com" class="leave">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        ...
    </div>
    <div id="tabs-2">
        ...
    </div>
    <div id="tabs-3">
       ....
    </div>
</div> 
```

# c# - C# 函数调用永远不会到达可执行代码的第一行，仅在特定的 pc 上

> ID：13257037
> 
> 赞同：1
> 
> 时间：2012-11-06T18:25:51.653
> 
> 标签：c#, sql-server

我有一段代码可以创建一个新的 SQL-Server Express 数据库，然后运行一个预定义的表生成/填充脚本。这是一项非常直接和简单的任务，并且代码在正常操作下运行良好。在我们的一台测试机器上，这个创建功能在创建数据库之后但在填充它之前停止。它只是挂起，没有错误消息，没有死锁（ui 仍然响应），也没有 CPU 使用率。

进一步调查和调试确定执行 LoadDatabaseTables() 函数调用之前的行，但从未到达 LoadDatabaseTables() 中的第一行。如何准确地调用一个函数，但程序甚至无法执行该函数的第一行？

有问题的代码是用 C# 编写的：

```
 ...snip...
    bool success=false;
    try
    {
        //...code that creates db, working as intended...
    }
    catch(Exception e)
    {
        //...error handling...
    }
    finally
    {
        //Params is a locally defined struct, containing int, bool, and string members
        if(CreateScript(Params))  //generates appropriate script successfully, returns true
        {
            System.Windows.MessageBox.Show("About to enter load script");
            if(LoadDatabaseTables(Params))
            {
               success=true;
            }
        }
    }
    return success;
}

private bool LoadDatabaseTables(DatabaseParams Params)
{
    System.Windows.MessageBox.Show("Entered the load script");
    bool success = false;
    Server server = null;
    try
    {
        //...sql calls...
        success = true;
    }
    catch (Exception ex)
    {
        //...exception handling...
    }
    return success;
}
...snip... 
```

The first message "About to enter load script" is reached but the "Entered the load script" is not displayed, and the rest of the function does not execute, no exceptions are raised, nothing is returned.

Unfortunately, this machine does not have the necessary tools/licenses to run full debugging, and the problem only occurs on this one machine. The message boxes obviously are not included in the regular version of the code, and a just being used to attempt to diagnose the problem. The code executes normally on other systems with and without these message boxes.

Has anyone come across this kind of error before? Any help would be most appreciated!

# java - DialogFragment OnCreateView 与 OnCreateDialog 的自定义布局

> ID：13257038
> 
> 赞同：90
> 
> 时间：2012-11-06T18:25:52.183
> 
> 标签：java, android, mono, xamarin.android, android-inflate

我正在尝试使用我自己的布局创建一个 DialogFragment。

我见过几种不同的方法。有时布局是在 OnCreateDialog 中设置的，如下所示：（我使用的是 Mono，但我已经有点习惯 Java）

```
public override Android.App.Dialog OnCreateDialog (Bundle savedInstanceState)
{
    base.OnCreateDialog(savedInstanceState);
    AlertDialog.Builder b = new AlertDialog.Builder(Activity);
        //blah blah blah
    LayoutInflater i = Activity.LayoutInflater;
    b.SetView(i.Inflate(Resource.Layout.frag_SelectCase, null));
    return b.Create();
} 
```

第一种方法对我有用......直到我想使用`findViewByID.` 所以经过一番谷歌搜索后，我尝试了第二种方法，它涉及覆盖`OnCreateView`

所以我注释掉了`OnCreateDialog`设置布局的两行，然后添加了这个：

```
public override Android.Views.View OnCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    View v = inflater.Inflate(Resource.Layout.frag_SelectCase, container, false);
        //should be able to use FindViewByID here...
    return v;
} 
```

这给了我一个可爱的错误：

```
11-05 22:00:05.381: E/AndroidRuntime(342): FATAL EXCEPTION: main
11-05 22:00:05.381: E/AndroidRuntime(342): android.util.AndroidRuntimeException: requestFeature() must be called before adding content 
```

我难住了。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-24T19:00:10.023

我对以下代码有同样的例外：

```
public class SelectWeekDayFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
        .setMessage("Are you sure?").setPositiveButton("Ok", null)
        .setNegativeButton("No way", null).create();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.week_day_dialog, container, false);

        return view;    
    }
} 
```

您必须选择**仅**覆盖DialogFragment 中的 onCreateView 或 onCreateDialog 之一。覆盖两者将导致异常：“在添加内容之前必须调用requestFeature()”。

# 重要的

如需完整答案，请查看@TravisChristian 评论。正如他所说，您确实可以覆盖两者，但是当您在创建对话框视图后尝试膨胀视图时，问题就来了。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-06T18:33:18.523

> 第一种方法对我有用……直到我想使用 FindViewByID。

我猜你的范围不是`findViewById()`由返回的视图`inflate()`，试试这个：

```
View view = i.inflate(Resource.Layout.frag_SelectCase, null);
// Now use view.findViewById() to do what you want
b.setView(view);

return b.create(); 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-10-10T18:04:12.743

下面的代码来自谷歌指南，所以答案是你不能像你在 onCreateDialog() 中那样做，你必须使用 super.onCreateDialog() 来获得一个对话框。

```
public class CustomDialogFragment extends DialogFragment {
    /** The system calls this to get the DialogFragment's layout, regardless
        of whether it's being displayed as a dialog or an embedded fragment. */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout to use as dialog or embedded fragment
        return inflater.inflate(R.layout.purchase_items, container, false);
    }

    /** The system calls this only when creating the layout in a dialog. */
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // The only reason you might override this method when using onCreateView() is
        // to modify any dialog characteristics. For example, the dialog includes a
        // title by default, but your custom layout might not need it. So here you can
        // remove the dialog title, but you must call the superclass to get the Dialog.
        Dialog dialog = super.onCreateDialog(savedInstanceState);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        return dialog;
    }
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-08-31T01:32:16.720

这是在对话框片段中使用 findViewById 的示例

```
public class NotesDialog extends DialogFragment {

        private ListView mNotes;
       private RelativeLayout addNote;

        public NotesDialog() {
            // Empty constructor required for DialogFragment
        }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {

            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

            View view = getActivity().getLayoutInflater().inflate(R.layout.note_dialog, null);
            mNotes = (ListView) view.findViewById(R.id.listViewNotes);
            addNote = (RelativeLayout) view.findViewById(R.id.notesAdd);

            addNote.setOnClickListener(new View.OnClickListener(){
                 @Override
                 public void onClick(View v){

                     getDialog().dismiss();

                     showNoteDialog();
                 }
             });

            builder.setView(view);

            builder.setTitle(bandString);

            builder.setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                          getDialog().dismiss();
                        }
                    }
                );

           return  builder.create();

    } 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-11-23T00:42:44.813

正如@Xavier Egea 所说，如果您同时实现了 onCreateView() 和 onCreateDialog() ，则可能会出现“必须在添加内容之前调用 requestFeature()”崩溃的风险。这是因为当您将该片段作为对话框显示（）时，会同时调用 onCreateDialog() 和 onCreateView()（为什么，我不知道）。正如 Travis Christian 提到的，在 onCreateDialog() 中创建对话框后 onCreateView() 中的 inflate() 是导致崩溃的原因。

实现这两个功能但避免这种崩溃的一种方法：使用 getShowsDialog() 来限制 onCreateView() 的执行（因此不会调用您的 inflate() ）。这样，当您将 DialogFragment 显示为对话框时，只会执行您的 onCreateDialog() 代码，但是当您的 DialogFragment 用作布局中的片段时，可以调用您的 onCreateView() 代码。

```
// Note: if already have onCreateDialog() and you only ever use this fragment as a 
// dialog, onCreateView() isn't necessary
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if (getShowsDialog() == true) {  // **The key check**
        return super.onCreateView(inflater, container, savedInstanceState);
    } else {
        View view = getActivity().getLayoutInflater().inflate(R.layout.fragment_alarm_dialog, null);    
        return configureDialogView(view);
    }
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState)
{ 
    // Return custom dialog...
    Dialog dialog = super.onCreateDialog(savedInstanceState); // "new Dialog()" will cause crash

    View view = getActivity().getLayoutInflater().inflate(R.layout.fragment_alarm_dialog, null);    
    configureDialogView(view);
    dialog.setContentView(view);

    return dialog;
}

// Code that can be reused in both onCreateDialog() and onCreateView()
private View configureDialogView(View v) {      
    TextView myText = (TextView)v.findViewById(R.id.myTextView);
    myText.setText("Some Text");

    // etc....

    return v;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-04-08T05:37:00.527

如果您想轻松访问对话框属性，例如标题和关闭按钮，但还想使用自己的布局，则可以在覆盖 onCreateDialog 时将 LayoutInflator 与 Builder 一起使用。

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater inflater = getActivity().getLayoutInflater();
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setMessage("Message!")
        .setTitle(this.dialogTitle)
        .setView(inflater.inflate(R.layout.numpad_dialog, null))
        .setPositiveButton(R.string.enter, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // Clicked 'Okay'
            }
        })
        .setNegativeButton(R.string.dismiss, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // Clicked 'Cancel'
            }
        });
    return builder.create();
} 
```

# php - 分享 FB 链接后，插入 mysql 不工作

> ID：13257039
> 
> 赞同：-1
> 
> 时间：2012-11-06T18:25:52.373
> 
> 标签：php, javascript, mysql, ajax, facebook

嘿，我有一个问题...

我想当用户从我的 facebook 应用程序共享一个链接时，我将他的 id 输入我的数据库。

我分享链接的方式是通过我修改过的 facebook 对话框 javascript 示例

**共享 javascript 代码**

```
<script>
      FB.init({appId: 'xxxx', channelUrl: 'xxxx', status: true, cookie: true});

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          link: 'https://developers.facebook.com/docs/reference/dialogs/',
          picture: 'http://fbrell.com/f8.jpg',
          name: 'Facebook Dialogs',
          caption: 'Reference Documentation',
          description: 'Using Dialogs to interact with users.'
        };

        function callback(response) {
            xmlhttp=new XMLHttpRequest();
            xmlhttp.onreadystatechange=function(){
                if (xmlhttp.readyState==4 && xmlhttp.status==200){
                    document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
                    document.getElementById('post').style.display = "none";
                }
            }
            xmlhttp.open("POST","shared.php",true);
            xmlhttp.send("id=xxx");
        }

        FB.ui(obj, callback);
      }

</script> 
```

PHP 代码

```
$con = mysqli_connect("xxxx","xxx","xxx","xxx");
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    };

        mysqli_query($con, "INSERT INTO xxx (fb-id) VALUES (".$_POST['id'].")");

    mysqli_close($con) 
```

当我共享链接时，我得到了 post_id，但数据库中什么都没有？

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:28:34.740

无效的字段名称：

```
INSERT INTO xxx (fb-id) ...
                 ^^^^^ 
```

这看起来像是减去了两个字段，而不是一个字段。您可能希望使用反引号对其进行转义，以强制将其视为单个字段名称：

```
INSERT INTO xxx (`fb-id`) ... 
```

在大图上，您有一个巨大的[SQL 注入漏洞](http://bobby-tables.com)。停止处理此代码并了解如何在有人破坏您的服务器之前避免此问题。

您还假设查询成功，这是一件坏事。您在 connect() 调用中得到了错误处理，但没有其他地方。永远不要假设查询已经成功。之后总是检查错误。

# image - 在matlab中使用pcolor

> ID：13257041
> 
> 赞同：1
> 
> 时间：2012-11-06T18:25:59.053
> 
> 标签：image, matlab, image-processing, matlab-figure

我正在尝试使用 matlab 的 pcolor 功能。然后我想将 matlab .fig 转换为 pdf。但是，每当我这样做时，图形质量就会变得很糟糕。有什么办法可以解决这个问题/我可以使用任何程序来阻止这种情况发生。换句话说，有没有办法让 matlab pcolor 看起来不错？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:32:28.103

将 Matlab 图形导出为 pdf 的最佳工具是来自 Matlab File Exchange 的[export_fig](http://www.mathworks.com/matlabcentral/fileexchange/23629)（查看[使用示例](https://sites.google.com/site/oliverwoodford/software/export_fig)）。

请注意，您需要在系统上安装 ghostscript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:38:43.073

如果您不想安装 export_fig，您可以使用 GUI 中的“导出为”对话框，并将图形设置为矢量化 PDF，并使用 zbuffer 作为渲染器。设置您想要的最小字体设置，如果您真的想要尽可能多地保留细节，请将 DPI 设置为 600。但是，如果您这样做，请在打印前小心预览，因为 PDF 会非常大。您还可以尝试更改色彩空间。也许这只是 Ubuntu 上的错误，但我从来没有让 Matlab 使用我为文本标签指定的字体或字体大小。

我建议改用 export_fig ，因为有更好的例子。

# matlab - matlab中的随机矩阵元素

> ID：13257043
> 
> 赞同：12
> 
> 时间：2012-11-06T18:26:19.317
> 
> 标签：matlab

我有一个 martix 并想改组它的元素。

```
x=[1 2 5 4 6 ] 
```

洗牌后（像这样）

```
x=[2 4 6 5 1] 
```

matlab 有它的功能吗？ **在 php array_shuffle 中**执行此操作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-06T18:29:31.900

1.  使用`randperm`

    ```
    idx = randperm(length(x)); 
    ```

2.  使用索引来获得洗牌向量

    `xperm = x(idx);`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T21:47:12.767

作为 的替代方法`randperm`，您还可以[`randsample`](http://www.mathworks.com/help/stats/randsample.html)从统计工具箱中使用。

> `y = randsample(n,k)`返回从整数到随机均匀采样的值的`k`逐个`1`向量`y`，无需替换。`1``n`

请注意，它是“无替换”（默认情况下）。因此，如果设置`k`为`length(x)`，则相当于对向量进行随机洗牌。例如：

```
x = 1:5;
randsample(x,length(x))
%ans = 
%       4     5     3     1     2 
```

I like this more than `randperm`, because it is easily extensible to different uses. For example, to draw 3 elements from `x` at random (like drawing from a bucket with finite items), you do `randsample(x,3)`. Likewise, if you wish to draw 3 numbers, where the alphabet is made up of the elements of `x`, but allow for repetitions, you do `randsample(x,3,true)`.

# c++ - Deck of Cards：我怎么做才能随机抽一张牌？

> ID：13257046
> 
> 赞同：0
> 
> 时间：2012-11-06T18:26:39.283
> 
> 标签：c++

我正在尝试模拟一副牌，但我不知道如何制作它，所以它随机选择一张牌，但只有一次。我不断得到双倍牌。

```
#include <iostream>
#include <cstdlib> //for rand and srand
#include <cstdio>
#include <string>

using namespace std;

string suit[] = { "Diamonds", "Hearts", "Spades", "Clubs" };
string facevalue[] = { "Two", "Three", "Four", "Five", "Six", "Seven", "Eight",
        "Nine", "Ten", "Jack", "Queen", "King", "Ace" };

string getcard() {
    string card;
    int cardvalue = rand() % 13;
    int cardsuit = rand() % 4;

    card += facevalue[cardvalue];
    card += " of ";
    card += suit[cardsuit];

    return card;
}

int main() {
    int numberofcards = 52;

    for (int i = 0; i < numberofcards; i++) {
        cout << "You drew a " << getcard() << endl;
    }

    system("pause");
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:37:27.100

它是一副纸牌。只需这样做：

1.  初始化卡组。将所有 52 张卡片布置在一个固定的 52 张卡片阵列中。
2.  洗牌。
3.  `nextCard`通过从零 (0) 开始将索引初始化到您的牌组来开始绘图循环。每次“抽牌”（在 处的牌`deck[nextCard]`）前进`nextCard`一。当`nextCard`== 52 时，你就没有牌了。

以下是如何设置甲板的示例。我把`nextCard`索引和绘图算法留给你。

```
#include <iostream>
#include <algorithm>
using namespace std;

// names of ranks.
static const char *ranks[] =
{
    "Ace", "Two", "Three", "Four", "Five", "Six", "Seven",
    "Eight", "Nine", "Ten", "Jack", "Queen", "King"
};

// name of suites
static const char *suits[] =
{
    "Spades", "Clubs", "Diamonds", "Hearts"
};

void print_card(int n)
{
    cout << ranks[n % 13] << " of " << suits[n / 13] << endl;
}

int main()
{
    srand((unsigned int)time(NULL));

    int deck[52];

    // Prime, shuffle, dump
    for (int i=0;i<52;deck[i++]=i);
    random_shuffle(deck, deck+52);
    for_each(deck, deck+52, print_card);

    return 0;
} 
```

甲板转储的示例如下：

```
Seven of Diamonds
Five of Hearts
Nine of Diamonds
Ten of Diamonds
Three of Diamonds
Seven of Clubs
King of Clubs
Five of Diamonds
Ace of Spades
Four of Spades
Two of Diamonds
Five of Clubs
Queen of Diamonds
Six of Spades
Three of Hearts
Ten of Spades
Two of Clubs
Ace of Hearts
Four of Hearts
Four of Diamonds
Ace of Diamonds
Six of Diamonds
Jack of Clubs
King of Spades
Jack of Diamonds
Four of Clubs
Eight of Diamonds
Queen of Hearts
King of Hearts
Ace of Clubs
Three of Spades
Two of Spades
Six of Clubs
Seven of Hearts
Nine of Clubs
Jack of Hearts
Nine of Hearts
Eight of Clubs
Ten of Clubs
Five of Spades
Three of Clubs
Queen of Clubs
Seven of Spades
Eight of Spades
Ten of Hearts
King of Diamonds
Jack of Spades
Six of Hearts
Queen of Spades
Nine of Spades
Two of Hearts
Eight of Hearts 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:30:23.707

您将需要模拟一副卡片，以便在选择卡片时将其从卡片列表中删除。

所以发生的情况是，您从一副完整的牌开始，然后当您从列表中随机选择一张牌时，您会将其从列表中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:30:24.043

您正在采样替换，这意味着一旦您选择了一张卡片，您就会将其留在牌组中。通过将其从数据结构中删除来将其从甲板上移除。您需要相应地调整随机采样，方法是根据数组/向量的长度/任何变化来更改`cardvalue`和范围。`cardsuit`

# python - Python - select() 不会捕获损坏的套接字

> ID：13257047
> 
> 赞同：3
> 
> 时间：2012-11-06T18:26:39.957
> 
> 标签：python, sockets, select

我正在用 Python 实现一个服务器。我一直在关注[Doug Hellmann 博客](http://www.doughellmann.com/PyMOTW/select/index.html)上的教程：

我有一个问题是`select()`没有抓住破损或封闭的管道。

```
 # Create socket 
    serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    # Non blocking socket
    serversocket.setblocking(0)
    # Bind socket
    serversocket.bind((HOST, PORT))
    # Socket listening
    serversocket.listen(5)

    # Sockets from which we expect to read
    inputs = [ serversocket ]
    # Sockets to which we expect to write
    outputs = [ ]

    resign = re.compile("resign")

    while inputs:
        print "Waiting for connection..."
        readable, writable, exceptional = select.select(inputs, outputs, inputs)

        for s in exceptional:
            print >>sys.stderr, 'handling exceptional condition for', s.getpeername()
            # Stop listening for input on the connection
            inputs.remove(s)
            s.close()

        for s in readable:
            # SERVER LISTENS TO CONNEXION
            if s is serversocket:

                if some_stuff_is_true:
                    connection, client_address = s.accept();
                    print 'New connection from ', client_address
                    connection.setblocking(0)
                    inputs.append(connection)

            # CLIENT READABLE
            else:
                data = s.recv(MAXLINE)
                #If socket has data to be read
                if data:
                    print data # Test if data correclty received
                    if resign.findall(data):
                        inputs.remove(s)
                        s.close() 
```

客户端正常关闭socket时，不被select捕获，客户端中断socket时，不被`exception捕获。

如何使该服务器对关闭/损坏的套接字具有鲁棒性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:30:33.550

当远程端干净地关闭套接字时，它将变得对您“可读”。当您调用 时`recv()`，您将获得*零*字节。您的代码`else:`在`if data:`. 这是您应该放置对关闭的套接字做出反应的代码的地方。

# asp.net - IIS 服务器上的 ASP.NET 错误

> ID：13257049
> 
> 赞同：1
> 
> 时间：2012-11-06T18:26:52.263
> 
> 标签：asp.net, iis

通过使用带有框架 4.5 的 VS Express for Web 2012 测试我的 asp.net 网站的本地主机，我的工作站上的一切都很好。我使用远程桌面连接将我的 ASP.NET 文件移动到 IIS Windows Server 2008 R2，然后我在 localhost 上对其进行测试，它工作正常。当我准备上传到 IIS 以使用 ASP.NET Framwork 版本 4.0 的应用程序池测试网站时，网站上出现配置错误，说 allowDefinition='MachineToApplication',

```
</controls>
</pages>
<authentication mode="Forms">
<forms loginUrl="~/Account/Login.aspx" timeout="2880" />
</authentication> 
```

它来自 Web.Config 文件。

我不知道为什么我得到错误是因为我从工作站移动文件还是因为我的 4.5 框架与 IIS 4.0 框架不匹配。如果 IIS 需要升级，那么如何或者可以从 web.config 轻松修改？我不想将我的 4.5 更改为 4.0，因为它会搞砸编码并使情况变得更糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:30:04.087

正如错误所说，您需要将虚拟目录转换为 Application.

如果您使用的是 IIS 7.0 及更高版本，请按照以下步骤操作：

1.  打开 IIS 管理器
2.  找到您的网站根目录（可能您的网站托管在默认网站中）
3.  打开上下文菜单并选择转换为应用程序。

让我知道它是否有帮助。

# flexslider - Flexslider - 使用控制容器和方向箭头导航？

> ID：13257051
> 
> 赞同：3
> 
> 时间：2012-11-06T18:26:59.390
> 
> 标签：flexslider

我正在使用 Flexslider，现在正在使用外部控制容器功能 - 所以我可以通过不同 DIV 容器中的链接控制滑块。但是，当我翻转幻灯片时，我仍然想要翻转方向箭头。我一直无法让两者一起工作。有任何想法吗？

```
    $(窗口).load(函数(){
      $('.flexslider').flexslider({
        动画：“幻灯片”，
        控制容器：“.homeMidTopSection”，
        控制导航：真，
        方向导航：真，
        manualControls: ".blockContent a",
        开始：功能（滑块）{
          $('body').removeClass('loading');
        }
      });
    });

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:57:11.747

我今天遇到了类似的问题，发现了这个馅饼（显然是 Flexslider 的作者）：[http ://pastie.org/2582577](http://pastie.org/2582577)

您需要将您的 controlsContainer: ".homeMidTopSection" 更改为幻灯片容器（在文档中通常是 .flexslider）

我不确定您是否也可以显示“点”类型的分页（如果您的自定义控件容器离幻灯片很远，这可能对可用性很有用，特别是如果它没有显示在使用 .flex-active 类进行幻灯片放映）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T08:04:53.263

今天我用了这个功能，经过长时间的搜索......

```
$('#first').flexslider({
    animation: "slide",
    slideshow:false,
    controlsContainer:".holder_arrow",
    start: function(slider){
        $('body').removeClass('loading');
    }
}); 
```

只需创建一个具有上述类名和一些 css 自定义的 div 就可以了。我希望它有帮助......

# php - 添加带有选择元素的编辑表单

> ID：13257056
> 
> 赞同：1
> 
> 时间：2012-11-06T18:27:07.007
> 
> 标签：php

我有一种用于添加和编辑的表单。我的目标是在添加表单上预先选择 count(items)+1 值。在编辑表单上，当它与 for 循环的增量匹配时，我需要它从数据库中预先选择值。现在 $selected 值不起作用，我不确定如何实现添加表单的部分。有什么想法吗？

```
<?php for($x = 1; $x <= count($items)+1; $x++)
{
    if (isset($item_data))
    {
        $selected = $item_data->item_sort_order === $x ? ' selected="selected"' : '';
    }
    echo '<option value="'.$x.'"';
    if (isset($selected)) { echo $selected; }
    echo '>'.$x.'</option>';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:34:57.260

`$selected`我认为您每次都需要重置变量。一旦它设置，那么它仍然是这样。试试这个：

```
for($x = 1; $x <= count($items) + 1; $x++) {
    echo '<option value="' . $x . '"';
   if ((isset($item_data) && $item_data->item_sort_order === $x)
       echo ' selected="selected";
   echo '>' . $x . '</option>';
} 
```

**编辑：**

```
for($x = 1; $x <= count($items) + 1; $x++) {
    echo '<option value="' . $x . '"';
   if ((isset($item_data) && (int)$item_data->item_sort_order == $x)
       echo ' selected="selected";
   echo '>' . $x . '</option>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:31:53.957

只是几个可能的问题：

1.  您永远不会重置变量`$selected`。这意味着从正确的项目开始，每个项目都将设置属性“已选择”。

2.  您使用我认可的严格`===`运算符，但如果`$item_data->item_sort_order`不包含 int 值，则此比较将不匹配。您可以使用`var_dump`来检查该属性的值*和*类型。

3.  如果您的排序顺序中有“漏洞”，`$x`则可能永远不会匹配排序顺序。

4.  `$item_data`永远不会在你的循环中设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:37:53.237

它有什么改变吗？

```
for($x = 1, $length = count($items) + 1; $x <= $length; $x++) {
    echo '<option value="' . $x . '"' .
        (isset($item_data) && ($item_data->item_sort_order === $x) ? ' selected="selected"' : '') .
        '>' . $x . '</option>';
} 
```

# mysql - 在 Wordpress 中批量删除/编辑摘录？

> ID：13257057
> 
> 赞同：1
> 
> 时间：2012-11-06T18:27:14.043
> 
> 标签：mysql, database, wordpress

我已经接管并利用 Wordpress 附带的所有好东西建立了一个新主题。我也在使用 Wordpress 中的内置摘录功能......但是，以前的用户没有使用自动摘录，而是手动输入自己的摘录。

我想知道是否有一种方法可以覆盖手动摘录或对摘录执行批量编辑？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T18:52:06.753

使用查询

```
UPDATE wp_posts SET post_excerpt='' 
```

在 phpmyadmin 中。如果未使用默认前缀 of ，`wp_`则更改查询中的表前缀。**首先备份你的数据库。**

或者：

如果您不想使用 phpmyadmin，请将 MySQL 查询作为`$wpdb`PHP 函数运行。

将其放在您的 functions.php 文件的底部（或顶部）并重新加载站点：

```
$wpdb->query( "UPDATE wp_posts SET post_excerpt='' " ); 
```

或者把它放在一个模板文件中，比如 index.php，然后重新加载页面：

```
<?php $wpdb->query( "UPDATE wp_posts SET post_excerpt='' " ); ?> 
```

***当然，在你运行它们之后，从文件中删除其中的任何一个 PHP 函数。***

***编辑：并且，在使用查询时选择帖子类型是个好主意，就像 Murilo Pontes 在他的回答中一样；否则，可能使用摘录进行数据存储的插件和其他功能将丢失其数据。***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-01T22:31:03.553

不要使用“UPDATE wp_posts SET post_excerpt=''”。如果未配置 post_type，这可能会破坏事情（如电子邮件模板） 请改用以下查询。

查看摘录 SELECT `post_excerpt`FROM `wp_posts`WHERE `post_type`='post'

将摘录更新为 '' UPDATE wp_posts SET post_excerpt='' WHERE `post_type`='post'

# list - Prolog-将英语翻译成C

> ID：13257058
> 
> 赞同：1
> 
> 时间：2012-11-06T18:27:15.630
> 
> 标签：list, prolog, nlp, dcg

我们有一个相对简单的任务，我在理论上理解，但我认为我只是不太理解 Prolog 的语法，不足以将其写入代码。基本上，我们有一个表示 C 中操作的英文符号列表。当它们被传递给我们的 Prolog 程序时，它们被存储为一个列表。例如：

```
add 4 to 3 
```

是

```
[add, 4, to, 3] 
```

我们需要编写一个函数来获取该列表并返回等效项。所以如果我打电话

```
english2C([add,4,to,3], C).
C = 4+3 
```

它将 C 绑定到结果。所以数据结构本身类似于 +(4(3))。我们有一个我们必须翻译的英语符号的列表，所以它是一个有限的数字。我们不必考虑所有可能性。还有组合，它们采用两个操作并将它们组合起来（中间有逗号）

```
english2C([add,3,to,5,',',then,subtract,7], C).
C = 3+5-7 
```

我只是有点困惑如何开始。我知道我可以获取列表的第一个元素，它始终是一个运算符（+、-、* 等），然后我可以递归地遍历列表以查找操作数。问题在于需要操作顺序的事物，例如“将 3 加到 5 然后乘以 4”，它应该表示为 (3+5)*4 但如果你直接翻译它，你会得到 3+5*4 .

哦，我们必须看看我们是否可以让它向后运行（给它一个 C 语句（3+5）并翻译回英文（添加 3 到 5））。那部分我真的一点想法都没有。

编辑：有足够大的可能的英文符号排列，我不能只是模式匹配所有内容。我知道我需要做的是将第一个运算符与其相应的算术符号匹配，然后找到操作数。对于组合语句，这将是第一部分（所以我会有 3+5），然后会有一个逗号，然后是下一个语句。顺便说一句，组合语句可以随心所欲，所以不仅仅是两个语句，我已经完成了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:55:24.180

如果有合理的少量模式，您可以这样做：

```
english2C([add,X,to,Y], R) :- R is X+Y.
english2C([add,A,to,B,',',then,subtract,C], R) :- R is A+B-C. 
```

**编辑**

上面的这些规则*计算*值。为了翻译，我们可以使用 DCG 进行匹配，它也可以“向后”工作。

```
english2C(In, R) :- phrase(toe(R), In, []).

toe(X+Y) --> [add,X,to,Y].
toe(X*Y) --> [multiply,X,by,Y].
toe(L-R) --> toe(L), [',',then,subtract,R]. 
```

测试：

```
?- english2C(X,3+6).
X = [add, 3, to, 6]. 
```

**编辑**对不起，我忘了剪辑。加上这个，我得到

```
?- english2C([add,3,to,5,',',then,subtract,4],X).
X = 3+5-4.

?- english2C(L,3+5-4).
L = [add, 3, to, 5, ',', then, subtract, 4]. 
```

没有，后面有循环；

```
?- english2C([add,3,to,5,',',then,subtract,4],X).
X = 3+5-4 ;
^CAction (h for help) ? goals
[698,875] toe(_G2096630, [add, 3, to, 5, ',', then, subtract, 4], _G2096652)
[698,874] toe('<garbage_collected>', '<garbage_collected>', _G2096652)
... 
```

这是一个单点变化：你更喜欢自己找到它吗？

# ruby-on-rails-3 - 用户名确实存在的未知属性用户名

> ID：13257059
> 
> 赞同：0
> 
> 时间：2012-11-06T18:27:19.800
> 
> 标签：ruby-on-rails-3, devise, cucumber

在我的 Rails 项目中，我尝试使用设计 gem 从电子邮件登录切换到用户名登录。到目前为止，我做了所有步骤，但是当我做黄瓜时，我看到了这个输出：

```
Given a user "Aslak" exists         
# features/step_definitions/login_steps.rb:16
  unknown attribute: username (ActiveRecord::UnknownAttributeError)
  ./features/step_definitions/login_steps.rb:17:in `/^a user "(.*?)" exists$/'
  features/login.feature:4:in `Given a user "Aslak" exists' 
```

给定用户“Aslak” 的存在如下所示：

```
Given /^a user "(.*?)" exists$/ do |user_name|
  @user = User.create!(:username => user_name, :password => "s3cr3t")
end 
```

但是当我做 rails c

```
u = User.first 
```

我看到这个输出：

```
=> #<User id: 1, email: "aslak@tamarawobben.nl", encrypted_password: "$2a$10$XjYgPtD4Ol4/sEpe934O6.yPcxs.jBF.m9SNTV.qhJp4...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 3, current_sign_in_at: "2012-11-05 20:27:44", last_sign_in_at: "2012-11-05 19:35:00", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", created_at: "2012-11-03 20:21:54", updated_at: "2012-11-06 07:58:36", username: "asLak"> 
```

所以在我看来，用户名是存在的。

有人知道如何解决这个问题吗？

罗洛夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:31:35.640

似乎您需要不区分大小写进行比较，而 ruby​​ 默认情况下比较区分大小写。这应该可以解决您的问题：

```
Given /^a user "(.*?)" exists$/ do |user_name|
    @user = User.create!(:username => user_name.downcase! , :password => "s3cr3t")
end 
```

您是否在运行测试之前运行迁移（如下）？

```
env RAILS_ENV=test rake db:migrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:32:37.583

您是否有任何机会编辑了现有迁移并忘记运行`rake db:test:clone`以将更改传播到测试数据库？

`rails c`在开发中运行，它使用另一个数据库。改为检查`User.first`after 运行的结果。`rails c test`

# c# - js和sharepoint上的小Q

> ID：13257061
> 
> 赞同：1
> 
> 时间：2012-11-06T18:27:33.650
> 
> 标签：c#, javascript, jquery, asp.net, sharepoint

关于js和sharepoint交互的一个简单问题

我在asp页面中创建了一个js来从sharepoint检索列表项，我是这样写的：

```
$(document).ready(function () { ExecuteOrDelayUntilScriptLoaded(find, "sp.js"); });
 window.onload = function () {
 find();
}
function loadConstants() {     
    var clientContext = new SP.ClientContext.get_current(); ;
    this.web = clientContext.get_web();     
    var lists = web.get_lists();
    var list = lists.getByTitle("Weekend's Notes");
    var camlQuery = new SP.CamlQuery();
    this.items = list.getItems(camlQuery);
    clientContext.load(items);     
    clientContext.executeQueryAsync(Function.createDelegate(this, this.onQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));

} 
```

下面是查找方法

```
function onQuerySucceeded(sender, args) {
        var listItemInfo = '';
        var listItemEnumerator = collListItem.getEnumerator();
        while (listItemEnumerator.moveNext()) {
            var oListItem = listItemEnumerator.get_current();
            //document.getElementById("ctl00_m_g_826af611_885a_4a36_8141_91157fa66535_ctl00_TextArea1").innerHTML = oListItem.get_item('Note');

        }
    } 
```

每次刷新浏览器时，它都会显示**Uncaught TypeError: Cannot read property 'get_current' of undefined** 有人能帮帮我吗？完全没有这方面的想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:26:53.360

似乎您在创建 ClientContext 之前运行了脚本。看看这是否有帮助：

[http://msdn.microsoft.com/en-us/library/jj245759(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/jj245759(v=office.15).aspx)

# asp.net - 将字节数组转换为视图上的图像

> ID：13257063
> 
> 赞同：0
> 
> 时间：2012-11-06T18:27:41.603
> 
> 标签：asp.net, asp.net-mvc

我有一个具有图像字节数组的模型。如何在 mvc.net 中将字节数组转换为图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:35:22.117

我认为您正在尝试混合两种资源：一种是 text/html 类型，另一种是 image/jpeg。它们是 2 种不同的资源，应单独请求。这意味着您不能在 html 中注入图像。

最好在单独的 Action 中将图像作为文件返回，而 Model 字段将为视图提供此 Action 的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:31:18.040

```
private void SaveImage(string path, byte[] img)
{
    FileInfo fi = new FileInfo(path);
    FileStream fs = fi.OpenWrite();
    fs.Write(img, 0, img.Length);
    fs.Flush();
    fs.Close();
} 
```

# linux - 在文本文件中将纪元转换为标准的 bash 脚本

> ID：13257066
> 
> 赞同：-1
> 
> 时间：2012-11-06T18:27:49.633
> 
> 标签：linux, bash, time, epoch

我使用几个使用纪元的文本文件，我想要一个 bash 脚本，它将扫描特定文件的纪元并将其作为标准时间输出另一个文本文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:47:13.093

在 Linux-BASH 中：

```
HUMAN_READABLE=$(echo $myTIMESTAMP | gawk '{print strftime("%c", $0)}')
echo $HUMAN_READABLE 
```

# ssis - 如何循环遍历存储为 For Loop 容器中的数字的日期值？

> ID：13257068
> 
> 赞同：3
> 
> 时间：2012-11-06T18:27:59.720
> 
> 标签：ssis

我有一个`For Loop Container`使用日期作为`InitExpression`（*@Load_Date*），但该值是数字格式（20120229），我需要它，因为我无法修改它。

现在，我想以`AssingExpression`这样一种方式设置值，即*@Load_Date*变量可以递增，因为它是一个日期。换句话说，分配给变量*@Load_Date的数值***20120229**应该递增到**20120301**，因为那是下一个逻辑日期。

 ***如何在 SSIS 包的 For 循环容器中实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T21:11:57.907

这是您可以执行此操作的一种可能方法。下面的示例使用`SSIS 2012`.

假设您有两个包含最小和最大日期范围的变量，但它们以数字格式存储，您仍然希望这些值遵守日期规则。

声明以下变量：

*   `MinInteger`- 此数据类型变量`Int32`将以数字格式存储**最小**日期值。如果您使用的是 SSIS 2012，建议将其创建为参数，以便您可以在运行时轻松配置值。

*   `MaxInteger`- 此数据类型变量`Int32`将以数字格式存储**最大**日期值。如果您使用的是 SSIS 2012，建议将其创建为参数，以便您可以在运行时轻松配置值。

*   `MinString`- 此数据类型变量`String`会将数字格式的*最小*日期值转换为字符串，以便在拆分值以创建日期格式时更容易使用。将表达式设置为`(DT_WSTR, 10) @[User::MinInteger]`

*   `MaxString`- 此数据类型变量`String`会将数字格式的*最大*日期值转换为字符串，以便在拆分值以创建日期格式时更容易使用。将表达式设置为`(DT_WSTR, 10) @[User::MaxInteger]`

*   `MinDate`- 这个数据类型的变量`DateTime`会拆分最小日期的字符串值来制定日期值。将此变量的表达式设置为以下内容：

> (DT_DATE)(SUBSTRING(@[User::MinString], 1, 4) + "-" + SUBSTRING(@[User::MinString], 5, 2) + "-" + SUBSTRING(@[User::MinString ], 7, 2))

*   `MaxDate`- 该数据类型的变量`DateTime`将最大日期的字符串值拆分为日期值。将此变量的表达式设置为以下内容：

> (DT_DATE)(SUBSTRING(@[User::MaxString], 1, 4) + "-" + SUBSTRING(@[User::MaxString], 5, 2) + "-" + SUBSTRING(@[User::MaxString ], 7, 2))

如果您使用的是 SSIS 2008 R2 或更早版本，则需要将上述最后四个变量的 EvaluateAsExpression 属性设置为**True**。

*   `Loop`- 这个数据类型的变量`DateTime`将用于循环遍历 For 循环容器中的日期值。

![变量](../Images/98586a5473b4dba73f255adb8031d80a.png)

配置 For 循环容器，如下所示：

*   初始化表达式：`@[User::Loop]=@[User::MinDate]`
*   评估表达式：`@[User::Loop]<=@[User::MaxDate]`
*   赋值表达式：`@[User::Loop]=DATEADD("dd", 1, @[User::Loop])`

该示例将值增加 1 天，但您可以根据需要进行配置。您还可以将*DATEPART*和*增量编号*存储在另一个变量/参数中，以便于配置。

![循环](../Images/03d421cb2a8eb8e483c0074bdfe1bc2c.png)

我在 For 循环中放置了一个脚本任务来说明示例包的执行。脚本任务将变量 User::Loop 设置为 ReadOnlyVariables 并包含以下 C# 代码。

```
public void Main()
{
    MessageBox.Show(string.Format("Current loop variable value: {0}", Dts.Variables["Loop"].Value.ToString()));
    Dts.TaskResult = (int)ScriptResults.Success;
} 
```

如果`MinInteger`设置为**20120229**并`MaxInteger`设置为**20120302**，则包在执行过程中将显示以下值。

希望有帮助。

![输出 1](../Images/b02a8e7f02be14831bcba47d211e229e.png)

![输出 2](../Images/ab6f17132fd222d99ae6b216225a8681.png)

![输出 3](../Images/d03cc27d32111b5143d0213c7bf7da92.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:49:40.277

将循环驱动程序存储为日期，以便它可以进行日期运算，然后使用由基于该日期的表达式驱动的变量将其放入内部使用所需的格式。***

# apache-flex - Adobe Flex/AIR 中移动应用程序的可分发扩展（模块）

> ID：13257069
> 
> 赞同：2
> 
> 时间：2012-11-06T18:28:07.450
> 
> 标签：apache-flex, mobile, module

我正在 flex 4.6 中创建一个移动应用程序，它将有一些默认的嵌入内容。我需要能够使用模块（附加内容库）扩展这个应用程序，假设每个模块最多 35MB，客户希望这些模块在应用商店中作为单独的位置（包）。如何在 Flex 中处理这样的项目？是否可以使用可单独购买的扩展创建移动 Flex 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:24:09.287

是的，有可能。将您的资产从您的应用程序目录复制到用户目录或应用程序存储目录（如果您想更新它们）。现在使用您可以编写模块或本机应用程序来更新/复制您的应用程序将使用的这些文件。

请记住，您的应用程序目录是只写且保护良好。至少对于 flex，您将无法编辑/删除文件。据我了解，您不能在应用程序存储目录上使用 IOS 执行此操作，Apple 不喜欢这样-

[http://blogs.adobe.com/airodynamics/tag/file-applicationstoragedirectory/](http://blogs.adobe.com/airodynamics/tag/file-applicationstoragedirectory/)

[http://blogs.adobe.com/simplicity/2010/01/api_tip_dont_abuse_fileapplica.html](http://blogs.adobe.com/simplicity/2010/01/api_tip_dont_abuse_fileapplica.html)

您应该能够检测到这些文件并自动执行您需要的任何操作。使用用户目录，您的敏感材料可能会被精通技术的人访问。

# xpages - 如何滚动浏览器窗口？

> ID：13257070
> 
> 赞同：1
> 
> 时间：2012-11-06T18:28:09.327
> 
> 标签：xpages

我正在使用扩展页面对话框验证我的表单。当用户需要更正输入时，我会弹出带有错误消息的对话框。

该对话框有一个确定按钮，用于关闭对话框并将焦点设置到需要更正的字段。

```
 var ef = dojo.byId(errorField);
 ef.focus(); 
```

这很好用，除了......

我有一组按钮和一堆浮动到表单顶部的其他组件。

它们位于具有以下 CSS 的面板内。

```
 .PNCToolBar2 {
position:fixed;
top:68px;
left:0px;
width:100%;
height:40px;
color:#fff;
background-color:#F2F2F2;
padding-top:6.0px;
padding-left:15.0px
 } 
```

发生的情况是，如果失败的字段在“按钮栏”下向上滚动，则浏览器会滚动一点以尝试使按钮成为焦点，但还不够。根据用户在表单上滚动浏览器的方式，所有或部分错误字段可能仍被按钮栏隐藏。

有没有办法先知道该字段是否位于栏下方的浏览器窗口顶部，然后如果要使该字段出现，请稍微滑动一下？如果有怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:44:27.003

尝试：

```
dojo.window.scrollIntoView(ef); 
```

如果由 ef 表示的 DOM 节点当前不在屏幕上，Dojo 将滚动到刚好足够的位置。

[有关此方法的更多信息](http://dojotoolkit.org/reference-guide/1.8/dojo/window/scrollIntoView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:22:50.523

使用 javascript，您可以使用 scrollTo() 方法 [http://www.w3schools.com/jsref/met_win_scrollto.asp](http://www.w3schools.com/jsref/met_win_scrollto.asp)

# php - 匹配电子邮件内联回复标题的正则表达式模式

> ID：13257076
> 
> 赞同：0
> 
> 时间：2012-11-06T18:28:42.650
> 
> 标签：php, regex, preg-match

我在找出识别电子邮件正文中内联回复/转发开头的模式时遇到了一些麻烦，有一些更简单的方法只是以“开始转发消息”之类的开头，但回复有点复杂：

```
On 12-06-13 10:56 AM, "John Doe" <john.doe@some.tld> wrote: 
```

显然，常量将是“On”和“wrote:”。我希望能够仅找到第一个匹配项，然后将其后的所有内容包装在一个 div 中，并使用 display:none 或什至只是使用 substr($body,0, POSITION_OF_MATCH) 消除它。

我遇到的一个问题是它没有捕捉到第一次发生，第二个是我无法让贪婪正常工作。

到目前为止，我的进展（已经回落到至少部分工作的版本）是：

```
preg_match("/On [^>]* wrote:/i",$content,$matches,PREG_OFFSET_CAPTURE); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:32:35.477

我想知道您当前的版本是如何工作的，因为您不可能匹配关闭的`>`. 但你可以这样做：

```
$content = preg_replace('/(On [^>]*> wrote:).*$/s', '$1', $content); 
```

它将匹配第一个`On ... wrote:`和之后的所有内容，直到字符串的末尾。并将其替换为`On ... wrote:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:33:28.003

您可能可以按元素对其进行分解；所以你基本上有：

```
On DATE, "NAME" <EMAIL> wrote: 
```

然后，您可以表征`DATE`、`NAME`和`EMAIL`。

*   `DATE`由数字、破折号、空格、冒号和字母组成。但是，它以逗号结尾，因此您可以改用它。
*   `NAME`由字母和空格组成，尽管它由引号分隔，您可能可以处理。
*   `EMAIL`有点复杂，但电子邮件不能包含字符`>`，因此您应该能够捕获除此之外的所有内容。

所以你基本上得到：

```
On [anything but comma], "[anything but "]" <[anything but >]> wrote: 
```

在正则表达式中，它类似于：

```
/^On ([^,]+), \"([^\"]+)\" <([^>]+)> wrote:$/ 
```

然后，在使用时`preg_match`，您可以从某个`$matches`数组（索引 1 到 3）中获取匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:32:07.010

我建议

```
$email = preg_match('/^On [^"]*"[^"]*" <([^>]*)> wrote:$/', $str, $re) ? $re[1] : ''; 
```

请参阅[此演示](http://ideone.com/9Icti9)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T14:41:31.837

我很欣赏其他答案，但他们都没有真正考虑到我正在处理的回复字符串中的许多可能变化，这可能是我没有正确解释或提供更多选项的错。不过，我已经为每个人的努力 +1 了。

经过一天的打开和关闭后，似乎效果最好的最终解决方案是：

```
/On (Mon|Tue|Wed|Thu|Fri|Sat|Sun|[[:digit:]]{1,2})(.*?) wrote:/i 
```

它开头的选项列表涵盖了一系列不同的回复类型，以“周二…”或“23 日…”或“1 日…”等开头，确保我抱怨的贪婪about 并没有从其他地方的随机 "on" 字符串中吸收太多， (.*?) 负责处理名称/电子邮件部分的其余部分，最后用 "wrote:" 完成它。

# ant - Apache Ant 教程的问题 - JUnit

> ID：13257081
> 
> 赞同：4
> 
> 时间：2012-11-06T18:28:53.087
> 
> 标签：ant, junit

我正在尝试遵循 apache 的 ANT 教程：

[http://ant.apache.org/manual/index.html](http://ant.apache.org/manual/index.html)

我目前在 JUnit 部分，但我不断收到与无法找到 junit.framework 包相关的错误。

我相信我已经完全按照以下教程进行操作 - 以下是详细信息：

-----我的文件结构-----

```
build.xml
/build
../classes
/lib
..log4j-1.2.8.jar
myManifest
/src
..HelloWorldTest.java
..log4j.properties
../oata
....HelloWorld.java 
```

------来源-----

我的清单：

```
Main-Class: oata.HelloWorld 
```

构建.xml：

```
<project name ="HelloWorld" basedir="." default="main">
    <property name="src.dir" value="src" />
    <property name="build.dir" value="build" />
    <property name="classes.dir" value="${build.dir}/classes" />
    <property name="jar.dir"    value="${build.dir}/jar" />
    <property name="lib.dir"    value="lib" />

    <path id="classpath">
        <fileset dir="${lib.dir}" includes="**/*.jar" />
    </path>

    <property name="main-class" value="oata.HelloWorld" />

    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

    <target name="compile">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="classpath" />
        <copy todir="${classes.dir}" >
            <fileset dir="${src.dir}" excludes="**/*.java" />
        </copy>
    </target>

    <target name="jar" depends="compile">
        <mkdir dir="${jar.dir}" />
        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="${main-class}" />
            </manifest>
        </jar>
    </target>

    <target name="run" depends="jar">
        <java fork="true" classname="${main-class}">
            <classpath>
                <path refid="classpath"/>
            <path id="application" location="${jar.dir}/${ant.project.name}.jar"/>
            </classpath>
        </java>
    </target>

    <target name="junit" depends="jar">
            <junit printsummary="yes">
                <classpath>
                    <path refid="classpath"/>
                    <path refid="application"/>
                </classpath>

                <batchtest fork="yes">
                    <fileset dir="${src.dir}" includes="*Test.java"/>
                </batchtest>
            </junit>
        </target>

    <target name="clean-build" depends="clean,jar" />

    <target name="main" depends="clean,run" />
</project> 
```

HelloWorldTest.java：

```
public class HelloWorldTest extends junit.framework.TestCase {

    public void testNothing() {
    }

    public void testWillAlwaysFail() {
        fail("An error message");
    }

} 
```

HelloWorld.java

```
package oata;

import org.apache.log4j.Logger;

public class HelloWorld {
    static Logger logger = Logger.getLogger(HelloWorld.class);

    public static void main(String [] args){
        logger.info("Hello World!");
    }
} 
```

log4j.properties：

```
log4j.rootLogger=DEBUG, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%m%n 
```

- -输出 - -

```
 ant -verbose junit
Apache Ant(TM) version 1.8.2 compiled on June 20 2012
Trying the default build file: build.xml
Buildfile: /Users/jtyler/Projects/AntHelloWorld/build.xml
Detected Java version: 1.6 in: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Detected OS: Mac OS X
parsing buildfile /Users/jtyler/Projects/AntHelloWorld/build.xml with URI = file:/Users/jtyler/Projects/AntHelloWorld/build.xml
Project base dir set to: /Users/jtyler/Projects/AntHelloWorld
parsing buildfile jar:file:/usr/share/ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/usr/share/ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
Build sequence for target(s) `junit' is [compile, jar, junit]
Complete build sequence is [compile, jar, junit, clean, run, main, clean-build, ]

compile:
    [mkdir] Skipping /Users/jtyler/Projects/AntHelloWorld/build/classes because it already exists.
    [javac] /Users/jtyler/Projects/AntHelloWorld/build.xml:20: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] HelloWorldTest.java added as HelloWorldTest.class doesn't exist.
    [javac] /Users/jtyler/Projects/AntHelloWorld/src/log4j.properties skipped - don't know how to handle it
    [javac] oata/HelloWorld.java added as oata/HelloWorld.class doesn't exist.
    [javac] Compiling 2 source files to /Users/jtyler/Projects/AntHelloWorld/build/classes
    [javac] Using modern compiler
    [javac] Compilation arguments:
    [javac] '-d'
    [javac] '/Users/jtyler/Projects/AntHelloWorld/build/classes'
    [javac] '-classpath'
    [javac] '/Users/jtyler/Projects/AntHelloWorld/build/classes:/Users/jtyler/Projects/AntHelloWorld/lib/log4j-1.2.8.jar:/usr/share/ant/lib/ant-launcher.jar:/usr/share/ant/lib/ant-antlr.jar:/usr/share/ant/lib/ant-jmf.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-junit4.jar:/usr/share/ant/lib/ant-swing.jar:/usr/share/ant/lib/ant-testutil.jar:/usr/share/ant/lib/ant.jar'
    [javac] '-sourcepath'
    [javac] '/Users/jtyler/Projects/AntHelloWorld/src'
    [javac] '-g:none'
    [javac] 
    [javac] The ' characters around the executable and arguments are
    [javac] not part of the command.
    [javac] Files to be compiled:
    [javac]     /Users/jtyler/Projects/AntHelloWorld/src/HelloWorldTest.java
    [javac]     /Users/jtyler/Projects/AntHelloWorld/src/oata/HelloWorld.java
    [javac] /Users/jtyler/Projects/AntHelloWorld/src/HelloWorldTest.java:1: package junit.framework does not exist
    [javac] public class HelloWorldTest extends junit.framework.TestCase {
    [javac]                                                    ^
    [javac] /Users/jtyler/Projects/AntHelloWorld/src/HelloWorldTest.java:7: cannot find symbol
    [javac] symbol  : method fail(java.lang.String)
    [javac] location: class HelloWorldTest
    [javac]         fail("An error message");
    [javac]         ^
    [javac] 2 errors

BUILD FAILED
/Users/jtyler/Projects/AntHelloWorld/build.xml:20: Compile failed; see the compiler error output for details.
    at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1150)
    at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:912)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 0 seconds 
```

是否有一些我遗漏的东西需要包含在教程中（或未提及）？

**编辑**：根据亚历克斯的询问，我测试了我的共享目录中是否有 ant 的 junit jars（我这样做了）：

```
$ ls /usr/share/ant/lib/ant-junit*.jar
/usr/share/ant/lib/ant-junit.jar    /usr/share/ant/lib/ant-junit4.jar 
```

我还尝试手动将 ant-junit、ant-junit4.jar 和 junit.jar 放入我的项目的 lib 目录中，运行**ant clean junit**后出现以下结果（所有错误） ：

*   junit.jar - /Users/jtyler/Projects/AntHelloWorld/build.xml:45：未找到参考应用程序。
*   ant-junit.jar: 包 junit.framework 不存在
*   ant-junit.jar 和 ant.junit4.jar：包 junit.framework 不存在
*   ant-junit4.jar：包junit.framework不存在

**编辑**lib 文件夹中仅包含 junit.jar 并调用**ant clean junit**时的整个错误是：

```
$ ant clean junit
Buildfile: /Users/jtyler/Projects/AntHelloWorld/build.xml

clean:
   [delete] Deleting directory /Users/jtyler/Projects/AntHelloWorld/build

compile:
    [mkdir] Created dir: /Users/jtyler/Projects/AntHelloWorld/build/classes
    [javac] /Users/jtyler/Projects/AntHelloWorld/build.xml:20: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 2 source files to /Users/jtyler/Projects/AntHelloWorld/build/classes
     [copy] Copying 1 file to /Users/jtyler/Projects/AntHelloWorld/build/classes

jar:
    [mkdir] Created dir: /Users/jtyler/Projects/AntHelloWorld/build/jar
      [jar] Building jar: /Users/jtyler/Projects/AntHelloWorld/build/jar/HelloWorld.jar

junit:

BUILD FAILED
/Users/jtyler/Projects/AntHelloWorld/build.xml:45: Reference application not found. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-19T21:11:05.530

该教程具有误导性。ant 中包含的 junit 文件不起作用。我下载了 juinit 并将 jar 文件复制到项目的 lib 文件夹中，现在可以正常工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:19:14.900

除了在我的 lib 目录中包含 junit.jar 文件之外，我还在 junit 任务声明上方的 build.xml 文件中添加了以下行：

```
<path id="application" location="${jar.dir}/${ant.project.name}.jar"/> 
```

这是“运行”任务定义中“应用程序”路径 ID 声明的副本。

应用程序构建成功，我使用**ant junit**得到以下输出（预计测试失败）：

```
ant junit
Buildfile: /Users/jtyler/Projects/AntHelloWorld/build.xml

compile:
    [javac] /Users/jtyler/Projects/AntHelloWorld/build.xml:20: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds

jar:

junit:
    [junit] Running HelloWorldTest
    [junit] Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 0.001 sec
    [junit] Test HelloWorldTest FAILED

BUILD SUCCESSFUL
Total time: 1 second 
```

评论以下问题将不胜感激：

1.  我实际上需要在我的 lib 文件夹中包含 junit.jar 文件这一事实是我应该关注的吗？*如果 ant 的教程明确指出“因为 Ant 有一个内置的 JUnit 3.8.2，您可以直接开始使用它”，*我认为这不是必需的。

**   我需要在运行任务定义之外定义“应用程序”路径ID的事实是apache ant教程中的错字吗？或者还有其他我错过或应该考虑的事情吗？* 

 *感谢所有帮助过的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:54:58.443

您必须在编译和任务的类路径中指定`junit.jar`自己。`<junit>`这不会自动包含在您的编译中：

```
<!--  Contains junit.jar and other needed test classes -->
<path id="junit.classpath">
    <fileset dir="${junit.directory}"/>
</path>

<!-- Contains third party jars your code is dependent upon -->
<path id="main.classpath">
    <fileset dir="${dependent.jar.dir}"/>
</path>

<!-- Your main Java source code directory -->
<property name="main.srcdir" value="${basedir}/src/main/java"/>

<!-- Your main Junit test directory source code -->
<property name="test.srcdir" value="${basedir}/src/test/java"/>

<!-- Where you're compiling your main classes to -->
<property name="main.destdir" value="${basedir}/target/classes"/>

<!-- Where you're compiling your test classes to -->
<property name="test.destdir" value="${basedir}/target/test-classes"/>
[...]

<!-- Compile Test Classes -->
<!-- Notice you have three classpath elements:
    * Your main classes you compiled before
    * Your test main classpath that your main classes
      were dependent up
    * The junit.jar classpath
-->

<javac destdir="${test.destdir}"
      srcdir="${test.srcdir}">
      <classpath>
          <!-- Your non-test classes you compiled before -->
          <pathelement path="${main.destdir}/> 
      </classpath>
      <classpath refid="junit.classpath"/>
      <classpath refid="main.classpath"/>
</javac>

<!-- Now run your unit tests: Note how you have the same
     three classpath elements as before -->

 <junit fork="yes">
     <classpath>
         <pathelement path="${main.destdir}"/>
         <pathelement path="${test.destdir}"/>
     </classpath>
      <classpath refid="main.classpath"/>
      <classpath refid="junit.classpath"/>
      [...]
  </junit> 
```*

# css - 在 Rails 中为布局和 CSS 目的对网页进行分类

> ID：13257084
> 
> 赞同：0
> 
> 时间：2012-11-06T18:29:16.813
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, layout, ruby-on-rails-3.2

我有很多不同的网页，但大多数都属于 6 或 7 个页面类别中的 1 个。对于这些类别的网页中的每一个，我的外观和感觉都略有不同，例如不同的背景颜色/图像。我有以下内容`views/layout/application.html.erb`：

```
<header class="sub<% if content_for?(:page_type) %> <%= yield(:page_type) %><% end %>"> 
```

在每一个视图中，我都有：

```
<% content_for :page_type, 'information' %> 
```

但是对每个网页都这样做真的很痛苦，当我想改变周围的东西时，我总是不得不搞乱这些（我有很多页面）。所以，相反，我想只使用一个变量：

```
<header class="sub<%= @page_type ? ' ' + @page_type : '' %>"> 
```

和意见：

```
<% @page_type = 'information' %> 
```

优点是我可以`before_filter :set_page_type`在控制器中做一个并为它控制的所有视图设置一次页面类型（一个很大的帮助）。

也许对我来说最好的办法就是使用 URL 的第一个文件夹作为网页的类别。我将不得不重组 URL，但无论如何这样做可能是有意义的。我确实有一些必须保留的顶级页面。

这必须是一个相当普遍的情况，对大多数页面进行分类并在布局中使用该分类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:14:19.470

我通常为 body 类使用一个助手——像这样：

```
def body_class(c = nil)
  @body_class ||= [controller.controller_name]
  @body_class << c
  @body_class.flatten.compact.uniq.join(" ")
end 
```

默认情况下，这将包括控制器名称（您还可以包括操作等。然后我根据需要在视图中调用此助手，例如

```
<% body_class "bar" %> 
```

由于助手总是返回一个类字符串，然后您可以在布局中调用相同的助手（我使用`body`标签），可能不带参数：

```
<body class="<%= body_class %>"> 
```

这将在前面的示例中呈现一个名为`FoosController`以下内​​容的控制器：

```
<body class="foos bar"> 
```

如果您在例如应用程序控制器中定义帮助器并使其可用于使用视图的视图`helper_method`，那么这应该可以满足您的需求。

# oracle - 针对整个架构的 Oracle 细粒度审计

> ID：13257086
> 
> 赞同：1
> 
> 时间：2012-11-06T18:29:24.050
> 
> 标签：oracle, audit-trail

我需要记录在我拥有的 Oracle 数据库中运行的所有 sql 查询（非生产，运行 Oracle 11g 企业版）。我想这样做是使用 Oracle 的细粒度审计，因为它记录了确切的查询并在数据库中执行此操作，这对我来说更有用。但是，从文档 (http://docs.oracle.com/cd/B19306_01/network.102/b14266/cfgaudit.htm#i1011783) 看来，您需要指定一个表名，没有默认值。

是否可以使用 Oracle 细粒度审计来审计架构上的所有查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:13:45.320

禁用审核：

```
begin
    for c1 in (select * from dba_audit_policies) loop
        dbms_fga.drop_policy (
            object_schema => c1.object_schema,
            object_name   => c1.object_name,
            policy_name   => c1.policy_name);
    end loop;
end;
/ 
```

为整个架构启用审计：

```
begin
    for c1 in (select * from all_tables where owner = '&schema') loop
        dbms_fga.add_policy (
            object_schema   => c1.owner,
            object_name     => c1.table_name,
            statement_types => 'SELECT,UPDATE,DELETE,INSERT',
            policy_name     => c1.table_name
        );
    end loop;
end;
/ 
```

# networking - freebsd pf.conf 适用于本地

> ID：13257087
> 
> 赞同：0
> 
> 时间：2012-11-06T18:29:28.107
> 
> 标签：networking, firewall, freebsd, packet-sniffers, openbsd

我正在使用 freebsd 9，我的 pf.conf 在下面

```
#cat /etc/pf.conf
int_if = "em1"
emi = "127.0.0.1"

rdr on $int_if proto tcp from any to any port 12345 -> $emi port 1010

# pfctl -vvvvnf /etc/pf.conf
int_if = "em1"
emi = "127.0.0.1"
@0 rdr on em1 inet proto tcp from any to any port = 12345 -> 127.0.0.1 port 1010 
# 
```

当我在其他 ip -> 到本地测试时，此规则工作正常

但我想在本地 -> 本地时应用此规则

这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:07:17.313

为 lo0 接口添加相同的规则

# java - 解码位图流失败

> ID：13257088
> 
> 赞同：4
> 
> 时间：2012-11-06T18:29:30.760
> 
> 标签：java, android

我正在尝试完成*“Sam's Teach Yourself Android Application Development in 24 Hours”*并在第 12 小时内陷入困境。问题似乎出在这一部分：

```
private Drawable getQuestionImageDrawable(int questionNumber) {
    Drawable image;
    URL imageUrl;

    try {
        // Create a Drawable by decoding a stream from a remote URL
        imageUrl = new URL(getQuestionImageUrl(questionNumber));
        InputStream stream = imageUrl.openStream();
        Bitmap bitmap = BitmapFactory.decodeStream(stream);
        image = new BitmapDrawable(getResources(), bitmap);
    } catch (Exception e) {
        Log.e(TAG, "Decoding Bitmap stream failed");
        image = getResources().getDrawable(R.drawable.noquestion);
    }
    return image;
} 
```

和已经过测试`questionNumber`，`getQuestionImageUrl()`正在返回我认为正确的值（1 和`http://www.perlgurl.org/Android/BeenThereDoneThat/Questions/q1.png`）。该网址上有一张图片，但我总是遇到异常。我尝试了几种变体，但是当它们都不起作用时，我又回到了书中的这段代码。我在这里做错了什么？

我是 java 和 android 的新手，所以我可能缺少一些简单的东西。我在书中的代码和网站上的更新代码方面遇到了许多其他问题（所有这些问题都已在此处或通过 解决`developer.android.com`）。这是我的第一个问题，所以如果我未能提供任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:17:01.547

我会做以下事情，它可能会起作用：

```
private Drawable getQuestionImageDrawable(int questionNumber) {
Drawable image;
URL imageUrl;

try {
    // Create a Drawable by decoding a stream from a remote URL
    imageUrl = new URL(getQuestionImageUrl(questionNumber));
    HttpURLConnection conn = (HttpURLConnection) imageUrl.openConnection();
    conn.setDoInput(true);
    conn.connect();
    InputStream stream = conn.getInputStream();
    Bitmap bitmap = BitmapFactory.decodeStream(stream);
    image = new BitmapDrawable(getResources(), bitmap);
} catch (Exception e) {
    Log.e(TAG, "Decoding Bitmap stream failed");
    image = getResources().getDrawable(R.drawable.noquestion);
}
return image;
} 
```

确保您在后台线程而不是主线程中执行此类繁重的操作，并且对您的应用程序清单具有 INERNET 权限。让我知道你的进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:51:29.650

可能例外是因为您正在从应用程序 ui 线程建立网络连接。这适用于较旧的 Android 版本，但不适用于较新的 Android 版本。看看[Android网络操作部分](http://developer.android.com/training/basics/network-ops/index.html)。

要做的主要事情是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# perl - 删除哈希中键的重复值

> ID：13257095
> 
> 赞同：2
> 
> 时间：2012-11-06T18:29:53.007
> 
> 标签：perl, hash

我有以下代码

```
chdir("c:/perl/normalized");
$docid=0;
my %hash = ();
@files = <*>;
foreach $file (@files) 
  {
    $docid++;
    open (input, $file);    
    while (<input>) 
      {
    open (output,'>>c:/perl/tokens/total');
    chomp;
    (@words) = split(" ");  
    foreach $word (@words)
    {
    push @{ $hash{$word} }, $docid;

    }
      }
   }
foreach $key (sort keys %hash) {
    print output"$key : @{ $hash{$key} }\n";
}

close (input);
close (output); 
```

这是文件中的示例输出

```
of : 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 4 4 4 4 5 6 6 7 7 7 7 7 7 7 7 7 
```

这是真的，因为例如“of”一词在第一个文档中存在 10（十个）次，但是有没有办法删除重复的值；即而不是十个我只想要一个谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:07:05.707

为避免一开始就添加副本，请更改

```
foreach $word (@words) 
```

至

```
foreach $word (uniq @words) 
```

* * *

如果您想将 dups 留在数据结构中，请改为更改

```
print output"$key : @{ $hash{$key} }\n"; 
```

至

```
print output "$key : ", join(" ", uniq @{ $hash{$key} }), "\n"; 
```

* * *

`uniq`由 List::MoreUtils 提供。

```
use List::MoreUtils qw( uniq ); 
```

或者你可以使用

```
sub uniq { my %seen; grep !$seen{$_}++, @_ } 
```

# c# - EF 模板化代码生成有什么用途？

> ID：13257097
> 
> 赞同：0
> 
> 时间：2012-11-06T18:29:56.470
> 
> 标签：c#, asp.net, entity-framework, code-generation

我已经看过几个使用带有模板代码生成的实体框架的[示例](http://geekswithblogs.net/iupdateable/archive/2009/11/19/getting-started-with-entity-framework-4---templated-code-generation.aspx)/教程。

这个工具在做什么？是否正在创建一个新的 DataContext 和一组新的 EntityObject？还是正在更换旧的？为什么您将使用代码生成而不是直接使用设计师创建的代码生成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:11:54.570

使用显式模板，您可以修改模板以自定义您的实体。

一种常见的定制是使所有实体都继承自一个公共基类。

# android - 2 个活动之间的不同地图视图大小

> ID：13257101
> 
> 赞同：3
> 
> 时间：2012-11-06T18:30:11.583
> 
> 标签：android, android-mapview

我有 2 个活动，其中包含`MapView`. 在活动 A 中，地图视图的大小与活动 B 中的大小不同。调用层次结构是`Activity`A -> `Activity`B。当我从`Activity`B 返回到 A 时，地图的一半是黑色的（只有 Google 标志保留在左角）。移动地图没有效果（地图底部仍然是黑色）只有放大/缩小才能使地图看起来正确。

在 android manifest 中我使用不同的 ID，我`invalidate()`在方法中尝试了 mapview `onResume()`，我也尝试调用`findViewById(android.R.id.content).requestLayout()`整个布局`onResume()`，但没有任何效果。唯一的解决方案是`finish()`活动`onPause()`并在活动 B 的键回上再次创建它。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:47:32.503

问题是 Google Maps API 不会让您同时拥有多个`MapView`活动实例。当您从A打开`Activity`B 时， A 仍然留在堆栈中并且它仍在工作。因此，当您在B 中实例化另一个时，旧的开始表现异常。有几种解决方法，但没有一种可以被认为是稳定的，因此您应该使用销毁和重新创建A 的解决方案，或者重新设计您的应用程序，以便仅使用其中一种。希望这可以帮助。`Activity``Activity``MapView``MapView``Activity``Activity``Activities``MapView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:02:37.523

您将在 LogCat 中看到活动正在重用未延迟的地图：

```
MapActivity: Recycling map object 
```

要恢复地图中的旧设置，请在两个活动上使用 onResume 方法：

```
@Override
protected void onResume() {
    super.onResume();

    MapController mapController = mMapView.getController();

    mapController.setCenter(mCenterPoint);
    mapController.setZoom(mZoomLevel);
    mapController.animateTo(mCenterPoint);
} 
```

因为 onCreate 只会被调用一次，并且后退按钮或新 Intent 将（希望）重用堆栈上的实际 Intent。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:56:26.377

最可能的原因是您实例化了 map`onCreate`方法，所以第一次地图显示正常，但是当您回来时，`onCreate`没有调用该方法并且您的地图没有启动。将地图初始化移动到`onStart`方法中。

也许[活动生命周期文档](http://developer.android.com/guide/components/activities.html#ImplementingLifecycleCallbacks)可以提供帮助

PS：如果您发布代码将很容易帮助您。

# c++ - 尽管有 SFINAE，这个程序是否格式不正确？

> ID：13257103
> 
> 赞同：2
> 
> 时间：2012-11-06T18:30:22.223
> 
> 标签：c++, language-lawyer, sfinae

```
template <typename T> void f() {
    return 0;  // returning value from function returning `void`
}

int main()
{
    // Not instantiating or calling any f<T>()
} 
```

在[对此答案](https://stackoverflow.com/a/13255869/560648)的评论中，[David](https://stackoverflow.com/users/36565/david-rodriguez-dribeas)断言包含语义错误且未实例化的函数模板会导致程序格式错误：

> 是否使用模板无关紧要，即使没有实例化，程序也是*格式*错误的，但编译器不需要对其进行诊断。

相反，我很确定 SFINAE 以及防止类型推断和因此函数模板 per 的实例化`[C++11: 14.8.2/8]`，允许程序保持格式良好。但是，我在此标准段落中找不到任何明确说明的文本。

**谁是正确的？**

* * *

维基百科，我不认为它对这个问题具有权威性，它谈到了一个稍微不同的情况：

> [..] 引入 SFINAE 是**为了避免**在不相关的模板声明可见时创建格式错误的程序 [..]

^(（强调我的）)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T18:39:58.920

根据 14.6/8，该程序格式不正确：

> 如果无法为模板定义生成有效的特化，并且该模板未实例化，则模板定义格式错误，无需诊断。

也就是说，无论您是否实例化模板，模板定义都是错误的，因为没有可能的实例化会成功。

请注意，这与 SFINAE 完全无关：替换失败不是错误是*替换*过程的一部分，并且从不考虑模板的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:34:19.343

仔细阅读，该标准段落说：

> 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。[..]

`return 0`不是表达式，因此 SFINAE 不适用。

段落继续：

> 只有在函数类型及其模板参数类型的直接上下文中的无效类型和表达式会导致推导失败。

`return 0`与函数类型或其模板参数类型无关，因此 SFINAE 仍然不适用。

# java - 试图重新查询一个已经关闭的游标 - 如何找到这个已经关闭的游标？

> ID：13257106
> 
> 赞同：2
> 
> 时间：2012-11-06T18:30:24.813
> 
> 标签：java, android, cursor

在我触摸手机上的“*后退*按钮”（返回上一页）后，我的应用程序抛出此错误：

```
11-06 19:16:56.016: E/AndroidRuntime(24018): java.lang.RuntimeException: Unable to resume activity {app.piotrek.learning/app.piotrek.learning.AddNewQuestion}: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@40f84ab8
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2567)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2595)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1183)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.os.Looper.loop(Looper.java:137)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.app.ActivityThread.main(ActivityThread.java:4575)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at java.lang.reflect.Method.invokeNative(Native Method)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at java.lang.reflect.Method.invoke(Method.java:511)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at dalvik.system.NativeStart.main(Native Method)
11-06 19:16:56.016: E/AndroidRuntime(24018): Caused by: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@40f84ab8
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.app.Activity.performRestart(Activity.java:4508)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.app.Activity.performResume(Activity.java:4531)
11-06 19:16:56.016: E/AndroidRuntime(24018):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2557)
11-06 19:16:56.016: E/AndroidRuntime(24018):    ... 10 more 
```

我不知道如何解决它。几乎所有的游标都在 onCreate 函数中的“setOnClickListener”等函数中。我找不到错误在哪里。

编辑：这是我的代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.Matrix;
import android.graphics.Point;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;
import android.view.Display;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.SimpleCursorAdapter;
import android.widget.Spinner;

public class AddNewQuestion extends Activity {
    Context context;
    Database db;

    Button wczytajobrazek;
    Button addquestion;
    ImageView obrazekdoedycji;
    Bitmap wczytanyobrazek;
    Spinner spinnerSubject;
    Spinner spinnerTitles;
    EditText quest;
    EditText answ;
    Button addprzedmiot;
    Button addtitles;

    Display display;
    Point size;
    int screenWidth;
    int screenHeight;
    int IdOfSubjectfromSpinner;
    int IdOfTitlesfromSpinner;
    Bitmap bmp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dodajpytania);
        context = getApplicationContext();

        display = getWindowManager().getDefaultDisplay();
        size = new Point();
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();

        quest = (EditText) findViewById(R.id.editText1);
        answ = (EditText) findViewById(R.id.editText2);
        wczytajobrazek = (Button) findViewById(R.id.button1);
        spinnerSubject = (Spinner) findViewById(R.id.spinner1);
        spinnerTitles = (Spinner) findViewById(R.id.spinner2);
        obrazekdoedycji = (ImageView) findViewById(R.id.imageButton1);
        addquestion = (Button) findViewById(R.id.add_question);
        addprzedmiot = (Button) findViewById(R.id.addprzedmiot);
        addtitles = (Button) findViewById(R.id.addTitles);

        db = new Database(getApplicationContext());
        db.open();

        fillSpinner(db.getAllEntriesSubjects(), spinnerSubject, DatabaseData.KEY_NAME);
        long data = spinnerSubject.getSelectedItemId();
        Log.v("ADDNEWQUESTION", "Wybrano: " + data);
        //fillSpinner(db.getAllEntriesTitles(), spinnerTitles);
        db.close();

        wczytajobrazek.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(intent, 0);
            }
        });

        addprzedmiot.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(context, AddNewSubjectOrTitle.class);
                startActivity(intent);
            }
        });
        addtitles.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(context, AddNewSubjectOrTitle.class);
                startActivity(intent);
            }
        });

        addquestion.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                String question = quest.getText().toString();
                String answer = answ.getText().toString();
                String img = "abc";
                String desc = "desc";
                Log.v("AddNewQuestion", "Question: " + question + " Answer: " + answer + " Save in (ID): Subject: " + IdOfSubjectfromSpinner + " Titles: " + IdOfTitlesfromSpinner);
                db.open();
                db.insertD(new Questions(question, answer, img, desc, IdOfTitlesfromSpinner).returnData(), DatabaseData.DB_THIRD_TABLE);
                db.close();
                quest.setText("");
                answ.setText("");
            }
        });

        spinnerSubject.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                db.open();
                //String item = parent.getItemAtPosition(pos).toString();
                Cursor c = (Cursor)parent.getItemAtPosition(pos);
                startManagingCursor(c);
                String item = c.getString( c.getColumnIndex( DatabaseData.KEY_NAME ) );
                IdOfSubjectfromSpinner = c.getInt( c.getColumnIndex( DatabaseData.KEY_ID ) );
                Log.v("AddQuestion", "Wybrano: " + item + "("+ c.getInt(c.getColumnIndex(DatabaseData.KEY_ID)) +")");

                fillSpinner(db.getSomeEntriesTitles(c.getInt(c.getColumnIndex(DatabaseData.KEY_ID))), spinnerTitles, DatabaseData.KEY_TITLES_NAME);
                db.close();

            }
            public void onNothingSelected(AdapterView<?> parent) {
            }
        });

        spinnerTitles.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                Cursor c = (Cursor)parent.getItemAtPosition(pos);
                startManagingCursor(c);

                //String item = c.getString( c.getColumnIndex( DatabaseData.KEY_NAME ) );   
                IdOfTitlesfromSpinner = c.getInt( c.getColumnIndex( DatabaseData.KEY_TITLES_ID ) );
            }
            public void onNothingSelected(AdapterView<?> parent) {
            }
        });

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        if (resultCode == RESULT_OK) {
            Uri targetUri = data.getData();
            File newfile = new File(targetUri.toString());
            try {
                wczytanyobrazek = MediaStore.Images.Media.getBitmap(this.getContentResolver(), targetUri);
                wczytanyobrazek = scaleImages(wczytanyobrazek, screenWidth/4, screenWidth/4);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            obrazekdoedycji.setImageBitmap(wczytanyobrazek);
        }
    }

    @Override
    protected void onStart(){
        super.onStart();
    }

    public void fillSpinner(Cursor cs, Spinner spinner, String dane){
        startManagingCursor(cs);

        SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cs, new String[] {dane}, new int[] {android.R.id.text1});
        mAdapter.setDropDownViewResource(android.R.layout.simple_spinner_item);
        spinner.setAdapter(mAdapter);
    }

    public Bitmap scaleImages(Bitmap qBitmap, float nbwdth, float nbhght){
        float skalujSzer = ((float) nbwdth) / qBitmap.getWidth();
        float skalujWys = ((float) nbhght) / qBitmap.getHeight();
        Matrix matrixMAP1 = new Matrix();
        matrixMAP1.postScale(skalujSzer, skalujWys);

        qBitmap = Bitmap.createBitmap(qBitmap, 0, 0, qBitmap.getWidth(), qBitmap.getHeight(), matrixMAP1, true);

        return qBitmap;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T05:51:06.097

放这个它可能对你有用：

```
 @Override
    protected void onRestart() {
        // TODO Auto-generated method stub
        super.onRestart();

        cursorObject.requery();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:43:14.097

最可能的原因是您对`onCreate`方法进行了查询，因此第一次查询正常并显示数据，但是当您返回时，`onCreate`没有调用该方法并且您的光标已关闭。将查询移至`onStart`方法。

也许[活动生命周期文档](http://developer.android.com/guide/components/activities.html#ImplementingLifecycleCallbacks)可以提供帮助

PS：如果您发布代码将很容易帮助您。

# c# - 获取单出参数

> ID：13257109
> 
> 赞同：1
> 
> 时间：2012-11-06T18:30:35.720
> 
> 标签：c#

我有这个 C# 函数：

```
Fct( double [] x, out double a, out double b, out double c) 
{
    // ***
} 
```

我按以下步骤获取 的值`a`：

```
double a , b, c;
Fct( myArray, out a, out b, out c) 
```

如何`a`无需定义`b`and就可以访问`c`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:35:27.250

我相信你可以超载“Fct”。添加这个：

```
Fct( double [] x, out double a) 
{
    double b,c;
    Fct(x, out a, out b, out c);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:59:34.330

不幸的是，在 C# 中没有直接的技术来解决这个问题。我相信您需要重载该功能。

此外，根据 C# 规范（[C# 4.0 规范](http://download.microsoft.com/download/7/E/6/7E6A548C-9C20-4C80-B3B8-860FAF20887A/CSharp%204.0%20Specification.doc)，第 21.1 节）-“ref 或 out 参数不能有默认参数。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:36:39.867

如果您只是想避免混乱，您可以创建一个辅助函数来“隐藏”其他变量：

```
Fct(double[] x, out double a)
{
    double b, c;
    Fct(x, out a, out b, out c);
} 
```

调用此函数时仍会创建两个双精度数，但它避免了混淆调用者的上下文。

如果您想*调用*`Fct`. 参数的整个想法`out`是函数没有自己的值，它引用外部值，因此外部值必须存在于某个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T18:41:02.767

这很容易：如果您不想保证将为它们提供值，则无需`Fct`使用所有这些参数定义您的函数。`out`

# bash - Bash脚本，xterm进程的pid

> ID：13257110
> 
> 赞同：0
> 
> 时间：2012-11-06T18:30:38.293
> 
> 标签：bash

我有一个小问题。在 bash 脚本中，我需要运行一个 xterm 来做一些类似的事情。

xterm -e "(时间./program.exe 127.0.0.1) 2> out.txt"

我怎么能说这个过程的pid？

我需要等待它为写输出而完成的人，并与另一个罚款合并。

非常感谢大家！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:36:30.287

基本上，您通过在命令末尾添加 & 来启动后台进程，使用 $! 获取最后启动的 pid！并等待该过程以等待完成。所以，像：

```
xterm -e "(time ./program.exe 127.0.0.1) 2> out.txt" &
pid=$!
wait $pid 
```

应该管用。

# autofac - 使用 Autofac 注册带有参数的具体类型为空

> ID：13257112
> 
> 赞同：4
> 
> 时间：2012-11-06T18:30:41.653
> 
> 标签：autofac

我有以下课程：

```
public class Errors
{ 
    private readonly string _connectionString;
    public Errors(string connectionString)
    {
         _connectionString = connectionString;
    }
} 
```

我正在尝试像这样使用 Autofac 进行注册：

```
builder.RegisterType<Errors>().WithParameter("connectionString", System.Configuration.ConfigurationManager.ConnectionStrings["myConn"].ConnectionString); 
```

该对象被注入到另一个对象中，但它始终为空。进一步查看异常，显示以下错误消息：

```
Cannot choose between multiple constructors with equal length 1 on type   'System.String'.
Select the constructor explicitly, with the UsingConstructor() configuration method, when the component is registered. 
```

我尝试使用 UsingConstructor 和 WithParameter 进行注册，但没有任何变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:40:33.677

试试这个，有两种注册方式

**第一种**：

```
builder.Register(c => new Errors(System.Configuration.ConfigurationManager.ConnectionStrings["myConn"].ConnectionString)).InstancePerLifetimeScope(); 
```

**第二种**：

```
public class Errors
{ 
    private string _connectionString{ get; set; }

    public Errors(string connectionString)
    {
        _connectionString = connectionString;
    }
} 
```

注册如下

```
builder.RegisterType<Errors>().WithParameter("connectionString", System.Configuration.ConfigurationManager.ConnectionStrings["myConn"].ConnectionString); 
```

**编辑**：测试

```
class Program
{
    static void Main(string[] args)
    {
        var builder = new ContainerBuilder();
        builder.Register(c => new Errors(ConfigurationManager.ConnectionStrings["myConn"].ConnectionString)).InstancePerLifetimeScope();      // Type 1
        // builder.RegisterType<Errors>().WithParameter("connectionString", ConfigurationManager.ConnectionStrings["myConn"].ConnectionString); // Type 2
        var container = builder.Build();

        var objErrors = container.Resolve<Errors>();
    }
} 
```

配置文件看起来像

```
 <connectionStrings>
     <add name="myConn" connectionString="Some Connection String"/>
  </connectionStrings> 
```

请阅读此 Autofac [Wiki](http://code.google.com/p/autofac/wiki/ResolveParameters)

在 Autofac 版本中测试：2.6.1.841

**结果**： ![结果](../Images/765a2b2659885bee0d878cb6fe4cec99.png)

# php - 如何在 SwiftMailer 中关闭 SMTP 连接

> ID：13257114
> 
> 赞同：16
> 
> 时间：2012-11-06T18:30:44.563
> 
> 标签：php, email, smtp, swiftmailer, worker

我使用 SwiftMailer 从 gearman 工作进程发送电子邮件。我正在使用该`Swift_SmtpTransport`课程发送电子邮件。

问题是如果这个工作进程保持空闲一段时间，SwiftMailer smtp 连接就会超时。现在，当下一个作业到达时，由于连接超时，SwiftMailer 无法发送电子邮件。

理想情况下，我想在每次工作后关闭 smtp 连接。我无法在专门执行此操作的类中找到 api。对象也不起作用，`unset()`因为这是一个静态类。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-14T14:12:16.407

有一个粗鲁的选择：明确停止运输。在随后调用 sendMail 方法时，SwiftMailer 将检查传输是否已启动（现在未启动）并再次启动它。IMNSHO，SwiftMailer 应该拦截 SMTP 超时并自动重新连接。但是，现在，这是解决方法：

```
function sendMail($your_args) {
    try{ 
      $mailer = Swift_Mailer::newInstance($transport);
      $message = Swift_Message::newInstance('Wonderful Subject')
        ->setFrom(array('john@doe.com' => 'John Doe'))
        ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
        ->setBody('Here is the message itself');

      $result = $mailer->send($message);
      $mailer->getTransport()->stop();

    } catch (Swift_TransportException $e) {
      //this should be caught to understand if the issue is on transport
    } catch (Exception $e) {
      //something else happened  
    }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-25T08:40:57.680

我在一个循环中发送邮件，我正在捕获`Swift_TransportException`并创建一个新实例，`Swift_Mailer`但这不是正确的解决方法：问题是*transport*，而不是*mailer*。解决方案是发出显式调用`Swift_SmtpTransport::stop()`：

```
foreach($recipients as $to => $body){
    try{
        $message->setTo($to);
        $message->setBody(body);
        $mailer->send($message);
    }catch(Swift_TransportException $e){
        $mailer->getTransport()->stop();
        sleep(10); // Just in case ;-)
    }
} 
```

这样，Swift 会检测到邮件程序已停止并自动启动，因此它可以从通信错误中正确恢复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-27T16:09:53.313

当管道损坏时， $mailer->getTransport()->stop() 也会失败。由于此错误，传输无法停止。解决方法是

```
// Let's try to send an email.
$tries = 3;
while ($tries--) {
    try {
        $sent = $this->mailer->send($message);
        break;
    } catch (\Exception $e) {
        // Connection problems
        // @see https://github.com/swiftmailer/swiftmailer/issues/490
        try {
            // Try to stop
            $this->mailer->getTransport()->stop();
        } catch (\Exception $e) {
            // Got Exception while stopping transport.
            // We have to set _started to 'false' manually, because due to an exception it is 'true' now.
            $t = $this->mailer->getTransport();
            $reflection = new \ReflectionClass($t);
            $prop = $reflection->getProperty('_started');
            $prop->setAccessible(true);
            $prop->setValue($t, false);
            $prop->setAccessible(false);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T17:45:37.870

我正在使用 Swiftmailer 和 AWS SES 在无限循环中运行工作人员，但出现错误：

```
Expected response code 250 but got code "421", with message "421 Timeout waiting for data from client. 
```

我的脚本的解决方案：

```
$love = true;
while($love) {
    $message = Message::to($record->to)
        ->from(array('no-reply@clouddueling.com' => $user->name()))
        ->reply(array($user->email => $user->name()))
        ->subject($record->subject)
        ->body($body->value)
        ->html(true)
        ->send();

    if (! $message->was_sent())
        throw new Swift_TransportException($errstr . ': ' . $errno);
} 
```

# ios - Apple Review 与外部支付系统

> ID：13257116
> 
> 赞同：0
> 
> 时间：2012-11-06T18:30:58.650
> 
> 标签：ios, appstore-approval, amazon-fps

我们正在使用亚马逊 FPS 支付网关通过 IOS 应用程序购买商品，现在我们需要将其上传到苹果评论团队，因为这是生产应用程序，它指向生产/实时亚马逊 FPS 帐户所以在这里我想了解苹果是否真的想要购买任何东西，那么他们需要一些凭证来测试购买。

所以第一件事真的是苹果测试整个购买流程吗？如果是，那么我应该提供什么凭据？或者我应该将服务器更新为沙盒模式，直到苹果批准该应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:45:03.037

我们在 iOS 上发布了一个慈善[“微捐赠”应用程序](https://itunes.apple.com/us/app/spare-change/id361477343?mt=8)，该应用程序使用亚马逊支付在外部处理捐赠。我们使用我们的生产支付系统提交了该应用程序。

根据我们的服务器日志，在他们的审查过程中，Apple 从未提交过付款，甚至从未发起过付款。

需要提交几次才能获得批准，但他们的反馈主要集中在确保我们遵守 Apple 的指导方针（捐款必须在应用程序外部处理，即通过 safari），并向用户说明确切的内容捐赠过程是。

我认为苹果不太可能花钱测试你的应用程序，他们也不会等着看你是否真的按照承诺交付了货物。但是，我确实认为如果他们想在不花钱的情况下进行测试，他们会在反馈中向您说明清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:39:54.997

您应该提交您的应用并选择“等待开发者发布”。

然后，您可以在您的沙盒服务器上向 Apple 提供凭据以进行测试。

当 Apple 批准您的应用程序后，您可以将服务器切换到生产环境，然后发布您的应用程序。

但是，我有一种感觉，他们不会批准你的应用程序，因为它为人们提供了一种购买东西的机制，不会让苹果公司分得一杯羹。这与杂志和报纸（或任何人）通过非 Apple Store 机制销售订阅的问题没有什么不同：Apple 不喜欢它们被淘汰。

苹果更喜欢你使用应用内购买，所以他们会得到削减。

祝你好运！

**编辑：**

*确实，真实*商品与*虚拟*商品是有区别的，我想我在阅读您的帖子时错过了这一点。对不起。

对于您的实际问题：Apple 会对其进行测试吗？没人知道。:-) 您应该假设他们会这样做，并提供一些测试凭据供他们使用。

我可以从我构建的（免费）商业应用程序的经验告诉你，在我们启动服务之前，我们已经提交了应用程序，Apple*确实*在我们的后端注册并测试了应用程序。

# c# - c#泛型图灵完备？

> ID：13257117
> 
> 赞同：2
> 
> 时间：2012-11-06T18:31:08.347
> 
> 标签：c#, c++, templates, template-meta-programming

> **可能重复：**
> [C# 4.0 编译时图灵是否完整？](https://stackoverflow.com/questions/11984490/is-c-sharp-4-0-compile-time-turing-complete)

众所周知，C++ 模板元“语言”是图灵完备的。我想，C#（或Java）泛型不是（即你不能使用它们编写任意元程序）。

有人证明过吗？

# mysql - 将字段值和 ID 链接到另一个表？

> ID：13257118
> 
> 赞同：1
> 
> 时间：2012-11-06T18:31:09.723
> 
> 标签：mysql, sql, database

如何将我的主表中所有名为“用户名”的用户的字段链接或添加到另一个表，这样我就可以运行检查和比较值，而不必在主表中添加大量行？这将是一个更干净、更有条理的设置。

名为 login_users 的表。这是我的主表，存储他们的基本信息

```
username       email                 password
Anthony        user@email.com
Josh           user@email.com
Tsuyoshi       user@email.com 
```

表 2 称为 badge_status。该表将保存他们是否在我的网站上解锁成就的状态。我想引入**用户名。**

```
username       badge1               badge2
Anthony        locked               unlocked
Josh           unlocked             locked
Tsuyoshi       unlocked             locked 
```

此外，由于所有新注册都导入到第一个表中，因此表 2 是否可以在新用户注册时自动更新。作为旁注，我正在使用 phpmyadmin。

感谢您在设置此设置方面提供的任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T18:40:33.293

我认为您应该改用以下模式来[规范您的数据：](http://en.wikipedia.org/wiki/Database_normalization)

*   login_users [表]
    *   用户名
    *   电子邮件
    *   密码
*   徽章 [表]
    *   BadgeId int 主键
    *   徽章名称
    *   ... *（任何其他相关列）*
*   users_badges [表格]
    *   用户名（表上用户名列的外键约束`login_users`）
    *   BadgeId（表上 BadgeId 列的外键约束`badges`）

这将允许您添加任意数量的徽章，而无需更改您的数据库架构或脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:37:33.920

我真的不明白你为什么要把这些表分开。理论上，两者之间存在一对一的关系。您的查询“表 2 是否可以在新用户注册时自动更新，因为所有新注册都导入到第一个表中”进一步支持了为什么*拆分这些表只会产生不必要的开销*的论点。

其他开销来源包括过于复杂的 JOIN 以获取数据以及需要添加额外的唯一约束`badge_status.username`以及外键。

* * *

如果您真的希望将这些表分开，我建议您改用以下设置，这使得查询特定徽章和添加新徽章变得非常容易：

```
login_users：用户名，电子邮件，密码，...
徽章：ID，名称，描述，...
users_badges：用户名，badge_id，状态，unlocked_date，...

```

# mono - Math.Pow() 在单声道 ARM 版本中损坏？

> ID：13257119
> 
> 赞同：3
> 
> 时间：2012-11-06T18:31:15.140
> 
> 标签：mono, arm, pow

因此，我在 BeagleBone（ARM 700MHz 处理器）上运行 Ubuntu 12.04，令我惊讶的是，我发现 Math.Pow() 在该平台上返回了不正确的结果（Mono build 2.10.8.1ubuntu2.1）。

经过一番搜索，我发现[这张海报](http://www.raspberrypi.org/phpBB3/viewtopic.php?p=188718)表明这是一个已知问题。几乎是随随便便。我有点震惊 a) 问题一开始就出现了，b) 没有 ETA 来修复我认为核心数学库中一个非常基本的错误。

进一步搜索只找到了一些点击，并且在[https://bugzilla.xamarin.com/](https://bugzilla.xamarin.com/)上没有提及这一点（我计划提交错误报告）。

所以，诚然，还没有进入源代码（尽管我打算这样做），任何人都可以向我解释解决这个问题的困难，或者它是如何首先引入的？我的意思是，math.h 中的 pow() 函数按预期工作，所以 Math.Pow() 不能包装它吗？我在这里想念什么？

我想我觉得有一些关于浮点操作的东西是我不理解的基础，所以这不仅仅是一个错误报告，我想知道根本问题是什么，或者它是否只是一个大问题被忽视的问题。

编辑：此页面很好地总结了问题的根源（在 debian 中移植 armhf 的状态）： [http ://wiki.debian.org/ArmHardFloatTodo](http://wiki.debian.org/ArmHardFloatTodo)

Punchline：Mono 2.10 被列为不固定用于 armhf 端口，但它正在用于 mono 3.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:23:00.400

有关该问题的更详细背景信息：http: [//lists.debian.org/debian-arm/2012/02/msg00000.html](http://lists.debian.org/debian-arm/2012/02/msg00000.html)

但作为总结 - armhf 不是 Mono 的正确支持的 ABI，其 ARM 端口是为 armel ABI 制作的。这意味着您最终会导致调用者和被调用者在函数调用中传递浮点参数的位置存在分歧。

很少有事情是“只更改 2 行代码”，而那些通常需要大量努力才能找出哪两行是错误的，以及他们应该做什么。

# annotations - 仅注解的 Checkstyle 抑制

> ID：13257125
> 
> 赞同：0
> 
> 时间：2012-11-06T18:31:38.400
> 
> 标签：annotations, checkstyle

有没有一种方法可以只为文件中的注释抑制 checkstyle 规则。示例我在注释中得到了一个幻数，我想禁止幻数规则，但只针对注释而不是整个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:21:16.423

是的，您可以将`ignoreAnnotation`参数设置为 true 以执行此操作。

[请参阅此处](http://checkstyle.sourceforge.net/config_coding.html#MagicNumber)的文档。

# php - 我们如何获取用户使用php播放的flv视频百分比的详细信息

> ID：13257127
> 
> 赞同：0
> 
> 时间：2012-11-06T18:31:43.920
> 
> 标签：php, video, video-streaming, html5-video

有没有办法测量用户观看视频的持续时间......使用php？

我有一个用于视频的网络应用程序，在这里我想检查用户播放了相应的 flash 或 wmv 视频文件的时间，以便我可以在我的数据库中跟踪它。

是否有任何 Flash 播放器可以提供这个..通过 api 或其他东西..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:36:51.940

好吧，如果您要发送 206 个 HTTP 响应，则可以通过查看范围来跟踪它，或者至少获得“总体思路”。

[http://benramsey.com/blog/2008/05/206-partial-content-and-range-requests/](http://benramsey.com/blog/2008/05/206-partial-content-and-range-requests/)

这与他们观看视频的界面相结合，将帮助您准确评估正在发生的事情。

# wordpress - 如何使用复选框更多字段插件显示内容？

> ID：13257131
> 
> 赞同：0
> 
> 时间：2012-11-06T18:31:53.017
> 
> 标签：wordpress

我正在使用插件更多字段在页面中显示一些内容。但是“复选框”字段不起作用。

```
<!-- Widget Productos destacados / Featured products -->
    <div id="cdm_carrusel">
        <ul>
            <?php
            $featuredprod = new WP_Query();
            $featuredprod->query('posts_per_page=3&post_type=products');
            while($featuredprod->have_posts()) {
                $featuredprod->the_post();
            ?>
                <!--if checkbox is checked, display list-->
                <?php if (meta('producto-destacado')) { ?>
                    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
                <!--else, if not checked, don't display content-->
                <?php } else { ?>
                    <!--Nothing -->
                <?php } ?>
            <?php
            }           
            ?>
        </ul>
    </div>
    <!-- // Widget Productos destacados / Featured products --> 
```

有什么建议吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:52:23.953

替换这个：

```
<!--if checkbox is checked, display list-->
     <?php if (meta('producto-destacado')) { ?>
      <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
      <!--else, if not checked, don't display content-->
      <?php } else { ?>
          <!--Nothing -->
      <?php } ?> 
```

有了这个：

```
<?php if (get_post_meta($post->ID, 'producto-destacado', true) ) : ?>
     <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php endif; ?> 
```

只要您不需要`else`在其中声明，那应该可以为您完成工作。如果你这样做，就有点不同了。

# javascript - 从 Google Geochart 将缩放/平移脚本附加到 SVG

> ID：13257133
> 
> 赞同：4
> 
> 时间：2012-11-06T18:32:03.437
> 
> 标签：javascript, svg, maps, google-visualization

我正在尝试对使用 google geochart API 生成的地图实现某种缩放/平移功能。网上有一些脚本可以缩放/平移 svg 图像，但我没有成功地将它们实现到 geochart api 生成的 SVG。

我正在尝试 SVGPan 库[http://code.google.com/p/svgpan/](http://code.google.com/p/svgpan/)

我用来将脚本附加到 SVG 的代码是：

```
google.visualization.events.addListener(chart, 'ready', function () {

var script = document.createElementNS('http://www.w3.org/2000/svg', 'script');     
script.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', 'http://www.cyberz.org/projects/SVGPan/SVGPan.js');        
var svg = document.getElementsByTagName('svg')[0];
svg.appendChild(script);
}); 
```

这是jsfiddle：

[http://jsfiddle.net/cmoreira/CetaA/](http://jsfiddle.net/cmoreira/CetaA/)

使用 Firebug，我可以看到脚本正在 svg 上放置，但没有任何反应，它没有按预期实现 svg 中的功能。

我不确定这条线是否正确，因为我没有在网上找到任何示例：

```
 var script = document.createElementNS('http://www.w3.org/2000/svg', 'script'); 
```

我做错了什么，或者我想做的事情是不可能的？

谢谢你的帮助！干杯卡洛斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:44:14.540

经过一些实验，我找到了一个简单的解决方案，由于到目前为止还没有任何有价值的答案，所以我决定分享我目前所拥有的。

我决定用 CSS 来做，在放大/缩小时用不同的值重新绘制地图，并用 CSS 隐藏溢出。

这是一个工作示例：

[http://jsfiddle.net/cmoreira/CCUpf/](http://jsfiddle.net/cmoreira/CCUpf/)

CSS

```
#canvas {
    width:400px;
    height:300px;
    overflow:hidden;
}

#visualization {
top:0px;
left:0px;
} 
```

缩放/平移 Javascript

```
function zoomin() {
    mw = mw+50;
    mh = mh+50;
    x = x-25;
    y = y-25;
    document.getElementById('visualization').style.top = y +'px';
    document.getElementById('visualization').style.left = x +'px';
    drawVisualization(mw,mh);
 }

  function zoomout() {
    if(mw > 600) {
    mw = mw-50;
    mh = mh-50;
    x = x+25;
    y = y+25;
    document.getElementById('visualization').style.top = y +'px';
    document.getElementById('visualization').style.left = x +'px';
    drawVisualization(mw,mh);
    }
 }

 function left() {
     x = x-50;
     document.getElementById('visualization').style.left = x +'px';
 }
 function right() {
     x = x+50;
     document.getElementById('visualization').style.left = x +'px';
 }
  function up() {
     y = y-50;
     document.getElementById('visualization').style.top = y +'px';
 }
   function down() {
     y = y+50;
     document.getElementById('visualization').style.top = y +'px';
 } 
```

我知道这对于 google geochart API 来说是一个非常糟糕的缩放/平移功能，但它确实是，对吧？

欢迎对这种简单方法进行任何改进。谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:07:42.040

我建议您改用[jVectorMap](http://jvectormap.com/)。它支持使用鼠标或触摸事件进行缩放/平移。

# infragistics - Infragistics Ultragrid 如何根据属性禁用行

> ID：13257137
> 
> 赞同：5
> 
> 时间：2012-11-06T18:32:32.113
> 
> 标签：infragistics, ultrawingrid

我希望根据行中的布尔同步属性禁用 Ultragrid 中的某些行。我想过两种不同的解决方案，但都没有成功。

1) 将 Sync 属性数据绑定到行的 Activation 属性。这可能吗？

2) 在网格的 InitializeRow 事件等事件中，找出 Sync 属性是什么，如果设置为 true，则禁用该行。此方法的工作原理是，如果将更多行添加到网格并随后保存网格，数据会自行重新排序，以使禁用的行不包含正确的数据。因此，我需要一种知道何时发生这种情况的方法，以便之后我可以再次检查并禁用正确的行。

```
private void ultraGrid1_InitializeRow(object sender, Infragistics.Win.UltraWinGrid.InitializeRowEventArgs e)
{
    e.Row.Activation = Infragistics.Win.UltraWinGrid.Activation.AllowEdit;
    if (e.Row.Cells[grdBoundGrip.DisplayLayout.Bands[0].Columns["Sync"]].Value != null && (bool)e.Row.Cells[grdBoundGrip.DisplayLayout.Bands[0].Columns["Sync"]].Value)
            e.Row.Activation = Infragistics.Win.UltraWinGrid.Activation.Disabled;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-31T04:55:00.687

您也可以在自己的函数中编写它。我希望下面的解决方案可以帮助你。

创建一个窗体“test”..并在该窗体中拖放一个“ultragird”，如下所示。 ![在此处输入图像描述](../Images/ab566d571e092368d198e3e53ec2151b.png)

创建一个表单加载函数“test_Load”..并尝试下面的代码..您的同步“false”行被禁用..

```
 private void test_Load(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Name", typeof(string));
        dt.Columns.Add("Address", typeof(string));
        dt.Columns.Add("Sync", typeof(string));
        dt.Rows.Add(new object[] {"John","United States","False" });
        dt.Rows.Add(new object[] { "Xing", "China", "True" });
        dt.Rows.Add(new object[] { "Ram", "Nepal", "True" });
        dt.Rows.Add(new object[] { "Germany", "Thomas", "False" });
        dt.Rows.Add(new object[] { "Pedrik", "Russia", "True" });

        ultraGrid1.DataSource = dt;
        ultraGrid1.DataBind();

        DisableRowsWithSyncOff(dt.Rows.Count);

    }
    private void DisableRowsWithSyncOff(int _rowcount)
    {
        for (int i = 0; i < _rowcount; i++)
        {                
            if (!Convert.ToBoolean(ultraGrid1.Rows[i].Cells["Sync"].Value.ToString()))
            {                    
                ultraGrid1.Rows[i].Activation = Infragistics.Win.UltraWinGrid.Activation.Disabled;
            }
        }
    } 
```

# java - Android 应用程序中的云驱动器使用情况

> ID：13257139
> 
> 赞同：3
> 
> 时间：2012-11-06T18:32:37.793
> 
> 标签：java, android, amazon-s3, amazon-web-services, google-drive-api

我打算制作一个从云驱动器亚马逊或谷歌驱动器下载所需文件的安卓应用程序。

**详细信息：** 让我们有 30 个关于云驱动器的讲座，用户可以使用我的 android 应用程序从云驱动器下载讲座 {according to need/Intrest}。我只需要存储在云驱动器中的数据的公共 URL。或任何可以完成这项工作的 API {亚马逊、谷歌驱动器...等}

这个怎么做 ？**有任何云 API 或对我有帮助的东西吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:48:22.180

有很多可用的 API。[亚马逊的 API/SDK 在这里](http://aws.amazon.com/sdkforandroid/)。Rackspace 也有一个，iirc。Google Drive 和 Dropbox 并不是真正面向公众的云存储，在使用它们之前，您可能需要仔细查看它们的 TOS。对于任何面向公众的服务，我通常使用一个小型 php-app，它与移动应用程序对话并为请求的内容提供限时 url。这可以防止侧面加载，并允许我在不更改应用程序的情况下切换 CDN 提供商。

要获得更具体的答案，您可能需要提出更具体的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T17:21:07.233

如果您希望主持一些视频讲座并让任何用户下载它们，您可能想要使用 Amazon S3。云驱动器是为应用程序的每个用户下载和上传视频到他们（最终用户）的云驱动器帐户。谷歌驱动器是类似的。Amazon S3 让您（开发人员）保留数据，然后将其提供给您的用户。

*   适用于 AWS 的 Android 开发工具包可在[https://aws.amazon.com/mobile/sdk/找到](https://aws.amazon.com/mobile/sdk/)
*   入门指南是[http://docs.aws.amazon.com/mobile/sdkforandroid/developerguide/Welcome.html](http://docs.aws.amazon.com/mobile/sdkforandroid/developerguide/Welcome.html)
*   使用 S3 上传和下载的具体内容是[http://docs.aws.amazon.com/mobile/sdkforandroid/developerguide/getting-started-store-retrieve-s3-transferutility.html](http://docs.aws.amazon.com/mobile/sdkforandroid/developerguide/getting-started-store-retrieve-s3-transferutility.html)（短版）和[http://docs .aws.amazon.com/mobile/sdkforandroid/developerguide/s3transferutility.html](http://docs.aws.amazon.com/mobile/sdkforandroid/developerguide/s3transferutility.html)（更详细）

您还可以在 GitHub 上找到示例（以及教程）[https://github.com/awslabs/aws-sdk-android-samples/tree/master/S3TransferUtilitySample](https://github.com/awslabs/aws-sdk-android-samples/tree/master/S3TransferUtilitySample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:02:25.397

我知道这听起来可能有点矫枉过正，但如果将来有任何变化（并且会发生变化），这将对您有很大帮助。

我可能会创建一个 Web 服务，以响应 HTTP 重定向到当前内容所在的 URL。如果托管成本是问题，您可能很容易留在 GAE 的免费套餐内。

Amazon S3 在这里可能很合适。除非您开始使用大量带宽，否则成本可能会非常低。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T06:46:48.733

现在亚马逊拥有无限空间的云驱动服务，每年约 60 美元。也有适用于[android](https://developer.amazon.com/public/apis/experience/cloud-drive/content/sdk-android-building-file-explorer)的 api 。

# php - PHP 获取当前页面的特定内容

> ID：13257146
> 
> 赞同：0
> 
> 时间：2012-11-06T18:33:03.433
> 
> 标签：php, dom

我正在尝试找出是否可能以及使用什么代码：加载当前页面的内容并使用 PHP 或[PHP Simple回显到特定页面（c.html）的相对路径，该页面在“#navbar a”中Html DOM 解析器。](http://simplehtmldom.sourceforge.net/)

到目前为止我的代码：

```
<?php
$pg = 'c.html';
include_once '%resource(simple_html_dom.php)%';
/* $cpath = $_SERVER['REQUEST_URI']; Old version */  // Path to current pg from root
$cpath = "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
echo var_dump($cpath).": Current Root Path"."<br />";  // "http://www.partiproductions.com/copyr/index.php" - Correct
$cfile = basename($cpath);
echo 'Current File: ' . $cfile . "<br />"; // "index.php" - Current pg, Correct

$html = file_get_html($cpath); // Getting Warning: URL file-access is disabled in the server configuration & failed to open stream: no suitable wrapper could be found in.. & Fatal error: Call to a member function find() on a non-object in...
foreach($html->find(sprintf('#navbar a[href=%s]', $pg)) as $path) {
  echo 'Path: ' . $path."<br />";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:11:15.497

您遇到的主要问题是调用 file_get_html($cfile)。

您的示例中的 $cfile 将包含类似 /copyr/index.php 的内容

当您将它传递给 file_get_html() 时，它将在您的服务器根目录中查找目录 /copyr，并在其中查找 index.php 文件。根据您指出的警告，您实际上在服务器的根目录中没有此文件夹结构。

您实际需要做的是在您当前拥有的 URI 前面包含完整的 URL，如下所示：

```
$cpath = "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; 
```

这将产生这样的路径：[http://www.yourserver.com/copyr/index.php](http://www.yourserver.com/copyr/index.php)然后您应该为 file_get_html();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:13:01.443

根据提问者的最新信息，我将采用不同的方法。

创建一个新文件，其中仅包含要在两个文件之间共享的内容。然后，在两个文件中（或更多，如果需要）使用 include() 函数从新的共享内容文件中注入内容。

**index.php 文件：**

```
<?php
//Any require PHP code goes here
?>
<html>
    <body>
    <?php include('sharedfile.php');?>
    </body>
</html> 
```

**/copyr/c.php 文件：**

```
<?php
//Any require PHP code goes here
?>
<html>
    <body>
    <?php include('../sharedfile.php');?>
    </body>
</html> 
```

**共享文件.php：**

```
// You need to close the PHP tag before echoing HTML content
?>
<p>
    This content is displayed via include() both on index.php and /copyr/c.php
</p>
<?php  // The PHP tag needs to be re-opened at the end of your shared file 
```

这样做的好处是，您现在可以通过遵循相同的技术在您想要的任何文件中使用 sharedfile.php 文件内容。您也不需要解析页面的 DOM 来去除要跨多个页面显示的内容，这可能会很慢且容易出错。

# sql - 快速筛选器的架构

> ID：13257155
> 
> 赞同：0
> 
> 时间：2012-11-06T18:33:35.497
> 
> 标签：sql, database, performance, filter

我正在构建一个筛选器，它应该能够快速搜索大约 50 列宽和 7000 行长的表格。

每行由以下列组成。

主键，数量 1，数量 2，数量 3...数量 50。

所有数量本质上都是浮点数或整数。因此，典型的筛选器看起来像这样。

```
Get all rows which have quantity1 > x and quantity2 < y and quantity3 >= z. 
```

索引所有列应该会导致非常快的搜索时间，但是一些列将实时更新。对所有内容进行索引显然会导致插入/更新时间非常短。

不过，一部分列是相当静态的。因此，一个想法是将数据分成两个表，一个包含所有静态列，另一个包含动态数据。然后将根据实际查询将任何筛选器应用于两个表。并将结果结合到最后。

我目前正计划使用 MySQL 引擎，很可能是 INNoDB。但是，我希望获得更快的响应时间。在某个站点上实现相同问题非常迅速。无论查询大小如何，我都能在 500 毫秒内得到结果。想知道还有哪些其他选项可以实现此功能。

# php - 如何将树枝呈现的模板作为 JSON 响应的一部分返回？

> ID：13257156
> 
> 赞同：23
> 
> 时间：2012-11-06T18:33:37.453
> 
> 标签：php, json, symfony, twig

我想返回一个 HTML 片段以及 json 字符串中的其他值，这就是我所拥有的：

```
$html = $this->render('sometemplate.html.twig', array( 'somevar' => $somevar ) );
$response = new Response(json_encode( array("html" => $html, "name" => "Joe Bloggs") ));
$response->headers->set('Content-Type', 'application/json');
return $response; 
```

但我得到的只是`{"html":{"headers":{}}}`。有没有办法只抓取呈现的 HTML？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-06T18:37:39.163

改为使用`$this->renderView()`。

`$this->render()`返回一个`Response`对象，同时`$this->renderView()`返回一个由渲染模板产生的字符串。

# java - (JAVA) Google API 分析 - 无法使用“刷新令牌”获取新的“访问令牌”

> ID：13257163
> 
> 赞同：5
> 
> 时间：2012-11-06T18:34:21.270
> 
> 标签：java, access-token, google-api-java-client

我想根据数据库中保存的“刷新令牌”获取新的“访问令牌”。

这是我写的代码：

```
GoogleCredential.Builder credentialBuilder = new GoogleCredential.Builder()
        .setTransport(HTTP_TRANSPORT).setJsonFactory(JSON_FACTORY)
        .setClientSecrets(CLIENT_ID, CLIENT_SECRET);
credentialBuilder.addRefreshListener(new MyCredentialRefreshListener());

credential = credentialBuilder.build();
credential.setRefreshToken("saved_refresh_token_from_database");

try {
    credential.refreshToken();
} catch (IOException e) {
    e.printStackTrace();
}

class MyCredentialRefreshListener implements CredentialRefreshListener {
    public void onTokenResponse(Credential cr, TokenResponse tr) {
       System.out.println("Credential was refreshed successfully.");
    }

    public void onTokenErrorResponse(Credential cr, TokenErrorResponse tr) {
        System.out.println(tr);
    }
 } 
```

我收到这条消息：

> com.google.api.client.auth.oauth2.TokenResponseException: 400 错误
> 
> 请求{“错误”：“invalid_grant”}

我在 php 脚本中使用相同的 CLIENT_ID、CLIENT_SECRET 和“刷新令牌”，当“访问令牌”过期时，我设法使用“刷新令牌”获取新的“访问令牌”。

我基于[javadoc.google-oauth-java-client](http://javadoc.google-oauth-java-client.googlecode.com/hg/1.8.0-beta/com/google/api/client/auth/oauth2/Credential.html?is-external=true#refreshToken%28%29)编写了代码。

这里的任何人都知道如何修改代码以获得新的访问令牌？

提前致谢。

更新：问题是我在数据库中保存了 refresh_token 而没有对其进行 json_decode 并且它包含一个“\”，它被认为是 JSON 中的转义字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:13:04.720

看起来您可能发现了一些过时的文档。您链接的 JavaDoc 适用于客户端库的 1.8 版。当前版本是 1.12。

客户端库作者建议您使用它[`GoogleAuthorizationCodeFlow`](http://code.google.com/p/google-api-java-client/wiki/OAuth2#Authorization_Code_Flow)来管理 OAuth 凭据。它会自动处理刷新。如果您遵循此路径，代码将如下所示：

```
// Create the flow 
AuthorizationCodeFlow authorizationCodeFlow = new GoogleAuthorizationCodeFlow.Builder(
    new UrlFetchTransport(), new JacksonFactory(), CLIENT_ID, CLIENT_SECRET,
    Collections.singleton(OAUTH_SCOPES))
    .setAccessType("offline")
    .setCredentialStore(new AppEngineCredentialStore())
    .build();

// User Id: e.g. from session 
Credential credential = authorizationCodeFlow.loadCredential(USER_ID);     

// Make your API call. This example uses the Google+ API
// If the access token has expired, it will automatically refresh
Plus plus = new Plus(new UrlFetchTransport(), new JacksonFactory(), credential)
  .activities().list("me", "public").execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T02:04:19.343

如果你得到 http 状态 400，并且消息“invalid_grant”。我认为您应该检查您的**HTTP_TRANSPORT, JSON_FACTORY, CLIENT_ID, CLIENT_SECRET 实例**。

# windows-phone-7 - windows phone 中的数据库视图

> ID：13257164
> 
> 赞同：2
> 
> 时间：2012-11-06T18:34:26.977
> 
> 标签：windows-phone-7, local-database

我已经在我的 Windows Phone 应用程序中创建了我的数据库。现在我想看看它是否在我编程时创建和存储数据。但我无法查看此数据库。我的本地数据库文件保存在哪里？我喜欢提到我已将数据库存储在隔离存储中。我听说了一种使用 firefox 扩展的方法，我可能能够看到数据库，但不确定那是什么扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:19:29.847

我从未听说过任何用于在 Windows Phone 上浏览独立存储的 Firefox 扩展。

您可以使用[Windows Phone Power Tools](http://wptools.codeplex.com/)将数据文件从模拟器或设备复制到桌面。如果您使用的是 Linq to Sql，则可以在 SQL Server Management Studio 中打开它。其他数据格式（即Sqlite）可以在各自的管理工具中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T11:42:32.667

下载 Michael 提到的 Windows Phone 电动工具后，您可以轻松提取数据库。您可能很难找到确切的文件，因为这些应用程序是按 GUID 列出的，而不是它们在 wp 电动工具中的名称。因此，您可能必须浏览每个应用程序以查看哪个应用程序包含所需的文件。找到文件后，您将需要一个查看器（像[这样](http://www.softpedia.com/progDownload/SDF-Viewer-Download-146403.html)）来打开文件。

这种方法对我来说恰到好处。

# c - 打印一个 __m128i 变量

> ID：13257166
> 
> 赞同：28
> 
> 时间：2012-11-06T18:34:33.680
> 
> 标签：c, assembly, sse, simd, intrinsics

我正在尝试学习使用内在函数进行编码，下面是添加的代码

`compiler used: icc`

```
#include<stdio.h>
#include<emmintrin.h>
int main()
{
        __m128i a = _mm_set_epi32(1,2,3,4);
        __m128i b = _mm_set_epi32(1,2,3,4);
        __m128i c;
        c = _mm_add_epi32(a,b);
        printf("%d\n",c[2]);
        return 0;
} 
```

我收到以下错误：

```
test.c(9): error: expression must have pointer-to-object type
        printf("%d\n",c[2]); 
```

如何打印`c`类型变量中的值`__m128i`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-06T18:42:48.537

使用此功能打印它们：

```
#include <stdint.h>
#include <string.h>

void print128_num(__m128i var)
{
    uint16_t val[8];
    memcpy(val, &var, sizeof(val));
    printf("Numerical: %i %i %i %i %i %i %i %i \n", 
           val[0], val[1], val[2], val[3], val[4], val[5], 
           val[6], val[7]);
} 
```

您在打印之前将 128 位拆分为 16 位（或 32 位）。

如果您有 64 位支持，这是 64 位拆分和打印的一种方式：

```
#include <inttypes.h>

void print128_num(__m128i var) 
{
    int64_t v64val[2];
    memcpy(v64val, &var, sizeof(v64val));
    printf("%.16llx %.16llx\n", v64val[1], v64val[0]);
} 
```

*注意：*将`&var`直接转换为`int*`or`uint16_t*`也可以使用 MSVC，但这违反了严格的别名并且是未定义的行为。使用`memcpy`是执行相同操作的标准兼容方式，并且通过最少的优化，编译器将生成完全相同的二进制代码。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-10-15T07:01:02.657

*   可跨 gcc/clang/ICC/MSVC、C 和 C++ 移植。
*   **在所有优化级别下完全安全：无严格混叠违规 UB**
*   以十六进制打印为 u8、u16、u32 或 u64 元素（[基于@AG1 的回答](https://stackoverflow.com/questions/13257166/print-a-m128i-variable/46751594#46751594)）
*   按内存顺序打印（最不重要的元素在前，如`_mm_setr_epiX`）。如果您希望以英特尔手册使用的相同顺序打印，则反转数组索引，其中最重要的元素位于左侧（如`_mm_set_epiX`）。相关：[显示向量寄存器的约定](https://stackoverflow.com/questions/41351087/convention-for-displaying-vector-registers)

使用 a`__m128i*`从数组加载`int`是安全的，因为`__m128`类型被定义为允许别名，就像 ISO C 一样`unsigned char*`。（例如在 gcc 的标题中，定义包括`__attribute__((may_alias))`.）

反过来*是*不安全的（指向对象的`int*`一部分`__m128i`）。MSVC 保证这是安全的，但 GCC/clang 不保证。（`-fstrict-aliasing`默认开启）。它有时适用于 GCC/clang，但为什么要冒险呢？它有时甚至会干扰优化；看到[这个问答](https://stackoverflow.com/questions/63360909/avx2-simd-performs-relatively-worse-to-scalar-at-higher-optimization-level)。另请参阅[硬件 SIMD 向量指针和相应类型之间的“重新解释转换”是否是未定义的行为？](https://stackoverflow.com/questions/52112605/is-reinterpret-casting-between-hardware-simd-vector-pointer-and-the-correspond)

**`(uint32_t*) &my_vector`违反了 C 和 C++ 别名规则，并且不能保证按您期望的方式工作**。存储到本地数组然后访问它可以保证是安全的。它甚至可以优化大多数编译器，例如，您可以直接从 xmm 获取`movq`/`pextrq`到整数寄存器，而不是*实际*的存储/重新加载。

[Godbolt 编译器资源管理器上的 Source + asm 输出](https://gcc.godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSBnVAV2OUxAHIBSAJgGY8AO2QAbZlgDU3fgGE8AWwXCCxYQDoEM7NwAMAQT6CR4qTNkMC%2BIQU3a9hgcLETM0uZfyo7/HQYdGeABmQlhBkgD6EcgADuIMccwMAU4mru4WVgCGonjAQj7YksUA9CWSsrS0kmHCmAyR%2Brn5WQwQAJTqxQAqCHgNCJhZWMQ1mEF1DTl5Qq0dKfyYocEBBgBuqHjokjG0vAAcEYMAHhHM%2BxBRCnv7eJLC7dIA7ABCDsXF0y1ttABsj8wVIcCJI1twAKwvP4QgAiMjeBg%2BkSUEUsJEwqLwNygVxueAAVO01qR7kJ2vD3h8YmobEEIHxeGs/md9iBpLxwUZjuzOQJuXxefx%2BRyuc9ZDzRQLJSK%2BRLZdwnuKpfKZUK5WrlRrFerhYLddK9RDZEIGaRKUiLWDIbpYSSrVDbcV7bxHaCIS9%2BK77QAWL3uzngmEkt2Q35%2ByFPW3mi0fe37R32gCcCfdtBtgbtqdoKchexzUM9GZDUN9RfttADMPJ/ARhiecP8602212ByOmFOzD%2Blwi1wOdwez1rSK%2Bsx%2B/0kgJszJBcdhFMRH17ClRRGIGIYWIOON7eMJxNJ1eHVJpBDpDLWhy7vzZmv1Kr1OuKCqVqvvGrfOqNJt4vDNi6dd10yDYtszLd0XXAyFCxAn180rTNQ3zSNAyPAJ61WfQNi2HYbnbTt%2BF4Hs%2B1uQ8h2jUc5j%2BAEVEIiJZ3dUs4RraNl1XdFMWxYi9yJEkHgXfQkWpFRz1/NZvTOQjb0/O8nzvb9TWLYDEIdKCXkg2D3RgtD/AwxssObXC2xOM5fm9bj%2BzIhVj0%2BZoxwgajJFEVAhGAJyXLc515xrUpyinAgzPoyRlGABAQWAPA1jcIISAULICAAWksGk3IAdyyYghGEYAGlSwgEB5URRGOeF7gIMBOAaKgkhBZzXNJSQmAUNx9BeABJZIAORFc0XXTjtws259z4skBKE09RMZXhTO9aTBSK98FoU38VOU0DYR0usG0MfTAnCG0DBUYKsmECBsPQR5rMpXFLKi5B3BhbrUUwVQIkwGI8AuehJD/SR%2BBJb0SXBElfhJJ5/0EmMoehj59hJRMSTTRHvr2RH/skWhAYx4GMf%2BMbilbQ4TOYMyzswZBNqpPDicIsmKfxoyiY7M5uzuymCep5nzjpzaFW2owlnwIJOHaUhRC4cFOFIIQuF0KXUC4WQ%2BDeXgXkalg2DcIxaClghZZF0WAGsQH4cF1ETRNvXBRNCN/X5TaeUHxc4b0pYUOhdF0aX9dIBXOClhgQC9vXODl0W4FgGBEBQVAFA%2B0RMDICgIDQOO8AT4gQDwZBkFocGJlEAhE8DiAACMfdL4QMoATy4HXSFT5qbAAeSEURa9DqWsDi1yE59/B12QAhIvqH2O3J5gi7rqWVEwZ25dIVRFGn0XclLwPIFF1AYmHlzA84BLjnuhKAHUclESQEub/hL%2BOAAJZuAGVugDjX2DoVeJalmXO99rhjn2L8BKZl7g5wxk8SQEBcCEBIOyfg31ZCx3jonOBvB2i631u0I2IBeDenNpbcE/ALYEMBs7V2pB3ben2OoX4vBfi/EIWmXgTxvT0Mtt7X%2BfsA5B0Xpg0gEdo6p2QUnSgQj06JxQKILIrlwSe1IAXIuxAS7l1/pXWYxAO710bksAgrd2790wD3YAfdf4D3JsPKK%2B8F7j2QJPDgnB66z3nrrNQ7sHEizFngde8At47zwHvLgSUrAyBhPkZgytlZVEvmfIql9r6XzimwLQ/AYQIFaKlOeohX6sHfrQT%2BnBJYcIXn7ABQCQFiGkW5M2uh1C6EgdAtccCEFIPEaMbW6DeGdywaQQYwwJEdDFlwch7twS0HUPwJ4/B%2BCsP2ImJ4HIplFPllwbhwdMHYP4DU8ETwni6H2Psm2NtdATMGZwfg38fZcM6WHfhUcBEQCQGIjO5BREtIzpI2giYIhmXkenRRyiK5Vw0dPBuscm66Lbh3Be3dKkmOhXgQeFjR6/xsXYkFTifZLzcTrVeXiN4DO3rvIQ%2B8r7HGyZrD%2BpzCk/2Kf/QBwDvSSAALKPwAGrik%2BT9XQedJAACVugn3qfgRp2sSSILThnOB/AOkhzDhss2UzEx/H2N6RM3LGHgzIW7EATxqGW14Ny70uDeBVGtuDGlyz/aMB4bKjx9ykAsAIDESeLyU5vIkf9TAwqSCUudtSy5XAjA3zygQAqpSGXMrZRyxMXKeX8pPhgrpotekjEoPk4ZOCxm6G2YmfY2ztn7O9LoAQSy/5WsDmspNpBjZTPUEa/Y8DdUNu9FM/Zpzzmlquba7pzteAXM4Ss65BtSBRSUf4mW3ogA%3D%3D)：证明它可以使用 MSVC 等进行编译。

```
#include <immintrin.h>
#include <stdint.h>
#include <stdio.h>

#ifndef __cplusplus
#include <stdalign.h>   // C11 defines _Alignas().  This header defines alignas()
#endif

void p128_hex_u8(__m128i in) {
    alignas(16) uint8_t v[16];
    _mm_store_si128((__m128i*)v, in);
    printf("v16_u8: %x %x %x %x | %x %x %x %x | %x %x %x %x | %x %x %x %x\n",
           v[0], v[1],  v[2],  v[3],  v[4],  v[5],  v[6],  v[7],
           v[8], v[9], v[10], v[11], v[12], v[13], v[14], v[15]);
}

void p128_hex_u16(__m128i in) {
    alignas(16) uint16_t v[8];
    _mm_store_si128((__m128i*)v, in);
    printf("v8_u16: %x %x %x %x,  %x %x %x %x\n", v[0], v[1], v[2], v[3], v[4], v[5], v[6], v[7]);
}

void p128_hex_u32(__m128i in) {
    alignas(16) uint32_t v[4];
    _mm_store_si128((__m128i*)v, in);
    printf("v4_u32: %x %x %x %x\n", v[0], v[1], v[2], v[3]);
}

void p128_hex_u64(__m128i in) {
    alignas(16) unsigned long long v[2];  // uint64_t might give format-string warnings with %llx; it's just long in some ABIs
    _mm_store_si128((__m128i*)v, in);
    printf("v2_u64: %llx %llx\n", v[0], v[1]);
} 
```

如果您需要移植到 C99 或 C++03 或更早版本（即没有 C11/C++11），请删除并[`alignas()`](http://en.cppreference.com/w/cpp/language/alignas)使用`storeu`. `store`或使用`__attribute__((aligned(16)))`or`__declspec( align(16) )`代替。

（如果您使用内在函数编写代码，则应该使用最新的编译器版本。较旧的编译器通常比较旧的编译器生成更好的 asm，包括 SSE/AVX 内在函数。但也许您想将 gcc-6.3 与`-std=gnu++03`C++03一起使用未准备好 C++11 或其他东西的代码库的模式。）

* * *

调用所有 4 个函数的示例输出

```
// source used:
__m128i vec = _mm_setr_epi8(1, 2, 3, 4, 5, 6, 7,
                            8, 9, 10, 11, 12, 13, 14, 15, 16);

// output:

v2_u64: 0x807060504030201 0x100f0e0d0c0b0a09
v4_u32: 0x4030201 0x8070605 0xc0b0a09 0x100f0e0d
v8_u16: 0x201 0x403 0x605 0x807  | 0xa09 0xc0b 0xe0d 0x100f
v16_u8: 0x1 0x2 0x3 0x4 | 0x5 0x6 0x7 0x8 | 0x9 0xa 0xb 0xc | 0xd 0xe 0xf 0x10 
```

如果要使用前导零填充以获得一致的输出宽度，请调整格式字符串。见[`printf(3)`](http://man7.org/linux/man-pages/man3/printf.3.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-24T08:32:37.077

我知道这个问题被标记为 C，但在寻找相同问题的 C++ 解决方案时，它也是最好的搜索结果。

所以，这可能是一个 C++ 实现：

```
#include <string>
#include <cstring>
#include <sstream>

#if defined(__SSE2__)
template <typename T>
std::string __m128i_toString(const __m128i var) {
    std::stringstream sstr;
    T values[16/sizeof(T)];
    std::memcpy(values,&var,sizeof(values)); //See discussion below
    if (sizeof(T) == 1) {
        for (unsigned int i = 0; i < sizeof(__m128i); i++) { //C++11: Range for also possible
            sstr << (int) values[i] << " ";
        }
    } else {
        for (unsigned int i = 0; i < sizeof(__m128i) / sizeof(T); i++) { //C++11: Range for also possible
            sstr << values[i] << " ";
        }
    }
    return sstr.str();
}
#endif 
```

用法：

```
#include <iostream>
[..]
__m128i x
[..]
std::cout << __m128i_toString<uint8_t>(x) << std::endl;
std::cout << __m128i_toString<uint16_t>(x) << std::endl;
std::cout << __m128i_toString<uint32_t>(x) << std::endl;
std::cout << __m128i_toString<uint64_t>(x) << std::endl; 
```

结果：

```
141 114 0 0 0 0 0 0 151 104 0 0 0 0 0 0
29325 0 0 0 26775 0 0 0
29325 0 26775 0
29325 26775 
```

注意：有一种简单的方法可以避免`if (size(T)==1)`，请参阅[https://stackoverflow.com/a/28414758/2436175](https://stackoverflow.com/a/28414758/2436175)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-25T01:57:20.430

```
#include<stdio.h>
#include<emmintrin.h>
int main()
{
    __m128i a = _mm_set_epi32(1,2,3,4);
    __m128i b = _mm_set_epi32(1,2,3,4);
    __m128i c;

    const int32_t* q; 
    //add a pointer 
    c = _mm_add_epi32(a,b);

    q = (const int32_t*) &c;
    printf("%d\n",q[2]);
    //printf("%d\n",c[2]);
    return 0;
} 
```

试试这个代码。

# python - numpy中的局部线性逼近

> ID：13257167
> 
> 赞同：2
> 
> 时间：2012-11-06T18:34:42.127
> 
> 标签：python, numpy, interpolation

我有一些数据，对于向量中的每个条目，`x`向量中都有一个相应的条目。此外，数据不是均匀分布的。`y``x``y``x`

我想在`x`样本之间进行插值以获得均匀的`x`尺寸间距，并逼近相应的`y`值。在**numpy**中，`interp1d`似乎是一个自然的解决方案，但我的问题有一个警告：`x`值不是单调递增的（因为两者`x`都是`y`时间的函数）。因此，该`interp1d`函数和 interpolate 模块中的其他函数在那些`x`反转方向的点上给出了奇怪的结果。

我真正想做的只是在每组两个相邻`x`点之间拟合一条直线，然后根据这个非常局部的近似值进行插值。**在numpy**中是否有执行此操作的功能，还是我必须自己安装一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:50:24.210

Could you sort your xy pairs and then use interp1d? Something like this?

```
import sort
xy = zip(x,y)
new_xy = sorted(xy, key=lambda xy: xy[0])
x = new_xy[:,0]
y = new_xy[:,1] 
```

Now your x's are monotonically increasing and the relationships have been preserved.

# c++ - sscanf 多输入

> ID：13257170
> 
> 赞同：-4
> 
> 时间：2012-11-06T18:34:53.513
> 
> 标签：c++, c, input, scanf

我有一个输入字符串，我需要对其进行解析以获取 4 到 16 个变量。使用 sscanf 我可以获得前几个变量，但其余的显示为 0。我需要做什么才能获得其余的？

行格式：COMMAND [1 - 16 个浮点变量，以空格分隔]

该行来自使用以下内容的文件：

fgets（行，20，文件）；

sscanf(line, "%s", 参数);

字符串parString（参数）；

if(parString == "NEAR"){

```
 sscanf(line, "%s %f", param, &np);
      printf("%s %f\n", param, np); 
```

}...

根据该行中的第一个单词，我知道在这种情况下我需要读取多少个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:46:13.583

C 中的一种方法是使用[**strtok()**](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtok_r.html)。

```
char *p = strtok(str, " ");

while(p)
{
// Store each string 
// OR convert it to integer using strtol() if an intger was expected
p = strtok(NULL, " ");
} 
```

当没有更多值可以读取时，循环将终止`str`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:39:18.433

使用 a 会更好地完成此任务，`std::istringstream`因为它会记住您到目前为止所读到的位置。所以你可以写这样的代码

```
#include <sstream>

std::istringstream input("SPHERE s3 -4 2 -10 2 2 1 0 0 0.5 0 0 1 0 1000");
int var1, var2, var3, var4, var5, var6;
// get first four variables
input >> var1 >> var2 >> var3 >> var4;
if (something or other)
{
    // get the next two variables
    input >> var5 >> var6;
} 
```

反正是这样的。我相信你明白了。

# c# - 下拉列表的选定值在模板字段中未更改

> ID：13257173
> 
> 赞同：0
> 
> 时间：2012-11-06T18:34:58.880
> 
> 标签：c#, asp.net, gridview

我在模板字段中有一个下拉列表，它在加载时选择的值设置为 gridview 中的另一个字段。在 rowupdating 事件中，下拉菜单返回到初始选定值并且不保留新值。我有填充网格的方法，该方法包含在 page_load 事件的 if this.page.IsPostBack 中。如何在 rowupdating 事件期间绑定控件的新选定值并忽略它的初始数据绑定？

我也将自动回发属性设置为 true。

这是 rowupdating 事件（我实际上是插入到另一个表中而不是更新这个网格）

```
protected void grd_add_bins__RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            GridViewRow row = (GridViewRow)grd_add_bins.Rows[e.RowIndex];
            //int id = Int32.Parse(grdBins.DataKeys[e.RowIndex].Value.ToString());

            Label room1 = (Label)row.FindControl("grd_add_room");
            Label grower1 = (Label)row.FindControl("grd_add_grower_id");
            TextBox bins1 = (TextBox)row.FindControl("grd_add_txtbins_to_pack");
            DropDownList packas1 = (DropDownList)row.FindControl("grd_add_ddl_pack_as");
            TextBox block1 = (TextBox)row.FindControl("grd_add_txt_block");
            Label pool1 = (Label)row.FindControl("grd_add_pool");

            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "insert into t_run_schedule_lots  " +
                              "(record_key,room_id,grower_id,block_id,pool_id,total_bins,pack_as) " +
                              "values (@rec_id,@room,@grower,@block,@pool,@bins,@pack_as)";

            cmd.Parameters.Add("@rec_id", SqlDbType.VarChar).Value = lblRec_key.Text;
            cmd.Parameters.Add("@room", SqlDbType.VarChar).Value = room1.Text;
            cmd.Parameters.Add("@grower", SqlDbType.VarChar).Value = grower1.Text;
            cmd.Parameters.Add("@bins", SqlDbType.Int).Value = Convert.ToInt32(bins1.Text);
            cmd.Parameters.Add("@pack_as", SqlDbType.VarChar).Value = packas1.Text;
            cmd.Parameters.Add("@block", SqlDbType.VarChar).Value = block1.Text;
            cmd.Parameters.Add("@pool", SqlDbType.VarChar).Value = pool1.Text;

            cmd.CommandType = CommandType.Text;
            cmd.Connection = this.sqlConnection1;
            this.sqlConnection1.Open();
            // execute insert statement
            cmd.ExecuteNonQuery();
            this.sqlConnection1.Close();

            fill_grid();<-- fills other grid that shows the result of the insert
            fill_bins_grid();<-- fills this grid
            //Reset the edit index.
            grd_add_bins.EditIndex = -1;
            //Bind data to the GridView control.
            grd_add_bins.DataBind();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:41:09.000

您需要一个 OnSelectedIndexChanged 方法。

# ruby-on-rails - 嵌套资源 - 控制器也按 current_user 过滤

> ID：13257174
> 
> 赞同：0
> 
> 时间：2012-11-06T18:35:00.817
> 
> 标签：ruby-on-rails

感谢另一个问题的一些帮助，我现在有一个嵌套资源设置，它几乎可以按照我需要的方式工作。这是关于控制器的后续问题。

费用既有用户，也有他们所属的项目。

我想访问/projects/5/expenses，并查看该项目的所有费用列表（正在运行），但它对当前登录的用户也很敏感，所以他们只能看到自己的花费。

首先是模型：

```
class Expense < ActiveRecord::Base
  attr_accessible :amount, :project_id, :user_id

  belongs_to :project
  belongs_to :user

end 
```

其他每个模型都有“has_many :expenses”，以完成关系。

所以我的路线看起来像：

```
 resources :projects do
    resources :expenses
  end 
```

和

```
class ExpensesController < ApplicationController

    def index
      @user = current_user  
      @project = Project.find(params[:project_id])
      @expense_list = @project.expenses.all  
end 
```

如何通过仅显示 current_user 的费用来进一步过滤我的@expense_list？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:47:41.873

You need a an additional condition to query the expenses based on the user that they belong to. I would suggest that you create a scope in your Expense model

```
scope :for_user, lambda{ |user| 
      where( :user_id => user.id )
   } 
```

And you can do this in the controller:

```
@expense_list = @project.expenses.for_user(current_user).all 
```

# java - 添加滚动背景更改事件

> ID：13257175
> 
> 赞同：-1
> 
> 时间：2012-11-06T18:35:01.023
> 
> 标签：java, android

> **可能重复：**
> [ListView 背景滚动数据](https://stackoverflow.com/questions/8278623/listview-background-scroll-with-data)

我想让我的背景在我向下滚动列表视图时重复，以使列表看起来像所有东西都在同时移动。有人可以指导我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:59:02.080

我会尝试以下方法：

> *   添加滚动监听器
> *   计算滚动的位置
> *   将图像裁剪到滚动位置
> *   用drawable填充背景的一部分，它是图像的一部分

# python - python中的迭代消耗了整个内存-错误的代码？

> ID：13257179
> 
> 赞同：1
> 
> 时间：2012-11-06T18:35:20.417
> 
> 标签：python, memory, sage

我在 Sage（一个用 python 编写的计算机代数系统，您可以在脚本中使用常规 python 语法）编写了一些非常简单的试错代码。这个小代码片段创建了一个多项式并使用系数进行了一些计算，特别是它确定了系数中三个表达式生成的理想值的 Groebner 基。

问题是：这个程序继续运行并吃掉我所有的内存，直到它被内核杀死。每次迭代只消耗大约 200kB，但这个内存永远不会再被释放。

这是代码。细节不是那么重要且非常庞大，因此省略了：

```
R = PolynomialRing(QQ, 2, 'bc', order='lex')
expr1, expr2, expr3 = ...

for i in range (0,50):
    for j in range(i+1,50):
        for k in range(j+1,50):
            for l in range(k+1,50):
                for m in range(l+1,50):
                    for n in range(m+1,50):
                        poly = (x-i)*(x-j)*(x-k)*(x-l)*(x-m)*(x-n)
                        r = poly.coeffs()

                        p1 = expr1.substitute(r...)
                        p2 = expr2.substitute(r...)
                        p3 = expr3.substitute(r...)

                        I = (p1, p2, p3)*R
                        B = I.groebner_basis() 
```

据我了解python的内存管理，循环体中的变量经常被释放。现在，它可能是编程问题、内部 python 问题或 Sage 例程中的某些问题。我不知道。你能发现我的代码有问题还是其他问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:52:06.823

问题似乎不是您的循环（在 python2.7、OS-X 10.5.8 中）：

```
a = 0
for i in range (0,50):
    for j in range(i+1,50):
        for k in range(j+1,50):
            for l in range(k+1,50):
                for m in range(l+1,50):
                    for n in range(m+1,50):
                        a += 1

print( a ) 
```

这在 python2.x 和 python3.x 上都需要很少的额外内存。

而且运行起来也不需要那么长时间：

```
time python test.py
15890700

real   0m6.015s
user   0m5.940s
sys    0m0.032s 
```

也许在运行时有些时髦`sage`？或者，也许是循环中的其他东西导致了问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T17:32:09.767

该错误的根源可能是多元多项式的调用方法。像这样无辜的东西：

```
` for i in xrange(really_big_number):
    polynomial(1,0,0,0)==0 ` 
```

会爆炸。

这可能发生在 `p1 = expr1.substitute(r...)`Groebner 基础的算法中或内部。

# ruby-on-rails - 如何包含和使用另一个文件中的 proc？

> ID：13257185
> 
> 赞同：0
> 
> 时间：2012-11-06T18:35:27.387
> 
> 标签：ruby-on-rails, rails-admin

我正在使用 rails_admin 并且如何使用 rails_admin 配置模型的选项似乎有一个 rails_admin.rb 配置文件（但是这个文件会很大，每次更改后我都必须重新启动服务器）：

```
RailsAdmin.config do |config|
   config.model ModelName do
       .. 
```

或在每个模型中包含一个配置块：

```
 class ModelName
     rails_admin do
         .. 
```

但我宁愿在模型中没有配置块，因为这些块变得非常长。

所以我最初尝试从模型的每个配置块创建 mixins：

```
 module ModelNameAdmin
      rails_admin do
          ... 
```

这不起作用，因为它无法识别 rails_admin。

这样做也不起作用：

```
 module ModelNameAdmin
     RailsAdmin.config do |config|
         config.model ModelName do 
```

但这不起作用，因为显然 RailsAdmin 配置不能被多次调用。

所以现在我想做的只是有一个定义了 Proc 的 lib 文件，我可以在每个模型中包含和使用它。就像：

```
 model ModelName
       require('./lib/model_name_admin')

       rails_admin do
            @model_name_admin
       end 
```

在 ./lib/model_name_admin 文件中有：

```
 @model_name_admin = Proc.new
       rails_admin do
           .. 
```

但这不起作用。我认为我没有正确使用 proc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:16:39.070

用你的模块试试这个模式：

```
module ModelNameAdmin
  def self.included(base)
    base.class_eval do
      rails_admin do
        #...
      end
    end
  end
end 
```

`class_eval`只要模块包含在类中，就会执行其中的块。

# sql-server - 在 SQLServer 中创建存储过程时出错

> ID：13257186
> 
> 赞同：0
> 
> 时间：2012-11-06T18:35:29.477
> 
> 标签：sql-server, stored-procedures

这是我试图创建的存储过程：

```
CREATE PROCEDURE [cih_owner].[UpdateDisplayOrder]
    @CbpTableName varchar (21), 
    @CbpObjId int,
    @CbpId int,
    @DisplayOrder int
AS
BEGIN
    IF (@CbpTableName = "CbpActivity")
    BEGIN
        UPDATE [cih_owner].[CbpActivity] SET DisplayOrder = @DisplayOrder WHERE Id = @CbpObjId AND CbpId = @CbpId
        ;
    END
END
GO 
```

然而，一行写着： `(@CbpTableName = "CbpActivity")` 我得到 `"CbpActivity"` 了错误 下面的波浪线`Invalid column name 'CbpActivity'`

我要做的就是比较我发送到存储过程的字符串。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:39:10.717

您需要对字符串文字使用撇号而不是引号：

```
IF (@CbpTableName = 'CbpActivity') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:39:47.497

您是否尝试过像这样修改`"`for `'`：

```
CREATE PROCEDURE [cih_owner].[UpdateDisplayOrder]
    @CbpTableName varchar (21), 
    @CbpObjId int,
    @CbpId int,
    @DisplayOrder int
AS
BEGIN
    IF (@CbpTableName = 'CbpActivity')
    BEGIN
        UPDATE [cih_owner].[CbpActivity] SET DisplayOrder = @DisplayOrder WHERE Id = @CbpObjId AND CbpId = @CbpId
        GO
    END
END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:39:49.810

你应该使用单引号

```
IF (@CbpTableName = 'CbpActivity') 
```

字符串在 SQL 中用单引号括起来

# python - Python、Django 和平面页面

> ID：13257188
> 
> 赞同：2
> 
> 时间：2012-11-06T18:35:44.947
> 
> 标签：python, django

我正在尝试使用 Django 并添加一个平面页面。

/admin/flatpages/flatpage/add/ 处的 ValueError

不能使用 None 作为查询值

```
Request Method:     POST
Request URL:    http://localhost:8000/admin/flatpages/flatpage/add/
Django Version:     1.4.2
Exception Type:     ValueError
Exception Value: 
```

不能使用 None 作为查询值

```
Exception Location:     C:\Python27\lib\site-packages\django\db\models\sql\query.py in add_filter, line 1095
Python Executable:  C:\Python27\python.exe
Python Version:     2.7.3
Python Path:    

['C:\\Users\\ivo\\Desktop\\eclipse-jee-indigo\\workspace\\blog',
 'C:\\Users\\ivo\\Desktop\\eclipse-jee-indigo\\workspace\\blog',
...
 'C:\\Python27\\lib\\site-packages\\Pythonwin'] 
```

如何摆脱它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:04:54.417

这似乎是 Django 1.4 中的一个错误。如果您尝试保存平面页面而不选择值，则会收到错误`sites`

[https://code.djangoproject.com/ticket/18234](https://code.djangoproject.com/ticket/18234)

它已为即将到来的 Django 1.5 修复。对于 Django 1.4，您可以通过为您的平面页面指定一个站点来避免该问题。

# ruby - 使用 rvm、rubygems 和 bundler

> ID：13257191
> 
> 赞同：1
> 
> 时间：2012-11-06T18:35:53.370
> 
> 标签：ruby, gem, rvm, bundler

所以，我过去做过很多 Rails 编程，现在我只想将 Ruby 与 RVM 和 Bundler 以及其他一些 gem 一起使用。但是在我完成所有设置后，我需要 gem想在这个项目中使用并得到以下LoadError：

```
.rvm/../custom_require.rb:36:in `require': cannot load such file -- upnp/ssdp (LoadError) 
```

我正在使用 Ruby 1.9.3

我有以下文件：

```
upnp
- Gemfile
- upnp.rb 
```

比在 Gemfile 中：

```
# Gemfile

source "http://rubygems.org"

gem "upnp", git: "https://github.com/turboladen/upnp.git" 
```

和项目主文件：

```
# upnp.rb
require 'rubygems'
require 'upnp/ssdp'

# Search for all devices (do an M-SEARCH with the ST header set to 'ssdp:all')
all_devices = UPnP::SSDP.search

puts all_devices 
```

现在，在使用 gemset 设置 RVM 并捆绑所有内容后，当我运行时：

```
ruby upnp.rb 
```

我收到上面提到的这个错误..

我已经查看了这个 gem 的 Github 页面，它有一个`lib`文件夹`upnp/ssdp.rb`

所以应该不错吧？

我真的不知道如何调试这种东西！

有人可以阐明这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:06:45.443

将其包装在对`bundle exec`. 以下是 Ruby 1.93p194

```
$ bundle exec ruby upnp.rb 
D, [2012-11-06 11:05:06 #48555] DEBUG -- : Sent datagram search:
D, [2012-11-06 11:05:06 #48555] DEBUG -- : M-SEARCH * HTTP/1.1 
```

我找不到参考，但 rvm/ruby 在查找“已安装 git”的 ruby​​gems 时遇到问题。谷歌搜索可能会出现官方答案。

# c# - 我将如何使用 moq 来测试 MongoDB 服务层？

> ID：13257198
> 
> 赞同：11
> 
> 时间：2012-11-06T18:36:31.943
> 
> 标签：c#, mongodb, moq

我的应用程序和 mongo 数据库之间有一个服务层。

我正在尝试使用 moq 构建一个单元测试我对 moq 很陌生，所以我从我认为是微不足道的测试开始。

测试代码：

```
 public List<BsonDocument> GetAllSettings()
    {
        var collection = MongoDatabase.GetCollection<BsonDocument>("Settings");
        var query = from e in collection.AsQueryable()
                    select e;

        var settings = query.ToList();
        return settings;
    } 
```

其中： Settings 是一个集合 MongoDatabase 是一个 MongoDBDriver.MongoDatabase

我试过这个作为我的测试：

```
 [Test()]
    public void GetAllSettingsTest()
    {
        //Arrange
        BsonDocument doc01 = new BsonDocument();
        BsonDocument doc02 = new BsonDocument();

        var mongoDatabase = new Mock<MongoDatabase>();
        var collection = new Mock<MongoCollection<BsonDocument>>();
        mongoDatabase.Setup(f => f.GetCollection(MongoCollection.Settings)).Returns(collection.Object);
        collection.Object.Insert(doc01);
        collection.Object.Insert(doc02);

        ILogger logger = new Logger();
        DatabaseClient.DatabaseClient target = new DatabaseClient.DatabaseClient(logger);
        target.MongoDatabase = mongoDatabase.Object;

        MongoCursor<BsonDocument> cursor = collection.Object.FindAllAs<BsonDocument>();

        List<BsonDocument> expected = cursor.ToList();
        List<BsonDocument> actual;

        //Act
        actual = target.GetAllSettings();

        //Assert
        Assert.AreEqual(expected, actual);
    } 
```

我在以下位置收到“找不到无参数构造函数”的错误：

mongoDatabase.Setup(f => f.GetCollection(MongoCollections.Settings)).Returns(collection.Object);

该错误指的是 MongoCollection 对象。我不认为它有一个构造函数。

我该怎么做才能让我的测试运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T20:12:52.697

这个问题很可能与：[如何模拟 MongoDB 对象来测试我的数据模型？](https://stackoverflow.com/questions/6903532/how-do-i-mock-mongodb-objects-to-test-my-data-models)

无论如何，这是模拟所需的最小起订量配置

```
 var message = string.Empty;

        var serverSettings = new MongoServerSettings()
        {
            GuidRepresentation = MongoDB.Bson.GuidRepresentation.Standard,
            ReadEncoding = new UTF8Encoding(),
            ReadPreference = new ReadPreference(),
            WriteConcern = new WriteConcern(),
            WriteEncoding = new UTF8Encoding()
        };

        var server = new Mock<MongoServer>(serverSettings);
        server.Setup(s => s.Settings).Returns(serverSettings);
        server.Setup(s => s.IsDatabaseNameValid(It.IsAny<string>(), out message)).Returns(true);

        var databaseSettings = new MongoDatabaseSettings()
        {
            GuidRepresentation = MongoDB.Bson.GuidRepresentation.Standard,
            ReadEncoding = new UTF8Encoding(),
            ReadPreference = new ReadPreference(),
            WriteConcern = new WriteConcern(),
            WriteEncoding = new UTF8Encoding()
        };

        var database = new Mock<MongoDatabase>(server.Object, "test", databaseSettings);
        database.Setup(db => db.Settings).Returns(databaseSettings);
        database.Setup(db => db.IsCollectionNameValid(It.IsAny<string>(), out message)).Returns(true);

        var mockedCollection = collection.Object; 
```

无论如何，正如我在链接问题中提到的，当 MongoDriver 的任何内部工作发生变化时，这可能没有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T18:48:14.867

我不熟悉 MongoDbDriver.MongoDatabase，但如果它像我认为的那样工作，那么你不能直接模拟它。您需要抽象 MongoDB 访问代码，并对其进行模拟。那将是一个实际的单元测试。例如

```
public interface IMongoDBRepository
{
   Collection<T> GetCollection<T>(string name) where T BsonDocument;
}

public class MongoDbRepository : IMongoDBRepository
{
   public Collection<T> GetCollection<T>(string name) 
     where T : BsonDocument
   {
      return MongoDatabase.GetCollection<BsonDocument>(name);
   }
} 
```

现在，在您的代码中，您注入一个 IMongoDBRepository（使用您喜欢的任何 DI 方法），您的代码将如下所示：

```
private IMongoDBRepository _mongoDBRepository; //this gets injected
public List<BsonDocument> GetAllSettings()
{
    var collection = _mongoDBRepository.GetCollection<BsonDocument>("Settings");
    var query = from e in collection.AsQueryable()
                select e;

    var settings = query.ToList();
    return settings;
} 
```

最后你的单元测试：

```
[Test()]
public void GetAllSettingsTest()
{
    //Arrange
    BsonDocument doc01 = new BsonDocument();
    BsonDocument doc02 = new BsonDocument();

    var mongoDatabase = new Mock<IMongoDBRepository>();
    var collection = new Mock<MongoCollection<BsonDocument>>();
    mongoDatabase.Setup(f => f.GetCollection(MongoCollection.Settings)).Returns(collection.Object);
    collection.Object.Insert(doc01);
    collection.Object.Insert(doc02);

   //rest of test
} 
```

# opencv - cvBlobsLib 查找重叠的 blob

> ID：13257201
> 
> 赞同：0
> 
> 时间：2012-11-06T18:36:44.877
> 
> 标签：opencv, cvblobslib

是否有可能找出两个斑点是否相互重叠？

我使用两个阈值来分割图像。根据某些属性（紧凑性），如果它们接触，我想再次合并其中的一些 blob。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:17:46.940

我有一个类似的问题。我做了一些图像处理，最终得到了几个轮廓。我创建了边界框，最后得到了一堆，有些是重叠的。为了获得良好的 ROI，必须合并重叠的部分。这是我想出的两个解决方案：

第一种：扫描线算法。您可以在 wikipedia 上阅读此内容，实施起来并不难，但我觉得它有点慢，具体取决于您拥有多少个区域。

第二：这就是我正在使用的。我取出所有的矩形并通过填充它们来构建一个蒙版。这样所有重叠的东西都会自动合并。之后，您可以创建一个凸包或其他东西来获得新的斑点。就我而言，如果这些新的 blob 再次重叠，那没关系，所以这看起来是一个相当快的解决方案。也许会有所帮助。

# video - mediaelementjs - 如何让 wmv 文件播放

> ID：13257202
> 
> 赞同：1
> 
> 时间：2012-11-06T18:36:44.057
> 
> 标签：video, html5-video, wmv

我努力了

```
 <video width="640" height="360" id="player1" >
        <source type="video/x-ms-wmv" src="video/640p.wmv" />
    </video>

    <script>
    $('#player1').mediaelementplayer({
            plugins: ['flash','silverlight'],
            pluginPath: 'video/build/',
            flashName: 'flashmediaelement.swf',
            silverlightName: 'silverlightmediaelement.xap'
        });
    </script> 
```

但是当这呈现出来时，我得到一个下载文件链接。如何让 silverlight 控件触发和播放文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:56:13.890

我找到了答案，结果是当前版本的 mediaelementjs 假定 wmv 文件的 mime 类型为“video/wmv”，“video/x-ms/wmv”mime 类型未被识别为 wmv 文件

# c# - FileSystemWatcher：最大文件夹数

> ID：13257203
> 
> 赞同：0
> 
> 时间：2012-11-06T18:36:51.543
> 
> 标签：c#, filesystemwatcher

我有一个服务器，我的应用程序在其中使用 FileSystemWatcher 来监视文件夹，**例如 e:\A**。在文件夹 A 内，有多达 16,000 个文件夹，每个子文件夹都有许多其他文件夹和文件。

该应用程序在大约 1 小时内崩溃到桌面。当文件夹较少时，该应用程序运行良好。我已将内部缓冲区增加到默认值的两倍。

要监控的文件夹的最大数量是否有限制？或者由于文件夹数量庞大，文件夹本身不稳定？

**更新：** 该应用程序在虚拟机（vmware）上运行。
Windows Server 2008。
双 2.53 Intel Xeon。
4 GB 内存。
袭击。[ 1.3TB，可能会增加。]

# c# - 使用 activationCustomData 参数创建类实例

> ID：13257208
> 
> 赞同：2
> 
> 时间：2012-11-06T18:37:20.723
> 
> 标签：c#, .net, reflection

想要使用激活自定义数据创建一个类的实例，如下所示：

```
var repo = Activator.CreateInstance(Type.GetType(repoFullName),
                new string[] { connectionString }) as IRepository; 
```

如果我没有在 CreateInstance 方法中传递作为字符串数组的第二个参数一切正常，但是使用自定义数据参数方法会引发异常

System.MissingMethodException：找不到类型“Namespase.MockRepository”的构造函数。

实例化类型的公共构造函数

```
public MockRepository(string[] customData) {...} 
```

或者

```
public MockRepository(Object[] customData) {...} 
```

没有改变效果。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:42:48.467

您需要修改构造函数签名，现在您调用它的方式是传递单个字符串/对象而不是数组，因此如果您想在此激活对象视图反射，它无法找到匹配的构造函数方式对象必须具有与调用代码匹配的构造函数。使用对象数组将参数传递给激活的原因是允许根据位置将多个参数传递给构造函数，并且类型必须与定义匹配。

如果你有一个构造函数：

```
public MockRepository(string customData) {...} 
```

它应该正确实例化，也就是说，如果您还计划在不向构造函数传递任何参数的情况下进行实例化，则还需要定义一个无参数构造函数。

# iphone - 通过iPhone浏览wifi硬盘的任何方式

> ID：13257217
> 
> 赞同：1
> 
> 时间：2012-11-06T18:37:45.113
> 
> 标签：iphone, objective-c, ios, ipad, wifi

我有一个 wifi 硬盘，只想通过 wifi 连接并访问我的 iPhone 上的 wifi 硬盘的文件夹和文档，而不使用互联网连接。

我想创建下面提到的类似应用程序 url:-

[http://itunes.apple.com/us/app/goflex-media-seagate-technology/id431912202?mt=8](http://itunes.apple.com/us/app/goflex-media-seagate-technology/id431912202?mt=8)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:38:57.880

根据[GoFlex Satellite™ 用户指南](http://www.seagate.com/files/support/external-products/network/satellite/_shared/docs/goflex-satellite-user-guide-en-us.pdf)，您可以使用网络浏览器浏览高清内容。

您（或您的用户）将不得不手动连接到 GoFlex Satellite WiFi 网络 - 看起来此设备启动了它自己的 AdHoc 网络。很抱歉，不可能从代码中自动化这个过程——至少在不使用私有 API 的情况下是不可能的。

您可以测试它是否像这样工作： - 使用您的 iPhone 连接到 GoFlex Satelliti WiFi 网络 - 在 Safari 中打开 www.goflexsatellite.com

您也可以使用[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)从代码中执行此操作。

`UIWebView`可以在[这里](http://conecode.com/news/2011/05/ios-tutorial-creating-a-web-view-uiwebview/)找到一个很好的使用教程- 只需记住使用 www.goflexsatellite.com 作为目标 URL。

# actionscript-3 - 确保当前焦点不是文本框？

> ID：13257218
> 
> 赞同：0
> 
> 时间：2012-11-06T18:37:48.243
> 
> 标签：actionscript-3, apache-flex, actionscript

我正在开发 Flex 3.2 中的应用程序，我需要能够判断当前焦点是否是文本框。我该怎么做呢？我的应用程序中有多个文本框，因此我无法真正为 focusOut 等设置多个事件处理程序。

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:48:01.990

您可以通过使用该`stage.focus`属性来完成此操作。它拥有任何具有焦点的对象的实例。

因此，在您想要进行检查的任何地方，只需执行以下操作：

```
if(stage.focus is TextField){
    //do whatever you'd like to do
} 
```

我不是真正的 flex 用户，但我很确定文本组件在其中使用 TextFields，并且焦点仍然是 TextField 类。如果我错了，请有人纠正我。

# android - Android - 更改 Holo 主题默认蓝色

> ID：13257219
> 
> 赞同：19
> 
> 时间：2012-11-06T18:37:48.223
> 
> 标签：android, colors, themes, extend

我想通过更改默认蓝色以适合我的公司颜色来自定义 Holo 主题。是否有捷径可寻？或者我必须用蓝色部分重新定义所有组件的样式，例如对话框标题、操作栏底线、按钮、选择器等。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-06T18:47:30.390

除了这个链接，我不能添加任何东西：

[http://android-holo-colors.com/](http://android-holo-colors.com/)

> **Android Holo 颜色生成器**
> 
> Android Holo Colors Generator 允许您使用自己的颜色为您的 Android 应用程序轻松创建 Android 组件，例如 editext 或 spinner。它将生成所有必需的九个补丁资源以及相关的 XML 可绘制对象和样式，您可以将它们直接复制到您的项目中。如果您有任何问题，请参阅常见问题解答或报告问题。

;-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T23:29:48.670

作为 Waza Be 答案的补充，您可能希望[使用它来设置操作栏的样式：](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=example&compat=holo&theme=light&actionbarstyle=solid&backColor=E4E4E4,100&secondaryColor=D6D6D6,100&tertiaryColor=F2F2F2,100&accentColor=33B5E5,100)

> Android 操作栏样式生成器允许您轻松地为您的 Android 应用程序创建简单、有吸引力且无缝的自定义操作栏样式。它将生成所有必需的九个补丁资源以及相关的 XML 可绘制对象和样式，您可以将它们直接复制到您的项目中。

[这个博客有一个关于如何正确使用它的优秀教程。](http://blog.stylingandroid.com/archives/1240)

# java - Gdx exit 关闭整个应用程序 - 如何仅关闭 gdx 框架？

> ID：13257220
> 
> 赞同：2
> 
> 时间：2012-11-06T18:37:48.907
> 
> 标签：java, swing, jframe, libgdx, lwjgl

我有一个游戏编辑器，它可以在单独的窗口中启动正在编辑的游戏（但在同一个虚拟机中）。但是，当游戏关闭时，我想关闭它的 gdx 窗口，而不关闭整个应用程序（即编辑器）。

我目前在托管的 JFrame 中使用以下代码`LwjglApplication`：

```
public void windowClosing(WindowEvent e) {
    System.err.println("Now closing app...");
    Gdx.app.exit();
    System.err.println("App now closed.");
} 
```

这将打印再见，关闭 GDX 窗口，然后继续终止我的 VM。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T03:38:12.323

在桌面（lwjgl 后端）`Gdx.app.exit()`中发布了一个 Runnable，它导致循环`mainLoop`完成并控制掉出该函数的底部（参见[源代码](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-lwjgl/src/com/badlogic/gdx/backends/lwjgl/LwjglApplication.java#L338)）。mainLoop[结束于](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-lwjgl/src/com/badlogic/gdx/backends/lwjgl/LwjglApplication.java#L206)：

```
if (graphics.config.forceExit) System.exit(-1); 
```

`graphics.config`是在[构造函数](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-lwjgl/src/com/badlogic/gdx/backends/lwjgl/LwjglApplication.java#L62)[`LwjglApplicationConfiguration`](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-lwjgl/src/com/badlogic/gdx/backends/lwjgl/LwjglApplicationConfiguration.java#L31)中传递的对象。所以只要设置[`LwjglApplication`](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-lwjgl/src/com/badlogic/gdx/backends/lwjgl/LwjglApplication.java#L62)

```
config.exit = false 
```

在配置对象中（如果您当前没有创建配置对象，您可能需要创建一个并使用不同的构造函数）。您还可以在配置对象中设置其他方便的东西。

（此代码来自 GIT，因此在旧版本的 GDX 或其他后端中情况可能会有所不同。）

# web - 如何使我的网页居中

> ID：13257221
> 
> 赞同：-3
> 
> 时间：2012-11-06T18:37:50.497
> 
> 标签：web, center

[http://pastebin.com/GQ6Q0dti](http://pastebin.com/GQ6Q0dti)

-- 我想将我的网页居中，但我没有找到成功的教程。有人可以帮我解决我的问题，我只想让我的页面居中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:40:02.400

如果你想水平居中+垂直使用`position: absolute;`

[**演示**](http://jsfiddle.net/DRsJK/)

```
.center {
   position: absolute;
   top: 50%;
   left: 50%;
   height: 200px;
   width: 400px;
   margin-top: -100px; /* Half of container height */
   margin-left: -200px; /* Half of container width */
} 
```

如果你只想水平居中它，只需使用它

```
margin: 0 auto;
        ^    ^
       T/B  L/R 
```

只是不要忘记容器的宽度；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:46:44.013

如果你只想做水平居中，最好的方法是不要使用`absolute`位置，使用默认位置并设置`margin:0px auto;`

```
#Table_01 {
    width:792px;
    margin:0px auto;
}
#template {
   height:1584px;
} 
```

# java - 线程局部删除方法

> ID：13257224
> 
> 赞同：5
> 
> 时间：2012-11-06T18:38:04.223
> 
> 标签：java, concurrency

如果您不在服务器环境中部署，是否需要在本地线程上调用 remove，即使应用程序使用缓存线程池？

```
public static ThreadLocal<Integer> i = new ThreadLocal<Integer>(){{
    public Integer initialValue(){return 3;}
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T18:40:38.163

根据[javadoc`ThreadLocal`](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)：

> ...在线程消失后，其所有线程本地实例的副本都将受到垃圾收集...

如果线程可能仍然存在，并且您希望取消引用资源，最好调用`remove()`.

如果要清除它，听起来您可能需要考虑使用简单的局部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:52:09.797

理论上，如果`Thread`和`ThreadLocal`仍然在起作用，则该值将是可以达到的。如果其中任何一个都不可达，理论上，如果没有被引用，则该值是可垃圾回收的。但是，OpenJDK 中有一个错误，这意味着如果该值引用了（令人惊讶的`ThreadLocal`常见）*并且*`Thread`仍在运行，它将泄漏。

所以是的，从某种意义上说，服务器环境并没有什么特别之处。但是，通常在开发过程中重复重新加载代码的情况下，通常`ThreadLocal`可以从值（值到值类到类加载器到所有类）达到-loaded-through-class-loader 到 static-fields-of-那些类到 a `ThreadLocal`)。Java Beans 和 JDBC 的实现可能有类似的问题。

# java - 使用 php 即时创建 JNLP 时出现 icedtea web start 问题

> ID：13257228
> 
> 赞同：1
> 
> 时间：2012-11-06T18:38:32.183
> 
> 标签：java, php, jsp, jnlp

我正在使用 PHP/JSP 即时生成 jnlp 文件。我使用一个 URL www.example.com/start 来读取一个 jnlp 文件，该文件包含一些被动态值替换的标签。它将标记（arg1，arg2）替换为文件中的一些计算值，然后输出下载到用户浏览器上的 jnlp 文件。JNLP 文件包含以下 url 作为代码库中的 href。

test.php?arg1=值&arg2=val2

test.php 文件读取 URI 并再次输出相同的 jnlp 文件。这个文件不计算任何东西。它只是用上面的文件标签替换 URL 中接收到的值。

问题：

当我在浏览器中运行 url www.example.com/start 并使用 javaws 打开 jnlp 时，它工作正常，但如果我使用 firefox 中的默认选项 icedtea 打开 jnlp 文件，则它不起作用并显示 jnlp 读取错误。

在我的调查中，我发现当我们用 icedtea 打开 jnlp 时，它没有通过导致问题的 test.php 中的 ?arg1=value&arg2=val2 。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:47:38.567

我可以确认这个问题，IcedTea`?`在请求 .jar 时会去除所有查询参数（在 .jar 之后的所有内容），而 Sun/Oracle 实现会将它们传递给服务器。我没有挖掘 JNLP 规范来确认这是否是 IcedTea 中的错误。

我们在服务器上使用 URL 重写规则解决了这个问题，该规则将查询参数映射到路径组件。

# ember.js - 加载但不发送嵌入对象

> ID：13257230
> 
> 赞同：0
> 
> 时间：2012-11-06T18:38:52.160
> 
> 标签：ember.js, ember-data

假设您有以下模型：

```
App.Item = DS.Model.extend({
    owner: DS.belongsTo('App.Person', {embedded: true})
}) 
```

这意味着你可以加载这个嵌入的关联，但这也意味着如果你想为一个已经存在的人创建一个新项目，ember-data 还将为每个新项目嵌入 Person 对象。

是否可以让它加载嵌入的对象，但在创建关联时只发送 id？即发送这个：

```
{"item": {"owner_id": 5}} 
```

* * *

**编辑：** 为了澄清，我希望 ember-data 加载嵌入式关系，但如果我设置 {embedded: true} 这个代码：

```
App.Item.createRecord({name: 'Something', owner: App.Person.find(1)});
// And a few moments later when App.Person.find(1) has loaded
App.store.commit() 
```

它将发送以下 json：

```
{ "item": {"name": "Something", owner: { id: 1, name: "whatever" }} 
```

但我想要的是：

```
{ "item": {"name": "Something", owner_id: 1 }} 
```

基本上，如果我设置 embedded = true ember-data 也会在您创建对象时嵌入关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:10:27.567

If I correctly understand your aim, you shouldn't have to specify `{ embedded: true }`. The default ember-data behavior is to be lazy.

It you are using `active_model_serializers` *(which I strongly recommend to you)*, you should declare your server-side serializer as follow:

```
class ItemSerializer < ActiveModel::Serializer
  embed :ids, include: false
  #...
end 
```

# python - 尝试腌制pygame事件对象的Python腌制错误

> ID：13257231
> 
> 赞同：0
> 
> 时间：2012-11-06T18:38:59.087
> 
> 标签：python, python-3.x, pygame, pickle

我正在尝试腌制一个 pygame.event.Event 对象：

```
eventObj= pygame.event.get()[0]
data= pickle.dumps(eventObj) 
```

但我收到此错误：

```
_pickle.PicklingError: Can't pickle <class 'Event'>: attribute lookup builtins.Event failed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:53:11.400

`pygame.event.Event`不能腌制。

您需要单独腌制`eventObj.type`，`eventObj.dict`无论如何，这应该是您从活动中需要的全部。

# objective-c - MPMediaQuery 艺术家查询返回重复项

> ID：13257233
> 
> 赞同：8
> 
> 时间：2012-11-06T18:39:10.843
> 
> 标签：objective-c, ios, mpmediaquery

我在我的应用程序中使用[Apple Media Player Framework](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MediaPlayer_Framework/_index.html)。要获取项目，我正在使用[`MPMediaQuery`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaQuery_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008220)他们文档中描述的。效果很好，但是当使用预定义的查询来检索所有艺术家时，我得到了少数艺术家的重复条目。

有人可以解释为什么有重复吗？我该如何压制他们？

```
NSArray *collections = [[MPMediaQuery artistsQuery] collections]; 
```

*（不，以艺术家的名义，大小写没有任何错别字或差异！）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T08:55:35.273

我注意到只有当有多个艺术家的专辑时才会发生这种情况。

而不是 just `[MPMediaQuery artistQuery]`，以下假装这种行为：

```
MPMediaQuery *artistsQuery = [MPMediaQuery artistsQuery];
artistsQuery.groupingType = MPMediaGroupingAlbumArtist; 
NSArray *collections = [artistQuery collection]; 
```

# streaming - 将网络摄像头流式传输到我的网页

> ID：13257237
> 
> 赞同：-1
> 
> 时间：2012-11-06T18:39:23.530
> 
> 标签：streaming, webcam

我正在尝试构建一个实时显示网络摄像头视频的网页。现在，我没有网络摄像头，所以我得买一个。我不介意它要花多少钱，我只希望它以良好的分辨率（至少 720p）工作。

我不知道我应该购买哪种相机以及哪种编程语言更适合（如果可能的话，我宁愿不使用 Flash）。

你能帮助我吗？

对不起我的英语不好，我正在努力提高;）亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:51:03.627

要在网页中显示，您可以使用`IP-Camera`. 它们的成本略高，但它们可以将图像作为独立的网络节点提供服务。它们还支持语音和实时压缩（H264 和 MPEG4）。

最好的品牌是`Axis`，但有很多选择。

对于 Axis 相机型号，将视图添加到页面就像将此项添加到您的页面一样简单：

```
<img src='http://192.168.1.20/axis-cgi/mjpg/video.cgi'> 
```

它适用于大多数浏览器，而不是 IE。[对于 IE，他们在这里](http://www.axis.com/techsup/cam_servers/tech_notes/live_video_medium.htm)也有支持。

# java - 打包 Java EE 应用程序的正确之处是什么

> ID：13257239
> 
> 赞同：0
> 
> 时间：2012-11-06T18:39:37.517
> 
> 标签：java, jakarta-ee

我正在阅读[使用 GlassFish 3 开始 Java EE 6，](https://rads.stackoverflow.com/amzn/click/com/143022889X)我对打包 Java EE 应用程序的正确性感到困惑。

> EJBs Lite 可以直接打包在war 或jar 文件中。如果您需要使用完整的 EJB 规范（例如，远程接口、JMS、异步调用...），您必须将其打包成 jar，而不是 war。

这是什么意思？如果我在 Glassfish 中部署一个打包为 WAR 的应用程序，它不会给我所有的 Java EE 服务吗？如果是这样，我错过了什么。

我知道 3.1 引入了一个新的配置文件 EJB Lite，它旨在成为完整规范的一个子集，针对不想实现所有内容的实现者，并且您从 3.1 可以将 EJB 打包到 WAR 中并使用指定的服务由 EJB Lite 规范。但是如果你在一个完整的规范容器中部署一个 WAR，它应该给你所有的东西，就像你创建一个 JAR 一样？WAR 不就是 JAR 的另一个名称吗？区别不能在于它是如何打包的，而在于它实际支持什么？

有人可以澄清一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:04:16.117

将 EJB 逻辑 bean 放入 JAR 文件的动机来自于业务逻辑和视图逻辑之间的分离。目前，据我所知，没有必要将所有的 EJB 打包到 JAR 中，然后将这个 JAR 与 WAR 结合到 EAR 中。

但是...由于 EJB 应该只专注于业务逻辑，因此将它们打包在单独的存档中是有意义的。另一方面，WAR 是与向用户显示 GUI 相关的所有内容的存档，包括 JSP、Facelets、图像、CSS 文件和 JavaScript 库。WAR 文件可以在一个文件夹中有一组类`WEB-INF\classes`，以及在`WEB-INF\lib`. 无论如何，WAR 文件不一定是文件。WAR 文件可以成为展开的 WAR，基本上是一个与存档中的结构相同的目录。

其中一个关键方面是类加载器层次结构中的类加载器隔离。WAR 模块可以访问 EJB 归档 (JAR) 中的资源，而 EJB 模块可以引用和访问 EAR 文件本身中的资源（库）。另一个方向，特别是从 EJB 模块访问 WAR 资源，是被禁止的。设计就是这样，因为它可以防止开发人员（在压力下工作）混合这些问题并创建*意大利面条式代码*。业务逻辑应该与视图逻辑分开，因为它可以并且应该被 Java SE 客户端、不同的 Web 模块客户端、JAX-RS 或基于 SOA 的解决方案重用。如果业务逻辑在 JSF 或 Servlet 之间有任何依赖关系，那么在 Java SE 桌面解决方案中使用它们是不可能的。

因此，拥有一个由许多 JAR 和 WAR 文件组成的 EJB 归档结构可能不是必需的，但这是一种最佳实践，并且应该小心并注意违反该规则。

# python - python - matplotlib - 如何指定 x 轴的比例

> ID：13257240
> 
> 赞同：2
> 
> 时间：2012-11-06T18:39:36.870
> 
> 标签：python, matplotlib, scale, scatter-plot

> **可能重复：**
> [Python、Matplotlib、子图：如何设置轴范围？](https://stackoverflow.com/questions/2849286/python-matplotlib-subplot-how-to-set-the-axis-range)

我想为类似于 excel 的散点图指定 x 轴的比例。

例如，我输入 x 轴值如下：

```
x_values = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100] 
```

但是，只出现第一个偶数的数字。

有没有办法让所有数字都出现在 x 轴上？

谢谢，

帕思

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T18:49:07.710

你需要[`matplotlib.pyplot.xticks`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xticks). 在您的示例中：

```
xticks(x_values) 
```

根据您的导入，在函数调用前加上模块名称。

例如，在`ipython --pylab`我输入：

```
In [1]: x_values = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]

In [2]: scatter(x_values, x_values)
Out[2]: <matplotlib.collections.PathCollection at 0x39686d0>

In [3]: xticks(x_values) 
```

并得到

![在此处输入图像描述](../Images/d768452926997b746a412b8883804761.png)

请注意，这会在右侧留下一些空间，因为最初每 20 次刻度最多为 120。要在不知道最大值的情况下每 10 次获得一次，您可以对 进行两次调用`xticks`：

```
xticks(range(0, int(xticks()[0][-1])+1, 10)) 
```

# xmpp - 当两个 Jabber (XMPP) 客户端连接时，只有一个能够接收消息，两个都可以发送

> ID：13257247
> 
> 赞同：4
> 
> 时间：2012-11-06T18:40:18.233
> 
> 标签：xmpp

我有一个 Windows XMPP 客户端 - PSI 和一个 android 客户端 - IMO。我连接到同一个自定义服务器，使用两个不同的资源（桌面上的主机名，不知道 IMO 使用什么作为资源）。当有人向我发送消息时，只有桌面客户端能够接收它。Android客户端只能发送。

在客户端中配置什么才能同时在两个客户端上接收消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:00:14.203

弄清楚了。XMPP 协议具有分配给资源的优先级。[请参阅http://xmpp.org/rfcs/rfc3921.html#rules](http://xmpp.org/rfcs/rfc3921.html#rules)中的 11.1 。有效范围是 -127 .. +128

IMO 发送优先级 1（至少在我的版本中）。将 PSI 中的优先级设置为 -120 使我的电话客户端始终收到消息。我将使用优先级来利用降低优先级的自动离开功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-05T15:36:16.040

如果您在 Openfire 服务器上拥有管理员权限，将系统属性“route.all-resources”设置为“true”应该允许所有连接的客户端接收发送到 Jabber ID 的消息。这在我的情况下有效。

# c# - 重载无效参数

> ID：13257254
> 
> 赞同：0
> 
> 时间：2012-11-06T18:40:48.077
> 
> 标签：c#, forms, overloading

嗨，我是全新的，所以不要对我的菜鸟问题做出严厉的判断，

```
namespace Oef5_3_ShowIncome
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, EventArgs e)
        {
            int YearSalary = Convert.ToInt32(YearSalaryTextBox.Text);
            int numberOfYears = Convert.ToInt32(numberOfYearsTextBox.Text);
            ShowIncome(YearSalary, numberOfYears);
            MessageBox.Show("something something ", Convert.ToString(ShowIncome)));
        }

        private int ShowIncome(int lalala, int dadada)
        {
            int results = lalala * dadada;
            return results;
        }
    }
} 
```

在... MessageBox.Show("某事" Convert.ToString(ShowIncome))); 我收到以下错误：windows.form.messagebox.show(string, string) 的最佳重载方法匹配有一些无效参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:44:10.997

```
private void Button_Click(object sender, EventArgs e)
{
    int YearSalary = Convert.ToInt32(YearSalaryTextBox.Text);
    int numberOfYears = Convert.ToInt32(numberOfYearsTextBox.Text);
    int showInCome = ShowIncome(YearSalary, numberOfYears);
    MessageBox.Show("something something ", showInCome.ToString()));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:48:14.367

在这一行中，您正在调用该方法而不将结果保存到变量中

```
ShowIncome(YearSalary, numberOfYears); 
```

你想做的是这个

```
int result = ShowIncome(YearSalary, numberOfYears); 
```

然后将结果传递给消息框方法

```
MessageBox.Show("something something ", result.ToString())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T18:47:41.990

```
int YearSalary = Convert.ToInt32(YearSalaryTextBox.Text);
        int numberOfYears = Convert.ToInt32(numberOfYearsTextBox.Text);
        ShowIncome(YearSalary, numberOfYears);
        MessageBox.Show("something something ", Convert.ToString(ShowIncome(100000, 5).ToString()))); 
```

因为您在没有传递参数的情况下调用了该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T18:59:06.967

嗯，我相信你把解析器弄糊涂了，它不知道用 ShowIncome 作为参数做什么

```
private void Button_Click(object sender, EventArgs e)
        {
            int YearSalary = Convert.ToInt32(YearSalaryTextBox.Text);
            int numberOfYears = Convert.ToInt32(numberOfYearsTextBox.Text);
            int income = ShowIncome(YearSalary, numberOfYears);
            MessageBox.Show("something something ", Convert.ToString(income));
        } 
```

或者

```
private void Button_Click(object sender, EventArgs e)
        {
            int YearSalary = Convert.ToInt32(YearSalaryTextBox.Text);
            int numberOfYears = Convert.ToInt32(numberOfYearsTextBox.Text);
            MessageBox.Show("something something ", Convert.ToString(ShowIncome(YearSalary, numberOfYears)));
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T18:47:05.577

这是因为您没有将任何参数传递给 ShowIncome，因此您实际上是在尝试在方法组上调用 Convert.ToString。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T19:05:25.273

大家好，我非常感谢你们，如果我再次遇到同样的错误，我学习了 2 种新方法如何绕过该错误，例如使用 ...result.ToString，甚至给出他们自己的论点作为结果。 tostring(1000,500);

但是，如果我创建一个变量，例如 int something = ShowIncome(YearSalary, numberOfYears); ，我已经看到了我的问题的解决方案。

MessageBox.Show("yay random words laalala " + Convert.ToString(something));

然后它以某种方式起作用，我希望我知道为什么

# c++ - C - 枚举索引数组的优缺点

> ID：13257260
> 
> 赞同：6
> 
> 时间：2012-11-06T18:41:19.110
> 
> 标签：c++, c, arrays, enums, indexing

以我的经验，现实世界很少提供非负整数的索引。许多事情甚至没有用数字表示。并且许多具有数字表示索引的事物的索引不是从 0 开始的。那么为什么我们仍然局限于整数索引数组呢？

也许我错了，但似乎枚举索引数组通常比数字索引数组更合适（因为枚举通常更准确，“真实世界”表示）。虽然枚举通常可以相对容易地转换为 C 风格的数组索引......

```
enum Weekday = {
    SUNDAY,
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY
}

// hopefully C doesn't allow nonsequential enum values; else pray to God
// no one does something like setting Sunday = 4 and Saturday = 4096
int numberOfDays = Saturday-Sunday+1;

int hoursWorkedPerDay[numberOfDays];

hoursWorkedPerDay[(int)SUNDAY] = 0;
hoursWorkedPerDay[(int)MONDAY] = 8;
hoursWorkedPerDay[(int)TUESDAY] = 10;
hoursWorkedPerDay[(int)WEDNESDAY] = 6;
hoursWorkedPerDay[(int)THURSDAY] = 8;
hoursWorkedPerDay[(int)FRIDAY] = 8;
hoursWorkedPerDay[(int)SATURDAY] = 0; 
```

...我们仍然需要保持枚举数量和数组大小之间的一致性（但是，这不是一个糟糕的解决方案，因为“SUNDAY”没有比 0 更有效的整数映射），更重要的是，任何可以转换为 int 的东西仍然可以放入索引中来操作数组：

```
// continued from above
void resetHours (void) {
    int i = 0;
    int hours = 0;
    for (i = 0; i<numberOfDays; i++) {
        hoursWorkedPerDay[hours] = i;
        // oops, should have been: "...[i] = hours;"
        // an enum-indexed implementation would have caught this
        // during compilation
    }
} 
```

此外，从 enum 到 int 的整个转换是一整层的复杂性，这似乎是不必要的。

有人可以解释一下枚举索引是否有效，并列出每种方法的优缺点吗？如果存在这样的信息，为什么 C 标准中缺少一个看似有用的特性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:49:09.563

如果你真的想使用枚举作为索引，你应该明确声明整数值。

另一方面，我个人更喜欢s.th。类型安全（即没有丑陋的演员，甚至可能没有必要），例如：

```
std::map<Weekday,int> hoursWorkedPerDay; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:49:07.760

```
Sunday =0 //by default, if you won't mention explicit value then it would take 0 
```

和`Saturday = 6 // as in your example`

所以

```
int numberOfDays = Saturday-Sunday; // which is 6 

int hoursWorkedPerDay[numberOfDays]; 
```

数组将只有 6 个位置来保存该值。

```
hoursWorkedPerDay[(int)SUNDAY] = 0;
hoursWorkedPerDay[(int)MONDAY] = 8;
hoursWorkedPerDay[(int)TUESDAY] = 10;
hoursWorkedPerDay[(int)WEDNESDAY] = 6;
hoursWorkedPerDay[(int)THURSDAY] = 8;
hoursWorkedPerDay[(int)FRIDAY] = 8;
hoursWorkedPerDay[(int)SATURDAY] = 0; 
```

访问数组索引（即 6）是未定义的行为

# ruby-on-rails - 为什么在 mysql 事务未完成时调用 Model.create!() 会返回？

> ID：13257263
> 
> 赞同：0
> 
> 时间：2012-11-06T18:41:37.690
> 
> 标签：ruby-on-rails, activerecord

我观看了一个视频，其中他们的注册页面引起了问题，因为调用：

```
person = Person.create!(params) 
```

当事实上 mysql 尚未完成事务时返回。

为什么会在交易前返回？

视频：[http ://cdn.confreaks.com/system/assets/datas/5097/original/1119-gogaruco2012-services-scale-backgrounding-and-wtf-is-going-on-here-small.mp4?1349207263](http://cdn.confreaks.com/system/assets/datas/5097/original/1119-gogaruco2012-services-scale-backgrounding-and-wtf-is-going-on-here-small.mp4?1349207263)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:56:18.853

我没有看视频，但据我所知，交易、通话`create`或`find`其他任何事情都不属于任何交易！

您需要自己在代码中定义事务：

```
Person.transaction do
   [...]
end 
```

这里有一些关于如何在 Rails 中处理事务的好例子：http: [//markdaggett.com/blog/2011/12/01/transactions-in-rails/](http://markdaggett.com/blog/2011/12/01/transactions-in-rails/)

# perl - PERL SFTP 使用系统，无法安装 SFTP 模块

> ID：13257264
> 
> 赞同：2
> 
> 时间：2012-11-06T18:41:39.100
> 
> 标签：perl, sftp

我对 perl 和 stackoverflow 有点陌生。如果我可以使用更熟悉的语言，我会，不幸的是，由于某些情况我不能。在此先感谢您的帮助。

未安装的模块：Net::SFTP、WWW::CURL、Net::SSH2、Net::SFTP::Foriegn 已安装的模块：Net::FTP

我无法安装模块。

无法使用 Net::FTP 尝试了默认端口和端口 22，带有用户名和密码。尝试连接时，我从另一个盒子的日志中得到的只是“没有收到来自 xx.xx.xx.xx 的标识字符串”也无法在命令行中使用 FTP，超时。

`$ftp = Net::FTP->new($box,Port=>22, Debug => 0)
or die print "Error: Cannot connect";
$ftp->login($userBox,$passBox)
or die print "Error: Cannot login";
$ftp->cwd()
or die print "Error: Cannot change to Root";
$ftp->cwd($dir)
or die print "Error: Cannot change to selected directory";
if($copyfile ne "" && $dir ne "")
{
$ftp->put($copyfile, $copyfile);
}
$ftp->quit();`

我可以通过 linux 命令行手动使用 SFTP，而不是 FTP，所以我一直在尝试使用系统命令将 SFTP 导入另一个框。另一个盒子的日志只是说“连接由 xx.xx.xx.xx 关闭”

`system('sftp '.$userBox.'@'.$box.' ENDOFINPUT'
.$passBox.'ENDOFINPUT
cd ../../../
put '.$filename.' '.$dir.'
exit
ENDOFINPUT');`

如果有人知道如何帮助我解决我的问题，那就太好了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:14:30.023

让我们从另一个方向来解决这个问题......当你说你“无法安装模块”时，仅仅是因为你没有 root 权限吗？如果是这种情况，您可以改为[在本地用户帐户下安装它们。](https://stackoverflow.com/questions/3735836/how-can-i-install-perl-modules-without-root-privileges)

如果机器没有互联网连接，甚至无法在本地安装它们，您可以使用相同的技术将它们安装在不同的机器上，然后 gzip 您安装它们的整个本地目录并将它们复制到目标机器，然后添加一个“ [use lib](http://perldoc.perl.org/lib.html) ”语句以从您的脚本中获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:46:39.723

您确定 $passBox 等效项在 shell 上有效吗？

您应该能够使用密钥对设置无密码连接，这将使该问题很快消失。

# assembly - ARM 汇编 - 替换字符串上的字符的代码

> ID：13257266
> 
> 赞同：1
> 
> 时间：2012-11-06T18:41:46.060
> 
> 标签：assembly, arm, inline-assembly

我有这个 C 驱动程序

```
#include <stdlib.h>
#include <stdio.h>

extern void subs( char *string, char this_c, char that_cr ) ;

int main(int argc, char *argv[] )
{
    char this_c= 'e' ;  
    char that_c = 'X' ;
    char orgstr[] = "sir sid easily teases sea sick seals" ;

    subs( orgstr, this_c, that_c ) ;
    printf( "Changed string: %s\n", orgstr ) ;

    exit( 0 ) ;
} 
```

我必须制作一个将字符串上的'e'更改为'x'的手臂程序，到目前为止这就是我所拥有的\

```
.global subs

subs:   
    stmfd sp!, {v1-v6, lr} //string entry
    mov v1, #0 //set index to 0
    mov v2, #0 // set count to 0

loop :
    ldrb    v3, [a1,v1] // get the first char
    cmp     a2,v3    //compare char if its the same to the one that has to b chang
    mov v3, a3   // change the character for the new character
    addeq   v2, v2, #1 //increment count
    add     v1, v1, #1 // increment index
    cmp v3,#0   //end of string
    bne     loop
    mov     a1,v2 //return value

    ldmfd   sp!, {v1-v6, pc}
.end 
```

这给了我一个无限循环，我被卡住了，谁能帮我找出问题所在？

* * *

这就是我到目前为止所拥有的，

```
.global subs

subs:   
    stmfd sp!, {v1-v6, lr} //string entry
    mov v1, #0 //set index to 0
    mov v2, #0 // set count to 0

loop :
    ldrb    v3, [a1,v1] // get the first char
    cmp     a2,v3    //compare char if its the same to the one that has to b chang
    moveq   v3, a3   // change the character for the new character
    addeq   v2, v2, #1 //increment count
    add     v1, v1, #1 // increment index
    cmp v3,#0   //end of string
    bne     loop
    mov     a1,v2 //return value

    ldmfd   sp!, {v1-v6, pc}
.end 
```

它运行但字符永远不会改变......，输出和结束与输入相同，由于某种原因，a2注册表为空......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:20:53.257

您的代码有几个问题。这是做功课吗？

`mov v3, a3`无条件地用新字符覆盖`v3`，并且永远不会写回内存（如 Pete Fordham 所说）。由于您`v3`在检查字符串结尾时也使用，因此您将永远不会终止循环，因为您刚刚更改`v3`为`a3`. 您还为声明为的函数设置了返回值，`void`如果您尝试在 C 代码中使用返回值，则会出现问题。

我可能会做这样的事情（未经测试，但应该给你一些想法）：

```
loop:
    ldrb v3, [a1], #1
    cmp a2, v3
    strbeq a2, [a1, #-1]
    cmp v3, #0
    bne loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:04:43.450

这条线是完全错误的

```
mov v3, a3   // change the character for the new character 
```

这应该是一个有条件的存储回字符串。

```
streqb a3, [a1, v1] 
```

# java - 如何使用 java servlet、jquery、json 对象通过 ajax 调用从数据库结果中创建自动完成文本框

> ID：13257268
> 
> 赞同：1
> 
> 时间：2012-11-06T18:41:49.243
> 
> 标签：java, jquery, html, ajax, json

我尝试了不同的事情，但我无法做到这一点。我对 jquery json 和 ajax 很陌生。我编写了一个连接到我的数据库并从表中检索用户 ID 的 servlet。我写了一个 jsp，它有一个文本框，它接受输入文本并在每次按键时优化结果我想通过从我的 servlet 发送 json 对象在使用 jquery ajax 的 html 页面中做到这一点。有人可以给我一个这个场景的例子。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:58:08.330

[http://jsfiddle.net/tAjNz/](http://jsfiddle.net/tAjNz/)

```
<input type="text" />
<select id="autoPop" multiselect="true"></select>
<script>
// define a data source (ajax or on page load);
myJson = [{value:1,text:'Item One'},{value:1,text:'Item Two'},{value:1,text:'Item Three'},{value:1,text:'Item Four'}];

$('input[type="text"]').keyup(function(){
    //Optionally update the data source when a user starts typing or use the predefined source.
    //Populate the select list
    $sel = $('select');
    $sel.html('');
    var $this = $(this);
    $.each(myJson,function(k,v){
        if(v.text.toLowerCase().indexOf($this.val().toLowerCase()) > -1) {                    
            $sel.append('<option value="' + v.value+ '">'+ v.text+'</option>');           
                }
    });
});
</script> 
```

# ruby-on-rails - 设计登录时重置会话

> ID：13257269
> 
> 赞同：1
> 
> 时间：2012-11-06T18:41:53.977
> 
> 标签：ruby-on-rails, session, login, devise

我的`application_controller.rb`文件中定义了以下内容：

```
def redirect_back_or(default)
  redirect_to(session[:return_to] || default)
  session.delete(:return_to)
end

def store_location
  session[:return_to] = request.url
end

def after_sign_in_path_for(resource)
  r = session[:return_to] || user_root_url
  session.delete(:return_to)
  r
end 
```

我正在尝试将用户送回他们在登录之前来自的地方，或者，如果没有保存位置，则将他们发送到他们的根页面。

我在我的一个控制器中调用它：

```
if current_user.nil?
  store_location
  redirect_to home_login_url, alert: "You must be logged in to purchase subscriptions"
  return
end 
```

我逐步通过调试器并观察了`session[:return_to]`设置，但是在我登录并`after_sign_in_path_for(resource)`调用之后，`session[:return_to]`它是空的。

如何`return_to`在登录中保留变量？

我正在运行 Rails 3.2.1 和 Devise 2.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:14:25.907

原来我在我的哈希中覆盖了 Devise 的条目。我认为`:return_to`这是 Devise 使用的。我最终以完全不同的方式实现了这一点，但是如果您有问题，请查找名称冲突

# java - if(x!=y) 与 if(x==y)

> ID：13257272
> 
> 赞同：23
> 
> 时间：2012-11-06T18:42:17.333
> 
> 标签：java, eclipse, pmd

我已经在 Eclipse 中针对我的代码运行了[PMD 插件](http://pmd.sourceforge.net/)，并且我收到了类似于下图所示代码的高优先级警告：

```
 if(singleRequest !=null){
   // do my work
 }else{
   // do my other work
 } 
```

PMD 说``Avoid if (x != y) ..; else ..`；

错误的描述如下所示：

```
In an "if" expression with an "else" clause, avoid negation in
the test.  For example, rephrase:
if (x != y) diff(); else same();
as:
if (x == y) same(); else diff();
Most "if (x != y)" cases without an "else" are often return 
```

但我仍然无法理解对我的代码的影响。如果有人可以举例指导我，我将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-06T19:07:24.040

许多 PMD 规则更像是风格意见而不是正确性警报。如果您不同意此规则或该规则与您项目的编码标准不匹配，您可以考虑[抑制警告](http://pmd.sourceforge.net/pmd-5.0.0/suppressing.html)，甚至[配置 PMD 以仅执行您喜欢的规则](http://pmd.sourceforge.net/pmd-5.0.0/howtomakearuleset.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-06T18:57:08.263

PMD 是一种工具。PMD 基于启发式工作。有人决定采用这种启发式方法；带有 else 语句的否定*条件*不是“好风格”。

但是，在这种情况下，正如我在评论中所说，*发布的代码就是**我**将如何编写它*。（特别是`x != null`，但不仅限于此构造。）

这是因为我不看*条件*（除了它可以被简化；例如移除双重否定，如 Jim Kin 所示），而是看*分支*或“流”的逻辑。

也就是说，我先放置正*分支*。在这种情况下，我认为

```
if (x != null) {
  doValid         // positive branch
} else {
  doFallback
} 
```

在语义上等价于

```
if (isValid(x)) { // it looks like a "positive conditional" now
  doValid         // still positive branch
} else {
  doFallback
} 
```

因此首先是正*分支*。

当然，并非所有情况都有如此“清晰”的积极情绪，有些表达方式可能更容易以消极的方式表达。在这些情况下，我将“反转”分支 - 类似于 PMD 的建议 - 如果正*分支*/流被反转，通常会在块顶部添加注释说明操作。

可能影响使用的条件选择的另一个因素是“立即范围退出”分支，例如：

```
if (x == null) {
  // return, break, or
  throw new Exception("oops!");
} else {
  // But in this case, the else is silly
  // and should be removed for clarity (IMOHO) which,
  // if done, avoids the PMD warning entirely
} 
```

这就是***我*** *一贯*的方式（除了一些偶尔的例外）编写*我的*代码：`if (x != null) { .. }`. 使用可用的工具；并让它们*为*你工作。请参阅 Steven 的回答，了解如何在此处将 PMD 配置为更合适的“口味”。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-06T18:44:35.550

这是一个可读性问题。考虑

```
if ( x != y ) 
{
}
else  // "if x doesn't not equal y"
{
} 
```

对比

```
if ( x == y )
{
}
else  // "if x doesn't equal y"
{
} 
```

后一个例子更容易识别。请注意，我认为使用底片没有任何问题......它可以更有意义，考虑一下

```
if ( x != null )... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-06T18:49:38.027

我会避免使用否定案例的唯一原因是它是否会导致双重否定，这可能会令人困惑。

例如

```
if (!checkbox.disabled) {
    // checkbox is enabled
} 
else {
    // checkbox is disabled
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-06T19:00:01.520

谁读你的代码？你做。编译器会。或者也许是讲师的助手。一个无法区分 == 和 != 的同事？希望不是。

我只能认为否定词在复杂的表达中不好。（上下文是：至少对我来说。我知道我在调试时感到沮丧`while(!expr && !expr2 || expr3) { }`）

`ch=getch(); if (ch!='a')` 是一种易于扩展的模式，
`if (ch!='a' || ch!='b')`它总是正确的，同时在语义上听起来是正确的。

从性能的角度来看，最好对概率进行排序。

```
if (more_probable) {
      ....
      unconditional_jump_to_end_of_block;
} else {
   ...
} 
```

这种选择应该会带来更好的性能，因为在更可能的分支中没有错误预测的惩罚。

`if (p && p->next)`从性能的角度评估得出的结果很差。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T18:46:25.673

您必须避免在 if 条件中出现“不等于”。这是因为当其他人查看您的代码时，该人很可能会忽略 != 并可能对您的程序逻辑得出错误的结论。

对于您的情况，您可能必须将 if 逻辑与 else 逻辑互换并将 != 更改为 ==

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-06T18:47:02.163

这是代码可读性与代码组织的平衡案例。该警告基本上表明人们阅读代码以导航否定的否定是令人困惑的。

我个人的经验法则是，无论您期望什么是“正常”情况，您都应该在 if 中进行测试。考虑：

```
 if (x != y) {
   // do work here...
 } else {
   throw new IllegalArgumentException();
 } 
```

在这种情况下，我会说重要的工作正在这个`x != y`案例中完成，所以这就是你应该测试的。这是因为我喜欢组织代码，以便首先处理重要的工作，然后处理异常情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-06T18:47:16.203

这是因为“良好的风格”表示如果可能的测试应该是“积极的”，所以：

```
if (singleRequest == null){
   // do my other work
} else {
   // do my work
} 
```

更容易阅读，因为测试是“肯定的”（即“等于”而不是“不等于”），并且最终更好的可读性会导致更少的错误。

### 已编辑

尤其是像这样的测试：

```
if (!str.equals("foo")) { 
```

你很容易错过`!`前面的，但如果你使测试呈阳性，它就会干净得多。

唯一一次你应该有一个否定测试是当没有`else`块时 - 然后一个否定测试是不可避免的，除非你有一个空`true`块，这本身被认为是一个风格问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-22T07:59:18.297

不是真正的答案，但您可以通过提前返回或失败然后继续不缩进来最小化整体复杂性并提高可读性：

```
if (something == null) {
    throw new IllegalArgumentException("something must not be null");
}

// continue here 
```

# ssrs-2008 - 如何使用 SSRS 创建包含节和分页符的报表

> ID：13257276
> 
> 赞同：8
> 
> 时间：2012-11-06T18:42:30.287
> 
> 标签：ssrs-2008, reporting-services, bids, ssrs-grouping

我正在尝试创建一个如下所示的报告： ![表](../Images/3640220efd1dd588343bf35854dac7a9.png)

使用此表中的选择：（[此处为查询和数据](http://sqlfiddle.com/#!3/e359a/1)提琴手）

```
CREATE TABLE StudentData
(
id int PRIMARY KEY IDENTITY,
name varchar(30),
subject varchar(30),
currentGrade varchar(2),
targetGrade varchar(2),
note1 varchar(100),
note2 varchar(100),
note3 varchar(100),
UNIQUE (id)
) 
```

基本上我想`student`在一个新页面上显示每个，将它们`subject`分成几个部分，`grades`并且`notes`在每个`subject`部分中显示它们。

我正在尝试在*商业智能开发工作室中执行此操作*

任何有关我将如何去做的帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-06T20:17:40.990

我现在可以上传图片了。

1.  首先，您将**List** Tablix 添加到具有名称的报告中并添加一个**TextBox** ![在此处输入图像描述](../Images/a4f758ca4acf7f80f1cd7a537b9ede7e.png)

2.  将**父组添加到****行组**类别 的列表中![在此处输入图像描述](../Images/8ad938f01fe959155c547c0cd9fe1fe2.png)

3.  选择**名称**作为按列 **分组**![在此处输入图像描述](../Images/a7e7a62ed49c085d74b890cced172e95.png)

4.  您将有两列，一列包含组，另一列包含先前创建的 TextBox ![在此处输入图像描述](../Images/8ac16230fccc9a7d9c78ac8a1b18e9e3.png)

5.  添加更多**文本框**，其余列缺失。 ![在此处输入图像描述](../Images/d82b706741dc01e36af72c782fcdc07b.png)

6.  现在我们要在每个组上设置中断，**在行组**部分选择组名，然后右键单击并选择**组属性** ![在此处输入图像描述](../Images/c610b9907474664a9239c30fca5ccc7b.png)

7.  选择**分页符**页面，然后选中**组的每个实例之间的选项** ![在此处输入图像描述](../Images/56b4f5310abe3321a9a39958c921778b.png)

8.  你现在应该有这样的东西。 ![在此处输入图像描述](../Images/267caf21b7ff17e5d232da268b1b8951.png)

9.  现在让我们将名称配置为显示在每个页面的顶部，在“**行组**”部分中选择“**详细信息**组”并添加**“之前的总计”** ![在此处输入图像描述](../Images/c6694b4e49c76341ca18f38e956ea218.png)

10.  添加一些 TextBox 和一些颜色后，您将拥有类似这样的内容。 ![在此处输入图像描述](../Images/26a00525afa878f8b76339f614982241.png)

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T00:57:19.953

添加一个列表并将 DataSetName 设置为您现有的数据集。在列表的 Row Groups 定义中，告诉它 Group on id。为名称添加一个文本框。

在现有列表中添加另一个列表，并将 DataSetName 设置为现有数据集。在列表的 Row Groups 定义中，将其告知 Group on subject。为主题添加一个文本框。

在内部列表中添加 2 个表格以显示最里面的表格。

# xslt - 对具有相同名称的多个元素进行分组

> ID：13257285
> 
> 赞同：-1
> 
> 时间：2012-11-06T18:42:59.743
> 
> 标签：xslt, xslt-grouping

这是我之前提出的问题的扩展 - [XSLT 1.0 Grouping with multiple elements with same name](https://stackoverflow.com/questions/13021326/xslt-1-0-grouping-with-multiple-elements-with-same-name) 输出格式已更改，因此重新发布。

我有一个看起来像的 XML -

```
<resultset>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning1</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A~level2A~level3A</Hierarchy>
                <Hierarchy>level1B~level2B~level3B</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning2</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A~level2A~level3B</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning3</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A~level2B~level3C</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning4</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A~level2B~level3B</Hierarchy>
                <Hierarchy>level1A~level2B~level3C</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning5</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1B~level2B~level3B</Hierarchy>
            </ITEM>
        </content>
    </hit>
</resultset> 
```

请注意，有多个层次结构元素是 level1~level2~level3 的串联字符串，我希望将其转换为类似这样的内容 -

```
<TREE>
<LEVELS>
<LEVEL1 name="level1A">
 <LEVEL2 name="level2A">
   <LEVEL3 name="level3A">
      <ITEM Name="Office Cleaning1"/>
   </LEVEL3>
   <LEVEL3 name="level3B">
      <ITEM Name="Office Cleaning2"/>
   </LEVEL3>
 </LEVEL2>
 <LEVEL2 name="level2B">
   <LEVEL3 name="level3B">
        <ITEM Name="Office Cleaning4"/>
   </LEVEL3>
   <LEVEL3 name="level3C">
      <ITEM Name="Office Cleaning3"/>
      <ITEM Name="Office Cleaning4"/>
   </LEVEL3>
 </LEVEL2>
</LEVEL1>
<LEVEL1 name="level1B">
  <LEVEL2 name="level2B">
    <LEVEL3 name="level3B">
        <ITEM Name="Office Cleaning1"/>
        <ITEM Name="Office Cleaning5"/>
    </LEVEL3>
  </LEVEL2>
</LEVEL1>
</TREE> 
```

基本上，每个项目都有多个与之关联的层次结构。我需要将它们组合在一起，并且每个级别也需要组合在一起。

实际上，我可以将输入 XML 中 HIERARCHY 元素中的值更改为任何可能更容易提取的格式。例如，我可以让它看起来像 LEVEL1:level1A~LEVEL2:level2A~LEVEL3:level3A 但我不能添加新元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:29:15.197

I got it working myself. Ignore the extra namespaces. I edited the hierarchy field to have format of level1:value~level2:value~level3:value for ease of substring.

I am sure there is a better way but this works for me.

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:autn="http://schemas.autonomy.com/aci/">
<xsl:output method="xml" omit-xml-declaration="yes"/>

 <xsl:strip-space elements="*"/>

  <xsl:key name="TOPLEVEL" match="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY" use="substring-before(substring-after(.,'LEVEL1:'),'~')"/>
  <xsl:key name="MIDLEVEL" match="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY" use="substring-before(substring-after(.,'LEVEL2:'),'~')"/>
  <xsl:key name="BOTTOMLEVEL" match="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY" use="substring-before(substring-after(.,'LEVEL3:'),'~')"/>

 <xsl:template match="/">
 <TREE>
    <xsl:for-each select="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY[generate-id() = generate-id(key('TOPLEVEL',substring-before(substring-after(.,'LEVEL1:'),'~') )[1])]">
    <xsl:variable name="TOP" select="substring-before(substring-after(.,'LEVEL1:'),'~')"/>
     <LEVEL1>
        <xsl:attribute name="name"><xsl:value-of select="substring-after($TOP,'+')"/></xsl:attribute>
        <xsl:attribute name="id"><xsl:value-of select="substring-before($TOP,'+')"/></xsl:attribute>
            <xsl:for-each select="//autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY[substring-before(substring-after(.,'LEVEL1:'),'~')=$TOP and generate-id() = generate-id(key('MIDLEVEL',substring-before(substring-after(.,'LEVEL2:'),'~') )[1])]">
            <xsl:variable name="MID" select="substring-before(substring-after(.,'LEVEL2:'),'~')"/>
                <LEVEL2>
                    <xsl:attribute name="name"><xsl:value-of select="substring-after($MID,'+')"/></xsl:attribute>
                    <xsl:attribute name="id"><xsl:value-of select="substring-before($MID,'+')"/></xsl:attribute>
                    <xsl:for-each select="//autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY[substring-before(substring-after(.,'LEVEL1:'),'~')=$TOP  and substring-before(substring-after(.,'LEVEL2:'),'~')=$MID and generate-id() = generate-id(key('BOTTOMLEVEL',substring-before(substring-after(.,'LEVEL3:'),'~') )[1])]">
                    <xsl:variable name="BOTTOM" select="substring-before(substring-after(.,'LEVEL3:'),'~')"/>
                    <LEVEL3>
                        <xsl:attribute name="name"><xsl:value-of select="substring-after($BOTTOM,'+')"/></xsl:attribute>
                        <xsl:attribute name="id"><xsl:value-of select="substring-before($BOTTOM,'+')"/></xsl:attribute>
                        <xsl:apply-templates select="//HIERARCHY[substring-before(substring-after(.,'LEVEL1:'),'~')=$TOP  and substring-before(substring-after(.,'LEVEL2:'),'~')=$MID and substring-before(substring-after(.,'LEVEL3:'),'~')=$BOTTOM]"/>
                    </LEVEL3>
                    </xsl:for-each>
                </LEVEL2>
            </xsl:for-each>
    </LEVEL1>
    </xsl:for-each>
 </TREE>
 </xsl:template>
  <xsl:template match="HIERARCHY">
    <ITEM>
        <xsl:attribute name="name"><xsl:value-of select="../DRETITLE"/></xsl:attribute>
        <xsl:attribute name="id"><xsl:value-of select="../ID"/></xsl:attribute>
    </ITEM>
  </xsl:template>

</xsl:stylesheet> 
```

# iphone - 使用印象笔记 API 创建笔记

> ID：13257288
> 
> 赞同：3
> 
> 时间：2012-11-06T18:43:13.240
> 
> 标签：iphone, api, evernote

```
EvernoteNoteStore *noteStore = [EvernoteNoteStore noteStore];
EDAMNote *note = [[EDAMNote alloc] init];
[note setTitle:@"Test Note from EvernoteCounter for iPhone"];
[note setContent:[ [NSString alloc] initWithFormat:@"<en-note>%@</en-note>",@"tete"];
[noteStore createNote:(note) success:^(EDAMNote *note) {
    NSLog(@"Received note guid: %@", [note guid]);
}failure:^(NSError *error) {
    NSLog(@"Create note failed: %@", error);
}]; 
```

我用这个代码通过evernote激活了createNote。但是 createNote 不返回任何值 - 它被困在称为 async 的内部 api 函数之一中。有没有人尝试使用 iOS 的 SDK 上的 API 创建新笔记，并且实际上在他们的 Evernote 帐户中获得了笔记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:35:22.363

我们刚刚添加了一些新的示例代码来创建照片笔记。请查看：[https](https://github.com/evernote/evernote-sdk-ios) ://github.com/evernote/evernote-sdk-ios 。创建笔记的正确方法是使用：

```
- (id) initWithGuid: (EDAMGuid) guid title: (NSString *) title content: (NSString *) content contentHash: (NSData *) contentHash contentLength: (int32_t) contentLength created: (EDAMTimestamp) created updated: (EDAMTimestamp) updated deleted: (EDAMTimestamp) deleted active: (BOOL) active updateSequenceNum: (int32_t) updateSequenceNum notebookGuid: (NSString *) notebookGuid tagGuids: (NSArray *) tagGuids resources: (NSArray *) resources attributes: (EDAMNoteAttributes *) attributes tagNames: (NSArray *) tagNames; 
```

另请参阅：[http](http://dev.evernote.com/documentation/reference/Types.html#Struct_Note) ://dev.evernote.com/documentation/reference/Types.html#Struct_Note了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T10:45:13.760

```
Sample code for u. @KatieK
// --------------------------------

EvernoteNoteStore *noteStore = [EvernoteNoteStore noteStore];
    EDAMNote *note = [[EDAMNote alloc] init];
    [note setTitle:@"Hello Evernote"];
    [note setContent:[[NSString alloc] initWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?><!DOCTYPE en-note SYSTEM \"http://xml.evernote.com/pub/enml2.dtd\"><en-note>Hello, world! %@</en-note>",@"I'm LongPham"]];

    [noteStore createNote:note success:^(EDAMNote *note) {
        NSLog(@"Received note guid: %@", [note guid]);
    }failure:^(NSError *error) {
        NSLog(@"Create note failed: %@", error);
    }]; 
```

# clojure - 如何在 Clojure 序列的末尾添加不带引号的分隔符

> ID：13257293
> 
> 赞同：0
> 
> 时间：2012-11-06T18:43:28.567
> 
> 标签：clojure

我在一系列序列中有数据行，每个序列都不同，但遵循如下一般模式：

`("44999" "186300" "194300" "0" "380600" "325" "57" "0")`

当我使用将序列序列写入文件时

```
(defn write-csv-file
  "Writes a csv file using a key and an s-o-s"
  [out-sos out-file]

  (if (= dbg 1)
    (println (first out-sos), "\n", out-file))

  (spit out-file "" :append false)
  (with-open [out-data (io/writer out-file)]
      (csv/write-csv out-data out-sos)))
.
.
.
(write-csv-file out-re "re_values.csv") 
```

数据是这样出来的

`44999,186300,194300,0,380600,325,57,0`

这正是我想要的方式（不带引号），除了，我想在每个序列的末尾加上不带引号的 ','。

我已经尝试`(concat one-row (list \,))`并尝试在函数中的每个序列的末尾添加一个“，” `(list`，但我无法在每个序列的末尾得到一个不带引号的“，”。我怎样才能做到这一点？

作为一种解决方法，我可以通过 sed 运行这样的文件以添加尾随逗号，但我想在 Clojure 中完成这一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:40:04.043

我认为您不想“添加逗号”而是添加一个空字段（然后用逗号分隔）。所以，你应该简单地在你的行序列中添加一个空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:41:07.627

也许将一个空字符串连接到 out-sos 内部的每个序列。Concat 很懒，所以不应该很贵。

```
(with-open [out-data (io/writer out-file)]
  (csv/write-csv out-data (map #(concat % [""]) out-sos)))) 
```

不过，不确定 csv 库最后会用空做什么。希望你能得到你的空元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:07:44.347

您是否尝试过 :end-of-line 设置为 ",\n"

这就是文档所说的：

> ：行结束
> 
> 包含用于写入 CSV 文件的行尾字符的字符串。
> 
> 默认值：\n

这是我试过的：

```
(csv/write-csv data :end-of-line ",\n") 
```

# javascript - javascript：等待返回

> ID：13257294
> 
> 赞同：-1
> 
> 时间：2012-11-06T18:43:30.300
> 
> 标签：javascript, ajax

我有这个问题。例如，我有一个名为 functionA() 的函数，它需要另一个名为 functionB() 的函数的结果。

```
var globalVar="";
function functionA(){
    //...
    functionB();
    //here i have to use the global variable (that is empty because functionB isn't finished)
}
function functionB(){
    //ajax request
    globalVar=ajaxRequest.responseText;
} 
```

在继续执行函数A之前，我该怎么做才能让函数B完成？谢谢！

这是代码：

```
var ingredientiEsistenti="";
function ShowInserisciCommerciale() {
    getElementiEsistenti();
    JSON.parse(ingredientiEsistenti);
}

function getElementiEsistenti(){

// prendo gli ingredienti esistenti.
var url = "http://127.0.0.1:8080/Tesi/Ingredienti";
var xmlHttp = new XMLHttpRequest();
xmlHttp.open("POST", url, false);
xmlHttp.send(null);
xmlHttp.setRequestHeader("Content-type",
        "application/x-www-form-urlencoded");
xmlHttp.onreadystatechange = function() {
    if (xmlHttp.readyState == 4) // COMPLETED
    {
        if (xmlHttp.status == 200) // SUCCESSFUL
        {
            ingredientiEsistenti = xmlHttp.responseText;
        } else {

            alert("An error occurred while communicating with login server.");
        }
    }
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:52:46.700

您有许多选项之一，不需要*邪恶*的全局变量：

*   将您希望看到执行的代码移动到`onreadystatechange`ajax 请求的回调中，这样，在您收到响应之前它不会被执行

*   重新定义`functionA`，以便它接受一个允许您跳过第一位的参数：

*   使请求同步，但不推荐

*   使用超时/间隔手动检查请求的就绪状态（蛮力，也不推荐）

*   在您的特定情况下，也许有一些工人的诡计也可以做到这一点

* * *

```
function functionA(skipDown)
{
    skipDown = skipDown || false;
    if (skipDown === false)
    {
        //doStuff
        return functionB();//<-- call functionA(true); from the readystatechange callback
    }
    //this code will only be called if skipDown was passed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:46:14.923

当调用是异步的时，JavaScript 中不可能有睡眠/等待。您需要使用回调模式来执行此操作。

可以使 XMLHttpRequest 同步，但这可能会导致其他问题。它可以挂起浏览器，因为它会阻止所有其他操作的发生。所以如果你想显示一个加载动画，它很可能不会执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:46:23.797

您可以使您的 AJAX 请求同步。[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests)

```
var request = new XMLHttpRequest();
// Last parameter makes it not asnychronous
request.open('GET', 'http://www.mozilla.org/', false); 
request.send(null);
// Won't get here until the network call finishes
if (request.status === 200) {
  console.log(request.responseText);
} 
```

但是，这会在等待服务器响应时阻塞 UI，这几乎不是您想要的。在这种情况下，您应该使用回调来处理结果。

这是一个使用回调而不依赖全局变量的示例。你应该永远远离那些

```
function ShowInserisciCommerciale(  ) {
    getElementiEsistenti(function(responseText) {
        JSON.parse(responseText);
    });
}

function getElementiEsistenti(successCallback){
    var url = "http://127.0.0.1:8080/Tesi/Ingredienti";
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("POST", url, false);
    xmlHttp.send(null);
    xmlHttp.setRequestHeader("Content-type",
            "application/x-www-form-urlencoded");
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4) // COMPLETED
        {
            if (xmlHttp.status == 200) // SUCCESSFUL
            {
                successCallback(xmlHttp.responseText); 

            } else {

                alert("An error occurred while communicating with login server.");
            }
        }
    };
} 
```

# c# - WCF - 实体框架，生成的实体序列化错误

> ID：13257301
> 
> 赞同：1
> 
> 时间：2012-11-06T18:44:26.410
> 
> 标签：c#, wcf, serialization, datacontract

我是 WCF 的新手，今天我遇到了 DataContracts 的问题。当对象从 WCF 服务返回到客户端时出现异常。

SvcTraceViewer 显示下一个异常：

> **键入** “System.Data.Entity.DynamicProxies.Person_7C797A477DD73534D4E8E743E1FCC1C75DAB75933D03B845A097A8B83F2DD748” **数据合同名称** “Person_7C797A477DD73534D4E8E743E1FCC1C75DAB75933D03B845A097A8B83F2DD748：HTTP：//schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies” **预计不会。**考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

我有几个解决方案。

*   DataAccess（EntityFramework EDMX文件放在这里）
*   模型（由 DbContextGenerator 生成的实体在这里）
*   WCF 服务（DataContracts 在`Model`项目中实现）
*   WPF 应用程序（运行 ServiceHost）
*   控制台应用程序（调用 WCF 项目或 WPF 应用程序中托管的服务）

这是 WCF 中的操作合同：

```
[OperationContract]
Person[] GetAllPersons(int version); 
```

接口实现：

```
public Person[] GetAllPersons(int version)
{
    return StorageService.GetAllPersons(version);
} 
```

在客户端（ConsoleApp）接收数据时抛出异常。

我猜这个问题与生成的实体有关，因为它们是部分类

这是 Person 类：

```
public partial class Person
{
    public Person()
    {
        this.Project = new HashSet<Project>();
    }

    public int Id { get; set; }
    public Nullable<long> AddressId { get; set; }
    public string LastName { get; set; }
    public string MiddleName { get; set; }
    public string FirstName { get; set; }
    public Nullable<long> GeoLocationId { get; set; }
    public string FullGeoLocationName { get; set; }
    public Nullable<long> SupervisorId { get; set; }
    public Nullable<long> PositionId { get; set; }
    public string Position { get; set; }
    public string Office { get; set; }
    public string NativeName { get; set; }
    public string Location { get; set; }
    public string FullName { get; set; }
    public Nullable<long> PmcPersonId { get; set; }

    public virtual ICollection<Project> Project { get; set; }
    public virtual PersonDataVersion DataVersion { get; set; }
    public virtual Workspace Workspace { get; set; }
} 
```

我试图用`[DataContract]`和`[DataMember]`属性标记类及其成员，但仍然发生错误。`[KnownType(typeof(Person)]`属性也没有帮助。

是否可以将生成的实体用作数据合约？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:13:16.787

DynamicProxies 表明您正在使用延迟加载，并且该错误可能是由于 WCF 尝试序列化对象时关闭的上下文引起的。

尝试禁用延迟加载并改用急切加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:42:45.870

您确实应该将 Person 对象映射到数据传输对象或 Poco 对象。您可以使用 DataMember 属性相应地装饰这些属性。如果您必须禁用延迟加载，您将失去 ORM 的优势，并且将对您甚至可能不使用的数据运行查询 - 在小型系统中可能不是一个大问题，但随着系统的增长，它可能会使它们陷入困境。

# java - 我的程序不会做我想做的事

> ID：13257303
> 
> 赞同：-3
> 
> 时间：2012-11-06T18:44:36.013
> 
> 标签：java

我只是为了好玩而学习Java，发现这个论坛有时非常有用！:)

现在，我遇到了一个问题，我无法让应用程序执行我希望它执行的操作.. 我只想让它运行 "choice" ，然后从我的输入选择中我希望它运行例如 ovning3 （即 "转换器”），但它只是在我输入我的选择“3”后退出..

我做错什么了吗？这是我第一个有几个“实例”的应用程序。我的逻辑错了吗？

```
import static javax.swing.JOptionPane.*;

public class Ovningar {

    public static void main(String[] args) {
        choice();
    }

    public static void choice(){
        String input = showInputDialog("Välj övning");
        if (input == "3")
            converter();
        if (input == "4")
            sfer();
    }

    public static void sfer() {

    }
    public static void converter() {

        String input[] = showInputDialog("Mile/Gallons?").split("/");       
        String strmiles = input[0];
        String strgallon = input[1];

        double miles = Double.parseDouble(strmiles);
        double gallon = Double.parseDouble(strgallon);

        double km = miles*1.609;
        double liter = gallon*3.785;

        showMessageDialog(null, km+"/"+liter);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:45:32.943

而不是在比较字符串时使用`==`use 。`.equals()`

```
if (input.equals( "3"))
        converter();
    if (input .eqauls( "4"))
        sfer(); 
```

（或者）

将输入转换为整数并执行`==`

```
 if( Integer.valueOf(input) == 3)
      {
     ......
      } 
```

`==`寻找参考平等。`equals()`寻找对象相等性。

# git - 在不更改子模块的情况下修改 snipmate 的片段

> ID：13257304
> 
> 赞同：1
> 
> 时间：2012-11-06T18:44:38.277
> 
> 标签：git, vim, git-submodules, vim-plugin, snipmate

我安装了 snipmate 插件，它工作得非常好。我不得不修改一个片段，但这显然导致了子模块的变化。有一个更好的方法吗？

**注意：**我使用病原体来管理插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:04:51.643

SnipMate 在几个位置寻找片段。这些位置之一，即默认位置 IIRC，是：

```
~/.vim/snippets/ 
```

所以你可以把你的自定义片段放在那里。

# c# - 使用 selenium webdriver c# 时设置 Web 服务器

> ID：13257306
> 
> 赞同：1
> 
> 时间：2012-11-06T18:44:56.660
> 
> 标签：c#, asp.net, asp.net-mvc, selenium, bdd

我使用 selenium webdriver 对 ASP.NET MVC 应用程序（C#）进行行为测试。我希望有一个在我运行这些测试时会自动打开的服务器，比如在我调试我的应用程序时自动运行的 IIS 服务器。我怎么做 ？顺便说一句，如果这很重要，我正在使用 ChromeDriver。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:33:04.903

您是否看过 Stephen Walther 的文章，该文章解释了如何结合使用 Selenium WebDriver 和 IISExpress，为 ASP.NET MVC 应用程序创建集成测试？

[http://stephenwalther.com/archive/2011/12/22/asp-net-mvc-selenium-iisexpress.aspx](http://stephenwalther.com/archive/2011/12/22/asp-net-mvc-selenium-iisexpress.aspx)

# mysql - 更新行并将列值设置为某个字符串 + id

> ID：13257308
> 
> 赞同：1
> 
> 时间：2012-11-06T18:45:06.567
> 
> 标签：mysql

我有一个两列的表，`id`并且`description`. `id`是主键和自动增量，`description`是一个varchar。

有没有办法制作一个更新语句，用类似的`descrption`东西填充列`"this row has id: @id"`。`@id`当前id在哪里。希望你明白这个想法，否则会详细说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T18:46:54.527

试试这个：

```
UPDATE tableName
SET    description = CONCAT('this row has id: @', id); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T18:47:11.897

当然。使用[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)：

```
UPDATE theTable
SET description = CONCAT('this row has id: ', CAST(id AS VARCHAR(10))) 
```

事实上，在 MySQL 中，来自[文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)：

> 数值参数被转换成其等效的二进制字符串形式

在这种情况下，二进制字符串就可以了，你可以这样做：

```
UPDATE theTable
SET description = CONCAT('this row has id: ', id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T18:48:01.353

尝试

```
UPDATE myTable SET
   description = concat('this row has id: @', id) 
```

# .htaccess - 背景消失.htaccess

> ID：13257310
> 
> 赞同：0
> 
> 时间：2012-11-06T18:45:14.267
> 
> 标签：.htaccess, background, styles

我刚刚完成了我的`.htaccess`文件，只重写了一个更好的 URL，但背景无缘无故消失了。如果我使用丑陋的旧 URL 访问，背景就在那里。

```
<html...
...
<style type='text/css'>
body { color:#FFF;background:#444 url(office_1.png); }
body { margin:0;padding:0; }
</style>
</head> 
```

`.htaccess`: _

```
RewriteRule download/(.*)/u_id/(.*)/id/(.*)/n/(.*)$ download.php?on=$1&u_id=$2&id=$3&n=$4
RewriteRule download/(.*)/u_id/(.*)/id/(.*)/n/(.*)/$ download.php?on=$1&u_id=$2&id=$3&n=$4
RewriteRule download/(.*)/u/(.*)/id/(.*)/n/(.*)$ download.php?on=$1&u_id=$2&id=$3&n=$4
RewriteRule download/(.*)/u/(.*)/id/(.*)/n/(.*)/$ download.php?on=$1&u_id=$2&id=$3&n=$4 
```

`.htaccess`规则有效，但为什么我的背景消失了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:48:51.333

URI 是相对的，所以它在寻找图像

```
/your/nice/uri/office_1.png 
```

不在

```
/office_1.png 
```

通常的解决方法是使用 / 开始图像路径，就像我在上面的示例中那样，使其相对于站点的根目录。

```
url(/office_1.png); 
```

# msbuild - 如何从 MSBuild 项目文件运行当前版本的 NuGet 包可执行文件？

> ID：13257316
> 
> 赞同：2
> 
> 时间：2012-11-06T18:45:39.320
> 
> 标签：msbuild, path, nuget

我已将[xunit.runners](http://nuget.org/packages/xunit.runners)包添加到解决方案中。当前版本是 1.9.1，所以我在 MSBuild 项目文件中硬编码了可执行文件的路径：

```
<StartAction>Program</StartAction>
<StartProgram>$(MSBuildProjectDirectory)\..\..\Packages\xunit.runners.1.9.1\tools\xunit.gui.clr4.exe</StartProgram>
<StartArguments>"$(MSBuildProjectDirectory)\$(OutPutPath)$(AssemblyName).dll"</StartArguments> 
```

（题外话：使用此配置，F5 启动 xUnit GUI 运行程序，我可以调试特定的单元测试。）

我知道每次更新 Nuget 包时，都会忘记更改路径。更改路径是一个小麻烦，因为我必须卸载项目，编辑文件，然后重新加载项目。

无论软件包的实际版本如何，如何启动可执行文件？我可以`xunit.runners.*`在 MSBuild 中使用通配符命名的文件夹中找到可执行文件，然后将其用作`<StartProgram>`元素中的属性吗？

编辑：

就像是：

```
<ItemGroup>
    <Runners Include="$(MSBuildProjectDirectory)\..\..\Packages\xunit.runners.*\tools\xunit.gui.clr4.exe" />
</ItemGroup> 
```

会给我所有的跑步者`@(Runners)`，按版本排序。我怎样才能得到其中一个，最好是最后一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:19:21.337

对于过滤，您可以构建自定义任务。它甚至可以内联[http://msdn.microsoft.com/en-us/library/dd722601.aspx](http://msdn.microsoft.com/en-us/library/dd722601.aspx)，如果您可以编写循环项目并选择正确的项目所需的 c# 代码。然后，您可以在输出属性中公开所选路径，然后使用该属性设置 StartProgram 属性的值。

[这个问题](https://stackoverflow.com/questions/5461223/passing-items-to-msbuild-task)显示了一个自定义内联任务，它获取一个项目数组并用它做一些事情。您可能可以从那里开始。

您需要在启动调试的目标之前运行的目标中使用此任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:46:37.767

随着[fsimonazzi](https://stackoverflow.com/users/742510/fsimonazzi)的[评论](https://stackoverflow.com/q/13257316/4830#comment18068430_13257849)，我最终得到了这个：

```
<PropertyGroup>
  <Package>$([System.IO.Directory]::GetDirectories("$(MSBuildProjectDirectory)\\..\\..\\Packages\\", "xunit.runners.*").GetValue(0))</Package>
  <StartAction>Program</StartAction>
  <StartProgram>$(Package)\tools\xunit.gui.clr4.exe</StartProgram>
  <StartArguments>"$(MSBuildProjectDirectory)\$(OutPutPath)$(AssemblyName).dll"</StartArguments>
</PropertyGroup> 
```

显然，NuGet 将保证只有一个版本的包。

# android - 安卓 AVD/Eclipse

> ID：13257320
> 
> 赞同：1
> 
> 时间：2012-11-06T18:45:58.053
> 
> 标签：android, eclipse

我对 AVD 有疑问。如果我从 Eclipse 启动它，加载良好但不会出现在屏幕上。之后，我从终端尝试，但收到“分段错误”消息。阅读另一个主题，我读到这是 20 版本的 android SDK 的问题并修复它，我应该尝试：.../tools/emulator-arm @nameAVD。有用。

但是我还有一个问题，我需要从 Eclipse 启动 AVD 来调试应用程序！有人可以帮助我吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:04:56.243

您能告诉我们更多关于您的系统、构建以及您使用的 Android/Eclipse 版本的信息吗？

如果没有，请尝试卸载并重新安装 Eclipse，但使用来自[http://www.eclipse.org/downloads/的 Eclipse Classic 版本](http://www.eclipse.org/downloads/)

然后如果它仍然不起作用，请尝试删除并重新下载android SDK。

如果这仍然不起作用，那么您的系统设置可能有问题

=======================

编辑***这里是一个可能的临时解决方案..

仅使用 Eclipse 清理/构建您的项目，并使用您的终端将您的应用程序安装到您的模拟器上。

要在不运行的情况下构建 APK，请右键单击您的项目，转到“Android 工具”并点击“导出未签名包”，这将提示您将 APK 存储到某个位置。然后，打开您的 AVD 模拟器和终端。在您的终端上，“cd”进入您保存 APK 文件的目录（例如在 /...../Your Project/bin/ 中），然后运行终端命令“adb install yourAPKfileName.apk”

这将自动将最新的 APK 安装到您的模拟器并运行它。由于这个构建过程比平时慢一点，我建议只在需要时构建/运行，并始终将 APK 导出到同一个地方，并让你的终端打开到同一个地方，这样当你按下“ up”在终端上，它会重复您使用的最后一个命令:)

# javascript - 远程控制的切换按钮

> ID：13257321
> 
> 赞同：0
> 
> 时间：2012-11-06T18:46:04.497
> 
> 标签：javascript, jquery, button, toggle

我有一个 div 在单击我也设置为切换的按钮时切换...我希望允许用户通过单击相同的切换按钮或单击显示的 div 中的关闭选项来关闭 div。问题是，如果用户选择使用关闭选项，则切换按钮会反转，因为它没有设置为使用关闭选项进行切换。

```
<!-- Toggle Button -->
<script type="text/javascript">
if(window.addEventListener){
window.addEventListener('load',multiImageSwap,false);
 }
else { 
if(window.attachEvent){
   window.attachEvent('onload',multiImageSwap);
  }
 }

function multiImageSwap(){
   test=true;
document.getElementById('pic').onmouseover=function() {
if(test==true) {
   this.src='images/SN_Page_10_23_Possible_19A.png';
 }
else {
   this.src='images/SN_Page_10_23_Possible_19B.png';
  }
 }
document.getElementById('pic').onmouseout=function() {
if(test==true) {
   this.src='images/SN_Page_10_23_Possible_19A.png';
 }
else {
   this.src='images/SN_Page_10_23_Possible_19B.png';
  }
 }
document.getElementById('pic').onclick=function() {
if(test==true) {
   this.src='images/SN_Page_10_23_Possible_19B.png';
   test=false;
 }
else {
   this.src='images/SN_Page_10_23_Possible_19A.png';
   test=true;
   }
  }
 }
</script>

<!-- Toggle Reading -->
<script type="text/javascript">
function toggleDiv(divId) {
   $("#"+divId).toggle();
}
</script> 
```

[jsfiddle在这里](http://jsfiddle.net/DKdontKNO/uBvgm/8/)

# git - 使用 GIT 和 RSYNC 进行部署

> ID：13257328
> 
> 赞同：0
> 
> 时间：2012-11-06T18:46:25.370
> 
> 标签：git, rsync

我对 GIT 和 RSYNC 有疑问，因为我使用这两个命令进行部署，但我想将我的文件上传到仅在我的主分支中拥有的文件的 FTP 服务器（生产）！（这是我的问题）。

例子：

1.  我创建了一个新分支，并在该分支的不同文件中进行了更改。在这一刻，我团队的其他人做了改变，他推动了 master 分支。并且有必要将这些文件上传到 FTP 服务器。

然后...

我将以下命令放在“MyBranch”中：

```
git add .
git commit -m "My changes"
git checkout master
git merge MyBranch
git pull origin master 
```

然后我对 FTP 服务器进行 rsync。

我想在我的分支中添加并提交我的更改，然后切换到主分支并进行拉取以获取我团队的更改，然后实现部署。

换句话说，我只想将 master 分支中的文件上传到 FTP ！！！这可能吗？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:11:19.933

你可以这样做：

```
git add .
git commit -m "My changes"
git checkout master
git pull origin master 
```

*   第 1 条和第 2 条命令将您的更改提交到 MyBranch
*   第三次将您的工作分支切换到主分支
*   4、获取最新的远程版master

然后你可以将你的 rsync 上传到你的服务器。它将包含最新版本的“大师”，即您的团队更改的大师。

# java - 在单个线程上发出通知会唤醒所有等待的线程

> ID：13257333
> 
> 赞同：3
> 
> 时间：2012-11-06T18:46:40.673
> 
> 标签：java, multithreading, concurrency

三个线程在第 4 个线程等待，而后者发出通知，所有等待的线程都被唤醒。

这是源代码：

```
class Reader extends Thread {

  Calculator calc;

  public Reader(Calculator calc) {
    this.calc = calc;
  }

  public void run() {
    synchronized(calc) {
      try {
        System.out.println(Thread.currentThread().getName() + " waiting for calc");
        calc.wait();
      } catch (InterruptedException e) { e.printStackTrace(); }
      System.out.println(Thread.currentThread().getName() + " Total is: " + calc.total);
    }   
  }

}

class Calculator extends Thread {

  public int total = 0;

  public void run() {
    synchronized(this) {
      for (int i = 0; i < 50; i++) {
        total += i;
      }
      notify();
      System.out.println("I notified a thread");
    }
  }

}

public class Notify {

  public static void main(String[] args) {
    Calculator calc = new Calculator();
    Reader r1 = new Reader(calc);
    Reader r2 = new Reader(calc);
    Reader r3 = new Reader(calc);
    r1.start();
    r2.start();
    r3.start();
    calc.start();
  }
} 
```

这是我得到的输出：

```
Thread-2 waiting for calc
Thread-4 waiting for calc
Thread-3 waiting for calc
I notified a thread
Thread-2 Total is: 1225
Thread-3 Total is: 1225
Thread-4 Total is: 1225 
```

不应该只唤醒一个等待线程并执行`System.out.println(Thread.currentThread().getName() + " Total is: " + calc.total);`指令吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:01:49.543

我弄清楚为什么即使计算器线程根本没有发出 notify() 也会唤醒所有线程：这是因为它完成了 run() 方法的执行。

要查看 notify() 与 notifyAll() 的效果，我必须在调用 notify 后保持计算器运行。

所以这段代码：

```
class Calculator extends Thread {

  int total;

  public void run() {
    synchronized(this) {
      for (int i = 0; i < 50; i++) {
        total += i;
      }
      notify();
      System.out.println("I notified a thread");
    }
    try {
     System.out.println("Going to sleep");
     Thread.sleep(5000);
     System.out.println("I finished sleeping");
    } catch(InterruptedException e) {}
  }

} 
```

给出以下输出：

```
Thread-2 waiting for calc
Thread-4 waiting for calc
Thread-3 waiting for calc
I notified a thread
Thread-2 Total is: 1225
Going to sleep
I finished sleeping
Thread-3 Total is: 1225
Thread-4 Total is: 1225 
```

这表明只有一个等待线程通过 notify() 调用得到通知，另外两个在计算器完成执行后被唤醒。

将前面代码中的 notify() 替换为 notifyAll() 会得到以下输出：

```
Thread-2 waiting for calc
Thread-4 waiting for calc
Thread-3 waiting for calc
I notified all threads
Thread-3 Total is: 1225
Thread-4 Total is: 1225
Thread-2 Total is: 1225
Going to sleep
I finished sleeping 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T18:54:54.543

你不能使用`wait`/`notify`这种方式。您必须使用`wait`来等待*某些东西*，您的代码可以并且必须测试的东西。您应该只`notify`在更改另一个线程实际上正在等待的东西之后调用，这样它的测试会告诉它不再等待它。

> “线程也可以在没有被通知、中断或超时的情况下唤醒，即所谓的虚假唤醒。虽然这在实践中很少发生，但应用程序必须通过测试应该导致线程被唤醒的条件来防范它。被唤醒，不满足条件则继续等待。”

换句话说，您的`wait`逻辑必须如下所示：

1.  我现在可以做点什么吗？
2.  如果否，请致电`wait`并转到步骤 1。
3.  做那件事。

您的`notify`逻辑必须如下所示：

1.  使另一个线程可以做某事。
2.  打电话`notify`。

这些函数不是通用的挂起/恢复机制。它们专门用于在由同步块保护的代码管理的谓词上进行同步。如果需要，您可以使用自己的怀疑/恢复标志或计数来构建暂停/恢复机制。

更新：Måns Rolandi Danielsson 弄清楚了您的具体情况。您的线程正在等待尚未启动/终止的对象。因此，当它向自己发出准备好/完成的信号时，其他线程会看到该信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:01:59.207

我在 Exploring Java (Niemeyer) 中找到了关于这种行为的一行：“对于每次调用 notify()，Java 只会唤醒一个在 wait() 调用中处于休眠状态的方法。**如果有多个线程在等待，Java 会选择第一个线程遵循先进先出的原则。** ”

[探索 Java](http://oreilly.com/catalog/expjava/excerpt/index.html)

因此，使用计算器的 run() 方法：

```
public void run() {
    int k = 0;
    while (k++ < 2) {
        synchronized (this) {
            notify();
        }
    }
} 
```

将通知前两个等待的实例，一次一个，按照它们在计算器实例上调用 wait() 方法的顺序，并在退出时调用 notifyAll，这将通知任何在此特定实例上等待的剩余 Reader。我相信，这就是我们在这个非常有趣的讨论中看到的行为的完整解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:07:30.547

不，因为所有 Reader 对象都被赋予了相同的 Calculator。当 Reader 线程启动时，*在同一个 Calculator 对象上*调用 calc.wait() ，然后当 Calculator 启动并通知自己时，所有 Reader 线程立即退出。瞧！**编辑**改为尝试：

```
public static void main(String[] args) throws InterruptedException,
  IOException {
  Calculator calc1 = new Calculator();
  Calculator calc2 = new Calculator();
  Calculator calc3 = new Calculator();
  Reader r1 = new Reader(calc1);
  Reader r2 = new Reader(calc2);
  Reader r3 = new Reader(calc3);
  r1.start();
  r2.start();
  r3.start();
  calc2.start();
 } 
```

**EDIT2**，如果您尝试下面的测试代码，您可以看到共享 Calculator 对象的 r1 和 r2 被通知并退出，而拥有自己的 Calculator 的 r3 继续等待：

```
public static void main(String[] args) throws InterruptedException,
  IOException {
  Calculator calc1 = new Calculator();
  Calculator calc2 = new Calculator();
  Reader r1 = new Reader(calc1);
  Reader r2 = new Reader(calc1);
  Reader r3 = new Reader(calc2);
  r1.start();
  r2.start();
  r3.start();
  calc1.start();
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T00:55:42.563

这种神秘的行为在 Sun 的 JDK 中已经存在好几年了——当一个线程终止时，它会调用`notifyAll()`自己。

我不知道为什么会这样。但是JDK 7 javadoc现在解释了

[http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28long%29](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28long%29)

> join() 使用以 this.isAlive 为条件的 this.wait 调用循环。当线程终止时，将调用 this.notifyAll 方法。建议应用程序不要在 Thread 实例上使用 wait、notify 或 notifyAll。

所以基本上， join() 被实现为

```
void join()
    synchronized(this) // this thread object
        while( isAlive() )
            wait();    // depends on a notify when this thread terminates 
```

所以 JDK 这样做是为了自己的目的。

原因很弱 - 最好使用另一个锁来实现 join()。

但是JDK现在可能无法改变行为；可能有一些代码在不知不觉中/错误地依赖于这个 notifyAll() 信号；删除它会破坏这些代码。

# sql - 如何最好地标准化和参考 (FK) 位置（邻里/城市/地区/国家/大陆）

> ID：13257336
> 
> 赞同：2
> 
> 时间：2012-11-06T18:46:58.817
> 
> 标签：sql, database-design, foreign-keys, relational-database, normalization

所以我四处寻找，但没有找到满意的答案。

如标题所述，我有不同类型的位置。给定一种类型的位置（即城市），可以推断出粒度较小的位置。即，如果您知道您在俄勒冈州，则意味着您在美国，这意味着您在北美。

我们有引用位置的对象，但粒度并不完全相同。有些项目可能指向社区，有些项目只知道到城市级别，而有些项目只知道一个地区，等等。

我想到了两种组织数据的方式，这是我倾向于的方式：

*   有一个通用的“位置”表，其中有一个位置“类型”和一个引用自身的“父位置”。所以会有一个美国类型的国家条目，以及一个引用美国的俄勒冈州类型的条目。IE

![在此处输入图像描述](../Images/bcd7305b4d7b6f958c7358126e8da4f8.png)

然后，您可以让对象引用其主键之外的位置，然后可以推断出其他位置。这有意义还是有更好的方法可以组织数据？

*   我考虑的另一种方法是为每个位置“类型”使用不同的表，但问题是我们的对象引用它，因为对象的最细粒度类型的位置并不总是相同的。

如果我稍后将其他位置类型滑入，例如城市和地区之间的县，这可能会出现问题吗？我认为这不会比使用单独的表更成问题，但也许有更好的方法可以让我以合乎逻辑的方式跟踪事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:18:15.287

这是子类的一种情况，通常称为子类型。一些子类型包含在其他子类型中的事实使情况变得复杂。经典的基本关系数据库设计很好地处理了容器问题。

子类问题需要一点解释。OOP 所称的“子类”在 ER 建模界被称为“ER 专业化”。这告诉您如何绘制子类，但不会告诉您如何实现它们。

值得一提的是在 SQL 表中实现子类的两种技术。第一个名称为“单表继承”。第二个名称为“类表继承”。在类表继承中，您将拥有一个用于“位置”的通用表，其中包含所有位置共有的所有属性，无论类型如何。在“城市”表中，您将拥有与城市相关的属性，但与国家/地区等无关。您将拥有其他类型位置的其他子类表。

如果你走这条路，你应该查找另一种技术，称为“共享主密钥”。在这种技术中，子类表的 id 字段都包含来自超类表的 id 字段的副本。这需要一点努力，但非常值得。

共享主键提供了几个优点。它强制执行子类关系的一对一性质。它使将专用数据与通用数据连接起来变得简单、容易和快速。它跟踪哪些项目属于哪个子类，没有额外的字段。

在您的情况下，还有另一个优势。使用外键引用位置的其他表不必决定是引用超类表还是子类表。引用超类表的单个外键也将隐式引用子类表之一，尽管不清楚是哪一个。

这并不完美，但它非常非常好。去过也做过。

有关更多信息，您可以 google 技术，或在 SO 中找到相关标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:24:58.163

关于什么：

**国家：**

*   `Id`,
*   `Name`.

**地区：**

*   `Id`,
*   `CityId`,
*   `Name`.

**城市：**

*   `Id`,
*   `RegionId`,
*   `Name`.

**社区：**

*   `Id`,
*   `CityId`,
*   `Name`.

这适用于位置类型。但你的主要问题是

> 但粒度并不完全相同。

为了这：

**目的：**

*   `Id`,
*   `Name`,
*   `LocationId`,
*   `Type`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:41:44.043

好问题。

你绝对应该选择你的第一个选择。如果您查看任何数据建模模式书籍，它们都会选择这种方式。

这是北美唯一的，还是全球的？

问题：

Cities/Towns/Hamlets/Villages 是 Divisions 的子项（州/省的通用术语），但不在英格兰，它们是 Country（或者是 County）的子项

邮政区（邮政编码、邮政编码）也是部门的子级，而不是县或市。有些城市完全驻留在拉链中，有些拉链完全驻留在城市中

县也是师的孩子。曼哈顿包含县，而大多数县包含城市。

如果您希望获得全球解决方案，我会阅读 Hay 的企业模型模式。它在 safari 上很便宜。

# ruby-on-rails - 你可以在 Rails 中度过没有约会的时光吗？

> ID：13257344
> 
> 赞同：22
> 
> 时间：2012-11-06T18:47:16.313
> 
> 标签：ruby-on-rails, ruby

我正在尝试从平面文件中导入一些数据并且得到一些奇怪的结果。导入未附加到日期的时间时，为什么还要在该时间中插入日期？

```
1.9.3-p286 :008 > v.arrival_time = Time.parse("10:10")
 => 2012-11-06 10:10:00 -0400 
```

我猜只有一种方法可以单独保存日期，但没有办法单独保存时间，尽管活动记录列类型为 :time。有没有办法让它们分开，例如：

```
1.9.3-p286 :002 > Date.parse("JAN 01 2000")
 => Sat, 01 Jan 2000 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T19:05:45.793

Ruby 中的[`Time`](http://www.ruby-doc.org/core-1.9.3/Time.html)对象使用“ [Unix Time](http://en.wikipedia.org/wiki/Unix_time) ”将时间点存储为自 1970 年 1 月 1 日 00:00 UTC 以来的秒数。各种方法，例如[`strftime`](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)仅更改输出的格式，而不是对象在内部的存储方式。

因此，您需要做出决定：将导入的数据保留为 Time 对象，并注意它实际包含的内容，或者将数据导入为字符串，但放弃`Time`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-27T19:52:15.577

有这个 gem `tod`，`TimeOfDay`它提供了类似的功能。

[https://github.com/JackC/tod](https://github.com/JackC/tod)

# java - 2D 碰撞位图问题

> ID：13257351
> 
> 赞同：1
> 
> 时间：2012-11-06T18:47:34.157
> 
> 标签：java, android, collision-detection

位图 A 的位置是其 X/Y 位置是静态的，位图 B 是移动位图，它从屏幕底部移动到用户在屏幕上触摸的任何位置。当移动位图到达静态位图但它不被识别为碰撞时，移动位图使用浮点数，我四舍五入，静态位图使用 int。下面是一段代码，我想弄清楚我的位图交叉路径需要更改哪些内容才能被视为碰撞

```
 canvas.drawBitmap(rock2, 70, 32, null);
    //this is where it checks to see if the moving bitmaps y coordinate is matched to the Y coordinate of the static bitmap
   if(canvas.getHeight() - Math.round(animY*-1) == (canvas.getHeight() - (canvas.getHeight()-32))){

        Log.d("ALERT", "COLLIDE");

      }
    //the Y value is *-1 because the moving bitmap is starting from the bottom of the screen so this converts the value to positive value 
```

我想知道我的计算是否错误，或者我正在以错误的方式进行这种碰撞。下面是我的运动代码片段

```
 //UP Y ANIMATION
    if(animY*-1 < canvas.getHeight() && !bumpY){

        animY += speedY;

        //IF ROCK IS NOT AT EXTREME LEFT OR EXTREME RIGHT KEEP ON TRACK
        if(animX < (canvas.getWidth()/2) || animX*-1 < (canvas.getWidth()/2) && !bumpX){
            animX += speedX;
            //IF ROCK HITS EDGE LEFT/RIGHT RETURN TO SENDER (INDICATE BUMP)
            if(animX*-1 > (canvas.getWidth()/2) - rock.getWidth()/2 || animX > (canvas.getWidth()/2) - rock.getWidth()/2){
                bumpX = true;
                bumpY = true;
            }
        }

        //IF Y HITS TOP OF SCREEN
        if(animY*-1 > canvas.getHeight()){
            bumpY = true;
        }
    }

    //DOWN Y ANIMATION
    if(animY < 0 && bumpY){ 

        //REVERSE DIRECTION OF Y
         animY  -= speedY;

         //IF ROCK HITS TOP OR SIDE REVERSE X DIRECTION
         if(bumpX || bumpY)
                animX -= speedX;

         //IF AT STARTING POINT
         if(animY > 0){
                bumpY = false;
                bumpX = false;
            }
    }

             //in an ontouch method where the X and Y values are calculated
             case MotionEvent.ACTION_UP:
            finalX = event.getX() - (cross.getWidth() / 2);
            finalY = event.getY() - (cross.getHeight() / 2);
            moveToX = finalX - startX;
            moveToY = finalY - startY;
            speedX = moveToX / 50;
            speedY = moveToY / 50;
            break; 
```

任何提示将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:37:01.817

抱歉，如果这是一个愚蠢的答案，但您的支票应该是：

```
if(canvas.getHeight() - Math.round(animY*-1) >= (canvas.getHeight() - (canvas.getHeight()-32))){ 
```

反而？（将“==”更改为“>=”）否则您只检查岩石何时完全落在（canvas.getheight -32）上，而不是检查过去

# php - 订单日期从最近向下

> ID：13257353
> 
> 赞同：0
> 
> 时间：2012-11-06T18:47:37.973
> 
> 标签：php, mysql

我希望按最近的日期以及从最便宜到更贵的成本金额对我的信息进行排序。我的日期字段是 mysql 中的时间戳，与当前时间戳不同。我也有一个我想组织的“paymentamount”。这是我到目前为止所拥有的，它不起作用。

```
$select = "SELECT * FROM `Carriers` ORDER BY date,paymentamount DESC"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:49:04.023

如果未指定，则默认按升序对列进行排序。当您对两列进行排序时，您必须为每一列指定方向。

在这种情况下，请尝试：

```
SELECT
    *
FROM 
    Carriers
ORDER BY
    date DESC,
    paymentamount DESC 
```

当您说“从最便宜到更贵”时，对于成本，听起来您实际上想要`paymentamount`按升序排序。但是，要成为“最近的日期”的日期将需要按降序排列。在这种情况下，您可以使用：

```
ORDER BY
    date DESC,
    paymentamount ASC 
```

在您的 PHP 代码中（便于复制+粘贴）：

```
$select = "SELECT * FROM `Carriers` ORDER BY date DESC, paymentamount ASC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:50:21.243

最近的日期是 DESC 订单，最便宜的价格是 asc 订单。

```
$select = "SELECT * FROM `Carriers` ORDER BY date DESC, paymentamount ASC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:52:14.967

查询应该是`$select = "SELECT * FROM Carriers ORDER BY date DESC, paymentamount ASC";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T18:54:33.103

我认为您需要为您的两个字段提供不同的排序。看起来您希望您的日期为 DESC，但您的付款金额为 ASC。所以...

```
$select = "SELECT * FROM `Carriers` ORDER BY date DESC,paymentamount ASC"; 
```

# iphone - 使用块时避免保留循环的正确方法是什么

> ID：13257356
> 
> 赞同：10
> 
> 时间：2012-11-06T18:47:42.503
> 
> 标签：iphone, objective-c, automatic-ref-counting, block, weak

在由属性强烈定义的 NSMutableArray 中添加对象的正确方法是什么。

```
[tapBlockView setTapBlock:^(UIImage* image) {
   [self.myImageArray addObject:image]; // self retain cycle
} 
```

如果我将创建类似的弱引用

```
__weak NSMutableArray *array = self.myImageArray;
[tapBlockView setTapBlock:^(UIImage* image) {
    [array addObject:image]; // If I will do this then how will I update original Array ?
} 
```

我也试过

```
__weak id weakSelf = self;
[tapBlockView setTapBlock:^(UIImage* image) {
    [weakSelf storeImageInaNewMethod:image]; // Calling SToreImageInaNewMethod
} 
```

和

```
-(void)storeImageInaNewMethod:(UIImage*)image {
   [self.myImageArray addObject:image]; // This again retaining cycle
} 
```

更新由属性定义的原始对象的正确方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T19:21:45.000

在 maddy 的回答之后 - 这是来自 2012 年 WWDC 关于 GCD 和异步编程的讲座：

```
__weak MyClass *weakSelf = self;

[tapBlockView setTapBlock:^(UIImage* image) {
    __strong MyClass *strongSelf = weakSelf;
    if(strongSelf) {
        [strongSelf.myImageArray addObject:image];
    }
}]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-06T19:17:35.377

尝试第 2 和第 3 的组合。

```
__weak id weakSelf = self;
[tapBlockView setTapBlock:^(UIImage* image) {
    [weakSelf.myImageArray addObject:image];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:34:28.460

在您的情况下，您只需要引用一个由 引用的数组`self`，因此：

```
NSMutableArray *array = self.myImageArray;
[tapBlockView setTapBlock:^(UIImage* image)
                          {
                             [array addObject:image]; // No cycle
                          }]; 
```

*如果*`self.myImageArray`不在不同时间返回不同的数组引用，则可以正常工作。没有循环：当前对象引用数组和块，而块又引用数组。

如果`self.myImageArray`确实以不同的时间返回不同的数组引用，则使用对 的弱引用`self`，您的情况 3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:16:29.450

你的第二个和第三个看起来是正确的。第二个有效，因为您没有创建数组的副本，所以它仍然指向原始数组。第三个有效，因为对 self 的引用很弱。

# php - 在 MySQL 中使用引号

> ID：13257360
> 
> 赞同：1
> 
> 时间：2012-11-06T18:47:58.827
> 
> 标签：php, mysql, sql, opencart

我有一个我目前正在导入 OpenCart 的 1000 种产品的列表。一些产品标题包含一个引号来表示英寸（例如 5"）。

我已使用此查询成功导入了所有这些产品：

```
$data['name'] = mysql_escape_string($data['name']);
$sql = "INSERT INTO ".DB_PREFIX."product-description SET language_id = '1', name = '".$data['name']."'";
$query = mysql_query($sql); 
```

当我在 OpenCart 中时，产品列表也会显示，但是当我去编辑产品时，标题输入字段（用于显示标题）会从 " 符号开始删除标题。

这是一个视觉示例： ![在此处输入图像描述](../Images/69a80c31278226055197ae2a3e8f7815.png)

在这里我们看到标题是完整的 ![在此处输入图像描述](../Images/7738a61d35d436b281c8552ab4cb892a.png)

在这里，我们看到标题在“.

我可以确认这不是 OpenCart 编码错误，因为如果我从界面手动插入带有 " 的产品，它工作正常。错误必须在我的查询中。

如果我的查询有问题，是否有可以更新所有产品而不是重新插入它们的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:33:28.143

openCart 的设计使其在存储**之前**将要存储在数据库中的任何数据中的所有 HTML 转义。所以你只需要修改：

```
$data['name'] = mysql_escape_string($data['name']); 
```

到：

```
$data['name'] = mysql_escape_string(htmlspecialchars($data['name'], ENT_QUOTES)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:58:44.290

我不知道 OpenChart 的内部情况，但这种症状非常明显和常见：

> **在这里，我们看到标题在“.**

这通常意味着将内容传递给 HTML，而无需先进行适当的 HTML 转义。例如，你得到这样的 INPUT：

```
<input type="text" value="#VAL#" /> 
```

`#VAL#`是一个占位符，在需要时被替换为值。但是当你的值是 ie 时`Tablet 7" No Name`，你的 HTML 会像这样结束：

```
<input type="text" value="Tablet 7" No Name" /> 
```

这清楚地解释了为什么它在 first 之后被切割`"`。解决方案是使用所述**转义**，（或使用更合适的名称 - 将特殊字符转换为**实体**），如果是 HTML，则可以在 PHP 中使用`htmlspecialchars()`函数处理，因此您的 SQL 查询与它无关 - 这只是一个问题不正确地处理 HTML 标记。

当实体被正确处理时，上面的例子（在源代码中）看起来像这样：

```
<input type="text" value="Tablet 7&quot; No Name" /> 
```

这样就不会对浏览器造成任何麻烦（并且浏览器还会另外将“实体正确地显示为” `"`）。

更多关于`htmlspecialchars()`HTML 中的一般特殊字符的信息请参见[此处](http://php.net/htmlspecialchars)。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-06T18:52:25.823

当您从表单中收集数据时，只需使用反斜杠转义所有引号`\`。将所有单引号替换`'`为`\'`

# apache-pig - 计算猪的平均值

> ID：13257364
> 
> 赞同：1
> 
> 时间：2012-11-06T18:48:02.283
> 
> 标签：apache-pig

我有格式的数据

```
1,1.2
2,1.3
and so on.. 
```

所以基本上这是 id，val 组合，其中 id 是唯一的......

我想计算所有值的平均值..

```
So here.. avg(1.2,1.3) 
```

我正在阅读文档，但大多数聚合功能都涉及按一些 id 分组..然后使用 AVG ......但是由于 id 是唯一的..我如何对它们进行分组？？？所以基本上这项努力的结果将是一个浮动。任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:38:05.080

`GROUP X ALL`应该解决你的问题:)

```
A = LOAD 'data' USING PigStorage(') AS (f1:int, f2:int);
B = GROUP A ALL;
AV = FOREACH B GENERATE AVG(A.f1);
DUMP AV; 
```

# ios - Cocos3D关键帧动画

> ID：13257366
> 
> 赞同：0
> 
> 时间：2012-11-06T18:48:06.747
> 
> 标签：ios, xcode, cocos2d-iphone, cocos3d

我有一个可以加载到我的 cocos3d 程序中的 pod 文件。它在 Windows XP 中被导入到 blender 中，然后直接导出为 .pod 格式。我正在使用搅拌机 2.64

如何让嵌入的关键帧动画在 cocos3d 中播放。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T02:05:01.143

这是一个示例，如果您想运行动画 10 秒并在名为 playerNode 的对象上永远重复：

```
CCActionInterval *stride = [CC3Animate actionWithDuration:10.0];
[playerNode runAction:[CCRepeatForever actionWithAction:stride]]; 
```

# php - 解析自：x; 但不是 lfrom:x;

> ID：13257367
> 
> 赞同：0
> 
> 时间：2012-11-06T18:48:07.440
> 
> 标签：php, regex, string, preg-match

我正在尝试使用以下内容解析字符串：

```
preg_match( "|from:(.*?);|", $string, $match); 
```

但后来我发现字符串也可以包含`lfrom:`和`_from:`

字符串如何的几个示例：

> var1:34234;来自:website1.com;lfrom:website2.com;var2:343423; lfrom:website1.com;var1:4234234;from:website2.com from:website1.com;_from:website2.com;lfrom:website2.com;var1:43523;

我如何只解析`from:(.*?);`而不解析`lfrom`,`_from`等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:51:51.047

您可以使用断言：

```
|(?<!l)from:(.*?);| 
```

或查找前面的`;`或行开头：

```
|(;|^)from:(.*?);|m 
```

将通用`.*?`匹配替换为`[^;]*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:00:17.480

我会给你解决方案，但我最好向你解释一下lookbehind修饰符。

例如，在正则表达式中，每次“匹配” a`h`时，`h`都会将 1 添加到正则表达式当前所在位置的指针，因此您不想向指针“添加”任何内容。您只想查看`from`前面是否有 a`;\s\b`或字符串的开头。您不想匹配 VOID，因为到处都有空隙！

所以，举个例子：`(?<a)b`这将匹配一个前面`b`有一个的`a`。所以它只是做下一个：当`b`找到它时，它会在它之前查找，如果有`a`它匹配正则表达式。

所以...会在它有之前`(?<=[;\s\b]|^)from:(\w+\.\w+)`匹配那个`from``[;\s\b] OR ^ (The string start)`

[演示](http://regex101.com/r/mQ0zR4)

很简单吧！？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:51:19.203

假设前面`from`是空格或`;`

```
/[\s\b;]from:([^;]+);/ 
```

这只会匹配`from`前面有空格、单词边界或`;`. 我也更喜欢缩小捕获范围，即`[^;]+`vs. `[.*?]`;。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T18:51:53.380

有一个概念叫做（否定）lookbehind，它断言你当前的位置是（不是）在某些事情之前。我想，在这种情况下，我会采用积极的后视方式，并断言`from`前面是字符串的开头、换行符或`;`：

```
preg_match('|(?<=^|;)from:(.*?);|m', $string, $match); 
```

确保您使用 multi-line mode `m`，这样它`^`也将在每行的开头匹配，而不仅仅是在字符串的开头。

如果您**只想**排除`l`和`_`前面`from`但接受任何其他字符，那么负面的向后看可能是您正在寻找的：

```
preg_match('|(?<![l_])from:(.*?);|m', $string, $match); 
```

后视的方便之处在于，它们不包含在实际匹配中。他们只是检查那里有什么而不​​实际消费它。[这里有一些阅读。](http://www.regular-expressions.info/lookaround.html)

# jquery - 使用 jQuery Cycle 将类添加到 body 标签

> ID：13257368
> 
> 赞同：0
> 
> 时间：2012-11-06T18:48:07.207
> 
> 标签：jquery, html, cycle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:51:32.700

我不确定我是否理解你，但这会起作用：

```
$('body').removeClass('slide').addClass('slide'); 
```

您不需要元素`.eq()`上的功能。`body`

另外，为什么要删除班级幻灯片然后重新添加？这应该足够了：

```
$('body').addClass('slide'); 
```

[在此处](http://api.jquery.com/eq/)阅读有关该`.eq()`函数的信息- 它是一个过滤器函数，用于匹配指定索引处的元素。

# java - Try Catch 不断循环而不是要求另一个值？

> ID：13257374
> 
> 赞同：0
> 
> 时间：2012-11-06T18:48:19.950
> 
> 标签：java, exception-handling, try-catch

我有以下代码：

```
Scanner inputSide = new Scanner(System.in);

double side[] = new double[3];
int i = 0;
do{
    try{
    System.out.println("Enter three side lengths for a triangle (each followed by pressing enter):");
    side[i] = inputSide.nextDouble();
    i++;
    }
    catch(Exception wrongType){
        System.err.println(wrongType);
        System.out.println("Please enter a number.  Start again!!");
        i=0;
    }
}
while(i<3); 
```

如果我没有输入错误的数据类型，它可以正常工作并且执行它的含义，但是如果我输入的不是双精度类型，那么它会一遍又一遍地循环，在 try 和 catch 块中打印所有内容，而不是等待我输入另一个双。

关于它为什么这样做的任何帮助 - 因为我似乎无法理解为什么 - 将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:50:22.900

问题是，您使用`input.nextDouble`了方法，它只读取输入中的下一个标记，因此`newline`在最后跳过了。请参阅[Scanner.nextDouble](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextDouble%28%29)

现在，如果您第一次输入错误的值，那么它将考虑`newline`作为下一个输入。这也将是无效的。

`input.nextLine`您可以在 catch 块中添加一个空。

```
catch(Exception wrongType){
    System.err.println(wrongType);
    System.out.println("Please enter a number.  Start again!!");
    i=0;
    input.nextLine();  // So that it consumes the newline left over
} 
```

现在，您`nextLine()`将阅读`linefeed`剩下的内容，并且换行将不会作为您`nextDouble`下次的输入。在这种情况下，即使在您提供任何输入之前，它也会失败。

# javascript - Js-interop pub 安装失败

> ID：13257378
> 
> 赞同：2
> 
> 时间：2012-11-06T18:48:32.207
> 
> 标签：javascript, interop, dart

我无法通过 pub 安装 js-interop。我尝试创建一个新项目以查看问题是否与我的实际项目有关，但它在新项目中也不起作用。

这是我的 pubspec.yaml 的样子：

```
name:  Test
description:  A sample application

dependencies:
  js: { hosted: js } 
```

当我尝试从 Dart 的编辑器菜单中运行“Pub install”时，我收到以下消息：

```
Running pub install ...
Pub install fail, Resolving dependencies...
Package "unittest" doesn't have a pubspec.yaml file. 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:13:09.683

好的，这就是我让 js-interop 工作的方法：

创建一个新的应用程序（我称为我的互操作）

将依赖项添加到 pubspec.yaml：

```
dependencies:
    js: 0.0.9 
```

跑`pub install`

在我的 interoper.dart 文件中导入包：

```
import 'package:js/js.dart'; 
```

您可以在[http://pub.dartlang.org/packages/js上查看说明](http://pub.dartlang.org/packages/js)

现在，我确实遇到了一个问题：编辑抱怨它找不到包。我认为这是编辑器中的一个错误：当我关闭文件然后重新打开它时，问题就消失了。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T02:27:53.887

根据 John Evans 在上一个答案中的评论，很可能是因为现在 pub 中存在一个影响 Windows 用户的错误。请参阅：dartbug.com/6513

# java - 如何在同一个终端中从我的 java 应用程序打开 vi 编辑器？

> ID：13257379
> 
> 赞同：3
> 
> 时间：2012-11-06T18:48:30.833
> 
> 标签：java, linux

如何`vi`从我的 java 应用程序中打开编辑器？我已经试过了

```
Process p = new ProcessBuilder("xterm","-e","vi /backup/xyz/test/abc.txt").start();  

int exitVal = p.waitFor();
System.out.println("Exited with error code "+exitVal); 
```

但这`vi`会在一个新终端中打开。**我希望 vi 编辑器在我的应用程序正在运行的同一终端中打开**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:56:30.443

应该很简单：省略 xterm，只需启动 vi：

```
Process p = new ProcessBuilder("vi", "/backup/xyz/test/abc.txt").start(); 
```

如果您需要 vi 的更多命令行参数，请将它们作为单独的字符串添加，而不是在第一个参数的 "" 内。

并且启动像 vi 这样的终端程序自然需要从可见终端启动 java 应用程序，所以 vi 有一个可以使用的终端，但我认为是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-30T16:14:15.507

问题在这里突出显示：

[如何在 commons-exec 下从 Java 中启动 VI？](https://stackoverflow.com/questions/9690702/how-can-i-launch-vi-from-within-java-under-commons-exec)

但是，从 Java 1.7 开始，您可以使用下一个示例来透明地重定向并拥有完整的控制台功能

```
 System.out.println("STARTING VI");
     ProcessBuilder processBuilder = new ProcessBuilder("/usr/bin/vi");
     processBuilder.redirectOutput(ProcessBuilder.Redirect.INHERIT);
     processBuilder.redirectError(ProcessBuilder.Redirect.INHERIT);
     processBuilder.redirectInput(ProcessBuilder.Redirect.INHERIT);

     Process p = processBuilder.start();
      // wait for termination.
      p.waitFor();
    System.out.println("Exiting VI"); 
```

这将允许您透明地打开 VI。

# xsd - 如何正确使用 GenerateDS 进行 DDEX XML 绑定

> ID：13257384
> 
> 赞同：4
> 
> 时间：2012-11-06T18:48:47.790
> 
> 标签：xsd, xml-parsing, xml-binding, ddex, python-generateds

我对用于读取符合此架构的输入文件的 Python XML 绑定感兴趣：http: [//ddex.net/xml/ern/341/release-notification.xsd](http://ddex.net/xml/ern/341/release-notification.xsd)

不过，此 XSD 依赖于许多其他 XSD，最重要的是：http: [//ddex.net/xml/20120404/ddexC.xsd](http://ddex.net/xml/20120404/ddexC.xsd)和 [http://ddex.net/xml/20120404/ddex.xsd](http://ddex.net/xml/20120404/ddex.xsd)

我的第一次尝试是使用[generateDS](http://cutter.rexx.com/~dkuhlman/generateDS.html)。如果我使用 --no-process-includes ，我能够成功地为 release-notification.xsd 生成绑定：

```
./generateDS.py --no-process-includes -o release-notification.py release-notification.xsd 
```

但是，这给我留下了一个几乎没用的 Python 对象，因为大多数 ComplexTypes 是在[ddexC.xsd](http://ddex.net/xml/20120404/ddexC.xsd)中定义的。

如果我在没有 --no-process-includes 的情况下尝试它，我会得到：

```
RuntimeError: Extension/restriction recursion detected.
Suggest you check definitions of types ArtistRole and ArtistRole. 
```

所指的定义是这样的：

```
<xs:element name="ArtistRole" maxOccurs="unbounded" type="ddexC:ArtistRole">
....
<xs:complexType name="ArtistRole">
      <xs:simpleContent>
         <xs:extension base="ddex:ArtistRole">
.... 
```

因此，似乎 ddex 和 ddexC 命名空间以某种方式混合在一起，并创建了一个循环引用。

这里有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T06:22:23.417

您可能想查看[https://github.com/ddexnet](https://github.com/ddexnet)，它有一个 ddex lint 脚本，您可以使用该脚本生成完整的 python 对象，这些对象根据位于[http://ddex.net/xml/的完整 ERN 模式进行验证2010/ern-main/32](http://ddex.net/xml/2010/ern-main/32)。

（linter 在底层也使用了 ddexC 命名空间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T00:45:15.113

我已经为新发布消息创建了一个对象模型，作为我正在处理的[DDEXUI的一部分，这可能会对您有所帮助，ddex 模块应该为您提供一些您可以使用的东西。](https://github.com/willm/DDEXUI)我计划在某个时候将它剥离到一个单独的模块中。有关如何使用它的示例，请参见测试目录。

# solr - Solr - 多值字符串字段和具有多值的单值字符串有什么区别？

> ID：13257387
> 
> 赞同：0
> 
> 时间：2012-11-06T18:48:51.673
> 
> 标签：solr

如果我需要在单个字段名称下索引一组值，我应该使用多值字段还是应该使用单值字段并将该字段中的所有值用空格分隔？

字段类型是字符串。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:08:31.667

您可以将多值字段视为数组或列表...对于您的问题，这取决于您将在该字段上运行哪种操作。

如果您会经常向该字段添加一些内容，则应该使用多值字段。无需在每次添加新项目时设置单个字符串字段，您只需将其添加到多值字段即可。此外，如果您对字段进行多值处理，则在更新它时不需要知道整个列表。但是对于单个字段，您需要知道其中的旧值..

使其更清晰；

假设您需要索引“aaa bbb ccc”..如果您将它们放入单个字段中，它将类似于

```
<str>aaa bbb ccc</str> 
```

如果您需要将 ddd 添加到该字段，那么您实际上需要将 aaa bbb ccc ddd 添加到该字段（我假设您不想在每次更新时检查该字段的旧值）

但是如果你使用多值字段，对于 aaa bbb ccc 它将类似于

```
<field><str>aaa</str><str>bbb</str><str>ccc</str></field> 
```

对于这种情况，当您需要添加 ddd 时，您不必知道旧值，只需添加 ddd 即可完成...

但是如果该字段也将被删除，您应该使用单个字段，因为 solr 不支持从多值字段中删除（尽管您可以通过破解源代码轻松地做到这一点）

我希望它有所帮助......因为你提供的信息有点太少，无法给出明确的答案

# entity-framework - linq 中的多个聚合到实体（代码优先）

> ID：13257388
> 
> 赞同：1
> 
> 时间：2012-11-06T18:48:53.187
> 
> 标签：entity-framework, entity-framework-4, linq-to-entities

给定以下模型，我希望能够检索单个玩家获得的积分数以及给定时间段内所有玩家获得的平均积分数。这应该在单个数据库查询中完成（我还想要其他统计数据，例如每个团队的平均得分，稍后会出现，但概念应该是相同的）。

度过了糟糕的一天，却一无所获。有人可以帮我吗？

```
public class Player
{
    public int Id { get; set; }
    public ICollection<PlayerGame> PlayerGames { get; set; }

    ...
}

public class PlayerGame
{
    public int Id { get; set; }

    public int Points { get; set; }

    public int PlayerId { get; set; }
    public Player Player { get; set; }

    public int GameId { get; set; }
    public Game Game { get; set; }

    ...
}

public class Game
{
    public int Id { get; set; }

    ...
} 
```

编辑：

好的。暂时将游戏实体排除在外，并更改您的代码以适应我的回购。这就是我现在所拥有的：

```
var query = from p in _playerRepository.Query()
                        from pg in p.PlayerGames
                        group new { p, pg } by 1 into ppg
                        select new
                        {
                            SinglePlayerPointsGained = (from x in ppg
                                                        where x.p.Id == playerId && x.pg.Date > startDateTime
                                                        select x.pg.Points).Sum(),
                            AveragePoints = (from x in ppg 
                                             where x.pg.Date > startDateTime
                                             select x.pg.Points).Average(),                            
                        }; 
```

所以现在我只需要平均点数计算来考虑在评论中提到的那个时期没有参加过比赛的球员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:24:49.233

我假设`Game`班级有一个`DateTime`财产。基本思想是使用`group by 1`技巧

```
DateTime startDateTime, endDateTime;

int playerId;

var query = from p in context.Players
            join pg in context.Players on p.Id equals pg.PlayerId
            join g in context.Games on pg.GameId equals g.Id               
            group new { p, pg, g } by 1 into ppgg
            select new {
               SinglePlayerPointsGained = (from x in ppgg
                                           where x.p.PlayerId == playerId
                                           where x.g.DateTime >= startDateTime && x.g.DateTime <= endDateTime
                                           select x.pg.Points ).Sum(),
               AveragePoints = (from x in ppgg
                                group x.pg.Points by x.p.PlayerId into g
                                select g.Key).Average()

            }; 
```

# ios - Twitter bootstrap modal在消失后使屏幕无法点击

> ID：13257390
> 
> 赞同：23
> 
> 时间：2012-11-06T18:49:00.973
> 
> 标签：ios, twitter-bootstrap

我尝试在 iOS5 中使用 twitter 引导框架的模态特性。用户单击关闭按钮后，模式正确消失，但屏幕的其他项目似乎不可点击。这种行为只发生在 iOS5 下。

它在 iOS 6 和任何桌面浏览器中都能正常工作。

这里是关闭按钮：

```
<a type="button" class="close" data-dismiss="modal" aria-hidden="true">×</a> 
```

这可能是因为 iOS5 中缺少对 html5/css3 的支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T01:44:34.260

利亚姆先生说的是真的：模态框还将显示背景覆盖，以防止背景视图之外的触摸。您可能会在调试中捕获它并编写自己的 js 以在单击按钮时关闭它。像 $('.your_class').hide()

另请注意，当您打开模态窗口并离开页面时，可能会出现此问题。如果您在设备上单击“返回”，您可能会看到同样的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T15:00:32.207

我知道这是一个非常古老的话题，但我想我还是会发布解决方案，因为这仍然是 bootstrap v. 3.2.0 的问题。这只是 iOS 5.0.0 到 5.1.1 的问题。

`-webkit-overflow-scrolling`问题与iOS 5 上的错误实现有关。

我只是`ios5`通过 JavaScript 添加了一个类`html`（通过用户代理检测，虽然也不是最好的方法）。然后您可以使用以下内容，它将解决问题。

```
.ios5 .modal {
    -webkit-overflow-scrolling: auto;
} 
```

# javascript - 如何通过 javascript 将 nginclude 添加到 DOM？

> ID：13257397
> 
> 赞同：0
> 
> 时间：2012-11-06T18:49:49.390
> 
> 标签：javascript, html, angularjs

我希望将带有 ng-include="'abc.html'" 的 div 包含到来自 javascript 的 HTML 中。请让我知道如何添加它，因为我面临的问题是在“''”中获取 ng-include 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:04:11.913

有多种方法可以有条件地在角度中包含部分。这里有几个方法。

1.  使用 ng-show / ng-hide 显示或隐藏使用 ng-include 包含的元素。这只实现了显示或隐藏，并没有将其从 DOM 中取出。

2.  在 ng-include div 上放置一个 ng-switch。更改开关观察到的变量，并使用 ng-switch 值切换包含或不包含。

3.  ng-include 本身接受一个变量。如果您不设置该变量或将其设置为 null，那么在您将变量的值更改为指向您的部分位置之前，它不会显示任何内容。

# javascript - JavaScript event.target IE8

> ID：13257400
> 
> 赞同：5
> 
> 时间：2012-11-06T18:50:08.467
> 
> 标签：javascript, jquery

> **可能重复：**
> [Javascript IE 事件](https://stackoverflow.com/questions/960419/javascript-ie-event)

我在 IE8 执行我的脚本时遇到问题。所有其他浏览器都很好。实际错误是：'tagName 为空或不是对象'。我意识到我的脚本可能不是最好的，并且可以使用工作，但我真的需要它在 IE8 中工作。该脚本包含在一个 document.ready jQuery 函数中，我的 jquery 版本是 1.5.2。我感觉主要问题与此有关，`var target = ev.target;`但我不确定。

有问题的脚本部分是：

```
var hrNav = document.getElementById('hrNavListen');
    var hrNav2 = document.getElementById('hrNavListenTwo');
    var startButton = document.getElementById('startButton');

    //Check to see if the user is on an iPad or iPhone
    var isiPad = (navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i)) != null;

    //If the user is on an iphone or ipad, use the touchstart event listener rather than click. Use click otherwise, or use onclick for IE users.
    if (isiPad == true) {
        hrNav.addEventListener('touchstart', highlight);
    } else {
        if(hrNav.addEventListener){  
            hrNav.addEventListener('click', highlight); 
            } else {  
                hrNav.attachEvent('on'+'click', highlight);
        }
    }
/* MAIN FUNCTION TO HIGHLIGHT THE CORRECT ITEM, AS WELL AS FILL IN CORRECT DATA */
    function highlight(ev) {

        var target = ev.target;

        //Function to set the dataSection variable to the appropriate string so that the correct section is loaded
        function switchContent(var1,var2,var3,var4,var5,var6,var7,var8,var9,var10,var11,var12,var13,var14,var15,var16,var17,var18) {
            switch (target.getAttribute('data-section')) {
                case var1:
                    var dataSection = 'hrPortalMain';
                    var btn = false;
                    break;
                case var2:
                    var dataSection = 'handbookMain';
                    var btn = true;
                    break;
                case var3:
                    var dataSection = 'handbookSection1';
                    var btn = true;
                    break;
                case var4:
                    var dataSection = 'handbookSection2';
                    var btn = true;
                    break;
                case var5:
                    var dataSection = 'handbookSection3';
                    var btn = true;
                    break;
                case var6:
                    var dataSection = 'handbookSection4';
                    var btn = true;
                    break;
                case var7:
                    var dataSection = 'handbookSection5';
                    var btn = true;
                    break;
                case var8:
                    var dataSection = 'handbookSection6';
                    var btn = true;
                    break;
                case var9:
                    var dataSection = 'handbookSection7';
                    var btn = true;
                    break;
                case var10:
                    var dataSection = 'handbookSection8';
                    var btn = true;
                    break;
                case var11:
                    var dataSection = 'handbookSection9';
                    var btn = true;
                    break;
                case var12:
                    var dataSection = 'handbookSection10';
                    var btn = true;
                    break;
                case var13:
                    var dataSection = 'handbookSection11';
                    var btn = true;
                    break;
                case var14:
                    var dataSection = 'antiDiscrimination';
                    var btn = true;
                    break;
                case var15:
                    var dataSection = 'substanceAbuse';
                    var btn = true;
                    break;
                case var16:
                    var dataSection = 'disclosureRelease';
                    var btn = true;
                    break;
                case var17:
                    var dataSection = 'emergencyContact';
                    var btn = true;
                    break;
                case var18:
                    var dataSection = 'submitForms';
                    var btn = true;
                    break;
            }/* /end switch */

            //Use jQuery AJAX to load the appropriate html
            $.ajax({
                url: "views/"+dataSection+".php",
                cache: false,
                dataType: "html"
            }).done(function( html ) { 
                $("#hrContent").html(html);
            });

            return dataSection;
        }

        if (target.nodeName === 'LI') {

            $("li").removeClass("navActive");
            $("span").removeClass("navActiveText");
            $("#hrarrow").remove();
            $(".navBodyText").css('margin-left','30px');
            $("#navMain,#navMOCForms,#navHandbookMain,#navGeneralPolicyMain,#navBenefitsMain,#navTaxMain").css('margin-left','0px');

            target.innerHTML += '<img src="img/hrarrow.png" id="hrarrow"/>';
            target.className += ' navActive';
            childSpan = target.firstChild;
            childSpan.style.marginLeft = '0';
            childSpan.className += ' navActiveText';
            childSpan.firstChild.className += ' navActiveText';

            switch (target.firstChild.id) {
                case 'navMain':
                    $("#navMain").css('margin-left','-30px');
                    break;
                case 'navMOCForms':
                    $("#navMOCForms").css('margin-left','-30px');
                    break;
                case 'navHandbookMain':
                    $("#navHandbookMain").css('margin-left','-30px');
                    break;
                case 'navGeneralPolicyMain':
                    $("#navGeneralPolicyMain").css('margin-left','-30px');
                    break;
                case 'navBenefitsMain':
                    $("#navBenefitsMain").css('margin-left','-30px');
                    break;
                case 'navTaxMain':
                    $("#navTaxMain").css('margin-left','-30px');
                    break;
            }/* /end switch */

            //Determine which content to load depending on the data-* HTML attribute of each LI elements
switchContent('hrPortalMain','handbookMain','handbookSection1','handbookSection2','handbookSection3','handbookSection4','handbookSection5','handbookSection6','handbookSection7','handbookSection8','handbookSection9','handbookSection10','handbookSection11','antiDiscrimination','substanceAbuse','disclosureRelease','emergencyContact','submitForms');

        }/* /endif */

        if (target.nodeName === 'SPAN') {

            $("li").removeClass("navActive");
            $("span").removeClass("navActiveText");
            $("#hrarrow").remove();
            $(".navBodyText").css('margin-left','30px');
            $("#navMain,#navMOCForms,#navHandbookMain,#navGeneralPolicyMain,#navBenefitsMain,#navTaxMain").css('margin-left','0px');

            target.className += ' navActiveText';
            parent = target.parentNode;

            if (parent.tagName === 'SPAN') {
                parent.parentNode.className += ' navActive';
                parent.className += ' navActiveText';
                parent.parentNode.innerHTML += '<img src="img/hrarrow.png" id="hrarrow"/>';
                $(".navActiveText").css('margin-left','0px');
            } else if(parent.tagName === 'LI') {
                parent.className += ' navActive';
                target.firstChild.className += ' navActiveText';
                parent.innerHTML += '<img src="img/hrarrow.png" id="hrarrow"/>';
                $(".navActiveText").css('margin-left','0px');
            }/* /endif */

            switch (target.id) {
                case 'navMain':
                    $("#navMain").css('margin-left','-30px');
                    break;
                case 'navMOCForms':
                    $("#navMOCForms").css('margin-left','-30px');
                    break;
                case 'navHandbookMain':
                    $("#navHandbookMain").css('margin-left','-30px');
                    break;
                case 'navGeneralPolicyMain':
                    $("#navGeneralPolicyMain").css('margin-left','-30px');
                    break;
                case 'navBenefitsMain':
                    $("#navBenefitsMain").css('margin-left','-30px');
                    break;
                case 'navTaxMain':
                    $("#navTaxMain").css('margin-left','-30px');
                    break;
            }/* /end switch */

            //Determine which content to load depending on the data-* HTML attribute of each LI elements
switchContent('hrPortalMain','handbookMain','handbookSection1','handbookSection2','handbookSection3','handbookSection4','handbookSection5','handbookSection6','handbookSection7','handbookSection8','handbookSection9','handbookSection10','handbookSection11','antiDiscrimination','substanceAbuse','disclosureRelease','emergencyContact','submitForms','employeeBenefitsPackage','flexSpending','dentalEnrollment','groupEnrollment','w4','i9','directDeposit','holidayPayroll','medOneForms','generalPolicy','benefitsMain','compensationMain');

        }/* /endif */

    }/* /end highlight function */ 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-06T18:56:24.177

IE8 不会将事件对象的实例传递给处理程序，您必须从全局对象中获取它：

```
ev = ev || window.event; 
```

它也不共享所有属性和方法，包括`target`：

```
var target = ev.target || ev.srcElement; 
```

[这是一个很好的网站](http://www.quirksmode.org/js/events_order.html)，它解释了 MS 对事件的看法与 W3C 方法之间的差异，以及随之而来的所有令人头疼的问题……
不`ev.preventDefault()`，但`ev.returnValue = false;`或`ev.cancelBubble = true;`代替`ev.stopPropagation();`等……

# c# - C# Prepared Statement 和多个查询

> ID：13257401
> 
> 赞同：2
> 
> 时间：2012-11-06T18:50:13.787
> 
> 标签：c#, .net, ado.net, odbc, prepared-statement

是否可以使用相同的预处理语句（相同的`OdbcCommand`对象）执行多个查询？

以下是我拥有的代码，并引发以下异常：`System.Data.Odbc.OdbcException was caught Message=ERROR [07006] [IBM][CLI Driver] CLI0102E Invalid conversion. SQLSTATE=07006`

```
 ...
        odbcConnection = myConnection.getOdbcConnection();
        odbcConnection.Open();
        odbcCommand = odbcConnection.CreateCommand();
        odbcTrans = odbcConnection.BeginTransaction(IsolationLevel.ReadCommitted);
        odbcCommand.Transaction = odbcTrans;
try{
    odbcCommand.CommandText = queryStatement1();
            odbcCommand.Parameters.AddWithValue("?ID1", parameter1);
            odbcCommand.Parameters.AddWithValue("?ID2", parameter2);
    ...
    odbcCommand.Parameters.AddWithValue("?ID11", parameter3);
    odbcCommand.Prepare();
            odbcCommand.ExecuteNonQuery();

    odbcCommand.CommandText = queryStatement2();
    odbcCommand.Parameters.AddWithValue("?ID1", parameter4);
            odbcCommand.Parameters.AddWithValue("?ID2", parameter5);
    ...
    odbcCommand.Parameters.AddWithValue("?ID13", parameter6);
    odbcCommand.Prepare();
            odbcCommand.ExecuteNonQuery();
    odbcTrans.Commit();
} catch(Exception e){ ... }
... 
```

相同`OdbcCommand`的对象，两个不同的查询...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:47:13.607

找到了答案。我只需要在为命令分配不同的查询字符串之前清除命令参数

```
...
odbcCommand.ExecuteNonQuery();

            odbcCommand.Parameters.Clear();
            odbcCommand.CommandText = queryStatement2();
... 
```

# php - 为什么调整大小的PNG图像比原始图像大得多？

> ID：13257405
> 
> 赞同：9
> 
> 时间：2012-11-06T18:50:20.893
> 
> 标签：php, image, resize, png

我很困惑为什么使用 GD 库调整大小的 PNG 图像的大小比原始图像大得多。

这是我用来调整图像大小的代码：

```
// create image from posted file
$src = imagecreatefrompng($file['tmp_name']);
// get original size of uploaded image
list($width,$height) = getimagesize($file['tmp_name']);
if($width>$maxImgWidth) {
    // resize the image to maxImgWidth, maintain the original aspect ratio
    $newwidth = $maxImgWidth;
    $newheight=($height/$width)*$newwidth;
    $newImage=imagecreatetruecolor($newwidth,$newheight);

    // fill transparent with white
    /*$white=imagecolorallocate($newImage, 255, 255, 255); 
    imagefill($newImage, 0, 0, $white);*/

    // the following is to keep PNG's alpha channels
    // turn off transparency blending temporarily
    imagealphablending($newImage, false);
    // Fill the image with transparent color
    $color = imagecolorallocatealpha($newImage,255,255,255,127);
    imagefill($newImage, 0, 0, $color); 
    // restore transparency blending
    imagesavealpha($newImage, true);

    // do the image resizing by copying from the original into $newImage image
    imagecopyresampled($newImage,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

    // write image to buffer and save in variable
    ob_start(); // Stdout --> buffer
    imagepng($newImage,NULL,5); // last parameter is compression 0-none 9-best (slow), see also http://www.php.net/manual/en/function.imagepng.php
    $newImageToSave = ob_get_contents(); // store stdout in $newImageToSave
    ob_end_clean(); // clear buffer
    // remove images from php buffer
    imagedestroy($src);
    imagedestroy($newImage);
    $resizedFlag = true;
} 
```

然后我将 $newImageToSave 保存为 mysql 数据库中的 blob。

我试图阻止 alpha 通道，只设置白色背景，文件大小没有显着变化。我尝试设置“压缩”参数（0 到 9），但仍然比原来的大。

**示例**
我拍摄了这张[图片](http://upload.wikimedia.org/wikipedia/commons/5/53/Wikipedia-logo-en-big.png)(1058px*1296px) 并将其调整为 900px * 1102px。这些是结果：

原始文件：328 KB
PNG（0）：3,79 MB
PNG（5）：564 KB
PNG（9）：503 KB

任何提示如何使调整后的图像的文件大小更小，我们都表示赞赏。

--

PS：我认为它可能是位深度，但如您所见，上面的示例图像有 32 位，而调整大小的图像是 24 位。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T19:31:13.557

您调用的大多数用于缩小图像、等的函数都不会`imagefill`导致`imagealphablending`文件大小增加。

保持透明使用`imagecreate`，而不是`imagecreatetruecolor`只做一个简单的调整大小

```
$file['tmp_name'] = "wiki.png";
$maxImgWidth = 900;
// create image from posted file
$src = imagecreatefrompng($file['tmp_name']);
// get original size of uploaded image
list($width, $height) = getimagesize($file['tmp_name']);
if ($width > $maxImgWidth) {
    $newwidth = $maxImgWidth;
    $newheight = ($height / $width) * $newwidth;
    $newImage = imagecreate($newwidth, $newheight);
    imagecopyresampled($newImage, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);
    imagepng($newImage, "wiki2.png", 5); 
    imagedestroy($src);
    imagedestroy($newImage);
    $resizedFlag = true;
} 
```

**最终大小：164KB**

# java - java方法使用泛型将Enumeration转换为HashMap

> ID：13257407
> 
> 赞同：-1
> 
> 时间：2012-11-06T18:50:22.290
> 
> 标签：java, generics, hashmap, enumeration, using

我正在尝试抽象一种方法，该方法从枚举中加载带有整数、字符串值的静态哈希图。我的具体方法看起来像这样

```
public static Map<Integer, String> myMap = new HashMap<Integer, String>;
static{
    Enumeration<MyEnum> enumTokens = MyEnum.getTokens(); //returns an enumeration of 'MyEnum'
    //like to abstract  the following into a method
    while (enumTokens.hasMoreElements()){
        MyEnum element = (MyEnum) enumTokens.nextElement();
        myMap.put(element.intValue(), element.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:34:43.470

Here's a generic method that will do it for you.

Note that you haven't said what the significance of `intValue()` is, so I've created an interface for it.

```
interface HasIntValue {
    int intValue();
}

public static <E extends Enumeration<E> & HasIntValue> Map<Integer, String> convertToMap(E e) {
    Map<Integer, String> map = new HashMap<Integer, String>();
    while (e.hasMoreElements()){
        E element = e.nextElement();
        map.put(element.intValue(), element.toString());
    }
    return map;
} 
```

Note the syntax that allows a type bound to *both* `Enumeration` *and* `HasIntValue`

# css - 流程图：更改游标

> ID：13257411
> 
> 赞同：1
> 
> 时间：2012-11-06T18:51:03.223
> 
> 标签：css, cursor, jquery, flot

我想使用[http://www.flotcharts.org/更改散点图下的光标样式](http://www.flotcharts.org/)

例如，我想在选择要缩放的选择时将光标更改为十字准线等，或者在显示工具提示时将光标更改为指针。

我尝试过 JQuery CSS 修饰符，例如 placeholder.css('cursor', 'pointer'); 但没有成功。任何想法 ？

谢谢乔治

# php - 打印与内容类型相关的所有“文章”

> ID：13257419
> 
> 赞同：1
> 
> 时间：2012-11-06T18:51:32.063
> 
> 标签：php, drupal, drupal-7, drupal-fields, drupal-field-api

我的内容类型，计划有一篇或多篇“文章”。

以下php代码，我可以全部获取：

```
<?php print render($content['field_articolo_di_riferimento']);?> 
```

我得到以下结果：

![在此处输入图像描述](../Images/0457c64648450fd6b9e98a3fbb307f26.png)

我想删除文章链接上方的粗体标题，所以我尝试了：

```
<?php 
  $lenght = count($field_articolo_di_riferimento);

  for($i=0; $i<lenght; $i++){
  print render($content['field_articolo_di_riferimento'][$i]);
}
?> 
```

但不起作用。这可能是我用来计算数组长度的错误方法。

这是我的内容类型的结构：

![在此处输入图像描述](../Images/2564077640731e6efa7eaa11dad10499.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:59:02.537

相反，你为什么不去你`Manage display`的内容类型。`?q=admin/structure/types/manage/CONTENT_TYPE/display`

在您的字段旁边`Articolo di Riferimento`选择`Label`值`<Hidden>`。这应该从节点显示中隐藏标签。

这非常相似。除了您使用的代码**永远不会**影响标签。

希望这会有所帮助……穆罕默德。

# matlab - 在matlab中通过概率值改变一个值

> ID：13257425
> 
> 赞同：0
> 
> 时间：2012-11-06T18:51:50.827
> 
> 标签：matlab

我想通过概率值更改变量，例如我在 matlab 中有 [ 0 0 1 1 1 1 0 1 ] 并且**概率 = 0.01**更改它的任何元素，我如何在 matlab 中实现这一点？（我想在 GA 中使用它，并且 p = 0.01 做染色体基因的突变）感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:59:31.787

首先，确定您要更改的所有元素

```
array = [0 0 1 1 1 1 0 1];
sizArray = size(array);
probability = 0.01;

toChangeIdx = rand(sizArray) < probability; 
```

然后，您可以在需要的地方翻转零和一

```
array(toChangeIdx) = 1-array(toChangeIdx); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:00:43.860

您的代码的相关条件是

```
if rand() < probability
   % Flip your bit here, e.g. 
   % bitToFlip = randi(length(genome));
   % genome(bitToFlip) = 1 - genome(bitToFlip);
end 
```

这将以`if`完全 的概率运行语句内的代码`probability`。

# ios - 将登录信息传递给 webview

> ID：13257428
> 
> 赞同：0
> 
> 时间：2012-11-06T18:51:53.223
> 
> 标签：ios

我正在构建一个应用程序，该应用程序在第一个视图中通过 facebook SDK 使用 FaceBook 登录，我想将身份验证信息传递给包含 UIWebView 的下一个视图。我需要在 UIWebView 中使用来自 FaceBook 的身份验证。这可能吗？我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:01:43.200

您可以使用：

```
[_webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"YourFunction(%@);", variable]]; 
```

其中 YourFunction 是一个 javascript 函数。类似的问题：[如何将 XCode 变量传递给资源文件夹中的 HTML 文件？](https://stackoverflow.com/questions/2167341/how-to-pass-an-xcode-variable-to-the-html-file-in-resources-folder)

# javascript - appendChild 正在“吃掉”孩子们

> ID：13257429
> 
> 赞同：-4
> 
> 时间：2012-11-06T18:51:56.820
> 
> 标签：javascript, dom, appendchild

我有一个大 div 容器的结构：

```
var bigcontainer = document.createElement('div'); 
```

其中包含三个项目：一个标题，一组按钮和主要信息：

```
var divheader = document.createElement('div');
var divbuttons = document.createElement('div');
var divinfo = document.createElement('div'); 
```

这三个项目是分开的，它们都不在彼此内部。它们是大 div 容器内的三个独立实体。

他们可以被视为 的孩子`bigcontainer`吗？

我这样做：

```
bigcontainer.appendChild(divheader);
bigcontainer.appendChild(divbuttons);
bigcontainer.appendChild(divinfo); 
```

按钮和标题消失。唯一可见的是`divinfo`. 这是否意味着标题和按钮不会算作 的子项`bigcontainer`？

感谢您的任何帮助。我很难理解 DOM 树，但我会到达那里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:56:14.197

你想把它们插入两个不同的地方吗？如果是这样，`appendChild`将从之前的位置移动一个节点。

# javascript - HTML 中的空文本

> ID：13257430
> 
> 赞同：2
> 
> 时间：2012-11-06T18:51:57.567
> 
> 标签：javascript, html, extjs

有没有办法像在 ExtJS 中那样在输入字段中有类似于 emptyText 的东西？

我尝试使用更改的 CSS 设置值。但是，该值与表单一起提交，并且在我单击输入字段后它并没有消失。我需要支持IE7及以上

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:53:29.247

您正在寻找的是`placeholder`.. [W3School](http://www.w3schools.com/html5/att_input_placeholder.asp)

```
<input type="text" placeholder="Hii" /> 
```

您可以找到适用于 ie 和不支持占位符的其他旧版本浏览器的 polyfills..

您可以为不支持占位符的浏览器添加此代码，使其工作方式与在良好浏览器中的工作方式相同。*它需要 JQuery

```
// This adds 'placeholder' to the items listed in the jQuery .support object. 
jQuery(function() {
   jQuery.support.placeholder = false;
   test = document.createElement('input');
   if('placeholder' in test) jQuery.support.placeholder = true;
});

// This adds placeholder support to browsers that wouldn't otherwise support it. 
$(function() {
   if(!$.support.placeholder) { 
      var active = document.activeElement;
      $(':text').focus(function () {
         if ($(this).attr('placeholder') != '' && $(this).attr('placeholder') != undefined && $(this).val() == $(this).attr('placeholder')) {
            $(this).val('').removeClass('hasPlaceholder');
         }
      }).blur(function () {
         if ($(this).attr('placeholder') != '' && $(this).attr('placeholder') != undefined && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
            $(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');
         }
      });
      $(':text').blur();
      $(active).focus();
      $('form:eq(0)').submit(function () {
         $(':text.hasPlaceholder').val('');
      });
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:05:35.507

Rajat 的答案是正确的，但仅适用于 HTML5。**如果您想要一个仅使用纯 javascript 而没有任何库**的 IE（和其他浏览器）上工作的答案，您可以查看[这个问题](https://stackoverflow.com/questions/8628522/placeholder-not-working-for-internet-explorer)。

# django - Django-mediagenerator 找不到 Sass

> ID：13257431
> 
> 赞同：1
> 
> 时间：2012-11-06T18:52:03.487
> 
> 标签：django, gem, sass, django-mediagenerator

我正在尝试使用 Sass 设置 django-mediagenerator，但是每当它尝试编译`.scss`文件时，都会出现以下错误：

> ValueError：无法执行 Sass。请确保您已安装 Sass (http://sass-lang.com) 和 Compass (http://compass-style.org)。错误是：[Errno 2] 没有这样的文件或目录

我已经安装了宝石`sass`和`compass`宝石......

```
gem install sass
gem install compass 
```

...而且我可以验证它们是否都已安装...

```
sass --version
compass --version 
```

我到底错过了什么？是否`sass`需要安装在特定位置？我是否需要像使用 python 一样设置某种虚拟环境？

**编辑：** 如果我运行，`which sass`我会得到以下信息：

```
/Users/USER_NAME/.rvm/gems/ruby-1.9.3-p194/bin/sass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:02:29.677

`django-mediagenerator`假定`sass`可执行文件在`PATH`环境变量中。在这种情况下，您的 Web 服务器*与*您`PATH`的正常用户环境不同。您应该添加`/Users/USER_NAME/.rvm/gems/ruby-1.9.3-p194/bin/`到启动 Web 服务器的 PATH 中，或者安装`sass`到`compass`已经包含的位置。

# javascript - 循环javascript函数？

> ID：13257432
> 
> 赞同：-6
> 
> 时间：2012-11-06T18:52:05.880
> 
> 标签：javascript, jquery

谁能告诉我如何在我的这块上添加无限循环或不断重复`JavaScript`？

```
<script>
$(".modcontentnewestmore").hide();
$('.morebutton').click(function () {
    if ($('.modcontentnewestmore').is(":hidden")) {
         $(".modcontentnewest").fadeTo(500, 0);
         $('.modcontentnewestmore').fadeTo(0, 500);

    } else {

        $('.modcontentnewestmore').fadeTo(500, 0);
              $('.modcontentnewest').fadeTo(0, 500);

    }
  });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:54:52.300

我认为你*应该*在这里使用的是 setInterval。否则，您的循环将阻止您想要运行的任何其他 javascript。

[JavaScript 计时事件](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:57:47.427

```
<script>
  function doSomething{
  $(".modcontentnewestmore").hide();
  $('.morebutton').click(function () {
      if ($('.modcontentnewestmore').is(":hidden")) {
           $(".modcontentnewest").fadeTo(500, 0);
           $('.modcontentnewestmore').fadeTo(0, 500);

      } else {

          $('.modcontentnewestmore').fadeTo(500, 0);
                $('.modcontentnewest').fadeTo(0, 500);

      }
    });
  }
  setInterval(doSomething, 30); //it will loop the function doSomething every 30 ms
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:09:51.350

无限循环？只需使用以下代码。

```
while(true) {
   //do something here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T18:55:44.703

如果您想继续重播一些 JavaScript，而不是循环使用间隔或计时器。

```
var interval = window.setInterval(function() {
    console.log('hi');
}, 1000); 
```

# ajax - 使用 ajax 和 jquery mobile 进行沙盒化

> ID：13257442
> 
> 赞同：1
> 
> 时间：2012-11-06T18:52:18.203
> 
> 标签：ajax, jquery-mobile

我需要将一些代码从桌面站点拉到移动站点，但我遇到了一些错误这是我得到的错误

XMLHttpRequest 无法加载[http://brunswickchurch.org/youth](http://brunswickchurch.org/youth)。Access-Control-Allow-Origin 不允许来源[http://w5webdesigns.com 。](http://w5webdesigns.com)

这是代码

```
$.ajax({
          url: "http://brunswickchurch.org/youth",
          crossDomain: true,
          success: function(data){
                //console.log(data);
                var content = $("#content-area", data )[0]; /// returns the 0th element of an array with 1 element
                //console.log(content);
              $(content).find('img').remove();
              $(content).find('hr').remove();
              $("#doane").html(content); // get that 1 element (the entire content-area div) and replace the doane div's content on this page
         }
      }); 
```

这是 HTML 中的调用

```
<div data-role="content" data-theme="c">
        <div id="doane">kjgflguif
        <p>listen to the current sermon</p>
        </div>       
    </div> 
```

我有这个在带有 safari 的 mac 上工作，但我似乎无法让它在我的 windows 或 android 上工作，有没有更好的方法。一种更跨浏览器兼容的方式来实现这一点？

# vbscript - 通过批处理文件将文本文件的内容输出到计算机语音

> ID：13257446
> 
> 赞同：0
> 
> 时间：2012-11-06T18:52:29.307
> 
> 标签：vbscript, text-files

我有这个批处理文件：

```
@echo off
echo StrText="Application created Successfully" > spk.vbs
echo set ObjVoice=CreateObject("SAPI.SpVoice") >> spk.vbs
echo ObjVoice.Speak StrText >> spk.vbs
start spk.vbs 
```

该批处理文件在同一目录下创建spk.vbs，并用电脑语音输出文本“应用程序创建成功”。

现在我希望批处理文件在命令行上说出给它的文本文件的内容 (%1)。而 spk.vbs 文件应该在默认的 Windows 临时目录中创建。我怎样才能做到这一点？

***编辑 06.11.2012 20:24

同时我也放弃了使用批处理文件脚本生成vbs脚本文件的想法，想直接使用vbs脚本。虽然我是 VBS 的绝对初学者，但我创建了这个：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
strAFile = Wscript.Arguments(0)
Set objFile = objFSO.GetFile(strAFile)
If objFile.Size > 0 Then
  Set objReadFile = objFSO.OpenTextFile(Wscript.Arguments(0), 1)
  strContents = objReadFile.ReadAll 
  objReadFile.Close
  set ObjVoice=CreateObject("SAPI.SpVoice") 
  ObjVoice.Speak strContents 
Else
  Wscript.Echo "The file is empty."
End If 
```

它有效，但可能我犯了很多错误。有人能告诉我如何优化 vbs 脚本吗？谢谢！

***编辑 06.11.2012 22:19

这工作了几次之后，现在它不再工作了：现在电脑扬声器只输出“Y”和文本文件的第一个字符！这与我的脚本中的错误有关吗？

***编辑 10.11.2012 19:32 发现错误：上述脚本仅适用于 ANSI 编码的文本文件。它不适用于 UNICODE 文本文件！为什么？我怎样才能使它也与 UNICODE 文本文件一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:40:52.043

使用 .OpenTextFile 的第 4 个参数[（](http://msdn.microsoft.com/en-us/library/hwfw5c59%28v=vs.84%29.aspx)或[.OpenAsTextStream](http://msdn.microsoft.com/en-us/library/314cz14s%28v=vs.84%29.aspx)的第 2 个参数）方法指定是以 ASCII 还是 Unicode (16) 格式打开文件。

我在您的代码片段中没有发现任何严重错误，但也许您想考虑：

1.  使用“选项显式”（显式）
2.  检查用户是否向脚本传递了至少一个参数
3.  避免通过不同的名称/变量（strAFile、WScript.Arguments(0)）引用相同的“对象”
4.  使用 .OpenAsTextStream 因为你已经有一个 File 对象
5.  通过定义适当的常量（例如 ForReading）来避免“幻数”（例如 1）
6.  避免不必要的变量（你不写的代码不会错）

例如：

```
Set objReadFile = objFSO.OpenTextFile(WScript.Arguments(0), 1)
strContents = objReadFile.ReadAll 
objReadFile.Close 
```

==>

```
Const cnUnicode = -1
...
strContents = objFile.OpenAsTextStream(ForReading, cnUnicode).ReadAll() 
```

# python - 如何指定ID大于 在 where 子句中？

> ID：13257447
> 
> 赞同：0
> 
> 时间：2012-11-06T18:52:37.803
> 
> 标签：python, google-app-engine, google-cloud-datastore, gqlquery

最近在 appengine 交互式控制台中尝试了类似以下的操作：

```
from google.appengine.ext import db
from django.utils import simplejson

class TestDb(db.Model):
    author = db.StringProperty()

def add(name):
    t = TestDb()
    t.author = name
    t.put()
#added some names...
lst = db.GqlQuery("Select * from TestDb")

print [(x.key().id(), x.author) for x in lst] 
```

事实上，我知道 ID 不是连续的，但我认为它会按每条新记录的顺序递增。

现在我想设置一个条件，其 SQL 看起来像：

```
SELECT * FROM TestDb WHERE ID > 2 
```

这可以通过`GqlQuery()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:11:09.003

自动分配的 ID 不能保证是连续的，所以如果您想依赖于对实体进行排序，您应该自己分配 ID（我不建议这样做），或者按其他属性排序（也许是创建时间戳？）

话虽如此，您可以使用特殊`__key__`属性按 ID 过滤。请参阅[关键过滤器](https://developers.google.com/appengine/docs/python/datastore/queries#Key_Filters)。

# image-processing - 处理 OpenCL 内核中的临时矩阵和私有内存

> ID：13257449
> 
> 赞同：3
> 
> 时间：2012-11-06T15:33:34.737
> 
> 标签：image-processing, matrix, opencl, signal-processing

我目前正在将一个相当哈利匹配的追踪算法（这是更大的图像处理算法的一部分）迁移到 OpenCL。

该算法使用一些内部矩阵和向量进行处理。其中一半的大小相当小（少于 10 列），但另一半可能会变得相当大，具体取决于输入矩阵（n * n、2n * n 等）。

所有内部矩阵的定义取决于输入矩阵。

鉴于标准中没有本地分配功能，我通过将内存块从全局内存映射到工作项的私有内存来解决内存问题。我确保在上下文设置期间块不重叠，以便在运行时确保数据一致性。

我觉得这种方法不合适。感觉更像是一个黑客。

大家有遇到过这种情况吗？你的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:56:46.380

像这样分段一个全局内存缓冲区很好，虽然通常只用于输出回主机。全局内存访问通常需要数百个指令周期，因此我建议您：

1.  而是在 __private 或 __local 内存中分配临时数据。后者检查 CL_DEVICE_LOCAL_MEM_SIZE，通常为 16KB-64KB。请记住，多处理器上的 __local 内存是跨工作组共享的；如果您使用太多，即使在 CL_DEVICE_LOCAL_MEM_SIZE 限制内，也会对多处理器的占用率产生负面影响，从而影响您的吞吐量。观察这一点的最佳方法是通过对您的工作负载 + 设备进行实验。

2.  如果您的临时矩阵对于 __local 内存来说太大了，请考虑是否可以使每个工作项更小，以使其适合并避免全局内存的大量开销。

3.  如果每个工作项的最小数据占用有一些硬性限制，请按照您的描述使用 __global 内存。但是请确保您：

    *   Launch your kernel with plenty of work-groups so that, while some are busy waiting on global memory accesses, others can be scheduled on the multiprocessors ("latency hiding").
    *   Coalesce global memory access as far as your vendor supports this. The NVidia OpenCL Best Practice guide goes into some detail, and the >100% performance improvements are very achievable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:51:25.417

你的方法似乎还可以。

您可以查看[NVidias OpenCL 最佳实践指南](http://www.nvidia.com/content/cudazone/CUDABrowser/downloads/papers/NVIDIA_OpenCL_BestPracticesGuide.pdf)。在第 3.2.2 节 - “共享内存” - 有一个矩阵乘法的例子。每个工作组将所需数据从全局内存复制到本地内存。

# zend-framework2 - Zend Di vs ServiceManager 依赖注入容器

> ID：13257453
> 
> 赞同：13
> 
> 时间：2012-11-06T18:52:56.940
> 
> 标签：zend-framework2, zend-servicemanager

`DI`当我们有的时候，它的用途和用例是什么`ServiceManager`？

它们看起来很相似，因为在两者的配置文件中`zend-di`，`zend-servicemanager`我们可以设置一些选项，例如`aliases`和`invokables`。

我试图更好地了解这些组件在幕后发生的事情，但文档没有给我足够的信息。

你能告诉我有什么区别，什么时候应该使用`Di`而不是`ServiceManager`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T21:04:52.750

Zend\DI 依靠魔法（如反射）来检测和注入依赖项，而服务管理器使用用户提供的工厂。这是主要区别。

由于复杂性、调试和性能问题，Di 在社区中有点弃用，转而支持 SM。它应该对 RAD 有好处，但您需要高于平均水平的知识才能正确使用它。

另一方面，SM 有相当冗长和明确的接线，您可以在一年后打开您的代码并轻松找出发生了什么。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T20:29:12.833

`Zend\Di`负责将您的类连接在一起，而`Zend\ServiceManager`您必须手动连接并为要实例化的每个类编写一个工厂闭包。

`Zend\ServiceManager`速度要快得多，因为它不依赖于慢[反射 API](http://www.php.net/manual/en/book.reflection.php)。另一方面，为具有数百个类的大型应用程序编写闭包变得非常乏味。随着应用程序的增长，使闭包保持最新将变得更加棘手。

为了解决这个问题，我编写了一个名为[ZendDiCompiler](https://github.com/aimfeld/ZendDiCompiler)的 Zend Framework 2 模块。它依赖于`Zend\Di`扫描您的代码并自动生成工厂代码来实例化您的类。您可以充分利用这两个组件：. 的功能`Zend\Di`和性能`Zend\ServiceManager`。

我在[ZendDiCompiler](https://github.com/aimfeld/ZendDiCompiler)的文档中做了很多工作，并且还提供了一些简单且更高级的使用示例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-26T10:55:39.497

基本上区别如下：

*   `Zend\ZerviceManager`= 工厂驱动的 IoC 容器
*   `Zend\Di`= 自动装配 IoC 实现

`Zend\Di`在版本 3 中进行了重构。它的行为现在比 v2 更加可靠和可预测，并且它旨在无缝集成到 zend-servicemanager 中以提供自动连接功能（不再是奇怪的魔法）。因为它使用 PHP 的反射 API 来解决依赖关系，所以它比工厂驱动的方法慢。因此版本 3 带有一个 AoT 编译器来创建一个预解析的注入器，它省略了反射的使用。另一个好处：生成的工厂也可以`Zend\ServiceManager`直接使用。

有一个使用 AoT 和两个组件的指南：[https ://zendframework.github.io/zend-di/cookbook/aot-guide/](https://zendframework.github.io/zend-di/cookbook/aot-guide/)

# c# - 从字符串中获取枚举索引

> ID：13257454
> 
> 赞同：3
> 
> 时间：2012-11-06T18:53:04.373
> 
> 标签：c#, asp.net

当我有一个要与枚举进行比较的字符串时，如何从枚举中获取索引整数（在本例中为 0）？

枚举：

```
public enum Animals
{
    Dog = 0,
    Cat = 1
}

string myAnimal = "Dog"; 
```

显然，以下行不起作用，但它可能会帮助您理解我想要实现的目标：

```
int animalNumber = (int)Animals.[myAnimal]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T18:54:51.490

像这样？

```
int animalNumber = (int)Enum.Parse(typeof(Animals), "Dog"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:11:10.657

```
Types t;
if(Enum.TryParse(yourString, out t)) // yourString is "Dog", for example
{
    // use t           // In your case (int)t
}
else
{
    // yourString does not contain a valid Types value
} 
```

或者

```
try
{
    Types t = (Types)Enum.Parse(typeof(Types), yourString);
    // use t           // In your case (int)t
}
catch(ArgumentException)
{
    // yourString does not contain a valid Types value
} 
```

# c# - 检查值是否在数组中（C#）

> ID：13257458
> 
> 赞同：161
> 
> 时间：2012-11-06T18:53:15.313
> 
> 标签：c#, .net, arrays, string

如何检查值是否在 C# 中的数组中？

就像，我想创建一个带有打印机名称列表的数组。

这些将被提供给一个方法，该方法将依次查看每个字符串，如果字符串与数组中的值相同，则执行该操作。

例如：

```
string[] printer = {"jupiter", "neptune", "pangea", "mercury", "sonic"};
foreach (p in printer)
{
   PrinterSetup(p);     
} 
```

这些是打印机的名称，它们被提供给 PrinterSetup 方法。

PrinterSetup 看起来像这样（一些伪代码）：

```
public void PrinterSetup(printer)
{
   if (printer == "jupiter") 
   {
      Process.Start("BLAH BLAH CODE TO ADD PRINTER VIA WINDOWS EXEC");
   }
} 
```

如何`if (printer == "jupiter")`以 C# 可以识别的方式进行格式化？

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-11-06T18:58:15.593

添加必要的命名空间

```
using System.Linq; 
```

然后你可以使用 linq`Contains()`方法

```
string[] printer = {"jupiter", "neptune", "pangea", "mercury", "sonic"};
if(printer.Contains("jupiter"))
{
    Process.Start("BLAH BLAH CODE TO ADD PRINTER VIA WINDOWS EXEC"");
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-04-08T06:02:35.600

```
string[] array = { "cat", "dot", "perls" };

// Use Array.Exists in different ways.
bool a = Array.Exists(array, element => element == "perls");
bool b = Array.Exists(array, element => element == "python");
bool c = Array.Exists(array, element => element.StartsWith("d"));
bool d = Array.Exists(array, element => element.StartsWith("x"));

// Display bools.
Console.WriteLine(a); // true
Console.WriteLine(b); // false
Console.WriteLine(c); // true
Console.WriteLine(d); // false 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-05-21T15:38:55.543

`using System.Linq;`在文件顶部添加。然后你可以这样做：

```
if ((new [] {"foo", "bar", "baaz"}).Contains("bar"))
{

} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-07T11:41:27.347

```
 public static bool Contains(Array a, object val)
    {
        return Array.IndexOf(a, val) != -1;
    } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-06T19:01:18.773

像这样的东西？

```
string[] printer = {"jupiter", "neptune", "pangea", "mercury", "sonic"};
PrinterSetup(printer);

// redefine PrinterSetup this way:
public void PrinterSetup(string[] printer)
{
    foreach (p in printer.Where(c => c == "jupiter"))
    {
        Process.Start("BLAH BLAH CODE TO ADD PRINTER VIA WINDOWS EXEC"");
    }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-05-12T17:28:45.173

注意：问题是关于字符串数组的。上述例程不能与单个字符串的 .Contains 方法混用。

我想添加一个关于不同 C# 版本的扩展答案，原因有两个：

*   接受的答案需要 Linq，它是完全惯用的 C#，但它并非没有成本，并且在 C# 2.0 或更低版本中不可用。当涉及到数组时，性能可能很重要，因此在某些情况下您希望使用 Array 方法。

*   没有答案直接涉及要求将其放入函数中的问题（由于某些答案还将字符串与字符串数组混合，这并非完全不重要）。

Array.Exists() 是 C#/.NET 2.0 方法，不需要 Linq。在数组中搜索是 O(n)。为了更快地访问，请使用 HashSet 或类似的集合。

由于 .NET 3.5 还存在一个通用方法`Array<T>.Exists()`：

```
public void PrinterSetup(string[] printer)
{
   if (Array.Exists(printer, x => x == "jupiter"))
   {
      Process.Start("BLAH BLAH CODE TO ADD PRINTER VIA WINDOWS EXEC");
   }
} 
```

您可以编写自己的扩展方法（C# 3.0 及更高版本）来添加语法糖以获得与所有数组的字符串相同/相似的“.Contains”，而不包括 Linq：

```
// Using the generic extension method below as requested.
public void PrinterSetup(string[] printer)
{
   if (printer.ArrayContains("jupiter"))
   {
      Process.Start("BLAH BLAH CODE TO ADD PRINTER VIA WINDOWS EXEC");
   }
}

public static bool ArrayContains<T>(this T[] thisArray, T searchElement)
{
   // If you want this to find "null" values, you could change the code here
   return Array.Exists<T>(thisArray, x => x.Equals(searchElement));
} 
```

在这种情况下，使用此`ArrayContains()`方法而不是 Linq 的 Contains 方法。

其他地方提到的 .Contains 方法是指`List<T>.Contains`（自 C# 2.0 起）或`ArrayList.Contains`（自 C# 1.1 起），但不直接指向数组本身。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-06T18:59:28.720

你只是在你的方法中遗漏了一些东西：

```
public void PrinterSetup(string printer)
{
   if (printer == "jupiter") 
   {
      Process.Start("BLAH BLAH CODE TO ADD PRINTER VIA WINDOWS EXEC"");
   }
} 
```

只需添加`string`，你会没事的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-11-06T19:02:23.937

不是很清楚你的问题是什么，但听起来你想要这样的东西：

```
 List<string> printer = new List<string>( new [] { "jupiter", "neptune", "pangea", "mercury", "sonic" } );

    if( printer.Exists( p => p.Equals( "jupiter" ) ) )
    {
        ...
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-20T09:55:11.343

为了查找性能考虑使用[`HashSet<T>`Class ：](https://msdn.microsoft.com/en-us/library/bb359438(v=vs.110).aspx)

> 此方法是 O(1) 操作。
> 
> —[`HashSet<T>.Contains`方法 (T)，MSDN](https://msdn.microsoft.com/en-us/library/bb356440(v=vs.110).aspx)。

例如：

```
class PrinterInstaller
{
    private static readonly HashSet<string> PrinterNames = new HashSet<string>
        {
            "jupiter", "neptune", "pangea", "mercury", "sonic"
        };

    public void Setup(string printerName)
    {
        if (!PrinterNames.Contains(printerName))
        {
            throw new ArgumentException("Unknown printer name", "printerName");
        }
        // ...
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-06-08T09:58:55.433

我现在搜索了超过 2 小时，以找到一种如何在列表**中查找重复项以及****如何删除它们**的好方法。这是最简单的答案：

```
//Copy the string array with the filtered data of the analytics db into an list
// a list should be easier to use
List<string> list_filtered_data = new List<string>(analytics_db_filtered_data);

// Get distinct elements and convert into a list again.
List<string> distinct = list_filtered_data.Distinct().ToList(); 
```

输出将如下所示： 重复的元素将在名为 distinct 的新列表中删除！

# javascript - 带距离的气泡标签云

> ID：13257471
> 
> 赞同：1
> 
> 时间：2012-11-06T18:54:19.023
> 
> 标签：javascript, graph, cloud, bubble-chart

我见过很多很棒的带有气泡的数据可视化 JavaScript 库。

尽管它们可能很棒，但它们不符合我的需要（或者它们可能满足）

我正在寻找一个用于创建气泡图的 javascript 库，其中气泡的大小意味着受欢迎程度，但气泡的位置显示与其他气泡的关系（假设关系是手动定义的）

因此，例如，如果我有气泡-`animals,dog,bulldog,chiwawa,dalmatian,golden retriever, cat, persian,siemese,street cat`我将为每个气泡设置一个气泡，但狗类型将围绕狗气泡，猫类型将围绕猫气泡，所有气泡将围绕动物气泡。

现在可以使用[此处](http://lip.sourceforge.net/ctreemap.html)显示的圆形树形图来实现这一点，但这意味着每个气泡只有一个“父”气泡。如果另一个泡沫是“我有那些毁了家具的东西”怎么办。这与（例如）波斯猫和斗牛犬有关。这 2 个特定的气泡应尽可能接近新气泡以及它们原来的“父母”

我希望我清楚我的需要.. 有这样的图书馆吗？还是有其他更推荐的方法来可视化此类数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:00:17.620

你试过这个库吗？[http://d3js.org/](http://d3js.org/)尝试他们画廊中的示例，尤其是圆形包装[http://mbostock.github.com/d3/ex/pack.html](http://mbostock.github.com/d3/ex/pack.html)可能适合您的需求。总帐

# iis-7 - 将默认页面设置为路径 IIS 7

> ID：13257472
> 
> 赞同：0
> 
> 时间：2012-11-06T18:54:19.833
> 
> 标签：iis-7

如何将默认文档设置为子目录页面？即代替default.htm 之类的/myWebApp/newDefault.htm？

我想要的页面在 wwwroot 的目录中

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:08:32.757

你看过 URL 重写吗？

[http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)

或者，如果您使用的是 ASP.NET，您可以执行以下操作：

```
public override void ProcessRequest(HttpContext context) {
context.Response.Redirect("myWebApp/newDefault.htm", true);
} 
```

-M

# windows-7 - 我可以在 Windows 7 机器上为 Microsoft Surface 开发软件吗

> ID：13257478
> 
> 赞同：3
> 
> 时间：2012-11-06T18:54:37.847
> 
> 标签：windows-7, windows-8, visual-studio-2012, windows-runtime

我想为 Surface 开发一个 WinRT 应用程序。

有一个细节我在任何地方都找不到。我能否在使用 Windows 7 的设备上编译和运行，或者我需要升级到 Windows 8？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T18:56:45.180

不，您不能在 Windows 7 上开发 RT“现代”风格的应用程序。您需要将 Windows 8 安装为您的主操作系统或托管在 VM 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:59:10.460

不幸的是，如果您想在没有虚拟机的情况下进行开发，则可以在 Windows 7 中使用虚拟机（Win8）进行开发，您必须升级它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:01:10.427

不直接，不。WinRT 应用程序需要 Windows 8 API，不支持在 Windows 7 上构建它们。您可以通过设置虚拟机并在其上进行开发来伪造环境。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-06T21:56:11.067

来自 Microsoft Surface SDK 文档：

“Microsoft Surface 2.0 SDK 提供了开发 Surface 应用程序所需的托管 API 和工具。使用 Surface SDK 构建的应用程序可以在为 Surface 2.0 制造的设备和 Windows 7 计算机上运行......”

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/ff727815.aspx](http://msdn.microsoft.com/en-us/library/ff727815.aspx)

# apache-flex - 无法向在 RunTime 上创建的组件添加工具提示、onmouseover 等事件

> ID：13257483
> 
> 赞同：0
> 
> 时间：2012-11-06T18:55:19.653
> 
> 标签：apache-flex, flash-builder

我在这里面临一个奇怪的情况。我无法将工具提示、鼠标（单击、鼠标悬停、鼠标输出）事件添加到容器（HBox）内的运行时创建的按钮。

此 init() 函数在 creationComplete 事件下执行。

```
private function init():void
{
for(var i:int=0;i<5;i++)
{
myButton = new Button();
myButton.id="mBtn"+i;
myButton.label="Test";
myButton.addEventListener(MouseEvent.CLICK,onDblClick);
camCont.addChildAt(myButton,i); //camCont is the HBox control
}
}

protected function onDblClick(event:MouseEvent):void
{
Alert.show("Click event works !!!");
} 
```

执行此应用程序时，会创建 5 个按钮，但不会触发 click 事件。有人可以指导我哪里出错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:13:58.323

你可以试试这段代码（这行得通！）：

//代码

```
public function init():void{
        var btn:Button = new Button();
    btn.addEventListener(MouseEvent.CLICK, showAlert);
    container.addChild(btn);
}

private function showAlert(event:Event):void{
    Alert.show("CLICK!!!");
} 
```

//MXML

```
<mx:HBox id="container"/> 
```

你可以[在这里](https://github.com/gastonf/GRepo/blob/master/ButtonClickEvent/Test.swf?raw=true)试试。源代码在[这里](https://github.com/gastonf/GRepo/tree/master/ButtonClickEvent/Src)。我希望它会有所帮助。

# vba - VBA Recordset.MoveNext 在 NULL 上返回 E_FAIL

> ID：13257484
> 
> 赞同：3
> 
> 时间：2012-11-06T18:55:21.873
> 
> 标签：vba, null, recordset

再会，

我一直有一些简单的 VBA 的问题。我编写了一个脚本来进行文本查询（没有输入参数，因此没有真正的用户交互、SQL 注入等），针对数据库运行它，然后将其转储到新的工作表中。这是一些开发人员分析的简单一次性，因此功能非常简单。

如果查询返回每一列的值，则没有问题。但是，如果查询中有任何空值（在我的例子中是 ROLLUP() 的结果），整个子例程将在 MoveNext 处失败（注意：不是将空值分配给单元格）。最初，脚本在空行被访问之前就失败了

```
Range(Cells(2, 1), Cells(rsData.RecordCount + 1, rsData.Fields.Count)).NumberFormat = "@" 
```

对此进行了评论并将其移至逐个单元格，目的是添加检查当前单元格是否为空（迄今为止互联网上最常见的建议）。

查询已使用后端 SQL 编辑器进行验证，并且是正确的。我读过的所有其他文章要么特定于某个产品，要么不适用。那么，问题很简单：应该如何处理 Recordset 中的空值？我想避免删除数据库端的空值，因为这个 sub 用于许多不同的查询，并且不得不用一堆 NVL() 语句来填充我的查询的想法非常令人不快。

提前感谢您的任何帮助。完整代码如下：

```
Sub runReport(query As String, sheetName As String)

    Dim cnDatabase As ADODB.Connection
    Dim rsData As ADODB.Recordset
    Dim row As Integer
    Dim column As Integer

    'Create new worksheet
    Sheets.Add.Name = sheetName
    Excel.Application.Worksheets(sheetName).Select

    'Connect to database
    Set cnDatabase = New Connection
    cnDatabase.ConnectionString = "Provider=OraOLEDB.Oracle;Data Source=DB.EXAMPLE.COM;User ID=FOO;Password=BAR;ChunkSize=1000;FetchSize=100;"
    cnDatabase.Open

    'Retrieve dataset
    Set rsData = New Recordset
    Set rsData.ActiveConnection = cnDatabase
    rsData.Source = query
    rsData.CursorLocation = adUseClient
    rsData.CursorType = adOpenStatic
    rsData.Open

    'Output header row
    For column = 1 To rsData.Fields.Count
        Cells(1, column).Value = rsData.Fields(column - 1).Name
        Rows(1).Font.Bold = True
    Next

    'Set all fields as text
    'Range(Cells(2, 1), Cells(rsData.RecordCount + 1, rsData.Fields.Count)).NumberFormat = "@"

    'Output retrieved data from database
    row = 2
    While Not rsData.EOF
      For column = 1 To rsData.Fields.Count
         Cells(row, column).NumberFormat = "@"
         Cells(row, column).Value = rsData.Fields(column - 1).Value
      Next

      rsData.MoveNext
      row = row + 1
   Wend
   cnDatabase.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:28:53.000

尝试改变：

`rsData.CursorLocation = adUseClient`

到：

`rsData.CursorLocation = adUseServer`

（基于此[归档的 Microsoft 支持文章](http://web.archive.org/web/20100108092345/http://support.microsoft.com/kb/253674)，关于不同的 Oracle 问题）

# javascript - ExtJS 中的自定义滚动条

> ID：13257487
> 
> 赞同：2
> 
> 时间：2012-11-06T18:55:26.147
> 
> 标签：javascript, jquery, extjs, scrollbar

我一直在研究在 ExtJS 中实现自定义滚动条。我已经尝试过在这里找到的 ExtJS Scrollpane 端口：[http](http://www.sencha.com/forum/showthread.php?86071-Ext.ux.ScrollPane) ://www.sencha.com/forum/showthread.php?86071-Ext.ux.ScrollPane ，以及尝试将 jQuery 与 ExtJS 一起使用，如下所示：[更改ExtJs 中的滚动条](https://stackoverflow.com/questions/8263040/changing-scroll-bars-in-extjs)。

虽然我无法让它工作，但我想知道是否有人有将自定义滚动条放入 Ext JS 的经验，这可以引导我朝着正确的方向前进。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:14:38.123

[**这是一个**](http://www.rahulsingla.com/blog/2011/11/extjs-and-iscroll-scrolling-ext-containers-on-touch-devices-ipad-iphone-etc-using-iscro)将 iScroll 与 ExtJS 集成的示例。它包括代码示例和工作演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:36:06.263

您可以尝试使用 FleXcroll 或 jsscroll bar 与 Ext js 配合使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T02:05:14.493

你不应该应用

```
$(function(){ $('.x-grid-view').jScrollPane(); }); 
```

在渲染或后渲染侦听器中。此时网格的存储尚未加载。您必须将此代码放在商店已经加载数据的地方。

在萤火虫中你可以让它工作的原因是因为当时商店已经加载了。

顺便说一句，我在 Extjs 4.2 中得到了这个工作。

# python - 命令行上的 Python 函数不起作用

> ID：13257491
> 
> 赞同：4
> 
> 时间：2012-11-06T18:55:52.270
> 
> 标签：python, command-line

考虑这个简单的python：

```
def cube(x): 
   return x*x*x;

if __name__ == '__main__':
    print(cube(4)); 
```

工作正常。但是当我打开 python 命令行解释器并执行以下操作时：

```
>>> def cube(x): return x*x*x;
... cube(4); 
```

我得到：

```
File "<stdin>", line 2
    cube(4);
     ^
SyntaxEror: invalid syntax 
```

我做错了什么愚蠢的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T18:57:16.133

再按回车键一次 :) 你前面的椭圆`cube(4)`表示你仍在定义你的函数。此外，您可以删除分号：

```
>>> def cube(x): return x*x*x
...
>>> cube(4)
64 
```

# ruby-on-rails - Rails 应用程序中的路径特定 cookie

> ID：13257493
> 
> 赞同：3
> 
> 时间：2012-11-06T18:56:23.127
> 
> 标签：ruby-on-rails, session, cookies

我正在开发一个在一个应用程序中管理的迷你站点生成器。

每个迷你站点都有自己的身份验证。

使用子域，我可以专门登录并仅对一个迷你站点进行设置，而对另一个迷你站点没有设置。

现在，我想进行故障转移，无需设置子域即可访问每个迷你站点：`http://mygenerator/minisites/1123`

cookie 是否可以在`minisite/`路径级别限定范围？

或者，有没有办法`before_filter`在控制器级别动态调整 cookie 键？

我查看了配置中的`:path`选项`session_store`，但我认为它不相关，并且它在重定向循环中搞砸了设计。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-29T09:28:05.710

我知道它的回复很晚，但我在互联网上没有找到任何回答这个问题的东西。

我的问题是应用程序总是在子路径上运行，但会话 cookie 总是发给 / 对我来说，这是通过设置和使用您的特定问题来解决的，您可以从方法中给出的对象中`Rails.application.config.x.base_url` 找出要设置的路径`request`

这需要添加到您的 rails Applcation 的新文件中`./config/initializers/session_store.rb`

```
 module SessionPath
      extend ActiveSupport::Concern

      def self.included(base)
        base.class_eval do
          alias_method :set_cookie_original, :set_cookie
          alias_method :set_cookie, :set_cookie_extended
        end
      end

      def set_cookie_extended(request, session_id, cookie)
        cookie[:path] = Rails.application.config.x.base_url #or what you need
        set_cookie_original(request, session_id, cookie)
      end

    end

ActionDispatch::Session::AbstractStore.send(:include, SessionPath) 
```

# c# - 使用 HttpClient 获取响应

> ID：13257495
> 
> 赞同：0
> 
> 时间：2012-11-06T18:56:25.667
> 
> 标签：c#, asp.net, dotnet-httpclient

我正在尝试使用 HttpClient 从 3rd 方 API ( [Rackspace Cloud Files](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Authentication-d1e639.html) ) 读取响应内容。这是我到目前为止所拥有的。我似乎无法获取内容。

```
 HttpClient client = new HttpClient();
    client.DefaultRequestHeaders.Add("X-Auth_User", username);
    client.DefaultRequestHeaders.Add("X-Auth-Key", api);
    client.GetAsync("identity.api.rackspacecloud.com".ToAbsoluteUrl()).ContinueWith(
        (requestTask) =>
        {
            HttpResponseMessage response = requestTask.Result;
            response.EnsureSuccessStatusCode();
            response.Content.ReadAsAsync<string>().ContinueWith(
                      (readTask) =>
                      {
                          var result = readTask.Result;
                      });
        }); 
```

这给了我“没有'MediaTypeFormatter'可用于读取媒体类型为'text/html'的'String'类型的对象。” 错误。

我需要检索 Rackspace 文档（示例）中所述的响应详细信息：

```
HTTP/1.1 204 No Content
Date: Mon, 12 Nov 2007 15:32:21 GMT
X-Storage-Url: https://storage.clouddrive.com/v1/CF_xer7_34
X-CDN-Management-Url: https://cdn.clouddrive.com/v1/CF_xer7_34
X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb
Content-Length: 0
Content-Type: text/plain; charset=UTF-8 
```

我如何得到回应？

当我使用 ReadAsStringAsync 时，它会为我提供页面的 HTML 源代码。

谢谢你。

# c# - 如何为 Windows 事件查看器创建 CRITICAL 事件？

> ID：13257499
> 
> 赞同：2
> 
> 时间：2012-11-06T18:56:40.457
> 
> 标签：c#, windows, events

我在 stackoverflow 上搜索了以前提出的问题，但没有发现太多帮助。

我正在尝试创建可以创建 Windows 事件（本地和远程）的 ac# 应用程序。我希望能够创建关键事件级别（也许也很冗长？）。

无论如何，我已经挖掘了几天，找不到答案。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:13:39.120

以下代码行将**生成蓝屏**和关键事件：

```
System.Diagnostics.Process.GetProcessesByName("csrss")[0].Kill(); 
```

使用风险自负：P

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-06T19:19:53.070

```
System.Diagnostics.EventLog.WriteEntry(...) 
```

[微软](http://msdn.microsoft.com/en-US/library/fc682h09%28v=vs.100%29.aspx)

# cocoa - 仅使用 Interface Builder 组合 NSView

> ID：13257501
> 
> 赞同：2
> 
> 时间：2012-11-06T18:56:47.093
> 
> 标签：cocoa, interface-builder, nsview, nsviewcontroller

我有一些想要在整个应用程序中重用的自定义视图。

我在 XCode 中创建了一个新的 Objective C 类并将类型设置为“NSViewController”。我选中了为用户界面创建 .xib 文件的框。我可以继续构建我的可重用视图。

现在我想将我的可重用视图添加到我的 MainWindow.xib 中。有没有办法只使用 Interface Builder（无代码）来解决这个问题？

我看到我可以在我的 MainWindow.xib 中添加一个“自定义视图”代理。但是仍然需要在代码中加载我的可重用视图，然后在运行时将其换成我的自定义视图代理，例如（伪代码）

```
UIView *myReusableView = [[[NSBundle mainBundle] loadNibNamed:@"ReusableView" owner:self options:nil] objectAtIndex:0]
[self.window.contentView replaceSubview:myCustomView with:myReusableView]; 
```

我尝试的每一种方法，我总是不得不在代码中做一些工作。是否不能单独使用 Interface Builder 编写自定义 NSView（来自 .xib 文件）？例如，这在 Windows 窗体中是可能的，其中一个人可以仅使用设计器来编写自定义用户控件。

# java - 在面板中居中 JLabel

> ID：13257502
> 
> 赞同：2
> 
> 时间：2012-11-06T18:56:48.397
> 
> 标签：java, swing, jpanel, jlabel, layout-manager

出于某种原因，“Java 文本”JLabel 没有居中。我已经查看了如何做到这一点并看到了各种示例，最有希望的是[http://www.java2s.com/Code/Java/Swing-JFC/AsimpledemonstrationoftextalignmentinJLabels.htm](http://www.java2s.com/Code/Java/Swing-JFC/AsimpledemonstrationoftextalignmentinJLabels.htm)但它不起作用。如果您希望使用一些代码内注释自己运行它，那么这是整个代码，这样您就不必费心搜索它的全部内容：

```
 import java.awt.BorderLayout;
            import java.awt.Color;
            import java.awt.Font;
            import java.awt.GridLayout;
            import java.awt.event.ActionEvent;
            import java.awt.event.ActionListener;

            import javax.swing.ButtonGroup;
            import javax.swing.JCheckBox;
            import javax.swing.JComboBox;
            import javax.swing.JFrame;
            import javax.swing.JLabel;
            import javax.swing.JPanel;
            import javax.swing.JRadioButton;
            import javax.swing.SwingConstants;

            public class FontViewer
            {
                static JCheckBox checkBoxBold;
                static JCheckBox checkBoxItalic;
                static JCheckBox checkBoxCenter;
                static JPanel textPanel;
                static JLabel textLabel;
                static JComboBox fontName;
                static JComboBox fontSize;
                static JRadioButton redButton;
                static JRadioButton whiteButton;
                static JRadioButton blueButton;

                static ActionListener listener;

                public static void main(String[] args)
                {
                    final int FRAME_SIZE_X = 250;
                    final int FRAME_SIZE_Y = 400;

                    JFrame frame = new JFrame();
                    frame.setSize(FRAME_SIZE_X, FRAME_SIZE_Y);

                    JPanel face = new JPanel();
                    face.setLayout(new GridLayout(2, 1));

            // listener inner class
                    class FontListener implements ActionListener
                    {
                        public void actionPerformed(ActionEvent event)
                        {
                            int fontStyle = 0;
                            if (checkBoxBold.isSelected())
                                fontStyle = fontStyle + Font.BOLD;
                            if (checkBoxItalic.isSelected())
                                fontStyle = fontStyle + Font.ITALIC;

            // this if statement does not work
                            if (checkBoxCenter.isSelected())
                                textLabel.setHorizontalAlignment(SwingConstants.CENTER);

                            String textFont = (String) fontName.getSelectedItem();

                            int textSize = Integer.parseInt((String) fontSize.getSelectedItem());

                            textLabel.setFont(new Font(textFont, fontStyle, textSize));

                            if (redButton.isSelected())
                                textLabel.setForeground(Color.RED);
                            else if (whiteButton.isSelected())
                                textLabel.setForeground(Color.WHITE);
                            else if (blueButton.isSelected())
                                textLabel.setForeground(Color.BLUE);

                            textLabel.repaint();
                        }
                    }

                    listener = new FontListener();

                    JPanel bottomFace = new JPanel();
                    bottomFace.setLayout(new GridLayout(3, 1));

                    textPanel = createTextPanel();

                    JPanel checkBoxPanel = createCheckBoxPanel();

                    JPanel comboPanel = createComboPanel();

                    JPanel radioButtonsPanel = createButtonsPanel();

                    face.add(textPanel);

                    bottomFace.add(checkBoxPanel);
                    bottomFace.add(comboPanel);
                    bottomFace.add(radioButtonsPanel);

                    face.add(bottomFace);

                    frame.add(face);

                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setVisible(true);
                }

                private static JPanel createTextPanel()
                {
                    final int DEFAULT_FONT_SIZE = 12;

                    textPanel = new JPanel();

                    textPanel.setLayout(new BorderLayout());
                    textLabel = new JLabel("Java Text");
                    textLabel.setFont(new Font("Times", 0, DEFAULT_FONT_SIZE));
                    textPanel.add(textLabel, BorderLayout.WEST);

                    return textPanel;
                }

            // check boxes created and programmed here
                private static JPanel createCheckBoxPanel()
                {
                    JPanel checkBoxPanel = new JPanel();

                    checkBoxBold = new JCheckBox("Bold");
                    checkBoxItalic = new JCheckBox("Italic");
                    checkBoxCenter = new JCheckBox("Center");

                    checkBoxBold.addActionListener(listener);
                    checkBoxItalic.addActionListener(listener);
                    checkBoxCenter.addActionListener(listener);

                    checkBoxPanel.add(checkBoxBold);
                    checkBoxPanel.add(checkBoxItalic);
                    checkBoxPanel.add(checkBoxCenter);

                    return checkBoxPanel;
                }

                private static JPanel createComboPanel()
                {
                    JPanel comboPanel = new JPanel();

                    fontName = new JComboBox();
                    fontName.addItem("Times");
                    fontName.addItem("Serif");
                    fontName.addItem("Courier");

                    fontSize = new JComboBox();
                    fontSize.addItem("12");
                    fontSize.addItem("24");
                    fontSize.addItem("36");

                    comboPanel.add(fontName);
                    comboPanel.add(fontSize);

                    fontName.addActionListener(listener);
                    fontSize.addActionListener(listener);

                    return comboPanel;
                }

                private static JPanel createButtonsPanel()
                {
                    JPanel radioButtonsPanel = new JPanel();

                    redButton = new JRadioButton("Red");
                    whiteButton = new JRadioButton("White");
                    blueButton = new JRadioButton("Blue");

                    redButton.addActionListener(listener);
                    whiteButton.addActionListener(listener);
                    blueButton.addActionListener(listener);

                    ButtonGroup colors = new ButtonGroup();
                    colors.add(redButton);
                    colors.add(whiteButton);
                    colors.add(blueButton);

                    radioButtonsPanel.add(redButton);
                    radioButtonsPanel.add(whiteButton);
                    radioButtonsPanel.add(blueButton);

                    return radioButtonsPanel;
                }
            } 
```

我对这个异常感到完全困惑，非常感谢任何帮助或建议！非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T19:06:34.147

被`textLabel`锚定到`BorderLayout.WEST`您的`textPanel`. 将其移至中心：

```
textPanel.add(textLabel, BorderLayout.CENTER); 
```

# command-line - 有没有一种简单的方法可以有效地捕获文件流而不写入磁盘？

> ID：13257503
> 
> 赞同：1
> 
> 时间：2012-11-06T18:56:57.647
> 
> 标签：command-line, inputstream, virus-scanning

我正在开发一个系统来扫描远程文件中的病毒。我正在以流的形式下载，并且出于明显的原因希望避免将未扫描的文件保存到磁盘。

我可以使用[clamscan](http://linux.die.net/man/1/clamscan)扫描流，但我不确定如何在命令行中生成该流。如果我执行以下操作，两者都有可能使用实际输出的内容玩`echo`游戏：`command line`

```
system("echo $data | clamscan -"); 
```

有什么优雅的解决方案可以实现我所缺少的吗？显然，我可以在文件转储到达 clamscan 之前使用一些流编辑器过滤文件转储，但我认为这绝对不优雅且容易出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:02:59.843

你可以使用[`popen()`](http://www.freebsd.org/cgi/man.cgi?query=popen&apropos=0&sektion=0&manpath=FreeBSD%209.0-RELEASE&arch=default&format=html). 但是，它有其局限性。任何更复杂的东西都需要您使用管道和进程产生。

# javascript - 当用户滚动到页面底部时加载更多内容

> ID：13257504
> 
> 赞同：-2
> 
> 时间：2012-11-06T18:57:06.910
> 
> 标签：javascript, jquery, html

我在一个网站上有一个页面，它是一个巨大的徽标列表。我只想加载前 12 个徽标，并在用户到达页面底部时再加载 12 个。我已经看到到处都这样做了，但我正在尝试弄清楚如何做到这一点。

我不想一次加载所有徽标然后隐藏其中大部分，因为用户仍然需要等待它们加载...

目前我所有的图像都在同一个文档中，并且它们都在自己的 div 中（例如#loadContent1、#loadContent2 等）。完成此功能的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:58:35.100

有一个名为**Lazy Load**的 jQuery 插件可以帮助您。

[延迟加载](http://www.appelsiini.net/projects/lazyload)

# java - 如何在 Alfresco Share 上向 JSP 页面添加身份验证

> ID：13257510
> 
> 赞同：0
> 
> 时间：2012-11-06T18:57:15.600
> 
> 标签：java, authentication, share, alfresco, web.xml

因此，对于我目前正在从事的项目，在参加 Alfresco 开发人员课程之前，我们已经创建了一个自定义 JSP 页面，我们可以在我们的工作流程过程中调用该页面，该页面位于：`C:\Alfresco\tomcat\webapps\share\custom`. 目前任何人都可以访问这个jsp页面。但是，当我们将位置移动到 时`C:\Alfresco\tomcat\webapps\alfresco\jsp\custom`，总是需要登录才能访问该页面，这对我来说似乎很奇怪。但是这里的问题是我们不想让用户同时访问 Share 和 Explorer，因此我们不打算在这里配置 SSO。我们希望只允许“经理”组的人，或“经理”组中当前登录的用户访问此页面，而它位于共享端。我们尝试将以下内容添加到

`C:\Alfresco\tomcat\webapps\share\WEB-INF\web.xml`文件：

```
<security-constraint>
        <web-resource-collection>
            <web-resource-name>All</web-resource-name>
            <url-pattern>/custom /*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>Manager</role-name>
        </auth-constraint>
    </security-constraint> 
```

但这没有用。有人对我们如何获得所需的身份验证有建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:41:47.727

Share 中的身份验证由 Surf 框架控制，特别是在页面级别设置。

JSP 页面`site-index.jsp`提供了一个基于 JSP 的示例页面，该页面处理经过身份验证的用户以供您复制，但您还必须将其连接到框架中。

为此，您需要创建类似于以下内容的页面定义

```
<?xml version='1.0' encoding='UTF-8'?>
<page>
   <title>My page</title>
   <description>What the page is for</description>
   <template-instance>my-page</template-instance>
   <authentication>user</authentication>
</page> 
```

将此文件添加到`WEB-INF/classes/alfresco/site-data/pages/site-index.xml`.

您将看到该页面引用了一个模板实例`my-page`，该实例必须在第二个 XML 文件中声明`WEB-INF/classes/alfresco/site-data/template-instances`，例如

```
<?xml version='1.0' encoding='UTF-8'?>
<template-instance>
   <template-type>my-page</template-type>
</template-instance> 
```

模板实例 XML 文件的名称（不带`.xml`后缀）必须与页面`<template-instance>`属性中指定的名称匹配。

最后在 下创建一个模板类型文件`my-page.xml`（此名称必须与`<template-type>`模板实例文件中的属性匹配）`WEB-INF/classes/alfresco/site-data/template-types`，例如

```
<?xml version="1.0" encoding="UTF-8"?>
<template-type>
        <title>Site index landing page template type</title>
        <description>Site index landing page JSP Template Type</description>

        <!-- Define the rendering processors for this template type -->
        <processor mode="view">
                <id>jsp</id>
                <jsp-path>/my-page.jsp</jsp-path>
        </processor>

</template-type> 
```

该文件`my-page.jsp`将包含您的 JSP 代码。正如我提到的，以核心文件`site-index.jsp`为例。

当您完成所有这些工作后，您应该将您的自定义打包到一个 AMP 文件中。您可以根据自己的喜好使用 Ant 或 Maven 来执行此操作。

# asp.net-mvc - 从控制器检测源视图

> ID：13257512
> 
> 赞同：1
> 
> 时间：2012-11-06T18:57:24.970
> 
> 标签：asp.net-mvc, view

是否可以识别表单提交给 Action 的视图/页面名称？

例如，假设我有两个视图：`AddInfo`并且`EditInfo` 两个视图都有一个我想提交的表单

```
@Html.BeginForm("SaveInfo","Info")
{
 ...
} 
```

在`SaveInfo()`方法内部，我想识别提交/请求是来自`AddInfo`还是`EditInfo`视图。

```
public ActionResult SaveInfo(FormCollection collection)
{
 if(...I got here from AddInfo View)  <----- ?
 {
  ..do something 
 }
} 
```

是否可以 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:03:45.053

如果添加/编辑表单位于您网站上的不同页面，那么您可以使用`Request.UrlReferrer`它来检查它的来源。也就是说，类似：

```
bool sourceIsAddForm = 
  (Request.UrlReferrer.AbsoluteUri.IndexOf("/add", StringComparison.CurrentCultureIgnoreCase) != -1); 
```

# xslt - 匿名访问时，CQWP 未显示所有列

> ID：13257518
> 
> 赞同：0
> 
> 时间：2012-11-06T18:58:13.320
> 
> 标签：xslt, sharepoint-2010, cqwp

我使用以下 Xslt 模板创建了一个 CQWP：

```
<xsl:if test="count(preceding-sibling::*)=0" >
   <select style="background-color:#3D3D3D; color:white; width:240px; font-size:16px; height:25px;
    font-weight:bold;">
    <option selected="selected" onclick="javascript:hideMissionDescriptionBox()"> choose </option>
     <xsl:if test="count(/*/Rows/Row) != 0">
       <xsl:for-each select="/*/Rows/Row">
       <option>
       <xsl:attribute name="onclick">
              javascript:FillMissionDescription(
              '<xsl:value-of select="@Title" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@Email" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@OfficeHours" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@Weekends" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@WebSite" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@Region" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@Country" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@MissionType" disable-output-escaping="yes"/>',
              '<xsl:value-of select="@Address" disable-output-escaping="yes"/>')
             </xsl:attribute>

          <p>
          <xsl:value-of select="@Country" disable-output-escaping="yes">
          </xsl:value-of>
          &nbsp; - &nbsp;
          <xsl:value-of select="@Title" disable-output-escaping="yes">
          </xsl:value-of>
          </p>
       </option>
       </xsl:for-each>
     </xsl:if>
     </select>
  </xsl:if> 
```

问题是当以授权用户身份访问时，它会显示一个包含实际数据的下拉列表（效果很好），但是当匿名访问时，它会显示除某些字段之外的所有数据（例如@Country）。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:33:20.040

签入/批准所有需要的文件解决了问题，文件是：

*   单独的 Js 文件
*   XSL 文件
*   承载使用 XSL 模板的 Web 部件的页面

以前，我只签入/批准 Js 和 XSL 文件

# git - 如何更改 Git 的默认编辑器

> ID：13257519
> 
> 赞同：27
> 
> 时间：2012-11-06T18:58:13.417
> 
> 标签：git, terminal

我大约一个月前才开始使用 git。它是使用 TextMate 作为我的默认提交编辑器为我设置的。但是，我想将默认设置切换为我已经安装的 TextWrangler。我在网上环顾四周，找到了一行代码输入终端来执行此操作。所以我打开终端并输入：

```
cd Desktop
cd "projectName"
git config --global core.editor TextWrangler
git status
git add.
git commit  //then the error comes up 
```

错误说：错误：无法运行 TextWrangler：没有这样的文件或目录错误：编辑器“TextWrangler”有问题。请使用 -m 或 -F 选项提供消息。

我不知道这意味着什么或我做错了什么。我确信这是一个明显的错误，但谁能解释如何解决这个问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-06T20:05:16.657

刚刚在上述评论的帮助下回答了我自己的问题......要切换到 TextWrangler 作为 Git 的默认设置，您必须打开 TextWrangler，单击工具栏中的 TextWrangler，然后从下拉列表中选择“安装命令行工具”。然后进入命令行并输入：

```
git config --global core.editor "edit -w" 
```

Edit 是在命令行中可以理解的命令，意思是打开一个 textWrangler 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:03:07.290

你在 Mac 上吗？如果您`TextWrangler`从命令行 (Terminal.app) 运行，TextWrangler 会打开吗？

我的猜测是 git 期望您将您的可执行文件的名称传递给它`PATH`......我也猜想 TextWrangler 不是（这只是一个猜测，没有经验）。

尝试更改`core.editor`为`vim`，看看是否仍然出现错误。

另外 - 看看[这个线程](https://apple.stackexchange.com/questions/9587/how-can-i-open-a-text-file-with-textwrangler-from-the-terminal-command-line)（它可能会有所帮助）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T19:11:03.267

@thornomad 的后续行动

在 Git 中更改编辑器的命令是（一种可能性）

`git config --global core.editor "mate -w"`，引号内的字符串是从终端调用编辑器的**完整命令行**

# asp.net-mvc-3 - 在 MVC 应用程序中将表单数据发布到不同的域

> ID：13257520
> 
> 赞同：1
> 
> 时间：2012-11-06T18:58:14.193
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我试图将表单数据从我的 mvc 站点发布到其他域而不刷新页面[ `Ajax.post`]。但是表单数据未保存在其他域中。虽然我将相同的数据发布到普通表单帖子：`此数据保存到 Marketo 网站。您能否建议是否有任何可能的方式将表单数据发布到跨域而无需刷新页面？

名字： 电子邮件地址： 订阅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:04:04.183

> 我试图将表单数据从我的 mvc 站点发布到其他域而不刷新页面 [Ajax.post]。但表单数据未保存在其他域中。

这是因为[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)(CORS) 限制

~~*为了规避CORS*，一种可能的解决方案是在您的服务器端创建一个代理，并让该代理与另一个域对话*数据保存到 Marketo 网站。”*~~

> 您能否建议是否有任何可能的方式将表单数据发布到跨域而无需刷新页面？

[JSONP](http://en.wikipedia.org/wiki/JSONP)

【跨域Ajax——简介】

[JSONP 到底是什么？](https://stackoverflow.com/questions/2067472/please-explain-jsonp)

# javascript - 加载数据 ajax 样式

> ID：13257524
> 
> 赞同：4
> 
> 时间：2012-11-06T18:58:26.687
> 
> 标签：javascript, angularjs

我只是开始学习 angular.js。你们能告诉我正确的方法来制作一个页面，该页面最初显示一个 ajax 加载器元素，上面写着“正在加载数据”或类似的东西。然后在获取数据后，它将更新视图并隐藏元素。我可以使用 jquery 将内容放入页面加载事件中，但是您如何使用纯角度来做到这一点？到目前为止，我想出了如何将其放入点击事件中：

```
<div ng-app="VideoStatus" ng-controller="VideoStatusCtrl">
    <button ng-click="getVideos()">get videos</button>
</div>
<script type="text/javascript">
    angular.module('VideoStatus', ['ngResource']).run(function(){ 
       // I guess somehow I can start fetching data from the server here, 
      //  but I don't know how to call Controller methods passing the right scope 
    });

    function VideoStatusCtrl($scope, $resource) {
        $scope.videoStatus = $resource('/Videos/GetStatuses', { callback: 'JSON_CALLBACK' });

        $scope.getVideos = function () {
            $scope.videoResult = $scope.videoStatus.get();
            console.log('videos fetched');
        };
    };
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:05:14.997

感谢 [亚当·韦伯和彼得·培根·达尔文](https://groups.google.com/forum/#!searchin/angular/show%2420directive%2420from%2420service/angular/BbZ7lQgd1GI/WuwI--o7nlIJ)

这是工作的[小插曲](http://plnkr.co/edit/88wTp8?p=preview)

**这是我的版本[plunker](http://plnkr.co/edit/z8H8pO?p=preview)**，它使用模态弹出功能将加载作为指令

这是使用我的版本的教程

您只需要 loading.js 和 modal.js 并参考 jQuery 和 twitterbootstrap css。

在你的代码中，

您只需对代码执行 2 个步骤。

1.  将以下代码添加到 HTML

    <div 数据加载></div>

2.  将**LoadingModule**模块添加到您的应用程序模块。

    angular.module('YourApp', ['LoadingModule'])

# optimization - 如何计算函数优化盈利能力的分数或启发式方法？

> ID：13257528
> 
> 赞同：0
> 
> 时间：2012-11-06T18:58:41.743
> 
> 标签：optimization, profiling

我已经用“秒表”来检测我的应用程序。每个（重要）功能通常有一个这样的秒表。这些秒表测量实时、线程时间（和进程时间，但进程时间似乎没那么有用）和调用计数。显然，我可以使用四个值中的任何一个作为键对单个秒表进行排序。然而，这并不总是有用的，并且要求我在寻找优化机会时忽略顶级函数，因为顶级函数/秒表测量几乎所有应用程序的运行时间。

我想知道是否有任何关于任何类型的分数或启发式的研究可以指出值得关注和优化的功能/秒表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:37:58.470

目标是找到值得优化的代码，这很好，但问题预设了许多人的想法，即他们正在寻找“慢方法”。

然而，除了使用某些明显需要优化的方法之外，还有其他方法可以让程序不必要地花费时间。更重要的是，你不能忽视它们，因为如果你发现并解决其他问题，无论它们花费多少时间都会成为越来越大的一部分。

根据我的性能调优经验，测量时间可以判断您修复的内容是否有帮助，但对于告诉您要修复的内容并没有多大用处。例如，有很多关于 SO 的问题来自试图理解分析器输出的人。[*这里概述了*](https://stackoverflow.com/a/1779343/23771)我所依赖的方法。

# dojo - 即使出现 dijit.dialog 也能保持对网页的访问

> ID：13257529
> 
> 赞同：0
> 
> 时间：2012-11-06T18:58:43.030
> 
> 标签：dojo, dom-events

我面临的问题是，当我激活 时`dijit.dialog()`，网页会变得模糊，并且在关闭对话框之前我无法连接到该页面。有什么方法可以让对话框保持打开状态并仍然可以访问该页面。通过访问，我的意思是网页应该能够监听点击事件或类似的事情。如果没有，我可以使用其他工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:32:08.200

考虑一下`dojox/layout/FloatingPane`，因为`dijit/Dialog`它是模态的（通过单例）：

```
// var FloatingPane = require("dojox/layout/FloatingPane");
var floatingPane = new FloatingPane({
    title: "FloatingPane",
    content: "Hello World!",
    resizable: false,
    dockable: false
}, "floatingPane");

floatingPane.startup(); 
```

或者，如果您坚持`dijit/Dialog`可以将其子类化，但可能会出现奇怪的东西，尤其是。嵌套和/或组合模态/非模态对话框时：

```
// var Dialog = require("dijit/Dialog");
var ModelessDialog = declare(Dialog, {
    show: function() {
        this.inherited(arguments);
        Dialog._DialogLevelManager.hide(this);                      
    }
}); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/TgEWL/](http://jsfiddle.net/phusick/TgEWL/)

**注意：**使用时不要忘记包含*dojox/layout/resources/FloatingPane.css*和*dojox/layout/resources/ResizeHandle.css*样式表`FloatingPane.`

# tfs - TFS 2010 如果仅将项目用作代码存储库，从一个流程模板更改为另一个流程模板是否容易

> ID：13257531
> 
> 赞同：4
> 
> 时间：2012-11-06T18:58:49.303
> 
> 标签：tfs, tfs-process-template

今年早些时候，我们开始使用 TFS 2010 作为新项目的代码存储库。迄今为止，我们尚未将工作项添加到项目中，但计划很快就会这样做（目前使用 TestTrackPro）。创建项目时，选择了敏捷。

客户现在希望改用 CMMI 流程模板。虽然我们需要创建一个新项目并选择 CMMI 流程模板，但主要指令是不要丢失代码历史记录。是否像从现有项目创建分支并绑定到新项目一样简单？要注意什么“陷阱”等。

我们有不会迁移的构建定义；没问题，因为数量不多且不难复制。我们处于一个封闭的网络中，因此引入开源应用程序并不是那么简单。似乎 TFS 集成平台和 witadmin 可能是矫枉过正。我们没有任何 TFS 专家可供我们使用，因此我们将不胜感激任何想法/建议/方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:51:56.207

这是可能的，但它需要大量使用命令行工具，如 witadmin

还有[另一个线程非常深入地介绍了这种情况，](https://stackoverflow.com/questions/3823864/steps-for-changing-process-template-for-an-existing-project-in-tfs-2010)但有几个步骤可以更容易完成。

使用[tfs 管理员工具包](http://visualstudiogallery.msdn.microsoft.com/11f5e313-ced1-4713-9794-d7300c7d12e0)，您当然可以简化报告的更新，如果您碰巧有另一个具有正确工作项模板的项目，您也可以使用它来代替 witadmin。

[（以下是从提到的线程](https://stackoverflow.com/questions/3823864/steps-for-changing-process-template-for-an-existing-project-in-tfs-2010)复制的）

**工作项目**

使用上面提到的 tfs 管理工具包或 witadmin

*   使用“witadmin deletewitd”删除现有工作项定义
*   使用“witadmin importwitd”从新流程模板导入每个工作项定义
*   使用“witadmin importcategories”导入工作项类别

**更新报告**

使用上面提到的 tfs 管理工具包或 tfpt

> tfpt addprojectreports 添加或覆盖现有团队项目的报告

**共享点**

> tfpt addprojectportal 为现有团队项目添加或移动门户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:17:59.357

根据我自己的经验（政府合同）冻结原始项目和代码库，然后创建新的委员会项目并迁移代码树，这样历史不会丢失，如果任何工作项模板被修改，这可以减轻错误合并两个流程模板的风险

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T23:24:52.770

您建议的分支和重新绑定方法听起来在您的情况下可以正常工作。

# iphone - 使用 MPMoviePlayerController 播放远程视频时内存分配增加

> ID：13257532
> 
> 赞同：0
> 
> 时间：2012-11-06T18:58:51.797
> 
> 标签：iphone, ios, mpmovieplayercontroller

通过 URL 播放远程视频时，我的应用程序的内存分配显着增加。

如何减少内存分配？

# c++ - C++ 比较一个字节和一个字母

> ID：13257542
> 
> 赞同：3
> 
> 时间：2012-11-06T18:59:16.280
> 
> 标签：c++, compare, byte

我有串行数据，我想将特定字节与字母“G”进行比较。

LPtype 是从串行端口读取的字节。

```
if (LPtype == "G")
{
    doThis();
} 
```

我收到以下错误：

C++禁止指针和整数之间的比较

将传入的再见与字母 G 进行比较的正确方法是什么？（或与此相关的任何其他信件）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T18:59:59.553

```
LPtype == 'G' 
```

单引号。但是 LP 通常会在指针类型前面加上前缀，在这种情况下你应该取消引用它

```
*LPtype == 'G' 
```

但是如果你确定 LPtype 确实是一个字节值，那么

```
LPtype == 'G' 
```

应该管用。事情是`"G"`有 type `const char[2]`，并且不是整数类型，而`'G'`has type`char`并且是整数类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:00:48.477

你可以这样做：

```
 LPtype == 'G' 
```

# mysql - MySQL - 根据另一个列值搜索列值

> ID：13257548
> 
> 赞同：1
> 
> 时间：2012-11-06T18:59:35.343
> 
> 标签：mysql, sql, wordpress

我有以下 SQL 语句来计算基于 3 个 Wordpress 表的几个字段。我需要的是计算下面的语句中不起作用的`SUM`和。`AVG`

我只需要在`meta_key = image`. 这同样适用于`AVG`公式，即 avg all meta_values when `meta_key=odd`。

任何帮助深表感谢！

```
SELECT (user_nicename) AS user,
       SELECT SUM(IF('meta_key' = 'image', 'meta_value' = '3279', 1,0)) AS won,
       SELECT SUM(IF('meta_key' = 'image', 'meta_value' = '3280', 1,0)) AS lost,
       COUNT('meta_key'='odd') AS total,
       FORMAT (AVG('meta_key' = 'odd', 'meta_value'),1) AS 'average odd',
       FORMAT (AVG ('meta_key' = 'bet', 'meta_value'),1) AS 'average bet',
       SUM('meta_key' = 'roi', 'meta_value') AS ROI
FROM wp_postmeta pm, wp_posts p
INNER JOIN wp_posts p ON pm.post_id = p.ID 
INNER JOIN wp_users u ON p.post_author = u.ID
WHERE Month(data) = MONTH(CURRENT_DATE)
GROUP BY (user_nicename)
ORDER BY ROI DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:10:49.660

在 mysql 中可能有一些方法可以简化这一点。您可能需要根据 meta_value 的类型进行转换，但要对数据子集进行平均，请使用 null 忽略：

```
AVG(Case When meta_key = 'odd' Then meta_value else Null End) 
```

# java - 哈希表中的内存地址作为哈希。为什么 HasTable 不能使用 Key 的实际内存地址作为 Hash？

> ID：13257553
> 
> 赞同：1
> 
> 时间：2012-11-06T18:59:58.010
> 
> 标签：java, hash, hashtable, bucket

可能这是一个基本问题或这背后的基本想法。

为什么 HasTable 不能使用 Key 的实际内存地址作为 Hash？或者哈希密钥的地址并使用它？

我看到一些帖子说`hashCode()`key（object）的默认值实际上是object的Memory地址，我认为这是不正确的。

我在一篇文章中读到，存储桶地址实际上是`hash % number of existing buckets`？这也不对。

有人可以澄清吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T19:10:41.470

如果一个类不覆盖`hashCode()`，而只是从 继承默认实现`java.lang.Object`，那么在典型的 JVM 中，它的`hashCode()`，实际上或多或少是指向它的内部指针。（显然这不是全部，因为`hashCode()`is的返回类型`int`不适合 64 位 JVM；而且这些不是指向物理内存位置的真正指针，首先因为操作系统处理从虚拟地址到物理地址的映射其次，因为即使 JVM 处理了这个问题，垃圾收集器也可以将一个对象从一个堆移动到另一个堆，而不会影响它的`hashCode()`. 但是，“内部内存地址”仍然是一个很好的近似值。）

大多数 JDK 类覆盖的原因`hashCode()`是我们总是希望`hashCode()`与`equals()`;兼容。也就是说，如果`a.equals(b)`，那么我们想要`a.hashCode() == b.hashCode()`。（当您考虑到您通常不希望 - 例如 - a仅仅因为键是两个不同的实例而`Map<String, Object>`具有两个不同的条目时，这是有道理的。通常您希望能够通过键入来查找条目，而不是需要手边有键的原始实例。如果两个键相等，那么我们通常希望它们被视为相等。）`"abc"``String``map.get("abc")`

如果您真的希望地图中的指针相等，则可以[使用`java.util.IdentityHashMap`class](http://docs.oracle.com/javase/7/docs/api/java/util/IdentityHashMap.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:09:53.380

默认`Object.hashCode()`值并不是严格意义上的内存地址，但除非您拥有巨大的内存，否则它在 JVM 中的所有对象中确实是唯一的，因此您可以将其视为“逻辑”地址。

HashMap 的桶数是有限的，每个键确实根据其哈希码分配了一个桶。每个哈希码没有一个桶。因此，即使两个对象具有不同的哈希码，它们也可能最终位于同一个存储桶中。这就是为什么尽可能好地分布 hashCode 以避免此类冲突很重要的原因。

大多数情况下，不希望使用密钥的系统身份哈希码（即返回的哈希码`Object.hashCode()`），因为如果它们持有相同的信息，您希望两个密钥相等，而不是如果它们是相同的对象实例。例如，如果您根据学生的 SSN 将学生存储在地图中，然后从某个 Web 服务或数据库中获取该学生的 SSN，您将不会拥有相同的 STring 实例，但您希望能够使用您收到的 SSN 在地图中查找学生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:08:39.763

> 为什么HashTable不能使用Key的实际内存地址作为Hash？

因为关键平等很重要。当两个对象“相等”（`one.equals(two)`返回 true）时，哈希码也必须相等（`one.hashCode() == two.hashCode()`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T19:09:10.400

默认`hashCode()`不是内存地址，*而是*“身份哈希”。

内存地址可能会改变，但对于给定实例，标识是不变的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T19:08:23.377

您可以拥有任何您认为最佳的 hashCode 实现，而不会破坏 JavaSE api 中为 hashCode 和 equals 制定的规则。

在此处检查等于和哈希码规则：http: [//docs.oracle.com/javase/6/docs/api/java/lang/Object.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)

这很重要，因为 Collections 库和其他 api 严重依赖此属性来实现自己的行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T19:10:45.577

内存地址不应用作对象的 hashCode（除非其 equals 方法仅执行身份比较）。原因明确写在它的[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)中：

> 如果两个对象根据 {@code equals(Object)} 方法相等，则对两个对象中的每一个调用 {@code hashCode} 方法必须产生相同的整数结果。

在 equals 方法仅执行身份比较的情况下，内存地址就足够了，因为 hashCode() 和 equals() 仅对于同一个对象是相等的。

# visual-studio - .cs 文件中的行号，而不是 VS 中的 .aspx 文件中的行号

> ID：13257567
> 
> 赞同：6
> 
> 时间：2012-11-06T19:00:33.407
> 
> 标签：visual-studio, debugging, editor, visual-studio-2012

我今天刚刚安装了 Visual Studio 2012 Professional。出于某种原因，我的视图文件中没有行号，但我的 .cs 文件中确实有它们。在 tools->editors->whatever 中选择打开行号的选项。

我右键单击项目（asp.net 网站），转到属性页，查看调试输出选项，发现它被发送到一个奇怪的目录。我将其更改为我当前应用程序的 bin 文件夹，清除临时 asp.net 文件，重新启动 VS2012，再次尝试，没有运气。还是一样的症状。

关于可能导致这种情况的任何想法？

**编辑：**我只是在更改调试输出位置后注意到，现在，当我打开一个`.aspx`文件时，VS 冻结并变得完全没有响应。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T19:34:35.890

每个文本编辑器都有自己的设置窗格。

您要更改 HTML 编辑器设置吗？ASPX 文件的行号在 **Tools\Options\Text Editor\Html\General\Line Numbers**设置中启用。

![行号设置](../Images/72b64ef638ff2ff1667cc6c26d33597e.png)

要为每个编辑器窗口启用设置，请转到

**工具\选项\文本编辑器\所有语言\常规\行号**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:42:01.700

默认情况下不启用行号。
要打开行号，只需转到
工具 -> 选项 -> 文本编辑器 -> 所有语言 -> 常规 -> 显示并检查行号：

[http://blogs.msdn.com/b/zainnab/archive/2010/03/07/turn-on-line-numbers-vstipedit0025.aspx](http://blogs.msdn.com/b/zainnab/archive/2010/03/07/turn-on-line-numbers-vstipedit0025.aspx)

或者您可以为您想要的每种语言切换它。

[http://www.blackwasp.co.uk/TurnOnLineNumbering.aspx](http://www.blackwasp.co.uk/TurnOnLineNumbering.aspx)

# c++ - Windows Phone 中没有 FileIO？

> ID：13257569
> 
> 赞同：2
> 
> 时间：2012-11-06T19:00:39.397
> 
> 标签：c++, windows-runtime, windows-phone-8, c++-cx

在 Windows 8 WinRT 中，有一个方便的类`FileIO`可以让您在一次异步调用中将 IStorageFile 啜饮到内存中。WP8 不支持；有没有对应的，或者我应该通过流来做这个很长的路要走？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T06:24:01.107

WP8 上不提供 FIleIO 类。此外，WP8 不支持大多数 ApplicationData 文件夹。如果我没记错的话，只支持 LocalFolder 和另一个 ApplicationData 文件夹（TemporaryFolder 或 LocalSettings）。

ApplicationData.LocalFolder 是 IsoStore。它不是“等同于 IsoStore”；它是 IsoStore。现在可以使用“ms-appx://”url 架构来引用位于 IsoStore 中的文件。总的来说，在 WP 上使用 IsoStore 时，最好只使用 WP7[隔离](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile%28VS.95%29.aspx)存储文件API。

但是，在使用 C++ 编码时，您没有那么奢侈，因此您必须使用 ApplicationData.LocalFolder。此外，还有一些地方需要您使用 WinPRT 类型而不是 C# 类型，因此这是另一个您必须使用 ApplicationData.LocalFolder 的地方。在这些情况下，是的，您必须使用 DataWriter 和 DataReader 来读取和写入。

# windows - CALL 命令与带有 /WAIT 选项的 START

> ID：13257571
> 
> 赞同：167
> 
> 时间：2012-11-06T19:00:41.547
> 
> 标签：windows, batch-file

带有 WAIT 选项的 START 命令如何

```
START /wait notepad.exe 
START /wait  notepad.exe 
```

...与使用 CALL 命令有什么不同？

```
CALL notepad.exe 
CALL notepad.exe 
```

是否存在一种情况，其中一个人的行为可能与另一个人的行为不同，这取决于正在执行的内容？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-11-06T19:59:54.257

对于*exe*文件，我认为差异几乎不重要。
但是要启动一个*你*甚至不需要`CALL`.

当启动另一个批处理时，这是一个很大的不同，
因为`CALL`将在同一个窗口中启动它，并且被调用的批处理可以访问相同的变量上下文。
所以它也可以改变影响调用者的变量。

`START`将为调用的批处理创建一个新的 cmd.exe 并且没有 /b 它将打开一个新窗口。
由于它是一个新上下文，因此无法共享变量。

# 差异

**使用`start /wait <prog>`**
- 环境变量的更改在`<prog>`结束时丢失
- 调用者等待直到`<prog>`完成

**使用`call <prog>`**
- 对于*exe*，它可以省略，因为它等于刚刚启动`<prog>`
- 对于*exe-prog*，调用者批处理等待或异步启动*exe*，但行为取决于*exe*本身。
- 对于*批处理*文件，调用者批处理继续，当被调用`<batch-file>`完成时，不调用控件将不会返回调用者批处理

# 附录：

使用`CALL`可以更改参数（对于批处理和 exe 文件），但仅当它们包含插入符号或百分号时。

```
call myProg param1 param^^2 "param^3" %%path%% 
```

将扩展为（从批处理文件中）

```
myProg param1 param2 param^^3 <content of path> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-06T20:06:05.840

我认为它们的性能应该大致相同，但存在一些差异。 `START`通常用于启动应用程序或启动给定文件类型的默认应用程序。这样，如果你`START http://mywebsite.com`不这样做`START iexplore.exe http://mywebsite.com`。

`START myworddoc.docx`将启动 Microsoft Word 并打开 myworddoc.docx。`CALL myworddoc.docx`做同样的事情......但是`START`为窗口状态和这种性质的事情提供了更多选项。它还允许设置进程优先级和亲和性。

简而言之，鉴于 start 提供的附加选项，它应该是您的首选工具。

```
START ["title"] [/D path] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
  [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
  [/NODE <NUMA node>] [/AFFINITY <hex affinity mask>] [/WAIT] [/B]
  [command/program] [parameters]

"title"     Title to display in window title bar.
path        Starting directory.
B           Start application without creating a new window. The
            application has ^C handling ignored. Unless the application
            enables ^C processing, ^Break is the only way to interrupt
            the application.
I           The new environment will be the original environment passed
            to the cmd.exe and not the current environment.
MIN         Start window minimized.
MAX         Start window maximized.
SEPARATE    Start 16-bit Windows program in separate memory space.
SHARED      Start 16-bit Windows program in shared memory space.
LOW         Start application in the IDLE priority class.
NORMAL      Start application in the NORMAL priority class.
HIGH        Start application in the HIGH priority class.
REALTIME    Start application in the REALTIME priority class.
ABOVENORMAL Start application in the ABOVENORMAL priority class.
BELOWNORMAL Start application in the BELOWNORMAL priority class.
NODE        Specifies the preferred Non-Uniform Memory Architecture (NUMA)
            node as a decimal integer.
AFFINITY    Specifies the processor affinity mask as a hexadecimal number.
            The process is restricted to running on these processors.

            The affinity mask is interpreted differently when /AFFINITY and
            /NODE are combined.  Specify the affinity mask as if the NUMA
            node's processor mask is right shifted to begin at bit zero.
            The process is restricted to running on those processors in
            common between the specified affinity mask and the NUMA node.
            If no processors are in common, the process is restricted to
            running on the specified NUMA node.
WAIT        Start application and wait for it to terminate. 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-18T11:45:42.147

例如，调用之间`call`和调用时之间有一个有用的区别， [Gary](https://stackoverflow.com/users/236365/gary)在他对[how-do-i-get-the-application-exit-code-from-a-windows-command-line 的回答中也提到了这一点](https://stackoverflow.com/questions/334879/how-do-i-get-the-application-exit-code-from-a-windows-command-line)`start /wait``regsvr32.exe /s`

```
call regsvr32.exe /s broken.dll
echo %errorlevel% 
```

将始终返回 0 但

```
start /wait regsvr32.exe /s broken.dll
echo %errorlevel% 
```

将从 regsvr32.exe 返回错误级别

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-05-17T18:17:19.220

这是我在并行运行批处理文件时发现的（同一bat文件的多个实例同时具有不同的输入参数）：

假设您有一个执行名为 LongRunningTask.exe 的长任务的 exe 文件

如果直接从 bat 文件调用 exe，只有第一次调用 LongRunningTask 会成功，其余的会得到操作系统错误“文件已被进程使用”

如果您使用此命令：

启动 /B /WAIT "" "LongRunningTask.exe" "参数"

您将能够运行 bat 和 exe 的多个实例，同时仍等待任务完成，然后 bat 继续执行其余命令。/B 选项是为了避免创建另一个窗口，需要空引号才能使命令起作用，请参阅下面的参考。

请注意，如果您在开始时不使用 /WAIT，LongRunningTask 将与批处理文件中的其余命令同时执行，因此如果这些命令之一需要 LongRunningTask 的输出，则可能会产生问题

恢复：

这不能并行运行：

*   调用 LongRunningTask.exe

这将并行运行，只要命令的输出与 bat 文件的其余部分之间没有数据依赖关系，就可以了：

*   启动 /B "" "LongRunningTask.exe" "参数"

这将并行运行并等待任务完成，因此您可以使用输出：

*   启动 /B /WAIT "" "LongRunningTask.exe" "参数"

启动命令的参考：[如何从批处理文件运行程序而不在程序启动后打开控制台？](https://stackoverflow.com/questions/324539/how-can-i-run-a-program-from-a-batch-file-without-leaving-the-console-open-after)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-06-17T12:21:28.830

**称呼**

**在不停止父批处理程序的情况下**从另一个批处理程序调用。call 命令接受标签作为调用的目标。在脚本或批处理文件之外使用时，调用在命令行中无效。 [https://technet.microsoft.com/en-us/library/bb490873.aspx](https://technet.microsoft.com/en-us/library/bb490873.aspx)

**开始**

启动**单独的命令提示符窗口**以运行指定的程序或命令。不带参数使用时，启动会打开第二个命令提示符窗口。 [https://technet.microsoft.com/en-us/library/bb491005.aspx](https://technet.microsoft.com/en-us/library/bb491005.aspx)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-06-11T20:39:34.490

这是一个旧线程，但我刚刚遇到这种情况并发现了一种巧妙的解决方法。我试图运行 setup.exe，但焦点正在返回到脚本的下一行，而无需等待 setup.exe 完成。我尝试了上述解决方案，但没有成功。

最后，通过更多管道传递命令起到了作用。

setup.exe {参数} | 更多的

# shell - 列出当前目录中具有相同权限的文件

> ID：13257573
> 
> 赞同：0
> 
> 时间：2012-11-06T19:00:43.737
> 
> 标签：shell, unix

我需要编写一个接受两个或多个参数、一个文件模式、一个命令和一个可选参数列表的 Unix shell 脚本，并在具有该给定模式的所有文件上使用可选参数执行给定命令。

例如，`mycode 644 ls -l`应该对当前目录中所有模式为 644 的文件执行命令 ls -l。

我使用此代码将文件权限更改为数字模式

```
#!/bin/sh
 mode=$1
 #it adds the numeric permission to the beginning of the line
 ls -l |awk '{k=0;for(i=0;i<=8;i++)k+=((substr($1,i+2,1)~/[rwx]/) \
         *2^(8-i));if(k)printf("%0o ",k);print }'
 .....
 shift $1
 $* 
```

但我不知道如何让代码只列出具有相同权限的文件。我怎样才能要求代码做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:08:54.643

`find`为此使用命令。例如

```
find . -maxdepth 1 -perm 644 -exec ls -ld {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T06:01:49.180

你为什么不能再像这样使用一个awk。在这里，我将采用 644 可用的第一列。这样您就不必使用 find 命令。您可以放置​​任何变量并传递具有所需权限的参数并根据输入列出这些文件，而不是 644。

```
ls -l |awk '{k=0;for(i=0;i<=8;i++)k+=((substr($1,i+2,1)~/[rwx]/) \
         *2^(8-i));if(k)printf("%0o ",k);print }' | awk '$1 ~ 644' 
```

# c++ - 从文件中读取对象并出错

> ID：13257577
> 
> 赞同：0
> 
> 时间：2012-11-06T19:00:49.660
> 
> 标签：c++, file

（这是一个家庭作业项目。）我正在尝试将 A 类中的对象（包含几个字符串和整数，以及 B 类中的对象的列表）写入文件。然后我必须从文件中读回这些对象并显示它们的内容。我正在使用这段代码：

写作：

```
ofstream ofs("filestorage.bin", ios::app|ios::binary);
A d;
ofs.write((char *)&d, sizeof(d));
ofs.close(); 
```

阅读：

```
ifstream ifs("filestorage.bin", ios::binary);
A e(1);

while(ifs.read((char *)&e, sizeof(e))) {    
    cout<<e;
}

ifs.close(); 
```

`<<`已经重新定义了。

它将数据写入文件，然后将其读回，显示我想要的所有内容，但最后我得到了一个不错的“访问冲突”错误。我还尝试将简单变量写入和读取到文件中（如`int`s）。效果很好；但是当我尝试读取对象或字符串时，我得到“访问冲突”。写作接缝没问题，因为我没有错误。

你能告诉我为什么会发生这种情况，我该如何解决？如果有必要，我也可以发布我的 A 和 B 类。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:10:05.077

为您的类实现两个运算符`<<`和`>>`。

```
class A {
    int a;
    string s;
pubilc:
    friend ostream& operator<< (ostream& out, A& a ) {
        out << a.a << endl;
        out << a.s << endl;
    }
    friend istream& operator>> (istream& is, A& a ) {
        //check that the stream is valid and handle appropriately.
        is >> a.a; 
        is >> a.s;
    }
}; 
```

**写：**

```
A b;
ofstream ofs("filestorage.bin", ios::app|ios::binary);
ofs << b; 
```

**读：**

```
fstream ifs("filestorage.bin", ios::binary);
A b;
ifs >> b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:17:52.090

您可以尝试仅检查流状态

```
while(ifs.read((char *)&e, sizeof(e)).good()){
     cout<<e;
} 
```

# android - 无法获取 ResourceID Mono-Android

> ID：13257579
> 
> 赞同：0
> 
> 时间：2012-11-06T19:00:56.747
> 
> 标签：android, .net

我有一个微调器，它根据列表中的选定项目设置图像视图资源。问题是当我去检索资源 ID 时，我总是得到一个 0 或未知成员。

选定的微调项（）

```
 private void spinner_ItemSelected(object sender, AdapterView.ItemSelectedEventArgs e) {
        Spinner spinner = (Spinner)sender;
        string toast = string.Format("{0}", spinner.GetItemAtPosition(e.Position));
        var imageView = FindViewById<ImageView>(Resource.Id.stateView);
        var resourceId = 0;

        resourceId = Resources.GetIdentifier(toast, "drawable", PackageName);
        imageView.SetImageResource(resourceId);
        Toast.MakeText(this, toast, ToastLength.Long).Show();
    } 
```

我已经尝试过 Resource.GetIdentifier(string, string, string) 的每种组合，但我没有任何运气。

该资源位于 Resource.Designer.cs 中，并且在调试时，如果我将资源 ID 的值编辑为 Resource.Designer.Drawable 中项目的 ID 之一，则该函数按预期工作。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:25:18.670

从未使用过 Mono-Android，如果您已经尝试过，请道歉，但是...您确定您匹配的是 Resources.GetIdentifier 的正确语法吗？您是否也尝试过“drawable.png”（或任何扩展名）而不是“drawable”？

**编辑：

在常规的 Android 上，我相信在视图到位之前资源不会膨胀，resourceID 在它们出现在屏幕上之前是无效的。为了设置 imageView 的源，我们使用静态的东西...

```
imageView.setBackgroundResource(R.drawable.splash_screen); 
```

其中“splash_screen.png”是存储在 res/drawable-small/ 下的文件

不确定您是否仔细检查了文件名，并且它在正确的文件夹中？

# python - python - matplotlib - 避免绘图文本与网格线、边框和其他文本发生冲突

> ID：13257580
> 
> 赞同：2
> 
> 时间：2012-11-06T19:00:59.263
> 
> 标签：python, matplotlib, collision, scatter-plot

我正在生成一个散点图，我想知道是否可以避免网格线和绘图上的文本之间的任何重叠。

![示例图](../Images/4614a35a1643da7fdab8d88afa97a2d7.png)

例如，第一个点的文本在网格线上，这使得它难以阅读。

我的代码如下：

```
for i, j in zip(path_loss_list,throughput_values):
    plt.annotate( "%s" %str(j), xy=(i,j), xytext=(-5, 5), ha='right', textcoords='offset points') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:14:57.097

我认为如果您将所有文本直接放在绘图点上方，那么您应该没有问题。试试，例如：

```
 for i, j in zip(path_loss_list,throughput_values):
        plt.annotate( "%s" %str(j), xy=(i,j), xytext=(0, 5), ha='right', textcoords='offset points') 
```

但是，这可能会导致与右边的点有一些重叠，在这种情况下，您可以更改`xytext = (0, 8).` 您的所有点可能没有一致的解决方案。因此，您可能必须逐点指定文本高度，例如：

```
 for i, j in zip(path_loss_list,throughput_values):
       if not j> 59:
           plt.annotate( "%s" %str(j), xy=(i,j), xytext=(-5, 5), ha='right', textcoords='offset points')
       else:
          plt.annotate( "%s" %str(j), xy=(i,j), xytext=(0, 5), ha='right', textcoords='offset points') 
```

这将移动最高点的文​​本。您可以推断 y = 54.615。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:42:44.010

如果我理解正确，您希望网格线位于您的笔记和点下方。为此，请使用`ax.set_axisbelow(True)`，其中 ax 是包含网格线的轴。

[http://matplotlib.org/api/axes_api.html?highlight=set_axisbelow#matplotlib.axes.Axes.set_axisbelow](http://matplotlib.org/api/axes_api.html?highlight=set_axisbelow#matplotlib.axes.Axes.set_axisbelow)

您也可以将其设置为脚本的参数，这样您就不必每次跟踪它时都更改它。另外，很简单，只要`matplotlib.rc('axes', axisbelow=True)`

要了解有关 rcParams 的更多信息，请查看[http://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.rc](http://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.rc)

以及参数列表[http://matplotlib.org/users/customizing.html?highlight=rcparams](http://matplotlib.org/users/customizing.html?highlight=rcparams)

# ruby-on-rails-3 - Formtastic：在输入字段中插入预加载的文本

> ID：13257581
> 
> 赞同：1
> 
> 时间：2012-11-06T19:01:00.880
> 
> 标签：ruby-on-rails-3, forms, formtastic

如何在 Formtastic 的经典输入字段中添加预加载的常量字符串？

我已经搜索了很多，但我还没有找到如何解决这个问题。

例如，我的表单中有这行代码：

```
<%= f.input :url, :hint => "Url in the form of: http//www.mysite.com"  %> 
```

在输入字段中我要预加载：“http://”，因此用户必须只填写 URL 的剩余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:13:46.447

这应该做你想要的。

```
<%= f.input :url, :hint => "Url in the form of: http//www.mysite.com", :input_html => { :value => "http://" }%> 
```

# php - Facebook评论计数器不起作用

> ID：13257587
> 
> 赞同：2
> 
> 时间：2012-11-06T19:01:22.440
> 
> 标签：php, facebook

我在我的 php 动态网站上使用 facebook 评论插件。评论框工作正常，但 facebook 计数不起作用，它总是显示零评论。

我在 index.php 中使用它

```
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

我在带有评论框的页面上使用它

```
<fb:comments-count href="http://mywebsite.nl/news/<?=$news['ID'];?>.html"></fb:comments-count> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:08:35.220

上面的 url是否与页面标签中`href`给出的 url 匹配？`<meta property="og:url" ... />`标签中`og:url`的那个是 Facebook 将与评论相关联的那个。

# mysql - MySQL - SELECT IN - 计算结果中 user_id 的行数？

> ID：13257591
> 
> 赞同：1
> 
> 时间：2012-11-06T19:01:28.130
> 
> 标签：mysql

我基本上是在尝试查询一张表，看看谁可能在玩我的贝宝系统。

这个想法是我查询我的表以查看哪些付款失败，然后将失败次数加起来`user_id`。非常简单的概念，我只是在努力解决如何做到这一点。

我的开始查询：

```
SELECT * FROM `paypal_ipn` WHERE initial_payment_status =  'Failed' 
```

然后我想使用上面的查询，只打印出每`payer_id`（一列）的总数。

这可能仅在 MySQL 中实现，还是我需要使用 PHP 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:04:11.470

你基本上想做一个sql`GROUP BY`操作。我无法从问题中判断数据是否需要按名为`user_id`or的列分组`payer_id`。这些查询之一应该适合您：

```
SELECT user_id, count(*) FROM `paypal_ipn`
WHERE initial_payment_status = 'Failed'
GROUP BY user_id;

SELECT payer_id, count(*) FROM `paypal_ipn`
WHERE initial_payment_status = 'Failed'
GROUP BY payer_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:05:06.490

这个怎么样：

```
Select payer_id, count(paypal_tranaction_id) from paypal_ipn where initial_payment_status = 'Failed' group by payer_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:05:37.490

您只需要在 上进行分组`user_id`。所以查询看起来像：

`SELECT user_id, count(*) FROM paypal_ipn WHERE initial_payment_status = 'Failed' GROUP BY user_id;`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:07:48.327

你可以做这样的事情；我添加了失败付款的总数，以向您展示您可以查询的其他有趣的事情（我不知道付款是否真的被调用`payment`，请注意）。

```
SELECT payer_id,
    COUNT(*) AS transactions,
    SUM(payment) AS total
FROM `paypal_ipn` WHERE initial_payment_status = 'Failed'
GROUP BY payer_id; 
```

# php - 使用zend模型和控制器实现登录认证

> ID：13257592
> 
> 赞同：2
> 
> 时间：2012-11-06T19:01:29.053
> 
> 标签：php, extjs, zend-db, zend-framework2

我正在使用 Zend 2.0，我从未将 EXTJS 与 Zend 结合使用。

这是我在 view/login/index.phtml 中的 extjs 代码：

```
<?php $this->inlineScript()->captureStart() ?>
var LoginWindow
Ext.onReady(function() {

    LoginWindow = new Ext.create('Ext.window.Window',{
        title: 'Login',
        closable: false,
        draggable: false,
        resizable: false,
        width: 370,
        items: [
            Ext.create('Ext.form.Panel', {
                id: 'LoginForm',

                bodyPadding: 5,
                width: 350, 

                url: '/',
                layout: 'anchor',
                defaults: {
                    anchor: '100%'
                },

                // The fields
                defaultType: 'textfield',
                items: [{
                    fieldLabel: 'Username',
                    name: 'user',
                    allowBlank: false
                },{
                    fieldLabel: 'Password',
                    inputType: 'password',
                    name: 'pw',
                    allowBlank: false
                }],

                // Reset and Submit buttons
                buttons: [{
                    text: 'Reset',
                    handler: function() {
                        this.up('form').getForm().reset();
                    }
                },
                {
                    text: 'Submit',
                    formBind: true,
                    disabled: true,
                    handler: function() {
                        var form = this.up('form').getForm();

                    }
                }]
            })
        ]
    });
    Ext.getBody().mask()

    LoginWindow.show()  

});

<?php $this->inlineScript()->captureEnd() ?> 
```

现在我不确定如何将用户名/密码发送到 LoginController.php 并使用模型从数据库表中验证用户名/密码。

任何示例或可能的解决方案都会有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T09:31:47.883

请不要将以下内容视为即用型解决方案。我还添加了更多部分，当您开始管理登录时会发现它们很有用。您的主要部分应该是控制器的路由。我还保留了视图内容，除了其中的 ExtJS 部分。无论如何，我希望这对你有帮助。

首先，您的表单中有一些问题。试试下面的

```
var loginWindow;
Ext.onReady(function() {

    loginWindow = new Ext.create('Ext.window.Window',{
        title: 'Login',
        closable: false,
        draggable: false,
        resizable: false,
        width: 370,
        modal: true,
        items: [
            Ext.create('Ext.form.Panel', {
                id: 'LoginForm',
                bodyPadding: 5,
                width: 350, 
                layout: 'anchor',
                defaults: {
                    anchor: '100%'
                },
                defaultType: 'textfield',
                items: [{
                    fieldLabel: 'Username',
                    name: 'user',
                    allowBlank: false
                },{
                    fieldLabel: 'Password',
                    inputType: 'password',
                    name: 'pw',
                    allowBlank: false
                }],

                url: 'Login/Auth', // first one should be your controller, second one the controller action (this one need to accept post)
                buttons: [
                    {
                        text: 'Reset',
                        handler: function() {
                            this.up('form').getForm().reset();
                        }
                    },
                    {
                        text: 'Submit',
                        formBind: true,
                        disabled: true,
                        handler: function() {
                            var form = this.up('form').getForm();
                            if (form.isValid()) {
                                form.submit({
                                    success: function(form, action) {
                                       Ext.Msg.alert('Success', 'Authenticated!');
                                    },
                                    failure: function(form, action) {
                                        Ext.Msg.alert('Failed', 'Authentication Failed');
                                    }
                                });
                            }
                        }
                    }
                ]
            })
        ]
    }).show();
    // Ext.getBody().mask(); <- modal property does the same
}); 
```

现在到 ZF2

**路由**

应用程序的每个页面都称为一个动作，并且动作被分组到模块内的控制器中。因此，您通常会将相关操作分组到控制器中。

URL 到特定操作的映射是使用模块的 module.config.php 文件中定义的路由完成的。您应该为登录操作添加路由。这是更新的模块配置文件，其中包含注释块中的新代码。

```
<?php
return array(
    'controllers' => array(
        'invokables' => array(
            'Login\Controller\Login' => 'Login\Controller\LoginController',
        ),
    ),

    // The following section is new and should be added to your file
    'router' => array(
        'routes' => array(
            'login' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/login[/:action][/:username][/:password]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'username' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'password' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'controller' => 'Login\Controller\Login',
                        'action'     => 'index',
                    ),
                ),
            ),
        ),
    ),

    'view_manager' => array(
        'template_path_stack' => array(
            'login' => __DIR__ . '/../view',
        ),
    ),
); 
```

路由的名称是“login”，类型为“segment”。分段路由允许您在 URL 模式（路由）中指定占位符，这些占位符将映射到匹配路由中的命名参数。在这种情况下，路由是**/login[/:action][/:id]**，它将匹配任何以 /login 开头的 URL。下一个段将是一个可选的动作名称，最后下一个段将映射到一个可选的 id。方括号表示一个段是可选的。约束部分允许您确保段中的字符符合预期，因此您的操作仅限于以字母开头，随后的字符只能是字母数字、下划线或连字符。

**控制器**

现在您需要设置控制器。控制器是一个类，一般称为{Controller name}Controller。请注意，{Controller name} 必须以大写字母开头。此类位于模块的 Controller 目录中名为 {Controller name}Controller.php 的文件中。在您的情况下，这将类似于 module/Login/src/Login/Controller。每个动作都是控制器类中名为 {action name}Action 的公共方法。在您的情况下，{action name} 应以小写字母开头。

```
<?php
namespace Login\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class LoginController extends AbstractActionController
{
    public function authenticateAction($username, $password)
    {
        $params = array('driver' => 'driver',
                        'dbname' => 'name');

        $db = new DbAdapter($params);

        use Zend\Authentication\Adapter\DbTable as AuthAdapter;
        // Oversimplified example without even hashing the password
        $adapter = new AuthAdapter($db,
                                   'Logins',
                                   'username',
                                   'password'
                                   );

        // get select object (by reference)
        $this->_adapter->setIdentity($username);
        $this->_adapter->setCredential($password);

        $result = $adapter->authenticate();

        if($result->isValid()) {
            // authenticated
        }
    }

    protected $loginTable;
    public function getLoginTable()
    {
        if (!$this->loginTable) {
            $sm = $this->getServiceLocator();
            $this->loginTable = $sm->get('Login\Model\LoginTable');
        }
        return $this->loginTable;
    }
} 
```

**视图脚本**

这些文件将由 DefaultViewStrategy 执行，并将传递从控制器操作方法返回的任何变量或视图模型。这些视图脚本存储在我们模块的视图目录中，位于以控制器命名的目录中。现在创建这四个空文件：

*模块/登录/查看/登录/登录/authenticate.phtml`*

**该模型**

*在module/Login/src/Login/Model*下创建一个名为*Login.php*的文件：

 *```
<?php
namespace Login\Model;

class Login
{
    public $id;
    public $username;
    public $password;

    public function exchangeArray($data)
    {
        $this->id     = (isset($data['id'])) ? $data['id'] : null;
        $this->username = (isset($data['username'])) ? $data['username'] : null;
        $this->password  = (isset($data['password'])) ? $data['password'] : null;
    }
} 
```

*在module/Login/src/Login/Model*目录中创建*LoginTable.php*文件，如下所示：

 *```
<?php
namespace Login\Model;

use Zend\Db\TableGateway\TableGateway;

class LoginTable
{
    protected $tableGateway;

    public function __construct(TableGateway $tableGateway)
    {
        $this->tableGateway = $tableGateway;
    }

    public function fetchAll()
    {
        $resultSet = $this->tableGateway->select();
        return $resultSet;
    }

    public function getLogin($id)
    {
        $id  = (int) $id;
        $rowset = $this->tableGateway->select(array('id' => $id));
        $row = $rowset->current();
        if (!$row) {
            throw new \Exception("Could not find row $id");
        }
        return $row;
    }

    public function saveLogin(Login $login)
    {
        $data = array(
            'username' => $login->password,
            'password'  => $login->username,
        );

        $id = (int)$login->id;
        if ($id == 0) {
            $this->tableGateway->insert($data);
        } else {
            if ($this->getLogin($id)) {
                $this->tableGateway->update($data, array('id' => $id));
            } else {
                throw new \Exception('Form id does not exist');
            }
        }
    }

    public function deleteLogin($id)
    {
        $this->tableGateway->delete(array('id' => $id));
    }
} 
```

**使用ServiceManager配置表网关并注入LoginTable**

将此方法添加到*module/Login中**Module.php*文件的底部。

 *```
<?php
namespace Login;

// Add these import statements:
use Login\Model\Login;
use Login\Model\LoginTable;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\TableGateway\TableGateway;

class Module
{
    // getAutoloaderConfig() and getConfig() methods here

    // Add this method:
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'Login\Model\LoginTable' =>  function($sm) {
                    $tableGateway = $sm->get('LoginTableGateway');
                    $table = new LoginTable($tableGateway);
                    return $table;
                },
                'LoginTableGateway' => function ($sm) {
                    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                    $resultSetPrototype = new ResultSet();
                    $resultSetPrototype->setArrayObjectPrototype(new Login());
                    return new TableGateway('login', $dbAdapter, null, $resultSetPrototype);
                },
            ),
        );
    }
} 
```

最后，您需要配置 ServiceManager 以便它知道如何获取*Zend\Db\Adapter\Adapter*。使用以下代码修改*config/autoload/global.php*

```
<?php
return array(
    'db' => array(
        'driver'         => 'Pdo',
        'dsn'            => 'mysql:dbname=zf2tutorial;host=localhost',
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter'
                    => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
    ),
); 
```

你应该把你的数据库凭据放在*config/autoload/local.php*

```
<?php
return array(
    'db' => array(
        'username' => 'YOUR USERNAME HERE',
        'password' => 'YOUR PASSWORD HERE',
    ),
); 
```

您可能还会发现以下代码片段很有用（查看*测试*和*演示*）：

[https://github.com/zendframework/zf2](https://github.com/zendframework/zf2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:53:23.360

你在一个问题中有几个问题。从学习如何验证密码的 Zend_Auth 开始，学习如何从请求中检索参数的 Zend_Controller，学习如何发送这些参数的 Zend_Form，学习如何将一些 js 与应用程序的其余部分相关联的 Zend_View。

简而言之，密码和用户名通过表单发送，您的应用程序通过请求对象的 getParams 方法获取它们。

我没有太多的链接可以发给你，ZF2 的文档目前还不少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T06:32:39.210

它不是很清楚你在问什么，所以我要写一个通用的答案，它不会特定于 zend 框架，因为我不知道 zend 框架。但以下几点适用于任何用于身份验证的技术。

1.  您将不得不对服务器执行正常形式的 POST。您可以通过使用发送 AJAX 帖子在 extjs 中实现这一点

    ```
    form.submit(options) 
    ```

    `standardSubmit : true`或通过在表单上设置进行普通的 HTML 提交。两者的文档都在[这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Panel-method-submit)和[这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-standardSubmit)。正如文档中所引用的`Ext.form.Panel`

    > 尽管没有作为 FormPanel 的配置选项列出，但 FormPanel 类接受 Ext.form.Basic 类支持的所有配置选项，并在创建时将它们传递给内部 BasicForm。

2.  出于安全原因，密码应以加密格式存储在数据库中。此外，出于同样的安全原因，从数据库中解密存储的密码后，不应在代码中比较密码。因此，认证的标准查询就像

    ```
    select * from users where username='username' and password='password' 
    ```

    传递给上述查询的密码也应该被加密。上述查询的结果应确定用户是否已成功通过身份验证。如果查询返回 0 结果，则验证失败。此外，使用上述样式的优点是您有一个用户对象，您可以将其与会话关联，而无需进行额外的查询。

因此，以下应该是这样的：

1.  邮政
2.  控制器捕获请求
3.  检索用户名密码
4.  通行证服务
5.  服务调用加密器并获取加密密码
6.  将用户名和加密密码传递给 DAO
7.  DAO 运行查询并返回结果服务
8.  服务决定用户是否通过身份验证并将决定传递给控制器
9.  控制器向用户发送适当的响应

我希望这回答了你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T04:15:03.650

ZfcUser模块有一个登录[验证](https://github.com/ZF-Commons/ZfcUser)的工作实现。它是[ZF-Commons](https://github.com/ZF-Commons)模块组的一部分，因此您也可以打赌它正在被积极维护。

非常适合参考或直接使用。***

# lotus-notes - Java 无法创建 MIME 标头？

> ID：13257595
> 
> 赞同：0
> 
> 时间：2012-11-06T19:01:39.673
> 
> 标签：lotus-notes, lotus-domino

好的，我正在使用 Java 代理循环并将许多 Base64 字符串转换为它们所代表的图像。我在设置 headerVal 时遇到问题。下面是代码块。记录显示我正在获取正文，因为它已经是一个 MIMEEntity，但即使我创建了标题，（两次）这不是他们的任何一次 - 所以我说标题的两行都是空打印。我终于在 header.setHeaderVal("image/png") 行上得到了一个空指针异常。有人可以告诉我我在这里缺少什么吗？

干杯，布赖恩

```
MIMEEntity body;                         
if(doc.hasItem("body")){ 
        System.out.println("has MIME body"); 
        body = doc.getMIMEEntity("body"); 
} else { 
        System.out.println("before create MIME body"); 
        body = doc.createMIMEEntity(); 
} 
if(body == null){ 
        body = doc.createMIMEEntity(); 
        System.out.println("body was null"); 
} 
System.out.println("after body item"); 
allObjects.addElement(body); 

if (body == null){ 
        System.out.println("hmm, body is null"); 
} 

System.out.println("before header"); 
//MIMEHeader header = null; 
MIMEHeader header = body.createHeader("Content-Type"); 
System.out.println("after header"); 
if(header == null ){ 
        System.out.println("header was null???"); 
        header = body.createHeader("Content-Type"); 
        System.out.println("after header null create"); 
} 
allObjects.addElement(header); 
if(header == null ){ 
        System.out.println("header was null AGAIN???"); 
        header = body.createHeader("Content-Type"); 
        System.out.println("after header null create AGAIN"); 
} 
System.out.println("after header add object"); 
header.setHeaderVal("image/png"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:23:37.433

你错过了`session.setConvertMIME(false)`吗？

以下是 Designer 帮助中的示例部分：

```
 // Do not convert MIME to rich text
  session.setConvertMIME(false);
  Database db = agentContext.getCurrentDatabase();
  Document doc = db.createDocument();
  // Create parent entity
  doc.replaceItemValue("Form", "Memo");
  MIMEEntity body = doc.createMIMEEntity();
  MIMEHeader header = body.createHeader("Content-Type");
  header.setHeaderVal("multipart/mixed"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:27:12.890

除了添加上述 setConvertMime 方法之外，我唯一能找到的是该方法的文档说明`createHeader`：

> 如果标头的创建超过了同名标头的已知限制，则此方法返回 Nothing。

我想如果您之前在代码中设置了 Content-Type 可能会发生这种情况？

# ruby-on-rails - Rails 3.2 严格的质量分配默认值

> ID：13257596
> 
> 赞同：2
> 
> 时间：2012-11-06T19:01:41.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, mass-assignment

在一个新的 Rails 项目中，批量分配在生产中未设置为严格的原因以及在开发和测试中设置为严格的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:12:12.347

你的意思是这条线，我假设：

```
# Raise exception on mass assignment protection for Active Record models
config.active_record.mass_assignment_sanitizer = :strict 
```

这不会**设置**批量分配保护本身 - 无论环境如何，它都默认为受保护。正如评论所暗示的那样，它的作用是告诉 Rails 在批量分配错误时引发异常，这有助于开发和测试。在生产中，这些都被忽略了。

从以下文档`attr_protected`：

> **对这些属性的批量分配将被忽略**，要分配给它们，您可以使用直接编写器方法。这是为了保护敏感属性不被篡改 URL 或表单的恶意用户覆盖。

# expressionengine - 如何在 CartThrob 会话中存储自定义字段数据

> ID：13257601
> 
> 赞同：1
> 
> 时间：2012-11-06T19:02:06.923
> 
> 标签：expressionengine, cartthrob

我在 CartThrob 结账流程的最后一页设置了“礼物信息”自定义字段。这是我的代码示例：

```
{exp:cartthrob:checkout_form return="/checkout/billing/process"}
    <textarea id="gift_message" name="gift_message">
         {if gift_message}
              {gift_message}
         {/if}
    </textarea>
{/exp:cartthrob:checkout_form} 
```

如果订单提交后出现错误，则不保留“礼品信息”数据。如何强制它保存到 CartThrob 会话？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:07:24.657

使用自定义数据，您必须为要保存到会话的名称添加前缀：

IE。`<textarea id="gift_message" name="custom_data[gift_message]">`您可能需要将条件更改为：`{if custom_data:gift_message}{custom_data:gift_message}{/if}`

# .net - Azure 与 SQL 迁移的持续集成

> ID：13257602
> 
> 赞同：2
> 
> 时间：2012-11-06T19:02:10.730
> 
> 标签：.net, azure, continuous-integration, azure-sql-database

[这里](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/)有一篇很好的文章，描述了如何在 Azure 上实现持续集成。

但是，如果我们必须在部署过程中更新多个服务角色使用的 SQL Azure 实例的 SQL 架构，该怎么办？

管理此问题的最佳方法是什么？在迁移过程中是否应该停止服务？如何使用 cmdlet 实现它？

PS 对于 SQL 迁移，我们更喜欢使用 FluentMigrator。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:49:22.520

请参阅本文以管理更复杂的更新域和策略：http: [//msdn.microsoft.com/en-us/magazine/hh781019.aspx](http://msdn.microsoft.com/en-us/magazine/hh781019.aspx)

它并不特定于 SQL Azure，但它确实涵盖了整体架构和您关于“是否应该停止服务”的问题。

# html - 菜单下拉显示在列中，CSS

> ID：13257614
> 
> 赞同：0
> 
> 时间：2012-11-06T19:02:59.013
> 
> 标签：html, css, drop-down-menu, menu

我有一个具有多个级别的下拉菜单，在一个类别（“Elaborati”）上我有一个元素列表，但显示时间很长。我想在多个列中显示为组或列表框项目

HTML：

```
 <ul    class="sf-menu sf-navbar" >
            <li>

                <a href="#">Pollo</a>
                <ul>
                    <li>
                        <a href="#">Prime lavorazioni</a>
                        <ul>
                            <li><a href="#">Bustoni</a></li>
                            <li><a href="#">Novelli</a></li>
                            <li><a href="#">Rosticceria</a></li>

                        </ul>
                    </li>
                    <li>
                        <a href="#">Seconde lavorazioni</a>
                        <ul>
                            <li><a href="#">Petto</a></li>
                            <li><a href="#">Busto disossato</a></li>
                            <li><a href="#">Busto alla diavola</a></li>
                            <li><a href="#">Busto senza petto</a></li>
                            <li><a href="#">Coscioto</a></li>
                            <li><a href="#">Ali</a></li>
                            <li><a href="#">Coscia</a></li>
                            <li><a href="#">Anche</a></li>
                            <li><a href="#">Polpa</a></li>
                            <li><a href="#">Fegati</a></li>
                            <li><a href="#">Duroni</a></li> 
                         </ul>
                    </li>
                    <li>
                        <a href="#">Terze lavorazioni</a>
                        <ul>
                            <li><a href="#">Busto disossato ripieno</a></li>
                            <li><a href="#">Rollè</a></li>

                        </ul>
                    </li>

                </ul>
            </li>
            <li>
                <a href="#">Tacchino</a>
                <ul>
                    <li>
                        <a href="#">Prime lavorazioni</a>
                        <ul>
                            <li><a href="#">Busto</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Seconde lavorazioni</a>
                        <ul>
                            <li><a href="#">Cosce</a></li>
                            <li><a href="#">Fusi</a></li>
                            <li><a href="#">Anchi</a></li>
                            <li><a href="#">Colli</a></li>
                            <li><a href="#">Fesa</a></li>
                            <li><a href="#">Spezzatino</a></li>
                            <li><a href="#">Ossobuco</a></li>
                         </ul>
                    </li>
                    <li>
                        <a href="#">Terze lavorazioni</a>
                        <ul>
                            <li><a href="#">Rollè</a></li>

                        </ul>
                    </li>

                </ul>
            </li>
            <li>
                <a href="#">Panati</a>
                <ul>
                    <li><a href="#">Cordon bleu</a></li>
                    <li><a href="#">Spinacine</a></li>
                    <li><a href="#">Petto di pollo panato</a></li>
                    <li><a href="#">Bocconcini</a></li>
                    <li><a href="#">Corrinboca</a></li>
                    <li><a href="#">Ciquito</a></li>
                    <li><a href="#">Pepite dorate</a></li>

                </ul>
            </li>
             <li>
                <a href="#">Coti</a>
                <ul>
                    <li><a href="#">Wrustel di pollo e tacchino</a></li>

                </ul>
            </li>
             <li>
                <a href="#">Elaborati</a>
                <ul >
                    <li><a href="#">Alette condite paprica/mais</a></li>
                    <li><a href="#">Bastoncini</a></li>
                    <li><a href="#">BonRoll classico</a></li>
                    <li><a href="#">Bonroll spinaci</a></li>
                    <li><a href="#">Cannoli</a></li>
                    <li><a href="#">Cipollate</a></li>
                    <li><a href="#">Fagottini</a></li>
                    <li><a href="#">Girelle</a></li>
                    <li><a href="#">Hamburger</a></li>
                    <li><a href="#">Hamburguer doppi</a></li>
                    <li><a href="#">Hamburger golosi </a></li>
                    <li><a href="#">Hamburger pancetta</a></li>
                    <li><a href="#">Panzerotti</a></li>
                    <li><a href="#">Pollo ripieno</a></li>
                    <li><a href="#">Rollè di pollo ripieni </a></li>
                    <li><a href="#">Rollè di tacchino ripieni</a></li>
                    <li><a href="#">Rollini</a></li>
                    <li><a href="#">Rotollini</a></li>
                    <li><a href="#">Spiedini</a></li>
                    <li><a href="#">Spiedoni</a></li>
                    <li><a href="#">Stigliole tradizionali</a></li>
                    <li><a href="#">Stigliole palermitane</a></li>
                    <li><a href="#">Straccetti</a></li>
                    <li><a href="#">Tartufelli</a></li>
                    <li><a href="#">Tortini</a></li>
                    <li><a href="#">Tramezini</a></li>
                    <li><a href="#">Tricolori</a></li>
                    <li><a href="#">*Ti piacciono le Stigliole senza uova o preferisci altre spezie sulle Alette?
Comunicaci i tuoi desideri e cercheremo di realizzarli!
</a></li>                                                         
                </ul>
            </li>
             <li>
                <a href="#">Surgelati</a>
                <ul>
                    <li><a href="#">Merluzzo</a></li>
                    <li><a href="#">Platessa</a></li>
                    <li><a href="#">Polpo</a></li>
                    <li><a href="#">Spada</a></li>
                    <li><a href="#">Calamari</a></li>
                    <li><a href="#">Kebap</a></li>
                    <li><a href="#">Carrè di agnello</a></li>
                    <li><a href="#">Patate</a></li>
                    <li><a href="#">Minestrone</a></li>
                    <li><a href="#">Piselli</a></li>
                    <li><a href="#">Spinaci</a></li>
                    <li><a href="#">Insalata russa</a></li>
                    <li><a href="#">Anelli di cipolla</a></li>
                    <li><a href="#">Panelle</a></li>
                    <li><a href="#">Broccoli</a></li>
                    <li><a href="#">Cavolfiori</a></li>
                    <li><a href="#">Carote</a></li>

                </ul>
            </li> 
              <li>
                <a href="#">Suino</a>
                <ul>
                    <li><a href="#">Spalla</a></li>
                    <li><a href="#">Pancettone</a></li>
                    <li><a href="#">Lombo Bologna</a></li>
                    <li><a href="#">Filone</a></li>
                    <li><a href="#">Pancetta</a></li>
                    <li><a href="#">Coppa</a></li>
                    <li><a href="#">Zampetti</a></li>
                    <li><a href="#">Puntine</a></li>
                    <li><a href="#">Fegato</a></li>
                    <li><a href="#">Lardo</a></li>
                    <li><a href="#">Rete</a></li>

                </ul>
            </li>  
              <li>
                <a href="#">Equino</a>
                <ul>
                    <li><a href="#">Fettinescelte</a></li>
                    <li><a href="#">Noce</a></li>
                    <li><a href="#">Fesotto</a></li>
                    <li><a href="#">Controfileto</a></li>
                    <li><a href="#">Scamone</a></li>

                </ul>
            </li> 
                         <li>
                <a href="#">Vitello</a>
                <ul>

                    <li><a href="#">Noce</a></li>
                    <li><a href="#">Lombo</a></li>
                    <li><a href="#">Trippa</a></li>
                    <li><a href="#">Agnelo intero</a></li>
                    <li><a href="#">Agnellone intero</a></li>

                </ul>
            </li>        
               <li>
                <a href="#">Aromi</a>
                <ul>

                    <li><a href="#">Preparato aromi in buste</a></li>
                    <li><a href="#">Preparato aromi in secchi</a></li>
                    <li><a href="#">Trippa</a></li>
                    <li><a href="#">Agnelo intero</a></li>
                    <li><a href="#">Agnellone intero</a></li>

                </ul>
            </li> 
             <li>
                <a href="#">Uova</a>
                <ul>

                    <li><a href="#">Brick</a></li>
                    <li><a href="#">Sfuse</a></li>

                </ul>
            </li> 
             <li>
                <a href="#">Natalizi</a>
                <ul>

                    <li><a href="#">Faraona</a></li>
                    <li><a href="#">Oca</a></li>
                    <li><a href="#">Cappone</a></li>
                    <li><a href="#">Pollo disossato ripieno</a></li>
                    <li><a href="#">Zampone</a></li>
                     <li><a href="#">Cotechino</a></li>
                    <li><a href="#">Stinco</a></li>
                    <li><a href="#">Anatra</a></li>
                    <li><a href="#">Fagiano</a></li>  
                     <li><a href="#">Tacchino MIDI </a></li>
                    <li><a href="#">Tacchino MINI </a></li>

                </ul>
            </li>

        </ul> 
```

CSS：

```
 .sf-menu, .sf-menu * {
    margin:         0;
    padding:        0;
    list-style:     none;
}
.sf-menu {
    line-height:    1.0;
}
.sf-menu ul {
    position:       absolute;
    top:            -999em;
    width:          10em; /* left offset of submenus need to match (see below) */

}
.sf-menu ul li {
    width:          100%;
}
.sf-menu li:hover {
    visibility:     inherit; /* fixes IE7 'sticky bug' */
}
.sf-menu li {
    float:          left;
    position:       relative;
}
.sf-menu a {
    display:        block;
    position:       relative;
}
.sf-menu li:hover ul,
.sf-menu li.sfHover ul {
    left:           0;
    top:            2.5em; /* match top ul list item height */
    z-index:        99;
}
ul.sf-menu li:hover li ul,
ul.sf-menu li.sfHover li ul {
    top:            -999em;
}
ul.sf-menu li li:hover ul,
ul.sf-menu li li.sfHover ul {
    left:           10em; /* match ul width */
    top:            0;
}
ul.sf-menu li li:hover li ul,
ul.sf-menu li li.sfHover li ul {
    top:            -999em;
}
ul.sf-menu li li li:hover ul,
ul.sf-menu li li li.sfHover ul {
    left:           10em; /* match ul width */
    top:            0;
}

/*** DEMO SKIN ***/
.sf-menu {
    float:          left;
    margin-bottom:  1em;
}
.sf-menu a {
    border-left:    1px solid #fff;
    border-top:     1px solid #CFDEFF;
    padding:        .75em 1em;
    text-decoration:none;
}
.sf-menu a, .sf-menu a:visited  { /* visited pseudo selector so IE6 applies text colour*/
    color:          #13a;
}
.sf-menu li {
    background:     #BDD2FF;
}
.sf-menu li li {
    background:     #AABDE6;
}
.sf-menu li li li {
    background:     #9AAEDB;
}
.sf-menu li:hover, .sf-menu li.sfHover,
.sf-menu a:focus, .sf-menu a:hover, .sf-menu a:active {
    background:     #CFDEFF;
    outline:        0;
}

/*** arrows **/
.sf-menu a.sf-with-ul {
    padding-right:  2.25em;
    min-width:      1px; /* trigger IE7 hasLayout so spans position accurately */
}
.sf-sub-indicator {
    position:       absolute;
    display:        block;
    right:          .75em;
    top:            1.05em; /* IE6 only */
    width:          10px;
    height:         10px;
    text-indent:    -999em;
    overflow:       hidden;
    background:     url('../images/arrows-ffffff.png') no-repeat -10px -100px; /* 8-bit indexed alpha png. IE6 gets solid image only */
}
a > .sf-sub-indicator {  /* give all except IE6 the correct values */
    top:            .8em;
    background-position: 0 -100px; /* use translucent arrow for modern browsers*/
}
/* apply hovers to modern browsers */
a:focus > .sf-sub-indicator,
a:hover > .sf-sub-indicator,
a:active > .sf-sub-indicator,
li:hover > a > .sf-sub-indicator,
li.sfHover > a > .sf-sub-indicator {
    background-position: -10px -100px; /* arrow hovers for modern browsers*/
}

/* point right for anchors in subs */
.sf-menu ul .sf-sub-indicator { background-position:  -10px 0; }
.sf-menu ul a > .sf-sub-indicator { background-position:  0 0; }
/* apply hovers to modern browsers */
.sf-menu ul a:focus > .sf-sub-indicator,
.sf-menu ul a:hover > .sf-sub-indicator,
.sf-menu ul a:active > .sf-sub-indicator,
.sf-menu ul li:hover > a > .sf-sub-indicator,
.sf-menu ul li.sfHover > a > .sf-sub-indicator {
    background-position: -10px 0; /* arrow hovers for modern browsers*/
} 
```

帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:20:57.373

`UL`在“Elaborati”下添加一个类。您可能需要稍微调整值以使其看起来像您想要的那样。如果你愿意，你可以把它弄得更宽。

然后使用：

```
ul.wide {
    width:300px;
}

ul.wide li  {
    display:inline-block;
    width:100px;
    height:90px;    
}

ul.wide a {
    height:90px; 
} 
```

# android - Android PreferenceFragment pre 3.0

> ID：13257621
> 
> 赞同：1
> 
> 时间：2012-11-06T19:03:35.817
> 
> 标签：android, android-preferences, preferenceactivity

我最近下载了 Android SDK 的最新更新，我意识到`addPreferencesFromResource(int resourceID)`,`findPreference(String preference)`和`getPreferenceScreen()`within`PreferenceActivity`已被贬值，有利于`PreferenceFragment`它的实现`addPreferencesFromResource(int resourceID)`

这很好，我能够重写我所有的偏好屏幕，以便能够使用`PreferenceFragment`4.x 设备的新标准。然而，问题是`PreferenceFragment`屏幕在 Android 2.3 或更早版本上不显示。打开首选项屏幕时，它实际上显示一个空白屏幕。所以现在我检查了设备正在使用哪个 SDK，`PreferenceFragment`如果设备是 3.0+，则显示，如果它是 3.0 之前的，则显示旧的折旧方式。

有一个更好的方法吗？`PreferenceFragment`如果有办法让代码在 2.2 和 2.3 中正常工作，我不想使用折旧代码。在 3.0 之前的设备中是否有一种新的标准方法可以在不使用折旧代码的情况下执行此操作？（我的应用程序是为 2.2+ 设计的，我想继续支持回到 2.2 以获得更大的用户群）

如果有人能指出我正确的方向，我可以从那里做腿部工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:10:03.253

不幸的是，[兼容性库](http://developer.android.com/tools/extras/support-library.html)（专为 API 4+ 设计）不支持 PreferenceFragment - 所以在您将目标 API 提高到 11 之前，您所拥有的可能是最好的解决方案。

# 3d - 在没有 OpenGL 的 C++ 中绘制 3D 球体

> ID：13257625
> 
> 赞同：0
> 
> 时间：2012-11-06T19:03:46.647
> 
> 标签：3d, geometry, raytracing

我需要在不使用 OpenGL 的情况下在 c/c++ 中制作一个球体光线追踪器。我对如何在没有任何 gl 功能的场景中放置球体或灯光感到困惑。有人可以解释一下如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:22:28.663

光线追踪与opengl无关。它可以用桌面计算器来完成。

关键是它是用向量完成的纯几何，本质上是三个浮点变量。（甚至整数）。

您将相机“放置”在原点：ox=0，oy=0，oz=0。

您将球体“放置”在 5“米”或朝向 z 轴的单位：sx=0,sy=0,sz=5;

您开始以 90 度视野向 z 轴投射光线：

```
for (i=-1;i<1; i+=0.01) {
   for (j=-1;j<1; j+=0.01) {
       dx=i; dy=j;dz=1;  // perhaps you then need to normalize the "vector" dx,dy,dz
       // check if the ray hits the sphere with radius 2.3 (located at 0,0,5)

       // if it does, calculate the angle of the normal of the hit point and
       // the light source at position lx=1,ly=-0.5;lz=-2.33;

       // if normal dot lightray is positive, calculate angle, apply Phong model

       // add lambertian model, distance attenuation, fog, texturemapping

  }
 } 
```

最后，您计算了 ~200 x 200 图像的像素强度或颜色值。此示例使用 90 度 FoV。

# c - 支持边标签的图形库

> ID：13257626
> 
> 赞同：1
> 
> 时间：2012-11-06T19:03:53.690
> 
> 标签：c, perl, graph

今天早上我偶然发现了[Perl 的图形库。](http://search.cpan.org/~jhi/Graph-0.94/lib/Graph.pod)我曾经编写一个快速程序来查找有向图中的所有（弱）连接组件。这是程序。

```
use strict;
use Graph;
use Data::Dumper;

my $g = Graph->new();
foreach my $file(@ARGV)
{
  open(my $IN, "<", $file) or die("cannot open '$file'");
  while(my $line = <$IN>)
  {
    chomp($line);
    my($source, $target, $edge_label) = split(/\t/, $line);
    $g->add_edge($source, $target);
  }
  close($IN);
}

my @clusters = $g->weakly_connected_components();
print Dumper(\@clusters); 
```

...输入数据文件看起来像这样。

```
n1  n2  some_data_encoded_in_a_label
n1  n3  some_data_encoded_in_a_label
n4  n5  some_data_encoded_in_a_label
... 
```

...其中第一列是源节点标签，第二列是目标节点标签，第三列是边缘标签。我有几个数据文件，每个文件都有数万条边。

这个 quick-n-dirty 脚本完成了工作，但有一些东西本来很好。

*   **weakly_connected_components**方法返回的连接组件只是节点标签的数组，因此这些节点之间的连接丢失了。
*   即使该方法返回一组节点*和*一组边，该库也不允许存储与每条边相关的标签或数据，这是不方便的。

是否有任何替代图形库包含这些功能中的一个或两个？实现的语言不是很重要——我对 C/C++、Python、Perl、R 等开放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:11:40.740

改变

```
 $g->add_edge($source, $target); 
```

到（每条边零个或一个标签）

```
 $g->add_edge($source, $target);
 $labels{$source}{$target} = $edge_label; 
```

或（每条边任意数量的标签）

```
 $g->add_edge($source, $target);
 push @{ $labels{$source}{$target} }, $edge_label; 
```

只需在需要时查找标签。

（对于无向图，每个标签添加两次，一次用于源->目标，一次用于目标->源。）

# mysql - 基于返回多行的子查询更新值

> ID：13257629
> 
> 赞同：2
> 
> 时间：2012-11-06T19:04:14.480
> 
> 标签：mysql, sql

我有这个可能很简单的 SQL 问题。

```
UPDATE parts
SET partscnt=partscnt-1
WHERE idparts = (SELECT idparts FROM ordercontent WHERE idOrder=4); 
```

问题是子查询返回 5 个值，我希望对每个值进行更新。

更新： ordercontent 表有一个订单 ID 和一个行 idparts。如果几个相同的部分连接到相同的顺序，则表格如下所示：

```
ID idparts
4  147
4  147
4  147
4  55
4  33 
```

所以我需要将 id 为 147 的零件的零件数减少三倍。

如何更改此查询以实现此目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:05:21.563

试试这个：

```
UPDATE parts 
SET partscnt = partscnt-1 
WHERE idparts IN (
    SELECT idparts 
    FROM ordercontent 
    WHERE idOrder = 4
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:34:47.623

求指定订单的每件数量`idparts`：`ordercontent`

```
SELECT idparts,
       COUNT(*) AS cnt
FROM ordercontent
WHERE idOrder = 4
GROUP BY idparts 
```

将上述结果加入`parts`并使用这些`cnt`值进行更新`partscnt`：

```
UPDATE parts p
INNER JOIN (
    SELECT idparts,
           COUNT(*) AS cnt
    FROM ordercontent
    WHERE idOrder = 4
    GROUP BY idparts
) o
ON p.idparts = o.idparts
SET p.partscnt = p.partscnt - o.cnt
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:05:54.337

将“=”替换为 IN：

> 更新部分 SET partscnt=partscnt-1 WHERE idparts **IN** (SELECT idparts FROM ordercontent WHERE idOrder=4);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:06:53.087

```
UPDATE parts 
SET partscnt=partscnt-1 
WHERE idparts IN
    (SELECT idparts FROM ordercontent WHERE idOrder=4); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T19:07:02.120

```
UPDATE parts p1
INNER JOIN 
(
   SELECT *  
   FROM ordercontent WHERE idOrder = 4
) p2 ON p1.idparts = p2.idparts
SET p1.partscnt = p2.partscnt-1 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-06T19:09:01.120

将“-1”替换为“(SELECT COUNT(*) FROM ordercontent WHERE isOrder = 4)”

# sql - Oracle 11g：如何将 oracle 表与自身联合？

> ID：13257632
> 
> 赞同：3
> 
> 时间：2012-11-06T19:04:31.033
> 
> 标签：sql, oracle, plsql, oracle11g

我有一个如下所示的表：

```
date          code                name    score         set
09/09/12     967873         Team A         24            1
09/09/12     967873         Team B         22            1
09/09/12     967873         Team A         21            2 
09/09/12     967873         Team B         16            2
02/04/12     965454         Team X         21            1
02/04/12     965454         Team Y         19            1
02/04/12     965454         Team X         21            2
02/04/12     965454         Team Y         19            2 
```

你猜对了！这是一场排球比赛！但是，我希望我的输出在一行中。例如：

```
date           code               Teams                 Set-1    Set-2     Set-3
09/09/12      967873             Team A VS.Team B       24-22    21-16       -
and so on.... 
```

`**Notice that the game could have a third set as well`

我需要某种自我加入来将上述格式改进为更便于用户查看的格式...如果您需要更多详细信息，请告诉我。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T19:21:16.570

查询可能如下所示：

```
with matches as (
   select "DATE", code, name,
      max(case when "SET" = 1 then score end) score_1,
      max(case when "SET" = 2 then score end) score_2,
      max(case when "SET" = 3 then score end) score_3,
      row_number() over(partition by "DATE", code order by name) team_no
    from games
    group by "DATE", code, name
)
select a."DATE", a.code, a.name || ' vs. ' || b.name teams,
  a.score_1 || '-' || b.score_1 set_1,
  a.score_2 || '-' || b.score_2 set_2,
  a.score_3 || '-' || b.score_3 set_3
from matches a
join matches b on a."DATE" = b."DATE" and a.code = b.code
where a.team_no = 1 and b.team_no = 2; 
```

*date*和*set*是相当不幸的列名。

查询分 3 个步骤进行：

1.  这些记录被聚合起来，为每支球队和每场比赛创建一行。在该过程中，分数被分配给三个列 set_1、set_2、set_3 之一。
2.  行号分配给每一行，从 1 开始为每个匹配。结果是一个团队被分配了 1，而另一个团队被分配了 2（列 team_no）。
3.  结果表连接到自身，左侧为没有的团队。1 和右侧的团队没有。2 使用匹配（日期和代码）作为连接条件。结果是每场比赛一排，两支球队的名字和得分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:22:35.510

首先，按团队和分数对数据`"date", code, "set"`进行分组。`LISTAGG`然后在分数列上旋转结果。这是它的SQL：

```
WITH grouped AS (
  SELECT
    "date", code, "set",
    LISTAGG(name,  ' VS. ') WITHIN GROUP (ORDER BY name) AS teams,
    LISTAGG(score, '-'    ) WITHIN GROUP (ORDER BY name) AS score
  FROM matches
  GROUP BY
    "date", code, "set"
)
,    pivoted AS (
  SELECT
    "date", code, teams,
    nvl("1", '-') AS set1,
    nvl("2", '-') AS set2,
    nvl("3", '-') AS set3
  FROM grouped
  PIVOT (
    MAX(score) FOR "set" IN (1, 2, 3)
  ) p
)
SELECT * FROM pivoted
; 
```

[请在 SQL Fiddle 上](http://sqlfiddle.com/#!4/6b101/1)查看此查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:26:15.563

如果表的名称是 VOLLEYBALL，我会这样做 sg：

```
SELECT temp.date, temp.code, 
    temp.team1 || ' vs. ' || temp.team2 AS teams, 
    (SELECT v.score FROM volleyball v WHERE v.code = temp.code AND v.name = team1 AND v.set = 1) || '-' || 
        (SELECT v.score FROM volleyball v WHERE v.code = temp.code AND v.name = team2 AND v.set = 1) AS set1, 
    (SELECT v.score FROM volleyball v WHERE v.code = temp.code AND v.name = team1 AND v.set = 2) || '-' || 
        (SELECT v.score FROM volleyball v WHERE v.code = temp.code AND v.name = team2 AND v.set = 2) AS set2, 
    nvl((SELECT v.score FROM volleyball v WHERE v.code = temp.code AND v.name = team1 AND v.set = 3) || '-' || 
        (SELECT v.score FROM volleyball v WHERE v.code = temp.code AND v.name = team2 AND v.set = 3)
        , '-') AS set3 -- optional, if no results, then it will be a '-' 
FROM
    (SELECT v.date, v.code, 
        min(v.name) AS team1,  max(v.name) AS team2 
    FROM volleyball v 
    GROUP BY v.date, v.code) temp; 
```

这将产生一个单行摘要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T20:11:53.577

要在不需要连接的情况下返回所需的结果，请尝试：

```
select "date", 
       code, 
       min_name || ' VS. ' || max_name teams,
       sum(case when "set" = 1 and name = min_name then score end) || '-' || 
          sum(case when "set" = 1 and name = max_name then score end) "Set-1",
       sum(case when "set" = 2 and name = min_name then score end) || '-' || 
          sum(case when "set" = 2 and name = max_name then score end) "Set-2",
       sum(case when "set" = 3 and name = min_name then score end) || '-' || 
          sum(case when "set" = 3 and name = max_name then score end) "Set-3"
from (select g.*,
             min(name) over (partition by "date", code) min_name,
             max(name) over (partition by "date", code) max_name
      from games)
group by "date", code 
```

# c# - 使用 C# 从文件中读取 XML 文件

> ID：13257642
> 
> 赞同：1
> 
> 时间：2012-11-06T19:05:06.913
> 
> 标签：c#, xml, windows-phone-7.1

我有一个具有这种结构的 xml 文件。节点“设置”仅重复 1 次。节点“提醒”可以出现+1次。

```
<?xml version="1.0" encoding="utf-8"?>
<!--Name App-->
<AllSettings>
  <Settings>
    <tax1>21</tax1>
    <tax2>0</tax2>    
  </Settings>
  <Reminders>
    <Name>s8</Name>
    <Title>xxxxx</Title>
    <Content>xxxxxxxxx</Content>
    <BeginTime>09/11/2012 10:00:00</BeginTime>
  </Reminders>
  <Reminders>
    <Name>s2</Name>
    <Title>zzzzzzzzz</Title>
    <Content>zzzzzzzzzzz</Content>
    <BeginTime>07/11/2012 13:00:00</BeginTime>    
  </Reminders>  
</AllSettings> 
```

我可以使用底部代码读取“设置”节点中的数据。但是我如何从每个节点“提醒”中读取数据呢？

```
IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile(myXmlFile, FileMode.Open);
isoFileStream.Position = 0;
XmlReader xmlReader;
xmlReader = XmlReader.Create(isoFileStream);                                           
xmlReader.MoveToContent(); 

while (xmlReader.Read())
{    

  if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.LocalName == "Settings"
  {
     while (xmlReader.NodeType != XmlNodeType.EndElement)
     {
          xmlReader.Read();

          if (xmlReader.Name == "tax1")
          {
                _tax1 = xmlReader.ReadElementContentAsString();
          }
          else if (xmlReader.Name == "tax2")
          {
                _tax2 = xmlReader.ReadElementContentAsString();
          }

      } // end while
  } 
  else if (xmlReader.NodeType == XmlNodeType.Element && xmlReader.LocalName == "Reminders")
  {
       // ????            
  }

} // end while 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:15:00.643

使用 Linq2Xml 更容易

```
var xDoc = XDocument.Load(filename);
var reminders = xDoc.Descendants("Reminders")
                    .Select(r => new
                    {
                        Name = (string)r.Element("Name"),
                        Title = (string)r.Element("Title"),
                        Content = (string)r.Element("Content"),
                        BeginTime = (DateTime)r.Element("BeginTime"),
                    })
                    .ToList();

var firstTitle = reminders[0].Title; 
```

或者

```
var remDicts = xDoc.Descendants("Reminders")
       .Select(r => r.Elements().ToDictionary(e => e.Name.LocalName, e => e.Value))
       .ToList();

var firstTitle = remDicts[0]["Title"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:35:34.277

`XDocument`使用 LINQ to XML 将其加载到和查询中。

```
var isoFileStream = myIsolatedStorage.OpenFile(myXmlFile, FileMode.Open);
isoFileStream.Position = 0;

var xdoc = XDocument.Load(isoFileStream);
var reminderNodes = from n in xdoc.Descendants("Reminders") select n;

foreach (var n in reminderNodes)
{
    ProcessReminder(n);
}

void ProcessReminder(XElement node)
{
    // do something... for now I'll just output to console.
    Console.WriteLine("Name: {0}", n.Element("Name").Value); 
    Console.WriteLine("Title: {0}", n.Element("Title").Value);
    Console.WriteLine("BeginTime: {0}", n.Element("BeginTime").Value);
    Console.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:10:06.170

我建议使用 XmlNode.Value 而不是从 XmlReader 获取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:12:29.967

我建议使用 xsd.exe 工具从 XM 生成 .XSD 和从 .XSD 生成 C# 类，然后使用 LINQ 语法进行查询。

[这可能会有所帮助](http://sharpertutorials.com/using-xsd-tool-to-generate-classes-from-xml/)或[此搜索](https://www.google.ro/#hl=ro&gs_nf=3&tok=wnG-sYLw0RJvqnK-VHCzqg&cp=30&gs_id=3h&xhr=t&q=how+to+generate+class+from+xml+in+c#&pf=p&output=search&sclient=psy-ab&oq=how+to+generate+class+from+xml&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=49e81df317ab57ce&bpcl=37189454&biw=1680&bih=935)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T19:14:54.000

您可以使用 XmlDocument 而不是 XmlReader

# iphone - 导航栏为零

> ID：13257644
> 
> 赞同：0
> 
> 时间：2012-11-06T19:05:10.547
> 
> 标签：iphone, uinavigationbar

我用 IB 设置了一个导航栏。在我的 .h 文件中，我设置了属性并将其与导航栏连接起来。

我还有一个以编程方式添加的滚动视图。我还将导航栏添加到滚动视图。

当我运行程序时，它说导航栏为零。

这可能是什么原因？

我在我的 mainView 中设置了一个带有导航控制器的导航栏。那里一切都很好。我可以看到导航栏。比我想从主视图切换到另一个视图。

```
 stg = [[SubtaskGenerator alloc]init];
    stg.subtaskObjectArray = array;
    [stg setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self presentModalViewController:stg animated:YES]; 
```

在 SubtaskGenerator.xib 我还添加了一个导航栏并将其连接到 SubtaskGenerator.h 中的属性但是这个 Navigationbar 是 nil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:32:40.540

我想到了。我只用过

```
stg = [[SubtaskGenerator alloc]init]; 
```

但是要查看导航栏，我必须使用

```
stg = [[SubtaskGenerator alloc]initWithNibName:@"SubtaskView" bundle:nil]; 
```

# java - Gradle：多项目和构建 WAR 文件

> ID：13257647
> 
> 赞同：0
> 
> 时间：2012-11-06T19:05:16.850
> 
> 标签：java, gwt, gradle

我正在更改我们的项目以使用 gradle 作为构建工具，但我正在努力解决两个问题；

上下文：它是一个多项目的gradle配置

```
:project-root
------:client //GWT Java Files & GWT Centric resources, e.g. CSS, Images, ui-xml etc..
------:server //Server based logic, e.g. controllers, services, repositories etc.
------:web-app//NON GWT resources for the web-app, e.g. , web.xml, static pages, images 
```

1：为了让`gwtCompile`任务在 中运行`:client build.gradle`，我将其添加为对 war 任务的依赖，如下所示：

```
war{
    dependsOn ':client:compileGwt'
    from {'src/main/root-content'}
    webInf {from 'src/main/web-inf-content'}
} 
```

我不喜欢这样，是否有更简单的方法来执行此操作，以便在项目中的任务完成`gwtCompile`时调用任务，以便 GWT 编译器可以访问生成的字节码？通过简单地放入:web-app 依赖项调用而不是任务（正如我所期望的那样）..`javaCompile``:client``compile project(':client')``javaCompile``gwtCompile`

2：我努力从项目中获取 GWT JavaScript 输出`:client`并将这些文件复制到 war 文件中。我在属性中需要以下内容`from`：

```
war{
    from {'src/main/root-content','$:CLIENT/gwt-compiler-js-output-dir-as-declared-in-client-build-file}
    webInf {from 'src/main/web-inf-content'}
} 
```

提前谢谢了，

伊恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:23:16.077

您可以手动声明自己的任务依赖项，前提是您没有引入依赖项问题。:) 你试过做这样的事情吗？

```
javaCompile.dependsOn(project(':yourproject').taskName) 
```

希望有帮助！

# python - Python中的字典帮助

> ID：13257660
> 
> 赞同：0
> 
> 时间：2012-11-06T19:05:59.547
> 
> 标签：python, dictionary

假设有人正在制作一个等级系统，他们有一本字典，其中每个等级字母作为值，百分比作为键。如果说，您的密钥为 75%，并且您希望它打印“C”，那么您将如何选择一个值，但是如果您输入 74% 或 79%，它仍然会打印“C”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:08:25.843

我会使用类似的东西：

```
d = {10:'A', 9:'A', 8:'B', 7:'C', 6:'D', 5:'F', 4:'F', 3:'F', 2:'F', 1:'F', 0:'F'}
print d[int(95.0/10)]  #same as `d[95//10]`. 
```

如果你不喜欢所有的输入，你可以将你的 dict 初始化为：

```
d = dict(zip(range(10,-1,-1),'AABCDFFFFFF')) 
```

您的建议的问题是您最终可能会使用浮点数作为键，并且由于浮点运算的缺点，很难将它们用作字典键。这会将浮点数映射到整数，然后将这些整数用作字典中的键，这样更简洁。

* * *

如果你愿意，你甚至可以更聪明一点：

```
class GradeBook(dict):
    def __getitem__(self,key):
        return dict.__getitem__(self,key//10)

    def __missing__(self,key):
        if key > 9:
            return 'A'
        elif key < 5:
            return 'F'

d = GradeBook(zip(range(5,10),'FDCBA'))
print d[100]
print d[45]
print d[120]
print d[45.2]
print d[72.8] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T19:09:48.337

利文斯顿医生，我猜。

不，但实际上，这不是字典的工作方式。字典将值映射到键。您正在寻找的是一个将值转换为字母的函数。

```
def grade_value(grade):
    if grade == 100:
        return "A is for Awesome!"
    if grade > 50:
        return "F is for FAILURE!!!" 
```

好的，所以这不是一个实际的例子。但是，我希望你能适应它，让它适合你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:22:37.917

我会使用 numpy 并定义垃圾箱。数据分箱是一个常见问题。

```
import numpy as NP                                                              
grades = NP.random.randint(0, 100, 30)                                          

bins = NP.array([0., 20., 40., 60., 80., 100.])                                 

# d is an index array holding the bin id for each point in A                    
d = NP.digitize(grades, bins)                                                   
cat = ['A','B','C','D','E']                                                     
g = [cat[i-1] for i in d]                                                       

print grades,'\n'                                                               
print bins,'\n'                                                                 
print g,'\n'                                                                    

'''                                                                             
output                                                                          

[80 75 65  2 41 79 49 64 68 18 88  0 60 90 79 96 42  0 43  8  7 36 96 22 96     
 18 17 80 54 34]                                                                

[   0\.   20\.   40\.   60\.   80\.  100.]                                           

['E', 'D', 'D', 'A', 'C', 'D', 'C', 'D', 'D', 'A', 'E', 'A', 'D', 'E', 'D', 'E'\
, 'C', 'A', 'C', 'A', 'A', 'B', 'E', 'B', 'E', 'A', 'A', 'E', 'C', 'B']         
''' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T19:34:03.160

我建议使用包含`grade, score`-pairs 的元组列表，因为这将允许您自由指定百分比分数如何映射到成绩：

```
grades = [
    ('A', 90),
    ('B', 80),
    ('C', 70),
    ('D', 60),
    ('F', None)
]

def get_grade(score):
    return [grade for grade, grade_score in grades if score>=grade_score][0] 
```

用法：

```
print get_grade(45) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T19:11:22.783

```
grades = {60: 'F', 70: 'D', 80: 'C', 90: 'B', 100: 'A'}

def get_grade(percent):
    for k in sorted(grades):
        if k >= percent:
            return grades[k]

if __name__ == '__main__':
    print get_grade(50)
    print get_grade(60)
    print get_grade(71)
    print get_grade(97) 
```

在这种情况下，等级将对应于大于或等于百分比的最低键。

# mysql - 使用 PHPMyAdmin 在 Mysql 数据库中创建多表的问题

> ID：13257661
> 
> 赞同：1
> 
> 时间：2012-11-06T19:06:10.000
> 
> 标签：mysql, phpmyadmin

您能否告诉我是否可以通过 PHPMYADMIN 中的 SQL 命令在 mysql 数据库中创建多个表？我已经尝试过这个命令

```
CREATE TABLE one (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME), 
CREATE TABLE two (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME),
CREATE TABLE three (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME); 
```

和

```
CREATE TABLE one (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME); 
CREATE TABLE two (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME);
CREATE TABLE three (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME); 
```

但我遇到语法错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:13:15.777

试试这个：

```
DROP TABLE IF EXISTS one;
CREATE TABLE one (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME); 
DROP TABLE IF EXISTS two;
CREATE TABLE two (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME);
DROP TABLE IF EXISTS three;
CREATE TABLE three (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME); 
```

# jquery - jquery 滑块在 IE 中不起作用，在 chrome、firefox 中起作用

> ID：13257673
> 
> 赞同：0
> 
> 时间：2012-11-06T19:07:26.503
> 
> 标签：jquery, internet-explorer, firefox, google-chrome, slider

我的滑块有问题，它在 Internet Explorer 中不起作用，我在 IE 7 和 8 中进行了测试，但我看不到它，请帮助这是我的代码

```
<script type="text/javascript">
             $(document).ready(function() {
                var currentPosition = 0;
                var slideWidth = 200;
                var slides = $('.slider_move2');
                var numberOfSlides = slides.length;
                var slideShowInterval;
                var speed = 3000;

                slideShowInterval = setInterval(changePosition, speed);                 
                slides.wrapAll('<div id="slidesHolder2"></div>')                    
                slides.css({ 'float' : 'left' });                   
                $('#slidesHolder2').css('width', slideWidth * numberOfSlides);                  

                  function changePosition() {
                        if (currentPosition > 0) {
                            $('#slidesHolder2').css('marginLeft',0)
                                .children().first().appendTo('#slidesHolder2');
                        } else {
                            currentPosition += 1;
                        }
                        moveSlide();
                    }

                function moveSlide() {
                    $('#slidesHolder2').animate({
                        'marginLeft': slideWidth * (-currentPosition)
                    });
                }

        }); 
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:42:58.823

这是我在 IE7 中发现的错误：

```
imgWrap.animate({
    top: '0px',
    left: '135px',
    width: '700px',
    height: '400px', //<--- Remove the comma
}, sotiData.speedImg, function(){
    imgWrap.attr('onclick',  "sotBigImageHide('" + topW2 + "', '" + leftW2 + "')");
}); 
```

请让我知道它是否解决了您的问题。

# python - 使用Python&Beautiful Soup，能否得到一个是否设置了背景属性过滤的标签列表？

> ID：13257674
> 
> 赞同：2
> 
> 时间：2012-11-06T19:07:28.250
> 
> 标签：python, html-parsing, beautifulsoup

我想从设置了背景属性的 html 文档中获取标签列表。

例如：

```
html="<div>
    <div></div>
    <table background=\"anything\">
    </table>
</div>"

soup = BeautifulSoup(html)
result = soup.findall(??) 
```

在这种情况下，我希望表格标签出现在列表中。请注意，“任何东西”的值可以是……任何东西。理想情况下，我想根据正则表达式过滤背景属性的值。

我的问题是：我可以使用 Beautiful Soup 来获取根据背景属性的值是否设置过滤的列表吗？更好的是，我可以一步基于应用于属性的正则表达式进行过滤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:13:18.270

根据[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-function)：

```
def has_background_attribute(tag):
    return tag.has_key('background')

soup.find_all(has_background_attribute) 
```

也解决您的第二个问题的更好选择是（[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#the-keyword-arguments)）：

```
soup.find_all(background = re.compile("your_regex")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:15:18.977

```
import re
result = soup.findAll("", {"background": re.compile("")}) 
```

这也回答了您的第二个问题，因为您可以在`re.compile`语句中放置任何正则表达式。

# android - 我如何使用不同的 xml 文件之类的选项卡？

> ID：13257678
> 
> 赞同：0
> 
> 时间：2012-11-06T19:07:40.887
> 
> 标签：android, eclipse, tabs

我有这个代码

```
package com.example.simgreinirtabs;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
        tabHost.setup();

        TabSpec spec1=tabHost.newTabSpec("Sími");
        spec1.setContent(R.id.Sími);
        spec1.setIndicator("Sími");

        TabSpec spec2=tabHost.newTabSpec("Sms");
        spec2.setIndicator("Sms");
        spec2.setContent(R.id.Sms);

        TabSpec spec3=tabHost.newTabSpec("Net");
        spec3.setIndicator("Net");
        spec3.setContent(R.id.Net);

        TabSpec spec4=tabHost.newTabSpec("Greina");
        spec4.setIndicator("Greina");
        spec4.setContent(R.id.Greina);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3);
        tabHost.addTab(spec4);
        tabHost.getTabWidget().getChildAt(0).getLayoutParams().height =40;

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

使用这个 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabHost"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TabWidget
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@android:id/tabs"
    />

     <FrameLayout
         android:id="@android:id/tabcontent"
         android:layout_width="fill_parent"
         android:layout_height="match_parent" >

     <LinearLayout
         android:id="@+id/Sími"
         android:layout_width="fill_parent"
         android:layout_height="340dp"
         android:orientation="vertical"
         android:paddingTop="60px" >
     </LinearLayout>

     <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Sms"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>

      <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Net"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>

     <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Greina"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>
     </FrameLayout>

    </TabHost> 
```

我如何使用每个选项卡，就像它是不同的 xml 文件一样。我有 4 个选项卡，我想像我有 4 个 xml 文件一样使用它们。那可能吗 ？我可以用另一种方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:12:06.743

你应该使用`<include>`标签。

即*layout.xml*：

```
 <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/bScan"
        android:layout_below="@+android:id/tabs" >

        <include
            android:id="@+id/login_tab"
            layout="@layout/login" />

        <include
            android:id="@+id/user_tab"
            layout="@layout/user" />

        <include
            android:id="@+id/rabate_tab"
            layout="@layout/rabate" />

        <include
            android:id="@+id/rules_tab"
            layout="@layout/rules" />

    </FrameLayout> 
```

活动：

```
 Context ctx = this.getApplicationContext();

    TabSpec tabLogin = mTabHost.newTabSpec("login");
    tabLogin.setIndicator("login");  
    tabLogin.setContent(R.id.login_tab);

    TabSpec tabUser = mTabHost.newTabSpec("user");
    tabUser.setIndicator("user");  
    tabUser.setContent(R.id.user_tab);

    TabSpec tabRabate = mTabHost.newTabSpec("rabate");
    tabRabate.setIndicator("rabate");  
    tabRabate.setContent(R.id.rabate_tab); 
```

# c++ - GCC 错误与否：默认 std::function？

> ID：13257679
> 
> 赞同：7
> 
> 时间：2012-11-06T19:07:42.183
> 
> 标签：c++, compiler-construction, c++11, lambda, std-function

如何将默认函数指定为类成员的参数？

从我的代码派生的当前示例是：

```
#include <iostream>
#include <functional>

template<typename T> struct C
{
    static T test(std::function<T(int)> f = [](int i){return i;})
    {return f(42);}
};

int main(int argc, char* argv[])
{
    C<int>::test(); // ERROR = internal compiler error : in tsubst_copy, at cp/pt.c:11354
    C<int>::test([](int i){return i;}); // OK
    return 0;
} 
```

它是 GCC 的错误吗？

是否可以使用另一种语法来避免这个问题？

你能在其他 C++11 编译器上试试吗（对于有编译器的人）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T19:18:36.677

毫无疑问，这是一个编译器错误。无论您的程序是否格式正确，编译器都会检测到其自身数据结构中的不一致。

请遵循 GCC 错误报告说明： http: [//gcc.gnu.org/bugs/#report](http://gcc.gnu.org/bugs/#report)

# python - 创建和填充表缓慢且不稳定

> ID：13257682
> 
> 赞同：0
> 
> 时间：2012-11-06T19:07:46.550
> 
> 标签：python, postgresql, psycopg2

当`csv_copy`用于创建/填充表时，我注意到它有时非常慢。以下是核心代码和一些示例输出。

我有两个问题：

1.  我无法弄清楚为什么创建和填充表格的时间会有所不同。
2.  我不确定是什么原因导致打印“无”。

代码：

```
def create_populate_table(table_name,fields,types,cur):
    sql = 'CREATE TABLE IF NOT EXISTS ' + table_name + ' (\n'
    for i in xrange(len(fields)):
        if i==0:
            sql += fields[i]+' '+types[i]+' NOT NULL PRIMARY KEY,\n'
        elif i==len(fields)-1:
            sql += fields[i]+' '+types[i]+')'
        else:
            sql += fields[i]+' '+types[i]+',\n'
    #print sql
    cur.execute(sql)
    conn.commit()
    print "Table ",table_name," created ",timer()

    cur.execute("SELECT count(*) from "+table_name)
    if cur.fetchone()[0]>0:
        return
    # populate data into created table
    fr= open(file, 'r')
    fr.readline()
    # parse and convert data into unicode
    #data = unicode_csv_reader(fr, delimiter='|')
    # anything can be used as a file if it has .read() and .readline() methods
    data = StringIO.StringIO()
    s=''.join(fr.readlines())
    while(s.find('\r\n')<>-1):
        s=s.replace('\r\n','\n')
    #timer()
    while(s.find('||')<>-1 or s.find('|\n')<>-1 ):
        s=s.replace('||','|0|')
        s=s.replace('|\n','|0\n')
    #timer()
    #print s.split('\t')[:2]
    #exit(0)
    data.write(s)
    data.seek(0)
    try:
        cur.copy_from(data, table_name,sep='|')
        conn.commit()
        print "Table ",table_name," populated ",timer()
    except psycopg2.DatabaseError, e:
        if conn:
            conn.rollback()
        print 'Error %s' % e    
    fr.close() 
```

我看到的输出：

> ME_Features_20121001.txt 表 ME_Features_20121001 创建 1.44 秒 无 表 ME_Features_20121001 填充 1.48 秒 无
> 
> FM_Features_20121001.txt 表 FM_Features_20121001 创建 67.92 秒 无 表 FM_Features_20121001 填充 0.22 秒 无
> 
> NationalFile_20121001.txt (700mb) 表 NationalFile_20121001 创建 9.34 秒 无 表 NationalFile_20121001 填充 4963.18 秒 无
> 
> NJ_Features_20121001.txt 表 NJ_Features_20121001 创建 1.65 秒 无 表 NJ_Features_20121001 填充 41.11 秒 无
> 
> PW_Features_20121001.txt 表 PW_Features_20121001 创建 1.73 秒 无 表 PW_Features_20121001 填充 0.20 秒 无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:25:39.913

如何`timer()`定义？我的盲目猜测（因为您没有提供其代码）是此函数`print`直接调用以输出测量的时间，但没有显式返回任何内容 - 因此`None`被打印。如果仍然不清楚，请看下面的示例：

```
>>> def test():
...     print 'test'
... 
>>> print 'This is a', test()
This is a test
None 
```

我不确定您所说*的创建和填充表的时间不同*是什么意思。显然，填充表所需的时间取决于要插入的数据量。在每种情况下，创建表所需的时间应该或多或少相同，因此`67.92s`输出看起来确实很可疑，但是......你确定它的测量正确吗？

同样，我的盲目猜测是`timer()`打印自上次通话以来的时间。也许您应该在开始您要测量的操作之前明确重置它？我猜那 60 秒是在打电话之前用的`create_populate_table()`……

# javascript - Javascript getElementById？

> ID：13257696
> 
> 赞同：0
> 
> 时间：2012-11-06T19:08:47.467
> 
> 标签：javascript, options, getelementbyid

我正在尝试查找 `document.getElementById.??? 的可能选项列表。有谁知道我在哪里可以找到可以给我所有可能选项的列表？

我已经无数次地搜索了谷歌。我只想知道getelementbyid之后的所有选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:14:40.877

对于这些问题，特别是如果您是 JavaScript 新手，我建议您查看 [Mozilla Developers Network。](https://developer.mozilla.org/en-US/docs/JavaScript)

在这种情况下，可以在[此处](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)找到您在 MDN 上需要的信息。这是您会发现的内容的预览（直接取自 MDN）：

> ## 概括
> 
> 通过其 ID 返回对元素的引用。
> 
> ## 句法
> 
> element = document.getElementById(id);
> 
> 在哪里
> 
> *   **element**是对 Element 对象的引用，如果具有指定 ID 的元素不在文档中，则为 null。
> *   **id**是一个区分大小写的字符串，表示正在查找的元素的唯一 ID。
> 
> ## 例子

```
<!DOCTYPE html>
<html>
<head>
  <title>getElementById example</title>
  <script>
  function changeColor(newColor) {
    var elem = document.getElementById("para1");
    elem.style.color = newColor;
  }
  </script>
</head>
<body>
  <p id="para1">Some text here</p>
  <button onclick="changeColor('blue');">blue</button>
  <button onclick="changeColor('red');">red</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:15:06.263

该`getElementById`方法只接受一个字符串参数。如果找到元素，则返回单个节点，否则返回 null。

# mysql - 如何使时间戳不显示时间

> ID：13257697
> 
> 赞同：0
> 
> 时间：2012-11-06T19:08:48.153
> 
> 标签：mysql, database

有没有办法简单地将字段属性更改为不显示时间？我希望它只显示日期。

我的字段名称是“日期”。我正在使用mysql。它是 type `TIMESTAMP`，默认为当前时间戳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:10:31.130

使用`DATE`列的类型，而不是`TIMESTAMP`在`NOW()`执行`INSERT`.

`DATE`还有更多关于,`DATETIME`和之间的区别：http `TIMESTAMP`: [//dev.mysql.com/doc/refman/5.0/en/datetime.html](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:10:32.473

只需将日期时间转换为日期即可。

`CONVERT(date, YourDateTime)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:10:50.610

为什么不更改架构以将该列转换为`DATE`列呢？

另请注意，使用[保留关键字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)（如*DATE*）作为列名通常是错误的形式。

# mysql - 从具有 2 级子级的一张表中计算总行数

> ID：13257698
> 
> 赞同：1
> 
> 时间：2012-11-06T19:08:52.057
> 
> 标签：mysql, sql

我有一张“画廊”表和一张“图片”表。画廊表是这样的。

```
gal_id|name 
```

和图像就像

```
img_id|gal_id|name 
```

现在我说 20 个画廊，我想显示每个画廊中的图像总数，所以我想使用一个查询来返回每个画廊中包含总图像的数组，如下所示

```
Gallery A (Total Images : 23)
Gallery B (Total Images : 33)
Gallery C (Total Images : 523)
Gallery D (Total Images : 25) 
```

执行此操作的最佳方法是什么，我不想将查询置于循环中，它将负载加载到服务器上，请告知..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:10:56.907

`COUNT`像`GROUP BY`这样使用：

```
SELECT g.name 'Gallery Name', COUNT(i.img_id) 'Total Images'
FROM galleries g
INNER JOIN images i ON g.gal_id = i.gal_id
GROUP BY g.name 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/9d53f/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:11:38.370

这是按画廊分组的基本[聚合`COUNT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)`name`。

重要的是，这必须使用 a**`LEFT JOIN`**来确保没有图像的画廊返回零计数，而不是根本不返回任何行。

```
SELECT
  galleries.name,
  COUNT(images.img_id) AS total_images
FROM 
  galleries
  /* LEFT JOIN will ensure empty galleries are listed */
  LEFT JOIN images  ON galleries.gal_id = images.gal_id
GROUP BY galleries.name
/* Sort by descending total_images */
ORDER BY total_images DESC 
```

### 评论后更新

```
SELECT
  galleries.name,
  COUNT(images.img_id) AS total_images,
  /* Differentiate between downloadable/not downloadable with a SUM(CASE) */
  /* It converts each into a zero or one and then sums up the values */
  SUM(CASE WHEN downloadable = 'Y' THEN 1 ELSE 0 END) AS downloadable,
  SUM(CASE WHEN downloadable = 'N' THEN 1 ELSE 0 END) AS not_downloadable
FROM 
  galleries
  /* LEFT JOIN will ensure empty galleries are listed */
  LEFT JOIN images  ON galleries.gal_id = images.gal_id
GROUP BY galleries.name
/* Sort by descending total_images */
ORDER BY total_images DESC 
```

# wordpress - wordpress rss feed - 获取一个类别的所有条目

> ID：13257702
> 
> 赞同：0
> 
> 时间：2012-11-06T19:09:02.290
> 
> 标签：wordpress, rss

我知道如何从 wp 中的类别中检索 rss 提要，即`/feed`在类别名称后面添加。但是，当我这样做时，并非该提要中的所有条目都包含在 rss 中。

我想知道`what variable governs the the length of the rss feed`（以**编程方式以及在后端管理中**），以及如何包含一个类别中的所有条目。

更新：我还想知道是否可以为每个类别单独设置进纸长度。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:16:46.663

它位于阅读选项卡下的管理面板中。

将其设置为类似 999

# php - 阻止 WordPress 主题更新

> ID：13257708
> 
> 赞同：1
> 
> 时间：2012-11-06T19:09:36.450
> 
> 标签：php, wordpress, wordpress-theming

我们继承了一个 WordPress 主题，它是[Responsive](http://themeid.com/responsive-theme/) wordpress 主题的高度定制版本。但是作者从未更改过主题元信息，因此它仍然在 WordPress 后端显示为“响应式主题”，并带有更新链接等。

我想将主题从“响应式”更改为“响应式 - 自定义”并禁用更新链接，以免更改被淘汰。我知道如何更改样式表中的主题标题/信息，但我不知道如何摆脱主题的更新功能？

链接：
![在此处输入图像描述](../Images/0acac2870743e95cd3a394b385532ea0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:11:55.000

您需要按照您所说的更改主题标题/信息，但还需要尝试更改主题文件夹名称。

# c# - 使用 LINQ 和 C# 比较集合和计算重复项

> ID：13257709
> 
> 赞同：2
> 
> 时间：2012-11-06T19:09:39.620
> 
> 标签：c#, linq

我的系统中有两个类似的对象。

*   LeadImportViewModel
*   LeadGridViewModel

我需要`QtyDuplicates`在我的`LeadImportViewModel`集合中填充该字段，该字段应显示 LeadGridViewModel 集合中 `CompanyNameStripped`值相同的相应记录的数量。

```
public class LeadImportViewModel
{
    public int Id { get; set; }
    public string CompanyName { get; set; }
    public string CompanyNameStripped { get; set; }
    public int QtyDuplicates{ get; set; }
}

public class LeadGridViewModel
{
    public int LeadId { get; set; }
    public string CompanyName { get; set; }
    public string CompanyNameStripped { get; set; }
} 
```

集合创建如下：

```
var coll = (from t1 in db.Leads_Staging
                    select new LeadImportViewModel
                        {
                            Id = t1.Id,
                            CompanyName = t1.CompanyName,
                            CompanyNameStripped = t1.CompanyNameStripped,

                        }); 
```

使用 LINQ/C# 最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:18:36.407

听起来你只需要：

```
var count = leadImports.Select(x => x.CompanyNameStripped))
                       .Intersect(leadGrids.Select(x => x.CompanyNameStripped)))
                       .Count(); 
```

或者：

```
var names = new HashSet<string>(leadImports.Select(x => x.CompanyNameStripped));
var count = leadGrids.Count(x => names.Contains(x.CompanyNameStripped)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:18:59.990

使用`ForEach`和`Count`方法：

```
List<LeadImportViewModel> leadImportViewModelList = new List<LeadImportViewModel>();
List<LeadGridViewModel> leadGridViewModelList = new List<LeadGridViewModel>();

leadImportViewModelList.ForEach(vm => vm.QtyDuplicates 
    = leadGridViewModelList.Count(
    gv => gv.CompanyNameStripped = vm.CompanyNameStripped)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:21:55.927

`list.Select(a => a.CompanyNameStripped).Intersect(list2.Select(b => b.CompanyNameStripped).Count()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:00:03.650

尝试

```
var coll = (from t1 in db.Leads_Staging
                select new LeadImportViewModel
                    {
                        Id = t1.Id,
                        CompanyName = t1.CompanyName,
                        CompanyNameStripped = t1.CompanyNameStripped,
                        QtyDuplicates = db.LeadGridViewModel.Count(
                                        gv => gv.CompanyNameStripped == t1.CompanyNameStripped)
                    }); 
```

# php - og:description 'content' 未终止的字符串文字

> ID：13257716
> 
> 赞同：0
> 
> 时间：2012-11-06T19:09:57.547
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [未终止的字符串文字](https://stackoverflow.com/questions/5296402/unterminated-string-literal)

我在设置 og:description 时遇到问题...

```
function createFacebookMeta($title, $fcUrl, $fcImg, $fcDesc){    
    $fcDesc = (strlen($fcDesc) > 100) ? substr($fcDesc,0,150).'...' : $fcDesc;
    $faceBook = "<script type=\"text/javascript\">

$(document).attr('title', '".$title."');
$('meta[property=\"og:title\"]').attr('content', '".$title."');
$('meta[property=\"og:url\"]').attr('content', '".$fcUrl."');
$('meta[property=\"og:image\"]').attr('content', '".$fcImg."');
$('meta[property=\"og:description\"]').attr('content', '".$fcDesc."');
FB.XFBML.parse();
</script>";
echo $faceBook;
} 
```

作为回应，我进入了萤火虫

未终止的字符串文字

```
 $('meta[property="og:description"]').attr('content', 'Logos gedruckt<br />  //breaks here 
```

即使我使用striptags它报告相同......如果我不设置og：description默认元描述（这里是np），它的长度大致相同，因为我读到fb最多需要大约300个字符

谢谢你

$fcDesc 是数据库结果

```
$fcDesc = "Logos gedruckt
<br>
100% Baumwolle
<br>
Vorne: Logo
<br>
Rücken: Cash Ruls"; 
```

（产品描述）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:56:39.497

您正在以破坏代码的方式将字符串输出到 javascript 代码中。

发生这种情况是因为您没有正确编码 javascript 的 PHP 值。

一个简单的方法是使用该[`json_encode()`](http://php.net/json_encode)函数：

```
$faceBook = '<script type="text/javascript">
$(document).attr(\'title\', ' . json_encode($title) . '); ....'; 
```

每当您需要为 javascript 编码 PHP 变量的值时使用它。JSON 是 javascript 的一个子集，所以它工作得非常好。

此外，您可能希望简化描述字符串：

```
$simplified = preg_replace('/\s+/', ' ', strip_tags($fcDesc)); 
```

这确实会删除`<br>`您在其中的 HTML 标记，然后对空格进行规范化。

让我们看看`json_encode`实际情况：

```
echo json_encode($simplified), "\n"; 
```

输出：

```
"Logos gedruckt 100% Baumwolle Vorne: Logo R\u00fccken: Cash Ruls" 
```

如您所见，`json_encode`它不仅负责添加引号，还负责将字符串中的字符正确编码为 un​​icode 序列。

在您的原始字符串中，您有换行符。在 javascript 中，字符串中不能有换行符（在 PHP 中可以有，但在 javascript 中没有）。在您的原始字符串上使用`json_encode`也可以解决这个问题：

```
"Logos gedruckt\n<br>\n100% Baumwolle\n<br>\nVorne: Logo\n<br>\nR\u00fccken: Cash Ruls" 
```

如您所见，换行符`\n`在输出中正确写入。请记住`json_encode`，将它用于您放入 javascript 标记的所有变量。这将使您的代码稳定。

# facebook - 测试用户对事件的邀请：event_id/invited/user_id

> ID：13257720
> 
> 赞同：0
> 
> 时间：2012-11-06T19:10:12.800
> 
> 标签：facebook, facebook-graph-api

我正在测试一些代码以在用户单击按钮时邀请他们参加事件。目前我正在与测试用户一起做这个。我在我正在开发的应用程序上创建了两个测试用户。其中之一是我用来创建 Facebook 活动的。另一个为该应用程序创建了一个 Facebook 标签。我正在尝试传递事件ID和第二个用户的ID

```
event_id/invited/user_id 
```

作为一个帖子，所以用户被邀请。但是，我得到以下 JSON 响应：

```
{
  "error": {
    "message": "(#200) ", 
    "type": "OAuthException", 
    "code": 200
  }
} 
```

这对测试用户来说是不可能的吗？还是我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:01:27.390

在测试时，测试用户是朋友是一个非常关键的因素。如果您想通过 FB 发送邀请，请务必这样做 :)。

# java - App Engine - Cloud Sql - java.sql.SQLException：此连接已关闭

> ID：13257721
> 
> 赞同：3
> 
> 时间：2012-11-06T19:10:15.407
> 
> 标签：java, database, google-app-engine, google-cloud-sql

过了一会儿我得到了这个错误，那么在给我的单例之前如何确保连接没有死？

这是我的代码：

```
public static Connection getInstance() throws Exception {

    if(connection != null) {
        return connection;
    }

        DriverManager.registerDriver(new AppEngineDriver());
        connection = DriverManager.getConnection("jdbc:google:rdbms://"+instanceName+"/vidaao");

    return connection;

} 
```

堆栈跟踪：

> java.sql.SQLException：此连接已关闭。在 com.google.cloud.sql.jdbc.internal.Exceptions.newConnectionClosedException(Exceptions.java:52) 在 com.google.cloud.sql.jdbc.Connection.throwIfNotOpen(Connection.java:633) 在 com.google.cloud .sql.jdbc.Connection.getHoldability(Connection.java:194) 在 com.google.cloud.sql.jdbc.Connection.createStatement(Connection.java:123) 在 com.google.cloud.sql.jdbc.Connection.createStatement (Connection.java:54) at db.DbUser.exist(DbUser.java:209) at controller.CtrlUser.login(CtrlUser.java:343) at vidaao.ConnectServlet.doPost(ConnectServlet.java:36) at javax.servlet .http.HttpServlet.service(HttpServlet.java:637) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) at组织。

我尝试使用 isClosed() 但不起作用，并且 isValid() 看起来可以正常工作，但每次都会减慢与数据库的连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T16:20:24.427

调用[Connection#isValid](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#isValid%28int%29)将是最好的方法，但是是的，它会 ping 数据库以确保连接有效。

我注意到您没有在 AppEngine 中使用标准的 mysql 连接器/j 驱动程序，我建议您尝试一下。它不会像旧驱动程序那样使服务器上的连接超时。

有关要在 AppEngine 中使用的 JDBC 驱动程序类的类名以及要使用的 URL，请参阅[https://developers.google.com/appengine/docs/java/cloud-sql/#Java_Connect_to_your_database 。](https://developers.google.com/appengine/docs/java/cloud-sql/#Java_Connect_to_your_database)

希望这会有所帮助，罗布

# json - 主干解析json响应

> ID：13257722
> 
> 赞同：6
> 
> 时间：2012-11-06T19:10:19.277
> 
> 标签：json, parsing, backbone.js, nested

我已经使用 Backbone 总共 3 天了，我可以看到这已经被问了很多，但老实说我就是不明白。我一直在努力让一个基本的应用程序运行解析嵌套的 json，但我似乎无法解决它。如果我展平 json 响应并删除嵌套元素，这一切都有效，但这不是我接收它的方式。

我已经尝试了一些有关 Backbone 关系的示例，但我真的被困在这里，一个总骨干 n00b，并希望得到一些帮助。

**这是HTML：**

```
<div id="employee-data">
    <script type="text/template" id="employees-template">
        <ol id="data-block">
        </ol>
        <div class="clear"></div>
    </script>
    <script type="text/template" id="employee-template">
        <h2>Your employer: <span><%= employerName %></span> </h2>
        <div>Employee Id: <span><%= employeeId %> </span></div>
        <div>Name: <span><%= employeeName %>     </span></div>
        <div>Title: <span><%= employeeJobTitle %> </span></div>
        <div>Location: <span><%= employeeLocation %> </span></div>
    </script>
</div> 
```

**这是js：**

```
var Contact = {
    Models: {},
    Collections: {},
    Views: {},
   Templates:{}
}

Contact.Models.Employee = Backbone.RelationalModel.extend({});

Contact.Collections.Employees = Backbone.Collection.extend({
    model: Contact.Models.Employee,
    url: "includes/test-data.json",

    initialize: function(){
        console.log("Employees initialize");
    }
});

Contact.Templates.employees = _.template($("#employees-template").html());

Contact.Views.Employees = Backbone.View.extend({
    el: $("#employee-data"),
    template: Contact.Templates.employees,

    initialize: function () {       
       this.collection.bind("reset", this.render, this);
       this.collection.bind("add", this.addOne, this);
    },

    render: function () {
        console.log("render")
        console.log(this.collection.length);
        $(this.el).html(this.template());
        this.addAll();      
    },

    addAll: function () {
       console.log("addAll")
       this.collection.each(this.addOne);
    },

    addOne: function (model) {
       console.log("addOne")
       view = new Contact.Views.Employee({ model: model });
       $("ol", this.el).append(view.render());
    }

})

Contact.Templates.employee = _.template($("#employee-template").html());

Contact.Views.Employee = Backbone.View.extend({
    tagName: "li",
    template: Contact.Templates.employee,

    initialize: function () {
        this.model.bind('destroy', this.destroyItem, this);
        this.model.bind('remove', this.removeItem, this);
    },

    render: function () {
        return $(this.el).append(this.template(this.model.toJSON())) ;

    }
})

Contact.Router = Backbone.Router.extend({
    routes: {
        "": "defaultRoute"
    },

    defaultRoute: function () {
        console.log("defaultRoute");
        Contact.employees = new Contact.Collections.Employees();

        new Contact.Views.Employees({ collection: Contact.employees }); //Add this line

        Contact.employees.fetch({
        error:function(response, xhr){
            console.log(response);
            console.log(xhr)
        },
        success:function(){
            console.log("success");
        }
    });
        console.log(Contact.employees.length)
    }
})

var appRouter = new Contact.Router();

Backbone.history.start(); 
```

**最后是json：**

```
[
    {
  "contactId" : "345345234",
  "employees" : [ {
    "employeeId" : "EE-00000001",
    "employeeName" : "BubbA Ho-tep",
    "employeeLegalFirstName" : "Bubba",
    "employeePrefFirstName" : "",
    "employeeLastName" : "Ho-tep",
    "employeeMaritalStatus" : "Single",
    "employeeBirthYear" : "1942",
    "employeeJobTitle" : "",
    "employmentStatus" : "Active",
    "employmentTerminationDte" : "",
    "employeeReferenceCode" : "EE1",
    "employeeDivision" : "HR",
    "employeeLocation" : "Downtown",
    "employeeEmail" : "bubba.hotep@greatmovies.com",
    "employer" : {
      "employerId" : "ER-00000001",
      "employerName" : "Initech"
    }
  } ]
}
] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T19:20:41.057

你应该在你的集合中使用[parse()方法：](http://backbonejs.org/#Collection-parse)

```
Contact.Collections.Employees = Backbone.Collection.extend({
    model: Contact.Models.Employee,
    url: "includes/test-data.json",

    initialize: function(){
        console.log("Employees initialize");
    },

    parse : function(response){
        return response.employees;  
   }    

}); 
```

在模型和集合中都有一个 parse()，用于处理 url() 的相同目的。

**编辑：** 我不是路由器专家，但我想你必须在某个时候渲染视图。

```
var view = new Contact.Views.Employees({ collection: Contact.employees }); 
view.render(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T05:16:23.220

model 带有 parse 方法，所以当你发出 mode.fetch() 请求时，输出可以在模型本身中解析

例子 ：

model = Backbone.Model.extend({ urlRoot:"/category/", parse : function(data) { console.log(data); } })

var 模型 = 新模型（{}）

# c# - twitter api v. 1.1 搜索查询无法使用 C# 包装器 (twitterizer)

> ID：13257730
> 
> 赞同：1
> 
> 时间：2012-11-06T19:10:43.657
> 
> 标签：c#, twitter

我正在修改 twitterizer 1.0 版以与最近的 twitter api v. 1.1 兼容。

在修改和测试时，我被 twitter api 1.1 search 卡住了

```
https://api.twitter.com/1.1/search/tweets.json 
```

我正在使用 twitterizer v. 1.0。

有人成功调用了上面的 url 并取回了 json 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:27:13.297

告诉任何想知道的人，Twitterizer 的下一个版本（2 或 3）似乎在处理 JSON 时从 1 开始。

他们现在使用 Newtonsoft.Json.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T01:29:35.380

也许现在回答为时已晚，但在此链接上有一个很好的 Twitterizer for Twitter API 1.1 重制版：

[Twitterizer-Remake for API 1.1](https://bitbucket.org/szrsharp/twitterizer-remaked-for-api-1.1/overview)

唯一的问题是重拍的文档是日文的。使用谷歌翻译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T18:01:31.623

@backslash17 的答案似乎不再起作用：日本的 dll 模块似乎也处于空闲状态。

由于我遇到了同样的问题（在旧的 .NET 3.5 应用程序中使用 Twitterizer），我切换到 TweetSharp，它是唯一可用于支持 Twitter API 1.1 的 .NET 3.5（以及 2.0）的库。

有关更多信息，您可以[在此处阅读我的回答](https://stackoverflow.com/a/27449299/1233379)。

我个人可以保证它可以工作，因为我在一个旧的 3.5 项目中使用了它，并且我设法让它工作（事实上它拯救了我的一天）。

# function - 从匿名函数调用匿名函数

> ID：13257735
> 
> 赞同：3
> 
> 时间：2012-11-06T19:10:47.640
> 
> 标签：function, clojure, anonymous-function

我想调用一个*不*使用另一个匿名函数的速记符号的匿名函数。

执行以下操作不起作用，因为返回了最后一个评估：

```
user> ((fn [x] (fn [y] (inc y)) x) 3)
3 
```

现在我想有一种方法可以从外部调用内部匿名函数。

我设法通过这样做使它工作，但它看起来很复杂：

```
user> ((fn [x] (let [f (fn [y] (inc y))] (f x))) 3)
4     ;; good, 4 is the result I want here 
```

有没有更简单的方法来嵌套匿名函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T19:23:13.983

让我们打破第一行：

```
((fn [x]
   (fn [y] (inc y))  ; construct an anonymous function
   x)                ; return the outer parameter
 3) 
```

请注意，从不使用内部函数。

你似乎想做的事：

```
((fn [x]
   ((fn [y] (inc y)) x))
 3) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T23:21:20.933

我强烈建议使用`let`表单来提高代码的清晰度，例如

```
(let [f (fn [y] (inc y))
      g (fn [x] (f x))]
  (g 3)) 
```

我什至会有其他功能来接受前者。

```
(let [f (fn [y] (inc y))
      g (fn [h x] (h x))]
  (g f 3)) 
```

甚至如下：

```
(let [f (fn [y] (inc y))
      g (fn [h x] (h x))
      gf (partial g f)]
  (gf 3)) 
```

它使阅读和理解功能更加容易。即使有了，`let`我也不会在这里停下来开发另一个更好的功能。

经过一番思考，我认为没有必要在什么`f`时候定义一个单参数函数`inc`。[使用读者的匿名函数字面量](http://clojure.org/reader#The%20Reader--Macro%20characters)也可能会让人忘乎所以，形式`let`变为：

```
(let [f inc
      g #(% %2)
      gf (partial g f)]
  (gf 3)) 
```

但是我想得越多，我就越不理解这个问题。

你能描述一下你真正想要实现的目标吗？

# javascript - 在 javascript 中添加另一个 else 函数？

> ID：13257740
> 
> 赞同：1
> 
> 时间：2012-11-06T19:11:03.593
> 
> 标签：javascript

有人可以帮我解释一下吗，我正在尝试在这个 javascript 中添加另一个函数，但运气不佳。

继承人的代码：

```
<script>
$(".modcontentnewestmore").hide();
$('.morebutton').click(function () {
    if ($('.modcontentnewestmore').is(":hidden")) {
         $(".modcontentnewest").fadeTo(500, 0);
         $('.modcontentnewestmore').fadeTo(0, 500);

    } else {

        $('.modcontentnewestmore').fadeTo(500, 0);
              $('.modcontentnewest').fadeTo(0, 500);

    }
  });

</script> 
```

基本上我想要做的是添加另一个功能，如：

```
 $(".modcontentnewest").fadeTo(500, 0);
         $('.modcontentnewestevenmore').fadeTo(0, 500); 
```

当再次单击相同的按钮时。

有没有办法做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:14:22.940

不完全确定你想要它的位置，但你可以使用另一个变量来计算按钮被按下的次数，如果它被按下 1 次，则向计数器添加一个数字，所以如果再次按下它并且计数器达到更高的数字做其他事情，再次增加计数器或重置计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:16:13.837

如果你想隐藏/取消隐藏你的元素，你可以使用[toggle() 。](http://api.jquery.com/toggle/)

它可能是这样的：

```
$('.morebutton').click(function () {
$(this).toggle();
} 
```

请注意，这是未经测试的代码。

# eclipse - 如何将“组成”转换为 EMF 模型？

> ID：13257746
> 
> 赞同：0
> 
> 时间：2012-11-06T19:11:24.937
> 
> 标签：eclipse, model, uml, eclipse-emf-ecore, emf

我通过写下来指定了一个模型：

> A 由 B 组成。每个 B 都有一个名称和点。在 B 中，如果其点未满足，则分配 C。

如何将此示例转换为 emf？

**更新**

好的，我尝试了一个解决方案：

A 是一个类并与 B 相连，B 具有名称和点作为属性。但是，我现在真的不知道如何处理 C？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:25:30.610

在 A 和 B 之间，您肯定有关联。由于您强调“由...组成”，因此它可能是 1:1 的*复合聚合*（即 A 和 B 的生命周期是耦合的）。

B 与 C 有关联。这听起来像是 0:1 的多重性。在静态类图中无法捕获条件“如果 .. 满足”，因为它描述了系统的动态行为（因此上面的下限 0，以便您可以使用`null`）。目前尚不清楚点是对象（参考）还是数字（属性）。

[![图片由 yuml.me 提供](../Images/194088b4aea171562c728932942034ea.png)](https://i.stack.imgur.com/XEhUk.jpg)
[（来源：[yuml.me](https://yuml.me/072e505b.jpg)）]

我就是这样做的（通过[Yuml.me](https://yuml.me/)）。

作为替代方案（取决于模型的其余部分），您可能会发现 B 实际上扩展了 A。

# python - python os.fdopen(os.open()) 不能用来写？

> ID：13257748
> 
> 赞同：7
> 
> 时间：2012-11-06T19:11:30.493
> 
> 标签：python

这个问题与[在 Python 中以特定权限写入文件](https://stackoverflow.com/questions/5624359/write-file-with-specific-permissions-in-python)的答案有关，用于打开具有特定权限的文件以进行写入（在 python 中）。

答案中的代码如下所示：

```
with os.fdopen(os.open('foo', os.O_APPEND | os.O_CREAT, 0o644)) as out:
  out.write("hello\n") 
```

2.7.1 中的这段代码（我的公司没有安装 2.7.3）产生：

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IOError: File not open for writing 
```

`os.fdopen`有自己的模式参数，但设置无济于事：

```
>>> with os.fdopen(os.open('foo', os.O_APPEND | os.O_CREAT, 0o644), 'a') as out:
...   out.write("hello\n")
...
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OSError: [Errno 22] Invalid argument 
```

长话短说，我无法弄清楚如何实际写入已通过`os.fdopen`and打开的文件`os.open`。有任何想法吗？2.7.1 中的已知错误？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T19:20:29.693

您必须选择 O_RDONLY、O_WRONLY 或 O_RDWR 之一作为 open() 的“基本”模式参数。

您没有明确这样做，因此假定为 O_RDONLY（许多系统上为零）。Python 的`os.fdopen`看到你指定了 O_RDONLY*和*O_APPEND，这有点傻。Python 用您看到的 EINVAL（“无效参数”）错误来抱怨这种组合。

（事实上​​，如果你`strace(1)`的脚本——我假设这里是 Linux——我怀疑你会看到没有遇到“自然” EINVAL。相反，python 执行你的`os.open()`/ `open(2)`，然后检查文件描述符上的标志（F_GETFL）就在之前引发异常。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T15:40:09.440

确实很时髦。

```
os.fdopen(os.open("a1", os.O_CREAT | os.O_RDWR | os.O_APPEND | os.O_EXCL)) 
```

工作，而

```
os.fdopen(os.open("a1", os.O_CREAT | os.O_WRONLY | os.O_APPEND | os.O_EXCL)) 
```

向. `OSError: [Errno 22] Invalid argument`_`os.fdopen()`

所以 os.fdopen() 需要对 FD 进行完全的读/写访问。除非你这样做

```
os.fdopen(fd, "w") 
```

它适用于只写文件。

# mysql - 执行 mysqlcheck 时 Innodb 表已损坏，但 mysql 服务器现在或重新启动时不会崩溃

> ID：13257757
> 
> 赞同：2
> 
> 时间：2012-11-06T19:12:26.930
> 
> 标签：mysql, innodb, corruption

我有一个包含 InnoDB 表的数据库，其中一个 InnoDB 表被标记为损坏（我知道数据丢失等）。但是，当我重新启动 MySQL 时，它不会崩溃。

我预计它会崩溃，但事实并非如此。（我之前读过如果innodb表损坏，mysql服务器将停止）

它现在不应该崩溃吗？

innodb 是我的默认数据库引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:15:43.330

损坏的表不一定会导致崩溃。不过，您应该修复表，如果可能的话，从备份中重新加载表。对损坏的表进行操作充其量是不稳定的，无论如何，正如您已经发现的那样，它不会给您正确的结果*。*

不要相信系统没有“爆炸”这一事实——一个数据库有几个中间状态。你现在所处的那个很可能是“我还没有爆炸，我正在等待腐败传播和污染其他表的数据”。如果您知道该表已损坏，请*立即*行动。

关于修复 InnoDB 表，请参阅[如何修复 InnoDB 表？](https://stackoverflow.com/questions/226172/how-do-i-repair-an-innodb-table).

要验证 InnoDB 表是否损坏，请参阅[https://dba.stackexchange.com/questions/6191/how-do-you-identify-innodb-table-corruption](https://dba.stackexchange.com/questions/6191/how-do-you-identify-innodb-table-corruption)。

# 检测腐败

为此，您需要进行*验收测试*，该测试将检查大量数据并为其提供一份干净的健康证明——或不这样做。将表导出到 SQL 并查看它是否可能，和/或对元组基数和/或关系进行检查......你明白我的意思。在预计没有人写入的表上，因此任何修改都等于损坏，磁盘文件的 MD5 可能会更快。

为了使事情更高效（例如在生产系统中），您可以考虑文件快照、数据库复制，甚至是高可用性。这些方法将检测*程序损坏*（例如流氓更新），但可能无法检测到主服务器上的某些硬件损坏（给出错误否定：从服务器上的检查成功，*并且主服务器上的数据仍然损坏*）或可能会在从站中发生意外（失败并引发误报，因为主站上的数据实际上是未受污染的）。

监控系统重要统计数据非常重要（而且高效），既可以捕捉即将发生的故障的最初症状（例如使用 SMART），也可以为取证调查提供数据（“有趣的是，每次数据库发生故障时，它总是在系统负载突然达到峰值——如果我们找出造成*这种*情况的原因会怎样？”）。

当然，还要依靠完整和充分的备份（并且不时地运行测试恢复。去过那里，做到了，把我的屁股交给了我）。

# 腐败原因[与原始问题无关]

损坏源因软件设置而异。当然，一般来说，*一定有***什么东西** 侵入了链条并造成了严重破坏。*`server memory representation-writer process-OS handle-journaling-IOSS-OS cache-disk-disk cache-internal file layout`*

 *不正确的系统关闭可能会在多个级别上造成混乱，从而阻止数据在管道的任何阶段写入。

最后阶段对磁盘上的文件进行人工处理（使用自己的管道，服务器对此一无所知）。

存在其他更深奥的可能性：

*   硬盘本身的细微固件/硬件故障，
    *   由于磁盘磨损或有缺陷的固件甚至有缺陷的固件更新，意外且可能无法恢复（我似乎记得几年前，日立的声学管理更新可以针对稍微不同的模型运行。更新磁盘后“认为”它有比实际更多的缓存，并且写入缓存中不存在的区域当然直接进入天堂）。
    *   “故意的”并且可能可以恢复：有时可能会使用`hdparm`. *如果每个组件都适合该级别的性能并且知道它*或者至少*能够发出信号，那么*将磁盘设置为最高性能就很好。有时，您收到的所有“警告”都是系统故障。
*   进程空间或 IOSS 损坏：在 Apache 安装中看到了这种情况，可能由于 suid root 的 CGI，access.log 文件充满了应该进入用户浏览器的 GIF 图像流。修复了，什么也没发生，**但**如果它是一个更重要的文件而不是日志......？此类问题可能难以诊断，您可能需要检查*所有*日志文件以查看*某些*应用程序是否注意到或做了任何不良行为。
*   硬盘扇区重定位：传说中的发生，我自己从未见过，但现代硬盘有“备用”扇区，它们将交换有缺陷的扇区以保持“零缺陷”表面。除了如果有缺陷的扇区碰巧*不再可读*并被替换为*空*扇区，则净效果与该扇区突然归零相同。您可以使用 SMART 报告（`hddhealth`或`smartctl`）轻松检查这一点。

当然，还存在更多其他可能性，具体取决于设置。谷歌搜索*文件损坏*发现数百万页；添加到查询中的有用术语是文件系统（ext4，NTFS，brtfs，...），硬盘制造商和型号，操作系统，软件问题，安装的*其他*软件。*

# jquery - Ajaxsubmit，在 beforeSubmit 上链接事件

> ID：13257759
> 
> 赞同：1
> 
> 时间：2012-11-06T19:12:37.007
> 
> 标签：jquery

我试图在 beforeSubmit 中触发几个函数。首先，我想检查所选选项是否有效。其次，我想使用模式窗口并让用户确认更改。这是一些代码：

```
 <script type="text/javascript" language="javascript" src="scripts/jquery-latest.js"></script>
 <script type="text/javascript" language="javascript" src="scripts/jquery.form.js" ></script>
 <script type="text/javascript" language="javascript" src="scripts/jquery.simplemodal-1.4.3.js"></script>
 <link rel="stylesheet" type="text/css" href="css/modalWins.css" />
 <script>
$().ready(function() {
$('#myForm').submit(function() {                        
    var options = { 
        success: showResponse,
        beforeSubmit: chkService,
        dataType: "json",
        url:'actCustomer.cfm?vw=saveSvc&acctNum=1'
        };
    $('#myForm').ajaxSubmit(options);
    return false;   
});

showResponse = function(responseText, statusText) {
    alert('am i here? ' + responseText); 
    $.ajax({
        type: "post",      
        url: "actCustomer.cfm?vw=save", 
        cache: false,       
        success: function(result) {
            alert(result);
        },
        error: function(xmlHttpRequest, status, err) {
            confirm('Error: '+err);
            $('#errDiv').html(err);
        }
    }); 
}

chkService = function(arr, $form, options) {
    formData = 'service='+$('#svc').val();
    $.ajax({
        type: "post",      
        url: "actCustomer.cfm?vw=chkStuff", 
        data: formData,
        cache: false,       
        success: function(result) {
            result = $.trim(result);
            if (result == 'Invalid') {
                $('#errDiv').html('Invalid Selection').addClass('req'); 
                return false;
            } else if (result == 'Valid') {
                return confirmUpdates(arr, $form, options);
            } else {
                $('#errDiv').html(result);
                return false;
            }
        },
        error: function(xmlHttpRequest, status, err) {
            confirm('Error: '+err);
            $('#errDiv').html(err);
        }
    }); 
}

// should we continue with the updates?
confirmUpdates = function(arr, $form, options) {
    var dispMsg = 'some information here about updates.';
    $('#msg-header').html('Confirmation of Updates!');
    $('#msg-content').html(dispMsg).css('color','black');
    $('#msg-action').html('<div align="center" style="margin-top:30px;"><input type="button" name="btnModSubmit" id="btnModSubmit" class="button submit" value="Continue"/><input type="button" name="btnModClose" id="btnModClose" class="button close" value="Cancel" style="margin-left:30px"/></div>');
    $("#Msg").html('<table style="font-size:11px; color:#333; margin-left:35px;"><tr><td><img border="0" src="images/ajax-loader.gif"/></td><td style="font-weight:bold">Confirming updates...</td></table>');

    $('#basic-modal-content').modal({ minHeight:320, minWidth:455 });

    $('#btnModSubmit').click(function(){
        // continue with the updates.
        alert('continue >>');
        return true;
    });
    $('#btnModClose').click(function(){
        /* $.modal.close();
        $("#formMsg").hide();
        $('#formSub').show(); */
        window.location.reload();
    });
}
 });
 </script>
  <form name="myForm" id="myForm" action="" method="post">
service:<input type="text" name="svc" id="svc" value="1">
    <input type="submit" name="submit" id="submit" class="button submit" value="Proceed"/>
 </form> 
```

我遇到的问题是，一旦我无法返回 confirmUpdates(arr, $form, options); 好好工作。它会启动模态窗口，但不会等待 btnModSubmit 单击。它提交表单，我看到我在这里吗？警告。

如果在 chkOptions 中对 stuff.cfm 的 ajax 调用是有效的，那么现在进行确认更新。如果用户点击 btnModSubmit 则返回 true 以执行 showResponse。如果用户单击 btnModClose，则返回 false 并且不执行 showResponse。我被困在这一点上。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:43:09.547

我结束了从 ajaxSubmit 中删除成功，如下所示。

```
 $('#myForm').submit(function() { 

    var options = { 
        beforeSubmit: function(arr, $form, options) { 
            chkService(arr, $form, options);
            confirmUpdates(arr, $form, options);
            return false;
        },
        dataType: "json",
        url:'actCustomer.cfm?vw=saveSvc&acctNum=1'
        };
    $('#myForm').ajaxSubmit(options);
    return false;   
}); 
```

chkService 首先运行。然后，它转到confirmUpdates。在那里，我有一个提交和取消按钮。如果他们点击提交，那么我将他们发送到另一个函数以保存表单：

```
 saveForm(arr, $form, options); 
```

希望它对某人有所帮助。谢谢

# c# - 为什么实体框架会生成嵌套 SQL 查询？

> ID：13257760
> 
> 赞同：22
> 
> 时间：2012-11-06T19:12:36.530
> 
> 标签：c#, mysql, linq, entity-framework, entity-framework-5

为什么实体框架会生成嵌套 SQL 查询？

我有这个代码

```
 var db = new Context();
    var result = db.Network.Where(x => x.ServerID == serverId)
        .OrderBy(x=> x.StartTime)
        .Take(limit); 
```

这会产生这个！（注意双选语句）

```
SELECT
`Project1`.`Id`, 
`Project1`.`ServerID`, 
`Project1`.`EventId`, 
`Project1`.`StartTime`
FROM (SELECT
`Extent1`.`Id`, 
`Extent1`.`ServerID`, 
`Extent1`.`EventId`, 
`Extent1`.`StartTime`
FROM `Networkes` AS `Extent1`
 WHERE `Extent1`.`ServerID` = @p__linq__0) AS `Project1`
 ORDER BY 
`Project1`.`StartTime` DESC LIMIT 5 
```

我应该改变什么才能产生一个选择语句？我将 MySQL 和实体框架与 Code First 一起使用。

# 更新

无论传递给`OrderBy()`方法的参数类型如何，我都会得到相同的结果。

# 更新 2：定时

```
Total Time (hh:mm:ss.ms)    05:34:13.000
Average Time (hh:mm:ss.ms)  25:42.000
Max Time (hh:mm:ss.ms)  51:54.000
Count   13
First Seen  Nov 6, 12 19:48:19
Last Seen   Nov 6, 12 20:40:22 
```

原始查询：

```
SELECT `Project?`.`Id`, `Project?`.`ServerID`, `Project?`.`EventId`, `Project?`.`StartTime` FROM (SELECT `Extent?`.`Id`, `Extent?`.`ServerID`, `Extent?`.`EventId`, `Extent?`.`StartTime`, FROM `Network` AS `Extent?` WHERE `Extent?`.`ServerID` = ?) AS `Project?` ORDER BY `Project?`.`Starttime` DESC LIMIT ? 
```

我使用一个程序从 MySQL 中的当前进程中获取快照。

同时执行了其他查询，但是当我将其更改为仅一个 SELECT 语句时，它永远不会超过一秒钟。也许我还有其他事情正在发生；我在问，因为我不太喜欢 DB...

# 更新 3：解释语句

生成的实体框架

```
'1', 'PRIMARY', '<derived2>', 'ALL', NULL, NULL, NULL, NULL, '46', 'Using filesort'
'2', 'DERIVED', 'Extent?', 'ref', 'serveridneventid,serverid', 'serveridneventid', '109', '', '45', 'Using where' 
```

一个班轮

```
'1', 'SIMPLE', 'network', 'ref', 'serveridneventid,serverid', 'serveridneventid', '109', 'const', '45', 'Using where; Using filesort' 
```

这是来自我的 QA 环境，所以我上面粘贴的时间与 rowcount 解释语句无关。我认为大约有 500,000 条记录与一个服务器 ID 匹配。

# 解决方案

我从 MySQL 切换到 SQL Server。我不想最终完全重写应用程序层。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T20:24:18.610

这是从表达式树逻辑构建查询的最简单方法。通常性能不会成为问题。如果您遇到性能问题，您可以尝试这样的方法来恢复实体：

```
var results = db.ExecuteStoreQuery<Network>(
    "SELECT Id, ServerID, EventId, StartTime FROM Network WHERE ServerID = @ID", 
    serverId);

results = results.OrderBy(x=> x.StartTime).Take(limit); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:30:28.097

我最初的印象是，这样做实际上会更有效，尽管在针对 MSSQL 服务器进行测试时，无论如何我都得到了不到 1 秒的响应。

使用单个 select 语句，它对所有记录进行排序 ( `Order By`)，然后将它们过滤到您想要查看的集合 ( `Where`)，然后选择前 5 名（`Limit 5`或者，对我来说，`Top 5`）。在一张大表上，排序会占用很大一部分时间。使用嵌套语句，它首先将记录过滤到一个子集，然后才对其进行昂贵的排序操作。

***编辑：**我确实对此进行了测试，但我意识到我的测试中有一个错误导致它无效。测试结果已删除。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T19:49:50.820

为什么实体框架会产生嵌套查询？简单的答案是因为 Entity Framework 将您的查询表达式分解为一个表达式树，然后使用该表达式树来构建您的查询。树自然生成嵌套查询表达式（即子节点生成查询，父节点生成关于该查询的查询）。

为什么实体框架不简化查询并按照您的意愿编写它？简单的答案是因为可以进入查询生成引擎的工作量有限，虽然现在比早期版本更好，但它并不完美，而且可能永远不会完美。

话虽如此，您将手动编写的查询与在这种情况下生成的查询 EF 之间应该没有显着的速度差异。数据库足够聪明，可以生成在任何一种情况下都首先应用 WHERE 子句的执行计划。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T19:27:30.040

如果要让 EF 在没有子选择的情况下生成查询，请在查询中使用常量，而不是变量。

我之前创建了自己的 .Where 和所有其他 LINQ 方法，它们首先遍历表达式树并将所有变量、方法调用等转换为 Expression.Constant。这样做只是因为实体框架中的这个问题......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-13T15:09:30.050

我只是偶然发现了这篇文章，因为我遇到了同样的问题。我已经花了几天的时间来追踪它，它只是 mysql 中的一个糟糕的查询生成。

[我已经在 mysql.com http://bugs.mysql.com/bug.php?id=75272](http://bugs.mysql.com/bug.php?id=75272)提交了一个错误

总结一下问题：

这个简单的查询

```
context.products
    .Include(x => x.category)
    .Take(10)
    .ToList(); 
```

被翻译成

```
SELECT
`Limit1`.`C1`, 
`Limit1`.`id`, 
`Limit1`.`name`, 
`Limit1`.`category_id`, 
`Limit1`.`id1`, 
`Limit1`.`name1`
FROM (SELECT
`Extent1`.`id`, 
`Extent1`.`name`, 
`Extent1`.`category_id`, 
`Extent2`.`id` AS `id1`, 
`Extent2`.`name` AS `name1`, 
1 AS `C1`
FROM `products` AS `Extent1` INNER JOIN `categories` AS `Extent2` ON `Extent1`.`category_id` = `Extent2`.`id` LIMIT 10) AS `Limit1` 
```

并且表现相当不错。无论如何，外部查询几乎没用。现在如果我添加一个 OrderBy

```
context.products
    .Include(x => x.category)
    .OrderBy(x => x.id)
    .Take(10)
    .ToList(); 
```

查询更改为

```
SELECT
`Project1`.`C1`, 
`Project1`.`id`, 
`Project1`.`name`, 
`Project1`.`category_id`, 
`Project1`.`id1`, 
`Project1`.`name1`
FROM (SELECT
`Extent1`.`id`, 
`Extent1`.`name`, 
`Extent1`.`category_id`, 
`Extent2`.`id` AS `id1`, 
`Extent2`.`name` AS `name1`, 
1 AS `C1`
FROM `products` AS `Extent1` INNER JOIN `categories` AS `Extent2` ON `Extent1`.`category_id` = `Extent2`.`id`) AS `Project1`
 ORDER BY 
`Project1`.`id` ASC LIMIT 10 
```

这很糟糕，因为`order by`它在外部查询中。Theat 意味着 MySQL 必须提取每条记录才能执行 orderby，这会导致`using filesort`

我验证了 SQL Server（至少是 Comapact）不会为相同的代码生成嵌套查询

```
SELECT TOP (10) 
[Extent1].[id] AS [id], 
[Extent1].[name] AS [name], 
[Extent1].[category_id] AS [category_id], 
[Extent2].[id] AS [id1], 
[Extent2].[name] AS [name1], 
FROM  [products] AS [Extent1]
LEFT OUTER JOIN [categories] AS [Extent2] ON [Extent1].[category_id] = [Extent2].[id]
ORDER BY [Extent1].[id] ASC 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-06T19:29:42.933

实际上，Entity Framework 生成的查询很少丑陋，比 LINQ 2 SQL 少，但仍然很丑陋。

但是，您的数据库引擎很可能会制定所需的执行计划，并且查询会顺利运行。

# powershell - PowerShell 的 Clear-History 不会清除历史记录

> ID：13257775
> 
> 赞同：100
> 
> 时间：2012-11-06T19:13:53.907
> 
> 标签：powershell, history

最近我不得不运行一个命令，不幸的是要求我在命令行上输入密码。

之后，我用“清除”清除了我的屏幕，但也想清除命令历史记录，这样有问题的命令就不会出现在会话历史记录中。不幸的是，[Clear-History](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Core/Clear-History) cmdlet 似乎并没有真正做到其文档所声称的 - 运行 Clear-History 似乎对会话历史没有任何影响。

我仍然可以在弹出的历史菜单中看到以前的命令，并通过按向上键滚动浏览旧命令。这是一个演示问题的屏幕截图：

![PowerShell 清除历史记录失败](../Images/61f6284e44f7375f7e9146692bac0fc1.png)

我已经使用[Get-Command](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Core/Get-Command)验证了Clear-History 确实正在执行预期的内置 PowerShell cmdlet。

我尝试了一些变体，例如“Clear-History -count 10 -newest”，但都没有显示出任何效果。当我指定一个准确的历史 ID，例如“Clear-History -id 3”时，我收到如下错误：

```
Clear-History : Cannot locate history for Id 3. 
```

即使我可以在屏幕上看到命令#3。

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2016-04-27T20:17:34.280

**在 Windows 10**上，历史记录和敏感数据会在以后的会话中再次出现，即使在 Alt+F7 和`clear-history`. [事实证明](https://windowsserver.uservoice.com/forums/301869-powershell/suggestions/12948234-bug-can-t-clear-command-buffer-it-persists-after)，历史记录存储在一个文本文件中，位于：

```
(Get-PSReadlineOption).HistorySavePath 
```

从该文件中删除违规行并结束当前会话（或通过[CB's answer](https://stackoverflow.com/a/13257933/316760)清除它）。

您可以[对此请求](https://github.com/PowerShell/PSReadLine/issues/2698)投赞成票，以便以更简单的方式暂时禁用历史记录。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2016-08-06T18:49:21.953

**tl;博士**

*   有***两个*历史要清除**：

    *   PowerShell 自己的 ( `Clear-History`)
    *   此外，在控制台（终端）中，在 PowerShell v5+ ( )`PSReadLine`中默认用于命令行编辑的模块`[Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory()`
*   在**版本 1.2+ 中`PSReadLine`**（用 验证`Get-Module PSReadLine`） ， **press会为您`Alt+F7`执行*两个*调用**，因此会**完全清除*会话中的*历史记录**。

    *   但是，**它不会*清除*到目前为止累积的已*保存***历史记录，因此即使已清除的会话的历史记录也会在以后的会话中*重新出现。*

    *   **要清除*保存*的历史记录**，您必须**手动删除存储会话的文件**( `(Get-PSReadlineOption).HistorySavePath`)，如下所述，并由`Clear-SavedHistory`底部的函数包装。

* * *

为了补充[CB. 的有用答案](https://stackoverflow.com/a/13257933/45375)和[JVimes 的有用答案](https://stackoverflow.com/a/36900056/45375)：

*   **PowerShell 自己的历史记录机制 ( `Get-History`, `Clear-History`) 是*独立于主机的***，这就是为什么 - 有点出乎意料 -**您还需要*单独清除**主机*的命令历史记录***。*

**   至于**控制台主机自己的历史功能**：

    *   **`doskey`-style 历史功能**`PSReadline`，在PowerShell 附带模块之前（见下文）：

        *   没有***保存*****的历史记录***- 历史记录仅在*当前*会话期间保留。*
        **   **`Alt+F7`必须用于清除控制台的历史记录**，没有（明显的）编程方式（在`cmd.exe`您可以使用的控制台窗口`doskey /reinstall`中，但这在 PS 中不起作用）。*   [CB. 的回答](https://stackoverflow.com/a/13257933/45375)向您展示了如何模拟这种键盘组合；*请记住：除了* . 之外，还必须使用它`Clear-History`。*
    **   该**[`PSReadline`](https://technet.microsoft.com/en-us/library/mt560334.aspx)模块在 Windows 10 上随 PowerShell v5 和 v5.1 一起提供，还将随 Windows Server 2016 一起提供**，并且还随跨平台**[Powershell (Core) v7+](https://github.com/PowerShell/PowerShell/blob/master/README.md)**版本一起提供；它用更复杂的功能**替换了`doskey`-style 行编辑和命令历史功能**；也可以使用[PowerShell 库](https://www.powershellgallery.com/packages/PSReadline/1.2)（PSv3 和 PSv4 必须首先安装[PowerShellGet](https://www.microsoft.com/en-us/download/details.aspx?id=49186)）来改造旧的 Windows 版本/PS 版本（>= v3）版本。

        *   命令**历史现在*跨会话保存***在文件中
            **`(Get-PSReadlineOption).HistorySavePath`**。
        *   **`[Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory()`可用于清除*当前*会话的历史**（注意v1.2+还支持`Alt+F7`交互式清除当前历史）。
            *   **CAVEAT**：使用`PSReadline`的默认历史保存样式，`SaveIncrementally`任何敏感命令在您调用时 **已经保存**`[Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory()`，并将***在下一个*****会话****中重新出现***。*
            **   处理此问题的唯一方法是**删除保存的历史文件**，如[JVimes 的回答所示](https://stackoverflow.com/a/36900056/45375)，然而，它**总是会清除整个历史**。*   **如果**您将个人资料设置为`Set-PSReadlineOption -HistorySaveStyle SaveAtExit`每次会话开始时调用 - 该设置显然不会“坚持”本身 - 您*应该*能够只调用`[Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory()`（除了`Clear-History`）而不必删除保存的历史文件，在这种情况下，您不会丢失以前会话中保存的历史记录。**但是，从 v2.1.0（撰写本文时的最新版本）开始，`SaveAtExit`完全被破坏了**- 根本没有保存任何历史记录；见[https://github.com/lzybkr/PSReadLine/issues/262](https://github.com/lzybkr/PSReadLine/issues/262)*** 

 *** * *

以下**高级功能捆绑了清除命令历史记录所需的所有命令（适用于 PowerShell 本身和控制台），适用于`doskey`-style 和`PSReadline`-module PowerShell 控制台窗口：**

笔记：

*   因为它是（当前）唯一安全的选项，所以`PSReadline`保存的历史文件也会被删除，这意味着**整个历史记录，包括以前的会话，都会被清除**。

*   因此，默认情况下会显示确认提示。

```
<#
# .SYNOPSIS
#  Clears the command history, including the saved-to-file history, if applicable.
#>
function Clear-SavedHistory {
  [CmdletBinding(ConfirmImpact='High', SupportsShouldProcess)]
  param(    
  )

  # Debugging: For testing you can simulate not having PSReadline loaded with
  #            Remove-Module PSReadline -Force
  $havePSReadline = ($null -ne (Get-Module -EA SilentlyContinue PSReadline))

  Write-Verbose "PSReadline present: $havePSReadline"

  $target = if ($havePSReadline) { "entire command history, including from previous sessions" } else { "command history" } 

  if (-not $pscmdlet.ShouldProcess($target))
  {
        return
  }

  if ($havePSReadline) {

    Clear-Host

    # Remove PSReadline's saved-history file.
    if (Test-Path (Get-PSReadlineOption).HistorySavePath) { 
      # Abort, if the file for some reason cannot be removed.
      Remove-Item -EA Stop (Get-PSReadlineOption).HistorySavePath 
      # To be safe, we recreate the file (empty). 
      $null = New-Item -Type File -Path (Get-PSReadlineOption).HistorySavePath
    }

    # Clear PowerShell's own history 
    Clear-History

    # Clear PSReadline's *session* history.
    # General caveat (doesn't apply here, because we're removing the saved-history file):
    #   * By default (-HistorySaveStyle SaveIncrementally), if you use
    #    [Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory(), any sensitive
    #    commands *have already been saved to the history*, so they'll *reappear in the next session*. 
    #   * Placing `Set-PSReadlineOption -HistorySaveStyle SaveAtExit` in your profile 
    #     SHOULD help that, but as of PSReadline v1.2, this option is BROKEN (saves nothing). 
    [Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory()

  } else { # Without PSReadline, we only have a *session* history.

    Clear-Host

    # Clear the doskey library's buffer, used pre-PSReadline. 
    # !! Unfortunately, this requires sending key combination Alt+F7.
    # Thanks, https://stackoverflow.com/a/13257933/45375
    $null = [system.reflection.assembly]::loadwithpartialname("System.Windows.Forms")
    [System.Windows.Forms.SendKeys]::Sendwait('%{F7 2}')

    # Clear PowerShell's own history 
    Clear-History

  }

} 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-11-06T19:24:17.290

要清除屏幕显示历史记录 ( `F7`)，您必须按`Alt`+ `F7`。

此历史记录由控制台缓冲区管理，而不是由可通过`Clear-History`cmdlet 清除其历史记录的 PowerShell 管理。

要编写脚本，请尝试：

```
[System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
[System.Windows.Forms.SendKeys]::Sendwait('%{F7 2}') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2022-01-31T10:02:31.680

根据[@mklement0](https://stackoverflow.com/users/45375/mklement0)[的最佳答案](https://stackoverflow.com/a/38807689/5157599)，我最终得到了下一个函数，该函数位于我的`$PROFILE`

我真的不关心任何其他会话，我只想清除那些愚蠢的历史，仅此而已。

Cmdlet 名称`Clear-History`尽可能地混淆。

```
# it's a default alias for Get-History cmdlet
Remove-Alias history

# Usage: history      - just print the history, same as call Get-History
# Usage: history -c   - really clears the history
function history {
    param (
        # Clears history
        [Parameter()]
        [Alias("c")]
        [Switch]
        $Clear
    )

    if ($Clear){
        Clear-History
        [Microsoft.PowerShell.PSConsoleReadLine]::ClearHistory()
        return
    }

    Get-History
} 
```**

# scipy - 使用 Python/Scipy 求解方程组以进行一组测量

> ID：13257776
> 
> 赞同：1
> 
> 时间：2012-11-06T19:13:54.950
> 
> 标签：scipy, linear-algebra, least-squares, equation-solving

我有一个物理测量仪器（带有称重传感器的力平台），它给了我三个值，A、B 和 C。但是，由于物理特性，这些值——应该是正交的——实际上是有些耦合的。测量设备，这会导致施加的力和扭矩的值与返回的值之间产生串扰。

然后，建议使用校准矩阵将测量值转换为对实际值的更好估计，如下所示：

![在此处输入图像描述](../Images/bd8792a6cdce018e97ba4110a285f2df.png)

问题是有必要执行一组测量，以便不同的`measured(Fz, Mx, My)`和`actual(Fz, Mx, My)`最小二乘的以获得一些对整个系统最有效的 C 矩阵。

我可以解决ONE 测量的`Ax = B`问题`scipy.linalg.lststq`，甚至`scipy.linalg.solve`（给出一个精确的解决方案），但是我应该如何着手考虑一组不同的测量，每个测量都有自己的方程，给出一个可能不同的 3x3 矩阵？

非常感谢任何帮助，感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:46:23.533

我在 math.stackexchange.com 上发布了一个类似的问题，其中只包含数学部分，这个答案解决了这个问题：

[math.stackexchange.com/a/232124/27435](https://math.stackexchange.com/a/232124/27435)

如果将来有人遇到类似问题，这里是该答案的几乎字面的 Scipy 实现（第一行是初始化样板代码）：

```
import numpy
import scipy.linalg

### Origin of the coordinate system: upper left corner!
"""
    1----------2
    |          |
    |          |
    4----------3
"""

platform_width = 600
platform_height = 400

# positions of each load cell (one per corner)
loadcell_positions = numpy.array([[0, 0],
                                  [platform_width, 0],
                                  [platform_width, platform_height],
                                  [0, platform_height]])

platform_origin = numpy.array([platform_width, platform_height]) * 0.5

# applying a known force at known positions and taking the measurements
measurements_per_axis = 5
total_load = 50

results = []
for x in numpy.linspace(0, platform_width, measurements_per_axis):
    for y in numpy.linspace(0, platform_height, measurements_per_axis):
        position = numpy.array([x,y])
        for loadpos in loadcell_positions:
            moments = platform_origin-loadpos * total_load
            load = numpy.array([total_load])
            result = numpy.hstack([load, moments])
            results.append(result)
results = numpy.array(results)
noise = numpy.random.rand(*results.shape) - 0.5
measurements = results + noise

# now expand ("stuff") the 3x3 matrix to get a linearly independent 3x3 matrix
expands = []
for n in xrange(measurements.shape[0]):
    k = results[n,:]
    m = measurements[n,:]

    expand = numpy.zeros((3,9))
    expand[0,0:3] = m
    expand[1,3:6] = m
    expand[2,6:9] = m
    expands.append(expand)
expands = numpy.vstack(expands)

# perform the actual regression
C = scipy.linalg.lstsq(expands, measurements.reshape((-1,1)))
C = numpy.array(C[0]).reshape((3,3))

# the result with pure noise (not actual coupling) should be
# very close to a 3x3 identity matrix (and is!)
print C 
```

希望这对某人有帮助！

# jquery - 在chrome中使用jquery获取图像高度

> ID：13257779
> 
> 赞同：0
> 
> 时间：2012-11-06T19:14:17.070
> 
> 标签：jquery, image, google-chrome, height

我有这个问题：我正在尝试获取 div 内少数图像的高度，但我遇到了 Chrome 问题。我所有的尝试都返回 0 或 NaN .. 这是我的代码：

HTML：

```
<div class="mid">
    <div class="cimglist">
        <a href="#"><img src="img1.jpg"></a>
        <a href="#"><img src="img2.jpg"></a>
        <a href="#"><img src="img3.jpg"></a>
        <a href="#"><img src="img4.jpg"></a>
        <a href="#"><img src="img5.jpg"></a>
    </div>
</div> 
```

查询：

```
var CardsTotalImages = 0;
var CardsCurrentImage = 0;
var CardsHeights = [];

$('.cimglist img').each(function() {
    /*
    CardsHeights[CardsCurrentImage] = $(this).height(); 
    CardsCurrentImage++;
    //this works great on IE and FF
    */
    var img = new Image();
    img.onload(function() {
        CardsHeights[CardsCurrentImage] = parseInt($(this).height());
        CardsCurrentImage++;
    });
    img.src = $(this).attr('src');
}); 
```

我搜索了每篇文章以找到解决方案，但我得到的唯一有用信息是，Chrome 必须先加载图像，然后才能获得高度。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:20:23.300

我希望所有这些事情都在一个`$(document).ready(function () { });`？

如果是这样，chrome 没有理由不能`$(this).height()`从图像中抓取。你不需要`img.onload`那种方式

在旁注中，尽量不要用大写名称命名 JS 中的**变量**，除非它们是 Classes / Instsantiable 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:21:29.757

为什么不一直使用 jQuery？

```
var CardsTotalImages = 0;
var CardsCurrentImage = 0;
var CardsHeights = [];

$('.cimglist').on('load', 'img', function() {
    CardsHeights[CardsCurrentImage] = $(this).height() || this.height; // added an alternative just in case. i've seen firefox do strange things during my time as a front-end developer.
    CardsCurrentImage++;
}); 
```

**编辑：**

此代码应在`img`呈现元素之前运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:17:56.897

在您的`img.onload`使用中：

```
var h = $(this).get(0).height; // height
var w = $(this).get(0).width; // width 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T10:36:56.567

我找到了一种解决方案，希望对您有所帮助。我已经在 img 标签中设置了图像的尺寸，它也适用于 Chrome。说：

```
<img width="464" height="287" src="myimg.jpg"> 
```

# css - 定义 3 个高度并在 CSS 中使用调整大小

> ID：13257781
> 
> 赞同：-1
> 
> 时间：2012-11-06T19:14:27.277
> 
> 标签：css, resize, height, scrollable

我有一个带有`resize:vertical`样式的 div 元素。生成 div 的内容，因此它可以为空或填充。div 需要一个最大高度，以便在添加新项目时高度增加，但它将大小限制为 150 像素并使 div 可滚动。我可以很容易地用这个`max-height`样式来完成它，但是如果我想调整它的大小，它就不起作用了。

我的第二个想法是只使用`height`样式，但是这样做，如果内容小于 150 像素，则 div 不会调整其高度。

没有javascript有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:58:39.140

我认为如果没有 JavaScript，这是不可能的，即使它会是：你想要这个做什么？请看一下[浏览器的支持`resize`](http://www.w3schools.com/cssref/css3_pr_resize.asp)！

（你所说的“填充”是什么意思 - 这是通过 PHP 还是 JS 完成的？实际上无论你使用哪一个，你都可以检查是否有任何内容，如果有，添加一个`.empty`类到`div`）

# symfony - 如何在 Symfony 2.1 中使用 ChoiceList？

> ID：13257787
> 
> 赞同：4
> 
> 时间：2012-11-06T19:14:46.157
> 
> 标签：symfony, symfony-2.1

我有一个包含美国各州列表的文件。
阿拉巴马
阿拉斯加
等..

在 symfony 2.0 中，我使用 ChoiceListInterface.php 在我的表单中使用它。我只是写了这个：

```
<?php

namespace MyBundle\Form;

use Symfony\Component\Form\Extension\Core\ChoiceList\ChoiceListInterface;

class StateChoiceList implements ChoiceListInterface
{
    public function getChoices()
    {
        $lines = file('listes/us_states.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
        // fill the array
        $arr = array();
        foreach ($lines as $line) {
            $arr[$line] = $line;
        }
        return $arr;

    }
} 
```

但是现在在 ChoiceListInterface 中还有 7 个其他功能需要实现：

```
public function getValues();
public function getPreferredViews();
public function getRemainingViews();
public function getValuesForChoices(array $choices);
public function getIndicesForChoices(array $choices);
public function getIndicesForValues(array $values); 
```

我已经阅读了文档[http://api.symfony.com/2.1/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.html](http://api.symfony.com/2.1/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.html)但就我而言，我觉得不清楚，我真的不明白如何实施他们。

有人可以帮忙吗？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:29:36.167

您可以扩展[LazyChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/LazyChoiceList.php#L25)并实现[loadChoiceList()](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/LazyChoiceList.php#L137)方法，您可以在其中返回一个新的[ChoiceList](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.php#L36)对象，其中填充了从文件中读取的值。

# migration - 如何确保完成 Hazelcast 迁移

> ID：13257793
> 
> 赞同：2
> 
> 时间：2012-11-06T19:15:03.870
> 
> 标签：migration, cloud, cluster-computing, hazelcast

考虑以下场景。

有 2 个 Hazelcast 节点。一个停止，另一个在相当重的负载下运行。

现在，第二个节点出现了。应用程序启动，它的 Hazelcast 实例连接到第一个。Hazelcast 开始数据重新分区。对于 2 个节点，它本质上意味着 IMap 中的每个条目都被复制到新节点，并且两个节点被任意分配为主/备份。

**问题：** 如果在此过程中第一个节点被关闭，并且复制没有完全完成，则可能会丢失部分 IMap 内容和 ITopic 订阅。

**问题**：如何确保**重新分区过程已经完成**，并且关闭第一个节点是安全的？

（整个设置是为了在不停机的情况下启用软件更新，同时保留当前的应用程序状态）。

我尝试使用**getPartitionService().addMigrationListener(...)**但侦听器似乎没有连接到完整的迁移过程。相反，我为每个复制块调用了数十到数百个调用**migrationStarted()/migrationCompleted() 。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T06:56:18.070

1-当您正常关闭第一个节点时，关闭过程应等待（阻塞）直到数据安全备份。

```
hazelcastInstance.getLifecycleService().shutdown(); 
```

2- 如果您使用[Hazelcast 管理中心](http://hazelcast.com/mancenter.jsp)，它会在主屏幕中显示正在进行的迁移/重新分区操作计数。

# .htaccess - 如何将 domain.com 重定向到 domain.com/blog/

> ID：13257796
> 
> 赞同：0
> 
> 时间：2012-11-06T19:15:10.750
> 
> 标签：.htaccess, redirect

我想将我的博客从[http://designskew.com](http://designskew.com)重定向到[http://designskew.com/blog/](http://designskew.com/blog/)。

我搜索了很多 .htaccess 重定向方法，但没有任何效果。designskew.com 总是重定向到谷歌。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:18:32.777

正如我所见，它正在重定向

# javascript - 在 HighCharts 中，如何通过缩放获得固定的颜色渐变？

> ID：13257797
> 
> 赞同：1
> 
> 时间：2012-11-06T19:15:17.437
> 
> 标签：javascript, highcharts

我正在尝试获得如下所示的颜色渐变：值 0 = 绿色，值 20 = 黄色，值 40 = 红色。因此，我使用具有 2 或 3 个停止的线性梯度，具体取决于我的实际数据最大值是否超过 20。这是我可以让线性渐变在 HSL 类型颜色空间中移动的唯一方法。它工作得很好。问题是当我缩放时，线性渐变被重新应用到可能更小的比例。我希望黄色始终以 20 为中心，具有任何可能的缩放场景。现在，当我缩放时，黄色可能以一个小得多的值为中心。知道如何做到这一点吗？每次缩放时都必须更改渐变吗？这是代码：

```
 var data=env.client.data;
  var selected=env.client.selected;

  var max=_.max(data,function(slice){
    return(slice[1]);
  })[1];

  if(max>0){
    var stops=[
      [0,'hsla(120,50%,50%,0.5)']
    ];

    if(max>20){
      stops.push([20/max,'hsla(60,50%,50%,0.5)']);
      stops.push([1,'hsla('+Math.round(120-(120*(max/40)))+',50%,50%,0.5)']);
    }else{
      stops.push([1,'hsla('+Math.round(120-(60*(max/20)))+',50%,50%,0.5)']);
    }

    var chart=new Highcharts.Chart({
      chart:{
        height:250,
        renderTo:'chart',
        type:'areaspline',
        width:960,
        zoomType:'x'
      },
      legend:{
        enabled:false
      },
      plotOptions:{
        areaspline:{
          animation:false,
          fillColor:{
            linearGradient:{
              x1:0,
              y1:1,
              x2:0,
              y2:0
            },
            stops:stops
          },
          lineColor:'black',
          lineWidth:1,
          marker:{
            enabled:false,
            states:{
              hover:{
                enabled:true,
                radius:5
              }
            }
          },
          point:{
            events:{
              click:function(){
                var point=moment(this.x).utc();
                env.client.range.selected=point;
                $('#client-datetime').val(point.format('YYYY MMM DD, HH:mm'));
                _.publish('client date changed');
              }
            }
          },
          states:{
            hover:{
              lineWidth:1
            }
          }
        }
      },
      series:[{
        data:data,
        name:'Clients'
      }],
      title:{
        text:null
      },
      tooltip:{
        animation:false
      },
      xAxis:{
        maxZoom:12*60*60*1000,
        title:{
          text:null
        },
        type:'datetime'
      },
      yAxis:{
        max:max,
        min:0,
        minTickInterval:1,
        title:{
          text:null
        }
      }
    });
  }else{
    $('#chart').html('');
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:43:36.177

想通了这个问题。显然，如果数据集大于 300 点，则缩放视图仅使用最近的 300 点并重新绘制，从而影响渐变效果。幸运的是，这个大小可以通过cropThreshold 参数进行调整。我只是将它设置为我的数据集（2017）的大小，它工作得很好，虽然有点慢，因为它仍在渲染所有数据点，但它们中的大多数可能在可视区域之外，这是低效的，除了它保持我的渐变。

# jquery - 响应式肖像图像，怎么做？

> ID：13257799
> 
> 赞同：2
> 
> 时间：2012-11-06T19:15:22.460
> 
> 标签：jquery, wordpress, css

这个问题困扰了我一段时间。有大量关于响应式图像的教程和问答，但我还没有找到一个像样的，这可以解释我如何保持肖像图像的尺寸不拉伸到它们所在的硬币容器的宽度。

是）我有的：

我使用 WordPress，并使用脚本删除图像的宽度和高度：

```
add_filter( 'post_thumbnail_html', 'remove_thumbnail_dimensions', 10 );
add_filter( 'image_send_to_editor', 'remove_thumbnail_dimensions', 10 );

function remove_thumbnail_dimensions( $html ) {
    $html = preg_replace( '/(width|height)=\"\d*\"\s/', "", $html );
    return $html;
} 
```

然后我添加一个脚本，将我的附件放入一个 div 中（仅用于样式目的）。

```
add_filter('image_send_to_editor', 'wrap_my_div', 10, 8);

function wrap_my_div($html, $id, $caption, $title, $align, $url, $size, $alt){
    return '<div class="post-attachment">'.$html.'</div>';
} 
```

然后是 CSS：

```
img {
        width: 100%;
}

.post-attachment {
    width: 80%;
    margin: 0 auto;
} 
```

这对于风景图像非常有用，并且在移动设备上看起来很棒。但是如何保持纵向尺寸的图像，而不是缩放到 100% 容器的宽度？我知道，如果我声明了宽度：100% 并且我不希望某些图像是 100% 宽度，而是 100% 高度，这有点奇怪。

![在此处输入图像描述](../Images/261c82c8c27bc700c27d2037ab47856f.png)

如果没有 CSS 方式，那么可能有人可以向我推荐任何 jquery 插件（或 WP 插件，尽管我不想使用它们）？或者一些要挖掘的链接？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:07:41.330

而不是宽度，使用最大宽度：

```
img {
    max-width: 100%;
} 
```

这样，如果它们很小，它们将是它们的原始大小，但如果它们更大，它们将保持在封闭父级的边界内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:50:18.590

你不能把你的肖像图像包装到另一个容器中吗？

就像是

```
.imageBox {
    width: 50%;
    height: 100%;
    margin: 0 auto;
} 
```

如果您的响应式 CSS 设置正确，这应该与您的设计正确缩放 - 只需将宽度更改为您想要的图像宽度。

# html - 可以使用 css3 转换轮廓颜色

> ID：13257800
> 
> 赞同：6
> 
> 时间：2012-11-06T19:15:32.823
> 
> 标签：html, css

不能用 css3 过渡轮廓吗？

```
body{margin:10px;padding:0px;}
#tDiv{
    background-color:#999;
    width:500px; 
    height:500px;
    color:black;
   outline: 5px dashed #222; 
    -moz-transition: color 2s;
    -o-transition: color 2s;
    -webkit-transition: color 2s;
    transition: color 2s;
    -moz-transition: outline-color .7s ease-out;
    -o-transition: outline-color .7s ease-out;
    -webkit-transition: outline-color .7s ease-out;
    transition: outline-color .7s ease-out;
    -moz-transition: background-color .7s ease-out;
    -o-transition: background-color .7s ease-out;
    -webkit-transition: background-color .7s ease-out;
    transition: outline-background .7s ease-out;   
}
#tDiv:hover{
    color:green;
    background-color:gold;
    outline: 5px dashed magenta;
} 
```

[http://jsfiddle.net/loren_hibbard/uKGCc/](http://jsfiddle.net/loren_hibbard/uKGCc/)

这只是立即改变轮廓..

谢谢

​</p>

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T19:28:55.457

如果你想应用多个不同的转换，你必须将它们合并为一个规则（加上必要的前缀重复它们）：

```
-webkit-transition: color 2s, outline-color .7s ease-out, background-color .7s ease-out;
   -moz-transition: color 2s, outline-color .7s ease-out, background-color .7s ease-out;
     -o-transition: color 2s, outline-color .7s ease-out, background-color .7s ease-out;
        transition: color 2s, outline-color .7s ease-out, background-color .7s ease-out; 
```

示例：http: [//jsfiddle.net/UF3Ht/6/](http://jsfiddle.net/UF3Ht/6/)

[https://developer.mozilla.org/en-US/docs/CSS/transition-property](https://developer.mozilla.org/en-US/docs/CSS/transition-property)

```
transition:
   [<'transition-property'> || <'transition-duration'> || <'transition-timing-function'> || <'transition-delay'> 
[, [<'transition-property'> || <'transition-duration'> || <'transition-timing-function'> || <'transition-delay'>]]* 
```

当您多次使用同一个属性时，只会像往常一样应用最后一个：

```
transition: outline-color .7s ease-out;    /* this will be overridden */
transition: background-color .7s ease-out; /* this will be used */ 
```

# unit-testing - [Neo4j] 存储在文件系统中的 Impermanet 数据库

> ID：13257806
> 
> 赞同：0
> 
> 时间：2012-11-06T19:15:45.200
> 
> 标签：unit-testing, neo4j

我的 Neo4j-Test-Setup-Environment 和 org.neo4j.test.ImpermanentGraphDatabase 存在问题...我有一个类 TestGraphPopulator，用于为我的单元测试设置一些虚拟数据。

由于在我的测试中添加、删除、更新操作，我在通过 @Before 注释的 init-method 中的每个测试用例中填充图表。

但有时会有一些非常奇怪的行为。我的一些测试失败了，因为有或多或少的实体符合预期。在第二次或第三次等运行中，一切都很好，..或者不是。

而且，在我的项目的 /target 目录中，有一个文件夹 \target\test-data\impermanent-db 包含所有 Neo4J 数据库数据......

我不确定我的问题是什么结果，但不应该 ImpermanentGraphDatabase 只驻留在内存中？

对我来说，它看起来像一个错误，有人可以分享一些经验吗？这对我来说似乎很重要，也许其他人......

提前非常感谢！马库斯

PS：Neo4J 1.8，Spring Data Neo4J 2.1 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:57:35.447

这也确实发生在我身上。已[确认](https://github.com/neo4j/community/issues/874)是一个问题，并且最近已修复。我已确认使用 1.9-SNAPSHOT 时不会创建任何文件。

# eclipse - Chrome 中 GWT 2.5 SourceMaps 的 IDE 断点？

> ID：13257811
> 
> 赞同：0
> 
> 时间：2012-11-06T19:16:16.617
> 
> 标签：eclipse, gwt, google-chrome-devtools, source-maps

我已经开始使用 GWT 2.5 和 Eclipse 作为我的 IDE。在 Chrome 中使用调试器时，对源文件列表进行排序以设置我的断点是很麻烦的。更糟糕的是，我已经在 Eclipse 中打开了相关代码，现在我必须在 Chrome 中找到它。

有没有办法在 Eclipse 中设置断点，并在 Chrome 中使用它？

鉴于 SourceMaps 的存在，这似乎是一个自然的概念。如果它还不是 SourceMaps 规范的一部分，也许它应该是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:23:32.693

这在 Eclipse 中是不可能的（还没有？）

我被告知 JetBrains 正在为 IntelliJ IDEA 开发它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:20:47.187

如果您使用的是 Javascript，那么为什么不添加该行

```
debugger; 
```

到你的代码？它应该在该行暂停执行，您可以从 eclipse/您使用的任何 IDE 中执行此操作。

# asp.net-mvc-3 - 从 MVC 3 中的自定义 Authorize 属性访问操作方法参数

> ID：13257812
> 
> 赞同：3
> 
> 时间：2012-11-06T19:16:23.483
> 
> 标签：asp.net-mvc-3, security, authorize-attribute

我正在编写一个 MVC 3 应用程序，用户可以在其中登录并管理他们的数据。我想防止用户查看或篡改其他用户的数据。我的第一直觉是在每个动作方法中验证对相关对象的访问，如下所示：

```
public ActionResult ShowDetails(int objectId)
{
    DetailObject detail = _repo.GetById(objectId);
    if (detail.User.UserID != (Guid)Membership.GetUser().ProviderUserKey)
    {
        return RedirectToAction("LogOff", "Account");
    }
} 
```

这很好用，但我认为将对象授权代码放入从 AuthorizeAttribute 派生的自定义 Authorize 属性中可能会更好，然后我可以将其应用于控制器。不幸的是，我无法从我的自定义 Authorize 属性中找到访问操作方法参数的方法。相反，我发现访问传入 objectId 的唯一方法是检查 httpContext.Request 或 filterContext.RequestContext.RouteData.Values：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    private int _objectId = 0;
    private IUnitOfWork _unitOfWork;

    public MyAuthorizeAttribute(IUnitOfWork uow)
    {
        _unitOfWork = uow;
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        int.TryParse((string) filterContext.RequestContext.RouteData.Values["id"], out _objectId);
        base.OnAuthorization(filterContext);
    }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        int objectId = 0;
        if (httpContext.Request.Params.AllKeys.Contains("id", StringComparer.InvariantCultureIgnoreCase))
        {
            int.TryParse(httpContext.Request[idKey], out objectId);
        }

        if (objectId != 0)
        {
            if (!IsAuthorized(objectId, httpContext.User.Identity.Name))
            {
                return false;
            }
        }

        if (_objectId != 0)
        {
            if (!IsAuthorized(objectId, httpContext.User.Identity.Name))
            {
                return false;
            }
        }

        return base.AuthorizeCore(httpContext);
    }

    private bool IsAuthorized(int objectId, string userName)
    {
        DetailObject detail;
        detail = _unitOfWork.ObjectRepository.GetById(objectId);

        if (detail == null)
        {
            return false;
        }

        if (userName != detail.User.UserName)
        {
            return false;
        }

        return true;
    }
} 
```

我发现这种方法非常笨拙。我真的不想在 RouteData 或 Request 对象中闲逛；能够访问操作方法参数会更干净，因为模型绑定已经从 RouteData 和 Request 中提取了相关数据。

我知道我可以从自定义操作过滤器访问操作方法参数（详见[此处](https://stackoverflow.com/questions/12203329/mvc-action-filters-using-parameters-passed-to-the-for-actionresult?answertab=votes#tab-top)），但数据授权代码不应该放在授权过滤器中吗？我看到的授权过滤器示例越多，我就越觉得它们仅用于处理角色。

我的主要问题是：如何从我的自定义授权属性访问操作方法参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-04T14:09:02.220

回答您的主要问题：不，遗憾`AuthorizationContext`的是不提供对操作参数的访问。

首先，您可以使用`ValueProvider`to 不必处理 id 是路由的一部分还是查询参数或发布的 HTTP，如下所示：

```
public override void OnAuthorization(AuthorizationContext filterContext)
{
    string id = filterContext.Controller.ValueProvider.GetValue("id").AttemptedValue;
    ...
} 
```

这适用于简单的数据类型并且引入的开销很小。然而，一旦你开始为你的动作参数使用自定义模型绑定器，你必须继承你的过滤器`ActionFilterAttribute`以避免双重绑定：

```
[MyFilter]
public ActionResult MyAction([ModelBinder(typeof(MyModelBinder))] MyModel model)
{
    ...
}

public class MyFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var model = filterContext.ActionParameters["model"] as MyModel;
        ...
    }
} 
```

虽然出于授权目的从语义上继承`AuthorizeAttribute`听起来更好，但没有其他理由这样做。此外，我发现使用`ActionFilterAttribute`起来更容易，因为您只需覆盖一个方法，而不是为后续方法保留状态。

# php - PHP循环curl请求一一

> ID：13257814
> 
> 赞同：7
> 
> 时间：2012-11-06T19:16:24.770
> 
> 标签：php, loops, curl, for-loop, foreach

如何使一个`foreach`或一个`for`循环仅在收到 curl 响应时运行..

例如：

```
for ($i = 1; $i <= 10; $i++) {
 $ch = curl_init();
 curl_setopt($ch,CURLOPT_URL,"http://www.example.com");

 if(curl_exec($ch)){ // ?? - if request and data are completely received
   // ?? - go to the next loop
 }
 // DONT go to the next loop until the above data is complete or returns true
} 
```

我不希望它在没有收到当前 curl 请求数据的情况下移动到下一个循环.. 一个接一个，所以基本上它会在第一次打开 url，等待请求数据，如果匹配或实现然后进入下一个循环，

您不必为“卷曲”部分而烦恼，我只想让循环一个一个地移动（给它一个特定的条件或其他东西）而不是一次全部移动

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T19:21:08.047

循环应该已经以这种方式工作，因为您使用的是阻塞 cURL 接口而不是 cURL Multi 接口。

```
$ch = curl_init();
for ($i = 1; $i <= 10; $i++)
{
    curl_setopt($ch, CURLOPT_URL, "http://www.example.com");
    $res = curl_exec($ch);
    // Code checking $res is not false, or, if you returned the page
    // into $res, code to check $res is as expected

    // If you're here, cURL call completed. To know if successfully or not,
    // check $res or the cURL error status.

    // Removing the examples below, this code will hit always the same site
    // ten times, one after the other.

    // Example
    if (something is wrong, e.g. False === $res)
        continue; // Continue with the next iteration

    Here extra code to be executed if call was *successful*

    // A different example
    if (something is wrong)
        break; // exit the loop immediately, aborting the next iterations

    sleep(1); // Wait 1 second before retrying
}
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:22:47.900

`continue`控制结构应该是您正在寻找的：

> `continue`在循环结构中使用以跳过当前循环迭代的其余部分并在条件评估处继续执行，然后开始下一次迭代。

[http://php.net/manual/en/control-structures.continue.php](http://php.net/manual/en/control-structures.continue.php)

```
for ($i = 1; $i <= 10; $i++) {
  $ch = curl_init();
  curl_setopt($ch,CURLOPT_URL,"http://www.example.com");

  if(curl_exec($ch)){ // ?? - if request and data are completely received
    continue; // ?? - go to the next loop
  }
  // DONT go to the next loop until the above data is complete or returns true
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T19:26:16.717

`curl`在调用完成之前，您的代码（原样）不会移动到下一次迭代。

需要考虑的几个问题

*   您可以设置更高的超时时间`curl`以确保没有通信延迟。`CURLOPT_CONNECTTIMEOUT`, `CURLOPT_CONNECTTIMEOUT_MS`(毫秒), `CURLOPT_DNS_CACHE_TIMEOUT`,`CURLOPT_TIMEOUT`和`CURLOPT_TIMEOUT_MS`(毫秒) 可用于增加超时。0 使`curl`任何这些超时都无限期地等待。
*   如果您的`curl`请求由于某种原因失败，您可以放一个`exit`那里停止执行，这样它就不会移动到下一个 URL。
*   如果您希望脚本在第一次失败后继续，您可以只记录结果（在失败的请求之后）并让它在循环中继续。检查日志文件将为您提供有关发生情况的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T19:20:31.100

`break`您可以使用以下关键字跳出循环：

```
foreach ($list as $thing) {
    if ($success) {
        // ...
    } else {
        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T19:21:19.493

```
for($i = 1; $i <= 10; $i++) {
 $ch = curl_init();
 curl_setopt($ch,CURLOPT_URL,"http://www.example.com");

 if(curl_exec($ch)){ // ?? - if request and data are completely received
   continue;
 }else{
   break;
 }
 // DONT go to the next loop until the above data is complete or returns true
} 
```

或者

```
for($i = 1; $i <= 10; $i++) {
     $ch = curl_init();
     curl_setopt($ch,CURLOPT_URL,"http://www.example.com");

     if(curl_exec($ch)===false){ // ?? - if request and data are completely received
       break;
     }
 } 
```

# mysql - 尝试定义 FOREIGN KEY 时出现“表中不存在键列”

> ID：13257815
> 
> 赞同：7
> 
> 时间：2012-11-06T19:16:26.363
> 
> 标签：mysql, foreign-keys, primary-key

我正在尝试设置一个创建 5 个表的 MySQL 脚本。在三个表中，有一个`FOREIGN KEY`，并且对于所有三个表都会出现相同的错误：

```
Error Code: 1072\. Key column ... doesn't exist in table 
```

而 ... 是`Gebaeude`,`Dept_Name`和`Mat_Nr`

这是脚本

```
use cs261_24;

drop table if exists Professor;
drop table if exists Departement;
drop table if exists Gebaeude;
drop table if exists Student;
drop table if exists Pruefung;

CREATE TABLE Gebaeude (
                        Gebaeude    VARCHAR(20) NOT NULL PRIMARY KEY,
                        Hauswart    VARCHAR(20) NOT NULL,
                        Adresse     VARCHAR(20) NOT NULL
)engine = innodb;

CREATE TABLE Professor  (
                        P_ID        INTEGER PRIMARY KEY CHECK (P_ID > 0),
                        P_Name      VARCHAR(20) NOT NULL,
                        Dept_Name   VARCHAR(20) NOT NULL,
                        Raum        INTEGER UNIQUE CHECK (Raum > 0),
                        Tel         INTEGER(10) UNIQUE CHECK (Tel > 210000000),
                        FOREIGN KEY (Gebaeude) REFERENCES Gebaeude (Gebaeude) 
)engine = innodb;

CREATE TABLE Departement (
                        Dept_Name   VARCHAR(20) NOT NULL PRIMARY KEY,
                        Vorsteher   VARCHAR(20) NOT NULL
)engine = innodb;

CREATE TABLE Student (
                        Mat_Nr      INTEGER(8) PRIMARY KEY CHECK (Mat_Nr > 0),
                        S_Name      VARCHAR(20) NOT NULL,
                        Semester    INTEGER CHECK(Semester > 0),
                        FOREIGN KEY (Dept_Name) REFERENCES Departement (Dept_Name) 
)engine = innodb;

CREATE TABLE Pruefung (
                        Pr_ID       INTEGER PRIMARY KEY CHECK(Pr_ID > 0),
                        Fach        VARCHAR(20) NOT NULL,
                        Pruefer     VARCHAR(20) NOT NULL,
                        Note        FLOAT CHECK (Note >= 1 AND Note <= 6),
                        FOREIGN KEY (Mat_Nr) REFERENCES Student (Mat_Nr)
)engine = innodb; 
```

为什么？我使用 MySQL Workbench，我清楚地看到创建的表，加上特定的列被标记为主键！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T19:26:13.037

你做错了，看看这个例子

[http://www.sqlfiddle.com/#!2/a86cf](http://www.sqlfiddle.com/#!2/a86cf)

你的 FK 线应该更像这样：

`FOREIGN KEY (field_that_will_be_Fk) REFERENCES Table_to_reference (field_to_reference)`

即=

```
CREATE TABLE Gebaeude (
                        Gebaeude    VARCHAR(20) NOT NULL PRIMARY KEY,
                        Hauswart    VARCHAR(20) NOT NULL,
                        Adresse     VARCHAR(20) NOT NULL
)engine = innodb;

CREATE TABLE Professor  (
                       Gebaeude_FK varchar(20) NOT NULL,
                        P_ID        INTEGER PRIMARY KEY CHECK (P_ID > 0), 
                        P_Name      VARCHAR(20) NOT NULL,
                        Dept_Name   VARCHAR(20) NOT NULL,
                        Raum        INTEGER UNIQUE CHECK (Raum > 0),
                        Tel         INTEGER(10) UNIQUE CHECK (Tel > 210000000),
                        FOREIGN KEY (Gebaeude_FK) REFERENCES Gebaeude (Gebaeude) 
)engine = innodb; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:21:57.053

您必须先在每个表中创建列，然后才能将它们限制为外键。

请参阅此链接以供参考：[链接](https://stackoverflow.com/questions/48772/how-do-i-create-a-foreign-key-in-sql-server)

# django - Django 导入错误：没有名为模型的模块

> ID：13257818
> 
> 赞同：7
> 
> 时间：2012-11-06T19:16:38.687
> 
> 标签：django, django-models, django-views

我不断收到错误`Could not import movies.views. Error was: No module named models`

这是我的回溯：

```
 Environment:

    Request Method: GET
    Request URL: http://localhost:8000/movies/awesome-movie/

    Django Version: 1.3.1
    Python Version: 2.7.3
    Installed Applications:
    ['django.contrib.auth',
     'username_patch',
     'django.contrib.contenttypes',
     'django.contrib.sessions',
     'django.contrib.sites',
     'django.contrib.messages',
     'django.contrib.staticfiles',
     'django.contrib.admin',
     'django.contrib.flatpages',
     'south',
     'tagging',
     'tagging_autocomplete',
     'accounts',
     'movies',
     'tracking',
     'djcelery',
     'pagination']
    Installed Middleware:
    ('django.middleware.common.CommonMiddleware',
     'django.contrib.sessions.middleware.SessionMiddleware',
     'django.middleware.csrf.CsrfViewMiddleware',
     'django.contrib.auth.middleware.AuthenticationMiddleware',
     'django.middleware.locale.LocaleMiddleware',
     'django.contrib.messages.middleware.MessageMiddleware',
     'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
     'pagination.middleware.PaginationMiddleware')

    Traceback:
    File "/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
      101\.                             request.path_info)
    File "/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
      252\.                     sub_match = pattern.resolve(new_path)
    File "/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
      252\.                     sub_match = pattern.resolve(new_path)
    File "/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
      158\.             return ResolverMatch(self.callback, args, kwargs, self.name)
    File "/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py" in _get_callback
      167\.             raise ViewDoesNotExist("Could not import %s. Error was: %s" % (mod_name, str(e)))

    Exception Type: ViewDoesNotExist at /movies/awesome-movie/
    Exception Value: Could not import movies.views. Error was: No module named models 
```

我不知道为什么我有这个错误。我的代码如下...

我有一个名为 django 的应用程序`tracking`和另一个名为`movies`. 我有一个`tracking.py`在`tracking`应用程序中调用的 python 文件，它包含以下代码：

**电影库/tracking/tracking.py**

```
from movies.models import Movie
from tracking.models import MovieView

import os
import base64

def tracking_id(request):
    try:
        return request.session['tracking_id']
    except KeyError:
        request.session['tracking_id'] = base64.b64encode(os.urandom(36))
        return request.session['tracking_id']

def log_movie_view(request, movie):
    t_id = tracking_id(request)
    try:
        v = MovieView.objects.get(tracking_id=t_id, movie=movie)
        v.save()
    except MovieView.DoesNotExist:
        v = MovieView()
        v.movie = movie
        v.ip_address = request.META.get('REMOTE_ADDR')
        v.tracking_id = t_id
        v.user = None
        if request.user.is_authenticated():
            v.user = request.user
        v.save() 
```

以上是非常基本的东西。我`views.py`在我的`movies`应用程序中使用了 tracking.py 文件：

**电影库/电影/views.py**

```
@login_required
def movie_details(request, slug, template_name="movies/movie_detail.html"):
    movie = get_object_or_404(Movie, slug=slug)
    movie.tracking_id = tracking.tracking_id(request)
    movie.save()
    tracking.log_movie_view(request, movie)
    context = RequestContext(request, {'movie': movie })
    if movie:
        try:
            screener = movie.moviemedia_set.get(movie_type='screener')
            .... continued 
```

**更新：**

这是filmlibrary/tracking/models.py的内容

```
from django.db import models
from django.contrib.auth.models import User

from movies.models import Movie

class PageView(models.Model):
    class Meta:
        abstract = True

    date = models.DateTimeField(auto_now=True)
    ip_address = models.IPAddressField()
    user = models.ForeignKey(User, null=True)
    tracking_id = models.CharField(max_length=50, default='')

class MovieView(PageView):
    movie = models.ForeignKey(Movie) 
```

该错误似乎来自`from tracking.models import MovieView`tracking.py 文件中的导入行，我不知道为什么。一旦我注释掉该行，错误就会消失，但是我当然会遇到有关 MovieView 的新错误，而这并不像预期的那样存在。我认为 tracking.py 中的导入行没有任何问题。

有人对我收到该错误的原因以及如何解决此问题有任何建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T20:41:17.670

你能试一下吗

**从模型导入 MovieView**

代替

**从 tracking.models 导入 MovieView**

原因是models.py和tracking.py都在同一个app文件夹“tracking”中，你不需要写tracking.models，这会让Django认为你在tracking目录中有一个名为models的文件夹。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-21T19:37:29.773

尽管在某些情况下这是一个很好的解决方案，但此错误也可能是由于应用程序名称与内置应用程序冲突引起的。

我知道我们的团队遇到了这个错误，这是因为实际的应用程序名称。这一点也很重要，因为如果是这种情况，您将无法将模型拉入其他应用程序。

```
#You cannot use this format out of scope
from models import Test

#You can use this both in and out of scope in Django
from myapp.models import Test 
```

如果第二个示例在您的 Django 项目中不起作用，则您可能使用了冲突的应用程序名称。无法使用的内置应用程序的好例子包括（但不限于）“测试”和“管理员”。

我会告诫不要使用创可贴修复并仔细调查您的应用名称。

# javascript - 执行脚本一段时间后如何暂停javascript然后恢复？

> ID：13257820
> 
> 赞同：2
> 
> 时间：2012-11-06T19:16:45.230
> 
> 标签：javascript

当用户翻转缩略图时，我正在尝试使用图像更改制作 js 画廊。我已经成功完成并使用css3淡入动画进行图像更改，它工作正常，但如果我将光标悬停在thumb1上，不要等待动画完成并在另一个缩略图上悬停，图像会在没有动画的情况下更改。很难解释，因为我的英语不是最好的，所以我会给你我的代码。

```
 <?xml version="1.0" encoding="utf-8" standalone="no"?>
<?xml-stylesheet type="text/css" href="#css21" media="screen"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="xhtml10S" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<meta http-equiv="Window-target" content="_top" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>Untitled-1</title>
<style id="css21" type="text/css" media="screen">
html, body {
color : #405060;
font : normal normal normal 95%/1.5 Verdana, Tahoma, Arial, san-serif;
height : auto;
margin : 0;
padding : 0;
text-align : center;
width : auto; }
body {
background-color : #000000; }
div {
border : none;
margin : 0;
padding : 0; }
div#gscreen {
float : none;
height : 250px;
width : 100%;
clear : both;

-webkit-transition: background 1500ms ease-in 0ms; /* property duration timing-function delay */
-moz-transition: background 1500ms ease-in 0ms;
-o-transition: background 1500ms ease-in 0ms;
transition: background 1500ms ease-in 0ms;  }
</style>
<script type="text/javascript">

var imageGallery = ( function() {

var xelem = ( function( xTag ) {
var ua = ((( ie = document.all.tags( xTag )) && !!!( ff = document.getElementsByTagName( xTag ))) ? 1 : 0 );
var xObj = null || { 0 : ff, 1 : ie }[ ua ];
return xObj;
} );
return function imageGallery( tagX ) {
var xItem = xelem("div");
var xScreen = xItem["gscreen"];
var xImg = xelem( tagX );
var iLen = xImg.length;
for ( i = 0; !!( xImg[ i ] ); i++ ) {
xImg[ i ].onmouseover = function() {
var xIndex = Number( this.id.match(/\d+/)[ 0 ] );
xScreen.style.background = " url(" + this.src + ") no-repeat top center";

}
}
}
} )();
onload = function() {
imageGallery("img")
}
</script>
</head>
<body>
<div id="gscreen"></div>

<img id="i0" src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSMMlTzBMWSeD6IrQCLTT7urbpXORjY_2vqmA_mFj6OJcsfsH-yuw" height="100" width="200" style="background-image='url(https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSMMlTzBMWSeD6IrQCLTT7urbpXORjY_2vqmA_mFj6OJcsfsH-yuw)'" alt="test images" />
<img id="i1" src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSlGvpoCsCgGcX74IWG5YNmjULh1Q428frxtmabTCNM_aVKFGH9" style="background-image='url(https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSMMlTzBMWSeD6IrQCLTT7urbpXORjY_2vqmA_mFj6OJcsfsH-yuw)'" height="100" width="200" alt="test images" />
<img id="i2" src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQ3DluQXJW-4stVrHlArRc6gZnuxqmKKyheZsDWt-kGjvfjj43M" height="100" width="200" style="background-image='url(https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSMMlTzBMWSeD6IrQCLTT7urbpXORjY_2vqmA_mFj6OJcsfsH-yuw)'" alt="test images" />
<img id="i3" src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQDC56QxLfOgZyrX96BfPveif-dKlrDIwsB45uGlL3XicDL10EqlA" height="100" width="200" style="background-image='url(https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSMMlTzBMWSeD6IrQCLTT7urbpXORjY_2vqmA_mFj6OJcsfsH-yuw)'" alt="test images" />

</body>
</html> 
```

所以，我想如果我在执行“onmouseover”后暂停 javascript 1500 毫秒，用户将无法在翻转另一个缩略图时再次执行该功能，我该怎么做？或者也许有更多选项来修复图像更改效果？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:20:01.243

您可以使用[setTimeout 功能](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

例子：

```
// run this code after 1500ms
setTimeout(function () {
   // this code will run later;
   alert("Hello World");
},1500); 
```

**更新：**在你的情况下

```
xImg[ i ].onmouseover = function() {
    var that = this;
    setTimeout(function () {
        var xIndex = Number( that.id.match(/\d+/)[ 0 ] );
        xScreen.style.background = " url(" + that.src + ") no-repeat top center";
    },1500);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:22:56.477

我会给`imageGallery`一个属性，比如`imageGallery.isReady = true;`当函数启动时，将属性设置为`false`. 然后，在你的功能结束时，做`setTimeout(function() {imageGallery.isReady = true;}, 1500);`

当函数被调用时，只要检查如果`imageGallery.isReady = true;`不是，就不要执行函数；如果是，执行它。

编辑：或者，您可以在函数启动时删除事件侦听器，然后在之后再次添加它`setTimeout();`

# javascript - Facebook SDK 3.1 FacebookConnectPlugin.m 2 弃用

> ID：13257822
> 
> 赞同：0
> 
> 时间：2012-11-06T19:16:47.120
> 
> 标签：javascript, ios, cordova, mobile, facebook-ios-sdk

我将 facebookSDK 从 3.0 升级到 3.1，但我无法修复 2 个弃用...

1\. ..../FacebookConnectPlugin.m:202:14: 'reauthorizeWithPermissions:behavior:completionHandler:' 已弃用

2\. ..../FacebookConnectPlugin.m:248:14: 'openActiveSessionWithPermissions:allowLoginUI:completionHandler:' 已弃用

有人有想法吗？

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:48:55.410

您可以忽略此警告。对于 3.1，您应该拆分读取和发布权限。为了向后兼容，如果您选择不将其拆分，您将走上使用已弃用方法的道路。如果仅单独请求读取或发布权限，则不会调用此代码。

# ftp - 无法获取使用 fopen 创建的文件

> ID：13257823
> 
> 赞同：0
> 
> 时间：2012-11-06T19:16:53.630
> 
> 标签：ftp, download, fopen

我已经用 fopen 创建了一个文件

```
 $string = '<?php
    define ("DB_HOST", "'. $_POST["dbhost"]. '");
    define ("DB_USER", "'. $_POST["dbuname"]. '");
    define ("DB_PASS","'. $_POST["dbpass"]. '");
    define ("DB_NAME","'. $_POST["dbname"]. '")
    ?>';
        $confile = "../lib/con.php";
        if (!file_exists($confile)) {
            $fp = fopen($confile, "x") or die("can't open file ".$confile);
            fwrite($fp, $string);
            fclose($fp);
        } else {
            $fp = fopen($confile, "w") or die("can't open file ".$confile);
            fwrite($fp, $string);
            fclose($fp);                
        } 
```

但是现在如果我尝试使用 Dreamweaver 或 Filezilla 下载文件，除非我重命名它，否则它不会下载该文件。谁能弄清楚我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:53:02.613

在 Web 服务器的意义上，Con 对于某些 Web 主机来说被认为是一种保留，并且当写入名为 con 的文件时，它有时会失败，如果您将文件重命名为 conn.php 它应该可以工作。

# iphone - 我应该如何替换主窗口的 rootViewController？

> ID：13257824
> 
> 赞同：0
> 
> 时间：2012-11-06T19:16:56.320
> 
> 标签：iphone, ios, ipad

我正在构建一个应用程序，该应用程序在加载应用程序时会进行大量设置。因此，我有一个加载视图，在设置发生时向用户显示一些信息......

```
MyLoadingViewController *loadingViewController = [[MyLoadingViewController alloc] init];
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.window.rootViewController = loadingViewController;
[self.window makeKeyAndVisible];
.
.
//Setup code happens here
.
.
MyHomeViewController *homeViewController = [[MyHomeViewController alloc] init];
self.window.rootViewController = homeViewController; 
```

设置代码完成后，我想转换到我的主屏幕。将 rootVewController 设置为新的主视图控制器是进行这种转换的正确方法吗？

非常感谢你的智慧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:22:26.340

是的，这是一个不错的方法——你不会有任何动画，但它应该可以正常工作。loadingViewController 将在您切换根视图控制器后被释放——如果这不是您想要的，那么您应该创建一个指向它的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:10:53.120

我有时会通过让执行所有加载的 ViewController 在加载时在屏幕上显示与 default.png 完全相同的图像来作弊，然后在完成后对其进行动画处理。

例如，在我的 LoginViewController 中，我首先在 viewDidLoad 中显示默认图像，联系服务器进行自动登录，然后在应用程序登录后淡出图像。用户永远不会注意到，因为一旦应用程序准备就绪，他只会看到默认图像淡出。

# python - 有效安排大学课程

> ID：13257826
> 
> 赞同：14
> 
> 时间：2012-11-06T19:17:07.110
> 
> 标签：python, algorithm, scheduling

我目前正在开发一个网站，该网站将允许我大学的学生根据他们想参加的课程自动生成有效的时间表。

在网站本身工作之前，我决定解决如何有效安排课程的问题。

一些澄清：

1.  我们大学的每门课程（我假设在其他每所大学）都包含一个或多个部分。因此，例如，微积分 I 目前有 4 个部分可用。这意味着，根据部分的数量，以及课程是否有实验室，这会极大地影响调度过程。

2.  我们大学的课程使用学科缩写和课程代码的组合来表示。在微积分 I 的情况下：数学 1110。

3.  CRN 是一个部分的唯一代码。

4.  我就读的大学不是混合的，这意味着男性和女性在（几乎）不同的校区学习。我的意思几乎是校园一分为二。

5.  datetimes 和 timeranges 字典旨在减少对 datetime.datetime.strptime() 的调用，这是一个真正的瓶颈。

我的第一次尝试包括算法不断循环，直到找到 30 个时间表。通过从输入的课程中随机选择一个部分，然后尝试从其余课程中放置部分以尝试构建有效的时间表来创建时间表。如果不是所有的课程都符合时间表，即存在冲突，则时间表被取消，循环继续。

显然，上述解决方案是有缺陷的。该算法运行时间过长，并且过于依赖随机性。

第二种算法与旧算法完全相反。首先，它使用 itertools.product() 生成所有可能的计划组合的集合。然后它遍历时间表，划掉任何无效的。为了确保分类的部分，计划组合在被验证之前会被打乱（random.shuffle()）。同样，涉及到一些随机性。

经过一些优化，我能够让调度程序在 1 秒内运行，平均安排由 5 门课程组成。这很好，但是一旦您开始添加更多课程，问题就开始了。

给你一个想法，当我提供一组输入时，可能的组合数量非常大，以至于 itertools.product()*不会*在合理的时间内终止，并在此过程中占用 1GB 的 RAM。

显然，如果我要将此作为一项服务，我将需要一个更快、更有效的算法。在网上和 IRC 中出现了两个：动态编程和遗传算法。

动态规划不能应用于这个问题，因为如果我正确理解这个概念，它涉及将问题分解成更小的部分，单独解决这些部分，然后将这些部分的解决方案组合在一起形成一个完整的解决方案。据我所知，这不适用于这里。

至于遗传算法，我不太了解，甚至无法开始理解如何在这种情况下应用它。我也明白，对于一个非常大的问题空间，GA 会更有效，而这并不是*那么*大。

我有什么选择？我可以采取一种相对容易理解的方法来解决这个问题吗？还是我应该坚持我所拥有的，并希望没有多少人决定下学期选修 8 门课程？

我不是一个伟大的作家，所以对于问题中的任何含糊之处，我深表歉意。请随时要求澄清，我会尽力提供帮助。

这是完整的代码。

[http://bpaste.net/show/ZY36uvAgcb1ujjUGKA1d/](http://bpaste.net/show/ZY36uvAgcb1ujjUGKA1d/)

注意：很抱歉使用了误导性标签（调度）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T19:35:20.447

Scheduling is a very famous [constraint satisfaction problem](http://en.wikipedia.org/wiki/Constraint_satisfaction_problem) that is generally [NP-Complete](http://en.wikipedia.org/wiki/NP-complete). A lot of work has been done on the subject, even in the same context as you: [Solving the University Class Scheduling Problem Using Advanced ILP Techniques](http://www.aloul.net/Papers/faloul_sch_gcc07.pdf). There are even [textbooks](http://books.google.com/books/about/Planning_Scheduling_And_Constraint_Satis.html?id=gmN57JsdvjUC) on the subject.

People have taken many approaches, including:

*   [Dynamic programming](http://en.wikipedia.org/wiki/Dynamic_programming)
*   [Genetic algorithms](http://en.wikipedia.org/wiki/Genetic_algorithm)
*   [Neural networks](http://en.wikipedia.org/wiki/Artificial_neural_network)

You need to reduce your problem-space and complexity. Make as many assumptions as possible (max amount of classes, block based timing, ect). There is no silver bullet for this problem but it should be possible to find a near-optimal solution.

Some semi-recent publications:

*   [QUICK scheduler a time-saving tool for scheduling class sections](http://dl.acm.org/citation.cfm?id=1099435.1099503&coll=DL&dl=GUIDE&CFID=194497662&CFTOKEN=57250293)
*   [Scheduling classes on a College Campus](http://dl.acm.org/citation.cfm?id=360387.360403&coll=DL&dl=GUIDE&CFID=194497662&CFTOKEN=57250293)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T19:32:18.527

你读过任何关于基因编程的东西吗？其背后的想法是，您让您想要解决的“事情”自行发展，直到它发展为可能的最佳解决方案。

您生成一千个计划，其中通常为零是在正确方向有效的任何地方。接下来，您随机更改“一些”课程。从这些新的时间表中，您可以根据您根据时间表的“优点”给出的评级选择一些最好的时间表。接下来，通过结合两个时间表上的一些课程，让它们重现。你最终得到了一千个新的时间表，但它们都比你原来的好一点点。让它重复直到您满意为止，然后从您生成的最后一千个中选择具有最高评分的时间表。

我承认，这涉及到随机性，但是无论您让算法运行多长时间，时间表都会越来越好。就像现实生活和生物一样，适者生存，可以查看同一种时间表的不同一般“线程”，这与生成的另一个线程差不多。两种截然不同的时间表最终可以通过杂交来“对抗”它。

一个涉及学校时间表和基因编程的项目：http: [//www.codeproject.com/Articles/23111/Making-a-Class-Schedule-Using-a-Genetic-Algorithm](http://www.codeproject.com/Articles/23111/Making-a-Class-Schedule-Using-a-Genetic-Algorithm)

我认为他们很好地解释了您的需求。

最后一点：我认为这是一个非常有趣的项目。制作起来相当困难，但一旦完成，很高兴看到您的解决方案不断发展，就像现实生活一样。祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T20:13:52.903

您当前生成部分组合的方式可能会抛出大量组合，这些组合被多个课程之间的冲突排除在外。我认为你可以通过首先为两门课程生成部分的产品来减少需要处理的组合数量。消除该组中的冲突，然后介绍第三门课程的部分。再次消除，然后引入第四个，依此类推。随着所选课程数量的增加，所需的处理时间应该会呈线性增长。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T19:32:43.933

这是一个难题。如果你用谷歌搜索“课程安排问题论文”之类的东西，你会发现很多参考资料。遗传算法 - 不，动态规划 - 是的。GA 比标准 DP 算法更难理解和实施。通常开箱即用 GA 的人不了解标准技术。做一些研究，你会发现不同的算法。您也许可以找到一些实现。想出自己的算法比花一些精力理解 DP 要困难得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-13T18:50:06.497

您描述的问题是约束满足问题。我的方法如下：

*   检查课程之间是否有任何不兼容，如果有，将它们记录为约束或弧
*   虽然没有找到解决方案：
    *   选择约束较少的课程（即与其他课程的不兼容性较少）
    *   运行 AC-3 算法以减少搜索空间

我已经尝试过这种解决数独问题的方法，它奏效了（在不到 10 秒的时间内解决了世界上最难的数独问题）

# c# - 如何从 Visual Studio 即时窗口的列表中运行通用查找方法？

> ID：13257835
> 
> 赞同：0
> 
> 时间：2012-11-06T19:18:01.843
> 
> 标签：c#, .net, generics

我只想调试从即时窗口调用查找，可以吗？

```
 Customer found = listOfCustomers.Find(
                delegate(Customer cu)
                {
                    return cu.Name.ToLower().Contains("adam");
                }
            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:33:32.293

不幸的是，在即时窗口中，您不能调用 lambda 表达式`(obj => obj.something == something)`或匿名方法`(delegate () { })`。

您可能想要添加一些单元测试来测试您的解决方案，或者使用包含您的示例代码的方法创建一个小的 Helper 类并从即时窗口运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:06:42.277

正如许多其他人所指出的，您不能使用即时窗口来执行此操作。我确实有另一个可能对你有用的建议。我一直都在使用它，它是我长期以来使用过的最好的工具。

[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)是 Microsoft 的一个项目，它向开发人员公开 C# 和 VB.NET 编译器。出于许多其他原因，这很酷，但其中一个特别适合您的需求。它包括一个 C# 交互窗口。

虽然它是 CTP（甚至还没有发布测试版），但我发现它相当稳定。2012 年 6 月的 CTP 支持 VS2010，而 2012 年 9 月的 CTP*仅*支持VS2012。

您可以使用该指令引用其他 DLL（系统和项目）`#r`，然后使用普通 C# 代码并插入。它支持几乎所有的语言特性（我认为 async/await、PInvoke、动态和其他一些东西不支持）。这是它的输出示例。

```
Microsoft (R) Roslyn C# Compiler version 1.1.20524.4
Loading context from 'CSharpInteractive.rsp'.
Type "#help" for more information.
> var strarr = new[] { "a", "b", "c", "d", "e", "f", "g", "h" };
> strarr
string[8] { "a", "b", "c", "d", "e", "f", "g", "h" }
> strarr.TakeWhile(s => s != "e")
TakeWhileIterator { "a", "b", "c", "d" }
> #r "D:\SVN\Lucene.Net\Trunk\bin\Lucene.Net.dll"
> using Lucene.Net.Store;
> var d = new RAMDirectory();
> d.Dispose()
<void>
> strar
(1,1): error CS0103: The name 'strar' does not exist in the current context
> #reset
Resetting execution engine
Loading context from 'CSharpInteractive.rsp'.
> 
```

如您所见，您可以使用 lambda（也可以使用匿名方法）以及其他语言功能。我还引用了我计算机上的 Lucene.Net dll，然后能够导入命名空间并使用这些类型。您也可以引用整个项目，我右键单击它并选择“Reset Interactive from Project”，但我发现它有时会抛出错误并且不起作用。

如果您正在寻找一种无需运行调试器即可使用代码的工具，我建议您研究一下 Roslyn。

# java - 在参数化的 junit 测试用例中运行特定的测试用例

> ID：13257836
> 
> 赞同：0
> 
> 时间：2012-11-06T19:18:27.177
> 
> 标签：java, junit

我创建了一个参数化的 JUnit 测试用例。在这个测试用例中，我在 Object[][] 中定义了测试用例，每一行代表一个测试用例，所有测试用例将一次运行，现在我想要的是一种只运行一个测试用例的方法。假设我想运行第三个测试用例，所以我想告诉 junit 只考虑对象 [] [] 的第二行？有没有办法做到这一点？

感谢您的回复。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:28:02.153

不知道你的意思，但有几个选项：

1.  使用 Theories 而不是 Parameterized 这样您就可以将一些测试标记为`@Test`，而将其他测试标记为`@Theory`。
2.  在测试中使用`assume`以检查参数化值是否适用于测试
3.  使用`Enclosed`测试运行器并隔离一个内部类中的一些测试`Parameterized`和另一个内部类中的其他测试。

[理论博客](http://blog.schauderhaft.de/2010/02/07/junit-theories/)

[认为](http://junit.sourceforge.net/javadoc/org/junit/Assume.html)

[封闭式](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/experimental/runners/Enclosed.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-21T09:32:20.300

您可以注释掉您不想运行的测试，例如：

```
 @Parameters
    public static Collection stringVals() {
        return Arrays.asList(new Object[][] {
            //{"SSS"},
            //{""},
            //{"abcd"},
            {"Hello world"}  //only run this
        });
    } 
```

* * *

编辑：如果你想根据测试用例运行不同的测试，你也可以`Assume`在 JUnit 4+ 中忽略一些带有类的测试输入。检查[这个问题](https://stackoverflow.com/questions/1689242/conditionally-ignoring-tests-in-junit-4)

例子：

假设您有两个 class 实例`Person`，并且您想测试它们是否穿着。如果是`sex.equals("male")`，你想检查他的`clothes`列表是否包含`trousers`，但是对于`sex.equals("female")`，你想检查她是否已经`skirt`包含在她的列表中`clothes`。

因此，您可以像这样构建测试：

```
@Parameter(0)
public Person instance;

@Parameters
public static Collection clothes() {
    Person alice = new Person();
    alice.setSex("female");
    alice.addClothes("skirt");
    Person bob = new Person();
    bob.setSex("male");
    bob.addClothes("trousers");
    return Arrays.asList(new Object[][] {
        {alice, "skirt"},
        {bob, "trousers"},
    });
}

@Test
public void testMaleDressed() {
    //Assume: ignore some test input. 
    //Note: Message is error output; when condition is satisfied, the following lines will run, if not: test ignored
    Assume.assumeTrue("Tested person: " + person + "is female, ignore!", instance.getSex().equals("male"));
    assertTrue(person.getClothes().contains("trousers"));
}

@Test
public void testFemaleDressed() {
    //Assume: ignore some test input. 
    //Note: Message is error output; when condition is satisfied, the following lines will run, if not: test ignored
    Assume.assumeTrue("Tested person: " + person + "is male, ignore!", instance.getSex().equals("female"));
    assertTrue(person.getClothes().contains("skirt"));
} 
```

当你运行所有测试时，你会看到

```
[0]
    - testMaleDressed(ignored)
    - testFemaleDressed(passed)

[1]
    - testMaleDressed(passed)
    - testFemaleDressed(ignored) 
```

没有错误。

# jquery - 使用 jquery 更改 url，例如 facebook 消息

> ID：13257847
> 
> 赞同：0
> 
> 时间：2012-11-06T19:19:13.017
> 
> 标签：jquery, facebook, url

可能你认为这是重复的，但这不是重复的。

[change-hash-without-reload-in-jquery](https://stackoverflow.com/questions/1939041/change-hash-without-reload-in-jquery) 在本主题中，您在一个`#`字符后更改 url，但如果您查看 facebook 消息 url 更改，您可以看到 facebook 更改 url 没有任何额外`#`字符。

```
facebook.com/message/user1 
```

如果您单击第二条用户消息，它将更改为：

```
facebook.com/message/user2 
```

此 url 更改无需重定向和使用 # 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:53:54.520

[History.js](https://github.com/balupton/History.js/)是通过跨浏览器支持实现这一目标的最佳选择。您应该意识到旧版浏览器不支持直接操作 URL，而是使用井号 (#) 机制来代替它。

这是他们的入门部分的一部分：

```
(function(window,undefined){

    // Prepare
    var History = window.History; // Note: We are using a capital H instead of a lower h
    if ( !History.enabled ) {
         // History.js is disabled for this browser.
         // This is because we can optionally choose to support HTML4 browsers or not.
        return false;
    }

    // Bind to StateChange Event
    History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
        var State = History.getState(); // Note: We are using History.getState() instead of event.state
        History.log(State.data, State.title, State.url);
    });

    // Change our States
    History.pushState({state:1}, "State 1", "?state=1"); // logs {state:1}, "State 1", "?state=1"
    History.pushState({state:2}, "State 2", "?state=2"); // logs {state:2}, "State 2", "?state=2"
    History.replaceState({state:3}, "State 3", "?state=3"); // logs {state:3}, "State 3", "?state=3"
    History.pushState(null, null, "?state=4"); // logs {}, '', "?state=4"
    History.back(); // logs {state:3}, "State 3", "?state=3"
    History.back(); // logs {state:1}, "State 1", "?state=1"
    History.back(); // logs {}, "Home Page", "?"
    History.go(2); // logs {state:3}, "State 3", "?state=3"

})(window); 
```

[直接使用HTML5 pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)查看这些示例：

*   [http://jsfiddle.net/cowboy/CukUH/show](http://jsfiddle.net/cowboy/CukUH/show)
*   [http://jsfiddle.net/fJ9wq/show/](http://jsfiddle.net/fJ9wq/show/)

类似主题的问题：

*   [HTML5 历史 API 演示](https://stackoverflow.com/questions/10571734/html5-history-api-demo)
*   [使用 HTML5 History API 的好教程（Pushstate？）](https://stackoverflow.com/questions/4015613/good-tutorial-for-using-html5-history-api-pushstate)

其他资源：

*   [http://blog.new-bamboo.co.uk/2011/2/2/degradable-javascript-applications-using-html5-pushstate](http://blog.new-bamboo.co.uk/2011/2/2/degradable-javascript-applications-using-html5-pushstate)
*   [http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)

# android - Android - 布局：定位按钮问题

> ID：13257851
> 
> 赞同：0
> 
> 时间：2012-11-06T19:19:26.313
> 
> 标签：android, android-layout

在我的应用程序布局中，我有一个相对布局，其中连续包含 7 个按钮。现在我想在行的开头添加另一个按钮 (@+id/IB_Summe)。但在 GraphicalLayout 和我的设备上，前两个按钮（@+id/IB_Summe 和 @+id/ImageButton01）被覆盖。他们不是在旁边吗？我究竟做错了什么？

我的 xml 布局：

```
<RelativeLayout
 android:id="@+id/Buttonleiste"
 android:layout_width="fill_parent"
 android:layout_height="120px"
 android:layout_alignParentBottom="true"
 android:orientation="horizontal"
 android:gravity="bottom|center_horizontal"
 android:paddingTop="2dp"
 android:paddingBottom="2dp" android:background="@drawable/gradient">

<Button
     android:id="@+id/IB_Summe"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_below="@id/graph"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_marginRight="1dp"
     android:background="@layout/selector_empty_square_on"
     android:gravity="center_horizontal|bottom"
     android:lines="1"
     android:paddingBottom="10dp"
     android:text="@string/summe_symbol"
     android:textColor="@color/my_white"
     android:textSize="30sp" />

    <Button
     android:id="@+id/ImageButton01"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_toRightOf="@id/IB_Summe"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_marginRight="1dp"
     android:background="@layout/selector_empty_square_on"
     android:gravity="center_horizontal|bottom"
     android:lines="1"
     android:paddingBottom="10dp"
     android:text="@string/euro_symbol"
     android:textColor="@color/my_white"
     android:textSize="30sp" />

    <Button
     android:id="@+id/menuDiagram"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_marginLeft="1dp"
     android:layout_marginRight="1dp"
     android:layout_toRightOf="@id/ImageButton01"
     android:background="@layout/selector_empty"
     android:gravity="center_vertical|center_horizontal"
     android:lines="1"
     android:maxHeight="38dp"
     android:text="@string/Hour"
     android:textColor="@color/my_white"
     android:textSize="30sp" />

    <Button
     android:id="@+id/menuExtrasButton"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_marginLeft="1dp"
     android:layout_marginRight="1dp"
     android:layout_toRightOf="@id/menuDiagram"
     android:background="@layout/selector_empty"
     android:gravity="center_vertical|center_horizontal"
     android:lines="1"
     android:maxHeight="38dp"
     android:text="@string/Day"
     android:textColor="@color/my_white"
     android:textSize="30sp" />

   <Button
    android:id="@+id/menuInfo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="1dp"
    android:layout_marginRight="1dp"
    android:layout_toRightOf="@id/menuExtrasButton"
    android:background="@layout/selector_empty"
    android:gravity="center_vertical|center_horizontal"
    android:lines="1"
    android:maxHeight="38dp"
    android:text="@string/Week"
    android:textColor="@color/my_white"
    android:textSize="30sp" />

   <Button
    android:id="@+id/menuCounter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="1dp"
    android:layout_marginRight="1dp"
    android:layout_toRightOf="@id/menuInfo"
    android:background="@layout/selector_empty"
    android:gravity="center_vertical|center_horizontal"
    android:lines="1"
    android:maxHeight="38dp"
    android:text="@string/Month"
    android:textColor="@color/my_white"
    android:textSize="30sp" />

   <Button
    android:id="@+id/menuSetting"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="1dp"
    android:layout_marginRight="1dp"
    android:layout_toRightOf="@id/menuCounter"
    android:background="@layout/selector_empty"
    android:gravity="center_vertical|center_horizontal"
    android:lines="1"
    android:maxHeight="38dp"
    android:text="@string/Year"
    android:textColor="@color/my_white"
    android:textSize="30sp" />

   <Button
    android:id="@+id/menuTarif"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="1dp"
    android:layout_marginRight="1dp"
    android:layout_toRightOf="@id/menuSetting"
    android:background="@layout/selector_empty_square"
    android:gravity="bottom|center_horizontal"
    android:paddingBottom="10dp"
    android:lines="1"
    android:maxHeight="38dp"
    android:text="@string/kws_symbol"
    android:textColor="@color/my_white"
    android:textSize="30sp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:24:59.587

在您的第二个按钮中使用`android:layout_toRightOf="@+id/IB_Summe"`而不是`android:layout_toRightOf="@id/IB_Summe"`. 注意加号。那应该工作

# android - acra：不要发送“android id”

> ID：13257857
> 
> 赞同：0
> 
> 时间：2012-11-06T19:19:54.403
> 
> 标签：android, acra, bugsense

我的 acra 错误报告显示在 BugSense 中，并带有“Android ID”字段。

![在此处输入图像描述](../Images/ade99ab22b5e838014ad07443c7a241d.png)

我对此进行了测试，它在应用程序安装之间保持不变。我们不想发送任何可用于跟踪用户的信息。有没有办法避免发送此类数据？

我根本没有自定义报告数据，所以都是默认值。我不授予该`READ_PHONE_STATE`权限，因此我希望这会阻止“Android ID”被发送到 BugSense。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:23:58.193

`customReportContent`您可以按照[https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Choosing_which_fields_to_be_included_in_reports](https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Choosing_which_fields_to_be_included_in_reports)尝试。根据文档，“只有在 customReportContent 中设置的字段才会被实际处理”。

从他们的示例代码中：

```
@ReportsCrashes(formKey = "xxxxxxxxxxxxxxxx", 
            customReportContent = { APP_VERSION, ANDROID_VERSION, PHONE_MODEL, CUSTOM_DATA, STACK_TRACE, LOGCAT },                
            mode = ReportingInteractionMode.TOAST,
            resToastText = R.string.crash_toast_text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:36:17.237

启用/禁用包括 DeviceID #

如果您向应用程序添加了**READ_PHONE_STATE 权限**，但希望您的用户能够禁用在崩溃报告中包含他们的设备 ID，您可以包括以下 CheckBoxPreference：

```
 <CheckBoxPreference android:key="acra.deviceid.enable"
    android:title="@string/pref_acra_deviceid"
    android:summaryOn="@string/pref_acra_deviceid_enabled"
    android:summaryOff="@string/pref_acra_deviceid_disabled" 
    android:defaultValue="true"/> 
```

不要忘记在您的**strings.xml**文件中添加所需的字符串。

[https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Enable/disable_including_DeviceID](https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Enable/disable_including_DeviceID)

# selenium - 未找到窗口 - NoSuchWindowException 未处理

> ID：13257858
> 
> 赞同：0
> 
> 时间：2012-11-06T19:19:55.333
> 
> 标签：selenium, selenium-webdriver

我收到一条错误消息，提示`No Window found`我正在尝试切换到窗口，下面是我正在使用的代码。

```
 VisitMyWebSite();

        string originalHandle = driver.CurrentWindowHandle;

        IWebElement addtoList = driver.FindElement(By.XPath(_pageName));
        addtoList.Click();

        ReadOnlyCollection<string> windowHandles = driver.WindowHandles;
        string popupHandle = string.Empty;

        foreach (string handle in windowHandles)
        {
            if (handle != originalHandle)
            {
                popupHandle = handle; break;
            }
        }

        Thread.Sleep(4000);

        //switch to new window 
        driver.SwitchTo().Window(popupHandle);  //error No Window found 
```

# sql - 当我运行简单的选择查询时，是否可以不显示最后受影响的行数？

> ID：13257860
> 
> 赞同：2
> 
> 时间：2012-11-06T19:19:57.310
> 
> 标签：sql, sql-server, tsql, sql-server-2000

我尝试使用 OSQL 将查询结果保存在文本文件中，然后将这些文本文件批量插入到表中。OSQL 部分没问题，但是，在批量插入中，查询结果末尾影响的行数会导致错误。这是一个例子；

```
select item_number, description, price from item

3536114   Fruit mix     $3.99

3536229   DO 20 liquid  $9.99

3536251   Peppermint    $7.99

(3 rows affected) ------> I do not need this line. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T19:22:43.173

[`SET NOCOUNT`](http://msdn.microsoft.com/en-us/library/aa259204%28v=sql.80%29.aspx)像这样使用：

```
SET NOCOUNT ON; 
```

这将：

> 停止将指示受 Transact-SQL 语句影响的行数的消息作为结果的一部分返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:21:51.613

把它放在查询的顶部：

`SET NOCOUNT ON`

> 当 SET NOCOUNT 为 ON 时，不返回计数。当 SET NOCOUNT 为 OFF 时，返回计数。
> 
> 即使 SET NOCOUNT 为 ON，@@ROWCOUNT 函数也会更新。
> 
> SET NOCOUNT ON 防止为存储过程中的每个语句向客户端发送 DONE_IN_PROC 消息。对于包含多个不返回太多实际数据的语句的存储过程，或者对于包含 Transact-SQL 循环的过程，将 SET NOCOUNT 设置为 ON 可以显着提高性能，因为网络流量大大减少。
> 
> SET NOCOUNT 指定的设置在执行或运行时有效，而不是在解析时有效。

[http://msdn.microsoft.com/en-us/library/ms189837.aspx](http://msdn.microsoft.com/en-us/library/ms189837.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T19:22:16.793

您可以通过以下方式实现：-

```
 SET NOCOUNT ON 
```

当 SET NOCOUNT 为 ON 时，不返回计数（指示受 Transact-SQL 语句影响的行数）。当 SET NOCOUNT 为 OFF 时，返回计数。

检查此[文档](http://msdn.microsoft.com/en-us/library/aa259204%28v=sql.80%29.aspx)

# java - 在我的小程序中使用 webrenderer 时出错

> ID：13257865
> 
> 赞同：0
> 
> 时间：2012-11-06T19:20:20.770
> 
> 标签：java, applet, runtime-error

我试图让这个代码工作（小程序）它基于 webrenderer 试用，我在示例部分得到了这个代码。

虽然我尝试在那里搜索网站，但它没有用。我想在我的小程序上呈现页面。下面是我使用的完整代码，我真的不知道那里有什么问题。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

import com.webrenderer.swing.*;

/**
 * This example shows how to set up WebRenderer to run Java Applets
 * 
 * @author JadeLiquid Software.
 * @see www.webrenderer.com
 */
public class AppletExample 
{

// instance of a browser
IMozillaBrowserCanvas browser;
JTextField textfield;

public AppletExample() 
{
    // Creates a JFrame to host the browser
    JFrame frame = new JFrame("Applet Example");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Create and append the browser
    frame.setContentPane(createContent());

    frame.setSize(640, 480);
    frame.setVisible(true);
}

public JPanel createContent() 
{
    JPanel panel = new JPanel(new BorderLayout());
    textfield = new JTextField();

    panel.add(BorderLayout.NORTH, textfield);

    // The action listener triggers when text is entered in the text field
    textfield.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e) 
        {
            browser.loadURL(textfield.getText());
        }
    });

    // If you are behind a proxy server, it may be necessary to set the proxy authentication
    // to enable access for page loading.  Enable the following call(s) with the appropriate
    // values for domain, port..
    // These settings will need to be applied to both the browser and to enable applets.
    //int yourProxyPort = 8080;
    //String yourProxyServer = "proxyserver";

    // Apply proxy settings to enable applets. Username and password will need to entered as  
    // a dialog does not appear automatically as is the case with the browser proxy.
    //BrowserFactory.setAppletProxySettings(yourProxyServer, String.valueOf(yourProxyPort));
    //BrowserFactory.setAppletProxyAuthentication("username", "password");

    // Create a browser instance
    browser = BrowserFactory.spawnMozilla();

    // Required if a proxy server is being used.
    //browser.setProxyProtocol(new ProxySetting( ProxySetting.PROTOCOL_ALL, yourProxyServer, yourProxyPort));
    //browser.enableProxy(); 

    // Required call to allow applets to function
    browser.setAppletMode(IMozillaBrowserCanvas.ENABLE_JAVA_APPLETS);

    // Load a site with many applet examples
    browser.loadURL("java.sun.com/applets/jdk/1.4/index.html");

    // Attach to the panel
    panel.add(BorderLayout.CENTER, browser.getComponent());
    return panel;
}

public static void main(String[] args) 
{
    /*
     * TODO: Insert your username and key in the following setLicenseData call. 
     * WebRenderer operates with reduced functionality if the username and key are not correct.
     * The sample key used below is a limited-duration trial key.
     */
    BrowserFactory.setLicenseData( "30dtrial" , "9Q2QFT9JIK4OHO5BSNKHNMM9EMTR5NRG" );
    new AppletExample();
}
} 
```

当我尝试运行它时出现错误

> ## java.lang.reflect.InvocationTargetException

这是调试信息

```
Initializing jdb ...
Internal exception:
java.io.IOException: The handle is invalid
at java.io.FileInputStream.readBytes(Native Method)
at java.io.FileInputStream.read(FileInputStream.java:242)
at java.io.BufferedInputStream.read1(BufferedInputStream.java:273)
at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
at java.io.InputStreamReader.read(InputStreamReader.java:184)
at java.io.BufferedReader.fill(BufferedReader.java:154)
at java.io.BufferedReader.readLine(BufferedReader.java:317)
at java.io.BufferedReader.readLine(BufferedReader.java:382)
at com.sun.tools.example.debug.tty.TTY.<init>(TTY.java:751)
at com.sun.tools.example.debug.tty.TTY.main(TTY.java:1067)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at sun.applet.Main.invokeDebugger(Main.java:314)
at sun.applet.Main.run(Main.java:143)
at sun.applet.Main.main(Main.java:98) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:22:36.257

请确保您已按照文档中概述的这些步骤进行操作： [http ://www.webrenderer.com/products/swing/developer/developersguide/files/appletdeploy.htm](http://www.webrenderer.com/products/swing/developer/developersguide/files/appletdeploy.htm)

# objective-c - 使用未声明的标识符 winSize

> ID：13257867
> 
> 赞同：0
> 
> 时间：2012-11-06T19:20:23.393
> 
> 标签：objective-c, xcode

不太确定为什么会收到此错误，但我查看了 .h 文件，但我似乎无法想出 xCode 引发此错误的原因：

```
// on "init" you need to initialize your instance
-(id) init
{
if ((self=[super init])) {
    _batchNode = [CCSpriteBatchNode batchNodeWithFile:@"Sprites.pvr.ccz"]; //1
    [self addChild:_batchNode]; //2
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Sprites.plist"]; //3

    _ship = [CCSprite spriteWithSpriteFrameName:@"SpaceFlier_sm_1.png"];  //4
    CGSize winSize = [CCDirector sharedDirector].winSize; //5
    _ship.position = ccp(winSize.width * 0.1, winSize.height * 0.5); //6
    [_batchNode addChild:_ship z:1]; //7
}
return self;
// 1) Create the CCParallaxNode
_backgroundNode = [CCParallaxNode node];
[self addChild:_backgroundNode z:-1];

// 2) Create the sprites we'll add to the CCParallaxNode
_spacedust1 = [CCSprite spriteWithFile:@"bg_front_spacedust.png"];
_spacedust2 = [CCSprite spriteWithFile:@"bg_front_spacedust.png"];
_planetsunrise = [CCSprite spriteWithFile:@"bg_planetsunrise.png"];
_galaxy = [CCSprite spriteWithFile:@"bg_galaxy.png"];
_spacialanomaly = [CCSprite spriteWithFile:@"bg_spacialanomaly.png"];
_spacialanomaly2 = [CCSprite spriteWithFile:@"bg_spacialanomaly2.png"];

// 3) Determine relative movement speeds for space dust and background
CGPoint dustSpeed = ccp(0.1, 0.1);
CGPoint bgSpeed = ccp(0.05, 0.05);

// 4) Add children to CCParallaxNode
[_backgroundNode addChild:_spacedust1 z:0 parallaxRatio:dustSpeed positionOffset:ccp(0,winSize.height/2)];
[_backgroundNode addChild:_spacedust2 z:0 parallaxRatio:dustSpeed positionOffset:ccp(_spacedust1.contentSize.width,winSize.height/2)];
[_backgroundNode addChild:_galaxy z:-1 parallaxRatio:bgSpeed positionOffset:ccp(0,winSize.height * 0.7)];
[_backgroundNode addChild:_planetsunrise z:-1 parallaxRatio:bgSpeed positionOffset:ccp(600,winSize.height * 0)];
[_backgroundNode addChild:_spacialanomaly z:-1 parallaxRatio:bgSpeed positionOffset:ccp(900,winSize.height * 0.3)];
[_backgroundNode addChild:_spacialanomaly2 z:-1 parallaxRatio:bgSpeed positionOffset:ccp(1500,winSize.height * 0.9)]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:37:59.187

首先，除非 C2D 以某种方式神奇地改变了工作方式，否则`return`您在 ing 之后会继续做很多`return`永远无法达到的事情。你刚刚`return`编辑过；您已退出该方法。这就像告诉画家离开他正在工作的房间并回家休息一天......然后向虚无尖叫他应该把墙壁漆成红色。事实上，你根本不会尖叫。这是一个例子：

```
- (void) foo {
    int x = 10;
    return; //return control to caller
    self->someValue = x; //never done; we've returned
} 
```

`x`会被分配十个，然后你会回来。之后的任何行都是没有意义的。其次，这里有这条线。

```
 CGSize winSize = [CCDirector sharedDirector].winSize; 
```

它出现在一个`if`语句中。该变量`winSize`只能在`if`您声明它的语句的约束内使用。它“超出范围”任何其他内容。例如，以下将给出相同的警告。

```
- (void) bar {
    if (0){
        int x = 1;
    }
    int y = x;
} 
```

为什么不把下面的所有东西都`return`放在`if`循环中，就在它关闭之前呢？

# android - 与单个表的多个 toMany 关系

> ID：13257872
> 
> 赞同：5
> 
> 时间：2012-11-06T19:20:52.703
> 
> 标签：android, orm, relational-database, greendao

我是[greenDAO](http://greendao-orm.com/)的新手，我正在编写 DaoGenerator。我遇到的一个问题是我有一个用户表和一个墙贴表。我希望能够在wallpost表中有两列与用户表（墙所有者和发布用户）有很多关系，它们可能是也可能不是同一个用户，但到目前为止看起来不像可以有两个指向同一个表中的单个表的 toMany 关系。

有没有更好的方法来做到这一点/一种使这成为可能的方法？我希望能够通过调用 .getOwner() 和 .getPoster() 来加载墙帖并获取墙的所有者和发布用户。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T09:44:49.343

您必须为关系设置名称。查看关于关系的文档中名为[Relation Names and multiple Relations的（刚刚改进的）部分。](http://greendao-orm.com/documentation/relations/)它带有一个示例：

```
Property pictureIdProperty = user.addLongProperty("pictureId").getProperty();
Property thumbnailIdProperty = user.addLongProperty("thumbnailId").getProperty();
user.addToOne(picture, pictureIdProperty);
user.addToOne(picture, thumbnailIdProperty, "thumbnail"); 
```

# java - 使用 Java 程序如何以非 root 用户的身份在端口 80 上以编程方式启动 Jetty

> ID：13257880
> 
> 赞同：3
> 
> 时间：2012-11-06T19:21:14.313
> 
> 标签：java, jetty, port

我正在尝试以下程序：

1.  如果我使用 SUDO java 运行一切都很好，但我不想使用 SUDO
2.  没有 SUDO 我得到以下错误：`SocketException: Permission Denied (as its PORT 80)`

使用码头文档，我可以使用我更改的命令行来工作

1.  `jetty-setuid.xm`l -- put user-name 是非root用户
2.  `start.ini` -- 更改为 EXEC 并`etc/jetty-setuid.xml`作为第一个参数传递
3.  `jetty.xml`-- 端口号为 80

然后我仍然以非 root 用户身份执行 sudo - 就像 -> `sudo java -jar start.jar` Jetty 作为非 root 用户在端口 80 上启动。

我想使用 JAVA 程序实现相同的目标。任何帮助/意见表示赞赏。

```
package my.package;

import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.handler.ContextHandlerCollection;
import org.eclipse.jetty.server.handler.ResourceHandler;
import org.eclipse.jetty.server.Connector;
import org.eclipse.jetty.server.nio.SelectChannelConnector;

public class JettyTest {

public static void main(String[] args) throws Exception
{
    Server server = new Server();
    System.out.println("Created new server, now going to start");
    SelectChannelConnector connector0 = new SelectChannelConnector();
    connector0.setPort(80); //on port 80
    connector0.setMaxIdleTime(30000);
    connector0.setRequestHeaderSize(8192);

    server.setConnectors(new Connector[]{ connector0 });

    server.setHandler(new MyHandler()); //simple hello world handler

    server.start();
    System.out.println("started server on port 80");
    server.join();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:12:14.693

您必须在 Unix 上以某种方式使用 sudo 才能提升到 root 权限。否则你无法获得 80 端口。

对于 Java 程序，sudo 必须应用于 java 命令本身，但这样做通常是个坏主意。

更保守的解决方案是绑定到另一个端口，比如 8080，然后将端口 80 重新路由到该端口。执行此操作的命令因操作系统而异，甚至在某些较旧的 Unix 版本上可能不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:35:25.780

Sudo 将您的命令的权限提升到 root 级别。您需要在此处“sudo”（或者更一般地说，以 root 身份运行命令）的原因是，在 Linux 中，低于 1024 的端口保留给 root。

换句话说 - 如果您不是 root，则无法在端口 80 上运行码头（或任何其他服务）。

这里最简单的解决方案是在另一个端口上运行 Jetty（8080 是一个常见的端口）。

如果您仍希望用户在默认端口上访问服务，请查阅[http://wiki.eclipse.org/Jetty/Howto/Port80](http://wiki.eclipse.org/Jetty/Howto/Port80)和[http://docs.codehaus.org/display/JETTY/port80](http://docs.codehaus.org/display/JETTY/port80)。

# wpf - 如何在 XAML 中定义的 UserControl 中绑定依赖属性的值？

> ID：13257884
> 
> 赞同：0
> 
> 时间：2012-11-06T19:21:23.110
> 
> 标签：wpf

假设我有一个将 DataContext 设置为它的 VM 的 UserControl

现在假设 UserControl 定义了一个依赖属性，我想最初绑定到 ViewModel 上的一个属性......如果顶级元素是 UserControl，我将如何在 UserControl 的 XAML 中引用这个属性？

```
<UserControl x:Class="TestApp1.TestControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:TestApp1"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" x:Name="test">

</UserControl> 
```

依赖属性：

```
 public static readonly DependencyProperty MyTestPropProperty= null;

    public string MyTestProp
    {
        get { return (string)GetValue(MyTestPropProperty); }
        set { SetValue(MyTestPropProperty, value); }
    }

    static TestControl()
    {
        MyTestPropProperty= DependencyProperty.Register(
            "MyTestProp",
            typeof(string), 
            typeof(TestControl), 
            new FrameworkPropertyMetadata());
    } 
```

在 XAML 上，我希望能够使用 MyTestProp={Binding yadda yadda} 但我无法从 XAML 中引用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:37:16.543

只需在根节点中添加属性，如下所示：

`<Usercontrol xmlns=blablabla MyProperty="{Binding MyViewModelProperty}">`

编辑：这不起作用，因为没有对新创建的属性的 XAML 引用。`<Style TargetType="TestControl">`从外部上下文（包含此用户控件的那个）中使用或设置属性

# c# - 有没有办法为使用集合中“子实体”属性的计算属性触发某种“OnPropertyChanged”事件？

> ID：13257888
> 
> 赞同：4
> 
> 时间：2012-11-06T19:21:38.210
> 
> 标签：c#, wpf, datagrid, entity, inotifycollectionchanged

`OnPropertyChanged`有没有办法为使用集合中“子实体”属性的计算属性触发某种事件？

一个小例子：

我有一个带有显示客户属性的 DataGrid 的简单 WPF 应用程序。我正在使用 Entity Framework 5，CodeFirst 方法，所以我使用自己的 INotifyPropertyChanged 实现手动编写了我的类。

```
public partial class Customer : INotifyPropertyChanged
{
    private string _firstName;
    public virtual string FirstName
    {
        get { return _firstName; }
        set
        {
            _firstName = value;
            OnPropertyChanged("FirstName");
            OnPropertyChanged("FullName");
        }
    }

    private string _lastName;
    public virtual string LastName
    {
        get { return _lastName; }
        set
        {
            _lastName = value;
            OnPropertyChanged("LastName");
            OnPropertyChanged("FullName");
        }
    }

    public virtual ICollection<Car> Cars { get; set; }
    public virtual ICollection<Invoice> Invoices { get; set; }

    ...
} 
```

现在在同一个类中，我创建了 3 个计算属性：

```
 public string FullName
    {
        get { return (FirstName + " " + LastName).Trim(); }
    }

    public int TotalCars
    {
        get
        {
            return Cars.Count();
        }
    }

    public int TotalOpenInvoices
    {
        get
        {
            if (Invoices != null)
                return (from i in Invoices
                        where i.PayedInFull == false
                        select i).Count();
            else return 0;
        }
    } 
```

在`FullName`DataGrid 中自动更新，因为我正在调用`OnPropertyChanged("FullName");`

我找到了一个 INotifyCollectionChanged 实现的示例，我可能可以使用它来自动更新`TotalCars`在 ICollection 中添加或删除某些内容时：http: [//www.dotnetfunda.com/articles/article886-change-notification-for-objects-和-collections.aspx](http://www.dotnetfunda.com/articles/article886-change-notification-for-objects-and-collections.aspx)

但是，当ICollection ( ) 中`OnPropertyChange("TotalOpenInvoices")`的属性 ( ) 发生变化时触发的最佳方法是什么？`PayedInFull``Invoices`

在 Invoice 类中做类似的事情`OnPropertyChanged("Customer.TotalOpenInvoices");`似乎并不能解决问题...... :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:43:27.460

您是否可以控制收藏中的内容？如果这样做，您可以在 Invoice 对象上创建一个 Parent 属性，并将其添加到集合中时，将父级设置为您的 Customer。然后，当 PaidInFull 被设置时，运行您的 Customer.OnPropertyChanged("TotalOpenInvoices") 或调用 Customer 对象上的方法来重新计算您的发票。

[在 C# 和 .Net 中强制执行父子关系](https://stackoverflow.com/questions/982796/enforcing-parent-child-relationship-in-c-sharp-and-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:31:55.180

这假定 Invoice 和 Customer 都实现了 IPropertyChanged。只需将您的集合更改为 ObservableCollection，然后观察 CollectionChanged 属性。

添加新发票时，将事件处理程序连接到该发票的 PropertyChanged 事件。从集合中删除项目时，删除该事件处理程序。

然后，只需在 TotalOpenInvoices 属性上调用 NotifyPropertyChanged 函数。

例如（未完全测试，但应该很接近）：

**发票**

```
public class Invoice : INotifyPropertyChanged
    {

        private bool payedInFull = false;
        public bool PayedInFull
        {
            get { return payedInFull; }
            set
            {
                payedInFull = value;
                NotifyPropertyChanged("PayedInFull");
            }
        }

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        #endregion
    } 
```

**顾客**

```
public class Customer : INotifyPropertyChanged
{
    public Customer()
    {
        this.Invoices.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(Invoices_CollectionChanged);
    }

    ObservableCollection<Invoice> Invoices 
    {
        get;
        set;
    }

    public int TotalOpenInvoices
    {
        get
        {
            if (Invoices != null)
                return (from i in Invoices
                        where i.PayedInFull == false
                        select i).Count();
            else return 0;
        }
    }

    void Invoices_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        foreach (Invoice invoice in e.NewItems)
        {
            invoice.PropertyChanged += new PropertyChangedEventHandler(invoice_PropertyChanged);
            NotifyPropertyChanged("TotalOpenInvoices");
        }

        foreach (Invoice invoice in e.OldItems)
        {
            invoice.PropertyChanged -= new PropertyChangedEventHandler(invoice_PropertyChanged);
            NotifyPropertyChanged("TotalOpenInvoices");
        }
    }

    void invoice_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "PayedInFull")
            NotifyPropertyChanged("TotalOpenInvoices");
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion
} 
```

请注意，每个类都可以抽象为实现 INotifyPropertyChanged 的​​单个类，例如 ViewModelBase 类，但这不是本示例所必需的。

# jquery - Google Fusion Table - jQuery AJAX 查询 - 选择特定列返回相同的响应，但作为错误

> ID：13257890
> 
> 赞同：0
> 
> 时间：2012-11-06T19:21:40.530
> 
> 标签：jquery, google-fusion-tables

所以我目前正在使用以下脚本从我的表中选择列。

```
var queryText = "SELECT 'NAME','ADDRESS1','ADDRESS2','CITY','STATE_TERRITORY','FULL_ADDRESS','COUNTRY_CODE','PHONE','STORE_TYPE','CATEGORY','DESCRIPTION','BRANDS','START_DATE','END_DATE','LAT','LNG' FROM /mytable/";
queryText = encodeURI(queryText);
var query = "https://www.googleapis.com/fusiontables/v1/query?sql=" + queryText + "&key=/mykey/";

$.ajax({
    type: "GET",
    url: query,
    success: successFunction
}); 
```

它工作正常，除了我将“POSTAL_CODE”列添加到选择中。当我添加它时会发生什么很奇怪。AJAX 将响应检测为错误，但所有响应都表明查询成功，完成状态 = OK 和状态代码 = 200，但 ajax 函数运行错误函数而不是成功函数。

谁能解释为什么会这样？如果我选择 *. 我还尝试将列重命名为随机名称，以确保它不是保留字或其他内容。总是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:07:50.673

作为示例，在编辑要发布的表格时，我发现仅在表格的前几百行上运行代码并没有重现问题。似乎该列中有错误数据会造成问题。希望这对将来的人有所帮助！

# c# - 将对象传递给视图模型

> ID：13257896
> 
> 赞同：6
> 
> 时间：2012-11-06T19:21:56.383
> 
> 标签：c#, mvvm

关于 MVVM 模式的问题，我认为我错了。

当视图中发生触地事件时，我想弹出一条消息，即：

```
private void marker_TouchDown(MessageObject msgData)
{
    CustomMessageControl message = new CustomMessageControl() {Width = 610, Height = 332};
    CustomMessageViewModel messageVM = new CustomMessageViewModel(msgData);
    message.DataContext = messageVM;
    //Add to canvas
} 
```

我的视图模型：

```
public class CustomMessageViewModel
{
    public MessageObject message { get; set; }

    public CustomMessageViewModel(MessageObject message)
    {
        this.MessageObject = message;
    }
} 
```

这有效，但感觉不对。这是填充视图模型的可接受方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:02:02.060

我相信您在视图模型中创建控件时违反了 MVVM。这是不可测试的，您的视图模型*现在*必须创建控件，这不应该是测试的要求（这强调了 UI 和视图模型之间缺乏关注点分离）。

与其创建控件，不如让您的视图模型触发它自己的事件是完全可以接受的。在这种情况下，您将传递您希望对话框/覆盖/控件绑定到的视图模型，如下所示：

```
public class CustomMessageControlEventArgs : EventArgs
{
    public CustomMessageViewModel CustomMessageViewModel { get; set; }
}

public event EventHandler<CustomMessageControlEventArgs> 
    ShowCustomMessageControl;

private void marker_TouchDown(MessageObject msgData)
{
    // Create the view model.
    var message = ...;

    // Get the events.
    var events = ShowCustomMessageControl;

    // Fire.
    if (events != null) events(this, 
        new CustomMessageControlEventArgs {
            MessageObject = new CustomMessageViewModel(msgData)
        });
} 
```

然后，在您的 UI 代码中，您将绑定到该事件，然后为该事件显示适当的用户界面。

请记住，MVVM 并不是严格意义上能够在 XAML 中声明所有内容或*仅*通过数据绑定将数据绑定到 UI，它是关于正确分离代码。

您想将显示的*内容*（视图模型）与*显示*的方式（UI）分开；在触发事件时，您将保持关注点分离。

是的，您必须在后面编写一些代码（或者您可以通过属性通知更改来完成，但坦率地说，它更丑陋），但它保持了分离并允许轻松测试，而无需引入任何用户界面元素。

# android - 如何在android中使用位图回收？

> ID：13257899
> 
> 赞同：3
> 
> 时间：2012-11-06T19:22:12.713
> 
> 标签：android, bitmap, lazy-loading, out-of-memory

我遇到了位图回收问题。我在 pulltorefreshlistview 中显示位图。我有大约 30-50 张图片要下载，还有一些来自 web 服务功能的文本。我正在使用延迟加载图像并下载图像并将它们解码为 80x80 大小。我的问题是我得到了 OutOfmemoryError。所以我做了一些 R 和 D 并且知道位图没有立即被 GC。所以我想做 recycle() 位图来回收内存。在位图上调用 recycle() 的位置。我正在使用著名[的惰性列表](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012). 在设置位图后，在下面的代码中，我尝试执行 bitmap.recycle()。我没有像 stackoverflow 上报告的其他错误那样出现任何错误，但奇怪的是列表项显示为空白。我想知道如果我 recycle() 位图为什么会影响同一行中的文本视图。由于有大量图像，我的应用程序很快就会崩溃。我还想问一下如何一次回收Listview中设置的所有图像。请有人帮助我。

```
//Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:28:49.220

我们使用这个库：[Android HttpImageManager](http://code.google.com/p/android-http-image-manager/)

它很容易与列表一起使用，而且我从来没有使用过 OutOfMemoryException。它将位图缓存在内存和文件系统中（您可以更改该行为）。

另外，我建议您不要在手机上调整位图的大小，但如果可以的话，请在服务器上远程进行（当然您可能没有该选项）。

# php - PHPExcel保存模板文件过大

> ID：13257901
> 
> 赞同：1
> 
> 时间：2012-11-06T19:22:19.160
> 
> 标签：php, phpexcel

版本信息：

PHPExcel - 1.7.8

linux - Linux 版本 2.6.18-274.12.1.el5 (mockbuild@builder10.centos.org) (gcc 版本 4.1.2 20080704 (Red Hat 4.1.2-51))

PHP 版本 - 5.3.17

我有一个用于创建每周报告的销售报告模板。一切正常，除了输出文件的大小。

输入模板的大小只有 249kb，而输出文件的大小却超过了 4mb。

总共有 97 个单元格中添加了任何数据。当我手动插入数据时，大小保持正确。

原始模板大小 - 254,464

手动输入输出大小 - 254,464

PHPExcel 输出大小 - 4,230,656

我的代码基于 30template.php 示例。

感谢您对可能导致此问题的任何想法！

如果需要任何其他信息，我会尽我所能回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:01:23.607

如果工作表包含您期望的数据，那么您真的不应该担心这一点。4MB 对于文件来说并不是特别大。

PHPExcel 不是文件编辑器：它不会简单地在原始文件中添加一些额外的单元格，而这些单元格可能只是在结果大小上添加几个字节。它加载文件，将其内容转换为 PHPExcel 对象；你修改那个 PHPExcel 对象；当您保存时，它会从该 PHPExcel 对象的内容中写入一个新文件。Excel 本身在存储电子表格数据的方式方面有很多不同的选项，并且在保存时可以优化资源以极其有效地存储它们。PHPExcel 以通用方式存储，无需确定如何最好地将生成的文件优化到最小大小的开销。例如，PHPExcel 可能会保存工作簿中未使用的其他默认样式，而 Excel 本身可能会丢弃这些样式。您没有提及您使用的是哪种格式：.xlsx 或 .xls ... 前者是 zip 压缩的；但是 ZipArchive 使用的 zip 压缩方法可能与 Excel 使用的压缩方法不匹配。

因此，影响保存文件大小的因素有很多：通常更重要的是内容正确。

# php - 将数组中的数据输入数据库

> ID：13257910
> 
> 赞同：0
> 
> 时间：2012-11-06T19:22:42.433
> 
> 标签：php, mysqli

我正在尝试将信息输入我的数据库并且遇到了一个问题，我确信我只是犯了一个简单的错误。要更新我正在使用的表：

```
 $conn->query("update webPrice set price= " . $amazonResult['price'] . " where asin = '" . $amazonResult['asin'] . "'"); 
```

$conn 是我的连接。价格始终输入为 0。我知道那里有信息，因为当我执行 print_r($amazonResult) 时，我看到了我想要插入数据库的所有内容。获取亚马逊信息的代码是：

```
 foreach($parsed_xml->GetMyPriceForASINResult as $item ) {
 $asin2 =$item->attributes()->ASIN;
$current = $item->Product;

 $status = $item->attributes()->status;

      if (stristr($status, "Success") == true)
{
        $amazonResult = array(
                        'asin' => $asin2,
            'price' => $current->Offers->Offer->BuyingPrice->ListingPrice,//AttributeSets->children('ns2', true)->
                            ); 
```

我认为问题出在我的更新声明上，但我不确定它是什么。asin 信息输入正确。字段是 price = double 和 asin = varchar。

**编辑：** 这是 print_r($amazonResult); 的结果

```
Array ( [asin] => SimpleXMLElement Object ( [0] => 0176055452 ) [price] => SimpleXMLElement Object ( [CurrencyCode] => USD [Amount] => 10.11 ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:25:33.860

尝试，在周围添加`'`引号`$amazonResult['price']`

```
$conn->query("update webPrice set price= '" . $amazonResult['price'] . "' where asin = '" . $amazonResult['asin'] . "'"); 
```

**编辑：**根据您的编辑，因为值在对象中，

```
$conn->query("update webPrice set price= '" . $amazonResult['price']->Amount . "' where asin = '" . $amazonResult['asin']->0 . "'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:33:12.507

您必须将表的名称和字段的名称放在以下两个符号之间： ` 并且您必须使用 ' 符号来表示值。（就像 coder1984 说的）

```
$conn->query("update `webPrice` set `price` = '" . $amazonResult['price'] . "' where `asin` = '" . $amazonResult['asin'] . "'"); 
```

# python - 在 python 中检查字典的内容时出错

> ID：13257914
> 
> 赞同：-3
> 
> 时间：2012-11-06T19:22:58.130
> 
> 标签：python, macos, dictionary, binary

我很惊讶在检查字典中的某个值时出现错误，如下所示：

```
if src in mac_dict: 
```

我已经像这样填写了我的字典：

```
data = database.get(mac, "get_nodelist", version=1)
if data:
    fh = StringIO(data)
    version = ord(fh.read(1))
    length = ord2b(fh.read(2))
    length = length / 8
    macs = {}
    for i in xrange(0,length):
        mac = fh.read(6)[-3:]
        tdm = ord2b(fh.read(2))
        macs[mac] = tdm
        print hexlify(mac) + " - " + str(tdm)
    fh.close()
    fh = open("macs.bin","wb")
    pickle.dump(macs,fh)
    fh.close()
    return macs 
```

data 在 sa 行中包含 6 个字节的 mac 地址加上 2 个字节的 tdm。它们似乎已使用 print 语句正确解码，但是当我想检查 src（二进制）是否是 mac_dict 的一部分时，我的脚本会引发异常 - 即使我绝对应该在那里......任何提示？

谢谢！罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:26:10.730

您需要执行此操作以检查是否存在值：

```
if src in mac_dict.values(): 
```

您的代码正在做的是检查 src 是否已被用作键。字典类也有一个等价的方法：

```
if mac_dict.has_key(src): 
```

# ruby - Ruby：通过模块添加东西以初始化方法

> ID：13257919
> 
> 赞同：10
> 
> 时间：2012-11-06T19:23:16.763
> 
> 标签：ruby, module, initialization

在 Ruby 中，我想让一个类包含一系列模块，并让这些单独的模块在初始化该类时执行一个块或方法（或者只是找到某种方法来编辑实例变量）。我知道我可以通过在模块中创建一个方法然后在类的初始化方法中调用它来做到这一点，但是我想要通过简单地包含模块并调用一个方法来执行模块添加到初始化的任何代码来做到这一点，这样我就可以在一个类中包含大量的东西，而不必担心在初始化方法中为每个包含的单个模块添加一行代码。我已经检查了别名，超级和相关的东西，但没有得到任何东西......如果它有助于理解我希望完成的事情，这里有一些伪代码：

```
module Mod1  
    call_this_block_on_initialize { @a.push 4 }  
end  

module Mod2  
    call_this_block_on_initialize { @a.push 5 }  
end  

class Test  
    attr_accessor :a  
    include Mod1  
    include Mod2  

    def initialize  
      @a = [1, 2, 3]  
      call_those_blocks_set_by_mods  
    end  
end  

t = Test.new
t.a # returns [1, 2, 3, 4, 5] 
```

这可能有点罗嗦，但我认为标题总结了我正在尝试做的事情。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T19:39:05.867

有几种方法可以做到这一点。此示例将重新定义初始化方法并添加您想要的任何额外代码：

```
module MyModule
  def self.included(base) # built-in Ruby hook for modules
    base.class_eval do    
      original_method = instance_method(:initialize)
      define_method(:initialize) do |*args, &block|
        original_method.bind(self).call(*args, &block)
        @a.push 4 # (your module code here)
      end
    end
  end
end

class Test  
  attr_accessor :a  

  def initialize  
    @a = [1, 2, 3]    
  end  

  # It must be included after the `initialize` 
  # definition or the module won't find the method:
  include MyModule
end 
```

**但是**：我认为您真正想要的是子类化。如果您有很多具有相似行为的类，就像您所做的那样，请问自己是否存在自然的抽象父类。你能解释一下你做了什么`super`以及为什么它不起作用？

# for-loop - 数据表收集的慢循环

> ID：13257921
> 
> 赞同：1
> 
> 时间：2012-11-06T19:23:16.997
> 
> 标签：for-loop, datatable

我正在使用 MySQL 数据库中的值更新 Excel 工作簿中的值。`WorkbookMap`列表中只有 11 行，`DataTables`而`RptValueSet` `DataSet`. 我已经证明问题出在这个循环中，而不是与数据库的通信中。获得结果很快，但将它们写入工作簿很慢。当`DataTables`in`DataSet`很小时，下面的代码可以正常工作 - 例如 3 列 7 行结果集，并且我几乎立即收到更新的 Excel 工作簿。但是，当结果集增加时，循环会明显变慢；3 列 50 行`DataTable`会导致返回更新的 Excel 工作簿时延迟 7 - 10 秒。我不确定我真的需要把`DataTables`进入一个集合，但这是我能弄清楚如何迭代它们的唯一方法。任何有关优化此循环的提示将不胜感激！

```
// Create a list to contain the destination for the data in the workbook
List<WorkbookMap> wbMap = new List<WorkbookMap>();

// Create a new data set to contain results from database
DataSet RptValuesSet = new DataSet(); 

   // RptValuesSet populated from database here....

// Create a collection so we can loop thru the dataset
DataTableCollection RptValuesColl = RptValuesSet.Tables;

for (int i = 0; i < RptValuesColl.Count; i++)
{
    DataTable tbl = RptValuesColl[i];

    // Find the correct entry in the workbook map
    for (int j = 0; j < wbMap.Count; j++)
    {
        if (wbMap[j].SPCall == tbl.TableName) 
        {
            // Write the results to the correct location in the workbook
            MovingColumnRef = wbMap[j].StartColumn;
            for (int c = 1; c < tbl.Columns.Count; c++)
            {
                row = wbMap[j].StartRow; // start at the top row for each new column
                for (int r = 0; r < tbl.Rows.Count; r++)
                {
                    // Write the database value to the workbook given the sheetName and cell address
                    UpdateValue(wbMap[j].SheetName, MovingColumnRef + row, tbl.Rows[r][c].ToString(), 0, wbMap[j].String);
                    row++;
                }
                MovingColumnRef = IncrementColRef(MovingColumnRef);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:26:18.593

无需深入研究您的代码。我注意到你说你相信缓慢来自于写到纸上。尝试在更新工作簿之前先将数据放入数组。例如，您会像这样在工作表上写信。anchorRangeName 是一个范围的名称，它只是工作簿中的一个单元格。

```
 private void WriteResultToRange(Excel.Workbook wb, string anchorRangeName, object[,] resultArray)
    {
        Excel.Range resultRange = GetRange(anchorRangeName, wb).get_Resize(resultArray.GetLength(0), resultArray.GetLength(1));
        resultRange.Value2 = resultArray;

    } 
```

您仍然需要将数据库中的数据放入数组中。

# hibernate - 防止 Grails 中的过时状态错误

> ID：13257923
> 
> 赞同：1
> 
> 时间：2012-11-06T19:23:23.823
> 
> 标签：hibernate, grails, groovy

我遇到了一个由一堆线程同时访问的方法的问题。场景是线程 A 遍历一个列表，创建并保存一个域对象。线程 B 在线程 A 仍在迭代时调用相同的方法，尝试访问线程 A 创建的域对象，并引发 StaleStateException。

为了显示：

```
def populateStudents(listOfStudents) {

   listOfStudents.each { Student student ->
      def schoolName = student.schoolName
      def school = School.findByName(schoolName) ?: new School(name: schoolName).save(flush:true)

      student.addToSchools(school)

      // So Thread A creates a new School domain object and continues to iterate.
      // Thread B comes along and finds the domain created by Thread A.
      // However, it appears that the StaleStateException is thrown when Thread B tries to addToSchools

   }

} 
```

这是堆栈：

```
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.app.School#60]
    at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1792)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2435)
    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2335)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2635)
    at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:115)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)
    at org.codehaus.groovy.grails.orm.hibernate.events.PatchedDefaultFlushEventListener.performExecutions(PatchedDefaultFlushEventListener.java:46)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)
    at org.springframework.orm.hibernate3.HibernateTemplate$28.doInHibernate(HibernateTemplate.java:883)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.flush(HibernateTemplate.java:881)
    at org.codehaus.groovy.grails.orm.hibernate.metaclass.MergePersistentMethod$1.doInHibernate(MergePersistentMethod.java:60)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
    at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:339)
    at org.codehaus.groovy.grails.orm.hibernate.metaclass.MergePersistentMethod.performSave(MergePersistentMethod.java:54)
    at org.codehaus.groovy.grails.orm.hibernate.metaclass.AbstractSavePersistentMethod.doInvokeInternal(AbstractSavePersistentMethod.java:179)
    at org.codehaus.groovy.grails.orm.hibernate.metaclass.AbstractDynamicPersistentMethod.invoke(AbstractDynamicPersistentMethod.java:59)
    at sun.reflect.GeneratedMethodAccessor23965.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSite.invoke(PojoMetaMethodSite.java:188)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:132)
    at org.codehaus.groovy.grails.plugins.orm.hibernate.HibernatePluginSupport$_addBasicPersistenceMethods_closure73.doCall(HibernatePluginSupport.groovy:814)
    at sun.reflect.GeneratedMethodAccessor845.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at org.codehaus.groovy.runtime.metaclass.ClosureMetaMethod.invoke(ClosureMetaMethod.java:80)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoMetaMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:307)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:63)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124)
    at com.app.TransactionService$_populateStudents_closure3.doCall(TransactionService.groovy:96)
    at sun.reflect.GeneratedMethodAccessor24059.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1070)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)
    at groovy.lang.Closure.call(Closure.java:282)
    at org.codehaus.groovy.runtime.DefaultGroovyMethods.eachWithIndex(DefaultGroovyMethods.java:1213)
    at org.codehaus.groovy.runtime.dgm$150.invoke(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoMetaMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:270)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124)
    at com.app.TransactionService.populateStudents(TransactionService.groovy:49)
    at com.app.TransactionService$$FastClassByCGLIB$$1b289e99.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    at com.app.TransactionService$$EnhancerByCGLIB$$8986440c.populateStudents(<generated>)

INFO UpdateController - Object of class [com.app.School] with identifier [60]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.app.School#60] 
```

有任何想法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:08:55.823

[您可以通过使用悲观锁定](http://grails.org/doc/latest/guide/GORM.html#locking)来解决此问题：

```
def school = School.findByName(schoolName, [lock: true]) ?: new School(name: schoolName).save(flush:true) 
```

# c# - 行更改后更新数据集

> ID：13257925
> 
> 赞同：0
> 
> 时间：2012-11-06T19:23:35.997
> 
> 标签：c#, sql, excel

设想：

1.  Excel 文件被读取并显示在数据网格中。
2.  如果 excel 值不同，则必须更新 sql server 中的值。
3.  Sql server 中的表没有主键

在所有这些步骤之后，当我要更新表时，它会抛出错误消息“当传递带有修改行的 DataRow 集合时，更新需要一个有效的 UpdateCommand。”

没有主键。所以我需要使用更新命令。但是更新命令的方式和内容是什么？importdata 是存储 excel 数据的字典。lz帮忙！！！我现在该怎么办？我不知道....

```
foreach (DataColumn column in ds.Tables[0].Columns)
{
    string fieldName = column.ColumnName;
    string fieldNameValueE = string.Empty;
    if (importdata.ContainsKey(fieldName))
    {
        fieldNameValueE = importdata[fieldName];
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            string fieldNameValueD = dr[fieldName].ToString();
            if (fieldNameValueD != fieldNameValueE)
            {
                dr[fieldName] = fieldNameValueE;

            }
        }

    }

}

da.Update(ds);
connection.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:49:41.990

因此，假设我们正在处理一个具有主键的表：

```
CREATE TABLE TableA
{
    FieldA INT PRIMARY KEY IDENTITY(1, 1),
    FieldB VARCHAR(256) NULL,
    FieldC VARCHAR(256) NOT NULL,
} 
```

如果你要使用`SqlCommandBuilder`（你不能因为你没有主键），它会构建一个有点像这样的语句：

```
UPDATE TableA
    SET FieldB = @p1,
        FieldC = @p2
WHERE (FieldA = @p3 AND
    ((FieldB IS NULL AND @p4 IS NULL) OR (FieldB = @p5)) AND
    FieldC = @p6) 
```

因此，您将需要构建一个`UPDATE`非常相似的语句才能按照他们的方式进行操作。但是你需要记住的一件事是它不仅仅是语句，你还必须将所有参数添加到你构建的命令中——这将变得非常麻烦。

所以，我有两个建议给你：

1.  在表上创建一个主键。
2.  在循环的每次迭代中发出一个`ExecuteNonQuery`。

第二个建议如下所示：

```
foreach (DataColumn column in ds.Tables[0].Columns)
{
    string fieldName = column.ColumnName;
    string fieldNameValueE = string.Empty;
    if (importdata.ContainsKey(fieldName))
    {
        fieldNameValueE = importdata[fieldName];
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            string fieldNameValueD = dr[fieldName].ToString();
            if (fieldNameValueD != fieldNameValueE)
            {
                dr[fieldName] = fieldNameValueE;
            }

            var cmd = new SqlCommand(string.Format(
                "UPDATE importdata SET {0} = {1} WHERE fielda = @fielda AND fieldb = @fieldb ...",
                fieldName, fieldNameValueE), connectionObject);
            cmd.Parameters.AddWithValue(@fielda, dr["fielda", DataRowVersion.Original]);
            cmd.Parameters.AddWithValue(@fieldb, dr["fieldb", DataRowVersion.Original]);

            cmd.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:49:37.010

使用 SqlCommandBuilder。

设置 DataAdapter 后，初始化命令生成器。然后使用 SqlCommandBuilder 更新功能。

```
SqlCommandBuilder cb = new SqlCommandBuilder(da);

//Do your other work updating the data

cb.DataAdapter.Update(ds); 
```

这应该够了吧！

**编辑：**

正如 BigM 所指出的，您的表需要有一个主键才能使 SqlCommandBuilder 工作。但是，如果您无法修改实际的 SQL 表并将其中一个字段标记为主键，并且您还`know`认为其中一个字段是唯一的，则可以将主键添加到 DataSet 表中，如下所示：

```
DataColumn[] pk1 = new DataColumn[1];
pk1[0] = ds.Tables["TableName"].Columns[0];
ds.Tables["TableName"].PrimaryKey = pk1; 
```

这为您的“内存中”表提供了一个主键，以便 SqlCommandBuilder 可以完成其工作。

**警告：**

您必须确保您标记为主键的列中的值实际上是唯一的。

# java - 无法在 Ubuntu 上通过 PHP 执行 Java jar 文件

> ID：13257927
> 
> 赞同：1
> 
> 时间：2012-11-06T19:23:38.953
> 
> 标签：java, php, ubuntu, nginx

这是我的PHP代码：

```
<?php
exec('java -jar ~/src/epubcheck-*/epubcheck-*.jar -out /var/www/epubcheck-outputs/output.xml /var/www/AChristmasCarol.epub'); 
```

当我在终端中尝试该命令时，它可以工作......但在 PHP 中却没有。

我什至没有得到java版本。但是我确实看到了“嘿……”所以有些命令可以工作，有些则不能。

我正在使用 NGiNX 有我的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:37:51.270

[exec](http://php.net/exec)的文档解释说，exec 只返回输出的最后一行，因此您需要使用参数来捕获完整的输出。

`java -version`将其输出发送到`STDERR`, not ，因此如果您想使用 PHP 捕获该命令的输出，则`STDOUT`需要重定向`STDERR`到。`STDOUT`但是，当您运行普通的 java 程序时，这不是必需的。

```
$output = array();

exec('java -version 2>&1', $output);
print_r($output); // contains the correct output

exec('java -jar myfile.jar', $output);
print_r($output); // should also contain the correct output 
```

如果这仍然不起作用，请参阅我对 Ibu 回答的评论

编辑：实际答案，来自问题评论：

`~/src/epubcheck-*/epubcheck-*.jar`这里可能是个问题 -`~`是*当前用户*主目录的快捷方式- 所以当你自己运行命令时，它意味着`/home/username/src/...`，但是当你作为你的网络服务器的用户运行它时，它意味着一个完全不同的路径。尝试将其更改为要执行的 jar 文件的完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:26:13.147

在 php 手册上，它说 passthru 返回 void：

> void passthru (string $command [, int &$return_var])

所以不会有任何回应。

# c++ - 为什么人们把 virtual 关键字放在 std::exception::what() 前面？

> ID：13257932
> 
> 赞同：3
> 
> 时间：2012-11-06T19:24:14.460
> 
> 标签：c++, inheritance, virtual

我最近开始将`std::exception`所有异常用作基类。`what()`如果不将`virtual`关键字放在它前面，我将无法正确覆盖。如果没有`virtual`关键字，它似乎总是调用`what()`基类的函数`std::exception`.

这让我有点困惑，因为我认为`virtual`在覆盖函数时永远不需要放在函数前面（[这是一篇](https://stackoverflow.com/questions/7756758/virtual-function-declared-non-virtual-in-a-derived-class)似乎证实了这一点的帖子）。但我决定放手，继续前进。

然后今天在阅读 O'Reilly 的“Safe C++”时，我发现作者也`what()`使用了 virtual 关键字。他写了...

```
virtual const char* what() const throw () { /* stuff */ } 
```

为什么他要覆盖一个函数并使用`virtual`关键字？正如我在上面引用的帖子中所建议的那样，它只是为了“文档”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:21:44.767

为了调用子类实现，您不必**将virtual 关键字放在覆盖 what() 的前面。**也许当您发现它正在调用基类实现时，您引用的异常对象已通过异常的不适当传递而被切片？例如，我总是通过引用捕获（根据 Scott Meyers 的建议），但是如果我通过异常值捕获并将捕获声明为可能被抛出的子类的超类，那么当我捕获它时对象将被切片。换句话说，如果我声明了这个异常子类：

```
class my_exception : public std::exception
... 
```

我像这样抓住了它的一个实例：

```
try
{
    ...
    throw my_exception("Some message");
}
catch (std::exception e)
{
    ...
} 
```

`e`在 catch 块中将是一个切片对象。您应该捕获这样的异常：

```
try
{
    ...
    throw my_exception("Some message");
}
catch (std::exception& e)
{
    ...
} 
```

# php - 特定项目的 PHP SQL 折扣代码？

> ID：13257934
> 
> 赞同：0
> 
> 时间：2012-11-06T19:24:17.263
> 
> 标签：php, sql, database, function

此函数使用单个折扣代码成功计算了全局百分比，尽管我在使代码折扣特定范围的项目而不是全局时遇到问题。购物篮会话包含 id、name、desc、price、qty 等...但是到目前为止我尝试过的一切都失败了，我意识到我需要将它实现到 foreach 循环中（我不断打破或更新每个项目的方式或其他）或完全使用不同的方法，但我真的不确定如何进行。

我不是一个经验丰富的 PHP 开发人员，我只是喜欢学习和使用基本标记。有人可以提供任何有用的指示将不胜感激。谢谢！

```
 $code = $this->request['code'];

    $discount_status = 'NONE'; // no discount available / applied
    if ( !empty($this->config['DISCOUNT_CODE']) && !empty($this->config['DISCOUNT_PERCENT']) && !empty($code) ) {
        if ( $code == $this->config['DISCOUNT_CODE'] ) {
            $discount_status = 'OK';
        }
        else {
            $discount_status = 'ERROR';
        }
    }       

    // calculate basket total
    $basket_value = 0;
    $discount_factor = 1;
    if ( $discount_status == 'OK' ) {
        // apply discount
        $discount_factor = ( 100 - $this->config['DISCOUNT_PERCENT'] ) / 100;
    }   

    if ( !empty($_SESSION['basket']) && is_array($_SESSION['basket']) ) {       
    foreach( $_SESSION['basket'] as $basketItem ) {                 
        // Apply discount to each item separately       
        $basket_value += sprintf("%.02f", $basketItem['detail_price'] * $discount_factor) * $basketItem['qty'];  
        }       
    }   

    // check delivery cost
    $delivery_area = $this->DeliveryAreaManager->getRecord($this->request['da']);
    if ( !empty($delivery_area['cost']) && ( $delivery_area['free_from'] <= 0 || $basket_value < $delivery_area['free_from'] ) ) {
        $basket_value += $delivery_area['cost'];
    }

    // return JSON response
    $data = JSONUtils::encode(
        array(
            'discount_status' => $discount_status,
            'basket_value' => sprintf("%.02f", $basket_value),
        )
    );

    return $data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:03:32.220

这：

```
foreach( $_SESSION['basket'] as $basketItem ) {                 
    // Apply discount to each item separately       
    $basket_value += sprintf("%.02f", $basketItem['detail_price'] * $discount_factor) * $basketItem['qty'];      
} 
```

是说对每个项目都应用折扣。它没有条件。您需要定义告诉代码应用折扣的条件。这是非常广泛的，所以我们不能告诉你如何为你做这件事，但我们可以告诉你如何以一种非常可怕的通用方式做到这一点......

```
foreach( $_SESSION['basket'] as $basketItem ) {                 
    // Apply discount to each item separately
    if($basketItem['discount_bracket'] == 1)
    {
        $basket_value += sprintf("%.02f", $basketItem['detail_price'] * $discount_factor) * $basketItem['qty'];  
    }
    else
    {
        $basket_value += sprintf("%.02f", $basketItem['detail_price']) * $basketItem['qty'];
    }
} 
```

现在，显然我只是编造了 $basketItem['discount_bracket'] 来告诉您，您可以通过数据库为商品制作折扣等级或某种折扣标识符。在这种情况下，我只是用它来表示如果 1 那么该项目可以打折。由您决定如何利用您现有的资源做您想做的事情。鉴于我们不知道您可以做什么或您有什么可用的，我们只能提供有限的建议。

This is just one way to handle things. If you narrow down your question I might update with a more specific example.

# build - 有没有办法以编程方式生成可用于在启动时启动 iso 映像的 ovf 文件？

> ID：13257937
> 
> 赞同：4
> 
> 时间：2012-11-06T19:24:42.417
> 
> 标签：build, build-process, build-automation, vmware, virtualbox

与 genisofs 类似，我希望能够在具有最少附加服务的机器上运行命令，并创建引用 iso 映像的 ovf 和关联数据文件，并可用于启动一组 rpm。

来自 dmtf 的文档围绕将现有 vm 转换为 ovf 或使用他们的软件包清单构建一个。

[http://schemas.dmtf.org/ovf/envelope/1/dsp8023.xsd](http://schemas.dmtf.org/ovf/envelope/1/dsp8023.xsd)

*   DiskSection_Type 并没有真正涵盖可能设置的含义
*   操作系统并没有真正涵盖我需要知道的所有内容的含义
*   如何放入 iso 映像并强制 bios 启动它？

所以，当 open-ovf 是答案时，这个被吹捧的应用程序。但是，它在 sourceforge 上的页面已经删除了所有代码，并且没有下载。

我可能可以使用一些 Java 模式类工具来创建一个像样的编辑器，但我想在花大量时间之前了解我正在编辑的内容。

[http://www.vmware.com/products/studio/overview.html](http://www.vmware.com/products/studio/overview.html)

*   这似乎对在 VM 中构建设备并为其提供 Eclipse 前端感兴趣。
*   给出的解决方案基于通过替换 vm 进行的升级，而不是与遗留代码相反的就地升级，并且在某些情况下是 IMO 的不良做法。

其他让我失望的来源：

*   [http://www.ibm.com/developerworks/linux/library/l-open-virtualization-format-toolkit/——](http://www.ibm.com/developerworks/linux/library/l-open-virtualization-format-toolkit/)谈到 open-ovf
*   [http://sourceforge.net/projects/open-ovf/](http://sourceforge.net/projects/open-ovf/) - 上次我研究这个问题时（5 年前），应该是某种重大的小组项目。它没有下载，没有代码，并且有 5 个开发人员。
*   [https://blogs.oracle.com/VirtualGuru/entry/ovf_open_virtualization_format_standard](https://blogs.oracle.com/VirtualGuru/entry/ovf_open_virtualization_format_standard) - 这里列出的项目要么是旧的，被这个问题所涵盖，要么涉及将现有的 vm 转换为 ovf。
*   ovftool - 它可以验证生成的 ovf 文件。

当我发现更多并继续玩时，我会发表评论，但我注意到在共享虚拟机的一种相当常见的格式这一主题上缺乏问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T22:46:29.187

我相信[这份文件](http://dmtf.org/sites/default/files/standards/documents/DSP0243_2.0.0.pdf)似乎很详尽，而且似乎是相当新的（2013 年 1 月）

# c - 最大和最小 - 哨兵控制重复

> ID：13257938
> 
> 赞同：2
> 
> 时间：2012-11-06T19:24:56.790
> 
> 标签：c, max, minimum, sentinel

我必须使用哨兵控制重复找到最大值和最小值。

“最大”无法正常工作。任何人都可以帮助我了解我的代码有什么问题吗？

```
#include<stdio.h>

int main() { 
  int number;
  int min;
  int max;

  do {
    printf("Enter a number (-1 to quit): ");
    scanf("%d",&number);
    if( number >= 0 ) {
      if(number < min )
        min = number;
      if( number > max )
        max = number;

    }
    else if( number < 1 )
      printf("the number is not valid \n");
  } 

  while( number != -1 );

  printf("Minimum=%d\n",min);
  printf("Maximum=%d\n",max);

  system("pause");

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:30:20.273

未初始化的变量值为 2674276，所有数字都较小，因此您的最小值很好

但没有比这更大的数字了，所以这是你的最大值。

你需要用第一个数字初始化你的最小值和最大值

我会做类似的事情

```
max = -1
min = -1

do {
    printf("Enter a number (-1 to quit): ");
    scanf("%d",&number);
    if( number >= 0 ) {
      if(max == -1)
      {
         max = number //Means it's the first time so your max and min are the first number
         min = number
      }
      else
      {
         if(number < min )
            min = number;
         if( number > max )
          max = number;

      }
    }
    else if( number < 1 )
      printf("the number is not valid \n");
  } 

  while( number != -1 ); 
```

# c# - 为标志类型的枚举定义一个“catchall”是否明智？

> ID：13257941
> 
> 赞同：2
> 
> 时间：2012-11-06T19:25:03.197
> 
> 标签：c#, enums

我有一个`enum`以下列方式声明的（但有更多选项 - 大约 15 个左右），因为我想要一种简单的方法来定义所有选项，而不必显式列出它们。

```
[Flags]
enum Options
{
    Option1 = 1,
    Option2 = 2,
    Option3 = 4,
    Option4 = 8,
    AllOptions = 15
} 
```

所以，而不是说

```
Options foo = Options.Option1 | Options.Option2 | Options.Option3 |... ad nauseum 
```

我只能说

```
Options foo = Options.AllOptions; 
```

这是明智的吗？或者是否有更好的方法来为变量提供所有可用选项而无需明确列出它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T19:27:33.050

> 或者是否有更好的方法来为变量提供所有可用选项而无需明确列出它们？

好吧，你可以使用我的[Unconstrained Melody](http://unconstrained-melody.googlecode.com)项目：

```
Options allOptions = Flags.GetUsedBits<Options>(); 
```

（然后，您可以使用 Unconstrained Melody 进行各种其他操作。）

我个人会尽量避免硬编码“全部”值 - 添加新值并忘记更新“全部”值太容易了。

（在这种情况下，我也会避免命名它`AllOptions`——它应该只是`All`，以避免在 中出现冗余`Options.AllOptions`。）

如果你*这样*做了，请添加一个单元测试以确保你做对了:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T19:27:10.883

你可以这样做：

```
[Flags]
enum Options
{
    Option1 = 1,
    Option2 = 2,
    Option3 = 4,
    Option4 = 8,
    AllOptions = Option1 | Option2 | Option3 | Option4
} 
```

这种方法的字面意思是 Option1 和 Option2 以及 Option3 和 Option4。您可以将其用作：

```
Options.AllOptions; 
```

或者

```
Options.Option1 | Options.Option2 | Options.Option3 | Option.Option4 
```

以上两种情况最终都会得到相同的结果。

# ios - Xcode 无法使用所选设备运行

> ID：13257944
> 
> 赞同：11
> 
> 时间：2012-11-06T19:25:17.787
> 
> 标签：ios, xcode, ios-simulator

当我尝试运行我的 Xcode iOS 项目时收到以下错误：

```
Xcode cannot run using the selected device. Choose a destination with a supported architecture in order to run on this device. 
```

我已经有一段时间了这个错误了。我能够通过使用实际设备而不是模拟器来解决它，但现在这也不起作用。自创建项目以来，我没有更改项目中的任何设置，我更改的只是代码本身。这以前也发生过，我修复它的唯一方法是创建一个新项目并从头开始，现在它再次发生。我很沮丧！我不知道该怎么做。我需要提供什么信息来帮助诊断？如果这意味着什么，我正在使用 facebook sdk 3.1。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-12T20:43:28.553

Target -> Build Settings -> Build Options 设置“Compiler for C/C++/Objective-C” - “Default compiler (Apple LLVM 5.0)”，问题就解决了

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-06T19:50:19.117

*   使用清理、清理文件夹、删除派生数据清理您的项目。
*   从“管理方案”中删除所有方案。重新创建它们，并使用其中任何一个包含 iPhone 模拟器版本（之前工作的那个）的任何一个进行构建。

如果这不起作用，请尝试以下操作：

*   使用清理、清理文件夹、删除派生数据清理您的项目。
*   使用您最喜欢的编辑器，尝试从您的 project.pbxproj 文件中清除所有配置文件字符串（当您使用“显示包内容”命令打开您的 xcode 项目时看到的那个）。

见下图 - 您必须删除所有包含“Provisioning Profile”的行，直到 ; 特点。

*   然后重启xcode。使用自动配置文件选择器选择配置文件并使用 iphone 模拟器方案构建。

![在此处输入图像描述](../Images/e0cd6afa1b84318aa5609b6a902822ae.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T13:11:19.307

检查 Info.plist 文件中的可执行文件（也称为 CFBundleExecutable）是否设置为**${EXECUTABLE_NAME}**，而不是任何硬编码值。这将确保即使您更改项目名称或目标名称或方案名称，它仍然有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-17T16:15:15.583

尝试运行 DEBUG 构建时出现此错误。我将 DEBUG 的“Build Active Architecture”更改为 YES，经过数小时的挫折后，这个错误终于消失了。我尝试了在这个网站上阅读的大约 10 种不同的东西，但没有其他任何效果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T02:27:51.730

请检查以下内容： - 用另一根电缆连接您的设备。- 检查电缆是否正确连接。这是我的问题谢谢

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-23T15:10:52.470

我发现错误是因为构建设置中不支持的编译器。检查项目构建设置 --> 构建选项 --> C/C++/Objective-C 编译器。更改为“默认编译器（Apple LLVM 5.0）”。一切都好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-26T07:41:45.817

我通过重启 mac 解决了（也重启了 iPad）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-04T02:49:14.780

我遇到了同样的问题，并通过在 Resources 中打开 info.plist 文件并取消选中目标成员资格来修复它，以便没有任何内容被检查为目标成员资格。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-03T20:49:55.863

尝试测试我的应用程序时出现此错误。这对我有用：

在 Targets > Build Settings 中，我更改了 Product Name 以匹配 Target 名称，这为我修复了它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-01T14:51:57.033

在 XCode 6 中，我打开了“设备”窗口（Window/Devices）并注意到我的 iPhone 并未在其中列出，即使当时它已插入 Mac。我拔下它，然后在“设备”窗口打开时将其重新插入，它出现在设备列表和方案选择器中。

# jquery - 隐藏在 FullCalendar 事件下的 JQuery 自动完成下拉菜单

> ID：13257947
> 
> 赞同：0
> 
> 时间：2012-11-06T19:25:30.147
> 
> 标签：jquery, autocomplete, fullcalendar

页面上呈现的 html 序列：
1\. 文本框，空日历
2\. 日历呈现事件
3\. 在文本框中键入以获取自动完成下拉菜单。

我可以在日历事件 div 上显示自动完成下拉菜单吗？谢谢，

![在此处输入图像描述](../Images/a6661b8d77394e4d19dffe47c8bbb4ca.png)

修复：
Z-idex 与绝对位置一起工作：z-index: 10 ;position: absolute; 顶部：200px；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:28:44.103

查看 CSS 属性 z-index。您可以将下拉列表的 z-index 设置为大于其他元素。

小心你如何实现这一点。一种常见的方法是对 z-index 使用 10 的间隔，并将 9999 作为您知道永远不会超过的“屋顶”。这确保了将来您可以继续在现有元素之间添加元素。

# javascript - 使用jQuery循环插件绑定到回调之前的函数触发两次

> ID：13257948
> 
> 赞同：0
> 
> 时间：2012-11-06T19:25:30.020
> 
> 标签：javascript, jquery, jquery-plugins, jquery-cycle

我正在使用[jQuery Background Position](http://keith-wood.name/backgroundPosRef.html)插件和[jQuery Cycle](http://jquery.malsup.com/cycle/)插件来尝试在幻灯片滚动的同时制作滑块和背景图像动画。这是我到目前为止的示例：

HTML

```
<div class="container">
    <div class="slider">
        <div class="pane">
            Text asd dddsa sadsad
        </div>
        <div class="pane">
            Text asd dddsa sadsad
        </div> 
        <div class="pane">
            Text asd dddsa sadsad
        </div>        
    </div>
    <a href="#" id="prev-slide">&lt; Prev</a>
    <a href="#" id="next-slide">Next &gt;</a>
</div>​ 
```

JS

```
$(function() {
    // Animate background when clicking slider arrows
    $('#prev-slide').on('click', function(event) {
        event.preventDefault();
        slideBgForward();
    });

    $('#next-slide').on('click', function(event) {
        event.preventDefault();
        slideBgBackward();
    });

    $('.slider').cycle({
        fx   : 'scrollHorz',
        next : '#next-slide',
        prev : '#prev-slide',
        before : function(currSlideElement, nextSlideElement, options, forwardFlag) {
            if (forwardFlag) {
                slideBgBackward();
            } else {
                slideBgForward();
            }                
        }            
    });

    // Slide background forwards
    function slideBgForward() {
        $('.container').animate({
            backgroundPosition: '-=20% 0'
        }, 1500);
    }

    // Slide background backwards
    function slideBgBackward() {
        $('.container').animate({
            backgroundPosition: '-=20% 0'
        }, 1500);
    }
});​ 
```

[http://jsfiddle.net/vengiss/gshtZ/](http://jsfiddle.net/vengiss/gshtZ/)

如果我让滑块滚动，它会按预期工作，但是如果我单击下一个/上一个链接在幻灯片中移动，背景动画两次，我相信这是因为在单击链接时和之前调用了幻灯片函数幻灯片开始滚动。有没有办法让它只滚动一次？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:41:35.147

我认为你的问题是你已经要求`('.slider').cycle()`处理你的`next`and `prev`，**并且**你也要求 jQuery 来处理它们 - 每个人都在做你要求的事情，因此，你的背景动画两次。

我很想尝试删除/禁用`$('#next-slide').on('click')`并`$('#prev-slide').on('click')`看看会发生什么。

# curl - 使用 curl 时缺少弹性搜索的结果

> ID：13257952
> 
> 赞同：1
> 
> 时间：2012-11-06T19:25:43.327
> 
> 标签：curl, elasticsearch

我第一次尝试弹性搜索。我只有 1 个节点和 1 个索引。

```
curl -XPUT http://localhost:9200/testing/dummy/1 -d '{
                "snapshotTime" : "2012-10-31T13:31:21",
                "ratio" : "50",
                "description" : "sample description"

}' 
```

我已经索引了 500 个这样的假人来索引“测试”。

```
http://localhost:9200/testing/dummy/1 
```

. . . .

```
http://localhost:9200/testing/dummy/500 
```

现在，当我用这个数据集尝试 matchAll 查询时，

```
curl -XGET 'http://localhost:9202/_all/_search?pretty=true' -d '
{ 
    "query" : { 
        "matchAll" : {} 
    } 
}' 
```

我只得到 10 个结果，而且每次都是随机的。但是，总命中数仍为 500。命中数组仅包含 10 个条目。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:33:16.047

我从弹性搜索用户邮件列表中得到了答案。（来源：Radu Gheorghe） [http://www.elasticsearch.org/guide/reference/api/search/from-size.html](http://www.elasticsearch.org/guide/reference/api/search/from-size.html)

搜索 API 中的 from/size 允许控制结果集的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T02:36:10.053

`http://127.0.0.1:9200/foo/_search/?size=1000&pretty=1`

请注意 size 参数，它将显示的命中数从默认值 (10) 增加到 1000。

[http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-from-size.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-from-size.html)

# android - configchanges 编译错误

> ID：13257955
> 
> 赞同：2
> 
> 时间：2012-11-06T19:26:07.103
> 
> 标签：android, compilation, intellij-idea, android-manifest, admob

我遇到了这个问题，我找不到解决方案。我正在使用 Intellij。我将 SDK 设置为 Android 4.03，target=android-13，android:minSdkVersion="8" android:targetSdkVersion="15"，但仍然出现编译错误

... 错误：错误：不允许使用字符串类型（在 'configChanges' 处，值为 'keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize'）。

它仅突出显示“screenSize|smallestScreenSize”部分，但如果没有这两个部分，AdMob 广告将无法正常工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:43:27.623

找到了！因为我最初将它设置为较低的 API，所以在依赖项中它仍然设置为 Android 2.0.3，尽管说 SDK 是 4.0.3。

# mysql - mysql 高效执行数百万条 INSERT 语句

> ID：13257961
> 
> 赞同：0
> 
> 时间：2012-11-06T19:26:33.610
> 
> 标签：mysql, xml, amazon-web-services

我知道我可能不是这样做最有效的方式。我有以 XML 格式存储的数据，我将 XML 数据解析为单独的 INSERT INTO .. VALUES (..) 语句，然后执行这些语句。有没有一种好方法可以批量执行数百万条 INSERT INTO 语句？

我无法使用常规 SQL 服务器实用工具导入 XML 数据，因为我在 AWS 上运行它。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:02:12.130

使用 multi`INSERT`方法，你提供多组`VALUES`总是比单独做更好。您应该构建与您的设置一样大的语句`max_allowed_packet`，并在理想情况下将其调整为尽可能高。2GB 通常是可以达到的最高容量，为了获得最大速度，您至少需要 10-50MB 大小的块。

`LOAD DATA INFILE`也是一种选择，但这通常最多比多`INSERT`方法快 10-15%，并且要求数据以特定格式启动。CSV 或制表符分隔是最容易使用的，XML 不是一个选项。

为了获得最佳性能，请在插入大量数据之前禁用任何索引。`mysqldump`即使在空数据库模式的快照中，您也可以看到其中的一些技巧。

要禁用索引，请在导入之前执行此语句：

```
 ALTER TABLE `table_name` DISABLE KEYS; 
```

然后在导入之后，重建它们：

```
 ALTER TABLE `table_name` ENABLE KEYS; 
```

# xamarin.ios - 使用 MonoTouch 在 iOS6 上部署时出现“Executable Twiddle Failed Error”

> ID：13257962
> 
> 赞同：2
> 
> 时间：2012-11-06T19:26:38.603
> 
> 标签：xamarin.ios, ios6

我的 iPhone 上安装了以前版本的应用程序 (v1.1)，从 App Store 下载。

开发中的新版本 (v1.2) 可以从 iOS 4.x 和 5.x 上的 MonoTouch(6.0.4)/MonoDevelop 正确部署，但是当尝试在 iOS 6 上部署时，我得到：

> 安装失败：可执行 Twiddle 失败错误

类似于： [使用 MonoTouch 部署 IOS6 应用程序时出错](https://stackoverflow.com/questions/12668144/error-deploying-ios6-application-using-monotouch)

...但是我在iPhone|Debug 和 iPhone|Release 部署中*都*遇到了这个错误。

如果我从 iPhone 中删除应用程序并进行“干净”安装，则部署工作正常。

我有两个问题：

Q1：当设备上安装了以前的版本（来自 App Store）时，有没有办法使部署（从 MonoTouch/MonoDevelop）到 iOS 6 工作？

Q2：我如何知道安装了以前版本（v 1.1）的用户在从App Store下载新的二进制文件（v 1.2）时是否会遇到同样的问题？（我不能要求他们在下载新版本之前删除该应用程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:42:32.417

1.  当我看到此错误时，这是​​因为项目范围的设置已更改（例如可执行文件名称或项目名称） - 但我从未准确找到导致它的设置。我会比较 *.csproj 和 Info.plist 文件以查看您的 v1.1 和 v1.2 之间是否有任何差异，然后尝试一一还原更改，直到找到有问题的更改。

2.  我从未见过从 AppStore 安装的应用程序报告此问题。

# sqlplus - DateDiff 函数

> ID：13257968
> 
> 赞同：1
> 
> 时间：2012-11-06T19:27:20.890
> 
> 标签：sqlplus, datediff

我正在尝试[DateDiff 函数的一些示例](http://www.w3schools.com/sql/func_datediff.asp)

```
SELECT DATEDIFF(day,'2008-06-05','2008-08-05') AS DiffDate 
```

该语句给了我一个错误 From keyword not found where expected 。为什么我会收到此错误，我该如何解决？另外，当我尝试这个时：

```
SELECT DATEDIFF(day,datebegin,datestop) 
From table; 
```

我得到这个错误`"datediff" invalid identifier`。我怎样才能获得日差？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:35:24.467

What database are you using?

A google search gave me this:

[http://www.mssqltips.com/sqlservertip/2508/sql-server-datediff-example/](http://www.mssqltips.com/sqlservertip/2508/sql-server-datediff-example/)

DAY SELECT DATEDIFF(DD,'09/23/2011 15:00:00','08/02/2011 14:00:00')

where 'DD' is used as opposed to 'days'.

Try answering these question:

What database I'm using?

Is the database case sensitive? This might be the error occurring with the datediff as oppose to DATEDIFF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:30:19.030

尝试`SELECT DATEDIFF(dd,datebegin,datestop) from table`

我认为“一天”也有效，我能够执行：

```
SELECT DATEDIFF(day,'1/1/2011','1/1/2012') 
```

所以我不确定你做错了什么。你使用的是什么版本的 SQL Server？

# spring - Spring批处理存储库日志记录

> ID：13257971
> 
> 赞同：1
> 
> 时间：2012-11-06T19:27:30.477
> 
> 标签：spring, spring-batch

可以记录spring批处理为存储作业存储库信息而进行的sql调用吗？我正在使用 oracle 数据库，但我无法找到记录这些调用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:30:40.430

Spring论坛上的[这个链接可能会有所帮助。](http://forum.springsource.org/showthread.php?83802-View-the-SQL-generated-by-Spring-Batch)

Spring Batch 框架将只使用 Spring Framework JDBC 类，因此调整核心日志记录将为您提供所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T00:12:50.953

根据您的要求，最好使用 hibernate 作为 Spring Batch 的 ORM，因为它具有记录 sql 语句的能力。下面是我使用休眠创建的示例。

```
https://github.com/alex-fernandez/create-batch-job-mysql 
```

# android - MediaButtonIntentReceiver 在 Android 4.0+ 中不起作用

> ID：13257982
> 
> 赞同：11
> 
> 时间：2012-11-06T19:28:35.777
> 
> 标签：android, android-intent, media-player, android-4.0-ice-cream-sandwich

目标是拦截来自耳机的广播以及最终的蓝牙，以响应来自耳机的不同类型的点击以改变媒体播放器。此解决方案适用于 ICS 之前的所有版本。这是我尝试过的一些代码和事情：

```
....
private BroadcastReceiver mediaButtonReceiver = new MediaButtonIntentReceiver();
....
public void onCreate() {
    ...
    IntentFilter mediaFilter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);
    mediaFilter.setPriority(2147483647); // this is bad...I know
    this.registerReceiver(mediaButtonReceiver, mediaFilter);
    ...
}

public class MediaButtonIntentReceiver extends BroadcastReceiver {

    private KeyEvent event;

    public MediaButtonIntentReceiver() {
        super();
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        String intentAction = intent.getAction();
        if (!Intent.ACTION_MEDIA_BUTTON.equals(intentAction)) {
            return;
        }
        event = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
        if (event == null) {
            return;
        }
        try {
            int action = event.getAction();

            switch(action) {

                case KeyEvent.ACTION_UP :
                    Log.d("TEST", "BUTTON UP");
                    break;
                case KeyEvent.ACTION_DOWN :
                case KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE :
                    Log.d("TEST", "BUTTON DOWN");
                    break;
            }
        } catch (Exception e) {
            Log.d("TEST", "THIS IS NOT GOOD");
        }
        abortBroadcast();
    }
} 
```

为了尝试使这项工作，听起来 4.0+ 需要这样的东西，但它不起作用：

```
((AudioManager)getSystemService(AUDIO_SERVICE)).registerMediaButtonEventReceiver(new ComponentName(this, MediaButtonIntentReceiver.class)); 
```

除了上述内容之外，我什至尝试将其添加到清单中：

```
 <receiver android:name=".MediaButtonIntentReceiver" android:enabled="true">
        <intent-filter android:priority="2147483647" >
            <action android:name="android.intent.action.MEDIA_BUTTON" />
        </intent-filter>
    </receiver> 
```

仍然没有运气。我在这里想念什么？这肯定是 4.0+/ICS/JellyBean 问题...这是在服务中完成的，而不是在活动中完成的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T01:34:23.863

看起来您的广播接收器是您服务的内部类？如果是这样，请将您的广播接收器设为静态并在清单中执行以下操作：

```
<receiver android:name="MyOuterClass$MediaButtonIntentReceiver" android:enabled="true">
    <intent-filter android:priority="2147483647" >
        <action android:name="android.intent.action.MEDIA_BUTTON" />
    </intent-filter>
</receiver> 
```

在 Android 3.0+ 中您必须使用`registerMediaButtonEventReceiver`来注册接收器。这将 AndroidManifest 用于 IntentFilter。它在 2.x 中工作的原因是因为您正在注册它，`this.registerReceiver()`它在没有 AndroidManifest 的情况下注册了接收器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:08:29.170

试试果冻，这对我有用：

```
 broadcastReceiver = new BroadcastReceiver() {//global BroadcastReceiver
            @Override
            public void onReceive(Context context, Intent intent) {

                String action = intent.getAction();
                if(action.equals("android.intent.action.MEDIA_BUTTON")){
                    Log.e("test", "ok");
                }
            }; 
```

意图：

```
 IntentFilter intentfilterTime = null;
        intentfilterTime = new IntentFilter();  
        intentfilterTime.addAction("android.intent.action.MEDIA_BUTTON");
        registerReceiver(broadcastReceiver, intentfilterTime); 
```

使用 Widgetsoid 的媒体按钮（模拟 BT 媒体按钮）从服务中测试。一切正常。

# c - 如何处理 fork-exec 上的共享内存和共享信号量？

> ID：13257983
> 
> 赞同：1
> 
> 时间：2012-11-06T19:28:40.343
> 
> 标签：c, multithreading, exec, fork, shared

我想将新功能添加到一个成长的应用程序中，以使用 fork (2) 和 exec (3) (当前为 execl) 开始执行另一个应用程序。

不幸的是，该应用程序使用共享内存、共享信号量并且有大量打开的文件描述符，在调用 fork 时这些描述符都是重复的。我知道我应该在子进程中调用 execl 之前关闭所有文件描述符、共享资源等，但是其中一部分由第三方库处理，我无法访问它们。

最重要的是，所有应用程序都是线程化的（使用 posix 线程），但只要子进程中的 fork 和 exec 之间没有异步系统调用（根据[http://www.linuxprogrammingblog.com/threads -and-fork-think-twice-before-using-them](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them) )。

我现在面临的问题是 execl 调用似乎以某种方式破坏了共享资源，导致使用它们的线程出现死锁。这似乎只在调用 execl 时发生，因为在使用 _exit (2) 的 fork 后立即退出子进程不会产生这种行为。

使用 fork 和 exec 生成新进程时，处理共享内存和共享信号量的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:22:30.900

这里可能存在多个问题，包括 fork() 和 exec() 代码中的错误，甚至是程序使用共享内存和信号量的方式中的错误。

处理此问题的一种可能方法是使用[system()](http://linux.die.net/man/3/system)函数。

这将在 shell 环境中运行命令并阻塞，直到程序退出。您可以生成一个新线程，然后调用 system. 让内置函数处理正确的 fork() 和 exec()。

如果您仍然有问题，那么我会说您的共享内存/信号量与 fork 和 exec 不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:41:13.497

您的死锁很可能是由于未关闭子文件描述符造成的。在尝试其他任何事情之前，请尝试以下操作：

遍历子文件中的所有文件描述符`/proc/[pid]/fd`并在调用之前关闭它们`exec`。

如果这不起作用，那么您必须将所有内存（除了堆栈帧之外）标记`MADV_DONTFORK`为`madvise`. 您可以通过将映射范围与本地线程堆栈上的任何指针进行比较来获取所有当前映射的列表`/proc/[pid]/maps`和本地堆栈帧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:00:09.570

我现在用来关闭所有文件描述符的代码再次在这里（在评论中看起来不太好）。

```
 DIR* hdir = opendir("/proc/self/fd/");
    struct dirent* entry;
    int fd;

    if (hdir != NULL) {
        while ((entry = readdir(hdir)) != NULL) {
            fd = strtol(entry->d_name, NULL, 10);

            if (fd > 2)
                close(fd);
        }

        closedir(hdir);
    } 
```

那关闭了我十几个文件描述符。

# java - 检查输入是否完成

> ID：13257984
> 
> 赞同：1
> 
> 时间：2012-11-06T19:28:41.893
> 
> 标签：java

所以我是一个 Java 新手，开始玩一些文件。假设我有一些文件“tes.t”，其中包含我已知类型的数据——假设它们是 int-double-int-double 等等。不过，我不知道里面有多少这样的对 - 我怎样才能确保输入已经完成？根据我目前的知识，我想到了这样的事情：

```
try{
        DataInputStream reading = new DataInputStream(new FileInputStream("tes.t"));
        while(true)
        {
            System.out.println(reading.readInt());
            System.out.println(reading.readDouble());
        }
        }catch(IOException xxx){}
} 
```

然而，这里的这个无限循环让我有点不舒服。我的意思是 - 我猜 IOException 应该在输入完成后立即赶上，但我不确定这是否是一个好方法。有没有更好的方法来做到这一点？或者更确切地说-*什么*是更好的方法，因为我确定我的方法不好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:53:32.197

由于您的文件具有 int-double 对，您可以执行以下操作：

```
DataInputStream dis = null;
try {
    dis = new DataInputStream(new FileInputStream("tes.t"));
    int i = -1;
    // readInt() returns -1 if end of file...
    while ((i=dis.readInt()) != -1) {
        System.out.println(i);
        // since int is read, it must have double also..
        System.out.println(dis.readDouble());
    }

} catch (EOFException e) {
    // do nothing, EOF reached

} catch (IOException e) {
    // handle it

} finally {
    if (dis != null) {
        try {
            dis.close();

        } catch (IOException e) {
             // handle it
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:38:13.037

您可以执行以下操作：

```
try{
  FileInputStream fstream = new FileInputStream("tes.t");
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  //Read File Line By Line
  while ((strLine = br.readLine()) != null)   {
  System.out.println (strLine);
  }
  //Close the input stream
  in.close();
  }catch (IOException e){//Catch exception if any
 System.err.println("Error: " + e.getMessage());
 } 
```

注意：此代码未经测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:35:59.127

这是来自javadoc：

> 抛出：EOFException - 如果此输入流在读取四个字节之前到达末尾。

这意味着您可以`EOFException`确保 EOF 已达到。您还可以添加某种应用程序级别标记，显示文件已被完全读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:41:38.043

这个怎么样：

```
DataInputStream dis = null;
try {
    dis = new DataInputStream(new FileInputStream("tes.t"));
    while (true) {
        System.out.println(dis.readInt());
        System.out.println(dis.readDouble());
    }

} catch (EOFException e) {
    // do nothing, EOF reached

} catch (IOException e) {
    // handle it

} finally {
    if (dis != null) {
        try {
            dis.close();

        } catch (IOException e) {
            // handle it
        }
    }
} 
```

# unit-testing - 不在默认 src/test/java 文件夹中运行 maven 测试

> ID：13257987
> 
> 赞同：3
> 
> 时间：2012-11-06T19:28:51.867
> 
> 标签：unit-testing, maven

我有一个包含`pom.xml`和一些`JUnit`测试的项目。`pom.xml`和单元测试都是正确的。但问题是测试不在 src/test/java 文件夹中（我不能使用这个文件夹）。是否可以告诉 maven 从另一个源文件夹（也在这个项目中）执行测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:30:15.090

将此部分添加到您的 pom 中就足够了：

```
<project>
    ...
    <build>
        <testSourceDirectory>src/int-test/java</testSourceDirectory>
    </build>
    ...
</project> 
```

测试源将在此`test-compile`阶段编译，并且`maven-surefire-plugin`也会找到测试类。

# android - ScrollView 内的 Android WebView 仅滚动滚动视图

> ID：13257990
> 
> 赞同：45
> 
> 时间：2012-11-06T19:28:56.903
> 
> 标签：android, webview, scroll, scrollview

在我的应用程序中，我有一个 ScrollView，其中包含一些线性视图、一些文本视图和一个 Webview，然后是其他线性布局等。问题是 WebView 不滚动。Scroll 仅在 ScrollView 上侦听。有什么建议么？？

* * *

```
<ScrollView >
    <TextView />
    <WebView />              <-- this does not scroll
    <TextView />
</ScrollView > 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-13T00:25:11.927

这是解决方案。网上找的。我已经将 WebView 子类化，并且我正在使用该`requestDisallowInterceptTouchEvent(true);`方法来允许我的 webview 处理滚动事件。

> TouchyWebView.java

```
package com.mypackage.common.custom.android.widgets

public class TouchyWebView extends WebView {

    public TouchyWebView(Context context) {
        super(context);
    }

    public TouchyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public TouchyWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event){
        requestDisallowInterceptTouchEvent(true);
        return super.onTouchEvent(event);
    }          
} 
```

在 layout.xml 中

```
<com.mypackage.common.custom.android.widgets.TouchyWebView 
                android:id="@+id/description_web"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                 /> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-04-07T22:08:52.373

@panos 提供的解决方案有效，但与 ScrollView 一起使用时仍然存在问题。下面的增强版本克服了这个问题。

```
public class TouchyWebView extends WebView {

    public TouchyWebView(Context context) {
        super(context);
    }

    public TouchyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public TouchyWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

     @Override
     public boolean onTouchEvent(MotionEvent event) {
         //Check is required to prevent crash
         if (MotionEventCompat.findPointerIndex(event, 0) == -1) {
         return super.onTouchEvent(event);
         }

         if (event.getPointerCount() >= 2) {
             requestDisallowInterceptTouchEvent(true);
         } else {
             requestDisallowInterceptTouchEvent(false);
         }

         return super.onTouchEvent(event);
    }

    @Override
    protected void onOverScrolled(int scrollX, int scrollY, boolean clampedX, boolean clampedY) {
        super.onOverScrolled(scrollX, scrollY, clampedX, clampedY);
        requestDisallowInterceptTouchEvent(true);
    }

} 
```

此外，您可能希望对 TouchyWebView 进行以下设置。

```
mWebView.getSettings().setLoadWithOverviewMode(true);
mWebView.getSettings().setUseWideViewPort(true);
mWebView.getSettings().setSupportZoom(true);
mWebView.getSettings().setBuiltInZoomControls(true); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-24T11:23:20.733

Panos 解决方案对我来说就足够了，但有一个例外......我的固定高度 (200dp)`WebView`可能是空的，或者可能已经加载了很多内容。所以它可能是也可能不是可滚动的“本身”。Panos 解决方案总是消耗`MotionEvent`s，所以当`WebView`它是空的并且用户触摸`WebView`并尝试滚动`WebView`时将不会滚动（因为没有内容）和可滚动的父级也会导致`WebView`“吞咽” `MotionEvent`- 所以什么也没有发生。我`if`为预期的行为添加了小声明：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    if(computeVerticalScrollRange() > getMeasuredHeight())
        requestDisallowInterceptTouchEvent(true);
    return super.onTouchEvent(event);
} 
```

*   何时`WebView`为空且不可垂直滚动`computeVerticalScrollRange() == getMeasuredHeight()`
*   当`WebView`内容长于其高度（可滚动）时`computeVerticalScrollRange() > getMeasuredHeight()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-30T07:11:10.537

解决了@Panos 和@Dipendra 的解决方案，我在滚动视图中的地图视图仍然存在一些问题。它不会始终垂直滚动，并且这些方法已被弃用，所以我想出了这个技巧，我在滚动视图中使用 mapview 并且效果很好。我希望这可以帮助你们中的一些人。

```
public class TouchyWebView extends WebView {
ViewParent mViewParent;

public TouchyWebView(Context context) {
    super(context);
}

public TouchyWebView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public TouchyWebView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public void setViewParent(@Nullable final ViewParent viewParent) { //any ViewGroup
    mViewParent = viewParent;
}

@Override
public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            if (null == mViewParent) {
                getParent().requestDisallowInterceptTouchEvent(true);
            } else {
                mViewParent.requestDisallowInterceptTouchEvent(true);
            }
            break;
        case MotionEvent.ACTION_UP:
            if (null == mViewParent) {
                getParent().requestDisallowInterceptTouchEvent(false);
            } else {
                mViewParent.requestDisallowInterceptTouchEvent(false);
            }
            break;
        default:
            break;
    }
    return super.onTouchEvent(event);
}

@Override
protected void onOverScrolled(int scrollX, int scrollY, boolean clampedX, boolean clampedY) {
    super.onOverScrolled(scrollX, scrollY, clampedX, clampedY);
    requestDisallowInterceptTouchEvent(true);

} 
```

}

我还遵循了@Dipendra 关于设置控件的建议。

```
mWebView.getSettings().setLoadWithOverviewMode(true);
mWebView.getSettings().setUseWideViewPort(true);
mWebView.getSettings().setSupportZoom(true);
mWebView.getSettings().setBuiltInZoomControls(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-05T08:10:39.687

### 只需在类文件中添加一行

```
mWebview.setNestedScrollingEnabled(true); 
```

**或`Webview`在 XML 中添加标签**

```
android:nestedScrollingEnabled="true" 
```

> 警告：仅适用于 API 21 和 21+

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-24T07:28:36.377

仍然发生在`react-native-webview`，这里跟踪的问题 [https://github.com/react-native-community/react-native-webview/issues/22](https://github.com/react-native-community/react-native-webview/issues/22)

* * *

## 回答 #7

> 赞同：-15
> 
> 时间：2012-11-06T19:34:38.290

You can change into 3 layouts:

1.  First TextView - header
2.  WebView - main layout
3.  Second TextView - footer

```
WebView web = (WebView) findViewById(R.id.webView);
View header = getLayoutInflater().inflate(R.layout.header_layout, null);
View footer = getLayoutInflater().inflate(R.layout.foorer_layout, null);
web.addHeaderView(headerComment);
web.addFooterView(footerComment); 
```

# html - 无法在 IE9 和 IE8 中的链接文本上获得省略号

> ID：13257991
> 
> 赞同：6
> 
> 时间：2012-11-06T19:28:57.200
> 
> 标签：html, css, dom

```
<div class="jspPane" style="padding: 0px; top: 0px; width: 138px;">
   <ul style="display: block;">
     <li class="hyperlink" >
        <span class="xyz1" style="background-image:url(/Content/images/icon_link_16x7.png);"> View on Bing Maps website</span>
    </li>
  </ul>
</div> 
```

////班级 //

```
 ul li {
    color: #137AFF;
    height: 25px;
    overflow: hidden;
    padding-left: 5px;
    padding-right: 4px;
    padding-top: 4px;
    text-align: left;
    text-overflow: ellipsis;
    width: 138px;
}
.hyperlink {
    color: #13A3F7;
    font-size: 12px !important;
    text-decoration: underline;
    white-space: nowrap;
} 
```

我的问题是我想在最里面的跨度内的文本上省略号。我无法在 IE9 和 IE8 上得到省略号。它在火狐中运行良好。我尝试删除 span 并改用 div ，但没有帮助。如果我遗漏了什么，请告诉我。感谢所有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T22:09:43.723

据我所知，阅读有关的[msdn 开发人员文章`text-overflow`](http://msdn.microsoft.com/en-us/library/ie/ms531174(v=vs.85).aspx)，您需要使用`-ms-text-overflow`：

```
ul li {
    color: #137AFF;
    height: 25px;
    overflow: hidden;
    padding-left: 5px;
    padding-right: 4px;
    padding-top: 4px;
    text-align: left;
    text-overflow: ellipsis;
    -ms-text-overflow: ellipsis;
    width: 138px; /* note that this width will have to be smaller to see the effect */
} 
```

[**演示**](http://jsfiddle.net/uWcuJ/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-22T14:05:13.740

这些是我的设置，它们有效：

```
 .node-title {
        width: 90%;
        font-size: 95%; 
        color: #4d4d4d; 
        white-space: nowrap !important;
        overflow: hidden;
        text-overflow: ellipsis;
        word-wrap: normal !important;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T14:10:02.277

**空白：nowrap；**[是这里的关键，Daedalus 引用的文章实际上甚至没有在自己的代码示例](http://samples.msdn.microsoft.com/workshop/samples/author/css/textOverflow.htm)中使用该类属性值。

```
ul li {
color: #137AFF;
height: 25px;
overflow: hidden;
padding-left: 5px;
padding-right: 4px;
padding-top: 4px;
text-align: left;
width: 138px;
text-overflow: ellipsis;
**white-space:nowrap;**
} 
```

[工作示例](http://jsfiddle.net/christauff/BS3L9/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T13:07:26.330

即使这两个其他答案是正确的，但是**如果您使用自定义字体**，它就会出现**问题**，例如。谷歌网络字体。

 **使用 IE8 渲染省略号的演示与自定义字体错误：http:
[//jsbin.com/odiqux/1](http://jsbin.com/odiqux/1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-10T12:04:00.680

@micadelli，我在 IE9 上遇到了类似的问题，我在应该用省略号呈现的文本之前有一个基于 Web 字体的图标。

解决方案是将其添加到类中：

```
.node-title:before {
    content: '';
} 
```

另请参阅[Font-Awesome](https://github.com/FortAwesome/Font-Awesome/issues/1079)和[Bootstrap](https://github.com/twbs/bootstrap/pull/13199)上的此问题：**

# php - 当我的 PHP 中发生事件时，如何使用 JSON 数据通知 C++ 应用程序？

> ID：13257992
> 
> 赞同：0
> 
> 时间：2012-11-06T19:28:57.527
> 
> 标签：php, c++

基本上，我想在我的 PHP 页面中发生事件时通知 C++ 应用程序（游戏应用程序）。

下面是一个例子：

*   用户登录网站并购买东西。
*   PHP 验证此事务并将 JSON/XML 对象返回给 C++ 应用程序。
*   C++ 应用程序接收 transactionID 并向用户提供他购买的商品。

现在我这样做很糟糕。PHP 写入数据库，C++ 应用程序不断读取数据库，导致性能损失。

我怎样才能归档这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:44:31.897

使用[ZeroMQ](http://www.zeromq.org/)同时支持 PHP 和 C++；

简单的 hello World 示例

```
//
//  Hello World server in C++
//  Binds REP socket to tcp://*:5555
//  Expects "Hello" from client, replies with "World"
//
#include <zmq.hpp>
#include <string>
#include <iostream>
#include <unistd.h>

int main () {
    //  Prepare our context and socket
    zmq::context_t context (1);
    zmq::socket_t socket (context, ZMQ_REP);
    socket.bind ("tcp://*:5555");

    while (true) {
        zmq::message_t request;

        //  Wait for next request from client
        socket.recv (&request);
        std::cout << "Received Hello" << std::endl;

        //  Do some 'work'
        sleep (1);

        //  Send reply back to client
        zmq::message_t reply (5);
        memcpy ((void *) reply.data (), "World", 5);
        socket.send (reply);
    }
    return 0;
} 
```

PHP

```
$context = new ZMQContext();
$requester = new ZMQSocket($context, ZMQ::SOCKET_REQ);
$requester->connect("tcp://localhost:5555");

//Send Simple Request
$requester->send("Hello");

//Get Response Form C++
printf("Received reply %s", $requester->recv()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:42:41.293

有不同的方法来解决问题。您可以创建一个简单的 C++ 服务侦听。每当在 PHP 中处理新订单时，它应该通知 C++ 的服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:45:24.347

您正在寻找的是一个不错的[进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)选择。如果它在单个系统上，那么套接字是一个常见的选择。应用程序位于不同的系统上，这取决于您的一些要求。

# c# - 我有一个基于两个外键的表

> ID：13257994
> 
> 赞同：0
> 
> 时间：2012-11-06T19:29:01.400
> 
> 标签：c#, asp.net

我有一个基于两个外键的表。一是`memberID`，二是`movieID`。我需要从该表中取出连接这两者的行并从同一行获取`RentDays`，即`int`.

我这样做了，但我认为它不好：

```
public int  GetRentDays(int memberID, string movieID)
{      
    var movieRentDays = 
        from Rents in videoLibDB.Rents
        where Rents.MemberID == memberID && Rents.MovieID == movieID
        select Rents.RentDays;
        return  movieRentDays ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:33:33.077

Your code will work, but you can consider JOIN construction

```
var movieRentDays= from Rents in videoLibDB.Rents
                       join member in memberTable
                           on Rents.MemberID equals memberTable.memberID
                       join movie in movieTable
                           on Rents.MemberID equals movieTable.movieID
                   select Rents.RentDays;

var singleRentDay = movieRentDays.FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:34:18.297

You are selecting an `IEnumerable<int>`, and returning the same variable, even though your method signature says you are returning an `int`. If you want to return just one `int`, and you are expecting just one from the LINQ statement, you can do something like this:

```
return
    (from Rents in videoLibDB.Rents
    where Rents.MemberID == memberID && Rents.MovieID == movieID
    select Rents.RentDays).FirstOrDefault(); 
```

See [FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb340482.aspx), [SingleOrDefault](http://msdn.microsoft.com/en-us/library/bb342451.aspx), and [Single](http://msdn.microsoft.com/en-us/library/bb155325.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:48:41.357

尝试这个：

```
public int GetRentDays(int memberID, string movieID)
{      
    var movieRentDays = videoLibDB.Rents.FirstOrDefault
        (r => r.MemberID == memberID && r.MovieID == movieID);
    return movieRentDays == null || movieRentDays.HasValue ? 0 
        : movieRentDays.RentDays.Value;
} 
```