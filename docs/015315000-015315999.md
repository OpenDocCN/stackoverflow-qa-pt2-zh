# StackOverflow 问答 15315000-15315999

# iconv - 从 UTF-16 转换为 UTF-8 的问题

> ID：15315002
> 
> 赞同：1
> 
> 时间：2013-03-09T19:35:09.970
> 
> 标签：iconv, libiconv

我正在尝试将 UTF-16 字符串（从 spidermonkey 19 中的 JSString 获得）转换为 UTF-8 字符串。我认为转换后的字符串没问题，但由于某种原因，转换例程为每个 unicode（非 ascii）字符添加了两个额外的字节。我很确定我做错了什么，我尝试了不同的编码但没有好的结果。这就是我现在得到的：

```
// UTF-16 string "áéíóúñ aeiou", this is the string being converted
// (you can find "aeiou" after \x20\x00, where \x61\x00 is "a")
\xC3\x00\xA1\x00\xC3\x00\xA9\x00\xC3\x00\xAD\x00\xC3\x00\xB3\x00\xC3\x00\xBA\x00\xC3\x00\xB1\x00\x20\x00\x61\x00\x65\x00\x69\x00\x6F\x00\x75\x00\x6E\x00

// UTF-8 string, test string, taken from:
// const char* cmp = "áéíóúñ aeiou"
// This is the result I'm looking for.
\xc3\xa1\xc3\xa9\xc3\xad\xc3\xb3\xc3\xba\xc3\xb1 aeiou

// UTF-8 string I'm getting after iconv(utf16, utf8)
\xc3\x83\xc2\xa1\xc3\x83\xc2\xa9\xc3\x83\xc2\xad\xc3\x83\xc2\xb3\xc3\x83\xc2\xba\xc3\x83\xc2\xb1 aeioun 
```

如您所见，每个非 ascii 字符之间有两个额外的字节 (\x83\xc2)。有谁知道这是为什么？

这是我的转换程序：

```
shared_ptr<char> convertToUTF8(char* utf16string, size_t len) {
    iconv_t cd = iconv_open("UTF-8", "UTF-16LE");
    char* utf8;
    size_t utf8len;

    utf8len = len;
    utf8 = (char *)calloc(utf8len, 1);
    shared_ptr<char> outptr(utf8);

    size_t converted = iconv(cd, &utf16string, &len, &utf8, &utf8len);
    if (converted == (size_t)-1) {
        fprintf(stderr, "iconv failed\n");
        switch (errno) {
            case EILSEQ:
                fprintf(stderr, "Invalid multibyte sequence.\n");
                break;
            case EINVAL:
                fprintf(stderr, "Incomplete multibyte sequence.\n");
                break;
            case E2BIG:
                fprintf(stderr, "No more room (iconv).\n");
                break;
            default:
                fprintf(stderr, "Error: %s.\n", strerror(errno));
                break;
        }
        outptr = NULL;
    }
    iconv_close(cd);
    assert(outptr);
    return outptr;
} 
```

我也尝试了[这个其他问题](https://stackoverflow.com/questions/13890953/how-to-convert-a-utf16-ushort-array-to-a-utf8-stdstring)的解决方案，但我得到了完全相同的结果。任何想法为什么 iconv 添加额外的两个字节？如何将结果与手动创建的 utf-8 字符串匹配？

编辑：测试字符串的固定描述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:03:59.277

你为什么不直接使用“UTF16”或“UTF-16”而不是“UTF-16LE”，来自'man iconv_open'，似乎我们有6种不同的UTF-16编码，

UTF-16// UTF-16BE// UTF-16LE// UTF16// UTF16BE// UTF16LE//

但是，我没有使用 iconv 的经验，但我已经使用以下函数将 JSString 转换为 gchar*，

```
gchar* gtweet_jsengine_jsval2gchar(GtweetTwitterClient *self, jsval value)
{
  JSContext *jscontext = NULL;
  JSString *string = NULL;
  GError *error = NULL;
  gunichar2 *utf16_string = NULL;
  gsize utf16_length = 0;
  glong rlen = 0;
  glong wlen = 0;
  gchar *ret = NULL;

  jscontext = self->priv->jscontext;
  JS_BeginRequest(jscontext);
  string = JS_ValueToString(jscontext, value);
  utf16_string = (gunichar2 *) JS_GetStringCharsAndLength(jscontext, string, &utf16_length);
  ret = g_utf16_to_utf8(utf16_string, utf16_length, &rlen, &wlen, &error);
  if(error)
    { 
      g_printerr("%s: %d: %s [rlen: %ld wlen: %ld]\n", g_quark_to_string(error->domain), error->code, error->message, rlen, wlen);
      return NULL;
    }
  JS_EndRequest(jscontext);
  return ret;
} 
```

# javascript - 当“.active”元素为“：偶数”时元素的移动顺序（JQuery）

> ID：15315004
> 
> 赞同：1
> 
> 时间：2013-03-09T19:35:13.440
> 
> 标签：javascript, jquery

如果某种类型的“偶数”元素是“.active”，如何编写将改变元素顺序的JQuery代码？我想在活动元素之前移动下一个（奇数）元素。我可能应该使用 .index() 和 .detach() 方法……</p>

示例语法 [http://jsfiddle.net/Tymek/M6qFM/](http://jsfiddle.net/Tymek/M6qFM/)

```
<div id="wrap">
    <div class="element">1\. Pierwszy</div>
    <div class="element">2\. Drugi</div>
    <div class="element">3\. Trzeci</div>
    <div class="element active">4\. Czwarty</div> <!-- 4 is even -->
    <div class="element">5\. Piąty</div> <!-- then move this up -->
    <div class="element">6\. Szósty</div>
    <div class="element">7\. Siódmy</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:47:22.593

您可以选择性地检查奇数索引项是否具有活动类，然后将以下项移动到奇数索引项之前。

```
// For each of the odd index elements
$('.element').filter(':odd').each(function(index, element) {
    // If the element has the active class
    if ($(element).hasClass('active')) {
        // Get the next element and move it before the active element
        $(element).next().insertBefore($(element));
    }
}); 
```

**[演示](http://jsfiddle.net/XSDVF/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:41:21.757

`:odd`当你有和时不需要检查索引`:even`（索引是零索引，所以你想`:odd`在这种情况下检查）。

```
var $active = $(".active");
if ($active.is(":odd")) {
    $active.next().after($active);
} 
```

[http://jsfiddle.net/M6qFM/1/](http://jsfiddle.net/M6qFM/1/)

# python - 如何使用 Django 1.5 创建自定义用户配置文件？

> ID：15315006
> 
> 赞同：2
> 
> 时间：2013-03-09T19:35:33.320
> 
> 标签：python, django

如何使用 Django 1.5 创建新的自定义用户配置文件？我不清楚文档

例如我需要：

```
class StandardProfile(models.Model):
    name = models.CharField(max_length=255) #or ForeignKey(User)
    email = models.CharField(max_length=255) #or ForeignKey(User)
    password = models.CharField(max_length=255) #or ForeignKey(User)
    full_name = models.CharField(max_length=255)
    something = models.CharField(max_length=255) 
```

和

```
class ArtistProfile(models.Model):
    name = models.CharField(max_length=255) #or ForeignKey(User)
    email = models.CharField(max_length=255) #or ForeignKey(User)
    password = models.CharField(max_length=255) #or ForeignKey(User)
    full_name = models.CharField(max_length=255)
    style = models.CharField(max_length=255)
    music = models.CharField(max_length=255)
    bank_account = models.CharField(max_length=255) 
```

如何将此更改为新的用户自定义模型？

（我想用这个来验证用户：[https](https://docs.djangoproject.com/en/dev/topics/auth/) ://docs.djangoproject.com/en/dev/topics/auth/ ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:49:01.043

您将无法使用 django 1.5 的[自定义用户模型](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#specifying-a-custom-user-model)，因为您只能拥有这样一个模型。

在您的情况下，您可能希望在您的每个人和模型之间建立[OneToOne 关系：](https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/)`Profiles``User`

```
from django.contrib.auth.models import User

class StandardProfile(models.Model):
    user = models.OneToOneField(User, primary_key=True)
    something = models.CharField(max_length=255)

class ArtistProfile(models.Model):
    user = models.OneToOneField(User, primary_key=True)
    style = models.CharField(max_length=255)
    music = models.CharField(max_length=255)
    bank_account = models.CharField(max_length=255) 
```

# python - GAE Datastore：使用字符串作为字段引用python放入字段

> ID：15315009
> 
> 赞同：0
> 
> 时间：2013-03-09T19:35:48.750
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在从 Web 源读取 CSV 文件，并希望将其存储在我的 GAE 数据存储中。CSV 数据带有一个标题行，通过一些操作将匹配我的数据存储中的字段（例如，用下划线替换 CSV 文件中的空格以匹配数据存储）。我只想遍历 CSV 文件每一行中的字段并将它们放入数据存储区。

我的问题是如何使用字符串引用数据存储中的字段并将其值设置为另一个字符串？

```
from google.appengine.ext import db
from urllib import urlopen
from csv import DictReader

class Table(db.Model):
    field_one = db.StringProperty() # equivalent to 'field one' column in CSV data
    field_two = db.StringProperty() # equivalent to 'field two' column in CSV data

def store_csv_data(url):
    # Request the url with the csv data
    f = urlopen(url)
    csv_dict = DictReader(f, delimiter=',', quotechar='"')
    for line in csv_dict:
        # Do some processing on the data (not shown here)
        row = Table()
        for field in line:
            db_field = field.replace(' ','_') # Make the csv field match the db field
            db_value = line[field] # The value I want to store in the datastore
            row.db_field = db_value # THIS IS WHERE THE CODE FAILS
        row.put() 
```

这实际上不会产生任何错误，它只是在数据存储中创建了一堆空行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:13:24.100

```
setattr(row, db_field, db_value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:15:16.490

我猜你的问题出在这条线上：

```
db_value = line[field] 
```

应该：

```
db_value = field[0] 
```

您必须将零替换为字段列号，因此请使用上面的示例：

```
class Table(db.Model):
    field_one = db.StringProperty()
    field_two = db.StringProperty() 
```

field_one 为 0，field_2 为 1

# c++ - 没有额外内存分配的 C++ 中的 QuickSelect 实现

> ID：15315016
> 
> 赞同：0
> 
> 时间：2013-03-09T19:36:13.950
> 
> 标签：c++, search, quickselect

如果你不介意，我有一点功课帮助。基本上这个想法是对一组值执行快速选择，但是我们得到了一个模板，我似乎无法弄清楚如何让这些函数与所提供的内容一起工作。

问题是这些值不会正确排列，或者如果它们排列正确，它们会在每次输入相同的值时发生变化。

这是我正在使用的函数，我将在代码之后用 /**/ 表示我编写的代码，任何其他行都是为我提供的模板的一部分。

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <algorithm>

using namespace std;

int partition(int *A, int len, int pivot_index)
{
   int pivot_value = A[pivot_index]; /**/

   int left = 0; /**/
   int l = left; /**/
   int right = len - 1; /**/
   while(left < right)  /**/
   { /**/
      while(A[left] < pivot_value) /**/
      { /**/
         left++; /**/
      } /**/

      while(A[right] > pivot_value) /**/
      { /**/
         right--; /**/
      } /**/

      if(A[left] < pivot_value) /**/
      { /**/
         swap(A[left], A[right]); /**/
      } /**/
  } /**/

  return left; /**/
}

int select (int *A, int len, int rank)
{
      if (len==1) return A[0];
      int pivot_index = rand() % len;
      int pivot_rank = partition(A, len, pivot_index);  

      if (rank == pivot_rank) return A[rank];
      if (rank < pivot_rank) return select(A, pivot_rank, rank);
      return select(A, len - pivot_rank, rank - pivot_rank ); /**/
}

int main(void)
{
   int N, *A;

   ifstream fin("test.txt");
   fin >> N;
   A = new int[N];
   for (int i=0; i<N; i++) fin >> A[i];
   fin.close();

   int r;
   cout << "Enter rank (0.." << N-1 << ")\n";
   while (cin >> r) {
      if (r < 0 || r >= N)
        cout << "Invalid rank\n";
     else 
        cout << "The element of rank " << r << " is " << select(A,N,r) << "\n";
   }

  delete[] A;
} 
```

我的“test.txt”文件包含以下值：

```
10 -- this denotes the length of the array or how many values it will read in
7
14
12
2
25
18
15
13
100
63 
```

对此的任何帮助将不胜感激。我的教授根本没有解释这将如何工作，我在网上找到的任何其他示例都不能回答我的问题。我花了很多时间摆弄不同的实现方式，此时我只是不知道。谢谢

编辑：更改，现在可以直接实现和编译。还添加了我正在使用的库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:59:15.027

您的代码存在许多问题。

```
while(A[left] < pivot_value) {  left++; } 
```

这不检查左边没有超出数组的末尾。

```
while(A[right] > pivot_value) { right--;} 
```

这不检查右边没有在数组开始之前运行。

```
while(left < right) 
```

这是一个无限循环，当

1.  左 < 右
2.  A[左] >= pivot_value
3.  A[右] <= pivot_value

`select(A, len - pivot_rank, rank - pivot_rank );`

这不是继续使用的正确分区。

# google-maps - Google 地方信息获取 LatLng

> ID：15315017
> 
> 赞同：11
> 
> 时间：2013-03-09T19:36:15.397
> 
> 标签：google-maps, google-maps-api-3, google-places-api, geocoding

我正在使用 Autocomplete 方法来获取 Place Suggestions，当我单击要选择的 Place 时，我想提取`Lat`并`Lng`放置在`place.geometry.location`下面的位置。

![萤火虫截图](../Images/3c289f5086bd60c6dc454853aa39afe3.png)

根据我的观察，每个会话的键`ib`和`jb`不断变化。有什么方法可以提取`Lat`和`Lng`预测？

```
$(document).ready(function() {

    var mapOptions = {
        center : new google.maps.LatLng(-33.8688, 151.2195),
        zoom : 13,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map'), mapOptions);

    $('#searchTextField').bind('keydown keypress', function() {
        setTimeout(function() {
            var inputQuery = $('#searchTextField').val();

            if (inputQuery.length >= 2) {
                //console.log(inputQuery);

                /*
                var service = new google.maps.places.AutocompleteService();

                service.getPlacePredictions({
                    input : inputQuery
                }, callback);
                */

                var input = document.getElementById('searchTextField');
                var options = {
                    types : ['geocode']
                };

                var autocomplete = new google.maps.places.Autocomplete(input, options);

                // Acting on Selecting a place
                google.maps.event.addListener(autocomplete, 'place_changed', function() {
                    //infowindow.close();
                    var place = autocomplete.getPlace();

                    console.log(place);
                    console.log(place.formatted_address);
                    console.log(place.name);
                    console.log(place.geometry.location);
                    console.log(place.geometry.location[0]);

                    // Show the map to the current location selected
                    if (place.geometry.viewport) {
                        map.fitBounds(place.geometry.viewport);
                    } else {
                        map.setCenter(place.geometry.location);
                        map.setZoom(17);
                        // Why 17? Because it looks good.
                    }

                    var marker = new google.maps.Marker({
                        position : place.geometry.location,
                        map : map,
                        draggable : true,
                    });

                    $.each(place.geometry.location, function(key, value) {
                        console.log(key + ": " + value);
                    }); 
                });
            }

        }, 0);

    });
}); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-09T20:20:51.980

`place.geometry.location`是 a [`LatLng`](https://developers.google.com/maps/documentation/javascript/reference#LatLng)，所以你可以调用它的`.lat()`和`.lng()`方法。

```
var location = place.geometry.location;
var lat = location.lat();
var lng = location.lng(); 
```

您将看到这些方法存在于您对该对象的检查中。

切勿使用未记录的属性，例如您发现的`ib`和。`jb`Google 使用[Closure Compiler](https://developers.google.com/closure/compiler/)或类似工具编译 Maps API，该工具会为私有属性和变量生成随机名称。

# javascript - 为什么我的 CSS 加载会有时间延迟？

> ID：15315035
> 
> 赞同：0
> 
> 时间：2013-03-09T19:37:50.853
> 
> 标签：javascript, css

我在维基百科上也看到了这种效果。当我第一次进入该页面时，该网站会在从非 CSS 版本的网站转到 CSS 版本的网站时闪烁。

最近，我也在我的网站上看到了这个。

奇怪，因为我遵循 Google Chrome Debug Auditor 的建议，并将我的 CSS 加载到我的文档头部，然后再加载其他任何内容。

**笔记**

已在 FF 和 Safari 中验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:45:29.860

您正在强制 CSS 样式表在每个请求上刷新：

```
/dev/.../source/xyz.css?_time=1362858256183 
```

这可能是您偶尔会看到无样式内容闪烁的原因。您通常只会在某些内容发生更改时强制重新加载，并允许客户端在此之前缓存样式表。

然后我注意到您正在使用 JavaScript 加载样式表。我不能在这里给你任何数字，但如果你真的很关心速度，那么将引用放入原始 HTML 中可能是值得的：

```
<link rel="stylesheet" href="..."> 
```

允许浏览器使用任何和所有预取和其他机制。

# kml - KML 中的坐标与 Google 地球中显示的坐标略有不同

> ID：15315040
> 
> 赞同：5
> 
> 时间：2013-03-09T19:38:13.250
> 
> 标签：kml, latitude-longitude, google-earth

当我在 Excel 中打开 KML 文件时，同一地标的坐标与 Google 地球中显示的坐标不同。例如，Google 地球本身显示的地标坐标点为 24.484138°、54.400700°，但在 KML（在 Excel 中打开时）为 24.48586802、54.40060011。请帮助我如何纠正它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:21:16.857

基础 KML 在坐标中可能有许多小数位。这是您在 Excel 中或在文本编辑器中查看 KML 文件时看到的内容。

这是一个小数点后 10 位的 KML 地标位置：

```
<Placemark>
    <name>Google office</name>
    <description>This is the location of Google</description>
    <Point>
        <coordinates>-122.0123456789,37.0123456789</coordinates>
    </Point>
</Placemark> 
```

Google 地球会存储所有数字，但最多只能显示 6 个坐标。这不是精度或准确性的损失——只是显示问题。

但要意识到坐标中的 6 位小数精度是 10 厘米分辨率。坐标十进制度的每个 .000001 差异大约是 10 厘米长。Google 地球的图像分辨率通常为 1 米，有些地方的最高分辨率为每像素 1 英寸。一米分辨率可以使用 5 个小数位表示，因此不需要超过 6 个小数位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:17:20.320

可能是 Google 地球将坐标存储在与显示坐标不同的坐标系中。当我以前在 GIS 中工作时，通常会使用多个数据集，这些数据集使用不同的坐标系。ArcGIS 会自动进行一些基本转换，以将所有数据放入一个公共坐标系中。我不确定 Google 地球是否会做类似的事情。[您可能会从gis.stackexchange.com](https://gis.stackexchange.com/)获得更好的答案。

# android - 为什么 Google 地图不能在 Android API 2 上运行？

> ID：15315041
> 
> 赞同：0
> 
> 时间：2013-03-09T19:38:19.340
> 
> 标签：android, google-maps, android-maps

所以我在[这里](http://www.vogella.com/articles/AndroidGoogleMaps/article.html#overview_intro)找到了一个教程。但即使在真实设备上我也无法运行它。[我在这里](https://stackoverflow.com/questions/13703273/google-map-api-v2-is-not-working)和其他 20 个页面发现了类似的问题，所有人都遇到了我的问题，但我不明白为什么 Google 地图不能在 android 上运行。这是 Logcat 中的错误。

```
03-09 23:06:22.050: D/dalvikvm(28176): Late-enabling CheckJNI
03-09 23:06:22.277: W/dalvikvm(28176): VFY: unable to resolve static field 874 (MapAttrs) in Lcom/google/android/gms/R$styleable;
03-09 23:06:22.277: D/dalvikvm(28176): VFY: replacing opcode 0x62 at 0x000e
03-09 23:06:22.285: D/AndroidRuntime(28176): Shutting down VM
03-09 23:06:22.285: W/dalvikvm(28176): threadid=1: thread exiting with uncaught exception (group=0x40bbe1f8)
03-09 23:06:22.285: E/AndroidRuntime(28176): FATAL EXCEPTION: main
03-09 23:06:22.285: E/AndroidRuntime(28176): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
03-09 23:06:22.285: E/AndroidRuntime(28176):    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.Activity.onCreateView(Activity.java:4242)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.Activity.setContentView(Activity.java:1835)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at com.alirezasaremi.showmap.ShowMapActivity.onCreate(ShowMapActivity.java:23)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.Activity.performCreate(Activity.java:4465)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.os.Looper.loop(Looper.java:137)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at android.app.ActivityThread.main(ActivityThread.java:4514)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at java.lang.reflect.Method.invokeNative(Native Method)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at java.lang.reflect.Method.invoke(Method.java:511)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-09 23:06:22.285: E/AndroidRuntime(28176):    at dalvik.system.NativeStart.main(Native Method) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:41:36.227

这是我写的一篇关于如何将 Google Map API V2 添加到您的应用程序的博客文章。请密切关注前 4 步，以便将 google-play-services 项目添加到您的工作空间，然后从您的项目中创建对它的引用：

[创建 Google Map API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:37:36.837

我知道这个错误：java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable

您应该将 google play services lib 项目导入工作区，而不仅仅是将外部 jar 添加到项目中。以下是详细信息：

[Android 开发人员主题相关](http://developer.android.com/google/play-services/setup.html) “将 /extras/google/google_play_services/libproject/google-play-services_lib 库项目复制到您维护 Android 应用程序项目的源代码树中。如果您使用的是 Eclipse，请将库项目导入您的工作区。单击文件 > 导入，选择 Android > Existing Android Code into Workspace，然后浏览到库项目的副本以将其导入。”

# c# - 从 Main() 调用公共方法

> ID：15315043
> 
> 赞同：-4
> 
> 时间：2013-03-09T19:38:24.970
> 
> 标签：c#, methods, console

我将如何`GetDFT()`在以下程序中调用该方法？

```
namespace Lott_CSC445_Project6
{
    class Program
    {    
        ... // declarations removed for brevity

        static void Main(string[] args)
        {
            ... // some code

            GetDFT() // <<< Call the method here

            ... // more code
        }

        public void GetDFT()
        {
            ... // method body removed for brevity
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:40:40.380

该方法不是`static`，所以它是一个*实例*方法`Program`。

这意味着您需要一个实例`Program`来调用它。

或者，制作方法`static`。

# java - 如果下一个标记与任何指定的字符串都不匹配，如何抛出 InputMismatchException？

> ID：15315044
> 
> 赞同：1
> 
> 时间：2013-03-09T19:38:36.770
> 
> 标签：java, exception

我知道`Scanner.next("A")`如果下一个标记与“A”匹配，它将返回字符串“A”，否则它将抛出 and `InputMismatchException`。但是我的代码需要采用某种方式，`InputMismatchException`如果它无法从一组字符串中找到任何匹配项，它就会抛出。例如，`InputMismatchException`如果“A”、“B”和“C”都不是下一个标记，我想被抛出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:42:00.180

您可以将[Scanner.next(Pattern)](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28java.util.regex.Pattern%29)与正则表达式模式一起使用：

```
Pattern pattern = Pattern.compile("[ABC]");
myScanner.next(pattern); 
```

甚至

```
myScanner.next("[ABC]"); 
```

因为，根据 Javadoc，[Scanner.next(String)](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28java.lang.String%29)

> 调用 next(pattern) 形式的此方法的行为与调用 next(Pattern.compile(pattern)) 完全相同。

您甚至不必担心版本`next(String)`每次都会构建一个 Pattern 对象，因为实现维护了一个 Pattern 对象的缓存。

**编辑：**如果您要匹配的字符串不是单个字符，则正则表达式模式会有所不同：

```
myScanner.next("(AB|CD|EF)"); // throws for everything except AB, CD and EF. 
```

# javascript - Javascript - 将数据输入文本框后替换链接值

> ID：15315049
> 
> 赞同：0
> 
> 时间：2013-03-09T19:39:59.860
> 
> 标签：javascript, html, ajax

我是 javascript 新手，据我所知：

```
<script type="text/javascript">
   $('#Login').keyup('href', function () {
       return $('#checkUserName').replace('__userName__', $('#Login').val());
   });
</script> 
```

现在，该代码应该在#Login 输入中输入数据后替换#checkUserName 链接的值。但事实并非如此。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:44:25.513

仅在您有 onlcick 或 on change 或某种 change 事件时使用 java 脚本怎么样

```
function myFunction()
{
      var str=document.getElementById("demo").innerHTML; 
      var n=str.replace("Microsoft","W3Schools");
      document.getElementById("demo").innerHTML=n;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:45:22.147

您应该尝试通过 访问`href`属性`.attr()`，而不是将其放在函数定义之前`keyup`（我认为这是非法的）：

```
$('#Login').keyup(function () {
   $('#checkUserName').attr('href', $('#Login').val());
}); 
```

此外，无需`return`调用。

# c# - 在 Crystal Report 中将某些行显示为列

> ID：15315051
> 
> 赞同：2
> 
> 时间：2013-03-09T19:40:09.193
> 
> 标签：c#, crystal-reports, report

我想创建一个具有以下格式的报告：

```
ID-1    |Name           |Subject 1|Subject 2|Subject 3|Subject 4|
ID-2    |Father Name    |Marks 1  |Marks 2  |Marks 3  |Marks 4  | 
```

数据集中返回的数据格式如下：

```
ID-1|ID-2|Name|FatherName|Subject 1|Marks 1|etc|Etc|
ID-1|ID-2|Name|FatherName|Subject 2|Marks 2|etc|Etc|
ID-1|ID-2|Name|FatherName|Subject 3|Marks 3|etc|Etc| 
```

我尝试使用 Crosstab，但无法获得所需的输出。关于如何完成它的提示？和/或什么水晶报表功能|控件将帮助我实现它？

以更概括的方式，我想做的是在单行中显示作为多行返回的主题的标记，并在每条中显示相似的数据，即 ID-1、ID-2、名称。父亲姓名等只有一次！（注意：如示例所示，每个学生的数据需要以 2 行显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T09:37:00.267

通过使用[**数据透视**](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)，您可以轻松地将行转换为列。检查sqlfiddle 上的[这个数据透视示例以解决您的问题。](http://sqlfiddle.com/#!3/a5d11/1)

# android - 如何从资源中选择 PDF 路径？

> ID：15315052
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:40:09.760
> 
> 标签：android, pdf, resources

我有 pdf 文件，我需要将其本地存储在 res/raw 或 assets 中某处的文件夹中。

现在我不知道哪个是保存此文件的最佳文件夹以及如何选择它的路径以在第三方应用程序中显示。

我正在使用以下不起作用的代码：

**代码：**

```
i = new Intent(this, Tips10.class);
                i.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, getResources()  +"/"+ getPackageName() + "/" + R.raw.tips10);
                startActivity(i); 
```

**日志猫：**

```
03-10 00:33:04.335: I/PDFVIEWER(9473): Intent { cmp=com.tackfu/.Tips10 (has extras) }
03-10 00:33:04.335: I/PDFVIEWER(9473): ST='file 'android.content.res.Resources@410cc978/com.tackfu/2130968576' not found'
03-10 00:33:04.335: I/PDFVIEWER(9473): ST='reading page 1, zoom:1.0' 
```

任何人指导我可能是什么问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:56:13.183

您需要将 PDF 复制到外部存储并使用该路径`startActivity()`，或者您需要创建一个`ContentProvider`从内部存储提供文件的路径（或者可以想象直接从资源/资产中提取，尽管这有点困难） .

[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Files)演示了通过`ContentProvider`. [此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/GrantUriPermissions)扩展了第一个，只允许您指定的应用程序访问该`Uri`.

# java - Java - 对于基类集合中的每个派生类

> ID：15315059
> 
> 赞同：0
> 
> 时间：2013-03-09T19:41:13.930
> 
> 标签：java, collections, for-loop, each

我已经用 Visual Basic 成功地做到了这一点，我只想知道是否有一种简单的方法可以用 Java 做到这一点。

我想要一个 For 循环，它将遍历基类集合中的派生类。

```
public class Game{
    private Collection<GameEntity> entities;

    // Methods would go here to control GameEntity's

    private abstract class GameEntity{
        protected Game owner; //Defines which instance Game owns this Entity

        public GameEntity(Game owner) {
            this.owner=owner;
        }

        public abstract void tick();
    }

    private class Partical extends GameEntity{
        public Partical(Game owner) {
            super(owner);
        }

        public void tick(){
            for (Partical p : owner.entities) { //HERE IS MY PROBLEM
                if(p != this){ //Don't do physics with itself

                }
            }
        }
    }
} 
```

好的，所以在这里我有我的 Game 类，它有一个 GameEntity 的集合，但 GameEntity 严格来说是一个基类。

Partical 派生自 GameEntity 类。

我想要 for 循环做的是遍历 GameEntity 的集合并从 Collection 中挑选出所有的 Partical 类。

我的问题是我收到“不兼容的类型”错误。我确实意识到它们是不同的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:45:06.203

尝试：

```
 for(GameEntity entity : owner.entities) {
      if(entity instanceof Partical) {
          Partical partical = (Partical) entity;
      }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:49:26.173

Java 有类型检查，你可以使用 instanceOf 来检查一个类型是否是其他超类型的实例，例如：

```
 if(entity instanceOf Partical) {
   // do smth
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T19:44:59.467

您需要迭代并检查所需的类类型：

```
for (GameEntity e : owner.entities) { //HERE IS MY PROBLEM
    if (e instanceof Partical) {
        Partical p = (Partical)e;
        if(p != this){ //Don't do physics with itself
        }
    }
} 
```

# html - 将第二个下拉菜单添加到第一个下拉菜单

> ID：15315061
> 
> 赞同：2
> 
> 时间：2013-03-09T19:41:23.370
> 
> 标签：html, css, drop-down-menu

我需要在 Hibachi 菜单下添加第二个下拉菜单，例如午餐和晚餐。我知道如何在 HTML 中添加它，但有人可以帮我将它添加到我的 css 中以使其工作吗？我已经发布了我正在使用的导航的 html 和 css 编码。谢谢！

```
 <nav id="topnav" class="clear">
    <ul>
      <li class="active"><a href="#"> Home</a></li>
      <li><a href="#">About Us</a></li>
      <li><a href="#">Menus</a>
        <ul>
          <li><a href="#">Lunch Menu</a></li>
          <li><a href="#">Dinner Menu</a></li>
          <li><a href="#">Appetizers Menu</a></li>
          <li><a href="#">Hibachi Menus</a> </li>
         <li><a href="#">Sushi Menu</a></li>
        </ul>
      </li>
      <li><a href="#">Reservations</a></li>

      <li><a href="#">Contact Us</a></li>
            <li class="last"><a href="#">Press</a></li>

    </ul>
  </nav>

Below is the CSS:

#topnav{padding:20px 0;}
#topnav li{float:left; margin-right:30px;}
#topnav li li{margin-left:30;}
#topnav li a:link, #topnav li a:visited, #topnav li a:hover{
    display:block;
    margin:0;
    padding:0;
    color:#c19c55;
    background-color:#232323;
}
#topnav ul li a:link, #topnav ul ul li a:visited{border:none;}

#topnav li a:hover, #topnav li.active a{
    color:#c19c55;
    background-color:#232323;
}
#topnav li li a:link, #topnav li li a:visited{
    width:150px;
    float:none;
    margin:0;
    padding:7px 10px;
    color:c19c55;
    background-color:#232323;
    border:none;
}

#topnav li li a:hover{
    color:c19c55;
    background-color:000;
}

#topnav ul ul{z-index:9999; position:absolute; left:-999em; height:auto; width:170px;  padding:5px 0 0 0; border-bottom:1px solid #666666;}
#topnav ul ul a{width:140px;}
#topnav li:hover ul{left:auto;}
#topnav li:hover ul ul{left:auto;}
#topnav li:hover{
    position:static;
    font-family: Georgia, "Times New Roman", Times, serif;
}
#topnav li.last{margin-right:0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:29:51.587

您可以使用 jquery 插件***[droppy](http://onehackoranother.com/projects/jquery/droppy/)***轻松制作下拉菜单。无需担心编码麻烦。看这个例子：

```
<link rel="stylesheet" href="http://onehackoranother.com/projects/jquery/droppy/stylesheets/droppy.css" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"/></script>
<script src="http://onehackoranother.com/projects/jquery/droppy/javascripts/jquery.droppy.js"/></script>
<nav>
    <ul id="topnav">
      <li class="active"><a href="#"> Home</a></li>
      <li><a href="#">About Us</a></li>
      <li><a href="#">Menus</a>
        <ul>
          <li><a href="#">Lunch Menu</a></li>
          <li><a href="#">Dinner Menu</a></li>
          <li><a href="#">Appetizers Menu</a></li>
          <li><a href="#">Hibachi Menus</a> </li>
         <li><a href="#">Sushi Menu</a></li>
        </ul>
      </li>
      <li><a href="#">Reservations</a></li>

      <li><a href="#">Contact Us</a></li>
            <li class="last"><a href="#">Press</a></li>

    </ul>
  </nav>

<script type='text/javascript'>
  $(function() {
    $('#topnav').droppy();
  });
</script> 
```

这是一个活生生的例子：http: [//jsfiddle.net/wVaek/](http://jsfiddle.net/wVaek/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:54:41.877

我已经开始你了，这不是一个复制和粘贴代码的网站，所以我会让你自己做剩下的事情，这是一个 kickstart

```
<style>

#topnav{padding:20px 0;}
#topnav li{float:left; margin-right:30px;}
#topnav li li{margin-left:30;}
#topnav li a:link, #topnav li a:visited, #topnav li a:hover{
    display:block;
    margin:0;
    padding:0;
    color:#c19c55;
    background-color:#232323;
}
#topnav ul li a:link, #topnav ul ul li a:visited{border:none;}

#topnav li a:hover, #topnav li.active a{
    color:#c19c55;
    background-color:#232323;
}
#topnav li li a:link, #topnav li li a:visited{
    width:150px;
    float:none;
    margin:0;
    padding:7px 10px;
    color:c19c55;
    background-color:#232323;
    border:none;
}

#topnav li li a:hover{
    color:c19c55;
    background-color:000;
}
#topnav ul ul ul{
  display: none;

  position: absolute;
  right: -150px;
}

#topnav ul ul li{
  position: relative;
}

#topnav ul ul li:hover ul{
    display: inline-block;
}

#topnav ul ul{z-index:9999; position:absolute; left:-999em; height:auto; width:170px;  padding:5px 0 0 0; border-bottom:1px solid #666666;}
#topnav ul ul a{width:140px;}
#topnav li:hover ul{left:auto;}
#topnav li:hover ul ul{left:auto;}
#topnav li:hover{
    position:static;
    font-family: Georgia, "Times New Roman", Times, serif;
}
#topnav li.last{margin-right:0;}
</style>
<nav id="topnav" class="clear">
    <ul>
      <li class="active"><a href="#"> Home</a></li>
      <li><a href="#">About Us</a></li>
      <li><a href="#">Menus</a>
        <ul>
          <li><a href="#">Lunch Menu</a></li>
          <li><a href="#">Dinner Menu</a></li>
          <li><a href="#">Appetizers Menu</a></li>
          <li><a href="#">Hibachi Menus</a> 
            <ul>
              <li><a href="#">Lunch Menu</a></li>
              <li><a href="#">Dinner Menu</a></li>
              <li><a href="#">Appetizers Menu</a></li>
              <li><a href="#">Hibachi Menus</a> </li>
             <li><a href="#">Sushi Menu</a></li>
            </ul>

          </li>
         <li><a href="#">Sushi Menu</a></li>
        </ul>
      </li>
      <li><a href="#">Reservations</a></li>

      <li><a href="#">Contact Us</a></li>
            <li class="last"><a href="#">Press</a></li>

    </ul>
  </nav> 
```

祝你好运！

# c++ - 在 switch 的默认子句中抛出自定义异常会生成单个字符

> ID：15315068
> 
> 赞同：4
> 
> 时间：2013-03-09T19:42:12.873
> 
> 标签：c++

我构建了一个自定义异常，用于在我正在从事的学校项目中捕获不同的错误。

```
class WrongValueException : public std::runtime_error
{
public:
    WrongValueException(std::string mess): std::runtime_error(mess) {};
}; 
```

问题是当我在下面的 switch 语句的默认子句中使用 "throw WrongValueException("Error: Syntax"); 时。

```
Expression* SubExpression::parse()
{
    Expression* left;
    Expression* right;
    char operation, paren;

    left = Operand::parse();
    cin >> operation;
    right = Operand::parse();
    cin >> paren;
    switch (operation)
    {
        case '+':
            return new Plus(left, right);
        case '-':
            return new Minus(left, right);
        case '*':
            return new Times(left, right);
        case '/':
            return new Divide(left, right);
        default:
            throw WrongValueException("Error: Syntax - " + operation);
    }
    return 0;
} 
```

基本上，传递给 swtich 语句的字符应该是 swtich 语句中列出的运算符之一，如果不是我想抛出异常。当抛出异常时，我得到的只是一个字符，该字符根据输入中给出的字符而变化。

我在主函数中发现了错误。

输入输出示例如下：

```
Enter expression: (5^x),x=2;
#
Press any key to continue . . .

Enter expression: (5&x),x=2;
T
Press any key to continue . . . 
```

“按任意键继续...”上方的单个字符是操作员更改时更改的内容。我已经成功地为我在程序中进行的一些其他检查实现了这个错误捕获，并且抛出冒泡到主要的 try/catch 子句没有问题。这是唯一的一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T19:43:55.607

您不应该将 + 与字符串文字一起使用。它的行为与您的想法不同。您应该先转换为字符串

```
throw WrongValueException(std::string("Error: Syntax - ") + operation); 
```

否则，您将传递字符的地址，其偏移量等于`operation`. `"Hello"+1`是指向 的指针`'e'`。在你的情况下，你超出了界限，你基本上有未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T19:45:20.423

在`"Error: Syntax - " + operation`中，您将 a 添加`char`到 a`const char *`中。这执行*指针添加*而不是字符串连接，因为`std::string`不涉及。

将其中一个操作数转换为`string`第一个：

```
std::string("Error: Syntax - ") + operation 
```

# ios - Xcode 4.6 开发 iOS 3.1

> ID：15315071
> 
> 赞同：1
> 
> 时间：2013-03-09T19:42:29.320
> 
> 标签：ios, xcode, ios-3.x

我想学习iOS开发。我有一个带有 iOS 3.1.3 的越狱的第一代 iPod touch，我希望用它来测试和运行我的应用程序。我正在使用 XCode 4.6 运行 Mountain Lion，这使我只能部署到低至 iOS 4.3。

我想知道我是否可以使用我的 XCode 开发 iOS 3.1 应用程序？还是我必须下载旧版本的 XCode 和 iOS SDK 才能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:49:24.930

不，您必须更新到较新版本的 iOS，或使用 bootcamp 以使用较旧的 XCode 引导至 Lion。

# javascript - Javascript - 如何重置字段 onchange

> ID：15315084
> 
> 赞同：1
> 
> 时间：2013-03-09T19:43:07.177
> 
> 标签：javascript, jquery

对不起。Javascript（使用 jquery）noob 在这里。这是问题。

我有一个带有数字的选择字段：

```
<div class="controls">
  <select class="span2" id='select1' onchange="addstuff()">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
  </select>
</div>
<div id="addfields"></div> 
```

然后，我遍历指定的数字，并在 div 标记中添加一些 html，其 id 为“select1”。

```
function addstuff()
{
  var num = parseInt($('#select1').val())
  if (num != 0)
  {
    for (i=0; i<num;i++)
      {
        new_field += "<p>" + num + "</p>";
      }
  $('#addfields').html(new_field);
  }
} 
```

所以如果我选择3的选项，会添加如下html：

```
<p> + num + </p>
<p> + num + </p>
<p> + num + </p> 
```

但是，如果我选择 2，将追加 2 个字段：

```
<p> + num + </p>
<p> + num + </p>
<p> + num + </p>
<p> + num + </p>
<p> + num + </p> 
```

但是，我希望清除以前的 html，并且只需要两个条目。

```
<p> + num + </p>
<p> + num + </p> 
```

如果有人可以帮我看看我错过了什么，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:44:48.757

您永远不会初始化`new_field`，无论如何您都应该这样做。如果你这样做了，你的问题也将得到解决。

```
function addstuff() {
    var new_field = ''; 
```

* * *

顺便说一句，由于您使用的是 jQuery，因此使用事件绑定比使用事件属性更容易。而不是`onchange="addstuff()"`，请执行以下操作：

```
$("#select1").on('change', addstuff); 
```

您也可以放弃定义`addstuff`并将其绑定为匿名函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:53:03.450

Easy peasy，感谢您添加了那么多解释和代码......这应该可以满足您的要求：

```
function addstuff()
{
  var num = parseInt($('#select1').val());
  var new_field = "";
  if (num != 0)
  {
    for (i=0; i<num;i++)
      {
        new_field += "<p>" + num + "</p>";
      }
  $('#addfields').html(new_field);
  }
} 
```

主要是看起来你没有重新初始化那个 new_field 变量，所以它只是在构建......因为 jquery .html() 将覆盖该 addfields 中的任何内容，这意味着如果你看到构建它是因为你的 new_field 变量实际上包含积累。

# ruby-on-rails - 全新 Mountain Lion 安装的 RailsInstaller 问题

> ID：15315087
> 
> 赞同：8
> 
> 时间：2013-03-09T19:43:15.443
> 
> 标签：ruby-on-rails, ruby, macos, osx-mountain-lion, railsinstaller

我之前在 OS X 10.8.2 Mountain Lion 上安装了 Rails，但我最近刚刚重新格式化了我的硬盘驱动器，并且正在重新设置计算机。

我已经下载了 RailsInstaller，因为我相信这就是我之前在 10.8 上安装 Rails 的方式，但是在安装开始时，在输入我的全名和 git 电子邮件后，我收到一个错误。

它声明`There has been an error. Error changing group of /opt/rix to rvm. The application will exit now.`然后退出。它没有给我解决错误消息的问题，我想知道是否有其他人经历过这个并且知道解决方法。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T05:43:38.803

我收到了同样的错误信息。重新启动计算机并再次尝试安装后，它工作得很好。去搞清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T20:57:01.870

我遇到了完全相同的问题，就像 Aaron 说的重启可能会解决它。它不适合我，所以我又做了一个步骤并更改了应用程序下载的首选项（系统偏好设置>安全和隐私>常规）“允许应用程序下载：”到“任何地方”，重新启动计算机并安装得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-13T03:21:19.510

一个简单的重启对我有用。去搞清楚...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T21:27:27.130

您应该使用 RVM 或 rbenv 之类的 ruby​​ 版本管理器来管理您的 ruby​​ 版本，并使用 bundler 来管理您的 gem。

这可能无法直接回答您关于 Rails 安装程序的问题，但它应该允许您在一个不错的环境中安装 rails 和 ruby​​。

安装[RVM](https://rvm.io/rvm/install/)

然后，一旦完成，请执行`rvm install 1.9.3`您希望安装的任何版本的 ruby​​。

然后，您需要做的就是一切`gem install rails`顺利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-05T00:38:59.817

这些解决方案中的任何一个都可能有效。这是您应该尝试的前两件事。

**1.**重新启动你的mac，然后再试一次。如果那失败了，

**2.**尝试以下操作（由 Treehouse 提供）： 打开磁盘工具 选择 Macintosh HD 单击修复磁盘权限 重新启动 Mac

在这里也添加其他人的答案..

**Marco S.-**只需在终端中使用 sudo su 登录，然后您就可以运行 rails 安装程序。我也有同样的问题。

**Aaron-**我收到了同样的错误信息。重新启动计算机并再次尝试安装后，它工作得很好。去搞清楚。

**Kurtis-**我遇到了完全相同的问题，就像 Aaron 说的重启可能会解决它。它不适合我，所以我又做了一个步骤并更改了应用程序下载的首选项（系统偏好设置>安全和隐私>常规）“允许应用程序下载：”到“任何地方”，重新启动计算机并安装得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-22T00:57:47.393

只需`sudo su`在终端中登录，然后您就可以运行 rails 安装程序。我也有同样的问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-09T21:20:16.663

我对rails安装程序不太了解。但是您可以使用 Ryan Bigg 的这篇很棒的博客文章作为推荐，自己安装所有部件。

[http://ryanbigg.com/2011/06/mac-os-x-ruby-rvm-rails-and-you/](http://ryanbigg.com/2011/06/mac-os-x-ruby-rvm-rails-and-you/)

它只是工作。

# sublimetext2 - SublimeREPL 和 zsh (oh-my-zsh)

> ID：15315092
> 
> 赞同：1
> 
> 时间：2013-03-09T19:43:36.833
> 
> 标签：sublimetext2, zsh, sublimerepl

有什么方法可以通过Sublime 文本中的[SublimeREPL运行 zsh shell（添加了](https://github.com/wuub/SublimeREPL)[oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh)） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:47:59.827

试试 SublimePTY，它旨在在 Sublime Text 中提供完整的终端：

[https://github.com/wuub/SublimePTY](https://github.com/wuub/SublimePTY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T19:22:43.227

我能够通过编辑生成一个 Zsh shell 而不是 bash shell SublimeREPL `SublimeREPL/config/Shell/Main.sublime-menu`：

```
20: "cmd": {"windows": ["cmd.exe"],
21:         "linux": ["zsh", "-i"],
22:         "osx": ["zsh", "-i"]}, 
```

但是我看到`SHELL`环境变量仍将被评估为`/bin/bash`. 我无法直接在这个配置文件中设置环境变量，所以我编辑变量`SublimeREPL/config/SublimeREPL\ /(OSX).sublime-settings`并将其注入到指令中，如下所示：`SHELL``"default_extended_env"`

```
3: "default_extend_env": {"PATH": "{PATH}:/usr/local/bin", "SHELL" : "/bin/zsh" } 
```

这让一切顺利进行。如果像我一样，命令和输出之间没有换行符，只需编辑`SublimeREPL/config/Shell/Main.sublime-menu`：

```
26: "suppress_echo": false 
```

它不会抑制 echo 并在每个命令后产生一个换行符。

我知道这有点像猴子修补，但在进一步了解之前，这是我能做的最好的。

# windows - 为什么对象的 id 会根据 python shell 中的行而改变

> ID：15315096
> 
> 赞同：2
> 
> 时间：2013-03-09T19:44:04.743
> 
> 标签：windows, python-3.x, interpreter

这个问题只是出于好奇。

在阅读[python 的对象模型文档](http://docs.python.org/2/reference/datamodel.html#index-35)时，我决定对类方法的 id 进行一些试验，并发现了这种行为：

```
 Python 3.2.2 (default, Sep  4 2011, 09:07:29) [MSC v.1500 64 bit (AMD64)] on win32
 Type "copyright", "credits" or "license()" for more information.
 >>> class A():
    def a(self):
        pass

 >>> id(A().a)
 54107080
 >>> id(A().a)
 54108104
 >>> id(A().a)
 54107080
 >>> id(A().a)
 54108104
 >>> 
 >>> id(A().a)
 54108104
 >>> 
 >>> id(A().a)
 54108104
 >>> id(A().a)
 54107080
 >>> 
```

方法的id随着行的奇偶性而变化！

我其实是想创建同一个类的几个实例，看看它们是否有相同的方法对象，我希望它们是完全相同的，或者每次都改变，我没想到的是方法id将与解释器线是否均匀有关！有任何想法吗？

注意：我知道文档和解释器的版本不匹配，只是碰巧我在 Windows 上，我只安装了 3.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:49:52.320

我将解释这条线的`id(A().a)`作用：

```
A() # creates a new object I call a 
```

然后

```
A().a # creates a function f bound to a
A.a.__get__(A(), A) # same as above

>>> A.a.__get__(A(), A)
<bound method A.a of <__main__.A object at 0x02D85550>>
>>> A().a
<bound method A.a of <__main__.A object at 0x02D29410>> 
```

这个绑定函数总是另一个，因为它有另一个对象`__self__`

```
>>> a = A()
>>> assert a.a.__self__ is a 
```

`__self__`将作为第一个参数传递`self`给函数 Aa

编辑：这就是它的样子：

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> class A:
    def a(self):
        pass

>>> id(A().a)
43476312
>>> id(A().a)
49018760 
```

这里的 id 像 abab 一样重复

```
Python 3.2.2 (default, Sep  4 2011, 09:51:08) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> class A:
    def a(self):
        pas
        s

>>> id(A().a)
50195512
>>> id(A().a)
50195832
>>> id(A().a)
50195512
>>> id(A().a)
50195832 
```

编辑：对于 linux 或者什么不是我的机器以及我不知道的任何东西

```
id(A().a) 
```

将始终给出相同的结果，除非您将其存储到变量中。我不知道为什么，但我认为这是因为性能优化。对于堆栈上的对象，您不需要每次调用函数时都为对象分配新空间。

# windows-phone-7 - WFC 数据服务填充关系

> ID：15315099
> 
> 赞同：0
> 
> 时间：2013-03-09T19:44:32.460
> 
> 标签：windows-phone-7, wcf-data-services, odata

我需要帮助从 WCF Dataservices 到我的 WP7 应用程序获取具有列表地址（地址是 Person 上的属性）的人员列表。

我在 WCF DataServices 中得到了这个方法，它使用 EF 获取数据

```
[WebGet]
public IQueryable<Person> GetPersonAdress(int id)
{
   return from p in CurrentDataSource.Persons.Include("Addresses")
          from a in c.Addresses
          where a.Field1 > 1
          where a.Field2 == id
          select p;
 } 
```

在我的 WP7 应用程序中，我得到了一个看起来像这样的 DataServices 类，我在其中调用该方法。但它不起作用。在 BeginLoadProperty 完成之前 BeginExecute 退出...

```
public class DataServices : IDataServices
{
    public void LoadPersonAddress(Action<IEnumerable<Person>, Exception> callback, int id)
    {
        try
        {
            var queryString = string.Format("GetPersonAdress?id={0}", id);

            _context.BeginExecute<Person>(new Uri(queryString, UriKind.Relative), (ar =>
            {
                var ctx = ar.AsyncState as DBEntities;
                var persons = new List<Person>();

                var results = ctx.EndExecute<Person>(ar);

                foreach (var person in results)
                {
                    var newPerson = new Person
                    {
                        Id = person.Id,
                        FirstName = person.FirstName,
                        LastName = person.LastName,
                    };

                    ctx.BeginLoadProperty(person, "Adresses", (asb =>
                    {
                        ctx.EndLoadProperty(asb);

                    }), person);

                    persons.Add(newPerson);
                }
                callback(persons, null);

            }), _context);
        }
        catch (Exception ex)
        {
            callback(null, ex);
        }
    }
} 
```

我如何获得一个人的地址列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:38:31.493

尝试：

```
~/GetPersonAddress?id=12345&$expand=Addresses 
```

# android - ArrayAdapter 中的 NullPointException

> ID：15315104
> 
> 赞同：2
> 
> 时间：2013-03-09T19:45:01.363
> 
> 标签：android, android-arrayadapter

我在我的 Android 程序中显示一个 ListView，使用 ArrayAdapter 从字符串数组中获取数据。通常，我从 InputStream 获取数据以填充字符串数组，并且 ListView 正确显示。但是，如果我的 InputStream 为空，我将使用字符串值初始化我的数组。发生这种情况时，我在将 arrayadapter 应用到我的列表视图时会收到 NullPointException。
这是我初始化字符串数组的方法。

```
 protected String[] doInBackground(Void...parameters ) {
  .........  do something
   String[] result = new String[50];
   result[0] = "No restaurants found in this area";
      .......  get my httpconnection 
```

这就是我填充字符串数组的方式：

```
 ........
  if(responseCode == HttpURLConnection.HTTP_OK) {
    InputStream in = httpConnection.getInputStream();
    BufferedReader br = new BufferedReader(
        new InputStreamReader(in));
  String line;

int x=0;
while ((line = br.readLine()) != null) {

    result[x] = line;

    x++;
} 

    return result;
   } 
```

这是我创建列表视图的地方：

```
 protected void onPostExecute(String[] result) {

        ListView restaurant_list = (ListView) findViewById(R.id.restaurant_list);
        final ArrayAdapter<String> arrayAdpt = new ArrayAdapter<String>(getApplicationContext(), R.layout.listview, R.id.viewtext, result);
        restaurant_list.setAdapter(arrayAdpt);

    } 
```

如果我从输入流中获取数据，一切正常。如果我没有得到任何数据，则字符串数组仅包含我的初始化值和 list.setAdapter(arrayAdpt) 行（最后一行）的程序炸弹。此外，此处理是在 doInBackground 方法下的异步任务 (AsynTask) 下完成的。为什么我在字符串数组中的数据源会对 arrayadapter 的工作方式产生影响？有人有建议吗？

好的。我改变了我的逻辑来使用

```
 List<String> result = new ArrayList<String>();
 .....
 result.add(line);
 .....
  return (String[]) result.toArray(); 
```

它给了我一个空异常，我会在返回指令中假设，因为错误在 doInBackground 方法中。以下是来自 logcat 的错误。

```
 03-09 20:03:13.755: E/AndroidRuntime(6089): FATAL EXCEPTION: AsyncTask #1
  03-09 20:03:13.755: E/AndroidRuntime(6089): java.lang.RuntimeException: An error occured while executing doInBackground()
  03-09 20:03:13.755: E/AndroidRuntime(6089):   at android.os.AsyncTask$3.done(AsyncTask.java:299)
  03-09 20:03:13.755: E/AndroidRuntime(6089):   at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
  03-09 20:03:13.755: E/AndroidRuntime(6089):   at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
  03-09 20:03:13.755: E/AndroidRuntime(6089):   at java.util.concurrent.FutureTask.run(FutureTask.java:239)
  03-09 20:03:13.755: E/AndroidRuntime(6089):   at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
   03-09 20:03:13.755: E/AndroidRuntime(6089):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
   03-09 20:03:13.755: E/AndroidRuntime(6089):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
   03-09 20:03:13.755: E/AndroidRuntime(6089):  at java.lang.Thread.run(Thread.java:856)
   03-09 20:03:13.755: E/AndroidRuntime(6089): Caused by: java.lang.ClassCastException: java.lang.Object[] cannot be cast to java.lang.String[]
   03-09 20:03:13.755: E/AndroidRuntime(6089):  at com.example.herb4.MainActivity$GetRestaurant.doInBackground(MainActivity.java:173)
   03-09 20:03:13.755: E/AndroidRuntime(6089):  at com.example.herb4.MainActivity$GetRestaurant.doInBackground(MainActivity.java:1)
   03-09 20:03:13.755: E/AndroidRuntime(6089):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
   03-09 20:03:13.755: E/AndroidRuntime(6089):  at java.util.concurrent.FutureTask.run(FutureTask.java:234) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:48:16.680

> 如果我的 InputStream 为空，我用字符串值初始化我的数组

在这种情况下，您会遇到 `NullPointException`异常，因为您创建了一个字符串数组，`Size 50`但仅在`0th position`.

如果您不知道您从 web 服务而不是静态大小数组中获得了多少项目，则避免`NullPointException`使用异常而不是数组。`ArrayList`

**例子 ：-**

```
ArrayList<String> result=new ArrayList<String>();

if(<Stream not empty>){

  //Add all elemnts to ArrayList
  result.add(line);
}
else{

   result.add("No restaurants found in this area");

 } 
```

# java - XML 未在 Android 中显示

> ID：15315107
> 
> 赞同：1
> 
> 时间：2013-03-09T19:45:05.837
> 
> 标签：java, android, eclipse, oop, netbeans

有这个奇怪的问题我在android中使用这个代码来获取XML数据

```
 public class MainActivity extends Activity {
private Object[] lv_arr = {};
 // static String url = "C:\\Users\\Administrator\\Desktop\books.xml";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final EditText edt = (EditText)findViewById(R.id.editText1);
    try {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();

        DefaultHandler handler = new DefaultHandler() {

        boolean bfname = false;
        boolean blname = false;
        boolean bnname = false;
        boolean bsalary = false;

        public void startElement(String uri, String localName,String qName, 
                    Attributes attributes) throws SAXException {

            System.out.println("Start Element :" + qName);
            edt.setText(qName); //Notice the text field

            if (qName.equalsIgnoreCase("FIRSTNAME")) {
                bfname = true;
            }

            if (qName.equalsIgnoreCase("LASTNAME")) {
                blname = true;
            }

            if (qName.equalsIgnoreCase("NICKNAME")) {
                bnname = true;
            }

            if (qName.equalsIgnoreCase("SALARY")) {
                bsalary = true;
            }

        }

        public void endElement(String uri, String localName,
            String qName) throws SAXException {

            System.out.println("End Element :" + qName);

        }

        public void characters(char ch[], int start, int length) throws SAXException {

            if (bfname) {
                System.out.println("First Name : " + new String(ch, start, length));

                bfname = false;
            }

            if (blname) {
                System.out.println("Last Name : " + new String(ch, start, length));
            //  edt.setText(new String(ch, start, length));
                blname = false;
            }

            if (bnname) {
                System.out.println("Nick Name : " + new String(ch, start, length));
                bnname = false;
            }

            if (bsalary) {
                System.out.println("Salary : " + new String(ch, start, length));
                bsalary = false;
            }

        }

         };

           saxParser.parse("c:\\file.xml", handler);

         } catch (Exception e) {
           e.printStackTrace();
         }
} 
```

但是这段代码在java中是否可以正常工作，但在android中没有语法错误，但我没有输出，而且文本字段也是空的，这里有什么问题我的log-cat RESULT：

```
03-10 00:42:51.222: W/System.err(366):  at javax.xml.parsers.SAXParser.parse(SAXParser.java:392)
03-10 00:42:51.232: W/System.err(366):  at javax.xml.parsers.SAXParser.parse(SAXParser.java:268)
03-10 00:42:51.320: W/System.err(366):  at dalvik.system.NativeStart.main(Native Method)
03-10 00:42:51.832: W/InputManagerService(59): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@43f4ae90 (uid=10025 pid=132) 
```

这里可能是什么问题，任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:49:48.300

```
saxParser.parse("c:\\file.xml", handler); 
```

这不适用于设备...那些无法访问您的`C:\\` Insead 放入资源或您将从 apk、运行时加载它的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:02:05.670

不确定这是否适合您，但如果您将 file.xml 保存在 res/xml 目录中，您可以`XmlResourceParser`使用以下方法在 MainActivity 中获取：

```
XmlResourceParser myXmlParser = getResources().getXml(R.xml.file); 
```

# java - 具有多个变量的值更改处理程序

> ID：15315112
> 
> 赞同：0
> 
> 时间：2013-03-09T19:45:42.227
> 
> 标签：java, gwt

我有一个扩展复合并实现包含 3 个日期对象的 HasValueChangeHandlers 的小部件：beg、current 和 end。我正在尝试添加一个值更改处理程序，该处理程序能够判断哪个日期对象发生了更改；但对我来说，最好的方法并不是立即显而易见。

解决这个问题的最佳方法是什么？在不返回并比较值的情况下，我如何知道哪个 Date 对象发生了变化？

我是否应该为每个变量创建空类并将它们作为源传递，然后在 onValueChange 方法中比较事件的源类？似乎应该有更好的方法......

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:10:54.400

我相信您最好的方法是利用日期对象本身实现的优势`HasValueChangedHandlers`。在您的复合类中，您可以为它们中的每一个添加一个更改的处理程序，以便您知道哪个发生了更改。事实上，如果您想将相同的行为应用于所有这些行为，那么您不妨为所有这些行为设置相同的处理程序。例如：

```
 public MyClass extends Composite implements HasValueChangedHandler{
       private DateBox beg;
       private DateBox current;
       private DateBox end;   

       //.... rest of the code..

       public HandlerRegistration addValueChangedHanlder(ValueChangedHandler<Date> h){
                 beg.addValueChangedHandler(h);
                 current.addValueChangedHandler(h);
                 end.addValueChangedHandler(h);

       }
        //.... rest of the code..

 } 
```

# c# - 在 Windows 窗体项目中动态绘制 winline

> ID：15315114
> 
> 赞同：1
> 
> 时间：2013-03-09T19:45:52.657
> 
> 标签：c#, line-drawing

所以这是一个井字游戏，其中按钮网格的大小通过在 App.config 中设置而改变。这是我的`CheckXWinner`功能，如果 X 获胜，它会突出显示获胜的行组合并将按钮变为红色。我想添加一个动态线条图，该线条图将从获胜模式的开始绘制到结束（通过获胜组合的线）。在 MSDN 上，它说要添加 Microsoft.VisualBasic.PowerPacks.VS 的引用，`using Microsoft.VisualBasic.PowerPacks;`然后以下是他们绘制线条的代码示例：

```
ShapeContainer canvas = new ShapeContainer();
LineShape theLine = new LineShape();
// Set the form as the parent of the ShapeContainer.
canvas.Parent = this;
// Set the ShapeContainer as the parent of the LineShape.
theLine.Parent = canvas;
// Set the starting and ending coordinates for the line.
theLine.StartPoint = new System.Drawing.Point(0, 0);
theLine.EndPoint = new System.Drawing.Point(640, 480); 
```

这是我的`CheckXWinner`函数代码：

```
public void CheckXWinner(Button[] buttonArray)
    {

        int arrLength = buttonArray.Length; 
        int root = (int)Math.Sqrt(Convert.ToDouble(arrLength));
        bool winner = false;//variable to keep the computer from going when Xwins
        for (int i = 0;  i < root;  i++)
        {
            //Sets the counter for the winners back to zero
            int d2Count = 0;
            int d1Count = 0;
            int hCount = 0;
            int vCount = 0;

                for(int j = 0;  j < root; j++)
                {
                    //increments the appropriate counter if the button contains an X
                    //Horizonal win
                    if (buttonArray[(i*root) + j].Text == "X")
                    {
                        hCount++;
                        if (hCount == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[(i*root) + z].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; //sets winner to true so computer does not take turn 
                        }
                    }//end of Horizonal win

                    //Left to right diagonal
                    if (buttonArray[j + (j*root)].Text == "X")
                    {
                        d1Count++;
                        if (d1Count == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[z + (z * root)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; 
                        }
                    }//end of LTR win

                    //Right to left diagonal
                    if (buttonArray[(j*(root - 1)) + (root - 1)].Text == "X")
                    {
                        d2Count++;
                        if (d2Count == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[(z*(root - 1)) + (root - 1)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; 
                        }
                    }//end of RTL win

                    //Vertical win
                    if (buttonArray[i + (root*j)].Text == "X")
                    {
                        vCount++;
                        if (vCount == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[i + (root*z)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; 
                        }
                    }//end of vert win                        
                }//end of for j loop
        }//end of for loop
        CheckDraw();
        if (winner == false)
        {
            ComputerGoes(buttonArray);
        };

    }//end of CheckXWinner 
```

如何获取对我的表格的引用以获取线条图的代码？之后，我将把这些点称为循环中的获胜线，以将获胜线变为红色。谢谢！

# java - 平均计算程序问题

> ID：15315115
> 
> 赞同：4
> 
> 时间：2013-03-09T19:46:01.603
> 
> 标签：java

我刚开始学习Java，在这一点上我很困惑。我正在尝试制作一个程序来平均用户输入的任何数量的数字，但我无法弄清楚如何允许用户输入他们想要的任意数量的数字。现在，代码只是让他们在平均之前做 1 个数字。

笔记：很有可能我写的完全错误，我这样做是为了看看我到目前为止所知道的

我使用 Eclipse

我正在向 www.thenewboston.org 学习

这是代码：

```
import java.util.Scanner;

class MainClass {
    public static void main(String[] args){
        System.out.println("Enter Grades Now");
        Scanner input = new Scanner(System.in);
        double input2 = input.nextDouble();

        System.out.println(average(input2));
    }

    public static double average(double...numbers){
        double total=0;
        for(double x:numbers)
            total+=x;

        return total/numbers.length;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:50:43.530

您可以使用 a `LinkedList<Double>`and a 循环让用户输入人工数量的数字。

```
Scanner input = new Scanner(System.in);
List<Double> allDoubles = new LinkedList<Double>();

do {
    System.out.print("Next grade: ");
    allDoubles.add(input.nextDouble());
} while (input.hasNextDouble());

System.out.println(average(allDoubles.toArray(new Double[0]))); 
```

输入任意数量的值，然后输入一些文本，例如`"done"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:50:50.167

您需要一个循环来接收所有值。A`List`存储它们也很有帮助：

```
 public static void main(String[] args){
    System.out.println("Enter Grades Now:");

    List<Double> inputs =  new ArrayList<Double>();
    Scanner input = new Scanner(System.in);

    while(input.hasNextDouble()){

          inputs.add(input.nextDouble()); //add values to the list

     }

    }

    System.out.println(average(inputs));
}

 public static double average(List<Double> numbers){
    double total=0;
    for(Double x:numbers)
        total+=x;

    return total/numbers.size();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T19:51:03.117

```
ArrayList<Double> al = new ArrayList<Double>();
while(input.hasNextDouble){
    al.add(input.nextDouble())
    System.out.print("Prompt: "); //ask for input here
}
// average the elements in the arraylist 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T19:53:17.190

您可以建议用户输入数字，用空格分隔它们：

```
Scanner input = new Scanner(System.in);
String userInput = input.nextline();

// e.g. "12 23 34"
String[] stringArray = userInput.split(" ");
Double[] doubleArray = new Double[stringArray.length];

// converting string array to double array    
for (int i = 0; i < stringArray.length; ++) {
    doubleArray[i] = Double.parseDouble(stringArray[i]);
}
System.out.println(average(doubleArray)); 
```

# javascript - 遍历数组不会按顺序做事吗？

> ID：15315120
> 
> 赞同：1
> 
> 时间：2013-03-09T19:46:17.107
> 
> 标签：javascript, html, arrays

下面的代码，当运行时，但它似乎以某种方式没有按顺序附加帖子（有时`post_2`是第一个和`post_4`第二个）：

```
var posts = [
    "post_1.md",
    "post_2.md",
    "post_3.md",
    "post_4.md",
    "post_5.md",
    "post_6.md",
    "post_7.md"];

for (var i in posts) {
    $.ajax({
        url: "posts/" + posts[i],
        context: document.body,
        success: function (mdText) {
            var converter = new Showdown.converter();
            var htmlText = converter.makeHtml(mdText);
            $("body").append(htmlText);
        }
    });
} 
```

它遍历数组中的元素，并为每个元素下载一个 Markdown 文档，将其转换为 HTML，并将其附加到正文中。我尝试了一个简单的`for`循环以及下划线的`_.each()`功能。所有三个都有相同的结果，运行时它们不会按顺序附加文档（所以当我单击刷新时，标题的顺序不同）。任何想法为什么会发生这种情况以及解决它的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:48:54.993

`$.ajax`是一个异步函数，这意味着您的所有`$.async`函数都是并行发生的，并将按照它们完成的顺序附加到主体（这显然会根据它们获取的文档的大小和一般的网络延迟而有所不同）。

您可能希望查看[async.js](https://github.com/caolan/async)库，它允许您并行运行 AJAX 调用，然后在所有操作完成后执行回调。您想使用该`async.parallel`函数，它将每个 AJAX 调用的结果作为数组传递给最终回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:05:15.793

这正是 jQuery 的类型，[`$.when`](http://api.jquery.com/jQuery.when/)旨在[`deferred.done`](http://api.jquery.com/deferred.done/)提供帮助。您传递了一系列延迟（jQuery 的`$.ajax`返回延迟），当他们的承诺解决时，您可以单独处理它们中的每一个。这是 jQuery 的 API 文档本身的修改示例：

```
$.when( $.ajax("/page1.php"), $.ajax("/page2.php") ).done(function( a1, a2 ) {
  /* a1 and a2 are arguments resolved for the page1 and page2 ajax requests */
}); 
```

传入的回调函数`.done`只会在 promise 全部解决后运行。因此，即使对 page2 的请求可能在 page1 之前完成，我们也不担心。在所有请求完成之前，我们的代码不会被调用。

在您的特定情况下，异步请求的数量未知并且会有所不同，您可能会发现使用以下方法会更成功`func.apply`：

```
var reqs = [];

reqs.push( $.ajax("post_1.md"), $.ajax("post_2.md"), $.ajax("post_3.md") );

$.when.apply(this, reqs).done(function () {
    $.each(arguments, function (index, value) {
        console.log( value[0] );
    });
}); 
```

# actionscript-3 - 在一定次数的迭代后如何停止 setInterval()

> ID：15315125
> 
> 赞同：1
> 
> 时间：2013-03-09T19:46:46.753
> 
> 标签：actionscript-3, flash, adobe

我尝试过以下代码及其工作，但是当它达到 130 时我该如何停止？

```
var textValue:Number = 67.1;
var addValue:Number = .1;

my_txt.text = textValue.toString();

function counter(){
    textValue += addValue;
    my_txt.text = textValue.toString();
}

setInterval(counter, 10); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:50:37.520

setInterval 以 unsigned int ( `uint`) 形式返回唯一 ID。您可以使用带有此 ID 的 clearInterval 来停止间隔。编码：

```
var textValue:Number = 67.1;
var addValue:Number = .1;
var myInterval:uint;
function counter(){
    textValue += addValue;
    my_txt.text = textValue.toString();
    if( textValue >= 130 ) {
        clearInterval(myInterval);
    }
}
myInterval = setInterval( counter, 10 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:51:48.920

您可以使用 clearInterval 停止间隔。试试这个：

```
var textValue:Number = 67.1;
var addValue:Number = .1;

my_txt.text = textValue.toString();

function counter(){
    textValue += addValue;
    my_txt.text = textValue.toString();
    //check for end value
    if (textValue>=130)
    {
        //clear the interval
        clearInterval(intervalID);
    }
}

//store the interval id for later
var intervalID:uint = setInterval(counter, 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T01:48:44.077

由于您似乎正在使用 actionscript 3，因此我建议您根本不要使用间隔。Timer 对象可能会更好，因为它可以提供更好的控制，例如能够在停止自身之前设置它触发的次数，并且能够根据需要轻松启动、停止和重新启动计时器。

使用 Timer 对象并为每个刻度添加事件侦听器的示例

```
import flash.utils.Timer;
import flash.events.TimerEvent;

// each tick delay is set to 1000ms and it'll repeat 12 times
var timer:Timer = new Timer(1000, 12);

function timerTick(inputEvent:TimerEvent):void {
    trace("timer ticked");

    // some timer properties that can be accessed (at any time)
    trace(timer.delay); // the tick delay, editable during a tick
    trace(timer.repeatCount); // repeat count, editable during a tick
    trace(timer.currentCount); // current timer tick count;
    trace(timer.running); // a boolean to show if it is running or not
}
timer.addEventListener(TimerEvent.TIMER, timerTick, false, 0, true); 
```

控制定时器：

```
timer.start(); // start the timer
timer.stop(); // stop the timer
timer.reset(); // resets the timer 
```

它抛出两个事件：

```
TimerEvent.TIMER // occurs when one 'tick' of the timer has gone (1000 ms in the example)
TimerEvent.TIMER_COMPLETE // occurs when all ticks of the timer have gone (when each tick has happened 11 times in the example) 
```

API 文档：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html)

# android - 将设备中的磁场 X、Y、Z 值转换为全局参考系

> ID：15315129
> 
> 赞同：11
> 
> 时间：2013-03-09T19:47:03.450
> 
> 标签：android, sensors, android-sensors, magnetometer

当您使用 TYPE_MAGNETOMETER 传感器时，您将获得与设备方向相关的磁场强度 X、Y、Z 值。我想要得到的是将这些值转换为全局参考框架，澄清：用户拿起设备，测量这些值，然后将设备围绕任何轴旋转一些度并获得〜相同的值。请在下面找到类似的问题： [获取全局坐标中](https://stackoverflow.com/questions/13361010/getting-magnetic-field-values-in-global-coordinates) [的磁场值 如何获得磁场矢量，与设备旋转无关？](https://stackoverflow.com/questions/11772923/how-can-i-get-the-magnetic-field-vector-independent-of-the-device-rotation) 在这个答案中描述了示例解决方案（它用于线性加速，但我认为没关系）：[https ://stackoverflow.com/a/11614404/2152255](https://stackoverflow.com/a/11614404/2152255) 我用了它，我得到了 3 个值，X 总是很小（不要认为它是正确的），Y 和 Z 都可以，但是当我旋转设备时它们仍然发生了一些变化。怎么可能调整？可以全部解决吗？我使用简单的卡尔曼滤波器来近似测量值，因为没有它，即使设备根本没有移动/旋转，我也会得到不同的值。请在下面找到我的代码：

```
import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.opengl.Matrix;
import android.os.Bundle;
import android.view.View;
import android.widget.CheckBox;
import android.widget.TextView;
import com.test.statistics.filter.kalman.KalmanState;
import com.example.R;

/**
 * Activity for gathering magnetic field statistics.
 */
public class MagneticFieldStatisticsGatheringActivity extends Activity implements SensorEventListener {

    public static final int KALMAN_STATE_MAX_SIZE = 80;
    public static final double MEASUREMENT_NOISE = 5;

    /** Sensor manager. */
    private SensorManager mSensorManager;
    /** Magnetometer spec. */
    private TextView vendor;
    private TextView resolution;
    private TextView maximumRange;

    /** Magnetic field coordinates measurements. */
    private TextView magneticXTextView;
    private TextView magneticYTextView;
    private TextView magneticZTextView;

    /** Sensors. */
    private Sensor mAccelerometer;
    private Sensor mGeomagnetic;
    private float[] accelerometerValues;
    private float[] geomagneticValues;

    /** Flags. */
    private boolean specDefined = false;
    private boolean kalmanFiletring = false;

    /** Rates. */
    private float nanoTtoGRate = 0.00001f;
    private final int gToCountRate = 1000000;

    /** Kalman vars. */
    private KalmanState previousKalmanStateX;
    private KalmanState previousKalmanStateY;
    private KalmanState previousKalmanStateZ;
    private int previousKalmanStateCounter = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);

        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        mGeomagnetic = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);

        vendor = (TextView) findViewById(R.id.vendor);
        resolution = (TextView) findViewById(R.id.resolution);
        maximumRange = (TextView) findViewById(R.id.maximumRange);

        magneticXTextView = (TextView) findViewById(R.id.magneticX);
        magneticYTextView = (TextView) findViewById(R.id.magneticY);
        magneticZTextView = (TextView) findViewById(R.id.magneticZ);

        mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_FASTEST);
        mSensorManager.registerListener(this, mGeomagnetic, SensorManager.SENSOR_DELAY_FASTEST);
    }

    /**
     * Refresh statistics.
     *
     * @param view - refresh button view.
     */
    public void onClickRefreshMagneticButton(View view) {
        resetKalmanFilter();
    }

    /**
     * Switch Kalman filtering on/off
     *
     * @param view - Klaman filetring switcher (checkbox)
     */
    public void onClickKalmanFilteringCheckBox(View view) {
        CheckBox kalmanFiltering = (CheckBox) view;
        this.kalmanFiletring = kalmanFiltering.isChecked();
    }

    @Override
    public void onSensorChanged(SensorEvent sensorEvent) {
        if (sensorEvent.accuracy == SensorManager.SENSOR_STATUS_UNRELIABLE) {
            return;
        }
        synchronized (this) {
            switch(sensorEvent.sensor.getType()){
                case Sensor.TYPE_ACCELEROMETER:
                    accelerometerValues = sensorEvent.values.clone();
                    break;
                case Sensor.TYPE_MAGNETIC_FIELD:
                    if (!specDefined) {
                        vendor.setText("Vendor: " + sensorEvent.sensor.getVendor() + " " + sensorEvent.sensor.getName());
                        float resolutionValue = sensorEvent.sensor.getResolution() * nanoTtoGRate;
                        resolution.setText("Resolution: " + resolutionValue);
                        float maximumRangeValue = sensorEvent.sensor.getMaximumRange() * nanoTtoGRate;
                        maximumRange.setText("Maximum range: " + maximumRangeValue);
                    }
                    geomagneticValues = sensorEvent.values.clone();
                    break;
            }
            if (accelerometerValues != null && geomagneticValues != null) {
                float[] Rs = new float[16];
                float[] I = new float[16];

                if (SensorManager.getRotationMatrix(Rs, I, accelerometerValues, geomagneticValues)) {

                    float[] RsInv = new float[16];
                    Matrix.invertM(RsInv, 0, Rs, 0);

                    float resultVec[] = new float[4];
                    float[] geomagneticValuesAdjusted = new float[4];
                    geomagneticValuesAdjusted[0] = geomagneticValues[0];
                    geomagneticValuesAdjusted[1] = geomagneticValues[1];
                    geomagneticValuesAdjusted[2] = geomagneticValues[2];
                    geomagneticValuesAdjusted[3] = 0;
                    Matrix.multiplyMV(resultVec, 0, RsInv, 0, geomagneticValuesAdjusted, 0);

                    for (int i = 0; i < resultVec.length; i++) {
                        resultVec[i] = resultVec[i] * nanoTtoGRate * gToCountRate;
                    }

                    if (kalmanFiletring) {

                        KalmanState currentKalmanStateX = new KalmanState(MEASUREMENT_NOISE, accelerometerValues[0], (double)resultVec[0], previousKalmanStateX);
                        previousKalmanStateX = currentKalmanStateX;

                        KalmanState currentKalmanStateY = new KalmanState(MEASUREMENT_NOISE, accelerometerValues[1], (double)resultVec[1], previousKalmanStateY);
                        previousKalmanStateY = currentKalmanStateY;

                        KalmanState currentKalmanStateZ = new KalmanState(MEASUREMENT_NOISE, accelerometerValues[2], (double)resultVec[2], previousKalmanStateZ);
                        previousKalmanStateZ = currentKalmanStateZ;

                        if (previousKalmanStateCounter == KALMAN_STATE_MAX_SIZE) {
                            magneticXTextView.setText("x: " + previousKalmanStateX.getX_estimate());
                            magneticYTextView.setText("y: " + previousKalmanStateY.getX_estimate());
                            magneticZTextView.setText("z: " + previousKalmanStateZ.getX_estimate());

                            resetKalmanFilter();
                        } else {
                            previousKalmanStateCounter++;
                        }

                    } else {
                        magneticXTextView.setText("x: " + resultVec[0]);
                        magneticYTextView.setText("y: " + resultVec[1]);
                        magneticZTextView.setText("z: " + resultVec[2]);
                    }
                }
            }
        }
    }

    private void resetKalmanFilter() {
        previousKalmanStateX = null;
        previousKalmanStateY = null;
        previousKalmanStateZ = null;
        previousKalmanStateCounter = 0;
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int i) {
    }
} 
```

感谢所有阅读这篇文章并提前发布有关该问题的想法的人。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-10T01:13:34.657

在我对您上面提供的链接上的检查答案的评论中，我[参考了真北计算加速度时的简单答案](https://stackoverflow.com/questions/14963190/calculate-acceleration-in-reference-to-true-north/14988559#14988559)

让我在这里再次回答更多的澄清。答案是**旋转矩阵**和**磁场值**的乘积。如果您进一步阅读“X 总是非常小”是正确的值。

加速度计和磁场传感器分别测量设备的加速度和设备所在位置的地球磁场。它们是 3 维空间中的向量，我们分别称它们**为 a**和**m**。
如果您静止不动并旋转您的设备，假设周围物体没有磁干扰，理论上**m**不会改变（实际上**m**应该变化不大，如果您四处走动，因为地球的磁场在很短的距离内应该变化不大）。但是`a`确实会发生变化，即使在大多数情况下它不应该是激烈的。

现在 3 维空间中的向量**v**可以表示为相对于某个基（**e_1**、**e_2**、**e_3** ）的三元组（v_1、v_2、v_3 ），即**v** = v_1 **e_1** + v_2 **e_2** + v_3 **e_3**。(v_1, v_2, v_3) 称为**v**相对于基础 ( **e_1** , **e_2** , **e_3** ) 的坐标。

在 Android 设备中，基础是 ( **x** , **y** , **z** )，对于大多数手机来说，**x**沿着较短的一侧并指向右侧，**y**沿着较长的一侧并指向上方，**z**垂直于屏幕并指向外面。
现在这个基础随着设备位置的变化而变化。可以将这些基础视为时间的函数（**x** (t), **y** (t), **z** (t)），在数学术语中它是一个移动坐标系。

因此即使**m**没有变化，但是由于基础不同，传感器返回的**event.values**是不同的（我稍后会讨论波动）。事实上，**event.values**是无用的，因为它为我们提供了坐标，但我们不知道基础是什么，即关于我们知道的某些基础。

现在的问题是：是否有可能找到**a**和**m**相对于固定世界基准（**w_1**、**w_2**、**w_3**）的坐标，其中**w_1**指向东方，**w_2**指向磁北， **w_3**指向天空？

**答案是肯定的，前提是满足 2 个重要假设。**
有了这两个假设，很容易计算（只是几个叉积）基矩阵**R**从基 ( **x** , **y** , **z** ) 到基 ( **w_1** , **w_2** , **w_3** ) 的变化，在 Android 中称为**旋转矩阵**。然后向量**v**相对于基础 ( **w_1** , **w_2** , **w_3 ) 的坐标通过将****R**与**v**相对于 ( **x** , **y** ) 的坐标相乘得到**, **z** )。因此，**m**相对于世界坐标系的坐标只是**旋转矩阵**和**TYPE_MAGNETIC_FIELD**传感器返回的 event.values 的乘积，对于**a 也是**如此。**

 **在 android 中，**旋转矩阵**是通过调用**getRotationMatrix (float[] R, float[] I, float[] Gravity, float[] geomagnetic)**获得的，我们通常将返回的加速度计值传递给重力参数和磁场值地磁。

两个**重要的假设**是：
**1-****重力参数**表示位于**w_3**中的向量，更具体地说，它是仅受重力影响的向量的负值。
因此，如果您在没有过滤的情况下传入加速度计值，则**旋转矩阵**将略微偏离。这就是为什么您需要对加速度计进行过滤，以便过滤值大约是负重力矢量。由于重力加速度是加速度计矢量中的主要因素，通常低通滤波器就足够了。
**2-****地磁参数**表示位于由**w_2**和**w_3 个**向量。那就是它位于北天位面。因此，就 ( **w_1** , **w_2** , **w_3**) 基础上，第一个坐标应该是 0。因此，上面所说的“X 总是很小”是正确的值，理想情况下应该是 0。现在磁场值会波动很大。这是意料之中的，就像普通的罗盘针如果你把它放在你的手中并且你的手有点颤抖，它就不会静止不动。此外，您可能会受到周围物体的干扰，在这种情况下，磁场值是不可预测的。我曾经测试我的指南针应用程序坐在“石头”桌子附近，我的指南针偏离了 90 多度，只有通过使用真正的指南针，我发现我的应用程序没有任何问题，并且“石头”桌子产生了真正的强磁场。
以重力为主导因素，您可以过滤加速度计值，但在没有任何其他知识的情况下，您如何拟合磁值？你怎么知道周围物体是否有干扰？

**通过了解旋转矩阵**，您可以做更多的事情，例如全面了解您的设备空间位置等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-13T21:48:19.700

按照上面的解释，这样做

```
private static final int TEST_GRAV = Sensor.TYPE_ACCELEROMETER;
private static final int TEST_MAG = Sensor.TYPE_MAGNETIC_FIELD;
private final float alpha = (float) 0.8;
private float gravity[] = new float[3];
private float magnetic[] = new float[3];

public void onSensorChanged(SensorEvent event) {
    Sensor sensor = event.sensor;
    if (sensor.getType() == TEST_GRAV) {
            // Isolate the force of gravity with the low-pass filter.
              gravity[0] = alpha * gravity[0] + (1 - alpha) * event.values[0];
              gravity[1] = alpha * gravity[1] + (1 - alpha) * event.values[1];
              gravity[2] = alpha * gravity[2] + (1 - alpha) * event.values[2];
    } else if (sensor.getType() == TEST_MAG) {

            magnetic[0] = event.values[0];
            magnetic[1] = event.values[1];
            magnetic[2] = event.values[2];

            float[] R = new float[9];
            float[] I = new float[9];
            SensorManager.getRotationMatrix(R, I, gravity, magnetic);
            float [] A_D = event.values.clone();
            float [] A_W = new float[3];
            A_W[0] = R[0] * A_D[0] + R[1] * A_D[1] + R[2] * A_D[2];
            A_W[1] = R[3] * A_D[0] + R[4] * A_D[1] + R[5] * A_D[2];
            A_W[2] = R[6] * A_D[0] + R[7] * A_D[1] + R[8] * A_D[2];

            Log.d("Field","\nX :"+A_W[0]+"\nY :"+A_W[1]+"\nZ :"+A_W[2]);

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-25T23:49:06.380

[随机](https://stackoverflow.com/users/2110762/stochastically)给出了一个我觉得比这里发布的更好的答案。

[https://stackoverflow.com/a/16418016/4033525](https://stackoverflow.com/a/16418016/4033525)

它似乎`SensorManager.getOrientation()`无法正确转换为世界框架。

正确的代码是：

```
SensorManager.getRotationMatrix(gravityCompassRotationMatrix, inclinationValues, gravityValues, magnitudeValues);
SensorManager.remapCoordinateSystem(currentOrientationRotationMatrix.matrix, worldAxisX, worldAxisY, adjustedRotationMatrix);
float sin = adjustedRotationMatrix[1] - adjustedRotationMatrix[4];
float cos = adjustedRotationMatrix[0] + adjustedRotationMatrix[5];
float m_azimuth_radians = (float) (sin != 0 && cos != 0 ? Math.atan2(sin, cos) : 0); 
```**

# c# - Microsoft 内部属性 - 此属性没有设置器

> ID：15315131
> 
> 赞同：2
> 
> 时间：2013-03-09T19:47:10.360
> 
> 标签：c#, visual-studio-2012, ilspy

当我从课堂上发现这个时，我正在使用 ILSpy 仔细阅读一些**系统**`System.Internal.HandleCollector`类：

```
internal sealed class HandleCollector
{        
    ... bunch of stuff removed ...

    internal static event HandleChangeEventHandler HandleAdded
    {
        [MethodImpl(MethodImplOptions.Synchronized)]
        add
        {
            HandleCollector.HandleAdded = (HandleChangeEventHandler)Delegate.Combine(HandleCollector.HandleAdded, value);
        }
        [MethodImpl(MethodImplOptions.Synchronized)]
        remove
        {
            HandleCollector.HandleAdded = (HandleChangeEventHandler)Delegate.Remove(HandleCollector.HandleAdded, value);
        }
    }
    ... bunch of stuff removed ...
} 
```

当 VisualStudio 抱怨（我复制了该类）该属性没有设置器时，微软如何编译它？有人可以分解为什么这有效但我的 VS 副本抱怨（构建标志？）？

> 此属性没有设置器

每个`HandleCollector.HandleAdded =`语句都有错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T20:15:48.767

我们不需要猜测 MS 源代码是什么，因为它可以[在这里找到](http://referencesource.microsoft.com/netframework.aspx)。

这是`HandleAdded`来自 HandleCollector.cs 的声明：

```
internal static event HandleChangeEventHandler HandleAdded; 
```

这是一个自动执行的事件。问题在于 ILSpy 的反编译。也许你应该提交一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:12:45.360

如果您希望它使用分配 int 进行编译，则添加和删除实现需要使用字段。

像这样：

```
internal sealed class HandleCollector
{
    private static HandleChangeEventHandler HandleAddedField;

    internal static event HandleChangeEventHandler HandleAdded
    {
        [MethodImpl(MethodImplOptions.Synchronized)]
        add
        {
            HandleCollector.HandleAddedField = (HandleChangeEventHandler)Delegate.Combine(HandleCollector.HandleAddedField, value);
        }
        [MethodImpl(MethodImplOptions.Synchronized)]
        remove
        {
            HandleCollector.HandleAddedField = (HandleChangeEventHandler)Delegate.Remove(HandleCollector.HandleAddedField, value);
        }
    }
} 
```

# asp.net - 跨应用程序的 ASP.NET MemoryCache 共享

> ID：15315132
> 
> 赞同：5
> 
> 时间：2013-03-09T19:47:11.093
> 
> 标签：asp.net, .net, vb.net, memorycache, system.web.caching

我一直在阅读有关从 .Net Framework 4.0 开始的新 MemoryCache 类的信息。根据我的阅读，您可以跨不同的 .Net 应用程序访问 MemoryCache。我正在尝试在 Asp.Net 应用程序和标准 Windows 窗体 .Net 应用程序之间共享一个对象。如果我将对象添加到 .Net 应用程序中的 MemoryCache，Asp.Net 应用程序看不到它。有没有办法做到这一点？感谢您的宝贵时间，非常感谢。

Windows 窗体应用程序：

```
 Dim cache As ObjectCache = MemoryCache.Default
    Dim policy As New CacheItemPolicy()
    policy.AbsoluteExpiration = DateTimeOffset.Now.AddMinutes(60)
    cache.Set("testcache", TestObj, policy) 
```

ASP.NET 应用程序：

```
 Dim cache As ObjectCache = MemoryCache.Default
    If IsNothing(cache("testcache")) Then Response.Write("TestCache Is Nothing") 
```

谢谢 - 瑞安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T19:58:34.687

不，那是不可能的。`MemoryCache`不是分布式缓存解决方案。所以它只能在本地使用。

如果您正在寻找分布式缓存替代方案，您可能需要查看[AppFabric](http://msdn.microsoft.com/en-us/library/hh334305(v=azure.10).aspx)或[Redis](http://redis.io/)。

但是，以这种方式共享缓存听起来确实有点像一个奇怪的架构。也许公开一个共享服务层，asp.net 和 winforms 都使用，并且只让服务实现缓存似乎更合乎逻辑（考虑到我实际上对您要解决的问题一无所知，所以我可以错误的）。

出于性能原因，缓存更常用，而不是作为在应用程序之间共享数据的一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:13:17.347

MySQL 内存表运行良好并且具有出色的性能。20/30 插入一秒，CPU 负载只有 1% 左右。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T19:17:16.340

我意识到这个建议并不及时，但对于阅读这个问题的其他人来说，另一种可能性是两个程序之间的进程间通信 (IPC)。这样，两个程序可以直接交换消息/数据，而无需通过中间程序。

[https://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx)

从上面的文档中，这里有一些选项。

剪贴板 COM 数据复制 DDE 文件映射 邮槽 管道 RPC Windows 套接字

在您的情况下，映射内存文件可能是最好的方法，因为它允许应用程序之间共享内存空间。从根本上说，您的 MySql/Redis 方法可能并没有那么不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-27T11:48:39.570

如果您有兴趣： **单服务器多个应用程序 - 内存共享** ，您应该考虑在同一节点创建 Web api 并使用它（简单的键值 API）并使用 .net 框架提供的简单内存缓存

**多台服务器 - 内存共享免费 $$ 解决方案**

1.  您可以使用“[**分布式 SQL Server 缓存**](https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.sqlservercachingservicesextensions.adddistributedsqlservercache?view=dotnet-plat-ext-3.1)”，允许分布式缓存使用 SQL Server 数据库作为其后备存储。要在 SQL Server 实例中创建 SQL Server 缓存项表，可以使用 sql-cache 工具。该工具使用您指定的名称和架构创建一个表。

2.  **如果您有一个节点集群，您可以使用** [NCache](https://github.com/Alachisoft/NCache)，它是在 .NET 和 .NET Core 中本地开发的开源内存分布式缓存。NCache 既可以在本地工作，也可以配置为在 Azure 或其他托管平台上运行的 ASP.NET Core 应用程序的分布式缓存群集。

**需要付费的解决方案：前面提到的** **NCache**，有Professional和Enterprise的解决方案，或者 [**Redis Cache**](https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.caching.stackexchangeredis.rediscache?view=dotnet-plat-ext-3.1) ——Redis是一个开源的内存数据存储，通常用作分布式缓存。可以为 Azure 托管的 ASP.NET Core 应用配置 Azure Redis 缓存，并使用 Azure Redis 缓存进行本地开发。

# jboss - JBoss 客户端目录

> ID：15315133
> 
> 赞同：0
> 
> 时间：2013-03-09T19:47:11.320
> 
> 标签：jboss

我最近开始了解有关 JBoss 应用程序服务器的更多信息。安装后，我查看了 JBoss 安装创建的所有目录。（我使用的是 JBoss AS 版本 - jboss-5.0.1.GA）

我参考了此[链接上提供的文档](http://docs.jboss.org/jbossas/guides/installguide/r1/en/html/dirs.html)

它说“客户端”目录包含远程客户端所需的 Jar 文件。

```
 client:   The JARs that are required for clients that run outside of JBoss are located in the client directory. 
```

当我在安装后查看“客户端”目录时，它总共包含 90 个 jar 文件。这是否意味着如果我创建一个远程 ejb 客户端，我需要在我的远程应用程序类路径中包含所有 90 个 jar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T00:08:51.237

随着`JBoss AS 5.x`事情变得复杂。

将所有客户端 jar 文件放在类路径上肯定会起作用。有`JBoss 4.x`一个选项可以`jbossall-client.jar`将其他众多客户端库集成到单个文件中。如果您在 JBoss 5.x 中查看同名 jar，您会发现它已简化为引用其他 jar 的清单。只要 manifest 引用的所有 jar 都存在于同一目录中，将这个 jar 放在您的类路径中就可以了。

如果您只需要访问远程 EJB，那么只需要一个 jar 子集，不幸的是，很难分辨它是哪一个。按照[这个 coderanch 链接](http://www.coderanch.com/t/454071/java-EJB-SCBCD/certification/javax-naming-Reference-cast-org)（我在 SO 上找到它）你会发现这样的子集[为](https://stackoverflow.com/questions/3133031/which-jboss-5-1-libraries-i-need-for-a-standalone-ejb-client)`JBoss 5.1.0.GA`.
但请注意，在 coderanch 上发布的 jar 列表具有缩写名称、一些错误引用，并且服务器版本 5.0.1 中至少不存在两个 jar。如果减少依赖项的数量是您的首要任务，请明智地使用此列表并通过反复试验来增强/扩展它。

# jquery - 我可以在 nth-child 中使用 value 来调用元素的 id 吗？

> ID：15315134
> 
> 赞同：1
> 
> 时间：2013-03-09T19:47:20.263
> 
> 标签：jquery

```
<div class="tiles blue tile-group four-wide" id="tile_system" 
style="border-    color:#07caca;>
<div class="live-tile" data-speed="750" data-delay="3000" value="1" id="1">
    <a href="#"><div><img src="images/r1.gif" class="food-l" /></div></a>
    <div><img src="images/r2.gif" class="food-l"id="2"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="2" id="2">
    <a href="#"><div><img src="images/r1.gif" class="food-l" id="1"/></div></a>
    <div><img src="images/r2.gif" class="food-l"id="2"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="3" id="3">
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>

<div class="live-tile" data-speed="750" data-delay="3000" value="4" id="4">
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="5" id="5">
    <a href="#"><div><img src="images/r1.gif" class="food-l" id="1"/></div></a>
    <div><img src="images/r2.gif" class="food-l"id="2"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="6" id="6">
    <a href="#"><div><img src="images/r1.gif" class="food-l" id="1"/></div></a>
    <div><img src="images/r2.gif" class="food-l"id="2"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="7" id="7">
        <div><img src="images/r1.gif" class="l-other"/></div>
    <div><img src="images/r2.gif" class="l-other"/></div>
</div>

<div class="live-tile" data-speed="750" data-delay="3000" value="8" id="8">
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>

<div class="live-tile" data-speed="750" data-delay="3000" value="9" id="9"> 
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>

<div class="live-tile" id = "changemydata" data-speed="750"
 data-delay="3000"" value="10" id="10"> 
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>

<div class="live-tile" data-speed="750" data-delay="3000" value="11" id="11">
    <a href="#"><div><img src="images/r1.gif" class="food-l" /></div></a>
    <div><img src="images/r2.gif" class="food-l"id="2"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="12" id="12">
    <a href="#"><div><img src="images/r1.gif" class="food-l" /></div></a>
    <div><img src="images/r2.gif" class="food-l"id="2"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="13" id="13">
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>

<div class="live-tile" data-speed="750" data-delay="3000" value="14" id="14">
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="15" id="15">   
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>
<div class="live-tile" data-speed="750" data-delay="3000" value="16" id="16">   
        <div><img src="images/r3.gif" class="l-other"/></div>
    <div><img src="images/r3.gif" class="l-other"/></div>
</div>

</div>
 <script>

 $(window).load(function() {
$('.live-tile').click(function() {
    var a = $(this).val();
    if ( a%2 == 0)
    {   var b = a + 1;
        $("#live-tile :nth-child(" + a + ")").removeClass('live-tile').addClass('live-tile two-wide');
        $("#live-tile :nth-child(" + b + ")").slideUp(1000);
    }
    else
    {   var c = a - 1;
        $("#live-tile :nth-child(" + a + ")").removeClass('live-tile').addClass('live-tile two-wide');
        $("#live-tile :nth-child(" + c + ")").slideUp(1000);
    }
    }); 
```

}); 我必须使用这个函数来相应地替换类的偶数和奇数状态。我已经研究了很长时间，但我被卡住了。我该怎么办？该功能将磁贴隐藏在下一个或上一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:48:52.967

是的，但您需要插入`a`变量：

```
var c = $("#system :nth-child("+a+")").attr("id"); 
```

[但是使用Vanilla JS](http://vanilla-js.com/)会更好

```
var c = document.getElementById('system').children[this.value].id; 
```

（小旁注：原版 JS 版本`"#selector>:nth-child("+a+")"`与'其父母的第一个孩子。我相信你实际上还是想使用`>`组合器）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:50:06.137

选择器不使用变量，您必须使用字符串中变量的值：

```
var c = $("#system :nth-child(" + a + ")").attr('id'); 
```

### 编辑：

如果你得到的值可能是无效的，你应该在选择器中使用它之前验证它。例如：

```
$("#inp").blur(function () {
  var a = $(this).val();
  if (/^\d+$/.test(a)) {
    var c = $("#system :nth-child(" + a + ")").attr('id');
    alert(c);
  } else {
    alert("No number entered");
  }
}); 
```

演示：http: [//jsfiddle.net/EYvGE/](http://jsfiddle.net/EYvGE/)

此外，不是获取元素来获取用于获取元素的 id，而是获取元素。代替：

```
var c = $("#system :nth-child(" + a + ")").attr('id');
var d = $("#" + c); 
```

做就是了：

```
var d = $("#system :nth-child(" + a + ")"); 
```

# c# - 实体框架覆盖身份列

> ID：15315139
> 
> 赞同：3
> 
> 时间：2013-03-09T19:48:13.037
> 
> 标签：c#, entity-framework

我有一个 Code First EF 类，如下所示：

```
public class Event
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }
    /* snip */
} 
```

我想要发生的是当 ID 属性为 null 或 0 时，数据库将为它生成一个 ID 值，但是如果我明确设置这个值`newEvent.ID=10000000`，它将使用它作为 ID 列，目前这样做会导致下一个可用的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:20:25.587

首先，我不知道有什么好的解决方案。我建议你重新考虑你想要做什么，或者进一步解释你为什么需要这样做。可能有更好的解决方案。我知道你想要的唯一解决方案是丑陋的，我不能真正推荐它。

1.  您不能使用标识（自动增量）字段。如果你把它放在你的专栏上，那么你就无能为力了。你的数据库要么抛出错误，要么忽略你给它的值。
2.  您必须自己处理自动增量。有很多方法可以做到这一点（将当前值存储在数据库中，执行 max() 查询等）。
3.  您可能很想覆盖 SaveChanges()。[这是一个关于此的 SO POST](https://stackoverflow.com/questions/10080588/entity-framework-dbcontext-override-savechanges-for-each-model)。我真的不建议你这样做。

也许有人会为您提供一个非常棒的解决方案。对不起，我知道这对你来说更像是一个非答案。祝你好运。

# html - 需要一个 Applescript 使 textutil 将最前面的 TextEdit 文档保存为 HTML

> ID：15315141
> 
> 赞同：0
> 
> 时间：2013-03-09T19:48:17.213
> 
> 标签：html, applescript, textedit, save-as

我无法创建一个applescript来在最前面的TextEdit文档上执行“另存为html”，并将其保存到同一个目录（同名，只需添加一个“html”扩展名......我假设会无论如何都是默认行为）。

我的理解是它应该使用 textutil 来做到这一点。

为了额外的润色和感谢：它是否可以检查该目录中是否已经存在具有相同名称和扩展名的文件，如果存在，则自动将保存的 HTML 文件重命名为“xxxx2.html”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:05:39.443

这会将 ~/Desktop/test.rtf 保存为 ~/Desktop/test.html，如果 HTML 文件已经存在，则覆盖它：

```
tell document 1 of application "TextEdit"
    save
    path
end tell
do shell script "textutil -convert html " & quoted form of result 
```

使用 UI 脚本的另一种方法（仅在 10.8 中测试）：

```
tell application "System Events" to tell process "TextEdit"
    click menu item "Save As…" of menu 1 of menu bar item "File" of menu bar 1
    tell sheet 1 of window 1
        tell pop up button 1 of group 1 of group 1
            click
            click menu item "Web Page (.html)" of menu 1
        end tell
        click button "Save"
    end tell
end tell 
```

# iphone - Cocos2D - 为什么我的 FPS 这么低？带瓷砖地图的单一场景

> ID：15315144
> 
> 赞同：1
> 
> 时间：2013-03-09T19:48:34.107
> 
> 标签：iphone, cocos2d-iphone

我使用 Cocos2D 编写了一个简单的游戏，其中我有一个动画精灵在纯绿色的田野中行走。

行走精灵为 64x64px，操纵杆来自 Sneakyjoystick 类，绿色区域由 5-6 个 32x32 像素组成，使用 Tiled 制作成 tilemap。使用 Tiled，我创建了一个 50 x 50 的平铺地图。

我得到 20-30 FPS，我不知道为什么。我将贴图大小减小到 10x10 贴图，它的速度达到了 50-60 FPS。我不知道该怎么办？

编辑：我为游戏层添加了初始化块。我在模拟器上测试。

```
-(id) init
{
    if( (self=[super init] ))
    {

        self.tileMap = [CCTMXTiledMap tiledMapWithTMXFile:@"TileMap.tmx"];
        self.background = [_tileMap layerNamed:@"Background"];
        self.meta = [_tileMap layerNamed:@"Meta"];
        self.topLayer = [_tileMap layerNamed:@"TopLayer"];

        _topLayer.visible = YES;
        _background.visible = YES;
        _meta.visible = YES;

        [self addChild:_tileMap z:-1];

        [[CCSpriteFrameCache sharedSpriteFrameCache]addSpriteFramesWithFile:@"male_walkcycle.plist"];

        sceneSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"male_walkcycle.png"];
        [self addChild:sceneSpriteBatchNode z:0]; 

        CCTMXObjectGroup *objects = [_tileMap objectGroupNamed:@"Objects"];
        NSAssert(objects != nil, @"'Objects' object group not found");

        NSMutableDictionary *spawnPoint = [objects objectNamed:@"SpawnPoint"];
        NSAssert(spawnPoint != nil, @"SpawnPoint object not found");

        int x = [[spawnPoint valueForKey:@"x"] intValue];
        int y = [[spawnPoint valueForKey:@"y"] intValue];

        Caster *casterPlayer = [[[Caster alloc] init] initWithSpriteFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"male_walkcycle_19.png"]];
        casterPlayer.position = ccp(x, y);
        casterPlayer.joystick = nil;
        [sceneSpriteBatchNode addChild:casterPlayer z:1000 tag:kCasterTagValue];
        [casterPlayer release];

        CCSprite *sprite = [CCSprite node];
        CGSize size = CGSizeMake(50,50);
        GLubyte *buffer = malloc(sizeof(GLubyte)*4);
        for (int i=0;i<4;i++) {buffer[i]=255;}
        CCTexture2D *tex = [[CCTexture2D alloc] initWithData:buffer pixelFormat:kCCTexture2DPixelFormat_RGB5A1 pixelsWide:1 pixelsHigh:1 contentSize:size];
        [sprite setTexture:tex];
        [sprite setTextureRect:CGRectMake(0, 0, size.width, size.height)];
        free(buffer);
        sprite.position = ccp(x, y);
        sprite.visible = NO;
        [self addChild:sprite z:5 tag:debugBoxTagValue];

        [self setViewpointCenter:casterPlayer.position];
        [self scheduleUpdate];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T23:33:10.080

> 我在模拟器上测试。

我不敢相信我需要多久重复一次：

**忽略模拟器！**

模拟器不是真正的 iOS 设备。它在您的 Mac 上运行。它有更多可用的内存和 CPU 能力。同时它的渲染性能受到严重限制，因为它不是硬件加速渲染，而是软件渲染器。

即使是最快的 2012 iMac 也无法在 iPad 或 iPhone Retina Simulator 上以 60 fps 运行场景。在 iPad Retina Simulator 上，你会很幸运地获得 20 fps。

此外，开发人员是唯一在模拟器上运行他们的应用程序的人。您的用户，甚至不是您的测试人员，都将使用模拟器来运行您的应用程序。他们将使用实际设备。

任何花在模拟器上优化性能的时间都是浪费时间。这通常适用于仅在模拟器上发生的任何问题。

**在设备上测试！仅在 iOS 模拟器上观察到的每个问题都是没有实际意义的、无效的、无效的，并且完全不相关，尤其是性能。**

# excel - Excel 2010：如何在不断开切片器的情况下更改数据透视表源数据？

> ID：15315146
> 
> 赞同：1
> 
> 时间：2013-03-09T19:48:39.003
> 
> 标签：excel, vba, pivot-table

我对此进行了疯狂的研究，我担心没有答案。但也许这个网站上真正聪明的人可以提供帮助。

我有两个可以一起工作的工作簿 - Charts.xlsm 和 Data.xlsm。它们总是一起保存在同一个文件夹中。Charts.xlsm 显然包含我所有的图表，但它们都链接到 Data.xlsm 中的表作为其来源。我的 Charts.xlsm 中还有很多切片器连接到图表，当它们连接到具有相同数据源的图表时，它们共享缓存。这两个工作簿始终同时打开，因此数据源引用如下所示：'Data.xlsm'!Table1

这一切都很好，直到我将这些工作簿放在另一台计算机上（这就是我这样做的原因，所以我需要找出如何解决这个问题）。

关闭工作簿后，源数据引用将更改为我硬盘上的特定位置：'C:\Folder\Data.xlsm'!Table1

如果我想手动将其更改回本地引用，我必须首先检查并断开每个切片器，刷新表，然后重新连接每个切片器。对我的客户来说不是一个可行的解决方案。

每次打开 Charts.xlsm 时，我都会使用 VBA 更改引用，但是当我尝试它时，会发生以下两种情况之一：工作簿产生的错误会阻止保存，或者 Excel 会完全崩溃。

这是非常适合断开切片器的代码，但会产生“保存”错误：

```
Sub Disconnect_Slicers()

Dim oSliceCache As SlicerCache
Dim PT As PivotTable
Dim i As Long

For Each oSliceCache In ThisWorkbook.SlicerCaches
    With ActiveWorkbook.SlicerCaches(oSliceCache.Name).PivotTables
        For i = .Count To 1 Step -1
            .RemovePivotTable (.Item(i))
        Next i
    End With
Next oSliceCache

End Sub 
```

所以......我问那里的 Excel/VBA 天才，当他们寻找 Data.xlsm 时，是否有任何方法可以保持我的图表的相对位置，这样无论我在哪台计算机上打开这些工作簿，他们都会始终保持积极联系。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:34:00.680

如果两个文件总是在同一个文件夹中，你可能会这样。

A. 关闭 Chart.xlsm 文件的自动“UpdateLinks”。您可以手动执行一次，或者出于安全原因，始终在`BeforeClose`事件触发时执行此操作以避免一些可能的问题：

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    ThisWorkbook.UpdateLinks = xlUpdateLinksNever
End Sub 
```

B. 当您打开 Chart.xlsm 时，使用 Workbook Open 事件 + 额外刷新链接将链接更改为 Data.Xlsm。在这种情况下，我们检查 Chart.Xlsm 文件的路径并在同一文件夹中搜索 Data.Xlsm。我假设只有一个链接到任何其他文件，否则可能需要进行一些更改：

```
Private Sub Workbook_Open()
'changing first and only one link to new one
Dim a
a = ActiveWorkbook.LinkSources
    ThisWorkbook.ChangeLink Name:=a(1), _
        NewName:=ThisWorkbook.Path & "\Data.xlsm", Type:=xlExcelLinks    
'update the link
ThisWorkbook.UpdateLink Name:=a(1), Type:=xlExcelLinks
End Sub 
```

我承认我没有考虑所有风险，因此需要进行一些测试。

# regex - Vim 匹配除字符串开头以外的所有字符

> ID：15315153
> 
> 赞同：1
> 
> 时间：2013-03-09T19:49:29.693
> 
> 标签：regex, vim

我`substitute`在 vim 脚本中使用 vim 函数，我想替换第一个初始括号*之后的所有字符。*例如，假设我有一个如下所示的字符串：

```
]]]] foo ] bar ] baz 
```

我想删除右括号后的所有内容。我怎么能匹配这个？请注意，我想删除初始括号*之后*的右括号，而不是字符串开头的括号。执行后，该行应该只有四个括号：

```
]]]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:02:31.217

尝试这个：

```
:echo substitute("]]]] foo ] bar ] baz",'\(^]\+\).*','\1','g') 
```

在这里，它回响`]]]]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:53:25.380

这个`ex`表达式应该有效：

~~:%s/^]+\s*//~~

```
:%s/\(^\]*\).*/\1/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:55:28.460

您可以匹配字符串开头的所有右括号，直到使用空格

```
(^[]]*\s).+$ 
```

替换为`$1`（可能在 vim 中`\1`）

# excel - 运行excel工作簿时“值不在预期范围内”

> ID：15315156
> 
> 赞同：1
> 
> 时间：2013-03-09T19:49:51.860
> 
> 标签：excel, visual-studio, vsto, ms-office

我正在运行一个利用 VSTO 文件的 excel 工作簿，但是在打开工作簿时出现以下错误

```
Name: 
From: file:///C:/Users/Daniel/Documents/Twitter Analytics/TwitterAnalytics.vsto

************** Exception Text **************
System.ArgumentException: Value does not fall within the expected range.
   at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)
   at Microsoft.VisualStudio.Tools.Office.Runtime.Interop.VSTOEENativeMethods.GetValidCompatibleFramework(String compatibleFrameworkXml)
   at Microsoft.VisualStudio.Tools.Office.Runtime.CompatibleFrameworksValidation.ParseFirstValidFramework(String compatibleFrameworksXml)
   at Microsoft.VisualStudio.Tools.Office.Runtime.OfficeAddInDeploymentManager.OnAddInManifestsDownloaded(AddInManifestsDownloadedArgs args)
   at Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.RaiseOnAddInManifestsDownloadedEvent(IClickOnceAddInInstaller addInInstaller, Uri deploymentManifestUri, AddInInstallationStatus addinSolutionState, String productName, String deploymentManifestXml, String applicationManifestXml, String hostManifestXml, String logFilePath, String version, Uri supportUri)
   at Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.InstallAddIn() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:26:01.767

您可能可以尝试清除缓存

`rundll32 %windir%\system32\dfshim.dll CleanOnlineAppCache`

# c# - 访问 db static = 不好？

> ID：15315157
> 
> 赞同：2
> 
> 时间：2013-03-09T19:49:54.710
> 
> 标签：c#, asp.net, .net, static

在我完成的几个 .NET C# webservice 项目中，我在单例模式的帮助下访问了静态数据库。然后前几天我的朋友告诉我这是一件坏事，因为如果对同一个数据库实体发出大量请求，那么数据库将因为静态实例而被锁定。我朋友的假设是对的吗？我认为每个新请求都会创建一个新的类实例？

单例类的实现如下所示：

```
public class WebService
{
    private readonly IFactory _factory;

    public WebService(IFactory factory)
    {
        _factory = factory;
    }

    public IDataRepository Data
    {
        get
        {
            return _factory.GetDatabase();    
        }            
    }
}

public static class WebServiceImpl
{
    private static readonly WebService _webService = new WebShop(new WebserviceFactoryImpl());

    public static WebService webService { get { return _webService; } }

} 
```

_factory.GetDatabase() 返回 Database 类的新实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:55:30.630

查看`WebServiceImpl`，所有调用都将共享一个`WebService`实例。现在，这*不一定*是问题，具体取决于实现方式；例如，如果`_factory.GetDatabase();`最终被每个请求调用，那么可能是你侥幸逃脱了。进一步取决于什么`GetDatabase()`- 即每次调用都会获得一个新实例吗？还是每次都给您相同的实例？简单地说：我们那里没有足够的信息来完全回答。但：

*   在请求之间共享单个数据库连接是危险的；要么你需要锁定/同步，要么你冒着很多错误的风险（数据库连接通常不会写成线程安全的）
*   在请求之间共享 ORM 更糟糕：除了上述所有内容之外，您还会遇到数据在身份/对象缓存中累积的问题；ORM 实例（数据上下文等）旨在短暂存在，然后丢弃（有时：丢弃）

对数据库进行静态*访问*不一定是问题；这一切都取决于它是如何实现的——例如，基于静态的 API 仍然可以在每次调用时创建（和处理）一个连接。

# css - CSS：复选框样式 - 选中时用颜色填充复选框

> ID：15315165
> 
> 赞同：0
> 
> 时间：2013-03-09T19:50:49.373
> 
> 标签：css, checkbox

我需要更改复选框的样式。我已经阅读了很多关于此的文章，但我期待的是：http: [//i.imgur.com/q2HdOJO.png](http://i.imgur.com/q2HdOJO.png)
选中时，复选框将填充（在这种情况下）蓝色，而不是“选中” .

我不确定这是否是 Mac 中的“中间”状态，因此在我的 Ubuntu 机器中看起来不同，但我如何用颜色填充复选框？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-09T19:53:24.323

使用图像并使用 Javascript 绑定点击事件。这将比尝试使用 CSS 容易得多。在某些不支持希望实现的样式的浏览器中，CSS 将是不可能的。

这是一篇相关文章：[如何使用 CSS 或可能是 Javascript 将图像用于复选框？](https://stackoverflow.com/questions/9496581/how-to-use-images-for-check-boxes-using-css-or-may-be-javascript)

# c++ - 匈牙利算法：我无法为工人分配尽可能多的工作

> ID：15315168
> 
> 赞同：8
> 
> 时间：2013-03-09T19:50:53.143
> 
> 标签：c++, c, optimization, hungarian-algorithm

我在 C++ 中创建了匈牙利算法的实现。*这种实现在许多*情况下都非常有效。但是，在某些情况下，我的算法根本不起作用，因为我相信（这是真的）我对算法的一个步骤的实现是错误的。

我的实现将 array 作为输入`X`，运行算法的步骤并产生最终分配。

该算法的步骤可以在维基上找到：[*匈牙利算法*](http://en.wikipedia.org/wiki/Hungarian_algorithm#Matrix_interpretation)

在第 3 步中，它具有以下成本数组（工人由行表示，工作由列表示）

![在此处输入图像描述](../Images/67aff8bc31d481078b8afab961783e37.png)

然后它说

```
Initially assign as many tasks as possible then do the following 
```

但是我不明白这将是什么*正确*的实现。如何分配尽可能多的任务？选择会是随机的吗？然后如果选择是随机的，我可以选择第一个工人做第一份工作，第二个工人做第四份工作，第四个工人做第二份工作。所以第二个工人被排除在外。然而，在维基百科中，作者采取了不同的方法。第三个工人必须做第一份工作，第二个工人必须做第二份工作，第四个工人必须做第二份工作。所以第一个工人被排除在外。

执行此类随机操作的问题是以下情况：

假设当我们运行算法并对输入进行算术运算时，在将尽可能多的任务分配给工作人员之前，我们有以下成本矩阵：

```
2 2 0 3
6 1 6 0
0 0 6 1
0 3 5 3 
```

如果我随机选择将第三个工作分配给第一个工人，第四个工作分配给第二个工人，然后将第一个工作分配给第三个工人，那么我将遗漏第四个工人。但是为了让算法正常工作，我们需要分配`as many jobs to workers as possible`. 这是这里的情况吗？不，因为如果不是将第一份工作分配给第三名工人，而是将第一份工作分配给第四名工人，那么我可以将第二份工作分配给第三名工人，因此该算法不仅会为工人分配尽可能多的工作但它会找到最佳结果。

**结论**：做随机分配不是一个好方法。

我对此进行了一些搜索，发现了以下讲座：

[http://www.youtube.com/watch?v=BUGIhEecipE](http://www.youtube.com/watch?v=BUGIhEecipE)

在本次讲座中，教授提出了一种不同的方法来解决分配尽可能多的任务的问题。根据他的说法，如果任何行或列恰好有一个零，我们将进行分配。因此，从第一行开始，您检查第一行是否只有一个零，如果是这种情况，请进行分配。否则忽略该行并转到第二行，通过重新扫描表重复执行相同的操作，直到由于分配而覆盖所有零。

通过遵循这种方法，可以看到前面的情况得到了解决。我们所做的是，我们将第三个工作分配给第一个工人，第四个工作分配给第二个工人，然后我们看到第三个工人可以做两个工作所以我们暂时忽略他，我们将第一个工作分配给第四个工人然后返回以便将第二份工作分配给第三名工人。

我的实现遵循这个逻辑，但是同样，它并没有解决所有的情况。

让我们以下面的案例为例：

```
0 0 0 0
0 0 0 0
0 0 4 9
0 0 2 3 
```

第一个工人可以做 4 个工作，第二个 4，第三个 2 和第四个 2。所以我的实现没有分配，因为我需要至少一个只能做一个工作的工人才能完成任务然后继续通过重新扫描表格。那么在这种情况下我该怎么办？随意分配是一件坏事，不幸的是，在那场讲座中没有提出任何建议。我只能想到以下几点：

对于每个工人都有一个计数器，其值表示可以分配给他的任务数量，那么该行中有多少个零？这就是计数器的值。然后开始将任意任务分配给计数器最小的工人。所以在这种情况下，每个工人的计数器数组将包括以下值：

```
4
4
2
2 
```

例如，我会选择第三名工人并任意分配给他第一份工作。新的计数器将是：

```
3
3
0
1 
```

然后我会选择第四名工人并为他做唯一的任务（这是第二份工作）。新的计数器将是：

```
2
2
0
0 
```

然后我可以选择第一个工人或第二个工人。我会为第一个工人做一个任意的任务，然后给他第三个工作。计数器将是

```
1
0
0
0 
```

最后，我会将第四个任务分配给第一份工作。

所以最后的任务：

```
0 0 0 *
0 0 * 0
* 0 4 9
0 * 2 3 
```

这似乎是一个很好的方法，但是我担心这种方法可能不起作用的特殊情况。我如何验证这种方法是否适用于所有情况，如果不行，什么方法可以完全解决我的问题？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:20:02.067

您当前的方法*不起作用*。

```
0 2 0
3 0 0
4 0 0 
```

你的方法：“然后开始将任意任务分配给计数器最小的工人。”所有工人都有相同的计数器，所以假设你选择工人 1 并将他分配给任务 3，你只能匹配剩余的工人之一，而与这个矩阵你显然可以匹配所有三个。

您需要的是这些工人和任务之间的*最大二分匹配*，如果相关位置有 0，则一对是可匹配的。可以通过手动通过增广路径或使用 Hopcroft-Karp 算法更快地找到这种匹配。

# jquery - jQuery Navigation Active 类在页面重新加载时恢复

> ID：15315170
> 
> 赞同：0
> 
> 时间：2013-03-09T19:51:02.513
> 
> 标签：jquery

我的应用程序的每个页面上都加载了以下脚本：

```
 $(document).ready(function() { 
          $('ul li').click(function(){
            $("li").removeClass("current_page_item");
            $(this).addClass("current_page_item");
          });
        }); 
```

我的导航 html 看起来像：

```
 <ul id="dropmenu">
                    <li class="active">
                        <%=  link_to 'Home Page',  welcome_index_path %>                    
                    </li>
                    <li>
                        <%=  link_to 'Business Owners',  business_owners_path %>

                    </li>
                </ul> 
```

每次我单击“企业主”链接时，识别活动页面的图像首先从主页链接移动到企业主链接，然后在页面重新加载时再次快速恢复到主页链接。jQuery中有没有办法在页面加载后保持“活动”链接的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:54:04.707

如果没有更多信息，我相信您可能会以错误的方式解决这个问题。您是否尝试使用深度链接来显示/加载额外内容？如果是这样，您的页面不应该重新加载。您可以使用 jquery 地址来完成此操作。[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

如果您的页面实际上链接到一个单独的页面，那么这可以通过 CSS 来完成。一种解决方案是为 body 设置一个类，以正确设置活动导航的样式。

**HTML**

```
<body class="business">

    <ul id="dropmenu">
        <li class="nav-home"><a href="#">Home</a></li>
        <li class="nav-business"><a href="#">Business</a></li>
    </ul>

</body> 
```

**CSS**

```
#dropmenu a {
    display:block;
}
#dropmenu a:hover {
    border:1px solid #ccc;
}

* active */
.business .nav-business {
    border:1px solid #000;
} 
```

相关小提琴：http: [//jsfiddle.net/tNpVr/](http://jsfiddle.net/tNpVr/)

# javascript - 当它们都使用相同的类时，Jquery如何显示/隐藏一系列div

> ID：15315172
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:51:09.270
> 
> 标签：javascript, jquery, html

我正在动态标记一系列使用相同类的 div。它们都带有显示/隐藏链接，但没有任何功能。

我需要为每个 div 添加显示/隐藏功能。当要隐藏的元素具有所有相同的类时，从同一个社区阅读答案我找不到这样做的方法。

我所有的方法都一次显示或隐藏 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:03:10.410

当您单击 div 时，这将显示或隐藏同一类的 div。

```
$(this).click(function(){
 var div1Class = $(this).attr('class');
 $(div1Class).toggle(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:58:11.233

这取决于实际的标记，但这可能有效：

```
$(this).closest(".myClass").hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:27:24.140

我有一系列 div，我想在鼠标悬停时隐藏并在鼠标悬停时显示。所以我把它们放在一个名为 container 的 div 中，并使用以下内容来实现它。希望它可以帮助你。

```
function showHide(div){
    div.onmouseover = function(){
        div.style.display = "none";
    };
    div.onmouseout = function(){
        div.style.display = "";
    };
}

var divList = document.getElementById('container').children;
for(var i = 0 ; i < divList.length; i++){
    var div = divList[i];
    showHide(div);
} 
```

# php - 在javascript中调用php函数

> ID：15315175
> 
> 赞同：-3
> 
> 时间：2013-03-09T19:51:26.617
> 
> 标签：php, javascript, ajax, function

有时我们需要在 javascript 中使用一些 php 函数，对吗？

您对此 ajax 解决方案的看法：

在js代码中，我们写函数`php_function(func_name, arguments)`

参数`func_name`是php函数名

参数`arguments`是php函数参数

例如我们需要`base64_encode()`在 javascript 中使用 php 的函数。

这是js代码：

```
$(document).ready( function () {

    function php_function(func_name, arguments) {

        var result;
        $.ajax({

            url: //url to php file,
            type: "POST",
            async: false, 
            data: {f_name: func_name, args: arguments},
            success: function ( htm ) {

                result = JSON.parse(htm)

            }

        });

        return result;

    }

    var arguments = ["OTO"];

    alert( php_function("base64_encode", arguments) ); // T1RP

}); 
```

这是php：

```
echo json_encode( call_user_func_array( $_POST['f_name'], $_POST['args'] ) ); 
```

可能这种方法会有用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:09:00.180

问题陈述有点糟糕，最好问一下：这种方法有什么问题吗？

答案是：是的，这太可怕了。您刚刚在系统中戳了一个巨大的安全漏洞。

# ms-office - 如何使用 Inno Setup 以编程方式确定 Office 版本？

> ID：15315178
> 
> 赞同：2
> 
> 时间：2013-03-09T19:51:39.577
> 
> 标签：ms-office, inno-setup

我有两种类型的 Office 加载项——一种用于 Office 2013，另一种用于其他版本 (2003-2010)。
我使用 Inno Setup 进行分发包。
是否可以确定目标计算机上安装的 Office 版本，而不是运行正确的安装文件？

我试图编写检测 Word 版本并安装适当文件的代码，但我未能编译它。由于这是我第一次编写这样的代码，所以我想请你看看我的代码。

```
[Files]
Source: "C:\Program Files\Inno Setup 5\Examples\MyProg2013.exe"; DestDir: "{app}"; Check: "Install2013"; MinVersion: 0.0,5.0;
Source: "C:\Program Files\Inno Setup 5\Examples\MyProg2010.exe"; DestDir: "{app}"; Check: "Install2010"; MinVersion: 0.0,5.0; 
Source: "C:\Program Files\Inno Setup 5\Examples\MyProg2013x86.dll"; DestDir: "{app}"; Check: "Install2013"; MinVersion: 0.0,5.0; Flags: regserver noregerror ignoreversion 32bit 
Source: "C:\Program Files\Inno Setup 5\Examples\MyProg2013x64.dll"; DestDir: "{app}"; Check: "Install2013 and Is64BitInstallMode"; MinVersion: 0.0,5.0; Flags: regserver noregerror ignoreversion 64bit 
Source: "C:\Program Files\Inno Setup 5\Examples\MyProg2010x84.dll"; DestDir: "{app}"; Check: "Install2010"; MinVersion: 0.0,5.0; Flags: regserver noregerror ignoreversion 32bit
Source: "C:\Program Files\Inno Setup 5\Examples\MyProg2010x64.dll"; DestDir: "{app}"; Check: "Install2010 and Is64BitInstallMode"; MinVersion: 0.0,5.0; Flags: regserver noregerror ignoreversion 64bit 

Root: HKCU; Subkey: "Software\My Program\AppforWord"; ValueName: "AppBarStyle"; ValueType: String; ValueData: "1"; Components: "AppforWord"; Check: "Install2010"; MinVersion: 0.0,5.0; Flags: uninsdeletevalue 
Root: HKCU; Subkey: "Software\My Program\AppforExcel"; ValueName: "Enable"; ValueType: String; ValueData: "2"; Components: "AppforWord"; Check: "Install2010"; MinVersion: 0.0,5.0; Flags: uninsdeletevalue
Root: HKCU; Subkey: "Software\My Program\AppforWord"; ValueName: "AppBarStyle"; ValueType: String; ValueData: "1"; Components: "AppforWord"; Check: "Install2013"; MinVersion: 0.0,5.0; Flags: uninsdeletevalue 
Root: HKCU; Subkey: "Software\My Program\AppforExcel"; ValueName: "Enable"; ValueType: String; ValueData: "2"; Components: "AppforWord"; Check: "Install2013"; MinVersion: 0.0,5.0; Flags: uninsdeletevalue

[Icons]
Name: "{commondesktop}\MyProg 2013"; Filename: "{app}\MyProg2013.exe"; Comment: "The settings for My Program 2013"; Check: "Install2013"; MinVersion: 0.0,5.0;
Name: "{commondesktop}\MyProg 2010"; Filename: "{app}\MyProg2010.exe"; Comment: "The settings of My Program"; Check: "Install2010"; MinVersion: 0.0,5.0; 
```

```
[Code]
{ Get office version }
function IsInstall2013(): boolean;
var
    success: boolean;
    OfficeVer: cardinal;
begin
    success :=
        RegQueryDWordValue(
            HKEY_CLASSES_ROOT, 'Word.Application\CurVer', Word.Application.15' );
    Result := success and (OfficeVer = Word.Application.15);
end;

{ RETURNS OPPOSITE OF IsInstall2013 FUNCTION }
function Install2013(): Boolean;
begin
  Result := (IsInstall2013 = false);
end;

{ RETURNS OPPOSITE OF not Office2013 FUNCTION }
function Install2010(): Boolean;
begin
  Result := (IsInstall2010 = true);
end; 
```

因为我还想创建一个 Inno Setup 安装例程来检测某人正在使用的 Office 版本。我已经尝试了上述代码的各种迭代，但似乎无法正常工作。

我的目标很简单...如果有人使用 Office 2010，请安装文件 A、B、C。如果有人使用 Office 2013，请安装文件 D、E、F。

# ruby-on-rails - Trace/BPT 陷阱：5 个来自 ruby / rails / cucumber

> ID：15315179
> 
> 赞同：1
> 
> 时间：2013-03-09T19:51:39.873
> 
> 标签：ruby-on-rails, ruby, rspec, cucumber

我有一个带有 rspec、capybara 和 cucumber 的 rails 3.2.8 应用程序。当我运行我的黄瓜测试时，我现在看到它们启动了，但很快它就开始了：

```
Trace/BPT trap: 5 
```

例如

```
cucumber
Using the default profile...
Rack::File headers parameter replaces cache_control after Rack 1.5.
Feature: User submits a swinfo query
  In order to look up the entries for a given Defect or other item, I
  submit a query in the swinfo form.

  @javascript @webkit
  Scenario: Submit swinfo query for a defect via browser # features/user_swinfo_request.feature:6
Trace/BPT trap: 5 
```

有没有办法至少得到一个堆栈跟踪，这样我就知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:32:26.760

我发现当 ldap 在加载另一个扩展后加载一个 C 扩展时，陷阱就来了。我更改了我的 application.rb 文件以首先加载 ldap 并解决了这个问题。

我从来没有弄清楚如何找回堆栈跟踪。我通过跟踪和错误追踪它。

希望这可以帮助某人

# php - Foreach 循环和双数组

> ID：15315181
> 
> 赞同：0
> 
> 时间：2013-03-09T19:51:48.363
> 
> 标签：php, arrays, loops, foreach

我有我写的这个双数组（包含一些信息的数组中的数组）。正如您将看到的，我在下面使用了 for each 循环来显示每组登录信息。

```
 $servers = array(
 1 => array('server1','username1','password1','port1'),
 2 => array('server2','username2','password1','port2'),
 3 => array('server3','username3','password1','port3')
 );
 foreach ($servers as $count => $servers_array)
  {
   foreach ($servers_array as $num => $value)
  {
   echo $servers_array[0].":".$servers_array[1].":".$servers_array[2].":".$servers_array[3]."\n";
 }
} 
```

上面的输出是

```
server1:username1:password1:port1
server1:username1:password1:port1
server1:username1:password1:port1
server1:username1:password1:port1
server2:username2:password1:port2
server2:username2:password1:port2
server2:username2:password1:port2
server2:username2:password1:port2
server3:username3:password1:port3
server3:username3:password1:port3
server3:username3:password1:port3
server3:username3:password1:port3 
```

正如您在上面看到的，它会回显每组登录 3 次。我需要每组只回显一次。

有人明白吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:53:12.967

只要去掉你的内在`foreach`。

```
<?php

 $servers = array(
 1 => array('server1','username1','password1','port1'),
 2 => array('server2','username2','password1','port2'),
 3 => array('server3','username3','password1','port3')
 );
 foreach ($servers as $count => $servers_array)
 {
     echo $servers_array[0].":".$servers_array[1].":".$servers_array[2].":".$servers_array[3]."\n";
 } 
```

**结果**

```
服务器 1：用户名 1：密码 1：端口 1
服务器2：用户名2：密码1：端口2
服务器 3：用户名 3：密码 1：端口 3
```

[查看演示](http://codepad.org/6RcCAkga)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:54:29.297

只需使用您的第一个 foreach。

```
foreach ($servers as $servers_array) {
    echo $servers_array[0].":".$servers_array[1].":".$servers_array[2].":".$servers_array[3]."\n";
} 
```

实际上，您希望在循环中拥有一组索引，因此您只需要一个 foreach。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:04:18.077

怎么样：

```
<?php
$servers = array(
   1 => array('server1','username1','password1','port1'),
   2 => array('server2','username2','password1','port2'),
   3 => array('server3','username3','password1','port3')
   );

   foreach ($servers as $count => $servers_array)
   {
     echo "<br />";
     foreach ($servers_array as $num => $value)
       {
          echo $value . ":";
       }
    }
 ?> 
```

# mysql - sql查找部分匹配字符串的行

> ID：15315187
> 
> 赞同：0
> 
> 时间：2013-03-09T19:52:15.330
> 
> 标签：mysql, sql

我想在表中找到包含字符串的行

例如，我在名为“testing”的表中的列名“testing”中有行 -

```
test
a
cool
another 
```

现在我想使用 sql 从字符串“这是一个测试”中选择具有单词的行

```
select * from testing where instr(atext, 'this is a test') >0; 
```

但这没有选择任何行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:55:13.270

将参数反转为[`INSTR`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_instr)。

```
WHERE INSTR('this is a test', atext) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:54:45.270

这是一个“颠倒的”，例如：

```
select * from testing where 'this is a test' LIKE CONCAT('%',atext,'%'); 
```

在有很多记录的表上可能会很慢。这将返回行，其中可以在给定字符串中找到 atext 列的值。（例如匹配时 atext = 'is a t' 因为它可以在给定的字符串中找到）

或者你可以写一个正则表达式。

```
select * from testing where atext REGEXP '^(this|is|a|test)$'; 
```

这匹配所有包含指定单词的行。在您的脚本或编程语言中，您只能将空格替换为 | 并将 ^ 添加到字符串的开头，将 $ 添加到字符串的结尾，以及 REGEXP，而不是等式。（“这是一个测试”-> ^this|is|a|test$ ）

如果表中有很多记录，则此查询可能会很慢。因为 sql 引擎在 regexp 查询中不使用索引。

因此，如果您的表上有很多行并且不超过 4 000 000 个单词，我建议您制作一个索引表。例子：

```
originalTable:
tid | atext (text)         
1   | this is        
2   | a word         
3   | a this
4   | this word      
5   | a is
....

indexTable:
wid | word (varchar)
1   | this
2   | is
3   | a
4   | word

switchTable:
tid | wid
1   | 1
1   | 2 
2   | 3
2   | 4
3   | 1
3   | 3
... 
```

您应该设置索引、tid、wid 和 word 字段。

比查询是：

```
SELECT o.*
FROM originalTable as o
JOIN switchTable as s ON o.tid = s.tid
JOIN indexTable as i on i.wid=s.wid
WHERE i.word = 'this' or i.word='is' or i.word='a' or i.word='test' 
```

如果您的 originalTable 有“很多”记录，则此查询可能会更快，因为这里 sql 引擎可以进行索引搜索。但是，在原始表中插入一行时，您必须在其他两个表中进行插入，因此需要做更多的工作。

3 个查询的运行时间之间的结果取决于您的数据库表大小。并且您希望针对插入或选择进行优化。（插入/更新和选择查询之间的速率）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:59:18.557

带全文索引 -

```
select * from anti_spam where match (atext) against ("this is a test" in boolean mode); 
```

# xml - 基于另一个元素值的枚举限制

> ID：15315192
> 
> 赞同：0
> 
> 时间：2013-03-09T19:53:11.563
> 
> 标签：xml, xsd

我是 XML 模式的新手，我正在尝试弄清楚如何根据另一个值设置限制。

例如：

"State" = RI --> 有效值仅适用于该状态的 ABS "State" = NC 或 CT 有效值仅适用于任一状态的 Y

以下 xml 模式允许 ABS 和 Y，无论状态如何：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"> 

  <xs:element name="State"> 
    <xs:simpleType> 
      <xs:restriction base="xs:string"> 
        <xs:enumeration value="RI"/> 
        <xs:enumeration value="CT"/> 
        <xs:enumeration value="NC"/> 
      </xs:restriction> 
    </xs:simpleType> 
  </xs:element> 

  <xs:element name="PersonalInfo"> 
    <xs:complexType> 
      <xs:sequence> 
        <xs:element ref="State"/> 
        <xs:element ref="Car"/> 
      </xs:sequence> 
    </xs:complexType> 
  </xs:element> 

  <xs:element name="Manufacturer"> 
    <xs:simpleType> 
      <xs:restriction base="xs:string"> 
        <xs:enumeration value="MINI"/> 
      </xs:restriction> 
    </xs:simpleType> 
  </xs:element> 

  <xs:element name="Car"> 
    <xs:complexType> 
      <xs:sequence> 
        <xs:element ref="Manufacturer"/> 
        <xs:element ref="AntiLockBrakes"/> 
      </xs:sequence> 
    </xs:complexType> 
  </xs:element> 

  <xs:element name="AntiLockBrakes"> 
     <xs:simpleType> 
       <xs:restriction base="xs:string"> 
         <xs:enumeration value="ABS"/> 
         <xs:enumeration value="Y"/> 
       </xs:restriction> 
     </xs:simpleType> 
   </xs:element> 

 </xs:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:47:57.307

因为这类约束控制的不是单独涉及的单独元素的值，而是特定值的共现，所以它们通常被称为*共现约束*（或更简洁*的共同约束*）。

上下文无关文法（以及为 XML 文档编写上下文无关文法提供专门词汇表的模式语言，如 DTD、Relax NG 和 XSD 内容模型）在一般情况下不能很好地处理共同约束（尽管通常有特殊情况他们可以轻松处理）。

基于谓词的约束语言（如 Schematron 和 XSD 1.1 中的断言）通常能够方便地表达共同约束，因为它们是围绕谓词的概念构建的 - 对文档适用或不适用的东西或元素或属性——通常允许使用布尔运算符组合谓词。

因此，执行您描述的约束的最佳选择是使用 Schematron，或 XSD 1.1 中的断言。在 XSD 1.1 中（与 Schematron 不同），不允许查看断言所附加类型的元素之外的断言，因此您需要将断言放在包含 State 和 AntiLockBrakes 元素的最小元素上；如果我正确读取架构，那将是 PersonalInfo。XSD 1.1 架构可以使用断言来强制您的约束，方法是将 PersonalInfo 的声明更改为如下所示：

```
<xs:element name="PersonalInfo"> 
  <xs:complexType> 
    <xs:sequence> 
      <xs:element ref="State"/> 
      <xs:element ref="Car"/> 
    </xs:sequence> 
    <xs:assert test="
      (State = 'RI' and Car/AntiLockBrakes = 'Y')
      or 
      (State = ('NC', 'CT') and Car/AntiLockBrakes = 'ABS')
      "/>
  </xs:complexType> 
</xs:element> 
```

xs:assert 元素的 'test' 属性中的断言使用 XPath 2.0 表示；如您所料，有多种表达方式。

Schematron 的工作方式类似，但 Schematron 本身并没有指定表达测试的语言；很容易找到支持用 XPath 1.0 编写的断言或接受 XPath 2.0 的 Schematron 实现。

# ios - Objective C OSX - 委托 - 无法识别的选择器发送到实例

> ID：15315194
> 
> 赞同：0
> 
> 时间：2013-03-09T19:53:14.223
> 
> 标签：ios, objective-c

changeView_ShowContact 方法将使视图控制器正常显示。但是当我从另一个类调用 changeView_ShowContact 时，它不会工作。我在日志“发送到实例的无法识别的选择器”中收到错误。

```
@protocol callingActions_fromMainNavigation <NSObject>
    - (IBAction)changeView_ShowContact:(id)sender;
@end

**@interface Navigation_Main : NSViewController**
@property (nonatomic, strong) id <callingActions_fromMainNavigation> delegate;

**@implementation Navigation_Main** 
@synthesize delegate;

- (IBAction)changeView_ShowContact:(id)sender;
{
    NSLog(@"********************ShowContact");
    AddStuffViewController = [[pageContact alloc] initWithNibName:@"pageContact" bundle:nil];
    [AddStuffView addSubview:[AddStuffViewController view]]; //<This call here works ok.
} 
```

.

```
@interface contacts : NSObject <callingActions_fromMainNavigation>

**@implementation contacts**
-(void)myMethodCall:(id)sender;
{
    Navigation_Main *NavMain = [[Navigation_Main alloc] initWithNibName:@"Navigation_Main.h" bundle:nil];
    [NavMain setDelegate:self];
    [self changeView_ShowContact:nil];
    //I need to call the (IBAction)changeView_ShowContact in the Main Navigation. This 
    //code is not working.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:57:17.150

看起来您正在`contacts`采用`callingActions_fromMainNavigation`协议而没有`changeView_ShowContact:`在`contacts`课堂上实施。

# python - 为子进程 stdin、stdout、stderr 使用 unix 套接字

> ID：15315197
> 
> 赞同：1
> 
> 时间：2013-03-09T19:53:22.573
> 
> 标签：python, sockets, stdout, stdin, stderr

我想用 Python 包装一个游戏服务器进程，这样我就可以使用套接字从其他程序访问控制台。我希望能够读取标准输出、标准错误并能够将数据发送到标准输入以通过套接字与服务器通信。

到目前为止，我已经尝试过这样的事情：

```
sock = socket.socket(socket.AF_UNIX)
sock.setblocking(0)
sock.bind('server.sock')
sock.listen(5)
sock.accept()
fd = sock.makefile()

proc = subprocess.Popen(args, stdin=fd, stdout=fd, stderr=fd) 
```

我可以连接到`server.sock`unix 套接字，但是当我期望服务器有输出时，没有读取任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:17:49.477

不能忽略 的返回值`sock.accept()`：它返回一个元组，其中的第一项是*连接*的套接字对象。它与 不同`sock`，后者的唯一目的是接受（可能是多个）连接。您需要调用`makefile()`此连接的套接字对象而不是原始的`sock`.

# python - 布尔循环键字符串比较器

> ID：15315201
> 
> 赞同：0
> 
> 时间：2013-03-09T19:53:29.230
> 
> 标签：python, string, loops, frequency

我正在做一个 python 项目，我想将一个字符串与一个键和值列表进行比较 - 如果所有键都与一个单词字符串匹配一定次数，它应该返回 True 例如 - def`compareTo(word, hand):`

```
 kal = False 
   for d in wordlists: 
       if d in word: 
          kal = True 
   return kal 
```

它总是返回假我怎样才能让它返回真？！？请帮忙！！！

因此，如果

```
word = "hammer" 
```

和

```
hand =  {'a': 1, 'h': 1, 'r': 1, 'm': 2, 'e': 1} 
```

如果我插入为真的参数，值表示每个字母的频率，我怎样才能让它返回真而不是假...

```
comapreTo("hammer",{'a': 1, 'h': 1, 'r': 1, 'm': 2, 'e': 1}) 
```

应该返回真而不是假，`comapreTo("hammers",{'a': 1, 'h': 1, 'r': 1, 'd': 2, 'e': 1})`应该返回假而不是真！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:03:37.050

您可以简单地使用`Counter`来计算字母频率：

```
from collections import Counter

def compareTo(word, hand):
    return Counter(word) == hand 
```

例如，`Counter("hammer")`是`Counter({'m': 2, 'a': 1, 'h': 1, 'r': 1, 'e': 1})`；因为`Counter`类似于字典，这将比较等于`{'a': 1, 'h': 1, 'r': 1, 'm': 2, 'e': 1}`.

`Counter`内置于 Python 2.7 和 Python 3.x。如果你需要在 Python 2.6 或更早版本中使用它，你可以从这里获得它： http: [//code.activestate.com/recipes/576611/](http://code.activestate.com/recipes/576611/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:01:28.133

这应该有效：

```
def compareTo(word, hand):
    d = hand.copy()
    for c in word:
        d[c] = d.get(c, 0) - 1
        if d[c] < 0:
            return False
    return True

word = "hammer"
hand =  {'a': 1, 'h': 1, 'r': 1, 'm': 2, 'e': 1}

print compareTo(word, hand)  # => True    
print compareTo("hammers", hand)  # => False
print compareTo("plum", {'f': 1, 'h': 1, 'k': 1, 'm': 1, 'l': 1, 'p': 1, 'u': 1, 'y': 1})  # => True 
```

# css - Box-shadow 不适用于我网站中的任何 div。有没有人对为什么有丝毫的倾向？它们都在一个容器中

> ID：15315205
> 
> 赞同：1
> 
> 时间：2013-03-09T19:54:09.627
> 
> 标签：css

Box-shadow 不适用于我网站中的任何 div。有没有人对为什么有丝毫的倾向？插图也不起作用。我不知道是怎么回事 ：（。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:08:07.547

首先摆脱空`box-shadow:;`声明..从您的评论中，您的语法的其余部分看起来是正确的。

如果您使用的是旧浏览器，则包括供应商前缀版本：

```
-webkit-box-shadow: 10px 10px 25px #000; /* Safari & Chrome */
-moz-box-shadow: 10px 10px 25px #000; /* Firefox */
-o-box-shadow: 10px 10px 25px #000; /* Opera */
 box-shadow: 10px 10px 25px #000; 
```

这应该够了吧

# java - 为什么我的 Android 应用程序中不断出现 java.net.ConnectException？

> ID：15315213
> 
> 赞同：2
> 
> 时间：2013-03-09T19:54:57.613
> 
> 标签：java, android, http, networking

我最近在我的 android 应用程序中重构了一些网络代码，以使用 Google 推荐的[HTTPUrlConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)。以前，我使用的是 Apache 的 HTTPClient。我不确定这些事情是否相关。

我最近对我的网络代码所做的另一件事是使用 AsyncTask 进行调用。以前我只是在主线程上工作（显然很糟糕），所以我的应用程序在获取数据时似乎会挂起。问题是，自从切换到 AsyncTask 后，我经常遇到超时错误。

**为什么我会收到此超时错误？**

```
 java.net.ConnectException: failed to connect to <url> (port 80): connect failed: ETIMEDOUT (connection timed out) 
```

这是我的 AsyncTask 进行网络调用。

```
private class PostToPHP extends AsyncTask<PostToPHP, Void, String>
{
    private String functionName;
    private ArrayList<NameValuePair> postKeyValuePairs;

    public PostToPHP(String function, ArrayList<NameValuePair> keyValuePairs)
    {
        functionName= function;
        postKeyValuePairs = keyValuePairs;
    }

    @Override
    protected void onPreExecute()
    {
        progressDialog = ProgressDialog.show(BaseActivity.getInstance(), "Loading", "Please wait...", true, false);
    }

    @Override
    protected String doInBackground(PostToPHP... params)
    {
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair(FUNCTION_NAME, functionName));
        for (int i = 0; i < postKeyValuePairs.size(); i++) {
            nameValuePairs.add(postKeyValuePairs.get(i));
        }

        try {
            URL url = new URL("www.myurl");
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setDoOutput(true);
            urlConnection.setRequestProperty("Accept-Charset", iso-8859-1);
            OutputStream os = urlConnection.getOutputStream();
            BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(os, iso-8859-1));
            writer.write(getEncodedPostParameters(nameValuePairs, iso-8859-1));
            writer.close();
            os.close();

            InputStream is = urlConnection.getInputStream();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, iso-8859-1));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            urlConnection.disconnect();

            return sb.toString();
        }
        catch (UnknownHostException e) {
            // handle it

            return null;
        }
        catch (Exception e) {
            // this is where I'm always getting a timeout exception
            return null;
        }
    }

    @Override
    protected void onPostExecute(String result)
    {
        progressDialog.dismiss();
    }
} 
```

**编辑：**我认为这只发生在一个特定的网络通话中，但我现在已经在不同的地方经历过。

**编辑2：**再看一遍我发现[了这个](https://stackoverflow.com/questions/9729733/is-android-async-task-slow)，我认为这更多是我的问题。在我为网络调用实现 Android AsyncTask 之前，这并不存在。我认为 AsyncTask 在某种程度上搞砸了线程并导致超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:53:56.717

您可以显式设置 HTTPUrlConnection 的超时时间：
`urlConnection.setConnectionTimeout(aLongerTimeout)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:55:01.900

我对这个答案不是很满意，但它似乎奏效了。我认为我的代码一定有问题，或者 HTTPUrlConnection 中存在某种错误。我知道谷歌说它在 Froyo 和更低版本中存在错误，但我看到我正在测试的 2.3.4 和 4.2 中有一些奇怪的地方。本质上，我用 Apache 的代码替换了上面的代码，但我没有看到超时。

```
private static String post(ArrayList<NameValuePair> params){        
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httpreq = new HttpPost("www.url.com");
    httpreq.setEntity(new UrlEncodedFormEntity(params));
    HttpResponse response = httpclient.execute(httpreq);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();

    BufferedReader reader = new BufferedReader(new InputStreamReader(is, NetworkConstants.HTTP_ACCEPTED_CHARSET), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();          

    return sb.toString();
} 
```

# dojo - dojo需要不同的js文件

> ID：15315227
> 
> 赞同：0
> 
> 时间：2013-03-09T19:55:59.177
> 
> 标签：dojo, undefined, return-value, require

最近我有一个关于使用 dojo 包含其他 js 文件的问题。例如：在我的 1.js 文件中，我写道：

```
require(["dijit/form/Button"], function(Button){
addButton(someWidget);}); 
```

在我的 1a.js 文件中，我编写了函数 addButton：

```
function addButton(target){
    var b1=new Button({
        style: "border: 1px solid green",
        label: "xxxxx"
    });
    target.addChild(b1);
    return b1;
} 
```

对于1a.js，肯定有错误，因为我没有那个模块，但是我添加了require，最大的问题是返回值，我无法获取返回值，因为嵌套函数。

我怎么能写一个 js 文件，我写了我所有的函数，而在另一个 js 文件中，我只是用`dojo require("xxxx", function(x){})`

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:22:51.900

`dojo.require`是工具包的旧版 (<=1.6) 加载器。在一个文件中使用`dojo.require`，使代码可用于所有文件。

Dojo 已转向使用 AMD API 来加载模块。在 1a.js 中，您还需要添加`require`语句。

我对以下问题的回答将有助于更好地理解 AMD API 和`require`声明：

*   [dojo 中 require() 和 define() 函数的主要区别是什么？我们什么时候使用它们？](https://stackoverflow.com/questions/11559270/what-is-the-main-difference-between-require-and-define-function-in-dojo-and/11559708#11559708)

*   [道场建造……？现在怎么办？](https://stackoverflow.com/questions/12922618/dojo-builds-what-now/12922801#12922801)

*   [dojo中函数的目的是什么？](https://stackoverflow.com/questions/15130450/what-is-the-purpose-of-function-in-the-dojo-require/15134668#15134668)

# mysql - 如何在 mysql select 中按日期时间范围生成组号？

> ID：15315228
> 
> 赞同：0
> 
> 时间：2013-03-09T19:56:09.853
> 
> 标签：mysql

我有一个包含 DATETIME 字段的记录表。我想根据时间拆分（上午 6:00）选择具有组号的记录。

例如：周一上午 6:00 之前的所有记录的 group_id 为 1。此后到周二上午 6:00 的任何值的 group_id 为 2，周三上午 6:00 之后的 group_id 为3，以此类推。

记录示例：

```
========================================
|ID   |timestamp            |value     |
========================================
|0    |2012-03-00 18:20:00  |John      |
|1    |2012-03-01 02:44:00  |Sally     |
|2    |2012-03-01 03:12:00  |Mike      |
|3    |2012-03-01 08:51:00  |Art       |
|4    |2012-03-02 01:20:00  |Kate      |
|5    |2012-03-03 01:20:00  |Susan     |
|6    |2012-03-05 07:46:00  |Sam       |
======================================== 
```

目标：

```
===================================================
|ID   |timestamp            |value     |group_id  |
===================================================
|0    |2012-03-00 18:20:00  |John      |1         |
|1    |2012-03-01 02:44:00  |Sally     |1         |
|2    |2012-03-01 03:12:00  |Mike      |1         |
|3    |2012-03-01 08:51:00  |Art       |2         |
|4    |2012-03-02 01:20:00  |Kate      |2         |
|5    |2012-03-03 01:20:00  |Susan     |3         |
|6    |2012-03-05 07:46:00  |Sam       |4         |
=================================================== 
```

有任何想法吗？

# java - Play 安全！来自外部应用程序

> ID：15315231
> 
> 赞同：6
> 
> 时间：2013-03-09T19:56:43.173
> 
> 标签：java, security, heroku, playframework

我正在使用 Play 编写私有 REST API！我将通过移动应用程序拨打电话，但我对如何保证它的安全感到困惑。

在处理 Play! 文档中的 Yet Another Blog Engine 示例时，我处理了他们的[身份验证示例](http://www.playframework.com/documentation/1.2.2/guide8)，它处理通过浏览器登录的问题。根据我对 Play! 的 Secure 模块的了解，它有助于浏览器会话。此外，我看到的每个 StackOverflow 问题都与网络上的管理模块有关，而且这些问题也与会话有关。

[玩！框架是否有任何内置机制来防止会话劫持？](https://stackoverflow.com/questions/8731624/does-the-play-framework-have-any-built-in-mechanism-to-prevent-session-hijackin)

[使用 play 框架强制使用 Https 路由进行登录](https://stackoverflow.com/questions/7415030/enforce-https-routing-for-login-with-play-framework)

我目前对安全性应该如何工作的理解：

*   移动应用程序“登录”到网络应用程序并获得某种令牌
*   对于每个后续调用，令牌都会附加到 API 调用的末尾
*   如果移动用户“注销”或令牌过期，Web 应用程序将删除令牌
*   每个 API 调用都使用 HTTPS 以维护安全性

我是否可以从移动应用程序向我使用 Play 创建的 Web 应用程序发出 HTTP 请求！框架同时保持安全？

我是否错误地处理了整个情况？

这是第一次玩！我创建的应用程序，这是我第一次使用 Heroku。我并不太远，如果它更容易/更有效/更适合解决这个问题，我会反对切换到其他东西。

**编辑：**另外，在 Play! 的 YABE 教程中，他们似乎以纯文本形式检查密码。只是从一般的角度来看，这不是一个安全问题吗？

**编辑 2：**我查看了 OAuth 提供者信息，它似乎解决了这个问题。我唯一担心的是 v2.0 存在已知的安全漏洞，而 v1.0 似乎很难实现，因为我只需要移动应用程序和 Web 应用程序之间的安全连接。如果我让每个调用都需要 SSL，我是否可以让每个 Play 方法只将用户名和密码作为参数并完全忽略 OAuth？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:05:49.537

您使用 Web 应用程序对自己进行授权的移动应用程序示例是通过[OAuth](http://oauth.net/)之类的授权框架实现的。这允许 Web 应用程序让用户登录，然后向移动应用程序发出访问令牌以作为该用户发出请求，而移动应用程序不必处理用户的密码。

查看 Play 的 OAuth*提供程序*模块。如果您使用 Google 搜索，您可能会找到一个用于 Play 的 OAuth*客户端*模块，但这是针对 OAuth 的另一端的，它允许您的 Web 应用程序针对 3rd 方提供商进行授权。然后，您将在移动应用程序中使用 OAuth 客户端库来处理获取访问令牌。

它甚至可以是 OAuth 的通用 Java 库——OAuth 的[Play 2.0 文档](https://github.com/playframework/Play20/wiki/ScalaOAuth)指出它没有提供 OAuth 2.0 模块，因为它足够简单，甚至不需要库。但是有[一些 Java 库可用](http://oauth.net/2/)。

这是一个项目，其中有人将一些 OAuth 提供者的东西与 Play 放在一起（引用自此[论坛帖子](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/A-m3kciWgXg)）：

[https://github.com/mashup-fm/playframework-oauthprovider](https://github.com/mashup-fm/playframework-oauthprovider)

# javascript - 在 JavaScript 游戏中组织类

> ID：15315237
> 
> 赞同：1
> 
> 时间：2013-03-09T19:57:29.320
> 
> 标签：javascript, organization, class-diagram

我需要一些帮助来确定我正在使用 JavaScript 开发的游戏的类层次结构。该游戏是一个自上而下的太空射击游戏，具有（在其基本级别）背景、玩家、子弹和敌人。

我想出了一个我认为需要改进的类图： ![类图](../Images/982ebb9f08383f15e325bc08deb4d0bd.png)

这里没有什么不寻常的地方，主类叫做 Cosmos（游戏的名称），它有一个`tick()`每秒触发大约 60 次的方法。和类属于，`Background`类属于类，因为一个“拥有” s。`Player``Enemy``Cosmos``Bullet``Player``Player``Bullet`

不过这张图有一个主要问题，那就是我将如何在玩家的子弹和敌人之间进行碰撞检测。我可以在类中编写一个方法`Player`来传递子弹`x`并`y`在`Cosmos`中进行碰撞检测`Cosmos`，但这似乎不是最好的方法。`Cosmos`如果我要采用一种整洁、有组织的方法，那么进行碰撞检测会好吗？

您可以进行的任何其他修改以使我的生活更轻松也非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T00:42:50.190

您的图表似乎有一些问题。你写了：

> Background、Player 和 Enemy 类属于 Cosmos，Bullet 类属于 Player 类，因为玩家“拥有”子弹。

这表明聚合或复合关系，但在您的图表中，您使用继承箭头......您有`Player`扩展`Bullets`，和多重继承`Cosmos`，扩展`Player`，`Background`和`Enemy`。此外，您的图表是颠倒的；通常基类位于顶部。

如果您想使用继承链，请考虑这样的事情：

![图表](../Images/504bbb860ba1dfafb03a1b7b46e60c9f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:30:06.253

这项工作似乎太小了，不能过多地担心阶级层次。

在任何情况下，Java 风格的类只是分离代码的一种方式，保持合理的顺序和适当的注释几乎可以做同样的事情。

总之，直接把Bullets放在Cosmos下面，没什么大不了的。

# c# - 如何在静态方法上使用调用？

> ID：15315238
> 
> 赞同：-4
> 
> 时间：2013-03-09T19:57:33.677
> 
> 标签：c#

我有这堂课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenHardwareMonitor.Hardware;
using System.Diagnostics;
using System.Management;
using System.Windows.Forms;
using DannyGeneral;

namespace HardwareMonitoring
{
    class Hardware
    {
        public static Form1 form1;
        public static CpuTemperature settings;
        public static ManagementObjectSearcher searcher;

        public Hardware(Form1 f1)
        {
            form1 = f1;

            settings = new CpuTemperature(new Dictionary<string, string>
            {
                { "/intelcpu/0/temperature/0/values", "H4sIAAAAAAAEAOy9B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcplVmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/Iu6//MH37x79i9/+NX6N3/TJm9/5f/01fw1+fosnv+A/+OlfS37/jZ/s/Lpv9fff6Ml/NTef/yZPnozc5679b+i193//TQZ+/w2Dd+P9/sZeX/67v/GTf/b3iP3u4/ObBL//73+i+f039+D8Zk/+xz/e/P6beu2TQZju8yH8f6OgzcvPv/U3/Rb8+z/0f/9b/+yfaOn8079X6fr6Cws7ln/iHzNwflPv99/wyS/+xY4+v/evcJ+733+jJ5//Cw7/4ndy9Im3+U2e/Fbnrk31C93vrt/fyPvdb+N//hsF7/4/AQAA//9NLZZ8WAIAAA==" },
                { "/intelcpu/0/load/0/values", "H4sIAAAAAAAEAOy9B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcplVmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/Iu6//MH37x79i9++mpwcv/md/9df89egZ/xX/ym/5y/4D37618Lv7ya//u+58+u+5d9/z7/5t/w9/6u5fP5bH/6av+eTkXyefXxp26ONaf/v/dG/sf39D/rvnv4e5vc/0IP56/waK/vuHzf5I38P8/tv+mv8Rbb9f0pwTF9/zr/1X9vP/8I//+/6Pf7Z30N+/zdf/HX29zd/859q4aCNP5b//U+U3/+7f+zXOjZwfqvDX/V7/o9/vPz+a1G/pv0f+fGlhfk7eZ//N3/0v28//5X0u/n8Cxq7+f1X/tHft20A5x8a/W5/02+BP36Nf+j/nv8XfzrT+c2//Ob4p3+vktvUhNs/+xcWikP6e/4T/5jS5M8/sL8vP/5ff49f/Ivl9//sHzv6PX/vXyG//9R/94/9HuZ34P/5vyC//3W/5e/1exa/k+Bw4bUBnU2bP4Xg/1bn0uafeTH6PatfKL//N3/0t2y/gG9+/8+IzqYNxmU+/+jwX7afY67/nwAAAP//GYSA31gCAAA=" },
            });
            searcher = new ManagementObjectSearcher("SELECT * FROM Win32_DisplayConfiguration");
            videoCardType("ati", "nvidia", f1.lb4());
        }

        public static void cpuView(bool pauseContinue, List<string> myData, ListBox lb1, Button bt1, float? tempcpuv)
        {
            if (pauseContinue == true)
            {
            }
            else
            {
                Computer myComputer = new Computer();
                myComputer = new Computer(settings) { CPUEnabled = true };

                myComputer.Open();
                Trace.WriteLine("");
                foreach (var hardwareItem in myComputer.Hardware)
                {
                    if (hardwareItem.HardwareType == HardwareType.CPU)
                    {
                        hardwareItem.Update();
                        foreach (IHardware subHardware in hardwareItem.SubHardware)
                            subHardware.Update();

                        foreach (var sensor in hardwareItem.Sensors)
                        {
                            settings.SetValue("sensor", sensor.Value.ToString());
                            if (sensor.SensorType == SensorType.Temperature)
                            {
                                sensor.Hardware.Update();
                                settings.GetValue("sensor", sensor.Value.ToString());
                                //label17.Text = sensor.Value.ToString() + "c";//String.Format("{0} Temperature = {1}c", sensor.Name, sensor.Value.HasValue ? sensor.Value.Value.ToString() : "no value");

                                myData.Add("Cpu Temeprature --- " + sensor.Value.ToString());
                                lb1.DataSource = null;

                                tempcpuv = sensor.Value;
                                if (sensor.Value > 60)
                                {
                                    Logger.Write("The Current CPU Temperature Is ===> " + sensor.Value);
                                    bt1.Enabled = true;
                                }

                                break;
                            }
                        }
                    }
                }
            }
        }

        public static void gpuView(bool pauseContinue, List<string> myData, ListBox lb1, Button bt1, float? tempgpuv, Label lb4)
        {

            if (pauseContinue == true)
            {
            }
            else
            {
                Computer computer = new Computer();
                computer.Open();
                computer.GPUEnabled = true;

                foreach (var hardwareItem in computer.Hardware)
                {
                    if (videoCardType("ati", "nvidia",lb4) == true)
                    {
                        HardwareType htype = HardwareType.GpuNvidia;

                        if (hardwareItem.HardwareType == htype)
                        {

                            foreach (var sensor in hardwareItem.Sensors)
                            {

                                if (sensor.SensorType == SensorType.Temperature)
                                {

                                    sensor.Hardware.Update();
                                    if (sensor.Value.ToString().Length > 0)
                                    {

                                        /* else if (UpdatingLabel(sensor.Value.ToString(), label16.Text.Substring(0, label16.Text.Length - 1)))
                                         {
                                             //  Label8 = GpuText;
                                         }*/
                                        //myData = new List<string>();
                                        this.Invoke(new Action(() => myData.Add("Gpu Temeprature --- " + sensor.Value.ToString())));
                                        lb1.DataSource = null;
                                        //sensor.Value.ToString() + "c";
                                        tempgpuv = sensor.Value;
                                        //label8.Visible = true;
                                    }
                                    if (sensor.Value > 60)
                                    {
                                        Logger.Write("The Current Nvidia GPU Temperature Is ===> " + sensor.Value);
                                        bt1.Enabled = true;
                                    }
                                    //form1.Select();
                                }
                            }
                        }
                    }
                    else
                    {
                        HardwareType htype = HardwareType.GpuAti;

                        if (hardwareItem.HardwareType == htype)
                        {

                            foreach (var sensor in hardwareItem.Sensors)
                            {

                                if (sensor.SensorType == SensorType.Temperature)
                                {

                                    sensor.Hardware.Update();
                                    if (sensor.Value.ToString().Length > 0)
                                    {

                                        tempgpuv = sensor.Value;
                                        //label8.Visible = true;
                                    }
                                    if (sensor.Value > 60)
                                    {
                                        Logger.Write("The Current Ati GPU Temperature Is ===> " + sensor.Value); // to check when writing to the log each second its writing the snesor value a lot of time in gpu and cpu
                                        // to check why to make that it will write every second or every n times once. and not a lot of times maybe to change the logger write place not in loop ?
                                        bt1.Enabled = true;
                                    }
                                    form1.Select();
                                }
                            }
                        }
                    }
                }
            }
        }

         public static bool videoCardType(string ati , string nvidia, Label lb4)
        {
            bool atiNvidia = false;
            string graphicsCard = string.Empty;
            foreach (ManagementObject mo in searcher.Get())
            {
                foreach (PropertyData property in mo.Properties)
                {
                    if (property.Name == "Description")
                    {
                        graphicsCard = property.Value.ToString();
                    }
                }
            }

            if (graphicsCard.Contains("NVIDIA") || graphicsCard.Contains("nvidia"))
            {
                atiNvidia = true;
                string toPrintNvidia = nvidia;
                if (graphicsCard.ToUpper().Contains(toPrintNvidia.ToUpper()))
                {
                    int startingIndex = graphicsCard.ToUpper().IndexOf(toPrintNvidia.ToUpper());
                    graphicsCard = graphicsCard.Substring(startingIndex, toPrintNvidia.Length);
                }

                lb4.Text = graphicsCard;
                return atiNvidia;
            }
            if (graphicsCard.Contains("ATI") || graphicsCard.Contains("ati"))
            {
                atiNvidia = false;
                string toPrintAti = ati;
                if (graphicsCard.ToUpper().Contains(toPrintAti.ToUpper()))
                {
                    int startingIndex = graphicsCard.ToUpper().IndexOf(toPrintAti.ToUpper());
                    graphicsCard = graphicsCard.Substring(startingIndex, toPrintAti.Length);
                }

                lb4.Text = graphicsCard;
                return atiNvidia;
            }

            return atiNvidia;
        }
    }
} 
```

在类里面我有这个方法/功能：

公共静态无效gpuView

在这种方法中，我有这条线我想调用：

```
this.Invoke(new Action(() => myData.Add("Gpu Temeprature --- " + sensor.Value.ToString()))); 
```

但在这我得到了错误：

> 错误 1 ​​关键字“this”在静态属性、静态方法或静态字段初始值设定项中无效

如果我删除静态只使函数公开，那么我在调用时收到错误：

> 错误 1“HardwareMonitoring.Hardware”不包含“Invoke”的定义，并且找不到接受“HardwareMonitoring.Hardware”类型的第一个参数的扩展方法“Invoke”（您是否缺少 using 指令或程序集引用？）

和

> 错误 2 非静态字段、方法或属性需要对象引用 'HardwareMonitoring.Hardware.gpuView(bool, System.Collections.Generic.List, System.Windows.Forms.ListBox, System.Windows.Forms.Button , 浮动?, System.Windows.Forms.Label)'

DoWork 事件：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;
            while (true)
            {
                if ((worker.CancellationPending == true))
                {
                    e.Cancel = true;
                    break;
                }
                else
                {
                    if (tempCpuValue >= (float?)nud1.Value || tempGpuValue >= (float?)nud1.Value)
                    {
                        soundPlay = true;
                        blinking_label();
                        NudgeMe();
                    }
                    else
                    {
                        soundPlay = false;
                        stop_alarm = true;

                    }
                    data = new List<string>();
                    Hardware.cpuView(pauseContinueDoWork, data, listBox1, button1, tempCpuValue);
                    Hardware.gpuView(pauseContinueDoWork, data, listBox1, button1, tempGpuValue, label4);
                    listBox1.DataSource = data;
                    listBox1.Invalidate();

                }

            }
        }

And the two listBox events:

    private void listBox1_MeasureItem(object sender, MeasureItemEventArgs e)
            {
                e.ItemHeight = 21;
            }

            private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
            {
                if (e.Index == -1)
                {
                }
                else
                {

                    ColorText.ColorListBox(data, e);

                }
            }

And the ColorText class:

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Drawing;
    using System.Windows.Forms;

    namespace GatherLinks
    {
        class ColorText
        {

            public static void Texts(RichTextBox box, string text, Color color)
            {
                box.SelectionStart = box.TextLength;
                box.SelectionLength = 0;

                box.SelectionColor = color;
                box.AppendText(text);
                box.SelectionColor = box.ForeColor;
            }

            public static void ColorListBox(List<string> data, DrawItemEventArgs e)
            {
                string strLeft = null;
                string strMid = "---";
                string strRight = null;
                if (data[e.Index].Contains(strMid))
                {
                    int index = data[e.Index].IndexOf(strMid);
                    strLeft = data[e.Index].Substring(0, index);
                    strRight = data[e.Index].Substring(index + strMid.Length);
                }

                using (Font f = new Font(FontFamily.GenericSansSerif, 16, FontStyle.Regular))
                {
                    float startPos;
                    e.Graphics.DrawString(strLeft, f, Brushes.Red, e.Bounds.X, e.Bounds.Y);
                    startPos = e.Graphics.MeasureString(strLeft, f).Width;
                    e.Graphics.DrawString(strMid, f, Brushes.Black, e.Bounds.X + startPos, e.Bounds.Y);
                    startPos = e.Graphics.MeasureString(strLeft + strMid, f).Width;
                    e.Graphics.DrawString(strRight, f, Brushes.Green, e.Bounds.X + startPos, e.Bounds.Y);
                }
            }
        }
    } 
```

在 Form1 加载事件中，我做了：

```
h = new Hardware(this);
backgroundWorker1.RunWorkerAsync(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:06:34.103

来自 msdn 文档

```
Executes the specified delegate on the thread that owns the control's underlying window handle. 
```

为了使用 Invoke，您需要一个控件。为什么不使用 lbl1.Invoke 或传入的其他控件之一？

# javascript - 无法加载 JS 类（js 新手）

> ID：15315240
> 
> 赞同：0
> 
> 时间：2013-03-09T19:57:42.833
> 
> 标签：javascript, html

我正在尝试使用此处找到的某人的提示在我的投资组合网站上显示我的 dribbble 提要：[Using Dribbble API with PHP](https://stackoverflow.com/questions/10587154/using-dribbble-api-with-php)

我根据他的建议更改了 .js，但不知道如何将代码添加到 HTML。我最终这样做了，但它不可能是正确的：

`<div id="content" class="home col eight"> <div id="dribbblefeed" class=".gallery"> </div> </div>`

该网站目前通过名为 Stacey App 的 CMS 运行。您可以在此处查看测试站点：http: [//marcna.sh/testsite/testsite/](http://marcna.sh/testsite/testsite/)一个简单的查看源代码应该会显示您所需要的一切。

非常感谢你的帮助。我希望在今天 2 点之前完成，但它没有发生：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:09:21.217

您的代码中有两个问题。首先，您需要删除类属性中的前导点：

```
<div id="dribbblefeed" class="gallery"> 
```

其次，您使用的 javascript 依赖于 jQuery，但您还没有将它包含在您的页面中。添加

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

到您的页面，最好在底部。

**编辑**：就像我说的，有（至少）三个问题......

在[Using Dribbble API with PHP](https://stackoverflow.com/questions/10587154/using-dribbble-api-with-php)中您从 @goetz 获得的代码中，他（她？）有这个：

```
var slgoetzShots;
var slgoetzNum = 1;
var active = "Slgoetz";

// ...

function getSimon(){
  if (active != "slgoetz"){

    // magic happens here

  };
};

getSimon("1"); 
```

请注意条件语句 for`active != "slgoetz"`使用小写`s`，因此条件计算结果为`true`并且代码运行。在您的修改版本中，您已经（在我看来相当合理）“修复”了该问题，您将初始化`active`为`marcnash`(lowercase `m`)，然后在函数中针对该值进行测试：

```
var marcnashShots;
var marcnashNum = 1;
var active = "marcnash";

// ...

function getSimon(){
  if (active != "marcnash"){

     // magic happens here

  };
}; 
```

由于评估为`false`，因此构建图库的代码不会运行。我猜@slgoetz 从另一个来源改编了一些代码，允许更多配置和重新加载画廊，并设法让它或多或少地意外工作。

基本上，如果您只是将`active`初始化更改为`var active = null`，那么您应该已经准备就绪（除非我还遗漏了另一个问题）。一旦你运行它，我强烈建议重构代码以更好地满足你的目的，如果你只需要加载你的画廊并将其保留在那里，那么那里的代码是完全没有必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:44:18.673

尝试更改您的 dribbbgallery.js 中的第 27 行，从

```
if (active != "marcnash"){ 
```

到

```
if (active === "marcnash"){ 
```

现在的方式是，当变量`active`等于时，您的脚本不会加载图像`marcnash`，并且它`marcnash`在第 5 行中设置为。

# events - 调用 Web 组件的方法并响应事件

> ID：15315243
> 
> 赞同：1
> 
> 时间：2013-03-09T19:58:10.787
> 
> 标签：events, methods, dart, dart-webui

我正在开发一个 Dart 项目，在该项目中，我使用具有一些动画的 Web_ui 包创建了一个自定义元素。我希望做的是在元素的飞镖代码中包含这样的东西......

```
class MyElement extends WebComponent {
   ...

   void StartAnimation() { ... }

   ...
} 
```

然后在飞镖应用程序本身的 main() 函数中，我有这样的东西......

```
void main() {
    MyElement elm = new MyElement();
    elm.StartAnimation();  // Kicks off the animation
} 
```

Dart 编辑器告诉我，目前不支持直接构建 Web 组件。然后它说使用 WebComponent.forElement - 但我不清楚如何使用它来实现我的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:53:07.943

虽然您还不能将 Web 组件导入到 Dart 文件中，但您可以通过`query()`和访问它们`.xtag`。`xtag`为您提供与元素关联的 Web 组件实例的引用。您必须小心允许 Web UI 设置完成，以便 `xtag`给定一个值。

这是一个例子：

```
import 'dart:async';
import 'dart:html';
import 'package:web_ui/web_ui.dart';

main() {
  Timer.run(() {
    var myElement = query('#my-element').xtag;
    myElement.startAnimation();
  });
} 
```

这将通过导入组件、直接子类化 Element 以及一些生命周期事件来保证您从`query()`. 这是该示例在未来的样子：

```
import 'dart:async';
import 'dart:html';
import 'package:web_ui/web_ui.dart';
import 'package:my_app/my_element.dart';

main() {
  MyElement myElement = query('#my-element');
  myElement.startAnimation();
} 
```

# python - 在python中使用rpy2将分位数输入ggplot geom_boxplot

> ID：15315247
> 
> 赞同：2
> 
> 时间：2013-03-09T19:58:35.983
> 
> 标签：python, r, ggplot2, pandas, rpy2

我有以下箱线图：

```
import os
iris = pandas.read_table(os.path.expanduser("~/iris.csv"),
                         sep=",")
iris["Species"] = iris["Name"]
r_melted = conversion_pydataframe(iris)
p = ggplot2.ggplot(r_melted) + \
    ggplot2.geom_boxplot(aes_string(**{"x": "PetalLength",
                                       "y": "PetalWidth",
                                       "fill": "Species"})) + \
    ggplot2.facet_grid(Formula("Species ~ .")) + \
    ggplot2.coord_flip()
p.plot() 
```

我的问题是：如何更改箱线图中绘制的胡须/分位数？假设我有一个数据框，我可以在其中按行或列计算分位数，如下所示：

```
quantiles_df = iris.quantiles(q=0.85, axis=1) 
```

那么我如何使用它`quantiles_df`作为输入，`geom_boxplot`以便它绘制例如 0.2 到 0.85 的百分位数而不是标准的 0.25 到 0.75？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:27:48.113

您可以在 R 中从此开始。首先计算变量（此处为 Petal.Width）的每个物种的百分位数，并将其用于绘图。通过指定`ymin`（=下须线边界）、`lower`（=框的下边界）、`middle`（=框中的线）、`upper`（=框的上边界）、`ymax`（=上须线边界）并添加`stat = "identity"`，您可以自定义箱线图。

```
library(reshape2)
library(plyr)
library(ggplot2)

dataf <- ddply(iris, .(Species), summarize, quantilesy= quantile(Petal.Width, c(0,0.2, 0.5,0.85,1 )))
dataf$Labels <- rep(c("0%", "20%","50%","85%", "100%"),length(unique(dataf$Species)))

dataf2 <- reshape(dataf , idvar = c("Species"),timevar = "Labels", direction = "wide")
datafmeanx <- ddply(iris, .(Species), summarize, meanx= mean(Petal.Length))
dataf3 <- merge(dataf2,datafmeanx)

b <- ggplot(dataf3 , aes(x=meanx,ymin = `quantilesy.0%`, lower = `quantilesy.20%`, middle = `quantilesy.50%`, upper = `quantilesy.85%`, ymax = `quantilesy.100%`))
b + geom_boxplot(stat = "identity")+ facet_grid(Species~.) + xlab("Mean PetalLength") + ylab("PetalWidth") 
```

**编辑：如果你不想使用反引号（见评论）：**

```
dataf$Labels <- rep(c("0", "20","50","85", "100"),length(unique(dataf$Species)))

dataf2 <- reshape(dataf , idvar = c("Species"),timevar = "Labels", direction = "wide")
datafmeanx <- ddply(iris, .(Species), summarize, meanx= mean(Petal.Length))
dataf3 <- merge(dataf2,datafmeanx)

b <- ggplot(dataf3 , aes(x=meanx ,ymin = quantilesy.0, lower = quantilesy.20, middle = quantilesy.50, upper = quantilesy.85, ymax = quantilesy.100))
b + geom_boxplot(stat = "identity")+ facet_grid(Species~.) + xlab("Mean PetalLength") + ylab("PetalWidth") 
```

![在此处输入图像描述](../Images/b5f6d0056c7388c82e8a435879bc0509.png)

# paypal - 如何使用 PayPal iOS SDK 将付款拆分给不同的人？

> ID：15315249
> 
> 赞同：3
> 
> 时间：2013-03-09T19:58:45.200
> 
> 标签：paypal

假设我有一个应用程序和一个网站，可以让人们出售在他们的手机上制作的手指画。

人们在 iPhone 上创作手指画并将其上传到一个网站，他们可以在该网站上查看他们的所有画作并将价格与这些画作相关联。

假设每张图纸都有一个与之相关的二维码，以识别它和它的价格。我在现实生活中看到它，我想买它。我扫描它，通过paypal付款。

但是贝宝将如何将这笔钱重定向到该产品集的->所有者。

我需要的是一个系统，在该系统中，每笔交易都知道资金流向了谁的账户。假设根据 10 张图纸，我有 10 个不同的二维码。这个产品集需要有一些与之相关的东西，这样当它们被扫描时，贝宝的钱就会流向那个产品集的所有者。

此外，这些图纸所有者/产品组所有者必须能够从上述 html 网站提取资金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:12:24.453

Paypal 自适应付款选项对此有两个选项。

1.  连锁支付
2.  平行支付。

请参考：[https ://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro)

但是，当前的 iOS SDK - 处于测试状态 ( [https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro) ) - 不支持这些功能。(截至 2013 年 3 月 21 日)

一种选择是直接使用 paypal API，或者使用 webview 实现流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T10:12:05.653

[尝试使用 PayPal https://github.com/paypal/sdk-packages/blob/gh-pages/MPL/PayPalMPL_2-1-0_iPhone_DevelopersPackage.zip](https://github.com/paypal/sdk-packages/blob/gh-pages/MPL/PayPalMPL_2-1-0_iPhone_DevelopersPackage.zip)推荐的 MPL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T06:43:41.673

检查下面的链接，我在其中编写了完整的流程以在 iPhone 中集成延迟链支付。

[iOS PayPal 与后端链式支付的集成](https://stackoverflow.com/questions/26149377/ios-paypal-integration-with-backend-chained-payments/29538781#29538781)

# wordpress - Wordpress，wp_query 中的条件参数，或

> ID：15315257
> 
> 赞同：2
> 
> 时间：2013-03-09T19:59:34.983
> 
> 标签：wordpress, arguments, conditional, conditional-statements

这可以向 wp_query 添加条件 OR 吗？类似条件参数的东西。这是我要完成的工作：

类别中的常规帖子（帖子类型“帖子”）（按 ID）：10、20、30。其他类型的帖子（帖子类型“作品集”）。

我正在尝试创建一个查询（wp_query），它将显示最后 3 个类型的帖子：

*   来自类别 10、20、30 的“帖子”

或者

*   '对开'

因此，如果按日期发布的最后三个帖子是“folio”类型的帖子，则 wp_query 中将跳过“category__in”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T01:59:24.133

据我所知，不可能在查询本身中创建条件，但当然可以在循环内使用条件语句。换句话说，使用满足您所有需求的全局查询，然后`||`在结果中使用来表达您的`OR`.

# eclipse - 用于 nexus 7 avd 的 mac osx 网络摄像头

> ID：15315267
> 
> 赞同：1
> 
> 时间：2013-03-09T20:01:04.920
> 
> 标签：eclipse, android-emulator, osx-mountain-lion, eclipse-juno

下面是我的 AVD 的截图。但现在它不使用我笔记本电脑上的相机。所以我`Front camera`从`Simulated`改为`Webcam0`; 除了，在那之后，当我运行一个应用程序时，AVD 模拟器根本不会出现。在我编辑回 后`Emulated`，模拟器出现了。

是否可以将笔记本电脑的相机与模拟器一起使用？我的电脑是osx山狮。

![连结 7 AVD](../Images/e4bb6908ddef02e15d87dc480cbd082b.png)

# android - Aquery - 缓存图像的下采样版本

> ID：15315270
> 
> 赞同：0
> 
> 时间：2013-03-09T20:01:09.960
> 
> 标签：android, android-query

我有一个自定义 AdapterView（有点），我在其中延迟加载图像。为此，我使用了很棒的[aquery library](http://code.google.com/p/android-query/)。

**短篇小说**：我想缓存（memcache 和 filecache）文件的下采样版本。它可以更快地添加到我的适配器 - 当图像很小时，我在滚动我的 AdapterView 时没有滞后。当图像很大时，即使我使用下采样它也会有点滞后。我发现，它`aquery`存储完整版本的图像并在我每次调用时对其进行下采样`aq.image(...)`。**如何缓存调整大小的版本**，而不是原始版本？

* * *

**长话短说：** 我的 AdapterView 严重依赖图像。这些图像相当大，当适配器项目被实例化时，需要一些时间对其进行下采样然后添加到列表中。所以我认为在滚动时用低分辨率照片实例化项目会很好，并且只在滚动停止时加载高分辨率版本。当我使用两个单独的图像网址（一个用于缩略图，另一个用于原始图像）时，它就像一个魅力。但是我使用的 API 非常有限，所以我没有缩略图的 url。我必须异步下载大版本，对其进行下采样，保存大版本和小版本，然后使用我需要的任何一个。“短篇小说”从这里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T02:30:29.027

[我刚刚发布了一个名为droidQuery](https://github.com/phil-brown/droidQuery)的开源库，它是*jQuery*到 Android 的完整端口。它比 使用简单得多`AQuery`，并且提供了更多的配置。要下载图像并设置输出大小，并缓存小图像（基于每个会话/每十分钟），您可以使用以下代码：

```
final ImageView image = (ImageView) findViewById(R.id.myImage);
$.ajax(new AjaxOptions(url).type("GET")
                           .dataType("image")
                           .imageHeight(200)
                           .imageWidth(200)
                           .context(this)
                           .cache(true)
                           .cacheTimeout(600000)
                           .success(new Function() {
                               @Override
                               public void invoke($ droidQuery, Object... params) {
                                   $.with(image).val((Bitmap) params[0]);
                               }
                           })
                           .error(new Function() {
                               @Override
                               public void invoke($ droidQuery, Object... params) {
                                   droidQuery.toast("could not set image", Toast.LENGTH_SHORT);
                               }
                           })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:37:26.520

我过去也使用过 AQuery 库，但在遇到一些配置有限和奇怪的进度条可见性问题后，我转向了 Android-Universal-Image Loader

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)它为您提供所需的功能以及许多其他有用的配置选项。

只需从上到下阅读此站点 - 您应该可以在一分钟内运行它。

在您的情况下，最有趣的行是

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
    .memoryCacheExtraOptions(480, 800) // default = device screen dimensions
    .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75)
    .discCache(new UnlimitedDiscCache(cacheDir)) // default
    .discCacheSize(50 * 1024 * 1024)
    .discCacheFileCount(100) 
```

您还可以更改缓存的文件名。

# ios - 调整 Google Maps MapView iOS 的大小

> ID：15315271
> 
> 赞同：4
> 
> 时间：2013-03-09T20:01:12.763
> 
> 标签：ios, objective-c, view, resize, google-maps-sdk-ios

我尝试使用 GoogleMapsSDKDemos 中的代码将地图视图调整为屏幕上较小的矩形，但它似乎没有任何效果。这是我的代码：

mapView = [[GMSMapView alloc] initWithFrame:CGRectZero]; mapView.camera = [GMSCameraPosition cameraWithLatitude:38.98549782690282 longitude:-76.94636067188021 zoom:17];

```
self.view = [[UIView alloc] initWithFrame:CGRectZero];
mapView.autoresizingMask =
UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
mapView.frame = self.view.frame;
mapView.clipsToBounds = YES;
mapView.myLocationEnabled = YES;
mapView.settings.tiltGestures = NO;
mapView.settings.zoomGestures = NO;

mapView.frame = CGRectMake(0,0, 10, 25);

[self.view addSubview:self.mapView]; 
```

倒数第二行似乎应该将 MapView 限制为一个小方块，但它仍然占据了整个屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:04:10.820

我会尝试这样的事情：

```
GMSCameraPosition* camera = [GMSCameraPosition 
    cameraWithLatitude: 38.98549782690282 
    longitude: -76.94636067188021 
    zoom: 17];
GMSMapView* mapView = 
    [GMSMapView mapWithFrame: GRectMake(0,0, 10, 25) camera: camera]; 
```

请注意，对`GMSMapView`类的评论`GMSMapView.h`说：

> 此类不应直接实例化，而必须使用 [GMSMapServices mapWithFrame:camera:] 创建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T01:12:10.243

试试这个将地图添加到视图顶部：

```
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:latitude
                                                        longitude:longitude
                                                             zoom:10];

mapView_ = [GMSMapView mapWithFrame:CGRectMake(0,0, width, height) camera:camera];
mapView_.delegate = self;
mapView_.myLocationEnabled = YES;
[self.view addSubview:mapView_]; 
```

# jquery - JS 验证动态添加的字段？

> ID：15315272
> 
> 赞同：1
> 
> 时间：2013-03-09T20:01:20.610
> 
> 标签：jquery

我有一个带有 questionInput 类的输入字段，我想使用 js validate 对其进行验证。

问题是用户可以在按下按钮时添加更多问题，这会克隆原始字段。使用类 questionInput 创建更多字段。

我试过添加：

```
$('.questionInput').each(function() {
        $(this).rules('add', {
            required: true,
            messages: {
                required:  "fill in this field please"
            }
        });
    }); 
```

但这似乎不起作用。

有谁知道我该怎么做？

# ruby-on-rails - 使用 as_json 时如何干掉 Rails/ActiveRecord 包含的内容？

> ID：15315273
> 
> 赞同：1
> 
> 时间：2013-03-09T20:01:21.583
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

假设以下关系：

`Blog`has_many `Posts`has_many `Comments`has_one`Author`

如果我想`Blogs`全力以赴`Posts`，我可以写：

```
Blog.all.as_json(:include => :posts) 
```

但是，这将导致 N+1 查询。

所以我需要写：

```
Blog.includes(:posts).all.as_json(:include => :posts) 
```

它按预期工作，但不是很干燥，特别是当您嵌套包含时。

例如：

```
Blog.includes(
    :posts => {
        :comments => :author
    }
).all.as_json(
    :include => {
        :posts => {
            :include => {
                :comments => {
                    :include => :author
                }
            }
        }
    }
) 
```

当我需要在多个位置查询相同的 JSON 格式时，这个问题会变得更糟。

我考虑过将`as_json`关系格式放在类方法中，如下所示：

```
class Blog < ActiveRecord::base
...
  def self.include_all_json_format
    :include => {
        :posts => {
            :include => {
                :comments => {
                    :include => :author
                }
            }
        }
     }
   end
...
end 
```

这解决了在多个位置查询这种 JSON 格式的问题，因为我可以使用：

```
Blog.includes(
    :posts => {
        :comments => :author
    }
).all.as_json(
    Blog.include_all_json_format
) 
```

但是当然`Blog.includes()`它的关系散列采用不同的格式，所以这个：

```
Blog.includes(
    Blog.include_all_json_format
).all.as_json(
    Blog.include_all_json_format
) 
```

不会工作。

我可以将`Blog.includes()`关系哈希放在第二个类方法中，但是有两个方法声明相同的包含结构并不是 DRY。

* * *

我现在能想到的唯一想法是使用`Blog.include_all_json_format`上面提到的方法，然后编写一个转换器方法，可以将关系散列转换为预期的格式`Blog.includes()`（基本上只是去掉`:include`键），所以它可以被称为：

```
Blog.includes(
    MyConverter(Blog.include_all_json_format)
).all.as_json(
    Blog.include_all_json_format
) 
```

但是，当我想使用`:only`或`:except`以我的`as_json`格式使用时，它会变得复杂。

* * *

我怎样才能干燥这些包括，最好只声明一次关系格式？

也许有一些方法可以利用命名范围或一些宝石？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:10:50.643

您可以覆盖`as_json`模型中的方法

例如

```
class Blog < ActiveRecord::Base

  def as_json
    super(:include => :posts)
  end
end 
```

然后你的控制器应该看起来像

`render json: @blogs`

**建议**

您可以使用 JBuilder、Rabl、AMS 或其他允许您将响应构建与控制器/模型逻辑分开的模板库。这样做肯定会干掉你的代码。

# mysql - MySQL LEFT JOIN 与 2 个单独的查询（性能）

> ID：15315275
> 
> 赞同：0
> 
> 时间：2013-03-09T20:01:35.380
> 
> 标签：mysql, performance

我有两张桌子：

```
++++++++++++++++++++++++++++++++++++
|              Games               |
++++++++++++++++++++++++++++++++++++
| ID |  Name  |    Description     |
++++++++++++++++++++++++++++++++++++
| 1  | Game 1 | A game description |
| 2  | Game 2 | And another        |
| 3  | Game 3 | And another        |
| .. |  ...   |       ...          |
++++++++++++++++++++++++++++++++++++

+++++++++++++++++++++++++++++++++++++++
|             GameReviews             |
+++++++++++++++++++++++++++++++++++++++
| ID |GameID|          Review         |
+++++++++++++++++++++++++++++++++++++++
| 1  |  1   |Review for game 1        |
| 2  |  1   |Another review for game 1|
| 3  |  1   |And another              |
| .. | ...  |         ...             |
+++++++++++++++++++++++++++++++++++++++ 
```

选项1：

```
SELECT 
    Games.ID, 
    Games.Name,
    Games.Description, 
    GameReviews.ID, 
    GameReviews.Review 
FROM 
    GameReviews
LEFT JOIN
    Games
ON
    Games.ID = GameReviews.GameID
WHERE
    Games.ID=? 
```

选项 2：

```
SELECT
    ID,
    Name,
    Description
FROM
    Games
WHERE
    ID=? 
```

然后 SELECT ID, Review FROM GameReviews WHERE GameID=?

显然，查询 1 会“更简单”，编写的代码更少，而另一个在逻辑上似乎在数据库上“更容易”，因为它只查询`Games`表一次。问题是当它真正归结为它时，性能和效率真的有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:33:10.320

选择选项 1，这正是 RDBMS 的优化目标。
并且从客户端访问一次数据库总是比多次重复访问要好。

*我不相信你会有这么多游戏和评论，选择选项 2 是有意义的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:45:19.900

The vast majority of the time option 1 would be the way to go. The performance difference between the two would not be measurable until you have a lot of data. Keep it simple.

Your example is also fairly basic. At scale, performance issues can start revealing themselves based on what fields are being filtered, joined and pulled. The ideal scenario is to only pull data that exists in indexes (particularly with InnoDB). That usually is not possible, but a strategy is to pull the actual data you need at the last possible moment. Which is sort of what option 2 would be doing.

At extreme scale, you don't want to do any joins in the database at all. Your "joins" would happen in code, minimizing data sent over the network. Go with option 1 until you start having performance issues, which may never happen.

# c# - 挥之不去的 WPF 投影

> ID：15315279
> 
> 赞同：0
> 
> 时间：2013-03-09T20:01:49.157
> 
> 标签：c#, wpf, rendering, dropshadow

我有一个 StackPanel 的阴影样式。内容绑定到 ObservableCollection，每个项目都呈现为图像。当我从集合中删除最后一个项目时，阴影仍然存在，即使图像不再存在。这只发生在最后一项。

这是怎么回事？如何确保阴影也被移除？

```
 <Style TargetType="StackPanel" x:Key="ShadowedStackPanel">
            <Setter Property="BitmapEffect">
                <Setter.Value>
                    <DropShadowBitmapEffect Color="Black" Direction="50" ShadowDepth="5" Opacity=".65" Softness="1"/>
                </Setter.Value>
            </Setter>
        </Style>

    <ItemsControl x:Name="TilesControl">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" Style="{StaticResource ShadowedStackPanel}" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Image Source="{Binding Path=ImageSource}"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

代码隐藏基本上是：

```
public ObservableCollection<TileViewModel> Hand = new ObservableCollection<TileViewModel>();

TilesControl.ItemsSource = Hand;

// populate the collection here

var last = Hand.Last();

Hand.Remove( last ); 
```

这会留下挥之不去的阴影效果。

![渲染错误](../Images/8c697fba11c28838b336b55ebec1f30b.png)

如果我删除集合中的任何其他早期项目，它会重新绘制一切正常。仅当我删除最后一项时才会发生这种情况。

如果我调整窗口大小，它会被重新绘制并修复......但无论出于何种原因，如果我不这样做，它会留下挥之不去的阴影。

如何强制重绘以使阴影消失？还是首先避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:52:08.153

您可以在删除后使用代码

```
TilesControl.Items.Refresh(); 
```

# gcc - GCC 编译器在多大程度上符合 C/C++ 标准？

> ID：15315280
> 
> 赞同：2
> 
> 时间：2013-03-09T20:01:54.603
> 
> 标签：gcc, c99, c++03

例如，具有 C99 标准的 C 编程语言支持十六进制浮点文字，但具有 C++03 标准的 C++ 不支持。

我对其进行了测试，GCC 在 C++03 模式（-std=c++03）中识别出十六进制浮动文字，但根据 C++ 标准，它不应该。我知道，这不是悲剧，我只是对这个问题感兴趣..

GCC 编译器是否符合标准？你能给我推荐一个“完美”符合标准的 C/C++ 编译器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T21:04:55.377

当您向 GCC 提供标准时，根据[手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/C-Dialect-Options.html#C-Dialect-Options)

> 编译器将接受所有遵循该标准的程序以及那些使用不违背该标准的 GNU 扩展的程序。

如果您想确保严格遵守标准，请添加`-pedantic`，这将警告十六进制 FP 文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:30:09.040

Comeau 编译器使用它自己的 libcomo 标准库，几乎可以提供最接近完美的 C++03 支持。

对于 C++11，带有 libc++ 的 Clang 和带有 libstdc++ 的 GCC 都非常好，但并不完美（还）

# c# - 根据正确/错误答案更改按钮的颜色

> ID：15315282
> 
> 赞同：0
> 
> 时间：2013-03-09T20:02:04.343
> 
> 标签：c#, winforms

我很难弄清楚一些事情。

我希望根据单击的按钮是正确答案还是错误答案来更改按钮的背景颜色，即如果单击的按钮是正确答案，则背景颜色更改为 YellowGreen，如果是错误答案，则背景所有错误答案的颜色变为红色红色，正确答案的背景颜色为黄绿色，以便用户能够查看他们是否正确或错误，以及哪个答案是正确的。

就像第一个问题出现，有四个按钮，我点击正确答案，它变成绿色，错误答案变成红色，但是当我点击下一步并转到下一个问题时，它不再改变颜色。如果我单击其中一个错误答案，颜色也不会因某种原因而改变，前提是我先单击正确答案。

这四个按钮分别命名为 button4、button5、button6 和 button7。我有的示例代码（所有四个按钮都有这个）：

```
if (qCorrect == 1)
{
    button4.BackColor = Color.YellowGreen;
    button5.BackColor = Color.Red;
    button6.BackColor = Color.Red;
    button7.BackColor = Color.Red;
} 
```

在 btnNext_Click 我有：

```
private void btnNext_Click(object sender, EventArgs e)
    {
        // swap panels
        dPanel.Visible = false;
        qPanel.Visible = true;

        button4.BackColor = SystemColors.Control;
        button5.BackColor = SystemColors.Control;
        button6.BackColor = SystemColors.Control;
        button7.BackColor = SystemColors.Control;

        button4.Font = new Font(button4.Font.Name, button4.Font.Size, FontStyle.Regular);
        button5.Font = new Font(button5.Font.Name, button5.Font.Size, FontStyle.Regular);
        button6.Font = new Font(button6.Font.Name, button6.Font.Size, FontStyle.Regular);
        button7.Font = new Font(button7.Font.Name, button7.Font.Size, FontStyle.Regular);

        if ( qCounter != qSection )
        {
            PickQuestion();
            label5.Text = "Question " + qCounter.ToString() + " of " + qSection.ToString();

            button4.Enabled = true;
            button5.Enabled = true;
            button6.Enabled = true;
            button7.Enabled = true;
        }
        else
        {
            btnNext.Enabled = false;
            label5.Text = "You answered " + qCorrect.ToString() + " questions correctly out of a possible " + qSection.ToString();
        }
    } 
```

任何有关该问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:41:39.933

好的，我明白了！在您的回答按钮的事件处理程序中，您总是递增 qCorrect，但您只检查`qCorrect == 1`. 如果您单击第一个答案，`qCorrect`将为 1，当您第二次回答时，`qCorrect`将为 2，但您检查`qCorrect == 1`. 等等...

当您在 button4_click 和 button6_click 中为简单模式设置断点时，您就会明白我的意思了！希望这可以进一步帮助您。

# regex - 正则表达式替换所有之前的字符和字符本身

> ID：15315284
> 
> 赞同：1
> 
> 时间：2013-03-09T20:02:11.783
> 
> 标签：regex, replace

我有一个链接

[http://www.youtube.com/v/395hgf98f](http://www.youtube.com/v/395hgf98f)

链接也可以以其他方式发布

[http://youtube.com/v/395hgf98f](http://youtube.com/v/395hgf98f)

这些不是真正的链接我不认为我只是输入了一堆字母。我想在结束路径名之前删除所有的任何方法。

我试过替换(/^[^/]*//,'');

这没有用。这会很困难，因为 url 中有 4 个反斜杠。我们可以做类似的事情吗

v+/ 或 v/ 一起确保它同时删除 v 和下一个反斜杠？

正则表达式不是强项，实际上只知道一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:42:59.247

您想要 last 之后的所有内容`/`，因此找到该字符的最后一次出现并获取它之后的子字符串：

```
var u = "http://www.youtube.com/v/395hgf98f";
var lastBit = u.substring(u.lastIndexOf("/")+1);
document.write(lastBit); //outputs 395hgf98f 
```

# c++ - 从 JPG opencv 制作 avi 文件

> ID：15315285
> 
> 赞同：1
> 
> 时间：2013-03-09T20:02:23.750
> 
> 标签：c++, opencv

嗨，我正在尝试运行此代码，但它给了我分段错误。我想在本地保存 4 秒的 IP 摄像头供稿作为 avi 文件以供进一步处理。我似乎无法访问直接提要，所以我必须采用间接方式。

```
#include "cv.h"
#include "highgui.h"
#include<iostream>
using namespace std;

int main()
{
    IplImage *img;
    CvSize size;

    img = cvLoadImage(" http://192.168.1.4:1024/shot.jpg");
    size.width=img->width;
    size.height = img->height;

    CvVideoWriter *writer = cvCreateVideoWriter(
        "out.avi",
        CV_FOURCC('P','I','M','1') ,
        30,
        size,
        TRUE
    );
    if(writer ==NULL)
    {
        cout<<"No videowrite here !!!!"<<endl;
    }

    while(img!= NULL)
    {
        img = cvLoadImage("http://local_ip:1024/shot.jpg");
        cvWriteFrame(writer,img);
    }

    cvReleaseVideoWriter(&writer);
    cvReleaseImage(&img);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:10:25.757

第一个答案肯定是有帮助的。但是，这里有更多问题。在某些时候，您将`cvReleaseImage(&img);`使用 NULL img！此外，虽然这可能不是您当前的问题，但您还应该确保您不`cvReleaseVideoWriter(&writer);`使用 if `writer == NULL`。现在没有正确处理...

# java - 使用 Spring 自定义事件进行触发器实现是否安全

> ID：15315288
> 
> 赞同：2
> 
> 时间：2013-03-09T20:02:41.677
> 
> 标签：java, spring, hibernate, event-handling

在基于 Spring 的应用程序中，每当更新一个表时，我想更新一些数据库 (MySQL) 表。逻辑很复杂，所以我不能依赖数据库触发器。我想用Java实现逻辑。我有触发功能的代码。我遇到了[Spring 自定义事件](http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch03s13.html)，并正在考虑使用它们来使代码更有条理。我在想，每当 table1 在`Repository`实例中更新时，它都会触发一个事件，该事件也会更新另一个表。现在在里面`Repository`我有一个`@Autowired`需要手动调用的其他数据库表的存储库。我可以获得更结构化的实现逻辑吗？

1.  文档说这些事件是同步的。调用事件侦听器的调用顺序是什么？
2.  我可以结束循环吗？如何防止循环？任何简单的想法。编辑：我猜只要我不在监听器中发布另一个事件，周期就不会成为问题。

3.  顺便说一句，我在所有存储库中都有一个`@Autowired`实体管理器实例。这些实体管理器实例在所有存储库中都相同吗？这是[配置文件](http://bit.ly/12DoGCw)的样子。编辑：我问这个以了解我是否需要将所有对象持久化到同一个实体管理器实例才能成为同一个事务的一部分。我的实体管理器实例已注释`@PersistenceContext`。我是否正确假设实体管理器在使用注释声明时具有单例范围。

编辑：以防万一我`@Transactional`对所有存储库类都有注释。

# java - 套接字 - 连接同一网络上的两台计算机而没有端口转发？

> ID：15315292
> 
> 赞同：1
> 
> 时间：2013-03-09T20:03:10.320
> 
> 标签：java, sockets, networking, ip

我很迷茫。我找不到我的难题的具体答案。我认为这适用于所有语言，但我正在专门用 Java 编写我的应用程序。

所以，我只是想连接两台在**同一**网络上运行的独立计算机。

计算机“A”是服务器，计算机“B”是客户端。

当客户端连接时，我只想在服务器上显示一条消息。

**我的问题：** 是否可以在同一网络上连接两台 PC（一台是服务器，另一台是客户端），而无需任何类型的端口转发或其他 Internet 设置（某些防火墙设置除外）？另外，你必须使用什么IP来连接两台PC？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:07:22.197

您不需要端口转发。你需要在服务器上做的就是

```
ServerSocket ss = new ServerSocket(KNOWN_PORT);
while(running) {
    executor.submit(new SocketHandler(ss.accept())); 
```

在客户端

```
Socket s = new Socket(KNOWN_HOST, KNOWN_PORT); 
```

# java - 黑莓应用程序的 Java Web Scraping

> ID：15315295
> 
> 赞同：0
> 
> 时间：2013-03-09T20:03:14.507
> 
> 标签：java, blackberry, web-scraping

我正在尝试找到一种从 Blackberry App World 收集所有应用程序信息的方法。我为 Apple 遵循的过程很简单，因为它有 api，对于 android/windows，我从应用列表页面获取应用的 id，然后转到该页面并使用 JSoup 库从 html 元素中收集信息。**对于 Blackberry，他们使用 jquery web service call 加载新的应用程序列表**。我尝试使用 Firefox Firebug 插件调试页面以检查触发了哪些事件，但无法弄清楚**如何以编程方式在 Java 中触发按钮单击事件**并**捕获返回的数据**。谁能指导我如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:13:23.517

我在源页面中查看了更多详细信息，发现他们有一个目录 API javascript，它反过来调用一个 URL，该 URL 以类似于 Apple Search API 的 JSON 格式给出回复。网址是：“_http://appworld.blackberry.com/cas/content/*app_id*”

但是为了获得我在 Java 中使用 Selenium 的 ID 列表，它打开网页并单击加载更多按钮直到大约多次，然后保存 html 页面并从中提取应用程序的 id。比使用具有上述 url 的那些 id 来获取所需的数据。我也可以对 id 列表使用相同的 api。但在我找到搜索 URL 之前，我已经完成了这一步 :)

希望这可以帮助某人

# javascript - 如何消除背景图像变化闪烁

> ID：15315300
> 
> 赞同：7
> 
> 时间：2013-03-09T20:03:27.737
> 
> 标签：javascript, jquery, html, css

我有`<div>`一个图像作为背景。我有它，所以每当有人将鼠标悬停在 上时`<div>`，背景图像都会更改为其他图像。问题是，当您的鼠标第一次悬停在 上时`<div>`，背景图像在加载时会闪烁，并且您在几毫秒内看不到任何图像。

如何消除这种闪烁？如何在用户实际悬停之前加载悬停图像，`<div>`以便立即生效。

我更改`<div>`背景的代码非常简单：

```
#someID{
    background-image: *image source*;
}
#someID:hover{
    background-image: *Another image source*
} 
```

我知道有一个解决方案，将两个所需的图像放在一个图像中，然后使用背景位置进行播放，但这不是一个选项，因为我总是将背景图像设置为这样：

```
image-size: 100% 100%; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T20:20:57.360

在 window.load() 函数中，

*   确保所有图像都加载到页面上。
    仅供参考-您可能希望将每个图像的 CSS 位置设置为绝对位置，顶部：0px 和左侧：0px，所有这些都在具有位置的父 div 中：相对，具有一定的宽度和高度。

*   将 display:none 设置为不应该显示为 DC_ 指出的那些

*   使用jquery的[hover方法](http://api.jquery.com/hover/)或者[click方法](http://api.jquery.com/click/)点击图片。在您选择的方法函数中，fadeOut() 当前图像和 fadeIn() 与 display:none 关联的图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T20:08:08.590

您可以在 DOM 中的某处放置一个图像标签，引用您要预加载的图像，并为其赋予`display:none; visibility: hidden;`. 您也可以尝试使用 JavaScript 预加载解决方案，但它不会那么可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T19:10:56.840

当 CSS 更改并重新加载时会发生闪烁。您看到的闪烁是重写 CSS 所需的微秒转换。

我建议将您的过渡分层放在另一个背景之上。闪烁实际上是#someID 元素在瞬间完全透明。

伪代码：

```
#underLayer {
     background-image: *image source*;
}

#someID {
    background-image: *image source*;
}

/* On change for #someID */
#someID:hover {
    background-image: *image source*;
}
<!-- first div acts as a base layer to show underneath during transition flicker -->
<div id="underLayer">
    <div id="someID"> This div changes on hover</div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T07:17:36.670

我有一个非常相似的问题。我相信您会发现它与此有关：[cubiq.org/you-shall-not-flicker](http://cubiq.org/you-shall-not-flicker)

简单的解决方案（来自文章）`-webkit-transform:translate3d(0,0,0)`：.

# visual-studio-2012 - 如何让 zen 编码适用于 VS2012？

> ID：15315303
> 
> 赞同：1
> 
> 时间：2013-03-09T20:03:38.750
> 
> 标签：visual-studio-2012

所以我下载了 VS2012 的 Web Essentials 扩展，我感兴趣的一个很酷的功能是 Zen Encoding 实现，[如图所示](http://www.johnpapa.net/zen-coding-in-visual-studio-2012/)。我是否输入类似的内容

```
div#page>div.logo+ul#navigation>li*5>a 
```

然后它会生成 HTML 还是我错过了整点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:06:31.867

[好的，刚刚在 youtube 上](http://vswebessentials.com/features/html)观看了视频，您只需按 Tab 即可获取格式。

# gcc - 基础 c -_-

> ID：15315304
> 
> 赞同：-3
> 
> 时间：2013-03-09T20:03:39.070
> 
> 标签：gcc, increment, decrement

```
#include<stdio.h>

int main()
{
    int a=2;
    int j=++a  + ++a + ++a + ++a ; 

    printf("%d",j);
} 
```

//请告诉我这个片段的执行... //我正在使用 GCC ubuntu (12.04) 编译器。-_-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:45:43.770

我生成了汇编代码（gcc for windows on WINdows 7）[gcc -S test.c]，我得到以下信息：

```
 .file   "increment.c"
    .def    ___main;    .scl    2;  .type   32; .endef
    .section .rdata,"dr"
LC0:
    .ascii "%d, %d\12\0"
    .text
    .globl  _main
    .def    _main;  .scl    2;  .type   32; .endef
_main:
LFB6:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    andl    $-16, %esp
    subl    $32, %esp
    call    ___main
    movl    $2, 28(%esp)   ;28(%esp) = 2 (a=2)
    incl    28(%esp)       ;28(%esp) = 3 (a++)
    incl    28(%esp)       ;28(%esp) = 4 (a++)
    movl    28(%esp), %eax ;%eax = 4 (eax = a = 4)
    leal    (%eax,%eax), %edx = %eax + %eax = 8 (edx = a + a) 
    incl    28(%esp)       ;28(%esp) = 5 (a++)
    movl    28(%esp), %eax ;%eax = 5 (eax = a = 5)
    addl    %eax, %edx  ;%edx = %eax + %edx = 5 + 8 = 13 (edx = a + a + a)
    incl    28(%esp) ;28(%esp) = 6 (a++)
    movl    28(%esp), %eax ; %eax = 6 (eax = a = 6)
    addl    %edx, %eax    ;%eax = %edx + %eax = 13 + 6 = 19 (eax = a + a + a + a)
    movl    %eax, 24(%esp) 
    movl    28(%esp), %eax 
    movl    %eax, 8(%esp) 
    movl    24(%esp), %eax 
    movl    %eax, 4(%esp)
    movl    $LC0, (%esp)
    call    _printf
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
LFE6:
    .def    _printf;    .scl    2;  .type   32; .endef 
```

计算结果后（见注释），调用 printf 函数，结果为 19。

无论如何，不​​同的编译器可以给出不同的结果。最终结果取决于编译器排列指令的方式。

# android - 如何在以编程方式添加的 Google 地图 android v2 之上添加按钮和复选框

> ID：15315307
> 
> 赞同：1
> 
> 时间：2013-03-09T20:03:49.613
> 
> 标签：android, google-maps-android-api-2

所以我以编程方式将谷歌添加到我的应用程序中，它工作得很好，但我不知道如何在地图上添加按钮或选项，例如切换地图类型、搜索位置等。这是我当前的代码：

```
public class GoogleMaps extends FragmentActivity {
    SupportMapFragment mMapFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_google_maps);

        mMapFragment = new SupportMapFragment(){
            @Override
            public void onActivityCreated(Bundle savedInstanceState){
                super.onActivityCreated(savedInstanceState);

                GoogleMap map = mMapFragment.getMap();
                map.setMapType(GoogleMap.MAP_TYPE_HYBRID);
                map.setMyLocationEnabled(true);

                if (map != null){
                    UiSettings settings = map.getUiSettings();
                    settings.setTiltGesturesEnabled(false);

                }
            }
        };       
        getSupportFragmentManager().beginTransaction()
        .add(android.R.id.content, mMapFragment).commit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:08:23.060

我建议您将地图放在`FrameLayout`XML 文件中的 a 旁边`RelativeLayout/LinearLayout`，并将与地图片段重叠的 a 放在一起，然后将按钮放入`RelativeLayout/LinearLayout`地图顶部。

像这样：

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/corneredmap" >
    </LinearLayout>

</FrameLayout> 
```

我认为需要更多工作的另一个选择是创建自己的`CustomMapFragment`扩展`SupportMapFragment`并添加所需的按钮。

# c# - 为什么这个代码很冰冷？

> ID：15315311
> 
> 赞同：1
> 
> 时间：2013-03-09T20:04:40.277
> 
> 标签：c#

我本来希望这段代码能够快速执行，但是对于 5000 个元素的列表，它在我杀死它之前运行了超过 20 分钟。

是因为 list.contains() 吗？

有任何想法吗？

```
 public static int PNum(int N)
     {
        List<int> result = new List<int>();
        for (int i = 1; i <= N; i++)
            result.Add(i * (3 * i - 1) / 2);

        int len = result.Count;
        int minDiff = 10000;
        int sum = 0, diff = 0;
        for (int i = 0; i <= len - 1; i++)
        {
            for (int j = i + 1; j <= len - 1; j++)
            {
                diff = result[j] - result[i];
                if (result.Contains(diff))
                {
                    sum = result[i] + result[j];
                    if (result.Contains(sum))
                    {
                        if (diff < minDiff)
                            diff = minDiff;
                    }
                }
            }
        }
        return minDiff;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T20:09:00.670

`N`是 5000。因此，您的外循环运行 5000 次迭代，内循环运行 5000 次迭代，并且`List<T>.Contains`迭代每个元素，因此它也完成了 5000 次迭代的工作。

因此，您的循环至少要执行大约 5000 ^(3 = 125,000,000,000 次操作，这将需要相当长的时间。)

问题确实是您使用`List.Contains`. 使用 a`HashSet`代替（或另外）来获得 O(1)`Contains`测试。

# android - 如何创建一个暂停循环内线程的按钮和另一个恢复的按钮

> ID：15315313
> 
> 赞同：0
> 
> 时间：2013-03-09T20:04:44.107
> 
> 标签：android, multithreading, runnable, synchronized

```
what is wrong with following code. 
```

做一些事情说 words.lenght=1000 次
然后假设用户想要在
点击暂停按钮 id = bt 之间休息这个按钮暂停线程直到用户点击 id = bt1 的恢复

```
Runnable myRun = new Runnable(){
public void run(){

   for(int j =0 ;j<=words.length;j++){

   synchronized(this){
       try {

            wait(sleepTime);

            bt.setOnClickListener(new View.OnClickListener() {
                public void onClick(View arg0) {

                            try {
                                wait();
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                }});
            bt2.setOnClickListener(new View.OnClickListener() {
                public void onClick(View arg0) {
                    notify();

                }
            });
            } catch (InterruptedException e) {
            e.printStackTrace();

        } }
   runOnUiThread(new Runnable(){
       public void run(){
           try {
                et.setText(words[i]);
                i++;
            } catch (Exception e) {
                e.printStackTrace();
            }
       }});
  }}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:00:15.803

该代码包含一个不匹配的右大括号。除此之外，它的格式很糟糕。首先，您应该在向人们寻求建议之前进行修复。其次，我认为混乱的格式也让您感到困惑，因为其中一些与您的描述完全不符。

# javascript - Photoshop javascript SaveAsWeb 没有使用脚本产生相同的结果

> ID：15315314
> 
> 赞同：1
> 
> 时间：2013-03-09T20:04:45.820
> 
> 标签：javascript, png, photoshop

当我使用（手动）Photoshop 保存 PNG-24 文件时，我得到了这张图片（15.5KB）：

![在此处输入图像描述](../Images/95d456fad0a7b63aaefc0541d95fc50c.png)

使用 javascript 保存时，我得到了这张图片 (14.1KB)：

![在此处输入图像描述](../Images/161e2b472d211490ea878f8fee9252aa.png)

源图像是一个 512 像素的正方形，我将其调整为 96 像素（在第一种情况下手动，在第二种情况下通过脚本）

有问题的脚本是：

```
// options to use on export
var options = new ExportOptionsSaveForWeb();
options.quality = 100;  
options.format = SaveDocumentType.PNG;  
options.PNG8 = false;

// resize
doc.resizeImage(UnitValue(96,'px'), null, null, ResampleMethod.BICUBIC);
// save to file
var newname = doc.fullName + '_96.png';
newname = newname.replace ('.psd', '');
doc.exportDocument(new File(newname), ExportType.SAVEFORWEB, options); 
```

任何人都可以告诉我使用脚本获取相同图像的正确选项是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:54:30.857

好吧，我找到了一个非常有用的帖子，如何记录一个 Photoshop 动作并查看它的 js 或 vb 文件。
您需要使用一个名为 Script Listener 的插件，您可以从[Adob​​e Scripting Page下载它](http://www.adobe.com/devnet/photoshop/scripting.html)

按照[这篇文章](https://stackoverflow.com/questions/5796764/from-photoshop-actions-to-photoshop-scripting)中的说明进行操作（不是接受的答案，而是 Kevin Sharnhorst 的答案）

然后很容易将操作与我拥有的脚本进行比较，最坏的情况是我可以使用侦听器创建的代码来执行完全相同的操作。

**实际运行** 后编辑 使用上述技术后，罪魁祸首不是 SaveForWeb 函数，而是图像调整大小。似乎 doc.resizeImage() 中没有足够的选项来达到相同的结果。
我复制了监听器（丑陋的）代码，现在结果和预期的一样

```
var idImgS = charIDToTypeID( "ImgS" );
    var desc2 = new ActionDescriptor();
    var idWdth = charIDToTypeID( "Wdth" );
    var idPxl = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( idWdth, idPxl, 96.000000 );
    var idscaleStyles = stringIDToTypeID( "scaleStyles" );
    desc2.putBoolean( idscaleStyles, true );
    var idCnsP = charIDToTypeID( "CnsP" );
    desc2.putBoolean( idCnsP, true );
    var idIntr = charIDToTypeID( "Intr" );
    var idIntp = charIDToTypeID( "Intp" );
    var idbicubicAutomatic = stringIDToTypeID( "bicubicAutomatic" );
    desc2.putEnumerated( idIntr, idIntp, idbicubicAutomatic );
executeAction( idImgS, desc2, DialogModes.NO ); 
```

# javascript - 如何使用 js 向 td 添加按钮？

> ID：15315315
> 
> 赞同：5
> 
> 时间：2013-03-09T20:04:48.740
> 
> 标签：javascript, button

我有一个动态生成的表，因为它正在生成它的 TD，我想将第一个 TD 设置为一个按钮。下面是我的代码，显然不起作用。我记得我遇到的另一个问题是，我们可以使用 .html() 更改 div 的内容，但这在这里也不起作用。

代码：

```
 var table = document.getElementById("userinfo");
    var thead, tr, td;
    table.appendChild(thead = document.createElement("thead"));
    thead.appendChild(tr = document.createElement("tr"));
    tr.appendChild(td = document.createElement("td"));
    td.innerHTML = "Email";
    tr.appendChild(td = document.createElement("td"));
    td.innerHTML = "First Name";
    tr.appendChild(td = document.createElement("td"));
    td.innerHTML = "Last Name";
    tr.appendChild(td = document.createElement("td"));
    td.innerHTML = "Is Active?";

    for (var i in data)
    {
        tr = document.createElement("tr");
        tr.setAttribute("id", "row" + i);
        if (i%2 == 0)
        {
            tr.setAttribute("style", "background:white");
        }

        var entry = data[i];
        console.log(entry);
        table.appendChild(tr);
        tr.appendChild(td = document.createElement("td"));
        td.setAttribute("html", "<input type=\"button\" class=\"btn\" value=\'" + entry.email + "\" onclick=\"" + chooseUser(entry) + "\"/>");
        tr.appendChild(td = document.createElement("td"));
        td.innerHTML = entry.first_name;
        tr.appendChild(td = document.createElement("td"));
        td.innerHTML = entry.last_name;
        tr.appendChild(td = document.createElement("td"));
        td.innerHTML = entry.isActive;
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T20:08:58.487

您可以使用`td.innerHTML = '<input type="button"...';`，也可以以“正确”的方式进行：

```
var btn = document.createElement('input');
btn.type = "button";
btn.className = "btn";
btn.value = entry.email;
btn.onclick = (function(entry) {return function() {chooseUser(entry);}})(entry);
td.appendChild(btn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-28T21:30:54.307

这对我有用。

```
 var row = {};
     var myTable = document.querySelector("table#tableProducts>tbody");

     row = myTable.insertRow();

     row.insertCell(-1).textContent = "dummy";
     var lastRow = row;
     var lastCell = lastRow.cells[lastRow.cells.length - 1];
     lastCell.innerHTML = "<button id='btnEdit';>Editar</button>"; 
```

# java - 如何使用文件名在java中获取完整目录

> ID：15315317
> 
> 赞同：0
> 
> 时间：2013-03-09T20:05:01.807
> 
> 标签：java, swing, awt, java.util.scanner, bluej

如何获取文件目录加上全名，以便我可以将其分配给变量 inFile 下面是我要读取的数据类型我使用了正则表达式，但它不起作用

```
public void loadAfileFinal()  throws FileNotFoundException
    {

       Fiog fileBox = new FileD(ileDialog);
       fox.sVisle(true);
       while(scanner.hasNext())
       {
           String name = scanner.nextLine();
           System.out.println(name);
       }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:20:01.747

阅读[`File`的 JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)。以下是您应该考虑的一些方法：

*   [`getName()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getName%28%29)
*   [`getAbsoluteFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getAbsoluteFile%28%29)
*   [`getAbsolutePath()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getAbsolutePath%28%29)
*   [`getCanonicalFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalFile%28%29)
*   [`getCanonicalPath()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath%28%29)
*   [`getParentFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getParentFile%28%29)
*   [`getParent()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getParent%28%29)

* * *

另外，作为一个建议，请考虑使用[`JFileChooser`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html)(Swing) 而不是[`FileDialog`](http://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html)(AWT)，除非您正在使用旧版 GUI 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:15:09.873

我假设您想阅读并“拆分”这些行，那么这应该可以完成工作：

```
while (scanner.hasNext()) {
    String name = scanner.nextLine();
    name = name.trim();

    if (!name.isEmpty() || name.startsWith("//")) {
        System.out.println("next item:");
        String[] parts = name.split(",");
        for (String part : parts) {
            System.out.println("part: " + part);
        }
        System.out.println();
    }
} 
```

如果你想获得文件的绝对路径，这应该可以完成这项工作：

```
fileBox.getAbsolutePath(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:18:50.890

这一行：
`File inFile = new File(fileBox.getFile());`
应该是
`File inFile = new File(directoryPath + filename);`

# javascript - 获取所选下拉列表项的值

> ID：15315319
> 
> 赞同：2
> 
> 时间：2013-03-09T20:05:14.363
> 
> 标签：javascript, onchange, html-select

晚上好，我的 JSP 中有这些动态生成的下拉列表：`

```
 <td><select name="model" id="model"  onchange="convertDropDownToTextBox()">

                            <c:forEach items="${model_list}" var="item">

                                <option value="${item.modelId}">${item.modelName}</option>
                            </c:forEach>
                                                            <option value="100">Add New Model</option>

            </select></td> 
```

我尝试使用这些脚本从这些下拉列表中获取选定的值：

```
function convertDropDownToTextBox(){
    var select = document.getElementById("model");
    var selectedString = select.options[select.selectedIndex].value;
    alert(selectedString);
} 
```

这里的问题是它总是为下拉列表中选择的每个项目提供 1 但是如果我将 onChange 更改为`onchange="alert(this.value)"`它打印正确的值！那怎么来的？以及如何获取 DropDown 中选择的每个项目的实际索引

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:22:15.117

不完全确定问题是什么，但这对我有用：

```
var select = document.getElementById("model");
select.onchange = function(){
    var selectedString = select.options[select.selectedIndex].value;
    alert(selectedString);
} 
```

演示：http: [//jsfiddle.net/louisbros/PS4zy/1/](http://jsfiddle.net/louisbros/PS4zy/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-03T20:48:49.997

只需将`event`对象传递给 Endpoint 函数：

```
<select onchange="convertDropDownToTextBox(event)">
    <option value="1">Option 1</option>
</select> 
```

然后您可以`event.target.value`从函数内访问该值：

```
function convertDropDownToTextBox(e) {
    console.log(e.target.value);
} 
```

# java - java.lang.ClassNotFoundException：运行 hector 示例代码时出现 org.apache.xbean.finder.archive.Archive 错误

> ID：15315324
> 
> 赞同：1
> 
> 时间：2013-03-09T20:06:03.647
> 
> 标签：java, cassandra, hector

我已经包含了在 hector-core-1.1-2 文件夹中找到的所有 jar。有没有我没有包括的其他罐子。我尝试过的事情。1) 清除 netbeans 缓存 2) 下载 org.apache.xbean.finder.archive.Archive.jar 并将其包含在我的路径中，只是为了有另一个异常，比如`org.objectweb.asm.ClassReader.accept(Unknown Source).....`缺少一个类。3）重新安装Netbeans。我认为这是一件愚蠢的事情。

例外

```
java.lang.ClassNotFoundException: org.apache.xbean.finder.archive.Archive
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
at me.prettyprint.hom.CassandraPersistenceProvider.createScanner(CassandraPersistenceProvider.java:55)
at me.prettyprint.hom.CassandraPersistenceProvider.createContainerEntityManagerFactory(CassandraPersistenceProvider.java:49)
at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:206)
at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:120)
at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233) 
```

我想我的问题是，我需要下载什么罐子才能使用 hector 和 hector 对象映射器从 netbeans 连接到 cassandra？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:18:11.790

您需要添加`xbean-finder.jar`到您的项目中。

但是为了防止将来出现此类问题，我建议使用特殊的搜索引擎，例如[http://search.maven.org](http://search.maven.org)。它是搜索必要的 jar 文件、maven 的依赖项、源代码、javadocs 等非常有用的资源。

PS 搜索您的案例的字符串：

[http://search.maven.org/#search|ga|1|fc%3Aorg.apache.xbean.finder.archive.Archive](http://search.maven.org/#search|ga|1|fc%3Aorg.apache.xbean.finder.archive.Archive)

# go - 存储和检索接口的字节表示

> ID：15315329
> 
> 赞同：1
> 
> 时间：2013-03-09T20:06:32.287
> 
> 标签：go, byte, slice

我需要存储和检索 interface{} 值的字节表示。为了澄清，我不是试图存储打包到一个切片中的基础值，无论它们的大小如何，而是寻找一种方法来存储指向所述值的指针。

我不能只是去的原因`type MyType interface{}; var arr []MyType`是因为我在这个数组中打包了非均匀数量的其他字节。

为了实现这一点，我正在查看反射和不安全包，并且我看到`UnsafeAddr`了返回指针之类的方法。我可以使用存储该指针，然后稍后将其解码回我的 interface{} 值吗？

我看到的另一个函数是`InterfaceData`返回一个 2 字节数组表示，但是有什么方法可以再次将其转换回接口值？

我的高级目标是这样的：

```
// store the pointer to dataIn in the slice b
func putPtr(b []byte, dataIn interface{}) { ... }

// return the pointed to interface value from within b
func getInter(b []byte) interface{} { ... } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T20:36:35.873

无论您出于何种原因，都可以保证在一般情况下不起作用。一旦您从垃圾收集器 (GC) 意识中隐藏了一个指针，然后通过任何可能的技巧重新实现它，它（指针）可能不再有效。这是 GC 工作原理的全部原理。

为了绕过这个故障，必须保持指针对其他地方的 GC 可见，它必须保持可访问，以便 GC 不会在任何（不可预测的）时刻收集它。

但是，如果一个人具有可用的指针的正常且可访问的表示形式，那么首先确实不需要任何其他（例如以 [] 字节编码）表示形式

# ruby-on-rails-3.2 - Rails - 如何启动我的数据库和关系

> ID：15315338
> 
> 赞同：0
> 
> 时间：2013-03-09T20:07:05.380
> 
> 标签：ruby-on-rails-3.2

我试图制作一个简单的应用程序来注册家庭。[我先看这里](https://stackoverflow.com/questions/13614063/rails-belongs-to-multiple-methods)，但我没有找到答案。这是我的问题：

我有 3 个表：我正在尝试连接的父母、孩子和家庭。父母有一些字符串（姓名，地址......），孩子有（姓名，年龄，过敏......）。一个家庭由 2 个父母和 0 个或多个孩子组成，还有一些额外的列（紧急号码......）

我的问题是：我应该如何编写家庭表才能将 2 个不同的父母与他们的 parent_id 和多个孩子联系起来？我应该为父母创建 2 列并设置外键。我应该为孩子们创建很多列吗？有自动调整解决方案吗？

我正在考虑制作一些额外的表格，例如 children_list 和 parents_list 并将它们与家人联系起来。

如果你有一些关于这种情况的文档，我会很感激阅读它。

谢谢。

编辑 ：

我尝试了一些事情，我认为数据库不是问题。家庭表是具有多个列的联合表，我使用许多通过关联来链接父母和孩子。当我在家庭视图表单中选择许多父母/孩子时，我需要找到一种添加新行的方法，否则应用程序停止，因为我尝试使用两个不同的值设置两倍的 parent_id 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:20:08.287

最后：

我在[railscast](http://railscasts.com/episodes/196-nested-model-form-part-1?view=comments)找到我的答案。这是我所做的：

*   家庭餐桌
*   带有 family_id 列的父母表
*   带有 family_id 列的子表

在模型中：

*   家庭有_many 父母和孩子，得到了 attr_accessible :parents_attributes （和孩子），得到了accepts_nested_attributes_for :parents, :children
*   孩子和父母属于_家庭

现在我可以设置我的家庭视图来询问父母和孩子的属性，它会填写正确的表格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:29:57.550

您是否考虑过使用祖先宝石。Rails 不支持开箱即用的多表继承。你必须实现你自己的。最好使用单表继承。指向上述宝石的链接如下。我已经广泛使用了这个宝石。

[https://github.com/stefankroes/ancestry](https://github.com/stefankroes/ancestry)

这是一个链接，详细解释了您的上述问题

[多表继承与 rails 3](https://stackoverflow.com/questions/5022802/multi-table-inheritance-with-rails-3)

# ms-access - 从 Microsoft Access 2013 中的不同列选择生成 ID

> ID：15315343
> 
> 赞同：0
> 
> 时间：2013-03-09T20:07:37.043
> 
> 标签：ms-access

所以我正在为我父亲的公司建立一个数据库，遗憾的是，当我们检查访问权限时，我在课堂上并没有特别注意。我父亲已经向我解释了他的旧数据库并想要类似的东西。他想要的这些功能之一是能够选择不同的选项（比如说从 5 个不同的列中），然后根据他所做的选择创建一个 ID。因此，如果我要向数据库中添加比萨饼并且我想要：

1.  薄壳
2.  奶酪
3.  火腿
4.  培根
5.  意大利辣香肠

然后生成的 ID 看起来像：“TCCHBP”

我不希望被勺子喂食，老实说，我通常很擅长在网上找到我需要的东西，但遗憾的是我无法挖掘任何教程。如果有人能指出我正确的方向或发布教程链接，将不胜感激。

感谢 ypu 抽出时间阅读和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:50:32.553

在 Access_2013 中，如果“选项”确实只是表中的“是/否”字段，那么对于“代码”，您可以简单地创建一个计算字段，如下所示：

![显示计算字段的表定义](../Images/9664d690057ae1fb49d639ef71853b01.png)

# javacard - 如何在 Java Card 中将整数转换为二进制字符？

> ID：15315344
> 
> 赞同：2
> 
> 时间：2013-03-09T20:07:37.853
> 
> 标签：javacard

如何在 Java Card 中将字节数组转换为二进制数组以获得结果`10101010`？

```
RandomData random_data =
  RandomData.getInstance(RandomData.ALG_SECURE_RANDOM);
// the seed is supplied in the byte array seed
random_data.setSeed(sseed, seed_offset, seed_length);
// a random number is written into the byte array random_num
random_data.generateData(random_num, random_num_offset,
                         random_num_length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:24:31.837

字节数组已经是一组位的二进制表示（就像一个短数组一样）。位数组的唯一区别是您将始终以 8 个为一组获得位，并且如果不进行一些按位操作，您将无法单独寻址每个位。

通常，a `String`（一段文本）中的位表示不在卡片上执行。它是在比特传输到终端上的应用程序之后执行的。您可能已经注意到 Java Card classic 上没有该`String`类型。

* * *

根据要求，一些方法可以将 bitjes（荷兰语中的位）转换为 Java Card 的字符。谢谢你的谜题。

```
/**
 * Converts an array of bytes, used as a container for bits, into an ASCII
 * representation of those bits.
 * 
 * @param in
 *            the input buffer
 * @param inOffset
 *            the offset of the bits in the input buffer
 * @param bitSize
 *            the number of bits in the input buffer
 * @param out
 *            the output buffer that will contain the ASCII string
 * @param outOffset
 *            the offset of the first digit in the output buffer
 * @return the offset directly after the last ASCII digit
 */
public static final short toBitjes(final byte[] in, short inOffset,
        final short bitSize, final byte[] out, short outOffset) {
    for (short i = 0; i < bitSize; i++) {
        final byte currentByte = in[inOffset + i / BYTE_SIZE];
        out[outOffset++] = (byte) (0x30 + ( (currentByte >> (7 - (i % BYTE_SIZE))) & 1 ) );
    }
    return outOffset;
} 
```

当然，随意重命名“bitjes”。

* * *

用法：

```
// buffer containing 9 bits valued 10011001.1 in middle of buffer
final byte[] inBuffer = new byte[] { 0x00, (byte) 0x99, (byte) 0x80, 0x00 };
final short bitSize = 9;
// bit array starting at byte 1 
final short inOffset = 1;

// or use JCSystem#makeTransientByteArray()
final byte[] outBuffer = new byte[40];
// ASCII start at offset 2
final short outOffset = 2;

// newOffset will be 2 + 9 = 11
short newOffset = toBitjes(inBuffer, inOffset, bitSize, outBuffer, outOffset); 
```

# php - 如何序列化 PHP SplHeap 以存储到 memcached

> ID：15315346
> 
> 赞同：1
> 
> 时间：2013-03-09T20:07:43.513
> 
> 标签：php, memcached, serializable, spl

我遇到了一个问题，我想将一个 SplHeap（或任何其他类型的类似 Spl 堆的对象，例如 SplPriorityQueue、SplMinHeap、SplMaxHeap）存储到我的 Memcached 的位置以便以后使用它们。

我注意到在没有序列化的情况下这样做会导致丢失存储在堆中的数据。

对这个问题有什么建议吗？或者如何序列化 PHP SplHeap？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:59:27.463

The SPL comes with a Serializable Interface. So your SplHeap class should implement this interface like the following code.

```
class MySplHeap extends SplMinHeap implements Serializable {

    public function compare(ArrayObject $a, ArrayObject $b) {
        return ($b->member - $a->member);
    }

    public function serialize() {
        $objects = new ArrayObject();
        $heap = clone $this;

        foreach ($heap as $node) {
            $objects[] = $node;
        }

        return serialize($objects);
    }

    public function unserialize($serializedData) {
        if (!is_object($serializedData) && gettype($serializedData) == 'object') {
            $serializedData = serialize($serializedData);
        }

        $objects = unserialize($serializedData);

        foreach ($objects as $node) {
            $this->insert($node);
        }
    } 
```

}

The Serializable interface implements the serialize() and unserialize() methods. So you can declare special functionality in your splheap class.

# google-maps - Google Maps API 获取公交路线

> ID：15315347
> 
> 赞同：8
> 
> 时间：2013-03-09T20:08:02.967
> 
> 标签：google-maps, google-maps-api-3

这是我的情况，也许有人可以给出解决方案的提示，或者指出它不可能：

我的巴士路线只是由巴士经过的街道定义，如下所示：

```
W 49th St,
10th Ave,
W 65th St,
79th Street Transverse Rd,
5th Ave,
... 
```

我想获取这些数据并在 Google 地图中创建可视化路线。我之前对 Gmaps 有一点经验，但只使用网络服务来获取点之间的方向。

在这种情况下，以这种方式使用的网络服务是无用的，因为如果考虑到每个点（A、B、C）都是一条街道，GMaps 会创建一条从“W 49th St”到“10th Ave 中间”的路线” 然后到“W 65th St”的中间，等等。

我想如果有办法通过导航地图并在给定一组街道的情况下寻找最短路径来获取地图数据并自己创建路线，我可以做到这一点。

我可以从谷歌地图获得这种信息，或者更容易做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T21:08:00.003

从 Google Maps API v3 获取公交路线信息的唯一真正选择是使用模式设置为[TRANSIT的](https://developers.google.com/maps/documentation/javascript/directions#TravelModes)[方向服务](https://developers.google.com/maps/documentation/javascript/directions)。它是否返回数据将取决于您在哪个城市寻找该信息。

[交通路线示例](http://www.geocodezip.com/v3_GoogleEx_directions-travel-modesD.html?mode=transit&waypt=n)

“手动”选项是使用路线服务来获取路线上实际停靠点之间的路线 [使用模式 DRIVING]，您当前的列表不够详细，无法做到这一点，但如果您有停靠点的坐标，它可以完成（或者您可以尝试使用可拖动的方向捕获路线）。

使用[多个方向请求的](http://www.geocodezip.com/v3_directions_multipleWayPts_CustomMrkrsB.html)[示例](http://www.geocodezip.com/v3_directions_multipleWayPts_CustomMrkrs_busRoute.html)

# regex - 如何使用 bash 在 } 之后查找空行

> ID：15315351
> 
> 赞同：0
> 
> 时间：2013-03-09T20:08:24.857
> 
> 标签：regex, bash, scripting, grep, find

我正在尝试使用 bash 脚本来识别我的代码中在关闭后有多个空行的位置`}`

我可以使用此脚本搜索和查找文本：

```
TAGS="text"
find "${SRCROOT}" \( -name "*.h" -or -name "*.m" \) -print0 | xargs -0 egrep --with-filename --line-number --only-matching "\$match = 1 if s/($TAGS)/ error: \$1/; END { exit \$match; }" 
```

但我不确定如何搜索出现在结束`}`字符之后的空行。我需要某种正则表达式吗？

有人可以帮我把这些碎片拼在一起吗？

编辑

澄清一下，仅查找 } 后有多个空行的位置实际上非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:26:00.713

试试这个单行：

```
 awk '/}/{f=1;next} $0 && f{f=0;next} !$0 && f{print "empty line found:"NR}' file 
```

举个例子：

```
kent$  nl -ba file
     1  foo
     2  bar}
     3  
     4  foo2
     5  
     6  
     7  bar2{
     8  
     9  }
    10  
    11  
    12  
    13  eof

kent$  awk '/}/{f=1;next} $0 && f{f=0;next} !$0 && f{print "empty line found:"NR}' file
empty line found:3
empty line found:10
empty line found:11
empty line found:12 
```

**编辑**

新更新的问题又脏又快：

```
 awk '/}/{f=1;m=0;next} $0 && f{f=0;m=0;next} !$0 && f &&!m{m=1;next} m{print "empty line found:"NR}' file 
```

新测试：

```
kent$  nl -ba file                                                                                              
     1  foo
     2  bar}
     3  
     4  foo2
     5  
     6  
     7  bar2{
     8  
     9  }
    10  
    11  
    12  
    13  blah{}
    14  
    15  
    16  
    17  
    18  eof

kent$  awk '/}/{f=1;m=0;next} $0 && f{f=0;m=0;next} !$0 && f &&!m{m=1;next} m{print "empty line found:"NR}' file
empty line found:11
empty line found:12
empty line found:15
empty line found:16
empty line found:17 
```

# php - 使用 PHP Text DB API 时如何从 select 语句中获取数据？

> ID：15315352
> 
> 赞同：0
> 
> 时间：2013-03-09T20:08:29.743
> 
> 标签：php, html, sql, database

我从[这里](http://www.c-worker.ch/txtdbapi/index_eng.php#Lizenz)使用这个 php 文本数据库 api ，但我遇到了 select 语句的问题。我已经创建了一个数据库和一个表，我可以成功地使用

```
$db->executeQuery("CREATE TABLE people (id inc DEFAULT 0, phone_number int)");
$db->executeQuery("INSERT INTO people VALUES ('123')"); 
```

但是当我尝试选择语句时

```
echo $db->executeQuery("SELECT * FROM people"); 
```

没发生什么事。有谁知道为什么我无法检索任何东西？

另外，如何创建自动递增列？当前，`id`对于每个插入，该列的值都为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:29:41.533

你有没有费心看说明书？本页告诉您如何使用 SELECT 查询检索数据：[教程 1：使用 txt-db-api](http://www.c-worker.ch/txtdbapi/manual_html_eng/examples/tut1.html)

# sorting - 如何使用 SimplePie sort_items()？获取静态方法错误

> ID：15315353
> 
> 赞同：0
> 
> 时间：2013-03-09T20:08:33.363
> 
> 标签：sorting, simplepie

我正在尝试对单个提要进行 alpha 排序。当我使用 SimplePie 的 sort_items() 时，出现以下错误：

*致命错误：不能在类 SimplePie_Custom_Sort 中使静态方法 SimplePie::sort_items() 非静态...*

作为测试，我从 SimplePie 的文档中复制了示例代码并自行运行，但同样的错误仍然存​​在。 [http://simplepie.org/wiki/reference/simplepie/sort_items](http://simplepie.org/wiki/reference/simplepie/sort_items)

我使用的是 PHP 5.2.17，兼容性测试中一切正常。我已经尝试过 SimplePie 1.3 和 1.3.1。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:30:43.583

您的`SimplePie_Custom_Sort`类需要声明`sort_items()`为静态：

```
public static function sort_items($a, $b) 
```

这是由于对 PHP 5 的支持，SimplePie 1.3 从 1.2 发生了变化。

# iphone - iphone UI 5.1 和 6.1 模拟器的区别

> ID：15315356
> 
> 赞同：1
> 
> 时间：2013-03-09T20:08:50.520
> 
> 标签：iphone, simulator, ios5.1, ios6.1

我为 iphone 做了一个简单的计算器，当我用 iPhone 5.1 和 6.1 模拟器运行它时，我意识到了很大的不同。

这是我用[iPhone 5.1 模拟器](http://www.eklsofttrade.com/lk/images/ios/calc_ui_20120317.JPG)的计算器，这里是[iPhone 6.1 模拟器](http://www.eklsofttrade.com/lk/images/ios/Calc-iPhone6_1Sim.png)的程序。

我没有为 UI 使用图像。所有按钮效果（例如阴影）都是以编程方式制作的。

会出现什么问题，我该如何解决？

我不知道这个效果取决于今天我将XCode升级到4.6版。

我在 2011 年中期在 Mac Mini 上使用 Mac OSX 10.7 Lion。

提前致谢。

# objective-c - 共享在 iOS iPad 应用程序中创建的数据

> ID：15315365
> 
> 赞同：0
> 
> 时间：2013-03-09T20:09:33.417
> 
> 标签：objective-c, ios6

我已经进行了大量的搜索，但还没有看到对这个问题的详细回复——如果我错过了一些东西，我深表歉意！

我有一种情况，我正在创建一个 iPad (iOS6) 应用程序，该应用程序允许用户（称为内容创建用户）生成各种（相对轻量级，但包括照片）类型的内容。

我希望其他用户能够以非设备特定的方式“订阅”由内容创建用户创建的内容（他们可以获得电子邮件警报/通知等，具体取决于他们的首选设备，例如 web / apple设备）。他们只需要读取这些数据。

目前，内容创建用户/应用程序正在本地将内容存储为 CoreData 对象。我的理解是，即使我将这些 CoreData 对象移至 iCloud，也不可能有选择地与不同 iTunes 帐户上的其他用户共享数据（尤其是那些通过网络访问数据的用户）。

我正在考虑的方法是：

由于内容是由内容创建用户创建的，所以将其保存到一些全局通用数据存储中（例如，在 webhost 上运行的 mySQL）。然后可以使用一个单独的过程来监视此数据存储的更新并将相关通知发送给订阅用户，然后订阅用户可以从数据存储中获取相关数据。如果我采用这种方法，是否有任何现成的解决方案可以将 CoreData 对象同步到在 webhost 或类似的东西上运行的非 Apple 特定类型的数据存储？在订阅用户拥有 i-devices 的情况下，还有一些事情朝着另一个方向发展，因此从通用数据存储在他们的设备上生成数据会很有用？理想情况下，我希望尽可能少地担心保持内容创建用户 CoreData 中的数据与通用数据存储同步，

我应该考虑以上更好（或更简单）的方法吗？非常感谢任何建议/提示！

谢谢，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:14:22.943

对于您所描述的共享数据，我推荐 Parse.com 服务（[http://www.parse.com](http://www.parse.com)）。它是免费的，并允许您创建可以被其他人访问的对象，只要获得正确的授权。

[这里](https://github.com/adelevie/parse_resource)有一个可爱的 iOS 服务包装器。他们的 parse.com 站点也有很好的文档。

我使用它来允许用户将数据存储在一个地方，但可以从任何设备访问它。我认为这在你的情况下会很好用。

# java - NanoHTTPD 不显示其他页面

> ID：15315367
> 
> 赞同：0
> 
> 时间：2013-03-09T20:09:38.743
> 
> 标签：java, android, nanohttpd

我正在使用 NanoHTTPD 从 Android 本地托管网页。

我的问题是服务器响应我网站的索引页面，但我不知道如何导航到过去的任何页面，因为它总是会响应索引页面。

任何人都有任何教程，我正在努力寻找任何东西。谢谢 ：）

```
private class MyHTTPD extends NanoHTTPD {
    public MyHTTPD() throws IOException {
        super(PORT, null);
    }

    @Override
    public Response serve(String uri, String method, Properties header, Properties parms, Properties files) {
        Log.d("response", "URI:" + uri + " method: " + method + " header: " + header + " parms: " + parms + " files: " + files);
        final StringBuilder buf = new StringBuilder();
        for (Entry<Object, Object> kv : header.entrySet())
            buf.append(kv.getKey() + " : " + kv.getValue() + "\n");
        handler.post(new Runnable() {
            @Override
            public void run() {
                hello.setText(buf);
            }
        });
         //load the index page
        String html = null;
        InputStream is = getClass().getResourceAsStream("/com/me/pages/index.html");
        byte[] b;
        try {
            b = new byte[is.available()];
            is.read(b);
            html = new String(b);
        } catch (IOException e) { // TODO Auto-generated catch block
            e.printStackTrace();
        }

                  //return index as response
        return new NanoHTTPD.Response(HTTP_OK, MIME_HTML, html);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:52:57.250

> NanoHTTPD not showing other pages

Of course, it won't show the others, as your *petit* `serve` function just serves the `/com/me/pages/index.html` file. For the other files (pages as you say), one needs to map the URI to the corresponding file to be served.

For examples, you could follow the development of the NanoHTTPD on github by different programmers. The network graph is here, and one particular fork which could be helpful to your case (serving multiple pages) is [here](https://github.com/NanoHttpd/nanohttpd).

# java - Java反射获取所有私有字段

> ID：15315368
> 
> 赞同：80
> 
> 时间：2013-03-09T20:09:40.607
> 
> 标签：java, reflection, field, private

我想知道有没有办法在java中获取某个类的所有私有字段及其类型。

例如，假设我有一堂课

```
class SomeClass {
    private String aaa;
    private SomeOtherClass bbb;
    private double ccc;
} 
```

现在我想获取类的所有私有字段（`aaa`, `bbb`, `ccc`）`SomeClass`（不知道所有字段的名称）并检查它们的类型。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-03-09T20:18:11.947

`getDeclaredFields()`可以通过的方法获取所有字段`Class`。然后您必须检查每个字段的修饰符以找到私有字段：

```
List<Field> privateFields = new ArrayList<>();
Field[] allFields = SomeClass.class.getDeclaredFields();
for (Field field : allFields) {
    if (Modifier.isPrivate(field.getModifiers())) {
        privateFields.add(field);
    }
} 
```

请注意，`getDeclaredFields()`不会返回继承的字段。

最终，您可以使用[Field.getType()](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#getType%28%29)方法获得字段的类型。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-09T20:19:28.000

您可以使用`Modifier`来确定一个字段是否是私有的。请务必使用该`getDeclaredFields`方法确保您从类中检索私有字段，调用`getFields`只会返回公共字段。

```
public class SomeClass {

    private String aaa;
    private Date date;
    private double ccc;
    public int notPrivate;

    public static void main(String[] args) {
        List<Field> fields = getPrivateFields(SomeClass.class);
        for(Field field: fields){
            System.out.println(field.getName());
        }
    }

    public static List<Field> getPrivateFields(Class<?> theClass){
        List<Field> privateFields = new ArrayList<Field>();

        Field[] fields = theClass.getDeclaredFields();

        for(Field field:fields){
            if(Modifier.isPrivate(field.getModifiers())){
                privateFields.add(field);
            }
        }
        return privateFields;
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-25T09:22:31.137

[`FieldUtils`](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/FieldUtils.html)从 apache commons-lang3尝试：

```
FieldUtils.getAllFieldsList(Class<?> cls) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-10-26T08:43:02.167

使用 Java 8：

```
Field[] fields = String.class.getDeclaredFields();
List<Field> privateFieldList = Arrays.asList(fields).stream().filter(field -> Modifier.isPrivate(field.getModifiers())).collect(
        Collectors.toList()); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-04-12T09:09:56.577

## 检查字段是否为私有

您可以使用[Modifier.isPrivate](https://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Modifier.html#isPrivate%28int%29)**过滤字段**：

```
import java.lang.reflect.Field;
import java.lang.reflect.Modifier;
// ...
Field field = null;
// retrieve the field in some way
// ...
Modifier.isPrivate(field.getModifiers()) 
```

在单个`Field`对象上，`true`如果该字段是则返回`private`

* * *

## 收集一个类的所有字段

要**收集所有字段，请**使用：

1）如果您只需要类的字段而不需要从类层次结构中获取的字段，您可以简单地使用：

```
Field[] fields = SomeClass.class.getDeclaredFields(); 
```

2）如果您不想重新发明轮子并获得类层次结构的所有字段，您可以依赖[Apache Commons Lang](http://commons.apache.org/proper/commons-lang/)版本 3.2+，它提供[`FieldUtils.getAllFieldsList`](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/FieldUtils.html#getAllFieldsList(java.lang.Class))：

```
import java.lang.reflect.Field;
import java.util.AbstractCollection;
import java.util.AbstractList;
import java.util.AbstractSequentialList;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;

import org.apache.commons.lang3.reflect.FieldUtils;
import org.junit.Assert;
import org.junit.Test;

public class FieldUtilsTest {

    @Test
    public void testGetAllFieldsList() {

        // Get all fields in this class and all of its parents
        final List<Field> allFields = FieldUtils.getAllFieldsList(LinkedList.class);

        // Get the fields form each individual class in the type's hierarchy
        final List<Field> allFieldsClass = Arrays.asList(LinkedList.class.getFields());
        final List<Field> allFieldsParent = Arrays.asList(AbstractSequentialList.class.getFields());
        final List<Field> allFieldsParentsParent = Arrays.asList(AbstractList.class.getFields());
        final List<Field> allFieldsParentsParentsParent = Arrays.asList(AbstractCollection.class.getFields());

        // Test that `getAllFieldsList` did truly get all of the fields of the the class and all its parents 
        Assert.assertTrue(allFields.containsAll(allFieldsClass));
        Assert.assertTrue(allFields.containsAll(allFieldsParent));
        Assert.assertTrue(allFields.containsAll(allFieldsParentsParent));
        Assert.assertTrue(allFields.containsAll(allFieldsParentsParentsParent));
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-09T20:14:13.230

你的意思是喜欢

```
Field[] fields = SomeClass.class.getDeclaredFields(); 
```

# machine-learning - 贝叶斯设置中 l2 正则化的参数形式应该是什么？

> ID：15315370
> 
> 赞同：0
> 
> 时间：2013-03-09T20:09:54.990
> 
> 标签：machine-learning, bayesian, regularized

在参数估计的贝叶斯设置中，为了执行 l2 正则化，先验分布的参数形式应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:00:21.483

L2 正则化等价于高斯先验。

例如，请参阅 Jason Rennie 的[On L2-norm Regularization and the Gaussian Prior (2003)](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.113.1049)。

（以供将来参考，这种问题可能应该去[http://stats.stackexchange.com](http://stats.stackexchange.com) ......我看到你也发布了这个。不要那样做。）

# java - 在 Java 性能方面处理 AI 的最佳方法。（单独的线程与单个更新线程）

> ID：15315371
> 
> 赞同：0
> 
> 时间：2013-03-09T20:09:57.213
> 
> 标签：java, multithreading, game-ai

我正在用Java制作游戏。游戏目前分为三个线程（一个生成器线程、一个更新线程和一个绘制线程） 生成器生成一个向玩家移动的敌人。大约 800 次生成后，游戏开始滞后（这在某种程度上是可以理解的）。问题是我应该为每个 Ai 创建单独的线程，还是应该在更新线程中一次更新它们（这是当前的情况）。哪一个会产生更好的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:16:48.437

我建议您的关键线程少于 CPUS。如果您有 800 个 CPU，请使用大量线程。如果没有，我希望更小的线程池会更快。

你做了多少 CPU 和内存分析？与使用多线程相比，您可以通过性能分析获得更大的速度提升。

# raspberry-pi - 通过 HDMI 通过命令行发送 CEC 命令

> ID：15315372
> 
> 赞同：7
> 
> 时间：2013-03-09T20:10:08.610
> 
> 标签：raspberry-pi, television, hdmi

我的总体计划是能够从我的树莓派发送 CEC 命令来执行诸如打开/关闭电视以及连接到电视的其他设备之类的操作。然后我将添加语音识别来发送这些命令……那是另一天。我已经阅读了 CEC，但从我收集的信息来看，如果没有 CEC usb 适配器，您似乎无法直接通过命令行发送 CEC 命令？我已经在我的 pi 上安装了 cec-client 和 libCEC 库，但是当我运行 cec-client -l 时，它没有显示任何设备。

我的问题是，如何在没有适配器的情况下通过命令行从 pi 向我的电视发送 CEC 命令？我是否缺少有关 CEC 的一些基本要素？

**更新**

除了下面的帖子之外，还有一个在 stackoverflow 的 PI 部分中询问的链接，其中包含我在 .bashrc 中放置的更多 CEC 命令来打开/关闭电视并更改输入

[https://raspberrypi.stackexchange.com/questions/5345/raspmbc-send-cec-commands-without-cec-adapter](https://raspberrypi.stackexchange.com/questions/5345/raspmbc-send-cec-commands-without-cec-adapter)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-07T13:19:53.387

您可以将命令通过管道传输到 cec-client 二进制文件

```
echo "on 0"      | cec-client -s # turn on the television
echo "standby 0" | cec-client -s # turn it off (standby) 
```

为了完整起见，这些是您可以做的其他一些事情

列出连接的设备

```
tv# cec-client -l
libCEC version: 3.1.0, git revision: libcec-3.1.0+5-6d68d21, compiled on Fri  8 Apr 15:44:58 UTC 2016 by nacho@tv on Linux 4.1.19-v7+ (armv7l), features: P8_USB, DRM, P8_detect, randr, RPi
Found devices: 1

device:              1
com port:            RPI
vendor id:           2708
product id:          1001
firmware version:    1
type:                Raspberry Pi 
```

检查所有可用的 CEC 命令

```
tv# echo h | cec-client -s -d 1
opening a connection to the CEC adapter...

================================================================================
Available commands:

[tx] {bytes}              transfer bytes over the CEC line.
[txn] {bytes}             transfer bytes but don't wait for transmission ACK.
[on] {address}            power on the device with the given logical address.
[standby] {address}       put the device with the given address in standby mode.
[la] {logical address}    change the logical address of the CEC adapter.
[p] {device} {port}       change the HDMI port number of the CEC adapter.
[pa] {physical address}   change the physical address of the CEC adapter.
[as]                      make the CEC adapter the active source.
[is]                      mark the CEC adapter as inactive source.
[osd] {addr} {string}     set OSD message on the specified device.
[ver] {addr}              get the CEC version of the specified device.
[ven] {addr}              get the vendor ID of the specified device.
[lang] {addr}             get the menu language of the specified device.
[pow] {addr}              get the power status of the specified device.
[name] {addr}             get the OSD name of the specified device.
[poll] {addr}             poll the specified device.
[lad]                     lists active devices on the bus
[ad] {addr}               checks whether the specified device is active.
[at] {type}               checks whether the specified device type is active.
[sp] {addr}               makes the specified physical address active.
[spl] {addr}              makes the specified logical address active.
[volup]                   send a volume up command to the amp if present
[voldown]                 send a volume down command to the amp if present
[mute]                    send a mute/unmute command to the amp if present
[self]                    show the list of addresses controlled by libCEC
[scan]                    scan the CEC bus and display device info
[mon] {1|0}               enable or disable CEC bus monitoring.
[log] {1 - 31}            change the log level. see cectypes.h for values.
[ping]                    send a ping command to the CEC adapter.
[bl]                      to let the adapter enter the bootloader, to upgrade
                          the flash rom.
[r]                       reconnect to the CEC adapter.
[h] or [help]             show this help.
[q] or [quit]             to quit the CEC test client and switch off all
                          connected CEC devices.
================================================================================ 
```

摘自

[https://ownyourbits.com/2017/02/02/control-your-raspberry-pi-with-your-tv-remote/](https://ownyourbits.com/2017/02/02/control-your-raspberry-pi-with-your-tv-remote/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-01T08:22:28.133

最新版本的 libcec 将 Raspberry Pi 硬件识别为 CEC 适配器。
通过命令行发送控制命令，基本上：

```
echo "on 0" | cec-client -s 
```

将打开设备 0（即您的电视）
查看 cec-client 交互式 shell 以获取更复杂的命令

# regex - emacs lisp regexp中的双管道字符

> ID：15315373
> 
> 赞同：0
> 
> 时间：2013-03-09T20:10:13.240
> 
> 标签：regex, emacs, elisp

我试图理解这个正则表达式我很难理解这种模式：

```
\\(\\||.+?\\) 
```

or 一开始是做什么的？为什么是两个竖线字符？

它是正则表达式的一部分，旨在匹配 Paul Sexton 的 org-drill 中括号中的任何内容（用于完形填空删除）。

```
"\\(\\[[[:cntrl:][:graph:][:space:]]*?\\)\\(\\||.+?\\)\\(\\]\\)" 
```

非常感谢你的帮助！

约沙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:23:01.093

第一个管道字符被转义，因此它成为交替的正则表达式字符。第二个管道字符没有转义，因此它表示要匹配的文本中的文字管道字符。总体而言，您提到的第一个正则表达式的意思是“不匹配任何内容，或者一个文字管道字符后跟一个或多个任何其他字符，非贪婪匹配。”

# java - PlayN：自动重新加载/刷新 Java 应用程序

> ID：15315375
> 
> 赞同：0
> 
> 时间：2013-03-09T20:10:16.307
> 
> 标签：java, playn

我在此视频[https://www.youtube.com/watch?feature=player_detailpage&v=F_sbusEUz5w#t=1462s](https://www.youtube.com/watch?feature=player_detailpage&v=F_sbusEUz5w#t=1462s) (24:15) 上看到，可以通过更改源来自动重新加载 Java 应用程序。但这对我不起作用，我必须关闭并再次启动该应用程序。

谢谢你的帮助。

# asp.net - ASP.net ObjectSource 参数

> ID：15315376
> 
> 赞同：1
> 
> 时间：2013-03-09T20:10:19.373
> 
> 标签：asp.net, objectdatasource

我有一个带有来自查询字符串的参数的 ObjectDataSource。我收到以下错误：

`Value was either too large or too small for an Int32.`

我相信查询字符串对于它的数据类型来说可能太长了。InfoSheetID 是从数据库中填充的。我可以采取或修改 ObjectDataSource 以防止错误的另一种选择吗？

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
OldValuesParameterFormatString="original_{0}" 
        SelectMethod="GetInfoByInfoID" 
        TypeName="BLL.InfoViewBLL">
        <SelectParameters>
            <asp:QueryStringParameter DefaultValue="2148663911" Name="InfoSheetID" 
                QueryStringField="InfoSheetID" Type="Int32" />
        </SelectParameters>
    </asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:15:18.127

Int32.MaxValue 为 2'147'483'647，低于您使用的 2'148'663'911。

您可以将类型更改为 Int64 或重构代码以避免使用如此大的值。

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
OldValuesParameterFormatString="original_{0}" 
        SelectMethod="GetInfoByInfoID" 
        TypeName="BLL.InfoViewBLL">
        <SelectParameters>
            <asp:QueryStringParameter DefaultValue="2148663911" Name="InfoSheetID" 
                                                    ^^^^^^^^^^
                QueryStringField="InfoSheetID" Type="Int64" />
                                                     ^^^^^
        </SelectParameters>
    </asp:ObjectDataSource> 
```

# c - 使用 strcat 时出现分段错误（最小示例）

> ID：15315377
> 
> 赞同：2
> 
> 时间：2013-03-09T20:10:19.600
> 
> 标签：c

我想在字符串的末尾添加“$”，我已经看到我可以使用`strcat()`并且我编写了以下代码：

```
char *word = "1000";
const char *dollar = "$";
strcat(word,dollar);
printf("%s", word); 
```

它可以编译，但是当我运行这个小程序时，我得到了`Segmentation fault (core dumped)`. 错误在哪里？

我知道 strcat 是： `char *strcat(char *dest, const char *src);`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T20:12:03.940

问题是您正在尝试连接到文字字符串。文字字符串是恒定的，不能更改。

您需要将“目标”创建为一个数组，其中包含足够的字符以适合您的连接：

```
char word[16] = "1000"; 
```

上面数组中的数字 16 是我任意选择的。它必须至少足够大以容纳您放入其中的字符串，加上您连接的字符串的长度，再加上终止`'\0'`字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T20:12:58.080

> 错误在哪里？

你的意思**是****错误**在哪里，对吧？

第一个是字符串文字是只读的。您不能只`strcat()`使用字符串常量，例如`"1000"`.

第二个是你最后没有足够的空间放置美元符号。你需要的是这样的：

```
// 6 characters: '1', '0', '0', '0', '$' and the terminating NUL
char word[6] = "1000";
strcat(word, "$"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:17:43.240

如果我没记错的话，这应该有效：

```
char word[255] = "1000"; //Creating an array with 255 elements
const char dollar = '$'; //dollar is a single constant character '$'
word[4] = dollar; //the fourth element of the array, right after the 1000, becomes $

printf("%s", word); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T20:18:05.097

使它成为一个字符数组。

```
char example[100];
strcat (example,"$"); 
```

# vector - 在矩阵 Eigen 中的零位置添加行和列

> ID：15315378
> 
> 赞同：4
> 
> 时间：2013-03-09T20:10:25.097
> 
> 标签：vector, matrix, eigen

例如，我有矩阵：C(400,400)

我想用一个向量来增长这个矩阵：这个矩阵的行和列在矩阵的开始索引 0 处，例如：

矩阵 C：

```
 3 2 5 
 4 5 6
 7 8 20 
```

我的新矢量：25 5 6 8

结果 ：

```
 25 5 6 8
  5  3 2 5 
  6  4 5 6
  8  7 8 20 
```

Eigen 中最好的方法是什么？使用`.resize()`, 和`.set`? 感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:25:43.777

虽然我也会使用 Jitse 的方法，但为了给您另一种选择，这里有一个更详细的解决方案，并且可能会更好地显示零件的位置：

```
Eigen::MatrixXd newC(C.rows()+1, C.cols()+1);
newC.topRows<1>() = v.transpose();
newC.leftCols<1>() = v;
newC.bottomRightCorner(C.rows(),C.cols()) = C;
C.swap(newC) 
```

请注意，这会将左上角元素分配两次；如果你不想这样，用这个丑陋的替换第三行：

```
newC.topRows<1>().tail(v.size()-1) = v.transpose().tail(v.size()-1); 
```

最后说明为什么我们不使用`resize`: 它总是丢弃你的矩阵内容（即使在缩小矩阵时），除非元素的数量保持完全相同，即当你将`MxN`矩阵调整为 size时`(M*k)x(N/k)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T09:39:58.730

我能想到的最好的是：

```
Eigen::MatrixXd newC(C.rows()+1, C.cols()+1);
newC << v.transpose(), v.tail(v.size()-1), C;
C.swap(newC); 
```

这假设您的“新向量”作为列向量存储在`v`. `newC`在此片段之后不再需要该变量。

# c# - 增加允许服务加载的时间

> ID：15315382
> 
> 赞同：0
> 
> 时间：2013-03-09T20:11:18.940
> 
> 标签：c#, asp.net, wcf

我正在使用的服务太慢了，当我为其编写控制台应用程序时，加载大约需要 5 分钟。

我将它用作我的服务的一部分，因此当客户端调用它时，我的服务在完成使用其他服务之前超时。

有什么我可以做的客户端/服务器可以让它完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:19:04.430

WCF 具有超时配置选项。如果可能的话，弄清楚为什么其他服务需要这么长时间。

[https://stackoverflow.com/a/424386/1967405](https://stackoverflow.com/a/424386/1967405)

# python - 在 shell 中更改 PYTHONPATH

> ID：15315384
> 
> 赞同：7
> 
> 时间：2013-03-09T20:11:55.780
> 
> 标签：python, pythonpath

我是 Python 和 shell 脚本的全新用户，即使在谷歌搜索这个问题并将我的头撞在桌子上之后，我也遇到了死胡同。任何帮助表示赞赏！

我在通过 SSH 连接的 shell 上运行 Python 2.7.3；我下载了一些代码来运行一些程序/分析。当我执行初始程序时，出现以下错误：

```
 Traceback (most recent call last):
    File "./[script1].py", line 7, in <module>
    import [script1]
    File "[directory]/[script].py", line 22, in <module>
    import gdata.spreadsheet.service
    ImportError: No module named gdata.spreadsheet.service 
```

[脚本 1] 是指作为代码包的一部分出现在同一文件夹中的 python 脚本，它还调用了 Google Data python 包，我已将其下载到同一文件夹并进行了 gunzip、tar 解压，然后已安装（使用 ./configure 等）基于查找错误，我最好的猜测是这里的 PYTHONPATH 有问题，并且它没有找到 [script1].py 和 Gdata 文件夹，即使两者都在与我正在运行的脚本相同的目录。“Echo $PYTHONPATH”告诉我这是一个未定义的变量，还有一个空白的**初始化**.py 目录中的文件。该目录中的任何地方都没有包含单词“bash”或“bashrc”的文件。同样，我似乎找不到任何“sys.path”文件，尽管当我启动 Python 和 print(sys.path) 时，我得到了结果输出：

```
['', 
'/usr/lib/python2.7',
'/usr/lib/python2.7/plat-linux2',
'/usr/lib/python2.7/lib-tk',
'/usr/lib/python2.7/lib-old',
'/usr/lib/python2.7/lib-dynload',
'/usr/local/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages/PIL',
'/usr/lib/python2.7/dist-packages/gst-0.10',
'/usr/lib/python2.7/dist-packages/gtk-2.0',
'/usr/lib/pymodules/python2.7',
'/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-installer',
'/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol',
'/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode'] 
```

我也试过

```
export PYTHONPATH=[directory] 
```

在我的外壳中，但它会吐出“导出：找不到命令”。

请原谅所有这一切的新手-对此的任何帮助（无论我的怀疑是否正确，以及如何解决它们）将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T23:16:32.603

# Setting PYTHONPATH

By the output of the `export` command you tried, it looks like the shell you are using is not bash. [This post](https://stackoverflow.com/questions/1281546/what-shell-am-i-in) covers some ways on how to find out which shell you are on. After finding out your shell, you can find out how to set environment variables (PYTHONPATH) in that shell.

You might also try these to set the PYTHONPATH for the duration of running your script (the last one should work on (T)CSH):

```
PYTHONPATH=your_directory python script_name 
```

and

```
env PYTHONPATH=your_directory python script_name 
```

## Testing that the PYTHONPATH you set works

To see that PYTHONPATH really gets set and works within Python, instead of running the script like above with `python script_name`, use `python -c 'import os; print os.getenv("PYTHONPATH")'`. It should display the PYTHONPATH you just set.

Likewise, printing `sys.path` in Python interpreter should output the path in PYTHONPATH as one of the entries.

# If PYTHONPATH is set correctly

If you successfully set your PYTHONPATH and the problem persists, try running the Python interpreter from the path you have *gdata* in.

```
cd path_which_has_subdirectory_gdata
python 
```

In Python interpreter, try importing the gdata module:

```
import gdata 
```

If that works, try also importing the module that causes the `ImportError`:

```
import gdata.spreadsheet.service 
```

If these imports work from Python interpreter, there's probably something wrong with your [script1]. If not, try to confirm that gdata module really is where you think it is; the correct directory for the module should contain a file named `__init__.py` and PYTHONPATH should be set to point to the directory **above** the module in hierarchy.

# verilog - 比较两个无符号数并在门级

> ID：15315386
> 
> 赞同：1
> 
> 时间：2013-03-09T20:12:15.977
> 
> 标签：verilog

前几天学了verilog。

我对此有所了解，但不知道在比较门级的两个无符号 4 位数字时如何知道哪个更大。

你能给我一些关于算法的提示吗？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:29:45.603

让这两个 nubers 是由位 a1..a4 和 b1..b4 定义的**a**和**b**，如下所示：

```
a= a1*8+a2*4+a3*2+a1  
b= b1*8+b2*4+b3*2+b1 
```

结果：

```
c  result (c==true iff a>b) 
```

c 的逻辑公式： ( *&*表示*and* , *|*表示*or* , *!*表示*not* )

```
c=(a1 & !b1)  | 
  (!(a1 xor b1) & (a2 & !b2)) |
  (!(a1 xor b1) & (!(a2 xor b2)  (a3 & !b3)) |
  (!(a1 xor b1) & (!(a2 xor b2)  & (!(a3 xor b3)  (a4 & !b4)) 
```

[这不检查相等性只显示如果 a>b]

公式各部分说明：

如果设置了 a 的最高位但没有设置 b 的最高位，=>`a>b`
`(a1 & !b1)`

如果最高位相同但设置了 a 的第二高位但未设置 b 的第二高位 =>`a>b`
`(!(a1 xor b1) & (a2 & !b2))`

如果两个最高位相等但设置了 a 的第三高但未设置 b 的第三高 =>`a>b`
`(!(a1 xor b1) & (!(a2 xor b2) (a3 & !b3))`

如果最高三位相等但a的最低位已设置但b的最低位不是=> `a>b`
`(!(a1 xor b1) & (!(a2 xor b2) & (!(a3 xor b3)`

* * *

Ps
对于这么小的数字，您还可以使用具有 8 位地址和一位输出的 ROM，其中包含 a 和 b 的所有可能值的答案。

# python - Python Pyramid & suds - 设计我的 Pyramid Web 应用程序以连接到 SOAP 服务的正确方法是什么？

> ID：15315387
> 
> 赞同：0
> 
> 时间：2013-03-09T20:12:16.530
> 
> 标签：python, soap, pyramid, suds

我有一个使用 Pyramid 框架构建的 Web 应用程序。我想添加连接到 SOAP API 的功能。为此，我已经成功地使用了 suds 库。

在使用 suds 时，我首先创建一个客户端，如下所示：

```
from suds.client import Client
client = Client(wsdl_url) 
```

现在，对于我的 Web 应用程序的每个用户，我将维护一个不同的身份验证令牌，我将在每次调用 SOAP API 时将其传递。我想避免做的是每次我需要访问 API 时都重新构建 suds 客户端。

有时，我的 Web 应用程序的前端会向我的服务器发出十几个几乎同时的 ajax 请求，我需要将这些请求传递给 API。

我想在服务器重新启动时构建一次客户端，而不是每次需要进行 API 调用时都重新构建它。不断地重新解析 XML 只是为了一遍又一遍地构建相同的 suds 客户端对象，这对我来说似乎是一种浪费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:40:52.627

那么任何全局的问题是它是否是线程安全的。如果是，您可以简单地将其存储在注册表中并允许所有人访问它：

```
config.registry['wsdl_client'] = Client(wsdl_url)

def some_view(request):
    client = request.registry['wsdl_client'] 
```

但是，如果这是不能立即在线程之间共享的东西，您将不得不为每个请求创建一个新对象，正如您所抱怨的那样，或者使用 threadlocal 为每个线程存储一个新实例。需要注意的是在请求之间共享对象时正确处理对象的设置/拆卸。例如，当 Pyramid 中通常使用 threadlocal 对象时，它们需要在请求结束时通过`request.add_finished_callback()`. 抱歉，我无法具体评论泡沫，但这些是您的基本选择。

# c# - 将两个正 Int32 相乘返回不正确的否定答案？

> ID：15315388
> 
> 赞同：5
> 
> 时间：2013-03-09T20:12:19.490
> 
> 标签：c#, int32

我真的被这个难住了。我正在为 Windows Phone 7.5 编写 C#；我从文本框中获取文本，将其解析为数组，然后使用 Convert.ToInt32 将每个数组元素转换为 Int32，然后通过一系列数学计算运行生成的 Int32 值，将 Int32 值相乘并添加到硬编码数字（全部取决于在 UI 中选择的内容）。

一切都很好，直到我进行结果计算并将它们相乘：我将两个正数相乘得到一个负数！这是我唯一一次对源自使用 Convert.ToInt32 函数的方法中的两个数字进行任何计算。当它们被相加、相减甚至相除时，数学就正确了。但是当它们相乘时，没有骰子。数学完全错误；我仔细检查了 LibreOffice Calc 中的数学运算，结果不匹配。单步执行代码时，一切都是正确的，直到源自使用 Convert.ToInt32 函数的方法中的数字相乘。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T20:14:49.583

这些数字可能大到足以溢出`Int32.MaxValue`。

考虑：

```
var r = Int32.MaxValue / 2;     // r = 1073741823
var ans = r * 3;                // ans = -1073741827 
```

原因是负整数`1`在最大位用a表示，所以任何大于最大值的乘法都会`1`在这个位置有a，这被解释为负值。

溢出对于所有整数类型（`int`、`short`、`byte`、`sbyte`、`char`、`long`、`ulong`、`ushort`和`uint`）都是一种危险。您可以使用浮点类型，例如`float`or `double`，但这会带来其他问题，例如舍入和相等问题。您必须知道您期望什么样的数字，然后您可能会使用其他类型，如,`long`或浮点类型，如or 。最终，如果您不知道会发生什么，您需要在输入上编写保护代码*（例如将其包装在一个**块中**^([thanks, @EricLippert])**）*，并在它的值超出您的范围时进行处理专为。`uint``ulong``double``decimal`*`checked { }`*

编辑：.Net 4.0+ 中的另一个选项是使用`System.Numerics.BigInteger`，它可以避免任何溢出，但可能会很慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T20:17:18.110

快速而肮脏的解决方案是将其中一个值转换为 a `long`，然后将结果转换回`int`，如果可能的话。

编辑：没有必要使用`BigInteger`这种情况，因为`int x int`永远不会溢出`long`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-25T15:51:11.433

它可能是整数溢出异常。即使您将数字存储在足够大的变量中，它也可能发生。示例（长，双等）

```
int one = int.MaxValue;
int two = int.MaxValue;

long sum = (long)(one + two); //Returns -2, because the cast was after the sum
                             //(long) -2. 
```

您可以将它们放在总和之前并获得正确的结果

```
int one = int.MaxValue;
int two = int.MaxValue;

long sum = (long) one + (long)two; //Returns 4294967294, it casts both the 
                                   //integer to long and then adds them 
```

# python - 存档/Zipfile python

> ID：15315389
> 
> 赞同：0
> 
> 时间：2013-03-09T20:12:29.820
> 
> 标签：python, python-2.7

课程文本中的 zipfile 示例存储了它保存到 zipfile 的文件的完整路径。然而，通常情况下，zip 文件只包含一个相对路径名（您会看到，在创建 zip 文件后列出名称时，“v:\”已被删除）。

在这个项目中，编写一个函数，该函数采用目录路径并仅创建目录的存档。例如，如果使用与示例中相同的路径（“v:\workspace\Archives\src\archive_me”），则 zip 文件将包含“archive_me\groucho”、“archive_me\harpo”和“archive_me\chico”。请注意， zipfile.namelist() 在其返回的内容中始终使用正斜杠，在比较观察到的和预期的内容时需要适应这一事实。

基本目录（上例中的“archive_me”）是输入的最后一个元素，并且 zipfile 中记录的所有路径都应以基本目录开头。

如果目录包含子目录，则不应包含子目录名称和子目录中的任何文件。（提示：您可以使用 isfile() 来确定文件名是否代表常规文件而不是目录。）

我有以下代码：

```
 import os, shutil, zipfile, unittest

 def my_archive(path):
     x = os.path.basename(path)
     zf = zipfile.ZipFile(x, "w")
     filenames = glob.glob(os.path.join(x, "*"))
     print(filenames)
     for fn in filenames:
          zf.write(fn)
          zf.close
     zf = zipfile.ZipFile(path)
     lst =  zf.namelist()
     return(lst)
     zf.close()

 import os, shutil, zipfile, unittest
 import archive_dir

 class TestArchiveDir(unittest.TestCase):

     def setUp(self):
         self.parentPath = r"/Users/Temp"
         self.basedir = 'archive_me'
         self.path = os.path.join(self.parentPath,self.basedir)
         if not os.path.exists(self.path):
             os.makedirs(self.path)
         self.filenames = ["groucho", "harpo", "chico"]
         for fn in self.filenames:
             f = open(os.path.join(self.path, fn), "w")
             f.close()

     def test_archive_create(self):

         observed = archive_dir.my_archive(self.path)
         expected = ["archive_me/groucho", "archive_me/harpo", "archive_me/chico"]
         self.assertEqual(set(expected), set(observed))

     def tearDown(self):
         try:
             shutil.rmtree(self.parentPath, ignore_errors=True)
         except IOError:
             pass

 if __name__=="__main__":
     unittest.main() 
```

我收到“IOError: [Errno 21] Is a directory: 'archive_me'”的错误我知道这是由于我试图压缩档案造成的......但我不知道如何纠正这个问题。如何让文件压缩并通过测试？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:36:54.203

查看您问题中的提示（可能与作业相关）并考虑它与您所看到的 IOError 的关系。

其他一些提示/提示：

1.  在处理事情时尝试打印信息，而不是一次打印所有内容——这将有助于追踪错误并为用户提供进度指示；

2.  看看能不能定位到产生错误的地方，给用户更好的反馈；

3.  将每个功能视为一项工作，并了解它与 my_archive 正在做什么（无论是在测试中如何使用它，还是在实际使用中）；

4.  函数的名称应该描述它们的作用——通常的模式是`verb_noun`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T01:12:59.590

现在的编写方式是在 for 循环的每次迭代后关闭 zipfile。此外，您的 zipfile 的名称与您的目标目录相同，请尝试以下操作：

```
#!/usr/bin/python3

import zipfile
import os
import glob

def archdir(dir):
    x = os.path.basename(dir) + ".zip"
    zf = zipfile.ZipFile(x, "w")
    filenames = glob.glob(os.path.join(os.path.basename(dir), "*"))
    print(filenames)
    for fn in filenames:
        zf.write(fn)
    zf.close() 
```

# c - C读取并解析串口

> ID：15315391
> 
> 赞同：0
> 
> 时间：2013-03-09T20:12:37.570
> 
> 标签：c, serial-port, arduino

我正在将数据从 Arduino 发送到串口：

```
byte xBeeFrame[23];
unsigned int windData, 
signed int tempData;
xBeeFrame[0] = 0x7E;
xBeeFrame[18] = (windData >> 8) & 0xFF;
xBeeFrame[19] = windData & 0xFF;
xBeeFrame[20] = (tempData >> 8) & 0xFF;
xBeeFrame[21] = tempData & 0xFF; 
```

问题是在 C 程序中解析这些数据。我怎么做猫？这是我读取串行端口的方式：

```
unsigned char bytes[254];
                if (read(tty_fd,bytes,sizeof(bytes))>0){
                    ///write(STDOUT_FILENO,bytes,sizeof(bytes));              // if new data is available on the serial port, print it out 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:31:46.143

好的，所以我首先要做的是创建一个单独的头文件来声明您将用于在 Arduino 和 PC 之间进行通信的结构。所以在一个像`comms.h`

```
#ifndef COMMS_H
#define COMMS_H
typedef struct commFrame_t commFrame_t {
    unsigned int wind, 
    signed int temperature;     
}
#endif COMMS_H 
```

然后在您的 Arduino 代码中，您需要`#include "comms.h"`发送数据，如下所示：

```
commFrame_t frame;
// Fill the frame with data
frame.wind = someWindValue;
frame.temperature = someTemperatureValue;
// Send the frame
Serial.write(&frame, sizeof(frame)); 
```

在 PC 端，您还将`#include "comms.h"`阅读相同的框架：

```
commFrame_t frame;

if (read(tty_fd,&frame,sizeof(frame))){
    // Process a frame
} 
```

这不是万无一失的，因为丢失的字符会导致整个协议失控，但作为初始原型可能没问题。除非您将结构直接传递给某些 XBee 设备，否则我不明白为什么您需要分隔符。

# python - 在列表 python itertools 列表中识别零

> ID：15315395
> 
> 赞同：1
> 
> 时间：2013-03-09T20:12:58.937
> 
> 标签：python, itertools

我看了一下，如下所示：

```
yyy=[(2.0, 3.4, 3.75), (2.0, 3.4, 0.0), (2.0, 3.4, 0.0), (2.0, 3.4, 3.5), (2.0, 3.4, 0.0)] 
```

我想做的是确定任何子列表中是否存在 0.0（真或假）。所以，我关注itertools，但我不确定应该如何构建逻辑。

```
from itertools import *
selectors = [x is 0 for x in yyy]
#[False, False, False, False, False] 
```

显然，我上面的语法似乎不正确 - 我想知道是否有人可以为我指出正确的语法方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T20:15:07.160

尝试 `[0.0 in x for x in yyy]`

```
>>> yyy=[(2.0, 3.4, 3.75), (2.0, 3.4, 0.0), (2.0, 3.4, 0.0), (2.0, 3.4, 3.5), (2.0, 3.4, 0.0)]
>>> [0.0 in x for x in yyy]
[False, True, True, False, True]
>>> 
```

你很亲密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:14:05.913

怎么样：

```
any(0.0 in subtup for subtup in yyy) 
```

演示：

```
>>> yyy=[(2.0, 3.4, 3.75), (2.0, 3.4, 0.0), (2.0, 3.4, 0.0), (2.0, 3.4, 3.5), (2.0, 3.4, 0.0)]
>>> any(0.0 in subtup for subtup in yyy)
True
>>> yyy=[(2.0, 3.4, 3.75), (2.0, 3.4, 10.0), (2.0, 3.4, 10.0), (2.0, 3.4, 3.5), (2.0, 3.4,10.0)]
>>> any(0.0 in subtup for subtup in yyy)
False 
```

# ms-access - TOP值查询提示

> ID：15315397
> 
> 赞同：0
> 
> 时间：2013-03-09T20:13:17.813
> 
> 标签：ms-access

我正在创建一个查询，它将选择“x”个条目的随机列表。我希望能够更改每次运行查询时查询返回的值的数量。

是否可以提示 TOP 返回值，而不必每次都打开查询设计？

```
SELECT TOP 50 *
FROM [MyTableName]
ORDER BY Rnd([SomeNumber]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:33:07.513

不幸的是，似乎最明显的方法，即...

```
PARAMETERS RowsToReturn Long;
SELECT TOP [RowsToReturn] *
FROM MyTableName
ORDER BY Rnd([SomeNumber]); 
```

……行不通。Access 抱怨 SQL 查询无效。

我接近它的方法是创建一个如下所示的小 VBA 函数，然后创建一个使用该`RunCode`操作调用它的宏

```
Public Function buildRandomTopN()
'
' assumes that the table has an AutoNumber primary key named [ID]
'
Dim rowsToReturn As Long, cdb As DAO.Database, qdf As DAO.QueryDef
Const queryName = "randomTopN"  ' existing QueryDef to update

On Error Resume Next
rowsToReturn = CLng(InputBox("Number of rows to return"))
If Err.Number = 0 Then
   On Error GoTo 0
   If rowsToReturn > 0 Then
      Set cdb = CurrentDb

      ' update the SQL statement for the query
      Set qdf = cdb.QueryDefs(queryName)
      qdf.SQL = "SELECT TOP " & rowsToReturn & " * FROM [MyTableName] " & _
          "ORDER BY Rnd([ID])"
      qdf.Close
      Set qdf = Nothing
      Set cdb = Nothing

      ' open the query
      DoCmd.OpenQuery queryName
   End If
End If
End Function 
```

# iphone - iOS 通知处理

> ID：15315401
> 
> 赞同：1
> 
> 时间：2013-03-09T20:13:30.740
> 
> 标签：iphone, ios, storyboard, push-notification

我知道如何处理有关如何获取数据的通知，但我正试图弄清楚如何处理该信息。例如，当使用 Facebook 应用程序时，如果应用程序不在前台，并且我们收到通知，则在恢复时，用户将被带到与该通知对应的视图。例如，如果我们收到一条新消息通知，然后点击它，我们会直接进入聊天。

所以问题是，当我使用故事板时，我怎样才能直接进入通常需要用户稍微浏览应用程序的视图。假设我们想要在通知上访问的视图需要用户将视图控制器三次推送到导航控制器上。有什么好方法可以做到这一点，有什么办法，我不必手动调用 pushViewController 或 performSegue 三次？

# objective-c - 目标 C OSX - 委托 - 从另一个类调用子（不是作为实例）

> ID：15315405
> 
> 赞同：0
> 
> 时间：2013-03-09T20:14:05.540
> 
> 标签：objective-c

我正在尝试委托，但它不起作用。changeView_ShowContact 方法将使视图控制器正常显示。但是当我从另一个类调用 changeView_ShowContact 时，它不会工作。

```
@protocol callingActions_fromMainNavigation <NSObject>
    - (IBAction)changeView_ShowContact:(id)sender;
@end

**@interface Navigation_Main : NSViewController**
@property (nonatomic, strong) id <callingActions_fromMainNavigation> delegate;

**@implementation Navigation_Main** 
@synthesize delegate;

- (IBAction)changeView_ShowContact:(id)sender;
{
    NSLog(@"********************ShowContact");
    AddStuffViewController = [[pageContact alloc] initWithNibName:@"pageContact" bundle:nil];
    [AddStuffView addSubview:[AddStuffViewController view]]; //<This call here works ok.
} 
```

.

```
@interface contacts : NSObject <callingActions_fromMainNavigation>

**@implementation contacts**
-(void)myMethodCall:(id)sender;
{
    Navigation_Main *NavMain = [[Navigation_Main alloc] initWithNibName:@"Navigation_Main.h" bundle:nil];
    [NavMain setDelegate:self];
    [self changeView_ShowContact:nil];
//I need to call the (IBAction)changeView_ShowContact in the Main Navigation. This 
//code is not working.
}

- (IBAction)changeView_ShowContact:(id)sender;
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:57:01.107

当使用一个类的非共享实例（不是单例的东西）时，为什么你会期望一个新的类初始化实例共享对任何其他引用的引用？那将是一场灾难！您需要获得对（理想情况下）拥有该`contacts`对象的视图控制器的有效引用，而不是尝试初始化您自己的并祈祷重大 malloc() 错误。我已经修复了您的代码（包括某些类的名称）：

```
//Even delegates need a standard "namespace" prefix for safety
@protocol CFIContactsNavigation<NSObject>
    - (IBAction)changeView_ShowContact:(id)sender;
@end

// This is a terrible name for a class.  Categories are the only classes
// that should use underscores mid-name, and even then only when compiled
@interface CFIMainNavigationViewController : NSViewController
//delegates are **never** strong
@property (nonatomic, weak) id <CFIContactsNavigation> delegate;

@implementation CFIMainNavigationViewController
//@synthesize delegate;  unnecessary

- (IBAction)changeView_ShowContact:(id)sender;
{
    NSLog(@"********************ShowContact");
    AddStuffViewController = [[pageContact alloc] initWithNibName:@"pageContact" bundle:nil];
    [AddStuffView addSubview:[AddStuffViewController view]]; //<This call here works ok.

    CFIContacts *contacts = [CFIContacts new];
    [self setDelegate:contacts];
    [contacts setNavMain:self];
}

//Again, terrible name for a class.  Also, it's missing an @end
@interface CFIContacts : NSObject <CFIContactsNavigation>

@property (nonatomic, weak) CFIMainNavigationViewController *navMain;

@end

@implementation CFIContacts
-(void)myMethodCall:(id)sender;
{
    //instance names are pascal-cased
    // CFIMainNavigationViewController *navMain = [[Navigation_Main alloc] initWithNibName:@"Navigation_Main.h" bundle:nil];
    [self.mainNav changeView_ShowContact:nil];
//I need to call the (IBAction)changeView_ShowContact in the Main Navigation. This 
//code is not working.
}

//Why the heck are there a pair of parenthesis *and* a semicolon?  
// this would never compile
- (IBAction)changeView_ShowContact:(id)sender { }

//...

@end 
```

# php - PHP while循环不显示第一项？

> ID：15315407
> 
> 赞同：3
> 
> 时间：2013-03-09T20:14:07.983
> 
> 标签：php, mysql, loops, while-loop

我只是想从我的数据库中显示一个基本列表或项目，但由于某种原因，它没有显示第一个项目，所以如果一个类别中只有一个项目，它不会显示任何内容，但如果有 2 个，它将显示一个项目. 我在下面添加了代码。

询问

```
 //this query will fetch 4 records only!
 $latestVideos = mysql_query("SELECT * FROM table ORDER BY date DESC LIMIT 5")or die(mysql_error());

 $posts = mysql_fetch_array($latestVideos); 
```

While 循环

```
 while($posts = mysql_fetch_array($latestVideos)){

 $dateFormat= $posts['video_date'];
 $newDate=date('d-m-Y',strtotime($dateFormat));

 echo $posts['video_title']
 echo $newDate;
 echo $posts['video_embed'];
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T20:15:49.733

`mysql_fetch_array`用于在 while 循环的每次迭代中返回数组的一行。

extra`mysql_fetch_array`将第一行放入 post 中，并在 while 循环的第一次迭代中将第二行放入 post 中。

这是你应该做的。

```
$latestVideos = mysql_query("SELECT * FROM table ORDER BY date DESC LIMIT 5")or die(mysql_error());

 while($posts = mysql_fetch_array($latestVideos)){
 //do stuff here
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T20:18:29.027

It looks like the first time you call "$posts = mysql_fetch_array($latestVideos);" the first row is retrieved and removed from $latestVideos. and the while loop then loops through the other rows.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T20:18:11.257

您使用 mysql_fetch_array 获取一次，但随后不使用结果。您正在阅读第一行，然后将其丢弃。

```
$posts = mysql_fetch_array(...); # Reads 1st row
while ( $post = mysql_fetch_array() ) { # reads 2nd-Nth row
} 
```

# java - 1 类中的同步线程

> ID：15315414
> 
> 赞同：0
> 
> 时间：2013-03-09T20:14:27.680
> 
> 标签：java, multithreading, wait, synchronized, notify

我一直在寻找一种成功使用多线程和同步的方法。我试过使用 wait() 和 notify()，但我的线程仍然不同步。我有一个更大的项目，但简而言之，我需要它使用 setter 方法（在本例中为 thread1）运行线程预定次数，并且在每次“设置”之后，我需要使用 getter 方法（thread2）的线程运行并获取对象。我已经查看了许多其他示例，但我似乎无法解决，所以任何关于为什么这不起作用的帮助或解释将不胜感激。

这有时会起作用，当 thread1 首先运行时，但在其他时候 thread2 先运行，因此同步不起作用。

谢谢。

```
import java.util.ArrayList;

public class ThreadTest{

    private ArrayList<Object> myList;

    public ThreadTest(){

        myList = new ArrayList<Object>();

        Thread thread1 = new Thread(){
            public void run(){
                for(int i = 0; i < 10; i++){
                    addToList("" + i);
                }
            }
        };

        Thread thread2 = new Thread(){
            public void run(){
                for(int i = 0; i < 10; i++){
                    System.out.print(myList.get(i) + " ");
                }
            }
        };

        thread1.start();
        thread2.start();
    }

    public synchronized void addToList(String a){
        myList.add(a);
        notify();
    }

    public synchronized ArrayList<Object> getList(){
        try{
            wait();
        }
        catch (InterruptedException e){
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return myList;
    }

    public static void main(String[] args){
        new ThreadTest();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:42:54.603

使用 a`BlockingQueue`自动进行同步，使用 an`ExecutorService`处理所有`Thread`s

```
public void doStuff() {
    final Object finishSupplying = new Object();
    final BlockingQueue<Object> myList = new LinkedBlockingQueue<Object>();
    final Runnable supplier = new Runnable() {
        public void run() {
            for (int i = 0; i < 10; i++) {
                myList.add(i);
            }
        }
    };

    final Runnable consumer = new Runnable() {
        public void run() {
            while (true) {
                try {
                    final Object thing = myList.take();
                    if(thing == finishSupplying) break;
                    System.out.print(thing + " ");
                } catch (InterruptedException ex) {
                    Thread.currentThread().interrupt();
                }
            }
        }
    };

    final ExecutorService exectutorService = Executors.newFixedThreadPool(2);
    final Future<?> supplierHandle = exectutorService.submit(supplier);
    final Future<?> consumerHandle = exectutorService.submit(consumer);
    try {
        supplierHandle.get();
    } catch (InterruptedException ex) {
        Thread.currentThread().interrupt();
    } catch (ExecutionException ex) {
        //PROBLEMS, handle
    }
    myList.add(finishSupplying);
    try {
        consumerHandle.get();
    } catch (InterruptedException ex) {
        Thread.currentThread().interrupt();
    } catch (ExecutionException ex) {
        //PROBLEMS, handle
    }
} 
```

确保您完成`shutdown()`后`ExecutorService`，否则您的程序将不会退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:23:33.167

当您通知时，您应该更新一个状态（正如您所拥有的），当您等待时必须在循环中检查该状态。这是必需的

*   等待开始之前的通知触发器并且信号丢失
*   等待可能会虚假地唤醒。

注意：您的消费线程不会等待，因为您没有调用任何等待的东西。

有很多方法可以解决这个问题，但恕我直言，最好的解决方案是使用旨在支持这种模式的 BlockingQueue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:42:18.420

您不应该使用 getter 和 setter 来访问整个列表，而只能从中推送和拉取元素。正如已经说过的，`BlockingQueue`是一个同步列表实现。

也就是说，如果你想自己实现这个，把getList替换为list上`remove(0)`的一个synchronized，它只返回ArrayList的第一个元素。

# java - Runtime.getRuntime().exec() 工作不正确

> ID：15315418
> 
> 赞同：0
> 
> 时间：2013-03-09T20:14:45.173
> 
> 标签：java, android, runtime.exec

我尝试在我的应用程序中在 Android 上运行 python 应用程序。
此脚本在**Better Terminal Emulator Pro中正常工作**

```
su
busybox chroot /data/local/debian /bin/bash
/usr/bin/python /usr/src/script.py 
```

然后我输入值

```
>>value1
result 
```

但是，如果我在我的应用程序中尝试过：

```
String line;
Runtime.getRuntime().exec("su");
Runtime.getRuntime().exec("busybox chroot /data/local/debpsla /bin/bash");
Process proc = Runtime.getRuntime().exec("ls");
OutputStreamWriter osw = new OutputStreamWriter(proc.getOutputStream());

proc.waitFor();
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(proc.getInputStream()));
while ((line = bufferedReader.readLine()) != null){ 
   publishProgress(line); 
} 
```

命令**ls**返回不正确的文件列表。这意味着根目录不会改变。
我做错了什么？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:19:49.913

您将分别运行每个命令，因为它们每个都启动一个新进程，并且仅使用 JVM 的上下文。这意味着您正在运行`su`，`busybox chroot /data/local/debpsla /bin/bash`并且`ls`作为并发且不相关的进程。

如果你想让一个跟随另一个，你必须在一个过程中完成所有这些。我怀疑编写一个您执行的脚本会更容易。

# c++ - 复制构造函数和函数返回临时对象

> ID：15315419
> 
> 赞同：0
> 
> 时间：2013-03-09T20:14:46.360
> 
> 标签：c++, visual-studio-2010, copy-constructor

我有以下代码：

```
 struct balls
    {
        int mNumBalls;

        ~balls();    
    };

    inline balls::~balls()
    {
          // is not called in VS2010 when getBalls returns in monkey constructor
    }

    balls getBalls()
    {
        balls myBalls;

        myBalls.mNumBalls = 5;

        return myBalls;
    }

    struct monkey
    {
        balls mBalls;

        monkey();
    };

    inline monkey::monkey() : mBalls(getBalls())
    {
    } 
```

通过单步执行 VS2010 调试器，我注意到在构造函数中返回`balls`时没有调用析构函数。这是在 c++ 标准中定义的，还是仅仅是一些仅存在于 VC++ 上的优化？我可以依靠在这种情况下跨平台调用的析构函数吗？`getBalls()``monkey()`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:21:33.303

您遇到了*复制省略*，这是一种定义明确的机制。不执行不必要的复制取决于实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:26:35.290

如果要按值返回复杂结构，避免不必要的构造和破坏的唯一保证方法是使用移动语义。请参阅[如何：编写移动构造函数](http://msdn.microsoft.com/en-us/library/dd293665.aspx)。

例如，如果您的类分配内存，则移动构造函数允许您将内存的所有权从一个变量转移到另一个变量。然后优化器将删除传输变量的冗余存储和空检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T20:24:45.540

根据 C++11 标准的第 12.8/31 段：

> 当满足某些条件时，**允许实现省略类对象的复制/移动构造**，*即使为复制/移动操作选择的构造函数和/或对象的析构函数具有副作用*。在这种情况下，实现将省略的复制/移动操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被删除的较晚时间。没有优化就被破坏了。**这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的**（可以结合起来消除多个副本）：
> 
> —在具有类返回类型的函数的 return 语句中，当表达式是**具有与函数返回类型相同的 cvunqualified 类型****的非易失性自动对象**（函数或 catch 子句参数除外）的名称时，可以通过**将自动对象直接构造到函数的返回值**中来省略复制/移动操作
> 
>  ****— [...]****

 ****这是其中一种情况：

```
balls getBalls()
{
    balls myBalls;

    return myBalls; <== COVERED BY THE QUOTED PARAGRAPH
//  ^^^^^^^^^^^^^^
} 
```

这是一个真正相关的问题，因为它代表了一般“*好像*”规则的一个*例外。*“*好像*”规则基本上允许编译器更改您编写的代码*，只要效果相同*（“*好像*”它完全执行您编写的程序）。

 ***但是，在这种情况下，您不能依赖编译器创建临时（或*不*创建临时！），即使您的复制构造函数、移动构造函数或析构函数有副作用。*******

# jquery - 添加元素后重新初始化 jQuery UI droppable

> ID：15315422
> 
> 赞同：2
> 
> 时间：2013-03-09T20:15:05.773
> 
> 标签：jquery, jquery-ui, jquery-ui-droppable

我有一些在页面加载时可放置的元素。在某些时候，我会添加更多这些元素（相同的选择器），并且我希望新元素也可以放置。是使用所有选项调用原始可放置函数的唯一选项吗？你看，droppable 函数调用非常大，我真的不想用这种方式复制代码。有没有更优雅的方式？

这是澄清的代码：

```
$('td:not(.td-disabled)').droppable({
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
            // ... very big block of code 
        }
    });
$('.td-disabled').removeClass('td-disabled');

// I dont want to do this:
$('td').droppable({
            hoverClass: "ui-state-active",
            drop: function( event, ui ) {
                // ... very big block of code 
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:16:51.153

你可以试试：

```
var hoverCls = 'ui-state-active';
var dropFn = function(event, ui) {

};

$('td').droppable('destroy').droppable({
   hoverClass: hoverCls,
   drop: dropFn
}); 
```

# c# - 位移是否总是考虑到 Endian 架构？

> ID：15315425
> 
> 赞同：4
> 
> 时间：2013-03-09T20:15:13.137
> 
> 标签：c#, c++, bit-shift, endianness

假设我从 C++ 移植代码并且需要在 C# 中模拟相同的位移技术：

每当我执行位移时，我是否必须考虑架构的 Endain-ness ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:18:07.747

你不可以。在 C++ 和 C# 中，您可以完全根据存储的数字来考虑位移，而忽略架构的字节顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T20:19:55.660

不，位移是纯粹的代数运算。它不再依赖于平台，而不是乘以 2。

*依赖于平台的*是将变量解释为字符数组的结果。

# android - 2.3.3 中的 4.0 GUI 渲染

> ID：15315431
> 
> 赞同：0
> 
> 时间：2013-03-09T20:15:32.343
> 
> 标签：android, user-interface

我在 android 2.3.3 中有一个项目，想添加有吸引力的 GUI 。简单的拖放似乎不够好。

我该怎么做呢。任何 ICS 兼容的 GUI 库？

来自谷歌的库页面搜索 ActionBar 的位置。我想要像 ICS 一样显示我的整个应用程序

***简而言之，我希望 ICS 像 2.3.3 设备中的外观 ***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:19:17.607

您是否尝试过这个库将 Holo 主题从 Android 4.1 带到 2.1 及更高版本。 [全息无处不在](https://github.com/ChristopheVersieux/HoloEverywhere)

# php - PHP网站不断被黑客入侵

> ID：15315432
> 
> 赞同：0
> 
> 时间：2013-03-09T20:15:44.130
> 
> 标签：php, security

让我先说我不知道​​ php。我不是后端程序员，我只做前端。我的未婚夫经营着一个我的世界服务器，我同意建立他的网站让他帮忙。他要求在 php 中添加一些与他的 phpbb 论坛相关的东西。我在研究如何做到这一点时发现并将这些方法嵌入到网站中，然后它就被启动了。但他的网站不断被黑。

我们第一次被黑客入侵时，我们删除了所有的 ftp 帐户，只保留了一个带有一个密码的帐户。我们更改了此帐户的密码 我们删除了所有不是我们创建的文件和文件夹，并用我们的本地文件覆盖了服务器上的文件

今天早上，它第二次被黑了，我们注意到有一个新的 ftp 帐户以及各种文件夹和子文件夹下的数千个文件。我们询问了我们的主机，他们说它必须是 php/script 中的一个漏洞。我不知道如何保护它。我不知道这个漏洞在哪里。我花了一段时间寻找保护它的方法，并且一直在阅读有关 php 过滤器的信息，但我只是不明白如何实现它们？

以下是网站上唯一的 php 代码片段： 这个基本上只是为用户连接到论坛：

```
 <?php
    define('IN_PHPBB', true);
    $phpbb_root_path = '../forums/';
    $phpEx = substr(strrchr(__FILE__, '.'), 1);
    include($phpbb_root_path . 'common.' . $phpEx);
    // Start session management
    $user->session_begin();
    $auth->acl($user->data);
    $user->setup();
    ?>

    <?php if($user->data['is_registered'])
    {
        //User is already logged in
        echo '<div id="login">Welcome, ' . $user->data['username'] . ' ';
        $l_message_new = ($user->data['user_new_privmsg'] == 1) ? $user->lang['NEW_PM'] : $user->lang['NEW_PMS'];
        $l_privmsgs_text = sprintf($l_message_new, $user->data['user_new_privmsg']);
        echo '<span><a href="' . append_sid("{$phpbb_root_path}ucp.$phpEx",         'i=pm&amp;folder=inbox') . '">' . $l_privmsgs_text . '</a></span></div><div         id="loginlayer"></div>';
        }
    else
    {
            echo ' ';
    }
         //user is not logged in  
    ?> 
```

然后我有一个表格，一旦填写就会在他们的论坛上创建一个线程：

```
 <?php
    /**
    *
    * @package phpBB3
    * @version $Id: twitpost.php,v1.0.0 2010/05/31 2:43 PM PPCW2 Exp $
    * @license http://opensource.org/licenses/gpl-license.php GNU Public License
    *
    */

    /**
    * @ignore
    */

    define('IN_PHPBB', true);
    $phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : '../forums/';
    $phpbb_admin_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : '../forums/';
    $phpEx = substr(strrchr(__FILE__, '.'), 1);
    include($phpbb_root_path . 'common.' . $phpEx);
    include($phpbb_root_path . 'includes/functions_posting.' . $phpEx);
    include($phpbb_root_path . 'includes/functions_display.' . $phpEx);
    include($phpbb_root_path . 'includes/message_parser.' . $phpEx);

    // Start session management
    $user->session_begin();
    $auth->acl($user->data);
    $user->setup('common');

    $tmsg = request_var('tmsg', ''); // getting data from the submitted HTML form (name of the feild should be tmsg)
    $tt = request_var('tt', ''); // getting data from the submitted HTML form (name of the feild should be tt)
    $un = request_var('un', ''); // getting data from the submitted HTML form (name of the feild should be un)
    $username = "$un";
    $message = "[b]Username[/b]: " . $username . "\n" . "[b]Details[/b]: " . $tmsg . "\n";
    $forum = 14; //change to your forum id here

    $time = time();
    $rawsubject = "$tt";
    $my_subject   = utf8_normalize_nfc($rawsubject, '', true);
    $my_text   = utf8_normalize_nfc($message, '', true);

    // variables to hold the parameters for submit_post
    $poll = $uid = $bitfield = $options = '';

    generate_text_for_storage($my_subject, $uid, $bitfield, $options, false, false, false);
    generate_text_for_storage($my_text, $uid, $bitfield, $options, true, true, true);

    $data = array(
           'forum_id'      => $forum,
           'icon_id'      => false,

           'enable_bbcode'      => true,
           'enable_smilies'   => true,
           'enable_urls'      => true,
           'enable_sig'      => true,

           'message'      => $my_text,
           'message_md5'   => md5($my_text),

           'bbcode_bitfield'   => $bitfield,
           'bbcode_uid'      => $uid,

           'post_edit_locked'   => 0,
           'topic_title'      => $my_subject,
           'notify_set'      => false,
           'notify'         => false,
           'post_time'       => 0,
           'forum_name'      => '',
           'enable_indexing'   => true,
    );

    submit_post('post', $my_subject, $user->data['username'], POST_NORMAL, $poll, $data);
    $redirect_url = append_sid("{$phpbb_root_path}/viewforum.$phpEx?f=$forum", false, true, $user->session_id);
    meta_refresh(2, $redirect_url); 
    trigger_error('Issue Posted' . '<br /><br />Taking you to the issues forum ' . sprintf('<a href="' . $redirect_url . '">', '</a>'));
    ?> 
```

然后是登录表单：

```
 <?php if($user->data['is_registered'])
    {
        //User is already logged in
        echo '<div id="loginarea" class="bluebox">
        <h1>Log In</h1>You are already logged in!</div>';
        }
    else
    {
            echo '<div id="loginarea" class="bluebox">
        <h1>Log In</h1><form method="POST" action="/forums/ucp.php?mode=login">
            <p><span>Enter your Username:</span><br>
    <input type="text" name="username"><br>

            <span>Password:</span><br>
    <input type="password" name="password"><br>

    <input type="submit" class="btns donatebtn" value="Submit" name="login">
    <input type="hidden" name="redirect" value="../index.php">
    </form></div>';
    }
         //user is not logged in  
    ?> 
```

就是这样！有什么建议么？太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:34:23.053

如果有人正在登录服务器并创建 FTP 帐户，那么您为什么还要查看 PHP。如果他们能够登录服务器，则服务器用户名/密码必须是微不足道的，否则其他地方存在严重的安全错误！

您需要查看某人如何能够登录到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:24:52.200

我认为这可能在 Serverfault 上问得更好——那里已经有一个关于如何处理受损服务器的出色回复。主要建议之一是重建系统，而不是仅仅尝试简单地删除帐户和更改密码等，因为您不知道它们是如何进入的，并且更改密码不太可能阻止它再次发生，如果它实际利用。非常值得一读：

[https://serverfault.com/questions/218005/how-do-i-deal-with-a-compromised-server/218011#218011](https://serverfault.com/questions/218005/how-do-i-deal-with-a-compromised-server/218011#218011)

# php - 选择 sql

> ID：15315436
> 
> 赞同：0
> 
> 时间：2013-03-09T20:16:06.567
> 
> 标签：php, sql

以选择某些内容的方式进行查询的方式是什么，

```
 SELECT a.Title,(results of another  SELECT ....),
                  FROM Table1 AS a
                  JOIN ........

           CREATE A VIEW v AS SELECT columnv,....
               FROM Table , 
```

在我这样做之后

```
 SELECT a.Title,v.columnv,
              FROM Table1 AS a
              JOIN v...... 
```

使用 View 它可以工作，但我必须在 PHP 中使用结果，所以你能建议一个好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:17:22.240

像这样的东西应该工作：

```
SELECT `a`.`Title`, `b`.*
FROM `Table1` AS `a`
JOIN (SELECT your subquery here) AS `b` ON some condition here 
```

# jasmine - 使用 Jasmine 为浏览器进行 IndexedDB 测试

> ID：15315437
> 
> 赞同：4
> 
> 时间：2013-03-09T20:16:08.303
> 
> 标签：jasmine, indexeddb, karma-runner

我正在研究使用 Jasmine（特别是 Testacular）测试 indexedDB 设置。在应用程序内部，我正在编写要打开、创建、删除等的数据库，没有任何问题。现在，当我尝试编写单元测试以确保从服务中正确保存数据时，我不断收到错误消息，例如超时，并且 Chrome 资源面板（目前在 Chrome 25 上测试）不显示使用正确的表格。什么是涉及测试 indexedDB 的简单实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T20:16:08.303

[测试indexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB%22IndexedDB%22)时有几件事要记住。

*   您必须牢记 indexedDB 的异步特性，并在 Jasmine 内部适当地处理它。异步测试的关键是使用一些 jasmine 内置的[异步规范](https://github.com/pivotal/jasmine/wiki/Asynchronous-specs)函数，如“runs”、“waits”和“waitsFor”。确保在使用这些方法时正确放置它们。（IE 在 beforeEach() 之外放置 waitsFor() 可能会导致超时错误。
*   除非您希望自己编写，否则请尝试使用**[几个](https://github.com/jensarps/IDBWrapper)**最适合您的包装器之一**[。](https://github.com/axemclion/jquery-indexeddb)**
*   确保为每个操作创建新事务，否则您将收到 InvalidStateErrors。
*   如果您希望避免在异步测试中左右使用内置的 waitsFor()，您可能希望查看[Jasmine.async 之类的东西](https://github.com/derickbailey/jasmine.async)

以下是我为演示将一项添加到数据库的简单测试而制作的内容。这应该适用于没有供应商前缀的 Chrome 24+、FF 16+ 和 IE10（假设您有一个带有 Deferred 的 jquery 版本）。但是，我强烈建议使用上述 IDB 包装器/插件之一。这里可能需要添加更多错误输出，但希望这有助于入门。

```
describe("Database interaction", function () {

        var settings = {
            name: "TEST",
            version: 1
        };
        var stores = [
            {name: "store1", keyPath: "id"},
            {name: "store2", keyPath: "id"},
            {name: "store3", keyPath: "id"}
        ];
        var db;

        function setupDB(){
            var dbRequest = window.indexedDB.open( settings.name, settings.version),
                dbDfd = $.Deferred();

            dbRequest.onsuccess = function( event ) {
                console.log("Opened DB");
                db = dbRequest.result;
                dbDfd.resolve( db );
            };
            dbRequest.onblocked = function( event ){
                console.error("DB connection blocked");
                db.close();
                setupDB();
            };
            dbRequest.onerror = function( event ){
                console.error("DB connection issues");
                dbDfd.reject();
            };
            dbRequest.onupgradeneeded = function(){
                var i, cur;
                db = dbRequest.result;

                //Create non-existant tables
                for(i=0; i < stores.length; i+=1){
                    cur = stores[i];
                    db.createObjectStore( cur.name,  {keyPath: cur.keyPath, autoIncrement: true});
                }
            };
            return dbDfd.promise();
        }

        beforeEach(function(){
            var done = false;
            runs( function(){
                var delRequest = indexedDB.deleteDatabase("TEST");
                delRequest.onsuccess = function( event ){
                    console.log("DB Deleted");

                    setupDB()
                        .then(function(db){
                            console.log("DB Setup with stores: ", db.objectStoreNames );
                            done = true;
                        })
                };
                delRequest.onerror = function(event){
                    console.log("DB Err: ", event );
                    done = true;
                };
            });
            waitsFor( function(){ return done; }, "Database never created..", 10000 );
        });

        it('should add an item to store1', function(){
            var done = false;
            //Open a transaction with a scope of data stores and a read-write mode.
            var trans = db.transaction( stores.map(function(s){return s.name;}), 'readwrite');

            //"objectStore()" is an IDBTransaction method that returns an object store
            //that has already been added to the scope of the transaction.
            var store = trans.objectStore('store1');

            var req = store.add({"id": 2, "foo":"bar"});
            req.onsuccess = function(){

                //Remember to not access store or trans (from above), or this.source.prototype functions as we can only access those in a new transaction
                //Added an object to the store, expect result to be ID of item added
                expect( this.result ).toBe( 2 );
                //Some other expectations
                expect( this.source.name ).toBe("store1");
                expect( this.source.keyPath ).toBe("id");
                expect( this.source.autoIncrement ).toBe( true );
                expect( this.source.indexNames.length ).toBe( 0 );
                expect( this.transaction.mode ).toBe("readwrite");
                expect( this.transaction.db.name ).toBe("TEST");
                done = true;
            };
            req.onerror = function(){
                console.log("Error adding object to store");
                done = true;
            };
            waitsFor(function(){ return done; }, "Didn't add store item", 10000 );
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:43:09.543

我在[db.js](https://github.com/aaronpowell/db.js)中有一个相当大的测试套件，它是一个 IDB 包装器，它主要依赖于使用`waitsFor`来执行异步操作。将此与`beforeEach`和结合起来`afterEach`很有用，因为它们可用于控制数据库连接的设置/去皮重，如果您想查看一些实际操作，请查看[规范文件夹。](https://github.com/aaronpowell/db.js/blob/master/tests/specs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T03:07:56.310

看看[这个](http://www.rgaskill.com/2013/03/12/indexeddb-delete.html)。它指的是一个 github 项目，其中有一个在 jasmine 中使用 indexeddb 的简单示例。

# iphone - 按钮在 iPhone 5 上无效，在 iPhone 4S 上有效

> ID：15315439
> 
> 赞同：0
> 
> 时间：2013-03-09T20:16:26.223
> 
> 标签：iphone, ios, xcode, iphone-5

我有一个非常奇怪的问题。我没有特定于设备的代码。我什至没有使用自动布局，因为我的目标是回到 iOS 4.3。所以我在我的 iPhone 4S 上进行了测试，一切都很好。将其发送出去进行 beta 测试，iPhone 5 用户报告说我的登录视图上的两个按钮之一（登录按钮，一个相对重要的按钮）不起作用。它甚至没有检测到触地（不改变颜色）。我启动了模拟器，在 iPhone 5 模拟器中，所有按钮都不起作用。

有人知道这里发生了什么吗？我很乐意分享您认为可能相关的任何代码，但我什至不知道从哪里开始，因为没有特定于设备的代码，它在 4S 上运行良好，在 5 上表现不同，仍然在 5 模拟器上有所不同。

编辑：事实证明，由于自动调整大小，视图与按钮重叠。通过将 .xib 中的大小更改为视网膜 4 英寸来解决这个问题。

# javascript - 为什么这个 setTimeout 解决方法在 javascript 中不起作用？

> ID：15315442
> 
> 赞同：-3
> 
> 时间：2013-03-09T20:16:49.297
> 
> 标签：javascript, settimeout

我需要延迟执行 4 段不同的代码。我想出了这个技巧来创建简单的睡眠功能，但它并没有呈现出想要的结果。

```
function pauseScript (delay) {
    setTimeout(function() { return true; }, delay);
}

....
//code to be delayed
if (pauseScript(1000)) { 
    document.getElementById("message1").style.visibility='visible'; 
}
...
if (pauseScript(1000)) { 
    document.getElementById("message4").style.visibility='visible'; 
}
//code to be executed after 4 messages are revealed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:20:10.240

`setTimeout`不会阻止脚本的执行。你应该做这个：

```
setTimeout(function() {
    // code to be delayed
},1000); 
```

在您的情况下，您似乎有四个消息要按顺序显示？试试这个：

```
setTimeout(function() {
    var f = arguments.callee;
    f.i = (f.i || 0)+1;
    document.getElementById('message'+f.i).style.visibility = "visible";
    if( f.i < 4) setTimeout(f,1000);
    else {
        // code to be run after all messages are shown.
    }
},1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:23:56.597

`setTimeout`不会暂停您的脚本。相反，它将安排您传递给它的函数在以后异步执行。

我认为您正在尝试这样做：

```
setTimeout(function(){
    document.getElementById("message1").style.visibility='visible'; 
}, 1000);

setTimeout(function(){
    document.getElementById("message2").style.visibility='visible'; 
}, 2000);

setTimeout(function(){
    document.getElementById("message3").style.visibility='visible'; 
}, 3000);

setTimeout(function(){
    document.getElementById("message4").style.visibility='visible'; 
}, 4000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:33:58.097

```
function pauseScript(callbacks, delay) {
    for(var i = 0, len = callbacks.length; i < len; i++){
        setTimeout(callbacks[i], (i + 1) * delay);
    }
}

var getMessageDelegates = [
    function(){
        document.getElementById("message1").style.visibility='visible'; 
    },...,
    function(){
        document.getElementById("message4").style.visibility='visible'; 
    }
];

pauseScript(1000, getMessageDelegates); 
```

# c# - 将翻译后的枚举绑定到基于 Windows 窗体的应用程序中的组合框

> ID：15315449
> 
> 赞同：1
> 
> 时间：2013-03-09T20:17:36.100
> 
> 标签：c#, winforms, data-binding, datasource

由于命名和枚举之间的差异，我不能简单地绑定。想到以下几点：

*   使用翻译值数组作为数据源；
*   使用格式/解析事件对属性进行数据绑定，以在枚举值和显示值之间进行转换。

例子：

```
BindingSource bs = new BindingSource();
bs.DataSource = this.testdata;

this.textBox1.DataBindings.Add("Text", this.bs, "CurrentState", true, DataSourceUpdateMode.OnPropertyChanged);
this.textBox1.ReadOnly = true;
this.comboBox1.DataSource = new List<string>() { "Goed", "Slecht", "Lelijk", "-" };
Binding b = new Binding("SelectedValue", this.bs, "CurrentState", true, DataSourceUpdateMode.OnPropertyChanged);
b.Parse += new ConvertEventHandler(TextToState);
b.Format += new ConvertEventHandler(StateToText);
this.comboBox1.DataBindings.Add(b); 
```

[...]

```
 void StateToText(object sender, ConvertEventArgs e)
    {
        State state = (State)Enum.Parse(typeof(State), e.Value as string);

        switch (state)
        {
            case State.Good:
                e.Value = "Goed";
                break;
            case State.Bad:
                e.Value = "Slecht";
                break;
            case State.Ugly:
                e.Value = "Lelijk";
                break;
            default:
                e.Value = "-";
                break;
        }
    }

    void TextToState(object sender, ConvertEventArgs e)
    {
        switch (e.Value as string)
        {
            case "Goed":
                e.Value = State.Good;
                break;
            case "Slecht":
                e.Value = State.Bad;
                break;
            case "Lelijk":
                e.Value = State.Ugly;
                break;
            default:
                e.Value = State.None;
                break;
        }
    } 
```

这只是一个测试功能的示例。文本框用于验证组合框中显示的值是否真的是数据绑定属性的值。

此代码有效。但是有两个问题我无法解决：

*   组合框选择数据源中的第一个值（不是属性的状态），直到所选项目被更改一次。然后绑定工作正常。
*   我无法关闭表单。

我不明白为什么绑定在加载时无法更新。我尝试重置绑定等，但没有任何效果。我也不知道为什么表格被阻止关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T01:03:29.480

为什么不考虑编写一个包含要使用的键/值对的类？这是一个小示例实现，假设您有一个名为 combobox1 的组合框。

```
namespace WindowsFormsApplication1
{

   public enum State {None, Good, Bad, Ugly }

    public partial class Form1 : Form
    {
        List<StateTextPair> pairs;

        public Form1()
        {
            InitializeComponent();
            InitializeList();
            this.comboBox1.DataSource = pairs;
            this.comboBox1.ValueMember = "State";
            this.comboBox1.DisplayMember = "Name";
            this.comboBox1.SelectedIndexChanged += new EventHandler(comboBox1_SelectedIndexChanged);

        }

        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e) {
            ComboBox box = (ComboBox)sender;
            StateTextPair selected = (StateTextPair)box.SelectedItem;
            switch (selected.State) {
                case State.None:
                    // do nothing
                    break;
                default:
                    MessageBox.Show(selected.State.ToString() + " == " + selected.Name);
                    break;
            }
        }

        private void InitializeList() {
            pairs = new List<StateTextPair>();
            pairs.Add(new StateTextPair(State.None, " - Please select a value - "));
            pairs.Add(new StateTextPair(State.Good, "Goed"));
            pairs.Add(new StateTextPair(State.Bad, "Slecht"));
            pairs.Add(new StateTextPair(State.Ugly, "Lelijk"));
        }
    }

    public class StateTextPair {
        private string name;
        private State state;

        public State State { get { return state; } }
        public string Name { get { return name; } }

        public StateTextPair(State s, string n)
        {
            this.name = n;
            this.state = s;
        }
    }
} 
```

# python - 从 pandas.DataFrame 中选择复杂的标准

> ID：15315452
> 
> 赞同：306
> 
> 时间：2013-03-09T20:17:49.170
> 
> 标签：python, pandas

例如，我有简单的 DF：

```
import pandas as pd
from random import randint

df = pd.DataFrame({'A': [randint(1, 9) for x in xrange(10)],
                   'B': [randint(1, 9)*10 for x in xrange(10)],
                   'C': [randint(1, 9)*100 for x in xrange(10)]}) 
```

我可以使用 Pandas 的方法和习语从“A”中选择“B”的对应值大于 50 和“C”的值 - 不等于 900 的值吗？

* * *

## 回答 #1

> 赞同：476
> 
> 时间：2013-03-09T20:24:23.220

当然！设置：

```
>>> import pandas as pd
>>> from random import randint
>>> df = pd.DataFrame({'A': [randint(1, 9) for x in range(10)],
                   'B': [randint(1, 9)*10 for x in range(10)],
                   'C': [randint(1, 9)*100 for x in range(10)]})
>>> df
   A   B    C
0  9  40  300
1  9  70  700
2  5  70  900
3  8  80  900
4  7  50  200
5  9  30  900
6  2  80  700
7  2  80  400
8  5  80  300
9  7  70  800 
```

我们可以应用列操作并获取布尔系列对象：

```
>>> df["B"] > 50
0    False
1     True
2     True
3     True
4    False
5    False
6     True
7     True
8     True
9     True
Name: B
>>> (df["B"] > 50) & (df["C"] == 900)
0    False
1    False
2     True
3     True
4    False
5    False
6    False
7    False
8    False
9    False 
```

[更新，切换到新风格`.loc`]：

然后我们可以使用这些索引到对象中。对于读取访问，您可以链接索引：

```
>>> df["A"][(df["B"] > 50) & (df["C"] == 900)]
2    5
3    8
Name: A, dtype: int64 
```

但是由于视图和副本之间的差异，您可能会遇到麻烦，因为这样做是为了写访问。您可以`.loc`改用：

```
>>> df.loc[(df["B"] > 50) & (df["C"] == 900), "A"]
2    5
3    8
Name: A, dtype: int64
>>> df.loc[(df["B"] > 50) & (df["C"] == 900), "A"].values
array([5, 8], dtype=int64)
>>> df.loc[(df["B"] > 50) & (df["C"] == 900), "A"] *= 1000
>>> df
      A   B    C
0     9  40  300
1     9  70  700
2  5000  70  900
3  8000  80  900
4     7  50  200
5     9  30  900
6     2  80  700
7     2  80  400
8     5  80  300
9     7  70  800 
```

请注意，我不小心输入了`== 900`and not `!= 900`, or `~(df["C"] == 900)`，但我懒得修复它。为读者练习。:^)

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2017-09-20T14:00:42.073

另一种解决方案是使用[查询](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html)方法：

```
import pandas as pd

from random import randint
df = pd.DataFrame({'A': [randint(1, 9) for x in xrange(10)],
                   'B': [randint(1, 9) * 10 for x in xrange(10)],
                   'C': [randint(1, 9) * 100 for x in xrange(10)]})
print df

   A   B    C
0  7  20  300
1  7  80  700
2  4  90  100
3  4  30  900
4  7  80  200
5  7  60  800
6  3  80  900
7  9  40  100
8  6  40  100
9  3  10  600

print df.query('B > 50 and C != 900')

   A   B    C
1  7  80  700
2  4  90  100
4  7  80  200
5  7  60  800 
```

现在，如果您想更改 A 列中的返回值，您可以保存它们的索引：

```
my_query_index = df.query('B > 50 & C != 900').index 
```

....并用于`.iloc`更改它们，即：

```
df.iloc[my_query_index, 0] = 5000

print df

      A   B    C
0     7  20  300
1  5000  80  700
2  5000  90  100
3     4  30  900
4  5000  80  200
5  5000  60  800
6     3  80  900
7     9  40  100
8     6  40  100
9     3  10  600 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2019-06-14T10:01:15.937

并记得使用括号！

请记住，`&`运算符优先于诸如`>`或`<`等运算符。这就是为什么

```
4 < 5 & 6 > 4 
```

评估为`False`。因此，如果您使用`pd.loc`，则需要在逻辑语句周围加上括号，否则会出错。这就是为什么这样做：

```
df.loc[(df['A'] > 10) & (df['B'] < 15)] 
```

代替

```
df.loc[df['A'] > 10 & df['B'] < 15] 
```

这将导致

> TypeError：无法将 dtyped [float64] 数组与 [bool] 类型的标量进行比较

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-01-05T22:08:29.700

您可以使用 pandas，它有一些内置函数进行比较。因此，如果您想选择满足“B”和“C”条件的“A”值（假设您想要返回一个 DataFrame pandas 对象）

`df[['A']][df.B.gt(50) & df.C.ne(900)]`

`df[['A']]`将以 DataFrame 格式返回 A 列。

pandas 'gt' 函数将返回 B 列大于 50 的位置，而 'ne' 将返回不等于 900 的位置。

# javascript - Javascript注册表单中的错误

> ID：15315459
> 
> 赞同：0
> 
> 时间：2013-03-09T20:18:28.033
> 
> 标签：javascript, jquery, validation

我正在编写一个注册表单脚本，`jquery validation`并且需要将一个变量传递给提交按钮，这样如果出现错误，表单将不会提交。这是表格中一行的代码：

```
 function check_email(){
            var email = $('#email').val();
            var filter = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
            if(!filter.test(email)){
                $('.emailStatus').removeClass("success").addClass("error"); 
            }
            else {
                $('.emailStatus').removeClass("error").addClass("success");
                [SOMETHING TO INDICATE NO ERROR OCCURS]
            }
        } 
```

然后，当我提交表单时，我需要它能够根据 [SOMETHING TO INDICATE NO ERRORS] 行发现没有错误发生并执行一个功能。如果不清楚，我很抱歉，但我对 Javascript 没有太多经验，但如果我能让这个表单工作，我会很高兴。可以用 if 语句中的变量来完成吗？

谢谢

# python - 下载 Python 3.3 模块

> ID：15315461
> 
> 赞同：0
> 
> 时间：2013-03-09T20:18:37.013
> 
> 标签：python, python-3.x, pip, easy-install

我正在用山狮在我的 Mac 上运行 python 3.3。我正在尝试下载 twitter api。大多数消息来源说使用 pip，这需要 easy_install，显然我没有。在终端中我运行 n`ew-host-2:~ lego90511$ easy_install pip`并作为响应我收到错误：无法在安装目录中创建或删除文件

尝试在安装目录中添加或删除文件时发生以下错误：

> [Errno 13] 权限被拒绝：'/Library/Python/2.7/site-packages/test-easy-install-25628.write-test'
> 
> 您指定的安装目录（通过 --install-dir、--prefix 或 distutils 默认设置）是：
> 
> /Library/Python/2.7/site-packages/
> 
> 也许您的帐户没有对该目录的写入权限？如果安装目录是系统拥有的目录，您可能需要以管理员或“root”帐户登录。如果您没有对这台机器的管理访问权限，您可能希望选择一个不同的安装目录，最好是 PYTHONPATH 环境变量中列出的一个。
> 
> 有关其他选项的信息，您可能希望在以下位置查阅文档：
> 
> [http://peak.telecommunity.com/EasyInstall.html](http://peak.telecommunity.com/EasyInstall.html)
> 
> 请对您的系统进行适当的更改，然后重试。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:26:24.473

你这里有两个问题。一是@garnertb 提到的权限问题。pip 尝试安装在 root 拥有的 Python 安装的站点包中。

另一个问题是您正在安装到 Apple 的 python 2.7 并且您说您想要 python 3.3。[在此处输入链接描述](http://www.virtualenv.org/en/latest/#installation)这样做的原因是easy_install 在其文本中包含它来自的python 的目录。只需键入 easy_install 即可让您获得路径上的第一个，在这种情况下，该路径看起来像是`/usr/bin/easy_install`Apple 安装的路径。你得到了 python 3.3 的 easy_install 你必须给出它的完整路径，这取决于你如何安装 python 3.3

pip[安装页面](http://www.pip-installer.org/en/latest/installing.html)说

> 警告 我们建议不要使用 easy_install 安装 pip

不幸的是，它建议的方法是按照[这个](http://www.virtualenv.org/en/latest/#installation)安装virtualenv，即使它们都是由同一组编写的，他们似乎都说从另一个开始。在 virtualenv 中采用源代码路径，即 pip 示例之后的第三和第四个条目。

全局安装是

```
$ curl -O https://pypi.python.org/packages/source/v/virtualenv/virtualenv-X.X.tar.gz
$ tar xvfz virtualenv-X.X.tar.gz
$ cd virtualenv-X.X
$ [sudo] python setup.py install 
```

在 OSX 上，我安装了 python，因此通过 Macports 安装了 pip，以便轻松安装需要复杂 C 构建的库，并且也使这个引导更容易，因为这已经为你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:20:37.797

如您的问题中所述，这可能是权限问题。尝试使用 sudo 安装：

```
sudo easy_install pip 
```

# javascript - Javascript“if and else”语句

> ID：15315468
> 
> 赞同：-4
> 
> 时间：2013-03-09T20:19:34.907
> 
> 标签：javascript, jquery, html, css

我有一个`Terms of Service`页面，我想强制用户`Checkbox`在单击接受按钮之前检查。否则它应该显示一个弹出消息说

**请在继续之前阅读服务条款**

如果选中并单击接受按钮，他们将重定向到官方网站。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:23:43.570

尝试这个：

```
<SCRIPT>

//Accept terms & conditions script (by InsightEye www.insighteye.com)
//Visit JavaScript Kit (http://javascriptkit.com) for this script & more.

function checkCheckBox(f) {
  if (f.agree.checked == false ) {
    alert('Please check the box to continue.');
    return false;
  } else {
    return true;
  }
}
</SCRIPT>

<form action="/yourscript.cgi-or-your-page.html" method="GET"
 onsubmit="return checkCheckBox(this)">

  <!--Enter your form contents here-->
  <b>By submitting, I agree that all info entered was done
     accurately & truthfully.</b><br>
     I accept: <input type="checkbox" value="0" name="agree">
  <input type="submit" value="Submit form">
  <input type="button" value="Exit" onclick="document.location.href='/index.html';">
</form> 
```

或这个：

```
<form name="frm">
  <input type="checkbox" name="chk" onClick="apply()">If you click this the specified
   url will open.
  <div align=center>&copy<a href="http://www.mine.com" style="color:#3D366F;text-decoration:none;cursor:pointer;font-size=13px">hscripts.com</a></div>
</form>
<script type="text/javascript">
  function apply() {
   if(document.frm.chk.checked==true) {
     window.open("http://www.mine.com/license/license.html");
   }
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:31:31.637

检查这个`condition`。`submit handler`

```
if (formname.checkboxname.checked == true)
   {
      //showalert

      return false;
   }else{

     //open your page
  } 
```

# appharbor - 为什么我的 AppHarbor 网站随机需要超过 10 秒才能响应

> ID：15315473
> 
> 赞同：0
> 
> 时间：2013-03-09T20:20:01.630
> 
> 标签：appharbor

我有一个 Pingdom 检查，每 5 分钟运行一次，它报告我的网站的平均响应时间似乎随机变慢。该网站仍在开发中，因此未使用。这是一个带有 NHibernate 并使用“Shared Microsoft SQL Server as a service”插件的 ASP.NET MVC 站点。这可能是什么原因造成的？

Pingdom 报告数据：

00:00–01:00 266 毫秒
01:00–02:00 5,459 毫秒
02:00–03:00 336 毫秒
03:00–04:00 267 毫秒
04:00–05:00 275 毫秒
05:00–06 :00 334 毫秒
06:00–07:00 513 毫秒
07:00–08:00 11,663 毫秒
08:00–09:00 316 毫秒
09:00–10:00 4,680 毫秒
10:00–11:00 350 毫秒
11 :00–12:00 10,234 毫秒
12:00–13:00 2,866 毫秒
13:00–14:00 263 毫秒
14:00–15:00 309 毫秒
15:00–16:00 308 毫秒
16:00–17: 00 5,261 毫秒
17:00–18:00 5,121 毫秒
18:00–19:00 6,873 毫秒
19:00–20:00 315 毫秒
20:00–21:00 ? 当天无数据 21:00–22:00 405 ms
22:00–23:00 346 ms
23:00–24:00 413 ms

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:35:18.907

我认为 IIS 的默认设置是每 29 小时重新启动一次应用程序池，因此如果您的站点除了 Pingdom 生成的流量之外没有看到大量流量，您可能会看到 pingdom 生成的第一个请求很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:53:42.513

我得到了 AppHarbor 支持的快速回复，他们解决了这个问题。这是我的服务器实例的某种错误，它有 2 个工作人员。缓慢的 Pingdom 响应可能是由“冷”工作人员处理请求的地方。

# c - 当有全局指针时，为什么分叉的进程不会相互影响？

> ID：15315482
> 
> 赞同：3
> 
> 时间：2013-03-09T20:20:46.237
> 
> 标签：c, linux, pointers, global-variables, fork

我知道该`fork()`函数创建了一个与其父进程相同的进程，只是它具有的 PID 不同。它们最初具有相同的变量，**对这些变量所做的更改不会相互影响**。但是当一个全局指针变量被共享时会发生什么呢？

我已经编写了一些代码并打印了结果。看起来父进程和子进程的指针指向**相同**的内存位置，但是对这些内存位置（即`*p = 1`父进程和子进程）所做的更改`*p = 2`不会相互影响。另请注意，我创建父进程`wait(NULL)`，直到子进程退出。所以子进程改变了指针指向的值，该指针与父进程的指针具有相同的内存地址。

我知道什么时候`fork()`被调用，父进程克隆所有内容：寄存器、程序计数器等。但这怎么可能呢？子进程退出后，父进程的变量值不应该改变吗？是因为系统将所有内容（包括父进程的指针变量）都放入堆栈并在子进程终止时弹出它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:49:30.930

当一个进程被分叉时，新进程对于所有（？）意图和目的都是原始进程的*副本*，具有自己的[虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_memory)，文件描述符等在一个相当简单的视图中，相同的内存地址实际上将指向不同的每个进程的物理内存地址 - 您可以有两个相同的指针指向完全​​不同的数据。

自然，在现代操作系统中，事情并不那么简单。`fork()`例如，实际上并没有*复制*所有内容，因为这会浪费处理器时间和内存。内核利用一些[页表](http://en.wikipedia.org/wiki/Page_table)操作来实现[写时](http://en.wikipedia.org/wiki/Copy-on-write)复制内存复制。此外，出于性能和正确性的原因，可以在某种程度上控制哪些资源将实际克隆到子进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:51:36.060

这是一个非常大的话题，但这里有一个简短的解释。您可能将执行线程与分叉进程混淆了。在 Unix 系统中，每个进程都是独立的，并且有自己的虚拟地址空间。这意味着将指针设置为相同地址的两个进程实际上通常会在物理内存中使用不同的地址。这个概念是任何体面操作系统的重要组成部分 - 在更原始的操作系统上，正在运行的程序将可以直接访问物理内存。事实上，如果你一次运行一千个可执行文件实例，你可能会发现每个实例都使用完全相同的地址。

除了由此带来的安全优势之外，它还允许程序的“文本”部分（二进制指令）由正在运行的程序的所有实例共享。内核可以将每个进程映射到物理内存中的相同地址。

孩子是父母的精确副本，或者共享一切是不正确的。有一长串继承的东西，以及没有的东西。它几乎是相同的——它具有相同的可执行代码、相同的打开文件等，但它是一个完全独立的、独立的进程。

# macruby - 热可可按钮背景颜色

> ID：15315487
> 
> 赞同：0
> 
> 时间：2013-03-09T20:21:49.123
> 
> 标签：macruby, hotcocoa

我正在开发基于 macruby 和 hotcocoa 框架的项目。我不知道目标c。在我的项目中，我想更改按钮（NSButton）的颜色。你知道如何使用 hotcocoa 映射器或 macruby 来实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:30:57.680

不直接支持设置 NSButton 的背景颜色。创建自定义按钮的一种可靠方法是继承 NSButton 并覆盖 drawRect:。另一种方法是使用 CALayers 自定义按钮。

```
layer = CALayer.layer
layer.backgroundColor = NSColor.orangeColor.CGColor
button.setLayer layer
button.setWantsLayer true 
```

# java - 修复无限循环？

> ID：15315492
> 
> 赞同：0
> 
> 时间：2013-03-09T20:22:33.093
> 
> 标签：java, eclipse, numbers, infinite-loop

我是 Comp Sci 专业的一年级学生，在课堂上我们有一个项目，我们在其中为名为“Bagels”的游戏制作算法。我们要制作一个随机的 3 位数字，但没有一个数字可以是相同的数字。因此，像“100、220、343 和 522”这样的数字将是非法的，因为它们包含具有相同数字的数字。

我决定最好分别生成每个数字，比较每个数字并根据需要进行更改，然后将每个数字添加到字符串中。这是我的代码：

```
Scanner input = new Scanner(System.in);

    // Generate a random 3 digit number between 102 and 987\. The bounds are 102 to 987 because each 
    // digit in the number must be different. The generated number will be called SecretNum and be
    // stored as a String.

    // The First digit is generated between 1 and 9 while the second and third digit are generated 
    // between 0 and 9.

    String SecretNum = "";
    int firstDigit = (int)(Math.random() * 9 + 1);
    int secondDigit = (int)(Math.random() * 10);
    int thirdDigit = (int)(Math.random() * 10);

    // Now the program checks to see if any of the digits share the same value and if one digit shares 
    // the same value then the number is generated repeatedly until the value is different

    // Digit tests are used to determine whether or not any of the digits share the same value.
    boolean firstDigitTest = (firstDigit == secondDigit) || (firstDigit == thirdDigit);

    boolean secondDigitTest = (secondDigit == firstDigit) || (secondDigit == thirdDigit);

    boolean thirdDigitTest = (thirdDigit == firstDigit) || (thirdDigit == secondDigit);

    if (firstDigitTest){
        do{
            firstDigit = (int)(Math.random() * 9 + 1);
        }while (firstDigitTest);

    } else if (secondDigitTest){
        do{
            secondDigit = (int)(Math.random() * 10);
        }while(secondDigitTest);

    } else if (thirdDigitTest){
        do{
            thirdDigit = (int)(Math.random() * 10);
        }while(thirdDigitTest);
    }// end if statements

    // Now the program will place each digit into their respective places
    SecretNum = firstDigit + "" + secondDigit + "" + thirdDigit;

    System.out.println(SecretNum); 
```

（暂时忽略扫描仪；这部分不需要，但我稍后会需要它）

不幸的是，当我测试数字以查看是否有相同的数字时，我有时会陷入无限循环。棘手的部分是，有时它会像无限循环一样运行，但会在我终止程序之前生成数字。所以有时如果它处于无限循环中，我不确定它是否真的处于无限循环中，或者我很不耐烦，但我确定这是一个无限循环问题，因为我等了大约 10 分钟，程序仍在运行。

我真的不知道为什么它会变成一个无限循环，因为如果一个数字与另一个数字匹配，那么这个数字应该不断生成，直到它是一个不同的数字，所以我不明白它是如何变成无限循环的。这是我需要帮助的地方。

（哦，我如何制作字符串不是我将如何保留它。一旦我修复了这个循环，我会改变它，以便将数字附加到字符串中。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:26:06.570

问题是（例如）`firstDigitTest`被设置为一个特定的布尔值，要么`true`or `false`，并且从不改变。即使您设置`firstDigit`为不同的值，从而解决了`firstDigitTest`检测到的问题，您也不会重新更新`firstDigitTest`以检测问题是否仍然存在。所以你的每一个循环，如果它被输入，将无限循环。

我认为您不妨只消除您的布尔变量，然后循环`while(firstDigit == secondDigit || firstDigit == thirdDigit || secondDigit == thirdDigit)`。

# netbeans - 在 Netbeans 中编译简单的新 CUDA 项目

> ID：15315502
> 
> 赞同：1
> 
> 时间：2013-03-09T20:23:39.100
> 
> 标签：netbeans, cuda

我在 Netbeans 中创建了新的 C++Application 并想编译简单的 CUDA，例如：

```
#include <cstdlib>
// includes, system
#include <stdio.h>

// includes CUDA Runtime
#include <cuda_runtime.h>

// includes help
#include <helper_cuda.h>
#include <helper_functions.h> // helper utility functions 

/*
 * 
 */

__global__ void add(int* a , int* b, int* c){
    *c=*a+*b;
}

int main(int argc, char** argv) {
    int a,b,c; //host copies of a,b,c
    int* d_a,*d_b,*d_c; //device copies of a,b,c
    int size=sizeof(int);

    //allocate space for device copies of a,b,c
    cudaMalloc((void**)&d_a,size);
    cudaMalloc((void**)&d_b,size);
    cudaMalloc((void**)&d_c,size);

    //setup input
    a=2;
    b=7;

    //copy inputs to device
    cudaMemcpy(d_a,&a,size,cudaMemcpyHostToDevice);
    cudaMemcpy(d_b,&b,size,cudaMemcpyHostToDevice);

    //launch add() kernel on GPU device
    add<<<1,1>>>(d_a,d_b,d_c);

    return 0;
} 
```

当我通过 IDE 构建时，它正在做的事情是：

> "/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf make[1]: 进入目录 `/root/NetBeansProjects/my_CUDA_1' "/usr/bin/make" -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/libmy_cuda_1.a make[2]: Entering directory`/root/NetBeansProjects/my_CUDA_1' mkdir -p build/Debug/GNU-Linux- x86 rm -f build/Debug/GNU-Linux-x86/cudaMain.od /usr/local/cuda-5.0/bin/nvcc
> -c -g -I/usr/local/cuda-5.0/include -I/usr/ local/cuda-5.0/samples/common/inc -MMD -MP -MF build/Debug/GNU-Linux-x86/cudaMain.od -o build/Debug/GNU-Linux-x86/cudaMain.o cudaMain.cu nvcc fatal ：未知选项“MMD”

所以我可以通过在没有这些选项的命令行中手动编译来避免这个错误：

> me@comp:/root/NetBeansProjects/my_CUDA_1# /usr/local/cuda-5.0/bin/nvcc -m64 -c -g -I/usr/local/cuda-5.0/include -I/us r/local/cuda -5.0/samples/common/inc -o build/Debug/GNU-Linux-x86/cudaMain.o cudaMain.cu cudaMain.cu(28)：警告：变量“c”已声明但从未被引用
> 
> cudaMain.cu(28)：警告：变量“c”已声明但从未被引用
> 
> me@comp:/root/NetBeansProjects/my_CUDA_1# ls

如何，在 Netbeans 中配置什么以在 IDE 中获取此类设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:43:04.543

Project->Properties->Build on tab Expert: Enable make Dependency Checking -> uncheck this

# spring - 将 JTA 与 Hibernate 一起使用

> ID：15315510
> 
> 赞同：0
> 
> 时间：2013-03-09T20:24:45.673
> 
> 标签：spring, hibernate, web-applications, jta

在带有 Hibernate 和 Spring 的 Web 应用程序中使用 JTA 的主要目标是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:55:30.160

主要的一个是支持分布式事务。例如，您可能希望写入数据库并发送 JMS 消息，并且这两个部分属于同一事务。或者修改两个不同的数据库。

另一个原因可能是您已经在 J​​ava EE 容器中运行您的应用程序，为 JTA 提供支持，并希望从容器服务（诊断、统计等）中受益。

# sql - 如何使用正确的 ISO 国家/地区更新表格？

> ID：15315512
> 
> 赞同：0
> 
> 时间：2013-03-09T20:25:07.030
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个`MyTable`包含这样数据的表：

```
[Production],[Region Country],[CustID]
computer,US,123
phone,CA,321
shirt,NZ,111 
```

我想要做的是将 2 个字母的国家代码 (ISO) 更改为该表中所有记录（300 万条记录）的完整国家名称。

我有一张表`Countries`，其中包含所有 2 个字母的国家/地区代码及其“全名”。所以我可以查看此表进行更新。

```
CREATE TABLE [dbo].[Countries](
[NumericalCode] [char](3) NOT NULL,
[CountryNameLowerCase] [nvarchar](50) NOT NULL,
[CountryNameUpperCase] [nvarchar](50) NOT NULL,
[ISO_ALPHA3] [char](3) NOT NULL,
[ISO_ALPHA2] [char](2) NOT NULL
) ON [PRIMARY] 
```

因为`US`它会有这些数据：

```
840,United States of America,UNITED STATES,USA,US 
```

最终结果将是一个查看 MyTable 记录并`Region Country`根据其在`Countries`表中的全名（列`CountryNameLowerCase`）进行更新的过程。

最好的方法是什么（性能方面）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:29:27.097

`UPDATE`简单的方法是使用带有 a的单个蛮力更新`JOIN`：

```
UPDATE m
  SET [Region Country] = c.CountryNameLowerCase 
  FROM dbo.MyTable AS m
  INNER JOIN dbo.Countries AS c
  ON m.[Region Country] = c.ISO_ALPHA2; 
```

现在，这样的更新可能会生成大量的日志，以及当您将更多信息压缩到每一行时的页面拆分（如果您使用数据压缩，还要考虑开销）。在某些情况下，分批执行更新可能会更好，例如，一种方法是针对每个国家/地区组合使用光标（如果您的国家/地区分布相对均匀，这将效果最佳，但如果 90%数据是`US`）：

```
DECLARE @old NVARCHAR(255), @new NVARCHAR(255); -- use the right type here

DECLARE c CURSOR LOCAL FAST_FORWARD
  FOR SELECT m.[Region Country], c.CountryNameLowerCase
    FROM dbo.MyTable AS m
    INNER JOIN dbo.Countries AS c
    ON m.[Region Country] = c.ISO_ALPHA2
    GROUP BY m.[Region Country], c.CountryNameLowerCase;

OPEN c;

FETCH NEXT FROM c INTO @old, @new;

WHILE @@FETCH_STATUS = 0
BEGIN
  BEGIN TRANSACTION;

  UPDATE dbo.MyTable
    SET [Region Country] = @new
    WHERE [Region Country] = @old;

  COMMIT TRANSACTION;

  -- experiment with CHECKPOINT if simple
  -- or BACKUP LOG if full. This will depend
  -- on your current log size and autogrow
  -- settings; it can make things worse.

  --CHECKPOINT;
  --BACKUP LOG yourdb TO DISK ...;
END 
```

另一种方法是限制行数，例如将代码的相关部分替换为这样的内容，您将更新限制为一次 1000 行：

```
DECLARE @rc INT;

WHILE @@FETCH_STATUS = 0
BEGIN

  SET @rc = 1;

  WHILE @rc <> 0
  BEGIN
    BEGIN TRANSACTION;

    UPDATE TOP (1000) dbo.MyTable
      SET [Region Country] = @new
      WHERE [Region Country] = @old;

    SET @rc = @@ROWCOUNT;

    COMMIT TRANSACTION;
  END 
```

关键是保持个人交易简短。更新所有 300 万行可能是可以容忍的（取决于您执行这项工作的时间 - 例如下班时间、维护窗口等），但有一些技巧可以将这些更新批量化并最大限度地减少对事务日志和并发性的影响。在某些情况下，这种分块会使更新花费更长的时间，但不是全部，而且速度通常不是主要问题（当您第一次锁定系统更新整个表时会发现）。

（顺便说一句，现在正在写一篇关于这类事情的博客文章。）

# performance - Symfony2 加载时间和性能

> ID：15315515
> 
> 赞同：7
> 
> 时间：2013-03-09T20:25:21.523
> 
> 标签：performance, symfony, loading

我正在做一个不太大的项目（我创建了 3 个捆绑包，下载了 6 个 / 5 个实体），并且我已将此代码放在我的家庭控制器上：

```
class HomeController extends Controller
{
    public function indexAction()
    {
        $time = microtime(true) - $_SERVER["REQUEST_TIME_FLOAT"];
        echo $time; 
        die();

        //... 
```

它在本地主机（启用 APC）上给了我不到**100 毫秒**的时间，这很好。

真正的问题是在线服务器上的行为（使用 prod env 和未安装 APC）：如果我 10 分钟不使用该网站，第一次加载真的很慢（**2 到 4 秒**）然后如果我留在网站上，如果我刷新页面，它会更快（**从 500 毫秒到 1 秒**）。

**这正常吗？我的在线服务器或我的 symfony2 项目有问题吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:36:56.573

您应该明确设置 APC 以减少加载时间。这是一个注释：

[表现](http://symfony.com/doc/2.7/book/performance.html)

（2015 年编辑：链接已更新）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T02:19:47.390

只需看看 Symfony 提供的出色工具栏/分析器的时间线选项卡：http: [//symfony.com/blog/new-in-symfony-2-2-new-stopwatch-component](http://symfony.com/blog/new-in-symfony-2-2-new-stopwatch-component) （不限于 2.2）

您是否使用 localhost 作为 database_host？如果是这样，请尝试 127.0.0.1 代替！

您是否正在访问像 Facebook (FOSUserBundle) 这样的第三方 API？

# wordpress - 如何限制主页中的帖子数量？

> ID：15315521
> 
> 赞同：0
> 
> 时间：2013-03-09T20:25:51.107
> 
> 标签：wordpress, post, pagination

我面临在主页上显示有限数量的帖子的问题。

```
 I want to show 2 posts in home page then pagination link (older post-->>        Newer Post-->) 
```

我正在使用此代码

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$my_query = new WP_Query('showposts=2&paged=' . $paged);

while ( $my_query->have_posts() ) : $my_query->the_post(); ?> 
```

它在首页显示 2 个帖子，但是当我单击下一个帖子时-->> 然后仅显示 3 页

但我有 24 个帖子，所以应该显示 12 页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T08:15:28.280

只需在 WP_Query() 中使用 arg“post_per_page”

法典：[http ://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

# oop - 如何在 Coldfusion 中处理“方法代码长度无效”？

> ID：15315522
> 
> 赞同：1
> 
> 时间：2013-03-09T20:25:52.377
> 
> 标签：oop, coldfusion, cfc, filesize, cfinvoke

我有一堆`cfc`文件（正在运行`coldfusion8`），其中包含`cfswitch`捆绑的类似功能（用户、搜索、...）。

一些 cfc 文件变得太大，所以我收到一个`Invalid method Code length 72645`我假设的内容，“你的文件太大而无法解析”..

我通常会在大约 2000 行时达到这一点，并认为这……不多。

由于我在一堆文件上突破了这个上限，我正在考虑添加另一个功能层 = 从 switch 语句中删除所有函数，并`cfinvoke`为每个函数使用单独的 cfc 调用。

**问题：**
我的应用程序不是那么大，所以我想知道，有没有办法绕过“you-can't-have-more-than-2000-lines-in-a-cfc”的上限，如果不是，为应用程序中要调用的每个主要方法使用单独的 CFC/组件是否可行？

谢谢！

**编辑：**回复：“计划中” :-)
目前我的 CFC 的结构如下：

```
<cfcomponent extends="controllers.main" output="false" hint="handle all user interactions">     
    <cfscript>
        VARIABLES.Instance.Validation = {   
            // all user-relate form fields including validation method to call (pass = no validation)
            id="spec_id"
          , corp="pass"
          ...
        };
    </cfscript> 

    <cffunction name="Init" access="public" returntype="any" output="false" hint="Initialize form data">
        <cfreturn true />
    </cffunction>   
    <cffunction name="Defaults" access="public" returntype="struct" output="false" hint="Assign defaults">
       <cfscript>
          // form default values assigned to instance
          var formDefaults = {
              id=""
            , comp=""
            ...
          };
       </cfscript>
       <cfreturn formDefaults />
    </cffunction>

    <cffunction name="Commit" access="remote" returntype="struct" output="false" hint="Main handler">
        <cfscript>
        // all var declarations
        var userID = "";
        var strRememberMe = "";
        var timestamp = now();
        ... 
        var defaultValues = THIS.Defaults();
        var LOCAL = {};

        structAppend(defaultValues, VARIABLES.Instance.FormData);
        LOCAL.User = defaultValues;
        LOCAL.User.timestamp = timestamp ;
        </cfscript> 

        <!--- the switch --->       
        <cfswitch expression = #LOCAL.User.submitted_form#>

            ... lot of stuff ...

        </cfswitch>

        <cfreturn LOCAL.Response />
    </cffunction>

    <!--- UTILITY FUNCTIONS --->
    <cffunction name="Validate" access="public" returntype="array" output="false" hint="validate form inputs">
        <cfscript>
        var LOCAL = {};
        var double = structNew();
        double.criteria = VARIABLES.Instance.Validation;
        double.form = VARIABLES.Instance.FormData;
        </cfscript>

        <!--- Get error name and type --->
        <cfinvoke component="form_validate" method="validate_fields" double="#double#" returnvariable="validation_errors"></cfinvoke>
        <cfset LOCAL.ErrorMessages = validation_errors />
        <cfreturn LOCAL.ErrorMessages />
    </cffunction>                                   
</cfcomponent> 
```

现在我一直在写很多非结构化的东西，但是在功能性cfcs 中拆分然后像这样处理它们对我来说似乎并不是很“没有计划”。

如果是这样，那么设置它的更好方法是什么，因为无论如何我都必须重新做？交换机将有大约 15 个案例，这是我使用的所有主要 cfcs 的平均值。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:16:03.750

我前段时间在CF8中也遇到过这个问题。没有一般的“2000 行限制”，而是在 JVM 中为地址偏移设置一个最大值，以便在子程序内跳转。偏移量不得超过 2 字节 (WORD)，否则您将面临此异常。为避免子例程（函数）中出现较大的地址偏移，您需要尽量减少大块条件跳转（if/else/switch）。您可以改为使用多个子例程来做到这一点（这些调用可能会占用最多 4/8 字节的完整寄存器）。

例如：重新设计...

```
function A (x, y) {
    if (...) {
        switch (...) {
            case ...:
                switch (...) {
                    ...
                }
            ...
        }
    } else {
        switch (...) {
            ...
        }
    }
} 
```

像...

```
function A (x, y) {
    if (...) {
        call B(x, y);
    } else {
        call C(x, y);
    }
}

function B (x, y) {
    switch (...) {
        case ...:
            call B1(x, y);
        ...
    }
}

function B1 (x, y) {
    switch (...) {
        ....
    }
}

function C (x, y) {
    switch (...) {
        ....
    }
} 
```

...你明白了。这通常也会提高可读性和可维护性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-09T18:58:33.717

基本上发生此错误是因为您在 ColdFusion 中编写的函数或方法超出了每个方法 65535 字节的 Java 限制（大约 2000 行 CF 代码）。

只需通过从该函数调用较小的函数来缩小该函数。

调用一个 10,000 字节的函数只需要 100 个字节。

```
Before (blows up):
    Function(){
      10,000 bytes of code
      15,000 bytes of code
      20,000 bytes of code
      30,000 bytes of code
    }

    After (success!):
    Function(){
      100 Byte call to 10,000 bytes of code
      100 Byte call to 15,000 bytes of code
      100 Byte call to 20,000 bytes of code
      100 Byte call to 30,000 bytes of code
    } 
```

# linux-kernel - linux-kernel {{ 添加系统调用：从用户空间测试：数据/printk 问题}}

> ID：15315533
> 
> 赞同：0
> 
> 时间：2013-03-09T20:26:55.757
> 
> 标签：linux-kernel, printk

好的，所以我已经成功地向内核空间添加了一些系统调用。目前我已经将他们的主要意图注释掉了，我想确保数据成功地从用户空间传递到内核空间并按预期进行。我目前遇到一个问题，将用户空间中的变量声明为 unsigned long，当它通过 printk 打印时，值不一样。我已经查看了有关该主题的其他问题，这些问题似乎相关并且没有帮助，我认为人们只是使用 printk 错误。我之前用内核空间测试过这个，只打印一个字符串，一切都很好，所以我添加了从用户空间传递的数据并遇到了这个问题，所以......

## 用户空间：

```
#define _GNU_SOURCE
#include <stdio.h>
#include <unistd.h>
#include <linux/kernel.h>
#include <sys/syscall.h>

#define __NR_createQueue 350

long createQueue_syscall(unsigned long id){
     return syscall(__NR_createQueue);
}

int main(int argc, char *argv[]){
     unsigned long qid = 47;  // ID for a queue

     createQueue_syscall(qid);
     return 0;
} 
```

## 内核空间：

```
#include linux/kernel.h  

asmlinkage long createQueue(unsigned long id){

  printk("  The queue ID is: %lu \n", id);

  return 0;
} 
```

所有编译都很好，没有警告或错误。但是当我运行: 时`dmesg | tail -20`，我得到一个像*1334886164*而不是我期望的*47的值。*（是的，我做了所有需要的`make`, `make module_install install`, `reboot`, 等等）。就好像它正在抓取垃圾/过度运行内存或其他东西。但我不知所措。有什么想法/想法吗？

```
Many Thanks! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:44:47.817

您需要将功能更改为：

```
long createQueue_syscall(unsigned long id){

    return syscall(__NR_createQueue, id); /* note the additional parameter */

} 
```

我猜 id 没有通过，因此被分配了一些随机整数。

# export-to-csv - 可以处理制表符分隔和 CSV 的文本编辑器插件或导入实用程序

> ID：15315534
> 
> 赞同：0
> 
> 时间：2013-03-09T20:27:06.723
> 
> 标签：export-to-csv, csv

常见问题解答说这是主题：

```
 SOFTWARE TOOLS COMMONLY USED BY PROGRAMMERS 
```

所以我希望它不会关闭！我上次问的时候，它被关闭为题外话。

编辑：涉及 Excel 的建议答案将不起作用，因为*Excel 在 IN 的过程中破坏了制表符分隔的文件*。我没有用 Python 编程，据说那里的 Python 实用程序不能处理带有嵌入式引号和逗号的字符串。我需要一些理解 RFC 4180 的东西。

我需要一个可以导出为标准**引号**逗号分隔格式的实用程序或文本编辑器插件。我不想自己写，因为我还有其他更紧迫的代码要写。

这种格式（几十年来的标准 CSV 变体）在字符串周围加上双引号，但不考虑数字，它用逗号分隔字段，并允许在数据中使用逗号（这就是引用字符串的原因）。

最新版本的 Excel 不会在字符串周围添加双引号；旧版本做到了。

如果您知道程序员使用的软件工具可以从容地执行此任务，请告知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:10:28.913

您可以使用该`sed`工具来完成此操作。给定您的示例，假设管道是选项卡：

> John|McDougal|"Mac"|123 Main St|Princeton|NJ|08543||100.88|20130309|骑自行车，远足

和你想要的输出：*

> "John","McDougal",""Mac""","123 Main St","Princeton","NJ","08540","100.88","","20130309","骑自行车, 远足"

这可以通过以下方式完成：

*   替换`"`为`""`
*   用引号括起来的逗号替换制表符
*   用引号包裹每一行
*   修剪尾随空行

使用`sed`，只需这样做：

```
sed 's/"/""/g; s/\t/","/g; s/^\|$/"/g; /^"$/d' < in.tsv > out.csv 
```

GnuWin 项目[在这里](http://gnuwin32.sourceforge.net/packages/sed.htm)`sed`为 Windows 维护一个端口。

[* 我认为你需要`"""Mac"""`而不是`""Mac""`如上所述。]

# python - 编写非阻塞代码与创建大量 webserver worker 的比较

> ID：15315536
> 
> 赞同：1
> 
> 时间：2013-03-09T20:27:15.170
> 
> 标签：python, nginx, webserver, tornado, nonblocking

我的 Web 应用程序的主要功能是一种阻塞方法，它将等待 1 到 5 秒的 I/O 响应。我可以通过创建另一个线程并使用非阻塞框架（如`Tornado`.

`flask`但与`nginx`在大量工作线程上使用我的阻塞代码相比，我不确定这个解决方案的优点。

我知道这种方式会比非阻塞方式消耗更多的 RAM，但就我而言，整个过程并不是很大。对我来说最重要的是有一个简单的代码和良好的性能。

为了获得更多许可，我应该说在这种情况下，耗时的过程是使用`Ghost.py`.

# java - Java Runnable 不起作用

> ID：15315539
> 
> 赞同：-2
> 
> 时间：2013-03-09T20:27:29.900
> 
> 标签：java, swing

我有一个加载新闻的课程。

```
package swing;
import java.awt.Color;
import java.net.URL;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;
import net.Logger;
import net.Util;

public class WebPanel extends JScrollPane implements Runnable {
    private JTextPane editorPane;
    private String link;

    public WebPanel(final String link) {
        this.link = link;
        editorPane = new JTextPane();
        editorPane.setContentType("text/html");
        editorPane.setBackground(Color.DARK_GRAY);
        editorPane.setEditable(false);
        editorPane.setMargin(null);
        editorPane.setBorder(null);
        setBorder(null);
        editorPane.setBackground(Color.DARK_GRAY);
        editorPane.setText("<html><body><font color=\"#808080\"><br><center>Getting data</center></font></body></html>");
    }

    @Override
    public void run() {
        try {
            editorPane.setPage(new URL(link));
        } catch (Exception e) {
            Logger.logError("setting web page failed ", e);
            editorPane.setContentType("text/html");
            editorPane.setText("<html><body><font color=\"#808080\"><br><center>Failed to get data<br>" + e.toString() + "</center></font></body></html>");
        }

        editorPane.addHyperlinkListener(new HyperlinkListener() {
            @Override
            public void hyperlinkUpdate(HyperlinkEvent he) {
                if (he.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
                    try {
                        Util.openLink(he.getURL().toURI());
                    } catch (Exception e) {
                        Logger.logError("hyperlinkUpdate failed", e);
                    }
                }
            }
        }); 

        setViewportView(editorPane);
   }

   public String GetLink() {
       return editorPane.getPage().toString();
   }
   public final void setLink(final String link) {
       this.link = link;
   }} 
```

它是可运行的，但是当我更新页面时（我有 GUI 类我这样做）Lo

```
public static WebPanel scrollPane = new WebPanel(Util.newslink);
...
LoginForm.scrollPane.setLink(Util.newslink);
new Thread(LoginForm.scrollPane).start(); 
```

我的程序在加载页面之前无法运行（无法按下任何按钮）。我尝试使用创建线程`invokeLater()`，但没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:32:45.227

最可能的原因是您在 GUI 线程中等待 Web 下载。这样做会在您等待时阻止 GUI。

如果您不希望发生这种情况，请使用另一个线程进行下载并使用 invokeLater 获取结果并在完成时更新 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:33:49.997

现在，您正在对负责更新 GUI 的事件调度线程 (EDT) 进行阻塞调用。这将显示该应用程序没有执行任何操作，因为在您的阻止呼叫之前它无法更新。你真的应该利用 a[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)在后台线程上做“繁重”的工作。

查看教程[Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，了解有关如何在后台线程上执行长时间运行的任务的详细信息。

# java - 有没有办法将数字（在我的情况下为双精度数）转换为 java 中的复数？

> ID：15315540
> 
> 赞同：0
> 
> 时间：2013-03-09T20:27:44.187
> 
> 标签：java, complex-numbers, data-conversion

我需要双精度的实部和虚部进行进一步处理，我几乎不知道如何将它们转换为复数。任何输入将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:29:31.887

Java 没有复数类型。

要存储/表示复数，您必须：

*   创建自己的类型
*   使用变量（即 Re、Im）
*   或使用 3rd 方库

此外，就将双精度数“转换”为复数而言，双精度数显然只能表示复数的虚部或实部。因此，您必须更具体地说明您的意思。如果你想将一个双精度数转换为一个复数的实部等于你的双精度和虚部等于 0。那应该很简单..

如果您想创建自己的类型，它可能如下所示：

```
class ComplexNumber{
   public ComplexNumber(double re, double im)
   {
       _re = re;
       _im = im;
   }

   private double _re;
   public double getReal(){
      return _re;
   }
   private double _im;
   public double getImaginary(){
       return _im;
   }

   @overrides
   public boolean equals(object other){
       if(other == null)
          return false;
       ComplexNumber n = (ComplexNumber)other;
       return _re.equals(n._re) && _im.equals(n._im);
   }

   @overrides
   public boolean getHashCode(){
       return _re.getHashCode() ^ _im.getHashCode();
   }

   @overrides
   public void toString(){
       return "(" + re.toString() + "," + im.toString() + ")";
   }
} 
```

请注意，此类具有不可变的语义（即，一旦实例化，您就不能修改它的内部状态）。如果您要表示一个复数，这是可取的。然后您可以使用静态方法来加/减/乘/除这些复数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:31:01.557

我建议您构建一个复数类，因为您可能知道您可以使用两个坐标值在平面上表示复数，因此该类可以为这些值保存两个双精度数。然后就是看看如何除法，乘法，减法和加法，并制作方法除法，乘法，减法，加法，每个方法都将一个复数对象作为参数。

# java - 在 Java 中写入 Perl 进程输入流

> ID：15315542
> 
> 赞同：1
> 
> 时间：2013-03-09T20:28:03.797
> 
> 标签：java, perl, http, unix, web-applications

我正在尝试使用在 UNIX 上运行的 java 编写一个简单的 webserver 类。

WebServer 类将调用 perl 脚本，该脚本将根据请求生成 HTML。

考虑一下：

1.  客户端向 WebServer 发送 HTTP POST 请求
2.  阅读 HTTP POST 正文：`"description=asd&action=add"`
3.  HTTP POST Body 写入`byte[] byteParams`如下所示
4.  需要写入`byteParams`Perl Process 对象以生成适当的 HTML

代码：

```
String postParams = "/usr/bin/env REQUEST_METHOD=POST QUERY_STRING= " +" CONTENT_LENGTH=" + contentLength + " CONTENT_TYPE=" + contentType + " /usr/bin/perl " + filename;
Process perlProcess = Runtime.getRuntime().exec(postParams);

DataOutputStream writeToPerl = new DataOutputStream(perlProcess.getOutputStream());             
//write the http post request body to writeToPerl    
writeToPerl.write(byteParams, 0, byteParams.length);            

InputStreamReader readFromPerlInputStream = new InputStreamReader(perlProcess.getInputStream());
BufferedReader readFromPerl = new BufferedReader(readFromPerlInputStream);    
BufferedReader readFromPerlError = new BufferedReader(new InputStreamReader(perlProcess.getErrorStream())); 
```

所以现在我们有了 perlProcess 对象，它将读取 UNIX 中的环境变量以生成适当的 HTML。

在写入 Perl Process 对象的 DataOutputStream 之后，它会根据输入（HTTP Post 正文）自动写入其标准输出吗？

或者我是否需要告诉 Process 对象来读取我刚刚写入的内容`DataOutputStream writeToPerl`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:09:14.803

我找到了我的问题的答案。

在写入`DataOutputStream`Perl Process 对象后，它会`BufferedReader readFromPerl`根据`DataOutputStream`.

`BufferedReader`我有一些文件权限问题导致我问这个问题，因为在写入 Perl 对象后我没有从 Perl 对象中得到预期的结果`DataOutputStream`

# javascript - JS 关闭重定向

> ID：15315543
> 
> 赞同：0
> 
> 时间：2013-03-09T20:28:04.180
> 
> 标签：javascript

我们有一个用于支持的聊天脚本。我想知道在用户关闭或尝试使用 JS 关闭聊天页面后，是否可以在当前窗口或父窗口中重定向到调查页面？我做了一些研究，但我能找到的只是重新加载父母或警报的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:05:39.800

您也可以查看 onbeforeunload -[请参见此处](http://help.dottoro.com/ljhtbtum.php)- 尽管我不知道它是否比 onunload 得到更好的支持。两者都要记住的一件事是，它指的是卸载文档而不是窗口。因此，关闭窗口并不是触发它们的唯一因素——例如导航到另一个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:33:28.013

我认为您可以`unload()`在 javascript 中使用事件。当用户尝试关闭浏览器时触发该事件。请参阅[此处的链接](http://www.w3schools.com/jsref/event_onunload.asp)

# css - 菜单悬停行为不正确，子菜单悬停消失

> ID：15315547
> 
> 赞同：0
> 
> 时间：2013-03-09T20:28:24.993
> 
> 标签：css, menu, hover, submenu

这个菜单（[http://thepiratehenk.nl/pgwe/](http://thepiratehenk.nl/pgwe/)）的问题是，当我将子菜单悬停在右侧时，它会消失。

（它在 Internet Explorer 中也不起作用；这是下一个要解决的问题。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:46:18.857

添加以下 CSS 规则：

```
.navi nav > ul > li:hover {
    z-index: 2;
} 
```

这可确保当前菜单项及其子菜单始终显示在其他菜单项之上。

**两个主要问题**

1.  与其他菜单项重叠的菜单项
2.  与前一个菜单项的子菜单重叠的菜单项

**问题 #1**

问题 #1 是由`:hover`on 引起的`li`，但在其内部的标签上执行旋转（在同一元素上`a`没有and 旋转）。`:hover`这可以通过以下两种方式之一解决：

1a。暂时给当前菜单项（鼠标悬停）一个比任何其他菜单项更大的 z-index 值。这可以通过单独使用 CSS 来实现`li:hover`。

1b。旋转菜单`li`而不是`a`标签，然后取消旋转其中的子菜单`ul`标签（这样`:hover`和旋转在同一个元素上）。

**问题 #2**

每个菜单项的底角位于前一个菜单项的子菜单上方。子菜单应始终位于所有菜单项之上。

上面提到的 1a 解决方案也可以解决问题 #2（将菜单的 z-index 设置为`li`更大`z-index`的`:hover`.

**小问题**

上面的评论和@blackhawk 提到的另一个问题是将`.naarlinks` `div`嵌套直接嵌套在`ul`标签内。现在看来，这实际上与上述问题无关，但仍然不安全。除了在某些浏览器中导致奇怪行为的风险之外，它还会阻止 HTML 验证。

似乎`.naarlinks` `div`只有. `padding-left: 100px;`我不确定该样式是否生效，因为嵌套不正确，但如果您确实需要该样式，您可以尝试以某种方式`div`将其添加到子菜单中。`ul`

首先，我建议简单地删除`.naarlinks` `div`s 并查看它如何影响页面。然后查看是否需要向子菜单`ul`标签添加任何样式以进行更正。

删除`div`s 后，尝试将子菜单中的填充更改`ul`为以下内容：

```
.navi nav li ul {
    padding: 3px 10px 3px 110px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:27:13.690

您不能将 div 元素作为无序列表中的第一个子元素。这就是为什么你的页面坏了。

无序列表的基本结构通常如下所示......

```
<ul>
<li></li>
<li></li>
</ul> 
```

不是这样的……

```
<ul>
<div>
<li></li>
<li></li>
</div>
</ul> 
```

但是要回答您的问题-您的CSS中缺少一个tinnnnnny小东西...

.navi nav li ul:hover { display:block }

# jquery - Jquery post返回对象对象

> ID：15315551
> 
> 赞同：0
> 
> 时间：2013-03-09T20:28:50.970
> 
> 标签：jquery

我正在尝试将一组复选框提交到 php 文档。奇怪的是，它发送 [object object] 而不是值。

```
$(document).ready(function(){
 $('input:checkbox').change(function() {
 var Day = $(this).closest('div.cat').attr("id");
 var category= $('#'+Day+' input[type=checkbox]:checked').serializeArray();
 $.post("savedaily.php", { "cat[]": category, day: Day })
   .done(function(data) {
   alert("Data Loaded: " + data);
 });

 });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:06:14.170

当您必须使用 ajax 交换对象时，您应该考虑**serialization**，我建议您：

1.  json 在将对象发送到 PHP 端之前在 jQuery 中对对象进行编码
2.  在 php 中，您将以字符串格式获取对象，然后您需要对 json 进行解码以获取您的对象
3.  我不确定交换对象是否是个好主意，可能你需要考虑交换表！

# php - mysqli_connect() 在存储在外部文件中的函数中不起作用

> ID：15315552
> 
> 赞同：1
> 
> 时间：2013-03-09T20:29:06.550
> 
> 标签：php, mysql, mysqli

我已经在几个线程中看到了这个问题，但是我有机会尝试的建议已经奏效了。

我想将我的所有函数（和一些变量）存储在一个文件中，然后将该文件包含在我的页面中。这是我的includes.php：

```
<?php
$title = "Whatever Tattoos";

function databaseConnect()
{
$con = mysqli_connect('127.0.0.1', "test", "test", "tats");

if (mysqli_connect_errno())
{
    echo "Failed to connect to MySql: " . mysqli_connect_error();
}
}

?> 
```

在我的测试中，我调用了 databaseConnect() 函数，但我的查询没有返回任何内容。如果我拉出代码并将其直接放入我的测试文件中，它就可以工作。我认为这是变量范围的问题，但我试图返回 $con 变量 - 不行；extract() $con 变量——不行；并将 $con 设置为 global - 不行。

更复杂的是，如果我像这样创建一个变量：

```
$test = "this is a test"; 
```

在函数内部，我可以在我的主代码中毫无问题地调用它。我难住了。有任何想法吗？

编辑：

这是查询代码：

```
databaseConnect();

$result = mysqli_query($con , "select * from test");
while($row = mysqli_fetch_array($result))
{
echo $row['test_text'];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:48:11.173

`$con`是不可访问的，因为它是在函数内而不是全局定义的，这意味着它不在`mysqli_query`. 尝试以下操作：

```
$con = NULL;
function databaseConnect()
{
    global $con;
    $con = mysqli_connect('localhost', 'username', 'password', 'db_name');

    if (mysqli_connect_errno())
    {
        echo "Failed to connect to MySql: " . mysqli_connect_error();
    }
} 
```

这将使您`$con`几乎可以在任何地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-10T17:39:36.863

解决这个问题很容易！您必须在函数中使用“return”。如果不使用“return”，则返回数据将为空。

```
function databaseConnect()
{
$con = mysqli_connect('127.0.0.1', "test", "test", "tats");

if (mysqli_connect_errno())
{
echo "Failed to connect to MySql: " . mysqli_connect_error();
}
return $con;
} 
```

调用函数：

```
 $con=databaseConnect(); 
```

# java - 将用户添加到 Spring 3 安全性

> ID：15315554
> 
> 赞同：1
> 
> 时间：2013-03-09T20:29:19.043
> 
> 标签：java, spring-security, spring-3

我正在考虑通过 spring 3 security 实现用户授权。我知道用户名和密码存储在一些 XML 文件中，如下所示：

```
<authentication-manager>
  <authentication-provider>
    <user-service>
       <user name="username" password="123456" authorities="ROLE_USER" />
    </user-service>
  </authentication-provider>
</authentication-manager> 
```

但我想知道，如何添加用户或更改密码？有人可以给我看看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:56:01.143

该`user-service`元素创建一个[`InMemoryUserDetailsManager`](https://github.com/SpringSource/spring-security/blob/master/core/src/main/java/org/springframework/security/provisioning/InMemoryUserDetailsManager.java)具有修改用户和更改密码的方法。

然而，在 XML 中定义用户实际上只是为了测试。如果您希望能够添加和更新用户信息，那么您应该使用数据库。标准 Spring Security 数据库模式记录在[参考手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#appendix-schema)中。

然后，您可以使用[JDBC`UserDetailsManager`实现](https://github.com/SpringSource/spring-security/blob/master/core/src/main/java/org/springframework/security/provisioning/JdbcUserDetailsManager.java)，也可以构建自己的自定义数据管理代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:46:31.707

同意卢克。在 XML 中存储用户名和密码不是一个好的做法。将用户详细信息存储在数据库中，以便您可以添加修改它们。

***创建数据库***

```
CREATE TABLE IF NOT EXISTS users (
     username VARCHAR(10) NOT NULL,  
     password VARCHAR(32) NOT NULL,
     enabled BOOLEAN NOT NULL,
     PRIMARY KEY (username)  
);  

CREATE TABLE IF NOT EXISTS authorities (  
     username VARCHAR(10) NOT NULL,  
     authority VARCHAR(10) NOT NULL,  
     FOREIGN KEY (username) REFERENCES users(username)
); 

insert into users(username,password,enabled) values ('abc','123456',TRUE);   
insert into authorities(username,AUTHORITY) values ('abc', 'ROLE_USER'); 
```

这里的表名、列名是根据 Spring Security 默认查询使用的（'select username, password, enabled from users where username = ?'）。因为当我们使用默认名称时，我们不需要显式指定查询来获取用户详细信息。查看[Spring Security 文档](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html)以获取更多详细信息。

***数据源***

您需要定义如下的数据源 bean，因为 Spring Security 需要连接数据库以获取用户详细信息，因此您需要告诉它哪个驱动程序、数据库 URL、用户名和密码。例如如下。

```
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbc.JDBCDriver" />
    <property name="url" value="jdbc:hsqldb:hsql://localhost/elab" />
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean> 
```

***Spring 安全配置***

现在我们需要将 spring security 告诉用户数据库以获取登录详细信息。[因此，我们使用'jdbc-user-service'](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#nsa-jdbc-user-service)代替作为内存 UserDetailsS ​​ervice 的 user-service 。现在我们的身份验证管理器将如下所示。

```
<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"/>
    </authentication-provider>
</authentication-manager> 
```

请注意，如果用户表结构与默认情况下 Spring 期望的不同，则应将查询显式指定为 jdbc-user-service 元素的属性（users-by-username-query）。有关更多信息，请参阅文档。

现在一切就绪，Spring 将愉快地从数据库中获取用户详细信息。

# php - 将参数传递给 PHP 中的新进程

> ID：15315556
> 
> 赞同：0
> 
> 时间：2013-03-09T20:29:25.237
> 
> 标签：php, process

我似乎无法使用 system() 创建一个持久的分叉进程：（是的，参数没问题）

```
$args = "/code/perl/test/run $a $n $m $s $c &";
system($args); 
```

但是，另一方面，这段代码可以工作，但它没有参数：

```
system("/code/perl/test/reset &"); 
```

那么，问题呢？我的 C 程序“运行”在 HTTP 请求的 PHP 脚本完成后立即被终止。

我尝试使用 at 守护进程使用单独的父进程创建进程，但没有成功。www-data 已从 /etc/at.deny 中删除

值得注意的是，在第二个示例中，我确实得到了程序输出，但不是第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:52:32.867

From the docs:

> If a program is started in this fashion, in order for it to continue running in the background, the output of the program must be redirected to a file or another output stream. Failing to do so will cause PHP to hang until the execution of the program ends.

Therefore, if it's ending immediately, it most likely does not appear `run` is being ran. Try sending the output to a different file. Try: `exec("/bin/echo $a $n $m $s $c > /tmp/echo &");` to start diagnostics.

After that, I would check for safe_mode and try `escapeshellcmd`. As a last resort, try the backtick ``` operator.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:59:22.587

这是 PHP 脚本完成，然后杀死所有附加到它的子进程的结果。

如果“at”解决方法不起作用（您使用 atd 将其安排为“现在”），就像它不适合我一样，您可能需要编写解决方法。我的解决方法只是将命令放在 /tmp/ 的文件中，然后让我的守护进程代码执行文件中的命令，然后将其截断。

# jquery - 如何限制 Jquery 克隆的数量？

> ID：15315560
> 
> 赞同：0
> 
> 时间：2013-03-09T20:29:37.970
> 
> 标签：jquery, clone

我正在尝试限制以下链接上的克隆数量：

[JSFiddle 链接](http://jsfiddle.net/63BV7/2/)

这是 Jquery 编码：

```
$("#addbt").click(function () {
 $('#choice').clone()
     .attr('id', 'choice' + $('.ddl').length)
     .attr('name', 'choice' + $('.ddl').length)
     .insertAfter(".ddl:last");
 $('#num').clone()
     .attr('id', 'num' + $('.dd2').length)
     .attr('name', 'num' + $('.dd2').length)
     .insertAfter(".dd2:last");});

 $("#removebt").click(function () {
   $("#choice1").remove();
   $("#num1").remove();
 }); 
```

我把它放在 JSFiddle 上，这样每个人都可以看到它当前的功能编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:50:25.257

```
$("#addbt").click(function () {

   // check count
   var clonedCount = $('[id^=choice]').length; // OR $('.ddl').length @Matt mentioned

   if( clonedCount >  3) return false;   // stop clonning

   $('#choice').clone()
        .attr('id', 'choice' + $('.ddl').length)
        .attr('name', 'choice' + $('.ddl').length)
        .insertAfter(".ddl:last");
    $('#num').clone()
        .attr('id', 'num' + $('.dd2').length)
        .attr('name', 'num' + $('.dd2').length)
        .insertAfter(".dd2:last");
}); 
```

[*JSFiddle 链接*](http://jsfiddle.net/63BV7/6/)

# java - 递归创建对象

> ID：15315569
> 
> 赞同：0
> 
> 时间：2013-03-09T20:30:02.690
> 
> 标签：java, recursion, arraylist

我正在尝试递归运行我的方法。在方法的每次迭代中，我都会创建新的`ArrayList`并填充一些值并检查`if`运算符中的一些条件。如果为真，将再次运行此方法。如果它是假的，我想退出当前的方法迭代，并在之前的方法迭代中使用`ArrayList`. 在实践中，当我的条件为假并进入我的方法的先前迭代时，我使用相同的`ArrayList`. 这很糟糕。

我如何`ArrayList`为方法的每次迭代创建每个实例，以及在上一个方法中使用该迭代的实例时返回时如何工作`ArrayList`？

我的代码：

```
 private List<List<String>> letsTry(List<List<ProbableValue>>
probableValues, List<List<String>> data) {

     List<List<String>> copyOfData = new ArrayList<List<String>>(data);
     List<List<ProbableValue>> copyOfProbableValues = 
                           new ArrayList<List<ProbableValue>>(probableValues);

    ProbableValue minPV = getMinPV(copyOfProbableValues);

    Set<String> pValues = new HashSet<String>(minPV.getProbableValues());
    int i = minPV.getI();
    int j = minPV.getJ();

    for (String v : pValues) {

        if (checker.canSetOnTable(copyOfProbableValues, minPV)) {
            if (!SUtils.isItsNumber(copyOfData.get(i).get(j))) {
                copyOfData.get(i).set(j, v);

          copyOfProbableValues.get(i).get(j).getProbableValues().clear();
          checker.removeProbableValue(copyOfProbableValues, v, i, j);

            }
          letsTry(new ArrayList<List<ProbableValue>>(copyOfProbableValues),
                    new ArrayList<List<String>>(copyOfData));

        }

    }

    return copyOfData;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:36:26.720

您似乎正在创建包含列表的列表的浅表副本。因此，只会复制嵌套列表的引用。如果你想要一个完整的深度副本，你必须做这样的事情：

```
List<List<String>> copyOfData = new ArrayList<List<String>>();
for (int i = 0; i < data.size(); i++) {
    copyOfData.add(new ArrayList<String>());
    for (String s : data.get(i)) {
        copyOfData.get(i).add(s);
    }
}

List<List<ProbableValue>> copyOfProbableData = new ArrayList<List<ProbableValue>>();
for (int i = 0; i < probableValues.size(); i++) {
    copyOfProbableData.add(new ArrayList<ProbableValue>());
    for (ProbableValue p : probableValues.get(i)) {
        ProbableValue pNew = new ProbableValue();

        // copy your object here

        copyOfProbableData.get(i).add(pNew);
    }
} 
```

# java - 无法找到命名空间（“上下文”）的命名空间处理程序

> ID：15315571
> 
> 赞同：1
> 
> 时间：2013-03-09T20:30:13.103
> 
> 标签：java, spring, tomcat, spring-mvc, tomcat7

我现在与这个问题斗争了几天，我真的很绝望。我正在升级的旧项目在 Tomcat 启动期间给了我以下错误消息：

```
Configuration problem: Unable to locate NamespaceHandler for namespace
[http://www.springframework.org/schema/context] 
```

为什么它不能处理上下文模式？

* * *

一些背景资料：

关于这个问题有很多问题，其中大部分是由于相应的 JAR 不在类路径中。不是我的情况。该应用程序被打包为*war*并放置在 Tomcat 的*webapp*文件夹中。在启动过程中，Tomcat 将*战争*解压到自己的文件夹中，其中 WEB-INF/lib 文件夹包含“ *spring-context-3.2.1.RELEASE.jar* ”文件。

日志文件附在这个问题的末尾。请注意，tomcat 哭诉*将属性 'cacheAllowed' 设置为 'false' 没有找到匹配的属性。*在启动期间。似乎它没有加载*org.apache.catalina.core.StandardContext*。我的*context.xml*文件包含以下内容：

```
<Context cacheAllowed="false" crossContext="true" debug="0"
    docBase="${project.build.finalName}.war" path="/lup-web" privileged="true"
    reloadable="true">
</Context> 
```

有问题的文件 ( *services.xml* ) 以以下内容开头：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/context 
           http://www.springframework.org/schema/context/spring-context.xsd">

    <context:component-scan base-package="com.mycompany.lup.pages"/>
    <context:component-scan base-package="com.mycompany.lup.messages"/>
    <context:component-scan base-package="com.mycompany.lup.importData"/>
    <context:component-scan base-package="com.mycompany.lup.servlet"/>

    <bean class="com.mycompany.lup.importData.ConversionService"> 
```

这是catalina运行的日志：

```
Mar 09, 2013 10:07:56 PM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.24 using APR version 1.4.6.
Mar 09, 2013 10:07:56 PM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
Mar 09, 2013 10:07:58 PM org.apache.catalina.core.AprLifecycleListener initializeSSL
INFO: OpenSSL successfully initialized (OpenSSL 1.0.1c 10 May 2012)
Mar 09, 2013 10:07:58 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-apr-8080"]
Mar 09, 2013 10:07:58 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-apr-8009"]
Mar 09, 2013 10:07:58 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1963 ms
Mar 09, 2013 10:07:58 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Mar 09, 2013 10:07:58 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.35
Mar 09, 2013 10:07:58 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Program Files\apache-tomcat-7.0.35\webapps\lup.war
Mar 09, 2013 10:07:58 PM org.apache.catalina.startup.SetContextPropertiesRule begin
WARNING: [SetContextPropertiesRule]{Context} Setting property 'cacheAllowed' to 'false' did not find a matching property.
Mar 09, 2013 10:07:58 PM org.apache.catalina.startup.SetContextPropertiesRule begin
WARNING: [SetContextPropertiesRule]{Context} Setting property 'debug' to '0' did not find a matching property.
Mar 09, 2013 10:08:10 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://www.springframework.org/tags/form is already defined
Mar 09, 2013 10:08:10 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://www.springframework.org/tags is already defined
Mar 09, 2013 10:08:13 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Mar 09, 2013 10:08:13 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/lup] startup failed due to previous errors
Mar 09, 2013 10:08:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\apache-tomcat-7.0.35\webapps\docs
Mar 09, 2013 10:08:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\apache-tomcat-7.0.35\webapps\examples
Mar 09, 2013 10:08:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\apache-tomcat-7.0.35\webapps\host-manager
Mar 09, 2013 10:08:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\apache-tomcat-7.0.35\webapps\manager
Mar 09, 2013 10:08:13 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\apache-tomcat-7.0.35\webapps\ROOT
Mar 09, 2013 10:08:13 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-apr-8080"]
Mar 09, 2013 10:08:13 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-apr-8009"]
Mar 09, 2013 10:08:13 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 15424 ms 
```

这是错误日志：

```
Mar 09, 2013 10:08:10 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
Mar 09, 2013 10:08:11 PM org.apache.catalina.core.ApplicationContext log
INFO: Loading Spring root WebApplicationContext
Mar 09, 2013 10:08:12 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class com.mycompany.lup.servlet.DelegatingContextListener
com.mycompany.lup.exceptions.mycompanySystemException: Machine name:DEVTEAM

Error invoking SpringContextLoaderListener upon context initialization.
    at com.mycompany.lup.servlet.DelegatingContextListener.contextInitialized(DelegatingContextListener.java:40)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate NamespaceHandler for namespace [http://www.springframework.org/schema/context]
Offending resource: class path resource [conf/services.xml]
    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:57)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:64)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:55)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1144)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1137)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:145)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:89)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:499)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:407)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:357)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:126)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:142)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:187)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:156)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:142)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:89)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:499)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:407)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:357)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:126)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:142)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:123)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:91)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:94)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:294)
    at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.refresh(AbstractRefreshableWebApplicationContext.java:156)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:246)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:49)
    at org.jboss.resteasy.plugins.spring.SpringContextLoaderListener.contextInitialized(SpringContextLoaderListener.java:44)
    at com.mycompany.lup.servlet.DelegatingContextListener.contextInitialized(DelegatingContextListener.java:37)
    ... 14 more

Mar 09, 2013 10:08:13 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Mar 09, 2013 10:08:13 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
Mar 09, 2013 10:08:13 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
Mar 09, 2013 10:08:13 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@1cb2794d') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:11:39.950

长话短说......这是无效依赖的另一个问题。Spring 2.0 jar 位于 CLASSPATH 中。

# python - 如何从 Python 中调用“git pull”？

> ID：15315573
> 
> 赞同：90
> 
> 时间：2013-03-09T20:30:31.850
> 
> 标签：python, git, bash, github

使用 github webhooks，我希望能够将任何更改拉到远程开发服务器。目前，当在适当的目录中时，`git pull`获取需要进行的任何更改。但是，我不知道如何从 Python 中调用该函数。我尝试了以下方法：

```
import subprocess
process = subprocess.Popen("git pull", stdout=subprocess.PIPE)
output = process.communicate()[0] 
```

但这会导致以下错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

有没有办法可以从 Python 中调用这个 bash 命令？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-03-09T20:38:43.420

你考虑过使用 GitPython 吗？它旨在为您处理所有这些废话。

```
import git 

g = git.cmd.Git(git_dir)
g.pull() 
```

[https://github.com/gitpython-developers/GitPython](https://github.com/gitpython-developers/GitPython)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-03-09T20:34:19.977

[`subprocess.Popen`](http://docs.python.org/3/library/subprocess.html#subprocess.Popen)需要程序名称和参数的列表。您正在向它传递一个字符串，它（使用默认值`shell=False`）等效于：

```
['git pull'] 
```

这意味着 subprocess 试图找到一个名为 literal 的程序`git pull`，但没有这样做：在 Python 3.3 中，您的代码引发了 exception `FileNotFoundError: [Errno 2] No such file or directory: 'git pull'`。相反，传入一个列表，如下所示：

```
import subprocess
process = subprocess.Popen(["git", "pull"], stdout=subprocess.PIPE)
output = process.communicate()[0] 
```

顺便说一句，在 Python 2.7+ 中，您可以使用[`check_output`](http://docs.python.org/3/library/subprocess.html#subprocess.check_output)便捷函数简化此代码：

```
import subprocess
output = subprocess.check_output(["git", "pull"]) 
```

此外，要使用 git 功能，完全没有必要（尽管简单且可移植）调用 git 二进制文件。考虑使用[git-python](https://github.com/gitpython-developers/GitPython)或[Dulwich](http://www.samba.org/~jelmer/dulwich/)。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-11-02T01:22:15.993

使用[GitPython](https://github.com/gitpython-developers/GitPython)的公认答案比直接使用要好一点`subprocess`。

这种方法的问题是，如果你想解析输出，你最终会查看“瓷器”命令的结果，[这是一个坏主意](https://stackoverflow.com/a/6978402)

以这种方式使用 GitPython 就像得到一个闪亮的新工具箱，然后将它用于将其固定在一起的一堆螺丝，而不是里面的工具。以下是 API 的设计用途：

```
import git
repo = git.Repo('Path/to/repo')
repo.remotes.origin.pull() 
```

如果你想检查是否有变化，你可以使用

```
current = repo.head.commit
repo.remotes.origin.pull()
if current != repo.head.commit:
    print("It changed") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T20:42:05.707

这是一个示例配方，我一直在我的一个项目中使用。同意有多种方法可以做到这一点。:)

```
>>> import subprocess, shlex
>>> git_cmd = 'git status'
>>> kwargs = {}
>>> kwargs['stdout'] = subprocess.PIPE
>>> kwargs['stderr'] = subprocess.PIPE
>>> proc = subprocess.Popen(shlex.split(git_cmd), **kwargs)
>>> (stdout_str, stderr_str) = proc.communicate()
>>> return_code = proc.wait()

>>> print return_code
0

>>> print stdout_str
# On branch dev
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   file1
#   file2
nothing added to commit but untracked files present (use "git add" to track)

>>> print stderr_str 
```

您的代码的问题是，您没有传递一个数组`subprocess.Popen()`，因此试图运行一个名为`git pull`. 相反，它需要执行`git`带有第一个参数的二进制文件`pull`，依此类推。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-21T23:56:59.633

如果您使用 Python 3.5+，则更喜欢它[`subprocess.run`](https://docs.python.org/3/library/subprocess.html#subprocess.run)可以`subprocess.Popen`处理的场景。例如：

```
import subprocess
subprocess.run(["git", "pull"], check=True, stdout=subprocess.PIPE).stdout 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-09T20:41:28.613

尝试：

```
subprocess.Popen("git pull", stdout=subprocess.PIPE, shell=True) 
```

# vba - 从 A 列（Sheet1）复制到 B 列先前数据下方的 B 列（Sheet2）

> ID：15315577
> 
> 赞同：1
> 
> 时间：2013-03-09T20:31:12.273
> 
> 标签：vba, excel, excel-2010

如何在不修改 B 列以前的数据的情况下将数据从 A 列（Sheet1）复制到 B 列（Sheet2）？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:22:35.973

这是一个通用答案，它不会替换单元格，而是查找下一个空单元格。我试图在其中发表评论，这将有助于理解它。

```
Sub CopySheet1toSheet2()

    Dim CurrRow As Integer
    Dim CurrCol As Integer
    Dim TargetRow As Integer
    Dim TargetCol As Integer

    Dim Sheet1 As String
    Dim Sheet2 As String

    Sheet1 = "Sheet1" ' name to your source sheet name
    Sheet2 = "Sheet2" ' change to your target sheet name
    CurrRow = 1
    CurrCol = 1 ' This is column A

    TargetRow = 1
    TargetCol = 2 ' This is column B

    ' Cycle through all rows in Col A until empty field reached
    While Sheets(Sheet1).Cells(CurrRow, CurrCol) <> ""

        ' See if there's a value in column B in the same row - if so, go to the next row
        While Sheets(Sheet2).Cells(TargetRow, TargetCol) <> ""
            TargetRow = TargetRow + 1
        Wend

        ' Copy the value from the source to the target
        Sheets(Sheet2).Cells(TargetRow, TargetCol) = Sheets(Sheet1).Cells(CurrRow, CurrCol)

        ' Move to the next source and target rows
        CurrRow = CurrRow + 1
        TargetRow = TargetRow + 1

    Wend

End Sub 
```

# c++ - C ++中的字符串到双重转换

> ID：15315583
> 
> 赞同：1
> 
> 时间：2013-03-09T20:31:50.783
> 
> 标签：c++, type-conversion

以下函数将字符串转换为双精度，但精度不够。

```
double stringToDouble(string s) {
    double d;
    stringstream ss(s); //turn the string into a stream
    ss >> d; //convert
    return d;
} 
```

当使用 stringToDouble("31.2458782523") 调用时，输出为 31.2459。

如果不使用 Boost 库，有没有办法更好地做到这一点？我想要更高的精度。尽可能高。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:35:55.947

已`double`正确解析，但您很可能以错误的精度看到它。你如何输出它？根据您的需要调整精度，就可以了。

此外，您应该知道浮点数不能总是在内存中准确表示，因此在使用`float`or `double`s 时可能会出现（微小的）舍入错误。但是你通常可以放心地忽略这些，除非你打算向月球发射火箭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:27:24.250

如果您使用 C++11，则可以使用[std::stod 。](http://en.cppreference.com/w/cpp/string/basic_string/stof)

**stod** = **S**字符串**到** **D** ouble

```
double myDouble = std::stod(myString); 
```

这应该提供相对不错的准确性。

如果需要更高的精度，您可以使用 std::stold 进行长双精度数。

# php - 通过选择框发送两个 id

> ID：15315584
> 
> 赞同：0
> 
> 时间：2013-03-09T20:31:51.370
> 
> 标签：php

```
if(isset($_POST['submit'])) {
    $doc = new Doc_Schedule();
    $doc->doctor = $_POST['doctor'];
    $doc->department = $_POST['dpt'];
    $doc->sheduledate = $_POST['date'];
    $doc->scheduletime = $_POST['time'];
    if( $doc->create() ) {
        $message = "Doctors Information Saved Successfully";
    } else {
        $message = join("<br/>",$doc->errors);
    }
} 
```

* * *

```
<select name="doctor" id="Deptmentselectbox" class="AllSelectBoxes">
    <option value="">Select Doctor</option>
<?php
    $sql = "SELECT `fullname`,`depid`,`docid` FROM `doctors` ORDER BY fullname ASC";
    $result = $database->query($sql) or die('cannot connect to the database');
    while( $row = mysql_fetch_array($result) ) {
       echo"<option value= ".$row['docid'].">".$row['fullname']."</option>";
    }
?>
</select> 
```

我有一个选择框，它将在表格中显示医生。当我点击某个医生时，我想将两者都发送`doctors.docid`到`doctors.deptid(department id)`一个班级以进行进一步处理。

我在为部门 ID 创建新选择框的情况下找不到其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:41:23.403

我的建议是使用 PHP 连接然后分离值。

```
<select name="doctor" id="Deptmentselectbox" class="AllSelectBoxes">
<option value="<?php echo "$doc['doctor']^$doc['department']"; ?> ">Select Doctor</option> 
```

然后在处理时：

```
$doc = explode("^", $_POST['doctor']);
$doctor = $doc['0'];
$department = $doc['1']; 
```

类似的东西会通过一个 post 对象发送多个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:42:42.560

您可以使用逗号分隔值：

```
echo "<option value=".$doc['docid'].",".$doc['depid']; ?>">".$row['fullname']."</option>" 
```

可以在服务器上解析为

```
ID = explode($_POST['doctor'], ","); 
```

或者，您可以使用 HTML5 数据属性。

```
echo "<option value=".$doc['docid']." data-DepId=".$doc['depid'].">".$row['fullname']."</option>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:36:27.997

将两个值与选项值中的分隔符结合起来：

```
echo"<option value= \"{$row['docid']}|{$row['depid']}\">{$row['fullname']}</option>"; 
```

并在提交后分隔值：

```
list($docid,$depid)=explode('|',$_POST['doctor']); 
```

或者，如果您只使用`docid`，您`depid`将从您的数据库中获取。

而且，顺便说一句，停止使用，`mysql_*`因为它已被弃用，移至`mysqli_*`or `PDO`！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T20:38:07.493

我会用这样的分隔符对值进行编码：

```
 echo"<option value= ".$row['docid'].";".$row['deptid'].">".$row['fullname']."</option>"; 
```

然后你只需在函数中调用explode：

```
 list($docid, $deptid) = explode($_POST['doctor'], ";"); 
```

# java - 使用重写的子类方法的超类方法

> ID：15315585
> 
> 赞同：-1
> 
> 时间：2013-03-09T20:31:54.663
> 
> 标签：java, inheritance, subclass, superclass, overriding

这是一个措辞奇怪的问题，因此如果重复，我深表歉意。

假设我有一个`foo`带有`a`调用方法的方法的类`b`：

```
public class foo
{
    public void a()
    {
       b();
    }

    public void b()
    {
       gamma();
    }
} 
```

现在我有一个`bar`扩展的子类`foo`

```
public class bar extends foo
{
    @Override
    public void b()
    {
       theta();
    }
} 
```

如果我调用`bar.a()`，将`a`使用`b`超类中的`b`方法还是子类中的方法？也就是说，`bar.b()`最终会执行`gamma`还是最终会执行`theta`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:33:23.843

它将使用子类中的方法 b。这是覆盖方法的重点。扩展其父类的子类可以自由地创建更具体的方法实现。当在 sublcas 上调用被覆盖的方法时，将使用其专用方法代替超类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:47:02.417

> f 我调用 bar.a()，a 会使用超类的 b 方法还是子类的 b 方法？也就是说，bar.b() 最终会执行 gamma 还是会执行 theta？

它将使用`bar.b()`方法。这是**[动态调度](http://en.wikipedia.org/wiki/Dynamic_dispatch)的结果。**

# google-apps-script - 使用脚本设置电子表格单元格的值

> ID：15315586
> 
> 赞同：0
> 
> 时间：2013-03-09T20:31:58.513
> 
> 标签：google-apps-script, google-sheets

我创建了一个每天在定时触发器上运行一次的脚本，其目的是复制模板电子表格并使用当前日期重命名它。此外，我想将新创建的电子表格中特定单元格的值设置为当前日期。

```
var date = Utilities.formatDate(new Date(), 'EST', 'MMddyy');
var newLiveFeedName = "Live Feed ("+date+")"; 
var newLiveFeed = currentLiveFeedTemplate.makeCopy(newLiveFeedName);
newLiveFeed.SpreadsheetApp.getSheetByName("Summary").getRange('G2').setValue(date); 
```

我收到一个错误，表明 getSheetByName() 函数未定义。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:27:24.177

`newLiveFeed`是一个电子表格对象，所以像这样尝试：

（假设 `currentLiveFeedTemplate`是`ActiveSpreadsheet()`）

```
var date = Utilities.formatDate(new Date(), 'EST', 'MMddyy');
var newLiveFeedName = "Live Feed ("+date+")"; 
var newLiveFeed = currentLiveFeedTemplate.copy(newLiveFeedName);
newLiveFeed.getSheetByName("Summary").getRange('G2').setValue(date); 
```

# c# - 重新上传页面时回发错误

> ID：15315589
> 
> 赞同：1
> 
> 时间：2013-03-09T20:32:16.637
> 
> 标签：c#, asp.net

我有一个大问题，但对你来说很容易，我以前必须解决它，现在除了修复它我别无选择。这是我得到的：

如果我将数据发送到数据库，一切正常，但如果在某些情况下用户决定重新上传页面，在再次发送之前发送的相同信息，数据库将保存它。我怎样才能避免这种情况？我不希望每当页面重新上传信息时一次又一次地发送！这将是一场灾难！

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:56:10.833

您需要做的是使用 Post/Redirect/Get 模式：

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

这种模式正好解决了你的问题。

基本上，在数据库更新后，立即将用户重定向到其他页面（带有诸如“更新成功！”之类的消息）。

# php - codeigniter删除404错误

> ID：15315590
> 
> 赞同：0
> 
> 时间：2013-03-09T20:32:17.487
> 
> 标签：php, codeigniter

我已经向文章页面添加了一个删除链接，但是当我单击删除时，在 URL 中它说 ..........index.php/news/delet1 它选择了 id 但出现了 404错误。

控制器news.php

```
public function delete($id){
    $id = $this->uri->segment(3);

    $data['title'] = 'Delete an item';

    if($this->news_model->delete_news($id)){
        $this->load->view('templates/header', $data);  
        $this->load->view('news/success');
        $this->load->view('templates/footer');
    }
} 
```

视图.php

```
<p><a href="news/delete<?php echo $news_item['id'] ?>">delete article</a></p> 
```

news_model.php

```
public function delete_news($id){
    $this->db->where('id',$id)->delete('news');

    return $this->db->affected_rows();
} 
```

路线

```
$route['news/delete/(:num)'] = 'news/delete/$1'; 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:35:41.913

您的链接似乎缺少用于传递 ID 的正斜杠。它应该是：

`<p><a href="news/delete/<?php echo $news_item['id'] ?>">delete article</a></p>`

# python - TypeError：只能将元组（不是“int”）连接到元组

> ID：15315591
> 
> 赞同：0
> 
> 时间：2013-03-09T20:32:27.527
> 
> 标签：python, python-2.7

```
urllist = ['http://example.com',
           'http://example1.com']
i = 0
while i < len(urllist):
    source = urllib.urlopen(urllist[i]).read()
    regex = '(\d{3})/">(\w+\s-\s\w+)</a>'  # e.g. '435', 'Tom-Jerry' 
    p = re.compile(regex)
    db = re.findall(p, source)
    db = [tuple(filter(None, t)) for t in db]   

    hero_id = []
    for i in db:
        hero_id.append(i[0])

    i += 1
print hero_id 
```

`db = [tuple(filter(None, t)) for t in db]` `db`是这样的元组列表：`[('564', 'Tom', 'Jerry'), ('321', 'X-man', 'Hulk')]`

这背后的逻辑应该如下：从 开始`urllist[0]`，搜索正则表达式，`db`为 中的每个元组收集 ，从元组（数字）中`db`取出`[0]`元素并将其附加到`hero_id`列表中。完成后，将 1 添加到`i`并重复下一个 url 的整个过程，`urllist`而没有剩下的。

当我运行这段代码时，我得到了这个：

`i += 1 TypeError: can only concatenate tuple (not "int") to tuple`

`i += 1`in 代码在 for 循环之外，所以这个异常让我有点吃惊。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:34:34.847

“for i in db”循环将一个元组分配给 i。i 的范围是函数（或模块，如果这是模块范围的代码）。

Python 2 中唯一有自己作用域的循环语法是生成器表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:36:27.187

for 循环`for i in db:`正在改变循环`i`内部的值`while`。在 for 循环中使用不同的（更具描述性的）名称。

# php - 带有 .click 和 .load 的 jquery 按钮无法正常工作

> ID：15315592
> 
> 赞同：0
> 
> 时间：2013-03-09T20:32:35.537
> 
> 标签：php, jquery, html

我的 jquery 函数有一个小问题，我不知道哪里出了问题，我正在使用 .load 第二次使用带有 .click( 的按钮将另一个页面拉入 div ( ） 功能。这里的问题是，当我单击按钮时，我想要的数据会闪烁，然后被我第一次导航到页面时加载的数据替换，但是如果我将 .click 绑定到：

```
<p>peter paragraph</p> 
```

该页面将正常加载而不会发生任何事件。

jquery函数是这样的：

```
$(document).ready(function() {
            $("p").click(function(){
                alert("buttonthe1st");
                $('#jam').load('register.php');
                alert("buttonthe2nd");
            }); 
        }); 
```

我正在使用警报来测试它最初是否正常工作，当我使用段落测试它们以及在谷歌开发者控制台中尝试它们时，该函数似乎与实际加载事件一起工作很长时间。

当我输入上面的内容时，我在测试它时才意识到，即使没有任何功能或 onclick 甚至与相关按钮相关联，URL 和页面也会刷新。这解释了为什么我现在遇到这个问题，有没有办法解决这个问题？

PS我很抱歉让这变得如此含糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:23:07.393

对于为什么单击段落元素会导致页面重新加载，我有点困惑，但是如果您实际上是在谈论按钮元素，您可能会发现[preventDefault](http://api.jquery.com/event.preventDefault/)功能很有帮助。尝试在绑定到“onclick”的函数中使用它，看看它是否有任何区别

# php - 在什么情况下构造函数是私有的或受保护的？

> ID：15315599
> 
> 赞同：1
> 
> 时间：2013-03-09T20:32:46.067
> 
> 标签：php, oop, constructor

是否存在 __construct() 会被声明为公开的情况？

如果是这样，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:35:24.500

使构造函数私有或受保护的一个常见示例是实现[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。请参阅[此答案](https://stackoverflow.com/a/203359/318508)以获取 PHP 示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-20T19:00:12.337

[在类中使用构建器模式](https://sourcemaking.com/design_patterns/builder)时，以及为类添加[静态工厂方法](https://sourcemaking.com/design_patterns/factory_method)时，我也会使用私有构造函数。

两者都可以帮助您避免创建过多的构造函数，还可以帮助您创建具有有意义名称的构造函数。例如，而不是：

```
new Robot(2, 4, 255, 0, 0) 
```

您可以使用构建器创建：

```
RobotBuilder.withNumberOfArms(2).withColor(255,0,0).withNumberOfEyes(2).build() 
```

由于构建器位于类内部，因此只有它可以调用其私有构造函数。

对于静态工厂方法，您可以看到这些：

```
public static Robot createFourArmedRobot();
public static Robot createBlindRobot(); 
```

对于其他开发人员来说，比两个具有自定义参数的构造函数更有意义。（更多与 OOP 相关而不是 php）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:36:31.633

通常我们将 __construct() 作为与设计模式相关的单例模式的私有，以了解更多关于它的信息，请访问此页面 - [http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

# jsf-2 - Richfaces 或 Primefaces 的日历弹出窗口不工作

> ID：15315609
> 
> 赞同：0
> 
> 时间：2013-03-09T20:33:38.993
> 
> 标签：jsf-2, calendar, richfaces

我在我的项目中添加了richfaces 4.3.0 jar，还尝试在 netbeans 7.2.1 中使用 primefaces3.4.2

我正在尝试在我的项目中使用日历组件，但是当我使用 Richfaces 或 primefaces 日历弹出窗口没有出现并且它仍然存在并且它是或它没有给出任何错误

我在 .xhtml 文件中使用了以下代码

```
<rich:calendar  id="givenDate" enableManualInput="true" style="width:60px" datePattern="MM/dd/yyyy" value="#{NewClass.ts}" immediate = "true"  required="true" popup="true" /> 
```

在 java bean 中，我使用了带有 getter 和 setter 方法的 java.util.Date 类型的变量。谁能指出我做错了什么。

已解决：- 我忘了在 xhtml 页面中添加 h:head 标记，这就是为什么 Richfaces 和 primefaces 都不起作用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-26T13:39:29.043

Primefaces 日历宽度更改尺寸标签

```
<p:calendar size="7" /> 
```

# iphone - 如何在不丢失上下文的情况下绘制上下文？

> ID：15315619
> 
> 赞同：1
> 
> 时间：2013-03-09T20:34:23.820
> 
> 标签：iphone, objective-c, xcode

我正在`UIImage`向/从网格绘制 s。我目前只绘制更改......并且只有更改......但是旧图像应该留在原地......但是现在它们在下一次调用后消失了`drawRect:(CGRect)rect:`

```
- (void)drawRect:(CGRect)rect
{
    int cellSize = self.bounds.size.width / WIDTH;
    double xOffset = 0;

    CGRect cellFrame = CGRectMake(0, 0, cellSize, cellSize);
    NSUInteger cellIndex = 0;
    cellFrame.origin.x = xOffset;
    for (int i = 0; i < WIDTH; i++)
    {        
        cellFrame.origin.y = 0;
        for (int j = 0; j < HEIGHT; j++, cellIndex++)
        {
            if([[self.state.boardChanges objectAtIndex:(i*HEIGHT)+j] intValue]==1){
                if (CGRectIntersectsRect(rect, cellFrame))                {
                    NSNumber *currentCell = [self.state.board objectAtIndex:cellIndex];

                    if (currentCell.intValue == 1)
                    {
                        [image1 drawInRect:cellFrame];
                    }
                    else if (currentCell.intValue == 0)
                    {
                        [image2 drawInRect:cellFrame];
                    }
                }
            }
            cellFrame.origin.y += cellSize;
        }
        cellFrame.origin.x += cellSize;
    }   
} 
```

我尝试了以下混合，但没有任何结果：

```
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    //CGContextAddRect(context, originalRect);
    CGContextClip(context);    
    [image drawInRect:rect];
    CGContextRestoreGState(context); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:19:29.680

Cocoa/UIKit 可以随时丢弃之前绘制的视图内容。当您的视图被要求绘制时，它必须在提供的`rect`. 你不能只是决定不画一些东西。（好吧，你可以做任何你喜欢的事情，但你会得到你所看到的结果。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:15:48.890

找到另一个解决方案->只需截屏并以drawRect为背景进行绘制。

```
-(void)createContent{
    CGRect rect = CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height);
    UIGraphicsBeginImageContext(rect.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    CGImageRef screenshotRef = CGBitmapContextCreateImage(UIGraphicsGetCurrentContext());
    _backgroundImage = [[UIImage alloc] initWithCGImage:screenshotRef];
    CGImageRelease(screenshotRef);
    UIGraphicsEndImageContext();
}

- (void)drawRect:(CGRect)rect 
{   
    [_backgroundImage drawInRect:CGRectMake(0.0f, 0.0f, self.bounds.size.width, self.bounds.size.height)];
    ....
    ....
    ....
} 
```

＃＃＃＃＃＃编辑

找到了一种更复杂的方法来完成上述操作： [http ://www.cimgf.com/2009/02/03/record-your-core-animation-animation/](http://www.cimgf.com/2009/02/03/record-your-core-animation-animation/)

＃＃＃＃ 编辑

另一种解决方案是使用 CALayers 并且只更新那些改变的部分......

＃＃＃＃编辑

或者：

self.layer.contents = (id) [_previousContent CGImage];

# php - 两个 PHP 脚本相互干扰，我不知道为什么

> ID：15315621
> 
> 赞同：3
> 
> 时间：2013-03-09T20:34:38.680
> 
> 标签：php

这两个从两个不同的数据库中提取数据。这一切都很好，直到我第二次重复第一个（提取不止一篇文章的评论数），第二个脚本（提取关于文章的访问数据并按降序排列）停止工作（没有错误，没有，只是不提供输出）。我还不是 PHP 方面的专家，所以我似乎无法弄清楚这种情况有什么问题。也许你们中的一些人会注意到一些明显的缺陷，使他们像那样干扰？

第一个脚本（评论计数）。只是为了说清楚：我不使用“定义”，我第二次将它用于差异。文章。它只需要在第一个工作中。）：

```
<?php
$id = "1"; //The ID of the page. You can get this from Manage -> Pages.

define('IN_COMMENTICS', '1');
require ($_SERVER['DOCUMENT_ROOT'].'comments/includes/db/connect.php');

$query = mysql_query("SELECT * FROM `".$cmtx_mysql_table_prefix."comments` WHERE is_approved = '1' AND page_id = '$id'");
$total = mysql_num_rows($query);

echo $total;
?> 
```

第二个脚本（计算访问次数）：

```
<?php 

$sql = "SELECT pagename, hits, title FROM counts ORDER BY hits DESC LIMIT 10"; 
$res = mysql_query($sql); 
if(!$res) { 
// oops - exit?  
} 
while(list($page,$hits,$title) = mysql_fetch_row($res)) { 
 echo "<li><a href='$page'>$title</a> $hits</li>"; 
} 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:20:11.267

我唯一能看到的是您正在使用该函数`require`来包含您的数据库初始化文件，**并且**它执行了两次，我创建了导致您面临的这个问题的问题。

也许，考虑使用[require_once](http://php.net/require_once)函数，它会注意不要多次加载数据库初始化文件。

### 最后，我建议执行以下操作

替换这个：

```
require ($_SERVER['DOCUMENT_ROOT'].'comments/includes/db/connect.php'); 
```

这样：

```
require_once ($_SERVER['DOCUMENT_ROOT'].'comments/includes/db/connect.php'); 
```

# parsing - Haskell/Parsec：如何将 Text.Parsec.Token 与 Text.Parsec.Indent 一起使用（来自 indents 包）

> ID：15315624
> 
> 赞同：17
> 
> 时间：2013-03-09T20:34:43.330
> 
> 标签：parsing, haskell, types, indentation, parsec

Haskell Parsec的*indents*包提供了一种解析缩进式语言（如 Haskell 和 Python）的方法。它重新定义了`Parser`类型，那么如何使用 Parsec[`Text.Parsec.Token`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html)模块导出的普通`Parser`类型的令牌解析器函数呢？

# 背景

*   [Parsec](http://hackage.haskell.org/packages/archive/parsec/latest/doc/html/Text-Parsec.html)是一个解析器组合库，不管这意味着什么。
*   [IndentParser 0.2.1](http://hackage.haskell.org/package/IndentParser-0.2.1)是一个旧包，提供两个模块[`Text.ParserCombinators.Parsec.IndentParser`](http://hackage.haskell.org/packages/archive/IndentParser/0.2.1/doc/html/Text-ParserCombinators-Parsec-IndentParser.html)和[`Text.ParserCombinators.Parsec.IndentParser.Token`](http://hackage.haskell.org/packages/archive/IndentParser/0.2.1/doc/html/Text-ParserCombinators-Parsec-IndentParser-Token.html)
*   [indents 0.3.3](http://hackage.haskell.org/package/indents-0.3.3)是一个提供单个模块的新包[`Text.Parsec.Indent`](http://hackage.haskell.org/packages/archive/indents/0.3.3/doc/html/Text-Parsec-Indent.html)

Parsec 带有[大量的模块](http://hackage.haskell.org/packages/archive/parsec/latest/doc/html/Text-Parsec.html)。它们中的大多数导出了一堆有用的解析器（例如`newline`from [`Text.Parsec.Char`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Char.html#v:newline)，它解析一个换行符）或解析器组合器（例如 `count n p`from [`Text.Parsec.Combinator`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Combinator.html#v:count)，它运行解析器*p*，*n*次）

但是，该模块[`Text.Parsec.Token`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html)希望导出由用户参数化的具有被解析语言特征的函数，例如，该函数将在解析“{”之后和解析“}”之前`braces p`运行解析器*p* ，忽略诸如注释之类的东西，其语法取决于您的语言。

实现这一点的方法[`Text.Parsec.Token`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html)是它导出一个[`makeTokenParser`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html#v:makeTokenParser)你调用的函数，给它你特定语言的参数（比如评论的样子），它返回一个包含所有函数的记录[`Text.Parsec.Token`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html)，适应你的语言指定的。

当然，在缩进风格的语言中，这些需要进一步调整（也许？这是我不确定的地方——我稍后会解释）所以我注意到[（可能已经过时的）IndentParser 包](http://hackage.haskell.org/package/IndentParser-0.2.1)提供了一个模块[`Text.ParserCombinators.Parsec.IndentParser.Token`](http://hackage.haskell.org/packages/archive/IndentParser/0.2.1/doc/html/Text-ParserCombinators-Parsec-IndentParser-Token.html)它看起来是[`Text.Parsec.Token`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html).

我应该在某些时候提到所有 Parsec 解析器都是一元函数，所以它们对状态做了神奇的事情，以便错误消息可以说明错误出现在源文件的哪一行和哪一列

# 我的问题

由于几个小原因，在我看来indents[包](http://hackage.haskell.org/package/indents-0.3.3)或多或少是 IndentParser 的当前版本，但是它不提供看起来像的模块，[`Text.ParserCombinators.Parsec.IndentParser.Token`](http://hackage.haskell.org/packages/archive/IndentParser/0.2.1/doc/html/Text-ParserCombinators-Parsec-IndentParser-Token.html)它只提供`Text.Parsec.Indent`，所以**我想知道如何获得所有令牌解析器`Text.Parsec.Token`**（比如`reserved "something"`解析保留关键字“某物”，或者像`braces`我之前提到的那样）。

在我看来，（新的）`Text.Parsec.Indent`通过某种单子状态魔法来计算源代码的列位是什么，因此它不需要像`whiteSpace`from那样修改令牌解析器[`Text.Parsec.Token`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html#v:whiteSpace)，这可能就是它的原因不提供替换模块。但是我遇到了类型问题。

你看，没有`Text.Parsec.Indent`，我所有的解析器都是类型`Parser Something`，其中 Something 是返回类型，并且`Parser`是 Text.Parsec.String 中定义的类型别名

```
type Parser = Parsec String () 
```

但是我使用自己的定义`Text.Parsec.Indent`而不是导入`Text.Parsec.String`

```
type Parser a = IndentParser String () a 
```

这使我的所有类型的解析器，其中 IndentParser 在 Text.Parsec.Indent 中定义。但是我从中获得的令牌解析器类型错误。`IndentParser String () *Something*``makeTokenParser``Text.Parsec.Token`

如果现在这没有多大意义，那是因为我有点迷路了。类型问题[在这里讨论了一下](http://spin.atomicobject.com/2012/03/16/using-text-parsec-indent-to-parse-an-indentation-sensitive-language-with-haskells-parsec-library/)。

* * *

我得到的错误是我尝试用另一个定义替换`Parser`上面的一个定义，但是当我尝试使用其中一个令牌解析器时`Text.Parsec.Token`，我得到了编译错误

```
Couldn't match expected type `Control.Monad.Trans.State.Lazy.State
                                Text.Parsec.Pos.SourcePos'
            with actual type `Data.Functor.Identity.Identity'
Expected type: P.GenTokenParser
                 String
                 ()
                 (Control.Monad.Trans.State.Lazy.State Text.Parsec.Pos.SourcePos)
  Actual type: P.TokenParser () 
```

## 链接

*   [秒差距](http://hackage.haskell.org/packages/archive/parsec/latest/doc/html/Text-Parsec.html)
*   [IndentParser](http://hackage.haskell.org/package/IndentParser-0.2.1)（旧包）
*   [indents](http://hackage.haskell.org/package/indents-0.3.3)，提供 Text.Parsec.Indent （新包）
*   使用示例代码[讨论解析器类型](http://spin.atomicobject.com/2012/03/16/using-text-parsec-indent-to-parse-an-indentation-sensitive-language-with-haskells-parsec-library/)
*   [另一个使用 Text.Parsec.Indent 的例子](http://changaco.net/blog/parse-indented-tree/)

遗憾的是，上述示例都没有使用像 Text.Parsec.Token 中那样的令牌解析器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T16:19:06.297

# 你想做什么？

听起来您希望在任何地方都将解析器定义为类型

`Parser *Something*`

（其中*Something*`Parser`是返回类型）并通过隐藏和重新定义通常从`Text.Parsec.String`或类似导入的类型来使其工作。您仍然需要导入一些`Text.Parsec.String`, 以使 Stream 成为 monad 的实例；使用以下命令执行此操作：

```
import Text.Parsec.String () 
```

你的定义`Parser`是正确的。或者等效地（对于那些在评论中关注聊天的人）您可以使用

```
import Control.Monad.State
import Text.Parsec.Pos (SourcePos)

type Parser = ParsecT String () (State SourcePos) 
```

并可能取消`import Text.Parsec.Indent (IndentParser)`出现此定义的文件中的 。

# 错误，墙上的错误

您的问题是您正在查看编译器错误消息的错误部分。你专注于

```
Couldn't match expected type `State SourcePos' with actual type `Identity' 
```

当你应该专注于

```
Expected type: P.GenTokenParser ...
  Actual type: P.TokenParser ... 
```

# 它编译！

你从哪里“导入”解析器`Text.Parsec.Token`，你实际上做什么，当然（正如你简要提到的）首先定义一个记录你的语言参数，然后将它传递给函数`makeTokenParser`，它返回一个包含令牌解析器的记录。

因此，您必须有一些看起来像这样的行：

```
import qualified Text.Parsec.Token as P

beetleDef :: P.LanguageDef st
beetleDef =
    haskellStyle {
        parameters, parameters etc.
        }

lexer :: P.TokenParser ()
lexer = P.makeTokenParser beetleDef 
```

...但 a`P.LanguageDef st`只是 a `GenLanguageDef String st Identity`，而 a`P.TokenParser ()`真的是 a `GenTokenParser String () Identity`。

您必须将类型声明更改为以下内容：

```
import Control.Monad.State
import Text.Parsec.Pos (SourcePos)
import qualified Text.Parsec.Token as P

beetleDef :: P.GenLanguageDef String st (State SourcePos)
beetleDef =
    haskellStyle {
        parameters, parameters etc.
        }

lexer :: P.GenTokenParser String () (State SourcePos)
lexer = P.makeTokenParser beetleDef 
```

……就是这样！这将允许您的“导入”令牌解析器具有 type ，而不是（这是 的别名）并且您的代码现在应该编译。`ParsecT String () (State SourcePos) *Something*``Parsec String () *Something*``ParsecT String () Identity *Something*`

（为了最大的普遍性，我假设您可能`Parser`在一个文件中定义类型，该文件与您定义实际解析器函数的文件分开并由该文件导入。因此有两个重复的`import`语句。）

# 谢谢

非常感谢[Daniel Fischer](https://stackoverflow.com/users/1011995/daniel-fischer)帮助我解决这个问题。

# android - 带有 Phonegap 的 Android SDK 和 Eclipse：“未安装 android 目标”

> ID：15315625
> 
> 赞同：1
> 
> 时间：2013-03-09T20:35:17.403
> 
> 标签：android, eclipse, cordova, sdk

我按照此处或其他任何地方的安装说明进行操作：http: [//mobile.tutsplus.com/tutorials/android/android-sdk-installation/](http://mobile.tutsplus.com/tutorials/android/android-sdk-installation/)

当我想用 Phonegap 创建一个新项目时，它说：

> 未安装任何 Android 目标。请通过 android SDK 至少安装一个

一切都在 bash_profile 中，安装了 Eclipse，安装了 SDK，设置了 Android 设备。

有人可以帮忙吗？

非常感谢你提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:38:28.093

错误消息几乎说明了一切。

在您的 SDK 管理器中，您需要下载一个或多个“SDK 平台”条目，具体取决于您要编译的 API 级别，例如我在下面突出显示的那个：

![Android SDK 管理器](../Images/d30e2a07c6150b3741219e9e9a507fa1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:31:28.033

如果您收到此错误并且您已经安装了 Android SDK，那是因为 Phonegap 2.6.0 的 Android 指令不正确，他们将在下一个 Phonegap 版本中解决这些问题。

修复此错误的方法是编辑 /phonegap2.6.0/lib/android/bin/create 并将 ANDROID BIN={boilerplate code} 更改为 ANDROID BIN=/Users/tim/Development/android-sdk-macosx/tools/android将此路径替换为您的 android-sdk/tools/android 目录。您的工具目录将无法正常工作，并将继续引发错误。

# c# - 当用户验证他们的电子邮件c#时更新sql表作为验证

> ID：15315627
> 
> 赞同：0
> 
> 时间：2013-03-09T20:35:26.207
> 
> 标签：c#, asp.net, .net, sql, email-verification

我目前正在建立一个类似网站的论坛，人们可以在其中注册并登录到他们自己的页面来发布内容。

我已经构建了一个系统来发送一个验证链接到注册人的电子邮件以及一个包含他们的用户用户 ID 的链接，这是他们在 URL 上的电子邮件

```
http://localhost:50490/ForumTest/ActivateProfile.aspx?Username=jason90@yahoo.co.uk 
```

我需要知道如何让我的 SQL 数据库表`[UserTable]`字段`UserVerified`更新为“1”，目前默认设置为“0”。

我只需要知道如何在页面后面编写代码`ActivateProfile.aspx`以在用户点击此页面时更新此数据字段`Activate button`。

如果有人可以帮助我，那就太棒了

我一直在尝试到处寻找解决方案，但这一切都基于在Microsoft Visual Studio 环境中使用**CREATE USER WIZARD制作的示例。**我所有的表单和字段都是手动制作的，因此这些示例对我没有用:(。

希望可以有人帮帮我

非常感谢提前

:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:28:00.150

您是否有现有的数据库连接？您需要执行一些类似于此的 SQL：

```
UPDATE UserTable SET UserVerified=1 WHERE Username='jason90@yahoo.co.uk' 
```

# java - ActiveMQConnectionFactory 发送超时

> ID：15315631
> 
> 赞同：6
> 
> 时间：2013-03-09T20:35:53.423
> 
> 标签：java, configuration, activemq, activemq-cpp

根据ActiveMQ 站点上的[这个配置页面](http://activemq.apache.org/cms/configuring.html)`connection.sendTimeout`，属性是：

> 等待**消息发送**响应的**时间**，默认值零表示永远等待。如果代理是快速生产者或没有消费者，那么永远等待允许代理对来自**该客户端的消息进行流控制，这样代理如果不减慢生产者的速度，就会耗尽内存。**不影响 Stomp 客户端，因为发送由代理确认。（从 ActiveMQ-CPP 2.2.1 开始）

我很难解释这意味着什么（以及该`sendTimeout`属性的真正含义/它的作用）：

*   什么是“消息发送”对象？
*   为什么 ActiveMQ 会等待响应？它不是在 JMS 连接的服务器端吗？它不应该等待请求吗？
*   它实际上超时是什么？什么时候应该使用它？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T22:25:21.797

超时影响客户端向 Broker 发送消息。在发送不是异步的情况下，客户端等待代理返回响应，指示消息已被接收并添加到消息存储中。在某些情况下，如果由于已达到其预设内存限制之一，Broker 已启用生产者流控制，这可能会阻塞很长时间。如果客户端应用程序不能容忍长时间等待发送，它可以配置此超时，以便 MessageProducer::send 不会无限期地阻塞。

消息以同步模式发送，因为 Connection 配置为 alwaysSyncSend=true，或者因为 MessageProducer 发送时将传递模式设置为 Persistent。

通常，如果您已为代理配置了与您的用例相匹配的限制，则不需要使用此设置。

# php - ajax 真的有效吗？

> ID：15315636
> 
> 赞同：1
> 
> 时间：2013-03-09T20:36:21.727
> 
> 标签：php, javascript, ajax, html

我使用 JS ajax 和 php 来登录和注册系统以构建游戏。

我的问题是我不确定 ajax 请求实际上是在处理我指向的 php 代码。当我运行代码时，网页上发生了正确的事情，但我已经将 var_dump() 放入 php 以确保数据确实存在，但我没有像通常使用 var_dump 那样从网页上的 php 中显示任何内容()

继承人的 html 即时通讯使用：

```
<article id="container">
    <div id="load-new" class="game_menu">
        <h1>LOAD/NEW</h1>
    </div>
    <div id="reg" class="game_menu">
        <h1>REGISTER</h1>
        <form name="register" method="post" action="">
                <label for="usernamesignup" class="uname">Your username</label>
                <input id="usernamesignup" name="usernamesignup" required="required" type="text" placeholder="Username" />
                <label for="emailsignup" class="youmail"> Your email</label>
                <input id="emailsignup" name="emailsignup" required="required" type="email" placeholder="domain@mydomain.com"/>
                <label for="passwordsignup" class="youpasswd">Your password </label>
                <input id="passwordsignup" name="passwordsignup" required="required" type="password"/>
                <label for="passwordsignup_confirm" class="youpasswd">Please confirm your password </label>
                <input id="passwordsignup_confirm" name="passwordsignup_confirm" required="required" type="password"/>
                <button id="reg_submit" type="button">Register</button>
        </form>
    </div>
    <div id="login" class="game_menu">
        <h1>LOGIN</h1>
        <form name="login" method="post" action="">
            <label for="username" id="username_label">Username:</label>
            <input type="text" name="username" id="username" value=""/>
            <label for="password" id="password_label">Password:</label>
            <input type="password" name="password" id="password" value=""/>
            <button id="login_submit" type="button">Login</button>
        </form>
    </div>
    <div id="access" class="game_menu">
        <h1>ACCESS</h1>
        <button id="login_but" type="button">Login</button>
        <button id="reg_but" type="button">Register</button>
    </div> 
```

继承人与 ajax 请求一起使用的 JS：

```
this.login_ajax = function()
{
        var username = $("#username").val();
        var password = $("#password").val();

        var dataString = 'username='+ username + '&password='+ password;
        alert(dataString);

    $.ajax({
        type:"POST",
        url:"PHP/login.php",
        data: dataString,
        success: function() {
            $('#login').hide();
            $('#load-new').show();
        },
        error: function(){
            alert("ERROR");
        }

    });
}; 
```

这是运行的php文件：

```
 if ((isset($_POST['username'])) && (strlen(trim($_POST['username'])) > 0)) {
    $username = stripslashes(strip_tags($_POST['username']));
} else {$username = 'No username entered';}
if ((isset($_POST['password'])) && (strlen(trim($_POST['password'])) > 0)) {
    $password = stripslashes(strip_tags($_POST['password']));
} else {$password = 'No password entered';}

var_dump($username); 
```

就像我说的，ajax 请求返回成功，但我没有收到来自 php 文件的转储，这让我想，php 文件真的在运行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:45:42.087

在success() 中，您可以查看从PHP 传递到HTML 页面的数据。您必须设置成功函数（数据）{...}，并执行类似 console.log(data); 的操作 在成功函数本身内。然后打开你的浏览器，看看 console.log 输出了什么。

如果您使用 Google Chrome - 我强烈建议您下载 Chrome 插件[PHP Console](https://chrome.google.com/webstore/detail/php-console/nfhmhhlpfleoednkpnnnkolmclajemef?hl=en)以检查未来的 PHP 错误和警告。它可能并不完美，但我认为它很棒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:41:39.547

直接从浏览器运行 php 文件以检查结果。如果您使用 GET，这会更容易，至少对于开发而言。

而且您的代码不会与从服务器接收到的信息进行交互。回调应该有一个参数

```
success: function (data) {

    alert(data);

} 
```

**编辑**

AJAX 活动通常包括在服务器中执行一个程序（在您的情况下为 login.php），并检索结果（一个字符串）。但是从服务器询问信息并且什么都不做会很愚蠢，对吧？所以这就是我们为成功定义一个回调函数的原因。

假设您有一个 .php 文件，该文件在数据库中查找一本书的参考，并打印出作者的姓名。您在客户端检索的是作者的姓名......所以一个天真的回调函数可能是：

```
success: function (author) {
    alert('that book was written by ' + author);
} 
```

成功回调的第一个参数是从服务器接收到的字符串。如果要返回多个值而不是字符串，则应使用 $.getJSON 函数，或在 $.ajax 中指定要将结果解析为 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:58:13.287

*检查 AJAX 请求的方法比使用 console.log 通过 AJAX 回调检查结果更简单*，您将能够看到请求/响应的**所有**详细信息，包括 HTTP 状态代码（这样您就可以查看您是否'没有收到 500 服务器错误）。

*   首先设置您的服务器端脚本（在您的情况下为 PHP）以转储您需要检查的所有内容。它采用什么格式（JSON / XML / 纯文本）并不重要，因为我们稍后会查看原始响应。
*   将一个按钮添加到您的 HTML 并在 jQuery 中连接它以在单击时发出 AJAX 请求：

    $('#testButton').click(function(){ $.ajax(options); });

大多数浏览器现在都有开发者工具（Firefox 中的 Firebug？）

在 Chrome 上：

*   按 F12 打开开发者工具。
*   切换到网络选项卡。
*   从您打开 Network 选项卡的那一刻起，devtools 就开始记录从该页面发出的每个请求。
*   现在启动您的 AJAX 请求（通过测试按钮通常很好），您应该会看到请求显示在列表中。
*   当您单击请求时，它将打开详细信息，您可以在其中看到标头、预览、响应、Cookie 和时间详细信息。

在 Internet Explorer 上：

*   按 F12 打开开发者工具。
*   切换到网络选项卡。
*   按开始捕获按钮
*   发起你的 AJAX 请求
*   双击响应查看详细信息

在火狐上：

*   我确定它很相似，但我有一段时间没有使用它了，所以希望有人可以编辑它并添加正确的步骤！

这将是了解 AJAX 请求背后到底发生了什么的最佳方式。

不要误解我的意思——你仍然可以（并且应该）使用 AJAX 回调和 console.log（或 Chrome 中的 console.dir）来调试你的 AJAX 请求，但是当事情不正常时，devtools 总是最简单的最快的方式来“看引擎盖”！

# html - 空白被添加到正文的底部

> ID：15315637
> 
> 赞同：1
> 
> 时间：2013-03-09T20:36:22.407
> 
> 标签：html, css, whitespace

我目前已经查看了 Stackoverflow 上的每一篇文章，以找到解决此问题的方法。我想不明白。有问题的网站是[http://ourcityourstory.com/](http://ourcityourstory.com/)。如果滚动到底部，您会注意到大约 23px 的空白。这——据我所知——以前不存在。它似乎刚刚出现。虽然，我可能错过了。

不管怎样，我已经做了所有我能做的关于边距、填充、浮动、溢出：隐藏，将我的“clearfix”类附加到元素上。等等。我不知道是什么。任何帮助将不胜感激，因为这真的让我的大脑难以置信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:40:42.390

这是因为`iframe`在文档的最后生成了一个。

该框架没有可见内容（只有一些脚本），因此您可以将其设置`position`为`absolute`删除空间。

您可以尝试使用以下 CSS 代码进行制作：

```
$('iframe[class^=PIN]') { position: absolute; } 
```

# php - Phing 在 if 语句中失败

> ID：15315643
> 
> 赞同：0
> 
> 时间：2013-03-09T20:36:39.700
> 
> 标签：php, build, phing

如果我在 phing 中执行它，效果很好：

```
 <copy todir="${dir.tmp}/${edition}/pdir">
                    <fileset refid="${edition}-p" />
                    <filterchain refid="${edition}-filter" />
                </copy> 
```

如果我像下面这样执行它（${edition} 设置为“c”），它会失败并出现以下错误：

> 目标“build”的执行失败，原因如下：[wrapped: You must not specify multiple attributes when using refid]

```
 <if>            
             <or>
                <equals arg1="${edition}" arg2="a" />
                <equals arg1="${edition}" arg2="b" />
                <equals arg1="${edition}" arg2="c" />
            </or>
            <then>                  
                <copy todir="${dir.tmp}/${edition}/pdir">
                    <fileset refid="${edition}-p" />
                    <filterchain refid="${edition}-filter" />
                </copy>                 
            </then>
        </if> 
```

它与上面的语句相同，只有一个 ref 属性。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T18:27:55.857

这似乎已在 Phing 2.6.0 中修复。

# python - 使用上下文的for循环django模板标签

> ID：15315645
> 
> 赞同：0
> 
> 时间：2013-03-09T20:36:51.043
> 
> 标签：python, django

我正在尝试查询所有餐厅并将它们显示给我的模型中的用户，但我无法获取模板来显示模型中的项目

```
{% block content %}
<h1>Featured Restraunts</h1>
<ul>

{% for restaurant in restaurants %}
    <li><h2>{{ restaurants.name }}</h2></li>
{% endfor %}
</ul>

{% endblock %}

this is what i get
Featured Restaurants

and this is my views.py
def view_restaurants(request):
    restaurants = Restaurant.objects.all()
    return render(request,'menu/restaurants.html',{"restaurants":"restaurants",},context_instance=RequestContext(request)) 
```

是拼写错误吗，我只想查看餐厅列表。

如果我在限制浏览器显示后删除 .name

餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅餐厅

即使只有 2 个条目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:38:20.307

您需要删除变量周围的引号`restaurants`（也不需要逗号） -

```
return render(request,'menu/restaurants.html', {"restaurants": restaurants}) 
```

也不`render`需要您设置`context_instance`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:39:34.587

```
{"restaurants":"restaurants",} 
```

似乎是你的问题

# apache - .htaccess 如何忽略目录？

> ID：15315646
> 
> 赞同：-1
> 
> 时间：2013-03-09T20:37:12.073
> 
> 标签：apache, .htaccess, mod-rewrite

我有以下网址：myweb.com/products
我的主机中有一个名为“products”的目录。

输入上述网址时，它会将我重定向到 myweb.com/products/ 并列出目录中的文件。
我怎样才能忽略/禁用它的工作方式，所以它不会使用名称搜索目录，而是尝试查找具有该名称的文件？

所以当我输入 myweb.com/products 时，它会尝试查找名为 products 的文件，如果找不到，它将发送到 403 页面

*这是一个例子。我有更多目录。

**编辑：**
也许我对自己的解释不够好。
我有以下 RewriteRule

```
RewriteRule ^(.*).php redirect.php [L,QSA] 
```

由于 products 是一个文件夹，它会将我的所有内容重定向到redirect.php
，它不会将我重定向到redirect.php，这就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:51:09.047

如果您有一个具有此名称的目录，则 apache 无法找到具有该名称的文件。

要关闭目录列表，请使用[`Options`](http://httpd.apache.org/docs/current/mod/core.html#options)指令

```
Options -Indexes 
```

这将防止列出目录内容。但是错误信息不是 404 页面，而是 403 Forbidden。

此外，您必须关闭对[索引](http://httpd.apache.org/docs/current/mod/mod_dir.html#directoryindex)文件的查找

```
DirectoryIndex disabled 
```

否则，Apache 将显示 index.html、index.php、... 文件（如果存在）。

为防止将斜杠添加到目录末尾，请使用

```
DirectorySlash off 
```

要重写具有相同名称并`.php`附加的文件，您可以使用此[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule (.+)/ $1.php 
```

这将查看请求的路径是否是目录，如果是，还检查具有相同名称和`.php`扩展名的常规文件。如果两者都为真，它会重写 PHP 文件。

如果您想要重定向而不仅仅是重写，则必须`R`向 RewriteRule 添加一个标志

```
RewriteRule (.+)/ $1.php [R,L] 
```

如果它应该重写`redirect.php`而不是`product.php`，使用

```
RewriteRule (.+)/ redirect.php 
```

综上所述，这给出了简化的

```
DirectorySlash off

RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .+ redirect.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:40:18.600

在 myweb.com/products 中写一个 index.php 来过滤掉你想要的名字，我猜。

# html - Div 不随图片展开

> ID：15315647
> 
> 赞同：0
> 
> 时间：2013-03-09T20:37:23.300
> 
> 标签：html

我有一个 div，当我在那个潜水中放一张图片并且只设置图片的宽度以便它可以有适当的比例时，div 不会扩展到它所在的 div 的大小？

请问你能帮忙吗？

（如果您运行下面的代码，我希望粉红色的 div 在我添加任何内容时展开）

非常感谢！

html

```
<html>
<head>
    <title>test</title>
    <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
    <div class="gigantic">
        <div class="main">
            <div class="twitterPP">
                <img src="https://si0.twimg.com/profile_images/2015016150/petecashmoreavatar_normal.png">
            </div>
            <div class="mainMedia">
                <img src="http://rack.1.mshcdn.com/media/ZgkyMDEzLzAzLzA4LzY1L2F0dC4yZjU4Mi5qcGcKcAl0aHVtYgk5NTB4NTM0IwplCWpwZw/91fe06f6/108/att.jpg">
            </div>
        </div>

        <div class="main">

        </div>
    </div>
</body>
</html> 
```

css

```
.gigantic
{
    width: 900px;
    margin-right: auto;
    margin-left: auto;
    background-color: #0f0;
    padding: 6px;
    margin-top: 100px;
}

.main 
{
    width: 800px;
    background-color: #f0f;
    margin-right: auto;
    margin-left: auto;
    margin-bottom: 100px;
}

.twiterpp
{
    width: 60px;
    float: left;
    margin-right: 50px;
    margin-left: 50px;
}

.twitterpp img
{
    width: 55px;
    height: 55px;
    border-radius: 3px;
    margin-left: 6px;
    margin-top: 6px;
    position: relative;
}

.mainMedia
{
    float: right;
    width: 700px;
}

.mainMedia img
{
    width: 700px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:39:23.313

您可以使用高度：自动；当图像发生变化时自动设置 div 的高度。如果要自动设置宽度，宽度也一样。

当它应该是 .twitterPP 时，您还键入了 .twitterpp。避免对类和 ID 使用大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:49:23.553

尝试这样设置 -

HTML

```
<div class="img-box"></div> 
```

CSS -

```
.img-box {
background-image: url(images/yourimg.gif);
background-repeat: no-repeat;
width: 100px;
padding: 0px 0px 0px 0px; 
} 
```

然后设置宽度以匹配您自己的偏好和填充以控制图像放置

# java - 将整数从文件存储到数组中并找到平均 JAVA

> ID：15315648
> 
> 赞同：1
> 
> 时间：2013-03-09T20:37:26.353
> 
> 标签：java, arrays, java.util.scanner, average

在此程序中，您将找到一个菜单，其中包含在阵列上执行不同功能的选项。该数组取自名为“data.txt”的文件。该文件包含整数，每行一个。我想创建一个将这些整数存储到数组中的方法，以便在需要完成计算时调用该方法。显然，我没有包含整个代码（太长了）。但是，我希望有人可以帮助我解决计算平均值的第一个问题。现在，控制台打印 0 表示平均值，因为除了文件中的 1、2、3 之外，数组的其余部分都用 0 填充。我想要的平均值是 2。欢迎提出任何建议。我的程序的一部分如下。谢谢。

```
public static void main(String[] args) throws FileNotFoundException {
    Scanner sc = new Scanner(System.in);
    System.out.println("Welcome to Calculation Program!\n");
    startMenus(sc);

}

private static void startMenus(Scanner sc) throws FileNotFoundException {
    while (true) {
        System.out.println("(Enter option # and press ENTER)\n");

        System.out.println("1\. Display the average of the list");
        System.out.println("2\. Display the number of occurences of a given element in the list");
        System.out.println("3\. Display the prime numbers in a list");
        System.out.println("4\. Display the information above in table form");
        System.out.println("5\. Save the information onto a file in table form");
        System.out.println("6\. Exit");

        int option = sc.nextInt();

        sc.nextLine();

        switch (option) {
            case 1:
                System.out.println("You've chosen to compute the average.");
                infoMenu1(sc);
                break;
            case 2:
                infoMenu2(sc, sc);
                break;
            case 3:
                infoMenu3(sc);
                break;
            case 4:
                infoMenu4(sc);
                break;
            case 5:
                infoMenu5(sc);
                break;
            case 6:
                System.exit(0);
            default:

                System.out.println("Unrecognized Option!\n");
        }

    }
}

private static void infoMenu1(Scanner sc) throws FileNotFoundException {
    File file = new File("data.txt");
    sc = new Scanner(file);

    int[] numbers = new int[100];

    int i = 0;

        while (sc.hasNextInt()) {
            numbers[i] = sc.nextInt();
            ++i;
        }

    System.out.println("The average of the numbers in the file is: " + avg(numbers));
}

public static int avg(int[] numbers) {
    int sum = 0;
    for (int i = 0; i < numbers.length; i++) {
        sum = (sum + numbers[i]);
    }
    return (sum / numbers.length);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:41:04.730

只需按如下方式修改您的方法：实际存储的数字
`public static int avg(int[] numbers, int len)`在哪里。 在您的情况下，您致电： `len`

```
System.out.println("The average of the numbers in the file is: " + avg(numbers, i)); 
```

在你的平均代码中：

```
 for (int i = 0; i < len; i++) {
        sum = (sum + numbers[i]);
    } 
```

即`numbers.length`用`len`传入的 替换

做`return (sum / len);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:45:36.393

您可以使用动态大小的数组，而不是使用静态大小的数组`List`：

```
import java.util.List;
import java.util.LinkedList;

// . . .

private static void infoMenu1(Scanner sc) throws FileNotFoundException {
    File file = new File("data.txt");
    sc = new Scanner(file);

    List<Integer> numbers = new LinkedList<Integer>();

    while (sc.hasNextInt()) {
        numbers.add(sc.nextInt());
    }

    System.out.println("The average of the numbers in the file is: " + avg(numbers));
}

public static int avg(List<Integer> numbers) {
    int sum = 0;
    for (Integer i : numbers) {
        sum += i;
    }
    return (sum / numbers.size());
} 
```

这增加了允许您读取 100 多个数字的好处。由于`LinkedList`允许您在恒定时间内执行任意数量的`add`操作，因此在读取输入之前您不需要知道有多少个数字（甚至是计数的上限）。

正如 kkonrad 还提到的，您实际上可能希望也可能不希望使用浮点值作为平均值。现在你正在做整数算术，也就是说 和 的`1`平均值`2`是`1`。如果你愿意`1.5`，你应该考虑使用 a`double`来计算平均值：

```
public static double avg(List<Integer> numbers) {
    double sum = 0;
    for (Integer i : numbers) {
        sum += i;
    }
    return (sum / numbers.size());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:40:57.070

我认为*sum*应该是*double*并且*double*应该是*avg*函数的返回类型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T21:10:57.887

请以这种方式更改您的**平均功能**

```
 private static void infoMenu1(Scanner sc) throws FileNotFoundException {
    .
    .
    .
    System.out.println("The average of the numbers in the file is: " + avg(numbers,i));
  }

  public static int avg(int[] numbers,int length) {
    int sum = 0;
    for (int i = 0; i < length; i++) {
        sum = (sum + numbers[i]);

    }
    return (sum / length);
} 
```

在调用平均函数传递 i**时（您在 infoMenu1 中计算 data.txt 中的条目数）**并在循环中使用它并除以总和。这样，您的循环将不会运行 100 次迭代，并且行代码也减少了。

# c# - 如何正确循环并打印 Int、Long、Float 或 BigInteger 的位？

> ID：15315650
> 
> 赞同：1
> 
> 时间：2013-03-09T20:37:40.520
> 
> 标签：c#, bit-shift, bits, pointers

我正在尝试调试一些位移操作，并且我需要在位移操作之前和之后可视化这些位。

[我从这个答案](https://stackoverflow.com/a/5484498/328397)中读到我可能需要处理移位的回填，但我不确定这意味着什么。

我认为通过问这个问题（我如何打印 int 中的位），我可以弄清楚回填是什么，也许还有其他一些问题。

到目前为止，这是我的示例代码。

```
 static string GetBits(int num)
    {
        StringBuilder sb = new StringBuilder();
        uint bits = (uint)num;
        while (bits!=0)
        {
            bits >>= 1;

            isBitSet =  // somehow do an | operation on the first bit.
                        // I'm unsure if it's possible to handle different data types here
                        // or if unsafe code and a PTR is needed

            if (isBitSet)
                sb.Append("1");
            else
                sb.Append("0");
        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-07T20:17:34.423

```
Convert.ToString(56,2).PadLeft(8,'0') returns "00111000" 
```

这是一个字节，也适用于 int，只需增加数字

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-09T20:39:30.597

要测试是否设置了最后一位，您可以使用：

```
isBitSet = ((bits & 1) == 1); 
```

但是你应该在右移之前（而不是之后）这样做，否则你会错过第一位：

```
isBitSet = ((bits & 1) == 1);
bits = bits >> 1; 
```

但更好的选择是使用[BitConverter](http://msdn.microsoft.com/en-us/library/44xk6h48.aspx)类的静态方法将用于表示内存中数字的实际字节转换为字节数组。这种方法的优点（或缺点取决于您的需要）是它反映了运行代码的机器的字节顺序。

```
byte[] bytes = BitConverter.GetBytes(num);

int bitPos = 0;
while(bitPos < 8 * bytes.Length)
{
   int byteIndex = bitPos / 8;
   int offset = bitPos % 8;
   bool isSet = (bytes[byteIndex] & (1 << offset)) != 0;

   // isSet = [True] if the bit at bitPos is set, false otherwise

   bitPos++;
} 
```

# java - 删除 LineNumberTable 并过滤 LocalVariableTable？

> ID：15315652
> 
> 赞同：1
> 
> 时间：2013-03-09T20:37:43.717
> 
> 标签：java, bytecode, java-bytecode-asm

一些框架使用来自字节码的调试信息来读取方法参数名称。但调试信息包含更多。

为了最小化类大小（只是想知道），我们可能会删除所有数据并通过删除除方法参数名称之外的所有内容来`LineNumberTable`过滤。`LocalVariableTable`或者只是为了过滤变量，留下行号，所以 stracktraces 与行号保持一致。

有谁知道这是否可行（在我测试之前:)？或者可以做到这一点的工具（在我自己写之前:)？

谢谢。

**编辑**为了澄清我的问题：以解释方式修改的库（jar）（例如剥离一些 LocalVariableTable 数据）是否可以在 java 生态系统中工作（从 android 到应用服务器 - jboss、websphere ...）？

**编辑#2**我创建了一个快速而肮脏的条带化工具，这里有一些结果。

```
original jar size: 1,288,625
stripped just non-method local variables: 1,272,095  (99%)
removed and LineNumberTable: 1,192,492 (93%) 
```

从这些结果（如果我的代码是正确的；）我们可以得出结论，过滤 LocalVariableTable 无助于最小化；唯一有意义的是剥离 LineNumberTable - 但我们会在堆栈跟踪中丢失数字。

现在只是想知道 jar 是否可以在仅删除 LineNumberTable 的情况下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:05:10.710

只需使用`-g:none`删除此数据的选项进行编译。

要进一步减少类大小，您可以在不使用 StackMaps 的情况下使用`-target 1.5`. `-source 1.5`不幸的是，如果你这样做，Java 7 编译器要求你也编译，没有明显的原因。

当然，这将删除所有调试信息。如果您想保留某些信息以供框架使用，详细信息将取决于相关框架。

# android - 试图让 Android 的 Projection 和 Camera View 工作 - 应用这两个视图后，什么都没有改变

> ID：15315657
> 
> 赞同：3
> 
> 时间：2013-03-09T20:38:16.423
> 
> 标签：android, view, opengl-es, camera, projection

我的代码和网站上的代码几乎一模一样，只是变量名有一些变化：

```
package com.example.opengltraining;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLES20;
import android.opengl.GLSurfaceView;
import android.opengl.Matrix;

public class MyGL20Renderer implements GLSurfaceView.Renderer{

    private Triangle triangle1;

    private final float[] mProjMatrix = new float[16];
    private final float[] mVMatrix = new float[16];
    private final float[] mMVPMatrix = new float[16];
    private final float[] mRotationMatrix = new float[16];

    public static int loadShader(int type, String shaderCode){

        //create vertex shader type
        //or fragment shader type
        int shader = GLES20.glCreateShader(type);

        //add source code to shader and compile
        GLES20.glShaderSource(shader, shaderCode);
        GLES20.glCompileShader(shader);

        return shader;      
    }

    public void redrawTriangle(float[]triangleCoords){
            triangle1.changeTriangle(triangleCoords);
    }

    public void onSurfaceCreated(GL10 unused, EGLConfig config){
            //set background fram color
        GLES20.glClearColor(1f,0.5f, 0.25f, .5f);
        triangle1 = new Triangle();
    }
     public void onDrawFrame(GL10 unused) {

            // Draw background color
            GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

            // Set the camera position (View matrix)
            Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

            // Calculate the projection and view transformation
            Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

            // Draw triangle
            triangle1.draw(mMVPMatrix);
        }

    public void onSurfaceChanged(GL10 unused, int width, int height){
        GLES20.glViewport(0, 0, width, height);

        float ratio = (float) width / height;

        //applies projection matrix to object coordinates
        Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 2, 7);

    }

}

class Triangle{

    //shaders - vertex

    private final String vertexShaderCode =
            "attribute vec4 vPosition;" +
                    "void main() {" +
            "   gl_Position = vPosition;" +
            "}";

    //shaders - fragment

    private final String fragmentShaderCode = 
            "precision mediump float;" +
            "uniform vec4 vColor;" +
            "void main() {" +
            "   gl_FragColor = vColor;" +
            "}";

    private FloatBuffer vertexBuffer;
    private final int mProgram;
    private int mPositionHandle;
    private int mColorHandle;
    private int mMVPMatrixHandle;

    //number of coordinates per vertex in this array
    static final int COORDS_PER_VERTEX = 3;
       static float triangleCoords[] = { // in counterclockwise order:
             0.0f,  0.5f, 0.0f,   // top
            -0.5f, -0.25f, 0.0f,   // bottom left
             0.5f, -0.25f, 0.0f    // bottom right
        };

    private final int vertexCount = triangleCoords.length / COORDS_PER_VERTEX;
    private final int vertexStride = COORDS_PER_VERTEX * 4;
    //color of triangle
    float color[] = { 0f, 1f, 0f, 1.0f };
    public void draw(float[] mvpMatrix) {
        // Add program to OpenGL environment
        GLES20.glUseProgram(mProgram);

        // get handle to vertex shader's vPosition member
        mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

        // Enable a handle to the triangle vertices
        GLES20.glEnableVertexAttribArray(mPositionHandle);

        // Prepare the triangle coordinate data
        GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
                                     GLES20.GL_FLOAT, false,
                                     vertexStride, vertexBuffer);

        // get handle to fragment shader's vColor member
        mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

        // Set color for drawing the triangle
        GLES20.glUniform4fv(mColorHandle, 1, color, 0);

        // get handle to shape's transformation matrix
        mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

        // Apply the projection and view transformation
        GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);

        // Draw the triangle
        GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, vertexCount);

        // Disable vertex array
        GLES20.glDisableVertexAttribArray(mPositionHandle);
    }

    public void changeTriangle(float [] newTriangleCoords){
        ByteBuffer bb = ByteBuffer.allocateDirect(newTriangleCoords.length * 4);
        bb.order(ByteOrder.nativeOrder());

        vertexBuffer = bb.asFloatBuffer();
        vertexBuffer.put(newTriangleCoords);
        vertexBuffer.position(0);
    }

    public Triangle(){
        //init vertex buffer for shape cordinates
        ByteBuffer bb = ByteBuffer.allocateDirect(
                //number of cord vals * 4 bytes per float
                triangleCoords.length * 4);
        //use hardware's native byte order
        bb.order(ByteOrder.nativeOrder());

        //create floating point buffer
        vertexBuffer = bb.asFloatBuffer();
        //add coords to floatbuffer
        vertexBuffer.put(triangleCoords);
        //set buffer to read first coord
        vertexBuffer.position(0);   

        int vertexShader = MyGL20Renderer.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
        int fragmentShader = MyGL20Renderer.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

        //creates program for the triangle to go in.,
        mProgram = GLES20.glCreateProgram();
        GLES20.glAttachShader(mProgram, vertexShader);
        GLES20.glAttachShader(mProgram, fragmentShader);
        GLES20.glLinkProgram(mProgram);
    }
} 
```

我已经测试了这段代码与没有添加投影和相机视图的原始代码，两者之间没有区别。此外，由于某种原因，当我在模拟器上测试它时它不起作用，但当我在实际的 android 手机上测试它时它确实起作用（尽管投影和相机视图仍然不起作用）。

# silverlight - 绑定到 ItemsControl 中的当前项目 (WP7.1 / 8.0 / Silverlight)

> ID：15315661
> 
> 赞同：0
> 
> 时间：2013-03-09T20:38:24.720
> 
> 标签：silverlight, windows-phone-7, windows-phone-8

Windows Phone 7.1 项目（WP 8.0 SDK），我想将 ItemTemplate 中的当前项目传递给用户控件。

XAML：

```
 <ItemsControl.ItemTemplate>
            <DataTemplate>
                <local:ShipControl Ship="{Binding}"  x:Name="ShipControl"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate> 
```

ShipControl 背后的代码：

```
public object Ship 
    {
        get
        {
            return GetValue(ShipProperty);
        }
        set
        {
            SetValue(ShipProperty, value);
        }
    }

    //Used by xaml binding
    public static readonly DependencyProperty ShipProperty = DependencyProperty.Register("Ship", typeof(Ship), typeof(Ship), new PropertyMetadata(null, new PropertyChangedCallback(OnShipChanged)));

    private static void OnShipChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        //TODO: Set break point here

        return;
    } 
```

但是，在调试 Ship 时，值 DataBinding 的对象作为值传递，而不是 Ship（因此返回类型是 object 而不是 Ship）。这最终会导致 SetValue 出现异常。Ship-properties 上的其他绑定确实有效，所以我真的不知道。根据这个问题，上面应该工作：

[WPF 将当前项目从列表传递到用户控件](https://stackoverflow.com/questions/3106190/wpf-pass-current-item-from-list-to-usercontrol)

有关在数据绑定上引发异常的示例项目，请参见此处，因为传递的对象是 Binding 而不是数据对象。[http://dl.dropbox.com/u/33603251/TestBindingApp.zip](http://dl.dropbox.com/u/33603251/TestBindingApp.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:46:28.787

您需要将 a`x:Name="MyControl"`置于您的控件中，然后您的绑定将看起来像`Ship="{Binding ElementName=MyList, Path=CurrentItem}"`而不是只是`{Binding}`（这并不意味着太多 AFAIK）。您的控件需要公开该`CurrentItem`属性。

如果您不想明确命名您的控件，您可以尝试使用[相对源](https://stackoverflow.com/questions/84278/how-do-i-use-wpf-bindings-with-relativesource)，但我自己没有尝试，因此无法帮助您解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:21:24.057

您的 Dependency Property 格式不正确，因此 XAML 解析器不会这样对待它。

您需要将您的实例属性类型更改为 Ship，并将 DependencyProperty 所有者类型更改为 ShipControl。然后绑定将起作用（假设您绑定到船舶列表）。

```
public Ship Ship
{
    get { return (Ship)GetValue(ShipProperty); }
    set { SetValue(ShipProperty, value); }
}

public static readonly DependencyProperty ShipProperty =
    DependencyProperty.Register("Ship", typeof(Ship), typeof(ShipControl), new PropertyMetadata(null, new PropertyChangedCallback(OnShipChanged)));

private static void OnShipChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    //TODO: Set break point here

    return;
} 
```

# bash - Bash - 使用通配符重定向

> ID：15315664
> 
> 赞同：0
> 
> 时间：2013-03-09T20:38:29.303
> 
> 标签：bash

我正在测试使用通配符进行重定向。就像是：

```
./TEST* < ./INPUT* > OUTPUT 
```

有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:50:09.667

假设您有以下 5 个文件：`TEST1`、`TEST1`、`INPUT1`、`INPUT2`和`OUTPUT`. 命令行

```
./TEST* < ./INPUT* > OUTPUT 
```

将扩大到

```
./TEST1 ./TEST2 < ./INPUT1 ./INPUT2 > OUTPUT. 
```

换句话说，您将`./TEST1`使用 2 个参数 ( `./TEST2`, `./INPUT2`) 运行该命令，其输入重定向自`./INPUT1`，其输出重定向至`OUTPUT`。

要解决您可能尝试做的事情，您只能使用输入重定向指定单个文件。`TEST`要从这两个文件发送输入`INPUT*`，您需要使用类似以下的内容，使用进程替换：

```
./TEST1 < <(cat ./INPUT*) > OUTPUT 
```

* * *

`TEST*`要在所有匹配的输入文件上运行每个匹配的程序`INPUT*`，请使用以下循环。它收集所有命令的输出并将它们放入一个文件`OUTPUT`中。

```
for test in ./TEST*; do
    cat ./INPUT* | $test
done > OUTPUT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:04:03.510

> 有一个称为 TEST* 的程序必须将各种重定向到称为 INPUT*，但问题是有许多 TEST 程序，它们都有不同的编号，例如 TEST678。我正在尝试做的是将所有随机 INPUT 文件推送到所有所有 TEST 程序中。

你可以写：

```
for program in TEST*            # e.g., program == 'TEST678'
do
  suffix="${program#TEST}"      # e.g., suffix == '678'
  input="INPUT$suffix"          # e.g., input == 'INPUT678'
  "./$program" < "$input"       # e.g., run './TEST678 < INPUT678'
done > OUTPUT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:52:31.190

```
for test in ./TEST*; do
 for inp in ./INPUT*; do
   $test < $inp >> OUTPUT
 done
done 
```

# objective-c - Objective-C：什么是惰性类？

> ID：15315668
> 
> 赞同：10
> 
> 时间：2013-03-09T20:38:52.500
> 
> 标签：objective-c, lazy-evaluation, objective-c-runtime

查看 Objective-C 运行时库源代码，特别是在[objc-runtime-new.mm](http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-runtime-new.mm)中，我看到了一些函数，甚至是引用惰性和非惰性类的注释。似乎没有`+load`方法的类被称为惰性类，但我不确定这一点，而且很可能这是不对的。在 Google 上搜索后，我没有找到任何关于 Objective-C 上的惰性类的信息。

那么，什么是 Objective-C 中的惰性类呢？Obj-C 有这个功能吗？`+load`它与类的实现中方法的存在有关吗？在上面链接的文件中，运行时系统调用一个函数`_getObjc2NonlazyClassList`，以便从图像中获取非惰性类的列表。为什么没有一个`_getObjc2LazyClassList`功能呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T02:45:40.457

我找到了答案：这都是关于实现或不实现`+load`方法的类。

`"__DATA, __objc_classlist, regular, no_dead_strip"`在给定图像文件中实现的所有类在存储在二进制部分的列表中都有引用。此列表允许运行时系统跟踪存储在此类文件中的所有类。但是，并不是所有的类都需要在程序启动时实现。这就是为什么当一个类实现一个方法时，它在存储在该节`+load`中的列表中也有一个引用。`"__DATA, __objc_nlclslist, regular, no_dead_strip"`

因此，`_getObjc2NonlazyClassList`检索实现`+load`方法并且所谓的非惰性类的列表。`_getObjc2ClassList`检索图像文件中所有类的列表，包括没有`+load`方法的类（称为惰性类）和非惰性类。非惰性类必须在程序启动时实现。另一方面，惰性类不需要立即实现。例如，这可能会延迟到班级第一次收到消息（这就是他们被认为是“懒惰”的原因）。

顺便说一句，类别也是如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T23:56:11.707

“懒惰”用于两种不同的上下文。

第一个，当批评一个类的设计时，认为一个类是无效的——它没有做足够的事情来证明它的存在。人们也称这种类为“薄”。 **这可能不是你在这里的意思。**

其次，**惰性求值**和**惰性实例化**意味着类仅在实际需要时才执行评估属性或初始化自身的工作。

例如，假设我们有一个创建 Employee 对象的类。

```
 @implementation Employee
 - (id) initWithID: (IdentificationCode*) ident
 {
    self =[super init]
    if (self) {
         _records=[self retrieveEmployeeRecordsFor: ident];
         _identification=ident;
         }
    return self;
} 
```

这很好，但是从数据库中检索所有记录可能会很慢。有时我们不需要做这项工作。例如：

```
- (BOOL) isFounder
{
     if (indent.number<10) return YES;
     return NO;
} 
```

如果我们实例化一个 Employee 只是为了确定他们是否是 Founder，我们根本不需要查找他们的记录！

```
 .....
 if ([thisEmployee isFounder]) {
      [self sendCandyTo: thisEmployee.identification];
      } 
```

另一方面，有时我们需要它们：

```
- (NSArray*) payments
{
    return [self.records retrievePayStubs];
    } 
```

因此，如果我们构建一个 Employee 只是为了 call `isFounder`，我们就浪费了数据库查找。但是我们不能跳过它，因为`payments`需要它。

我们所做的是将数据库查找从构造函数中取出并将其放入`load`方法中。

```
- (void) load
{
    if (records) return;
    self.records=[self retrieveEmployeeRecordsFor: ident];
}

- (NSArray*) payments
{
    [self load];
    return [self.records retrievePayStubs];
    } 
```

现在，我们只在实际需要时才加载员工记录。如果它们已经被加载，我们不会做任何额外的工作（除了一个方法调用）。如果我们从不需要付款记录，那么我们根本不需要做这项工作。

该课程仅在必要时才起作用——并等到最后一分钟才开始工作。这是“懒惰”！

# php - 全局创建者，任何插入查询的时间跨度

> ID：15315669
> 
> 赞同：0
> 
> 时间：2013-03-09T20:38:55.763
> 
> 标签：php, mysql, codeigniter, codeigniter-2

有没有办法破解 codeigniter 以在默认情况下让它在执行任何插入/更新时将时间跨度和 user_id 插入表中的特定列？

我在数据库中有 8 个表，都包含 (update_time,updated_by)columns ，我想设置 codeigniter 活动记录，以便在发生更新/插入时自动填充`update_time=time() and update_by=$this->session->userdata('user')->id;`

同样在同一概念上，我想将删除操作破解为更新列（存档）= 1 而不是删除（因为我的 mysql 用户无论如何都没有删除记录访问权限）

可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:44:53.947

如果您想破解 CI 来完成此操作，您应该查看 system/drivers/DB_Active_rec.php（假设您使用 CI 中的活动记录功能）

例如，您可以通过修改该文件中的更新方法在更新中插入当前时间。改变这个：

```
public function update($table = '', $set = NULL, $where = NULL, $limit = NULL)
{
    // Combine any cached components with the current statements
    $this->_merge_cache();

    if ( ! is_null($set))
    {
        $this->set($set);
    }
            [...] 
```

进入：

```
public function update($table = '', $set = NULL, $where = NULL, $limit = NULL)
{
    // Combine any cached components with the current statements
    $this->_merge_cache();

    // start of Insert updated_time hack
    $time_format = 'Y-m-d H:i:s';
    $set['update_time'] = date($time_format);
    // end of hack

    if ( ! is_null($set))
    {
        $this->set($set);
    }
            [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:08:40.613

您可以使用[mysql 的现有功能在](http://dev.mysql.com/doc/refman/5.1/en/timestamp-initialization.html)`update_time`插入或更新记录时自动更新列。但是，更新`user_id`是您必须从应用程序手动执行的操作。

您的其他要求通常被某些人称为*软删除*，您可以通过在列上打开标志来将行标记为已删除。这是可能的，但您必须确保所有选择和更新查询都避免打开此标志的行。

最好仔细构建模型方法以符合应用程序的这两个要求。您也许可以使用[扩展 CI 的核心模型](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)来自定义更新/选择查询，所有扩展 MY_Model 的子类都将使用该查询。

# java - 实时读取 Runtime.getRuntime().exec()

> ID：15315670
> 
> 赞同：2
> 
> 时间：2013-03-09T20:39:03.000
> 
> 标签：java, android

该程序的问题是实时工作的。
例如： getevent
但是当我尝试读取来自进程的数据时，exec 给他们的部分至少 4096 字节！

例如：

*   如果 getevent 返回**1000 字节**的文本： **stdout.available () == 0**
*   如果 getevent 返回**4000 字节**的文本： **stdout.available () == 0**
*   如果 getevent 返回 4096 字节的文本： stdout.available () == 4096
*   如果 getevent 返回 8192 字节的文本： stdout.available () == 8192
*   如果 getevent 返回**10000 字节**的文本： **stdout.available () == 8192**

如果使用 stdout.read() 该函数将等到 4096*n 字节或直到 getevent 关闭。

如何读取实时到来的数据，而不是等到 4096 字节才会被拨出？

```
Process p = Runtime.getRuntime().exec(new String[]{"su", "-c", "system/bin/sh"});
DataOutputStream stdin = new DataOutputStream(p.getOutputStream());
stdin.writeBytes("getevent\n");
InputStream stdout = p.getInputStream();
byte[] buffer = new byte[1];
int read;
String out = new String();
while(true){
  read = stdout.read(buffer);
  out += new String(buffer, 0, read);
  System.out.println("MYLOG: "+(new String(buffer, 0, read)));
} 
```

我发现这在文档中有所改进！

> **将 InputStream 复制到 OutputStream 中，直到到达流的末尾。此方法使用 4096 kbyte 的缓冲区。**

**>>[文档](http://www.java2s.com/Code/Java/File-Input-Output/CopiestheInputStreamintotheOutputStreamuntiltheendofthestreamhasbeenreachedThismethodusesabufferof4096kbyte.htm)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:57:25.333

最可能的原因是外部应用程序正在缓冲其输出。这对于正在写入其“标准输出”的应用程序来说是非常典型的。解决方案是修改外部应用程序，使其在适当的时间“刷新”其输出。

如果有可供读取的数据，Java 代码中没有任何内容会导致延迟。特别是，使用 DataOutputStream 不会导致这种情况。

* * *

还应该指出的是`available()`，没有给出可靠的信息。如果您仔细阅读 API 文档，您会发现返回值`N`only 意味着同时尝试读取 N 个以上字节*可能会*阻塞。一个线程不能同时调用两者`available()`，`read()`所以当你开始使用它提供的信息时，`available()`它可能已经过时了。

# c# - 如何修改自定义 xml 节点

> ID：15315671
> 
> 赞同：0
> 
> 时间：2013-03-09T20:39:09.537
> 
> 标签：c#, xml

我有一个 xml 文件，它是由这样的块构建的：

```
<BasicOptions id="OwnCrypt">
    <Font>Angsana New</Font>
    <FontColor>Aquamarine</FontColor>
    <FontSize>12</FontSize>
    <FontStyle>Normál</FontStyle>
    <BackgroundImage>Cryptonite\System\Resources\Media\Pics\grumpy.jpg</BackgroundImage>
    <ImageResolution>1280 X 1024</ImageResolution>
    <FormSize>1280 X 1024</FormSize>
    <FormPosition>CenterParent</FormPosition>
    <Opacity>70</Opacity>
</BasicOptions> 
```

我在一个根元素（名为选项）中制作了六个这样的块。我对节点有一些问题 `<FormSize>`，因为从选项表单中它可以获得空值（这意味着我不会更改它的分辨率），然后我想将`<FormSize>`节点的值设置为表单的基本分辨率。这是更新程序按钮事件（如果有帮助的话）：

```
 private void button1_Click(object sender, EventArgs e)
        {
            boxes[0] = checkBox1;
            boxes[1] = checkBox2;
            boxes[2] = checkBox3;
            boxes[3] = checkBox4;
            boxes[4] = checkBox5;
            boxes[5] = checkBox6;
            ArrayList al = new ArrayList();
            ArrayList bl = new ArrayList();
            foreach (CheckBox cb in boxes)
            {
                if (cb.Checked)
                    al.Add(cb.Text);
            }
            if(comboBox1.Text=="")//Betűtípus
            {
                bl.Add("Times New Roman");
            }
            else
                bl.Add(comboBox1.Text);
            if (comboBox2.Text == "")//Betűszín
            {
                bl.Add("Fekete");
            }
            else
                bl.Add(comboBox2.Text);
            bl.Add(numericUpDown1.Value.ToString());//Betűméret
            if (comboBox3.Text == "")//Betűstílus
            {
                bl.Add("Normál");
            }
            else
                bl.Add(comboBox3.Text);
            if (comboBox4.Text == "")//háttérkép
            {
                bl.Add(@"Cryptonite\System\Resources\Media\Pics\grumpy.jpg");
            }
            else
                bl.Add(comboBox4.Text);
            if (comboBox5.Text == "")//háttérkép felbont
            {
                Xml.resRequest(al);
            }
            else
                bl.Add(comboBox5.Text);
            if (comboBox6.Text == "")//felbontás
            {
                Xml.resRequest(al);
            }
            else
                bl.Add(comboBox6.Text);
            if (comboBox7.Text == "")
            {
                bl.Add("WindowsDefault");
            }
            else
                bl.Add(comboBox7.Text);
            bl.Add(numericUpDown2.Value.ToString());
            Xml.Writer(al, bl);
            al.Clear();
            bl.Clear();
        } 
```

它有一个顺序来获取值并提供给 updater 方法，但是如果有人有更好的主意，那让我很高兴。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:00:45.847

我将使用 DTO 对象来存储值并使用内置的序列化程序之一来形成 xml。[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

DTO 类将具有可用于检测是否需要将值设置为默认值的属性。

```
public class Foo {
  private string _bar;
  public string Bar 
  {
    get { return String.IsNullOrEmpty(_bar) ? _bar = "default value" : _bar; }
    set { _bar = value; }
  } 
} 
```

与其填充 ArrayList，不如填充 DTO。

# pear - Codesniffer 的 include_path 错误

> ID：15315672
> 
> 赞同：9
> 
> 时间：2013-03-09T20:39:11.440
> 
> 标签：pear, codesniffer, xampp

这个问题之前已经解决过，我尝试过提供的解决方案，并认为我做错了什么。我正在尝试使用 Mountaion Lion 在 Mac 上配置 PHP Codesniffer。我认为这并不重要，但我使用 XAMMP。运行 phpcs 时出现以下错误。

```
Warning: include_once(PHP/CodeSniffer/CLI.php): failed to open stream: No such file or directory in /usr/bin/phpcs on line 31

Warning: include_once(): Failed opening 'PHP/CodeSniffer/CLI.php' for inclusion (include_path='.:') in /usr/bin/phpcs on line 31

Fatal error: Class 'PHP_CodeSniffer_CLI' not found in /usr/bin/phpcs on line 34 
```

这个错误，基于所有的搜索，是因为 php.ini 中的 include_path 不正确。据我了解，这条路径应该是梨所在的目录。当我运行 pear config-get php_dir 它返回 /usr/lib/php/pear 我预料到的。所以我修改了 php.ini 文件（这个文件是系统上唯一的 php.ini，所以它没有从另一个文件中获取设置）为：

```
include_path = ".:/usr/lib/php/pear/" 
```

这看起来不错，但我不断收到同样的错误。我已经删除了领先的 .: 但这没有帮助......而且它不应该工作。我还删除了尾随 / 和相同的结果。请注意，phpcs 位于 usr/bin 目录中。下面是运行 pear config-show 的结果

```
Configuration (channel pear.php.net):
=====================================
Auto-discover new Channels     auto_discover    1
Default Channel                default_channel  pear.php.net
HTTP Proxy Server Address      http_proxy       <not set>
PEAR server [DEPRECATED]       master_server    pear.php.net
Default Channel Mirror         preferred_mirror pear.php.net
Remote Configuration File      remote_config    <not set>
PEAR executables directory     bin_dir          /usr/bin
PEAR documentation directory   doc_dir          /usr/lib/php/pear/docs
PHP extension directory        ext_dir          /usr/lib/php/extensions/no-debug-non-zts-20090626
PEAR directory                 php_dir          /usr/lib/php/pear
PEAR Installer cache directory cache_dir        /private/tmp/pear/cache
PEAR configuration file        cfg_dir          /usr/lib/php/pear/cfg
directory
PEAR data directory            data_dir         /usr/lib/php/pear/data
PEAR Installer download        download_dir     /private/tmp/pear/download
directory
PHP CLI/CGI binary             php_bin          /usr/bin/php
php.ini location               php_ini          /private/etc/php.ini
--program-prefix passed to     php_prefix       <not set>
PHP's ./configure
--program-suffix passed to     php_suffix       <not set>
PHP's ./configure
PEAR Installer temp directory  temp_dir         /JimS/temp
PEAR test directory            test_dir         /usr/lib/php/pear/tests
PEAR www files directory       www_dir          /usr/lib/php/pear/www
Cache TimeToLive               cache_ttl        3600
Preferred Package State        preferred_state  stable
Unix file mask                 umask            22
Debug Log Level                verbose          1
PEAR password (for             password         <not set>
maintainers)
Signature Handling Program     sig_bin          /usr/local/bin/gpg
Signature Key Directory        sig_keydir       /private/etc/pearkeys
Signature Key Id               sig_keyid        <not set>
Package Signature Type         sig_type         gpg
PEAR username (for             username         <not set>
maintainers)
User Configuration File        Filename         /Users/JimS/.pearrc
System Configuration File      Filename         /private/etc/pear.conf 
```

有任何想法吗？我很容易出现拼写错误，所以这总是有可能的，所以我放在这里的所有东西都是剪切/粘贴的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-13T23:44:35.283

有一篇关于如何启动并运行它的优秀文章：

[http://viastudio.com/configure-php-codesniffer-for-mac-os-x/](http://viastudio.com/configure-php-codesniffer-for-mac-os-x/)

我按照简单的说明进行操作，并立即让它工作！

秘诀是使用以下命令修复包含路径：

```
sudo mkdir -p /Library/Server/Web/Config/php

sudo touch /Library/Server/Web/Config/php/local.ini

echo 'include_path = ".:'`pear config-get php_dir`'"' | sudo tee -a /Library/Server/Web/Config/php/local.ini 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-06T16:01:24.077

在 MacOS High Sierra 上，只需`10.3.2`2 个简单的步骤：

```
sudo cp /etc/php.ini.default /etc/php.ini
echo 'include_path = ".:'`pear config-get php_dir`'"' | sudo tee -a /etc/php.ini 
```

最后一行设置文件`include_path`末尾的`/etc/php.ini`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-23T01:32:01.583

macOS 10.15.5 上的工作解决方案。使用的 PHP 版本：7.3.19，使用自制软件安装。Pphcs 是使用 pear 安装的

```
sudo pear install PHP_CodeSniffer 
```

*   步骤 1\. 识别 php 版本和使用的 php.ini `php -i | grep ini`。输出将类似于下面给出的内容。注意价值`Loaded Configuration File`。对应的值`Loaded Configuration File`就是我们需要编辑的文件。

```
Loaded Configuration File => /usr/local/etc/php/7.3/php.ini
Scan this dir for additional .ini files => /usr/local/etc/php/7.3/conf.d
Additional .ini files parsed => /usr/local/etc/php/7.3/conf.d/ext-opcache.ini,
/usr/local/etc/php/7.3/conf.d/ext-xdebug.ini
user_ini.cache_ttl => 300 => 300
user_ini.filename => .user.ini => .user.ini
Supported handlers => ndbm cdb cdb_make inifile flatfile
init_command_executed_count => 0
init_command_failed_count => 0 
```

*   步骤 2\. 用 识别梨路径`pear config-get php_dir`。输出将是类似的路径`/usr/local/share/pear@7.3`。复制此路径。

*   步骤 3\. 打开步骤 1 中获得的配置文件，并在其中添加以下行 `include_path = "PATH OBTAINED IN STEP 2`。在这种情况下，`include_path = "/usr/local/share/pear@7.3"`

本质上，它的作用是在 php cli 加载时加载所有 Pear 文件。

# node.js - 使用 Node.js 管道传输多个文件流

> ID：15315674
> 
> 赞同：4
> 
> 时间：2013-03-09T20:39:14.747
> 
> 标签：node.js, stream

我想将多个文件一个接一个地流式传输到浏览器。举例来说，请考虑将多个 CSS 文件串联在一起交付。

我正在使用的代码是：

```
var directory = path.join(__dirname, 'css');
fs.readdir(directory, function (err, files) {
  async.eachSeries(files, function (file, callback) {
    if (!endsWith(file, '.css')) { return callback(); } // (1)

    var currentFile = path.join(directory, file);
    fs.stat(currentFile, function (err, stats) {
      if (stats.isDirectory()) { return callback(); } // (2)

      var stream = fs.createReadStream(currentFile).on('end', function () {
        callback(); // (3)
      });
      stream.pipe(res, { end: false }); // (4)
    });
  }, function () {
    res.end(); // (5)
  });
}); 
```

这个想法是我

1.  过滤掉所有没有文件扩展名的文件`.css`。
2.  过滤掉所有目录。
3.  完全读取文件后继续下一个文件。
4.  将每个文件通过管道传输到响应流而不关闭它。
5.  一旦所有文件都通过管道传输，就结束响应流。

问题是只有第一个`.css`文件被管道传输，并且所有剩余的文件都丢失了。就好像（3）会在第一个（4）之后直接跳转到（5）。

有趣的是，如果我将第 (4) 行替换为

```
stream.on('data', function (data) {
  console.log(data.toString('utf8'));
}); 
```

一切都按预期工作：我看到多个文件。如果我然后将此代码更改为

```
stream.on('data', function (data) {
  res.write(data.toString('utf8'));
}); 
```

所有文件都希望第一个再次丢失。

我究竟做错了什么？

PS：错误发生在使用 Node.js 0.8.7 以及使用 0.8.22 时。

**更新**

好的，如果您将代码更改如下：

```
var directory = path.join(__dirname, 'css');
fs.readdir(directory, function (err, files) {
  var concatenated = '';
  async.eachSeries(files, function (file, callback) {
    if (!endsWith(file, '.css')) { return callback(); }

    var currentFile = path.join(directory, file);
    fs.stat(currentFile, function (err, stats) {
      if (stats.isDirectory()) { return callback(); }

      var stream = fs.createReadStream(currentFile).on('end', function () {
        callback();
      }).on('data', function (data) { concatenated += data.toString('utf8'); });
    });
  }, function () {
    res.write(concatenated);
    res.end();
  });
}); 
```

但为什么？为什么我不能`res.write`多次调用而不是先总结所有块，然后一次将它们全部写入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-31T10:48:26.717

还可以考虑使用[multistream](https://www.npmjs.com/package/multistream)，它允许您一个接一个地组合和发出多个流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T21:42:26.397

代码非常好，是单元测试出错了......

修复了这个问题，现在它就像一个魅力:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T12:30:05.973

可以帮助别人：

```
const fs = require("fs");
const pth = require("path");

let readerStream1 = fs.createReadStream(pth.join(__dirname, "a.txt"));
let readerStream2 = fs.createReadStream(pth.join(__dirname, "b.txt"));
let writerStream = fs.createWriteStream(pth.join(__dirname, "c.txt"));

//only readable streams have "pipe" method
readerStream1.pipe(writerStream);
readerStream2.pipe(writerStream); 
```

我还检查了*Rocco 的*答案，它的作用就像一个魅力：

```
//npm i --save multistream

const multi = require('multistream');
const fs = require('fs');
const pth = require("path");

let streams = [
  fs.createReadStream(pth.join(__dirname, "a.txt")),
  fs.createReadStream(pth.join(__dirname, "b.txt"))
];
let writerStream = fs.createWriteStream(pth.join(__dirname, "c.txt"));

//new multi(streams).pipe(process.stdout);
new multi(streams).pipe(writerStream); 
```

并将结果发送给客户端：

```
const multi = require('multistream');
const fs = require('fs');
const pth = require("path");
const exp = require("express");
const app = exp();
app.listen(3000);

app.get("/stream", (q, r) => {
  new multi([
    fs.createReadStream(pth.join(__dirname, "a.txt")),
    fs.createReadStream(pth.join(__dirname, "b.txt"))
  ]).pipe(r);
}); 
```

# html - 是否可以以编程方式获取网页的生成源？

> ID：15315680
> 
> 赞同：2
> 
> 时间：2013-03-09T20:39:43.513
> 
> 标签：html, dom

正如标题所述，我想知道是否有一种方法可以获取页面生成的 HTML 代码。显然，我可以使用 Web 开发人员工具（内置浏览器或外部程序）检查页面并获取它，但我真的很想自动完成。也许使用 Fiddler 的 API 是可能的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T06:23:35.173

“源”在页面加载后不会被 JavaScript 更改，而是*从*源生成的文档对象模型 (DOM) 被更改。然后将这个 DOM 转换为 GUI，只要页面没有重新加载，每次更改都会更改。

DOM 不是一串 HTML 代码，它是页面的内存分层对象表示。浏览器不会在 DOM 被更改时维护其最新的平面文件表示，这就是为什么当您“查看源代码”时，您只会看到最初通过 HTTP 发送到浏览器的内容。

在 Firebug 等开发人员工具中，页面/DOM 的节点对节点表示是最接近重新生成源代码 (AFAIK) 的方式，而无需自己构建一些新工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:43:04.660

您也许可以在 Python 中编写一个脚本，该脚本将接受一个变量（URL）并将其插入到下载网页的命令之后，例如 wget。

谷歌搜索，我发现它可以解析 HTML 文件：也许你可以 wget index.HTML 并使用其中之一： [你如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml)

# ruby - Ruby 中的类型转换

> ID：15315681
> 
> 赞同：1
> 
> 时间：2013-03-09T20:39:51.467
> 
> 标签：ruby

Ruby 是强类型语言。因此它执行`type conversion`而不是`type casting`。现在有两种类型的转换 -`implicit`和`explicit`.

ruby 根据什么规则确定在什么上下文中应用哪种转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:52:38.667

Ruby is "duck typed", neither strong or weak typed, which means the behavior of a variable/object does not necessarily depend on the class it belongs to, but rather very "blind" and do method call at runtime without type check. If it cannot do that, it raises error.

Ruby does implicit conversion for Integer, String and some other internal classes. Whether to perform a conversion depends on the left operand. For example,

```
1 + "2" 
```

The left operand is an integer, so ruby tries to do a math operation +. But the right operand is a string, so ruby will try to do a conversion (coersion) from string to integer. (Although it still failed. To make it work, one need to redefine the method + for Integer or we call monkey patch to do an explicit conversion using String#to_i)

# javascript - 调用“apply()”时 JavaScript 设置动态/自定义类名

> ID：15315682
> 
> 赞同：0
> 
> 时间：2013-03-09T20:40:10.367
> 
> 标签：javascript

继[使用 .apply() with 'new' 运算符。这可能吗？](https://stackoverflow.com/questions/1606797/use-of-apply-with-new-operator-is-this-possible) ，我希望能够在使用此方法新建类时为其设置自定义名称。在我遵循这个方法和`console.log`返回的类的那一刻，它只是以'F'的名称或任何'F'`prototype`的名称出现。

我希望能够将其更改为我可以设置的内容，最好是我想要的类的名称`new`；这可能吗？

# c# - 移动矩形没有根据给定的坐标移动

> ID：15315683
> 
> 赞同：0
> 
> 时间：2013-03-09T20:40:13.497
> 
> 标签：c#, winforms

我有一个以图片为背景的图片框（实际上是一张地图），并且在其上生成矩形。这些矩形应该移动给定的点。矩形以指定的速度移动，在到达（或接近）其中一个点后，它开始移动到下一个点。然而我的问题是，矩形并没有直接移动到给定点，它只是继续接近其中一个坐标，所以在某些情况下，矩形的 Y 坐标和点的 Y 坐标是一样，但矩形是 60 像素，不会移动。下面我添加一张图片作为运动的例子。蓝色是预期路线，红色是实际路线。我已经检查了一百次坐标，它们是正确的，矩形只是在其他地方移动。笔记：

![在此处输入图像描述](../Images/aa431d28d25cc0be7f79cf9835e014fe.png)

这是我用来计算矩形相对于 X 轴和 Y 轴的移动的代码。

```
public void Move_calculate(Graphics g)
    {
        if (points[passed].X == 0 || points[passed].Y == 0) // this happens when the rectangle reaches it final point - it stays where it is (working fine)
        {
            Redraw(g);
            return;
        }
        speed = randomNumbers.Next(7, 13);
        if (points[passed].X > x_coordinate && points[passed].Y > y_coordinate)
        {
            Bx = points[passed].X;
            By = points[passed].Y;
            distanceForAlfaX = Bx - x_coordinate; // x_coordinate is the x coordinate of the rectangle
            distanceForAlfaY = By - y_coordinate;
            if (distanceForAlfaX <= 20 || distanceForAlfaY <= 20) speed = 5; // slowing down when approaching the point
            if (distanceForAlfaX + distanceForAlfaY <= 15) passed += 1;
            alpha = (distanceForAlfaY / distanceForAlfaX); // tangent alpha
            x_change = (int)(speed * (Math.Cos(alpha))); // get distance moved relative to axis X
            y_change = (int)Math.Sqrt(((speed * speed) + (x_change * x_change))); // again distance for axis Y, using Pythagoras theorem
            x_coordinate += x_change;
            y_coordinate += y_change;
        }
        else if (points[passed].X > x_coordinate && points[passed].Y < y_coordinate)
        {
            Bx = points[passed].X;
            By = points[passed].Y;
            distanceForAlfaX = Bx - x_coordinate;
            distanceForAlfaY = y_coordinate - By;
            if (distanceForAlfaX <= 20 || distanceForAlfaY <= 20) speed = 5;
            if (distanceForAlfaX + distanceForAlfaY <= 15) passed += 1;
            alpha = (distanceForAlfaY / distanceForAlfaX);
            x_change = (int)(speed * (Math.Cos(alpha)));
            y_change = (int)Math.Sqrt(((speed * speed) + (x_change * x_change)));
            x_coordinate += x_change;
            y_coordinate -= y_change;
        }
        else if (points[passed].X < x_coordinate && points[passed].Y > y_coordinate)
        {
            Bx = points[passed].X;
            By = points[passed].Y;
            distanceForAlfaX = x_coordinate - Bx;
            distanceForAlfaY = By - y_coordinate;
            if (distanceForAlfaX <= 20 || distanceForAlfaY <= 20) speed = 5;
            if (distanceForAlfaX+distanceForAlfaY <= 15) passed += 1;
            alpha = (distanceForAlfaY / distanceForAlfaX);
            x_change = (int)(speed * (Math.Cos(alpha)));
            y_change = (int)Math.Sqrt(((speed * speed) + (x_change * x_change)));
            x_coordinate -= x_change;
            y_coordinate += y_change;
        }
        else if (points[passed].X < x_coordinate && points[passed].Y < y_coordinate)
        {
            Bx = points[passed].X;
            By = points[passed].Y;
            distanceForAlfaX = x_coordinate - Bx;
            distanceForAlfaY = y_coordinate - By;
            if (distanceForAlfaX <= 20 || distanceForAlfaY <= 20) speed = 5;
            if (distanceForAlfaX + distanceForAlfaY <= 15) passed += 1;
            alpha = (distanceForAlfaY / distanceForAlfaX);
            x_change = (int)(speed * (Math.Cos(alpha)));
            y_change = (int)Math.Sqrt(((speed * speed) + (x_change * x_change)));
            x_coordinate -= x_change;
            y_coordinate -= y_change;
        }
        else
        {
            MessageBox.Show("Something went wrong"); // just notify me that it isnt working again..
        }
        Pen p = new Pen(Color.Turquoise, 2);
        r = new Rectangle(x_coordinate, y_coordinate, 5, 5); // redraw the rectangle
        g.DrawRectangle(p, r);
        p.Dispose();
    } 
```

我不知道为什么会这样，有人可以帮忙吗？PS 运动绝对不需要平滑，矩形的位置将使用 Timer 每两秒更新一次。现在它暂时设置为一个按钮。

编辑：这是 foreach 代码。标签只是 PictureBox 旁边显示的坐标

```
 foreach (aircraft acft in aircrafts) // aircraft is an array aircrafts[]
                {
                        label2.Text = "xp" + acft.points[acft.passed].X;
                        label3.Text = "yp" + acft.points[acft.passed].Y;
                        label4.Text = acft.passed.ToString();
                        label5.Text = "y" + acft.y_coordinate.ToString();
                        //MessageBox.Show(acft.points[0].X.ToString());
                        acft.Move_calculate(e.Graphics);
                        spawn = string.Empty;
                    } 
```

EDIT2：`aircraft`类中的所有变量

```
 public string callsign;
    public int speed;
    public double heading;
    public bool moving = false;
    public Point[] points;
    public double alpha;
    public int x_change;
    public int y_change;
    public int x_coordinate;
    public int y_coordinate;
    public int Bx;
    public int By;
    public double distanceForAlfaX;
    public double distanceForAlfaY;
    public int passed = 0;
    public Rectangle r; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:26:28.937

你检查过你的坐标系吗？（[https://web.archive.org/web/20140710074441/http://bobpowell.net/coordinatesystems.aspx](https://web.archive.org/web/20140710074441/http://bobpowell.net/coordinatesystems.aspx)）

抱歉，您的问题的链接错误。尝试使用 Control.PointToClient 进行调试，以确保所有坐标都在客户端空间中表示。（[https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.pointtoclient](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.pointtoclient)）

你可以试试：

```
 Point cPoint = this.PointToClient(new Point(x_coordinate, y_coordinate));
    Size cSize = new Size(5,5);
    r = new Rectangle(cPoint, cSize); // redraw the rectangle
    g.DrawRectangle(p, r); 
```

您能否发布变量的数据类型以澄清您的代码？您可能会在某处失去精度，尤其是在使用整数除法时。

（DJ KRAZE 的注意事项，a -= b；在 C# 中也可以表示 a = a - b；上下文很重要。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:59:05.103

我想，有一个数学错误

```
y_change = (int)Math.Sqrt(((speed * speed) + (x_change * x_change))); 
```

而且...

```
// again distance for axis Y, using Pythagoras theorem 
```

让Mr.Pythagoras成为，我宁愿使用与X轴相同的

```
y_change = (int)(speed * (Math.Sin(alpha))); 
```

# r - 如何从函数中获取输出？

> ID：15315688
> 
> 赞同：0
> 
> 时间：2013-03-09T20:40:56.920
> 
> 标签：r, function, return-value

我将代码添加`list(Root = xnew, Value = f(xnew), Iterations=i)`到以下函数的末尾以将 Root、Value 和 Iterations 全部打印出来，但我只得到一个值，即`xnew`. 我该如何纠正这个问题？

```
fixedpoint <- function(fun, x0, tol=1e-08, max.iter=40){
    xold <- x0
    xnew <- fun(xold)
    for (i in 1:max.iter) {
    xold <- xnew
    xnew <- f(xold)
    if ( abs((xnew-xold)) < tol )
        return(xnew)
    }
    stop("max iterations = 20")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-17T21:05:14.490

答案转到 N8TRO。

您应该将`fixedpoint`返回值连接到`list`. 请看下图：

```
fixedpoint <- function(fun, x0, tol = 1e-08, max.iter = 40) {
  xold <- x0
  xnew <- fun(xold)
  for (i in 1:max.iter) {
    xold <- xnew
    xnew <- f(xold)
    if (abs(xnew-xold) < tol) {
        return(list(Root = xnew, Value = f(xnew), Iterations = i))
  }
  stop("max iterations = 20")
} 
```

# android - 以桌面模式打开浏览器

> ID：15315690
> 
> 赞同：2
> 
> 时间：2013-03-09T20:40:59.697
> 
> 标签：android, android-intent

有没有办法设置在桌面模式下打开浏览器的意图？
我通过以下方式创建我的意图：

```
Intent browserIntent = new Intent("android.intent.action.VIEW", Uri.parse(url));
context.startActivity(browserIntent); 
```

是否可以将参数添加到意图或 url 以在桌面模式下打开 url（假设所选浏览器支持桌面模式）？

# c - 如何使用 C 联合将多个命名变量和另一个更大的命名变量等同起来？

> ID：15315693
> 
> 赞同：2
> 
> 时间：2013-03-09T20:41:06.380
> 
> 标签：c, vector, struct, sse, unions

假设我有一个结构

```
struct vector_struct {
    float x;
    float y;
    float z;
} vector; 
```

我希望能够解决`vector.x`上面代码允许我做的 x、y 和 z 值等问题。但是，为了以显式方式促进使用 SSE SIMD 指令的快速算术，我想做以下事情：

```
union vector_union {
    struct vector_struct float_values;
    __m128d packed_values;
} vector; 
```

现在，如果我想对向量执行 SIMD 指令，我可以将`vector.packed_values`其用作各种 SIMD 指令（如乘法）的参数。但是，这看起来很丑陋，好像我想要 的值`x`，我将不得不写

```
foo = vector.float_values.x 
```

而不仅仅是

```
foo = vector.x 
```

那么，我的问题是，是否有任何方法可以将*多个命名变量*与另一个*命名变量*`union`关联起来。就像是

 **```
union vector_union {
    float values[3];
    __m128d packed_values;
} vector; 
```

除了 where`vector.values[0]`可以被称为`vector.x`,`vector.values[1]`可以被称为`vector.y`, 等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:21:46.550

从 C2011 开始，您可以在联合中使用匿名结构成员，

```
union vector_union {
    struct {
        float x, y, z;
    };
    __m128d packed;
} vector; 
```

然后您可以使用`vector.x`etc. 访问组件，并`vector.packed_values`使用 SSE 指令。但是请注意，该标准不保证该`struct`成员已打包。（但通常，编译器会打包它。）

如果编译器不支持 C2011，它可能会提供匿名结构作为扩展。**

# javascript - 在 isPlainObject 函数中，宿主对象是否应该算作普通对象？

> ID：15315694
> 
> 赞同：0
> 
> 时间：2013-03-09T20:41:21.147
> 
> 标签：javascript, jquery, javascript-objects, lodash

我一直在对不同浏览器上不同库的 isPlainObject 函数进行一些测试。

有 4 个不同的（代码方面的）isPlainObject 函数正在广泛的对象上进行测试：

*   jQuery
*   罗达什
*   实用程序（我正在研究的一个库）
*   替代方案，在下面的评论中建议

以上所有四个都显示了 Chrome v23.0.1271.95 到 Chrome v25.0.1364.160、FireFox v 19.0 和 Opera v12.14 的差异，但实用程序至少在所有浏览器上对这些对象给出了相同的 false 响应

在 Chrome 上运行时[对 jsfiddle 的测试](http://jsfiddle.net/Xotic750/ytkrV/10/)

```
Failed to agree: JSON - jquery: true - utility: false - lodash: true - alt: false
Failed to agree: Math - jquery: true - utility: false - lodash: true - alt: false
Failed to agree: top - jquery: false - utility: false - lodash: true - alt: true
Failed to agree: parent - jquery: false - utility: false - lodash: true - alt: true 
```

*   true 是例程认为对象是普通的，而 false 不是普通的

**编辑：**我相信所有的例程都使用以下类似的*标准*：

**jquery states**
***检查对象是否为普通对象（使用“{}”或“new Object”创建）。***

**lodash states**
***检查给定值是否是由 Object 构造函数创建的对象。***

我知道宿主对象与使用“{}”或“新对象”构造的对象不同，所以我想我的问题是：宿主对象应该算作普通对象吗？

目前，实用程序是一致的并且说它们不是，其他例程为不同浏览器上的主机对象给出不同的结果。

**编辑：**结果的准确性对我来说是最重要的因素，性能是次要的考虑因素。

[jsperf](http://jsperf.com/jquery-vs-utility-isplainobject/11)上提供了 3 个库的性能结果和建议的替代方案

**编辑：**这是实用程序库函数，因此您无需搜索代码。

```
defineProperty(utility, "isPlainObject", {
    value: (function () {
        var o = {};

        return function (obj) {
            try {
                return utility.isObject(obj) && getPrototypeOf(obj).isPrototypeOf(o);
            } catch (e) {
                return false;
            }
        };
    }())
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:52:57.467

> 在 FireFox v 19.0 和 Opera v12.14 上执行时，上述所有三个都通过了测试

不，至少在 Opera 中，小提琴中的测试失败了`window.screen`, `Math`, `JSON`, `DOMError`, `LSParserFilter`, `DOMImplementationLS`, `window.opera`, `SVGException`, 和`document.implementation`.

> 这是 Chrome/Chromium 中的错误吗？

什么？不同的函数返回不同的结果？不。

> 对于四个对象中的每一个，正确的结果应该是什么（以便我可以确定哪个函数最准确）？

你如何定义“正确”？您如何定义“普通对象”？

> 我相信所有 3 个例程都使用以下标准：
> 
> > *检查对象是否为普通对象（使用“{}”或“new Object”创建）。*

这几乎不是一个有用的标准，因为您遇到差异的那些对象不是“创建”的——它们是恰好存在的宿主对象（甚至是本机对象）。

然而，我们可以比较这些函数使用的标准：

*   **jQuery**很奇怪；你可以[在 github 阅读它的源代码](https://github.com/jquery/jquery/blob/master/src/core.js#L424)。简而言之：一个对象或函数，其 [[Class]] 不是 之一`Boolean Number String Function Array Date RegExp Error`，不具有真实`nodeName`属性，不具有`window`指向自身的属性，并且没有`constructor`属性或其`prototype`属性`constructor`具有自己的`isPrototypeOf`属性。

    他们似乎这样做是为了支持跨浏览器，但正如您所见，它在某些情况下会失败，因为您希望它不是一个普通的对象。

*   **实用程序**有点混淆，但检查本身很简单：一个对象，其 [[Class]] 是`Object`并且其原型是`Object.prototype`（或者更确切地说，其原型具有`isPrototypeOf`产生`true`for的方法`{}`）。

*   **Lodash**有一些奇怪的东西，比如 jQuery，但并不难——你可以[在 github 上阅读源代码](https://github.com/bestiejs/lodash/blob/master/lodash.js#L1851)。它首先检查对象类型而不是 null，然后从方法中获取`Object.prototype`via （如果存在）。如果它找到一个，则该对象或其原​​型必须是该对象，并且它不能是一个对象。如果它没有找到一个，它会退回到我不会在这里解释的[垫片。](https://github.com/bestiejs/lodash/blob/master/lodash.js#L1006)`getPrototypeOf(getPrototypeOf(…))``valueOf``Object.prototype``Arguments`

    所有这些都是为了支持检测来自不同环境（例如 iframe）的普通对象和不同的`Object.prototype`对象，以及在不提供`getPrototypeOf`方法的浏览器中。

*   “**替代**”实现：这将测试对象的原型要么`null`（但明确排除`Object.prototype`）要么是`Object.prototype`，并且 [[Class]] 值是`Object`。

> 主机对象应该算作普通对象吗？

也许。这始终取决于您的用例……</p>

*   表现得好像它是由`new Object`

    那么`getPrototypeOf(obj) == Object.prototype`应该没问题（如果您不需要支持跨框架对象）。`Math`和对象将`JSON`满足此要求。

*   在原型上没有干扰的可枚举属性

    然后，您可能还允许`getPrototypeOf(obj) == null`甚至手动检查 lodash 那样的可枚举属性。例如，这现在将包括`Object.prototype`为“普通对象”。

*   可创建者`new Object`

    然后还添加检查 [[Class]] 以`Object`排除本机对象，例如`JSON`, `Math`，`Arguments`以及所有具有特定于实现类的宿主对象。你真的希望那些在 test 的函数中通过，`isPlainObject`如果它们通过了其他测试，它们会造成严重破坏吗？

另请参阅[*说什么？*在 niftysnippets.org](http://blog.niftysnippets.org/2010/09/say-what.html)（TJCrowder 的博客）

# java - 带有 CXF 的 REST：两次调用 POST 方法

> ID：15315702
> 
> 赞同：0
> 
> 时间：2013-03-09T20:41:46.883
> 
> 标签：java, spring, rest, cxf

我使用 REST 调用创建了一个 WebService。

GET 和 DELETE 调用都可以。现在，当我发布资源时，Java 方法总是被调用两次！当我 PUT 一个资源时，POST 方法会在 PUT 之后自动调用。

我不知道如何解决此问题以下是代码文档：

首先，Spring DAO XML：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.asefa.club.model" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="database" value="MYSQL" />
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5InnoDBDialect" />
        </bean>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost/asefa-core_club" />
    <property name="username" value="root" />
    <property name="password" value="" />
</bean>

<bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven transaction-manager="txManager" />

<context:annotation-config />

<bean id="clubDao" class="com.asefa.club.dao._impl.ClubDao" /> 
```

实体 Java 类

```
@Entity
@NamedQueries({
@NamedQuery(name = "Club.getByName", query = "select c from Club c where c.nameShort = :name")})
public class Club implements Serializable {

@Id
@GeneratedValue
private long id;

private String name;
private String nameShort;
private String nameInitials;
private Date dateCreation;

@Lob
private byte[] picture;

@OneToOne
@JsonManagedReference
private Stadium stadium;

@OneToOne
@JsonManagedReference
private President president;

@OneToMany(mappedBy = "club", cascade = CascadeType.ALL)
@JsonManagedReference
private List<Team> teams;

@OneToMany(mappedBy = "club", cascade = CascadeType.ALL)
@JsonManagedReference
private List<Player> players;

@OneToMany(mappedBy = "club", cascade = CascadeType.ALL)
@JsonManagedReference
private List<Staff> staffs;

@OneToMany(mappedBy = "club", cascade = CascadeType.ALL)
@JsonManagedReference
private List<Trainer> trainers;

    // setters and getters
} 
```

DAO Java 类

```
public class ClubDao implements IClubDao {

@PersistenceContext
EntityManager entityManager;

public void createClub(Club club) {
    entityManager.persist(club);
}

public void updateClub(Club club) {
    entityManager.merge(club);
}

public void deleteClub(Club club) {
    Club c = getClub(club.getId());
    entityManager.remove(c);
}

public Club getClub(Long id) {
    return entityManager.find(Club.class, id);
}

@SuppressWarnings("unchecked")
public Club getClubByName(String name) {
    List<Club> clubs = entityManager.createNamedQuery("Club.getByName")
            .setParameter("name", name).getResultList();
    Club club = null;
    if (!clubs.isEmpty()) {
        club = clubs.get(0);
    }
    return club;
} 
```

业务 Java 类

```
@Transactional
public class ClubBo implements IClubBo {

private IClubDao clubDao;

public IClubDao getClubDao() {
    return clubDao;
}

@Autowired
public void setClubDao(IClubDao clubDao) {
    this.clubDao = clubDao;
}

public void postClub(Club club) throws ClubException {
    Club existingClub = getClubByName(club.getName());
    if (existingClub == null) {
        clubDao.createClub(club);
    } else {
        throw new ClubException("Club already exist", 1011);
    }
}

public void putClub(Club club) throws ClubException {
    Club existingClub = getClub(club.getId());
    if (existingClub != null) {
        clubDao.updateClub(club);
    } else {
        throw new ClubException("Club does not exist", 1012);
    }
}

public void deleteClub(Club club) throws ClubException {
    Club existingClub = getClub(club.getId());
    if (existingClub != null) {
        clubDao.deleteClub(club);
    } else {
        throw new ClubException("Club does not exist", 1012);
    }
}

public Club getClub(Long id) {
    return clubDao.getClub(id);
}

public Club getClubByName(String name) {
    return clubDao.getClubByName(name);
}
 } 
```

最后是使用 CXF 的 REST 服务（仅使用的方法）

```
@GET
@Path("/club/{clubName}")
@Produces(MediaType.APPLICATION_JSON)
public Club getClub(@PathParam("clubName") String clubName) {
    return coreClubApplication.getClub(clubName);
}

@POST
@Path("/club/{clubName}")
@Consumes(MediaType.APPLICATION_JSON)
public void createClub(@PathParam("clubName") String clubName,
        ClubJsonData clubJsonData) throws ClubException {
    Club club = new Club();
    club.setName(clubJsonData.getName());
    club.setNameShort(clubName);
    club.setNameInitials(clubJsonData.getNameInitials());
    club.setDateCreation(clubJsonData.getDateCreation());

    coreClubApplication.createClub(club);
}

@PUT
@Path("/club/{clubName}")
@Consumes(MediaType.APPLICATION_JSON)
public void updateClub(@PathParam("clubName") String clubName,
        ClubJsonData clubJsonData) throws ClubException {
    Club club = getClub(clubName);
    club.setName(clubJsonData.getName());
    club.setNameInitials(clubJsonData.getNameInitials());
    club.setDateCreation(clubJsonData.getDateCreation());

    coreClubApplication.updateClub(club);
}

@DELETE
@Path("/club/{clubName}")
public void deleteClub(@PathParam("clubName") String clubName)
        throws ClubException {
    Club club = getClub(clubName);
    coreClubApplication.deleteClub(club);
} 
```

因此，当使用 SoapUI 测试 REST URI 时，我想发布一个资源（新俱乐部）并且方法 createClub 被调用了两次！当我想修改它时，在 PUT 之后自动调用 POST 方法。

任何想法 ？

谢谢 ：）

# android - Android 电池温度正确数据

> ID：15315704
> 
> 赞同：2
> 
> 时间：2013-03-09T20:41:56.787
> 
> 标签：android

```
intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, 0); 
```

我有这个代码，返回：285、292、300 等

这个神奇的数字是什么？它如何转换为摄氏度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T20:51:45.047

`voltage`- int，当前电池电压，以毫伏为单位

`temperature`- int，当前电池温度，十分之一摄氏度

[这是源文件](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/services/core/java/com/android/server/BatteryService.java;l=106)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T20:50:51.053

您必须将其除以 10，这意味着 285 将是 28.5 °C、292 -> 29.2 °C 和 300 -> 30.0 °C

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T20:51:12.317

值为 28.5 、 29.2 和 30.0 摄氏度

价值 = 价值/10

[SDK 中的 Android 电池](https://stackoverflow.com/questions/1805895/android-battery-in-sdk)

# javascript - 解析不一致的数据

> ID：15315707
> 
> 赞同：2
> 
> 时间：2013-03-09T20:42:08.613
> 
> 标签：javascript, regex, node.js, parsing

数据应该是这样的：

```
Some junk data
More junk data 

1\. fairly long key, all on one line
value: some other text with spaces and stuff

2\. hey look! another long key. still on one line
value: a different value with some different information 
```

每个文件有几个，通常在二十到三十之间。键值对的总数超过 20,000，这意味着手动更正每个文件是不可选择的。每个键前面的数字应该正确增加。值和以下键之间应该有一个换行符。每个值都应以字符串“value:”开头

现在，我逐行将每一行分类为键、值或垃圾。然后我从键中解析出数字并将数字、键和值存储在一个对象中。

当数据格式不正确时会出现问题。以下是我迄今为止遇到的一些问题：

*   键和值之间没有换行符。
*   键或值中间出现意外换行，导致程序将每个键或值的一部分视为垃圾数据。
*   “价值”一词拼写错误。

我通过计算每行前六个字符与主字符串“value:”之间的 Levenstein 距离来处理第三种情况。如何解决其他两个问题？

如果重要的话，解析是在 node.js 服务器上进行的，但是如果他们可以更轻松地处理这些不一致的数据，我愿意接受其他语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:41:41.683

看看这个：

正则表达式：`^(\d+)\. ?(.+?)(?:value|vlaue|balue|valie): ?(.+?)[\n\r]{2,}` 在这里解释演示：[http ://regex101.com/r/gG0wH8](http://regex101.com/r/gG0wH8)

如果您修复了“拼写错误的值”问题，您可以将其简化为：否则在该 RegEx 部分中
`^(\d+)\. ?(.+?)value: ?(.+?)[\n\r]{2,}`添加尽可能多的拼写错误。`|`

为此，我迷上了：

*   行必须以数字和带有可选空格的点开头
*   `key``id`是之后和之前的一切`value`
*   `value`在至少 2 个换行符后结束

您还应该删除正确的条目，然后重新检查文件以检查是否缺少其他任何内容。

# javascript - 向资产添加参数？

> ID：15315708
> 
> 赞同：3
> 
> 时间：2013-03-09T20:42:10.650
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, sprockets

在 Rails 应用程序中，我想为包含查询参数的 javascript 文件生成 html 标记。目前，该应用程序使用 Sprockets 库来完成此类任务。

在 assets/javascript 目录中有：

```
jquery.fbbox.js
all.js 
```

all.js 包含`//= require ./jquery.fbbox.js`并使用 Sprockets 处理以生成 html 标签

```
<script src="/assets/jquery.fbbox.js" type="text/javascript"></script> 
```

我想传递一些额外的参数，比如*ver=3.0.4*来获取

```
<script src="/assets/jquery.fbbox.js?ver=3.0.4" type="text/javascript"></script> 
```

我怎样才能指挥 sprockets 为我做这件事？我试图向 require like 添加一个参数，`//= require ./jquery.fbbox.js, :ver => '3.0.4'`但由于语法错误而失败。

任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T00:43:40.637

您可以使用文件名中的版本号保存要导入的库的单独版本，然后在清单中使用单独的导入语句为它们提供服务，如下所示：

`//= require ./jquery.fbbox-3.0.4.js`

或在 layouts/application.html.erb

`<script src="/assets/jquery.fbbox-<%= fbbox_version_number %>.js" type="text/javascript"></script>`

有很多方法可以处理这个

# javascript - raphael + mapSvg 淡出

> ID：15315711
> 
> 赞同：1
> 
> 时间：2013-03-09T20:42:19.963
> 
> 标签：javascript, svg, raphael

我需要一些帮助，我在这段代码中使用[mapSVG](http://map.karaliki.ru/index.html)来创建我的国家的地图，其中每个地区都有自己的*路径*，有自己的*id*，所以这就是我想要的：

当我点击一个区域时，我需要它与整个国家的地图一起淡出（1000 ms），然后我需要延迟例如500ms，之后只有我点击的区域淡入（1000小姐）。

我需要这个分别为每个地区工作。

```
<div id="italy" style="margin-left:135px;margin-right:135px;">
            <!-- Here comes map code-->
            <script type="text/javascript">
            $('#italy').mapSvg({
                source: 'maps/italy.svg',
                colors: {
                        base: "#E1F1F1",
                        stroke: "#646464",
                        hover: "#548eac",
                        selected: "#548eac",
                        disabled: "#ffffff",
                    },
                tooltipsMode: 'custom',   
                popover : {width: 300, height: 300},
                cursor: 'pointer',
                zoom: false,
                pan: false,
                responsive: true,
                width: 900,
                height: 600,
                responsive: true,  
                zoomButtons: {'show': false, 
                },
                regions : {
                  'Sicilia'  : {tooltip: 'This is Sicilia'},
                },
                onClick : function(e,m){
                this.animate({opacity: 0}, 1000 );
                }
            });
            </script>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:38:23.320

我是 mapSVG 的开发人员 :) 试试这个：

```
onClick: function (e, m) {
    var rmap = m.getData().RMap;
    var region = this;
    var fadeBack = function () {region.animate({opacity: 1}, 500);};
    rmap.animate({opacity: 0}, 500, fadeBack);
} 
```

# mysql - 查找半径内的点

> ID：15315712
> 
> 赞同：1
> 
> 时间：2013-03-09T20:42:21.297
> 
> 标签：mysql

我正在查找欧几里得公式和Haversine 公式，但我仍然不确定最好的方法是什么。

我有一张这样的桌子：

```
CREATE TABLE antenna (
id INTEGER NOT NULL auto_increment,
x INTEGER,
y INTEGER,
z INTEGER,
PRIMARY KEY('id')
); 
```

我正在尝试为 Minecraft 游戏制作一个插件，它有一个平坦的世界，而不是像地球这样的球体。每个 x,y,z 代表一个块。而且我不是在寻找英里或公里范围内的点；我正在搜索一定距离内的点（例如 500 个街区）。所以我不确定我是否可以使用 Haversine？

# java - 如何在android中打开两个摄像头

> ID：15315716
> 
> 赞同：0
> 
> 时间：2013-03-09T20:42:59.217
> 
> 标签：java, android, multithreading

我有这个代码

 `````
package com.example.camera_test;

import android.app.Activity;
import android.hardware.Camera;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.FrameLayout;

public class MainActivity extends Activity {

    private Camera mCamera;
    private CameraPreview mPreview;
    private CameraPreview mPreview2;
    private String TAG = "Camera Test Application";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);

        Camera mCamera2 = openFrontFacingCameraGingerbread();

        mPreview2 = new CameraPreview(this, mCamera2);
        FrameLayout preview2 = (FrameLayout) findViewById(R.id.camera_preview2);
        preview2.addView(mPreview2);
    }

    @Override
    protected void onPause()
    {
        super.onPause();
        releaseCamera();              // release the camera immediately on pause event

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance(){
        Camera c = null;
        try {
            c = Camera.open(); // attempt to get a Camera instance
        }
        catch (Exception e){
            // Camera is not available (in use or does not exist)
        }
        return c; // returns null if camera is unavailable
    }

    private void releaseCamera()
    {
        if (mCamera != null)
        {
            mCamera.release(); // release the camera for other applications
            mCamera = null;
        }

    }

    private Camera openFrontFacingCameraGingerbread() {
        int cameraCount = 0;
        Camera cam = null;
        Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
        cameraCount = Camera.getNumberOfCameras();
        for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
            Camera.getCameraInfo( camIdx, cameraInfo );
            if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT  ) {
                try {
                    cam = Camera.open( camIdx );
                } catch (RuntimeException e) {
                    Log.e(TAG, "Camera failed to open: " + e.getLocalizedMessage());
                }
            }
        }

        return cam;
    }

} 
````  ````
package com.example.camera_test;

import java.io.IOException;
import android.content.Context;
import android.hardware.Camera;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

/** A basic Camera preview class */
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;
    private String TAG = "Camera Test Applicaiton";

    public CameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
            Log.d(TAG, "Error setting camera preview: " + e.getMessage());
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // empty. Take care of releasing the Camera preview in your activity.
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    }
} 
```

我如何修复在布局中使用两个摄像头

```
 03-09 22:19:48.408: E/Trace(682): error opening trace file: No such file or directory (2)
 03-09 22:19:50.369: D/AndroidRuntime(682): Shutting down VM
 03-09 22:19:50.369: W/dalvikvm(682): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
 03-09 22:19:50.439: E/AndroidRuntime(682): FATAL EXCEPTION: main
 03-09 22:19:50.439: E/AndroidRuntime(682): java.lang.NullPointerException 
`````

# c# - 如何检测 url 中的视频内容？

> ID：15315720
> 
> 赞同：0
> 
> 时间：2013-03-09T20:43:24.183
> 
> 标签：c#, windows-phone-7, twitter, tweetsharp

我在我的 wp8 应用程序中使用`TweetSharp`. 我想检测每条推文中的内容。使用照片很简单，使用`TwitterStatus.Entities.Media`它的图像集合。视频更难，指向视频的链接`TwitterStatus.Entities.Urls`（例如`youtube.com`或`youtu.be`等）带有指向其他网站的简单链接。官方 android Twitter 应用程序检测内容类型并显示图标 forech 类型（链接、视频、照片）。我试图仅从 JSON 中获取此信息，但在 JSON 中`urls`，视频链接也在`media`. 但是android app知道如何检测内容，所以可以制作。

在完整的解决方案中，我只需要一个`enum`字段with , , or`ContentType``MyTwitterMessage``Photo``Video``Link``Nothing`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:23:10.953

我能想到的几种方法是

a) 只需使用已知的文件扩展名并检查扩展名是否是类型并返回（假设所有 URL 都将提供文件扩展名）。

b) 使用 URL 启动下载，但仅检索标头

```
 WebClient aClient = new WebClient();
 WebHeaderCollection collection = new WebHeaderCollection();
 collection[HttpRequestHeader.Range] = "bytes=0-0";
 aClient.Headers = collection; 
 aClient.DownloadStringAsync(new Uri("URI GOES HERE")); 
```

然后在 DownloadStringCompleted 事件中解析标题并检索内容类型

```
 var aClient = (Webclient)sender;
 var responseHeaders = client.ResponseHeaders;
 var TypeOfContent = responseHeaders["Content-Type"]; 
```

然后您应该能够从那里确定内容，可以在[此处找到 MIME 类型](http://en.wikipedia.org/wiki/MIME_type#Type_video)

对于 b) 您可能还需要处理重定向，但这是另一个问题。

# javascript - 将“[52.43242, 4.43242]”转换为 google LatLng

> ID：15315722
> 
> 赞同：0
> 
> 时间：2013-03-09T20:43:37.000
> 
> 标签：javascript, arrays, google-maps-api-3, gsp

我有一个非常简单的问题，

我试着让谷歌计算一个地址和一个 gsp 变量之间的距离

```
[53.57532, 10.01534] 
```

我无法获得`${center}`变量`google.maps.LatLng-Object`

继承人的功能

```
jQuery(document).ready(function() {
var result = '${center}';
console.log(result);// [53.57532, 10.01534]
var origin = new google.maps.LatLng(55.930385, -3.118425);
var destination = new google.maps.LatLng(result);

var service = new google.maps.DistanceMatrixService();
service.getDistanceMatrix(
{
origins: [origin],
destinations: [destination],
travelMode: google.maps.TravelMode.DRIVING,
avoidHighways: false,
avoidTolls: false
}, callback);

function callback(response, status) {
if (status == google.maps.DistanceMatrixStatus.OK) {
console.log('status OK!');//status OK!
var origins = response.originAddresses;
var destinations = response.destinationAddresses;

for (var i = 0; i < origins.length; i++) {
  var results = response.rows[i].elements;
  for (var j = 0; j < results.length; j++) {
    var element = results[j];
    var distance = element.distance.text;
    var duration = element.duration.text;
    var from = origins[i];
    var to = destinations[j];
    console.log(distance);//Uncaught TypeError: Cannot read property 'text' of undefined 
  }
 }
}
}
}); 
```

在谷歌上面的“源代码”中抛出错误

```
 Uncaught TypeError: Cannot read property 'text' of undefined 
```

我尝试了很多毫无意义的狗屎，但我就是不明白，

也许有人可以提示我做错了什么？提前致谢

根据这里的评论，我的 gmap3 也失败了，但我宁愿让这个工作，但我想这是同样的问题，转换为 lat lon 不起作用

```
 function getDistance(adress){
var to;
var result = '${center}';

 $("#getdistance").gmap3({
 getdistance:{
  options:{
  origins:adress,
  destinations:result ,
  travelMode: google.maps.TravelMode.DRIVING
},
 callback: function(results, status){
  var html = "";
  if (results){
    for (var i = 0; i < results.rows.length; i++){
      var elements = results.rows[i].elements;
      for(var j=0; j<elements.length; j++){
        switch(elements[j].status){
          case "OK":
            html += elements[j].distance.text + " (" + elements[j].duration.text + ")<br />";
            break;
          case "NOT_FOUND":
            html += "The origin and/or destination of this pairing could not be geocoded<br />";
            break;
          case "ZERO_RESULTS":
            html += "No route could be found between the origin and destination.<br />";
            break;
        }
      }
    }
  } else {
    html = "error";
  }
  console.log('start '+adress);
  console.log('start '+latte);
  console.log('start '+html);
}
}
});

} 
```

在这里，我将地址解析为函数的字符串`adress`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T20:51:27.270

怎么样

```
var result = ${center};
var destination = new google.maps.LatLng(result[0], result[1]); 
```

`google.maps.LatLng`不接受数组。它接受的参数是：数字、数字、布尔值。

[https://developers.google.com/maps/documentation/javascript/reference#LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

# actionscript-3 - 如何在 AS3 中创建可变宽度笔触？

> ID：15315724
> 
> 赞同：2
> 
> 时间：2013-03-09T20:43:48.770
> 
> 标签：actionscript-3

有没有办法在绘制的路径上创建可变宽度的笔触？我需要模仿笔压效果（不使用平板电脑）。我可以通过更改 stoke 的某些属性来做到这一点吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:49:32.237

通常不喜欢只发布链接！但这就是您所需要
[的 AS3 中平滑且响应迅速的绘图应用程序](http://www.flashandmath.com/advanced/smoothdraw/index.html)
它通过鼠标速度确定厚度，您显然可以根据需要进行更改

# c - 为什么父母不收割孩子？

> ID：15315725
> 
> 赞同：0
> 
> 时间：2013-03-09T20:44:13.303
> 
> 标签：c

我正在编写将一个进程分成两部分的代码，然后父进程通过管道将参数发送给 main 子进程。孩子一个一个地计算字符并打印出最终结果。然后父母应该使用waitpid（）来收割孩子。

如果我删除子进程中的循环，那么将发生收获，但如果我将其留在（这是必要的），程序将执行并终止，但不会发生收获。我不知道这是为什么。任何帮助将不胜感激。这是一堂课的作业。谢谢！

这是我的代码：

```
 if( waitpid( pid, &status, WNOHANG ) > 0 )
        {
        printf( "parent reaps child status 0x%08X\n", status );
        if( WIFEXITED(status) )
        printf( "child exited normally with %d\n", WEXITSTATUS(status) );
    }
    close( out );
    return 0; 
```

我也意识到这段代码没有错误检查......我只是想让它先工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:46:27.863

您必须告诉客户何时停止，您可以通过关闭管道来做到这一点。所以父进程必须做到：

```
for( i = 0; i < (argc - 1); i++ )
{
    for( idx = 0; idx < strlen(argv[i + 1]); idx++ )
        write( out, &argv[i + 1][idx], 1 );
}
close(out);  // <----
sleep(1);
if( waitpid( pid, &status, WNOHANG ) > 0 ) 
```

此外，如果子进程未完成，WNOHANG 告诉 waitpid 不要等待。所以在你的情况下，它还没有完成。

```
waitpid( pid, &status, WNOHANG )
                       ^^^^ 
```

# ios - Objective-C NSString 类别 Getter/Setter 崩溃

> ID：15315730
> 
> 赞同：0
> 
> 时间：2013-03-09T20:44:33.227
> 
> 标签：ios, objective-c, nsstring, objective-c-category

我正在尝试创建 NSString 类别，但在尝试访问 getter/setter 时应用程序崩溃。

```
#import <Foundation/Foundation.h>
#import <AddressBook/AddressBook.h>

@interface NSString (MyCat)

@property (assign, nonatomic) ABRecordRef personRef;

- (void)setPersonRef:(ABRecordRef)personRef;
- (ABRecordRef)personRef;

@end 
```

谁能指出问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:43:12.660

您不能通过类别将属性添加到类。允许添加方法，因为它不会增加类的大小。属性不只是添加一个 getter 和 setter 方法，它们还向您的类添加一个字段。将属性/字段添加到现有类的最佳方法是将其子类化。

# c# - 从 C# SyndicationFeed 读取所有 rss 项目

> ID：15315732
> 
> 赞同：4
> 
> 时间：2013-03-09T20:44:58.920
> 
> 标签：c#, rss, syndication-feed

我正在尝试使用 System.ServiceModel.Syndication 从 C# 代码中读取 RSS 提要

```
var reader = XmlReader.Create(feedUrl);
var feed = SyndicationFeed.Load(reader); 
```

代码运行完美，但只给了我 25 个提要项。

对于相同的提要 url，在谷歌阅读器等阅读器中可以清楚地看到数百个项目。

如何在 SyndicationFeed 中获得超过 25 个提要项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:57:30.267

简而言之，除非提要提供者为其提要提供了自定义分页，或者可能通过推断发布/日期结构，否则您不能获得超过这 25 个帖子。仅仅因为您知道有超过 25 个帖子并不意味着它们将通过提要提供。RSS 旨在显示最新的帖子；它的目的不是为了存档需求，也不是为了像 Web 服务一样使用。分页也不是[RSS 规范](http://cyber.law.harvard.edu/rss/rss.html "RSS 规范")或[Atom 规范](https://www.rfc-editor.org/rfc/rfc4287 "原子规格")的一部分。请参阅其他答案：[如何获取 RSS 提要上的所有旧项目？](https://stackoverflow.com/questions/576552/how-do-i-fetch-all-old-items-on-an-rss-feed)

谷歌阅读器是这样工作的：谷歌的爬虫在新的提要首次上线后不久就检测到它，并且爬虫会定期访问它。每次访问时，它都会将所有新帖子存储在 Google 的服务器上。通过在其搜寻器发现新提要后立即存储提要项目，它们可以将所有数据返回到提要的开头。您可以复制此功能的唯一方法是在新提要开始时开始存档，这是不切实际且不太可能的。

总之，`SyndicationFeed`如果提要地址中有超过 25 个项目，则将获得 > 25 个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:07:13.393

Try this;

`private const int PostsPerFeed = 25; //Change this to whatever number you want`

Then your action:

```
 public ActionResult Rss()
    {
        IEnumerable<SyndicationItem> posts =
            (from post in model.Posts
             where post.PostDate < DateTime.Now
             orderby post.PostDate descending
             select post).Take(PostsPerFeed).ToList().Select(x => GetSyndicationItem(x));

        SyndicationFeed feed = new SyndicationFeed("John Doh", "John Doh", new Uri("http://localhost"), posts);
        Rss20FeedFormatter formattedFeed = new Rss20FeedFormatter(feed);
        return new FeedResult(formattedFeed);
    }

    private SyndicationItem GetSyndicationItem(Post post)
    {
        return new SyndicationItem(post.Title, post.Body, new Uri("http://localhost/posts/details/" + post.PostId));
    } 
```

In your **FeedResult.cs**

```
class FeedResult : ActionResult
{
    private SyndicationFeedFormatter formattedFeed;

    public FeedResult(SyndicationFeedFormatter formattedFeed)
    {
        this.formattedFeed = formattedFeed;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.ContentType = "application/rss+xml";
        using (XmlWriter writer = XmlWriter.Create(context.HttpContext.Response.Output))
        {
            formattedFeed.WriteTo(writer);
        }
    }
} 
```

Demostration is [HERE](http://komengemwandila.com/Posts/Rss). Warning though, no format for google chrome yet

# objective-c - 使用书签时内存堆增长

> ID：15315737
> 
> 赞同：1
> 
> 时间：2013-03-09T20:45:10.653
> 
> 标签：objective-c, macos, memory-management

我的应用程序使用书签来保留对沙盒环境中文件的访问权限。每次我使用 `NSData *bookmark = [url bookmarkDataWithOptions:NSURLBookmarkCreationWithSecurityScope includingResourceValuesForKeys:nil relativeToURL:nil error:&error];` 或

```
 NSURL *resolvedURL = [NSURL URLByResolvingBookmarkData:storedBookmark options:nil relativeToURL:nil bookmarkDataIsStale:FALSE error:&resolveError   ]; 
```

内存堆随着非对象分配而增长，这些分配在以后不会被释放。 ![在此处输入图像描述](../Images/abe7999dffe78f1bb63a78d1d43bc4ee.png)

我正在使用 ARC。@autorelease 块没有区别。仪器显示没有内存泄漏。

如何摆脱这些分配？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T13:10:30.620

请使用以下一对：

```
[url startAccessingSecurityScopedResource];

...

[url stopAccessingSecurityScopedResource]; 
```

# xcode - Xcode 构建阶段运行脚本支持哪些类型的语言？

> ID：15315746
> 
> 赞同：5
> 
> 时间：2013-03-09T20:45:51.567
> 
> 标签：xcode, scripting, run-script, scripting-languages

我是脚本新手，但我需要学习它以获取我需要在 Xcode 项目的构建阶段运行的脚本。

我可以在那里写什么类型的脚本？支持哪些类型的语言？是否有一种脚本语言比其他脚本语言更容易学习？

只是想在这里找到正确的方向。

谢谢一堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T01:04:19.493

正确的答案可能是：“适用于 MacOS 附带的任何 shell 的脚本”

在我的 Mountain Lion 机器上，我看到：

```
[/]:; more /etc/shells
# List of acceptable shells for chpass(1).
# Ftpd will not allow users to connect who are not using
# one of these shells.

/bin/bash
/bin/csh
/bin/ksh
/bin/sh
/bin/tcsh
/bin/zsh 
```

创建构建脚本时，您可以在“运行脚本”面板的“Shell”字段中指定所需的 shell。它看起来像这样：

![在此处输入外壳](../Images/1891e8b2fc478ce2560985c299a0c9da.png)

# javascript - HTML5 setCustomValidation 解除绑定问题

> ID：15315747
> 
> 赞同：1
> 
> 时间：2013-03-09T20:46:07.267
> 
> 标签：javascript, jquery, html, validation, html5-validation

我正在使用内置的 HTML5 验证方法来验证表单中的出生日期。

该表单具有三个选择列表元素，user_dob_date user_dob_month user_dob_year

由于用户必须选择一个有效的选项，因此所有这三个元素都已作为“必需”进行验证

现在，在用户选择了所有三个选项并且选择至少一个选项的 HTML5 验证通过之后，我想检查闰年的日期，并确保用户没有选择像 1998 年 2 月 31 日这样的东西！！！

```
$('#form-signup-next').submit(function(){                       
   if($('#user_dob_month').val()=='2' && $('#user_dob_date').val()>29 ){
        var obj=$('#user_dob_date')[0];
        alert($('#user_dob_month').val());
        obj.setCustomValidity('Invalid Date!');         
   }else{
        var obj=$('#user_dob_date')[0];
        obj.setCustomValidity('');
    }
    return false;
    }); 
```

-> 单击提交时不显示自定义消息。如果按钮被单击两次，它会这样做。第一次点击它matbe设置了味精但不显示，第二次点击显示错误

-> 如果在错误选择和显示自定义消息后，如果日期是固定的，我们尝试提交表单，它仍然会抛出错误:(

请帮我解决这个问题。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:46:01.137

您不应该在提交表单时这样做，因为一旦`setCustomValidity`设置了值，它将不允许提交表单，除非验证错误值得到明确并且在您的代码中问题是您正在清除提交时的错误值。因此，即使您在下次运行时更正了值，这也是您收到验证错误的原因。

有关详细信息，请查看此链接**[当前实施问题和限制（特别是问题 3）](http://www.html5rocks.com/en/tutorials/forms/constraintvalidation/)**

好的，现在您可以通过这种方式执行此操作..通过检查并设置下拉值更改事件的错误消息

```
$('#user_dob_date,#user_dob_month').on('change',function(){
    if($('#user_dob_month').val()=='2' && $('#user_dob_date').val()>29){
    $('#user_dob_date')[0].setCustomValidity('Invalid Date!');
    }
    else{
    $('#user_dob_date')[0].setCustomValidity('');
    }
  }); 
```

我检查了它，它工作正常。

所以现在当用户选择错误的组合并按下提交按钮时，它会显示错误消息。

[在http://jsbin.com/aqicim/1](http://jsbin.com/aqicim/1)试试这个

# javascript - javascript中使用数组的多项选择测验

> ID：15315757
> 
> 赞同：-1
> 
> 时间：2013-03-09T20:47:04.950
> 
> 标签：javascript, html

我必须在 javascript 中创建一个多项选择州首府测验。我有一个包含所有 50 个州的数组（stateArray）和一个包含所有 50 个大写字母的数组（capitalArray），并且顺序正确。
我有一张表，上面有一个问题“（空白）的首都是什么”，我希望（空白）填充来自 stateArray 的状态。
然后我有 4 个单选按钮，我希望其中一个填充来自 capitalArray 的正确答案，另外 3 个填充来自 capitalArray 的随机大写字母。我该怎么做呢？

我一直在互联网上寻找答案，但似乎找不到。如果我要输入我想在每个按钮旁边显示的文本，我知道如何编写问题/单选按钮，但我不知道如何让它从数组中提取。请帮忙。

编辑：好的，也许我问错了。我不希望有人为我做作业。任务还有很多，我只是不知道如何做这一部分——特别是从数组中提取数据来填充问题和单选按钮。我无法在我的教科书或互联网上找到相关信息。在这一点上，我只是感到沮丧和困惑，我不知道该去哪里寻求帮助。如果有人知道我可以在哪里找到有关如何执行此操作的教程或信息，那也会有所帮助。

对于标记我的问题的人：如果您要标记它，如果您留下评论告诉我为什么这样我可以改进我未来的问题，这将非常有帮助。谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:19:03.377

> 我不知道如何让它从阵列中拉出

对于表中的每一行，从任何数组（例如状态）中选择一个随机索引：

```
var questionIndex = Math.round(Math.random(stateArray.length)); 
```

然后使用获得的问题索引从两个数组中获取值，前提是两者的顺序正确：

```
var question = stateArray[questionIndex],
    answer = capitalArray[questionIndex]; 
```

您现在可以填充行的 HTML 字段。

**编辑：**

要获得单选按钮的“不正确”答案，您可以简单地：

```
var incorrectAnswerIndices = [],
    incorrectAnswerIndex;

while (incorrectAnswerIndices.length < 3) {
    incorrectAnswerIndex = Math.round(Math.random(stateArray.length));
    // Check for collisions with the correct answer,
    // and make sure there are no identical answers:
    if (incorrectAnswerIndex !== questionIndex &&
            incorrectAnswerIndices.indexOf(incorrectAnswerIndex) === -1) {
        incorrectAnswerIndices.push(incorrectAnswerIndex);
    }
} 
```

您现在可以迭代`incorrectAnswerIndices`数组并使用值创建/填充错误问题单选按钮的值，例如：`capitalArray[incorrectAnswerIndices[0]]`这是给定状态的三个不正确大写名称中的第一个。

# kdevelop - 如何使用 qt 制作像 DockWidget 一样的 Kdevelop

> ID：15315758
> 
> 赞同：0
> 
> 时间：2013-03-09T20:47:14.623
> 
> 标签：kdevelop, qdockwidget

我想制作一个IDE，但想要像dockwidget这样的Kdevelop，如图所示。我想用qt。我想知道这是如何在 Kdevelop 中实现的。它是使用 QTabBar 和 QStackedWidgets 还是其他东西的自定义小部件？

如果有人告诉我它是如何实现或可以实现的，那就太好了 ![在此处输入图像描述](../Images/6d29a453b5f7b0373e7de5b97647da6c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:42:10.753

Afaik 它是基于`QTabBar`+`QDockWidget`的。

检查来源，你会发现它很崇高。

此提交添加了当前实现： [http ://commits.kde.org/kdevplatform/4e204dcafce117f52a9488d6c8a3125d3a21da7e](http://commits.kde.org/kdevplatform/4e204dcafce117f52a9488d6c8a3125d3a21da7e)

# ios - prepareForSegue 方法每隔一段时间工作一次

> ID：15315760
> 
> 赞同：0
> 
> 时间：2013-03-09T20:48:23.573
> 
> 标签：ios, tableview, uistoryboard

我使用 prepareForSegue 方法将 location_id 从 LocationTableViewController 传递到 BeerTableViewController 以在点击位置单元格时获取位置啤酒结果。我的问题是 location_id 每隔一段时间才更新一次。

示例：当点击位置 1 时，它会加载该位置的啤酒。然后我点击后退按钮并点击位置 2，但它仍然加载位置 1 啤酒。如果我再次回击，然后再次点击位置 2，它会显示正确的位置 2 啤酒。

为什么需要两次尝试才能加载正确的 location_id？

```
LocationTableViewController.m

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  
    self.selected_location = indexPath.row;
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"beer"]){
        BeerTableViewController *beer = (BeerTableViewController *)[segue destinationViewController];
        Location *location = [self.location_results objectAtIndex:self.selected_location];
        beer.location_id = location.location_id;
        }
} 
```

然后在 BeerTableViewController 我使用 location_id 来获取结果

```
BeerTableViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *path = [NSString stringWithFormat:@"locations/%@/beers.json", self.location_id];

    [[LocationApiClient sharedInstance] getPath:path parameters:nil
                                        success:^(AFHTTPRequestOperation *operation, id response) {
                                            NSLog(@"Response: %@", response);
                                            NSMutableArray *beer_results = [NSMutableArray array];
                                            for (id beerDictionary in response) {
                                                Beer *beer = [[Beer alloc] initWithDictionary:beerDictionary];
                                                [beer_results addObject:beer];

                                            }
                                            self.beer_results = beer_results;
                                            [self.tableView reloadData];
                                        }
                                        failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                            NSLog(@"Error fetching beers!");
                                            NSLog(@"%@", error);

                                        }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:14:32.910

`tableView:didSelectRowAtIndexPath`将在*之后* `prepareForSegue:sender:`调用，因此您在啤酒视图控制器上设置*后将*`self.selected_location`其设置为正确的行。*`location_id`*

 *这就是为什么您下次会看到正确的行。你的啤酒视图控制器总是落后一排。

在您的`prepareForSegue:sender:`中，如果您有对 UITableView 的引用，则可以直接从表视图中获取当前正确选择的行。

假设您的 中有一个@property 'tableView' `LocationTableViewController`，您可以使用`[self.tableView indexPathForSelectedRow]`

**编辑**

如果您`LocationTableViewController`是 的子类`UITableViewController`，那么您已经拥有此 @property `tableView`。在这种情况下，你`prepareForSegue:sender:`会看起来像这样：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"beer"]){

      BeerTableViewController *beer = (BeerTableViewController *)[segue destinationViewController];
      NSInteger selectedRow = [[self.tableView indexPathForSelectedRow] row];
      Location *location = [self.location_results objectAtIndex:selectedRow];
      beer.location_id = location.location_id;
    }
} 
```*

# c# - Newtonsoft Json.NET ReferenceLoopHandling 和 JavascriptDateTimeConverter

> ID：15315762
> 
> 赞同：3
> 
> 时间：2013-03-09T20:48:45.403
> 
> 标签：c#, datetime, json.net

我需要 Json.NET 使用 JavaScriptDateTimeConverter 和 ReferenceLoopHandling.Ignore 进行序列化。据我所知，JsonConvert.SerializeObject 上的任何签名都不允许设置这两个设置。

我可以：

```
var json = JsonConvert.SerializeObject(this.Data, new JavaScriptDateTimeConverter()); 
```

或者我可以这样做：

```
var json = JsonConvert.SerializeObject(this.Data, new JsonSerializerSettings()
            {
                ReferenceLoopHandling = ReferenceLoopHandling.Serialize
            }); 
```

但我不能两者都做。我为 SerializeObject 得到的签名如下。第 6 个和第 5 个允许我分别执行上述操作。

![序列化对象签名](../Images/4829eaf94d4e02298fc8c264e0531396.png)

我已经研究过在全球范围内设置这些设置，但我运气不佳。

有人知道使用这两种设置进行序列化的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:55:10.697

您`JavaScriptDateTimeConverter`在`JsonSerializerSettings`'内部指定`Converters`属性：

```
var json = JsonConvert.SerializeObject(this.Data, new JsonSerializerSettings()
{
    Converters = new List<JsonConverter> { new JavaScriptDateTimeConverter() },
    ReferenceLoopHandling = ReferenceLoopHandling.Serialize
}); 
```

实际上，`JsonConverter`内部采用数组的重载会创建 a`JsonSerializerSettings`并设置其 Converters 属性。

# python - 将 XOR 更改为 XNOR

> ID：15315764
> 
> 赞同：2
> 
> 时间：2013-03-09T20:49:17.217
> 
> 标签：python, bit-manipulation, bitwise-operators, xor, bitwise-xor

我正在处理一个密钥未知的 XNOR 加密文件。我想修改此处提供的 xortool：[https](https://github.com/hellman/xortool) ://github.com/hellman/xortool以用于 XNOR 加密。

显然，只有两行使用 '^' 运算符。所以我尝试使用 ~ 运算符将它们更改为 xnor。但我无法获得所需的输出。我怎样才能做到这一点？

编辑：代码仅在 xortool.py 的第 248 行使用 '^' 运算符

```
key_possible_bytes[offset] += chr(ord(char) ^ most_char) 
```

在routine.py的第75行

```
 ret[index] = (chr(ord(char) ^ ord(key[index % len(key)]))) 
```

所以我在它们之前添加了一个 ~ 运算符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T20:56:41.053

替换所有实例`a ^ b`以`~(a ^ b)`将 XOR 操作更改为 XNOR 操作。请务必将 not 运算符插入正确的位置，以确保发生正确的操作顺序！

使用您的特定代码示例：

`key_possible_bytes[offset] += chr(`***`~(ord(char) ^ most_char)`***`)`

`ret[index] = (chr(`***`~(ord(char) ^ ord(key[index % len(key)]))`***`))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-16T14:22:02.130

这个问题针对的是 Python 中的位运算符，但对于那些（像我一样）处理布尔值的人来说，上述版本的 XNOR*不能*按预期工作：

```
In [1]: for i in [True, False]:
   ...:     for j in [True, False]:
   ...:         print(i, j, ' = ', ~(i^j))
   ...: 
True True  =  -1
True False  =  -2
False True  =  -2
False False  =  -1 
```

相反，您将要使用`not`而不是`~`：

```
In [2]: for i in [True, False]:
   ...:     for j in [True, False]:
   ...:         print(i, j, ' = ', not (i^j))
   ...: 
True True  =  True
True False  =  False
False True  =  False
False False  =  True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-24T22:19:28.773

减去最大值。

如果你是 `xoring' 8 位值，这将完成这项工作：

`0xff - (0xf0 ^ 0x0f)`

# cakephp - CakePHP - 捕获和使用调试错误消息

> ID：15315769
> 
> 赞同：0
> 
> 时间：2013-03-09T20:49:43.707
> 
> 标签：cakephp

我正在为我的 CakePHP 应用程序使用 Klarna Checkout（一种支付系统）进行测试。

基本上，Klarna 服务器会向我保存购买信息的网站上的 URL 发出某些 PUSH 请求。但是由于它是 Klarna 服务器发出这个请求并且它只发出一次，我很难调试这个请求，因为我看不到错误输出，因为我没有触发请求。我的想法是在这些 PUSH 请求到来时向自己发送一封包含错误的电子邮件，但现在是我的问题。

在 CakePHP 中，我如何捕获您在变量中打开调试时通常看到的错误转储并将其发送到我的电子邮件？是否有一个变量加载了错误？如果我的代码失败了，我真的不能再给自己发邮件了……有问题。

# imagemagick - 如何将给定文件夹中的所有文件（不同格式）转换为不同的文件类型

> ID：15315770
> 
> 赞同：37
> 
> 时间：2013-03-09T20:49:49.440
> 
> 标签：imagemagick, imagemagick-convert

我有一个包含许多来自不同类型（png、jpg、jpeg、bmp、pdf）的图像的文件夹，我想使用 imagemagick 将它们全部转换为 png（例如）。

是否有一个命令可以执行此操作？如果没有，我应该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-10T17:05:46.587

试试`mogrify`命令：

```
mogrify -format png *.* 
```

不过要小心。如果没有该`-format`选项，`mogrify`将覆盖原始图像。请务必阅读[文档](http://www.imagemagick.org/script/mogrify.php)。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-02-12T08:25:13.027

尽管`mogrify`似乎可以完成这项工作，但我想向您展示如何使用`convert`ImageMagick 中的多个命令来完成这项工作。

我认为多个命令更好，因为文件类型的数量应该很小，您可以根据需要更好地调整它：

这个命令：

```
for file in *.xbm; do convert $file "`basename $file .xbm`.png"; done 
```

将所有`.xbm`文件转换为`.png`不接触 xbm 文件。

然后您可以移动所有“转换后的”文件：

```
mkdir converted
for file in *.xbm; do mv $file converted/; done 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-11T16:57:39.247

您可以使用`convert`ImageMagick 包中的命令，例如

`find . -maxdepth 1 \( -iname \*.png -o -iname \*.jpg -o -iname \*.jpeg -o -iname \*.bmp -o -iname \*.pdf \) -exec convert -verbose "{}" "DEST_DIR/{}.png" \;`

或者，如果您将所有文件都放在同一个目录中，请尝试以下更简单的方法：

```
convert '*.*' converted_%04d.png 
```

类似：[如何将文件夹中的所有图像缩放到相同的宽度？](https://askubuntu.com/q/135477/78223)

# php - PHP / Magento - 缓存策略

> ID：15315773
> 
> 赞同：0
> 
> 时间：2013-03-09T20:50:12.973
> 
> 标签：php, magento, caching, redis, apc

我正在使用 Magento 创建一个应用程序，并试图考虑最好的缓存工具。

有几个选择，我没有足够的经验来充分考虑所有事情，并希望在这里得到一些建议。

所以选择是：

会话

```
Redis, Memcached, Apc 
```

后端

```
Redis, Apc 
```

该应用程序将在单个服务器上运行，因此我可能会排除 Memcached。

所以选择是在 Redis 和 apc 之间或两者的混合。

这里最好是什么？

还是redis和apc缓存不同的东西所以应该一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T20:11:49.537

我会推荐使用 Redis，有一个非常好的模块[https://github.com/colinmollenhour/Cm_Cache_Backend_Redis](https://github.com/colinmollenhour/Cm_Cache_Backend_Redis)可以为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T20:47:40.000

据我所知，Memcached 更快，因为它可以使用多个内核，任何像样的 magento 托管都有。Memcached 是开箱即用的，因此您无需为 Redis 操心。

[与 Redis 相比，memcached 是恐龙吗？](https://stackoverflow.com/questions/2873249/is-memcached-a-dinosaur-in-comparison-to-redis)

# python - 键盘中断- Python

> ID：15315774
> 
> 赞同：0
> 
> 时间：2013-03-09T20:50:17.687
> 
> 标签：python, user-input

在python套接字编程中，例如聊天，主要目的是不断地接收来自其他人的消息，同时如果他按下任何键，程序应该接受输入并发送该消息，而不是打印接收到的消息。发送完成后，它应该打印收到的消息。如何在不明确要求用户键入消息的情况下执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:55:02.093

如果我正确理解你的问题，你会想要使用某种形式的事件系统。将输入文本和接收消息视为事件。

[http://en.wikipedia.org/wiki/Event_(计算)](http://en.wikipedia.org/wiki/Event_(computing))

[Python中的事件系统](https://stackoverflow.com/questions/1092531/event-system-in-python)

因为像这样的东西是一个实时程序，你的程序将在一个循环中运行。在整个循环中，事件被放入一个队列中，并且在每个循环的开始，它们按照它们被触发的顺序被处理。

由于您正在使用网络，因此少量线程可能会很有用。由于 Global Interpreter Lock，Python 不能真正使用多线程来提升性能，但它对于在后面进行 I/O 仍然很有用。这样，当您的聊天客户端（使用您的示例）尝试获取其他人发送的消息时，程序的其余部分不会冻结。这对于慢速互联网连接特别有用。

# opencv - 使用opencv进行图像视网膜对数极坐标采样

> ID：15315775
> 
> 赞同：3
> 
> 时间：2013-03-09T20:50:18.177
> 
> 标签：opencv, image-processing, computer-vision, polar-coordinates

对于我的项目的一部分，我需要在图像上应用对数极坐标变换。我发现OpenCV中有一个类叫做：

cv::LogPolar_Interp 和 cv::LogPolar_Adjacent() 用于此目的。

问题是我不知道如何使用它们来生成转换后的图像，例如![这个](../Images/e5297d64b3d771cdc3679bf06f189095.png)

我玩过它的参数，但我无法得到想要的结果。

这是我的尝试：

```
 cv::LogPolar_Interp *LogPolar=new cv::LogPolar_Interp(inputFrame.cols,inputFrame.rows,cv::Point2i(inputFrame.cols/2,inputFrame.rows/2),120,20,CV_INTER_LINEAR, 1,117,1);

    logPolar_out=LogPolar->to_cartesian(inputFrame); 
```

有谁知道我怎么能得到这个。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T23:14:33.790

您应该首先将输入图像映射到皮层坐标，然后将其重新映射到笛卡尔坐标。如果您想利用相邻映射，您还必须将图像转换为灰度。

通过将代码更改为以下代码，您可能会得到所需的内容。

```
 cv::cvtColor(inputFrame,inputFrame,CV_BGR2GRAY);

    cv::LogPolar_Adjacent *logP=new cv::LogPolar_Adjacent(inputFrame.cols,inputFrame.rows,cv::Point2i(inputFrame.cols/2,inputFrame.rows/2));

    logPolar_out=logP->to_cortical(inputFrame);
    logPolar_out=logP->to_cartesian(logPolar_out);
    cv::imshow("Log Polar output",logPolar_out);
    cv::imshow("Log Polar input",inputFrame); 
```

# java - java中字符串到字节的转换

> ID：15315780
> 
> 赞同：1
> 
> 时间：2013-03-09T20:50:58.310
> 
> 标签：java

我正在将字节数据转换为字符串，并将此字符串转换回字节。但是，当我尝试将此字符串转换回字节时，我无法取回字节数据。我知道我正在做一些非常愚蠢的事情。有人可以请让我知道错误是什么？以下是我在 java 中的代码

```
Log.e("byte data",""+byte_data[3]);  //70
Log.e("data in string",""+Integer.toBinaryString(byte_data[3]));  //1000110
String data=Integer.toBinaryString(byte_song[3]);
Log.e("byte data",""+data.getBytes()); 
```

然而 dat.getBytes() 返回 [B@414eaa48 但它应该返回我 70。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:53:51.603

[`getBytes`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28%29)返回一个`byte`数组，并且数组的`toString`方法不显示它们的内容（这有时会很烦人）。尝试[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28byte%5B%5D%29)显示数组的内容。请注意，对于一个对象`x`，`"" + x`等价于`x.toString()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:53:54.003

`dat.getBytes()`提供一个 bytes 数组，它本身就是 java 中的一个对象。每当您尝试打印出该对象或调用`toString()`时，它都会调用类的`toString()`方法`java.lang.Object`。在`java.lang.Object`类`toString()`中定义如下：

```
public String  toString() {
        return getClass().getName() + "@" + Integer.toHexString(hashCode());
    } 
```

这就是为什么你得到这样的输出。要实现您想要
`Log.e("byte data",""+dat.getBytes());`的，应该更改为
`Log.e("byte data",""+java.util.Arrays.toString(dat.getBytes()));`
**UPDATE**
要`70`返回，您应该使用：
`Log.e("byte data",""+Integer.parseInt(String.valueOf(byte_data[3]),10));`
**或者**
`Log.e("byte data",""+Integer.parseInt(data,2));`
要知道它是如何工作的，请看这里**[Integer.parseInt(String s, int radix)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)**

# java - Graphics2D 绘制线条以缩放以创建矩形

> ID：15315781
> 
> 赞同：0
> 
> 时间：2013-03-09T20:51:00.333
> 
> 标签：java, scale, graphics2d, lines, rect

我正在尝试通过存储需要绘制的线条来制作填充桶工具。我的那部分工作得很好，但是现在当我尝试缩放它时，我遇到了一个问题，即我有一些区域没有画在某些线条之间。有没有办法解决这个问题，或者有更好的方法来做到这一点？

此代码将演示我遇到的问题。第一个正方形没有缩放并且看起来不错，但是当我缩放第二个框时，一些线之间有空间。

```
import java.awt.*;
import javax.swing.*;

public class LineWidth extends JPanel{
    public static void main(String[] args) {
        LineWidth l = new LineWidth();
        l.setPreferredSize(new Dimension(500, 500));
        l.setBackground(Color.CYAN);

        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setContentPane(l);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g.create();

        g2.setColor(Color.BLACK);

        for(int i=10; i<110; i++) {
            g2.drawLine(10, i, 190, i);
        }

        Graphics2D g22 = (Graphics2D) g.create();
        g22.setColor(Color.BLACK);
        g22.scale(2.1, 2.1);
        for(int i=120; i<220; i++) {
            g22.drawLine(10, i, 190, i);
        }
    }
} 
```

对于这个例子，绘制一个矩形而不是线条会容易得多，但是对于我的填充桶，我看不到这样做的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:08:48.960

我最终将我的线条绘制到 a上，而不是`BufferedImage`缩放它`BufferedImage`而不是我的线条。这可能不是最有效的方法，但它工作得很好，而且运行得足够快。感谢您对此的建议。

# ios - 将多个 UITextFiled 附加到同一个 IBAction 不会保留触发事件

> ID：15315786
> 
> 赞同：1
> 
> 时间：2013-03-09T20:51:23.327
> 
> 标签：ios, xcode, uitextfield, storyboard, ibaction

使用 Xcode 4.6 故事板，我 ctrl 从 UITextField 拖动到它的 viewController.h 文件并创建一个 IBAction 指定 Editing Did Begin 事件。然后我从另一个 UITextField 按住 ctrl-drag 到同一个 IBAction，但不是使用 Editing Did Begin，而是默认为 Editing Did End 事件。有没有办法将其更改为 Editing Did Begin？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:06:01.380

尝试右键单击（或按住 ctrl 单击） UITextField 并手动将正确的操作（小加号）拖动到 .h 文件中的代码。

# javascript - 在网站退出时打开新页面

> ID：15315789
> 
> 赞同：-4
> 
> 时间：2013-03-09T20:51:32.460
> 
> 标签：javascript

我想要的是有一个新页面或弹出在以下情况下被激活：

1.  我网站上的访问者关闭了浏览器
2.  我网站上的访问者在他的浏览器中键入了另一个 URL。

我有这个 JS，但它正在激活一个新网站 (www.newpage.com) 也用于内部链接。如何为内部链接禁用此操作？

```
<script type="text/javascript">
var leaving = true;
function checkUrl(href) {
    leaving = (((href.indexOf("http://") > -1) || (href.indexOf("www.") > -1)) && (href.indexOf(window.location.host) == -1));

}
function pop() {
    if(leaving) window.open("http://www.newpage.com");
}
window.onunload = pop;
var e = documents.getElementsByTagName("a");
for(var i=0;i<e.length;i++) e[i].onclick = "checkUrl(this.href)";
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:01:41.680

> 如何为内部链接禁用此操作？

使用特定链接`id`而不是根据标签名称获取所有锚点。

```
var e = documents.getElementById("anchorId");
e.onclick = "checkUrl(this.href)"; 
```

### *另外，*听评论。弹出式窗口是当前网络世界的大问题

当用户实际上试图离开时打开一个新窗口？？？这可能会使浏览者生气并且*永远不会返回网站*。**坏动作**

# java - 在屏幕上移动面板

> ID：15315795
> 
> 赞同：-1
> 
> 时间：2013-03-09T20:52:04.393
> 
> 标签：java, swing

我只是想通过单击它来一点一点地在屏幕上移动面板，我还想知道如何通过单击特定按钮来做到这一点？

```
private void ActorMouseClicked(java.awt.event.MouseEvent evt) {

    float x =Actor.getAlignmentX();
    float y=Actor.getAlignmentY();
    x = x+1;
    Actor.setAlignmentX(x);
    System.out.println(x);
    invalidate();
    validate();
    repaint();     
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:01:17.733

更改对齐方式不会移动组件。您需要调用`setLocation()`组件的方法来移动它。

您不需要 invalidate()、valiate() 或 repaint()，Swing 足够聪明，可以在组件位置更改时重新绘制组件。

按钮中的代码将相同。您创建一个 ActionListener，它具有对要移动的组件的引用，然后更改其位置。

此外，要在面板上随机移动组件，您将需要使用空布局。因此，您还将负责最初设置组件的边界。

这里有很多东西。如果您需要更多帮助，则需要发布[SSCCE](http://sscce.org/)以向我们展示您迄今为止所做的工作。

# .net - Regular expression ^.*(?=.*[\W]).*$ excluding underscore

> ID：15315802
> 
> 赞同：0
> 
> 时间：2013-03-09T20:52:36.403
> 
> 标签：.net, regex, vb.net

I have a regex expression to match atleast one special character, one digit, an uppercase character and a lowercase character

```
^.*(?=.*[\W]).*$ 
```

But the above expression is excluding _ (underscore). I did a workaround by using

```
^.*(?=.*[\W_]).*$ 
```

But I'm not sure which all other special characters this regex expression will exclude. Also please let me know why is [\W] excluding underscores?. Any ideas?

I'm using this expression in vb.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:54:45.123

[`\w` is letters, digits, and underscores](http://www.regular-expressions.info/reference.html). Thus, nothing else is being excluded. This may depend on the language/regex flavor, but it's pretty much the standard.

# ruby - Segfault Error in Sinatra After Upgrading to Ruby 2.0 Beta

> ID：15315809
> 
> 赞同：1
> 
> 时间：2013-03-09T20:53:13.000
> 
> 标签：ruby, segmentation-fault, sinatra, upgrade, ruby-2.0

I'm reporting this because I haven't found any other reports of code that worked previously, but now generates random Ruby segmentation fault errors after upgrading to the just-released `Ruby 2.0.0-p0`.

I have a Sinatra application that generates a string that an `.erb` template embeds in a `data-` tag in the DOM. As I stated, this worked just fine until I upgraded to Ruby 2.0\. With `2.0.0-p0`, It gives segmentation fault errors, usually after about 5 to 20 runs of the program. When I revert to Ruby 1.9, it works perfectly again and I can run the program hundreds of times without problems.

Here's an example of the results I get from these errors. This is the first few lines of the 'control frame information' section of the error listing:

```
-- Control frame information -----------------------------------------------
c:0061 p:0028 s:0315 e:000303 METHOD terrain_001.rb:509
c:0060 p:0012 s:0298 e:000296 BLOCK  terrain_001.rb:494 [FINISH]
c:0059 p:---- s:0294 e:000293 CFUNC  :each
c:0058 p:0008 s:0291 e:000290 BLOCK  terrain_001.rb:493 [FINISH]
c:0057 p:---- s:0288 e:000287 CFUNC  :each
c:0056 p:0023 s:0285 e:000284 METHOD terrain_001.rb:492
c:0055 p:0068 s:0281 e:000279 BLOCK  /home/john/Desktop/stra-dams/views/index.erb:3 [FINISH] 
```

The line numbers indicated as the location where the error occured are always in the following code, somewhere inside the definition for the hash `values{}` after the `encode` method has been called by the line `str << encode(hex)` in the `terrain_string` method:

```
def terrain_string
  str = ""
  @terrain = build_terrain
  @terrain.each do |t|
    t.each do |hex|
      str << encode(hex)
    end
  end
  str
end

# encode elevation values to a one-character code
def encode(elev)
  values = {
    :elev_10 => "a",
    :elev_20 => "b",
    :elev_30 => "c",
    :elev_40 => "d",
    :elev_50 => "e",
    :elev_60 => "f",
    :elev_70 => "g",
    :elev_80 => "h", 
```

Maybe after other people have tried the brand new Ruby 2.0 release, others will report similar errors. In the meantime, is there anything else I should be looking at that might help pinpoint the problem with the `2.0.0-p0` release?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:53:42.273

使用我在 Ruby 2.0.0 上的新开源框架，我得到了非常相似的东西。Ruby 2.0.0-p0 似乎有问题导致这些段错误，或者与常见 gem 的一些兼容性问题。它的随机性使得很难确定哪个库负责（如果有的话）。

当我的网络应用程序在多线程或分叉模式下运行时，我似乎最容易得到错误，例如使用 Phusion Passenger 的智能生成方法。我只是希望它会在 ruby​​ 2.0.0 的下一个补丁级别中得到修复。

请注意，实际的段错误发生在执行过程中的不同点。有时在 Nokogiri 中，有时在 ERB、SASS 或 Tilt 中。基本上，这是一个时间问题。我的应用程序很小，因此花费最多的时间在 Nokogiri 中渲染模板和后处理响应，因此大部分时间段错误都发生在此处。

# android - 取消并重新创建对象 AsyncTask 后未调用 publishProgress

> ID：15315814
> 
> 赞同：0
> 
> 时间：2013-03-09T20:53:56.097
> 
> 标签：android, android-asynctask

我正在尝试制作一个显示音乐进度的搜索栏，当您从搜索栏拖动拇指项目时，音乐进度会改变其实际值。所有逻辑都在异步任务中实现，问题是当我从 UIthread 取消我的异步任务并再次执行时，方法**publishProgress() 根本没有执行**。其余的方法（doinbackground、onpreexecute..）每次都能正常工作。任何人都知道为什么会这样？关于我缺少的线程的一些事情。谢谢！

```
seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

                @Override
                public void onStopTrackingTouch(SeekBar seekBar) {

                    mediaplayer.seekTo(actual);
                    update = new updateUI();
                    update.execute();
                }

                @Override
                public void onStartTrackingTouch(SeekBar seekBar) {
                    update.cancel(true);
                }

                @Override
                public void onProgressChanged(SeekBar seekBar,
                        int progress, boolean fromUser) {

                }
            }); 
```

异步任务：

```
 private class updateUI extends AsyncTask<Void, Integer, Void> {

    @Override
    protected Void doInBackground(Void... params) {     
        while (mediaplayer.isPlaying() || isCancelled()) {
            //code
            publishProgress(actual);
        }
        return null;
    }

    @Override
    protected void onPreExecute() {
//code

    }

    protected void onProgressUpdate(Integer... progress) {
//code
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:23:53.953

您选择了一种非常非传统的方法来解决这个问题。应该不惜一切代价避免使用这样的东西：

```
 while (mediaplayer.isPlaying() || isCancelled()) {
        //code
        publishProgress(actual);
    } 
```

人们使用`AsyncTask`应该在后台完成的事情，并且与“外部世界”没有太多互动。

如果你想制作一个媒体播放器，它应该由用户控制，但在后台工作，我建议你`Service`改用，将它绑定到你的`Activity`并来回发送数据来控制它。服务不会`Activity`消失，即使您退出界面部分，您仍然可以播放音乐。当你重新启动你的`Activity`，你可能会重新控制`Service`一次。

# android - 以编程方式在 MainActivity 中添加自定义 ImageView

> ID：15315823
> 
> 赞同：0
> 
> 时间：2013-03-09T20:54:57.793
> 
> 标签：android, imageview, android-imageview, android-custom-view

我想将我的自定义 ImageView 动态添加到已经包含 EditText 的 MainActivity 中，这样 EditText 下的整个空间都应该被 ImageView 覆盖。然后我会在 TouchEvent 时在 ImageView 上画一些东西，并相应地将一些文本输出到 EditText。但是我的方法没有任何效果。请帮忙。
*activity_main.xml*

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity"
android:id="@+id/RL"
 >

<EditText
    android:id="@+id/et1"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:ems="10"
    android:inputType="textMultiLine" />

</RelativeLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {
BondImage BI;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 
    BI = new BondImage(this);           
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

BondImage.java

```
public class BondImage extends ImageView{

Canvas c;
Paint p;
Bitmap bm;
float x, y;
public BondImage(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    bm = Bitmap.createBitmap(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT,Config.ARGB_8888);
    RelativeLayout rl = (RelativeLayout)findViewById(R.id.RL);
    rl.addView(this, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    c = new Canvas(bm);
    p = new Paint();
    p.setColor(Color.MAGENTA);
    x = y = 0;
}

public boolean onTouchEvent(MotionEvent me){
    c.drawCircle(x, y, 25, p);   //example
    this.setImageBitmap(bm);
    x ++; y ++;
            /*  and some other stuff  */
    return true;        
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:58:56.490

BI = new BondImage(this); 尚未添加到布局视图中，它没有显示

尝试

```
setContentView(BI); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:57:03.890

好的，最后我修改了我的方法（实际上这是我最初的想法，但我仍然对此不满意）
我在 EditText 下方创建了一个静态 ImageView 并将其用于处理 MotionEvents 和直接绘图。对于 MotionEvent，我必须标准化坐标，因为简单地使用 getX 和 getY 会给出相对于整个视图的坐标但我需要它们相对于 ImageView 。这种方法的缺点是它有点慢，这就是我为什么不使用它的原因。但是现在我没有其他方法可以在同一活动中同时处理 EditText 和自定义 ImageView。
任何建议将不胜感激。

# android - android中的片段-调用它们的Activity何时可用？

> ID：15315824
> 
> 赞同：0
> 
> 时间：2013-03-09T20:54:58.337
> 
> 标签：android, android-fragments

这是否正确：

```
public class DetailsFragment extends Fragment {

    private final Intent intent = getActivity().getIntent();
    // use intent here and there
} 
```

我知道在 servlet 中必须等待 init() 获得可用的上下文。android中的情​​况是什么？我们必须在 中做这样的事情`OnCreate`吗？作为一个附加问题 - 这种使用 final 字段是否令人不悦？它会破坏生命周期吗？

欢迎链接:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:58:18.810

> 这是否正确：

不，因为`getActivity()`将`null`在初始化步骤中返回。

> android中的情​​况是什么？

`getActivity()`肯定会返回`Activity`in `onCreateView()`、`onActivityCreated()`和以后的生命周期方法。它可能会返回`Activity`in `onCreate()`，但我不记得曾经`onCreate()`在片段上实现过，所以我不能肯定地说。

> 作为一个附加问题 - 这种使用 final 字段是否令人不悦？

好吧，由于这个不起作用（见上文），代码崩溃通常是不受欢迎的...... :-)

# apache - htaccess RewriteCond !-f 问题

> ID：15315833
> 
> 赞同：3
> 
> 时间：2013-03-09T20:55:48.020
> 
> 标签：apache, .htaccess, mod-rewrite

**更新：问题解决**
了几个小时后，我终于明白问题出在文件夹权限中（757 而不是 755）。

该死，我觉得自己像个白痴，但至少，问题解决了:)

谢谢大家！

* * *

我的 .htaccess 和 mod_rewrite 有一个奇怪的问题。

目前，我的根目录上有以下 .htaccess：

```
Options +FollowSymLinks
Options -MultiViews

RewriteEngine On

RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule . /index.php [NC,L] 
```

**问题是**：
我希望能够访问任何现有文件。

**即：** mysite.com/anydir/myfile.png -> 打开anydir/myfile.png
- mysite.com/anydir/script.php -> 打开anydir/script.php
- mysite.com/file.png -> 打开文件.png
- mysite.com/notadir/imnotafile -> 重写

但是，除了第二点之外，一切正常。我的`file.php`文件`test`夹中有一个，但是当我这样做时`mysite.com/test/file.php`，它会不断重写它，它不应该......

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T20:59:57.603

可能会做的伎俩：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

**更新 1**

在这部分代码：

```
RewriteRule ^index\.php$ - [L] 
```

`[L]`立即停止重写过程，不再应用任何规则。所以，

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule . /index.php [NC,L] 
```

不解释。

**更新 2：**

服务器将遵循符号链接：

```
Options +FollowSymLinks 
```

服务器将禁用多视图：

```
Options -MultiViews 
```

重写引擎将被启用：

```
RewriteEngine On 
```

重写的基本目录将是`/`：

```
RewriteBase / 
```

如果请求匹配一个不存在的文件，继续：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

如果请求匹配一个不存在的目录，继续：

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

在不敏感的情况下重写为`index.php`，并停止执行下一条规则：

```
RewriteRule index.php [NC,L] 
```

因此，请尝试以下操作：

```
Options +FollowSymLinks
Options -MultiViews

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule index.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T21:06:30.977

如果您只想摆脱 404 错误，您可以使用

```
ErrorDocument 404 index.php 
```

如果您想重写每个目录，我想您应该删除；

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

# ruby-on-rails - Rails 3.2 Sinatra 安装的应用程序 JSON 解析错误

> ID：15315834
> 
> 赞同：1
> 
> 时间：2013-03-09T20:55:57.530
> 
> 标签：ruby-on-rails, ruby, json, sinatra

我在 Rails 3.2.12 应用程序中安装了一个 sinatra 应用程序，该应用程序接受 JSON 帖子。问题是当其中一个字符串包含星号 (*) 或刺耳 (#) 符号时出现错误。这些是必需的，因为 USSD 服务会将数据推送到我的端点，其中将包含“*712#”。

我很肯定它与 * 和 # 有关，因为移除它们的接缝可以在不扔东西的情况下工作

```
MultiJson::LoadError at /ussdpush/requests
==========================================

> 399: unexpected token at '{"Mobile": "233208183783",   "SessionId":"8883ba8b1e7348b8b566b4b3396575c2", "ServiceCode":"712", "Type": "Initiation", "Message":"*712#", "Operator":"vodafone”, "Sequence":1}]' 
```

我怎样才能优雅地解析这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T13:45:46.133

找到了解决方案。JSON 有效负载中有一个不可打印的字符。

# javascript - 从 soundcloud 接收不同文件格式的流

> ID：15315840
> 
> 赞同：0
> 
> 时间：2013-03-09T20:56:46.510
> 
> 标签：javascript, audio, soundcloud

目前我正在使用 url 生成`src=""`一个如下所示的音频标签：

```
<audio src="http://api.soundcloud.com/tracks/81827374/stream?client_id=my_id" controls>
</audio> 
```

然而，firefox 和 opera 浏览器似乎不支持这种文件格式（mp3），因此我需要提供替代格式，我假设它看起来像：

```
<audio preload="auto" controls>
    <source src="some link for .wav file" />
    <source src="some link for .mp3 file" />
    <source src="some link for .ogg file" />
</audio> 
```

这可以通过 soundcloud api 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:21:31.623

不幸的是，我们目前不提供 MP3 以外的编码。

为了在不支持 MP3 的浏览器中播放音频（[Firefox 可能很快就会获得这种支持](https://stackoverflow.com/a/12203792/236135)），您需要使用诸如[Audio5JS](http://zohararad.github.com/audio5js/)或[SoundManager2](http://www.schillmania.com/projects/soundmanager2/)之类的库。

# jquery - 尝试在 Meteor 应用程序中使用 zclip

> ID：15315841
> 
> 赞同：1
> 
> 时间：2013-03-09T20:56:59.310
> 
> 标签：jquery, meteor, zclip

似乎无法在我的简单 Meteor 剪贴板应用程序中使用 zclip：http: [//commandc.meteor.com](http://commandc.meteor.com)

我认为我在流星如何加载 jquery、zclip 和复制脚本方面遗漏了一些东西，所以我将所有内容都移到了 html 中并使用了外部资源。尽管如此，复制不起作用。非常相似的代码在这里工作：http: [//jsbin.com/uladis/7/edit](http://jsbin.com/uladis/7/edit)

PS：我知道我在复制正确元素的文本而不是所有 p 标签时遇到了另一个问题。还不担心这个。

编辑：使用下面的 Akshat 方法会为每个副本实例提供此异常：

`Exception from Meteor._atFlush: TypeError: Object [object Object] has no method 'zclip' at Object.Template.copy.rendered (http://localhost:3000/command-c.coffee.js?78eccd42fde3d566da961e73c1ab9f4ad83a4e26:18:35) at Spark.createLandmark.rendered (http://localhost:3000/packages/templating/deftemplate.js?91fdd4353cca922f7a59ff593d000211c2857c84:125:44) at http://localhost:3000/packages/spark/spark.js?c202b31550c71828e583606c7a5e233ae9ca50e9:386:32 at Array.forEach (native) at Function._.each._.forEach (http://localhost:3000/packages/underscore/underscore.js?47479149fe12fc56685a9de90c5a9903390cb451:79:11) at http://localhost:3000/packages/spark/spark.js?c202b31550c71828e583606c7a5e233ae9ca50e9:384:7 at http://localhost:3000/packages/deps/deps-utils.js?f3fceedcb1921afe2b17e4dbd9d4c007f409eebb:106:13 at http://localhost:3000/packages/deps/deps.js?1df0a05d3ec8fd21f591cfc485e7b03d2e2b6a01:71:15 at Array.forEach (native) at Function._.each._.forEach (http://localhost:3000/packages/underscore/underscore.js?47479149fe12fc56685a9de90c5a9903390cb451:79:11)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:19:24.737

我从来没有使用过 Zclip，所以希望对我有帮助，包括其他正确的元素问题：

使用时， `<.. id='..'`您需要确保每个都是唯一的，否则 DOM 会中断：而不是`<p id="copy">`使用类似的东西`<p id="{{_id}}" class="copy">`

我尝试访问模板数据`this.data`

```
Template.copy.rendered = function() {
       $('#' + this.data._id).zclip({
           path:"http://www.steamdev.com/zclip/js/ZeroClipboard.swf",
           copy:this.data.name
       });
    }
} 
```

所以每次复制点击作品都使用这种风格的模板

HTML：

我已拆分列表，以便副本位于其自己的模板中，因此上面呈现的函数可以获得自己的[数据上下文](http://docs.meteor.com/#template_data)

```
<template name="list">
    {{#each copies}}
       {{>copy}}
    {{/each}
</template>

<template name="copy">
    <p id="{{_id}}" class="copy">{{name}}</p>
</template> 
```

**编辑**

1）使用 Meteor 添加 JQuery 而不是`<script>`使用流星包：在您的项目目录中添加 JQuery：

```
meteor add jquery 
```

2) 将[http://www.steamdev.com/zclip/js/jquery.zclip.min.js](http://www.steamdev.com/zclip/js/jquery.zclip.min.js)中的文件添加到项目中的文件夹中`client/lib`

发生错误是因为 zclip 尚未加载。

# android - android maps v2 提供播放服务

> ID：15315844
> 
> 赞同：1
> 
> 时间：2013-03-09T20:57:15.960
> 
> 标签：android, android-maps-v2, google-play-services

我已经成功运行了 android maps API v2，但后来我尝试测试我是否没有 Google Play 服务，应用程序是否会提供安装它。

所以我卸载了 Google Play 服务，我的应用程序现在崩溃了。它没有像在示例应用程序中那样提供安装 Google Play 服务。在 LogCat 它的打印`Google play services is missing`和之后`NullPointerException`。在示例应用程序中，我没有看到任何处理该问题的代码，我猜它包含在地图库中。我正在使用`SupportMapFragment`，但是在示例应用程序中也使用了它。

如何使应用程序提供安装播放服务，如其在示例应用程序中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T21:42:30.123

你可以使用这个`GooglePlayServicesUtil`类。您的代码将如下所示：

```
int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(context);
if (resultCode == ConnectionResult.SUCCESS) 
{
    // Google Play Services installed correctly, continue
} 
else if (resultCode == ConnectionResult.SERVICE_MISSING ||
         resultCode == ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED ||
         resultCode == ConnectionResult.SERVICE_DISABLED) 
{           
    // Google Play Services not installed / too old / disabled.
    // Show dialog to install or update
    Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, this, 1);
    dialog.show();
} 
else 
{
    // Something else went wrong, handle this yourself
} 
```

该`getErrorDialog`方法将显示将用户定向到 Google Play 商店以安装或更新 Google Play 服务的对话框。

# javascript - Firefox/XUL：显示的 DOM 元素坐标

> ID：15315847
> 
> 赞同：0
> 
> 时间：2013-03-09T20:57:36.877
> 
> 标签：javascript, firefox, firefox-addon, xul, xulrunner

我正在开发 Firefox 扩展。对于一些统计数据，我需要[浏览器](https://developer.mozilla.org/docs/XUL/browser)内 DOM 元素的实际**显示**坐标。

我可以获得以下坐标：

1.  通过调用视口内所需的 DOM 元素[`getBoundingClientRect()`](https://developer.mozilla.org/docs/DOM/element.getBoundingClientRect)（这考虑到了滚动，完美）。
2.  Window ( `ChromeWindow`) 本身通过检查它的`screenX`&`screenY`属性。

但是当我调用[browser](https://developer.mozilla.org/docs/XUL/browser)时，我得到的坐标不包括系统绘制的窗口框架和边框的大小（在 Mac 上测试）`getBoundingClientRects()`。如何为不同的操作系统独立计算它们的（边框和框架）大小？

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:50:28.050

[window.screenX](https://developer.mozilla.org/en-US/docs/DOM/window.screenX)或[window.mozInnerScreenX](https://developer.mozilla.org/en-US/docs/DOM/window.mozInnerScreenX)怎么样？分别为screenY等。

如果这不起作用，您可能会使用[js-ctypes](https://developer.mozilla.org/en-US/docs/Mozilla/js-ctypes)来调用操作系统函数，我猜它可以让您计算边框大小。在 Windows 上，您将使用 GetWindowRect 和 GetClientRect，如该[线程](https://stackoverflow.com/questions/431470/window-border-width-and-height-in-win32-how-do-i-get-it)中所述。虽然不知道这在 OSX 中是如何实现的，但肯定有办法......

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:28:23.550

在 Firefox 的源代码中发现[了不可能的](https://hg.mozilla.org/mozilla-central/annotate/50d25e083421/browser/base/content/browser.js#l917)评论。

# php - 在输入中阻止 HTML 和 javascript 标签

> ID：15315856
> 
> 赞同：-3
> 
> 时间：2013-03-09T20:58:54.393
> 
> 标签：php, html, input, tags

如何阻止文本输入中的所有 html 和 javascript 标签？

我的代码是：

```
$pav = stripslashes($_POST['pavadinimas']);
$pav2 = mysql_escape_string($pav); 
```

但它不会阻止 html 和 javascript 标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:00:42.843

删除这两个调用：`stripslashes()`在这里没有什么好处，`mysql_real_escape_string()`只能在将数据插入到 mySQL 查询之前使用。

执行任[`htmlspecialchars()`](http://php.net/htmlspecialchars)一操作（如果您想保留 HTML 源代码，但使标签可见）或[`strip_tags()`](http://php.net/strip_tags)（仅消除 HTML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:00:59.390

您必须使用 htmlspecialchars() 或 strip_tags()（用于删除而不是转换）

```
$html = "<b>Test</b> <strong>Lol</strong>";

echo htmlspecialchars($html); 
```

[演示](http://codepad.viper-7.com/bpIqOK)

# php - 上传后文件名显示不正确 - PHP

> ID：15315861
> 
> 赞同：2
> 
> 时间：2013-03-09T20:59:19.173
> 
> 标签：php, windows, file-upload, encoding

我正在使用 xampp 开发 Win7 64。我正在上传一个文件名带有希腊字符的文件。文件名存储不正确，例如 ελληνικά.xlsx 存储为ΞµΞ»Ξ»Ξ·Ξ½ΞΉΞΊΞ¬.xlsx。

我想它必须与编码有关。

在我的 html 中，我正在使用

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我的javascript在下面给出

```
 function handleFileSelect(evt) { 
  var output=[];

  if (evt.target.files.length === 0 ) exit();
  var f = evt.target.files[0];
  if ($.inArray(f.name.split('.').pop(), ['xls', 'xlsx']) === -1 ) {
    $('#output').html('Wrong file type. Only Excel files are valid.');
    exit;
  }

  ans = fileunit(f.size);    
  output.push('<li><strong>', f.name, ' - ',
              ans[0].toFixed(2), ans[1], '</li>');
  $('#list').html('<ul>' + output.join('') + '</ul>');

  var fd = new FormData();
  fd.append('file', evt.target.files[0]); 

  $.ajax({
    url: 'uploaddata/file',
    data:fd,
    processData: false,
    contentType: false,
    type: 'POST',    
    success: function(data){
      $('#output').html(data);},
    error: function(data)  {
      $('#output').html(data);}    
  });
} 
```

服务器代码如下

```
 public function upload() {
// Checking upload error code
  if ($_FILES["file"]["error"] > 0)
    {
       echo file_upload_error_message($_FILES["file"]["error"]);
       return;
    }

  //Checking uplaod directory  
  $uploadDirectory = 'uploads' . DIRECTORY_SEPARATOR;
  if(!is_dir($uploadDirectory))
    {
      @mkdir ($uploadDirectory, 0766, true);
    }
  if(!is_dir($uploadDirectory))
    {
      echo 'Server error. Impossible to create the upload folder.';
      return;
    }
  elseif(!is_writable($uploadDirectory))
    {
      echo 'Server error. Upload directory is not writable.';
      return;
    }  

  //Checking if file is too big  
  if ($_SERVER['REQUEST_METHOD'] == 'POST' && empty($_POST) &&
         empty($_FILES) && $_SERVER['CONTENT_LENGTH'] > 0) 
    {
       $error = 'Server error. File is too large, cannot upload.';
       echo $error;
       return;
    }

  $file_name = $_FILES["file"]["name"];
  if (!move_uploaded_file($_FILES["file"]["tmp_name"], $uploadDirectory.$file_name))
    {
      echo 'Server error. Error moving uploaded file from temp dir to upload dir';
      return;
    }
   echo $file_name . ' was uploaded successfully.';
    } 
```

我在 php 文件中放置了一个断点并检查
了 $_FILES[file][name]。
文件名似乎是正确的。文件内容上传也没有错误。

我猜当文件从临时目录移动到上传目录时发生了一些事情，但我没有想法:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-12T01:59:49.407

我对西班牙语字符也有同样的问题。就我而言，我使用了[utf8_decode()](http://php.net/manual/en/function.utf8-decode.php)函数并且它有效！

尝试

```
$file_name = utf8_decode($file_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:22:12.583

正如您所说的文件名正确显示（希腊字母），您只需将它们转换为`utf-8`. 您可以简单地使用[mb_convert_encoding](http://php.net/manual/en/function.mb-convert-encoding.php)。

```
$file_name = mb_convert_encoding($_FILES[file][name], 'utf-8'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T21:08:40.547

Perhaps you need to `urlencode()` the name on the server side, and then `urldecode()` for display. Your server is just not handling Unicode properly.

# android - 为什么Andengine重启Eclipse后会报错？

> ID：15315862
> 
> 赞同：0
> 
> 时间：2013-03-09T20:59:27.063
> 
> 标签：android, eclipse, andengine

首先，我正在使用 ADT v20.0.3 运行 Eclipse Juno。我正在按照[本教程](https://jimmaru.wordpress.com/2012/04/23/setting-up-andengine-gles2-0/)进行软件更新。

使用 URL 将 Andengine 作为 GIT 导入后，实际上出现了数千个错误。我修复了它，将合规性设置更改为 1.6。所有错误均已删除。我导入了 Andengine 示例，它显示了数千个几乎相同的错误。所以我将合规性更改为 1.6 做了一个干净但仍然相同的错误。我重新启动了 Eclipse，现在 Andengine 库显示了一个小的红色 x，但没有告诉我原因，也没有任何改变。

在谷歌或这里没有找到任何有用的东西。我想知道这是否只是我的电脑在做这件事，还是真的有什么我做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:32:00.423

[AndEngine](https://github.com/nicolasgramlich/AndEngine)以及所有[扩展](https://github.com/nicolasgramlich/AndEngine#extensions)都托管在[github.com/nicolasgramlich/AndEngine](https://github.com/nicolasgramlich/AndEngine)上。

仅供参考：不说你有什么编译错误很难帮助。

没有诸如**Andengine_src**或**Andengine1_src 之类**的东西。只需将 AndEngine 作为 Android 库项目添加到您的项目中即可。

# c# - Unity 对象在 fetch 之后已经被销毁

> ID：15315863
> 
> 赞同：0
> 
> 时间：2013-03-09T20:59:48.360
> 
> 标签：c#, unity3d

我有一个循环来从列表中搜索特定对象，然后我将它存储在全局变量中。但是当我尝试获取它时它总是为空并且游戏崩溃。

```
SpecialItem pickedItem; // (global variable)

void OnGUI()
{
    for loop (all objects) // Idictionary<SpecialItem, string>
    {
        pickedItem = Instantiate(myItem) as SpecialItem;
        Debug.Log("this->" + pickedItem.name.ToString());  // ERROR
    }

} 
```

> Unity 错误是：MissingReferenceException：“SpecialItem”类型的对象已被破坏，但您仍在尝试访问它。

我认为这是因为 foreach 所以我用普通的 for 循环替换它

有人可以解释一下为什么会这样吗？可以做些什么来解决？我最初的想法是使用对象本身，但似乎我做不到，所以我尝试制作一个副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:05:35.667

您确定该对象是 SpecialItem 类型吗？

如果对象无法转换为类型，“as”关键字将返回 null。

Instantiate(myItem) 的签名是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:53:09.137

问题不在我提交给 stackoverflow 本身的代码中。

我有一个物理对象，我将 SpecialItem 脚本附加到该对象上。当我将它选入库存时，我使用的是 Destroy(gameObject)。

出于某种奇怪的原因，我仍然能够访问其中的一些变量，例如“纹理”、“数量”或“插槽”。但是，一旦我尝试访问“名称”，它就崩溃了，因为该对象已经被破坏了。

所以我更换了：

销毁（游戏对象）；

为了

gameObject.SetActive(false);

错误消失了。

# javascript - 如何读取从 javascript post 调用的 python 脚本中的数据

> ID：15315867
> 
> 赞同：2
> 
> 时间：2013-03-09T20:59:57.913
> 
> 标签：javascript, jquery, python

当单击按钮时，我想将数据从 javascript 传递到名为 test.py 的 python 脚本。

该网页包含以下脚本：

```
<script>
$(document).ready(function(){
  $("button").click(function(){
    $.post("/cgi-bin/test.py",
   { name: "Zara" };
    });
  });
});
</script>

<button type="submit">Run</button> 
```

这是在网页的同一服务器中运行的 test.py：

```
#!/usr/python
print('Content-Type: text/html; charset=utf-8\n')
import sys
file = open('/var/www/cgi-bin/temp.txt','w')
file.write(sys.argv[1])
file.close() 
```

我预计 temp.txt 包含名称 Zara。但是 temp.txt 是空的。

所以我的问题是：

python脚本如何从javascript获取参数名称？我可以使用 sys.argv 还是需要另一个 python 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:44:10.847

JavaScript 发送一个常规的 HTTP Post 请求，python 脚本可以将其解析为[常规的 CGI 脚本](http://docs.python.org/2/library/cgi.html)：

```
#!/usr/python
import cgi
print('Content-Type: text/html; charset=utf-8\n')
form = cgi.FieldStorage()

if 'name' in form:
    with open('/var/www/cgi-bin/temp.txt','w') as file:
        file.write(form['name']) 
```

# mongodb - mongodb 分片键哈希算法

> ID：15315868
> 
> 赞同：5
> 
> 时间：2013-03-09T21:00:19.157
> 
> 标签：mongodb, sharding

我找不到有关 mongodb 用于收集或分片键的算法的文档。

任何人都可以提供帮助或发布参考吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-02T09:57:46.090

如果您对一般索引的工作方式更感兴趣，请查看有关内部结构的演示文稿：[http](http://www.mongodb.com/presentations/storage-engine-internals) ://www.mongodb.com/presentations/storage-engine-internals或这个[http://www.mongodb.com/presentations/ mongodbs-存储引擎-bit-bit](http://www.mongodb.com/presentations/mongodbs-storage-engine-bit-bit)

由于单个分片对集群的整个结构知之甚少，它在内部使用相同的索引算法，只是有一个元数据层知道与特定分片相关的数据部分。

有一些特殊情况，在本文档中进行了描述：http: [//docs.mongodb.org/manual/core/indexes/](http://docs.mongodb.org/manual/core/indexes/) 所以在上面的演示文稿中没有以这种方式涵盖的是地理空间索引和特殊的散列索引（[DOCS](http://docs.mongodb.org/manual/tutorial/create-a-hashed-index/)）。这个也可以用作分片键并称为散列索引，在这种情况下，分片是基于散列的分片。检查[这个](http://blog.mongodb.org/post/47633823714/new-hash-based-sharding-feature-in-mongodb-2-4)和[这个](http://docs.mongodb.org/manual/tutorial/shard-collection-with-a-hashed-shard-key/)

关于用于此的哈希算法是：此文件中使用的 md5： [https ://github.com/mongodb/mongo/blob/master/src/mongo/db/hasher.cpp](https://github.com/mongodb/mongo/blob/master/src/mongo/db/hasher.cpp)

在这里实现： [https ://github.com/mongodb/mongo/blob/master/src/mongo/util/md5.cpp](https://github.com/mongodb/mongo/blob/master/src/mongo/util/md5.cpp)

目前仅适用于单个字段作为分片键，至少这可以从[https://github.com/mongodb/mongo/blob/master/src/mongo/db/index/hash_access_method.cpp](https://github.com/mongodb/mongo/blob/master/src/mongo/db/index/hash_access_method.cpp)源中的评论中读出文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T00:14:14.680

关于分片键的官方文档是

[http://docs.mongodb.org/manual/core/sharded-clusters/](http://docs.mongodb.org/manual/core/sharded-clusters/)

如果您的“算法”意味着集群，您可以通过以下方式获得帮助：

[http://docs.mongodb.org/manual/core/sharded-cluster-operations/](http://docs.mongodb.org/manual/core/sharded-cluster-operations/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-10T00:55:02.230

您现在可以使用[convertShardKeyToHashed](https://docs.mongodb.com/manual/reference/method/convertShardKeyToHashed/#convertShardKeyToHashed)将键从[4.0 版转换为其哈希值](https://docs.mongodb.com/manual/release-notes/4.0/)

从这个参考，浏览源代码并阅读它的实现

# javascript - 突出显示匹配的表达式 EXCEPT 空格

> ID：15315869
> 
> 赞同：0
> 
> 时间：2013-03-09T21:00:21.033
> 
> 标签：javascript, regex

我有一个 Ajaxsearch（如 Google），您可以在其中输入一个单词，并在底部自动完成表单，匹配的关键字会突出显示。问题是空白也被突出显示（被赋予强标签），这增加了空白的宽度。

我必须修改以下函数，但我不知道这是做什么的。

```
highlight: function(value, term) {
    return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\\$1") + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:58:44.740

已解决：刚刚添加修剪以防止突出显示尾随空格。

```
highlight: function(value, term) {
return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + trim(term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\\$1")) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>"); 
```

},

# iphone - 无法导航到另一个 ViewController

> ID：15315875
> 
> 赞同：0
> 
> 时间：2013-03-09T21:00:50.743
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller, uinavigationbar

我是新手。ViewController.m 中有一个按钮。当我按下按钮时，它必须导航到 SecondViewController 但 SecondViewController 没有出现。

并且在导航栏的SecondViewController处，会有“Back”按钮返回ViewController。你能告诉我我错过了什么吗？

视图控制器.m：

```
-(IBAction)buttonPressed:(id)sender
{

    EnglishViewController *v = [[[EnglishViewController alloc]
                                initWithNibName:@"EnglishViewController"
                                bundle:nil]
                               autorelease];

    [self.navigationController pushViewController:v animated:TRUE];
} 
```

AppDelegate.m:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**解决方案（取决于@George 的回答）：**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    UINavigationController *navCon =[[[UINavigationController alloc]
                                      initWithRootViewController:self.viewController]
                                     autorelease];

    self.window.rootViewController =navCon;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:14:17.093

当您创建您`ViewController`的内部时，`AppDelegate.m`您必须将其包围`navigationController`以使其工作

像这样的东西：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = navigation;
    [navigation release];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:07:44.593

首先要检查的几件事：你的`-buttonPressed`方法真的被调用了吗？您是否正在获取并将非零值传递给`-pushViewController:animated:`？当您拨打电话时实际上是`self.navigationController`非零？

您的代码看起来很好。

# oop - 超类和超类的区别以及子类和子类的区别

> ID：15315876
> 
> 赞同：3
> 
> 时间：2013-03-09T21:00:52.937
> 
> 标签：oop, class, polymorphism

它们是可互换的术语吗？你能给出正式的定义和例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T11:46:48.043

两个术语（超类和超类型）是相关的，但它们并不完全可以互换。

只有**类**有**超类**，而其他**分类器**有**超**类。由于 Class 也是 Classifier，所以超类始终是超类型（因为超类重新定义了分类器之间的一般关联），但反之则不然。

例如，`long`Java中的*原始类型*[被定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10)为. 由于原始类型不是类，因此不是.*`int``long``int`*

 *再比如：在UML中，组件和接口不同于类（都是分类器），那么说“组件的超类”而不是“组件的超类”是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:51:03.313

说 A 是 B 的子类只是断言 A 是使用继承形成的。说 a 是 B 的子类型，就是断言 A 保留了 B 中所有操作的含义。

可以形成不是子类型的子类；并且（至少在某些语言中）形成不是子类的子类型。*

# java - Java main 方法是否启动了无限的while循环？

> ID：15315885
> 
> 赞同：0
> 
> 时间：2013-03-09T21:02:00.793
> 
> 标签：java, multithreading, main-method

这个问题可能是一个非常新手的问题，但它让我很困惑。我正在研究 Java 网络，我对该方法的后端感到好奇`main`。

```
public static void main(String[] args) throws IOException 
```

我知道`main`开始一个线程？因此，即使我有一个简单的“Helloworld”程序，在您关闭整个 IDE 或系统之前，线程仍然保持活动状态？

这是否意味着我可以在 main 方法中包含任何我想永远运行的任意代码（例如，心跳传感器检查或其他一些检查）。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T21:03:50.367

不，JVM 启动一个线程（主线程）并在该线程内执行您的 main 方法。一旦 main 方法返回，如果没有其他非守护线程在运行，则 JVM 退出。

您可以在 main 方法中运行无限循环，并且 JVM 将永远不会退出（除非它被外部杀死）。

# vps - VPS 和专用服务器的功能和相似之处？

> ID：15315886
> 
> 赞同：0
> 
> 时间：2013-03-09T21:02:06.170
> 
> 标签：vps, dedicated

假设我正在开发一个 Web 应用程序，我需要在其中向用户显示服务器上剩余的磁盘空间。所以我使用'disk_free_space' php 函数来获取该信息。现在这将在我的本地机器（我正在开发的机器）上运行，它将在专用服务器上运行（与我自己的本地机器相同）。我不知道它是否可以在 vps 上运行，而且我知道它不会在共享服务器上运行。（通过工作我的意思是显示正确的数量）。所以我的问题是，如果我在本地机器上开发我的应用程序，它就像一个专用服务器，如果我在 VPS 上部署脚本会遇到这样的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:09:29.017

`disk_free_space`返回文件系统上剩余的可用空间量。

在专用服务器和 VPS 上，您可以完全访问服务器文件系统，从而返回正确的数量。但是，在共享主机上，您没有自己的文件系统，因此只能访问 PHP 认为留在磁盘上的一小部分内容。

# c# - 字典 > 复制到另一个词典

> ID：15315887
> 
> 赞同：2
> 
> 时间：2013-03-09T21:02:12.253
> 
> 标签：c#, dictionary

我在将数字的值复制到另一个字典时遇到问题。一切顺利，但只要我将值从 List 添加到另一个字典，如果键已经存在。我不明白如何将相同的值添加到字典中以及通过。

```
 foreach (KeyValuePair<string, List<int>> record in dictonaryUnStem)

        {
            arrayWord = record.Key.ToCharArray();
            st.add(arrayWord);
            stemWord = st.stem();

            if (!dictonaryStem.ContainsKey(stemWord))
            {
                dictonaryStem.Add(stemWord, record.Value);
            }
            else
            {
                foreach (int i in record.Value)
                {
                    dictonaryStem[stemWord].Add(i);
                }
            }
        } 
```

当您从给定的键整数添加到另一个字典时。我们加入我的记录，整数字典也UnStem。这是完全不合逻辑的。

```
stemWord = st.stem() 
```

给我根词，它是第一本词典中的关键词。在列表中存储了该单词在文本中的位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T21:06:23.203

问题在这里：

```
dictonaryStem.Add(stemWord, record.Value); 
```

您正在将字典值设置为原始列表的引用（*是*`List<T>`引用类型） - 因此，当您将项目添加到该列表时，它也会显示在字典中 - 两者都引用同一个列表。

相反，您可以强制为您的字典创建一个新列表：

```
dictonaryStem.Add(stemWord, record.Value.ToList()); 
```

# r - R中有docblox吗？

> ID：15315888
> 
> 赞同：0
> 
> 时间：2013-03-09T21:02:15.223
> 
> 标签：r, rstudio

在 Netbeans 中编写 PHP 时，只要我为我的函数和类提供“docblox”，Netbeans 就会显示一个函数需要什么参数，它将返回什么，以及每当我在其他地方调用它时的简短描述。使用 PHPDocumentor2 等工具自动生成 API 文档还有一个好处。R中有任何等价物吗？目前我正在 RStudio 中开发。

PHP 中的 docblox 示例：

```
/**
 * This is the description of some function
 *
 * @param string $foo A foo string
 * @return string Foo string in all caps
 */
 function cap_foo($foo) { return strtoupper($foo); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:04:12.617

docblox 是注释部分吗？如果是这样，请检查[roxygen2](http://cran.r-project.org/web/packages/roxygen2/index.html)

# android - Android片段不显示任何内容

> ID：15315890
> 
> 赞同：0
> 
> 时间：2013-03-09T21:02:36.217
> 
> 标签：android, webview, android-fragmentactivity

我确定我做错了。这是我第一次尝试将 Fragment 用于任何事情。我有一个非常简单的应用程序。我的标签中没有出现任何内容。

我敢肯定这是某个地方的愚蠢错误。有人有想法么？

这是web.xml：

接下来，这里是应该显示这个 webview 的主要活动的代码： public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

```
 SectionsPagerAdapter mSectionsPagerAdapter;

ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        actionBar.addTab(
                actionBar.newTab()
                        .setText(mSectionsPagerAdapter.getPageTitle(i))
                        .setTabListener(this));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new WebViewFragment();
        Bundle args = new Bundle();
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 4;
    }
}

public static class WebViewFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View mainView = (View) inflater.inflate(R.layout.web, container, false);
        WebView webView = (WebView) mainView.findViewById(R.id.webview);
        webView.loadUrl("http://www.google.com");

        return mainView;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:20:51.140

好吧，这很尴尬。显然，如果您忘记为互联网指定权限，则 WebView 不会做太多事情。我希望 Android 在您提出无权请求时出错。在发帖之前，我看了 3 个小时。应该再等10分钟！

# mongodb - 如何确定是否在 MongoDB 中完成了完整的集合扫描

> ID：15315891
> 
> 赞同：12
> 
> 时间：2013-03-09T21:02:45.413
> 
> 标签：mongodb, indexing

我知道使用`.explain()`MongoDB 查询的输出，您可以查看 和 之间的区别`n`，`nscanned`以确定是否已执行完整集合扫描，或者是否已使用索引。[文档](http://docs.mongodb.org/manual/reference/explain/)状态

> 您希望`n`并`nscanned`尽可能接近价值。

[凯尔·班克 (Kyle Banker) 的优秀著作 MongoDB in Action](http://www.manning.com/banker/)说了类似的话：

> 一般来说，您希望 和 的值`n`尽可能`nscanned`接近。在进行集合扫描时，几乎不会出现这种情况。

显然，这些陈述都不是关于比较`n`和的确定性`nscanned`。什么比例的差异通常可以推断出完整的集合扫描 - 10%、20%、30%+？是否有任何其他方法可以检查是否已完成完整的收藏扫描？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-21T22:18:00.897

上面的答案并不完全正确。

在使用索引进行排序但不能帮助匹配标准的情况下，还将执行集合扫描。在这种情况下，将扫描所有文档（按索引顺序）以查找符合查找条件的文档。另一种可能性是可能存在部分集合扫描，其中索引能够根据一个或多个查找条件缩小文档子集，但仍需要扫描此文档子集以查找完整查找条件的匹配项。

在这些情况下，explain 将显示正在使用的索引而不是 BasicCursor。因此，虽然在 explain 中存在 BasicCursor 表示正在执行集合扫描，但没有它并不意味着没有执行集合扫描。

此外，在使用索引进行排序的地方，使用 --notablescan 也无济于事。因为查询只会在不使用索引的情况下引发异常。它不查找索引是否用于匹配或排序。

确定是否执行集合扫描的唯一万无一失的方法是将索引键与查询中的匹配条件进行比较。如果查询优化器选择的索引（并在说明中显示）无法回答查询匹配条件（即不同的字段），则需要进行集合扫描。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-09T21:20:18.967

> 什么比例的差异通常可以推断出完整的集合扫描 - 10%、20%、30%+？

这是不可能的，但如果它真的很重要，那么你可能会看到平均发现的性能下降高达 200%；所以是的，你会注意到的。它与这方面的任何其他数据库非常相似。

> 是否有任何其他方法可以检查是否已完成完整的收藏扫描？

您可以使用一个标志启动 MongoDB，告诉它永远不要进行全表扫描，在这种情况下，它会在尝试执行以下操作时抛出异常：http: [//docs.mongodb.org/manual/reference/mongod/#cmdoption- mongod--显着扫描](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--notablescan)

但是最好的方法是在`explain`这里使用，您将知道查询何时不使用索引并被迫从磁盘或内存扫描整个集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T22:19:14.503

明确的答案在 explain() 输出的第一行。

如果它说光标类型是“BasicCursor”，那么它就是一个简单的集合扫描。

否则它会说它使用什么类型的索引和索引的名称，即“BtreeCursor *id* ”

请参阅此处的文档：http: [//docs.mongodb.org/manual/reference/explain/#explain-output-fields-core](http://docs.mongodb.org/manual/reference/explain/#explain-output-fields-core)以获得相同的解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-06T15:32:59.120

严格来说，似乎只有当游标是基本游标时才进行全表扫描。

如果存在 btree 游标，则可能仍然有效地进行了全表扫描以查找记录，而该 btree 索引仅用于排序。但是，如果查看 explain 的输出，您是否真的可以确定这是一次全表扫描，而无需计算记录并查看现有索引。

如果查询效率不高并且需要或应该提示更好的索引，那么在问题的上下文中会很清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-19T06:35:14.040

您可以检查说明的阶段（来自 MongoDB 文档）：

阶段是对操作的描述；例如

-COLLSCAN 用于集合扫描
-IXSCAN 用于扫描索引键
-FETCH 用于检索文档
-SHARD_MERGE 用于合并来自分片的结果

# javascript - 非动态添加元素上的奇怪 CSS 错位

> ID：15315892
> 
> 赞同：2
> 
> 时间：2013-03-09T21:02:51.540
> 
> 标签：javascript, jquery, html, css

我暂时为我的网站创建了一个临时快照：http: [//hunpony.hu/today/](http://hunpony.hu/today/?sidebar=open&lang=en)

问题是，在右侧面板中，第一个 div`div#randomTile.tile`有点放错了位置。

![在此处输入图像描述](../Images/9780833b6747045614a6b050af781908.png)

我不知道为什么。以下是一些相关的 HTML、CSS 和 JavaScript：

```
<div id="slideoutWrapper">
    <div id="slideout">
        <div id="slideoutTitle">
            <h1 class="dyn"></h1>
        </div>
        <div id="slideoutInner">
            <div id="randomTile" class="tile" style="">
                <img class="small" src="img/small/vs.svg">
                <h4>Random<br>&nbsp;</h4>
            </div>
        </div>
    </div>
</div> 
```

`...`在 CSS 意味着供应商前缀属性中，我删除了它们，因为它使代码块太长。

```
#slideoutInner .tile {
    cursor: pointer;
    margin:.5em;
    text-align:center;
    display:inline-block;
    width:95px;
    text-overflow: ellipsis;
    ...
    transition-duration: 0.3s;
    box-shadow:0;
    height:127px;
    white-space:nowrap;
    ...
    filter: contrast(100%);
}
#slideoutInner .tile:hover { box-shadow:0px 0px 15px; ...; filter: contrast(150%) }
#slideoutInner .tile .small {
    height:75px;
    width:75px;
    margin:5px auto;
    display:block;
}
#randomTile { color:#777; background-color: #777 }
#slideoutInner .tile h4 {
    line-height: 20px;
    padding:0;
    margin:0px auto 2px;
    display:block;
    text-shadow:none;
    color:white;
} 
```

一些引用的变量太长，这里就不放了，主要的js文件在[**这里**](http://hunpony.hu/today/.snapshot-130309/js/init.js)，所有的代码都在这里。

```
$('#randomTile').on('click',function(){
    changeBGImage(rndCharNumber);
}).hover(function(){
    rndCharNumber = randomize(0,backImage.length-1);
    $(this).css({color:colorz[rndCharNumber],backgroundColor:colorz[rndCharNumber]});
    $(this).find('img.small').attr('src','img/small/'+backImage[rndCharNumber]+'.svg');
    $(this).find('h4').html((longNames[rndCharNumber].indexOf(' ') != -1) ? longNames[rndCharNumber].split(' ').join('<br>') : longNames[rndCharNumber]+'<br>&nbsp;');
},function(){
    $(this).css({color:'',backgroundColor:''});
    $(this).find('h4').html(locStr.randomTile[locale]);
    $(this).find('img.small').attr('src','img/small/vs.svg');
});

$(document).ready(function(){
    ...
    for (i=0;i<backImage.length;i++){
        imgArray.push('<img class="small" src="img/small/'+backImage[i]+'.svg">');
    }

    for (i=0;i<longNames.length;i++){
        h4Array.push('<h4>'+((longNames[i].split(' ').join('<br>').indexOf('<br>') != -1) ? longNames[i].split(' ').join('<br>') : longNames[i]+'<br>&nbsp;')+'</h4>');
    }

    for (i=0;i < imgArray.length;i++){
        htmlArray.push('<div class="tile" style="color:'+colorz[i]+';background-color:'+colorz[i]+';">'+imgArray[i]+h4Array[i]+'</div>');
    }

    $('#slideoutInner').append(htmlArray.join(''));
    ...
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:07:16.343

The issue is caused by white-spaces, they affect inline elements (`.tile` blocks). To fix it add `font-size: 0` to `#slideoutInner` (parent container):

```
#slideoutInner {
    overflow-x: hidden;
    text-align: center;
    font-size: 0;
} 
```

and change `margin` of the `#slideoutInner .tile` rule, make it e.g. `4px`. It will fix your problem.

# html - 更改 html 元素值

> ID：15315896
> 
> 赞同：0
> 
> 时间：2013-03-09T21:03:33.520
> 
> 标签：html, getelementsbyclassname

我正在尝试提示输入将替换“数据量”值的值

```
<html>
    <body>
        <a href="http://249lease.webs.com/" class="dwolla_button" data-name="Lease" data-desc="Payments" data-amount="5" data-shipping="0"              data-tax="0" data-guest-checkout="true" data-key="sHqCOc31Vh3JiAsPhBfEk5f4D9bAWKLzwaT06ah3Aw65i0gkZl">Bank Account (25¢)</a>
        <script type="text/javascript" src="https://www.dwolla.com/scripts/button.min.js"> </script>
    </body>
</html> 
```

我已经添加

```
<script type="text/javascript">
    document.getElementByClass("dwolla_button")[0].setAttribute("data-amount", "43");
</script> 
```

并在下面这个脚本中尝试了整个事情，但没有任何想法？

```
<html>
    <body>
        <a href="http://249lease.webs.com/" class="dwolla_button" data-name="Lease" data-desc="Payments" data-amount="5" data-shipping="0"              data-tax="0" data-guest-checkout="true" data-key="sHqCOc31Vh3JiAsPhBfEk5f4D9bAWKLzwaT06ah3Aw65i0gkZl">Bank Account (25¢)</a>
        <script type="text/javascript">
          document.getElementByClass("dwolla_button")[0].setAttribute("data-amount", "43");
        </script>  

        <script type="text/javascript" src="https://www.dwolla.com/scripts/button.min.js"> </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:06:36.917

Change your method from getElementByClassName to [getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

```
 document.getElementsByClassName("dwolla_button")[0].setAttribute("data-amount", "43"); 
```

# css - CSS 宽度 100% - margin-right

> ID：15315899
> 
> 赞同：2
> 
> 时间：2013-03-09T21:03:50.327
> 
> 标签：css, margin

目前有 2 个 div...左边是完整的内容，右边是一个 300px 宽的侧边栏。我希望他们并排，左右，但似乎无法做到正确。我需要左 div 占据整个屏幕，而不是右 div 的 300px。

是否可以在左 div 的右边距中有右 div？

```
<div id="container">
    <div id="left"></div>
    <div id="right"></div>
</div>

#container {
    width: 100%
}
#left {
    float: left;
    margin-right: 350px;
}
#right {
    float: left;
    width: 300px;
    padding-left: 25px;
} 
```

**编辑：**

我也可以有右侧位置：固定吗？下面的解决方案有效，但是当我做出正确的 div 位置时：已修复；div 不再位于左侧 div 的右侧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:13:04.880

更改左右 div 顺序，如：

```
<div id="container">
    <div id="right"></div>
    <div id="left"></div>
</div> 
```

删除 CSS 中的`float:left`from`#left`并更改`#right`为`float:right`

```
#container {
    width: 100%
}
#left {
    margin-right: 350px;
}
#right {
    float: right;
    width: 300px;
    padding-left: 25px;
} 
```

编辑：

我的解决方案应该可以使用`position: fixed;`，只要记住添加`right:0`到固定 div。

```
#container {
    width: 100%
}
#left {
    margin-right: 350px;
}
#right {
    position: fixed;
    right: 0;
    width: 300px;
    padding-left: 25px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:16:40.163

将您的标记更改为：

```
<div id="container">
    <div id="right"></div>
    <div id="left"></div>
</div> 
```

和CSS：

```
#left {
    overflow: hidden;
}
#right {
    float: right;
    width: 300px;
    padding-left: 25px;
} 
```

左侧 div 将自动占据浮动“侧边栏”旁边的整个空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T21:30:00.757

`width:100%`您可以在#left div 中添加一个负边距，而不是重新排序内容。

[http://jsfiddle.net/daCrosby/FGMGB/](http://jsfiddle.net/daCrosby/FGMGB/)

**HTML**

```
<div id="container">
    <div id="left">Left Col</div>
    <div id="right">Right Col</div>
</div> 
```

**CSS**

```
#container {
    width: 100%
}
#left {
    float: left;
    width: 100%; /* full width of #container */
    margin-right: -325px; /* #right's width + left & right padding & margin */
}
#right {
    float: left;
    width: 300px;
    padding-left: 25px;
} 
```

# **编辑**

根据您在此处其他地方的评论，您`#right`需要`position:fixed`. 这会将元素完全从元素堆栈中取出，因此`float`是不必要的（并且无论如何都不会工作）。相反，只需设置固定位置即可。

相关的 CSS，使用与上面相同的 HTML

```
#container2 {
    width: 100%
}
#left2 {
    width: 100%; /* full width of #container */
    margin-right: -325px; /* #right's width + left & right padding & margin */
    background:#ddd;
}
#right2 {
    position:fixed;
    right:8px;
    top:28px; /* set the right and top to whatever positioning you need. */
    width: 300px;
    padding-left: 25px;
    background:#444;
} 
```

[jsFiddle](http://jsfiddle.net/daCrosby/FGMGB/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T22:23:03.303

看一眼：

创建具有负边距的流动布局 ( [http://alistapart.com/article/negativemargins](http://alistapart.com/article/negativemargins) )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-15T14:37:10.927

一些答案的问题是您可能不想重新排序内容，因为您可能希望能够在响应式设计中将右 div 移动到左 div 下，如果我们重新排序内容，这将变得越来越困难. 不幸的是，@DACrosby 的回答可能导致右 div 在左 div 的内容之上出现一些邪恶的重叠。

我的解决方案是设置一个与左侧 div 上`padding-right`的负数匹配的正数，然后设置.`margin-right``box-sizing: border-box`

```
.container {
    clear:both;
}
.left {
    box-sizing: border-box;
    float:left;
    width: 100%;
    margin-right: -325px;
    padding-right: 325px;
    background:#ddd;
}
.right {
    box-sizing: border-box;
    background:#666;
    position:fixed;
    right:0;
    width: 300px;
} 
```

无论有没有`position:fixed;`正确的 div，这都适用。

[jsFiddle](http://jsfiddle.net/fux4dvek/)

# ruby - Rubymine 无法识别已安装的 gem

> ID：15315900
> 
> 赞同：-2
> 
> 时间：2013-03-09T21:03:53.440
> 
> 标签：ruby, linux, gem, rubymine

我的 Ruby 项目无法识别我刚刚在终端中安装的 gem。gem 也没有出现在外部库中。

![JetBrains 工作区屏幕截图](../Images/65715171a3c0a13f48b951e7cca3dad6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:14:06.140

此问题已在[RubyMine 5.0中修复](http://www.jetbrains.com/ruby/download/index.html)

# html - ids和classes之间的css视觉差异

> ID：15315901
> 
> 赞同：0
> 
> 时间：2013-03-09T21:03:55.193
> 
> 标签：html, css

这非常奇怪，但请查看以下 html 和 css。只要我将 table 和 tableWrapper 作为具有为它们定义的 id 的元素保留，这就可以正常工作

如果我尝试使它们成为类（将 # 更改为 . 在 css 中）并将 id 更改为 html 元素上的类，那么圆类不再包含在 tableWrapper 中（它们超出了它的边界）。我真的大吃一惊，因为我从没想过某个 id 或 class 是否会对布局产生影响，但我在 IE10 和 google chrome v25 上都看到了这种情况。

我不是在寻找解决这个特定问题的方法。我正在寻求理解，并希望有一些链接到一些 w3c 文档，解释它为什么会发生以及我可以对此有什么期望。

```
 <html>
                <head>
                <style>
                    .circle{
                        background-color:red;
                        border-radius:50%;
                        height:90%;
                        width:100%;
                        colore:white;
                        top:7%;
                        position:absolute;

                        left:0px;

                    }
                    .innerCircle{
                        border-radius:50%;
                    background-color:white;
                        position:absolute;
                        top:12%;
                        z-index:2;
                        left:5%;
                        height:80%;
                        width:90%;

                    }
                    #navBar{
                    background-color:black;
                    color:white;
                    width:100%;
                    height:7%;
                    }
                    #table{
                        height:550px;
                        border:solid 1px black                                                                                                              ;
                        width:500px;
                        position:absolute;
                        top:0px;
                    }
                    #tableWrapper{
                        height:90%;
                        width:100%;
                    }

                </style>
                </head>

                <body>
                    <div id="table">

                        <div id="navBar">
                            Room info
                        </div>
                        <div id="tableWrapper">

                            <div class="circle">

                            </div>
                            <div class="innerCircle">

                            </div>
                        </div>

                    </div>
                    <input type="text" id="xval" style="float:right" />

                    <input type="text" id="yval" style="float:right" />
                </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:30:56.077

我想知道这是否可能是因为特殊性以及 ID 的处理方式与类不同。即ID 比类具有更高的特异性。如果您的容器是一个类并且您的元素是一个 ID，那么具有 ID 的元素会覆盖任何可能在类级别设置的设置。

这是指向更多信息的链接 [http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:34:21.497

将 ID 更改为类会影响选择器的特异性，请参阅[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。简单地说，ID 是比类更具体的选择器，因为它在页面上是唯一的。如果可以使用多个规则选择一个元素，则将应用最具体的元素，否则如果所有元素都具有相同的特异性，则“级联顺序”（基本上是声明规则的顺序）很重要。样式表中出现在更下方的规则会以相同的特性覆盖更高的规则。

[http://specificity.keegan.st/](http://specificity.keegan.st/)上有一个很棒的特异性计算器，它可以帮助您了解在任何给定情况下哪些选择器会胜出。

与同名的类也可能存在命名冲突。

要真正了解正在发生的事情，我强烈建议您在您选择的浏览器中使用开发者工具 - 我个人推荐 Chrome 开发者工具，但 Firefox 有一套相当不错的工具，包括原生的和使用流行的 Firebug 扩展。右键单击元素并选择“检查元素”（在大多数浏览器中）将允许您查看所有匹配的选择器、已应用的规则以及已被覆盖的规则。

# php - 使用 PHP Text DB API 时如何使用自动递增列？

> ID：15315905
> 
> 赞同：1
> 
> 时间：2013-03-09T21:04:30.553
> 
> 标签：php, html, sql, database

我从[这里](http://www.c-worker.ch/txtdbapi/index_eng.php#Lizenz)使用这个 php 文本数据库 api ，但我在使用自动增量列时遇到了问题。我已经创建了一个数据库和一个表，我可以成功地使用

```
$db->executeQuery("CREATE TABLE people (id inc DEFAULT 0, phone_number int)");
$db->executeQuery("INSERT INTO people VALUES (0, '123')"); 
```

但是每次我插入时，它都会说 id 列是 0。我怎样才能让它在每次插入时自动增加 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:42:43.890

请试试：

```
$db->executeQuery("CREATE TABLE people (id INT NOT NULL AUTO_INCREMENT, phone_number int)");
$db->executeQuery("INSERT INTO people VALUES ( '123')"); 
```

# php - 多个表中的排序计数

> ID：15315910
> 
> 赞同：0
> 
> 时间：2013-03-09T21:04:51.380
> 
> 标签：php, mysql, sorting

我正在处理一个 PHP/mySQL 表，该表显示我已放入数据库的数据，并且我正在尝试使其可排序。我的数据库中有两个表：

表“餐厅”有列：ID 和名称

表“item”有列：ID、name 和 restaurantID（restaurantID 设置为使用“restaurant”表中的 ID）

我想要做的是按照他们的 ID 在项目表中出现的次数对餐馆进行排序。我确信必须有一个简单的方法来做到这一点，只是一直无法弄清楚。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:11:23.983

尝试这个...

```
select r.name, count(i.ID)
from restaurant r
left join item i on i.restaurantID = r.ID
group by r.name
order by count(i.ID) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:10:07.823

我相信你可以通过使用如下查询来做到这一点；

```
SELECT restaurant.*, COUNT(items.id) AS item_id FROM restaurants, items WHERE restaurant.id = items.restaurant_id ORDER BY item_id ASC; 
```

您可能知道，也可以按多列排序；

```
SELECT restaurant.*, COUNT(items.id) AS item_id FROM restaurants, items WHERE restaurant.id = items.restaurant_id ORDER BY item_id ASC, restaurant.`name` DESC; 
```

# c - 交换单链表中的节点

> ID：15315914
> 
> 赞同：7
> 
> 时间：2013-03-09T21:05:09.853
> 
> 标签：c, pointers, swap, singly-linked-list

我正在尝试交换两个节点。例如，如果节点是`a`并且`b`我正在传递指针
`(a-1)->next`并且`(b-1)->next`它们基本上是节点`a`和`b`.

```
void swap(struct stack **a,struct stack **b)
{
    struct stack *temp1 = *a, *temp2 = *b, *temp3 = *b;      
    *a = *b; 
    (*b)->next = (temp1)->next;
    temp2 = temp1;
    (temp2)->next = temp3->next;
} 
```

我究竟做错了什么？当我在调用函数后尝试打印节点时，它是一个无限循环。请帮忙。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T21:21:48.627

## 为什么是无限循环？

无限循环是因为调用函数*后列表中的自循环。*`swap()`在`swap()`代码中，以下语句是错误的。

```
(*b)->next = (temp1)->next; 
```

**为什么？**: 因为在`swap()`函数`temp1`的 next 中的赋值语句开始指向`b`节点之后。And `node[b]`'s next 在循环中指向自身。**自循环是****无限循环**的原因，在您遍历链表的代码中的某处。

`swap()`下面我画了一步一步地展示如何工作。这可能有助于您理解您的*错误*：

你没有提到，但我假设链表在`a`和之间有以下关系`b`：（*阅读红色评论*）

**（第1步）：**

```
+----+----+----+      +---+----+----+
|      one     |----->|    two      |
+----+----+----+      +---+---+-----+
  ^     ^              ^    ^
  |     |              |    |
  |    *a              |   *b
  |                    | 
 temp1                temp2, temp3     "after assignment to temp variables"

(step-2):                   ^
                            | 
*a = *b                     | *a       "<--- next step" 
```

**（第 3 步）：** 错误声明

```
(*b)->next = (temp1)->next;          "Change link: (temp1)->next; is `two` node"
                                     " *b is `two`,   So Self loop" 

+----+----+----+      +---+----+----+ <---|  
|      one     |      |    two      |-----|
+----+----+----+      +---+---+-----+
  ^                    ^    ^    ^
  |                    |    |    |
  |                    |   *b    *a
  |                    | 
 temp1                temp2, temp3    "  after assignment to temp" 
```

`(temp1)->next;`实际上，您`b`正在分配`(*b)->next = (*b)`，`(*b)->next = (temp1)->next;`因此添加了一个自循环。

**（第 4 步）：**
我认为通过图表，您可以轻松理解`swap()`代码的最后两行在做什么：

```
temp2 = temp1;
(temp2)->next = temp3->next; 
```

以下是我对这两行的图表：

```
temp2 = temp1;         
+----+----+----+      +---+----+----+ <---|
|      one     |      |    two      |-----|  "<--- Self loop"
+----+----+----+      +---+---+-----+
  ^                    ^    ^    ^
  |                    |    |    |
  |                    |   *b    *a
  |                    | 
  temp2 = temp1;      temp3 
```

**（第 5 步）：** 即使函数的最后一行`swap()` 左循环如下：

```
 (temp2)->next = temp3->next;  " last line of your code"

+----+----+----+      +---+----+----+ <---|
|      one     |----->|    two      |-----|  "<-- Self loop"
+----+----+----+      +---+---+-----+
  ^                    ^    ^    ^
  |                    |    |    |
  |                    |   *b    *a
  |                    | 
temp2 = temp1;          temp3 
```

所以在`two`节点处循环仍然存在所以无限循环。

## 如何交换单链表中的两个节点？

一种方法是交换节点的数据，而不是交换节点在链表中的位置（*正如我对您的问题的评论*）。但是***你想交换节点***在列表中的位置。
好这个好！如果节点数据大小较大，那么最好交换节点的位置而不是交换节点的数据（*交换数据将是不好的选择*）

因为你有**单链表**，所以要交换列表中的任意两个任意节点，你也需要*以前**的节点地址*。（*这是您在交换逻辑中不考虑的一点*）

**为什么需要以前的指针？**：
假设在一些成功的插入（推送）操作之后，您的列表变为如下：

```
 0  <--------TOP - "head"
 9  <--p  
 2    
 6  <--q           
 5 
```

水平图-假设*您要交换*两个节点`(q)` 和`(p)`：

```
+---+    +---+    +---+    +---+    +---+                               
| 0 |--->| 9 |--->| 2 |--->| 6 |--->| 5 |---
+---+    +---+    +---+    +---+    +---+  |                                
 ^        ^                  ^            null  
 |        |                  | 
 |       (q)                (p)   
 (head) 
```

正如我所说，要交换我们需要以前的指针。您需要考虑以下内容
（*理论上，我正在为特定节点编写代码`(p)`，`(q)`只是为了保持解释简单。但我的实现是通用的*）：

在列出以前的指针中：

```
node[0] points to node[9] that is (q), and 
node[2] points to node[6] that is (p) 
```

和

```
node[9] points to node[2]
node[6] points to node[5] 
```

**注意：**如果你想交换两个节点`node[ 9 ]` ，`node[ 6 ]`那么你应该使用这两个节点之前的节点的指针。
例如：两个交换`node[ 9 ]`and `[ 6 ]`，你还需要改变上图中的 next 指针`node[ 0 ]`和 next 指针。`node[ 2 ]`

**交换这两个节点后的列表会怎样？**

```
+---+    +---+    +---+    +---+    +---+                               
| 0 |--->| 6 |--->| 2 |--->| 9 |--->| 5 |---
+---+    +---+    +---+    +---+    +---+  |                                
 ^        ^                  ^            null  
 |        |                  | 
 |       (p)                (q)   
 (head) 
```

现在在以前的节点`[o]`和`[2]`？
交换后，在列表中以前的指针

```
node[0] points to node[6] that is (q), and 
node[2] points to node[9] that is (p) 
```

和

```
node[9] points to node[5]
node[6] points to node[2] 
```

所以如果你想交换两个节点；有直接的前一个节点也有影响，因为列表是单链接列表，你也需要以前的指针。

**如何找到以前的节点指针？**

假设您要交换任意两个节点`node[p]`，`node[q]`然后您可以使用它`head pointer`来查找前一个节点。

所以交换函数**语法**（*在我的实现*中）就像：

```
void swap(struct stack **head, // head node 
          struct stack **a,    // first candidate node to swap
          struct stack **b);   // first candidate node to swap 
```

您将调用如下函数：

```
swap(&head, &p, &q); 
```

**定义：（**要*理解代码，请阅读我在几乎每一行添加的注释*）

```
void swap(struct stack **head, 
          struct stack **a, 
          struct stack **b){
  // first check if a agrgument is null                 
  if( (*head) == NULL ||               // Empty list         
        (*a) == NULL || (*b) == NULL){     // one node is null  
       // Nothing to swap, just return 
        printf("\n Nothing to swap, just return \n");
        return;
  }     

  // find previos nodes
  struct stack* pre_a = get_prevnd(*head, *a);
  struct stack* pre_b = get_prevnd(*head, *b);

  //Now swap previous node's next
  if(pre_a) pre_a->next = (*b); // a's previous become b's previous, and 
  if(pre_b) pre_b->next = (*a); // b's previous become a's previous

  //Now swap next fiels of candidate nodes  
  struct stack* temp = NULL;  
    temp = (*a)->next;
  (*a)->next = (*b)->next;
  (*b)->next = temp;

  //change head: if any node was a head 
  if((*head)==(*a)) 
     *head = *b;
  else 
     if((*head)==(*b))  
        *head = *a;
} 
```

在`swap()`函数中你可以注意到我调用了一个辅助函数`get_prevnd(, );`。此函数返回列表中前一个节点的地址。在函数`get_prevnd(, );`中，第一个参数是列表头，第二个参数是您要查找的节点。

```
// find previous node function()
struct stack* get_prevnd(
                 struct stack* head, 
                 struct stack* a
                ){
    if(head == a){
        // node[a] is first node 
        return NULL;
    }
    struct stack* temp = head; // temp is current node
    struct stack* pre_a = NULL; 

    while(temp && temp!=a){ //search while not reach to end or the node
        pre_a = temp;          // find previous node   
        temp = temp->next;
    }
    if(temp!=a){// node[a] not present in list
        fprintf(stderr, "\n error: node not found!\n");
        exit(EXIT_FAILURE); // bad technique to exit()
    }
    return pre_a;   
} 
```

幸运的是，代码正在运行:)。以下是此代码的在线测试链接。我已经测试了各种输入。

CodePad：[**交换单链表中的节点。**](http://codepad.org/3YaGfYxm)请检查输出。

[抱歉英语不好]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T22:48:22.870

我希望剪切和粘贴代码，但没有找到。如果有人仍然感兴趣，这就是答案。我对所有 3 个案例进行了蛮力分析。

```
// swaps nodes at locations *sp and *tp
struct stack *s = *sp; // store locations to prevent overwritten bugs
struct stack *t = *tp;
if(&t->next == sp) { // order u (tp)-> t (sp)-> s -> ...
    t->next = s->next;
    s->next = t;
    *tp = s;
} else if(&s->next == tp) { // order u (sp)-> s (tp)-> t -> ...
    s->next = t->next;
    t->next = s;
    *sp = t;
} else { // disconnected u (sp)->s -> ..., v (tp)->t -> ...
    struct stack *next = s->next;
    s->next = t->next;
    t->next = next;
    *sp = t;
    *tp = s;
}             
// If you track the end of your list, it be the one pointing to NULL.                                           
if(s->next == NULL) {                                  
    end = &s->next;                                 
} else if(t->next == NULL) {                           
    end = &t->next;                                 
} 
```

注意：此代码在 sp == tp 时有效，但假设您没有 BOTH &s->next == tp && &t->next == sp （从循环开始）的病态情况。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-05-11T07:15:07.570

```
 "KING KHAN" 
```

`SwapanyTwoNodeData(int, int);` 此函数将两个整数作为参数并交换它们

节点数据。

```
1->2->6->3->4->5 
```

`SwapanyTwoNodeData (2,4);`

```
1->3->6->2->4->5 
```

100% 工作功能。. . . 享受。

```
void Swap_Any_Two_Locations_data(int x,int x1){

   if(head!=NULL){     
     int count=1,count1=1;     
     Node *temp,*temp1;
     temp=head;
     temp1=head;
     while(temp->next!=NULL && count!=x ){
         temp=temp->next;
         count++;
     }
     while(temp1->next!=NULL && count1!=x1){
         temp1=temp1->next;
         count1++;
     }
     if(count==x && count1==x1){
       int z=0;
       z=temp->info;
       temp->info=temp1->info;
       temp1->info=z;
       cout<<"Data Swapped"<<endl;
    }
  }
} 
```

# python - 金字塔 AuthTktAuthenticationPolicy 与其他框架

> ID：15315917
> 
> 赞同：1
> 
> 时间：2013-03-09T21:05:29.960
> 
> 标签：python, authentication, twisted, comet, pyramid

我需要使用来自金字塔的 AuthTktAuthenticationPolicy 通过 Twisted 服务器授权的身份验证 cookie，以便我可以有效地进行长轮询。有没有办法让 Twisted 服务器从金字塔中解码身份验证 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:05:02.053

`AuthTktAuthenticationPolicy`代码遵循`mod_tkt_auth`Apache 模块的标准集。如果您实现相同的算法并在您的 Twisted 服务器上配置它以使用与您的 Pyramid 服务器使用的相同的秘密，您可以解码该 cookie，是的。

事实上，Pyramid 重新使用`tkt_auth`了 Paste 项目中的代码来实现这一点，并在非常宽松的 MIT 许可下获得许可。您也可以将它重用于您的 Twisted 应用程序；[在Paste bitbucket 存储库](https://bitbucket.org/ianb/paste/src/tip/paste/auth/auth_tkt.py)中找到它。

该`parse_ticket()`函数只需要服务器端密钥、cookie 值、远程连接的 ip 地址和可选的使用的哈希算法（MD5 是默认值）。

# php - 为什么我的 Javascript 不能在 PHP 文件中运行？

> ID：15315918
> 
> 赞同：0
> 
> 时间：2013-03-09T21:05:32.283
> 
> 标签：php, javascript

我有以下文件。由于某种原因，我的 JavaScript（在 PHP 'echo' 标签内）不起作用：

HTML (index.php):

```
<form action="submit.php" method="post">
<div id="edit-box">
<INPUT type="submit" name="save-text" id="save-text" value="Save">
<textarea id="editor" name="editor">
<?php echo $content; ?>
</textarea>
</div>
</form> 
```

PHP（提交.php）：

```
<?php

include('connect-db.php');

$submit_date = date("Ymd");
$content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));
$ip_address = getRealIPAddress();

if ($content != '') { 
mysql_query("INSERT source SET submit_date='$submit_date', ip='$ip_address', content='$content'")
or die(mysql_error());

// The following line is not working! I need help here!
echo '<script type="text/javascript"> alert("Your file saved!");</script>';  

mysql_close($connection);
}
?> 
```

“submit.php”没有任何其他 PHP 或 HTML 脚本/标签。我知道我使用的是过时的 PHP/MySQL API（而不是 PDO/MySQLi），但这不是重点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:41:41.967

它应该打印一个警报。确定要打印脚本吗？我可以看到它可能会因查询中的错误而死。

如果不是这种情况，您在 connect-db.php 中包含什么，可能是您在所需文件中的某处弄乱了输出缓冲区..

我也很确定 sql 不正确：

```
INSERT source SET submit_date='$submit_date', ip='$ip_address', content='$content' 
```

```
INSERT INTO source (submit_date, ip, content) values('$submit_date','$ip_address','$content'); 
```

然而，这不是一个安全的查询……那是无关紧要的。

以下是可能发生这种情况的更多原因：

1.  可能会终止脚本的`include("connect-db.php');`执行。
    *   如果里面有问题。
2.  查询可能会死掉。
3.  输出被重定向到其他地方，在 php 配置中，或者在“connect-db.php”内部
4.  `getRealIPAddress()`没有记录，并可能导致脚本中断。
5.  可能有一些虚假的东西`$_POST['editor']`可能会破坏导致 sql 死亡。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T21:09:45.440

试试下面的代码

```
<?php

include('connect-db.php');

$submit_date = date("Ymd");
$content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));
$ip_address = getRealIPAddress();
$content = $_POST["editor"];
if ($content != '') { 
mysql_query("INSERT source SET submit_date='$submit_date', ip='$ip_address', content='$content'")
or die(mysql_error());

// The following line is not working! I need help here!
echo '<script type="text/javascript"> alert("Your file saved!");</script>';  

mysql_close($connection);
}
?> 
```

# javascript - 如何在 kinetic.js 中选择对象？

> ID：15315925
> 
> 赞同：3
> 
> 时间：2013-03-09T21:06:22.580
> 
> 标签：javascript, html, html5-canvas, kineticjs

我正在尝试设计一个编辑器，该编辑器可用于使用[kineticjs](http://kineticjs.com/)框架使用块绘制形状。到目前为止一切都很好。我可以添加矩形，改变它的大小，并旋转它。但我所说的仅适用于最后创建的对象。我无法选择其中之一进行修改。这里是代码的html：

```
 <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
      }
    </style>
  </head>
  <body>
    <table width="800" border="0">
      <tr>
        <td colspan="2" style="background-color:#eeeeee;">
        </td>
      </tr>
      <tr>
        <td style="background-color:#eeeeee;height:200px;width:400px;">
          <button id="rect">Rectangle</button><br>
          <button id="small">Small</button><br>
          <button id="big">Big</button><br>
          <button id="rotate">RotateRight</button><br>
          <button id="rotate2">RotateLeft</button><br>
          <button id="delete">Delete</button><br>
        </td>
        <td>
          <div id="container"></div>
          <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>

          <script type="text/javascript" src="example_kinetic.js"></script>

        </td>
      </tr>
      <tr>
        <td colspan="2" style="background-color:#eeeeee;text-align:center;">
        Copyright © ceng314animation.wordpress.com/</td>
      </tr>
    </table>

  </body>
</html> 
```

这是js部分：

```
 var stage = new Kinetic.Stage({
    container: 'container',
    width: 800,
    height: 400
  });

  var layer = new Kinetic.Layer();
  stage.add(layer);
  boardBlankArray = [];
  var rect, myRect;
  var i = 1;

  document.getElementById('rect').addEventListener('click', function() {
    rect = new Kinetic.Rect({
    x: 239,
    y: 75,
    width: 100,
    height: 50,
    fill: 'green',
    stroke: 'black',
    strokeWidth: 4,
    offset: [50,25],
    draggable: true,
    id:"rect"+i
  });
    i=i+1;

    rect.setListening(true);

    boardBlankArray[i] = rect;
    // add the shape to the layer
    layer.add(boardBlankArray[i]);
    stage.add(layer);
    boardBlankArray[i].on("click",function(){
      alert(this.attrs.id);
      //myRect = stage.getChildren()[i];
    });
  }, false);

  document.getElementById('big').addEventListener('click', function(){

    rect.setWidth(rect.getWidth()+10);
    rect.setHeight(rect.getHeight()+10);
    rect.setListening(true);
    stage.add(layer);
  }, false);

  document.getElementById('small').addEventListener('click', function() {
    rect.setListening(true);
    rect.setWidth(rect.getWidth()-10);
    rect.setHeight(rect.getHeight()-10);
    stage.add(layer);
  }, false);

  document.getElementById('rotate').addEventListener('click', function() {
    rect.setListening(true);
    rect.rotate(Math.PI/4);
    stage.add(layer);
  }, false);

  document.getElementById('rotate2').addEventListener('click', function() {
    rect.setListening(true);
    rect.rotate(-Math.PI/4);
    stage.add(layer);
  }, false);

  document.getElementById('delete').addEventListener('click', function() {
    layer.remove(rect);
    stage.add(layer);
  }, false); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-23T14:55:24.957

看起来@jing3142 的答案适用于@user1422167，但我想在此处发布此答案，因为另一个答案使用**非常规**方法在 KineticJS 中选择节点。

**KineticJS**选择节点的方法是使用：

`event.targetNode`

来源：[http ://www.html5canvastutorials.com/kineticjs/html5-canvas-get-event-shape-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-get-event-shape-with-kineticjs/)

```
layer.on('click', function(evt) {
    // get the shape that was clicked on
    var shape = evt.targetNode;
    alert('you clicked on \"' + shape.getName() + '\"');
  }); 
```

使用`var shape = evt.targetNode;`，您可以在 KineticJS 节点上调用所有 KineticJS 方法。在此示例中，教程调用`getName`方法：`shape.getName()`.

此外，在此处查看有关 KineticJS 事件的更多信息：http: [//www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/)

**更新**

**KineticJS 5.0.1 及之前版本**

`var shape = evt.targetNode;`

**KineticJS 5.1.0+**

`var shape = evt.target;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T10:43:11.997

当您单击一个矩形时，您需要将其设为活动矩形。使用 myrect 作为当前活动矩形的变量

对您的代码进行以下更改，以 //<<<<<<<<<<<<<<<<<<<<

注意 boardBlankArray 不是必需的

```
document.getElementById('rect').addEventListener('click', function() {
    rect = new Kinetic.Rect({
    x: 239,
    y: 75,
    width: 100,
    height: 50,
    fill: 'green',
    stroke: 'black',
    strokeWidth: 4,
    offset: [50,25],
    draggable: true,
    id:"rect"+i
  });
    i=i+1;

    myrect=rect //<<<<<<<<<<<<<<sets recently created rectangle as active
    rect.setListening(true);

    // add the shape to the layer
    layer.add(rect);
    stage.add(layer);
    rect.on("click",function(){    //<<<<<<<<<<<
      myRect = this; //<<<<<<<<<<<<<<<<<<<<<< sets clicked on rectangle as active
    });
  }, false);

  document.getElementById('big').addEventListener('click', function(){

    myrect.setWidth(myrect.getWidth()+10); //<<<<<<<<<uses currently active rectangle
    myrect.setHeight(myrect.getHeight()+10); //<<<<<<<uses currently active rectangle
    myrect.setListening(true);
    stage.add(layer);
  }, false); 
```

您需要在以下所有函数调用中将 rect 更改为 myrect

# java - JSP 给出错误：未找到请求的资源

> ID：15315927
> 
> 赞同：0
> 
> 时间：2013-03-09T21:06:24.340
> 
> 标签：java, jsp, servlets

只需要一点帮助。

我试图制作一个小型测试项目，但我遇到了这个错误。妥善放置我的所有 JAR 文件和 JSP：

`The requested resource (/LibrayManagement/list_of_books_available.jsp) is not available`

以下是jsp代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Library</title>
</head>
<body>
<form action="Listofbooksaction" method="post">

<h3>List of books available</h3>

<c:forEach var = "list" items = "${requestScope.BooksList}">

<c:out value = "${list[0]}">

</c:out>

</c:forEach>

<input type= "submit" value = "get list">
</form>
</body>
</html> 
```

以下是动作类代码：

```
import java.sql.* ;
import java.io.IOException;
import java.sql.ResultSet;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**

public class Listofbooksaction extends HttpServlet {
    private static final long serialVersionUID = 1L;

    String url = "list_of_books_available.jsp";
    public Listofbooksaction() {
        super();

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        ConnectionsList c = new ConnectionsList() ;

        try {
            Statement St = c.createconnection();
            ResultSet Rs = St.executeQuery("Select * from books_list") ;
            System.out.println(Rs);

            ArrayList<String> Books_List = new ArrayList<String>();

            while(Rs.next())
            {
                Books_List.add(Rs.getString(1));
            }

            request.setAttribute("BooksList", Books_List);

            response.sendRedirect(url);

        } catch (SQLException e) {

            e.printStackTrace();
        }

    }

} 
```

错误堆栈跟踪：

`java.lang.IllegalStateException org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:4‌​35) Listofbooksaction.doPost(Listofbooksaction.java:62) javax.servlet.http.HttpServlet.service(HttpServlet.java:637) javax.servlet.http.HttpServlet.service(HttpServlet.java:717)`

# ruby-on-rails-3.1 - 在 Rails 应用程序中根据语言环境加载不同的 css 文件或图像

> ID：15315932
> 
> 赞同：2
> 
> 时间：2013-03-09T21:06:55.343
> 
> 标签：ruby-on-rails-3.1, internationalization, resources, globalization

所以我有我的简单 Rails 应用程序（不是数据驱动的），并且我已经管理（在 Stackoverflow 的帮助下）对其进行本地化。所以我可以用英语或德语查看 Web 应用程序。我已经使用捆绑的 i18n 库这样做了。一切都很好，合作很愉快。

但是，现在我想根据活动的区域设置加载不同的图像和/或 css 文件。我想要一个巧妙的解决方案来解决这个问题。不是：

```
if i18n.locale = "en"
  // show this particular image
else
  // show that particular image 
```

在我看来，上面的内容并不整洁，想象一下 if 语句或 switch 语句会在多长时间内获得更多的语言环境。

所以我在想，有没有办法可以扩展**javascript_include_tag**、**stylesheet_link_tag**以及最后的**image_tag**的功能以允许进行语言环境处理？

我认为是这样的：

```
stylesheet_link_tag "default.css", :locale => true 
```

很高兴，*如果为 true*，插入的样式表将如下所示：

```
<link href="stylesheets/default.es.css" type="text/css" rel="stylesheet" /> 
```

假设我的新语言是西班牙语。那将是可爱和干净的。

这可以在 Ruby on Rails 中实现吗？如果是的话，我会喜欢一些代码示例，因为我相对地是一个 n00b 到 rails。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T00:07:07.570

包含资产时，您可以只引用语言环境。假设您要包含特定于当前语言环境的样式表：

```
stylesheet_link_tag "custom_#{I18n.locale}.css" 
```

如果当前语言环境是`en`，这将查找`custom_en.css`文件。

不过有一点警告：您应该确保为您打算使用的每个语言环境创建一个文件。

# jquery - I get an "uncaught reference error" and need help please

> ID：15315934
> 
> 赞同：0
> 
> 时间：2013-03-09T21:07:10.367
> 
> 标签：jquery

I am learning to code from codecademy.com and one of the jquery lessons did not work properly. I copied it to my webhost to see if I could get it to work there or use the javascript console to figure out the problem but I am stuck.

Here is the script.js page:

```
$('document').ready(function(){
Uncaught ReferenceError: $ is not defined
    $('div').mouseover(function() {
        $('div').fadeTo('fast', 1);
    });
   $('div').mouseout(function() {
        $('div').fadeTo('fast', 0.5);
    });
}); 
```

`

The second line is the error message I am receiving and I can't figure out why. I am using Chromium on Ubuntu if that matters (from the different things I've seen in trying to figure this out, it appears that it does matter for some reason).

If anyone can help me explain this, I would appreciate it.

If you want to see the original page it is at learningtocode.nileriverfoods.com.

Thanks for all your help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:10:56.297

您的页面中没有包含[jQuery](http://jquery.com/)。您需要下载此文件[http://code.jquery.com/jquery-1.9.1.min.js](http://code.jquery.com/jquery-1.9.1.min.js)或仅引用它。

# r - Format the ggplot2 map

> ID：15315939
> 
> 赞同：5
> 
> 时间：2013-03-09T21:07:30.943
> 
> 标签：r, plot, maps, ggplot2

I´m trying to produce a worldmap using ggplot2 in R. I want to show GDP per capita from Brazilian States. There are 2 problems:

1.  In the center of Country have two labels aren't easy to read the information. They are overlapping.Reducing the numbers not resolved.

2.  I would like to change the colour breaks and don't know how to access it. I would like to use colors to become easy to note the diferences of GDP.

My data is: [https://docs.google.com/file/d/0B_coFit6AovfcEFkbHBjZEJaQ1E/edit](https://docs.google.com/file/d/0B_coFit6AovfcEFkbHBjZEJaQ1E/edit)

Here is my code:

```
library(maptools)
gpclibPermit()
library(ggplot2)
library(rgdal)
library(rgeos)
library(ggmap)

# read administrative boundaries (change folder appropriately)
brMap <- readShapePoly("BRASIL.shp")
brMap

# read downloaded data (change folder appropriately)
brRen <- read.csv("Renda.csv", sep = ";", quote = "\"", dec=".", stringsAsFactors = FALSE)
brRen$rendapc <- as.numeric(as.character(brRen$rendapc)) # format as numeric

#convert shp to UTF8
library(descr)
brMap$ESTADO<-toUTF8(brMap$ESTADO, "IBM850")

# convert shp data to data frame for ggplot
as.data.frame(brMap) # para definir a region
brMap = gBuffer(brMap, width=0, byid=TRUE) #correct problem with Polygons - TopologyException
brMapDf <- fortify(brMap, region="UF")
brMapDf

# merge map and data
brRenMapDf <- merge(brMapDf, brRen, by.x="id", by.y="Iden")
brRenMapDf <- brRenMapDf[order(brRenMapDf$order),]

# limit data to main Europe
brazil.limits <- geocode(c("Monte Caburaí", "Barra do Chuí", "Serra do Divisor", "Ilhas Martin Vaz"))
brRenMapDf <- subset(brRenMapDf, long > min(brazil.limits$lon) & long < max(brazil.limits$lon) & lat > min(brazil.limits$lat) & lat < max(brazil.limits$lat))

# ggplot mapping
# data layer
m0 <- ggplot(data=brRenMapDf)
# empty map (only borders)
m1 <- m0 + geom_path(aes(x=long, y=lat, group=group), color='gray') + coord_equal()
m1

# fill with education expenditure data
m2 <- m1 + geom_polygon(aes(x=long, y=lat, group=group, fill=rendapc))
m2

# inverse order (to have visible borders)
m0 <- ggplot(data=brRenMapDf)
m1 <- m0 + geom_polygon(aes(x=long, y=lat, group=group, fill=rendapc)) + coord_equal()
m2 <- m1 + geom_path(aes(x=long, y=lat, group=group), color='black')
m2

# over a GoogleMap (not working if not correctly projected)
map <- get_map(location = 'Brazil', zoom=4)
m0 <- ggmap(map)
m1 <- m0 + geom_polygon(aes(x=long, y=lat, group=group, fill=rendapc), data=brRenMapDf, alpha=.9)
m2 <- m1 + geom_path(aes(x=long, y=lat, group=group), data=brRenMapDf, color='black')
m2

# add text
library(doBy)
txtVal <- summaryBy(long + lat + rendapc ~ id, data=brRenMapDf, FUN=mean, keep.names=T)
m3 <- m2 + geom_text(aes(x=long, y=lat, label=rendapc), data=txtVal, col="yellow", hjust=0.5, vjust=0.5, cex=3)
m3 
```

My result I want to improve:

![enter image description here](../Images/ed23f4dcd41d9d037834d48f9ec93cf6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T21:42:27.063

关于改变色标，ggplot2 有一个统一的处理比例的方法。您正在寻找的功能始终具有格式`scale_{which_scale}_{scale_type}`，美学在哪里（例如，`which_scale`您在或中使用的内容），并且可以是连续的或离散的等。如果您想调整比例，您正在寻找的是, ,或 。查看这些功能的文档。`aes()``fill``size``scale_type``fill``scale_fill_continuous``scale_fill_gradient``scale_fill_gradient2`

代码示例：

```
m2 <- m1 + geom_polygon(aes(x=long, y=lat, group=group, fill=rendapc))
m2 + scale_fill_gradient(low = "blue", high = "red") 
```

# c# - 如何让应用程序检查用户输入？

> ID：15315940
> 
> 赞同：1
> 
> 时间：2013-03-09T21:07:33.173
> 
> 标签：c#, winforms, random

我正在制作一个加法辅导示例，但我找不到检查用户输入的方法。我知道有一些方法可以对一些小事情进行比较对比，例如，当学生的成绩为 90-100 时，也许你可以应用一个`MessageBox.Show`表明该学生的成绩在大多数情况下被视为 A 的方法。但是，当您检查加法的总和时，我无法弄清楚使用哪种尝试。就像，下面的代码片段会为用户产生新的问题。

```
private void Newproblem_Click(object sender, EventArgs e)
{
  Random Numbers = new Random();
  int number1;
  int number2;
  int Sum;

  number1 = Numbers.Next(400) + 101;
  number2 = Numbers.Next(400) + 101;
  theproblemLabel.Text = number1 + "  +  " + number2.ToString();
} 
```

但我也希望能够检查用户的答案。有人会为我提供如何实现这一目标的方法吗？我将非常感谢任何人可以给我的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:29:15.267

更好的方法是对问题使用一个文本框，对答案使用另一个文本框。

顺便说一句，如果您以前使用过属性，则可以使用属性：`ReadOnly`并将其设置为 true，因此用户无法修改问题。

不同情况下的布局： ![不是数字](../Images/50e6a2caad5a75a3db2e011fbf3e2251.png) ![不正确](../Images/045f891e04a4e57f4ba5acf7e0036b46.png) ![正确的](../Images/9dc45aee62342a0cbd87b0c726611699.png)

例子：

```
//Declare variables so you can use them globally
int number1, number2, sum, userSolution;
Random numbers;

private void btnProblem_Click(object sender, EventArgs e)
{
  numbers = new Random();
  number1 = numbers.Next(400) + 101;
  number2 = numbers.Next(400) + 101;

  sum = number1 + number2;
  txtProblem.Text = number1 + "  +  " + number2;
}

private void btnSolution_Click(object sender, EventArgs e)
{
  // You try to parse the text to a integer,
  // if it works its stored in userSolution,
  // If it fails, it shows the messagebox
  if (!int.TryParse(txtSolution.Text, out userSolution))
  {
    MessageBox.Show("Input is not a valid number.");
  }
  else
  {
    // Check user solution and compare it to the sum
    if (userSolution == sum)
    {
      MessageBox.Show("Correct!", "Problem Solved!");
    }
    else
    {
      MessageBox.Show("Not Correct.", "Please try again.");
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:14:33.537

您可以将答案存储在文本框的 Tag 属性中

```
number1 = Numbers.Next(400) + 101;
number2 = Numbers.Next(400) + 101;
int answer = number1 + number2;

theproblemLabel.Text = string.Format("{0} + {1}", number1, number2);
theproblemLabel.Tag = answer; 
```

然后，当用户单击按钮以确认其答案时，您检查存储的标签

```
private void Answer_Click(object sender, EventArgs e)
{
  int userAnswer;
  if(!Int32.TryParse(txtAnswer.Text, out userAnswer))
    MessageBox.Show("Please enter a number!");
  else
  {
    if(userAnswer == Convert.ToInt32(theproblemLabel.Tag))
      MessageBox.Show("Correct answer!");
    else
      MessageBox.Show("Wrong answer, try againg!");
  }
} 
```

我假设您有一个名为 TextBox`txtAnswer`的用户输入答案的地方，以及一个名为`Answer`clicked 的按钮以确认答案

# java - How to get the Selection of JList items and show this in a JOptionPane as a message

> ID：15315943
> 
> 赞同：0
> 
> 时间：2013-03-09T21:07:44.073
> 
> 标签：java

I am creating a program where the user selects an item from a list, then the user enters a text to a TextField and then they press a button which then alerts the user of which item was selected alongside the text from the user.how do I go about alerting the user of which item was selected alongside the text from the user when the button is clicked.

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.event.*;

public class fruitList extends JFrame implements ListSelectionListener
{
    private JTextField textField;
    private JList<String> fruitList;
    private JButton buttonwhich;
    private static fruitList  frame;

 public static void main(String[] args)
    {

        fruitList  frame = new fruitList();
        frame.setTitle("Fruit List");
        frame.setSize(350,150);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
   }
   public fruitList()
   {

      final String[] FRUIT_NAME = {"Banana", "Apple", "Orange"};

      setLayout(new FlowLayout());
      buttonwhich = new JButton("Which");
      fruitList = new JList<String>(FRUIT_NAME);
      fruitList.setVisibleRowCount(2); 
      add(new JScrollPane(fruitList));
      fruitList.addListSelectionListener(this);

      textField = new JTextField(10);

      add(textField);
      add(buttonwhich);
      ButtonHandler handler = new ButtonHandler();
      buttonwhich.addActionListener(handler);

   }  
   class ButtonHandler implements ActionListener {
        public void actionPerformed(ActionEvent e) {

            JOptionPane.showMessageDialog(frame,
                    "You Pressed \t" + e.getActionCommand());

        }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:34:58.220

鉴于您的 ButtonHandler 是一个内部类，因此您可以访问私有变量，然后 getter 可以在其中检索所选值，如下所示：

`JOptionPane.showMessageDialog(frame, "You Pressed \t" + fruitList.getSelectedValue() + ";" + textField.getText());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:43:08.203

我已经修复了导入 java.awt 的问题。*; 导入 java.awt.event。*;

```
import javax.swing.*;
import javax.swing.event.*;

public class fruitList extends JFrame
{
    private JTextField textField;
    private JList<String> fruitList;
    private JButton buttonwhich;
    private static fruitList  frame;

 public static void main(String[] args)
    {

        fruitList  frame = new fruitList();
        frame.setTitle("Fruit List");
        frame.setSize(350,150);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
   }
   public fruitList()
   {

      final String[] FRUIT_NAME = {"Banana", "Apple", "Orange"};

      setLayout(new FlowLayout());
      buttonwhich = new JButton("Which");
      fruitList = new JList<String>(FRUIT_NAME);
      fruitList.setVisibleRowCount(2); 
      add(new JScrollPane(fruitList));
     //fruitList.addListSelectionListener(this);

      textField = new JTextField(10);

      add(textField);
      add(buttonwhich);
      ButtonHandler handler = new ButtonHandler();
      buttonwhich.addActionListener(handler);

   }  
   class ButtonHandler implements ActionListener {
       private Object sel;
        public void actionPerformed(ActionEvent e) {

             int[] selectedIx = fruitList.getSelectedIndices();
              for (int i = 0; i < selectedIx.length; i++) {
                  sel = fruitList.getModel().getElementAt(selectedIx[i]);
                }
            JOptionPane.showMessageDialog(frame,
                    "You Pressed \t" + e.getActionCommand()+sel+textField.getText());

        }
   }
} 
```

# php - 在深度优先搜索中实现显式堆栈

> ID：15315948
> 
> 赞同：7
> 
> 时间：2013-03-09T21:08:33.263
> 
> 标签：php, algorithm, recursion, graph, depth-first-search

我有一个特别大的图，几乎不可能使用递归进行遍历，因为它使用了过多的内存。

下面是我的深度优先函数，使用递归：

```
public function find_all_paths($start, $path)
{
    $path[] = $start;
    if (count($path)==25) /* Only want a path of maximum 25 vertices*/ {
        $this->stacks[] = $path;
        return $path;

    }
    $paths = array();

    for($i = 0; $i < count($this->graph[$start])-1; $i++) {
        if (!in_array($this->graph[$start][$i], $path)) {
     $paths[] = $this->find_all_paths($this->graph[$start][$i], $path);

        }
    }

    return $paths;
} 
```

我想重写这个函数，所以它是非递归的。我假设我需要制作某种队列，并使用`array_shift()`函数的哪个部分弹出值，以及如何确保保留排队的顶点（以放置最终路径`$this->stacks`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:50:59.863

它不占用指数空间，树中的路径数等于叶子的数量，每个叶子从根开始只有 1 条路径..

这是对任意二叉树的 DFS 简单搜索：

```
// DFS: Parent-Left-Right
public function dfs_search ( $head, $key )
{
    var $stack = array($head);
    var $solution = array();

    while (count($stack) > 0)
    {
        $node = array_pop($stack);

        if ($node.val == $key)
        {
            $solution[] = $node;
        }

        if ($node.left != null)
        {
            array_push($stack, $node.left);
        }

        if ($node.right != null)
        {
            array_push($stack, $node.right);
        }
    }

    return $solution;
} 
```

在树中查找所有路径所需的只是 Branch & Fork，这意味着每当您分支时，每个分支都会获取当前路径的副本.. 这是我写的 1 行递归分支 & fork：

```
// Branch & Fork
public function dfs_branchFork ( $node, $path )
{
    return array($path)
        +($node.right!=null?dfs_branchFork($node.right, $path+array($node)):null)
        +($node.left!=null?dfs_branchFork($node.left, $path+array($node)):null);
} 
```

# file-io - Writing in a file located in a Midlet Java ARchive

> ID：15315952
> 
> 赞同：0
> 
> 时间：2013-03-09T21:09:22.753
> 
> 标签：file-io, jar, java-me, midlet

I have planned to develop a JME midlet. I want to include a text file in the Java ARchive. Each line in the text file will contain comma-separated strings. The last string in a line will be a flag.

I want my midlet to read the text file. I have looked at the MIDP 2.0 javadoc. The `Class.getResourceAsStream(String name)` method returns an InputStream objet. I can use this method to read my text file.

I want my midlet to change the flag of lines in my text file. Is it possible to write in the text file included in my JAR? If so then what classes and methods I have to use?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:43:01.510

Jar 文件在设备上是只读的。您的 midlet 可以读取文本文件，但不能写回某些内容。（这是设计使然，jar 文件可能会预先安装到 ROM 中，或者可能会被签名。或者设备可能会在安装 midlet 时进行圆顶优化。）

您可以将信息写入一个名为 RecordStore 的东西中。如果您只需要一个标志，则将此标志写入 RecordStore。下次您的 midlet 启动时，您检查记录存储是否存在并包含您的标志。

# android - 如何从两个匹配的特征中获取像素距离

> ID：15315955
> 
> 赞同：0
> 
> 时间：2013-03-09T21:09:38.470
> 
> 标签：android, opencv

我正在使用 Android OpenCV 从相机的输入帧中检测特征。我正在使用带有 BFMatcher 的 ORB 特征检测器和 ORB 描述符提取器。现在我得到了一些匹配 Mat 格式的

```
matches = Mat [ 421*1*CV_32FC4, isCont=true, isSubmat=false, nativeObj=0x5fad7b30, dataAddr=0x5fab84f0 ] 
```

我想知道 nativeObj 和 dataAddr 代表什么？我想以像素为单位**获得两个匹配特征之间的距离**，知道吗？

我发现其他人也有同样的问题，但没有回复。[如何在 OpenCV Matcher 上访问点位置？](https://stackoverflow.com/questions/12937490/how-to-access-points-location-on-opencv-matcher)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:37:20.263

当您执行特征描述符的匹配时，您应该得到`MatOfDMatch`. 你的代码应该是这样的：

```
DescriptorMatcher matcher = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_HAMMING);
MatOfDMatch matches = new MatOfDMatch();
matcher.match(descriptors1,descriptors2 ,matches); 
```

之后您可以转换`MatOfDMatch`为`List<DMatch>`更容易操作。你可以这样做：

```
List<DMatch> matchesList = matches.toList(); 
```

然后您可以访问匹配点并获取笛卡尔坐标：

```
Point pt1 = keypoints1.toList().get(matchesList.get(i).queryIdx).pt; 
Point pt2 = keypoints2.toList().get(matchesList.get(i).trainIdx).pt; 
```

只需计算两点之间的距离：

```
double dist_x_pow = Math.pow(Math.abs(pt1.x - pt2.x),2);
double dist_y_pow = Math.pow(Math.abs(pt1.y - pt2.y),2);
double DISTANCE = Math.sqrt(dist_x_pow + dist_y_pow); 
```

关于`nativeObj`，`dataAddr`我不确定，但我认为这与 OpenCV 库是用 C 实现的事实有关，我认为这个值表示 Mat 对象的内存地址。

# three.js - 结合 THREE.MeshFaceMaterial 和 THREE.BackSide？

> ID：15315962
> 
> 赞同：0
> 
> 时间：2013-03-09T21:10:27.577
> 
> 标签：three.js

使用three.js v56：

我有一个名为 的纹理数组`materialArray`，然后我创建

```
var cubeMaterial = new THREE.MeshFaceMaterial( materialArray ); 
```

但是，我希望这种纹理被反转；对于名为 的“正常”材料`simpleMaterial`，可以输入：

```
simpleMaterial.side = THREE.BackSide; 
```

唉，这在这种情况下没有效果；材料仍然显示在“正面”一侧。那么，在使用 MeshFaceMaterial 中的纹理数组时，如何将纹理设置为背面？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:05:46.217

`materialArray`需要是一组材料，而不是一组纹理。

您必须为要翻转的材料阵列中的每种材料设置`side`属性 。`THREE.BackSide`

三.js r.56

# c++ - 当作为参数发送时增加指针的值

> ID：15315967
> 
> 赞同：6
> 
> 时间：2013-03-09T21:11:02.150
> 
> 标签：c++, c, pointers, microcontroller

我陷入以下指针问题：

假设您有一个功能：

```
void Function (unsigned char *ubPointer)
{
    ubPointer++;
}

int main (void)
{
    unsigned char *PointerX;

    Function( PointerX );
} 
```

我想要的是 ++ 反映在 PointerX 中，而不是将其声明为全局变量。

非常感谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T21:12:16.733

*在 C++ 中，通过引用*传递指针（不要忘记为函数指定返回类型）：

```
void Function (unsigned char*& ubPointer)
//                           ^
{
    ubPointer++;
} 
```

这不需要对调用代码进行任何进一步的更改。`ubPointer`从函数返回时，调用者可以看到副作用。

*在 C 中，您可以通过将指针*传递给您的指针来实现等效结果：

```
void Function (unsigned char** ubPointer)
//                           ^
{
    (*ubPointer)++;
//  ^^^^^^^^^^^^
} 
```

这将要求您更改调用函数的方式：

```
int main()
{
    unsigned char* p;
    Function(&p);
    //       ^
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:14:35.520

或者，如果你想做 C 风格

```
void Function (unsigned char **ubPointer)
{
    (*ubPointer)++;
} 
```

因为

```
Function (unsigned char **ubPointer)
{
    ubPointer++;
} 
```

将增加指向的地址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-16T19:45:53.920

```
void Function (unsigned char *ubPointer)
{
    (*ubPointer)++;  
}

int main (void)
{
    unsigned char *PointerX;

    Function( PointerX );
} 
```

这是修正

# javascript - 根据方向更新精灵坐标

> ID：15315968
> 
> 赞同：0
> 
> 时间：2013-03-09T21:11:05.967
> 
> 标签：javascript, sprite

我有一个代表子弹的精灵，它的基本实现如下：

```
function Bullet(x, y, rotation) {
    this.x = x;
    this.y = y;
    this.direction = rotation;
    this.speed = 5;
}

Bullet.prototype.update = function() {
    // Move the bullet forward
    this.x = Math.sin(this.rotation) * this.speed;
    this.x = Math.cos(this.rotation) * this.speed;
} 
```

我在这里尝试做的是使子弹朝着它所面对的方向并相对于它的速度向前移动。但是，当调用该`update()`方法时`this.x`，`this.x`是`NaN`.

如果给定`x`,`y`和`rotation`信息，使精灵朝着它所面对的方向移动的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:13:35.953

你有一个错字。这个：

```
this.x = Math.sin(this.rotation) * this.speed; 
```

应该

```
this.x = Math.sin(this.direction) * this.speed; 
```

# android - 无法从 getOrientation 方法获取正确的度数

> ID：15315970
> 
> 赞同：0
> 
> 时间：2013-03-09T21:11:07.920
> 
> 标签：android, orientation, android-sensors

我正在尝试从 Android 方向获取倾斜天使。

我从中得到的价值观

SensorManager.getOrientation(mRotationMatrix, mValuesOrientation)

不是度数....将手机放在水平面上会返回不正确的值

我尝试使用网上找到的几种方法，但没有任何运气..

到目前为止尝试过

Math.sin(Math.toRadians(mValuesOrientation[0]));

Math.toDegrees(mValuesOrientation[0]);

和别的

代码如下

```
public class MainActivity extends Activity  {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);        

    SensorManager sensorManager = (SensorManager) this.getSystemService(SENSOR_SERVICE);        

    final float[] mValuesMagnet      = new float[3];
    final float[] mValuesAccel       = new float[3];
    final float[] mValuesOrientation = new float[3];
    final float[] mRotationMatrix    = new float[9];

    final Button btn_valider = (Button) findViewById(R.id.button1);
    final TextView txt1 = (TextView) findViewById(R.id.editText1);
    final SensorEventListener mEventListener = new SensorEventListener() {
        public void onAccuracyChanged(Sensor sensor, int accuracy) {
        }

        public void onSensorChanged(SensorEvent event) {
            // Handle the events for which we registered
            switch (event.sensor.getType()) {
                case Sensor.TYPE_ACCELEROMETER:
                    System.arraycopy(event.values, 0, mValuesAccel, 0, 3);
                    break;

                case Sensor.TYPE_MAGNETIC_FIELD:
                    System.arraycopy(event.values, 0, mValuesMagnet, 0, 3);
                    break;
            }
        };
    };

    // You have set the event lisetner up, now just need to register this with the
    // sensor manager along with the sensor wanted.
    setListners(sensorManager, mEventListener);

    btn_valider.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View view)
        {
            SensorManager.getRotationMatrix(mRotationMatrix, null, mValuesAccel, mValuesMagnet);
            SensorManager.getOrientation(mRotationMatrix, mValuesOrientation);
            String test;
           /* double accX = -mValuesOrientation[0]/SensorManager.GRAVITY_EARTH;
            double accY = -mValuesOrientation[1]/SensorManager.GRAVITY_EARTH;
            double accZ = -mValuesOrientation[2]/SensorManager.GRAVITY_EARTH;
            double totAcc = Math.sqrt((accX*accX)+(accY*accY)+(accZ*accZ));
            double tiltX = Math.asin(accX/totAcc);
            double tiltY = Math.asin(accY/totAcc);
            double tiltZ = Math.asin(accZ/totAcc);*/
            //float tiltX = mValuesOrientation[0] * 57.2957795f;
            //float tiltY = mValuesOrientation[1] * 57.2957795f;
            //float tiltZ = mValuesOrientation[2] * 57.2957795f;
            //double tiltX =Math.sin(Math.toRadians(mValuesOrientation[0]));
            //double tiltY =Math.sin(Math.toRadians(mValuesOrientation[1]));
            //double tiltZ =Math.sin(Math.toRadians(mValuesOrientation[2]));
            //String.format("Azimuth: %.2f\n\nPitch:%.2f\nRoll", azimuth,
            //        pitch, roll);
            double tiltX = Math.toDegrees(mValuesOrientation[0]);
            double tiltY = Math.toDegrees(mValuesOrientation[1]);
            double tiltZ = Math.toDegrees(mValuesOrientation[2]);
            test = "results New: " +tiltX +" "+tiltY+ " "+ tiltZ;
            Log.d("test", test);
            txt1.setText(test);
        }
    });

}
public void setListners(SensorManager sensorManager, SensorEventListener mEventListener)
{
    sensorManager.registerListener(mEventListener, sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), 
            SensorManager.SENSOR_DELAY_NORMAL);
    sensorManager.registerListener(mEventListener, sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD), 
            SensorManager.SENSOR_DELAY_NORMAL);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:01:04.440

getOrientation 以弧度返回方位角、俯仰角和滚动角。

mValuesOrientation[0] 是方位角，围绕 z 轴旋转。
mValuesOrientation[1] 是俯仰，围绕 x 轴的旋转。
mValuesOrientation[2] 是滚动，围绕 y 轴旋转。

如果您的手机平放在桌子上，俯仰和横滚应该几乎为 0，但方位角不是。如果您的手机尺寸较长，即 y 轴正好指向磁北，则它仅为 0。

您可以使用俯仰或滚动（取决于设备方向）来计算手机的倾斜度，即屏幕表面与世界 xy 平面之间的角度，或者您可以使用我在[如何测量倾斜度中的答案的倾斜度手机在 XY 平面上使用 Android 中的加速度计](https://stackoverflow.com/questions/11175599/how-to-measure-the-tilt-of-the-phone-in-xy-plane-using-accelerometer-in-android/15149421#15149421)

您还应该阅读我在[将磁场 X、Y、Z 值从设备转换为全局参考系](https://stackoverflow.com/questions/15315129/convert-magnetic-field-x-y-z-values-from-device-into-global-reference-frame/15317814#15317814)中的答案，以更好地理解旋转矩阵。

# android - 无法在android中启动搜索活动

> ID：15315971
> 
> 赞同：0
> 
> 时间：2013-03-09T21:11:12.147
> 
> 标签：android, xml, json

我是android编程的新手。我想创建一个搜索活动，我确实无法做到。以下是 java 代码、xml 代码和我的 logCat。Logcat 总是要求“强制关闭”。我正在 android 2.2 上构建这个应用程序。请帮忙。

这是 searchActivity.java 代码：

```
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jsonParser = new JSONParser();

ArrayList<HashMap<String, String>> schemeList;
private ListView lv;
// products JSONArray
JSONArray scheme_array = null;

EditText inputSearch;
ArrayAdapter<HashMap<String, String>> adapter;

// Inbox JSON url
private static final String INBOX_URL = "http://115.240.97.85/Schemes_NAV/schemes.json";

// ALL JSON node names
private static final String TAG_SCHEME = "scheme";
private static final String TAG_ID = "id";
private static final String TAG_FROM = "id_from";
private static final String TAG_SUBJECT = "subject";
private static final String TAG_LASTPRICE = "last_price";
private static final String TAG_CHANGE = "change";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mf_search);

    // Hashmap for ListView
    schemeList = new ArrayList<HashMap<String, String>>();

    // Loading INBOX in Background Thread
    new LoadInbox().execute();

    ListView lv = (ListView)findViewById(R.id.mfList); // create a list view

    inputSearch = (EditText) findViewById(R.id.EditText01);
    adapter = new ArrayAdapter<HashMap<String, String>>(this, R.layout.mf_search, schemeList);
    lv.setAdapter(adapter);

    inputSearch.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            searchActivity.this.adapter.getFilter().filter(cs);
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    });
}

/**
 * Background Async Task to Load all INBOX messages by making HTTP Request
 * */
class LoadInbox extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(searchActivity.this);
        pDialog.setMessage("Loading Schemes ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Inbox JSON
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        // getting JSON string from URL
        JSONObject json = jsonParser.makeHttpRequest(INBOX_URL, "GET",
                params);

        // Check your log cat for JSON response
        Log.d("Scheme JSON: ", json.toString());

        try {
            scheme_array= json.getJSONArray(TAG_SCHEME);
            // looping through All messages
            for (int i = 0; i < scheme_array.length(); i++) {
                JSONObject c = scheme_array.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String id_from = c.getString(TAG_FROM);
                String subject = c.getString(TAG_SUBJECT);
                String lastprice = c.getString(TAG_LASTPRICE);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_FROM, id_from);
                map.put(TAG_SUBJECT, subject);
                map.put(TAG_LASTPRICE, lastprice);

                // adding HashList to ArrayList
                schemeList.add(map);
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();

        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        searchActivity.this, schemeList,
                        R.layout.inbox_list_item, new  String[] { TAG_FROM},
                        new int[] { R.id.from });
                // updating listview
                setListAdapter(adapter);
            }

        });
    }

}} 
```

以下显示 xml 即 inbox_list_item.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/from"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:paddingBottom="4dip"
    android:paddingLeft="8dip"
    android:paddingTop="8dip"
    android:textColor="@android:color/white"
    android:textSize="20dip"
     />

<CheckBox
    android:id="@+id/CheckBox01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="16dp"
    android:clickable="true" /> 
```

这是我的 mf_search.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/a"
android:orientation="vertical" >

<EditText
    android:id="@+id/EditText01"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/Search" >
</EditText>

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="378dp"
    android:layout_weight="925.26"
    android:clickable="true" >

</ListView>

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Add" /> 
```

这是我的 LogCat

```
03-10 02:14:16.637: D/dalvikvm(569): GC_EXTERNAL_ALLOC freed 720 objects / 53960 bytes in 153ms
03-10 02:14:24.728: D/dalvikvm(569): GC_EXTERNAL_ALLOC freed 486 objects / 26136 bytes in 93ms
03-10 02:14:25.868: D/AndroidRuntime(569): Shutting down VM
03-10 02:14:25.868: W/dalvikvm(569): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-10 02:14:25.917: E/AndroidRuntime(569): FATAL EXCEPTION: main
03-10 02:14:25.917: E/AndroidRuntime(569): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.nav2/com.example.nav2.searchActivity}: java.lang.NullPointerException
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.os.Looper.loop(Looper.java:123)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-10 02:14:25.917: E/AndroidRuntime(569):  at java.lang.reflect.Method.invokeNative(Native Method)
03-10 02:14:25.917: E/AndroidRuntime(569):  at java.lang.reflect.Method.invoke(Method.java:521)
03-10 02:14:25.917: E/AndroidRuntime(569):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-10 02:14:25.917: E/AndroidRuntime(569):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-10 02:14:25.917: E/AndroidRuntime(569):  at dalvik.system.NativeStart.main(Native Method)
03-10 02:14:25.917: E/AndroidRuntime(569): Caused by: java.lang.NullPointerException
03-10 02:14:25.917: E/AndroidRuntime(569):  at com.example.nav2.searchActivity.onCreate(searchActivity.java:82)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-10 02:14:25.917: E/AndroidRuntime(569):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-10 02:14:25.917: E/AndroidRuntime(569):  ... 11 more
03-10 02:14:30.177: I/Process(569): Sending signal. PID: 569 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:15:05.123

利用

```
 ListView lv = (ListView) findViewById(android.R.id.list); 
```

**或者**

```
 ListView lv=this.getListView(); 
```

代替

```
ListView lv = (ListView)findViewById(R.id.mfList); 
```

因为您在 xml 中有 ListView id`android:id="@android:id/list"`但试图找到`R.id.mfList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:20:03.590

使用`ListView lv = (ListView) findViewById(android.R.id.list)`，您可以在 XML 中看到您的列表 ID 是`android:id="@android:id/list`但您的目标`ListView lv = (ListView)findViewById(R.id.mfList)`不存在

# xaml - 将 DrawingSurface 与 3D Starter Kit WP8 一起使用

> ID：15315974
> 
> 赞同：0
> 
> 时间：2013-03-09T21:11:34.400
> 
> 标签：xaml, directx, windows-phone-8

默认值`Windows Phone 8` `D3D + XAML template`适用于`DrawingSurface`. 但是[3D Starter Kit](http://code.msdn.microsoft.com/Visual-Studio-3D-Starter-455a15f1?SRC=VSIDE)没有。

问题是 C++ 似乎返回的是 a `IDrawingSurfaceBackgroundContentProvider`而不是`DrawingSurface`等价的。

我试图将 3D Starter Kit 示例更改为更接近普通模板，但只是遇到错误。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:25:54.550

如果您创建 Visual C++ Windows Phone 模板，Windows Phone Direct3D with XAML 应用程序，您将看到它使用了 DrawingSurfaceBackgroundGrid。

它是 Visual C# Windows Phone 模板，带有 Direct3D 应用程序的 Windows Phone XAML，它使用 DrawingSurface。

# windows - 如何将文本文件中提供的目录列表附加到 PATH 变量？

> ID：15315975
> 
> 赞同：0
> 
> 时间：2013-03-09T21:11:38.947
> 
> 标签：windows, batch-file, dos

我有一个`list.txt`由目录组成的文本文件，如下所示。

```
C:\Program Files\gs\gs9.07\bin
C:\Program Files (x86)\Adobe\Reader 11.0\Reader
C:\Program Files (x86)\Google\Chrome\Application
C:\Program Files (x86)\cwRsync\bin
C:\Program Files (x86)\PDF Labs\PDFtk Server\bin 
```

我想创建一个批处理文件，将每个项目永久附加`list.txt`到系统`PATH`环境变量中。

我的失败尝试如下。

```
rem batch.bat
for /f "delims=" %%x in (list.txt) do (setx PATH "%PATH%;%%x" /m) 
```

`batch.bat`我以管理权限调用，但没有附加到`PATH`. 你能帮我解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:47:40.087

```
@ECHO OFF
setlocal
SET testvar=%PATH%
FOR /f "delims=" %%x IN (list.txt) DO (
CALL SET testvar=%%testvar%%%%x;
)
setx testvar "%testvar%" 
```

好吧-这为将来的调用设置了“testvar”-我不想更改我的`PATH`; 现有实例，包括当前实例，将保持不变（如文档所述。）

您的实现的问题在于，当解析 FOR 循环时，在执行`%var%`循环之前，任何内容都会被其当时存在的值替换。结果，您的命令被执行为

```
setx path "(yourexistingpath);C:\Program Files\gs\gs9.07\bin"
setx path "(yourexistingpath);C:\Program Files (x86)\Adobe\Reader 11.0\Reader"
... 
```

它*应该*根据附加的文件（仅）中的最后一行设置您的路径。

...当然，在 CURRENT 环境中设置所需要做`TESTVAR`的就是删除`SETLOCAL`（实际上只是为了在测试时保持我的环境清洁）或添加一行

```
ENDLOCAL&set testvar=%testvar% 
```

# sql - SQL另一种规范化方式

> ID：15315976
> 
> 赞同：0
> 
> 时间：2013-03-09T21:12:01.443
> 
> 标签：sql, database, normalization, erd

我只是尝试完成任务并坚持标准化。（这应该是逻辑 ERD）

![在此处输入图像描述](../Images/d54f9cb181dc14ef9b36a4ee4ba80a13.png)

这里有更多可能的标准化方式吗？我只是坚持下去。抱歉，我只是在组成员表中错过了组 ID 附近的星号

![在此处输入图像描述](../Images/ee940a245abb0463bb7e07f6235bde1b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:18:54.323

GroupMember、GroupLeader 和 Supervisor 应该是与 Person 表的关系。也许像下面这样？

```
Person (
    id
    name
    surname
    date of birth
    gender
    home address
    emergency contact number
    comment field
)

Activity (
    id
    type of activity
    activity description
    date
    morning or afternoon
    supervisor -> Person
)

ActivityParticipant (
    activity id -> Activity
    person id -> Person
)

Group (
    id
    name
    start date of stay
    end date of stay
    (amount of people in group?)
)

GroupMember (
    person id -> Person
    group id -> Group
)

Group Leader (
    group id -> Group
    person id -> Person
)

Chalet (
    id
    Chalet number
    Chalet name
    number it sleeps
    price per individual
)

Accomodation (
    group id -> Group
    chalet id -> Chalet
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:30:28.797

> 关系数据库不支持继承

我知道如何解决这个问题的三种可能方法是：

[1.单表继承](http://martinfowler.com/eaaCatalog/singleTableInheritance.html)

[2.类表继承](http://martinfowler.com/eaaCatalog/classTableInheritance.html)（这有点像@thebjorn 建议的。）

[3.Concrete Table Inheritance](http://martinfowler.com/eaaCatalog/concreteTableInheritance.html)（这就是你现在所拥有的，我认为使用这个解决方案没有任何问题。）

**编辑：**

我看到你把它改成了`LOGICAL ERD`，这当然是关于物理模型的。

# mysql - 每个 ID 限制一行 (MySQL)

> ID：15315980
> 
> 赞同：1
> 
> 时间：2013-03-09T21:12:42.070
> 
> 标签：mysql, sql, join, greatest-n-per-group

我在 MySQL 查询中加入了几个表，它们通过员工 ID 号链接。

ID 号在表 A 和 B 中是唯一的，但在表 C 中有多个行，每个条目的日期（存储为字符串）是唯一的。

我需要将表 C 和 LIMIT 表 C 中每个员工 ID 号的最近日期标识为每个 ID 号的一个条目（显然是最近的）。

我不确定如何将每个员工 ID 号的 LIMIT 设置为 1。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T22:03:15.007

下面的查询使用*子查询*来获取每个on 的每个*最近日期*。`EmployeeID``tableC`

```
SELECT  a.*, b.*, c.*
FROM    tableA a
        INNER JOIN tableB b 
            ON a.EmployeeID = b.EmployeeID
        INNER JOIN tableC c
            ON a.EmployeeID = c.EmployeeID
        INNER JOIN
        (
            SELECT  EmployeeID, MAX(date) max_date
            FROM    tableC
            GROUP   BY  EmployeeID
        ) d ON  c.EmployeeID = d.EmployeeID AND
                c.Date = d.max_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:06:30.353

From what I understood on your question:

```
select a.*, b.*, max(c.date) from A
     inner join B on A.id=B.id
     inner join C on A.id=C.id
     group by A.id 
```

This would group the records by the ID of A. That is, you would get a row in the response for each of the rows in A (because they are uniquely identified by that ID). Same thing happens with B, as they have the same ID. And then, in C, you have multiple records per record in A, so grouping them and getting the max of the date will just return one date of C per A (the max of them in each case).

# css - 动态内容页面，如何避免被绝对 div 覆盖（普通 div 和文本）

> ID：15315983
> 
> 赞同：0
> 
> 时间：2013-03-09T21:12:52.037
> 
> 标签：css, html

我有一个 "red" `div`，我想在 "black"`div`和页脚的文本下强制使用 "red"`div`应该`div`用 class结束`f_content`。看我的[小提琴](http://jsfiddle.net/npMgm/2/)。

我的错在哪里？

我应该改变什么...？

`z-index`具有负面影响的技巧。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:46:03.583

您走在正确的轨道上，您可以使用`z-index`. 请记住始终将 设置为`position`要为其设置索引的元素。见下文，红色的 div 在黑色的下方，但在蓝色的页脚上方：

`**[Working demo](http://jsbin.com/iwiqis/2)**`

基本上，这是您的代码中唯一需要的更改：

```
.wsp_box_data .image { 
  position: relative;
  z-index:  2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:50:07.107

我得到了一个解决方案：

```
 `f_content`
    position: relative;
    z-index: 2;

    `image`
    position: relative;
    z-index: 3;

   `cow_object`
   z-index: -1 
```

[现场解决方案](http://jsfiddle.net/npMgm/6/)

# python - 使用 python 和 node.js

> ID：15315984
> 
> 赞同：2
> 
> 时间：2013-03-09T21:12:55.483
> 
> 标签：python, node.js

我以前在 python 上编程。我几个月前就开始了，所以我不是“大师”类型的开发人员。我也知道 HTML 和 CSS 的基础知识。

我看到一些关于 node.js 的教程，我真的很喜欢它。我无法用我从 html 和 css 中获得的知识来创建这些表单、条形图、按钮等。

我可以使用 node.js 创建用户在浏览器上看到的内容并使用 python 编写如果有人按下“提交”按钮会发生什么？例如重定向、sql 读写等。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T05:19:38.233

您可以在节点服务器的后端调用 python 脚本，以响应用户单击按钮。为此，您可以使用`child_process`包。它允许您调用安装在您机器上的程序。

例如，当用户在 /reg 页面上发布某些内容时，如何运行脚本：

```
app.post('/reg', function(request, response){
      spawn = require('child_process').spawn;
      path = "location of your script";
      // create child process of your script and pass two arguments from the request
      backend = spawn('python',[path, request.body.name, request.body.email]);
      backend.on('exit', function(code) {
           console.log(path + ' exited with code ' + code);
           if(code==0)
           response.render('success'); //show success page if script runs successfully
           else
           response.redirect('bad');
      });    
}); 
```

必须在您的系统中安装 Python 以及您需要的其他 Python 库。它无法响应/重定向到节点的请求，否则你为什么要使用节点。在罗马做到入乡随俗。在 node 中使用 JavaScript，调用外部程序没有使用 JS 库那么快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T21:22:55.573

Node.js 是一个*服务器端*JavaScript 环境（如 Python）。它在服务器上运行并与数据库交互，生成客户端看到的 HTML，但实际上浏览器并不直接访问。

另一方面，浏览器直接运行*客户端*JavaScript。

如果你想在服务器上使用 Python，你可以使用一堆框架：

*   姜戈
*   烧瓶
*   瓶子
*   网页版
*   樱桃派
*   [很多很多更多...](http://wiki.python.org/moin/WebFrameworks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T21:14:42.617

我认为您正在倒退考虑这个问题。Node.js 允许您在没有浏览器的情况下运行浏览器 Javascript。你不会发现它在你的 Python 编程中很有用。如果您想坚持使用 Python，最好使用诸如 Pajamas 之类的框架来使用 Python 编写 Javascript，或者使用其他框架（例如 Flask 或 Twisted）将 Javascript 与 Python 集成。

# perl - 为 macintosh 编译 perl 脚本的最佳方法？（操作系统 x）

> ID：15315986
> 
> 赞同：1
> 
> 时间：2013-03-09T21:13:27.933
> 
> 标签：perl

我看到在堆栈溢出时，有关于为没有安装 perl 解释器的 Unix 和 Windows 机器编译 perl 的讨论。

即将[perl脚本编译成.exe](https://stackoverflow.com/questions/3278652/compiling-a-perl-script-to-a-exe)

我想知道为Mac做什么？在将其发送给其他人之前，我是否需要对其进行编译并使其在我自己的 OSX 系统上运行？perl 通常只是错误的语言吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:19:33.000

我为此使用[Perl Dev Kit (PDK)](http://www.activestate.com/perl-dev-kit)。它不是免费的，但使用 PerlApp 工具，我可以为许多平台创建可执行文件。

# linux - 递归编辑某个名称的文件

> ID：15315987
> 
> 赞同：1
> 
> 时间：2013-03-09T21:13:28.563
> 
> 标签：linux, bash, recursion, edit

我需要一个脚本来执行以下操作，但不知道如何处理这个想法。

1.  递归扫描目录 /home/root/multicraft/servers 找到所有名为“server.properties”的文件
2.  编辑文件，用“view-distance=4”替换“view-distance=(a number here)”

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:16:52.287

您可以使用`find`递归遍历目录。它可以通过 执行命令`-exec`。要编辑文件，您可以使用`sed`：

```
find /home/root/multicraft/servers \
    -name server.properties \
    -exec sed -i~ 's/view-distance=[0-9]\+/view-distance=4/' {} \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:18:55.873

试试这个：

```
find  /home/root/multicraft/servers -name "server.properties"|xargs sed -ri 's/(view-distance)=[0-9]+/\1=4/' 
```

在尝试之前进行备份。

# php - 解码 chr() 函数？

> ID：15315988
> 
> 赞同：1
> 
> 时间：2013-03-09T21:13:33.087
> 
> 标签：php

嘿，伙计们一直在用谷歌和stackoverflow在这个上努力......

我得到了用 php chr() 函数编码的 php 文件，这里有一些代码：

```
 <?php require_once chr(65).chr(100).chr(109).chr(105).chr(110).chr(67).chr(111).chr(110).chr(116).chr(114).chr(111).chr(108).chr(108).chr(101).chr(114).chr(46).chr(112).chr(104).chr(112);class WP_Amazonimportproducts_ImportController extends WP_Amazonimportproducts_AdminController{protected function _isAllowed(){return Mage::getSingleton(chr(97).chr(100).chr(109).chr(105).chr(110).chr(47).chr(115).chr(101).chr(115).chr(115).chr(105).chr(111).chr(110))->{"isAllowed"}(chr(99).chr(97).chr(116).chr(97).chr(108).chr(111).chr(103).chr(47).chr(97).chr(109).chr(97).chr(122).chr(111).chr(110).chr(105).chr(109).chr(112).chr(111).chr(114).chr(116).chr(112).chr(114).chr(111).chr(100).chr(117).chr(99).chr(116).chr(115).chr(47).chr(105).chr(109).chr(112).chr(111).chr(114).chr(116));}protected function _initImport(){$this->{"_title"}($this->{"__"}(chr(67).chr(97).chr(116).chr(97).chr(108).chr(111).chr(103)))->{"_title"}($this->{"__"}(chr(87).chr(80).chr(58).chr(32).chr(65).chr(109).chr(97).chr(122).chr(111).chr(110).chr(32).chr(73).chr(109).chr(112).chr(111).chr(114).chr(116)))->{"_title"}($this->{"__"}(chr(73).chr(109).chr(112).chr(111).chr(114).chr(116).chr(32).chr(80).chr(114).chr(111).chr(100).chr(117).chr(99).chr(116).chr(115)));return $this;}protected function _initProduct(){$   =Mage::getModel(chr(99).chr(97).chr(116).chr(97).chr(108).chr(111).chr(103).chr(47).chr(112).chr(114).chr(111).chr(100).chr(117).chr(99).chr(116));$    =Mage::getSingleton(chr(97).chr(100).chr(109).chr(105).chr(110).chr(47).chr(115).chr(101).chr(115).chr(115).chr(105).chr(111).chr(110))->{"getImportSettings"}();if (isset ($    [chr(105).chr(109).chr(112).chr(111).chr(114).chr(116).chr(95).chr(112).chr(97).chr(114).chr(97).chr(109).chr(115)][chr(99).chr(97).chr(116).chr(101).chr(103).chr(111).chr(114).chr(121).chr(95).chr(105).chr(100).chr(115)])){$   ->{"setCategoryIds"}($    [chr(105).chr(109).chr(112).chr(111).chr(114).chr(116).chr(95).chr(112).chr(97).chr(114).chr(97).chr(109).chr(115)][chr(99).chr(97).chr(116).chr(101).chr(103).chr(111).chr(114).chr(121).chr(95).chr(105).chr(100).chr(115)]); 
```

据我了解，我一直在尝试寻找解码器，您可以使用 ord() php 函数对其进行解码吗？我找到了一个将文本编码为 chr(65) 的脚本，如果可以将其反转以使其解码用 chr(111).chr(65) 编码的 php 脚本，那将是惊人的，我有几页需要解码和如果它可以跳过非 chr(65) 代码，我认为它会起作用的唯一方法是我可以粘贴整个页面并对其进行解码。你们有什么感想？我怎样才能解码它？

```
<html>
    <head>
        <title>Convert String To PHP ASCII in PHP chr() function</title>
    </head>
    <body>
        <b>Convert String To PHP ASCII in PHP chr() function:</b><br /><br />
        <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="get">
            <textarea name="s" rows="20" cols="100"></textarea>
            <input type="submit">
        </form>
        <br />  

        <?php
        $string = stripslashes($_GET['s']); 
        $chrstring = "";
        for ($i=0; $i < strlen($string); $i++)
        {
            $chrstring .= "chr(" . ord(substr($string,$i,1)) . ")";
            $chrstring .= ($i==strlen($string)-1)?"":".";       
        }   

        $toscreenstring = htmlentities($string);

        echo "<b>Converted:</b><br />$toscreenstring<br /><b>To:</b><br />$chrstring<br /><br />-"; 
        ?>
    </body>
</html> 
```

**编辑！**我找到了一个具有类似功能的 php 脚本来解码这个东西，但它只适用于数字（没有 chr(number).chr(number) 并且需要让它跳过非 chr(number) 以便可以粘贴整个脚本，它将解码需要的内容。

```
 <?php

   $charset = array(
        32 => ' ', 33 => '!', 34 => '"', 35 => '#', 36 => '$',
        37 => '%', 38 => '&', 39 => "'", 40 => '(', 41 => ')',
        42 => '*', 43 => '+', 44 => ',', 45 => '-', 46 => '.',
        47 => '/', 48 => '0', 49 => '1', 50 => '2', 51 => '3',
        52 => '4', 53 => '5', 54 => '6', 55 => '7', 56 => '8',
        57 => '9', 58 => ':', 59 => ';', 60 => '<', 61 => '=',
        62 => '>', 63 => '?', 64 => '@', 65 => 'A', 66 => 'B',
        67 => 'C', 68 => 'D', 69 => 'E', 70 => 'F', 71 => 'G',
        72 => 'H', 73 => 'I', 74 => 'J', 75 => 'K', 76 => 'L',
        77 => 'M', 78 => 'N', 79 => 'O', 80 => 'P', 81 => 'Q',
        82 => 'R', 83 => 'S', 84 => 'T', 85 => 'U', 86 => 'V',
        87 => 'W', 88 => 'X', 89 => 'Y', 90 => 'Z', 91 => '[',
        92 => '\\', 93 => ']', 94 => '^', 95 => '_', 96 => '`',
        97 => 'a', 98 => 'b', 99 => 'c', 100 => 'd', 101 => 'e',
        102 => 'f', 103 => 'g', 104 => 'h', 105 => 'i', 106 => 'j',
        107 => 'k', 108 => 'l', 109 => 'm', 110 => 'n', 111 => 'o',
        112 => 'p', 113 => 'q', 114 => 'r', 115 => 's', 116 => 't',
        117 => 'u', 118 => 'v', 119 => 'w', 120 => 'x', 121 => 'y',
        122 => 'z', 123 => '{', 124 => '|', 125 => '}'
    );

     function fromNumber($number)
    {
        $string = '';
        while($number)
        {
            $value = substr($number, 0, 2);
            $number = substr($number, 2);

            if($value < 32)
            {
                $value .= substr($number, 0, 1);
                $number = substr($number, 1);
            }

            $string .= $charset[ (int) $value];
        }
        return $string;
    }

 function fromString($string)
    {
        $number = '';
        foreach(str_split($string) as $char) $number .= ord($char);
        return $number;
    }

$string = 'this is my test string to convert';

$number = fromString($string);
$string = fromNumber($number);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:43:08.083

干得好：

```
function callback($hits){
    return chr($hits['1']);
}
$php_content = file_get_contents("./myFile.php");
$php_content = preg_replace_callback('/chr\((\d+)\)(\.|)/', "callback", $php_content));
file_put_contents("./myFile.php", $php_content); 
```

只需循环播放，直到所有文件都“解码”

**编辑：**

您只需要知道所有不可读的文件并将它们放入此数组中，例如：

```
$files = array();
$files[] = "./folder/file1.php";
$files[] = "./folder/file2.php";
$files[] = "./folder/file3.php";
$files[] = "./folder2/file4.php";
$files[] = "./folder2/file5.php";
$files[] = "./file1.php";

foreach($files as $file){
    $php_content = file_get_contents(file);
    $php_content = preg_replace_callback('/chr\((\d+)\)(\.|)/', "callback", $php_content));
    file_put_contents(file, $php_content);
} 
```

或者，如果它是文件的整个文件夹和所有子文件夹等等，请查看[http://php.net/manual/de/class.recursivedirectoryiterator.php](http://php.net/manual/de/class.recursivedirectoryiterator.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:28:13.510

此处的编码行是 您替换为包含被取消时`require_once 'AdminController.php' ;` [的回显值](http://codepad.viper-7.com/7XShFT)，因为您收到错误“致命错误：找不到类'WP_Amazonimportproducts_AdminController'”。在您的代码中，您可以回显并要求该语句。`require_once``echo`

```
...    
require_once chr(65).chr(100).chr(109).chr(105).chr(110).chr(67).chr(111).chr(110).chr(116).chr(114).chr(111).chr(108).chr(108).chr(101).chr(114).chr(46).chr(112).chr(104).chr(112);        
echo chr(65).chr(100).chr(109).chr(105).chr(110).chr(67).chr(111).chr(110).chr(116).chr(114).chr(111).chr(108).chr(108).chr(101).chr(114).chr(46).chr(112).chr(104).chr(112);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T21:38:27.467

好吧，我知道这不是您期望的答案，但是虽然您知道如何对其进行解码，并且因为编写一个 php 程序来解析另一个 php 文件太难了，所以我会这样做，我会加载文件到 MS Word 或任何其他文本处理器之类的东西，它可以是记事本，搜索 (Ctrl-F) 以查找`require`/`include`并删除不包含它的每一行，然后删除`echo`剩下的内容，正如 Vahe Shadunts 所写。

我知道这不是您问题的答案（“如何在 php 中做到这一点？”），但我真的认为这不值得努力，因为您可能没有那么多包含或需要的功能。在我看来，在这种情况下编写 PHP 程序并不是最佳选择。

# php - 通过常用标点符号将字符串拆分为句子

> ID：15315990
> 
> 赞同：0
> 
> 时间：2013-03-09T21:13:41.100
> 
> 标签：php, regex

我目前遇到了我认为是一项简单任务的麻烦。

如果我有一个像这样的字符串：

第 1 句“双引号短语” 第 1 句。第 2 句？第 3 句（括号中的数字，如 1.2 不应拆分）。句子 4 ' 单引号短语。其余的引用“第 4 句。第 5 句！

我想把它分成：

第 1 句“双引号短语”第 1 句。

第2句？

第 3 句（括号中的数字，如 1.2 不应拆分）。

句子 4 ' 单引号短语。引用的其余部分”第 4 句。

第五句！

显然，简单的`"\.|\?|!"`匹配是行不通的。任何帮助表示赞赏。

我意识到正则表达式可能不是最好的工具，但除非我缺少另一个快速简单的解决方案，否则我已经过了不归路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:22:27.593

尝试以下正则表达式

```
(?:^|\s).+?[.!?](?:\s|$) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:33:56.637

我不确定这是否是正则表达式的工作。

但看看这个正则表达式（使用 sed）：

```
 sed -r 's/([.?!]) +([A-Z])|\1$/\1\n\2/g' file 
```

它输出：

```
Sentence 1 “double quoted phrase” sentence 1.
Sentence 2?
Sentence 3 (numbers in parentheses like 1.2 should not be split).
Sentence 4 ' single quoted phrase. rest of quote' sentence 4.
Sentence 5! 
```

然而它并不完美。如果您将第`rest`4 句中的内容更改为`Rest`它失败。

问题是，您必须检查它所`.!?`包裹的`"",'',(),[],{}....`是否不是句子的结尾。然而，更糟糕的是，例如，我会写一个句子：

```
The dot ". is a period. 
```

请注意，我忘记了（一个错误）结束语。或以下（两句话）：

```
Why not put a brace "(" there ? The closing brace ")" is missing its partner. 
```

你的程序（通过正则表达式）怎么知道这应该是两个句子？

# java - 如何优雅地处理 Java 中的 FileNotFoundexception

> ID：15315992
> 
> 赞同：4
> 
> 时间：2013-03-09T21:13:47.903
> 
> 标签：java, exception

我正在尝试编写一个返回文件输入流的函数。它看起来像这样：

```
public FileInputStream getFileInputStream() {
    File file;
    try {
        file = new File("somepath");
    } catch (Exception e) {
    }
    FileInputStream fInputStream = new FileInputStream(file);
    return fInputStream;
} 
```

所以这是我的问题 - 显然在出现异常的情况下不会创建文件。但我需要一个文件对象来实例化 FileInputStream。我有点迷路了，如何在返回有效 FileInputStream 对象的同时处理异常？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T21:15:25.793

这就是进一步抛出异常的想法。只需将异常抛出给调用者。

```
public FileInputStream getFileInputStream() throws FileNotFoundException
{
    File file = new File("somepath");
    FileInputStream fInputStream = new FileInputStream(file);
    return fInputStream;
} 
```

这样，调用者必须处理它。这是使用它的最干净的方式。

**备注**：你应该知道实例化一个`File`对象永远不会抛出异常。`FileInputStream`可能引发异常的是 的实例化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T21:16:53.637

使用[File.exists()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#exists%28%29)，它会检查你可以对文件做些什么。

**UPD**（[Java FileOutputStream 创建文件，如果不存在](https://stackoverflow.com/a/9620718/2031799)）：

```
File yourFile = new File("score.txt");
if(!yourFile.exists()) {
    yourFile.createNewFile();
} 
FileOutputStream oFile = new FileOutputStream(yourFile, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T21:50:26.563

这是我使用的代码。你可能会觉得很有趣。

```
public static final Charset UTF_8 = Charset.forName("UTF-8");

/**
 * Provide a normalised path name which can contain SimpleDateFormat syntax.
 * <p/>
 * e.g.  'directory/'yyyyMMdd would produce something like "directory/20130225"
 *
 * @param pathName to use. If it starts or ends with a single quote ' treat as a date format and use the current time
 * @return returns the normalise path.
 */
public static String normalisePath(String pathName) {
    if (pathName.startsWith("'") || pathName.endsWith("'"))
        return new SimpleDateFormat(pathName).format(new Date());
    return pathName;
}

/**
 * Convert a path to a Stream. It looks first in local file system and then the class path.
 * This allows you to override local any file int he class path.
 * <p/>
 * If the name starts with an =, treat the string as the contents.  Useful for unit tests
 * <p/>
 * If the name ends with .gz, treat the stream as compressed.
 * <p/>
 * Formats the name with normalisePath(String).
 *
 * @param name of path
 * @return as an InputStream
 * @throws IOException If the file was not found, or the GZIP Stream was corrupt.
 */
public static InputStream asStream(String name) throws IOException {
    String name2 = normalisePath(name);
    // support in memory files for testing purposes
    if (name2.startsWith("="))
        return new ByteArrayInputStream(name2.getBytes(UTF_8));
    InputStream in;
    try {
        in = new FileInputStream(name2);
    } catch (FileNotFoundException e) {
        in = Reflection.getCallerClass(3).getClassLoader().getResourceAsStream(name2);
        if (in == null)
            throw e;
    }
    if (name2.endsWith(".gz") || name2.endsWith(".GZ"))
        in = new GZIPInputStream(in);
    in = new BufferedInputStream(in);
    return in;
} 
```

# c - 无缘无故的文件缓存

> ID：15315996
> 
> 赞同：-1
> 
> 时间：2013-03-09T21:14:17.340
> 
> 标签：c, crash

发生的情况是在性别搜索功能期间，当它到达输入我希望看到的性别的时间时，它会跳过输入，然后在没有给出原因的情况下崩溃。据我所知，其他功能工作正常（ip ut 在那里，以防错误可能是因为其中一个）

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void getinfo (char* nam[],int ag[], char gender[], int count){
  int y;
  for(y = 0; y < count; y++){
    nam[y] = malloc(50);
    printf ("What is the student's name?\t");
    scanf ("%s", nam[y]);
    printf ("\nWhat is the students age?\t");
    scanf ("%d", &ag[y]);
    printf ("\nwhat is the students gender, Male/Female\t");
    scanf (" %c", &gender[y]);
 }
}

void findeldest (char* nam[],int ag[], char gender[], int count){
    int largest = 0, y, eldest =0 ;
    for(y = 0; y < count; y++){
        if (ag[y] > eldest){
            largest = ag[y];
            eldest = y;
        }
     }
    printf ("The eldest student is:\t %s", nam[eldest]);
    printf ("\nGender:\t %c", gender[eldest]);
    printf ("\nWith an age of:\t %d \n", ag[eldest]);

}

void gendersearch (char* nam[],int ag[], char gender[], int count){
     int y;
     char choice;
     printf ("What gender would you like to see(male-m/female-f)?\n");
     scanf ("%c", choice);
     switch (choice){
            case 'm' : printf ("The male students are as follows:\n");
            case 'f' : printf ("The female students are as follows:\n");
            default : printf ("please enter m for male or f for female!\n");
     }
     if (choice == 'm'){
        for (y = 0 ; y < count; y++){                 
            if (gender[y] == choice){
               printf (nam[y]);
            }    
        }        
     }else{
          for (y = 0 ; y < count; y++){                 
            if (gender[y] == choice){
               printf (nam[y]);
            }    
          }  
     }
}

int main (){
  int amount, y;
  printf("How many students are you admitting?\t");
  scanf ("%d", &amount);
  char *name[50];
        int age[50];
        char gender[50];
  if (amount > 50){
      printf("Too many students!");
  }else{
        getinfo(name, age, gender, amount);
        findeldest(name, age, gender, amount);
  }
  gendersearch (name, age, gender, amount);
  system("pause");} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:15:16.307

您正在使用不带 & in 的 scanf`void gendersearch ()`

```
 scanf ("%c", choice); 
```

改成：

```
 scanf ("%c", &choice); 
```

Scanf 需要变量的地址而不是它的值。

# macos - 如何实现 NSResponder 动作消息 selectWord？

> ID：15315997
> 
> 赞同：1
> 
> 时间：2013-03-09T21:14:27.197
> 
> 标签：macos, cocoa, nstextview

我将 selectWord: 视为 NSResponder 操作消息，并且我天真地假设如果我在我的 NSTextView 子类上实现 selectWord: ，我就可以捕获单词选择（通过双击鼠标）。但是，这当然不会那么容易。但是，我*可以*捕获 selectAll:，至少对于 command-A 键盘事件（但不能以其他方式操作选择）。

我一定错过了一些可可事件处理知识，在这里我问我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:50:09.200

我的猜测是您发现双击选择一个单词不会调用`-selectWord:`.

您可以尝试覆盖`-mouseDown:`，并检查 NSEvent`clickCount`以确定它是否是双击。

**另一个想法：**

文本视图不调用的原因可能`-selectWord:`是它不是该方法所做的。从文档中，它“将选择扩展到其外部最近的单词边界（最多但不包括单词分隔符）”。由于它的参数不是鼠标事件，它甚至不知道点击发生在哪里。所以，`-mouseDown:`不可能是当事人。