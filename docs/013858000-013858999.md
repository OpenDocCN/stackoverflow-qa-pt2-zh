# StackOverflow 问答 13858000-13858999

# c# - 在 XML 中添加子根元素

> ID：13858004
> 
> 赞同：0
> 
> 时间：2012-12-13T10:36:40.857
> 
> 标签：c#, asp.net, xml, xmldocument

我正在制作一个包含子根节点的 XML 文档。我正在使用`XmlDocument`并添加子节点。

这是我的代码：

```
 XmlDocument doc = new XmlDocument();
  XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", null, null);
  doc.AppendChild(dec);

  XmlElement root = doc.CreateElement("LICENSE");

  if (strGInfo == "")
  {
    strGInfo = "N/A";
  }

  XmlElement ginfo = doc.CreateElement("GENERAL_INFO");
  ginfo.InnerText = strGInfo;
  root.AppendChild(ginfo);

  if (strLNo == "")
  {
     strLNo = "N/A";
  }

  XmlElement subroot = doc.CreateElement("LICENSE_INFO");
  //XmlElement root1 = doc.CreateElement("LICENSE_INFO");

  XmlElement lno = doc.CreateElement("LICENCE_NO");
  lno.InnerText = txtLNo.Text;
  subroot.AppendChild(lno);

  if (strUID == "")
  {
     strUID = "N/A";
  }

  XmlElement uid = doc.CreateElement("USER_ID");
  uid.InnerText = txtUID.Text;
  subroot.AppendChild(uid);

  if (strOrg == "")
  {
    strOrg = "N/A";
  }

  XmlElement org = doc.CreateElement("ORGANIZATION");
  org.InnerText = txtOrg.Text;
  subroot.AppendChild(org);

            if (strUName == "")
            {
                strUName = "N/A";
            }

            XmlElement uname = doc.CreateElement("USER_NAME");
            uname.InnerText = txtUName.Text;
            subroot.AppendChild(uname);

            if (strSType == "")
            {
                strSType = "N/A";
            }

            XmlElement stype = doc.CreateElement("SOLUTION_TYPE");
            stype.InnerText = txtSType.Text;
            subroot.AppendChild(stype);

            if (strVer == "")
            {
                strVer = "N/A";
            }

            XmlElement ver = doc.CreateElement("VERSION");
            ver.InnerText = txtVer.Text;
            subroot.AppendChild(ver);

            XmlElement ltype = doc.CreateElement("LICENCE_TYPE");
            ltype.InnerText = drpLType.SelectedItem.Text;
            subroot.AppendChild(ltype);

            if (strMeapSupp == "")
            {
                strMeapSupp = "N/A";
            }

            XmlElement meapsupp = doc.CreateElement("MEAP_SUPPORT");
            meapsupp.InnerText = rdoMeapSupport.Text;
            subroot.AppendChild(meapsupp);

            XmlElement LicFrom = doc.CreateElement("LICENCE_FROM");
            LicFrom.InnerText = lblLFrom.Text;
            subroot.AppendChild(LicFrom);

            XmlElement LicTo = doc.CreateElement("LICENCE_TO");
            LicTo.InnerText = lblLTo.Text;
            subroot.AppendChild(LicTo);

            XmlElement suppfrom = doc.CreateElement("SUPPORT_FROM");
            suppfrom.InnerText = lblSuppFrom.Text;
            subroot.AppendChild(suppfrom);

            XmlElement suppto = doc.CreateElement("SUPPORT_TO");
            suppto.InnerText = lblSuppTo.Text;
            subroot.AppendChild(suppto);

            doc.AppendChild(subroot);

            XmlElement subroot2 = doc.CreateElement("LICENCE_CONSTRAINT");

            if (strMaxUsr == "")
            {
                strMaxUsr = "N/A";
            }

            XmlElement maxusr = doc.CreateElement("MAX_USER");
            maxusr.InnerText = txtMaxUsr.Text;
            subroot2.AppendChild(maxusr);

            if (strMaxMach == "")
            {
                strMaxMach = "N/A";
            }

            XmlElement maxmach = doc.CreateElement("MAX_MACHINE");
            maxmach.InnerText = txtMaxMach.Text;
            subroot2.AppendChild(maxmach);

            if (strMachIP == "")
            {
                strMachIP = "N/A";
            }

            doc.AppendChild(subroot2);

            XmlElement subroot3 = doc.CreateElement("MACHINE_INFO");

            XmlElement machip = doc.CreateElement("MACHINE_IP");
            machip.InnerText = txtMachIP.Text;
            subroot3.AppendChild(machip);

            if (strMachMac == "")
            {
                strMachMac = "N/A";
            }

            XmlElement machmac = doc.CreateElement("MACHINE_MAC");
            machmac.InnerText = txtMachMac.Text;
            subroot3.AppendChild(machmac);

            doc.AppendChild(subroot3);

            XmlElement subroot4 = doc.CreateElement("LICENCE_SIGNATURE");

            XmlElement UqID = doc.CreateElement("UNIQUE_ID");
            UqID.InnerText = txtUqID.Text;
            subroot4.AppendChild(UqID);

            doc.AppendChild(subroot4);

            doc.Save(@"D:\New.xml"); 
```

我的 XML 文档应如下所示：

```
-<LICENSE>
  <GENERAL_INFO> </GENERAL INFO>
-<LICENSE_INFO>
   <LICENSE_NO> </LICENSE_NO>
   <USER_ID> </USER_ID> //etc
-<LICENCE_CONSTRAINT>
   <MAX_USER> </MAX_USER> 
   <MAX_MACHINE> </MAX_MACHINE> 
  </LICENCE_CONSTRAINT>
-<MACHINE_INFO>
  <MACHINE_IP> </MACHINE_IP> 
  <MACHINE_MAC> </MACHINE_MAC> 
 </MACHINE_INFO>
</LICENSE_INFO> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:49:07.557

我会为此使用 Linq2Xml

```
string xml = FormXml(licenceNo: "1",machineIP:"1.2.3.4",generalInfo:"some Info"); 
```

* * *

```
public string FormXml(
    string generalInfo="N/A",
    string licenceNo="N/A",
    string userID="N/A",
    string maxUser="N/A",
    string maxMachine="N/A",
    string machineIP="N/A",
    string machineMAC="N/A")
{
    return new XElement("LICENSE",
                new XElement("GENERAL_INFO", generalInfo),
                new XElement("LICENSE_INFO",
                        new XElement("LICENSE_NO", licenceNo),
                        new XElement("USER_ID", userID)),
                new XElement("LICENCE_CONSTRAINT",
                        new XElement("MAX_USER", maxUser),
                        new XElement("MAX_MACHINE", maxMachine)),
                new XElement("MACHINE_INFO",
                        new XElement("MACHINE_IP", machineIP),
                        new XElement("MACHINE_MAC", machineMAC))).ToString();

} 
```

和输出：

```
<LICENSE>
  <GENERAL_INFO>some Info</GENERAL_INFO>
  <LICENSE_INFO>
    <LICENSE_NO>1</LICENSE_NO>
    <USER_ID>N/A</USER_ID>
  </LICENSE_INFO>
  <LICENCE_CONSTRAINT>
    <MAX_USER>N/A</MAX_USER>
    <MAX_MACHINE>N/A</MAX_MACHINE>
  </LICENCE_CONSTRAINT>
  <MACHINE_INFO>
    <MACHINE_IP>1.2.3.4</MACHINE_IP>
    <MACHINE_MAC>N/A</MACHINE_MAC>
  </MACHINE_INFO>
</LICENSE> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:48:57.710

您正在创建您的根元素“许可证”：

```
XmlElement root = doc.CreateElement("LICENSE"); 
```

但是您没有将其附加到文档中。此外，您要多次附加到 doc ：

```
doc.AppendChild(subroot);
...
doc.AppendChild(subroot2);
...
doc.AppendChild(subroot3); 
```

这是不可能的，因为 XML 文档只能有 1 个根。

像这样添加你的根元素：

```
XmlElement root = doc.CreateElement("LICENSE");
doc.AppendChild(root); 
```

并将每一个`doc.AppendChild()`后期更改为`root.AppendChild()`

而且我必须同意 LB：LINQ to XML 对于这样的东西要容易得多（但这不是问题；））

# c# - 分配 currentcell datagridview 时的异常

> ID：13858007
> 
> 赞同：2
> 
> 时间：2012-12-13T10:36:59.747
> 
> 标签：c#, winforms, data-binding, datagridview

我有一个非常奇怪的例外。我有一个 datagridview 绑定到一些数据。当数据源为空时，我向其中添加一些数据，更新 datagridview 并尝试将我添加的行设置为编辑模式。这是代码：

```
foreach (DataGridViewRow row in dataGridViewActionTemplates.Rows)
{
    if (((GridActionTemplate)row.DataBoundItem).ID == actTemplate.Id)
    {
        dataGridViewActionTemplates.CurrentCell = row.Cells[dataGridViewActionTemplates.Columns.GetFirstColumn(DataGridViewElementStates.Visible).Index];
        dataGridViewActionTemplates.BeginEdit(false);
        break;
    }
 } 
```

当我尝试执行分配时，我得到一个“IndexOutOfRange”异常，它说“索引 -1 没有值”。这很奇怪，因为赋值右侧的索引大于零。

我将非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T20:26:16.040

我记得遇到了一些类似的奇怪现象，我最终发现这与 Windows 7 中选择的 Windows 主题有关。当时我的代码在 Aero 上正常工作，没有例外，但是当在 Win 7 中启用 Classic 主题或当该代码在 Windows 2003 上运行。情况与您的情况不完全相同，所以我不知道这是否是同一个问题，但这可能是一件值得关注的事情。具体问题与列标题和行标题的索引有关，奇怪的是它们在 2 个不同的主题中返回的值不同。也就是说，您可能在不知不觉中尝试修改行标题字段而不是第一个实际数据字段。

# java - 在 android 中使用 ESRI shapefile

> ID：13858008
> 
> 赞同：3
> 
> 时间：2012-12-13T10:37:01.583
> 
> 标签：java, android, sqlite, shapefile

在 google 或 stackoverflow 上找不到解决方案...

任何人都知道如何在 android 中处理 ESRI shapefile？我正在尝试构建一个简单的形状查看器（目前没有必要编写/创建 shp），并且可能稍后将地图重叠在 android 上的谷歌地图之上。

到目前为止，我尝试了 openMaps 和 GeoTools，但没有成功。读取 shapefile 并将其存储在 SQLite 数据库中也很有趣！事实上，到目前为止，我现在正在做的是将 shapefile 转换为 CSV（在 android 之外，在计算机中），然后将 CSV 读取到 SQLite 以便稍后在应用程序中读取。

但是，如果我可以仅使用 android 直接从 shape 读取到 SQLite（或 Shape -> csv -> SQLite），那将是非常有趣的。

有什么想法我该怎么做？我对Java没有太多经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T09:17:25.993

我建议使用[Shapelib](http://shapelib.maptools.org/)，它是[GDAL/OGR](http://gdal.org/)的一部分。您将需要使用[NDK](https://developer.android.com/tools/sdk/ndk/index.html)，但 GDAL 是一个优秀的库，拥有强大的社区/支持并被[许多程序](http://trac.osgeo.org/gdal/wiki/SoftwareUsingGdal)使用。

我做了一个快速[演示](https://github.com/snodnipper/shapelib-android-demo)来写入/附加到 shapefile，这应该是一个足够的起点。如果您想根据自己的需要对其进行增强，请分叉演示。

# objective-c - 为什么 UIAlertView 会阻止显示我的模态视图控制器？

> ID：13858013
> 
> 赞同：0
> 
> 时间：2012-12-13T10:37:16.640
> 
> 标签：objective-c, ios, modal-dialog, alert, presentmodalviewcontroller

假设当用户按下按钮时，需要显示一条消息，然后显示一个模态视图控制器。我会写这样的东西：

```
- (void)pickImageButtonPressed:(id)button {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
                                                    message:@"Some alert"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];

    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [[UIApplication sharedApplication].keyWindow.rootViewController
     presentModalViewController:picker animated:YES];
    [picker release];
} 
```

使用此代码，**模态视图控制器根本不会显示**！

但是，如果我**切换两个**代码块（首先显示模态，然后显示警报），视图控制器将模态显示，并且警报显示在其上方，这正是我想要的。

我的问题是：**为什么警报会阻止显示模态视图控制器？**

*请注意，在调用presentModalViewController*之前，我不想等待警报被解除。

* * *

**更新：** 我发现我的生产代码比我第一次输入的要复杂一些。我更新了示例代码，然后终于找到了一个简单的示例来重现该问题。

请注意，在我的生产代码中，弹出窗口是从我没有任何对视图控制器的引用的地方显示的，这就是我使用*[UIApplication sharedApplication].keyWindow.rootViewController 而不是直接引用视图控制器的原因*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:41:22.573

我终于找到了答案。问题确实在这一行：

```
[[UIApplication sharedApplication].keyWindow.rootViewController
 presentModalViewController:picker animated:YES]; 
```

显示警报时， [UIApplication sharedApplication].keyWindow.rootViewController**为 nil ！**. 这就是选择器从未显示的原因。这就是为什么当我切换两个块时它起作用的原因。

现在我需要找到一种方法来让最相关的视图控制器以模态方式呈现选择器......

# android - 无法从phonegap中的sdcard读取图像文件：android

> ID：13858015
> 
> 赞同：8
> 
> 时间：2012-12-13T10:37:20.273
> 
> 标签：android, cordova

我是一个phonegap新手。我正在尝试使用 phonegap 官方教程从 android 中的 sdcard 读取和图像文件。问题是图像没有显示，而是在其位置出现问号。

我的代码：

```
var pictureSource;  
var destinationType;  

document.addEventListener("deviceready",onDeviceReady,false);

function onDeviceReady(){ 

   document.getElementById("test").innerHTML="onready about to request";
   window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, onFail);}

function onFail(message) {
  alert('Failed because: ' + message);
}
function gotFS(fileSystem) {
    fileSystem.root.getFile("1.jpg", null, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.file(gotFile, fail);
}

function gotFile(file){
    readDataUrl(file);

}

function readDataUrl(file) {
     var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as data URL");
        console.log(evt.target.result);

    };  
    document.getElementById("smallImage").style.display='block'; 
    document.getElementById("smallImage").src = reader.readAsDataURL(file);

}

function fail(evt) {
    console.log(evt.target.error.code);
}

</script> 
```

编辑：使用 API 16 和 min-sdk8 “smallImage” 是一个标签，它可以与 onphotodatasuccess 一起正常工作。所以，相机在这里不是问题。与相机功能相关的一切都很好。从 sdcard 读取在赋值语句中存在问题。
document.getElementById("smallImage").src = reader.readAsDataURL(file); 如果我添加这个，我会得到字符串和未知的铬错误 -6，否则我会看到通常的图像转换字符串。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T11:20:13.373

这是一个工作示例：

编辑：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Pick Photo</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready",onDeviceReady,false);

    function onDeviceReady() {
       window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, onFail);
    }

     function onFail(message) {
      alert('Failed because: ' + message);
    }

    function gotFS(fileSystem) {
        fileSystem.root.getFile("1.jpg", {create: true}, gotFileEntry, fail);
    }

    function gotFileEntry(fileEntry) {
        fileEntry.file(gotFile, fail);
    }

    function gotFile(file){
        readDataUrl(file);  
    }

    function readDataUrl(file) {
           var reader = new FileReader();
           reader.onloadend = function(evt) {
           console.log("Read as data URL");
           console.log(evt.target.result);
           document.getElementById("smallImage").style.display='block'; 
           document.getElementById("smallImage").src = evt.target.result;   
        }; 
        reader.readAsDataURL(file);
    }

    function fail(evt) {
        console.log(evt.target.error.code);
    }
    </script>
  </head>
  <body>
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    <img style="display:none;" id="largeImage" src="" />
  </body>
</html> 
```

这将允许您从 sdcard 中选择任何指定的图像。

希望这对您有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T17:31:18.263

试试这个：

```
<script>

document.addEventListener("deviceready",onDeviceReady,false);

function onDeviceReady(){ 
  //This file have to exist
  var location= "file:///storage/emulated/0/DCIM/Camera/20141105_124208.jpg";
  window.resolveLocalFileSystemURL(location, function(oFile) {
    oFile.file(function(readyFile) {
      var reader= new FileReader();
      reader.onloadend= function(evt) {
        document.getElementById("smallImage").style.display='block'; 
        document.getElementById("smallImage").src = evt.target.result;
      };
      reader.readAsDataURL(readyFile); 
    });
  }, function(err){
    console.log('### ERR: filesystem.directoryUp() - ' + (JSON.stringify(err)));
});

</script> 
```

# java - JSP & EL 与 JSF 1.x actionListener 冲突

> ID：13858017
> 
> 赞同：0
> 
> 时间：2012-12-13T10:37:35.353
> 
> 标签：java, jsp, jsf, el, jsf-1.2

我正在研究一个 JSF 1.x 示例，该示例在 JSP 中有一些 EL 冲突。这条线`actionListener="#{helloBean.addControls}`正在拍摄一个问题。

错误是：

```
HTTP Status 500 - /JSP/hello.jsp (line: 37, column: 2) A literal value was specified for attribute actionListener that is defined as a deferred method with a return type of void. JSP.2.3.4 does not permit literal values in this case 
```

我的项目描述如下：

**封装结构：**

![POC](../Images/d7d458052c16061aedaea5c45830e0e6.png)

**Maven依赖：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.achutha.labs</groupId>
    <artifactId>02JsfExample</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>02JsfExample</name>

    <dependencies>

        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>1.2_14</version>
        </dependency>
        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>1.2_14</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <!-- EL -->
        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>el-impl</artifactId>
            <version>2.2</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>JavaServerFaces</finalName>

        <plugins>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <url>http://localhost:8090/manager/text</url>
                    <server>TomcatServer</server>
                    <path>/balaji</path>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

**人脸配置：**

```
<?xml version="1.0"?>
<!DOCTYPE faces-config PUBLIC
     "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN"
     "http://java.sun.com/dtd/web-facesconfig_1_0.dtd">

<faces-config>
    <managed-bean>
        <description> The one and only HelloBean.</description>
        <managed-bean-name>helloBean</managed-bean-name>
        <managed-bean-class>com.achutha.bean.HelloBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <navigation-rule>
        <description>Navigation From the Hello Page.</description>
        <from-view-id>/JSP/hello.jsp</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/JSP/goodbye.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>

</faces-config> 
```

**部署描述符（web.xml）：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
    <display-name>Hello, World!</display-name>
    <description>Welcome to JavaServer Faces</description>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>/JSP/hello.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

**你好.jsp**

```
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>

<f:view>
    <html>
<head>
<title>JSF In Action - Hello, world!</title>
</head>
<body>
    <h:form id="welcomeForm">
        <h:outputText id="welcomeOutput" value="Welcome to JavaServer Faces !"
            style="font-family: Arial, sans-serif; font-size: 23; color: green;" />

        <p>
            <h:message id="errors" for="helloInput" style="color: red" />
        </p>

        <p>
            <h:outputLabel for="helloInput">
                <h:outputText id="helloInputLabel"
                    value="Enter Number of controls to display: ">

                </h:outputText>

                <h:inputText id="helloInput" value="#{helloBean.numControls}"
                    required="true">
                    <f:validateLongRange minimum="1" maximum="500" />
                </h:inputText>
            </h:outputLabel>
        </p>

        <p>
            <h:panelGrid id="controlPanel" binding="#{helloBean.controlPanel}"
                columns="20" border="1" cellspacing="0" />
        </p>

        <h:commandButton id="redisplayCommand" type="submit" value="Redisplay"
            actionListener="#{helloBean.addControls}" />

        <h:commandButton id="goodbyeCommand" type="submit" value="Goodbye"
            actionListener="#{helloBean.goodbye}" immediate="true"/>

    </h:form>

</body>

    </html>

</f:view> 
```

**再见.jsp：**

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<f:view>
    <html>
<head>
<title>Jsf in Action - Hello World!</title>
</head>
<body>
    <h:form id="goodbyeForm">
        <p>
            <h:outputText id="welcomeOutput" value="Good Bye"
                style="font-family: Arial, sans-serif; font-size: 24; font-style: bold; color: green;" />

        </p>
        <p>
            <h:outputText id="helloBeanOutputLabel"
                value="Number of controls displayed: " />
            <h:outputText id="helloBeanOutputLabel"
                value="#{helloBean.numControls}" />
        </p>
    </h:form>

</body>
    </html>
</f:view> 
```

**豆类：**

```
package com.achutha.bean;

import java.util.List;

import javax.faces.application.Application;
import javax.faces.component.UIComponent;
import javax.faces.component.html.HtmlOutputText;
import javax.faces.component.html.HtmlPanelGrid;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;

public class HelloBean {

    private int numControls;
    private HtmlPanelGrid controlPanel;

    public int getNumControls() {
        return numControls;
    }

    public void setNumControls(int numControls) {
        this.numControls = numControls;
    }

    public HtmlPanelGrid getControlPanel() {
        return controlPanel;
    }

    public void setControlPanel(HtmlPanelGrid controlPanel) {
        this.controlPanel = controlPanel;
    }

    public void addControls(ActionEvent actionEvent) {
        Application application = FacesContext.getCurrentInstance()
                .getApplication();

        List<UIComponent> children = controlPanel.getChildren();

        children.clear();

        for (int count = 0; count < numControls; count++) {
            HtmlOutputText output = (HtmlOutputText) application
                    .createComponent(HtmlOutputText.COMPONENT_TYPE);
            output.setValue(" " + count + " ");
            output.setStyle("color: blue");
            children.add(output);
        }
    }

    public String goodbye() {
        return "success";
    }

} 
```

**干净**的部署：应用程序在 Tomcat 7 上部署良好。我检查了 &tomcat_home%/webapps 上部署的包结构，一切都按预期放置在适当的位置。

但是当我在浏览器上运行应用程序时，出现以下错误：

```
HTTP Status 500 - /JSP/hello.jsp (line: 37, column: 2) A literal value was specified for attribute actionListener that is defined as a deferred method with a return type of void. JSP.2.3.4 does not permit literal values in this case

type Exception report

message /JSP/hello.jsp (line: 37, column: 2) A literal value was specified for attribute actionListener that is defined as a deferred method with a return type of void. JSP.2.3.4 does not permit literal values in this case

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: /JSP/hello.jsp (line: 37, column: 2) A literal value was specified for attribute actionListener that is defined as a deferred method with a return type of void. JSP.2.3.4 does not permit literal values in this case
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:149)
    org.apache.jasper.compiler.Validator$ValidateVisitor.checkXmlAttributes(Validator.java:1151)
    org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:875)
    org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:894)
    org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:894)
    org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434)
    org.apache.jasper.compiler.Node$Root.accept(Node.java:475)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1795)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:217)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

我没有为这个问题找到合适的一站式解决方案。正是生产线上使用的 EL`actionListener="#{helloBean.addControls}`增加了复杂性。请让我知道解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:41:19.363

*在您的web.xml*中进行更改

 *```
<webapp> 
```

进入

```
<web-app version="2.5"
      xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

除了上述尝试添加

到您的网络应用程序...

像这样

```
 <web-app version="2.5"
      xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
      xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
      id="WebApp_ID"> 
```*

# java - 如何在 Eclipse 中将“// TODO 自动生成的方法存根”更改为其他内容？

> ID：13858018
> 
> 赞同：4
> 
> 时间：2012-12-13T10:37:39.163
> 
> 标签：java, eclipse

如果可能的话，如何将**// TODO 自动生成的方法存根**更改为 Eclipse 中的其他内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T10:44:13.207

窗口 - 首选项 - Java - 代码样式 - 代码模板 - 代码 - 方法体 -`EDIT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:38:15.707

另请参阅[自动生成在 eclipse 中抛出的存根方法，以](https://stackoverflow.com/questions/1092490/auto-generate-stub-methods-that-throw-in-eclipse)了解有关将其更改为抛出新的 UnsupportedOperationException 的更具体点。

# c# - 在多层/层级环境中跟踪实体的原始值

> ID：13858019
> 
> 赞同：0
> 
> 时间：2012-12-13T10:37:41.967
> 
> 标签：c#, entity-framework, entity-framework-4, entity-framework-4.1

引用 -[如何在实体框架中获取实体的原始值？](https://stackoverflow.com/questions/8133974/how-to-get-original-values-of-an-entity-in-entity-framework)- 我试图在 EF 中提取实体的原始值。但是 ObjectStateManager.GetOBjectStateEntry 给出了实体的修改值。我错过了什么？

我在多层环境中使用 EF 4.0（POCO 实体）。

```
 public bool Update(IMessage objMessage)
    {
        object ob = objMessage.GetMaster();
        appSancAdvice _entity = ob as appSancAdvice;

        using (var context = new BISEntities())
        {
            context.appSancAdvices.Attach(_entity);
            ObjectStateEntry objectState = context.ObjectStateManager.GetObjectStateEntry(_entity);
            objectState.ChangeState(System.Data.EntityState.Modified);

            // this is giving the modified value of _entity 
            var originalValues = context.ObjectStateManager.GetObjectStateEntry(_entity).OriginalValues["sancstatus_id"];

            int _i = context.SaveChanges();
            return (_i > 0) ? true : false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:30:26.880

上下文不知道原始值，因为您附加了实体。如果您想要原始值，则必须从数据库中获取对象。`OriginalValues`当您从新附加的对象中获取时，EF 不会自动执行此操作。

# performance - 如何在 Oracle 中创建一个高效的 UNION？

> ID：13858025
> 
> 赞同：2
> 
> 时间：2012-12-13T10:38:00.360
> 
> 标签：performance, oracle, union

我正在使用 Oracle 11g。

我有 2 个相关表：存储值 (A) 和要插入的新值 (B)。两者都通过 3 列（客户端、组和人员代码）的 id 相关联。每个表有大约 20 个其他列（我们称它们为属性）。

我必须匹配它们，这样我才能知道哪些值是新的（B 中的 ID 而不是 A 中的），所以我将它们插入 A，它们是相等的（B 中的 ID 和 A 中具有相同属性），哪些不在新值（A 中的 id 但不再 B 中的 id），所以我从存储的值 (A) 中删除它们。

例如：

```
A：

客户 | 集团 | 个人代码 | 姓名 | 姓
_________________________________________________
1 | 1 | 1 | 乔 | 母鹿
1 | 1 | 2 | 卡尔 | 约翰
1 | 1 | 3 | 约翰 | 约翰

```

乙：

```
客户 | 集团 | 个人代码 | 姓名 | 姓
_________________________________________________
1 | 1 | 1 | 乔 | 母鹿
1 | 1 | 3 | 约翰 | 约翰
1 | 1 | 4 | 玛丽 | 骗局

```

在这个例子中，第 4 个人是新的，第 2 个人应该被删除，第 1 和第 3 个人保持不变。

所以，我需要一个返回以下结果的查询：

```
客户 | 集团 | 个人代码 | 行动
________________________________________
1 | 1 | 1 | 平等的
1 | 1 | 2 | 消除
1 | 1 | 3 | 平等的
1 | 1 | 4 | 新的

```

我所做的是以下查询：

```
 WITH 
   A AS (
    -- select from A table
   ), 
   B AS
   (
       -- select from B table
   ),     
   delete AS 
   (
    -- select from A WHERE NOT EXISTS (B.id = A.ID)
   ),       
   news AS 
   (
    -- select from B WHERE NOT EXISTS (A.id = B.ID)
   ),
   eq AS 
   (
    -- select A.* from A, B WHERE A.id = B.id AND A.attributes = B.attributes
   ) 
   select action.client, action.group, action.personcode, 'remove' from delete action
   UNION ALL
   select action.client, action.group, action.personcode, 'new' from news action
   UNION ALL
   select action.client, action.group, action.personcode, 'equal' from eq action
   ; 
```

问题是，尽管这 3 个 last 选择中的每一个都在不到 10 秒的时间内运行，但当我使用`UNION`or合并它们时`UNION ALL`，即使 delete 或 new 或 equal 为空，完整的查询也会持续大约 90 秒。A 或 B 中的行数可能超过 3000 行。

有没有办法以更好、更快的方式获得这个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:49:01.970

您可以外连接表以生成它们之间差异的日志。

```
select coalesce(a.id,b.id) id,
       case when a.id is null
              then 'new'
            when b.id is null
              then 'remove'
            when a.col1 = b.col1 and a.col2 = b.col2 ...
              then 'same'
            else 'different'
        end
from    a full outer join b on (a.id = b.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:42:11.733

如果表 B 有您想要的数据，为什么不使用该表而不是表 A 中的数据？创建一个同义词，指向其中包含正确数据的同义词并引用该同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:31:33.530

嗯，谢谢大家的回复。我终于做了一个视图，我使用[这个博客](http://halimdba.blogspot.com.es/2010/04/how-to-pass-parameter-to-oracle-view-1.html)中描述的策略传递了一些参数来过滤前两个查询 。完整的过程现在持续 30 秒，如果 A 或 B 没有行，则为 0（之前，它始终持续 90 秒）。这是对我当前程序影响较小的解决方案。

# c# - C# OLEDB 命令超时不起作用

> ID：13858026
> 
> 赞同：1
> 
> 时间：2012-12-13T10:38:16.713
> 
> 标签：c#, ado.net, timeout, oledb

```
using (OleDbConnection Conn = new OleDbConnection(strConnString))
        {
            Conn.Open();                
            OleDbCommand odbCmd = new OleDbCommand(strQuery, Conn);
            da = new OleDbDataAdapter();
            da.SelectCommand = odbCmd;
            odbCmd.CommandTimeout = 10;
            da.Fill(dt);
        } 
```

我通过的查询大约需要 1 分钟来执行并填充数据表，但命令在指定的 10 秒后不会超时。

*我的目标是当用户尝试从需要更多时间的 Oracle 数据库（使用我的网站）获取大量数据时向用户抛出错误*。有没有其他有效的方法可以实现，或者我在上面的代码中遗漏了什么？

# android - Android 列表适配器中是否有值成员属性？

> ID：13858027
> 
> 赞同：2
> 
> 时间：2012-12-13T10:38:16.717
> 
> 标签：android, android-listview, adapter

android中的适配器是否可以显示成员和值成员？这意味着listView的值成员将被隐藏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:13:57.290

您需要做的是构建一个`Adapter`包含对象列表的自定义。

目的

```
public class MyObject {
    private int id;
    private String name;
} 
```

适配器

```
public class MyObjectListAdapter extends ArrayAdapter<MyObject> {
    private final Context  context;

    public MyObjectListAdapter(Context context, List<MyObject> objects) {
        super(context, R.layout.listview_myobjects, objects);
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.listview_myobject_item, parent, false);

        TextView textViewName = (TextView) rowView.findViewById(R.id.textViewObjectName);

        MyObject current = getItem(position);
        textViewName.setText(current.getName());
        return rowView;
    }
} 
```

Lars Vogel 详细介绍了`ListView`，因此有关更多信息，请查看此处： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# ant - Ant在重命名原始文件时将文件复制到dir

> ID：13858028
> 
> 赞同：3
> 
> 时间：2012-12-13T10:38:17.010
> 
> 标签：ant, copy, backup

我有一项任务需要将文件复制到某个位置。如果文件已存在于目标中，则需要重命名这些目标文件（附加 .bak）。如果目标文件不存在，则该文件应该就位。

目前我有这个：

```
<target name="install-jsps">
    <copy todir="target">
        <fileset dir="source"/>
        <globmapper from="*.jsp" to="*.jsp.bak"/>
    </copy>
</target> 
```

但是，这会重命名**源**文件，而我想在复制源文件之前重命名**目标**文件。我无法重命名整个目标文件夹，因为某些目标文件不在源文件集中。

最好我不想使用像 ant-contrib 这样的外部库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:11:48.123

您可以通过两项复制任务来完成：一项进行备份，一项从源复制新文件。您需要的额外位是用于进行备份的文件集中的[`present`选择器。](http://ant.apache.org/manual/Types/selectors.html#presentselect)选择器允许您仅备份即将被取代的文件，即存在于源目录中的文件。

```
<copy todir="dest">
    <fileset dir="dest" includes="*.jsp">
        <present targetdir="source" />
    </fileset>
    <globmapper from="*" to="*.bak" />
</copy>

<copy todir="dest">
    <fileset dir="source" includes="*.jsp" />
</copy> 
```

# wcf - Powershell WCF 服务 DateTime 属性始终 DateTime.Min (01.01.0001)

> ID：13858029
> 
> 赞同：1
> 
> 时间：2012-12-13T10:38:17.293
> 
> 标签：wcf, powershell, new-webserviceproxy

我检测到从 Powershell 脚本调用 WCF 服务的奇怪行为。使用 Powershell 2.0 中的命令“New-WebServiceProxy”让您能够从 PS 脚本向 Web 服务发送请求。但是我在服务端遇到了 System.DateTime 对象的一些问题，服务器端的值**始终**是DateTime.Min。

所以我创建了一个小型测试服务脚本，我可以重现这个错误。我使用了 VS2010 中的“标准”WCF 项目，并使用 DateTime 属性扩展了“DataContract”类：

```
[DataContract]
public class CompositeType
{
    bool boolValue = true;
    string stringValue = "Hello ";

    [DataMember]
    public bool BoolValue
    {
        get { return boolValue; }
        set { boolValue = value; }
    }

    [DataMember]
    public string StringValue
    {
        get { return stringValue; }
        set { stringValue = value; }
    }

    [DataMember]
    public DateTime Datum { get; set; }
} 
```

调用服务的 Powershell 脚本：

```
cls 
$serv = New-WebServiceProxy  -uri 'http://localhost:50176/TestService.svc?wsdl' -     Namespace wt
$data = [wt.CompositeType](New-Object wt.CompositeType)
$data.StringValue = "abcd"
$data.BoolValue = $true
$data.Datum = Get-Date
$serv.GetDataUsingDataContract($data) 
```

如果需要，我可以向您发送压缩项目的保管箱链接。

问候乌韦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:51:37.300

我以前从未使用过powershell，但我想我会为这个问题仔细研究一下！

代理对象 $data 可以设置一个日期属性，但是，尽管您的代码看起来像它所做的那样，$data 并不是真正的对象，它只是它的 XML 代理。

如果您输入命令“$data”，您将看到该对象的 XmlSerialized 版本（具有 bool 和 DateTime 的 xxSpecified 属性）。它确实反映了例如“$data.Datum = Get-Date”所做的更改。

当您调用 GetUsingDataContract（作为参数传递并使用 XML 发送）时，代理将反序列化回 MyCompositeType 的实例，您可以通过在调用它之前在属性 get/setter 上放置断点来查看。

作为这种反序列化的一部分，只有 StringValue 才能实现，这是因为其他属性的 Xml 序列化将仅包含“xxxSpecified”为真的值。

如果您在代理中设置“xxxSpecified”属性，它们将正确序列化回来。

但最好的解决方法是将其 DataMember 属性更改为：

```
[DataMember(IsRequired=true)] 
```

这应该只适用于您拥有的代码。

# objective-c - Daemon - 带有 Unix 套接字的客户端 IPC

> ID：13858035
> 
> 赞同：0
> 
> 时间：2012-12-13T10:38:40.447
> 
> 标签：objective-c, macos, ipc, daemon

我有一个启动守护程序，我想从用户应用程序中获取状态信息。我使用 unix 套接字实现了客户端-服务器模型（将守护进程作为服务器），如下所述：[OS X - 启动守护进程和启动代理之间的通信](https://stackoverflow.com/questions/11868069/os-x-communication-between-launch-daemon-and-launch-agent)

事实上，当我将守护进程作为用户进程（用于调试）运行时，它运行良好，但是当它实际以 root 身份启动时它会失败。

我已阅读[TN on Daemons and Agents](http://developer.apple.com/library/mac/#technotes/tn2083/) 和[Daemon & Services Programming Guide](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/Introduction.html)。但是，我找不到在启动守护程序中必须如何使用套接字的正确信息。

我对几件事感到困惑：

*   我必须在启动守护进程 plist 文件中指定套接字吗？如何？

*   如果在 plist 中指定了套接字，这是否会改变我需要在代码中创建套接字的方式？

*   什么路径对 unix 套接字有好处？技术说明建议`/var/run`，但我猜用户进程可能不会写在那里，或者可以吗？

*   是否有更简单的方法在守护进程和客户端之间进行 IPC？

*   记录守护程序输出的最佳方法是什么。我尝试了 NSLog 但它似乎不起作用......

* * *

我也不确定我的套接字代码是否正确。也许更有经验的人可以告诉我我是否在正确的轨道上。我在守护进程中有以下代码来初始化 unix 套接字：

```
#define SOCKETNAME  "/var/run/com.company.myApp.socket"

- (void) startServer {
    //remove any prev socket
    unlink(SOCKETNAME);
    CFSocketContext CTX = { 0, (__bridge void *)(self), NULL, NULL, NULL };

    CFSocketRef unixSocket = CFSocketCreate(NULL, PF_UNIX, SOCK_STREAM, 0,
                               kCFSocketAcceptCallBack, (CFSocketCallBack)AcceptCallBack, &CTX);
    if (unixSocket == NULL) {/*log and return*/} 

    struct sockaddr_un addr;
    memset(&addr, 0, sizeof(addr));
    addr.sun_family = AF_UNIX;
    strcpy(addr.sun_path, SOCKETNAME);
    addr.sun_len = strlen(addr.sun_path) + sizeof (addr.sun_family);

    NSData *address = [ NSData dataWithBytes: &addr length: sizeof(addr) ];
    if (CFSocketSetAddress(unixSocket, (__bridge CFDataRef) address) != kCFSocketSuccess) {
        NSLog(@"CFSocketSetAddress() failed\n");
        CFRelease(unixSocket);
    }

    CFRunLoopSourceRef sourceRef = CFSocketCreateRunLoopSource(kCFAllocatorDefault, unixSocket, 0);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), sourceRef, kCFRunLoopCommonModes);
    CFRelease(sourceRef);    
    CFRunLoopRun();
}

void AcceptCallBack(CFSocketRef socket, CFSocketCallBackType type, CFDataRef address, const void *data, void *info) {
    CTServerController* selfServerController = (__bridge CTServerController*) info;
    //NSLog(@"acceptCallBack");   
    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T10:17:12.113

*   你不应该在plist中指定套接字，你知道具体的地方，服务器知道，客户端知道，应该足够了
*   plist 中指定的套接字用于按需启动守护程序/代理，在基本情况下您不需要它
*   您可以使用任何路径，如果您的守护程序首先启动（通常是这种情况），它有权在套接字上设置正确的权限，以让任何人（或给定的用户、组）读取、读取和写入或您的任何给定权限希望，我确定您只是忘记让客户端写入/读取 unix 套接字
*   我认为在 OSX 上，unix 套接字 IPC 是一个完美、简单的解决方案（当然，您还有许多其他选择，xpc、mach 消息等）
*   您可以在它的 plist 中定义守护程序的 stdout 和 stderr 的位置（StandardOutPath，StandardErrorPath 键）

# iphone - _CLLocationDistanceMax 导致 iOS 5.0 崩溃，但在类中没有发现贬值

> ID：13858041
> 
> 赞同：2
> 
> 时间：2012-12-13T10:38:47.803
> 
> 标签：iphone, objective-c, ios5, core-location

我们有一个应用程序被推送到应用程序商店，可悲的是，它似乎在启动时就崩溃了，但只在 iOS 5.0 上，并且只在分发版本上。

崩溃日志中显示的错误代码如下：

```
Dyld Error Message:
  Symbol not found: _CLLocationDistanceMax
  Referenced from: /var/mobile/Applications/761DB0F1-E766-4DA7-A335-7F0FC53CA72C/Carlsberg.app/Carlsberg
  Expected in: /System/Library/Frameworks/CoreLocation.framework/CoreLocation
 in /var/mobile/Applications/761DB0F1-E766-4DA7-A335-7F0FC53CA72C/Carlsberg.app/Carlsberg
  Dyld Version: 199.6 
```

从应用程序中删除**CLLocationDistanceMax**可以解决此崩溃问题，但框架中没有迹象表明 iOS 5.0 无法处理此键。

我没有看到**__OSX_AVAILABLE_STARTING**变量或类似标记表明此代码使用起来很危险，并且在构建常规构建（调试构建）时不会发生崩溃。使用 adHoc 分布似乎有一些“随机”的崩溃频率。

我像这样使用它：

```
CLRegion *nearby  = [[CLRegion alloc] initCircularRegionWithCenter:myloc.coordinate radius:CLLocationDistanceMax identifier:@"test"];; 
```

真的是 Apple 忘记将此对象标记为 6.0+ 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:41:41.053

它仅在 iOS6 中添加。

[iOS 6 差异](http://developer.apple.com/library/ios/#releasenotes/General/iOS60APIDiffs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:44:31.417

它只是 ios6，但在标题/文档 [http://www.openradar.me/radar?id=2845402中没有这样标记](http://www.openradar.me/radar?id=2845402)

# android - 服务被杀死时如何跟踪小部件？

> ID：13858045
> 
> 赞同：2
> 
> 时间：2012-12-13T10:38:54.047
> 
> 标签：android, service, widget

我正在尝试修复其他人的代码，并希望尽可能少地使用模组。该项目是一个小部件。代码的设计方式，可以有多个小部件实例添加到主屏幕。有一个服务接收小部件中动作的广播并相应地处理广播。

`HashMap`由于可以有多个小部件实例，该服务使用将小部件 ID 映射到实际小部件来跟踪实例。这工作得很好，直到服务被杀死（通常来自任务管理器）。下一次小部件发送广播时，服务将重新启动（我没有花太多时间了解它是如何重新启动的，但确实如此）。然而，在终止/重新启动服务时，小部件 ID 到实际小部件的映射被清除，因此服务不知道哪个小部件正在发送广播，因此不做任何事情。

处理这种情况的最佳方法是什么？也许以某种方式保存/恢复地图？

# sql - 提高 SQL 语句的效率

> ID：13858047
> 
> 赞同：0
> 
> 时间：2012-12-13T10:39:16.027
> 
> 标签：sql, database, performance

这是一个理论上的例子——我被提出的一个问题是帮助我学习的一种方式。我会很感激任何指示和解释，因为当涉及到大型数据库时，我不仅是业余爱好者，而且渴望了解更多。

下面的 SQL 即将在一个 800 万条记录的数据库上运行，有什么办法可以提高效率呢？

```
SELECT
   email_subscribers_extra.sendscont,   
   email_list_subscribers_new.subscriberid,
   email_subscribers_extra.lastopen  
FROM 
   email_list_subscribers_new 
LEFT JOIN 
   email_subscribers_extra ON email_subscribers_extra.subscriberid = email_list_subscribers_new.subscriberid 
WHERE 
   email_list_subscribers_new.partner = 'AJ' 
ORDER BY 
   email_subscribers_extra.lastsend ASC LIMIT 0, 40000 
```

编辑：假设它是一个 Linux apache、mysql 服务器，因为这是我通常使用的。目前没有设置索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:09:06.553

*提高效率*是 SQL 调优中的一个重要短语。您通常添加索引以加快 SELECT 性能，但添加索引通常会减慢更新速度。每个 INSERT 和 DELETE 语句都需要重写索引。许多 UPDATE 语句也需要重写索引。

不看执行计划，也不考虑对 INSERT、UPDATE 和 DELETE 语句的影响，我建议在

*   WHERE 子句中使用的每一列，
*   JOIN 条件中使用的每一列，
*   ORDER BY 中使用的每一列。

大多数 dbms 会自动为外键引用中使用的列添加索引。不过，至少其中一些会让您稍后删除该索引。

因此，在这些列上添加一个索引，或确保存在支持外键约束的索引。

*   email_list_subscribers_new.subscriberid
*   email_list_subscribers_new.partner
*   email_subscribers_extra.subscriberid
*   email_subscribers_extra.lastsend

在某些情况下，一个多列索引会比两个单列索引提供更好的 SELECT 性能。

# javascript - 从字符串中获取第 n 个元素

> ID：13858049
> 
> 赞同：0
> 
> 时间：2012-12-13T10:39:32.317
> 
> 标签：javascript, string, indexing

如何从字符串中获取某个第 n 个元素。就像如果我想从 GOOGLE 这个词中获取每个第三个元素，我该怎么做。到目前为止我已经这样做了，但我不知道在 If 之后输入什么

```
 function create_string( string ) { 

        var string_length=string.length;

        var new_string=[];

        for( var i=0; i<string_length; i++) {

            if(string[i]%3==0) {

            }

            new_string.push(string[i]);
        }

        return new_string;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:43:26.617

使用该`charAt()`函数`String`返回传递给函数的特定索引处的字符。使用`charAt`，我创建了一个脚本，它将每三个字符返回一次。

```
var result = "";

for(var i = 2; i < test.length; i+=3){
   result += test.charAt(i);
} 
```

如果你想把这个脚本变成一个更可重用的函数：

```
var test = "GOOGLE";

function getEveryNthChar(n, str){
   var result = "";
   for(var i = (n-1); i < test.length; i+=n){
      result += str.charAt(i);
   }
   return result;
}

alert(getEveryNthChar(1,test));
alert(getEveryNthChar(2,test));
alert(getEveryNthChar(3,test));
alert(getEveryNthChar(4,test)); 
```

工作演示：http: [//jsfiddle.net/Q7Lx2/](http://jsfiddle.net/Q7Lx2/)

[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charAt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:43:28.147

这个怎么样？

```
function create_string( string ) { 

    var string_length=string.length;

    var new_string=[];

    for( var i=2; i<string_length; i+=3) { // instead of an if, use +=3
       new_string.push(string.charAt(i));
    }

    return new_string.join(""); // turn your array back into a string

} 
```

请注意，如果你开始制作这个紧凑的，你最终会得到与凯文相同的答案;-)

```
function create_string( s ) { 
    var new_string = '';
    for( var i=2; i<s.length; i+=3) { // instead of an if, use +=3
       new_string += s.charAt(i);
    }
    return new_string; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T10:47:13.107

这是一个适用于任何数字的函数，而不仅仅是 3：

```
function stringHop(s, n) {
    var result = "";
    for (var i = 0; i < s.length; i+= n) {
        result += s.charAt(i);
    }
    return result;
}

var foo = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var bar = stringHop(foo, 2);    // returns "ACEGIKMOQSUWY"
var baz = stringHop(foo, 3);    // returns "ADGJMPSVY" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T10:47:50.457

`String.charAt(index)`将返回指定索引处的字符，从 0 到`String.length - 1`. 所以：

```
String.prototype.every = function(n) {
  var out = '';

  for (var i = 0; i < this.length; i += n) {
    out += this.charAt(i);
  }

  return out;
}

var str = "GOOGLE";
console.log(str.every(3)) // Outputs: GG 
```

如果您不想包含第一个字符，则将`for`循环更改为：

```
for (var i = n - 1; i < this.length; i += n) { 
```

# apache-flex - Flex Air - HTTPService TimeOut 每次

> ID：13858053
> 
> 赞同：0
> 
> 时间：2012-12-13T10:40:11.097
> 
> 标签：apache-flex, actionscript, air, timeout, httpservice

在我的 AIR 应用程序中，我使用 HTTP 服务和 PHP。

PHP端：`set_time_limit(0)`

空气侧：`httpService.requestTimeout = 0`

它不起作用，httpService.requestTimeout = 0，30s 后有超时。FaultEvent 被调度，而 php 仍在运行。PHP 脚本没有问题地结束。

所以我改为`httpService.requestTimeout = 99999`.

30 秒后不再超时，而是 120 秒后超时。并且调度的不是 FaultEvent，而是 ResultEvent。如果我不停止服务器，PHP 仍在运行并结束！但是我无法通过我的 Air 应用程序知道服务何时完成。

我试图添加 `URLRequestDefaults.idleTimeout = 99999000`

但还是一样 =/

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:41:36.097

我也一直在与这个问题作斗争。在您发送（）您的请求之前添加此代码段：

```
URLRequestDefaults.idleTimeout = 120000;  // in millis so this setting would timeout after 120 seconds. 
```

似乎 AIR 的 Flash Player 中存在一个错误（Flex 使用不同的），它忽略了 HTTPRequest 对象上的 responseTimeout。这会正确设置超时。

# android - TextView 和 WebView 哪个更好？

> ID：13858055
> 
> 赞同：7
> 
> 时间：2012-12-13T10:40:17.790
> 
> 标签：android, android-layout

目前我即将使用**fragment**`HTML`将数据显示到我的应用程序中。我很困惑我需要使用哪一个才能在或之间获得更好的性能。我的意思是，对于渲染速度和内存问题。**`TextView``WebView`**

 **知道`Html.fromHtml()`可用于`TextView`显示`HTML`格式化数据，但我想尝试`WebView`而不是`TextView`. 但不知道渲染速度和内存问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T10:43:59.867

`WebView`内部为显示**Html**数据提供了不同的功能。您也可以`JavaScript`在`WebView`.

而`TextView`当您使用时，`Html.fromHtml()`它只**支持少数 Html 标签**。所以我认为最好使用**WebView**。

我刚刚提到了 JavaScript 功能，但还有其他功能，例如（缩放功能、来自网络的图像等）。WebView 中的所有支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T10:44:00.053

取决于您希望使用它。如果您正在加载网站并希望该网站的所有功能都可用，您应该使用 webview。如果你只显示一个 html 片段，你应该使用 textview**

# javascript - 如何在jquery中改变颜色亮度

> ID：13858057
> 
> 赞同：0
> 
> 时间：2012-12-13T10:40:17.823
> 
> 标签：javascript, jquery, hsl

我创建了一个色板和一个滑块来控制颜色的明暗。我想根据滑块值更改颜色亮度。我尝试了什么：

```
$("#darklight").slider({
        range: "min",
        value: 0,
        min: -0.5,
        max: 0.5,
        step: 0.1,
        slide: function (event, ui) {
            $("#swatches").children("div").each(function (i, v) {
                var color = $(v).attr("title");
                var rgb = HEXtoRGB(color);
                var hsl = rgbToHsl(rgb[0], rgb[1], rgb[2]);
                hsl[2] += ui.value; //what formula should i use here to change the lightness of color ?
                rgb = hslToRgb(hsl[0], hsl[1], hsl[2]);
                color = RGBtoHEX("rgb(" + rgb[0] + "," + rgb[1] + "," + rgb[2] + ")");
                $(v).attr("title", color).css("backgroundColor", color);
            });
        }
    }); 
```

在这里，我将颜色转换为 hsl 并尝试操纵**l**值，但没有得到正确的公式来操纵。谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:53:37.603

您正在修改`L`HSL 颜色的属性 - 这是正确的。

误差在 范围内`L`。它的标称值应为 0.5，范围为 0 到 1.0。

因此，您要添加的滑块值`L`应该从`-1`to运行`+1`，但您需要将结果值限制在 range`0 .. 1`中，例如：

```
hsl[2] += ui.value;
hsl[2] = Math.min(hsl[2], 1);
hsl[2] = Math.max(hsl[2], 0); 
```

# javascript - Google maps javascript API - 有没有比轮询更好的方法来知道目的地是否到达？

> ID：13858060
> 
> 赞同：1
> 
> 时间：2012-12-13T10:40:29.460
> 
> 标签：javascript, google-maps

我对谷歌地图 API 比较陌生。我有一个要求，我知道目的地并且需要在目的地到达时通知用户。用户不期待任何导航信息。我知道我可以每隔一段时间进行轮询以获取当前位置并根据响应做出决定。但是有更好的方法吗？

# sql-server-2008-r2 - 在 Microsoft SQL Server 2008 R2 中重置自动增量

> ID：13858062
> 
> 赞同：35
> 
> 时间：2012-12-13T10:40:42.533
> 
> 标签：sql-server-2008-r2, auto-increment, identity-column

我创建了一个主键来自动递增。

*   我添加了两行：`ID=1, ID=2`
*   我删除了这两行。
*   我添加了一个新行，但新行的 ID 是：`ID=3`

如何将自动增量重置或重新启动为 1？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-13T10:43:00.253

如果使用[`DBCC CHECKIDENT`](http://msdn.microsoft.com/en-us/library/ms176057.aspx)命令：

```
 DBCC CHECKIDENT ("YourTableNameHere", RESEED, 1); 
```

但**请谨慎使用！**- 这只会将值重置`IDENTITY`为 1 - 因此您的下一个插入将获得值 1，然后是 2，然后是 3 --> 您将在这里与您预先存在的值 3 发生冲突！

`IDENTITY`只需按顺序排列数字 - 它**绝不**会确保没有冲突！如果您已经有值 - 不要**重新**设置为较低的值！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-04T23:16:01.397

我正在使用**SQL Server 2012**，并且在下一次插入时 `DBCC CHECKIDENT ("YourTableNameHere", RESEED, 1)`导致值为。`2`

因此，对于 SQL Server 2012，将 更改`1`为`0`以获取`1`下一条记录插入的值：

```
DBCC CHECKIDENT ("YourTableNameHere", RESEED, 0);  -- value will be 1 for the next record insert 
```

# php - 联系表格，包括上一页按钮的推荐（一页上的多个）

> ID：13858063
> 
> 赞同：0
> 
> 时间：2012-12-13T10:40:42.660
> 
> 标签：php, variables, contact

我在这里问了一个类似的问题（http://stackoverflow.com/questions/13856915/contact-form-include-referral-of-previous-page）。

“我有一个使用 POST 的 php 联系表格，我想在表格中自动包含引用页面，即链接到联系表格的网站。这通常在我的网站内。” 现在，我的联系表单上的 HTTP_REFERER 可以正常工作，以显示上一页链接。

我的下一步是获得相同/相似的结果，但引用页面在同一页面上列出了许多游览，因此仅包含 URL 是不够的。我想知道他们单击了哪个链接/按钮来查找联系表。

这是一个示例：在 tours.php 我有以下代码（在同一页面上多次）：

```
<a href="<?php echo($domain); ?>/contact/booknow.php" </a> 
```

我可以将其更改为：

```
 <a href="<?php echo($domain); ?>/contact/booknow.php?tourname" </a>

<a href="<?php echo($domain); ?>/contact/booknow.php?tourname2" </a> 
```

在我想存储的联系表上，他们来自 tours.php 和 tourname2 等。

那么如何将这些信息存储在联系表上，以便我知道他们点击了哪个按钮（他们对哪个游览感兴趣）？

还是我需要在 tour.php 页面的链接中添加另一个变量？

非常感谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:50:34.390

```
booknow.php?tourname1
booknow.php?tourname2
booknow.php?tourname3 
```

单击后，您的下一页将可以访问 $_GET['tourname1'] 或 $_GET['tourname2'] 或 $_GET['tourname3'] 以便您可以测试它们是否存在并且您会知道访问者在哪个链接上点击。

我建议对这样的事情进行一些更改：

```
booknow.php?tourname=1
booknow.php?tourname=2
booknow.php?tourname=3 
```

因此，您可以检查“tourname”是否存在，如果存在则获取其值“$_GET['tourname']”。干得好 ：

```
$ref_url = $_SERVER['HTTP_REFERER'];
$ref_link = 0;
if( isset($_GET['tourname']) ) {
    $ref_link = $_GET['tourname'];
} 
```

# ios - 架构 armv7 的 iOS 链接器错误的 Google 转换跟踪

> ID：13858064
> 
> 赞同：9
> 
> 时间：2012-12-13T10:40:43.657
> 
> 标签：ios, linker-errors, google-ads-api, armv7, undefined-symbol

我正在尝试将 Google Conversion Tracking for iOS 功能添加到我的 iPhone 应用程序中。应用程序的基础 SDK 是 iOS6 应用程序的有效架构是 armv7, armv7s 应用程序的 iOS 部署目标是 4.3 我正在使用最新的 xcode 4.5.2 和 OSX 10.8.2

该应用程序在 appstore 中，适用于 iPhone 3-4-5

当我尝试通过以下链接添加适用于 iOS 的 Google 转化跟踪时：[https ://developers.google.com/mobile-ads-sdk/docs/admob/conversion-tracking](https://developers.google.com/mobile-ads-sdk/docs/admob/conversion-tracking)

我有这个错误：

```
Undefined symbols for architecture armv7:
"_OBJC_CLASS_$_ASIdentifierManager", referenced from:
  objc-class-ref in libGoogleConversionTracking.a(PingUtil.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-20T05:02:45.973

> The SDK library references the iOS AdSupport development framework which may not already be part of your project. It can be resolved by including AdSupport.Framework.
> 
> To adding the Framework, just follow the steps below. Select the project file at the top. Open the Link Binary With Libraries drop-down under the Build Phases tab. Add the framework from the iOS SDK using the + button.

# java - 如何将文件中的数据添加到 JTable？

> ID：13858065
> 
> 赞同：0
> 
> 时间：2012-12-13T10:40:42.770
> 
> 标签：java, swing, user-interface, file-io, jtable

到目前为止，这是我的方法：

```
public void readfile(JTable table) {
        try{
        BufferedReader in = new BufferedReader( new FileReader("out.txt"));     
        for(int i = 0; i<10; i++) {
            for(int j = 0; j<5; j++) {
                table.setValueAt(in.readLine(), i, j);
            }
        }
        in.close();
        }catch (Exception e) {
        System.err.println("error: " + e.getMessage());
        }   
    } 
```

以下是 out.txt 的内容：

```
test1
test2
test3
test4
test5 
```

在我运行程序并尝试将文件加载到表的地方，没有任何反应。我还得到一个输出，内容如下：

```
error: 0 >= 0 
```

请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:56:54.187

我会将您的问题缩小到一个较小的问题，解决这个较小的问题，然后将其扩大，直到您想要您想要的为止。

1.  将 File 的内容视为一大块文本。
2.  将表格视为向量的向量。

较小的问题：*如何将一大块文本转换为向量的向量？* 在处理文件 I/O 或 DefaultTableModels 之前，您需要能够先解决这个问题。

# sql - 带有替换变量的 Ora-01008

> ID：13858066
> 
> 赞同：2
> 
> 时间：2012-12-13T10:40:55.077
> 
> 标签：sql, oracle, plsqldeveloper

我有一个 Oracle 查询，当我使用命令窗口但不在 SQL 窗口中时它工作正常。

我使用 Pl/SQL Developer，所以命令窗口就像 DOS 窗口。

查询如下：

```
SELECT EMPLOYEE_ID, FIRST_NAME, &&COLS 
FROM EMPLOYEE
ORDER BY &COLS; 
```

那么是PL/SQL Developer提示的错误吗？我应该使用其他工具而不是 PL/SQL Developer 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:32:38.567

使用 & 号的变量替换是一种既不是 SQL 也不是 PL/SQL 的一部分的机制。它是 SQLplus 的扩展。Oracle 的 SQL Developer 实现了相同的扩展。

据我所知，Allround Automations 的 PL/SQL Developer 并未实现这些扩展。

# javascript - 如何在超链接上上传文件

> ID：13858067
> 
> 赞同：-1
> 
> 时间：2012-12-13T10:40:55.493
> 
> 标签：javascript, jquery, asp.net, file-upload

我正在使用 VS2010,C# 开发一个 ASP.NET Web 应用程序。

我想在我的用户单击超链接时显示文件上传控件，然后应该执行上传操作。

我有一个不可见的上传控件，它在我的超链接事件处理程序中使用 JavaScript 显示它，显示`onclick`上传控件但我不知道如何获取上传的文件，我应该如何执行此操作？

当我的用户单击标签或超链接时，我想显示上传文件对话框，然后他们可以选择他们的文件，文件应该被上传并保存到文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:56:36.297

您需要另一个按钮（可能名称为“上传”）来执行此操作。当您使用文件上传器控件选择文件时，您需要单击“上传”按钮。编写 C# 代码以在按钮单击事件中保存您选择的文件。

使用以下代码保存文件：

```
Fileuploadercontrol.saveAs('//path here'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:02:19.727

试试这个代码。

```
<div>
 <asp:FileUpload id="FileUploadControl" runat="server" />
<asp:Button runat="server" id="UploadButton" text="Upload" onclick="UploadButton_Click" />
<br /><br />
<asp:Label runat="server" id="StatusLabel" text="Upload status: " />
</div> 
```

在 C# 中放这个：

```
if (FileUploadControl.HasFile)
        {
            try
            {
                string filename = Path.GetFileName(FileUploadControl.FileName);
                FileUploadControl.SaveAs(Server.MapPath("~/") + filename);
                StatusLabel.Text = "Upload status: File uploaded!";
            }
            catch (Exception ex)
            {
                StatusLabel.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
            }
        } 
```

# javascript - 我应该通过 document_id 或 document_id_version 将文档的多个版本存储在本地存储中吗？

> ID：13858068
> 
> 赞同：1
> 
> 时间：2012-12-13T10:40:58.543
> 
> 标签：javascript, version-control, local-storage, revisions

我需要编写一个脚本来管理本地存储中文档的冲突版本。我目前正在考虑两种替代方案，但无法确定哪一种更具可扩展性。

我的文档将存储为 JSON，并且将具有一个`id`和一个`revision`来标识版本。

目前我正在本地存储中创建一个路径，如下所示：

```
PATH/TO/DOCUMENT/id 
```

在此路径中，文档存储为 JSON

```
{"id":"abc","version":"1-a","content":"foo"} 
```

我正在使用 POST、PUT（更新）、GET 和 REMOVE。POST/PUT 需要`id`，`version`而 GET/REMOVE 只需要`id`.

为了允许本地存储中存在冲突版本，我不确定是否

a) 存储在**现有路径**中并将版本添加为**第二个 JSON**字符串，如下所示：

```
PATH/TO/DOCUMENT/id   {"id":"abc","version":"1-a","content":"foo"},
                      {"id":"abc","version":"2-b","content":"foodforthought"} 
```

b）存储在**path.id**并保留“**单个文件**”

```
PATH/TO/DOCUMENT/id.1-a   {"id":"abc","version":"1-a","content":"foo"}
PATH/TO/DOCUMENT/id.2-b   {"id":"abc","version":"2-b","content":"foodforthought"} 
```

**问题**：
就可扩展性和存在的许多不同版本而言，哪一个更有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:48:34.203

> 就可扩展性和存在的许多不同版本而言，哪一个更有意义？

选项 B。在这里，您可以读取/写入单个文档版本，而无需将整个 JSON 字符串（然后是对象，当涉及到操作时）加载到内存中。特别是当涉及到许多巨大的文档时，这将为您节省一些时间。

但是，如果您有一个巨大文档的许多版本，它们彼此之间没有太大差异，那么在性能和内存使用方面，使用[增量](http://en.wikipedia.org/wiki/Incremental_backup)或[差异](http://en.wikipedia.org/wiki/Differential_backup)版本控制存储它们可能会更好，这在一个单独的版本中会更有意义“JSON 文件”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:51:29.860

选择选项 A：如果每个 JSON 条目都很小，只有 id，而不是整个文档。这很容易管理和清理。

选择选项 B：如果每个 JSON 条目都很大。我同意@Bergi

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:01:32.603

如果我理解正确，这是一个关于最佳架构的问题。

由于您可能有“很多不同的版本”，因此您需要快速查找，`localStorage`因此选项 b 更好。因为在选项 a 中，每当您想查找文档的特定版本时，您必须遍历其 id 所在的所有项目，`abc`然后遍历它们（最坏的情况：线性搜索）以尝试找到您正在寻找的版本。

但是，使用`.`(dot) 作为分隔符可能不是最好的主意。分隔符应该是版本号和文件名中未使用的字符。我会建议类似的东西`/`。所以键将如下所示：

```
PATH/TO/DOCUMENT/id/1-a   {"id":"abc","version":"1-a","content":"foo"}
PATH/TO/DOCUMENT/id/2-b   {"id":"abc","version":"2-b","content":"foodforthought"} 
```

# python - 在 django 模板中输出排序的 python dict

> ID：13858069
> 
> 赞同：3
> 
> 时间：2012-12-13T10:40:59.070
> 
> 标签：python, django, templates, sorting, dictionary

我得到了一个 python dict，如下所示（由于隐私原因，重要信息被替换为“xxx”）。我想在 django 模板中显示这个字典，但它应该是有序的，所以它应该以“A”开头，然后以“B”而不是“H”继续

这是我的听写（缩短）：

```
{   'A': [   {'birthday_date': None,
             'first_name': 'Alberto',
             'last_name': 'xxx',
             'name': 'Alberto xxx',
             'uid': xxx},
         {   'birthday_date': None,
             'first_name': 'Antony',
             'last_name': 'xxx',
             'name': 'Antony xxx',
             'uid': xxx}],
'H': [   {   'birthday_date': '08/28',
             'first_name': 'Hitoshi',
             'last_name': 'xxx',
             'name': 'Hitoshi xxx',
             'uid': xxx}],
'C': [   {   'birthday_date': '05/07/1985',
             'first_name': 'Chr',
             'last_name': 'xxx',
             'name': 'Chr xxx',
             'uid': xxx}],
'E': [   {   'birthday_date': None,
             'first_name': 'Edimond',
             'last_name': 'xxx',
             'name': 'Edimond xxx',
             'uid': xxx},
         {   'birthday_date': '08/30',
             'first_name': 'Erika',
             'last_name': 'xxx',
             'name': 'Erika xxx',
             'uid': xxx}],
'B': [   {   'birthday_date': '08/16/1987',
             'first_name': 'Bhaktin',
             'last_name': 'xxx',
             'name': 'Bhaktin xxx',
             'uid': xxx}],
'I': [   {   'birthday_date': '08/25/1987',
             'first_name': 'Ivette',
             'last_name': 'xxx',
             'name': 'Ivette xxx',
             'uid': xxx}]} 
```

这是我的 Django 模板：

```
{% for letter, friend in bdays_all.items %}
    <h2>{{ letter }}</h2>
    {% for user in friend %}
         ...
    {% endfor %}
{% endfor %} 
```

这很好用，但它没有排序。但这就是我需要的。我用 python 的 sorted() 函数尝试了一切，但没有任何成功。我只想订购字母。看起来微不足道，但我想它不是。

有任何想法吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T10:45:09.460

字典未排序。

您需要将 dict 转换为视图中的嵌套列表：最简单的方法就是调用`sorted(bdays_all.items())`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:27:38.453

您还可以在视图中创建一个带有排序键的新字典：

```
dictio = {'a': 'orange', 'c':'apple', 'b': 'bannana'}
di = {}
for key in sorted(dictio.iterkeys()):
    di[key] = dictio[key] 
```

结果：

```
di = {'a': 'orange', 'b': 'bannana', 'c': 'apple'} 
```

# php - 在 PHP 中验证一个 ~400MB 的大型 XML 文件

> ID：13858074
> 
> 赞同：5
> 
> 时间：2012-12-13T10:41:07.060
> 
> 标签：php, xml, xml-parsing, out-of-memory, xmlreader

我有一个大型 XML 文件（大约 400MB），在开始处理它之前我需要确保它格式正确。

我尝试的第一件事是类似于下面的内容，这很好，因为我可以找出 XML 是否格式不正确以及 XML 的哪些部分是“坏的”

```
$doc = simplexml_load_string($xmlstr);
if (!$doc) {
    $errors = libxml_get_errors();

    foreach ($errors as $error) {
        echo display_xml_error($error);
    }

    libxml_clear_errors();
} 
```

也试过...

```
$doc->load( $tempFileName, LIBXML_DTDLOAD|LIBXML_DTDVALID ) 
```

我用大约 60MB 的文件对此进行了测试，但是任何更大的文件（~400MB）都会导致对我来说是新的“oom 杀手”的东西在似乎总是 30 秒后启动并终止脚本。

我想我可能需要增加脚本上的内存，所以在处理 60MB 时计算出峰值使用量并相应地调整它，并关闭脚本时间限制以防万一。

```
set_time_limit(0);
ini_set('memory_limit', '512M'); 
```

不幸的是，这不起作用，因为如果内存负载（即使是正确的术语？）一直很高，oom 杀手似乎是一个 linux 的东西。

如果我能以某种方式以块的形式加载 xml，那就太好了，因为我想这会减少内存负载，这样 oom 杀手就不会把它的肥鼻子塞进去并杀死我的进程。

有没有人有任何经验验证大型 XML 文件并捕获其格式错误的错误，我读过的很多帖子都指向 SAX 和 XMLReader，它们可能会解决我的问题。

**更新** 所以@chiborg 几乎为我解决了这个问题......这种方法的唯一缺点是我看不到文件中的所有错误，只是第一个失败的错误，我认为这是有道理的，因为我认为它无法解析失败的第一个点。

使用 simplexml 时...它能够捕获文件中的大部分问题并在最后向我展示这很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T11:04:44.947

由于 SimpleXML 和 DOM API 总是将文档加载到内存中，因此使用像 SAX 或 XMLReader 这样的流解析器是更好的方法。

[修改示例页面](http://php.net/manual/de/example.xml-structure.php)中的代码，它可能如下所示：

```
$xml_parser = xml_parser_create();
if (!($fp = fopen($file, "r"))) {
    die("could not open XML input");
}

while ($data = fread($fp, 4096)) {
    if (!xml_parse($xml_parser, $data, feof($fp))) {
        $errors[] = array(
                    xml_error_string(xml_get_error_code($xml_parser)),
                    xml_get_current_line_number($xml_parser));
    }
}
xml_parser_free($xml_parser); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T06:28:59.823

对于大文件，完美使用 XMLReader 类。

但如果喜欢 simplexml 语法：[https](https://github.com/dkrnl/SimpleXMLReader/blob/master/library/SimpleXMLReader.php) ://github.com/dkrnl/SimpleXMLReader/blob/master/library/SimpleXMLReader.php 使用示例： http://github.com/dkrnl/SimpleXMLReader/blob/master/examples/example1 [。 php](http://github.com/dkrnl/SimpleXMLReader/blob/master/examples/example1.php)

# javascript - 使用 javascript 生成 pdf 文件时如何添加图像。添加 imageLoadFromURL 时不会生成 pdf

> ID：13858076
> 
> 赞同：2
> 
> 时间：2012-12-13T10:41:11.397
> 
> 标签：javascript, html, jspdf

使用 javascript 生成 pdf 文件时添加图像时遇到问题。这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="base64.js"></script>
<script type="text/javascript" src="sprintf.js"></script>
<script type="text/javascript" src="jspdf.js"></script>

<script>

  function demo1() {

    var name = prompt('Name: ');
    var nachname=prompt('Nachname: ');
    var doc = new jsPDF();

    doc.setFontSize(22);    
    doc.text(20, 20, 'Der eingegebene Text');
    doc.setFontSize(16);
        doc.imageLoadFromUrl('image.jpg');
        doc.imagePlace(20, 40);

    doc.text(20, 30, 'Name: ' + name);
    doc.text(20,40,'Nachname:'+nachname);

    // Output as Data URI
    doc.output('datauri');

}

</script>

</head>

<body>

<h2> Ein Document </h2>

<a href="javascript:demo1()"> PDF erstellen </a>

</body>
</html> 
```

添加前

```
doc.imageLoadFromUrl('image.jpg');
doc.imagePlace(20, 40); 
```

代码在没有图片的情况下运行。它以名称和第二个名称的需求说明开始，然后生成一个 pdf 文件。但是当添加 imageLoad-Method 时没有生成 pdf 文件。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:16:05.180

我在 jsPDF 源代码中找不到 imageLoadFromUrl 函数。我会做的是：

1.  以本站图片数据url为例：[在线图片转换器](http://websemantics.co.uk/online_tools/image_to_data_uri_convertor/)

2.  并像这样使用它：

    var imgData = 'data:image/jpg;base64,iVBORw0KGgoAAAA...';// 只是一个例子 doc.addImage(imgData, 'JPEG', setX, setY, imageWidth, imageHeight);

# javascript - 如何使用 jquery 从选项中删除“选定”属性

> ID：13858077
> 
> 赞同：2
> 
> 时间：2012-12-13T10:41:16.590
> 
> 标签：javascript, jquery, jquery-ui, jsp

当我取消选中此选项时，我想从选项元素中删除“选定”属性。我不想让价值为假或任何东西......我只想删除这个属性。我的代码就像

```
$(function() {
  $("#deployselect").multiselect({
    click: function( event, ui ) {
      if(ui.checked==false){
        $("#deployselect option[value='"+ui.value+"']").removeAttr("selected");
      }
    }
  });
}); 
```

我生成的 HTML 是这样的

```
<option value="68" selected>A1</option>
<option value="49" selected>A2</option>
<option value="69" selected>A3</option> 
```

所以即使我把“attr”或“prop”设为假，它也不起作用。:(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T10:44:25.700

如果要取消选择它，请更改此行：

```
$("#deployselect option[value='"+ui.value+"']").removeAttr("selected"); 
```

到

```
$("#deployselect option[value='"+ui.value+"']").prop("selected", false); 
```

[实例](http://jsbin.com/ahatez/1)| [来源](http://jsbin.com/ahatez/1/edit)

（假设 jQuery 1.6 或更高版本；对于早期版本，更改`prop`为`attr`.）

一旦 HTML 被解析到 DOM 中，[`option`元素](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-70901257)就会有[一个名为`selected`](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-70874476)的属性，该属性从 HTML 中的属性获取其初始值`selected`（默认为`false`）。因此，一旦您处理 DOM 元素，您将处理的是布尔属性，而不是属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T06:01:53.923

一个简单的选项是将选择器值设置为空，这样所有选中的列表都将取消选中

```
$("#deployselect").val([]); 
```

# knockout.js - Kendo-Knockout：调用一个方法，从模板中更改 viewmodel 属性，并在网格内进行数据绑定，破坏绑定

> ID：13858087
> 
> 赞同：1
> 
> 时间：2012-12-13T10:41:41.147
> 
> 标签：knockout.js, kendo-ui

我正在使用 RPNiemeyer 的 kendo-knockout 库。我有一个剑道网格，里面有一个剑道模板。在模板中有一个使用敲除单击绑定的按钮，该按钮调用更改视图模型的方法。重现步骤：

1.  单击网格中的按钮。
2.  调用一个方法来更改 viewModel 的属性并提醒新值。
3.  再次单击该按钮。该按钮不再起作用。

注意：如果您删除更改视图模型属性的行，则一切正常。

请解释这不起作用的原因，任何想法和解决方案将不胜感激。谢谢你！

html:

```
<div id="grid"  data-bind="kendoGrid: { data: fruits, columns: [ 
            {
                field: 'name',
                title: 'Fruit',
                width: 50
            },
            {
                template: '<button class=\'k-button\' data-bind=\'click: function() { changeFruit() }\' >Change Fruit Name</button>',
                width: 30
            }               

         ], 
        scrollable: false, sortable: true, pageable: false }" style="height: 380px">
    </div> 
```

javascript:

```
var ViewModel = function() {
    this.fruit1 = {
        color: ko.observable("green"),
        name: ko.observable("apple"),
    };

    this.fruit2 = {
        color: ko.observable("orange"),
        name: ko.observable("orange"),
    };

    this.fruits = ko.observableArray([
        this.fruit1, 
        this.fruit2
    ]);

    this.changeFruit = function() {
        // this line breaks the binding, 
        // when You change the property of the viewModel
        // You cannot call this function any more
        this.fruits()[0].name("Test");
        alert(this.fruits()[0].name());
    }
};

ko.applyBindings(new ViewModel());​ 
```

[http://jsfiddle.net/hXn7e/25/](http://jsfiddle.net/hXn7e/25/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:34:49.590

此时不完全支持在网格内使用 Knockout 模板。现在您的行已绑定，因为当 Knockout 第一次通过文档以应用绑定时元素就在那里。

数据更新后，行将重新呈现，绑定丢失。

一种解决方法是对重新绑定表的“dataBound”事件使用事件处理程序。这可以在全球范围内完成，例如：

```
ko.bindingHandlers.kendoGrid.options.dataBound = function(data) {
    var body = this.element.find("tbody")[0];

    if (body) {
       ko.applyBindings(ko.dataFor(body), body);   
    }
}; 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/5Zkyg/](http://jsfiddle.net/rniemeyer/5Zkyg/)

我还添加了一个自定义绑定，以防止 Knockout 在第一次通过时绑定表，因此它不会被绑定两次（一次是整体 applyBindings，一次来自 dataBound 处理程序。

最终，这是我想在 Knockout-Kendo 中更好地支持的东西，这是我计划与图书馆合作的下一件事。

这是我不久前开始的分支如何工作的示例：http: [//jsfiddle.net/rniemeyer/xBL2B/](http://jsfiddle.net/rniemeyer/xBL2B/)

# android - 将拖放项目的位置保留在列表视图中以供下次启动

> ID：13858091
> 
> 赞同：0
> 
> 时间：2012-12-13T10:41:54.453
> 
> 标签：android, android-listview, listactivity

我正在使用一个列表视图，我在其中拖放列表项，但是当我关闭该活动并重新启动相同的列表活动时，这些项目将恢复到与数据库中相同的位置，我应该如何以及何时更新我的​​数据库为了这。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:48:26.910

You could use an extra 'index' field in your database to store the position, and then order the query using it. The onStop() method of your activity or fragment would be a good place to update those indexes in your data base.

# java - 无法在 JAVA 中使用 SMACK api 显示收到的消息

> ID：13858092
> 
> 赞同：2
> 
> 时间：2012-12-13T10:41:58.587
> 
> 标签：java, smack

我在 localhost 上使用 SMACK api 和 OpenFire 创建了一个简单的客户端。到目前为止，我有两个用户说 X 和 Y。每当有人登录到客户端时，都会有一个发送按钮向用户 Y 发送消息。我已经检查了 XMPP 调试管理器，我可以发送/在那里接收消息。但是，我无法在分配用于显示消息的 JLabel 中显示这些消息。如果用户 Y 点击发送按钮，它会根据功能向自己发送一条消息，该消息会出现在 JLabel 上。但是当用户 X 点击发送按钮时，会收到消息，但是它不会在 Y 的 JLabel 上显示/更新。

有趣的是，在 gtalk 配置下一切正常。

结构如下：

**WelcomeUser.java：** 是带有用户名和密码提示的欢迎表单。在点击登录按钮时：它将 ChatBoard 类设置为可见并将用户名密码传递给 ChatBoard 的构造函数。代码：

```
chBoard=new ChatBoard(username.getText(),password.getText());
                chBoard.setVisible(true);
                setVisible(false); 
```

这是 ChatBoard.java 的代码：

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Collection;

import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.border.EmptyBorder;

import org.jivesoftware.smack.Chat;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.MessageListener;
import org.jivesoftware.smack.Roster;
import org.jivesoftware.smack.RosterEntry;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.packet.Message;

public class ChatBoard extends JFrame implements MessageListener {

    private static final long serialVersionUID = 1L;
    private JPanel contentPane;
    static String username, password;
    static XMPPConnection connection;
    private JTextField textField;
    static JLabel board = new JLabel("");
    static Chat chat;

    public void sendChat() {
        try {
            chat = connection.getChatManager().createChat(
                    "userY@my-pc/Smack", this);
            chat.sendMessage("Hello, This is " + username);
        } catch (XMPPException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    /**
     * Create the frame.
     */
    public ChatBoard(String user, String pass) {

        username = user;
        password = pass;

        ////  
                   ///JFrame creation code ommited for this thread.
        // ////////////////////////////////////////////

        XMPPConnection.DEBUG_ENABLED = true;

        ConnectionConfiguration config = new ConnectionConfiguration(
                "127.0.0.1");

        connection = new XMPPConnection(config);

        try {
            connection.connect();
            System.out.println("Connected...");
        } catch (XMPPException e) {

            e.printStackTrace();
            System.out.println("Not Connected. Error :" + e.getMessage());
        }

        try {
            connection.login(username, password);
            System.out.println("Logged in...");
        } catch (XMPPException e) {

            e.printStackTrace();
            System.out.println("Not Logged in. Error :" + e.getMessage());
        }

        Roster roster = connection.getRoster();
        Collection<RosterEntry> entries = roster.getEntries();

        System.out.println("\n\n" + entries.size() + " buddy(ies):");
        for (RosterEntry r : entries) {
            System.out.println(r.getUser());
        }

        // /////////////////////////////////

    }

    @Override
    public void processMessage(Chat arg0, Message arg1) {
        // TODO Auto-generated method stub

        board.setText(board.getText() + arg1.getBody());
        System.out.println(arg1.getFrom() + ":" + arg1.getBody().toString());

    }

} 
```

我是新手，如果有任何愚蠢的错误，请原谅我。您的帮助将不胜感激。

**杂项。详细信息：**本地主机上的 OpenFire 3.7.1 和 SMACK 3.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:01:34.677

看看[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/messaging.html](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/messaging.html)的底部。对于来自其他用户的传入聊天，您必须覆盖 ChatManagerListener

你可以在 processMessage 上设置一个断点，它是否命中了该断点？如果是这样，可能只是确保：

```
board.setText() 
```

发生在[Swing 事件调度线程上](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

所以试着让你的 processMessage 像这样：

```
@Override
public void processMessage(Chat arg0, Message arg1) {
    // TODO Auto-generated method stub

    try
    {
        SwingUtilities.invokeAndWait(new Runnable()
        {

            @Override
            public void run()
            {
                board.setText(board.getText() + arg1.getBody());
            }
        });
    }
    catch (InvocationTargetException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (InterruptedException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println(arg1.getFrom() + ":" + arg1.getBody().toString());

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:51:56.490

我在我的代码中提到的构造函数的末尾添加了这段代码，现在它似乎可以工作了:-) 谢谢 alex.p！

```
connection.getChatManager().addChatListener(new ChatManagerListener() {

                public void chatCreated(final Chat chat, final boolean createdLocally) {

                    chat.addMessageListener(new MessageListener() {

                        public void processMessage(Chat chat, Message message) {

                            //JOptionPane.showMessageDialog(null, "Rec: For " + chat.getParticipant() + " from " + message.getFrom() + "\n" + message.getBody());

                            String sender=message.getFrom();

                            String senderNames=sender;

                            System.out.println("Received message: " + (message != null ? message.getBody() : "NULL"));

                            board.setText(board.getText()+"\n "+ message.getFrom()+" : "+ message.getBody());
                            //PrivateChatManager.receiveMessage(sender, senderNames, message.getBody());

                        }

                    });

                }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T02:36:17.543

希望这段代码可以帮助你：

```
public void processMessage(Chat aChat, Message aMessage) {

    final XmppBot bot = this.xmppBot;
    final Chat chat = aChat;
    final Message message = aMessage;

    log.debug("message received, type {}", message.getType().toString());

    if (message.getBody() != null) {

        Runnable runnable = new Runnable() {

            public void run() {

                Thread.currentThread().setName("Chat: "+chat.getParticipant()+ " Message: "+ message.getBody());

                PrintWriter threadPrintWriter = null;

                threadPrintWriter = new PrintWriter(new ChatWriter(chat));

                bot.getContext().setChat(chat);
                bot.getContext().setPrintWriter(threadPrintWriter);

                bot.processCommand(message.getBody());

                bot.getContext().removeMultiUserChat();
                bot.getContext().removePrintWriter();

            }
        };

        Thread t = new Thread(runnable);
        t.start();
    }

} 
```

# java - Spring for Android 内存问题

> ID：13858094
> 
> 赞同：2
> 
> 时间：2012-12-13T10:42:09.707
> 
> 标签：java, android, spring, memory-leaks

我在服务器上的 JSON 文件夹中有大约 2000 种产品。每一个都有价格、可用尺寸和更多条目。出于这个原因，我决定使用 Spring for Android 框架的 RESTTemplate 类进行动态绑定。这工作得很好。但是，我使用 MAT（Memory Analyzer Tool）检测到这种方法对于移动设备来说可能太重了，因为检测到了可能的内存泄漏。

这里有 Pojo 属性：

```
@JsonProperty
private String brand;
@JsonProperty
private String colours;
@JsonProperty
private String img;
@JsonProperty
private Float GBP;
@JsonProperty
private String name;
@JsonProperty
private String prodnum;
@JsonProperty
private String sizes; 
```

但是，我不想使用

```
 System.gc(); 
```

和其他相关方法，因为我读到会降低性能。任何人都可以帮助并向我提出一些可以提高内存效率的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:49:46.693

您应该只加载可以在设备中显示的尽可能多的项目。

显示所有项目太多了，因为用户可能不会全部阅读。

您显示 10（例如），滚动到底部时，您会显示另一个 10。

要实现这样的事情，您可以在列表视图中使用分页。

参考[http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/](http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/)

# selenium - 方法executeScript(selenium web driver)不能定义全局变量供以后使用？

> ID：13858096
> 
> 赞同：5
> 
> 时间：2012-12-13T10:42:23.700
> 
> 标签：selenium, selenium-webdriver, selenium-chromedriver

我`executeScript`在 selenium web driver 中使用的方法，我发现了一个问题：

```
js.executeScript("var b='1'; ");
js.executeScript("alert(b)"); 
```

在我运行上面的代码之后，我想得到一个值为 is 的警报窗口`1`，但它说：

```
b is not defined 
```

我的问题是：我定义`b`为一个全局变量，但为什么我以后不能得到它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T11:11:56.833

将变量定义为

```
var b='1' 
```

将范围限制为脚本的执行。Selenium 将 javascript 片段的执行包装到它们自己的脚本中，因此您的变量不会在脚本结束后继续存在。尝试

```
window.b = '1'; 
```

然后稍后

```
alert(window.b); 
```

将变量放入全局范围。

# basecamp - 以编程方式登录新的大本营 [无需用户干预]

> ID：13858098
> 
> 赞同：1
> 
> 时间：2012-12-13T10:42:26.310
> 
> 标签：basecamp, 37-signals

**我想做的是：**

我正在尝试将我的 Web 应用程序与 basecamp 集成。当用户登录到我的 Web 应用程序时，它应该列出在 basecamp 中分配给他/她的所有任务/待办事项。

**我已经拥有的：**

我有 basecamp 的管理员凭据，我可以在其中管理所有产品/应用程序待办事项、客户端 ID、客户端密码、产品名称/应用程序名称和重定向 url（在应用程序设置中可用）

1.  是否可以在后台/以编程方式登录大本营（无需用户干预）并获取所有待办事项和相关信息的详细信息？

    如果是，那怎么办？

2.  上面提到的参数是否足以做到这一点？如果没有，那么我该如何实现呢？

谁能指导我？

我用谷歌搜索了很多，但无法获得完整的解决方案。

**参考链接：**

*   [带有基本身份验证的 HTTPS 连接导致未经授权](https://stackoverflow.com/questions/7105681/https-connection-with-basic-auth-result-into-unauthorized)
*   [https://github.com/37signals/api/blob/master/sections/authentication.md](https://github.com/37signals/api/blob/master/sections/authentication.md)
*   [https://github.com/37signals/basecamp-classic-api/blob/master/sections/data_reference.md#person](https://github.com/37signals/basecamp-classic-api/blob/master/sections/data_reference.md#person)
*   [https://github.com/mark-hahn/basecamp/blob/master/basecamp.coffee](https://github.com/mark-hahn/basecamp/blob/master/basecamp.coffee)
*   [http://www.gregaker.net/2012/feb/25/oauth-the-37-signals-api/](http://www.gregaker.net/2012/feb/25/oauth-the-37-signals-api/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:22:47.480

> 是否可以在后台/以编程方式登录大本营（无需用户干预）并获取所有待办事项和相关信息的详细信息？

对的，这是可能的。只是您必须从用户那里收集用户名、密码和域。

您可以从[http://developer.37signals.com/basecamp/index.shtml](http://developer.37signals.com/basecamp/index.shtml)找到所有的 API。 此外，对于登录，您必须处理 https 协议，因此您必须关注[这篇文章](https://stackoverflow.com/a/7157404/630668)。

> 上面提到的参数是否足以做到这一点？如果没有，那么我该如何实现呢？

是的，我认为这些参数足以登录。您需要用户名、密码和域信息。

Basecamp 以 xml 格式提供完整的 REST API。它具有所有方法 GET、POST、PUT 和 DELETE。

不要忘记将请求标头设置为`application/xml`.

希望你能得到你的答案。

# c# - 如何从 xml c# 中删除节点？

> ID：13858109
> 
> 赞同：0
> 
> 时间：2012-12-13T10:43:12.147
> 
> 标签：c#, asp.net, xml, c#-4.0, linq-to-xml

我有一个这样的xml结构：-

```
<Person id="1" Name="Rahul lamba" Manager_Id="13" Department="IT" />
<Person id="6" Name="Saurabh" Manager_Id="4" Department="IT" />
<Person id="5" Name="Amitesh" Manager_Id="6" Department="IT" /> 
```

现在我想从每一行的 XML中删除**Manager_Id节点。**

我试过了，但没有任何效果

```
XmlNodeList l = doc.GetElementsByTagName("Person");

 foreach (XmlNode item in l)
     {
         foreach (var  item1 in item.ChildNodes)
             {
                 if (item1 == "Manager_Id")
                     {
                        //Code to remove Manager_Id node.
                     }
             }
      } 
```

我怎样才能做到这一点？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:55:06.210

您可以使用 Linq To Xml 轻松完成，

```
var xDoc = XDocument.Parse(xmlstring); //XDocument.Load(filename)

xDoc.Descendants("Person")
    .Select(x => x.Attribute("Manager_Id"))
    .Where(x => x!=null)
    .ToList().ForEach(a => a.Remove());

var newxml = xDoc.ToString(); //xDoc.Save(fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:01:20.230

```
XmlTextReader reader = new XmlTextReader(@"C:\MyXml.xml");
        reader.Read();
        XmlDocument doc = new XmlDocument();
        doc.Load(reader);
        XmlNode node = doc.SelectSingleNode("/Persons/Person[@Manager_Id=6]");
        node.ParentNode.RemoveChild(node);
        reader.Close();
        doc.Save(@"D:\MyXml.xml"); 
```

使用 att 删除所有节点

```
XmlTextReader reader = new XmlTextReader(@"C:\MyXml.xml");
        reader.Read();
        XmlDocument doc = new XmlDocument();
        doc.Load(reader);
        XmlNodeList lstNode = doc.SelectNodes("/Persons/Person[@Manager_Id]");
        foreach (XmlNode node in lstNode)
        {
            node.ParentNode.RemoveChild(node);
        }
        reader.Close();
        doc.Save(@"C:\MyXml.xml"); 
```

# wcf - 通过 WCF 客户端联系基于 Java ws-security 的 Web 服务

> ID：13858118
> 
> 赞同：2
> 
> 时间：2012-12-13T10:43:43.947
> 
> 标签：wcf, interop, ws-security

首先，我不得不说我是一个关于网络服务的菜鸟，这就是我寻求帮助的原因。我需要使用 WS-Security 联系合作伙伴 Web 服务（用 Java 编码）。他们给了我来自 SoapUI 的有效 SOAP 请求（见下文）。他们告诉我生成证书以使用“颁发者名称”和“序列号”签署每个请求。

```
<soapenv:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <ds:Signature Id="Signature-272" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
            <ds:Reference URI="#id-257">
                <ds:Transforms>
                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                <ds:DigestValue>36iYibFfBPkl3txny4y0c+ekpII=</ds:DigestValue>
            </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>
        [SIGNATURE_HERE]
        </ds:SignatureValue>
        <ds:KeyInfo Id="KeyId-47898F24E5D247647A1354811737556419">
            <wsse:SecurityTokenReference wsu:Id="STRId-47898F24E5D247647A1354811737556420" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><ds:X509Data>
                <ds:X509IssuerSerial>
                    <ds:X509IssuerName>[ISSUER_NAME_HERE]</ds:X509IssuerName>
                    <ds:X509SerialNumber>[SERIAL_NUMBER_HERE]</ds:X509SerialNumber>
                </ds:X509IssuerSerial>
                </ds:X509Data>
            </wsse:SecurityTokenReference>
        </ds:KeyInfo>
    </ds:Signature>
</wsse:Security> 
```

我已经制作了一个证书和一个客户端 WCF 来使用这个 Java 服务。我知道 WCF 使用具有正确绑定的 WS-Security，问题是我完全不知道如何设置我的自定义绑定以发送类似的 SOAP 请求。

谁可以帮我这个事 ？

我设法像这样签署了一个 SOAP 请求：

```
<s:Header>
        <VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo8UTBBd8ndRApttX6H4RJEMBAAAAvgx/52oS4EulUaoW1htOkwnWJIGb+3hDh/wIKsKPzp8ACQAA</VsDebuggerCausalityData>
        <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
            <o:BinarySecurityToken u:Id="uuid-02a3636d-6fcd-446c-9ded-5a9a8373e12c-2" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">
                [TOKEN_HERE]
            </o:BinarySecurityToken>
            <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
                <SignedInfo>
                    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
                    <Reference URI="#_1">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                            <DigestValue>G6+dynIq7UBMD0R2ft0CcKfW0vA=</DigestValue>
                    </Reference>
                </SignedInfo>
                <SignatureValue>
                    [SIGNATURE_HERE]
                </SignatureValue>
                <KeyInfo>
                    <o:SecurityTokenReference>
                        <o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-02a3636d-6fcd-446c-9ded-5a9a8373e12c-2"/>
                    </o:SecurityTokenReference>
                </KeyInfo>
            </Signature>
        </o:Security>
    </s:Header> 
```

但是 SecurityTokenReference 标记不匹配。您知道如何将 IssuerName 和 SerialNumber 参数添加到请求中吗？

# azure - Azure 中的货币设置

> ID：13858120
> 
> 赞同：4
> 
> 时间：2012-12-13T10:43:51.960
> 
> 标签：azure

我有一个小型 ASP.NET MVC 站点，它显示员工的工资详细信息。

```
<td align="right">@String.Format("{0:c}", Model.Salary)</td> 
```

在我的本地机器上，这显示很好，例如 66,000 英镑，但是当上传到 Azure 时，它​​显示为一美元，例如 66,000 美元。

设置时，我选择了西欧作为我的位置，但显然我需要做其他事情才能以英镑显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T11:43:10.753

您需要在 web.config 中的应用程序级别设置特定的文化，如下所示

```
<configuration>
    <system.web>
        <globalization uiCulture="en-GB" culture="en-GB" />
    </system.web>
</configuration> 
```

或者，您也可以 在 global.asax 文件中设置如下**Application_PreRequestHandlerExecute()**

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-GB"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:21:10.667

此问题与 Windows Azure 无关，而只是归结为本地化（您机器上的默认文化可能与 Windows Azure 中的不同）。尝试将文化更改为 en-GB：

```
public ActionResult DoSomething()
{
    System.Threading.Thread.CurrentThread.CurrentCulture
        = new System.Globalization.CultureInfo("en-GB");
    System.Threading.Thread.CurrentThread.CurrentUICulture
         = new System.Globalization.CultureInfo("en-GB");

    ...
    model.Salary = 66.000;
    return View(model)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-12T09:59:45.903

我在尝试在 Azure 中使用 Microsoft HPC Server 2012 辅助角色时遇到了这个问题。我需要将每个向机器提交工作的用户设置为 en-GB 而不是 en-US，这主要是由于客户端应用程序中的日期格式问题。

我的解决方案是修改默认用户 NTUSER.DAT 文件，这是创建所有未来用户的模板。`D:\Users\Default User\NTUSER.DAT`尽管我们的物理服务器将它定位在 C中，但使用这个特定的工作角色，该文件被存储在其中。

除非您转到文件夹选项并取消选中隐藏受保护的操作系统文件并选中显示隐藏文件，否则您无法在 Windows 资源管理器中看到该文件。

然后，您可以对用户注册表项进行任何更改，下一个创建配置文件的用户将继承这些设置。由于 Azure 启动脚本在创建任何本地用户之前运行，因此您可以强制所有新用户继承这些默认值。

这是一个 PowerShell 脚本，可确保 Azure Worker 角色使用 en-GB 而不是 en-US

```
[CmdletBinding(SupportsShouldProcess=$True)]
Param(
  [string]
  $NTUserDatPath = "D:\Users\Default User\NTUSER.DAT"
  )

If(!(Test-Path $NTUserDatPath)){
   " Write-Error $NTUserDatPath incorrect"
}

REG load HKLM\TempHive $NTUserDatPath

$Default = "HKLM:\TempHive\Control Panel\International"

Set-ItemProperty -Path $Default -Name "iCountry" -Value "44" -Force
Set-ItemProperty -Path $Default -Name "Locale" -Value "00000809" -Force
Set-ItemProperty -Path $Default -Name "LocaleName" -Value "en-GB" -Force
Set-ItemProperty -Path $Default -Name "sCountry" -Value "United Kingdom" -Force
Set-ItemProperty -Path $Default -Name "sCurrency" -Value "£" -Force
Set-ItemProperty -Path $Default -Name "sLanguage" -Value "ENG" -Force
Set-ItemProperty -Path $Default -Name "sLongDate" -Value "dd MMMM yyyy" -Force
Set-ItemProperty -Path $Default -Name "sShortDate" -Value "dd/MM/yyyy" -Force
Set-ItemProperty -Path $Default -Name "sTimeFormat" -Value "HH:mm:ss" -Force
Set-ItemProperty -Path $Default -Name "sShortTime" -Value "HH:mm" -Force
Set-ItemProperty -Path $Default -Name "iDate" -Value "1" -Force
Set-ItemProperty -Path $Default -Name "iFirstDayOfWeek" -Value "0" -Force 
Set-ItemProperty -Path $Default -Name "iFirstWeekOfYear" -Value "2" -Force
Set-ItemProperty -Path $Default -Name "iMeasure" -Value "0" -Force
Set-ItemProperty -Path $Default -Name "iNegCurr" -Value "1" -Force
Set-ItemProperty -Path $Default -Name "iPaperSize" -Value "9" -Force
Set-ItemProperty -Path $Default -Name "iTime" -Value "1" -Force
Set-ItemProperty -Path $Default -Name "iTLZero" -Value "1" -Force

REG unload HKLM\TempHive 
```

[这是实时的 GitHub 版本](https://gist.github.com/istairbn/a8d912972885515ca70a41d2279926d1)

# ruby-on-rails - 关联模型的“创建”上的所有属性为零

> ID：13858121
> 
> 赞同：0
> 
> 时间：2012-12-13T10:43:55.117
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

不知道我搞砸了什么...无法创建属于 library_location 的 library_hour。提交时，library_hour 对于除 library_location_id 之外的所有属性都是 nil。

**路线**

```
resources :library_locations do
  resources :library_hours
end 
```

### 楷模

```
 class LibraryLocation < ActiveRecord::Base
      has_many :library_hours
      has_many :library_contacts

      validates_presence_of :title, :image_thumbnail_url, :latitude, :longitude
      validates_uniqueness_of :title
     end

    class LibraryHour < ActiveRecord::Base
      belongs_to :library_location
      validates_associated :library_location

      validates_presence_of :day, :open_time, :close_time
      validates :day, :numericality => { :only_integer => true }
      validates_inclusion_of :day, :in => 0..6
    end 
```

### 图书馆时间控制器

```
 before_filter :get_library_location

    def get_library_location
      @library_location = LibraryLocation.find(params[:library_location_id])
    end

    def create
      @library_hour = @library_location.library_hours.build(params[:library_location])

      respond_to do |format|
        if @library_hour.save
          format.html { redirect_to @library_location }
          format.json { render json: @library_hour }
        else
          format.html { render action: "new" }
          format.json { render json: @library_hour.errors }
        end
      end
    end 
```

### 表格“/library_locations/:id/library_hours/new”

```
 <%= form_for([@library_location, @library_hour]) do |f| %>

      <%= f.select :day, Date::DAYNAMES.each_with_index.collect { |day,i| [day,i] } %>

      <%= f.time_select :open_time, {:minute_step => 15, :ignore_date => true} %>

      <%= f.time_select :close_time, {:minute_step => 15, :ignore_date => true} %>

      <%= f.hidden_field :library_location %>

      <%= f.submit %>

    <% end %> 
```

错误：所有属性在提交时似乎为零：

```
5 errors prohibited this library_hour from being saved:

Day can't be blank
Day is not a number
Day is not included in the list
Open time can't be blank
Close time can't be blank 
```

我究竟做错了什么？感谢您的任何帮助/建议。

## 添加

**导轨外壳**

```
Started POST "/library_locations/110/library_hours" for....
Processing by LibraryHoursController#create as HTML
Parameters: 
  {"utf8"=>"✓", "authenticity_token"=>"9x8fda9faj0q9e01=", "library_hour"=>
  {"day"=>"3", "open_time(4i)"=>"05", "open_time(5i)"=>"00", "close_time(4i)"=>"16",
  "close_time(5i)"=>"00", "library_location"=>"#<LibraryLocation:0x008fc24b46c7570>"},
  "commit"=>"Submit", "library_location_id"=>"110"}

LibraryLocation SELECT "library_locations".* 
FROM "library_locations"
WHERE "library_locations"."id" = ? LIMIT 1  [["id", "110"]]

begin transaction

LibraryLocation Load
SELECT "library_locations".* 
FROM "library_locations"
WHERE "library_locations"."id" = 110 LIMIT 1

LibraryLocation Exists
SELECT 1 FROM "library_locations" 
WHERE  ("library_locations"."title" = 'Test Library' 
  AND "library_locations"."id" != 110) LIMIT 1

rollback transaction 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:57:35.370

尝试在控制器和视图中更改这些行：

```
@library_hour = @library_location.library_hours.build(params[:library_hour]) 
```

和

```
<%= form_for(@library_hour, :url => [@library_location, @library_hour]) do |f| %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T16:33:03.923

您需要将 LibraryHour 的属性声明为 attr_accessible。

```
class LibraryHour
    attr_accessible :day, :open_time, etc
end 
```

否则，您无法使用 build 批量分配属性。

# excel - 宏 - 使用标记拆分单元格中的文本

> ID：13858125
> 
> 赞同：0
> 
> 时间：2012-12-13T10:44:06.227
> 
> 标签：excel, vba

我有一个带有值的单元格

```
XX 99999 - X99, XX 99999 - X99, XX 99999 - X99 
```

X - 表示字母 9 - 表示数字

我必须阅读这个单元格

*   使用“，”拆分它以获取数组`XX 99999 - X99`
*   之后使用“”和“-”将其吐出以获得`xx`,`99999`和`X99`.

这可以在**不使用**“文本到列”的情况下完成吗，即在 excel 中使用某些函数？因为我需要使用分离的内容来过滤一些其他数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:01:33.597

查看 MSDN 上的[Split](http://msdn.microsoft.com/en-us/library/6x627e5f%28v=vs.80%29.aspx)功能。下面分为两个部分。

1.  下面的代码首先拆分字符串并将每个逗号分隔值分配给 strSplit。
2.  然后它进一步用“”分割子字符串，并将每个部分分配给pieceSplit()，然后将其输出到即时窗口中。

您可以更改并应用于您的项目的最后一部分。

```
Dim str As String, piece As Variant
Dim strSplit() As String, pieceSplit() As Variant
Dim i As Double, j As Double

str = "XX 99999 - X99, XX 99999 - X99, XX 99999 - X99"

strSplit = Split(str, ",")
ReDim pieceSplit(UBound(strSplit)) As Variant

For i = 0 To UBound(strSplit)

    pieceSplit(i) = Split(strSplit(i), " ")

Next

For Each piece In pieceSplit

    For j = 0 To UBound(piece, 1)

        Debug.Print piece(j)

    Next j

Next 
```

# javascript - Javascript - 使用 for 循环声明变量

> ID：13858128
> 
> 赞同：3
> 
> 时间：2012-12-13T10:44:14.367
> 
> 标签：javascript

我只是想知道是否可以`for loop`在 Javascript 中使用 a 声明多个变量。

**示例：**我有 4 个`<article>`元素，其 Id 为`article1` `article2` `article3`和`article4`。我不想单独声明每个变量，而是想在一个循环中进行（因为它们使用基本上相同的代码，我不想重复自己！）。

就像是：

```
window.ready = function(){
    for (var i=1; i<=4; i++){

            var article[i] = document.getElementById("article" + i);

        }
} 
```

上面返回了一个带有意想不到的错误`[`，所以我的语法必须关闭（我对 JS 很陌生），但是**（a）这是在正确的轨道上**，**（b）如果我在 a 中运行它们，这些将是全局变量window.ready 函数？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T10:47:05.870

不能用`[`char 设置变量名。使用它，您将获得 javascript 的异常。您可以使用 List/Array 来执行此操作，尝试使用 Array 类，例如：

```
window.ready = function() {

   var articles = new Array();

   for (var i=1; i<=4; i++){

      articles[i] = document.getElementById("article" + i);

   }
} 
```

使用 Array 类，您不需要指定长度，但如果需要，您可以在构造函数中设置它。

```
var articles = new Array(4); 
```

另一种方法是使用该[`push`](http://www.w3schools.com/jsref/jsref_push.asp)方法在数组上添加元素，例如：

```
window.ready = function() {

   var articles = []; // define an empty array

   for (var i=1; i<=4; i++){

      articles.push(document.getElementById("article" + i));

   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T10:48:52.510

首先，重要的是要注意 JavaScript 函数具有*函数作用域*而不是*块作用域*，这意味着“文章”不是您的 for 循环所独有的。因此，`var article`在你的`for`块中声明可能会误导运行时实际发生的事情。

为了实现你所追求的，以下应该工作：

```
window.ready = function(){
    var article = [];
    for (var i=1; i<=4; i++){

            article.push(document.getElementById("article" + i));

        }
} 
```

**参考**

*   [功能和功能范围（MDN）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)
*   [数组推送方法（MDN）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T10:47:56.413

每次循环时，您都在创建一个新的文章数组。

在进入“for”循环之前创建一个文章数组。

```
article = new Array(4);
    for (var i=1; i<=article.length; i++){

            article[i] = document.getElementById("article" + i);

        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T10:49:15.477

您可以尝试使用`eval`：

```
for (var i = 1; i <= 4; i++) {
    eval( 'var article'+i+' = document.getElementById("article' + i +'");' );
} 
```

这将像普通变量一样工作，它们仅在本地范围内可见。不过，这可能是一种不好的做法，因此只需创建一个数组或哈希表来存储动态变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T10:52:07.430

取而代之的是，您可以抓住所有`<article>`元素：

```
var articles = document.getElementsByTagName("article");

// access them in a loop
for(var i=0; i<articles.length; i++)
{
    console.log("Hey I'm " + articles[i].id);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T10:49:23.877

在使用数组前声明数组 Ex : var article = []; // 较短版本的 new Array() 然后按原样编写您的代码...

希望这会有所帮助

# javascript - 为什么附加documentFragment时需要使用cloneNode？

> ID：13858129
> 
> 赞同：10
> 
> 时间：2012-12-13T10:44:18.703
> 
> 标签：javascript, dom, backbone.js, documentfragment

我一直在研究在 Backbone.js 应用程序中使用 documentFragments，并想知道为什么我看到在将 documentFragment 附加到父 DOM 元素时使用“cloneNode”的示例。

可以在[这里](http://jsperf.com/appendchild-vs-documentfragment-vs-innerhtml/15)看到一个例子。如果您低头查看 DocumentFragment 部分，您会看到：

```
oFrag = document.createDocumentFragment();
for (var i = 0, imax = aElms.length; i < imax; i++) {
 oFrag.appendChild(aElms[i]);
}

o.innerHTML = '';
o.appendChild(oFrag.cloneNode(true)); 
```

为什么“oFrag”被克隆而不是仅仅附加它？另[一篇博](http://backbonefu.com/2012/01/optimizing-the-views-list-creation-with-document-fragment/)文没有使用“cloneNode”（作为比较）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T11:22:33.337

您的[第一个链接](http://jsperf.com/appendchild-vs-documentfragment-vs-innerhtml/15)是指作者使用而不是的[博客文章](http://ejohn.org/blog/dom-documentfragments/)，例如在测试用例中。如果你想给多个元素（即：divs）赋予相同的，你必须克隆它：`document.getElementsByTagName``document.getElementById``documentFragment`

> 如果 child 是对文档中现有节点的引用，则 appendChild 将其从当前位置移动到新位置（即，在将节点附加到其他节点之前，不需要从其父节点中删除该节点）。
> 
> 这也意味着一个节点不能同时位于文档的两个点。因此，如果节点已经有父节点，则首先将其删除，然后将其附加到新位置。

通过[MDN](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

很可能作者（或其他人）复制粘贴了代码而没有考虑到这一点。自己尝试一下 - 你可以`appendChild`不使用`cloneNode`，一切正常。

另一种可能性是，在 jsperf 上创建了这个测试用例的人并不太了解准备代码是如何工作的，并且担心第一个测试会清空`aElms`数组并且它不会再工作了。[事实上](http://jsperf.com/faq#setup-teardown)，准备代码是在每次定时迭代之前执行的，所以不必担心它的内容。

最后一件事可能是性能问题。如果你真的想测试**真正的插入**，你需要克隆节点。否则，您将改为测试树**重新附加**（请参阅上面的 MDN 链接）。

另请注意，[克隆会破坏事件侦听器](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)。

快乐的碎片化！;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-08T15:29:39.403

如果您将一个 documentFragment 附加到一个元素，然后您从该元素中清除了附加的节点，那么您的 documentFragment 也将是空的并且不能再被重用！附加您的 documentFragment 的克隆可以防止这种情况，并允许您的 documentFragment 多次重用。

我假设 jsperf 片段的作者正在测试这种情况。

Example: dropdowns with a parent-child relationship. Lets say you have a dropdown where you select a continent, and a second dropdown that lists all the countries in that continent. If you want to cache the created documentFragments with the option nodes after creation, using cloneNode is necessary. Imagine someone selects europe, then africa, then europe again: you can either recreate the entire documentfragment, of cache it.

I created a jsperf snippet to illustrate the performance difference of recreating the documentFragments vs caching and cloning the fragments:

[http://jsperf.com/documentfragment-cache-vs-recreate](http://jsperf.com/documentfragment-cache-vs-recreate)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T11:04:55.570

我不太确定，但是在您提供的链接的上下文中（性能测试），这`oFrag.cloneNode(true)`可能是防止重复使用在循环的先前运行中已经添加到 DOM 中的元素的一种保护措施，这将导致更快地执行测试.

我认为没有理由在 documentFragments 的正常用例中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:05:05.147

我认为没有必要。我猜它只是用来`aElms`从被静态引用中分离出来，在调用`appendChild`. 仅用于此测试中的性能。

但是，以下代码（更类似于`appendChild`测试）对我来说更有意义：

```
var oFrag = document.createDocumentFragment();
for (var i = 0, imax = aElms.length; i < imax; i++)
    oFrag.appendChild(aElms[i].cloneNode(true));
// using it here:             ^^^^^^^^^^^^^^^^
o.appendChild(oFrag); 
```

虽然它可能比在整个片段上只调用一次要慢，其中节点树使用本机代码递归。

另请查看[http://jsperf.com/cloning-fragments](http://jsperf.com/cloning-fragments) :-)

# sql - 为任意两个位置之间的距离设计模型/数据库（可能会改变）

> ID：13858132
> 
> 赞同：0
> 
> 时间：2012-12-13T10:44:23.020
> 
> 标签：sql, ruby-on-rails, ruby, database, activerecord

我们应该创建一个 Web 应用程序，其中包含许多事件，每个事件都有一个位置（创建为用户生成的内容，因此事件的数量会越来越大）。任何事件之间的距离都应该可用，例如确定前 5 个最接近的事件等。用户可以更改事件的位置。

应该如何为此设计数据库/模型（以可扩展的方式）？

我正在考虑使用“距离表”（例如[http://www.deutschland-tourist.info/images/entfernungstabelle.gif](http://www.deutschland-tourist.info/images/entfernungstabelle.gif)）。然后每次，如果位置发生变化，则必须重新计算一行和一列（这应该通过延迟工作来完成，因为立即进行更改并不重要）。缩放中可能出现的问题：数据库太大（n 个事件的 n² 项），需要进行的计算过多。例如，我们应该看看这是否适用于 10.000 个用户。如果每个人只创建一个事件，那么这将是 1 亿个整数......

你认为这是一个有效的好方法吗？怎么能用导轨模型实现这样的距离表？是否可以使用 SQL 数据库？你会开始其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:01:45.593

我会考虑使用图形数据库，因为它更适合您的问题。看看[Neo4j](http://www.neo4j.org)。甚至还有一个不错的 ruby​​ 库可供使用：[Neography](https://github.com/maxdemarzi/neography)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:01:34.547

请通过以下链接。希望对您有所帮助。
[https://github.com/jlecour/geokit-rails3](https://github.com/jlecour/geokit-rails3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:22:43.990

PostgreSQL 9.1+ 支持[第 k 个最近邻索引](http://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.1#K-Nearest-Neighbor_Indexing)。这样的事情*可能*会给您使用 SQL dbms 的最佳性能，并且不需要维护任何额外的表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:47:34.553

这可以使用带有纬度/经度坐标的 PHP/MySQL 来实现。Haversine[**公式**](http://rosettacode.org/wiki/Haversine_formula)用于使用这些坐标确定距离。

![30 X 30 矩阵](../Images/122506466a9b6f3a34d34b282d179224.png) 该[**演示**](http://daviestrachan.co.uk/pdo/distancematrix.php)在 30 X 30 矩阵上显示距离，如您的示例，以及使用此[**演示**](http://daviestrachan.co.uk/maps/stationmap8a.php)在地图上显示火车站的演示。MySQL数据库结构是

```
id   | int(11)
name | varchar(200)
lat  | decimal(10,6)
lon  | decimal(10,6) 
```

使用 Haversine 公式的 SQL SELECT 语句是

```
$stmt = $dbh->prepare("SELECT  name, lat, lng, ( 3959 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM mytable ORDER BY distance LIMIT 0 , 30");
// Assign parameters
$stmt->bindParam(1,$lat);//from search location
$stmt->bindParam(2,$lng);//from search location
$stmt->bindParam(3,$lat);// duplicate of parameter 1 
```

matix 是使用 PHP 函数从 allays 生成的

```
function distanceHaversine($lat1, $lon1, $lat2, $lon2) {
  $deltaLat = $lat2 - $lat1 ;
  $deltaLon = $lon2 - $lon1 ;
  $earthRadius = 3959; // in miles 6371 in meters.
  $alpha    = $deltaLat/2;
  $beta     = $deltaLon/2;
  $a        = sin(deg2rad($alpha)) * sin(deg2rad($alpha)) + cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * sin(deg2rad($beta)) * sin(deg2rad($beta)) ;
  $c        = asin(min(1, sqrt($a)));
  $distance = 2 * $earthRadius * $c;
  $distance = round($distance, 4);

  return $distance;
} 
```

# explorer - NSE：文件更新通知

> ID：13858138
> 
> 赞同：1
> 
> 时间：2012-12-13T10:44:44.353
> 
> 标签：explorer, windows-shell, shell32

我有问题。我设计了命名空间扩展（NSE）。我的 NSE 提供带有 PIDL 的文件。我在 PIDL 中存储各种信息。发生了一些事情，文件的 PIDL 已更改，但名称仍然旧。旧 PIDL 无效，新 PIDL 有效。我应该如何通知资源管理器这些更改？函数 SHChangeNotify() 通知资源管理器这些事情。似乎只有 SHCNE_RENAMEITEM 标志允许在 SHChangeNotify() 调用中使用新旧 PIDL。但是文件名没有改变！

# php - 如何修复警告：preg_match()

> ID：13858139
> 
> 赞同：0
> 
> 时间：2012-12-13T10:44:48.330
> 
> 标签：php

我有以下脚本，他们给了我这个警告。

```
( ! ) Warning: preg_match() [<a href='function.preg-match'>function.preg-match</a>]: Unknown modifier ']' 
```

这是我的代码：

```
if ((preg_match("<[^>]*script*\"?[^>]*>", $check_url)) || (preg_match("<[^>]*object*\"?[^>]*>", $check_url)) ||
    (preg_match("<[^>]*iframe*\"?[^>]*>", $check_url)) || (preg_match("<[^>]*applet*\"?[^>]*>", $check_url)) ||
    (preg_match("<[^>]*meta*\"?[^>]*>", $check_url)) || (preg_match("<[^>]*style*\"?[^>]*>", $check_url)) ||
    (preg_match("<[^>]*form*\"?[^>]*>", $check_url)) || (preg_match("\([^>]*\"?[^)]*\)", $check_url)) ||
    (preg_match("\"", $check_url))) {
die (); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:51:01.623

必须像这样更改模式

```
preg_match("/<[^>]*script*\"?[^>]*>/", $check_url); 
```

# mysql - 更改 set_timezone 并不总是生效

> ID：13858141
> 
> 赞同：0
> 
> 时间：2012-12-13T10:44:51.077
> 
> 标签：mysql, timezone

我有两张桌子

表格1

```
id  date-time
-----------------------
1   2012-12-13 15:20:13 
```

表 2

```
id  date-time
-----------------------
1   2012-12-13 15:20:13 
```

现在我正在使用 mysql`set_timezone`功能 选择记录

情况1

```
SET time_zone='+00:00';
SELECT `date-time` FROM `table-1`;  // 2012-12-13 09:50:13 
```

案例2

```
SET time_zone='+00:00';
SELECT `date-time` FROM `table-2`;  // 2012-12-13 15:20:13 ---Not converting to specified timezone 
```

在 case-1 中，它给出了转换后的日期时间，但在 Case-2 中没有。会是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:00:12.567

表格1

```
id  date-time
 -----------------------
 1   2012-12-13 15:20:13   // datatype->timestamp 
```

表 2

```
id  date-time
-----------------------
1   2012-12-13 15:20:13  // datatype->datetime 
```

所以问题出在数据类型上。现在我在表 2 中更改了`datetime`。`timestamp`问题解决了。

# c# - 可以在相等操作中声明变量吗？

> ID：13858146
> 
> 赞同：0
> 
> 时间：2012-12-13T10:45:15.560
> 
> 标签：c#

非常快速的问题 - 虽然在 C# 中可以执行以下操作：

```
var a = new []{"hello"};
string[] b;
if ((b=a)!=null) { ... } 
```

以下不是：

```
var a = new []{"hello"};
if ((string[] b=a)!=null) { ... } 
```

只是想确认我在第二个示例中没有做错任何事情，并且不可能发生类似的事情。（以类似的方式，第二个示例中的方面可能在`using()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:50:43.767

这是不可能的，因为在 c# 中，变量声明是“语句”，而不是表达式。语句不会产生值，因此我认为您不能在表达式中使用它。

但是您在~~第二种~~第一种形式中使用的赋值是一个“表达式”，它产生一个结果（在这种情况下是 a 的值），它可以在另一个带有运算符的表达式中使用。

更多来自[MSDN](http://msdn.microsoft.com/en-us/library/aa664741%28v=vs.71%29.aspx)的上下文。

它特别提到：

> 声明语句声明一个局部变量或常量。块中允许声明语句，但不允许作为嵌入语句。

因此，它看起来更像是“语言限制”而不是“缺少返回值”，尽管那（缺少语句的返回值）一定影响了这种限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:51:57.273

是的，正确的，你*不能那样*做。

原因很简单，变量的*声明*不能是*条件语句*的一部分，也因为即使有可能，`variable`也将分配条件 validate to`true`或 validates to `false`。检查一个`IL`，你会看到。

所以从清晰易懂的代码来看，假装从coder来写是对的

```
string[] b;
if ((b=a)!=null) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:10:43.410

等待，

为了简化你的问题。

你可以做，

```
var a = 0;
var b = 1;
var c = a = b; 
```

但你做不到，

```
var x = 0;
var x = var y = 1; 
```

这似乎很明显。

值的分配返回分配的值。变量的实例化或初始化不会。

但是，您确实提到了我们可以在块声明中实例化的情况。

```
using(var x = new SomeIDisposable(...

foreach(var y in SomeIEnumerable... 
```

当然还有其他人。这些本质上是语法糖。c# 的设计者破坏了它的语义纯度，使其更易于使用。我认为他们通常没有对所有实例执行此操作，因为在他们看来，这会导致代码混乱。

# php - 使用 PHP 和 mySQL 接收两个 HTML 输入字段

> ID：13858150
> 
> 赞同：-1
> 
> 时间：2012-12-13T10:45:32.750
> 
> 标签：php, mysql, combobox, double

我一直在尝试创建一个`combobox`具有两个输入字段的，本质上是一个表单。

这是我的组合框：

```
<select name="answers[]" id="answers">
<option value="<?PHP echo $cevap_list['CRM7101']; ?>,<?PHP echo $cevap_list['CRM7105']; ?>"><?PHP echo $cevap_list['CRM7103']; ?></option> 
```

我试图在 PHP 脚本中以 POST 形式接收这些值：

```
$answers= $_POST['answers']; 

for($p=0;$p<=count($answers);$p++){ 
    $answer_explode = explode(",",$answers[$p]);  
    $answer_id = $answer_explode[0];  
    $answer_value = $answer_explode[1]; 
} 

for($i=0;$i<count($answer_id);$i++){ 
$cevapkontrol = trim($answer_id[$i]); 

 $sorgu = mysql_query("insert into CRM9001(CRM9107,CRM9106) values ('".$answer_value[$i]."','".$answer_id[$i]."') "); 
} 
```

但它似乎不起作用？难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:56:21.577

1.  使用[foreach()](http://php.net/manual/en/control-structures.foreach.php)构造
2.  您在每次迭代中都覆盖了先前的 id 和 value

> ```
> <?php
> 
> if ($_POST)
> {
>     $results = array();
>     foreach ($_POST['answers'] as $answer)
>     {
>         $answer_explode = explode(",", $answer);
>         $results[] = array(
>             'value' => trim($answer_explode[1]),
>             'id' => trim($answer_explode[0])
>         );
>     }
> 
>     foreach($results as $result)
>     {
>         mysql_query("insert into CRM9001(CRM9107,CRM9106) values ('".$result['value']."','".$result['id']."') ");
>     }
> } 
> ```

```
<select name="answers[]">
    <option value="some_id,some_value">some_name</option>
</select>
<select name="answers[]">
    <option value="some_id2,some_value2">some_name2</option>
</select> <input type="submit"> 
```

# .net - 如何将文件系统视为数据库？

> ID：13858151
> 
> 赞同：1
> 
> 时间：2012-12-13T10:45:45.003
> 
> 标签：.net, ado.net

我正在开始一个新项目，但我对数据有限制。基本上，“数据”实际上是一堆以明确定义的层次结构组织的文件。

客户希望能够使用 Windows 文件资源管理器访问这些文件，同时还将数据加载到程序中以获得信息的精确视图。该程序将加载文件、解析它们并提取所需的信息。它应该能够对文件执行某种查询（最后修改日期、大小、某种类型的所有文件）

我的问题是能够结合这两种观点。

我的第一个想法是使用保存路径和一些有关文件的元数据的数据库来备份文件系统......但是我在徘徊是否有任何文件系统抽象来实现这种事情？还是我可以使用的基于文档的数据库？

基本上我想尽可能少地处理文件系统（但也许我不应该）

希望这不是太模糊......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:27:45.940

对我来说听起来更像是一个*架构*问题。

我建议在表示层和数据源之间使用**抽象层**，以避免与实际文件耦合。为文件访问和数据库访问建立一个**通用接口。**您的应用程序不需要知道它是否正在处理文件或数据库数据，甚至是未来更改可能需要的其他源。在这里实现**存储库设计模式**应该很有用。

此外，我建议使用完全独立于底层文件/数据库结构的通用数据访问对象，这将允许您尝试不同的数据访问方式，而无需接触应用程序本身。

至于面向文档的数据库，我没有这方面的经验。但是，例如， [RavenDb](http://ravendb.net/)是一种流行的开源产品，它具有开箱即用的 .NET 支持，值得一看。

考虑到应用程序以及通过 Windows 资源管理器的双重访问，您可能需要考虑使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)检查是否有任何文件被更改，然后使用更改的内容更新相应的数据库条目。

当然，如果这是一种可用的方法，很大程度上取决于数据更改的频率。如果文件编辑过于频繁，这可能会使数据库访问负担过重。您应该尽早检查可能的性能影响。

对于其他想法，我们可能需要更多信息。但至少这些想法可能会给你一个起点。

# java - 目标不可达，'null' 以 JSF 形式返回 null

> ID：13858154
> 
> 赞同：1
> 
> 时间：2012-12-13T10:46:01.317
> 
> 标签：java, jsf, jsf-2

我测试了这个源代码：

***豆：***

```
private NewAccountObj na;

public class NewAccountObj {

    private int userid;
        ............

    public NewAccountObj(int userid.............) {

        this.userid = userid;
            ............
        }

        public int getUserid() {
            return userid;
        }

        ...............

    }

    // Getters 
    public NewAccountObj getDataList() {        
        return na;
    } 
```

***JSF 页面：***

```
<h:panelGrid columns="2">
    <h:panelGroup>User ID</h:panelGroup>
    <h:panelGroup>
        <h:inputText id="userid" value="#{bean.dataList['userid']}">                    
        </h:inputText>
    </h:panelGroup>
......................
</h:panelGrid> 
```

当我提交表格时，我得到`Target Unreachable, 'null' returned null`. 你能帮我找出问题吗？Maye 这不是访问 Java 对象的正确方法`h:panelGrid`吗？

***PS：***

我在 Glassfish 日志中收到此错误消息：

```
javax.el.PropertyNotFoundException: /NewAccount.xhtml @38,126 value="#{NewAccountController.dataList['userid']}": Target Unreachable, 'null' returned null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:34:38.977

使用上面的代码，NewAccountObj 为空。所以当`getDataList()`被调用时，它返回null。然后它会调用`null.getUserId()`。

`na`需要初始化。我在您的评论中看到您有一个很长的构造函数，您应该创建另一个没有参数的构造函数（或对象工作所需的最小值）。

```
private NewAccountObj na;

    public class NewAccountObj {

        private int userid;
        ............

        public NewAccountObj() {
            new New AccountObj(0,0,...........);
        }

        public NewAccountObj(int userid.............) {

            this.userid = userid;
            ............

        }

        public int getUserid() {
            return userid;
        }

        ...............

    }

    // Getters 
    public NewAccountObj getDataList() {        
        return na;
    } 
```

并像这样更改 datalist 吸气剂：

```
public NewAccountObj getDataList() {
    if(na == null){
        na = new NewAccountObj();
    }
    return na;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T10:52:49.637

```
ADD set property method

public int setUserid(int userid) {
           this.userid =userid ;
        } 
```

# cython - 缓冲区解包未优化，但仅使用 1d Numpy 数组

> ID：13858155
> 
> 赞同：3
> 
> 时间：2012-12-13T10:46:16.943
> 
> 标签：cython

我在 cython 中遇到了内联函数的问题

```
cdef inline int binary_search(np.ndarray[np.float_t,ndim=1] cumsum, double rdn):
  cdef int mi=0,ma=len(cumsum)-1,pos 
  while True:
    if ( mi > ma):
      break
    pos = (mi+ma) / 2
    if (rdn <= cumsum[pos] ):
      ma=pos-1
    else:
      mi=pos+1
  return mi-1 
```

但是，我遇到了以下问题：缓冲区解包未优化。

我听说这是处理多维数组时的一个问题，但对我来说不是这样。

谢谢你的帮助

# php - Codeigniter PHP JSON 发送 HTML 响应

> ID：13858156
> 
> 赞同：5
> 
> 时间：2012-12-13T10:46:22.133
> 
> 标签：php, json, codeigniter

我对 Codeigniter 和 JSON 有疑问。这是我的编码：

```
$.post("Admin/Admin/addschool", {test: 'test'}, function(data){             
  if (data.status == 'ok')
    alert(data);
  else 
    alert(data);
}, "json"); 
```

...在我的控制器中：

```
public function addschool() {
  $data = array("status" => "ok", "message"=> "something ");  
  echo json_encode($data);  
  exit(); 
} 
```

但是每次我的 json 用我的整个视图的 HTML 回复时，例如我的回复

```
<!doctype html>

<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://localhost:10090/css/layout.css" />
<title>Administration</title>
<meta name="description" content="">
<meta name="author" content="">
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:42:10.540

首先，最好不要使用“echo”，而是使用“return”。试试把控制器直接放到url上看看你的返回json

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:42:29.677

尝试使用绝对 URL

```
$.post("/Admin/Admin/addschool", {test: 'test'}, function(data){             
  if (data.status == 'ok')
    alert(data);
  else 
    alert(data);
}, "json"); 
```

最好在 codeigniter 函数中返回然后退出

```
public function addschool() {
  $data = array("status" => "ok", "message"=> "something ");  
  echo json_encode($data);  
  return; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T17:45:19.647

应该是网址有问题。让我给你一个url路由问题的例子

比方说，管理控制器索引函数加载管理主页，所以在加载方法中，在 url 部分，如果你只写“addschool”，ajax 调用将转到 addschool 函数。

链接是自动完成的，admin/addschool

但是比如说，函数 admin/load_view 加载你的视图页面，现在如果你在 url 中输入 addschool ，就会发生链接，并且 url 会变成

管理员/load_view/addschool

因此，您必须检查正在加载视图页面的 codeigniter 函数，然后使用适当的链接

# python - 从 perl 调用 python 方法

> ID：13858158
> 
> 赞同：1
> 
> 时间：2012-12-13T10:46:28.440
> 
> 标签：python, perl

我一直在尝试从 perl 调用 python 类的方法，如下所示

解析器.py

```
Class ABC(object):
  def __init__(self, input_file, output_file):
     ....

  def method1(self):
     .... 
```

我想从 perl 脚本调用这个方法 abc。逻辑是

```
obj = ABC(input_file, output_file)
obj. method1() 
```

在 perl 中尝试了类似下面的东西但徒劳无功

```
use Inline Python => <<"END_OF_PYTHON_CODE";

from parser import ABC
END_OF_PYTHON_CODE 
```

它抛出 ImportError: No module named parser 的错误

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:53:36.937

在 inline python 中检查，他们提供了这样的示例代码：它有效吗？请检查 parser.py 是否在您的 PYTHONPATH 中。

```
 use Inline Python;

   my $obj = new Myclass;

   __END__
   __Python__

   from mylibrary import myclass as Myclass 
```

# c++ - 将 define int 作为参数传递给函数

> ID：13858159
> 
> 赞同：0
> 
> 时间：2012-12-13T10:46:32.717
> 
> 标签：c++, arguments, c-preprocessor

我不明白为什么以下代码无法编译：

```
#include <iostream>
#define SHORT_NAME 4;

int func(int arg)
{
    return arg;
}

int main()
{
    return func(SHORT_NAME); // Error: expected a ')'
} 
```

我应该改用`const int SHORT_NAME = 4`第 2 行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T10:47:36.130

从宏中删除分号，`SHORT_NAME`因为在预处理后它被扩展为：

```
 return func(4;); 
```

或`const int`按照您在问题中的建议使用。有关[宏](https://stackoverflow.com/questions/1674032/static-const-vs-define-in-c)与`const`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T10:48:09.757

预处理器扩展 MACRO 名称。所以这：

```
return func(SHORT_NAME); 
```

变成这样：

```
return func(4;); 
```

这绝对是一个语法错误，不是吗？

因此，如果您没有定义 MACRO，`;`那么它将起作用：

```
#define SHORT_NAME 4  //without ; 
```

* * *

> 我应该在第 2 行使用 const int SHORT_NAME = 4 吗？

是的。去吧。无论如何（在大多数情况下），宏都是邪恶的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T10:48:22.893

您的定义中不需要分号。改写这个

```
#define SHORT_NAME 4 
```

但是`const int`在使用 C++ 时 using 绝对是更好的选择。

# ruby-on-rails - Capybara ajax请求参数

> ID：13858160
> 
> 赞同：1
> 
> 时间：2012-12-13T10:46:39.310
> 
> 标签：ruby-on-rails, ruby, ajax, rspec, capybara

我正在使用 capybara 来测试我的应用程序的行为。页面上有一些js代码，在页面加载时执行。它将ajax请求发送到服务器。我想测试该请求的参数，我如何访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:06:57.640

您可以执行 javascript 并使用`page.evaluate_script`方法获取结果。如果您将参数值存储在任何变量中，您就可以访问它。

例子：

```
result = page.evaluate_script('4 + 4'); 
```

参考：[https ://github.com/jnicklas/capybara#scripting](https://github.com/jnicklas/capybara#scripting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:31:58.867

我不认为你可以一次性测试这个。您可以在测试中使用 page_evaluate 将值存储在变量中，但这仅适用于简单请求。正如 Siddick 上面指出的，您可以将 ajax 调用的值存储在一个变量中：

```
result = page.evaluate_script("response_of_your_ajax_call") 
```

只需将 response_of_your_ajax_call 替换为您的实际 ajax。这不是集成测试——它更接近于对你的 js 进行单元测试。如果您打算以这种方式编写测试，那么我建议您也编写一个测试来模拟最终用户触发 ajax 请求（单击链接、按钮等）的操作。

# c# - 如何将标头添加到 httprequestmessage

> ID：13858166
> 
> 赞同：30
> 
> 时间：2012-12-13T10:46:50.470
> 
> 标签：c#

我想将标头添加到 HttpRequestMessage。问题是 HttpRequestHeaders 没有构造函数， HttpHeaders 是抽象的，...。有什么办法可以在代码中的某个地方使用这些类（我可以使用 a `List<Tuple<string, List<string>>`但看起来一点也不好看）

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-13T10:50:39.647

一个 HttpRequestMessage 已经有一个 HttpRequestHeaders 的实例，你不能改变它。您可以添加这样的标题：

```
message.Headers.Add("X-Hello", "world"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T12:02:09.667

`HttpHeaders`您可以通过以下方式之一获取 的空实例：

```
var headers = new HttpClient().DefaultRequestHeaders;
var headers = new HttpResponseMessage().Headers;
var headers = new HttpRequestMessage().Headers; 
```

您还可以创建自己的类来扩展`HttpHeaders`和使用它。

# python - 如何使用 Python 从 zipfile 中去除密码加密

> ID：13858169
> 
> 赞同：1
> 
> 时间：2012-12-13T10:47:00.123
> 
> 标签：python, email, zip, base64, stringio

我有一个用例，我需要对附加到电子邮件的受密码保护的 zip 文件进行解密，并将其替换为未加密的相同 zip 文件。到目前为止我所拥有的：

```
import zipfile
import StringIO

...

if part.get_content_type() == "application/zip":
    encrypted_string = part.get_payload().decode("base64")
    encrypted_zip = zipfile.ZipFile(StringIO(encrypted_string))
    encrypted_zip.setpassword("password") 
```

我知道 zip 文件现在已尽我所能解密`encrypted_zip.namelist()`并且可以正常工作。现在我在 var encrypted_zip 中有常规 zip，我只想对其进行 base64 编码并替换当前附件的有效负载并继续下一个附件。但是，ZipFile 没有我可以用来重新编码它的“.to_string()”方法。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:07:31.183

您可以创建一个临时存档以摆脱密码：

```
import zipfile
import StringIO

path = "dev.zip"   
encrypted_zip = zipfile.ZipFile( path  )
encrypted_zip.setpassword("pass")
print encrypted_zip.namelist()

with zipfile.ZipFile('spam.zip', 'w') as myzip:
    for nested_file in encrypted_zip.namelist():
        myzip.write(encrypted_zip.read(nested_file)) 
```

该脚本将受密码保护的档案“dev.zip”的文件复制到未加密的档案“spam.zip”中。（之后不要忘记销毁存档）。

# c# - WCF 方法没有接收到参数

> ID：13858175
> 
> 赞同：2
> 
> 时间：2012-12-13T10:47:14.480
> 
> 标签：c#, .net, wcf

我有一个未接收请求参数的 WCF 方法。但是，如果我使用 WCFTest 客户端（Visual Studio 附带的客户端），该方法会接收参数。

如果我捕获请求，它们看起来非常相似：

**如果请求是这样的，它可以工作：**

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <consultaValeCompra xmlns="http://tempuri.org/">
            <dataMovto>1</dataMovto>
            <numSeqOperacao>2</numSeqOperacao>
            <numDocumento>3</numDocumento>
            <valorDocumento>4</valorDocumento>
            <tipo>5</tipo>
            <codPreVenda>6</codPreVenda>
        </consultaValeCompra>
    </s:Body>
</s:Envelope> 
```

**如果请求是这样，我没有得到参数：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <consultaValeCompra xmlns="http://valeCompra/jaws">
            <dataMovto>121212</dataMovto>
            <numSeqOperacao>003719</numSeqOperacao>
            <numDocumento>000000000000005555466465454546</numDocumento>
            <valorDocumento>000046400</valorDocumento>
            <tipo>0</tipo>
            <codPreVenda>0000000000</codPreVenda>
        </consultaValeCompra>
    </soapenv:Body>
</soapenv:Envelope> 
```

方法签名是：

```
public Retorno consultaValeCompra(string dataMovto, string numSeqOperacao, string numDocumento, string valorDocumento, string tipo, string codPreVenda) 
```

我可以发现差异，但我不明白为什么第一个有效而第二个无效。

我该怎么做才能让它发挥作用？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:54:29.070

似乎 XML 命名空间（`xmlns=`属性）`<consultaValeCompra>`不同：

```
<consultaValeCompra xmlns="http://tempuri.org/"> 
```

相对

```
<consultaValeCompra xmlns="http://valeCompra/jaws"> 
```

**编辑：更正答案：**
您应该检查`ServiceContract`服务类的属性。在服务器端和客户端将其设置为相同的命名空间。例如 ：

```
[ServiceContract(Namespace = "http://valeCompra/jaws")]
public class MyService
{
     [...]
} 
```

或者重新生成您的服务客户端。

# java - 如何访问 jar 文件中的 .db 模式文件

> ID：13858176
> 
> 赞同：0
> 
> 时间：2012-12-13T10:47:14.070
> 
> 标签：java, sql, sqlite, jar, netbeans-7

我正在为我的项目使用 netbeans，并将我的 key.db 模式文件存储在 src 文件夹中。（使用 SQLite 概念）程序在从 net beans 执行时工作正常。但是在执行 jarfile 时显示以下异常。

```
String sDriverName = "org.sqlite.JDBC";
Class.forName(sDriverName);
try {
URL url = insert.class.getResource("key.db");
String sTempDb = url.getPath();
System.out.println(sTempDb);
String sJdbc = "jdbc:sqlite";
String sDbUrl = sJdbc + ":" + sTempDb;
int iTimeout = 30;    
Connection conn = DriverManager.getConnection(sDbUrl);
Statement stmt = conn.createStatement();
stmt.setQueryTimeout(iTimeout);
System.out.println(GetBoard.number());
ResultSet rs=stmt.executeQuery("select count(id) from list");
if(rs.next()){
    if(rs.getInt(1)>1){
        ResultSet mbtest=stmt.executeQuery("select motherboard from list where motherboard='"+GetBoard.number()+"'");
        if(mbtest.next())
            ;//okay
        else
        JOptionPane.showMessageDialog(null, "This version of Smart eDocT Software is not original. "
                + "\n please contact sicsi to getFull version.");
    }
    else{
        int idv;
        ResultSet getid=stmt.executeQuery("select max(id) from list");
        if(getid.next()){
            idv=getid.getInt(1)+1;
        }
        else{
            idv=1;
        }
        stmt.executeUpdate("insert into list values("+idv+",'"+GetBoard.number()+"')");
    }
}
rs.close();
stmt.close(); 
conn.close();} 
```

例外是：

```
java.sql.SQLException: path to 'file:/D:/security/store/SCHEDULAR.jar!/key.db': 'C:\\file:' does not exist
    at org.sqlite.Conn.open(Conn.java:103)
    at org.sqlite.Conn.<init>(Conn.java:57)
    at org.sqlite.JDBC.createConnection(JDBC.java:77)
    at org.sqlite.JDBC.connect(JDBC.java:64)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at insert.main(insert.java:26) 
```

请帮助解决这个问题，如果问题很荒谬，请原谅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:38:57.070

即使@prathima 对他的问题的评论并不能完全激励任何人回答：

看一下

[在 JAR 中使用 SQLite db 文件](http://www.shoaibinamdar.in/blog/?p=313)

只是不要忘记手动将 dbfile 放入 jar 中，因为此代码本身不会创建 db 文件。如果我知道如何让 db 文件自动创建，我会发布它。

# css - 如何将多个 css 类添加到using image_tag 中？

> ID：13858178
> 
> 赞同：2
> 
> 时间：2012-12-13T10:47:18.133
> 
> 标签：css, ruby-on-rails

如何将多个 css 类添加到`<img>`using image_tag 中？

使用`image_tag("image.png", :class => "class1, class2")`似乎不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T10:48:46.170

不要使用逗号分隔类，使用空格分隔它们...

```
image_tag("image.png", :class => "class1 class2") 
```

> 注意：您不能在类名中使用空格...使用 `_`or分隔它们`-`，如果您使用空格而不是类 1，类 2 将像 4 个类，其中所有类都是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:49:27.997

```
The following will work:
<%= image_tag("/image.png", :class => "class1 class2")%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T06:38:21.570

我认为这不是正确的方法，因为这对我不起作用。

相反，我尝试了

```
<%= image_tag("image.png"), :class => "media-object img-circle" %>
```

这非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-02T01:54:41.673

老问题，但我认为指出至少在 Rails >= 4.2 中，您可以传递一组值可能会很有用。

```
image_tag("avatar", class: [:class1, :class_2, "img-responsive", 'img-circle']) 
```

这将产生类似于以下内容的内容：

```
<img class="class1 class_2 img-responsive img-circle" src="/assets/avatar.png" alt="Avatar" /> 
```

请注意，如果您的类包含连字符，则需要将其括在引号中，否则 Ruby 会将后面的任何内容视为方法/变量。

```
:img-responsive

undefined local variable or method `responsive' for #<#<Class:0x007fb6baa52198>:0x007fb6b982e2f0> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-13T11:12:12.287

要将多个类应用于任何控件或 html 元素，您需要用空格而不是逗号分隔类名称。

例如

```
<div class="class1 class2">
// Content here.
</div> 
```

# java - 为什么我们在 struts 中需要 global-forwards 和 global-exceptions？

> ID：13858183
> 
> 赞同：12
> 
> 时间：2012-12-13T10:47:29.347
> 
> 标签：java, jakarta-ee, struts

`<global-forwards>`我在struts 中有一个基本问题，为什么我们需要`<global-exceptions>`在struts-config.xml 中。如果我们能用`<action-mappings>`自己实现同样的事情。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-13T12:01:40.367

```
<global-forwards> 
```

考虑您正在验证不同 url 的用户名密码，如 update.do、insert.do、delete.do 等。如果它是有效用户，则需要继续执行必要的操作。如果不转发到登录页面。请参阅下面的映射

```
<action-mappings>        
    <action path="/insert" type="controller.Insert">
        <forward name="success"  path="/insert.jsp"/>
        <forward name="failure"  path="/login.jsp"/>
    </action>     
    <action path="/update" type="controller.Update">
        <forward name="success"  path="/update.jsp"/>
        <forward name="failure"  path="/login.jsp"/>
    </action>
    <action path="/delete" type="controller.Delete">
        <forward name="success"  path="/delete.jsp"/>
        <forward name="failure"  path="/login.jsp"/>
    </action>        
</action-mappings> 
```

`<forward name="failure" path="/login.jsp"/>`您可以在`<global-forwards>`下面声明，而不是重复

```
 <global-forwards>
   <forward name="failure"  path="/login.jsp"/>
</global-forwards> 
```

现在您可以删除`<forward name="failure" path="/login.jsp"/>`动作映射中的 。

* * *

```
<global-exceptions> 
```

如果您收到 java.Io 异常而不是手动处理每个异常，则可以如下全局声明。

```
<global-exceptions>
    <exception type="java.io.IOException" path="/pages/error.jsp"/>
</global-exceptions> 
```

我希望这能澄清你的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T11:41:36.540

如果您谈论的是 Struts 1，它`global-exceptions`是否为所有操作`ExceptionHandlers`处理一些`Exception`，因此您不必为每个操作声明它并避免重复。

`Global-forwards`有同样的想法。如果您在不同的操作中具有相同路径的转发，则可以通过仅声明一个来避免重复，`global-forward`并且所有操作都可以使用它。`global-forwards`您还可以避免在您的 jsp 中使用硬编码的 URL，例如，您可以在您的 jsp 中声明一个 global-forward ，比如`<forward name="loginLink" path="/login" />` 然后 `<html:link forward="loginLink">Login</html:link>`。

# crystal-reports - 让 Crystal Reports 公式将数字字符串转换为值，但将非数字留空/空

> ID：13858187
> 
> 赞同：5
> 
> 时间：2012-12-13T10:47:48.610
> 
> 标签：crystal-reports, null, formula

我有一个字符串字段，主要包含十进制数值，但有时包含“<0.10”或“HEMOLYSIS”之类的值。

我想使用公式将这些数值字符串转换为值，将非值留空（null）。

```
if isNumeric({a_omgang.omg_resultat}) then
    toNumber({a_omgang.omg_resultat}) 
```

对于所有非数字值返回 0，这使得计算平均值或平均值或计算值的数量变得困难。`isNumeric`（后者当然可以通过使用带有评估公式的运行总数来实现。）

有什么建议可以让公式按我的意愿工作吗？

编辑：我希望该值为空白（null），而不仅仅是非数字的可见性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:31:13.053

过去，我创建了一个返回 NULL 的 SQL 表达式：

```
-- {@DB_NULL}
-- Oracle syntax
(
SELECT NULL FROM DUAL
) 
```

```
-- {@DB_NULL}
-- MS SQL syntax
(
SELECT NULL
) 
```

然后我在公式中引用这个字段：

```
// {@FormulaField}
If IsNumberic({table.field} Then
  ToNumber({table.field})
Else
  ToNumber({@DB_NULL}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T16:26:18.570

您可以通过执行以下操作来使其工作：

1.  创建一个新公式并在其中输入一个数字，然后保存。Crystal 现在将此公式与数字返回值相关联。
2.  返回公式并**删除数字**并重新保存。现在您有一个返回 null 的公式，但 CR 已经将其关联为数字公式，因此您现在可以在任何可以使用数字类型的地方使用它。

```
if isNumeric({a_omgang.omg_resultat}) 
  then toNumber({a_omgang.omg_resultat})
else {@NullNumeric}
```

请注意，您也可以将其用于任何其他数据类型（包括字符串，因为空字符串不等同于空字符串），并且对于您只想直接忽略某些行的摘要函数使用非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:38:59.607

不确定这是否是最好的解决方案，但它是*一个*解决方案。

为字段的最大值创建一个运行总计公式。用公式求值，用公式
`NumericText(Replace({a_omgang.omg_resultat}, ".", ","))`
重置
`true`

这将为您提供每个条目的最大结果。（即那个条目。）只有可以转换为值的条目才会被评估，所以所有其他条目都将为空。拥有`true`作为重置公式可确保您始终获得正在评估的条目的值。

然后可以使用问题中的公式将此运行总计的结果转换为一个值。

这`Replace()`是由于语言环境，可能不需要，具体取决于您的系统设置。如果需要，还必须在值转换公式中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:31:50.263

据我所知，您无法直接执行此操作。如果数字公式字段返回空值，则将其转换为 0。

你说你压制不住。你能转换成数字然后再转换回字符串吗？

# indexing - Informix 中的组索引

> ID：13858190
> 
> 赞同：3
> 
> 时间：2012-12-13T10:47:59.137
> 
> 标签：indexing, informix

我有一个名为 的表`hitlist`，它有 3 列：

```
int id
long hitlisted_date
long deleted_date 
```

我将根据这些列查询此表：

```
histlisted_date (frequent)
hitlisted_date && deleted_date (frequent)
deleted_date (not frequent) 
```

在这种情况下，我应该使用什么样的索引？

1.  `hitlisted_date`&上的单独索引`deleted_date`
2.  组索引`hitlisted_date`&`deleted_date`

**更新**

该表将只有 1000 - 5000 行。
这些是将要使用的查询模式。

1) hitlisted_date BETWEEN
2) hitlisted_date <
3) deleted_date = -1 和 hitlisted_date <=
4) deleted_date > 0

对于上述模式，这些索引就足够了吗？

1.  创建索引 i1_hitlist ON hitlist(hitlisted_date);
2.  创建索引 i2_hitlist ON hitlist(deleted_date, hitlisted_date);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T03:24:55.073

由于`hitlisted_date`and 组合将被频繁使用，因此您希望在`hitlisted_date`第一列的两列上建立一个复合索引：

```
CREATE INDEX i1_hitlist ON hitlist(hitlisted_date, deleted_date); 
```

该索引可以（并且将）用于单独具有合适条件的查询`hitlisted_date`，或者用于两个日期。

您可能会发现在 just 上有第二个索引是有益的`deleted_date`：

```
CREATE INDEX i2_hitlist ON hitlist(deleted_date); 
```

这可用于搜索 just `deleted_date`。如果您有时在单个删除日期和一系列命中列表日期上进行搜索，那么您可能会发现使用与以下相反的复合索引更好`i1_hitlist`：

```
CREATE INDEX i2_hitlist ON hitlist(deleted_date, hitlisted_date); 
```

这不太可能有帮助，但唯一确定的方法是尝试并查看。这取决于您的查询模式以及您的查询使用的实际条件。

just 的索引没有真正的优点`hitlisted_date`；它只是妨碍了优化器（因为它必须查看两个索引并决定哪个更好，并且因为在插入、更新和删除行时还有更多工作要做）。命中列表日期不太可能是唯一索引。如果可以，那么保留单列索引和重复索引将有一个单独的原因。[（如果 (A, B, C) 上存在索引，](https://stackoverflow.com/questions/13791317/is-an-index-on-a-b-reundant-if-there-is-an-index-on-a-b-c/)另请参见(A,B) 上的索引是否冗余。）

更改索引后，确保统计信息是最新的（这些天或多或少是自动的，但它曾经很重要），然后使用 SET EXPLAIN 运行查询以检查索引是否正在使用（以及哪些索引是正在使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:54:49.847

```
CREATE CLUSTER INDEX clusidx ON hitlist(hitlisted_date,deleted_date);
CREATE         INDEX ddatidx ON hitlist(deleted_date); 
```

如果表的行数很少，甚至可能不值得对列进行索引，但是有很多行是可以的。由于您在此表中只有 3 列，因此索引不会成为大量行的问题。

*例子：*

我有一个包含 13 个 VARCHAR 列和 2 个 DATE 列的静态只读表。

行长度 = 557，nrows = 12,398,250。

在 7 个单独的列上建立索引，因为没有涉及多个列的频繁查询，但是如果经常查询一个特定的列组合，则为这些查询创建一个复合列索引。

# javascript - 没有在滚动处理程序中获取 scrollTop 的所有值？

> ID：13858191
> 
> 赞同：1
> 
> 时间：2012-12-13T10:48:03.087
> 
> 标签：javascript, jquery, scroll, scrolltop

```
 $(window).scroll(function(){  

         console.log($(window).scrollTop());

     }); 
```

滚动时在下方给出控制台输出

> 2
> 
> 列表（第 392 行）
> 
> 7
> 
> 列表（第 392 行）
> 
> 12
> 
> 列表（第 392 行）
> 
> 18
> 
> 列表（第 392 行）
> 
> 25

现在为什么缺少 3,4,6 值？如果我慢慢滚动，我可以得到那些值（3,4）问题是我想在滚动处理函数中使用 if 条件，比如

```
 $(window).scroll(function(){  

         if($(window).scrollTop() == 3 ) alert('hit');

     }); 
```

现在上面的代码有时有效，有时无效。我怎样才能让它每次都工作？

# sql - SQL中的组合优化匹配

> ID：13858196
> 
> 赞同：5
> 
> 时间：2012-12-13T10:48:22.627
> 
> 标签：sql, algorithm, db2, combinatorics

我在 SQL 中开发匹配算法时遇到问题。我有一张桌子`subjects`。这些中的每一个都需要与表中相同数量的行匹配`controls`（为了这个问题，假设需要为每个主题选择两行或控件）。所选控件的位置必须完全匹配，并且所选控件的值应`match_field`尽可能接近受试者。

以下是一些示例数据：

表主题：

```
id   location    match_field
1    1           190
2    2           2000
3    1           100 
```

表格控件：

```
id   location    match_field
17    1          70
11    1          180
12    1          220
13    1          240
14    1          500
15    1          600
16    1          600
10    2          30
78    2          1840
79    2          2250 
```

以下是样本数据的最佳结果：

```
subject_id control_id  location    match_field_diff
1          12          1           30
1          13          1           50
2          78          2           160
2          79          2           250
3          17          1           30
3          11          1           80 
```

它变得很棘手，因为例如，控件 11 是与主题 1 最接近的匹配项。但是，在最佳解决方案中，控件 11 与主题 3 匹配。

我相信[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)接近这个问题的“正确”解决方案。但是，受试者和对照的数量不相等，也不会使用所有对照（我有几千个受试者和几百万个潜在对照）。

没有必要获得绝对最优的结果；一个很好的近似值对我来说很好。

似乎应该有一个很好的基于集合的解决方案来解决这个问题，但我想不出该怎么做。这是一些仅根据位置为每个主题分配相同数量的控件的代码：

```
select * from (
    select   subject.id, 
             control.id,
             subject.location,
             row_number() over (
                 partition by subject.location
                 order by subject.id, control.id
             ) as rn,
             count(distinct control.id)     over (
                 partition by subject.location
             ) as controls_in_loc
         from subjects
         join controls on control.location = subject.location
    )
    where mod(rn,controls_in_loc+1) = 1 
```

但是，我不知道如何添加模糊匹配组件。我正在使用 DB2，但如果您使用其他东西，可以将算法转换为 DB2。

在此先感谢您的帮助！

**更新：**我主要相信 SQL 不是这项工作的正确工具。然而，为了确定（并且因为这是一个有趣的问题），我提供了一个赏金来看看是否有可能工作的 SQL 解决方案。它需要是一个基于集合的解决方案。它可以使用迭代（在同一个查询上多次循环以获得结果），但迭代次数需要远小于大表的行数。它不应遍历表中的每个元素或使用游标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:28:00.963

尽管匈牙利算法会起作用，但在您的情况下可以使用更简单的算法。您的隐含成本矩阵是一种特殊形式的对称矩阵：

```
ABS(SUBJ.match_field-CTRL.match_field) 
```

因此，您可以相对容易地证明，在按的值排序的最优赋值*{SUBJ [i] , CTRL [j] }*中也将被排序。`SUBJ.match_field``CTRL.match_field`

***证明：***考虑一个未由排序的赋值*{SUBJ [i] , CTRL [j] }*。那么你至少有一个*反转*，即一对赋值*{SUBJ* *[i1]* *, CTRL* *[j1]* *}*和*{SUBJ* *[i2]* *, CTRL* *[j2]* *}*这样`SUBJ.match_field``CTRL.match_field`

 *`SUBJ.match_field`[i1] < `SUBJ.match_field`[i2]，但是

`CTRL.match_field`[j1] > `CTRL.match_field`[j2]

然后你可以用非倒置的一对替换倒置的对

*{SUBJ [i1] , CTRL [j2] }*和*{SUBJ [i2] , CTRL [j1] }*

`SUBJ.match_field`对于( [i1] , [i2] ) 和`CTRL.match_field`( [j1] , [j2] )的所有六个相对布局，成本小于或等于反向分配的成本（[链接到 Wolfram Alpha](http://www.wolframalpha.com/input/?i=b%3Ea,B%3CA,abs%28a-A%29%2babs%28b-B%29%3E=abs%28a-B%29%2babs%28b-A%29)）。***：证明***

有了这个观察，很容易证明下面的[*动态规划*](http://en.wikipedia.org/wiki/Dynamic_programming)算法提出了最优分配：

*   复制`N`每个主题；订购`match_field`
*   按顺序控制`match_field`
*   准备一个空数组`assignments`大小`N * subject.SIZE`
*   通过for `mem`memoization准备一个空的 2D[*数组*](http://en.wikipedia.org/wiki/Memoization)；将所有元素设置为`N * subject.SIZE``control.SIZE`[](http://en.wikipedia.org/wiki/Memoization)*`-1`*
**   `Recursive_Assign`在下面的伪代码中定义的调用*   该`assignments`表现在包含在、 包含 和、 不包含之间位置`N`的每个主题的分配。`i``N*i``N*(i+1)`*

 ** * *

```
FUNCTION Recursive_Assign
    // subjects contains each original subj repeated N times
    PARAM subjects : array of int[subjectLength]
    PARAM controls: array of int[controlLength]
    PARAM mem : array of int[subjectLength,controlLength]
    PARAM sp : int // current subject position
    PARAM cp : int // current control position
    PARAM assign : array of int[subjectLength]
BEGIN
    IF sp == subjects.Length THEN RETURN 0 ENDIF
    IF mem[sp, cp] > 0 THEN RETURN mem[sp, cp] ENDIF
    int res = ABS(subjects[sp] - controls[cp])
            + Recursive_Assign(subjects, controls, mem, sp + 1, cp + 1, assign)
    assign[sp] = cp
    IF cp+1+subjects.Length-sp < controls.Length THEN
        int alt = Recursive_Assign(subjects, controls, mem, sp, cp + 1, assign)
        IF alt < res THEN
            res = alt
        ELSE
            assign[sp] = cp
        ENDIF
    ENDIF
    RETURN (mem[sp, cp] = res)
END 
```

* * *

[这是在 ideone 上使用 C# 实现的上述伪代码。](http://ideone.com/Wotmmc)

该算法已准备好在 SQL 中重写为基于集合的算法。试图将其融入原始问题设置（按位置分组并制作主题的多个副本）会给已经相当复杂的过程增加不必要的复杂层，所以我将通过使用表来简化一些事情SQL Server 的值参数。我不确定 DB2 是否提供类似的功能，但如果没有，您应该能够将它们替换为临时表。

下面的存储过程几乎是将上述伪代码直接转录为 SQL Server 的存储过程语法：

```
CREATE TYPE SubjTableType AS TABLE (row int, id int, match_field int)
CREATE TYPE ControlTableType AS TABLE (row int, id int, match_field int)
CREATE PROCEDURE RecAssign (
    @subjects SubjTableType READONLY
,   @controls ControlTableType READONLY
,   @sp int
,   @cp int
,   @subjCount int
,   @ctrlCount int
) AS BEGIN
    IF @sp = @subjCount BEGIN
        RETURN 0
    END
    IF 1 = (SELECT COUNT(1) FROM #MemoTable WHERE sRow=@sp AND cRow=@cp) BEGIN
        RETURN (SELECT best FROM #MemoTable WHERE sRow=@sp AND cRow=@cp)
    END
    DECLARE @res int, @spNext int, @cpNext int, @prelim int, @alt int, @diff int, @sId int, @cId int
    SET @spNext = @sp + 1
    SET @cpNext = @cp + 1
    SET @sId = (SELECT id FROM @subjects WHERE row = @sp)
    SET @cId = (SELECT id FROM @controls WHERE row = @cp)
    EXEC @prelim = RecAssign @subjects=@subjects, @controls=@controls, @sp=@spNext, @cp=@cpNext, @subjCount=@subjCount, @ctrlCount=@ctrlCount
    SET @diff = ABS((SELECT match_field FROM @subjects WHERE row=@sp)-(SELECT match_field FROM @controls WHERE row=@cp))
    SET @res = @prelim + @diff
    IF 1 = (SELECT COUNT(1) FROM #Assignments WHERE sRow=@sp) BEGIN
        UPDATE #Assignments SET cId=@cId, sId=@sId, diff=@diff WHERE sRow=@sp
    END
    ELSE BEGIN
        INSERT INTO #Assignments(sRow, sId, cId, diff) VALUES (@sp, @sId, @cId, @diff)
    END
    IF @cp+1+@subjCount-@sp < @ctrlCount BEGIN
        EXEC @alt = RecAssign @subjects=@subjects, @controls=@controls, @sp=@sp, @cp=@cpNext, @subjCount=@subjCount, @ctrlCount=@ctrlCount
        IF @alt < @res BEGIN
            SET @res = @alt
        END
        ELSE BEGIN
            UPDATE #Assignments SET cId=@cId, sId=@sId, diff=@diff WHERE sRow=@sp
        END
    END
    INSERT INTO #MemoTable (sRow, cRow, best) VALUES (@sp, @cp, @res)
    RETURN @res
END 
```

以下是调用此存储过程的方法：

```
-- The procedure uses a temporary table for memoization:
CREATE TABLE #MemoTable (sRow int, cRow int, best int)
-- The procedure returns a table with assignments:
CREATE TABLE #Assignments (sRow int, sId int, cId int, diff int)

DECLARE @subj as SubjTableType
INSERT INTO @SUBJ (row, id, match_field) SELECT ROW_NUMBER() OVER(ORDER BY match_field ASC)-1 AS row, id, match_field FROM subjects
DECLARE @ctrl as ControlTableType
INSERT INTO @ctrl (row, id, match_field) SELECT ROW_NUMBER() OVER(ORDER BY match_field ASC)-1 AS row, id, match_field FROM controls
DECLARE @subjCount int
SET @subjCount = (SELECT COUNT(1) FROM subjects)
DECLARE @ctrlCount int
SET @ctrlCount = (SELECT COUNT(1) FROM controls)
DECLARE @best int
EXEC @best = RecAssign
    @subjects=@subj
,   @controls=@ctrl
,   @sp=0
,   @cp=0
,   @subjCount=@subjCount
,   @ctrlCount=@ctrlCount
SELECT @best
SELECT sId, cId, diff FROM #Assignments 
```

上面的调用假定`subjects`和`controls`都已按位置过滤，并且在进行调用之前已将 的`N`副本`subjects`插入到表值参数（或 DB2 的临时表）中。

这是[sqlfiddle 上的运行演示](http://sqlfiddle.com/#!3/07cf1/12)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:56:46.093

我建议你看一下[二部图中最大匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29)的问题和算法。这个想法是建立一个图，其中左边的节点是你`subjects`的，右边的节点是你的`controls`（这就是为什么被称为二分）。构建图很简单，您创建一个`source`连接到所有主题的节点，并将所有控制节点连接到一个`sink`节点。`subject`然后，如果适用，您可以在 a和`control`节点之间创建一条边。然后你运行最大匹配算法，它会给你你正在寻找的东西，主题和控制的最大可能匹配。

请务必查看[此 Boost BGL 示例](http://www.boost.org/doc/libs/1_52_0/libs/graph/example/matching_example.cpp)如何操作，您只需构建图形并调用 BGL 函数`edmonds_maximum_cardinality_matching`。**

# javascript - Javascript/HTML 复选框获取选中值

> ID：13858200
> 
> 赞同：1
> 
> 时间：2012-12-13T10:48:34.357
> 
> 标签：javascript, html, forms, checkbox

我有几个复选框，每个组只有一个可选组件。复选框示例如下：

```
 <label class="checkbox inline">
        <input type="checkbox" id="question1option1" name="question1options" value="correct" onclick="SingleSelect('question1option',this)"> 1
    </label>
    <label class="checkbox inline">
        <input type="checkbox" id="question1option2" name="question1options" value="wrong" onclick="SingleSelect('question1option',this)"> 2
    </label>
    <label class="checkbox inline">
        <input type="checkbox" id="question1option3" name="question1options" value="wrong" onclick="SingleSelect('question1option',this)"> 3
    </label>
    <label class="checkbox inline">
        <input type="checkbox" id="question2option1" name="question2options" value="correct" onclick="SingleSelect('question2option',this)"> 1
    </label>
    <label class="checkbox inline">
        <input type="checkbox" id="question2option2" name="question2options" value="wrong" onclick="SingleSelect('question2option',this)"> 2
    </label>
    <label class="checkbox inline">
        <input type="checkbox" id="question2option3" name="question2options" value="wrong" onclick="SingleSelect('question2option',this)"> 3
    </label> 
```

我有一个 javascript 函数，它通过传递单选按钮组（如下）拉出选择了哪个单选按钮，是否有等效的人可以帮助我获取选中复选框的值（每个“组”中只有一个）请问有类似的方法吗？

```
function getRadioValue (theRadioGroup)
    {
        for (var i = 0; i < document.getElementsByName(theRadioGroup).length; i++)
        {
            if (document.getElementsByName(theRadioGroup)[i].checked)
            {
                return document.getElementsByName(theRadioGroup)[i].value;
            }
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:04:35.127

实际上，如果您更正对调用`SingleSelect`或标记的调用，则相同的功能将起作用；您的标记使用的是类似的名称，`question1options`但您的调用`SingleSelect`使用的是类似的名称`question1option`（`s`末尾没有）。修复它并且它可以工作：[Live Example](http://jsbin.com/utuvuy/1)

但是，显然，当您单击复选框时，复选框不会自动取消选择具有相同名称的其他复选框（这就是`type="radio"`目的）。但我假设你知道这一点。:-)

# c# - 将 @RenderSection 添加到 html 帮助程序

> ID：13858203
> 
> 赞同：1
> 
> 时间：2012-12-13T10:48:50.273
> 
> 标签：c#, asp.net-mvc, html-helper

我需要将代码添加到我的 html 助手中以生成与以下 html 等效的内容：

```
<div id="buttonrow">@RenderSection("ButtonRow", false)</div> 
```

这可能吗？

这行不通...

```
public static MvcHtmlString ButtonRow(this HtmlHelper helper)
{  
TagBuilder buttonRow = new TagBuilder("div");
buttonRow.GenerateId("buttonRow");
buttonRow.InnerHtml = "@RenderSection('ButtonRow', false)";

return MvcHtmlString.Create(buttonRow.ToString(TagRenderMode.Normal));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:59:47.703

`@RenderSection`是服务器生成的代码片段。也就是说，当 Razor 引擎渲染视图时，它将`@`s 和其他特殊的 Razor 标记内容视为要解析的代码片段。

当你写类似的东西时

```
buttonRow.InnerHtml = "@RenderSection('ButtonRow', false)"; 
```

您只需将原始字符串写入 HTML，Razor 不会解析的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T13:54:42.977

您在布局页面之外呈现一个部分，如下所示：

```
public static IHtmlString RenderSectionCustom(this HtmlHelper html)
{
    WebViewPage page = html.ViewDataContainer as WebViewPage;
    var section = page.RenderSection("CustomTop", false);
    return section == null ? MvcHtmlString.Empty : MvcHtmlString.Create(section.ToHtmlString());
}

public static IHtmlString DefineSectionCustom(this HtmlHelper html)
{
    WebViewPage page = html.ViewDataContainer as WebViewPage;

    page.DefineSection("CustomTop", () =>
    {
        page.Write(MvcHtmlString.Create(" hello world (custom top section from HTML HELPER)!"));
    });

    return MvcHtmlString.Empty;
} 
```

# javascript - 单击后如何禁用按钮以避免多个发布请求？

> ID：13858207
> 
> 赞同：1
> 
> 时间：2012-12-13T10:49:00.517
> 
> 标签：javascript, asp.net

单击几秒钟后，我想禁用服务器端 asp.net 按钮控件，然后触发服务器端事件。我正在尝试使用 setTimeout，但如果我使用 setTimeout，则永远不会触发服务器端事件。有人可以帮忙吗？

```
 <script type="text/javascript">
    function disableBtn(btnId, dspTxt) {
        var btn = document.getElementById(btnId);
        btn.value = dspTxt;
        setTimeout(btn.disabled = true,1000);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:58:20.497

使用 jQuery 怎么样？

```
$('#buttonId').attr("disabled", true); 
```

或者在一个函数中

```
function disableBtn(btnId, dspTxt) {
  var button = $(btnId);
  button.attr("disabled", true);
  button.text(dspTxt);
} 
```

[http://www.w3schools.com/jsref/prop_select_disabled.asp](http://www.w3schools.com/jsref/prop_select_disabled.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:32:03.423

在表单上放置两个按钮：

```
<asp:Button ID="ButtonToDisable" runat="server" Text="Button" />
<asp:LinkButton ID="PostBackLinkButton" runat="server" onclick="PostBackLinkButton_Click"></asp:LinkButton> 
```

第一个是 2 秒后禁用的按钮，第二个是执行回发的按钮。

接下来将此代码放入 page.cs 中：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            ClientScript.RegisterStartupScript(this.GetType(), "timer",
               "setTimeout(function(){" + Page.ClientScript.GetPostBackEventReference(PostBackLinkButton, String.Empty) + "},2000)", true);
        }
    }

    protected void PostBackLinkButton_Click(object sender, EventArgs e)
    {
        ButtonToDisable.Enabled = false;
        ButtonToDisable.Text = "Button is disabled!";
    } 
```

现在只需运行页面并等待 2 秒，就会发生回发并禁用 PostBackLinkBut​​ton。

如果您不希望用户可以看到回发，请在更新面板内放置按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:36:46.233

如果我正确理解你需要这样的东西：

```
 var isClicked=false;
 $('.myButton').click(function (e) {
    e=e?e:window.event;
    if(!isClicked){
        if($.browser.msie){e.cancelBubble=true; e.returnValue=false;}
      else
        e.preventDefault();
    isClicked=true;   
    $(this).attr('disabled','disabled');
    setTimeout(function(){delayClick();},1000);
  }

});
function delayClick()
{
   $(this).removeAttr('disabled');
   $('.myButton').click();

} 
```

# php - 原则 2：如何在多对多关联中删除关系以及实体

> ID：13858208
> 
> 赞同：0
> 
> 时间：2012-12-13T10:49:01.703
> 
> 标签：php, mysql, orm, doctrine-orm

我有两个实体`Category`，`Image`一个类别可以有很多图像，所以它基本上是一对多的关系，但`Image`也可以从其他实体中引用。这就是为什么我通过 mm 表使用 unique=true 约束进行多对多操作的原因。

所以我的结构是这样的：

```
category
-- id

images
-- id

category_images
-- category_id
-- image_id 
```

现在我只想通过执行以下操作从类别中删除图像：

```
$category->images = new ArrayCollection(); 
```

或者

```
unset($category->images); 
```

这里的问题是这只会删除连接，例如 mm 表 ( `category_images`) 中的记录，这是正确的，但我可能需要一个注释，在删除 mm 记录时，也会删除`images`表中的相关记录？

我知道这有点偏离 mm 的想法，但我没有一个图像被两个实体引用的情况，所以它应该对我有用。

最后的想法是能够将图像附加到不同的实体，并提供一种简单的“自动”删除它们的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:39:15.847

如果您可以将表设置为使用 Engine=InnoDB，则可以使用外键约束在删除父表中的行时自动删除子表中的行。详情见

```
ON DELETE CASCADE 
```

在[http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)。

# asp.net - 会话超时提示 asp.net

> ID：13858209
> 
> 赞同：1
> 
> 时间：2012-12-13T10:49:05.507
> 
> 标签：asp.net, timeout

我正在使用的应用程序正在使用 jquery 实现一些会话超时提示。有一个计时器，如果在预定义的 X 分钟后没有用户活动，它会显示用户提示

（您的会话将很快结束...继续或注销）。

它使用此处找到的方法 - [http://www.codeproject.com/Articles/227382/Alert-Session-Time-out-in-ASP-Net](http://www.codeproject.com/Articles/227382/Alert-Session-Time-out-in-ASP-Net)。

但是，如果用户打开新选项卡，这将不起作用：

1）用户登录，计时器开始计算用户不活动的次数。

2) 用户点击在新窗口中打开的一些链接（例如，在我们的例子中，它是一个长报告运行）。第二个选项卡处于活动状态，有一些响应（没有结束会话的交叉/回发）。

3) 第二个浏览器选项卡处于活动状态，有一些活动不会结束会话。

4）但是，第一个浏览器选项卡处于非活动状态，计数器“认为”应该关闭会话，它显示适当的消息，然后注销用户。

这不是我们想要的。所以给定的方法只是一些会话超时修复，但如果用户在另一个选项卡中处于活动状态，那么应用程序无论如何都会注销用户。那不是我们想要的。我们有一个报告页面。它的功能是在新选项卡/窗口中打开报告。它可以运行很长时间。报告部分负责一些回调，因此会话不会在此选项卡中结束。但是，它将在第二个选项卡中结束。

**编辑：** 我有以下解决方案：“存储一个 Javascript cookie 并检查以确定会话是否已在另一个选项卡中扩展？”。我仍在努力理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:26:31.983

您可以使用[LocalStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)概念，来保存上次活动时间。

如果您将其保存在其中一个选项卡上，则也可以从其他选项卡访问它...

所有[现代浏览器](http://www.w3schools.com/html/html5_webstorage.asp)都支持这一点。

例子：

当检测到活动时，请使用：

`localStorage['lastActivity'] = new Date();`

当你想检查它时：

`var lastActityTime = localStorage['lastActivity'];`

# eclipse - 使用 openjpa 在 geronimo 上验证错误

> ID：13858211
> 
> 赞同：0
> 
> 时间：2012-12-13T10:49:08.127
> 
> 标签：eclipse, jakarta-ee, jpa, openjpa, geronimo

我已经使用 openjpa 在 Eclipse 中配置了一个简单的示例动态 Web 项目，但我总是收到 Verfy 错误。现在我到了一个我不知道的地步。我使用 TBD 插件来增强实体代码。

所以你有什么提示：

```
Geronimo 应用程序服务器已启动
20 web99 INFO [DefaultThreadPool 0] openjpa.Runtime - OpenJPA 动态加载验证提供程序。
21 web99 INFO [DefaultThreadPool 0] openjpa.Runtime - 启动 OpenJPA 2.1.1
25 web99 INFO [DefaultThreadPool 0] openjpa.jdbc.JDBC - 使用字典类“org.apache.openjpa.jdbc.sql.MySQLDictionary”。
2012-12-13 11:25:29,636 错误 [[jsp]] Servlet.service() for servlet [jsp] 在路径 [/web99] 的上下文中引发异常 [java.lang.VerifyError: 在分支目标处期望堆栈图帧43 in method model.Hello.()V at offset 34] 有根本原因
java.lang.VerifyError：在方法 model.Hello.()V 偏移 34 处的分支目标 43 处期望堆栈图帧
    在 java.lang.Class.forName0（本机方法）
    在 java.lang.Class.forName(Class.java:264)
    在 org.apache.openjpa.meta.MetaDataRepository.classForName(MetaDataRepository.java:1552)
    在 ...

```

持久化的.xml

```
<persistence-unit name="web99" transaction-type="RESOURCE_LOCAL">
    <class>model.Hello</class>
    <properties>
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/Inventarum"/>
        <property name="javax.persistence.jdbc.user" value="root"/>
        <property name="javax.persistence.jdbc.password" value="***"/>
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
        <property name="openjpa.RuntimeUnenhancedClasses" value="unsupported"/>
    </properties>
</persistence-unit> 
```

这是我的代码：

```
public class Db {

    private EntityManagerFactory factory;
    private EntityManager manager;

    public Db(){
        factory = Persistence.createEntityManagerFactory("web99");
        manager = factory.createEntityManager();
    }

    public String getInfo(){
        Query query = manager.createQuery("SELECT i FROM Hello i WHERE i.id=1");
        Hello hello = (Hello) query.getSingleResult();
        return hello.getName();
    }

} 
```

eclipse生成的持久化类：

```
@Entity
@Table(name="hello")
public class Hello implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @Column(unique=true, nullable=false)
    private int id;

    @Column(length=255)
    private String name;

    public Hello() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

谢谢

奥拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:28:25.143

移至 OpenJPA 的 2.2.0 版。

[https://issues.apache.org/jira/browse/OPENJPA-2085](https://issues.apache.org/jira/browse/OPENJPA-2085)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:10:17.063

使用JDK1.7(+)和使用中的OpenJPA版本还不支持？这就是堆栈图帧错误通常意味着什么

# jakarta-mail - 企业应用程序中的 JavaMail：为什么要使用 JNDI？

> ID：13858221
> 
> 赞同：0
> 
> 时间：2012-12-13T10:49:26.633
> 
> 标签：jakarta-mail, jndi

要从企业应用程序访问数据库，我们总是使用 DataSource（而不是通过 DriverManager 执行直接访问），因为在它后面有一个可以提高性能的连接池，但是 JavaMail 会话呢？使用 JNDI 查找 JavaMail 会话而不是通过调用创建一个会话有什么好处`javax.mail.Session.getInstance(Properties props)`？仅以标准方式配置邮件服务器地址是否有用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:00:42.263

在 JNDI 中查找 JavaMail Session 的原因是它允许应用服务器管理员在不修改应用程序的情况下配置 Session。

# java - 计算目录的 SHA-1

> ID：13858223
> 
> 赞同：1
> 
> 时间：2012-12-13T10:49:28.410
> 
> 标签：java, hash, directory, checksum, sha1

我正在尝试为整个目录结构计算 SHA-1 校验和。

到目前为止，我所做的是递归地计算每个常规文件的 SHA-1 并将所有校验和附加在一起。问题是这使得计算依赖于遍历文件的顺序

即，如果我有一个包含文件的文件夹

`file1.dat file2.dat`

和包含相同文件的另一个文件夹，但按顺序排列

`file2.dat file1.dat`

这将计算不同的校验和。

如何使 SHA-1 计算顺序独立？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:56:11.980

在计算 SHA-1 或 File[] for File.listFiles 之前，尝试对从 File.list 获得的文件名 String[] 进行排序，File is Comparable。Arrays.sort 就足够了。请注意， File.list / File.listFile 返回的项目没有特定的顺序，尽管它们可能看起来是排序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:59:07.237

好吧，既然您已经准备好哈希计算算法，您可以将所有哈希添加到一个 Set（或任何其他不采用重要元素顺序的数据结构）和每个目录中，然后检查集合是否相等

[设置类](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:04:54.373

您至少有两个选择：

1.  为目录创建一个存档文件，然后为其创建摘要。（拉链，罐子）

2.  将所有文件字节读入单字节数组，然后从中创建摘要。

3.  在创建摘要之前使用您的算法预订数据。

4.  创建两个摘要列表并进行比较。

就我个人而言，我会选择选项一，既快速又简单。

# javascript - 随机 LI 选择器

> ID：13858224
> 
> 赞同：0
> 
> 时间：2012-12-13T10:49:30.943
> 
> 标签：javascript, jquery, random

我有 3 里的所有数据窗格名称。
我希望每次刷新都选择一个随机的 li 。

如何制作一个 javascript/jQuery 脚本来随机`data-panename`获取该类`active`？

**HTML**

```
<ul class="tab-tabs">
 <li class="first" data-panename="uitgelicht"><a href="/nl?show=Uitgelicht" rel="nofollow">Uitgelicht</a></li>
 <li data-panename="nieuw"><a href="/nl?show=Nieuw" rel="nofollow">Nieuw</a></li>
 <li class="last" data-panename="meest-bekeken"><a href="/nl?show=Meest+bekeken" rel="nofollow">Meest bekeken</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T10:53:00.220

你可以这样做 ：

```
var lis = $('li[data-panename]');
lis.eq(Math.floor(Math.random()*lis.length)).addClass('active'); 
```

[演示](http://jsfiddle.net/jCPva/)（重新加载以查看红色的不同 li）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T10:52:44.930

试试这样：

```
$lis = $('.tab-tabs li');

var randomIndex = Math.floor(Math.random()*$lis.length);

$lis.eq(randomIndex).addClass('active;); 
```

编辑：`Math.round()`当然，共同域太宽了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:03:02.267

给你： **JS**

```
​$(document)​.ready(function() {
    var selector = '.tab-tabs > li:eq('+Math.floor(Math.random()*3)+')';
    $(selector).addClass('active');
});​​​​​​​ 
```

**CSS**

```
.active {
    background-color:#FFAA00;
}​ 
```

演示：http: [//jsfiddle.net/B6ywm/](http://jsfiddle.net/B6ywm/)

# haskell - Haskell 中的整数表示

> ID：13858225
> 
> 赞同：-3
> 
> 时间：2012-12-13T10:49:39.273
> 
> 标签：haskell, types

定义循环类型的`Integers`表示以像这样工作：

```
data Integers = Zero | Next Integers | Prev Integers 
```

并制作这个表示，类 Num 的实例，这意味着你应该可以`(+), (*), (==), abs, signum, show`使用`Integers`

直到现在我这样定义：

```
data Integers = Zero | Integers Int deriving (Show)

next :: Integers -> Integers
next Zero = Integers 1
next (Integers a) = Integers a + Integers 1

prev :: Integers -> Integers
prev (Integers 1) = Zero
prev (Integers a) = Integers a - Integers 1

instance Eq Integers where  
    Zero == Zero = True
    Integers a == Integers b = a == b  
    _ == _ = False

instance Num Integers where
    Integers a + Integers b = Integers (a + b)
    Integers a - Integers b = Integers (a - b)
    Integers a * Integers b = Integers (a * b)
    abs (Integers a) = Integers (abs a)
    signum (Integers a) = Integers (signum a)
    fromInteger a = Integers (fromInteger a) 
```

但不符合`data Integers = Zero | Next Integers | Prev Integers`预期

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T12:07:51.740

```
data Integers = Zero | Next Integers | Prev Integers 
```

我将向您展示`+`，其余的应该很容易。

```
Zero + y = y
x + Zero = x 
```

嗯，这很容易！

哦。还有一些其他情况。

尽管如此，我们已经处理了所有的`Zero`情况，所以现在我们只需要处理`Prev`and `Next`。他们是相反的，不是吗？因此，如果我们分别获得一个，它们将相互抵消。

```
Next x + Prev y = x + y
Prev x + Next y = x + y 
```

现在我们只需要担心给定的数字都具有相同符号的情况。

```
Next x + Next y = Next (Next (x + y))
Prev x + Prev y = Prev (Prev (x + y)) 
```

（最后两个等式不是最有效的实现，但它们很容易理解。）

我们已经完成了定义`+`。

其他一些功能更容易，一些更难（并且应该重用一些更简单的功能），但它们都涉及对/either/both参数的模式匹配并做适当的事情。大多数情况下，它们涉及递归，当给定递归数据结构时，通常在某种程度上是不可避免的。

# python - ImportError: 没有名为 lxml.etree ( windows ) 的模块

> ID：13858230
> 
> 赞同：2
> 
> 时间：2012-12-13T10:49:55.500
> 
> 标签：python, pyinstaller

使用 pyInstaller 创建二进制文件并执行后，我收到以下错误：

```
ImportError: No module named lxml.etree 
```

[我已经从lfd.uce.edu](http://www.lfd.uci.edu/~gohlke/pythonlibs/)下载并安装了 Python 2.7 的 lxml 二进制文件 (lxml-3.0.1.win32-py2.7.‌exe) ，但我仍然有错误。

此错误仅发生在二进制文件中。如果我执行 .py 文件，它运行良好。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:03:59.247

我尝试安装它，它工作正常。您是否可能不小心将 lxml 安装在错误的 python 解释器目录中？你安装了几个python解释器吗？

# background - 在 chrome 扩展中运行广播电台

> ID：13858238
> 
> 赞同：3
> 
> 时间：2012-12-13T10:50:21.297
> 
> 标签：background

我想为我的互联网广播网络电台创建一个 chrome 扩展。

我设法让它全部工作，除了每当我点击远离弹出窗口时，它就会关闭，并且流随之停止。

读了一点之后，我发现我需要创建一个背景页面，这将使播放器在后台运行。

那就是我迷路和困惑的地方。

即使我没有打开弹出窗口，如何让流继续工作？

再一次 - 事情是这样的：当您单击它打开的扩展程序时，我的播放器会出现（iframe 中的 Flash 播放器）。我点击播放，它工作得很好。当我想继续上网时，我点击我所在的页面，它会关闭扩展程序并停止音乐。

**这是我的文件** manifest.json：

```
{
  "name": "JointRadio",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Online Radio Station",
  "background_page": "background.js",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },

  "permissions": ["tabs"],
} 
```

popup.html：

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width:357px;
        overflow-x:hidden;
      }

      img {
        margin:5px;
        border:2px solid black;
        vertical-align:middle;
        width:75px;
        height:75px;
      }

      #mainplayer {

      }
    </style>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="popup.js">
  </head>
  <body>
  <iframe width="460" border=0 height="130" src="http://jointil.com/broadcast/flexAmp.swf" frameborder=0 marginheight=0 marginwidth=0 id="mainplayer"></iframe>
  </body>
</html> 
```

提前致谢！！：） 亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:10:04.240

我找到了一种即使关闭弹出窗口也可以播放流的方法，但问题是播放器没有显示在弹出窗口中......我在“background.js”中添加了这段代码

```
var audioElement = document.createElement('audio');
audioElement.setAttribute('src', 'http://85.25.118.16:7502/;');
audioElement.setAttribute('controls', true);
audioElement.setAttribute('hidden', false);
audioElement.play(); 
```

2 - 清单.json：

```
{
"name": "Kombat Syndicate Radio Extension",
"version": "1.0",
"manifest_version": 2,
"description": "Kombat Syndicate Radio",
"background": {
"persistent": true,
"scripts": ["background.js"]
},
"browser_action":   {
    "default_icon": "icon.png",
     "19": "icons/icon.png",  
     "128": "icons/icon_128.png",
    "default_popup": "ksradio.html"
},

    "permissions": ["tabs", "http://*/*", "background"]

    } 
```

如果我知道如何在弹出窗口中显示播放器，我会告诉你.. 如果你发现如何在我面前显示它，请告诉我：P

### 编辑：

我注意到在您的“popup.html”中，“ `<script src="popup.js">`”不正确，请在“ `</script>`”之后添加“”，`<script src="popup.js">`这样您将拥有“ `<script src="popup.js"></script>`”

# sql-server - sql查询的where子句中的if条件

> ID：13858239
> 
> 赞同：6
> 
> 时间：2012-12-13T10:50:27.277
> 
> 标签：sql-server

当我想要特定用户的数据时，下面是查询的 where 子句

```
where Completion_Date>= '11/01/2011' 
and Completion_Date<= '12/11/2012' 
and System_user_id = 1234 
```

当我想为所有用户提取数据时，下面是 where 子句：

```
where Completion_Date>= '11/01/2011' 
and Completion_Date<= '12/11/2012' 
```

由于我不想要 2 个单独的查询，有没有办法在 where 子句中添加条件，以便我可以使用单个查询并根据输入（即 System_user_id）决定是否在查询中添加额外的条件。当我想要所有用户的数据和特定用户的 system_user_id 将被发送时，我将发送 -1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T11:03:36.673

您可以尝试以下程序。

**更新查询**

```
declare @userid int = -1
if (@userid = -1)
    BEGIN

     SELECT * FROM mytable 
     where Completion_Date>= '11/01/2011' 
     and Completion_Date<= '12/11/2012' 
     and userid in 
         (select distinct userID from mytable)
    end
ELSE
    BEGIN

     SELECT * FROM mytable 
     where Completion_Date>= '11/01/2011' 
     and Completion_Date<= '12/11/2012' 
     and userid = @userid 

end; 
```

结果：

```
USERID  NAME    COMPLETION_DATE
123     john    2011-11-01
125     tim     2011-11-02
127     ron     2011-11-08 
```

*   [参考](http://sqlfiddle.com/#!3/63ed0/2)SQLFIDDLE

**要查看特定用户：**

*   参考[SQLFIDDLE](http://sqlfiddle.com/#!3/63ed0/1)

* * *

# **另一种方法**

在 OP 的最新评论后更新

*   [SQLFIDDLE](http://sqlfiddle.com/#!3/91e84/1)

询问：

```
DECLARE @uid int = -1
SELECT 
*
FROM mytable 
WHERE 
( CASE 
     WHEN @uid <> -1 THEN @uid
     ELSE userid
  END
) = userid

and Completion_Date>= '11/01/2011' 
     and Completion_Date<= '12/11/2012' 
; 
```

结果：当@uid = -1

```
USERID  NAME    COMPLETION_DATE
123     john    2011-11-01
125     tim     2011-11-02
127     ron     2011-11-08 
```

如果您尝试过，请发表评论:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T10:59:47.370

尝试：

```
WHERE ((@System_user_id = -1)
  AND (Completion_Date >= '11/01/2011') 
  AND (Completion_Date <= '12/11/2012'))
OR ((@System_user_id <> -1) 
  AND (System_user_id = @System_user_id) 
  AND (Completion_Date >= '11/01/2011') 
  AND (Completion_Date <= '12/11/2012')) 
```

使用公用表表达式 ( [SQL Fiddle](http://sqlfiddle.com/#!3/9b759/24/0) )的变体

```
;WITH CompletionDates AS
(
    SELECT *
    FROM MyTable
    WHERE Completion_Date >= '11/01/2011'
    AND Completion_Date <= '12/11/2012'
)
SELECT * 
FROM CompletionDates
WHERE (@System_user_id = -1) OR (System_user_id = @System_user_id) 
```

# c# - Linq 查询以获取孙子

> ID：13858241
> 
> 赞同：-3
> 
> 时间：2012-12-13T10:50:34.857
> 
> 标签：c#, linq, entity-framework

我正在尝试使用 linq 获取孙子，但到目前为止没有成功。数据结构如下

```
 public class GrandParent 
{ 
    public int grandkey; 
    public List<GrandParent> parent { get; set; } 
}
public class Parent
{
    public int parentkey;
    public List<Child> child { get; set; }
}
public class Child
{
    public int childkey { get; set; }
    public string value { get; set; }
} 
```

我有祖父母对象。使用 linq 我想获取子值。我知道我可以在两行中做到这一点，但我想在一行中得到它

像这样的东西`var a = from hh in parent where hh.child.Select(c=>c.Value)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:06:17.670

基于以下类：

```
public class Parent
{
    public List<Child> Children { get; set; }
}

public class Child
{
    public string Key { get; set; }

    public int Value { get; set; }
} 
```

以及以下设置：

```
var parents = new List<Parent>
{
    new Parent
    {
        Children = new List<Child>
        {
            new Child { Key = "KEY1", Value = 5 },
            new Child { Key = "KEY2", Value = 0 },
            new Child { Key = "KEY3", Value = 1 },
            new Child { Key = "KEY4", Value = 0 }
        }
    },
    new Parent
    {
        Children = new List<Child>
        {
            new Child { Key = "KEY5", Value = 0 },
            new Child { Key = "KEY6", Value = 0 },
            new Child { Key = "KEY7", Value = 1 },
            new Child { Key = "KEY8", Value = 0 }
        }
    }
}; 
```

您可以使用以下方法删除所有带有 Value == 0 的项目：

```
parents.ForEach(p => { p.Children.RemoveAll(c => c.Value == 0); }); 
```

这将使您在第一个父对象中有 2 个子对象，在第二个父对象中有 1 个子对象。

我希望这有帮助。

# java - GWT 中的拖动和切换按钮，如 Ubuntu 12.04 切换按钮

> ID：13858242
> 
> 赞同：0
> 
> 时间：2012-12-13T10:50:36.087
> 
> 标签：java, gwt, animation, button

我如何创建一个可以通过在 GWT 中拖动来切换的按钮（或小部件）？我们在 GWT 中有任何内置函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:22:02.593

我不确定您所说的拖动切换是什么意思，但就小部件而言，您有几个选择。

1.  [GWT 小部件库](https://developers.google.com/web-toolkit/doc/1.6/RefWidgetGallery)是基本 gwt 小部件的一个很好的概述。
2.  您可以创建自己的小部件来扩展 gwt 小部件，例如[`ToggleButton`](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/ToggleButton.html)并编写您需要的扩展功能。
3.  小部件库很有可能拥有您正在寻找的东西。[Sencha 的 ext-gwt library](http://www.sencha.com/products/gxt)是一个很好的参考，它也有很好的例子。

# reportbuilder - 在报表生成器中使用跳过锁

> ID：13858246
> 
> 赞同：2
> 
> 时间：2012-12-13T10:50:44.717
> 
> 标签：reportbuilder

我们可以在报表生成器 rdf 文件中使用如下跳过锁吗？

```
cursor c is select * from t where condition for update skip locked 
```

我收到以下错误

> 在预期以下情况之一时遇到该符号：; nowait 订单

我的报表生成器版本是：10.1.2.0.2

# postgresql - 从 postgresql 实例连接 SQL 服务器

> ID：13858249
> 
> 赞同：1
> 
> 时间：2012-12-13T10:51:03.280
> 
> 标签：postgresql, sql-server-2008, sql-server-2005

我有一个运行大量现有数据的 SQL 服务器，我需要通过我系统上的 postgresql 实例连接它。我使用了以下链接。但它实际上不是我想要的。

[http://blog.slalom.com/2011/03/14/connecting-to-a-postgresql-instance-using-sql-server-integration-services/](http://blog.slalom.com/2011/03/14/connecting-to-a-postgresql-instance-using-sql-server-integration-services/)

谁能提出一个明确的方法来实现这一目标。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:36:57.300

`SQL/MED`（在 PostgreSQL 核心中作为“外部数据包装器”实现）应该可以解决这个问题，但 PostgreSQL 中的当前实现相当有限。请参阅[http://wiki.postgresql.org/wiki/Foreign_data_wrappers](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)。ODBC FDW 可能足以满足您的需求，试一试。

或者，您可以使用`DBI-Link`，它使用 Perl DBI 驱动程序（包括但不限于 Perl DBI ODBC 桥）与其他数据库通信。[您会在 PgFoundry 上找到 dbi-link](http://dbi-link.projects.pgfoundry.org/)。

# jquery - 加载图像后调用函数，如果加载图像也调用函数

> ID：13858250
> 
> 赞同：1
> 
> 时间：2012-12-13T10:51:06.523
> 
> 标签：jquery

我正在使用此代码在加载图像后调用函数

```
var height = 0;
$("#right-layout-ul li img").on("load",function(){
     function_function();    
}); 
```

如果我正在刷新页面，则该函数不会调用，因为图像已经加载...

有没有办法找到像加载或加载图像的状态？

我想在加载图像后调用一个函数，如果加载了图像也调用该函数...

如何实施？？？请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:55:15.000

```
var $images = $("#right-layout-ul li img")
, imageCount = $images.length
, counter = 0;

// one instead of on, because it need only fire once per image
$images.one("load",function(){

     // increment counter everytime an image finishes loading
     counter++;
     if (counter == imageCount) {

         // do stuff when all have loaded
         function_function();   
     } 
}).each(function () {
    if (this.complete) {

        // manually trigger load event in
        // event of a cache pull
        $(this).trigger("load");
    }
}); 
```

# c# - 检查网站是否有证书 C#

> ID：13858252
> 
> 赞同：1
> 
> 时间：2012-12-13T10:51:09.347
> 
> 标签：c#, selenium

有什么方法可以检查网站是否有任何证书？我尝试使用 Selenium Web Driver 执行此操作，但遇到了一些困难。我们希望自动导航多个站点，直到找到一个带有证书的站点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:12:55.547

尝试使用 https:// 而不是 http 打开 URL 就足够了，如果没有抛出异常（例如不是来自受信任的提供商的证书）或页面不存在，那么您的页面具有有效的 SSL 证书。

# git - 如何在两个不同的 vcs 中签入代码

> ID：13858253
> 
> 赞同：1
> 
> 时间：2012-12-13T10:51:12.187
> 
> 标签：git, svn, version-control, dvcs

想象一下，您正在编写一些代码，需要将其签入“官方 vcs”(A)。但是您还想将代码检查到您自己的 vcs (B) 中。

A（这可以是 SVN 或 git）和 B（git）。我需要从 A 中提取更改，而不是从 B 中提取更改（B 仅供我自己使用）。

解决这个问题的最佳方法是什么？

我正在考虑对 A 进行一些检查，并使用 Ant 目标将 src 复制到一个干净的目录并将该目录检查到 B，这样我就可以轻松地从 A 中提取更改。

这是最好的方法吗？有人已经在处理这个问题并有一些建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:49:24.110

您需要`B`成为远程仓库吗？

在`git`中，您在自己的 repo 上工作，这通常是远程 repo 的克隆。所以，它是一个**完整**的存储库。你承诺它，你从它结帐分支。并且您将它与其他存储库连接以同步提交。

如果你不需要`B`是远程仓库，你可以只是[`git clone`](http://learn.github.com/p/remotes.html)远程git仓库，或者[`git svn clone`](http://learn.github.com/p/git-svn.html)远程SVN仓库。然后，您将拥有两个存储库，它们将与您同步`pull`/ `push`/ `dcommit`/ `rebase`。

If you need your `B` repository to be remote, you can always add another remote with `git remote add` and `push`/`pull` to/from it, independently of when you synchronize with `A` repo, independently of `A` repo being git or SVN.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:34:21.883

如果 A 和 B 都是 git，则您的 repo 可以有多个遥控器。

例如：

```
$ git push origin
$ git remote add myPrivateRepo /path/to/the/private/repository
$ git push myPrivateRepo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:54:13.160

git + git-svn

“自己的”VCS 是**本地**Git-repo，对于外部 Subversion，您只需添加 Subversion-remote

# android - sqllite -android中没有这样的表错误

> ID：13858257
> 
> 赞同：0
> 
> 时间：2012-12-13T10:51:21.360
> 
> 标签：android, sqlite

我正在创建一个接受用户信息进行注册的应用程序，但我收到一条错误消息，提示“没有这样的表：UserAccount”，下面是我的代码：

我的数据库助手

```
public class DBAdapter 
{

    public static final String KEY_ROWID = "_id";
    public static final String KEY_TITLE = "title";
    public static final String KEY_FULLNAME = "fullname";
    public static final String KEY_EMAIL = "email";
    public static final String KEY_PASS = "password";   
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "pioneer.db";
    private static final int DATABASE_VERSION = 1;
    public static final String DATABASE_TABLE_NAME = "UserAccount";

    private static final String DATABASE_CREATE =
        "create table IF NOT EXISTS users (_id integer primary key autoincrement, "
        + "title text, fullname text, email text, password text);";

    private final Context context; 

    private DatabaseHelper DBHelper;

    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS users");
            onCreate(db);
        }
    }    

    //---opens the database---
    public DBAdapter opendb() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a title into the database---
    public long insertUser(String title, String fullname,String email, String Password) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_TITLE, title);
        initialValues.put(KEY_FULLNAME, fullname);
        initialValues.put(KEY_EMAIL, email);
        initialValues.put(KEY_PASS, Password);
        return db.insert(DATABASE_TABLE_NAME, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(long rowId) 
    {
        return db.delete(DATABASE_TABLE_NAME, KEY_ROWID + 
          "=" + rowId, null) > 0;
    }

    //---retrieves all the titles---
    public Cursor getAllUsers() 
    {
        return db.query(DATABASE_TABLE_NAME, new String[] {
          KEY_ROWID, 
          KEY_TITLE,
          KEY_FULLNAME,
          KEY_EMAIL,
          KEY_PASS,
          }, 
        null, 
        null, 
        null, 
        null, 
        null);
    }

    //---retrieves a particular user---
    public Cursor getUser(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(DATABASE_TABLE_NAME, new String[] {
                          KEY_ROWID, 
                          KEY_TITLE,
                          KEY_FULLNAME,
                          KEY_EMAIL,
                          KEY_PASS,
                          }, 
                  KEY_ROWID + "=" + rowId, 
                  null,
                  null, 
                  null, 
                  null, 
                  null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a title---
    public boolean updateTitle(long rowId, String title, String fullname,String email, String Password)
    {
        ContentValues args = new ContentValues();
        args.put(KEY_TITLE, title);
        args.put(KEY_FULLNAME, fullname);
        args.put(KEY_EMAIL, email);
        args.put(KEY_PASS, Password);

        return db.update(DATABASE_TABLE_NAME, args, 
                         KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

这就是我使用它的地方

```
public class RegisterActivity extends Activity {
    Button btn;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);
        final EditText full_Name = (EditText)findViewById(R.id.reg_fullname);
        final EditText mMail = (EditText)findViewById(R.id.reg_email);
        final EditText mPass = (EditText)findViewById(R.id.reg_password);
        final TextView loginScreen = (TextView) findViewById(R.id.link_to_login);
        btn = (Button)findViewById(R.id.btnRegister);

        final DBAdapter db = new DBAdapter(this);
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (db !=null){
                db.opendb();
                long uid =db.insertUser("Mr", full_Name.getText().toString(), mMail.getText().toString(), mPass.getText().toString());

                Cursor c = db.getUser(uid);
                if (c !=null){
                    ShowMessage(c.getString(2));
                }
                }
                db.close();

            }

        });
        }

        private void ShowMessage(String message){
            Toast.makeText(this, message, Toast.LENGTH_LONG).show();
        }

        // Listening to Login Screen link
     /*   loginScreen.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                                // Closing registration screen
                // Switching to Login Screen/closing register screen
                finish();
            }
        });*/

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_register, menu);
        return true;
    }

} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:53:29.160

您正在创建一个名称 ( `users`) 与查询语句 () 中使用的名称不同的表`UserAccount`。

```
public static final String DATABASE_TABLE_NAME = "UserAccount";

private static final String DATABASE_CREATE =
    "create table IF NOT EXISTS users (_id integer primary key autoincrement, "
    + "title text, fullname text, email text, password text);"; 
```

它应该是：

```
private static final String DATABASE_CREATE =
    "create table IF NOT EXISTS "+ DATABASE_TABLE_NAME+" (_id integer primary key autoincrement, "
    + "title text, fullname text, email text, password text);"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:53:27.977

```
public static final String DATABASE_TABLE_NAME = "UserAccount";
...
"create table IF NOT EXISTS users 
```

`users`并且`UserAccount`是不同的。您应该使它们相同才能正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T10:54:58.580

用户！=用户帐户。

您创建表用户，但您在 UserAccounts 中进行查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T10:57:48.997

您的 DATABASE_CREATE 使“用户”表不是 DATABASE_TABLE_NAME 使用的“用户帐户”表。将变量添加到 sql 表创建字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T10:53:20.410

将创建查询更改为

```
private static final String DATABASE_CREATE =
        "create table IF NOT EXISTS "+ DATABASE_TABLE_NAME+" (_id integer primary key autoincrement, "
        + "title text, fullname text, email text, password text);"; 
```

# c# - 覆盖 XML 反序列化的属性

> ID：13858258
> 
> 赞同：0
> 
> 时间：2012-12-13T10:51:28.973
> 
> 标签：c#, xml, xml-deserialization

我正在使用 API 来搜索酒店，我们将这种类型称为 1。它被反序列化`XmlSerializer`到我的`Hotel`类中，这一切都按预期工作。我的问题是当我进行另一个 API 调用时，我们将调用类型 2，并且想要重用我的`Hotel`类。

API 调用非常相似，类型 1 返回附近酒店的列表，类型 2 返回特定酒店的更多详细信息。我试图解析的额外信息之一是图像。在类型 1 和我的`Hotel`班级中，我有：

```
[XmlElement("images")]
public virtual string ImageURL { get; set; } 
```

这适用于类型 1 调用。现在对于类型 2 调用，它是一个图像数组，而不仅仅是一个字符串。我创建了一个名为的新类`Hotel2`，它派生自`Hotel`如下所示：

```
public class Hotel2 : Hotel
{
    [XmlArray("images")]
    [XmlArrayItem("url")]
    public List<string> ImageURLs { get; set; }

    [XmlIgnore]
    public override string ImageURL
    {
        get
        {
            return (this.ImageURLs != null && this.ImageURLs.Count > 0 ? this.ImageURLs[0] : String.Empty);
        }
    } 
```

}

你可以看到我有一个`ImageURLs`处理数组的新属性（注意's'）。我还覆盖了`ImageURL`返回集合中第一个 Image 的属性并将其`ImageURLs`标记为`XmlIgnore`不会被反序列化。

问题是它似乎`XmlSerializer`忽略了我的`XmlIgnore`属性并尝试反序列化基本属性，从而导致此异常：`The XML element 'images' from namespace '' is already present in the current scope. Use XML attributes to specify another XML name or namespace for the element.`

知道我可以在这里做什么吗？我也试图隐藏该属性，`new`但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:39:00.277

在 Marc 建议使用 之后`XmlAttributeOverrides`，感觉有点“脏”，所以我决定创建一个抽象`HotelBase`类，将`ImageURL`属性抽象化并用`XmlIgnore`. 现在我可以在我的`Hotel1`和`Hotel2`类中覆盖它。

# windows-services - windows服务项目名称空间“System.Configuration”中不存在类型或名称空间名称“ConfigurationManager”

> ID：13858260
> 
> 赞同：1
> 
> 时间：2012-12-13T10:51:30.283
> 
> 标签：windows-services, configurationmanager

我正在编写 Windows 服务。

我**添加了 dll 和命名空间**，如下所示。

**使用 System.Configuration；**

//这条线导致错误，但为什么？

var settings = System.Configuration.ConfigurationManager.AppSettings;

**错误：命名空间“System.Configuration”中不存在类型或命名空间名称“ConfigurationManager”**

项目目标是v4.0，我成功安装并启动服务

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:25:31.217

appSettings 是一个只读属性，所以我认为我们需要在 App.config 中定义。

```
<?xml version="1.0"?>
<configuration>
 <appSettings>

 </appSettings>
 ....
 <system.webServer>
   <modules runAllMan.... 
```

# ubuntu-11.04 - ext4fs 在挂载时找不到 ext4 文件系统

> ID：13858261
> 
> 赞同：0
> 
> 时间：2012-12-13T10:51:41.567
> 
> 标签：ubuntu-11.04, mount, ext4

我正在尝试在我的 ubuntu 11.04 natty 上安装 iso

当我

```
df - T 
```

我知道 ext4 是我的文件系统

但是，当我尝试使用

```
mount -o loop -t ext4 .... 
```

我得到：

```
can't find ext 4 filesystem 
```

有什么解决办法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:18:19.563

在 mount 命令中，-t 参数指定了被挂载的文件系统的类型，而不是新文件系统将被挂载到的目录位置。你说你要挂载的文件系统是一个 ISO 文件。所以类型大概是iso9960。

这个问题确实属于超级用户或服务器故障。

# r - 如何通过分隔符分割向量？

> ID：13858262
> 
> 赞同：6
> 
> 时间：2012-12-13T10:51:41.250
> 
> 标签：r

我有一个整数向量，例如`c(1,2,0,3,4)`，我希望 0 作为分隔符并获取`list(c(1,2), c(3,4))`. 我可以使用任何库函数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T11:12:03.767

我知道没有库函数，但您可以编写自己的：

```
split.vec <- function(vec, sep = 0) {
    is.sep <- vec == sep
    split(vec[!is.sep], cumsum(is.sep)[!is.sep])
}

split.vec(c(1,2,0,3,4), 0)
# $`0`
# [1] 1 2
# 
# $`1`
# [1] 3 4 
```

# knockout.js - 使用 $data 将 html 元素添加到数据绑定中

> ID：13858264
> 
> 赞同：0
> 
> 时间：2012-12-13T10:51:46.417
> 
> 标签：knockout.js, knockout-2.0

我有这个结构 Here 用于导航目的。但是，要在结尾添加一个箭头，我必须`<i>`在 anchor 内添加一个图标标签。

```
<ul class="nav nav-list bs-docs-sidenav affix" data-bind="foreach:Folders">
                <li data-bind="css:{active: $data == chosenFolderId() }">
                <a href="#" data-bind="text: $data , click:goToFolder"></a></li>                   
            </ul> 
```

现在我想要的是用这样的东西生成一个锚标签

```
<a href="#">Inbox<i class="icon-chevron-right"></i> Button groups</a> 
```

从哪里来`Inbox`的淘汰赛 observable 。现在如何实现这一点？请注意，我无法在此处添加跨度标记，因为单击事件应仅从锚标记触发。所以结构必须是我上面提到的！

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:21:50.550

使用淘汰评论标签：

```
<!-- ko text: $data --><!-- /ko --> 
```

# javascript - JS无限滚动数据列表

> ID：13858267
> 
> 赞同：-1
> 
> 时间：2012-12-13T10:51:51.453
> 
> 标签：javascript, infinite-scroll

我正在寻找一个很好的 JS 组件（可能是基于 jQuery 的，但不是强制性的），用于制作一个`div`包含从 REST 数据源加载的内容的列表。想想推特的时间线。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:14:13.807

好的，找到一个合适的插件。基于 jQuery 并通过 AJAX 加载 JSON。

[https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

# iphone - 如何在iphone中的标签值中添加或连接百分比符号

> ID：13858270
> 
> 赞同：2
> 
> 时间：2012-12-13T10:52:01.863
> 
> 标签：iphone, uilabel

我正在使用以下行在标签上显示值，但我也希望使用此值它还必须显示百分比以及值，因此如何添加百分比符号

```
 ModerateEIULabel.text=[NSString  stringWithFormat:@"%.2f",appDelegate.Same_Vaccination_ModerateEI_Unvaccinated]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:04:34.363

要`%`以格式化字符串显示，您需要添加两个`%%`

```
ModerateEIULabel.text = [NSString  stringWithFormat:@"%.2f%%",appDelegate.Same_Vaccination_ModerateEI_Unvaccinated]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:04:35.447

使用两个 % 符号获得一个 % 登录标签。

检查使用：

```
NSLog(@"%%"); 
```

它将打印一个 % 符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T10:55:03.323

只需在 stringFormat 最后添加 % 符号，如下所示..

```
 ModerateEIULabel.text=[NSString  stringWithFormat:@"%.2f %%",appDelegate.Same_Vaccination_ModerateEI_Unvaccinated]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T10:54:14.077

```
 ModerateEIULabel.text =[ ModerateEIULabel.text stringByAppendingString:@"%"]; 
```

让我知道它是否工作..!!!

快乐编码！！！

# wix - 功能 Wix 的进度文本

> ID：13858272
> 
> 赞同：1
> 
> 时间：2012-12-13T10:52:09.270
> 
> 标签：wix

任何人都可以推荐一种方法：

我有我的主应用程序，根据一些条件，客户可以选择安装与主应用程序相关的 7 个驱动程序的文件。问题是他们希望更新进度文本，例如：

如果选择功能 1，则添加文本“安装功能 1”

据我所知，我将如何实现这一目标的任何想法，我们只能为自定义操作设置进度文本..:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:37:16.190

首先，我将`ADDLOCAL`属性设置为`CustomActionData`：

```
 <CustomAction Id="SetAddLocalProperty" Return="check" Property="InstallDrivers" Value="[ADDLOCAL]"></CustomAction> 
```

然后，我安排在调用自定义操作之前运行此自`InstallDriver`定义操作：

```
extern "C" UINT __stdcall InstallDrivers(MSIHANDLE hInstall)
{
    HRESULT hr = S_OK;
    UINT er = ERROR_SUCCESS;
    LPWSTR szValueBuf = NULL;
    char CustomActionData[MAX_PATH];
    const UINT iTickIncrement = 1000;
    const UINT iNumberItems = 3;
    const UINT iTotalTicks = iTickIncrement * iNumberItems;
    PMSIHANDLE hActionRec = MsiCreateRecord(10);
    PMSIHANDLE hProgressRec = MsiCreateRecord(3);

    hr = WcaInitialize(hInstall, "InstallDrivers");
    ExitOnFailure(hr, "Failed to initialize");

    WcaLog(LOGMSG_STANDARD, "Initialized.");

    hr = WcaGetProperty(L"CustomActionData",&szValueBuf);
    ExitOnFailure(hr, "failed to get CustomActionData");

    wcstombs(CustomActionData, szValueBuf, 260);

    char *token = strtok(CustomActionData, ",");

    while (token != NULL) 
    {
        MsiRecordSetString(hActionRec, 1, TEXT("MyCustomAction"));

        if (strcmp(token, "Driver1") ==0)
        {
            MsiRecordSetString(hActionRec, 2, TEXT("Installing Driver1"));
            token = strtok (NULL, ",");
        }
        else if (strcmp(token, "Driver2") ==0)
        {
            MsiRecordSetString(hActionRec, 2, TEXT("Installing Driver2"));
            token = strtok (NULL, ",");
        }
        else if (strcmp(token, "Driver3") ==0)
        {
            MsiRecordSetString(hActionRec, 2, TEXT("Installing Driver3"));
            token = strtok (NULL, ",");
        }
        else if (strcmp(token, "Driver4") ==0)
        {
            MsiRecordSetString(hActionRec, 2, TEXT("Installing Driver4"));
            token = strtok (NULL, ",");
        }
        else if (strcmp(token, "Driver5") ==0)
        {
            MsiRecordSetString(hActionRec, 2, TEXT("Installing Driver5"));
            token = strtok (NULL, ",");
        }
        else if (strcmp(token, "Driver6") ==0)
        {
            MsiRecordSetString(hActionRec, 2, TEXT("Installing Driver6"));
            token = strtok (NULL, ",");
        }
        else if (strcmp(token, "Driver7") ==0)
        {
            MsiRecordSetString(hActionRec, 2, TEXT("Installing Driver7"));
            token = strtok (NULL, ",");
        }   
        else
        {
            MsiRecordSetString(hActionRec, 2, TEXT(""));
            token = strtok (NULL, ",");
        }

        MsiRecordSetString(hActionRec, 3, TEXT("Incrementing tick [1] of [2]"));

        UINT iResult = MsiProcessMessage(hInstall, INSTALLMESSAGE_ACTIONSTART, hActionRec);
        if ((iResult == IDCANCEL))
            return ERROR_INSTALL_USEREXIT;

        MsiRecordSetInteger(hProgressRec, 1, 1);
        MsiRecordSetInteger(hProgressRec, 2, 1);
        MsiRecordSetInteger(hProgressRec, 3, 0);
        iResult = MsiProcessMessage(hInstall, INSTALLMESSAGE_PROGRESS, hProgressRec);
        if ((iResult == IDCANCEL))
            return ERROR_INSTALL_USEREXIT;

        MsiRecordSetInteger(hProgressRec, 1, 2);
        MsiRecordSetInteger(hProgressRec, 2, iTickIncrement);
        MsiRecordSetInteger(hProgressRec, 3, 0);

        MsiRecordSetInteger(hActionRec, 2, iTotalTicks);

        for( int i = 0; i < iTotalTicks; i+=iTickIncrement)
        {
            MsiRecordSetInteger(hActionRec, 1, i);

            iResult = MsiProcessMessage(hInstall, INSTALLMESSAGE_ACTIONDATA, hActionRec);
            if ((iResult == IDCANCEL))
                return ERROR_INSTALL_USEREXIT;

            iResult = MsiProcessMessage(hInstall, INSTALLMESSAGE_PROGRESS, hProgressRec);
            if ((iResult == IDCANCEL))
                return ERROR_INSTALL_USEREXIT;

            Sleep(1000);            
        }
    }

    LExit:
    er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
    return WcaFinalize(er);
} 
```

# css - CSS 分层背景效果

> ID：13858275
> 
> 赞同：0
> 
> 时间：2012-12-13T10:52:19.833
> 
> 标签：css, z-index, background-image

我想不出更好的方法来问这个问题，所以我就直接问了。有人知道如何在[http://petenelson.co.uk](http://petenelson.co.uk)上实现分层背景效果吗？是否有插件可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:00:54.653

这被称为**视差效应** ，所以只需 google 一下 jQuery Parallax 插件，你就会知道它们。

经验法则是，在页面滚动事件期间，您有不同的 z-index 元素以不同的速度移动。

如果您查看此演示页面[http://www.ianlunn.co.uk/plugins/jquery-parallax/](http://www.ianlunn.co.uk/plugins/jquery-parallax/)，您将在代码中看到它包括：

`<script src="scripts/jquery.parallax-1.1.3.js"></script>`

和

```
$(文档).ready(函数(){
    $('#nav').localScroll(800);

    //.parallax(xPosition, speedFactor, outerHeight) 选项：
    //xPosition - 元素的水平位置
    //惯性 - 相对于垂直滚动的移动速度。例子：0.1是滚动速度的十分之一，2是滚动速度的两倍
    //outerHeight (true/false) - jQuery 是否应该使用它的 outerHeight 选项来确定一个部分何时在视口中
    $('#intro').parallax("50%", 0.1);
    $('#second').parallax("50%", 0.1);
    $('.bg').parallax("50%", 0.4);
    $('#third').parallax("50%", 0.3);

})

```

以下是一些有用的链接：

*   [http://medleyweb.com/web-dev/15-useful-jquery-parallax-plugins-and-tutorials/](http://medleyweb.com/web-dev/15-useful-jquery-parallax-plugins-and-tutorials/)
*   [http://www.tripwiremagazine.com/2012/07/parallax-scrolling.html](http://www.tripwiremagazine.com/2012/07/parallax-scrolling.html)

* * *

**更新：**

视差效果不仅可以用于滚动。其实这取决于你的想象力和创造力。例如，如果您将鼠标移到此视差插件演示[http://stephband.info/jparallax/#parallax](http://stephband.info/jparallax/#parallax)上的图像上，您将看到分层图像以不同的速度移动。

# git - 如何使用 git 找到在一个分支中但不在另一个分支中的所有提交？

> ID：13858276
> 
> 赞同：27
> 
> 时间：2012-12-13T10:52:25.667
> 
> 标签：git

我有两个分支，*master*和*live*。*Master*是开发分支，包含尚未准备好进入*live*的提交。

*   如果在需要进入 *live分支的**master*分支中进行了更改，那么它们将从*master*中挑选出来*live*。
****   有时对*实时*分支进行提交，然后将它们挑选到*master*或合并到*master*。***

 **我想要做的是查看所有在*master*中而不是在*live*中的提交，我在这里和谷歌上进行了很好的搜索，我正在使用这个：

```
git log --cherry-pick --no-merges --oneline master...live 
```

这一直有效，直到我将*live*合并到*master*。但现在它列出了两者中的几个提交。

那么查看*主*分支中而不是*实时*分支中的所有提交的正确命令是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-19T17:44:39.350

你很亲密。正确的命令是：

```
git log --cherry-pick --oneline --no-merges --left-only master...live 
```

从日志手册页：

> `--left-only, --right-only`
> 
> List 仅在对称范围的相应侧提交，即仅那些将被标记为 < resp 的提交。> 通过--left-right。
> 
> 例如， --cherry-pick --right-only A...B 会忽略那些来自 B 的提交，这些提交在 A 中或与 A 中的提交等效。换句话说，这列出了来自 git cherry 的 + 提交A B. 更准确地说， --cherry-pick --right-only --no-merges 给出了确切的列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T10:53:50.740

`git log master ^live --no-merges`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:08:40.713

我最终使用结合 git patch-id 和 git log 的简短 python 脚本解决了我自己的问题，该脚本可以在这里找到[https://gist.github.com/4565584](https://gist.github.com/4565584)**

# phpexcel - 创建图表时出错 [phpexcel]

> ID：13858277
> 
> 赞同：2
> 
> 时间：2012-12-13T10:52:29.333
> 
> 标签：phpexcel

我正在使用 PHPExcel 并在创建图表时遇到以下错误：

致命错误：在第 3241 行的 /opt/lampp/htdocs/scgcc/Classes/PHPExcel/Calculation.php 中的非对象上调用成员函数 cellExists()

这个错误发生在 $objWorksheet->addChart($chart);

图表变量返回如下：

PHPExcel_Chart 对象 ( [_name:PHPExcel_Chart:private] => chart1 [_worksheet:PHPExcel_Chart:private] => [_title:PHPExcel_Chart:private] => PHPExcel_Chart_Title 对象 ( [_caption:PHPExcel_Chart_Title:private] => 测试堆叠折线图 [_layout: PHPExcel_Chart_Title:private] => )

```
[_legend:PHPExcel_Chart:private] => PHPExcel_Chart_Legend Object
    (
        [_position:PHPExcel_Chart_Legend:private] => tr
        [_overlay:PHPExcel_Chart_Legend:private] => 
        [_layout:PHPExcel_Chart_Legend:private] => 
    )

[_xAxisLabel:PHPExcel_Chart:private] => 
[_yAxisLabel:PHPExcel_Chart:private] => PHPExcel_Chart_Title Object
    (
        [_caption:PHPExcel_Chart_Title:private] => Value ($k)
        [_layout:PHPExcel_Chart_Title:private] => 
    )

[_plotArea:PHPExcel_Chart:private] => PHPExcel_Chart_PlotArea Object
    (
        [_layout:PHPExcel_Chart_PlotArea:private] => 
        [_plotSeries:PHPExcel_Chart_PlotArea:private] => Array
            (
                [0] => PHPExcel_Chart_DataSeries Object
                    (
                        [_plotType:PHPExcel_Chart_DataSeries:private] => lineChart
                        [_plotGrouping:PHPExcel_Chart_DataSeries:private] => stacked
                        [_plotDirection:PHPExcel_Chart_DataSeries:private] => 
                        [_plotStyle:PHPExcel_Chart_DataSeries:private] => 
                        [_plotOrder:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => 0
                                [1] => 1
                                [2] => 2
                                [3] => 3
                            )

                        [_plotLabel:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$B$1
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 1
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [1] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$C$1
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 1
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [2] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$D$1
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 1
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [3] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$E$1
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 1
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                            )

                        [_plotCategory:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$A$2:$A$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                            )

                        [_smoothLine:PHPExcel_Chart_DataSeries:private] => 
                        [_plotValues:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => Number
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$B$2:$B$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [1] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => Number
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$C$2:$C$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [2] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => Number
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$D$2:$D$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [3] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => Number
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$E$2:$E$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                            )

                    )

            )

    )

[_plotVisibleOnly:PHPExcel_Chart:private] => 1
[_displayBlanksAs:PHPExcel_Chart:private] => 0
[_topLeftCellRef:PHPExcel_Chart:private] => A13
[_topLeftXOffset:PHPExcel_Chart:private] => 0
[_topLeftYOffset:PHPExcel_Chart:private] => 0
[_bottomRightCellRef:PHPExcel_Chart:private] => H30
[_bottomRightXOffset:PHPExcel_Chart:private] => 10
[_bottomRightYOffset:PHPExcel_Chart:private] => 10 
```

)

请回复我，非常紧急。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:25:51.263

我的代码在下面，您可以在下面看到我正在使用键数组，因为我正在从数据库生成数组值。

我正在展示代码的简化形式，实际上实际代码有太多未知的东西 4 u。我在工作簿中生成 5 张工作表。

$objWorksheet = $objPHPExcel->getActiveSheet();

$objWorksheet->fromArray( 数组 (

```
[0] => Array
    (
        [0] => 
        [1] => 12/2011
        [2] => 01/2012
        [3] => 02/2012
    )

[1] => Array
    (
        [0] => QATAR
        [1] => 102.77
        [2] => 100
        [3] => 102.13
    )

[2] => Array
    (
        [0] => SAUDI ARABIA
        [1] => 102.74
        [2] => 100
        [3] => 98.22
    )

[3] => Array
    (
        [0] => KUWAIT
        [1] => 94.82
        [2] => 100
        [3] => 102.28
    )

[4] => Array
    (
        [0] => U.A.E.
        [1] => 101.22
        [2] => 100
        [3] => 99.94
    )

[5] => Array
    (
        [0] => OMAN
        [1] => 101.73
        [2] => 100
        [3] => 100.42
    ) 
```

));

$dataseriesLabels = (

```
[0] => new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$B$1,null, 1)
[1] => new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$C$1,null, 1)
[2] => new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$D$1,null, 1) 
```

);

$xAxisTickValues = (

[0] => new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$A$2:$A$6',null,5) );

$dataSeriesValues = 数组 (

```
[0] => new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$B$2:$B$6',null,5)
[1] => new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$C$2:$C$6,null,5)
[2] => new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$D$2:$D$6,null,5) 
```

);

$series = new PHPExcel_Chart_DataSeries(

```
PHPExcel_Chart_DataSeries::TYPE_LINECHART,      
PHPExcel_Chart_DataSeries::GROUPING_STACKED,    
range(0, count($dataSeriesValues)-1),           
$dataseriesLabels,                              
$xAxisTickValues,                               
$dataSeriesValues 
```

);

$plotarea = new PHPExcel_Chart_PlotArea(null, array($series));

$legend = new PHPExcel_Chart_Legend(PHPExcel_Chart_Legend::POSITION_TOPRIGHT, null, false);

$title = new PHPExcel_Chart_Title('测试堆积折线图'); $yAxisLabel = new PHPExcel_Chart_Title('Value ($k)');

$chart = new PHPExcel_Chart( 'chart1', // name $title, // 标题 $legend, // 图例 $plotarea, // plotArea true, // plotVisibleOnly 0, // displayBlanksAs null, // xAxisLabel $yAxisLabel // y轴标签）；

$chart->setTopLeftPosition('A7'); $chart->setBottomRightPosition('H20');

$objWorksheet->addChart($chart);

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007'); $objWriter->setIncludeCharts(TRUE);

请告诉我我错过了什么.....

# ruby-on-rails-3 - 如何始终包含预先加载的模型

> ID：13858279
> 
> 赞同：4
> 
> 时间：2012-12-13T10:52:34.877
> 
> 标签：ruby-on-rails-3, activerecord, eager-loading

我使用子弹 gem 让我知道 N+1 个查询。

我想避免偶尔添加包含。

我有一个`comment`属于模型的`user`模型

有没有办法告诉模型随时访问评论模型以包括用户？（而不是`Comment.include(:user)`每次都做）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T12:14:32.713

您可以使用`default_scope`：

```
class Comment < ActiveRecord::Base
  default_scope includes(:user)
end

Comment.first # => the same as Comment.includes(:user).first 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-26T05:20:21.577

你应该做

```
class Comment < ActiveRecord::Base
  default_scope { includes(:user) }
end 
```

# objective-c - 有没有办法在目标 C 上动态声明类？

> ID：13858281
> 
> 赞同：2
> 
> 时间：2012-12-13T10:52:43.623
> 
> 标签：objective-c, ios

我只是考虑这种情况，我想声明一个从其他类动态扩展的类 C。假设我有 A 类和 B 类。现在，我希望 C 类基于指定条件扩展 A 或 B，例如：

```
#ifdef USE_CLASS_A
class C: A
#else 
Class C: B
#endif 
```

我对 Objective C 和 ios 没有更多的经验。所以请告诉我我是否可以做到这一点。

非常感谢:)

更新：我只需要在编译时动态，而不是运行时。我的意思是，在编译期间，类 C 将扩展 A 或 B。这种扩展将永远存在，不要在运行时更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:20:16.213

根据您的更新，答案是肯定的 - 使用`#if`/`#ifdef`您可以在编译时确定 C 类是否完全按照您建议的方式扩展 A 类或 B 类。

当然，A 类和 B 类更好地提供相同的一组常用方法，并且您的代码只调用这些方法，否则您将需要在使用 C 类时进一步的条件代码（编译或运行时）。

# wpf - WPF 嵌套样式

> ID：13858288
> 
> 赞同：6
> 
> 时间：2012-12-13T10:53:04.717
> 
> 标签：wpf, styles, wpf-controls, styling

我的应用程序中有文本块和组合框，我希望文本块前景为白色，组合框前景为黑色。

我尝试的是：

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

<Style TargetType="{x:Type TextBlock}">
    <Setter Property="Foreground" Value="White" />
</Style>
<Style TargetType="{x:Type ComboBox}">
    <Setter Property="Foreground" Value="Red" />
</Style>
</ResourceDictionary>

<Grid Background="Black">
    <TextBlock Height="23" HorizontalAlignment="Left" Margin="27,30,0,0" Name="textBlock1" Text="TextBlock" VerticalAlignment="Top" />
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="12,99,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" />
</Grid> 
```

但是combobox Foreground仍然是白色的如何覆盖combobox中的TextBlock Foreground？（在 CSS 中这很容易，但在 WPF 中不知道）

如果我删除 TextBlock 的样式，其他一切都会改变，但是当我把样式放回去时，每个前景都是白色的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T10:57:39.623

要嵌套样式，您可以将它们包含在 parent 的资源中。您还可以更改 Combobox 样式的 TextBlock.Foreground 属性

```
<Style TargetType="{x:Type ComboBox}">
    <Style.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="Black" />
        </Style>
    </Style.Resources>
    <Setter Property="Foreground" Value="Black" />
    <Setter Property="textBlock.Foreground" Value="Black" />
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:15:41.927

尝试设置 ComboBoxItem 的样式

```
<Style TargetType="{x:Type TextBlock}">
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="Background" Value="Black"/>
</Style>
<Style TargetType="{x:Type ComboBoxItem}">
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="Background" Value="Black"/>
</Style>
<Style TargetType="{x:Type ComboBox}">
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="Background" Value="Black"/>
</Style> 
```

# ios - iOS：在 didFinishLoad 之后调整 UIWebView 的大小（内容应该适合而不滚动）

> ID：13858290
> 
> 赞同：6
> 
> 时间：2012-12-13T10:53:10.610
> 
> 标签：ios, xcode, uiwebview, height

我绝对无法调整我的`UIWebView`.

My`UIWebView`在 .h 中声明并在 IB 中连接。IB 中的高度为 110。但我的文本高度约为 1500。现在我想更改高度，以便全文无需滚动即可阅读。

什么代码可以调整我`UIWebView`的大小`webViewDidFinishLoad`？找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T20:43:28.810

该`UIScrollView`属性可用于`UIWebView`从 iOS 5 开始。您可以通过`webViewDidFinishLoad:`在委托中实现消息来使用它来调整视图大小，如下所示：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView {
    CGRect newBounds = webView.bounds;
    newBounds.size.height = webView.scrollView.contentSize.height;
    webView.bounds = newBounds;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T11:08:57.280

您是否尝试过：[这个答案](https://stackoverflow.com/questions/3936041/how-to-determine-the-content-size-of-a-uiwebview/3937599#3937599)？

[编辑]

有人说这是有效的：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

// Change the height dynamically of the UIWebView to match the html content
CGRect webViewFrame = webView.frame;
webViewFrame.size.height = 1;
webView.frame = webViewFrame;
CGSize fittingSize = [webView sizeThatFits:CGSizeZero];
webViewFrame.size = fittingSize;
// webViewFrame.size.width = 276; Making sure that the webView doesn't get wider than 276 px
webView.frame = webViewFrame;

float webViewHeight = webView.frame.size.height;
} 
```

这未经我的测试，但有 70 人对此答案投了 ^ 票，并建议将其设置`sizeTahtFits:CGSizeZero`为重置 frame.size

有些人使用 JavaScript 来解决这个问题：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
NSString *string = [_webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"body\").offsetHeight;"];
CGFloat height = [string floatValue] + 8;
CGRect frame = [_webView frame];
frame.size.height = height;
[_webView setFrame:frame];

if ([[self delegate] respondsToSelector:@selector(webViewController:webViewDidResize:)])
{
    [[self delegate] webViewController:self webViewDidResize:frame.size];
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-24T11:15:19.903

正如上面 john 和 eric 所回答的，这段代码有效。

```
-(void)webViewDidFinishLoad:(UIWebView *)webView {
    CGRect newBounds = webView.bounds;
    newBounds.size.height = webView.scrollView.contentSize.height;
    webView.bounds = newBounds;
} 
```

但是，在尝试使用此代码时，我发现它返回给我一个正确的 webview 但不正确的来源，如果任何人都是这种情况，只需使用此代码重置

```
webView.frame=CGRectMake(webView.frame.origin.x, webView.center.y, webView.frame.size.width, webView.frame.size.height); 
```

y 轴已设置，您可以根据需要获得 webView。

# extjs - Ext js组件查询

> ID：13858292
> 
> 赞同：1
> 
> 时间：2012-12-13T10:53:15.960
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我正在用 extjs4 + yii 框架开发网站。我使用边框布局作为视口。在里面我使用的是手风琴布局并显示主页。**在主页中有一个登录窗口，我想在登录完成后隐藏它**。我怎样才能删除这个窗口。这是我的代码：-

```
1)Viewport.js:-
Ext.define('AM.view.Viewport', {
    extend: 'Ext.container.Viewport',
    layout: 'border',
    id:'vp',
    border: 5,
    style: {
        borderColor: 'red',
        borderStyle: 'solid'
    },
    requires: [
               'AM.view.header.Header',
               'AM.view.login.Login',
               'AM.view.wordOfDay.WordOfDay',
               'AM.view.weather.Weather',
               'AM.view.poll.Poll',
               'AM.view.qod.QOD',
               'AM.view.history.History',
               'AM.view.qod.LastQuestion'
              ],

    items: [
    {
        region:'north',
        xtype: 'headerHeader',
        margins:5,
        height:70,
        //html:'<h1>Welcome</h1>',
    },
    {
    /*  title:'West',
        region:'west',
        margins:'0 5 0 5',
        flex:.3,
        collapsible:true,
        split:true,
        titleCollapse:true,
    */  

    //  title:'Main menu',

        region:'west',
        margins:'0 5 5 5',
        flex:.3,
        //collapsible:true,
        //titleCollapse:true,
        layout:'accordion',
        layoutConfig:
        {
                animate:false,
                multi:true
        },
        items:[
        {
            title:'wordOfDay',
            xtype:'wod' 
        },
        {
            title:'weather Information',
            xtype:'weather' 
        },
        {
            title:'poll of the day',
            xtype:'poll'
        },
        {
            title:'questionOfDay',
            xtype:'questionOfDay'
        }
        ]//end if items

    },
    {
        //title:'center',
        region:'center',
        html:'center region'
    },
    {
    /*  //title:'East',
        xtype:'loginLogin',
        region:'east',
        margins:'0 5 0 5',
        width:200,
        //collapsible:true,
        //collapsed:true,
    */
        region:'east',
        margins:'0 5 0 5',
        flex:.3,
        //collapsible:true,
        //titleCollapse:true,
        layout:'accordion',
        layoutConfig:
        {
                animate:false,
                multi:true
        },
        items:[
        {
            title:'Login Window',
            xtype:'loginLogin'
        },       
        {
            title:'QuestionOfDay',
            xtype:'questionOfDay'
        },
        {
            title:'Last Question And its answer',
            xtype:'lastQusetion'
        },
        {
            title:'This Day In a History',
            xtype:'history'
        }
        ]//end if items
    },
    {
        //title:'South',
        region:'south',
        margins:'0 5 5 5',
        flex:.1,
        html:'<h6 align="center">Footer</h6>',
        split:false
    },//mainMenu   // used mainMenu when you are using mainMenu variable
    ]//end if items
});//End of view port

2)Login.js :-- this is the login view page
Ext.define('AM.view.login.Login',
{
        extend:'Ext.form.Panel',
        id:'lg',
        alias:'widget.loginLogin',
        bodyStyle:'padding:5px 5px 0',
        title:'Login Window',
        hidden:false,
        height: 150,
        //items:
        //[
         //{
             //xtype:'form',
             border:3,
             items:[
                    {
                        xtype:'textfield',
                        fieldLabel:'Key In',
                        name:'uname',
                        //width:'10px',
                        anchor:'100%',
                        //flex:2,
                        //labelAlign:'top',               
                        //  cls:'field-margin',
                        allowBlank:false,
                        //minLength:6,
                        //draggable:true,
                    },
                    {
                        xtype:'textfield',
                        fieldLabel:'Key',
                        //width:'20px',
                        flex:6,
                        //labelAlign:'top',
                        name:'pass',
                        inputType:'password',
                        allowBlank:false,
                        minLength:6,
                        anchor:'100%',

                    },
                    {
                        xtype:'button',
                        formBind: true,
                        fieldLabel:'Keylogin',
                        action:'loginAction',
                        text:'login',
                        //width:'20px',
                        flex:6,
                        //labelAlign:'top',

                        anchor:'100%',

                    }
                    ],  
         //}],//end of items
});//End 
```

3）这是控制器文件中的一些代码

```
authenticateUser:function(button)
{   
    console.log('enter');
    var obj = Ext.ComponentQuery.query('#vp');

    obj[0].remove('lg');
} 
```

代码正在执行，但没有隐藏登录窗口。请给我建议..提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:00:48.993

`Ext.ComponentQuery.query()`方法总是返回一个对象数组，因此将您的代码更改`var obj = Ext.ComponentQuery.query('#vp');`为`var obj = Ext.ComponentQuery.query('#vp')[0];`将为您提供数组中的第一个元素。您需要检查第一个元素是否为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T05:19:15.660

首先，您的窗口不是窗口而是面板，对吗？正确的。其次，remove 方法的使用是让容器删除其子项。例如：MyPanel.remove(subPanel); - 这将删除子面板 [http://docs.sencha.com/ext-js/4-1/source/AbstractContainer.html#Ext-container-AbstractContainer-method-remove](http://docs.sencha.com/ext-js/4-1/source/AbstractContainer.html#Ext-container-AbstractContainer-method-remove)

第三， ComponentQuery.query(selector) 返回一个对象数组，即使只找到一个。如何使用它以及针对不同的选择器类型阅读文档： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)

# amazon-web-services - 对 ec2 实例的 shell 访问

> ID：13858295
> 
> 赞同：0
> 
> 时间：2012-12-13T10:53:24.853
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudformation

我使用云形成服务在几分钟内创建了一个 durpal 站点，并且可以看到 ec2 实例。但是我无法登录到实例，因为我不知道使用了哪个密钥对。

我需要使用“mysqldump”实用程序备份 mysql 数据库，并且我需要 shell 访问实例。如何通过云形成连接到安装drupal的ec2实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:13:22.207

但是，默认情况下，aws 不会授予您对 ec2 实例的 shell 访问权限。您需要基于模板创建 drupal 站点才能获得 root 访问权限。

[http://aws.amazon.com/cloudformation/aws-cloudformation-templates/](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/)

使用上面写着：“具有本地 MySQL 数据库的单个 EC2 实例”的模板您将能够指定允许您使用 putty 进行连接的密钥对。

# html - Flex 容器下拉导航，展开时推送内容

> ID：13858301
> 
> 赞同：1
> 
> 时间：2012-12-13T10:53:38.910
> 
> 标签：html, css, flexbox

我在下面创建了一个小提琴。第一个下拉菜单使用的是[灵活框布局](http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/)。我试图替换下面由浮动组成的第二个菜单。

Afaik 浮动内容使其脱离了通常的“流程”，这就是为什么我的浮动示例看起来更好的原因。我的目标是使用[灵活的盒子布局](http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/)来完成类似于浮动导航的事情。我不希望在悬停菜单时下推内容。我希望它像浮动示例一样重叠。我想底线是，我不希望 Flex 容器扩展到包含悬停菜单的整个高度。

我怎样才能做到这一点？感谢您对此的任何意见。

[http://jsfiddle.net/hRKgV/](http://jsfiddle.net/hRKgV/)

我只添加了 webkit 语法，但小提琴似乎适用于所有主要浏览器（猜想这是由于小提琴的工作原理）。

如果它对其他人有帮助（我对此表示怀疑），几乎可以通过添加以下内容来完成：

```
#flexmenu ul{    
float:left;
width:100%;
}

#content{
clear:both;
} 
```

当然，我尝试这种新模型的原因是不必使用其他解决方法。希望这有助于了解我想要完成的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:10:26.813

我不确定我是否完全理解，但我会猜测一下。重叠内容而不推送的菜单？您想使用类而不是 ID。像这样的东西：[JSFiddle 示例](http://jsfiddle.net/hRKgV/)

```
#content, #content2 {
background-color:#AABBCC;
    clear:both;
}

.floatedmenu {
    float:left;
    margin:0;
    padding:0;
    width:100%;
    position:relative;
}

.floatedmenu ul {
    clear:left;
    margin:0;
    padding:0;
    float:right;
    position:relative;
    right:50%;
}

.floatedmenu ul li {
    text-align:center;
    float:left;
    position:relative;
    left:50%;
}

.floatedmenu ul ul {
    display:none;
    position:absolute;
    right:auto;
}

.floatedmenu ul li:hover ul{
display:block;
    z-index: 2;
    background-color: #FFF;
}

.floatedmenu ul ul li {
    left:auto;
    margin:0;
    clear:left;
    width:100%;
}

.floatedmenu ul li a {
    display:block;
    margin: 2px;
    z-index: 2;
}
​ 
```

# android - 在两个不同的构建版本项目中使用 android lib 项目

> ID：13858302
> 
> 赞同：0
> 
> 时间：2012-12-13T10:53:40.887
> 
> 标签：android, android-library, android-build

我有一个 android 项目，它现在是一个 android 库项目。我设置了两个使用库项目的项目（A 和 B）。因此，例如，当我启动项目 A 时，它会使用 lib 项目中的所有活动。问题是现在如何使库项目从项目 A 开始活动？Lats 说 LibActivity 是在 libProject 中定义的活动，例如我有：

```
**LibActivity1** starts **LibActivity2**
**LibActivity2** starts **LibActivty3** 
and now I need LibActivity3 to start **projectA_Activity** or **projectBActivity** 
depending on the build 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:06:08.327

我会用 startActivityForResult() 调用调用库活动，然后完成（）库活动，返回到您的项目活动。然后，您可以测试结果以确定接下来要进行的项目活动。

# java - 从 JAX-WS 提供者返回 SOAPFault

> ID：13858306
> 
> 赞同：1
> 
> 时间：2012-12-13T10:53:54.463
> 
> 标签：java, jakarta-ee, jax-ws, websphere-7

从实现 JAX-WS Provider 接口的 web 服务创建包含 SOAPFault 的 SOAPMessage 的首选方法是什么？

`MessageFactory.newInstance()`似乎是不必要的昂贵操作，并且没有提及线程安全。我有四种可能的解决方案，但不知道应该使用哪个：

1.  静态变量中的 MessageFactories 池
2.  重用收到的
3.  SOAPMessage 通过清除内容和可能的附件创建同步方法`MessageFactory.createMessage()`
4.  用于`MessageFactory.newInstance()`每次通话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:51:25.810

> 过早的优化是万恶之源

由于这在以后很容易更改，因此我会选择选项 4（`MessageFactory.newInstance()`每次），并且仅在我发现它有性能问题时才考虑其他选项。

这可能根本不是性能问题，您可以节省一些编码。

# bash - 如果 X 服务器正在恢复/休眠/启动上运行，请检查 bash

> ID：13858307
> 
> 赞同：1
> 
> 时间：2012-12-13T10:53:57.027
> 
> 标签：bash, xorg

我想在 X 运行后立即启动自定义脚本。现在我使用以下脚本：

```
#!/bin/bash

# Wait until X server is running, indicated by a PID of XXX. Required only on first boot, not on resume.
X=$( pidof X )

while [ ${#X} != 3 ]
do
sleep 10
X=$( pidof X )
done

echo "Running autostart in 5 seconds..."

# Wait 5 seconds on resume before running.
sleep 5

# Do the rest... 
```

这成功地等待，直到 X 在第一次启动时启动。但是，在恢复时 X 已经在运行并输出一个 PID。尽管如此，我还是想等到恢复过程完全完成。目前我只能想办法解决一段时间的睡眠问题。还有其他解决方案吗？

# jquery - 重现 gmail windows 快捷方式

> ID：13858312
> 
> 赞同：1
> 
> 时间：2012-12-13T10:54:24.733
> 
> 标签：jquery, html, keyevent, intercept

我希望在我的 HTML 应用程序中重现 gmail 快捷方式行为。如果按 ? ou shift+/（或 shift+，在 azerty 键盘上）一个隐藏的 div 会出现一个快捷方式列表。（如果你在一个输入中，关键事件没有被截获）。

我搜索以使用 jquery 正确拦截 keydown 以显示 div。就我而言，keydown 在我的页面的所有组件上都被拦截。

如何禁用其他 HTML 组件上的 keyevent？我试过了，`e.stopPropagation();`但这没有效果。

**编辑：** 我找到了这段代码，但在 IE7 上没有功能

```
 $("input, textarea").keydown(function (e) {
            e.stopPropagation();
        });

        function close_help(){
             $("#help:even").addClass("aou");
        }

        function doKeyDown(e) {
            if (e.keyCode == 188) {
                $("#help:even").removeClass("aou");
            }

        }

        var input_ = document.getElementsByTagName("input").elements;

        if ($.browser.msie && $.browser.version < 9) {
            window.attachEvent("keydown", doKeyDown, true);
        }
        else {
            window.addEventListener("keydown", doKeyDown, false);
        }
        input_.removeEventListener("keydown"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:58:21.197

你必须检查

> e.target.type

查看您是否在输入或页面的其他部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:00:53.970

要停止事件的传播，您需要检查三个功能

1.  [防止默认（）](http://api.jquery.com/event.preventDefault/)
2.  [停止传播（）](http://api.jquery.com/event.stopPropagation/)
3.  [停止立即传播（）](http://api.jquery.com/event.stopImmediatePropagation/)

当您在与要处理的事件相同的 DOM 级别上有多个事件时，需要最后一个。

# android - 基于 Web 的 OpenID 登录和移动应用程序登录

> ID：13858314
> 
> 赞同：3
> 
> 时间：2012-12-13T10:54:30.850
> 
> 标签：android, ios, openid

我已经建立了一个使用 DotNetOpenAuth 执行 OAuth / OpenID 职责的站点，并且该站点还使用定制的 ASP.NET 成员身份实现提供本地登录。该站点通过直接访问安全数据库来管理用户帐户和用户配置文件。

但是，通常在数据访问层中的所有内容都是作为受 DotNetOpenAuth 保护的 WebAPI 实现的。最重要的是，我们将提供适用于 android 和 iOS 的移动应用程序，让用户可以使用 API 和由任何关心的第三方开发的自定义 UI。

我不确定的是，如果用户使用诸​​如 Facebook 之类的 OpenID 提供商创建帐户，移动应用程序如何让用户登录？

我注意到 LinkedIn 确实允许用户使用他们的 Facebook 帐户 (https://www.linkedin.com/reg/join) 登录，所以当 LinkedIn 移动应用程序只提供用户名/密码组合时，它将如何处理这种情况在登录屏幕上？

如果您单击移动应用程序上的 LinkedIn 注册链接，它不会提供使用 Facebook 登录选项。只有在浏览器中才允许使用 Facebook 选项登录。

有没有人知道这一切是如何在后台挂在一起的？最初使用 Facebook 登录的用户如何使用移动应用访问同一个帐户？

在我看来，到目前为止我看过的主要参与者（FB、LinkedIn）他们的移动应用程序只能使用他们系统上的本地帐户。Facebook 只有本地帐户，所以在这种情况下这不是问题。

我对此感到很困惑，glib 的答案似乎是移动应用程序仅适用于您调用的服务器能够直接验证和授权用户的本地帐户，而不是通过第三方，因为这需要访问浏览器 cookie有关他们用于创建帐户的服务的信息。

对此的任何见解将不胜感激，因为除非用户拥有本地帐户，否则我看不到使其工作的方法。

谢谢，

# html - 显示 2 个边框，文本居中

> ID：13858315
> 
> 赞同：0
> 
> 时间：2012-12-13T10:54:35.157
> 
> 标签：html, css

[小提琴链接](http://jsfiddle.net/harmeet_jaipur/fVrbK/1/)

我需要在 h1 标签后面显示边框，而不是在文本本身后面。还。在中心显示文本。目前，您可以看到“为什么是我们”文本不在中心。或任何其他解决方法来做需要的事情。

```
<div  class="lineb"><h1 class="hbord">What <span>we</span> can do</h1><div class="cls"></div></div> 
```

目前 .lineb 具有灰色边框底部和 .hbord 具有白色边框底部，目前符合我的目的，但不完全是因为“为什么我们”没有居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:59:51.833

试试这个

**HTML**

```
<h1 class="one"><span>Heading Number One</span></h1>
<h1 class="one"><span>Heading Number One</span></h1>​ 
```

**CSS**

```
 h1 {
    position: relative;
    margin-top: 20px; text-align: center; 
    font-size:25px
  }

  h1.one { margin-top: 0; }

  h1.one:before {
    content: "";
    display: block;
    border-top: solid 1px black;
    width: 100%;
    height: 1px;
    position: absolute;
    top: 50%;
    z-index: 1;
  }  
  h1.one span {
    background: #fff;
    padding: 0 20px;
    position: relative;
    z-index: 5;
  }​ 
```

**[演示](http://jsfiddle.net/HXtee/2/)**

# c - 在 Visual 项目中包含一个文件以便使用它

> ID：13858319
> 
> 赞同：-1
> 
> 时间：2012-12-13T10:54:55.600
> 
> 标签：c, visual-studio-2010, file, import, include

我想在可视化项目中包含一个文件名“7zip.exe”，以便在我的代码中使用它。

我的代码：我扫描一个文件夹，每个文件使用“7zip.exe”来提取数据。我不使用（zlib 和 libzip 在 Windows 上太痛苦了）。

我想我找到了一种丑陋的方法，将“7zip.exe”的六进制转储放入标题（tmp.h）中，然后用转储写入文件。

如果您添加一个更好的主意，...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:20:26.940

您可以在资源中嵌入 EXE，提取并执行它。请记住，EXE 可能具有依赖的 DLL。

[在 C# 程序中嵌入外部可执行文件](https://stackoverflow.com/questions/798655/embedding-an-external-executable-inside-a-c-sharp-program)

但是，我建议您改为查看[7Zip DLL](http://www.7-zip.org/sdk.html)（也可从 7-zip.org 获得）。

# flash - Actionscript 2.0：我可以在哪里放置一个类实例，以便我可以从其他类访问它？

> ID：13858321
> 
> 赞同：0
> 
> 时间：2012-12-13T10:54:58.267
> 
> 标签：flash, actionscript-2

我目前有三个类，Main、Externals 和 Page。

Main 类创建 Externals 类的实例，该实例加载 XML，并且一旦加载 XML，Externals 实例还创建 Page 类的实例，然后将使用 Externals 类中的信息来填充自身。

本来想让Externals是一个静态类，后来发现Actionscript 2.0没有静态类，只有静态方法。

然后我将我所有的 Externals 方法声明为静态，但发现当我尝试访问它们时，构造函数没有运行，并且 XML 没有加载和解析。每次都想重写加载和解析 XML 的方法，但意识到 A：那真的很浪费网络资源；B：由于网络比处理器慢，我会遇到时间问题，因为代码会尝试访问尚未加载的数据。

因此，我决定将所有内容都还原为实例方法，并在 Main 类中创建一个实例，该实例将运行其构造函数，使用 XML 加载自身，将所有内容解析为整洁的 getter，然后才创建一个 Page 实例，该实例创建页面这将消耗 XML 数据。

但是我（现在仍然）遇到了一个难题：我只能从 Externals 类中创建 Page 类的实例，因为它只能在 XML 数据已经加载后启动，但我无法访问我从 Main 类以外的任何地方收集到我的 Externals 实例中的数据。我在我的 Page 实例中获得它的唯一方法是创建一个新实例，但这是一个非常糟糕的主意，原因有两个： 1：上述时间问题；和 2：Externals 类在完成加载 XML 时创建一个新 Page，因此它最终会创建一个新的 Page 实例，这会创建一个新的 Externals 实例，这会创建一个新的 Page 实例，依此类推。

我尝试将 Externals 的实例放在电影的根目录上，如下所示：

```
_root.externals:Externals = new Externals(); 
```

但我也无法在那里访问它。

现在我有点难过。我真的不明白如何做到这一点，但我知道必须有办法。有人看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:36:20.683

我想你可以试试单例设计模式：http: [//voices.yahoo.com/building-singleton-actionscript-2-as2-4849702.html](http://voices.yahoo.com/building-singleton-actionscript-2-as2-4849702.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:40:43.520

我猜 Externals 类是单例？您可以将一个 Externals 对象的引用传递给所有其他对象。

或者另一种方式（虽然我并不总是推荐它，但似乎你想要做的）是像正常一样在根级别创建对象，然后通过以下方式在其他对象中访问它：_root.externalsObject

# firefox - 实体无法在 Firefox 中正确显示

> ID：13858327
> 
> 赞同：1
> 
> 时间：2012-12-13T10:55:21.153
> 
> 标签：firefox, windows-7, unicode, cross-browser, entity

我不知道这个问题是否有效。我在 Windows 7 操作系统上使用 Firefox 15.0。我写了一个这样的html代码

```
<html>
<body>
 <p>&#8270;This my testing text1 </p>
 <p>*This my testing text2 </p>
 <p>*This my testing text3 </p>
</body>
</html> 
```

当我在 Firefox 15.0 和 Windows 7 上运行此代码时，**LOW ASTERISK(⁎)**工作正常。我在 Firefox 17.0 和 Windows Xp 上运行相同的代码，它不起作用。问题是什么。

在相同的 Windows 7 操作系统中，该实体未在 Chrome、IE 上显示，它仅在 Firefox 上有效。但同样的 Firefox 不能在 Windows xp 中运行。有没有我必须安装的字体或我必须做的事情。谁能帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:36:42.473

我刚刚使用 Chrome 检查了此页面，并显示了该字符。

您使用什么字体定义？所以有

```
font-family: Arial,Liberation Sans,DejaVu Sans,sans-serif; 
```

DejaVu Sans 也在[支持这个字符的字体列表中](http://www.fileformat.info/info/unicode/char/204e/fontsupport.htm)。

最有可能的是，FF 使用与 IE 和 Chrome 不同的字体回退机制。

# c - 限制并发线程的数量（使用 pthreads）

> ID：13858333
> 
> 赞同：4
> 
> 时间：2012-12-13T10:56:21.747
> 
> 标签：c, linux, pthreads, posix

我必须编写一个使用 CURL 在 Web 上发布信息的 C 应用程序。应用程序最多只能并行运行 N 个（比如说 10 个）请求。如何等待任何线程完成，而不是使用`pthread_join()`.

我阅读了有关 pthread_cond_wait 的信息，但大多数示例是控制线程（主）如何唤醒工作线程。我需要相反的——工作线程必须能够在退出之前发出信号/唤醒父线程。

**更新：**实际上我需要一种让管理器线程休眠的方法，当一个工作线程完成它的工作时，它应该唤醒管理器线程给它另一个工作。线程是否结束并为作业创建新线程或使用线程池都没有关系。仍然需要一种方法来向经理发出工作已完成的信号。

**我希望我不要得到这个建议**：

```
while(asleep){
  for(i = 0; i< threadCount; i++){
    pthread_mutex_lock(mutex);
    if(threads[i] == IDLE_STATE)
      startNewJob();
    pthread_mutex_unlock(mutex);
    usleep(100*1000);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:02:52.257

与其按需创建/销毁线程，不如在启动时创建一个由 10 个工作线程组成的池并让您的主程序为它们提供作业。

在启动时，您将创建一个包含 10 个工作人员的数组。这些可能看起来像

```
typedef struct worker
{
    pthread_t       thread;
    pthread_cond_t  cond;
    pthread_mutex_t mutex;
    struct job*     job;
    int             quit;
} worker; 
```

`job`经理将通过设置其成员然后向工作人员发出信号来依次将作业委托给每个线程。

每个工人都会循环直到`quit`非零，等待它的条件被发出信号。在每个信号之后，它会在报告结果之前读取/处理它`job`，然后再次等待它的条件。

**编辑：**您不热衷于线程池。您可以尝试给每个线程一个唯一的 id；在管理器中存储每个线程的 id 和其他属性之间的一些映射。当每个线程完成时，让它将其 id 添加到管理器拥有的列表中，然后在管理器中发出一个条件信号。每次经理醒来时，它可以从列表中拉出头部，查找适当的线程，读回其作业结果，然后加入线程。请注意，此处的管理器列表将由多个线程访问，因此读/写需要由互斥锁保护。

**Edit2：**您想了解更多有关条件的信息，但找不到您认为有用的示例。我不确定这会更好，但这是[我编写的一些代码](https://github.com/openhome/ohNet/blob/master/Os/Posix/Os.c)。这些`OsSemaphore*`函数将条件包装到一个简单的等待/信号 API 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:24:17.967

您想要一个条件变量，与您一直在查看的相同功能，但只是转过身来。您正在等待的条件是“工作线程已完成一些工作”。

主线程：

*   锁定互斥锁
*   虽然没有线程完成：pthread_cond_wait
*   解锁互斥锁
*   安排工作
*   环形

每个工作线程在完成工作时会：

*   锁定互斥锁
*   标记完成
*   pthread_cond_signal
*   解锁互斥锁
*   退出或等待工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T03:01:31.727

条件变量是你所追求的。它们可以很容易地用于从工作线程向管理器线程发出信号，反之亦然。

最后的稻草人示例实际上与使用条件变量可以执行的操作非常相似：

```
pthread_mutex_lock(&mutex);
while (!finished) {
  for(i = 0; i < threadCount; i++) {
    if(threads[i] == IDLE_STATE)
      startNewJob(i);
  }

  /* Not finished, and no idle threads, so wait */
  if (!finished)
    pthread_cond_wait(&cond, &mutex);
}
pthread_mutex_unlock(&mutex); 
```

当一个线程完成时，它会简单地做：

```
pthread_mutex_lock(&mutex);
threads[self] = IDLE_STATE;
pthread_cond_signal(&cond);
pthread_mutex_unlock(&mutex); 
```

# python - Python 中基于文本的 RPG 的 Web 控制台

> ID：13858334
> 
> 赞同：0
> 
> 时间：2012-12-13T10:56:20.920
> 
> 标签：python, web, console-application, text-based

我是这里的初学者，慢慢学习Python。我写了一个基于文本的 RPG 游戏，我正在寻找一种方法来创建它的网络版本。但是，我不想遵循在游戏中发生某些事情时生成 HTML 的方法（即玩家去不同的房间等）。从美学上讲，我想要一个带有嵌入式控制台的网页，它只运行我的文本 RPG 代码，并在此控制台下方有一个输入字段以允许用户输入。我应该为此使用哪个 Web 框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:47:11.757

if I understand you right you want to send the player's commands to the server asynchronously. I would suggest Pyramid because of a number of reasons:

1.  It is simple to use
2.  it is VERY well tested
3.  It is associated with a massive community of helpful people
4.  it is malleable - it does not make assumptions about what you want to do and so doesn't place restrictions on you in terms of, well, anything. You can pick your templating engine (or use more than one if you want), you can choose your database, you can choose how to talk to your database, etc

check this out:

[http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/introduction.html](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/introduction.html)

# iphone - iPhone 设备字体

> ID：13858336
> 
> 赞同：1
> 
> 时间：2012-12-13T10:56:27.207
> 
> 标签：iphone, ios, air, fonts

由于语言字符不同，我们的嵌入式 Telex 字体存在问题。从我读过的内容来看，有一种适用于 iPhone 的**Helvetica 设备字体**应该可以处理更多/大多数字符。

这就是我所做的，但没有显示任何文字。

```
private var defaultFormat:TextFormat;
defaultFormat = new TextFormat();
defaultFormat.font = "Helvetica";

var textField:TextField = new TextField();
textField.height = 40;
textField.defaultTextFormat = defaultFormat; 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:29:25.397

Adobe AIR 使用自己的 Flash 运行时并提供自己的文本渲染。因此，它可能与本机渲染的某些方面不兼容，例如表情符号。

iOS 中带有 Retina 设备的屏幕的默认字体是 Helvetica Neue，它应该以“Helvetica Neue”或“HelveticaNeue”的形式提供，尽管我不熟悉 Flash Actionscript API 如何进行字体命名。Cocoa 知道在某些情况下将“Helvetica”别名为“Helvetica Neue”，因此实际的 Helvetica 字体可能不可用，从而导致您的文本丢失。

iOS 和 OS X 字体渲染通常会回退到其他字体以成功渲染当前字体中不可用的字符和字形。Flash 可能不这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:06:24.173

事实证明，上面的代码没有任何问题。我的问题是我正在设置

```
textField.embedFonts = true 
```

稍后在**错误**的代码中。

请注意，默认值为 false。所以，在我删除那行之后，我的文字就出现了。

# system-verilog - 错误 (10170)：alarm_clock.v(133) 附近文本“和”处的 Verilog HDL 语法错误；期待“）”

> ID：13858343
> 
> 赞同：2
> 
> 时间：2012-12-13T10:56:58.830
> 
> 标签：system-verilog

我不断收到这个错误，我尝试了各种方法来修复它，但它对我没有帮助。

我希望有人能在这方面帮助我。

有问题的代码片段如下：

```
if((HR == AHR) and (MIN == AMIN)) To be exact.

always @ (posedge CLK)
begin
case(state)
NORMAL: begin
        DHR <= HR;
        DMIN <= MIN;
        if(ALON)
            begin
            AENABLED <= 1;

            if((HR == AHR) and (MIN == AMIN))
                begin
                ALARM <= 1;
                if(SNOOZE) // we assume that SNOOZE is to be operated only when the Alarm is ON!
                    begin
                    AMIN <= AMIN + 2;
                    if(AMIN == 60)
                        begin
                        AMIN <= 0;
                        AHR <= AHR + 1;
                            if(AHR == 24)
                                AHR <= 0;
                        end
                    else if(AMIN == 61) // since AMIN is incremented by 2 it can either be 60 or 61 depending on previous alarm time
                        begin
                        AMIN <= 1;
                        AHR <= AHR + 1;
                            if(AHR == 24)
                            AHR <= 0;
                        end
                    end
                end
            end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:08:25.970

`and`不是verilog！试试`&&`吧。

# bash - 使用脚本从网站中提取电子邮件地址

> ID：13858344
> 
> 赞同：6
> 
> 时间：2012-12-13T10:57:10.917
> 
> 标签：bash, email, web

给定一个网站，我想知道什么是最好的程序，以编程方式和/或使用脚本，以递归方式从该链接和下面的所有站点中以 XXXX@YYYYY.ZZZZ 形式以纯文本形式提取每个页面上存在的所有电子邮件地址或直到某个固定的深度。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T19:05:36.043

使用 shell 编程，您可以使用 2 个通过管道连接的程序来实现您的目标：

*   [wget](http://www.gnu.org/software/wget/manual/wget.html)：将获取所有页面
*   [grep](http://www.gnu.org/software/grep/manual/grep.html)：将过滤并只给你电子邮件

一个例子：

```
wget -q -r -l 5 -O - http://somesite.com/ | grep -E -o "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" 
```

**wget**在安静模式 ( **-q** ) 下，从 somesite.com.br以最大深度级别 5 ( **-l 5** )递归 ( **-r ) 获取所有页面，并将所有内容打印到标准输出 (** **-O -** )。

 ******grep**使用扩展的正则表达式 ( **-E** ) 并仅显示 ( **-o** ) 电子邮件地址。

`> somefile.txt`所有电子邮件都将打印到标准输出，您可以通过附加到命令将它们写入文件。

阅读有关[wget](http://www.gnu.org/software/wget/manual/wget.html)和[grep](http://www.gnu.org/software/grep/manual/grep.html)`man`的更多文档的页面。

此示例使用 GNU [bash](http://www.gnu.org/software/bash/)版本 4.2.37(1)-release、GNU grep 2.12 和 GNU Wget 1.13.4 进行了测试。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T11:47:00.703

首先用于[`wget`](http://www.gnu.org/software/wget/manual/wget.html)从 URL 递归下载页面。`-l`选项是recusion depth，设置如下`1`：

```
$ mkdir site
$ cd site
$ wget -q -r -l1  http://www.foobar.com 
```

然后运行递归[`grep`](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)来提取电子邮件地址。（下面的正则表达式并不完美，如果您发现并非所有地址都被提取，可能需要进行调整。）

```
$ grep -hrio "\b[a-z0-9.-]\+@[a-z0-9.-]\+\.[a-z]\{2,4\}\+\b" * 
```

顺便说一句，`wget`确实有一个选项 ( ) 可以将下载的内容打印到标准输出，而不是将其保存到磁盘，但不幸的是，它在递归 ( ) 模式下`-O -`不起作用。`-r`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:02:08.440

我会使用[wget](http://www.cs.huji.ac.il/~bioskill/MAN/wget.html)递归地获取页面，然后使用正则表达式定位地址（我会为此使用[python 脚本](http://docs.python.org/2/library/re.html)，但几乎任何环境都可以提供相同的功能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-04T17:04:38.793

第 1 点）。开发人员以 HTML 实体格式 (rish) [HTML Entity](http://www.w3schools.com/php/func_string_htmlentities.asp)添加电子邮件 ID ：

第 2 点）。电子邮件写在 href="mailto:your@example.com" 上。所以我们可以把它当作正则表达式。

```
<?php
    $str = '<div class="call-to-action ">
    <a title="Email" class="contact contact-main contact-email " 
    href="mailto:info@canberraeyelaser.com.au?subject=Enquiry%2C%20sent%20from%20yellowpages.com.au&amp;
    body=%0A%0A%0A%0A%0A------------------------------------------%0AEnquiry%20via%20yellowpages.com.au%0Ahttp%3A%2F%2Fyellowpages.com.au%2Fact%2Fphillip%2Fcanberra-eye-laser-15333167-listing.html%3Fcontext%3DbusinessTypeSearch" 
    rel="nofollow" data-email="info@canberraeyelaser.com.au">
    <span class="glyph icon-email border border-dark-blue with-text"></span><span class="contact-text">Email</span>
    <a href="mailto:&#114;&#105;&#115;&#104;&#97;&#98;&#104;&#100;&#117;&#98;&#101;&#121;&#50;&#48;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">
    </a>
    </div>';

// $str = file_get_contents(http://example.com) ; (to get emails from URL in place of file_get_contents i use to prefer CURL) .

     $str = html_entity_decode($str);

    $regex = "/mailto:([^?]*)/";
    if ($rex = preg_match_all($regex, $str,$matches_out)) {

        echo "Found a match!";
        echo "<pre>";
        var_dump($matches_out[0]);
    } else {
        echo "The regex pattern does not match. :(";
    }

    ?> 
```****

# c++ - 为非凸多边形寻找具有代表性的平均 INTERIOR 点

> ID：13858345
> 
> 赞同：7
> 
> 时间：2012-12-13T10:57:11.610
> 
> 标签：c++, algorithm, visual-c++, graphics

我正在尝试用 C++ 解决旅行推销员问题，但我必须遍历一组多边形而不是一组点之间的最短距离。为此，我试图用一个具有代表性的“平均”内部点来表示每个多边形，以便我可以对这些平均内部点进行 TSP。

我很容易在凸多边形中找到平均内部点，因为它只是算术平均点（对于凸多边形，它总是位于内部），但是这种方法不适用于凹多边形，因为它不一定在多边形内部。

这方面的帮助？谢谢。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:39:14.213

怎么样：

1.  三角多边形（阶数 N log(N)）
2.  选择面积最大的三角形（比方说）（N阶）
3.  在该三角形的重心处选择您的点。（常量）

由于整个非凸多边形的真正重心（可能）在多边形之外，我认为对于“代表性”点没有比这更有意义的另一个定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:33:26.633

一种想法是构造每个多边形的凸包，然后使用凸包的中心。要理解这个想法，就像你用橡皮筋包裹任何多边形，这会给你一个信封，你可以用它来找到兴趣点。我相信你应该能够使用[CGAL](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Convex_hull_2/Chapter_main.html#Section_15.2)来计算它。但是如果你对每个多边形都这样做，它就不会非常快。如果您构建三角剖分，那么您可以有效地找到原始多边形的最接近其凸包中心点的内部点作为附加步骤。

顺便说一句，我认为找到凸多边形点中心的正确方法是找到切比雪夫中心，这对应于求解线性系统，您也可以使用 CGAL 来解决。寻找凸多边形切比雪夫中心的线性规划问题在[Boyd 书中](http://www.stanford.edu/~boyd/cvxbook/)得到了很好的定义。

# php - 表单提交错误后如何保留文件输入值？

> ID：13858347
> 
> 赞同：5
> 
> 时间：2012-12-13T10:57:13.340
> 
> 标签：php, html, forms, file-upload, postback

我有一个似乎是相当基本的问题，并想确认如何最好地处理它。我有一个带有多个输入的表单，其中一个是文件输入。提交表单时，PHP 中会进行多项验证检查，以确认所有必要的字段都已按照应有的方式填写（如果没有，则通知用户填写其余部分并再次向他们显示表单而不提交它）。这一切都很好，但是如果用户选择了一个文件，那么由于浏览器安全设置，我不相信将所选文件保留在输入中。

因此，我可以看到保留文件输入的唯一方法是在初始提交时将其存储在服务器上（即使其他字段不完整），然后在正确提交时将其与提交相关联。或者使用 Javascript 来验证表单，以便在完成之前不会实际提交（因此不需要以编程方式设置文件输入）。

我是否在这里遗漏了某些东西，并且还有另一种处理方式，或者我说这些是唯一的两种选择是否正确？

多谢你们！

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:04:58.530

我想你已经建议了你的问题的答案。最好使用 ajax 验证表单的其他字段，并且最初不要提交文件。anbd 如果您对文件有一些问题，您可以使用 ajax 之类的文件扩展名对文件进行一些基本检查

# php - 在许多 XMLHttpRequest 调用的情况下最小化服务器负载

> ID：13858351
> 
> 赞同：0
> 
> 时间：2012-12-13T10:57:21.557
> 
> 标签：php, javascript, ajax

我正在制作一个网站，用户可以在其中喜欢一些文章。每当单击like 按钮时，我都会向服务器发送一个XMLHttpRequest 以运行一个名为like_clicked.php 的文件以及获取文章ID 和用户ID 的数据。该文件获取文章 ID 和用户 ID，并更新 sql 数据库，并在与用户相关的 xml 文件中添加一个节点。这是我第一次为大众使用做一些事情。

当太多用户调用 like_clicked.php 文件时，我担心服务器负载。请帮助我，如果这个方法是好的。

如果上述方法失败，我也在考虑另一种方法。我正在考虑制作许多 like_clicked 文件（即 like_clicked1.php、like_clicked2.php ...）以最小化单个 i 节点上的负载。有没有一种方法可以检测到调用下一个like_clicked文件更好。在这里，我们需要检测特定文件每单位时间有多少调用。我们如何处理这个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:19:21.023

复制代码可能是您可以尝试的最糟糕的事情：

*   你给自己制造了一场维护噩梦。
*   您减少了所有可能从中受益的缓存级别的影响：内存、文件系统、FastCGI、PHP 字节码缓存（如果有的话）...

即使不存在缓存的概念，您也只需让磁盘上下旋转以从不同位置读取；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:07:14.297

一旦您在一台服务器上拥有这些文件 - 就没有任何区别。据我所知，这些文件中不应该有繁重的计算。如果它看起来很慢 - 检查您是否可以改进数据库请求。一旦你有很多用户，你将需要放置一些服务器和一些负载均衡器，它们会调用不同的服务器。制作具有不同名称的文件根本没有意义。

> 当对同一个文件或函数进行多次调用时，需要时间来一一处理。

这是胡说八道，直到我们不是在谈论同一个会话（如果会话是默认的 PHP 会话）。如果会话不同（读取 - 用户不同），它将不会一一执行请求。PHP 可以轻松地处理对同一个 PHP 文件的并发请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:39:52.013

拥有多个文件来做同样的事情并不是一个解决方案，正如另一个答案中已经说明的那样，维护将是一场维护噩梦。

在编程中，首先让您的代码工作，然后在您能够看到应用程序运行的实际结果之后再考虑优化。`like_click.php`对您的页面的一条建议：**尽可能少做。**

稍后，如果您发现速度变慢了，您可能需要研究如何将您的网站集群到多个服务器中，以便将负载分散到不同的硬件和网络上。这对于任何大型网站都很常见。

# javascript - 使用 css 或 jquery 的粘滞页脚

> ID：13858352
> 
> 赞同：-1
> 
> 时间：2012-12-13T10:57:24.900
> 
> 标签：javascript, jquery, css

即使在滚动时，如何将 div 设置在浏览器屏幕的底部？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T10:59:35.703

假设您有以下 div

`<div class="footer">This is at the bottom</div>`

您可以使用以下 CSS 将其固定在视口的底部

```
.footer {
  position: fixed;
  bottom: 0;
} 
```

即使滚动它也会留在那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T11:02:09.757

使用`position: fixed`附加到该 CSS 的属性`div`。

```
#footer {
    position:fixed;
    bottom:0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:00:13.260

试试这个 CSS：

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
} 
```

CSS 来源：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:06:39.327

有一个很好的页脚教程

[http://www.lwis.net/journal/2008/02/08/pure-css-sticky-footer/](http://www.lwis.net/journal/2008/02/08/pure-css-sticky-footer/)

演示页面在这里：

[http://www.lwis.net/profile/CSS/sticky-footer.html](http://www.lwis.net/profile/CSS/sticky-footer.html)

基本前提是主体页面被拉伸到页面的100%。最小高度也为 100%。

然后为页脚提供以下规则：

```
#footer {
 clear: both;
 position: relative;
 z-index: 10;
 height: 3em;
 margin-top: -3em;
} 
```

我得到了[这个答案](https://stackoverflow.com/questions/643879/css-to-make-html-page-footer-stay-at-bottom-of-the-page-with-a-minimum-height)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T11:00:38.623

粘性页脚的实现

请看一看

[http://css-tricks.com/snippets/jquery/jquery-sticky-footer/](http://css-tricks.com/snippets/jquery/jquery-sticky-footer/)

# sql - 使用 SQL 实现 B+ 树结构

> ID：13858353
> 
> 赞同：0
> 
> 时间：2012-12-13T10:57:26.597
> 
> 标签：sql, database-design, tree, relational-database

我很清楚纯 sql 中现有的二叉搜索树实现，但我无法想象如何构建实现 B+ 树数据结构的数据库模型。甚至可能吗？

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T15:25:05.417

1.  B+Tree 和二分查找不一样。
2.  可以在表格中使用 B+Tree 结构（假设您知道它是什么）。

是否推荐 2 值得研究，但我们公司做了很多。

在表上使用 B+Tree 的示例是：

```
ColId       SomeData        ParentId
------------------------------------
  1           Data 1          null
  2           Data 2          null
  3           Data 3            1
  4           Data 4            1
  5           Data 5            3 
```

等等。这个想法是您可以通过查看父 id 找到项目 5 的父项​​。您可以制作/重用各种方便的算法来查找物品及其位置。使用具有较大增量的 ColId，例如 10 或 100 的增量，可以让您为将项目插入树中留出空间。

例如...第 5 项的父项是第 3 项。祖父项是第 1 项。任何带有 null 的都是根（起始）项...它们没有父项。

正如您可以想象的那样，搜索速度非常快，但更新或添加速度却很慢（如果您没有按照上面的建议留出空间）。如果您确实留下了空间，那么当您用完空间并且必须重写项目时，添加速度会很慢。假设您将数据传授得很好，这种情况不应该经常发生。如果是这样，那么 B+Tree 可能并不是该特定格式的理想选择。一般来说，如果对数据的大部分操作是读取/搜索/过滤等，B+Tree 结构就很好。但是如果有很多更新和添加，可能就不那么好了。

由于您的问题似乎是关于如何在 sql server 表中使用 B+Tree 格式，我将让您看看这与二进制搜索之间的区别。二进制搜索是一种用于搜索某物的算法，首先对集合进行排序，然后每次除以一半，直到找到所需的内容。B+Tree 也可用于搜索，但不同之处在于它在层次结构上运行（因此得名 Tree）。

# ember.js - 如何在控制台中为 EmberJS 类命名？

> ID：13858358
> 
> 赞同：1
> 
> 时间：2012-12-13T10:57:39.983
> 
> 标签：ember.js

我刚遇到这个错误：

> 未捕获的错误：断言失败：目标 <( **Ember.View 的子类**):ember508> 没有操作 doSubmit

我在问自己：**我怎样才能给我的 EmberJS 子类一个真正的控制台输出名称？**

**更新**

我正在使用 require.js：

```
define [
    "ember"
], (Em) ->
    Em.View.extend
        templateName: "user" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:54:47.100

看起来这个视图是一个匿名视图，如果你使用 {{view Ember.View }} 帮助器，它可能由 Ember 自己创建。

为了定义一个命名视图，你应该在js中声明它，`App.MyView = Ember.View.extend()`

如果这不能正确回答您的问题，我建议通过添加更多代码和模板来完成它。

**更新**：看到[https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/system/core_object.js#L251](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/system/core_object.js#L251)，如果您没有定义 Ember 命名空间，这信息丢失了，但也许您可以在视图中覆盖 toStringExtension 函数，返回您想要的字符串，它应该可以工作。我还没有尝试过，所以我很感兴趣:)

# rest - 从 Backbone 中的远程 API 引导数据

> ID：13858369
> 
> 赞同：1
> 
> 时间：2012-12-13T10:58:01.677
> 
> 标签：rest, backbone.js

深入研究“引导”我的 Backbone 应用程序的技术，但是我很难看到建议的方法，比如这个：[http](http://ricostacruz.com/backbone-patterns/#bootstrapping_data) ://ricostacruz.com/backbone-patterns/#bootstrapping_data ，不要只是把应用程序退后一步，将您的 API 与前端紧密耦合。

我有一个 REST API 和一个主干 JS 应用程序，是用服务器端语言进行 DB/API 调用然后将 JSON 对象直接输出到 index.php （或其他）的最佳解决方案，

除了将服务器端代码混合到我的 JS 应用程序中之外，是否有更好的解决方案来引导 Backbone 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:22:29.683

我假设通过*引导*您是指以下情况：

*   您有一个使用 AJAX 请求从服务器获取数据的单页应用程序
*   当页面最初加载时，您的应用程序做的第一件事就是获取所有数据
*   您想通过在初始请求中包含所有必要的数据来提高启动速度/用户体验

如果是这种情况，您别无选择，只能将初始数据呈现到您`index.php`的 .html 文档中，或者您调用加载应用程序的任何 html 文档中。否则它将如何到达那里？

如果这是一个不可接受的解决方案，您应该尝试通过其他方式优化加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:18:16.033

老实说，需要数据才能运行的有用的主干 JS 应用程序几乎在所有情况下都与您的后端耦合。只要你写：

```
var myModel = Backbone.Model.extend({
   url: '/api/MyModel'
}); 
```

你是说“你必须使用我的端点来获取/更新/创建数据，因此你不能自己操作”。因此，无论您是将数据写入服务器上的页面并将其注入到 Backbone 模型中，还是在页面加载后检索数据，您基本上都在做同样的事情。

如果我是你，我就不会担心！毕竟，您是否要从后端提升客户端应用程序并以某种方式将其粘贴到另一个后端？我想说这种情况发生的可能性很小，无论您是通过将 JSON 写入服务器上的页面来引导数据，这肯定是最微小的变化。

# google-maps - Google Geocoding API (V3) 是否支持批量地理编码？

> ID：13858376
> 
> 赞同：5
> 
> 时间：2012-12-13T10:58:19.333
> 
> 标签：google-maps, google-geocoding-api

我已阅读所有地理编码服务 api[文档](https://developers.google.com/maps/documentation/geocoding/)，但没有找到有关批量地理编码的任何信息。可能是我错过了什么并且有可能提出批量请求吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T12:04:44.980

不可以。您无法对一堆地址进行批量地理编码，但您可以使用方向 API 对多达 8 个地址进行地理编码。在商务舱中，它最多允许 24 个地址。阅读：[https](https://developers.google.com/maps/documentation/javascript/directions) ://developers.google.com/maps/documentation/javascript/directions 。您也可以尝试[http://code.google.com/p/google-maps-tsp-solver/](http://code.google.com/p/google-maps-tsp-solver/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T04:17:59.680

是的你可以。免费帐户与企业帐户有不同的限制。每秒发送请求的速度也有限制。

# iphone - 在 iPhone 上模拟位置而不连接到计算机

> ID：13858377
> 
> 赞同：7
> 
> 时间：2012-12-13T10:58:19.763
> 
> 标签：iphone, ios, gps, core-location

我正在开发一个导航应用程序。我使用 XCode/iPhone 模拟器位置模拟来模拟各个区域的驾驶。

我现在需要在各种活动中演示该应用程序，并且在进行演示时我不能将手机（物理上）绑定到计算机（我需要端口插入另一台设备）。

有人知道无线模拟位置的方法吗？

我现在能想到的最好的选择是包含一些模拟驾驶的演示代码，是否有任何已知的解决方案已经实现了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:02:29.883

几个月前我使用过这个项目： [https ://github.com/futuretap/FTLocationSimulator](https://github.com/futuretap/FTLocationSimulator)

希望仍然适用于iOS6，试一试。

# java - 解析 BPEL 文件以提取活动 + XPath

> ID：13858380
> 
> 赞同：1
> 
> 时间：2012-12-13T10:58:20.697
> 
> 标签：java, xpath, xml-parsing, bpel, apache-ode

我需要从 xml 文件中提取 BPEL 流程的活动及其 XPath。

我熟悉 BPEL 背后的理论，但不熟悉文件格式本身。如果我阅读 BPEL 文件，我很难识别具体的活动。更不用说 XPath。

如何解析 BPEL 文件以获取每个活动，不知道什么编排类型及其 XPath？

ps：在java中

编辑：我想提取什么

```
<name>CallService1Op2</name>
<xpath>/process/sequence[1]/invoke[1]</xpath> 
```

（xml标签实际上不在xml中。它只是为了指出我想要的。）

来自以下 bpel:sequence

```
 <bpel:sequence name="main">

        <!-- Receive input from requester. 
             Note: This maps to operation defined in LoadProcess.wsdl 
             -->
        <bpel:receive name="receiveInput" partnerLink="client"
                 portType="tns:LoadProcess"
                 operation="process" variable="input"
                 createInstance="yes"/>

        <!-- Generate reply to synchronous request -->
        <bpel:assign validate="no" name="Assign">

            <bpel:copy>
                <bpel:from><bpel:literal><impl:callService2 xmlns:impl="http://loadWS.iaas.unistuttgart.de" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <impl:sleepMiliSeconds>0</impl:sleepMiliSeconds>
</impl:callService2>
</bpel:literal></bpel:from>
                <bpel:to variable="Service1PLRequest" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="payload" variable="input">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:input]]></bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="Service1PLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns:sleepMiliSeconds]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:invoke name="CallService1Op2" partnerLink="Service1PL" operation="callService2" portType="ns:Service1" inputVariable="Service1PLRequest" outputVariable="Service1PLResponse"></bpel:invoke>
        <bpel:assign validate="no" name="Assign1">
            <bpel:copy>
                <bpel:from><bpel:literal><tns:LoadProcessResponse xmlns:tns="de.unistuttgart.iaas.bpel.loadProcess" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:result>tns:result</tns:result>
</tns:LoadProcessResponse>
</bpel:literal></bpel:from>
                <bpel:to variable="output" part="payload"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="Service1PLResponse">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns:callService2Return]]></bpel:query>
                </bpel:from>
                <bpel:to part="payload" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:result]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:reply name="replyOutput" 
               partnerLink="client"
               portType="tns:LoadProcess"
               operation="process" 
               variable="output"
               />
    </bpel:sequence> 
```

以上是一个非常简单的例子。xpath通常看起来像

```
/process/sequence[1]/sequence[1]/repeatUntil[1]/sequence[1]/invoke[1] 
```

因为活动嵌套在序列、流、循环、ifs 或其他中。

编辑2：

用例：BPEL 流程在 Apache-ODE 上运行。Apache-ODE 为进程/活动的启动/停止/任何事件输出事件。该事件仅包含 XPath。但是我想看名字，所以我必须匹配XPath。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:16:59.193

我认为你应该看看这篇文章：[Get Xpath from the org.w3c.dom.Node](https://stackoverflow.com/questions/5046174/get-xpath-from-the-org-w3c-dom-node)

还提到了这个库：[http](http://code.google.com/p/joox/) ://code.google.com/p/joox/这似乎很有用

我会做什么：一个通用的 Xpath，用于列出 xml 中的所有活动节点。然后使用 Dom 或 joox lib，如果它适合您（免责声明，未经测试），您将获得名称和 xpath 字符串......

希望这可以帮助

# objective-c - UITextView 不在另一个子视图中滚动

> ID：13858382
> 
> 赞同：1
> 
> 时间：2012-12-13T10:58:22.633
> 
> 标签：objective-c, ios, scroll, uitextview

我有一个`UITextView`命名`descriptionText`的，我作为子视图添加到`viewDescription`. 它本身是一个子视图`sliderView`：

```
sliderView -> viewDescription -> descriptionText 
```

出于某种原因，`descriptionText`不会滚动。但是，如果我将它作为子视图添加到`sliderView`，它会滚动...

这就是我创建的方式`UITextView`：

```
_descriptionText                    = [[UITextView alloc] initWithFrame:CGRectMake(10, 30, 220, 100)];
_descriptionText.text               = @"Some long text here...";
_descriptionText.backgroundColor    = [UIColor clearColor];
_descriptionText.textAlignment      = UITextAlignmentLeft;
_descriptionText.textColor          = [UIColor whiteColor];
_descriptionText.font               = [UIFont boldSystemFontOfSize:11];
_descriptionText.editable           = NO; 
```

请注意，我已经设置：

```
_viewDescription.userInteractionEnabled = YES; 
```

我怎样才能让它工作？

编辑1：我也尝试了所有这些事情，但没有任何改进：

```
[_descriptionText setContentSize:CGSizeMake(500, 500)];
[_descriptionText setContentOffset:CGPointMake(200, 200)];
[_descriptionText setOpaque:TRUE];
[_descriptionText setEditable:NO];
[_descriptionText setShowsVerticalScrollIndicator:YES];
[_descriptionText setScrollEnabled:YES];
[_descriptionText setUserInteractionEnabled:YES]; 
```

编辑 2：这是 _viewDescription：

```
_viewDescription = [[UIView alloc] initWithFrame:CGRectMake( self.frame.size.width + 20, 110, 230, 140)]; 
```

这是自定义滑块视图：

```
_sliderView = [[PTSlidersDimension alloc] initWithFrame:CGRectMake(350, 270, 390, 250)] 
```

请注意，PTSliderDimension 是继承自 UIView 的自定义类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:12:33.607

你有什么框架`viewDescription`？可能它比你的框架小`descriptionText`？

（默认情况下两者都是 YES `scrollEnabled`，`userInteractionEnabled`所以这无济于事。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:17:33.553

正如[Hermann Klecker](https://stackoverflow.com/users/854396/hermann-klecker)所说`scrollEnabled`，可以使用，您也可以尝试

```
_descriptionText.UserInteractionsEnabled =YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:09:34.920

添加

```
_descriptionText.scrollEnabled    = YES; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-21T09:42:46.867

```
_descriptionText.textAlignment                       =   NSTextAlignmentJustified;
    _descriptionText.showsVerticalScrollIndicator        =   false;
    _descriptionText.selectable                          =   false;
    _descriptionText.editable                            =   false; 
```

# c# - 与覆盖关联的密封关键字

> ID：13858384
> 
> 赞同：26
> 
> 时间：2012-12-13T10:58:39.340
> 
> 标签：c#, overriding, sealed

是否总是需要在方法的签名中跟随`sealed`关键字 with `override`，如下面的代码：

```
public sealed override string Method1(){.....} 
```

我的意思是，如果我想在不覆盖的情况下“密封”基类中的方法，那么`override`关键字是否仍然必要？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-13T11:00:16.330

密封一个方法只有在你覆盖它时才有意义。

这里发生的情况如下：
您正在重写基类的方法 ( )，并告诉编译器不再允许从*您的*`override`类派生的类重写此方法 ( )。*`sealed`*

 *如果该方法是您在类中声明的新方法，并且您希望防止派生类覆盖它，请不要将其声明为虚拟。

如果该方法在基类中声明但不可覆盖，则密封将没有任何意义，因为它已经无法覆盖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-13T15:38:04.343

我认为 Hilgarth 先生在[这里](https://stackoverflow.com/a/13858411/1977152)提供了最好的答案 ，但只是为了给以前有**Java**背景的程序员（比如我自己）添加一些新东西，我认为大多数 C# 新手在覆盖方面 往往会`sealed`混淆。`final``Java`

在**Java**`"any"`中，没有指定修饰符的默认行为是***可以***在其派生类中*覆盖该方法。*

在**C#**中，默认行为是除非使用关键字明确指定，否则***无法****覆盖该方法。*`virtual`

希望这有助于补充上述最佳答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:00:05.410

你只能密封一个覆盖，所以我想答案是肯定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-03T18:06:48.013

好吧，这在技术上是可能的....但是，我的选择中的解决方案有点脏。

想象一下有一个类`A`（在您的代码库或外部库中）：

```
public class A
{
    public virtual void M () { /* implementation */ }
} 
```

您可以定义一个（抽象）类`B : A`，如下所示：

```
public class B : A
{
    public sealed override void M() => base.M();
} 
```

任何类`C : B` 都无法覆盖`A.M`，因为您已经密封了该方法（即使您没有进行语义更改）。*

# java - AspectJ：避免执行枚举

> ID：13858386
> 
> 赞同：1
> 
> 时间：2012-12-13T10:58:42.277
> 
> 标签：java, enums, aspectj

我对此进行了`method`注释：

```
@Around("execution(* it.foo.bar.Flow.*(..))")
public Object profile(ProceedingJoinPoint pjp) {...} 
```

在`Flow class`我有一个简单`switch`的`enumeration type`. 当我在那条线上跑时，`profile method`上面的内容被调用。这是`pjp object`我拥有的：

```
execution(int[] it.foo.bar.Flow.$SWITCH_TABLE$it$foo$bar$dataobjects$RequestType()) 
```

`RequestType`是`enum`。我想避免在遇到`profile method`时被调用`enum`，所以我尝试了几个执行表达式，但它不起作用，即使除了上面的一个之外，下面的一个也不行：

```
&& !(execution(int[]     it.foo.bar.Flow.$SWITCH_TABLE$it$foo$bar$dataobjects$RequestType())) 
```

是否有可能实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:59:38.397

不可能在比方法更细粒度的级别上编织一个类。您可以将句柄的功能提取`RequestType` `enum`到一个单独的方法中并调整您的切入点表达式以避免这种情况：

```
@Around("execution(* it.foo.bar.Flow.*(..)) && !execution(* it.foo.bar.Flow.handleRequestType(..))") 
```

# c# - 获取并插入其他表 UserId

> ID：13858397
> 
> 赞同：1
> 
> 时间：2012-12-13T10:59:39.697
> 
> 标签：c#, asp.net, asp.net-membership, uniqueidentifier, userid

如何使用 C# 登录 UserID**将其插入其他数据库表**？

第二个表中的列与 aspnet_Membership 表中的列 UserId具有相同的数据类型 ( **uniqueidentifier )。**

如果我尝试输入 Guid 变量类型和字符串的值，它对我不起作用：

```
(...)    
public MembershipUser mojObiekt = Membership.GetUser();
(...)
string userID = myObject.ProviderUserKey.ToString();
Guid userkGuid = new Guid(userID); 
```

并将函数转换为 SQL 查询中的 uniqueidentifier 也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:08:43.723

只需将另一个表中的列转换为字符串，然后将唯一标识符作为字符串插入另一个表中。

# asp.net-mvc-4 - HandleError 操作过滤器的 OnError 处理程序是否处理已由 try/catch 块处理的异常？

> ID：13858399
> 
> 赞同：0
> 
> 时间：2012-12-13T10:59:46.907
> 
> 标签：asp.net-mvc-4

我仍然对`HandleError`属性/操作过滤器处理哪些类型的错误感到困惑。

例如，在下面的代码中，假设我将`HandleError`过滤器定义为我的 MVC 4 应用程序的全局操作过滤器。

我在下面的 try catch 块中捕获的异常是否会到达操作过滤器的`OnError`处理程序？`HandleError`

```
public class SomeController : Controller
{
    public ActionResult SomeAction()
    {
        new SomeBusinessLogicComponentInTheMVCProject().DoSomething();
        return View();
    }
}

public class SomeBusinessLogicComponentInTheMVCProject
{
    public void DoSomething()
    {
        try
        {
        }
        catch (Exception ex)
        {
            // Will the HandleError filter's OnError 
            // handler catch this exception?
        }
        finally
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T05:16:15.537

我想你的过滤器中的 OnError() 方法不会得到异常，因为你的 catch 块已经处理了它，除非在 catch 中再次抛出异常（或新异常）。

ErrorHandelingFilter 中的 OnError 或 Controller 上的 OnException 方法（您的 SomeController 继承自的类）都只会处理来自控制器中的操作的那些未处理的异常。

# r - 根据R中的规则在矩阵中插入值的简单方法

> ID：13858400
> 
> 赞同：-2
> 
> 时间：2012-12-13T10:59:48.777
> 
> 标签：r

我有一个矩阵：[https ://dl.dropbox.com/u/22681355/mat.csv](https://dl.dropbox.com/u/22681355/mat.csv)

```
mat<-read.csv("mat.csv")
sub<-c(123,132) 
```

我想为 mat$V2=sub 的那些行更改 mat 的第 7 列中的值

我可以使用以下方法选择此子集：

```
set<- subset(mat, mat$V2 %in% sub)
set[,7]<-set[,7]+1 
```

然后以某种方式将“set”与“mat”中的相同行匹配。

但是有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:14:18.100

```
 mat[7] <- mat[7] + mat$V2 %in% sub 
```

会成功的。

* * *

如果您希望更改列中的值`V7`：

```
mat["V7"] <- mat["V7"] + mat$V2 %in% sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:22:20.673

你应该看一些[twotorials](http://twotorials.com/)

```
# download and read in your file from dropbox
tf <- tempfile()
library(httr)
csvpage <- GET( "https://dl.dropbox.com/u/22681355/mat.csv" )
writeBin(content(csvpage, "raw"), tf )

# import the data into R
mat <- read.csv( tf )

# note read.csv creates a data frame not a matrix
class( mat )

# create your sub object
sub <- c(123,132)

# subset the matrix..

# show all rows where V2 is equal to any of the contents of sub
mat[ mat$V2 %in% sub , ]

# access only the V7 column for rows where V2 is equal to the contents of sub
mat[ mat$V2 %in% sub , 'V7' ]

# overwrite the V7 column with MISSING
# for rows where V2 is equal to the contents of sub
mat[ mat$V2 %in% sub , 'V7' ] <- NA

# OR

# overwrite the V7 column with the value of V2 (which matched something in sub)
# for rows where V2 is equal to the contents of sub
mat[ mat$V2 %in% sub , 'V7' ] <- mat[ mat$V2 %in% sub , 'V2' ]

# OR

# overwrite the V7 column with itself plus one
# for rows where V2 is equal to the contents of sub
mat[ mat$V2 %in% sub , 'V7' ] <- mat[ mat$V2 %in% sub , 'V7' ] + 1 
```

# objective-c - Mac App Store：技术与道德提交指南

> ID：13858407
> 
> 赞同：1
> 
> 时间：2012-12-13T11:00:08.943
> 
> 标签：objective-c, cocoa, mac-app-store

我已经阅读了很多关于 Mac App Store 审查指南的主题，但它处理的道德问题（年龄分级、版权、隐私等）比代码编写中的实际不当行为（存储、保护等）要多得多。 )

但是，论坛上似乎到处都是看到他们的应用程序因为这些原因被拒绝的人，你知道编译所有这些经典编码错误的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:31:17.877

*如果观察到*错误（有时会出现看似明显的错误令人惊讶......）或者如果它们违反了 Apple 的许多规则之一，通常是松散定义和不同解释的（由 Apple），应用程序将被拒绝。Apple 没有看到您的代码，也没有查看您的代码的感知质量。

因此，没有*特定*于 Mac App Store 的“经典编码错误”列表（尽管有人可以编写或可能已经编写了一个并将其标记为“MAS 经典错误” - 但它们只是“经典错误” ）。

# ruby-on-rails - 启动 Rails 服务器时出错

> ID：13858416
> 
> 赞同：0
> 
> 时间：2012-12-13T11:00:39.810
> 
> 标签：ruby-on-rails

我是 Rails 的新手，捆绑安装适用于该项目。但是当我启动 rails 服务器时会显示错误。显示的错误附在此处。

```
 Exiting
C:/Ruby193/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): could not find e
xpected ':' while scanning a simple key at line 27 column 3 (Psych::SyntaxError)

        from C:/Ruby193/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
        from C:/Ruby193/lib/ruby/1.9.1/psych.rb:151:in `parse'
        from C:/Ruby193/lib/ruby/1.9.1/psych.rb:127:in `load'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/application/configuration.rb:115:in `database_configuration'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/railtie.rb:75:in `block (2 levels) in <class:Railtie>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/lazy_load_hooks.rb:26:in `on_load'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from D:/ROR/appmallserver/config/environment.rb:22:in `<top (required)>'    
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
        from D:/ROR/appmallserver/config.ru:4:in `block in <main>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
        from D:/ROR/appmallserver/config.ru:1:in `new'
        from D:/ROR/appmallserver/config.ru:1:in `<main>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands/server.rb:46:in `app'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands/server.rb:70:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:55:in `block in <top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:50:in `tap'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:21:in `require'
        from script/rails:21:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:12:17.957

一旦你通过下面的 url
[jekyll 前面的问题，如何找到损坏的文件？](https://stackoverflow.com/questions/10417122/jekyll-with-broken-front-matter-how-to-find-the-broken-file)

那会帮助你。

# node.js - 为什么我的玉变量未定义？

> ID：13858420
> 
> 赞同：1
> 
> 时间：2012-12-13T11:01:00.480
> 
> 标签：node.js, variables, undefined, pug

我想使用玉渲染一个页面。在我的路线文件中，我有这个：

```
exports.start = function(req, res){
    res.render('start', {
        title: 'Special you!',
        locals: {
            percent: 0
        }
    });
}; 
```

在 start.jade 文件中，我想像这样使用百分比变量：

```
.progress.progress-success  
    .bar(style='width: #{locals.percent}') 
```

我还在 start.jade 中包含了这段代码，用于调试目的：

```
each item in locals
    p= item 
```

输出是这样的：

```
[object Object]

Special you!

function locals(obj){ for (var key in obj) locals[key] = obj[key]; return obj; }

false

C:\Users\Alexandru\Documents\GitHub\yolo-adventure\views\start.jade 
```

并且 locals.percent 的值是未定义的。

完整的 start.jade 文件是：

```
extends layout

block custom-style
    link(rel='stylesheet', href='/stylesheets/main-style.css')

block content
    h1  Start from here
    each item in locals
        p= item

    .progress.progress-success  
        .bar(style='width: #{locals.percent}') 
```

页面来源是这样的：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Special you!</title>
        <link rel="stylesheet" href="/stylesheets/bootstrap.css">
        <link rel="shortcut icon" href="/images/favicon.png">
        <link rel="stylesheet" href="/stylesheets/main-style.css">
    </head>
    <body>
        <h1>Start from here</h1>
        <p>[object Object]</p>
        <p>Special you!</p>
        <p>function locals(obj){
              for (var key in obj) locals[key] = obj[key];
                  return obj;
           }
        </p>
        <p>false</p>
        <p>C:\Users\Alexandru\Documents\GitHub\yolo-adventure\views\start.jade</p>
        <div class="progress progress-success">
            <div style="width: undefined" class="bar"></div>
        </div>
    </body>
</html> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:04:13.433

**服务器端**

直接定义本地人：

```
res.render('start', {
    title: 'Special you!',
    percent: 0
}); 
```

**客户端**

然后你可以这样做：

```
.progress.progress-success
  .bar(style='width: ' + percent + ';') 
```

解决此问题的另一种更通用的方法是在 Javascript 中创建一个变量，然后将 HTML 属性设置为该 Javascript 变量。

```
.progress.progress-success
  - var bar_style = 'width: ' + percent + ';';
  .bar(style=bar_style) 
```

# asp.net - 为什么这个标签不居中？

> ID：13858422
> 
> 赞同：1
> 
> 时间：2012-12-13T11:01:14.210
> 
> 标签：asp.net, html, css, webforms

使用 ASP.NET 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Requests.aspx.cs" Inherits="Portal.Requests"
    MasterPageFile="Portal.Master" Title="Requests Log" %>

<asp:Content runat="server" ContentPlaceHolderID="MainContentPlaceHolder">
    <div class="block" id="options">
        <h2>
            Requests Log
        </h2>
        <div style="padding: 12px 13px 0px 12px;">
            <asp:Label runat="server" Text="Search :" CssClass="label" />
            <asp:TextBox ID="txtSearch" runat="server" Size="16" CssClass="textbox" />
            <asp:Button ID="btnSearch" CssClass="button" Style="float: right" runat="server"  Text="Search" OnClick="Search" />
        </div>
        <div style="width: 100%; text-align:center; color: #4E1329; font-size: smaller; float:none; display:inline;">
            you can search by acc no and username
        </div>
        <div style="padding-top: 10px; width: 250px; margin-left: auto; margin-right: auto;">
            <asp:GridView ID="requestsGrid" runat="server" AutoGenerateColumns="False" GridLines="Horizontal">
                <Columns>
                    <asp:BoundField DataField="FirstColumn" HeaderText="Who and When" HeaderStyle-Width="120px" />
                    <asp:BoundField DataField="Type" HeaderText="Type" HeaderStyle-Width="40px" />
                    <asp:TemplateField HeaderText="File" HeaderStyle-Width="25px">
                        <ItemTemplate>
                            <asp:LinkButton ID="btnDownload" runat="server" Text=".zip" CommandArgument='<%# Bind("Id") %>'
                                OnClick="Download" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
                <RowStyle HorizontalAlign="Center" VerticalAlign="Middle" />
            </asp:GridView>
        </div>
    </div>
</asp:Content> 
```

渲染：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>
    Requests Log
</title><link rel="shortcut icon" type="image/ico" href="favicon.ico" /><link rel="icon" href="favicon.ico" type="image/ico" /><link rel="stylesheet" type="text/css" href="Styles/Stylesheet.css" /><meta name="viewport" content="width = device-width, initial-scale = 1, user-scalable = yes" /><meta name="apple-mobile-web-app-capable" content="yes" /></head>
<body>
    <form method="post" action="Requests.aspx" id="ctl01">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTM3NTI0NjYyOQ9kFgJmD2QWAgIDD2QWAgIDD2QWAgIHDzwrABECAA8WBB4LXyFEYXRhQm91bmRnHgtfIUl0ZW1Db3VudAIWZAEQFgAWABYAFgJmD2QWLgIBD2QWBmYPDxYCHgRUZXh0BRI1IGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQZHVTk5OTlkZAICD2QWAgIBDw8WAh4PQ29tbWFuZEFyZ3VtZW50BQExZGQCAg9kFgZmDw8WAh8CBRI1IGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQZHVTk5OTlkZAICD2QWAgIBDw8WAh8DBQE4ZGQCAw9kFgZmDw8WAh8CBRI1IGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQRDQUFSZGQCAg9kFgICAQ8PFgIfAwUCMTJkZAIED2QWBmYPDxYCHwIFEjUgZGF5cyBhZ28gYnkgbWFzaWRkAgEPDxYCHwIFBENBQVJkZAICD2QWAgIBDw8WAh8DBQIxM2RkAgUPZBYGZg8PFgIfAgUSNSBkYXlzIGFnbyBieSBtYXNpZGQCAQ8PFgIfAgUEQ0FBUmRkAgIPZBYCAgEPDxYCHwMFAjE0ZGQCBg9kFgZmDw8WAh8CBRI1IGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQRDQUFSZGQCAg9kFgICAQ8PFgIfAwUCMTVkZAIHD2QWBmYPDxYCHwIFEjUgZGF5cyBhZ28gYnkgbWFzaWRkAgEPDxYCHwIFBENBQVJkZAICD2QWAgIBDw8WAh8DBQIxNmRkAggPZBYGZg8PFgIfAgUSNSBkYXlzIGFnbyBieSBtYXNpZGQCAQ8PFgIfAgUEQ0FBUmRkAgIPZBYCAgEPDxYCHwMFAjE3ZGQCCQ9kFgZmDw8WAh8CBRI1IGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQRDQUFSZGQCAg9kFgICAQ8PFgIfAwUCMThkZAIKD2QWBmYPDxYCHwIFEjUgZGF5cyBhZ28gYnkgbWFzaWRkAgEPDxYCHwIFBENBQVJkZAICD2QWAgIBDw8WAh8DBQIxOWRkAgsPZBYGZg8PFgIfAgUSNSBkYXlzIGFnbyBieSBtYXNpZGQCAQ8PFgIfAgUEQ0FBUmRkAgIPZBYCAgEPDxYCHwMFAjIwZGQCDA9kFgZmDw8WAh8CBRI1IGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQRDQUFSZGQCAg9kFgICAQ8PFgIfAwUCMjFkZAIND2QWBmYPDxYCHwIFEjIgZGF5cyBhZ28gYnkgbWFzaWRkAgEPDxYCHwIFBENBQVJkZAICD2QWAgIBDw8WAh8DBQIyMmRkAg4PZBYGZg8PFgIfAgUSMiBkYXlzIGFnbyBieSBtYXNpZGQCAQ8PFgIfAgUEQ0FBUmRkAgIPZBYCAgEPDxYCHwMFAjI3ZGQCDw9kFgZmDw8WAh8CBRIyIGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQRDQUFSZGQCAg9kFgICAQ8PFgIfAwUCMjhkZAIQD2QWBmYPDxYCHwIFEjIgZGF5cyBhZ28gYnkgbWFzaWRkAgEPDxYCHwIFBENBQVJkZAICD2QWAgIBDw8WAh8DBQIyOWRkAhEPZBYGZg8PFgIfAgUSMiBkYXlzIGFnbyBieSBtYXNpZGQCAQ8PFgIfAgUEQ0FBUmRkAgIPZBYCAgEPDxYCHwMFAjMwZGQCEg9kFgZmDw8WAh8CBRIyIGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQRDQUFSZGQCAg9kFgICAQ8PFgIfAwUCMzFkZAITD2QWBmYPDxYCHwIFEjIgZGF5cyBhZ28gYnkgbWFzaWRkAgEPDxYCHwIFBENBQVJkZAICD2QWAgIBDw8WAh8DBQIzMmRkAhQPZBYGZg8PFgIfAgUSMiBkYXlzIGFnbyBieSBtYXNpZGQCAQ8PFgIfAgUEQ0FBUmRkAgIPZBYCAgEPDxYCHwMFAjMzZGQCFQ9kFgZmDw8WAh8CBRIyIGRheXMgYWdvIGJ5IG1hc2lkZAIBDw8WAh8CBQRDQUFSZGQCAg9kFgICAQ8PFgIfAwUCMzRkZAIWD2QWBmYPDxYCHwIFEXllc3RlcmRheSBieSBtYXNpZGQCAQ8PFgIfAgUGR1U5OTk5ZGQCAg9kFgICAQ8PFgIfAwUCMzVkZAIXDw8WAh4HVmlzaWJsZWhkZBgBBSljdGwwMCRNYWluQ29udGVudFBsYWNlSG9sZGVyJHJlcXVlc3RzR3JpZA88KwAMAQgCAWR+8m8SIKqbNyNbkrQBusmcNv8bCI0kMOXnKhs2eQPoUA==" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['ctl01'];
if (!theForm) {
    theForm = document.ctl01;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<script src="/WebResource.axd?d=QZPkRLZ3fUaN6VLGec8U1eb-7A0RmvYeX7AOUpyZg60IpqTruzWtehyWdkhkl9lfeQb8mEYo0i4n5nosbE2UTMyeu9sobarSJxcUx83SFPs1&amp;t=634768237750540983" type="text/javascript"></script>

<script src="/ScriptResource.axd?d=gH6INTDR0ghdGy8187seiZld9-3hIDEUD4UZXxgbQNevT34BY6bPtKCTN86kvXWivVi5j4Mqk82c9kJeg-HGZ1gkOzd2OkB_H1SFfAw8T0nkn2J_yq_n7Tko8qp8GK6S2sFuEB6V36qw4i4I9UtNBZbY8gEyl8T9hpNAHBP1Ncc0EIlDqB6rGCKHSEZk0IqO0&amp;t=ffffffff940d030f" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
//]]>
</script>

<script src="/ScriptResource.axd?d=SZ7Iu2p7Dx3sirGc0eodEyXdoKWQbBb85Myy8mEmJcXjSVSUbobpetDKV_2kbrQbyRsPhW2vufjIr6XDGEt7v-ukuTFQq2fNuNOHhcfIHAnmuQRWEXvmSJLpONklLNI8hQI7wxVjfx7Qg6EKoJkMvo4NWxeD_ZHIemwcs1W1QwmKgcv6UKwwzLFcarl9GeoC0&amp;t=ffffffff940d030f" type="text/javascript"></script>
<div class="aspNetHidden">

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWGQKutYr8AwLI4arfCwLM08eUAgLIs/LdCwL5l4+IBwKqhYmXBwLjpMWIAgLsw7D4AQKN7v/UCQLu7ta3DALHv6LwCwKV16SoBwLup/DgBgLHs/78AwL4l5unDwKphZW2DwLipNGnCgLrw7yXCgKM7ov0AQLt7uLWBALGv66PBAKT17BRAuyn/AkCxbOKpg0C9pen0AiNJ9hTWsRav+IvckroC8qB9LGJ+gh+z0AvBqjhxR2QQA==" />
</div>
    <script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ctl00$ScriptManager1', 'ctl01', [], [], [], 90, 'ctl00');
//]]>
</script>

    <div id="header" style="text-align:center;padding-top:5px;"> 
        <img id="uaLogo" alt="UA Logo" src="../UALogo.png" />
    </div>

    <div id="wrapper">

    <div class="block" id="options">
        <h2>
            Requests Log
        </h2>
        <div style="padding: 12px 13px 0px 12px;">
            <span class="label">Search :</span>
            <input name="ctl00$MainContentPlaceHolder$txtSearch" type="text" id="MainContentPlaceHolder_txtSearch" class="textbox" Size="16" />
            <input type="submit" name="ctl00$MainContentPlaceHolder$btnSearch" value="Search" id="MainContentPlaceHolder_btnSearch" class="button" style="float: right" />
        </div>
        <div style="width: 100%; text-align:center; color: #4E1329; font-size: smaller; float:none; display:inline;">
            you can search by acc no and username
        </div>
        <div style="padding-top: 10px; width: 250px; margin-left: auto; margin-right: auto;">
            <div>
    <table cellspacing="0" rules="rows" border="1" id="MainContentPlaceHolder_requestsGrid" style="border-collapse:collapse;">
        <tr>
            <th scope="col" style="width:120px;">Who and When</th><th scope="col" style="width:40px;">Type</th><th scope="col" style="width:25px;">File</th>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>GU9999</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_0" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl02$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>GU9999</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_1" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl03$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_2" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl04$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_3" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl05$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_4" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl06$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_5" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl07$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_6" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl08$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_7" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl09$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_8" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl10$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_9" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl11$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_10" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl12$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>5 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_11" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl13$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_12" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl14$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_13" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl15$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_14" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl16$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_15" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl17$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_16" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl18$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_17" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl19$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_18" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl20$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_19" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl21$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>2 days ago by masi</td><td>CAAR</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_20" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl22$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr><tr align="center" valign="middle">
            <td>yesterday by masi</td><td>GU9999</td><td>
                            <a id="MainContentPlaceHolder_requestsGrid_btnDownload_21" href="javascript:__doPostBack(&#39;ctl00$MainContentPlaceHolder$requestsGrid$ctl23$btnDownload&#39;,&#39;&#39;)">.zip</a>
                        </td>
        </tr>
    </table>
</div>
        </div>
    </div>

    </div>

    </form>
</body>
</html> 
```

CSS：

```
.block
{
    margin: 0 auto;
    width: 440px;
    background-color: #FAFAFA;
    border-radius: 6px;
    box-shadow: 3px 3px 3px #888888;
    padding-bottom: 10px;
    border: 1px solid #4e1329;
}

.block > *
{
    position: relative;
}

#options
{
    width: 273px;
    height: auto;
} 
```

我得到：

![在此处输入图像描述](../Images/7a1c497a37b2868dd31f69f31d4d043b.png)

为什么标签/div（我都试过了）不居中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:03:02.040

改变：

```
<div style="text-align:center; color: #4E1329; font-size: smaller; float:none">
    you can search by acc no and username
</div> 
```

到

```
<div style="width: 100%; text-align:center; color: #4E1329; font-size: smaller; display:inline;">
    you can search by acc no and username
</div> 
```

注意：您可能还需要考虑使用 CSS 类而不是内联样式。

**编辑：**好的，看到你的编辑后，你的班级`block`需要设置一个宽度。为了使文本能够居中，它需要 100% 宽度。为了使 100% 的宽度起作用，您需要一个具有宽度的父级。如果块有宽度，请发布它的 CSS。

**编辑 - 最终修订：**

`display:inline`现在很困惑。这`float:none;`需要删除。

```
<div style="width: 100%; text-align:center; color: #4E1329; font-size: smaller;">
    you can search by acc no and username
</div> 
```

小提琴示例：http: [//jsfiddle.net/QCvaP/1/](http://jsfiddle.net/QCvaP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:10:04.167

似乎它与周围的div有关。如果你在它周围加上一个固定的 div，一切看起来都很好。

html:

```
<div style="width: 300px; border: 1px solid red;">
    <div style="padding: 12px 13px 0px 12px;">
        <span class="label">Search :</span>
        <input name="ctl00$MainContentPlaceHolder$txtSearch" type="text" id="MainContentPlaceHolder_txtSearch" class="textbox" Size="16" />
        <input type="submit" name="ctl00$MainContentPlaceHolder$btnSearch" value="Search" id="MainContentPlaceHolder_btnSearch" class="button" style="float: right" />
    </div>
    <div style="text-align:center; color: #4E1329; font-size: smaller; float:none">
        you can search by acc no and username
    </div>
</div>    ​ 
```

小提琴：http: [//jsfiddle.net/2c37L](http://jsfiddle.net/2c37L)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:11:48.203

两个 div 都是独立的，并且 div 上方有填充。尝试将填充添加到下面的 div 也喜欢

```
style ="padding: 12px 13px 0px 12px;text-align:center;" 
```

我希望这会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:44:51.833

你的 div 有一个内联 CSS，它说你的 div 是`display:inline`. 这是有什么特殊原因吗？因为如果您删除相同的内容，您会发现 Div 变得居中对齐。

[http://jsfiddle.net/7gdnH/1/](http://jsfiddle.net/7gdnH/1/)

# c++ - C++：向量分配错误

> ID：13858425
> 
> 赞同：0
> 
> 时间：2012-12-13T11:01:19.180
> 
> 标签：c++, vector, stdvector

根据[http://www.cplusplus.com/reference/vector/vector/operator=/](http://www.cplusplus.com/reference/vector/vector/operator=/)我了解我们可以使用“=”运算符来分配向量。但是运行下面的代码，我得到一个错误。出了什么问题？

**代码：**

```
 void checkFunction(map<string, vector<string> > foo){
     vector<string> bar;     
     bar = foo.find("ABC");
     } 
```

**错误 ：**

```
error: no match for ‘operator=’ in ‘bar = foo.std::map<_Key, _Tp, _Compare, _Alloc>::find [with _Key = std::basic_string<char>, _Tp = std::vector<std::basic_string<char> >, _Compare = std::less<std::basic_string<char> >, _Alloc = std::allocator<std::pair<const std::basic_string<char>, std::vector<std::basic_string<char> > > >, std::map<_Key, _Tp, _Compare, _Alloc>::iterator = std::_Rb_tree_iterator<std::pair<const std::basic_string<char>, std::vector<std::basic_string<char> > > >, key_type = std::basic_string<char>](((const std::map<std::basic_string<char>, std::vector<std::basic_string<char> > >::key_type&)(& std::basic_string<char>(((const char*)"PAR"), ((const std::allocator<char>&)((const std::allocator<char>*)(& std::allocator<char>())))))))’

std::vector<_Tp, _Alloc>& std::vector<_Tp, _Alloc>::operator=(const std::vector<_Tp, _Alloc>&) [with _Tp = std::basic_string<char>, _Alloc = std::allocator<std::basic_string<char> >]
std::vector<_Tp, _Alloc>& std::vector<_Tp, _Alloc>::operator=(std::vector<_Tp, _Alloc>&&) [with _Tp = std::basic_string<char>, _Alloc = std::allocator<std::basic_string<char> >, std::vector<_Tp, _Alloc> = std::vector<std::basic_string<char> >]
std::vector<_Tp, _Alloc>& std::vector<_Tp, _Alloc>::operator=(std::initializer_list<_CharT>) [with _Tp = std::basic_string<char>, _Alloc = std::allocator<std::basic_string<char> >, std::vector<_Tp, _Alloc> = std::vector<std::basic_string<char> >] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:05:08.023

该`map::find`方法返回一个指向您搜索的元素的迭代器（存储在`std::pair`包含键 as`first`和值 as的 a 中`second`）。

要访问迭代器指向的向量，您需要取消引用它并获取该`second`对的元素。

```
void checkFunction(map<string, vector<string> > foo){
    typedef map<string, vector<string> > map_t;

    map_t::const_iterator i = foo.find("ABC");
    if (i == foo.end()) {
        // element not found!
    }

    vector<string> bar(i->second);
} 
```

# php - PHP查找带有图像的项目并包含在顶部

> ID：13858432
> 
> 赞同：0
> 
> 时间：2012-12-13T11:01:34.177
> 
> 标签：php, mysql

while 循环中的前两个 if/elseif 语句正在检查新闻项目的图像是否存在，如果不存在，则跳过它。柜台确保仅对顶部的前三个项目执行此操作。目前这工作正常，没有任何错误。

我希望前两个 if/elseif 语句只使用带有图像的帖子（$row->imagelibid） - 所以 7 天前可能有一个带有图像的新闻报道，所以它在顶部使用它 - 它被迫查找并使用带有图像的新闻报道。这意味着这些“选定”故事的日期顺序将是错误的——但这没关系。

希望这是有道理的......以及我欣赏的任何帮助。

```
$site_url = "http://www_#_com";
    $full_site_url = $site_url . "/" . $news_prefix . "news/" . $row->id;
    $news_prefix = "#";
    $adFrequency = 5;
    $ad = 0;
    $i = 0;

    $result = mysql_query( "SELECT news.*, regions.name AS territory FROM news JOIN country ON news.country = country.iso JOIN regions ON regions.id = country.region WHERE news.mobile_app != 0 AND news.hidden = 0 AND news.beef = 1 ORDER BY news.datein DESC LIMIT 20", $db );

    while ( ( $row = mysql_fetch_object( $result ) ) !== false ) {

    $imageid = intval( $row->imagelibid );
    $image_result = mysql_query( "SELECT * FROM imagelib WHERE id = {$imageid}", $db );
    $image_row = mysql_fetch_object( $image_result );
    $image_url = "http://www.#.com/slir/w280/imagelib/" . $image_row->id . "_" . $image_row->filename;

    if ($i <= 0 && !empty($row->imagelibid)) {

    echo '<div class="one-news-featured-article clearfix">';
    echo '<div class="grid_12">';
    echo '<div class="large-featured-image-container"><img src="'.$image_url.'">';  
    echo '<div><h2><a href="item-news.php?id='.$row->id.'">'.$row->title.'</a></h2></div>';
    echo '</div>';
    echo '</div>';
    echo '</div>';

    }

    elseif ($i <= 2 && !empty($row->imagelibid)) {

    echo '<div class="one-news-featured-article clearfix">';
    echo '<div class="grid_6">';    
    echo '<div class="small-featured-image-container"><img src="'.$image_url.'">';  
    echo '<div><h2><a href="item-news.php?id='.$row->id.'">'.$row->title.'</a></h2></div>';
    echo '</div>';
    echo '</div>';
    echo '</div>';

    }

    else {

    // Places ad based of predefined variable frequency
    if ($ad == $adFrequency){

     echo'<div class="one-advertisement-article clearfix">';
     echo'<div class="grid_9 suffix_2"><img src="http://placehold.it/263x75/000000/ffffff"></div>';
     echo'<div class="grid_1"><a class="navigate-right-icon ss-icon" href="#">navigateright</a></div>';
     echo'</div>';

     $ad = 0;
    }

    echo '<div class="one-news-article clearfix">';
    if( $row->imagelibid )
            {
                echo '<div class="grid_4"><a href="#"><img src="'.$image_url.'"></a></div>';        
            }
    else {
                echo '<div class="grid_4"><div class="news-placeholder"><span class="ss-icon">ellipsischat</span></div></div>';
        }

    echo '<div class="grid_7">';
    echo '<h2><a href="item-news.php?id='.$row->id.'">'.$row->title.'</a></h2>';

    $published_date = date('D, d M Y', strtotime($row->datein));
    echo '<p class="published-date">'.$published_date.'</p>';

    echo '<p class="news-snippet">'.$row->snippet.'</p>';
    echo '</div>';
    echo '<div class="grid_1">';
    echo '<div class="news-item-vertical-sep">&nbsp;</div>';
    echo '<p></p>';
    echo '</div>';
    echo '</div>';

    $ad++;

    }

    $i += 1;

    } 
```

PS 我知道 mysql_ 是一个已弃用的函数，但如果现在可以忽略它，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:10:36.670

只需遍历所有结果，如果找到图像，将其保存到数组中，假设为 $newsWithImage，如果找不到，则保存到另一个数组中，$newsWithoutImage。完成后，只需遍历第一个数组并回显结果，然后获取另一个数组。

```
while ( ( $row = mysql_fetch_object( $result ) ) !== false )
{
   if($row->imagelibid)
      $newsWithImage[] = $row;
   else
      $newsWihtoutImage[] = $row;
}

foreach($newsWithImage as $news)
{
  // do your html output with the results 
}

foreach($newsWithoutImage as $news)
{
  // do your html output with results
} 
```

# c# - StreamWriter 是否抛出异常底层连接断开？

> ID：13858433
> 
> 赞同：3
> 
> 时间：2012-12-13T11:01:41.270
> 
> 标签：c#, tcp, connection, streamwriter

我正在使用 这样`StreamWriter`的实例化`Tcpstream`

```
streamWriter = new StreamWriter(tcpClient.GetStream()); 
```

我对以下关于异常的调用的行为感到困惑。以下两个函数预计会引发`IOException`令人惊讶`IOException`的是，当连接的服务器`tcpClient`断开连接并因此底层 TCP 客户端连接中断时，它们不会引发。这两行执行时不会引发任何异常。为什么 ？

```
streamWriter.WriteLine(strBuffer);
streamWriter.Flush(); 
```

编辑：除了专家的回复之外，这篇特别的帖子也帮助我理解了原因。 [http://social.msdn.microsoft.com/Forums/sk/netfxnetcom/thread/b177a935-7430-4812-9555-f747748df1af](http://social.msdn.microsoft.com/Forums/sk/netfxnetcom/thread/b177a935-7430-4812-9555-f747748df1af) 本质上，当调用 StreamWriter 的 WriteLine 时会调用 NetworkStream.Write，这会写入输出缓冲并返回，没有阻塞，除非缓冲区已满。操作系统维护的内部缓冲区包含未发送的数据，操作系统将继续尝试发送，直到给定次数的尝试失败。WriteLine 将抛出 IOException 但不一定每次都抛出..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:21:32.017

此问题与 无关`StreamWriter`，仅与 的行为有关`NetworkStream`。

`NetworkStream.Flush()`是无操作的。特别是在接收者确认刷新之前发送的所有字节之前不会阻塞。

> Flush 方法实现了 Stream.Flush 方法；但是，由于 NetworkStream 没有缓冲，因此对网络流没有影响。调用 Flush 方法不会引发异常。

*（来自[NetworkStream.Flush 方法（MSDN）](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.flush.aspx)）*

你会在某个时候得到你的例外，但这可能要晚得多。本质`NetworkStream`上，操作系统和操作系统都不知道 TCP 连接已经断开，因此它们不会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:27:53.250

这是 TCP 的核心方面，该协议承诺通过网络将数据可靠地传输到另一台机器。操作系统的工作是确保数据最终到达另一台机器。在您写入数据很久之后，它将尝试多次获取数据，如果没有得到确认，则在必要时重新发送 IP 数据包。当您断开机器连接时会出现这种情况。多次重试后，它不会放弃这样做。在它放弃之前可能长达一分钟。

本合同中隐含的内容是，您认为连接是可靠的。你写的任何东西都会在一个*缓冲区*中结束，它位于内核内存池中。这个缓冲区极大地提高了程序的吞吐量，占用了程序和可变传输率之间的时间。一旦它进入缓冲区，操作系统就有责任确保数据实际被发送。

您可以看到它的去向，直到稍后您才会从断开连接中获得异常。当缓冲区太满时，它可能发生在任何后续的 Write() 尝试中。它可能会一直延迟到您调用套接字的 Close() 方法。

# javascript - 使用“new”或不使用它声明变量有什么区别？

> ID：13858439
> 
> 赞同：0
> 
> 时间：2012-12-13T11:02:03.910
> 
> 标签：javascript, oop, function, object

我有这段代码：

```
function Test() {
  var i=0;
  return {
    foo : function() { console.log(++i); },
    bar : function(a) { i=i+a;console.log(i)} 
  }
}
var test1 = Test();
var test2 = new Test(); 
```

`test1``test2`看起来一样，但**我的问题是它们之间是否有什么不同？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:04:41.027

`new`适合从*构造函数*实例化。这基本上意味着，形成了一个*新*对象，然后包含`this`在*构造函数*中引用的所有数据。

如果不使用 using `new`，`this`将引用*全局对象*并破坏全局命名空间（ES3），否则将是`undefined`（ES5 严格）。

* * *

在您的特定片段中，这并不重要，因为您*仍然*从`Test()`. 这将始终被使用并分配给`test1`and `test2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:04:34.917

嗯..你能用第一种方法吗？

您使用“新”一词是因为您声明了一个**Object的**`new` *实例*。不是变量。

# c# - 导航到一个页面 n 次

> ID：13858443
> 
> 赞同：3
> 
> 时间：2012-12-13T11:02:07.680
> 
> 标签：c#, windows-8

我正在使用 C# 创建一个 Windows 8 应用程序。在表格中，用户必须输入想要参加比赛的球队数量，一旦选择了号码，我应该向他们展示每支球队的相同页面，他们可以在其中输入每个球员的姓名和每支球队的名称。我怎样才能调用这个页面 n 次，每个团队一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T11:13:43.280

您的工作流程有点不清楚。我假设您有一个`Page`带有某种“下一步”按钮的导航到同一页面但为下一个团队？

您可以为此使用导航参数。

```
Frame.Navigate(typeof(TeamPage), parameter); 
```

只需为您的导航参数创建一个类，其中包含所有必要的信息，例如当前团队编号和最大团队编号。

您可以像这样获取导航参数：

```
protected override sealed void OnNavigatedTo(NavigationEventArgs e)
{
    var parameter = e.Parameter as MyType;
} 
```

或者像这样，如果你使用`LayoutAwarePage`：

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    var parameter = navigationParameter as MyType;
} 
```

# php - 用wordpress重写url时如何避免重定向

> ID：13858448
> 
> 赞同：4
> 
> 时间：2012-12-13T11:02:34.177
> 
> 标签：php, wordpress, redirect, rewrite

我已经使用 WordPress 自己的函数设置了重写规则。重写代码如下所示：

```
add_rewrite_rule('^testrule/(.+)?$', 'index.php?p=$matches[1]', 'top'); 
```

该规则有效，一切正常，只是每当我转到该网址时，我都会被重定向，这会使网址发生变化，我不希望这种情况发生。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-26T12:32:21.377

您可能应该使用[add_permastruct](https://codex.wordpress.org/Function_Reference/add_permastruct)和[add_rewrite_tag](https://developer.wordpress.org/reference/functions/add_rewrite_tag/)函数，它在我的情况下有所帮助。虽然我的情况有点不同，但想法会相似。

我有一个名为“guide”的自定义帖子类型，我需要它的自定义 URL（不同于自定义帖子名称），而且我在 URL 中使用了 post slug，这是我的解决方案：

```
add_action('init', 'custom_permastruct_rewrite');
function custom_permastruct_rewrite() {
    global $wp_rewrite;

    $wp_rewrite->add_rewrite_tag("%guide_slug%", '([^/]+)', "post_type=guide&name=");
    $wp_rewrite->add_permastruct('my_rule', '/my_custom_name/%guide_slug%', false);
} 
```

因此，当您转到 上述 URL 下 的地址： [http ://example.com/my_custom_name/my_post_slug 时，它会显示来自：](http://example.com/my_custom_name/my_post_slug) [http](http://example.com/?post_type=guide&name=my_post_slug) ://example.com/?post_type=guide&name=my_post_slug 的内容 （不重定向到最后一个地址）

您可以根据自己的需要调整“post_type=guide&name=”，例如，您可以按 id 查找帖子 - 因此将“p=”放在那里会显示以下内容：[http](http://example.com/my_custom_name/24) ://example.com/my_custom_name/24到[http： //example.com/?p=24](http://example.com/?p=24)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:06:55.383

一些插件（如自定义永久链接）可以重定向到`correct`url

```
add_rewrite_rule('^testrule/(.+)?$', 'index.php?disable_redirect=1&p=$matches[1]', 'top');

add_filter('query_vars', 'my_public_query_vars');
function my_public_query_vars($qv)
{
    $qv[] = 'disable_redirect';
    return $qv;
}

add_filter('wp_redirect', 'my_disable_redirect');
function my_disable_redirect($location)
{
    //var_dump(debug_backtrace());//if you want know who call redirect
    $disable_redirect = get_query_var('disable_redirect');
    if(!empty($disable_redirect)) return false;
    return $location;
} 
```

# c++ - 指向属性具有特定值的向量中元素范围的迭代器

> ID：13858450
> 
> 赞同：1
> 
> 时间：2012-12-13T11:02:38.753
> 
> 标签：c++, stl, vector, g++

我有一个对象向量，我想返回其属性具有特定值的元素范围。这是结构：

```
class A {
public:
  std::vector<B*> vec_;
  pair<vector<B*>::iterator, vector<B*>::iterator> getElements(unsigned int attr_val);
  unsigned int name() { return name_; }
private:
  unsigned int name_;
};

class B {
public:
  unsigned int attr() { return attr_; }
  A* source() { return source_; }
  B* dest() { return dest_; }
private:
  A* source_;
  B* dest_;
  unsigned int attr_;
}; 
```

该向量`vec_`已经按`attr_`and排序`dest_->name()`（按该顺序）。现在我想返回所有`attr_`等于`attr_val`.

什么是合适的 stl 算法（或者甚至有向量成员函数？）来实现`getElements(unsigned int attr_val)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:26:24.120

您需要一个值来传递给`equal_range`，而显而易见的使用是指针。获得一个的显而易见的方法是创建一个`B`具有正确值的实例`attr_`，并编写一个只涉及的值的比较器`attr()`。我假设您已经知道如何做到这一点，因为您设法对向量进行了排序；-)

如果向量中没有空指针，您可以这样做：

```
struct FindAttr {
    unsigned int attr;
    FindAttr(unsigned int attr) : attr(attr) {}
    bool operator()(B *left, B *right) {
        unsigned int leftval = left ? left->attr() : attr;
        unsigned int rightval = right ? right->attr() : attr;
        return leftval < rightval;
    }
};

...

return equal_range(vec_.begin(), vec_.end(), nullptr, FindAttr(value)); 
```

你可以把它变成一个 lambda：

```
return equal_range(vec_.begin(), vec_.end(), nullptr, [=value](B *left, B *right) {
    unsigned int leftval = left ? left->attr() : attr;
    unsigned int rightval = right ? right->attr() : attr;
    return leftval < rightval;
}); 
```

您实际上可以完全删除指针，以提供我认为“最干净”的解决方案：

```
struct FindAttr {
    bool operator()(B *left, unsigned int rightval) {
        return left->attr() < rightval;
    }
    bool operator()(unsigned int leftval, B *right) {
        return leftval < right->attr();
    }
};

...

return equal_range(vec_.begin(), vec_.end(), value, FindAttr()); 
```

AFAIK 没有与 lambda 直接等效的方法，因为 lambda 只能有一个调用签名。我想你可以编写一个接受 a 的 lambda `boost::variant`（或任何从两者`unsigned int`和 from隐式转换的类型`B*`，并且记住它是哪一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:14:29.573

您正在寻找`std::equal_range`，它基本上可以满足您的需求。界面是：

```
pair<It, It> equal_range(It first,
                         It last,
                         const T& value,
                         Compare comp); 
```

`comp`默认为`std::less`，依次调用 operator `<`。

在您的情况下，实现可能是：

```
bool comparer(B* el, unsigned int value)
{
  return el->attr() < value;
}

pair<vector<B*>::iterator, vector<B*>::iterator> A::getElements(unsigned int attr_val)
{
  return equal_range(vec_.begin(), vec_end(), attr_val, comparer);
} 
```

# hbase - 如何更新 HBase 中的数据

> ID：13858451
> 
> 赞同：0
> 
> 时间：2012-12-13T11:02:43.100
> 
> 标签：hbase

我将用户数据存储在 HBase 中，并且我有 c# 客户端，它使用 HBase REST API 将数据存储在 HBase 表中。有可能通过多个线程更新用户数据。如何更新表中的行以及如何在行上应用锁定系统。注意：- 我正在使用 HBase REST API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:08:47.837

在线文档尚未描述 ?check=put 和 ?check=delete 参数。源代码似乎说您应该在有效负载的末尾包含一个额外的单元格描述，指定在执行操作之前必须匹配的旧内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:40:20.807

你能给我们指出你正在关注的其他 api 吗？afaik 我还没有看到一个没有贬低的。

除此之外，我相信其余的 api 将建立在 hbase api 之上。hbase 中的每个“Put”操作都持有一个行锁。即写入是原子的，因此您不必真正关心。

# javascript - 获取元素的父id

> ID：13858452
> 
> 赞同：0
> 
> 时间：2012-12-13T11:02:44.253
> 
> 标签：javascript, jquery, html, identifier

我在获取元素的父 ID 时遇到了麻烦。

```
$(function(){
$("#elem-132224").append("<button class='sum'>+</button><button>-</button>")
$(".sum").click(function(){
    alert($(this).attr('id'));
}) 
```

为什么不工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:04:19.310

它不起作用，因为该按钮没有`id`. 它只有`class`. 你可以这样写：

```
$(function(){
  $("#elem-132224").append("<button id='my-id-123' class='sum'>+</button><button>-</button>");
  $(".sum").click(function(){
    alert($(this).attr('id'));
}); 
```

如果要获取父级`id`（其中的元素`<button>`），可以[`parent()`](http://api.jquery.com/parent/)在 jquery 中使用：

```
$(function(){
  $("#elem-132224").append("<button class='sum'>+</button><button>-</button>");
  $(".sum").click(function(){
    alert($(this).parent().attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T11:03:47.733

您没有`id`在按钮 html 中添加属性。

改变

```
$("#elem-132224").append("<button class='sum'>+</button><button>-</button>") 
```

至

```
$("#elem-132224").append("<button class='sum' id='someid'>+</button><button>-</button>") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:05:45.423

您的元素没有 ID，因此（不出所料）您无法显示它。

请注意，无需再次调用 jQuery 来获取 ID（一旦您分配了 ID）。它是传递`this`给事件处理程序的元素本身的属性：

```
$('.sum').click(function() {
    alert(this.id);
}) 
```

或者如果你想获得父母的身份证 -`this.parentNode.id`

# java - 下拉刷新列表视图android出错

> ID：13858456
> 
> 赞同：3
> 
> 时间：2012-12-13T11:03:00.417
> 
> 标签：java, android, android-listview, pull-to-refresh

我正在使用这个chrisbanes[库来使用下拉功能刷新但是当我尝试在我的 xml 文件中导入这个小部件时，它显示了以下错误。请帮助我如何解决这个问题。](https://github.com/chrisbanes/Android-PullToRefresh)错误：

```
com.handmark.pulltorefresh.library.PullToRefreshListView failed to instantiate. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:11:07.267

我肯定会看看[Chris Banes 的 pull-to-refresh 实现](https://github.com/chrisbanes/Android-PullToRefresh)。他的代码不仅包含了ListView的这种交互风格，还包含了GridView和WebView。

尤其是后者对您的情况很感兴趣，因为它是不使用适配器作为其内容的视图的拉动刷新的示例实现。如果查看源代码，您会发现 Banes 项目中的每个具体的 pull-to-refreh 视图都从通用的 PullToRefreshBase 扩展而来，其中包含动画和刷新的大部分逻辑。拥有该基类的好处是对任何其他类型的视图（例如 TextView）执行相同的操作应该非常简单。

这种方法的唯一缺点是该实现是其他视图的包装器，这意味着您将需要编写几行额外的代码来获取实际视图。所以它不是一个完整的替代品。但是，它的功能和特性远远超过了那个小小的不便。

**编辑：**

看看我已经实现的下面的代码

**在您的主 JAVA 文件中：**

```
PullToRefreshListView listview;

listview = (PullToRefreshListView) findViewById(R.id.airpost_listView);

    listview.setOnRefreshListener(new OnRefreshListener() {
        public void onRefresh() {
            // TODO Auto-generated method stub
            new GetPost().execute(); // AsyncTask where you can put your  logic when to call the listview for getting new data or let it be same as before
        }
    }); 
```

**Listview在xml文件中定义：**

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/bhavesh"
        android:padding="5dp" >

        <com.FlightMate.AirpostTab.PullToRefreshListView
            android:id="@+id/airpost_listView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#ffffff"
            android:cacheColorHint="@android:color/transparent"
            android:divider="#00000000" />
    </LinearLayout> 
```

**这是 PullToRefreshListView ：**

```
 package com.FlightMate.AirpostTab;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.ListView;

public class PullToRefreshListView extends PullToRefreshBase<ListView> {

    public PullToRefreshListView(Context context) {
        super(context);
    }

    public PullToRefreshListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected final ListView createAdapterView(Context context,
            AttributeSet attrs) {
        ListView lv = new ListView(context, attrs);
        // Set it to this so it can be used in ListActivity/ListFragment

        lv.setId(android.R.id.list);
        return lv;
    }

} 
```

**这是 PullToRefreshBase ：**

```
 package com.FlightMate.AirpostTab;

import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Color;
import android.os.Handler;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.view.animation.AccelerateDecelerateInterpolator;
import android.view.animation.Interpolator;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.LinearLayout;

import com.FlightMate.R;

public abstract class PullToRefreshBase<T extends AbsListView> extends
        LinearLayout implements OnTouchListener, OnScrollListener {

    private final class SmoothScrollRunnable implements Runnable {

        static final int ANIMATION_DURATION_MS = 190;
        static final int ANIMATION_FPS = 1000 / 60;

        private final Interpolator interpolator;
        private final int scrollToY;
        private final int scrollFromY;
        private final Handler handler;

        private boolean continueRunning = true;
        private long startTime = -1;
        private int currentY = -1;

        public SmoothScrollRunnable(Handler handler, int fromY, int toY) {
            this.handler = handler;
            this.scrollFromY = fromY;
            this.scrollToY = toY;
            this.interpolator = new AccelerateDecelerateInterpolator();
        }

        // @Override
        public void run() {

            /**
             * Only set startTime if this is the first time we're starting, else
             * actually calculate the Y delta
             */
            if (startTime == -1) {
                startTime = System.currentTimeMillis();
            } else {

                /**
                 * We do do all calculations in long to reduce software float
                 * calculations. We use 1000 as it gives us good accuracy and
                 * small rounding errors
                 */
                long normalizedTime = (1000 * (System.currentTimeMillis() - startTime))
                        / ANIMATION_DURATION_MS;
                normalizedTime = Math.max(Math.min(normalizedTime, 1000), 0);

                final int deltaY = Math
                        .round((scrollFromY - scrollToY)
                                * interpolator
                                        .getInterpolation(normalizedTime / 1000f));
                this.currentY = scrollFromY - deltaY;
                setHeaderScroll(currentY);
            }

            // If we're not at the target Y, keep going...
            if (continueRunning && scrollToY != currentY) {
                handler.postDelayed(this, ANIMATION_FPS);
            }
        }

        public void stop() {
            this.continueRunning = false;
            this.handler.removeCallbacks(this);
        }
    };

    // ===========================================================
    // Constants
    // ===========================================================

    static final int PULL_TO_REFRESH = 0;
    static final int RELEASE_TO_REFRESH = PULL_TO_REFRESH + 1;
    static final int REFRESHING = RELEASE_TO_REFRESH + 1;
    static final int EVENT_COUNT = 3;

    public static final int MODE_PULL_DOWN_TO_REFRESH = 0x1;
    public static final int MODE_PULL_UP_TO_REFRESH = 0x2;
    public static final int MODE_BOTH = 0x3;

    // ===========================================================
    // Fields
    // ===========================================================

    private int state = PULL_TO_REFRESH;
    private int mode = MODE_PULL_DOWN_TO_REFRESH;
    private int currentMode;
    private boolean disableScrollingWhileRefreshing = true;

    private T adapterView;
    private boolean isPullToRefreshEnabled = true;

    private LoadingLayout headerLayout;
    private LoadingLayout footerLayout;
    private int headerHeight;

    private final Handler handler = new Handler();

    private OnTouchListener onTouchListener;
    private OnRefreshListener onRefreshListener;
    private OnScrollListener onScrollListener;

    private OnLastItemVisibleListener onLastItemVisibleListener;
    private int lastSavedFirstVisibleItem = -1;

    private SmoothScrollRunnable currentSmoothScrollRunnable;

    private float startY = -1;
    private final float[] lastYs = new float[EVENT_COUNT];

    // ===========================================================
    // Constructors
    // ===========================================================

    public PullToRefreshBase(Context context) {
        this(context, null);
    }

    public PullToRefreshBase(Context context, int mode) {
        this(context);
        this.mode = mode;
    }

    public PullToRefreshBase(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context, attrs);
    }

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    /**
     * Get the Wrapped AdapterView. Anything returned here has already been
     * added to the content view.
     * 
     * @return The AdapterView which is currently wrapped
     */
    public final T getAdapterView() {
        return adapterView;
    }

    /**
     * Whether Pull-to-Refresh is enabled
     * 
     * @return enabled
     */
    public final boolean isPullToRefreshEnabled() {
        return isPullToRefreshEnabled;
    }

    public void setDisableScrollingWhileRefreshing(
            boolean disableScrollingWhileRefreshing) {
        this.disableScrollingWhileRefreshing = disableScrollingWhileRefreshing;
    }

    /**
     * Mark the current Refresh as complete. Will Reset the UI and hide the
     * Refreshing View
     */
    public final void onRefreshComplete() {
        resetHeader();
    }

    public final void setOnLastItemVisibleListener(
            OnLastItemVisibleListener listener) {
        onLastItemVisibleListener = listener;
    }

    public final void setOnRefreshListener(OnRefreshListener listener) {
        onRefreshListener = listener;
    }

    /**
     * A mutator to enable/disable Pull-to-Refresh for the current AdapterView
     * 
     * @param enable
     *            Whether Pull-To-Refresh should be used
     */
    public final void setPullToRefreshEnabled(boolean enabled) {
        this.isPullToRefreshEnabled = enabled;
    }

    public final void setReleaseLabel(String releaseLabel) {
        if (null != headerLayout) {
            headerLayout.setReleaseLabel(releaseLabel);
        }
        if (null != footerLayout) {
            footerLayout.setReleaseLabel(releaseLabel);
        }
    }

    public final void setPullLabel(String pullLabel) {
        if (null != headerLayout) {
            headerLayout.setPullLabel(pullLabel);
        }
        if (null != footerLayout) {
            footerLayout.setPullLabel(pullLabel);
        }
    }

    public final void setRefreshingLabel(String refreshingLabel) {
        if (null != headerLayout) {
            headerLayout.setRefreshingLabel(refreshingLabel);
        }
        if (null != footerLayout) {
            footerLayout.setRefreshingLabel(refreshingLabel);
        }
    }

    // ===========================================================
    // Methods for/from SuperClass/Interfaces
    // ===========================================================

    public final void setOnScrollListener(OnScrollListener listener) {
        onScrollListener = listener;
    }

    @Override
    public final void setOnTouchListener(OnTouchListener listener) {
        onTouchListener = listener;
    }

    public final void onScroll(final AbsListView view,
            final int firstVisibleItem, final int visibleItemCount,
            final int totalItemCount) {

        if (null != onLastItemVisibleListener) {
            // detect if last item is visible
            if (visibleItemCount > 0 && visibleItemCount < totalItemCount
                    && (firstVisibleItem + visibleItemCount == totalItemCount)) {
                // only process first event
                if (firstVisibleItem != lastSavedFirstVisibleItem) {
                    lastSavedFirstVisibleItem = firstVisibleItem;
                    onLastItemVisibleListener.onLastItemVisible();
                }
            }
        }

        if (null != onScrollListener) {
            onScrollListener.onScroll(view, firstVisibleItem, visibleItemCount,
                    totalItemCount);
        }
    }

    public final void onScrollStateChanged(final AbsListView view,
            final int scrollState) {
        if (null != onScrollListener) {
            onScrollListener.onScrollStateChanged(view, scrollState);
        }
    }

    // @Override
    public final boolean onTouch(View view, MotionEvent ev) {
        if (isPullToRefreshEnabled) {
            // Returning true here stops the ListView being scrollable while we
            // refresh
            if (state == REFRESHING && disableScrollingWhileRefreshing) {
                return true;
            } else if (onAdapterViewTouch(view, ev)) {
                return true;
            }
        }

        if (null != onTouchListener) {
            return onTouchListener.onTouch(view, ev);
        }

        return false;
    }

    /**
     * This is implemented by derived classes to return the created AdapterView.
     * If you need to use a custom AdapterView (such as a custom ListView),
     * override this method and return an instance of your custom class.
     * 
     * Be sure to set the ID of the view in this method, especially if you're
     * using a ListActivity or ListFragment.
     * 
     * @param context
     * @param attrs
     *            AttributeSet from wrapped class. Means that anything you
     *            include in the XML layout declaration will be routed to the
     *            AdapterView
     * @return New instance of the AdapterView
     */
    protected abstract T createAdapterView(Context context, AttributeSet attrs);

    // ===========================================================
    // Methods
    // ===========================================================

    protected final void resetHeader() {
        state = PULL_TO_REFRESH;
        initializeYsHistory();
        startY = -1;

        if (null != headerLayout) {
            headerLayout.reset();
        }
        if (null != footerLayout) {
            footerLayout.reset();
        }

        smoothScrollTo(0);
    }

    private void init(Context context, AttributeSet attrs) {

        setOrientation(LinearLayout.VERTICAL);

        // Styleables from XML
        final TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.PullToRefresh);
        mode = a.getInteger(R.styleable.PullToRefresh_mode,
                MODE_PULL_DOWN_TO_REFRESH);

        // AdapterView
        // By passing the attrs, we can add ListView/GridView params via XML
        adapterView = this.createAdapterView(context, attrs);
        adapterView.setOnTouchListener(this);
        adapterView.setOnScrollListener(this);
        addView(adapterView, new LinearLayout.LayoutParams(
                LayoutParams.FILL_PARENT, 0, 1.0f));

        // Loading View Strings
        String pullLabel = context
                .getString(R.string.pull_to_refresh_pull_label);
        String refreshingLabel = context
                .getString(R.string.pull_to_refresh_refreshing_label);
        String releaseLabel = context
                .getString(R.string.pull_to_refresh_release_label);

        // Add Loading Views
        if (mode == MODE_PULL_DOWN_TO_REFRESH || mode == MODE_BOTH) {
            headerLayout = new LoadingLayout(context,
                    MODE_PULL_DOWN_TO_REFRESH, releaseLabel, pullLabel,
                    refreshingLabel);
            addView(headerLayout, 0, new LinearLayout.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            measureView(headerLayout);
            headerHeight = headerLayout.getMeasuredHeight();
        }
        if (mode == MODE_PULL_UP_TO_REFRESH || mode == MODE_BOTH) {
            footerLayout = new LoadingLayout(context, MODE_PULL_UP_TO_REFRESH,
                    releaseLabel, pullLabel, refreshingLabel);
            addView(footerLayout, new LinearLayout.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT));
            measureView(footerLayout);
            headerHeight = footerLayout.getMeasuredHeight();
        }

        // Styleables from XML
        if (a.hasValue(R.styleable.PullToRefresh_headerTextColor)) {
            final int color = a.getColor(
                    R.styleable.PullToRefresh_headerTextColor, Color.BLACK);
            if (null != headerLayout) {
                headerLayout.setTextColor(color);
            }
            if (null != footerLayout) {
                footerLayout.setTextColor(color);
            }
        }
        if (a.hasValue(R.styleable.PullToRefresh_headerBackground)) {
            this.setBackgroundResource(a.getResourceId(
                    R.styleable.PullToRefresh_headerBackground, Color.WHITE));
        }
        if (a.hasValue(R.styleable.PullToRefresh_adapterViewBackground)) {
            adapterView.setBackgroundResource(a.getResourceId(
                    R.styleable.PullToRefresh_adapterViewBackground,
                    Color.WHITE));
        }
        a.recycle();

        // Hide Loading Views
        switch (mode) {
        case MODE_BOTH:
            setPadding(getPaddingLeft(), -headerHeight, getPaddingRight(),
                    -headerHeight);
            break;
        case MODE_PULL_UP_TO_REFRESH:
            setPadding(getPaddingLeft(), getPaddingTop(), getPaddingRight(),
                    -headerHeight);
            break;
        case MODE_PULL_DOWN_TO_REFRESH:
        default:
            setPadding(getPaddingLeft(), -headerHeight, getPaddingRight(),
                    getPaddingBottom());
            break;
        }

        // If we're not using MODE_BOTH, then just set currentMode to current
        // mode
        if (mode != MODE_BOTH) {
            currentMode = mode;
        }
    }

    private void measureView(View child) {
        ViewGroup.LayoutParams p = child.getLayoutParams();
        if (p == null) {
            p = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT);
        }

        int childWidthSpec = ViewGroup.getChildMeasureSpec(0, 0 + 0, p.width);
        int lpHeight = p.height;
        int childHeightSpec;
        if (lpHeight > 0) {
            childHeightSpec = MeasureSpec.makeMeasureSpec(lpHeight,
                    MeasureSpec.EXACTLY);
        } else {
            childHeightSpec = MeasureSpec.makeMeasureSpec(0,
                    MeasureSpec.UNSPECIFIED);
        }
        child.measure(childWidthSpec, childHeightSpec);
    }

    private boolean onAdapterViewTouch(View view, MotionEvent event) {

        switch (event.getAction()) {
        case MotionEvent.ACTION_MOVE:
            updateEventStates(event);

            if (isPullingToRefresh() && startY == -1) {
                startY = event.getY();

                // Need to set current Mode if we're using both
                if (mode == MODE_BOTH) {
                    if (isUserDraggingDownwards()) {
                        currentMode = MODE_PULL_DOWN_TO_REFRESH;
                    } else if (isUserDraggingUpwards()) {
                        currentMode = MODE_PULL_UP_TO_REFRESH;
                    }
                }
                return false;
            }

            if (startY != -1 && !adapterView.isPressed()) {
                pullEvent(event, startY);
                return true;
            }
            break;
        case MotionEvent.ACTION_UP:
            initializeYsHistory();
            startY = -1;

            if (state == RELEASE_TO_REFRESH) {
                setRefreshing();
                if (onRefreshListener != null) {
                    onRefreshListener.onRefresh();
                }
            } else {
                smoothScrollTo(0);
            }
            break;
        }

        return false;
    }

    private void pullEvent(MotionEvent event, float firstY) {
        float averageY = average(lastYs);

        final int height;
        switch (currentMode) {
        case MODE_PULL_UP_TO_REFRESH:
            height = (int) Math.max(firstY - averageY, 0);
            setHeaderScroll(height);
            break;
        case MODE_PULL_DOWN_TO_REFRESH:
        default:
            height = (int) Math.max(averageY - firstY, 0);
            setHeaderScroll(-height);
            break;
        }

        if (state == PULL_TO_REFRESH && headerHeight < height) {
            state = RELEASE_TO_REFRESH;
            if (null != headerLayout) {
                headerLayout.releaseToRefresh();
            }
            if (null != footerLayout) {
                footerLayout.releaseToRefresh();
            }
        } else if (state == RELEASE_TO_REFRESH && headerHeight >= height) {
            state = PULL_TO_REFRESH;
            if (null != headerLayout) {
                headerLayout.pullToRefresh();
            }
            if (null != footerLayout) {
                footerLayout.pullToRefresh();
            }
        }
    }

    private void setHeaderScroll(int y) {
        scrollTo(0, y);
    }

    private void setRefreshing() {
        state = REFRESHING;
        if (null != headerLayout) {
            headerLayout.refreshing();
        }
        if (null != footerLayout) {
            footerLayout.refreshing();
        }

        switch (currentMode) {
        case MODE_PULL_DOWN_TO_REFRESH:
            smoothScrollTo(-headerHeight);
            break;
        case MODE_PULL_UP_TO_REFRESH:
            smoothScrollTo(headerHeight);
            break;
        }
    }

    private float average(float[] ysArray) {
        float avg = 0;
        for (int i = 0; i < EVENT_COUNT; i++) {
            avg += ysArray[i];
        }
        return avg / EVENT_COUNT;
    }

    private void initializeYsHistory() {
        for (int i = 0; i < EVENT_COUNT; i++) {
            lastYs[i] = 0;
        }
    }

    private void updateEventStates(MotionEvent event) {
        for (int i = 0, z = event.getHistorySize(); i < z; i++) {
            this.updateEventStates(event.getHistoricalY(i));
        }

        this.updateEventStates(event.getY());
    }

    private void updateEventStates(float y) {
        for (int i = 0; i < EVENT_COUNT - 1; i++) {
            lastYs[i] = lastYs[i + 1];
        }

        lastYs[EVENT_COUNT - 1] = y;
    }

    private boolean isPullingToRefresh() {
        if (isPullToRefreshEnabled && state != REFRESHING) {
            switch (mode) {
            case MODE_PULL_DOWN_TO_REFRESH:
                return isFirstItemVisible() && isUserDraggingDownwards();
            case MODE_PULL_UP_TO_REFRESH:
                return isLastItemVisible() && isUserDraggingUpwards();
            case MODE_BOTH:
                return (isFirstItemVisible() && isUserDraggingDownwards())
                        || (isLastItemVisible() && isUserDraggingUpwards());
            }
        }
        return false;
    }

    private boolean isFirstItemVisible() {
        if (this.adapterView.getCount() == 0) {
            return true;
        } else if (adapterView.getFirstVisiblePosition() == 0) {
            return adapterView.getChildAt(0).getTop() >= adapterView.getTop();
        } else {
            return false;
        }
    }

    private boolean isLastItemVisible() {
        final int count = this.adapterView.getCount();
        if (count == 0) {
            return true;
        } else if (adapterView.getLastVisiblePosition() == count - 1) {
            return true;
        } else {
            return false;
        }
    }

    private boolean isUserDraggingDownwards() {
        return this.isUserDraggingDownwards(0, EVENT_COUNT - 1);
    }

    private boolean isUserDraggingDownwards(int from, int to) {
        return lastYs[from] != 0 && lastYs[to] != 0
                && Math.abs(lastYs[from] - lastYs[to]) > 10
                && lastYs[from] < lastYs[to];
    }

    private boolean isUserDraggingUpwards() {
        return this.isUserDraggingUpwards(0, EVENT_COUNT - 1);
    }

    private boolean isUserDraggingUpwards(int from, int to) {
        return lastYs[from] != 0 && lastYs[to] != 0
                && Math.abs(lastYs[to] - lastYs[from]) > 10
                && lastYs[to] < lastYs[from];
    }

    private void smoothScrollTo(int y) {
        if (null != currentSmoothScrollRunnable) {
            currentSmoothScrollRunnable.stop();
        }

        this.currentSmoothScrollRunnable = new SmoothScrollRunnable(handler,
                getScrollY(), y);
        handler.post(currentSmoothScrollRunnable);
    }

    // ===========================================================
    // Inner and Anonymous Classes
    // ===========================================================

    public static interface OnRefreshListener {

        public void onRefresh();

    }

    public static interface OnLastItemVisibleListener {

        public void onLastItemVisible();

    }

} 
```

希望它能帮助您解决问题。如果您仍然发现任何困难，请告诉我。

# java - 如何在不重启服务的情况下将变量从活动传递到服务

> ID：13858457
> 
> 赞同：0
> 
> 时间：2012-12-13T11:03:00.673
> 
> 标签：java, android

我需要将数据（ArrayList、Array、String 等）从我`Activity`的`Service`. 如果使用`Intent`和`Bundle`必要的服务重新启动。我需要在不重新启动服务的情况下发送数据（如果服务正在运行，则使用他，如果没有运行，则启动他并发送新数据）。

我也需要从`BroadcastReceiver`服务发送相同的数据。

什么是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:12:15.443

为此使用[绑定](http://developer.android.com/guide/components/bound-services.html)服务，它用于服务和其他组件之间的通信。

[例子](http://www.techotopia.com/index.php/Android_Local_Bound_Services_%E2%80%93_A_Worked_Example)

# c# - 动态数据中的多对多关系

> ID：13858460
> 
> 赞同：0
> 
> 时间：2012-12-13T11:03:14.300
> 
> 标签：c#, sql, dynamic-data

我刚刚创建了一个动态数据项目，我的数据库项目中有很多多对多关系和元素。最大的问题是，当我想编辑/插入一个元素时，因为每个多对多关系都在复选框列表中“翻译”。因此，对于我要插入/编辑的实体，它将产生一个高度约为 4000 像素的页面，其中充满了多对多元素。

像这样（假设我们在产品和类别之间有多对多的关系）：

```
 Column                             Elements

 Name                              -textbox here
 Description                       -multi-line text area here

                                   NameOfCat1(checkbox) NameOfCat2(checkbox)
                                   NameOfCat3(checkbox) NameOfCat4(checkbox)
 Categories                        NameOfCat5(checkbox) NameOfCat6(checkbox)
                                   NameOfCat7(checkbox) NameOfCat8(checkbox)
                                   NameOfCat9(checkbox) NameOfCat10(checkbox) 
```

我现在在想的是创建一个名为“GridviewCheckboxes”的自定义字段，并在其中加载我的实体的 GridView，在它们的名称前面有一个复选框（因为 gridview 也有分页）。

我的问题是：

1) 可以按照[本教程](http://www.codedigest.com/Articles/ASPNET/312_Customizing_Fields_in_ASPNet_Dynamic_Data_Website-Part_2.aspx)进行操作 吗？

2）我怎样才能让gridview加载我特定的多对多关系？

因为我有 Products-Categories，但我也可以有 Cars-Garages，我也可以有 Persons-Cities 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:25:25.820

这就是我目前在 ManyToMany_edit.ascx.cs 中的内容。

```
public void Page_Load(object sender, EventArgs e) {
    // Register for the DataSource's updating event
    EntityDataSource ds = (EntityDataSource)this.FindDataSourceControl();

    // This field template is used both for Editing and Inserting
    ds.Updating += new EventHandler<EntityDataSourceChangingEventArgs>(DataSource_UpdatingOrInserting);
    ds.Inserting += new EventHandler<EntityDataSourceChangingEventArgs>(DataSource_UpdatingOrInserting);

}

void DataSource_UpdatingOrInserting(object sender, EntityDataSourceChangingEventArgs e) {
    MetaTable childTable = ChildrenColumn.ChildTable;

    // Comments assume employee/territory for illustration, but the code is generic

    // Get the collection of territories for this employee
    RelatedEnd entityCollection = (RelatedEnd)Column.EntityTypeProperty.GetValue(e.Entity, null);

    // In Edit mode, make sure it's loaded (doesn't make sense in Insert mode)
    if (Mode == DataBoundControlMode.Edit && !entityCollection.IsLoaded) {
        entityCollection.Load();
    }

    // Get an IList from it (i.e. the list of territories for the current employee)
    // REVIEW: we should be using EntityCollection directly, but EF doesn't have a
    // non generic type for it. They will add this in vnext
    IList entityList = ((IListSource)entityCollection).GetList();

    // Go through all the territories (not just those for this employee)
    foreach (object childEntity in childTable.GetQuery(e.Context)) {

        // Check if the employee currently has this territory
        bool isCurrentlyInList = entityList.Contains(childEntity);

        // Find the checkbox for this territory, which gives us the new state
        string pkString = childTable.GetPrimaryKeyString(childEntity);
        ListItem listItem = CheckBoxList1.Items.FindByValue(pkString);
        if (listItem == null)
            continue;

        // If the states differs, make the appropriate add/remove change
        if (listItem.Selected) {
            if (!isCurrentlyInList)
                entityList.Add(childEntity);
        }
        else {
            if (isCurrentlyInList)
                entityList.Remove(childEntity);
        }
    }
}

protected void gvMyGrid_DataBound(object sender, EventArgs e)
{

}

protected void CheckBoxList1_DataBound(object sender, EventArgs e) {
    MetaTable childTable = ChildrenColumn.ChildTable;

    // Comments assume employee/territory for illustration, but the code is generic

    IList entityList = null;
    ObjectContext objectContext = null;

    if (Mode == DataBoundControlMode.Edit) {
        object entity;
        ICustomTypeDescriptor rowDescriptor = Row as ICustomTypeDescriptor;
        if (rowDescriptor != null) {
            // Get the real entity from the wrapper
            entity = rowDescriptor.GetPropertyOwner(null);
        } else {
            entity = Row;
        }

        // Get the collection of territories for this employee and make sure it's loaded
        RelatedEnd entityCollection = Column.EntityTypeProperty.GetValue(entity, null) as RelatedEnd;
        if (entityCollection == null) {
            throw new InvalidOperationException(String.Format("The ManyToMany template does not support the collection type of the '{0}' column on the '{1}' table.", Column.Name, Table.Name));
        }
        if (!entityCollection.IsLoaded) {
            entityCollection.Load();
        }

        // Get an IList from it (i.e. the list of territories for the current employee)
        // REVIEW: we should be using EntityCollection directly, but EF doesn't have a
        // non generic type for it. They will add this in vnext
        entityList = ((IListSource)entityCollection).GetList();

        // Get the current ObjectContext
        // REVIEW: this is quite a dirty way of doing this. Look for better alternative
        ObjectQuery objectQuery = (ObjectQuery)entityCollection.GetType().GetMethod(
            "CreateSourceQuery").Invoke(entityCollection, null);
        objectContext = objectQuery.Context;
    }

    // Go through all the territories (not just those for this employee)
    foreach (object childEntity in childTable.GetQuery(objectContext)) {
        MetaTable actualTable = MetaTable.GetTable(childEntity.GetType());
        // Create a checkbox for it
        ListItem listItem = new ListItem(
            actualTable.GetDisplayString(childEntity),
            actualTable.GetPrimaryKeyString(childEntity));

        // Make it selected if the current employee has that territory
        if (Mode == DataBoundControlMode.Edit) {
            listItem.Selected = entityList.Contains(childEntity);
        }

        CheckBoxList1.Items.Add(listItem);
    }
}

public override Control DataControl {
    get {
        return gvMyGrid;
    }
} 
```

# entity-framework - EF5 Code First：尽管使用了代理，但新创建的实体的相关实体不会延迟加载

> ID：13858461
> 
> 赞同：1
> 
> 时间：2012-12-13T11:03:15.540
> 
> 标签：entity-framework, lazy-loading, code-first, poco

考虑以下代码段：

```
// this.ctx is an instance of our EF Code First DB Context.
// the entity in this example is called "Something", and the DB set "Somethings".
// there is also another entity type called "SomethingElse".
// the Something entity is declared like this:
// 
// public class Something {
//   public int Foo { get; set; }
//   public string Bar { get; set; }
// 
//   public virtual IList<SomethingElse> RelatedStuff { get; set; }
// }
// 

// Create is used to ensure a proxy is created.    
var something = this.ctx.Somethings.Create();

// The new entity is added
this.ctx.Somethings.Add(something);    

// lazy loading: ON
System.Diagnostics.Debug.Assert(this.ctx.Configuration.LazyLoadingEnabled);    

// the entity is really in "added" state
System.Diagnostics.Debug.Assert(this.ctx.Entry(something).State == EntityState.Added);

// *** lazy loading does not work! ***
System.Diagnostics.Debug.Assert(something.RelatedStuff == null);

// note: if stepping through this with the debugger, I can confirm that "something" is
//       of the DynamicProxy type, not a plain "Something" POCO.

// but, if we change the state manually...
this.ctx.Entry(something).State = EntityState.Unchanged;

// *** it works!! ***    (doing a this.ctx.SaveChanges(), actually, also makes this work)
System.Diagnostics.Debug.Assert(something.RelatedStuff!= null); 
```

有人可以向我解释为什么新创建的 POCO 上的延迟加载不起作用，虽然延迟加载是 ON 并且属性是虚拟的，并且在更改状态时，神奇地开始工作？如果我没记错的话，即使对于瞬态对象，延迟加载也应该有效，不是吗？

干杯，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:02:57.897

似乎在实体框架 5 中默认禁用延迟加载功能，我在 web 上发现没有任何用处，但在定义“DbContext”对象后，我发现了在代码中明确设置此功能的问题：

```
protected DbContext Context;
protected IDbSet<T> DbSet;

public Repository(DbContext context)
{
     Context = context;
     DbSet = Context.Set<T>();

     Context.Configuration.LazyLoadingEnabled = true;
} 
```

我希望这能够帮到你。

# xslt-2.0 - 使用 XSLT 将 XML 转换为 HTML

> ID：13858462
> 
> 赞同：1
> 
> 时间：2012-12-13T11:03:20.633
> 
> 标签：xslt-2.0

我有一个 XML 代码

```
<ENREF>12</ENREF> 
```

我想使用 XSLT 将其转换为

```
<small><sup><a id="12" href="#fn12">12</a></sup></small> 
```

但这不符合我正在尝试的标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:22:44.413

假设这个 XML：

```
<?xml-stylesheet href="hello.xsl" type="text/xsl"?>
<doc>
    <ENREF>12</ENREF>
</doc> 
```

而这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="ENREF">
    <small>
      <sup>
        <xsl:element name="a">
          <xsl:attribute name="id">enref-<xsl:value-of select="." /></xsl:attribute>
          <xsl:attribute name="href">#fn<xsl:value-of select="." /></xsl:attribute>
          <xsl:value-of select="." />
        </xsl:element>
      </sup>
    </small>
  </xsl:template>
</xsl:stylesheet> 
```

您将获得以下输出：

```
<small>
   <sup>
     <a id="enref-12" href="#fn12">12</a>
   </sup>
</small> 
```

注意：我把“enref-”放在“12”前面，因为 HTML id 不能以数字开头。

# php - array_push 多维数组

> ID：13858467
> 
> 赞同：0
> 
> 时间：2012-12-13T11:03:54.583
> 
> 标签：php, arrays, multidimensional-array

我有以下代码行

```
$return_array = array(
            $count_answers => array(
                    "name" => $domain,
                    "type" => $type,
                    "class" => $class,
                    "ttl" =>$ttl,
                    "data_lenght" => $data_l
                    )
     ); 
```

我想`preference`在数据长度之后添加以下代码

```
array_push($return_array[$count_answers]['preference'], $preference); 
```

> 警告：array_push() 期望参数 1 是数组，在第 367 行的 \functions\functions.php 中给出了 null

为什么我的第一个参数不是数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:10:30.933

`$return_array`因为索引中没有元素`'preference'`。你可以追加`$preference`这个

```
$return_array[$count_answers]['preference'][] = $preference; 
```

或者先用一个空数组初始化

```
$return_array[$count_answers]['preference'] = array(); 
```

如果您不想添加一*组*首选项，而只想添加一个元素`'preference'`，请将其附加

```
$return_array[$count_answers]['preference'] = $preference; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:09:04.033

不需要使用`array_push`，直接添加项目即可。

```
$return_array[$count_answers]['preference'] = $preference; 
```

`array_push`不允许字符串作为索引，所以你`$preference`会在`$return_array[$count_answers][0]`

在您的第 367 行，您没有提供数组，而是当前数组中的一个空元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:10:00.990

您应该在下面更正您的代码。

```
$return_array = array(
        $count_answers => array(
                "name" => $domain,
                "type" => $type,
                "class" => $class,
                "ttl" =>$ttl,
                "data_lenght" => $data_l
                )
 );

$preference['preference'] = "kkk"; 
```

只是改变

```
$return_array[$count_answers]['preference'] 
```

和

```
$return_array[$count_answers] 
```

在 array_push 中，如下所示

```
array_push($return_array[$count_answers], $preference); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:22:17.727

将 array_push() 与多维数组一起使用是矛盾的。

PHP 数组是分层的——不是多维的。并且 array_push 添加具有指定值的编号元素。[此外，手册](http://php.net/manual/en/function.array-push.php)中清楚地解释了array_push() 的用法。

> 我想使用以下代码在数据长度后添加“首选项”

为什么要使用该代码来执行此操作？它失败了，原因应该很明显。

您应该使用的代码是：

```
$return_array[$count_answers]['preference']=$preference; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T03:18:55.987

```
foreach($arr_data_arrays as $key=>$line_arr) { // do an array looping at first

        $new_arr = array(); // create an array to be included on the second position
        $new_arr[0] = $line_arr;

        array_push($arr_data_arrays[$key][1],$new_arr);//include the whole array on the sec position
}; 
```

就这么简单！

# java - GWT：在函数中包含未定义的类参数

> ID：13858469
> 
> 赞同：0
> 
> 时间：2012-12-13T11:04:10.690
> 
> 标签：java, function, gwt, parameters

我的 GWT 项目中有这个功能：

```
private InputElement getInputElement(int rowIndex, int columnIndex, 
CellTable<MyClassA> cellTable) {
        InputElement input = null;
        if (isColumnEditable(columnIndex)) {
            input = (InputElement) cellTable.getRowElement(rowIndex).getCells().getItem(columnIndex).getFirstChild().getFirstChild();
        }  
        return input;
    } 
```

如果想在最后一个参数为 时重用这个函数`CellTable<MyClassB>`，因为其余的代码完全一样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:09:07.213

您需要创建一个接口 MyClassInterface 并在两个类中实现它。

```
public interface MyClassInterface {

}

public class MyClassA implements MyClassInterface {
   ...
}
public class MyClassB implements MyClassInterface {
   ...
}
private InputElement getInputElement(int rowIndex, int columnIndex, 
CellTable<? extends MyClassInterface> cellTable) {
        InputElement input = null;
        if (isColumnEditable(columnIndex)) {
            input = (InputElement) cellTable.getRowElement(rowIndex).getCells().getItem(columnIndex).getFirstChild().getFirstChild();
        }  
        return input;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:36:09.893

您可以编写以下代码 -

> `public interface MyClassInterface { ... }`

`public class MyClassA implements MyClassInterface { ... }`

`public class MyClassB implements MyClassInterface { ... }`

```
private <T extends MyClassInterface> InputElement getInputElement(int rowIndex, int columnIndex, CellTable<T> cellTable)                    
{             
    InputElement input = null;              
    if (isColumnEditable(columnIndex))  
    {  
        input = (InputElement)  cellTable.getRowElement(rowIndex).getCells().getItem(columnIndex).getFirstChild().getFirstChild();  
    }  
    return input; 
```

}

# r - 如何更改 R 中的矩阵列类型

> ID：13858471
> 
> 赞同：6
> 
> 时间：2012-12-13T11:04:28.253
> 
> 标签：r, matrix

我有一个矩阵，我想将第五列类型从字符更改为数字，但我不能。我试过这个：

```
test1[,5] <- as.numeric(test1[,5]) 
```

但是列类又是字符而不是数字。我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T11:41:32.920

就像@Marius 所说，矩阵只能保存一种数据类型。您可以将矩阵转换为 data.frame，因为 data.frames 可以为每个列保存不同的数据类型。相互转换的函数是`as.data.frame`和`as.matrix`。然后，您就可以将发布的列转换代码应用到 data.frame。

但是，您在评论中提到，您的最终目标是根据强制列的值重新排序矩阵。您不需要在重新排序矩阵之前就地强制列，您可以通过以下方式即时完成所有操作：

```
test1[order(as.numeric(test1[, 5])), ] 
```

# c# - 如何使用访问器来设置这个变量？

> ID：13858479
> 
> 赞同：0
> 
> 时间：2012-12-13T11:04:49.333
> 
> 标签：c#, accessor

我什至应该使用访问器吗？如果没有，我该怎么做？

我正在尝试在我的游戏中加载纹理`LoadContent()`，然后尝试将其传递给，`Update()`以便我可以在另一个类中将其用于碰撞检测目的。

这是我的代码：

游戏1.cs

```
public class GetTileType
{
    public Texture2D dirt;
    public Texture2D Dirt
    {
        get
        {
            return dirt;
        }

        set
        {
            dirt = value;
        }
    }
}

public class Main : Game
{
GetTileType getTileType = new GetTileType();

protected override void LoadContent()
{

    getTileType.Dirt = Content.Load<Texture2D>("Dirt");
}

protected override void Update(GameTime gameTime)
{
    Texture2D dirt = getTileType.Dirt;

    player.GetTileType(dirt);

    base.Update(gameTime);
} 
```

Player.cs（暂时保存碰撞信息）

```
public void GetTileType(Texture2D groundTexture)
{
    Tile tile = (Tile)Main.currentLevel.GetTile(0, 0);

    Texture2D texture = tile.Texture;

    if (texture == groundTexture)
    {
        // Write code to handle what to do if the player tries to enter the ground.
    }
}
} 
```

中还有更多内容`LoadContent()`，但与此问题无关。对`Update()`. 在调试中，`player.GetTileType(dirt);`显示为 null。如果我没记错的话，它应该是“污垢”。

我觉得我做这一切都错了，但我想不出任何其他方法来做到这一点。我尝试过的其他一切都变成了死胡同。

当我开始游戏时，它会加载，然后就挂起。然后我必须从任务管理器中停止它。

谁能告诉我我做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:10:08.980

您的代码中的问题是您总是在创建新的`GetTileType`.

在`LoadContent`您创建一个实例时 - 我们称之为 A - 并`Dirt`在该实例上设置属性。
但是您不会将该实例保存在任何地方，在方法完成后， A 超出范围并最终将被垃圾收集。

在`Update`您创建一个新实例 - B - 并从中检索`Dirt`属性的值。
因为这是一个新创建的实例，所以这是`null`.

# c# - 如何使用c#在TreeView中的两个节点之间绘制一条线（线作为链接）

> ID：13858483
> 
> 赞同：3
> 
> 时间：2012-12-13T11:04:55.473
> 
> 标签：c#, .net, c#-4.0

我想在 Treeview Control.For 中的两个节点之间画一条线

![在此处输入图像描述](../Images/f15440f521ffc81e4795d23edf42de81.png)

上图显示了两个树视图节点**Image Source**和**CogPMAlignTool**。现在我想在两个节点之间画一条线，如下图所示（这里我通过双击图像源加载，之后我将该图像作为 CogPMAlignTool 工具的输入).有没有办法做到这一点？

![在此处输入图像描述](../Images/68dcc76ede2e3b9f891b09ccec85aea8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:13:27.433

尽管大多数控件都允许[ownerdrawing](http://msdn.microsoft.com/en-us/library/yyfab68k.aspx)，但这对您没有多大帮助，因为 ownerdrawing 往往会要求您绘制单个项目。

相反，您需要[覆盖控件的 OnPaint() 方法](http://msdn.microsoft.com/en-us/library/cksxshce.aspx)，并在控件自行绘制后在顶部绘制线条。

# internet-explorer-8 - IE8 自动使用“IE8 Compat View”浏览器模式和“IE7 Standards”文档模式

> ID：13858491
> 
> 赞同：2
> 
> 时间：2012-12-13T11:05:20.793
> 
> 标签：internet-explorer-8, html5boilerplate, ie8-compatibility-mode, ie8-browser-mode

我建立了一个基于 HTML5 Boilerplate 的网站。除了将我的自定义代码添加到 HTML 中的正文部分之外，我没有更改样板文件中的任何内容。我将 IE8 定位为要支持的最低 IE 版本。

问题是当我在 IE8 上打开我的页面时，它会自动使用“IE8 Compat View”浏览器模式和“IE7 标准”文档模式，而不是对浏览器和文档模式都使用 IE8 标准。

任何人都知道为什么会发生这种情况以及如何强制它使用正确的模式而不需要用户更改 IE8 中的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:05:20.793

您可能正在本地网络上测试该站点。在这种情况下，IE8 将默认使用问题中描述的模式。对于来自本地网络或 Intranet 的站点，IE8 具有不同的默认行为。

如果您正在测试的页面托管在本地网络之外，那么 IE8 将使用正确的标准模式。

如果需要在本地测试网站，只需使用 IE8 的开发者工具切换到 IE8 标准浏览器模式即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T11:07:42.833

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

使用上述元标记强制 IE 使用它可用的最新渲染引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:23:20.550

chocobanana 描述的行为也在[此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9)进行了描述，请参阅条目“IE9 兼容性视图和 Intranet 站点”。

如果您不想一直在开发人员工具中手动切换浏览器/文档模式，也不想包含 X-UA-Compatible-Tag，您可以通过取消选中相应的选项来撤消始终以兼容模式呈现 Intranet 站点的默认设置工具 > 兼容性视图设置中的复选框。

我花了将近一天的时间才弄清楚为什么我的本地版本在一个 IE8 选项卡中看起来不错，而另一个选项卡中*同一*页面的 Intranet 服务器版本在布局方面都搞砸了……*叹气*

无论如何，这仅适用于您的机器，因此为了强制您的客户端不进入兼容模式，您必须设置相应的元标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:27:12.930

请检查以下事项：

1）使用“查看源代码”，确保您正在使用

```
<!DOCTYPE html> 
```

在您的页面顶部。

2) 如果该行出现在顶部，请确保该行之前没有空格或换行符。发生在我身上的是，一些 PHP 在 ?> 之后有一个额外的新行，它被打印到屏幕上，并导致 doctype 不作为文档中的第一件事出现。

# node.js - 检查rabbit mq和node js之间的连接是否关闭

> ID：13858492
> 
> 赞同：0
> 
> 时间：2012-12-13T11:05:21.683
> 
> 标签：node.js, rabbitmq, amqp

我可以将 rabbit mq exchange 与我的`node.js server`. 但是，如果我从 Rabbit MQ UI 手动删除交换，那么有什么方法可以检查`node.js`交换是否被删除或`connection`关闭。

因为在同一交易所发布消息时，`node.js`崩溃并且我无法`exception`使用`try catch`. 我想`node.js`在处理后重新创建交换`exception`。

```
exchange.publish(ROUTING_KEY, msg);  //here exchange is already deleted so throwing below error 

    Error: NOT_FOUND - no exchange 'lutron.poc.incoming' in vhost '/'
    at Exchange._onMethod (F:\workspaces\LutronHeroku_GITnew\lutroncloudserverco
nnector\lutroncloudserverconnector\node_modules\amqp\amqp.js:2091:15)
    at Exchange.Channel._onChannelMethod (F:\workspaces\LutronHeroku_GITnew\lutr
oncloudserverconnector\lutroncloudserverconnector\node_modules\amqp\amqp.js:1533
:14)
    at Connection._onMethod (F:\workspaces\LutronHeroku_GITnew\lutroncloudserver
connector\lutroncloudserverconnector\node_modules\amqp\amqp.js:1056:28)
    at AMQPParser.self.addListener.parser.onMethod (F:\workspaces\LutronHeroku_G
ITnew\lutroncloudserverconnector\lutroncloudserverconnector\node_modules\amqp\am
qp.js:895:12)
    at AMQPParser._parseMethodFrame (F:\workspaces\LutronHeroku_GITnew\lutronclo
udserverconnector\lutroncloudserverconnector\node_modules\amqp\amqp.js:449:10)
    at frameEnd (F:\workspaces\LutronHeroku_GITnew\lutroncloudserverconnector\lu
troncloudserverconnector\node_modules\amqp\amqp.js:190:16)
    at frame (F:\workspaces\LutronHeroku_GITnew\lutroncloudserverconnector\lutro
ncloudserverconnector\node_modules\amqp\amqp.js:175:14)
    at AMQPParser.header [as parse] (F:\workspaces\LutronHeroku_GITnew\lutronclo
udserverconnector\lutroncloudserverconnector\node_modules\amqp\amqp.js:162:14)
    at AMQPParser.execute (F:\workspaces\LutronHeroku_GITnew\lutroncloudserverco
nnector\lutroncloudserverconnector\node_modules\amqp\amqp.js:234:21)
    at Connection.<anonymous> (F:\workspaces\LutronHeroku_GITnew\lutroncloudserv
erconnector\lutroncloudserverconnector\node_modules\amqp\amqp.js:932:12)
Server: worker 4028  died; signal null 
```

有没有办法抓住这个`exception`？

# ruby-on-rails - Ruby：从没有 Rails 的 gem 访问 rake 任务

> ID：13858495
> 
> 赞同：22
> 
> 时间：2012-12-13T11:05:29.437
> 
> 标签：ruby-on-rails, ruby, rake, task

我知道 Rake 任务可以在 Ruby gem 中的许多地方定义：

*   在 Rakefile 中
*   里面`tasks/*.rake`
*   里面`lib/tasks/*.rake`

我已经读过，当要在 gem 本身上执行任务时，应该使用前两个。当希望公开任务时，似乎应该选择第三个选项。

有许多在线教程演示了使用 Rails 从 gem 加载 Rake 任务的各种方法，即利用`Rails::RailTie`.

但是，我想找到一种在不需要 Rails 的情况下在另一个 gem 中使用依赖 gem 任务的方法。

有一个简单的解决方案吗？有人会善意地描述正确的方法，或概述哪些方法是可行的吗？

### 更新

我尝试创建一个文件`bin/my-gem`以在系统上用于从`my-gem`. 我在里面放了以下内容；

```
#!/usr/bin/env ruby
require 'rubygems'
require 'rake'
task=ARGV[0]
spec = Gem::Specification.find_by_name('dsi_core')
Dir["#{spec.gem_dir}/lib/tasks/*.rake"].each {|file| puts file and Rake::load_rakefile(file)}
Rake::Task.clear # Avoid tasks being loaded several times in dev mode
Rake::Task[task].reenable # Support re-execution of a task.
Rake::Task[task].invoke 
```

部分内容基于[此 SO 帖子](https://stackoverflow.com/questions/1170148/run-rake-task-in-controller)。

可悲的是，我做错了什么，因为在安装 gem 然后`my-gem mytask`使用`mytask`定义运行时，`lib/test.rake`输出如下：

```
/var/lib/gems/1.8/gems/rake-0.9.2/lib/rake/task_manager.rb:49:in `[]': Don't know how to build task 'mytest' (RuntimeError)
    from /var/lib/gems/1.8/gems/rake-0.9.2/lib/rake/task.rb:298:in `[]'
    from /var/lib/gems/1.8/gems/my_gem-0.0.1/bin/my_gem:8
    from /usr/local/bin/my_gem:19:in `load'
    from /usr/local/bin/my_gem:19 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T12:43:43.910

[我在这里](https://stackoverflow.com/questions/6051773/how-to-call-rake-tasks-that-are-defined-in-the-standard-rakefile-from-an-other-r)找到了解决方案的主体。我已经对其进行了修改，以支持带有参数的任务规范，并添加了对`cucumber`.

所以..

在您的 gem 中创建`bin/my_gem`

将本文底部的脚本粘贴到其中。有关示例用法，请参见注释。

你的`rake`任务必须在你的`Rakefile`.

或者，添加您的任务，例如，`lib/tasks/*.rake`然后将以下内容添加到您的`Rakefile`：

```
Dir.glob('lib/tasks/*.rake').each {|r| import r} 
```

这是秘制酱汁：

```
#!/usr/bin/env ruby

# Run rake tasks and cucumber features
# from my_gem once it's installed.
#
# Example:
#
#   my_gem rake some-task
#   my_gem rake some-task[args]
#   my_gem cucumber feature1 feature2
#
# Note: cucumber features have '.feature' appended automatically,
#       no need for you to do it ;)
#
# Author:: N David Brown
gem_dir = File.expand_path("..",File.dirname(__FILE__))
$LOAD_PATH.unshift gem_dir# Look in gem directory for resources first.
exec_type = ARGV[0]
if exec_type == 'rake' then
    require 'rake'
    require 'pp'
    pwd=Dir.pwd
    Dir.chdir(gem_dir) # We'll load rakefile from the gem's dir.
    Rake.application.init
    Rake.application.load_rakefile
    Dir.chdir(pwd) # Revert to original pwd for any path args passed to task.
    Rake.application.invoke_task(ARGV[1])
elsif exec_type == 'cucumber' then
    require 'cucumber'
    features = ARGV[1,].map{|feature| "#{gem_dir}/features/#{feature}.feature"}.join(' ')
    runtime = Cucumber::Runtime.new 
    runtime.load_programming_language('rb') 
    pwd=Dir.pwd
    Dir.chdir(gem_dir) # We'll load features from the gem's dir.
    Cucumber::Cli::Main.new([features]).execute!(runtime)
    Dir.chdir(pwd) # Revert to original pwd for convenience.
end 
```

答对了！:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-22T00:01:45.773

这篇文章给了我一些提示，但也许对于其他遇到这个问题的人来说，我在一些依赖问题上苦苦挣扎。我终于想出了如何使用 bin/binstub 而不需要 rakefile 来做到这一点。 [我的解决方案发布在另一个 SO question 上。](https://stackoverflow.com/a/18361986/2363935)

# php - 存储在mysql数据库中的经度和纬度数据类型？

> ID：13858501
> 
> 赞同：8
> 
> 时间：2012-12-13T11:05:53.110
> 
> 标签：php, mysql

我正在 mysql 中设计一个表，它将存储用户列表和谷歌地图坐标（经度和纬度）。

我需要两个字段，还是可以用 1 个字段完成？

我不知道我用的是什么？我使用浮点数或小数或几何或有新的数据类型？选择最佳数据类型的优缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:21:31.010

您可以在 mysql 中使用[空间扩展，数据类型为](http://dev.mysql.com/doc/refman/5.1/en/spatial-extensions.html)[POINT](http://dev.mysql.com/doc/refman/5.1/en/gis-class-point.html)

搜索速度会更快，地理操作也有很多功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T11:08:35.583

此博客描述了一种正确且快速的方法：

[http://www.rooftopsolutions.nl/blog/229](http://www.rooftopsolutions.nl/blog/229)

```
CREATE TABLE geo (
  longitude DOUBLE,
  latitude DOUBLE,
  idxlong SMALLINT,
  idxlat SMALLINT,
  INDEX (idxlong,idxlat);
); 
```

第 2 部分包含一个基准：[http ://www.rooftopsolutions.nl/blog/230](http://www.rooftopsolutions.nl/blog/230)

```
method  small   medium  large
plain select        1.73s
index on latitude       0.72s
using point field       9.52s
using point field + spatial index   0.00s   0.73s   18.82s
using morton number     0.78s
index on morton 0.00s   0.65s   3.23s 
```

在实践中也是第 3 部分：[http ://www.rooftopsolutions.nl/blog/231](http://www.rooftopsolutions.nl/blog/231)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T11:08:26.790

您可以使用：

*   一对`DECIMAL(11, 8)`（小数点前 3 位和小数点后 8 位）
*   一对`FLOAT`

请注意，十进制列可以存储精确值，而浮点列存储该值的近似值。例如`1.999999`，将存储为`1.999999`十进制列，但存储`2.0`在浮点列中。

# iphone - 如何在 iOs 中使用 CLGeoCoder 使用邮政编码/邮政编码获取纬度经度？

> ID：13858503
> 
> 赞同：6
> 
> 时间：2012-12-13T11:06:00.247
> 
> 标签：iphone, objective-c, ios, location, clgeocoder

我是 Objective-C 编程的新手。

我想按邮政编码/邮政编码在 MapView 中显示位置。为此，我必须找到纬度和经度。

我已经通过将邮政编码传递给网络服务并获得所有信息的响应来参考许多解决方案。

但我不想使用任何网络服务。我想通过使用**CLGeocoder来做到这一点**

我正在使用下面的代码来查找纬度经度。

```
-(IBAction)fetchCoordinates:(id)sender {

  if (!self.geocoder) {
    self.geocoder = [[CLGeocoder alloc] init];
  }

  NSString *address = [NSString stringWithFormat:@"%@ %@ %@", self.streetField.text, self.cityField.text, self.countryField.text];

  [self.geocoder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {
    NSLog(@"mark :: %@", placemarks);
    if ([placemarks count] > 0) {
        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        CLLocation *location = placemark.location;
        CLLocationCoordinate2D coordinate = location.coordinate;

        self.coordinatesLabel.text = [NSString stringWithFormat:@"%f, %f", coordinate.latitude, coordinate.longitude];

        if ([placemark.areasOfInterest count] > 0) {
            self.nameLabel.text = [placemark.areasOfInterest objectAtIndex:0];

        } else {
            self.nameLabel.text = @"No Area of Interest Was Found";
        }
     }
  }];
} 
```

如果我传递城市名称、国家名称或街道名称，则此代码有效，但传递邮政编码时无效。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:17:40.927

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder geocodeAddressString:theSearchBar.text completionHandler:^(NSArray *placemarks, NSError *error) {
   //Error checking

   CLPlacemark *placemark = [placemarks objectAtIndex:0];
   MKCoordinateRegion region;
   region.center.latitude = placemark.region.center.latitude;
   region.center.longitude = placemark.region.center.longitude;
   MKCoordinateSpan span;
   double radius = placemark.region.radius / 1000; // convert to km

   //NSLog(@"Radius is %f", radius);
   span.latitudeDelta = radius / 112.0;

   region.span = span;
   mapView.showsUserLocation=TRUE;
   mapView.delegate = self;
   DisplayMap *ann = [[[DisplayMap alloc] init] autorelease]; 
   ann.title =theSearchBar.text; 
   ann.coordinate = region.center;
   ann.takeid = 0;
   [mapView addAnnotation:ann];

   [mapView setRegion:region animated:YES];
 }];

[theSearchBar resignFirstResponder];

}

-(void)GetCityName {

 CLGeocoder *geocoder = [[[CLGeocoder alloc] init] autorelease];

 CLLocation *currentLocation = [[[CLLocation alloc] initWithLatitude:dblLatitude longitude:dblLongitude] autorelease];

 [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
   if ([placemarks count] > 0) {
       CLPlacemark *placemark = [placemarks objectAtIndex:0];
       //addressString1 = [placemark locality];
       addressString1 = [placemark thoroughfare];
       addressString1 = [addressString1 stringByAppendingString:[NSString stringWithFormatAngry" %@",[placemark postalCode]]];//enter here your postal code...

       //NSLog(@"Address is : %@",addressString1);
       LblLocation.text = addressString1;

   }
   else {

   }
  }];

 } 
```

请让我知道它是否有效...

快乐编码！！！

# path - 查找 PATH 中文件的确切位置

> ID：13858504
> 
> 赞同：1
> 
> 时间：2012-12-13T11:06:03.863
> 
> 标签：path, directory, dos

是否有一个简单的命令可以找出可以从任何地方执行的文件的确切位置，因为它是 PATH？搜索路径中设置的所有目录以找到它.. 效率不高，特别是如果路径包含很多目录并且它们都是可能的候选者...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:21:12.077

也许：

> WHERE [/R dir] [/Q] [/F] [/T] 模式...
> 
> 说明：显示与搜索模式匹配的文件的位置。默认情况下，搜索是沿着当前目录和 PATH 环境变量指定的路径进行的。

另请参阅上一个 SO 问题[Windows 命令行上是否有相当于“which”的内容？](https://stackoverflow.com/q/304319/318716).

# javascript - 使用 javascript 在服务器中下载文件

> ID：13858508
> 
> 赞同：1
> 
> 时间：2012-12-13T11:06:14.130
> 
> 标签：javascript, asp.net, ftp, download

我有一个 ASP.NET Web 应用程序。在某个步骤中，我创建了一个文本文件并将其存储在服务器上的文件夹中。我在服务器代码上执行此操作。但是在完成创建文件之后，我想将该文件下载到客户端计算机。这甚至可能吗？我知道 John Culviner 的 jquery 文件下载插件。但在查看之后，我了解到要下载的文件必须位于网站本身所在的同一目录中 - 例如 www.mywebsite.com/downloads/text1.txt。但我想将创建的文件放入其他目录。我觉得 ftp 会在这里发挥作用，但不知道如何。你能指导我一点吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:10:01.577

您无法从 javascript 启动 FTP 会话，但您可以创建一个页面来下载此文件并发出正确的标题，让浏览器知道应该下载而不是显示该文件。然后在您的 javascript 中，只需将页面重定向到此下载 url 并下载文件，但不会更改页面视图，它只会触发浏览器中的下载对话框。

标题至少应包括附件的内容配置：

```
Response.AddHeader("content-disposition:", "attachment;filename=...") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:13:15.467

您需要的是在后端代码中使用 Response.TransmitFile 方法而不是 javascript。

```
 Dim FileLocation As String = "C:/File.csv"
            Response.ContentType = "application/csv"
            Response.AppendHeader("Content-Disposition", "attachment;filename=" + FileLocation )
            Response.TransmitFile(FileLocation )
            Response.End() 
```

因此，一旦您创建了文件，只需使用该代码，您就会自动（它会询问他们是否愿意）在客户端计算机上开始下载该文件的文件。

# python - REST api 中的普通（非 HTML）错误页面

> ID：13858509
> 
> 赞同：3
> 
> 时间：2012-12-13T11:06:26.667
> 
> 标签：python, rest, flask

我正在用 Flask 编写一个简单的 REST 服务。当我的代码中发生异常时，我会在浏览器中收到一条很好的错误消息和一个交互式调试器。但是，如果我从命令行（例如使用 curl）或在我的单元测试中调用该服务，并且出现故障，我仍然会收到格式化的 (HTML) 错误消息。我记得有时我会收到纯文本消息（基本上只是 Python 错误 + 回溯），而且我不知道 Flask 是如何决定提供纯文本或 HTML 的。

如何使 Flask 在没有浏览器的情况下返回普通（非交互式、非 HTML）错误消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T12:54:46.833

要在生产模式下处理异常，请为 500 状态代码注册错误处理程序。你可以从中返回任何你想要的东西。这是一个将异常本身作为纯文本返回的示例：

```
@app.errorhandler(500)
def error_500(exception):
    return str(exception), 500, {'Content-Type': 'text/plain'} 
```

如果您正在编写的是 API，则返回 JSON 编码的数据`application/json`可能更合适。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T11:13:46.700

设置`app.debug = False`关闭花哨的错误报告。该[文档](http://flask.pocoo.org/docs/quickstart/#debug-mode)有更多关于调试模式的信息。

# http - 一段时间后Jboss 7请求超时

> ID：13858522
> 
> 赞同：0
> 
> 时间：2012-12-13T11:07:35.087
> 
> 标签：http, jboss, jboss7.x

我的一项服务每隔一分钟检查一次我的 Jboss7，方法是在

```
http://localhost:8080/check.htm. 
```

我为世界其他地方配置了 apache 的 Jboss7。问题是，在启动几个小时后，它停止响应我的服务，然后服务通过终止进程重新启动 jboss。

浏览日志并进行了所有研究。但没有头绪。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:47:31.897

如果您使用的是休眠，那么当您的 jboss 空闲超过 8 小时时会出现此问题。

如果是这样，那么

要解决这个问题，您需要在 hibernate.cfg.xml 中配置 c3p0 属性

供参考和示例[这里是配置](http://www.mkyong.com/hibernate/how-to-configure-the-c3p0-connection-pool-in-hibernate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T12:58:37.833

是的，所以我想这是 Jboss 中的一个错误。我不得不禁用 Jboss 7 的 JSP 标记池功能。这会导致内存泄漏，并且可以通过遵循 GC 日志中的模式轻松跟踪。

# android - 如何确定应用程序正在从服务运行

> ID：13858526
> 
> 赞同：4
> 
> 时间：2012-12-13T11:07:56.890
> 
> 标签：android, android-intent, service, intentservice

剧情是这样的……

1.  应用程序已打开
2.  用户单击启动服务的按钮。
3.  用户按下主页键，然后长按主页键并从任务列表中清除应用程序。
4.  服务继续运行，尽管应用程序已关闭。

如何从正在运行的服务中确定该应用程序是否已被杀死？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:37:27.837

我认为这是您正在寻找的：

```
 private boolean isAppRunning() {
    ActivityManager manager = (ActivityManager) mContext.getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningTaskInfo task : manager.getRunningTasks(Integer.MAX_VALUE)) {
        if ("com.example.YourLauncherActivityClassFullName".equals(task.baseActivity.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

您唯一需要提供的是应用程序的完整启动器活动类名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:44:23.377

首先，您应该启动一项服务，该服务应该关注您的活动是否正在运行的特定时间。为此，您可以在一段时间后使用警报管理器进行检查。

要检查您的活动是否正在运行，您应该使用，

```
ArrayList<String> runningactivities = new ArrayList<String>();

    ActivityManager activityManager = (ActivityManager)getBaseContext().getSystemService (Context.ACTIVITY_SERVICE); 

    List<RunningTaskInfo> services = activityManager.getRunningTasks(Integer.MAX_VALUE); 

        for (int i1 = 0; i1 < services.size(); i1++) { 
            runningactivities.add(0,services.get(i1).topActivity.toString());  
        } 

        if(runningactivities.contains("ComponentInfo{com.app/com.app.main.MyActivity}")==true){
            Toast.makeText(getBaseContext(),"Activity is in foreground, active",1000).show(); 

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:47:24.493

在您的主要（第一个）活动中：

公共静态布尔isRunning；

@覆盖

```
public void onCreate(Bundle savedInstanceState) {

    isRunning = true;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ...
}
@Override

public void finish() {
    isRunning = false;
    super.finish();
} 
```

检查服务中的 isRunning 标志。

# android - 将图像 JSON 加载到列表视图

> ID：13858530
> 
> 赞同：-2
> 
> 时间：2012-12-13T11:08:25.670
> 
> 标签：android, json, web-services, listview

我有一个包含图像和图像名称的列表视图，我正在从 JSON Web 服务加载数据并将其显示在列表视图中。

```
public class AndroidJSONParsingActivity extends ListActivity {

    // url to make request
    private static String url = "my url";

    // JSON Node names
     String Doctors = "Doctors";
     String DoctorName = "DoctorName";
     String ImageName = "ImageName";

     // contacts JSONArray
    JSONArray Doctor = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ImageView image = (ImageView)findViewById(R.id.ImageView);
        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            Doctor = json.getJSONArray(Doctors);

            // looping through All Contacts
            for(int i = 0; i < Doctor.length(); i++){
                JSONObject c = Doctor.getJSONObject(i);
                Log.d("TAG", "JSON IS: " + Doctor.toString());

                String imageBaseDirectory = "http://92.253.101.239:81/sudandoctors/UploadedFiles/";
                String imageName = c.getString(ImageName);//get image name from json parsing;
                System.err.println("imageBaseDirectory = "+imageBaseDirectory);
                System.err.println("imageName = "+imageName);
                System.err.println("two = "+imageBaseDirectory+imageName);
                image.setImageURI(Uri.parse(imageBaseDirectory+imageName));

                String n = imageBaseDirectory+imageName;
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put("DoctorName", c.getString("DoctorName"));
                map.put("ImageName", n);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { DoctorName, ImageName }, new int[] {
                        R.id.name, R.id.ImageView });

        setListAdapter(adapter);

    }

} 
```

我收到了这个错误

```
12-13 14:06:07.793: E/AndroidRuntime(1148): FATAL EXCEPTION: main
12-13 14:06:07.793: E/AndroidRuntime(1148): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.AndroidJSONParsingActivity}: java.lang.NullPointerException
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.os.Looper.loop(Looper.java:123)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at java.lang.reflect.Method.invokeNative(Native Method)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at java.lang.reflect.Method.invoke(Method.java:507)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at dalvik.system.NativeStart.main(Native Method)
12-13 14:06:07.793: E/AndroidRuntime(1148): Caused by: java.lang.NullPointerException
12-13 14:06:07.793: E/AndroidRuntime(1148):     at com.androidhive.jsonparsing.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:61)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-13 14:06:07.793: E/AndroidRuntime(1148):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-13 14:06:07.793: E/AndroidRuntime(1148):     ... 11 more 
```

当我在浏览器中使用链接时，它实际上给了我图片，所以有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:22:33.887

[试试这个..完全符合您的要求](http://imagelistviewdynamic.blogspot.in/)

stackoverflow 问题的另一个例子。

[要在列表视图中显示图像，您需要创建一个从 BaseAdapter 扩展的列表适配器类并在那里创建每个视图。](https://stackoverflow.com/questions/13698135/android-loading-image-from-json-url-into-listview)

以上代码工作正常。根据您的要求进行更改。

或者 [去这个很棒的例子 LazyList。显示如何在列表视图中加载图像。它让你很好地理解](https://github.com/thest1/LazyList)

# opencv - findHomography 后如何使用opencv的decomposeProjectionMatrix去除比例

> ID：13858532
> 
> 赞同：2
> 
> 时间：2012-12-13T11:08:29.480
> 
> 标签：opencv

类似于这个问题[findHomography() / 3x3 matrix - 如何从中获得旋转部分？](https://stackoverflow.com/questions/13369069/findhomography-3x3-matrix-how-to-get-rotation-part-out-of-it)由此产生的单应性过于激进。我试图在 calcOpticalFlowPyrLK 之后将其用于视频稳定，并且图像向前和向后缩放。我可以围绕 x/y 旋转并在 x/y 上平移。

仅通过研究，我发现我可以使用 decomposeProjectionMatrix 分解单应性，但我不明白如何将其组合回 warpPerspective。

# magento - WebForms Magento。如何获取 php 的 id？

> ID：13858539
> 
> 赞同：0
> 
> 时间：2012-12-13T11:08:42.283
> 
> 标签：magento, magento-1.7

我刚刚在我的 Magento Web 上安装了 Webforms。它工作完美，但我需要更进一步：

我的网站上有现代主题。当您转到产品时，您会看到一些选项卡：

![在此处输入图像描述](../Images/73366139f7c38ed5a2dba238c252abe4.png)

我希望我刚刚创建的 WebForm 出现在第二个选项卡上。问题是我需要以编程方式调用 Webform，而不是使用常规方法来显示 Webform。

有人知道如何使用 PHP 调用 Webform 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:37:08.973

好的，我解决了。在网站任何地方的 WebForm 内部：

1.  创建块
2.  使用您的 WebForm 插入小部件
3.  从您的 .phtml 调用您的块

就我而言，我按照[此](http://www.magentocommerce.com/boards/viewthread/19498/)链接创建新选项卡并像这样插入我的块：

# java - 从 Nexus S 和 Galaxy SII 中的小部件打开相机

> ID：13858545
> 
> 赞同：0
> 
> 时间：2012-12-13T11:09:01.170
> 
> 标签：java, android, android-camera

## *问题描述*

我正在为 Android 设备编写一个简单的小部件。当用户按下小部件时，相机手电筒必须关闭和打开。当我在 Sony Ericsson Arc 上启动 Widget 时，我的 Widget 工作正常，但当我尝试在***Samsung NexusS***或***Samsung Galaxy SII***上启动 Widget 时，它***什么也不做（不起作用）***。

* * *

## *研究*

我用谷歌搜索了这个问题并找到了一些答案。大多数用户建议使用 SurfaceView 和真正的表面视图，如果将其放置在活动上，1 像素大小的真正表面视图确实有效，但***在我的情况下它不起作用（Widget 不支持 SurfaceViw）***。

[Galaxy Nexus 上的 LED 手电筒可由什么 API 控制？](https://stackoverflow.com/questions/8876843/led-flashlight-on-galaxy-nexus-controllable-by-what-api/9379765#9379765)

我发现这篇文章非常有用，但是如果我想从小部件打开灯，我该如何使用它呢？我知道我不能在小部件视图中使用 Surface 视图，因为它尚不受支持，有什么想法吗？

* * *

## *问题*

请为我提供一些链接、开源项目或文章，或者有助于我如何从 Nexus S One 和 Galaxy S II 上的小部件打开/关闭灯的内容。

是否有任何通用代码可用于在不同手机上使用相机？任何信息都会有所帮助。

也许我需要使用本机库？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:05:06.993

没有官方的 android API 允许您单独操作相机闪光灯。您必须通过官方相机 API - 它并没有正式定义如何操作闪光灯 LED。您可以设置不同的模式，但相机软件可以随意忽略它。

因此，如果这适用于索尼，则不必为其他硬件提供支持。不过，可能存在（并且很可能存在）一些供应商特定的未记录 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T15:26:04.417

响应有点晚，但是，相机必须通过某些设备上的表面才能打开闪光灯。鉴于表面视图不适用，您需要改为实现表面纹理，从 api 11 开始可用

# ruby-on-rails-3.2 - Can Can for Rails 协会

> ID：13858546
> 
> 赞同：0
> 
> 时间：2012-12-13T11:09:00.930
> 
> 标签：ruby-on-rails-3.2, cancan

我使用 can-can gem 来管理我的应用程序中的角色。

型号如下

```
class User < ActiveRecord::Base  
  has_many :projects  
  has_and_belongs_to_many :teams  
end

class Project < ActiveRecord::Base  
  belongs_to :user  
  has_many :tasks  
end

class Tasks < ActiveRecord::Base  
  belongs_to :project  
end

class Ability  
  include CanCan::Ability  

  def initialize user  
    user ||= User.new  
    if user.team? :project_manger  
        can :access, :projects,:user_id => user.id  
    else  
        can :access, :all  
    end  
  end  
end 
```

所以，现在我的问题是如何为用户管理与项目相关的任务。

# iphone - 滚动视图，其中包含图像

> ID：13858552
> 
> 赞同：0
> 
> 时间：2012-12-13T11:09:09.210
> 
> 标签：iphone, objective-c, uiscrollview, uiimageview, storyboard

在我的故事板应用程序中。

我为我`scrollview`的图像遵循了本教程：

[http://agilewarrior.wordpress.com/2012/05/18/uiscrollview-examples/](http://agilewarrior.wordpress.com/2012/05/18/uiscrollview-examples/)

为了`scroll`工作，我这样做：

**您可以通过拖动`scrollView`和`imageView`as 属性**然后设置内容大小来做到这一点，`viewDidLoad`如下所示：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.scrollView.contentSize = self.imageView.image.size;
} 
```

我认为有问题`properties`。但是，无法弄清楚...

但我的图像没有滚动。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:15:49.673

试试这个代码...

```
[self.scrollView setContentSize:self.imageView.image.size];//also try with  CGSizeMake(320, 520)
[self.scrollView setScrollEnabled:YES];
[self.scrollView setUserInteractionEnabled:YES];
[self.view bringSubviewToFront:scrView]; 
```

# java - 自然排序和 TreeSet(Comparator comp) 构造函数解释

> ID：13858554
> 
> 赞同：0
> 
> 时间：2012-12-13T11:09:19.773
> 
> 标签：java

我只想有人向我解释一件事。根据 Java 文档：Comparable 接口对实现它的每个类的对象施加了总排序。这种排序称为类的自然排序，类的 compareTo() 方法称为其自然比较方法。现在我们知道 String 类实现了 Comparable ，那么当我们创建一个 String 对象时会发生什么？这里的自然顺序是什么？

和

```
class Com implements Comparator<String>{
public int compare<String>(String a,String b){
String s1=a; String s2=b;
return s2.compareTo(s1);
}
} 
```

现在假设 Main() 方法中有这个片段：

```
TreeSet<String> ts=new TreeSet<String>(new Com());
ts.add("C");
ts.add("A");
ts.add("B"); 
```

现在，当第一个 C 被添加时，TreeSet 中没有现有元素，那么会发生什么？那么比较是如何进行的呢？

当 B 被添加时，会发生什么。如果你告诉我这里发生的顺序流程，我会很有帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:17:44.067

这是从`TreeMap`源代码（JDK 1.6.0-30）截取的（`TreeSet`由 a 支持，`TreeMap`除非明确选择另一个集合）

```
public V put(K key, V value) {
    Entry<K,V> t = root;
    if (t == null) {
        root = new Entry<K,V>(key, value, null);
        ...
        return null;
    } 
```

如您所见，如果地图为空（根为空），则只需添加值。没有进行比较。

至于添加`A`and `B`，我将把它作为练习留给你，其中实际上有一些很好的学习！

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:16:29.943

[请查看此课程的详细信息](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

# python - “|”的中性元素 和 django.db.models.Q 对象的“&”操作？

> ID：13858555
> 
> 赞同：3
> 
> 时间：2012-12-13T11:09:21.583
> 
> 标签：python, django, django-queryset

`django.db.models.Q`操作对象的中性元素是什么`|`？我想生成一个带有函数的过滤器：

```
MyModel.objects.filter(myfunc(args)) where myfunc should give something like: "Q(foo) | Q(bar) | ... | False" 
```

但我不知道对象是`False`什么`Q`。同样，我需要中性元素进行`&`操作（`True`）...

以下是此类函数的示例：

```
# Models
class MyModel(models.Model):
    myfield1 = models.CharField(max_length=30)
    myfield2 = models.CharField(max_length=30)

# Views
class MyView(views.View):
    model = MyModel

    def get_queryset(self):
        def myfunc(query_object_list, param):
            myfuncr = lambda l: ((myfuncr(l[1:]) | Q(**{ param: l[0] })) if l else Q(False)) # "Q(False)" would be the neutral element of operation "|" for Q objects
            return myfuncr(query_object_list)

        myq = Q(True) # "Q(True)" would be the neutral element of operation "&" for Q objects
        for param in self.request.GET:
            myq &= myfunc(self.request.GET.getlist(param, None), param)

        return MyModel.objects.filter(myq)

# Template
<a href='{% url myview %}?myfield1__iexact={{ myvar1 }}&myfield2__iexact={{ myvar2 }}'>foobar</a> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T18:07:22.823

我终于找到了解决方案，其实很简单...... Q 对象的“中性元素”，对于操作“|”也是一样的 “&”是：“Q()”

我现在有一个动态过滤器，可以匹配模板中我想要的所有内容......

```
# Models
class MyModel(models.Model):
    myfield1 = models.CharField(max_length=30)
    myfield2 = models.CharField(max_length=30)
    myinteger3 = models.IntegerField(blank=True, null=True)

# Views
class MyView(views.View):
    model = MyModel

    def get_queryset(self):
        def myfunc(query_object_list, param):
            myfuncr = lambda l: ((myfuncr(l[1:]) | Q(**{ param: l[0] })) if l else Q()) # Q() is the neutral element of operation "|" for Q objects
            return myfuncr(query_object_list)

        myq = Q() # Q() is the neutral element of operation "&" for Q objects
        for param in self.request.GET:
            myq &= myfunc(self.request.GET.getlist(param, None), param)

        return MyModel.objects.filter(myq)

# Template
<a href='{% url myview %}?myfield1__iexact={{ myvar1 }}&myfield2__iexact={{ myvar2 }}&myinteger3__gte={{ myvar3 }}'>foobar</a>

<a href='{% url myview %}?myinteger3__gte={{ myvar4 }}'>{{ myvar4 }}</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T16:36:25.283

谁在乎。

```
myq = reduce(operator.and_, (myfunc(self.request.GET.getlist(param, None), param) for param in self.request.GET)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:32:19.313

我真的不明白你想要做什么，但我认为这个问题在这种情况下实际上没有意义。`&`and`|`并不是`Q`对象上真正的布尔运算符：[代码](https://github.com/django/django/blob/master/django/db/models/query_utils.py#L33)覆盖了`__and__`and`__or__`方法，以便它们将参数组合成一棵树，这就是 Django 在转换为 SQL 之前在内部表示查询的方式。

# entity-framework - DbContext，处理并发异常

> ID：13858557
> 
> 赞同：1
> 
> 时间：2012-12-13T11:09:27.807
> 
> 标签：entity-framework, dbcontext, optimistic-concurrency

使用 EF DbContext。我的实体对象有 rowversion 列（SQL Compact edition ver 4），用于并发检查（ConcurrencyMode = Fixed，StoreGeneratedPattern=Computed）。

为了强制并发异常，我从 UI 中读取了 2 种不同形式的相同表记录，分别编辑它们，并一个接一个地保存。以下代码执行实际的保存操作。

单击第二个表单上的保存按钮时，按预期发生并发错误。但是，在从数据库复制原始值之后，第二次尝试时异常仍然存在。只有第三次尝试成功，没有任何错误。有人可以解释一下可能导致此问题的原因吗？

```
try
{
  _ctx.SaveChanges(); //first attempt
}
catch (Exception ex)
{
  if (ex is DbUpdateConcurrencyException)
  {
    var exc = ex as DbUpdateConcurrencyException;
    foreach (var entry in exc.Entries)
      entry.OriginalValues.SetValues(entry.GetDatabaseValues());
    try
    {
      _ctx.SaveChanges(); //second attempt
    }
    catch (Exception ex2)
    {
      if (ex2 is DbUpdateConcurrencyException)
      {
        var exc2 = ex2 as DbUpdateConcurrencyException;
        foreach (var entry in exc2.Entries)
          entry.OriginalValues.SetValues(entry.GetDatabaseValues());
        try
        {
          _ctx.SaveChanges(); //third attempt
        }
        catch (Exception ex3)
        {
          System.Windows.MessageBox.Show(ex3.Message);
        }
      }
    }
  }
} 
```

编辑：我发现它发生在我通过 UI 进行两次更新时。如果在上面的代码中，在第一次尝试之前，我会执行以下操作：

```
var _ctx2 = new MyDbContext();
var myEntity = _ctx2.MyEntities.Where(ent => ent.Id == 2).Single();
myEntity.Name = "My new name";
_ctx2.SaveChanges();
_ctx2.Dispose(); 
```

然后代码按预期工作，因为 myEntity 的另一个实例是通过 UI 更新的；即第二次尝试将保存myEntity。而且，问题出在以下行：

```
foreach (var entry in exc.Entries)
  entry.OriginalValues.SetValues(entry.GetDatabaseValues()); 
```

因为，当通过 UI 更新时，exc.Entries 返回的不是发生并发错误的实体，而是它的导航属性实体。

在这种情况下，MyEntity 是一个树状自引用实体，它有两个导航属性：ParentEntity 和 Children。

因此，在第一次保存尝试之后，我在 exc.Entries 中拥有的是 ParentEntity（处于未更改状态），并且只有在第二次保存尝试之后，exc.Entries 返回引发并发错误的实际实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:18:48.270

好的，这似乎是一个 EF 错误。请参阅以下内容：

```
http://support.microsoft.com/kb/2390624#appliesto
http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/ce60bf40-cd05-42f6-ab8f-26b048ec83d7 
```

# oracle - 为什么要使用除 VARCHAR2(4000) 之外的任何其他东西在 Oracle 数据库中存储字符串？

> ID：13858562
> 
> 赞同：9
> 
> 时间：2012-12-13T11:09:36.980
> 
> 标签：oracle, database-design

我发现[了一篇 Ask Tom 文章](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2668391900346844476)，解释了 Oracle 中 CHAR 和 VARCHAR2 之间没有太大区别。它给人的印象是我应该对我想存储字符串的每一列使用 VARCHAR2(4000 BYTE)，即使是 ISO 639-1 语言代码，因为它没有任何区别。

我知道对 ISO 639-1 语言代码使用 CHAR(2) 来强制执行基本数据约束是有意义的。但这不是一个充分的约束，因为它允许存储`'xy'`在不是有效语言代码的列中。另一方面，我为这个基本约束付费，但如果我想更改我的应用程序以使用 ISO 639-2 语言代码（需要 3 个字符），我必须更改数据库。所以我倾向于从数据库级别完全放弃约束，因为在我看来成本高于收益。

考虑到这一点，我想知道是否还有其他重要原因为什么我不应该将 VARCHAR2(4000 BYTE) 用于我打算存储在 Oracle 数据库中的任何小于 4000 字节的字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T11:30:30.403

Tom Kyte 也在这里反驳了你的提议：[https ://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1145132537055](https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1145132537055)

# css - 相同高度元素

> ID：13858563
> 
> 赞同：0
> 
> 时间：2012-12-13T11:09:43.937
> 
> 标签：css, html, height

我正在尝试设置两个`div`s 的高度，这将是最高的高度`div`

这是我迄今为止尝试过的：

HTML：

```
<div id="left">
    1\. SOME TEXT HERE
</div>
<div id="right">
    <input type="radio" name="Group1" /> <font size="1.5px">NO</font>
    <input type="radio" name="Group1" /> <font size="1.5px">YES</font>
    <br />
    <div class="textToRight">
        <font size="1.5px">Text:</font> 
        <input type="text" class="boxAlignRight22" />
    </div>
</div>
<div style="clear:both"></div> 
```

CSS：

```
#left {
    margin-top:5px;
    margin-left:1.4%;
    float:left;
    background:#FFFFFF;
    width:59.8%;
    text-align:left;
    padding:5px;
}

#right {
    margin-top:5px;
    margin-right:1.4%;
    float:right;
    background:#FFFFFF;
    width:34.8%;
    padding:1.5px 5px 1.5px 5px;
    text-align:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:21:27.880

```
 <div class="main">
      <div id="left">
          1\. SOME TEXT HERE
      </div>
      <div id="right">
          <input type="radio" name="Group1" /> <font size="1.5px">NO</font>
          <input type="radio" name="Group1" /> <font size="1.5px">YES</font><br />
          <div class="textToRight"><font size="1.5px">Text:</font> 
              <input type="text" class="boxAlignRight22" /></div>
          </div>
      </div>    
      <div style="clear:both">
  </div>

  <style>
  #left {
      border:solid #000 1px;
      float:left;
      height:100%;
      padding:5px;
  }

  #right {
      border:solid #000 1px;
      float:left;
      height:100%;
      padding:5px;
  }
  .main{
      height:100px;
  }
  </style> 
```

试试这个..希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:18:58.827

您可以通过将两者的高度设置为“自动”来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:25:26.100

尝试使用一些`manipulation effect.`

这是完美示例的链接。

[http://www.vanseodesign.com/css/equal-height-columns/](http://www.vanseodesign.com/css/equal-height-columns/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:11:28.440

使用javascript使其非常动态，你也可以使用jquery来缩短 `jQuery: $('#right').css.height($('#left').css.height())` 这是为了使相同的右侧高度等于左侧

使用一些脚本：

```
<head>

<style>
#content{
height:auto;
}
#left {
margin-top:5px;
margin-left:1.4%;
float:left;
background:#938922;
width:59.8%;
text-align:left;
padding:5px;

}

#right {
margin-top:5px;
margin-right:1.4%;
float:right;
background:#514261;
width:34.8%;
padding:1.5px 5px 1.5px 5px;
text-align:left;

}
</style>
<script>
function load()
{
var leftcont = document.getElementById('left');
var rightcont = document.getElementById('right');
var lh = leftcont.offsetHeight;
var rh = rightcont.offsetHeight;
if (rh>lh)  leftcont.style.height = rightcont.style.height=rh;
else       leftcont.style.height = rightcont.style.height=lh;
}
</script>
</head><body onload='load()'>
<div id ="content">
<div id="left">
1\. SOME TEXT HERE
</div>
<div id="right">
<input type="radio" name="Group1" /> <font size="1.5px">NO</font>
<input type="radio" name="Group1" /> <font size="1.5px">YES</font>
<br />
<div class="textToRight">
    <font size="1.5px">Text:</font> 
    <input type="text" class="boxAlignRight22" />
</div>
</div>
<div style="clear:both"></div>
</div>
</body> 
```

# java - 用于 UTF-8 或 ISO-8859-1 编码的 XML 的动态 SAX 解析器

> ID：13858564
> 
> 赞同：5
> 
> 时间：2012-12-13T11:09:45.033
> 
> 标签：java, android, xml, encoding, sax

我正在为 Android 开发一个应用程序，我必须在其中解析不同的 XML 文件。它们中的大多数以 UTF-8 编码，但少数可能以 ISO-8859-1 编码。

```
 HttpURLConnection con = (HttpURLConnection) url.openConnection();
  ...
  in = con.getInputStream();
  InputSource is = new InputSource(in);
  ...
  parser.parse(is, handler); 
```

我处理输入的代码如上所示。该`java`文档说`InputSource`：

> 如果没有字符流，但有字节流，则解析器将使用该字节流，使用 InputSource 中指定的编码，否则（如果未指定编码）使用算法自动检测字符编码，例如XML 规范。

我传入 a`ByteStream`并且我没有指定编码，因此根据文档，应该自动检测编码。但事实并非如此。所有以 UTF-8 编码的文件都很好，但 ISO-8859-1 的文件不是（我得到了一个`Parser Expat... Exception for some invalid characters`）。如果我将`InputSource`手动的编码设置为“ISO-8859-1”，它的行为则相反。

我该如何解决这个问题？我搜索了谷歌和`Stackoverflow`几个小时，但没有找到解决方案。我也尝试将 a 传递`CharacterStream`给，但ISO-8859-1 文件中的`InputSource`某些字符仍显示为“？” `(äöüÄÖÜß)`在我的应用程序中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:45:21.250

我建议检查是否有旧 ascii 集中没有的字符，如果似乎有 UTF-8 字符，则重新编码字符串：

```
String output=new String(input.getBytes("8859_1"), "utf-8"); 
```

该行采用 ISO-8859-1 并将其转换为 Java 使用的 utf-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:32:48.110

最佳解决方案取决于问题的确切原因。如果您通过 HTTP 检索 XML 文档，则编码也可以在 Content-Type 响应标头中指定，而不必在 XML 文档本身中指定。如果是这种情况并且正确实现了 Android 中的 XML 库（我无法在此处检查是否评估了 Content+Type 标头），那么您应该能够直接使用 URL 创建一个 InputSource `new InputSource("http://...");`。

如果编码未在 HTTP 标头中设置且未在 XML 序言中指定，则如果解析器采用 UTF-8 编码（如 XML 规范所要求的那样），则解析器将正确运行。文档中提到的自动检测并不意味着解析器实际上会查看文档内容以对编码做出假设，而是意味着它会检查 XML 流的编码属性。如果缺少 encoding 属性，则默认为 UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:13:08.400

最直接的方法是使用 UTF-8，如果抛出无效字节的解析器异常，请尝试将其重新解析为 Windows-1252。1252，因为我怀疑你会看到任何人使用 ISO-8859-1 C1 字符，而你会看到人们使用 Windows 1252 字符并声称它一直是 ISO-8859-1。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T11:24:32.833

我建议让 SAX 决定编码，它会从 XML 声明编码属性中知道

```
<?xml version="1.0" encoding="utf-8"?> 
```

注意：如果没有合法的xml声明，则假定编码为UTF-8

如果您使用字节流 InputSource，如您的示例所示，并且不明确设置 InputStream 编码，则 SAX 将从 XML 获取编码

**更新**

试试这个测试。它将 xml 字符串写入 iso-8859-1 中的 1.xml 文件。然后 SAX 对其进行解析并打印根元素文本（它只有一个字符 'ä'）。SAX 应该不理解 1.xmk 使用 iso-8859-1 否则输出会失真

```
String xml = "<?xml version='1.0' encoding='iso-8859-1'?><root>ä</root>";
OutputStreamWriter wrt = new OutputStreamWriter(new FileOutputStream(
        "1.xml"), "iso-8859-1");
wrt.write(xml);
wrt.close();
SAXParserFactory sf = SAXParserFactory.newInstance();
SAXParser p = sf.newSAXParser();
p.parse(new FileInputStream("1.xml"), new DefaultHandler() {
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        System.out.println((int)ch[start]);
        System.out.println(String.valueOf(ch, start, length));
    }
}); 
```

查看输出

```
228
ä 
```

它是正确的。SAX 无法理解 XML 编码 = 'iso-8859-1'。

# c# - 一次只检查一个 ListViewItem

> ID：13858565
> 
> 赞同：4
> 
> 时间：2012-12-13T11:09:52.653
> 
> 标签：c#, winforms, events, listview, compact-framework

我正在使用 Compact Framework 开发一个智能设备项目。

我有一个`ListView`带有几个 checkable`ListViewItem`的：属性`CheckBoxes`是真的。我一次只需要检查一个`ListViewItem`，所以我订阅了这个`ItemCheck`事件：

```
// I need to know the last item checked
private ListViewItem lastItemChecked;

private void listView_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (lastItemChecked != null && lastItemChecked.Checked)
    {
        /* I need to do the following to prevent infinite recursion:
        i.e. subscribe and then unsubscribe the ItemCheck event. */
        listView.ItemCheck -= listView_ItemCheck;
        lastItemChecked.Checked = false;
        listView.ItemCheck += listView_ItemCheck;
    }

    lastItemChecked = listView.Items[e.Index];
} 
```

有没有更好的方法来防止无限递归，从而防止`Stack Overflow`?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T12:07:29.003

好吧，我认为可能比使用 EventHandlers 更好的是检查 lastItemCheck 是否是 EventArgs 中的当前项目。像这样：

```
// I need to know the last item checked
private ListViewItem lastItemChecked;

private void listView_ItemCheck(object sender, ItemCheckEventArgs e)
{
    // if we have the lastItem set as checked, and it is different
    // item than the one that fired the event, uncheck it
    if (lastItemChecked != null && lastItemChecked.Checked
        && lastItemChecked != listView.Items[e.Index] )
    {
        // uncheck the last item and store the new one
        lastItemChecked.Checked = false;
    }

    // store current item
    lastItemChecked = listView.Items[e.Index];
} 
```

我认为您会同意，重新分配 EventHandlers 比简单地检查存储对象的引用要差一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-08T02:20:43.183

这是一种更简单的方法，可以重复用于多个列表。

```
private void listView_ItemCheck(object sender, ItemCheckEventArgs e)
        {
            var listView = sender as ListView;
            if (listView != null && e.NewValue == CheckState.Checked)
            {
                foreach (ListViewItem checkedItem in listView.CheckedItems)
                {
                    checkedItem.Checked = false;
                }
            }
        } 
```

ItemCheck 事件在列表项状态更改之前触发，因此不需要额外的测试。

ItemCheck - 表示项目即将更改其检查状态。直到事件发生后，该值才会更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-18T09:24:46.003

M Bak 您忘记在分配新值之前禁用项目检查事件。而且您的代码也将取消选中最后检查的值，因为您使用了已检查的事件。CheckedItems.Count 也将在 Checked 值更改后更改。固定解决方案是：

```
private void LstFirstPageBanner_ItemCheck(object sender, ItemCheckEventArgs e)
    {
        var listView = sender as ListView;
        if (listView != null)
        {
            var checkedCount = listView.CheckedItems.Count;
            listView.ItemCheck -= LstFirstPageBanner_ItemCheck;
            for (var i = 0; i < checkedCount; i++)
            {
                listView.CheckedItems[i].Checked = false;
            }
            listView.ItemCheck += LstFirstPageBanner_ItemCheck;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T12:35:46.543

这么多代码和技巧...

```
listView.SelectionMode = System.Windows.Controls.SelectionMode.Single; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-03T21:23:44.627

```
private void listView1_ItemChecked(object sender, ItemCheckedEventArgs e)
    {
        listView1.ItemChecked -= listView1_ItemChecked;
        foreach (var item in listView1.CheckedItems)
        {
            if (e.Item != item)
            {
                ((ListViewItem)item).Checked = false;

            }

        }
        listView1.ItemChecked += listView1_ItemChecked;
    } 
```

# sql - 在我的情况下，为什么 SQLite 向函数 substr() 报告错误数量的参数？

> ID：13858574
> 
> 赞同：2
> 
> 时间：2012-12-13T11:10:10.023
> 
> 标签：sql, sqlite, substr

我正在尝试使用[这个答案](https://stackoverflow.com/a/13000819/274627)，但它报告“函数 substr() 的参数数量错误”。

然后我尝试测试以下一个简单的查询：

```
SELECT substr('000' || '4',  -4); 
```

它会引发同样的错误。

SQlite 文档说`substr`接受 2 或 3 个参数，在这里我给它 2 但它仍然抱怨。

知道为什么吗？

更新：

为了更清楚，我尝试简单地执行

```
SELECT substr('abcdefg',  4); 
```

它给出了同样的错误。

更新2：

事实上，我正在使用`SQLite Administrator 0.8.3.2`（它使用相当旧的 SQLite 库 - SQLite 3.5.1）来运行查询。现在我尝试使用裸 sqlite3.exe (SQLite 3.7.15) - 一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:55:35.773

[在SQLite 3.5.2](http://www.sqlite.org/releaselog/3_5_2.html)中，第三个参数`substr()`是可选的。

您应该获得更新版本的 SQLite Administrator（如果可能），或者使用更新的工具，例如[SQLite Manager](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)。

# ftp - Apache Camel FTP - 上下文启动和停止之间的最佳实践是什么

> ID：13858579
> 
> 赞同：3
> 
> 时间：2012-12-13T11:10:17.573
> 
> 标签：ftp, apache-camel

我编写了一些代码来从 FTP 站点下载文件，如下所示：

```
CamelContext context = new DefaultCamelContext();
    context.addRoutes(new RouteBuilder() {
          public void configure() {
              from( uri ).to( localBox );
          }
      });
    context.start();
    // a tedious sleepy thread !?
    // TODO: work around for a better solution
    Thread.sleep(20000);
    context.stop(); 
```

我正在寻找更好的解决方案，而不是 Thread.sleep 方法。是否也可以获得完成转移的剩余时间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:19:28.563

好吧，通常情况下，您会将这些代码嵌入到一些实际运行的应用程序中，例如 Web 应用程序、一些客户端 gui 应用程序、Apache SMX 内的 OSGi 包或其他类似的东西。

但是，如果这是您想要运行的唯一代码（即，用于批处理作业或类似工作），则有一种标准方法可以使用独立的 Camel 执行您想要的操作。阅读[这篇](http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html)文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:47:38.230

## 主要答案

*下面的语法将在不使用Thread.sleep*的情况下为您提供所需的内容：

```
context.getShutdownStrategy().setTimeout(20000); 
```

## 其他建议

此页面有一些[其他关闭骆驼的方法示例](http://fusesource.com/docs/router/2.4/eip/BasicPrinciples-StartupShutdown.html)。但是，如果您使用这些方法，则很可能您没有按预期使用骆驼。正如@Petter 所说，Camel 通常用于连续运行的服务器上。

在这里，当我们想以“一次性”的方式运行路由时，我们通常只使用*Producer*，如下所示：

```
@Required
protected ProducerTemplate producer;

public Object getObjectFromRoute(String routeId, Object payloadBody) {
    return producer.requestBody(routeId, payloadBody);
} 
```

您可以使用类似的技术将消息发送到负责使用 DSL 关闭事物的路由，`shutdownRoute`以及`shutdownRunningTask`或某种`processor`优雅地退出应用程序的人。

一旦你有了这样的路由，你可以向你的应用程序发送适当的消息来调用这个路由并干净地退出（或者，使用 Camel 的*Main*类的实例并启用*挂断支持*`Ctrl`会在你发送+`C`到时为你处理这个问题您正在运行的应用程序）。

# sql-server-2008 - 两个日期之间的分钟数取决于状态

> ID：13858580
> 
> 赞同：1
> 
> 时间：2012-12-13T11:10:18.557
> 
> 标签：sql-server-2008, sql-server-2005

我有一个与 Sql Server 2005 (Tsql) 相关的问题

我有两列日期状态

数据看起来..像

```
Date                    Status

2012-09-01 00:01:00.000 2

2012-09-01 04:17:00.000 4

2012-09-01 04:34:00.000 4

2012-09-01 04:35:00.000 4

2012-09-01 04:35:48.000 4

2012-09-01 04:35:51.000 1

2012-09-01 17:28:25.000 2

2012-09-01 23:58:00.000 4

2012-09-01 23:59:00.000 1 
```

我需要计算状态之间的时间差......例如。最小时间是状态 2 开始的时间和状态 = 1（停止）在该日期之间的最大时间，我想要分钟数。我已经通过游标检查状态并在变量中记录最小时间和最大时间

我们有没有使用 CTE 轻松做到这一点。

我的查询需要很长时间才能完成……请帮忙。

```
 DECLARE @pdunitid INT
        DECLARE @Date DATETIME
        DECLARE @pddatetime DATETIME
        DECLARE @pdstatus INT
        DECLARE @starttime DATETIME
        DECLARE @endTime DATETIME
        DECLARE @calc INT
        DECLARE @Totaltime INT
        DECLARE @START INT

        SET @pdunitid = 33568906
        SET @Date = GETDATE() - 102
        set @Totaltime = 0
        SET @calc = 0
        SET @START = 0

        DECLARE s CURSOR FAST_FORWARD FOR
        SELECT pddatetime,pdstatus FROM s1 WITH (NOLOCK)
        WHERE  pdunitid = @pdUnitid
        AND CONVERT(VARCHAR,pddatetime,112) = CONVERT(VARCHAR,@Date,112)
        ORDER BY pddatetime,pdstatus 

        OPEN s 

        FETCH NEXT FROM s INTO @pddatetime,@pdstatus
        WHILE @@FETCH_STATUS = 0 
            BEGIN
                -- status 2 is for start sometimes you don't get start so you will have to use the first date with status 4

                IF pdstatus IN (2,4)  AND @START = 0 
                    BEGIN 
                        SET @starttime = @pddatetime
                        SET @START = 1
                    END

                -- status 1 is for stop 

                IF (@pdstatus= 1) 
                    BEGIN 
                        SET @endTime = @pddatetime
                        SET @calc = 1   
                    END

                -- if you dont get the status 1 by '23:59:00' take the end time

            IF  convert(varchar,@pdgpsdatetime,108) = '23:59:00'
                    BEGIN 
                        SET @endTime = @pddatetime
                        SET @calc = 1   
            END

                -- Calculate the minutes.

                IF @calc = 1 
                    BEGIN 
                        SET @Totaltime = @Totaltime + DATEDIFF(mi, @starttime,@endTime)
                        SET @calc = 0   
                        SET @START = 0
                    END
        FETCH NEXT FROM s INTO @pddatetime,@pdstatus
            END
        CLOSE s
        DEALLOCATE s

        SELECT  @Totaltime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:51:09.543

试试这个，而不是`#tbl`把你的表名：

```
DROP TABLE #tbl
CREATE TABLE #tbl([Date] DATETIME, [Status] INT)
INSERT  #tbl
VALUES  
('2012-09-01 00:01:00.000',  2),
('2012-09-01 04:17:00.000',  4),
('2012-09-01 04:34:00.000',  4),
('2012-09-01 04:35:00.000',  4),
('2012-09-01 04:35:48.000',  4),
('2012-09-01 04:35:51.000',  1),
('2012-09-01 17:28:25.000',  2),
('2012-09-01 23:58:00.000',  4),
('2012-09-01 23:59:00.000',  1),

-- for 2012-09-05 there are no statuses 1 or 2
--('2012-09-05 00:01:00.000',  2),
('2012-09-05 04:17:00.000',  4),
('2012-09-05 04:34:00.000',  4),
('2012-09-05 04:35:00.000',  4),
('2012-09-05 04:35:48.000',  4),
('2012-09-05 04:35:51.000',  4),
('2012-09-05 17:28:25.000',  4),
('2012-09-05 23:58:00.000',  4)
--('2012-09-05 23:59:00.000',  1)

;WITH tbl AS 
(
    SELECT  *,
            ROW_NUMBER() OVER (ORDER BY [Date]) id
    FROM    #tbl
), 
b AS 
(
    SELECT  MIN([Date]) MinDate,
            MAX([Date]) MaxDate,
            CAST([Date] AS DATE) dateWithoutTime
    FROM    tbl
    GROUP   BY CAST([Date] AS DATE)
),
a AS
(
    SELECT  *,
            ROW_NUMBER() OVER (ORDER BY [Date]) num
    FROM    tbl
    LEFT JOIN 
            b ON 
            b.MaxDate = [Date]
    OR      b.MinDate = [Date]
    WHERE   [Status] IN (2, 1)
    OR      [Date] = CASE WHEN NOT EXISTS (SELECT 1 FROM #tbl c WHERE c.Status = 2 AND CAST(c.[Date] AS DATE) = b.dateWithoutTime) THEN b.MinDate END
    OR      [Date] = CASE WHEN NOT EXISTS (SELECT 1 FROM #tbl c WHERE c.Status = 1 AND CAST(c.[Date] AS DATE) = b.dateWithoutTime) THEN b.MaxDate END
)

SELECT  
        tbl.Date,
        tbl.Status,
        CASE WHEN a2.num % 2 = 0 THEN DATEDIFF(MINUTE, a1.Date, a2.Date) END Diff
FROM    tbl
LEFT JOIN   
        a a2 ON tbl.id = a2.id
LEFT JOIN   
        a a1 ON a2.num = a1.num + 1
ORDER BY [Date] 
```

# c# - 使用什么正则表达式模式从 xml 输入中提取数字？

> ID：13858581
> 
> 赞同：3
> 
> 时间：2012-12-13T11:10:20.033
> 
> 标签：c#, asp.net, xml, regex, match

我的输入文本是打击：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">2</string> 
```

使用什么正则表达式模式从上述输入中提取数字？

```
var pattern = "<string ?>?</string>"; // how to write this?
var match = Regex.Match(input, pattern, RegexOptions.IgnoreCase); 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:13:40.507

这种模式应该可以解决问题：

```
"<string[^>]+>([0-9]+)</string>" 
```

分解：

```
<string   - Match the string <string
[^>]+     - Followed by one or more characters that are not >
>         - Followed by >
(         - Start capturing group
[0-9]+    - Followed by one or more of the digits 0-9
)         - End capturing group
</string> - Followed by the string </string> 
```

如果示例是整个字符串，您可能希望分别在开头和结尾使用`^`和锚定它。`$`

注意我使用的是`[0-9]`and not `\d`，因为在 .NET`\d`中将匹配任何 Unicode 数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:41:05.493

使用 LinqToXml 的另一种方法：

```
var ele = XElement.Parse("<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">2</string>");
var valueString = ele.Value; //valueString = "2"; 
```

**更新**

而对于正则表达式：我会从@Oded 扩展解决方案与`(?<=startRegex)`和（lookbehind 和lookahead），因此在匹配值中将省略`(?=endRegex)`不必要的标签。`<string>`

```
(?<=<string[^>]+>)([0-9]+)(?=</string>) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:19:19.007

这是非正则表达式的方法。

```
string str = "<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">2</string>";
int startIndex = str.IndexOf('>');
int endIndex = str.LastIndexOf('<');
int numberLenght =  (endIndex - startIndex) - 1;
string result = str.Substring(startIndex + 1, numberLenght); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:16:33.727

您可以使用此方法提取数字：

```
 /// <summary>
    /// Example for how to extract the number from an xml string.
    /// </summary>
    /// <param name="xml"></param>
    /// <returns></returns>
    private string ExtractNumber(string xml)
    {
        // Extracted number.
        string number = string.Empty;

        // Input text
        xml = @"<string xmlns=""http://schemas.microsoft.com/2003/10/Serialization/"">2</string>";

        // The regular expression for the match.
        // You can use the parentesis to isolate the desired number into a group match. "(\d+?)"
        var pattern = @"<string.*?>(\d+?)</string>";

        // Match the desired part of the xml.
        var match = Regex.Match(xml, pattern);

        // Verify if the match has sucess.
        if (match.Success)
        {
            // Finally, use the group value to isolate the number.
            number = match.Groups[1].Value;
        }

        return number;
    } 
```

这是我用来解决这个问题的方法。

# jquery - 缩放 DOM 元素：缩放与变换

> ID：13858588
> 
> 赞同：1
> 
> 时间：2012-12-13T11:10:45.307
> 
> 标签：jquery, css, raphael, zoomooz, zui

我有一个可缩放的 div 元素网格。单击 div 时，会使用[Zoomooz.js](http://janne.aukia.com/zoomooz/)对其进行缩放、缩放和居中。每个 div 内部都有一个使用[Raphäel](http://raphaeljs.com/)实现的可绘制区域（如 Canvas） 。

我的问题是，即使缩放功能完美运行，div 的缩放也使得无法在 div 上进行合理的绘制，因为 div 被放大，而不仅仅是将其转换为更大的宽度/高度。我真的想要缩放效果，但不是缩放 div，我的猜测是我想对所有 div 进行转换，并使用缓动效果或类似效果居中选定的 div。

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:37:10.977

一种选择是对画布内容进行逆变换。因此，将画布制作成两倍大小，然后使用类似`-webkit-transform:scale(0.5);`或类似的东西使其适合为其保留的空间。现在，当您缩放到元素时，您的分辨率会增加一倍。

另一种选择是使用 SVG 图形或类似的与分辨率无关的内容进行绘图。这是一个使用带有 SVG 的 Zoomooz 的网站：http: [//www.parti-socialiste.fr/bilan-sarkozy/](http://www.parti-socialiste.fr/bilan-sarkozy/)

# qt - 我的 PopUp 中的这个 QT 信号有什么问题？

> ID：13858591
> 
> 赞同：1
> 
> 时间：2012-12-13T11:10:55.997
> 
> 标签：qt, signals-slots, qcolordialog

我实现了一个颜色选择器菜单，基于[BlackDal ColorPicker](http://qt-apps.org/content/show.php/BlackDal+ColorPicker?content=134703)

In order to send a signal, when a color has been selected, i added:

```
class RColorPicker : public QPushButton
{
    Q_OBJECT
signals:
   void selected( QColor color);
 ... 
```

和

```
void RColorPicker::on_popup_selected( QColor color )
{
   _selectedColor = color;
   repaint();
   emit selected( color ); 
```

Sowe在其他地方我连接到那个信号，比如

```
fillColorButton     = new RColorPicker()
connect(fillColorButton    , SIGNAL(selected(QColor)), this,  SLOT(fillColorButtonTriggered(QColor)) ); 
```

这有效，当从 PopUpMenu 中选择一种颜色时，但如果我在 PopUp 中选择“更多...”，然后从被调用的颜色中选择一种颜色，则不会调用`QColorDialog`连接的插槽。`fillColorButtonTriggered`Instaed，在我的 MDI 应用程序中，一个不同的文档成为活动窗口。虽然它应该：

```
 void RColorPickerPopup::mousePressEvent ( QMouseEvent *event )
   { 
     ...
     QColorDialog *dialog = new QColorDialog( this );
     if( dialog->exec() )
     {
        hoverColor = dialog->selectedColor();
        delete dialog;
        emit selected( hoverColor );
        this->close(); 
```

`QColorDialog`如果我用本机 Windows`ChooseColor`对话框替换，则不会出现问题。

有没有人有提示，这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:46:53.707

我终于自己找到了答案：问题是，我使用的 Qt MDI 示例具有这样的功能：

```
MdiChild *MainWin::activeMdiChild()
{
    if (QMdiSubWindow *activeSubWindow = mdiArea->activeSubWindow())
        return qobject_cast<MdiChild *>(activeSubWindow);
    return 0;
} 
```

问题是

> 如果 MDI 区域之外的小部件是活动窗口，则不会有子窗口处于活动状态

（[参见 Qt 文档](http://harmattan-dev.nokia.com/docs/platform-api-reference/xml/daily-docs/libqt4/qmdiarea.html#activeSubWindow)）

显然，一旦我显示模态 Qt 对话框，MDI 子窗口就不再具有焦点 - 如果我使用本机 Windows 对话框，情况似乎并非如此。当我尝试设置所选元素的颜色时，我调用了 MainWin::activeMdiChild，如果 Qt 对话框位于顶部，则返回 NULL（是的，我应该检查是否返回 NULL，此时这是出乎意料的）。

解决方案是用 currentSubWindow 替换 activeSubWindow。

```
MdiChild *MainWin::activeMdiChild()
{
    if (QMdiSubWindow *activeSubWindow = mdiArea->currentSubWindow())
        return qobject_cast<MdiChild *>(activeSubWindow);
    return 0;
} 
```

# java - 在 ItemReader 中访问作业参数（使用 grails 的 spring-batch）

> ID：13858593
> 
> 赞同：0
> 
> 时间：2012-12-13T11:10:57.900
> 
> 标签：java, grails, spring-batch

我正在从我的服务开始工作，代码看起来像

```
def jobParameters = new JobParametersBuilder()
                .addDate('toDate',toDate)
                .addDate('fromDate',fromDate)
def jobEx = jobLauncher.run(billProcessJob,jobParameters.toJobParameters()) 
```

它正在成功执行。但我需要在我的项目阅读器中访问上述作业参数。我的项目阅读器看起来像

```
class MyDomainMapper implements FieldSetMapper {
def mapLine(FieldSet fs) {
    if(!fs) {
         return null
    }
log.debug('Record:'+fs);//Printing the file record successfully

//Here I need to access my job parameter to map with some domain
}
} 
```

任何人都可以告诉我如何实现它吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:04:38.977

您可以在 spring-batch 上下文中定义一个 bean：

```
<bean id="executionContext" class="com.xxx.ExecutionContextImpl" scope="step" >
    <property name="toDate" value="#{jobParameters['toDate']}"  />
    <property name="fromDate" value="#{jobParameters['fromDate']}"  />
</bean> 
```

然后`executionContext`在您的 ItemReader 中注入以访问您的作业参数变量。

# codeigniter - Codeigniter 语言文件错误

> ID：13858596
> 
> 赞同：0
> 
> 时间：2012-12-13T11:11:05.203
> 
> 标签：codeigniter

当我添加一些面临这个错误的东西时，任何人都可以帮我解决这个错误吗

无法加载请求的语言文件：language/english/email_lang.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:14:12.753

您确定您已将语言文件包含在 /system/language/english 中吗？

# c# - 从制表符分隔的 xls 文件中读取数据

> ID：13858598
> 
> 赞同：2
> 
> 时间：2012-12-13T11:11:06.347
> 
> 标签：c#, excel, xls, tsv

我有一个带有`.xls`扩展名的文件，它实际上具有由制表符空格分隔的数据，即，当我右键单击并在记事本中打开文件时，我可以看到所有由制表符空格分隔的纯文本数据

我正在使用以下连接字符串从文件中读取数据

```
"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\abc.xls;Extended Properties=\"Excel 8.0;HDR=NO;IMEX=1;FMT=TabDelimiter;\"; 
```

它适用于在 Microsoft excel 中另存为 .xls 的其他文件，但是当我尝试使用上述文件时出现以下异常

```
"External table is not in the expected format." 
```

我应该如何在 C# 中从这样的文件中读取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:35:43.450

xls 扩展名只是令人困惑-您的文件与 Excel 无关。将该文件视为普通的制表符分隔文件。循环过去前 6 行，因为它们包含“垃圾”。

您可以为此使用 TextFieldParser 类。

Microsoft 在以下位置提供示例代码和详细信息：http: [//msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser(v=vs.100).aspx)

# java - JScrollPane 内容到图像

> ID：13858599
> 
> 赞同：4
> 
> 时间：2012-12-13T11:11:10.433
> 
> 标签：java, swing, jscrollpane, bufferedimage, columnheader

我正在尝试将 JScrollPane（大于屏幕）的主视口和标题保存到 PNG 图像文件中。我创建了 3 个扩展 JPanel 的类（MainTablePanel、MapsHeaderPanel 和 ItemsHeaderPanel）并将它们设置为视口。他们每个人都有这个方法：

```
public BufferedImage createImage() {
    BufferedImage bi = new BufferedImage(getSize().width, getSize().height, BufferedImage.TYPE_INT_ARGB); 
    Graphics g = bi.createGraphics();
    paint(g); 
    g.dispose();
    return bi;
} 
```

每个类还有一个paint方法，它绘制背景然后调用super.paint()来绘制一些标签。例如：

```
public void paint(Graphics g){
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(new Color(255, 255, 0, 50));
        // for loop that paints some vertical yellow lines
        for(int i=0; i<getWidth(); i+=K.mW){
            g.fillRect(i-1, 0, 2, getHeight());
            if(i%(K.mW*5)==0){
                g.fillRect(i-2, 0, 4, getHeight());
            }
        }
        // called to pain some rotated JLabels
        super.paint(g);
    } 
```

然后，我从外部 JFrame 尝试使用以下代码将它们保存到 PNG 文件：

```
BufferedImage tableImg = mainTableP.createImage();
BufferedImage topImg = mapsHeaderP.createImage();
BufferedImage leftImg = itemsHeaderP.createImage();

ImageIO.write(tableImg, "png", new File(s.homeDir+"/table.png"));
ImageIO.write(topImg, "png", new File(s.homeDir+"/top.png"));
ImageIO.write(leftImg, "png", new File(s.homeDir+"/left.png")); 
```

这是应用程序运行的截图：[screenshot](http://malgolan.altervista.org/_ext/screenshot.png)

这是导出的标题：[顶部](http://malgolan.altervista.org/_ext/top_super.png)

如果我评论“super.paint(g)”指令，我会获得正确的图像（因此显然没有所有 JLables）。似乎第二个油漆 (super.paint(g)) 被绘制到了 BufferedImage 中，并在其 JPanel 之外获取了元素。有人可以向我解释这种行为吗？谢谢你。

========== 为 SSCCE 编辑 =====================================

这应该编译。您可以按原样执行它，在 c:\ 中您会发现两个图像（top.png 和 left.png）应该与两个标题相同。不幸的是，他们不是。背景未绘制。此外（特别是如果您查看 left.png），您可以看到标签被绘制了两次并移动了（请注意，例如，“Left test 21”）。

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.*;

public class Main {

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setLayout(null);
        frame.setSize(800, 600);

        JScrollPane scrollP = new JScrollPane();
        scrollP.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        scrollP.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);

        MyPanel top = new MyPanel();
        for(int i=0; i<30; i++){
            JLabel label = new JLabel("Test "+i);
            label.setOpaque(false);
            label.setBounds(50*i, 40, 50, 20);
            label.setForeground(Color.GREEN);
            top.add(label);
        }
        top.setLayout(null);
        top.setOpaque(false);
        top.setPreferredSize(new Dimension(50*30, 200));
        top.validate();

        MyPanel left = new MyPanel();
        for(int i=0; i<30; i++){
            JLabel label = new JLabel("Left test "+i);
            label.setBounds(0, 50*i, 100, 20);
            label.setForeground(Color.RED);
            left.add(label);
        }
        left.setLayout(null);
        left.setOpaque(false);
        left.setPreferredSize(new Dimension(200, 50*30));

        MyPanel center = new MyPanel();
        center.setLayout(null);
        center.setOpaque(false);
        center.setPreferredSize(new Dimension(50*30, 50*30));

        scrollP.setViewportView(center);
        scrollP.setColumnHeaderView(top);
        scrollP.setRowHeaderView(left);

        scrollP.setBounds(0, 50, 750, 500);
        frame.add(scrollP);

        frame.setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        frame.setVisible(true);

        try{
            BufferedImage topImg = top.createImage();
            ImageIO.write(topImg, "png", new File("C:/top.png"));

            BufferedImage leftImg = left.createImage();
            ImageIO.write(leftImg, "png", new File("C:/left.png"));
        }catch(Exception e){
            e.printStackTrace();
        }
    }

}

class MyPanel extends JPanel{
    public void paint(Graphics g){
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(new Color(255, 255, 0, 50));
        for(int i=0; i<getWidth(); i+=50){
            g.fillRect(i-1, 0, 2, getHeight());
        }
        super.paint(g); // COMMENT this line to obtain background images
    }

    public BufferedImage createImage() {
        BufferedImage bi = new BufferedImage(getSize().width, getSize().height, BufferedImage.TYPE_INT_ARGB); 
        Graphics g = bi.createGraphics();
        paint(g);
        g.dispose();
        return bi;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:02:18.200

我无法重现任何异常行为，但我猜您忘记移动图像绘制原点 (g.translate()) 以符合您的期望。此外，为安全起见，请勿使用图像类型 ARGB。使用图像类型 RGB。完全有可能归咎于您的特定 java 实现。实现没有约定只能在子组件上调用一次绘制。

# jquery - Datatable - 将表格单元格内的 css 分配给其他表格单元格

> ID：13858605
> 
> 赞同：0
> 
> 时间：2012-12-13T11:11:37.120
> 
> 标签：jquery, css, datatable

我正在使用数据[表](http://datatables.net)插件。我的表包含一个列名 css，其中包含该行中列的 css。
例如，数据库中的表如下，

```
 Name   Priority   Percent    CSS 
--------------------------------------------------------- 
 abc    high       50         .priority{color:red}    .percent {color:yellow}
 xyz    low        70         .priority{color:green}  .percent {color:green}
 pqr    medium     10         .priority{color:yellow} .percent {color:red} 
```

现在，在显示数据表时，我不想包含 css 列，但我想在特定单元格上应用 css。我正在尝试实现以下目标，

```
$('#example').dataTable({              
    "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {  
         $(row).children().each(function(index, td){
             // perform operation here
         });
    return nRow;
    } 
```

我不明白如何为特定`<td>`使用`<td>`同一行的 css 添加 css。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:55:56.873

它未经测试，但可能对您有用。在文档就绪处理程序中使用它。

```
$("td:contains('high')").css({"color":"red"});
$("td:contains('high')").next('td').css({"color":"yellow"}); 
```

同样适用于其他 tds：

```
$("td:contains('low')").css({"color":"green"});
$("td:contains('low')").next('td').css({"color":"green"}); 
```

和

```
$("td:contains('medium')").css({"color":"yellow"});
$("td:contains('medium')").next('td').css({"color":"red"}); 
```

如果这可以解决或有帮助，请尝试此操作。

# sql - 使用没有数据透视的sql将一行中的数据与另一行分开

> ID：13858608
> 
> 赞同：0
> 
> 时间：2012-12-13T11:11:41.183
> 
> 标签：sql, sql-server

我的表格采用以下格式。

```
Type   R1   R2  R3
------------------
A      10   14  16
B      2    2   4 
C      0    0   0 
```

我想将 A 除以 B 并将值分别放在 R1、R2、R3 中。

```
Type   R1   R2  R3
------------------    
A      10   14  16
B      2    2   4 
C      5    7   4 
```

请建议。R1、R2、R3 列是动态的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:30:03.307

这应该可以解决问题。我想你可以自己做剩下的事情。

```
SELECT
    (t0.R1 / t1.R1) AS R1,
    (t0.R2 / t1.R2) AS R2,
    (t0.R3 / t1.R3) AS R3
FROM    
    test t0
LEFT JOIN
    test t1
ON
    t1.type = 'B'
WHERE
    t0.type = 'A'; 
```

# c# - 使用 Web 服务 HTTPS（带有用于身份验证的证书）

> ID：13858609
> 
> 赞同：2
> 
> 时间：2012-12-13T11:11:46.543
> 
> 标签：c#, web-services, windows-mobile, ssl-certificate, x509certificate

我正在尝试使用 Web 服务 HTTPS（使用证书身份验证）。我已在我的项目的 Web 参考中添加了我的 Web 服务，并且“myCertificate.cer”已导入到 Console Root\Certificates\Personal。

我有一个错误 401：请求失败，HTTP 状态 401：未授权。

任何想法？

```
....
using System.Security.Cryptography.X509Certificates;
...
string certPath = @"C:\myCertificate.cer";

// Load the certificate into an X509Certificate object.
X509Certificate cert = X509Certificate.CreateFromCertFile(certPath);

// Create an instance of the Web service proxy.
zgetuser_certificate mathservice = new zgetuser_certificate();

// Create an X509Certificate object
mathservice.ClientCertificates.Add(X509Certificate.CreateFromCertFile(certPath));

try
{
    ZgetUser user = new ZgetUser();
    user.Username = "USER01";

    ZgetUserResponse response = new ZgetUserResponse();
    response = mathservice.ZgetUser(user); //ERROR: The request failed with HTTP status 401: Unauthorized.

    Console.WriteLine("{0}, {1}, {2}, {3}", response.Company, response.Firstname, response.Fullname, response.Lastname);
}

catch (Exception ex)
{
    if (ex is WebException)
    {
        WebException we = ex as WebException;
        WebResponse webResponse = we.Response;
        throw new Exception("Exception calling method. " + ex.Message);
    }
} 
```

对不起我的英语不好。谢谢！！！

# javascript - 如何使用 javascript 聚焦表格单元格？

> ID：13858611
> 
> 赞同：2
> 
> 时间：2012-12-13T11:11:54.840
> 
> 标签：javascript, jquery

VB脚本语句，

`Set oHighlightedRow = document.all("SearchRow" & nHighlightedRow)` `oHighlightedRow.cells(0).focus()`

这两个语句需要转换为javascript。任何人都可以帮我找到解决方案吗？谢谢

我的转换代码是，

```
var oHighlightedRow = $("#SearchRow" + nHighlightedRow);
oHighlightedRow.cells[0].focus(); 
```

它是否正确 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:13:38.397

好的：

```
var oHighlightedRow = document.all("SearchRow" + nHighlightedRow);
oHighlightedRow.cells[0].focus(); 
```

或者，更好（假设该行的 id 为`"SearchRow" + nHighlightedRow`）：

```
var oHighlightedRow = document.getElementById("SearchRow" + nHighlightedRow);
oHighlightedRow.cells[0].focus(); 
```

或者，jQuery（再次假设该行的 id 为`"SearchRow" + nHighlightedRow`）：

```
$("#SearchRow" + nHighlightedRow + " td:first").focus(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:17:41.897

您不能将表格单元格集中在所有浏览器上。这是 jQuery 文档所说的：

`The focus event is sent to an element when it gains focus. This event is implicitly applicable to a limited set of elements, such as form elements (<input>, <select>, etc.) and links (<a href>). In recent browser versions, the event can be extended to include all element types by explicitly setting the element's tabindex property. An element can gain focus via keyboard commands, such as the Tab key, or by mouse clicks on the element.`

为了确保这适用于所有浏览器，您可以实现一些 CSS 类并为鼠标键添加事件侦听器。然后只需从表格单元格中添加/删除 css 类。

为了`id="target"`使用这个来聚焦一个元素

```
$('#target').focus();

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:14:56.710

您可以在 jQuery 库的帮助下用简单的线条简单地做到这一点

```
$('selector').focus();                     

// $('selector') --> could be $('#tableId td') 
```

有关更多信息，请查看[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# perl - 部署脚本需要更新配置文件中的整数

> ID：13858620
> 
> 赞同：3
> 
> 时间：2012-12-13T11:12:18.350
> 
> 标签：perl, unix, command-line, sed

我正在开发一个 python 结构脚本，以简化我在不同环境中的解决方案部署。

到目前为止它工作得很好，但我在脚本末尾有一个提示，询问我是否要编辑 .yml 配置文件，基本上，以更新我的资产版本。我手动通过 vim 内部并基本上增加该数字：

```
 reconnection_delay: 50
  max_attempts: 500
  assets_version: 5360 
```

我怎么可能只用命令行自动做到这一点。似乎应该使用 sed 或 perl，但我对此并不熟悉，在这里可能会受到一些帮助！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:00:28.483

```
perl -i.backup -pe 's{ ( \b assets_version: \s+ ) (\d+) $ }{ $1 . ( 1 + $2 ) }xmse;' your.yml 
```

这将创建一个名为*your.yml.backup的**your.yml*副本，查找包含“assets_version:”的行并将数字加 1。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T13:52:54.160

sed 没有任何内置的方法来做算术，所以这并不容易。

**perl**

除了进行正确的 yaml 解析之外，您还可以使用这样的单行代码：

```
perl -anE '$, = " "; $F[1]++ if $F[0] =~ /assets_version/; say @F' 
```

开关将`-a`输入拆分为`@F`数组，从而可以访问字段。

**sed**

GNU sed 可以调用外部程序，因此在 bc 的帮助下，您可以这样做：

```
/assets_version/ {
  h                                      # save line to hold space
  s/[^:]+:\s*(.*)/echo \1 + 1 | bc/e     # convert line to 'echo num + 1 | bc'
                                         # and pass on to /bin/sh
  G                                      # append hold space to pattern space
  s/([^\n]+)\n([^:]+).*/\2: \1/          # reorder to replace with incremented
                                         # number
}' 
```

一行相同：

```
sed -r '/assets_version/ { h; s/[^:]+:\s*(.*)/echo \1 + 1 | bc/e; G; s/([^\n]+)\n([^:]+).*/\2: \1/ }' 
```

如果您想知道如何使用纯 sed 进行操作，这里有一种受`cat -n`GNU sed 手册中示例启发的方法（也适用于 BSD sed）：

*已加入*

```
/assets_version/ { 
  h;                                                  # save for later
  s/[^:]+:\s*//;                                      # only keep number
  /^9*$/ s/^/0/;                                      # need one more number
  s/.9*$/_&/;                                         # mark what will change
                                                      # when incrementing
  H;                                                  # save for later
  s/^.*_//;                                           # only keep what will
                                                      # change
  y/0123456789/1234567890/;                           # transliterate numbers
  G;                                                  # append hold space
  s/([^\n]+)\n([^:]+:\s*)[^\n]+\n([^_]*).*/\2\3\1/;   # reorder to get result
} 
```

请注意，这只适用于非负整数。

使用 GNU sed，像这样运行它：

```
sed -r -f inc.sed infile 
```

BSD 赛德：

```
sed -E -f inc.sed infile 
```

所有情况下的输出：

```
reconnection_delay: 50
max_attempts: 500
assets_version: 5361 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T14:46:42.700

```
awk '/assets_version/{$NF++}1' file > tmp && mv tmp file 
```

只需查找 assets_version 并增加行中的最后一个字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T11:41:14.837

您可以使用 YAML tiny（或其他模块，例如：YAML::XS、YAML::Syck）来读取和写入 YAML 文件。

[https://metacpan.org/pod/YAML::Tiny](https://metacpan.org/pod/YAML::Tiny)

```
use YAML::Tiny;
use Data::Dumper;
# Create a YAML file
my $yaml = YAML::Tiny->new;
#check what the content
print Dumper($yaml);
# Open the config
$yaml = YAML::Tiny->read( 'file.yml' );
# Changing data
#$yaml->[0]->{section} = { this => 'that' };
$yaml->[0]->{reconnection_delay} = 50;
$yaml->[0]->{max_attempts} = 500;
$yaml->[0]->{assets_version} = $yaml->{assets_version} + 1;

# Save the file
$yaml->write( 'file.yml' ); 
```*

# assembly - LEA 或 LOAD 整数？

> ID：13858621
> 
> 赞同：1
> 
> 时间：2012-12-13T11:12:24.793
> 
> 标签：assembly

> **可能重复：**
> [LEA 指令的目的是什么？](https://stackoverflow.com/questions/1658294/whats-the-purpose-of-the-lea-instruction)

刚刚开始使用汇编语言，我想如果有人能告诉我使用之间的区别：

`load R1,one[R0]`而不是`lea R1,1[R0]`

仅将 R1 中的值用作增量值时。对于前者，数据是给定的（一个数据 1），而对于后者的数据则不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:14:59.417

在第一种情况下，您正在加载*数据*，在第二种情况下，您正在加载*地址*。

例如，如果 R0 包含 0x1000：

```
 addr   data
R0 -> 0x1000 0x42
             0x48
             0x49
             0x43
             0x30 
```

然后`load R1,1[R0]`将 0x4849 加载到 R1（假设加载指令是 16 位加载，并且架构是大端），而`lea R1,1[R0]`将 0x1001 加载到 R1。

# sql-server - 使用数据测试架构以对其运行查询

> ID：13858622
> 
> 赞同：0
> 
> 时间：2012-12-13T11:12:32.907
> 
> 标签：sql-server

SQL Server 是否有一些包含客户、订单等数据的测试架构来运行查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:15:51.800

[AdventureWorks 示例数据库](http://msftdbprodsamples.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:42:19.743

对于 SQL Server 2000 - [NorthWind 和 Pubs 数据库](http://www.microsoft.com/en-us/download/details.aspx?id=23654)

对于 2005 年的 SQL Server - [AdventureWorks 数据库](http://sqlserversamples.codeplex.com/)

# spring - 如何在运行时更改时间调度程序

> ID：13858625
> 
> 赞同：3
> 
> 时间：2012-12-13T11:12:39.020
> 
> 标签：spring, scheduler

我正在使用 spring 框架中的调度程序。我想在运行时通过 jmx-console 配置调度程序时间。这可能吗？

例如@Scheduled(cron = "0/10 * * * * *") 我想在运行时给出新值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:02:26.180

我不认为现在这很容易，但肯定有可能。您必须公开一种机制以将触发器 bean 重新注入调度程序。如果你想看到一个选项，我在这里做了：[https](https://github.com/SpringSource/cloudfoundry-samples/blob/master/stocks/src/main/resources/server-bootstrap-config.xml) ://github.com/SpringSource/cloudfoundry-samples/blob/master/stocks/src/main/resources/server-bootstrap-config.xml 。

# actionscript-3 - ActionScript EventListener 的问题

> ID：13858627
> 
> 赞同：2
> 
> 时间：2012-12-13T11:12:46.833
> 
> 标签：actionscript-3, event-listener

我正在尝试将 2 个功能放在 1 个事件上。通过单击鼠标左键，您可以使正方形的可见性变为真假。然而，它只工作一次。它在第一次单击时消失，在第二次单击时重新出现。之后它不再起作用。我如何使它即使在使用后也能不断读取代码？这是我的代码：

```
var poop = true;

stage.addEventListener(MouseEvent.CLICK, dissappearsquare)
function dissappearsquare(evt:MouseEvent):void
{
if(poop == true)
{
square2.visible = false;
poop = false;
}
stage.addEventListener(MouseEvent.CLICK, dissappearsquare1)
function dissappearsquare1(evt:MouseEvent):void
{
if(poop == false)
{
    square2.visible = true;
    poop = true;
}
 }
 }
 } 
```

我希望我提供了足够的信息，感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:42:08.537

拥有两个 EventListener，您可以让它们同时执行，以便一个*覆盖*另一个的操作。

你只需要一个，而且更简单：

```
stage.addEventListener(MouseEvent.CLICK, dissappearsquare)
function dissappearsquare(evt:MouseEvent):void
{
     square2.visible = !square2.visible
} 
```

这意味着：

```
stage.addEventListener(MouseEvent.CLICK, dissappearsquare)
function dissappearsquare(evt:MouseEvent):void
{
     if (square2.visible == true) {
         square2.visible = false
     }
     else if (square2.visible == false) {
         square2.visible = true
     }
} 
```

# c# - 用于 asp.net 的 GCM 推送通知服务器端

> ID：13858630
> 
> 赞同：0
> 
> 时间：2012-12-13T11:12:56.367
> 
> 标签：c#, asp.net, .net, push-notification, google-cloud-messaging

我是 .net 新手，使用 .net 作为 GCM 推送通知的服务器端。我正在使用下面的代码，它适用于单个用户（对于低于 regId）。我的问题是如何将所有 reg-id 保存在我们的 .net 服务器中？我不知道它是否保存在我们的服务器中。如果不保存注册ID，那么如何向所有注册用户发送推送通知？

```
 protected void Button1_Click(object sender, EventArgs e)
            {

                string regId = "APA91bFUgrdgtdgfdgxxxxxxxxxxxxxxxxxxxxxxxxxx6t1QDCn-4IiIAtvBhEt328QeYeLKoDeDFOgumrgACdydLCLvM0wM59nAzm_fZse3ta_A";

//server api key
                var applicationID = "AIzaSDGjvbnviiuteuoidsgdfsdryiIfgA";

                var SENDER_ID = "77xxxxxx25";
                var value = Label1.Text;  //message box label
                WebRequest tRequest;
                tRequest = WebRequest.Create("https://android.googleapis.com/gcm/send");
                tRequest.Method = "post";
                tRequest.ContentType = " application/x-www-form-urlencoded;charset=UTF-8";
                tRequest.Headers.Add(string.Format("Authorization: key={0}", applicationID));

                tRequest.Headers.Add(string.Format("Sender: id={0}", SENDER_ID));

                // string postData = "{ 'registration_id': [ '" + regId + "' ], 'data': {'message': '" + txtMsg.Text + "'}}";
                string postData = "collapse_key=score_update&time_to_live=108&delay_while_idle=1&data.message=" + value + "&data.time=" + System.DateTime.Now.ToString() + "&registration_id=" + regId + "";
                Console.WriteLine(postData);
                Byte[] byteArray = Encoding.UTF8.GetBytes(postData);
                tRequest.ContentLength = byteArray.Length;

                Stream dataStream = tRequest.GetRequestStream();
                dataStream.Write(byteArray, 0, byteArray.Length);
                dataStream.Close();

                WebResponse tResponse = tRequest.GetResponse();

                dataStream = tResponse.GetResponseStream();

                StreamReader tReader = new StreamReader(dataStream);

                String sResponseFromServer = tReader.ReadToEnd();

                Label3.Text = sResponseFromServer;
                tReader.Close();
                dataStream.Close();
                tResponse.Close();

            } 
```

现在我在我的 android 设备中收到推送通知，[以及](http://img201.imageshack.us/img201/5599/gcmavdfirstmsg.png)如何发送或获取诸如“hii”、“test”之类的短信......而不是“你有痒痒”。请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T13:02:15.790

这是android方面的错误。终于解决了。

# javascript - 在 jquery/javascript 中检查单词是否有零和 preand

> ID：13858631
> 
> 赞同：0
> 
> 时间：2012-12-13T11:13:03.953
> 
> 标签：javascript, jquery, string

这里的案例是

我有从 1 到 999 的数字，如果 3 位数不够，我需要准备零

例如。

```
1 => 001
9=>009
11=> 011
111 =>111 
```

有没有办法完成这种任务？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:18:22.830

```
function get3DigitStr(num) {
  if (num > 99) return num + "";
  var s = "00" + num;
  return s.substr(-3);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:16:40.550

该`pad(number,length)`函数需要一个数字和要添加到它的填充量。然后它循环 n 次，每次添加一个 0，直到满足长度。

```
 function pad(number, length) {
      var str = '' + number;
      while (str.length < length) {
         str = '0' + str;
      }
      return str;
   }

    var results = [];

    for(var i = 0; i < 999; i++){
       results[i] = pad(i,3); 
    }

    console.log(results);
            /* Outputs ["001","002","003","004", "005", "006","007","011","012","013","014","015","111","222", "333"]*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:16:42.120

尝试这个 ：

```
var value
while ((value+"").length < 3)
    value = "0" + value;
document.write(value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T11:25:21.203

试试这个功能：

```
function add(value) {
    return value.length < 3 ? add("0"+value) : value
} 
```

这里有一些例子：

```
var newvalue = add("1"); //newvalue = "001"
var newvalue = add("21"); //newvalue = "021"
var newvalue = add("999"); //newvalue = "999" 
```

你可以在这里测试它：[DEMO](http://jsfiddle.net/9PmFS/2/)

# forms - 不想在 wordpress 的作业管理器插件中列出

> ID：13858633
> 
> 赞同：2
> 
> 时间：2012-12-13T11:13:06.763
> 
> 标签：forms, wordpress

我必须在我的一个客户网站上使用表格申请工作。我正在使用 Wordpress 的 Job Manager 插件。它非常好，并且提供了我想要的所有字段。它自己创建了一个页面并首先显示工作列表，然后单击“立即申请”链接，它指向表单。

但我只想出示申请表。我将在表格本身中列出职位。我检查了设置，但找不到任何跳过工作列表的选项。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:01:12.650

当您说“但我只想显示申请表”时，您的意思是您想将其他地区的人直接链接到申请表吗？像[http://www.yoursite.com/jobs](http://www.yoursite.com/jobs)这样的东西只是将他们直接带到应用程序而不是一份工作的工作清单？

单击链接以访问应用程序后，您会看到一个唯一的 URL。所以你想直接链接到那个。正确的？如果他们只有一个职位空缺，这将很好。但是当他们添加另一个时，您要么需要进入并更改该硬连线代码，要么您需要编写代码片段来获取列表。查看插件中的代码以获取特定提示。或在此处发布一些清晰的信息以获得更详细的答案。

或者，看看 Gary Pendergast 的“Job Manager”插件。那可能有你需要的选项。

# jquery - 从 API 中检索完整日期并随后格式化

> ID：13858637
> 
> 赞同：2
> 
> 时间：2012-12-13T11:13:10.533
> 
> 标签：jquery, regex, date, replace, format

我正在从 API 中检索日期，其格式为：

```
Thu, 13 Dec 2012 12:59:05 +0200 
```

请注意，上述格式打印为字符串，**我想将其格式化为**：

```
Thu, 12:59 
```

如果不多次使用 jQuery replace()，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:30:46.300

尝试这个 -

```
var st = "Monday, 9 Jan 2012 12:59:05";
var dt = new Date(st);
var m_names = new Array("Sun", "Mon", "Tue","Wed", "Thu","Fri", "Sat");
var dayInNum =dt.getDay();
var desireDate = m_names[dayInNum] + ","+ dt.getHours() +":"+ dt.getMinutes();
alert(desireDate); 
```

# php - 将带有 php curl 的文件从客户端上传到服务器？

> ID：13858644
> 
> 赞同：1
> 
> 时间：2012-12-13T11:13:41.343
> 
> 标签：php, file, curl, upload

我正在尝试从客户端脚本自动上传文件，该脚本在我的服务器中打开一个 PHP 页面，将本地路径作为`GET`参数发送。这是一个简单的python脚本。我的问题是，我不能只填写输入类型文件的值并自动发布表单，因为出于安全原因，这不起作用。

所以，我想到了使用 Curl，但后来我意识到......我无法访问`$_FILES['myfile']['tmp_name']`我的服务器中的 a 因为这只是用 a 发布的`multipart/form-data form`，对吗？

有办法解决这个问题吗？有没有其他方法可以从浏览器上传文件？因为我想使用 openID 身份验证，然后将上传者的电子邮件保存在 MySQL 数据库中，所以最好能够使用 PHP 来做到这一点。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:33:19.910

我认为您还没有真正理解为什么 curl 不是一个可行的解决方案。默认情况下，您的个人计算机文件*不会*暴露在外部。而不是这样，如果你想共享你的硬盘，你需要安装和配置很多东西：

1.  您需要配置路由器，以便将传入连接重定向到您的 PC
2.  您需要配置防火墙，以便让传入的连接通过
3.  您需要安装一个可以接受和提供文件请求的软件（Web 服务器、FTP 服务器、NFS 服务器......）
4.  您需要指示此类软件要共享哪些精确文件（您不希望整个硬盘驱动器向世界开放）
5.  您可能想要限制谁可以访问您的文件：用户名 + 密码、证书、IP 地址过滤器...

如果您想在没有用户干预的情况下上传文件，用户需要在他的计算机上安装一个提供该功能的程序：我提到的那些程序之一或自定义程序。使用准系统标准网络浏览器无法做到这一点。

你说了一些关于*客户端*Python 脚本的事情。不确定 Python 上下文中客户端的含义，但 Python 绝对能够打开 HTTP 连接并发送文件。跟随那条轨道。

# java - Apache Ace 可以用作 Maven 存储库吗？

> ID：13858646
> 
> 赞同：2
> 
> 时间：2012-12-13T11:13:48.660
> 
> 标签：java, apache, maven, repository, apache-ace

我们想为 maven 使用一些存储库，我们使用 Artifactory、Nexus 等作为存储库。**

> 但我只想知道我们是否可以使用 Apache Ace 作为 Maven 存储库？

** 如果是，如何在 Maven 的 setting.xml 中为存储库配置 ace？请指教..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:11:09.330

Apache ACE 当前带有一个支持 OBR（OSGi Bundle Repository）规范的存储库。这意味着它包含所有可以通过 URL 直接引用的工件，并且这些工件包含在名为“repository.xml”的文件中描述的元数据。格式与 Maven 不同，因此除非 Maven 开始支持 OBR，否则现在的答案是“否”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:47:18.060

我不是 100% 确定，但 Nexus 以及 Artifactory 支持 p2 存储库，可用于 Eclipse 作为插件的来源，但为此您需要商业的。此外，我不确定 Apache Ace 是否会朝着相同的方向发展。

# alignment - 枚举的 P/Invoke

> ID：13858650
> 
> 赞同：0
> 
> 时间：2012-12-13T11:13:57.773
> 
> 标签：alignment, pinvoke, packing

我想从 C# 调用 DISM API 来找出安装了哪些可选的 Windows 功能。DISM 功能不会出现在著名的 pinvoke.net 网站上，因此我开始使用 P/Invoke Interop Assistant 工具来解决这个问题。

问题涉及一个这样开始的结构：

```
[StructLayout(LayoutKind.Sequential)]
public struct DismFeatureInfo
{
    /// PCWSTR->WCHAR*
    [MarshalAs(UnmanagedType.LPWStr)]
    public string FeatureName;

    /// DismPackageFeatureState
    [MarshalAs(UnmanagedType.I4)]
    public DismPackageFeatureState FeatureState;

    /// PCWSTR->WCHAR*
    [MarshalAs(UnmanagedType.LPWStr)]
    public string DisplayName; 
```

我有一个指向 unmanaged 的​​指针`DismFeatureInfo`。当我使用时，`Marshal.PtrToStructure`我得到了一个`FatalExecutionEngineError`例外。

如果我从后面注释掉所有字段`DisplayName`（仅保留前两个），那么它可以工作，并且我会在`FeatureName`.

如果我使用调试器内存窗口检查结构地址处的内存，它会按预期布局。我在 64 位运行，它开始：

```
[ 8 bytes ] // pointer to a string containing the feature name
[ 4 bytes ] // enum value 
[ 8 bytes ] // pointer to a string containing the display name 
```

更重要的是，如果我手动执行偏移来读取指针，然后从中获取字符串：

```
var featureName = Marshal.PtrToStringUni(Marshal.ReadIntPtr(featureInfoPtr));
var displayName = Marshal.PtrToStringUni(Marshal.ReadIntPtr(featureInfoPtr, 8 + 4)); 
```

效果很好 -`displayName`包含显示名称。

这一切都表明`enum DismPackageFeatureState`正在编组为错误的大小。从检查原始内存来看，它绝对应该是 4 个字节。我已经设置了一个属性说它应该是`I4`.

如果我将`FeatureState`字段更改为：

```
public UInt32 FeatureState; 
```

然后我仍然得到异常。那么发生了什么？

*（注意。我对 P/Invoke 方面特别感兴趣，而不是我原来的问题。从那以后，我通过更轻松地找到了我需要的信息，`new ManagementClass("Win32_OptionalFeature")`但仍然对我在尝试使 P/Invoke 工作时发现的内容感到困惑，并且想知道发生了什么。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:59:29.190

这似乎是对齐而不是大小的不匹配。`DisplayName`指针有 8 字节对齐。但是根据你对布局的分析，它被放置在一个 4 字节的边界上。您问题中的 C# 代码将给出`DisplayName`16 的偏移量。但您的分析表明它的偏移量为 12。这使我怀疑本机`struct`实际上已打包。

```
[StructLayout(LayoutKind.Sequential, Pack=1)]
public struct DismFeatureInfo
.... 
```

应该可以解决您的问题。

**更新**

我可以确认我的预感是正确的。在包装结构声明的 dismapi.h 中可以找到以下内容：

```
#pragma pack(push, 1) 
```

# java - 检查派生类是否有来自超类的注解

> ID：13858651
> 
> 赞同：2
> 
> 时间：2012-12-13T11:14:06.700
> 
> 标签：java, oop, inheritance, annotations

我需要检查，形成超类，如果派生类有特定的注释：

```
public class SuperClass
{
  public boolean hasAnnotation()
  {
    //super_class_method_code
  }
}

@annotationToCheck
public class DerivedClass extends SuperClass
{
   //derived_class_code
} 
```

在Java中可能吗？我知道如何用 C# 做，但在 Java 中我找不到任何解决方案...... :(

谢谢！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T11:23:10.283

如果您的实例实际上是子类类型，这就像在超类型中定义方法以具有以下实现一样简单：

```
this.getClass().isAnnotationPresent(annotationToCheck.class); 
```

由于`this`是 DerivedClass 的一个实例，因此 getClass 返回 DerivedClass 并且检查有效。

注意2：正如@Pshemo 在评论中提到的那样，这仅在注释带有注释时才有效`@Retention(RetentionPolicy.RUNTIME)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:47:33.210

[使用反射](http://code.google.com/p/reflections/)项目获取派生类的另一种方法。此反射项目具有依赖项（slf4j、log4j 和 javassist 等）。

**注意：**派生类应该只在提到的包中。

```
import java.util.Set;

import org.reflections.Reflections;

public class Base {

    public Base() {
        Reflections reflections = new Reflections("com.sree.despacerivedclasskage");
        Set<Class<? extends Base>> classes = reflections
                .getSubTypesOf(Base.class);
        System.out.println(classes);
        for(Class clazz: classes){
            System.out.println(clazz.isAnnotationPresent(ToCheck.class));
        }

    }
public static void main(String[] args) {
    Base b = new Base();
}

} 
```

# java - jni中的内存问题

> ID：13858652
> 
> 赞同：-4
> 
> 时间：2012-12-13T11:14:11.593
> 
> 标签：java, c++, java-native-interface

我正在使用 JNI 在 c++ 应用程序中调用 java 代码

执行java代码需要10GB，在c ++中执行函数（在调用java代码中）后，它不会释放内存，但是如果我关闭应用程序然后它会释放内存，你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:46:15.547

JVM在启动时分配虚拟内存，用于堆等，通常在停止之前不会释放它。这样做是因为堆是托管内存，JVM 期望以这种方式管理它。这对于长时间运行的流程最有效，但对于您所拥有的单点解决方案来说效果不佳。

如果您将 JVM 作为一个单独的进程运行，它将按您的预期运行。

# c++ - 正数和负数的位运算符

> ID：13858655
> 
> 赞同：8
> 
> 时间：2012-12-13T11:14:15.357
> 
> 标签：c++, bitwise-operators

```
 -5 / 2 = -2

    -5 >> 1 = -3 
```

我从老师那里了解到 >>1 将数字除以 2。它适用于正数，但不适用于负数。谁能给我解释一下？？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T11:38:32.837

正如 BЈовић & 神秘状态，对负数使用位移运算符是实现定义的。
原因是 C 不区分逻辑位移和算术位移。
（具有最高有效位的算术填充，带 0 的逻辑填充）
对于正数这无关紧要，因为算术和逻辑位移都会将最高有效位保持为 0：
算术 5>>1
`0000 0000 0000 0101` = 5
到
`0000 0000 0000 0010` = 2

逻辑 5>>1
`0000 0000 0000 0101` = 5
到
`0000 0000 0000 0010` = 2

但是使用负数（2 的补偿）
算术 -5>>1
`1111 1111 1111 1011` = -5
到
`1111 1111 1111 1101` = -3

逻辑 -5>>1
`1111 1111 1111 1011` = -5
到
`0111 1111 1111 1101` = 32,765

或者至少，我是这样理解的

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T11:17:06.297

> 它适用于正数，但不适用于负数。

对负整数使用移位运算符是实现定义的。

* * *

[expr.shift]/3 告诉这个：

> E1 >> E2 的值是 E1 右移 E2 位位置。如果 E1 具有无符号类型或 E1 具有带符号类型和非负值，则结果的值是 E1/2E2 的商的整数部分。如果 E1 具有带符号类型和负值，则结果值是实现定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:22:35.040

首先，
二进制中的 5 是 0000 0000 0000 0101 但是 -5 呢？这里是 ：

1.  将 1 更改为 0 并将 0 更改为 1 ，然后我们得到 1111 1111 1111 1010
2.  然后取那个数字 + 1 ，我们得到 1111 1111 1111 1011

现在我们得到： -5= 1111 1111 1111 1011 （它是 2 的补码形式）
所以这里是如何计算 -5>>1 ：

1.  将 -5 的每一位从左向右移动 ( >> ) 我们得到**111** 1111 1111 1101 （只剩下 15 位）
2.  因为-5是负数，所以我们必须在第一位填充'1'使其变为16位然后我们得到1111 1111 1111 1101（它仍然是2的补码形式）
3.  现在通过将 0 更改为 1 ，将 1 更改为 0 将其转换为正常的二进制形式（除了第一位，因为它在 2 的补码中定义负数），然后加上 '1' 。所以我们得到 1000 0000 0000 0011 = -3

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T12:42:11.410

> 我从老师那里得知 >>1 将数字除以 2。

它不会将整数除以 2，但会执行（取决于值）[逻辑](http://en.wikipedia.org/wiki/Logical_shift)或[算术右移](http://en.wikipedia.org/wiki/Arithmetic_shift)一位。在某些情况下，它恰好等于除以二。

> 它适用于正数，但不适用于负数。

*它适用*于这两种情况，但确切的行为不是标准规定的，而是实现定义的。它通常除以 2 并将结果截断为负无穷大，与正常除法的结果相反，趋向于零。

以供参考：

*   [http://en.cppreference.com/w/cpp/language/operator_arithmetic](http://en.cppreference.com/w/cpp/language/operator_arithmetic)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-05T10:41:31.147

我猜是-5>>1 = -3的答案。如果是正数，比如 5，除以 2 会得到 2.5 四舍五入到最接近的最小整数，即 2

但是当我们考虑负数 -5 时，除以 2 得到 -2.5。它四舍五入到最接近的整数给出-3。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T22:32:04.410

在c中，右移运算符保留符号位。因此，在保留符号位的情况下右移位再次产生一个负数，它是两个补码形式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T11:31:37.097

我认为答案是正确的。作为'/'（除法）运算符生成商（除法的结果）。

## 在您的问题中：

```
-5/2 = -3(quotient) and 1(remainder ). 
```

所以这对正数和负数都可以。

## 正数：

```
5/2 = 2(quotient) and 1(remainder ). 
```

所以用正数就可以了。

## 笔记

余数永远不会是负数。它始终是正数。

# php - php中选定的导航项

> ID：13858657
> 
> 赞同：1
> 
> 时间：2012-12-13T11:14:17.787
> 
> 标签：php, navigation

为什么此代码不保留在我的导航中选择的项目？

```
<?php
function navItemSelected($pg)
{
  global $pgname;
  if ($pg == $pgname)
  {
    echo "active";
  }
}
?>

<!-- ===== NAVIGATION ===== -->
<div id="navigation">
    <div class="wrapper">
        <div id="menu">
            <ul>
                <li class="home"><a href="index.php" class="<?php echo navItemSelected('home'); ?>">home</a></li>
            </ul>
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:19:08.513

```
 function navItemSelected($pg){
     global $pgname;
     if ($pg == $pgname){
     //echo "active"; Don't echo here
     return "active";
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:19:30.590

要么`$pgname`没有您期望的值，要么您在尝试回显一个不返回任何内容而是运行回显本身的函数时遇到一些错误。调用函数时尝试删除回声。您还可以尝试打印`$pgname`为文本以确保它具有您期望的值。

# c# - 如何在启动 RDP 时抑制弹出窗口

> ID：13858663
> 
> 赞同：1
> 
> 时间：2012-12-13T11:15:02.813
> 
> 标签：c#, asp.net, rdp

我有一个网站。在一页中，我试图根据某个键启动 RDP。其中一个键可以关联到多个远程桌面会话。现在我的要求是抑制每个会话每次都会出现的弹出窗口。这有点烦人。请帮我。我对这样的要求也有点陌生。我已将 C# 用于我的 Web 应用程序。

![这是我要抑制的弹出窗口。][1]

# wpf - 禁用 WPF 应用程序的 DPI 感知

> ID：13858665
> 
> 赞同：28
> 
> 时间：2012-12-13T11:15:09.580
> 
> 标签：wpf, scaling, dpi

再会！

我已经在 WPF 应用程序上工作了一段时间（作为一种学习体验，哦，天哪，这是一种学习体验），它终于准备好发布了。发布意味着将其安装在我的 HTPC 上，用于浏览我的电影收藏。

我在运行 1920*1080 但处于正常 DPI 设置的 PC 上设计了它，而 HTPC/TV 运行在相同的分辨率但出于显而易见的原因更高的 DPI 设置。

问题是我的应用程序在 HTPC 上变得疯狂，就视觉效果而言，几乎所有东西都搞砸了。我知道这是由于糟糕的设计（mea culpa），但由于它是一个仅供我使用的应用程序，我正在寻找快速修复，而不是完全重新设计。我读到可以通过将以下内容添加到 AssemblyInfo.cs 来阻止应用程序感知 DPI：

```
[assembly: System.Windows.Media.DisableDpiAwareness] 
```

但是，它似乎没有任何效果，并且应用程序的行为保持不变。

谁能指出我正确的方向？

谢谢你，约翰

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-13T11:36:41.460

## DPIA意识

只是一些想法（未尝试）：

你在XP上运行吗？该选项可能不适用于该平台。

*   [http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/5e60a54d-baf5-46e3-9eac-a959f2a0fba1/](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/5e60a54d-baf5-46e3-9eac-a959f2a0fba1/)

以下可能只是设置相同 DpiAwareness 选项的不同方法：

*   查看EXE上的“兼容模式”设置...右键单击它的属性...然后打开“禁用显示缩放”

    ![](../Images/a8c8cd3fef8654a4abe365c0a29a38b0.png)

*   创建一个清单，并说你不知道

    ```
    <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0" xmlns:asmv3="urn:schemas-microsoft-com:asm.v3" >
     ...
      <asmv3:application>
        <asmv3:windowsSettings xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
          <dpiAware>false</dpiAware>
        </asmv3:windowsSettings>
      </asmv3:application>
     ...
    </assembly> 
    ```

*   调用`SetProcessDPIAware`（认为你必须尽早调用，即在创建 Window 之前）

    [http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633543 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633543%28v=vs.85%29.aspx)

您可以致电`IsProcessDPIAware`检查您的应用程序进程是否已应用该设置。

## 找出 DPI

以下是您了解当前使用的 DPI 的方法：

`CompositionTarget`通过`PresentationSource`您的访问`Window`以了解它正在使用什么 DPI 缩放.....然后您可以使用这些值进行一些缩放调整，即缩小您的“东西”（其尺寸/长度/等在设备独立单位中指定） ，因此当由于更高的 DPI 生效而按比例放大时，它不会爆炸物理像素的使用（...这可以通过各种方式完成，例如`ViewBox`，或计算元素的宽度等）。

```
double dpiX, double dpiY;
PresentationSource presentationsource = PresentationSource.FromVisual(mywindow);

if (presentationsource != null) // make sure it's connected
{
    dpiX = 96.0 * presentationsource.CompositionTarget.TransformToDevice.M11;
    dpiY = 96.0 * presentationsource.CompositionTarget.TransformToDevice.M22;
} 
```

*   [如何将 WPF 大小转换为物理像素？](https://stackoverflow.com/questions/3286175/how-do-i-convert-a-wpf-size-to-physical-pixels)
*   [http://wpftutorial.net/DrawOnPhysicalDevicePixels.html](http://wpftutorial.net/DrawOnPhysicalDevicePixels.html)

## 做缩放调整

*   使用`ViewBox`技巧

    请参阅我之前提出的这个答案，`Canvas`无论 DPI 缩放如何，都允许使用被解释为“本机”像素的位置。

    [液晶屏全高清的WPF](https://stackoverflow.com/questions/12412092/wpf-for-lcd-screen-full-hd)

*   访问 上的`TransFormToDevice`缩放矩阵`CompositionTarget`，并从中计算一个新矩阵，该矩阵只是撤消该缩放并在`LayoutTransform`or中使用它`RenderTransform`。

*   使用一种方法（甚至可能将其放入转换器中），以显式修改 DIP（设备独立位置）位置/长度....如果您希望窗口大小与特定像素大小匹配，您可以这样做。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-02T01:12:43.403

[这篇博客文章](http://www.mesta-automation.com/tecniques-scaling-wpf-application/)解释了如何使用[装饰器](https://msdn.microsoft.com/en-us/library/system.windows.controls.decorator%28v=vs.110%29.aspx)子类来做到这一点。

简而言之，创建一个这样的类：

```
namespace MyNamespace
{
    public class DpiDecorator : Decorator
    {
        public DpiDecorator()
        {
            this.Loaded += (s, e) =>
            {
                Matrix m = PresentationSource.FromVisual(this).CompositionTarget.TransformToDevice;
                ScaleTransform dpiTransform = new ScaleTransform(1 / m.M11, 1 / m.M22);
                if (dpiTransform.CanFreeze)
                    dpiTransform.Freeze();
                this.LayoutTransform = dpiTransform;
            };
        }
    };
}; 
```

然后`xmlns:custom="clr-namespace:MyNamespace"`在您的顶级窗口定义中添加类似的内容，然后将您的 DPI 独立用户界面与`<custom:DpiDecorator>`...括起来`</custom:DpiDecorator>`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-25T02:46:34.253

以上都没有真正禁用 WPF 中的 dpi 缩放。

这是 WPF 在 .net 4.6 中计算 dpi 缩放的方式：1) HwndTarget，它是所有视觉对象使用的 CompositionTarget。2) UIElement 是视觉效果的基类，也是存储dpi缩放计算结果的地方。

WPF 确保在准备第一个视觉对象时计算一次全局缩放。这由 HwndTarget {private static bool _setDpi = true} 上的布尔值控制。计算 dpi 后，_setDpi 字段设置为 false，并且 dpi 感知方法是使用像这样的代码的快捷方式 {if (!HwndTarget._setDpi) return;}

每个 UIElement 都会发生类似的事情，它具有相同的模式，使用 {private static bool _setDpi = true} 允许第一次计算。

下一个检查来自 ProcessDpiAwareness，它可以是 None、Process 或 Monitor。为了阻止 WPF 考虑单个监视器，您需要将 ProcessDpiAwareness 设置为 Process (int 1)。

最后，当计算 dpi 时，结果存储在 UIElement 上称为 DpiScaleXValues 和 DpiScaleYValues 的 2 个列表中。因此，您需要将这些初始化为正确的值。

这是我自己使用的示例代码（仅适用于 .net 4.6）：

```
 var setDpiHwnd = typeof(HwndTarget).GetField("_setDpi", BindingFlags.Static | BindingFlags.NonPublic);
        setDpiHwnd?.SetValue(null, false);

        var setProcessDpiAwareness = typeof(HwndTarget).GetProperty("ProcessDpiAwareness", BindingFlags.Static | BindingFlags.NonPublic);
        setProcessDpiAwareness?.SetValue(null, 1, null);

        var setDpi = typeof(UIElement).GetField("_setDpi", BindingFlags.Static | BindingFlags.NonPublic);

        setDpi?.SetValue(null, false);

        var setDpiXValues = (List<double>)typeof(UIElement).GetField("DpiScaleXValues", BindingFlags.Static | BindingFlags.NonPublic)?.GetValue(null);

        setDpiXValues?.Insert(0, 1);

        var setDpiYValues = (List<double>)typeof(UIElement).GetField("DpiScaleYValues", BindingFlags.Static | BindingFlags.NonPublic)?.GetValue(null);

        setDpiYValues?.Insert(0, 1); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T13:16:53.400

一个快速的解决方法就是将 Window 的内容包装在[Viewbox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox%28v=vs.100%29.aspx)中。如果 Viewbox 的直接子项具有明确的宽度和高度，并且如果两台机器上的纵横比相同，那么这应该可以让您立即启动并运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-28T02:52:47.593

`DpiAwareness`仅影响 DPI 虚拟化。在 Windows 中，它在 Windows 7 和 8 自定义分辨率框中显示为“使用 Windows XP 样式缩放”，其中选中表示禁用，未选中表示启用。（如果您更改它，请记住在主字体大小屏幕上应用！确定框是不够的。）

如果您关闭了 DPI 虚拟化，那么您的应用程序告诉它支持的操作系统的内容将产生零差异，它将始终使用标准缩放。当它打开时，它会在真正的缩放（感知）和只是对整个应用程序（不感知）进行双线性调整之间产生差异。

我只记得另一个警告，如果没有 Aero Glass 工作，DPI virt 根本无法工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-28T03:17:46.073

Calin Pirtea 的回答真正禁用了 DPI 缩放。

对于那些想要将应用程序拉伸到 100% 以上并接受模糊的人来说，Carlos Borau 的答案很有效。这是 .NET 4.6 (C#) 的一种方式：

1 将清单文件添加到您的应用程序项目中

1.  右键项目，添加->新建项目
2.  选择常规->应用程序清单文件

2 取消注释并设置 dpiAware = false：

```
 <application xmlns="urn:schemas-microsoft-com:asm.v3">
      <windowsSettings>
          <dpiAware xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">false</dpiAware>
      </windowsSettings>
  </application> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-10T11:41:56.577

对于那些使用 VB.NET 的人来说，访问 app.manifest 的方法是：

[![在此处输入图像描述](../Images/d3466fd13be20ce7194b01644f516426.png)](https://i.stack.imgur.com/naHCR.png)

然后取消注释这部分并将其设置为“false”

[![在此处输入图像描述](../Images/d22311f3b7ae688fea95415553d2400c.png)](https://i.stack.imgur.com/9sSPZ.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-22T00:39:24.837

在 Windows 10 上更新到 .NET 4.8 运行时后，Calin 设置 ProcessDpiAwareness 的方法出现以下异常

> System.ArgumentException：“'System.Int32' 类型的对象无法转换为'System.Nullable'1 [MS.Win32.NativeMethods+PROCESS_DPI_AWARENESS]'类型。”

将代码更改为以下可以解决异常，但我不确定它是否能达到相同的结果。

```
var processDpiAwareness = typeof(HwndTarget).GetProperty("ProcessDpiAwareness", BindingFlags.Static | BindingFlags.NonPublic);

if (processDpiAwareness != null)
{
      var underlyingType = Nullable.GetUnderlyingType(processDpiAwareness.PropertyType);

      if (underlyingType != null)
      {
           var val = Enum.Parse(underlyingType, "PROCESS_SYSTEM_DPI_AWARE");
           processDpiAwareness.SetValue(null, val, null);
      }
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-09T13:44:06.940

就我而言，更改我的 exe 的高 DPI 设置会有所帮助。下面的例子。我在组合框中选择“应用程序”。

[![在此处输入图像描述](../Images/710f34015d71ba5102d21f4dd41ac410.png)](https://i.stack.imgur.com/qD7fa.jpg)

[在此处阅读有关它的更多信息](https://www.digitaltrends.com/computing/how-to-adjust-high-dpi-scaling-in-windows-10/)

# php - 根据参数应用不同的 XSLT 模板

> ID：13858668
> 
> 赞同：1
> 
> 时间：2012-12-13T11:15:24.983
> 
> 标签：php, xslt

我想根据不同的参数应用不同的模板。我不确定如何使用 xslt 来实现这一点。我使用 php 中的 setParameter() 来设置参数。我可以使用 param 在 xsl 中执行此操作吗？如果可以，如何操作？或者有什么更好的方法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="name"></xsl:param>

<xsl:template match="1">

  </xsl:template>

  <xsl:template match="2">

  </xsl:template>

  </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:28:08.610

您可以使用不同的模式。在 XSLT 1.0 中，您需要一个开关：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:param name="name"/>

  <xsl:template match="/">
    <xsl:choose>
      <xsl:when test="$name='1'">
        <xsl:apply-templates select="." mode="mode1"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:apply-templates select="." mode="mode2"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="/" mode="mode1">
    ...
  </xsl:template>

  <xsl:template match="/" mode="mode2">
    ...
  </xsl:template>

</xsl:stylesheet> 
```

在 XSLT 2.0 中，可以在匹配模式中使用参数，例如

```
<xsl:template match="*[$test='1']">

</xsl:template> 
```

但使用模式也是更好的选择。请注意，无论何时定义模板或调用`<apply-templates>`. 如果您有两个处理分支通用的模板，那么您可以给它们一个模式名称，例如`common`或让它们保持无模式。再次请注意，它们只会在使用`<apply-templates>`正确模式（无论是、`mode1`或无模式）时应用。`mode2``common`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:33:16.540

是的，你可以使用这样的东西：

```
$xml = file_get_contents('test.xml');

# LOAD XML FILE
header('Content-Type: text/html; charset=UTF-8');
$XML = new DOMDocument('1.0', 'UTF-8');
$XML->loadXML($xml);

# START XSLT
$xslt = new XSLTProcessor();
$XSL = new DOMDocument('1.0', 'UTF-8');
$XSL->load('test.xsl');
$xslt->importStylesheet( $XSL );
print $xslt->transformToXML( $XML ); 
```

有了这个，您可以使用任何您想要的 xslt，而无需向源 XML 添加任何内容。您需要`--enable-libxml`在 PHP 安装中启用 PHP DOM。

这个想法是：与其更改 XSLT 来做更多的事情，不如实现多个较小的 XSLT 并选择您需要的一个。

如果您想使用 PHP 将参数传递给 XSLT，您需要这样做：

```
$xslt = new XSLTProcessor();
$xslt->setParameter('', 'owner', $name); 
```

# xquery - 如何 ”;” 在 XQuery 中签署单独的事务

> ID：13858669
> 
> 赞同：0
> 
> 时间：2012-12-13T11:15:36.903
> 
> 标签：xquery, marklogic

假设我们要调用`function1 ()`and `function2()`。

但是`function1()`并且`function2()`必须以序列化的方式发生，即如果`function1()`执行则只会`function2()`执行。

我不想使用，`eval()`而是想在`;`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:12:45.110

例如，您可以这样做：

```
xquery version "1.0-ml";

import module namespace "my" at "/my-lib.xqy";

my:function1()

;
xquery version "1.0-ml";

import module namespace "my" at "/my-lib.xqy";

my:function2() 
```

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:09:42.900

你可以试试：

```
(function1(),function2()) 
```

# iphone - 在 iPhone 上传到服务器之前压缩图像大小而不损失质量

> ID：13858673
> 
> 赞同：1
> 
> 时间：2012-12-13T11:15:48.023
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我正在将图像上传到服务器并下载和显示。由于图像尺寸太大，我收到内存警告。有没有更好的方法来压缩图像大小而不会在上传时丢失质量？请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:27:24.660

[在按照此链接](https://stackoverflow.com/questions/612131/whats-the-easiest-way-to-resize-optimize-an-image-size-with-the-iphone-sdk)浏览 Stackoverdflow时，我发现以下代码

```
 + (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize;
 {
    UIGraphicsBeginImageContext( newSize );
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:29:43.420

如果你真的需要无损，你能做的最好的就是将你的图像编码为带有[`UIImagePNGRepresentation`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImagePNGRepresentation). 您也可以在上传之前调整图像大小。

# android - 如何在 Eclipse 中导入 ViewPagerIndicator 库

> ID：13858675
> 
> 赞同：1
> 
> 时间：2012-12-13T11:15:49.377
> 
> 标签：android, android-intent, view, android-viewpager, viewpagerindicator

我提到了这个[链接](https://stackoverflow.com/questions/12316931/android-view-pager-with-page-indicator)。

正如他们所提到的，我将其下载为 zip 文件并尝试将库项目导入 Eclipse，但我不能。相反，我收到一条消息“没有要导入的文件”。如何克服这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T09:06:44.073

通常问题是您的工作区中有一个名为“库”的现有项目，您需要重命名它并再次尝试“从现有代码导入”。

另一种选择是

1.  在项目根目录下，运行 mvn eclipse:clean
2.  然后运行 ​​mvn eclipse:eclipse 来构建 .classpath 和 .project 文件

希望它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:25:56.240

我认为您不能将 ViewPagerIndicator 用作项目中的库。您已将 ViewPagerIndicator 作为项目导入，然后在您的项目中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:18:39.070

您可以在两种可能性之间进行选择：

1.  将库源文件夹复制到您的 android 项目源文件夹中。

2.  如果您不将库作为自己的库项目，请按照下列步骤操作：

Package Explorer > New > Project ... > 选择“Android > Android Project from Existing Code” > 选择解压后的 Lib 文件夹

# iphone - 用户做出选择时如何隐藏 UIPickerView

> ID：13858679
> 
> 赞同：6
> 
> 时间：2012-12-13T11:16:06.340
> 
> 标签：iphone, xcode, hide, uipickerview

我使用以下代码创建了一个自定义 UIPickerView

```
UIPickerView *picker =[[UIPickerView alloc] initWithFrame:CGRectMake(139,50,161,30)];
    picker.delegate=self;
    picker.showsSelectionIndicator=YES;
    picker.hidden=NO;

    [self.view addSubview:picker]; 
```

现在我想在用户简单地选择一行时隐藏pickerView

```
picker.hidden=YES; 
```

现在：1）如何识别用户的选择，然后隐藏无用的pickerview？2) 我可以在 TextField 中显示选择吗？用@“选择”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-09T20:41:16.783

我使用 UIPickerView 作为 TextField 的 inputView （因此替换了屏幕键盘）。我使用以下委托来关闭视图。

```
#pragma mark - UIPickerViewDelegate
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    // Code logic
    [[self view] endEditing:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:19:27.633

在您创建选择器的位置添加此行

```
picker.delegate = self; 
```

你的回电

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    picker.hidden=YES;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T11:29:51.727

使用如下的委托方法`UIPickerView` ..

```
 - (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

        yourTextField.text = [yourArray objectAtIndex:row];
        thePickerView.hidden = YES;

    } 
```

你也可以拿一个`UIButton`并用 的动作事件隐藏它`UIButton`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:20:56.637

您可以在其上使用带有取消和完成文本的 UINavigationBar 和 Barbutton。

您可以参考以下链接

[Objective C 使用“完成”按钮实现 UIPickerView](https://stackoverflow.com/questions/10704592/objective-c-implementing-a-uipickerview-with-a-done-button)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-20T11:43:44.830

UIView *addMealView; // 这里我展示了我的选择器

```
 - (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component 
{   
[addMealView endEditing:YES];   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-11T09:43:48.993

我使用 UIPickerView 作为 TextField 的 inputView（用于替换标准键盘）。我使用 ResignFirstResponder（TextField 方法）来关闭视图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-24T10:00:01.660

在 XCode 12.2 中，您可以使用：

```
thePickerView.isHidden = true 
```

# php - Automodeler 错误 - $_data = [];

> ID：13858681
> 
> 赞同：1
> 
> 时间：2012-12-13T11:16:23.447
> 
> 标签：php, kohana, kohana-3.2

我正在测试 Kohana AutoModeler，但我认为这是 PHP 缺乏知识。

我刚刚设置它并`ErrorException [ Parse Error ]: syntax error, unexpected '['`在/classes/context/user/add/factory.php 中收到此错误。

当我打开文件时，Dreamweaver 无法识别这一行`protected $_data = [];` ，这行`public function __construct(array $data = [])`可能是因为`[]`.

实际上我没有找到 $var = [] 的含义或者如何解决这个问题。

任何帮助您将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:18:08.510

此语法仅在 PHP 5.4+ 中有效，在早期版本中应该是`$_data = array();`

# javascript - 使用javascript切换div标签在xhtml严格中不起作用

> ID：13858682
> 
> 赞同：1
> 
> 时间：2012-12-13T11:16:25.203
> 
> 标签：javascript, html, xhtml, switch-statement

嗨，我需要在 div 标签之间切换，我不知道问题出在哪里...该网站是 XHTML 严格的...

```
$(document).ready(function() {

    var activeId = $(".active").each(function(){
       $("#content" + $(this).attr("id").replace("tab","")).show();
    });

    $(".tabs a").click(function() {
        var $tabs =$(this).closest(".tabs"); 
        $("#content" +$tabs.attr("data-lastContent")).hide();
        $(this).closest(".tabs").find(".active").removeClass("active");
        $(this).addClass("active")
        var id = $(this).closest("li").attr("id").replace("tab","");
        $tabs.attr("data-lastContent", id);
        $("#content" + id).show();
    });

});​ 
```

这是一个菜单，下面的一些 div 我需要切换...我使用这篇文章[http://jsfiddle.net/hKMFb/24/](http://jsfiddle.net/hKMFb/24/)中的代码，但没有成功....

```
<div class="tabs" data-lastContent="1">
<li id="tab1" class="active"><a href="#">PROSBA</a></li>
<li id="tab2"><a href="#">PRŮVODNÍ TEXT</a></li>
<li id="tab3"><a href="#">GALERIE</a></li>
<li id="tab4"><a href="#">JAK POMOCI?</a></li>
</div>
<div id="content1" class="content"><div class="scroller">ahojjjj</div></div>
<div id="content2" class="content"><div class="scroller">nee</div></div>
<div id="content3" class="content"><div class="scroller">ahdad</div></div>
<div id="content4" class="content"><div class="scroller">ahod</div></div> 
```

任何输入表示赞赏。

谢谢。简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:17:57.457

使用基础知识... [DEMO](http://jsfiddle.net/hKMFb/24/)

JS：

```
$(function(){
   $('.content').hide(); //hide all the contents
   $('.active').show();  //show only active
    $('.tab').click(function(event){
        event.preventDefault(); //stop from linking
    $('.content').hide(); //hide all the contents
    $('.selected').removeClass('selected'); //remove class from current tab
    $('.active').removeClass('active'); //remove class from current content
    var id = $(this).attr('href'); //get desired content id
    $(this).addClass('selected'); //add class to clicked tab
    $('#'+id).addClass('active').show(); //add class to active content and display
    });    

});
​ 
```

HTML：

```
<ul>
    <li><a href="content1" class="tab selected">Tab1</a></li>
    <li><a href="content2" class="tab">Tab2</a></li>
    <li><a href="content3" class="tab">Tab3</a></li>
    <li><a href="content4" class="tab">Tab4</a></li>
</ul>
<div id="display">
    <div id="content1" class="content active">blah</div>    
    <div id="content2" class="content">blahh</div>
    <div id="content3" class="content">blahhh</div>
    <div id="content4" class="content">blahhhh</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
.selected { color: #933; } 
```

# graph - 合并一个小世界图和一个高聚类但对应直径太高的图

> ID：13858686
> 
> 赞同：1
> 
> 时间：2012-12-13T11:16:37.450
> 
> 标签：graph, p2p, topology

我有一种算法可以创建具有高聚类的网格拓扑，并且它的直径很小（小世界图）。另外，我还有另一个创建高聚类图但相应的直径太高的图。

现在我想将这两个图与常见（可能相同）节点合并，但我不知道如何。

我想知道该图的属性（尤其是直径和聚类系数）是什么。

有什么建议么？

# javascript - 如何在 MFC 中实现的 WebBrowser 控件 window.external 方法中生成异常？

> ID：13858690
> 
> 赞同：1
> 
> 时间：2012-12-13T11:16:57.557
> 
> 标签：javascript, c++, mfc, browser

我使用 WebBrowser 控件和 MFC HTML 对话框来构建可移植的 C++ 应用程序界面。我使用 window.external（实际上是我的对话框类）在浏览器中为 JavaScript 代码公开 C++ 功能。因此，例如，当用户想要保存设置时，他单击“保存”按钮，在这种情况下，我像这样调用 window.external：

```
<script type="text/javascript">
$("#Save").click(function() {
try
{
   window.external.Save();
}
catch(error)
{
   alert(error);
});
</script> 
```

现在，在 HTML 对话框中，我有这样的方法：

```
void CMyDialog::Save()
{
   // Do something...
} 
```

如果用户输入了无效的设置，那么在 CMyDialog::Save() 中生成异常以停止方法执行并显示任何错误消息似乎是合乎逻辑的。但是，这里的问题是C++异常必须由JavaScript处理，我不知道如何实现它。那么：**有没有什么方法可以在 C++ 代码中抛出异常，让 JavaScript 可以用它的 try-catch 语句来处理它？** PS 我知道有一些方法可以避免这个问题，例如，可以从 Save 方法返回错误代码而不是抛出异常并在成功时返回 0 等；但是，至少对我来说，异常是报告错误的更舒适和直观的方式，所以如果有人知道解决方案，请写下你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:10:57.233

在 C++ 代码中，您通过返回`HRESULT`显示失败的值（负值）来指示错误。仅这些就已经转换为脚本异常（[错误对象](http://msdn.microsoft.com/en-us/library/ie/dww52sbt%28v=vs.94%29.aspx)）。

如果要提供扩展信息，例如消息，可以在实现/接口[`ISupportErrorInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221083%28v=vs.85%29.aspx)的 C++ 类上实现接口，并返回错误信息，如 MSDN 上的此主题：[返回错误信息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221062%28v=vs.85%29.aspx)。`IDispatch``IDispatchEx`

# html - 如何使用背景图像和文本设置内联 div？

> ID：13858692
> 
> 赞同：0
> 
> 时间：2012-12-13T11:17:10.070
> 
> 标签：html, css

```
<div class="cn_header">
    <div class="print"></div>
    example
</div>​

.cn_header{
    background: #C2E1FF;
    height: 24px;
    line-height: 24px;
    padding: 5px;
}

.print{
    background: url(http://mcgrefer.com/images/search.png);
    display: inline-block;
    height: 24px;
    width: 24px;
}
​ 
```

[http://jsfiddle.net/Luntegg/2SCvf/1/](http://jsfiddle.net/Luntegg/2SCvf/1/)

如何使用背景图像和文本设置内联 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:22:11.003

设置`vertical-align:middle;`在`.print`

**[演示](http://jsfiddle.net/28JT2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:22:43.467

将文本放入 div 中：

[http://jsfiddle.net/2SCvf/3/](http://jsfiddle.net/2SCvf/3/)

```
<div class="cn_header">
    <div class="print">example</div>
</div>

.cn_header{
    background: #C2E1FF;
    height: 24px;
    line-height: 24px;
    padding: 5px;    
}

.print{
    background-image: url(http://mcgrefer.com/images/search.png);
    display: inline-block;
    height: 24px;
    width: 24px;
    padding-left: 30px; /* This */
    background-repeat: no-repeat; /* And This One */
} 
```

# ruby-on-rails - 为什么我的 ajax 不适用于 link_to 而是 button_to？

> ID：13858696
> 
> 赞同：0
> 
> 时间：2012-12-13T11:17:24.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我想像下面一样使用link_to，但它不起作用。它没有做任何事情:(

```
<% unless user == current_user %>
  <% if current_user.following?(user) %>
    <%= link_to sanitize('<i class="icon-remove icon-white"></i> ') + 'Un-Follow', user_follow_path(user.to_param, current_user.get_follow(user).id), :method => :delete, :remote => true, :class => 'btn' %>             
  <% else %>
    <%= link_to sanitize('<i class="icon-ok icon-white"></i> ') + 'Follow', user_follows_path(user.to_param), :remote => true, :class => 'btn btn-primary' %>             
  <% end %>
<% end %> 
```

但是，如果我像下面这样使用 button_to 对其进行编码，则它可以完美运行。为什么？？？

```
<% unless user == current_user %>
  <% if current_user.following?(user) %>
    <%= button_to("Un-Follow #{user.username}", user_follow_path(user.to_param, current_user.get_follow(user).id), :method => :delete, :remote => true) %>
  <% else %>
    <%= button_to("Follow #{user.username}", user_follows_path(user.to_param), :remote => true) %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:52:00.723

```
<% unless user == current_user %>
<% if current_user.following?(user) %>
<%= button_to("Un-Follow #{user.username}", user_follow_path(user.to_param, current_user.get_follow(user).id), :method => :delete, :remote => true, 
:class => 'btn btn-primary') %>
<% else %>
<%= button_to("Follow #{user.username}", user_follows_path(user.to_param), 
:remote => true, :class => 'btn btn-primary') %>
<% end %>
<% end %> 
```

我搜索link_to atm :)

[编辑]

好的，我做到了:) 我需要将一些跟随操作移动到用户控制器中，并为两个 link_to 使用特定的路由。我删除了 ruby​​cas 布局并使用简单的设计进行身份验证，种子在项目内部。

[https://github.com/senayar/follower](https://github.com/senayar/follower)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:12:26.013

```
 <%= link_to(user_follow_path(user.to_param, current_user.get_follow(user).id), :method => :delete, :remote => true, :class => 'btn') do %>
   <i class="icon-remove icon-white"></i>
   'Un-Follow'
 <% end %> 
```

在上面尝试，这将与您的引导图标一起使用

# magento - Magento webhooks - 有吗？

> ID：13858697
> 
> 赞同：0
> 
> 时间：2012-12-13T11:17:25.360
> 
> 标签：magento

有谁知道我如何自动导出我的 magento 导出文件？我知道一种方法是使用 magento crons，但是当用户像 shopify 等其他平台一样在他的商店中进行更改时，是否有 webhook 会触发 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:52:45.277

您可能想查看 Magento 的[event/observer](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)。Magento 中的许多操作都会自动触发事件，包括前端和后端（您可以通过搜索找到它们`Mage::dispatchEvent(`）。您可以使用自定义模块观察这些事件，然后执行您想要的任何操作。例如，您可以观察用户何时保存对产品的更改，并在观察者函数中调用您想要的任何代码。

# php - 从变量中拆分第一个字母

> ID：13858706
> 
> 赞同：1
> 
> 时间：2012-12-13T11:18:01.150
> 
> 标签：php, character-encoding, hebrew

我需要从变量 $name 中拆分第一个字母。我该怎么做？

```
$name = $userData['name']; 
```

我怎样才能得到第一个字母？

请检查它是否正确：

```
if($userData['gender'] == 'male'){
    if($firstletter=='i'){
    $picture = ImageCreateFromPNG ($global['maleBackgroundImages'][1]);
    }else{
          $picture = ImageCreateFromPNG ($global['maleBackgroundImages'][2]);}
}else{
    if($firstletter=='i'){
    $picture = ImageCreateFromPNG ($global['maleBackgroundImages'][1]);
    }else{
          $picture = ImageCreateFromPNG ($global['maleBackgroundImages'][2]);}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T11:21:00.993

```
$userData['name'][0] 
```

字符串中的偏移量可以像数组一样访问。请注意，这假设您的字符串采用*单字节编码*。如果您有多字节编码的字符串，则需要：

```
mb_substr($userData['name'], 0, 1, 'UTF-8' /* (the correct encoding) */) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:23:05.407

> [从重复的问题](https://stackoverflow.com/questions/13859052/if-conditions-with-hebrew-letter)移过来。代码略有不同，但涵盖相同。

首先，您不仅需要知道字符串是哪种语言（希伯来语），还需要知道使用了哪种字符编码。

假设输入在一个名为的变量中`$letters`，并且编码是 UTF-8。您要比较的字母是`א`('HEBREW LETTER ALEF' (U+05D0))。

第一个要发布的悬崖是在您的 PHP 脚本中安全地使用 UTF-8 表示，该脚本可能采用非 UTF-8 编码：

```
$compareLetter = "\xD7\x90"; // UTF-8 'HEBREW LETTER ALEF' (U+05D0) 
```

下一个悬崖是从输入中提取第一个字母。正如我们所知道`$compareLetter`的字节大小的定义是两个。所以我们需要比较前两个字节：

```
$isSame = substr($letters, 0, 2) === $compareLetter; 
```

然后，您的其余代码可以保持不变（但也可以像我现在一样进行简化）：

```
$png     = $global['maleBackgroundImages'][4 + $isSame];
$picture = ImageCreateFromPNG($png); 
```

完整的代码示例：

```
...

$compareLetter = "\xD7\x90"; // UTF-8 'HEBREW LETTER ALEF' (U+05D0)

$isSame  = substr($letters, 0, 2) === $compareLetter;
$png     = $global['maleBackgroundImages'][4 + $isSame];
$picture = ImageCreateFromPNG($png); 
```

字符编码注意事项：

*   知道使用哪种字符编码：无处不在，包括像这样的地方
    *   输入字符串
    *   PHP 脚本文件
    *   输出
*   根据其编码处理字符串数据。

一些附加说明：

*   使用前初始化变量。
*   如果您有一个简单的决定，您通常可以将其表示为计算。布尔值等于`true`整数`1`和`false`。`0`
*   减少`if`s 的数量通常会减少代码。这可以帮助您减少错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T11:19:51.820

您可以使用数组语法获取字符串的第一个字母！

```
$firstletter = $userData['name'][0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:43:53.040

这只是一个补充答案。

如果您想使用 utf-8 字符串进行整洁的单字符访问，您可以这样做：

```
$chars = preg_split( '/(?<!^)(?!$)/u', $userData['name'] );

echo $chars[0]; 
```

# android-ndk - 如何使用 CMAKE 交叉编译 LLVM for Android-NDK？

> ID：13858708
> 
> 赞同：0
> 
> 时间：2012-12-13T11:18:09.013
> 
> 标签：android-ndk, cmake, llvm, cross-compiling

我正在使用 CMake 编译并定义 {CMAKE_SYSTEM_NAME}；所以 {CMAKE_CROSSCOMPILING} 定义被打开；

然而; 我看到最后 LLVM 工具 < llvm-xxx, opt , ... > 不是为本地主机构建的；

我在这里想念什么？我在想所有东西都应该为本地和目标构建两次。

示例：用于构建两个版本的 clang-tblgen；LLVM 定义了另一个目标 NATIVEClangTableGen（在 TableGen.cmake 中定义）；它会在 native/... 下生成 clang-table gen ，只要建立 clang。然而; 同样的行为不适用于 LLVM 工具；如果没有这样的东西，NATIVEXXX对应的目标；

因此，如果 CMake 产生一个目标，例如 llvm-link 每当 CMAKE_CROSSCOMPILING 为 ON 时；它不会为原生生成相同的目标；因为它认为目标已经创建。

任何想法如何使这项工作？

# ruby-on-rails - omn iauth 和 twitter 的 SQLite 错误

> ID：13858710
> 
> 赞同：1
> 
> 时间：2012-12-13T11:18:16.450
> 
> 标签：ruby-on-rails, twitter, omniauth

我正在使用omniauth 让用户在Ruby on Rails 应用程序中使用Facebook 和Twitter 帐户登录。由于 Twitter`request.env["omniauth.auth"]`不提供帐户的电子邮件，因此我构建了它（电子邮件在数据库中不能为 NULL）。我有这段代码：

```
if params[:provider] == 'facebook'
              email = omniauth[:info]["email"]
elsif params[:provider] == 'twitter'
              email = omniauth[:info]["name"] + '@example.com'
end
user = User.new(:email => email) 
```

如果我使用 Facebook 帐户登录，它就可以完美运行。但是，如果我尝试使用 Twitter 帐户，应用程序会给我这个错误：

```
SQLite3::ConstraintException: users.email may not be NULL [SQL query] 
```

我多次检查电子邮件是否为 NULL，以防它构造错误或其他原因，但不是 NULL。`omniauth-twitter`并`omniauth-facebook`安装了宝石。有谁知道为什么？如果您需要更多代码或信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:22:24.380

Twitter 不会将电子邮件地址作为 OAuth 握手的一部分发回。您必须生成一个或将它们发送到另一个注册页面，临时存储他们的 Twitter 授权信息以预填充注册字段。

您似乎正在尝试根据用户名生成电子邮件地址。Twitter 以“FirstName LastName”的形式发回，因此如果您有任何电子邮件地址验证，他们将不接受“FirstName LastName@someaddress.com”形式的电子邮件地址。我可以建议你`"#{omniauth[:info][:nickname]}@twitter.com"`改用吗？这样，您还可以防止重复的电子邮件地址，因为 Twitter 用户名是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:45:49.563

老实说，我不喜欢这些方法中的任何一种。名称不是唯一约束，Twitter 用户可以随时更改他的昵称。如果用户更改了他的昵称会发生什么？他将不再能够访问他的帐户吗？如果另一个人将他的昵称更改为现在可用的昵称怎么办？他可以访问其他用户的帐户吗？

两个更好的解决方案是：

1.  按照[Ryan Bates 的方法](http://railscasts.com/episodes/236-omniauth-part-2)，将用户重定向到可以键入电子邮件的表单。或者

2.  覆盖 Devise 的方法[email_required？](https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb#L57). 就像是：

    ```
    # user.rb
    def email_required?
      authentications.empty?
    end 
    ```

    这样您就不会在登录过程中引入额外的步骤。

# limit - 在现有的免费 G oogle Apps 帐户中，有没有办法确定用户限制？

> ID：13858719
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:19:09.650
> 
> 标签：limit, google-apps

多年来，我为不同的域创建了几个 Google Apps 帐户。我了解用户限制因帐户创建时间而异。不过，我在仪表板的任何地方都找不到提到的限制。有人知道确定限制的方法吗？

谢谢，

道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:12:23.517

使用[管理设置 API](https://developers.google.com/google-apps/admin-settings/)

[GAM](http://ditoweb.com/dito-gam)可以通过以下方式做到这一点：

[游戏信息域](http://code.google.com/p/google-apps-manager/wiki/DomainSettingsExamples#Retrieving_Domain_Settings)

# java - 如何从属性或 xml 文件填充肥皂请求参数？

> ID：13858724
> 
> 赞同：1
> 
> 时间：2012-12-13T11:19:25.567
> 
> 标签：java, junit, soapui

我正在构建 Web 服务测试框架。我正在使用soap ui（不是专业版）进行集成测试。我有一个运行我的测试运行器的ant脚本。这就是我的测试运行器的样子：

```
public class GatewayIntegrationTestRunner {

    JUnitReportCollector collector = new JUnitReportCollector();
    String path = "D:/DATA/Gateway/GWIntegrationTest_soapUI/GWIntegrationTestWksp/gateway-integration-test/src/META-INF/junit-style-test-report/html";

    @Test
    public void runGatewayIntegrationTests() throws Exception {

        SoapUITestCaseRunner  runner = new SoapUITestCaseRunner ();
        runner.setProjectFile("D:/DATA/Gateway/GWIntegrationTest_soapUI/GWIntTestStdProject/Liberate-Gateway-std-project-soapui-project.xml");

        runner.getTestCase();
        runner.setOutputFolder(path);
        runner.setJUnitReport(true);

        runner.run();
        runner.exportJUnitReports(collector, path, new WsdlProject());
        runner.printReport(0);
    }
} 
```

我的测试运行程序加载我的soap ui 项目xml 并运行soap ui 项目中指定的测试。我的要求是我想在不同的点为同一个api指定不同的请求参数。早些时候，当我在 Java 中进行集成测试时，我在 xml 文件中指定了这些请求参数。我怎样才能在soapui中实现这一点？我尝试在soapui 中处理属性和属性转移，但没有取得多大成就。根据我的应用程序部署的位置，我想修改请求数据，获取它可能来自 xml 文件或属性文件。我怎样才能在soapui中实现它？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:51:51.257

在 SOAPUI 中，当您定义您的 api 时，请尝试执行以下操作：

假设您有资源 API GET (https://your_host/Username)

您可以通过将上述资源更改为在测试用例级别更改 Usename 值

> (https://your_host/${#TestCase#Username})

完成后，为上述资源创建一个测试用例，然后（双击测试用例）或右键单击然后显示测试编辑器。

在窗口中出现一个名为（Setup Script）的按钮，单击该按钮，然后将以下内容复制到框中：

> def username = "John"
> testRunner.testCase.setPropertyValue('Username',"${username}")

然后单击框上方的绿色小游戏标志，然后切换到（设置脚本）旁边的（属性），您应该能够在名称下看到用户名，在值下看到 John。

这是针对以 John 作为用户名的值的测试用例完成的。

您现在需要做的就是复制测试用例（右键单击然后克隆 TestCase）然后将用户名的值更改为其他值，例如

> def username = "Chris"
> testRunner.testCase.setPropertyValue('Username',"${username}")

希望上面有帮助，这就是你想要的。

# c# - 如何避免调用 CUDA Dll 的访问冲突异常？

> ID：13858727
> 
> 赞同：5
> 
> 时间：2012-12-13T11:19:28.373
> 
> 标签：c#, dll, cuda, unmanaged, access-violation

我是 CUDA 的新手，对 C 也不是很熟悉。我写了一个 Dll 来在我的 C# 程序中实现 CUDA 方法 (FFT)。我首先将 dll 作为控制台应用程序进行调试，以确保它正常工作，然后将其构建为 dll。所以我的问题是我的 dll 的第一次调用 (cufftPlan1d()) 会导致 AccessViolationException。到目前为止，我已经查看了这个博客和其他谷歌结果，但什么也没有。我使用不安全的代码来处理指针并使用 Marshal.AllocHGlobal() 方法分配内存，所以我真的看不出问题出在哪里。这是我的 dll 代码和调用 C# 类：

DLL：

```
extern "C" __declspec(dllexport)
unsigned int fftPlan(unsigned int* plan, int signal_size, int batch)
{
    if(cufftPlan1d(plan, signal_size, CUFFT_D2Z, batch) != CUFFT_SUCCESS) return 0;
    return 1;
}

extern "C" __declspec(dllexport)
int allocateMemory(double** signalGPU, cufftDoubleComplex** signalFft, int size)
{
    if(cudaMalloc(signalGPU, size) != cudaSuccess) return 0;
    if(cudaMalloc(signalFft, size+16) != cudaSuccess) return 0;
    return 1;
}

extern "C" __declspec(dllexport)
int fftCaller(unsigned int* plan, const double* real, double* realGPU,             cufftDoubleComplex* signalFft, cufftDoubleComplex* signalFftGPU, int size)
{
    cufftDoubleReal *idata=(cufftDoubleReal*)realGPU;
    if(cudaMemcpy(idata, real, size, cudaMemcpyHostToDevice) != cudaSuccess) return 0;
    if(cufftExecD2Z(*plan, idata, signalFftGPU) != CUFFT_SUCCESS) return 0;
    if(cudaMemcpy(signalFft, signalFftGPU, size+16, cudaMemcpyDeviceToHost) !=    cudaSuccess) return 0;
    return 1;
}

extern "C" __declspec(dllexport)
void cudaClean(void* GPUPtr)
{
    cudaFree(GPUPtr);
} 
```

和包装类：

```
unsafe public class CudaFft
    public struct cufftDoubleComplex
    {
            public double x;
            public double y;
    }

    [UnmanagedFunctionPointer(CallingConvention.StdCall)]
    unsafe public delegate int fftPlan(int* plan, int signal_size, int batch);

    [UnmanagedFunctionPointer(CallingConvention.StdCall)]
    unsafe public delegate int allocateMemory(double** signalGPU, cufftDoubleComplex** signalFftGPU, int size);

    [UnmanagedFunctionPointer(CallingConvention.StdCall)]
    unsafe public delegate int fftcaller(int* plan, double* signal, double* signalGPU, cufftDoubleComplex* signalFft, cufftDoubleComplex* signalFftGPU, int size);

    [UnmanagedFunctionPointer(CallingConvention.StdCall)]
    unsafe public delegate int cudaclean(void* GPUPtr);

    public static int pDll, a;
    //static IntPtr signal, signalFft;
    unsafe static int* plan;
    unsafe static double* signal;
    unsafe static double** signalGPU;
    unsafe static int signal_size;
    unsafe static cufftDoubleComplex* signalFft;
    unsafe static cufftDoubleComplex** signalFftGPU;

    unsafe public static int Plan(int* plan, int signal_size, int batch)
    {
        IntPtr pAddressOfFunctionToCall = DllImport.GetProcAddress(pDll, "fftPlan");

        fftPlan fftplan = (fftPlan)Marshal.GetDelegateForFunctionPointer(pAddressOfFunctionToCall, typeof(fftPlan));
        return fftplan(plan, signal_size, batch); //THIS LINE CAUSES THE EXCEPTION 
    }  
    (...) //some irrelevant code here
    unsafe public CudaFft(int signal_length) //constructor
    {
        pDll = DllImport.LoadLibrary("d:\\CudaFft.dll");
        a = DllImport.GetLastError();
        signal_size = signal_length;
        signal = (double*)Marshal.AllocHGlobal(signal_size * 8).ToPointer();
        signalFft = (cufftDoubleComplex*)Marshal.AllocHGlobal((signal_size / 2 + 1) * 16).ToPointer();
        CudaFft.Plan(plan, signal_length, 1);
        CudaFft.allocMemory(signalGPU, signalFftGPU, signal_size);
    } 
```

提前致谢， Szabolcs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:01:50.147

`plan`似乎永远不会被分配。

# c# - 如何优化 linq 查询的速度？

> ID：13858731
> 
> 赞同：4
> 
> 时间：2012-12-13T11:19:33.660
> 
> 标签：c#, wpf, linq

我有一个 linq 查询，它将客户表中的所有记录提取到一个可观察的集合中，如下所示：

```
customerList = new ObservableCollection<customer>(dbContext.customers);
dgRecords1.ItemsSource = customerList; 
```

该列表绑定到数据网格。客户表包含近百个字段。但是我在数据网格上只显示了几个字段。我的问题是

> 使用 linq 查询仅从数据库中提取选定字段是否会提高客户筛选速度？

我需要过滤并有时会从此列表中删除记录。

将少数字段选择到可观察集合中的最佳方法是哪一种，有人可以提供一些示例 linq 查询吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T11:27:08.097

优化速度的提示：

*   减少列减少所需的带宽
*   减少行，但引入分页，减少**了更多**的带宽（通常）
*   关闭更改跟踪和身份管理（例如`ObjectTrackingEnabled`在 LINQ-to-SQL 中）将减少数据后处理的开销
*   使用预编译查询有时可以帮助减少预处理开销

......但坦率地说，当我们遇到这个问题时，我们通过编写“dapper”来“一劳永逸地”解决它，并且走老路：

```
var list = connection.Query<CustomerViewModel>(
    "select {some specific cols} from Customers").ToList(); 
```

哪里`CustomerViewModel`是一个与 LINQ 等无关的简单 POCO 类型，它只具有所需的值，例如：

```
class CustomerViewModel {
   public int Id {get;set;}
   public string Name {get;set;}
   // ...
} 
```

这消除了*所有*不必要的开销，是您只想显示数据时的理想选择；此外，参数化和物化层经过了非常优化（使用策略缓存，以获得最佳性能）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T11:21:13.407

如果您只选择所需的列而不是所有列，则性能会有所提高。您可以使用[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)实际计算差异。最好只从数据库中选择所需的列，而不是全部。

您可能会考虑的另一件事是使用`Skip`and实现分页`Take`。您可能会看到：[LINQ TO SQL GridView (Enhanced Gridview)](http://www.codeproject.com/Articles/93253/LINQ-TO-SQL-GridView-Enhanced-Gridview)

# ruby-on-rails - 启动 Rails 服务器时出错

> ID：13858743
> 
> 赞同：0
> 
> 时间：2012-12-13T11:20:42.140
> 
> 标签：ruby-on-rails

我在启动 rails 服务器时遇到错误。

```
Sphinx cannot be found on your system. You may need to configure the following
settings in your config/sphinx.yml file:
  * bin_path
  * searchd_binary_name
  * indexer_binary_name

For more information, read the documentation:
http://freelancing-god.github.com/ts/en/advanced_config.html

script/rails: No such file or directory - uname -p
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/http/mi
me_type.rb:102: warning: already initialized constant MOBILE
Exiting
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/client.
rb:44:in `connect': Unknown MySQL server host 'to appmallstaging.cxc6soormw9j.us
-east-1.rds.amazonaws.com' (0) (Mysql2::Error)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/m
ysql2/client.rb:44:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/mysql2_adapter.rb:16:in `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:277:in `new_connection'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:287:in `checkout_new_conne
ction'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:235:in `block (2 levels) i
n checkout'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:230:in `loop'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:230:in `block in checkout'

        from C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:229:in `checkout'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:95:in `connection'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_pool.rb:374:in `retrieve_connectio
n'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_
connection'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/connection_adapters/abstract/connection_specification.rb:142:in `connectio
n'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/model_schema.rb:308:in `clear_cache!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_r
ecord/railtie.rb:91:in `block (2 levels) in <class:Railtie>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/callbacks.rb:418:in `_run__777791075__prepare__723499589__callbacks'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/callbacks.rb:405:in `__run_callback'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/callbacks.rb:385:in `_run_prepare_callbacks'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/callbacks.rb:81:in `run_callbacks'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dis
patch/middleware/reloader.rb:74:in `prepare!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dis
patch/middleware/reloader.rb:48:in `prepare!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/applic
ation/finisher.rb:47:in `block in <module:Finisher>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initia
lizable.rb:30:in `instance_exec'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initia
lizable.rb:30:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initia
lizable.rb:55:in `block in run_initializers'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initia
lizable.rb:54:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/initia
lizable.rb:54:in `run_initializers'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/applic
ation.rb:136:in `initialize!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/railti
e/configurable.rb:30:in `method_missing'
        from D:/ROR/appmallserver/config/environment.rb:22:in `<top (required)>'

        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/dependencies.rb:251:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/dependencies.rb:251:in `block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_
support/dependencies.rb:251:in `require'
        from D:/ROR/appmallserver/config.ru:4:in `block in <main>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
51:in `instance_eval'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
51:in `initialize'
        from D:/ROR/appmallserver/config.ru:1:in `new'
        from D:/ROR/appmallserver/config.ru:1:in `<main>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
40:in `eval'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:
40:in `parse_file'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:2
00:in `app'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/comman
ds/server.rb:46:in `app'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:3
01:in `wrapped_app'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:2
52:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/comman
ds/server.rb:70:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/comman
ds.rb:55:in `block in <top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/comman
ds.rb:50:in `tap'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.2/lib/rails/comman
ds.rb:50:in `<top (required)>'
        from script/rails:21:in `require'
        from script/rails:21:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:49:14.437

我开始这是作为评论，但它变得很长。

您必须正确设置它。Thinking Sphynx gem 依赖于 Sphynx 库，你还必须安装[instuctions](http://pat.github.com/ts/en/installing_sphinx.html)。这似乎是你现在的问题，但你必须做更多才能让它发挥作用。

你必须有 MySQL 和/或 PostgreSQL，你不能使用 SQLite。

按照 VenkatK 的链接学习如何操作。还有一个 railscasts 第 120 集-thinking [-sphinx](http://railscasts.com/episodes/120-thinking-sphinx)如果您是 railscasts 的专业会员，还有一个修订版第[120-thinking-sphinx-revised](http://railscasts.com/episodes/120-thinking-sphinx-revised)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:27:40.373

查看下面的链接并按照说明进行操作：

[http://pat.github.com/ts/en/quickstart.html](http://pat.github.com/ts/en/quickstart.html)

希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:04:02.103

如错误消息所示，问题肯定出在您的配置上。重新安装 spinx 可能会对您有所帮助。

以下是类似的，

[“在您的系统上找不到 Sphinx。” 运行“rake ts:index”时](https://stackoverflow.com/questions/6190435/sphinx-cannot-be-found-on-your-system-when-running-rake-tsindex)

# python - “ 错误：$MACOSX_DEPLOYMENT_TARGET 不匹配：现在是“10.3”，但在配置期间为“10.6””尝试点安装不同的软件包时？

> ID：13858745
> 
> 赞同：6
> 
> 时间：2012-12-13T11:20:43.907
> 
> 标签：python, pygame, pip, homebrew

我尝试安装不同的软件包，例如`pygame`and`numpy`我不断收到此错误：

```
error: $MACOSX_DEPLOYMENT_TARGET mismatch: now "10.3" but "10.6" during configure 
```

我试图：

```
$ export MACOSX_DEPLOYMENT_TARGET=10.6 
```

在运行 pip install 但错误仍然相同？我正在尝试设置`pygame`，知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:51:10.280

必须完全删除所有内容并重新安装，这似乎解决了问题。

# algorithm - 与 Solr（或 elasticsearch）匹配的算法

> ID：13858753
> 
> 赞同：2
> 
> 时间：2012-12-13T11:21:22.467
> 
> 标签：algorithm, search, solr, elasticsearch, matching

我必须创建一个返回结果匹配百分比的算法。

该算法的目的是根据几个字段在数据库中查找，并从查询和文档之间的匹配中重新释放百分比。

目前我使用 Solr 进行搜索，但他不返回匹配百分比，而是返回无法转换为百分比的分数。

我查看了基于 lucene 的 Elasicsearch，我不认为我可以在那里拿出来。

你能给我解决办法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:42:24.093

在 Lucene/Solr 中没有最高分数，因此您可以标准化您的分数。您可以将查询的第一个结果的分数用作 maxScore，但这不是正确的方法，因为它取决于当前查询。您不能对其他查询进行任何区分。

Solr Wiki 也不推荐它。阅读[ScoresAsPercentages](http://wiki.apache.org/lucene-java/ScoresAsPercentages)文档。

# android - 没有 SIP 服务器的 Android sip

> ID：13858756
> 
> 赞同：1
> 
> 时间：2012-12-13T11:21:33.200
> 
> 标签：android, sip

我一直在尝试开发一个通过指定所涉及设备的 IP 地址进行连接的 android sip 客户端。

是否可以在没有 SIP 服务器注册的情况下在 android 上进行点对点 SIP 呼叫？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T04:38:04.490

虽然我无法使用 android API 来做到这一点，但找到了一个在 android 手机上运行良好的开源。通过指定对方的 IP，我能够在本地网络内直接拨打电话。

[http://www.linphone.org/eng/documentation/guide/](http://www.linphone.org/eng/documentation/guide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-17T15:58:59.413

是的！SIP 协议不禁止点对点通信。事实上，SIP 协议抽象了 SIP 代理和注册器，并且在此实现之外没有定义实际的通信拓扑。在这种情况下（点对点），您不会注册任何 SIP UAC 客户端，而是每个 SIP UAC 将实现它自己的 SIP 代理（即 UAC+UAS，SIP 代理在 SIP 端口上侦听）。客户端“A”然后将简单地向客户端“B”发送邀请以发起电话呼叫。

# c++ - tolower() 不适用于 C++ 中的 Ü,Ö

> ID：13858759
> 
> 赞同：4
> 
> 时间：2012-12-13T11:21:45.403
> 
> 标签：c++, tolower

当我在 C++ 中尝试使用非英语字符的 tolower() 时，它无法正常工作。我搜索了那个问题，发现了一些关于语言环境的东西，但我不确定最好的解决方案。

我的示例代码如下：

```
printf("%c ",tolower('Ü')); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T11:48:14.740

不幸的是，标准 C++ 库没有足够的支持来更改所有可能的非英文字符的大小写（就那些完全有大小写变体的字符而言）。此限制是由于 C++ 标准假定单个字符及其大小写变体恰好占据一个`char`对象（或`wchar_t`宽字符的对象）和不能保证为真的非英文字符（也取决于字符被编码）。

如果您的环境对相关字符使用单字节编码，这可能会为您提供所需的内容：

```
std::cout << std::tolower('Ü', locale()); 
```

使用宽字符，您可能会有更多的运气：

```
std::wcout << std::tolower(L'Ü', locale()); 
```

但即使这样也不会给出正确的结果`toupper(L'ß')`，这将是两个字符序列`L"SS"`）。

如果您需要对所有字符的支持，请查看[ICU 库](http://site.icu-project.org/)，尤其[是关于案例映射的部分](http://userguide.icu-project.org/transforms/casemappings)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:28:53.270

正如 Bart 所展示的，C++ 根本不喜欢多字节编码。幸运的是，您可以使用 Boost.Local 轻松解决这个问题。这是一个简单的例子：

```
#include <iostream>
#include <locale>
#include <boost/locale.hpp>

int main() {
    boost::locale::generator gen;
    std::locale loc = gen("en_US.UTF-8");
    std::string line;
    while (std::getline(std::cin, line))
        std::cout << boost::locale::to_lower(line, loc) << '\n';
} 
```

要编译，我们需要链接到 Boost.Locale 库：

```
g++ -lboost_locale lower.cpp -o lower 
```

当我们执行它时，我们得到以下信息：

```
$ ./main <<< 'ICH HÄTTE GERNE EINEN SÜßEN HASEN'
ich hätte gerne einen süßen hasen 
```

# javascript - PhoneGap 2.2.0 上支持的 iOS 版本

> ID：13858761
> 
> 赞同：1
> 
> 时间：2012-12-13T11:21:47.913
> 
> 标签：javascript, ios, xcode, cordova

我正在使用PhoneGap 开发一个Web 应用程序，但我不明白PhoneGap 2.1.0 是如何不支持iOS3 而PhoneGap 2.2.0 是如何支持它的。

我问这个的原因是因为据说[XCode 4.5 的最低支持版本是 iOS 4.3](https://stackoverflow.com/questions/12838104/phonegap-2-1-0-not-working-on-ios-4-3-3)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:52:14.377

但是对 iOS 的 Phonegap 要求等于下面的描述

[Phonegap 2.1.0 的要求：](http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

Xcode 4.3+ Xcode 命令行工具 基于 Intel 的计算机，带有 Mac OS X Lion 或更高版本 (10.7+) 需要在设备上安装：Apple iOS 设备（iPhone、iPad、iPod Touch） iOS 开发人员证书

[Phonegap 2.2.0 的要求：](http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

Xcode 4.5+ Xcode 命令行工具 基于 Intel 的计算机，带有 Mac OS X Lion 或更高版本 (10.7+) 需要在设备上安装：Apple iOS 设备（iPhone、iPad、iPod Touch）iOS 开发人员证书

# javascript - 在客户端代码（Javascript）中访问服务器数据或变量

> ID：13858765
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:22:00.433
> 
> 标签：javascript, asp.net, security, server-variables

我知道我们可以使用 eval 并访问 C# 代码中声明的公共属性来访问服务器端变量。但是，不建议将此作为最安全的方法。在 java-script 中访问服务器变量的最佳方法是什么？请给出 ASP.Net web 表单的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:46:52.600

服务器端的变量与客户端的变量存在于不同的宇宙中。这两个宇宙位于不同的计算机上，它们之间的唯一通信是页面的视图，以及返回到服务器的帖子。

所以第一个是将html页面渲染中代码后面的变量作为数字提供给javascript，例如：

```
<script>
 var OurVariable = 334;
</script> 
```

要呈现它，您有很多选择，例如，您可以使用 Literal 并将其呈现在后面的代码中：

```
<asp:Literal runat="server" ID="txtScriptOnMe" /> 
```

和后面的代码：

```
txtScriptOnMe.Text = "<script> var OurVariable = 334; </script>"; 
```

现在您实际上已经在客户端发送了 334。用 javascript 修改后，下一步是在服务器上发回新号码 - 这只能在 PostBack 或 Ajax Call 上完成，并使用隐藏输入。

例如，您有此输入`<input id="hidden1" type="hidden" runat="server" />`并使用 javascript，您可以更改它的值并将其发送回服务器端，然后从后面的代码中读取它，然后就可以了 - 您可以从后面的代码和 javascript 上的变量进行通信。

例如，您可以在 javascript 上编写

```
OurVariable = 221;
document.getElementById("<%=hidden1.ClientID%>").value = OurVariable; 
```

并将其更改为 221，并将其发送到后面的代码中

# javascript - IE中的浮动栏错误

> ID：13858768
> 
> 赞同：0
> 
> 时间：2012-12-13T11:22:07.900
> 
> 标签：javascript, jquery, floating

我使用以下插件来浮动左侧菜单，如下我已经启动它，

```
$('.float-menu').galleryFloatMenu({duration: 800, topPosition: 68}); 
```

问题和行如下所示。

```
(function($){
  $.galleryFloatMenu = function(el, options) {
    var base = this;
    base.$el = $(el);
    base.el = el;
    base.$el.data('galleryFloatMenu', base);

    base.init = function() {
      base.options = $.extend({}, $.galleryFloatMenu.defaultOptions, options);

      var $parent          = base.$el.parent();
      var parentPaddingTop = parseInt($parent.css('padding-top'));
      var startOffset      = $parent.offset().top;

      recalcHeight($parent);
      var calculatedOptions = { 
        startOffset: startOffset, 
        offsetY: parentPaddingTop
      }
      base.options = $.extend(calculatedOptions, base.options);
      base.$el.css({ position: 'absolute' });
      base.enableScroll();
    };

    base.scroll = function() {
      base.$el.stop(); 

      var pastStartOffset      = $(document).scrollTop() > base.options.startOffset; 
      var objFartherThanTopPos = base.$el.offset().top > base.options.startOffset;
      var objBiggerThanWindow  = base.$el.outerHeight() < $(window).height();
      var doScroll = (pastStartOffset || objFartherThanTopPos) && objBiggerThanWindow;
      var docScrollTop = $(document).scrollTop();

      if( doScroll ){
        var newpos = (docScrollTop - base.options.startOffset + base.options.offsetY );
        if ( newpos > base.options.bottomPos )
          newpos = base.options.bottomPos;
        if ( docScrollTop < base.options.startOffset ) {
          newpos = base.options.offsetY;
        }
        base.$el.animate({ top: newpos+options.topPosition }, base.options.duration, 'easeOutCirc' );
      }
    };

    base.enableScroll = function() {
      $(window).bind('scroll', base.scroll);
    }

    base.disableScroll = function() {
      $(window).unbind('scroll', base.scroll);
    }

    base.init();
  };

  $.galleryFloatMenu.defaultOptions = { duration: 1200, paused: false, topPosition: 0 }

  $.fn.galleryFloatMenu = function(options) {
    return this.each(function() {
      (new $.galleryFloatMenu(this, options));
    });
  };

  // PRIVATE FUNCTIONS
  function recalcHeight($obj) {
    //$obj.css({ height: $obj.parent().height() - $obj.height()})
  };
})(jQuery);

  var calculatedOptions = { 
    startOffset: startOffset, 
    offsetY: parentPaddingTop
  } 
```

IE7 错误：预期的标识符、字符串或数字

相同的脚本适用于所有其他浏览器

# python - 如何逐步完成 Python 表达式评估过程？

> ID：13858776
> 
> 赞同：7
> 
> 时间：2012-12-13T11:22:29.483
> 
> 标签：python, debugging, pdb

我想构建一个可视化调试器，它可以帮助编程学生了解表达式评估是如何发生的（子表达式如何被评估并被它们的值“替换”，类似于 Excel 中的表达式评估可视化器）。

看起来您无法使用 Python 的 pdb 逐步完成此过程，因为其最精细的步骤粒度是代码行。是否有可能单步执行 Python 字节码？任何其他想法如何实现这一目标？

编辑：我需要一个可以构建在 CPython 标准库之上的轻量级解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:22:34.330

你试过pudb吗？ [http://pypi.python.org/pypi/pudb](http://pypi.python.org/pypi/pudb) 在 debian-like 上：apt-get install python-pudb

它附加到 pdb，所以我想这不是你要找的。至少，当你进入一个函数时，它会清楚地显示你在哪个函数中。

对于教学生，你可以是：

*   首先，使用变量编写程序，使用几个步骤组成，
*   使用任何体面的python调试器（pdb，winpdb，pudb ...）调试这个程序，
*   然后，一旦该过程被很好地理解，就可以摆脱临时变量，通过将代码组合成更少的行，逐渐地，直到你得到最终的代码。

我知道，要做到完美还很遥远，但这是目前我能想到的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:38:50.343

使用 pdb，可以单步执行任何函数调用。对于任何其他语句，pdb 可以打印该行中相关名称的值。您正在寻找哪些未涵盖的附加功能？

如果您试图“进入”列表理解之类的东西，那么从纯 Python 的角度来看这将不起作用，因为它是单个操作码。在某些时候，对于每个表达式，您都需要告诉学生“这就是 Python 进入 C 实现并评估它的地方……”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T21:51:20.600

您应该查看[reinteract](http://www.reinteract.org/)，它非常简单，您可以为此做出贡献

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T10:05:19.737

我自己也有一个解决方案的想法——我可以通过将所有（子）表达式包装在一个虚拟方法调用中来检测代码（或 AST），这只不过是返回其参数。例如。

```
x = f(sin(x + y)) 
```

变成

```
x = dummy(f(dummy(sin(dummy(dummy(x) + dummy(y)))))) 
```

这样，我保证在每个子表达式被评估后得到通知，并且我也得到了值。我还可以添加有关当前处理表达式的哪一部分的额外位置/AST 信息，例如：

```
... dummy(x, line=23, col=13, length=1) ... 
```

不幸的是，这需要弄乱 AST 和编译......

# performance - Oracle ADF 框架的优缺点以及与其他框架的比较

> ID：13858782
> 
> 赞同：2
> 
> 时间：2012-12-13T11:22:44.177
> 
> 标签：performance, cross-browser, web-frameworks, oracle-adf

让我们讨论一下 Oracle ADF 框架的优缺点。请分享您使用 Oracle ADF 的经验和知识（与 Java Server Faces、Google Web Toolkit、Django、Ruby on Rails 和 ASP.NET MVC 框架等其他框架进行比较是更好的选择）

主要标准是：效率、支持（社区支持）、浏览器兼容性（它是否适用于所有浏览器？包括移动）、附加库和其他一些因素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:49:16.800

浏览器支持请看这里：[http ://www.oracle.com/technetwork/developer-tools/jdev/jdev11gr2-cert-405181.html#Browsers](http://www.oracle.com/technetwork/developer-tools/jdev/jdev11gr2-cert-405181.html#Browsers)

请注意，还有新的 ADF Mobile - 它允许您构建设备上的应用程序（不是基于浏览器的）。

对于社区看这里：[http ://www.oracle.com/technetwork/developer-tools/jdev/community/index.html](http://www.oracle.com/technetwork/developer-tools/jdev/community/index.html)

与您提到的许多其他框架的一个关键区别是工具支持的级别——使用 JDeveloper，您可以用最少的编码完成很多工作，然后在需要的地方添加代码。另一个方面是框架的完整性——因此不仅仅是 UI、控制器或 DB 访问，而是所有这些以及更多。

可能值得一提的是，您还有一个名为 Oracle ADF Essentials 的免费版本的 Oracle ADF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:25:13.970

由于 Oracle ADF 依赖于 JSR 227，因此我在决定使用 Oracle ADF 时会谨慎。JSR 227 是一个极其复杂的规范，没有可用的深入信息。[我在这里](http://henrietteharmse.wordpress.com/2012/12/19/why-i-have-no-confidence-in-oracle-adf/)写过这个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T14:03:19.953

您可能会发现此链接很有帮助： [https ://forums.oracle.com/forums/thread.jspa?messageID=9450798](https://forums.oracle.com/forums/thread.jspa?messageID=9450798)

此外，ADF 是一个端到端的框架，因此不必费心让位一起工作。此外，与普遍的看法相反，ADF 不仅限于 Oracle 开发，尽管它在这方面表现出色。此外，Eclipse 还支持 ADF Faces 和 ADF Model 的 ADF 开发。不确定“其他库和因素”是什么意思。

# jira - 如何让用户在 jira 5.2 中解决所有任务

> ID：13858784
> 
> 赞同：0
> 
> 时间：2012-12-13T11:22:49.780
> 
> 标签：jira, jql

我想知道用户在 jira 中在一定日期范围内“解决”的所有任务。我们在 5.2 版本的 Jira 上。

注意：他们的当前状态可以任意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:16:54.253

使用问题导航器（并将 project1 和 user1 分别替换为您的项目名称和用户名）：

> 项目 = 项目 1 并且状态在用户 1 期间“已解决”（“2010/01/01”、“2011/01/01”）

# iphone - 如何在 MKMapView 中添加 UISegmentedControl？

> ID：13858787
> 
> 赞同：0
> 
> 时间：2012-12-13T11:23:01.370
> 
> 标签：iphone, ios

我想用三个段将 SegmentedControl 添加到我的 MKMapView

1.  标准视图
2.  卫星视图
3.  混合视图

我们可以通过点击线段来改变地图类型

我尝试了一些代码

```
- (void)indexDidChangeForSegmentedControl:(UISegmentedControl *)aSegmentedControl {

NSArray *itemArray = [NSArray arrayWithObjects: @"One", @"Two", @"Three", nil];
segControl= [[UISegmentedControl alloc] initWithItems:itemArray];

if((segControl.selectedSegmentIndex = 0)){
    _mapView = MKMapTypeStandard;
}
if((segControl.selectedSegmentIndex = 1)){
    _mapView = MKMapTypeSatellite;
}
else {
    _mapView = MKMapTypeHybrid;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:51:10.477

嘿试试这个条件`segControl.selectedSegmentIndex == 0`而不是这个`segControl.selectedSegmentIndex = 0`

这里有单 = 符号的问题

并且也尝试像下面的代码..

```
- (void)viewDidLoad
{
      segControl = [[UISegmentedControl alloc]initWithItems:[NSArray arrayWithObjects: @"One", @"Two", @"Three", nil]];
      [segControl addTarget:self action:@selector(indexDidChangeForSegmentedControl:) forControlEvents:UIControlEventValueChanged];
      [segControl setFrame:CGRectMake(50,20,200,44)];//set frame which you want
      [self.view addSubview:segControl];
}

- (void)indexDidChangeForSegmentedControl:(UISegmentedControl *)aSegmentedControl {
    switch (aSegmentedControl.selectedSegmentIndex) {
            case 0:
                map.mapType = MKMapTypeStandard;
                break;
            case 1:
                map.mapType = MKMapTypeSatellite;
                break;
            case 2:
                map.mapType = MKMapTypeHybrid;
                break;

            default:
                break;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:55:51.340

听听`UIControlEventValueChanged`。因此，将您的 segmentedControl 连接到`IBAction`这样的：

```
-(IBAction)changeMapType:(id)sender{
   UISegmentedControl *seg=(UISegmentedControl*)sender;
   if(seg.selectedSegmentIndex==0){//not = but ==
      _mapView.mapType=MKMapTypeStandard;
   }
   if(seg.selectedSegmentIndex==1){
      _mapView.mapType=MKMapTypeSatellite;
   }
   if(seg.selectedSegmentIndex==2){
      _mapView.mapType=MKMapTypeHybrid;
   }
} 
```

# c# - 与集合有关的 C# 继承问题

> ID：13858788
> 
> 赞同：1
> 
> 时间：2012-12-13T11:23:10.050
> 
> 标签：c#

在我的应用程序中，我访问了许多不同类型的公司，比如 TypeA、TypeB 和 TypeC。所以我有一个公司类，从公司继承的是TypeA，TypeB，TypeC。

所以我有一个视图，用户想要在 TypeA 上进行搜索。搜索字段包括 Company 中的字段和 TypeA 中的字段。但是，如果我有一个 TypeA 的集合，比如 IEnumberable，在我在 TypeA 类中过滤它们之前如何过滤 Company 类中的字段？

编辑

所以这是我的伪代码

```
public abstract class Company
{
      public string Property1 { get; set; }
      public string Property2 { get; set; }

}

public class TypeA : Company
{
      public string Property3 {get; set; }
}

public class TypeB : Company
{
      public string Property4 {get; set; }
}

public abstract class SearchCompany
{
      protected SearchCompany(string searchpProperty1, string searchProperty2)
      {
           // assign property code elided
      }

      public string SearchProperty1 { get; set; }
      public string SearchProperty2 { get; set; }

}

public class SearchTypeA : SearchCompany
{
      public SearchTypeA (string searchpProperty1, string searchProperty2, string searchProperty3)
           : base (searchpProperty1, searchProperty2)
      {
          // assign property code elided
          this.TypeAList = CacheObjects.TypeAList;
          this.TypeAList = // this.TypeAList filtered by searchProperty3 depending on the wildcard
      }

      public string SearchProperty3 { get; set; }
      public IList<TypeA> TypeAList { get; set; }
} 
```

我也想过滤属性 1 和 2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:29:31.127

您可以使用`LINQ`'`OfType<T>()`方法预先过滤`Company`对象列表，并生成`IEnumerable<TypeA>`，如下所示：

```
IEnumerable<TypeA> typeA = allCompanies.OfType<TypeA>(); 
```

您可以在后续的 LINQ 过滤器中使用 的属性`TypeA`- 即使下面的代码`Property1`仅适用于`TypeA`而不适用于`Company`：

```
var filteredTypeA = typeA.Where(c => c.Property1 = "xyz").ToList(); 
```

# java - 具有工厂的 Java 库

> ID：13858790
> 
> 赞同：0
> 
> 时间：2012-12-13T11:23:13.930
> 
> 标签：java, hashmap, factory

我在*java 库*中寻找一个[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)实现，它在决定重新运行哪个**对象**（而不是swichcase **）的部分使用***hashMap ，**类似于*以下想法 -

 *****```
public class RobotFactory {

 private interface RobotFac{
  public Robot create();
 }

 private class RV1Fac implements RobotFac{
  public Robot create(){ return new RV1();}
 }

 private class RV2Fac implements RobotFac{
  public Robot create(){ return new RV2();}
 }

 private class AiboFac implements RobotFac{
  public Robot create(){ return new Aibo();}
 }

private hashMap<String,RobotFac> robotFactory ; 
public RobotFactory(){
  robotFactory=new HashMap<String,RobotFac> ();
  robotFactory.put("RV1", new RV1Fac());
  robotFactory.put("RV2", new RV2Fac());
  robotFactory.put("Aibo", new AiboFac());
 }
 public Robot createRobot(String type){
  return robotFactory.get(type).create();
 }
} 
```

java库（jre7）中是否存在任何模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:36:05.600

> java库（jre7）中是否存在任何模式？

如果你*真的*是指模式，那么这个问题有点荒谬，因为 Java（本身）没有模式。模式是程序员在编写代码时使用的东西......

如果您的意思是现有的类/API 将执行此操作，请认为答案是否定的。至少不是标准的 Java 库。

第三方库可能支持这可能，但我怀疑不是......因为：

*   鉴于自己很容易实现，因此实现这一点并没有很大的“增值”。

*   真正通用的实现可能很难实现和使用。（我正在考虑创建泛型类型参数的实例的问题......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:33:39.950

如果您要提供几个开箱即用的实现，我会选择接口+枚举组合，它允许用户轻松选择，同时提供提供自己实现的自由：

机器人工厂.java

```
public interface RobotFactory {
    public Robot create();
} 
```

机器人.java

```
public enum Robots implements RobotFactory {
Aibo {
    public Robot create() {
        return new Aibo();
    }
},
RV1 {
    public Robot create() {
        return new RV1();
    }
},
RV2 {
    public Robot create() {
        return new RV2();
    }       
};
public Robot create() {
    throw new UnsupportedOperationException();
}
} 
```

现在一个人可以简单地说：`Robots.Aibo.create();`

或者，如果您需要从字符串中确定类型，您可以执行以下操作：

`Robots.valueOf(type).create()`

使用枚举的另一种方法（可能更符合您的意愿）是这样的：

机器人工厂.java

```
public enum RobotFactories implements RobotFactory {
    Aibo(Aibo.class),
    RV1(RV1.class),
    RV2(RV2.class);
    private Class<? extends Robot> robotClass;
    private RobotFactories(Class<? extends Robot> robotClass) {
        this.robotClass = robotClass;
    }
    public Robot create() {
        return robotClass.newInstance();
    }
} 
```

现在你可以简单地说`RobotFactories.valueOf(type).create();`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:38:07.260

我认为这`ClassLoader.loadClass`做了类似的事情，但实际代码是本机的。*****

# c# - Windows Phone 中类似 JList 的组件

> ID：13858792
> 
> 赞同：0
> 
> 时间：2012-12-13T11:23:23.453
> 
> 标签：c#, windows-phone-7

我想要列表组件，它基本上是标签（字符串）的列表，我可以通过触摸选择元素然后获取选择位置编号。哪个组件好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:54:43.687

列表框呢？它具有 SelectedIndex、SelectedItem 和 SelectedValue 等属性，并且可以使用简单的字符串作为项目。

# mysql - 在非常大的数据库上插入时间

> ID：13858793
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:23:23.243
> 
> 标签：mysql, sql, database, load

粗略地说，在高端服务器上，插入查询需要多长时间才能将 7 个字段的 200 万条记录插入到现有的、索引良好的、7 个字段的 800 万条记录的数据库中？

当涉及到大型数据库时，我充其量是业余爱好者，并且对这些事情根本没有时间尺度的概念。我很感激您提供的任何解释或考虑。

服务器：

*   16gigs 内存，4x 2.4GHz
*   mySQL, phpMyadmin, ubuntu 10, apache2

编辑：

很抱歉用这个问题引起这样的冒犯，我真的只是在学习。

建议的表设置作为示例：

**表格1**

```
subscribersNew 
  subEmail (varchar: 255), 
  subName (varchar: 32), 
  subDob (timestamp), 
  subGender (varchar: 1),
  subRegDate (timestamp), 
  subEmailList (int: 2), 
  subThirdParties (bool) 
```

**表2**

```
subscribers
  subEmail (varchar: 255), 
  subName (varchar: 32), 
  subDob (timestamp), 
  subGender (varchar: 1),
  subRegDate (timestamp), 
  subEmailList (int: 2), 
  subThirdParties (bool) 
```

索引列：`subEmail`

询问：

```
INSERT INTO subscribers 
select * from subscribersNew
left outer join subscribers
    on subscribersNew.subEmail = subscribers.subEmail
where subscribers.subEmail is null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:25:38.317

这不是我们无法回答的问题。SQL Server 非常受 I/O 限制，因此它取决于您的 HDD/SSD 硬件和网络、表上的索引、您要插入的数据以及您要插入的列。

# android - 收到传入消息时如何刷新 ListView

> ID：13858796
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:23:46.193
> 
> 标签：android, listview, sms

我正在尝试在 Android 中开发一个 SMS 应用程序。我没有实现自己的广播接收器，而是使用设备中的默认值。现在的问题是我必须调用`onResume()`方法来通过切换活动来显示消息列表视图中的变化。有没有办法以编程方式刷新它而无需重新打开我的应用程序 r 切换到其他活动（以便调用`onResume()`）以显示收到的消息。只是我希望我的适配器能够通过在 listView 中添加另一行来刷新并能够显示收到的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:46:06.403

调用它会刷新 Listview

```
adapter.notifyDataSetChanged(); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:40:01.093

您必须使用线程，您的线程将自动查找任何新消息。收到任何消息后，您可以刷新您的`ListView`

问候海克·纳哈佩蒂安

# javascript - 在ie5中的帧之间传递值

> ID：13858797
> 
> 赞同：0
> 
> 时间：2012-12-13T11:23:59.970
> 
> 标签：javascript

下面提到的方法都不是在 IEv5 中的帧之间传递值。（dFrames 是我试图将值传递到的数据框）

```
alert("1 self.frames.dFrame :"+self.frames.dFrame);
                   alert("2 self.top.frames.dFrame :" +self.top.frames.dFrame);
                   alert("3 self.frames[2]:" +self.frames[2]);
                   alert("4 self.dFrame :"+self.dFrame);
                   alert("5 parent.frames.dFrame:"+parent.frames.dFrame);
                   alert("6 parent.dFrame:"+parent.dFrame);
                    alert("7 parent.frames['dFrame'] :"+parent.frames['dFrame']);
                    alert("8 frames[2] :"+frames[2]);
                    alert("9 top.frames[2] :"+top.frames[2]);
                    alert("10 window.frames[2] :"+window.frames[2]);
                    alert("11 window.parent.frames.dFrame :"+window.parent.frames.dFrame);
                    alert("12 window.top.dFrame :"+window.top.dFrame);
                    alert("13 window.top[2] :"+window.top[2]);
                    alert("14 window.parent.frames[2] :"+window.parent.frames[2]);
                    alert("15 window.parent[2] :"+window.parent[2]);
                    alert("16 parent.top.frames[2] :"+parent.top.frames[2]);
                    alert("17 top[2] :"+top[2]);
                    alert("18 window[2] :"+window[2]);
                    alert("19 parent[2] :"+parent[2]);
                    alert("20 window.dFrame :"+window.dFrame);
                    alert("21 top.frames['dFrame'] :"+top.frames['dFrame']);
                    alert("22 parent.frames['dFrame'] :"+parent.frames['dFrame']);
                    alert("23 frames['dFrame'] :"+frames['dFrame']); 
```

我试图提醒每个方法。因此每个方法后面都有一个参数“未定义”。谁能帮我找到一种在 IE5 中的帧之间传递值的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:39:12.340

只需为您`frame`的 s 命名，然后在需要引用某个命名的地方`frame`时，您可以通过`top.window.frame_name`.

作为旁注，`frames`collection 是 的属性`document`，而不是`window`。

# git - 从远程裸仓库签出特定分支 [git]

> ID：13858798
> 
> 赞同：0
> 
> 时间：2012-12-13T11:24:08.360
> 
> 标签：git, deployment

我有裸仓库（作为中央仓库，用于与其他开发人员交换）。

通常要部署（在开发服务器上）主分支，我登录到远程 SSH 服务器去 repo 根路径并运行下一个命令：

```
WWW_ROOT="/path/to/web/root"
GIT_WORK_TREE=$WWW_ROOT 
git checkout -f 
```

每次主分支内容时都会部署它。但现在我想检查一个特定的分支。

我试图改变 HEAD ，`git symbolic-ref HEAD refs/heads/specific_branch`但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:25:53.013

结帐时只需指定分支：

```
git checkout -f specific_branch 
```

# java - java中闪烁的图像，BufferStrategy？

> ID：13858802
> 
> 赞同：3
> 
> 时间：2012-12-13T11:24:41.960
> 
> 标签：java, image, swing, flicker

我正在用 Java 制作游戏，需要在游戏板上绘制单元。我将所有单位放在一个列表中并绘制该列表中的每个单位。绘制方法如下所示：

```
 public void paint(Graphics g) {
        super.paint(g);

        if (unitList != null) {
            Collections.sort(unitList);
            for (Unit unit : unitList) {
                Image image = unit.getImage();
                g.drawImage(
                        image,
                        (int) (playPosition.x + unit.getPosition().getX() - image
                                .getWidth(null) / 2), (int) (playPosition.y
                                + unit.getPosition().getY() - image
                                .getHeight(null) / 2), null);
            }
        }
    } 
```

我试图制作一个 BufferStrategy ，但它只会让问题变得更糟，我猜我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:15:03.527

也许你没有`BufferStrategy`正确实施。
通过在 上进行屏幕外绘制尝试手动双缓冲`Image`，然后在常规覆盖`paint()`方法中绘制整个所述图像。

你会这样做：

```
// Double buffering objects.
Image doubleBufferImage;
Graphics doubleBufferGraphics;

/*
 * Onscreen rendering.
 */
 @Override
 public void paint(Graphics g) {
     doubleBufferImage = createImage(getWidth(), getHeight());
     doubleBufferGraphics = doubleBufferImage.getGraphics();
     paintStuff(doubleBufferGraphics);
     g.drawImage(doubleBufferImage, 0, 0, this);
 }

/*
 * Offscreen rendering.
 */
 public void paintStuff(Graphics g) {
     if (unitList != null) {
        Collections.sort(unitList);
        for (Unit unit : unitList) {
            Image image = unit.getImage();
            g.drawImage(
                    image,
                    (int) (playPosition.x + unit.getPosition().getX() - image
                            .getWidth(null) / 2), (int) (playPosition.y
                            + unit.getPosition().getY() - image
                            .getHeight(null) / 2), null);
        }
    }
 } 
```

# c# - 访问受保护的文件夹

> ID：13858803
> 
> 赞同：0
> 
> 时间：2012-12-13T11:24:46.763
> 
> 标签：c#

我有一个位于某个分区中的文件夹列表。

我在树视图控件中获取文件夹列表，但是当我从树视图中单击某个文件夹时，它必须向我显示列表视图中所选文件夹的文件夹/文件，但如果所选文件夹受到保护，我会得到“访问被拒绝” 。

我`Directory.GetFolders`用来获取它们。

有没有办法绕过这个？

# php - 使用 odbc 连接问题的连接

> ID：13858805
> 
> 赞同：-2
> 
> 时间：2012-12-13T11:25:00.157
> 
> 标签：php, sql, odbc

我正在使用它来打印 sql server 中特定表的所有名称，这是代码：

```
$host="";
$uid="";
$passVal="";
$database="montim";
odbc_connect("Driver={SQL Server};Server=$host;Database=$database;",$uid, $passVal ) or die("Connection could not established");
$query = "SELECT * FROM users";
$res = odbc_exec($query) or die(odbc_error());
while( $row = odbc_fetch_array($res) ) {
print_r($row); 
} 
```

我想出了这个错误：

```
 Warning: odbc_exec() expects at least 2 parameters, 1 given in 
```

有人可以帮我这是为什么吗？我的意思是就这么简单，我不想做复杂的事情......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:27:05.087

[ODBC_EXEC](http://php.net/manual/de/function.odbc-exec.php)还需要一个`connection_id`. 尝试

```
$connection = odbc_connect("Driver={SQL Server};Server=$host;Database=$database;",$uid,    
...
$res = odbc_exec($connection, $query) or die(odbc_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:28:44.043

ODBC 函数不会像函数那样隐式记住幕后的活动连接`mysql_`。这是一件好事，顺便说一句。您需要跟踪连接并将其传递：

```
$con = odbc_connect(...);
odbc_exec($con, ...); 
```

请阅读手册并注意必要的参数： http: [//php.net/manual/en/function.odbc-exec.php](http://php.net/manual/en/function.odbc-exec.php)

# symbols - ELF 保留部分

> ID：13858806
> 
> 赞同：3
> 
> 时间：2012-12-13T11:25:00.360
> 
> 标签：symbols, elf, object-files

我目前正在处理从一些 C 源文件生成的 ELF 格式的目标文件（我没有，只有目标文件可用）。当我编写一个提取所有未定义符号的小工具时，我遇到了一些具有指向保留部分的部分索引的符号：

详细地：

ELF 文件中的每个`symbol`条目`Symbol Table`都有一个带有整数的字段，指向符号`section header entry index`所属的范围。关于后一种，ELF 规范只有很少的信息，说明这些部分`0``undefined symbols``0xFF00 - 0xFFFF`

> 保留用于特定于处理器的语义。

我的问题是：

哪个代码会导致一个符号的节头表索引指向这样一个`reserved section`？如果它不是来自源代码本身，而是来自编译器或其他东西，请解释:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-31T09:42:54.537

以下部分索引是**保留的，引用这些部分的符号没有任何部分**-

```
#define SHN_UNDEF        0x00
#define SHN_LORESERVE    0xFF00
#define SHN_LOPROC       0xFF00
#define SHN_HIPROC       0xFF1F
#define SHN_ABS          0xFFF1
#define SHN_COMMON       0xFFF2
#define SHN_HIRESERVE    0xFFFF 
```

根据 ELF 格式规范，

1.  *SHN_UNDEF*是一个标记未定义、不相关或其他无意义的节引用的值。相对于节定义的符号是**未定义符号**。

2.  *SHN_LORESERVE*值指定保留索引范围的下限。

3.  *SHN_LOPROC 到 SHN_HIPROC 的*范围是针对特定于处理器的语义。您应该查看您平台的 ABI，以获取有关这些部分索引的信息。

4.  *SHN_ABS*值指定相应参考的绝对值。这意味着**如果一个符号引用了这个部分，那么它已经有一个绝对值并且不受 relocation 的影响**。

5.  *SHN_COMMON*由未分配的外部 C 变量的符号引用。

6.  *SHN_HIRESERVE*值指定保留索引范围的上限。

请注意，节头表包含这些节的条目，但从 SHN_LOPROC 到 SHN_HIPROC 的包含范围除外。

**其他具体说明：**

1.  对于可重定位文件，具有节索引 SHN_COMMON 的符号的值指定对齐约束，而不是地址。这可能适用于声明为全局变量的 .BSS 变量 -

    ```
    int arrayofIntegersToDisplay[256];// Declared a COMMON symbol 
    ```

2.  对于 STT_FILE 类型的符号*（它保存编译代码的文件名的字符串值）*，它们的节索引始终是 SHN_ABS。这意味着肯定应该声明这种类型的符号。

3.  当目标文件引用另一个文件中分配的数据时，使用未定义的符号*（如前所述的部分索引 SHN_UNDEF） -*

一个例子是这样的，

```
/// @file Main.cpp
///
/// Here, we are declaring the variable "var". It is a STT_DATA
/// symbol which (should) have the section-index for ".data"
int var; 
```

在另一个文件中，

```
/// @file Referer.cpp
///
/// Here, we are referencing the variable "var" allocated in the
/// object file for Main.cpp. It is an undefined symbol.
extern int var; 
```

# matlab - 如何绘制频谱图函数的结果？

> ID：13858807
> 
> 赞同：6
> 
> 时间：2012-12-13T11:25:02.900
> 
> 标签：matlab, spectrogram

在我的图中，我有 2 个轴，第一个是信号的时间序列，第二个是信号的时间序列`ifft`。我想添加一个包含信号频谱图的第三个轴。我怎样才能做到这一点？

```
% Create the raw signal
fs = 40;
t = 0:( 1/fs ):4;
y1 = [ sin( 2*pi*5*t( t<=2 ) ), sin( 2*pi*10*t( t>2 ) ) ];

% Compute the ifft of the signal
Fy1 = abs(ifft(y1));
N = numel(t);
idx = 1:numel(Fy1) / 2;
f = fs*(0:(N-1)) / N;

% Plot the raw signal as a time series
subplot(311);
plot(t,y1,'k');
xlabel('Time (s)');
ylabel('Amplitude');

% Plot the spectrum of the signal
subplot(312);
plot(f(idx),2*Fy1(idx),'k')
xlabel('Frequency (cycles/second)');
ylabel('Amplitude'); 
```

我试过使用这个`spectrogram`函数，但是我很难将它的结果解释为一个数字。如何计算频谱图，以便我有时间沿 x 轴运行，幅度沿 y 运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T14:31:19.890

您需要提供更多输入参数到`spectrogram`. 您需要的函数形式是：

```
[S,F,T]=spectrogram(x,window,noverlap,F,fs) 
```

请参阅[http://www.mathworks.com/help/signal/ref/spectrogram.html](http://www.mathworks.com/help/signal/ref/spectrogram.html)完整文档，但基本上您需要定义：

*   `windows`: 用于每个频谱估计计算的样本数
*   `noverlap`: 频谱 N 中频谱 N-1 的计算要包括多少样本
*   `F`：您希望频谱评估的频率
*   `fs`：信号的采样频率。

然后绘制频谱图：

```
subplot(313);
imagesc( T, F, log(S) ); %plot the log spectrum
set(gca,'YDir', 'normal'); % flip the Y Axis so lower frequencies are at the bottom 
```

*注意*：频谱图的**质量**和可**解释性**取决于在`spectrogram`函数中使用正确的输入。

# mysql - 我应该如何处理 Ruby Sequel 中的连接超时？

> ID：13858813
> 
> 赞同：1
> 
> 时间：2012-12-13T11:25:28.597
> 
> 标签：mysql, ruby, rack, sequel

我正在使用 Sequel 从 Rack webapp 与 MySQL 数据库通信。有时，应用程序闲置的时间足够长，以至于超过`wait_timeout`了服务器上的时间（我们已将其保留在默认的 8 小时）。异常表明我们可以启用`autoReconnect`，但显然[不鼓励](https://stackoverflow.com/questions/667289/why-does-autoreconnect-true-not-seem-to-work)这样做。无论如何，在这种情况下，我仍然会遇到异常，并且必须重试该操作。

如果`autoReconnect`是不好的模式，我应该使用什么模式？我想做的是

```
DB["myDB"].pool.hold do | conn |
  ... do stuff
end 
```

但如果连接过时，当然会抛出。我可以将整个事情包装成一个开始救援，然后再试一次，但如果我有一个大池，我最终可能会重试 10 或 20 次，然后才能找到一个有效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T16:38:50.870

有三种可能的解决方案：

1）增加wait_timeout。

2) 使用 cron 作业，以便比 wait_timeout 更频繁地使用连接。

3) 使用 connection_validation 扩展，如果检测到断开连接，它将透明地处理重新连接。

# html - 如何正确对齐中心元素？

> ID：13858815
> 
> 赞同：2
> 
> 时间：2012-12-13T11:25:36.897
> 
> 标签：html, css

我有简单`grid`的，用`css`

```
#videowall-grid{
    width:700px; 
    border:1px dotted #dddddd;
    display: none; 
    margin: 5px auto;
    padding: 5px;
}

 #videowall-grid .square{
    padding: 5px;
    margin: 5px;
    border: 1px dashed #dddddd;
    width: 70px;
    height: 70px;
    display: inline-block;
    text-align: center;

    <div id="videowall-grid" style="display: block;"><div class="row">
<div id="1_1" class="square">8</div><div id="1_2" class="square">373</div><div id="1_3" class="square">1</div><div id="1_4" class="square">111</div></div><div class="row">
<div id="2_1" class="square">318</div><div id="2_2" class="square">319</div><div id="2_3" class="square">321</div><div id="2_4" class="square">button</div></div><div class="row">
<div id="3_1" class="square">234</div><div id="3_2" class="square">button</div><div id="3_3" class="square">button</div><div id="3_4" class="square">button</div></div></div> 
```

[http://jsfiddle.net/nonamez/upHjg/](http://jsfiddle.net/nonamez/upHjg/)

那么如何`center`在 parent 内的正方形和正方形内输入文本`div`？

![在此处输入图像描述](../Images/2759a75dbbb6c7d5c372177b39ad92fc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:37:27.783

将`display:table`&添加`margin:0 auto`到行 div***并使*** `display:table-cell`文本垂直居中

```
#videowall-grid{
    width:700px; 
    border:1px dotted #dddddd;
    display: none; 
    margin: 0 auto;
    padding: 5px; text-align:center
}
#row{display:table;  margin:0 auto}
 #videowall-grid .square{
    padding: 5px;
    margin: 5px;
    border: 1px dashed #dddddd;
    width: 70px;
    height: 70px;
    display:table-cell;
    text-align: center;
    vertical-align:middle
}​ 
```

**[现场演示](http://jsfiddle.net/jARnw/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:30:05.620

添加它会解决你的问题`text-align: center;`。`#videowall-grid`

[演示](http://jsfiddle.net/mbilal/ArU57/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:30:11.730

将`text-align:center;`样式添加到`#videowall-grid`：

```
#videowall-grid{
    width:700px; 
    border:1px dotted #dddddd;
    display: none; 
    margin: 5px auto;
    padding: 5px;
    text-align:center;
} 
```

`text-align`可用于对齐任何`inline`元素。由于您将`.square`s 设置为`inline-block`他们对这种风格的反应。

检查这个[JSFiddle 更新](http://jsfiddle.net/upHjg/1/)

PS 文本在您的 JSfiddle 中的正方形内居中*。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:31:11.360

```
 <div id="videowall-grid" style="display: block;" align="center"> 
```

像上面一样修改这个div

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T11:34:26.710

添加 paddig 将为您完成工作。试试这个编辑过的代码。在这里，我在 videowall-grid 和 .square 中编辑了填充

```
<style type="text/css">
#videowall-grid{
    width:550px; 
    border:1px dotted #dddddd;
    display: none; 
    margin: 5px auto;
    padding: 5px 5px 5px 150px;

}

 #videowall-grid .square{
    padding: 30px 5px 5px 5px;
    margin: 5px;
    border: 1px dashed #dddddd;
    width: 70px;
    height: 45px;
    display: inline-block;
    text-align: center;
}
</style>
<div id="videowall-grid" style="display: block;"><div class="row">
<div id="1_1" class="square">8</div><div id="1_2" class="square">373</div><div id="1_3" class="square">1</div><div id="1_4" class="square">111</div></div><div class="row">
<div id="2_1" class="square">318</div><div id="2_2" class="square">319</div><div id="2_3" class="square">321</div><div id="2_4" class="square">button</div></div><div class="row">
<div id="3_1" class="square">234</div><div id="3_2" class="square">button</div><div id="3_3" class="square">button</div><div id="3_4" class="square">button</div></div></div> 
```

# objective-c - 为不受支持的语言本地化 MPMoviePlayerViewController 的完成按钮

> ID：13858820
> 
> 赞同：0
> 
> 时间：2012-12-13T11:26:03.150
> 
> 标签：objective-c, ios, localization

[这篇文章](https://stackoverflow.com/questions/8412596/localize-done-button-of-mpmovieplayerviewcontroller)可能重复，但我在评论中询问并没有得到任何回应，所以会写在这里

所以主要问题是以编程方式本地化或更改 MPMoviePlayerViewController 中按钮“完成”的按钮标签文本。在我链接的帖子中，有针对当前默认包含在 iPhone 语言支持中的那些语言（英语、德语、俄语等）的解决方案，但我需要本地化为立陶宛语 (lt)、拉脱维亚语 (lv)，其中不在那里。还有其他机会更改该标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T06:38:36.440

```
id mpBarAppearance = [UIBarButtonItem appearanceWhenContainedIn:[MPMoviePlayerViewController class], nil];
if (!iOS > 5) [mpBarAppearance setTitle:@"YourText"]; 
```

# asp.net-mvc - ASP.NET MVC - 使用复选框更新多对多关系

> ID：13858825
> 
> 赞同：0
> 
> 时间：2012-12-13T11:26:20.967
> 
> 标签：asp.net-mvc, razor

我在一个 MVC 项目中，目前卡在多对多映射中。

我有一个多对多的关系。它模拟大学中的学生课程选择。一个学生有科目，并且对于给定的学期，有一个完整的科目列表。

需要：制作一个学生可以访问该页面的表格，并通过使用复选框来选择一些科目。

我创建了一个视图模型（至少我是这么称呼它的）。这是将在视图“编辑”中使用的模型。

编辑.cshtml

```
//in the Edit View
@model StudentViewModel

//Some more code
@Html.EditorFor(model => model.Std.Name)
//etc.. 
```

学生视图模型

```
class StudentViewModel
{
public Student Std { get; set; }
public List<SubjectsSelection> Subs{ get; set; }
}

class SubjectSelection
{
public string Name { get; set; }
public int ID { get; set; }
public bool Selected { get; set; }
} 
```

我想要的是为每个主题添加一组复选框，`Selected = true`以便检查。

`for`我打算通过手动循环创建一个复选框列表。

我可以用一些类似的东西来做到这一点，`@Html.EditorFor(model => model.Subs)`以便在提交表单时我可以使用这样的控制器

```
[HttpPost]
public ActionResult Edit(Machine machine, SubjectSelection[] subs)
{
//Some code here
} 
```

这样之后我就可以进行必要的连接（至少希望如此）并保存到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:29:51.360

*示例展示如何将数据发布到控制器方法*

**剃刀代码：**

```
<div id="form">
        <table width="600">
            <tr>
                <td>Select Date:</td>
                <td>
                    <input class="txtDate" type="date" size="20"></td>
            </tr>
            <tr>
                <td>Select Expense Type:</td>
                <td>
                    <select class="ExpenseType">
                        <optgroup label="Room">
                            <option>Room Fare</option>
                        </optgroup>

                        <optgroup label="Mess">
                            <option>Monthly Mess</option>
                        </optgroup>

                        <optgroup label="Others">
                            <option>Bus Fare</option>
                            <option>Tapari</option>
                            <option>Mobile Recharge</option>
                            <option>Auto</option>
                        </optgroup>
                    </select></td>
            </tr>
            <tr>
                <td>Enter Cost:</td>
                <td>
                    <input  class="cost" type="text" size="45" /></td>
            </tr>
            <tr>
                <td>Extra Details:</td>
                <td>
                    <input class="extra" type="text" size="45" /></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <button href="javascript:void(0);" onClick="saveExpense();" >Submit</button></td>
            </tr>
        </table>
    </div>

<script>
function saveExpense()
    {
        var expenseobject = {          //MyModel Expense has these fields
            date:$('.txtDate').val() ,
            type:$('.ExpenseType').val() ,
            cost: $('.cost').val(),
            extra:$('.extra').val()

        };

        $.ajax({
            url: './saveexpense',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ obj: expenseobject }),
            success: function (result) {
                handleData(result);

            }
        });

    }
</script> 
```

**控制器：**

```
 public ActionResult SaveExpense(Expense obj)
        {
            obj.ExpenseId = Guid.NewGuid();
            if (ModelState.IsValid)
            {
                context.expenses.Add(obj);
                context.SaveChanges();
                int total=context.expenses.Sum(x => x.cost);
                return Json(new {spent=total,status="Saved" });

            }
            else
                return Json(new { status="Error"});   
        } 
```

`Model`您可以执行以下操作，而不是创建对象：

您可以使用 jquery 直接`serialize()`表单并将数据发布到控制器......你就完成了

# android - 在android中将语音路由到蓝牙

> ID：13858828
> 
> 赞同：0
> 
> 时间：2012-12-13T11:26:28.080
> 
> 标签：android, bluetooth, routes, voice

我想将语音路由到蓝牙。

下面的代码是我的播放器。

```
 AudioTrack at;
try {
            minbuffer = AudioTrack.getMinBufferSize(8000,
                    AudioFormat.CHANNEL_OUT_MONO,
                    AudioFormat.ENCODING_PCM_16BIT);
            if (minbuffer < VOICE_SPEECH_SIZE)
                minbuffer = VOICE_SPEECH_SIZE;
            at = new AudioTrack(AudioManager.STREAM_VOICE_CALL, 8000,
                    AudioFormat.CHANNEL_OUT_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, minbuffer,
                    AudioTrack.MODE_STREAM);
            at.play();

            while (PlayOutblinker == Thread.currentThread()) {
                byte[] tt = vbuff.take();
                at.write(tt, 0, tt.length);
            }
        } finally {
            at.stop();
            at.release();
            at = null;
        } 
```

我搜索并找到以下内容：

```
public static void SetRouteBT(Context context, boolean isRoute) {// TODO
    AudioManager mAudioManager = (AudioManager) context
            .getSystemService(Context.AUDIO_SERVICE);
    mAudioManager.setMode(AudioManager.MODE_IN_CALL);
    mAudioManager.startBluetoothSco();
    mAudioManager.setBluetoothScoOn(isRoute);
} 
```

但它不起作用。当我`setBluetoothScoOn(true)`的声音没有路由但与扬声器和麦克风断开连接时。问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:35:31.243

该函数应更改为以下代码：

```
 public static void SetRouteSco(Context context, boolean isRoute) {
    AudioManager mAudioManager = (AudioManager) context
            .getSystemService(Context.AUDIO_SERVICE);
    mAudioManager.setBluetoothScoOn(isRoute);
    if (isRoute)
        mAudioManager.startBluetoothSco();
    else
        mAudioManager.stopBluetoothSco();
} 
```

我也需要以下权限。

```
<uses-permission android:name="android.permission.BROADCAST_STICKY"/>
<uses-permission android:name="android.permission.BLUETOOTH"/>
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/> 
```

# python - 仅使用值中的数字对列表进行排序

> ID：13858833
> 
> 赞同：0
> 
> 时间：2012-12-13T11:26:43.197
> 
> 标签：python, list, sorting

假设我有这个清单

```
a = ['20 - A', '200 - A', '30 - B'] 
```

我想以一种按数字排序的方式对其进行排序，如下所示：

```
['20 - A', '30 - B', '200 - A'] 
```

我知道我可以通过找到第一个空格来拆分值，但我想不出一种方法来对它进行排序

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T11:28:42.000

```
>>> a = ['20 - A', '200 - A', '30 - B']
>>> sorted(a, key = lambda x: int(x.split()[0]))

>>> ['20 - A', '30 - B', '200 - A'] 
```

# java - 如何使用 Java 中的 System.out.println 在控制台中打印突出显示的彩色文本

> ID：13858834
> 
> 赞同：1
> 
> 时间：2012-12-13T11:26:43.040
> 
> 标签：java, printing, colors, console

如何在控制台上以突出显示的颜色打印文本。

我找到了这个[链接](https://stackoverflow.com/questions/5762491/how-to-print-color-in-console-using-system-out-println)，但这谈到了用彩色打印文本而不是用另一种颜色突出显示它。

例子：

![在此处输入图像描述](../Images/ac2abc51ae712b9f7fe6093f7b62ca6e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:42:59.613

要打开黄色背景（例如），您需要转义序列

```
java.lang.String("\033[43m"); 
```

将此与黑色前景结合起来以获得您想要的。

我从[这个 Scala 文档](http://www.scala-lang.org/api/current/scala/Console%24.html)中得到了转义序列。尽管它是 Scala 文档，但它在 Java 中是相关且适用的。[Jansi](http://jansi.fusesource.org/documentation/api/index.html)图书馆应该处理这个问题。请参阅课程中的“背景”参考`Ansi`。

# jquery - 列值和行值要并行添加并显示在jquery中每一行和每一列的末尾

> ID：13858836
> 
> 赞同：0
> 
> 时间：2012-12-13T11:26:48.877
> 
> 标签：jquery

我根据使用 for 循环的要求动态创建了行数和列数。

```
 for (i = 0; i < a ; i++) {
           $("table").append("<tr id='tr" + i + "'></tr>");
      for (j = 0; j < b ; j++) {
            $('[id^="tr' + i + '"]').append("<td><input type='text' class='add1' id='textbox" + i + "" + j + "'/></td>");
         }
       } 
```

我尝试过使用**模糊**事件以及如下**直播**

```
 $(document).live("input.add1", "blur", function (event) {

          }); 
```

我必须在每一行和每一列之后打印添加。请帮忙

带着敬意

拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:41:17.180

使用**代表**而不是**现场**

```
 $(document).delegate("input.add1", "blur", function (event) {
      }); 
```

因为**delegate** ..delegate **()**方法的行为方式与**.live()**方法类似，但是您可以选择锚定位置，而不是将选择器/事件信息附加到文档。就像**.live()**方法一样，这种技术使用事件委托来正常工作。

**示例：如果您为 ROW Addition 编写函数，那么您可以使用如下代码**

```
 $('[id=""]').each(function () {
        Addition($(this).val());
      }); 
```

同样，您可以使用相同的**Addition**函数进行 COLUMN 添加。

一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:38:52.913

`.live()`已弃用，请使用新`.on()`方法作为您想要做的事件委托的首选方法，如下所示：

```
 $(document).on("blur", "input.add1", function (event) {
       //your code
 }); 
```

# c# - 将通用列表 C# 批量插入 SQL Server

> ID：13858837
> 
> 赞同：6
> 
> 时间：2012-12-13T11:26:52.900
> 
> 标签：c#, sql-server, bulkinsert

如何将 C# 中的通用列表批量插入 SQL Server，而不是遍历列表并一次插入单个项目？

我目前有这个；

```
private void AddSnapshotData()
{
  var password =       Cryptography.DecryptString("vhx7Hv7hYD2bF9N4XhN5pkQm8MRfxi+kogALYqwqSuo=");
  var figDb = "ZEUS";
  var connString =
    String.Format(
      "Data Source=1xx.x.xx.xxx;Initial Catalog={0};;User ID=appuser;Password={1};MultipleActiveResultSets=True",
      figDb, password);
  var myConnection = new SqlConnection(connString);
  myConnection.Open();

  foreach (var holding in _dHoldList)
  {
    lbStatus.Text = "Adding information to SQL for client: " + holding.ClientNo;
    _reports.AddZeusData("tblAllBrooksHoldingsSnapshot", "CliNo, SEDOL, ISIN, QtyHeld, DateOfSnapshot",
                         "'" + holding.ClientNo + "','" + holding.Sedol + "','" + holding.ISIN + "','" +
                         holding.QuantityHeld + "','" + DateTime.Today.ToString("yyyyMMdd") + "'", false, myConnection);
  }
  myConnection.Close();
  lbStatus.Visible = false;
} 
```

`dHoldList`列表在哪里`DHOLDS`；

```
public class DHOLDS : ExcelReport
 {
public String ClientNo { get; set; }
public String Sedol { get; set; }
public Double QuantityHeld { get; set; }
public Double ValueOfStock { get; set; }
public String Depot { get; set; }
public String ValC4 { get; set; }
public String StockR1 { get; set; }
public String StockR2 { get; set; }
public Double BookCost { get; set; }
public String ISIN { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T11:28:11.383

您可以将列表映射到数据表，然后使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)一次插入所有行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-07T04:56:51.417

4年后，这是我的贡献。我有同样的问题，我想批量插入，但传递了一些不会在数据库中的字段，特别是 EF 导航属性，所以我写了这个通用类：

```
/// <summary>
/// This class is intended to perform a bulk insert of a list of elements into a table in a Database. 
/// This class also allows you to use the same domain classes that you were already using because you
/// can include not mapped properties into the field excludedPropertyNames.
/// </summary>
/// <typeparam name="T">The class that is going to be mapped.</typeparam>
public class BulkInsert<T> where T : class
{
    #region Fields

    private readonly LoggingService _logger = new LoggingService(typeof(BulkInsert<T>));
    private string _connectionString;
    private string _tableName;
    private IEnumerable<string> _excludedPropertyNames;
    private int _batchSize;
    private IEnumerable<T> _data;
    private DataTable _dataTable;

    #endregion

    #region Constructor

    /// <summary>
    /// Initializes a new instance of the <see cref="BulkInsert{T}"/> class.
    /// </summary>
    /// <param name="connectionString">The connection string.</param>
    /// <param name="tableName">Name of the table.</param>
    /// <param name="data">The data.</param>
    /// <param name="excludedPropertyNames">The excluded property names.</param>
    /// <param name="batchSize">Size of the batch.</param>
    public BulkInsert(
        string connectionString,
        string tableName,
        IEnumerable<T> data,
        IEnumerable<string> excludedPropertyNames,
        int batchSize = 1000)
    {
        if (string.IsNullOrEmpty(connectionString)) throw new ArgumentNullException(nameof(connectionString));
        if (string.IsNullOrEmpty(tableName)) throw new ArgumentNullException(nameof(tableName));
        if (data == null) throw new ArgumentNullException(nameof(data));
        if (batchSize <= 0) throw new ArgumentOutOfRangeException(nameof(batchSize));

        _connectionString = connectionString;
        _tableName = tableName;
        _batchSize = batchSize;
        _data = data;
        _excludedPropertyNames = excludedPropertyNames == null ? new List<string>() : excludedPropertyNames;
        _dataTable = CreateCustomDataTable();
    }

    #endregion

    #region Public Methods

    /// <summary>
    /// Inserts the data with a bulk copy inside a transaction. 
    /// </summary>
    public void Insert()
    {
        using (var connection = new SqlConnection(_connectionString))
        {
            connection.Open();
            SqlTransaction transaction = connection.BeginTransaction();

            using (var bulkCopy = new SqlBulkCopy(connection, SqlBulkCopyOptions.Default | SqlBulkCopyOptions.KeepIdentity, transaction))
            {
                bulkCopy.BatchSize = _batchSize;
                bulkCopy.DestinationTableName = _tableName;

                // Let's fix tons of mapping issues by
                // Setting the column mapping in SqlBulkCopy instance:
                foreach (DataColumn dataColumn in _dataTable.Columns)
                {
                    bulkCopy.ColumnMappings.Add(dataColumn.ColumnName, dataColumn.ColumnName);
                }

                try
                {
                    bulkCopy.WriteToServer(_dataTable);
                }
                catch (Exception ex)
                {
                    _logger.LogError(ex.Message);
                    transaction.Rollback();
                    connection.Close();
                }
            }

            transaction.Commit();
        }
    }

    #endregion

    #region Private Helper Methods

    /// <summary>
    /// Creates the custom data table.
    /// </summary>
    private DataTable CreateCustomDataTable()
    {
        PropertyDescriptorCollection properties = TypeDescriptor.GetProperties(typeof(T));
        var table = new DataTable();
        foreach (PropertyDescriptor prop in properties)
        {
            // Just include the not excluded columns
            if (_excludedPropertyNames.All(epn => epn != prop.Name))
            {                  
                if (prop.PropertyType.Name == "DbGeography")
                {
                    var type = typeof(SqlGeography);
                    table.Columns.Add(prop.Name, type);
                }
                else
                {
                    table.Columns.Add(prop.Name, Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType);
                }
            }
        }
        foreach (T item in _data)
        {
            DataRow row = table.NewRow();
            foreach (PropertyDescriptor prop in properties)
            {
                // Just include the values in not excluded properties 
                if (_excludedPropertyNames.All(epn => epn != prop.Name))
                {
                    if (prop.PropertyType.Name == "DbGeography")
                    {                           
                        row[prop.Name] = SqlGeography.Parse(((DbGeography)prop.GetValue(item)).AsText()).MakeValid();
                    }
                    else
                    {
                        row[prop.Name] = prop.GetValue(item) ?? DBNull.Value;
                    }
                }
            }
            table.Rows.Add(row);
        }
        return table;
    }

    #endregion

} 
```

它的用法如下：

```
//1st.- You would have a colection of entities:
var myEntities = new List<MyEntity>();
// [...] With thousands or millions of items

// 2nd.- You would create the BulkInsert:
myEntityTypeBulk = new BulkInsert<MyEntity>(_connectionString, "MyEntitiesTableName", myEntities, new[] { "ObjectState", "SkippedEntityProperty1", "SkippedEntityProperty2" });

// 3rd.- You would execute it:
myEntityTypeBulk.Insert(); 
```

获得的性能和此类的可重用性值得此消息。我希望它有帮助：

胡安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:47:07.390

或者，您也可以将列表转换为 XML，如本博文所述：http: [//charleskong.com/blog/2009/09/insert-aspnet-objects-to-sql-server/](http://charleskong.com/blog/2009/09/insert-aspnet-objects-to-sql-server/) 但 SqlBulkCopy 方法似乎更好。

另一句话：如果您想通过迭代代码中的元素来解决它，那么如果您在一个事务中执行所有插入，则可能会提高性能。

# objective-c - 在什么情况下 searchBar.text 与此功能中的 searchText 不同？

> ID：13858838
> 
> 赞同：0
> 
> 时间：2012-12-13T11:26:52.230
> 
> 标签：objective-c, xcode

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText 
```

我放

```
NSAssert([searchBar.text isEqualToString:searchText],@"Search Bar Must Be The Same"); 
```

在那里，它似乎没有被违反

我只是想确定一下，因为这有点奇怪。

如果参数之一，即 searchText 可以简单地通过询问 searchBar.text 得到，为什么还要有 2 个参数，searchBar 和 searchText

为什么不只是有

```
-(void)searchBarTextDidChange:(UISearchBar *) searchBar 
```

或 -(void)textDidChangeForSearchBar:(UISearchBar *) searchBar

正在做

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText 
```

意味着 searchText 带有基本信息，这意味着 searchBar.text 可能与 searchText 不同。从来都不是。当然，除非你改变一些事情。

事实上，我怀疑 searchText 要么指向 searchBar.text 要么只是它的一个副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:32:08.237

我会说这只是一个编码标准。

委托方法的第一个参数应该是调用类是一个很好的做法

所以`(void)searchBar:(UISearchBar *)searchBar`遵循。

现在，如果您省略`textDidChange:(NSString *)searchText`which can be retrieved from`searchBar.Text`
那么我和 Apple 都没有为这种方法找到一个好名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:48:44.523

我还检查了所有可能的情况。我认为提供另一个参数的唯一区域是使这两个函数保持一致

```
- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text; 
```

和

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText 
```

# kendo-ui - 如何使用 Kendo UI Grid Wrapper 将列标题跨越 2 列？

> ID：13858839
> 
> 赞同：4
> 
> 时间：2012-12-13T11:26:52.717
> 
> 标签：kendo-ui

使用 Kendo Grid 的 MVC Wrapper，如何让列标题跨 2 列？

我有 4 列，并且希望在第 1 列和第 3 列上有一个标题，跨越 col1 和 col 2，而 col 3 上的标题跨越 col 3 和 4。

当我这样做时

```
.HeaderHtmlAttributes(new { Colspan = 2 }) 
```

它有效，但总是有 4 个标题，而不仅仅是 2...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T13:25:00.760

您可以将 a 添加`.HeaderHtmlAttributes(new { style= "display:none;" })`到以下列：

```
@(Html.Kendo().Grid(Model.List)
    .Name("grid")
    .Columns(c => { 
        c.Bound(e => e.ID); 
        c.Bound(e => e.Nom).HeaderHtmlAttributes(new { colspan = 2 }); 
        c.Bound(e => e.Nb).HeaderHtmlAttributes(new { style= "display:none;" }); 
    })
) 
```

# python - 渲染时的 NoReverseMatch：找不到带有参数“（）”和关键字参数“{'userid'：u'rec.0'}”的“views.showusersignin”的反向

> ID：13858841
> 
> 赞同：2
> 
> 时间：2012-12-13T11:27:01.903
> 
> 标签：python, django, django-templates

我看了很多关于stackoverflow的讨论，但没有一个有帮助。所以我决定在这里粘贴我的代码。所以请帮我找出我做错的地方。谢谢

**这是 urls.py**

```
(r'^showusersignin/(?P<userid>\d+)/$', 'views.showusersignin'), 
```

**这是views.py中的定义**

```
def showusersignin(request,userid): 
```

**这是signin.html**

```
{%for rec in records.object_list%}

        <tr>
            <td width = "15%">
               <a href="{%url views.showusersignin userid='rec.0' %}">{{rec.0}}</a>
            </td>
            <td width = "15%">
                {{rec.1}}
            </td>
            <td width = "15%">
                {{rec.2}}
            </td>

        </tr>
 {%endfor%} 
```

**服务器上的错误**

```
Request Method: GET
Request URL:    mysite/signin
Django Version: 1.2.5
Exception Type: TemplateSyntaxError
Exception Value:    
Caught NoReverseMatch while rendering: Reverse for 'views.showusersignin' with arguments '()' and keyword arguments '{'userid': u'rec.0'}' not found.
Exception Location: /base/python27_runtime/python27_lib/versions/third_party/django-1.2/django/template/defaulttags.py in render, line 385
Python Executable:  /base/python27_runtime/python27_dist/python
Python Version: 2.7.3
Python Path:    ['/base/data/home/apps/s~bgshelloworld/9.363836595528814694', '/base/data/home/apps/s~bgshelloworld/9.363836595528814694', '/base/python27_runtime/python27_dist/lib/python27.zip', '/base/python27_runtime/python27_dist/lib/python2.7', '/base/python27_runtime/python27_dist/lib/python2.7/plat-linux2', '/base/python27_runtime/python27_dist/lib/python2.7/lib-tk', '/base/python27_runtime/python27_dist/lib/python2.7/lib-old', '/base/python27_runtime/python27_dist/lib/python2.7/lib-dynload', '/base/python27_runtime/python27_dist/lib/python2.7/site-packages', '/base/python27_runtime/python27_lib/versions/1', '/base/python27_runtime/python27_lib/versions/third_party/django-1.2', '/base/python27_runtime/python27_lib/versions/third_party/jinja2-2.6', '/base/python27_runtime/python27_lib/versions/third_party/markupsafe-0.15', '/base/python27_runtime/python27_lib/versions/third_party/setuptools-0.6c11', '/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3', '/base/python27_runtime/python27_lib/versions/third_party/webob-1.1.1', '/base/python27_runtime/python27_lib/versions/third_party/yaml-3.10']
Server time:    Thu, 13 Dec 2012 11:11:23 +0000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:36:00.480

你做错了两件事。

首先，你把`'rec.0'`字符串作为字符串放入 url 标记中。我认为您的意思是传递该列表项的值，所以您应该这样做`userid=rec.0`

其次，您的 URL 没有`userid`参数，因为您没有使用命名参数。将其更改为`r'^showusersignin/(?P<user_id>\d+)/$'`，或将您的 url 标签更改为`{%url views.showusersignin rec.0 %}`

# javascript - Adobe Edge Code (Brackets) 的代码编辑器使用什么字体？

> ID：13858845
> 
> 赞同：2
> 
> 时间：2012-12-13T11:27:09.063
> 
> 标签：javascript, css, typography, adobe-edge, adobe-brackets

有人知道吗？还有什么语法荧光笔正在使用？美化之类的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T14:51:02.153

Source Code Pro 是他们使用的字体。

[https://github.com/adobe/Source-Code-Pro](https://github.com/adobe/Source-Code-Pro)

[https://github.com/adobe/Source-Code-Pro/downloads](https://github.com/adobe/Source-Code-Pro/downloads)

语法高亮是通过代码镜像完成的

[http://codemirror.net/](http://codemirror.net/)

此处列出了所有可用的扩展。

[https://github.com/adobe/brackets/wiki/Brackets-Extensions](https://github.com/adobe/brackets/wiki/Brackets-Extensions)

# java - 如何使用Java计算Excel文档列中的行数

> ID：13858846
> 
> 赞同：0
> 
> 时间：2012-12-13T11:27:09.643
> 
> 标签：java, apache-poi

我有一个从 excel 文档中获取数据的 java 代码。**我想计算列数和总行数（在特定列中）**。我怎样才能做到这一点？下面提供了 Java 代码和所需的 o/p

（编辑）：我应该进行什么修改以获得所需的 o/p 例如我应该编写一个循环来获取列和行的计数，或者有一种方法可以做到这一点

所需的 O/P

```
ColumnA ColumnB ColumnC
Vinayak James   Dan
India   US      Denmark

 Total number of Columns: 3
number of data in ColumnA:2
number of data in ColumnB:2
number of data in ColumnC:2 
```

（编辑）：- 在这里回答-[计算 Excel 表列中的行数（提供 Java 代码）](https://stackoverflow.com/questions/13874074/count-number-of-rows-in-a-column-of-excel-sheetjava-code-provided)

我的 Java 代码：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Iterator;

import org.apache.poi.ss.formula.functions.Column;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class ExcelRead {
    public static void main(String[] args) {
        int count=0;
    try {
        FileInputStream file = new FileInputStream(new File("C:/Users/vinayakp/Desktop/Book.xlsx"));
        XSSFWorkbook workbook = new XSSFWorkbook(file);
        XSSFSheet sheet = workbook.getSheetAt(0);
        Iterator<Row> rowIterator = sheet.iterator();
        while(rowIterator.hasNext()) {
            Row row = rowIterator.next();
            Iterator<Cell> cellIterator = row.cellIterator();
            while(cellIterator.hasNext()) {
                Cell cell = cellIterator.next();
                switch(cell.getCellType()) {
                    case Cell.CELL_TYPE_BOOLEAN:
                        System.out.print(cell.getBooleanCellValue() + "\t\t");
                        break;
                    case Cell.CELL_TYPE_NUMERIC:
                        System.out.print(cell.getNumericCellValue() + "\t\t");
                        break;
                    case Cell.CELL_TYPE_STRING:
                        System.out.print(cell.getStringCellValue() + "\t\t");
                        break;
                }
            }
            System.out.println("");
        }

        file.close();    
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException ae) {
        ae.printStackTrace();
    }
}
} 
```

我得到的输出是：

```
ColumnA ColumnB ColumnC
Vinayak James   Dan
India   US      Denmark 
```

如上所示，我需要获得所需的 o/p。**代码工作正常**，但是我需要获取列和行的*计数值。*请为我提供相同的解决方案。我之前遇到的代码问题在这个问题中得到了解决：[阅读 Excel 文档时出现问题（Java 代码）](https://stackoverflow.com/questions/13856466/issu-while-reading-excel-document-java-code)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:38:12.303

我认为您可以使用[此处](https://stackoverflow.com/questions/2922692/to-get-columns-from-excel-files-using-apache-poi)建议的代码来获取列，然后对于列中的每一行（尽管关于 POI 方法的行中的每一列更多），只需计算您需要的值。

因此，您的代码可能会遵循以下内容：

```
for(Row row : sheet) {
   short minColIx = row.getFirstCellNum();
   short maxColIx = row.getLastCellNum();
   for(short colIx = minColIx; colIx<maxColIx; colIx++) {
     Cell c = row.getCell(colIx);
     if(c != null) {
        if(c.getCellType() == Cell.CELL_TYPE_NUMERIC) {
           // add c.getNumericCellValue()
        }
     }
   }
} 
```

[poi api docs](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFRow.html#getLastCellNum%28%29)也有很好的想法来处理列号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:40:09.777

该代码使用 Iterator 来解析每一行和每一列的值。它不知道有多少项目需要迭代，所以你不能查询它的结果。

`getLastRowNum`但是，您可以使用 API （[参考](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#getLastRowNum%28%29)）获取最后一行索引。

> 获取工作表上最后一行的编号。由于 excel 文件格式的特殊性，如果调用此方法的结果为零，则您无法判断这是否意味着工作表上有零行，或者在位置零处有一行。对于这种情况，另外调用 getPhysicalNumberOfRows() 来判断位置零是否有行。

同样，对于每个单元格，您`getLastCellNum`在 HSSFRow 类（[参考](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFRow.html#getLastCellNum%28%29)）中都有 API。

您需要更改代码以利用这些 API。

教程：[用 Java 读/写 Excel](http://viralpatel.net/blogs/java-read-write-excel-file-apache-poi/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:42:35.773

我不熟悉在 java 代码中使用 Excel 工作簿，但你有一个迭代器。你不能简单地添加一个 int 并在每次迭代时递增它吗？

```
int counter = 0;
while(rowIterator.hasNext()) {
...
counter++;
} 
```

使用您的级联迭代器，您可以使用多个计数器来跟踪您想要的不同数字；

```
int[] counters = new int[4];
counters[0] = 0; // number of columns
counters[1] = 0; // number of rows in colA
counters[2] = 0; // number of rows in colB
counters[3] = 0; // number of rows in colC

while(rowIterator.hasNext()) {
    /* 
     * keep track of columns. Useful if colD and more may exist too, but
     * you don't want them counted
     */
    int col = 0;
    while(cellIterator.hasNext()) {
        switch(col) {
        case 0 : counters[1]++; break; // add row to colA counter
        case 1 : counters[2]++; break; // add row to colB counter
        case 2 : counters[3]++; break; // add row to colC counter
        }
        col++;
    }
    counters[0] = col; // save number of columns
} 
```

这可能不是最好的方法，但我认为它应该足够好。请记住，我也没有这方面的经验，所以如果有人回答使用 xssf 类的解决方案，它可能会更好。此外，我还没有对此进行测试，但它至少应该为您提供一种方法。

我不知道 xssf 是如何处理的，但您可能想在计算单元格之前检查它们是否为空。但是，从您发布的代码来看，我想这不是必需的。

如果您有可变数量的列（可能，否则，为什么要计数？）您应该制作一个包含计数器的可变长度列表，并为每一列添加一个新的 counter int。希望这对你有帮助！

# magento - 自定义选项在购物车中显示价格 0.00

> ID：13858857
> 
> 赞同：0
> 
> 时间：2012-12-13T11:27:44.433
> 
> 标签：magento

我试图在购物车页面中显示自定义选项的价格，但它正确显示了产品价格，但自定义价格为 0.00 美元（即）如果产品价格为 50.00 美元，则在购物车页面中显示为 50.00 美元 + 0.00 美元，但实际的自定义选项价格为 0.80 美元。有人可以帮我弄这个吗。 [http://www.usbsticks.com.au/stage/checkout/cart/](http://www.usbsticks.com.au/stage/checkout/cart/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:24:25.617

您可以在此处找到解决方案，这是 Magento 1.7[此处的问题](http://k2xl.com/wordpress/custom-options-broken-in-magento-1-7-heres-the-fix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T16:23:35.740

Download the file `scpoptions.phtml` from [here](http://www.magentocommerce.com/boards/viewthread/297872/) and place it in:

```
app/design/frontend/default/[your_theme]/template/catalog/product/view/ 
```

# mysql - MySQL错误消息被切断

> ID：13858860
> 
> 赞同：1
> 
> 时间：2012-12-13T11:27:52.250
> 
> 标签：mysql, sphinx

我在 MySQL 中使用 SphinxSE 作为数据源。我正在运行一个产生错误的查询，但错误消息在重要部分之前被截断：

> ERROR 1430 (HY000)：处理对外部数据源的查询时出现问题。数据源错误：searchd 错误：index myindex1: parse error: unknown identifier '

错误消息应为`unknown identifier 'mycolumn'`.

我怎样才能得到其余的错误信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:46:34.190

看起来消息的全文正在记录到 /var/log/sphinxsearch/searchd.log，这对于现在来说已经足够了。

# c++ - C++ 解析代码（手写）

> ID：13858866
> 
> 赞同：3
> 
> 时间：2012-12-13T11:28:35.293
> 
> 标签：c++, parsing

我需要解析一种类似于 Java 的最小化版本的语言。由于效率是我选择手写解析器而不是像 GOLD、bison 和 yacc 这样的 LRAR 解析器生成器的最重要因素。

但是我找不到好的手写解析器背后的理论。似乎只有关于这些生成器及其背后机制的教程。

我必须放弃使用正则表达式吗？因为我可以想象它们比手写tokiners慢。

有人知道手写解析的好课程或教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:39:11.477

如果有帮助，这里是（不是课程或教程，而是）一个手写解析器的例子：[https](https://github.com/tabatkins/css-parser) ://github.com/tabatkins/css-parser （但是它被明确编码为正确/简单的对应于规范，而不是针对高性能进行优化）。

我预计，更大的问题是开发解析规范。解析器规范的示例包括[http://dev.w3.org/csswg/css3-syntax/](http://dev.w3.org/csswg/css3-syntax/)和用于解析 HTML5 的类似规范。

使用解析器生成器的先决条件是语言语法已由语法（其中语法格式由解析器生成器支持）定义，而不是由解析算法定义。

# raphael - 线标签饼图graphael

> ID：13858870
> 
> 赞同：2
> 
> 时间：2012-12-13T11:28:41.687
> 
> 标签：raphael, graphael

我正在为移动设备创建一个 html5 网络，我正在使用 graphael 创建一个饼图。该图表完美呈现，但我有两个问题我没有找到解决方案。

我希望图表的第一部分从 12 点开始。

[https://dl.dropbox.com/u/23287638/piechart.png](https://dl.dropbox.com/u/23287638/piechart.png)

我的第二个问题是'我想为图表的每个部分都有一个线标签，如下所示：

[https://dl.dropbox.com/u/23287638/chart2.png](https://dl.dropbox.com/u/23287638/chart2.png)

关于如何做这两件事的任何建议？

谢谢

# c# - 如何匹配/连接/配对列表中的整数

> ID：13858874
> 
> 赞同：-1
> 
> 时间：2012-12-13T11:28:48.957
> 
> 标签：c#, algorithm, graph

我有一个列表，有偶数个节点（总是偶数）。我的任务是以成本最低的方式“匹配”所有节点。

所以我可以有`listDegree(1,4,5,6)`，它代表我图中的所有奇数度节点。如何将 中的节点配对`listDegree`，并将成本最低的组合保存到变量中，例如`int totalCost`.

像这样的东西，我返回的金额最少`totalCost`。

```
totalCost = (1,4) + (5,6)
totalCost = (1,5) + (4,6)
totalCost = (1,6) + (4,5) 
```

--------------- 更多细节（或重写鞋面） ---------------

我有一个类，它读取我的输入文件并存储我需要的所有信息，例如图形的成本矩阵、边、边和节点的数量。

接下来我有一个 DijkstrasShortestPath 算法，它计算我的图表（costMatrix）中从给定起始节点到给定结束节点的最短路径。

我还有一个方法可以检查图形（costMatrix）并将所有奇数度节点存储在一个列表中。

所以我一直在寻找的是一些关于如何以最便宜的方式（最短路径）配对所有奇数度节点的提示。当我知道如何组合列表中的所有节点时，使用我拥有的数据很容易。

我不需要解决方案，这不是家庭作业。

*我只需要一个提示即可知道，当您有一个包含整数的列表时，如何将所有整数成对组合。*

希望这个解释更好......：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:37:37.577

（如果没有关于成本的更多细节，我将假设`cost(1,5) = 1-5`，并且您希望总和尽可能接近 0。）

您正在描述偶数[**分区问题**](http://en.wikipedia.org/wiki/Partition_problem)，即[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)。

问题是：给定一个列表`L`，找到两个列表`A,B`，满足`sum(A) = sum(B)`#elements(A) = #elements(B)，其中 L 中的每个元素都必须在 A 或 B 中（并且不能同时在两者中）。

对您的问题的简化很简单，对中的每个左侧元素都将转到 A，而每对中的每个右侧元素都将转到 B。

因此，**该问题没有已知的多项式解决方案**，但您可能想尝试指数穷举搜索方法（搜索所有可能的对，其中有`Choose(2n,n) = (2n!)/(n!*n!)`）。

另一种方法是[基于伪多项式 DP 的解决方案](http://en.wikipedia.org/wiki/Partition_problem#Pseudo-polynomial_time_algorithm)（对于小整数可行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:40:15.063

~~也许：~~

 ~~```
List<int> totalCosts = listDegree
            .Select((num,index) => new{num,index})
            .GroupBy(x => x.index / 2)
            .Select(g => g.Sum(x => x.num))
            .ToList(); 
```~~ 

[**演示**](http://ideone.com/YalmCP)

 ~~**编辑**：

在您编辑了您的问题后，我了解您的要求。您需要列表中所有元素的所有（成对）组合的总和。我会使用这个非常有效且内容丰富的[**组合学项目。**](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)

```
var listDegree = new[] { 1, 4, 5, 6 };
int lowerIndex = 2;
var combinations = new Facet.Combinatorics.Combinations<int>(
    listDegree,
    lowerIndex,
    Facet.Combinatorics.GenerateOption.WithoutRepetition
);

 // get total costs overall
 int totalCosts = combinations.Sum(c => c.Sum());

 // get a List<List<int>> of all combination (the inner list count is 2=lowerIndex since you want pairs)
 List<List<int>> allLists = combinations.Select(c => c.ToList()).ToList();

 // output the result for demo purposes
 foreach (IList<int> combis in combinations)
 {
     Console.WriteLine(String.Join(" ", combis));
 } 
```~~

# git - 无法使用 vcsrepo 签出 git ssh 存储库

> ID：13858875
> 
> 赞同：3
> 
> 时间：2012-12-13T11:28:50.203
> 
> 标签：git, ubuntu-12.04, puppet

所以这就是我正在使用的：

```
vcsrepo { "$base_dir":
    ensure => latest,
    provider => git,
    source => 'ssh://git@example.com:7999/EXAMPLE/example.git',
    require => File["$base_dir"],
    revision => $branch,
} 
```

当我应用 puppet 清单时会导致错误：

```
Error: Could not create repository (non-repository at path)
Error: /Stage[main]/MyServer::Server/Vcsrepo[/usr/service/myserver]/ensure: change from absent to latest failed: Could not create repository (non-repository at path) 
```

当我做：

```
git clone ssh://git@example.com:7999/EXAMPLE/example.git 
```

有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-25T21:43:25.410

可能您不想使用强制，因为这会导致每次应用清单时都会删除和克隆 git 存储库，或者只是吹走包含可能无法替换的不相关文件的目录！相反，我建议你看一下[git 提供者的源代码](https://github.com/puppetlabs/puppetlabs-vcsrepo/blob/dd4b638a420c75eb3a3a2badceffc720be231096/lib/puppet/provider/vcsrepo/git.rb#L112)。在那里你可以确切地看到正在做什么来确定一个 repo 是否存在。具体来说，`working_copy_exists?`方法。

在我的情况下，发生故障是因为我已经指定了一个`ssh://`url，但是现有的 repo 已经被克隆（通过 ssh），其 url 类似于`git@example.com:EXAMPLE/example.git`. 这意味着当该`working_copy_exists?`方法检查`.git/config`repo 中的 寻找地址时`ssh://`，它无法找到它！这会导致 vcsrepo 假定目录内容是不相关的，并且在没有强制的情况下失败。

URL 检查只是该方法中的几种检查之一，因此如果这不是它无法正确识别您的工作副本的原因，那么它可能是其他检查之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T13:57:27.490

如果目标目录存在为非空，请在克隆 repo 中添加强制选项。

```
vcsrepo { "$base_dir":
    ensure => latest,
    provider => git,
    source => 'ssh://git@example.com:7999/EXAMPLE/example.git',
    require => File["$base_dir"],
    revision => $branch,
    force => true,
} 
```

来源：[vcsrepo：如果目标路径已存在，则 git clone 不起作用。](https://projects.puppetlabs.com/issues/10356)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T21:01:54.657

基于此讨论 [https://groups.google.com/d/msg/puppet-users/ke5Nk1qwGGs/37dFA3tr5rIJ](https://groups.google.com/d/msg/puppet-users/ke5Nk1qwGGs/37dFA3tr5rIJ) 以及个人经验，

vcsrepo 想要创建目录。

因此，如果 $base_dir 是 /tmp/foo/bar/baz，则应该只存在 /tmp/foo/bar 目录。

为了让 ssh 正常工作（[https://github.com/puppetlabs/puppetlabs-vcsrepo/blob/master/README.GIT.markdown#for-sources-that-use-ssh-eg-usernameserver](https://github.com/puppetlabs/puppetlabs-vcsrepo/blob/master/README.GIT.markdown#for-sources-that-use-ssh-eg-usernameserver)），你必须向 vcsrepo 添加一个用户属性，以便它获取正确的 ssh 密钥（很烦人，因为它还假设您希望该用户拥有新克隆的 repo）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-14T06:29:51.523

您不需要`ssh://`结帐的整个路径。该模块将为您处理。

这是从[他们的例子](https://github.com/bruce/puppet-vcsrepo/blob/master/README.GIT.markdown)中摘录的：

```
vcsrepo { "/path/to/repo":
    ensure => present,
    provider => git,
    source => "git://example.com/repo.git"
} 
```

你的看起来像：

```
vcsrepo { "$base_dir":
    ensure => latest,
    provider => git,
    source => 'git://example.com:7999/EXAMPLE/example.git',
    require => File["$base_dir"],
    revision => $branch,
} 
```

# java - Hibernate条件查询多个条件

> ID：13858876
> 
> 赞同：6
> 
> 时间：2012-12-13T11:28:58.427
> 
> 标签：java, hibernate, hibernate-criteria

在我当前的项目中，我遇到了使用休眠条件查询获取实体的问题。我有以下实体：

*   教授，其中包含学生列表
*   学生，其中包含作业列表。
*   作业，其中包含分配给它的学生的 id。

现在，我想获得与教授相关的所有作业，即教授分配给他的学生的所有作业。

此查询显示了我想在标准查询中实现的内容。

```
select * from Assigment p, Student a, Professor c where p.studentid = a.id and a.proffid = c.id and c.id = 2411; 
```

如何使用休眠条件 API 实现此查询？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T06:36:17.497

假设你的表是这样的：

```
@Entity
public class Professor{
    K id;
    List<Student> students;
}

@Entity
public class Student{
    K profid;
    List<Assignments> assignments;
}

@Entity
public class Assignments{
    K studentid;
} 
```

使用别名的简单示例：

```
Criteria criteria = currentSession.createCriteria(Professor.class, "professor");
    criteria.createAlias("professor.students", "student");
    criteria.createAlias("student.assigments", "assigment");
    criteria.add(Restrictions.eqProperty("professor.id", "student.profid"));
    criteria.add(Restrictions.eqProperty("assigment.studentid", "student.profid"));
    criteria.add(Restrictions.eq("id", 2411));
return criteria.list(); 
```

# javascript - Javascript - 将元素放入 var 但无法更改样式

> ID：13858881
> 
> 赞同：0
> 
> 时间：2012-12-13T11:29:06.757
> 
> 标签：javascript

我有一个在单击元素时调用的函数。

```
function showHide(elem){    
        var clickedText = elem.getElementsByTagName("p");
        clickedText.style.color = "green";

    } 
```

当我运行此代码时，我得到一个`Uncaught TypeError: Cannot set property 'color' of undefined`. 但是，如果我这样做`console.log(clickedText)`，它会记录适当的

标签。无法为我的生活弄清楚为什么这不起作用，我错过了一些完全明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T11:31:44.543

该[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)方法返回元素的集合（在 a`NodeList`中，类似于数组）。

您将需要指定一个索引。例如：

```
clickedText[0].style.color = "green"; 
```

目前，您正在尝试访问其自身的`style`属性`NodeList`，而不是其中包含的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T11:32:00.840

`getElementsByTagName`返回一个元素列表，因此您需要遍历结果：

```
var clickedTexts = elem.getElementsByTagName("p");
for (var i = 0; i < clickedTexts.length; i++) { 
    clickedTexts[i].style.color = "green";
} 
```

# php - cc avenue php集成不起作用

> ID：13858882
> 
> 赞同：3
> 
> 时间：2012-12-13T11:29:07.520
> 
> 标签：php, payment-gateway, ccavenue

我正在使用 ccavenue php 集成演示文件。当我填写商家 ID 和 32 位工作密钥并提交数据时没有响应返回。只有空白页面带有以下网址

[http://www.ccavenue.com/shopzone/cc_details.jsp](http://www.ccavenue.com/shopzone/cc_details.jsp)

我无法理解集成出了什么问题。

这是我填写的表格的代码：

```
<form method="post" action="checkout.php">
    <table>
        <tr>
            <td>Merchant Id : </td><td><input type="text" name="Merchant_Id" value=""></td>
        </tr>
        <tr>
            <td>Amount : </td><td><input type="text" name="Amount" value="10.00"></td>
        </tr>
        <tr>
            <td>Order Id : </td><td><input type="text" name="Order_Id" value="test_r1234"></td>
        </tr>
        <tr>
            <td>Redirect URL : </td><td><input type="text" name="Redirect_Url" value="redirect.php"></td>
        </tr>

        The Billing details of the customer have to be mandatorily sent via the below mentioned parameters. Please note this has to be authentic data else the transaction would be rejected by the risk team.

        <tr>
            <td>Bill Name : </td><td><input type="text" name="billing_cust_name" value="sachin tyagi"></td>
        </tr>
        <tr>
            <td>Bill Address : </td><td><input type="text" name="billing_cust_address" value="sector 20- g158 , noida"></td>
        </tr>
        <tr>
            <td>Bill Country : </td><td><input type="text" name="billing_cust_country" value="india"></td>
        </tr>
        <tr>
            <td>Bill State : </td><td><input type="text" name="billing_cust_state" value="UP"></td>
        </tr>
        <tr>
            <td>Bill City : </td><td><input type="text" name="billing_city" value="Noida"></td>
        </tr>
        <tr>
            <td>Bill Zip : </td><td><input type="text" name="billing_zip" value="201301"></td>
        </tr>
        <tr>
            <td>Bill Tel : </td><td><input type="text" name="billing_cust_tel" value="08826483709"></td>
        </tr>
        <tr>
            <td>Bill Email : </td><td><input type="text" name="billing_cust_email" value="sachin.tyagi@flashonmind.com"></td>
        </tr>
        <tr>
            <td>Ship Name : </td><td><input type="text" name="delivery_cust_name" value="sachin tyagi"></td>
        </tr>
        <tr>
            <td>Ship Address : </td><td><input type="text" name="delivery_cust_address" value="sector 20- g158 , noida"></td>
        </tr>
        <tr>
            <td>Ship Country : </td><td><input type="text" name="delivery_cust_country" value="India"></td>
        </tr>
        <tr>
            <td>Ship State : </td><td><input type="text" name="delivery_cust_state" value="UP"></td>
        </tr>
        <tr>
            <td>delivery city : </td><td><input type="text" name="delivery_city" value="Noida"></td>
        </tr>
        <tr>
            <td>Ship Zip : </td><td><input type="text" name="delivery_zip" value="201301"></td>
        </tr>
        <tr>
            <td>Ship Tel : </td><td><input type="text" name="delivery_cust_tel" value="08826483709"></td>
        </tr>
        <tr>
            <td>Delivery Notes : </td><td><input type="text" name="delivery_cust_notes" value="test Notes"></td>
        </tr>
         <tr>
            <td>PayType: [dummy values, please contact service@ccavenue.com for actual bank short codes]: </td><td><input type="text" name="payType" value=""></td>
        </tr>
        <tr>
            <td>Billing Page Heading : </td><td><input type="text" name="billingPageHeading" value=""></td>
        </tr>

        <tr>
            <td colspan='2' align='center'>
                <INPUT TYPE="submit" value="submit">
            </td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:49:49.123

**用于集成 CCAvenue 支付网关的 PHP 脚本**：

CCavenue 是印度最受欢迎的在线购物支付网关。它通过使用您银行的国际信用卡（与CCavenue有联系）在线账户或使用它的借记卡（ATM卡）提供付款。它是向网上商店提供资金的最安全的地方之一。

For Integrate it with your website you should have CCavenue account and they give you a merchant id and a unique key for your site that is most important for money transaction.

Php Function’s Require TO Validate Require Value for CCAvenue Payment.

It requires 2 files commonly.,like

**File #1 :** ccavenueValidate.php

```
<?php

    function getCheckSum($MerchantId,$Amount,$OrderId ,$URL,$WorkingKey)
    {
        $str ="$MerchantId|$OrderId|$Amount|$URL|$WorkingKey";
        $adler = 1;
        $adler = adler32($adler,$str);
        return $adler;
    }

    function verifyCheckSum($MerchantId,$OrderId,$Amount,$AuthDesc,$CheckSum,$WorkingKey)
    {
        $str = "$MerchantId|$OrderId|$Amount|$AuthDesc|$WorkingKey";
        $adler = 1;
        $adler = adler32($adler,$str);

        if($adler == $CheckSum)
            return "true" ;
        else
            return "false" ;
    }

    function adler32($adler , $str)
    {
        $BASE =  65521 ;

        $s1 = $adler & 0xffff ;
        $s2 = ($adler >> 16) & 0xffff;
        for($i = 0 ; $i < strlen($str) ; $i++)
        {
            $s1 = ($s1 + Ord($str[$i])) % $BASE ;
            $s2 = ($s2 + $s1) % $BASE ;
            //echo "s1 : $s1 <BR> s2 : $s2 <BR>";

        }
        return leftshift($s2 , 16) + $s1;
    }

    function leftshift($str , $num)
    {

        $str = DecBin($str);

        for( $i = 0 ; $i < (64 - strlen($str)) ; $i++)
            $str = "0".$str ;

        for($i = 0 ; $i < $num ; $i++)
        {
            $str = $str."0";
            $str = substr($str , 1 ) ;
            //echo "str : $str <BR>";
        }
        return cdec($str) ;
    }

    function cdec($num)
    {

        for ($n = 0 ; $n < strlen($num) ; $n++)
        {
            $temp = $num[$n] ;
            $dec =  $dec + $temp*pow(2 , strlen($num) - $n - 1);
        }

        return $dec;
    }
?> 
```

**File #2 :** form.php

Processing Page Code CCAvenue Passing Parameter That Require for Complete the Shopping In this page data comes from checkout form of shopping cart collect and validate according CCAcenue rules and arrange in given format and send it CCAenue sever for payment Processing.

```
<?php
    include(ccavenueValidate.php);
    $ccavenuemerchantId= "";//This id(also User Id)  available at "Generate Working Key" of "Settings & Options"
    $Amount = $orderdata[5];//your script should substitute the amount in the quotes provided here
    $orderId= $orderdata[0];;//your script should substitute the order description in the quotes provided here
    $WorkingKey = "";//Given to merchant by ccavenue
    $returnUrl ="http://www.example.com/shopping.php"; //url of your successpage
    $Checksum = getCheckSum($Merchant_Id,$Amount,$orderId,$Redirect_Url,$WorkingKey); // Validate All value
?>

<p align="center" style="font-family:Calibri; font-size:24px;color:#3670A7;">Processing to CCAvenue..............</p>

<form id="submittoserver" method="post" action="https://www.ccavenue.com/shopzone/cc_details.jsp">
    <input type="hidden" name="Merchant_Id" value="<?php echo $ccavenuemerchantId; ?>">
    <input type="hidden" name="Amount" value="<?php echo $Amount; ?>">
    <input type="hidden" name="Order_Id" value="<?php echo $ orderId; ?>">
    <input type="hidden" name="Redirect_Url" value="<?php echo $ returnUrl; ?>">
    <input type="hidden" name="Checksum" value="<?php echo $Checksum; ?>">
    <input type="hidden" name="billing_cust_name" value="<?php echo $orderdata[7].$orderdata[8];?>"> <!--Pass Customer Full Name -->
    <input type="hidden" name="billing_cust_address" value="<?php echo $orderdata[9].$orderdata[10];?>"><!--Pass Customer Full Address-->
    <input type="hidden" name="billing_cust_country" value="<?php echo $orderdata[15];?>"> <!--Pass Customer Country -->
    <input type="hidden" name="billing_cust_state" value="<?php echo $orderdata[14];?>"><!--Pass Customer State -->
    <input type="hidden" name="billing_cust_city" value="<?php echo $orderdata[13];?>"> <!--Pass Customer City -->
    <input type="hidden" name="billing_zip" value="<?php echo $orderdata[16];?>"> <!--Pass Customer Zip Code-->
    <input type="hidden" name="billing_cust_tel" value="<?php echo $orderdata[11];?>"> <!--Pass Customer Phone No-->
    <input type="hidden" name="billing_cust_email" value="<?php echo $orderdata[12];?>"> <!--Pass Customer Email address-->
    <input type="hidden" name="delivery_cust_name" value="<?php echo $orderdata[7].$orderdata[8];?>"> <!--Pass Same or other other detail fill by customer-->
    <input type="hidden" name="delivery_cust_address" value="<?php echo $orderdata[9].$orderdata[10];?>">
    <input type="hidden" name="delivery_cust_country" value="<?php echo $orderdata[15];?>">
    <input type="hidden" name="delivery_cust_state" value="<?php echo $orderdata[14];?>">
    <input type="hidden" name="delivery_cust_tel" value="<?php echo $orderdata[11];?>">
    <input type="hidden" name="delivery_cust_notes" value="">
    <input type="hidden" name="Merchant_Param" value="">
    <input type="hidden" name="billing_zip_code" value="<?php echo $orderdata[16];?>">
    <input type="hidden" name="delivery_cust_city" value="<?php echo $orderdata[13];?>">
    <input type="hidden" name="delivery_zip_code" value="<?php echo $orderdata[16];?>">

</form> 
```

Please refer the above example and also refer the following link [CCAvenue Integration PDF](http://world.ccavenue.com/downloads/CCAVenueWorldIntegrationManual.pdf)

I think this may help you to resolve your problem.

# matlab - 使用 Matlab 保存函数将变量迭代保存到文件中

> ID：13858884
> 
> 赞同：2
> 
> 时间：2012-12-13T11:29:15.820
> 
> 标签：matlab, file-io

我将数组的内容保存到不同的文件中，如下所示：

```
for i=1:10
name = [myfilename num2str(i)] 
savevar = myvariable(i)
filename = mat2str([name '.dat'])
save(filename, savevar, '-ascii','-double','-append')
end 
```

我一直在摆弄这个并不断收到以下错误：

```
??? Error using ==> save
Argument must contain a string. 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T11:35:06.600

命令的参数[`save`](http://www.mathworks.com/help/matlab/ref/save.html)必须是字符串。具体来说，*第二个参数*必须是包含变量名称的字符串。

您的问题是`savevar`变量的实际值，而不是它的名称。

我并没有真正了解您要保存的变量类型。如果它是一个矩阵，最好将它作为一个整体保存到一个文件中，如下所示：

```
save(filename, 'myvariable', '-ascii', '-double', '-append') 
```

如果您有许多变量，并且您希望每个变量在不同的文件中（这更接近您的示例），我建议您创建一个变量名称的单元格数组：

```
varname = {'A', 'B', 'C', ...}  % # Assuming A, B, C, etc. are actual variables 
```

然后在`save`循环内的命令中使用它：

```
save(filename, varname{i}, '-ascii', '-double', '-append') 
```

# javascript - rake vs make vs ant vs maven，用于制作javascript构建工具，哪个更好？

> ID：13858885
> 
> 赞同：0
> 
> 时间：2012-12-13T11:29:15.947
> 
> 标签：javascript, node.js, maven, makefile, rake

我是构建工具的新手，我有各种构建 javascript 工具的选项，但我也很困惑`javascript`哪个更适合制作构建工具`nodejs`在我的情况下？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:46:03.207

我会推荐两个

1.  一个非常适合运行测试和其他正在运行的任务的非 javascript：Make
2.  一个看起来非常漂亮的更 javascripty 的：[gruntjs](https://github.com/gruntjs/grunt)

请让我知道这些是否有效，或者您是否正在寻找更具体的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T11:46:19.057

我建议[Grunt](http://gruntjs.com/)或[Gulp](http://gulpjs.com/)，他们都有一个庞大的社区并且非常成熟。

它们都是用节点编写的，因此您可以获得集成工具的好处。

还值得一提的是，Rake 使用节点工具来完成一些构建任务，例如缩小资产。

# c++ - C 字符串映射键

> ID：13858894
> 
> 赞同：7
> 
> 时间：2012-12-13T11:30:02.630
> 
> 标签：c++, map, cstring

使用 C 字符串作为映射键有什么问题吗？

```
std::map<const char*, int> imap; 
```

地图中元素的顺序无关紧要，因此可以使用`std::less<const char*>`.

我正在使用 Visual Studio 并根据 MSDN（Microsoft 特定）：

> 在某些情况下，可以“合并”相同的字符串文字以节省可执行文件中的空间。在字符串文字池中，编译器使对特定字符串文字的所有引用都指向内存中的同一位置，而不是让每个引用都指向字符串文字的单独实例。

它说它们仅*在某些情况下*被池化，因此使用字符串文字访问地图元素似乎不是一个好主意：

```
//Could these be referring to different map elements?
int i = imap["hello"];
int j = imap["hello"]; 
```

是否可以重载`operator==`for`const char*`以便使用实际的 C 字符串而不是指针值来确定映射元素是否相等：

```
bool operator==(const char* a, const char* b)
{
    return strcmp(a, b) == 0 ? true : false;
} 
```

使用 C 字符串作为映射键是个好主意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T11:31:39.273

> 是否可以为 const char* 重载 operator== 以便使用实际的 C 字符串而不是指针值来确定映射元素是否相等

不，不是，是的，由于问题中指出的原因，这不是一个好主意，**因为**你不需要`char*`，你可以使用 a`std::string`代替。（您可以提供自定义比较功能 - 正如 simonc 所指出的那样，但我不建议这样做）

```
//Could these be referring to different map elements?
int i = imap["hello"];
int j = imap["hello"]; 
```

是的，它们甚至可以引用尚不存在的元素，但它们将被创建并被`operator[]`初始化。分配也存在同样的问题：

```
imap["hello"] = 0;
imap["hello"] = 1; 
```

地图现在可以有 1 或 2 个元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T11:33:19.380

您可以提供带有自定义比较器的地图，用于比较 C 字符串

```
std::map<const char*,YourType,CstrCmp>;

bool CstrCmp::operator()(const char* a, const char* b) const
{
    return strcmp(a, b) < 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:34:33.313

首先，为了引入对映射键的排序，您需要定义一个“小于”比较。地图表示如果两个元素都不小于另一个元素，则两个元素是“等价的”。将 char* 用于映射键是一个坏主意，因为您需要在映射之外的某个地方进行内存管理。

在大多数实际情况下，当您查询地图时，您的键不会是文字。

另一方面，如果您自己维护一个字符串字面量池并为每个字面量分配一个 ID，您可以将这些 ID 用于映射键。

总而言之，我不会依赖微软说“在某些情况下可能会汇集文字”。如果你用文字填充地图，并且如果你用文字作为键查询地图，你不妨使用枚举作为键。

# eclipse - 如何从 Eclipse 项目中排除类

> ID：13858901
> 
> 赞同：2
> 
> 时间：2012-12-13T11:30:27.513
> 
> 标签：eclipse

如何从我的 Eclipse 项目中排除一些类？问题是我做了一些重大更改，如果不纠正它，我就无法运行整个项目。但我想测试它直到我已经修复它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T12:28:58.283

选择要从构建中排除的文件。`Right click`-> `Build path`-> `exclude`。

您可以稍后使用`Right click`-> `Build path`->阅读它们`include`。

如前所述，您可以通过更改文件扩展名来实现相同的目的。

# python - django IntegerField 和 SmallIntegerFields 映射到 Oracle 上的相同数据库类型

> ID：13858903
> 
> 赞同：2
> 
> 时间：2012-12-13T11:30:36.523
> 
> 标签：python, django, oracle, orm, django-orm

有谁知道为什么`IntegerField`两者`SmallIntegerFields`都映射到`NUMBER(11,0)`Oracle？

我希望`SmallIntegerFiled`映射到更小的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:46:24.010

如果您查看代码[`PositiveIntegerField`](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L1151)，[`SmallIntegerField`](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L1180)您会发现它们只是[`Integer`](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L980)具有一些限制的普通字段的衍生物。您可以在此处查看这些 python 字段对象如何映射到 Oracle 数据库字段类型：

[https://github.com/django/django/blob/master/django/db/backends/oracle/creation.py#L9](https://github.com/django/django/blob/master/django/db/backends/oracle/creation.py#L9)

# google-maps - GMaps v3：infoWindow 未关闭

> ID：13858904
> 
> 赞同：0
> 
> 时间：2012-12-13T11:30:37.347
> 
> 标签：google-maps

我在一张地图上有很多标记，在 for 循环中添加。我设法使 infoWindows 按预期显示，但我有一个问题 - 单击关闭按钮时它们不会关闭。如果我打开一个新的，旧的会关闭，这很好。当用户点击地图上的其他任何地方时，我什至设法让它关闭。我一直在寻找解决方案，但我没有找到任何东西。理想情况下，我想让关闭按钮工作，但我想如果我可以隐藏它就足够了。

这是一些代码：

添加标记：

```
function addMarker( map, lat, lon, title, center, image, link )
{
// create latlng object
var latLng = new google.maps.LatLng( parseFloat( lat ), parseFloat( lon ) );
// set image base URL
var imageBase = ajax_vars.home_url + '/images/map-markers/';
// set default image
if ( typeof( image ) == 'undefined' )
    image = 'default';

// CREATE MAPS OBJECTS FOR THE MARKER
// main image
var icon = new google.maps.MarkerImage(
    imageBase + image + '.png',
    new google.maps.Size(32, 32),
    new google.maps.Point(0,0),
    new google.maps.Point(0, 32)
);
// shadow
var shadow = new google.maps.MarkerImage(
    imageBase + image + '.shadow.png',
    new google.maps.Size(32, 32),
    new google.maps.Point(0,0),
    new google.maps.Point(0, 32)
);
// shape
var shape = {
    coord: [1, 1, 1, 32, 32, 32, 32 , 1],
    type: 'poly'
};

// ADD MARKER
marker = new google.maps.Marker({
    position: latLng,
    title: title,
    map: map,
    shadow: shadow,
    icon: icon,
    shape: shape
}); 

// ADD INFOWINDOW TO MARKER
addInfoWindowToMarker( marker, title, link );

// CENTER MARKER IF REQUIRED
if ( center )
    map.setCenter( latLng ); 
```

}

添加信息窗口：

```
function addInfoWindowToMarker( marker, title, link )
{
    // WINDOW HTML CONTENT
    // link html
    if ( typeof( link ) == 'undefined' )
        link = '';
    else
        link = "(<a href='" + link + "'>click to view</a>)";
    // window html
    var htmlContent = "<div class='infoWindow'>This is content for " 
        + title 
        + "<br/>"
        + link
        + "</div>"

    // create object
    infowindow = new google.maps.InfoWindow();

    // CLICK EVENT LISTENER
    google.maps.event.addListener( marker, 'click', function() {
        infowindow.setContent( htmlContent ),
        infowindow.open( map, marker ),
        // trying to hide the button
        // $( '.infoWindow' ).parent().parent().siblings().find( 'img' ).hide();
        //$( '[src="http://maps.gstatic.com/mapfiles/mv/imgs8.png"]' ).hide();
    });

    // trying to close the winddow on click
    google.maps.event.addListener(  infowindow, 'closeclick', function(){       
        infowindow.open( null, null ); 
        alert('closing');
    });
} 
```

当我单击按钮时，甚至不会触发 closeclick 事件。隐藏按钮的尝试什么也没做。

单击标记时出现我不明白的错误：未捕获的类型错误：对象#没有方法“M”

[你可以在这里](http://londoncreativedigital.com/downloads/www.peligoni.com/experience/the-island/)查看地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:39:28.000

我遇到了类似的事情：关闭按钮没有导致 infoWindow 关闭。在我的例子中，map 参数的值不是正确的元素（它是一个包装器/容器）。

一旦我通过了正确的元素，一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:03:06.903

乍一看，您在单击处理程序中使用的是逗号而不是分号：

```
google.maps.event.addListener( marker, 'click', function() {
        infowindow.setContent( htmlContent ), ---> HERE
        infowindow.open( map, marker ), ---------> AND HERE 
```

尝试将那些替换为分号`;`，因为这可能是您遇到的错误。

**更新：**
在您的 infowindow`closeclick`处理程序中，替换您的以下行：

```
infowindow.open( null, null ); 
```

对于这个：

```
infowindow.close(); 
```

与`close()`通常用于关闭信息窗口的方法一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:36:12.167

请参考我已经使用过的以下示例。

**第 1 步：**在页面标题中包含三个脚本文件。例如

```
(i). <script type="text/javascript" src="http://maps.google.com/maps?file=api&v=2&key=Your_API_KEY"></script>
(ii).<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
(iii).<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js"></script> 
```

**步骤#2：**页面上的脚本

```
<script type="text/javascript">

//initialize the map window

jQuery(document).ready(function () {
    load();
});

jQuery(window).unload(function () {
    GUnload();
});

    var map;
    var geocoder;
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();

    function load() {
        if (GBrowserIsCompatible()) {
            geocoder = new GClientGeocoder();
            map = new GMap2(document.getElementById('map'));
            map.addControl(new GSmallMapControl());
            map.addControl(new GMapTypeControl());
            //map.setCenter(new GLatLng(35.048629,-0.820663), 4);
            searchLocations();
            document.getElementById('directions-panel').innerHTML = '';
            var url_new = ''+ benObj.TEMPLATE_DIR +'/print.html';
            var print_icon_url_new = '<a href="javascript:void(0);" class="print" onClick="window.open(\'' + url_new + '\');">Print</a><a href="#" class="link">Link</a>';
            jQuery('#print_icon').html(print_icon_url_new);
        }
    }

//Search Locations with address input

 function searchLocations() {

        var address = document.getElementById('addressInput').value;
        // alert(address);
        var address_new = jQuery("#addressInput_new").val();
        if (address_new != "Enter City or Zip") {
            jQuery("#loc1").html(address_new);
        }
        geocoder.getLatLng(address, function (latlng) {
            //alert(latlng);
            if (!latlng) {
                alert(address + ' not found');
            } else {
                searchLocationsNear(latlng);
            }
        });

    }

// Search Near By Location to place the Markers and Information windows

function searchLocationsNear(center) {
        var radius = document.getElementById('radiusSelect').value;
        var searchUrl = ''+ benObj.BASE_ROOT +'/mapmarker?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius + '&format=raw';

        jQuery.get(searchUrl, function (data) {

            var xml = GXml.parse(data);

            var markers = xml.documentElement.getElementsByTagName('marker');
            map.clearOverlays();

            var sidebar = document.getElementById('sidebar');
            var sidebar_val = '';
            //sidebar.innerHTML = 'Results Found';
            jQuery("#sidebar").html(sidebar_val);

            <!--jQuery("#loc_count").html(markers.length);-->

            if (markers.length == 0) {
                sidebar.innerHTML = 'No results found.';
                map.setCenter(new GLatLng(35.048629, -0.820663), 4);
                return;
            }

            var bounds = new GLatLngBounds();
            for (var i = 0; i < markers.length; i++) {
                var name = markers[i].getAttribute('name');
                var address = markers[i].getAttribute('address');
                var phone_new = markers[i].getAttribute('phonenumber');
                var distance = parseFloat(markers[i].getAttribute('distance'));
                var point = new GLatLng(parseFloat(markers[i].getAttribute('lat')), parseFloat(markers[i].getAttribute('lng')));
                var markerchar = "b";
                var marker = createMarker(point, name, address, phone_new);
                map.addOverlay(marker);
                // var location_count = jQuery('#loc_count').val();
                jQuery('#loc_count').val(i + 1);

                var sidebarEntry = createSidebarEntry(marker, name, address, distance, phone_new);

                jQuery('#sidebar').append(sidebarEntry);

                //sidebar.appendChild(sidebarEntry);

                //  ScrollPane.getContentPane().appendChild(sidebarEntry);
                bounds.extend(point);

            }
            map.setCenter(bounds.getCenter(), map.getBoundsZoomLevel(bounds));
            jQuery('#sidebar').jScrollPane();
            //jQuery('#sidebar').reinitialise();

        });

    }

//To Create a Marker With Information Window

 function createMarker(point, name, address, phone_new) {

        var pinkIcon = new GIcon(G_DEFAULT_ICON);
        pinkIcon.image = ""+ benObj.IMAGE_DIR +"addr-pin-1.png";
        var markerOptions = {
            icon: pinkIcon
        };

        var marker = new GMarker(point, markerOptions);
        var event_calendar = "event_calendar";
        var event_title = ""+ benObj.event_title +"";
        var display = "block";
        var e_dt_start = jQuery("#dtstart").val();
        var e_dt_end = jQuery("#dtend").val();
        var e_start_timestamp = (formatTimestring(e_dt_start));
        var e_end_timestamp = (formatTimestring(e_dt_end));
        var e_desc = jQuery("#edesc").val();
        var StrippedString = e_desc.replace(/(<([^>]+)>)/ig, "");
        var trimmed = StrippedString.replace(/^\s+|\s+$/g, '');
        var html = '<b>' + name + '</b> <br/>' + address + '<br>contact: ' + phone_new + '<br><br><a href="javascript:void(0);" style="text-decoration:none;" onclick="addtocalender();" class="addtocal" id="add_to_cal">Add to Calendar<div class="summary" style="display:none;">' + event_title + ' - "' + name + '"</div><span class="dtstart date" title="' + e_dt_start + '" style="display:none;">8th Aug 2010</span><span class="dtend date" title="' + e_dt_end + '" style="display:none;">01:30am - 12:00pm</span><div class="event-desc" style="display:none;">' + trimmed + '</div><div class="event-locate" style="display:none;">' + name + ',' + address + '</div></a>&nbsp;|&nbsp;<a href="javascript:void(0);" style="text-decoration:none;">Remind Me</a><br><br>Get Direction From:<br><input type="hidden" id="start" value="' + address + '"><input type="text" id="end" value="" style="border: 1px solid #ECE6D5;">&nbsp;<input type="button" value="GO" onclick="calcRoute();" style="border: 1px solid #ECE6D5;padding-left:5px;">';
        GEvent.addListener(marker, 'click', function () {
            marker.openInfoWindowHtml(html);

            //jQuery(this).addtocal();
        });
        return marker;
    }

// To Make Sidebar Entry If need

 function createSidebarEntry(marker, name, address, distance, phone_new) {
        var div = document.createElement('div');
        var html = '<div class="locrow clearfix"><div class="left" style="width:240px;"><span class="count" id="loc_count">' + jQuery("#loc_count").val() + '</span><address><strong>' + name + '</strong>' + address + '</address><span class="mapdate"><span class="icon date"></span>'+ benObj.event_start_month_date +' &ndash; '+ benObj.event_end_month_date_year +'</span></div><div class="right" style="width:154px;"><ul><li><span class="icon phone"></span>' + phone_new + '</li><li><span class="icon time"></span>11 am &ndash; 7 pm</li><li><span class="icon car"></span>distance ' + distance.toFixed(1) + ' mi</li></ul></div></div>';

        div.innerHTML = html;
        div.style.cursor = 'pointer';
        div.style.marginBottom = '5px';
        GEvent.addDomListener(div, 'click', function () {
            GEvent.trigger(marker, 'click');
        });
        GEvent.addDomListener(div, 'mouseover', function () {
            div.style.backgroundColor = '#eee';
        });
        GEvent.addDomListener(div, 'mouseout', function () {
            div.style.backgroundColor = '#fff';
        });
        return div;
    }

// To make a Directions If need

function calcRoute() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var url = "http://maps.google.co.in/maps?f=d&source=s_d&saddr=" + start + "&daddr=" + end + "&aq=0&vpsrc=0&hl=en&doflg=ptm&mra=ls&ie=UTF8&t=m&z=5&layer=c&pw=2";
        var print_icon_url = '<a href="javascript:void(0);" class="print" onClick="window.open(\'' + url + '\');">Print</a><a href="#" class="link">Link</a>';

        var request = {
            origin: start,
            destination: end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function (response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                var myOptions = {
                    zoom: 7,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: new google.maps.LatLng(41.850033, -87.6500523)
                };
                map = new google.maps.Map(document.getElementById('map'), myOptions);
                directionsDisplay.setMap(map);
                directionsDisplay.setPanel(document.getElementById('directions-panel'));
                directionsDisplay.setDirections(response);
                jQuery('#print_icon').html(print_icon_url);
            }
        });
    }

</script> 
```

**步骤 #3：**为标记和信息窗口创建 XML

```
<?php
function mapMarker($center_lat,$center_lng,$radius)
    {
    $mysqli = $this->_getMySqlConnection();
    // Start XML file, create parent node
    $dom        =   new DOMDocument("1.0");
    $node       =   $dom->createElement("markers");
    $parnode    =   $dom->appendChild($node);

    // Search the rows in the markers table
    $query      =   sprintf("SELECT phone,street_address_1, store_name, lat, lng, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance FROM locations HAVING distance < '%s' ORDER BY distance LIMIT 0 , 10",
    $mysqli->real_escape_string($center_lat),
    $mysqli->real_escape_string($center_lng),
    $mysqli->real_escape_string($center_lat),
    $mysqli->real_escape_string($radius));

    $result = $mysqli->query($query);

    header("Content-type: text/xml");
    header('Access-Control-Allow-Origin: *');

    $avoid_duplicate="";
    // Iterate through the rows, adding XML nodes for each
        while ($row = @$result->fetch_assoc())
        {
            if($avoid_duplicate!=$row['store_name'])
            {
            $node = $dom->createElement("marker");
            $newnode = $parnode->appendChild($node);
            $newnode->setAttribute("name", $row['store_name']);
            $newnode->setAttribute("address", $row['street_address_1']);
            $newnode->setAttribute("lat", $row['lat']);
            $newnode->setAttribute("lng", $row['lng']);
            $newnode->setAttribute("distance", $row['distance']);
            $newnode->setAttribute("phonenumber", $row['phone']);
            $avoid_duplicate=$row['store_name'];
            }
        }

    $outXML=$dom->saveXML();
    $result->close();           
    $mysqli->close();
    return $outXML;
    }
?> 
```

**第 4 步：** HTML 部分

```
<div class="mapleft">
   <div class="ScrollPane scroll-pane" id="sidebar" style="overflow: auto; height: 430px;"></div>
   <div class="mapshadow"></div>
</div>
    <input type="hidden" id="addressInput" value="<?php echo $zip_code;?>" />
    <input type="hidden" id="radiusSelect" value="50" />
    <input type="hidden" id="addressInput_temp" value="<?php echo $zip_code;?>" />
    <input type="hidden" id="radiusSelect_temp" value="50" />
    <input type="hidden" name="X_REQUESTED_WITH" value="XMLHttpRequest" />
<div class="mapright">
<div id="map" style="width: 475px; height: 450px"></div>
</div>
<div class="map-dir" id="directions-panel" style="float:right;width:488px;"></div>
<input type="hidden" id="loc_count" value="1" /> 
```

这些都是会产生伟大成果的东西。我认为这可以帮助您解决问题。

# c++ - 接口定义中的方法声明

> ID：13858908
> 
> 赞同：0
> 
> 时间：2012-12-13T11:30:49.407
> 
> 标签：c++, com

```
[id(203), helpstring("method LoadPolyDataXml")] HRESULT LoadPolyDataXml([out,retval]CComBSTR bstrPolyData); 
```

我收到一个错误：

> 错误 1 ​​错误 MIDL2025：语法错误：期望“CComBSTR”附近的类型规范

怎么解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:10:52.937

请用 BSTR* 替换 CComBSTR。CComBSTR 不应在 idl 文件中使用

那么用法将是

```
CComBSTR data;
LoadPolyDataXml(&data) 
```

实施可能是

```
HRESULT LoadPolyDataXml(BSTR* pData);
{
  if (pData == 0) return E_POINTER;

  CComBSTR xml;
  // ... reading xml here
  *pData = xml.Detach()
  or 
  *pData = ::SysAllocString(string data here)

} 
```

不要忘记检查内存不足错误

# javascript - 使用 Node.js 的同步与异步代码

> ID：13858909
> 
> 赞同：14
> 
> 时间：2012-12-13T11:31:04.403
> 
> 标签：javascript, node.js

我们正在与 node 合作，主要是为了一个内部项目，并了解使用该技术的最佳方式。

不是来自特定的异步背景，学习曲线可能是一个挑战，但我们正在习惯框架并学习过程。

让我们两极分化的一件事是使用同步代码与异步代码的最佳时间是什么时候。我们目前使用的规则是，如果有任何东西与 IO 交互，那么它必须通过回调或事件发射器（这是给定的）异步的，但其他不以任何方式使用 IO 的项目可以构造为同步函数（这will 也取决于函数本身的重量以及它实际上是如何阻塞的）但这是使用 Node.js 时采用的最佳方法吗？

例如，我们正在创建一个 Hal+JSON 构建器，它当前存在于我们的代码库中。它是同步的，因为它所做的只是创建一些相当小的对象文字，仅此而已，没有外部依赖项，当然也没有 IO 交互。

我们的方法是好还是不好？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T11:51:47.657

假设您有两个同步执行的函数`foo`和`bar`：

```
function foo() {
    var returnValue = bar();
    console.log(returnValue);
}

function bar() {
    return "bar";
} 
```

为了使 API “异步”是改变它使用回调：

```
function foo() {
    bar(function(returnValue) {
        console.log(returnValue);
    });
}

function bar(callback) {
    callback("bar");
} 
```

但事实是，这段代码仍然是完全同步的。回调在同一个调用堆栈上执行，并且没有进行线程优化，没有可伸缩性优势。

然后它变成了代码可读性和编码风格的问题。我个人发现典型的`var val = func();`类型代码更具可读性和易于理解。唯一的缺点是，如果有一天你需要更改`bar`so 的功能，它需要执行一些 I/O 活动或调用其他异步函数，你也需要更改 API `bar`。

我**个人**的偏好：在适用时使用传统的同步模式。当涉及 I/O 或有疑问时，请始终使用异步样式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:00:26.880

使用 process.nextTick() 将同步函数转换为异步函数是一种选择，但仅当您的软件阻塞时间过长时才应使用该函数。每次同步函数运行时，节点都不能做任何其他事情，因为它是单线程的。这意味着如果您的应用程序是服务器，它将变得无响应。

在拆分任何同步函数之前，我建议先进行一些基准测试和分析，以便您做出明智的决定。否则你冒着过早优化的风险

请参阅此处进行良好的讨论[https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil](https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil)

这是您如何使您的函数异步的方法，从某种意义上说，您将允许节点做其他事情[http://howtonode.org/understanding-process-next-tick](http://howtonode.org/understanding-process-next-tick)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T11:54:57.207

我不知道什么是“Hal+Json builder”，但这就是我对 NodeJS 的看法。您应该尽可能异步地编写代码，将其推向极限。原因很简单，异步代码以性能换取响应性，这在大多数情况下更为重要。

当然，如果某些操作真的很快，那么就不需要异步代码。例如考虑以下代码：

```
var arr = []; // assume array is nonempty
for (var i = 0, l = arr.length; i < l; i++) {
    arr[ i ].doStuff( );
} 
```

如果`arr`很小并且`doStuff`是快速操作，那么您不应该以异步方式编写此代码。但是，如果需要一些时间，那么你应该考虑这样写：

```
var arr = []; // assume array is nonempty
var process_array_element = function( ) {
    if (arr.length) {
        arr.pop().doStuff( );
        process.nextTick( process_array_element );
    }
};
process_array_element( ); 
```

现在这段代码是真正异步的。它需要更多时间才能完成这项工作，但同时它不会阻塞整个服务器。我们用性能换取了响应能力。

**结论：**这取决于你的情况！:)

# parsing - KDevelop 4.3.1 不解析 Eigen 3

> ID：13858910
> 
> 赞同：5
> 
> 时间：2012-12-13T11:31:10.887
> 
> 标签：parsing, eigen, kdevelop

我在 ubuntu 12.04 上使用 KDevelop 4.3.1。它没有解析 Eigen 3 库，而这个[发行说明](http://kdevelop.org/kdevelop/kdevelop-431-released-improved-gcc-47-compliance)说它应该。

它比这更微妙一些。

`using namespace Eigen`在代码前放置 a 时，KDevelop 正在解析 Eigen 库的一部分。但是，它不会解析到类中（例如，`Matrix2d::Identity()`不会解析 Identity in）。

当使用嵌套命名空间时，它会解析命名空间，但仅此而已（例如 Matrix2d in`Eigen::Matrix2d`将不会被解析），除了称为`internal`(ie `Eigen::internal`) 的东西。

我只找到了与我的问题相似的这篇[文章](http://comments.gmane.org/gmane.comp.kde.users.kdevelop/5659)，尽管在 KDevelop 崩溃后问题得到了解决。有没有人有更可靠的解决方案？有没有人有同样的问题？

亲切的问候

PS：构建代码工作正常。

# bash - 通过 grep 管道尾输出两次

> ID：13858912
> 
> 赞同：32
> 
> 时间：2012-12-13T11:31:13.440
> 
> 标签：bash, shell, unix, grep, tail

使用典型的 Apache 访问日志，您可以运行：

```
tail -f access_log | grep "127.0.0.1" 
```

它只会向您显示指定 IP 地址的日志（在创建时）。

但是为什么当你`grep`第二次通过管道时它会失败，以进一步限制结果？

例如，“.css”的简单排除：

```
tail -f access_log | grep "127.0.0.1" | grep -v ".css" 
```

不会显示任何输出。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-13T11:37:42.430

我相信这里的问题是第一个 grep 正在缓冲输出，这意味着第二个 grep 在刷新缓冲区之前不会看到它。

尝试`--line-buffered`在您的第一个 grep 上添加该选项：

```
tail -f access_log | grep --line-buffered "127.0.0.1" | grep -v ".css" 
```

有关详细信息，请参阅[*“BashFAQ/009 - 什么是缓冲？或者，为什么我的命令行没有输出：`tail -f logfile | grep 'foo bar' | awk ...`”*](http://mywiki.wooledge.org/BashFAQ/009)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-13T11:40:06.927

这是缓冲的结果，当有足够的数据可用时，它最终会打印出来。

使用*Shawn Chin*`--line-buffered`建议的选项，或者如果可用，您可以获得相同的效果：*`stdbuf`*

 *```
tail -f access_log | stdbuf -oL grep "127.0.0.1" | grep -v ".css" 
```*

# java - Xuggler 读取某些 FLV 文件

> ID：13858921
> 
> 赞同：0
> 
> 时间：2012-12-13T11:31:46.877
> 
> 标签：java, audio, flv, aac, xuggler

我正在尝试使用 Xuggler 库在 Java 中对 FLV 文件进行转码，该库有两个流：
流 0：视频、H264 avc1
流 1：音频、AAC、mp4a

现在，`getNumStreams()`对输入容器的调用返回 2 个正确的流。
出现我的问题是因为两个流都有类型`CODEC_TYPE_UNKNOWN`而不是`CODEC_TYPE_VIDEO`/AUDIO。

因此我的代码在这里：
`stream.getStreamCoder().getCodecType().equals(ICodec.Type.CODEC_TYPE_AUDIO)`
从不真正匹配特定的流。

我试图手动为流 2 分配一个流，但是当我从 中查询编解码器时`IStreamCoder`，它为空。`CodecID`相同的`IStreamCoder`是正确`CODEC_ID_AAC`的，编解码器类型`CODEC_TYPE_UNKNOWN`正如我上面提到的。

现在我的问题是，为什么这些流被标记为未知而不是正确的音频/视频？这段代码完美地适用于大多数其他格式，例如 mp4 容器。我的总体目标是提取音频流进行转码。

请告知您是否需要一个示例代码段来更好地回答这个问题，因为我必须剪掉很多我必须制作的东西。

* * *

编辑：我认为这不是 Xuggler 问题，因为我尝试使用 VLC 转换有问题的 FLV，并且 VLC 在转换时崩溃，而我尝试将一个已知的工作 mp4 文件转换为 mp3 并且它通过了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:03:14.250

找到答案：
我使用以下方法打开文件，因为它阻塞了所有其他文件（mp4 等）并导致程序崩溃。

`if (input.open(file.getName(), IContainer.Type.READ, null, false, false) < 0)`

虽然这适用于所有其他文件，但它不会在整个文件中搜索 FLV 流信息。
我将其修改为：

`if (input.open(file.getName(), IContainer.Type.READ, null) < 0)`

现在它可以正常工作了。从现在开始应该只是处理flv文件的简单条件。

# php - Xampp 中的 Zend 框架

> ID：13858926
> 
> 赞同：1
> 
> 时间：2012-12-13T11:32:12.337
> 
> 标签：php, zend-framework, xampp

我最近下载了 ZendFramework(2.0.5) 的完整包版本（推荐）。并尝试安装在 xampp（版本 1.7.4）中，但我的 php 版本是 5.3.5。

我做了几乎所有据说做的事情——

1.找到php.ini并添加路径

```
include_path = ".;C:\xampp\php\Zend\library\zend\;C:\xampp\php\PEAR;" 
```

2.解压下载的 Zend Framework 文件夹并复制到你的 PHP 包含路径。

我也检查了文件夹（xampp，php，Zend）权限。我已经检查并重新检查了我的尝试多次，但该错误没有解决。

```
Exception thrown trying to access Zend/Loader.php using 'use_include_path' = true. Make sure you include Zend Framework in your include_path which currently contains: .;C:\xampp\php\Zend\library\zend\;C:\xampp\php\PEAR; 
```

我已经花了一整天的时间检查其他论坛，获得想法，但没有一个有效。请帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:47:09.497

1.  您的路径可能应该是`C:\xampp\zend\library\Zend`.

2.  您不应该将框架带到全局包含路径，而是将其作为项目中的依赖项，很快您将拥有两个具有两个不同版本 ZF 的项目，然后全局选项会产生麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:33:29.240

嗨，在做了所有可能的尝试之后，我的错误终于消失了。我不知道其他情况，但就我而言，我犯了一系列错误。所以当我纠正它们时，错误消失了。这就是我所做的

1.ZendFramework-2.0.5 中缺少loader.php，出现如下错误

```
Exception thrown trying to access Zend/Loader.php using 'use_include_path' = true. Make sure you include Zend Framework in your include_path which currently contains: .;C:\xampp\php\Zend\library\zend\;C:\xampp\php\PEAR; 
```

为此，我下载了 ZendFramework-1.12.0（仅在我的情况下）。并且 Loader.php 在那里

2.我没有两个错误是我从一半折断了路径。即如果我的文件夹结构类似于 ZendFramework-1.12.0/library/Zend/..我将半路径添加到 php.ini 文件

```
include_path = ".;C:\xampp\php\PEAR\;C:\xampp\php\Zend;" 
```

这是一个错误，所以我给出了库文件夹之前的路径

```
include_path = ".;C:\xampp\php\PEAR\;C:\xampp\php\Zend\library;" 
```

并根据路径放置文件夹。

3.我读到的环境变量呢？第一次安装 ZendFramework 时它们不是必需的。在它之后我不知道是否应该添加环境变量

```
C:\xampp\php 
```

因此，在完成上述更正并通过安装检查器检查后，错误消失了。

并且记住在 php.ini 文件中进行微小更改后重新启动（启动和停止）apache 服务器。非常感谢 markus-tharkun 和 Seth Battin。你救了我。

# python - Google API 客户端机密错误 (Python)

> ID：13858927
> 
> 赞同：4
> 
> 时间：2012-12-13T11:32:18.520
> 
> 标签：python, google-app-engine, google-api-python-client

我想从谷歌分析中检索数据。我已经在控制台中创建了一个服务帐户，并且我正在使用 Google 的 Python ( `hello_analytics_api_v3.py`) 代码来访问数据。

我已将其复制`client_secrets.json`到我的文件夹中，但出现此错误：

```
*SystemExit: 
WARNING: Please configure OAuth 2.0
To make this sample run you will need to populate the client_secrets.json file
found at:* 
```

我应该怎么办？我正在使用 Python 2.7。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T16:05:35.350

Ensure the terminal is pointing to the same path directory as your `client_secrets.json` file.

i.e. type `pwd` in the console you're using to call the script and the output should match the directory of where `client_secrets.json` is stored.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-17T04:19:25.187

我遇到了这个确切的问题，并删除了我的项目的凭据，并使用“OAuth 客户端 ID”选项创建了新的凭据。按照此页面的第一步操作 closley [https://developers.google.com/analytics/devguides/config/mgmt/v3/quickstart/installed-py](https://developers.google.com/analytics/devguides/config/mgmt/v3/quickstart/installed-py)

我还在google The Lines提供的示例代码中发现了一个语法错误：

```
print 'View (Profile): %s' % results.get('profileInfo').get('profileName')
print 'Total Sessions: %s' % results.get('rows')[0][0] 
```

应该读：

```
print ('View (Profile): %s' % (results.get('profileInfo').get('profileName')))
print ('Total Sessions: %s' % (results.get('rows')[0][0])) 
```

至少这为我解决了。此外，请确保 client_secrets.json 与您的 python 脚本位于同一目录中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-23T21:28:35.853

在[https://developers.google.com/youtube/v3/guides/uploading_a_video](https://developers.google.com/youtube/v3/guides/uploading_a_video)的示例代码中，调用作为相对路径`flow_from_clientsecrets()`传递。`CLIENT_SECRETS_FILE`

要修复它，请强制`CLIENT_SECRETS_FILE`参数为绝对路径：

```
def get_authenticated_service(args):
  flow = flow_from_clientsecrets(
    os.path.abspath(os.path.join( 
      os.path.dirname(__file__),CLIENT_SECRETS_FILE)),
    scope=YOUTUBE_UPLOAD_SCOPE,
    message=MISSING_CLIENT_SECRETS_MESSAGE) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-20T14:37:21.843

我收到此错误是因为我在 client_id 和 client_secret 中仍然有方括号。它应该只是没有括号的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-15T11:31:03.193

如果您使用的是 Windows 系统，请按照以下步骤操作：

1.  将您的文件 ( `client_secrets.json`) 放在目录 (C:) 或 (D:) 中。
2.  在你的 Python 文件中定义你的变量，如下所示 `CLIENT_SECRETS_FILE = "\client_secrets.json"`：Python 将在根 C: 或 D: 中搜索 json 文件并找到它。

我对 youtube 的 Google API 有同样的问题，我就这样解决了。

# java - java中ServletException的目的是什么以及何时抛出？

> ID：13858929
> 
> 赞同：1
> 
> 时间：2012-12-13T11:32:19.833
> 
> 标签：java, servlets

我无法从java API文档中找到ServletException的目的，虽然我们编写的覆盖服务方法会抛出ServletException，但是什么时候会抛出这个检查异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:35:57.933

```
 If there is any error with status code either 404 ( Not Found) or 403 ( Forbidden ) then the ServletException may be thrown 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:41:54.950

您收到此异常可能有多种原因。我记得我个人面临的一个问题是，由于没有足够的服务器内存，服务器无法分配/加载 servlet 实例。在堆栈 strace 中，它显示为“分配 servlet 实例时出错”。

# ruby-on-rails - Rails 应用程序控制器中的“protect_from_forgery”

> ID：13858932
> 
> 赞同：19
> 
> 时间：2012-12-13T11:32:39.467
> 
> 标签：ruby-on-rails, applicationcontroller

在`config/application_controller.rb`我的 Rails 应用程序目录中的文件中，我找到了以下代码：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
end 
```

谁能告诉我它是什么`project_from_forgery`意思以及为什么被使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T11:36:52.727

它可以防止csrf。例如，所有 POST 请求都应该有特定的安全令牌。

[http://en.wikipedia.org/wiki/Cross-site_request_forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

[http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:36:19.887

这是 Rails 内置的功能，可防止 csrf 攻击，

从此链接了解更多信息，

[http://railskey.wordpress.com/2012/07/02/rails-protect_from_forgery/](http://railskey.wordpress.com/2012/07/02/rails-protect_from_forgery/)

通过将身份验证令牌添加到表单字段作为隐藏字段来防止跨站点脚本攻击。在发布请求时，该令牌与存储在数据库中的令牌匹配。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-17T10:46:54.310

**`protect_from_forgery`**：Rails 中的一项功能，可防止跨站点请求伪造 (CSRF) 攻击。

此功能使所有生成的表单都有一个隐藏`id`字段。该`id`字段必须与存储`id`的匹配，否则不接受表单提交。

这可以防止其他站点上的恶意表单或插入 XSS 的表单提交到 Rails 应用程序。

# drupal - Drupal - 用户管理 - 不同级别

> ID：13858934
> 
> 赞同：0
> 
> 时间：2012-12-13T11:32:41.667
> 
> 标签：drupal, drupal-7, drupal-modules

我们正在使用drupal进行网站建设。我们有 3 个不同的用户配置文件/角色。

1.  站点管理员（管理客户端管理员和内容）
2.  客户管理员（管理部门管理员）
3.  部门管理员（管理自己的内容）

项目流程：站点管理员，将管理客户管理员。而客户管理员，将管理部门管理员。

由于我们是 drupal 的初学者，想知道哪个模块适合上述用户管理。

尝试添加以下模块和权限，但无法达到预期的效果

1.  按角色管理用户

2.  简介2

3.  角色委派

4.  角色分配

请告诉我们，如何实现这一点以及要安装的模块以查看预期结果。

预先感谢，

问候

斯里尼瓦桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:21:07.723

您可能想尝试有[机组模块](http://drupal.org/project/og)

# cakephp - CakePHP Shell 从计划任务和 Windows 2003 Server “无法启动”

> ID：13858935
> 
> 赞同：0
> 
> 时间：2012-12-13T11:32:55.137
> 
> 标签：cakephp, scheduled-tasks, cakephp-2.2, windows-2003-webserver, cakephp-2.3

我正在尝试通过 Windows 2003 服务器的计划任务运行 CakePHP Shell 脚本，但我发现该任务*无法启动*。

当我从命令提示符手动运行它时，它运行良好：

```
C:\Inetpub\wwwroot\CakePHP\lib\Cake\Console\cake mail read 
```

Scheduled task Run 字段完全相同，*Start in*设置为：

```
C:\Inetpub\wwwroot\tickets\app 
```

*运行方式*字段设置为具有所有权限的计算机管理员（不是 ISS 用户）

计划任务日志在尝试执行时显示此消息：

> “Ticket Mail System.job”（蛋糕）13/12/2012 07:15:00 ** 错误 **
> 
> 无法启动任务。
> 
> 具体错误是：
> 
> 0x80070005：访问被拒绝。

看来是权限问题。

我试图为两个用户（ *IIS 6*用户和*Internet 访客帐户*`lib/Cake/Consol/cake.bat`用户）授予文件所有权限，但仍然无法正常工作。

 **任何想法可能是原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:07:10.330

它在 Windows 7 上运行良好，但在 Window 2003 Server 上却没有。

最后，我尝试`.bat`在调用 Shell 后添加它并且它可以工作。

我不得不把它放在*运行*字段中：

```
C:\Inetpub\wwwroot\CakePHP\lib\Cake\Console\cake.bat mail read 
```

看来Windows 2003`.bat`最后需要...

我在以下位置找到它：[http ://www.geekyboy.com/archives/376](http://www.geekyboy.com/archives/376)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:07:29.463

谢谢大家，这解决了我的问题。

发现我的“.bat”文件的扩展名为“.CMD”，到目前为止它似乎工作正常。

通过重命名文件扩展名并更改任务调度程序中的目录来修复它。（因为它仍然具有“.CMD”扩展名。**

# javascript - 在 jqgrid 中显示序列号

> ID：13858943
> 
> 赞同：0
> 
> 时间：2012-12-13T11:33:37.237
> 
> 标签：javascript, jquery, jqgrid

我想将序列号显示为[jqgrid](http://jqgrid.com/)中的第一列。因为数据库记录没有连续的“id”，我不能使用它。
有什么简单的方法可以做到这一点吗？

**更新**：示例代码：

```
$(document).ready(function()
  {    
    $("#list").jqGrid(
    {
      url:'<%=Url.class_variable_get(:@@baseurl) %>/address_books/show.json',
      datatype:'json',
      mtype:'get',
      colNames:['Id','Name','Email Id','Number'],
      colModel:[
        {name:'address_book_id',index:'address_book_id',sorttype:'int',sortable:true,width:100},
        {name:'name',index:'name',sortable:true,width:300},
        {name:'email',index:'email',sortable:true,width:265},
        {name:'number',index:'number',sorttype:'int',sortable:true,width:300},
      ],
      pager:$('#pager'),
      emptyrecords: "No Records to display",     
      pginput:true,
      pgbuttons:true,
      rowNum:10,
      rowList:[5,10,20,30],
      viewrecords:true,
      sortorder: "desc",
      //multiselect:true,
      loadonce:true,
      gridview:false,
      sortname:'name',
      caption: " Contacts List",
      jsonReader: {
        repeatitems : false,
        cell:"",
        id: "0"
      },
      height: 80
    });

    $("#list").jqGrid('navGrid','#pager',{edit:false,add:false,del:false,search:true},{multipleSearch:true});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:03:25.513

此问题/答案应包含有关如何根据重新定义的表数据重新绘制 jqgrid 的信息：[jqGrid add new column](https://stackoverflow.com/questions/4232038/jqgrid-add-new-column)

关于添加 a 您可以为每条记录添加时间戳，甚至是计数器的值；就像是：

```
var recordsSet = [];
$.each(databaseRecords, function(i, record) {
    record.idx = Date.now();
    record._id = i;
    recordSet.push(record);
});

/* code to populate or redraw using update recordSet array jqgrid here */ 
```

然后，您应该能够在调用 jqgrid 时将 _id 字段或 idx 字段（仅示例属性名称）分配给列模型的索引属性。

# javascript - 如何对模型和控制器进行异步调用并在视图中获取其值？

> ID：13858950
> 
> 赞同：0
> 
> 时间：2012-12-13T11:34:21.730
> 
> 标签：javascript, ruby-on-rails, ruby, ajax, backbone.js

我正在尝试在 Ruby On Rails 和 Backbone.js 中进行即时搜索，例如应用程序。

我已将所有单词存储在一个名为`Dictionary`. 它包含所有单词的列表。现在，我想做一个搜索栏，如果我输入 "c" ，我想列出所有以 "c" 开头的单词，类似地，如果我输入 "ca" ，它应该列出所有以 "ca" 开头的单词。

是否有开源应用程序，我可以从中学习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:23:31.033

我没有测试过这段代码。可能有错别字，但我认为它会起作用。请评论，如果它不起作用，我可以编辑

看法

```
<%= text_field_tag 'search', :nil, :class => "search_box" %>
 <ul class="results">
    <span class="spinning" style="display:none;"></span>
 </ul> 
```

jQuery

```
$(".search_box").keyup(function(){
    $.get ("/search/" + this.value)
    $(".spinning").show()
)} 
```

路线.rb

```
get "/search/:search" => "dictionaries#search", :as => :search 
```

字典控制器.rb

```
def search
 @dictionarys = Dictionary.where("word LIKE ?", params[:search])
end 
```

意见/字典/search.js.erb

```
$(".results").empty().append("<%= j( render @dictionaries) %>"
$(".spinning").hide() 
```

意见/字典/_dictionary.html.erb 部分

```
<li><%=dictionary.word%></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:41:50.797

使用 jQuery `auto_complete`，并将 AJAX 调用与它连接以从数据库中获取值。请参阅[jQuery 自动完成文档](http://jqueryui.com/autocomplete/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:08:33.713

你可以这样做。

在 GUI 中的 Onclick() 中，对 ruby​​ 服务器进行 ajax 调用，输入的数据作为键。

在 ruby​​ 端使用类变量只加载一次字典数据，这样您就不需要每次都进行 db fetch 。

现在在 ruby​​ 端进行正则表达式匹配，并将数据发送到 GUI，此 ajax 调用的 onsuccess() 相应地加载 GUI 小部件。

希望我足够清楚。

# javascript - 滚动在错误的时间调用 ajax

> ID：13858953
> 
> 赞同：0
> 
> 时间：2012-12-13T11:34:28.790
> 
> 标签：javascript, ajax, jquery, scrolltop

当用户滚动到底部时，我正在尝试使用以下函数加载 ajax 调用。但是，由于某种原因，该函数仅在用户向下滚动然后返回顶部时触发 ajax 调用。这是我的代码：

```
$(window).scroll(function()
{   
if($(window).scrollTop() == $(document).height() - $(window).height())
{
    $('div#loadmoreajaxloader').show();
    $.ajax({
    url: "loadmore.php",
    success: function(html)
    {
        if(html)
        {
            var el = jQuery(html);
            jQuery(".content").append(el).masonry( 'appended', el, true );
            $('div#loadmoreajaxloader').hide();
        }else
        {
            $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
        }
    }
    });
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:39:27.737

```
 $(window).scroll(function()
    {
        if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight)  {
           //do your stuff here

        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:09:52.257

像这样检查它：

```
 fetchContent = function() {
    if ($(window).scrollTop() + $(window).height() >= $(document).height()) {
        console.log('At bottom!!');

        // Remove the handler temporarily, so no more scroll events will fire.
        $(window).off('scroll', fetchContent);

        // Make the AJAX call.
        $('div#loadmoreajaxloader').show();
        $.ajax({
              url: "loadmore.php",
              success: function(html)
              {
                 if(html)
                 {
                     var el = jQuery(html);
                     jQuery(".content").append(el).masonry( 'appended', el, true );
                     $('div#loadmoreajaxloader').hide();
                 }else
                 {
                     $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
                 }
                 // Re-attach the handler, so scroll events will fire again
                 $(window).on('scroll', fetchContent);
              }
             });
     }
  };

  $(function() {
      $(window).on('scroll', fetchContent);
  }); 
```

编辑：

我已经完成了一个 JSBin，当用户滚动到底部时它会显示一个 div。你可以在这里看到它：http: [//jsbin.com/axobow/2](http://jsbin.com/axobow/2)

我知道这不完全是你需要的，但它应该给你一个想法。Iv'e 还稍微更新了代码，以符合您作为最终产品应该拥有的内容。

请检查。

# regex - 使用正则表达式获取 URL

> ID：13858954
> 
> 赞同：0
> 
> 时间：2012-12-13T11:34:28.367
> 
> 标签：regex, windows-phone-7, c#-4.0

我正在尝试从中提取 URL

```
<description>
<![CDATA[
<img src="http://www.jawharafm.net/Galerie/admin/?public&action=photo_large&key=RuQhuDKGNA52" alt="" />
]]>
</description> 
```

我使用了这段代码：

```
photo = Regex.Matches(res.Element("description").Value, "http://.*.()")[0].Value; 
```

但这会返回从 ps 开始的所有数据，`http`因为`alt=""`我有一个完整的描述文件，所以我不能只用`52`或整个键结束它，因为它是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:44:03.377

`https?://[^"]*`应该做的伎俩。（C# 的字符串文字是`@"https?://[^""]*"`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:45:33.707

这种模式将使这项工作：

```
(?<=src=")([^"]*)(?=") 
```

正如@davidrac 所说，字符串litteral 使用双引号：

```
@"(?<=src="")([^""]*)(?="")" 
```

# vtiger - vTiger - 如何在另一个模块中使用模块字段

> ID：13858958
> 
> 赞同：2
> 
> 时间：2012-12-13T11:34:31.690
> 
> 标签：vtiger

我是vtiger的新手。我正在尝试在 TroubleTicket 模块的服务模块中插入字段“服务名称”，但到目前为止我还无法做到。
一般来说，是否可以在另一个模块的模块中插入字段？如果是这样，它应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T08:40:23.227

您可以使用此代码，将其放在您的 vTiger 根目录下并从浏览器中调用它。

```
<?php
$Vtiger_Utils_Log = true;

include_once('vtlib/Vtiger/Menu.php');
include_once('vtlib/Vtiger/Module.php');

$module = Vtiger_Module::getInstance('HelpDesk');
if($module) {
$blockInstance = Vtiger_Block::getInstance('LBL_TICKET_INFORMATION', $module);

    if($blockInstance) {

    $fieldInstance = Vtiger_Field::getInstance('Service1', $module);

       if(!$fieldInstance) {
           $fieldInstance = new Vtiger_Field();
           $fieldInstance->name = 'Service1';
           $fieldInstance->label = 'Service Name';
           $fieldInstance->uitype = 10;
           $fieldInstance->typeofdata = 'V~O';
           $blockInstance->addField($fieldInstance);

           $fieldInstance->setRelatedModules(Array('Services'));
       }
  }
}
?> 
```

# sql - 查找每日明智的每月总销售额的总计

> ID：13858960
> 
> 赞同：1
> 
> 时间：2012-12-13T11:34:37.870
> 
> 标签：sql, sql-server, tsql, pivot

在行我有几个月。在列中，我有 1 到 31 天。我想在一个月的 31 天的所有销售总和的末尾添加一列。

```
SELECT * FROM (
    SELECT DATENAME(month, date) AS SaleMonth,
        DATEPART(dd,date) AS SaleDay FROM EnquiryMaster
    ) p PIVOT 
    (COUNT (SaleDay) FOR 
    SaleDay IN ( [1],[2],[3],[4],[5],[6],[7],[8],[9],[10],
                [11],[12],[13],[14],[15],[16],[17],[18],[19],[20],
                [21],[22],[23],[24],[25],[26],[27],[28],[29],[30],[31] )) AS pvt 
```

此代码显示 31 天的逐日数据，但不显示总和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:50:11.763

如果您希望将此列作为按月显示总数的列，不幸的是没有简单的方法。你可以使用这样的东西：

```
SELECT SaleMonth,
   [1],[2],[3],[4],[5],[6],[7],[8],[9],[10],
                [11],[12],[13],[14],[15],[16],[17],[18],[19],[20],
                [21],[22],[23],[24],[25],[26],[27],[28],[29],[30],[31],

   ([1]+[2]+[3]+[4]+[5]+[6]+[7]+[8]+[9]+[10]+
                [11]+[12]+[13]+[14]+[15]+[16]+[17]+[18]+[19]+[20]+
                [21]+[22]+[23]+[24]+[25]+[26]+[27]+[28]+[29]+[30]+[31]) TotalMonth
FROM 
(
  SELECT DATENAME(month, date) AS SaleMonth,
    DATEPART(dd,date) AS SaleDay 
  FROM EnquiryMaster
) p 
PIVOT 
(
  COUNT (SaleDay) 
  FOR SaleDay IN ( [1],[2],[3],[4],[5],[6],[7],[8],[9],[10],
                [11],[12],[13],[14],[15],[16],[17],[18],[19],[20],
                [21],[22],[23],[24],[25],[26],[27],[28],[29],[30],[31] )
) AS pvt 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0e254/13)

这可能是动态 sql 更容易实现数据透视的情况。通过使用动态 SQL，您不必对值进行硬编码。

如果您要使用动态 sql，您的查询将类似于：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsTotal AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(DATEPART(dd,date)) 
                    from EnquiryMaster
                    group by DATEPART(dd,date)
                    order by DATEPART(dd,date)
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsTotal = STUFF((SELECT distinct '+' + QUOTENAME(DATEPART(dd,date)) 
                    from EnquiryMaster
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT SaleMonth,' + @cols + ', '+ @colsTotal+' as GrandTotal from 
             (
                SELECT DATENAME(month, date) AS SaleMonth,
                  DATEPART(dd,date) AS SaleDay 
                FROM EnquiryMaster
            ) x
            pivot 
            (
                count(SaleDay)
                for SaleDay in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0e254/12)

或者另一个建议，我可能会将您的列标题替换为`Month`，然后您可以`GROUP BY with ROLLUP`在每个月实施 a 以获得总计行。

因此，您的新结果集将如下所示：

```
Day   | Jan | Feb | Mar | Apr | May | Jun | Jul | Aug | Sep | Oct | Nov | Dec
-------------------------------------------------------------------------------
1     |  12 | 34  | 5   |  3  | 3   |  2  | 32  |  0  | 9   | 87  | 23  | 54
Total |   .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:39:58.533

尝试 BETWEEN 条件

```
SELECT * FROM (SELECT DATENAME(month, date) AS SaleMonth,DATEPART(dd,date) AS SaleDay FROM EnquiryMaster) p PIVOT (COUNT (SaleDay) FOR SaleDay BETWEEN 1 and 31) AS pvt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:02:05.523

尝试在您的子选择中再添加一列：

```
SELECT * FROM (
    SELECT DATENAME(month, date) AS SaleMonth,
        DATEPART(dd,date) AS SaleDay**,
        COUNT(*) OVER (PARTITION BY DATENAME(month, date)) AS MonthlyTotal**
        FROM EnquiryMaster
    ) p PIVOT 
    (COUNT (SaleDay) FOR 
    SaleDay IN ( [1],[2],[3],[4],[5],[6],[7],[8],[9],[10],
                [11],[12],[13],[14],[15],[16],[17],[18],[19],[20],
                [21],[22],[23],[24],[25],[26],[27],[28],[29],[30],[31] )) AS pvt 
```

# yii - 解决 YII 注销问题？

> ID：13858961
> 
> 赞同：0
> 
> 时间：2012-12-13T11:34:37.330
> 
> 标签：yii

我在登录时选中了“记住我”复选框，并签入了执行此操作的代码：

```
if($this->_identity->errorCode===UserIdentity::ERROR_NONE) {
  $duration= 3600*24*30; // 30 days
  Yii::app()->user->login($this->_identity,$duration);
  return true;
} 
```

所以我正在设置这个。但是，如果我离开浏览器并返回，我将退出。关于我可以看到的任何想法可能会导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:30:08.940

您需要在 config/main.php 文件中设置 allowAutoLogin 以允许基于 cookie 的登录

```
 'components' => array(
        'user'=>array(
            // enable cookie-based authentication
            'allowAutoLogin'=>true,
            ...
        ),
    ... 
```

# sharepoint-2010 - 获取 Sharepoint 2010 中的所有术语库（Web 服务或客户端对象模型）？

> ID：13858962
> 
> 赞同：0
> 
> 时间：2012-12-13T11:34:38.477
> 
> 标签：sharepoint-2010, client-side

Sharepoint 2010（不是 2013！）是否可以使用 Web 服务或客户端对象模型获取站点上所有术语库的列表？我知道 2013 已经为它添加了一个库，但这对我 2010 没有帮助。

如果不是整个列表，如果我知道一个术语（可能在也可能不在 TaxonomyHiddenList 中），我如何获得术语商店 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:10:43.003

有人提到检查 TaxonomyFieldType 字段，所以我将这两种方法组合在一起。我不知道这些是否适用于所有情况。

第一个函数只返回存储在我们遇到的第一个 TaxonomyFieldType* 信息中的术语库 ID。

```
public static string GetDefaultTermStore(string site) {
    var context = new ClientContext(site);
    var fields = context.Web.Fields;
    context.Load(fields, fs => fs.Include(f => f.SchemaXml, f => f.TypeAsString));
    context.ExecuteQuery();
    foreach (var field in fields) {
        if (field.TypeAsString.StartsWith("TaxonomyFieldType")) {
            var doc = XDocument.Parse(field.SchemaXml);
            var node = doc.XPathSelectElement("//Name[text()='SspId']/../Value");
            if (node != null && !string.IsNullOrEmpty(node.Value)) {
                return node.Value;
            }
        }
    }
    throw new Exception("Term Store ID not found!");
} 
```

第二个函数遍历所有字段并获取所有可能的术语库 ID 并将它们返回到一个列表中。

```
public static List<string> GetTermStores(string site) {
    var context = new ClientContext(site);
    var fields = context.Web.Fields;
    context.Load(fields, fs => fs.Include(f => f.SchemaXml, f => f.TypeAsString));
    context.ExecuteQuery();
    var hashlist = new HashSet<string>(StringComparer.InvariantCultureIgnoreCase);
    foreach (var field in fields) {
        if (field.TypeAsString.StartsWith("TaxonomyFieldType")) {
            var doc = XDocument.Parse(field.SchemaXml);
            var node = doc.XPathSelectElement("//Name[text()='SspId']/../Value");
            if (node != null && !string.IsNullOrEmpty(node.Value)) {
                if (!hashlist.Contains(node.Value)) {
                    hashlist.Add(node.Value);
                }
            }
        }
    }
    if (hashlist.Count == 0) throw new Exception("No Term Store IDs not found!");
    return hashlist.ToList();
} 
```

这是对我的问题的正确答案吗？有人有更确定的方法来获取 ID 吗？

似乎没有其他人对这个问题有很好的答案。我已经添加了我在下面创建的实用程序类。下面的大块未注释代码供可能需要的人使用：

```
using Microsoft.SharePoint.Client;
using System;
using System.Collections.Generic;
using System.Configuration;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Web.Services.Protocols;
using System.Windows.Forms;
using System.Xml.Linq;
using System.Xml.XPath;

namespace VitaminTilKanbanPusher.Sharepoint {
    public class SharepointTaxonomyAgent {

        //URLS:
        //http://www.novolocus.com/2012/02/06/working-with-the-taxonomyclientservice-part-1-what-fields-are-there/
        //

        public static void Test() {

            var site = ConfigurationManager.AppSettings["VitaminSite"];
            //var list = ConfigurationManager.AppSettings["VitaminList"];
            //var id = GetDefaultTermStore(site);
            //var ids = GetTermStores(site);
            var rs = GetAllTermSetNames(site);
            var ts = GetTermSetTerms(site, "Some Name");
            //var ts = GetTermSetTerms(site, "Some other name");

            //var term = GetTermInfo(site, "Priority");
            //var term2 = GetTermInfo(site, "My term");
            //var termset = GetTermSetInfo(site, "My term");
            //var termsets = GetTermSets(site, "My term");

        }

        public static string GetDefaultTermStore(string site) {
            var context = new ClientContext(site);
            context.ExecutingWebRequest += ctx_MixedAuthRequest;
            var fields = context.Web.Fields;
            context.Load(fields, fs => fs.Include(f => f.InternalName, f => f.SchemaXml, f => f.TypeAsString));
            context.ExecuteQuery();

            foreach (var field in fields) {
                //field.InternalName== "TaxKeyword" -> possibly default?
                if (field.TypeAsString.StartsWith("TaxonomyFieldType")) {
                    var doc = XDocument.Parse(field.SchemaXml);
                    var node = doc.XPathSelectElement("//Name[text()='SspId']/../Value");
                    if (node != null && !string.IsNullOrEmpty(node.Value)) {
                        return node.Value;
                    }
                }
            }
            throw new Exception("Term Store ID not found!");
        }

        public static List<string> GetTermStores(string site) {
            var context = new ClientContext(site);
            context.ExecutingWebRequest += ctx_MixedAuthRequest;
            var fields = context.Web.Fields;
            context.Load(fields, fs => fs.Include(f => f.SchemaXml, f => f.TypeAsString));
            context.ExecuteQuery();

            var hashlist = new HashSet<string>(StringComparer.InvariantCultureIgnoreCase);
            foreach (var field in fields) {
                if (field.TypeAsString.StartsWith("TaxonomyFieldType")) {
                    var doc = XDocument.Parse(field.SchemaXml);
                    var node = doc.XPathSelectElement("//Name[text()='SspId']/../Value");
                    if (node != null && !string.IsNullOrEmpty(node.Value)) {
                        if (!hashlist.Contains(node.Value)) {
                            hashlist.Add(node.Value);
                        }
                    }
                }
            }
            if (hashlist.Count == 0) throw new Exception("No Term Store IDs not found!");
            return hashlist.ToList();
        }

        private static List<TermSet> _termSets;
        public static List<TermSet> GetAllTermSetNames(string site, string onlySpecificTermSetName = null) {
            if (_termSets != null) {
                if (onlySpecificTermSetName == null) return _termSets;
                foreach (var ts in _termSets) {
                    if (ts.Name.Equals(onlySpecificTermSetName, StringComparison.InvariantCultureIgnoreCase)) {
                        return new List<TermSet>() { ts };
                    }
                }
                return new List<TermSet>();
            }

            var context = new ClientContext(site);
            context.ExecutingWebRequest += ctx_MixedAuthRequest;
            var fields = context.Web.Fields;
            context.Load(fields, fs => fs.Include(f => f.SchemaXml, f => f.TypeAsString));
            context.ExecuteQuery();

            var hashlist = new HashSet<string>(StringComparer.InvariantCultureIgnoreCase);
            var termSets = new List<TermSet>();

            TermSet theChosenTermSet = null;

            foreach (var field in fields) {
                if (field.TypeAsString.StartsWith("TaxonomyFieldType")) {
                    var ts = new TermSet();
                    var doc = XDocument.Parse(field.SchemaXml);

                    var fn = doc.Element("Field");
                    if (fn == null) continue;

                    if (fn.Attribute("DisplayName") == null) continue;
                    if (fn.Attribute("ID") == null) continue;

                    ts.Name = fn.Attribute("DisplayName").Value;

                    //Only 1 set?
                    if (onlySpecificTermSetName != null) {
                        if (!ts.Name.Equals(onlySpecificTermSetName, StringComparison.InvariantCultureIgnoreCase)) {
                            theChosenTermSet = ts;
                        }
                    }

                    if (fn.Attribute("Description") != null) {
                        ts.Description = fn.Attribute("Description").Value;
                    }

                    var node = doc.XPathSelectElement("//Name[text()='SspId']/../Value");
                    if (node != null && !string.IsNullOrEmpty(node.Value)) {
                        ts.TermStoreId = node.Value;
                    }

                    var node2 = doc.XPathSelectElement("//Name[text()='TermSetId']/../Value");
                    if (node2 != null && !string.IsNullOrEmpty(node2.Value)) {
                        ts.Id = node2.Value;
                    }
                    else {
                        continue; //No ID found
                    }

                    //Unique hites
                    if (!hashlist.Contains(ts.Id)) {
                        hashlist.Add(ts.Id);
                        termSets.Add(ts);
                    }
                }
            }
            _termSets = termSets;

            if (onlySpecificTermSetName != null) return (theChosenTermSet == null ? new List<TermSet>() : new List<TermSet>() { theChosenTermSet });

            return termSets;
        }

        public static TermSet GetTermSetTerms(string site, string termName) {
            var ts = GetAllTermSetNames(site, termName);
            if (ts.Count == 0) throw new Exception("Could not find termset: " + termName);
            var theTermSet = ts[0];

            var proxy = new SharepointTaxWS.Taxonomywebservice();
            proxy.UseDefaultCredentials = true;
            proxy.PreAuthenticate = true;
            proxy.Url = Path.Combine(site, "_vti_bin/taxonomyclientservice.asmx");
            GetAuthCookie(proxy, site);

            var lciden = 1033; //var lcidno = 1044; // System.Globalization.CultureInfo.CurrentCulture.LCID

            var clientTime = DateTime.Now.AddYears(-2).ToUniversalTime().Ticks.ToString();
            var termStoreId = new Guid(theTermSet.TermStoreId);// Guid.Parse(theTermSet.TermStoreId);
            var termSetId = new Guid(theTermSet.Id);

            string clientTimestamps = string.Format("<timeStamp>{0}</timeStamp>", clientTime);
            string clientVersion = "<version>1</version>";
            string termStoreIds = string.Format("<termStoreId>{0}</termStoreId>", termStoreId.ToString("D"));
            string termSetIds = string.Format("<termSetId>{0}</termSetId>", termSetId.ToString("D"));
            string serverTermSetTimestampXml;
            string result = proxy.GetTermSets(termStoreIds, termSetIds, 1033, clientTimestamps, clientVersion, out serverTermSetTimestampXml);

            var term = ParseTermSetInfo(result);
            term.Description = theTermSet.Description;
            term.Id = theTermSet.Id;
            term.Name = theTermSet.Name;
            return term;
        }

        //public static Term GetTermSetInfo(string site, string termName) {

        //    var proxy = new SharepointTaxWS.Taxonomywebservice();
        //    proxy.UseDefaultCredentials = true;
        //    proxy.PreAuthenticate = true;
        //    proxy.Url = Path.Combine(site, "_vti_bin/taxonomyclientservice.asmx");

        //    GetAuthCookie(proxy, site);

        //    var lciden = 1033; //var lcidno = 1044; // System.Globalization.CultureInfo.CurrentCulture.LCID

        //    var sets = proxy.GetChildTermsInTermSet(Guid.Parse(""), lciden, Guid.Parse("termsetguid"));

        //    var term = ParseTermInfo(sets);

        //    return term;
        //}

        public static Term GetTermInfo(string site, string termName) {

            var proxy = new SharepointTaxWS.Taxonomywebservice();
            proxy.UseDefaultCredentials = true;
            proxy.PreAuthenticate = true;
            proxy.Url = Path.Combine(site, "_vti_bin/taxonomyclientservice.asmx");

            GetAuthCookie(proxy, site);

            var lciden = 1033; //var lcidno = 1044; // System.Globalization.CultureInfo.CurrentCulture.LCID

            var sets = proxy.GetTermsByLabel(termName, lciden, SharepointTaxWS.StringMatchOption.StartsWith, 100, null, false);

            var term = ParseTermInfo(sets);

            return term;
        }

        private static TermSet ParseTermSetInfo(string xml) {
            //Not done
            var info = XDocument.Parse(xml);
            var ts = new TermSet();
            ts.Terms = new List<Term>();

            var n1 = info.XPathSelectElements("//T");
            if (n1 != null) {
                foreach (var item in n1) {
                    var t = new Term();
                    t.Id = item.Attribute("a9").Value;
                    t.Name = item.XPathSelectElement("LS/TL").Attribute("a32").Value;
                    t.TermSet = ts;
                    ts.Terms.Add(t);
                }

            }
            return ts;
        }

        private static Term ParseTermInfo(string xml) {

            var info = XDocument.Parse(xml);
            var t = new Term();
            var ts = new TermSet();

            var n1 = info.XPathSelectElement("TermStore/T");
            var n2 = info.XPathSelectElement("TermStore/T/LS/TL");
            var n3 = info.XPathSelectElement("TermStore/T/TMS/TM");

            if (n1 != null && n1.Attribute("a9") != null) {
                t.Id = n1.Attribute("a9").Value;
            }
            if (n2 != null && n2.Attribute("a32") != null) {
                t.Name = n2.Attribute("a32").Value;
            }
            if (n3 != null && n3.Attribute("a24") != null) {
                ts.Id = n3.Attribute("a24").Value;
            }
            if (n3 != null && n3.Attribute("a12") != null) {
                ts.Name = n3.Attribute("a12").Value;
            }
            t.TermSet = ts;
            return t;
        }

        private static CookieCollection _theAuth;
        private static bool _bNoClaims;
        static void GetAuthCookie(SoapHttpClientProtocol proxy, string site) {
            return;
            //if (_bNoClaims) {
            //    return; //Ingen claims. 
            //}
            //// get the cookie collection - authentication workaround
            //CookieCollection cook = null;
            //try {
            //    if (_theAuth == null) {
            //        cook = ClaimClientContext.GetAuthenticatedCookies(site, 925, 525);
            //    }
            //    else {
            //        cook = _theAuth;
            //    }

            //    _theAuth = cook; 
            //    _bNoClaims = false;
            //}
            //catch (ApplicationException ex) {
            //    if (ex.Message.Contains("claim")) _bNoClaims = true;
            //    Console.Write("Auth feilet: " + ex.Message + " - ");
            //    //IGNORE
            //}
            //if (_theAuth != null) {
            //    proxy.CookieContainer = new CookieContainer();
            //    proxy.CookieContainer.Add(_theAuth);
            //}
        }

        static void ctx_MixedAuthRequest(object sender, WebRequestEventArgs e) {
            //add the header that tells SharePoint to use Windows Auth
            e.WebRequestExecutor.RequestHeaders.Add("X-FORMS_BASED_AUTH_ACCEPTED", "f");
        }

    }

    public class TermSet {
        public string Id { get; set; }
        public string Name { get; set; }
        public List<Term> Terms { get; set; }
        public string TermStoreId { get; set; }

        public string Description { get; set; }

        public override string ToString() {
            int tc = 0;
            if (Terms != null) tc = Terms.Count;
            return Name + "|" + Id + " (" + tc + "terms)";
        }
    }

    public class Term {
        public string Id { get; set; }
        public string Name { get; set; }
        public TermSet TermSet { get; set; }
        public override string ToString() {
            return Name + "|" + Id;
        }
    }

} 
```

# r - 在数据框中循环

> ID：13858964
> 
> 赞同：0
> 
> 时间：2012-12-13T11:34:52.253
> 
> 标签：r, if-statement, for-loop

这是我的数据框简短：

```
ID    IDaxis    Y   Date-Time       Tdiff  
1   1   5   2012-06-11 13:10:30 0.00    
1   1   10  2012-06-11 15:10:30 2.00    
1   1   20  2012-06-11 17:10:30 2.00    
1   3   15  2012-06-11 13:20:30 0.00    
1   3   30  2012-06-11 14:20:30 1.00    
1   3   45  2012-06-11 17:20:30 3.00    
1   6   9   2012-06-11 13:35:30 0.00        
1   6   15  2012-06-11 15:35:30 2.00    
1   6   30  2012-06-11 18:35:30 3.00    
3   2   8   2012-06-11 13:50:30 0.00  
3   2   14  2012-06-11 14:55:30 1.083   
3   2   20  2012-06-11 16:55:30 2.00    
3   2   30  2012-06-11 19:00:30 2.083   
3   5   10  2012-06-11 13:40:30 0.00    
3   5   15  2012-06-11 16:45:30 3.083 
```

ID - 植物
IDaxis - 植物叶片
Y - 叶长
Date - Time - 测量日期和时间
Tdiff - time(h) 测量间隔

我想做（示例 SHORT1）：
1）在 SHORT$Ttot 列中为 IDaxis 总结 Tdiff
2) 为 SHORT$Ydiff 列中的 IDaxis 计算 Y 行之间的差异
3) 在 SHORT$Ytot 列中为 IDaxis 求和 Ydiff

示例 SHORT1：

![在此处输入图像描述](../Images/7dfb5414bdf86dc6421e235cc4f95562.png)

Ydiff -测量之间
的长度间隔 Ytot - 从测量到测量的长度间隔之和
Ttot - 从测量到测量的时间间隔总和

如果我拆分数据框，我知道如何为 IDaxis 计算这个。我的问题是我有三个数据框，每个 700 ID，每个都有 100 IDaxis。我不知道如何为整个数据框自动执行此操作。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:53:30.567

您可以使用`ave`：

```
SHORT$Ttot  <- ave(SHORT$Tdiff, SHORT$IDaxis, FUN = cumsum),
SHORT$Ydiff <- ave(SHORT$Y,     SHORT$IDaxis, FUN = diff),
SHORT$Ytot  <- ave(SHORT$Ydiff, SHORT$IDaxis, FUN = cumsum), 
```

（如果您不喜欢重复的`SHORT$`，请查看类似的功能`transform`。）

您还可以使用方便的`plyr`包：

```
library(plyr)
ddply(SHORT, "IDaxis", transform, Ttot  = cumsum(Tdiff),
                                  Ydiff = diff(Y),
                                  Ytot  = cumsum(Ydiff)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:39:19.970

使用聚合（）和合并（）。

这是聚合[http://www.statmethods.net/management/aggregate.html的链接](http://www.statmethods.net/management/aggregate.html)

# java - 按里面的文本内容搜索文件

> ID：13858966
> 
> 赞同：1
> 
> 时间：2012-12-13T11:35:05.013
> 
> 标签：java, file, search, find, word

我想创建一个程序，该程序将在包含特定单词的选定目录（例如：“C：/”）中查找所有文本文件。

我想说：例如，我在“C：/”中有三个文本文件，里面有文本。

1.txt`Hello world this is test`

2.txt`Goodbye bla bla bla`

3.txt`Hello my name is John`

如果我输入单词“Hello”，程序必须找到 1.txt 和 3.txt

你有什么可以推荐给我的？什么命令可以在这里帮助我？谢谢你的回答。

更新：现在我只有选择目录的代码：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

public class SelectDirectory extends JPanel implements ActionListener {
    JButton go;

    JFileChooser chooser;
    String choosertitle;

    public SelectDirectory() {
        go = new JButton("Select directory: ");
        go.addActionListener(this);
        add(go);
    }

    public void actionPerformed(ActionEvent e) {
        chooser = new JFileChooser(); 
        chooser.setCurrentDirectory(new java.io.File("."));
        chooser.setDialogTitle(choosertitle);
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(true);

        if (chooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) { 
            System.out.println("getCurrentDirectory(): " + 
                                chooser.getCurrentDirectory());
            System.out.println("getSelectedFile() : " +  chooser.getSelectedFile());
            //
            //
            //
            searchFiles(); // error here, I dont know really how to use this method
            //
            //
            //
        } 
        else {
            System.out.println("No Selection ");
        }
    }

    public Dimension getPreferredSize(){
        return new Dimension(200, 200);
    }

    public static void main(String s[]) {
        JFrame frame = new JFrame("");
        SelectDirectory panel = new SelectDirectory();
        frame.addWindowListener(
            new WindowAdapter() {
                public void windowClosing(WindowEvent e) {
                    System.exit(0);
                }
            }
        );
        frame.getContentPane().add(panel,"Center");
        frame.setSize(panel.getPreferredSize());
        frame.setVisible(true);
    }

    private ArrayList<String> searchFiles(File file, String pattern, 
                        ArrayList<String> result) throws FileNotFoundException {

        if (!file.isDirectory()) {
            throw new IllegalArgumentException("file has to be a directory");
        }

        if (result == null) {
            result = new ArrayList<String>();
        }

        File[] files = file.listFiles();

        if (files != null) {
            for (File currentFile : files) {
                if (currentFile.isDirectory()) {
                    searchFiles(currentFile, pattern, result);
                } else {
                    Scanner scanner = new Scanner(currentFile);
                    if (scanner.findWithinHorizon(pattern, 0) != null) {
                        result.add(currentFile.getName());
                    }
                    scanner.close();
                }
            }
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T12:04:11.023

**遍历文件**

如果您使用的是 Java7，请使用`Files.walkFileTree(args)`遍历树：[doc](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java.nio.file.FileVisitor%29)

如果您使用的是版本 7 以下的 Java，只需`File.listFiles()`递归使用。

**在文件中查找**

使用 Scanner.findWithinHorizo​​n(String pattern, int horizo​​n) 查找您想要的任何正则表达式： [doc](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#findWithinHorizon%28java.lang.String,%20int%29)

这是一个如何做到这一点的示例：

```
private List<String> searchFiles(File file, String pattern, List<String> result) throws FileNotFoundException {

    if (!file.isDirectory()) {
        throw new IllegalArgumentException("file has to be a directory");
    }

    if (result == null) {
        result = new ArrayList<String>();
    }

    File[] files = file.listFiles();

    if (files != null) {
        for (File currentFile : files) {
            if (currentFile.isDirectory()) {
                searchFiles(currentFile, pattern, result);
            } else {
                Scanner scanner = new Scanner(currentFile);
                if (scanner.findWithinHorizon(pattern, 0) != null) {
                    result.add(currentFile.getName());
                }
                scanner.close();
            }
        }
    }
    return result;
} 
```

您可以像这样在代码中使用该方法：

```
 File folder = selectedFile.isDirectory() ? selectedFile : currentDirectory;
 ArrayList<String> files = new ArrayList<String>();
 try {
    files = searchFiles(folder, "Hello", files);
 } catch (FileNotFoundException e1) {
    // you should tell the user here that something went wrong
 }
 // 'files' now contains the resulting file names 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-25T18:22:15.893

这是 java 8 中的一个示例，它的流不是递归的

```
try( Stream<Path> walk = Files.walk( Paths.get( SRC ) ) ) {
        final String regex = "someregex";
        List<String> filesContainingRegex = walk.filter( path -> !Files.isDirectory( path ) ).flatMap( path -> {
            try {
                File file = path.toFile();
                Scanner scanner = new Scanner( file );
                if( scanner.findWithinHorizon( regex, 0 ) != null ) {
                    scanner.close();
                    return Stream.of( path.getFileName().toString() );
                }
                scanner.close();
            } catch( FileNotFoundException fnfe ) {
                System.out.println( fnfe.getMessage();
            }
            return Stream.empty();
        } ).collect( Collectors.toList() );
    } 
```

# php - php使用ip地址显示持有页面

> ID：13858969
> 
> 赞同：2
> 
> 时间：2012-12-13T11:35:12.913
> 
> 标签：php, testing, deployment

我面临的一个常见问题是在网站上放置一个保留页面，同时执行新部署或完成一些其他维护（如测试新部署）。我知道如果您使用的是 Apache (htaccess)，这可以很容易地完成，但这并不总是在使用 Web 服务器（IIS、Nginx 等）。我当前的所有网站都将每个请求重定向到公共目录根目录中的 index.php 文件（例如 Zend Framework、Wordpress、Symfony2），因此我当前的解决方案如下：

将以下代码添加到根`index.php`文件中：

```
$maintenanceFile = 'maintenance.flag';

if (file_exists($maintenanceFile)) {
    $ips = explode("\n",file_get_contents($maintenanceFile));
    foreach($ips as $key=>$value) {
        $ips[$key] = trim($value);
    }
    if(!isset($_COOKIE['BYPASS_MAINTENANCE']) && !in_array($_SERVER['REMOTE_ADDR'], $ips)) {
        include_once dirname(__FILE__) . '/holding.html';
        exit;
    }

} 
```

有了这个，我也可以简单地`maintenance.flag`在根目录中添加一个文件，其中包含允许的 IP 地址列表，如下所示：

```
127.0.0.1
123.456.789.101 
```

然后，如果您的 ip 地址存在于列表中，您可以在再次公开之前查看当前网站并对其进行测试等，否则您将看到一个`holding.html`页面（也位于根目录中）。完成后，我可以简单地删除`maintenance.flag`文件。

所以我的问题是，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:46:13.557

我将我的网站分成 3 个部分（副本）并拥有 3 个子域。

> 1) dev.website.com 是为开发者准备的。如果找到您的 ip，您可以访问，就像您的方式一样。
> 
> 2) test.website.com 是在我启动我们需要测试错误的网站之前供测试人员使用的。
> 
> 3) live.website.com 等于 website.com 对于所有其他人。

这样我就可以轻松开发，而不会在实时域上造成问题。

您可以轻松地从 dev 切换到 test 再到 live。您可以轻松复制环境。

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:44:40.007

网站的开发和生产版本应该始终位于不同的目录中，并**使用不同的域名或端口或路径进行访问**。两者都不应使用相同的数据库或其他资源，如上传的文件等。

如果您使用的是 Subversion，或 git 或任何代码存储库（我希望您是），那么很容易有一个单独的“开发”环境设置，您可以在其中进行所有测试等。我所有的网站都是这样设置的。一旦我实现或修复了功能并在我的“开发”端测试了它们，我将我的更改提交到 SVN，然后在我的“产品”端，我只需`svn update`将所有内容推入生产。

您的技术的问题`$maintenanceFile`是对您网站的每个页面请求都会导致对您的硬盘进行 file_exists 检查。这对于较小的站点可能无关紧要，但对于具有大量点击的较大站点，这可能会导致整体性能下降。

# android - 带有 setMultiChoiceItems 的自定义对话框

> ID：13858974
> 
> 赞同：11
> 
> 时间：2012-12-13T11:35:35.913
> 
> 标签：android, android-dialogfragment, customdialog

我想创建一种用户可以选择选项的方式，如下图所示

![在此处输入图像描述](../Images/b96fb34b607b255fa24b29ee824c861f.png)

现在正在做以下事情

```
public static class CategoriesDialogFragment extends SherlockDialogFragment {

    public static CategoriesDialogFragment newInstance(int title) {
        CategoriesDialogFragment frag = new CategoriesDialogFragment();
        Bundle args = new Bundle();
        args.putInt("title", title);
        frag.setArguments(args);
        return frag;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        int title = getArguments().getInt("title");

        return new AlertDialog.Builder(getActivity())
                .setIcon(R.drawable.alert_dialog_icon)
                .setTitle(title)
                .setMultiChoiceItems(_categories, _selections,
                        new DialogSelectionClickHandler())
                .setPositiveButton(R.string.alert_dialog_ok,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                ((MainActivity) getActivity())
                                        .doPositiveClick();
                            }
                        }).create();

        /*
         * .setNegativeButton(R.string.alert_dialog_cancel, new
         * DialogInterface.OnClickListener() { public void
         * onClick(DialogInterface dialog, int whichButton) {
         * ((MainActivity) getActivity()) .doNegativeClick(); } })
         */
    }

    public class DialogSelectionClickHandler implements
            DialogInterface.OnMultiChoiceClickListener {
        public void onClick(DialogInterface dialog, int clicked,
                boolean selected) {
            // Log.i("ME", _options[clicked] + " selected: " + selected);
        }
    }

} 
```

但我想像图像一样添加所有选项。所以我想我将不得不建立一个自定义对话框。我是否仍然可以扩展本机 setMultiChoiceItems 以减少我对代码的处理。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T12:06:17.230

您可能可以使用该类的[`setCustomTitle()`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setCustomTitle%28android.view.View%29)方法`AlertDialog.Builder`并构建自己的标题，该标题具有标题文本以及*all* `CheckBox`，如下所示：

```
new AlertDialog.Builder(getActivity())
                .setIcon(R.drawable.alert_dialog_icon)
                .setTitle(title)
                .setCustomTitle(getLayoutInflater().inflate(R.layout.custom_title, null)); 
```

哪里`R.layout.custom_title`是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        style="?android:attr/textAppearanceLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Dialog title"
        android:textColor="#ffffff" />

    <TextView
        android:id="@+id/all"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="All"
        android:textColor="#ffffff" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

应进行其他样式调整以使其看起来更好。但是看到整个对话框布局，您可能希望使用自定义`Dialog`类，该`setMultiChoice()`方法将不可用（但最终它很容易复制）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:48:44.663

我已经实现了您在图像中显示的东西。我使用的是您正在考虑使用的自定义对话。我在 xml 文件中使用了 Listview。

首先定义初始化下面的arraylist。

```
// Catagory Selection
    public static ArrayList<String> acceptpositionwhoesNearMe = new ArrayList<String>();
    public static String AcceptCatagotyIDWhoesNearMe = ""; 
```

下面是我使用的代码**showDialog()**。

```
public void showDialog() {
        Log.i(TAG, "Inside Show Dialog");
        final Dialog warning = new Dialog(logout_dialogue.this);
        warning.requestWindowFeature(Window.FEATURE_NO_TITLE);
        warning.setContentView(R.layout.YOUR_XML);
        warning.setCancelable(false);
        warning.getWindow().setGravity(Gravity.CENTER);

        WindowManager mWinMgr;
        mWinMgr = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
        int displayWidth = mWinMgr.getDefaultDisplay().getWidth();

        warning.getWindow().setLayout(displayWidth - 75,
                LayoutParams.WRAP_CONTENT);
        warning.setOnDismissListener(new OnDismissListener() {
            public void onDismiss(DialogInterface dialog) {
                Log.i(TAG, "Inside Dialog interface");
                // test = true;
                warning.dismiss();
            }
        });
        ListView listinterest = (ListView) warning
                .findViewById(R.id.list_catagory);
        /*
         * ArrayList<String> count = new ArrayList<String>(); count.clear();
         * count.add("Hotels"); count.add("Restaurants"); count.add("Gardens");
         * count.add("Theater");
         */
        CatagorySummaryAdapter adapter;
        adapter = new CatagorySummaryAdapter(YOUR_ACTIVITY.this,
                YOUR_ARRAYLIST_OF_CATAGORY, true);

        listinterest.setAdapter(adapter);

        Button btnOk = (Button) warning.findViewById(R.id.btn_close);
        btnOk.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                // TODO Auto-generated method stub

                String Catagory = "";
                int count = HomeActivity.acceptpositionwhoesNearMe.size();

                if (count > 0) {
                    for (int i = 0; i < HomeActivity.acceptpositionwhoesNearMe
                            .size(); i++) {

                        int pos = Integer
                                .parseInt(HomeActivity.acceptpositionwhoesNearMe
                                        .get(i));
                        if (Catagory.equals("")) {
                            Catagory = GetUserDetailsJsonParser.CategoryName
                                    .get(pos);
                            HomeActivity.AcceptCatagotyIDWhoesNearMe = GetUserDetailsJsonParser.CategoryID
                                    .get(pos);
                        } else {

                            Catagory = Catagory
                                    + ","
                                    + GetUserDetailsJsonParser.CategoryName
                                            .get(pos);
                            HomeActivity.AcceptCatagotyIDWhoesNearMe = HomeActivity.AcceptCatagotyIDWhoesNearMe
                                    + ","
                                    + GetUserDetailsJsonParser.CategoryID
                                            .get(pos);
                        }

                    }

                    Log.i(TAG, "Accept Catagory IDs WhoseNear Me"
                            + HomeActivity.AcceptCatagotyIDWhoesNearMe);

                    GetUserDetailsJsonParser.InterestedIn = HomeActivity.AcceptCatagotyIDWhoesNearMe;
                    UpdateMap = true;
                    /*
                     * startActivity(new Intent(WhosNearMe.this,
                     * BuildInukshk_4.class));
                     */
                    new GetUsersInRadiusAsyncTask().execute();

                    warning.dismiss();

                } else {
                    Toast.makeText(WhosNearMe.this,
                            "Please Select One or More Catagory", 3).show();
                }
                // test = true;

            }
        });

        warning.show();
    } 
```

这是**我的 logout_dialogue.xml**：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/edittext_back_final"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <com.inukshk.CustomTextViewBold
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginTop="10dp"
                android:text="Interested in"
                android:textColor="#3C3C3C"
                android:textSize="18sp"
                android:textStyle="bold" />
        </LinearLayout>

        <ListView
            android:id="@+id/list_catagory"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:cacheColorHint="#00000000"
            android:divider="@android:color/transparent" >
        </ListView>

        <Button
            android:id="@+id/btn_close"
            android:layout_width="99dp"
            android:layout_height="40dp"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="10dp"
            android:background="@drawable/btn_back_final"
            android:text="CLOSE"
            android:textColor="#ffffff"
            android:textSize="16dp"
            android:textStyle="bold" />
    </LinearLayout>

</LinearLayout> 
```

这是我的**CatagorySummaryAdapter.java**：

```
package com.inukshk.adapter;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.RelativeLayout;
import android.widget.TextView;

import com.inukshk.HomeActivity;
import com.inukshk.R;
import com.inukshk.CreateInukshk.BuildInukshk_3;
import com.inukshk.WhosNearMe.WhosNearMe;

public class CatagorySummaryAdapter extends BaseAdapter {

    public Activity context;
    String TAG = "CatagorySummaryAdapter";
    public LayoutInflater inflater;
    public ArrayList<String> Count;
    boolean Dialogue;

    public CatagorySummaryAdapter(Activity context, ArrayList<String> Count,
            boolean Dialogue) {
        super();
        this.context = context;
        this.inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        this.Count = Count;

        this.Dialogue = Dialogue;

        // TODO Auto-generated constructor stub
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return Count.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return Count.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public int getItemViewType(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public class ViewHolder {
        RelativeLayout lsummary_row;
        TextView txtinterestname;
        CheckBox chkinterest;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        int pos = position;
        ViewHolder holder;

        if (convertView == null) {
            holder = new ViewHolder();

            if (Dialogue) {
                convertView = inflater.inflate(
                        R.layout.listview_summary_dialogue_row, null);
            } else {
                convertView = inflater.inflate(R.layout.listview_summary_row,
                        null);
            }

            holder.txtinterestname = (TextView) convertView
                    .findViewById(R.id.txtinterestname);
            holder.lsummary_row = (RelativeLayout) convertView
                    .findViewById(R.id.lsummary_row);
            holder.chkinterest = (CheckBox) convertView
                    .findViewById(R.id.chkinterest);
            holder.chkinterest.setEnabled(true);

            holder.chkinterest.setTag(position);

            if (Dialogue) {

                for (int i = 0; i < HomeActivity.acceptpositionwhoesNearMe.size(); i++) {
                    int index = Integer
                            .parseInt(HomeActivity.acceptpositionwhoesNearMe
                                    .get(i));
                    // Log.i(TAG, "Inside for Loop of Accept Positions");
                    if (index == position) {
                        // Log.i(TAG, "Matched for index" + index);
                        holder.chkinterest.setChecked(true);
                        holder.chkinterest
                                .setButtonDrawable(R.drawable.checkbox_checked);
                    }

                }

            } else {
                for (int i = 0; i < BuildInukshk_3.acceptposition.size(); i++) {
                    int index = Integer.parseInt(BuildInukshk_3.acceptposition
                            .get(i));
                    // Log.i(TAG, "Inside for Loop of Accept Positions");
                    if (index == position) {
                        // Log.i(TAG, "Matched for index" + index);
                        holder.chkinterest.setChecked(true);
                        holder.chkinterest
                                .setButtonDrawable(R.drawable.checkbox_checked);
                    }

                }
            }

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.chkinterest
                .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        // TODO Auto-generated method stub
                        // Log.i(TAG, "ISChecked is " + isChecked);
                        if (isChecked) {
                            // Log.i(TAG, "ISChecked is true");
                            buttonView
                                    .setButtonDrawable(R.drawable.checkbox_checked);
                            int position = Integer.parseInt(buttonView.getTag()
                                    .toString());
                            if (Dialogue) {
                                HomeActivity.acceptpositionwhoesNearMe.add(String
                                        .valueOf(position));

                                Log.i(TAG, "Accept ID of Dialogue"
                                        + HomeActivity.acceptpositionwhoesNearMe);
                            } else {
                                BuildInukshk_3.acceptposition.add(String
                                        .valueOf(position));

                                Log.i(TAG, "Accept ID"
                                        + BuildInukshk_3.acceptposition);
                            }

                        } else {
                            // Log.i(TAG, "ISChecked is false");
                            buttonView
                                    .setButtonDrawable(R.drawable.checkbox_unchecked);
                            int position = Integer.parseInt(buttonView.getTag()
                                    .toString());

                            if (Dialogue) {
                                if (HomeActivity.acceptpositionwhoesNearMe
                                        .contains(String.valueOf(position))) {
                                    // Log.i(TAG,
                                    // "Inside Already present position");
                                    HomeActivity.acceptpositionwhoesNearMe
                                            .remove(String.valueOf(position));
                                    Log.i(TAG,
                                            "Accept ID Dialogue***"
                                                    + HomeActivity.acceptpositionwhoesNearMe);
                                }
                            } else {
                                if (BuildInukshk_3.acceptposition
                                        .contains(String.valueOf(position))) {
                                    // Log.i(TAG,
                                    // "Inside Already present position");
                                    BuildInukshk_3.acceptposition.remove(String
                                            .valueOf(position));
                                    Log.i(TAG, "Accept ID ***"
                                            + BuildInukshk_3.acceptposition);
                                }
                            }
                            //
                        }

                    }
                });

        holder.txtinterestname.setText(Count.get(pos));

        return convertView;
    }

} 
```

尝试通过它可能会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:52:13.453

我还想继续使用`setMultiChoiceItems()`我的对话框，所以我没有创建自定义对话框，而是这样做了：

不要`AlertDialog`立即退货。`AlertDialog.Builder`首先像这样创建它：

`AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());`

设置您的构建器参数：

```
builder.setTitle(listTitle)
.setMultiChoiceItems(allTagsArray, containsTag,
            new DialogInterface.OnMultiChoiceClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which, boolean isChecked){ 
```

然后创建`AlertDialog`自身调用`create()`。这还不会显示对话框。

`AlertDialog dialog = builder.create();`

然后获取`ListView`，添加页眉和/或页脚，然后返回。

```
ListView dialogList = dialog.getListView();
dialogList.addFooterView(yourHeader);
return dialog; 
```

这也适用于@Luksprog `setCustomTitle()`，为您提供总共三个可自定义的空间，而无需实现自定义适配器。对于某些人来说，唯一可能的缺点是页眉和页脚随列表滚动（显然，如果列表比屏幕长，这只会有问题）。

希望这可以帮助。

**重要更新**：不要在复选框列表中使用标题。它会导致`AlertController.java`错误计算选中了哪个复选框，使其无用。仍然可以使用页脚，这在这种情况下很有用，但在我的情况下没有，所以我正在构建一个自定义对话框。

# haskell - haskell 中的十六进制值

> ID：13858976
> 
> 赞同：1
> 
> 时间：2012-12-13T11:35:38.120
> 
> 标签：haskell

我在haskell中有以下代码，我想对其进行一些更改：

```
 unwords . map (printf "%02X") $ zipWith (\x y -> -(fromIntegral (ord x)) + y - 2 :: Word8) "Aa123456" [0..] 
```

运行此代码后，我得到：

```
"BD 9E CF CF CF CF CF CF" 
```

基本上我想要这个函数的逆，所以函数可以获得十六进制值`"BD 9E CF CF CF CF CF CF"`并返回`"Aa123456"`。

我确定我必须更改`printf`语句，但我应该如何更改脚本以接受十六进制值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:04:53.093

正如@gspr 建议的那样，解决这个问题的方法是将其分成更小的部分：

1.  将每个十六进制从字符串中分离出来，即`"BD 9E CF CF CF CF CF CF"`变成`["BD", "9E", ...., "CF", "CF"]`.
2.  将十六进制字符串转换为整数，例如 "BD" -> 189
3.  将每个整数转换为适当的字符，例如 189 -> "A"

对于 1，该[`words`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3awords)功能可能会有所帮助。

对于 2 `read "0xBD" == 189`，。您只需要弄清楚如何将每个十六进制数转换为`read`. （注意，您也可以编写转换函数以直接从字符串转换为整数，这可能是一个不错的练习。）

对于 3，只需反转编码操作，即：写出你的方程`i = y - x - 2 (mod 256)`（其中`i`是从十六进制转换的一个，`y`是列表中的索引，`x`是字符的值）并求解`x`. 是的`chr`倒数。`ord`

# iphone - 通过 RestKit 或任何 HTTP 请求上传回形针照片

> ID：13858979
> 
> 赞同：0
> 
> 时间：2012-12-13T11:36:03.127
> 
> 标签：iphone, ruby-on-rails, mongoid, paperclip, restkit

我正在使用 mongoid-paperclip 在 amazon s3 上上传图像，并且使用 multipart/form-data 在网络上运行良好。

但是，当我尝试使用 CURL 或 RestKit 使用 HTTP PUT 请求上传图像时，更新配置文件有效并返回`{ status: ok }`，但文件没有上传。

## 用户类

```
has_mongoid_attached_file :avatar,
    :styles => {
      :original => ['1000x1000>', :png],
      :small    => ['64x64#',     :png],
      :medium   => ['250x250',    :png],
      :large    => ['500x500>',   :png]
    },
    :convert_options => { :all => '-background white -flatten +matte' } 
```

**所以现在我不知道问题出在哪里，是来自 RestKit 还是来自回形针？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:04:46.773

如果有人遇到与您相同的问题需要致电

```
current_user.avatar = params[:avatar] 
```

解释

`current_user`当前用户是否已登录，任何用户都可以使用

`avatar`是我的回形针名字

`params[:avatar]`是您要上传的文件

# algorithm - 提高搜索结果的相关性

> ID：13858983
> 
> 赞同：1
> 
> 时间：2012-12-13T11:36:25.750
> 
> 标签：algorithm, search, full-text-search, search-engine, morphological-analysis

我有一个问题是让搜索输出对最终用户更实用。问题与算法和方法有关，然后与要使用的确切技术或框架有关。

目前我们有一个产品数据库，可以用以下模式描述：

![http://goo.gl/391qj](../Images/7fa081dd1c3762d2dd1d6c00af65c77f.png)

从搜索的角度来看，我们已经完成了非常标准的事情，使用标记分析器进行 3 方文本搜索，处理错误类型和同义词（这不是完整列表，但正如我所说，它超出了范围）。但是我们仍然需要执行额外的工作以使搜索结果更接近现实生活中的用户需求，这可能有点类似于 Google 按相关性对索引页面进行排名的方式。我们已经认为可能适用于解决问题的想法：

*   分析广泛搜索引擎中最流行的搜索请求（如何获取它们仍然是一个问题）并增加索引中那些与流行请求相对应（可以找到）的条目的排名；
*   增加最新（热门）条目的排名；
*   增加最大的条目组的排名，这些条目对应于流行的请求并且有一些共同点（这就是为什么它是一个组）；

感谢任何帮助或建议方向，在哪里挖掘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:39:54.363

你可以试试pLSA；网上有很多参考资料，应该有库和源代码。

编辑：

好吧，我最近仔细研究了 Lucene，它似乎对实际提出的问题给出了更好的答案（它不使用 pLSA）。至于与 db 的集成，你可以使用 Hibernate Search（虽然它似乎没有直接使用 Lucene 强大）。

# mysql - 连接错误

> ID：13858984
> 
> 赞同：0
> 
> 时间：2012-12-13T11:36:28.000
> 
> 标签：mysql, connection

我正在将我的 php 页面与数据 bsae 连接，但连接不是 eshtablish 并且出现警告。我的用户名、密码和主机名是正确的，我检查了很多次。我不明白为什么会发生这种情况。请是..警告如下..

```
" Warning: mysql_connect() [function.mysql-connect]: Access denied for user 'dewasdia'@'uni.universalworkplace.com' (using password: YES) in /home/dewasdia/public_html/main.php on line 7 fail " 
```

php代码是

```
function connection()
{
mysql_connect('www.xxxx.com','xyz','xyz') or die (" fail");
mysql_select_db('dewasdia_dewas') or die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:58:43.470

您可能在`mysql.user`表中没有允许来自脚本主机 ( `uni.universalworkplace.com`) 的连接的条目。

您需要使用类似的东西授予访问权限

```
GRANT ALL ON dewasdia_dewas.*
    TO 'dewasdia'@'uni.universalworkplace.com'
    IDENTIFIED BY 'xyz';

FLUSH PRIVILEGES; 
```

# c# - Microsoft Playerframework 变量源

> ID：13858988
> 
> 赞同：2
> 
> 时间：2012-12-13T11:36:41.150
> 
> 标签：c#, microsoft-metro

我正在开发一个带有音乐流的 Windows 应用商店应用程序。为了播放流，我使用 Microsoft Playerframework for XAML。

列出一个流没有问题，但我想使用多个流，由我的 C# 代码随机选择。

问题是，我不能在媒体播放器的源定义中放入变量。

XAML：

```
<mmppf:MediaPlayer Source="http://linktostream"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:45:13.130

你能用一个页面来提供随机流吗？例如：

```
"http://linktostream/StreamPage.aspx?stream=Random" 
```

通过该页面提供流？

我没有使用过这个框架，所以很明显我可能是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:47:41.950

```
<mmppf:MediaPlayer Name="myMediaPlayer" /> 
```

在 C# 代码中：

```
 ...
         myMediaPlayer.Source = GetRandomSource();
    }

    private Uri GetRandomSource()
    {
        // Get an uri randomly
    } 
```

# java - 在java中将十进制值的字节数组转换为十六进制字符串

> ID：13858994
> 
> 赞同：1
> 
> 时间：2012-12-13T11:36:52.527
> 
> 标签：java, parsing, hex, decimal

我是 Java 新手。我想将十进制值的字节数组转换为十六进制字符串。我的输入字节数组是 [0, 0, 0, 0, 0, 0, 1, -28]。我得到 00000000000001e4 而不是 0000001e4。请帮我解决这个问题

```
 public static String ConvetToHex(byte[] decValue) 
{

    String value = "";
    for(int i = 0;i<decValue.length;i++)
    {
         value = value+ Integer.toString((decValue[i] & 0xff) + 0x100, 16).substring(1);
    }
    return value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T11:39:07.267

在我看来是正确的。八个字节应该变成 16 个十六进制字符。您可以使用

```
return new BigInteger(1, decValue).toString(16); 
```

但它会产生相同的输出。

# angularjs - 我如何使用 angularJS restful 服务使用来自外部文件的 json 数据

> ID：13858998
> 
> 赞同：6
> 
> 时间：2012-12-13T11:37:17.483
> 
> 标签：angularjs

我正在开发一个应用程序。在那我正在从

使用 $http.get() 方法的外部文件效果很好。现在我正在尝试使用角度

宁静的服务。它在过滤器中工作正常，但是当我在控制器中使用它时

显示未定义。

```
//Service.js File
angular.module('calenderServices', ['ngResource']).
factory('Events', function($resource){
return $resource('/EventCalender/:File.json', {}, {
query: {method:'GET', params:{File:'events'}, isArray:true}
});
});

        //This is my app Module
angular.module('calender', ['eventFilters','highlight','event','calenderServices']).
config(['$routeProvider', function($routeProvider) {
$routeProvider.
  when('', {templateUrl: 'template.html',   controller: MonthCtrl}).
  otherwise({redirectTo: '/invalid'});
}]);

     //This is my filter.js
angular.module('eventFilters', ['calenderServices']).filter('compare', function(Events) {
var events=Events.query();
alert(events[0].name); //it is displaying the name "Milestone1" });

     //This is my controller.
function MonthCtrl($scope, Events){
var events=Events.query();
    alert(events[0].name); //it is displaying undefined
    }

     //whenever i try to use the variable 'events' in controller, it is displaying undefined or null.  But in filter it is working fine. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:04:33.347

以下内容不起作用，因为**ngResource**发出***异步***http 请求。

```
var events=Events.query();
alert(events[0].name); // <--- here events is an empty array 
```

通常您需要做的就是以下内容，您的数据将可用于在您的视图中呈现

```
$scope.events = Events.query() 
```

它看起来像一个同步操作，但它不是。这是 Angular 的禅意。您可以[从文档中了解详细信息](http://docs.angularjs.org/api/ngResource.%24resource)。

要进一步处理数据，您还可以将成功回调传递给`get`方法

```
Events.query(function(events){
    // here you have access to the first event's name
    console.log(events[0].name);
}); 
```

这是一个工作示例：[http ://plnkr.co/edit/NDZ2JWjMUoUvtzEuRUho?p=preview](http://plnkr.co/edit/NDZ2JWjMUoUvtzEuRUho?p=preview)

# codeigniter - html是使用jquery ajax传递的，但pdf没有在mpdf中为codeigniter生成

> ID：13858999
> 
> 赞同：2
> 
> 时间：2012-12-13T11:37:23.863
> 
> 标签：codeigniter, jquery, mpdf

我想在 codeigniter 中使用`mPDF`. 我的 html 使用 jQuery AJAX 传递给控制器​​。数据来了`$html`但它不起作用。对 html 进行硬编码时，它可以正常工作。任何人都可以帮助我吗？

```
public function pdf($paper='A4')
{
    $html = '';
    $html = $this->input->POST('content');
    $this->load->library('mpdf54/mpdf');
    $CI->mpdf = new mPDF('utf-8',$paper);
    $mpdf->debug = true;

    $this->mpdf->WriteHTML($html);
    $this->mpdf->Output(); 
    exit; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:02:50.143

尝试使用获取所有 POST 变量

```
$html = $this->input->POST(); 
```

然后在进一步移动以确保它们已设置之前，将这些内容与自己相呼应。

```
public function pdf($paper='A4')
{
    print_r($this->input->POST());
    return;
} 
```

这当然仅用于测试，但可能会帮助您了解 $html 变量未设置的原因。试试看，然后给我们结果。