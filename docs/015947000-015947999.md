# StackOverflow 问答 15947000-15947999

# c# - IQueryable 命令超时

> ID：15947000
> 
> 赞同：4
> 
> 时间：2013-04-11T10:58:54.790
> 
> 标签：c#, sql, linq, linq-to-sql, iqueryable

我有一个问题。我正在使用 Linq 和 IQueryable 接口来处理我的数据库。那是我的代码：

```
public static List<Stat> GetStateList(DataClassesDataContext db, int pageNumber,
    int pageSize, DateTime beginTime, DateTime endTime,
    Dictionary<GetSourcesNameResult, bool> sourceDictionary,
    bool[] WarnLevel, ref int count)
{
    IQueryable<Stat> result = db.Stats;

    result = DateFilter(result, beginTime, endTime);
    result = DictionaryFilter(result, sourceDictionary);
    result = ErrorFilter(result, WarnLevel);
    result = result.OrderBy(a => a.EventTime); //sort by eventTime

    count = result.Count();
    var resultList = result.Skip((pageNumber - 1) * pageSize)
                           .Take(pageSize).ToList();

    return new List<Stat>(resultList);
} 
```

在我的数据库中有很多元素。如果我的过滤器给了我大约 100 万个元素。我有超时异常：

```
count = result.Count(); 
```

我需要做什么？sql表达式：

```
SELECT [t0].[RecordId], [t0].[RecordTime], [t0].[EventGUID], 
       [t0].[AssociatedEventGUID], [t0].[EventId], [t0].[EventTime], 
       [t0].[WarnLevel], [t0].[UserType], [t0].[SourceId], 
       [t0].[FactoryNumber], [t0].[CntrlId], [t0].[CntrlFactoryNumber], 
       [t0].[ParamData], [t0].[TargetId], [t0].[SourceName], [t0].[TargetName]
FROM 
       [dbo].[Log] AS [t0]
WHERE 
   ((CONVERT(Int,[t0].[WarnLevel])) IN (@p0, @p1, @p2)) AND 
   ([t0].[SourceName] IN (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, 
   @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, 
   @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, 
   @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, 
   @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, 
   @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, 
   @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, 
   @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, 
   @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 
   @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, 
   @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, 
   @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, 
   @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, 
   @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, 
   @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, 
   @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, 
   @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, 
   @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, 
   @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207, 
   @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216)) 
  AND ([t0].[EventTime] >= @p217) AND ([t0].[EventTime] <= @p218)
    ORDER BY [t0].[EventTime] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:58:54.403

您可以设置 DataContext`CommandTimeout`属性

[http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.commandtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.commandtimeout.aspx)

出于好奇，你为什么有

```
var resultList = result.Skip((pageNumber - 1) * pageSize)
                           .Take(pageSize).ToList();

    return new List<Stat>(resultList); 
```

并不是

```
List<Stat> resultList = result.Skip((pageNumber - 1) * pageSize)
                           .Take(pageSize).ToList();

    return resultList ; 
```

# python - Python中的另一个unicode混乱

> ID：15947003
> 
> 赞同：1
> 
> 时间：2013-04-11T10:59:05.063
> 
> 标签：python, xml, escaping, special-characters, nltk

我正在用 Python NLTK 标记一些 unicode 文本。问题是文本来自编码错误的数据源，并且没有指定编码。经过一番折腾，我发现文本必须是 UTF-8 格式。给定输入字符串：

```
 s = u"The problem isn&#8217;t getting to Huancavelica from Huancayo to the north." 
```

我想用 NLTK 处理它，例如用于 POS 标记，但是特殊字符没有被解析，我得到如下输出：

```
The/DT problem/NN isn&#8217;t/NN getting/VBG 
```

代替：

```
The/DT problem/NN isn't/VBG getting/VBG 
```

如何从这些特殊字符中清除文本？

感谢您的任何反馈，

穆龙

**更新：**如果我运行`HTMLParser().unescape(s)`，我得到：

```
 u'The problem isn\u2019t getting to Huancavelica from Huancayo to the north.' 
```

在其他情况下，我仍然会在文本中得到`&amp;`和。`&#13;`我需要做什么才能将其翻译成 NLTK 可以理解的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:55:31.713

这不是字符/Unicode 编码问题。您拥有的文本包含 XML/HTML[数字字符引用](http://en.wikipedia.org/wiki/Numeric_character_reference)实体，它们是标记。无论您使用什么库来解析文件，都应该提供一些函数来取消`&#8217;`对适当字符的引用。

如果您未绑定到任何库，请参阅[在 Python 字符串中解码 HTML 实体？](https://stackoverflow.com/questions/2087370/decode-html-entities-in-python-string)

结果字符串包含一个特殊的撇号而不是一个 ascii 单引号。您可以在结果中替换它：

```
In [6]: s = u"isn&#8217;t"

In [7]: print HTMLParser.HTMLParser().unescape(s)
isn’t

In [8]: print HTMLParser.HTMLParser().unescape(s).replace(u'\u2019', "'")
isn't 
```

Unescape 会照顾其余的角色。例如`&amp;`符号`&`本身。`&#13;`是一个`CR`符号 ( `\r`)，可以忽略或转换为换行符，具体取决于原始文本的来源（旧 Mac 将其用于换行符）

# zend-framework2 - 在 Zf2 中使用 formRow 视图助手在输入前显示标签

> ID：15947005
> 
> 赞同：8
> 
> 时间：2013-04-11T10:59:10.103
> 
> 标签：zend-framework2, zend-form, zend-view

在 Zend Framework 2.1.4 中，我使用标准的表单视图助手来呈现我的表单元素。

当我尝试：

```
<?php echo $this->formRow($form->get('Title'));?> 
```

标签文本和输入元素放置在标签内：

```
<label>
<span>Title</span><input type="text" name="Title" placeholder="Inserisci titolo"
required="required" value="">
</label> 
```

与以下相同：

```
<?php echo $this->formCollection($form, TRUE); 
```

但是，如果我渲染出标签并单独输入：

```
echo $this->formLabel($form->get('Title'));
echo $this->formInput($form->get('Title')); 
```

它生成我想要的 html：

```
<label for="Title">Title</label>
<input type="text" name="Title" placeholder="Insert Title" required="required" value=""> 
```

如何使用 formRow 视图助手实现相同的效果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-03T13:20:44.807

如果表单元素没有“id”属性，标签将包装输入：

```
<label>Label<input /></label> 
```

否则：

```
<label for="test">Label</label><input id="test" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T00:10:18.427

看着（zf2 版本 2.25 开发）：

\Zend\Form\View\Helper\FormRow

看来，如果您**不**为表单元素提供**id**，则默认的一般行为是将输入元素**放置在**其相应的标签元素内。

formRow 视图助手的第二个参数将把标签文本放置在文档流中的输入元素之前（前置）或之后（附加）。（默认是放在前面。）

检查渲染方法以获取更多详细信息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-11T14:41:33.607

首先，您必须查看源代码以了解 formRow 的工作原理：[https ://github.com/zendframework/zf2/blob/master/library/Zend/Form/View/Helper/FormRow.php](https://github.com/zendframework/zf2/blob/master/library/Zend/Form/View/Helper/FormRow.php)

在您将在此代码中看到 __invoke 具有 $labelPosition 参数之后，您可以使用 const LABEL_APPEND 和 LABEL_PREPEND 预先或附加该参数。

简而言之，尝试做这样的事情：

```
$this->formRorw($form->get('element'), 'prepend'); // Or append as you want 
```

# php - 获取 301 重定向的使用统计信息

> ID：15947010
> 
> 赞同：0
> 
> 时间：2013-04-11T10:59:26.730
> 
> 标签：php, mysql, .htaccess, redirect

我正在使用 Google 的网站管理员工具以及一些将 404 记录到数据库中的手工脚本来获取所有错误的链接，并将结果放入我的 .htaccess 文件中更正的 301 重定向中。

.htaccess 似乎越来越大，这肯定是我目前无法影响的另一个问题的原因。

我想知道（为了保持 .htaccess 的大小尽可能小以提高可读性），是否有工具或任何方法来跟踪这些重定向的使用？！

因此，一段时间后，在 Google 的索引更新和我自己对错误链接的更改过程中，当它们不再需要时，我可能能够将它们取出。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:21:26.243

您应该将任何不可处理的请求重写为 PHP 脚本来处理此问题，然后您可以对数据执行任何操作。

在您的 .htaccess 中添加（在您制定任何其他重写规则之后）：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* /404.php?uri=$0 [L] 
```

并`404.php`做这样的事情（半伪代码）：

```
// Get the redirect mapping for this URI from the database
$query = "
    SELECT location
    FROM redirects
    WHERE uri = ?
";
$redirect = $db->query($query, $_GET['uri']);

if ($redirect) {
    // Update database with tracking data
    $query = "
        UPDATE redirects
        SET
          hits = hits + 1,
          lastHit = NOW()
        WHERE uri = ?
    ";
    $db->query($query, $_GET['uri']);

    // Do the redirect
    header($_SERVER['SERVER_PROTOCOL'] . ' 301 Moved Permanently');
    header('Location: ' . $redirect);
} else {
    // Really not found
    header($_SERVER['SERVER_PROTOCOL'] . ' 404 Not Found');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:54:34.523

为了保持 .htaccess 较小，您可以使用[`RewriteMap`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)、see[`txt`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#txt)或[`dbm`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#dbm)例如。

Apache`access.log`应该已经跟踪请求。要查看链接是否仍在使用，您可以将其中的条目`access.log`与`RewriteMap`文本文件进行比较。

为了便于比较，您还可以添加一个额外的[`CustomLog`](http://httpd.apache.org/docs/current/mod/mod_log_config.html#customlog)，仅跟踪 URL 路径

```
CustomLog ${APACHE_LOG_DIR}/tracker.log %U 
```

或者

```
CustomLog ${APACHE_LOG_DIR}/tracker.log "%U %t" 
```

如果您还需要访问时间。

# c# - 为 ValueObject 实现 GetHashCode 和 Equals 方法

> ID：15947012
> 
> 赞同：1
> 
> 时间：2013-04-11T10:59:29.283
> 
> 标签：c#, nhibernate

文档中有一段话`NHibernate`：

> 注意：如果你定义了一个`ISet`复合元素，那么正确的实现`Equals()`和实现是非常重要的`GetHashCode()`。

那里是什么`correctly`意思？是否有必要为域中的所有值对象实现这些方法？

**扩展我的问题**

在*Marc*附加的用户*Albic*的文章中说：

> 实际上很难`GetHashCode()`正确实现，因为除了 Marc 已经提到的规则之外，哈希码在对象的生命周期内不应该改变。因此，用于计算哈希码的字段必须是不可变的。
> 
> 当我使用`NHibernate`. 我的方法是根据对象的 ID 计算哈希码。ID 只能通过构造函数设置，因此如果您想更改 ID（这不太可能），您必须创建一个具有新 ID 的新对象，因此需要一个新的哈希码。这种方法最适用于 GUID，因为您可以提供随机生成 ID 的无参数构造函数。

我突然意识到我在`AbstractEntity`课堂上得到了什么：

```
public abstract class AbstractEntity<T> where T : AbstractEntity<T> {
    private Nullable<Int32> hashCode;

    public virtual Guid Id { get; protected set; }
    public virtual Byte[] Version { get; set; }

    public override Boolean Equals(Object obj) {
        var other = obj as T;
        if(other == null) {
            return false;
        }

        var thisIsNew = Equals(this.Id, Guid.Empty);
        var otherIsNew = Equals(other.Id, Guid.Empty);

        if(thisIsNew && otherIsNew) {
            return ReferenceEquals(this, other);
        }

        return this.Id.Equals(other.Id);
    } // public override Boolean Equals(Object obj) {

    public override Int32 GetHashCode() {
        if(this.hashCode.HasValue) {
            return this.hashCode.Value;
        }

        var thisIsNew = Equals(this.Id, Guid.Empty);
        if(thisIsNew) {
            this.hashCode = base.GetHashCode();
            return this.hashCode.Value;
        }
        return this.Id.GetHashCode();
    } // public override Int32 GetHashCode() {

    public static Boolean operator ==(AbstractEntity<T> l, AbstractEntity<T> r) {
        return Equals(l, r);
    }
    public static Boolean operator !=(AbstractEntity<T> l, AbstractEntity<T> r) {
        return !Equals(l, r);
    }
} // public abstract class AbstractEntity<T>... 
```

由于所有`components`内容都嵌套在其中，因此我应该为它们`entities`实施`Equals()`和实施吗？`GetHashCode()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:03:21.900

正确意味着为*预期*相等`GetHashCode`的实体返回相同的哈希码。因为两个实体的相等性是通过比较该代码来实现的。

 *另一方面，这意味着对于不相等的实体，必须尽可能*保证*哈希码的唯一性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:39:45.977

[Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)和[GetHashCode](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)的文档很好地解释了这一点，并包含有关值对象实现的具体指导。对于值对象，如果对象类型相同且公共和私有字段相等，则 Equals 为真。但是，这种解释适用于框架值类型，您可以通过覆盖它来自由创建自己的 Equals。

GetHashCode 有两个必须遵守的规则：

> *   如果两个对象比较相等，则每个对象的 GetHashCode 方法必须返回相同的值。但是，如果两个对象比较不相等，则两个对象的 GetHashCode 方法不必返回不同的值。
>     
>     
> *   只要确定对象的 Equals 方法的返回值的对象状态没有修改，对象的 GetHashCode 方法就必须始终返回相同的哈希码。请注意，这仅适用于应用程序的当前执行，并且如果再次运行应用程序，则可以返回不同的哈希码。*

# excel - 工作簿打开时运行 excel add in 并将活动工作簿传递给 add in

> ID：15947015
> 
> 赞同：0
> 
> 时间：2013-04-11T10:59:39.513
> 
> 标签：excel, vba, add-in

需要一些关于运行 excel 插件的建议。我在其中创建了一个 excel 插件，检查用户打开的工作簿并确定用户打开的 excel 是否有代码。这一点工作正常。

但是，我不知道如何将用户打开的工作簿传递给插件并运行插件中的代码。

请帮忙。

谢谢，纳文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:21:15.433

谷歌搜索这个问题为我提供了这个建议使用应用程序事件的综合链接：

[http://www.cpearson.com/excel/AppEvent.aspx](http://www.cpearson.com/excel/AppEvent.aspx)

# powershell - 将格式化的 mac 地址转换为十六进制值

> ID：15947017
> 
> 赞同：1
> 
> 时间：2013-04-11T10:59:40.560
> 
> 标签：powershell, mac-address

我有一个mac地址作为以下格式的字符串：（`xx:xx:xx:xx:xx:xx`六组两个十六进制数字，用冒号分隔）。

我想将字符串转换成它各自的十六进制值（作为一种`System.Byte`类型）。

我怎样才能转换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:15:57.240

这个？

```
 "00:0a:fe:25:af:db" -split ':' | % { [byte]"0x$_" } 
```

评论后编辑：

这个？

```
 [UInt64] "0x$("00:0a:fe:25:af:db" -replace ':')" 
```

# grails - 数据库中的属性

> ID：15947021
> 
> 赞同：2
> 
> 时间：2013-04-11T10:59:48.557
> 
> 标签：grails

我想将属性存储在数据库表中，并在`Config.groovy`. 例如，我想在 Config.groovy 中放入一个默认的电子邮件地址：

```
app.send.report.to = 'me@example.com' 
```

然后能够在数据库表（`key`，`value`列...）中覆盖它。

是否有插件（或 grails 中的功能）来执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:36:16.270

有[动态配置插件](http://grails.org/plugin/dynamic-config)。

它将配置属性存储在 ConfigProperty 域中，并使用以下方式合并来自`Config.groovy`和来自数据库的属性：

> grailsApplication.config.merge(configObject)

您可能想查看插件源代码。如果插件不适合你，你可以实现类似的东西。

当您拥有用于编辑配置属性的 UI 时，此方法很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:23:10.550

Grails 没有我所知道的从数据库中覆盖配置值的功能，但它应该不难做到。在您`Config.groovy`可以输入默认值，然后作为引导过程的一部分，您可以生成一个临时配置文件，其中包含数据库中的值（可以使用对结果的简单查询和迭代来生成该临时文件）。将该临时文件包含为您的 grails 配置位置之一，它将覆盖`Config.groovy`

如果您的目标是拥有一个供多个 grails 应用程序使用的共享配置文件，您还可以考虑使用 Zookeeper 之类的东西来管理共享配置，但这对于单个配置文件来说可能有点矫枉过正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:10:58.353

不完全是您所要求的，但取决于您想要实现的外部配置重新加载插件可能有用。它可以帮助您覆盖默认属性（在运行时），但不能通过使用数据库。

# parsing - Bison 的这种转变/减少冲突从何而来？

> ID：15947023
> 
> 赞同：0
> 
> 时间：2013-04-11T10:59:51.090
> 
> 标签：parsing, bison, lalr, shift-reduce-conflict, jison

我试图通过在 Jison（一个 javascript 解析器）中定义一种非常简单的语言来掌握解析的窍门。它接受与野牛相同/非常相似的语法。

这是我的语法：

```
%token INT TRUE FALSE WHILE DO IF THEN ELSE LOCATION ASSIGN EOF DEREF

%left "+"
%left ">="

/* Define Start Production */
%start Program 

/* Define Grammar Productions */
%%

Program
    : Statement EOF
    ;

Statement
    : Expression
    | WHILE BoolExpression DO Statement
    | LOCATION ASSIGN IntExpression
    ;

Expression
    : IntExpression
    | BoolExpression
    ;

IntExpression
    : INT IntExpressionRest
    | IF BoolExpression THEN Statement ELSE Statement
    | DEREF LOCATION
    ;   

IntExpressionRest
    : /* epsilon */
    | "+" IntExpression
    ;

BoolExpression
    : TRUE
    | FALSE
    | IntExpression ">=" IntExpression
    ;

%% 
```

我得到一个班次/减少冲突。Jison 的输出在这里：

```
Conflict in grammar: multiple actions possible when lookahead token is >= in state 6
- reduce by rule: Expression -> IntExpression
- shift token (then go to state 17)

States with conflicts:
State 6
  Expression -> IntExpression . #lookaheads= EOF >= THEN DO ELSE
  BoolExpression -> IntExpression .>= IntExpression #lookaheads= EOF DO THEN ELSE >= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T00:33:16.260

检测到您的轮班减少冲突，因为`>=`它位于`Expression`非终端的后续集中。这基本上是由于 a`Statement`可以是 a`Expression`并且`IntExpression`可以以 a 结尾`statement`。考虑以下输入`IF c THEN S1 ELSE S2 >= 42`，如果您有括号要消除歧义，则可以将其解释为`(IF c THEN S1 ELSE S2) >= 42`和`IF c THEN S1 ELSE (S2 >= 42)`。由于 shift 优于 reduce，因此将选择后者。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T13:51:12.303

你的问题来自

```
 IF BoolExpression THEN Statement ELSE Statement 
```

如果 THEN 之后的 Statement 包含一个 IF，如何知道 ELSE 是属于第一个 IF 还是第二个 IF？有关更多信息，请参见此处：[http ://www.gnu.org/software/bison/manual/html_node/Shift_002fReduce.html](http://www.gnu.org/software/bison/manual/html_node/Shift_002fReduce.html)

唯一 100% 明确的解决方法是要求在 if/else 语句周围使用某种分隔符（大多数语言使用括号“{”和“}”）。前任，

```
 IF BoolExpression THEN '{' Statement '}' ELSE '{' Statement '}' 
```

# python - 如何查看 django 网站架构

> ID：15947024
> 
> 赞同：0
> 
> 时间：2013-04-11T10:59:58.020
> 
> 标签：python, django

我来自 Ruby on rails 世界。在 Rails 中，有一个名为 schema.rb 的文件。它列出了整个 rails 应用程序的所有表、列及其类型。

无论如何，在 django 中是否可以在一个地方查看整个数据库模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:11:00.303

一个给定应用程序的模型通常位于应用程序的“models.py”模块中。现在 Rails 和 Django 对“应用程序”的定义可能不同。在 Django 中，您有一个由一个或多个（通常是多个）“应用程序”组成的“项目”，尝试使应用程序尽可能独立（因此可能可重用）被认为是一种很好的做法，并且确实有很多可重复使用的应用程序可用，因此将项目的*所有*模型都放在一个 models.py 模块中是很不常见的。

但无论如何：如果您真正想要的是“查看整个数据库模式”，那么最好的解决方案是询问数据库本身，无论您使用什么框架。

# php - 将值从 JQuery .post 传递到 PHP

> ID：15947025
> 
> 赞同：0
> 
> 时间：2013-04-11T11:00:00.653
> 
> 标签：php, jquery

我今天刚开始学习 JQuery，由于某种原因，我无法在提交表单时让这个简单的 $.post 工作。

我想将 2 的值作为星号传递给我的 PHP 页面“update_item.php”。

我添加了一个警报，并看到当我单击提交时它会给我警报，但由于某种原因，2 的值不会传递到 php 页面。

这是我对 JQuery 的看法：

```
$('#form_edit_item').submit(

    function(){     
        alert("submitting");     
        $.post(
        "edititem.php",
            {star: "2"}, 
        );
    }); 
```

这是我在 update_item.php 中的内容：

```
$star = $_POST['star'];
echo "Star value: " .$star. ""; 
```

我究竟做错了什么？非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:06:45.643

```
$.post(url, data, callback, "json"); 
```

[http://docs.jquery.com/Ajax/jQuery.post](http://docs.jquery.com/Ajax/jQuery.post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:22:56.423

您可以使用此代码，

```
 <form action="../handler/AjaxHelper.php" method="POST">

  </form>

 $(document).ready(function() {

            $('form').submit(function() {

                $.ajax({
                    type: this.method,
                    url: this.action,
                    data: $(this).serialize(),
                    success: function(data)
                    {
                        var result = $.parseJSON(data);
                        if (result["messageCode"] == 'success')
                        {
                            alert(result["message"]);
                        }
                        else
                        {
                            alert(result["message"])
                        }
                    },
                    error: function()
                    {
                        alert("Please Try Again");
                    }                        
                });
                return false;
            });
        }); 
```

在***AjaxHelper.php 中***

```
$objLoginHelper = new LoginHelper();
$objLoginHelper = unserialize($_SESSION["LoginInformation"]);
$postDate = date("Y-m-d H:i:s", strtotime($_POST['txtTopicDate']));
$dataTopics = array($_POST['txtTopicSubject'], $postDate, $_POST['ddlCategories'], $objLoginHelper->getUserLoginId());

$result = array();

try {
    $rp = new Repository();
    $rp->SaveForumTopics($dataTopics);
    $result["messageCode"] = "success";
    $result["message"] = "Category Save Successfully";
} catch (Exception $ex) {
    $result["messageCode"] = "error";
    $result["message"] = $ex->getMessage();
}

echo json_encode($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:12:52.480

```
$('#form_edit_item').submit(

function() {
    alert("submitting");
    $.post("update_item.php", {
        star : "2"
    });
}); 
```

去掉后面的逗号`{star : "2"}`。尝试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:13:03.440

你可以使用[ajax](http://api.jquery.com/jQuery.ajax/)

```
 $.ajax({
            type: "POST",
            url: "update_item.php",
            data: {
                star: "2" // or 'star: $('#id').val()', or any other value
            }
        }).done(function( msg ) {
            // do it when its done or do nothing
        }); 
```

`update_item.php`你应该使用类似的东西

```
<?php $star=(isset($_POST['star']) ? $_POST['star'] : '');
echo $star; ?> 
```

如果这不起作用，请尝试更改`POST`为，`GET`以便您可以通过 url 检查传递值 (domain.com/update_item.php?star=2)

# php - Pure Ajax 通过我的工作文件上传发送其他变量

> ID：15947032
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:00:16.897
> 
> 标签：php, javascript, ajax, file, post

有点愚蠢的问题，我使用的是纯 Ajax，所以没有 Json 等。我目前有一个工作文件上传 php 脚本，它获取用户通过使用上传的文件：

```
$_FILES['my_uploaded_file'] 
```

在 Ajax 中，它使用 formdata 变量通过 POST 发送它

但是，我无法弄清楚如何在同一个 Ajax 函数中使用 POST 发送其他变量，例如在我的 PHP 脚本中，我想要类似的东西：

```
$_POST['id'] 
```

任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:06:23.837

您可以尝试调用您的 ajax 页面，如：

```
upload.php?id=[my_id] 
```

或者您在 php 端生成/获取 id。如果是上传图片的用户的 id，您可能可以在您的 ajax 文件中获取它。

# javascript - 命名空间和函数声明类型

> ID：15947034
> 
> 赞同：0
> 
> 时间：2013-04-11T11:00:19.270
> 
> 标签：javascript

我目前正在开始研究现有项目。我们有全局命名空间对象`FOO`和一个帮助器来创建一个漂亮的命名空间：

```
var FOO = FOO || {};
//...
FOO.namespace = function (name) {
    var parts = name.split('.'),
        parent = FOO,
        i;

    // strip redundant leading global
    if (parts[0] === "FOO") {
        parts = parts.slice(1);
    }

    for (i = 0; i < parts.length; i += 1) {
        // create a property if it doesn't exist
        if (typeof parent[parts[i]] === "undefined") {
            parent[parts[i]] = {};
        }
        parent = parent[parts[i]];
    }

    return parent;
}; 
```

因为有许多子模块分布在不同的人正在处理的不同文件中，所以我注意到声明新子模块的不同模式。

### A：直接创建

```
FOO.modulename = {

    someMethod: function (param) {
        // ...
    }
} 
```

### B：直接赋值的本地别名

```
var modulename = FOO.namespace('modulename');
modulename.someMethod = function (param) {
    // ...
} 
```

### C: 对子模块的 Objectliteral 赋值

```
var modulename = FOO.namespace('modulename');
FOO.modulename = {
    someMethod: function (param) {
        // ...
    }
} 
```

现在，A 显然不是正确的方法，但其他选项呢（我想我会发现至少 3 种方法来做到这一点）。他们都实现了相同的目标并且都有效，但是**哪种方法是最“正确”的呢？**

# html - 如何制作影响下一个兄弟元素的悬停效果？

> ID：15947050
> 
> 赞同：1
> 
> 时间：2013-04-11T11:00:59.033
> 
> 标签：html, css

如何使用 CSS 和 HTML 制作这种悬停效果？：

普通视图：

```
---------
Link-1
---------
Link-2
---------
Link-3
--------- 
```

当我悬停 Link-1 时，顶线和底线会改变颜色，如下所示：

```
=========
Link-1
=========
Link-2
---------
Link-3
--------- 
```

如果我将 Link-2 悬停，这两行会发生变化：

```
---------
Link-1
=========
Link-2
=========
Link-3
--------- 
```

等等...

“====”只是表示颜色的变化，而不是双线
我实际上对此很迷茫，但这是我到目前为止得到的：

```
<div id="nav">

                <a href="#" class="dummy">Link-1</a>
                <a href="#" class="dummy">Link-2</a>
                <a href="#" class="dummy">Link-3</a>

</div> 
```

和CSS：

```
#nav{
    width: 200px;
    height: 700px;
    background-color: red;
}
#nav a{
    display: block;
    width: 190px;
    text-decoration: none;
    padding-left: 10px;
    padding-top: 3px;
    margin-bottom: 5px;
    border-top: 1px solid #d5d5d5;
}
#nav a:hover  {
    color: white;
    font-weight: bold;
    border-top: 1px solid white;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:19:43.300

[这是我能想到的最好的纯 CSS 方式](http://jsfiddle.net/6CV7B/3)。

# HTML

```
<ul>
    <li>Link 1</li>
    <li>Link 2</li>
    <li>Link 3</li>
</ul> 
```

# CSS

```
li
{
    padding: 10px;
    border-color: #000;
    border-top: 1px solid;
}

li:last-child
{
    border-bottom: 1px solid;
}

li:hover
{
    border-color: #f00;
}

li:hover + li
{
    border-top-color: #f00;
} 
```

基本上，可悬停元素列表中的每个元素都会获得一个`border-top`. 最后一个元素同时获得 a`border-top`和 a `border-bottom`。当您将鼠标悬停在一个元素上时，您可以直接更改它`border-color`和`border-top-color`它之后的元素。

这种方法相对于其他一些方法的好处是它不需要修改您的 HTML 来使边框以您想要的方式显示。缺点是IE8不支持`:last-child`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T11:05:12.310

这真的取决于你是如何创建线条的。如果它们是 DIV 的顶部边界（根据您的标题猜测），您可以尝试这样的事情；

```
div:hover {
    border-color: blue;
}
div:hover + div { /* the div following the hovered div */
    border-color: blue;
} 
```

演示在[http://jsfiddle.net/frw2n/](http://jsfiddle.net/frw2n/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:07:11.647

对于顶部和底部边框，您可以尝试将链接放在 div 中，并为所有这些 div 赋予相同的类名和样式，如下所示：

```
.classname:hover
{
    border-top:1px dotted blue;
    border-bottom:1px dotted blue;
} 
```

如果我理解正确的话...

希望这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:07:48.167

试试这个：

**标记：**

```
<a href='#'>link1 </a>
<a href='#'>link2 </a>
<a href='#'>link3 </a> 
```

**CSS：**

```
a
{
    padding:20px;
    width:100px;
    border:1px Solid #CCC;
}
a:hover
{
    border:1px Solid Red;
} 
```

看到这个[小提琴](http://jsfiddle.net/mbekA/)

# java - 将字符串转换为 xml 元素 java

> ID：15947051
> 
> 赞同：7
> 
> 时间：2013-04-11T11:01:01.223
> 
> 标签：java, xml

我想将字符串转换为`org.jdom.Element`

```
String s = "<rdf:Description rdf:about=\"http://dbpedia.org/resource/Barack_Obama\">"; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:04:26.330

从字符串解析 XML 的方法不止一种：

[示例 1](http://ideone.com/N4jIO)：

```
 String xml = "Your XML";
  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
  DocumentBuilder db = dbf.newDocumentBuilder();
  Document doc = db.parse(new ByteArrayInputStream(xml.getBytes("UTF-8"))); 
```

[示例 2](https://stackoverflow.com/a/3906936/395659)：

使用可以读取输入源的 SAXParser：

```
 SAXParserFactory factory = SAXParserFactory.newInstance();
 SAXParser saxParser = factory.newSAXParser();
 DefaultHandler handler = new DefaultHandler() {
 saxParser.parse(new InputSource(new StringReader("Your XML")), handler); 
```

请参阅：[SAXParser](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/parsers/SAXParser.html)，[InputSource](http://docs.oracle.com/javase/1.4.2/docs/api/org/xml/sax/InputSource.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:53:51.513

1.  `Document`从您的字符串创建一个。查看 JDOM 常见问题解答：[如何从字符串构造文档？](http://www.jdom.org/docs/faq.html#a0210)
2.  使用方法[`Document.getRootElement()`](http://www.jdom.org/docs/apidocs.1.1/org/jdom/Document.html#getRootElement%28%29)访问根元素。

（您提到了包`org.jdom`，所以我假设您使用 JDOM 1.1。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T11:16:25.820

[我建议您使用来自http://simple.sourceforge.net/](http://simple.sourceforge.net/.With)的简单 XML 框架。使用此框架，您可以轻松地序列化和反序列化您的对象。我希望这些信息对你很重要。

# php - PHP 联系表单中的西里尔字母编码不正确

> ID：15947054
> 
> 赞同：0
> 
> 时间：2013-04-11T11:01:04.293
> 
> 标签：php, forms, character-encoding, contact

我是使用 PHP 和表单的新手，所以如果有人愿意提供帮助，我将非常感激。

我有一个联系表格，但它没有正确发送任何西里尔字符。我知道我必须把`Content-type: text/plain; charset=UTF-8`它放在代码中的某个地方，但我不知道确切地放在哪里。表单元素设置为 post in `UTF-8`，但它似乎无法与 PHP 文件一起正常工作。

```
error_reporting(E_ALL ^ E_NOTICE);

$my_email = "myemailaddress@mail.com";
$from_email = "";
$continue = "index.php";
$errors = array();
// Remove $_COOKIE elements from $_REQUEST.
if (count($_COOKIE)) {
  foreach(array_keys($_COOKIE) as $value) {
    unset($_REQUEST[$value]);
  }
}
// Validate email field.
if (isset($_REQUEST['email']) && !empty($_REQUEST['email']) && !empty($_REQUEST['family']) && !empty($_REQUEST['about'])) {
  $_REQUEST['email'] = trim($_REQUEST['email']);
  if (substr_count($_REQUEST['email'], "@") != 1 || stristr($_REQUEST['email'], " ")) {
    $errors[] = "Email address is invalid";
  } else {
    $exploded_email = explode("@", $_REQUEST['email']);
    if (empty($exploded_email[0]) || strlen($exploded_email[0]) > 64 || empty($exploded_email[1])) {
      $errors[] = "Email address is invalid";
    } else {
      if (substr_count($exploded_email[1], ".") == 0) {
        $errors[] = "Email address is invalid";
      } else {
        $exploded_domain = explode(".", $exploded_email[1]);
        if (in_array("", $exploded_domain)) {
          $errors[] = "Email address is invalid";
        } else {
          foreach($exploded_domain as $value) {
            if (strlen($value) > 63 || !preg_match('/^[a-z0-9-]+$/i', $value)) {
              $errors[] = "Email address is invalid";
              break;
            }
          }
        }
      }
    }
  }
}
// Check referrer is from same site.
if (!(isset($_SERVER['HTTP_REFERER']) && !empty($_SERVER['HTTP_REFERER']) && stristr($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST']))) {
  $errors[] = "You must enable referrer logging to use the form";
}
// Check for a blank form.
function recursive_array_check_blank($element_value) {
  global $set;
  if (!is_array($element_value)) {
    if (!empty($element_value)) {
      $set = 1;
    }
  } else {
    foreach($element_value as $value) {
      if ($set) {
        break;
      }
      recursive_array_check_blank($value);
    }
  }
}
recursive_array_check_blank($_REQUEST);
if (!$set) {
  $errors[] = "You cannot send a blank form";
}
unset($set);
// Display any errors and exit if errors exist.
if (count($errors)) {
  foreach($errors as $value) {
    print "$value<br>";
  }
  exit;
}
if (!defined("PHP_EOL")) {
  define("PHP_EOL", strtoupper(substr(PHP_OS, 0, 3) == "WIN") ? "\r\n" : "\n");
}
// Build message.
function build_message($request_input) {
  if (!isset($message_output)) {
    $message_output = "";
  }
  if (!is_array($request_input)) {
    $message_output = $request_input;
  } else {
    foreach($request_input as $key = > $value) {
      if (!empty($value)) {
        if (!is_numeric($key)) {
          $message_output. = str_replace("_", " ", ucfirst($key)).
          ": ".build_message($value).PHP_EOL.PHP_EOL;
        } else {
          $message_output. = build_message($value).
          ", ";
        }
      }
    }
  }
  return rtrim($message_output, ", ");
}
$message = build_message($_REQUEST);
$message = $message.PHP_EOL.PHP_EOL.
"-- ".PHP_EOL.
"Thank you for using the contact form.";
$message = stripslashes($message);
$subject = $_REQUEST['about'];
$subject = stripslashes($subject);
if ($from_email) {
  $headers = "From: ".$from_email;
  $headers. = PHP_EOL;
  $headers. = "Reply-To: ".$_REQUEST['email'];
} else {
  $from_name = "";
  if (isset($_REQUEST['name']) && !empty($_REQUEST['name'])) {
    $from_name = stripslashes($_REQUEST['name']);
  }
  $headers = "From: {$from_name} <{$_REQUEST['email']}>";
}
mail($my_email, $subject, $message, $headers); ?> 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<html>
  <head>
    <title>Your mail has been sent!</title>
    <meta http-equiv="Content-Type" content="text/html; charset = utf - 8 ">
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
  </head>
  <body>
    <div>
      <center>
        <b>Thank you <?php if(isset($_REQUEST['name'])){print stripslashes($_REQUEST['name']);} ?></b>
        <br>Your mail has been sent!
        <p><a href="<?php print $continue;?>">Click here to continue</a></p>
      </center>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:05:23.217

Добави това:

```
 $headers = "From: " . $from_email;
    $headers .= PHP_EOL;
    $headers .= "Reply-To: " . $_REQUEST['email'];
    //новия код (new code)
    $headers .= "MIME-Version: 1.0"."\r\n" ."Content-type: text/plain; charset='utf-8'". "\r\n"; 
```

Няма да е лошо да сложиш и някаква форма на верификация (картинка с код примерно, който трябва да се въведе, т.нар. CAPTCHA code) преди пращане от юзера, иначе всеки спам бот ще ти ползва формата за пращане на мейли, порови тук има доста начини за справяне с проблема。

翻译：（在发送电子邮件之前放置某种验证码，其中包含代码的图像，所谓的 CAPTCHA 是不错的主意，因为否则来自互联网的每个垃圾邮件机器人都会使用您的表单进行邮寄，请在此处查看更多解决问题的方法。）

# c - HMAC-MD5 使用 openSSL

> ID：15947057
> 
> 赞同：0
> 
> 时间：2013-04-11T11:01:17.660
> 
> 标签：c, openssl, md5, ntlm, hmac

我正在尝试研究 NTLMv2 响应，[Eric Glass 的工作](http://davenport.sourceforge.net/ntlm.html#theNtlmv2Response)。
但卡在 HMAC-MD5 部分。（使用这样的[功能](https://stackoverflow.com/questions/13555962/md5-hmac-with-openssl)）

我得到了正确的 NTLM 哈希，以及 unicode 用户名和域。
（他只强调“USERDOMAIN”，没有强调用户名，所以我猜是“USER”）

```
unsigned char v1hash[16];  // "0xcd06ca7c7e10c99b1d33b7485a2ed808"
unsigned short udata[14];
// concated unicode USER+USERDOMAIN "0x550053004500520044004f004d00410049004e00"
unsigned char v2hash[16];
int iLen;

HMAC(EVP_md5(), v1hash, 16, udata, sizeof(udata), v2hash, &iLen); 
```

但结果是：

```
v2hash(16): 23 d2 3c a4 dd 1a 20 81 35 cf 3a 42 1c e1 5a 17 
```

这应该是“0x04b8e0ba74289cc540826bab1dee63ae”

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:21:54.640

我不是 C 程序员，但...

从我对那篇文章的阅读来看，USERDOMAIN 应该是这样的——不是 USER+USERDOMAIN，即大写的用户名 =“USER”与目标 =“DOMAIN”相结合，给出 USERDOMAIN，它给出了以 55005300 开头的 unicode 字节......

然后看起来你的 udata 数组的大小是错误的。您只处理 20 个字节的信息，因此不要将数组设置为 28，否则 HMAC/MD5 函数将在输入数组的末尾处理额外的随机数据。

# c# - 从另一个命名空间中的页面访问用户控件

> ID：15947059
> 
> 赞同：0
> 
> 时间：2013-04-11T11:01:22.410
> 
> 标签：c#, asp.net, oop

我的问题似乎很简单，但我找不到解决方案。

我有一个 aspx 如下：

```
namespace WebApplication3.asp_x
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

和 ascx 如下：

```
namespace WebApplication3.asc_x
{
    public partial class WebUserControl1 : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public LinkButton lbTest
        {
            get {
                return this.lbTest;
            }
        }
    }
} 
```

从 aspx 文件中，我想访问公共属性 lbTest 并执行以下操作，但它不起作用（它无法编译）

```
namespace WebApplication3.asp_x
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            LinkButton lb = WebApplication3.asc_x.WebUserControl1.lbTest;
        }
    }
} 
```

谁能告诉我这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:13:34.247

您必须实例化（创建一个新对象）用户控件）。

例子：

```
LinkButton lb = (new WebApplication3.asc_x.WebUserControl1()).lbTest; 
```

或类似的东西。除非它已经是您页面上的控件；然后只需使用服务器 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:06:56.943

使用用户控件的**ID**访问任何属性。
给定的 Id 实际上是codebehind**中****用户控件的实例名称**。

 **它不是像 WebApplication3.asc_x.WebUserControl1.lbTest 这样访问的静态属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:09:19.233

我认为这是一个奇怪的电话

```
LinkButton lb = WebApplication3.asc_x.WebUserControl1.lbTest; 
```

因为您将需要一个实例来调用它的标签。

就像如果您`usercontrol`在页面上只有一个实例，那么您可以将其称为公共财产。

```
namespace WebApplication3.asp_x
{
   public partial class _Default : System.Web.UI.Page
   {
      protected void Page_Load(object sender, EventArgs e)
      {
        WebApplication3.asc_x.WebUserControl1 ob=new WebApplication3.asc_x.WebUserControl1();
        LinkButton lb = ob.lbTest;
      }
   }
} 
```

## 编辑 1

您需要先找到第`placeholer`一个
然后找到`user-control`就地hoder
然后找到链接按钮。

`p1`假设你的页面中有一个占位符
查找如下

```
PlaceHolder p=(PlaceHolder)Page.FindControl('p1'); 
```

然后在占位符 p 中找到用户控件，如下
所示假设您`uc1`在占位符中有用户控件。

```
UserContro1 uc1=(UserControl1)p.FindControl("uc1"); 
```

然后你可以找到这个里面的链接
As this

```
LinkButton lb = uc1.lbTest; 
```**

# php - ajax 使用 php 和 mysql 获取和插入

> ID：15947060
> 
> 赞同：0
> 
> 时间：2013-04-11T11:01:32.287
> 
> 标签：php, mysql, ajax

我有一个页面，上面有一个表单，当我单击页面上的一个按钮时，它通过 javascript 调用将 3 个变量发送到一个层（page_ref、template_ref 和 box_id）。

然后使用 ajax 从 mysql 数据库中获取一些带有变量的内容，并将其插入图层上的文本区域。

该图层有一个保存按钮，当我单击该按钮时，我想将 textarea 的内容保存回数据库。

我可以从数据库填充文本区域没问题，但是在推回数据库时遇到问题。

我遇到的问题是将 javascript 变量发送到 ajax 更新页面，因为它们需要传递给 php 变量。

这就是我所拥有的

在主页上，我调用了一个 javascript 函数

```
 edit_box('show',i,'<? echo $page_ref; ?>','<? echo $template_ref; ?>'); 
```

在层我有这个

```
<style type="text/css">
 #popupbox
  { 
   padding:0;
   width: 99%;
   height: auto;
   margin: 0px auto;    
   position:absolute;
   background: #FBFBF0; 
   border: solid #000000 2px; 
   z-index: 9000; 
   font-family: arial; 
   visibility: hidden; 
  }
</style>

<script type="text/javascript" src="http://js.nicedit.com/nicEdit-latest.js"></script>
<script>
 //Browser Support Code
 function get_edit_content(box_id,page_ref,template_ref)
   {
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("edit_content").innerHTML=xmlhttp.responseText;
    var area1 = new nicEditor({fullPanel : true}).panelInstance("edit_content",{hasPanel : true});  
    }
  }

  var queryString = "?box_id=" + box_id + "&page_ref=" + page_ref + "&template_ref=" + template_ref;

  xmlhttp.open("GET","get_content.php" + queryString,true);
  xmlhttp.send();
 }

 $("#sub").click( function() 
  {
     $.post( $("#myForm").attr("action"), 
     $("#myForm :input").serializeArray(), 
     function(info)
       { 
        $("#result").html(info); 
       });
    clearInput();
   });

$("#myForm").submit( function() 
  {
    return false;   
  });

 function clearInput() 
   {
$("#myForm :input").each( function() 
      {
    $(this).val('');
  });
    }     

function edit_box(showhide,box_id,page_ref,template_ref)
  {
   if(showhide == "show")
      { 
    get_edit_content(box_id,page_ref,template_ref);
       document.getElementById('popupbox').style.visibility="visible";
      }
    else if(showhide == "hide")
      {
        document.getElementById('popupbox').style.visibility="hidden";      
      } 
   }  
</script>

 <div id="popupbox">
   <form id="myForm" action="update_textarea.php" method="post"> 
    <input type="hidden" name="page_ref" value="<? echo $page_ref; ?>" />
    <input type="hidden" name="template_ref" value="<? echo $template_ref; ?>" />
    <input type="hidden" name="box_id" value="<? echo $box_id; ?>" />
    <textarea name="edit_content" id="edit_content"  style="width: 500px; height:500px;"></textarea>
    <center><a href="javascript:edit_box('hide');">close</a></center> 
    <button id="sub">Save</button>
   </form>
</div> 
```

然后我有 get_contents 页面

```
<?php   
include("connect.php"); 
$page_ref = $_GET['page_ref'];  
$template_ref = $_GET['template_ref'];
$box_id = $_GET['box_id'];

$sql = "SELECT * FROM site_content WHERE page_ref='$page_ref' AND template_ref='$template_ref' AND box_id='$box_id' AND box_type='text'";  
$result = mysql_query($sql);  
while($row=mysql_fetch_array($result))  
 {  
  echo "<p>".$row['content']."</p>";  
 }  
?> 
```

最后是 update_textarea 页面

```
<?
include("connect.php"); 
$page_ref = $_POST['page_ref'];  
$template_ref = $_POST['template_ref'];
$box_id = $_POST['box_id'];
$edit_content = $_POST['edit_content']; 
if(mysql_query("UPADTE site_content SET content='$edit_content' WHERE page_ref='$page_ref' AND template_ref='$template_ref' AND box_id='$box_id' AND box_type='text'"))
 {
   echo "Successfully Inserted";
 }
else
 {
  echo "Insertion Failed";
 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:45:37.210

我意识到我需要在 ajax 调用之后设置隐藏输入的值

```
 document.getElementById("edit_content").innerHTML=xmlhttp.responseText; 
```

通过添加

```
 document.getElementById("box_id").value = box_id; 
```

ETC

# javascript - 如何使用 jQuery 创建具有不同对象的圆形动画？

> ID：15947070
> 
> 赞同：4
> 
> 时间：2013-04-11T11:02:16.250
> 
> 标签：javascript, jquery, html, animation, geometry

如何使用 jQuery 创建具有不同对象的圆形动画。我已经尝试过自己，但问题是我的脚本运行不顺畅。

我想要这个动画，但以流畅的方式：

![在此处输入图像描述](https://i.stack.imgur.com/TFmhp.jpg)

**努力**：http: [//jsfiddle.net/eT7SD/](http://jsfiddle.net/eT7SD/)

html代码

```
<div id="apDiv1"><p><img src="http://4.bp.blogspot.com/_UkDBPY_EcP4/TUr43iCI-FI/AAAAAAAADR0/o9rAgCt9d-U/s1600/1242796868203109724Number_1_in_green_rounded_square_svg_med.png"  width="200" height="115" id="img-1"/></p></div>
<div id="apDiv2"><p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRZv4hqGcyV6OqP0hI3uAiQVwHHgPuqcTl2NppFRyvbxXLVokbs"  width="200" height="115" id="img-2"/></p></div>
<div id="apDiv3"><p><img src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQaplzZIaF-uTQKnvfK9N9i-Rg27F6aHtSchQZaGR-DITgO1bDwzA"  width="200" height="115" id="img-3"/></p></div>
<div id="apDiv4"><p><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQjTbe5WfEnT840gIChKfbzlVnoPPoZsyrT4zjMReym9YpsRdOFvA"  width="200" height="115" id="img-4"/></p></div>
<div id="apDiv5"><p><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRWtiMAcxGe-RQw2gRwUUiyB5aRTMeVMG5LSCPF0Qpzes-USpgyTw"  width="200" height="115" id="img-5"/></p></div>
<div id="apDiv6"><p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXDhOygDcNsNVsv0eIXLYdBx4C-tmedIRhFfxGlCoCfNy04YU_"  width="200" height="115" id="img-6"/></p></div>
<div id="apCenterDiv"><img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcR42cgsKsYMWey79jT0XsTkMOyxc9oej9fVt-udxQvnVFOadpPQ"  width="200" height="115" /></div> 
```

CSS代码

```
<style type="text/css">
#apCenterDiv {
    position:absolute;
    width:200px;
    height:115px;
    z-index:1;
    left: 571px;
    top: 209px;
}
#apDiv1 {
    position:absolute;
    width:200px;
    height:115px;
    z-index:2;
    left: 570px;
    top: 4px;
}
#apDiv2 {
    position:absolute;
    width:200px;
    height:115px;
    z-index:3;
    left: 821px;
    top: 134px;
}
#apDiv3 {
    position:absolute;
    width:200px;
    height:115px;
    z-index:4;
    left: 822px;
    top: 328px;
}
#apDiv4 {
    position:absolute;
    width:200px;
    height:115px;
    z-index:5;
    left: 572px;
    top: 385px;
}
#apDiv5 {
    position:absolute;
    width:200px;
    height:115px;
    z-index:6;
    left: 319px;
    top: 329px;
}
#apDiv6 {
    position:absolute;
    width:200px;
    height:115px;
    z-index:7;
    left: 319px;
    top: 135px;
}
</style> 
```

脚本

```
<script>
$(document).ready(function(e) {

      setInterval(function() {

        var imgfirstSrc = $("#img-1").attr("src");
        var imgSecSrc = $("#img-2").attr("src");
        var imgthirdSrc = $("#img-3").attr("src");
        var imgfourthSrc = $("#img-4").attr("src");
        var imgfifthSrc = $("#img-5").attr("src");
        var imgsixthSrc = $("#img-6").attr("src");

        $("#img-2").attr("src",imgfirstSrc);
        $("#img-3").attr("src",imgSecSrc);
        $("#img-4").attr("src",imgthirdSrc);
        $("#img-5").attr("src",imgfourthSrc);
        $("#img-6").attr("src",imgfifthSrc);
        $("#img-1").attr("src",imgsixthSrc);

      },1000);
});
</script> 
```

**编辑**

我必须添加更多带有点击/停止事件的动画。当用户点击 270 的红色图像位置时，他们必须替换 90 的位置，动画将停止；如需更多说明，您必须查看下图。我已经尝试过`@Cristi Pufu`代码，但我想要更多修改

努力 [http://jsfiddle.net/SaNtf/](http://jsfiddle.net/SaNtf/)

![在此处输入图像描述](https://i.stack.imgur.com/P9nco.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T12:14:22.323

使用`jQuery Animation`：http: [//jsfiddle.net/eT7SD/6/](http://jsfiddle.net/eT7SD/6/)

使用`math`和`jQuery`：http: [//jsfiddle.net/eT7SD/7/](http://jsfiddle.net/eT7SD/7/)

使用`CSS3 Rotation`（只是为了好玩）：http: [//jsfiddle.net/dMnKX/](http://jsfiddle.net/dMnKX/)

只需在您的动画中添加一个“`class`框”，然后使用它：`divs``fiddle``js`

```
$(document).ready(function(e) {

    var animate = function(){

        var boxes = $('.box');

        $.each(boxes, function(idx, val){

            var coords = $(boxes[idx+1]).position() || $(boxes[0]).position();

            $(val).animate({

                "left" : coords.left,
                "top" : coords.top

            }, 1500, function(){})   

        });
    }

    animate();

    var timer = setInterval(animate, 2000);  
}); 
```

**编辑**：

```
$(document).ready(function(e) {
    var angles = [90, 45, 315, 270, 225, 135];
    var unit = 215;

    var animate = function(){

        $.each($('.box'), function(idx, val){

            var rad = angles[idx] * (Math.PI / 180);
            $(val).css({
                left: 550 + Math.cos(rad) * unit + 'px',
                top: unit * (1 - Math.sin(rad))  + 'px'
            });

            angles[idx]--;
        });

    }
    var timer = setInterval(animate, 10);

}); 
```

您必须更改框的`left`, `top`, `width`,属性，对其进行标准化，设置正确的( ) 和初始。但是对于预览，我认为这就是您想要的（只需要多做一点工作）。`height``unit``circle radius``angles`

示例：http: [//jsfiddle.net/eT7SD/7/](http://jsfiddle.net/eT7SD/7/)

角度的视觉理解：

![圆角](https://i.stack.imgur.com/HOq7o.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T11:32:08.313

只需使用 CSS3 旋转图像：

html

```
<div id='container'>
... (all your images here)
</div> 
```

javascript:

```
<script type='text/javascript'>
window.myRotation=0;
$(document).ready(function(e) {
      setInterval(function() {
        $("#container").css("transform","rotate(" + window.myRotation + "deg)");
        $("#container").css("-ms-transform","rotate(" + window.myRotation + "deg)");
        $("#container").css("-webkit-transform","rotate(" + window.myRotation + "deg)");
        window.myRotation +=20;
      },50);
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:41:32.883

好吧，我尝试了一些东西，我认为它可以工作
**注意：** *这不是完整的代码，只是它如何工作的示例*

小提琴：http : [//jsfiddle.net/Spokey/eT7SD/2/](http://jsfiddle.net/Spokey/eT7SD/2/)
**新小提琴** [http://jsfiddle.net/Spokey/eT7SD/3/（6](http://jsfiddle.net/Spokey/eT7SD/3/)张图片）

我用了 。`position()`从 jQuery 获取`div1 - div6`.
然后使用`.animate()`.

[http://api.jquery.com/position/](http://api.jquery.com/position/)
[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

**HTML**

```
<img src="http://4.bp.blogspot.com/_UkDBPY_EcP4/TUr43iCI-FI/AAAAAAAADR0/o9rAgCt9d-U/s1600/1242796868203109724Number_1_in_green_rounded_square_svg_med.png"  width="200" height="115" id="img-1"/>
<img src="http://4.bp.blogspot.com/_UkDBPY_EcP4/TUr43iCI-FI/AAAAAAAADR0/o9rAgCt9d-U/s1600/1242796868203109724Number_1_in_green_rounded_square_svg_med.png"  width="200" height="115" id="img-2"/>
<div id="apDiv1"></div>
<div id="apDiv2"></div>
<div id="apDiv3"></div>
<div id="apDiv4"></div>
<div id="apDiv5"></div>
<div id="apDiv6"></div>
<div id="apCenterDiv"></div> 
```

**JavaScript**

```
$(document).ready(function(e) {
      var i = 1;
        var j = 2;
      setInterval(function() {
          if(i===7){i=1;}
          if(j===7){j=1;} 
          var divd = $("#apDiv"+i).position();
          var divds = $("#apDiv"+j).position();
          $("#img-1").stop().animate({left:(divd.left), top:(divd.top)});
          $("#img-2").stop().animate({left:(divds.left), top:(divds.top)});
          i++;j++;
      },1000);
}); 
```

# android - 滚动视图没有响应

> ID：15947071
> 
> 赞同：1
> 
> 时间：2013-04-11T11:02:17.257
> 
> 标签：android

在我的应用程序的一个屏幕中，我有一个没有响应手势的 ListFragment。在其他屏幕中，我的 ListFragments 表现得恰到好处 - 根据触摸上下移动。但是这个实例不会响应手势而移动。我尝试将高度设置为特定的倾角，将 ListFragment 包含在 ScrollView 中，但没有任何效果。日志证明列表中有 3 个条目，但只有第一个和第二个的一半可见。我可以从列表中选择第一个条目。

xml如下。由“android:name="com.chex.control.LabelList"”标识的内部片段不滚动。

有没有人遇到过这个问题并解决了？

谢谢

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/new_interval_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="New Interval" />

        <EditText
            android:id="@+id/days_in_interval"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="days in interval"
            android:inputType="number"
            android:singleLine="true" />

        <EditText
            android:id="@+id/goodi_goal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="goodi goal"
            android:inputType="number"
            android:singleLine="true" />

        <LinearLayout
            android:id="@+id/label_selector"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <LinearLayout
                android:id="@+id/default_label_pane"
                android:layout_width="0px"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Default Labels" />

                <ScrollView
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:scrollbars="vertical" >

                    <fragment
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:id="@+id/default_labels_fragment"
                        android:name="com.chex.control.LabelList"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="@android:color/white"
                        android:focusable="true" >
                    </fragment>
                </ScrollView>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/add_remove_label_selector"
                android:layout_width="0px"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical" >

                <Button
                    android:id="@+id/add_label_button"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Add" />

                <Button
                    android:id="@+id/remove_label_button"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Remove" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/label_pane"
                android:layout_width="0px"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Inteval Labels" />

                <fragment
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/interval_labels_fragment"
                    android:name="com.chex.control.IntervalLabelList"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:focusable="true" >
                </fragment>

                <EditText
                    android:id="@+id/new_label"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:hint="new label"
                    android:inputType="text"
                    android:singleLine="true" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/keep_discard_button_layout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/keep_interval_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Keep" />

            <Button
                android:id="@+id/discard_interval_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Discard" />
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

这是片段 .java

```
package com.chex.control;

import java.util.ArrayList;

import com.chex.R;
import com.chex.storage.Child;
import com.chex.storage.DatabaseConstants;
import com.chex.storage.DatabaseHelper;
import com.chex.storage.DatabaseIO;
import com.chex.storage.Label;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.support.v4.app.ListFragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;

/**
 * presents all the labels on the device.
 */
public class LabelList extends ListFragment implements DatabaseConstants,
        GoodiList {

    private final String TAG = "LabelList";

    ArrayAdapter<Label> adapter = null;

    private ListParent parentActivity;

    private Label[] values;

    private Label currentItem;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.e(TAG, "on Create");
        ArrayList<Label> labelList = Label.getLabelsForInterval();

        Log.i(TAG,labelList.size()+" labels");
        // adapter = new IntervalListAdapter(getActivity(), values);

        adapter = new IntervalListAdapter(getActivity(), labelList);

        setListAdapter(adapter);

        Log.e(TAG, "finished on Create");
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.Fragment#onActivityCreated(android.os.Bundle)
     */
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        LongClickListener longClickListener = new LongClickListener();

        getListView().setOnItemLongClickListener(longClickListener);
    }

    /**
     * create and return a CursorLoader that will take care of creating a Curso
     * for the data being displayed.
     */

    /**
     * this used to delete. However, we need it to select usually. Now delete is
     * done by long click.
     */
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        // delete child - remove child from list and database
        Object item = l.getItemAtPosition(position);

        currentItem = (Label) item;

        Log.e(TAG,
                "selected " + currentItem.getLabel() + " id: "
                        + currentItem.getId() + " at position " + position);

        parentActivity.listItemSelected(this, position, currentItem.getId());

    }

    /**
     * Forces cursor to requery database and list to be update. Used when a new
     * child is entered in parent activity's EditText field.
     */
    public void notifyDataChanged() {

        Log.e(TAG, "told adapter that data changed");

        adapter.notifyDataSetChanged();
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.Fragment#onAttach(android.app.Activity)
     */
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        parentActivity = (ListParent) activity;

        parentActivity.setList(this);

    }

    class LongClickListener implements OnItemLongClickListener {

        public boolean onItemLongClick(AdapterView<?> adapterView, View view,
                int position, long id) {
            // delete child - remove child from list and database

            // adapter view. Can always call parent's getItemAtPosition
            final Object item = adapterView.getItemAtPosition(position);

            final Label label = (Label) item;

            final String name = label.getLabel();

            Log.e(TAG, "selected " + name + " at position " + position
                    + " now we'll delete them");

            // make sure user wants to delete
            AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());

            alert.setTitle("Delete " + name + "?");

            alert.setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            Label.deleteLabel(name);

                            adapter.remove(label);

                            // update the list
                            notifyDataChanged();

                        }
                    });

            alert.setNegativeButton("No",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {

                            // nothing happens - child remains

                        }
                    });

            alert.show();

            return true;
        }

    }

    @Override
    public void addListItem(int itemId) {
        Label labelToAdd = Label.lookupLabel(itemId);

        if (labelToAdd == null) {
            Log.e(TAG, "didn't find a label for label id " + itemId);

        } else {
            Log.e(TAG, "adding label: " + labelToAdd.getLabel() + "  "
                    + labelToAdd.getId() + "  id argument: " + itemId);

            // breaks because the adapter is currently strings
            adapter.add(labelToAdd);

            notifyDataChanged();
        }
    }

    @Override
    public void removeListItem(int itemId) {
        // TODO Auto-generated method stub

    }

    @Override
    public void removeListItem() {
        // TODO Auto-generated method stub

    }

    @Override
    public void highlightListIndex(int index) {
        ListView listView = getListView();
        listView.setItemChecked(index, true);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:08:40.997

在滚动视图中滚动视图的android并不是最好的，就像你的情况一样。你必须尽量避免这种情况，尽量修改布局来避免这些冲突。

a** 方法的一个痛点是拦截父级的触摸事件（也添加一个手势侦听器）并在用户在 listfragment 上滚动时将事件传递给 listfragment（您必须知道内部片段的坐标屏幕等）。这听起来容易得多，之后会导致很多问题，所以我建议改写你的布局。

# java - REST API Url 中的额外查询参数

> ID：15947074
> 
> 赞同：9
> 
> 时间：2013-04-11T11:02:21.833
> 
> 标签：java, web-services, api, rest, resteasy

在我的 Rest 应用程序中，资源 url 还支持 pageSize、pageNum、name 等查询参数。所以请求 url 看起来像

**/resource/{id}?pageNum=1&pageSize=25&desc="hello"**

现在假设客户端添加了一个额外的查询参数，比如我的服务器不支持的“lang”

**/resource/{id}?pageNum=1&pageSize=25&desc="hello"&lang="eng"**，但我的服务器不支持任何**lang**参数。

什么应该是最好的设计决策

选项 1：忽略额外的无效查询参数并提供请求。

选项 2：向客户端抛出错误的请求消息。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T17:06:45.333

毫无疑问，客户必须遵守 Api 文档。

但是 API 中的某些更改呢（只是不涉及迁移到新 API 版本的小更改）

比如说一个API资源：/dummy/api/Iid1支持3个查询参数，即a、b、c

所以完整的 URi : /dummy/api/Id1?a=1&b=20&c=45 是 API 公开的有效请求，所有查询参数，即 a、b、c 都是可选参数，即如果这些参数不存在在请求中，然后服务器将它们处理为一些默认值，例如 a = 0, b = 0, c= 0

一段时间以来，大量客户端基于上述 URL 方案构建他们的应用程序。

现在 API 提供者想要取消参数“b”并决定在额外/未知参数上抛出异常

这意味着所有客户端应用程序围绕最后一个涉及参数“b”的 URL 方案构建将失败！

这只是表明，为额外/未知的查询参数抛出异常总是会导致客户端和服务器问题的紧密耦合，我猜这完全违反了 REST 原则，这可能有一个中心主题是“完全分离客户端和服务器问题，因此两者都可以单独发展'

所以我认为只有丢失/无效的“强制”参数应该抛出异常，而不是选项，永远不会。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T11:10:01.233

忽略它。大多数其他 Web 服务器会忽略它不理解的请求参数。

谷歌在这里忽略我的两个额外参数 [https://www.google.com/#q=search+for+something&invalid=param&more=stuff](https://www.google.com/#q=search+for+something&invalid=param&more=stuff)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-03T17:38:38.467

我想忽略错误参数是标准做法，但在很多情况下对我来说似乎完全错误。

假设我有一个带有小部件集合端点的小部件 API，它可以找到小部件。小部件具有 foo 属性，因此以下搜索 foo = bar 的小部件

```
GET https://example.com/widgets?foo=bar 
```

现在一个 API 客户端打错了。

```
GET https://example.com/widgets?foi=bar 
```

不是只返回 foo = bar 的小部件，而是默默地忽略拼写错误并返回所有小部件（适当地限制为某个默认大小，因为我制作了精心设计的 API）。我的 API 客户端可能会花费数小时试图弄清楚为什么她的电话不起作用，或者更有可能点亮我的支持站点，想知道为什么我的 API 很糟糕。

返回 400 状态并显示错误消息指出“foi”不是可识别的参数不是更好吗？这似乎尤其正确，因为对于请求正文中的同类错字，最佳行为是返回 400。（例如，请参阅此答案：[https](https://stackoverflow.com/a/20686925/2716301) ://stackoverflow.com/a/20686925/2716301 ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:59:37.697

忽略它是常见的模式，但查询参数也是 URL（资源 id）的一部分，这种请求的正确响应代码是 404 Not Found。

没有通用的设计模式。您必须问自己什么对您的用户最有利。更好地告诉他们他们所要求的资源没有以他们需要的格式提供，或者只是给他们另一种资源？

**笔记**

> HTTP 包含很好的语言处理机制；请参阅 Accept-Language 和 Content-Language 标头（所有浏览器都在使用它）

# streaming - 点对点媒体传输

> ID：15947075
> 
> 赞同：0
> 
> 时间：2013-04-11T11:02:22.837
> 
> 标签：streaming, media, pjsip

断言失败：（池 && src），函数 pjmedia_codec_param_clone，文件 ../src/pjmedia/codec.c，第 53 行。中止陷阱：6

如何解决这个问题，当我试图从 pjsip-apps 运行 streamutil.c 文件时

# sql - 手动运行的 SQL XML 解析存储过程，而不是通过 SQL Server 代理运行

> ID：15947080
> 
> 赞同：1
> 
> 时间：2013-04-11T11:02:34.647
> 
> 标签：sql, sql-server, xml, xml-parsing, sql-server-agent

存储过程正在手动运行，但不会使用 SQL Server 代理运行。

**我收到以下错误**

> 以用户身份执行：XXX。XML 解析：第 9 行，第 9 个字符，输入意外结束 [SQLSTATE 42000]（错误 9400）。步骤失败。

存储过程从 Web 查询中获取 xml，将其放入临时表的单个单元格中。解析临时表中的数据，并将新的易于阅读的信息放入永久表中。我需要查询每天运行并获取当天的数据。

我试过查找这个问题，但我唯一的线索是 XML 正在某处被切碎。我不知道为什么这只会发生在一份工作上。

你能提供的任何帮助都会很棒。

谢谢

EDIT1：我已将程序分为 7 个不同的步骤。这是它跌倒的步骤。

`INSERT XMLData(XMLD) SELECT CAST(HTML AS XML) As XMLData FROM TextData`

EDIT2：这是代码

```
DECLARE 

@url varchar(2048),
@win integer,
@hr integer ,
@text varchar(MAX),
@XMLdata XML,
@Date date,
@SearchDate nvarchar(50) 

Set @Date = GETDATE()

set @SearchDate = CAST(@Date as nvarchar(50))

set @SearchDate = REPLACE(@SearchDate,'-','')

--set @SearchDate='20130405'

/*-- Create Temporary tables to be used to store the xml data--*/
/*-- We need 2 tables as the raw data from SEMO is Unicode 'UTF-8' but SQL only handles 'UTF-16'--*/
/*-- We must therefore store the data first as Text and then CAST it to XML datatype for easy querying later --*/
CREATE TABLE #TextData(HTML text NULL)
CREATE TABLE #XMLData(XMLD xml NULL)

/*-- This url will have to be dynamically generated each day based on GetDate() query or similiar - to be cracked out fully - random date picked for now--*/
Select @url = 'http://.......'

/* Use OLE Automation Objects to go out and get the data--*/    
EXEC @hr=sp_OACreate 'WinHttp.WinHttpRequest.5.1',@win OUT 
IF @hr <> 0 EXEC sp_OAGetErrorInfo @win 

EXEC @hr=sp_OAMethod @win, 'Open',NULL,'GET',@url,'false'
IF @hr <> 0 EXEC sp_OAGetErrorInfo @win 

EXEC @hr=sp_OAMethod @win,'Send'
IF @hr <> 0 EXEC sp_OAGetErrorInfo @win 

INSERT #TextData(HTML)
EXEC @hr=sp_OAGetProperty @win,'ResponseText'
IF @hr <> 0 EXEC sp_OAGetErrorInfo @win

EXEC @hr=sp_OADestroy @win 
IF @hr <> 0 EXEC sp_OAGetErrorInfo @win 

/*-- Now CAST the text data to XML data type which makes it much easier to query back--*/
INSERT #XMLData(XMLD)
SELECT CAST(HTML AS XML) As XMLData FROM #TextData

/*-- WE NEED TO ADD IN A SECTION HERE NOW TO PARSE THE XML DATA AND EXTRACT THE INFO WE NEED INTO A DEDICATED TABLED--*/

/*-- Replace the : in the #XMLData table with _ as the colons were causing errors --*/
UPDATE #XMLData
SET XMLD = REPLACE(CAST(XMLD as varchar(max)),':' ,'_')
FROM #XMLData
WHERE CHARINDEX(':' ,CAST(XMLD as varchar(max)))>0

UPDATE #XMLData
SET XMLD = REPLACE(CAST(XMLD as varchar(max)),'DataSet xmlns="http_//localhost/SemoReporting/SemoAutomatedDataCollection/Datasets"' ,'DataSet')
FROM #XMLData
WHERE CHARINDEX('DataSet xmlns="http_//localhost/SemoReporting/SemoAutomatedDataCollection/Datasets"' ,CAST(XMLD as varchar(max)))>0

Select @XMLdata = XMLD
FROM #XMLData

/*-- This is to show the colons have been replaced --*/
SELECT * FROM #XMLData

Declare @i as int
set @i = 1

While @i < 97
BEGIN
/*Insert Data into SEMO Historical Table*/

INSERT INTO XMLParsing.dbo.T1301_SEMO_HISTORICAL_DATA 
/*-- This selects the relevant data from table1 element --*/
SELECT
a.b.value('Table1[sql:variable("@i")][1]/CURRENCY_FLAG[1]','nvarchar(50)') AS [Currency],
a.b.value('Table1[sql:variable("@i")][1]/TRADE_DATE[1]','date') AS [Trade Date],
a.b.value('Table1[sql:variable("@i")][1]/DELIVERY_DATE[1]','date') AS [Delivery Date],
a.b.value('Table1[sql:variable("@i")][1]/DELIVERY_HOUR[1]','int') AS [Delivery Hour],
a.b.value('Table1[sql:variable("@i")][1]/DELIVERY_INTERVAL[1]','int') AS [Delivery Interval],
a.b.value('Table1[sql:variable("@i")][1]/RUN_TYPE[1]','nvarchar(50)') AS [Run Type],
a.b.value('Table1[sql:variable("@i")][1]/SMP[1]','decimal(10,4)') AS [SMP],
a.b.value('Table1[sql:variable("@i")][1]/LAMBDA[1]','decimal(10,4)') AS [Lambda],
a.b.value('Table1[sql:variable("@i")][1]/SYSTEM_LOAD[1]','decimal(10,4)') AS [System Load],
a.b.value('Table1[sql:variable("@i")][1]/CMS_TIME_STAMP[1]','nvarchar(150)') AS [CMS Time Stamp]
FROM @XMLdata.nodes('DataSet/diffgr_diffgram/EA_RESULTS') a(b)
--where 
--not exists (Select * from SEMO_Historical_Data where [Trade Date] = @Date)
set @i=@i+1
END

Drop Table #TextData
Drop Table #XMLData 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T14:34:18.803

只是一个更新。这不能正常工作的原因是从站点获取的 XML 被截断了。我从来没有完全弄清楚为什么会发生这种情况，但我使用 wget for windows 而不是 WinHttp.WinHttpRequest.5.1，它从站点获取所有数据并将其直接传递到我可以从中解析数据的网页。

# vba - 在 VBA 中编写宏 - 用户关闭 Excel 后的 Excel

> ID：15947082
> 
> 赞同：5
> 
> 时间：2013-04-11T11:02:40.757
> 
> 标签：vba, excel, ms-office

我需要在 Excel VBA 中编写一个宏，它会在关闭 excel 后终止在 windows 任务中运行的进程。我在事件 workbook_BeforeClose 上尝试过这样做

```
Private Sub Workbook_BeforeClose(CANCEL As Boolean)
    Run "MacroCloseProcess"
End Sub 
```

MacroCloseProcess 的定义是这样的

```
Private Sub MacroCloseProcess()
    Dim oWMT As Object, oProcess As Object
    Set oWMT = GetObject("winmgmts://")
    For Each oProcess In oWMT.InstancesOf("Win32_Process")
        If (oProcess.name) = pWcfHostApp Then

            If oProcess.Terminate() = 0 Then Exit Sub
        End If
    Next
End Sub 
```

这可行，但是，如果工作簿中有更改，excel 会为用户提供“是否要保存对'Sheet1.xlsx'所做的更改？保存，不保存，取消

如果用户单击取消，Excel 不会退出（根据设计），但是哦，该过程已终止，因为它处于“BeforeClose”事件中。我如何编写此代码以使其在 excel 关闭后命中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:14:20.507

控制用户的决定。这是一个简单的代码，如果需要可以改进。

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
'take control of what user can do:
If MsgBox("Do you want to save and exit?", vbYesNo) = vbYes Then
    Application.DisplayAlerts = False
        ThisWorkbook.Save
        'call your MacroCloseProcess here
    Application.DisplayAlerts = True
Else
    Cancel = True
End If
End Sub 
```

****编辑 **更好更优雅的选择：**

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
'take control of what user can do:
    Application.DisplayAlerts = False
    Dim filePath As Variant

    If Len(ThisWorkbook.Path) > 0 Then
        'has been already saved therefore just ask
        'this would be rarely meet, only whan call for the first time
        'or if this solution was placed in class module for all doc

        If MsgBox("Do you want to save and exit?", vbYesNo) = vbYes Then
            ThisWorkbook.Save
            'call your MacroCloseProcess here
            MsgBox "exit" '<-- to remove, kept for tests
        Else
            Cancel = True
        End If
    Else
        'document was not saved before- show standard file dialog

        filePath = Application.GetSaveAsFilename()
        If VarType(filePath) = vbString Then

            ActiveWorkbook.SaveAs Filename:=filePath
            'call your MacroCloseProcess here
            MsgBox "exit" '<-- to remove, kept for tests

        Else
            Cancel = True
        End If
    End If
    Application.DisplayAlerts = True
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T11:16:06.343

其他一些想法没问题，我同意先保存，但你应该事先征得他们的许可。这也允许用户先保存，因为它首先检查它是否已保存。

您应该在终止之前调用用户来保存工作簿。例如

```
Private Sub Workbook_BeforeClose(CANCEL As Boolean)

If Not Me.Saved Then 
    Msg = "Do you want to save the changes you made to " 
    Msg = Msg & Me.Name & "?" 
    Ans = MsgBox(Msg, vbQuestion + vbYesNoCancel) 
    Select Case Ans
        Case vbYes 
            Me.Save 
        Case vbNo 
            Me.Saved = True 
        Case vbCancel 
            Cancel = True 
            Exit Sub 
    End Select
End If

Run "MacroCloseProcess"

End sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:09:56.830

也许您可以在关闭 excel 之前向用户提供您希望保存选项，然后通过以下方式为用户抑制任何进一步的对话框

`Application.DisplayAlerts=False`或者

`ThisWorkbook.Close (False)`

# xml - 在 VI 中搜索 XML 文件中的重复行或重复标签

> ID：15947086
> 
> 赞同：0
> 
> 时间：2013-04-11T11:03:01.087
> 
> 标签：xml, parsing, search, vi

我有一个包含大约 15 万条记录的 XML 文件。记录的格式如下图所示：

```
<product>
<product_id>1</product_id>
<product_name>ABC1</product_name>
</product>
<product>
<product_id>2</product_id>
<product_name>ABC2</product_name>
</product>
<product>
<product_id>3</product_id>
<product_name>ABC3</product_name>
</product>
<product>
<product_id>3</product_id>
<product_name>ABC4</product_name>
</product>
<product>
<product_id>4</product_id>
<product_name>ABC5</product_name>
</product>
<product>
<product_id>5</product_id>
<product_name>ABC6</product_name>
</product>
<product>
<product_id>6</product_id>
<product_name>ABC7</product_name>
</product> 
```

当我加载上述文件时，我得到唯一的约束违规错误 - 这意味着一些记录使用数据库不允许的相同 product_id。

VI 中是否有更简单的方法来解析文件以了解/显示所有使用非唯一 ID 的产品（使用 product_id 标签）。例如，上面的示例有两个产品使用相同的唯一 ID 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T21:22:49.670

基于[Nadav 的](https://stackoverflow.com/users/1152662/nadav)建议，但使用不同的解析器，这是一种使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")及其`XML::Twig`模块的方法。它打印所有用逗号分隔的重复*ID ：*

```
#!/usr/bin/env perl

use warnings;
use strict;
use XML::Twig;

my (@rep_ids, %id);

XML::Twig->new(
    twig_roots => {
        'product/product_id' => sub {
            my $id = $_->text_only;
            if ( exists $id{ $id } ) { 
                push @rep_ids, $id;
            }   
            $id{ $id } = 1;
        },  
    },  
)->parsefile( shift );

printf qq|%s\n|, join q|,|, @rep_ids; 
```

像这样运行它：

```
perl script.pl xmlfile 
```

这会产生：

```
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T21:05:54.930

我相信正确的方法是编写一个 Perl 脚本来处理 xml 树并抛出有意义的错误。这样的脚本很可能会利用现有的 Perl 包来处理 XML 文件，例如[XML::Parser](http://metacpan.org/pod/XML%3a%3aParser)。

最好的问候，纳达夫。

# android - XMLparser - 不幸的是应用程序停止工作

> ID：15947090
> 
> 赞同：0
> 
> 时间：2013-04-11T11:03:11.293
> 
> 标签：android, xml, parsing

我在运行我的 android 应用程序（v 4.0.3）时遇到问题，我的应用程序停止工作。它基本上是 XML 解析应用程序

这是主要活动

```
 package cz.jiri.podlipny.weather_design;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //new Stahni().execute();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

private class Stahni extends AsyncTask<Void, Void, ParserXMLObject>{

        @Override
        protected ParserXMLObject doInBackground(Void... params){
            ParserXMLObject XMLdata = null;
            try {
                URL url = new URL("http://www.anddev.org/images/tut/basic/parsingxml/example.xml");
                //dostane SAXparser ze SUXFactory
                SAXParserFactory spf = SAXParserFactory.newInstance();
                SAXParser sp = spf.newSAXParser();

                //Načte XML ze SAX parseru
                XMLReader xr = sp.getXMLReader();

                //vytvoříme obsluhu handle k XML
                XMLHandler xmlHandle = new XMLHandler();
                xr.setContentHandler(xmlHandle);

                //postará se o parsování dat z XML
                xr.parse(new InputSource(url.openStream()));

                //samotná XMLdata
                XMLdata = xmlHandle.getParsedData();
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (ParserConfigurationException e) {
                //parser catch
                e.printStackTrace();
            } catch (SAXException e) {
                // SAX exception
                e.printStackTrace();
            } catch (IOException e) {
                // IOException z openStreamu
                e.printStackTrace();
            }
            return XMLdata;

        }

        protected void onPostExecute(ParserXMLObject xmldata){
            TextView teplota = (TextView) findViewById(R.id.CurTemp);
            teplota.setText(xmldata.toString());
        }

    }

public void kliknuto(View v){
    new Stahni().execute(); 
}

} 
```

这是 parserXML 对象

```
 package cz.jiri.podlipny.weather_design;

public class ParserXMLObject {
    /*
     * z XML dat vytváří objekt se kterým se dále pracuje
     */
    private String extractedString = null;
    private int extractedInt = 0;

    public String getExtractedString() {
            return extractedString;
    }
    public void setExtractedString(String extractedString) {
            this.extractedString = extractedString;
    }

    public int getExtractedInt() {
            return extractedInt;
    }
    public void setExtractedInt(int extractedInt) {
            this.extractedInt = extractedInt;
    }

    public String toString(){
            return "ExtractedString = " + this.extractedString
                            + "nExtractedInt = " + this.extractedInt;
    }
} 
```

这是用于解析的处理程序

```
 package cz.jiri.podlipny.weather_design;

import java.util.jar.Attributes;

import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class XMLHandler extends DefaultHandler {
    // ===========================================================
    // Fields
    // ===========================================================

    private boolean in_outertag = false;
    private boolean in_innertag = false;
    private boolean in_mytag = false;

    private ParserXMLObject myParsedExampleDataSet = new ParserXMLObject();

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    public ParserXMLObject getParsedData() {
            return this.myParsedExampleDataSet;
    }

    // ===========================================================
    // Methods
    // ===========================================================
    @Override
    public void startDocument() throws SAXException {
            this.myParsedExampleDataSet = new ParserXMLObject();
    }

    @Override
    public void endDocument() throws SAXException {
            // Nothing to do
    }

    /** Gets be called on opening tags like:
     * <tag>
     * Can provide attribute(s), when xml was like:
    public void startElement(String namespaceURI, String localName,
                    String qName, Attributes atts) throws SAXException {
            if (localName.equals("outertag")) {
                    this.in_outertag = true;
            }else if (localName.equals("innertag")) {
                    this.in_innertag = true;
            }else if (localName.equals("mytag")) {
                    this.in_mytag = true;
            }else if (localName.equals("tagwithnumber")) {
                    // Extract an Attribute
                    String attrValue = atts.getValue("thenumber");
                    int i = Integer.parseInt(attrValue);
                    myParsedExampleDataSet.setExtractedInt(i);
            }
    }

    /** Gets be called on closing tags like:
     * </tag> */
    @Override
    public void endElement(String namespaceURI, String localName, String qName)
                    throws SAXException {
            if (localName.equals("outertag")) {
                    this.in_outertag = false;
            }else if (localName.equals("innertag")) {
                    this.in_innertag = false;
            }else if (localName.equals("mytag")) {
                    this.in_mytag = false;
            }else if (localName.equals("tagwithnumber")) {
                    // Nothing to do here
            }
    }

    /** Gets be called on the following structure:
     * <tag>characters</tag> */
    @Override
public void characters(char ch[], int start, int length) {
            if(this.in_mytag){
            myParsedExampleDataSet.setExtractedString(new String(ch, start, length));
    }
}
} 
```

这是 LOGCAT：

```
04-11 12:40:48.773: I/Adreno200-EGLSUB(25887): <ConfigWindowMatch:2078>: Format RGBA_8888.
04-11 12:40:48.783: D/memalloc(25887): /dev/pmem: Mapped buffer base:0x4b966000 size:1536000 offset:0 fd:53
04-11 12:40:48.893: D/memalloc(25887): /dev/pmem: Mapped buffer base:0x4bde7000 size:9154560 offset:7618560 fd:56
04-11 12:40:51.553: D/memalloc(25887): /dev/pmem: Mapped buffer base:0x4c81c000 size:7557120 offset:6021120 fd:59
04-11 12:40:51.593: W/dalvikvm(25887): threadid=1: thread exiting with uncaught exception (group=0x40c5d1f8)
04-11 12:40:51.603: E/AndroidRuntime(25887): FATAL EXCEPTION: main
04-11 12:40:51.603: E/AndroidRuntime(25887): java.lang.IllegalStateException: Could not find a method Kliknuto(View) in the activity class cz.jiri.podlipny.weather_design.MainActivity for onClick handler on view class android.widget.Button with id 'button1'
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.view.View$1.onClick(View.java:3039)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.view.View.performClick(View.java:3519)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.view.View$PerformClick.run(View.java:14140)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.os.Handler.handleCallback(Handler.java:605)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.os.Looper.loop(Looper.java:137)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at java.lang.reflect.Method.invoke(Method.java:511)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at dalvik.system.NativeStart.main(Native Method)
04-11 12:40:51.603: E/AndroidRuntime(25887): Caused by: java.lang.NoSuchMethodException: Kliknuto [class android.view.View]
04-11 12:40:51.603: E/AndroidRuntime(25887):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at java.lang.Class.getMethod(Class.java:915)
04-11 12:40:51.603: E/AndroidRuntime(25887):    at android.view.View$1.onClick(View.java:3032)
04-11 12:40:51.603: E/AndroidRuntime(25887):    ... 11 more
04-11 12:42:34.123: I/Adreno200-EGLSUB(25988): <ConfigWindowMatch:2078>: Format RGBA_8888.
04-11 12:42:34.163: D/memalloc(25988): /dev/pmem: Mapped buffer base:0x4bac1000 size:9154560 offset:7618560 fd:53
04-11 12:42:34.283: D/memalloc(25988): /dev/pmem: Mapped buffer base:0x4c4bc000 size:1536000 offset:0 fd:56
04-11 12:42:35.333: D/memalloc(25988): /dev/pmem: Mapped buffer base:0x4c79e000 size:7557120 offset:6021120 fd:59
04-11 12:42:35.353: W/dalvikvm(25988): threadid=1: thread exiting with uncaught exception (group=0x40c5d1f8)
04-11 12:42:35.363: E/AndroidRuntime(25988): FATAL EXCEPTION: main
04-11 12:42:35.363: E/AndroidRuntime(25988): java.lang.IllegalStateException: Could not find a method Kliknuto(View) in the activity class cz.jiri.podlipny.weather_design.MainActivity for onClick handler on view class android.widget.Button with id 'button1'
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.view.View$1.onClick(View.java:3039)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.view.View.performClick(View.java:3519)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.view.View$PerformClick.run(View.java:14140)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.os.Handler.handleCallback(Handler.java:605)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.os.Looper.loop(Looper.java:137)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at java.lang.reflect.Method.invoke(Method.java:511)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at dalvik.system.NativeStart.main(Native Method)
04-11 12:42:35.363: E/AndroidRuntime(25988): Caused by: java.lang.NoSuchMethodException: Kliknuto [class android.view.View]
04-11 12:42:35.363: E/AndroidRuntime(25988):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at java.lang.Class.getMethod(Class.java:915)
04-11 12:42:35.363: E/AndroidRuntime(25988):    at android.view.View$1.onClick(View.java:3032)
04-11 12:42:35.363: E/AndroidRuntime(25988):    ... 11 more
04-11 13:14:30.589: I/Adreno200-EGLSUB(26277): <ConfigWindowMatch:2078>: Format RGBA_8888.
04-11 13:14:30.609: D/memalloc(26277): /dev/pmem: Mapped buffer base:0x4ba23000 size:1536000 offset:0 fd:53
04-11 13:14:30.719: D/memalloc(26277): /dev/pmem: Mapped buffer base:0x4be17000 size:7557120 offset:6021120 fd:56
04-11 13:14:32.039: D/memalloc(26277): /dev/pmem: Mapped buffer base:0x4c680000 size:9154560 offset:7618560 fd:59
04-11 13:14:32.069: W/dalvikvm(26277): threadid=1: thread exiting with uncaught exception (group=0x40c5d1f8)
04-11 13:14:32.079: E/AndroidRuntime(26277): FATAL EXCEPTION: main
04-11 13:14:32.079: E/AndroidRuntime(26277): java.lang.IllegalStateException: Could not find a method Kliknuto(View) in the activity class cz.jiri.podlipny.weather_design.MainActivity for onClick handler on view class android.widget.Button with id 'button1'
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.view.View$1.onClick(View.java:3039)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.view.View.performClick(View.java:3519)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.view.View$PerformClick.run(View.java:14140)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.os.Handler.handleCallback(Handler.java:605)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.os.Looper.loop(Looper.java:137)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at java.lang.reflect.Method.invoke(Method.java:511)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at dalvik.system.NativeStart.main(Native Method)
04-11 13:14:32.079: E/AndroidRuntime(26277): Caused by: java.lang.NoSuchMethodException: Kliknuto [class android.view.View]
04-11 13:14:32.079: E/AndroidRuntime(26277):    at java.lang.Class.getConstructorOrMethod(Class.java:460)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at java.lang.Class.getMethod(Class.java:915)
04-11 13:14:32.079: E/AndroidRuntime(26277):    at android.view.View$1.onClick(View.java:3032)
04-11 13:14:32.079: E/AndroidRuntime(26277):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:43:54.453

在您的布局 xml 文件中，您有一个带有 id 的 Button `button1`。该`onClick`属性引用了一个名为 的方法`Kliknuto()`，但您已经实现了一个名为的方法`kliknuto()`（注意区别）。

尝试在属性中`Kliknuto`替换为。`kliknuto``onClick`

# python - Python 3“锁定”：线程和进程

> ID：15947092
> 
> 赞同：4
> 
> 时间：2013-04-11T11:03:16.457
> 
> 标签：python, python-3.x, parallel-processing, thread-safety, python-multithreading

我一直在尝试在 python 3 中编写缓存，我想避免线程和进程的并发问题。

我一直在使用`threading`线程安全代码和`multiprocessing`进程安全。

`threading`我可以同时使用 Lock from和 Lock from来解决我的问题`multiprocessing`。但我想知道是否有一个“通用”锁来做这些事情或类似的事情。

先感谢您 ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:15:22.043

您不能对进程内锁和跨进程锁使用相同的类。实现方式完全不同。

您当前的策略是正确的。

# flash - actionscript 3.0 中的 Auto Incrementing 使数字翻倍

> ID：15947099
> 
> 赞同：0
> 
> 时间：2013-04-11T11:03:44.100
> 
> 标签：flash, actionscript, air

我正在使用 actionscript 和 flash 创建一个移动应用程序（我知道它已经过时了）。当用户选择答案时，该应用程序是一个测验，它正在返回下一个问题我遇到的问题是，当它返回结果时，它会在 Question1、Question2、Question4、Question8 中返回结果。我希望它增加 1 我已经尝试过 VARIABLE++、++VARIABLE 和 VARIABLE = VARIABLE + 1。方法有什么想法为什么它不增加 1？

```
import flash.events.Event;

stop();

var TEST:String = "";
txt_ans.text = "";
var SCORE:int = 0;
var Qnumber:Number = 1;

stage.addEventListener(Event.ENTER_FRAME, onFrameEnter);

function onFrameEnter(e:Event):void
{

LoadQuestionVars.call();
}
function LoadQuestionVars():void
{
if (Qnumber > 10)
{

    gotoAndStop(10);
}
else
{

    var formVars:URLVariables = new URLVariables();
    var variableRequest:URLRequest = new URLRequest("requestp");
    variableRequest.method = URLRequestMethod.POST;
    variableRequest.data = formVars;
    var varLoader:URLLoader = new URLLoader();
    varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

    formVars.question1 = Qnumber;

    varLoader.addEventListener(Event.COMPLETE, showTest);

    varLoader.load(variableRequest);

    function showTest(e:Event):void
    {

        result_text.text = e.target.data.systemResult;
        TESTNAME = result_text.text;

        var formVars:URLVariables = new URLVariables();
        var variableRequest:URLRequest = new URLRequest("hrequest");
        variableRequest.method = URLRequestMethod.POST;
        variableRequest.data = formVars;
        var varLoader:URLLoader = new URLLoader();
        varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

        formVars.question1 = Qnumber;

        varLoader.addEventListener(Event.COMPLETE, showQuestion);

        varLoader.load(variableRequest);

        function showQuestion(e:Event):void
        {
            question_text.text = e.target.data.question;

            var formVars:URLVariables = new URLVariables();
            var variableRequest:URLRequest = new URLRequest("hrequest");
            variableRequest.method = URLRequestMethod.POST;
            variableRequest.data = formVars;
            var varLoader:URLLoader = new URLLoader();
            varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

            formVars.question1 = Qnumber;

            varLoader.addEventListener(Event.COMPLETE, showanswere1);

            varLoader.load(variableRequest);

            function showanswere1(e:Event):void
            {
                Answere1.text = e.target.data.answere1;

                var formVars:URLVariables = new URLVariables();
                var variableRequest:URLRequest = new URLRequest("hrequest");
                variableRequest.method = URLRequestMethod.POST;
                variableRequest.data = formVars;
                var varLoader:URLLoader = new URLLoader();
                varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

                formVars.question1 = Qnumber;

                varLoader.addEventListener(Event.COMPLETE, showanswere2);

                varLoader.load(variableRequest);

                function showanswere2(e:Event):void
                {
                    Answere2.text = e.target.data.answere2;

                    var formVars:URLVariables = new URLVariables();
                    var variableRequest:URLRequest = new URLRequest("requestp");
                    variableRequest.method = URLRequestMethod.POST;
                    variableRequest.data = formVars;
                    var varLoader:URLLoader = new URLLoader();
                    varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

                    formVars.question1 = Qnumber;

                    varLoader.addEventListener(Event.COMPLETE, showanswere3);

                    varLoader.load(variableRequest);

                    function showanswere3(e:Event):void
                    {
                        Answere3.text = e.target.data.answere3;

                        var formVars:URLVariables = new URLVariables();
                        var variableRequest:URLRequest = new URLRequest("requestp");
                        variableRequest.method = URLRequestMethod.POST;
                        variableRequest.data = formVars;
                        var varLoader:URLLoader = new URLLoader();
                        varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

                        formVars.question1 = Qnumber;

                        varLoader.addEventListener(Event.COMPLETE, showanswere4);

                        varLoader.load(variableRequest);

                        function showanswere4(e:Event):void
                        {
                            Answere4.text = e.target.data.answere4;

                            var formVars:URLVariables = new URLVariables();
                            var variableRequest:URLRequest = new URLRequest("request");
                            variableRequest.method = URLRequestMethod.POST;
                            variableRequest.data = formVars;
                            var varLoader:URLLoader = new URLLoader();
                            varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

                            formVars.question1 = Qnumber;

                            varLoader.addEventListener(Event.COMPLETE, ANSWERE);

                            varLoader.load(variableRequest);

                            function ANSWERE(e:Event):void
                            {
                                txt_ans.text = e.target.data.answereshow;

                            }
                        }

                    }
                }
            }
        }

    }
    stage.removeEventListener(Event.ENTER_FRAME,onFrameEnter);

    Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;
    BTN_ANS1.addEventListener(TouchEvent.TOUCH_TAP, Answere1ACC);

    function Answere1ACC(e:TouchEvent):void
    {
        if (txt_ans.text == "ANS1")
        {
            SCORE = SCORE + 1;
        }
        ClearTextFields.call();

    }
    Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;
    BTN_ANS2.addEventListener(TouchEvent.TOUCH_TAP, Answere2ACC);

    function Answere2ACC(e:TouchEvent):void
    {
        if (txt_ans.text == "ANS2")
        {
            SCORE = SCORE + 1;
        }
        ClearTextFields.call();

    }
    Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;
    BTN_ANS3.addEventListener(TouchEvent.TOUCH_TAP, Answere3ACC);

    function Answere3ACC(e:TouchEvent):void
    {
        if (txt_ans.text == "ANS3")
        {
            SCORE = SCORE + 1;
        }
        ClearTextFields.call();

    }
    Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;
    BTN_ANS4.addEventListener(TouchEvent.TOUCH_TAP, Answere4ACC);

    function Answere4ACC(e:TouchEvent):void
    {
        if (txt_ans.text == "ANS4")
        {
            SCORE = SCORE + 1;
        }
        ClearTextFields.call();
    }
    function ClearTextFields():void
    {
        result_text.text = "";
        question_text.text = "";
        Answere1.text = "";
        Answere2.text = "";
        Answere3.text = "";
        Answere4.text = "";
        txt_ans.text = "";
        LoadQuestionVars.call();

    }

}
Qnumber++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:06:37.923

我做了一个跟踪，问题是我是从第一个函数中调用的，所以每次运行它都会运行两次，我在增量之前关闭了函数，它工作得很好。

# jquery - 如何使用 jQuery 访问传递给 JavaScript 函数的 DOM 对象

> ID：15947101
> 
> 赞同：0
> 
> 时间：2013-04-11T11:03:48.637
> 
> 标签：jquery

我在一个页面上有多个表单，其中表单 DOM 对象作为参数传递给 JavaScript 函数，例如：

```
 <form name="form1" method="post" action="">
      <input id="textfield1" type="text" name="textfield1">
      <input id="textfield2" type="text" name="textfield2">
      <input id="textfield3" type="text" name="textfield3">
      <input name="button" type="button" id="btn" value="Get Info" onClick="getdata(this.form)">
    </form><form name="form2" method="post" action="">
  <input id="textfield1" type="text" name="textfield1">
  <input id="textfield2" type="text" name="textfield2">
  <input id="textfield3" type="text" name="textfield3">
  <input name="button" type="button" id="btn" value="Get Info" onClick="getdata(this.form)">
</form>
<form name="form3" method="post" action="">
  <input id="textfield1" type="text" name="textfield1">
  <input id="textfield2" type="text" name="textfield2">
  <input id="textfield3" type="text" name="textfield3">
  <input name="button" type="button" id="btn" value="Get Info" onClick="getdata(this.form)">
</form>

function getdata(form){
  alert("the value is: " + form.getElementById('textfield1).value);
} 
```

如何使用 jQuery 访问在 getdata(form) 中传递的 DOM 对象？

我已经厌倦了 $(form) 但这似乎只能访问按钮对象，而不是表单中的其他输入。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:07:12.110

`$(form)`确实应该为您提供对表单的 jQuery 引用，而仅仅`form`是 DOM 节点本身。[演示](http://jsfiddle.net/Dx5c6/)

但是，对于您想要实现的目标，您最好将 DOM 节点作为上下文传递给您的选择器：

```
$('#li_address', form).val() 
```

但是，由于您通过 ID 获取元素，因此您不需要上下文 - 因为您只有一个，对吗？[但是这里](http://jsfiddle.net/dAuEQ/)有一个使用 DOM 节点作为上下文的合理演示。

但是，由于您使用的是 jQuery，您可能还想`onClick`在 jQuery 中切换并处理事件绑定。请注意，我使用`.btn`假设`class="btn"`而不是访问所有按钮`id="btn"`。同样，ID 在整个文档中应该是唯一的。不要偏离这一点。它会咬你。

```
$('form .btn').click(function() {
    // this = button DOM node
    var form = $(this).closest('form');
    form.submit(); // or whatever
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:07:24.100

这将返回 form1 的 DOM 元素

```
$('form[name=form1]').get() 
```

或所有表格

```
$('form').get() 
```

要访问单个表单元素，您可以访问例如按钮

```
$('form[name=form1] #btn') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:15:51.420

您可以像这样尝试 getData 函数-

```
form.fieldName.value 
```

# asp.net-mvc-3 - 模型不通过 javascript 更新

> ID：15947104
> 
> 赞同：0
> 
> 时间：2013-04-11T11:03:54.880
> 
> 标签：asp.net-mvc-3

我有一个 MVC 视图，我从中打开一个 JQuery 对话框。然后从这个 JQuery 对话框中我打开另一个 JQuery 对话框。

我使用 ajax 调用将数据从视图传递到第一个对话框。我在第一个对话框视图中显示这些数据。此视图是只读的。我从第一个对话框打开另一个对话框并使用 ajax 调用传递数据。第二个视图修改数据。

当我提交第二个表单/对话框时，我调用了一个 javascript 方法 updateData

```
@using (Ajax.BeginForm("SaveData", "GenericData", new AjaxOptions{
InsertionMode = InsertionMode.Replace,
HttpMethod = "POST",
OnSuccess = "updateData"}, new { @id = "Adddt", enctype = "multipart/form-data" })) 
```

在这个 javascript 方法中，我得到了从第二个对话框发送的修改后的数据。所以我将第一个对话框的 HTML 元素修改为：

```
function updateData(data)
{
    //set the grid values
    document.getElementById('tdnewdate').innerHTML = data.Object.DateFound;                     
     //set the model data
    document.getElementById('txtnewdate').value = data.Object.DateFound; 
} 
```

第一个对话框视图包含如下代码：

```
<td id="tdnewdate” >
@Model.DateFound
</td>
<td>
@Html.TextBoxFor(model => @Model.DateFound, new { id = "txtnewdate", style = "display:none" })
</td> 
```

第一条语句修改表单 HTML 元素以显示修改后的值。但是，第二条语句应该修改模型。

现在，当我提交第一个对话框时，我可以看到模型已被修改。但是，当我再次尝试编辑第一个对话框时，我得到的是原始模型值，而不是修改后的值。

谁能建议我做错了什么。

谢谢，

# c# - 如何将 Umbraco 与 CDN 结合使用？

> ID：15947106
> 
> 赞同：4
> 
> 时间：2013-04-11T11:03:56.780
> 
> 标签：c#, razor, umbraco, cdn

我想知道如何将 Umbraco 站点与 CDN 结合起来。

例如，当一个用户在后台，想要上传一个视频时，该视频被上传到一个CDN。

任何反馈都会很棒！

版本：4 和 6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:30:01.307

您当然可以自己构建它，但也有一些包可以帮助您实现这一点：

1.  [通用媒体选择器 1.5](http://our.umbraco.org/projects/backoffice-extensions/universal-media-picker)适用于 v4 和 v6，目前已于 2018-07 停用

2.  [Amazon S3 数据类型](http://our.umbraco.org/projects/backoffice-extensions/amazon-s3-datatype)可能适用于 6.1 和 7.4

第一个可以连接到很多不同的 CDN。

### 第 3 方编辑 2018-07

我还没有[为 umbraco 测试过 azure cdn 工具包，](https://our.umbraco.com/projects/developer-tools/azure-cdn-toolkit-for-umbraco/)但它已针对 7.7 (100%) 进行了测试，可能值得一试。

# mysql - mysql查询问题以选择两个表中每天的总记录

> ID：15947114
> 
> 赞同：0
> 
> 时间：2013-04-11T11:04:32.310
> 
> 标签：mysql, sum, union

我想在一个月内每天从两个表中获取 SUM/Total 记录，当我在单个表上运行我的查询时，它可以工作，但是然后commulative 不工作......就像这对于第一个表是可以的。

```
select DATE_FORMAT(date(dateadded),'%m/%d/%Y') as dateadded, count(id) as tot_rent
from crm_rentals WHERE YEAR(dateadded) = YEAR(CURRENT_DATE)
AND MONTH(dateadded) = MONTH(CURRENT_DATE)
group by date(dateadded) 
```

这是第二张桌子，也可以。

```
select DATE_FORMAT(date(dateadded),'%m/%d/%Y') as dateadded, count(id) as tot_rent
from crm_sales WHERE YEAR(dateadded) = YEAR(CURRENT_DATE)
AND MONTH(dateadded) = MONTH(CURRENT_DATE)
group by date(dateadded) 
```

问题是当我想查找结果的每一天的总和时，它无法正常工作..这是我的最终查询

```
select dateadded,count(tot_rent) as tot_rent
from ( select DATE_FORMAT(date(dateadded),'%m/%d/%Y') as dateadded, count(id) as tot_rent
from crm_rentals WHERE YEAR(dateadded) = YEAR(CURRENT_DATE)
AND MONTH(dateadded) = MONTH(CURRENT_DATE)
group by date(dateadded)
union
select DATE_FORMAT(date(dateadded),'%m/%d/%Y') as dateadded, count(id) as tot_rent
from crm_sales WHERE YEAR(dateadded) = YEAR(CURRENT_DATE)
AND MONTH(dateadded) = MONTH(CURRENT_DATE)
group by date(dateadded)) s group by date(dateadded) 
```

crm_rentals 的表结构（第一个表，日期 = Ymd）

```
id -----dateadded
15------2013-04-02
16------2013-04-03
17------2013-04-03 
```

表 2 crm_sales

```
id------dateadded
 7------2013-04-02 
```

结果应该是

```
dateadded-----tot_rent
04/02/2013 ----2
04/03/2013  ---2 //this line is not shown 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:55:11.847

第一个查询给出

```
id -----dateadded
1------2013-04-02
2------2013-04-03 
```

第二个查询给出

```
id -----dateadded
1------2013-04-02 
```

所以工会会给

```
1------2013-04-02
2------2013-04-03
1------2013-04-02 
```

它的小组会做

```
2------2013-04-02
1------2013-04-03 
```

正确的方法是

```
15------2013-04-02
16------2013-04-03
17------2013-04-03 
```

联盟

```
 7------2013-04-02 
```

然后集团会给

```
2------2013-04-02
2------2013-04-03 
```

试试这个：

```
select dateadded,count(tot_rent) as tot_rent
from ( select DATE_FORMAT(date(dateadded),'%m/%d/%Y') as dateadded, id as tot_rent
from crm_rentals WHERE YEAR(dateadded) = YEAR(CURRENT_DATE)
AND MONTH(dateadded) = MONTH(CURRENT_DATE)
union
select DATE_FORMAT(date(dateadded),'%m/%d/%Y') as dateadded, id as tot_rent
from crm_sales WHERE YEAR(dateadded) = YEAR(CURRENT_DATE)
AND MONTH(dateadded) = MONTH(CURRENT_DATE)
) s group by dateadded 
```

# vb.net - 使用代理调用 WCF

> ID：15947115
> 
> 赞同：1
> 
> 时间：2013-04-11T11:04:37.010
> 
> 标签：vb.net, wcf, web-services

我正在使用 WCF 服务，其 wsdl 未在网站上发布。此后，该服务的开发人员给了我 wsdl 文件以从中生成代理类。

我已经使用 VS2010 svcutil.exe 命令成功生成了文件。我将文件包含在我正在处理的项目中，但是，在调用 web 服务时，没有从代理类到 web 服务主机的请求，正如我用来检查传出请求和响应的第三方数据包嗅探器所证明的那样.

我只是通过静态信息发送

我是 WCF 服务的新手，所以请告知是否有我需要添加的部分。

```
Imports System.Data
Imports System.ServiceModel
Imports System.Web.UI.Page
Imports System.Math 
Public Class webservicetest
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim Song As New request
    Try
        Song.songname() = "TakeMeHome"
        Song.trackNumber() = Convert.ToInt32("1")
        Song.requestNumber() = Convert.ToInt32("5689")
        Song.language() = "english"
        Song.albumtitle() = "GetMeThere"
        Song.totalAlbums() = Convert.ToDecimal("35")

        Dim songresponse As New responce

        Label1.Text = songresponse.errorMessage()
        Label2.Text = songresponse.requestDateTime()
        Label3.Text = songresponse.requestNumber()
        Label4.Text = songresponse.status()
    Finally
    End Try
End Sub

End Class 
```

app.config 的一部分

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_Songinformation" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="Transport">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="urlWherewebserviceIsDeployed"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Songinformation"
            contract="Songdata" name="BasicHttpBinding_Songdata" />
    </client>
</system.serviceModel> 
```

代理类的一部分

```
Imports System.Runtime.Serialization
<Assembly: System.Runtime.Serialization.ContractNamespaceAttribute("http://ucizi.music/DataContracts", ClrNamespace:="ucizi.music.DataContracts")>

Namespace ucizi.music.DataContracts

<System.Diagnostics.DebuggerStepThroughAttribute(), _
     System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0"), _
     System.Runtime.Serialization.DataContractAttribute(Name:="Request", [Namespace]:="http://ucizi.Music/DataContracts")> _
    Partial Public Class Request
    Inherits Object
    Implements System.Runtime.Serialization.IExtensibleDataObject
    Private extensionDataField As System.Runtime.Serialization.ExtensionDataObject

    Private albumtitle As String

    Private songname As String

    Private trackNumber As Integer

    Private language As String

    Private requestNumber As UInteger

    Private totalAlbums As Integer

    Public Property ExtensionData() As       System.Runtime.Serialization.ExtensionDataObject Implements      System.Runtime.Serialization.IExtensibleDataObject.ExtensionData
        Get
            Return Me.extensionDataField
        End Get
        Set(ByVal value As System.Runtime.Serialization.ExtensionDataObject)
            Me.extensionDataField = Value
        End Set
    End Property

    <System.Runtime.Serialization.DataMemberAttribute(IsRequired:=True)> _
    Public Property albumtitle() As String
        Get
            Return Me.albumtitlebox
        End Get
        Set(ByVal value As String)
            Me.albumtitlebox = Value
        End Set
    End Property

    <System.Runtime.Serialization.DataMemberAttribute(IsRequired:=True, Order:=2)> _
    Public Property songname() As String
        Get
            Return Me.songnamebox
        End Get
        Set(ByVal value As String)
            Me.songnamebox = value
        End Set
    End Property

    <System.Runtime.Serialization.DataMemberAttribute(IsRequired:=True, Order:=3)> _
    Public Property tracknumber() As Integer
        Get
            Return Me.tracknumberbox
        End Get
        Set(ByVal value As Integer)
            Me.tracknumberbox = value
        End Set
    End Property

    <System.Runtime.Serialization.DataMemberAttribute(IsRequired:=True, Order:=4)> _
    Public Property language() As String
        Get
            Return Me.languagebox
        End Get
        Set(ByVal value As String)
            Me.languagebox = value
        End Set
    End Property

    <System.Runtime.Serialization.DataMemberAttribute(IsRequired:=True, Order:=5)> _
    Public Property requestnumber() As UInteger
        Get
            Return Me.requestnumberbox
        End Get
        Set(ByVal value As UInteger)
            Me.requestnumberbox = value
        End Set
    End Property

    <System.Runtime.Serialization.DataMemberAttribute(IsRequired:=True, Order:=6)> _
    Public Property totalAlbums() As Integer
        Get
            Return Me.totalAlbumsbox
        End Get
        Set(ByVal value As Integer)
            Me.totalAlbumsbox = value
        End Set
    End Property
End Class

'rest of codes
End Namespace

<System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0"), _
 System.ServiceModel.ServiceContractAttribute([Namespace]:="http://ucizi.music/ServiceContracts", ConfigurationName:="MusicServiceContract")> _
Public Interface MusicServiceContract

'CODEGEN: Generating message contract since the wrapper namespace (http://ucizi.music/MessageContracts) of message SubmitRequest does not match the default value (http://ucizi.music/ServiceContracts)
<System.ServiceModel.OperationContractAttribute(Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitP" & _
    "ayment", ReplyAction:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitP" & _
    "aymentResponse"), _
  System.ServiceModel.FaultContractAttribute(GetType(ucizi.music.DataContracts.GeneralFaultContract), Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitP" & _
    "aymentGeneralFaultContractFault", Name:="GeneralFaultContract", [Namespace]:="http://ucizi.music/DataContracts")> _
Function SubmitPayment(ByVal request As SubmitRequest) As SubmitPaymentResponse

'CODEGEN: Generating message contract since the wrapper namespace (http://ucizi.music/MessageContracts) of message SubmitReversalRequest does not match the default value (http://ucizi.music/ServiceContracts)
<System.ServiceModel.OperationContractAttribute(Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitR" & _
    "eversal", ReplyAction:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitR" & _
    "eversalResponse"), _
  System.ServiceModel.FaultContractAttribute(GetType(ucizi.music.DataContracts.GeneralFaultContract), Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitR" & _
    "eversalGeneralFaultContractFault", Name:="GeneralFaultContract", [Namespace]:="http://ucizi.music/DataContracts")> _
Function SubmitReversal(ByVal request As SubmitReversalRequest) As SubmitReversalResponse

'CODEGEN: Generating message contract since the wrapper namespace (http://ucizi.music/MessageContracts) of message GetPaymentConfRequest does not match the default value (http://ucizi.music/ServiceContracts)
<System.ServiceModel.OperationContractAttribute(Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/Payment" & _
    "Confirmation", ReplyAction:="http://ucizi.music/ServiceContracts/MusicServiceContract/Payment" & _
    "ConfirmationResponse"), _
  System.ServiceModel.FaultContractAttribute(GetType(ucizi.music.DataContracts.GeneralFaultContract), Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/Payment" & _
    "ConfirmationGeneralFaultContractFault", Name:="GeneralFaultContract", [Namespace]:="http://ucizi.music/DataContracts")> _
Function PaymentConfirmation(ByVal request As GetPaymentConfRequest) As GetPaymentConfResponse

'CODEGEN: Generating message contract since the wrapper namespace (http://ucizi.music/MessageContracts) of message GetAvailableMOPRequest does not match the default value (http://ucizi.music/ServiceContracts)
<System.ServiceModel.OperationContractAttribute(Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/GetAvai" & _
    "lableMethodOfPayments", ReplyAction:="http://ucizi.music/ServiceContracts/MusicServiceContract/GetAvai" & _
    "lableMethodOfPaymentsResponse"), _
     System.ServiceModel.FaultContractAttribute(GetType(ucizi.music.DataContracts.GeneralFaultContract), Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/GetAvai" & _
    "lableMethodOfPaymentsGeneralFaultContractFault", Name:="GeneralFaultContract", [Namespace]:="http://ucizi.music/DataContracts")> _
Function GetAvailableMethodOfPayments(ByVal request As GetAvailableMOPRequest) As GetAvailableMOPResponse

'CODEGEN: Generating message contract since the wrapper namespace (http://ucizi.music/MessageContracts) of message GetTransactionHistoryRequest does not match the default value (http://ucizi.music/ServiceContracts)
<System.ServiceModel.OperationContractAttribute(Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/GetTran" & _
    "sactionHistory", ReplyAction:="http://ucizi.music/ServiceContracts/MusicServiceContract/GetTran" & _
    "sactionHistoryResponse"), _
 System.ServiceModel.FaultContractAttribute(GetType(ucizi.music.DataContracts.GeneralFaultContract), Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/GetTran" & _
    "sactionHistoryGeneralFaultContractFault", Name:="GeneralFaultContract", [Namespace]:="http://ucizi.music/DataContracts")> _
Function GetTransactionHistory(ByVal request As GetTransactionHistoryRequest) As GetTransactionHistoryResponse

'CODEGEN: Generating message contract since the wrapper namespace (http://ucizi.music/MessageContracts) of message SubmitSmartCardRequest does not match the default value (http://ucizi.music/ServiceContracts)
<System.ServiceModel.OperationContractAttribute(Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitP" & _
    "aymentUsingSmartCard", ReplyAction:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitP" & _
    "aymentUsingSmartCardResponse"), _
 System.ServiceModel.FaultContractAttribute(GetType(ucizi.music.DataContracts.GeneralFaultContract), Action:="http://ucizi.music/ServiceContracts/MusicServiceContract/SubmitP" & _
    "aymentUsingSmartCardGeneralFaultContractFault", Name:="GeneralFaultContract", [Namespace]:="http://ucizi.music/DataContracts")> _
Function SubmitPaymentUsingSmartCard(ByVal request As SubmitSmartCardRequest) As SubmitPaymentResponse
End Interface

<System.Diagnostics.DebuggerStepThroughAttribute(), _
 System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0"), _
  System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced), _
 System.ServiceModel.MessageContractAttribute(WrapperName:="SubmitRequest", WrapperNamespace:="http://ucizi.music/MessageContracts", IsWrapped:=True)> _
    Partial Public Class SubmitRequest

    <System.ServiceModel.MessageBodyMemberAttribute([Namespace]:="http://ucizi.music  /ServiceContracts", Order:=0)>   _
   Public Request As ucizi.music.DataContracts.Request

Public Sub New()
    MyBase.New()
End Sub

Public Sub New(ByVal Request As ucizi.music.DataContracts.Request)
    MyBase.New()
    Me.Request = Request
End Sub
End Class

<System.Diagnostics.DebuggerStepThroughAttribute(), _
 System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")> _
Partial Public Class MusicServiceContractsClient
Inherits System.ServiceModel.ClientBase(Of MusicServiceContracts)
Implements MusicServiceContracts

Public Sub New()
    MyBase.New()
End Sub

Public Sub New(ByVal endpointConfigurationName As String)
    MyBase.New(endpointConfigurationName)
End Sub

Public Sub New(ByVal endpointConfigurationName As String, ByVal remoteAddress As String)
    MyBase.New(endpointConfigurationName, remoteAddress)
End Sub

Public Sub New(ByVal endpointConfigurationName As String, ByVal remoteAddress As System.ServiceModel.EndpointAddress)
    MyBase.New(endpointConfigurationName, remoteAddress)
End Sub

    Public Sub New(ByVal binding As System.ServiceModel.Channels.Binding, ByVal remoteAddress As System.ServiceModel.EndpointAddress)
    MyBase.New(binding, remoteAddress)
End Sub

<System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)> _
    Function MusicServiceContract_SubmitRequest(ByVal request As SubmitMusicRequest) As SubmitMusicResponse Implements MusicServiceContracts.SubmitMusic
    Return MyBase.Channel.SubmitMusic(request)
End Function

Public Function SubmitMusic(ByVal PaymentRequest As multichoice.paymentservice.DataContracts.PaymentRequest) As multichoice.paymentservice.DataContracts.TransactionResponse
    Dim inValue As SubmitMusicRequest = New SubmitMusicRequest()
    inValue.PaymentRequest = PaymentRequest
    Dim retVal As SubmitMusicResponse = CType(Me, MusicServiceContracts).SubmitMusic(inValue)
    Return retVal.PaymentResponse
End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:39:08.230

您目前正在`new`回复。您需要创建一个服务客户端并使用它来调用服务以获取您的响应。

我是一名 C# 开发人员，但我想像这样：

```
Dim client as New MusicServiceContractsClient
Dim songresponse = client.SubmitMusic(request) 
```

# solr - Solr 4.2 EmbeddedSolrServer 无法加载现有索引数据

> ID：15947116
> 
> 赞同：2
> 
> 时间：2013-04-11T11:04:45.430
> 
> 标签：solr, lucene, solr4

我正在扩展 Solr 的**AbstractSolrTestCase**以进行单元测试。

我有现有的“schema.xml”、“solrconfig.xml”和索引数据。我可以启动一个嵌入式 solr 服务器来加载现有的集合及其数据。然后在 solr 中测试搜索文档。

这些测试文件（solr conf 和数据索引）仍然适用于 Solr 4.2。我可以在命令行中启动 solr 服务器，并通过管理页面成功查询文档。

> java -Dsolr.solr.home=/somewhere/testdata/solr -jar start.jar

然而，这种方式在适应 Solr 4.2.1 后不再起作用。经过一番调查，我发现 solr 的 EmbeddedSolrServer 似乎没有加载索引数据。

有人知道如何让 EmbeddedSolrServer 加载现有的索引数据吗？

我正在使用下面的代码来创建用于单元测试的嵌入式服务器。在下面的代码中，我使用了来自 solr 官方示例的索引数据。

```
public class IntegrationSolrTest2 extends AbstractSolrTestCase {
    private static final String CORE_NAME = "collection1";
    private static File solrTestHome = new File(
            "/Users/kane/Downloads/solr-4.2.1/example/solr");
    private static File confHome = new File(solrTestHome, CORE_NAME + "/conf");
    private static File indexFile = new File(confHome.getParentFile(),
            "data/index");
    private SolrServer server;

    @Override
    public String getSolrHome() {
        return solrTestHome.getAbsolutePath();
    }

    final String configFile = new File(confHome, "solrconfig.xml")
            .getAbsolutePath();

    // Creates a container based on infos needed to create one core
    static class Initializer extends CoreContainer.Initializer {
        String coreName;
        String dataDirectory;
        SolrConfig solrConfig;
        IndexSchema indexSchema;

        public Initializer(String coreName, String dataDirectory,
                SolrConfig solrConfig, IndexSchema indexSchema) {
            if (coreName == null)
                coreName = CoreContainer.DEFAULT_DEFAULT_CORE_NAME;
            this.coreName = coreName;
            this.dataDirectory = dataDirectory;
            this.solrConfig = solrConfig;
            this.indexSchema = indexSchema;
        }

        public String getCoreName() {
            return coreName;
        }

        @Override
        public CoreContainer initialize() {
            CoreContainer container = new CoreContainer(new SolrResourceLoader(
                    SolrResourceLoader.locateSolrHome())) {
                {
                    hostPort = System.getProperty("hostPort");
                    hostContext = "solr";
                    defaultCoreName = coreName;
                    initShardHandler(null);
                    initZooKeeper(System.getProperty("zkHost"), 10000);
                }
            };
            LogWatcher<?> logging = new JulWatcher("test");
            logging.registerListener(new ListenerConfig(), container);
            container.setLogging(logging);

            CoreDescriptor dcore = new CoreDescriptor(container, coreName,
                    solrConfig.getResourceLoader().getInstanceDir());
            dcore.setConfigName(solrConfig.getResourceName());
            dcore.setSchemaName(indexSchema.getResourceName());
            SolrCore core = new SolrCore(coreName, dataDirectory, solrConfig,
                    indexSchema, dcore);
            container.register(coreName, core, false);

            // TODO: we should be exercising the *same* core container
            // initialization code, not equivalent code!
            if (container.getZkController() == null
                    && core.getUpdateHandler().getUpdateLog() != null) {
                // always kick off recovery if we are in standalone mode.
                core.getUpdateHandler().getUpdateLog().recoverFromLog();
            }
            return container;
        }
    }

    @Before
    public void prepare() throws Exception {
        super.setUp();
        solrConfig = TestHarness.createConfig(solrTestHome.getAbsolutePath(),
                CORE_NAME, configFile);
        h = new TestHarness(IntegrationSolrTest2.CORE_NAME, new Initializer(
                IntegrationSolrTest2.CORE_NAME, indexFile.getParentFile()
                        .getAbsolutePath(), solrConfig, new IndexSchema(
                        solrConfig, getSchemaFile(), null)));
        server = new EmbeddedSolrServer(h.getCoreContainer(), h.getCore()
                .getName());
        h.getCoreContainer().reload(CORE_NAME);
    }

    @After
    public void cleanup() {
        h.getCoreContainer().shutdown();
    }

    @Test
    public void searchAll() throws Exception {
        h.reload();
        SolrQuery params = new SolrQuery();
        params.setQuery("*:*");
        QueryResponse response = server.query(params);
        final SolrDocumentList results = response.getResults();
        assertTrue("Not search the expected goods!", results.getNumFound() > 0);
    }

} 
```

# visual-studio - 如何通过 3g usb 调制解调器将 Windows Phone 8 模拟器连接到互联网？

> ID：15947119
> 
> 赞同：2
> 
> 时间：2013-04-11T11:04:55.013
> 
> 标签：visual-studio, networking, emulation, windows-phone, hyper-v

我正在尝试将 Windows phone 8 模拟器连接到互联网。

Android 模拟器和 Windows Phone 7 模拟器通过共享主机 Internet 连接连接到 Internet，但 Windows Phone 8 模拟器引入了一种新的联网模式。它使用 Hyper-V 为每个可能的 Internet 连接创建一个虚拟交换机。模拟器的主机是 Windows 8，因为它需要使用 Windows phone 8 模拟器或 Hyper-V 。

现在，如果我在主机上使用 Wi-Fi 互联网连接，我可以在 Windows Phone 模拟器内正常连接到互联网。但如果我通过 3G USB 调制解调器将主机连接到 Internet，我会得到：

```
We are having trouble displaying this page. 
```

在尝试之前，我卸载了 VirtualBox 和 Intel Hardware Acceleration Execution Manager (HAXM)，因此这将它们排除在问题之外。

如何使用 3G 调制解调器进行连接？我应该在 Hyper-V 管理器或网络连接中进行哪些设置以启用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T13:05:50.380

您是否尝试过创建环回适配器，然后使用它连接到互联网？

[如何安装环回适配器](http://ceekam.com/blog/?p=1057)

[使用环回适配器](http://beamex.wordpress.com/2009/01/28/using-microsft-loopback-adapter-to-get-online-with-your-3g-modem-or-mobile-phone/)

我使用 Tata Photon+ 3G 调制解调器……不幸的是，我还不能让它工作。

但是，我已经搞砸了很多网络设置，并考虑从头开始。

如果您发现任何运气，请返回步骤。

# php - TideSDK $_GET 检索显示为空

> ID：15947126
> 
> 赞同：1
> 
> 时间：2013-04-11T11:05:11.190
> 
> 标签：php, get, tidesdk

[两周前](https://stackoverflow.com/questions/15702381/how-to-retrieve-form-variables-using-tidesdk-php)有人问过这个问题，很抱歉，但我一定是做错了什么。

我有：

```
<form action="action.php">
    <input type="text" name="bar" />
    <input type="submit" name="submit" value="Go!" />
</form> 
```

而在对应的action.php中，

```
<script type='text/php'>
    $test = $_GET['bar'];

    if ($_GET['submit']) {
        $message = 'OK';

    }

    else {
        $message = 'No';
    }

</script>

<script>
    document.write(test);
    document.write(message);
</script> 
```

结果是`"Null"`并且`"No"`--`$_GET['bar']`被解释为`empty`（当它不是时），甚至`$_GET['submit']`不返回（当我通过单击按钮`true`到达页面时）。`'submit'`

这*正是*[给出的解决方案](http://www.sanisoft.com/blog/2011/01/03/introduction-to-creating-desktop-applications-with-php-and-titanium/)概述的实现......对吗？

这不再适用于 TideSDK 吗？我在这里想念什么？如果这在 PHP 和 TideSDK 中无法实现，那么将计算或用户输入的参数从一个页面传递到另一个页面的最佳方法是什么？感谢大家。

[注意-我复制/粘贴了代码，因此现在应该消除一些遗漏/不一致的地方。对于那个很抱歉！]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:10:21.243

好的，我有答案了。

这*是*我错的 TideSDK 的一个怪癖，而不是 PHP 本身。根据[TideSDK 使用 PHP 指南](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/using_php)

在 Tide 中，如果您使用两种方法之一 (<script src="..." type="text/php">) 包含 PHP 文件，则*必须*省略 <?php 和 ?> 标记。

其他方法——使用请求或包含函数或直接导航到 php 文件（包括表单操作 .php 文件），需要文件中的开始和结束标记。

我没有这些，因为我认为我正在做一些必须省略的事情。尽管如此，它并没有**break**，因为语法是功能性的——只是没有 PHP 预处理能力，而且我期待的所有 $_GET 变量都是空的。因此，我没有意识到我包含 PHP 文件的方法是错误的。

感谢所有在这方面花时间帮助我的人，尤其是要让我使用 var_dump 的[silentboy](https://stackoverflow.com/users/2193789/silentboy)，这让我思考为什么 var_dump、echo 等不能与 TideSDK 一起使用，除了 <?php 和 ?> 标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:14:44.477

您将需要将 foo 作为表单中的字段并为提交按钮命名。可能通过更改您的表单将为您提供所需的结果。

```
<form action="action.php" method="get">
        <input type="text" name="foo" value="1234" /> 
        <input type="text" name="bar" />
        <input name="submit" type="submit" value="Go!" />
    </form> 
```

在php中你需要这样写：

```
<?php
$test = $_GET['bar'];

if ($_GET['submit']) {
    $message = 'OK';

}

else {
    $message = 'No';
    }

    echo $test;
    echo $message;
?> 
```

我不确定php是否安装在您的位置。

如果你想用 javascript 制作它，请使用下面的：

```
<script>
//$test = $_GET['bar'];
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}

if (getParameterByName("submit")) {
    message = 'OK';

}

else {
    message = 'No';
    }

</script>
<script>
    document.write(getParameterByName("foo"));
    document.write(message);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:17:37.340

```
 <input type="submit" value="Go!" /> 
```

**“提交**” 这个名字在哪里`$_GET['submit']`？

**使用** `<input type="submit" name ="you" value="Go!" />`
**然后请求** `$_GET['you']`

**它易于检查**

```
if (isset($_GET['bar']))
{
  $message = 'OK';
} 
```

# email - Outlook x-headers 用于自动标记/分类电子邮件

> ID：15947129
> 
> 赞同：0
> 
> 时间：2013-04-11T11:05:20.717
> 
> 标签：email, outlook

我正在为具有将电子邮件发送到集中收件箱的表单的客户创建一个网站。他们强调了快速处理网站电子邮件的重要性，因为它们可能是新的业务线索。出于这个原因，他们希望清楚地标记它们。

简单的选择是在主题前加上一些措辞。也许制定一个消息规则来处理这封电子邮件，但我想知道我是否可以聪明并包含一个自定义 x-header，它告诉 Outlook 自动分配是一个彩色类别或添加一个后续标志。这是可能的还是我坚持客户端添加的消息规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T08:50:00.423

我认为这是不可能的，所以我只是使用了优先级标头。这是使用[Mandrill](http://mandrill.com/) API php 包装器。这并不理想，但对于这个客户来说，它的工作原理是他们想要清楚标记的电子邮件。1 = 最高，3 = 正常，5 = 最低，2 和 4 介于值之间，但不常用。

```
'headers' => array(
    'X-Priority' => 1
) 
```

# php - MySQL 查询：WHERE $val(3) IN $table(2,6,3,8,9)。如何进行该查询

> ID：15947130
> 
> 赞同：0
> 
> 时间：2013-04-11T11:05:21.673
> 
> 标签：php, mysql

所以我将数据作为逗号分隔值保存在表中。

```
availability
6, 9, 11, 12
2, 6, 10
1, 2, 6, 9 
```

我只需要得到我们有 9 行的行。

知道如何进行查询吗？

非常感谢。

编辑：

在开始以这种方式批评之前，聪明的人会明白OP可能是也可能不是原始编码器。通常，OP 可能只是接受了别人的项目并对其进行调试/添加其他功能的人。并不是每个人都在每个项目中单独进行端到端编码。但是，并不是每个人都足够清醒和聪明，能够理解这些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:15:50.187

尝试这个：

```
SELECT * 
FROM your_table 
WHERE availability like '9,%'
   OR availability like '%,9'
   OR availability like '%,9,%' 
```

[演示在这里](http://sqlfiddle.com/#!2/7fd80/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:08:28.400

我建议您以不同的方式存储数据。你可以用 mysql LIKE 解决它，但你必须抛出一个正则表达式，它不能直接靠近另一个数字（所以“”和“，”）。这是相当沉重的。

# c# - 错误显示相机或消息

> ID：15947132
> 
> 赞同：0
> 
> 时间：2013-04-11T11:05:25.890
> 
> 标签：c#, windows-runtime

我有一个程序 (WinRT) 可以显示来自网络摄像头的视频流。在初始化**媒体基础**之前和之后，程序调用函数**ShowMessage**。我评论了这些电话。如果代码运行，如下所示，我可以看到来自网络摄像头的视频流。但是，如果我取消注释调用函数**ShowMessage**，第一次调用**（//第一次调用**）完成，来自网络摄像头的视频流将显示，但第二次调用（**//第二次调用**）不是调用。（我是看不到第二条消息）。我怎样才能做到来自网络摄像头的视频流将显示，并且可以同时调用 ShowMessage？

XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <CaptureElement x:Name="myCaptureElement" Margin="504,124,400,350" FlowDirection="RightToLeft" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Fill" MinWidth="300" MinHeight="200" Height="294" Width="462" />
    <Rectangle x:Name="rect1" Fill="#FFF4F4F5" HorizontalAlignment="Left" Height="100" Margin="43,292,0,0" Stroke="Black" VerticalAlignment="Top" Width="100"/>
</Grid> 
```

C＃：

```
public MainPage()
    {
        this.InitializeComponent();

        Func<Task> unnamed = async () =>
        {
            await TestPhoto();
        };
        unnamed();
    }

    private async Task TestPhoto()
    {
        try
        {
            //await ShowMessage("Do something",true);//first call

            var devInfoCollection = await DeviceInformation.FindAllAsync(DeviceClass.VideoCapture);
            var settings = new Windows.Media.Capture.MediaCaptureInitializationSettings();
            settings.VideoDeviceId = devInfoCollection[0].Id;
            var mediaCaptureMgr = new MediaCapture();
            await mediaCaptureMgr.InitializeAsync();
            mediaCaptureMgr.SetPreviewMirroring(true);
            myCaptureElement.Source = mediaCaptureMgr;
            await mediaCaptureMgr.StartPreviewAsync();

            ImageEncodingProperties imageProperties2 = ImageEncodingProperties.CreateJpeg();
            var memStream3 = new Windows.Storage.Streams.InMemoryRandomAccessStream();
            var mediaCaptureMgr1 = new MediaCapture();
            await mediaCaptureMgr1.InitializeAsync();
            mediaCaptureMgr1.SetPreviewMirroring(true);
            await mediaCaptureMgr1.CapturePhotoToStreamAsync(imageProperties2, memStream3);
            await memStream3.FlushAsync();
            memStream3.Seek(0);

            WriteableBitmap wp1 = new WriteableBitmap(1, 1); ;
            await wp1.SetSourceAsync(memStream3);

            //await ShowMessage("Do something",false);//second call
        }
        catch (Exception)
        {

        }

    }

    public async Task ShowMessage(String s, bool b)
    {

        await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
                                                                     {
                                                                            if (b)
                                                                            {
                                                                                rect1.Visibility=Visibility.Collapsed;
                                                                            }
                                                                            else
                                                                            {
                                                                                rect1.Visibility=Visibility.Visible;
                                                                            }
                                                                     });
        Random r=new Random();
        await new MessageDialog(s+" "+r.Next(1000), "Information").ShowAsync();
    } 
```

# windows-8 - 有没有更好的方法来编写这个 xhrRetry 实用程序函数？

> ID：15947134
> 
> 赞同：0
> 
> 时间：2013-04-11T11:05:30.940
> 
> 标签：windows-8, windows-runtime, winjs

我已经写了这个 xhrWithRetry 方法。

目的：此 util 方法将重试几次，以防服务调用失败并出现错误代码 500。调用此 util 方法的客户端代码应该能够通过链接 then 处理程序来捕获此 util 方法中引发的任何异常。每次重试应该延迟几毫秒。

在我的测试中，

1.  我能够在调用代码中捕获最大重试后最后抛出的异常。
2.  代码也适用于非错误场景。

这个问题主要是看是否有更好的方法来编写相同的异步函数。

```
WinJS.Namespace.define('Utils.Http',
{
    xhrWithRetry: function xhrWithRetry(options, retryCount)
    {
        var maxRetries = 5;
        if (retryCount == undefined)
            retryCount = 0;

        return WinJS.xhr(options).then(null, function onerror(error)
        {
            if (error.status == 500 && retryCount < maxRetries)
                return WinJS.Promise.timeout(100).then(function retryxhr()
                {
                    return Utils.Http.xhrWithRetry(options, retryCount + 1);
                });

            throw error;
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:36:23.617

您可以使 maxRetries 和超时可配置，但一般来说这看起来非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:35:07.777

我认为你拥有它的方式可能是实现你正在寻找的最有效的方式。现在我已经考虑了更多，我已经看到在[Promise/A](http://wiki.commonjs.org/wiki/Promises/A)的上下文中重试函数的[其他实现](https://gist.github.com/domenic/2936696)看起来几乎相同。

因此，我能想到的过去 @ma_il 建议的使重试次数可配置的唯一调整主要是在风格上与基于 JS Hint 的编码标准保持一致。仅有的两个真正挑剔的建议是：

1.  `if`通过查看是否已超过 retryCount 来缩短您的语句，甚至无需检查状态。
2.  `===`在状态检查中使用严格的等号 ( )。

```
WinJS.Namespace.define('Utils.Http', (function () {

    function xhrWithRetry(options, retryCount) {
        var maxRetries = 5;
        if (!retryCount) {
            retryCount = 0;
        }

        return WinJS.xhr(options).then(null,
            function onError(error) {
                if (retryCount < maxRetries && error.status === 500) {
                    return WinJS.Promise.timeout(100).then(function retryxhr() {
                        return xhrWithRetry(options, ++retryCount);
                    });
                }

                throw error;
            });
    }

    return {
        xhrWithRetry: xhrWithRetry
    };

}())); 
```

# ios - 上传视频到服务器

> ID：15947135
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:05:36.437
> 
> 标签：ios, objective-c, ipad

在我的应用程序中，我正在 iPad 中录制视频，我想将其上传到我的服务器。请让我知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:56:29.433

创建包含文件对象的请求字典，稍后 postWith: 函数将处理您的视频绑定任务

```
NSDictionary *requestDict = [NSDictionary dictionaryWithObjectsAndKeys:@"FirstObjectValue",@"FirstKey",
                             @"Second Object",@"Second Key",
                             @"myFileParameterToReadOnServerSide",@"file", nil]; // This line indicate ,POST data has file to attach
[self postWith:requestDict]; 
```

如果要发送视频，以下函数将从要发布的对象字典中读取所有参数，然后在字典中添加“文件”键，以标识要随请求发送的文件

```
- (void)postWith:(NSDictionary *)post_vars
{
#warning Add your Webservice URL here        
    NSString *urlString = [NSString stringWithFormat:@"YourHostString"];

    NSURL *url = [NSURL URLWithString:urlString];
    NSString *boundary = @"----1010101010";

    //  define content type and add Body Boundry
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    NSEnumerator *enumerator = [post_vars keyEnumerator];
    NSString *key;
    NSString *value;
    NSString *content_disposition;

    while ((key = (NSString *)[enumerator nextObject])) {

        if ([key isEqualToString:@"file"]) {

            value = (NSString *)[post_vars objectForKey:key];
            //  ***     Write Your Image Name Here  ***
            // Covnert Video to Data and bind to your post request
#warning Add your Video From Path 
            NSString *videoFilePath = [[NSBundle mainBundle] pathForResource:@"MyVideo" ofType:@"mp4"];
            NSData *postData = [NSData dataWithContentsOfFile:videoFilePath];

            [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\";\r\nfilename=\"testUploadFile.mp4\"\r\n\r\n",value] dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:postData];
        } else {
            value = (NSString *)[post_vars objectForKey:key];

            content_disposition = [NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key];
            [body appendData:[content_disposition dataUsingEncoding:NSUTF8StringEncoding]];
            [body appendData:[value dataUsingEncoding:NSUTF8StringEncoding]];

        }

        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    }

    //Close the request body with Boundry
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [request setHTTPBody:body];
    [request addValue:[NSString stringWithFormat:@"%d", body.length] forHTTPHeaderField: @"Content-Length"];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
    NSLog(@"%@", returnString);        
} 
```

# c# - MvcScaffolding 和 Hinting 查找枚举和相关类

> ID：15947136
> 
> 赞同：2
> 
> 时间：2013-04-11T11:05:38.787
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5, asp.net-mvc-scaffolding

所以我有一个使用 EF5/Code First 编写的深度连接 POCO，它与许多类和 Enum 属性具有一对一和一对多的关系，例如 Gender、AddressType 和很快。

一个非常简化的视图：

```
public class Contact
{
   public string FullName { get; set; }

   public string Title { get; set;

   public GenderEnum Gender { get; set; }

   public Country CountryOfBirth { get; set; }

   public string Address { get; set; }
} 
```

我已经为这个对象和其他对象提供了一个 DbContext，它还为国家列表和我需要表示的各种其他内容创建了很多种子数据。

但是，当我像这样使用 MvcScaffolding 时：

```
Scaffold Controller Model.Contact -Repository -DbContext Model.Context 
```

它创建一个 _CreateOrEdit.cshtml 视图，显示我的联系人模型中的字符串字段，但不提供枚举或任何相关类的下拉列表。

那么，我如何告诉 MvcScaffolding 可以从 Context 加载特定属性的 DataType，还是我需要手动执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:26:35.157

我认为您无法在命令行中指定，但您始终可以使用自定义模板。检查[这个史蒂文安德森的帖子](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)

最好的事情之一是您只需在 CodeTemplates 目录上创建自定义模板，它将自动可用，如果您将文件添加到源代码控制中，它将对您的团队可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T09:19:09.373

事实证明要简单得多。

我所做的只是使用类关系，而实体框架对此很满意，但 MvcScaffolding 并没有识别这些关系。

一旦我为实际类型添加了一个支持 Id 字段和一个 ForeignKey 属性，MvcScaffolding 就直接将其拾取。

# svn - 如何在 SVN 中的中继之间共享资源？

> ID：15947137
> 
> 赞同：1
> 
> 时间：2013-04-11T11:05:39.540
> 
> 标签：svn

我们有两个项目共享相同的公共文件。

例如

parentproj/subproj1/trunk/common/a.js

parentproj/subproj2/trunk/common/a.js

我们将修改 subproj1 中的 a.js，然后需要稍后将其复制到 subproj2，反之亦然。

我们不能用自己的主干将 common 分离到自己的 SVN 项目中，因为那样我们将无法签出 subproj 并获取它。在 CVS 中，我们可以很容易地解决这个问题，方法是将 common 放在两个项目之一中，然后在 CVS 服务器上的项目 2 中创建指向它的符号链接。

所以我们在上面的场景中有两个项目，每个项目都有自己的相同公共文件的副本。下一个问题是如何将更改从 1 合并到 2 或 2 到 1。Eclipse 无法做到这一点，因为它说“无法对与不同项目结构相关的资源执行操作”。Tortiose SVN 不能这样做，因为你不能同时打开两个单独的目录。如果您尝试使用 tortoise 将修改后的文件从一个项目“复制”到另一个项目，它会说它已经存在。

我们已将 subproj1 设置为名义上的 master，并对 subproj2 进行了 svn 复制。但这对我们没有帮助，我相信。

目前，我们使用 eclipse 手动剪切和粘贴每个更新的公共文件的更改，然后提交更改。

这意味着两个不同项目中的版本号不同，即使它是具有相同内容的同一个文件。

有任何想法吗？

目前我们没有或使用命令行 SVN，因为记住并正确地标记/复制文件的长 URL 路径似乎太冒险了，但如果唯一的方法，会考虑它。

我们的代码大部分是js文件，还有一些asp和html

如果我们使用 CVS，我们只需要一个项目（父项目），下面有一个“game1”和一个“game2”目录，以及一个公共目录。这是因为 CVS 允许您基于目录进行分支和标记，而 SVN 只能明智地分支/标记/合并整个主干。主干目录完全妨碍了日食，因为这意味着我们不能一次签出两个项目，我们必须分别签出每个项目，这样我们就不会在路径中获得主干目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:14:40.300

使用 TortoiseSVN 你不需要打开两个目录。只需在其中一个上选择合并，然后选择另一个目录的 URL 作为合并源。

至于分离它 - 您可以将常见的东西分离到第三个位置并将其分支到每个子项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:42:48.760

> 我们不能用自己的主干将 common 分离到自己的 SVN 项目中，因为那样我们将无法签出 subproj 并获取它。

但是你**必须能够**：阅读和使用 svn:externals。如果您共享**整个 common dir**，则外部可以存在于单独的 repo 中。如果你**只共享公共文件**，SVN 必须是 1.6+，externals 目标必须在同一个 repo 中，作为源

# python - python 正则表达式错误：不平衡括号

> ID：15947140
> 
> 赞同：13
> 
> 时间：2013-04-11T11:05:55.810
> 
> 标签：python, regex

我对python很陌生，所以我有一个字典，里面有一些键，还有一个字符串。如果在字典中找到的模式存在于字符串中，我必须替换字符串。字典和字符串都非常大。我正在使用正则表达式来查找模式。

一切正常，直到弹出这样的键 '-(' 或这个 '(-)' 在这种情况下，python 给出了不平衡括号的错误。

这是我编写的代码的外观：

```
somedict={'-(':'value1','(-)':'value2'}
somedata='this is some data containing -( and (-)'
for key in somedict.iterkeys():
    somedata=re.sub(key, 'newvalue', somedata) 
```

这是我在控制台中遇到的错误

```
Traceback (most recent call last):
  File "<console>", line 2, in <module>
  File "C:\Python27\lib\re.py", line 151, in sub
    return _compile(pattern, flags).sub(repl, string, count)
  File "C:\Python27\lib\re.py", line 244, in _compile
    raise error, v # invalid expression
error: unbalanced parenthesis 
```

我还使用正则表达式编译器尝试了很多方法并进行了很多搜索，但没有找到任何解决问题的方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-11T11:08:54.280

您需要使用以下命令*转义*密钥[`re.escape()`](http://docs.python.org/2/library/re.html#re.escape)：

```
somedata = re.sub(re.escape(key), 'newvalue', somedata) 
```

否则内容将被解释为正则表达式。

您在这里根本没有使用正则表达式，所以您不妨使用：

```
somedata = somedata.replace(key, 'newvalue') 
```

如果您只想替换*整个单词*（因此在它们周围使用空格或标点符号，在输入字符串的开头或结尾），您需要某种边界锚点，此时使用正则表达式是有意义的。如果您只有字母数字单词（加上下划线），则`\b`可以：

```
somedata = re.sub(r'\b{}\b'.format(re.escape(key)), 'newvalue', somedata) 
```

这`\b`会在您要替换的字符串之前和之后放置，因此`baz`in`foo baz bar`已更改，但`foo bazbaz bar`is*未*更改。

对于涉及非字母数字“单词”的输入，您需要将 whitespace-or-start 和 whitespace-or-end 锚点与前瞻和后视匹配：

```
somedata = re.sub(r'(?:^|(?<=\s)){}(?:$|(?=\s))'.format(re.escape(key)), 'newvalue', somedata) 
```

在这里，该模式`(?:^|(?<=\s))`使用*两个*锚点，即字符串开头锚点和后视断言，以匹配字符串开头或紧靠左侧的空格的位置。同样`(?:$|(?=\s)`对另一端执行相同的操作，匹配字符串的结尾或后跟空格的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:09:55.237

不要`re`用于如此简单的事情 - 只需替换：

```
somedata = somedata.replace(key, 'newvalue') 
```

也就是说，如果您正在从某些东西构建正则表达式，请使用[`re.escape`](http://docs.python.org/2/library/re.html#re.escape)转义特殊字符：

```
somedata=re.sub(re.escape(key), 'newvalue', somedata) 
```

# knockout.js - 颜色选择器在 knockoutJS 模板选项卡中不起作用

> ID：15947144
> 
> 赞同：1
> 
> 时间：2013-04-11T11:06:00.077
> 
> 标签：knockout.js

嗨，我正在尝试在我的淘汰赛模板中使用 jQuery 颜色选择器，我从[http://labs.abeautifulsite.net/jquery-miniColors/](http://labs.abeautifulsite.net/jquery-miniColors/)获得的颜色选择器。我有一个选项卡选择器（它有 3 个敲除模板），当用户选择敲除完成的选项卡时，它会在每个模板中旋转，颜色选择器出现在第一个选项卡上，但是当我浏览选项卡时，它不会添加颜色其余两个中的选择器，即使我在浏览完所有选项卡（最初工作的位置）后返回原始选项卡。

我在控制台中没有收到任何错误，但即使我尝试从不工作的淘汰模板（2 和 3）中发出 javascript 警报。

任何帮助，将不胜感激。

```
<script id="Links" type="text/html">
    <div id="linksTemplate">
        <section class="well span7">
            <fieldset>
                <legend>Links</legend>
                <label class="inline">
                    <span class="formLabel">Border Colour</span>
                    <input type="text" data-bind="value: settings.links.style.stroke" class="minicolors" data-control="saturation" />
                </label>

                <label class="inline">
                    <span class="formLabel">Border Width</span>
                    <input type="text" data-bind="value: settings.links.style.stroke_width" />
                </label>
            </fieldset>
        </section>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            alert('hello');
        });
    </script>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T15:46:29.793

您需要为敲除映射创建绑定。我正在使用相同的颜色选择器并让它工作。无法告诉您这是否是最佳解决方案，因为这是一种反复试验。我对淘汰赛不是很熟悉，但它确实有效。

这是您需要的绑定功能：

```
ko.bindingHandlers.minicolors = {
    init: function (element, valueAccessor, allBindingsAccessor) {

        var options = allBindingsAccessor().defaultSettings || {};

  var funcOnSelectColor = function () {
        var observable = valueAccessor();
  observable($(element).minicolors("value"));
}
//-- also change event to hide
options.hide = funcOnSelectColor;

$(element).minicolors(options);

//handle the field changing
ko.utils.registerEventHandler(element, "change", funcOnSelectColor);

//handle disposal (if KO removes by the template binding)
ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
  $(element).minicolors("destroy");
});

},
 update: function (element, valueAccessor) {
   var value = ko.utils.unwrapObservable(valueAccessor());

   var current = $(element).minicolors("value");
   if (value - current !== 0) {
     $(element).minicolors("value", value);
   }
 }
}; 
```

这是你如何使用它：

```
<input class="minicolors" data-position="default" style="padding: 2px; height: 20px;" data-bind="minicolors: MYKNOCKOUTBINDING, defaultSettings: {}" /> 
```

希望这可以帮助

# wpf - WPF，更改当前文化的 NumberFormatInfo 不起作用

> ID：15947145
> 
> 赞同：1
> 
> 时间：2013-04-11T11:06:00.460
> 
> 标签：wpf, globalization

在 App.xaml.cs 我有：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");

FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement), 
    new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(
        CultureInfo.CurrentCulture.IetfLanguageTag))); 
```

在我的 MainWindow.xaml.cs 我有：

```
NumberFormatInfo nfi = System.Threading.Thread.CurrentThread
                       .CurrentCulture.NumberFormat;
nfi.CurrencySymbol = "USD";
nfi.CurrencyDecimalSeparator = ".";
nfi.CurrencyDecimalDigits = 0;

NumberFormatInfo nfi = System.Threading.Thread.CurrentThread
                       .CurrentUICulture.NumberFormat;
nfi.CurrencySymbol = "USD";
nfi.CurrencyDecimalSeparator = ".";
nfi.CurrencyDecimalDigits = 0; 
```

现在在另一个将从 MainWindow 打开的窗口中，我写了以下内容：

```
<TextBox Text="{Binding Total, StringFormat=c}" 
```

但结果是 1,200.00 美元，而不是我的预期：1,200 美元。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:17:11.990

可能有更聪明的方法，但这应该始终如一地工作......

```
// xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
<TextBox Text="{Binding Total, StringFormat='{}{0:C}', ConverterCulture={x:Static sysglb:CultureInfo.CurrentUICulture}}" /> 
```

并在应用程序启动或 ctor 时移动它...

然后做`OverrideMetadata`和之前`base.OnStartup`- 例如..

```
protected override void OnStartup(StartupEventArgs e)
{
    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-GB");
    Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-GB");

    NumberFormatInfo nfi = System.Threading.Thread.CurrentThread
                            .CurrentCulture.NumberFormat;
    nfi.CurrencySymbol = "USD";
    nfi.CurrencyDecimalSeparator = ".";
    nfi.CurrencyDecimalDigits = 0;

    nfi = System.Threading.Thread.CurrentThread
                            .CurrentUICulture.NumberFormat;
    nfi.CurrencySymbol = "USD";
    nfi.CurrencyDecimalSeparator = ".";
    nfi.CurrencyDecimalDigits = 0;

    FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement),
        new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(
            CultureInfo.CurrentCulture.IetfLanguageTag)));

    base.OnStartup(e);

} 
```

也可以看看：

[WPF StringFormat={0:C} 显示为美元](https://stackoverflow.com/questions/2764615/wpf-stringformat-0c-showing-as-dollars/12115452#12115452)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:45:21.850

NumberFormatting 是使用您的 CurrentCulture 的操作（默认情况下，除非您明确地向该方法提供 Culture 或 NumberFormatter）而不是 CurrentUICulture。CurrentUICulture 用于资源（本地化）查找。

您从 CurrentCulture 获得的 NumberFormatInfo 应该是只读[的（请参阅 NumberFormatInfo 文档的备注）](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)，并且在您尝试设置任何属性时应该抛出 InvalidOperationException [（请参阅 NumberFormatinfo.IsReadOnly 的备注）](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.isreadonly.aspx/html)。（您是否正在接受此异常？）如果您创建一个可写的 CultureInfo 并更改其属性，则可以将其设置为您当前的文化。

您需要执行以下操作：

```
CultureInfo ci = CultureInfo.CreateSpecificCulture("en-US");
NumberFormatInfo nfi= ci.NumberFormat;
nfi.CurrencySymbol = "USD";
nfi.CurrencyDecimalSeparator = ".";
nfi.CurrencyDecimalDigits = 0;
// set the default culture for all threads that haven't been explicitly set (.Net 4.5)
CultureInfo.DefaultThreadCurrentCulture = ci;
// or the following if you aren't using .Net 4.5
// Thread.CurrentThread.CurrentCulture = ci; 
```

# android - onActivityResult 中的自定义对话框显示错误

> ID：15947146
> 
> 赞同：0
> 
> 时间：2013-04-11T11:06:00.653
> 
> 标签：android, android-activity, dialog

我有一个习惯`Dialoge` 里面`onActivityResult`。但它显示了这样的错误

```
 04-11 16:40:32.141: D/dalvikvm(8897): GC_EXTERNAL_ALLOC freed 689 objects / 53336 bytes in 100ms
04-11 16:40:43.901: D/UPC Code(8897): 000014312001220
04-11 16:40:44.001: D/AndroidRuntime(8897): Shutting down VM
04-11 16:40:44.001: W/dalvikvm(8897): threadid=1: thread exiting with uncaught exception (group=0x40028a00)
04-11 16:40:44.041: E/AndroidRuntime(8897): FATAL EXCEPTION: main
04-11 16:40:44.041: E/AndroidRuntime(8897): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=195543262, result=-1, data=Intent { act=com.google.zxing.client.android.SCAN flg=0x80000 (has extras) }} to activity {com.heuristics.barcodescanner/com.heuristics.barcodescanner.MainActivity}: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3712)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3754)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.ActivityThread.access$2800(ActivityThread.java:135)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2162)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.os.Looper.loop(Looper.java:143)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.ActivityThread.main(ActivityThread.java:4914)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at java.lang.reflect.Method.invoke(Method.java:521)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at dalvik.system.NativeStart.main(Native Method)
04-11 16:40:44.041: E/AndroidRuntime(8897): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.view.ViewRoot.setView(ViewRoot.java:513)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.Dialog.show(Dialog.java:241)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at com.heuristics.barcodescanner.MainActivity.onActivityResult(MainActivity.java:137)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.Activity.dispatchActivityResult(Activity.java:3931)
04-11 16:40:44.041: E/AndroidRuntime(8897):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3708)
04-11 16:40:44.041: E/AndroidRuntime(8897):     ... 11 more
04-11 16:40:46.191: I/Process(8897): Sending signal. PID: 8897 SIG: 9 
```

我`onActivityResult`是这样的

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch(requestCode) {
    case IntentIntegrator.REQUEST_CODE: {
        if (resultCode != RESULT_CANCELED) {
            IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);
            if (scanResult != null) {
                String upc = scanResult.getContents();

                Log.d("UPC Code",upc);
                Product_list.add(upc);

                final Dialog dialog = new Dialog(getApplicationContext(), android.R.style.Theme_Translucent_NoTitleBar);
                dialog.setCancelable(false);
                dialog.setContentView(R.layout.quantity);
                Toast.makeText(getApplicationContext(), "DIALOGUE", Toast.LENGTH_SHORT).show();

                final Button navi_left;
                Button navi_right, reset, ok;
                final TextView quantity_text;

                navi_left = (Button)dialog.findViewById(R.id.navi_left);
                navi_right = (Button)dialog.findViewById(R.id.navi_right);
                reset = (Button)dialog.findViewById(R.id.reset);
                ok = (Button)dialog.findViewById(R.id.ok);
                quantity_text = (TextView)dialog.findViewById(R.id.quantity_nums);

                navi_left.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        String pre_= quantity_text.getText().toString();
                        int post = Integer.parseInt(pre_);
                        int post_value;
                        if(post<=0)
                        {

                            post_value = post;
                        }
                        else
                        {
                            post_value = post-1;
                        }

                    }
                });

                navi_right.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        String pre_= quantity_text.getText().toString();
                        int post_ = Integer.parseInt(pre_)+1;
                        quantity_text.setText(post_+"");

                    }
                });

                reset.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        quantity_text.setText(0);

                    }
                });

                ok.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        dialog.dismiss();
                        Quantity_list.add(quantity_text.getText().toString());
                    }
                });
                dialog.show();

                ArrayAdapter<String> my_adapter = new Custom_Adapter(getApplicationContext(), Product_list);
                my_adapter.notifyDataSetChanged();
                my_list.setAdapter(my_adapter);

            }
        }
        break;
    }
    }
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:08:09.370

尝试

```
 navi_left = (Button)dialog.findViewById(R.id.navi_left); 
```

对所有按钮和文本视图执行相同的操作

而不是 getApplicationContext() 尝试 MainActivity.this

```
 final Dialog dialog = new Dialog(MainActivity.this, android.R.style.Theme_Translucent_NoTitleBar); 
```

# firefox - addEventListener 仅用于选项卡的第一个焦点？

> ID：15947149
> 
> 赞同：0
> 
> 时间：2013-04-11T11:06:06.797
> 
> 标签：firefox, firefox-addon

（仅）第一次从插件打开选项卡的事件是什么？
该选项卡`newTab`较早打开。我的代码是：

```
var newTabBrowser = tabbrowser.getBrowserForTab(newTab);
newTabBrowser.addEventListener("focus", function () { 
    newTabBrowser.contentDocument.body.innerHTML +="<div>hello world</div>";
    newTabBrowser.contentDocument.title = "hello world";
}, true); 
```

每次焦点不集中和再次集中时，焦点都会添加你好世界。
Load 会立即触发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:46:16.717

侦听该`pageshow`事件并使用布尔标志来运行您的代码一次。

# c# - 尝试将图像保存到 Windows Phone 8 中的媒体库时出现异常

> ID：15947150
> 
> 赞同：1
> 
> 时间：2013-04-11T11:06:07.430
> 
> 标签：c#, windows-phone-8, windows-phone

尝试将图像保存到`MediaLibrary`我收到以下错误

> Microsoft.Xna.Framework.ni.dll 中出现“System.InvalidOperationException”类型的异常，但未在用户代码中处理

这是我正在使用的代码

```
if (SourceImage != null) // Source Image is WriteableBitmap
{
    var imageArray = SourceImage.ToByteArray(); // WriteableBitmapExWinPhone (extension method)
    var res = await SavePhotoToImageHub(imageArray);
    await ShowMessage(res ? AppResources.MEDIA_LIBRARY_SUCCESS_MESSAGE :  AppResources.MEDIA_LIBRARY_FAILURE_MESSAGE);
} 
```

使用的方法是

```
private Task<bool> SavePhotoToImageHub(byte[] imageArray)
{
    using (var mediaLibrary = new MediaLibrary())
    {
        var fileName = string.Format("Gs{0}.jpg", Guid.NewGuid());
        var picture = mediaLibrary.SavePicture(fileName, imageArray);
        if (picture.Name.Contains(fileName)) return Task.FromResult(true);
    }

    return Task.FromResult(false);
} 
```

我也尝试过流而不是字节数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T11:26:52.863

您需要检查的第一件事是您是否已将 ID_CAP_MEDIALIB_PHOTO 添加到您的应用清单中。

第二件事是流-您是否尝试将其重置为开头？这种方法对我有用：

```
private bool SavePhotoToImageHub(WriteableBitmap bmp)
    {

        using (var mediaLibrary = new MediaLibrary())
        {
            using (var stream = new MemoryStream())
            {
                var fileName = string.Format("Gs{0}.jpg", Guid.NewGuid());
                bmp.SaveJpeg(stream, bmp.PixelWidth, bmp.PixelHeight, 0, 100);
                stream.Seek(0, SeekOrigin.Begin);
                var picture = mediaLibrary.SavePicture(fileName,stream);
                if (picture.Name.Contains(fileName)) return true;
            }
        }
        return false;
    } 
```

# selenium-webdriver - 使用 Selenium Webdriver 提取下拉列表的内容并将其保存在字符串数组中

> ID：15947152
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:06:11.793
> 
> 标签：selenium-webdriver

如何使用 Selenium Webdriver 提取下拉列表的所有内容并将其保存为字符串数组。稍后我在另一个步骤中需要这个数组的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:51:19.110

```
driver.findElements(by.xpath); 
```

将其保存为列表。那么您可以通过调用 list[1] 或 list[2] 来调用它，请具体说明您的问题。

# jtextfield - Java：显示框架后 JTextField 自动选择文本

> ID：15947158
> 
> 赞同：0
> 
> 时间：2013-04-11T11:06:41.293
> 
> 标签：jtextfield

我有 JTextField。 **txtPickANick.setText("选择昵称");** 我需要在显示带有此文本的 JFrame 时选择文本。我尝试 selectAll() 但它不起作用。

```
private JTextField getTxtPickANick() {
    if (txtPickANick == null) {
        txtPickANick = new JTextField();
        txtPickANick.setFont(new Font("Bookman Old Style", Font.PLAIN, 15));
        txtPickANick.setHorizontalAlignment(SwingConstants.CENTER);             
        txtPickANick.setBounds(44, 74, 185, 21);
        txtPickANick.setColumns(10);
        txtPickANick.setDocument(new LimitDlzka(17));
        txtPickANick.setText("Pick a nick name");
        txtPickANick.selectAll();

    }
    return txtPickANick;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:45:12.420

在显示框架后调用`selectAll()`- 不确定你可以调用它的最早点是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T05:08:04.633

你可以用`textPickANic.requestFocus();`它来聚焦它。之后，您可以应用`selectAll();`方法。

# json - xpages中的jqPlot

> ID：15947160
> 
> 赞同：0
> 
> 时间：2013-04-11T11:06:45.143
> 
> 标签：json, xpages, jqplot, lotus-domino

有没有人使用 jqPlot 在 XPages 中构建图形？如果有人有，您是否需要拥有 xpages 扩展库？除了 Dojo，还有人在 xpages 中使用过任何其他绘图工具吗？

我正在关注本教程，但我不知道如何将 JSON 值全部放在一列中，如屏幕截图所示。

[http://blog.wilhow.net/2013/03/17/charting-104-in-xpages-connecting-to-notes-document/](http://blog.wilhow.net/2013/03/17/charting-104-in-xpages-connecting-to-notes-document/)

该教程还说“您需要在“属性定义”选项卡中定义一些复合数据，以便可以将这些值作为变量传递给 jqPlot。XPages 是否已经内置了 jqPlot？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T02:04:34.317

爱奥那

“..您是否需要 xpages 扩展库..”

ANS:Extension Library(Ext Lib) 对于示例来说不是必需的。Ext lib 旨在快速开发将在 XPages 中频繁重用的某些常见功能。IE。REST 服务，名称选择器。

“..XPages 中是否已经内置了 jqPlot？..”

ANS：不是。jpPlot 是一个独立于 XPages 构建和维护的外部库。

“...除了 Dojo 之外，还有人在 xpages 中使用过任何其他绘图工具吗？...”

ANS：还有很多其他的绘图工具可以使用，比如 KendoUI、Highcharts、谷歌图表。只要绘图工具是基于 js 的，您应该能够相当容易地将它与 XPages 集成。

“..我不知道如何在一列中获取所有 JSON 值..”

ANS：该特定列的列公式如下所示。IE,FF,CH,SA,OP 是字段名。 [http://wilhow.files.wordpress.com/2013/04/screen-shot-2013-04-11-at-8-36-09-pm.png](http://wilhow.files.wordpress.com/2013/04/screen-shot-2013-04-11-at-8-36-09-pm.png)

“...在属性定义选项卡中定义一些复合数据...”

ANS：只有当你想遵循这个例子或者你想创建一个可重用的自定义组件来绘制具有一组给定值的图表时，以上才是正确的。CompositeData 是 XPages 的自定义控件中内置的一项功能，允许从嵌入在另一个自定义控件中的一个自定义控件接收值。以下是示例中如何定义和实现 CompositeData 的示例。

[http://wilhow.files.wordpress.com/2013/04/compositedata1.png](http://wilhow.files.wordpress.com/2013/04/compositedata1.png)

不幸的是，我还不能发布任何图片。您必须点击链接才能查看图像。无论如何，我希望答案有所帮助。

干杯，Wil [xpages](/questions/tagged/xpages "显示标记为“xpages”的问题") [xpages-ssjs](/questions/tagged/xpages-ssjs "显示标记为“xpages-ssjs”的问题") [lotus-notes](/questions/tagged/lotus-notes "显示标记为“莲花笔记”的问题") [lotus-domino](/questions/tagged/lotus-domino "显示标记为“莲花-多米诺骨牌”的问题") [jqplot](/questions/tagged/jqplot "显示标记为“jqplot”的问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:55:28.680

我是[D3JS](http://d3js.org/)的忠实粉丝。虽然它具有相当陡峭的学习曲线（如 Ariadne 飞行路径），但它的功能非常灵活。为了获取 JSON 格式的数据，我使用了 outputScript 标记和自定义参数。因此，在 outputScript 中，我有一行喜欢`var data = #{compositeData.data};`并使用 SSJS 提供数据。

我有这段代码来确保 d3js 已加载：

```
XSP.addOnLoad(function() {
var scriptTag = "<script src=\"http://d3js.org/d3.v3.min.js\"><\/script>";
window.d3 || document.write(scriptTag);
}) 
```

但您也可以从 Domino 服务器加载它。组装所有这些所需的更多代码在 XSnippets 中：

*   [SSJS](http://openntf.org/XSnippets.nsf/snippet.xsp?id=render-a-d3js-bar-chart-part-2)从视图中检索数据
*   JS渲染[条形图](http://openntf.org/XSnippets.nsf/snippet.xsp?id=render-a-d3js-bar-chart-part-1)

祝你好运（是的，这是我博客中未完成的草稿之一）

# oracle - 部署到 Oracle 应用服务器时找不到休眠映射？

> ID：15947172
> 
> 赞同：0
> 
> 时间：2013-04-11T11:07:06.290
> 
> 标签：oracle, spring, hibernate, classpath, hibernate-mapping

`jar`在 Oracle 应用程序服务器上的文件中部署时，我遇到了 Hibernate 资源未找到的问题。

我有一些休眠映射文件定义`LocalSessionFactoryBean`如下：

```
<bean id="sessionFactory" 
  class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
  <property name="dataSource" ref="dataSource"/>
  <property name="mappingLocations">
    <list>
       <value>classpath:/mapping/*.hbm.xml</value>
    </list>
  </property>
  ...
</bean> 
```

这个 bean 定义在一个文件中`applicationContext.xml`。

hibernate 映射、这些映射引用的类以及`applicationContext.xml`文件位于`foo`生成工件的模块中`foo.jar`。

我创建了一个`.ear`引用`foo.jar`并使用相同文件的`applicationContext.xml`文件。当我将其部署`.ear`到 Oracle 应用程序服务器时，我看到以下错误：

`java.io.FileNotFoundException: class path resource [mapping/] cannot be resolved to absolute file path because it does not reside in the file system: code-source:/.../oas10.1.3/j2ee/.../applications/.../WEB-INF/lib/foo.jar!mapping/`

当我检查时，我可以按预期`/WEB-INF/lib/foo.jar`看到带有 Hibernate 映射文件的目录。`mappings`

作为健全性检查，我创建了一个简单的项目，它依赖于`foo`并运行以下测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:applicationContext.xml"})
public class AppTest {

  @Autowired SessionFactory sessionFactory;

  @Test
  public void loadObjects() {
    Session session = sessionFactory.openSession();
    List<Foo> results = session.createQuery("from Foo").list();
    System.out.println("found " + results.size() + " results");
  }
} 
```

这按预期工作：HQL 查询运行，我从数据库中取回正确数量的 Foo 对象。

那么，为什么那个简单的应用程序在`foo.jar`工作中引用了映射资源，但在 Oracle 应用服务器上做同样的事情却导致找不到资源呢？

编辑：我尝试使用`mappingJarLocations`而不是`mappingLocations`：

```
<bean id="sessionFactory" 
  class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
  <property name="dataSource" ref="dataSource"/>
  <property name="mappingJarLocations">
    <list>
       <value>WEB-INF/lib/foo.jar</value>
    </list>
  </property>
  ...
</bean> 
```

并得到了一个`FileNotFoundException`.

**编辑：**我回到使用`mappingLocations`而不是`mappingJarLocations`（如在我的第一个示例中），但这次我将`*.hbm.xml`文件直接复制到`.war`文件的`WEB-INF/classes`目录中。

毫不奇怪，这奏效了：

`setMappingLocations() - file:/.../oas10.1.3/j2ee/.../applications/.../raps-site-9.0/WEB-INF/classes/mapping/Address.hbm.xml`

我将按照建议尝试实用程序 jar，但作为一项临时措施，我将修改我`pom.xml`的以将映射直接复制到`WEB-INF/classes`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:39:48.177

您需要将罐子包装在耳朵本身内。这样的罐子被称为实用罐子。

它们是执行此操作的几种可能方法，请参阅[http://www.ibm.com/developerworks/rational/library/07/1211_schrag/](http://www.ibm.com/developerworks/rational/library/07/1211_schrag/)

# java - 如何禁用/更改 JTable 上的左键单击选择

> ID：15947182
> 
> 赞同：0
> 
> 时间：2013-04-11T11:07:30.343
> 
> 标签：java, swing, jtable, border, mouseevent

我想创建一个像 Total Comander 一样工作的 Jtable - 左键单击选择后一行应该有一个虚线边框，右键单击后应该选择它。

到目前为止，我使用的是 MouseAdapter，我可以在右键单击它后选择一行，但如果我使用左键单击它也会被选中。如何禁用它或更改左键单击行为以使行具有虚线边框？

这是我的鼠标适配器：

```
public class TableMouseListener extends MouseAdapter {

    private JTable table;

    public TableMouseListener(JTable table) {
        this.table = table;
    }

    public void mousePressed(MouseEvent e) {
        if (SwingUtilities.isLeftMouseButton(e)) {

        } else if (SwingUtilities.isRightMouseButton(e)) {
            Point p = e.getPoint();
            int rowNumber = table.rowAtPoint(p);
            ListSelectionModel model = table.getSelectionModel();
            model.setSelectionInterval(rowNumber, rowNumber);
        }
    }

} 
```

# javascript - Javascript浮点加法给出错误结果

> ID：15947183
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:07:34.307
> 
> 标签：javascript

当我尝试`0.1 + 0.2`使用我的 JavaScript 代码时，我得到了结果`0.30000000000000004`。我期待`0.3`结果。谁能告诉我为什么会这样？另外，我该如何解决这个问题以获得结果`0.3`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:09:29.450

**使用来自 Alnitak 的输入进行编辑**

您必须使用 toFixed() 方法指定所需的小数位数。如果您只想要一位小数，请尝试

```
var result = (0.1 + 0.2).toFixed(1); 
```

此表达式返回一个字符串，它表示四舍五入到小数点后 1 位的浮点数。

# java - 如何以不同的方式实现同 一个接口的泛型方法？

> ID：15947187
> 
> 赞同：2
> 
> 时间：2013-04-11T11:07:47.970
> 
> 标签：java, generics, overriding

我将**Face**接口定义如下：

```
public interface Face {
    <R> LoadBalancer<R> create(List<R> resources);    
} 
```

然后是另一个接口`Type`和两个实现该`Face`接口的类。

```
public interface Type{} 
```

这是`Face` 名为**FaceImpl1**的接口的第一个实现。

```
public class FaceImpl implements Face {

    @Override
    public <R extends Type> create<R> newLoadBalancer(List<R> resources) {
        return new SomeObject<R>(resources).
    }
} 
```

另一个实现**FaceImpl2**

```
public class FaceImpl2 implements Face {

    @Override
    public <R> create<R> create(List<R> resources) {
        return new SomeObject2<R>(resources).
    }
} 
```

如您所见，我想将泛型类型限制为`R`实现`Type`接口`FaceImpl1`的类，但在类`FaceImpl2`中，我不需要这个限制。

问题是 Java 不允许这样做。那么为了做到这一点，我应该如何实现这两个不同的类呢？或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:16:25.040

您可以通过使`interface`自身具有有界类型的泛型来做到这一点

```
interface Face<R> {

    List<? extends R> create(List<? extends R> resources);
}

public interface Type {
}

public class Impl implements Face<Type> {

    @Override
    public List<? extends Type> create(List<? extends Type> resources) {            
    }
}

public class Impl2 implements Face<Object> {

    @Override
    public List<? extends Object> create(List<? extends Object> resources) {
    }
} 
```

否则，该方法不会实现合同中定义的合同，`interface`因为合同说“任何类型`R`”，并且您正在使您的方法更具约束力。

想想当有人这样做时会发生什么：

```
final FaceImpl1 face1 = new  FaceImpl1();
final Face face = (Face) face1; 
```

这是完全有效的，但在您的尝试下，您现在失去了任何类型限制。

如果您将类型添加到`interface`您将收到编译器警告，因为您会将 a 强制转换`Face<Something>`为 a `Face`- 即原始类型。

# cluster-computing - Jahia 社区模式中的集群

> ID：15947196
> 
> 赞同：0
> 
> 时间：2013-04-11T11:08:26.030
> 
> 标签：cluster-computing, jahia

我们可以在 Jahia 社区版中进行集群吗？不使用企业版自带的任何工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T13:52:25.157

我认为在 Jahia 的社区版本中启用集群并不容易。当然，由于源是 GPL，如果你想添加它，没有人会阻止你添加它，但这并不是一件容易的事。

为什么不购买企业版，如果您是一家公司并帮助 Jahia 发展更好的 CMS，它不会“那么”昂贵？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-13T15:19:26.920

你不能用社区版做集群，这对 Jahia 来说不是什么新鲜事。

如果您想了解 Jahia 的社区发行版和企业发行版之间的区别，请阅读 [Jahia 开发人员“开始”页面](https://www.jahia.com/get-started/for-developers#product-download)上的“发行版比较表” 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T12:50:18.520

我可以说社区中的集群是不可能的。并且不会。我在企业中与jahia 一起工作。有点晚了，但对于所有会搜索的人。

# javascript - Phonegap iOS 音量控制

> ID：15947202
> 
> 赞同：4
> 
> 时间：2013-04-11T11:08:34.480
> 
> 标签：javascript, ios, cordova

iPhone 有 2 个音量控制选项：

*   设备/应用程序声音
*   媒体播放器声音

默认为设备声音。当您按下音量降低控件时，设备声音会减小。但是当您播放音乐时，媒体播放器的声音会发生变化。

如何更改 PhoneGap 中的默认音量控制，因此当您按下音量减小或增大时，音乐音量会改变，而不是设备音量。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T13:08:38.847

我不确定它是否可能。正如我认为它是由操作系统管理的？

不过，您可以通过编程方式更改通过 phonegap 播放的声音的级别。因此，如果您可以在应用程序中创建几个按钮，则可以对其进行调整。

在此处查看最后的回复[Phonegap / Cordova 更改单个声音的音量？](https://stackoverflow.com/questions/13436540/phonegap-cordova-change-volume-of-individual-sound)

# priority-queue - 从 Firebase 的列表中读取最高优先级的孩子

> ID：15947205
> 
> 赞同：0
> 
> 时间：2013-04-11T11:08:51.873
> 
> 标签：priority-queue, firebase

我想在 Firebase 的列表中获得具有最高优先级的孩子，我该如何做到这一点而不必将所有孩子都保留在客户端？

我能想到的一种方法是在firebase中维护一个类似数据结构的链表：

```
head: 0
nodes:
  0: {next: 10}, priority=1
  10: {next: 4}, priority=23
  4: {next: 2}, priority=45
  2: {next: null}, priority=67 
```

然后假设我将 0 的优先级更新为`46`，这将触发`on('child_moved')`事件`prevChildName=4`，然后我将相应地更新节点 0、10 和 2 的头指针和下一个指针......

另一种方法是将 ID 列表保存在一个位置并相应地更新它：

```
list: "0, 10, 4, 2" 
```

但是随着列表的增长，每次更新在带宽方面都会非常昂贵。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:03:36.357

使用`limit()`和`endAt()`获得最高优先级。`endAt`没有参数的从最大值开始。

```
var ref = FB.limit(2).endAt(); 
```

[这是一个在行动中展示它的小提琴](http://jsfiddle.net/katowulf/ZtZBg/4/)。好玩好玩好玩！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:44:51.907

我可能遗漏了一些东西，但这听起来正是我们的[查询](https://www.firebase.com/docs/queries.html)函数的用途。要获得优先级最低的项目，您应该能够：

```
ref.startAt().limit(1).once('child_added', function(childSnapshot) {
  // childSnapshot is the item with the lowest priority number (item 0 in your example).
}); 
```

# uitableview - Xamarin/MonoTouch UITableView 缓存

> ID：15947206
> 
> 赞同：0
> 
> 时间：2013-04-11T11:08:52.307
> 
> 标签：uitableview, xamarin.ios, uilabel, xamarin

我有一个 UITableView，我正在填充图像和标签。在我的源类中，我为每个单元格创建一个 UILabel：

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
    {
        UITableViewCell cell = tableView.DequeueReusableCell (cellIdentifier);

        //if there are no cells create a new one
        if (cell == null)
            cell = new UITableViewCell (UITableViewCellStyle.Default, cellIdentifier);
        cell.UserInteractionEnabled = false;

        //create a new cellobject - this grabs the image and returns a CGBitmapContext
        CellObject _cellObject = new CellObject();
        cell.ImageView.Image = _cellObject.DrawCell(treasures[indexPath.Row].cellImage);

        //add text
        UILabel secondViewLabel = new UILabel();
        secondViewLabel.Text = treasures[indexPath.Row].cellTitle;
        Console.WriteLine("The title is: " + treasures[indexPath.Row].cellTitle); 
        secondViewLabel.TextColor = UIColor.White;
        secondViewLabel.TextAlignment = UITextAlignment.Center;
        secondViewLabel.Lines = 0;
        secondViewLabel.LineBreakMode = UILineBreakMode.WordWrap;
        secondViewLabel.Font = UIFont.FromName("Helvetica", 16);
        secondViewLabel.BackgroundColor = UIColor.FromRGB(205, 54, 51);

        //get the width of the text
        SizeF labelSize = secondViewLabel.StringSize(secondViewLabel.Text, secondViewLabel.Font);

        secondViewLabel.Frame = new RectangleF(0, 110 - (labelSize.Height + 10), labelSize.Width + 20, labelSize.Height + 10);

        //add a second view
        UIView secondView = new UIView();
        secondView.AddSubview(secondViewLabel);
        cell.ContentView.AddSubview(secondView);

        return cell;
    } 
```

这完美地构建了表格，但是似乎每个单元格都在为每个其他单元格以及它自己的单元格获取 UILabel。我可以在较短的标签上看到这一点，你可以看到后面的其他标签。我正在加载 XML 并将其解析为一个列表，然后处理该列表：

```
List<Treasure> treasures = new List<Treasure>();

    protected class Treasure {
        public string cellTitle { get; set; }
        public string cellTag { get; set; }
        public string cellImage { get; set; }
        public string audioFile { get; set; }
        public string mainTitle { get; set; }
        public string mainTag { get; set; }
        public string mainBody { get; set; }
        public string mainImage { get; set; }
        public string mainCaption { get; set; }
    }

    public CellSource (/*string[] items*/)
    {
        Console.WriteLine("CellSource called");
        string fileName = "treasuresiPhone.xml";
        XDocument doc = XDocument.Load(fileName);
        treasures = doc.Descendants("treasures").FirstOrDefault().Descendants("treasure").Select(p=> new Treasure() {
            cellTitle = p.Element("celltitle").Value,
            cellTag = p.Element("celltagline").Value,
            cellImage = p.Element("cellimage").Value
        }).ToList();

        numCells = treasures.Count();

    } 
```

任何想法或建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:20:58.333

`UILabel`每次调用都创建新`GetCell`的有点弱：

*   是时候创建新的 UI 对象并在常用方法中设置它的属性了；
*   GC 可能会吃掉你的`UILabel`原因，但没有明确的链接存在。

尝试其他解决方案：

*   创建您自己的子类`UITableViewCell`；
*   然后，`UILabel`在其中声明属性；
*   然后，当 dequeue cell 尝试将 cell 转换为您的类型时。如果它不为空，则将其标签的文本属性设置为新值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:57:23.917

如果您将一个单元格出列，它将已经具有`UILabels`您添加的子视图 ( )。单元格作为一个整体进行序列化，其中包含您在创建时添加的所有视图。所以：如果您不想子类化`UITableViewCell`，请将 Tag 值分配给您的自定义视图并用于`ViewWithTag`访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:27:26.800

这似乎对我有用：

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
    {
        UITableViewCell cell = tableView.DequeueReusableCell (cellIdentifier);

        cell = new UITableViewCell (UITableViewCellStyle.Default, cellIdentifier);
        cell.UserInteractionEnabled = false;
        UILabel secondViewLabel = new UILabel();

        //if there are no cells create a new one
        if (cell == null) {
            Console.WriteLine("cell == null");
        } else {

            //create a new cellobject - this grabs the image and returns a CGBitmapContext
            CellObject _cellObject = new CellObject();
            cell.ImageView.Image = _cellObject.DrawCell(treasures[indexPath.Row].cellImage);

            //add text
            secondViewLabel.Tag = 1;
            secondViewLabel.Text = treasures[indexPath.Row].cellTitle;
            Console.WriteLine("The title is: " + treasures[indexPath.Row].cellTitle); 
            secondViewLabel.TextColor = UIColor.White;
            secondViewLabel.TextAlignment = UITextAlignment.Center;
            secondViewLabel.Lines = 0;
            secondViewLabel.LineBreakMode = UILineBreakMode.WordWrap;
            secondViewLabel.Font = UIFont.FromName("Helvetica", 16);
            secondViewLabel.BackgroundColor = UIColor.FromRGB(205, 54, 51);

            //get the width of the text
            SizeF labelSize = secondViewLabel.StringSize(secondViewLabel.Text, secondViewLabel.Font);

            secondViewLabel.Frame = new RectangleF(0, 110 - (labelSize.Height + 10), labelSize.Width + 20, labelSize.Height + 10);

            //add a second view
            UIView secondView = new UIView();
            secondView.AddSubview(secondViewLabel);
            cell.ContentView.AddSubview(secondView);
        }
        return cell;
    } 
```

# php - 如果小于输入字段的最大长度，则在输入数字的左侧添加零

> ID：15947207
> 
> 赞同：0
> 
> 时间：2013-04-11T11:08:53.293
> 
> 标签：php, jquery, html

我有三个电话号码输入，每个输入的长度分别为 4、8、4。当达到输入字段的最大长度时，我通过 jQuery 处理鼠标焦点，然后焦点/跳转到下一个字段。

如果每个字段中的数字小于最大长度，我还想做一个额外的焦点来计算它们，然后在左侧附加零以使其等于相应输入字段的最大长度，当我们回显输入的字段时。例如，如果在第一次输入中有人只输入了两个数字，`47`那么输出应该`0047`在回声后的左侧附加两个零。

这是我的 HTML：

```
<form>
<input type="text" name="area_code" id="area_code" maxlength="4" size="3" /> -
<input type="text" name="number1" id="number1" maxlength="8" size="8" /> -
<input type="text" name="number2" id="number2" maxlength="4" size="3" />
</form> 
```

这是jQuery

```
<script type="text/javascript" src="js/jquery.autotab-1.1b.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$('#area_code, #number1, #number2').autotab_magic().autotab_filter('numeric');
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:17:38.130

你有关于这个问题的 PHP 和 jQuery 标签，所以这里有两个：

PHP： [str_pad](http://php.net/manual/en/function.str-pad.php)

jQuery：据我所知，没有内置函数，所以你必须创建一个。这是一个关于在 javscript 中执行此操作的问题。 [使用jQuery在数字前面添加额外的零？](https://stackoverflow.com/questions/6466135/adding-extra-zeros-in-front-of-a-number-using-jquery)接受的答案应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:23:27.767

你总是可以写一个函数来为你做这件事：

```
$('#area_code, #number1, #number2').blur(function(){
    $(this).val(padMe($(this).val(),$(this).attr("maxlength")));
});

function padMe(str,length)
{
    var diff = length-str.length;
    return (diff>0) ? (new Array( diff+1 ).join("0") + str) : str;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:21:44.137

```
var num1 = $('#number1');
var diff1 = 0;

if (num1.value.length < num1.attr('maxlength')) 
 { diff1 = num1.attr('maxlength') - num1.value.length; }

for (var i = 0; i< diff1; i++ ) { num1.val = '0' + num1.val(); } 
```

# mysql - MySQL SELECT * 和百分比

> ID：15947210
> 
> 赞同：1
> 
> 时间：2013-04-11T11:09:00.373
> 
> 标签：mysql

有点像 MySQL 的新手，并且不够熟练，无法理解我试图放在一起的语句的逻辑。

我有这个查询；

`SELECT FORMAT(SUM(won/total*100),2) AS PCT FROM table_name WHERE Status='Current'`

哪个可以很好地返回所有记录总和的 win%，但我希望按行返回结果？

基本上我想要实现的是每**行**使用 的 win% `SELECT *`，但我不能将 SELECT * 与计算百分比结合使用。

或者我可以并且可能逻辑错误，我不确定。

返回的结果类似于；

```
Manager | Win%

Arsene Wenger | 57.24%

Alex Ferguson | 48.02% 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:12:57.553

试试这个查询：

```
SELECT Manager,FORMAT(SUM(won/total*100),2) AS PCT 
FROM table_name 
WHERE Status='Current'
GROUP BY Manager 
```

如果你想要每一**行**

```
SELECT Manager,FORMAT((won/total*100),2) AS PCT 
FROM table_name 
WHERE Status='Current' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:12:10.760

你错过了一个[`GROUP BY`](https://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)声明。*或者，如果您不想返回所有*
行 的 %-age ，则必须删除，因为这会将返回的所有行汇总到总和中。*[`SUM`](https://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_sum)*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:12:47.870

您必须按人名对行进行分组，例如

`SELECT FORMAT(SUM(won/total*100),2) AS PCT FROM table_name WHERE Status='Current' group by manager ;`*

# html - iframe 中的引导代码未正确呈现

> ID：15947212
> 
> 赞同：2
> 
> 时间：2013-04-11T11:09:05.380
> 
> 标签：html, css, twitter-bootstrap

下面是带有 iframe 的简单 html 页面。在这个 iframe 里面是一些流动的行。现在的问题是 iframe 中的内容是堆叠的，但它应该在同一行。“标签”和“主要内容”有足够的空间在同一行。

这是主页的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr" >
<head>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
</head>
<body>
<div class="row-fluid">
<div class="span12">
<iframe src="frame.html" width="500px"></iframe>
</div>
</div>
</body>
</html> 
```

这是 iframe 的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr" >
<head>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
</head>
<body>
<div class="row-fluid">
<div class="span6">label</div>
<div class="span6">main content</div>
</div>
<div class="row-fluid">
<div class="span6">label 1</div>
<div class="span6">main content 1</div>
</div>
</body>
</html> 
```

**现在的结果是：**
label
main content
label 1
main content 1

**而不是**
标签主要内容
标签1主要内容1

有人知道我怎样才能达到预期的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:49:29.220

iframe 的宽度为 500 像素，如果您使用 Twitter Bootstrap css 进行响应式布局，媒体查询将破坏您的小屏幕布局。您可以使用当前标记，但删除 Twitter Bootstrap 响应式 CSS。

下面是示例[`bootstrap-responsive.css`](http://twitter.github.io/bootstrap/assets/css/bootstrap-responsive.css)

[http://jsfiddle.net/ebrPt/](http://jsfiddle.net/ebrPt/)（尽量减小宽度）

这是没有响应式 css 的示例

[http://jsfiddle.net/ebrPt/1/](http://jsfiddle.net/ebrPt/1/)（尽量减小宽度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:08:35.493

最后，当我在 iframe 中时，我最终覆盖了引导程序的一些媒体标签

```
@media screen and (max-width: 767px) {
    .row-fluid [class*="span"] {
        float: left !important;
        width: 49% !important;
        margin: 0 !important;
    }
}

@media screen and (max-width: 480px) {
    .row-fluid [class*="span"] {
        float: none !important;
        width: 100% !important;
        margin: 0 !important;
    }
} 
```

# c# - URL编码和解码

> ID：15947214
> 
> 赞同：2
> 
> 时间：2013-04-11T11:09:13.573
> 
> 标签：c#, asp.net

我想传递 URL，我的代码是：

```
MyUrl = "http://www.abc.co.in/Download.aspx?period=" + Server.UrlEncode
        (DateTime.Now.ToString("dd-MMM-yyyy")) + "&ProductName="
        + Server.UrlEncode(productName) + "";

mail.Body += "<a href=" + MyUrl + ">Demo Download</a>"; 
```

但我仍然得到如下输出：

> [http://www.abc.co.in/Download.aspx?period=12-Apr-2013&ProductName=Otja](http://www.abc.co.in/Download.aspx?period=12-Apr-2013&ProductName=Otja)

那么我的代码有什么问题以及如何对其进行解码`download.aspx`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T11:11:15.537

`HttpUtility.UrlEncode`从命名空间使用`System.Web`。

[HttpUtility.UrlEncode 方法：MSDN 链接](http://msdn.microsoft.com/library/4fkewx0t.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:21:43.030

您已经给出了日期时间的特定格式（dd-MMM-yy），这个字符串中没有任何内容应该由 UrlEncode 函数编码。

我想说的可以通过尝试下面的代码来解释 Response.Redirect("~/Test.aspx" + Server.UrlEncode(DateTime.Now.ToString("dd:MMM:yyyy")));

# curl - cURL 无法解释主机名，代理问题？

> ID：15947219
> 
> 赞同：1
> 
> 时间：2013-04-11T11:09:30.273
> 
> 标签：curl, get, jersey, apache-httpclient-4.x, http-get

当从我的 ubuntu 机器使用 cURL 仅从远程机器 GET 时，我似乎无法解析主机名并且只是得到一个代理问题 -`The proxy has encountered an error (Error 21: Server Hostname Not Found)`运行时：

`curl remotehostname`

但是，我可以 ping 两者`remotehostname`和它的 ip 地址，并且`curl`只使用 ip 地址可以正常工作，例如`curl 1.2.3.4`.

`ApacheHttpClient`我什至尝试了一个使用Jersey 实现的java 程序`Client`，而且效果也很好。

`remotehostname`当其他一切似乎都能够解释时，cURL 无法解释是否有特殊原因？我想这是一个与代理相关的问题，但据我所知，我的代理设置得很好，因为其他一切似乎都可以正常工作，而不是 cURL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T15:46:10.090

我想有点太晚了，但我遇到了类似的问题，这对我有用：

```
curl -4 remotehostname 
```

此选项告诉 curl 仅将名称解析为 IPv4 地址。

使用wireshark监控数据包，我看到curl试图将主机名解析为IPV6地址，这是不可能的。

希望它也对你有用，祝你好运。

# xml - XSLT practice example

> ID：15947220
> 
> 赞同：0
> 
> 时间：2013-04-11T11:09:30.710
> 
> 标签：xml, xslt

I'm studying for an exam, and I'd like to make sure I'munderstanding this correctly. Would the following print out ABC or just BC because the templates weren't applied to next/previous/item?

input.xml :

```
<?xml version="1.0" encoding="UTF-8"?>
<next>
    <previous>
        <item>A</item>
    </previous>
    <item>B</item>
    <item>C</item>
</next> 
```

input.xsl :

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="/">
        <HowDoes>
            <xsl:apply-templates select="next/item" />
            <xsl:apply-templates select="previous/item" />
        </HowDoes>
    </xsl:template>
    <xsl:template match="item">
        <ThisWork>
            <xsl:copy-of select="." />
        </ThisWork>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:21:11.880

您的样式表将被忽略`A`，因为从文档根（您的第一个模板匹配的位置）的角度来看，有两个`next/item`节点但*没有* `previous/item`节点。只有一个`next/previous/item`节点。

如果您将模板更改为

```
<xsl:template match="/">
    <HowDoes>
      <xsl:apply-templates select=".//item" />
    </HowDoes>
</xsl:template> 
```

然后`item`将找到所有节点，因为它正在寻找当前节点的所有`item` *后代*`item`，而不是子节点的所有子节点`previous`。

# python - Python creating dynamic global variable from list

> ID：15947221
> 
> 赞同：1
> 
> 时间：2013-04-11T11:09:32.123
> 
> 标签：python, dynamic, global-variables

I am trying to make generic config, and thus config parser. There are two config files say A and B. I want to parse sections and make global values from them according to hardcoded list.

Here is an example:

in config file:

```
[section]
var1 = value1
var2 = value2 
```

In global scope:

```
some_global_list = [ ["var1","var2"], ["var3","var4"] ] 
```

in function to unpack this values, by ConfigParser:

```
configparser = ConfigParser.RawConfigParser()
configparser.read(some_config_filename)

for variables in some_global_list:
    globals()[section]=dict()
    for element in configparser.items(section):
        globals()[section].update({element[0]:element[1]}) 
```

This works nicely...*however*. Scope of globals() seem to be limited to function which is obviously not what I intended. I can access variable only while in that function.

*Could someone share better yet simple idea?* I know that i might move code to main and not to worry, but I don't think it is a good idea. I thought also about making some generator (sorry for pseudocode here):

in global scope:

```
for x in some_global_list:
    globals()[x] = x 
```

also tried adding this to function:

```
for x in some_global_list[0]:
    global x 
```

but got nowhere.

Edit :

After discussion below, here it is:

Problem solved like this:

1.  removed whole configuration from main script to module
2.  imported (from module import somefunction) config from module
3.  removed globals() in fact didnt need them, since function was changed a little like so:

in function:

```
def somefunction:
#(...)

configparser = ConfigParser.RawConfigParser()
configparser.read(some_config_filename)

temp_list=[]
for variables in some_global_list:
    tmp=dict()
    for element in configparser.items(section):
    tmp.update({element[0]:element[1]})
temp_list.append (tmp)
return temp_list #this is pack for one file. 
```

now in main script

```
tmp=[]
for i,conf_file in enumerate([args.conf1,args.conf2,args.conf3]):
    if conf_file:
        try:
            tmp.append([function(params...)])
        except:
            #handling here
        #but since i needed those config names as global variables 
    for j,variable_set in enumerate(known_variable_names[i]):
        globals()[variable_set] = tmp[i][j] 
```

so unfortunate hack presists. But seems to work. Thx for Your help guys.

I'm accepting (if thats possible) below answer since it gave me good idea :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:38:58.027

解决此问题的一种简单方法是在您的应用程序包内，`__init__.py`您可以执行类似于以下的操作：

```
app_config = read_config()

def read_config():
    configparser = ConfigParser.RawConfigParser()
    configparser.read(some_config_filename)
    return configparser.as_dict() #An imaginery method which returns the vals as dict. 
```

“app_config”变量可以导入应用程序中的任何其他模块。

# php - When to use tablegateway and Adapter

> ID：15947224
> 
> 赞同：4
> 
> 时间：2013-04-11T11:09:52.097
> 
> 标签：php, zend-framework2, tablegateway

Zend or I say this whole framework concept is new for me. Some examples are based on tablegateway format, in which you define name of table related to that controller in Module.php.

```
/* 'MYMODULE\Model\CompanyTable' =>  function($sm) {
                $tableGateway = $sm->get('CompanyTableGateway');
                $table = new CompanyTable($tableGateway);
                return $table;
            },
            'CompanyTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new Company());
                return new TableGateway('rs_company', $dbAdapter, null, $resultSetPrototype);
            },*/ 
```

And in other example there is only 3 lines of code in Module.php telling about adapter and then intializing through __constuct()

```
'MYMODULE\Model\CompanyTable' =>  function($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $table = new CompanyTable($dbAdapter);
                return $table;
            }, 
```

and in class __construc()

```
public function __construct(Adapter $adapter) {
    $this->adapter = $adapter;
    $this->resultSetPrototype = new ResultSet();
    $this->resultSetPrototype->setArrayObjectPrototype(new Company());

    $this->initialize();
} 
```

What I can't understand is How to choose between both of them.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T18:58:50.523

简单地说，您本质上想要做的是在 Zends 服务管理器中注册服务（工厂），以便您可以从应用程序中的许多类和模块中访问它们。它们就像预先包装好的物品，可以在您需要时随时使用！关键是他们已经拥有了他们所依赖的所有东西。

现在，您可以通过各种方式在服务管理器中注册服务，例如在您的 module.config.php 或 Module.php 中注册服务，选择权在您手中。要记住的重要一点是，您只想能够要求一些东西，而不是担心所有潜在的细节。

**默认 Db 适配器：** 如果您在主应用程序配置（global.php 和 local.php）中配置了数据库设置，则此适配器会自动在您的服务管理器中注册。

```
$dbAdapter = $sm->get('Zend\Db\Adapter\Adapter'); 
```

现在，您可以使用此适配器在没有任何 TableGateway 或 Table 模型的情况下执行您的数据库功能，这又是您的选择。你可以从你的控制器中获取这个服务，你可以将它注入到模型中，或者任何漂浮在你船上的东西。

**Table 模型：** 您在下面的代码中所做的是将 Adapter 注入到您的 Table 模型中。因此，在您的应用程序中，您可以简单地从服务管理器中获取表模型服务，并且它已经有了适配器。

```
'MYMODULE\Model\CompanyTable' =>  function($sm) {
    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
    $table = new CompanyTable($dbAdapter);
    return $table;
}, 
```

但是您的 Table 模型是什么？好吧，它可以是表格的原型，表格的一类函数，或两者兼而有之。从技术上讲，您是创建 Table 模型的人，因此您可以创建各种函数并注入各种东西，例如：

```
'MYMODULE\Model\CompanyTable' =>  function($sm) {
    $table = new CompanyTable();
    $table->setAdapterService( $sm->get('Zend\Db\Adapter\Adapter') );
    $table->setSessionService( $sm->get('MYMODULE\Session') );
    $table->setCustomService( $sm->get('MYMODULE\Custom') );
    return $table;
}, 
```

想一想，如果您有几个不同的数据库适配器，如果主数据库甚至辅助数据库出现故障，它们会进行故障转移。您可以注入第一个可用的适配器，而您的应用程序在调用 Table 模型时永远不会知道其中的区别。

**TableGateway：** TableGateway 正是它听起来的样子。它是 Zends TableGateway 的一个实例，它被赋予了表名 Db Adapter，甚至可以使用 Table 模型进行原型设计。什么是原型设计？好吧，这基本上不是在您进行数据库查询时返回带有数据的正常结果集，而是将数据作为 Table 模型的实例返回。同样，在服务管理器中注册网关时，重点是让您的应用程序获取和使用它，而不必担心适配器或表的名称或其他任何事情。在此示例中，它使用您的 Table 模型进行了原型设计，但并非必须如此。

```
'CompanyTableGateway' => function ($sm) {
    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
    $resultSetPrototype = new ResultSet();
    $resultSetPrototype->setArrayObjectPrototype(new Company());
    return new TableGateway('rs_company', $dbAdapter, null, $resultSetPrototype);
 }, 
```

使用 TableGateway 时，您可以将其提供给您的 Table 模型而不是适配器，并且您将编写您的 Table 模型以将网关用于所有 Db 功能。

```
'MYMODULE\Model\CompanyTable' =>  function($sm) {
    $tableGateway = $sm->get('CompanyTableGateway');
    $table = new CompanyTable($tableGateway);
    return $table;
}, 
```

总而言之，你的问题的答案是：选择是你的。单独使用 Db 适配器，或将其与表模型 AND/OR 表网关结合使用。希望这会有所帮助！

# android - 设置 ArrayAdapter 布局的字体、颜色

> ID：15947234
> 
> 赞同：1
> 
> 时间：2013-04-11T11:10:08.270
> 
> 标签：android, textview, android-arrayadapter

我有这样的布局：

项目.xml：

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/item_title"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="15dip"
    android:textSize="24sp"/> 
```

我在这样的数组适配器中设置它：

这里数组是`String[] array;`

```
adapter.addSection(header, new ArrayAdapter<String>(this, R.layout.items, array)); 
```

现在我想以编程方式添加设置颜色、文本大小、自定义字体怎么做？

我知道如何设置颜色、文本大小和自定义字体，但是如何获取这个 textview 的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:24:59.557

如果要更改列表视图中项目的颜色、文本大小、字体，则需要实现*ArrayAdapter*方法。创建自定义适配器扩展了 ArrayAdapter 并且它具有**getView**方法，您可以在其中更改所有内容。

当显示 ListView 时，ListView 要求从适配器给他可见项目的视图，此时适配器调用 getView 方法，您确实创建项目视图并返回此项目视图。

示例创建使用自定义适配器 ArrayAdapter：

*   [http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/)
*   [我是否正确创建了我的自定义 ArrayAdapter？](https://stackoverflow.com/questions/3614934/am-i-creating-my-custom-arrayadapter-correctly)
*   [在android中扩展ArrayAdapter](https://stackoverflow.com/questions/10379261/extending-arrayadapter-in-android)
*   [ListFragment 中的自定义 ArrayAdapter](https://stackoverflow.com/questions/11286287/custom-arrayadapter-in-a-listfragment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:47:28.097

创造风格`res/values/styles.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="CodeFont" parent="@android:style/TextAppearance.Medium">

        <item name="android:textColor">#00FF00</item>
        <item name="android:typeface">monospace</item>
    </style>
</resources> 
```

将其应用于测试视图，例如：

```
<TextView
    style="@style/CodeFont"
    android:text="@string/hello" /> 
```

查看[这篇](http://developer.android.com/guide/topics/ui/themes.html)文章和[这篇](http://developer.android.com/guide/topics/resources/style-resource.html)文章以获取更多详细信息。

并且[您不能以编程方式设置视图的样式](https://stackoverflow.com/questions/3142067/android-set-style-in-code)。

[在此处添加自定义字体](https://stackoverflow.com/a/15826701/1168654)是带有自定义适配器的微调器的示例。

# java - Data Import in Solr 4.2 not working?

> ID：15947236
> 
> 赞同：3
> 
> 时间：2013-04-11T11:10:16.713
> 
> 标签：java, apache, solr, lucene, dataimporthandler

My data-config.xml is as follows and I have kept in the the Conf folder along with the solrconfig.xml :-

```
<dataConfig>
    <dataSource name="Sample" driver="org.postgresql.Driver" url="jdbc:postgresql://localhost:5432/Sample" user="postgres" password="P@ssword">
        <document name="oneDocs">
            <entity dataSource="Sample" name="entity1" query="select FirstName from Employee">
                <field column="EmpId" name="EmpId" />
                <field column="FirstName" name="FirstName" />
                <field column="LastName" name="LastName" />
            </entity>
        </document>
    </dataSource>
</dataConfig> 
```

And my solrconfig.xml is as follows :-

```
<requestHandler name="/dataimport"
    class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
    <str name="config">data-config.xml</str>
    </lst>
    </requestHandler> 
```

I have also tried to add the libraries in the following ways :-

```
<lib dir="../../../contrib/extraction/lib" regex=".*\.jar" />
  <lib dir="../../../dist/" regex="solr-cell-\d.*\.jar" />

  <lib dir="../../../contrib/clustering/lib/" regex=".*\.jar" />
  <lib dir="../../../dist/" regex="solr-clustering-\d.*\.jar" />

  <lib dir="../../../contrib/dataimporthandler/lib/" regex=".*\.jar" />
  <lib dir="../../dist/" regex="solr-dataimporthandler-\d.*\.jar" />

  <lib dir="../../dist/" regex="postgresql-9.2-1002.jdbc3-\d.*\.jar" />

  <lib dir="../../../contrib/langid/lib/" regex=".*\.jar" />
  <lib dir="../../../dist/" regex="solr-langid-\d.*\.jar" />

  <lib dir="../../../contrib/velocity/lib" regex=".*\.jar" />
  <lib dir="../../../dist/" regex="solr-velocity-\d.*\.jar" />

  <!-- If a 'dir' option (with or without a regex) is used and nothing
       is found that matches, it will be ignored
    -->
  <lib dir="/total/crap/dir/ignored" /> 
```

I am getting the same error constantly :-

```
org.apache.solr.handler.dataimport.DataImportHandlerException: Data Config problem: DataImportHandler configuration file must have one <document> node.
    at org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:226)
    at org.apache.solr.handler.dataimport.DataImporter.maybeReloadConfiguration(DataImporter.java:124)
    at org.apache.solr.handler.dataimport.DataImportHandler.handleRequestBody(DataImportHandler.java:168)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1797)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:637)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:343)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:141)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:560)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
    at org.eclipse.jetty.server.Server.handle(Server.java:365)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
    at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: DataImportHandler configuration file must have one <document> node.
    at org.apache.solr.handler.dataimport.DataImporter.readFromXml(DataImporter.java:250)
    at org.apache.solr.handler.dataimport.DataImporter.loadDataConfig(DataImporter.java:223)
    ... 32 more 
```

Please help to resolve this.This is eating away most of the time. Thanks

NOTE: I am using Postgres and Apache Tomcat 7 and Java 7 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:31:47.137

您的**data-config.xml**有缺陷。您已将文档元素包装到数据源元素中。两者都需要与 dataConfig 元素的直接子元素处于同一级别。

这就是您发布的异常状态的原因：

> Data Config 问题：DataImportHandler 配置文件必须有一个节点。

XML 解析器找不到作为 dataConfig 子节点的文档元素。

试试这样：

```
<dataConfig>
    <dataSource name="Sample" driver="org.postgresql.Driver" url="jdbc:postgresql://localhost:5432/Sample" user="postgres" password="P@ssword" />
    <document name="oneDocs">
       <entity dataSource="Sample" name="entity1" query="select FirstName from Employee">
            <field column="EmpId" name="EmpId" />
            <field column="FirstName" name="FirstName" />
            <field column="LastName" name="LastName" />
        </entity>
    </document>
</dataConfig> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:31:49.870

在你`data-config.xml`的`document`元素应该是元素的兄弟`dataSource`，而不是孩子。

即它应该看起来像这样；

```
<dataConfig>
  <dataSource>
    ..
  </dataSource>
  <document>
    ..
  </document>
</dataConfig> 
```

# android - AsyncTask Cancel is not working

> ID：15947241
> 
> 赞同：3
> 
> 时间：2013-04-11T11:10:44.880
> 
> 标签：android, multithreading, android-asynctask

I am learning how to cancel asyncTask so there is no uses on the code below.

I tried to called the asyncTask and execute it then cancel it and execute it.

```
 MyAsyncTask asyncTask = new MyAsyncTask();
        Log.i("cancel","cancel 1");     
        asyncTask.execute();
        Log.i("cancel","cancel 2");
        asyncTask.onCancelled();
        Log.i("cancel","cancel 3");
        asyncTask.execute();
        Log.i("cancel","cancel done"); 
```

"cancel 1" and "cancel 2" is executed finely as it shown on logcat but ActivityThread.performLaunchActivity error is thrown when "cancel 3" is trying to execute. (cancel 3 is not showing on logcat) Anything wrong with my asyncTask code?

```
private class MyAsyncTask extends AsyncTask<String,Integer,Void>{

    private ArrayList<Map<String, String>> list;
    private ProgressBar progressBar;
    @Override
    protected Void doInBackground(String... arg0) {

        progressBar = (ProgressBar)findViewById(R.id.year_expense_progressbar);
        progressBar.setVisibility(View.VISIBLE);
        getListView().setVisibility(View.GONE);
        textView.setVisibility(View.GONE);

        list = new ArrayList<Map<String, String>>();

        String time = "";
        String category = "";
        String expense = "";
        String day = "";
        String month = "";

        totalExpense = 0;       

        Cursor c = SQLLiteAdapter.fetchAllItems();

        while(c.moveToNext() != false){

            if(isCancelled()){
                Log.e("cancel","cancel inside background");
                break;
            }

            // if there is nothing is input, don't execute verifyLevel
            if(tokenizedResult.isEmpty()) break;

            category = c.getString(c.getColumnIndex(SQLLiteAdapter.col_category));
            expense = c.getString(c.getColumnIndex(SQLLiteAdapter.col_price));
            time = c.getString(c.getColumnIndex(SQLLiteAdapter.col_time));
            day = c.getString(c.getColumnIndex(SQLLiteAdapter.col_day));
            month = c.getString(c.getColumnIndex(SQLLiteAdapter.col_month));

            VerifyLevel a = new VerifyLevel(tokenizedResult,category,expense,time,day,month); 
            if(!a.isEmpty()){
                list.add(a.addToList());
            }           

            totalExpense += a.totalExpense;          
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result)
    {
        progressBar.setVisibility(View.GONE);
        getListView().setVisibility(View.VISIBLE);
        textView.setVisibility(View.VISIBLE);
        fillData(list);
        textView.setText("Total Expense is "+convertNumeric(totalExpense));         
        Log.i("yearExpense","buildList is finished");

    }

    @Override
    protected void onCancelled(){
        super.onCancelled();
        list.clear();
        progressBar.setVisibility(View.GONE);
        totalExpense = 0;
        Log.i("yearEx","Cancel asyncTask");
        Toast.makeText(getApplicationContext(), "cancelled", Toast.LENGTH_SHORT).show();

    }       
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T11:36:23.637

我的方法略有不同，也许有点冗长。但它一直有效，没有任何问题。

这段代码在`doInBackground()`. 如果你有 a`for... loop`在它，然后使用`break;`语句。如果您不使用 a `for.... loop`，请将其删除。

```
// CHECK IF THE USER HAS CANCELLED THE TASK
if (isCancelled())  {
    cancelTask = true; // (OPTIONAL) THIS IS AN ADDITIONAL CHECK I HAVE USED. THINK OF IT AS A FAIL SAFE.
    break; // REMOVE IF NOT USED IN A FOR LOOP
} 
```

你已经有一个`Asynctask`声明的：`MyAsyncTask asyncTask = new MyAsyncTask();`。除此之外，还要创建两个`boolean`. 打电话给他们，例如：

```
boolean blMyAsyncTask;
boolean cancelTask; 
```

现在，在 中`onPreExecute()`，切换 blMyAsyncTask 实例的状态：

```
blMyAsyncTask = true; 
```

并且在`onPostExecute()`：

```
blMyAsyncTask = false; 
```

而且，在同样的情况下`onPostExecute()`，我也在检查`cancelTask boolean`. 例如：

```
if (cancelTask == false)    {
    // THE NORMAL CODE YOU HAVE IN YOUR onPostExecute()
} 
```

最后，在`onDestroy()`（我使用这个，但我怀疑它`onPause()`也可以工作。老实说从来没有做过`onPause()`），检查状态`boolean blMyAsyncTask`

```
if (blMyAsyncTask== true)   {
    asyncTask.cancel(true);
} 
```

正如我在开始时所说，它很长，甚至可能很复杂，但它从未失败过。如果你愿意的话，我也认为这有点*模块化。*如果我有更多`Asycntasks`添加到 中`Activity`，我可以在 中添加另一个检查`onDestroy()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T11:13:54.407

你不应该`asyncTask.onCancelled();`直接打电话。您可以致电`cancel(true)`并在您的内部`doInBackground()`检查`isCancelled()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:13:08.247

要取消 AsyncTask，请调用以下行。

```
asyncTask.cancel(); 
```

onCancelled() 是一个在调用取消时执行的覆盖方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:18:41.610

你可以使用

```
asynctask.cancel(true); 
```

或者

```
asyncTask.wait(); 
```

"true" 如果执行此任务的线程应该被中断；否则，允许完成正在进行的任务

# php - 带有字符串键的 PHP JSON

> ID：15947245
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:10:50.807
> 
> 标签：php, json

我当前的 PHP 代码是：

```
<?php
//$name = $_POST['name'];

$sql = "select * from SocietyDatabase WHERE Name='Badminton'";
$result = mysql_query($sql);
$json = array();

if(mysql_num_rows($result))
{
while($row=mysql_fetch_row($result))
{
$json['info'][]=$row;
}
}
echo json_encode($json); 
?> 
```

结果是：

```
{"info":[["SOC003","Badminton","Sport","Me","You","me@gmail.com","badminton society"]]} 
```

但我希望它采用这种带有“标题”的格式：

```
{"earthquakes": [
{
"eqid": "c0001xgp",
"magnitude": 8.8,
"lng": 142.369,
"src": "us",
"datetime": "2011-03-11 04:46:23",
"depth": 24.4,
"lat": 38.322
}
]} 
```

那么我该如何实现呢？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:13:53.897

更改`mysql_fetch_row`为`mysql_fetch_assoc`。后者将使用列数组键填充 $row ，而前一个将仅提供数字索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:14:08.350

改变这个

```
while($row=mysql_fetch_row($result)) 
```

到

```
while($row=mysql_fetch_assoc($result)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:15:10.657

您可以使用`PDO`它，因为旧的查询方式已被弃用

[http://php.net/manual/en/pdostatement.fetchall.php](http://php.net/manual/en/pdostatement.fetchall.php)

```
$sth = $dbh->prepare("select * from SocietyDatabase WHERE Name='Badminton'");
$sth->execute();

/* Fetch all of the values of the first column */
$result = $sth->fetchAll(PDO::FETCH_ASSOC);
echo json_encode($result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:31:56.130

您可以按照以下示例使用 fetch_assoc 函数

```
$sql = "select * from clients WHERE company_name ='abc'";
$result = mysql_query($sql,$con);

$json = array();
if(mysql_num_rows($result))
{ 
    while($row=mysql_fetch_assoc($result))
    {
    $json['earthquakes']=$row;
    }
}

echo json_encode($json); 
```

：输出如：

```
{"earthquakes":{"id":"7","company_name":"abc","physical_address":"abc","postal_address":"abc","contact_name":"abc","contact_position":"abc","contact_phone":"98 
```

# jquery - Custom jQuery Dropdown Navigation nested focus issue

> ID：15947246
> 
> 赞同：0
> 
> 时间：2013-04-11T11:10:56.147
> 
> 标签：jquery, html, drop-down-menu

Why is it that when creating a bespoke jQuery script I always have one issue that holds me back!

Anyway enough ranting, I am reaching out to you all in the hope one kind soul can show me what I am doing incorrectly.

## The Issue

I have created a drop-down jQuery navigation menu for a site, only the menu thinks the mouse is leaving the 'target' when I try and move the cursor from the parent to the nested child and runs a 'hide()' function which makes the drop-down menu disappear.

What I need is for the .dropnav element (drop-down menu) to not trigger the '$target.on('mouseover', function(e) {' part of the code when the above scenario occurs.

Really stuck so any help what-so-ever is greatly appreciated.

## jQuery Code

```
var hover, $this;

        $target = $("header nav > ul > li");
        $menu = $target.find('.dropnav');

        $target.on('mouseover', function(e) {
            e.stopPropagation();
            clearTimeout(hover);

            $this = $(this)
            $this.toggleClass('active');

            hide();

            hover = setTimeout(show,400);

        }).mouseout(function() {
            clearTimeout(hover);
            hover = setTimeout(hide,800);
        });

        if($(".dropnav:visible")) {
            $menu.click(function(e) { e.stopPropagation(); });
            $(document).click(function() { hide(); });
        }

        function show() {
            $this.children('.dropnav').slideDown(800);
        }

        function hide() {
            $('.dropnav:visible').fadeOut(200);
        } 
```

## HTML Code

```
<header>
<div id="nav-filler"></div>
<div id="header-inner">
    <nav>
        <ul>
            <li>
                <a id="products" title="Browse our products">Products</a>
                <div class="dropnav">
                    <div id="dropnav-filler"></div>
                    <div id="dropnav-inner">
                        <ul id="products-menu" class="dropnav-links">
                            <li>
                                <h6>Desktops</h6>
                                <ul>
                                    <li><a href="/products/desktops/pc-one" title="Broadleaf">PC One</a></li>
                                    <li><a href="/products/desktops/pc-access" title="Broadleaf">PC Access</a></li>
                                    <li><a href="/products/desktops/pc-max" title="Broadleaf">PC Max</a></li>
                                    <li><a href="/products/desktops/pc" title="Flex">PC</a></li>
                                    <li><a href="/products/desktops/all-in-one" title="All In One">All In One</a></li>
                                </ul>
                                <h6>Workstations</h6>
                                <ul>
                                    <li><a href="/products/workstations/pcx" title="Broadleaf X">PC X</a></li>
                                    <li><a href="/products/workstations/d4-rhino" title="D4 Rhino">D4 Rhino</a></li>
                                    <li><a href="/products/workstations/d4-3ds" title="D4 3DS">D4 3DS</a></li>
                                    <li><a href="/products/workstations/d4-inventor" title="D4 Inventor">D4 Inventor</a></li>
                                    <li><a href="/products/workstations/rackstation" title="Rackstation">Rackstations</a></li>
                                </ul>
                            </li>
                            <li>
                                <h6>On The Go</h6>
                                <ul>
                                    <li><a href="/products/onthego/laptops" title="Laptop">Laptops</a></li>
                                    <li><a href="/products/onthego/tablets" title="Tablet">Tablets</a></li>
                                    <li><a href="/products/onthego/ultrabooks" title="Ultrabook">Ultrabooks</a></li>
                                </ul>
                            </li>
                        </ul>
                        <div id="showcase">
                            <div id="sc-inner"></div>
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <a id="products" title="Browse our products">Other Products</a>
                <div class="dropnav">
                    <div id="dropnav-filler"></div>
                    <div id="dropnav-inner">
                        <ul id="products-menu" class="dropnav-links">
                            <li>
                                <h6>Desktops</h6>
                                <ul>
                                    <li><a href="/products/desktops/pc-one" title="Broadleaf">PC One</a></li>
                                    <li><a href="/products/desktops/pc-access" title="Broadleaf">PC Access</a></li>
                                    <li><a href="/products/desktops/pc-max" title="Broadleaf">PC Max</a></li>
                                    <li><a href="/products/desktops/pc" title="Flex">PC</a></li>
                                    <li><a href="/products/desktops/all-in-one" title="All In One">All In One</a></li>
                                </ul>
                                <h6>Workstations</h6>
                                <ul>
                                    <li><a href="/products/workstations/pcx" title="Broadleaf X">PC X</a></li>
                                    <li><a href="/products/workstations/d4-rhino" title="D4 Rhino">D4 Rhino</a></li>
                                    <li><a href="/products/workstations/d4-3ds" title="D4 3DS">D4 3DS</a></li>
                                    <li><a href="/products/workstations/d4-inventor" title="D4 Inventor">D4 Inventor</a></li>
                                    <li><a href="/products/workstations/rackstation" title="Rackstation">Rackstations</a></li>
                                </ul>
                            </li>
                            <li>
                                <h6>On The Go</h6>
                                <ul>
                                    <li><a href="/products/onthego/laptops" title="Laptop">Laptops</a></li>
                                    <li><a href="/products/onthego/tablets" title="Tablet">Tablets</a></li>
                                    <li><a href="/products/onthego/ultrabooks" title="Ultrabook">Ultrabooks</a></li>
                                </ul>
                            </li>
                        </ul>
                        <div id="showcase">
                            <div id="sc-inner"></div>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </nav>
</div> 
```

[http://jsfiddle.net/kYkba/11/](http://jsfiddle.net/kYkba/11/) link for any who can access this.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:23:08.957

看看你什么时候`mouseover`li 然后它显示但是当你去选择 it 中的某个项目时`.dropnav`，`fadeOut`试试这个：

```
var $target = $("header nav > ul > li");
$target.hover(function (e) {
   $('> .dropnav', this).slideDown();
},function () {
   $('> .dropnav', this).fadeOut();
}); 
```

### [演示](http://jsfiddle.net/kYkba/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:16:12.803

使用 mouseenter/mouseleave 而不是 mouseover/mouseout :)

**编辑**

你也应该改变

```
}).mouseout(function() { 
```

至

```
}).on('mouseleave',function() { 
```

# process - 使用 AWK 计算进程数

> ID：15947248
> 
> 赞同：0
> 
> 时间：2013-04-11T11:10:57.413
> 
> 标签：process, count, kill

我正在尝试使用 AWK 提出命令，该命令将列出所有进程及其运行的实例数：

我正在使用以下命令

```
ps axo pid,command  | awk -F/ '{print $1, $4}' 
```

我得到以下结果

```
 1727  sshd
 1807  httpd
 1834  abrtd
 1842 abrt-dump-oops -d  abrt -rwx
 1848  httpd
 1849  httpd
 1879  gpm -m 
```

我想要上面的命令，以便它可以显示进程总数以及进程，如下所示

```
 1   1727  sshd
 3   1807  httpd
 1   1834  abrtd
 1   1842 abrt-dump-oops -d  abrt -rwx
 1   1879  gpm -m 
```

事实上，我想杀死一个运行超过 5 个实例的进程，这与它是什么进程无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:40:34.720

这不是 awk，但它应该产生您想要的输出。

```
ps axo pid,command | sort -k2 | uniq -c -f 1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-30T23:19:35.910

尝试这个 .....

ps -eo 命令 | grep -v 命令 | awk '{count[$0]++}END{for(j in count) print count[j] ,j}' | 排序-rn | 头

# java - Can DAO's hold state information

> ID：15947254
> 
> 赞同：1
> 
> 时间：2013-04-11T11:11:04.507
> 
> 标签：java, jakarta-ee, design-patterns

May be this might sound a bit mundane, can someone tell me if there is any good practise which says DAO's should not store state information i.e. non static non final member variables? Most of the DAO's that i have come accross mainly contain only static and final variables.

```
public class CustomerDAO extends CommonDAO{

private String txnid;
private String txnName;

getters....setters..
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T11:16:25.487

对我来说，DAO 是“只是一个管道”，用于封装数据库通信。它构造和执行查询或/和代理`EntityManager`，因此至少对于 JPA，除了`EntityManager`实例之外不需要任何状态。查询不直接相互依赖。

所以我会反过来提出这个问题——DAO 可以拥有什么样的合理状态？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:19:17.770

强烈反对这一点：DAO 存在的全部原因是提供一系列无状态的数据库访问方法。大多数阅读您的代码的开发人员会非常惊讶地发现任何状态。

此外，您所说明的状态不是线程安全的 - 您可能会在做那种事情时陷入困境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:21:18.980

DAO 通常按照[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)实现——这意味着每个实体只有一个 DAO 实例，因此状态信息将在使用 DAO 的应用程序的所有部分之间共享

# mysql - MySQL: Can an INNODB table be entirely locked?

> ID：15947255
> 
> 赞同：0
> 
> 时间：2013-04-11T11:11:09.953
> 
> 标签：mysql, innodb

If I run:

```
LOCK TABLE table1, table2 READ
// DO STUFF
UNLOCK TABLES 
```

Will this block all other sessions from accessing table1 and table2 if the table type is INNODB? If not, how do I then lock the table in INNODB?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:14:00.130

在这里阅读这篇有用的文章：[http ://www.mysqlperformanceblog.com/2012/07/31/innodb-table-locks/](http://www.mysqlperformanceblog.com/2012/07/31/innodb-table-locks/)

在 MySQL 级别显式锁定表将阻止表被访问，并且不会显示在`SHOW ENGINE INNODB STATUS`. `LOCK TABLES`当您从性能角度使用 Innodb 表时，最好不要使用，因为 Innodb 使用行级锁。

# c# - 如何在 Sencha 2 中使用 Post 方法发送数组作为参数？

> ID：15947271
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:12:05.430
> 
> 标签：c#, asp.net, sencha-touch, sencha-touch-2, sencha-touch-2.1

我正在我的服务中开发一个应用程序我必须发送一个数组作为参数，

```
 Ext.Ajax.request({
     method: 'POST',
     contentType: 'application/json; charset=utf-8;',
     type: 'json',
     url: 'http:/....',
     disableCaching: false,
     headers: {
         'Accept': 'application/json',
             'Content-Type': 'application/json'
     },

     jsonData: {
         FirstName: local_fname_array2,

     },

     success: function (response) {
         console.log(response);
     }

 }); 
```

在服务中....像这样

```
 [OperationContract]
 [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "/Check1")]
 int Psngr(string[] FirstName); 
```

服务定义：

```
public static int Psngr(string[] FirstName) {
    List < Psgr > psgr = new List < Psgr > ();
    var getVal = from s in FirstName select s;
    int count = getVal.Count();

    SqlConnection con = new SqlConnection(WebConfigurationManager.ConnectionStrings["db"].ToString());
    con.Open();

    using(var cmd = new SqlCommand("SP_InsertCheck1", con)) {
        int result;
        cmd.CommandType = CommandType.StoredProcedure;

        for (int i = 0; i < count; i++) {
            cmd.Parameters.Clear();
            cmd.Parameters.AddWithValue("@FirstName", FirstName[i]);
            using(var Da = new SqlDataAdapter(cmd))

            using(var Ds = new DataSet()) {
                Da.Fill(Ds);
                result = Convert.ToInt16(Ds.Tables[0].Rows[0]["Result"].ToString());

            }

        }

        return 1;
    }
} 
```

但我得到了错误....

**服务器在处理请求时遇到错误。异常消息是“格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数时出错：FirstName。InnerException 消息是“期望状态“元素”。遇到名称为“，命名空间”的“文本”。'。有关更多详细信息，请参阅 InnerException。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T06:53:30.783

你必须解码数组

```
jsonData: {
  trvlrTitle:Ext.decode(local_prefix_array)
} 
```

稍后您必须发送：

```
Ext.Ajax.request({
    url:'http://aa.com,
    method:'POST',
    disableCaching: false,
    headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
    },
    jsonData: {
        trvlrTitle:Ext.decode(local_prefix_array)
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T12:38:46.777

也许您应该在发送到服务器之前对数组数据进行编码，如下所示：

Ext.encode(the_array)

# android - 将指向 Activity 的指针传递给下一个 Activity

> ID：15947273
> 
> 赞同：0
> 
> 时间：2013-04-11T11:12:08.963
> 
> 标签：android, pointers, android-activity, android-fragments

我对来自 iOS 背景的 Android 编程（以及 Java）非常陌生。我想要做的是将指向片段的指针从一个活动传递到另一个活动。

基本上，我有一个名为的启动活动`BeginActivity`，它处理几个`Fragments`登录和注册屏幕。登录后，我会加载`TabsFragmentActivity`使用以下代码调用的应用程序的主要活动：

```
public void loggedIn() {
    Intent intent = new Intent(this, TabsFragmentActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    this.startActivity(intent);

    finish();
} 
```

我正在使用`FLAG_ACTIVITY_CLEAR_TOP`，因为我不希望用户在没有实际注销的情况下返回。

现在的问题：

在`BeginActivity`我有一个指向保存用户数据的片段的指针。我像单例一样使用它，前几个视图片段可以从`BeginActivity`.

`TabsFragmentActivity`在调用它之前，我需要将同一个对象传递给新对象`finish()`。

我该怎么做呢？我知道我可以使用`putExtra()`，但我相信这仅适用于字符串等。而不是其他片段。

有没有办法在新创建`TabsFragmentActivity`的我可以引用`BeginActivity`来“抓取”指针？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:20:45.567

基本上你需要能够通过意图传递你的类，看看 Serializable / Parcelable 接口

这个问题有你需要的答案

[如何在Android上将对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:18:54.177

首先，您应该确定[Fragments 和 Activity 生命周期](http://developer.android.com/guide/components/fragments.html)。

片段被设计成可重用的 UI 复杂组件。它们看起来像活动，但您可以重复使用。因此，**您可以拥有尽可能多的包含相同片段的活动，但不能包含这些片段的相同实例。**

如果您只想将用户数据传递给另一个活动，您必须使用`Bundle`和`putExtra()`。`implements Serializable or Parcelable Interfaces`正如@gheese 所说，可能需要根据用户数据类型。

如果您想在两个或更多活动上使用片段的相同 UI 外观，除了使用`Bundle`和`putExtra`。您希望此行为的每个活动都必须包含一个字段，其为 a`Fragment`并且在启动此片段时，您可以使用它`getActivity().getIntent().getExtra` 来获取用户信息并填充您的片段。

# javascript - JavaScript loop re-evaluating every iteration causing problems

> ID：15947276
> 
> 赞同：1
> 
> 时间：2013-04-11T11:12:15.593
> 
> 标签：javascript

I have this code:

```
var app = {
    items: [
        [{
            title: 'Overview',
            id: 'dashboard'
        }, {
            title: 'Reports',
            id: 'reports'
        }],
        [{
            title: 'Customers',
            id: 'customers'
        }, {
            title: 'Quotes',
            id: 'quotes'
        }, {
            title: 'Sales',
            id: 'sales'
        }],
        [{
            title: 'Suppliers',
            id: 'suppliers'
        }, {
            title: 'Purchases',
            id: 'purchases'
        }],
        [{
            title: 'Bank',
            id: 'bank'
        }, {
            title: 'Projects',
            id: 'projects',
            disabled: true
        }, {
            title: 'Journal',
            id: 'journal',
            disabled: true
        }]
    ]
}

var userDetails = {
    IsAdmin: true
};

for (var x = 0; x < app.items.length; x++) {
    app.items[x].filter(function (items) {
        if (items.disabled || (userDetails.IsAdmin && items.id !== 'quotes')) {
            var ind = app.items[x].indexOf(items);
            app.items[x].splice(ind, 1);
        }
    });
}

console.log(app.items); 
```

The output is that there is 1 object left in each array by the end. This is not desired, by my calculations, there should just be a single object left (the quotes object),

related jsFiddle: [http://jsfiddle.net/UdzEW/](http://jsfiddle.net/UdzEW/)

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:17:53.803

的想法`.filter`是您提供一个函数 tahat 返回一个布尔值，该值确定该值应该保留还是保留；它不应该就地修改数组。

```
var filtered = app.items[x].filter(function (items) {
    if (items.disabled || (userDetails.IsAdmin && items.id !== 'quotes')) {
        return false;
    }
    return true;
}); 
```

的内容`filtered`现在应该包含一个新数组，其中仅包含那些不符合内部条件的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:26:15.530

尝试这个：

```
 for (var x = 0; x < app.items.length; x++) {
    app.items[x] = app.items[x].filter(function (items) {
       return !(items.disabled || (userDetails.IsAdmin && items.id !== 'quotes'));
   });
   !app.items[x].length && app.items.splice(x--, 1);
 } 
```

它`[[Array(1)]]`与“报价”对象一起返回

# c - What do you call an instance of a struct?

> ID：15947279
> 
> 赞同：9
> 
> 时间：2013-04-11T11:12:18.493
> 
> 标签：c, class, struct

This is purely out of interest. I searched around a bit, knowing that instances of `classes` are called `objects`, but I couldn't find what the correct word is for an instance of a `struct` in C, C++, C#, etc. Do we even have a word for this?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T11:14:31.237

即使在 C 语言中，将其称为对象也是完全有效的。

**C99 标准§3.15：**
**第 1 段：**

> 执行环境中数据存储的对象
> 区域，其内容可以表示值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T11:26:22.843

在 C 和 C++ 中，“对象”一词更为通用。它也指结构对象或原语。来自 C99 标准：

> **目的**
> 
> 执行环境中的数据存储区域，其内容可以表示值

在 C++ 中，类和结构是等价的，用 定义的类型`struct`也被认为是类类型。`object of class type`标准使用类似or的表达式`object of class X`。

# css - How to a add box inside the div with different background color?

> ID：15947286
> 
> 赞同：0
> 
> 时间：2013-04-11T11:12:46.293
> 
> 标签：css

My scenario here:

Inside the div which is mentioned below I need to add Find Out More link in right bottom of the div which should contain different bg-color in other words a box structure with an arrow image at the last.

```
.answerbox
{
height: 150px; /*Specify Height*/
width:  150px; /*Specify Width*/
border: 1px solid black; /*Add 1px solid border, use any color you want*/
background-color: green; /*Add a background color to the box*/
text-align:center; /*Align the text to the center*/
} 
```

How It should look :

![enter image description here](https://i.stack.imgur.com/zBJcl.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:19:08.557

你的意思是这样吗？这是一个[jsfiddle](http://jsfiddle.net/puVpg/2/)

通过将父 ( `.answerbox`) 设置为`position: relative`，我可以将其设置`.more`为`position:absolute`并将其放置在该框中我喜欢的任何位置；在这种情况下，容器的右下角。

**HTML**

```
<div class="answerbox">
    <a href="#" class="more">Find out more</a>
</div> 
```

**CSS**

```
.answerbox {
    height: 150px; /*Specify Height*/
    width:  150px; /*Specify Width*/
    border: 1px solid black; /*Add 1px solid border, use any color you want*/
    background-color: green; /*Add a background color to the box*/
    text-align:center; /*Align the text to the center*/
    position: relative;
}
.more {
    background: red;
    position: absolute;
    bottom: 0;
    right: 0;
    padding: 0 10px;
    height: 30px;
} 
```

### 编辑 - 如果您想要按钮上的箭头图像

[更新小提琴](http://jsfiddle.net/puVpg/4/)

**CSS**

```
.more {
    background: url('http://dc390.4shared.com/img/AgV87Tvx/s7/arrow_small_right.png') no-repeat left center red;
    position: absolute;
    bottom: 0;
    right: 0;
    height: 30px;
    padding: 0 10px 0 20px; /* Extra padding left to make room for the button */
    line-height: 30px; /* Used to center the text vertically. Use the same value as the height.*/
} 
```

### 编辑 - 让盒子随着内容而增长

[更新小提琴](http://jsfiddle.net/puVpg/5/)

**CSS**

```
.answerbox {
    width:  150px; /*Specify Width*/
    border: 1px solid black; /*Add 1px solid border, use any color you want*/
    background-color: green; /*Add a background color to the box*/
    text-align:center; /*Align the text to the center*/
    position: relative;
    padding: 10px 10px 40px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:18:55.250

你的意思是这样的：

```
<div class="answerbox">
    <a href='#' class="findout">
        find out more..
    </a>
</div> 
```

和

```
.findout
{
    position:relative;
    top:120px;
    left:20px;
    background-color:white;
    color:Red;
} 
```

见[小提琴](http://jsfiddle.net/cwXtE/)

# c - Using a different version of glibc?

> ID：15947292
> 
> 赞同：1
> 
> 时间：2013-04-11T11:12:56.483
> 
> 标签：c, compilation, glibc

I want to do some modifications to the `glibc` library. The first step is to be able to use a specific version when I compile a program. I'm under ubuntu 12.10 and my directories are :

```
/mydirectory/glibc-2.17 (where I have extracted the last version from the website)
/mydirectory/glibc-2.17-build (where I have executed the configure and make command)
/mydirectory/test/helloworld.c (where I have my helloworld program) 
```

The `helloworld.c` is the following:

```
#include <stdlib.h>
#include <stdio.h>

int main(int argc, char* argv[])
{
   char glibc[256] = "xxxx"; /* How to detect the glibc version here ? */
   printf("hello, world\n");
   printf("glibc version = %s\n", glibc);
   return 0;
} 
```

First how can I print the version of `glibc` ? (I think that there is a macro/constant in glibc for that).

Second, what command line should I use to compile my `helloworld.c` file to use the `glibc` that is in `/mydirectory/glibc-2.17-build` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:31:12.297

正如 Barmar 在评论中所说，用于`-L pathname`显式指定路径名。 建议使用静态链接，否则我认为在执行过程中可能会出现问题。`ld`
`-static`

实际上，我自己对这个问题的解决方案是：正常编译和链接源代码，并使用`LD_PRELOAD`set 调用您指定的共享对象版本。
见[http://linux.die.net/man/8/ld.so](http://linux.die.net/man/8/ld.so)

# iphone - Xcode 接口构建器和内存泄漏

> ID：15947296
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:13:03.480
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, cocoa

当我们在 Interface-builder 中添加像背景图像视图这样的对象并且不创建插座时，当我们释放所有插座并且这些视图没有释放时，它们是否会使用任何内存和泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:16:02.827

它不会导致任何内存泄漏......它们是自动释放的对象

# hibernate - Grails GORM：无法初始化代理 - 没有会话

> ID：15947304
> 
> 赞同：12
> 
> 时间：2013-04-11T11:13:32.677
> 
> 标签：hibernate, grails, grails-orm

我有一个具有以下结构的方法：

```
public void run(){
    ... 
    for (...) { //this part works correct

        User.withTransaction {
            User user = User.findByUsername(...);

            Position pos = Position.findByName(...)
            if(pos){ ...
            } else { ...
                try{
                    pos.save(flush:true);
                    user.position = pos;
                } catch (Exception e){ ... }
            }
            ...
            try{
                user.save(flush:true, failOnError: true);
            } catch (Exception e){ ... }
        }
    }
    //this part doesn't work
    User.findAll().each {
    ...
        if (...){
            User.withTransaction{
                ...
                //here the operation fails with 
                //org.hibernate.LazyInitializationException: 
                //could not initialize proxy - no Session
                if (!userDetailsMap.containsKey(it.username) 
                         && it.userStatus != blocked){
                    it.userStatus = blocked
                    it.save(flush:true) 
                }
            }
        }
    }
} 
```

我在这里遇到的例外是`org.hibernate.LazyInitializationException: could not initialize proxy - no Session`在我的代码的第二部分。这里的`userStatus`字段是对不同域类的引用。

在检查属性之前，我尝试将`it.refresh()`和添加到代码中，但没有用。`Hibernate.initialize(it)`我在这里做错了什么？

upd：我尝试`it.attach`在检查属性之前调用该方法，但在方法调用之后的值为`it.attached`is `false`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T11:32:58.523

我认为您没有做任何“错误”的事情，只是该对象与休眠会话分离。我会尝试几件事：

*   像这样将对象附加到休眠会话： object.attach() ( [http://grails.org/doc/2.2.1/ref/Domain%20Classes/attach.html](http://grails.org/doc/2.2.1/ref/Domain%20Classes/attach.html) )
*   使两个域类之间的关联非惰性（[http://grails.org/doc/2.2.x/ref/Database%20Mapping/lazy.html](http://grails.org/doc/2.2.x/ref/Database%20Mapping/lazy.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T15:20:55.463

当我将子域类用于一个类时，我遇到了同样的错误，如果您的数据大小超过页面大小，您将收到错误“消息：无法初始化代理 - 无会话”

通过使用 <>lazy:false，hibernate 将正确使用会话附件并显示适当的数据。

感谢您对这篇文章。我能够解决我的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T16:05:47.537

Thomas Farvour 指出了正确的方向。文档 13.1.1 Transactions Rollback and the Session 建议使用 Eager-fetching 作为最佳解决方案。

# rest - 构建 REST API 时如何管理业务逻辑

> ID：15947306
> 
> 赞同：2
> 
> 时间：2013-04-11T11:13:35.750
> 
> 标签：rest, symfony, architecture, doctrine-orm

我正在构建一个以 API 为中心的 Web 应用程序，但我无法理解一些业务逻辑。

拿这个用例：

```
POST /companies -> User adds a new Company which has a Location 
```

（Company Entity 有一个 Location Entity 保存公司的地址，一个 Company 有一个 Location，一个 Location 可以有多个 Companies）

```
PATCH/PUT /companies/{id} -> User edits a Company information (changes street name from Company->Location 
```

我希望我的 API 能够检查该位置是否已经有其他公司。如果是这种情况，我希望用户在编辑位置实体（随后将为该位置上的所有公司更改）或创建新位置之间进行选择。

如何以 RESTful 方式将此选择发送回用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:45:04.863

简单的 ：

*   `PUT`如果存在则替换整个资源，如果不存在则创建新资源。如果您想严格遵守 REST（但您不必这样做），则别无选择。您的用户可以在看跌期权之前检查公司是否存在 GET。

*   `POST`假设更换了所有公司的收藏。

*   但是，您可以使用它`PATCH`来更新现有公司。

见：[https ://www.rfc-editor.org/rfc/rfc5789](https://www.rfc-editor.org/rfc/rfc5789)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:08:01.770

REST API 或任何严格的服务将根据请求提供响应。因此，如果其他公司与该位置相关，REST API 肯定可以响应用户。但是 API 无法通过选择做出回应。API 可以返回一些信息，用户需要根据该信息发出另一个请求。

相反，最好让用户选择预先指定它。因此，作为请求的一部分，用户预先选择是否应更新该位置的相关公司。例如，用户可以将其指定为 REST API 上的查询参数，并且服务可以根据该查询参数采取适当的操作。

# ruby-on-rails - delayed_job -i via cron script through ruby will not start after stopping previous processes

> ID：15947309
> 
> 赞同：4
> 
> 时间：2013-04-11T11:13:50.960
> 
> 标签：ruby-on-rails, ruby, delayed-job

So I have a weird situation, I have delayed_job 2.0.7 and daemons 1.0.10 and ruby 1.87 & rails 2.3.5 running on Scientific Linux release 6.3 (Carbon).

I have a rake task that restarts delayed jobs each night and then does a bunch of batch processing. I used to just do ruby script/delayed_job stop and then start. I have added a backport of named queues that has allowed me to do named queues. So because of this I want to start several processes of each type of named queue. To do this, it seems the best way I found is to use -i to name each process differently so they don't collide.

I wrote some ruby code to do this looping and it works great in dev, it works great on the command line, it works great when called from the rails console. But when called from cron it fails silently, the call returns false but no error message.

```
# this works
system_call_result1 = %x{ruby script/delayed_job stop}
SnapUtils.log_to_both "result of stop all - #{system_call_result1} ***"

# this works
system_call_result2 = %x{mv log/delayed_job.log log/delayed_job.log.#{Date.today.to_s}}
SnapUtils.log_to_both "dj log file has been rotated"

# this fails, result is empty string, if I use system I get false returned
for x in 1..DELAYED_JOB_MAX_THREAD_COUNT
  system_call_result = %x{ruby script/delayed_job -i default-#{x} start}
  SnapUtils.log_to_both "result of start default queue iteration #{x} - #{system_call_result} ***"
end

# this fails the same way
for y in 1..FOLLOWERS_DELAYED_JOB_MAX_THREAD_COUNT
  system_call_result = %x{ruby script/delayed_job --queue=follower_ids -i follower_ids-#{y} start}
  SnapUtils.log_to_both "result of start followers queue iteration #{y} - #{system_call_result} ***"
end 
```

So I did lots of trial and found that this problem only happens if I used -i - named processes and only happens if I stop them, then try to start them. If I remove the stops then everything works fine.

Again this is only when I use cron.

If I use command line or console to run, it works fine.

So my question is, what could cron be doing differently that causes these named dj processes not to start if you previously stopped them in the same ruby process?

thanks Joel

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:28:59.893

好吧，我终于想通了，当检查 cron 是否会发送电子邮件时，我们发现 sendmail 坏了，没有安装 sendmail 想要的 mysql 版本，所以我们修复了这个问题，然后我们的问题神奇地消失了。我仍然会向任何可以解释原因的人提供赏金..

# java - Android .split 无法正常工作

> ID：15947311
> 
> 赞同：0
> 
> 时间：2013-04-11T11:13:53.910
> 
> 标签：java, android

嗨，下面的代码似乎无法正常工作，是我做错了什么吗？

基本上发生的事情是我收到了字符串`prd|50126057|12bars|5`，我试图把它分成三个不同的文本视图；当我运行它时，它只在第一个 textView 中显示 prd ，而其他的则不会改变。为什么会这样？

我可以看到它在日志中工作，只是没有在其他文本视图中显示它。

任何帮助都非常感谢，并提前感谢。

另外，如果这已经得到解答，我也很抱歉，我确实在这里进行了一些搜索，但找不到任何东西。

```
public void messageReceived(String message) {

    String response = message;
    String[] words = response.split("\\|");
    TextView tv1 = (TextView) findViewById(R.id.textView1);
    TextView tv2 = (TextView) findViewById(R.id.textView2);
    TextView tv3 = (TextView) findViewById(R.id.textView3);

    tv1.setText(words[0]);
    tv2.setText(words[1]);
    tv3.setText(words[2]);
    Log.e("items-->", "" + words[0] + " " + words[1] + " " + words[2]+ " " + words[3]);

    publishProgress(message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:19:11.263

```
 String[] words;
 String s="prd|50126057|12bars|5"; 
 words= s.split("\\|");
 for(int i=0;i<words.length;i++)
 {
    System.out.println("Shifted: " +words[i]);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T12:22:16.323

你`AsyncTask<Void, Void, Void> { ... }`在你的项目中使用过。如果您使用的是 AsyncTask，您可以使用`onProgressUpdate(Progress...)`或`onPostExecute(Result)`方法更新 UI。你也调用`publishProgress(message)`方法。所以更好的是，您可以使用`onProgressUpdate(Progress...)`或`onPostExecute(Result)`方法更新您的 UI（将字符串分配给 Textview）。例如：

```
public class connectTask extends AsyncTask<String,String,SOCKETClient> {
    @Override
    protected SOCKETClient doInBackground(String... message) {
        socketClient = new SOCKETClient(new SOCKETClient.OnMessageReceived() {
            @Override
            public void messageReceived(String message) {
                // this method calls the onProgressUpdate
                publishProgress(message);
            }
        });
        socketClient.run();
        return null;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);

        String response = values[0];
        String[] words = response.split("\\|");
        TextView tv1 = (TextView) findViewById(R.id.textView1);
        TextView tv2 = (TextView) findViewById(R.id.textView2);
        TextView tv3 = (TextView) findViewById(R.id.textView3);

        tv1.setText(words[0]);
        tv2.setText(words[1]);
        tv3.setText(words[2]);
    }
} 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:20:41.283

利用：

```
String response = "abc|asd|asd|asd";
String[] words = response.split("\\|");
Log.e("items-->", "" + words[0] + " " + words[1] + " " + words[2]+ " " + words[3]); 
```

o/p：

```
04-11 16:55:58.216: E/items-->(3885): abc asd asd asd 
```

* * *

```
Edited:

String response = "abc|asd|asd|asd";

    String[] words = response.split("\\|");

   // Log.e("items-->", "" + words[0] + " " + words[1] + " " + words[2]+ " " + words[3]);

   TextView tv = (TextView)findViewById(R.id.text);

   tv.setText("" + words[0] + " " + words[1] + " " + words[2]+ " " + words[3]); 
```

* * *

## 最后编辑：

```
 String response = "abc|asd|asd|asd";

        String[] words = response.split("\\|");

        // Log.e("items-->", "" + words[0] + " " + words[1] + " " + words[2]+
        // " " + words[3]);

        TextView tv = (TextView) findViewById(R.id.textView1);
        TextView tv1 = (TextView) findViewById(R.id.textView2);
        TextView tv2 = (TextView) findViewById(R.id.textView3);
        TextView tv3 = (TextView) findViewById(R.id.textView4);

        tv.setText("" + words[0]);
        tv1.setText("" + words[1]);
        tv2.setText("" + words[2]);
        tv3.setText("" + words[3]); 
```

![在此处输入图像描述](https://i.stack.imgur.com/3LBqv.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:20:46.420

你的单词数组的大小是多少？

```
String test = "prd|50126057|12bars|5";
String [] words = test.split("\\|");
System.out.println(words.length); 
```

给了我 4 的预期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:41:24.430

代码看起来没问题。要么没有调用它，要么传递了错误的字符串。

我建议添加日志记录，看看会发生什么：

```
Log.d("~~~","@@@@ response=["+response+"]"); 
```

并且，正如其他人所建议的那样，`words.length`和项目。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-11T11:20:05.397

```
String response = "prd|50126057|12bars|5";
String[] words = response.split("|");
Toast.makeText(mActivity, words[0]+"::"+words[1]+"::"+words[2]+"::"+words[3],Toast.LENGTH_SHORT).show(); 
```

上面的代码在这方面没有任何问题。只需检查 messageReceived 是否被调用。

# c# - C# 中的 Response.Redirect 等效项

> ID：15947320
> 
> 赞同：0
> 
> 时间：2013-04-11T11:14:08.750
> 
> 标签：c#, vb.net, redirect

我正在尝试从 VB.Net 更改为 C#，但我有点卡住了。在 VB.Net 中，当我在左侧选项卡中选择详细信息视图，然后`ItemUpdated`从右侧选项卡中选择然后写入`Response.Redirect("customer.aspx")`. 我不能让它在 C# 中做同样的事情。我拥有的 VB.Net 代码是：

```
Protected Sub customerDetDetailsView_ItemUpdated(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.DetailsViewUpdatedEventArgs) Handles customerDetDetailsView.ItemUpdated
    Response.Redirect("customer.aspx")
End Sub 
```

我在 C# 中试过这个，但它不适合我

```
protected void customerDetDetailsView_ItemUpdated(object sender, System.Web.UI.WebControls.DetailsViewUpdatedEventArgs e)
{
    Response.Redirect("customer.aspx");
} 
```

有谁知道我应该为此做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:17:36.947

**在 c# 中尝试以下操作：**

```
protected void customerDetDetailsView_ItemUpdated(object sender, System.Web.UI.WebControls.DetailsViewUpdatedEventArgs e)
    {
        Response.Redirect("customer.aspx",false);
    } 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:20:08.783

**将方法**绑定**`customerDetDetailsView_ItemUpdated`到事件`customerDetDetailsView.ItemUpdated`**

 **在 PageLoad 中添加类似的内容

```
customerDetDetailsView.ItemUpdated +={tab}... 
```**

# android - Android 操作栏“向上”项目，具有多个父项的活动

> ID：15947325
> 
> 赞同：2
> 
> 时间：2013-04-11T11:14:22.850
> 
> 标签：android, android-actionbar

我有一个使用操作栏的 Android 应用程序，并且通过系统的流程在清单中确定如下：

```
<... android:parentActivityName="com.polymorph.amsmobile.xyzActivity" >
<meta-data android:name="android.support.PARENT_ACTIVITY"
           android:value="com.polymorph.amsmobile.xyzActivity" /> 
```

但是，用户可以从层次结构中的多个点进入一个屏幕，因此有多个“父”活动，因此我想动态指定父活动，而不是在清单中指定。

我的目标是确保当他们使用操作栏上的“向上”时，它会将他们带到应用程序的正确页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:23:23.547

你的意思是在一个活动中你希望能够从 ActionBar 到另一个活动的地方是这样的吗？

```
 @Override
 protected void onCreate(Bundle b) {
    ActionBar ab = getActionBar();
    ab.setHomeButtonEnabled(true);
    ab.setDisplayHomeAsUpEnabled(true);
 }

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {    
    switch (item.getItemId()) {
    case android.R.id.home:
       Intent intent = new Intent(this, GoToThisActivity.class);            
       intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
       startActivity(intent);
       return true;
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T20:08:53.537

如果你只想去上一个活动，你可以这样做：

```
 @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case android.R.id.home:
        finish();
        return true;
      default:
        break;
    } 
```

# php - <?php echo file_get_contents ("http://www.google.com/"); ?> 但我只想获取 url 中标签的内容...怎么做...？我需要在标签之间回显内容....而不是整个页面

> ID：15947331
> 
> 赞同：-2
> 
> 时间：2013-04-11T11:14:52.677
> 
> 标签：php, url, web, tags

```
<?php echo file_get_contents ("http://www.google.com/"); ?> 
```

但我只想获取 url 中标签的内容...怎么做...？我需要在标签之间回显内容....而不是整个页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:22:42.297

请参阅此[PHP 手册](http://php.net/manual/en/function.file-get-contents.php)和[cURL](http://php.net/manual/en/book.curl.php)，它们也会对您有所帮助。

您也可以使用用户定义函数而不是 file_get_contents()：

```
function get_content($URL){
      $ch = curl_init();
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($ch, CURLOPT_URL, $URL);
      $data = curl_exec($ch);
      curl_close($ch);
      return $data;
  }

 echo get_content('http://example.com'); 
```

希望，它会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:29:33.880

我认为您想从文件中的特定 html 标记中提取内容。为此，您可以使用正则表达式。但是，请查看以下链接以解析 HTML 文档文件：

[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:37:58.923

```
libxml_use_internal_errors(true);

$url = "http://stackoverflow.com/questions/15947331/php-echo-file-get-contents-how-to-get-content-in-a-certain-tag";

$dom = new DomDocument();
$dom->loadHTML(file_get_contents($url));

foreach($dom->getElementsByTagName('a') as $element) {
    echo $element->nodeValue.'<br/>';
} 

exit; 
```

更多信息：[http ://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)

在那里您可以看到如何通过`id`or选择元素`class`，如何获取元素的属性值等。

**注意：**最好通过[`cURL`](http://php.net/manual/en/book.curl.php)而不是`get_file_contents`. 例如：

```
function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

另请注意，在某些网站上，您必须指定诸如`CURLOPT_USERAGENT`等之类的选项，否则可能不会返回内容。

以下是其他选项：[http ://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

# sql - 使用 SQL 语句结果作为字符串

> ID：15947332
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:14:53.347
> 
> 标签：sql, sql-server, string

所以我有这个声明：

```
select @sqlStmt = 'SELECT replace(replace(substring(base_object_name,1,CHARINDEX(''.'',base_object_name) - 1),''['',''''),'']'','''')
    FROM sys.synonyms
    WHERE name = ''S_LC''' 
```

我想知道是否有办法使用该语句的结果，例如连接到另一个字符串？

我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:25:05.463

如果要执行 sql 语句并将结果连接到另一个 sql 变量，可以这样做

```
 DECLARE @anotherString VARCHAR(10)

           EXEC sp_executeSQL
           'SELECT @output = replace(replace(substring(base_object_name,1,CHARINDEX(''.'',base_object_name) - 1),''['',''''),'']'','''')
           FROM sys.synonyms WHERE name = ''S_LC''', N'@output VARCHAR(10) OUTPUT', @output= @anotherString OUTPUT; 
```

现在@anotherString 已准备好与任何其他字符串连接。

请注意，我没有编译你的 sql 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:19:49.897

如果你执行它并且不仅将它存储在你的变量中，是的：

```
DECLARE @objName NVARCHAR(255)

SELECT @objName = REPLACE(
                    REPLACE(
                      SUBSTRING(base_object_name,1,
                          CHARINDEX('.',base_object_name) - 1),
                    '[',''),
                  ']','')
    FROM sys.synonyms
    WHERE name = 'S_LC' 
```

# hibernate - 如何为 Hibernate 设置 Tomcat 7 Postgresql 数据源？

> ID：15947338
> 
> 赞同：2
> 
> 时间：2013-04-11T11:15:12.567
> 
> 标签：hibernate, tomcat, tomcat7, war

由于某些原因，我必须微调 jdbc 连接，并且我发现 context.xml 是我可以做到这一点的方式。（[http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#PostgreSQL](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#PostgreSQL)）

所以，我创建了 context.xml：

```
<Context>
<Resource
    name="jdbc/connectorDs"
    auth="Container"
    type="javax.sql.DataSource"
    driverClassName="org.postgresql.Driver"
    url="jdbc:postgresql://localhost/somedb"
    username="pguser"
    password="pgpw"
    maxActive="20"
    maxIdle="10"
    maxWait="-1" />
</Context> 
```

在 web.xml 中添加一些配置：

```
<resource-ref>
    <description>postgreSQL Datasource example</description>
    <res-ref-name>jdbc/connectorDs</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

并修改hibernate.cfg.xml：

```
<property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>
<property name="connection.driver_class">org.postgresql.Driver</property>
<property name="hibernate.connection.datasource">java:jdbc/connectorDs</property>

<!-- THE ORIGINAL CONFIG -->
<!-- <property name="connection.url">jdbc:postgresql://localhost/somedb</property> -->
<!-- <property name="connection.username">pguser</property> -->
<!-- <property name="connection.password">pgpw</property> --> 
```

但是这种配置不起作用：`SEVERE: Initial SessionFactory creation failed.org.hibernate.HibernateException: Could not find datasource`. 我想数据源不存在或数据源连接字符串`java:jdbc/connectorDs`不正确。有人对此有任何经验吗？如何正确设置我的连接，或如何在连接上设置其他属性？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:24:20.863

在 hibernate.cfg.xml 中，尝试替换

```
<property name="hibernate.connection.datasource">java:jdbc/connectorDs</property> 
```

和

```
<property name="hibernate.connection.datasource">java:/comp/env/jdbc/connectorDs</property> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:27:02.533

尝试

```
<property name="hibernate.connection.datasource">java:comp/env/jdbc/OracleDS</property> 
```

我认为您不需要在 web.xml 和 server.xml 中声明数据源。如果仍然无法运行，请尝试删除 web.xml 之一

# ios - How to handle different orientations in iOS

> ID：15947349
> 
> 赞同：19
> 
> 时间：2013-04-11T11:15:58.810
> 
> 标签：ios, iphone, objective-c, rotation

ADDED: You can access this project on github [ios6rotations](https://github.com/assistman/RotationIOS6)

* * *

Sorry guys for asking the question about screen rotation in iOS 6 but this is really a pain in the ass..and I still can't understand it completely - for some reason it behaves differently under certain circumstances.

I have the following simple hierarchy of views in my test app: ![](https://i.stack.imgur.com/0f6ms.png)

What I'm trying to achieve is - **to keep blue controller in landscape only and red one is only in portrait**.

I have a subclass of UINavigationController with such code inside:

```
@implementation CustomNavController

- (BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return  [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

In my blue controller I implemented this:

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

And in red controller this:

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

Now I have the following behavior:

1.  App started in landscape (OK)
2.  When I press the button my red controller pushed in landscape too (this is not ok because it must be shown in Portrait)
3.  It successfully rotates to portrait but not backward to landscape
4.  If I leave the red controller in Portrait mode my blue controller (which is restricted to landscape) shows in Portrait mode.

P.S. All my rotation methods(posted above) are getting called normally.(by the way why do these methods getting called so many times per screen transition - 5-6 times)

**`- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation` does not getting called with pushing**

All(except portraitUpsideDown) orientations are included in plist.

**The question is - how to force rotation to supported orientation in each controller?**

I suggest you to post here (as answers) any 100% working code to handle rotations in ios6 (for example if you have some for iPad with SplitController) - I'll keep this question in favorites to have all in one place when I need to handle some specific situations. Cheers!

ADDED: Please do not post this as answer [from landscape to portrait](https://stackoverflow.com/questions/14896607/ios6-0-pushing-new-viewcontroller-in-portrait-orientation-from-landscape-viewcon?rq=1) I hope that there' s more elegant way to do it.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-15T18:49:40.200

**使用`-[UIDevice setOrientation:]`的是私有 API，会导致您的应用程序被拒绝。看到[这个问题](https://stackoverflow.com/questions/8257464/method-uidevice-setorientation-is-it-still-denied)。**

**使用公共 API 无法实现您的要求，从 HIG 的角度来看也不建议这样做。**支持并且您应该实现的是具有不同支持的界面方向的不同视图控制器的模式表示。这就是为什么默认实现`UINavigationController`是始终旋转的原因；它假定所有视图控制器都具有相同的受支持界面方向。

*以 iPhone 上的视频播放为例。打开视频应用程序（iOS 附带）。根视图控制器仅支持纵向。但是，启动一个视频，会弹出一个仅支持横向界面方向的模态视图控制器。这似乎正是您希望实现的行为。*

这就是为什么`preferredInterfaceOrientationForPresentation`不调用。`preferredInterfaceOrientationForPresentation`仅在使用时被调用`presentViewController:animated:`。

一个小问题，如果您在场景的每个阶段都需要导航栏，则需要用导航控制器包围每个模态视图控制器。`prepareForSegue:`然后，您可以通过访问`topViewController`segue 中的导航控制器对象来传递所需的数据。

* * *

这是一个示例项目，它根据您的要求正确运行（或者至少会给您提供如何实现的想法）：

[http://www.mediafire.com/?zw3qesn8w4v66hy](http://www.mediafire.com/?zw3qesn8w4v66hy)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T09:49:18.260

我的两分钱值。

您可以在 ViewController 和 ViewControllerSecond 类上***快速显示一个空的透明模态视图，然后将其关闭***，也许是在 ViewDidLoad: 或 viewWillAppear: 上作为快速解决方法。

此外，在情节提要中，您可以将*ViewController*类的方向设置为视觉上的**横向。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T08:14:06.790

使用这条线以编程方式改变方向......**工作 100%**

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

并且当您添加这一行时，会出现一个警告并删除此警告，只需在您的实现文件中添加波纹管代码......在顶部。

```
@interface UIDevice (MyPrivateNameThatAppleWouldNeverUseGoesHere)
- (void) setOrientation:(UIInterfaceOrientation)orientation;
@end 
```

然后在下面的方法中，如果需要，只需编写此代码..

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return your supported orientations

 if (currentMainView==blueOne) {
        return toInterfaceOrientation== UIInterfaceOrientationPortrait;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T01:20:51.107

我在我的一个应用程序中遇到了类似的情况（尽管请注意我没有使用 UINavigationController）。

更改`shouldAutorotate`两个视图控制器中的方法：

```
//in blue (landscape only)
-(BOOL)shouldAutorotate{
    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
        return YES;
    }
    else {
        return NO;
    }
}

//in red (portrait only)
-(BOOL)shouldAutorotate{
    if (self.interfaceOrientation == UIInterfaceOrientationPortrait) {
        //note that UIInterfaceOrientationIsPortrait(self.interfaceOrientation) will return yes for UIInterfaceOrientationPortraitUpsideDown
        return YES;
    }
    else {
        return NO;
    }
} 
```

保持`supportedInterfaceOrientations`方法相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-05T07:02:29.673

```
#pragma mark- Orientation Delegate Method:
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{   Orientation = [UIApplication sharedApplication].statusBarOrientation;
    if (Orientation == UIInterfaceOrientationLandscapeLeft || Orientation == UIInterfaceOrientationLandscapeRight)
    {

        // self.scrollView.contentOffset = CGPointMake(self.view.bounds.size.width,1200);

        [scrollView setScrollEnabled:YES];
        [scrollView setContentSize:CGSizeMake(768, 2150)];

    }else if (Orientation == UIInterfaceOrientationPortrait || Orientation == UIInterfaceOrientationPortraitUpsideDown)
    {

        [scrollView setScrollEnabled:YES];
        [scrollView setContentSize:CGSizeMake(768, 1750)];

    }

} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-11T11:30:55.137

为了一起使用导航和方向，您应该使用一堆视图控制器，如数组。

之后结帐以下方法，

```
-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

您方法的这种变化将对您有很大帮助。

享受编程！

# android - 禁止 Android 发出 LogCat 消息

> ID：15947352
> 
> 赞同：1
> 
> 时间：2013-04-11T11:16:04.890
> 
> 标签：android, logcat

是否可以在设备上禁用 Android 从所有应用程序发出所有日志消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:39:56.030

也许在有根设备上。当然，使用您自己的 ROM 模块。否则，没有。请记住，即使您的工具没有查看这些日志（例如，设备与您的开发机器断开连接），也会保留这些日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:42:33.740

不，你不能这样做。某些设备（例如华为的）禁用了日志记录，您必须做一些魔术才能恢复此功能，但这只是华为自定义固件修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:48:50.603

在华为设备上，您拨打：

```
*#*#2846579#*#* 
```

这将打开一个应用程序，您可以在其中禁用所有日志消息。我敢肯定，每台设备都有一些秘密电话号码可以让你做到这一点。无需生根。

# php - 如何在mysql查询中插入where条件

> ID：15947356
> 
> 赞同：0
> 
> 时间：2013-04-11T11:16:16.123
> 
> 标签：php, mysql

我会将查询传递给这个函数`query("SELECT * FROM table_name");`

功能是

```
public function query($sql) {

        $resource = mysql_query($sql, $this->link_web);

        if ($resource) {
            if (is_resource($resource)) {
                $i = 0;

                $data = array();

                while ($result = mysql_fetch_assoc($resource)) {
                    $data[$i] = $result;

                    $i++;
                }

                mysql_free_result($resource);

                $query = new stdClass();
                $query->row = isset($data[0]) ? $data[0] : array();
                $query->rows = $data;
                $query->num_rows = $i;

                unset($data);

                return $query;  
            } else {
                return true;
            }
        } else {
            trigger_error('Error: ' . mysql_error($this->link_web) . '<br />Error No: ' . mysql_errno($this->link_web) . '<br />' . $sql);
            exit();
        }
    } 
```

我也想`tenent_id = '1'`在`SELECT`查询中添加`INSERT`查询。同样，我需要为`UPDATE`.

我想带来这样的查询

```
SELECT * FROM table_name WHERE tenent_id = 1 and user_id = 1

INSERT INTO table_name('tenant_id, user_id') VALUE('1','1')

UPDATE table_name SET user_id = 1 WHERE tenant_id = '1' 
```

谁能给我有关如何插入`tenant_id`选择，插入和更新的想法

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:24:33.937

使用正确的 mysql 函数而不是仅仅使用查询函数是更好的做法。

例如，如果要循环浏览数据库中的许多项目，可以使用 while 循环：

```
$query = mysql_query("SELECT * FROM table WHERE type='2'");
while($row = mysql_fetch_array($query)){
    echo $line['id'];
} 
```

这将回显数据库中具有类型 2 的所有 ID。

同样的原则是当你有一个对象时，使用 mysql 函数，你可以指定你希望数据如何返回。上面我在一个数组中返回了它。在这里，我将返回单行作为对象：

```
$query = mysql_query("SELECT * FROM table WHERE id='1'");
$object = mysql_fetch_object($query);
echo $object->id;
echo $object->type;
echo $object->*ANY COLUMN*; 
```

这将返回： 1\. 2. *无论该列的值是*.

* * *

要插入数据，您不需要执行“query()”。您可以简单地使用 mysql_query($sql)。这将使生活更轻松。

此外，最好在函数中运行一个查询，这样您就可以正确处理数据。

```
mysql_query("INSERT...");
mysql_query("UPDATE...");
mysql_query("SELECT..."); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:43:43.947

简单的答案是：只需将条件添加到您的查询中。打电话`query("SELECT * FROM table_name WHERE tenant_id = 1 and user_id = 1")`。

如果您担心转义传递给 SQL 查询的参数（您应该这样做！），您可以自己手动完成，例如

```
$query = sprintf("SELECT * FROM table_name WHERE tenant_id = %d", intval($tenant_id));
query($query); 
```

或者更好地使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)扩展提供的准备好的语句（无论如何[不推荐使用mysql_query）：](http://php.net/manual/en/function.mysql-query.php)

```
$stmt = $mysqli->prepare("SELECT * FROM table_name WHERE tenant_id = ?");
$stmt->bind_param("i", $tenant_id);
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_array(MYSQLI_ASSOC)) {
    // ...
} 
```

* * *

如果我还没有回答您的问题，您可以使用库来处理您的查询，例如[dibi](http://dibiphp.com/en)：

```
$result = dibi::query('SELECT * FROM [table_name] WHERE [tenant_id] = %i', $id);
$rows = $result->fetchAll(); // all rows 
```

**最后一个选项是我将使用**的，您无需编写自己的查询处理函数并免费获取查询参数绑定。在您的情况下，您可以使用逐步构建查询，以便 WHERE 条件不是您的基本查询的一部分：

```
$query[] = 'SELECT * FROM table_name';
if ($tenant_id){
    array_push($query, 'WHERE tenant_id=%d', $tenant_id);
}
$result = dibi::query($query); 
```

# php - 在 HTML 选择标签中使用 php 函数

> ID：15947361
> 
> 赞同：0
> 
> 时间：2013-04-11T11:16:27.037
> 
> 标签：php, function, html-select

我在 php 中创建了一个函数，我使用此函数的目标是在 HTML 选择标记中打印以下行。

```
<option value="<?php echo $key . $product[$name . '_id'] == $key ? 'selected' : null  ?>"><?php echo $value ?></option> 
```

这就是我想出的：

```
function Select($name){
    $ids = array();
    $values = array();
    $query1 = $sql->query("SELECT * FROM '$name'");
    while($fetch = $query1->fetch_assoc()){
        array_push($ids, $fetch[$name . '_id']);
        array_push($values, $fetch[$name]);
    }
    $names = array_combine($ids, $values);

    foreach($names as $key => $value){
        return '<option value="' . $key . '"' . $product[$name . '_id'] == $key ? 'selected' : null . '>' . $value . '</option>';
    }
} 
```

这似乎不起作用，但是当我将它直接放在 HTML 选择标记中时，它确实起作用。它看起来像这样：

```
<select name="type" class="chozen" id="type">
    <?php
        $brand_ids = array();
        $brand_values = array();
        $query1 = $sql->query("SELECT * FROM brands");
        while($brand = $query1->fetch_assoc()){
            array_push($brand_ids, $brand['brand_id']);
            array_push($brand_values, $brand['brand']);
        }
        $brands = array_combine($brand_ids, $brand_values);

        foreach($brands as $key => $value){
            ?>
            <option value="<?php echo $key ?>"<?php echo $product['brand_id'] == $key ? 'selected' : null ?>><?php echo $value; ?></option>
            <?php
        }
    ?>
</select> 
```

有人可以指出我哪里出错了，我想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:20:44.490

您的问题是您试图分别返回每一行。但是您的功能在第一次返回后将不会继续。这应该工作：

```
$str = '';
foreach($names as $key => $value){
    $str = $str.'<option value="' . $key . '"' . $product[$name . '_id'] == $key ? 'selected' : null . '>' . $value . '</option>';
}
return str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:21:02.807

```
$brands = array() ;
$query1 = $sql->query("SELECT * FROM brands");
while($brand = $query1->fetch_assoc()){
  $brands[$brand['brand_id']] = $brand ; //Just use brand_id as keys in the array
}

if (!empty($brands)): ?>
  <select name="type" class="chozen" id="type">
    <?php foreach($brands as $id => $brand): ?>
      <option value="<?php echo $brand['brand'] ; ?>"<?php echo ($brand['brand_id'] == $id ? 'selected' : ""); ?> ><?php echo $brand['brand'] ; ?></option>
    <?php endforeach ; ?>
  </select>
<?php else : ?>
  <div>No brands to display!</div>
<?php endif ; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:22:33.033

我认为您可以尝试以下行：

```
$str = "";
foreach($names as $key => $value){
   $str .= '<option value="' . $key . '" ' . (($product[$name . '_id'] == $key) ?     'selected'    : '') . '>' . $value . '</option>';
}
return $str; 
```

1）使用空字符串而不是null。2) $key 后面的空格

希望它有帮助

# php - Wordpress - Select from another database

> ID：15947362
> 
> 赞同：0
> 
> 时间：2013-04-11T11:16:27.573
> 
> 标签：php, mysql, wordpress

I have two different systems running on my server. Wordpress for website and opencart for web shop. What i would like to do is fetch some of the latest products from shop database to show on my website.

How is the wordpress with selecting from another database? It is just a few lines of data, what should i do? Do a direct call inside the template files? Alter the existing config files?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:25:47.270

如此处所述[http://www.davidtan.org/wordpress-how-to-use-wpdb-class-to-connect-fetch-data-from-another-database/](http://www.davidtan.org/wordpress-how-to-use-wpdb-class-to-connect-fetch-data-from-another-database/)，您可以使用：

```
$mydb= new wpdb('user','pass','mydb','localhost');
$rows = $mydb->get_results("select columnName from tableName");
foreach ($rows as $obj) {
    echo $obj->columnName;
} 
```

# arduino - 如何从 arduino Gboard 读取短信

> ID：15947364
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:16:37.127
> 
> 标签：arduino, gsm

```
// libraries
#include <GSM.h>

// PIN Number
//#define PINNUMBER ""

// initialize the library instance
GSM gsmAccess; // include a 'true' parameter for debug enabled
GSM_SMS sms;

char remoteNumber[20];  // Holds the emitting number

void setup()
{
  // initialize serial communications
  Serial.begin(9600);

  Serial.println("SMS Messages Receiver");

  // connection state
  boolean notConnected = true;

  // Start GSM shield
  // If your SIM has PIN, pass it as a parameter of begin() in quotes
  while(notConnected)
  {
    if(gsmAccess.begin()==GSM_READY)
      notConnected = false;
    else
    {
      Serial.println("Not connected");
      delay(1000);
    }
  }

  Serial.println("GSM initialized");
  Serial.println("Waiting for messages");
}

void loop()
{
  char c;

  // If there are any SMSs available()  
  if (sms.available())
  {
    Serial.println("Message received from:");

    // Get remote number
    sms.remoteNumber(remoteNumber, 20);
    Serial.println(remoteNumber);

    // This is just an example of message disposal    
    // Messages starting with # should be discarded
    if(sms.peek()=='#')
    {
      Serial.println("Discarded SMS");
      sms.flush();
    }

    // Read message bytes and print them
    while(c=sms.read())
      Serial.print(c);

    Serial.println("\nEND OF MESSAGE");

    // delete message from modem memory
    sms.flush();
    Serial.println("MESSAGE DELETED");
  }

  delay(1000);

} 
```

错误：GSM_SMS 不是名称类型......所以我不明白实际错误是什么......请给我一个正确的答案。确切地说，我想使用 arduino Gboard 阅读 SMS 并通过手机打开或关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:47:34.837

请尝试 1.0.4 ( [http://arduino.cc/en/main/software)，1.5.2](http://arduino.cc/en/main/software)是测试版。如果我错了对不起...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:35:45.727

尝试下载最后一个 arduino 软件**arduino-1.0.4**并再次检查代码。

# excel - Find and copy code

> ID：15947365
> 
> 赞同：2
> 
> 时间：2013-04-11T11:16:38.510
> 
> 标签：excel, find, vba

Right people, I’m back again for some more help. I have a workbook where I add new worksheets every month with information which is exactly the same as before in structure. In column A, I have invoice numbers then details from columns B:J. In columns K & L there are comments manually added for all outstanding issues. What I want to do is be able to lookup invoices against the last worksheet and then copy comments in columns K & L into the new worksheet.

I have tried to create a bit of code but nothing is coming off it. The ActiveSheet is the newly created without comments. So i want to lookup invoice numbers in columns A and copy columns K & L where a match is found from last worksheet to columns K&L of the activesheet. I hope I make sense and thank you for helping

```
Option Explicit

Sub FindCopy_all()

    Dim calc As Long
    Dim Cel As Range
    Dim LastRow As Long
    Dim rFound As Range
    Dim LookRange As Range
    Dim CelValue As Variant

     ' Speed
    calc = Application.Calculation
    With Application
        .Calculation = xlCalculationManual
        .ScreenUpdating = False
    End With

     'Get Last row of data ActiveSheet, Col A
    LastRow = ActiveSheet.Cells(1048576, 1).End(xlUp).Row

     ' Set range to look in
    Set LookRange = ActiveSheet.Range("A1:A" & LastRow)

     ' Loop on each value (cell)
    For Each Cel In LookRange
         ' Get value to find
        CelValue = Cel.Value
         ' Look on previous sheet
        With Sheets(Sheets.Count - 3)

            Set rFound = .Cells.Find(What:=CelValue, _
            After:=.Cells(1, 1), LookIn:=xlValues, _
            Lookat:=xlWhole, MatchCase:=False)

             ' Reset
            On Error GoTo endo

             ' Not found, go next
            If rFound Is Nothing Then
                GoTo NextCel
            Else
                 ' Found. last sheet, Col K & L to Active Sheet found Row, Col K & L
                .Cells(rFound.Row, 11, 12).Resize(, 2).Copy ActiveSheet.Cells(Cel.Row, 11, 12)
            End If
        End With
NextCel:
    Next Cel
Set rFound = Nothing

     'Reset

endo:

    With Application
        .Calculation = calc
        .ScreenUpdating = True
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:34:59.413

您在`with`上一张纸上的声明中，并且不`activesheet`存在任何声明。利用：

```
.Cells(rFound.Row, 11).Resize(,2).Copy activesheet.Cells(cel.Row, 11) 
```

**此外**，您不应该需要`On Error Resume Next`，因为返回的范围将是并且在您完成每个查找后`nothing`还要确保您。`set rFound = nothing`

```
NextCel:
set rFound = nothing 
```

* * *

**我的代码：**

```
Option Explicit

Sub FindCopy_all()

    Dim calc As Long
    Dim Cel As Range
    Dim LastRow As Long
    Dim rFound As Range
    Dim LookRange As Range
    Dim CelValue As Variant

     ' Speed
    calc = Application.Calculation
    With Application
        .Calculation = xlCalculationManual
        .ScreenUpdating = False
    End With

     'Get Last row of data ActiveSheet, Col A
    LastRow = ActiveSheet.Cells(1048576, 1).End(xlUp).Row

     ' Set range to look in
    Set LookRange = ActiveSheet.Range("A1:A" & LastRow)

     ' Loop on each value (cell)
    For Each Cel In LookRange
         ' Get value to find
        CelValue = Cel.Value
         ' Look on previous sheet
        With Sheets(Sheets.Count - 1)

            Set rFound = .Range("A:A").Find(What:=CelValue, _
            After:=.Cells(1, 1), LookIn:=xlValues, _
            Lookat:=xlWhole, MatchCase:=False)

             ' Not found, go next
            If rFound Is Nothing Then
                GoTo NextCel
            Else
                 ' Found. last sheet, Col K & L to Active Sheet found Row, Col K & L
                .Cells(rFound.Row, 11).Resize(, 2).Copy ActiveSheet.Cells(Cel.Row, 11)
            End If
        End With
NextCel:
    Set rFound = Nothing
    Next Cel

    With Application
        .Calculation = calc
        .ScreenUpdating = True
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:08:33.893

My suggestion is that your VBA code puts VLOOKUP formulas in the new worksheet to retrieve the invoice information like this:

`activesheet.Cells(cel.Row, 11).formula="=VLOOKUP(...)"`

then in order to replace the formulas with text your code could use

`activesheet.Cells(cel.Row, 11).Copy`

followed by

`activesheet.Cells(cel.Row, 11).PasteSpecial xlPasteValues` to replace the formulas with just text values

try my code

```
 ' Speed
calc = Application.Calculation
With Application
    .Calculation = xlCalculationManual
    .ScreenUpdating = False
End With

 'Get Last row of data ActiveSheet, Col A
LastRow = ActiveSheet.Cells(activesheet.rows.count, 1).End(xlUp).Row

 ' Set VLOOKUP formula, search on the other sheet for the value in column A, return the value matchiung from column 11, and use EXACT MATCH.
'
' =VLOOKUP(A:A,Sheet1!A:L,11,FALSE) ' example
'
range("K1:K" & lastRow).formula="=VLOOKUP(A:A," & sheets(Worksheets.count-1).name & "!A:L,11, FALSE)"

activesheet.calculate
range("K1:K" & lastRow).copy
range("K1:K" & lastRow).pastespecial xlpastevalues ' remove the formulas 
```

that should get you started, try stepping through that and check the VLOOKUP is acting on the right columns and let us know how you get on

Philip

# java - 关闭连接后 Socket 和 SwingWorker 不起作用

> ID：15947367
> 
> 赞同：1
> 
> 时间：2013-04-11T11:16:57.773
> 
> 标签：java, multithreading, swing

我正在运行一个 TCP/IP 套接字，它发送一个 SOAP 消息然后得到一个响应然后读取它。

问题在于这种情况：起初一切都很好，我发送一条消息，然后使用 swingworker 得到响应。如果我关闭套接字并尝试再次连接，我会通过一个布尔值来停止 swing worker。当我再次连接时，我让线程运行，但是当我发送 SOAP 消息时，我没有从套接字获得任何输出，但是当我当时进行调试时，我降级代码，我得到了响应和一个输出！怎么会这样？

这是我的代码：

```
protected Object doInBackground() throws Exception {

        Integer result = 1;
        while (true) {

            if (startReading && !this.server.isSocketClosed()) {
                // send the SOAP Message based on which message is selected
                SendSOAPRequestMessage();
                //Thread.sleep(5);
                String responseMessage = null;
                try {
                    // get the response from the client/server
                    responseMessage = Utils.convertStreamToString(this.server);
                    System.out.println(responseMessage);
                    // give the message without the header + and check the content length and if the header is corrupted
                    fullMsg = decoder.DecodeSoapHeader(new String(responseMessage.getBytes("UTF-8")));
                } catch (Exception ex) {
                    Logger.getLogger(MainWindow.class.getName()).log(Level.SEVERE, null, ex);

                }

            }

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:44:26.917

[如此处](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#execute%28%29)所述，“SwingWorker 仅设计为执行一次。” 此外，您的工作人员不会同步对 的访问`this.server`，因此工作人员的后台线程可能看不到外部更改。一些替代方案：

*   为每个请求创建一个新的 worker 实例。

*   让工人管理套接字。

附录：*对于第一个解决方案，我是否也应该创建一个新套接字？*

不。正如[这里](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)所说，“在线程上启动的调用*发生*在已启动线程中的任何操作之前。” 将套接字的引用作为构造函数参数传递可能更清楚，[例如](https://sites.google.com/site/drjohnbmatthews/randomdata).

另一方面，套接字开销可能无关紧要。[配置文件](http://download.oracle.com/javase/7/docs/technotes/tools/share/jvisualvm.html)是肯定的。

# javascript - Ajax / 加载事件

> ID：15947368
> 
> 赞同：0
> 
> 时间：2013-04-11T11:17:07.287
> 
> 标签：javascript, jquery, ajax

目前我有一个小的 web 表单，可以很好地从下拉菜单中加载 AJAX 数据：

```
<select name="showcode" id="showcode">
<option value="1"> First Name</option>
<option value="2"> Last Name</option>
</select> 
```

我想做的是从文本链接创建操作，例如：

```
<a href="javascript:showcode(1);">First Name</a>
<a href="javascript:showcode(2);">Last Name</a> 
```

我不知道如何更改**.change(function() {** JS 以正确执行操作 onclick 事件以实现这一点。下面是 JS 部分。任何想法/帮助将不胜感激。

```
$(document).ready(function(){

$("#showcode").change(function() { 

var usr = $("#showcode").val();

$("#getassociatedprojects").html('Retrieving..');

$.ajax
({  
type: "POST",  
url: "/client-stories/data.php",  
data: "showcode="+ usr,  
success: function(msg)

{  
$("#getassociatedprojects").ajaxComplete(function(event, request, settings)
{  $(this).html(msg); });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:38:33.617

解决了。

为***_*** _ ***_*** _`<a href>`

```
<a href="#" id="1" class="topic" rel="1">First Name</a> 
```

然后将Javascript调用更改为：

```
$('a.topic').click(function() {
var usr = $(this).attr('rel'); 
```

瞧。有效。:)

# android - PreferenceScreen 主题

> ID：15947369
> 
> 赞同：1
> 
> 时间：2013-04-11T11:17:08.270
> 
> 标签：android, android-preferences, preferencescreen

我将偏好设置为偏好屏幕。

主屏幕很好，但子屏幕很暗，我看不到元素的标题，只有蓝色的描述。

如果我向下滚动，主题将变为浅色。

我尝试添加`android:background="AppTheme"`元素`preferencescreen`，但什么也没发生。

编辑（Meph）：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

        <!-- Network screen  -->

        <PreferenceScreen
                android:title="@string/pref_network_screen"
                android:key="prefNetworkScreen">
                android:background="@style/AppTheme">
                <CheckBoxPreference
                        android:title="@string/pref_network_update"
                        android:defaultValue="false"
                        android:summary="@string/pref_network_update_description"
                        android:key="prefUpdate" />
                <ListPreference
                        android:title="@string/pref_network_type"
                        android:summary="@string/pref_network_type_description"
                        android:key="prefNetworkType"
                        android:defaultValue="1"
                        android:entries="@array/prefNetworkArray"
                        android:entryValues="@array/prefNetworkValues" />
         </PreferenceScreen>

        <!-- Network screen  -->   

        <PreferenceScreen
            android:title="@string/pref_network_screen"
            android:key="prefNetworkScreen">
            <CheckBoxPreference
                    android:title="@string/pref_network_update"
                    android:defaultValue="false"
                    android:summary="@string/pref_network_update_description"
                    android:key="prefUpdate" />
            <ListPreference
                    android:title="@string/pref_network_type"
                    android:summary="@string/pref_network_type_description"
                    android:key="prefNetworkType"
                    android:defaultValue="1"
                    android:entries="@array/prefNetworkArray"
                    android:entryValues="@array/prefNetworkValues" />
         </PreferenceScreen>
</PreferenceScreen> 
```

和styles.xml：

```
<resources>

    <style name="AppTheme" parent="android:Theme.Light" />

</resources> 
```

# java - 我想查看从 Java 中的 HTTP 请求生成的响应的“源代码”

> ID：15947374
> 
> 赞同：-3
> 
> 时间：2013-04-11T11:17:26.683
> 
> 标签：java

我的代码只能返回响应状态消息或状态代码，但我需要我的代码以“查看源”格式返回响应，即 XML 格式：

```
import java.io.IOException;
import java.net.URL;
import java.net.HttpURLConnection;

public class API{
    public static void main(String args[]) throws IOException
    {
        URL url = new URL("http://example.com");
        HttpURLConnection http = (HttpURLConnection)url.openConnection();
        String statusCode = http.getResponseMessage();
        System.out.println(statusCode);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:24:21.880

您必须获取流然后阅读它。像这样：

```
import java.io.IOException;
import java.net.URL;
import java.net.HttpURLConnection;

public class API{
    public static void main(String args[]) throws IOException
    {
        URL url = new URL("http://example.com");

        HttpURLConnection http = (HttpURLConnection)url.openConnection();
        String statusCode = http.getResponseMessage();
        System.out.println(statusCode);

          //read the result from the server
          BufferedReader rd  = new BufferedReader(new InputStreamReader(http.getInputStream()));
          StringBuilder sb = new StringBuilder();
          String line = null;
          while ((line = rd.readLine()) != null)
          {
              sb.append(line);
          }

          System.out.println(sb.toString());
    }
} 
```

# asp.net - programmatically sort a gridview that is bound to a dataset (stored procedure)

> ID：15947381
> 
> 赞同：1
> 
> 时间：2013-04-11T11:17:46.010
> 
> 标签：asp.net, stored-procedures, gridview, dataset

I have a gridview that on button click binds to a dataset, which in itself is populated by a stored procedure. I am just wondering if there is a simple way to apply sorting to the gridview without having to change any sql?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:22:58.707

您可以在任何临时数据表中获取存储过程值，然后对数据表数据应用排序并绑定到 gridview 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:23:23.860

```
 protected void radgvData_SortCommand(object sender, GridSortCommandEventArgs e)
        {
            GridTableView tableView = e.Item.OwnerTableView;
            e.Canceled = true;
            GridSortExpression expression = new GridSortExpression();
            expression.FieldName = e.SortExpression;
            if (tableView.SortExpressions.Count == 0 || tableView.SortExpressions[0].FieldName != e.SortExpression)
                expression.SortOrder = GridSortOrder.Descending;
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Descending)
                expression.SortOrder = GridSortOrder.Ascending;
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Ascending)
                expression.SortOrder = GridSortOrder.Descending;
            tableView.SortExpressions.AddSortExpression(expression);
            radgvData.Rebind();
        } 
```

试试这个代码进行排序......

# sql - PL/SQL Procedure

> ID：15947382
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:17:49.420
> 
> 标签：sql, oracle, plsql, oracle11g

Just started doing some PL/SQL and I need some help creating a procedure I was assigned to practice:

> Create a procedure that has two inputs - firstname and surname. The procedure should DBMS output the following 3 lines:
> 
> ```
> firstname surname (lowercase) 
> FIRSTNAME SURNAME (uppercase) Firstname 
> Surname (Initial uppercase) 
> ```
> 
> The following PL/SQL functions can be used to assist:
> 
> ```
> UPPER( VARCHAR2 ), LOWER(VARCHAR2), INITCAP( VARCHAR2 ) 
> ```

I've tried this so far:

```
CREATE OR REPLACE PROCEDURE LabFourProc (firstname IN VARCHAR2, surname IN VARCHAR2)
IS
BEGIN
  DBMS_OUTPUT.PUT_LINE(firstname, surnmame);
END LabFourProc;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:29:25.547

伙计，我也是新手。试试这个，如果这有帮助

```
CREATE OR REPLACE PROCEDURE LabFourProc (firstname IN VARCHAR2, surname IN VARCHAR2)
IS
BEGIN
DBMS_OUTPUT.ENABLE (1000000); 
DBMS_OUTPUT.PUT_LINE('Input Parameters:'|| firstname ||CHR(9)|| surname ||CHR(10)||
'Upper Name:' || upper(firstname)||CHR(9)||upper(surname)||CHR(10)||
'Lower Name:' || lower(firstname)||CHR(9)||lower(surname)||CHR(10)||
'First Leter Cap Name:' || initcap(firstname)||CHR(9)||initcap(surname));
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:36:26.983

您可以使用`CONCAT()`函数或`||`运算符来连接字符串。例如：

```
-- outputs "firstname surname"
DBMS_OUTPUT.PUT_LINE(firstname || ' ' || surnmame); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-09T15:51:52.597

```
CREATE OR REPLACE PROCEDURE
p1(fn varchar2, sn varchar2)
is
BEGIN
DBMS_OUTPUT.PUT_LINE(lower(fn)||' '||lower(sn)||','||upper(fn)||' '||upper(sn)||','||initcap(fn)||' '||initcap(sn));
END; 
```

执行

```
EXEC P1('ANYA','ROMANOVA'); 
```

# c# - How to parse this xml in c#?

> ID：15947384
> 
> 赞同：1
> 
> 时间：2013-04-11T11:17:54.397
> 
> 标签：c#, xml, linq, parsing

I want to parse an xml file into a dictionary the Dictionary looks like this

```
"250", 0.110050251256281
"150", 0.810050256425628
"850", 0.701005025125628
"550", 0.910050251256281 
```

How can i parse the data above into a dictionary from the xml file below

```
<?xml version="1.0" encoding="utf-8"?>
<calibration>
  <zoom level="250">0,110050251256281</zoom>
  <zoom level="150">0,810050256425628</zoom>
  <zoom level="850">0,701005025125628</zoom>
  <zoom level="550">0,910050251256281</zoom>
</calibration> 
```

any help would be much appreciated

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:24:17.540

我会这样做：

```
 var xml = @"<?xml version="1.0" encoding="utf-8"?>
              <calibration>
                  <zoom level="250">0,110050251256281</zoom>
                  <zoom level="150">0,810050256425628</zoom>
                  <zoom level="850">0,701005025125628</zoom>
                  <zoom level="550">0,910050251256281</zoom>
              </calibration>"

  var doc = XDocument.Parse(xml);
  var zooms = doc.Descendants("zoom")
                 .ToDictionary(x => x.Attribute("level").Value, x => x.Value) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T11:21:28.307

您可以使用`System.Xml.Linq.XDocument`：

```
System.Xml.Linq.XDocument doc = System.Xml.Linq.XDocument.Load("your file");
var nodes = doc.Element("calibration").Elements("zoom");
Dictionary<string, double> myDictionary = new Dictionary<string, double>();

foreach (System.Xml.Linq.XElement item in nodes)
{
    var level = item.Attribute("level").Value;
    var val = double.Parse(item.Value);
    myDictionary.Add(level, var);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:31:56.160

试试下面...它会帮助你...

**代码 ：**

```
 System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
 doc.Load(Environment.CurrentDirectory + "//XML//Sample.xml");
 System.Xml.XmlNodeList CNodes = doc.SelectNodes("/calibration/zoom");
 Dictionary<int, string> dictionary = new Dictionary<int, string>();
 foreach (System.Xml.XmlNode node in CNodes)
   dictionary.Add(Convert.ToInt32(node.Attributes["level"].Value), node.InnerText); 
```

**输出 ：**

![在此处输入图像描述](https://i.stack.imgur.com/QYVfv.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T11:42:07.270

使用 Linq：

```
XDocument doc = XDocument.Load("XmlFile");
var elements = (from items in doc.Elements("calibration").Elements("zoom")
                select items).ToDictionary(x => x.Attribute("level").Value, x => Convert.ToDouble(x.Value)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:33:15.203

像这样的东西应该工作。不要忘记添加一些错误处理，您可能希望从文件而不是硬编码字符串加载 xml。

```
string xml = @"<?xml version=""1.0"" encoding=""utf-8""?>
<calibration>
<zoom level=""250"">0,110050251256281</zoom>
<zoom level=""150"">0,810050256425628</zoom>
<zoom level=""850"">0,701005025125628</zoom>
<zoom level=""550"">0,910050251256281</zoom>
</calibration>";

System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
xmlDoc.LoadXml(xml);
var nodes = xmlDoc.SelectNodes("calibration/zoom");
var dicNodes = new Dictionary<string,string>();
foreach (System.Xml.XmlNode node in nodes)
{
    dicNodes.Add(node.Attributes["level"].Value, node.InnerText);
} 
```

# python - 在 Python 中将图像颜色空间转换为 RGB

> ID：15947387
> 
> 赞同：2
> 
> 时间：2013-04-11T11:17:59.360
> 
> 标签：python, image-processing, python-imaging-library, color-space

我正在处理图像处理脚本（`Python`带有`PIL`库），我需要将任何图像的颜色空间转换为`RGB`. 我试过这个技巧，但它只适用`png`于`RGBa`色彩空间中的图像：

```
image = Image.open(imageFile)
image.load()

# replace alpha channel with white color
self.im = Image.new('RGB', image.size, (255, 255, 255))
self.im.paste(image, mask=image.split()[3]) 
```

如何使此代码普遍适用于任何色彩空间中的所有图像？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:59:46.087

找到解决方案：

```
image = Image.open(imageFile)
image.load()

# replace alpha channel with white color
self.im = Image.new('RGB', image.size, (255, 255, 255))
self.im.paste(image, None) 
```

在`self.im`变量中将存储具有白色（255、255、255）alpha 通道的 RGB 颜色空间中的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:37:54.620

您只想使用 PIL 吗？我建议使用 openCV 版本 2 python 绑定`cv2`

[http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cv2.cvtColor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cv2.cvtColor)

它在最常见的色彩空间之间有许多可能的转换。

如果你不想要`openCV`你可以使用`skimage`

[http://scikit-image.org/docs/dev/api/skimage.color.html#convert-colorspace](http://scikit-image.org/docs/dev/api/skimage.color.html#convert-colorspace)

# ruby-on-rails - 关于使用局部渲染按钮的思考

> ID：15947402
> 
> 赞同：0
> 
> 时间：2013-04-11T11:18:44.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3

你对使用局部渲染按钮有什么想法？我喜欢以这种方式保持干燥的概念。但也听说加载多个部分会减慢应用程序的速度。

如果是这样，加载按钮 20 次的页面对性能有多大影响？有那么大的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:39:57.733

在开发模式下加载几个部分会减慢应用程序的速度，每次都会重新读取文件，但在生产模式下不会，因为它会缓存视图代码。

因此，如果您想对按钮使用部分，请务必这样做。尽管就我个人而言，我希望有一个辅助函数来实现类似的功能。

```
def icon(name)
  icon = "icon-#{name}"
  raw content_tag :i, "", class: icon
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:23:04.783

我不会将它们用于按钮。

DRY 很好，但如果我有一个包含 10 个按钮的表单，我希望能够查看和调整各种按钮而不会弄乱部分按钮。其他人可能更喜欢部分，但这是我的偏好。

**我**使用的一件事是 simple_form、button_to 和其他类似的表单助手来干燥和简化我的表单。

# c - 如何在 for 循环中创建一个 char 数组和 2 个 void 18 次，每个都有不同的名称（数字）？

> ID：15947406
> 
> 赞同：0
> 
> 时间：2013-04-11T11:18:58.200
> 
> 标签：c, arrays, for-loop, char, void

[这就是代码现在的样子](http://pastebin.com/mQqcffWS)（或者至少是重要的部分。）

这些是我在编译时遇到的（相关）错误。（希望我能把它放在剧透标签里）

> g15_plugin_uinput.c：在函数“g15_process_keys”中：g15_plugin_uinput.c:189:3：错误：“g_key”未声明（在此函数中首次使用）
> 
> g_key [1](http://pastebin.com/mQqcffWS) =GKEY_OFFSET+1；^ g15_plugin_uinput.c:189:3：注意：对于出现在 g15_plugin_uinput.c:196:24 中的每个函数，每个未声明的标识符仅报告一次：
> 
> 警告：逗号表达式的左侧操作数无效 [-Wunused-value] g_key[7]=KEY_LEFTMETA, KEY_F1;
> 
> .....（重复）
> 
> ....（重复结束后）
> 
> g15_plugin_uinput.c:208:25：警告：逗号表达式的左侧操作数无效 [-Wunused-value] g_key[18]=KEY_LEFTCTRL, KEY_PAGEDOWN;
> 
> g15_plugin_uinput.c:208:3：警告：语句无效 [-Wunused-value] g_key[18]=KEY_LEFTCTRL, KEY_PAGEDOWN;
> 
> g15_plugin_uinput.c:292:16：错误：未知类型名称“key_seq”无效 g_key_dn（key_seq 序列）
> 
> g15_plugin_uinput.c:298:16：错误：未知类型名称“key_seq”无效 g_key_up（key_seq 序列）
> 
> g15_plugin_uinput.c:306:13：警告：函数“g_key_dn”的隐式声明 [-Wimplicit-function-declaration] {g_key_dn(sequences [1](http://pastebin.com/mQqcffWS) );}
> 
> g15_plugin_uinput.c:306:23: 错误: 'sequences' undeclared (首先在这个函数中使用) {g_key_dn(sequences [1](http://pastebin.com/mQqcffWS) );}
> 
> g15_plugin_uinput.c:308:13：警告：函数“g_key_up”的隐式声明 [-Wimplicit-function-declaration] {g_key_up(sequences [1](http://pastebin.com/mQqcffWS) );}

这是我想要的结果，例如 key nr 15 if mkey_state = 0。（如果这里定义了物理按键，括号中的内容定义了它的实际作用，我正在尝试将它自动化一点你可以说。你可以在 mkey_state 更改的代码中查看下部）

```
 if((currentkeys & G15_KEY_G15) && !(lastkeys & G15_KEY_G15))
        {keydown(KEY_LEFTMETA);keydown(KEY_PAGEUP);}
    else if(!(currentkeys & G15_KEY_G15) && (lastkeys & G15_KEY_G15))
        {keyup(KEY_LEFTMETA);keydown(KEY_PAGEUP);} 
```

在相同的情况下，但我想要的是键 1 而不是 15

```
 if((currentkeys & G15_KEY_G1) && !(lastkeys & G15_KEY_G1))
        {keydown(GKEY_OFFSET+1);}
    else if(!(currentkeys & G15_KEY_G1) && (lastkeys & G15_KEY_G1))
        {keyup(GKEY_OFFSET+1);} 
```

我做错了什么，我怎样才能让这段代码更好地工作？

[这是](http://pastebin.com/SYEXQDpe)代码的更完整版本（怀疑它会有所帮助，它与问题无关，但可能会给你上下文）

该文件是用户空间键盘驱动程序的插件。我已经设法制作了我想要的代码，但为了便于阅读，我正在尝试简化和缩短它，而且我想稍后制作一个外部配置文件（所以我不必每次都重新编译我想更改“G”额外键上的绑定。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:28:06.423

`g_key1`在分配给它之前，您尚未在代码中声明类型或任何`g_key1`内容。如果您的 g_keys 在分配给它们之前，您需要定义类型。

为了使您的代码正常工作，您最有可能需要编写：

```
int g_key1 = GKEY_OFFSET+1; 
```

# java - 设置自定义会话 id java (apache tomcat)

> ID：15947407
> 
> 赞同：2
> 
> 时间：2013-04-11T11:19:01.687
> 
> 标签：java, session, jakarta-ee, tomcat

我想为我的网络应用程序设置自定义会话 ID，我有生成会话 ID 的算法，我的网络应用程序应该使用该算法生成会话 ID。请建议我如何将我的算法设置为tomcat中的会话ID生成..

会话管理器 --> 我试过了，但它提供了完整的会话行为修改控制，我只想根据我的算法设置会话 ID，没有会话行为更改

实施 com.sun.entrprises.uui.uuidgenerator ---> 也尝试过，但无法准确理解如何执行此操作

请建议我最简单的解决方案只是将我的算法设置为会话生成算法

注意：您可能建议不要这样做，但我的项目需要它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:46:24.920

扩展 org.apache.catalina.session.StandardManager 应该做你想做的事。做这样的事情：

```
public class MySessionManager extends StandardManager {

    @Override
    protected synchronized String generateSessionId() { 
        String sessionId = <Your session id generation algo>;
        return sessionId;
    }
} 
```

拥有会话管理器后，请遵循[此答案](https://stackoverflow.com/a/8684682/1686330)。

# c - c语言socket编程，为什么要在服务器程序中指定socket地址？

> ID：15947411
> 
> 赞同：2
> 
> 时间：2013-04-11T11:19:20.280
> 
> 标签：c, sockets

c语言socket编程，为什么要在服务器程序中指定socket地址？我无法理解为什么要在服务器程序中指定套接字地址，因为无论如何我们都在客户端程序中指定了套接字地址，而在服务器程序中需要指定什么。

这是代码：

```
bzero((char *)&serv_addr,sizeof(serv_addr));

serv_addr.sin_family=AF_INET;

serv_addr.sin_addr.s_addr=inet_addr(argv[1]);

serv_addr.sin_port=htons(atoi(argv[2])); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:24:45.023

大多数服务器没有明确指定套接字地址，它们使用`INADDR_ANY`（作为@ybo 地址）。

然而，服务器*可能*指定地址的原因是为了控制客户端到达的接口。例如，您可以绑定到地址 127.0.0.1 (localhost) 以确保客户端仅在本地计算机上运行，​​从而降低与远程连接相关的安全风险。您还可以显式绑定到外部端口，以便更好地沙箱远程客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:30:20.643

实际上与其他答案相同，但换句话说：

服务器通常只使用 1 个公共 IP 地址。并且还具有 1 个或多个内部 IP 地址（例如 localhost 127.0.0.1 并且可能用于 lan 192.168.0.1）。

但是一个服务器也可以很容易地拥有多个公共 IP 地址。您的托管服务提供商会将这些提供给您（并且可能会向您收取费用。）

如果服务器将在端口 443 上托管多个 HTTPS 证书，则它甚至需要多个公共 IP 地址，因为每个证书都绑定到一个特定的 IP 地址。

监听时，您可以监听 1 个特定 IP 地址，从而从其他 IP 地址引入流量。您甚至可以让其他应用程序在其他 IP 地址上使用相同的端口号。

如果出于安全原因您只希望应用程序从本地主机连接（例如客户端和服务器在同一台机器上），您最好只监听 127.0.0.1 而不是所有 ip。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:21:57.870

您不必这样做*，*您可以使用`INADDR_ANY`真实地址来代替，但是当您的机器上有多个网络接口时，它会很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:27:42.583

您的计算机可能有许多 IP 地址。（甚至`127.0.0.1`可以将其视为与“真实”IP 不同的 IP。）在服务器套接字上，您可以选择“监听”这些地址中的哪一个。按照上面的例子，我相信绑定一个服务器套接字`127.0.0.1`意味着你只能在本地连接到那个服务器程序。

# php - json to php code , need function improvement

> ID：15947412
> 
> 赞同：0
> 
> 时间：2013-04-11T11:19:29.923
> 
> 标签：php, javascript

My site has lot of javascript, our frontend designer embedded settings code as json format, in js files . I need to this settings json value, from php server . and there are some dynamic changes. I coverted this settings json value into php array .. there are lot of them . so I written a function to convert into php code format

I have written a function `toPhp`, which is posted in [http://jsfiddle.net/2HKMU/](http://jsfiddle.net/2HKMU/)

I tried to convert one js file settings into php code .. which works ..

```
var config_topfive = {
    "type":"topfive", 
    "options":{ 
        "ascending":false, "percentage":true, "limits":[25,5] 
    }
};

console.log( toPhp( config_topfive ) ); 
```

which prints

```
array(
    "type" => "topfive", 
    "options" =>  array(
        "ascending" => false, 
        "percentage" => true, 
        "limits" => array(25,5)
    )
) 
```

I would like to know, I miss anything on this conversion .. how could I improve this function more better ..

I know `json_decode` , but I would like to keep this `setting json value in js file ,which made by designer` in to php config file .. eg : `config_topfive.php` . I will copy paste console print of this function `console.log( toPhp( config_topfive ) )` into php file

so final my php code in `config_topfive.php` look like

```
<?php

return array(
    "type" => "topfive", 
    "options" =>  array(
        "ascending" => false, 
        "percentage" => true, 
        "limits" => array(25,5)
    )
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:22:55.517

为什么你不使用 `json_decode`和`json_encode`

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

[http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

样本 `json_decode`

```
 $json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';
 print_r(json_decode($json)); 
```

样本`json_encode`

```
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

 echo json_encode($arr); 
```

输出

```
 {"a":1,"b":2,"c":3,"d":4,"e":5} 
```

编辑：

我写了这个测试

```
function MakeArray(Json){
  this.JArray=Json;
  this.PArray=function(ar){
      for (var J in ar) {
            var Type=typeof(ar[J])
            if(Type=="string"){
                ar[J]="\""+ar[J]+"\"";
            }else if( Type== "object") {
                if(ar[J] instanceof Array){
                   ar[J]=this.PArray(ar[J]);
                   //ar[J]="\""+J+"\"=>array("+ar[J].join(',')+")";
                   ar[J]="array("+ar[J].join(',')+")";
                }else{
                   ar[J]="\""+J+"\"=>array("+this.MArray(ar[J])+")";
                }
                //ar[J]=this.MArray(ar[J]);       
            }
      }
      return ar;
  }
  this.MArray=function(IArray){
      var Output=Array();
      var Count=0;
      for (var i in IArray) {
          var Type=typeof(IArray[i]);
          if( Type== "object") {
              if(IArray[i] instanceof Array){
                  IArray[i]=this.PArray(IArray[i]);
                  Out="\""+i+"\"=>array("+IArray[i].join(',')+")";
              }else{
                  Out="\""+i+"\"=>array("+this.MArray(IArray[i])+")";
              }
          }else{
              if(Type=="string" || typeof(i)=="string"){
                  Out="\""+i+"\"=>\""+IArray[i]+"\"";
              }else if(Type=="number"){
                  Out=IArray[i];
              }else{
                  Out="\""+i+"\"=>"+IArray[i]; 
              }

          }
          Output[Count++]=Out;
      }
      return Output.join(',');

  }
  return "array("+this.MArray(this.JArray)+")";

}
document.getElementById('php').innerHTML =MakeArray(config_topfive); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:25:15.417

[json_decode](http://php.net/manual/en/function.json-decode.php)将允许您获得相同的结果，并允许您传递一个“关联”布尔值来确定您希望它作为普通数组还是关联数组。

[json_encode](http://php.net/manual/en/function.json-encode.php)将允许您执行相反的操作。

# java - Java Heap - Young Space 在更改内核数量后发生了变化

> ID：15947413
> 
> 赞同：3
> 
> 时间：2013-04-11T11:19:38.190
> 
> 标签：java, performance, garbage-collection, heap-memory

我已经更改了运行 java 应用程序的 vm 上的内核数（从 16 减半到 8）。

堆大小的参数没有改变，但由于某种原因，年轻空间正在减少，我无法确定。

我们在没有设置 NewRatio 的情况下运行，因此默认值应该相同，除非在确定年轻空间的大小时考虑到核心数量。我几乎没有看到有关年轻空间/新比率的默认大小的文档，这表明内核数量是一个决定因素，但由于没有进行其他更改，这似乎是这种情况。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:35:35.533

有可能的。默认情况下，GC 的调整方式因 JVM 和版本而异，这就是为什么您可能无法获得太多关于其工作原理的详细文档的原因。

您可以为您正在使用的同一 JVM 构建下载 OpenJDK，并阅读源代码以了解它的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:06:40.333

HotSpot JVM 具有内置的启发式规则，可将硬件分类为服务器类或客户端类。这两个类有不同的默认值（有时非常不同）。

数量或核心和可用内存是 JVM 用来猜测硬件类别的参数之一。

有两个 JVM 选项可以使这个选择更具确定性。

*   `-XX:+AlwaysActAsServerClassMachine`
*   `-XX:+NeverActAsServerClassMachine`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:54:21.017

我认为你不应该担心世代的大小，除非它会导致严重的性能问题。

根据您使用的 GC 和您设置的 JVM 选项，Hotspot 可能会动态调整生成的大小，以便 GC 周期花费更少的时间 ( `-XX:+UseAdaptiveSizePolicy`)。这是 JVM 用于使您的应用程序更快的优化之一。

想知道为什么 JVM 会像这样调整内存池的大小是一件好事，但是如果没有任何问题要解决，就很难走得更远；-)

您应该启用 GC 日志`-X:loggc:gc.log -XX:+PrintGCDetails`）并比较 16 核/8 核内存消耗模式，看看是否有问题。如果您的应用程序没有变慢并且没有内存消耗问题，那么可以说这些新的内存池只是 JVM 优化。

# internet-explorer - href 在 ie 中不起作用

> ID：15947414
> 
> 赞同：0
> 
> 时间：2013-04-11T11:19:39.610
> 
> 标签：internet-explorer, href

请有人告诉我为什么我的 HREF 不能在 IE 中工作。他们在 chrome 中工作，但不是 IE

```
<!DOCTYPE html>

<html>

  <head>

   <title>Steves Homepage</title>

    <style>

#left {

    float:left;
    margin:0;

    padding:0;

    width:33%;

;

}

#right {

    float:right;

    margin:0;

    padding:0;

    width:33%;

}

#middle {

    float:left;
    width:33%;
}

#wrapper {

    width:100%;

}

li {

    list-style-type: none;

}

          </style>

    </head>

    <body>

<div id="wrapper">

    <div id="left">

        <ul>

            <li><b>Useful Docs</b></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Passwords.txt">Passwords</a>
</li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Server Naming Convention.txt">Server Naming Convention</a></li>

            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Numbers.txt">Numbers</a></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/GPO.txt">GPO</a></li>

            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Useful Emails.txt">Useful Emails</a></li>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <b>Spreadsheets</b>
            <li><a href="file://///birmingham-nas/nsd/Engineering/Official_Structure/DSL_details/EMEA_DSL_Details.xls">IP Spreadsheet</li>

        </ul>

    </div>

    <div id="middle">

        <ul>

            <li><b>Configurations</b></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/MRV Config/MRV Config.txt">MRV Config</a></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/MRV Config/MRV Lines.txt">MRV Lines</a></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/DMVPN Config.txt">DMVPN Config</a>
</li>

        </ul>

    </div>

    <div id="right">

        <ul>

            <li><b>How To Guides</b>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Meeting Rooms.txt">Meeting Rooms</a></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Activations/Masergy Activations.txt">Activations</a></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Engineer Dispatch Guide.txt">Engineer Dispatch Guide</a></li>
            <li><a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Temperature Issues.txt">Temperature Issues</a></li>
            <p>
            <br>
            <br>
            <br>test</p>
        </ul>

    </div>

</div>

</body>

</html> 
```

因此，当我单击链接时，绝对没有任何反应。但是在 Chrome 中这工作得很好。我的间距也不起作用。所以我试着做3列，左中右。这在 chome 中完美显示，但不是 IE。这样你就可以理解布局，目前看起来像下面这个img。如您所见，MRV 配置等应位于“配置”部分下。但由于某种原因，它们偏向右侧列。

[http://i.stack.imgur.com/zwMoF.png](http://i.stack.imgur.com/zwMoF.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:22:39.970

您的网址格式不正确，因此请像这样

```
<a href="file:///c:/Users/stegar06/Desktop/Useful Stuff/Temperature Issues.txt">Temperature Issues</a> 
```

本地资源的绝对链接必须是这样的

```
 file:///c:/your/great/folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:33:25.343

您在 href 属性中使用的“链接”是 Windows 特定的文件路径。它们几乎不会在网页上运行，它们只能在您的计算机上运行。

但是，如果这是您的意图，那么您可以在悬停链接时在 Chrome 中观察，它以以下方式扩展开头：

文件：///

那是正确的格式。

对于 IE 中的 CSS 部分：

不要只使用最小和最大宽度，因为 IE 很难找到你想要的东西。尝试简单地给出宽度：33%；为您的三个 div。

最好的祝愿！

# java - REST 应用程序中的基本身份验证

> ID：15947415
> 
> 赞同：14
> 
> 时间：2013-04-11T11:19:41.473
> 
> 标签：java, html, http-headers, authorization, basic-authentication

### 环境：

*   JAVA
*   玻璃鱼
*   不同机器上的 REST 服务
*   带有 AJAX 和 JQuery 的 HTML5 客户端
*   球衣

这是我迄今为止实施的：

### HTML5-客户端

```
$('#btnSignIn').click(function () {
    var username = $("#username").val();
    var password = $("#password").val();

    function make_base_auth(user, password) {
        var tok = user + ':' + password;

        var final = "Basic " + $.base64.encode(tok);
        console.log("FINAL---->" + final);
        alert("FINAL---->" + final);

        return final;
    }

    $.ajax({
        type: "GET",
        contentType: "application/json",
        url: "http://localhost:8080/SesameService/webresources/users/secured/login",
        crossDomain: true,
        dataType: "text",
        async: false,
        data: {},
        beforeSend: function (xhr) {
            xhr.setRequestHeader('authorization', make_base_auth(username, password));
        },
        success: function () {
            alert('Thanks for your signin in! ');

        },
        error: function (jqXHR, textStatus, errorThrown) {
            console.log(textStatus, errorThrown);
            alert(' Error in signIn-process!! ' + textStatus);
        }
    });
}); 
```

### 服务器

在安全中，我没有启用安全管理器，它被禁用了！

我已经为 Glassfish 配置了 BASIC-authentication，我的 web.xml 看起来像这样：

```
<servlet-mapping>
    <servlet-name>ServletAdaptor</servlet-name>
    <url-pattern>/webresources/*</url-pattern>
</servlet-mapping>

<security-constraint>
    <web-resource-collection>
        <web-resource-name>REST Protected resources</web-resource-name>
        <description/>
        <url-pattern>/users/*</url-pattern>

    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
        <role-name>customer</role-name>
        <role-name>user</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>jdbcRealm</realm-name>
    </login-config>
    <security-role>
        <role-name>admin</role-name>
    </security-role>
    <security-role>
        <role-name>user</role-name>
    </security-role>
    <security-role>
        <description/>
        <role-name>customer</role-name>
    </security-role> 
```

### 玻璃鱼

![在此处输入图像描述](https://i.stack.imgur.com/fmaLi.png)

### 日志

```
FINE: [Web-Security] Setting Policy Context ID: old = null ctxID = SesameService/SesameService
FINE: [Web-Security] hasUserDataPermission perm: ("javax.security.jacc.WebUserDataPermission" "/webresources/users/secured/login" "GET")
FINE: [Web-Security] hasUserDataPermission isGranted: true
FINE: [Web-Security] Policy Context ID was: SesameService/SesameService
FINE: [Web-Security] hasResource isGranted: true
FINE: [Web-Security] hasResource perm: ("javax.security.jacc.WebResourcePermission" "/webresources/users/secured/login" "GET") 
```

### 问题：

1.  如果我在用户注册时在客户端加密（不编码）密码并在 SSL/HTTPS 下传输它，这是实现此功能的安全且好方法吗？

2.  如果我在没有客户端的情况下使用 REST 服务，它总是打开的，为什么？没有基本身份验证？我是否理解这些 url 模式有问题？

    ```
     http://localhost:8080/SesameService/webresources/users/secured/login 
    ```

3.  如果我得到这个工作如何测试它，因为现在如果我验证一次，我总是被授权？是否可以在 REST 服务中以编程方式“注销”，或者通常如何实现注销？

4.  当在带有强制base64编码的用户名：密码的标题中使用授权时，我是否还必须将我的用户名和密码编码到数据库？我试过了，并将编码（允许的值是 Hex 和 Base64）添加到 jdbcRealm 到 Glassfish，似乎密码就足够了，但是当两者都在客户端编码时会发生什么？

**更新：**我更改了 web.xml，现在在浏览器中直接调用 REST-service 时，BASIC-authentication 正在工作：`http://localhost:8080/SesameService/users/secured/login`

变化：

*   我在 Glassfish 中启用了安全管理器
*   我改变了 url 模式

```
 <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/*</url-pattern>----> I took webresources off. It was generated by Netbeans
    </servlet-mapping> 
```

*   我将服务的网址更改为：`http://localhost:8080/SesameService/users/secured/login`

现在我在尝试从 HTML5 客户端进行身份验证时得到 HTTP/1.1 401 Unauthorized。

**请求标头：**

```
Origin: http://localhost:8383
Host:localhost:8080
Connection:keep-alive
Access-Control-Request-Method:GET
Access-Control-Request-Headers:authorization,content-type 
```

**回复：**

```
x-powered-by:Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2.2 Java/Oracle Corporation/1.7)
WWW-Authenticate:Basic realm="jdbcRealm"
Server:GlassFish Server Open Source Edition 3.1.2.2
Pragma:No-cache
Expires:Thu, 01 Jan 1970 02:00:00 EET
Date:Sat, 13 Apr 2013 15:25:06 GMT
Content-Type:text/html
Content-Length:1073
Cache-Control:no-cache 
```

**更新 2**

当我尝试使用 JavaScript + Authorization-header 进行身份验证时，出现 401 错误，并且在日志中：

```
FINE: [Web-Security] Setting Policy Context ID: old = null ctxID = SesameService/SesameService
FINE: [Web-Security] hasUserDataPermission perm: ("javax.security.jacc.WebUserDataPermission" "/users/secured/login" "OPTIONS")
FINE: [Web-Security] hasUserDataPermission isGranted: true---->!!!!!!!!!!!!!
FINE: [Web-Security] Policy Context ID was: SesameService/SesameService
FINE: [Web-Security] Codesource with Web URL: file:/SesameService/SesameService
FINE: [Web-Security] Checking Web Permission with Principals : null------->!!!!!!!
FINE: [Web-Security] Web Permission = ("javax.security.jacc.WebResourcePermission" "/users/secured/login" "OPTIONS")
FINEST: JACC Policy Provider: PolicyWrapper.implies, context (SesameService/SesameService)- result was(false) permission (("javax.security.jacc.WebResourcePermission" "/users/secured/login" "OPTIONS"))
FINE: [Web-Security] hasResource isGranted: false------->!!!!!!!!!
FINE: [Web-Security] hasResource perm: ("javax.security.jacc.WebResourcePermission" "/users/secured/login" "OPTIONS")
FINEST: JACC Policy Provider: PolicyWrapper.getPermissions(cs), context (null) codesource ((null <no signer certificates>)) permissions: java.security.Permissions@5d4de3b0 ( 
```

****更新 3**** 我不能成为第一个也是唯一一个尝试在跨域案例中使用 BASIC 进行身份验证的人。我像这样更改了我的跨源过滤器：

```
response.getHttpHeaders().putSingle("Access-Control-Allow-Headers", "Authorization"); 
```

不再出现 401 错误，但 JavaScript 中仍然存在错误。在 Glassfish 日志中：

```
FINEST: JACC Policy Provider:
getPolicy (SesameService/SesameService) is NOT in service----->!!!!!!!!
FINE: JACC Policy Provider: file arrival check type: granted  arrived: false exists: false lastModified: 0 storedTime: 1365968416000 state: deleted SesameService/SesameService
FINE: JACC Policy Provider: file arrival check type: excluded  arrived: false exists: false lastModified: 0 storedTime: 0 state: deleted SesameService/SesameService
FINE: TM: getTransaction: tx=null, tm=null
FINE: TM: componentDestroyedorg.apache.catalina.servlets.DefaultServlet@227fe9a8
FINE: TM: resourceTable before: 0
FINE: TM: resourceTable after: 0 
```

顺便说一句，因为我从来没有做过这项工作，所以它的工作方式与直接在自己的域中调用 REST 服务相同。那么，首先打开客户端请求、服务器请求和用户名密码窗口，然后客户端请求和服务器验证并响应页面？我正在尝试获取它：其中包含授权标头的请求，来自服务器的响应以及来自其余服务的结果，仅此而已。知道如何保护 REST 服务吗？比那更容易？这是不可能的。

**更新 4**

我只是试图将我的 HTML5-client 移动到 java web-project 下，只是纯 html-pages 和同一域下，BASIC-authentication 正在 100% 工作。所以原因是因为跨域环境。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T04:44:43.547

> 如果我在用户注册时在客户端加密（不编码）密码并在 SSL/HTTPS 下传输它，这是实现此功能的安全且好方法吗？

很可能您应该简单地通过 SSL/HTTPS 以纯文本形式传递密码。

SSL/HTTPS 中的所有通信都是加密的，因此加密密码可能不是一个好主意，除非您需要确保 Web 服务器（技术上是 HTTPS 终结器）无法看到密码。

> 如果我在没有客户端的情况下使用 REST 服务，它总是打开的，为什么？没有基本身份验证？我是否理解这些 url 模式有问题？

不确定我是否理解这个问题。但是，BASIC auth 不是 REST 中身份验证的好模式，因为它以纯文本形式传递密码。

> 如果我得到这个工作如何测试它，因为现在如果我验证一次，我总是被授权？是否可以在 REST 服务中以编程方式“注销”，或者通常如何实现注销？

在 Basic Auth 中，用户名和密码由客户端*在每个 HTTP 请求*中传递。如果客户端未传递凭据，则服务器拒绝该请求。因此没有会​​话的概念。

但是，就 Java EE 服务器而言，登录会创建一个用户会话，并且同一用户的未来请求将使用同一会话。如果您如此配置它，此会话将超时。

如果注销很重要（即控制用户会话），那么您必须为此创建一个 servlet (/logout)，这会使 HTTP 会话无效。

标准 Java 安全模型的工作方式如下：当用户登录到安全领域时，Java EE 服务器会在您的浏览器中存储一个安全 cookie。浏览器在对同一领域的每个请求中将此 cookie 发送回 Java EE 服务器。Java EE 服务器在每个请求中检查此 cookie 并使用它来识别用户，将请求连接到用户的会话。

因此，您可能希望 REST 服务与 Web 应用程序处于相同的安全领域，以便浏览器和服务器无缝工作。

> 当在带有强制base64编码的用户名：密码的标题中使用授权时，我是否还必须将我的用户名和密码编码到数据库？我试过了，并将编码（允许的值是 Hex 和 Base64）添加到 jdbcRealm 到 Glassfish，似乎密码就足够了，但是当两者都在客户端编码时会发生什么？

不，不要对用户名或密码进行编码 - 这一切都在浏览器和 Glassfish 内部进行了深入处理。如果您在客户端中编码，则客户端将对编码进行编码，而服务器将拒绝密码。

* * *

> 你能告诉我是否可以将 html5-page 中的 j_security_check 与 javaScript 一起使用，还是我又遇到问题了:) 我已经制作了几个 Primefaces + jsf-application 我使用了 FORM-auth 并且没有任何问题，但是这对我来说完全是一场灾难。

假设 RESTful 服务位于相同的域和安全领域（然后登录到 Web 应用程序将允许浏览器将正确的 cookie 发送到 REST URI），您应该能够使用 j_security_check 轻松地完成这项工作。

但是请注意，其他应用程序将难以访问 REST 服务。基本上，他们必须通过 j_security_check 登录，然后维护 Glassfish 发送的 cookie。如果您确实需要其他应用程序以编程方式访问这些服务，那么您将需要另一个解决方案：

1.  您可以设置安全领域以允许不同的身份验证器“足够”；设置 HTTP BASIC Auth*并*确保没有标记为“必要”
2.  两次部署 RESTful 服务，另一个是不同的 URI。如果您想使用 HTTP BASIC Auth，这可能是一个 SSL/HTTPS 端点，以确保安全地处理密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T11:06:18.163

我正在开发具有弹簧安全性的 Spring MVC 框架并使用基本身份验证：

基本上，在 HTTP 基本身份验证中，用户名和密码在 Base64 类（来自 util 包）的帮助下转换为密钥或访问令牌。

并且该密钥被设置到 HTTP URL 的标头中，然后命中服务器。

它在服务器上工作正常：通过相同的 Base64 解码用户名密码密钥，然后与数据库用户名和密码匹配。如果身份验证完成，则进一步处理。

这提供了 API Urls 的安全性。每个身体都不容易进入。

代码：创建访问令牌（密钥）代码为：

注意：我们在 Base64 中传递字符串（来自 util 包）“YourUsername:YourPassword”进行编码。
是的，用户名和密码用“：”分隔。

```
 String encodeddata = new String(Base64.encodeBase64("username:password".getBytes()));
        System.out.println("encodedBytes " + encodeddata); 
```

将密钥设置为标题的代码：

//请求带有密钥的URL

```
 HttpClient client = HttpClientBuilder.create().build();
        HttpGet get = new HttpGet("http://google.com/Abc/api/vou/redeemed");
        get.setHeader("Authorization", "Basic "+encodeddata); //key getting above 
```

注意：您可以将其与 Get 和 Post 方法一起使用。这里我只使用 get 方法。//回复

```
 HttpResponse jresponse = client.execute(get);

        System.out.println("Response Code : "+ jresponse.getStatusLine().getStatusCode());

        BufferedReader rd = new BufferedReader(new InputStreamReader(jresponse.getEntity().getContent()));

        StringBuffer result = new StringBuffer();
        String line = "";
        while ((line = rd.readLine()) != null) {
            result.append(line);
        }

        System.out.println("------Response is ::: "+ result); 
```

//解码键

```
 String usernameAndPassword = null;
        try {
            usernameAndPassword = new String(Base64.getDecoder().decode(encodedUserPassword));
        } catch (Exception e) {
            System.out.println("SERVER_ERROR");
        }
        System.out.println(usernameAndPassword);

        final StringTokenizer tokenizer = new StringTokenizer(encodedUserPassword, ":");
        final String username = tokenizer.nextToken();
        final String password = tokenizer.nextToken();

        System.out.println(username);
        System.out.println(password); 
```

# tomcat - Tomcat 拒绝在 8080 端口上工作

> ID：15947418
> 
> 赞同：4
> 
> 时间：2013-04-11T11:19:54.237
> 
> 标签：tomcat, amazon-ec2

对不起，如果这个问题以前被问过。

我有一个 Amazon 实例（Ubuntu Server 12.04.1 LTS）并安装了 Tomcat 版本（Apache Tomcat/6.0.36）。它在端口 80 上按预期工作，但在端口 8080 上不工作。（不工作意味着“无法连接到 Web 应用程序管理器”）。

*   我的安全组配置为 http* 打开了端口 8080

```
22 (SSH) 0.0.0.0/0 删除
80 (HTTP) 0.0.0.0/0 删除
8080 (HTTP*) 0.0.0.0/0 删除

```

*   我同时安装了 jdk 和 jre，即使我不知道如果 tomcat 在端口 8080 上运行我为什么需要 jdk。
*   我已经将tomcat配置为绑定IPV4地址

```
<连接器端口="8080" 协议="HTTP/1.1"
               连接超时="20000"
               redirectPort="8443" 地址="0.0.0.0"/>

```

在 server.xml 并添加

```
JAVA_OPTS="$JAVA_OPTS -Djava.net.preferIPv4Stack=true"
回声 $JAVA_OPTS

```

到 setenv.sh

Runnung netstat -ln 给了我

```
活动 Internet 连接（仅限服务器）
Proto Recv-Q Send-Q 本地地址 外部地址 状态      
tcp 0 0 0.0.0.0:22 0.0.0.0:* 听     
tcp 0 0 127.0.0.1:8005 0.0.0.0:* 听     
tcp 0 0 0.0.0.0:8009 0.0.0.0:* 听     
tcp 0 0 0.0.0.0:8080 0.0.0.0:* 听     
tcp6 0 0 :::22 :::* 听     
UDP 0 0 0.0.0.0:68 0.0.0.0:*                          
活动 UNIX 域套接字（仅限服务器）
Proto RefCnt Flags Type State I-Node Path
unix 2 [ ACC ] 流式监听 5886 @/com/ubuntu/upstart
unix 2 [ ACC ] 流监听 7285 /var/run/dbus/system_bus_socket
unix 2 [ ACC ] 序列包监听 6077 /run/udev/control
unix 2 [ ACC ] 流式监听 7397 /var/run/acpid.socket

```

跑步`wget http://localhost:8080`给了我

```
--2013-04-11 11:20:40--  http://localhost:8080/
Resolving localhost (localhost)... 127.0.0.1
Connecting to localhost (localhost)|127.0.0.1|:8080... connected.
HTTP request sent, awaiting response... 200 OK
Length: 7446 (7.3K) [text/html]
Saving to: `index.html'

100%[=====================================================================================================================================================================>] 7,446       --.-K/s   in 0s      

2013-04-11 11:20:40 (294 MB/s) - `index.html' saved [7446/7446] 
```

那么，我错过了什么吗？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-31T10:36:22.857

登录 AWS 控制台并导航到安全组。

1.  如果有，请删除 HTTP (80)。
2.  选择自定义 TCP 规则并输入端口为“8080”
3.  点击应用规则。

添加 DNS 名称：8080

它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T01:55:42.443

...我正在努力自己解决这个确切的问题。

我将您的部分问题解释为意味着您已正确配置并应用了一个安全组到您的服务器，该安全组允许端口 80 上的 HTTP 以及访问端口 8080。（我使用的安全组管理器版本与我相信的你使用的版本略有不同。）

应用打开端口 80 的规则后，我可以在端口 80 上获得内部和外部响应。

另一方面，我添加了一个规则来打开端口 8080 并且无法得到响应。（在主机本身上，我的 wget(1) 测试和你的一样工作。使用 lynx(1) 对我的服务器进行的测试也有效。）

解决方案的一些提示似乎暗示 HTTP 应该与规则中的端口相关联，但 EC2 仪表板中的配置器不允许应用程序协议与规则相关联。

我看到的只是端口、协议（在本例中为 TCP）和源地址范围。

我确定我的本地防火墙没有阻止端口 8080。所以我很难过......

---v

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:07:56.903

请检查您的 Amazon EC2 实例的安全设置或 ELB 的安全设置（如果您正在使用）。我最好的猜测是8080没有暴露

# excel - 在 SSIS 中创建动态 Excel 连接

> ID：15947422
> 
> 赞同：0
> 
> 时间：2013-04-11T11:20:05.333
> 
> 标签：excel, dynamic, ssis, connection-string

当我在 SSIS 中使用静态 ole db > excel 连接管理器时，我在 excel 连接管理器中设置要连接的文件，创建数据流 excel 目标，将其连接到 ole db 源并映射字段。

在这种情况下，我想做同样的事情，但我不想链接到现有文件，而是想创建一个新文件并将我的数据放在那里。现在我知道我可以在现有的 excel 连接中执行 SQL 任务并创建一个新表（有效地工作表），但在这种情况下，我已经创建了一个脚本任务来创建我的新文件的完整路径，例如 c:\docs\ mypjt\fileformarch.xls 使用以下代码：

```
Public Sub Main()
    '
    ' Add your code here
    '
    Dim strFileName As String
    Dim strFolderName As String
    Dim strMonthNameShort As String
    Dim strFullPath As String
    Dim lastMonth As New Date(DateTime.Today.Year, DateTime.Today.Month - 1, 1)
    strFileName = Dts.Variables("FileName").Value.ToString
    strFolderName = Dts.Variables("FolderName").Value.ToString
    strMonthNameShort = MonthName(lastMonth.Month, True)
    strFullPath = strFolderName & strFileName.Substring(0, strFileName.IndexOf(".xls")) & strMonthNameShort & ".xls"

    Dts.Variables("FullPath").Value = strFullPath
    Dts.TaskResult = Dts.Results.Success
End Sub 
```

但是我不明白如何创建我的动态连接和映射，我尝试在我的 excel 连接管理器等中使用连接字符串来解决问题，所以我认为我没有完全了解我需要做什么。

不确定我是否需要带有列标题的模板来设置默认映射，但是我已经阅读了很多情况，其中 excel 连接管理器只需要与“a”文件的初始连接，然后动态连接字符串属性会在您运行时接管它，但是如果您正在创建一个新文件，它如何知道映射是什么？

我很感激你能给我的任何建议。

谢谢

安德鲁

# ruby-on-rails - rake 任务因 US-ASCII 中的无效字节序列而失败

> ID：15947425
> 
> 赞同：22
> 
> 时间：2013-04-11T11:20:09.427
> 
> 标签：ruby-on-rails, ruby, rake, bundler, asset-pipeline

升级到 ruby​​ 1.9.3 后，我的一个应用程序运行良好，但当我尝试使用 capistrano 部署时，我尝试转换的第二个应用程序在“assets:precompile”阶段失败。这是堆栈跟踪：

```
 rake aborted!
    rake aborted!
    invalid byte sequence in US-ASCII
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/trace_output.rb:16:in `block in trace_on'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/trace_output.rb:14:in `map'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/trace_output.rb:14:in `trace_on'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:328:in `trace'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:183:in `display_error_message'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:169:in `rescue in standard_exception_handling'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:159:in `standard_exception_handling'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:88:in `load_rakefile'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:72:in `block in run'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@rails3211/bin/ruby_noexec_wrapper:14:in `eval'
    /Users/george/.rvm/gems/ruby-1.9.3-p392@rails3211/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我已经阅读了许多帖子并尝试了一些建议，但无济于事。我尝试将以下内容添加到我的 gemfile 的顶部：

```
if RUBY_VERSION =~ /1.9/
  Encoding.default_external = Encoding::UTF_8
  Encoding.default_internal = Encoding::UTF_8
end 
```

但这并没有什么不同。

我检查了 LANG 和 LC_ALL 环境变量如下

```
$ echo $LC_ALL
en_NZ.UTF-8

$ echo $LANG
en_NZ.UTF-8 
```

恐怕我根本不了解该消息，也不知道如何识别有问题的文件。

我无法运行任何 rake 任务 - 它给出了相同的错误。

请注意，我可以在开发模式下完美地运行该应用程序。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-11T11:55:55.533

添加

```
#encoding: utf-8 
```

到 Rakefile 的第一行（或任何包含奇怪字符的文件）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-30T20:41:28.147

**通过一次删除一个**来跟踪有问题的 rake 文件。

 **即**lib/tasks/delete_me.rake下的文件**

然后重新耙或重新启动曾经给您带来问题的问题。一旦问题消失`git diff`，请查看哪个文件是罪魁祸首，并使用您最喜欢的编辑器更改文件的编码。

IE。，

vim lib/tasks/delete_me.rake :set fileencoding=utf-8 :wq

然后重新耙，你应该重新投入使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-28T16:55:20.627

第一次运行

```
$ sudo gem install magic_encoding 
```

然后进入文件夹并运行

```
$ magic_encoding 
```

准备好！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-06T10:40:25.690

我遇到了类似的问题，“错误”是我的名字：它包含一个非 US-ASCII 字符 (ö) 这打印在 setup.rb 中并导致了问题。我将其更改为“oe”，效果很好。

我会向 bitnami 发送一封电子邮件，让它以某种方式改变

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-06T01:58:18.220

确保您没有以罗马字（日语）输入文件。或者其他一些非 US-ASCII 语言的英文字符设置。

我尝试运行 rake db:seed 并遇到类似的错误。原来我一直在用日文罗马字符输入我的种子文件。在开始我的项目之前，我忘记将我的键盘输入改回美国。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-23T13:53:34.173

我在尝试运行任何 rake 任务时遇到了类似的错误（我使用 Rails 3.2 和 Ruby 1.9.3）。我尝试了上述所有解决方案，但均未成功。后来我发现我是一个导致错误的特定 gem（在我的例子中是 Faker gem，它是几天前更新的）。我删除了 gem（它没有被使用），一切都开始工作了！因此，我的建议是，如果您遇到此类问题并且此处列出的解决方案均无效，请检查每个 gem 的版本并查看其中是否已更新。尝试删除它们或设置兼容版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-07T15:19:48.437

这个错误出现在一个新项目上，我正在设置它的开发环境来工作。

这是一个抛出错误的 rake 任务，但在检查其文件编码时，它是 UTF-8。

所以，这个有问题的任务是从另一个文件（也有 UTF-8 编码）中提取数据。错误仍然存​​在。

所以，而不是按原样读取文件（即`File.read("myfile.rb")`）

我将其更改为：

`File.read("myfile.rb", :encoding => 'utf-8')`，按照[此解决方案](https://stackoverflow.com/a/11664569/1960071)的说明，一切都很好。**

# r - 将 R 列名称转换为 id 变量

> ID：15947429
> 
> 赞同：2
> 
> 时间：2013-04-11T11:20:22.847
> 
> 标签：r, reshape

我很困惑，甚至无法搜索我正在寻找的东西。我对不同国家进行了多年调查，目前是这样的：

```
        问题年份 CountryA CountryB ... CountryZ
        1 1999 是 否 否
        2 1999 是 是 是
```

也就是说，它目前是按问题组织的。我希望按国家、年份和问题编号排列数据：

```
国家年份问题答案
      A 1999 1 是
      A 1999 2 是
      B 1999 1 无
      B 1999 2 是
等等。这甚至可能吗？我似乎找不到任何东西来指导我找到正确的答案。
提前致谢！
            回答 #1

赞同：4

时间：2013-04-11T11:26:13.310

最直接的方法是使用`melt`“reshape2”。假设您的 data.frame 被称为“mydf”：

```
> library(reshape2)
> melt(mydf, id.vars=1:2)
  Question Year variable value
1        1 1999 CountryA   Yes
2        2 1999 CountryA   Yes
3        1 1999 CountryB    No
4        2 1999 CountryB   Yes
5        1 1999 CountryZ    No
6        2 1999 CountryZ   Yes 
```

更新

我没有考虑如何正确处理来自 base 的结果名称`reshape`，但您也可以执行以下操作：

```
names(mydf) <- sub("Country", "Country.", names(mydf))
setNames(
  reshape(mydf, direction="long", idvar=1:2, varying=3:ncol(mydf)),
  c("Question", "Year", "Country", "Answer"))
#          Question Year Country Answer
# 1.1999.A        1 1999       A    Yes
# 2.1999.A        2 1999       A    Yes
# 1.1999.B        1 1999       B     No
# 2.1999.B        2 1999       B    Yes
# 1.1999.Z        1 1999       Z     No
# 2.1999.Z        2 1999       Z    Yes 
```

在哪里：

```
mydf <- structure(list(Question = 1:2, Year = c(1999L, 1999L), CountryA = c("Yes", 
  "Yes"), CountryB = c("No", "Yes"), CountryZ = c("No", "Yes")), .Names = c("Question", 
  "Year", "CountryA", "CountryB", "CountryZ"), class = "data.frame", row.names = c(NA, -2L)) 
```

            回答 #2

赞同：0

时间：2013-04-11T13:05:04.657

遵循@Ananda 的方法

```
DF <- read.table(text="Question \t Year CountryA    CountryB    CountryZ
1   1999    Yes No  No
2   1999    Yes Yes Yes", sep="\t", header=T)

> DF
  Question Year CountryA CountryB CountryZ
1        1 1999      Yes       No       No
2        2 1999      Yes      Yes      Yes

DF <- melt(DF, id.vars=1:2, value.name="Answer", variable.name="Country")

> DF
  Question Year  Country Answer
1        1 1999 CountryA    Yes
2        2 1999 CountryA    Yes
3        1 1999 CountryB     No
4        2 1999 CountryB    Yes
5        1 1999 CountryZ     No
6        2 1999 CountryZ    Yes 
```

那么这只是改变国家列的级别的问题......

```

# google-drive-api - 使用共享链接将共享文件夹添加到 Google Drive

> ID：15947439
> 
> 赞同：0
> 
> 时间：2013-04-11T11:20:46.133
> 
> 标签：google-drive-api

最新编辑：

所以这就是我想要完成的事情：

1) 用户在他的计算机上安装我的应用程序。
2) 用户授予我的应用访问他的驱动器的权限。
3）我的应用程序与用户共享我驱动器中的文件夹。

完成第 3 部分的问题是我的应用程序实际上需要对我的驱动器进行写访问，因此它可以与当前用户共享我的文件夹。但出于安全原因，我无法授予我的应用程序对我的驱动器的写入访问权限。

现在我要求执行第 3 部分）而不授予我的应用程序对我的驱动器的写访问权限。

* * *

我希望我安装的应用程序仅使用我为我在驱动器中创建的文件夹手动生成的共享链接将共享文件夹添加到用户的谷歌驱动器帐户。是否可以使用 google drive API 来完成此操作？

编辑：我真正想要做的是在用户驱动器中创建一个文件夹并将此文件夹链接到我驱动器中的文件夹，以便用户可以访问存储在我驱动器中的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:24:50.063

另一个共享目录的快捷方式？Google Drive 不支持它，但您可以创建一个应用程序来处理它。

1.  [创建](https://developers.google.com/drive/integrate-create?hl=en)应用程序的快捷方式。
2.  将您希望用户重定向的链接作为[自定义属性](https://developers.google.com/drive/properties)添加到快捷方式文件中。
3.  当用户从云端硬盘打开文件并被重定向到您的应用时，请阅读您存储的自定义属性。
4.  将用户重定向到检索到的自定义属性上的位置。

# c# - Linq OrderBy 字符串

> ID：15947444
> 
> 赞同：4
> 
> 时间：2013-04-11T11:20:59.627
> 
> 标签：c#, linq

我有一组对象，我想按它们的 name 属性按字母顺序排序。我尝试了以下方法：

```
List<Item> itemsToSort = dataProvider.Items.ToList();
List<Item> sortedItems = itemsToSort.OrderBy(x=>x.Name).ToList(); 
```

哪个不起作用。这些项目仍然以与以前相同的方式列出，而不是按字母顺序列出。

编辑

这是一个更完整的示例：

班级：

```
public class MeasureStation
{
    #region Properties

    public int ID
    {
        get { return _measureStation.ID; }
        set { _measureStation.ID = value; }
    }

    [Required(ErrorMessage = "Navn skal udfyldes")]
    public String Name
    {
        get { return _measureStation.Name; }
        set { _measureStation.Name = value; }
    }

    public DateTime? DateEstablished
    {
        get { return _measureStation.DateEstablished; }
        set { _measureStation.DateEstablished = value; }
    }

    public DateTime? OperationPeriodStart
    {
        get { return _measureStation.OperationPeriodStart; }
        set { _measureStation.OperationPeriodStart = value; }
    }
    .
    .
    and so on...
} 
```

查询是：

```
measureStations = dataProvider.MeasureStations.ToList();
var orderedMeasureStations = measureStations.OrderBy(x => x.Name); 
```

查看 orderedMeasureStations 查询结果时，如下所示： 条目开头为：

```
F...
S...
a...
L... 
```

所以它显然不是按名称排序的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T03:39:35.050

我看不出你 `class MeasureStation`将如何运作

是什么`_measureStation`，是`this`吗？

如果是，那么它应该看起来像，注意该属性不能与其各自的私有成员同名

```
 public class MeasureStation
  {
    private int id;//private is optional as it is default
    public int ID
    {
      get { return this.id; }
      set { this.id = value; }
    }
    private String name;//private is optional as it is default
    public String Name
    {
      get { return this.name; }
      set { this.name = value; }
    }
  } 
```

虽然，它相当于具有自动属性的类：

```
public class MeasureStation
{
  public int ID {get;set;}
  public String Name {get;set;}
} 
```

所以，我和他们两个都跑了

```
private static void Main(string[] args)
{
  List<MeasureStation> itemsToSort
    = new List<MeasureStation>()
        {
          new MeasureStation() {ID = 01, Name = "Bbbb"},
          new MeasureStation() {ID = 01, Name = "Aaaa"},
          new MeasureStation() {ID = 01, Name = "Cccc"}
        };
  List<MeasureStation> sortedItems = itemsToSort.OrderBy(x => x.Name).ToList();

  Console.WriteLine("******itemsToSort*****");
  foreach (var item in itemsToSort)
      Console.WriteLine(item.Name.ToString());

  Console.WriteLine("******sortedItems*****");
  foreach (var item in sortedItems)
        Console.WriteLine(item.Name.ToString());

  Console.ReadLine();
} 
```

得到有序的输出：

```
******itemsToSort*****
Bbbb
Aaaa
Cccc
******sortedItems*****
Aaaa
Bbbb
Cccc 
```

# mysql - utf8_bin 与 utf8_general_ci。哪种排序规则将在 mysql 表中提供更快的性能？

> ID：15947450
> 
> 赞同：4
> 
> 时间：2013-04-11T11:21:22.300
> 
> 标签：mysql, collation

我使用 ' `id`' 字段 -`char(22)`作为 MySQL 表的主键。此字段仅用于在向表中添加新用户时过滤唯一 ID。

对我来说，使用`utf8_bin`还是`utf8_general_ci`排序并不重要，因为字母的大小写无关紧要，我只使用英文字母作为 id。

唯一的问题是：哪种排序规则会提供更快的性能？

我的表最常见的查询是：

```
LOAD DATA INFILE ... IGNORE INTO TABLE mytable(id)
or
INSERT IGNORE INTO mytable(id)...
and 
SELECT COUNT(id) FROM mytable 
```

现在，由于表不大，我看不出性能上有什么差异，但是当我的表中的行数超过 200 万时会发生什么？

utf8_general_ci 排序规则会为 INSERT 或 LOAD IGNORE 和 SELECT COUNT 查询提供更快的性能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:32:40.943

一般来说，`utf8_bin`它至少会和它一样快，`utf8_general_ci`因为除了识别多字节字符之外[，它不对](http://dev.mysql.com/doc/refman/5.5/en/charset-binary-collations.html)二进制数据执行任何处理。

也就是说，`id`列上存在索引以及您只希望检测重复而不是排序这一事实应该意味着绝对不会有可检测的差异。然而，这只是一个有根据的猜测，所以我可能是错的（即使它看起来不太可能）。

# matlab - 在 MATLAB 上迭代使用 bintprog

> ID：15947453
> 
> 赞同：2
> 
> 时间：2013-04-11T11:21:32.133
> 
> 标签：matlab, combinatorics, linear-programming

[如此链接](https://stackoverflow.com/a/15207017/2067480)所示，我们有一个问题表述。

考虑到第一次调用`bintprog`给出的解决方案`x`在经过一些后处理后不能充分解决物理问题，是否可以召回`bintprog`并排除先前的解决方案`x`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:18:50.710

你需要一个不好的削减。

假设您找到了一个解决方案 \hat{x}，然后您认为该解决方案是不可行的（通过某种后处理）。让 x 和 \hat{x} 被 i 索引。

您可以添加以下形式的约束：

```
\sum_{i : \hat{x}_i = 0} x_i + \sum_{i : \hat{x} = 1} (1-x_i) \geq 1 
```

这个约束是一个不好割的例子：解必须与 \hat{x} 相差至少一个索引 i，否则它是不可行的。如果您的变量不是二进制无货，则可能会更复杂一些。

您可以通过将约束作为一行附加到您的约束矩阵并使用 bintprog() 函数重新求解来为您的解决方案添加一个不好的东西。我会把它留给你，让你用 MATLAB 符号重写它。

你没有说你的后处理做了什么，但如果后处理可以从你的解决方案 \hat{x} 推断出其他解决方案也是不可行的，并且你可以在每次迭代中添加不止一行，那就更好了. 这是基于逻辑的 Benders 分解的一种形式，其他不可行解决方案的推理称为求解推理对偶（与标准 Benders 分解相反，您正在求解线性规划对偶）。 [更多关于基于逻辑的 Benders 分解](http://wpweb2.tepper.cmu.edu/jnh/benders2.pdf)来自创造这个术语的人，CMU 的 John Hooker。

抱歉格式化。我得走了，但我以后会想办法更​​好地显示方程式。

# java - 制作一个新的 ArrayList 从数组列表 豆类的

> ID：15947458
> 
> 赞同：0
> 
> 时间：2013-04-11T11:21:45.823
> 
> 标签：java, collections, arraylist

我有一个包含五个字段的bean类的ArrayList

Java Bean -- MyShares

1.  文件名
2.  文件路径
3.  文件大小
4.  是共享的
5.  创作者

我想从这个bean类的arraylist中制作一个filePath的ArrayList

我对 Java 集合没有丰富的知识。那么最短的逻辑是什么。

我已经实现的当前逻辑如下，**现在我想要一个优化的逻辑来这样做**

```
ArrayList<Myshares> fileDetails = new ReadSDCard().getSdCardFiles();

        if (!fileDetails.isEmpty()) {

            for (int i = 0; i < fileDetails.size(); i++) {
                CommonUtilities.filePaths.add(fileDetails.get(i).getPath());
            }
        }

        if (!CommonUtilities.filePaths.isEmpty()) {

            for (int i = 0; i < CommonUtilities.filePaths.size(); i++) {

                Log.d(Integer.toString(i), CommonUtilities.filePaths.get(i));
            }
        } 
```

CommonUtilities.filePaths 是我想在其中存储文件路径的静态 ArrayList

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:42:15.393

你所做的很好，但你需要`null`在插入之前检查路径是否是`CommonUtilities.filePaths`. 您也可以使用迭代器代替 for 循环。

您可以避免两个 for 循环，只需执行以下操作：

```
ArrayList<Myshares> fileDetails = new ReadSDCard().getSdCardFiles();
       int j=0;

        if (!fileDetails.isEmpty()) {
            for (int i = 0; i < fileDetails.size(); i++) {
              if(fileDetails.get(i).getPath()!=null){
                CommonUtilities.filePaths.add(fileDetails.get(i).getPath());
                Log.d(Integer.toString(j), CommonUtilities.filePaths.get(j));
                j++;
              }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:42:52.773

我正在努力理解为什么你会有两个循环。一种循环遍历`fileDetails`集合并将路径添加到新集合的方法，然后循环遍历新集合以进行日志记录。在同一个循环中执行这两个步骤：

```
 if (!fileDetails.isEmpty()) {

        for (int i = 0; i < fileDetails.size(); i++) {
            CommonUtilities.filePaths.add(fileDetails.get(i).getPath());
            Log.d(Integer.toString(i), fileDetails.get(i).getPath());
        }
    } 
```

除此之外，我看不到如何优化它，因为如果不循环使用 fileDetails 就不可能将路径添加到新数组。此逻辑将在 O(n) 时间内运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:55:07.220

为什么要再次使用 CommonUtilities 来获取文件路径？我们可以在迭代时在同一个实例中记录路径

```
 ArrayList<Myshares> fileDetails = new ReadSDCard().getSdCardFiles();

            if (!fileDetails.isEmpty()) {

                for (int i = 0,n=fileDetails.size(); i < n; i++) {

                    CommonUtilities.filePaths.add(fileDetails.get(i).getPath());
                Log.d(Integer.toString(i),fileDetails.get(i).getPath());
                }
            } 
```

请参阅构造：

```
 for (int i = 0,n=fileDetails.size(); i < n; i++) 
```

我们可以使用它，前提是我们确信 fileDetails.size() 将返回相同的结果（列表没有被修改）。这将使我们免于每次调用 fileDetails.size()

# java - 哈希表查找负载

> ID：15947459
> 
> 赞同：3
> 
> 时间：2013-04-11T11:21:47.323
> 
> 标签：java, hashtable

我有一个关于计算我们的哈希表负载的问题。所以哈希表中存在的对象数量。我知道当hashtable数组中有超过60%的对象时，效率就会降低。

我添加了我的“添加”方法，以便您可以看到我如何将对象添加到哈希表中。由于某种原因，Load 总是返回为 0。

```
class MyHashTable<T>{
private T[]values;
private int size;
//hash table size increases 10^n
public MyHashTable(){
    size = 0;
    values = (T[])(new Object[10]);
}
 public void add(T object){
    size = values.length;
    //checks if the # of stuff in the array is over 60%
    //expand if true
    if ((size+10)/size > 0.6){
        size*=2;
        T[]tmp = (T[]) (new Object[size]);
        for(int i=0; i<size/10; i++){
            if (values[i]!=null){
                add(values[i],tmp);
            }
        }
        values = tmp;
    }
    add(object, values);
}

public void add(T object, T[]values){   
    int location = Math.abs(object.hashCode())%values.length;
    while(values[location]!=null){
        location = (location+1)%values.length;
    }
    //System.out.println(object.hashCode());
    values[location] = object;
}
public int getLoad(){
    int load = 0;
    int location = 0;
    while(values[location]!=null){
        load+=1;
        location = (location+1)%values.length;
    }
    return load;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:32:56.700

我认为问题出在你的`add(T object)`方法上。您首先检查负载因子

```
 //checks if the # of stuff in the array is over 60%
 //expand if true
 if ((size+10)/size > 0.6){
 .... 
```

这里有两个问题。

这可以评估的唯一方法`false`是当大小为负时。

假设`size = 10` 然后`size +10 / size`= `20/10`=`2`

这可能不是这行代码的意图

另一个问题是这是一个整数除法，它将返回一个整数。在进行除法之前，您必须先转换`size`to`double`或乘以才能获得 a回报。`1.0``double`

# php - 在安装的 PHP 目录中找不到“libmysql.dll”文件

> ID：15947461
> 
> 赞同：0
> 
> 时间：2013-04-11T11:21:53.167
> 
> 标签：php

在从 php.net 安装 php (5.4.14) 的过程中，我提取了 zip 文件，但现在我无法在安装的 PHP 目录中找到“libmysql.dll”文件。我需要从第三方安装文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:24:20.710

libmysql.dll 是 MySQL（客户端）发行版的一部分。确保 MySQL（客户端）已正确安装

# javascript - jQuery：用逗号分隔值？

> ID：15947467
> 
> 赞同：0
> 
> 时间：2013-04-11T11:22:11.763
> 
> 标签：javascript, jquery, append

我知道 jQuery append 方法可以在文本之后扩展某些内容。

我实际上正在考虑动态扩展一些特殊字符。

**我想-**

我有两个带有`display:inline`. 一个是**基本电话号码**，另一个是**手机号码**。使用按钮提交后，我将所有这些信息作为摘要获取。

我想用`,`分隔符分隔这两个数字。我可以做到这一点的一种方法是用静态方法将它们分开。

```
<input type="number" data-id="#Basic_phone#" /> , <input type="number" data-id="#Mobile_phone"/> 
```

它看起来像- `1234569119`，`9119119119`

但是当任何一个输入框在数据库中都没有值时，它看起来很糟糕。然后我需要输入数字，但有时我没有输入框之一的值。

然后我只得到 (space) `,`(space)**或** `1234569119`,(space)**或**(space), `1234569119`。

我只想在两个数字都存在时才使用逗号。对不起，我没有任何想法这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:34:06.463

试试这个演示作为给定的[例子](http://jsfiddle.net/wYrLK/)

```
function abc(){
 var str="";
 if($("#Basic_phone").val().length>0)
   str=$("#Basic_phone").val();
 if(str.length>0 && $("#Mobile_phone").val().length>0 )
   str=str+",";

str=str+$("#Mobile_phone").val()

alert(str);
}

<input type="number" id="Basic_phone" /> , <input type="number" id="Mobile_phone"/>
<input type="button" value="hello" onclick="abc()"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:30:41.770

您可以使用条件语句附加逗号（，），如下所示

```
 if(phoneNo != "" && mobileNo != "" ){
      //do the append code here
     }else{
        print the phone No
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:30:56.817

你如何填充两个输入？

如果使用服务器端代码，则只需在输出逗号和第二个值之前检查该值：

```
if(Mobile_phone is not empty)
 show <input type="number" data-id="#Basic_phone#" /> , <input type="number" data-id="#Mobile_phone"/>
else
 show <input type="number" data-id="#Basic_phone#" /> 
```

# java - smack jitsi-jingle 例子

> ID：15947476
> 
> 赞同：0
> 
> 时间：2013-04-11T11:22:50.820
> 
> 标签：java, xmpp, voice, smack

我想开发一个可以支持语音聊天的项目，我决定使用jitsi-jingle和smack，但是我不知道从哪里开始，有什么教程或者小例子可以让我学习jitsi-jingle吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:36:21.070

此链接有两个示例：[单击此处](https://jitsi.org/Projects/LibJitsi)

其中一个发送视频和音频，另一个同时接收它们。但是没有图形用户界面。那么你怎么理解它发送av呢？如果您的相机有控制指示灯，您可以看到它已打开。另一方面，您可以看到您在输出端发送和接收了多少字节。

您可以使用所需的库运行它。

# grails - 根据传递给控制器 的参数动态创建查询

> ID：15947481
> 
> 赞同：5
> 
> 时间：2013-04-11T11:23:02.453
> 
> 标签：grails, groovy, grails-orm

在我的任务管理应用程序中，用户应该能够根据 : `assignedTo`、`priority`和`status`/或`dueDate`

我不确定如何创建动态查询，因为它将根据可用参数构建查询。

例如 ：

如果我有一个 URL，例如：`task/index?assignedTo=1&status=2`

我可以仅基于这两个参数构建查询。我习惯的方法是

```
Task.findAllByAssignedToAndStatus(
   User.get(params.assignedTo),
   TaskStatus.get(params.status)
) 
```

我显然不想通过`findAllBy`为每个可能的 URL 参数组合写出每个查询来实现 DRY 方法。

在 grails 中有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T17:05:05.093

我们已经在域类上实现了过滤器功能来做到这一点。简而言之，您将命名查询的小片段添加到您的域类中。

例子：

```
class Employee {

    String firstname
    String lastname
    Integer age

    static constraints = {
    }

    static namedQueries = {
        filteronFirstname { String inFirstname ->
            if (inFirstname&& inFirstname?.size() > 0) {
                ilike 'firstname', "%${inFirstname}%"
            }
        }

        filteronLastname { String inLastname ->
            if (inLastname && inLastname?.size() > 0) {
                ilike 'lastname', "%${inLastname}%"
            }
        }

        filteronAgeOlderThen { String ageOlderThen ->
            if (age && age ?.size() > 0) {
                gt 'age', ageOlderThen as Integer
            }
        }

    }
} 
```

这启用了细粒度过滤器功能，因此您可以构建 1 个使用所有过滤器方法的列表方法，并根据用户提供的输入将命名查询连接在一起。

```
Employee.filteronFirstname("John").
filterOnLastname("Doe").
filteronAgeOlderThen("10").
list(params) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T14:04:02.797

我设法让这个工作使用`createCriteria`如下：

如果用户为该特定过滤器选择“全部”，我将值 0 用于任何参数，因此它将从 where 子句中省略，即`eq()`该参数没有语句。

代码片段：

```
else
    {       
        def assignedTo = Integer.parseInt(taskParams.assignedTo)
        def priority = Integer.parseInt(taskParams.priority)
        def status = Integer.parseInt(taskParams.status)

        tasks = Task.createCriteria().list {            

            eq("project", Project.get(taskParams.PId))

            if(assignedTo > 0)
                eq("assignedTo", User.get(assignedTo))

            if(priority > 0)
                eq("priority", TaskPriority.get(priority))

            if(status > 0)
                eq("status", TaskStatus.get(status))                
        }           
    }
    return tasks
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:29:18.277

我会为此考虑使用可搜索插件（[http://grails.org/plugin/searchable](http://grails.org/plugin/searchable)）。很容易指定哪些属性`Task`应该是可搜索的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T16:12:29.330

看看 fluent 接口，您可以使用它们来添加或删除（过滤）每个参数。

[http://en.wikipedia.org/wiki/Fluent_interface](http://en.wikipedia.org/wiki/Fluent_interface)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-14T15:09:54.473

我对来自 URL 的动态 Where 查询的解决方案：

```
if (params.query) {
    def classLoader = getClass().getClassLoader();
    def query = new GroovyShell(classLoader).evaluate(
            "import myapp.Visit; Visit.where {$params.query}")
    visits = query.list(params)
} 
```

这从这样的 URL 中获取约束：

```
visit/index?query=client.status=='suspect';atHome==false 
```

# sql - 溢出错误（VBA，在sql数据库中插入数据的excel）

> ID：15947490
> 
> 赞同：1
> 
> 时间：2013-04-11T11:23:23.097
> 
> 标签：sql, vba, excel

这是我在excel表中的代码

```
Private Sub btnUpdate_Click()

On Error GoTo errH

    Dim con As New ADODB.Connection
    Dim rs As New ADODB.Recordset
    Dim strPath As String
    Dim intImportRow As Integer
    Dim strFirstName, strLastName As String

    Dim server, username, password, table, database As String

    With Sheets("Settings")

            server = .txtServer.Text
           table = .txtTable.Text
           database = .txtDatabase.Text
         ' server = "LB-HO-NAYEF\MYMSSQLSERVER"
        '  table = "tblLSItems"
        '  database = "LMStock"

            If con.State <> 1 Then

                con.Open "Provider=SQLOLEDB;Data Source=" & server & ";Initial Catalog=" & database & ";Integrated Security=SSPI;"
                'con.Open

            End If
            'this is the TRUSTED connection string

            Set rs.ActiveConnection = con

            'delete all records first if checkbox checked
            If .cbDelete Then
                con.Execute "delete " & table & ""
            End If

            'set first row with records to import
            'you could also just loop thru a range if you want.
            intImportRow = 2

            Do Until Sheet1.Cells(intImportRow, 1) = ""
               Dim strItemCode As String
            Dim strScanCode As String

                 Dim strStyle As String
                  Dim strDescription As String
                   Dim strPrice As String
                    Dim strSalePrice As String

                strItemCode = Sheet1.Cells(intImportRow, 2)
                strScanCode = Sheet1.Cells(intImportRow, 3)
                strStyle = Sheet1.Cells(intImportRow, 4)
                strDescription = Sheet1.Cells(intImportRow, 5)
                strPrice = Sheet1.Cells(intImportRow, 6)
                strSalePrice = Sheet1.Cells(intImportRow, 7)
                   'insert row into database
              COMMANDSTRING = "insert into tblLSItems (ItemCode, ScanCode,Style,Description,Price,SalePrice) values ('" & strItemCode & "','" & strScanCode & "','" & strStyle & "', '" & strDescription & "','" & strPrice & "','" & strSalePrice & "')"

            '    con.Execute "insert into tblLSItems (ItemCode, ScanCode,Style,Description,Price,SalePrice) values ('" & strItemCode & "','" & strScanCode & "','" & strStyle & "', '" & strDescription & "'," & strPrice & "," & strSalePrice & ")"
        con.Execute COMMANDSTRING

                intImportRow = intImportRow + 1
            Loop
             MsgBox ("Done importing")
            con.Close
            Set con = Nothing

    End With

Exit Sub

errH:
    MsgBox Err.Description
    MsgBox (COMMANDSTRING)
End Sub 
```

excel表格有129848条记录

它总是在记录 32766 中给出错误

不管是什么记录

这是下载excel表的链接

**表 2 具有连接到数据库所需的设置**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:27:11.843

[从 VBA 文档的使用数字部分](http://msdn.microsoft.com/en-us/library/office/aa164754(v=office.10).aspx)：

> # 整数、长整数和字节数据类型
> 
> ...
> 
> Integer 和 Long 数据类型都可以保存正值或负值。它们之间的区别在于它们的大小：整数变量的值可以在 -32,768 到 32,767 之间，而长变量的值可以在 -2,147,483,648 到 2,147,483,647 之间。

替换`Dim intImportRow As Integer`为`Dim intImportRow As Long`。

# html - div相互对齐

> ID：15947491
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:23:23.240
> 
> 标签：html, asp.net-mvc

```
<div style="height:25px; margin-top:12px; margin-bottom:12px; position: relative;">
<asp:Image ID="Image1" runat="server" ImageUrl="~deliveryvan.jpg" Height="75px" Width="100px" /><br />
<asp:HyperLink ID="HyperLink7" NavigateUrl="~/List.aspx" runat="server" Text="Deliveries"></asp:HyperLink>
    <% if (NumerofDeliveries > 0) %>
     <% { %>
       <div style="position:absolute; right:0; top:0; border:1px solid;  border-color:#EBEBFF; padding-left:2px; padding-right:2px;"><%:NumerofDeliveries%></div> 
      <% } %>
        </div> 
```

我想将包含数字的 div 放在框的右上角。我可以通过删除 margin-top:12px; 来做到这一点。从原始 div。但是我需要保持 margin-top:12px; 因为我希望图像有填充。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:30:52.917

使用 - 数字的边距值。

```
margin-top:-12px; 
```

# ios - iOS：“Constants.h”的错误

> ID：15947494
> 
> 赞同：0
> 
> 时间：2013-04-11T11:23:24.503
> 
> 标签：ios, xcode, uiviewcontroller

我已经声明了一个常量头文件：“Constants.h”。它包含以下声明：

```
extern const NSString   *Const_alertPayantMessage = @"test";
extern const NSString   *Const_alertPayantTitle   = @"Wooooops!!!";
extern const int        *Const_statutPayant       = 1; 
```

我以这种方式使用了这个常量：

```
int x = 1;

    if (x == Const_statutPayant) {
        UIAlertView* mes=[[UIAlertView alloc] initWithTitle:Const_alertPayantTitle
                                                    message:Const_alertPayantMessage delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];

        [mes show];
        [avPlayerError play];
    }else{
        [avPlayer play]; 
```

不幸的是，我无法运行我的应用程序，因为我收到以下错误消息：

```
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:27:12.003

“Constants.h”应包含：

```
extern const NSString   *Const_alertPayantMessage;
extern const NSString   *Const_alertPayantTitle;
extern const int        Const_statutPayant; 
```

“Constants.m”应包含：

```
const NSString   *Const_alertPayantMessage = @"test";
const NSString   *Const_alertPayantTitle   = @"Wooooops!!!";
const int        Const_statutPayant       = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:50:52.833

你的**Constant.h**应该像

```
NSString   *  const kAlertPayantMessage;
NSString   *  const kAlertPayantTitle; 
```

你的**Constant.m**应该像

```
NSString   *  const kAlertPayantMessage = @"test";
NSString   *  const kAlertPayantTitle   = @"Wooooops!!!"; 
```

[为什么你必须使用**NSString* const**而不是**const NSString ***？](https://stackoverflow.com/questions/6828831/sending-const-nsstring-to-parameter-of-type-nsstring-discards-qualifier/6830983#6830983)

# xaml - XAML - 旋转后文本块的中心对齐

> ID：15947495
> 
> 赞同：4
> 
> 时间：2013-04-11T11:23:24.737
> 
> 标签：xaml, winrt-xaml, textblock, xaml-designer

我有一个带有文本块和图像的堆栈面板。我需要将文本块与旋转（90度）对齐。像这样，

![在此处输入图像描述](https://i.stack.imgur.com/pUpAR.jpg)

但是，在旋转文本块后，我总是得到这样的结果，

![在此处输入图像描述](https://i.stack.imgur.com/HiDRc.jpg)

这是我正在使用的 XAML 代码，

```
<StackPanel Orientation="Horizontal">
        <Image Width="120" Source="ms-appx:///Assets/mail.jpg"/>
        <TextBlock Text="send mail" FontSize="15" Margin="25,0,0,0" >
            <TextBlock.RenderTransform>
                <RotateTransform Angle="90"/>
            </TextBlock.RenderTransform>
        </TextBlock>
    </StackPanel> 
```

我怎样才能将我的文本块对齐到中心..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T13:26:40.333

将 TextBlock 的 VerticalAlignment 设置为“Center”并通过设置 RenderTransformOrigin 围绕 TextBlocks 中心点旋转应该会有所帮助。

```
<TextBlock Text="xyz" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5" Margin="25,0,0,0">
    <TextBlock.RenderTransform>
        <RotateTransform Angle="90" />
    </TextBlock.RenderTransform>
</TextBlock> 
```

# xml - 在 xml 中接收 SharePoint 列表 guid

> ID：15947499
> 
> 赞同：1
> 
> 时间：2013-04-11T11:23:40.453
> 
> 标签：xml, sharepoint-2010, sharepoint-list

我需要为我的 xslt 的自定义应用程序接收 SharePoint 列表 guid。我检查了 SharePoint 列表的 xml 以及通过 SP 列表的 RSS 源生成的 xml。列表 guid 似乎不包含在其中任何一个中。有没有办法让列表 guid 在 xslt 中使用？

我只能将 SharePoint 生成的 xml 用于列表。

# android - 带有 readObject() 的 AsyncTask

> ID：15947500
> 
> 赞同：0
> 
> 时间：2013-04-11T11:23:42.693
> 
> 标签：android, android-asynctask, local-storage

util.concurrent.FutureTask.finishCompletion 当我尝试在内部存储中打开文件时我不知道如何处理如果你有一些建议请帮助我

我的代码：

```
 protected String doInBackground(Hashtable<String,String>... params) {
       Hashtable ht=params[0];

       String json=HelperHttp.getJSONResponseFromURL(url, ht);
       System.out.println(json);

        try {
            jObj = new JSONObject(json);
              ObjectOutput out = new ObjectOutputStream(new FileOutputStream(new File(getCacheDir(),"")+"cacheFile.srl"));
                out.writeObject(jObj.toString() );
                out.close();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

       if(json!=null) {try {
          ObjectInputStream in = new ObjectInputStream(new FileInputStream(new File(new File(getCacheDir(),"")+"cacheFile.srl")));
           JSONObject jsonObject;
        try {
            jsonObject = (JSONObject) in.readObject();
            JSONArray articles = jsonObject.getJSONArray("posts");

             for(int i = 0; i < articles.length(); i++){
                    JSONObject c = articles.getJSONObject(i);

                    // Storing each json item in variable
                    AO=c.getJSONObject("post");

                    String fr_titre = AO.getString("fr_titre");
                   Log.d("hhhhhhhhhh", fr_titre);

                   lista.add(fr_titre);

        }
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
           in.close(); 

         } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ObjectStreamException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    } else{
        return "Invalid Company Id";
       }

       return "SUCCESS";
      } 
```

堆栈跟踪：

```
04-11 11:52:04.694: E/AndroidRuntime(1026): FATAL EXCEPTION: AsyncTask #1
04-11 11:52:04.694: E/AndroidRuntime(1026): java.lang.RuntimeException: An error occured while executing doInBackground()
04-11 11:52:04.694: E/AndroidRuntime(1026):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at java.lang.Thread.run(Thread.java:856)
04-11 11:52:04.694: E/AndroidRuntime(1026): Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to org.json.JSONObject
04-11 11:52:04.694: E/AndroidRuntime(1026):     at com.cgi.activity.ActivityListNews$GetDeptAyncTask.doInBackground(ActivityListNews.java:81)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at com.cgi.activity.ActivityListNews$GetDeptAyncTask.doInBackground(ActivityListNews.java:1)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-11 11:52:04.694: E/AndroidRuntime(1026):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-11 11:52:04.694: E/AndroidRuntime(1026):     ... 3 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:46:38.627

你写一个字符串：

```
out.writeObject(jObj.toString() ); 
```

但是当您阅读它时将其转换为 JSONObject ：

```
jsonObject = (JSONObject) in.readObject(); 
```

您可以阅读它，将其转换为字符串，然后解析它：

```
jsonObject = new JSONObject((String) in.readObject()); 
```

# git - 我可以直接从我的谷歌驱动器在线推/拉吗？

> ID：15947502
> 
> 赞同：50
> 
> 时间：2013-04-11T11:23:44.770
> 
> 标签：git, google-drive-api

有一些方法可以通过 google drive sync windows 应用程序将我的本地 git 存储库同步到我的 google drive，但我想知道我是否可以完全绕过它的需要。

例如。

```
$ git remote add origin https://drive.google.com/<my_folder>/<my_repository>.git
$ git push github master 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-11T11:36:13.443

不，你不能。Google 驱动器上没有运行 git。

我还建议反对基于 Google 驱动器/Dropbox 的解决方案，而改用 git 托管解决方案。例如[Bitbucket](https://bitbucket.org/)，它提供了一些免费的私有存储库。[您可以在此处](https://git.wiki.kernel.org/index.php/GitHosting)找到有关不同 git 托管站点的一些比较信息。

正如人们所指出的（并且正如 OP 已经知道的那样），您可以将裸存储库放在本地 Google Drive/Dropbox 文件夹中并使用它，但是，有一些警告。云服务有自己的系统来合并冲突，而这并不适用于 git。考虑以下场景：

*   您离线使用设备 A，将一些提交推送到 Google Drive 文件夹中的裸存储库，但由于您离线，这些更改不会同步到云端。

*   然后你就忘了它，在线使用设备 B，将提交推送到 Google Drive 文件夹，然后这些更改就会同步。

*   设备 A 联机 - 您现在在 Google 云端硬盘中存在冲突。

当然，这是可以恢复的，但不方便。因此，我建议使用专为 git 托管而设计的解决方案。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-20T10:46:47.770

这是一篇关于该主题[的非常好的文章（](http://kahthong.com/2012/05/how-use-google-drive-or-dropbox-host-your-private-git-repositories)[此处为存档版本](https://web.archive.org/web/20161204062829/http://kahthong.com/2012/05/how-use-google-drive-or-dropbox-host-your-private-git-repositories)，相关部分在此处转载）：

假设您有一个项目，其名称`johndoe`如下`README`：

```
/var/www/html/johndoe/
/var/www/html/johndoe/README 
```

在此处初始化一个空的 Git 存储库：

```
$ cd /var/www/html/johndoe
$ git init
$ git add README
$ git commit README -m "Initial commit." 
```

将目录更改为您的 Google Drive 所在的位置并初始化一个裸存储库：

```
$ cd /Users/myusername/Google\ Drive/
$ mkdir johndoe
$ cd johndoe
$ git init --bare 
```

回到你的工作目录：

```
$ cd /var/www/html/johndoe
$ git remote add origin file:///Users/myusername/Google\ Drive/johndoe
$ git push origin master 
```

要从 Google Drive 克隆您的 Git 存储库：

```
$ cd /var/www/html/johndoe2
$ git clone file:///Users/myusername/Google\ Drive/johndoe 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-10-13T14:08:39.000

Eduardo Rosas 有[一篇](https://lalorosas.com/blog/github-colab-drive)关于如何使用 colab 执行此操作的文章（仅需要浏览器）。本质上，您使用以下方式访问您的谷歌驱动器：

```
from google.colab import drive
drive.mount('/content/gdrive')
#cd to the google drive you using the magic command
%cd /content/gdrive/'My Drive'/[your drive folder for repo]
#check your directory location with
!pwd
#clone your repo - Note this exposes your password so don't make the notebook public
!git clone https://LaloCo:password%23@github.com/LaloCo/handson-ml.git
#I find using a github personal access token easier
!git clone https://user:PAT@github.com/repo 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-17T00:50:03.237

你可以使用[itDuzzit](http://www.itduzzit.com)，它们提供了 Google Drive 和 GitHub 之间的直接云到云同步。他们有相当有限的[免费套餐](http://cloud.itduzzit.com/pricing/)和几个付费套餐。只要您的代码是开源的和/或您不介意第三方处理它，这可能是一个可行的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-04T00:30:02.210

如果您正在运行 Unix shell 并在您的机器上本地安装了 Google Drive，您可以像这样将脚本添加到您的 .bash_profile 或 .zshrc 文件中......

```
# Initialize a remote repo on "local" Google Drive and push to it for safekeeping.
function mkr() {
  CWD=$(PWD)
  REPONAME=${PWD##*/}
  REPOPATH=/Users/Bob/Google\ Drive/Repos/$REPONAME
  mkdir -p $REPOPATH
  cd $REPOPATH
  git init --bare
  cd $CWD
  git remote add origin $REPOPATH
  git push origin master
} 
```

假设您已经运行`git init`，您可以`mkr`从本地项目目录中的命令行键入。在这`mkr`一步之后，您可以`git push`像在 GitHub、Bitbucket 等上一样正常运行。您只是不会从远程获得通常的细节。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-16T08:29:36.443

您可以为此目的使用[google collab](https://colab.research.google.com/notebooks/intro.ipynb)。

*   将您的文件直接上传到您的谷歌驱动器
*   打开谷歌协作
*   导入文件
*   安装 git（作为 Jupyter notebook 或 Linux PC）

你完成了

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-02T22:05:22.810

您可以简单地将您认为合适的工作文件夹存档在 Google Drive 上，就像其他任何备份一样，为了保持一致性，您可以使用 crontab 或只是一个简单的脚本来自动存档，然后通过最适合的 Google Drive cli 工具上传你。

# c# - 使用具有不同数据类型的 HDF5

> ID：15947505
> 
> 赞同：1
> 
> 时间：2013-04-11T11:23:49.300
> 
> 标签：c#, hdf5

从 .h5 文件中读取数据的正确方法是什么？

表中存储了不同类型的数据。由于此文件的结构，数据类型为“复合”。

要打开所需的表，我使用：

```
struct metadata
{
    public Chararray a;
    public int b;
    public float c;
}

[StructLayout(LayoutKind.Sequential)]
public unsafe struct Chararray
{
    private char* recordedText;
    public char* RecordedText
    {
        get
        {
            return recordedText;
        }
        set
        {
            recordedText = value;
        }
    }

    public override string ToString()
    {
        string s;

        IntPtr ipp = (IntPtr)this.recordedText;
        s =System.Runtime.InteropServices.Marshal.PtrToStringAnsi(ipp);
        System.Runtime.InteropServices.Marshal.FreeHGlobal(ipp);

        return s;
    }
} 
```

读取数据

```
H5DataSetId dsetId = H5D.open(fileID, "/metadata/songs"); 
```

其中 fileID 是 H5FileId。

```
metadata[] s1 = new metadata[1];
H5DataTypeId dt = H5D.getType(dsetId);
H5D.read(dsetId, dt, new H5Array<metadata>(s1)); 
```

但是，输入的输出`s1`不正确。

# java - Tricky Java Generics：用泛型方法实现非泛型接口的泛型类

> ID：15947506
> 
> 赞同：0
> 
> 时间：2013-04-11T11:23:55.060
> 
> 标签：java, generics

我[在 ideone.com 中看到](http://ideone.com/4om8jH)了以下代码：

```
import java.util.*;

class Test{
   interface Visitor{
        public <T> void visit(T Value);
   }

   class MyVisitor<T> implements Visitor{
        List<T> list = new  ArrayList<T>();

        public <T> void visit(T value){
           list.add(value);
        }
    }
} 
```

编译此代码将产生以下+错误：

```
Main.java:12：错误：找不到合适的方法添加（T#1）
             list.add(值);
                 ^
     方法 List.add(int,T#2) 不适用
       （实际参数列表和形式参数列表的长度不同）
     方法 List.add(T#2) 不适用
       （实际参数 T#1 不能通过方法调用转换转换为 T#2）其中 T#1,T#2 是类型变量：
     T#1 扩展了在方法访问中声明的对象（T#1）
     T#2 扩展类 Test.MyVisitor 1 中声明的对象 1 错误

```

问题是**visit 中的类型 T**不被认为与**list 中的 T**相同。我该如何解决这个编译问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T11:31:02.997

```
class MyVisitor<T> implements Visitor{
    List<T> list = new  ArrayList<T>();

    public <T> void visit(T value){
       list.add(value);
    }
} 
```

相当于

```
class MyVisitor<T> implements Visitor{
    List<T> list = new  ArrayList<T>();

    public <V> void visit(V value){
       list.add(value);
    }
} 
```

即`T`类的`T`参数和`visit`方法的参数不相关，也不一定可以分配给另一个。如果`Visitor`本身是一个参数化接口

```
interface Visitor<V>{
    public void visit(V Value);
} 
```

那么你可以拥有`MyVisitor<T> implements Visitor<T>`并且T's*将*是相同的。

请记住，泛型方法的要点是将两个或多个参数的类型链接起来，或者将参数的类型链接到方法的返回类型（例如，采用某种类型的参数并返回列表*的方法）同类型*）。当一个泛型方法只使用它的参数时，它并没有真正从泛型中获得任何好处，也就是说，你将获得同样多的类型安全性

```
interface Visitor{
    public void visit(Object Value);
} 
```

就像您在原始`Visitor`界面中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:27:04.030

接口必须是`Visitor<T>`

编辑：界面必须看起来像这样

```
interface Visitor<T> {
    void visit(T Value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:31:23.333

您`<T>`两次声明泛型类型：

*   关于`visit`方法
*   在`MyVisitor`课堂上

编译器阻止添加到列表中：`list.add(value);`因为这两种类型可能不同。

解决问题的一种方法是在访问方法中使`Visitor`接口通用`<T>`并删除`<T>`访问方法：

```
interface Visitor<T> {
        public void visit(T Value);
    }

class MyVisitor<T> implements Visitor<T>{
    List<T> list = new  ArrayList<T>();

    public  void visit(T value){
        list.add(value);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:35:59.857

您正在使用方法签名中的类型参数（以及因此中的项目类型）来隐藏类型参数`T`，它可以是完全不同的类型。（传递给它的任何类型都可以是任何类型，也可能是.）您应该重命名其中一个。`MyVisitor<T>``list``visit()``Object`

事实上，就 Java 泛型而言，访问者中的方法签名是空洞的。做吧`void visit(Object o)`，它是完全等价的，不那么令人困惑。这样做也使问题更清楚，您正在尝试将一个添加`Object`到`List<T>`. 如果您需要方法签名，`Visitor`则必须强制转换。（这将需要 a `Class.cast()`，因此需要`Class<T>`a `MyVisitor`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:33:24.613

正确的解决方案是：

```
class Test {
    interface Visitor<T> {
        public void visit(T Value);
    }

    class MyVisitor<T> implements Visitor<T> {
        List<T> list = new ArrayList<T>();

        @Override
        public void visit(T value) {
           list.add(value);
        }
    }
} 
```

# objective-c - 生成的 DocSet 导致 Xcode 4.6 崩溃

> ID：15947507
> 
> 赞同：3
> 
> 时间：2013-04-11T11:23:55.753
> 
> 标签：objective-c, xcode4, doxygen

我目前使用 Xcode 4.6。我编写了一个脚本来生成 HTML 和 DocSet 文档（XCode Run Script）。我的剧本就像一个魅力。我能够访问 HTML 文档并在 Xcode 中（重新）加载它。

然而，访问我的一些标签，如“主页”或“相关页面”会导致 Xcode 崩溃。

如果您对临时解决方案有任何想法（可能在 doxygen conf 文件中？），我很感兴趣！

此致 ！

佩比

PS：我在这里有带有文件附件的错误报告：[https ://bugzilla.gnome.org/show_bug.cgi?id=697706](https://bugzilla.gnome.org/show_bug.cgi?id=697706)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:10:35.407

看来这不是 doxygen 错误，而是 Apple 错误。请参阅 doxygen 团队的答案：[https ://bugzilla.gnome.org/show_bug.cgi?id=697706](https://bugzilla.gnome.org/show_bug.cgi?id=697706)

此致 ！

# php - 多个类别的网址

> ID：15947511
> 
> 赞同：0
> 
> 时间：2013-04-11T11:24:11.430
> 
> 标签：php, categories

我需要一些帮助。我这里有一个用于类别选择的脚本。当我在网址 www.domain.com/zone.php?cat=Apple 上使用时，它可以工作并显示 Apple 类别中的项目

但是，我想在网址中有 2 个或更多类别，例如 www.domain.com/zone.php?cat=Apple&cat=Orange&cat=Pear，以便它显示 Apple、Orange 和 Pear 中的所有项目。我如何从下面做到这一点。

```
if (isset($_GET['cat']) && strtolower($_GET['cat'])!=='all'){
    $cat = DB::LimitQuery('category', array(
'condition' =>'name="'.$_GET['cat'].'"',
));

    $condition = array( 
            "(city_id = '0' OR find_in_set({$city['id']},city_id))",
            'product' => $cat[0]['id'],
            "begin_time <  {$daytime}",
            );
} else {
    $condition = array( 
            "(city_id = '0' OR find_in_set({$city['id']},city_id))",
            "begin_time <  {$daytime}",
            );      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:28:54.223

好吧，如果您想拥有更多类别，那么您做错了，您必须设置更多`GET`参数才能捕获它

```
$_GET['cat1']
$_GET['cat2']
$_GET['cat3'] 
```

但是如果您想要在单个参数中包含很多类别，请使用将在 url 中正确编码的任何字符分隔类别，`,`就像这样

www.domain.com/zone.php?cat=Apple&,Orange,Pear

它`explode()`在 PHP 端

```
$cats = explode($_GET['cat'],','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:32:17.543

你需要做：

```
www.domain.com/zone.php?cat[]=Apple&cat[]=Orange&cat[]=Pear 
```

它将在. **_**`$_GET['cat']`

并在 php 中制作：

```
$condition = array( 
            "(city_id = '0' OR find_in_set({$city['id']},city_id))",
            'product IN ( '.implode(','.$_POST['cat'].')',
            "begin_time <  {$daytime}",
            ); 
```

***但是***您需要检查该值以避免注射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:21:57.493

索引.php

```
<?php if(isset($_GET['arr']))
    {
        $id = $_GET['arr'];
        var_dump($id);
    }
    ?>

<?php $array =array('apple','orange','banana');
    $array = http_build_query(array('arr'=>$array));
    var_dump($array);
?>     

 <a href="index.php?<?php echo $array;?>">click</a> 
```

我希望这能帮到您！

# javascript - 我是否应该总是在 Try Catch 块中为 Javascript 包装代码？

> ID：15947515
> 
> 赞同：5
> 
> 时间：2013-04-11T11:24:19.647
> 
> 标签：javascript

我已经忽略了异常处理足够长的时间，主要是因为我从未在 SO 上看到的片段中看到它使用它，2 年编写 javascript 并且我什至不知道 javascript 具有异常处理。其他语言看到异常处理是很常见的，异常处理对javascript来说不那么重要吗？有哪些典型场景应该始终在 javascript 中使用异常处理而不应该使用？

此规则是否也适用于 javascript？

[为什么我不应该将每个块都包装在“try”-“catch”中？](https://stackoverflow.com/questions/2737328/why-should-i-not-wrap-every-block-in-try-catch)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:51:11.613

javascript 中最常见的策略是防御性编写并彻底测试。

例如，有些库从第一个方开始，测试类似于：

```
var element;

if (document && document.getElementById) {
  element = document.getElementById('foo');
}

if (element) {
  // use element
} 
```

但是用更通用的格式编写，带有*isHostMethod 之*类的测试。

仅将 try..catch 用作无法使用特征检测或其他防御措施的最后手段。测试宿主对象有时会返回无用的结果，甚至可能抛出错误（例如，所有 XMLHttpRequest 脚本都使用 try..catch，因为在 IE 中测试支持是不确定的，所以唯一的选择就是调用它，看看会发生什么）。

轻微的脚本错误并不是什么大问题，因为大多数浏览器默认不会显示它们。大多数重要页面总是抛出错误（包括 SO），具体取决于浏览器、设置和用户网络环境等因素。用户只是被拒绝了他们可能知道也可能不知道他们缺少的功能（并且实际上可能从中受益）。因此，一个典型的策略是让我们的页面在没有任何脚本的情况下正常运行，然后添加脚本功能以增强可用性。这样，如果发生可能会阻止页面有用的错误，则始终可以回退到基本功能。

这种策略可能并不总是可行，但它是一个很好的起点，不应轻易放弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:46:13.923

在 C 语言中，始终检查返回码是一种很好的做法。

然后是带有异常的 C++。Java对它们的使用非常重，甚至太重（例如：：`Integer.parseInt`即使您只想检查，如果某些东西是String，您仍然必须处理异常）。

JavaScript 还有其他的异常处理概念。一个好的做法是为异常处理提供**回调**。如果没有找到任何元素，jQuery 选择器仍然“工作”，你只会得到 0 元素选择器。

因此，如果您使用的代码会引发异常，则必须对其进行处理。但是您应该避免抛出异常并通过回调支持错误处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:25:39.857

如果情况是性能，异常是一个大问题。但它以非常简单的方式进行错误检测。

如果正在使用抛出异常的某人的工具，那么您应该通过`try catch`块运行它们。

尝试在编写 javascript 时尽量减少抛出异常

# python - GUI 上的文本不刷新

> ID：15947517
> 
> 赞同：1
> 
> 时间：2013-04-11T11:24:20.757
> 
> 标签：python, tkinter

```
from Tkinter import *

root = Tk()

armor = Label(root, text="Armor:", font=("Helvetica", 12))
armor.grid(row=1, column=0)
armorscale = Scale(root, from_=1337, to=20000, orient=HORIZONTAL, length=500)
armorscale.grid(row=1, column=1)
###
damage = Label(root, text="Base Damage:", font=("Helvetica", 12), justify=LEFT)
damage.grid(row=2, column=0)
damagescale = Scale(root, from_=100, to=2000, orient=HORIZONTAL, length=500)
damagescale.grid(row=2, column=1)
###    
armorfloat = float(armorscale.get())
damagefloat = float(damagescale.get())
fReduction = float(armorfloat / (armorfloat + 12 * damagefloat))
sReduction = str(fReduction)
fTaken = damagefloat * (1 - (1* fReduction))
sTaken = str(fTaken)
###
def calc1():
    armorfloat = float(armorscale.get())
    damagefloat = float(damagescale.get())
    fReduction = float(armorfloat / (armorfloat + 12 * damagefloat))
    sReduction = str(fReduction)
    fTaken = damagefloat * (1 - (1 * fReduction))
    sTaken = str(fTaken)
    print sReduction
    print sTaken
    return sReduction
    return sTaken

###
reduction = Label(root, text="Reduction %:" + sReduction, font=("Helvetica", 12), justify=LEFT)
reduction.grid(row=3, column=0)
taken = Label(root, text="Damage Taken:" + sTaken, font=("Helvetica", 12), justify=LEFT)
taken.grid(row=4, column=0)
button = Button(root, text="Calculate", command=calc1)
button.grid(row=3, column=1, pady=5, sticky=E)
###
root.mainloop() 
```

这是我第一次尝试编程任何东西，所以我完全是个菜鸟。一切似乎都运行良好，打印的东西只是为了证明这一点。问题是在打开程序并移动滑块或单击计算按钮后，GUI 上的值根本没有更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:04:45.487

您不必*使用*StringVar 来更改标签的文本（当然可以，但这是 Tkinter 程序中非常罕见的模式）。`text`可以使用`config`方法或使用 key更改小部件的选项`"text"`，这更容易：

```
label.config(text="new text")
# or
label["text"] = "new text" 
```

因此，您的标签文本可以更新，而无需为每个标签使用 StringVar：

```
def calc1():
    armorfloat = float(armorscale.get())
    damagefloat = float(damagescale.get())
    fReduction = float(armorfloat / (armorfloat + 12 * damagefloat))
    fTaken = damagefloat * (1 - (1 * fReduction))
    reduction.config(text="Reduction %:{}".format(fReduction))
    taken.config(text="Damage Taken:{}".format(fTaken)) 
```

如果您还想在移动滑块时重新计算标签的值，请在`command`“缩放”小部件的选项中使用此功能：

```
Scale(..., command=lambda v: calc1()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:46:16.787

正如 msw 所写：您可以使用 StringVar

但是要更新回调中的标签，您必须为其提供状态

一种常见的模式，是将状态封装在一个类中，就像这个答案： [How to update image in tkinter label?](https://stackoverflow.com/questions/14291434/how-to-update-image-in-tkinter-label)

另一种选择是将其作为参数显式传递（这里，为方便起见，使用 functools.partial ）

（另一种选择是直接修改全局模块状态，但我认为这不是一个好习惯：最好是明确的）

此外，删除了无用的浮点转换，更改了命名样式以更符合 pep8，并删除了 * 导入（尽管现在显式访问 Tkinter 属性应该更好，因为我们要导入其中的很多属性）

```
from Tkinter import Tk, Label, Scale, HORIZONTAL, LEFT, StringVar, Button, E
from functools import partial

root = Tk()

armorlabel = Label(root, text="Armor:", font=("Helvetica", 12))
armorlabel.grid(row=1, column=0)
armorscale = Scale(root, from_=1337, to=20000, orient=HORIZONTAL, length=500)
armorscale.grid(row=1, column=1)
###
damagelabel = Label(root, text="Base Damage:", font=("Helvetica", 12), justify=LEFT)
damagelabel.grid(row=2, column=0)
damagescale = Scale(root, from_=100, to=2000, orient=HORIZONTAL, length=500)
damagescale.grid(row=2, column=1)
###    
damage_reduction = StringVar()
damage_taken = StringVar()

def calc1(reduction, taken):
    armor = armorscale.get()
    damage = damagescale.get()
    reduction_value = armor / (armor + 12.0 * damage)
    reduction.set("Reduction %%: %s" % reduction_value)
    taken_value = damage * (1 - reduction_value)
    taken.set("Damage Taken: %s" % taken_value)

###
reduction_label = Label(root, textvariable=damage_reduction, font=("Helvetica", 12), justify=LEFT)
reduction_label.grid(row=3, column=0)
taken_label = Label(root, textvariable=damage_taken, font=("Helvetica", 12), justify=LEFT)
taken_label.grid(row=4, column=0)
calc = partial(calc1, damage_reduction, damage_taken)
button = Button(root, text="Calculate", command=calc)
button.grid(row=3, column=1, pady=5, sticky=E)
calc()
###
root.mainloop() 
```

# java - Apache Camel 根据请求使用文件内容丰富消息

> ID：15947523
> 
> 赞同：6
> 
> 时间：2013-04-11T11:24:37.197
> 
> 标签：java, rest, jakarta-ee, cxf, apache-camel

我正在实现 RESTful 服务（使用 CXFRS 组件），它应该为某些请求返回文件。每个文件都通过其 id 和扩展名获取，即`restfulservice.com/path/file/1/pdf`. 每个文件一旦添加就永远不会改变。获取后不应移动或删除文件，通常它们应该可以同时访问。这是我的骆驼上下文的一部分：

```
from("direct:fetchFile")
    .process(fetchFileProcessor) // set file.id & file.extension
    .bean(fileService, "fetchFile(${header.file.id}, ${header.file.extension})") // set body to filename
    .setHeader("CamelFileName", simple("${body}"))
    .choice()
        .when(header("file.extension").isEqualTo("xml"))
            .pollEnrich("file:///{{application.fileStorage.basePath}}/xml?noop=true", 500)
        .when(header("file.extension").isEqualTo("pdf"))
            .pollEnrich("file:///{{application.fileStorage.basePath}}/pdf?noop=true", 500)
    .end()
    .convertBodyTo(File.class)
    .bean(responseProvider, "getResponse(${body}, 200)"); 
```

此配置的问题是响应仅针对第二个（为什么？）请求具有非空主体，没有超时设置服务在第二个请求时进入永恒循环并带有调试消息

```
DEBUG o.a.c.c.f.FileConsumer - Took 0.000 seconds to poll <base path>\xml 
```

Apace Camel 版本是 2.10.4

任何帮助，将不胜感激

**UPD1**：[Content](http://camel.apache.org/content-enricher.html)
Enricher 页面 上有警告，说“pollEnrich 不访问当前 Exchange 的任何数据”。但是如果我添加到文件 URL没有任何改变`fileName=${body}`

**UPD2**：
pollEnrich 似乎不支持`fileName`URL（[链接](http://camel.465427.n5.nabble.com/pollEnrich-consumer-with-selector-td4939908.html)）中指定的动态。当前路线：

```
from("direct:fetchFile")
    .process(fetchFileProcessor) // set file.id & file.extension
    .bean(fileService, "fetchFile(${header.file.id}, ${header.file.extension})") // set body to filename
    .choice()
        .when(header("file.extension").isEqualTo("xml"))
            .pollEnrich("file:///{{application.fileStorage.basePath}}/xml?fileName=${body}&noop=true", 500)
            .setHeader("asset.type", simple(MediaType.APPLICATION_XML))
        .when(header("file.extension").isEqualTo("pdf"))
            .pollEnrich("file:///{{application.fileStorage.basePath}}/pdf?fileName=${body}&noop=true", 500)
            .setHeader("asset.type", simple("application/pdf"))
    .end()
    .convertBodyTo(File.class)
    .process(multipartProcessor) // add file ass attachment to multipart body and set it as body
    .bean(responseProvider, "getResponse(${body}, 200)"); 
```

**UPD3**
我正在尝试实现自定义处理器以使用具有动态文件名的 PollingConsumer：

```
@Override
public void process(Exchange exchange) throws Exception {
    Long timeout = exchange.getIn().getHeader("file.timeout", Long.class);
    if (enrichUri == null) {
        throw new FileNotFoundException("'file.url' header not set");
    }

    CamelContext context = exchange.getContext();
    Endpoint endpoint = context.getEndpoint(enrichUri);
    PollingConsumer consumer = endpoint.createPollingConsumer();
    consumer.start();

    Exchange consumedExchange;
    try {
        if (timeout == null || timeout < 0) {
            consumedExchange = consumer.receive();
        } else if (timeout == 0) {
            consumedExchange = consumer.receiveNoWait();
        } else {
            consumedExchange = consumer.receive(timeout);
        }
    } catch (Exception e) {
        throw new AssetNotFoundException(e);
    } finally {
        consumer.stop();
    }
    exchange.getIn().setBody(consumedExchange.getIn().getBody());
} 
```

现在它在第一次响应时返回文件内容，但是在每个后​​续请求中，我都会得到上述日志消息的永恒循环：

```
DEBUG o.a.c.c.f.FileConsumer - Took 0.000 seconds to poll <base path>\xml 
```

**UPD4**
我已经实现了在处理之前添加并在处理之后删除的动态路由。此方法在 Apache Camel 论坛的[这篇文章中有所描述。](http://camel.465427.n5.nabble.com/How-to-grab-a-only-one-file-with-camel-tp4930104p5508497.html)Route 使用上面的处理器来消费文件。结果是一样的

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T10:20:29.350

简单的方法往往是最好的方法。在这种情况下，我拒绝处理 Apache Camel 文件组件并实现以下处理器：

```
public class FileLoadingProcessor implements Processor {

@Override
public void process(Exchange exchange) throws Exception {
    String filename = exchange.getIn().getBody(String.class); // message body contains filename
    String filePath = exchange.getIn().getHeader("fileprocessor.filepath", String.class);

    if (filePath == null || filename == null) {
        // throw some custom exception
    }

    URI uri = new URI(filePath.concat(filename));
    File file = new File(uri);

    if (!file.exists()) {
        throw new FileNotFoundException(String.format("File %s not found on %s", filename, filePath));
    }

    exchange.getIn().setBody(file);
} 
```

现在它就像一个魅力

# c# - 为什么 Controller.View 返回 null？

> ID：15947533
> 
> 赞同：0
> 
> 时间：2013-04-11T11:25:01.227
> 
> 标签：c#, asp.net-mvc, debugging, asp.net-mvc-4, controller

我正在对别人的 ASP.Net MVC4 控制器操作方法进行单元测试。它的最后一行是：

```
return this.View("ConfirmAddress", addressModel); 
```

这`null`在我的单元测试中返回。[Controller.View 文档](http://msdn.microsoft.com/en-us/library/dd460310%28v=vs.108%29.aspx)说第一个参数是视图名称，但我无法进入此方法以找出`null`返回的原因。A`ConfirmAddress.cshtml`存在于 Views 文件夹中，但控制器中也有一个`ConfirmAddress(AddressModel am)`操作。

任何人都可以从中看出它应该做什么（例如，也许`RedirectToAction`改用？？？）试图保持简短，但如果需要可以提供更多信息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:11:39.377

我查看了[该类的](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/e77aac8542c7d9f5e89b3aecfdc085cf9a62d8c1#src/System.Web.Mvc/Controller.cs)[官方源代码，`Controller`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/e77aac8542c7d9f5e89b3aecfdc085cf9a62d8c1#src/System.Web.Mvc/Controller.cs)以了解调用时会发生什么`View`。事实证明，所有不同的`View`方法重载最终都会调用以下方法：

```
protected internal virtual ViewResult View(string viewName, string masterName, object model)
{
    if (model != null)
    {
        ViewData.Model = model;
    }

    return new ViewResult
    {
        ViewName = viewName,
        MasterName = masterName,
        ViewData = ViewData,
        TempData = TempData,
        ViewEngineCollection = ViewEngineCollection
     };
} 
```

此方法（以及所有其他重载）将永远不会返回*NULL*，尽管它可能会引发异常。虽然它是虚拟的，这意味着您正在调用的代码可能会用自定义实现覆盖它并返回*NULL*。您能否检查该`View`方法是否在任何地方被覆盖？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:23:37.307

View 方法可能被覆盖。尝试删除`this`量词。

```
return View("ConfirmAddress", addressModel); 
```

# php - 用php清除表中的所有条目

> ID：15947536
> 
> 赞同：6
> 
> 时间：2013-04-11T11:25:13.357
> 
> 标签：php, mysql

我想用php清除MySQL中一张表中的所有条目我试过这个：

```
<?php
// Create connection
        $con=mysqli_connect("localhost","username","password","dbName");

// Check connection
        if (mysqli_connect_errno($con))
        {
            echo "Failed to connect to MySQL: " . mysqli_connect_error();
        }    

    $sql = "TRUNCATE TABLE tableName";
    mysqli_query($sql);
?> 
```

但它没有用。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T11:28:28.963

这是一个错字。您使用`mysql_query()`而不是`mysqli_query()`. 改变

```
mysql_query($sql); 
```

到：

```
mysqli_query($con, $sql); 
```

另请注意，两个函数的参数列表不同。`mysqli_expects()`连接句柄，因为它是第一个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:38:48.837

使用“mysqli”创建连接后，您尝试使用 mysql_query 删除“dbName”中的所有记录。

将代码更改为类似，

```
<?php
    // Create connection
    $con=mysqli_connect("localhost","username","password","dbName");
    // Check connection
    if (mysqli_connect_errno($con))
    {
        echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }    
    $sql = "TRUNCATE TABLE tableName";
    mysqli_query($con, $sql) or die(mysqli_error());
?> 
```

看看这是否有效并告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T11:31:14.617

首先检查任何可能提供线索的错误消息，有一些限制可以阻止 TRUNCATE 工作。还要确保它不是您问题中的 mysql/mysqli 函数的错字。

如果表不是很大，或者性能不重要，那么只需尝试：

```
$sql = "DELETE * FROM tableName"; 
```

# c# - 根据特定列对 Gridview 进行排序

> ID：15947538
> 
> 赞同：1
> 
> 时间：2013-04-11T11:25:14.773
> 
> 标签：c#, asp.net, sql-server

我有一个从 slq 数据源填充的网格视图。gridview 也有一个 onlad 事件。此事件使用从 sql 查询（独立于 sql 数据源）中提取的计数填充一列。如何根据从 onload 事件生成的特定列的结果对 gridview 进行降序排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:28:59.120

```
 protected void radgvData_SortCommand(object sender, GridSortCommandEventArgs e)
        {
            GridTableView tableView = e.Item.OwnerTableView;
            e.Canceled = true;
            GridSortExpression expression = new GridSortExpression();
            expression.FieldName = e.SortExpression;
            if (tableView.SortExpressions.Count == 0 || tableView.SortExpressions[0].FieldName != e.SortExpression)
                expression.SortOrder = GridSortOrder.Descending;
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Descending)
                expression.SortOrder = GridSortOrder.Ascending;
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Ascending)
                expression.SortOrder = GridSortOrder.Descending;
            tableView.SortExpressions.AddSortExpression(expression);
            radgvData.Rebind();
        } 
```

试试这个代码进行排序

# git - 示例中的 HEAD 位置来自 git docs on stash 命令

> ID：15947541
> 
> 赞同：1
> 
> 时间：2013-04-11T11:25:35.107
> 
> 标签：git, git-reset

我一直在阅读命令如何简化生活[的示例](https://www.kernel.org/pub/software/scm/git/docs/git-stash.html#_examples)`stash`，并遇到了以下代码片段：

```
# ... hack hack hack ...
$ git checkout -b my_wip
$ git commit -a -m "WIP"
$ git checkout master
$ edit emergency fix
$ git commit -a -m "Fix in a hurry"
$ git checkout my_wip
$ git reset --soft HEAD^
# ... continue hacking ... 
```

据我所知，这里发生的情况如下：

我们在当前提交处创建一个新分支：

```
--1
  |
  master
  my_wip
  HEAD 
```

然后我们暂存修改过的文件并对`my_wip`分支进行新的提交：

```
--1 ------------ 2
  |              |
  master         my_wip
                 HEAD 
```

然后我们结帐`master`：

```
--1 ------------ 2
  |              |
  master         my_wip
  HEAD 
```

然后我们修改一些文件并进行新的提交（带有初步暂存（`-a`标志））：

```
 HEAD
                 master
                 |
    -------------3
   /
  /
--1 ------------ 2
                 |
                 my_wip 
```

然后我们结帐`my_wip`：

```
 master
                 |
    -------------3
   /
  /
--1 ------------ 2
                 |
                 my_wip
                 HEAD 
```

然后我们做`git reset --soft HEAD^`。

在这个命令之后，我希望 git 移动`HEAD`到它之前的位置，即`3`提交。所以我希望它能让我们进入这个阶段（工作目录和暂存区来自`2`提交）：

```
 HEAD
                 master
                 my_wip
                 |
    -------------3
   /
  /
--1 ------------ 2 
```

但正如我从文档中得到的那样，它会这样做（因为在取消存储后，我们应该到达我们决定存储时所处的位置）：

```
 master
                 |
    -------------3
   /
  /
--1 ------------ 2
  |              
  my_wip
  HEAD 
```

这是否意味着这`HEAD^`是当前分支的先前位置，因此它取决于所选分支（我一直认为这`HEAD^`只是`HEAD`当前分支的先前位置）？还是我误解了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:56:32.653

在`git`概念`head`上并不笼统。可以说，每个`branch`人都有自己的`head`正常指向时间线中该分支的最后一次提交。

另一方面`HEAD`，每个存储库只存在一次，并指向当前分支的头部，即当前头部。

所以`HEAD`总是在你的分支而不是整个存储库的上下文中使用。这就是为什么`git reset --soft HEAD^`将您移回一个提交而不是前一个位置的原因

如果您查看文件`.git`夹中的文件，您可以清楚地理解这个概念：

```
.git/HEAD 
```

此文件包含对 repo 的 HEAD（大写）所在位置的引用

```
.git/refs/heads 
```

此文件夹包含每个分支的一个文件，并引用其头部（小写）。前一个文件通常会指向其中一个，除非有`detached HEAD`

# magento - Magento中带有OR条件的高级搜索

> ID：15947544
> 
> 赞同：2
> 
> 时间：2013-04-11T11:25:42.173
> 
> 标签：magento

我想使用高级表单进行搜索，但使用 mysql OR 语句而不是 AND 语句。

例如，我在**产品名称**字段中搜索产品“A”，在**产品类型**字段中搜索“B”。搜索结果必须是 A OR B。

我也改变了条件

系统 > 配置 > 目录 > 目录 > 目录搜索 > 搜索类型

搜索类型 = LIKE

但这不起作用所以有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:42:54.423

您需要在自定义模块中重写

`Mage_CatalogSearch_Model_Resource_Advanced_Collection`

(\app\code\core\Mage\CatalogSearch\Model\Resource\Advanced\Collection.php)

并在方法结束时替换`addFieldsToFilter`（Magento 1.7.0.2 上的第 132 行）

```
if (!is_null($previousSelect)) {
    $select->where('t1.entity_id IN (?)', new Zend_Db_Expr($previousSelect));
} 
```

经过

```
if (!is_null($previousSelect)) {
    $select->orWhere('t1.entity_id IN (?)', new Zend_Db_Expr($previousSelect));
} 
```

使用`orWhere`而不是`where`将下一个条件作为 OR 添加到查询中。

我没有对它进行太多测试，所以可能有一些取决于属性类型的技巧，但它似乎对文本属性很有效。

**更新**您需要扩展（或出于测试目的而修改）`Mage_CatalogSearch_Model_Resource_Advanced`和更改`addIndexableAttributeModifiedFilter`Magento 1.7.0.2 上第 191 行的方法的下拉属性

```
$select->where("{$tableAlias}.value IN(?)", $value); 
```

经过

```
$select->orWhere("{$tableAlias}.value IN(?)", $value); 
```

请注意，这远不是一个完整的解决方案，因为它在混合文本和 dropdonws 时不起作用。实现完整的 OR 应该稍微复杂一些，因为您在添加过滤器时可能必须检查现有条件。

干杯

# android - 通过 Android sdcard 目录中的 Phonegap InAppBrowser 打开 PDF

> ID：15947547
> 
> 赞同：1
> 
> 时间：2013-04-11T11:25:51.543
> 
> 标签：android, pdf, cordova, inappbrowser

我将 PDF 下载到我的目录 /storage/sdcard/.../example.pdf 中。现在我想在 Phonegap 的 InAppBrowser 中打开它。

```
var blaPath = fileEntry.fullPath.substring(7);
window.open(encodeURI(blaPath), '_blank', 'location=yes'); 
```

如果我不从路径中删除前 7 个字符（文件：//），InAppBrowser 会打开但它保持白色。我听说，我必须为 Android 删除这些字符。

但是当我删除它们时，我会在

`Path: file:///android_asset/www//storage/sdcard0/.../example.pdf`

如何通过 InAppBrowser 正确打开外部 PDF？

**更新：**在进一步的研究中，我发现[了这个](http://community.phonegap.com/nitobi/topics/inappbrowser_not_loading_pdf_on_android)：

难道是，无法通过 Android 上的 InAppBrowser 查看 PDF 吗？

**更新 2：** Android 似乎没有原生 PDF 查看器。我使用我编写的 PDFViewer 插件在已安装的 PDF 阅读器上打开 PDF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T04:11:59.177

这有点令人困惑：在标题中，您说要从本地目录打开 pdf，但在描述中您要打开外部 pdf。

如果文件位于服务器上，您可以通过 inappbrowser 打开它，如下所示：

```
window.open(encodeURI('https://docs.google.com/gview?embedded=true&url=http://www.mydomain.com/files/your_file.pdf'), '_blank', 'location=yes,EnableViewPortScale=yes'); 
```

否则，如果您想显示本地 pdf，请尝试： [PDF.js](https://github.com/mozilla/pdf.js)或[此](http://www.giovesoft.com/2011/08/download-and-open-pdf-with-phonegap.html)

# android - Android 快速精确的画布绘图？

> ID：15947549
> 
> 赞同：0
> 
> 时间：2013-04-11T11:25:59.920
> 
> 标签：android, canvas, graph, handler, ondraw

我正在开发一个 android 应用程序，它通过 tcp 获取图形值并实时连续地绘制图形。该应用程序必须每秒绘制 100 个像素/值，在 10 秒内完成一个 1000 像素宽度的图形。

我正在三星 Galaxy Tab 10.1 平板电脑上开发。

下面是主要的活动代码。我只是粘贴了必要的部分。

```
public class MainActivity extends Activity {

private MyGraph graph;
private Handler mHandler;
private Handler mHandler2;
private boolean running;

public static int counter=1;
private int limit=1000;

private class MyGraph extends View {

  private Paint       paintecg     = new Paint();
  private Paint       paintdel  = new Paint();
  private Canvas      canvas     = new Canvas();

  private Bitmap cache = Bitmap.createBitmap(1000,800, Bitmap.Config.ARGB_8888);

    private float nextX;        //next point in x axis
    private float lastX=0;
    private float nextY;        // next point in y axis
    private float lastY=150;

    public MyGraph(Context context){
        super(context);

        paintecg.setStyle(Paint.Style.STROKE);
        paintecg.setColor(Color.GREEN);
        paintecg.setAntiAlias(true); paintecg.setStrokeWidth(2f);

        paintdel.setStyle(Paint.Style.FILL_AND_STROKE);
        paintdel.setColor(Color.BLACK);

    }

    public void onDraw(Canvas canvas) {
        if (cache != null)
            canvas.drawBitmap(cache, 0, 0, paintecg);

    }

    public void drawNext() {
        canvas = new Canvas(cache);

        nextX=lastX+1;
            //adding new points to the graph
            canvas.drawLine(lastX,valuearray_ecg[counter-1],nextX,valuearray_ecg[counter], paintecg);
            //emptying next 25 pixels
            canvas.drawRect(nextX, 0, nextX+25, 800, paintdel);

            lastX=nextX;

               if (nextX<limit) {
                    counter++;
                 }
               else {
                    counter=1;
                    lastX=0;
                 }
             postInvalidate();
          }

 } 
```

}

这是在 oncreate() 方法中创建的处理程序：

```
 LinearLayout graphView=(LinearLayout) findViewById(R.id.layout_graph);
graph = new MyGraph(this);
        mHandler = new Handler(new Handler.Callback() {
            @Override
            public boolean handleMessage(Message msg) {
                graph.drawNext();
             if (running)
                    mHandler.sendMessageDelayed(new Message(), 10);
                return true;
            }
        });
graphView.addView(graph); 
```

图形在 main.xml 中的布局内绘制

这样，当我将处理程序设置为 20 毫秒并且我的 x 轴步进为 2 像素时，它会在大约 15 秒内绘制 1000 像素。奇怪的是，如果我在应用程序运行时锁定和解锁设备，时间就会变得正常并绘制10 秒内 1000 个像素。

当我将处理程序的延迟设置为 10 毫秒并将 x 轴步长设置为 1 像素时，首先它会在 25 秒内绘制 1000 像素。锁定和解锁后它会下降 20 秒。

我知道我可能做错了。我的问题是，有没有办法使用 android 的原生画布绘图快速绘制图形？或者处理这样的应用程序的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:54:50.660

多事。

*   不要每次都重新创建画布。这不是必需的。
*   要擦除旧数据，请使用 drawColor 而不是 drawRect。您需要先设置 clipRect。
*   不要使所有内容无效，仅使您更改的区域无效（即相同的clipRect）
*   禁用绘图缓存。基本上是因为您在自己的代码中处理缓存。请参阅评论以回答[此问题](https://stackoverflow.com/questions/13805640/stackoverflowerror-when-calling-getdrawingcache-from-ondraw)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:23:09.790

要添加到@aragaer 的[答案](https://stackoverflow.com/a/15948136/383414)：

这里有一些有用的信息——对你来说最重要的部分是我建议你使用`SurfaceView`而不是普通的`Canvas`.

我会阅读 Android 的游戏开发 - 你会在那里找到很多有用的高速绘图信息。

# sql-server - SQL Server 中的数据库表关系

> ID：15947550
> 
> 赞同：2
> 
> 时间：2013-04-11T11:26:09.327
> 
> 标签：sql-server, database, database-design, foreign-keys, entity-relationship

我的数据库中有一个作业（作业）表和一个工具表。刀具表分为两部分，一个是类别（tool_category），另一个是刀具数据（common_tools）。

现在我想问的是，我有一个工作表，我必须在其中选择一些从工具（common_tools）中列出的不同类别（工具类别）的下拉字段。我在下面给出两种方法。请建议哪个更好以及为什么。

**方法一**

我创建了一个表“tools_in_jobs”，其中包含三个字段，我们可以通过它知道为作业表单中的哪个类别选择了哪个工具值。

![在此处输入图像描述](https://i.stack.imgur.com/WCaza.png)

**方法二**

另一种方法是代替所有工具的公用表，我们可以为每个工具创建单独的表，如下图所示。但这里要注意的一件事是，这两个表（job_faculty 和 job_expertise）只是例如可能有 5 到 6 个这样的表，因为我使用了来自不同类别的 5 到 6 个工具。

![在此处输入图像描述](https://i.stack.imgur.com/yJnWC.png)

如果还有其他建议，也请提出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:36:45.227

我真的不明白你想要完成什么，但我可以说的是方法 2 一点都不好。每个工具的表格？哪些都有相同的字段？呐！这是一个巨大的开销，相当于程序中的“重复代码”。我认为可维护性、可扩展性等也很糟糕。

然后接近一个 - 我不明白为什么“tools_in_job”表与工具和类别有关系 - 工具的一个还不够吗？（看起来像一个无用的冗余）或者是什么意思这个类别？

正如我所说，您确实需要为您要完成的工作提供更好的解释。到时候我会编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:51:38.657

当然，方法 1 是首选方法，但从作业中删除 tool_category_id 以及 tools_in_job 和 tool_category 之间的关系以规范化设计。

方法 2 意味着每次添加新工具时创建一个新表，编写和维护更多代码，维护更多表和索引，并使用更多存储空间。

# java - 如何通过java反射发送HTTP请求

> ID：15947551
> 
> 赞同：0
> 
> 时间：2013-04-11T11:26:11.703
> 
> 标签：java, spring-mvc, reflection, spring-security

我有一个在春天开发的方法。以下是我的方法：

```
@PreAuthorize("isAuthenticated() and hasPermission(#request, 'CREATE_REQUISITION')")
    @RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
    public @ResponseBody
    void createRequisition(@RequestBody CreateRequisitionRO[] request,
            @RequestHeader("validateOnly") boolean validateOnly) {
        logger.debug("Starting createRequisition()...");
        for (int i = 0; i < request.length; i++) {
            CreateRequisitionRO requisitionRequest = request[i];

            // FIXME this has to be removed/moved
            requisitionRequest.setFundManager(requisitionRequest.getUserId());
            // FIXME might have to search using param level as well
            SystemDefault sysDefault = dbFuncs.references.systemDefault
                    .findByCompanyAndDivisionAndPortfolio(
                            userContext.getCompany(),
                            userContext.getDivision(),
                            requisitionRequest.getPortfolio());
            requisitionRequest.setCustodianN(sysDefault.getCustodianN());

            gateKeeper.route(requisitionRequest);
        }
    } 
```

我想通过java反射调用这个方法并获取响应。并比较响应。

tomcat 已启动，用户已登录系统。当tomcat启动时，我必须使用反射来调用该方法。

如何在java反射中做到这一点？

请提供帮助，如果可能的话，如果可能的话，请给我一些建议，如果不可能的话，请为我提供帮助我解决问题的可能性。

编辑 ：

这是我尝试过的，但它不起作用：

```
Class cls;
        CreateRequisitionRO[] request = new CreateRequisitionRO[10];
        try {
            //load the HexgenWebAPI at runtime
            cls = Class.forName("com.hexgen.api.facade.HexgenWebAPI");
            Object obj = cls.newInstance();

            Method method = cls.getDeclaredMethod("createRequisition", parames,booleanVal);
            method.invoke(obj, request,true);

        }catch(Exception ex){
            ex.printStackTrace();
            System.out.println("status of reflection : "+ex.getCause());
        } 
```

最好的问候安托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:54:35.173

根据对评论的回复，您正在尝试测试您的 Spring MVC 控制器。我认为您没有任何理由必须决心反思才能做到这一点。单元测试最好在 Web 容器之外编写和运行。如果您想进行集成测试，请查看[Spring-MVC-Test](http://static.springsource.org/spring-framework/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework)，或使用[WebDriver](http://docs.seleniumhq.org/projects/webdriver/)或[HtmlUnit等浏览器测试框架](http://htmlunit.sourceforge.net/)

# php - setcookie 不适用于标头重定向？

> ID：15947553
> 
> 赞同：1
> 
> 时间：2013-04-11T11:26:13.407
> 
> 标签：php, cookies, xampp

我正在尝试设置一个 cookie 并使用 header redirect 。但 cookie 没有设置。我试过了`print_r($_COOKIE)`。所以，我确定 cookie 没有设置在那个地方？

```
setcookie("re",$re);

header('Location: ' . $_SERVER['HTTP_REFERER']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:59:52.700

您需要设置我订购的路径以使其在所有域中可用...

根据文件

```
The path on the server in which the cookie will be available on. 
If set to '/', the cookie will be available within the entire domain. 
If set to '/foo/', the cookie will only be available within the /foo/ 
 directory and all sub-directories such as /foo/bar/ of domain. 
The default value is the current directory that the cookie is being set in. 
```

尝试这个

```
 <?php
  setcookie("re",$re,0,'/');
  header('Location: ' . $_SERVER['HTTP_REFERER']);
?> 
```

注意：推荐人应该来自您的域

# performance - tomcat 7 - 性能：连接器标志 connectionTimeout

> ID：15947555
> 
> 赞同：2
> 
> 时间：2013-04-11T11:26:16.453
> 
> 标签：performance, ssl, tomcat7, connector

从 tomcat 5.5 迁移到 tomcat 7.0.37 时，我遇到了一个奇怪的行为。我使用标准的 https 连接器：

```
<Connector address="x.x.x.x" port="9090" scheme="https" secure="true"
  clientAuth="false" sslProtocol="TLS" SSLEnabled="true" 
  ciphers="SSL_RSA_WITH_RC4_128_MD5,SSL_RSA_WITH_RC4_128_SHA,
        TLS_RSA_WITH_AES_128_CBC_SHA,TLS_DHE_RSA_WITH_AES_128_CBC_SHA,
        TLS_DHE_DSS_WITH_AES_128_CBC_SHA,SSL_RSA_WITH_3DES_EDE_CBC_SHA,
        SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA,
        SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA" 
  URIEncoding="UTF-8" keystorePass="x" keystoreFile="x" 
  connectionTimeout="-1" maxPostSize="-1" /> 
```

设置标志`connectionTimeout="-1"`后，对 Tomcat 的每个请求都会导致持续 20%-30% 的处理器使用率。因此，在为任何类型的资源（简单的 html 页面、jar 文件）生成 5 个请求后，处理器使用率达到 100%。

当我删除`connectionTimeout="-1"`标志时，不会发生这种行为。我使用标准的 Tomcat 7 配置。

有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T00:27:34.603

我花了一分钟才弄清楚这个。我也能够重现这个问题。查看 http 连接器的[文档](http://tomcat.apache.org/tomcat-6.0-doc/config/http.html)。它没有说您可以将其设置为 -1，但也没有说您也不能。所以我潜入代码以确定确定。在我发现下面的代码中（soTimeout = connectionTimeout）

```
if (soTimeout != null && soTimeout.intValue() >= 0)
  socket.setSoTimeout(soTimeout.intValue()); 
```

因此，基于 -1 永远不会被设置，并且 Socket java[类](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#getSoTimeout%28%29)正在使用默认设置。

如果您想要无限超时，请将其设置为 0（我不建议这样做，因为这会给您带来各种问题。）

**编辑#1**

对此进行了更深入的研究，似乎我已经报告了tomcat中的一个[错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=55177)，并将在7.0.42以后出现。

# android - 带有 AutoCompleteTextView 和其他项目的 SherlockActionBar

> ID：15947557
> 
> 赞同：0
> 
> 时间：2013-04-11T11:26:22.923
> 
> 标签：android, android-actionbar, actionbarsherlock

我想要一个带有**AutoCompleteTextView(Collapsible)的****操作栏**作为 menuItem**以及其他 menuItems 如 Delete**。我正在使用**SherlockActionBar 的库**使其与**较低版本（如 2.2、2.3）**兼容。

 ******我的要求是显示

1.  *actionBar 最右侧的 searchIcon（用于可折叠的 AutoCompleteTextView）和*

2.  *上述搜索图标左侧的删除图标。*

*现在，当用户点击 searchIcon 时，它应该会自行扩展以覆盖整个 actionBar（隐藏删除图标）。*

我曾尝试将 iconsearch(for AutoCompleteTextView) 和 deleteButton 都包装在布局中，并将此布局提供为 SherlockActionBar 库提供的操作栏的视图，但它没有显示任何内容。

然后我尝试添加 iconSearch（属性值为可折叠）和 deleteButton 作为单独的菜单项（显示在 SherlockActionBar 示例中），但它只显示 actionSearch。

我不知道如何使用 SherlockActionBar 库来实现相同的功能。我试图通过遵循给出的示例来实现相同但无法实现这一点。

任何帮助，将不胜感激...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:55:43.220

首先从搜索 (layout_search.xml) 创建您的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <AutoCompleteTextView
        android:id="@+id/edit_search"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Search" >

        <requestFocus />
    </AutoCompleteTextView>

    <ImageView
        android:id="@+id/img_clear"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:src="@drawable/ic_menu_clear" />

</FrameLayout> 
```

在您的菜单 xml 中：

```
<item
    android:id="@+id/menu_search"
    android:icon="@drawable/ic_menu_search"
    android:showAsAction="always|collapseActionView"
    android:title="Search">
</item> 
```

创建菜单：

```
 @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getSupportMenuInflater().inflate(R.menuyour_menu, menu);        
            menu.getItem(0).setActionView(R.layout.layout_search);
            AutoCompleteTextView search = (AutoCompleteTextView) mI.getActionView().findViewById(R.id.edit_search); 
            ImageView imgClear = (ImageView) menu.getItem(0).getActionView().findViewById(R.id.img_clear).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                search.setText("");
            }
        });

            return super.onCreateOptionsMenu(menu);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:25:10.877

我认为你应该使用现成的解决方案`com.actionbarsherlock.widget.SearchView`。

`menu.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/menu_remove"
        android:icon="@drawable/content_remove"
        android:showAsAction="ifRoom"
        android:title="@string/menu_remove" />
    <item
        android:id="@+id/menu_search"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
        android:icon="@drawable/action_search"
        android:showAsAction="always|collapseActionView"
        android:title="@string/search" />
</menu> 
```

`MainActivity.java`

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    // Inflate the options menu from XML
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main, menu);

    return super.onCreateOptionsMenu(menu);
} 
```

结果： [Android ActionBarSherlock 搜索 http://img6.imageshack.us/img6/7448/androidsearchactionbar.png](http://img6.imageshack.us/img6/7448/androidsearchactionbar.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T11:43:58.353

我完成了所需的实施。感谢[Rafal Galka](https://stackoverflow.com/users/2091077/rafal-galka)和[andrehsouza](https://stackoverflow.com/users/1657161/andrehsouza)。我必须结合这两种解决方案（由[Rafal Galka](https://stackoverflow.com/users/2091077/rafal-galka)和[andrehsouza](https://stackoverflow.com/users/1657161/andrehsouza)提供）以达到预期的效果。

我所做的是，我创建了一个包含两个操作项的 menu.xml。其中一个是带有普通图标和标题的标准操作项，另一个是自定义视图。而这个自定义视图只不过是一个简单的 AutoCompleteTextView，它已在 res/layout 文件夹下定义。

所以这是我的***res/menu/menu.xml***

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_xxx"
        android:showAsAction="ifRoom|withText"
        android:icon="@drawable/drawablexxx"
        android:title="@string/xxx"/>

    <item
        android:id="@+id/menu_search"
        android:actionLayout="@layout/collapsibleactionview"
        android:showAsAction="always|collapseActionView"
        android:title="@string/action_search"/>
</menu> 
```

并且***collapsibleactionview.xml***已在***res/layout***下定义为：

```
<?xml version="1.0" encoding="utf-8"?>
<AutoCompleteTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/edittextcollapsible"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/hint search"
    android:imeOptions="actionSearch"
    android:inputType="text" /> 
```

答对了 ！！！******

# salesforce - 如何在销售人员中存储单个值

> ID：15947561
> 
> 赞同：1
> 
> 时间：2013-04-11T11:26:44.537
> 
> 标签：salesforce, apex-code, visualforce

我对 salesforce 还很陌生，所以如果这个问题以前问过，请原谅我 - 到目前为止，我无法弄清楚什么似乎是一件简单的事情。

我正在开发一个应用程序，我想访问一组初始化变量（即用户名、密码、URL 等）。

到目前为止，我尝试使用自定义标签来保存信息。但这里的问题是我似乎无法从 visualforce 页面更改此标签的值（我只能显示该值）。

然后我尝试使用自定义对象，为其提供我需要的字段。但这让我很困惑。我不需要存储几组变量，我只需要一组变量。当我只使用 1 行时，我真的需要将其存储在一个基本上充当数据库表的自定义对象中吗？如果是这种情况，我如何在没有任何人工交互的情况下填充这 1 行（即单击强制平台以向此自定义对象添加条目），以便当我在某处安装应用程序时，这个条目就在那里（包含一些每列的默认值）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:13:46.363

阅读“帮助和培训”中的[自定义设置](https://help.salesforce.com/HTViewHelpDoc?id=cs_about.htm)。它们有两种口味：

*   具有唯一键的键-> 值对
*   层次结构（您可以为整个组织设置一些默认值，但如果您需要为某些用户覆盖它们 - 您也可以这样做）。

或者 - 如果它非常紧密地绑定到用户（某个外部系统的密码？）为什么不在用户对象上创建自定义字段？

# python - wxPython 意外缩进

> ID：15947571
> 
> 赞同：0
> 
> 时间：2013-04-11T11:27:03.183
> 
> 标签：python, python-2.7, wxpython

从 wxPython 开始并收到意外的缩进错误。

```
 File "gui_texteditor_men.py", line 18
helpMenu= wx.Menu()
^
IndentationError: unexpected indent 
```

我检查了我的代码（我使用记事本++）并且所有缩进都很好，不确定我哪里出错了。

```
#!/usr/bin/python

import wx
import os

class MainWindow(wx.Frame):
    def __init__(self,parent,title):
        self.dirname=""

        wx.Frame.__init__(self, parent, title=title, size =(200,-1))   
        self.CreateStatusBar() 

        fileMenu= wx.Menu()
        helpMenu= wx.Menu()
        menuOpen = filemenu.Append(wx.ID_OPEN, "&Open"," Open a file to edit")
        menuAbout= filemenu.Append(wx.ID_ABOUT, "&About"," Information about this program")
        menuExit = filemenu.Append(wx.ID_EXIT,"E&xit"," Terminate the program")

        # Creating the menubar.
        menuBar = wx.MenuBar()
        menuBar.Append(fileMenu,"&File") # Adding the "filemenu" to the MenuBar
        menuBar.Append(helpMenu, "&Help")
        self.SetMenuBar(menuBar)  # Adding the MenuBar to the Frame content.

        #HELP MENU
        menuAbout = helpMenu.Append(wx.ID_ABOUT, "&About", "About this program")  

        #add events
        self.Bind(wx.EVT_MENU, self.OnOpen, menuOpen)
        self.Bind(wx.EVT_MENU, self.OnAbout, menuAbout)
        self.Bind(wx.EVT_MENU, self.OnExit, menuExit)

        self.sizer2 = wx.BoxSizer(wx.HORIZONTAL)
        self.buttons = []
            for i in range(0, 6):
                self.buttons.append(wx.Button(self, -1, "Button &"+str(i)))
                self.sizer2.Add(self.buttons[i], 1, wx.EXPAND)

        # Use some sizers to see layout options
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.control, 1, wx.EXPAND)
        self.sizer.Add(self.sizer2, 0, wx.EXPAND)

        #Layout sizers
        self.SetSizer(self.sizer)
        self.SetAutoLayout(1)
        self.sizer.Fit(self)
        self.Show()

    def OnAbout(self,e):
        dlg = wx.MessageDialog(self, "A small text editor", "My test editor", wx.OK)  #create a dialog (dlg) box to display the message, and ok button
        dlg.ShowModal()  #show the dialog box, modal means cannot do anything on the program until clicks ok or cancel
        dlg.Destroy()  #destroy the dialog box when its not needed

    def OnExit(self,e):
        self.Close(True)  #on menu item select, close the app frame.

    def OnOpen(self,e):
        self.dirname=""  #set directory name to blank
        dlg = wx.FileDialog(self, "Choose a file to open", self.dirname, "", "*.*", wx.OPEN) 
        if dlg.ShowModal() == wx.ID_OK:  #if positive button selected....
            self.filename = dlg.GetFilename() 
            self.dirname = dlg.GetDirectory()  
            f = open(os.path.join(self.dirname, self.filename), 'r') 
            self.control.SetValue(f.read())  #open the file from location as read
            f.close
        dlg.Destroy()

app = wx.App(False)   #creates a new app
frame = MainWindow(None, "Simple Text Editor")  #give the frame a title
app.MainLoop()  #start the apps mainloop which handles app events 
```

检查语法并没有发现任何明显的东西，有人可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:29:45.757

您可能正在混合制表符和空格。不要那样做。

要修复您的文件，请在混合制表符和空格错误模式下运行 Python：

```
python -tt yourscript.py 
```

然后将您的编辑器配置为*仅*使用空格进行缩进，并将任何制表符替换为空格。[Python styleguide](http://www.python.org/dev/peps/pep-0008/)建议仅使用空格进行标识。

# jquery - 一张图片用左右按钮动画

> ID：15947579
> 
> 赞同：0
> 
> 时间：2013-04-11T11:27:15.400
> 
> 标签：jquery, html

当我单击站点中的左右箭头时，图片相应地移动，但是当我开始单击右箭头时，图片被抛出块限制。正常的动画图片是 100 像素，但正如我提到的当我们快速单击箭头时，程序上面的问题不知道像素的位置。我希望您通知或向我解释如何解决此问题，谢谢

html代码：

```
<div class="slider">
    <img src="http://lh5.googleusercontent.com/-k__maLyJIPw/UWV1-WyW9rI/AAAAAAAAAJk/MVfNsKPQLsU/s1539/slider.png" alt="" />
    <a href="" class="left">left</a>
    <a href="" class="right">right</a>
</div> 
```

jQuery代码：

```
var left_animate = '+=100px';
var right_animate = '-=100px';

$('.slider .left').click(function () {

    var img_left_position = $('.slider img').position().left;

    if (img_left_position == 0) {
        return false;
    }
    $('.slider img').stop(true, true).animate({
        left: left_animate
    });
    return false;
});

var imgi = $(".slider img").width();

$('.slider .right').click(function () {

    var img_left_position = $('.slider img').position().left;
    if (imgi + img_left_position == 1600) {

        return false;
    }

    $('.slider img').stop(true, true).animate({
        left: right_animate
    });
    return false;
}); 
```

这是[小提琴](http://jsfiddle.net/5AdTe/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:02:36.060

看到这个： [小提琴](http://jsfiddle.net/7gSwR/1/)

```
var newpos;
$('.slider .left').click(function(){
    var img_left_position = $('.slider img').position().left;
    newpos = img_left_position + 100 < 0 ? img_left_position + 100 : 0;  
    $('.slider img').stop(true,true).animate({
        left: newpos
    });
    return false;
});

var imgi = $(".slider img").width();
$('.slider .right').click(function(){
    var img_left_position = $('.slider img').position().left;
    newpos = img_left_position - 100 > -1600 ? img_left_position - 100 : -1600;
    $('.slider img').stop(true,true).animate({
        left: newpos
    });
    return false;
}); 
```

# c# - 如何执行更新查询？

> ID：15947580
> 
> 赞同：3
> 
> 时间：2013-04-11T11:27:17.847
> 
> 标签：c#, sql, oracle, oraclecommand

我知道我是怎么做到的，其实我之前也做过，但是下面这个更新语句中的下面代码挂起（不抛出异常），我看不出有什么原因。谁能明白为什么？

我认为不重要，但`id`它是主键`Person`并且`belongs`是外键。

在任何 sugest 并发问题之前，我是唯一一个在桌子上工作的人。命令的创建是这样的：

```
public static String upDatePersonBelonging(Int32 personId,Int32 groupId)
{
    String error;
    if ((error = openConnection()) != "")
        return error;

    OracleCommand command = 
      new OracleCommand("UPDATE person SET belongs = :belongs where id = :id ",
                         connection);

    addParameter(command, "belongs", OracleDbType.Int32, groupId);
    addParameter(command, "id", OracleDbType.Int32, personId);

    return runCommand(command);
} 
```

执行是这样的：

```
private static String runCommand(OracleCommand command)
{
    String error = "";

    try
    {
        command.ExecuteNonQuery(); // here it hangs
    }
    catch (Exception e)
    {
        error = e.Message;
    }
    finally
    {
        connection.Close();
    }

    return error;
} 
```

开启功能如下：

```
private static String openConnection()
{
    try
    {
        // create an open the connection          
        connection = new OracleConnection(_connStr);

        // open the connection
        connection.Open();
    }
    catch(Exception e)
    {
        return e.Message;
    }

    return "";
} 
```

添加参数代码：

```
private static void addParameter(OracleCommand command, String name, OracleDbType type, Object value)
{
    command.Parameters.Add(name, type);
    command.Parameters[command.Parameters.Count-1] = new OracleParameter(name, value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:34:28.663

代码似乎是正确的。

我有3个想法：

1.  如果表中有很多行并且您必须等待（您可以使用其他代码/工具进行此查询并比较时间），则更新操作可能会很长。
2.  显示为`addParameter`方法。
3.  也许其他一些进程正在处理这个表并锁定它。

**编辑**

你的`addParameter`方法很奇怪。首先添加参数，然后创建新参数。我会尝试这样的事情（未经测试 - 我不可能）：

```
private static void addParameter(OracleCommand command, String name,
  OracleDbType type, Object value)
{
    OracleParameter p = new OracleParameter(name, value);
    p.DbType = type;
    command.Parameters.Add(p);
} 
```

# ruby-on-rails - 我的 rails s 和其他命令不再起作用

> ID：15947582
> 
> 赞同：0
> 
> 时间：2013-04-11T11:27:26.587
> 
> 标签：ruby-on-rails

我已经离开了一周的假期回来了，并且做了通常的事情来启动本地服务器，这就是我得到的，大多数其他问题都出现了相同的消息。我也在正确的目录中......我在这里迷路了......

```
$ rails s
=> Booting WEBrick
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/keys.rb:51:in
 `block in assert_valid_keys': Unknown key: dependant (ArgumentError)
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/
keys.rb:50:in `each_key'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/
keys.rb:50:in `assert_valid_keys'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/association.rb:33:in `validate_options'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/association.rb:24:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/collection_association.rb:23:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/autosave_associa
tion.rb:139:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/has_many.rb:10:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/collection_association.rb:13:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations.rb:
1198:in `has_many'
        from c:/sites/code/omrails/app/models/user.rb:11:in `<class:User>'
        from c:/sites/code/omrails/app/models/user.rb:1:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:469:in `load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:469:in `block in load_file'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:639:in `new_constants_in'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:468:in `load_file'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:353:in `require_or_load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:502:in `load_missing_constant'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:192:in `block in const_missing'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:190:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:190:in `const_missing'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/meth
ods.rb:230:in `block in constantize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/meth
ods.rb:229:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/meth
ods.rb:229:in `constantize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:554:in `get'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:588:in `constantize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise.rb:267:in `get'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:77:in `to'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:72:in `modules'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:89:in `routes'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:156:in `default_use
d_route'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:66:in `initialize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise.rb:301:in `new'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise.rb:301:in `add_mapping'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/rails/routes.rb:208:in `block
in devise_for'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `devise
_for'
        from c:/sites/code/omrails/config/routes.rb:5:in `block in <top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_se
t.rb:282:in `instance_exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_se
t.rb:282:in `eval_block'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_se
t.rb:260:in `draw'
        from c:/sites/code/omrails/config/routes.rb:1:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:245:in `load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:245:in `block in load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:236:in `load_dependency'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:245:in `load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:40:in `block in load_paths'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:40:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:40:in `load_paths'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:16:in `reload!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:26:in `block in updater'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/file_update_ch
ecker.rb:78:in `call'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/file_update_ch
ecker.rb:78:in `execute'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:27:in `updater'
        from c:in `execute_if_updated'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/finisher.rb:66:i
n `block in <module:Finisher>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `inst
ance_exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'

        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `bloc
k in run_initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each
'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_
initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:136:in `initi
alize!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:i
n `method_missing'
        from c:/sites/code/omrails/config/environment.rb:5:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:251:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:251:in `block in require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:236:in `load_dependency'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:251:in `require'
        from c:/sites/code/omrails/config.ru:3:in `block in <main>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
        from c:/sites/code/omrails/config.ru:in `new'
        from c:/sites/code/omrails/config.ru:in `<main>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/server.rb:46:in `ap
p'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/server.rb:70:in `st
art'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:55:in `block in
<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in `<top (req
uired)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
Eradication@ERADICATION-PC /c/sites/code/omrails (master)
$ rails c
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/keys.rb:51:in
 `block in assert_valid_keys': Unknown key: dependant (ArgumentError)
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/
keys.rb:50:in `each_key'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/core_ext/hash/
keys.rb:50:in `assert_valid_keys'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/association.rb:33:in `validate_options'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/association.rb:24:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/collection_association.rb:23:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/autosave_associa
tion.rb:139:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/has_many.rb:10:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations/bui
lder/collection_association.rb:13:in `build'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/associations.rb:
1198:in `has_many'
        from c:/sites/code/omrails/app/models/user.rb:11:in `<class:User>'
        from c:/sites/code/omrails/app/models/user.rb:1:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:469:in `load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:469:in `block in load_file'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:639:in `new_constants_in'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:468:in `load_file'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:353:in `require_or_load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:502:in `load_missing_constant'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:192:in `block in const_missing'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:190:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:190:in `const_missing'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/meth
ods.rb:230:in `block in constantize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/meth
ods.rb:229:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/inflector/meth
ods.rb:229:in `constantize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:554:in `get'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:588:in `constantize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise.rb:267:in `get'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:77:in `to'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:72:in `modules'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:89:in `routes'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:156:in `default_use
d_route'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/mapping.rb:66:in `initialize'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise.rb:301:in `new'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise.rb:301:in `add_mapping'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/rails/routes.rb:208:in `block
in devise_for'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `devise
_for'
        from c:/sites/code/omrails/config/routes.rb:5:in `block in <top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_se
t.rb:282:in `instance_exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_se
t.rb:282:in `eval_block'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_se
t.rb:260:in `draw'
        from c:/sites/code/omrails/config/routes.rb:1:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:245:in `load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:245:in `block in load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:236:in `load_dependency'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:245:in `load'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:40:in `block in load_paths'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:40:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:40:in `load_paths'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:16:in `reload!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:26:in `block in updater'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/file_update_ch
ecker.rb:78:in `call'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/file_update_ch
ecker.rb:78:in `execute'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/routes_reloader.
rb:27:in `updater'
        from c:in `execute_if_updated'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application/finisher.rb:66:i
n `block in <module:Finisher>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `inst
ance_exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'

        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `bloc
k in run_initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each
'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_
initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:136:in `initi
alize!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:i
n `method_missing'
        from c:/sites/code/omrails/config/environment.rb:5:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:251:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:251:in `block in require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:236:in `load_dependency'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/dependencies.r
b:251:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:103:in `requi
re_environment!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:40:in `<top (req
uired)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

那么可能是什么问题......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:39:25.187

你有一个错字。更改`dependant`为`dependent`的哈希键`has_many`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:33:16.407

您的 rails 命令不再起作用，因为第 11 行的用户模型中存在错误。当您尝试执行 rails 命令时，它首先在 rails 环境中加载。由于您的用户模型中的错误而失败。

如果您发布您的用户模型，我们或许可以帮助您解决该错误。

# ios - 使用 KVO 时，这是否被视为良好的编程习惯

> ID：15947586
> 
> 赞同：2
> 
> 时间：2013-04-11T11:27:43.297
> 
> 标签：ios, objective-c, design-patterns, key-value-observing

我有一个 tableView（这是一个包含大约 11 个字段的表单）、tableViewController 和一个我用来作为表单模型的类的实例。tableView 控制器使用 KVO 对模型的更改进行更新。因此，与其有 11 个 IF ELSE 语句来比较我的观察值中的 keypath 字符串，不如像这样的关键方法 -

```
 - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if([keypath isEqualToSTring:@"name"]){
        [self updateName];
    }
    else if([keypath isEqualToSTring:@"age"]){
        [self updateAge];
    }
    etc,etc,etc...
} 
```

我虽然有这样的东西会更干净，只需遵循更新方法的命名约定

```
// KVO update methods name follow the naming convention "update<keypath>".
// The first character of the keypath should be capitalised.
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSString * firstCharacterOfKeyPath = [keyPath substringToIndex:1];
    NSString * capitalisedFirstCharacterOfKeyPath = [firstCharacterOfKeyPath uppercaseString];
    NSRange firstCharacterRange = NSMakeRange(0, 1);
    NSString * capitalisedKeyPath = [keyPath stringByReplacingCharactersInRange:firstCharacterRange withString:capitalisedFirstCharacterOfKeyPath];
    NSString * updateSelectorString = [[NSString alloc] initWithFormat:@"update%@",capitalisedKeyPath];
    SEL updateSelector = NSSelectorFromString(updateSelectorString);
    [self performSelector:updateSelector];
} 
```

我不确定这是否被认为是好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:40:56.383

我在您的代码中没有看到任何真正的问题，但是我会添加检查是否`self`响应选择器，以防止进一步崩溃：

```
if ([self respondsToSelector:updateSelector])
{
    [self performSelector:updateSelector];
} 
```

但就个人而言，我不太喜欢 KVO 方法。我不想说这很糟糕，但它可能会产生不必要的错误。即，您应该记住正确删除观察者，这在 UITableView 的情况下可能不是微不足道的。

我建议在这里使用委托方法，尽管它看起来有点复杂，但对我来说听起来更可靠。

# web - 是否有像 Cocoa Controls 这样的 Appcelerator Titanium 存储库？

> ID：15947587
> 
> 赞同：0
> 
> 时间：2013-04-11T11:27:47.343
> 
> 标签：web, cross-platform, titanium, appcelerator

我正在寻找适用于 iOS 的[Cocoa Controls等 Appcelerator Titanium 示例应用程序的存储库。](http://www.cocoacontrols.com)

有没有其他类似 Cocoa Controls for Titanium 的网站？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:48:29.297

[88 个基于 Titanium Appcelerator 应用的开源项目](http://maran-emil.de/nodes/88-titanium-appcelerator-apps-based-open-source-projects)

# java - 使用与使用 Eclipse Executed Tomcat 运行的相同构建的 Servlet 运行 Tomcat

> ID：15947599
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:28:30.667
> 
> 标签：java, eclipse, tomcat

我有 Eclipse 和运行动态 Web 项目的 tomcat。

由于我还需要运行其他软件并且我的计算机不是那么强大，所以我想在不运行 eclipse 的情况下启动我的 servlet（主要是 Eclipse 的 tomcat 配置）。

如果我打开安装 tomcat 的文件夹 - 我看不到我通过 eclipse 创建的动态 Web 项目，因此运行此实例不会运行我的项目

如何使用与从 Eclipse 启动 Tomcat 时相同的构建类（等）启动 Tomcat？

**已编辑**

好吧，我投了反对票，但我不明白为什么。我不想将其导出到 WAR。由于这很耗时而且我可能需要更改代码 - 但是当我将 tomcat 调用到我的 REST 项目时，我希望 Eclipse 不运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:32:10.760

**使用部署战争**

您应该执行一个单独的 tomcat 并将您的 web 应用程序部署到 web-app 目录。

那么你就不需要通过eclipse运行tomcat了。

1）通过catalina start运行你的tomcat。2) 在 webapps 中部署你的战争。

**更改 Eclipse 启动 Tomcat 使用的位置**

您可以在 Eclipse 中转到您的服务器视图。您应该更改“服务器位置”中的设置。见[https://stackoverflow.com/a/14105487/1688441](https://stackoverflow.com/a/14105487/1688441)

然后 Eclipse 中的 Tomcat 将使用与 Eclipse 之外的 Tomcat 相同的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:32:51.097

当您使用 Eclipse 时，它​​会创建一个工作目录。当您运行项目时，它会将您的应用程序部署在 tomcat 目录中。

如果您想在 eclipse 之外运行，您可以导出您的 Web 项目并在 tomcat 目录上手动进行部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:47:56.767

1.  将应用程序导出到 .war 文件（在 eclipse 中右键单击 -> 导出 -> 到 .WAR 文件或使用 ant 脚本）
2.  将 .war 文件放入 /webapps
3.  在 /bin 文件夹中运行 startup.bat

# ruby - Rspec 检查方法在一个块内执行

> ID：15947600
> 
> 赞同：1
> 
> 时间：2013-04-11T11:28:33.393
> 
> 标签：ruby, unit-testing, rspec

```
class Foo
  def self.with_context
    # some preprocessing stuff
    yield
    # some postprocessing stuff
  end

  def self.bar
    with_context do
      #some stuff here
    end
  end
end 
```

我如何测试 Foo.bar 方法在 Foo.with_context 中运行？

它应该传递上面的例子。

但应该在下面的示例中失败：

```
class Foo
  def self.with_context
    # some preprocessing stuff
    yield
    # some postprocessing stuff
  end

  def self.bar
    #some stuff here ( not within the with_context block - FATAL)
  end
end 
```

# android - Eclipse 调试设置

> ID：15947603
> 
> 赞同：1
> 
> 时间：2013-04-11T11:28:41.400
> 
> 标签：android

这是一个关于 Eclipse 调试设置的问题。

我正在学习在 Eclipse 中调试

我试图调试链接中指示的值 - [Android Eclipse 调试：获取中间值](https://stackoverflow.com/questions/6004341/android-eclipse-debugging-getting-intermediate-values)

最初 - 在调试窗口中，选项卡 - **“变量”，“断点”**在那里。我试图获得“表达式”选项卡。

但在这两者之间，我选择了一些 - 快速调试'或其他东西。突然间一切都变了。

**如何还原视图 - 这样我将获得“变量”、“断点”选项卡。**

**目前它显示为** ![在此处输入图像描述](https://i.stack.imgur.com/yJZjW.png)

**我想将其切换回**

![在此处输入图像描述](https://i.stack.imgur.com/aGagf.png)

请帮忙

* * *

重置后 - 选项卡 - 变量，断点不会回来......

实际上我想要的是在调试时获取变量的值。

在附加的屏幕截图中（下） - 我想获取 txt1 的值 ![在此处输入图像描述](https://i.stack.imgur.com/lnL74.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:43:49.030

将鼠标放在变量上，调试时您会看到它的值浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:15:59.203

您可以使用 Window -> Reset 透视图，如tenhouse 所说，或者您可以根据需要对其进行自定义，您可以在 Window -> show view 菜单的部分中选择您需要的任何内容。

# javascript - 如何使用 html.beginform 从服务器端获取结果？

> ID：15947613
> 
> 赞同：1
> 
> 时间：2013-04-11T11:28:59.680
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, html.beginform

我需要从服务器端获取结果。但我使用的是 HTml.Begin 表单。我的示例代码如下

```
 @using (Html.BeginForm("actionname", "contollerr", FormMethod.Post, new { enctype = "multipart/form-data" }))
 {

 }

 public ActionResult actionname(IEnumerable<HttpPostedFileBase> files)
 {
  message = "your load in failed";
  return Json(new { success = false, message });   
 } 
```

如何从控制器获取结果数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:14:26.250

你没有使用 ajax，所以这段代码不起作用，你需要这样的东西，验证摘要：我假设生成表单视图的操作和提交方法的操作具有相同的名称。

```
@using (Html.BeginForm("actionname", "contollerr", FormMethod.Post, new { enctype = "multipart/form-data" }))
 {
   @Html.ValidationSummary(true)
 }

 public ActionResult actionname(IEnumerable<HttpPostedFileBase> files)
 {
  message = "your load in failed";
  ModelState.AddModelError(string.Empty, message );
  return View();   
 } 
```

# c# - 正则表达式匹配大写单词，它们之间有一个空格

> ID：15947614
> 
> 赞同：-2
> 
> 时间：2013-04-11T11:29:02.177
> 
> 标签：c#, .net, regex

我需要一个匹配以下内容的正则表达式：

```
"United States"     // match
"United   States"   // not match
"united States"     // not match
"United states"     // not match
"  United States"   // not match
"United States   "  // not match 
```

例如，它将要求每个单词都以大写字母开头，并且单词之间只有一个空格。它还必须拒绝任何尾随或前导的空白字符。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:31:06.537

您的描述很模糊，但作为一般情况，`^[A-Z][a-z]*( [A-Z][a-z]*)*$`应该在没有 IgnoreCase 标志的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:03:12.563

以下类似于@dotNET 的答案，但它考虑了非 ASCII 字符类：

```
^[\p{Lu}\p{Lt}]\w*( [\p{Lu}\p{Lt}]\w*)*$ 
```

我在这里允许中间词非小写字符，因为在 unicode 中，*除了*小写和大写之外，还有更多的字符类。

为了匹配带有严格小写中间字母的单词，

```
^[\p{Lu}\p{Lt}]\p{Ll}*( [\p{Lu}\p{Lt}]\p{Ll}*)*$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:34:46.023

像这样： ？

`^[A-Z][a-z]* [A-Z][a-z]*$`

# lotus-notes - 通过 telnet 访问 Lotus Notes

> ID：15947615
> 
> 赞同：0
> 
> 时间：2013-04-11T11:29:04.933
> 
> 标签：lotus-notes, lotus-domino, lotus

我正在从 Lotus Domino 服务器导出电子邮件以进行备份，我想知道.. 如何通过 telnet 访问服务器并查看所有可用的电子邮件消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:44:37.887

无法使用 telnet 访问电子邮件消息。邮件封装在扩展名为“.nsf”的数据库文件中，只能由 Domino 服务器或 Notes 客户端读取。

当然，您可以在 Lotus Domino Designer 中编写一个界面（作为代理或 Web 服务）或使用 http 和 wget 来获取您的邮件（如果在您的 Domino 上进行了配置），但我敢肯定，这不是，您是什么寻找。

所以简单的答案就是这篇文章的第一句话：不可能……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:48:05.653

如果 Domino 服务器启用了 POP3 或 IMAP，那么您可以使用 telnet 连接到适当的端口（POP3 为 110，IMAP 为 143）并针对给定协议发出正确的命令来验证和检索消息。

请参阅[通过 telnet 访问 IMAP 的](http://support.microsoft.com/kb/189326)[示例和通过 telnet 访问 SMTP 和 POP3 的](http://kb.mediatemple.net/questions/889/Sending+or+viewing+emails+using+telnet)示例。

当然，并不是所有的 Domino 服务器都运行 POP3 或 IMAP 任务，而且我不知道有多少 Domino 管理员会考虑将它们仅用于备份目的。

即便如此，我真的无法想象你为什么要这样做，除了测试目的。我确信您可以使用预先编写的 POP3 和 IMAP 库，而不是在 telnet 级别手动对其进行编码。

坦率地说，访问 Notes 数据有很多更好的方法。例如，用于 C、C++、Java 和 COM 以及 DXL 的 Notes API。C API 甚至包括一组专门为备份和归档程序设计的特殊调用，它们将为您提供所有其他方法都会丢失的逐位保真度。

# matlab - 来自 n 个向量的 k 个向量组合的总和

> ID：15947617
> 
> 赞同：0
> 
> 时间：2013-04-11T11:29:09.967
> 
> 标签：matlab

我想从一组 n 个向量中得到两个向量的总和，例如；

```
A1=[1 2 3] 
A2=[2 3 4] 
A3=[3 4 5]
.
.
.
An=[6 6 9] 
```

我想要 i 和 j 的所有值的 (Ai + Aj) 总和。所以如果 n=10 那么我需要所有组合，即 10*9/2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:47:19.570

这是一种手动计算的方法，假设 n 个向量的集合`A`逐行存储在一个矩阵中：

1.  获取所有可能的索引对（有关可能的答案，请参阅[此问题](https://stackoverflow.com/questions/7446946/how-to-generate-all-pairs-from-two-vectors-in-matlab-using-vectorised-code)）。例如：

    ```
    [idx2, idx1] = find(ones(N, N)); 
    ```

    对应的对由下式给出：

    ```
    pairs = [idx1(:), idx2(:)]; 
    ```

    或者，如果您对重复不感兴趣（*例如*，您不想要总和 A [1] +A [1]等），您可以使用`nchoosek`：

    ```
    pairs = nchoosek(1:N, 2)
    idx1 = pairs(:, 1);
    idx2 = pairs(:, 2); 
    ```

2.  使用每对索引对 中的相应行求和`A`：

    ```
    sums = A(idx1(:), :) + A(idx2(:), :); 
    ```

    [或者，如果您想要每对 A i]和 A [j]的元素总和，您可以`sum(A(idx1(:), :) + A(idx2(:), :), 2)`改为这样做。

### 例子

这是一个示例`N = 3`：

```
A = [1 2 3; 2 3 4; 3 4 5];
N = size(A, 1);
[idx2, idx1] = find(ones(N, N));
pairs = [idx1(:), idx2(:)];
sums = A(idx1(:), :) + A(idx2(:), :); 
```

结果是：

```
pairs =
     1     1
     1     2
     1     3
     2     1
     2     2
     2     3
     3     1
     3     2
     3     3

sums =      
     2     4     6
     3     5     7
     4     6     8
     3     5     7
     4     6     8
     5     7     9
     4     6     8
     5     7     9
     6     8    10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:31:01.990

看看[pdist](http://www.mathworks.com/help/stats/pdist.html)

```
pdist(X) computes the Euclidean distance between pairs of objects in m-by-n data matrix X. Rows of X correspond to observations, and columns correspond to variables. 
```

并定义您自己的自定义指标，这将只是一个将两个向量相加的函数（尽管我有一种感觉`@plus`在您的情况下会起作用，即`pdist(X, @plus)`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:19:46.737

让我们试一试，因为我不确定你是想要一个向量列表作为输出还是一个总和列表，我会给你两个。

```
A1=[1 2 3] 
A2=[2 3 4] 
A3=[3 4 5] 
An=[6 6 9] 
```

首先确保所有东西都放在一个矩阵中（如果需要可以自动化，但我希望你能得到这个矩阵作为输入）

```
A = [A1;A2;A3;An] 
```

现在我们可以使用一个小循环来简单地处理组合：

```
n = size(A,1);
m = size(A,2);
nr_comb = (n*(n-1))/2;
pair = zeros(nr_comb,2);
result = zeros(nr_comb,m);
count = 0;
for i = 1:n-1;
   for j = i+1:n
       count = count +1;
       pair(count,:) = [i j];
       result(count,:) = A(i,:) + A(j,:);
   end
end 
```

现在假设你真的想要向量组合的总和，你可以很容易地得到它们，如下所示：

```
sumresult = sum(result') 
```

添加对称变化或者将向量与其自身组合的情况应该不会太难，但考虑到您期望的组合数量，这应该是您正在寻找的。

# php - 将文本放入 xml 文件中

> ID：15947624
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:29:35.687
> 
> 标签：php, xml

我有简单的 xml 文件（`product.xml`）：-

```
<products>
  <product_id value="1">
    <tab_id value="351">
      <tab_name value="test1"/>
      <dist_activity value="10066"/>
      <dist_region value="4332"/>
    </tab_id>
  </product_id>
  <product_id value="2">
    <tab_id value="352">
      <tab_name value="test2"/>
      <dist_activity value="10067"/>
      <dist_region value="4333"/>
    </tab_id>
  </product_id>
</products> 
```

我有两个文本文件：- 一个包含`dist_activity id`名称，`activity.txt`
第二个包含`dist_region id`名称，`region.txt`
这是 activity.txt；-

```
10066,10067,10068,10069,10070,10071,10072,5 
```

这是 region.txt:-

```
4332,4333,4334,4335,4336,4337,4338,4339 
```

我想在我的文件中创建更多 product_id并在文件中一一`product.xml`设置值。我试试这个：-`dist_activity``dist_region``txt`

```
 <?php 
$xml = simplexml_load_file('product.xml');
$employee = $xml->addChild('product_id value="3"');
$employee->addChild('tab_id value="253"');
$employee->addChild('tab_name value="test3"');
$employee->addchild('dist_activity value="10068"');
$employee->addchild('dist_region value="10069"');
file_put_contents('prod.xml', $xml->asXML());
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:24:06.807

杰克，我看到你的问题有两个问题：

(1)**错误**使用`addChild`

```
<example>
    <lisa kevin="thomas">cathy</lisa>
</example>

lisa = node name, child-node of <example>
cathy = node value
kevin = attribute name (of node lisa)
thomas = attribute value

syntax:
addChild(name, value)
addAttribute(name, value) 
```

[http://www.php.net/manual/en/simplexmlelement.addchild.php](http://www.php.net/manual/en/simplexmlelement.addchild.php)

(2) 如何**从逗号分隔文件** `activity.txt`和其他 txt 文件中提取值没有解决方案......

我建议`file_get_contents`和`explode`

在您尝试过某些东西后，请随时回来提出具体问题，玩得开心！

# html - 这个符号是什么以及它是如何工作的？

> ID：15947626
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:29:36.930
> 
> 标签：html, character-encoding

我偶然发现了一个标题中有这个符号 () 的网站（见这个标题，它也在那里）。它也被黑客新闻拾取并显示为字符。我想知道它是什么以及它是如何工作的？

编辑：我附上了截图 ![在此处输入图像描述](https://i.stack.imgur.com/5wMCA.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T11:39:59.120

这是 Unicode 字符[U+1F63B SMILING CAT FACE WITH HEART-SHAPED EYES](http://codepoints.net/U+1F63B)。它是一种所谓的[表情符号](http://en.wikipedia.org/wiki/Emoji)，在许多移动设备上，它被彩色图形所取代。但归根结底，它只是一个简单的单一角色。您可以像这样更明确地将其放置在 HTML 中：

```
<title>&#x1F63B;</title> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:45:37.510

关于问题的“它是如何工作的”部分，在标签指定的 HTML 上下文中，答案是：非常差。可能只有以下字体包含它：Quivira、Segoe UI Symbol（新版本）、Symbola 和 DejaVu Sans 字体（最新版本）。

这意味着，为了让您的访问者有一个公平的机会真正看到该字符，您需要使用可下载的字体（网络字体），即包含它的少数免费字体之一。它们是相当大的字体，因此与仅使用小图像相比，这将是一种沉重的方式。但是如果你需要在文本中使用大量这样的字符，那么这种方法是可行的。

否则在 HTML 中使用该字符并没有什么特别之处，但是如果您使用 JavaScript 对包含它的字符串进行操作，则需要考虑到这是一个平面 1 字符。这意味着占用两个代码单元，即两个 JavaScript 字符。

# java - 在表单登录 Glassfish 上禁用重定向到上次访问的资源

> ID：15947628
> 
> 赞同：4
> 
> 时间：2013-04-11T11:29:42.023
> 
> 标签：java, http, redirect, glassfish, http-status-code-415

我将重写我之前的问题。

Glassfish 在表单登录后重定向到最后访问的资源，我该如何关闭它？

我们的问题是我们在 FF 和 IE 中得到 415，因为如果我有 JSESSION cookie，Glassfish 将重定向到我尝试访问的最后一个资源，但不会从 (x-form-urlencoded) 切换内容类型。

伪示例（请求是浏览器的 XMLHttpRequest）：

```
GET /secure/resouce1 (json) -> Response "you're not logged in."
GET /login.xhtml
POST /j_secure (x-form-urlencoded) -> New location /secure/resource1 (x-form-urlencoded)
GET /secure/resource1 (x-form-urlencoded) <- HTTP ERROR 415 content type not JSON. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:06:47.897

您可能需要编写一个[过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)来检查和捕捉这种情况。我喜欢[这个教程](http://www.microsofttranslator.com/bv.aspx?from=de&to=en&a=http://www.jsptutorial.org/content/filter)（希望翻译成英文是可以理解的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:28:12.143

在我看来，对于 RESTful 服务，最好使用基于 SSL 的 Basic 或 Digest 身份验证。其他选项包括将凭据作为有效负载的一部分，或者创建一个专用的登录服务，该服务接受凭据并返回一个令牌。[基于表单的身份验证不太适合 RESTful 服务的原因](https://stackoverflow.com/questions/7099087/why-is-form-based-authentication-not-considered-restful)有很多：它需要一个会话，它不使用现有的 HTTP 授权等等。
如果您需要使用 AJAX 调用 RESTful 服务，那么使用 cookie 进行身份验证可能是一个有效的解决方案。它们应该只影响用户是否可以拨打电话，而不影响服务器如何响应。

如果您想继续为您的应用程序使用基于表单的身份验证，我建议添加一个额外的 JAAS 身份验证提供程序来处理 RESTful 服务身份验证。[你可以在这里](http://docs.oracle.com/cd/E19798-01/821-1752/gizel/index.html)阅读更多关于它的信息。

另一个应该比 JAAS 更容易的选择是使用[Spring Security](http://www.springsource.org/spring-security)或[Apache Shiro](http://shiro.apache.org/)而不是基于容器的身份验证。 [这](http://blog.solidcraft.eu/2011/03/spring-security-by-example-set-up-and.html)是使用 Spring Security 配置基于表单的身份验证的示例。这篇文章展示了一个如何使用 Spring Security[保护 RESTful 服务的示例。](http://java.dzone.com/articles/securing-restful-web-service)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T01:24:34.160

在您的登录页面

重置 JSESSIONID cookie 以防止重定向最后一页

// login_form.jsp

Cookie jsess = new Cookie("JSESSIONID", null);

jsess.setMaxAge(0);

jsess.setPath(pageContext.getServletContext().getContextPath());

response.addCookie(jsess);

# android - ClassCastException

> ID：15947630
> 
> 赞同：0
> 
> 时间：2013-04-11T11:29:46.577
> 
> 标签：android

我合并了两个项目并得到以下错误：

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.game4/com.firstandroidapp.Hackbook}: java.lang.ClassCastException: android.widget.TextView 
```

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (APP_ID == null) {
        Util.showAlert(this, "Warning", "Facebook Applicaton ID must be "
                + "specified before running this example: see FbAPIs.java");
        return;
    }

    setContentView(R.layout.main);
    mHandler = new Handler();

    mText = (TextView) Hackbook.this.findViewById(R.id.txt);
    mUserPic = (ImageView) Hackbook.this.findViewById(R.id.user_pic);

    // Create the Facebook Object using the app id.
    Utility.mFacebook = new Facebook(APP_ID);
    // Instantiate the asynrunner object for asynchronous api calls.
    Utility.mAsyncRunner = new AsyncFacebookRunner(Utility.mFacebook);

    mLoginButton = (LoginButton) findViewById(R.id.login);

    // restore session if one exists
    SessionStore.restore(Utility.mFacebook, this);
    SessionEvents.addAuthListener(new FbAPIsAuthListener());
    SessionEvents.addLogoutListener(new FbAPIsLogoutListener());

    /*
     * Source Tag: login_tag
     */
    mLoginButton.init(this, AUTHORIZE_ACTIVITY_RESULT_CODE, Utility.mFacebook, permissions);

    if (Utility.mFacebook.isSessionValid()) {
        requestUserData();
    }

    list = (ListView) findViewById(R.id.main_list);

    list.setOnItemClickListener(this);
    list.setAdapter(new ArrayAdapter<String>(this, R.layout.main_list_item, main_items));
} 
```

这是logcat错误

```
03-29 18:35:35.617: E/AndroidRuntime(411): FATAL EXCEPTION: main
03-29 18:35:35.617: E/AndroidRuntime(411): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.game4/com.firstandroidapp.Hackbook}: java.lang.ClassCastException: android.widget.TextView
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.os.Looper.loop(Looper.java:123)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-29 18:35:35.617: E/AndroidRuntime(411):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 18:35:35.617: E/AndroidRuntime(411):  at java.lang.reflect.Method.invoke(Method.java:507)
03-29 18:35:35.617: E/AndroidRuntime(411):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-29 18:35:35.617: E/AndroidRuntime(411):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-29 18:35:35.617: E/AndroidRuntime(411):  at dalvik.system.NativeStart.main(Native Method)
03-29 18:35:35.617: E/AndroidRuntime(411): Caused by: java.lang.ClassCastException: android.widget.TextView
03-29 18:35:35.617: E/AndroidRuntime(411):  at com.firstandroidapp.Hackbook.onCreate(Hackbook.java:95)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 18:35:35.617: E/AndroidRuntime(411):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-29 18:35:35.617: E/AndroidRuntime(411):  ... 11 more
03-29 18:35:37.376: I/Process(411): Sending signal. PID: 411 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:37:39.193

我敢打赌，这一行中的某些东西可能不是 TextView：`R.id.txt`

```
 mText = (TextView) Hackbook.this.findViewById(R.id.txt); 
```

检查你的R文件是否有可以用作txt下的TextView的东西，如果有，重新编译重启看看是否有帮助。

# c++ - 重载 = 运算符

> ID：15947631
> 
> 赞同：1
> 
> 时间：2013-04-11T11:29:48.377
> 
> 标签：c++, class, header, operator-overloading, implementation

我正在`operator=`为我制作的课程重载。我为两门课做了这个，其中一门工作得很好，而且它们似乎都做得正确。重载的运算符之一不工作。该程序不会产生任何错误，它只是简单地返回类的空白版本。如果有人对可能是什么问题有任何想法，将不胜感激。

.h 文件

```
Patient operator=(const Patient &right); 
```

.cpp 文件

```
 //Overloaded functions
Patient Patient::operator=(const Patient &right)
{
    Patient temp;

    temp.patientName = right.patientName;
    temp.age = right.age;
    temp.code = right.code;
    temp.problem = right.problem;
    temp.doctorName = right.doctorName;
    temp.roomNum = right.roomNum;
    temp.isWaiting = right.isWaiting;
    temp.isComplete = right.isComplete;

    return temp;
} 
```

它正在用于的程序的一部分。我知道随机输出消息，我试图找到程序中出现问题的位置。将其缩小到`pat=p;`声明。

```
void Room::setPat(Patient p)
{   
    cout << "Test" << endl;
    cout << p.getName() << pat.getName() << "end";

    pat = p;
    cout << p.getName() << pat.getName() << "end";
    cout << "End Test" << endl;
    patUsed = true;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:49:51.700

从您提供的代码来看，无需编写赋值运算符。编译器生成一个就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:32:56.130

您不需要“tmp”。只需删除它。并返回一个参考。

```
Patient& Patient::operator=(const Patient &right)
{
patientName = right.patientName;
age = right.age;
code = right.code;
problem = right.problem;
doctorName = right.doctorName;
roomNum = right.roomNum;
isWaiting = right.isWaiting;
isComplete = right.isComplete;
return *this;
} 
```

您的原始代码不修改 的左操作数`=`，这不是预期的结果。

如果您的`Patient`类**没有**这些其他成员，则此`=`() 定义是不必要的，您可以省略它。编译器将为您生成它，每个成员的“简单”分配，如 *@sellibitze*所指出的。仅当您需要其他内容时才定义 onw `=`()，例如深拷贝。我希望你不要在这里复制任何指针，并且每个成员的类都有一个“正确的” `=`（）自我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:34:24.697

1）您不需要在赋值运算符中创建任何临时。

2) 赋值运算符应返回对自身的引用。

[这里](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr326.htm)的例子。

```
 //Overloaded functions
    Patient& Patient::operator=(const Patient &right)
    {
    patientName = right.patientName;
    age = right.age;
    code = right.code;
    problem = right.problem;
    doctorName = right.doctorName;
    roomNum = right.roomNum;
    isWaiting = right.isWaiting;
    isComplete = right.isComplete;
    return *this;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:34:40.000

问题是您没有设置当前对象的任何值，而只是创建一个新对象并返回它。

```
Patient& Patient::operator=(const Patient &right)
{
    patientName = right.patientName;
    age = right.age;
    code = right.code;
    problem = right.problem;
    doctorName = right.doctorName;
    roomNum = right.roomNum;
    isWaiting = right.isWaiting;
    isComplete = right.isComplete;
    return *this;
} 
```

请注意，局部变量已被删除，而您正在分配类变量和对当前类的引用。

# html - IE7 中剪切的 HTML 超链接按钮

> ID：15947636
> 
> 赞同：0
> 
> 时间：2013-04-11T11:30:05.740
> 
> 标签：html, css

我想创建一个如下图所示的 div

![在此处输入图像描述](https://i.stack.imgur.com/GsHFi.png)

这个 div 我做得很好，它会在所有浏览器中呈现，但问题是当我尝试在 IE7 上呈现时，它不能正常工作。
下图显示了我的问题：
![在此处输入图像描述](https://i.stack.imgur.com/JwZ8z.png)

现在您可以看到`See More`按钮在 IE7 中被剪裁，当我移除阴影时，它会呈现得非常好，但我需要
下面 div 的阴影是我的 CSS 代码：

```
<style type="text/css">
        #ShadowSection
        {
            float: right;
            width: 250px;
            display: inline-block;
            background-color: green;
            margin-top: 30px;
            position: relative;
            max-height: 420px;
        }
        .ShadowSection-Heading
        {
            font-family: Caecilia LT Std;
            font-size: 24px;
            color: white;
            font-weight:bolder;
        }
        #btnSeeMoreContainer
        {
            width: 100%;
            height: 40px;
            position: absolute;
            z-index: 250;
            top: 320px;
            right: 0px;
            text-align: center;
        }
        #btnSeeMoreStockProd
        {
            background-position: center;
            width: 127px;
            height: 40px;
            text-align: center;
            display: block;
            text-decoration: none;
            background-color: Red;
            background-position: center center;
        }
        .btnSeeMoreText
        {
            font-family: TradeGothic;
            font-style: oblique;
            text-transform: uppercase;
            color: #ffffff;
            font-size: 15px;
            height: 40px;
            line-height: 40px;
        }
        .shadow
        {
            -moz-box-shadow: 3px 3px 4px rgba(0,0,0,0.4);
            -webkit-box-shadow: 3px 3px 4px rgba(0,0,0,0.4);
            box-shadow: 3px 3px 4px rgba(0,0,0,0.4); /* For IE 8 */
            -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=rgba(0,0,0,0.4))"; /* For IE 5.5 - 7 */
            filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=rgba(0,0,0,0.4));
        }
    </style> 
```

下面是我的 HTML 代码：

```
<body style="text-align: center;">
    <div id="ShadowSection" class="shadow">
        <div style="margin: 10px 20px 30px 20px; min-height: 300px; word-wrap: break-word;
            word-break: break-all;">
            <p>
                <span class="ShadowSection-Heading" title="Demo1">Demo1</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo2">Demo2</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo3">Demo3</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo4">Demo4</span>
                <br />
            </p>
        </div>
        <table id="btnSeeMoreContainer" cellpadding="0" cellspacing="0">
            <tr>
                <td align="center">
                    <a href="#" id="btnSeeMoreStockProd" title="See More"><span class="btnSeeMoreText">
                        See More</span> </a>
                </td>
            </tr>
        </table>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:47:58.800

IE7 可能会很痛苦。它甚至不容易测试问题。

看起来您没有此部分的结束 div：

```
<div id="ShadowSection" class="shadow"> 
```

所以应该是：

```
<body style="text-align: center;">
    <div id="ShadowSection" class="shadow">
        <div style="margin: 10px 20px 30px 20px; min-height: 300px; word-wrap: break-word;
            word-break: break-all;">
            <p>
                <span class="ShadowSection-Heading" title="Demo1">Demo1</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo2">Demo2</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo3">Demo3</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo4">Demo4</span>
                <br />
            </p>
        </div>
        <table id="btnSeeMoreContainer" cellpadding="0" cellspacing="0">
            <tr>
                <td align="center">
                    <a href="#" id="btnSeeMoreStockProd" title="See More"><span class="btnSeeMoreText">
                        See More</span> </a>
                </td>
            </tr>
        </table>
</div>
</body> 
```

我已经更新了你的代码，请试试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">

        #ShadowSection
        {
            width: 250px;
            display: inline-block;
            background-color: green;
            margin-top: 30px;
            position: relative;
            max-height: 420px;
        }
        .ShadowSection-Heading
        {
            font-family: Caecilia LT Std;
            font-size: 24px;
            color: white;
            font-weight:bolder;
        }
        #btnSeeMoreContainer
        {
            width: 127px;
            height: 40px;
            position: absolute;
            z-index: 250;
            bottom: -20px;
            left:60px;
            text-align: center;
        }
        #btnSeeMoreStockProd
        {
            width: 127px;
            height: 40px;
            text-align: center;
            display: block;
            text-decoration: none;
            background-color: Red;
        }
        .btnSeeMoreText
        {
            font-family: TradeGothic;
            font-style: oblique;
            text-transform: uppercase;
            color: #ffffff;
            font-size: 15px;
            height: 40px;
            line-height: 40px;
        }
        .shadow
        {
            -moz-box-shadow: 3px 3px 4px rgba(0,0,0,0.4);
            -webkit-box-shadow: 3px 3px 4px rgba(0,0,0,0.4);
            box-shadow: 3px 3px 4px rgba(0,0,0,0.4); /* For IE 8 */
            -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=rgba(0,0,0,0.4))"; /* For IE 5.5 - 7 */
            filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color=rgba(0,0,0,0.4));
        }
        </style>
    </head>
    <body>
        <div id="ShadowSection" class="shadow">
        <div style="margin: 10px 20px 30px 20px; min-height: 300px; word-wrap: break-word; word-break: break-all;">
            <p>
                <span class="ShadowSection-Heading" title="Demo1">Demo1</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo2">Demo2</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo3">Demo3</span>
                <br />
                <br />
                <br />
                <span class="ShadowSection-Heading" title="Demo4">Demo4</span>
                <br />
            </p>
        </div>
        <div id="btnSeeMoreContainer">

                    <a href="#" id="btnSeeMoreStockProd" title="See More"><span class="btnSeeMoreText">
                        See More</span> </a>
         </div>               
        </div>
    </body>
</html> 
```

我不认为它喜欢你放的桌子。

# raku - perl6 方法声明中的 plus 是什么意思？

> ID：15947639
> 
> 赞同：5
> 
> 时间：2013-04-11T11:30:10.733
> 
> 标签：raku

Perl6 方法声明中的 plus 是什么意思？

这是[规范中的一个示例](http://www.perl6.org/archive/doc/design/apo/A12.html)

```
submethod BUILD (+$tail, +@legs, *%extraargs) {
    $.tail = $tail;
    @:legs = @legs; 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T11:37:39.317

您的“规范”链接指向历史文档，并且语法早已从 Perl 6 中消失。我不确定它曾经做什么，也许是“至少一个参数”，类似于正则`+`表达式中的量词。

有关最新的规范，请阅读[http://perlcabal.org/syn/S06.html](http://perlcabal.org/syn/S06.html)，其中包含有关签名和子例程的所有信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-25T19:10:54.857

**2019 更新**请参阅**可变参数位置解构部分；`+@foo``*@foo`**在我**对**[SO 问题“函数/子程序的可变参数数量”的回答中](https://stackoverflow.com/a/54713872/1077672)。

* * *

2015 年，Larry Wall 引入了[`+`参数前缀](https://docs.raku.org/language/functions#Slurpy_conventions)，它是四个参数前缀 ( `*`, `**`, `+`, `|`) 之一，表示[slurpy (variadic) 参数](https://docs.raku.org/type/Signature#Slurpy_(A.K.A._variadic)_parameters)。他将它添加到 Rakudo 编译器中，添加了一些测试，[在 irc 频道上对其进行了简短的非正式描述](https://colabti.org/irclogger/irclogger_log/perl6?date=2015-09-17#l664)，并在相关语言设计文档中添加[了一个部分。](http://design.raku.org/S06.html#One-argument_slurpy_binding)

* * *

原始问题中引用的示例取自十多年前及时编写并冻结的非正式文件的档案。那时，`+`参数前缀表示[命名参数，与位置参数形成对比](https://docs.raku.org/type/Signature#Positional_vs._named_arguments)。现在我们使用`:`它，因此：

```
submethod BUILD (:$tail, :@legs, *%extraargs) {
    $.tail = $tail;
    @.legs = @legs;
} 
```

# asp.net - c#代码在.net webservice中使用lotus notes发送邮件

> ID：15947642
> 
> 赞同：0
> 
> 时间：2013-04-11T11:30:22.080
> 
> 标签：asp.net, lotus-notes, lotus-domino

我目前正在开发一种使用 Lotus Notes 从 asp.net C# 代码发送电子邮件的功能。任何人都可以告诉我对此的初始要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:37:11.363

您可以使用 Domino COM 类。您应该知道，如果您的代码作为 64 位应用程序运行，那么IBM Lotus Software[不支持](http://www-01.ibm.com/support/docview.wss?uid=swg21454291)，但它可以用于大多数用途。你会在 StackOverflow 上找到关于这个主题的几个问题，例如，[这里](https://stackoverflow.com/questions/1558640/net-and-lotus-notes-interop/1558661#1558661)和[这里](https://stackoverflow.com/questions/2416308/is-a-comexception-of-0x80040154-always-class-not-registered)。

# http - Nginx 将 Http 重定向到 Https - 这里有什么问题？

> ID：15947646
> 
> 赞同：4
> 
> 时间：2013-04-11T11:30:39.973
> 
> 标签：http, redirect, https, nginx

我有一个 Nginx 服务器，它应该将所有请求从[http://www.domain.com](http://www.domain.com)和[http://domain.com](http://domain.com)和[https://domain.com](https://domain.com)重定向到[https://www.domain.com](https://www.domain.com)

因此，无论有无 www 和有无 ssl，我都希望用户始终访问[https://www.domain.com](https://www.domain.com)。

在阅读了 nginx 文档并在 google 上进行了研究之后，这是我当前的 nginx 配置：

```
server {
  listen 80;
  server_name .domain.com;
  return 301 https://www.domain.com$request_uri;
}

server {
  listen                       443 ssl;
  server_name                  .domain.com;
  ssl_certificate              /etc/ssl/private/[pem file];
  ssl_certificate_key          /etc/ssl/private/[key file];
  ssl_session_timeout          5m;
  ssl_protocols                SSLv3 TLSv1;
  ssl_ciphers                  HIGH:!ADH:!MD5;
  ssl_prefer_server_ciphers    on;
  keepalive_timeout            70;
  ###
  ### Deny known crawlers.
  ###
  if ($is_crawler) {
    return 403;
  }
  location / {
    proxy_pass                 http://nginx_http;
    proxy_redirect             off;
    proxy_set_header           Host              $host;
    proxy_set_header           X-Real-IP         $remote_addr;
    proxy_set_header           X-Forwarded-By    $server_addr:$server_port;
    proxy_set_header           X-Forwarded-For   $proxy_add_x_forwarded_for;
    proxy_set_header           X-Local-Proxy     $scheme;
    proxy_set_header           X-Forwarded-Proto $scheme;
    proxy_pass_header          Set-Cookie;
    proxy_pass_header          Cookie;
    proxy_pass_header          X-Accel-Expires;
    proxy_pass_header          X-Accel-Redirect;
    proxy_pass_header          X-This-Proto;
    proxy_connect_timeout      300;
    proxy_send_timeout         300;
    proxy_read_timeout         300;
    proxy_buffer_size          4k;
    proxy_buffers              4 32k;
    proxy_busy_buffers_size    64k;
    proxy_temp_file_write_size 64k;
    access_log                 off;
    log_not_found              off;
  }
 50 } 
```

发生的情况是对[http://domain.com](http://domain.com)的请求被正确重定向到[https://www.domain.com](https://www.domain.com)但对[http://www.domain.com](http://www.domain.com)的请求*没有*被重定向（并且该网站是在没有 ssl 的情况下交付的）。

更新：

由于这是 BOA (Barracuda Octopus Aegir) 设置的服务器的一部分，因此有几个配置文件正在使用中。这也是加载的 nginx.conf：

```
# Aegir web server main configuration file

#######################################################
###  nginx.conf main
#######################################################

 ## FastCGI params
  fastcgi_param  SCRIPT_FILENAME     $document_root$fastcgi_script_name;
  fastcgi_param  QUERY_STRING        $query_string;
  fastcgi_param  REQUEST_METHOD      $request_method;
  fastcgi_param  CONTENT_TYPE        $content_type;
  fastcgi_param  CONTENT_LENGTH      $content_length;
  fastcgi_param  SCRIPT_NAME         $fastcgi_script_name;
  fastcgi_param  REQUEST_URI         $request_uri;
  fastcgi_param  DOCUMENT_URI        $document_uri;
  fastcgi_param  DOCUMENT_ROOT       $document_root;
  fastcgi_param  SERVER_PROTOCOL     $server_protocol;
  fastcgi_param  GATEWAY_INTERFACE   CGI/1.1;
  fastcgi_param  SERVER_SOFTWARE     ApacheSolaris/$nginx_version;
  fastcgi_param  REMOTE_ADDR         $remote_addr;
  fastcgi_param  REMOTE_PORT         $remote_port;
  fastcgi_param  SERVER_ADDR         $server_addr;
  fastcgi_param  SERVER_PORT         $server_port;
  fastcgi_param  SERVER_NAME         $server_name;
  fastcgi_param  USER_DEVICE         $device;
  fastcgi_param  GEOIP_COUNTRY_CODE  $geoip_country_code;
  fastcgi_param  GEOIP_COUNTRY_CODE3 $geoip_country_code3;
  fastcgi_param  GEOIP_COUNTRY_NAME  $geoip_country_name;
  fastcgi_param  REDIRECT_STATUS     200;
  fastcgi_index  index.php;

 ## Default index files
  index         index.php index.html;

 ## Size Limits
  client_body_buffer_size        64k;
  client_header_buffer_size      32k;
  client_max_body_size          100m;
  large_client_header_buffers 32 32k;
  connection_pool_size           256;
  request_pool_size               4k;
  server_names_hash_bucket_size  512;
  server_names_hash_max_size    8192;
  types_hash_bucket_size         512;
  map_hash_bucket_size           192;
  fastcgi_buffer_size           128k;
  fastcgi_buffers             256 4k;
  fastcgi_busy_buffers_size     256k;
  fastcgi_temp_file_write_size  256k;

 ## Timeouts
  client_body_timeout             60;
  client_header_timeout           60;
  send_timeout                    60;
  lingering_time                  30;
  lingering_timeout                5;
  fastcgi_connect_timeout         60;
  fastcgi_send_timeout           300;
  fastcgi_read_timeout           300;

 ## Open File Performance
  open_file_cache max=8000 inactive=30s;
  open_file_cache_valid          60s;
  open_file_cache_min_uses         3;
  open_file_cache_errors          on;

 ## FastCGI Caching
  fastcgi_cache_path /var/lib/nginx/speed
                     levels=2:2:2
                     keys_zone=speed:10m
                     inactive=15m
                     max_size=3g;

 ## General Options
  ignore_invalid_headers          on;
  limit_conn_zone $binary_remote_addr zone=gulag:10m;
  recursive_error_pages           on;
  reset_timedout_connection       on;
  fastcgi_intercept_errors        on;
  server_tokens                  off;
  fastcgi_hide_header         'Link';
  fastcgi_hide_header  'X-Generator';
  fastcgi_hide_header 'X-Powered-By';
  fastcgi_hide_header 'X-Drupal-Cache';

 ## TCP options moved to /etc/nginx/nginx.conf

 ## SSL performance
  ssl_session_cache   shared:SSL:10m;
  ssl_session_timeout            10m;

 ## GeoIP support
  geoip_country /usr/share/GeoIP/GeoIP.dat;

 ## Compression
  gzip_buffers      16 8k;
  gzip_comp_level   5;
  gzip_http_version 1.0;
  gzip_min_length   10;
  gzip_types        text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;
  gzip_vary         on;
  gzip_proxied      any;
  add_header Vary "Accept-Encoding";
  gzip_static       on;
  upload_progress uploads 1m;

 ## Log Format
  log_format        main '"$proxy_add_x_forwarded_for" $host [$time_local] '
                         '"$request" $status $body_bytes_sent '
                         '$request_length $bytes_sent "$http_referer" '
                         '"$http_user_agent" $request_time "$gzip_ratio"';

  client_body_temp_path  /var/lib/nginx/body 1 2;
  access_log             /var/log/nginx/access.log main;
  error_log              /var/log/nginx/error.log crit;

# Extra configuration from modules:
#######################################################
###  nginx default maps
#######################################################

###
### Support separate Boost and Speed Booster caches for various mobile devices.
###
map $http_user_agent $device {
  default                                                                normal;
  ~*Nokia|BlackBerry.+MIDP|240x|320x|Palm|NetFront|Symbian|SonyEricsson  mobile-other;
  ~*iPhone|iPod|Android|BlackBerry.+AppleWebKit                          mobile-smart;
  ~*iPad|Tablet                                                          mobile-tablet;
}

###
### Set a cache_uid variable for authenticated users (by @brianmercer and @perusio, fixed by @omega8cc).
###
map $http_cookie $cache_uid {
  default  '';
  ~SESS[[:alnum:]]+=(?<session_id>[[:graph:]]+)  $session_id;
}

###
### Live switch of $key_uri for Speed Booster cache depending on $args.
###
map $request_uri $key_uri {
  default                                                                            $request_uri;
  ~(?<no_args_uri>[[:graph:]]+)\?(.*)(utm_|__utm|_campaign|gclid|source=|adv=|req=)  $no_args_uri;
}

###
### Set cache expiration depending on the Drupal core version.
###
map $sent_http_x_purge_level $will_expire_in {
  default   on-demand;
  ~*5|none  5m;
}

###
### Deny crawlers.
###
map $http_user_agent $is_crawler {
  default  '';
  ~*HTTrack|BrokenLinkCheck|2009042316.*Firefox.*3\.0\.10|MJ12|HTMLParser|libwww|PECL|Automatic|Click|SiteBot|BuzzTrack|Sistrix|Offline|Screaming|Nutch|Mireo|SWEB|Morfeus|GSLFbot  is_crawler;
}

###
### Deny all known bots on some URIs.
###
map $http_user_agent $is_bot {
  default  '';
  ~*crawl|goog|yahoo|yandex|spider|bot|tracker|click|parser  is_bot;
}

###
### Deny almost all crawlers under high load.
###
map $http_user_agent $deny_on_high_load {
  default  '';
  ~*crawl|goog|yahoo|yandex|baidu|bing|spider|tracker|click|parser  deny_on_high_load;
}

###
### Deny listed requests for security reasons.
###
map $args $is_denied {
  default  '';
  ~*delete.+from|insert.+into|select.+from|union.+select|onload|\.php.+src|system\(.+|document\.cookie|\;|\.\.  is_denied;
}

#######################################################
###  nginx default server
#######################################################

server {
  limit_conn   gulag 32; # like mod_evasive - this allows max 32 simultaneous connections from one IP address
  listen       *:80;
  server_name  _;
  location / {
     root   /var/www/nginx-default;
     index  index.html index.htm;
  }
}

#######################################################
###  nginx virtual domains
#######################################################

# virtual hosts
include /var/aegir/config/server_master/nginx/pre.d/*;
include /var/aegir/config/server_master/nginx/platform.d/*;
include /var/aegir/config/server_master/nginx/vhost.d/*;
include /var/aegir/config/server_master/nginx/post.d/*; 
```

最后包含的目录中定义了一些服务器，它们监听特定的子域（由 aegir 设置）。我认为这些不会影响我们这里。

更新 2：

感谢 daviswfl 和 Melvyn 的输入。现在变得有趣了：

```
server {
  listen 80;
  server_name www.domain.com;
  return 301 https://www.domain.com$request_uri;
} 
```

当我创建一个只应将[http://www.domain.com](http://www.domain.com)重定向到[https://www.domain.com](https://www.domain.com)的服务器时，请求会被重定向到 https://.. 然后陷入重定向循环。

如果我出于某种原因理解此权利，则应侦听端口 80 的服务器也会侦听 https 请求并*再次*尝试重定向请求。

你知道为什么吗？

任何想法可能是什么问题或为什么它会这样做？

非常感谢，马丁

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T01:40:49.013

所以，我这样做是相反的。前几天我确实遇到了这个问题。有一件事是发现顺序很重要，我真的应该将“重写”规则更改为“返回 301 ...”，但我很懒，还没有这样做，因为我有点着急.

这是我的配置片段

```
#
# Rewrite any http requests for domain.com to https.
#
server {
   listen       80;
   server_name domain.com;
   return 301 https://domain.com$request_uri;
}
#
# Rewrite any http requests for www.domain.com to domain.com
# using SSL
#
server {
   listen 80;
   server_name www.domain.com;
   rewrite ^/(.*) https://domain.com/$1 permanent;
}

#
# The domain.com website
#
server {
   listen       443 ssl;
    server_name  domain.com;

    ssl_certificate /etc/nginx/conf.d/[crt];
    ssl_certificate_key /etc/nginx/conf.d/[key];
    ... Bunches of more stuff goes here. 
}

#
# Rewrite any https requests for www.domain.com to domain.com
# Note that this must be after the domain.com declaration.
#
server {
   listen 443;
   server_name www.domain.com;
   rewrite ^/(.*) https://domain.com/$1 permanent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-26T20:42:16.797

我发现最好的方法如下：

```
server {
        listen 80;
        server_name example.com www.example.com;
        return 301 https://$server_name$request_uri;
}

server {
    listen       443 ssl;
    server_name  examle.com www.example.com;

    ssl_certificate /etc/nginx/conf.d/[crt];
    ssl_certificate_key /etc/nginx/conf.d/[key];
    ... 
} 
```

通过这种方式，您可以使用`$server_name`而不是硬编码值。

# php - 将 php webservice json 响应发送到 javascript

> ID：15947650
> 
> 赞同：0
> 
> 时间：2013-04-11T11:30:50.890
> 
> 标签：php, javascript, forms, drop-down-menu

我想将 json 中的 php web 服务响应调到从 php web 服务调用获得的 javascript 这是我的代码

```
<?php
session_start();
$url='webservice url';
    $ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($useridofuser));
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
    $response=  curl_exec($ch);
    //echo('\n'."Server response : \n \n".$response);
    curl_close($ch);
    //parsing the json response from server
    $jsonde="$response";
    $_SESSION['json']=$jsonde;
 $org = array();
 $loc = array();
 $bui = array();
 $items = json_decode($response);
 foreach( $items as $each ){
 $loc[]=$each->location[0]->name;
 $bui[]=$each->location[0]->building[0];
 $org[]=$each->name;
 }
 ?> 
```

在这里，我在 $org 中获取组织名称，$bui 包含建筑物，$loc 包含位置我在此代码下方有一个表格

```
 <sript>
    var json = "<?php echo $response ?>";
    alert(json);
 </script>
 <form>
 <label for="orgname">Organisation Name</label>
                    <select style="width: 305px;text-align:left ;"  name="category_id" id="category_id">
                    <option value="">Select</option>
                    <?php foreach($org as $key=>$val){?>
                    <option value="<?php echo $val; ?>"><?php echo $val;?></option>
 <?php
 }
 ?>                      </select>

                    <p>
        <label name="location">Location</label>

                     <select style="width: 305px;" name="category_id1" id="category_id1" onchange="ajax(this);">
                     <option value="">Select</option>
                     </select>
                    </p>
                    <p>
        <label for="building">Building</label>

                    <select style="width: 305px" name="category_id2" id="category_id2">
                    <option value="">Select</option>
                    </select> 
```

在组织中，我想比较我从组合框中为组织选择的值与从 php Web 服务返回的 json 数组并返回包含该特定组织的对象，真的我的问题是如何将 json 数组存储到一个 javascript 变量或一些东西。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:33:54.480

为什么不使用您检索到的 json 内容设置一个 javascript 变量，如下所示：

```
<?php 
    $response = "YOUR JSON RESPONSE";
?>
<script type="text/javascript">
    var json = "<?php echo json_encode(json_decode($response)) ?>";
</script> 
```

确保您`$response`以正确的方式转义以防止损坏您的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:42:44.053

这有帮助吗？

```
<!doctype html>
<html>
<head>
<script>
function func1()
{
    try
    {
        addedVariable = addedVariable;
        alert('can only add the script once');
    }

    catch(ex)
    {
        var sc = newEl('script');
        sc.appendChild( newTxt('var addedVariable = 100;' ) );
        document.head.appendChild(sc);
        alert('script element with variable added');
    }
}

function func2()
{
    try
    {
        alert("value of 'addedVariable' = " + addedVariable);
    }
    catch(ex)
    {
        alert("hit the first btn, then try again");
    }
}
</script>
</head>
<body>
    <button id='btn1' onclick='func1();'>click Me 1st</button>
    <button id='btn2' onclick='func2();'>click me 2nd</button>
</body>
</html> 
```

# xaml - 无法使用 Telerik.UI.Xaml.Controls.Grid 命名空间添加

> ID：15947651
> 
> 赞同：3
> 
> 时间：2013-04-11T11:30:51.803
> 
> 标签：xaml, windows-8, visual-studio-2012, telerik, telerik-grid

我正在尝试在我的项目中使用 Telerik RadDataGrid。首先，我刚刚复制了给出“Telerik Controls Example”应用程序的代码。但是，当我尝试添加命名空间“使用 Telerik.UI.Xaml.Controls.Grid”时，我收到错误消息“命名空间“使用：Telerik.UI.Xaml.Controls.Grid”中不存在名称“RadDataGrid”。

到目前为止，我已经能够轻松使用 RadCustomHubTile，但 RadDataGrid 给我带来了问题。RadDataGrid 也不会出现在工具箱中。

我在参考部分添加了适用于 Windows 8 的 Rad Controls。

我正在使用 C#、xaml、visual studio 2012 并尝试构建 Windows 8 应用程序。

任何帮助，将不胜感激。谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T20:07:36.310

对于那些不知道答案的人来说。

只需添加此命名空间：`xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"`

很快你就可以使用了`<telerik:RadGridView />`！！！！

# oracle - oracle中如何对序列号进行分组？

> ID：15947669
> 
> 赞同：6
> 
> 时间：2013-04-11T11:31:18.743
> 
> 标签：oracle

我有一个用逗号分隔的年份字符串。

例如`2000,2001,2002,2005,2006,2007 and 2010`.

我想对连续的数字进行分组。

我的输出应该是`2000-2003,2005-2007 and 2010`. 在 Oracle 存储过程中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:50:54.833

*免责声明 - 我不建议“按原样”使用此解决方案，但它可以提供想法，而且编写它很有趣*

我假设您在表格中有一个包含 csv 字符串的列。

如果您使用的是 oracle 11gR2，那么您可以使用递归 CTE——
[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/8aab3/2)

```
with t as 
(
  select replace(replace(v, ' and ', ','), ' ','') v
  from strings
  ),
rcte(text, token, res) as
(
  select v, regexp_substr(v, '^\d*[^,]'), regexp_substr(v, '^\d*[^,]') ||'-'
  from t
  union all
  select regexp_replace(text, '^\d*,', ''), 
         regexp_substr(text, '^\d*[^,]'),
         case when regexp_substr(text, '^\d*[^,]') = token then
                   res
              when regexp_substr(text, '^\d*[^,]') = token+1 then  
                   regexp_replace(res, '-\d*$', '-'||(token+1))
              else rtrim(res, '-') || ',' || regexp_substr(text, '^\d*[^,]') || '-' 
         end
  from rcte
  where text <> token
  )
select rtrim(res, '-') from rcte
where text = regexp_substr(rtrim(res, '-'), '\d*$'); 
```

（这也可以在没有正则表达式的情况下完成）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:17:18.430

可以通过使用分析函数使用 SQL 来完成。

**更新 1：**使用解析器功能更新的答案，在以前的版本中遗漏了。

**更新 2: **添加了最终的字符串组合

```
with p as ( -- Parameter string
  select replace('2000,2001,2002,2005,2006,2007 and 2010',' and ',',') s from dual
),
ex as ( -- Parse string to sequence
  select  
    to_number(
      substr(
        s,
        decode( level, 1, 1, instr(s,',',1,level-1)+1 ),
        decode( instr(s,',',1,level), 0, length(s)+1, instr(s,',',1,level) )
          -                                         
          decode( level, 1, 1, instr(s,',',1,level-1)+1 )
      )
    ) as y
  from p  
  connect by instr(s,',',1,level-1) > 0
),
period_set as (
  select -- Make final string for each interval start
    y,
    lag(y) over (order by y) prior_y,
    max(y) over (partition by 1) max_y,
    y || (case when is_end > 1 then null else '-' ||end_y end) as interval_string
  from 
    ( -- For each start find interval end 
      select 
        y, 
        is_start, 
        is_end, 
        lead(y) over (order by y) end_y
      from 
        ( -- Find if previous/next value differs more then by one. 
          -- If so, mark as start/end
          select 
            y, 
            nvl(y - prev_y, 100)  is_start,
            nvl(next_y - y, 100)  is_end
          from 
            ( -- Find previous/next value in sequence
              select 
                y,  
                lag(y) over (order by y) prev_y,
                lead(y) over (order by y) next_y
              from ex
            )
        )    
      where
        is_start > 1 or is_end > 1
    )
  where is_start > 1
)
select 
  replace(
    substr(
      sys_connect_by_path(
        decode(y,max_y,'m', null) || interval_string,
        ','
      ),2
    ),
    ',m', 
    ' and '
  ) result_str
from 
  period_set
where
  connect_by_isleaf = 1
start with 
  prior_y is null
connect by 
  prior y = prior_y 
```

SQL Fiddle 可以在[这里](http://www.sqlfiddle.com/#!4/d41d8/9782)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:00:02.270

假设您的数据将以逗号分隔并输入，您可以提及以逗号分隔的任何年份。

```
DECLARE
   v_str VARCHAR(100) := '&n';
   v_instr NUMBER;
   v_instr1 NUMBER;
   v_g VARCHAR(50);
   v_F VARCHAR(50);
   v_OUT VARCHAR(50);
   v_OUT1 VARCHAR(50);
   v_TEMP VARCHAR(50);
   v_TMP VARCHAR(50) := ' ';
   v_cnt NUMBER :=0;
   V_FLAG NUMBER :=1;
BEGIN
   FOR i IN 1..Length(v_str)-Length(REPLACE(v_str,',',''))+1 LOOP
          IF i = 1 THEN
               v_g := SubStr(v_str,1,InStr(v_str,',',1,i)-1);
               V_F := V_G;
          ELSE
               v_instr := InStr(v_str,',',1,i-1);
               v_instr1 := InStr(v_str,',',1,i);
               IF(v_cnt+1 <= Length(v_str)-Length(REPLACE(v_str,',',''))) then 
                    v_g := SubStr(v_str,v_instr+1,v_instr1-v_instr-1);
                    IF V_FLAG = 0 THEN V_F := V_G; V_FLAG :=1; END IF;
               ELSE
                    v_g := SubStr(v_str,v_instr+1);
                    IF V_FLAG = 0 THEN V_F := V_G; V_FLAG :=1; END IF;
               END IF;
          END IF;
          v_cnt := v_cnt+1;
          --IF(I>1) THEN
             IF(V_TEMP+1 = V_G) THEN
                IF(V_OUT IS not NULL) THEN
                    V_OUT := V_OUT||'-'||V_G;
                ELSE
                    V_OUT := V_F||'-'||V_G;
                END IF;
             ELSE
                V_OUT1 := SubStr(V_OUT,1,5)||SubStr(V_OUT,-4);
                V_OUT := NULL;
                v_out := v_g;
                V_FLAG := 0;
             END IF;
          --END IF; 
          V_TEMP := To_Number(V_G);
          --Dbms_Output.put_line(v_g);
          IF(v_tmp <> v_out1) THEN
          SELECT Decode(instr(v_OUT1,'-'),0,subStr(V_OUT1,1,4),v_out1) INTO v_out1 FROM dual;
          Dbms_Output.put_line('Year span : '||v_OUT1);
          v_tmp := v_out1;
          END IF;
   END LOOP;
   SELECT Decode(Length(v_OUT),4,v_out,subStr(V_OUT,1,5)||SubStr(V_OUT,-4)) INTO v_out1 FROM dual;
   Dbms_Output.put_line('Year span : '||v_out1);
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T06:12:46.920

使用数学

```
select min(seq) as range_from , max(seq) range_to , count(*) as cnt 
from   sometable 
group by ceil(seq/3) * 3 
```

这部分 `ceil(seq/3) * 3`是将数字四舍五入到最接近的三的倍数。如果您想要 5 的范围，请使用`ceil(seq/5) * 5`. 干杯！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T11:33:43.220

***一个很好的问题！*** 请检查我的逻辑...

```
with test as 
(
    select '2000,2002,2003,2004,2006,2007' str from dual
)  
,test1 as (
    select 
      split1, 
      lead(split1, 1, null) over (order by split1 asc) lead_no, 
      level1
    from 
    (
          select to_number(regexp_substr (str, '[^,]+', 1, rownum)) split1, level as level1
          from test b
          connect by level <= length (regexp_replace (str, '[^,]+'))  + 1
      )x
)
--select * from test1
,test2 (split1, lead_no, level1, op, op1) as(
  select 
    split1, 
    lead_no, 
    level1, 
    (case when split1+1=lead_no then to_char(split1) else NULL end), 
     (case when split1+1=lead_no then NULL else to_char(split1) end)
     from test1 
  where level1=1

  union all

  select 
    a.split1, 
    a.lead_no, 
    b.level1+1, 
    (case when a.split1+1=a.lead_no and to_char(b.op) is not null then to_char(b.op) 
      when a.split1+1=a.lead_no and to_char(b.op) is null then to_char(a.split1) 
      else null end), 

    (case when  (a.split1+1<>a.lead_no and to_char(b.op)<>to_char(a.split1)) OR 
            (a.lead_no is null and to_char(b.op) is not null) then to_char(b.op) ||'-'||to_char(a.split1)
      when a.lead_no is null then to_char(a.split1)
      else null end)

    from test1 a inner join test2 b on a.level1 = b.level1+1
  ) 
  select op1 from test2
  where op1 is not null 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T10:42:45.490

```
18:42:15 SYSTEM@dwal> l
  1  with p as (
  2    select replace('2000,2001,2002,2005,2006,2007 and 2010',' and ',',') s, '[0-9]{4}' r from dual
  3  ), ex as (
  4    select regexp_substr(s,r, 1, level) as y
  5      from p
  6    connect by level <= regexp_count(s, r)
  7  ), grp as (
  8    select connect_by_root(y) s, y
  9      from ( select e1.y y, e2.y p from ex e1, ex e2 where e1.y - 1 = e2.y(+) )
 10   connect by prior y = p
 11     start with p is null
 12  ), agg as (
 13  select listagg(s||decode(max(y), s, null, '-'||max(y)), ',') within group (order by s) str
 14    from grp group by s
 15  )
 16* select regexp_replace(str, ',', ' and ', 1, regexp_count(str, ',')) result from agg
18:42:16 SYSTEM@dwal> /

RESULT
------------------------------
2000-2002,2005-2007 and 2010

Elapsed: 00:00:00.02 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-11T12:35:02.347

您必须使用[cursor](http://www.techonthenet.com/oracle/loops/cursor_for.php)来循环这些年，并像这样进行一些思考：

```
CREATE OR REPLACE Function concatYears
    RETURN varchar;
DECLARE
 oldYear number;
 concat varchar(300);
 newGroup boolean;
 cursor cur1 is
   SELECT year
   FROM dates
   ORDER BY year ASC;

BEGIN
 oldYear:=0;
 newGroup:=true;
 concat := '';

  FOR row in c1
     IF oldYear == 0 THEN
         oldYear := row.year;
     END IF;
     IF newGroup == true THEN
        concat := concat || CAST(oldYear AS varchar(4));
        newGroup:= false;
     ELSE 
         IF row.year > oldYear+1 THEN
             concat:= concat || '-' || CAST(oldYear AS varchar(4)) || ' , ';
             newGroup:=true;
         END IF;
     END IF;
     oldYear:=row.year;
 END LOOP;
 RETURN concat;
END; 
```

# plugins - 我可以将按钮添加到idea的插件（maven插件）的一部分吗？

> ID：15947675
> 
> 赞同：1
> 
> 时间：2013-04-11T11:31:37.347
> 
> 标签：plugins, intellij-idea, maven-plugin-development

我的目标是创建一个插件，该插件将使用一些自定义设置构建 Maven 项目。例如，我可以选择几个目标并按我的按钮以使用我的设置构建 maven 项目吗？

![我可以在这里添加按钮吗？](https://i.stack.imgur.com/FEroT.png) .

如果不可能，我可以将此操作添加到鼠标右键上下文菜单中，还是应该实现自己的 maven 插件？也许还有其他一些更漂亮的方式可以通过行动或以某种方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:57:41.147

是的。您需要添加对 Maven 插件的依赖项并将您的操作添加到 Maven.NavigatorActionsToolbar 操作组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:55:02.360

您可以创建一个 Maven 运行配置并在需要执行自定义构建时运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:57:46.487

请参阅我对另一篇关于如何创建启动自定义 Maven 目标的运行配置的回答：[使用 IntelliJ IDEA 运行 mvn 命令](https://stackoverflow.com/questions/15492461/running-mvn-command-using-intellij-idea/15500344#15500344)

# ios - shouldReceiveTouch 未调用

> ID：15947676
> 
> 赞同：2
> 
> 时间：2013-04-11T11:31:39.103
> 
> 标签：ios, uigesturerecognizer

我在网上看到了很多关于它的问题，尤其是在 StackOverflow 上。我测试了许多给定的答案，但就我而言，没有任何效果。

我的班级实现了协议`UIGestureRecognizerDelegate`：

```
@interface CDMapViewController : CDViewController <UIGestureRecognizerDelegate> 
```

以下方法是从我的类的@implentation 中的xcode 自动完成编写的

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
shouldReceiveTouch:(UITouch *)touch {
    NSLog(@"not called");
    return NO;
} 
```

我在第一个方法中正确地初始化了 UIGestureRecognizer，它正确地调用了第二个、第三个和第四个方法：

```
- (void)initGestureOnMap {
    UIGestureRecognizer *gestureRecognizer = [[UIGestureRecognizer alloc] init];
    gestureRecognizer.delegate = self;
    [self.view addGestureRecognizer:gestureRecognizer];
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event  {
    [super touchesBegan:touches withEvent:event];
    gesture_dragging = NO;
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesMoved:touches withEvent:event];
    gesture_dragging = YES;
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];
    if (gesture_dragging || [touches count] != 1) return;
        /* bla bla bla */
} 
```

...它不记录-不调用...为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:34:37.010

您需要调用方法`super`的实现`touches`。

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event  {
    [super touchesBegan:touches withEvent:event];
    gesture_dragging = NO;
}

... and so on. 
```

这些方法需要在您的*视图*上实现，而不是您的视图控制器。

选择你想要的手势。就其本身而言，`UIGestureRecognizer`并没有多大作用，所以选择一个喜欢`UITapGestureRecognizer`. 接下来，使用指定的初始化程序实现您的手势识别器。

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myMethod:)]; 
```

最后，实施`myMethod:`。

```
-(void)myMethod:(UITapGestureRecognizer *)recognizer
{
    // Whatever this does.
} 
```

# android - 将英文文本翻译成阿拉伯语

> ID：15947677
> 
> 赞同：0
> 
> 时间：2013-04-11T11:31:40.233
> 
> 标签：android

我想将从 JSON 响应中获得的英文字符串转换为阿拉伯字符串。（不能将另一个`@String`用于阿拉伯语，因为字符串是动态的，直接来自网络服务）

我不想使用 Google 翻译 API，因为它是付费的，并且限制为 2M 字符/天。

我只需要知道是否有任何可用的 API 或任何我可以用来满足我的要求的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:36:29.233

请参阅此链接[BING API](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)

```
string uri = "http://api.microsofttranslator.com/v2/Http.svc/Translate?appId=" + appId + "&text=" + tobetranslated + "&from=" + fromLang + "&to=" + toLang; 
```

然后有一个网络请求，您将获得所需的输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:43:11.773

试试这个 Bing API [http://www.microsoft.com/web/post/using-the-free-bing-translation-apis](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)

目前这是免费的。

# crash - Jahia/JVM/Tomcat 崩溃

> ID：15947678
> 
> 赞同：0
> 
> 时间：2013-04-11T11:31:41.590
> 
> 标签：crash, jvm

我们正在使用以下配置：

CATALINA_OPTS="$CATALINA_OPTS -Xms6144m -Xmx6144m -Dcertain.config=/data02/certain/config -Djava.awt.headless=true -XX:MaxPermSize=1024m -server -Dhibernate.jdbc.use_streams_for_binary=true -verbose:gc -XX :+HeapDumpOnOutOfMemoryError -XX:ParallelGCThreads=4 -XX:LargePageSizeInBytes=512m -XX:+UseParallelOldGC -XX:+UseParallelGC -XX:+UseCompressedOops -XX:+AggressiveHeap -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps "

JDK 1.6 版本 22

操作系统：Red Hat Enterprise Linux Server 第 6 版。 CPU：共 4 个（每个 cpu 1 个内核，每个内核 1 个线程） Java HotSpot(TM) 64 位服务器 VM (17.1-b03) for linux-amd64 JRE (1.6.0_22- b04)

我们不断得到：

#  # Java 运行时环境检测到一个致命错误：</h1>

#  # java.lang.OutOfMemoryError: 为 Chunk::new 请求了 17179869200 字节。交换空间不足？

 ## 内部错误（allocation.cpp:215），pid=5845，tid=139708177794816 </p>

#   错误：Chunk::new </h1>

#  # JRE 版本：6.0_22-b04 #Java VM：Java HotSpot(TM) 64 位服务器 VM（17.1-b03 混合模式 linux-amd64 压缩 oops）</h1>

# javascript - 尝试使用 requirejs 实例化 Marionette 应用程序时出现“对象不是函数”错误

> ID：15947681
> 
> 赞同：2
> 
> 时间：2013-04-11T11:31:45.953
> 
> 标签：javascript, backbone.js, requirejs, marionette

这是我第一次尝试使用 Marionette。我正在尝试将 Marionette 应用程序实例化为 requirejs 模块。我一直在关注 Marionette.js wiki 上的 Using Marionette with Require js 文章：-

[https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs](https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs)

我想我有我所有的垫片、依赖项和文件，因为我能够在同一个地方实例化视图、模型等而不会出错，但我无法弄清楚我的应用程序的问题。任何帮助或指导将不胜感激！

这是我的 index.html：-

```
<!DOCTYPE html>
<html>
<head>
    <title>Marionette Structure and Require AMD Proto</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>
<div id="nav">

</div>
<div id="mainContent">

</div>
<script language="javascript">
    // convenience function, because console.log throws errors and crashes IE
    // this way you don't need to all logs to test in IE
    function trace(msg){
        try{
            console.log(msg);
        }catch(e){
            // suppressed error
        }
    }
</script>
<script src="js/lib/require.js" data-main="app.js"></script>
</body>
</html> 
```

这是我的 app.js：-

```
require.config({
    paths : {
        backbone : 'js/lib/backbone',
        underscore : 'js/lib/underscore',
        jquery : 'js/lib/jquery',
        marionette : 'js/lib/backbone.marionette'
    },
    shim : {
        jquery : {
            exports : 'jQuery'
        },
        underscore : {
            exports : '_'
        },
        backbone : {
            deps : ['jquery', 'underscore'],
            exports : 'Backbone'
        },
        marionette : {
            deps : ['jquery', 'underscore', 'backbone'],
            exports : 'Marionette'
        }
    }
})

require(
    ["jquery",
        "underscore",
        "backbone",
        "marionette",
        "js/shell/shellapp"
    ],
    function($, _, Backbone, Marionette, ShellApp) {
        $(function() {
           new ShellApp();
            trace("ShellApp: "+ShellApp);
        });
    }
); 
```

最后是我的 shellapp.js:-

```
define( ["marionette"], function (Marionette) {

    // set up the app instance
    var ShellApp = new Marionette.Application();

    // configuration, setting up regions, etc ...
    ShellApp.addRegions({
        nav: '#nav',
        main: '#mainContent'
    });
    ShellApp.on('initialize:after', function(){
        trace("initialize:after");
    });
    // export the app from this module
    return ShellApp;
}); 
```

把它们放在一起，我在 app.js 第 42 行得到“Uncaught TypeError: object is not a function”

非常感谢能走到这一步的任何人！

山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:52:06.023

我的回答太长了，无法发表评论！

您正在导出构造的对象，而不是构造函数本身：

```
var ShellApp = new Marionette.Application()
...
return ShellApp; 
```

这正是导入的内容，因此您无需创建另一个`new`。

首先，我将重命名`ShellApp`为`shellApp`表示一个实例，而不是一个构造函数（这是一种常见的命名约定）。我认为在教程中他们打破了这个约定是很误导的：

```
MyApp = new Backbone.Marionette.Application(); 
```

（假设我在这里是正确的）。

我现在假设您只是`Marionette.Application`在应用程序的整个生命周期内传递了这个单个实例。

在本教程中，它[**显示**](https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs#defining-your-application-as-a-module)*了新版本* 的导出`Marionette.Application`（与您所做的相同），但没有显示导入时实际使用的内容。导入对象后，您可以访问它的属性，例如：

```
shellApp.addInitializer(function(options){
    // stuff
}); 
```

更多[**在这里**](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.md)。

# jquery - 如何在 asp.net 中使用 jquery 数组，并从 asp.net 读取数组的值

> ID：15947688
> 
> 赞同：1
> 
> 时间：2013-04-11T11:32:04.027
> 
> 标签：jquery, asp.net

我在 jquery 中有一个数组，我在运行时将值添加到这个数组。之后我将从 asp.net 页面访问这个数组，即：jquery：

```
var marker=[];
marker[0]='world';
marker[1]='sky'; 
```

ASP.NET：

```
string []values=new string[];
values[0]=marker[0];
values[1]=marker[1]; 
```

我该怎么做，有什么方法可以从 asp.net 页面访问 jquery veriables

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:34:57.147

您可以将这些值存储在 a 中`hidden field`并在后面的 asp.net 代码中读取它们

这里的例子：

[在后面的代码中获取 javascript 中设置的值](https://stackoverflow.com/questions/1409030/to-get-value-set-in-javascript-in-code-behind)

[将值从代码隐藏传递到 Javascript](https://stackoverflow.com/questions/5656328/passing-value-from-code-behind-to-javascript)

**编辑**

您可以将此数组传递给`WebMethod`使用 ajax 的帖子

[JQuery AJAX 发布到 asp.net webmethod 永远不会被调用](https://stackoverflow.com/questions/3529953/jquery-ajax-post-to-asp-net-webmethod-never-getting-called)

# jquery - jQuery cookie 设置问题

> ID：15947695
> 
> 赞同：0
> 
> 时间：2013-04-11T11:32:18.290
> 
> 标签：jquery, cookies

我正在尝试使用 jQuery 设置 cookie，但它根本没有显示 cookie。有人可以解释一下我在哪里做错了吗？[http://jsfiddle.net/RVFX4/1/](http://jsfiddle.net/RVFX4/1/)

我在 index.html 中有这个设置：

```
 $(document).ready(function() {

        $.cookie("test", 1, {
           expires : 10,           

           path    : '/',          

           domain  : 'jquery.com',  

           secure  : true  

        });

    }); 
```

我应该得到一个名为 test 的 cookie，其值为 1 对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:48:05.707

如果您阅读小提琴中的评论：

```
path    : '/',          //The value of the path attribute of the cookie 
                        //(default: path of page that created the cookie).

domain  : 'jquery.com',  //The value of the domain attribute of the cookie
                        //(default: domain of page that created the cookie).

secure  : true          //If set to true the secure attribute of the cookie
                        //will be set and the cookie transmission will
                        //require a secure protocol (defaults to false). 
```

显然域不是 jquery.com，路径也不是根（因为实际代码的页面托管在子域中）。最后，协议是纯 http，因此`secure: true`要求阻止创建 cookie。

如果您删除这些行，它可以在 jsfiddle 中工作，并且如果在其他域中正确给出了参数，它应该可以工作。除非有特定的理由，否则您根本不需要提供它们。

# android - Android 以太网使用 dhcp 配置 IP

> ID：15947700
> 
> 赞同：3
> 
> 时间：2013-04-11T11:32:38.847
> 
> 标签：android, shell, process, ethernet, dhcp

我有一个带有以太网接口的安卓盒子。android SDK 中没有用于配置以太网的 Java 类。作为最后的手段，我使用 shell 命令来配置以太网。任何人都可以指导我使用哪个 shell 命令来配置以太网吗？示例命令将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:45:35.290

Android 有 ifconfig，就像 Linux 一样。不幸的是，这只是改变了接口配置，并没有告诉应用程序接口已经出现，所以他们可能不知道有任何互联网访问，所以它可能没有多大帮助。恐怕我帮不上忙。

作为参考，您可以像这样使用 ifconfig：

```
ifconfig <interface> up <ip address> mask <netmask> gw <gateway> 
```

`<interface>`可能是`eth0`，其他字段是相应的 IP 地址。您可以通过 catting 查看哪些接口可用`/proc/net/dev`。

老实说，您*不需*要这样做 --- Android（或者至少是现代 Android，您没有说明您使用的是哪个版本）通过“设置”->“无线和网络”对以太网配置提供了适当的支持。有什么理由不适合你吗？

# javascript - 如何使用 j-query 从轻量级富文本编辑器中获取内容

> ID：15947711
> 
> 赞同：0
> 
> 时间：2013-04-11T11:33:19.633
> 
> 标签：javascript, jquery, rich-text-editor

我正在使用轻量级富文本编辑器输入内容。输入后，我尝试使用 j-query 获取输入的内容，以便我将其用于其他目的。但它没有得到。请帮助我。

HTML 表单：

```
<form>
    <p>
        <textarea name="ta1" id="ta1" class="rte2"></textarea>
    </p>
<a id="various1" href="#inline1" style="text-decoration:blink"><input type="button" id="expand" name="expand" value="Expand"></a>
    <p></p>
    <div id="inline1" style="width:460px;height:320px;overflow:auto;">
    <p>
        <textarea name="ta2" id="ta2" class="rte1"></textarea>
    </p>    
    </div>
</form> 
```

J-查询脚本：

```
<script type="text/javascript">
$(document).ready(function() {

    $("#expand").click(function () {
    var text = $("#ta1").text();
    alert(text); });

    //$("#various1").click(function(){
    //$("#inline1").hide(); 
    //}); 
```

富文本编辑器工具栏 j-query 代码

```
 var arr = $('.rte1').rte({
        css: ['default.css'],
        width: 450,
        height: 200,
        controls_rte: rte_toolbar,
        controls_html: html_toolbar,
    });

    $('.rte2').rte({
        css: ['default.css'],
        width: 450,
        height: 200,
        controls_rte: rte_toolbar,
        controls_html: html_toolbar
    }, arr);
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:39:11.450

尝试使用textareas 是输入类型，在 jQuery 案例中`$("#ta1").val();`使用 and 检索和设置文本区域的内容`.value``.val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:40:29.623

用这个

```
 var text = $("#ta1").text(); 
```

看到我用`.val()`而不是`.text()`

**演示在这里**

[http://jsfiddle.net/9YD5Q/](http://jsfiddle.net/9YD5Q/)

# powershell - dotless.compiler 无效的 RGB 颜色字符串

> ID：15947715
> 
> 赞同：2
> 
> 时间：2013-04-11T11:33:39.127
> 
> 标签：powershell, less, dotless

嗨，我正在使用 Powershell 和 dotless.Compiler.exe 版本 1.3.1.0 来编译我的 less 文件。尝试使用背景颜色使用变量编译 less 时出现错误。所以我有价值

```
@varBodyBg: #669900 repeat-x left top scroll url(images/img.png);

@varBodyBgString:"@{varBodyBg}";
@varBodyBgColor:color(@varBodyBgString); 
```

但是我在尝试使用函数颜色时遇到了这个错误：

```
Invalid RGB color string '669900 repeat-x left top scroll url(images/img.png)' on line 5 in file 'MainFile.less':
[4]: @varBodyBgString:"@{varBodyBg}";
[5]: @varBodyBgColor:color(@varBodyBgString); 
     ----------------^ 
```

或者如果

```
@varBodyBg: rgb(0,0,0); 
```

给出错误

```
Invalid RGB color string 'black' on line 4 in file 'MainFile.less':
[3]: @varBodyBgString:"@{varBodyBg}";
[4]: @varBodyBgColor:color(@varBodyBgString); 
   ----------------^ 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T12:36:05.783

我相信这是因为 DotLess 将颜色值编译为最短的版本。因此`black`，字符数少于`rgb(0,0,0)`但两者具有相同的含义。编译`#FFFFFF`为`white`.

# c# - CKEditor html内容生命周期：asp net mvc案例

> ID：15947716
> 
> 赞同：0
> 
> 时间：2013-04-11T11:33:40.193
> 
> 标签：c#, asp.net-mvc, ckeditor, html-encode

我的内容将被编辑多次。所以我需要将结果 html 存储到数据库并在需要时再次加载它。这是我当前的启动实现：

```
@using (@Html.BeginForm("EditArticle", "Admin", new { id =  ViewData["id"] }))
{
   <div id="editor"> </div>

   <input type="submit" value="save changes" onclick = "setValue()" />

   <input type ="hidden"  id="value" name="html" />
}

<script>
    var editor, html = 'Model.Text';    

    function createEditor() {
        if (editor)
        return;

    var config = { width:"900px"};
    editor = CKEDITOR.appendTo('editor', config,html);
}

function setValue() {
    $("#value").val(editor.getData());
}

createEditor();
</script> 
```

但是我在初始化 html 变量时出错了。那么，任何人都可以展示如何正确编码/解码 html 吗？

**编辑**

这是数据控制器接收的：

```
 html = <p>ARTICLE 3</p>\r\n 
```

像这样的值我存储在数据库中并再次尝试插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:06:54.583

首先，要在语法上修复您的代码，它可能应该是这样的：

```
var editor, html = '@Html.Raw(Model.Text)'; 
```

但是，为什么不处理 JavaScript 中的标记并不得不对其进行转义和取消转义，而是直接将其转储到它应该去的地方，即

```
<textarea name="editor1">@Html.Raw(Model.Text)</textarea>
<script>
    CKEDITOR.replace( 'editor1' );
</script> 
```

然后将该文本区域转换为您的ckEditor？根据他们的基本示例：http: //docs.ckeditor.com/#!/guide/ [dev_framed](http://docs.ckeditor.com/#!/guide/dev_framed)

其次，除此之外，我不确定您的控制器会收到哪些错误，因此您必须发布更多详细信息，以便我在上述内容之外为您提供帮助。

我希望这有帮助。

# opencv - 大小是否有opencv矩阵乘法限制？

> ID：15947719
> 
> 赞同：0
> 
> 时间：2013-04-11T11:33:43.863
> 
> 标签：opencv

我将两个大小为 360x25600 和 25600x360 的大矩阵相乘。发生内存访问冲突错误。

```
a - size of 360x25600
b - size of 25600x360

cv::Mat L_mat;

cv::Multiply(a,b,L_mat); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:14:14.883

`cv::muliply`是逐元素乘法。你想要`operator *`。

# drop-down-menu - 3层li ul菜单

> ID：15947720
> 
> 赞同：0
> 
> 时间：2013-04-11T11:33:46.493
> 
> 标签：drop-down-menu, html-lists, layer

我想创建一个 3 层 li ul 菜单，但 3 层覆盖了第二层。有人可以帮我将 3 层与第二层对齐吗？

我非常感谢您的评论！

最佳，W

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>

<HEAD><title>bla</title>

<style type="text/css">
ul {
font-family : Arial, Verdana;
font-size : 18px;
font-weight: bold;
margin : 0;
padding : 0;
list-style : none;
z-index: -10;
}
ul li {
display : block;
position : relative;
float : left;
}
li ul {
display : none;
position : relative;
}
ul li a {
display : block;
text-decoration : none;
color : #ffffff;
border-top : 0 solid #ffffff;
padding : 6px 25px 6px 25px;
background : #033a96;
margin-left : 0;
white-space : nowrap;
}

ul li a:hover {
background : #9092c7;
}
li:hover ul {
display : block;
position : absolute;
z-index: 10;
}
li:hover li {
float : none;
font-size : 14px;
z-index: 10;
}
li:hover a {
background : #9092c7;
z-index: 10;
}
li:hover li a:hover {
background : #033a96;
z-index: 10;
}

</style>
</head>

<body >

            <TABLE  border=0 align="center" cellPadding=0 cellSpacing=0 valign="top">
              <TBODY valign="top">
              <TR valign="top">

             <TD width="100%" bgcolor="#FFFFFF">

                 <TABLE height=19 valign="top" cellSpacing=0 cellPadding=0 width="100%" border=0>
                 <tr>
                 <td height=35 bgcolor="#033a96" > 
                 <div id="menu_about" style="position: relative; z-index: 10;"> 
                 <ul id="menu">
                    <li ><a class="link" href="index.htm" >Layer 1</a>
                    <ul>
                            <li ><a href="#">Layer 2 blblb</a></li>
                            <li ><a href="#">Layer 2</a></li>
                            <ul >
                                <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
                                <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
                            </ul>
                            <li><a href="#">Layer 2</a></li>
                            <li><a href="#">Layer 2</a></li>
                            <li><a href="#">Layer 2</a></li>
                        </ul>

                    </li>

                    <li><a class="link" href="#about" data-link="second">Layer 1</a>
                        <ul>
                            <li ><a href="#">Layer 2 blblb</a></li>
                            <li ><a href="#">Layer 2</a></li>
                            <ul >
                                <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
                                <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
                            </ul>
                            <li><a href="#">Layer 2</a></li>
                            <li><a href="#">Layer 2</a></li>
                            <li><a href="#">Layer 2</a></li>
                        </ul>
                    </li>

                </div>
                </td> 
                </tr>
                </TABLE>                  

            </TD>
            </TR>
            </TBODY>
            </TABLE>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T23:34:20.120

我非常怀疑您正在使用所见即所得（如 Dreamweaver）来生成您的代码？对此有两点说明：

*   尽量避免内联样式
*   除表格数据外，请勿使用基于表格的布局。使用 div、nav、footer、header 和 side 元素

对于您的解决方案：

1.  删除了所有的 z 索引，它们不是必需的
2.  您忘记将第三级 ul 嵌套在第二级 li 中
3.  尝试在正常状态元素上设置字体大小等属性，而不是悬停（不改变）
4.  我建议命名你的 ul 和 li，或者至少在你的 css 中按逻辑顺序排列它们，因为这很混乱。

**修复导航的最重要部分是我添加的这个 CSS**

```
ul li ul li ul {
margin-left: 100%;
} 
```

它将嵌套的 ul 及其子元素的边距设置为父 div 的宽度。

所以这是你完整的新css：

```
ul {
font-family : Arial, Verdana;
font-size : 18px;
font-weight: bold;
margin : 0;
padding : 0;
list-style : none;
}
ul li {
display : block;
float : left;
}
ul li ul li ul {
margin-left: 100%;
}
li ul {
display : none;
}
ul li a {
display : block;
text-decoration : none;
color : #ffffff;
padding : 6px 25px 6px 25px;
background : #033a96;
white-space : nowrap;
}

ul li a:hover {
background : #9092c7;
}
li:hover ul {
display : block;
position : absolute;
}
li li {
float : none;
font-size : 14px;
}
li:hover a {
background : #9092c7;
}
li:hover li a:hover {
background : #033a96;
} 
```

和你的 html （只有相关部分）：

```
<div id="menu_about" style="position: relative; z-index: 10;">
<ul id="menu">
    <li ><a class="link" href="index.htm" >Layer 1</a>
        <ul>
            <li><a href="#">Layer 2 blblb</a></li>
            <li><a href="#">Layer 2</a></li>
            <li><a href="#">Layer 2</a>
                <ul >
                    <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
                    <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
                </ul>
            </li>
            <li><a href="#">Layer 2</a></li>
            <li><a href="#">Layer 2</a></li>
        </ul>
    </li>
    <li><a class="link" href="#about" data-link="second">Layer 1</a>
        <ul>
        <li ><a href="#">Layer 2 blblb</a></li>
        <li ><a href="#">Layer 2</a>
            <ul >
                <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
                <li ><a href="#">Layer 3 Layer 3 Layer 3 Layer 3 </a></li>
            </ul>
        </li>
        <li><a href="#">Layer 2</a></li>
        <li><a href="#">Layer 2</a></li>
        <li><a href="#">Layer 2</a></li>
        </ul>
    </li>
</ul>
</div> 
```

# asp.net - Ajax 滑块控件显示非数字值

> ID：15947722
> 
> 赞同：2
> 
> 时间：2013-04-11T11:33:48.597
> 
> 标签：asp.net, ajaxcontroltoolkit

我正在尝试使用 AjaxControlTookit 中的[Slider](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Slider/Slider.aspx)控件，但我的问题是我找不到在绑定到滑块的标签内显示非数字值的方法。我的代码如下..

**代码**：

```
<asp:TextBox ID="txtSlider" runat="server" style="display:none;/>
 <ajaxToolkit:SliderExtender ID="slider1" runat="server" TargetControlID="txtSlider" Steps="3"  BoundControlID="lblSliderValue" Minimum="1" Maximum="3" Orientation="Vertical"></ajaxToolkit:SliderExtender>
 <asp:Label ID="lblSliderValue" runat="server" /> 
```

唯一向我显示了 0,1 和 2的`lblSliderValue`值，但是我需要低、中和高。到目前为止，我还没有找到任何方法来指定这些。我尝试添加文本框`OnTextChanged="txtSlider_textChanged"` `AutoPostBack="true"`并设置`lblSliderValue`后面的代码，但没有成功。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:30:57.313

此类功能未在滑块中实现。因此，让我们对其进行一些自定义。首先，您需要下载工具包源。我们将修改两个文件（我将为这些文件提供指向 codeplex 的链接，以便您在解决方案中轻松找到它们）：[SliderExtender.cs](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/a2a6dc6854e0cfb4d11ffa81ad2c2383dfe35086#Server/AjaxControlToolkit/Slider/SliderExtender.cs)和[SliderBehavior_resource.pre.js](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/a2a6dc6854e0cfb4d11ffa81ad2c2383dfe35086#Server/AjaxControlToolkit/Slider/SliderBehavior_resource.pre.js)

`SliderExtender`使用此属性标记类：`[ParseChildren(typeof(ListItem), ChildrenAsProperties = true)]`

```
private List<ListItem> items = new List<ListItem>();
[PersistenceMode(PersistenceMode.InnerProperty)]
[ExtenderControlProperty]
[ClientPropertyName("items")]
public List<ListItem> Items
{
    get { return items; }
}

static SliderExtender()
{
    if (!ScriptObjectBuilder.CustomConverters.ContainsKey(typeof(ListItem)))
    {
        ScriptObjectBuilder.CustomConverters.Add(typeof(List<ListItem>), SerializeItemsToJson);
    }
}

private static string SerializeItemsToJson(object itemsParam)
{
    var items = itemsParam as List<ListItem>;
    if (items == null)
        return null;

    return "{" + string.Join(",", items.Select(item => string.Format("{0}: '{1}'", item.Value, item.Text))) + "}";
} 
```

这就是服务器代码的全部内容，所以让我们调整扩展器的客户端代码。

让我们从 JavaScript 代码开始。`Sys.Extended.UI.SliderBehavior`将此项添加到函数体中：并添加到下面的函数代码`this._items = null;` 原型中：`Sys.Extended.UI.SliderBehavior`

```
get_items: function () {
    return this._items;
},

set_items: function (value) {
    if (Sys.Serialization.JavaScriptSerializer.serialize(this._items) != value) {
        this._items = Sys.Serialization.JavaScriptSerializer.deserialize(value);
        this.raisePropertyChanged('items');
    }
} 
```

然后，修改`_calcValue`函数如下：

```
_calcValue: function (value, mouseOffset) {
    var val;

    if (value != null) {
        if (!Number.isInstanceOfType(value)) {

            if (this._items) {
                for (var prop in this._items) {
                    if (this._items.hasOwnProperty(prop) && this._items[prop] === value) {
                        value = prop;
                        break;
                    }
                }
            }
//rest of function's code stays as it is 
```

最后一步 - 修复`_ensureBinding`功能：

```
_ensureBinding: function () {
    if (this._boundControl) {
        var value = this._value;

        var displayItem = this._items && this._items.hasOwnProperty(value) ? this._items[value] : null;

        if (value >= this._minimum || value <= this._maximum) {
            var isInputElement = this._boundControl.nodeName == 'INPUT';

            if (isInputElement) {
                this._boundControl.value = displayItem || value;
            }
            else if (this._boundControl) {
                this._boundControl.innerHTML = displayItem || value;
            }
        }
    }
} 
```

完成上述所有更改后，重新构建解决方案并将工具包 dll 的引用添加到您的项目中。此处修改滑块的使用示例。而且它仍然支持双向绑定（即从扩展器到标签，但不支持从有界文本框到扩展器）。

```
<asp:TextBox ID="Slider1" runat="server" />
<br />
<ajaxToolkit:SliderExtender ID="SliderExtender1" runat="server" BehaviorID="Slider1"
    TargetControlID="Slider1" Minimum="1" Maximum="3" BoundControlID="Slider1_BoundControl"
    Steps="5">
    <Items>
        <asp:ListItem Value="1" Text="Low" />
        <asp:ListItem Value="2" Text="Medium" />
        <asp:ListItem Value="3" Text="High" />
    </Items>
</ajaxToolkit:SliderExtender>
<asp:TextBox runat="server" ID="Slider1_BoundControl" />
<%--<asp:Label ID="Slider1_BoundControl" runat="server" Style="text-align: right" />--%> 
```

# actionscript-3 - 无法访问空对象引用的属性或方法。-enterframe.试图让玩家走出迷宫

> ID：15947730
> 
> 赞同：0
> 
> 时间：2013-04-11T11:34:29.557
> 
> 标签：actionscript-3, flash, null, maze

我正在制作一个简单的游戏，我仍在学习 as3 我想在舞台上击中测试对象，如果 hittestobject gotoframe 或场景所有对象都在舞台上，则所有对象都在舞台上，并且下面的 maintimeline as3 一切正常但我得到空错误。这是一个迷宫游戏。

```
import flash.events.KeyboardEvent;
import flash.events.Event;
import flash.geom.Rectangle;
import flash.ui.Keyboard;

var rightArrow:Boolean = false;
var leftArrow:Boolean = false;
var upArrow:Boolean = false;
var downArrow:Boolean = false;
var speed:int = 20;

stage.addEventListener(KeyboardEvent.KEY_DOWN, stage_onKeyDown);
stage.addEventListener(KeyboardEvent.KEY_UP, stage_onKeyUp);
stage.addEventListener(Event.ENTER_FRAME, stage_onEnterFrame);

function stage_onKeyDown(event:KeyboardEvent):void {
    if(event.keyCode == Keyboard.RIGHT) rightArrow = true;
    if(event.keyCode == Keyboard.LEFT) leftArrow = true;
    if(event.keyCode == Keyboard.UP) upArrow = true;
    if(event.keyCode == Keyboard.DOWN) downArrow = true;
}
function stage_onKeyUp(event:KeyboardEvent):void {
    if(event.keyCode == Keyboard.RIGHT) rightArrow = false;
    if(event.keyCode == Keyboard.LEFT) leftArrow = false;
    if(event.keyCode == Keyboard.UP) upArrow = false;
    if(event.keyCode == Keyboard.DOWN) downArrow = false;
}
function stage_onEnterFrame(event:Event):void {
    var rect:Rectangle = player.getBounds(this);
    var i:int = 0;
    var xBump:int = 0;
    var yBump:int = 0;
    if(rightArrow) {
        xBump = speed;
        for(i = 0; i < speed; i++) {
            if(maze.hitTestPoint(rect.right + i, player.y, true)) {
                xBump = i - 1;
                break;
            }
        }
    }

    if(player.hitTestObject(box))
    {
       // Go to next scene
       nextFrame();
    }
    if(leftArrow) {
        xBump = -speed;
        for(i = 0; i < speed; i++) {
            if(maze.hitTestPoint(rect.left - i, player.y, true)) {
                xBump = -i + 1;
                break;
            }
        }
    }

    if(upArrow) {
        yBump = -speed;
        for(i = 0; i < speed; i++) {
            if(maze.hitTestPoint(player.x, rect.top - i, true)) {
                yBump = -i + 1;
                break;
            }
        }
    }
    if(downArrow) {
        yBump = speed;
        for(i = 0; i < speed; i++) {
            if(maze.hitTestPoint(player.x, rect.bottom + i, true)) {
                yBump = i - 1;
                break;
            }
        }
    }
    player.x += xBump;
    player.y += yBump;
} 
```

# javascript - 如何使用 JQuery .Ajax 获取 Pingdom 检查？

> ID：15947732
> 
> 赞同：5
> 
> 时间：2013-04-11T11:34:33.633
> 
> 标签：javascript, jquery, ajax, api, pingdom

据我所知，我的问题是我的 GET 请求未经授权。但是我尝试在标头中添加授权或作为 URL 中的值（api 密钥、用户名、密码）没有成功。

例如。

```
$.ajax({
  type: 'get',
  async:   false,
  beforeSend: function(xhr){
    xhr.setRequestHeader('Authorization', 'Basic encodedusername:passwordhere');
  },
  url: "https://api.pingdom.com/api/2.0/checks",
  success: function(Data) {
    console.log(Data);
  },
    error: function(Data) { 
  }
}); 
```

任何人都可以建议更正与 Pingdom API 交互的 Javascript 语法吗？我相信我试图错误地授权他们的文档侧重于我无法在这种情况下使用的 PHP。

[https://www.pingdom.com/services/api-documentation-rest/#authentication](https://www.pingdom.com/services/api-documentation-rest/#authentication)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T12:02:06.510

我认为不可能在网络浏览器中使用来自 Javascript 的 Pingdom API。

您需要使用 jsonp 让您的浏览器允许跨站点的 ajax 请求，但根据[此响应](https://stackoverflow.com/questions/3073287/set-headers-with-jquery-ajax-and-jsonp)，无法在 jsonp 请求中设置标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T04:47:33.283

# 在任何地方使用 CORS。

我想让一个简单的 jQuery 请求工作，检查我们平台的最后一个 Pingdom 结果。由于 CORS 和需要为身份验证指定自定义标头，这似乎是不可能的。

我不想为这么简单的事情设置代理服务器，所以我找到**[了这个答案](https://stackoverflow.com/a/17299796/293280)**并且能够使用 CORS Anywhere 方法，它看起来像这样：

```
// Will use the cors-anywhere proxy if jQuery supports it and crossDomain option is passed in.
$.ajaxPrefilter( function (options) {
  if (options.crossDomain && jQuery.support.cors) {
    var http = (window.location.protocol === 'http:' ? 'http:' : 'https:');
    options.url = http + '//cors-anywhere.herokuapp.com/' + options.url;
    // options.url = "http://cors.corsproxy.io/url=" + options.url;
  }
});

// Use ajax requests as normal.
$.ajax({
  type: 'get',
  async:   false,
  crossDomain: true,
  beforeSend: function(xhr){
    xhr.setRequestHeader('Authorization', 'Basic encodedusername:passwordhere');
  },
  url: "https://api.pingdom.com/api/2.0/checks",
  success: function(Data) {
    console.log(Data);
  },
    error: function(Data) { 
  }
}); 
```

**注意：如果您要传递或检索机密信息，请勿使用此选项。**如果您这样做，您应该使用自己的代理。但是，如果您只是像我们一样获取公共数据，那么这应该是绕过 CORS 限制的一种不错且干净的方法。

# combobox - zk - 禁用组合框的按键控制

> ID：15947733
> 
> 赞同：0
> 
> 时间：2013-04-11T11:34:35.727
> 
> 标签：combobox, keyboard, keyboard-shortcuts, zk

是否可以禁用 ZK 中组合框的键盘[控件](http://books.zkoss.org/wiki/ZK_Component_Reference/Input/Combobox#Mouseless_Entry_Combobox)？

也就是说，当用户在 Combobox 中输入一些文本时，默认情况下他们可以使用箭头键在列表中上下移动。我想在功能上禁用此功能，因为它不适用于我们正在设计的用户体验。

我在文档中没有明确看到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:04:32.013

您可以覆盖 _doKeyDown js函数，

例如，

```
<zk xmlns:w="client">
    <combobox>
        <attribute w:name="_doKeyDown"><![CDATA[
            function (evt) {
                var keyCode = evt.keyCode;
                if (keyCode != 38 && keyCode != 40) {
                    this.$_doKeyDown(evt);
                }
            }
        ]]></attribute>
        <comboitem label="item one" />
        <comboitem label="item two" />
        <comboitem label="item three" />
    </combobox>
</zk> 
```

# perl - 如何在 perl 中将“a=1,b=2”拆分为哈希？

> ID：15947737
> 
> 赞同：-3
> 
> 时间：2013-04-11T11:34:47.703
> 
> 标签：perl

我想做这个：

```
my %options = makeHash("user=bob,pass=123"); 
```

如果有人可以使这项工作获得奖励积分...

```
my %options = makeHash('user="bob,a",pass=123'); 
```

我可以很容易地用多个 split() 编写第一个方法，但我想知道是否有一种特定于 Perl 的很酷的优雅方式可以做到......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T11:42:07.837

您可以使用[`Text::ParseWords`](http://search.cpan.org/perldoc?Text%3a%3aParseWords)（Perl 5 中的核心模块）解析字段，还可以克服字段内的引号引号。请注意，返回值是哈希引用，而不是哈希。

```
use strict;
use warnings;
use Text::ParseWords;

my $options = makeHash('user="bob,a",pass=123');

sub makeHash {
    my $str  = shift;
    my @foo  = quotewords(',', 0, $str);   # split into pairs
    my %hash = quotewords('=', 0, @foo);   # split into key + value
    return \%hash;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:40:48.760

如果您的键和值都是字母数字，那么您可以只写

```
my %options = "user=bob,pass=123" =~ /\w+/g; 
```

或者，对于您的第二种情况

```
my %options = 'user="bob,a",pass=123' =~ /(\w+)="?([\w,]+)/g; 
```

您需要明确哪些字符可以出现在数据中，周围是否有空格`=`等。

# neo4j - Spring Data Neo4j：使用带有嵌入式的 Neo4j 服务器：JAR 打包

> ID：15947739
> 
> 赞同：2
> 
> 时间：2013-04-11T11:34:57.273
> 
> 标签：neo4j, spring-data-neo4j

我终于能够在我的 java 应用程序中创建一个使用嵌入式数据库的服务器实例，如此[处](https://stackoverflow.com/questions/15904931/spring-data-neo4j-using-the-server-with-an-embedded/)所述。当我从 Eclipse 运行它时，这可以正常工作，但这实际上不是我的目的（我的应用程序，在其他事物之间，为数据库提供新的节点和关系）。我有一个 Neo4j 盒子，它应该是我的服务器实例，我想将我的应用程序作为 JAR 文件部署在那里。这样，我想从那里访问网络界面。我已经对其进行了测试：在我的开发机器上运行 java 应用程序时，同一专用网络中的任何机器都可以毫无问题地访问该接口。当尝试将所有内容打包到 JAR 中以进行服务器分发时，就会出现问题。

具体的错误堆栈如下：

```
<!-- bean initialization stuff -->

Apr 11, 2013 1:14:30 PM org.neo4j.kernel.impl.transaction.xaframework.XaLogicalLog doInternalRecovery
INFO: Non clean shutdown detected on log [/data/production/graph.db/nioneo_logical.log.2]. Recovery started ...
Apr 11, 2013 1:14:32 PM org.neo4j.kernel.impl.transaction.xaframework.XaLogicalLog doInternalRecovery
INFO: Non clean shutdown detected on log [/data/production/graph.db/index/lucene.log.2]. Recovery started ...
2013-04-11 13:14:34,787 INFO [org.springframework.transaction.jta.JtaTransactionManager] - Using JTA UserTransaction: org.neo4j.kernel.impl.transaction.UserTransactionImpl@1b2fde11
2013-04-11 13:14:34,787 INFO [org.springframework.transaction.jta.JtaTransactionManager] - Using JTA TransactionManager: org.neo4j.kernel.impl.transaction.SpringTransactionManager@639c3c08
Apr 11, 2013 1:14:35 PM org.neo4j.server.logging.Logger log
INFO: Starting Neo Server on port [7474] with [40] threads available
Logger not configured, logging to std out instead: [FINE] Adding JAXRS packages [org.neo4j.server.rest.discovery] at [/]
Apr 11, 2013 1:14:35 PM org.neo4j.server.logging.Logger log
INFO: Mounted discovery module at [/]
Logger not configured, logging to std out instead: [FINE] Adding JAXRS packages [org.neo4j.server.rest.web] at [/db/data]
Apr 11, 2013 1:14:35 PM org.neo4j.server.logging.Logger log
INFO: Mounted REST API at [/db/data]
Logger not configured, logging to std out instead: [FINE] Adding JAXRS packages [org.neo4j.server.webadmin.rest] at [/db/manage]
Apr 11, 2013 1:14:35 PM org.neo4j.server.logging.Logger log
INFO: Mounted management API at [/db/manage]
Apr 11, 2013 1:14:35 PM org.neo4j.server.logging.Logger log
INFO: Mounted webadmin at [/webadmin]
2013-04-11 13:14:35,494 INFO [org.mortbay.log] - Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
Apr 11, 2013 1:14:35 PM org.neo4j.server.logging.Logger log
INFO: Mounting static content at [/webadmin] from [webadmin-html]
Logger not configured, logging to std out instead: [FINE] Found [jar:file:/home/jaranda/cicerone/cicerone-crawlers/target/cicerone-crawlers-0.0.1-SNAPSHOT.jar!/webadmin-html]
Logger not configured, logging to std out instead: [FINE] Mounting static content from [jar:file:/home/jaranda/cicerone/cicerone-crawlers/target/cicerone-crawlers-0.0.1-SNAPSHOT.jar!/webadmin-html] at [/webadmin]
Logger not configured, logging to std out instead: [FINE] Mounting servlet at [/db/manage]
Logger not configured, logging to std out instead: [FINE] Mounting servlet at [/db/data]
Logger not configured, logging to std out instead: [FINE] Mounting servlet at [/]
2013-04-11 13:14:35,556 INFO [org.mortbay.log] - jetty-6.1.x
2013-04-11 13:14:35,915 INFO [org.mortbay.log] - NO JSP Support for /webadmin, did not find org.apache.jasper.servlet.JspServlet
Apr 11, 2013 1:14:36 PM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  org.neo4j.server.webadmin.rest
Apr 11, 2013 1:14:39 PM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class org.neo4j.server.webadmin.rest.JmxService
  class org.neo4j.server.webadmin.rest.ConsoleService
  class org.neo4j.server.webadmin.rest.MonitorService
  class org.neo4j.server.webadmin.rest.RootService
Apr 11, 2013 1:14:39 PM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
Apr 11, 2013 1:14:39 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.9 09/02/2011 11:17 AM'
Apr 11, 2013 1:14:40 PM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  org.neo4j.server.rest.web
Apr 11, 2013 1:14:43 PM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class org.neo4j.server.rest.web.ResourcesService
  class org.neo4j.server.rest.web.RestfulGraphDatabase
  class org.neo4j.server.rest.web.DatabaseMetadataService
  class org.neo4j.server.rest.web.ExtensionService
  class org.neo4j.server.rest.web.CypherService
  class org.neo4j.server.rest.web.BatchOperationService
Apr 11, 2013 1:14:43 PM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
Apr 11, 2013 1:14:43 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.9 09/02/2011 11:17 AM'
Apr 11, 2013 1:14:43 PM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  org.neo4j.server.rest.discovery
Apr 11, 2013 1:14:46 PM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class org.neo4j.server.rest.discovery.DiscoveryService
Apr 11, 2013 1:14:46 PM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
Apr 11, 2013 1:14:46 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.9 09/02/2011 11:17 AM'
2013-04-11 13:14:46,751 INFO [org.mortbay.log] - Started SelectChannelConnector@172.20.100.33:7474
Apr 11, 2013 1:14:46 PM org.neo4j.server.logging.Logger log
INFO: Server started on [http://172.20.100.33:7474/]
2013-04-11 13:14:47,616 INFO [org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler] - Initializing ExecutorService  'taskScheduler'
2013-04-11 13:14:47,714 INFO [com.twitter.hbc.httpclient.BasicClient] - New connection executed: Hosebird-Client-02, endpoint: /1.1/statuses/filter.json?delimited=length&stall_warnings=true
2013-04-11 13:14:48,346 INFO [com.twitter.hbc.httpclient.ClientBase] - Hosebird-Client-02 Establishing a connection
Apr 11, 2013 1:14:48 PM com.sun.jersey.spi.container.ContainerResponse write
SEVERE: A message body writer for Java class [B, and Java type class [B, and MIME media type application/json was not found
Apr 11, 2013 1:14:48 PM com.sun.jersey.spi.container.ContainerResponse write
SEVERE: The registered message body writers compatible with the MIME media type are:
*/* ->
  com.sun.jersey.server.impl.template.ViewableMessageBodyWriter

Apr 11, 2013 1:14:48 PM com.sun.jersey.spi.container.ContainerResponse logException
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class [B, and Java type class [B, and MIME media type application/json was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:926)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class [B, and Java type class [B, and MIME media type application/json was not found
    ... 22 more 
```

我必须说我对 Spring、Maven 和 Neo4j 本身还是很陌生。我很迷茫如何摆脱这个问题。Web 界面实际加载但没有任何功能。见附图：

![没有功能的 Neo4j Web 界面](https://i.stack.imgur.com/yXNZQ.png).

尽管存在此问题，但我的应用程序的后端工作正常，并且实际上创建了新的节点/关系。

[我认为这里](https://groups.google.com/forum/?fromgroups#!topic/neo4j/rjyf09pYIaM)讨论了这个问题（或某种问题），但我并不清楚答案。

有什么建议么？先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:48:47.370

我终于找到了一个解决方案，它成功了。我只是分享它，以防其他人遇到同样的问题。问题是在 jar 打包过程中 META-INF/services 下的某些文件被覆盖，因为默认情况下它们的内容不会合并。根据 maven-shade 插件参考：

> 提供某些接口实现的 JAR 文件通常附带一个**META-INF/services/**目录，该目录将接口映射到它们的实现类以供服务定位器查找。要将 同一接口的多个实现**合并**到一个服务条目中，可以使用**ServicesResourceTransformer 。**

所以在我的 pom 中添加这个变压器就可以了，例如：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer"/>
              </transformers>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

希望能帮助到你！

# android - 进口com.qualcomm.QCAR.QCAR；未解决

> ID：15947740
> 
> 赞同：2
> 
> 时间：2013-04-11T11:34:59.227
> 
> 标签：android, vuforia

我正在尝试运行 vuforia 的示例应用程序。但是当我在 Eclipse 中运行它时，它给出了错误`import com.qualcomm.QCAR.QCAR; not resolved`。我用谷歌搜索了它，并尝试了不同的人建议的选项。

*   添加`qcar.jar`构建路径。
*   添加 PATH 环境

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T11:24:58.280

库的名称已从 Qcar.jar 更改为 vuforia.jar 。一旦你下载它添加到java构建路径，你应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T13:11:48.600

1）项目（右键）-buildpath-配置构建路径-java构建路径-库-添加外部jar-QCAR.jar

2) 清理 - 构建 ndk -refresh - 运行它。

# dynamics-ax-2009 - 将 XPO 从 2009 降级/导入到 4.0

> ID：15947744
> 
> 赞同：0
> 
> 时间：2013-04-11T11:35:09.620
> 
> 标签：dynamics-ax-2009, axapta

是否有任何工具/自动化来导入从 AX 2009 导出到 AX 4.0 的 XPO？

直截了当的方法不起作用，因为 XPO 中列出的属性不同，例如，由于“...找到属性，预期数据源...”，我得到了导入已被取消的异常。

我找到的唯一信息是[链接的](http://sinedax.blogspot.de/2011/01/downgrade-forms-and-reports-from-ax.html)

任何提示表示赞赏！

@edit：经过测试和尝试-导入部分有效。我缺少的是：

*   表上的索引
*   表上的字段组
*   表上的 deleteActions
*   表上的关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:31:25.933

您不能开箱即用地“降级”项目。您可以将代码迁移到下一个版本，但不能倒退。

话虽如此，如果您可以导入某些类型的对象是偶然的，但它不是受支持的功能。但是您可以逐个导出对象（或按类型导出），然后尝试导入不会失败的对象并手动复制引发错误的对象。

另一个“解决方案”是尝试根据上一步中收到的错误手动修改 XPO，但这完全没有文档记录，注定要试错。

# java - Selenium InternetExplorerDriver 添加cookie

> ID：15947750
> 
> 赞同：2
> 
> 时间：2013-04-11T11:35:27.097
> 
> 标签：java, selenium, selenium-webdriver

无法在 InternetExplorerDriver 中添加 cookie。

```
InternetExplorerDriver driver = .....;
driver.manage().add(myCookie); 
```

例外：

```
 org.openqa.selenium.WebDriverException: Unable to add cookie to page
 (WARNING: The server did not provide any stacktrace information) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:50:18.220

在添加 cookie 之前，您必须加载要添加 cookie 的网站。

所以你的代码应该是这样的：

```
InternetExplorerDriver driver = .....;
driver.get("http://my.testing.site");
driver.manage().add(myCookie); 
```

我认为在错误跟踪器中提出了一个问题，我会看看我是否可以把它挖出来。

**编辑**

这是一张票：

[https://code.google.com/p/selenium/issues/detail?id=1953](https://code.google.com/p/selenium/issues/detail?id=1953)

# c# - ASP.Net MVC Ajax.BeginForm OnComplete 在 Razor 视图中传递 c# 参数

> ID：15947755
> 
> 赞同：3
> 
> 时间：2013-04-11T11:35:39.113
> 
> 标签：c#, asp.net-mvc, razor

我在 MVC c# Razor 视图中有以下代码：

```
@{string url = "/Projects/_MonthRangesScriptsPartial";}
@using (Ajax.BeginForm(
  "_MonthRanges", 
  "Projects", 
  new { id = ViewBag.InputResourceID }, 
  new AjaxOptions { 
    HttpMethod = "POST", 
    UpdateTargetId = "MonthRanges", 
    InsertionMode = InsertionMode.Replace,
    OnComplete = "updategraphArrayScript(@url,@ViewBag.InputResourceID)"
  })) 
```

该代码几乎可以完美运行，但我想将 c# 变量解析为它们在 OnComplete 行中的值。

也就是说，Razor 引擎应该将代码解析为（例如）：

```
<form action="/Projects/_MonthRanges/55" 
  data-ajax="true" data-ajax-complete="updategraphArrayScript(/Projects/assets,55)"
  ...> 
```

而不是：

```
<form action="/Projects/_MonthRanges/55" 
  data-ajax="true" data-ajax-complete="updategraphArrayScript(@url,@ViewBag.InputResourceID)"
  ...> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:41:51.737

只需创建另一个变量字符串：

```
@{
    string url = "/Projects/_MonthRangesScriptsPartial";
    string onComplete = String.Format("updategraphArrayScript({0}, {1})", url, ViewBag.InputResourceID);
}

@using (Ajax.BeginForm(
  "_MonthRanges", 
  "Projects", 
  new { id = ViewBag.InputResourceID }, 
  new AjaxOptions { 
    HttpMethod = "POST", 
    UpdateTargetId = "MonthRanges", 
    InsertionMode = InsertionMode.Replace,
    OnComplete = @onComplete
  })) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:32:08.143

当您分配 OnComplete 值时，请去掉 @。您不需要它，因为您已经在服务器端代码的上下文中。

`@`用于将html渲染上下文切换到服务器端代码，`<text></text>`用于从服务器端上下文切换到html渲染。在上面给出的示例中，您已经在该`BeginForm()`方法的服务器端代码上下文中，因此不需要 @。您不会将值写入`onComplete`页面，而是`BeginForm()`会处理所有这些。

# security - Symfony 2 - Sonata 管理员基于角色的安全性

> ID：15947756
> 
> 赞同：0
> 
> 时间：2013-04-11T11:35:40.533
> 
> 标签：security, symfony, acl, symfony-sonata

对于 Sonata，我正在尝试使用基于角色的安全性。

我想给一个组，列出，编辑和创建用户的权限，所以我创建了一个角色

```
ROLE_MANAGE_USERS:
    - ROLE_SONATA_USER_ADMIN_USER_EDIT
    - ROLE_SONATA_USER_ADMIN_USER_LIST
    - ROLE_SONATA_USER_ADMIN_USER_CREATE 
```

这工作正常，但根据[doc](http://sonata-project.org/bundles/admin/master/doc/reference/security.html#configuration)，我理解用户授予

```
ROLE_SONATA_USER_STAFF 
```

应该已经继承了 的权利`[EDIT, LIST, CREATE]`，但似乎并非如此

我也试过

```
ROLE_SONATA_USER_ADMIN_USER_STAFF 
```

有什么我误解了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T06:23:00.090

我想情况并非如此。首先，用于编辑的主要角色的名称取决于服务名称。例如，如果管理员的服务是`sonata.user.admin`，那么角色将是，例如：

```
ROLE_SONATA_USER_ADMIN_LIST
ROLE_SONATA_USER_ADMIN_VIEW 
```

如您所见，前缀始终是`ROLE`（symfony 2 要求），后跟服务名称（但点与下划线交换，并且全部为大写字母），并以特定权限的前缀结尾：

*   LIST：查看对象列表
*   VIEW：查看一个对象的详细信息
*   CREATE：创建一个新对象
*   编辑：更新现有对象
*   DELETE：删除现有对象
*   导出：（用于原生奏鸣曲导出链接）

据我所知，没有为编辑、列出和创建预定义的 ROLE_SONATA_USER_STAFF。但是，您可以在层次结构中定义它，在 security.yml 文件中：

```
security:
    role_hierarchy:
        # Setting up 
        ROLE_SONATA_USER_STAFF:
            - ROLE_SONATA_USER_ADMIN_EDIT
            - ROLE_SONATA_USER_ADMIN_LIST
            - ROLE_SONATA_USER_ADMIN_CREATE
        # using the staff role to create new roles
        ROLE_MANAGE_USERS:             [ROLE_SONATA_USER_STAFF] 
```

# python - 用于alnum的python中的正则表达式

> ID：15947757
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:35:43.290
> 
> 标签：python, regex

正则表达式的初学者：我想要一个长度为 5 的字母数字字符串的正则表达式

其中只能包含大写字母或数字

有效字符串
FCKGW
A32FD
1CF2G
等

编辑以添加使用的解决方案： re.match(r'[A-Z0-9]{5}',str)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T11:39:59.937

一个有效的正则表达式，它只允许以下字符：AZ（大写）和 0-9，将是：

```
^[A-Z0-9]{5}$ 
```

如果您也想允许小写字符，则正则表达式将是：

```
^[A-Za-z0-9]{5}$ 
```

# c# - 返回泛型接口时出错

> ID：15947763
> 
> 赞同：2
> 
> 时间：2013-04-11T11:36:02.623
> 
> 标签：c#, generics, inheritance

以下代码是我正在编写的程序的一个简单示例。

```
public class Y
{ }

public class X : Y
{ }

public class W : Y
{ }

public interface IAaa<T>
    where T : Y
{
    void Execute(T ppp);
}

public abstract class Aaa<T> : IAaa<T>
    where T : Y
{
    public abstract void Execute(T ppp);
}

public class Bbb : Aaa<X>
{
    public override void Execute(X ppp)
    { }
}

public class Ccc : Aaa<W>
{
    public override void Execute(W ppp)
    { }
}

public class Factory 
{
    public static IAaa<Y> Get(bool b)
    {
        if(b)
            return new Bbb();
        else
            return new Ccc();
    }
}

class Program
{
    static void Main(string[] args)
    {
        IAaa<Y> aa;
        aa = Factory.Get(true);
    }
} 
```

当我编译它时，我收到以下错误

> 错误 CS0266：无法将类型“ConsoleApplication3.Bbb”隐式转换为“ConsoleApplication3.IAaa”。存在显式转换（您是否缺少演员表？）
> 
> 错误 CS0266：无法将类型“ConsoleApplication3.Ccc”隐式转换为“ConsoleApplication3.IAaa”。存在显式转换（您是否缺少演员表？）

有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:58:05.367

您不能以您尝试的方式使用该界面。Lookup [covariance/contravariance](http://msdn.microsoft.com/en-us/library/dd233059.aspx)，您正在尝试做与可能相反的事情（您在界面中可能有，`<in T>`但您正试图像这样使用它`<out T>`）。

以类`Bbb`为例——它有一个`Execute(X)`方法。如果您尝试将 a `Y`（可能是也可能不是 a `X`）传递给它会发生什么？编译器不允许这样做，因为您从未在代码中定义在这种情况下应该发生什么。

你可以通过创建和实现另一个接口来做你想做的事，`IAaa`. 例如

```
public interface IAaa
{
    void Execute(Y ppp);
} 
```

也许是这样实现的，因此如果您尝试使用无效类型调用它，则会引发强制转换异常：

```
void Main()
{
        IAaa aa;
        aa = Factory.Get(true);
}

public class Y
{ }

public class X : Y
{ }

public class W : Y
{ }

public interface IAaa<T> : IAaa
    where T : Y
{
    void Execute(T ppp);
}

public interface IAaa
{
    void Execute(Y ppp);
}

public abstract class Aaa<T> : IAaa<T>
    where T : Y
{
    public abstract void Execute(T ppp);
    void IAaa.Execute(Y ppp)
    {
        this.Execute(ppp);
    }
    protected abstract void Execute(Y ppp);
}

public class Bbb : Aaa<X>
{
    public override void Execute(X ppp)
    { }
    protected override void Execute(Y ppp)
    {
        this.Execute((X)ppp);
    }
}

public class Ccc : Aaa<W>
{
    public override void Execute(W ppp)
    { }
    protected override void Execute(Y ppp)
    {
        this.Execute((W)ppp);
    }
}

public class Factory 
{
    public static IAaa Get(bool b)
    {
        if(b)
            return new Bbb();
        else
            return new Ccc();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:40:13.283

正如错误所说，您缺少演员表。我相信这是你需要的：

```
public static IAaa<Y> Get(bool b)
{
    if(b)
        return (IAaa<Y>)(new Bbb());
    else
        return (IAaa<Y>)(new Ccc());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:54:04.050

您可以转换为 ( `IAaa<Y>`) 并且您的代码将编译。但是它不会工作并且会在运行时失败。为什么？您的类`Bbb`和`Ccc`是专门的类，并且 Execute 方法不能处理所有类型的`Aaa`. 你必须告诉 C# / 编译器。

**更新：**

通过拥有通用工厂，您可以获得 IAaa 的专用实例，并且您的代码应该可以工作。在您`Program`将 TRUE 或 FALSE 传递给工厂时，您已经知道类型，因此您需要明确告诉 C# 您要使用的接口实现的类型。（相应地重构 Factory 类，我只是发送应该编译的内容）

```
public class Y
{ }

public class X : Y
{ }

public class W : Y
{ }

public interface IAaa<T>
    where T : Y
{
    void Execute(T ppp);
}

public abstract class Aaa<T> : IAaa<T>
    where T : Y
{
    public abstract void Execute(T ppp);
}

public class Bbb : Aaa<X>
{
    public override void Execute(X ppp)
    { }
}

public class Ccc : Aaa<W>
{
    public override void Execute(W ppp)
    { }
}

public class Factory<T> where T : Y
{
    public static IAaa<T> Get(bool b)
    {
        if(b)
            return (IAaa<T>)new Bbb();
        else
            return (IAaa<T>)new Ccc();
    }
}

class Program
{
    static void Main(string[] args)
    {
        IAaa<X> aa;
        aa = Factory<X>.Get(true);
    }
} 
```

**更新 2**

只是一个如何重构 Factory 类的示例：

```
public class Factory<T, U>
    where T : Y
    where U : Aaa<T>, new()
{
    public static IAaa<T> Get()
    {
        return (IAaa<T>)new U();
    }
}

class Program
{
    static void Main(string[] args)
    {
        IAaa<X> aa;
        aa = Factory<X, Bbb>.Get();
    }
} 
```

# c#-4.0 - 如何在 Windows Phone 中添加或删除数组项？

> ID：15947767
> 
> 赞同：0
> 
> 时间：2013-04-11T11:36:10.520
> 
> 标签：c#-4.0, xml-parsing, windows-phone-8, linq-to-xml, listbox-control

您好我正在使用下面给出的 xaml 文件和代码。我想获得两个类别，一个是当前类别，另一个是删除类别。如果我删除一个类别，它应该去添加当前类别。我对此一无所知。所以请任何人告诉我如何解决这个问题。

```
<StackPanel>
      <TextBlock Text="Current categories"
                           Style="{StaticResource PhoneTextLargeStyle}"/>

       <ListBox x:Name="AddingList" ItemsSource="{Binding name}" SelectionChanged="AddingList_SelectionChanged_1"/>

        <TextBlock Text="Removed categories"
                           Style="{StaticResource PhoneTextLargeStyle}" />

        <ListBox x:Name="RemoveList" ItemsSource="{Binding name}" SelectionChanged="RemoveList_SelectionChanged_1"/>

 </StackPanel> 
```

我的 xaml.cs 代码

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {

        NavigationService.Navigate(new Uri("/CategoriesPage.xaml?" + NotchsList11, UriKind.Relative));

    } 
```

我正在使用编辑按钮，如何将列表框项目从编辑按钮传递到类别页面以及如何删除和添加列表框项目。

我的输出想要如下图，所以请帮我一些 ![在此处输入图像描述](https://i.stack.imgur.com/obqBz.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:55:52.000

解决这个问题的方法很少。一种方法是让单个对象具有“isRemoved”布尔值，您只需打开和关闭即可。另一种方法是你可以有 2 个 observablecollections 一个保存添加的，一个保存删除的。例如：

班级：

```
public class MyData
{
    public bool isRemoved { get; set; }
    public string Name { get; set; }
} 
```

采用：

```
ObservableCollection<MyData> AllData = new ObservableCollection<MyData>()
AllData.Add(new MyData(){ isRemoved = true, Name = "Data1"}
AllData.Add(new MyData(){ isRemoved = true, Name = "Data2"}
AllData.Add(new MyData(){ isRemoved = false, Name = "Data3"}

AddingList.ItemsSource = AllData.Where(srch => srch.isRemoved == false);
RemoveList.ItemsSource = AllData.Where(srch => srch.isRemoved == true); 
```

在“删除”按钮中，单击您只需将 isRemoved 设置为 true，然后在“添加”中将 isRemoved 设置为 false。

或者您可以使用 2 个 ObservableCollections 从每个中添加和删除。

# ruby-on-rails - rails，设计omniauth，多个app_id，app_secret

> ID：15947771
> 
> 赞同：0
> 
> 时间：2013-04-11T11:36:24.753
> 
> 标签：ruby-on-rails, devise, omniauth

如何在 Devise.rb 中管理不同的 APP_id,APP_KEY。将设计omniauth与多个子域一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:38:01.400

在为您的应用程序创建 facebook 应用程序时，请填写如下所示的详细信息

```
BASIC INFO:
Display Name: ...
Namespace: ...
Contact Email: ..
App Domains: www.yourdomain.com yourdomain.com 

Website with Facebook Login:
Site URL: http://www.yourdomain.com 
```

“应用程序域”字段中的 yourdomain.com 将包括除 www 以外的所有子域（因为它是一个特殊的子域，因此您必须明确指定）

像往常一样使用 app_id/secret。这将让您的应用程序与 facebook 进行通信，以从任何子域（*.yourdomain.com 和 www.yourdomain.com）进行身份验证。

一个小问题是，当用户尝试从 A.yourdomain.com 通过 facebook 登录时。用户在 facebook 中成功登录后，他将被重定向到[http://www.yourdomain.com/users/auth/facebook](http://www.yourdomain.com/users/auth/facebook)（您在“站点 URL”字段中提供的内容）而不是 A.yourdomain.com/用户/身份验证/facebook

因此，当从 OmniauthCallbacksController 重定向时，您可以重定向到相应的子域。

# tfs - 如何从 TFS 构建排队另一个 TFS (2012) 构建并传递过程参数？

> ID：15947772
> 
> 赞同：1
> 
> 时间：2013-04-11T11:36:25.630
> 
> 标签：tfs, tfsbuild, powershell-3.0

我工作的产品包括 3/4 独立（非依赖）的 TFS 构建。

我想创建一个单一的 TFS 构建，它将 ProcessTemplate 中的其他 3/4 构建排队，并且至关重要的是，将流程参数传递给它们。此构建将等待它们全部完成并返回构建的整体成功/失败。

所以我的问题是：

*   这可以通过任何现有的“标准”工作流程活动来实现（我的经理在自定义工作流程活动方面有过不好的经历）吗？
*   如果没有，我可以“掏出”到powershell。我可以在 Powershell 中实现我想要的（访问 API）吗？
*   也许使用 TFSBuild.exe？但是我找不到传递我需要的自定义流程参数的方法。

任何帮助或指导将不胜感激。

**更新** 以下powershell脚本将执行构建，但我仍然无法传递我的自定义进程参数:-(

```
function Get-BuildServer
{
    param($serverName = $(throw 'please specify a TFS server name'))
    [void][System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Client")
    [void][System.Reflection.Assembly]::LoadWithPartialName    ("Microsoft.TeamFoundation.Build.Client")
    $tfs = [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer($serverName)

    return $tfs.GetService([Microsoft.TeamFoundation.Build.Client.IBuildServer])
}

$buildserver = Get-BuildServer "http://tfsserver:8080/tfs/My%20Project%20Collection"
$teamProject = "ESI"
$buildDefinition = "iPrl_BuildMaster"
$definition = $buildserver.GetBuildDefinition($teamProject, $buildDefinition)
$request = $definition.CreateBuildRequest()
$buildserver.QueueBuild($request, "None") 
```

现在在谷歌搜索之后，我找到了以下 C# 代码来更新详细程度，并且假设它与我的自定义流程参数相同，我需要将其转换为与上述 powershell 脚本一起使用。有任何想法吗？

```
IDictionary<String, Object> paramValues = WorkflowHelpers.DeserializeProcessParameters(processParameters);
paramValues[ProcessParameterMetadata.StandardParameterNames.Verbosity] = buildVerbosity;
return WorkflowHelpers.SerializeProcessParameters(paramValues); 
```

# json - 使用 Delphi 从网站获取 JSON 数据

> ID：15947774
> 
> 赞同：0
> 
> 时间：2013-04-11T11:36:27.513
> 
> 标签：json, delphi, http, delphi-7, http-authentication

有这个网站[http://www.ingress.com/intel](http://www.ingress.com/intel)

要访问该网站，我们必须使用用户名和密码登录。

访问后，该站点将使用 JSON 作为其数据。

我是这个 JSON 的新手。

任何人都可以给出一个通用示例，如何使用 Delphi 从网站获取 JSON 数据？

顺便说一句，我正在使用 Delphi 7。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T11:53:50.080

这是两个问题。

1.  如何从 HTTP 服务器获取文件
2.  如何解析 JSON 字符串

对于第一个问题，有很多图书馆，其中一些：

1.  Internet Direct 又名 Indy 套接字（与 Delphi 和[http://www.indyproject.org/](http://www.indyproject.org/)一起分发）
2.  Internet Components Suite 又名 ICS [http://www.overbyte.be](http://www.overbyte.be)
3.  ararat 突触[http://synapse.ararat.cz/](http://synapse.ararat.cz/)
4.  来自 JEDI VCL [http://jvcl.sf.net的 UrlListGrabber](http://jvcl.sf.net)
5.  视窗`InternetReadFile` [http://msdn.microsoft.com/en-us/library/windows/desktop/aa385103.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385103.aspx)
6.  ……还有更多。

例如，这是从 Internet 获取文件的示例：http://synapse.ararat.cz/doku.php/public:howto: [httpgetpage](http://synapse.ararat.cz/doku.php/public%3ahowto%3ahttpgetpage)

或者另一个库的演示（实际上每个库都有它们，从 HTTP 加载文件是如此常见的任务......）：

*   [http://jvcl.svn.sourceforge.net/viewvc/jvcl/trunk/jvcl/examples/JvProgramVersionCheck/](http://jvcl.svn.sourceforge.net/viewvc/jvcl/trunk/jvcl/examples/JvProgramVersionCheck/)
*   [http://jvcl.svn.sourceforge.net/viewvc/jvcl/trunk/jvcl/examples/JvUrlListGrabber/](http://jvcl.svn.sourceforge.net/viewvc/jvcl/trunk/jvcl/examples/JvUrlListGrabber/)

* * *

至于 JSON 解析器，在你从网上下载内容后，这是一个更窄的选择：JSON 是一个相对较新的趋势，许多 JSON 解析器大量使用 Delphi 2009+ 的功能
我个人认为你最好尝试使用来自 mORMot 项目的 JSON 解析器. 该项目也有 HTTP 层，所以也许您也可以使用他们的代码通过 HTTP 读取文件。

有例子或解析JSON字符串：

*   [http://blog.synopse.info/post/2012/05/03/Custom-JSON-serialization-of-records](http://blog.synopse.info/post/2012/05/03/Custom-JSON-serialization-of-records)
*   [http://blog.synopse.info/post/2012/04/13/Custom-JSON-serialization-of-any-class](http://blog.synopse.info/post/2012/04/13/Custom-JSON-serialization-of-any-class)
*   [http://blog.synopse.info/post/2012/04/12/Custom-JSON-serialization-of-any-dynamic-array-content](http://blog.synopse.info/post/2012/04/12/Custom-JSON-serialization-of-any-dynamic-array-content)

更多信息请访问[http://synopse.info/](http://synopse.info/)和[http://blog.synopse.info/tag/JSON](http://blog.synopse.info/tag/JSON)

他们还有响应社区的论坛。

SuperObject，虽然最初是围绕泛型构建的（自 Delphi 2010 起实际工作），但也具有 Delphi 7 兼容性，尽管它的某些功能不起作用。请参阅[http://code.google.com/p/superobject/wiki/first_steps](http://code.google.com/p/superobject/wiki/first_steps)

[你总是可以在http://www.torry.net](http://www.torry.net)上搜索更多的库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:29:04.603

我怀疑从 Delphi 应用程序登录这个特定网站会非常困难。

您将需要通过*Google 帐户*登录，并按预期处理 cookie。

因此，恐怕您将无法使用任何直接的 Indy / Synapse / ICS / WinINet 库来访问数据。

您可能需要在应用程序中嵌入一个完整的浏览器，然后从 JavaScript 的角度访问内容，从您的应用程序远程处理浏览器。

看看这些组件：

*   `TWebBrowser`（即 Internet Explorer）在 Delphi 中可用；
*   [德尔福铬](http://code.google.com/p/delphichromiumembedded)。

然后你必须解析 JSON 内容。但是您必须首先确保您可以登录应用程序！

# android - Android AVD 不识别设备但 adb 可以吗？

> ID：15947775
> 
> 赞同：0
> 
> 时间：2013-04-11T11:36:28.023
> 
> 标签：android, avd

Android 设备选择器无法显示我的真实设备。但是设备管理器识别并且我使用 Eclipse Juno、Windows 7 和我的设备 nexus 7，并且我已经尝试过命令：adb kill server 和更新 USB 驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:09:08.020

请更新谷歌 USB 驱动程序。

链接：http: [//developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)

此链接将有助于解决问题。

```
Connect your Android-powered device to your computer's USB port.
Right-click on Computer from your desktop or Windows Explorer, and select Manage.
Select Device Manager in the left pane of the Computer Management window.
Locate and expand Android Phone in the right pane.
Right-click Android Composite ADB Interface and select Update Driver. This will launch the Hardware Update Wizard.
Select Install from a list or specific location and click Next.
Select Search for the best driver in these locations; un-check Search removable media; and check Include this location in the search.
Click Browse and locate the USB driver folder. (The Google USB Driver is located in <sdk>\extras\google\usb_driver\.)
Click Next to upgrade the driver. 
```

# c# - 将视频保存在视频文件夹 wp8 中

> ID：15947779
> 
> 赞同：0
> 
> 时间：2013-04-11T11:36:36.017
> 
> 标签：c#, windows-phone-8

我创建了一个用于录制电影的小应用程序，同时将来自 gps 和加速度计的数据记录到文件中。我的第一个想法是使用镜头，但它们似乎只用于照片，所以我创建了自己的录制应用程序。但是因为我需要将录制的电影和数据文件复制到计算机上，所以我觉得隔离存储并不是一个很好的解决方案，即使它可以与 windows phone Power Tools 一起使用。

有什么方法可以录制电影并将其存储在视频文件夹中，同时记录 gps？gps 数据可以通过多种方式解决，如电子邮件、skydrive 等，但电影将变得太大而无法上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T22:25:00.323

此时，无法将视频保存到手机的媒体库中。您必须集成 SkyDrive 或让您自己的服务器从应用程序的隔离存储中获取视频

# image-processing - 使用两个网络摄像头/图像进行距离检测

> ID：15947780
> 
> 赞同：1
> 
> 时间：2013-04-11T11:36:36.500
> 
> 标签：image-processing, python-2.7, webcam, raspberry-pi, rubber-band

我正处于试图弄清楚如何获得到图像中任何给定点的距离的起点。仅给定一个图像，如果不知道我想知道距离的对象的大小并定义这以像素为单位的含义，这当然是不可能的。

我这样做的想法是安装两个面向相同方向的 720p 网络摄像头，彼此之间的距离已知.. 大约 4 英寸.. 然后尝试比较图像中项目的偏移量以尝试获取一个相当准确的距离猜测（我只需要它在大约 3 到 12 英尺的范围内工作）。

我对算法的想法是这样的：

1.  从两个单独的相机在同一时间点捕获两个图像。
2.  在图像 1 中选择我想知道距离的小区域。
3.  尝试将第一张图像中的选定点与第二张图像中的相同点对齐。
4.  当我对齐它们时，我应该能够计算距离，知道我必须调整多少图像才能相互匹配。

因此，我正在寻求帮助的是列表中的第 3 点应该如何完成，对齐图像。或者如果有人对如何完成这个有任何完全不同的想法，我会全力以赴。

附带说明一下，我想在树莓派上的 python 中运行它，所以我需要以最少的处理能力进行所有计算。

这将在自动橡皮筋步哨枪的背景下使用。上面的部分将用于计算需要以什么倾斜度射击以补偿橡皮筋轨迹。

# windows - 我们可以为 Azure VM 虚拟 IP 使用 Route 53 或任何托管 DNS 吗？

> ID：15947781
> 
> 赞同：1
> 
> 时间：2013-04-11T11:36:36.860
> 
> 标签：windows, azure, smtp, azure-virtual-machine, reverse-dns

我已将应用程序部署到 Win Azure 虚拟机。但是当我尝试发送电子邮件时，几乎所有 SMTP 都会拒绝我的邮件或将其发送到垃圾邮件。

我已经在我的域上设置了 SPF + DKIM + Dmarc。

只有一件事我认为问题应该是我的虚拟机 VIP 的 PTR。

我可以使用 53 号公路吗？

或者我应该使用其他 SMTP 提供商，例如... sendgrid、Amazon SES？

请帮助朋友

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:32:25.947

直接从 Azure 发送电子邮件是个坏主意。它几乎肯定会被视为垃圾邮件。设置一个有效的电子邮件服务器来发送邮件已经够难的了。将可扩展的提供程序添加到混合中只会使避免被标记变得更加复杂。

[SendGrid](http://www.sendgrid.com)集成得非常好，可以通过 SMTP 或使用他们的 API 进行配置。[以下是 Microsoft 关于如何快速启动和运行的说明。](http://www.windowsazure.com/en-us/develop/net/how-to-guides/sendgrid-email-service/)

[此外，这是ServerFault.com](https://serverfault.com/questions/478076/can-an-email-server-be-set-up-on-an-azure-vm)上的一个类似问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T19:32:53.787

Azure 不允许我们为我们的虚拟机 VIP 添加 PTR 记录。因此，许多邮件服务器会将邮件视为垃圾邮件。

现在我们正在使用 Amazon SES，它运行良好，而且比 SendGrid 便宜得多。

# servlets - 同一客户端的会话密钥更改（HttpClient）

> ID：15947785
> 
> 赞同：1
> 
> 时间：2013-04-11T11:36:41.500
> 
> 标签：servlets, smalltalk, visualworks

我想弄清楚我可能在这里遗漏了什么。

我有一个 Servlet TestServlet，它是

```
Smalltalk defineClass: #TestServlet
    superclass: #{VisualWave.HttpServlet}
    indexedType: #none
    private: false
    instanceVariableNames: ''
    classInstanceVariableNames: ''
    imports: ''
    category: '' 
```

使用获取方法：

```
doGet: aRequest response: aResponse

    aResponse write: aRequest session key 
```

现在有了这个我运行一个工作区代码

```
client := HttpClient new.
    Transcript
        show: (client executeRequest: (HttpRequest
                            get: 'http://localhost:8008/servlet/TestServlet'))
                    value value;
        cr.
    Transcript
        show: (client executeRequest: (HttpRequest
                            get: 'http://localhost:8008/servlet/TestServlet'))
                    value value;
        cr.
    Transcript
        show: (client executeRequest: (HttpRequest
                            get: 'http://localhost:8008/servlet/TestServlet'))
                    value value;
        cr.
    Transcript
        show: (client executeRequest: (HttpRequest
                            get: 'http://localhost:8008/servlet/TestServlet'))
                    value value;
        cr 
```

在这里，每个第三个请求都会成为一个不同的会话密钥。

当我调试时，我发现在方法 Response => setSessionKey `webRequest` 中不会有一个名为 cookie `cookieName`，所以它会设置 cookie。稍后在第二个请求`webRequest`中有一个 cookie 名称，因此它不会设置 cookie。因此下一个（第三个）请求将启动一个新会话，并且由于它没有`cookieName`in `webRequest`，它将使用新的会话密钥设置 cookieName ，该密钥将保留在第四届也是。

这是预期的行为，所以我错过了什么吗？或者它可以以不同的方式完成，这样这种行为就不会发生？

```
setSessionKey

    self session
        ifNotNil: 
            [| cookieName |
            cookieName := webRequest webSite sessionCookieName.
            (webRequest cookieValueAt: cookieName)
                ifNil: [self cookieAt: cookieName put: self session key]] 
```

期待 smalltalk 大师在这里帮助我。

提前致谢。

PS：我知道我们可以将会话 cookie 设置为响应，但我正在寻找不同的解决方案，或者可能是更正确的解决方案。我也想知道发生这种情况的原因。谢谢。

# c# - 如何在 C# 中检查多行文本框中的选定文本？

> ID：15947788
> 
> 赞同：2
> 
> 时间：2013-04-11T11:36:48.227
> 
> 标签：c#, .net, select, textbox

我的应用程序中有两个多行文本框和一个箭头按钮，我想要的是当用户从多行文本框 1 中选择任何一行或多行时，它应该将该行的状态从 0 更新为 1 和然后我想将状态为 1 的行加载到多行文本框 2 中。我尝试过但不知道下一步该怎么做？

**代码**：

```
for (int i = 0; i < txtNewURLs.Lines.Length; i++)
{
    if (txtNewURLs.Lines[i].Select)
    {

    }
} 
```

任何人都可以帮助我或提供一些建议来完成这项任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:55:31.823

假设您正在使用类似于 MSDNS 的[如何：创建多行文本框控件的多行文本框](http://msdn.microsoft.com/en-us/library/ms742157.aspx)，您可以利用[SelectedText](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectedtext.aspx)属性来检索用户选择的文本。这些行将由`\r\n`

IE

如果我有以下内容（在页面行之间）：

* * *

测试0

测试1

* * *

我选择了行`test0`和`test1`，然后`SelectedText`是`test0\r\ntest1`。

然后，您可以拆分`\r\n`并检索每个选定的行。

```
// Retrieve selected lines
List<string> SelectedLines = Regex.Split(txtNewURLs.SelectedText, @"\r\n").ToList();
// Check for nothing, Regex.Split returns empty string when no text is inputted
if(SelectedLines.Count == 1) {
    if(String.IsNullOrWhiteSpace(SelectedLines[0])) {
        SelectedLines.Remove("");
    }
}

// Retrieve all lines from textbox
List<string> AllLines = Regex.Split(txtNewURLs.Text, @"\r\n").ToList();
// Check for nothing, Regex.Split returns empty string when no text is inputted
if(AllLines.Count == 1) {
    if(String.IsNullOrWhiteSpace(AllLines[0])) {
        AllLines.Remove("");
    }
}

string SelectedMessage = "The following lines have been selected";
int numSelected = 0;
// Find all selected lines
foreach(string IndividualLine in AllLines) {
    if(SelectedLines.Any(a=>a.Equals(IndividualLine))) {
        SelectedMessage += "\nLine #" + AllLines.FindIndex(a => a.Equals(IndividualLine));
        // Assuming you store each line status in an List, change status to 1
        LineStatus[AllLines.FindIndex(a => a.Equals(IndividualLine));] = 1;
       numSelected++;
    }
}

MessageBox.Show((numSelected > 0) ? SelectedMessage : "No lines selected."); 
```

# c# - 如何处理我的 Excel 应用程序

> ID：15947789
> 
> 赞同：3
> 
> 时间：2013-04-11T11:37:01.293
> 
> 标签：c#, excel, automation

我的代码如下

```
Excel.Application xlApp = new Excel.Application();
Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(file);

Excel.Worksheet xlSheet = xlWorkbook.Sheets[1]; // get first sheet
Excel.Range xlRange = xlSheet.UsedRange; 
```

这些是我的函数中使用的唯一变量

```
foreach (Excel.Worksheet XLws in xlWorkbook.Worksheets)
{
    // do some stuff 

    xlApp.UserControl = false;

    if (xlRange != null)
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlRange);

    if (xlSheet != null)
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlSheet);

    if (xlWorkbook != null)
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlWorkbook);

    xlRange = null;
    xlSheet = null;
    xlWorkbook = null;
    xlApp.Quit();

    System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlApp);
} 
```

但我仍然在任务管理器中得到**EXCEL.EXE**

请帮忙？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-14T13:33:19.273

## 杀死 MainWindowTitle 具有空值的 excel 进程。下面是一个示例源代码。

```
 Microsoft.Office.Interop.Excel.Application oXL;
    Microsoft.Office.Interop.Excel._Workbook oWB;
    Microsoft.Office.Interop.Excel._Worksheet oSheet;
    Microsoft.Office.Interop.Excel.Range oRng;
    object misvalue = System.Reflection.Missing.Value;
    try
    {
        //Start Excel and get Application object.
        oXL = new Microsoft.Office.Interop.Excel.Application();
        oXL.Visible = true;

        //Get a new workbook.
        oWB = (Microsoft.Office.Interop.Excel._Workbook)(oXL.Workbooks.Add(""));
        oSheet = (Microsoft.Office.Interop.Excel._Worksheet)oWB.ActiveSheet;

        //Add table headers going cell by cell.
        oSheet.Cells[1, 1] = "First Name";
        oSheet.Cells[1, 2] = "Last Name";
        oSheet.Cells[1, 3] = "Full Name";
        oSheet.Cells[1, 4] = "Salary";

        //Format A1:D1 as bold, vertical alignment = center.
        oSheet.get_Range("A1", "D1").Font.Bold = true;
        oSheet.get_Range("A1", "D1").VerticalAlignment =
            Microsoft.Office.Interop.Excel.XlVAlign.xlVAlignCenter;

        // Create an array to multiple values at once.
        string[,] saNames = new string[5, 2];

        saNames[0, 0] = "John";
        saNames[0, 1] = "Smith";
        saNames[1, 0] = "Tom";

        saNames[4, 1] = "Johnson";

        //Fill A2:B6 with an array of values (First and Last Names).
        oSheet.get_Range("A2", "B6").Value2 = saNames;

        //Fill C2:C6 with a relative formula (=A2 & " " & B2).
        oRng = oSheet.get_Range("C2", "C6");
        oRng.Formula = "=A2 & \" \" & B2";

        //Fill D2:D6 with a formula(=RAND()*100000) and apply format.
        oRng = oSheet.get_Range("D2", "D6");
        oRng.Formula = "=RAND()*100000";
        oRng.NumberFormat = "$0.00";

        //AutoFit columns A:D.
        oRng = oSheet.get_Range("A1", "D1");
        oRng.EntireColumn.AutoFit();

        oXL.Visible = false;
        oXL.UserControl = false;
        oWB.SaveAs("c:\\test505.xls", Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookDefault, Type.Missing, Type.Missing,
                false, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

        oWB.Close(null, null, null);
        oXL.Quit();  //MainWindowTitle will become empty afer being close

        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(oXL);
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(oWB);

        Process[] excelProcesses = Process.GetProcessesByName("excel");
        foreach (Process p in excelProcesses)
        {
            if (string.IsNullOrEmpty(p.MainWindowTitle)) // use MainWindowTitle to distinguish this excel process with other excel processes 
            {
                p.Kill();
            }
        }
    }
    catch (Exception ex2)
    {

    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T11:45:55.293

你有一个隐式对象保持打开状态。尝试这个

```
Excel.Application xlApp = new Excel.Application();
Excel.Workbooks xlWorkbooks = xlApp.Workbooks;
Excel.Workbook xlWorkbook = xlWorkbooks.Open(file);
....    

System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlApp);
System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlWorkbooks);
System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlWorkbook);
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T18:30:05.190

好的...我希望这会有所帮助...我花了很长时间来调整它以使其正常工作...

这是我的整个函数（VB——但棘手的东西的 C# 代码在那里（感谢太多其他帮助我走到这一步的 stackoverflow 巨头！）

```
Private Function ImportWorksFile() As Integer

    Dim EndofSheet As Boolean
    Dim BlankRowCounter As Integer
    Dim rr As RowResult
    Dim SecCount As Integer = 0
    Dim SecRow As SecurityRow

    Dim uf As New UtilFunctions

    'If this has already been run, the instance of the excel object would have been 'killed' and needs to be reinstantiated
    If blnExcelProcessKilled Then 'Global boolean var
        xlApp = New Excel.Application()
        blnExcelProcessKilled = False
    End If
    Dim excelProcess(0) As Process
    excelProcess = Process.GetProcessesByName("excel")

    Dim tmp As Excel.Workbooks
    Try
        tmp = xlApp.Workbooks
        xlWorkBook = tmp.Open(WorkingFileName)
    Catch ex As Exception
        MessageBox.Show("There was a problem opening the workbook - please try again", CurAFLApp.AppName, MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
        Return 0
    End Try

    Using dc As New AFLData(CurAFLApp, True)

        Dim cmd As SqlCommand = DefineCommand()
        cmd.CommandType = CommandType.StoredProcedure

        For Each ws As Excel.Worksheet In xlWorkBook.Worksheets

            Dim row As Integer = 1
            EndofSheet = False
            BlankRowCounter = 0

            If ImpCols.ContainsKey(ws.Name) Then
                SecRow = New SecurityRow(ImpCols(ws.Name))

                Do Until EndofSheet
                    Try
                        SecRow.NewRow(ws.Rows(row))
                        rr = SecRow.IsValidRow

                        If rr = RowResult.Valid Then
                            ' read this row and process
                            With cmd
                                .Parameters("@AcctDate").Value = FileDate
                                .Parameters("@NewSub").Value = SecRow.GetStrCell("newsub")
                                RunProcedure(cmd)
                            End With

                            SecCount += 1

                            BlankRowCounter = 0

                        Else
                            BlankRowCounter += rr

                        End If

                    Catch ex As Exception
                        MessageBox.Show("There was a problem with row: " & row & " in workbook " & ws.Name)

                    End Try

                    ' if we've counted 50 blank A column values in a row, we're done.
                    If BlankRowCounter <= -50 Then
                        EndofSheet = True
                    End If

                    row += 1
                Loop
            End If
        Next
    End Using

    Try

        xlWorkBook.Close(SaveChanges:=False)
        xlApp.Workbooks.Close()
        xlApp.Quit()

        '// And now kill the process. C# Version (for reference)
        'if (processID != 0)
        '{
        '    Process process = Process.GetProcessById(processID);
        '    process.Kill();
        '}

        ' Reversed the order of release per  http://stackoverflow.com/questions/12916137/best-way-to-release-excel-interop-com-object

    Catch ex As Exception
        MessageBox.Show("There was a problem CLOSING the workbook - Please double check that the data was imported correctly. ", CurAFLApp.AppName, MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
        Return 0
    Finally

        releaseObject(tmp)
        releaseObject(xlWorkBook)
        releaseObject(xlApp)
        If Not excelProcess(0).CloseMainWindow() Then

            excelProcess(0).Kill()
            blnExcelProcessKilled = True
        End If

    End Try

    Return SecCount

End Function

Public Sub releaseObject(ByVal obj As Object)
    Try
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)
        obj = Nothing
    Catch ex As Exception
        obj = Nothing
    Finally
        GC.Collect()
        'Not sure if the following line helps or hinders -- seems to lock things up once in a while
        'GC.WaitForPendingFinalizers()
    End Try
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-30T17:55:20.240

尝试 ：

```
xlWorkbook.Close(false); // if you Workbook should not be saved 
```

代替 ：

```
if (xlWorkbook != null)
   System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlWorkbook);

xlWorkbook = null; 
```

# python - pcolormesh 绘制的不是点而是数据点之间的线

> ID：15947794
> 
> 赞同：1
> 
> 时间：2013-04-11T11:37:14.713
> 
> 标签：python, matplotlib, matplotlib-basemap

我需要将降雨总和数据（来自卫星观测）绘制到 grib2 文件中的地图上。最后，我设法通过文本文件将数据加载到 numpy 数组中，并使用 Basemap 将其与图片坐标联系起来。但问题是 Python 并没有从数据中放置彩色点，而是倾向于在数据字段中的相邻点之间画线，所以绘图看起来很难看。我没有看到问题的根源。

我的代码片段是：

```
import numpy as np
import matplotlib
matplotlib.use('Agg')
from scipy import *
from pylab import *
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
from mpl_toolkits.basemap import cm 
```

* * *

之后，我读取所需的数据并生成 3 个形状约为 (100000, 2) 的 numpy 数组，它们分别包含纬度、经度、度数和每个数据点的值。我使用以下命令对其进行可视化：

```
def joonista(lats,lons,value,nimi,clevs,koloriit): 
```

---------描述的重塑片段（未显示），产生数组“lats”，“lons”，“value”------------

```
map=Basemap(projection='aea',lat_1=30,lat_2=50,lat_0=45,lon_0=0,llcrnrlon=-30,llcrnrlat=20,urcrnrlon=80,urcrnrlat=53,resolution='l',)

x, y = map(lons, lats)
map.drawcoastlines(linewidth=0.17,color='0.7')
map.drawcountries(linewidth=0.17,color='0.7')
map.drawmeridians(np.arange(-50,60,5),linewidth=0.17,color='0.7',labels=[False,False,False,True])
map.drawparallels(np.arange(-25, 70, 5),linewidth=0.17,color='0.7',labels=[True,False,False,False])
varvid=mpl.colors.ListedColormap(koloriit)
norm = mpl.colors.BoundaryNorm(clevs,varvid.N)
cs = map.pcolormesh(x,y,value,cmap=varvid,norm=norm)
savefig(nimi,dpi=300)
plt.clf()

joonista(latA,lonA,valueA,'h05',[-1,0.00001,0.001,0.01,0.1,0.3,0.5,1,2,3,4,5,6,7,8,9,10,11,12,13],['k','c','#a0fff9','#00b354','#69b300','#97ff03','#C2524D','#FF7500','#b3a900','#fff551','#515bff','#45adff','#da000d','#ff2a36','#ffa0a5','#f003ff','#f778ff','0.5','0.75'])
joonista(latB,lonB,valueB,'h04',[-1,0.0000000000001,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],['k','c','#a0fff9','#00b354','#69b300','#97ff03','#C2524D','#FF7500','#b3a900','#fff551','#515bff','#45adff','#da000d','#ff2a36','#ffa0a5','#f003ff','#f778ff','0.5','0.75']) 
```

* * *

这是一个示例图片：

![例子](https://i.stack.imgur.com/ifNXo.jpg)

如果有人告诉我如何解决这个问题，我将不胜感激。

阿列克谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:47:36.657

使用 Joe Kington 的建议，我替换了命令

```
cs=map.pcolormesh(x,y,value,cmap=varvid,norm=norm) 
```

通过命令

```
cs=plt.scatter(x,y,c=value,s=0.6, edgecolors='none',marker=',',cmap=varvid,norm=norm) 
```

这很好地可视化了降水分布。

感谢您的帮助！

# c# - 折线图 - 更改边框宽度会删除空间

> ID：15947795
> 
> 赞同：4
> 
> 时间：2013-04-11T11:37:18.190
> 
> 标签：c#, graphics

我正在创建一个折线图，我想在不改变线条长度的情况下增加线条的高度或粗细。

在增加宽度属性之前，它看起来像这样：

![更改宽度之前的图表](https://i.stack.imgur.com/rMPd5.png)

增加宽度属性后，它看起来像这样：

![更改宽度属性后的图表](https://i.stack.imgur.com/OyLDC.png)

我只想增加`height`，但没有这样的属性，所以我尝试改变`width`属性。不幸的是，这增加了`length`和`width`。反正有没有只改变`height`？`width`如您所见，如果我增加，行之间的空间就会消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T05:20:50.060

我通过删除该行的开头和结尾来解决此问题。当我增加边框宽度时，它也增加了开始和结束的宽度，这导致了奇怪的行为。下面代码中的注释解决了它：

```
void Form1_Paint(object sender, PaintEventArgs e) {
    float[] dashValues = { 8, 5, 2, 4 };
    Pen blackPen = new Pen(Color.Black, 5);
    blackPen.DashPattern = dashValues;
    blackPen.Width = 3;
    //blackPen.StartCap=LineCap.Round
    blackPen.StartCap =LineCap.Flat;
    //blackPen.StartCap=LineCap.Round
    blackPen.EndCap = LineCap.Flat;
    e.Graphics.DrawLine(blackPen, new Point(85, 95), new Point(405, 95));
} 
```

# symfony - 使用 Sonata Admin 显示字段的问题 - Symfony 2.0

> ID：15947799
> 
> 赞同：1
> 
> 时间：2013-04-11T11:37:33.167
> 
> 标签：symfony, sonata-admin

我想用 SonataAdmin 显示一个对象的一些字段。其中一个字段是数据库中的整数（状态），但我不想显示整数，否则会显示特定字符​​串，具体取决于该字段的值。

```
public function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('name')
        ->add('notice')
        ->add('start')
        ->add('end')
        ->add('status')            
    ;
} 
```

可能吗？

第二个问题：在同一个示例中，我想添加一个未映射到数据库（人员）中的字段，因为这是使用与其他对象相关的数据计算的。

```
public function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('name')
        ->add('notice')
        ->add('start')
        ->add('end')
        ->add('status')
        ->add('people')         
    ;
} 
```

我可以用 Sonata Admin 做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:51:26.350

我想您最好的方法是在您的实体中制作自定义设置器和获取器。

例如，您有实体用户：

```
private $customState; // NOTE -> NO ORM MAPPING because you don't want an actual column

public function setCustomState()   {
         if($this->state){
            $this->customState = 'yup!';
            return $this;
         }
         $this->customState = 'nope!';
         return $this;
    }

public function getCustomState()   {
             return $this->customState;
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T08:47:38.713

感谢你的回答。但是，我一直在寻找 Internet 上的信息，并找到了其他方法来做到这一点。您可以为您的字段呈现特定模板。在您的 Admin 类中，您可以在 configureListFields 函数中执行以下操作：

```
public function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->addIdentifier('name')
        ->add('notice')
        ->add('start')
        ->add('end')
        ->add('status', 'string', array('template' => 'YourBundle:YourController:status_field.html.twig'))
        ->add('Resources', 'string', array('template' => 'YourBundle:YourController:resources_field.html.twig'))
} 
```

对于“状态”字段，status_field.html.twig 模板将呈现如下：

```
{% extends 'SonataAdminBundle:CRUD:base_list_field.html.twig' %}

{% block field %}
    <div>
        {% if object.status == 0 %} 
            <strong>Inactivo</strong>
        {% elseif object.status == 1 %}
            <strong>Activo</strong>
        {% endif %}
    </div>
{% endblock %} 
```

对于我的第二个问题，同样的解决方案是有效的。为“资源”字段呈现的模板如下：

```
{% extends 'SonataAdminBundle:CRUD:base_list_field.html.twig' %}

{% block field %}
    <div>
        <strong>{{ object.getResources|length }}</strong>
    </div>
{% endblock %} 
```

通过这种方式，对象被传递给模板，您可以使用它的方法来获取您需要的信息。在这种情况下，方法 getResources() 用于显示其长度。

# xslt - 使用 XSLT 替换单个元素中的多个字符

> ID：15947803
> 
> 赞同：0
> 
> 时间：2013-04-11T11:37:45.080
> 
> 标签：xslt

我需要查找实体和字符并将其替换为字符串。例如，`&#x00A0;`应该替换为`' '`空格，`$`应该替换为`|doll|`，`%`应该替换为`|perc|`。我可以使用 XSLT 1.0。

**XML 文档：**

```
<?xml version="1.0"?>
<chapter>
<math>
<mtext>This is&#x00A0;$400, 300%to500%.</mtext>
</math>
</chapter> 
```

**XSLT 1.0 转换尝试：**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="mtext">
<mtext>
    <xsl:choose>
<xsl:when test="contains(.,'&#x00A0;') or contains(.,'$') or contains(.,'%')">
<xsl:if test="contains(.,'&#x00A0;')"><xsl:call-template name="replace-string"><xsl:with-param name="text" select="."/><xsl:with-param name="from">&#x00A0;</xsl:with-param><xsl:with-param name="to" select="' '"/></xsl:call-template><xsl:variable name="mtext_text" select="."/></xsl:if>
<xsl:variable name="mtext_text" select="."/>
<xsl:if test="contains(.,'$')"><xsl:call-template name="replace-string"><xsl:with-param name="text" select="mtext_text"/><xsl:with-param name="from">$</xsl:with-param><xsl:with-param name="to" select="'|doll|'"/></xsl:call-template><xsl:variable name="mtext_text" select="."/></xsl:if>
<xsl:variable name="mtext_text" select="."/>
<xsl:if test="contains(.,'%')"><xsl:call-template name="replace-string"><xsl:with-param name="text" select="mtext_text"/><xsl:with-param name="from">%</xsl:with-param><xsl:with-param name="to" select="'|perc|'"/></xsl:call-template></xsl:if>
</xsl:when>
<xsl:otherwise>
                <xsl:apply-templates/>
</xsl:otherwise>
</xsl:choose>
</mtext>
</xsl:template>

<xsl:template name="replace-string">
    <xsl:param name="text"/>
    <xsl:param name="from"/>
    <xsl:param name="to"/>
    <xsl:choose>
      <xsl:when test="contains($text, $from)">
        <xsl:variable name="before" select="substring-before($text, $from)"/>
        <xsl:variable name="after" select="substring-after($text, $from)"/>
        <xsl:variable name="prefix" select="concat($before, $to)"/>
        <xsl:copy-of select="$before"/>
          <xsl:value-of select="$to" disable-output-escaping="yes"/>
        <xsl:call-template name="replace-string">
          <xsl:with-param name="text" select="$after"/>
          <xsl:with-param name="from" select="$from"/>
          <xsl:with-param name="to" select="$to"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

**所需输出：**

```
<?xml version='1.0' ?>
<mtext>This is |doll|400, 300|perc|to500|perc|.</mtext> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:57:25.170

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" extension-element-prefixes="xsl">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:reps>
  <rep>
    <old>&#x00A0;</old>
    <new xml:space="preserve"> </new>
  </rep>
  <rep>
    <old>$</old>
    <new>|doll|</new>
  </rep>
  <rep>
    <old>%</old>
    <new>|perc|</new>
  </rep>
 </my:reps>

 <xsl:variable name="vReps" select="document('')/*/my:reps/*"/>

 <xsl:template match="mtext">
     <xsl:copy>
       <xsl:call-template name="multiReplace"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template name="multiReplace">
  <xsl:param name="pText" select="."/>
  <xsl:param name="pRep" select="$vReps[1]"/>

  <xsl:choose>
    <xsl:when test="not($pRep)"><xsl:value-of select="$pText"/></xsl:when>
      <xsl:otherwise>
        <xsl:variable name="vReplaced">
            <xsl:call-template name="replace">
              <xsl:with-param name="pText" select="$pText"/>
              <xsl:with-param name="pOld" select="$pRep/old"/>
              <xsl:with-param name="pNew" select="$pRep/new"/>
            </xsl:call-template>
        </xsl:variable>

        <xsl:call-template name="multiReplace">
         <xsl:with-param name="pText" select="$vReplaced"/>
         <xsl:with-param name="pRep" select="$pRep/following-sibling::*[1]"/>
        </xsl:call-template>
      </xsl:otherwise>
  </xsl:choose>
 </xsl:template>

 <xsl:template name="replace">
   <xsl:param name="pText"/>
   <xsl:param name="pOld"/>
   <xsl:param name="pNew"/>

   <xsl:if test="$pText">
     <xsl:value-of select="substring-before(concat($pText,$pOld), $pOld)"/>
       <xsl:if test="contains($pText, $pOld)">
         <xsl:value-of select="$pNew"/>
             <xsl:call-template name="replace">
               <xsl:with-param name="pText" select="substring-after($pText, $pOld)"/>
               <xsl:with-param name="pOld" select="$pOld"/>
               <xsl:with-param name="pNew" select="$pNew"/>
             </xsl:call-template>
       </xsl:if>
   </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<chapter>
    <math>
        <mtext>This is&#x00A0;$400, 300%to500%.</mtext>
    </math>
</chapter> 
```

**产生想要的正确结果**：

```
<mtext>This is |doll|400, 300|perc|to500|perc|.</mtext> 
```

# javascript - 在javascript中显示来自php的json

> ID：15947805
> 
> 赞同：0
> 
> 时间：2013-04-11T11:37:52.520
> 
> 标签：javascript, json, parsing

我有一个 php 文件返回这个有效的 Json 数据，存储在一个名为“json”的 javascript 变量中。

```
[
"564654.56464",
"848492.25477",
"918821.54471"
] 
```

我尝试在 javascript 中显示它：

```
var object = JSON.parse(json);
document.write(object. ..... ); 
```

我不知道在这里添加什么，因为我的 Json 不像 {"attribute":"value","attribute2":"value2"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:40:00.420

您可以将 PHP 文件与 json 标头一起编码。我想这应该可以解决问题！

```
header('Content-Type: application/json');
echo json_encode($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:57:31.947

使用 document.write(object.toString());

# backbone.js - 如何将新模型附加到backbone.js中查看？

> ID：15947812
> 
> 赞同：0
> 
> 时间：2013-04-11T11:38:11.000
> 
> 标签：backbone.js

在将新模型添加到我的集合时，我不希望刷新视图，但我希望将模型附加到我的集合并附加到视图中。所以我不应该再次渲染视图。是否可以通过 Backbone.js？我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:49:06.883

您可以拥有一个处理整个布局的视图，以及一个表示单个模型的视图。您可以让后者的 render 方法返回单个模型的 HTML，并使用主视图将结果附加到列表中。[Addy Osmani 的“开发 Backbone.js 应用程序”](http://addyosmani.github.io/backbone-fundamentals/#application-view)一书中有一个很好的例子。看看他解释他如何将每个任务呈现到他的 Todo App 的 todo 列表的部分，如果我理解得很好，你的问题就在那里解决了。

# ruby-on-rails - 关联 has_many Rails 模型

> ID：15947813
> 
> 赞同：1
> 
> 时间：2013-04-11T11:38:25.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, model-associations

我有三个模型，用户、帖子和书籍，通过第四个 kms 关联。

*   后模型有许多公里和书籍通过
*   图书模型有很多公里和帖子，通过
*   km 属于 book 和 post

我已经针对上述案例尝试[了本教程并且成功了。](http://railscasts.com/episodes/17-habtm-checkboxes-revised)

现在，我想创建一个关联，声明一个 Post。

*   用户 has_many kms
*   公里属于用户

协会：

```
class User < ActiveRecord::Base
  include Tenantable::Schema::Model
  has_many :kms, dependent: :destroy

  devise :database_authenticatable, :registerable,
  :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

end

class Post < ActiveRecord::Base
  attr_accessible :name, :year, :author, :book_ids
  has_many :kms
  has_many :books, through: :kms   
end

class Book < ActiveRecord::Base
  attr_accessible :name
  has_many :kms
  has_many :posts, through: :kms
end

class Km < ActiveRecord::Base
  attr_accessible :count, :book_id, :post_id, :user_id
  belongs_to :book
  belongs_to :post
  belongs_to :user
end 
```

这是在 PostsController 上创建的样子：

```
def create
  #this not working
  @post = current_user.build.kms(params[:post]) 
  @post.save
end 
```

这里的视图表单创建看起来像：

```
<%= form_for @post, :url => create_post_subdomain_path(@post), :method => :post  do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :year, "Year" %><br />
    <%= f.text_field :year %>
  </div>
  <div class="field">
    <%= f.label :author, "Author" %><br />
    <%= f.text_field :author %>
  </div>
  <div class="field">
    <%= f.label "Book" %><br />
    <%= hidden_field_tag "post[book_ids][]", nil %>
     <% Book.all.each_with_index do |book, index| %>
         <%= label_tag dom_id(book) do %>
          <%= check_box_tag "post[book_ids][]", book.id, @post.book_ids.include?(book.id), id: dom_id(book) %> <%= book.nama %>
          <% end %>&nbsp;
         <%= '<br/><br/>'.html_safe if index == 3 %>
    <% end %>

  </div>
    <br/>
  <div class="actions">
    <%= f.submit ( "Save" ), :class => "btn btn-inverse btn-medium" %>&nbsp;&nbsp; or &nbsp;&nbsp;<%= link_to 'Cancel', list_book_subdomain_path, :class => "btn btn-medium btn-primary" %>
  </div>
<% end %> 
```

我`current_user.id`尝试`km.user_id`在`user`创建`post`.

但我得到了错误

`Can't mass-assign protected attributes: name, year, author, book_ids`

有什么建议么？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:25:07.830

问题可能出在 PostsController 的创建操作中。尝试以下操作：

```
def create
  @post = Post.create(params[:post])
  @km = current_user.kms.build(:post_id => @post.id)
  @km.save
end 
```

您仍然需要在 Km 上设置 book_id ，但我不清楚这将如何工作，因为您的帖子说它可以`has_many :books, :through => :kms`，但是 Km `belongs_to :book`。那没有意义。你`book_ids`在邮报上做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:21:44.333

也许你想要

```
@post = Post.create(params[:post])
current_user.kms.create(post_id: @post.id) 
```

反而？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:47:49.780

**解决了**

我找到了一个解决方案，一个像这样的解决方案： `@post`create and update all column `user_id`on `km`where `@post_id => @post.id`，所以输出会是这样的

```
@post = Post.create(params[:post])
Km.where(:post_id => @post.id).update_all(:user_id => current_user.id) 
```

**输出**

```
#<Km id: 1, post_id: 1, user_id: 1>,
#<Km id: 2, post_id: 1, user_id: 1>,
#<Km id: 3, post_id: 1, user_id: 1>, 
```

# sparql - 带有两个变量的 Sparql 查询

> ID：15947814
> 
> 赞同：2
> 
> 时间：2013-04-11T11:38:26.587
> 
> 标签：sparql

如何使用 2 个变量进行 sparql 查询？让我解释一下：我有一个历史地图的本体。我的实体是：`HistoricalMap`, `Language`，`Color` 连接它们的对象属性是：`hasLanguage`, `hasColor`（ hist.map 有语言和颜色）。如果我进行查询：

```
SELECT ?HistoricalMap ?Language ?Color
        WHERE { ?HistoricalMap p1:hasLanguage ?Language.
                       ?HistoricalMap p1:hasColor ?Color.
} 
```

我得到所有有颜色和语言的地图。

我如何索要`hasColor`“红色”和`hasLanguage`法语的地图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T18:36:20.777

因为你想要“AND”，所以你可以在模式中使用常量。

```
SELECT ?HistoricalMap
        WHERE { ?HistoricalMap p1:hasLanguage "French".
                       ?HistoricalMap p1:hasColor "Red" .
} 
```

如果您还想返回变量，请使用`FILTER`：

```
SELECT ?HistoricalMap ?Language ?Color
        WHERE { ?HistoricalMap p1:hasLanguage ?Language.
                       ?HistoricalMap p1:hasColor ?Color.
                FILTER(?Language = "French" && ?Color = "Red")
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:36:31.817

您需要了解*法语*和*红色*在数据中的表示方式。

在执行您提到的查询时，看看它们是如何返回的就足够了。

查询 dbpedia，例如：

```
SELECT ?entity
WHERE {
  ?entity dbpedia-owl:colour <http://dbpedia.org/resource/Red> .
  ?entity dbpedia-owl:language <http://dbpedia.org/resource/French_language> .
} 
```

# ios - iPhone主拆分视图？

> ID：15947818
> 
> 赞同：-1
> 
> 时间：2013-04-11T11:38:48.447
> 
> 标签：ios, objective-c

我想在我的应用程序中为 iPhone 应用程序实现类似拆分视图。我想要它与 Facebook 应用程序中的应用程序相同，您可以在其中按下或从左向右滑动以显示侧视图。关于我可以在哪里开始实施它的任何提示？苹果是否提供任何专门针对它的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:49:13.560

我认为您真的真的需要看看以下这些教程->

[http://iphonebyradix.blogspot.in/2011/07/uisplitviewcontroller-tutorial.html](http://iphonebyradix.blogspot.in/2011/07/uisplitviewcontroller-tutorial.html)

[http://maniacdev.com/2011/11/tutorial-ipad-uisplitviewcontroller-and-storyboards/](http://maniacdev.com/2011/11/tutorial-ipad-uisplitviewcontroller-and-storyboards/)

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)

[http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial](http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial)

[http://www.techotopia.com/index.php/An_iPad_iOS_5_Split_View_and_Popover_Example](http://www.techotopia.com/index.php/An_iPad_iOS_5_Split_View_and_Popover_Example)

[http://highoncoding.com/Articles/851_Implementing_UISplitViewController_with_Storyboards.aspx](http://highoncoding.com/Articles/851_Implementing_UISplitViewController_with_Storyboards.aspx) ......

# artificial-intelligence - 15个谜题的不相交模式数据库

> ID：15947824
> 
> 赞同：2
> 
> 时间：2013-04-11T11:39:10.510
> 
> 标签：artificial-intelligence, computer-science

我有一些问题。1.如何为15个拼图创建不相交的模式数据库？2.模式数据库（5-5-5）或（6-3-2）是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:48:35.757

你试图一次做太多事情。考虑一下这个谜题的状态：

```
 1  2  3  4
 5 10  6  8
 9  7  _ 12
13 14 11 15 
```

（`_`空白在哪里）。**排列**（在这种情况下）是与相邻瓦片的空白空间的交换：

```
 1  2  3  4
 5 10  6  8
 9  7 12  _
13 14 11 15 
```

**模式**是状态的部分规范，其中（在此上下文中）某些图块可能未指定，如下所示：

```
 1  2  3  4
 5  *  *  *
 9  *  *  *
13  *  *  _ 
```

这个特定的模式看起来像一个**目标模式**，也就是说目标状态的部分规范。该模式的**模式数据库**是可以通过排列从该模式中获得的所有模式的集合，以及从该模式到达该状态所需的相应最小移动次数。这是另一个目标模式：

```
 *  *  *  *
 *  6  7  8
 * 10 11 12
 * 14 15  _ 
```

请注意，这两个目标模式是**不相交**的（它们没有共同的图块），因此它们的模式数据库称为**不相交模式数据库**。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-11T16:01:32.470

这意味着首先我们必须从

```
 1  2  3  4
 5  *  *  *
 9  *  *  *
 13  *  * _ 
```

例如它将是

```
 1  *  3  4           
 5  2  *  *
 9  *  *  *
 13  *  * _ 

 1  2  3  *
 5  *  *  4
 9  *  *  *
 13  *  * _ 
```

然后从这个排列运行 BFS 并尝试达到目标状态？

如何从这个数字 1,2,3,4,5,9,13 一些伪代码生成所有这些排列？

# eclipse - 在 JAR 文件中包含文档

> ID：15947828
> 
> 赞同：1
> 
> 时间：2013-04-11T11:39:26.693
> 
> 标签：eclipse, jar, documentation, javadoc

使用 Eclipse 可以将文档文件夹附加到 jar 文件中，以便在编程时查看 jar 类的文档。我的问题是：是否可以直接将文档包含到jar文件中，以避免程序员每次需要使用jar文件时都链接两个部分？（所以让我只分发一个 jar 文件，而不是带有 jar 及其文档的 zip 文件）。

### 编辑

最终结果：**不可能。**:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:48:51.737

我不明白“直接包含文档”是什么意思，但是您可以将任何内容放入 jar 文件中。如果您使用 ant（它可以在 Eclipse 中），只需为您的分发构建创建一个目标并将文档文件夹传递给[Jar task](http://ant.apache.org/manual/Tasks/jar.html)。

```
 <jar destfile="${dist}/lib/app.jar">
    <fileset dir="${build}/classes"
             excludes="**/Test.class"
    />
    <fileset dir="${src}/documentation"/>
  </jar> 
```

# jquery - Jquery Parsing JSON 说未定义

> ID：15947829
> 
> 赞同：0
> 
> 时间：2013-04-11T11:39:28.187
> 
> 标签：jquery, json

在我的 Jquery 成功 fn 中，当我执行此操作时 console.log(data);

我正进入（状态，

```
 [
  "{\"name\":\"android\"}"
] 
```

当我尝试检索这样的 data.name[0] 名称时，我得到了未定义。

我也试过data[0].name，还是说未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:41:02.827

首先将字符串中的数组值转换为JSON，然后解析。

```
var json = JSON.parse(data[0]);
json.name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:02:10.120

这会产生值：

```
 var data = '[{\"name\":\"android\"}]';
    eval("data=" + data);
    alert(data[0].name); 
```

或者

```
 var data = '[{\"name\":\"android\"}]';
    data = JSON.parse(data)
    alert(data[0].name); 
```

您可以发布您尝试过的代码吗？

# php - PHP在截屏时得到黑色图像

> ID：15947830
> 
> 赞同：0
> 
> 时间：2013-04-11T11:39:46.363
> 
> 标签：php, internet-explorer, browser, com, screenshot

我使用下面的代码，然后将结果保存在 jpg 文件中。但有时我只得到黑色图像。它并非一直都在发生，我能做些什么来防止它？没有抛出错误，只有一些屏幕截图是黑色的。我在 Windows 上运行它。

```
 $browser = new com('internetexplorer.application');
    $browserhandle = $browser->hwnd;
    $browser->visible = true;
    $browser->fullscreen = true;
    $browser->navigate('http://www.example.com');
    while ($browser->busy) {
        com_message_pump(1000);
        if ($timer + $timelimit < time()) {
            $browser->stop();
            break;
        }
    }
    sleep(5);
    $img = imagegrabwindow($browserhandle, 0);
    $browser->Quit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T10:16:06.513

更换`sleep(5)`后`imagegrabwindow(...)`

它帮助我解决了同样的问题

我的代码是：

```
$im = imagegrabwindow($handle, 0);
imagejpeg($im, "test.jpg");
sleep(5);
$browser->Quit();
imagedestroy($im); 
```

# html - HTML5 拖放作为表单

> ID：15947831
> 
> 赞同：0
> 
> 时间：2013-04-11T11:39:47.033
> 
> 标签：html

我环顾四周，我想知道这可以通过 HTML5 拖放实现。

我想要 3 个部分，例如 1 个包含男性图像的部分，1 个包含女孩图像的部分，以及 1 个可以将 1 个男人和 1 个女孩拖入的部分。一旦两个人被拖入此部分，然后按下提交按钮，它会将其视为表单并传递要处理的男孩的 ID 和女孩的 ID。

我的 HTML 看起来像这样

```
<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br>
<img id="drag1" src="guy.jpg" draggable="true" ondragstart="drag(event)" width="200" height="200">
<img id="drag2" src="girl.jpg" draggable="true" ondragstart="drag(event)" width="200" height="200"> 
```

img id 是我可以为图像设置 ID 的地方吗？
如何将表单合并到 div1 部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:41:02.173

我认为你可以用 jQuery 的提交来做到这一点。[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

# entity-framework - EF Context 有意外的存储过程 > 函数映射

> ID：15947832
> 
> 赞同：1
> 
> 时间：2013-04-11T11:39:47.430
> 
> 标签：entity-framework

当我将这样的 sql 存储过程导入我的数据库第一个模型时

```
Declare@A int =0;
Declare@B int =0;
Declare@C int =0;

Set @A = (select Count ...)
Set @B = (select Count ...)
Set @C =  IsNull((@A + @B),0)
Select @C As UseCount 
```

为什么 EF 会在生成的上下文中生成方法签名，返回类型为

```
ObjectResult<Nullable<int>> 
```

而不仅仅是`int`我所期望的返回类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:36:47.243

您必须“强烈键入”返回集。一种方法，使用 NOT NULL 列声明表变量

```
Set @A = (select Count(*) From Tasks)
Set @B = (select Count (*) From Tasks)
Set @C =  IsNull((@A + @B),0)
--Select @C As UseCount 
DECLARE @MyTableVar table(UseCount int NOT NULL)
INSERT @MyTableVar SELECT @C
SELECT TOP(1) UseCount FROM @MyTableVar 
```

也许可以缩短一点。

这会将生成的方法从

```
public virtual ObjectResult<Nullable<int>> TestProc()
{
    return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction<Nullable<int>>("TestProc");
} 
```

至

```
public virtual int TestProc()
{
    return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction("TestProc");
} 
```

**抱歉，更正**- 虽然生成的方法看起来不错，但它实际上并不起作用。第二个版本是从存储过程返回 RETURN 代码，而不是所需的标量结果。将表变量添加到存储过程中确实会影响实体框架添加函数导入向导的“获取列信息”按钮 - Nullable 列从 true 更改为 false。但是，如果将返回类型设置为 Scalars，则生成的方法仍然使用 Nullable<>。

您可以在 DbContext 的部分类中手动编码该方法，如下所示：

```
public partial class OnModelCreatingEntities
{
    public virtual ObjectResult<int> TestProc2()
    {
        return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction<int>("TestProc");
    }
} 
```

这给出了正确的结果，并且在重新生成类时不会被覆盖。它也适用于原始的 transact-sql。

# mysql - 在 mysql 中调用存储过程而不为具有默认值的列传递值

> ID：15947834
> 
> 赞同：0
> 
> 时间：2013-04-11T11:39:48.870
> 
> 标签：mysql, stored-procedures

我有一张至少有 25 列的大桌子。这些列都是 NN(Not Null)，其中 20 个具有默认值。这些值本身就是长字符串。所以我决定用适当的默认值设计表格。因此，如果有人不想要其他值，则不需要插入它们。

这里是主要问题：对于大多数情况，用户只需要插入 5 个新的不同值，但有时需要指定更多值。现在我有一个包含 25 个参数的存储过程。

**如何在不为这 20 列中的某些列指定值的情况下调用 sp，而只指定所需的那些？**

# c++ - 创建一个模板，该模板是具有多个变量的自定义数据类型的向量

> ID：15947838
> 
> 赞同：1
> 
> 时间：2013-04-11T11:39:57.140
> 
> 标签：c++, templates, vector, stl

我必须能够使用下面的命令，其中 T 可以是任何类型，例如字符串。

```
Counter<T> counter; 
```

Counter 应该能够容纳多个项目，因此我选择将其实现为向量。每个项目本身必须包含一个类型为 T 的变量（如果我们继续上面的示例，则为一个字符串）和一个 int。我需要使解决方案尽可能简单，因为稍后我将需要创建函数，通过在其他任务中降低 int 值来打印出每个项目。我尝试了以下代码，但 1）它不起作用，2）有更好的解决方案吗？

```
#include<string>
#include<cstdlib>
#include<vector>

template<class T>
class Record{
      T itemtype;
      int total;   
   public:
      int increment(T item);
      int count(T item);
      void printSummary();
};

class Counter{
      vector<Record> data;
};

int main(){

   Counter<string> counter;   

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:42:57.037

你错了，你需要使`Counter`参数化：

```
template <typename T>
class Counter{
      vector<Record<T> > data;
}; 
```

当然，这意味着您的所有记录都`counter`将包含字符串。

如果“计数器应该能够容纳多个项目”真的意味着一个实例`Counter`应该包含各种类型或记录（例如字符串和整数），那么您需要根据您的要求和技术使用类似[`VARIANT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221627%28v=vs.85%29.aspx)或[`boost::any`](http://www.boost.org/doc/libs/1_53_0/doc/html/any.html)或类似的东西[`boost::variant`](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)使用，例如

```
Counter<boost::any> counter; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:44:07.953

您的程序包含一些错误，如下所示。

**小问题：**

首先，一件小事：您不需要包含`<cstdlib>`标题 - 至少不需要包含您所展示的内容。

```
#include<string>
// #include<cstdlib> // <== (YOU DON'T SEEM TO NEED THIS)
#include<vector> 
```

**第一个问题：**

如果您使用非限定名称来引用位于命名空间中的对象，您首先应该有一个`using`声明，让编译器将这些非限定名称解析为正确的完全限定名称（即包括它们所属的命名空间）。

例如，`vector`并且`string`属于`std`命名空间。`std::vector`因此，要么以完全限定的形式 ( and )使用这些名称，要么`std::string`添加适当的`using`声明，如下所示：

```
using std::vector; // USING DECLARATIONS TO ALLOW UNQUALIFIED NAMES SUCH AS
using std::string; // string AND vector TO BE CORRECTLY RESOLVED 
```

**第二个问题：**

最后，您想要的是使您的类`Counter`参数化，并且该参数应该用于实例化 internal `vector`。因此，还必须是一个类模板（毕竟，`Counter`这就是您在函数中使用它的方式）：`main()`

```
// MAKE THIS A CLASS TEMPLATE!
template<typename T>
class Counter{
      vector<Record<T>> data;
}; 
```

**结论：**

完成上述所有更正后，您的代码应如下所示：

```
#include<string>
#include<vector>

using std::vector;
using std::string;

template<class T>
class Record{
      T itemtype;
      int total;   
   public:
      int increment(T item);
      int count(T item);
      void printSummary();
};

template<typename T>
class Counter{
      vector<Record<T>> data;
};

int main(){

   Counter<string> counter;   

   return 0;
} 
```

这是一个显示上述代码编译的[实时示例。](http://liveworkspace.org/code/3kW04t%24153)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:43:41.480

我认为您打算这样做：

```
template<class T>
class Record{
      T itemtype;
      int total;   
   public:
      int increment(T item);
      int count(T item);
      void printSummary();
};

template<class RECORDTYPE>
class Counter{
      vector<Record<RECORDTYPE>> data;
};

int main(){

   Counter<string> counter;   

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:45:29.947

`Record`是一个模板，所以你不能只拥有`vector<Record>`你必须有一个记录类型的向量，即`vector<Record<T> >`

# html - Jenkins 不会正确执行来自 .bat 的命令

> ID：15947846
> 
> 赞同：2
> 
> 时间：2013-04-11T11:40:24.190
> 
> 标签：html, batch-file, jenkins

我已经设置了 Jenkins，以便它构建我的项目，运行一些测试，然后创建一个包含报告的 HTML 页面。

我制作了一个 .bat 文件以在浏览器中打开 html 报告。该 .bat 文件中只有一行：

```
"E:\user\Visual Studio 2010\JenkinsWorkspace\JobTest\index.html" 
```

**当我自己在提示符中运行该 .bat 时，页面 index.html 是打开的（因此它可以工作）。**

但问题是，**当我设置 Jenkins 的作业来运行该 .bat 时，什么也没有发生。** 调用 .bat 后，作业卡住了，永远不会完成。

知道为什么吗？

注意：我有 Jenkins 成功执行的其他 .bat（不打开 html 页面）。

编辑：这是我在詹金斯菜单的提示日志中得到的错误：

> C:\Program Files\Jenkins\jobs\JobTest2_enUnSeulScript\workspace>echo "打开 html 页面" ">> 打开 html 页面"
> 
> C:\Program Files\Jenkins\jobs\JobTest2_enUnSeulScript\workspace>"C:\Program Files\Google\Chrome\Application\chrome.exe" "E:\user\Visual Studio 2010\JenkinsWorkspace\JobTest\testResults.14h05m15s65ms.11.04 .2013.trx.htm" [688:3900:0411/140520:ERROR:gpu_info_collector_win.cc(96)] 无法检索有效的 WinSAT 评估。
> [688:3900:0411/140520:ERROR:process_singleton_win.cc(540)] 无法创建锁定文件！错误代码：32
> [688:3900:0411/140520:ERROR:chrome_browser_main.cc(1157)] 无法为您的配置文件目录创建 ProcessSingleton。这意味着运行多个实例将启动多个浏览器进程，而不是在现有进程中打开一个新窗口。现在中止以避免配置文件损坏。
> 构建步骤 'Exécuter une ligne de commande batch Windows' 将构建标记为失败 [htmlpublisher]
> 归档 HTML 报告... [htmlpublisher] 在项目级别归档 E:\user\Visual Studio 2010\JenkinsWorkspace\JobTest 到 C:\Program Files\ Jenkins\jobs\JobTest2_enUnSeulScript\htmlreports\HTML_Tests_Report 已完成：失败

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-02T04:51:43.793

如果您将 Jenkins 作为 Window 的服务运行，您可能需要启用该服务以与桌面交互。请执行下列操作：

1.  打开服务模块
2.  右键单击 Jenkins 并选择“属性”
3.  在“登录”选项卡上，以“本地系统帐户”运行并选中“允许服务与桌面交互”复选框

- 或者 -

您可以通过命令行运行 Jenkins。即：“java -jar jenkins.war”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:54:38.437

我猜你的 Jenkins 安装是作为 Windows 服务运行的。当 Jenkins 在 Windows 机器上作为服务运行时，它在系统帐户下运行，而不是用户帐户。系统帐户通常没有与用户帐户相同的设置。

您可能想尝试将 CMD shell 作为系统帐户启动。（这个问题的答案应该可以帮助您：[How Do You Run CMD under System Account](https://stackoverflow.com/questions/77528/how-do-you-run-cmd-exe-under-the-local-system-account)。）从那里，尝试运行批处理文件，看看会发生什么。你可能会发现你需要在它工作之前设置一些类似 PATH 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T16:39:51.980

我知道这已经晚了，但我刚刚回答了另一个关于如何在 Windows 上从 Jenkins 的服务中打开 .exe（或 .bat）的问题

[在 Jenkins CI 上打开 Excel](https://stackoverflow.com/questions/22602951/open-excel-on-jenkins-ci/22610664#22610664)

问题是，虽然您的命令实际上有效，但它在`Session 0`（这是启动 Jenkins 服务的用户会话`Local System`）中执行此操作，您在通过自己的用户帐户登录时看不到它，很可能是在`Session 1`.

希望这可以帮助

# php - Zend DB 仅选择 1 个具有多个连接的表

> ID：15947848
> 
> 赞同：4
> 
> 时间：2013-04-11T11:40:31.003
> 
> 标签：php, mysql, zend-framework, zend-db

我正在使用 Zend DB 使用以下代码生成查询：

```
$table->select()
        ->setIntegrityCheck(false) //required for multi-table join
        ->from('modules')
        ->joinInner(
            'basket_modules',
            'modules.id = basket_modules.id')
        ->joinInner(
            'baskets',
            'baskets.id = basket_modules.basket_id')
        ->where('baskets.id = ?', $this->id); 
```

这将生成 SQL：

```
SELECT modules.*, basket_modules.*, baskets.*
FROM modules
INNER JOIN basket_modules ON modules.id = basket_modules.id
INNER JOIN baskets ON baskets.id = basket_modules.basket_id
WHERE (baskets.id = '3') 
```

我的问题在于 SELECT 部分，它选择了所有 3 个表，而不仅仅是我想要的模块。所以我想要生成的查询是：

```
SELECT `modules`.*
FROM `modules`
#etc... 
```

我怎样才能做到这一点？如果我手动编辑查询并运行它，它会返回我想要的内容，因此语法应该没有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T11:53:30.610

请查看手册[Zend_Db_Select](http://framework.zend.com/manual/1.12/en/zend.db.select.html#zend.db.select.building.join)中的示例。滚动到示例 #13。

> 要从表中不选择任何列，请使用空数组作为列列表。这种用法也适用于 from() 方法，但通常您需要查询中的主表中的某些列，而您可能不希望连接表中的列。

```
$select = $db->select()
         ->from(array('p' => 'products'),
                array('product_id', 'product_name'))
         ->join(array('l' => 'line_items'),
                'p.product_id = l.product_id',
                array() ); // empty list of columns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:50:24.247

您可以为其他表和主表指定列名，如下所示

```
$table->select()
    ->setIntegrityCheck(false) //required for multi-table join
    ->from('modules',array('modules.*'))
    ->joinInner(
        'basket_modules',
        'modules.id = basket_modules.id',array('basket_modules.id'))
    ->joinInner(
        'baskets',
        'baskets.id = basket_modules.basket_id',array('baskets.id'))
    ->where('baskets.id = ?', $this->id); 
```

所以sql会像

```
SELECT modules.*, basket_modules.id, baskets.id
FROM modules
INNER JOIN basket_modules ON modules.id = basket_modules.id
INNER JOIN baskets ON baskets.id = basket_modules.basket_id
WHERE (baskets.id = '3') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:52:22.507

```
$table->select()
        ->setIntegrityCheck(false) //required for multi-table join
        ->from('modules')
        ->joinInner(
            'basket_modules',
            'modules.id = basket_modules.id',array(''))
        ->joinInner(
            'baskets',
            'baskets.id = basket_modules.basket_id',array(''))
        ->where('baskets.id = ?', $this->id); 
```

给一个空数组作为第三个参数，`join`否则它将从加入的表中选择所有字段。如果你想要一些字段，那么在加入时指定数组中的字段名称。

# sql - 数据库关系事务和引用表

> ID：15947858
> 
> 赞同：0
> 
> 时间：2013-04-11T11:40:53.353
> 
> 标签：sql, sql-server, rdbms, foreign-key-relationship, database-normalization

嗨，我有一些关于如果删除外国数据我将如何处理的问题

我有：一个事务表，它有用户和分支的外键

因此，如果删除事务表所引用的用户，则事务记录

也会被删掉怎么办？？你们能给我一些建议吗？谢谢

我的表是：事务、分支和用户

1 个分支可以有很多事务 1 个用户可以有很多事务

事务 1--------* 分支事务 1--------* 用户

因此，如果我删除用户或分支，则引用它的事务记录也将被删除.. 如果我不级联删除，它将只是事务表中的孤儿 ID，没有用户或分支可供参考。那我该怎么办呢？请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:49:36.500

我假设您有一个外键关系，其中操作设置为 ON DELETE CASCADE。如果您不希望将来发生删除，则需要将外键操作更改为 ON DELETE NO ACTION。

如果您询问如何找回已删除的记录，则必须从备份中恢复它们。

# jquery - jquery表单更改，功能无法识别单击事件

> ID：15947859
> 
> 赞同：0
> 
> 时间：2013-04-11T11:40:55.917
> 
> 标签：jquery, forms, onclick, onchange

在我的表单上，单击事件在我更改输入值时不起作用。

**演示** [http://jsfiddle.net/RHuYs/3/](http://jsfiddle.net/RHuYs/3/)

```
$('form.form-calculator input').on('change,click', function() {
    if ($(this).val() === 0) {
        alert('HELLO');
        this.value=0;
    }
    calc_total();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:42:33.327

语法是`'change click'`空格而不是逗号:)

**编辑**

您的小提琴中还有另一个问题，您的侦听器嵌套在您的 calc_total() 函数中，我对其进行了编辑并将其放入文档就绪函数中。它似乎工作。

```
$(document).ready(function(){
    $('form.form-calculator input').on('change click', function() {
        if ($(this).val() === 0) {
            alert('HELLO');
            this.value=0;
        }
        calc_total();
    });
}); 
```

[http://jsfiddle.net/zMAz6/](http://jsfiddle.net/zMAz6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:59:34.233

看看这里有什么问题：

1.  你有你的`.click()`内部`calc_total()`函数，它应该在`doc ready`处理程序中。
2.  在此处使用`==`而不是，`===`因为 3 个等号表示“没有类型强制的平等”。使用三等号，值的类型也必须相同。

试试这个：

```
$(function () {
   $('form.form-calculator input').on('change click focus', function () {
      if ($(this).val() == 0) {
        alert('HELLO');
        this.value = 0;
      }
      calc_total();
   });
}); 
```

### [更新的小提琴](http://jsfiddle.net/RHuYs/5/)

# php - Zend 2，Doctrine 2 实体验证器

> ID：15947862
> 
> 赞同：0
> 
> 时间：2013-04-11T11:40:58.530
> 
> 标签：php, validation, doctrine-orm, zend-framework2, zend-inputfilter

## 单字段验证

是否可以检查一个值是否已经存在于另一个实体中？因此，当用户名已经存在时，新用户将无法获得该用户名。在原则 2 中，有一些验证器检查对象是否存在或唯一对象（不知道 ZF2 验证器是否可以使用它？）。我怎样才能把它放在我的`inputFilter`用户名不能重复？我的用户名现在有以下 inputFilter：

```
$inputFilter->add($factory->createInput(array(
                'name' => 'username',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array( array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 3,
                            'max' => 50,
                ),
            ),
        ),
 ))); 
```

是否可以使用理论验证器扩展此验证器，以便我可以检查是否存在重复的用户名？

## 多字段验证

目前我正在捕获 DBAlException，以查看是否出现问题，但在这种情况下，我希望返回一条消息，说明出现了什么问题，例如重复键或唯一约束无效。因此，该字段的消息出错了。

```
try {
$this->getEntityManager()->flush();
            } catch (\Doctrine\DBAL\DBALException $e) {
                $this->flashMessenger()->addMessage('Duplicate key, please set another name for user.');
return array(
  'form' => $form,
'flashMessages' => $this->flashMessenger()->getCurrentMessages()
                );
} 
```

通过捕获 DBAlException，您无法查看哪些唯一键是无效的。例如：我有一个具有以下内容的类别实体`Unique Constraint -> uq_ParentId_Name`。如何检查此约束是否对新（类别）实体有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:54:53.727

检查 Zend\Validator\Db\NoRecordExists。例如，您希望公司名称是唯一的：

```
new NoRecordExists( array(
    'adapter' => $serviceManager->get( 'Zend\Db\Adapter\Adapter' ),
    'table' => 'COMPANY',
    'field' => 'NAME',
    'message' => 'The company name already exists'
); 
```

您必须将其附加到所需的输入，并且消息将与之相关。

# wpf - 如何根据另一个样式属性设置样式属性值？

> ID：15947866
> 
> 赞同：3
> 
> 时间：2013-04-11T11:41:15.900
> 
> 标签：wpf, triggers

我目前正在尝试为我的控件创建一种样式，该样式根据控件的只读状态更改控件的外观。

我的触发器工作正常，但我想根据其他属性的值更改一些属性。

以 TextBox 控件为例，这是我定义的基本样式触发器：

```
<TextBox.Style>
    <Style TargetType="TextBox">
        <Style.Triggers>
            <Trigger Property="IsReadOnly" Value="true">
                <Setter Property="BorderThickness" Value="0,0,0,0" />
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="Padding" Value="3,3,3,3" />
            </Trigger>
        </Style.Triggers>
    </Style>
</TextBox.Style> 
```

该样式工作正常，并且 TextBox 在只读模式下以接近 TextBlock 的样式呈现。但我想`Padding`根据 和 的初始值来定义属性的`Padding`值`BorderThickness`。

我怎样才能实现这种风格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:27:01.413

你不能 - a`Setter`的值必须是一个常数。

您可能希望更改`TextBox`只读的模板，然后您可以使用 a`TemplateBinding`来访问 的分配值`Padding`。

```
 <Style.Triggers>
        <Trigger Property="IsReadOnly" Value="true">
          <Setter Property="Template">
              <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBoxBase}">
                <TextBlock  Padding="{Binding Padding, RelativeSource={RelativeSource TemplatedParent}}" Text="{Binding Text, RelativeSource={RelativeSource TemplatedParent}}"/>
                </ControlTemplate>
              </Setter.Value>
          </Setter>
        </Trigger>
    </Style.Triggers> 
```

或者，看看您是否可以将边框颜色设置为透明，以便它占据相同的空间但不可见。

# javascript - 在 jquery.event.drag 中触发 dragstart 后更新可用的放置目标

> ID：15947867
> 
> 赞同：18
> 
> 时间：2013-04-11T11:41:15.940
> 
> 标签：javascript, jquery, drag-and-drop

**概述：**

我有一个使用[jquery.event.drag](http://threedubmedia.com/code/event/drag)和[jquery.event.drop](http://threedubmedia.com/code/event/drop)的页面。我需要能够拖放到不断添加到 dom 的元素上，即使在拖动开始之后也是如此。

* * *

**问题：**

当`dragstart`事件触发时，它会检查可用的放置目标并将它们添加到拖动对象。

我遇到的问题是我在`dragstart`事件触发后动态添加放置目标，因此用户无法放置到这些动态添加的放置目标上。

* * *

**例子：**

[http://jsfiddle.net/blowsie/36AJq/](http://jsfiddle.net/blowsie/36AJq/)

* * *

**问题：**

如何更新拖动以允许拖放开始后已添加到 dom 的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T16:26:46.223

您可以使用此代码段。

重要的功能是：`$.event.special.drop.locate();`

在 chrome/safari/firefox/ie9 上测试，似乎可以工作。

[看演示](http://jsfiddle.net/qtnQF)

* * *

**更新**

对于重叠事件，请查看以下代码是否有效。我将它设置在一个匿名函数中只是为了避免任何全局变量。想法是使用 event 的 currentTarget 属性来检查是否不是同一个元素触发了同一个事件。我在 newdrop 元素上设置了一个 id 只是为了在这里进行测试。

[查看更新的演示](http://jsfiddle.net/qtnQF/4/)

```
(function () {
    var $body = $("body"),
        newdrops = [],
        currentTarget = {},
        ondragstart = function () {

            $(this).css('opacity', .75);
        }, ondrag = function (ev, dd) {
            $(this).css({
                top: dd.offsetY,
                left: dd.offsetX
            });
        }, ondragend = function () {

            $(this).css('opacity', '');
            for (var i = 0, z = newdrops.length; i < z; i++)
            $(newdrops[i]).off('dropstart drop dropend').removeClass('tempdrop');
            newdrops = [];
        }, ondropstart = function (e) {
            if (currentTarget.dropstart === e.currentTarget) return;
            currentTarget.dropstart = e.currentTarget;
            currentTarget.dropend = null;
            console.log('start::' + e.currentTarget.id)
            $(this).addClass("active");
        }, ondrop = function () {
            $(this).toggleClass("dropped");
        }, ondropend = function (e) {
            if (currentTarget.dropend === e.currentTarget) return;
            currentTarget.dropend = e.currentTarget;
            currentTarget.dropstart = null;
            console.log('end::' + e.currentTarget.id)
            $(this).removeClass("active");
        };

    $body.on("dragstart", ".drag", ondragstart)
        .on("drag", ".drag", ondrag)
        .on("dragend", ".drag", ondragend)
        .on("dropstart", ".drop", ondropstart)
        .on("drop", ".drop", ondrop)
        .on("dropend", ".drop", ondropend);

    var cnt = 0;
    setInterval(function () {
        var dataDroppables = $body.data('dragdata')['interactions'] ? $body.data('dragdata')['interactions'][0]['droppable'] : [];

        var $newDrop = $('<div class="drop tempdrop" id="' + cnt + '">Drop</div>');
        cnt++;
        $("#dropWrap").append($newDrop);
        var offset = $newDrop.offset();
        var dropdata = {
            active: [],
            anyactive: 0,
            elem: $newDrop[0],
            index: $('.drop').length,
            location: {
                bottom: offset.top + $newDrop.height(),
                elem: $newDrop[0],
                height: $newDrop.height(),
                left: offset.left,
                right: offset.left + $newDrop.width,
                top: offset.top,
                width: $newDrop.width
            },
            related: 0,
            winner: 0
        };
        $newDrop.data('dropdata', dropdata);
        dataDroppables.push($newDrop[0]);
        $newDrop.on("dropstart", ondropstart)
            .on("drop", ondrop)
            .on("dropend", ondropend);
        $.event.special.drop.locate($newDrop[0], dropdata.index);
        newdrops.push($newDrop[0]);
    }, 1000);
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T18:57:45.863

我无法使用 jquery.event.drag 和 jquery.event.drop 让它工作，但我确实让它与原生 HTML5 事件一起工作：

[http://jsfiddle.net/R2B8V/1/](http://jsfiddle.net/R2B8V/1/)

解决方案是将事件绑定到函数内的放置目标上，并调用它来更新绑定。我怀疑您可以使用类似的主体与 jquery.event.drag 和 jquery.event.drop 一起使用。如果我能让那些工作，我会更新我的答案。

这是JS：

```
$(function() {
    var bind_targets = function() {
        $(".drop").on({
            dragenter: function() {
                $(this).addClass("active");
                return true;
            },
            dragleave: function() {
                $(this).removeClass("active");
            },
            drop: function() {
                $(this).toggleClass("dropped");
            }
        });
    };    

    $("div[draggable]").on({
        dragstart: function(evt) {
            evt.originalEvent.dataTransfer.setData('Text', 'data');
        },
        dragend: function(evt) {
            $('.active.drop').removeClass('active');   
        }
    });
  setInterval(function () {
      $("#dropWrap").append('<div class="drop">Drop</div>');
      // Do something here to update the dd.available
      bind_targets();
  }, 1000)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:15:18.713

你不能。在 上`dragstart`，可能的拖放区是从 DOM 计算出来的，直到`dragend`. 即使不断地重新绑定`.on()`（演示： http: [//jsfiddle.net/36AJq/84/](http://jsfiddle.net/36AJq/84/)）也不会提供预期的效果。

我以不同的方式解决了这个问题。（演示：http: [//jsfiddle.net/36AJq/87/](http://jsfiddle.net/36AJq/87/)）

1.  `<div>`从HTML 中的every 开始。
2.  应用`opacity: 0`以使其不可见，并`width: 0`防止其`dropend`在隐藏时出现。
3.  用于每 1000 毫秒`setInterval`显示下一个隐藏的 div ( )。`$('.drop:not(.visible)').first()`

JS：

```
$("body")
  .on("dragstart", ".drag", function () {
    $(this).css('opacity', .75);
  })
  .on("drag", ".drag", function (ev, dd) {
    $(this).css({
      top: dd.offsetY,
      left: dd.offsetX
    });
  })
  .on("dragend", ".drag", function () {
    $(this).css('opacity', '');
  })
  .on("dropstart", ".drop", function () {
    $(this).addClass("active");
  })
  .on("drop", ".drop", function () {
    $(this).toggleClass("dropped");
  })
  .on("dropend", ".drop", function () {
    $(this).removeClass("active");
  });
setInterval(function () {
    $('.drop:not(.visible)').first()
      .addClass('visible').removeClass('hidden');
}, 1000) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T22:17:58.973

Enable the [refreshPositions option](http://api.jqueryui.com/draggable/#option-refreshPositions).

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-13T16:25:50.433

为什么不将所有 div 放入页面并将其可见性设置为隐藏？然后使用 setInterval() 每秒更改每个人的可见性。

# xcode4 - 打开文件时默认打开XCode 4“隐藏所有问题”

> ID：15947869
> 
> 赞同：2
> 
> 时间：2013-04-11T11:41:20.777
> 
> 标签：xcode4

当我调试并打开一个新文件时，默认情况下问题是可见的，这很烦人。

我知道有一个菜单项可以隐藏文件中的所有问题（Editor->Issues->Hide All Issues），但有没有办法默认设置它。

提前致谢。

凯文

# php - JavaScript验证后PHP函数不起作用

> ID：15947874
> 
> 赞同：0
> 
> 时间：2013-04-11T11:41:34.290
> 
> 标签：php, javascript, jquery, validation

我使用 jQuery 和 Javascript 对我的登录字段进行了验证，它可以工作。当没有用户名或密码时，跨度文本会更改。

当详细信息正确并且我按下登录时，它只是重新加载页面，而不是启动会话等。

但是，如果我输入了一个有效的用户名和错误的密码，PHP 会启动并显示`incorrect password`，或者如果我输入了一个无效的用户名，它会显示`username not found`.

这是一个很奇怪的问题。我有一种感觉，这是因为在 Javascript 验证之后，我返回了一个标志来检查发送：

```
$(document).ready(function() { 
    $('#loginf').submit(function(){ 
        var flag = true

        //stuff to validate each field 
        //ie: for each field i have:

       if(//empty field) { 
        //stuff flag= false; 
       } 
       return flag; 
   }); 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:54:12.033

如果你不希望你的页面重新加载，你应该总是有

```
return false; 
```

在 JS 中验证/提交代码的末尾。

否则，它将始终是按钮的默认操作，在这种情况下，遵循表单的操作。

您是在 PHP 中开始会话吗？[如果您通过 AJAX 执行此操作，请尝试使用Firebug](http://www.getfirebug.com)检查您发送和接收的数据参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:23:18.717

你应该在这里给你看 php 代码顺便说一句，你应该写 return false; 在验证脚本中，因为当页面重新加载时该代码将不起作用。

# ios - Apple 推荐的哪种方法允许我在 Interface Builder 中连接插座？

> ID：15947875
> 
> 赞同：2
> 
> 时间：2013-04-11T11:41:41.367
> 
> 标签：ios, objective-c, iboutlet

它们之间的技术区别是什么，Apple推荐的方法是什么？

// 1

```
@interface CocoaQuizViewController : UIViewController
{
    IBOutlet UILabel *myLabel;
}
@end 
```

// 2

```
@interface CocoaQuizViewController : UIViewController
{
    IBOutlet UILabel *myLabel;
}

@property (nonatomic, retain) IBOutlet UILabel *myLabel;
@end 
```

// 3

```
@interface CocoaQuizViewController : UIViewController
{
    UILabel *myLabel;
}

@property (nonatomic, retain) IBOutlet UILabel *myLabel;
@end 
```

// 4

```
@interface CocoaQuizViewController : UIViewController

@property (nonatomic, retain) IBOutlet UILabel *myLabel;
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:43:43.113

默认是（如果您直接从 xib 拖放出口到源类，则会自动生成）：

```
@interface CocoaQuizViewController : UIViewController

@property (nonatomic, weak) IBOutlet UILabel *myLabel;
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:45:21.397

一切都很好。

使用新的 LLVM，你应该做第四个。

```
@interface CocoaQuizViewController : UIViewController

@property (nonatomic, retain) IBOutlet UILabel *myLabel;
//even you use strong and weak intead of retain,assign,copy
@end 
```

在早期，您正在执行 1、2 和 3。现在大部分事情都是由编译器自动完成的。因此，您的工作现在比以往任何时候都容易。

使用 XCode4.4 及更高版本附带的 New Compiler，您可以自动合成您声明的所有属性。ivars 也会以您的属性名称为前缀创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:42:42.787

第四个，因为现在苹果已经建议所有开发者使用属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T11:53:40.720

几个想法：

1.  您的第四个示例避免了可能困扰前三个示例的一整类可能的错误，您可能会意外地以两个 ivars 结束（例如，如果您省略`@synthesize`，编译器将生成一个名为 的 ivar `_myLabel`，您的`myLabel`ivar 将不会被使用，因此，最终会变得多余，并且只会成为混淆的可能来源）。

2.  如果您使用 ARC（如果可以的话，我会鼓励），那么显然该`retain`引用变为`weak`.

3.  `IBOutlet`无论如何，您可能不应该自己“编写”代码。这只是一个引入错误的机会。在 IB 中，在 IB 上工作时，点击“助手编辑器”显示您的代码，然后`control`从控件 - 拖动（或右键单击-拖动）到代码，IB 将为您编写代码！有关屏幕快照，请参阅[https://stackoverflow.com/a/15551101/1271826](https://stackoverflow.com/a/15551101/1271826)。

# mysql - SQL：使用 where 使用参数搜索当前查询

> ID：15947879
> 
> 赞同：1
> 
> 时间：2013-04-11T11:41:54.503
> 
> 标签：mysql, sql, sql-server-2008, parameters, where

这就是我的想法：

```
DECLARE @Search varchar(150)
SET @Search = 'CompanyName'

SELECT a, b, c, d, e
FROM Table
WHERE a, b, c, d, e in (@Search) 
```

这可能吗？如果是这样，可以将 where 条件设置为：

```
WHERE a, b, c, d, e in (('%')+(@Search)) 
```

这样它会根据搜索搜索所有连接？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:44:59.600

**这会奏效！**

```
DECLARE @Search varchar(150)
SET @Search = 'CompanyName'

SELECT a, b, c, d, e
FROM Table
WHERE a = @Search or 
      b = @Search or 
      c = @Search or 
      d = @Search or 
      e = @Search

 SELECT a, b, c, d, e
    FROM Table
    WHERE a like '%' +  @Search + '%' or 
          b like '%' + @Search + '%' or 
          c like '%' + @Search + '%' or 
          d like '%' + @Search + '%' or 
          e like '%' + @Search + '%' 
```

# c# - 绑定运行次数可变的 RichTextBox

> ID：15947880
> 
> 赞同：2
> 
> 时间：2013-04-11T11:41:58.830
> 
> 标签：c#, wpf, xaml, richtextbox

我最近在做一个项目，我觉得一个很好的解决方案是在 a 中显示一个段落，该段落`RichTextBox`绑定到一个对象集合，该集合将包含一个字符串和一些关于该字符串的属性。我希望我能做这样的事情：

```
<RichTextBox Name="rtb" IsReadOnly="True" FontSize="14" FontFamily="Courier New">
    <FlowDocument>
        <Paragraph>
            <Run Foreground="Red" Text="{Binding foo}"/>
            <Run Foreground="Green" Text="{Binding bar}"/>
            <Run Foreground="Blue" Text="{Binding baz}"/>
        </Paragraph>
    </FlowDocument>
</RichTextBox> 
```

这很好用，但是这是提前定义了所有绑定，但实际上我直到运行时才知道它们，每个字符串都将存储到一个集合中。我试图想出一种方法来定义和绑定多个`Run`块并将它们全部放在`RichTextBox`要显示的中。如果可能的话，我更喜欢主要的 xaml 解决方案，但如果我必须在后面的代码中这样做，那可能没问题，只要绑定坚持并且在初始加载后一切都正确更新。

我尝试了类似的方法，但无法确定如何从后面的代码绑定到`Text`a 的属性：`Run`

```
foreach (var item in col)
{        
    Run run = new Run();
    Binding b = new Binding();
    b.Source = this;
    b.Path = new PropertyPath(item.StaticText);
    run.SetBinding(run.Text, b);    //Tells me Text is not a dependency property
                                    //But it could be bound if this were xaml?
} 
```

我还尝试将一个作为项目数据模板的`ItemsControl`内部放入，但它不允许我将数据模板设为标签，而且我不确定这是否会起作用。`RichTextBox``Run``Run`

有关最佳方法的任何指导，或者我的解决方案有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:47:59.847

你可以用这个...

```
<Paragraph>
    <ItemsControl ItemsSource="{Binding MyRuns}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock>
                    <Run Foreground="{Binding Color}" Text="{Binding Text}"/>
                </TextBlock>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate >
                <StackPanel Orientation="Vertical" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
    <!--<Run Foreground="Red" Text="{Binding foo}"/>
    <Run Foreground="Green" Text="{Binding bar}"/>
    <Run Foreground="Blue" Text="{Binding baz}"/>-->
</Paragraph> 
```

并定义`MyRuns`为您的视图模型上的集合，例如

```
public ObservableCollection<RunData> MyRuns { get; set; } 
```

将属性放入您的`RunData`等。

你当然可以删除`ItemsControl.ItemsPanel`，这只是为了好玩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:28:31.290

这似乎已经为我完成了工作，我创建了一个`ItemsControl`使用 a`WrapPanel`作为`ItemsPanel`. 然后我可以将每个项目绑定到我的字符串集合，它看起来就像一段漂亮的可变字符串。尽管有人提出更优雅的解决方案，但我会保持问题的开放性。

```
<RichTextBox Name="rtb" IsReadOnly="True">
    <FlowDocument>
        <Paragraph>
            <ItemsControl ItemsSource="{Binding col}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock>
                            <TextBlock Text="{Binding StaticText,
                                UpdateSourceTrigger=PropertyChanged}"/><TextBlock Text=" "/>
                        </TextBlock>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Paragraph>
    </FlowDocument>
</RichTextBox> 
```

# php - 检查 php-cgi 服务器是否可远程连接

> ID：15947882
> 
> 赞同：0
> 
> 时间：2013-04-11T11:42:05.143
> 
> 标签：php

我有一个 php 服务器正在侦听一个似乎有问题的端口。如何连接到 php-cgi 服务器以查看它是否启动？（有点“ping” php-cgi 进程）

我需要确定我遇到的问题是由于 http 服务器还是 php-cgi 服务器。因此，我希望能够“ping” php-cgi 服务器以确保它正在接受请求。如果不是，我知道问题的原因是 php-cgi 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:44:00.953

尝试使用远程登录

telnet 本地主机端口号。

因此，如果您在本地主机的端口 80 上运行，请输入

> 远程登录本地主机 80

如果它没有连接，它应该连接，您的服务器没有运行！

# magento - 在列表/网格视图中显示捆绑产品选项 - Magento

> ID：15947889
> 
> 赞同：1
> 
> 时间：2013-04-11T11:42:17.397
> 
> 标签：magento, magento-1.7

这个问题是关于 Magento 捆绑产品的：我想将捆绑产品定制部分添加到列表/网格视图中，而无需进入单独的定制表单。你能请任何人都可以给我一个解决方案吗？

我尝试了以下方法：

1.  将以下部分添加到 catalog.xml `<block type="bundle/catalog_product_view_type_bundle" name="product.list.bundle.options" template="bundle/catalog/product/view/type/bundle/options.phtml"> <action method="addRenderer"><type>select</type><block>bundle/catalog_product_view_type_bundle_option_select</block></action> <action method="addRenderer"><type>multi</type><block>bundle/catalog_product_view_type_bundle_option_multi</block></action> <action method="addRenderer"><type>radio</type><block>bundle/catalog_product_view_type_bundle_option_radio</block></action> <action method="addRenderer"><type>checkbox</type><block>bundle/catalog_product_view_type_bundle_option_checkbox</block></action> </block>`

2.  在listing.phtml中添加了以下代码

`<?php if($_product->getTypeId() == "bundle"){
echo $this->getLayout()->getBlock('product.list.bundle.options')->setProduct($_product)->toHtml(); } ?>`

但它没有用。

# jquery - 迷你幻灯片代码适配

> ID：15947891
> 
> 赞同：0
> 
> 时间：2013-04-11T11:42:21.083
> 
> 标签：jquery, slideshow

我有这个 HTML 标记：

```
<div id="leftBtn">Left</div>
<div id="rightBtn">Right</div>

<div id="wrapper">
    <div id="slideshowContainer">
        <div id="slide_1" class="slide"></div>
        <div id="slide_2" class="slide"></div>
        <div id="slide_3" class="slide"></div>
        <div id="slide_4" class="slide"></div>
    </div>
</div> 
```

...它对应于一个超级简单的幻灯片（代码的所有学分都归功于 jimjimmy1995）。现在它向左/向右滑动。单击右/左按钮时，我需要幻灯片重叠/分离和动画不透明度，而不是水平滑动。这就是我所拥有的 -[小提琴](http://jsfiddle.net/ZkyZx/)。我不是 jQuery 精通者，所以我需要帮助来更改代码 - 随意更改它。谢谢你。

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:31:38.977

由于时间不足，有些东西又快又脏 :) 不确定我是否清楚地了解您的要求。利用 jquery .animate API 来放置一些动画。

注意：您需要检查第一个和最后一个项目才能循环浏览幻灯片。

[http://jsfiddle.net/ZkyZx/7/](http://jsfiddle.net/ZkyZx/7/)

变化的是幻灯片功能：

```
function slideShow_animate(){
    $('.slide.active').removeClass('active').stop().animate({
        opacity : 0
    }, 500, function() {
        $(this).next('.slide').addClass('active').stop().animate({
            opacity : 1
        }, 500);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:00:35.770

无需编写自己的滑块，您可以快速查看[nivo-slider](http://dev7studios.com/nivo-slider/)，它从一开始就包含一系列很酷的过渡，并且实现相当简单。

祝你好运 ：）

# asp.net-mvc-3 - 在 MVC3 cshtml 中动态设置动作名称

> ID：15947895
> 
> 赞同：1
> 
> 时间：2013-04-11T11:42:39.590
> 
> 标签：asp.net-mvc-3, datatables, dynamic-programming

我有一个 MVC3 项目，我在其中创建了一个动态 jQuery DataTable。我在我的表中添加了一个名为“GetDataFunc”的自定义属性，其中包含控制器端的操作名称。我想在定义 DataTable 时使用此属性的值，但 @Url.Action 不接受第一个参数中的参数（与字符串相反）。

我的代码：

```
 var table = document.getElementById('UsersTbl');

        if (table.hasAttribute("GetDataFunc")) {

            var func = table.GetDataFunc;

            var oTable = $('#MyTbl').dataTable({
                "bServerSide": true,
                "sAjaxSource": '@Url.Action(func, "MyPages")',
                "bProcessing": true,
                "aoColumns": cols,
                "oLanguage": { "sSearch": "Search all columns:" },
                "fnDrawCallback": function (oSettings) {
                    totalRecords = oSettings.fnRecordsDisplay();
                }
            });

        } 
```

当我尝试运行我的程序时，我得到：
*当前上下文中不存在名称“func”*

如何动态定义在控制器端调用哪个函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:51:24.613

您正在尝试混合使用 JavaScript 和 C#。不。

而不是`'@Url.Action(func, "MyPages")'`只使用 javascript 来确定你需要去的 url。在一天结束时，会为`@Url.Action`您生成一个带有控制器/操作的 url 的字符串。

# codeigniter - 使用 codeigniter 接收帖子信息

> ID：15947900
> 
> 赞同：0
> 
> 时间：2013-04-11T11:42:54.013
> 
> 标签：codeigniter, post

我有一个带有数据的订单。在提交时`new_blank_order_summary`调用控制器函数。

语法是：

```
 function new_blank_order_summary() 
  {
      echo "orderlines: ".$this->input->post(orderlines);
      echo "customer: ".$this->input->post('customer');
      echo "period: ".$this->input->post('period');
      echo "creditlimit: ".$this->input->post('creditlimit');   

      $this->load->view('sales/new_blank_order_summary');

  } 
```

我无法让帖子信息显示或回显？我输入的姓名和 ID 是`orderlines`，但未正确发布或接收。

为“愚蠢”的问题道歉。

欢迎任何建议。

**HTML**

```
<form id="sales_blank_order_details" action="/sales/new_blank_order_summary" method="post">

            <table >
                <tr><td>Customer</td><td>Period</td><td>UoM</td><td>Credit Limit</td><td>Balance</td><td>New Balance</td><td>Order Lines</td><td>Round to Bundle</td></tr>
                    <tr><td>
            <input type="text" name="customer" id="customer" value="<?php echo $customer; ?>" disabled>
               </td><td>
            <input type="text" name="period" id="period" value="<?php echo $period." to ".$newperiod; ?>" disabled>
               </td><td>
            <input type="text" name="buom" id="buom" value="<?php echo $buom; ?>" disabled>
               </td><td>
            <input type="text" name="creditlimit" id="creditlimit" value="<?php echo $creditlimit['creditlimit']; ?>" disabled>
           </td><td>
            <input type="text" name="currentbalance" id="currentbalance" value="<?php echo $creditlimit['currentbalance']; ?>" disabled>
           </td>
           <td>
            <input type="text" name="newbalance" id="newbalance" value="<?php echo $creditlimit['currentbalance']; ?>" disabled>
           </td><td>
            <input type="text" name="orderlines" id="orderlines" value="1" disabled>
           </td><td>
            <input type="checkbox" name="rounduptobundle" id="rounduptobundle" checked>
           </td></tr></table>

<input type="submit" name="blank_order_lines" id="blank_order_lines" value="Save Order and Proceed">

</form> 
```

这些帖子都不是由控制器输出的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:08:59.330

您已禁用`orderlines`文本输入字段，这就是它不会被发布的原因。删除`disabled`，它将显示在`$this->input->post()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:51:07.047

提交按钮的名称和值是什么。通常我的提交按钮的名称是 name="submit"，值是 value="submit"。然后我尝试 $this->input->post('submit')=='submit'。在你的 if 条件下试试这个。我希望它会奏效。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:09:51.517

```
function new_blank_order_summary() 
{
      echo "orlderlines: ".$this->input->post('orderlines');
      echo "customer: ".$this->input->post('customer');
      echo "period: ".$this->input->post('period');
      echo "creditlimit: ".$this->input->post('creditlimit');   

      $this->load->view('sales/new_blank_order_summary');

} 
```

请尝试此代码。我没有更改其中的一行。只有我把单引号放在第 3 行。而且，改变它的变量名是错误的，所以我改变了它

# intuit-partner-platform - Certain invoices missing from the "All Invoices" API response

> ID：15947905
> 
> 赞同：2
> 
> 时间：2013-04-11T11:43:03.883
> 
> 标签：intuit-partner-platform

We use the Intuit API V2 to import Invoices from QuickBooks Desktop.

At one point we imported a few invoices that no longer show up in the list of "all invoices". But if we request the invoices "by id" (one at a time) we do get them. They still have an open balance > 0. Is there a reason why these invoices don't show up in the "all invoices" list? We did request all the pages.

Something that we noticed is that the problematic invoices all have Lines with SalesTaxCodeId 2 and seem to be "Tax returns".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:28:57.453

Florin,
I have answered this question many times on Stackoverflow. You need to review the Sync Activity and Sync Status for any error the object may have encountered while syncing from Intuit to the customer's desktop QuickBooks file.

Objects that encounter an error are flagged and no longer appear in a query unless you set a filter to retrieve errored objects.

Lastly, you should always post your xml requests one for the query all and one for the individual.

For your reference: [http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncActivity](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncActivity)

[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncStatus](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/SyncStatus)

[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0100_Calling_Data_Services/0015_Retrieving_Objects#Objects_in_Error_State](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0100_Calling_Data_Services/0015_Retrieving_Objects#Objects_in_Error_State)

# ruby - Rails 根据域名渲染静态页面

> ID：15947907
> 
> 赞同：1
> 
> 时间：2013-04-11T11:43:11.400
> 
> 标签：ruby, ruby-on-rails-3

我有一个具体的案例场景如下。

我有一个 ROR 应用程序，它将使用相同的部署在多个域下运行。因此，我将不得不根据域名提供一些静态资产（图像、html 文件）。任何人都可以建议这样做的理想方法吗？

在我的应用程序控制器中，我可以找到域名

```
def current_domain
    @current_domain ||= Domain.find_by_domain(request.host.gsub(/^www\./, ''))
end 
```

但是我可以在我的控制器中使用这个助手来提供公共目录中的静态文件吗？此外，为该域创建这些域名和静态页面由中央管理员处理，并且可以在任何时间点动态完成。我可能必须根据域名创建不同的目录并将静态资产存储在其中。但是，当对特定域的请求进入时，我如何呈现它是我手头的问题。

任何有关如何使用 Rails 解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:52:39.447

我建议为每个域使用一个应用程序布局，并使用动态布局在您的控制器中选择正确的布局。

```
class ProductsController < ApplicationController
  layout :products_layout

  def show
    @product = Product.find(params[:id])
  end

  private
    def products_layout
      @current_domain.special? ? "special" : "products"
    end

end 
```

# android - SensorEventListener 不会自行注销

> ID：15947910
> 
> 赞同：0
> 
> 时间：2013-04-11T11:43:39.947
> 
> 标签：android, listener, sensors, sensormanager

我一直在开发一个需要分几个步骤执行加速度计校准的应用程序。

我所做的是创建一个 SensorEventListener 来获取一定数量的读数，在达到该数量后，我调用“sensorManager().unregisterListener(eventListener)”。

但是，我认为这一行并没有取消注册侦听器，因为紧接着，由于继续运行，同一行被调用。

问题：我是否以这种方式正确地做事，或者应该调节我的处理程序，以便在达到这种条件后它不允许自己运行（使用 if's）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:09:03.770

如果您的 SensorEventListener 在您取消注册后只被调用一次，那么这种行为可能是由于Android 的多线程特性导致的[竞争条件。](http://en.wikipedia.org/wiki/Race_condition#Software)因此，如果您想关闭对读数的处理，那么（如您所建议的）您应该设置一个布尔变量并使用 if 语句对其进行测试，以确保在达到限制后不再进行处理。

# .net - Windows 识别基础：基于 R.Ps 识别的不同证书的 2 个令牌

> ID：15947914
> 
> 赞同：0
> 
> 时间：2013-04-11T11:43:44.747
> 
> 标签：.net, wif, asp.net-4.5

出于技术原因，我们在我们的应用程序中实现了两个不同的 STS 网站。这些 STS 颁发基于不同证书的令牌。

我们有一个主应用程序和一个子应用程序，每个应用程序都配置为使用和信任这些 STS 网站之一。

两个应用程序都使用 Claim Type Name 来设置登录时的用户名，然后这会出现在依赖方应用程序 UI 中。

我的问题是，如果我登录到一个 STS，一切都很好。当我登录到其他应用程序/STS 时，第一次登录时出现在 UI 中的名称被替换为第二次登录的名称。

我只能假设 STS 使用完全不同的证书来签署令牌，除非配置为在 web.config 中信任，否则它们将被依赖方忽略。这就是我设置它的方式。

从调试来看，一切似乎都运行良好。创建令牌时使用正确的 STS 和正确的证书。

我可以看到，当我登录到第二个应用程序时，现有的 FedAuth cookie 会增长，因此两个会话的声明都被添加到同一个 cookie 中。

如果有人能就如何使 STS 发行的代币完全相互独立提供一些建议，我将不胜感激。

非常感谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:32:03.183

您所看到的是正确的行为，这两个令牌实际上是不同的。如果您没有在配置中添加第二个 STS，则针对该 STS 的身份验证可能会成功，但它们将被 WIF 拒绝，因为它们来自“不受信任”的来源（未声明的 STS）。

如果您将第二个 STS 添加为“受信任的发行者”，则 WIF（在您的应用程序中）将很乐意接受其令牌。声明类型“名称”只是映射到`User.Name`属性的内容。

如果您多解释一下您想要做什么，这可能会有所帮助。当有人使用第二个 STS 登录时，您的应用程序中应该发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:56:24.133

这种行为的原因是依赖方都没有为身份验证cookie设置名称，所以他们都使用了“FedAuth”。通过在 cookieHandler 中显式地为它们提供不同的名称以用于 cookie，问题得到了解决。

```
<microsoft.identityModel>
<service>
  <federatedAuthentication>
    <wsFederation passiveRedirectEnabled="false" issuer="http://localhost:9006/App.AD_STS/" realm="http://localhost:6542/" requireHttps="false" />
    <cookieHandler requireSsl="false" path="/" name="AD_STS" />
  </federatedAuthentication> 
```

# blackberry - 通过 BES/BIS、BlackBerry 推送通知

> ID：15947917
> 
> 赞同：4
> 
> 时间：2013-04-11T11:44:05.267
> 
> 标签：blackberry, push-notification

我正在尝试对 OS < 7.X 使用推送通知。

我下载了示例服务器/客户端代码。我在我的设备上部署了客户端代码，在提供的 tomcat 上部署了低级示例代码。

作为记录，当我在这里注册推送通知时，我使用 BIS 选项进行了注册。现在我实际上得到了一个黑莓，我被告知它正在使用 BES（我不认为这是我要描述的问题的根源......）。

在设备上，在示例应用程序中，我输入了我收到的电子邮件中给出的所有正确设置。

运行tomcat服务器的电脑和手机都连接到同一个wifi。

我正在尝试从设备浏览器连接到服务器，例如`https://196.84.32.112:8443/low-level-sample`

并且浏览器正常打开页面，这意味着我可以从手机连接到我的服务器。

现在，当我从设备示例应用程序中点击注册时（我在设置上尝试了 BIS/BES 选项），我总是收到以下错误：

***注册请求失败。由 java.io.IOException 引起：网络操作 [订阅] 失败。确保 Content Provider URL 是可访问的。***

在日志中我得到：

***打开 URL：我的服务器 url 附加了用户名/密码/模型/连接类型等信息内容提供商网络命令 [订阅] 失败，由于无法连接到`196.84.32.112:8443` 命令“注册”失败，错误：java.io.IOException：网络操作[订阅] 失败。确保 Content Provider URL 是可访问的。***

一个想法是我应该再次注册新的按键并使用 BIS/BES 选项而不是仅使用 BIS，但这里的问题似乎是与本地服务器没有连接，而不是 RIM 服务器。虽然我已经尝试注册，但我正在等待带有新设置的邮件。

我也对 BIS / BES 选项有点困惑。我不知道我的用户是否会启用 BIS 或 BES，那么我应该在我的代码中添加什么？！在示例应用程序中，它要求我在 BIS 或 BES 之间进行选择，但是当应用程序要投入生产时，我需要以编程方式做出选择，我会选择什么？！或者此选择仅用于应用程序的评估/开发，并且在生产中还有另一台服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:00:02.707

我认为这里已经说了所有正确的事情，但我希望我们可以整合一些答案，并总结这个问题。

您还没有共享您的代码，这让事情变得更加困难，但是许多人使用 RIM/BlackBerry 提供的 PushDemo 源，其中连接后缀被硬编码在`/pushdemo/com/rim/samples/device/push/PushUtils.java`：

```
private static String getConnectionSuffix() {
    return ";deviceside=false;ConnectionType=mds-public";
} 
```

我也从阅读[您的其他问题](https://stackoverflow.com/q/16011396/119114)中猜到了这一点。

通过这样做，您对 BIBS 的 BlackBerry 传输类型进行了硬编码。 [BlackBerry 支持多种不同的传输方式](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879)，例如 BES、BIS、BIBS 或 WAP。BIBS 传输会将请求从您的设备发送到互联网上的 BlackBerry 服务器。（*注意：这部分可能会让 iOS/Android 开发人员感到困惑，因为这些平台不提供 Apple/Google 网络中介来中继正常的 HTTP/S 流量*）

然后，请求被转发到您的服务器，该服务器位于：

```
196.84.32.112:8443 
```

我很确定 TCP/IP 端点在 Internet 上不可用（我无法访问它）。所以，这就是它对你失败的原因。

你可以拿这个网址

```
https://196.84.32.112:8443/low-level-sample 
```

并将其粘贴到您的 BlackBerry 设备的浏览器中，它就可以工作了。您的设备配置为使用您公司的内部服务器的 BES。那些内部服务器**可以**到达`196.84.32.112:8443`端点，所以它似乎对你有用。但是，那是因为您没有硬编码*transport*，就像您在使用`getConnectionSuffix()`. 设备浏览器足够智能，可以找出有效的传输方式，而 BES 可以到达该*Intranet*服务器。

希望这可以解释令人困惑的部分。

## 解决方案

正如其他人所说，一个解决方案是让您公司的 IT 人员通过防火墙访问 IP 地址 196.84.32.112 和端口 8443。这将允许黑莓服务器成功访问它。

另一种解决方案是更改 PushUtils.java 代码以避免 BIBS 传输：

```
private static String getConnectionSuffix() {
    return ";deviceside=false";
} 
```

如果你想要真正灵活的代码，那么我建议重写 PushUtils.java 代码，因为它似乎使用了 5.0 之前的 HTTP 连接逻辑。 [当支持多种传输时，OS 5.0+ 中的 ConnectionFactory](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/io/transport/ConnectionFactory.html)使这更容易，更健壮......

要回答有关支持用户使用多种传输方式的问题，请查看[这个 blackberry.com 示例](http://supportforums.blackberry.com/t5/Java-Development/Sample-Code-Using-the-ConnectionFactory-class-in-a-BrowserField/ta-p/532860)，特别是`MyConnectionFactory`该类。它允许您选择您的应用程序允许哪些传输，以及它首先尝试哪些*传输*。

最终，是否公开您的服务器的决定取决于它的使用方式，以及您是否有非公司互联网客户端尝试在您的公司服务器上注册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:48:21.660

先解释一下BB Push Demo的注册流程：

当您点击注册设备将

1.  通知您的 Web 应用程序该设备要注册。为此，它会将有关设备的信息发送到您的 Web 应用程序（所谓的 ContentProvider）。您应该将该信息存储在数据库中。这一步发生在`ContentProviderProtocol.performCommand()`推送演示的方法中。

2.  通知 BB 推送服务器设备想要注册以接收来自您的应用程序的推送通知。这发生在`BpasProtocol.register()`push sdk 的方法中。

仅当您想知道谁都注册了推送通知时才需要第 1 步（也许如果您想向每个设备发送单独的推送通知而不是将消息广播给所有注册用户）。在这种情况下，您可能需要其他信息，例如该用户的偏好等来自定义推送。

现在您收到的错误来自第 1 步。要使第 1 步成功，您的设备应该能够连接到您无法连接的 Web 应用程序。

`ContentProviderProtocol.performCommand()`要解决此问题，您必须让您的 Web 应用程序可公开访问（并准备好处理负载），或者通过在不执行任何操作的情况下返回来从应用程序中注释掉第 1 步。

PS：步骤 1 中使用的 webapp 不必与您的推送发起者相同。webapp 只是用于跟踪所有注册接收推送的人，如果您期望有很多用户，理想情况下应该位于分布式架构的云中。

# c# - EntityFramework where 子句是否总是以相同的顺序返回对象

> ID：15947928
> 
> 赞同：2
> 
> 时间：2013-04-11T11:44:57.570
> 
> 标签：c#, .net, entity-framework

例如，将

```
products.Where(p => p.LastModifiedOn > someDate) 
```

总是以相同的顺序返回产品（不管它是如何订购的，只要我每次调用相同的代码时都是一致的）？或者我应该添加`.OrderBy()`方法来确保？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:46:31.270

> 或者我应该添加 .OrderBy() 方法来确保？

是的**，你应该**。例如，它在内部翻译为底层数据源语言， `Select * from table where ...`并且不能保证其返回值始终保持相同的顺序。

您可能会看到这个问题：[SELECT 查询是否总是以相同的顺序返回行？具有聚集索引的表](https://stackoverflow.com/questions/9584813/does-a-select-query-always-return-rows-in-the-same-order-table-with-clustered-i)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:48:08.880

LINQ to SQL 不保留顺序。既然您提到了 EntityFramework，这就是您问题的答案。但是，您应该注意，LINQ to Objects 确实保留了顺序 - 与输入可枚举的顺序相同。

# php - 如何使用 WampServer 在 android 应用程序和 Web 应用程序之间进行连接？

> ID：15947929
> 
> 赞同：-3
> 
> 时间：2013-04-11T11:44:58.137
> 
> 标签：php, android, client-server

我正在尝试编写一个 Android 应用程序并对 Web 服务进行测试，该服务允许您向服务器发送消息并返回一个字符串，例如`ok`，但是发送消息时出现问题并且没有找到答案。

**我的网络服务 Android 代码：**

```
String line = null;

try{

URL twitter = new URL("http://192.168.1.8:9090/younes_project/younesservices.php?action=001");

URLConnection tc = twitter.openConnection();

BufferedReader in = new BufferedReader(new InputStreamReader(tc.getInputStream()));     

  if(line==null){Log.i("------resultat---------"," line ==========nullllllllll" );

  }
else{Log.i("------resultat---------","-----------line =============not nulllllllll" );}
     line = in.readLine();          

}
catch(Exception e){} 
```

**我的 younesservices.php 文件：**

```
<?php
    if(@($_GET['action'])){
        switch($_GET['action']){
            case "001":
                echo "ok";
                break;
            case "002":
                include("accueil.php");
                break;
            case "003":
                include("point.php");
                break;
        }
    }
?> 
```

配置服务器WampServer的IP地址，文件在httpd.confg

```
Listen 127.0.0.1:9090
Listen 80 
```

我的 IP 地址 ipconfig：

```
 Suffixe DNS propre à la connexion. . . : home
 Adresse IPv6 de liaison locale. . . . .: fe80::529:22f7:8fd4:324c%14
 Adresse IPv4\. . . . . . . . . . . . . .: 192.168.1.2
 Masque de sous-réseau. . . . . . . . . : 255.255.255.0
 Passerelle par défaut. . . . . . . . . : 192.168.1.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:24:14.277

您可以从浏览器访问您的 PHP 脚本吗？如果没有尝试打开 WAMP SERVER 并确保所有服务都已启动并且托盘图标为绿色，则更改此行

```
http://192.168.1.8:9090/younes_project/younesservices.php?action=001 
```

至

```
http://10.0.2.2:9090/younes_project/younesservices.php?action=001 
```

这将是打开 wamp 服务器文件的 localhost IP 地址，正如评论中提到的那样

```
 StringBuffer sb = new StringBuffer();
  String data = "";
if(line == null){
       Log.i("------resultat---------"," line ==========nullllllllll" );
        }
        else{ 
             Log.i("------resultat---------","-----------line =============not nulllllllll" );
            }
            line = in.readLine();   

            sb.append(line + "\n");
            in.close();
            data = sb.toString();
            Log.i("---------resultat-------------", data); 
```

然后您应该会在 LogCat 中看到您的数据打印出来，应该是`ok`.

# arrays - 无法聚合数组

> ID：15947943
> 
> 赞同：7
> 
> 时间：2013-04-11T11:45:36.630
> 
> 标签：arrays, postgresql, aggregation

我可以创建一个数组数组：

```
select array[array[1, 2], array[3, 4]];
     array     
---------------
 {{1,2},{3,4}} 
```

但我不能聚合数组：

```
select array_agg(array[c1, c2])
from (
    values (1, 2), (3, 4)
) s(c1, c2);
ERROR:  could not find array type for data type integer[] 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T01:20:02.207

我用：

```
CREATE AGGREGATE array_agg_mult(anyarray) (
    SFUNC = array_cat,
    STYPE = anyarray,
    INITCOND = '{}'
); 
```

和像这样的查询：

```
SELECT array_agg_mult( ARRAY[[x,x]] ) FROM generate_series(1,10) x; 
```

请注意，您必须聚合二维数组，因此您通常希望将输入数组包装在单元素`ARRAY[array_to_aggregate]`数组构造函数中。

# string - 带有希腊字母、换行符和变量值的 R 绘图标题

> ID：15947945
> 
> 赞同：4
> 
> 时间：2013-04-11T11:45:38.800
> 
> 标签：string, r, plot, expression, special-characters

我正在尝试绘制一个标题、一个希腊字符以及一个变量的平均值。我希望我的情节标题看起来像这样（但居中）

**标题**

**μ=1.2**

我做了一些尝试：

```
d <- rnorm(100)
hist(d, main=expression(paste("Title\n", mu, "=", mean(d))))
hist(d, main=expression(paste("Title\n", mu, "=", mymean), list(mymean=mean(d))))
hist(d, main=paste(expression(paste("Title\n", mu, "="), mean(d))))
hist(d, main=expression(atop("Title", substitute(mu, "=", mymean, list(mymean=mean(d))))))
hist(d, main=expression("Title\n", substitute(mu, "=", mymean, list(mymean=mean(d))))) 
```

但我不知道如何在标题中使用`expression`或正确使用。`substitute`我知道这`mtext`是一种可能性，但它应该使用 main= 参数来工作......？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T12:02:32.507

你可以这样做`atop`：

```
hist(d, main=bquote(atop(Title,mu==.(mean(d))))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/VYPCe.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-16T16:21:28.173

使用该`plain()`函数指定普通文本和`*`,`~`和`~~`作为间隔符：

```
mtext(main=bquote(plain("Observation at pH ") ~ .(pH) ~~ plain(" [") *  mu * plain("M]"))) 
```

`?plain`这在（当在 R 命令行提示符中键入时转换为关于纯文本的帮助）中有些神秘地解释了这一点。然后您将获得帮助页面`Mathematical Annotation in R`，然后在该页面中搜索 plain。

# date - Jasper 报告日期格式

> ID：15947953
> 
> 赞同：0
> 
> 时间：2013-04-11T11:46:02.527
> 
> 标签：date, jasper-reports, format, reverse, crosstab

在 Jasper Reoprt，交叉表中，我将日期显示为“2012-09-13”。有没有办法使用任何字符串方法将其反向显示为“13-09-2012”？另一件事是我从 SQL dB 中检索日期。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:28:50.887

您可以在查询级别本身执行上述操作，而不是在 ireport 上执行。

您可能需要参考以下链接以了解如何格式化日期 [format date](http://www.sql-server-helper.com/tips/date-formats.aspx)

在 ireport 中，您可以使用**SimpleDateFormat/DateFormat**并根据需要设置日期格式您可以参考[链接](https://stackoverflow.com/questions/6262310/display-java-util-date-in-a-specific-format)

# git - Git push -u origin master 在存储库重命名后不起作用

> ID：15947955
> 
> 赞同：0
> 
> 时间：2013-04-11T11:46:06.040
> 
> 标签：git

我创建了一个 BitBucket 存储库，然后在我的本地存储库中的一个文件中进行了一些小的更改。我做了一个 git commit，然后是一个 git push -u origin master。但我得到一个错误，说它没有找到。我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:48:28.040

您需要重置远程路径：

```
$ git remote rm origin
$ git remote add origin <your_new_repos_remote_path> 
```

# ravendb - 在客户端捕获 OperationVetoedException 而不是 InvalidOperationException

> ID：15947962
> 
> 赞同：1
> 
> 时间：2013-04-11T11:46:21.827
> 
> 标签：ravendb

我正在使用 RavenDB UniqueConstraints 捆绑包，当违反唯一约束时我得到异常客户端，但它的 InvalidOperationException 异常消息解释了原因 Raven.Database.Exceptions.OperationVetoedException: PUT 被 Raven.Bundles.UniqueConstraints.UniqueConstraintsPutTrigger 否决，因为：确保唯一约束

无论如何要在 try catch 块中捕获 OperationVetoedException

# jqgrid - 获取 jqgrid 选择的“值”字段

> ID：15947963
> 
> 赞同：0
> 
> 时间：2013-04-11T11:46:22.160
> 
> 标签：jqgrid, jqgrid-formatter

我在 jqgrid 表中定义了一个选择，如下所示：

```
{name: 'station', index: 'station', editable: true, width: 60,
  edittype:"select", defaultValue:"",
  editoptions:{
         dataUrl: "getStationList"
  },
  editrules: { required: true }
}, 
```

getStationList 返回如下内容：

```
<select>
<option value="id1">Station1</option>
<option value="id2">Station2</option>
</select> 
```

使用当前定义，首次显示组合时，位置列表出现很好（Station1，station2，...），并且选择了台站1时，JSON包含“ ID1”。但是当表格更新时，它会在选择组合中显示“id1”，而不是继续显示 Station 的列表。

这是一个错误还是我缺少一些配置选项？（可能是最后一个）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:18:04.817

*我认为您在填充*网格时已经遇到了问题。如果您想使用 ids 而不是名称，则应`formatter: "select"` *另外*使用`edittype:'select'`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#formatter_type_select)）。在这种情况下，在用数据填充网格期间，您必须在网格中放置 id。我的意思是 jqGrid 的输入数据包含`id1`and`id2`而不是`"Station1"`and `"Station2"`。只有在您能够使用`dataUrl`which provide的情况下`<option value="id1">Station1</option>`。下一个问题是：你必须设置`editoptions.value`or`formatoptions.value`而不是 usage `dataUrl: "getStationList"`。所以使用`formatter: "select"`比较复杂。可以做的是将数据`{"id1":"Station1", "id2":"Station2"}` *作为主网格数据的一部分发送*。一个可以放置`{stations: {"id1":"Station1", "id2":"Station2"}}`为`userdata`JSON 输入的一部分（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#user_data)）。在`beforeProcessing`回调内部可以设置`formatoptions.value`基于`userdata.stations`. 实际上，`getStationList`不仅在编辑数据期间，而且在每次填充网格时都会提出请求。

我个人更喜欢在表单中使用 no`formatter: "select"`并使用 selects

```
<select>
    <option value="Station1">Station1</option>
    <option value="Station2">Station2</option>
</select> 
```

客户端代码对数据表示的实现细节一无所知。可以用数据“Station1”和“Station2”填充网格，并在编辑网格时发送相同的数据。另一端的服务器将在需要时按名称获取 ID。通常，如果我创建`Stations`带有“Id”和“Name”之类的列的“查找”表，我会设置

```
CONSTRAINT UC_Stations_Name UNIQUE NONCLUSTERED (Name ASC) 
```

所以表中有唯一索引，可以通过名称获取 Id。顺便说一下，所有带有 Name 的 Update 语句都与使用 Id 一样快。我在所有内部 SQL 语句中使用 Id，但只将 Name 发送到外部源。以我不需要的方式使用`formatter: "select"`。

# c++ - 安全线程终止

> ID：15947966
> 
> 赞同：0
> 
> 时间：2013-04-11T11:46:30.907
> 
> 标签：c++, windows, multithreading, visual-c++, thread-safety

工作线程处理数据库更新。当应用程序结束时，我想终止它但不让它离开数据库不一致。所以我在每个重要的数据库操作之前使用标志。过了一会儿，代码充满了 if ：

```
 void MyWorkerThread::RunMethod(){
      if (false == m_Manager->GetShutdownFlag()) {
         DoSomethingOnDB();
      }
      if (false == m_Manager->GetShutdownFlag()) {
         DoSomethingMoreOnDB();
      }
      ... 
```

那么，有没有其他方法可以在不发送大量 if 的情况下处理关机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:54:04.763

您最好通过一些同步对象（事件、锁、互斥锁、信号量、临界区等）等来同步线程，以便主线程可以等待工作线程。

这里有一个竞争条件：如果在`if`评估条件之后和执行 DB 操作之前立即引发关闭标志怎么办？

这是一个使用互斥锁作为众所周知的同步原语的插图，但还有更好的方法。

主线程：

```
int main() {
    ... wait for signal to exit the app
    // the DB operations are running on another thread
    ...
    // assume that we start shutdown here
    // also assume that there is some global mutex g_mutex
    // following line blocks if mutex is locked in worker thread:
    std::lock_guard<std::mutex> lock(g_mutex); 
    Cleanup(); //  should also ensure that worker is stopped
} 
```

工作线程：

```
void MyWorkerThread::RunMethod() 
{
  {
    std::lock_guard<std::mutex> lock(g_mutex); 
    DoSomethingOnDB();
  }
  // some other, non locked execution which doesn't prevent
  // main thread from exiting
  ...
  {
     std::lock_guard<std::mutex> lock(g_mutex);
     DoSomethingMoreOnDB();
  }
} 
```

显然你不想重复所有的锁定，你应该把它包装起来：

```
 void MyWorkerThread::RunMethod() 
  {
    Execute(DoSomethingOnDB);
    ...
    Execute(DoSomethingMoreOnDB);
  }

  void MyWorkerThread::Execute(DatabaseFn fn) 
  {
     std::lock_guard<std::mutex> lock(g_mutex); 
     fn();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:14:28.727

您的代码中有一个模式，这意味着您可以将其抽象为一个函数：

```
void MyWorkerThread::execDBCommand(auto cmd){
    if  (! m_Manager->GetShutdownFlag()) {
        cmd();
    } else throw std::runtime_error("shutdown"); // or a custom exception
} 
```

在您更直接的中断处理`try...catch`中使用该异常的外部。`RunMethod`

然而，关闭标志也许可以更好地处理为线程的信号，然后回滚任何待处理的事务并中止处理，而不必在每条指令之前检查状态。您还必须在 DB 调用期间屏蔽信号。

当然，这取决于您的程序架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:58:47.837

您的应用程序中是否已经有 ReaderWriter 锁？您应该将数据库关闭视为写入操作，并在启动之前获取写入器锁。然后，一旦关闭正在进行，其他读取（获得读取器锁）或写入操作（获得写入器锁）都无法启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:55:25.367

如果你的 Do 函数返回了一些你可以然后 && 或 || 将它们放在一起，以便一旦其中一个返回“false”或“true”（无论哪个是终止条件），您将停止处理。

如果在您的操作期间（或在执行它之前？）由不同的线程设置关闭标志会发生什么，如果您仍然运行此过程会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T12:09:17.220

您的标志使用将仅限于使用数据库的各种方法：DoSomethingOnDB、DoSomethingMoreOnDB ...

假设您正确使用互斥锁和锁（这里似乎没有），您可以将与数据库相关的方法收集到一个复合方法中并将您的数据库锁定在那里，并在该单一方法中执行一个 check bool 操作，以便只有一个线程创建一个数据库一次操作。

# svg - NVD3.js 为图中的特定条形着色

> ID：15947967
> 
> 赞同：3
> 
> 时间：2013-04-11T11:46:31.063
> 
> 标签：svg, d3.js, nvd3.js

有没有办法给特定的条上色？如果一个条小于该线，则将其涂成红色。

代码：[https ://github.com/tvinci/webs/blob/gh-pages/lineplusbar.html](https://github.com/tvinci/webs/blob/gh-pages/lineplusbar.html)

示例：[http ://tvinci.github.io/webs/lineplusbar.html](http://tvinci.github.io/webs/lineplusbar.html)

我想做这样的事情，但 i 的值不是我发送的 y 值。它已被修改：

```
d3.selectAll("rect.nv-bar")
    .style("fill", function(d, i){
        return i > 50 ? "red":"blue";
    }); 
```

数据：

```
var overview_data=[
     {
        "key" : "Achieved",
        "bar": true,
        "values" : [ [ "1x" , 30] , [ "2x" , 70] , [ "3x" , 200] ]
     },
     {
        "key" : "Required",
        "values" : [ [ "1x" , 50] , [ "2x" , 100] , [ "3x" , 150] ]
     }
].map(function(series) {
    series.values = series.values.map(function(d) { return {x: d[0], y: d[1] } });
    return series;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:13:43.137

你可以做：

```
d3.selectAll("rect.nv-bar")
    .style("fill", function(d, i){
        return d.y > 50 ? "red":"blue";
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T05:50:51.803

向上的答案是正确的，但是当您在我的情况下动态更改数据时它将不起作用。

您可以使用以下配置根据值获取不同的条形颜色。

```
var data=[ {
        "key": "data",
        "values": [
          {
            "x": 1,
            "y": 20
          },
          {
            "x": 2,
            "y": 15
          },
          {
            "x": 3,
            "y": 85
          },
          {
            "x": 4,
            "y": 66
          },}];

nv.addGraph(function() {
    var chart = nv.models.multiBarChart()
      .barColor(getColorArrayForGraph())
      .transitionDuration(350)
      .reduceXTicks(true)   
      .rotateLabels(0)      
      .showControls(true)   
      .groupSpacing(0.1);
    chart.xAxis
        .tickFormat(d3.format(',f'));

    chart.yAxis
        .tickFormat(d3.format(',.1f'));

    d3.select('#chart1 svg')
        .datum(data)
        .call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
}

 // GET color array based on the value
  function getColorArrayForGraph() {
    let colorArray: any = [];
    for (let item of data) {
      if (item.y > 50) {
        colorArray.push('#FF0000');
      } else {
        colorArray.push('#004c00');
      }
    }
    return colorArray;
  }; 
```

所以在这里，***barcolor(["#FF0000","#00FFCC",....])***函数将参数作为颜色数组。

通过这种方式，您可以获得颜色数组并将其用于 barcolor()。

# c++ - Memset 一个 int（16 位）数组到 short 的最大值

> ID：15947969
> 
> 赞同：7
> 
> 时间：2013-04-11T11:46:31.683
> 
> 标签：c++, c, memset

似乎无法在任何地方找到答案，如何将数组设置为数组类型的最大值？我原以为`memset(ZBUFFER,0xFFFF,size)`ZBUFFER 是一个 16 位整数数组的地方会起作用。相反，我始终得到-1。

此外，我们的想法是尽可能快地完成这项工作（它是一个需要初始化每一帧的 zbuffer），所以如果有更好的方法（并且仍然一样快或更快），请告诉我。

编辑：作为澄清，我确实需要一个带符号的 int 数组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T11:58:44.140

在**C++**中，您将使用 std::fill 和 std::numeric_limits。

```
#include <algorithm>
#include <iterator>
#include <limits>

template <typename IT>
void FillWithMax( IT first, IT last )
{
    typedef typename std::iterator_traits<IT>::value_type T;
    T const maxval = std::numeric_limits<T>::max();
    std::fill( first, last, maxval );
}

size_t const size=32;
short ZBUFFER[size];
FillWithMax( ZBUFFER, &ZBUFFER[0]+size ); 
```

这适用于任何类型。

在**C**中，您最好不要`memset`设置字节的值。`char`要初始化(ev. )以外的其他类型的数组`unsigned`，您必须求助于手动`for`循环。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T11:49:07.887

-1 和 0xFFFF 在使用二进制补码表示的 16 位整数中是相同的。您只得到 -1 是因为您已将数组声明为`short`而不是`unsigned short`. 或者因为您在输出它们时将值转换为有符号。

顺便说一句，您假设您可以使用 memset设置**字节以外的内容是错误的。**`memset(ZBUFFER, 0xFF, size)`会做同样的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T11:59:04.777

在 C++ 中，您可以使用算法为数组填充一些值`std::fill`。

```
std::fill(ZBUFFER, ZBUFFER+size, std::numeric_limits<short>::max()); 
```

这既不比您当前的方法快也不慢。不过，它确实有工作的好处。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T15:31:13.227

不要将速度归因于语言。那是为了 C 的实现。有些 C 编译器可以生成快速、优化的机器代码，而 C 编译器可以生成慢速、非优化的机器代码。对于 C++ 也是如此。“快速、最佳”的实现可能能够优化*看起来很慢*的代码。因此，调用一个解决方案比另一个*更快*是没有意义的。我会谈论*正确性*，然后我会谈论*性能*，无论它多么微不足道。最好对代码进行概要分析，以确保这实际上是瓶颈，但让我们继续。

让我们首先考虑最明智的选择：复制`int`值的循环。只需阅读循环将正确分配`SHRT_MAX`给每个`int`项目的代码，就可以清楚地看到。您可以在下面看到此循环的测试用例，它将尝试使用当时可分配的最大可能数组`malloc`。

```
#include <limits.h>
#include <stddef.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(void) {
    size_t size = SIZE_MAX;
    volatile int *array = malloc(size);

    /* Allocate largest array */
    while (array == NULL && size > 0) {
        size >>= 1;
        array = malloc(size);
    }

    printf("Copying into %zu bytes\n", size);

    for (size_t n = 0; n < size / sizeof *array; n++) {
        array[n] = SHRT_MAX;
    }

    puts("Done!");
    return 0;
} 
```

我在我的系统上运行了它，编译时启用了各种优化（`-O3 -march=core2 -funroll-loops`）。这是输出：

```
Copying into 1073741823 bytes
Done!

Process returned 0 (0x0)   execution time : 1.094 s
Press any key to continue. 
```

注意“执行时间”......这非常快！如果有的话，这里的瓶颈是这样一个大数组的缓存局部性，这就是为什么一个好的程序员会尝试设计不使用这么多内存的系统......好吧，那么让我们考虑 memset 选项。[这是memset 手册](http://pubs.opengroup.org/onlinepubs/7908799/xsh/memset.html)的引述：

> memset() 函数将 c（转换为**unsigned char**）复制到 s 指向的对象的前 n 个字节中。

因此，它将 0xFFFF 转换为无符号字符（并可能截断该值），然后将转换后的值分配给第一个`size`字节。这会导致不正确的行为。我不喜欢依赖值 SHRT_MAX 来表示为存储 value 的字节序列`(unsigned char) 0xFFFF`，因为这依赖于巧合。换句话说，这里的主要问题是 memset 不适合您的任务。不要使用它。话虽如此，这里有一个测试，源自上面的测试，将用于测试 memset 的速度：

```
#include <limits.h>
#include <stddef.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(void) {
    size_t size = SIZE_MAX;
    volatile int *array = malloc(size);

    /* Allocate largest array */
    while (array == NULL && size > 0) {
        size >>= 1;
        array = malloc(size);
    }

    printf("Copying into %zu bytes\n", size);

    memset(array, 0xFFFF, size);

    puts("Done!");
    return 0;
} 
```

一个简单的字节复制 memset 循环将比`sizeof (int)`我的第一个示例中的循环迭代次数多。考虑到我的实现使用了相当优化的 memset，输出如下：

```
Copying into 1073741823 bytes
Done!

Process returned 0 (0x0)   execution time : 1.060 s
Press any key to continue. 
```

这些测试可能会有所不同，但差异很大。我每个人只运行一次以获得一个粗略的想法。希望您得出与我相同的结论：普通编译器非常擅长优化简单循环，因此不值得在这里假设微优化。

总之：

1.  **不要使用 memset 用值填充整数（值 0 除外），因为它不适合。**
2.  不要在运行测试之前假设优化。在找到可行的解决方案之前不要运行测试。通过工作解决方案，我的意思是“解决实际问题的程序”。一旦你有了这个，**使用你的分析器来确定更重要的优化机会！**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-11T11:49:17.837

这是因为[补码](http://en.wikipedia.org/wiki/Two%27s_complement)。您必须将数组类型更改为`unsigned short`, 以获得最大值，或使用`0x7FFF`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-11T11:58:50.250

```
for (int i = 0; i < SIZE / sizeof(short); ++i) {
    ZBUFFER[i] = SHRT_MAX;
} 
```

请注意，这不会初始化最后几个字节，`if (SIZE % sizeof(short))`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-11T13:34:11.440

在 C 中，您可以像[Adrian Panasiuk](https://stackoverflow.com/a/15948214/193892)所说的那样做，也可以展开复制循环。展开意味着一次复制更大的块。循环展开的最末端是用零帧复制整个帧，如下所示：

```
init()
{
    for (int i = 0; i < sizeof(ZBUFFER) / sizeof(ZBUFFER[0]; ++i) {
        empty_ZBUFFER[i] = SHRT_MAX;
    }
} 
```

实际清算：

```
memcpy(ZBUFFER, empty_ZBUFFER, SIZE); 
```

（您可以试验不同大小的空 ZBUFFER，从 4 个字节及以上，然后围绕 memcpy 进行循环。）

与往常一样，测试您的发现，如果*a)*值得优化程序的这一部分，并且*b)*不同的初始化技术有什么不同。这将取决于很多因素。对于最后百分之几的性能，您可能不得不求助于汇编代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-11T12:01:39.023

```
#include <algorithm>
#include <limits>

std::fill_n(ZBUFFER, size, std::numeric_limits<FOO>::max()) 
```

其中`FOO`是`ZBUFFER`'s 元素的类型。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-11T12:01:47.503

当您说“memset”时，您实际上必须使用该功能吗？这只是逐字节分配，因此不适用于签名数组。

如果要将每个值设置为最大值，则可以使用以下内容：

`std::fill( ZBUFFER, ZBUFFER+len, std::numeric_limits<short>::max() )`

什么时候`len`是元素的数量（不是数组的字节大小）

# iphone - 收到通知后，UILabel 文本不更新

> ID：15947973
> 
> 赞同：1
> 
> 时间：2013-04-11T11:46:41.940
> 
> 标签：iphone, ios, objective-c

当我使用这个设置标签时

```
self.versionLbl.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"version"]; 
```

在该`viewDidLoad`方法中，它在加载视图时起作用，但我也想在收到通知时设置标签。

```
- (void)receiveNotification:(NSNotification *) notification
{
  if ([[notification name] isEqualToString:@"versionNotification"]){
    NSLog (@"Successfully received the notification!");
    self.versionLbl.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"version"];
  }
} 
```

字符串`"Successfully received the notification!"`被打印出来，但标签不会用字符串更新/设置，除非我再次重新加载视图并`viewDidLoad`调用该方法。

**编辑**

我发现它与通知无关，当我放入`self.versionLbl.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"version"];`另一个函数时也没有设置......它只有在我将它放入 viewDidLoad 方法时才会被设置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:27:33.937

确保您的标签不是`nil`，并且您正在主线程中调用 UIKit 方法。你可以试试这个：

```
dispatch_async(dispatch_get_main_queue(), ^{
    self.versionLbl.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"version"];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:05:37.073

在你的 UILabel 检查 IBOutlet。您应该将声明的 IBOutlet UILabel 与 .xib 文件上带有标签的属性连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:07:54.477

如果它在视图已经加载后加载，请尝试 [myLabel setNeedsDisplay];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:13:33.193

首先确保存储的对象`[[NSUserDefaults standardUserDefaults] objectForKey:@"version"];`实际上是一个`NSString`对象。

如果没有，您有几种选择：

```
self.versionLbl.text = [[NSUserDefaults standardUserDefaults] stringForKey:@"version"]; 
```

或者

```
id versionObject = [[NSUserDefaults standardUserDefaults] objectForKey:@"version"];
self.versionLbl.text = [NSString stringWithFormat:@"%@", versionObject]; 
```

或者

```
id versionObject = [[NSUserDefaults standardUserDefaults] objectForKey:@"version"];
self.versionLbl.text = [versionObject stringValue]; 
```

# c# - SharePoint 2010 和 ASP.net 缓存

> ID：15947974
> 
> 赞同：1
> 
> 时间：2013-04-11T11:46:52.360
> 
> 标签：c#, asp.net, sharepoint-2010

我们有一个由 4 个 SharePoint 2010 服务器组成的网络场。如 web1、web2、web3、web4 及其 AAM 为[http://xxx.sharepoint.com](http://xxx.sharepoint.com)。现在我正在制作一个 Web 部件，其中一些数据将由`HttpContext.Current.Cache`. 现在我们知道 ASP.NET 缓存仅限于服务器内存，并且不会在网络场中的其他服务器之间共享，所以我创建了一个解决方案，我将访问每个服务器，并在 web.config 中填写服务器列表在农场中用分号分隔，每当有任何东西添加到缓存中时，我都会将数据发送到另一台服务器并同步缓存，并对删除的缓存项执行相同的操作。

现在我的问题是如何在 SharePoint 场中按自己的名称单独调用其他服务器。

```
 For example (http://web1/) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:28:45.177

不是直接的答案，但您可以使用Sharepoint 上的[计时器作业](http://msdn.microsoft.com/en-us/library/ff464297%28v=office.14%29.aspx)在所有服务器上实现某些东西。请注意，Sharepoint 计时器服务必须在所有服务器上运行，并且它不会实时发生（也不会花费很长时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:44:53.513

我使用了 memcache，效果很好 :) 符合预期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:54:57.340

Microsoft Velocity 是您的方案的完美用例。Velocity 将为您提供分布式和内存缓存。

链接： [使用分布式缓存构建更好的数据驱动应用程序](http://msdn.microsoft.com/en-us/magazine/dd861287.aspx "使用分布式缓存构建更好的数据驱动应用程序")

# java - 迭代 n 维数组

> ID：15947976
> 
> 赞同：4
> 
> 时间：2013-04-11T11:46:57.517
> 
> 标签：java, arrays, loops, iteration, multidimensional-array

如何迭代 n 维数组（*n*未知）？

我发现 C++ 的结果可以简单地通过数组的内存区域运行，但我不知道我是否可以在 JAVA 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:00:12.113

这可以满足您的需求：

```
public interface ElementProcessor {    
    void process(Object e);    
}

public static void iterate(Object o, ElementProcessor p) {
    int n = Array.getLength(o);
    for (int i = 0; i < n; i++) {
        Object e = Array.get(o, i);
        if (e != null && e.getClass().isArray()) {
            iterate(e, p);
        } else {
            p.process(e);
        }
    }
} 
```

然后，在调用时：

```
// the process method will be called on each element of the n-dimensional
ElementProcessor p = new ElementProcessor() {
    @Override
    public void process(Object e) {
        // simply log for example
        System.out.println(e);
    }
};

int[] a1 = new int[] { 1, 2 };
int[][] a2 = new int[][] { new int[] { 3, 4 }, new int[] { 5, 6 } };

iterate(a1, p);
iterate(a2, p); 
```

这打印：

```
1
2
3
4
5
6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:57:15.450

我在别的地方找到了这个。对于您的问题，这是一个相当不错的递归解决方案：

```
 interface Callback {
       void visit(int[] p); // n-dimensional point
    }

void visit(int[] bounds, int currentDimension, int[] p, Callback c) {
   for (int i = 0; i < bounds[currentDimension]; i++) {
        p[currentDimension] = i;
        if (currentDimension == p.length - 1) c.visit(p);
        else visit(bounds, currentDimension + 1, p, c);
   }
}

visit(new int[] {10, 10, 10}, 0, new int[3], new Callback() {
   public void visit(int[] p) {
        System.out.println(Arrays.toString(p));
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:00:49.333

在 C/C++ 中，多维数组 ( `int[][]`) 在内存中以平面方式表示，并且索引运算符被转换为指针算术。这就是为什么在这些语言中做到这一点很容易和直接的原因。

然而这不是Java中的情况，多维数组是数组的数组。由于类型经过严格检查，因此在数组数组中进行索引会产生数组类型，而不是内部数组包含的类型。

所以回答这个问题：**不，你不能在 Java 中像在 C/C++ 中那样简单地做到这一点**

为此，请参阅其他答案.. :-)

# c# - C# 中的 MS Word 集成？

> ID：15947977
> 
> 赞同：1
> 
> 时间：2013-04-11T11:46:57.927
> 
> 标签：c#, ms-word

我试图四处寻找有关此主题的文档，但我还没有真正找到具体的答案。只是回答我没有真正面临的问题。

我想从数据库中提取一些模式和短语，并使用 C# 在 MS Word 中生成一个 docx（或 doc？）文件。这是学校项目的一部分。但是集成部分似乎没有很好的记录，或者我在错误的地方寻找。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:51:32.007

谷歌的神奇词是“互操作”。试试这个作为起点：

[http://www.dotnetperls.com/word](http://www.dotnetperls.com/word)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:52:35.903

以编程方式创建 Word 文档基本上有两种方法：

*   通过以编程方式调用（和启动）word 创建文档

*   以 Word 可读的开放 XML 格式创建 word 文档。

有关更多信息，请参见 stackoverflow 上的类似问题： [How to create word docs programmatically from a template](https://stackoverflow.com/questions/4304238/how-to-create-word-docs-programmatically-from-a-template)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:53:44.860

尝试使用 Open XML SDK 2.0 for Microsoft Office[链接](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

它提供了使用 docx 文件的简单方法。之后的 docx 格式是简单的压缩 xml 文件。

# javascript - 如何保留拖放元素的位置？

> ID：15947981
> 
> 赞同：0
> 
> 时间：2013-04-11T11:47:05.850
> 
> 标签：javascript, drag-and-drop

在我的测试网站`http://109.201.141.20/DragAndDropTest/default.aspx`（但是，当我这样做然后更改为不同的选项卡然后更改回来时，所有数据都已重置：所有元素都回到左侧框中。尽管在选项卡之间进行更改并不会重新加载页面，但还是会这样做。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:07:27.857

每次单击第二个选项卡 (#liRoomTypes) 时，它都会重新加载 #dhtmlgoodies_mainContainer2 div 的 html。（检查第 34 行）

最好将该 html 添加到索引页面的正文中并将显示设置为无，然后当您单击第二个选项卡时，您隐藏第一个选项卡内容并只显示第二个选项卡。

# scala - 解构 Scalaz <**>

> ID：15947982
> 
> 赞同：3
> 
> 时间：2013-04-11T11:47:06.850
> 
> 标签：scala, scalaz

有更好知识的人可以帮助我了解 Scalaz`<**>`和`co.`工作原理吗？我是 Scalaz 的新手，在探索中有点迷失。

我想要做的是在 List 中累积错误，例如 `(v0 <**> v1) foldLeft(l: List[Validation[A,B]) (_ :: _ :: l)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:14:06.633

为了解决我的问题，我发现 liftFailNel 有帮助（[https://github.com/scalaz/scalaz/blob/master/example/src/main/scala/scalaz/example/ExampleValidation.scala](https://github.com/scalaz/scalaz/blob/master/example/src/main/scala/scalaz/example/ExampleValidation.scala)）但我仍然没有掌握所有这里发生的魔法。

# java - Hadoop - 如何使用和减少多个输入？

> ID：15947983
> 
> 赞同：5
> 
> 时间：2013-04-11T11:47:10.347
> 
> 标签：java, hadoop, mapreduce

```
Mapper/Reducer 1 --> (key,value)
                      /   |   \
                     /    |    \
     Mapper/Reducer 2     |    Mapper/Reducer 4
     -> (oKey,oValue)     |    -> (xKey, xValue)
                          |
                          |
                    Mapper/Reducer 3
                    -> (aKey, aValue) 
```

我有一个日志文件，我将其与 MR1 汇总。Mapper2、Mapper3、Mapper4 将 MR1 的输出作为它们的输入。作业是链式的。

MR1 输出：

```
User     {infos of user:[{data here},{more data},{etc}]}
.. 
```

MR2 输出：

```
timestamp       idCount
.. 
```

MR3 输出：

```
timestamp        loginCount
.. 
```

MR4 输出：

```
timestamp        someCount
.. 
```

我想合并 MR2-4 的输出：最终输出->

```
timestamp     idCount     loginCount   someCount
..
..
.. 
```

有没有办法没有猪或蜂巢？我正在使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:27:42.677

据我所知，reducer 类中不能有输出数组。我想到解决您的问题的方法如下：

您**的 MR1 输出键**将是其中之一，`{a,b,c}`并且**值**是键之间`{timestamp,idCount}`或`{timestamp, loginCount}`或`{timestamp, someCount}`根据键的对。你将结合**MR2-4**。

所以这个过程将是这样的：

```
MR1 <inputKey,inputValue,outputKey,outPutValue> where outputKey is 
                                       "a" for outValue`{timestamp,idCount}
                                       "b" for outValue`{timestamp, loginCount} 
                                       "c" for outValue`{timestamp, someCount} 

MR2-4<inputKey,inputValue,outputKey,outPutValue> if inputkey is "a" do MR2
                                                 if inputkey is "b" do MR3
                                                 if inputkey is "c" do MR4 
```

此外，还调用了一些方法`Partitioner and GroupComperator`，您可以在其中使用 {key/value} 和 mapper/reducer 可以将`key+some_part_of_value`其视为键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:53:26.903

您可以使用[MultipleInputs执行此操作，请参见](http://hadoop.apache.org/docs/r2.0.3-alpha/api/org/apache/hadoop/mapred/lib/MultipleInputs.html)[此处](http://kickstarthadoop.blogspot.co.il/2011/09/joins-with-plain-map-reduce.html)的示例

# matlab - matlab中的Alpha beta剪枝实现

> ID：15947984
> 
> 赞同：1
> 
> 时间：2013-04-11T11:47:13.203
> 
> 标签：matlab, recursion

调用以下函数时，我不断收到错误消息。错误是`bestboard`在调用 searchTree.m 期间未分配输出参数（可能还有其他参数）。

```
function [alpha,bestboard] = searchTree(board,depth,alpha,beta,turn)

if(depth<=0)

    alpha=calculateHeuristic(board,changeTurn(turn));
    bestboard=board;
    return
else
    child=GenerateChild(board,turn);
    a=size(child,3);

    if(turn==2)

        turn=changeTurn(turn);
        for i=1:a    
            [score,aboard]=searchTree(child(:,:,i),depth-1,alpha,beta,turn);
            if(score>alpha)
                alpha=score;
                bestboard=child(:,:,i);
            end
        end

        return
    else

        for j=1:a
            turn=changeTurn(turn);
            [scor,bboard]=searchTree(child(:,:,j),depth-1,alpha,beta,turn);
            if(scor<beta)
                beta=scor;
                bestboard=child(:,:,j);
                alpha=beta;
            end

        end

    return
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:53:21.467

这是因为`bestboard`分配在一个`if`没有别的。在您的函数中，if`turn ~= 2`和then不会被分配给。考虑在开始时为其分配一个默认值？`scor >= beta``depth > 0``bestboard`

# javascript - 在我的 Python CGI 脚本中，如何将通过用户在表单中输入的数据的 POST 请求上传的文件保存到磁盘？

> ID：15947988
> 
> 赞同：1
> 
> 时间：2013-04-11T11:47:23.970
> 
> 标签：javascript, python, html, cgi

客户端有一个简单的表单，它接受一个文本和一个文件：

```
<form name="add_show" id="add_show" action="" method="GET">

    <label class="text-info">Show Name:</label>
    <input type="text" id="show_name" name="show_name" placeholder="My Show Name" required><br><br>

    <label class="text-info">Show's File (JSON):</label>
    <input type="file" id="file" name="file" required><br><br>

    <p><input class="btn btn-danger btn-small" name="button2" value="Add the Show!" onClick="addFullShow(this.form)"></p>

</form> 
```

使用 Javascript，我将数据发送到服务器的 Python CGI 脚本：

```
function addFullShow(form) {

      alert("about to send form");

      var formElement = form;
      formData = new FormData(formElement);

      var xhr = new XMLHttpRequest();
      xhr.open("POST", "myScript.cgi");
      xhr.send(formData);

    } 
```

在服务器端 Python CGI 脚本中，我有字段 storage `fs = cgi.FieldStorage()`，并且我知道如何获取文本值，即`fs['key'].value`.

如何保存上传到磁盘的文件？

我希望我足够清楚。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T12:02:31.427

使用此代码将文件存储在磁盘上

```
import os, cgi
fs = cgi.FieldStorage()
fileitem = fs['userfile']

# Test if the file was uploaded
if fileitem.filename:
   fn = os.path.basename(fileitem.filename)
   open('/tmp/' + fn, 'wb').write(fileitem.file.read())
   message = 'The file "' + fn + '" was uploaded successfully'
else:
   message = 'No file was uploaded' 
```

# java - 不幸的是，应用名称已停止

> ID：15947989
> 
> 赞同：0
> 
> 时间：2013-04-11T11:47:25.347
> 
> 标签：java, android

我已经经历了很多例子，但仍然找不到解决方案。我是 android 开发的新手，所以我在线学习基本教程。每次我在 AVD 上启动应用程序时，它都会显示“不幸的是应用程序已停止”。

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.androidbmi"
        android:versionCode="1"
        android:versionName="1.0" >
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-sdk
            android:minSdkVersion="9"
            android:targetSdkVersion="17" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.androidbmi.BMICalculator"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>
    <supports-screens android:anyDensity="true"
            android:largeScreens="true"
            android:smallScreens="true" />
    </manifest> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/weightLabel"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/weightText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="numberDecimal" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/heightLabel"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/heightText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="numberDecimal" />

    <Button
        android:id="@+id/calculateButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="calculateClickHandler"
        android:text="@string/calculateButton" />

    <TextView
        android:id="@+id/resultLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/emptyString"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</LinearLayout> 
```

BMICalculatorActivity.xml

```
package com.example.androidbmi;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;

import android.widget.EditText;
import android.widget.TextView;

public class BMICalculatorActivity extends Activity {
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void calculateClickHandler(View view) {
     // make sure we handle the click of the calculator button

     if (view.getId() == R.id.calculateButton) {

      // get the references to the widgets
      EditText weightText = (EditText)findViewById(R.id.weightText);
      EditText heightText = (EditText)findViewById(R.id.heightText);
      TextView resultText = (TextView)findViewById(R.id.resultLabel);

      // get the users values from the widget references

      float weight = Float.parseFloat(weightText.getText().toString());
      float height = Float.parseFloat(heightText.getText().toString());

      // calculate the bmi value

      float bmiValue = calculateBMI(weight, height);

      // interpret the meaning of the bmi value
      String bmiInterpretation = interpretBMI(bmiValue);

      // now set the value in the result text

      resultText.setText(bmiValue + "-" + bmiInterpretation);
     }
    }

    // the formula to calculate the BMI index

    // check for http://en.wikipedia.org/wiki/Body_mass_index
    private float calculateBMI (float weight, float height) {

     return (float) (weight * 4.88 / (height * height));
    }

    // interpret what BMI means
    private  String interpretBMI(float bmiValue) {

     if (bmiValue < 16) {
      return "Severely underweight";
     } else if (bmiValue < 18.5) {

      return "Underweight";
     } else if (bmiValue < 25) {

      return "Normal";
     } else if (bmiValue < 30) {

      return "Overweight";
     } else {
      return "Obese";
     }

    }
} 
```

我的 AVD 是带有 Android 4.2.2 的 Nexus S 请帮助大家，这让我发疯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:50:45.863

活动名称错误。

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.androidbmi"
        android:versionCode="1"
        android:versionName="1.0" >
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-sdk
            android:minSdkVersion="9"
            android:targetSdkVersion="17" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.androidbmi.BMICalculatorActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>
    <supports-screens android:anyDensity="true"
            android:largeScreens="true"
            android:smallScreens="true" />
    </manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:58:51.407

在您的活动清单文件中定义正确的名称。

> ```
>  <activity
>             android:name="com.example.androidbmi.BMICalculatorActivity"
>             android:label="@string/app_name" > 
> ```

# java - Java Unicode 字符串长度

> ID：15947992
> 
> 赞同：56
> 
> 时间：2013-04-11T11:47:37.443
> 
> 标签：java, string, utf-8, utf-16, unicode-string

我正在努力获取 unicode 字符串的数量并尝试了各种选项。看起来像一个小问题，但打击很大。

在这里，我试图获取字符串 str1 的长度。我得到它为 6。但实际上它是 3。将光标移到字符串“குமார்”上也将其显示为 3 个字符。

基本上我想测量长度并打印每个字符。比如“கு”、“மா”、“ர்”。

```
 public class one {
    public static void main(String[] args) {
            String str1 = new String("குமார்");
            System.out.print(str1.length());
    }
} 
```

PS：这是泰米尔语。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-11T12:52:23.997

找到了解决您的问题的方法。

基于[这个 SO answer](https://stackoverflow.com/a/8798355/637284)，我制作了一个程序，该程序使用正则表达式字符类来搜索可能具有可选修饰符的字母。它将您的字符串拆分为单个（必要时组合）字符并将它们放入列表中：

```
import java.util.*;
import java.lang.*;
import java.util.regex.*;

class Main
{
    public static void main (String[] args)
    {
        String s="குமார்";
        List<String> characters=new ArrayList<String>();
        Pattern pat = Pattern.compile("\\p{L}\\p{M}*");
        Matcher matcher = pat.matcher(s);
        while (matcher.find()) {
            characters.add(matcher.group());            
        }

        // Test if we have the right characters and length
        System.out.println(characters);
        System.out.println("String length: " + characters.size());

    }
} 
```

其中`\\p{L}`表示 Unicode 字母，`\\p{M}`表示 Unicode 标记。

片段的输出是：

```
கு
மா
ர்
String length: 3 
```

有关工作演示，请参阅[https://ideone.com/Apkapn](https://ideone.com/Apkapn)

* * *

**编辑**

现在，我使用从[http://en.wikipedia.org/wiki/Tamil_script](http://en.wikipedia.org/wiki/Tamil_script)中的表格中获取的所有有效泰米尔语字母检查了我的正则表达式。我发现使用当前的正则表达式无法正确捕获所有字母（Grantha 复合表最后一行中的每个字母都被拆分为两个字母），因此我将正则表达式改进为以下解决方案：

```
Pattern pat = Pattern.compile("\u0B95\u0BCD\u0BB7\\p{M}?|\\p{L}\\p{M}?"); 
```

使用此模式而不是上述模式，您应该能够将您的句子拆分为每个有效的泰米尔语字母（只要维基百科的表格完整）。

我用于检查的代码如下：

```
String s = "ஃஅஆஇஈஉஊஎஏஐஒஓஔக்ககாகிகீகுகூகெகேகைகொகோகௌங்ஙஙாஙிஙீஙுஙூஙெஙேஙைஙொஙோஙௌச்சசாசிசீசுசூசெசேசைசொசோசௌஞ்ஞஞாஞிஞீஞுஞூஞெஞேஞைஞொஞோஞௌட்டடாடிடீடுடூடெடேடைடொடோடௌண்ணணாணிணீணுணூணெணேணைணொணோணௌத்ததாதிதீதுதூதெதேதைதொதோதௌந்நநாநிநீநுநூநெநேநைநொநோநௌப்பபாபிபீபுபூபெபேபைபொபோபௌம்மமாமிமீமுமூமெமேமைமொமோமௌய்யயாயியீயுயூயெயேயையொயோயௌர்ரராரிரீருரூரெரேரைரொரோரௌல்லலாலிலீலுலூலெலேலைலொலோலௌவ்வவாவிவீவுவூவெவேவைவொவோவௌழ்ழழாழிழீழுழூழெழேழைழொழோழௌள்ளளாளிளீளுளூளெளேளைளொளோளௌற்றறாறிறீறுறூறெறேறைறொறோறௌன்னனானினீனுனூனெனேனைனொனோனௌஶ்ஶஶாஶிஶீஶுஶூஶெஶேஶைஶொஶோஶௌஜ்ஜஜாஜிஜீஜுஜூஜெஜேஜைஜொஜோஜௌஷ்ஷஷாஷிஷீஷுஷூஷெஷேஷைஷொஷோஷௌஸ்ஸஸாஸிஸீஸுஸூஸெஸேஸைஸொஸோஸௌஹ்ஹஹாஹிஹீஹுஹூஹெஹேஹைஹொஹோஹௌக்ஷ்க்ஷக்ஷாக்ஷிக்ஷீக்ஷுக்ஷூக்ஷெக்ஷேக்ஷைஷொக்ஷோஷௌ";
List<String> characters = new ArrayList<String>();
Pattern pat = Pattern.compile("\u0B95\u0BCD\u0BB7\\p{M}?|\\p{L}\\p{M}?");
Matcher matcher = pat.matcher(s);
while (matcher.find()) {
    characters.add(matcher.group());
}

System.out.println(characters);
System.out.println(characters.size() == 325); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-11T11:55:07.783

看看[Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)类。有一个解释可能是您的问题的原因。在 Unicode 中，您可以通过多种方式对字符进行编码，例如`Á`：

```
 U+00C1    LATIN CAPITAL LETTER A WITH ACUTE 
```

或者

```
 U+0041    LATIN CAPITAL LETTER A
  U+0301    COMBINING ACUTE ACCENT 
```

您可以尝试使用`Normalizer`将字符串转换为组合形式，然后遍历字符。

* * *

**编辑：**根据上面@halex 建议的文章，在 Java 中试试这个：

```
 String str = new String("குமார்");

    ArrayList<String> characters = new ArrayList<String>();
    str = Normalizer.normalize(str, Form.NFC);
    StringBuilder charBuffer = new StringBuilder();
    for (int i = 0; i < str.length(); i++) {
        int codePoint = str.codePointAt(i);
        int category = Character.getType(codePoint);
        if (charBuffer.length() > 0
                && category != Character.NON_SPACING_MARK
                && category != Character.COMBINING_SPACING_MARK
                && category != Character.CONTROL
                && category != Character.OTHER_SYMBOL) {
            characters.add(charBuffer.toString());
            charBuffer.delete(0, charBuffer.length());
        }
        charBuffer.appendCodePoint(codePoint);
    }
    if (charBuffer.length() > 0) {
        characters.add(charBuffer.toString());
    }
    System.out.println(characters); 
```

我得到的结果是`[கு, மா, ர்]`. 如果它不适用于所有字符串，请尝试修改`if`块中的其他 Unicode 字符类别。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-11T12:17:04.293

事实证明这*真的*很难看......我已经调试了你的字符串，它包含以下字符（及其十六进制位置）：

க 0x0b95
ு 0x0bc1
ம 0x0bae
ா 0x0bbe
ர 0x0bb0
் 0x0bcd

因此，泰米尔语显然使用类似变音符号的序列来获取不幸被视为单独实体的所有字符。

这不是其他答案错误地声称的 UTF-8 / UTF-16 的问题，它是泰米尔语的 Unicode 编码所固有的。

建议的规范化器不起作用，似乎泰米尔语是由 Unicode“专家”设计的，以明确使用无法规范化的组合序列。啊。

我的下一个想法不是计算*字符*，而是计算*字形*，即字符的视觉表示。

```
String str1 = new String(Normalizer.normalize("குமார்", Normalizer.Form.NFC ));

Font display = new Font("SansSerif",Font.PLAIN,12);
GlyphVector vec = display.createGlyphVector(new FontRenderContext(new AffineTransform(),false, false),str1);

System.out.println(vec.getNumGlyphs());
for (int i=0; i<str1.length(); i++)
        System.out.printf("%s %s %s %n",str1.charAt(i),Integer.toHexString((int) str1.charAt(i)),vec.getGlyphVisualBounds(i).getBounds2D().toString()); 
```

结果：

க b95 [x=0.0,y=-6.0,w=7.0,h=6.0]
ு bc1 [x=8.0,y=-6.0,w=7.0,h=4.0]
ம bae [x=17.0,y=- 6.0,w=6.0,h=6.0]
ா bbe [x=23.0,y=-6.0,w=5.0,h=6.0]
ர bb0 [x=30.0,y=-6.0,w=4.0,h=8.0]
் bcd [x=31.0,y=-9.0,w=1.0,h=2.0]

由于字形相交，您需要像在其他解决方案中一样使用 Java 字符类型函数。

解决方案：

我正在使用这个链接：[http ://www.venkatarangan.com/blog/content/binary/Counting%20Letters%20in%20an%20Unicode%20String.pdf](http://www.venkatarangan.com/blog/content/binary/Counting%20Letters%20in%20an%20Unicode%20String.pdf)

```
public static int getTamilStringLength(String tamil) {
    int dependentCharacterLength = 0;
    for (int index = 0; index < tamil.length(); index++) {
        char code = tamil.charAt(index);
        if (code == 0xB82)
            dependentCharacterLength++;
        else if (code >= 0x0BBE && code <= 0x0BC8)
            dependentCharacterLength++;
        else if (code >= 0x0BCA && code <= 0x0BD7)
            dependentCharacterLength++;
    }
    return tamil.length() - dependentCharacterLength;
  } 
```

您需要排除组合字符并相应地计算它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T12:51:30.657

如前所述，您的字符串包含 6 个不同的代码点。其中一半是字母，另一半是元音符号。（组合标记）

您可以使用ICU4J 库中内置的[转换](http://userguide.icu-project.org/transforms/general)，使用以下规则删除所有不是字母的元音符号：

[:^字母:] 删除

并计算结果字符串。在他们的演示网站上试用：

[http://demo.icu-project.org/icu-bin/translit](http://demo.icu-project.org/icu-bin/translit)

我不会将结果字符串显示给最终用户，而且我不是专家，因此可能需要调整规则以达到一般情况，但这是一个想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-28T21:21:43.890

这是考虑 Unicode 字符来计算 Java 字符串长度的新方法。

```
int unicodeLength = str.codePointCount(0, str.length); 
```

# perl - perl（Statistics::PCA）：不能使用字符串（“0”）作为数组引用，而“严格引用”

> ID：15947997
> 
> 赞同：3
> 
> 时间：2013-04-11T11:48:06.430
> 
> 标签：perl, ref, strict

我正在尝试使用[Statistics::PCA](http://search.cpan.org/~dsth/Statistics-PCA-0.0.1/lib/Statistics/PCA.pm)包对某些遗传变异进行 PCA。该包需要读取列表列表（如果我理解正确，那可以是数组数组，对吗？）。

下面是我的代码的一部分，我在其中为每个人创建数组（每个人都是一个实际的人类受试者，得到一个填充有 0 和 1 的数组，这表示存在或不存在称为“SV”的遗传变异），然后将它们推送到我的名为@LoL_SVs 的数组中：

```
my @LoL_SVs;

foreach (@individuals) {
    my $ind = $_;
    foreach (@all_SVs) {
        if ($SV{$ind}{$_} != 1) {
            push(@{$SVs{$ind}}, "0");
        }
        if ($SV{$ind}{$_} == 1) {
            push(@{$SVs{$ind}}, "1");
        }
    }
    push @LoL_SVs, [ @{$SVs{$ind}} ];
} 
```

然后，我尝试按照模块的[CPAN](http://search.cpan.org/~dsth/Statistics-PCA-0.0.1/lib/Statistics/PCA.pm)网站上的说明加载数据（参见 *load_data* 段）：

```
use Statistics::PCA;

my $pca = Statistics::PCA->new;

$pca->load_data ( { format => 'table', data => @LoL_SVs, } ); 
# ^ this line is where it goes wrong 
```

不幸的是，这不起作用，我收到错误消息：

> 在 /home/abdel/myperl/share/perl/5.10.1/Statistics/PCA.pm 第 189 行使用“strict refs”时，不能使用字符串 ("0") 作为 ARRAY ref。

知道这里可能出了什么问题吗？

我希望问题得到很好的说明，否则如果您需要更多信息，请告诉我！非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:55:08.927

您在`load_data`通话中的选择包括：

```
data => @LoL_SVs 
```

而在文档中它是这样描述的

```
data => [ \@Obs1, \@Obs2, \@Obs3, \@Obs4, \@Obs5 ], 
```

您尝试加载一个数组，但模块需要一个数组引用（可能是数组引用）。因此，当您尝试将空数组作为标量参数传递时，它的计算结果为`0`（因为它包含 0 个元素）。如同：

```
my @bar;
my $foo = @bar;   # @bar is empty, $foo is 0
print $foo->[0];  # Can't use string ("0") as ARRAY ref ... 
```

您的问题*可以*通过将引用传递给来解决`@LoL_SVs`：

```
data => \@LoL_SVs 
```

作为旁注，您使用的是很好的

```
use strict; 
```

我也希望你正在使用

```
use warnings; 
```

没有`strict`和使用类似的变量名`@LoL_SVs`很容易出现拼写错误，`@Lol_Svs`从而导致难以检测到错误。如果不使用`warnings`，这样的错误将更难找到。

# asp.net - Crystal Report 错误：从代码隐藏提供参数时“缺少参数值”

> ID：15947998
> 
> 赞同：1
> 
> 时间：2013-04-11T11:48:07.927
> 
> 标签：asp.net, parameters, crystal-reports

我在我的网络应用程序中使用水晶报表。我的问题是当我保留 EnableDatabaseLogonPrompt="true" 和 EnableParameterPrompt="true" 并在提示框中提供信息时，我的报告工作正常。但是当我将它们保持为假并从其背后的代码中提供信息时，总是会出现“缺少参数值”或“数据库登录失败”的错误。

我的代码如下：

.aspx 文件：

```
 <CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" 
            AutoDataBind="True" 
            GroupTreeImagesFolderUrl="" Height="1202px" 
            ReportSourceID="CrystalReportSource1" ReuseParameterValuesOnRefresh="True" 
            ToolbarImagesFolderUrl="" ToolPanelWidth="200px" Width="903px" 
            ToolPanelView="None" EnableDatabaseLogonPrompt="False" 
            EnableParameterPrompt="False" />
        <CR:CrystalReportSource ID="CrystalReportSource1" runat="server">
            <Report FileName="CrystalReport1.rpt">
            </Report>
        </CR:CrystalReportSource> 
```

代码背后：

```
 ReportDocument reportDocument = new ReportDocument();           
       reportDocument.Load(Server.MapPath("~/CrystalReport1.rpt"));
       string s=@"4EVER3-PC\MSSQLSERVER2";
       reportDocument.SetDatabaseLogon("db", "pwd", s, "databasename", true);
       reportDocument.SetParameterValue("@bankACId", "0");
       reportDocument.SetParameterValue("@fromDate", "4/11/2011 17:01:57");
       reportDocument.SetParameterValue("@todate", "4/11/2014 17:01:57");

       CrystalReportViewer1.ReportSource = reportDocument;
       CrystalReportViewer1.RefreshReport(); 
```

请指出这段代码有什么问题。这让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:30:08.913

resolved the logon failed error.

I was accessing the database from another pc and its firewall was not allowing me to connect through crystal report. so i added sql server management studio to the list of allowed programs by firewall. So now connection problem is resolved.

So crystal report without any parameter works fine. but when i pass parameters it force closes the debug server..Any idea what should be the problem.

This is the half answer of my question which may be helpful to those who are facing connection problems.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:54:46.253

.aspx 文件：

```
 <CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" 
            AutoDataBind="True" 
            Height="1202px" 
            ReportSourceID="CrystalReportSource1" />
        <CR:CrystalReportSource ID="CrystalReportSource1" runat="server">
            <Report FileName="CrystalReport1.rpt">
            </Report>
        </CR:CrystalReportSource> 
```

代码背后：

```
 protected void btnShowReport_Click(object sender, EventArgs e)
    {
       LoadReport();           
    }

    private void LoadReport()
    {
        doc = new ReportDocument();
        doc.Load(Server.MapPath("CrSalesReport.rpt"));

        doc.SetDatabaseLogon(AppConfig.ReportServerDSUserName, AppConfig.ReportServerDSPassword, AppConfig.ReportServerDomain, "TexERP", false);

   doc .SetParameterValue("@bankACId", "0");
   doc .SetParameterValue("@fromDate", "4/11/2011 17:01:57");
   doc .SetParameterValue("@todate", "4/11/2014 17:01:57");

        CrystalReportViewer1.ReportSource = doc;
    } 
```