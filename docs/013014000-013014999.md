# StackOverflow 问答 13014000-13014999

# xml - Android 中接口的 XML 文件

> ID：13014002
> 
> 赞同：0
> 
> 时间：2012-10-22T14:50:28.920
> 
> 标签：xml, android-layout

我很了解Java编程。我正在开发一个 Android 项目，并且已经了解了如何为 android 创建应用程序。但是，我有一点我不了解android的接口。当我们使用 Java 时，我们在代码屏幕面板和一些导入中使用过，例如 Swing、AWT、SWT，但现在我们正在 XML 文件上创建接口，我不明白 XML 文件是如何创建接口的。我想知道它的逻辑。您能否告诉我有关 XML 文件的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:55:31.867

想想 XML 有点像 HTML——你基本上是使用标记来定义 UI 组件并为它们提供基本的样式属性，如位置、大小、颜色等，但实际上并没有任何行为属性。XML 标记（如 HTML）具有定义属性的名称和属性。在许多情况下，它们也可以嵌套。当一个标签中嵌套了其他标签时，我们称这些标签为子标签。带有子标签的标签有开始标签 () 和结束标签 ()。孩子被定义在两者之间。没有子标签的标签可以省略结束标签，方法是在封闭的 > 前面放置 /（斜杠）

```
<LinearLayout>
    <Button
       android:layout_width="100dp"
       android:layout_height="25dp"
       android:id="@+id/my_button"
       android:text="CLICK HERE" />
</LinearLayout> 
```

属性上有 android: 标签，以便 xml 解析器可以正确识别它们是 android 定义的属性，简单地说。eclipse ADT 中包含的构建工具（如果您不使用 eclipse，则包含在 sdk 工具中）在幕后生成 java 对象，并适当设置了相应的属性，因此您不必执行该工作。它还会生成一个 R.java 文件，其中包含指向它为您的布局元素生成的 java 对象的指针，以便您可以轻松地在 java 代码中引用它们：

```
Button myButton = (Button) findViewById(R.id.my_button);
myButton.setOnClickListener(...); 
```

如果您愿意，您可以完全使用 java 代码进行布局/UI 开发，但这会变得更加冗长乏味，因为您必须显式设置许多在相应 XML 代码中隐含/省略的值。XML 节省了大量时间，可视化编辑器使您更容易/更快地获得所需的外观。

使用 XML，您还可以定义想要轻松国际化的字符串，以及简单的可绘制对象，如果操作正确，可以轻松地按比例缩小屏幕尺寸和分辨率，以及简单的动画。使用资源目录上的“限定路径名”，您可以提供 XML 中定义的任何值/资源的替代版本（例如布局、可绘制对象或字符串），这些版本将在运行时根据用户设备适当地换出& 设置。

例如，您可以在 res/layout-land 中为横向定义一个布局，例如 main.xml，在 res/layout-port 中为纵向定义一个替代版本。然后应用程序将自动加载与用户方向相对应的布局。类似地，您可以在 res/values-en/strings.xml 中定义一个值为“Yes”的字符串，例如 button_label，并在 res/values-es/strings 中定义一个具有相同名称的字符串 button_label。 xml，值为“Si”。如果用户区域设置为英语，将使用“是”。如果他们的本地是西班牙语，将使用“Si”。

[http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

[http://developer.android.com/guide/topics/resources/overview.html](http://developer.android.com/guide/topics/resources/overview.html)

[http://developer.android.com/guide/topics/graphics/view-animation.html](http://developer.android.com/guide/topics/graphics/view-animation.html)

# android - 使用android maven插件时出现片段问题

> ID：13014006
> 
> 赞同：0
> 
> 时间：2012-10-22T14:50:51.827
> 
> 标签：android, android-maven-plugin

我有一个集成了 maven 的 android 项目，插件部分在这里

```
<plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.1.1</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>13</platform>
                    </sdk>
                    <sign>
                        <debug>both</debug>
                    </sign>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>                    
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins> 
```

一切顺利，就在我集成了 Fragment 之后，它停止从 mvn 命令行构建。

我已经检查并在 aapt 调用中存在 android 库...\android-sdk-windows\platforms\android-13\android.jar

我收到一些错误，其中包含

```
... cannot find symbol
symbol  : class Fragment
location: package android.app 
```

作为 mvn clean install 上的编译错误

我可以切换到使用支持库，但我更喜欢使用 android.app.Fragment。有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:03:32.060

我看到了版本，我也将 android 插件的版本更新为 4.1.1.4

```
 <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>>4.1.1.4</version>
        <scope>provided</scope>
    </dependency> 
```

# python - Python 中的线程与进程

> ID：13014007
> 
> 赞同：5
> 
> 时间：2012-10-22T14:50:53.770
> 
> 标签：python, multithreading, serial-port, multiprocessing

我即将使用 Python 启动一个程序，该程序主要进行轮询，它将不断从串行端口（通过`PySerial`）读取并从不时更改的文件描述符中读取。我开始研究该`threading`模块，但后来我不断发现[越来越](https://stackoverflow.com/questions/5058768/threads-in-python-again)多的使用该模块[的建议。](https://stackoverflow.com/questions/4319943/how-to-use-threads-in-python)`multiprocessing`

我不太精通 Python，主要来自 C 背景。Python 中的线程方法的技术优势是什么？

在 C 中，线程共享数据而不是必须设置一些 IPC 进行通信，这对于 Python 来说似乎是一样的？

我的用例：

```
Main process (or thread?) -
   start & initialize
       |
       V
    spaw child----------------------> start & initialize
       |                                   |
       V                                   V
      while (1) <------------+          wait for data<------+
       |                     |             |                |
       V                     |             V                |
   read file descriptors     |         read from            |
       |                     |         serial port<-----+   |
       V                     |             |            |   |
   value changed?  ------No--+             V            |   |
       |                     ^        message done?--No-+   |
       V                     |             |                |
    Report change------------+             V                |
     over serial                       alert parent---------+ 
```

所以我在考虑线程，因为它会使共享数据更容易通过串行传输，并且它们可以共享串行端口的句柄。这是有道理的，还是我从 Pythonic 的角度考虑不正确？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T14:52:59.743

`multiprocessing`在 Python 中主要用于避免 GIL（全局解释器锁），它会阻止线程对尝试并行计算有用 - 对于资源访问，线程是完美的，并且是易于实现的更好选择。

GIL 意味着只有一个线程可以同时对任何 Python 对象进行操作。这意味着在您试图加快计算速度的地方，进程将受到其他线程的阻碍。在您的用例中，一个线程只会检查新输入，因此这根本不会引起任何问题。

# expressionengine - 表达式引擎：为什么会话 ID 是 URL 的一部分

> ID：13014008
> 
> 赞同：2
> 
> 时间：2012-10-22T14:51:04.597
> 
> 标签：expressionengine

我正在更新开发服务器上的 EE 站点。我复制了数据库和所有核心文件，在测试链接时，许多（不是全部）在 URL 中间提供了会话编号，如下所示：

> [http://dev.myurl.com/S=169fe023498b4203567a5c3db2629348c99908d1/blog](http://dev.myurl.com/S=169fe023498b4203567a5c3db2629348c99908d1/blog)

我以前从未见过这个，它破坏了链接。任何线索是什么导致了这种情况，更重要的是我该如何摆脱它？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:34:20.597

这是**Admin** > **Security and Privacy** > **Security and Sessions**下的首选项。

将**用户会话类型**设置为**Cookies only**。任何包含**会话 ID**的选择都将使用 URL 中的令牌来跟踪用户的会话。

如果您使用配置文件覆盖，这会触发同样的事情：

```
$config['user_session_type'] = "c"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:32:37.580

在 EE 控制面板中，如果您转到 Admin -> Security & Privacy -> Security & Session Preferences，“用户会话类型”下有什么？

如果“会话 ID”或“cookie 和会话 ID”尝试仅更改为 cookie（将“控制面板会话类型”保留为“cookie 和会话 ID”

# objective-c - 将 ASIHTTPRequest 与使用 ARC 的项目一起使用

> ID：13014011
> 
> 赞同：3
> 
> 时间：2012-10-22T14:51:14.073
> 
> 标签：objective-c, facebook, macos, asihttprequest

我已将这些文件添加到我的项目中：

```
ASICacheDelegate.h
ASIDataCompressor.h
ASIDataCompressor.m
ASIDataDecompressor.h
ASIDataDecompressor.m
ASIDownloadCache.h
ASIDownloadCache.m
ASIFormDataRequest.h
ASIFormDataRequest.m
ASIHTTPRequest.h
ASIHTTPRequest.m
ASIHTTPRequestConfig.h
ASIHTTPRequestDelegate.h
ASIInputStream.h
ASIInputStream.m
ASINetworkQueue.h
ASINetworkQueue.m
ASIProgressDelegate.h 
```

然后在项目的构建阶段添加`-fno-objc-arc`，因为我的项目正在使用 ARC 并且 ASIHTTPRequest 是在不使用它的情况下编写的。当我尝试编译我的项目时，我得到了这些错误：

```
Undefined symbols for architecture x86_64:
  "_SCDynamicStoreCopyProxies", referenced from:
      -[ASIHTTPRequest configureProxies] in ASIHTTPRequest.o
  "_deflate", referenced from:
      -[ASIDataCompressor compressBytes:length:error:shouldFinish:] in ASIDataCompressor.o
  "_deflateEnd", referenced from:
      -[ASIDataCompressor closeStream] in ASIDataCompressor.o
  "_deflateInit2_", referenced from:
      -[ASIDataCompressor setupStream] in ASIDataCompressor.o
  "_inflate", referenced from:
      -[ASIDataDecompressor uncompressBytes:length:error:] in ASIDataDecompressor.o
  "_inflateEnd", referenced from:
      -[ASIDataDecompressor closeStream] in ASIDataDecompressor.o
  "_inflateInit2_", referenced from:
      -[ASIDataDecompressor setupStream] in ASIDataDecompressor.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我想用 ASIHTTPRequest 做什么：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me/photos?access_token=%@", access_token]];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request addFile:@"/Users/development/Desktop/12t.png" forKey:@"file"];
[request setPostValue:[NSString stringWithFormat:@"This is a test."] forKey:@"message"];
[request startAsynchronous]; 
```

* * *

如果我添加 CoreGraphics、zlib、CFNetwork 和 SystemConfiguration 框架（在我的 Xcode 中找不到 MobileCoreServices），我会收到以下错误：

```
Undefined symbols for architecture x86_64:
  "_Gestalt", referenced from:
      -[oglView(checkOSXVersion) checkForOSVersion:] in oglView+checkOSXVersion.o
      +[ASIHTTPRequest defaultUserAgentString] in ASIHTTPRequest.o
  "_UTTypeCopyPreferredTagWithClass", referenced from:
      +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
  "_UTTypeCreatePreferredIdentifierForTag", referenced from:
      +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
  "_kUTTagClassFilenameExtension", referenced from:
      +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
  "_kUTTagClassMIMEType", referenced from:
      +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T07:11:26.723

您似乎`ASIHttprequest`在 Mac OS X 项目中使用。因此，您需要遵循此说明。

> **在 Mac OS X 项目中使用 ASIHTTPRequest**
> 
> 要在 Mac 项目中使用 ASIHTTPRequest，您需要链接：
> 
> *   SystemConfiguration.framework + zlib（如上）
> *   CoreServices.framework CFNetwork 是 Mac OS X 上 CoreServices 框架的一部分。除非您正在编写基于控制台的应用程序，否则您的应用程序可能已经设置为与 CoreServices 链接，但如果没有，只需添加 CoreServices.framework如上所述。

来自：[http ://allseeing-i.com/ASIHTTPRequest/Setup-instructions](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-08T12:55:58.950

您需要添加一些必需的库，并且 ASSIHTTP 正在使用这些框架。这些框架是：-libz.dylib -systemConfiguration -MobileCoreServices -CFNetwork

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:55:07.227

似乎您没有包含 ASI 所依赖的库。查看[设置说明](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions)，特别是第 2 步：

```
Link with CFNetwork, SystemConfiguration, MobileCoreServices, CoreGraphics and zlib 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:55:47.177

您是否包含了所有依赖项？因为你什么都没提。 [http://allseeing-i.com/ASIHTTPRequest/Setup-instructions](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions) 您还应该包括 CFNetwork、SystemConfiguration、MobileCoreServices、CoreGraphics 和 zlib。

> zlib 和 MobileCoreServices

顺便说一句，如果你找不到 zlib（我自己没有 zlib），你可以包含 libz.x.dylib。你应该有 MobileCoreServices.framework 因为它们应该在 CoreService 框架中。如果您没有它，那么您别无选择再次安装它以使 ASI 正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T14:56:16.660

试试这个： - 选择项目 - 目标 - 选择构建阶段 - 检查 ASIHTTPRequest .m 文件是否已添加到“将二进制文件与库链接”

# jquery - jQuery ui 选项卡坏了？

> ID：13014015
> 
> 赞同：1
> 
> 时间：2012-10-22T14:51:33.743
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我一直在使用 jQuery ui 选项卡，类似于 jquery ui 网站上的示例，即：

[http://jqueryui.com/tabs/#default](http://jqueryui.com/tabs/#default)

但是这个示例代码已经停止为我工作：

[http://jsfiddle.net/Ndyy8/](http://jsfiddle.net/Ndyy8/)，即：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
    <div id="tabs-3">
        <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
        <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
    </div>
</div> 
```

它似乎想一直同时显示所有 3 个选项卡的内容。为什么这开始发生了？查看我给出的 jsfiddle 示例的其他人是否会发生这种情况？

以下是我在 html 标题中使用的脚本选项卡：

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/smoothness/jquery-ui.css" rel="stylesheet" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:55:55.173

您正在包括 jQuery UI 1.9 的样式表，请注意 /1/

试试这个：

```
<link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/smoothness/jquery-ui.css" rel="stylesheet" /> 
```

# jquery - jQuery在设置另一个div的高度时正在移动div

> ID：13014019
> 
> 赞同：0
> 
> 时间：2012-10-22T14:51:46.453
> 
> 标签：jquery, html, css

我尝试使用 div 将自己介绍到无表格布局中。第一次尝试是这个（德语）页面的内部内容：

[http://bit.ly/RnSdGP](http://bit.ly/RnSdGP) (Shorturl，因为它是一个不打算出现在搜索引擎中的测试站点)

一般来说，这非常有效！但现在我想动态设置列表的高度。我发现，这只适用于 jQuery。我的第一种方法是以下代码段：

```
$(window).load(function() {     
        $(".scrollBox").height($(".gameInfo").height());    
    }); 
```

一般来说，代码片段会按照它所说的去做。但它做得更多！它使用窗口图标和整个框下方的文本移动部分（具有“文本”类的 div）。为什么？没有脚本，布局很好，但是滚动框的大小没有调整为正确的内容:)

我可以在脚本中将高度设置为 2000，但结果是文本字段向下移动到整个框下方。

也许有人可以看到我做错了什么，在此先感谢:)

问候

马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:54:40.183

尝试在css中设置

```
vertical-align: top; 
```

对于两个容器。可以修

PS: Dein halber Beitrag ist in English, der andere in Deutsch

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:57:46.860

问题是 div ".innerGameInfo .texts" 具有 clear:both 应用于它，并且您正在调整大小的列（.scrollbox）是浮动的，因此当您调整它的大小时，.texts 元素将出现在它的下方（由于明确：两者）。我建议从 .texts 中删除 clear:both，并在其上方的 div 上设置一个高度（或使用 clearfix）以防止 .texts 重叠。

# wordpress - 联系表格功能

> ID：13014023
> 
> 赞同：0
> 
> 时间：2012-10-22T14:51:50.870
> 
> 标签：wordpress, contact-form

我正在尝试创建一个表单（通过 wordpress 联系表单 7），当您输入详细信息（姓名和电子邮件_并单击一个按钮）时，它会带您进入另一个表单，但会记住原始表单上的详细信息。

这方面的一个例子是这里[http://incho.net/get-a-quote/](http://inchoo.net/get-a-quote/)

这是如何完成的，是否可以使用我正在使用的插件。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:39:02.800

on_sent_ok: "位置 = 'http://example.com/';"

在编辑表单页面底部的其他设置中，您可以进入下一页，但传递表单值将成为联系表单 7 的问题。

尝试使用 cforms，我认为它可以满足您的需求

# php - ExpressionEngine：单条目模板

> ID：13014024
> 
> 赞同：5
> 
> 时间：2012-10-22T14:51:52.727
> 
> 标签：php, codeigniter, expressionengine

我创建了一个名为信用卡的频道。因此，我创建了一个名为 credit-cards 的模板组，其中包含一个循环遍历所有信用卡并输出它们的索引。这方面工作正常，这是我在 credit-cards.group 文件夹中的 index.html 文件的代码：

```
 {exp:channel:categories category_group="1" style="linear" dynamic="no"}
                    <div class="card-list tab" id="{category_url_title}">
                        <h2 class="category-title">{category_name} Credit Cards</h2>
                        <div class="cards">
                            {exp:channel:entries channel="credit_cards" category="{category_id}" dynamic="no"}
                                <article>
                                    <h4><a href="{url_title_path='credit-cards'}">{title}</a><span class="web-exclusive">MBNA Website Exclusive</span></h4>
                                    <ul>
                                        <li class="col-img">
                                            <a href="{url_title_path='credit-cards'}"><img width="116" height="84" alt="MBNA Platinum Credit Card" src="../lib-ui/img/cards/core/core_116x84/mbna_platinum_card_116x84.png"></a>
                                        </li>
                                        <li class="col-bt">{balance_transfer_rate}</li>
                                        <li class="col-purchases">{purchases_rate}</li>
                                        <li class="col-features">{key_features}</li>
                                        <li class="col-apply">
                                            <a rel="blank" class="btn btn-success" href="{apply_url}">
                                                Apply Now<span class="hide"> for the {title}</span>
                                            </a>
                                            <a class="cta" href="{url_title_path='credit-cards'}">
                                                Learn more<span class="hide"> about the {title}</span>
                                            </a>
                                            <label class="mbna-credit-card checkbox" for="compare_1">
                                                <span tabindex="0">
                                                    <input type="checkbox" value="mbna-credit-card" id="compare_1">
                                                </span>
                                                <span class="hide"> Add the {title} to </span>Compare
                                            </label>
                                        </li>
                                    </ul>
                                    <p class="rep-ex">{representative_example}</p>
                                </article>  
                            {/exp:channel:entries} 
                        </div>
                    </div>
                {/exp:channel:categories} 
```

所以我的问题是这个。假设我有一张名为 Visa 信用卡的信用卡，为其生成的 url 是 /credit-cards/visa-credit-card。当我单击此链接时，虽然我只是再次获得我的索引页面。我在我的组中创建了另一个名为 single.html 的模板文件，其中包含输出一张信用卡的代码。这看起来像这样：

```
<h1>Credit Card Page</h1>
{exp:channel:entries channel="credit_cards" limit="1"}
{if no_results}
{redirect="404"}
{/if} 
```

那么如何让它使用这个模板文件而不是单个条目呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T15:24:25.640

这实际上是一个很容易解决的问题。您所要做的是，您的代码的第 5 行无法判断它是否应该限制条目信息。使用`dynamic='no'`，您已经说过“EE，您无需使用此处的 URL 来确定要限制哪些条目”

我的建议是以下代码：

```
{if segment_2 == ""}
    {exp:channel:categories category_group="1" style="linear" dynamic="no"}
        <div class="card-list tab" id="{category_url_title}">
            <h2 class="category-title">{category_name} Credit Cards</h2>
            <div class="cards">
                {exp:channel:entries channel="credit_cards" category="{category_id}" dynamic="no" disable="category_fields|member_data|pagination|trackbacks"}
                    <article>
                        <h4><a href="{url_title_path='credit-cards'}">{title}</a><span class="web-exclusive">MBNA Website Exclusive</span></h4>
                        <ul>
                            <li class="col-img">
                                <a href="{url_title_path='credit-cards'}"><img width="116" height="84" alt="MBNA Platinum Credit Card" src="../lib-ui/img/cards/core/core_116x84/mbna_platinum_card_116x84.png"></a>
                            </li>
                            <li class="col-bt">{balance_transfer_rate}</li>
                            <li class="col-purchases">{purchases_rate}</li>
                            <li class="col-features">{key_features}</li>
                            <li class="col-apply">
                                <a rel="blank" class="btn btn-success" href="{apply_url}">
                                    Apply Now<span class="hide"> for the {title}</span>
                                </a>
                                <a class="cta" href="{url_title_path='credit-cards'}">
                                    Learn more<span class="hide"> about the {title}</span>
                                </a>
                                <label class="mbna-credit-card checkbox" for="compare_1">
                                    <span tabindex="0">
                                        <input type="checkbox" value="mbna-credit-card" id="compare_1">
                                    </span>
                                    <span class="hide"> Add the {title} to </span>Compare
                                </label>
                            </li>
                        </ul>
                        <p class="rep-ex">{representative_example}</p>
                    </article>  
                {/exp:channel:entries} 
            </div>
        </div>
    {/exp:channel:categories}
{/if}
{if segment_2}
    {exp:channel:entries channel="credit_cards" limit="1" disable="category_fields|member_data|pagination|trackbacks"}
        <article>
            <h4><a href="{url_title_path='credit-cards'}">{title}</a><span class="web-exclusive">MBNA Website Exclusive</span></h4>
            <ul>
                <li class="col-img">
                    <a href="{url_title_path='credit-cards'}"><img width="116" height="84" alt="MBNA Platinum Credit Card" src="../lib-ui/img/cards/core/core_116x84/mbna_platinum_card_116x84.png"></a>
                </li>
                <li class="col-bt">{balance_transfer_rate}</li>
                <li class="col-purchases">{purchases_rate}</li>
                <li class="col-features">{key_features}</li>
                <li class="col-apply">
                    <a rel="blank" class="btn btn-success" href="{apply_url}">
                        Apply Now<span class="hide"> for the {title}</span>
                    </a>
                    <a class="cta" href="{url_title_path='credit-cards'}">
                        Learn more<span class="hide"> about the {title}</span>
                    </a>
                    <label class="mbna-credit-card checkbox" for="compare_1">
                        <span tabindex="0">
                            <input type="checkbox" value="mbna-credit-card" id="compare_1">
                        </span>
                        <span class="hide"> Add the {title} to </span>Compare
                    </label>
                </li>
            </ul>
            <p class="rep-ex">{representative_example}</p>
        </article>  
    {/exp:channel:entries} 
{/if} 
```

请注意，这不是 100% 准确的，因为我删除了您的`exp:channel:categories`标签，但这应该会根据您指定的缩短 URL 为您提供限制的结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T15:01:22.397

> 那么如何让它使用这个模板文件而不是单个条目呢？

代替：

```
{url_title_path='credit-cards'} 
```

利用

```
{title_permalink="credit-cards/single"} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-23T10:48:37.250

您可以通过两种主要方式将模板“信用卡/单”用于 VISA 信用卡类别条目。

**第一个选项**

'credit-cards/index' 模板将具有：

```
{if segment_2 != ""}
    {embed="credit-cards/single" entry_id="{entry_id}"}
{/if} 
```

'credit-cards/single' 模板将具有：

```
<h1>Credit Card Page</h1>
{exp:channel:entries channel="credit_cards" limit="1" entry_id="{embed:entry_id}"}
{if no_results}
  {redirect="404"}
{/if}
... your code ...
{/exp:channel:entries} 
```

**第二种选择**

将“credit-cards/single”重命名为“credit-cards/company”（或与 SEO 更相关的名称），并使用默认的 EE 方式。

'credit-cards/index' 模板将保持不变。

'credit-cards/company' 模板将具有：

```
<h1>Credit Card Page</h1>
{exp:channel:entries channel="credit_cards" limit="1" entry_id="{entry_id}"}
{if no_results}
  {redirect="404"}
{/if}
... your code ...
{/exp:channel:entries} 
```

在第二个选项中，网址是 site.com/credit-cards/company/visa-credit-card

我希望这会有所帮助。如果我误解了什么，请告诉我。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T15:27:45.483

您可能会在索引模板中需要这样的内容：

```
{if segment_2 != ""}
  {exp:channel:entries channel="credit_cards"}
    [single entry code...]
  {/exp:channel:entries}
{if:else}
  {exp:channel:categories category_group="1" style="linear" dynamic="no"}
    [your code for all credit cards]
  {/exp:channel:entries}      
{/if} 
```

发生的情况是 URL`/credit-cards/visa-credit-card`正在加载`credit-cards`模板组的索引模板，但最后的`visa-credit-card`URL 标题告诉 ExpressionEngine 将模板视为单个入口页面。

但是标签中的 the`dynamic="no"`是`exp:channel:entries`EE 仍在该页面上显示所有信用卡的原因。[这个关于 dynamic="off" 的免费视频](http://www.train-ee.com/courseware/free-tutorials/comments/dynamic-off-explained)可能会更好地解释它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T09:11:00.360

感谢所有伟大的建议。我最后使用了页面模块，它允许您指定要使用的模板。

# sql - 列出 MS-Access 数据库中的级联更新/删除参照完整性规则？

> ID：13014026
> 
> 赞同：1
> 
> 时间：2012-10-22T14:52:01.337
> 
> 标签：sql, vba, ms-access, ms-access-2003, referential-integrity

在 MS-Access 中，我知道参照完整性规则，例如级联更新和删除以及使用 DDL 创建它们。

但是在表已经创建之后，如何再次列出这些表呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:54:18.340

在 VBA 中，您可以使用 TableDefs 和关系集合来显示表和关系属性。您还可以使用 ADO 模式来获取信息。

特别是，您将希望引用关系的属性：

```
Name                    Value       Description
dbRelationDeleteCascade 4096        Deletions cascade
dbRelationDontEnforce   2           Relationship not enforced (no referential integrity)
dbRelationInherited     4           Relationship exists in the database containing the two linked tables
dbRelationLeft          16777216    Microsoft Access only. In Design view, display a LEFT JOIN as the default join type.
dbRelationRight         33554432    Microsoft Access only. In Design view, display a RIGHT JOIN as the default join type.
dbRelationUnique        1           One-to-one relationship
dbRelationUpdateCascade 256         Updates cascade 
```

[http://msdn.microsoft.com/en-us/library/bb225809.aspx](http://msdn.microsoft.com/en-us/library/bb225809.aspx)

```
Dim rel As Relation
Dim tdf As TableDef

For Each rel In CurrentDb.Relations
    Debug.Print rel.Attributes
Next 
```

4352 = dbRelationUpdateCascade + dbRelationDeleteCascade

# ruby-on-rails - BitNami Apache Passenger 启动服务器

> ID：13014030
> 
> 赞同：0
> 
> 时间：2012-10-22T14:52:07.317
> 
> 标签：ruby-on-rails, apache, passenger, bitnami

我尝试使用Passenger 运行Web 服务器Apache 在passenger-install-apache2-module 之后出现此错误：

```
WARNING: Apache doesn't seem to be compiled with the 'prefork' or 'worker' MPM

Passenger has only been tested on Apache with the 'prefork' and the 'worker'
MPM. Your Apache installation is compiled with the '' MPM. We recommend
you to abort this installer and to recompile Apache with either the 'prefork'
or the 'worker' MPM.

Press Ctrl-C to abort this installer (recommended).
Press Enter if you want to continue with installation anyway.

--------------------------------------------
Compiling and installing Apache 2 module...
cd /home/sergey/rubystack-1.9.3-0/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.2
/home/sergey/rubystack-1.9.3-0/ruby/bin/ruby /home/sergey/rubystack-1.9.3-0/ruby/bin/rake apache2:clean apache2 RELEASE=yes
# /home/sergey/rubystack-1.9.3-0/ruby/bin/ruby /home/sergey/rubystack-1.9.3-0/ruby/bin/rake apache2:clean apache2 RELEASE=yes
/home/sergey/rubystack-1.9.3-0/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/lib/phusion_passenger/platform_info/operating_system.rb:33: Use RbConfig instead of obsolete and deprecated Config.
rm -rf ext/common/libboost_oxt.a ext/common/libboost_oxt
rm -rf ext/common/libpassenger_common.a ext/common/libpassenger_common
rm -f agents/PassengerWatchdog agents/PassengerLoggingAgent
rm -rf ext/apache2/module_libboost_oxt.a ext/apache2/module_libboost_oxt
rm -rf ext/apache2/module_libpassenger_common.a ext/apache2/module_libpassenger_common
rm -rf ext/apache2/Configuration.o ext/apache2/Bucket.o ext/apache2/Hooks.o ext/apache2/mod_passenger.o ext/apache2/mod_passenger.so agents/PassengerHelperAgent
mkdir -p ext/apache2/module_libpassenger_common
g++ -Iext -Iext/common -Iext/libev -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -DLINUX=2 -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/module_libpassenger_common/aggregate.o -c ext/apache2/module_libpassenger_common/aggregate.cpp
rm -rf ext/apache2/module_libpassenger_common.a
ar cru ext/apache2/module_libpassenger_common.a ext/apache2/module_libpassenger_common/aggregate.o
ranlib ext/apache2/module_libpassenger_common.a
mkdir -p ext/apache2/module_libboost_oxt
g++ -Iext -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -DLINUX=2 -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/module_libboost_oxt/aggregate.o -c ext/apache2/module_libboost_oxt/aggregate.cpp
In file included from ext/boost/src/pthread/thread.cpp:27:0,
                 from ext/apache2/module_libboost_oxt/aggregate.cpp:6:
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_time(int, boost::xtime&)’:
ext/boost/src/pthread/timeconv.inl:22:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_timespec_duration(const boost::xtime&, timespec&)’:
ext/boost/src/pthread/timeconv.inl:59:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_duration(boost::xtime, int&)’:
ext/boost/src/pthread/timeconv.inl:90:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_microduration(boost::xtime, int&)’:
ext/boost/src/pthread/timeconv.inl:112:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
mkdir -p ext/apache2/module_libboost_oxt
rm -rf ext/apache2/module_libboost_oxt.a
ar cru ext/apache2/module_libboost_oxt.a ext/apache2/module_libboost_oxt/aggregate.o
ranlib ext/apache2/module_libboost_oxt.a
gcc -Iext -Iext/common -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -DLINUX=2 -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/mod_passenger.o -c ext/apache2/mod_passenger.c
g++ -Iext -Iext/common -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -DLINUX=2 -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/Configuration.o -c ext/apache2/Configuration.cpp
g++ -Iext -Iext/common -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -DLINUX=2 -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/Bucket.o -c ext/apache2/Bucket.cpp
g++ -Iext -Iext/common -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -DLINUX=2 -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/Hooks.o -c ext/apache2/Hooks.cpp
g++ -shared ext/apache2/Configuration.o ext/apache2/Bucket.o ext/apache2/Hooks.o ext/apache2/mod_passenger.o -fPIC -o ext/apache2/mod_passenger.so -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -DLINUX=2 -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS ext/apache2/module_libpassenger_common.a ext/apache2/module_libboost_oxt.a -fPIC -L/usr/lib -lapr-1 -L/usr/lib -laprutil-1 -lpthread  
mkdir -p ext/common/libpassenger_common
g++ -Iext -Iext/common -Iext/libev  -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/common/libpassenger_common/aggregate.o -c ext/common/libpassenger_common/aggregate.cpp
rm -rf ext/common/libpassenger_common.a
ar cru ext/common/libpassenger_common.a ext/common/libpassenger_common/aggregate.o
ranlib ext/common/libpassenger_common.a
mkdir -p ext/common/libboost_oxt
g++ -Iext  -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/common/libboost_oxt/aggregate.o -c ext/common/libboost_oxt/aggregate.cpp
In file included from ext/boost/src/pthread/thread.cpp:27:0,
                 from ext/common/libboost_oxt/aggregate.cpp:6:
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_time(int, boost::xtime&)’:
ext/boost/src/pthread/timeconv.inl:22:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_timespec_duration(const boost::xtime&, timespec&)’:
ext/boost/src/pthread/timeconv.inl:59:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_duration(boost::xtime, int&)’:
ext/boost/src/pthread/timeconv.inl:90:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function ‘void {anonymous}::to_microduration(boost::xtime, int&)’:
ext/boost/src/pthread/timeconv.inl:112:9: warning: variable ‘res’ set but not used [-Wunused-but-set-variable]
mkdir -p ext/common/libboost_oxt
rm -rf ext/common/libboost_oxt.a
ar cru ext/common/libboost_oxt.a ext/common/libboost_oxt/aggregate.o
ranlib ext/common/libboost_oxt.a
g++ ext/apache2/HelperAgent.cpp -o agents/apache2/PassengerHelperAgent -Iext -Iext/common -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS ext/common/libpassenger_common.a ext/common/libboost_oxt.a -lpthread -rdynamic 
g++ ext/common/Watchdog.cpp -o agents/PassengerWatchdog -Iext -Iext/common -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS ext/common/libpassenger_common.a ext/common/libboost_oxt.a -lpthread -rdynamic 
ext/common/Watchdog.cpp: In function ‘void cleanupAgentsInBackground(std::vector<AgentWatcher*>&)’:
ext/common/Watchdog.cpp:804:6: warning: variable ‘e’ set but not used [-Wunused-but-set-variable]
g++ ext/common/LoggingAgent/Main.cpp -o agents/PassengerLoggingAgent -Iext -Iext/common -Iext/libev -I/home/sergey/rubystack-1.9.3-0/common/include -DHAS_CURL_EASY_RESET  -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DHAS_SFENCE -DHAS_LFENCE -Wall -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS ext/common/libpassenger_common.a ext/common/libboost_oxt.a ext/libev/.libs/libev.a -L/home/sergey/rubystack-1.9.3-0/common/lib -lcurl -lz -lpthread -rdynamic 
In file included from ext/common/LoggingAgent/../EventedMessageServer.h:31:0,
                 from ext/common/LoggingAgent/LoggingServer.h:48,
                 from ext/common/LoggingAgent/Main.cpp:43:
ext/common/LoggingAgent/../EventedServer.h: In member function ‘void Passenger::EventedServer::freeAllClients()’:
ext/common/LoggingAgent/../EventedServer.h:145:23: warning: variable ‘end’ set but not used [-Wunused-but-set-variable]
In file included from ext/common/LoggingAgent/Main.cpp:43:0:
ext/common/LoggingAgent/LoggingServer.h: In member function ‘void Passenger::LoggingServer::LogFile::notifyChanges()’:
ext/common/LoggingAgent/LoggingServer.h:167:38: warning: variable ‘end’ set but not used [-Wunused-but-set-variable]
/tmp/ccXtITl2.o: In function `~bad_day_of_month':
/home/sergey/rubystack-1.9.3-0/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/ext/boost/date_time/gregorian/greg_day.hpp:20: undefined reference to `std::out_of_range::~out_of_range()'
/tmp/ccXtITl2.o: In function `std::list<oxt::thread_registration*, std::allocator<oxt::thread_registration*> >::_M_insert(std::_List_iterator<oxt::thread_registration*>, oxt::thread_registration* const&)':
/usr/include/c++/4.6/bits/stl_list.h:1516: undefined reference to `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)'
/tmp/ccXtITl2.o: In function `std::list<oxt::thread_registration*, std::allocator<oxt::thread_registration*> >::_M_erase(std::_List_iterator<oxt::thread_registration*>)':
/usr/include/c++/4.6/bits/stl_list.h:1532: undefined reference to `std::__detail::_List_node_base::_M_unhook()'
/tmp/ccXtITl2.o: In function `std::list<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >::_M_insert(std::_List_iterator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
/usr/include/c++/4.6/bits/stl_list.h:1516: undefined reference to `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)'
/tmp/ccXtITl2.o: In function `std::list<boost::shared_ptr<Passenger::RemoteSender::Server>, std::allocator<boost::shared_ptr<Passenger::RemoteSender::Server> > >::_M_insert(std::_List_iterator<boost::shared_ptr<Passenger::RemoteSender::Server> >, boost::shared_ptr<Passenger::RemoteSender::Server> const&)':
/usr/include/c++/4.6/bits/stl_list.h:1516: undefined reference to `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)'
/tmp/ccXtITl2.o: In function `std::list<boost::shared_ptr<Passenger::RemoteSender::Server>, std::allocator<boost::shared_ptr<Passenger::RemoteSender::Server> > >::_M_erase(std::_List_iterator<boost::shared_ptr<Passenger::RemoteSender::Server> >)':
/usr/include/c++/4.6/bits/stl_list.h:1532: undefined reference to `std::__detail::_List_node_base::_M_unhook()'
/tmp/ccXtITl2.o: In function `std::list<boost::shared_ptr<Passenger::LoggingServer::LogSink>, std::allocator<boost::shared_ptr<Passenger::LoggingServer::LogSink> > >::_M_erase(std::_List_iterator<boost::shared_ptr<Passenger::LoggingServer::LogSink> >)':
/usr/include/c++/4.6/bits/stl_list.h:1532: undefined reference to `std::__detail::_List_node_base::_M_unhook()'
/tmp/ccXtITl2.o: In function `std::list<boost::shared_ptr<Passenger::LoggingServer::LogSink>, std::allocator<boost::shared_ptr<Passenger::LoggingServer::LogSink> > >::_M_insert(std::_List_iterator<boost::shared_ptr<Passenger::LoggingServer::LogSink> >, boost::shared_ptr<Passenger::LoggingServer::LogSink> const&)':
/usr/include/c++/4.6/bits/stl_list.h:1516: undefined reference to `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)'
/tmp/ccXtITl2.o: In function `~bad_year':
/home/sergey/rubystack-1.9.3-0/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/ext/boost/date_time/gregorian/greg_year.hpp:20: undefined reference to `std::out_of_range::~out_of_range()'
/tmp/ccXtITl2.o: In function `~bad_month':
/home/sergey/rubystack-1.9.3-0/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/ext/boost/date_time/gregorian/greg_month.hpp:44: undefined reference to `std::out_of_range::~out_of_range()'
/tmp/ccXtITl2.o:(.rodata._ZTVN5boost16exception_detail10clone_implINS0_10bad_alloc_EEE[vtable for boost::exception_detail::clone_impl<boost::exception_detail::bad_alloc_>]+0x28): undefined reference to `std::bad_alloc::what() const'
/tmp/ccXtITl2.o:(.rodata._ZTVN5boost16exception_detail10bad_alloc_E[vtable for boost::exception_detail::bad_alloc_]+0x20): undefined reference to `std::bad_alloc::what() const'
ext/common/libpassenger_common.a(aggregate.o): In function `std::list<boost::shared_ptr<Passenger::CachedFileStat::Entry>, std::allocator<boost::shared_ptr<Passenger::CachedFileStat::Entry> > >::_M_erase(std::_List_iterator<boost::shared_ptr<Passenger::CachedFileStat::Entry> >)':
/usr/include/c++/4.6/bits/stl_list.h:1532: undefined reference to `std::__detail::_List_node_base::_M_unhook()'
ext/common/libpassenger_common.a(aggregate.o): In function `std::list<boost::shared_ptr<Passenger::CachedFileStat::Entry>, std::allocator<boost::shared_ptr<Passenger::CachedFileStat::Entry> > >::_M_insert(std::_List_iterator<boost::shared_ptr<Passenger::CachedFileStat::Entry> >, boost::shared_ptr<Passenger::CachedFileStat::Entry> const&)':
/usr/include/c++/4.6/bits/stl_list.h:1516: undefined reference to `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)'
ext/common/libboost_oxt.a(aggregate.o): In function `std::list<oxt::trace_point*, std::allocator<oxt::trace_point*> >::_M_insert(std::_List_iterator<oxt::trace_point*>, oxt::trace_point* const&)':
/usr/include/c++/4.6/bits/stl_list.h:1516: undefined reference to `std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)'
collect2: ld returned 1 exit status
rake aborted!
Command failed with status (1): [g++ ext/common/LoggingAgent/Main.cpp -o ag...]

Tasks: TOP => apache2 => agents/PassengerLoggingAgent
(See full trace by running task with --trace)

-------------------------------------------- 
```

好像出了点问题

请阅读我们的用户指南以获取故障排除提示：

/home/sergey/rubystack-1.9.3-0/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/doc/用户指南Apache.html

如果这没有帮助，请使用我们的支持设施：

[http://www.modrails.com/](http://www.modrails.com/)

```
We'll do our best to help you. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:46:16.150

BitNami RubyStack 已经发布了 Passenger 模块，因此没有必要添加它。

（注意：这个问题也发布在 BitNami 中，但我认为在此处也包含一个回复很方便）

# visual-studio-2010 - 拥有一个集中的 SQL 数据库

> ID：13014041
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:52:59.777
> 
> 标签：visual-studio-2010, c#-4.0, networking, database-connection, connection-string

虽然可能有几个与此类似的重复项，但没有一个能解决我的问题。

我有一个 Windows 应用程序，它目前在 Visual Studio 2010 中与 SQL Express 2008 一起运行良好。它有一个数据库文件。

我希望应用程序数据库应该驻留在网络中的一台计算机上，其余联网计算机应该与中央数据库交互，我已经在网络上的一台计算机上安装了 SQL Server 2008。我还需要做什么？我厌倦了尝试..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:04:05.093

SQL Server 可能需要在服务器和/或客户端上进行一些配置才能获得网络连接。

请参阅此站点上的另一个问题，以很好地讨论可能需要做的事情：[如何从另一台计算机连接到 SQL Server？](https://stackoverflow.com/questions/2486610/how-to-connect-to-sql-server-from-another-computer)

# sql-server - 将参数发送到存储过程 vb.net

> ID：13014044
> 
> 赞同：3
> 
> 时间：2012-10-22T14:53:19.907
> 
> 标签：sql-server, vb.net, vb.net-2010

您好，这是我在 vb.net 中使用 ms visual studio 2010 的第一个项目，我想创建一个可以将参数发送到 transact-sql 数据库中的存储过程的类，我知道如何在 vb 6 中执行此操作，但我不是确定这是否是正确的方法。

```
Imports System.Data.SqlClient

Public Class ClsLineas

Public Sub Inserta(ByVal GridLineas As DataGrid, _
                   ByVal numero As String, _
                   ByVal tipo As String, _
                   ByVal estado As String, _
                   ByVal anexo As Integer, _
                   ByVal fechaInicio As String, _
                   ByVal fechaFin As String, _
                   ByVal pcReg As String, _
                   ByVal observaciones As String, _
                   ByVal usuReg As String)

    Dim cnx As SqlConnection = New SqlConnection(ClsCon.connectionString)
    'ClsCon.connectionString is a class that contains the connection string 
    Dim cmd As SqlCommand = New SqlCommand()

    If cnx.State = ConnectionState.Closed Then cnx.Open()

    cmd.Connection = cnx
    cmd.CommandText = "SP_INSERTA_LINEA"
    cmd.CommandType = CommandType.StoredProcedure

    Dim prm As New SqlParameter

    prm.ParameterName = "@TIPO"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 30
    prm.Direction = ParameterDirection.Input
    prm.Value = tipo
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@FECHA_INICIO"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 30
    prm.Direction = ParameterDirection.Input
    prm.Value = fechaInicio
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@FECHA_FIN"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 30
    prm.Direction = ParameterDirection.Input
    prm.Value = fechaFin
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@ESTADO"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 30
    prm.Direction = ParameterDirection.Input
    prm.Value = estado
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@NUMERO"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 15
    prm.Direction = ParameterDirection.Input
    prm.Value = numero
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@ANEXO"
    prm.SqlDbType = SqlDbType.Int
    prm.Direction = ParameterDirection.Input
    prm.Value = anexo
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@PC_REG"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 50
    prm.Direction = ParameterDirection.Input
    prm.Value = pcReg
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@USU_REG"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 50
    prm.Direction = ParameterDirection.Input
    prm.Value = usuReg
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@OBSERVACIONES"
    prm.SqlDbType = SqlDbType.NVarChar
    prm.Size = 1000
    prm.Direction = ParameterDirection.Input
    prm.Value = observaciones
    cmd.Parameters.Add(prm)

    prm.ParameterName = "@ID"
    prm.SqlDbType = SqlDbType.Int
    prm.Direction = ParameterDirection.Output
    cmd.Parameters.Add(prm)

    Dim adp As SqlDataAdapter = New SqlDataAdapter(cmd)

    Dim DataSet As DataSet = New DataSet("Lineas")

    adp.Fill(DataSet)
    GridLineas.DataSource = DataSet.Tables(0)

End Sub
End class 
```

我的一些疑问是：

每次调用我的类的方法时，我真的需要打开数据库吗？

真的需要 sqlAdapter 和 Dataset 吗？在 vb 6 中，您可以在附加参数之后执行“命令执行 inserta”之类的操作，然后您就完成了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T14:59:52.893

如果您只是在读取数据，请查看 SqlDataReader：

```
Dim reader As SqlDataReader
reader = cmd.ExecuteReader()
While reader.Read
    //Do stuff with reader
End While 
```

如果您正在执行更新或插入，则可以使用 SqlCommand 类的 ExecuteNonQuery() 方法。

SqlCommand 有一个添加参数的简写：

```
cmd.Parameters.AddWithValue("@MyParamName", myParamValue) 
```

您可能会觉得这很有用。

是的，每次需要与数据库交互时，您都应该打开和关闭数据库连接。阅读 Using 声明，这将帮助你很好地、整洁地完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:05:30.737

您不需要为每个调用单独的数据库连接，您可以打开它一次并将其发送到使用它的每个方法，然后关闭它。

但是，关闭或处置您使用的连接和命令很重要。如果你不这样做，连接将保持打开一段时间，直到数据库本身将其终止。如果您留下足够多的连接挂起，您将耗尽资源。

仅当存储过程返回结果并且仅当您希望该结果为对象时才需要A`SqlDataAdapter`和 a 。您可以使用该方法运行不返回任何结果的存储过程。如果您不想使用 a ，也可以在 a 中获得结果并从中读取数据。`DataSet``DataSet``SqlCommand.ExecuteNoQuery``SqlDataReader``DataSet`

注意：您必须`SqlParameter`为每个参数创建一个。现在您创建一个参数并一遍又一遍地更改它，因此参数集合最终将有十个对同一参数的引用。

# sql - MS Access 查询以显示最新的活动部件号

> ID：13014046
> 
> 赞同：1
> 
> 时间：2012-10-22T14:53:32.507
> 
> 标签：sql, ms-access

我在 MS Access 中有以下表“已替换”。

```
ID  PartNumber  ReplacedNumber  Status
4   b                       Active
5   c           b           Replaced
6   d           b           Replaced
7   e           c           Replaced
8   h           d           Replaced
9   104308          408077-0102 Replaced
10  310224          408077-0102 Replaced
11  0R5888          408077-0102 Replaced
12  4N6515          408077-0102 Replaced
13  4N6860          408077-0102 Replaced
14  408077-0102 408077-5102 Replaced
15  408077-5102 408077-5102S    Replaced
16  408077-5102S                Active 
```

查询要求

任何这些数字（104308、310224、0R5888、4N6515、4N6860、408077-0102、408077-5102、408077-5102S）的最终答案应该是 408077-5102S，因为这个数字已经取代了所有其他数字。因此，如果我的查询有一个条件，[请输入零件编号以查找最新编号]，则结果编号应为 408077-5102S。因为，它是唯一的活跃号码，并取代了所有其他号码。

同样，这些数字（b、c、d、e、h）中的任何一个的最终答案都应该是 b，因为这个数字已经取代了所有其他数字。因此，如果我的查询有一个条件，[请输入零件编号以查找最新编号]，则结果编号应为 b。因为，它是唯一的活跃号码，并取代了所有其他号码。

有任何想法吗？我还查看了[在 SQL (Microsoft Access) 中替换值，](https://stackoverflow.com/questions/12972219/replacing-values-in-sql-microsoft-access)但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:20:25.993

我认为[在 SQL (Microsoft Access) 中替换值中](https://stackoverflow.com/questions/12972219/replacing-values-in-sql-microsoft-access)的函数 searchReplaced正是您所需要的，为什么您说它没有帮助？

```
Sub Test()
  Dim partToSearch, partReplace

  partToSearch = InputBox( "Part to Search? ")
  partReplace = searchReplaced( partToSearch )

  If partToSearch = partReplace Then
    MsgBox "Part " & partToSearch & " Active"
  Else
    MsgBox "Part " & partToSearch & " Replaced by " & partReplace
  End If
End Sub 
```

状态列是否已经存在，或者您是否必须填充它？

# python - Win7/Python3.3：PyLint 无法加载其插件

> ID：13014051
> 
> 赞同：3
> 
> 时间：2012-10-22T14:53:43.557
> 
> 标签：python, python-3.x, pylint

晚上好！我已经在 python 3.3 上安装了 pylint 并遇到了以下问题：在初始化步骤 pylint 无法加载插件模块（来自 package `pylint.checkers`）。感谢调试，我发现问题出在命令中

```
module = __import__(basename, globals(), globals(), None) 
```

这是从包中执行`__init__.py`的。是这个包内的模块（文件）的正确名称，但没有扩展名（我已经检查过了）。但是引发了 ImportError 异常。我没有进入功能，所以我不知道异常的确切原因是什么。有什么办法可以查出是新版python的bug，pylint和新版python不兼容还是我的错（可能是配置python或安装pylint）？我的操作系统是 Windows 7。`checkers``basename``__import__`

PS对不起我的英语不好。这不是我的母语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:25:11.837

从 0.26 开始，Pylint 不支持 Python 3.3。Logilab 主要适用于 Python 2.x，因此我们非常感谢您对最新 3.x 版本的帮助。

您应该通过 python-projects@lists.logilab.org 邮件列表联系团队来讨论这个问题。

# linux - Sed 命令：如果存在则如何替换，否则只插入？

> ID：13014055
> 
> 赞同：21
> 
> 时间：2012-10-22T14:53:53.207
> 
> 标签：linux, sed

我需要编辑文件中的几行，以便如果一行以 (av 或 avpgw) 开头，则将其替换为新文本，否则只需在开头插入新文本。

如何使用 sed 做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T15:02:45.897

你可以这样做：

```
sed -e 's/^avpgw/new text/' -e t -e 's/^av/new text/' -e t -e 's/^/new text/' file 
```

这将模式替换为`new text`(s///) 并跳转到末尾 (t)。否则它会尝试下一个模式。另请参见[sed 命令摘要](https://www.gnu.org/software/sed/manual/sed.html#sed-commands-summary)。

您还可以使用以下命令分隔命令`;`：

```
sed 's/^avpgw/new text/; t; s/^av/new text/; t; s/^/new text/' file 
```

或将命令放在 sed 命令文件中：

```
s/^avpgw/new text/
t
s/^av/new text/
t
s/^/new text/ 
```

并这样称呼它：

```
sed -f commandfile file 
```

如果要忽略大小写，请在替换命令的末尾附加一个 i，如`s/^av/new text/i`. 另一种方法是用字符集拼出来`s/^[aA][vV]/new text/`。但这并不`sed`具体，为此您可以搜索一般的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:10:24.153

这可能对您有用（GNU sed）：

```
sed -r 's/^av(pgw)?.*/replacement/;t;s/^/replacement /' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-18T20:18:25.210

我的回答只是对[上述](https://stackoverflow.com/a/13014199/12854372)[Olaf](https://stackoverflow.com/users/1741542/olaf-dietsche)的出色解决方案的一个小小的澄清。

如果您使用的是 OSX（对我来说，使用 Catalina，它使用 2005 非 GNU 版本`sed`），并且您尝试使用他更简洁的基于分号的解决方案（在下面重复，对 1/2/3 的微小修改结束）：

```
sed 's/^avpgw/new text 1/; t; s/^av/new text 2/; t; s/^/new text 3/' file 
```

`t`...由于将命令与*分号*[ `;`] 结合使用（它们本身与命令的其余部分由常规*空格*分隔） ，您可能会收到类似于以下的错误：

```
sed: 1: "s/^avpgw/new text 1/; t ...": undefined label '; s/^av/new text 2/; t; s/^/new text 3/' 
```

这个问题和解决方案在：[MacOS 上的 sed “undefined label”中描述](https://stackoverflow.com/a/12272512/12854372)

以下是适用于 OSX 的 Olaf 的“一体化命令”解决方案的一个版本。`\n`字符是否真的比仅使用 extra 更好是有争议`-e`的。除了大声笑：**我发帖主要是因为我想分享这个问题的“根本原因”，这样使用 OS X 的人就不会因为他们的`sed`版本不能正确支持该`t`命令而发疯——这只是一个分号与换行符的问题，仅此而已！**

测试文件：

```
bash-3.2$ cat file
+ cat file
something
avpgw something else
av another thing
text 
```

原始命令，在 OS X 上执行：

```
bash-3.2$ sed 's/^avpgw/new text 1/; t; s/^av/new text 2/; t; s/^/new text 3/' file

sed: 1: "s/^avpgw/new text 1/; t ...": undefined label '; s/^av/new text 2/; t; s/^/new text 3/' 
```

使用换行符而不是分号：

```
bash-3.2$ sed $'s/^avpgw/new text 1/\nt\ns/^av/new text 2/\nt\ns/^/new text 3/' file

new text 3something
new text 1 something else
new text 2 another thing
new text 3text 
```

# silverlight - 如何将两个可观察的集合映射在一起？

> ID：13014056
> 
> 赞同：0
> 
> 时间：2012-10-22T14:53:54.050
> 
> 标签：silverlight, observablecollection, inotifycollectionchanged

我有一个有趣的问题。我有一个现有的模块，它公开和维护一个可观察的实体集合。我想要一个可观察的集合或 INotifyCollectionChanged 的​​一些实现，它与从另一个集合中添加和删除项目保持同步，但包含包装类（视图模型）而不是实体本身。

我对 CollectionChanged 事件的工作原理了解得很浅，但我想要么完全处理我不确定我知道如何做的事情，要么使用现有模式。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:57:58.677

[Continuous Linq](http://clinq.codeplex.com/)正是为此而设计的。

# c# - MSBuild - 解决方案文件错误 MSB5010: No file format header found

> ID：13014057
> 
> 赞同：3
> 
> 时间：2012-10-22T14:53:55.063
> 
> 标签：c#, msbuild

我目前正在尝试在虚拟机中构建我的 C# 代码。
该代码在我的*本地计算机*（Win7、64 位、Visual Studio 2008 Prof）上编译得很好。
在我的*虚拟机*（Win7、64 位、Visual Studio 2008 Prof）上，相同的项目文件无法构建并出现以下错误：

```
Solution file error MSB5010: No file format header found. 
```

MSBuild（本地机器）：

```
Microsoft (R)-Buildmodul, Version 3.5.30729.5420
[Microsoft .NET Framework, Version 2.0.50727.5456] 
```

MSBuild（虚拟机）：

```
Microsoft (R)-Buildmodul, Version 3.5.30729.5420
[Microsoft .NET Framework, Version 2.0.50727.5456] 
```

项目文件的开头如下所示：

```
<empty line>
Microsoft Visual Studio Solution File, Format Version 10.00
# Visual Studio 2008
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = [...] 
```

至于 MSBuild 的版本输出是否正确，我使用的是相同版本的 MSBuild。

*但是为什么在一台机器上构建失败，而它在我的本地运行良好？*oO

**更新**
我删除了导致另一个错误的空行：

```
Microsoft (R)-Buildmodul, Version 3.5.30729.5420
[Microsoft .NET Framework, Version 2.0.50727.5456]
Copyright (C) Microsoft Corporation 2007\. Alle Rechte vorbehalten.

Project.sln(44): Solution file error MSB5008: 
Error parsing the solution configuration section in solution file. 
The entry "" is invalid. 
```

**更新**
Visual Studio 的语言重要吗？在我的本地机器上，我安装了英文版，而虚拟机上安装了德文版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:24:13.750

确保行尾设置为 Windows 样式 (CRLF) 而不是 Unix 样式 (LF)。如果未正确设置，它们可能会在您从源代码管理中签出时无意中更改。

有关设置 SVN 行尾属性的更多信息，请参阅此[问题](https://stackoverflow.com/questions/857991/svn-line-ending-style)。

# sql - 选择合适的日期

> ID：13014066
> 
> 赞同：-2
> 
> 时间：2012-10-22T14:54:27.650
> 
> 标签：sql, sql-server

我有一个带有日期和其他一些信息的第一张表 T1：

```
--TABLE1
date, field1, field2, field3...
20120801 | info1    | info2    | ...
20120802 | info1    | info2    | ...
20120803 | info1    | info2    | ...
20120804 | info1    | info2    | ...
20120805 | info1    | info2    | ...
20120806 | info1    | info2    | ... 
```

我有第二个表 T2，其中包含与日期相关的信息，包括工作日和周末：

```
--TABLE2
date, businessdayofthemonth, day, field4...
20120801 | 1    | Wednesday | ...
20120802 | 2    | Thursday  | ...
20120803 | 3    | Friday    | ...
20120804 | NULL | Saturday  | ...
20120805 | NULL | Sunday    | ...
20120806 | 4    | Lundi     | ... 
```

现在我要做的是：我想为表 1 的每一行设置表 2 的日期，该日期与给定日期后的第三个工作日完全对应 <=> (isnumeric(businessdayofthemonth)=1)

例如，如果我选择 T1 的第一行：

```
dateT1   | dateT1+3 | TheDateIWant |
20120801 | 20120804 | 20120806     | info1 | info2 | ... 
```

希望我解释正确，谢谢

**编辑：** 我认为我没有正确解释这一点：我需要在给定日期后正好 3 个工作日的日期，这意味着：

为了：

```
20120803 | 3    | Friday    | ... 
```

我想要接下来的 3 个工作日日期：

```
20120808 
```

顺便说一句，为什么要投反对票？我在一个有数十亿行的数据库上工作，这只是我对 300 行请求超过 15 个表所做的工作的一部分，如果我发布，我尝试过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:07:32.240

你可以这样做：

```
select t1.date, t1.field1, t1.field2,
    (
        select top 1 date
        from Table2 t2
        where businessdayofthemonth is not null
        order by abs((t1.Date + 3) - t2.Date)
    ) as T2_Date
from Table1 t1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/88fb0/8)

请注意，这将为您提供最近、之前或之后的日期`Table1.Date + 3`。如果您只想要日期或之后的日期，您可以执行以下操作：

```
select t1.date, t1.field1, t1.field2,
    (
        select top 1 date
        from Table2 t2
        where businessdayofthemonth is not null
            and t2.Date >= (t1.Date + 3)
        order by t2.Date - (t1.Date + 3)
    ) as T2_Date
from Table1 t1 
```

# translation - 在 Zend Framework 2 上翻译面包屑（视图助手）

> ID：13014067
> 
> 赞同：1
> 
> 时间：2012-10-22T14:54:30.390
> 
> 标签：translation, zend-framework2, breadcrumbs

我在 Zend Framework 2 项目中工作，我正在使用 View Helper (Breadcrumbs) 将此导航组件注入到我的视图中。

要呈现我的面包屑，使用以下代码：

```
<?php echo $this->navigation('Navigation')
                ->breadcrumbs()
                ->setLinkLast(false)               // link last page
                ->setMaxDepth(7)                   // stop at level 7
                ->setMinDepth(0)                   // start at level 0
                ->setSeparator(' »' . PHP_EOL);    // separator with newline
?> 
```

我一直在用以下代码翻译项目的大部分内容

```
<?php echo $this->translate("Text to translate here", $textDomain); ?> 
```

因此，将相同的逻辑应用于现有代码：

```
<?php echo $this->translate($this->navigation('Navigation')
        ->breadcrumbs()
        ->setLinkLast(false)               // link last page
        ->setMaxDepth(7)                   // stop at level 7
        ->setMinDepth(0)                   // start at level 0
        ->setSeparator(' »' . PHP_EOL), "navigation");    // separator with newline
?> 
```

这是翻译面包屑的最有效和/或正确的方法吗？此处设置为“导航”的文本域是此翻译所在的位置。没有设置它默认为值“默认”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:47:25.350

你不能真的这样做，你正在将 html 传递给翻译器。只需在 viewhelper 上使用这些方法：

```
$navHelper->setTranslator($yourTranslator);
$navHelper->setTranslatorTextDomain('de_DE');
$navHelper->setTranslatorEnabled(true); // (default)
$navHelper->setInjectTranslator(true); // to pass the translator down to menu/breadcrumbs etc. (default) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T02:03:12.287

为了修复面包屑的翻译，我这样做了：将所有翻译器配置剪切/粘贴到一个新文件中：config/autoload/translator.global.php 我对整个应用程序只使用一个翻译文件，而不是按模块使用一个翻译文件。 . 但是无论如何，如果您确实有一个按模块的翻译文件，只需为您的导航选择一个；）我将 base_dir 选项修改为模块/应用程序/语言：

```
<?php
return array(
    'translator' => array(
        'locale' => 'fr_FR',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../../module/Application/language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
); 
```

我还将导航配置数组放入一个自动加载文件中：config/autoload/navigation.global.php => 我在 poedit 文件中添加了新路径，用于翻译我的导航（我唯一的导航）以进行自动检测；）

在这个文件中，我使用翻译器的工厂方法实例化了一个特定的翻译器，我只需要调用 translate() 方法:)：

```
<?php
$config = require 'translator.global.php';
$options = (array)$config['translator'];
$translator = \Zend\I18n\Translator\Translator::factory($options);

return array(
    'navigation' => array(
        'default' => array(
            array(
                'label' => $translator->translate('Home'),
                'route' => 'home',
            ),
       [...] 
```

现在一切都很好（甚至面包屑）:)

我的表单也遇到了同样的翻译问题，我发现的第一个技巧仍然很有效，而无需为每个表单创建新的翻译器：唯一的麻烦是 poedit 自动检测：

在 public/index.php 中创建一个下划线函数（zend 不使用但 poedit 识别）

```
function _($str){
    return $str;
} 
```

然后只需要像这样声明表单标签：

```
'label' => _('My Label'), 
```

poedit 检测到它并翻译标签，除了在 poedit 中对所有这些新词进行一点翻译工作之外，没有其他任何东西；）

编辑：我的 beadcrumb 部分 phtml 文件中有一个错误：没有调用翻译视图助手...（只是从 zend 教程中复制它并忘记了它...愚蠢不是吗？：D）

修复后，下划线功能也适用于表单标签和导航......甚至面包屑！我所有繁重的东西，创建一个新的翻译器在导航配置数组中调用它是没用的:)

我在beetween 中找到了这个技巧：=>[如何在 Zend Framework 2 中翻译表单标签？](https://stackoverflow.com/questions/15961628/how-to-translate-form-labels-in-zend-framework-2)（在最后一条评论中......这应该比实际的 0 投票更多；））

# .net - 如何确定执行期间来自异步 httpclient 的并发请求数？

> ID：13014072
> 
> 赞同：8
> 
> 时间：2012-10-22T14:54:54.717
> 
> 标签：.net, visual-studio-2012, .net-4.5, async-await, dotnet-httpclient

我有一个简单的控制台应用程序，如下所示：

```
 private static StringBuilder sb = new StringBuilder();
    private static HttpClient client = new HttpClient();

    private static async Task<HttpStatusCode> AccessTheWebAsync()
    {            
        HttpResponseMessage response = await client.GetAsync("http://www.google.com").ConfigureAwait(false);
        return response.StatusCode;
    }

    static void Main(string[] args)
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        List<Task> tasks = new List<Task>();
        for (int i = 0; i < 10; i++)
            tasks.Add(AccessTheWebAsync());
        Task.WaitAll(tasks.ToArray());

        foreach (Task<HttpStatusCode> t in tasks)
            sb.Append((int)t.Result).Append(Environment.NewLine);
        Console.WriteLine(sb.ToString());            
        sw.Stop();
        Console.WriteLine("Run Completed, Time elapsed: {0}", sw.Elapsed);
        Console.ReadLine();
    } 
```

在这里，我发起了 10 个异步 Web 请求，并在请求完成时收集响应代码并列出它们。

1.  **问题**：是否可以使用 VS2012 调试应用程序，以便我可以确定在执行期间任何给定点发生的并发 Web 请求的数量？

原因是我发现您可以在以下位置进行更改`App.config`：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
  <system.net>
    <connectionManagement>
      <add address = "*" maxconnection = "10" />
    </connectionManagement>
  </system.net>
</configuration> 
```

但是，我没有一个好方法来确定这是否真的有效。

1.  服务器是否设置此限制？

2.  操作系统是否设置了此限制？

3.  此应用程序配置和/或 .NET 是否设置了此限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:58:55.030

> 是否可以使用 VS2012 来调试应用程序，以便我可以确定在执行期间任何给定点发生的并发 Web 请求的数量？

是的，当然。使用[Parallel Tasks](http://www.blackwasp.co.uk/ParallelTasksWindow.aspx)和[Parallel Stacks](http://msdn.microsoft.com/en-us/library/dd554943.aspx)窗口，它们非常好。

> 1.  服务器是否设置此限制？
>     
>     
> 2.  操作系统是否设置了此限制？
>     
>     
> 3.  此应用程序配置和/或 .NET 是否设置了此限制？

该设置指定[与网络主机的最大连接数，](http://msdn.microsoft.com/en-us/library/fb6y0fyc.aspx)可以在机器或应用程序级别进行设置。`maxconnection`服务器也可以为客户端设置连接限制，但这与属性无关。

在您的示例中，实际最大连接数也可能受到线程池设置的限制。查看[此 KB 条目](http://support.microsoft.com/?id=821268)以了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:53:15.233

使用静态 int 变量并使用互锁增量/减量。 [http://msdn.microsoft.com/de-de/library/vstudio/dd78zt0c.aspx](http://msdn.microsoft.com/de-de/library/vstudio/dd78zt0c.aspx)

# php - 计算没有`echo file_get_contents($file)`的下载？

> ID：13014078
> 
> 赞同：0
> 
> 时间：2012-10-22T14:55:10.200
> 
> 标签：php, apache, mod-rewrite, download

我现在在我的服务器上有直接指向文件的下载链接。我有一套相当复杂的重写规则，但它们不会影响我的要求。

我想做的是统计下载次数。我知道我可以编写一个 PHP 脚本来回显内容并使用重写规则，以便 PHP 脚本处理所有下载。

但是，有几点我很担心：

1.  由于粗心或未被注意的错误，某些危险路径（例如`/etc/passwd`，`../../index.php`）有可能不会被阻止
2.  需要`HTTP 404 Not Found`在我更喜欢让 Apache 处理它们的脚本中处理响应（和其他）（我有一个依赖于服务器重定向变量的错误处理程序脚本）
3.  HTTP 标头（如内容类型或修改时间）可能未正确设置
4.  ~~使用 PHP 脚本通常不允许`HTTP 304 Unmodified`响应，因此浏览器缓存将毫无用处，并且重新下载会消耗额外的带宽~~实际上我可以检查一下，但需要更多的编码和调试。
5.  PHP 脚本比直接由 Apache 直接加载文件使用更多的处理能力

所以，我想找到一些其他的方法来执行统计。例如，当某些文件（在某些目录中）被请求和下载时，我可以让 Apache 触发脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:58:04.190

您可以解析 Apache 日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:02:36.997

[Apache 的 mod_lua](http://httpd.apache.org/docs/trunk/mod/mod_lua.html)可能是将自己的代码挂钩到 apache 内部的请求处理中的最通用、灵活和有效的方法。通常，您会为提供最直接方法的任务选择该语言。lua 在与 c/c++ 交互方面比其他任何东西都要好得多。

但是当然还有其他策略，所以要有创意。我立刻想到两件事：

*   如果您在某种类似 unix 的系统下，对 PAM 的一些创造性使用：配置某种虚拟身份验证要求并设置 PAM 进行处理。在 PAM 配置中，您可以为所欲为。优势：您收到请求，并且可以过滤自己要计算的内容和不可计算的内容。您必须确保 PAM 响应不会创建有效会话，以便您真正获得客户端完成的每个请求的滴答声，而不仅仅是第一个请求。

*   还有其他允许进行请求处理的 apache 模块。看看[取证模块](http://httpd.apache.org/docs/2.2/mod/mod_log_forensic.html)或[外部过滤器模块](http://httpd.apache.org/docs/2.2/mod/mod_ext_filter.html)。两者都允许将外部逻辑挂接到请求处理中。您将需要为此配置基于 cli 的 php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:25:40.913

这可能不是您正在寻找的东西，但本着使用正确工具完成工作的精神，您可以轻松使用 Google Analytics（或任何其他分析包）来跟踪它。看看[https://support.google.com/analytics/bin/answer.py?hl=en-GB&answer=1136922](https://support.google.com/analytics/bin/answer.py?hl=en-GB&answer=1136922)。

编辑：

它需要能够为您的站点修改 vhost 设置，但您可以为下载创建一个单独的 apache 日志文件。假设您有一个下载文件夹来存储可供下载的文件，您可以将类似这样的内容添加到您的虚拟主机中：

```
SetEnvIf Request_URI "^/downloads/.+$" download
LogFormat "%U" download-log
CustomLog download-tracking.log download-log env=download 
```

现在，无论何时从 /downloads/ 文件夹请求某些内容，它都会记录在 download-tracking.log 文件中。

有几件事要知道：

*   您可以根据需要拥有尽可能多的 SentEnvIf 行。只要他们都设置了下载环境变量，请求就会被记录到CustomLog
*   我展示的 LogFormat 将仅记录请求的 URI，但您可以轻松自定义它以记录更多内容，而不仅仅是 URI，请参阅[http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#logformat](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#logformat)更多细节。
*   如果您提供 PDF 文件，请注意某些浏览器/插件会对 PDF 的每一页发出单独的请求，因此您在阅读日志时需要考虑到这一点。

这种方法的主要好处是它不需要任何编码，只需一个简单的配置更改，你就可以开始了。当然，缺点是您必须进行某种日志处理。这仅取决于对您来说最重要的是什么。

另一种选择是使用 PHP 脚本和[readfile](http://php.net/readfile)函数。这使得将请求记录到数据库变得更加容易，但它确实伴随着您前面提到的其他问题。

有一些方法可以将 Apache 日志通过管道传输到 MySQL，但据我所知，这可能很棘手。取决于你在做什么，这可能是值得的……但话又说回来，它可能不会。

# transactions - 到达队列的时间已过

> ID：13014079
> 
> 赞同：0
> 
> 时间：2012-10-22T14:55:14.040
> 
> 标签：transactions, msmq, messaging

我正在尝试使用 powershell 从错误队列向远程私有队列发送消息。我使用的代码如下所示：

```
$msg = $src_q.Peek()
$msg.Label = GetLabelWithoutFailedQueue($msg)
$msg.UseDeadLetterQueue = $true
$msg.UseTracing = $true
$msg.AcknowledgeType = [System.Messaging.AcknowledgeTypes]::NegativeReceive
$msg.TimeToBeReceived = [System.TimeSpan]::FromSeconds(10)
$msg.TimeToReachQueue = [System.TimeSpan]::FromSeconds(10)
$tx = new-object System.Messaging.MessageQueueTransaction
$tx.Begin()
$dest_q.Send($msg, $tx)
$tx.Commit() 
```

消息继续出现在事务性死信队列中，类别为：“到达队列的时间已过。” 任何人都知道什么会触发这样的错误？队列肯定存在-我确实设法偷看它。另外，我通过窥视从错误队列中获取消息的原因只是为了测试目的；我试过用 Receive 做同样的事情，结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:58:04.977

好的，看来您提供给 MessageQueue 构造函数的路径非常区分大小写；一个字符是大写的就足够了，并且需要小写，你会发现自己处于类似的情况。

如果有人遇到这种情况，那么正确的格式是：`FormatName:DIRECT=OS:machine_name\private$\queue_name`FormatName 必须像我在这里所做的那样采用驼峰式。

确保`machine_name`并且`queue_name`是正确的。

# java - 在界面上查找注释

> ID：13014084
> 
> 赞同：3
> 
> 时间：2012-10-22T14:55:38.590
> 
> 标签：java, reflection, annotations

我有一个带有实现 Bar 的接口 Foo。接口 Foo 有一个方法“doMe()”，带有一个方法注解@Secured。这是唯一安全的方法。

现在我编写了以下代码来遍历类并查找带有@Secured 的方法。（此方法尚未完成，我正在尝试通过第一个单元测试。）

```
 /**
   * Determine if a method is secured
     * @param method the method being checked
     * @return true if the method is secured, false otherwise
     */
    protected static boolean isSecured(Method method) {
  boolean secured = false;
  Annotation[] annotations = method.getAnnotations();
  for(Annotation annotation:annotations){
    if(Secured.class.equals(annotation.getClass())){
      secured = true;
      break;
    }
  }

  if(secured){
    return true;
  }

  return secured;
} 
```

除了 doMe() 之外的方法在 getAnnotations() 上为 Foo 和 Bar 返回 0 个成员。问题是 doMe() 还为 Foo 和 Bar 返回 0 个成员。

我正在寻找比我更了解反射的人，因为这应该不难找到。:)

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T15:11:36.797

您是否确保注释在运行时可见？您可能需要使用`@Retention(RetentionPolicy.RUNTIME)`. 默认值 ,`CLASS`不会在反射方法中返回注释。

另请参阅：[RetentionPolicy 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/RetentionPolicy.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:35:21.177

尝试使用`getAnnotation`而不是`getAnnotations`，因为`getAnotations`内部使用`getDeclaredAnnotations`.

[方法（Java 平台 SE 6）](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#getAnnotation%28java.lang.Class%29)中的更多详细信息

```
protected static boolean isSecured(Method method) {

        Secured secured = method.getAnnotation(Secured.class);

        return secured == null ? false : true;
    } 
```

# delphi - 如何在不添加相同数量代码的情况下向我的表单添加更多对象

> ID：13014091
> 
> 赞同：1
> 
> 时间：2012-10-22T14:56:02.460
> 
> 标签：delphi, delphi-7, duplication

我一直在制作一个有趣的小游戏。在游戏中，您是一艘小型宇宙飞船（图像），向物体（面板）发射激光束（形状）。此时您一次只能发射一束激光束，因为只有一束激光束（形状）并且只有一个对象（面板）可以拍摄。因此，通过编码，我想知道如何添加更多激光束和物体，尤其是激光束，因为我不想为每个激光束和每个面板重复这些过程。

这是代码。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls, jpeg;

type
  TForm1 = class(TForm)
    Panel1: TPanel;
    Timer1: TTimer;
    Timer2: TTimer;
    Button1: TButton;
    Shape1: TShape;
    Timer3: TTimer;
    Image1: TImage;
    procedure Timer2Timer(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure FormActivate(Sender: TObject);
    procedure FormMouseWheelDown(Sender: TObject; Shift: TShiftState;
      MousePos: TPoint; var Handled: Boolean);
    procedure FormMouseWheelUp(Sender: TObject; Shift: TShiftState;
      MousePos: TPoint; var Handled: Boolean);
    procedure Timer3Timer(Sender: TObject);
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
  private
    { Private declarations }
  public
   procedure StartPanelAnimation1;
   procedure DoPanelAnimationStep1;
   function  PanelAnimationComplete1: Boolean;
   procedure Startlazeranimation1;
   procedure DolazeranimationStep1;
   { Public declarations }
  end;

var
  Form1: TForm1;

implementation
 var key : char;
{$R *.dfm}

{ TForm1 }

{ TForm1 }

procedure TForm1.DoPanelAnimationStep1;
begin
Panel1.Top := Panel1.Top+1;
end;

function TForm1.PanelAnimationComplete1: Boolean;
begin
 Result := Panel1.Top=512;
end;

procedure TForm1.StartPanelAnimation1;
begin
  Panel1.Top := 0;
  Timer1.Interval := 1;
  Timer1.Enabled := True;
end;

procedure TForm1.Timer2Timer(Sender: TObject);
begin
 DoPanelAnimationStep1;
  if PanelAnimationComplete1 then
    StartPanelAnimation1;
   if (shape1.Top < panel1.Top) and (shape1.Left < panel1.Left+104) and (shape1.Left > panel1.Left)   then
   begin
    startpanelanimation1;
   sleep(10);
   end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
 button1.Hide;
  key := 'a';
  timer2.Enabled := true;
  StartPanelAnimation1; 
end;

procedure TForm1.FormActivate(Sender: TObject);
begin
 shape1.Visible := false;
 timer3.Enabled := false;
 timer2.Enabled := false;
 end;

procedure TForm1.FormMouseWheelDown(Sender: TObject; Shift: TShiftState;
  MousePos: TPoint; var Handled: Boolean);
   begin
image1.Left := image1.Left-10;
end;

 procedure TForm1.FormMouseWheelUp(Sender: TObject; Shift: TShiftState;
  MousePos: TPoint; var Handled: Boolean);
    begin
  image1.Left := image1.Left+10;
end;

procedure TForm1.DolazeranimationStep1;
begin
 shape1.Top := shape1.Top-10;
end;

 procedure TForm1.Startlazeranimation1;
 begin
 shape1.Top := image1.Top;
 shape1.Left := image1.Left+55;
 shape1.Visible := true;
  Timer3.Interval := 1;
  Timer3.Enabled := True;
end;

procedure TForm1.Timer3Timer(Sender: TObject);
var k : integer;
begin
 DolazeranimationStep1;
  if (shape1.Top < panel1.Top) and (shape1.Left < panel1.Left+104) and (shape1.Left > panel1.Left) or         (shape1.Top=clientheight) then
   begin
    timer3.Enabled := false;
    shape1.Visible := false;
    for k := 1 to 5 do
    sleep(1);
    begin
    application.ProcessMessages;
    end;
    shape1.Top := 0;
    shape1.Left := 0;
   end;
end;

procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
 shape1.Show;
 startlazeranimation1;
end;

end. 
```

（以上为旧代码）

我已经成功地完成了 Stijn Sanders 的建议。但现在如果

```
 if (Shape1.top < panel1.Top) and (shape1.Left < panel1.Left+104) and (shape1.Left > panel1.Left)   then 
```

永远不会测试为真，因为 shape1 永远不会通过 panel1 它，只有在单击时创建的形状才会通过面板。

那么是否有另一种方法来测试形状是否在 pnael 处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:01:25.450

并非所有组件都需要在设计时创建。在运行时，例如使用 TTimer 及其事件，您可以调用`TShape.Create(Self);`以获得额外的形状。将结果值的引用保存在方便的地方，例如（动态）数组，并记住设置`MyShape.Parent:=Self;`或`MyShape.Parent:=Panel1;`让系统知道何时何地显示这个新控件。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls;

const
  MaxRays=100;
  RayStep=8;

type
  TForm1 = class(TForm)
    Timer1: TTimer;
    procedure FormCreate(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
  private
    { Private declarations }
    Rays:array[0..MaxRays-1] of TShape;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  i:integer;
begin
  for i:=0 to MaxRays-1 do Rays[i]:=nil;
end;

procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
  i:integer;
begin
  i:=0;
  while (i<MaxRays) and (Rays[i]<>nil) do inc(i);
  if i<MaxRays then
   begin
    Rays[i]:=TShape.Create(Self);
    Rays[i].Shape:=stEllipse;
    Rays[i].Pen.Color:=clRed;
    Rays[i].Pen.Style:=psSolid;
    Rays[i].Brush.Color:=clYellow;
    Rays[i].Brush.Style:=bsSolid;
    Rays[i].SetBounds(X-4,Y-20,9,41);
    Rays[i].Parent:=Self;
   end;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
var
  i:integer;
begin
  for i:=0 to MaxRays-1 do
    if Rays[i]<>nil then
    begin
      Rays[i].Top:=Rays[i].Top-RayStep;
      if Rays[i].Top<0 then FreeAndNil(Rays[i]);
    end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:27:59.060

在运行时动态创建对象并在列表中跟踪它们，然后您可以在需要时遍历列表，例如：

```
unit Unit1; 

interface 

uses 
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, ExtCtrls, StdCtrls, jpeg; 

type 
  TForm1 = class(TForm) 
    PanelTimer: TTimer; 
    Button1: TButton; 
    LazerTimer: TTimer; 
    Image1: TImage; 
    procedure PanelTimerTimer(Sender: TObject); 
    procedure Button1Click(Sender: TObject); 
    procedure FormCreate(Sender: TObject); 
    procedure FormDestroy(Sender: TObject); 
    procedure FormActivate(Sender: TObject); 
    procedure FormMouseWheelDown(Sender: TObject; Shift: TShiftState; 
      MousePos: TPoint; var Handled: Boolean); 
    procedure FormMouseWheelUp(Sender: TObject; Shift: TShiftState; 
      MousePos: TPoint; var Handled: Boolean); 
    procedure LazerTimerTimer(Sender: TObject); 
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton; 
      Shift: TShiftState; X, Y: Integer); 
  private 
    { Private declarations } 
    Lazers: TList; 
    Panels: TList; 
    procedure StartPanelAnimation;
    procedure StartLazerAnimation; 
  public
    { Public declarations } 
  end; 

var 
  Form1: TForm1; 

implementation 

{$R *.dfm} 

{ TForm1 } 

procedure TForm1.StartPanelAnimation; 
var
  Panel: TPanel;
begin 
  Panel := TPanel.Create(Self);
  Panel.Parent := Self;
  Panel.Top := 0;
  // set other Panel properties as needed... 
  Panel.Visible := True; 
  Panels.Add(Panel);
  if not PanelTimer.Enabled then
  begin
    PanelTimer.Interval := 1; 
    PanelTimer.Enabled := True; 
  end;
end; 

procedure TForm1.PanelTimerTimer(Sender: TObject); 
var
  k: Integer;
  Panel: TPanel;
begin 
  for k := 0 to Panels.Count-1 do
  begin
    Panel := TPanel(Panels[k]);
    Panel.Top := Panel.Top + 1; 
    if Panel.Top = 512 then 
      Panel.Top := 0;
  end;
end; 

procedure TForm1.Button1Click(Sender: TObject); 
begin 
  StartPanelAnimation1;  
end; 

procedure TForm1.FormCreate(Sender: TObject); 
begin 
  Lazers := TList.Create;
  Panels := TList.Create;
end;

procedure TForm1.FormDestroy(Sender: TObject); 
begin 
  Lazers.Free;
  Panels.Free;
end;

procedure TForm1.FormActivate(Sender: TObject); 
begin 
  PanelTimer.Enabled := False; 
  LazerTimer.Enabled := False; 
end; 

procedure TForm1.FormMouseWheelDown(Sender: TObject; Shift: TShiftState; 
  MousePos: TPoint; var Handled: Boolean); 
begin 
  Image1.Left := Image1.Left - 10; 
end; 

procedure TForm1.FormMouseWheelUp(Sender: TObject; Shift: TShiftState; 
  MousePos: TPoint; var Handled: Boolean); 
begin 
  Image1.Left := Image1.Left + 10; 
end; 

procedure TForm1.StartLazerAnimation; 
var
  Lazer: TShape;
begin 
  Lazer := TShape.Create(Self);
  Lazer.Parent := Self;
  // set Lazer properties as needed...
  Lazer.Top := Image1.Top; 
  Lazer.Left := Image1.Left + 55; 
  Lazer.Visible := True; 
  Lazers.Add(Lazer);
  if not Lazer.Enabled then
  begin
    Lazer.Interval := 1; 
    Lazer.Enabled := True; 
  end;
end; 

procedure TForm1.LazerTimerTimer(Sender: TObject); 
var
  k, m : integer;
  Lazer: TShape;
  Panel: TPanel;
  PanelHit: Boolean; 
begin 
  k := 0;
  while k < Lazers.Count do
  begin
    Lazer := TShape(Lazers[k]);
    Lazer.Top := Lazer.Top - 10; 
    for m := 0 to Panels.Count-1 do
    begin        
      Panel := TPanel(Panels[m]);
      PanelHit := (Lazer.Top > (Panel.Top+Panel.Height)) and (Lazer.Left > Panel.Left) and (Lazer.Left < (Panel.Left+Panel.Width));
      if PanelHit then
      begin
        Panels.Remove(Panel);
        Panel.Free;
        if Panels.Count = 0 then
          PanelTimer.Enabled := False;
        Break;
      end;
    end;
    if PanelHit or (Lazer.Top = 0) then 
    begin 
      Lazers.Remove(Lazer);
      Lazer.Free;
      if Lazers.Count = 0 then
        LazerTimer.Enabled := False; 
    end else
      Inc(k); 
  end;
end; 

procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton; 
  Shift: TShiftState; X, Y: Integer); 
begin 
  StartLazerAnimation; 
end; 

end. 
```

# android - 如何强制android的actionbar（使用Actionbar-Sherlock）按钮在右边？

> ID：13014094
> 
> 赞同：2
> 
> 时间：2012-10-22T14:56:07.093
> 
> 标签：android, android-actionbar, actionbarsherlock

我在我的应用程序中使用 Actionbar-Sherlock。每件事都运行良好，但是当我将应用程序的语言环境更改为“iw”时，操作栏按钮向左移动，图标向右移动。如何将其保留在默认视图中（图标-左按钮-右）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T10:13:16.073

我通过为操作栏使用自定义视图解决了这个问题。

# ruby - 覆盖哈希

> ID：13014097
> 
> 赞同：0
> 
> 时间：2012-10-22T14:56:16.843
> 
> 标签：ruby

为什么 ruby​​ 会覆盖类实例变量`@var1`？

```
require 'pp'
class Foo
  @@def = { :key1 => "someval1", :key2 => "someval2" }
  def initialize
    @var1 = @var2 = @@def
    @var1[:key1] = "newval1"
    @var2[:key1] = "newval2"
    pp(@var1)
    pp(@var2)
  end
end
f = Foo.new 
```

输出

```
{:key1=>"newval2", :key2=>"someval2"}
{:key1=>"newval2", :key2=>"someval2"} 
```

请说出为什么会这样。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:00:52.207

发生这种情况是因为您将两个变量都设置为指向同一个哈希值。编辑一个将编辑所有 3 个变量（包括 @@def），因为它们都是相同的哈希值。

避免这种情况的最简单方法是`clone`散列。

```
@var2 = @@def.clone
@var1 = @@def.clone 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:58:27.987

因为`@var1`和`@var2`是对同一个对象的引用。

如果您希望它们保持单独的值，您需要*复制* `@@def`.

# spring-mvc - 了解 Spring mvc 生产/消费和 Jackson

> ID：13014098
> 
> 赞同：0
> 
> 时间：2012-10-22T14:56:19.517
> 
> 标签：spring-mvc, jackson, spring-annotations

我正在运行一个带有嵌入式码头的 Spring MVC 3 maven 应用程序，配置如下：

```
 <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>maven-jetty-plugin</artifactId>
        <version>6.1.14</version>
        <configuration>
            <scanIntervalSeconds>10</scanIntervalSeconds>
            <testClassesDirectory>/Users/mydownloads/Downloads/jackson-all-1.8.10.jar</testClassesDirectory>
            <useTestClasspath>true</useTestClasspath>
        </configuration>
    </plugin> 
```

如上所见，我`jackson-all-1.8.10 jar`在测试类路径中。

我有如下映射，当我从控制器生成 json 时，这些映射工作正常：

`@RequestMapping(value="/getSomething",produces="application/json",method=RequestMethod.GET)`

但是，当我尝试进行`POST`映射时，出现错误：`415: Unsupported Media Type`

我用于 POST 的注释是：

`@RequestMapping(value="/postSomething", consumes="application/json", method= RequestMethod.POST)`

我该如何解决这个问题，以便位于类路径中的杰克逊 jar 处理媒体类型？

在客户端上，当我请求 POST 数据时，请求具有以下标头：

```
Request URL:http://localhost:8080/myapp/postSomething
Request Method:POST
Status Code:415 Unsupported Media Type
**Request Headersview source**
  Accept:*/*
  Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
  Accept-Encoding:gzip,deflate,sdch
  Accept-Language:en-US,en;q=0.8
  Connection:keep-alive
  Content-Length:23
  Content-Type:application/x-www-form-urlencoded
  Cookie:JSESSIONID=1f0mox1qw67zl
  Host:localhost:8080
  Origin:http://localhost:8080
  Referer:http://localhost:8080/myapp/
  X-Requested-With:XMLHttpRequest 
```

我有`datatype: 'json'`jQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:10:18.863

您没有`Content-Type`正确设置请求。

正如您在发布的标题中看到的那样，`Content-Type`标题值为 `application/x-www-form-urlencoded`，这是 jquery 默认值。

`contentType: 'application/json'` 在 jquery ajax 调用中使用属性。

该`dataType`属性告诉 jquery 响应中预期的内容类型。

# less - DotLessClientOnly 与 DotLess nuget 包

> ID：13014100
> 
> 赞同：2
> 
> 时间：2012-10-22T14:56:28.270
> 
> 标签：less, dotless

我似乎在 DotLessClientOnly nuget 包上找不到任何信息。它与无点包有何不同？为什么我要在普通的无点包上使用它？我想使用 dotless 编译器将我的 less 编译成 css 作为构建任务的一部分，但是如果不使用 dotlessClientOnly 我就无法让 dotless 工作......它们都可以使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:20:19.577

Dotless 客户端仅不包含任何 ASP 服务器代码。它是针对 .NET 的客户端配置文件编译的，因此可以在非服务器应用程序中使用。

如果您希望它作为构建任务的一部分运行，您可以使用任一包中的编译器可执行文件。

# android - 安卓 ksoap2 https 连接

> ID：13014101
> 
> 赞同：2
> 
> 时间：2012-10-22T14:56:35.203
> 
> 标签：android, soap, ssl, ksoap2

所以我终于在Android上使用自签名证书管理了https连接才能工作。但现在我可能有更大的问题。我在服务器上有一个 SOAP 网络服务，我在 Internet 上找到的将 SOAP 与 Android 结合使用的唯一选项是利用 ksoap2 库。问题是，对于 https 连接，我使用的是带有自定义信任存储的 Apache HttpClient (org.apache.http.client.HttpClient)。Ksoap2 本身有类 HttpsTransportSE，但是如果我使用这个类，我会得到一个臭名昭著的错误“没有对等证书”。有什么方法可以扩展 HttpsTransportSE 并添加连接证书？

我也想到了其他一些事情：还有其他可以在 Android 上使用的 SOAP 客户端吗？实际编写自定义 SOAP 客户端的要求有多大？（据我所知，SOAP 与 XML 通信，所以做一个自定义解析器应该是一个很大的问题......或者我错过了什么？）

感谢您的任何评论/答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T04:34:34.600

如果它是自签名的，那么您可以绕过证书检查。

检查这个[https://stackoverflow.com/a/3457454/893574](https://stackoverflow.com/a/3457454/893574)
它对我有用。

# matlab - MATLAB用索引处理不同的矩阵元素？

> ID：13014103
> 
> 赞同：0
> 
> 时间：2012-10-22T14:56:58.950
> 
> 标签：matlab

如何创建一个索引矩阵来指定要处理的矩阵的哪些元素？

例如，我有一个 80 x 50 的矩阵 A。我知道 A(1:5,:) 只处理前 5 个元素，但是如果我想将 A 与另一个矩阵相乘，该矩阵也将元素更改为解决？所以我想将 B(1,:) 与 A(1:5,:) 相乘，将 B(2,:) 与 A(10:15,:) 相乘，以此类推。是否有一种聪明的方法来指定存储信息（1:5；10:15 等）的索引矩阵？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:08:03.837

是的，您当然可以使用另一个矩阵将索引定义为矩阵。下面是一个使用元胞数组存储索引列表的简单示例：

```
X =[1,2,3,4,5,6]
Idx = { [1, 2, 3], [4, 5, 6] }
Y = X( Idx{1} ) .* X( {Idx{2} )

Y = [ 4, 10, 18] 
```

# android - 使用 XML 自定义布局

> ID：13014105
> 
> 赞同：1
> 
> 时间：2012-10-22T14:57:03.880
> 
> 标签：android, android-layout

我的应用中有布局，其中包含滚动横幅（如果您查看我的 XML，它还没有完成），并且此横幅将用于其他活动。所以我想让它成为一个自定义布局，所以我不会复制粘贴 X 次。

这是我的 XML（嗯......我不确定是否一切都正确，所以对此部分的任何批评表示赞赏）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" 
    android:id="@+id/baseID">

    <RelativeLayout
        android:layout_centerInParent="true"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:id="@+id/id1"
        android:background="#ff00ff">
        <Button 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginLeft="25dp"
            android:layout_marginRight="25dp"/>
    </RelativeLayout>

    <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:layout_alignTop="@id/id1"
            android:layout_alignBottom="@id/id1"
            android:id="@+id/id2"
            android:background="#08000000"  
            android:orientation="horizontal">

            <Button
                android:id="@+id/button1"
                android:layout_width="20dp"
                android:layout_height="fill_parent"
                android:layout_weight="1"

                android:onClick="onClick"
                android:text="1" />

            <TextView 
                android:layout_height="fill_parent"
                android:layout_width="wrap_content"
                android:text="to jest moj tekst"
                android:layout_weight="16"/>

            <Button
                android:id="@+id/button2"
                android:layout_width="20dp"
                android:layout_height="fill_parent"
                android:layout_weight="1"

                android:onClick="onClick"
                android:text="1" />

    </LinearLayout>

</RelativeLayout> 
```

目前此布局仅包含横幅，但会有更多内容。

问题是：我如何将它放到外部课程中？

我知道我必须创建一个扩展RelativeLayout（在这种情况下为int）的新类。但是然后呢？如何为此类设置布局？

我也做了一些研究，但我没有找到任何简单而准确的教程。如果你知道任何 - 请张贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:21:37.527

你可以使用 <include> 像：

```
 <include layout="@layout/menu" /> 
```

您甚至可以重写包含的 xml 布局的根标记的属性，例如

```
 <include android:id="@+id/my_menu" layout="@layout/menu" /> 
```

有关更详细的说明，请参阅开发人员博客

[http://android-developers.blogspot.com.es/2009/02/android-layout-tricks-2-reusing-layouts.html](http://android-developers.blogspot.com.es/2009/02/android-layout-tricks-2-reusing-layouts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:06:48.600

you'll have to work with Fragment: [http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

Fragments enable developers to split VIEW/Controller into differents classes.

So, you will add to your xml will differents fragments and each fragment are in charge of his owns components (textview, button...).

# c++ - 指向对象的 C++ 函数指针

> ID：13014107
> 
> 赞同：0
> 
> 时间：2012-10-22T14:57:09.573
> 
> 标签：c++, pointers, function-pointers, functor, member-function-pointers

我不确定这在 C++ 中是否可行。我知道您可以将指向函数或静态成员函数的指针作为参数传递。我想要一个特定对象的函数指针，这样当函数执行时，它就在对象上完成。

```
class MyClass
{
   public:
      MyClass(int id){mId = id;}
      void execute(){cout<<mId<<endl;}
   private:
      int mId;
};

MyClass obj1(1);
MyClass obj2(2);

typedef (Executor)();
Executor ex1 = &obj1::execute();
Executor ex2 = &obj2::execute(); 
```

因此，当执行 ex1 时，应打印“1”，如果执行 ex2，则打印“2”。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T15:01:08.760

处理这个问题的工具是函数模板[`bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
auto ex1 = std::bind(&MyClass::execute, obj1); 
```

您可以将绑定存储在`function`对象中：

```
std::function<void()> ex1 = std::bind(&MyClass::execute, obj1); 
```

请注意，默认情况下`bind`将按`obj`值存储；您可以使用以下方式存储参考`ref`：

```
std::function<void()> ex1 = std::bind(&MyClass::execute, std::ref(obj1)); 
```

一个相关的工具是`mem_fn`，它包装了一个成员函数指针：

```
void (MyClass::*ex1)() = &MyClass::execute;  // raw member function pointer
ex1(obj1);

auto ex1 = std::mem_fn(&MyClass::execute);   // mem_fn wrapper
ex1(obj) 
```

但是，因为`mem_fn`不绑定实例，所以每次调用时都必须提供实例。

* * *

为了避免在绑定成员函数时写类名，可以使用宏：

```
#define BIND_MEM_FN(o,m) \
    std::bind(&std::remove_reference<decltype(o)>::type::m, (o)) 
```

宏是必要的，因为您只能从其类型和名称形成成员函数指针，并且不能将名称（非*限定 ID*）传递给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:05:51.147

这是可能的，但不是你描述的方式。您可以按照上述评论提出的方式进行操作，但更优雅和 C++ 的方式是使用函子。Functor 基本上是一个运算符`()`重载的对象。在你的情况下，它可能是这样的：

```
class MyClass
{
   public:
       MyClass(int id){mId = id;}
       void operator()(){cout<<mId<<endl;}
   private:
   int mId;
};

MyClass obj1(1);
MyClass obj2(2);

obj1();
obj2(); 
```

这样，您的对象实际上会模仿函数行为。在这里您可以阅读更多信息：[http ://en.wikipedia.org/wiki/Function_object#In_C_and_C.2B.2B](http://en.wikipedia.org/wiki/Function_object#In_C_and_C.2B.2B)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:01:10.913

成员函数指针：

```
typedef void (MyClass::*Executor)();
Executor ex1 = &MyClass::execute;
Executor ex2 = &MyClass::execute;

obj1.*ex1();
obj2.*ex2(); 
```

**编辑：**更正了评论中提到的代码。

我犯了一个错误，因为我确实很少使用（成员）函数指针。但不是因为我使用 std::bind，而是因为我使用多态性 :)

实际上，我不记得上次使用（成员）函数指针是什么时候了，除了与 OS API 接口。成员函数指针优于非成员函数指针，std::bind/std::function 可能优于成员函数指针，但多态性优于上述所有。

# sql - SQL SERVER 2005 中基于函数的索引

> ID：13014108
> 
> 赞同：4
> 
> 时间：2012-10-22T14:57:10.810
> 
> 标签：sql, sql-server-2005

请假设您有一个名为 BEER_HERE 的表，其中包含两列：

```
BEER_CODE VARCHAR(50)
BEER_DATE DATETIME 
```

请假设您还可以使用一个名为 dbo.TRUNCATE_DATE 的函数，其工作原理如下：

```
dbo.TRUNCATE_DATE ('23/12/2012 23:59:57.395') ==> 23/12/2012 00:00:00.000 
```

我想创建一个基于函数的索引：

```
(BEER_CODE, dbo.TRUNCATE_DATE(BEER_DATE)) 
```

我怎么能做到这一点？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:06:17.030

您需要添加一个计算列

```
Alter Table BEER_HERE Add Column XBEER_DATE As dbo.TRUNCATE_DATE(BEER_DATE) 
```

然后，您可以按预期对其进行索引。

但是，您的函数需要如[http://msdn.microsoft.com/en-us/library/ms189292(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms189292(v=sql.90).aspx)中定义的那样具有确定性和精确性。您的函数应该满足这些要求，但您可能需要将 With SchemaBinding 添加到函数定义中。

您也许还可以使用视图

```
Create View V_BEER_HERE As Select BEER_CODE, BEER_DATE, dbo.TRUNCATE_DATE(BEER_DATE) As XBEER_DATE From BEER_HERE
Create Unique Clustered Index PK_V_BEER_HERE On V_BEER_HERE (BEER_CODE)
Create Index I_XBEER_DATE On V_BEER_HERE (XBEER_DATE) 
```

向表中插入写入的东西，从视图中读取的东西。这取决于 BEER_CODE 作为主键。

SQL Server 不像 Oracle 那样具有基于函数的索引。

# javascript - 关于任意点的旋转矩阵

> ID：13014109
> 
> 赞同：7
> 
> 时间：2012-10-22T14:57:14.470
> 
> 标签：javascript, math

默认情况下，旋转矩阵使用原点作为旋转中心。要绕任意点旋转，您必须使用平移矩阵减去到原点的距离，进行旋转，然后再平移回来。除了这对我来说似乎效果不佳。我有以下代码（假设我的对象是 100x100，中心在 50,50）：

```
t = IDENTITY;
t = translate(t, -50, -50);
t = rotate(t, theta);
t = translate(t, 50, 50); 
```

不幸的是，如果我将此变换矩阵`t`应用于我的对象，则对象的位置不正确。

我已经实现了一个快速的 jsfiddle 来演示我的问题：http: [//jsfiddle.net/9M3uy/67/](http://jsfiddle.net/9M3uy/67/)

在 JSFiddle 中，红色旋转的正方形应该是旋转结束的地方（由 CSS3 内置的 transform-origin 提供），蓝色旋转的正方形是我的计算结束的地方（绿色本来是原始的非旋转正方形）。

有任何想法吗？我只是不了解翻译、旋转、翻译回机制的工作原理，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:18:46.467

您的代码中有两个问题：

1.  矩阵乘法的执行顺序与您可能想要的相反。看起来您打算`rotate(t, theta)`返回一个`t`在旋转后应用的矩阵，但实际上恰恰相反 - 旋转将在 之前应用`t`。您需要颠倒对`matrixMultiply`in`rotate`和的调用中的参数顺序`translate`。

2.  CSS`matrix`函数的参数顺序错误。应该是`a11, a21, a12, a22, a13, a23`。你传入的是`a11, a12, a21, a22, a13, a23`.

这是[固定版本](http://jsfiddle.net/9M3uy/98/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:25:11.473

尝试首先为 2d 情况实现“标准” 3x3 矩阵乘法，并且仅在尝试优化掉由乘以零产生的元素之后。当索引方案太不正统时，很难看出公式是否正确。

旋转矩阵 = [c -s 0; 0; 0 0 1]; 平移矩阵 = [1 0 x; 0 1 岁；0 0 1];

我必须假设 css -translation 函数也假设 3x3 结果。

乘法和旋转都是通过将向量 (x,y,1) 乘以相应的矩阵来执行的。

编辑：摆弄了一下之后，似乎矩阵*m*应该被翻译，或者运算符可以定义为 `return MatMul([rot matrix],m) and return MatMul([trans matrix],m)`

EDIT2：现在我可以看到一些奇怪的东西：仅平移 +-50、+-50 并旋转约 10 度，角不会停留在红色方块的中间。但是无论如何都不懂css矩阵的格式。对不起...

# android - 如何从 Android 中的其他包中引用类？

> ID：13014110
> 
> 赞同：2
> 
> 时间：2012-10-22T14:57:20.903
> 
> 标签：android

我想问一下如何在Android中从我的其他包中引用其他类？

我有我的主要包裹。在此之下，它有几个子包。如何将子包下的那些类引用到主包中的主类中？

我正在做的是，在主类中，我通过 Intent 调用子包中的类。这是我迄今为止尝试过的无济于事：

```
case 0:
        Intent acorn = new Intent( "com.fps.iHealthFirst.vegetables.AcornSquash.class" );
        //Intent acorn = new Intent( Nutritional_List.this, AcornSquash.class );
        startActivity( acorn );
        break; 
```

我很难做到这一点。谢谢你的帮助。

顺便说一句，这是 logcat：

```
10-22 23:13:03.585: E/AndroidRuntime(395): FATAL EXCEPTION: main
10-22 23:13:03.585: E/AndroidRuntime(395): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.fps.iHealthFirst/com.fps.iHealthFirst.vegetables.AcornSquash}; have you declared this activity in your AndroidManifest.xml? 
```

另外，我在清单文件中对此进行了编辑：

```
 <activity android:exported="false"
        android:name=".vegetables.AcornSquashAcornSquash"
        android:label="@string/inutrition" >
        <intent-filter >
        <action android:name="com.fps.iHealthFirst.vegetables.ACORNSQUASH" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:02:52.210

这是你应该做的：

```
 import com.fps.iHealthFirst.vegetables.AcornSquash;

    Intent acorn = new Intent(this, AcornSquash.class);
    startActivity(acorn); 
```

更新：

您必须在 Manifest.xml 中声明所有活动。把事情简单化：

```
 <activity
        android:name="com.fps.iHealthFirst.vegetables.AcornSquash"
        android:label="@string/some_name" >
    </activity> 
```

最后，确保您的文件夹结构与您的包路径一致，即您的文件`AcornSquash.java`必须在`src/com/fps/iHealthFirst/vegetables/`文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:06:54.960

you can try this:

Intent acorn = new Intent(Intent.ACTION_VIEW, "com.fps.iHealthFirst.vegetables.AcornSquash" );

# javascript - 从包含日期值的现有数组创建新数组

> ID：13014111
> 
> 赞同：0
> 
> 时间：2012-10-22T14:57:22.887
> 
> 标签：javascript

我有一个带有附加日期的值的数组。

```
-x[0].value = 5,    x[0].time = "Mon 24 April 2012"
-x[1].value = 12,   x[1].time = "Mon 24 April 2012"
-x[2].value = 11,   x[2].time = "Mon 23 April 2012"
-x[3].value = 2,    x[3].time = "Mon 20 April 2012"
-x[4].value = 11,   x[4].time = "Mon 20 April 2012"
-x[5].value = 7,    x[5].time = "Mon 20 April 2012"
-x[6].value = 7,    x[6].time = "Mon 20 April 2012" 
```

如何根据该数组中的相似日期创建许多数组。例如，我想要的一天结束。

data1 数组将包含：

```
-x[0].value = 5,    x[0].time = "Mon 24 April 2012"
-x[1].value = 12,   x[1].time = "Mon 24 April 2012" 
```

data2 数组将包含：

```
-x[2].value = 11,   x[2].time = "Mon 23 April 2012" 
```

data3 数组将包含：

```
-x[3].value = 2,    x[3].time = "Mon 20 April 2012"
-x[4].value = 11,   x[4].time = "Mon 20 April 2012"
-x[5].value = 7,    x[5].time = "Mon 20 April 2012"
-x[6].value = 7,    x[6].time = "Mon 20 April 2012" 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:07:38.153

如果我对您的理解正确，我可能会循环维护一个由`time`值键入的临时映射，并在最后进行排序：

```
var index;
var data;
var rentry;
var entry;
var map;

data = [];
map = {};
for (index = 0; index < x.length; ++index) { // Or forEach on ES5 systems
    entry = x[index];
    rentry = map[entry.time];
    if (!rentry) {
        rentry = map[entry.time] = [];
        data.push(rentry);
        rentry.time = entry.time;
    }
    rentry.push(entry);
}
map = undefined;
data.sort(function(a, b) {
    if (a.time < b.time) {
        return -1;
    }
    if (a.time > b.time) {
       return 1;
    }
    return 0;
}); 
```

现在有一个具有最低值、下一个最高值等`data[0]`的条目数组。`time``data[1]``time`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:08:41.737

这种方法怎么样：

```
var arrs = {};
for (var i = 0; i < data.length; i++) {
    if (!arrs[data[i].time]) arrs[data[i].time] = [];
    arrs[data[i].time].push(data[i])
} 
```

所以对于测试数据：

```
var data = [
    {value: 5, time: 'Mon 24 April 2012'},
    {value: 12, time: 'Mon 24 April 2012'},
    {value: 11, time: 'Mon 23 April 2012'},
    {value: 2, time: 'Mon 20 April 2012'},
    {value: 11, time: 'Mon 20 April 2012'},
    {value: 7, time: 'Mon 20 April 2012'},
    {value: 7, time: 'Mon 20 April 2012'},
]; 
```

它将创建下一个结构的对象（不是数组）：

```
arrs = {
    "Mon 24 April 2012": [
        {"value": 5, "time": "Mon 24 April 2012"},
        {"value": 12, "time": "Mon 24 April 2012"}
    ],
    "Mon 23 April 2012": [
        {"value": 11, "time": "Mon 23 April 2012"}
    ],
    "Mon 20 April 2012": [
        {"value": 2, "time": "Mon 20 April 2012"},
        {"value": 11, "time": "Mon 20 April 2012"},
        {"value": 7, "time": "Mon 20 April 2012"},
        {"value": 7, "time": "Mon 20 April 2012"}
    ]
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:11:52.897

这将为您提供一个数组数组。

```
var dataGroups = data.sort(function(a, b) {
    return a.time.localeCompare(b.time);
}).reduce(function(result, obj) {
    if (result.length && obj.time === result[0][0].time)
        result[0].push(obj);
    else
        result.unshift([obj]);
    return result;
}, []); 
```

我假设您实际上并不需要为每个数组单独递增标识符，因为这通常不是很有用。

[http://jsfiddle.net/w6qE9/](http://jsfiddle.net/w6qE9/)

结果：

```
[
    [
        {
            "value": 5,
            "time": "Mon 24 April 2012"
        },
        {
            "value": 12,
            "time": "Mon 24 April 2012"
        }
    ],
    [
        {
            "value": 11,
            "time": "Mon 23 April 2012"
        }
    ],
    [
        {
            "value": 2,
            "time": "Mon 20 April 2012"
        },
        {
            "value": 11,
            "time": "Mon 20 April 2012"
        },
        {
            "value": 7,
            "time": "Mon 20 April 2012"
        },
        {
            "value": 7,
            "time": "Mon 20 April 2012"
        }
    ]
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:08:03.140

从你的问题中不清楚你到底想要达到什么样的结果，但这里有一个函数，它会给你一个数组数组，每个时间值一个数组：

```
var map = {}, i, time, temp, results;
for (i = 0; i < x.length; i++) {
    time = x[i].time;
    if (time in map) {
        // add this item to the array we already have for this time
        map[time].push(x[i]);
    } else {
        // create a new array for this time and put it in the map
        temp = [];
        temp.push(x[i]);
        map[time] = temp;
        results.push(temp);
    }
}

// here the variable results is an array of arrays, one for each time value 
```

# objective-c - How to make UIView like UILabel to scretch and shrink depending on the amount of texts or content in it?

> ID：13014112
> 
> 赞同：0
> 
> 时间：2012-10-22T14:57:23.857
> 
> 标签：objective-c, cocoa-touch, uiview, uilabel

If we put too much text, `UILabel` would shrink the texts.

Sometimes we put 4 lines in a text. Sometimes there are 20 lines in a text. Sometimes there are none.

Also text may be short or long.

How to make `UILabel` to fit the amount of that texts?

Also how to to make `UIView` that encompass that `UILabel` to also fit the larger or smaller `UILabel`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:02:21.987

Use the [UIKit Additions to NSString](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html) to determine the size of a text with a given font.

```
NSString *myLongText = @"......" // some long text.
UIFont *font = [UIFont systemFontOfSize:12];
CGSize size = [myLongText sizeWithFont:font 
                              forWidth:maxWidth
                         lineBreakMode:NSLineBreakByWordWrapping];
myLabel.frame = (CGRect){myLabel.frame.origin, size}; 
```

# java - Java TimerTask 应该等待阻塞队列

> ID：13014115
> 
> 赞同：0
> 
> 时间：2012-10-22T14:57:33.940
> 
> 标签：java, multithreading, timertask

我有以下设计：

有一个扩展的任务，`TimerTask`它计划每分钟运行一次。此任务将尝试从中央队列（作为单个消费者）获取项目并将其表示写入文件。

此外，还有多个生产者不时将项目放入中央队列。

我感兴趣的是，每次执行任务时（`run() method executed`），如果有项目，它将从队列中提取**所有**项目，如果没有项目则什么也不做。

如果队列已满，生产者应该在队列上休眠。

我对这个问题的解决方案是：

创建扩展 TimerTask 的 ExtractTask。ExtractTask 将包含一个 BlockingQueue。每个生产者都将通过执行 getQueue() 方法接收对队列实例的引用。生产者将执行 BlockingQueue.put() 方法。消费者将在 run() 中执行 BlockingQueue.poll() 方法。

你能推荐一个更好的设计吗？我的设计是否包含任何有问题的场景案例？此设计可能遇到的任何同步问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:09:27.643

我会：

*   将队列与设计中的任务分开，
*   注入队列而不是进行查找，
*   使用 SchedulerService 而不是 TimerTask

除此之外，你已经得到它。

如果您愿意冒险依赖 Spring，您应该研究[Spring Integration](http://www.springsource.org/spring-integration)。您描述的所有组件都在那里。你也可以使用许多其他框架来解决这个问题，比如 Camel 或 Akka；我的主要观点是，如果您不是绝对必须自己维护此代码，则不要自己维护。

免责声明：我[对 Spring 集成有些偏见](http://www.manning.com/fisher/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:07:32.613

设计看起来不错。这里没有太多细节，所以很难确定。我建议将所有依赖项注入计时器任务。

此外，您可能无需太多自定义代码就可以在 Apache Camel 中实现这一目标。见[https://camel.apache.org/timer.html](https://camel.apache.org/timer.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:20:43.423

既然你问过设计，我建议几件事：

*   我个人会通过 Timer Task 获得 Executor 服务。看看[这里](https://stackoverflow.com/questions/409932/java-timer-vs-executorservice)。使用 executor 确保您可以在未来需求*发生变化*时在单独的线程中执行任务。
*   尝试将您的队列与任务对象分开。
*   通常在代码中使用 DI 以便其可测试。
*   我会让生产者在他们的构造函数中接收队列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T16:18:38.370

根据您的设计，我可以在下面想到类似的内容。ConsumerTask 可以使用泛型，但我很难弄清楚如何对 Producer 线程做同样的事情。生产者和消费者都对生产/消费的物品数量有限制。从 TimerTask 逻辑中，取消 TimerTask 本身的 run() 方法中的计时器以使其停止是必不可少的。在这种情况下，只能使用 POISON PILL 方法来关闭。如果您使用 Executors.newSingleThreadExecutor() 或 scheduleThreadPoolExecutor()，则可以使用 shutdown() 和 shutdownNow() 方法来停止生产者或消费者。虽然 TimerTask 是检查 ConcurrentQueue 工作的一个很好的例子，但它不会在生产系统中使用。

**编辑** 向生产者线程添加通用功能。构造函数现在采用一个模板类，该类实现将项目添加到队列的方法。我已经定义了一个抽象类 AddItem，其中包含和 addItem() 方法，只要生产者想要将项目添加到队列中，就会调用该方法。

```
import java.util.Date;
import java.util.Random;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.ConcurrentLinkedQueue;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.atomic.AtomicLong;

public class ConsumerTask<T> extends TimerTask {
    Timer timer;
    ConcurrentLinkedQueue<T> itemQueue;
    AtomicLong count = new AtomicLong(0);
    final long limit;

    public ConsumerTask(ConcurrentLinkedQueue<T> itemQ, long lim, int seconds) {
        limit = lim;
        timer = new Timer();
        timer.scheduleAtFixedRate(this, new Date(), seconds * 1000);
        itemQueue = itemQ;
    }

    public void run() {
        T item = itemQueue.peek();
        if (item != null) {
            if (count.incrementAndGet() <= limit) {
                System.out.println("Extracting Item : " + itemQueue.poll());
            } else {
                System.out
                        .println("Consumed : " + (count.get() - 1) + " items");
                timer.cancel();
            }

        }
    }

    public static void main(String args[]) throws InterruptedException {
        ConcurrentLinkedQueue<Integer> itemQ = new ConcurrentLinkedQueue<Integer>();
        ConsumerTask<Integer> ct = new ConsumerTask<Integer>(itemQ, 10, 1);

        new Thread(new Producer<Integer>(itemQ, new IntegerAddItem(itemQ), 20))
                .start();
        new Thread(ct).start();

    }
}

abstract class AddItem<T> {
    ConcurrentLinkedQueue<T> itemQ;
    T t;

    public AddItem(ConcurrentLinkedQueue<T> itemQ) {
        this.itemQ = itemQ;
    }

    abstract boolean addItem();

    public boolean addItem(T t) {
        return itemQ.add(t);
    }
}

class IntegerAddItem extends AddItem<Integer> {
    public IntegerAddItem(ConcurrentLinkedQueue<Integer> itemQ) {
        super(itemQ);
    }

    AtomicInteger item = new AtomicInteger(0);

    @Override
    boolean addItem() {
        return addItem(item.incrementAndGet());
    }

}

class Producer<T> implements Runnable {
    private final ConcurrentLinkedQueue<T> itemQueue;
    AtomicInteger item = new AtomicInteger(0);
    AtomicLong count = new AtomicLong(0);
    AddItem<T> addMethod;
    final long limit;

    public Producer(ConcurrentLinkedQueue<T> itemQ, AddItem<T> addMethod,
            long limit) {
        itemQueue = itemQ;
        this.limit = limit;
        this.addMethod = addMethod;
    }

    public void run() {
        while (count.getAndIncrement() < limit) {
            addMethod.addItem();
            try {
                Thread.sleep(new Random().nextInt(5000));
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                Thread.currentThread().interrupt();
            }

        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T15:17:36.550

您说消费者将在执行计时器时提取**所有项目。**

您应该注意从队列中提取所有项目的操作不是阻塞操作，它是`poll()`阻塞方法调用的重复，这意味着在提取项目时生产者将能够将项目添加到队列中。

# ruby-on-rails - 如何使用 Rails 3 中的范围通过关联计算唯一记录

> ID：13014122
> 
> 赞同：3
> 
> 时间：2012-10-22T14:58:12.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我写这个是为了计算唯一用户的回复（对帖子）的数量：

```
p = Post.find 1
r = p.responses.count(:user_id, distinct: true) 
```

我尝试将其转换为范围，但会引发错误：`undefined method 'default_scoped?' for 30:Fixnum`

```
class Response < ActiveRecord::Base
  belongs_to :author, class_name: 'User', foreign_key: 'user_id'
  belongs_to :post

  scope :by_unique_users, joins(:post).count(:user_id, distinct: true)
end

class Post < ActiveRecord::Base
  belongs_to :user
  has_many :responses
end

class User < ActiveRecord::Base
  has_many :posts
  has_many :responses
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:31:17.230

来自[http://guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)：

> 所有作用域方法都将返回一个 ActiveRecord::Relation 对象，该对象将允许在其上调用更多方法（例如其他作用域）。

换句话说，返回的结果集需要与其他 Active Record 方法调用链接；计算不是可链接的，因此您会得到错误。话虽如此，如果您绝对想使用范围，我们需要使其可链接：

```
class Response < ActiveRecord::Base
  scope :unique_responses_for_post, lambda {|post_id| where("post_id = ?", post_id).select(:user_id).uniq }
end 
```

您可以根据需要更改名称，我根据它的作用命名它。定义了新范围后，您可以执行以下操作：

```
p = Post.find 1
r = Responses.unique_responses_for_post(p.id).count() 
```

* * *

**或者**

IMO，这个问题的一个更优雅的解决方案是在你的`Post`模型中简单地定义一个实例方法：

```
def distinct_response_count
  responses.count(:user_id, :distinct => true)
end 
```

# c++ - Cocos2d-x - CCDirector::sharedDirector()->getWinSize() 在 Win32 上返回完全错误的值

> ID：13014126
> 
> 赞同：0
> 
> 时间：2012-10-22T14:58:43.540
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

cocos2d-x遇到了麻烦，我一个人可能无法解决，所以我请求您的帮助。我想用 CCLayer 创建我自己的 CCScene - 作为我学习 cocos2d-x 的一部分。一切都很好，除了场景的大小。CCDirector::sharedDirector()->getWinSize() 报告完全搞砸了分辨率，比如**0 x 108134400** ...我不知道我做错了什么。

这是我的课

```
.h
#pragma once
#include "cocos2d.h"

class zfGameScene : public cocos2d::CCLayer
{
public:
    static cocos2d::CCScene* scene();
    virtual bool init();
    CREATE_FUNC(zfGameScene);
}; 
```

啊啊啊

```
.cpp
#include "zfGameScene.h"
#include "cocos2d.h"

using namespace cocos2d;

CCScene* zfGameScene::scene(){
CCScene * scene = NULL;
    do 
    {
     scene = CCScene::create();
        CC_BREAK_IF(! scene);

        zfGameScene *layer = zfGameScene::create();
        CC_BREAK_IF(! layer);

        scene->addChild(layer);
    } while (0);

    return scene;
}

bool zfGameScene::init(){
    bool returnValue = false;
    while(!returnValue){
        CC_BREAK_IF(!CCLayer::init());

        // This one is for loading the scene :P
        CCSize winSize = CCDirector::sharedDirector()->getWinSize();
    CCLog("[zfGameScene] Initialising with %d x %d...", winSize.width, winSize.height);

        CCSprite *background = CCSprite::spriteWithFile("background.png", CCRect(0, 0, 2048, 1536));
        this->setScale(1);
        this->setPosition(ccp(0, 0));
        this->addChild(background);

        returnValue = true;
    }

    return returnValue; 
```

}

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:14:16.497

宽度和高度是浮动的。只需像这样更改您的代码：

```
CCLog("[zfGameScene] Initialising with %f x %f...", winSize.width, winSize.height); 
```

# magento - Magento：如何对最新的“无视类别”的产品进行排序？

> ID：13014127
> 
> 赞同：1
> 
> 时间：2012-10-22T14:58:45.867
> 
> 标签：magento, sorting, categories

我已经尝试过了，它部分有效

[http://www.dconstructing.com/2011/04/07/sort-magento-catalog-by-date-added/](http://www.dconstructing.com/2011/04/07/sort-magento-catalog-by-date-added/)

但是在具有多个类别的页面上，它将类别排序为第一级，然后才对每个类别中的产品进行排序。

因此，一个类别中较早的产品出现在另一个类别中的较晚产品之前。我不想要那个。我想要一个仅按“位置”（magento 术语）排序的平面排序，而不考虑类别。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T10:04:31.153

该说明适用于我的产品分类问题。我使用了第三个[Magento 按最新产品排序的解决方案](http://magento2x.com/magento-sort-newest-products-solution/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:27:29.787

除了 Guerra 的回答，您可以在 toolbar.phtml 中使用：

```
<?php if($this->getCurrentDirection() == 'desc') : ?>
    <?php $this->addOrderToAvailableOrders('created_at','Newest') ?>
<?php else : ?>
    <?php $this->addOrderToAvailableOrders('created_at','Oldest') ?>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T09:25:01.893

第 1 步：要实现此复制文件`Toolbar.php`从`app/code/core/Mage/Catalog/Block/Product/List/Toolbar.php`. 在本地创建一个目录结构并粘贴`Toolbar.php`如下所示`app/code/local/Mage/Catalog/Block/Product/List/Toolbar.php`

第 2 步：在第 232 行附近，您应该在`setCollection()`函数中看到以下代码

```
if ($this->getCurrentOrder()) {
  $this->_collection->setOrder($this->getCurrentOrder(), $this->getCurrentDirection());
} 
```

用下面给出的新代码替换上面的代码

```
if ($this->getCurrentOrder()) {
  if(($this->getCurrentOrder())=='position'){
      $this->_collection->setOrder('entity_id','desc');
  }
  else {
   $this->_collection->setOrder($this->getCurrentOrder(),$this->getCurrentDirection());
  }
} 
```

# c# - 通过 ADO 实体公开存储过程的 WCF Web 服务返回不同的数据结果

> ID：13014128
> 
> 赞同：1
> 
> 时间：2012-10-22T14:58:54.633
> 
> 标签：c#, wpf, wcf, procedure

我有一个非常简单的存储过程，它返回 2 列、1 行数据。

```
SELECT client_id, client_code
FROM wv.client_identifiers
WHERE (client_code = @client_code) 
  AND (version = 0) 
  AND (facility_id = @facility_id) 
  AND (is_active = 1) 
  AND (client_version = 0) 
```

此表不可能有重复项。在过去 2 年中，在我们的 Web 项目中测试此过程时，它按预期工作。在 SSMS 和 Visual Studio 服务器资源管理器中运行良好。当我们将它添加到 ADO.NET 实体框架中的 WCF 服务项目时，问题就出现了。

它看起来很好，可以很好地创建函数，可以很好地创建复杂类型等。我可以从 WPF 项目中很好地调用它，但是，如果完全正确，返回的数据并不一致。

例如，我有 3 行。

```
client_id client_code 
1001       1252
1002       6655
1003       123
1004       111
1005       5522 
```

如果我通过带有参数的服务点击上述过程，它会返回错误的结果。

```
using(var context = new service.MyService())
{
   var Clients = context.GetClientIDFromClient_Code(facility_id, true, client_code)

   foreach(var client in Clients)
   {
     int ClientID = client.client_id;
   } 
```

*   如果我传入 5522 的参数值，我会得到空结果。
*   如果我传入 123 的参数值，我会得到 111 的`client_id 1004`结果`code`。
*   如果我传入 1252 的参数值，我会得到`client_id 1004`111 的结果和代码。
*   如果我传入任何以`1`开头的任何内容，然后是我得到相同结果的任何内容。
*   如果我输入任何不以 1 开头但在数据库中并且应该返回的任何内容，我都会得到空值。

不确定为什么 WCF 会导致挂断。我可以将它放入 linq to sql 类数据库文件中，它工作正常。我尝试过多种不同的调用方式，尝试只返回单个列或单个值，我已经尝试了几乎所有的方法。不确定它是否在与此类似的所有程序上都这样做，但如果我不得不猜测它会是。

提前致谢

# javascript - 元素 z-index css 属性

> ID：13014129
> 
> 赞同：0
> 
> 时间：2012-10-22T14:58:58.783
> 
> 标签：javascript, html, css, position, z-index

我有 3 个元素，两个在同一级别，一个孩子，都有固定的位置。我需要设置 z-index 属性以将父级放在底部，将同一级别的元素放在中间，将子级放在顶部。

我尝试为孩子设置更高的 z-index，但它不起作用。

```
<div class="red">
    <div class="blue"></div>
</div>
<div class="green"></div> 
```

这是[http://jsfiddle.net/udENm/21/](http://jsfiddle.net/udENm/21/)的情况（我需要`red`在底部，`green`中间和`blue`顶部，仍然保持`red`并`green`处于同一水平）。

我的 CSS 是这样的

```
.red {
    position: fixed;
    z-index: 2;
}

.green {
    position: fixed;
    z-index: 2;
}

.blue {
    position: fixed;
    z-index: 5;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:09:51.570

该`z-index`属性仅在包含元素的[堆叠上下文中有效。](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)

换句话说，给定同一个父元素中的一堆块元素，你可以很容易地控制它们的从前到后的顺序。但是，`z-index`只能在此父元素内控制从前到后的排序，而不能在全局上下文内控制。

因此，您可以随心所欲地`.blue`前后移动`.red`。您也可以随意在 z 平面中`.red`随意切换。`.green`但是，您不能将它们放在和`.green`之间`.red`，`.blue`因为它们位于不同的堆叠上下文中。

**编辑** 堆叠上下文仅适用于流中的元素。如果您使用`position:absolute`，那么您可以执行此操作。请参阅 Rick Calder 的回答

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:10:04.743

将您的定位设置为绝对并完全从父 div（红色）中删除 z-index。 [http://jsfiddle.net/calder12/udENm/32/](http://jsfiddle.net/calder12/udENm/32/)

```
.foo {
background: red;
position: absolute;
left: 50px;
top: 50px;
width: 100px;
height: 100px;
}

.bar {
background: green;
position: absolute;
left: 100px;
top: 100px;
z-index: 2;
width: 100px;
height: 100px;
}

.child {
background: blue;
position: absolute;
left: 40px;
top: 40px;
z-index: 5;
width: 50px;
height: 50px;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:11:46.880

绿色块 z-index 需要低于红色块。我使用了这个 CSS 而不是你发布的那个：

```
.foo {
    background: red;
    position: fixed;
    left: 50px;
    top: 50px;
    z-index: 2;
    width: 100px;
    height: 100px;
}

.bar {
    background: green;
    position: fixed;
    left: 100px;
    top: 100px;
    z-index: 1;
    width: 100px;
    height: 100px;
}

.child {
    background: blue;
    position: absolute;
    top:50%;
    left:50%;
    z-index: 5;
    width: 50px;
    height: 50px;
} 
```

工作正常，如您所见，绿色现在是 z-index 1，红色是 z-index 2，蓝色块具有绝对定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:10:38.910

[Z-index 在某种程度上是相对于 parent 的](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)。红色已经是 2，与它的兄弟姐妹相比，蓝色的 z-index 仅为 5，但与绿色等外部元素相比则不然。

> 每个堆叠上下文都是自包含的：在元素的内容被堆叠之后，整个元素被认为是父堆叠上下文的堆叠顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T15:14:53.390

有点像这样？

[http://jsfiddle.net/kBv7R/](http://jsfiddle.net/kBv7R/)

HTML

```
 <div class="foo">
        <div class="child"></div>
         <div class="bar"></div>
    </div> 
```

CSS

```
.foo {
    background: red;
    position: fixed;
    left: 50px;
    top: 50px;
    z-index: 2;
    width: 100px;
    height: 100px;
}

.bar {
    background: green;
    position: fixed;
    left: 100px;
    top: 100px;
    z-index: 5;
    width: 100px;
    height: 100px;
}

.child {
    background: blue;
    position: fixed;
    left: 90px;
    top: 90px;
    z-index: 6;
    width: 50px;
    height: 50px;
} 
```

​</p>

# asp.net - ASP.net 3.5 Webservice 返回大型数据集

> ID：13014130
> 
> 赞同：1
> 
> 时间：2012-10-22T14:58:59.470
> 
> 标签：asp.net, .net, json, web-services

我知道有很多类似的问题，但所有解决方案都是我不能使用或不起作用的解决方案。问题的基础是我必须进行一个返回类型化数据集的 Web 服务调用。在某些情况下，此数据集可以有 30,000 行或更多行。所以我的问题是如何让页面响应更快，并在 Web 服务仍在下载数据集时加载所有内容？

请注意，通常我永远不会返回这么多的数据，而是在服务器端进行分页，但是对此的要求确实限制了我可以做的事情。如果需要，我可以让 Web 服务返回 JSon，但我当时的问题是如何将 JSON 数据恢复为 gridview 可以用来绑定数据的格式。我知道那里有一个外部库，但也有。

遗憾的是，我在这里的限制非常淫秽，但它们就是这样，我无法真正改变它们。

TIA-斯坦利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:20:22.833

这种情况的一种常见方法是在数据返回时对其进行分页（以块的形式）。异步执行此操作（单独的线程）。您甚至可以只在两个块中执行此操作：前 1000 行，然后是其余的。它似乎对您的用户非常敏感。如果有任何方法要求用户过滤结果集，减少结果集，那将是理想的。

@Lostdreamer 是对的。使用 JQuery 进行两次 AJAX 调用。第一个调用获取前 1000 行，然后启动第二个调用（等等）。老实说，这只是模拟 HTTP 通常做的事情（限制数据包大小和加载多个块）。

# php - while循环数据不在屏幕上打印 - PHP

> ID：13014133
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:59:24.067
> 
> 标签：php

有没有人看到这个错误？我没有打印出第二个循环所期望的结果。第二个循环标题如何打印没有问题。

我正在尝试从 SQL 数据库打印数据。

```
 <?php

$con= new mysqli('localhost','root','','regional_data');
if (mysqli_connect_errno()) {exit('Connection failed: '. mysqli_connect_error());}
$result = mysqli_query($con,"SELECT * FROM newchk WHERE dist_chk='$distUsr'");

echo "<table cellpadding='2' class='tablet' cellspacing='0'>";
echo
"<tr>
<th></th>"
."<th>"."Starting Cheque No"."</th>"
."<th>"."Ending Cheque No"."</th>"
."<th>"."Total No of Cheques remaining"."</th>"
."<th>"."Cheque Type"."</th>"
."</tr>";

while ($reca = mysqli_fetch_array($result))
{
echo "<tr>";
echo "<td><input type='checkbox' ></td>";
echo "<td>".trim($reca["sbstart"])."</td>";
echo "<td>".trim($reca["sbend"])."</td>";
echo "<td>".trim($reca["totsb"])."</td>";
echo "<td>SB</td>";
echo "</tr>";
}
echo "</table>";

        echo "<table cellpadding='2' class='tablet' cellspacing='0'>";
        echo
        "<tr>
        <th></th>"
        ."<th>"."Starting Cheque No"."</th>"
        ."<th>"."Ending Cheque No"."</th>"
        ."<th>"."Total No of Cheques remaining"."</th>"
        ."<th>"."Cheque Type"."</th>"
        ."</tr>";
        while ($reca = mysqli_fetch_array($result))
        {
        echo "<tr>";
        echo "<td><input type='checkbox' ></td>";
        echo "<td>".trim($reca["gwstart"])."</td>";
        echo "<td>".trim($reca["gwend"])."</td>";
        echo "<td>".trim($reca["totgw"])."</td>";
        echo "<td>GW</td>";
        echo "</tr>";
        }
        echo "</table>";

$con->close(); 
?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:02:49.380

```
while ($reca = mysqli_fetch_array($result)) 
```

这将从结果集中获取*所有结果。*之后，结果集被耗尽，这就是循环结束的原因。之后不再从同一结果集中获取更多结果。

要么发出一个新查询，要么将数据保存到一个数组中，您可以根据需要多次循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:05:43.033

我认为您不能两次使用相同的 $result 变量。

我会做的是以下几点：

```
$result = mysqli_query($con,"SELECT * FROM newchk WHERE dist_chk='$distUsr'");
$result2 = mysqli_query($con,"SELECT * FROM newchk WHERE dist_chk='$distUsr'"); 
```

然后你的第一个 while 循环可以使用`mysqli_fetch_array($result)`，第二个可以使用`mysqli_fetch_array($result2)`.

希望这可以帮助！

# ios - 为什么 iOS 将以下内容视为 NSDictionary 而不是数组？

> ID：13014136
> 
> 赞同：2
> 
> 时间：2012-10-22T14:59:34.033
> 
> 标签：ios, nsarray, nsdictionary

```
{
 "success":true,
 "listings":
 {
   "50831582253b4acf09000000":
   {
     "id":"50831582253b4acf09000000",
     "title":"fddfds",
     "assets":[],
     "discussions":[]
   }
 },
 "displaymessage":"1 Listings Found"
} 
```

我仍在字典和数组之间挣扎。什么会使上面的数组变成一个数组？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:16:42.253

字典和数组之间有很大的区别。字典存储与您在实例化时指定的键相关的数据条目。例如：

```
NSDictionary *myDictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"object1",@"key1",@"object2",@"key2", nil]; 
```

这分配/初始化一个字典并为“key1”设置“object1”，为“key2”设置“object2”，所以如果你想询问“key1”的值，你可以使用以下命令访问它。

```
NSLog(@"%@",[myDictionary objectForKey:@"key1"]); 
```

字典中的对象可以是数组、字典、布尔值、数据、日期、数字和字符串。

另一方面，数组通过数组中的数据索引存储数据：

```
NSArray *myArray = [[NSArray alloc] initWithObjects:@"object1",@"object2",@"object3", nil]; 
```

然后，您可以通过请求访问数组中的特定数据位`objectAtIndex:`，例如：

```
NSLog(@"%@",[myArray objectAtIndex:1]); 
```

它将返回“object2”，因为数组中的第一个索引始终为“0”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:51:07.313

检查[JSON](http://www.json.org/)文档

JSON 数组由方括号表示

```
[ "object1", "object2" ] 
```

JSON 数组在 Objective-C 中通常用`NSArray`. 这与新的文字语法相匹配

```
@[ @"object1", @"object2" ] 
```

JSON 对象用大括号表示

```
{ "key" : "value" } 
```

JSON 对象在 Objective-C 中通常用`NSDictionary`. 这也与新的文字语法相匹配

```
@{ @"key" : @"value" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:12:40.010

正如您可能知道的那样，列表中的实体或“单元格”用逗号 (,) 分隔

在序列化字典中，实体通过冒号 (:) 分解为键：值对

```
"success":true 
```

其中冒号前引号中的第一部分是键，第二部分是对应于该键的值。

一个序列化的数组可能看起来像这样：

```
{"hello", "goodbye", "world", "words", "friendship"} 
```

请注意，实体仍然用逗号分隔，但引号之外没有冒号。

另一个关键区别是，在字典中，键必须是唯一的，所以你不应该有这样的东西：

```
{"success":true, ..., "success":false} 
```

而在数组中，元素不必是唯一的：

```
{"hello", "hello", "goodbye"} 
```

希望这会有所帮助=)

# php - 如何将所有子域重定向到一个文件但让存在的文件加载

> ID：13014137
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:59:36.980
> 
> 标签：php, apache, .htaccess, mod-rewrite

所以我有一个 domain.com，我想让所有子域重定向到我正在制作的博客系统

所以 domain.com - 主网站（不是博客，由 index.php 加载）anything.domain.com - 博客网站 -> 所有内容都重定向到主目录中的 blogs.php（与 index.php 相同）

现在要完成这个我使用：

```
RewriteCond %{HTTP_HOST} ^([a-z0-9_]+\.)domain.com$ [NC]
RewriteRule (.*) blogs.php [QSA,L] 
```

或多或少它有效（我使用漂亮的网址 - 获取从 $_SERVER[request_uri] 中提取的实际 $_GET 表

但是，我最需要的是能够将文件链接到现有目录，例如： [http](http://someblog.domain.com/js/somefile.js) : //someblog.domain.com/js/somefile.js 现在它正在尝试使用 /js/somefile 加载 blogs.php。 js作为参数

我试图补充：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

但有了它 - 它总是打开主网站（因为每个子域都被重定向到主域并充当现有的目录/文件）

所以总结一下：

```
RewriteCond %{HTTP_HOST} ^[*]+\.domain.com (xxx)! [NC] 
//in place of xxx - somehow check if there is anything after adderess
RewriteCond %{REQUEST_FILENAME} !-f  // and check if it exists
RewriteCond %{REQUEST_FILENAME} !-d  // 
```

如果存在 - 服务器它，如果不遵循旧的，默默地将请求转换为 blogs.php：

```
RewriteCond %{HTTP_HOST} ^([a-z0-9_]+\.)gragieldowa.pl$ [NC]

RewriteRule (.*) blogs.php [QSA,L] 
```

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:01:34.283

您可以尝试在规则的开头添加传递，这样任何`/index.php`、`/blogs.php`或`/`都可以通过并且不会发生重写。然后您可以进行域/子域检查以及 !-f 和 !-d 检查。

```
# handle root request
RewriteCond %{HTTP_HOST} !^(www\.)?domain.com$ [NC]
RewriteRule ^/?$ blogs.php [L]

# redirect subdomains to blog.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} !^(www\.)?domain.com$ [NC]
RewriteRule ^ blogs.php [L] 
```

# wcf - Oracle 的 WCF CRUD 操作示例？

> ID：13014139
> 
> 赞同：0
> 
> 时间：2012-10-22T14:59:44.487
> 
> 标签：wcf, oracle

我正在为 SharePoint 实施公开对 Oracle 数据库表的访问。

从我所见，BDC 不直接支持 Oracle，因此我正在尝试编写 WCF 服务来对我的表执行 CRUD 操作。

我一直在研究谷歌，但收效甚微。谁能指出一个使用 WCF 修改 Oracle 数据库中数据的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:32:38.373

我能够通过遵循本教程来解决这个问题（因为我不需要 Silverlight，所以省略了 Silverlight 的东西）

[如何在 Silverlight 中使用 WCF 连接到 Oracle 数据库](http://www.c-sharpcorner.com/uploadfile/anavijai/how-to-connect-to-oracle-database-using-wcf-in-silverlight/)

# iphone - UIButton 在 iOS 6.0 上的 MFMessageComposeController 中为零

> ID：13014143
> 
> 赞同：2
> 
> 时间：2012-10-22T14:59:59.703
> 
> 标签：iphone, objective-c, sms, ios6, uiview-hierarchy

我正在尝试打印应用程序可见和隐藏窗口的视图层次结构。这是我在 MFMessageComposeViewController 子类中的一部分代码：

```
NSArray *windows = [[UIApplication sharedApplication] windows];

for(UIWindow *aWindow in windows) {
    if([aWindow isMemberOfClass:NSClassFromString(@"UITextEffectsWindow")]) {
        sendButton = [self findButtonInView:aWindow];
            break;
    }
} 
```

findButtonInView: 方法在当前 UIWindow 中递归搜索 UIButton。

这在使用 iOS4.3 和 iOS 5.1 进行测试时按预期工作（成功找到预期的 UIButton），但不适用于 iOS6。以下是两个测试的视图层次打印结果：

**iOS 4.3：**

```
<UITextEffectsWindow: 0x1e32a0; frame = (0 0; 320 480); opaque = NO; layer = <CALayer: 0x1e33d0>>
   | <UIPeripheralHostView: 0x1e4a80; frame = (0 224; 320 256); autoresizesSubviews = NO; layer = <UIPeripheralHostLayer: 0x1e4e60>>
   |    | <UIKeyboardAutomatic: 0x1ad300; frame = (0 40; 320 216); opaque = NO; layer = <CALayer: 0x1ad3b0>>
   |    |    | <UIKeyboardImpl: 0x1ad520; frame = (0 0; 320 216); opaque = NO; layer = <CALayer: 0x1ad6c0>>
   |    |    |    | <UIKeyboardLayoutStar: 0x1d47c0; frame = (0 0; 320 216); layer = <CALayer: 0x19ca40>>
   |    |    |    |    | <UIKBKeyplaneView: 0x1df880; frame = (0 0; 320 216); layer = <CALayer: 0x1df900>>
   |    |    |    |    |    | <UIKBKeyView: 0x1dfe00; frame = (1 119; 40 42); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1dffd0>>
   |    |    |    |    |    | <UIKBKeyView: 0x1e0090; frame = (279 119; 40 42); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1e00e0>>
   |    |    |    |    |    | <UIKBKeyView: 0x1e01e0; frame = (1 173; 38 42); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1e0230>>
   |    |    |    |    |    | <UIKBKeyView: 0x1dbfb0; frame = (41 173; 38 42); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1dc050>>
   |    |    |    |    |    | <UIKBKeyView: 0x1e0330; frame = (81 173; 158 42); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1e0380>>
   |    |    |    |    |    | <UIKBKeyView: 0x1e0440; frame = (241 173; 78 42); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1e0490>>
   |    | <CKMessageEntryView: 0x182500; baseClass = UIImageView; frame = (0 0; 320 40); opaque = NO; autoresize = W+TM; layer = <CALayer: 0x1837c0>>
   |    |    | <UIButton: 0x1878c0; frame = (6 8; 26 27); hidden = YES; opaque = NO; autoresize = RM+TM; layer = <CALayer: 0x182e60>>
   |    |    |    | <UIImageView: 0x1e56f0; frame = (0 0; 26 27); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1e5720>>
   |    |    | <UIView: 0x184dd0; frame = (7 0; 245 40); autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x185130>>
   |    |    | <CKContentEntryView: 0x188a50; baseClass = UIScrollView; frame = (6 0; 249 40); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x187230>; contentOffset: {-0, -10}>
   |    |    |    | <CKRichContentView: 0x193790; baseClass = UITextContentView; frame = (0 0; 249 20); text = ''; autoresize = W; layer = <CALayer: 0x1938a0>>
   |    |    |    |    | <UIWebDocumentView: 0xaef200; frame = (0 0; 249 20); text = '
'; opaque = NO; userInteractionEnabled = NO; layer = <UIWebLayer: 0x196c20>>
   |    |    |    |    | <UITextSelectionView: 0x1a5b60; frame = (0 0; 0 0); userInteractionEnabled = NO; layer = <CALayer: 0x1a5c00>>
   |    |    |    | <UIImageView: 0x189fa0; frame = (242 10; 7 20); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x189ff0>>
   |    |    |    | <UIImageView: 0x189eb0; frame = (242 23; 7 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x189f00>>
   |    |    | <UIImageView: 0x18a190; frame = (7 0; 245 40); opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x18a510>>
   |    |    | <UILabel: 0x18a6b0; frame = (245 13; 73 15); text = 'TEST'; clipsToBounds = YES; hidden = YES; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x18a720>>
   |    |    | <UIButton: 0x180d00; frame = (252 8; 61 27); opaque = NO; autoresize = LM+TM; layer = <CALayer: 0x184e00>>
   |    |    |    | <UIImageView: 0x1ad460; frame = (0 0; 61 27); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1ad490>>
   |    |    |    | <UIButtonLabel: 0x1871c0; frame = (11 3; 39 20); text = 'Send'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x187280>> 
```

**iOS 6.0：**

```
<UIWindow: 0x1fd81f80; frame = (0 0; 320 480); opaque = NO; autoresize = RM+BM; layer = <UIWindowLayer: 0x1fd82080>>
   | <UILayoutContainerView: 0x1fd94d50; frame = (0 0; 320 480); autoresize = W+H; layer = <CALayer: 0x1fd94df0>>
   |    | <UINavigationTransitionView: 0x1fd9a450; frame = (0 0; 320 480); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x1fd9a520>>
   |    |    | <UIViewControllerWrapperView: 0x1fdac9a0; frame = (0 20; 320 460); autoresize = W+H; layer = <CALayer: 0x1fdaca30>>
   |    |    |    | <UIView: 0x1fda8cb0; frame = (0 0; 320 460); autoresize = W+H; layer = <CALayer: 0x1fda8c70>>
   |    |    |    |    | <_UISizeTrackingView: 0x1fda6430; frame = (0 0; 320 460); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x1fda6510>>
   |    |    |    |    |    | <_UIRemoteView: 0x1fda6700; frame = (0 0; 320 480); transform = [0.5, -0, 0, 0.5, -0, 0]; userInteractionEnabled = NO; layer = <CALayerHost: 0x1fda6850>> 
```

我的问题是如何在 UITextEffectsWindow 中找到所需的 UIButton？

似乎iOS6中的视图层次结构发生了某种变化......

我将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:59:53.170

很可能是它改变了。您正在访问 UI 中显示的未记录元素，这些元素不能保证在系统更新之间保持一致。如果您想更改 MFMailComposeViewController 类中呈现的 UI 元素的外观，请使用 IUAppearance API。您不应该访问大部分邮件控制器类。

> 重要邮件撰写界面本身是不可定制的，并且不能由您的应用程序修改。此外，在呈现界面后，您的应用程序不允许对电子邮件内容进行进一步的更改。用户仍然可以使用界面编辑内容，但程序更改会被忽略。因此，您必须在呈现界面之前设置内容字段的值。

# c++ - Qt 相当于 PathAppend？

> ID：13014145
> 
> 赞同：16
> 
> 时间：2012-10-22T15:00:02.463
> 
> 标签：c++, qt

[PathAppend](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773565%28v=vs.85%29.aspx)是一个有用的 winapi 函数，可让您在处理任何尾随反斜杠（或缺少反斜杠）的同时将一条路径附加到另一条路径。

这意味着附加`"/dir1"`到`"dir2"`、 或或`"/dir1"`将产生相同（正确）的结果 - （而简单地连接将分别产生、和）。`"/dir2"``"/dir1/"``"/dir2"``"/dir1/dir2"``"/dir1dir2"``"/dir1/dir2"``"/dir1//dir2"`

有没有做类似事情的 Qt 函数？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-22T15:12:04.570

没有那个功能，但`QDir::cleanPath()`会处理你需要的一切，你只需要连接路径：

```
QString appendPath(const QString& path1, const QString& path2)
{
    return QDir::cleanPath(path1 + QDir::separator() + path2);
} 
```

我使用`QDir::separator()`了原始“/”而不是原始“/”，但这不是强制性的，因为 QT 在内部将该分隔符转换为本机分隔符（如果需要，请参阅[使用 Qt 构建 FS 路径的跨平台方式](https://stackoverflow.com/a/3194868/1207195)）。

请注意（对于具有 .NET 背景的人）还有另一个类似的功能： ，它的行为在`Path.Combine()`某种程度上*类似于*`PathAppend()`但它不同。请参阅[是否有 QPath::Combine()？](https://stackoverflow.com/a/13014491/1207195)对于其行为的 QT*仿真*（以及稍微更详细地概述它们的差异）。

# jquery - 在 OnClick 事件中读取元素属性

> ID：13014146
> 
> 赞同：0
> 
> 时间：2012-10-22T15:00:02.410
> 
> 标签：jquery

我有一个 html 元素，想在 OnClick 事件中读取数据属性

```
<a id="downloadFile" class="btn btn-success" href="javascript:;" data="MyData">Download file</a> 
```

如果我使用下面的代码，请参考 href 属性而不是 A 元素。如何引用A元素并读取数据值？

```
 $('#downloadFile').click(function() {            
  alert(this.attr('data')); //I get error that 'href' do not has 'data' attribute, this code refers to href attribute and not to A element
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:01:40.957

在事件处理程序的上下文中，`this`指的是 DOM 元素，而不是 jQuery 对象。用于`$(this)`获取一个 jQuery 对象，以便您可以使用该`attr`函数：

```
$('#downloadFile').click(function() {            
  alert($(this).attr('data'));
}); 
```

另一种选择是使用[`this.getAttribute("data")`](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute).

**[演示](http://jsfiddle.net/h2KFR/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:01:14.627

您可以拥有自定义数据属性并将其与`-`

**[现场演示](http://jsfiddle.net/rajaadil/tjJV6/)**

```
<a id="downloadFile" class="btn btn-success" href="javascript:;" data-yourhref="MyData">Download file</a>   

     $('#downloadFile').click(function() {            
        alert($(this).data('yourhref')); //Get error that href do not has data atribute, this refered to href atribute and not to A element
    });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:05:24.837

Only change THIS for the propper selector for Jquery

```
$('#downloadFile').click(function() {            
          alert($('#downloadFile').attr('data')); //Get error that href do not has data atribute, this refered to href atribute and not to A element
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:04:28.900

您指的是使用 this 但使用 jquery 语法的 js 对象。

尝试：

```
$(this).attr('href') 
```

# wifi - 使用 PIC 16F877 对 Wifly 模块进行编程

> ID：13014148
> 
> 赞同：0
> 
> 时间：2012-10-22T15:00:19.523
> 
> 标签：wifi, pic

我正在尝试开始一个将 WiFly 模块（https://www.sparkfun.com/products/10822）与 PIC 微控制器（16F877）接口的项目。但我真的很困惑如何开始使用 WiFly。对 WiFly 进行编程需要什么（软件/硬件）？我需要购买某种编程器来连接我的电脑吗？我需要购买 WiFly 防护罩吗？抱歉，这是一个广泛的问题，但我似乎找不到任何好的入门教程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:10:00.077

您需要安装一个软件包 TeraTerm，它将连接到模块并以命令模式访问它。此工具类似于 Windows 附带的超级终端程序，但它是由 Wifly 制造商提供的。连接的默认设置为 9600Kbps、8 位、无奇偶校验、1 个停止位。

然后，您需要使用某些命令根据您的需要配置设备。所有命令都列在[http://dlnmh9ip6v2uc.cloudfront.net/datasheets/Wireless/WiFi/WiFly-RN-UM.pdf](http://dlnmh9ip6v2uc.cloudfront.net/datasheets/Wireless/WiFi/WiFly-RN-UM.pdf)

teraterm 软件和其他资源可以在[http://rovingnetworks.com/resources/show/product:1上找到](http://rovingnetworks.com/resources/show/product:1)

# mysql - FieldX = 1时多个字段的Mysql唯一索引

> ID：13014149
> 
> 赞同：0
> 
> 时间：2012-10-22T15:00:21.683
> 
> 标签：mysql

*场景：多张产品图片，一张主图。*

目前，我有 2 张桌子来管理这个。一个用于存储产品图像，另一个用于存储`mainProductImageIds`。在存储列表的表中`mainProductImageIds`，我在`prodid`+上有一个唯一索引，`isMain`以强制**每个产品 ID 一个主图像**。

***我的问题***与下表有关（如果我打算只使用 1 个表）。我将如何执行 1`isMain=1`per`prod`？当我尝试设置时，是否有任何索引设置会出错`isMain=1`，`image_id=2`因为`image=1`已经是主图像？您不能将 unique_key 放在`prod`+`isMain`。

```
|image_id |prod|isMain
|---------|----|------
|0        |1   |0
|1        |1   |1
|2        |1   |0
|3        |2   |1
|4        |3   |0
|5        |3   |1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:42:56.357

您可以尝试使用`TRIGGER`.

```
CREATE TRIGGER check_unique BEFORE UPDATE ON `images`
    FOR EACH ROW
        SET NEW.isMain = IF(NEW.isMain = 0, 0,
            CASE WHEN ( SELECT MAX(isMain) FROM images AS q WHERE q.prod = NEW.prod ) = 1
            THEN NULL ELSE NEW.isMain END); 
```

或者，更快（尤其是索引时）

```
CREATE TRIGGER check_unique BEFORE UPDATE ON `images`
    FOR EACH ROW
        SET NEW.isMain = IF(NEW.isMain = 0, 0,
           IF (EXISTS ( SELECT * FROM images AS q WHERE q.prod = NEW.prod AND q.isMain = 1), NULL, 1)); 
```

这将允许将 isMain 始终设置为 0；如果要将其设置为 1，那么它将检查同一产品是否没有其他行的 isMain 为 1。

## 例子

在下面的示例中，我无法设置`isMain = 1`位置，`prod=3`直到我设置`isMain=0`了具有`isMain = 1`.

```
CREATE TABLE images (
   image_id integer not null primary key auto_increment, 
   prod integer not null,     isMain integer not null );

INSERT INTO images VALUES (1, 1, 0), (2, 1, 1), (3, 2, 0), (4, 2, 1);

select * from images;
+----------+------+--------+
| image_id | prod | isMain |
+----------+------+--------+
|        1 |    1 |      0 |
|        2 |    1 |      1 |
|        3 |    2 |      0 |
|        4 |    2 |      1 |
+----------+------+--------+

CREATE TRIGGER check_unique BEFORE UPDATE
    ON `images` FOR EACH ROW
       SET NEW.isMain = IF(NEW.isMain = 0, 0, IF (EXISTS ( SELECT * FROM images AS q WHERE q.prod = NEW.prod AND q.isMain = 1), NULL, 1));

UPDATE images SET isMain = 1 WHERE image_id = 3;
ERROR 1048 (23000): Column 'isMain' cannot be null

UPDATE images SET isMain = 0 WHERE image_id = 4;
Query OK, 1 row affected, 1 warning (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 1

UPDATE images SET isMain = 1 WHERE image_id = 3;
Query OK, 1 row affected, 1 warning (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 1 
```

您可以扩展此方法，以便您始终可以将任何行的 isMain 设置为 1 ...*但该产品之前为 isMain 的行被归零*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:42:48.343

我了解到，答案非常简单，并且与 MySQL 如何索引 NULL 值有关。[他们在这里](https://stackoverflow.com/questions/1346765/unique-constraint-that-allows-empty-values-in-mysql)谈论：

> 对于所有引擎，UNIQUE 索引允许包含 NULL 的列有多个 NULL 值。

所以只要我的`isMain`字段允许强制执行一个值和 NULL（可能是一个 ENUM），我就准备好了。只有当 isMain 设置为不同的值而不是设置为 NULL 时，才会强制执行 unique_index。

**更新后的表如下所示：**

```
|image_id |prod|isMain
|---------|----|------
|0        |1   |null
|1        |1   |1
|2        |1   |null
|3        |2   |1
|4        |3   |null
|5        |3   |1 
```

# entity-framework - 实体框架 - TPC - 覆盖主键列名称

> ID：13014150
> 
> 赞同：1
> 
> 时间：2012-10-22T15:00:31.350
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

这是我的模型：

```
public abstract class Entity
{
    public long Id { get; set; }
}

public abstract class Audit : Entity
{}

public class UserAudit : Audit
{
    public virtual User User { get; set; }
}

public class User : Entity
{} 
```

这是我的 DbContext：

```
public class TestDbContext : DbContext
{
    static TestDbContext()
    {
        Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new AuditConfiguration());
        modelBuilder.Configurations.Add(new UserAuditConfiguration());
        modelBuilder.Configurations.Add(new UserConfiguration());
    }
} 
```

这是我的映射：

```
public abstract class EntityConfiguration<T> : EntityTypeConfiguration<T>
    where T : Entity
{
    protected EntityConfiguration()
    {
        HasKey(t => t.Id);
        Property(t => t.Id)
            .HasColumnName("Key");
    }
}

public class AuditConfiguration : EntityConfiguration<Audit>
{}

public class UserAuditConfiguration : EntityTypeConfiguration<UserAudit>
{
    public UserAuditConfiguration()
    {
        Map(m =>
            {
                m.MapInheritedProperties();
                m.ToTable("UserAudits");
            });
        HasRequired(u => u.User)
            .WithMany()
            .Map(m => m.MapKey("UserKey"));
    }
}

public class UserConfiguration : EntityConfiguration<User>
{} 
```

当我尝试为此模型生成迁移时，我收到以下错误：

错误 2010：指定为此 MSL 的一部分的列“Id”在 MetadataWorkspace 中不存在。

如果我在 EntityConfiguration 的构造函数中注释掉“.HasColumnName”调用，则迁移会正确生成（当然除了列名是 Id 而不是 Key）。

TPC 映射是否应该支持不使用默认列名的主键列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:52:31.890

问题似乎是实体框架不希望我映射审计。如果我删除 AuditConfiguration，这将按预期工作。

# java - 如何在 Java 中进行资源池化？

> ID：13014152
> 
> 赞同：1
> 
> 时间：2012-10-22T15:00:39.523
> 
> 标签：java, resources, pooling

我必须维护一个经常创建资源并在很短的时间内使用它们的应用程序。因此，大部分（宝贵的*用户*）时间都花在了创建资源上，而不是实际使用它们上。

我想将这些资源放入一个池中，以便更快地获取它们。我正在寻找允许我进行资源池（即通用对象池）的Java API。我不想重新发明轮子。

我发现[Apache Commons Pool](http://commons.apache.org/pool/)很容易在 Java 应用程序中执行此操作（到目前为止我已经阅读了示例代码）。

谷歌搜索后，除了众所周知的 C3PO、Proxool 等之外，似乎很难找到其他任何东西。那些最新的做连接池！

您知道市场上满足相同需求的其他 API 吗？

要求 ：

*   生产就绪
*   有据可查
*   最新版本不应超过两年
*   接受打开/关闭源
*   接受免费/付费许可
*   在 Maven 存储库中可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:37:05.653

到目前为止，我想出了这两个库。

*   [池它](http://programming.huyduong.com/poolit/index.html)
*   [ACP](http://commons.apache.org/pool/)

# c# - 从 .net 类库 COM 可见获取程序集版本不起作用

> ID：13014154
> 
> 赞同：0
> 
> 时间：2012-10-22T15:00:45.703
> 
> 标签：c#, .net, visual-studio-2010, com, class-library

我使用 Visual Studio 2010 在 CSharp 中创建了一个类库 COM 可见。当我尝试调用此方法时：

```
 public string Version {
        get { return Assembly.GetEntryAssembly().GetName().Version.ToString(); }
    } 
```

从 VB6 客户端我获得**未设置为对象实例的对象引用**。其他方法正常工作。从 .NET 客户端一切正常！

怎么了？谢谢，路易吉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T15:02:23.067

`Assembly.GetEntryAssembly()`返回启动此 .Net 进程的程序集（带有`Main()`）

在非托管进程中，它将返回 null。

要获取包含您的代码的程序集，请使用`typeof(MyType).Assembly`.

# php - PHP mysql 结果 json_encode 返回键和索引号

> ID：13014162
> 
> 赞同：2
> 
> 时间：2012-10-22T15:01:08.687
> 
> 标签：php, json

为什么 JSON 输出会同时显示索引号和关联列名称？

我只需要列名，例如“UID”

**PHP代码**

```
$res = $statement->fetchAll();
$records = array('Record'=>$posts);
echo json_encode($records); 
```

**JSON 输出**

```
{
  "Record":[
    {
      "UID":"1001",
      "0":"1001",
      "NAME":"Robot2",
      "1":"Robot2",
      "EMAIL":"robot2@test.com",
      "2":"robot2@test.com",
      "GENDER":"f",
      "3":"f"
    },
    {
      "UID":"1030",
      "0":"1030",
      "NAME":"Anna",
      "1":"Anna",
      "EMAIL":"Anna@msn.com",
      "2":"Anna@msn.com",
      "GENDER":"f",
      "3":"f"
    }
  ]
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:04:44.523

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T15:04:11.490

默认获取样式是`PDO::FETCH_BOTH`，您需要将其设置为`PDO::FETCH_ASSOC`.

```
$res = $statement->fetchAll(PDO::FETCH_ASSOC); 
```

或者您可以通过以下方式设置默认**DEFAULT_FETCH_MODE**：

```
$pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 
```

那么你可以做`$res = $statement->fetchAll();`

# project-management - 如何使用 Greenhopper 管理多个项目的开发人员？

> ID：13014165
> 
> 赞同：2
> 
> 时间：2012-10-22T15:01:12.803
> 
> 标签：project-management, jira, agile, jira-plugin, jira-agile

我们目前正在使用 Jira 5.1.6 和 GreenHopper 6.0.5。我们有很多项目，总共可能有十几个，但一次只有几个在积极工作，其余的都是为了偶尔的错误修复或其他任务。我们公司的 4 到 5 名开发人员可能同时从事几个项目（有些人只从事一个项目，有些人从事多个项目的维护工作，而且根据业务优先级，谁在做什么工作会有所不同）。

所以，GreenHopper 似乎是从一个非常以项目为中心的观点出发的。我可以为一个项目设置一个快速 Scrum 板，并在其中进行 Sprint 为该项目做的工作。这可以让企业更好地了解该项目的工作。潜在地，一个人也可以为所有项目创建一个董事会（因为 GreenHopper 6 添加了这一点），并在所有项目中进行一种“全球冲刺”。如果我们要进行这种全球冲刺，所有项目负责人都需要立即确定在接下来的几周内应该做什么，这可能是可行的，但似乎有点棘手，需要很多的协调。

我认为我们想要的是某种“资源视图”之类的东西，以便项目所有者可以在他们的 sprint 中设置他们的任务，但是每个开发人员都有某种视图来告诉他们接下来应该做什么任务无论它在哪个项目的冲刺中，以及我们的经理在项目中分配时间的某种方式。所以，我可能会被安排每周工作 20 小时在项目 A 上，10 小时在项目 B 上，10 小时在维护其他项目上，然后进行 sprint 的项目所有者可以看到他们分配了多少时间，我作为开发人员，我会看到我即将完成的任务的某种统一视图，这样我就会知道我接下来应该做什么以及即将完成的工作。我不知道那个描述是否正是我们想要的，但我认为我们想要一些类似的东西，

到目前为止，我对 GreenHopper 的探索中对我们如何处理这个问题的想法是：

1.  创建我提到的那些“全球”冲刺，并在每个冲刺开始时作为一个部门来尝试安排我们所有人将要做的事情。项目可以使用快速过滤器或类似的工具来查看它们的特定 sprint 部分，我们只需要处理这些 sprint 的协调。
2.  在所有项目板上使用“并行冲刺”功能，并让每个开发人员针对即将到来的任务创建自己的冲刺。这有助于获得基于资源的视图，但对于项目来说可能很难弄清楚事物的状态，并且绝对感觉就像将 GreenHopper 挤进一个它真的不想去的空间。
3.  为每个项目创建一个板，记录每个项目即将推出的项目，这样每个项目都有自己的 Sprint，我们获得基于项目的事物视图，并且让每个开发人员自己跟踪他们应该获得哪些项目的 sprint来自的任务。基本上，GreenHopper 并不是用于基于资源的视图的工具，所以甚至不要打扰，相信我们的开发人员和我们的经理会查看所有这些项目的工作任务，而不是试图全部完成一个地方。

这些看起来都不是很好，尽管我相信我们可以用它们中的任何一个来凑合。但我不断回过头来，感觉我们在做一些奇怪或独特的事情，我们会认为，因为 Jira/GreenHopper 是一个行业标准的敏捷工具，它会更容易使用它是我们正在尝试做的事情。我们在做一些疯狂的事情吗？如果存在跨多个项目执行敏捷的标准方法，我认为我们可以改变我们的流程以使用标准实践。是否有一些 GreenHopper 设置或报告或我错过的某处？除了 GreenHopper 之外，我们还应该使用其他一些 Jira 插件吗？那里的其他团队是否使用上述方法之一，并且可以就这是否是一个好主意提供建议？

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:18:16.517

“……看起来有点棘手，需要大量的协调。” 是的，对我来说听起来像是项目管理。

我会为每个按自己的时间表发布的产品创建板。我还会创建一个查询来向每个用户显示按 Sprint 排序的分配给他们的问题，这样他们就可以看到他们的任务是什么。这些问题将跨越多个板和冲刺。

我确实希望 GH 对资源分配有更多帮助，包括汇总上一段中过滤器中分配的时间。目前，我最终将过滤器的结果导出到 Excel 并使用它来按资源汇总总计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:23:41.440

我在 Atlassian 论坛上可能更合适的地方问了这个问题：

[https://answers.atlassian.com/questions/99020/how-do-i-use-greenhopper-to-manage-developers-across-multiple-projects](https://answers.atlassian.com/questions/99020/how-do-i-use-greenhopper-to-manage-developers-across-multiple-projects)

我认为他们的回答非常好。我为每个项目创建了一个板，仅限于其项目并用于创建该项目的 sprint，开发人员使用“所有项目”板来查看他们所属的所有 sprint。

正如 mdoar 所说，它不能很好地处理资源分配，但它似乎确实是目前使用该工具的最佳方式。

# ruby-on-rails - Ruby on Rails：在 localhost 中使用 Curl 命令

> ID：13014168
> 
> 赞同：1
> 
> 时间：2012-10-22T15:01:21.710
> 
> 标签：ruby-on-rails, ruby, curl, localhost

我想用系统命令 curl 保存页面的内容，但它不起作用。我认为这是 localhost 的问题，但我不知道如何解决。

```
def save_page
    `/usr/bin/curl -O http://127.0.0.1:3000/category_plist`
end 
```

服务器输出：

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:--  0:04:54 --:--:--     0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:12:58.877

如果您将功能更改为以下内容，它应该可以工作......

```
def save_page
  system("/usr/bin/curl -O http://127.0.0.1:3000/category_plist")
end 
```

要测试这样的命令，请退出本地网络服务器并运行“rails 控制台”，从那里您可以输入这样的命令并立即获得响应......

```
$ rails console
Loading development environment (Rails 3.1.0.rc4)
1.9.2-p290 :001 > puts system("ls -l")
total 56
-rw-r--r--@  1 creativetechnologist  staff   212  3 Feb  2011 Capfile
-rw-r--r--@  1 creativetechnologist  staff   924  6 Feb  2012 Gemfile
-rw-r--r--@  1 creativetechnologist  staff  3072  6 Feb  2012 Gemfile.lock
-rw-r--r--@  1 creativetechnologist  staff  3943 16 Oct 23:16 MOR_git.tmproj
-rw-r--r--@  1 creativetechnologist  staff    18 12 Jul 19:06 README
-rw-r--r--@  1 creativetechnologist  staff   267 30 Aug  2011 Rakefile
drwxr-xr-x   7 creativetechnologist  staff   238 30 Aug  2011 app
drwxr-xr-x  11 creativetechnologist  staff   374 13 Sep  2011 config
-rw-r--r--@  1 creativetechnologist  staff   157 30 Aug  2011 config.ru
drwxr-xr-x   6 creativetechnologist  staff   204  3 Feb  2011 db
drwxr-xr-x   3 creativetechnologist  staff   102  3 Feb  2011 doc
drwxr-xr-x   4 creativetechnologist  staff   136  3 Feb  2011 key
drwxr-xr-x   6 creativetechnologist  staff   204  7 Sep  2011 lib
drwxr-xr-x   6 creativetechnologist  staff   204 11 Mar  2012 log
drwxr-xr-x   3 creativetechnologist  staff   102 30 Aug  2011 logs
drwxr-xr-x  13 creativetechnologist  staff   442  6 Feb  2012 public
drwxr-xr-x   3 creativetechnologist  staff   102  3 Feb  2011 script
drwxr-xr-x   8 creativetechnologist  staff   272  3 Feb  2011 test
drwxr-xr-x   6 creativetechnologist  staff   204  3 Feb  2011 tmp
drwxr-xr-x   3 creativetechnologist  staff   102  3 Feb  2011 vendor
true
 => nil 
1.9.2-p290 :002 > 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:02:48.833

尝试这个：

```
def save_page
    `/usr/bin/curl -s http://127.0.0.1:3000/category_plist` # -s will silent curl's output except the page
end 
```

# php - 关于 SELECT 语句和查询的建议

> ID：13014171
> 
> 赞同：2
> 
> 时间：2012-10-22T15:01:28.210
> 
> 标签：php, mysql

我需要有一个大规模的选择语句或多个查询。我需要在一天中将数据分解为特定的时间范围。这个在第一个间隔中效果很好，但在那之后我很难过。如果我有多个查询，则我的“mysql_fetch_array”在语法方面有问题（使用类似'else'的东西并通过它们）。

```
SELECT U.user_name,ROUND(SUM((TA.task_average*TC.completed)/60),2) AS equiv1, S.submit_date,
    SUM(TC.completed) AS ttasks1,
    FROM `summary` S
    JOIN users U ON U.user_id = S.user_id
    JOIN tasks TA ON TA.task_id = S.task_id
    JOIN tcompleted TC ON TC.tcompleted_id = S.tcompleted_id
    JOIN minutes M ON M.minutes_id = S.minutes_id
    WHERE DATE(submit_date) = curdate( )
      AND TIME(submit_date) BETWEEN '06:00:00' and '07:59:59'       
      GROUP BY U.user_name
    LIMIT 0 , 30 
```

我的 fetch 数组（我需要更多，但是如何组合它们？）

```
<?php
while($rows=mysql_fetch_array($result1)){

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:01:31.057

好的，鉴于您希望每隔 2 小时定期获取数据，您可以尝试以下操作：

```
SELECT FLOOR(hour(S.submit_date)/2)*2, U.user_name,ROUND(SUM((TA.task_average*TC.completed)/60),2) AS equiv1, S.submit_date
    SUM(TC.completed) AS ttasks1,
    FROM `summary` S
    JOIN users U ON U.user_id = S.user_id
    JOIN tasks TA ON TA.task_id = S.task_id
    JOIN tcompleted TC ON TC.tcompleted_id = S.tcompleted_id
    JOIN minutes M ON M.minutes_id = S.minutes_id
    WHERE DATE(submit_date) = curdate( )
      GROUP BY U.user_name, FLOOR(hour(S.submit_date)/2)
    LIMIT 0 , 30 
```

where`FLOOR(hour(S.submit_date)/2)*2`将每小时映射到每 2 小时的第一个（偶数）小时，您可以按此值分组。IE。

```
0, 1 -> 0
2, 3 -> 2
4, 5 -> 4
etc... 
```

* * *

## 使用 php 更新包括：

一些注意事项：

*   我用过mysqli
*   我已经将原始查询与`hours`派生表结合在一起，以确保时间间隔中没有“间隙”（假设为 6:00 - 20:00）
*   我已经订购了`user`，所以当我们遍历结果时，我们可以打印给定用户的表格单元格，然后在用户更改时打印一个新的表格行。

这是代码：

```
echo '<table border=1><tr><td></td>';
for ($i=6; $i<=18; $i=$i+2) {
    echo '<td colspan=2>'.$i.' - '.($i+2).'</td>';
}

$mysqli = new mysqli('MY_HOST', 'MY_USER', 'MY_PASSWORD', 'MY_DATABASE');

$sql = "
SELECT user_name, IFNULL(equiv1,0) AS equiv1, IFNULL(ttasks1,0) AS ttasks1, hour
FROM
(
    SELECT 6 AS hour
    UNION SELECT 8
    UNION SELECT 10
    UNION SELECT 12
    UNION SELECT 14
    UNION SELECT 16
    UNION SELECT 18
) hours LEFT JOIN

(
SELECT FLOOR(hour(S.submit_date)/2)*2 as task_hour, U.user_name, ROUND(SUM((TA.task_average*TC.completed)/60),2) AS equiv1, S.submit_date
    SUM(TC.completed) AS ttasks1
    FROM `summary` S
    JOIN users U ON U.user_id = S.user_id
    JOIN tasks TA ON TA.task_id = S.task_id
    JOIN tcompleted TC ON TC.tcompleted_id = S.tcompleted_id
    JOIN minutes M ON M.minutes_id = S.minutes_id
    WHERE DATE(submit_date) = curdate( )
      GROUP BY U.user_name, FLOOR(hour(S.submit_date)/2)
    LIMIT 0 , 30
) task_summary
ON hours.hour = task_summary.task_hour
ORDER BY user_name, hour
";

$result = $mysqli->query($sql);

$user_name = '';
while ($row = $result->fetch_assoc()) {
    if ($user_name <> $row['user_name']){
        echo '</tr><tr><td>'.$row['user_name'].'</td>'; //start a new row if user changes
        $user_name = $row['user_name']; //update user variable for checking on next iteration
    }
    echo '<td>'.$row['equiv1'].'</td>';
    echo '<td>'.$row['ttasks1'].'</td>';
}

echo '</tr><table>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:37:15.363

这是关于您的问题“如何组合提取数组”。为什么没有一个数组来存储来自您的 fetch 数组的所有值，如下所示。

```
<?php
$customArray = array();
while($rows=mysql_fetch_array($result1)){

    $customArray['field1'] = $row['field1'];
    $customArray['field2'] = $row['field2'];

}

//another fetch array

while($rows=mysql_fetch_array($result2)){

    $customArray['field1'] = $row['field1'];
    $customArray['field2'] = $row['field2'];

}

//now $customArray will have all the required values you need. 
//This is not a great option as it is making the logic expensive. 
//Are you going to use this in a cron job ?
?> 
```

# google-drive-api - 如何使用 Google Drive 更改授权域？

> ID：13014172
> 
> 赞同：2
> 
> 时间：2012-10-22T15:01:27.293
> 
> 标签：google-drive-api, google-apps-marketplace

我有一个启用 Google Drive 的应用程序，我正试图进入 Google Apps Marketplace。它被拒绝了，因为：

> 您的请求开始：[https ://www.google.com/accounts/o8/ud?openid](https://www.google.com/accounts/o8/ud?openid)
> 
> 它应该看起来更像： [https ://www.google.com/a/DOMAIN_GOES_HERE/o8/ud](https://www.google.com/a/DOMAIN_GOES_HERE/o8/ud)

我无法从 Google 的任何人那里得到关于这意味着什么的回应。

我们的 Drive 操作基于[Java DrEdit 示例](https://developers.google.com/drive/examples/java)。

是否可以使用 Google API Java 客户端库来使用上面的第二个域，如果可以，如何？

此外，即使它可以访问，它是否可以访问我需要的文件权限设置以执行各种驱动器操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:37:37.097

答案是目前不可能。与 Google Drive 一起使用的 OAuth2 变体不允许强制登录到特定域。

在找到解决方法之前，Google Apps Marketplace 店主应允许接受此类应用程序。

# objective-c - UIView 动画未在值更改事件上设置动画

> ID：13014173
> 
> 赞同：1
> 
> 时间：2012-10-22T15:01:33.460
> 
> 标签：objective-c, ios, animation, uiview

我正在尝试根据 DCRoundSwitch 对象的值隐藏或显示视图，但 UIView 动画块没有动画 - 更改会立即应用。我还尝试使用 CATransaction 为视图层设置动画，但这些更改也立即应用了。如果相同的动画块被移动到另一个位置（例如，viewWillAppear:)，动画效果很好。

非常感谢任何帮助确定动画为什么不起作用的帮助。谢谢！

这是动画代码：

```
- (void)switchValueChanged:(id)sender
{
    [UIView animateWithDuration:0.33
                     animations:^{
                         self.containerView.alpha = self.switchView.isOn ? 1 : 0;
                     }];
} 
```

作为参考，这里是 DCRoundSwitch 用于更改开关值的代码。`animated`是`YES`和`ignoreControlEvents`是`NO`。

```
- (void)setOn:(BOOL)newOn animated:(BOOL)animated ignoreControlEvents:(BOOL)ignoreControlEvents
{
    BOOL previousOn = self.on;
    on = newOn;
    ignoreTap = YES;

    [CATransaction setAnimationDuration:0.014];
    knobLayer.gripped = YES;

    // setup by turning off the manual clipping of the toggleLayer and setting up a layer mask.
    [self useLayerMasking];
    [self positionLayersAndMask];

    [CATransaction setCompletionBlock:^{
        [CATransaction begin];
        if (!animated)
            [CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
        else
            [CATransaction setValue:(id)kCFBooleanFalse forKey:kCATransactionDisableActions];

        CGFloat minToggleX = -toggleLayer.frame.size.width / 2.0 + toggleLayer.frame.size.height / 2.0;
        CGFloat maxToggleX = -1;

        if (self.on)
        {
            toggleLayer.frame = CGRectMake(maxToggleX,
                                           toggleLayer.frame.origin.y,
                                           toggleLayer.frame.size.width,
                                           toggleLayer.frame.size.height);
        }
        else
        {
            toggleLayer.frame = CGRectMake(minToggleX,
                                           toggleLayer.frame.origin.y,
                                           toggleLayer.frame.size.width,
                                           toggleLayer.frame.size.height);
        }

        if (!toggleLayer.mask)
        {
            [self useLayerMasking];
            [toggleLayer setNeedsDisplay];
        }

        [self positionLayersAndMask];

        knobLayer.gripped = NO;

        [CATransaction setCompletionBlock:^{
            [self removeLayerMask];
            ignoreTap = NO;

            // send the action here so it get's sent at the end of the animations
            if (previousOn != on && !ignoreControlEvents)
                [self sendActionsForControlEvents:UIControlEventValueChanged];
        }];

        [CATransaction commit];
    }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:29:38.057

与@Matt 谈论隐式事务让我想到...... UIView 的动画方法环绕`CATransaction`，并且属性更改通常添加到隐式事务中。但是，没有为完成块中所做的更改创建事务，这显然会影响`[UIView animateWithDuration]`. 我变了

```
if (previousOn != on && !ignoreControlEvents)
    [self sendActionsForControlEvents:UIControlEventValueChanged]; 
```

至

```
if (previousOn != on && !ignoreControlEvents)
{
    [CATransaction begin];
    [CATransaction setDisableActions:NO];
    [self sendActionsForControlEvents:UIControlEventValueChanged];
    [CATransaction commit];
} 
```

它有效。（`[CATransaction setDisableActions:NO]`也是必要的）

谢谢各位帮忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:22:59.040

我不知道使用 CATransaction 的 DCRoundSwitch 代码中发生了什么以及它是如何工作的。但你可以试试这个：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.33];

self.containerView.alpha = self.switchView.isOn ? 1 : 0;

[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:44:27.043

我已经使用了上述奥斯汀解决方案。但无法修复它。

我在下面的代码中使用了这个。哪个工作正常。

请关注这个话题

[https://github.com/domesticcatsoftware/DCRoundSwitch/issues/12](https://github.com/domesticcatsoftware/DCRoundSwitch/issues/12)

你可以去使用这个 DCRoundSwitch 的类，在那个类的 dealloc 方法上放这条线。

```
 - (void)dealloc
 {
      [self.MyDCRoundSwitch removeTarget:nil
                         action:NULL
                         forControlEvents:UIControlEventAllEvents];
      [super dealloc];
 } 
```

# objective-c - 在 RestKit 中使用动态数据解析 JSON

> ID：13014176
> 
> 赞同：0
> 
> 时间：2012-10-22T15:01:35.830
> 
> 标签：objective-c, ios, json, restkit

我正在尝试解析以下 JSON，但出现以下错误。

“错误找不到 keyPath 的对象映射：''”

据我了解，这是因为我没有提供 SetMapping: forKeyPath: 但我无法设置它，因为您可以在 JSON 中看到密钥会发生变化，例如 BBC ONE、BBC TWO 等。我不需要保存服务名称，因为我计划将 SID 与另一个 json 文件交叉引用，该文件包含存储在核心数据中的这些详细信息以提供此服务。（如果它是可能的）。有没有办法解决这个错误？

这是我的 JSON（精简版）

```
{
    "BBC ONE": [
        {
            "Name": "Programme 1",
            "Description": "A desc of a programme",
            "ONID": 1,
            "TSID": 2,
            "SID": 3,
            "CRID": "crid_address"
        },
        {
            "Name": "Programme 2",
            "Description": " Another desc",
            "ONID": 9,
            "TSID": 99,
            "SID": 999,
            "CRID": "crid_2"
        }
    ],
    "BBC TWO": [
        {
            "Name": "bbc_programme",
            "Description": "programme 2",
            "Event ID": 4,
            "ONID": 9,
            "TSID": 4,
            "SID": 4,
            "CRID": "crid"
        }
    ]
} 
```

和更多。

这是我的代码：

```
RKManagedObjectMapping *epgMapping = [RKManagedObjectMapping mappingForClass:[Epg class] inManagedObjectStore:objectManager.objectStore];

        [epgMapping mapKeyPathsToAttributes:@"Name",@"name",
                                        @"Description", @"desc",
                                        @"Event ID", @"event_id",
                                        @"ONID", @"onid",
                                        @"TSID", @"tsid",
                                        @"SID",  @"sid",
                                        @"CRID", @"crid",nil];

    epgMapping.primaryKeyAttribute = @"crid"; 
```

任何帮助将不胜感激，因为我已经阅读了各种文件并查看了其他人的问题并且找不到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:23:50.723

您将一个值存储在 json 名称-值对的名称部分。建议将您的 json（如果可以的话）更改为以下内容：

```
"Name" : "BBC ONE",
"Programs" : [
    {
        "Name": "Programme 1",
        "Description": "A desc of a programme",
        "ONID": 1,
        "TSID": 2,
        "SID": 3,
        "CRID": "crid_address"
    },
    {
        "Name": "Programme 2",
        "Description": " Another desc",
        "ONID": 9,
        "TSID": 99,
        "SID": 999,
        "CRID": "crid_2"
    } 
```

# debian - Rmagick 已安装，但我无法在 redmine 中启用它

> ID：13014183
> 
> 赞同：0
> 
> 时间：2012-10-22T15:02:06.163
> 
> 标签：debian, redmine, rmagick

我已经在Debian下成功安装了Redmine2.0。

我确实输入了 gem install RMagick 并且它工作正常，然后我重新启动了我的网络服务器。

我仍然没有在 Redmine 中检测到 Rmagick，并且我没有典型的错误，该怎么办？

提前致谢

此致

伊曼纽尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:43:20.470

从 1.4 版开始，Redmine 使用[bundler](http://gembundler.com/)来安装和管理依赖项。所以你不需要手动安装 gems...

在您`bundle install`的 Redmine 目录中是否成功？

> 我仍然没有在 Redmine 中检测到 Rmagick

你的意思是在`Administration`> `Information`> `RMagick available (optional)`？

我建议你试试上面的命令，看看它是否成功......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T16:19:17.860

如果您已通过 安装 redmine `apt-get`，则应使用 安装 rmagick `apt-get install ruby-rmagick`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T07:51:52.337

原因是您的 RMagick 加载了不合适的 imagemagick 版本。所以

1.  打开 redmine/lib/redmine.rb 文件
2.  你可以看到 begin require 'RMagick' 除非 Object.const_defined?(:Magick) 救援 LoadError
3.  在此行之前，添加 RMAGICK_BYPASS_VERSION_TEST = true
4.  节省
5.  重启阿帕奇

# svn - 部署工作流程

> ID：13014186
> 
> 赞同：4
> 
> 时间：2012-10-22T15:02:14.653
> 
> 标签：svn, testing, deployment, integration-testing, lamp

我目前正在管理实时 Web 应用程序的开发。有两个开发者。我们正在寻求定义一个工作流来指定应该如何进行构建和部署。

我们目前正在使用 codebaseHQ 进行源代码控制。

这就是我的想法：

1.  Dev1 和 Dev 2 获取并提交更改到 CodeBaseHQ 上的单个存储库。
2.  我们将更新从 codebaseHQ 推送到与生产数据库分离的 alpha.domain.com，以进行初始测试。
3.  假设测试顺利，将更改合并到与生产数据库耦合的 beta.domain.com 上，以进行进一步测试。
4.  假设这些测试顺利，合并到 domain.com（生产）。

这听起来好吗？对于开发人员来说，这似乎是一个非常繁琐的过程——他们必须为每个变更集测试/推送两次。由于不经常更新，这似乎是可以忍受的，但如果我们每天都在推动更改，您会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:52:38.127

> 对于开发人员来说，这似乎是一个非常繁琐的过程——他们必须为每个变更集测试/推送两次。

听起来您没有太多的自动化来推动或测试。一旦你有了一些自动化测试，你就可以使用[Go](http://www.thoughtworks-studios.com/go-agile-release-management/download)之类的工具（完全公开：我在那里工作）来定义不同的环境并为工作流[建模](http://cd-with-thoughtworks-go.blogspot.in/2012/06/modeling-higher-order-workflows-with-go.html)，以便自动推送到不同的环境。您每天都在推动更改真是太好了，您可能会在持续交付[书中](http://martinfowler.com/delivery.html)找到很多相关的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:10:28.473

我真的很讨厌推广源代码以将功能推广到生产环境的想法。我非常喜欢通过环境推广构建（我想 Bagheera 也是，因为我们是竞争对手）。

获得一个“构建”，无论它是编译的还是只是一个包，并使用脚本或工具在环境中推广该包。

# c++ - std::ifstream::read 或 std::ofstream::write 参数为零？

> ID：13014192
> 
> 赞同：6
> 
> 时间：2012-10-22T15:02:31.613
> 
> 标签：c++, file, stream, zero, standards-compliance

调用是否完全可以（=根据标准定义明确的行为）：

```
mystream.read(buffer, 0); 
```

或者

```
mystream.write(buffer, 0); 
```

（当然不会读取或写入任何内容）。我想知道在调用这两个函数之一之前是否必须测试提供的大小是否为空。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T15:21:25.753

是的，行为是明确定义的：两个函数都将通过未格式化的输入/输出函数的动作（构造哨兵，如果设置了 eofbit，则设置失败位，必要时刷新绑定流），然后它们将进入此子句：

§27.7.2.3[istream.unformatted]/30

> 字符被提取和存储，直到发生以下任一情况：
> 
> — 存储 n 个字符；

§27.7.3.7[ostream.unformatted]/5

> 插入字符直到出现以下任一情况
> 
> — 插入 n 个字符；

在存储或提取任何内容之前，“存储/插入零个字符”为真。

查看实际实现，我`for (; gcount < n; ++gcount)` [在 libc++](http://llvm.org/svn/llvm-project/libcxx/trunk/include/istream)或`sgetn(buffer, n);` [stdlibc++](http://gcc.gnu.org/viewcvs/trunk/libstdc++-v3/include/bits/istream.tcc?view=markup)中看到了[等效循环](http://gcc.gnu.org/viewcvs/trunk/libstdc++-v3/include/bits/streambuf.tcc?view=markup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:33:48.213

另一个提取`27.7.2.3 Unformatted input functions/1`为我们提供了一个线索，即零大小的输入缓冲区是有效的情况：

> **以非零大小**的字符数组作为参数的未格式化输入函数还应在数组的第一个位置存储一个空字符（使用 charT()）。

# c - 奇怪的 C 语法 1["ABCDE"]？

> ID：13014193
> 
> 赞同：1
> 
> 时间：2012-10-22T15:02:36.920
> 
> 标签：c, pointers, operators

谁能帮我理解以下代码：

```
int d = 4;
printf(&d["Hay!Hello %c\n"], &4["BuddyWorld"]);           // Hello (some address in char)
printf(&d["Hay!Hello %c\n"], 4["BuddyWorld"]);            // Hello y
printf(&d["Hay!Hello %s\n"], 4["BuddyWorld"]);            // Segmentation fault
printf(&d["Hay!Hello %s\n"], &4["BuddyWorld"]);           // Hello yWorld

printf("d[Hay!Hello %s\n"], &4["BuddyWorld"]);      
/* warning: passing argument 1 of 'printf' makes pointer 
   from integer without a cast                           */ 
```

d[] 或 &d[] 运算符到底是什么？（d 是一个整数）为什么会`&4["BuddyWorld"]`产生`4[BuddyWorld]`不同的值？（分别为“W”和“y”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:05:36.450

When you write something like `a[i]`, it gets expanded into `*(a + i)`. (We say `a[i]` is *syntactic sugar* for `*(a + i)`).

Addition is commutative, so `"BuddyWorld"[4] = *("BuddyWorld" + 4) = *(4 + "BuddyWorld") = 4["BuddyWorld"]`, where `"BuddyWorld"` implicitly stands for its address in memory.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:04:33.383

C中的下标很奇怪。`a[b]`变成（加上指针`*(a + b)`得到的地址处的东西）。但是，因为，它也可以反过来（）。这就是正在发生的一切。特别是，“HelloWorld”实际上是一个指向存储字符串字符的字符数组的指针。`b``a``a + b == b + a``a[b] == b[a]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:05:05.230

`d["Hay!Hello %c\n"]`是一样的`"Hay!Hello %c\n"[d]`。

并且`&`运营商给出了指向内容的地址

# python - Tkinter 名称错误：窗口冻结

> ID：13014195
> 
> 赞同：1
> 
> 时间：2012-10-22T15:02:37.917
> 
> 标签：python, widget, tkinter, tk

我正在关注第 31 页和第 32 页上的教程[http://www.ittc.ku.edu/~niehaus/classes/448-s04/448-standard/tkinter-intro.pdf](http://www.ittc.ku.edu/~niehaus/classes/448-s04/448-standard/tkinter-intro.pdf)。

我得到两个窗口，一个带有确定和取消按钮以及两个输入框，另一个是空白的。当我单击“确定”或“取消”时，该窗口会消失，但另一个空白窗口会冻结，我什至无法关闭。关闭它的唯一方法是关闭命令提示符。

运行时出现以下错误。

```
first = string.atoi(self.e1.get())
NameError: global name 'string' is not defined 
```

如我的评论所示，我调整了 dialog2.py。tkSimpleDialog.py 根本没有改变（上面链接的第 31 页）

```
# File: dialog2.py

import tkSimpleDialog #added this
import os #added this
from Tkinter import * #added this

class MyDialog(tkSimpleDialog.Dialog):

    def body(self, master):

        Label(master, text="First:").grid(row=0)
        Label(master, text="Second:").grid(row=1)

        self.e1 = Entry(master)
        self.e2 = Entry(master)

        self.e1.grid(row=0, column=1)
        self.e2.grid(row=1, column=1)

        return self.e1 # initial focus

    def apply(self):
        first = string.atoi(self.e1.get())
        second = string.atoi(self.e2.get())
        print first, second # or something

root = Tk() #added this
d = MyDialog(root) #added this 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:04:26.437

您需要导入`string`模块。

尽管执行此操作的更好方法（无需导入字符串）是使用`int`内置函数。即更改为：

```
first = int(self.e1.get()) 
```

等等

我猜你正在阅读的参考手册是为一个非常旧版本的 python 创建的......

# php - 基于表单中的复选框修改数据库

> ID：13014197
> 
> 赞同：0
> 
> 时间：2012-10-22T15:02:42.007
> 
> 标签：php, mysql, sql, database

我有一张这样的桌子：

```
|id|name|ids| 
```

假设我的表现在看起来像这样，`ids`它们代表了其他表中的一些 id：

```
|1|test_name|66,980,123,33| 
```

我在表单中有一个复选框，所以当我有这个复选框时，`checked`我想在那一刻然后**才**将例如添加`88`到`ids`表格中，并且当复选框`unchecked`不添加任何东西时。

有任何想法吗？在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:15:11.543

所以听起来你想要做的是`AJAX`请求。每次用户单击`checkbox`您希望将其值`checkbox`添加到表中。

记得添加`jQuery`

**你可以这样做：**

```
$(document).ready(function () {
    $("checkboxId").click(function(){
    var $this = $(this);
    if($this.is(":checked")){
      var id=$this.attr('id');
      var VARIABLEname=$this.val();
      $.ajax({
            type:'POST',
            url:'PHP_POST_SCRIPT.php',
            data:'id= ' + id + '&VARIABLEname='+VARIABLEvalue
        });
     } 
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:13:41.323

这取决于您是否要这样做，无论是否提交表单，或者用户是否需要提交表单。后者要容易得多，而前者需要一些关于 AJAX 的阅读。

在后一种情况下，假设您的复选框已绑定到相关 ID，您可以将其验证为：

```
if (isset($_POST['checkbox_name']) and ($_POST['checkbox_name'])) 
```

如果这是真的，请将其添加到数据库中：

```
UPDATE `table` SET `ids` = CONTACT(`ids`, ',{$relevant_checkbox_id}') 
```

# c# - 在 Mac OS X 中使用 Mono C# 打开 Samba 服务器文件

> ID：13014198
> 
> 赞同：4
> 
> 时间：2012-10-22T15:02:43.673
> 
> 标签：c#, macos, networking, mono, samba

我们正在使用 Mono C# 编写一个服务（在 Mac 环境中运行），它将读取特定的 XML 文件并从 XML 文件中提到的路径打开该文件。文件路径可以是本地路径，也可以是 Windows FileServer 中的路径。`smb://`我们正在使用 Samba 共享 ( )在 Mac 上安装这些文件服务器。

我们使用该`Process.Start()`方法在 Mono 中打开文件。这种方法我们可以很好地处理本地文件，即桌面等位置，或者`/{user}/Documents/File.txt`我们无法从已安装的文件服务器打开文件。我们尝试以以下格式提供文件路径：

1.  `//{ServerName}/{SharedFolderName}/File.txt`
2.  `smb://{ServerName}/{SharedFolderName}/File.txt`
3.  `//Volumes/{SharedFolderName}/File.txt`

这些似乎都没有打开文件。如果你们中的任何人尝试过类似的事情，请告诉我。

# php - 使用 preg_match 的链接缩短器

> ID：13014206
> 
> 赞同：1
> 
> 时间：2012-10-22T15:03:03.177
> 
> 标签：php, regex

我的代码是：

```
if (!preg_match('^http(s)?://(*)?\.mysite.com(\*)^', $url))
{
  echo "<strong>Error</strong>: Invalid mysite.com link or could shorten link";
} 
```

我得到了：

```
Warning: preg_match() [function.preg-match]: 
  Compilation failed: nothing to repeat at offset 12 
```

我正在开发类似于**bit.ly**的链接缩短器，但我只希望它缩短来自我的特定站点的链接。

我需要一些帮助来解决这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:05:21.037

问题在这里：

```
if (!preg_match('^http(s)?://(*)?\.mysite.com(\*)^', $url))
                              ^ 
```

你已经使用了`*`量词，但你没有指定这个量词应该应用于什么。你可能想`.*`在那里代替 just `*`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T15:05:41.637

星号或星号告诉引擎尝试匹配前面的令牌零次或多次。

```
if (!preg_match('^http(s)?://(*)?\.mysite.com(\*)^', $url))
                              ↑
                       nothing to match 
```

我相信您的正则表达式模式包含多个错误。我建议你去

```
if (!preg_match('/^https?:\/\/(?:[a-z\d-]+\.)*mysite.com(?:(?=\/)|$)/i', $url)) 
```

# android - 索尼小应用 SDK

> ID：13014207
> 
> 赞同：3
> 
> 时间：2012-10-22T15:03:15.180
> 
> 标签：android, tablet, sony

所以我刚刚开始使用新的 Sony Xperia Tablet S Small App SDK。我不是真正的菜鸟，以前开发过许多个人应用程序，但这让我很困惑。

我已经在 Eclipse 中加载了示例项目（全部正确配置），整理了一些错误，编译到我的设备上，当我从设备底部的启动器启动小应用程序时，它强制关闭 - 它是与我尝试使用 SDK 制作的每个示例/应用程序相同。

我附在我的 MainApplication.java 和 AndroidManifest.xml 下面，希望有人能够看到问题所在。不明白，因为它是按照书中的内容创建的。任何帮助真的很感激。

MainApplication.java：

```
package com.sony.thirdtest;

import android.content.pm.ActivityInfo;
import android.content.res.Configuration;
import android.view.View;
import android.widget.Toast;
import com.small.sonyapptest.R;
import com.sony.smallapp.SmallAppWindow;
import com.sony.smallapp.SmallApplication;

public class MainApplication extends SmallApplication {
    private Configuration mConfig;

    @Override
    public void onCreate() {
        super.onCreate();
        mConfig = new Configuration(getResources().getConfiguration());

        setContentView(R.layout.activity_main);
        setTitle(R.string.app_name);

        SmallAppWindow.Attributes attr = getWindow().getAttributes();
        attr.minWidth = 200;
        attr.minHeight = 200;
        attr.width = 400;
        attr.height = 300;
        attr.flags |= SmallAppWindow.Attributes.FLAG_RESIZABLE;
        getWindow().setAttributes(attr);

        findViewById(R.id.button).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(MainApplication.this, R.string.hello, Toast.LENGTH_SHORT).show();
            }
        });
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public void onStart() {
        super.onStart();
    }

    @Override
    public void onStop() {
        super.onStop();
    }

    @Override
    protected boolean onSmallAppConfigurationChanged(Configuration newConfig) {
        int diff = newConfig.diff(mConfig);
        mConfig = new Configuration(getResources().getConfiguration());
        // Avoid application from restarting when orientation changed
        if ((diff & ActivityInfo.CONFIG_ORIENTATION) != 0) {
            return true;
        }
        return super.onSmallAppConfigurationChanged(newConfig);
    }
} 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
    package="com.small.sonyapptest" 
    android:versionCode="1" 
    android:versionName="1.0">
  <uses-sdk android:minSdkVersion="15" /> 

    <uses-permission android:name="com.sony.smallapp.permission.SMALLAPP" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">

        <uses-library android:name="com.sony.smallapp.framework" />

            <service 
                android:name="com.small.sonyapptest.MainApplication" 
                android:exported="true" >

            <intent-filter>

                <action android:name="com.sony.smallapp.intent.action.MAIN" />

                <category

                android:name="com.sony.smallapp.intent.category.LAUNCHER" />

                </intent-filter>

            </service>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:57:44.447

您的代码似乎没有任何问题。所以我认为问题在于你如何构建项目。更确切地说，小应用程序框架是如何包含在内的：它不应该包含！

如果您只是通过“Java 构建路径”->“添加外部 Jar”添加 jar（来自 Sony SDK），那么 api jar 的类将包含在应用程序中。问题是那些只是存根类，所以你可以得到两个可能的例外之一。

解决此问题的一种简单快捷的方法（仍然使用标准的 android sdk，而不是切换到 Sony SDK）如下：

*   创建一个 java 项目，并将其命名为“SmallAppApi”，例如
*   在 java 项目中通过“添加外部 jar”添加小应用程序 jar
*   在“Java 构建路径”屏幕的最后一个选项卡中，名为“订购和导出”，确保已导出小应用程序 jar。
*   在 android 项目中，在“Java 构建路径”屏幕中，在“项目”选项卡中只需添加 java 项目 SmallAppApi（并删除小应用程序 jar）。

通过此设置，小应用程序 jar 将仅在构建时使用。这对我来说很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:13:22.650

在服务标签中更改`android:name="com.small.sonyapptest.MainApplication"`为`android:name="MainApplication"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T14:39:56.203

感谢您的回复，在将服务标签更改为 MainApplication 后，现在一切正常。

# elasticsearch - 获取旧的索引弹性搜索数据

> ID：13014209
> 
> 赞同：2
> 
> 时间：2012-10-22T15:03:21.670
> 
> 标签：elasticsearch

我的弹性搜索中有很多数据被索引。

我删除了elasticsearch文件夹，然后再次提取了elasticsearch的新zip并启动了elasticsearch服务器。

我很惊讶，因为在盯着新的弹性搜索服务器后，我再次找到了所有旧数据，这个问题一次又一次地存在。

任何人都可以帮助我吗？我不想让所有旧数据都在 elasticsearch 中建立索引。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:11:59.677

鉴于集群健康响应，Igor 建议在同一集群上运行多个节点不是问题。我建议您检查正在运行的 java 进程。您可能会在某个地方挂着一个弹性搜索，它一直在该文件夹中写入。

# c# - SQLite 和列表通用 C#

> ID：13014210
> 
> 赞同：2
> 
> 时间：2012-10-22T15:03:24.650
> 
> 标签：c#, sqlite

我正在尝试使用 SQLite 为 Windows 8 转换一些旧代码。下面是上一个会话的有效代码。

```
using (SqliteConnection conn = new SqliteConnection("Version=3,uri=file://flashcards0904.db"))
        {
            conn.Open();
            using (SqliteCommand cmd = conn.CreateCommand())
            {
                cmd.CommandText = "SELECT * FROM Decks where DeckGroup='" + Global.currentDeckGroup.ToString() + Global.currentDeck.ToString() + "'" + "order by random()";

                List<string> myCollection = new List<string>();

                using (SqliteDataReader reader = cmd.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        myCollection.Add(reader.GetString(0) + "~" + reader.GetString(1) + "~" + reader.GetString(2));
                        Global.words = myCollection.ToArray();
                    }
                }
                conn.Close();
                Community.CsharpSqlite.FileStream.HandleTracker.Clear();
            }
        } 
```

现在，我无法访问 SqliteDataReader 并且我正在尝试使用 List<> 函数，但我无法让“Where”子句起作用。任何帮助，这是我当前的代码：

```
var root = Windows.Storage.ApplicationData.Current.LocalFolderPath;
var dbPath= Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolderPath,"flashcards0904.db");

using( var db= new SQLite.SQLiteConnection(dbPath))
{
// Here is location for the missing Where Clause"

    var list= db.Table<Decks>.Where??????? .ToList();

 } 
```

希望这能解释问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:05:00.390

```
var list= db.Table<Decks>.Where(n=>n.DeckGroup == (Global.currentDeckGroup.ToString() + Global.currentDeck.ToString())).ToList() 
```

我鼓励你看看：[http ://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

那里有大量示例可以帮助您掌握 LINQ to SQL。

Paolo Moretti 注意到您`order by random()`在之前的实现中使用过。如果您想在 LINQ 中执行此操作，您可以执行以下操作，如下所示：[Linq Orderby random ThreadSafe for use in ASP.NET](https://stackoverflow.com/questions/3339192/linq-orderby-random)

```
Random random = new Random();
int seed = random.Next();
var list= db.Table<Decks>.Where(n=>n.DeckGroup == (Global.currentDeckGroup.ToString() + Global.currentDeck.ToString())).OrderBy(s => (~(s.Shuffle & seed)) & (s.Shuffle | seed)).ToList(); // ^ seed); 
```

# javascript - 目标类名 - “对象不支持属性或方法”

> ID：13014213
> 
> 赞同：0
> 
> 时间：2012-10-22T15:03:30.443
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:15:19.000

如果是文本框，只需设置 cellTxt 的值。

```
cellTxt.value = Anything; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:24:31.337

getElementsByClassName() 不是 IE9 之前的 JavaScript 函数（[兼容性参考](http://www.quirksmode.org/dom/w3c_core.html#t11)）。

# mysql - Mysql替换函数返回null

> ID：13014217
> 
> 赞同：1
> 
> 时间：2012-10-22T15:03:52.650
> 
> 标签：mysql, database, string

我有一个表 activity_types 包含活动的文本，例如
`New project has been assigned to {user} with name {project}`
`New discussion has been posted by {client} on {project}`
`Project {project} has been closed by {user}`
`A draft has been approved by {client} on {project}`
等等

我有另一个表格，其中填充了这些文本的 id。

现在我的要求是通过将 {} 中的文本替换为其实际值来获取这些内容，例如 {client} 应替换为客户端名称，{project} 应替换为项目名称。

我曾尝试使用嵌套的替换 mysql 函数，但它返回空字符串。这是我的查询

```
SELECT      REPLACE(REPLACE(REPLACE(att.type_text, '{project}', p.project_business_name), '{user}', u.user_fullname), '{client}', c.client_name) AS activity, a.*
FROM        activities a
LEFT JOIN   activity_types AS att ON att.type_id = a.activity_type
LEFT JOIN   users u ON u.user_id = a.activity_user AND a.activity_user IS NOT NULL
LEFT JOIN   projects p ON p.project_id = a.activity_project AND p.project_is_removed = '0'
LEFT JOIN   clients c ON c.client_id = a.activity_client AND a.activity_client IS NOT NULL; 
```

问题是，如果我用静态文本替换 c.client_name 它可以正常工作，但是当我用 c.client_name 替换静态字符串时，它在没有 {client} 的活动中返回 null。任何猜测我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:06:57.470

尝试`COALESCE`在列上添加

```
...,COALESCE(c.client_name, ''), 
```

基本上如果 column ( `c.client_name`) 为*null*，它将被替换为*空字符串*。

发生的情况是，当字符串的一部分替换为 时`null`，整个字符串变为`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:07:54.727

SQL`null`具有传染性。一旦您在某处获得空值并在函数和派生值中使用该空值，整个结果就会变为空。因此，如果 REPLACE() 链中的任何字段为空，则整个结果将变为空。你可以尝试类似的东西

```
COALESCE(name_of_field, '')
or
IFNULL(name_of_field, '') 
```

将这些空值转换为空字符串。

# python - 如何通过 package_name.module_name.class_name "path" 实例化类

> ID：13014226
> 
> 赞同：1
> 
> 时间：2012-10-22T15:04:27.467
> 
> 标签：python, django, django-fixtures

我想实现一些类似于 django 夹具系统的东西，其中在夹具中设置`model`属性，该属性指示夹具的模型类。它看起来像这样

```
my_app.models.my_model 
```

我的问题是处理此类字符串以创建此“路径”指向的类的实例的标准方法是什么。我认为它应该看起来像：

1.  将其拆分为模块名称和类名称部分
2.  加载模块（如果未加载）
3.  按名称从模块中获取类
4.  实例化它

我应该怎么做？

编辑：我想出了一个肮脏的解决方案：

```
def _resolve_class(self, class_path):
    tokens = class_path.split('.')
    class_name = tokens[-1]
    module_name = '.'.join(tokens[:-1])
    exec "from %s import %s" % (module_name, class_name)
    class_obj = locals()[class_name]
    return class_obj 
```

它的工作是肮脏的，但是由于使用 exec 和通过恶意准备夹具来操纵执行的可能性。应该如何正确完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:56:30.117

我经常使用 django 的`import_module`函数，因为它是在框架周围使用的。

```
from django.utils.importlib import import_module

path = 'foo.bar.classname'
module_path, class_name = path.rsplit('.', 1)
module = import_module(module_path)
cls = getattr(module, class_name)()  # instantiated! 
```

至于`exec`在您的解决方案中，您可以通过在模块上使用轻松删除它`__import__`，然后获取类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:15:48.540

请注意，在函数中使用 exec 的危险在于它通常允许攻击者提供虚假值，这将导致您的函数“意外”执行攻击者想要的任何代码。在这里，您正在*直接*编写一个允许这样做的函数！使用 exec 并没有使情况变得更糟。唯一的区别是，如果没有 exec，他们必须弄清楚如何将他们的代码放入 python 导入路径上的文件中。

这并不意味着你不应该这样做。只要注意你在做什么。插件框架天生就有这个问题；使框架在运行时可扩展的全部意义在于，您希望任何可以配置插件的人都能够在您的程序中执行他们喜欢的任何代码。如果您的程序将在最终用户与配置插件的人不同的环境中使用，请确保您`_resolve_class`以相同的方式对待`exec`；不允许用户输入您直接传递给的字符串`_resolve_class`！

现在，除此之外，您可以`exec`很容易地避免使用。`__import__`Python 有一个用于获取导入机制的底层实现的内置函数。您可以使用它进行动态导入（`help(__import__)`足以让我弄清楚编写此答案的工作原理；如果您需要更多详细信息，还可以参考[文档）。](http://docs.python.org/library/functions.html#__import__)使用它，您的函数可能类似于：

```
def _resolve_class(self, class_path):
    modulepath, classname = class_path.rsplit('.', 1)
    module = __import__(modulepath, fromlist=[classname])
    return getattr(module, classname) 
```

（请注意，我还使用`rsplit`了最大数量的拆分，以避免必须拆分模块路径才能重新加入它）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:46:24.747

编辑：为什么不基本上做`loaddata`命令的作用？ [https://github.com/django/django/blob/master/django/core/management/commands/loaddata.py#L184](https://github.com/django/django/blob/master/django/core/management/commands/loaddata.py#L184) 使用django`deserialize`函数： [https ://docs.djangoproject.com/en/dev/topics/序列化/#deserializing-数据](https://docs.djangoproject.com/en/dev/topics/serialization/#deserializing-data)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:53:43.003

just copy the format used by the Django `json` serializer and write object creation code. It defines a list of dicts. Each dict contains a number of meta-data fields including `model` which contains the app name and model name and also a nested dict containing the model field data:

```
[
    {
        "pk": 1,
        "model": "app_name.model_name",
        "fields": {
            "default_value": "",
            "category": null,
            "position": 10,
            ...
        }
    },
    {
        "pk": 2,
        "model": "app_name.model_name",
        "fields": {
            ...
        }
    }
] 
```

so use `json.loads()` to get the data then iterate over the dicts and pull out the data

```
for obj_dict in json.loads(data):
    app_name, model_name = obj_dict.split('.')
    # some magic here to import your model
    my_model = magic_import_function(app_name, model_name)
    foo = my_model(*obj_dict["fields"])
    foo.save() 
```

# javascript - 根据请求解析 Twitter 和 Pinterest 社交按钮

> ID：13014234
> 
> 赞同：1
> 
> 时间：2012-10-22T15:04:47.567
> 
> 标签：javascript, twitter, pinterest

我有 Twitter 和 Pinterest 提供的用于在我的页面上发布或固定项目的代码。现在这运行有点慢，主要是因为有很多社交按钮要解析，所以我想我会在需要它们时这样做。

使用 Facebook 的 API，我可以这样做来解析特定的片段

```
FB.XFBML.parse($mysnippet); 
```

我怎样才能用 Pinterest 和 Twitter 按钮做同样的事情？我似乎找不到任何手动执行此操作的方法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:05:08.417

Twitter 有一个重解析函数：

```
twttr.widgets.load(); 
```

# mongodb - Yii mongodbsuite 两个及多个数据库连接

> ID：13014235
> 
> 赞同：1
> 
> 时间：2012-10-22T15:04:48.300
> 
> 标签：mongodb, yii

如何在 Yii mongodbsuite 中建立两个或多个数据库连接？

我在 main.php 中添加了 2 个 DB 组件：

```
'components' => array(

    'mongodb' => array(
        'class'             => 'common\extensions\MongoDB',
        'connectionString'  => 'mongodb://localhost:27017/table1',
        'dbName'            => 'table1',
        'fsyncFlag'         => false,
        'persistentConnection' => 'x',
        'replicaSet'        => false,
        'safeFlag'          => true,
        'useCursor'         => false,
    ),

    'mongodb2' => array(
        'class'             => 'common\extensions\MongoDB',
        'connectionString'  => 'mongodb://localhost:27017/table2',
        'dbName'            => 'table2',
        'fsyncFlag'         => false,
        'persistentConnection' => 'x',
        'replicaSet'        => false,
        'safeFlag'          => true,
        'useCursor'         => false,
    ),

) 
```

但是如何`mongodb2`在查询中使用（例如：->findByAttributes()）我不知道。`mongodb2`请使用上面的连接提供一些示例查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:32:59.547

我只是将 'mongodb2' => 数组添加到 'components' => 数组并添加到扩展 EMongoDocument 的模型（例如：用户）：

```
public function getMongoDBComponent() {return Yii::app()->mongodb2;} 
```

这是工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:38:23.040

看看[Yii 中的 Multiple db 支持](http://www.yiiframework.com/wiki/123/multiple-database-support-in-yii/)。

基本上你必须通过重写`getDbConnection()`方法来修改你的活动记录类。（在给定的链接中，您有一个使用中间继承层的更好示例）

# jquery - 使用 .next() 选择具有特定类的 div

> ID：13014246
> 
> 赞同：1
> 
> 时间：2012-10-22T15:05:08.013
> 
> 标签：jquery, css, html

我试图让一些 div 在鼠标悬停时可见，但我期望应该工作的代码不起作用。也许我错误地使用了 next() ？我在其他地方成功地使用了相同类型的东西，所以我有点不确定问题是什么。

**[小提琴。](http://jsfiddle.net/pN9ff/43/)**

代码：

* * *

```
$(".clause").mouseenter(function() {

    /* NOT WORKING */
    $(this).next("div.drawer-arrow").css("display","block");
    $(this).next("div.drawerBottom").css("display","block");

    $(".clause").css("border-bottom-right-radius", "0px");
    $(".clause").css("border-bottom-left-radius", "0px");

}).mouseleave(function(){

    /* NOT WORKING */
    $(this).next("div.drawer-arrow").css("display","none");
    $(this).next("div.drawerBottom").css("display","none");

    $(".clause").css("border-bottom-right-radius", "3px");
    $(".clause").css("border-bottom-left-radius", "3px"); 

});

$(".clause").click(function() {
    $(".clause").css("box-shadow", "none");

    /* WORKING */
    var tmp = $(this).next("div.drawer");
    if(tmp.is(":hidden")) {
        tmp.slideDown('2s');
        $(this).css("box-shadow", "0px 3px 5px #AAA");
    }
    else {
        tmp.slideUp('2s');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:09:27.333

使用 nextAll() 代替 next()。Next() 只需检查下一个元素，在您的情况下，该元素不属于您的目标类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:14:33.510

使用以下内容：

```
$(this).next().next('.drawer-arrow').css("display","block");
$(this).next().next().next('.drawerBottom').css("display","block"); 
```

extra`.next()`将选择`<div class="drawer">`元素，下一次将 get `drawer-arrow`，然后再次 get`drawerBottom`

**编辑：**

`.next()`与更改标记以对查询部分进行分组相比，多次删除元素可能不太理想。您可能会考虑重新构建标记，以便可以使用更简单的选择器：

```
<div class="queryGroup">
    <div class="clause">...</div>
    <div class="drawer">...</div>
    <div class="drawer-arrow"></div>
    <div class="drawerBottom"></div>
</div> 
```

该`.clause` `mouseenter`事件可能是这样的：

```
var $this = $(this); // cache this as a jQuery object

$this.nextAll('.drawer-arrow').show();
$this.nextAll('.drawerBottom').show();

... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:19:18.423

您可以使用 next all 并结合两个选择器 - .next() 仅查看直接位于当前元素之后的元素。.nextAll 将查找匹配选择器的当前元素之后的所有兄弟。

```
$(".clause").mouseenter(function() {    
    $(this).nextAll("div.drawer-arrow:first,div.drawerBottom:first").show();    
    $(".clause").css("border-bottom-right-radius", "0px")
                .css("border-bottom-left-radius", "0px");

}).mouseleave(function(){
    $(this).nextAll("div.drawer-arrow:first,div.drawerBottom:first").hide();    
    $(".clause").css("border-bottom-right-radius", "3px")
                .css("border-bottom-left-radius", "3px");     
}); 
```

[http://jsfiddle.net/wirey00/5dBsq/](http://jsfiddle.net/wirey00/5dBsq/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T15:19:48.390

尝试使用`.nextAll()`

```
$(this).nextAll('.drawer-arrow').first().css("display","block"); 
```

`.next()`只会选择与选择器匹配的元素。（否则它将返回一个空选择器）..

您可以将它与`.first()`它结合起来，它将获得第一个元素而不是该类的所有元素

在这种情况下，最好`.nextAll()`在您不知道当前元素和下一个元素之间的兄弟数量时使用。

# python - Python转换汉字字符

> ID：13014247
> 
> 赞同：2
> 
> 时间：2012-10-22T15:05:16.263
> 
> 标签：python, unicode, character-encoding, python-2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:07:40.633

引号前面的小“u”表示应该创建一个 Unicode 字符串。

```
>>> a = u'与'
>>> a
u'\u4e0e' 
```

有关详细信息，请参阅字符串文档：http: [//docs.python.org/tutorial/introduction.html#unicode-strings](http://docs.python.org/tutorial/introduction.html#unicode-strings)

**更新：** 根据文件的实际编码设置源文件编码，让解释器知道如何解析。

例如，要使用 UTF-8，只需将此字符串添加到文件头：

```
# -*- coding: utf8 -*- 
```

# c# - Compiler Error Message: CS0103: The name 'listBox1' does not exist in the current context

> ID：13014255
> 
> 赞同：0
> 
> 时间：2012-10-22T15:05:48.433
> 
> 标签：c#, asp.net, user-controls

I am getting the above error. The error is on line 33, it says.

Here's the code:

Source Error:

```
Line 31: 
Line 32: while(r.Read()) {
Line 33:     listBox1.Items.Add(new ListItem(r["first_name"], r["first_name"])); //this is the offending line
Line 34: }
Line 35: con.Close(); 
```

Now, I figured my ASP.NET was fine, I have the following code there:

```
<asp:ListBox ID="listBox1" runat="server">
</asp:ListBox> 
```

What might I be doing incorrectly here? I have the user control setup in the .aspx file, I have the correct item in my .aspx.cs file - it should work, shouldn't it? What am I missing? I'm still new to C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:08:21.337

如果您在 aspx 中创建了一个实例，那么您必须使用它的集合在实例`UserControl`中找到`ListBox`控件。`UserControl``Controls`

[这是 MSDN 上的链接。](http://msdn.microsoft.com/en-us/library/system.web.ui.control.controls.aspx)

另一种选择是将您的个人控制处理程序放在`UserControl`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:28:39.510

您的 listBox1 控件是否存在于您的 Designer.cs 文件中？如果没有，请通过删除它、右键单击 aspx 文件并单击“转换为 Web 应用程序”来重新生成自动生成的 C# 文件。

# asp.net - 如何缓冲动作的响应？

> ID：13014261
> 
> 赞同：0
> 
> 时间：2012-10-22T15:06:01.170
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, httpresponse

如何在不等待所有渲染过程完成的情况下发送部分 Web 响应？我更喜欢在动作中这样做。

我曾经`Response.Buffer = false;`在 .net 2.0 中使用，但现在使用 MVC 3 我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:54:39.527

您可以使用 Action Filter 来设置 Buffer 属性。

```
public class BufferActionFilter: ActionFilterAttribute
{
          public override void OnActionExecuting(ActionExecutingContext filterContext)
          {
               filterContext.HttpContext.Response.Buffer = true;       
          }
} 
```

PS：我还没有检查这是否有效。

# mysql - CREATE SCHEMA IN MYSQL

> ID：13014266
> 
> 赞同：2
> 
> 时间：2012-10-22T15:06:24.253
> 
> 标签：mysql, database, schema

I have used the Create Schema in mySQL. But it act as a separate database. It doesn't affect the already created Databaase. How to create Schema in mySQL within an particular database in mySQL and need to group the tables within a schema.?

Can anyone know about this pls...??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:09:08.257

我相信从最近的经验和快速谷歌上的主题来看，Schema 是 MySQL 中的数据库，与其他两者不同的数据库不同。请参阅以下链接：

[MySQL 'create schema' 和 'create database' - 有什么区别吗](https://stackoverflow.com/questions/1219711/mysql-create-schema-and-create-database-is-there-any-difference)

[http://lists.mysql.com/mysql/211616](http://lists.mysql.com/mysql/211616)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:09:18.620

您可以使用[CREATE SCHEMA/CREATE DATABASE](http://dev.mysql.com/doc/refman/5.5/en/create-database.html)和[USE dbname](http://dev.mysql.com/doc/refman/5.5/en/use.html)。

# twitter-bootstrap - Execute a function after the source of Twitter bootstrap typeahead is loaded

> ID：13014268
> 
> 赞同：1
> 
> 时间：2012-10-22T15:06:48.203
> 
> 标签：twitter-bootstrap, typeahead, bootstrap-typeahead

I'm actually using the plugin Typeahead from Twitter bootstrap and I would like to add a new row after the data from my server are loaded.

```
$('.typeahead').typeahead({
    source: function (query, process) {
        return $.get('/typeahead.json', { q: query }, function (data) {
            return process(data);
        });
    }
}); 
```

Once the data are loaded I would like to add a new row with the query at the end of the dropdown.

What is the trick to do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T07:06:19.590

您必须对以下代码进行一些修改 -

```
// try using id instead of class  
//like id="#MyTypeahead"

var autocomplete = $('#MyTypeahead').typeahead();  
var srcArray = new Array();

// You should assign ur updated source here.  
srcArray = ["Value1","Value2","Value3","Value4","Value5"];  

srcArray.push("New line goes here");
autocomplete.data('typeahead').source = JSON.parse(srcArray); 
```

现在您的预输入源看起来像这样-
["Value1","Value2","Value3","Value4","Value5","New line goes here"]

# c++ - C ++，用户输入检查'\ 0'在空格处停止吗？

> ID：13014272
> 
> 赞同：2
> 
> 时间：2012-10-22T15:06:57.113
> 
> 标签：c++, console-application

如果用户输入一个包含空格的句子，while 循环将在这些空格之一处停止。为什么会这样？'\0' 和空格是一样的还是我做错了什么？

```
int main ( )
{
    char user_input[200];
    cin>>user_input;
    int i=0;
    while(user_input[i]!='\0')
    {
        i++;
    }
    cout<<i;
    return 1;

} 
```

谢谢大家，我很感激你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T15:09:09.900

`\0`是带有 ASCII 码的空终止字符`0`。我想空格是另一个带有 ASCII 32 的字符。事实上，你正在这样做。

```
cin >> user_input; 
```

它需要输入，直到您按空格或输入。所以你的`user_input`字符串中没有空格。使用它而不是`cin`.

```
cin.getline (user_input, 200, '\0') ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T15:09:16.430

这是使用`>>`char 数组读取的问题。标记时它在空白处分裂。尝试打印`user_input`到屏幕以确认这一点。

在这种情况下，使用`getline`into a`std::string`通常更安全（如 daknøk 所述）。我假设输入可能会被回车终止？

```
std::string user_input;
std::getline( std::cin, user_input, '\n' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:12:39.507

这是因为输入空格时您的输入停止读取。您可以使用

`cin.unsetf(ios::skipws)`

默认情况下，它设置为跳过空格。有了这个，你会得到你想要的结果。

# php - 有没有办法将变量“注入”到 php 中的方法中？

> ID：13014275
> 
> 赞同：0
> 
> 时间：2012-10-22T15:07:08.073
> 
> 标签：php, code-injection

```
Class Foo {
   public function bar() {
     echo $a;
   }
}

$foo = new Foo();
$b = "Hello world";
/* here inject somehow $b into $foo->bar() */
$foo->bar(); //prints "Hello world"
$b = "I <3 php!";
$foo->bar(); //keeps printing "Hello world" 
```

有没有办法在 php 中做类似的事情而不将变量 $b 作为参数传递给方法 bar() 或类构造函数？我也不想使用全局变量。

**编辑1：** 谁在问我为什么要做如此奇怪的事情：做这样的事情对我来说会很好......

```
class Controller {
   /**
   * @post(name="address", type="email", required="true")
   */
   public function foo() {
       do_something_with($address);
       //$address is equal to $_POST['address'] and have been checked
   }
} 
```

**编辑 2：** 我不是在寻找如何在 php 中实现注释。应该已经有注释实现了。鉴于我知道如何声明自己的注释，我想知道是否可以“神奇地”在方法中声明和初始化变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:41:57.727

[好吧，您可能会为 PHP 的反射](http://php.net/manual/en/book.reflection.php)机制而发疯。*在*你的方法中获取当前类的文档注释，然后尝试访问同名的全局变量，沿着这条线：[`ReflectionClass::getDocComment()`](http://www.php.net/manual/en/reflectionclass.getdoccomment.php)

 *```
/**
 * Use `$a`
 */
Class Foo {
   public function bar() {
     $rc = new ReflectionClass('Foo');
     $docstr = $rc->getDocComment();
     // here we extract the value "a" from above's comment "Use `$a`":
     $varname = preg_replace('/.*`\$([a-z_]+)`.*/s', '$1', $docstr);
     global $$varname;
     echo $$varname;
   }
}

$a = 'Hi there';
$cls = new Foo();
$cls->bar(); // echos "Hi there" 
```

但坦率地说，这看起来弊大于利，恕我直言，您应该重新考虑最初的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:10:22.603

**不**，没有。即使有可能，您所要求的也是应该避免的严重反模式。它只是让我想起了超全球。

您可以使用的最接近的有用的方法是使用**单例模式**来创建存储变量的“注册表”对象。但是，建议使用[依赖注入](http://fabien.potencier.org/article/11/what-is-dependency-injection)来传递依赖对象

然后，您可以使用变量“加载”您的注册表单例，然后获取对象内部的实例以访问您需要的内容。

## 使用单例注册表类

[对于单例注册表如何工作的](http://codepad.org/CShVYMuM)一个非常简单的示例：

```
<?php
class Registry
{
    private static $items = array();
    private static $instance;

    private function __construct(){}
    private function __clone(){}

    public static function getInstance()
    {
        if( !isset( self::$instance ) )
        {
            self::$instance = new Registry();
        }
        return self::$instance;
    }    

    public function __set( $key, $item )
    {
        self::$items[ $key ] = $item;
    }

    public function __get( $key )
    {
        if( isset ( self::$items[ $key ] ) )
        {
            return self::$items[ $key ];
        }
    }

    public function getAll()
    {
        return self::$items;
    }
}
?> 
```

然后您可以加载您的注册表...并以类似的方式访问这些项目。

```
<?php

$registry = Registry::getInstance();
$registry->foo = "bar"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:09:31.867

不，那里没有。您需要通过常规渠道传递价值。

[（当然，总是有或多或少涉及的方式来破解运行时并覆盖内存中的值，但这不是您想要作为常规 PHP 脚本的一部分的事情。）]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T15:09:59.353

您几乎排除了访问类外变量的所有可能性。

那么答案是否定的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T15:34:01.140

不适用于标量，但它适用于对象和数组。

```
class Foo {

    protected $arr;
    public function __construct(&$arr) {
        $this->arr =& $arr;
    }

    public function bar()
    {
        echo $this->arr[0] . "\n";
    }
}

$var = array(0 => 'test');
$foo = new Foo($var);

$foo->bar(); // test

$var[0] = 'test2';
$foo->bar(); // test2 
```

这不是通常使用的好模式。我唯一一次使用它是用一个对象替换对`$_SESSION`变量的依赖（在一个非常旧的系统中，请不要杀了我）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-22T15:15:15.440

**编辑：**恭喜，批评者：我的回答不是 OP 的意图。

您要问的是OO的基本部分。您希望在对象中封装数据。对象的目的不是成为功能停车场。对象也应该包含数据。

所以使用二传手：

```
Class Foo {

    private $a;

    //no construction needed, if you don't want to set values there
    //or...if you do:
    public function __construct(){  // no variables passed to constructor
        $this->a = $_POST['a'];     // variable initialized anyway!
    }

    public function set_a($a){
        $this->a = $a;
    }
    public function bar() {
        echo $this->a;
    }
} 
```

接着：

```
$foo = new Foo();
$foo->bar();  // prints that post value
$foo->set_a("Hello World");
$foo->bar();  // prints Hello World. 
```*

# performance - 为什么这个计数查询这么慢？

> ID：13014277
> 
> 赞同：3
> 
> 时间：2012-10-22T15:07:13.030
> 
> 标签：performance, postgresql

嗨，我托管在 Heroku 上，在他们的 Ika 计划（7,5gb ram）上运行 postgresql 9.1.6。我有一张叫汽车的桌子。我需要执行以下操作：

```
SELECT COUNT(*) FROM "cars" WHERE "cars"."reference_id" = 'toyota_hilux' 
```

现在这需要很长时间（64 秒！！！）

```
Aggregate  (cost=2849.52..2849.52 rows=1 width=0) (actual time=63388.390..63388.391 rows=1 loops=1)
  ->  Bitmap Heap Scan on cars  (cost=24.76..2848.78 rows=1464 width=0) (actual time=1169.581..63387.361 rows=739 loops=1)
        Recheck Cond: ((reference_id)::text = 'toyota_hilux'::text)
        ->  Bitmap Index Scan on index_cars_on_reference_id  (cost=0.00..24.69 rows=1464 width=0) (actual time=547.530..547.530 rows=832 loops=1)
              Index Cond: ((reference_id)::text = 'toyota_hilux'::text)
Total runtime: 64112.412 ms 
```

一点背景：

该表包含大约 3.2m 行，我试图依靠的列具有以下设置：

```
reference_id character varying(50); 
```

和索引：

```
CREATE INDEX index_cars_on_reference_id
  ON cars
  USING btree
  (reference_id COLLATE pg_catalog."default" ); 
```

我究竟做错了什么？我希望这种表现不是我应该期待的——或者我应该期待吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:10:24.473

@Satya[在他的评论](https://stackoverflow.com/questions/13014277/why-is-this-count-query-so-slow/13015401#comment17661040_13014277)中声称的并不完全正确。在存在匹配索引的情况下，如果表统计信息表明它会返回超过大约 5%（取决于）表，则计划程序仅选择全表扫描，因为这样扫描整个表会更快。

正如您从自己的问题中看到的那样，您的查询并非如此。它使用*Bitmap Index Scan*后跟*Bitmap Heap Scan*。虽然我本来期望一个普通的索引扫描。（？）

我在您的解释输出中注意到另外两件事：
第一次扫描找到 832 行，而第二次将计数减少到 739。这表明您的索引中有许多死元组。

检查每个步骤后的执行时间，`EXPLAIN ANALYZE`并可能将结果添加到您的问题中：

首先，使用 EXPLAIN ANALYZE 重新运行查询两到三次以填充缓存。与第一次相比，最后一次运行的结果是什么？

下一个：

```
VACUUM ANALYZE cars; 
```

重新运行。

如果你在表上有很多写操作，我会设置一个低于 100 的填充因子。比如：

```
ALTER TABLE cars SET (fillfactor=90); 
```

如果您的行大小很大或者您有*很多*写操作，请降低。然后：

```
VACUUM FULL ANALYZE cars; 
```

这需要一段时间。重新运行。

*或者*，如果您有能力这样做（并且其他重要查询没有相互矛盾的要求）：

```
CLUSTER cars USING index_cars_on_reference_id; 
```

这会按照索引的物理顺序重写表，这应该会使这种查询*更快*。

* * *

### 规范化架构

如果您需要非常快，请创建一个`car_type`带有`serial`主键的表并从表中引用它`cars`。这会将必要的索引缩小到现在的一小部分。

不用说，在您尝试任何这些之前先进行*备份。*

```
CREATE temp TABLE car_type (
   car_type_id serial PRIMARY KEY
 , car_type text
 );

INSERT INTO car_type (car_type)
SELECT DISTINCT car_type_id FROM cars ORDER BY car_type_id;

ANALYZE car_type;

CREATE UNIQUE INDEX car_type_uni_idx ON car_type (car_type); -- unique types

ALTER TABLE cars RENAME COLUMN car_type_id TO car_type; -- rename old col
ALTER TABLE cars ADD COLUMN car_type_id int; -- add new int col

UPDATE cars c
SET car_type_id = ct.car_type_id
FROM car_type ct
WHERE ct.car_type = c.car_type;

ALTER TABLE cars DROP COLUMN car_type; -- drop old varchar col

CREATE INDEX cars_car_type_id_idx ON cars (car_type_id);    

ALTER TABLE cars 
ADD CONSTRAINT cars_car_type_id_fkey FOREIGN KEY (car_type_id )
REFERENCES car_type (car_type_id) ON UPDATE CASCADE; -- add fk

VACUUM FULL ANALYZE cars; 
```

或者，如果你想全力以赴：

```
CLUSTER cars USING cars_car_type_id_idx; 
```

您的查询现在看起来像这样：

```
SELECT count(*)
FROM   cars
WHERE  car_type_id = (SELECT car_type_id FROM car_type
                      WHERE car_type = 'toyota_hilux') 
```

并且应该更快。主要是因为现在index和table变小了，也因为`integer`handling比`varchar`handling快。但是，与列上的聚簇表相比，增益不会显着`varchar`。

一个受欢迎的副作用：如果你必须重命名一个类型，它`UPDATE`现在只有一行，根本不会弄乱大表。

# php - 是否可以检索短代码中的属性顺序？（WordPress）

> ID：13014278
> 
> 赞同：0
> 
> 时间：2012-10-22T15:07:12.737
> 
> 标签：php, wordpress, shortcode

如果我有这样的简码：

`[shortcode att1="true" att2="true"]`

有什么方法可以确定哪个属性（att1 或 att2）先出现？因此，如果短代码看起来像这样，它将给出与第一个示例不同的输出：

`[shortcode att2="true" att1="true"]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:21:19.540

我没有对此进行测试，我猜这取决于 Shortcode API 如何在内部处理参数，但只要将简码按照解析简码时遇到的顺序添加到数组中，您就可以检查顺序提供给您的短代码处理程序回调的 atteibutes 数组中的参数。像这样的东西可能会起作用：

```
// [bartag foo="foo-value" bar="bar-value"]
function bartag_func( $atts ) {

    $first_param = null;
    // Loop through $atts to check which parameter comes first
    foreach ($atts as $att_key => $att_value) {
        switch ($att_key) {
            case 'foo':
            case 'bar':
                $first_param = $att_key;
                break 2;
        }
    }

    // Perform filtering/modifying content, settings defaults etc. according to parameter order
    if ($first_param == 'foo') {
        // foo came first
    } else if ($first_param != null) {
        // bar came first
    }

    // Supply defaults and extract parameters 
    extract( shortcode_atts( array(
        'foo' => 'something',
        'bar' => 'something else',
    ), $atts ) );

    // Return accordingly
    return "foo = {$foo}";
}
add_shortcode( 'bartag', 'bartag_func' ); 
```

**编辑**：在实现这样的功能之前，我会尝试真正考虑清楚，因为它可能会让用户感到有些困惑，除非它清楚地表明参数顺序确实很重要。

# timer - 一次运行多个函数

> ID：13014281
> 
> 赞同：-1
> 
> 时间：2012-10-22T15:07:31.310
> 
> 标签：timer, autoit

[目标是为英雄联盟](https://en.wikipedia.org/wiki/League_of_Legends)创建计时器。它有丛林营地；每个人在杀死它后都会重生。

为此，我想同时为多个计时器激活相同的功能。如果我同时杀死蓝色buff和狼，我想要它们的计时器（单击蓝色魔像的按钮让我的狼获得相同的计时器）。

我没有实现狼按钮，但有一个开始按钮。单击蓝色按钮启动我的计时器，但随后单击开始游戏按钮将其排入队列，直到第一个计时器结束。

我查看[了 wiki 页面](http://www.autoitscript.com/wiki/Interrupting_a_running_function)。但我不想停止正在运行的计时器；我想同时运行另一个。是否存在编码错误、更好的做事方式等？这是我的代码：

```
#include <GUIConstantsEx.au3>
#include <ButtonConstants.au3>
#include <Timers.au3>

;==> Set our $font variable
Global $font
$font = "Arial Black"

;==> Create our Graphic User Interface
Opt("GUIOnEventMode", 1) ; Change to OnEvent mode
$mainwindow = GUICreate("Jungle Timers Deluxe", 200, 400)
GUISetOnEvent($GUI_EVENT_CLOSE, "CLOSEClicked")
$startbutton = GUICtrlCreateButton("Start Game", 50, 10, 70)
$ybluebuff = GUICtrlCreateButton("Ancient Golem (Blue)", 10, 40, 50, 50, $BS_MULTILINE)
$yredbuff = GUICtrlCreateButton("Lizard Elder (Red)", 10, 110, 50, 50, $BS_MULTILINE)
$ywraiths = GUICtrlCreateButton("Lizard Elder (Red)", 10, 180, 50, 50, $BS_MULTILINE)
$ywolves = GUICtrlCreateButton("Lizard Elder (Red)", 10, 250, 50, 50, $BS_MULTILINE)
$ydgolems = GUICtrlCreateButton("Lizard Elder (Red)", 10, 320, 50, 50, $BS_MULTILINE)
$ebluebuff = GUICtrlCreateButton("Ancient Golem (Blue)", 100, 40, 50, 50,     $BS_MULTILINE)
$eredbuff = GUICtrlCreateButton("Lizard Elder (Red)", 100, 110, 50, 50, $BS_MULTILINE)
$ewraiths = GUICtrlCreateButton("Lizard Elder (Red)", 100, 180, 50, 50, $BS_MULTILINE)
$ewolves = GUICtrlCreateButton("Lizard Elder (Red)", 100, 250, 50, 50, $BS_MULTILINE)
$edgolems = GUICtrlCreateButton("Lizard Elder (Red)", 100, 320, 50, 50, $BS_MULTILINE)
;==> Create our events
GUICtrlSetOnEvent($startbutton, "StartGame")
GUICtrlSetOnEvent($ybluebuff, "yBlueBuff")
;==> Display our Graphic User Interface.
GUISetState(@SW_SHOW)
While 1
Sleep(1000) ; Idle around
WEnd
Func yBlueBuff()
Dim $bluetimer = 10
$i = 1
$ybb = GUICtrlCreateLabel("Your Blue Buff:", 10, 40)
GUICtrlDelete($ybluebuff)
$ybblabel = GUICtrlCreateLabel($i, 15, 60, 50, 40)
While $i <= $bluetimer
    GUICtrlDelete($ybblabel)
    If $i >= 5 Then
        $ybblabel = GUICtrlCreateLabel($i, 15, 60, 50, 40)
        GUICtrlSetFont(-1, 22, 500, $font)
        GUICtrlSetBkColor($ybblabel, 0xFFCCCC)
        $i = $i + 1
    ElseIf $i < 5 Then
        $ybblabel = GUICtrlCreateLabel($i, 15, 60, 50, 40)
        GUICtrlSetFont(-1, 22, 500, $font)
        $i = $i + 1
    EndIf
    Sleep(1000)
WEnd
GUICtrlDelete($ybblabel)
GUICtrlDelete($ybb)
$ybluebuff = GUICtrlCreateButton("Ancient Golem (Blue)", 10, 40, 50, 50, $BS_MULTILINE)
EndFunc   ;==>yBlueBuff

Func StartGame()
    ; Activate your League Window
    WinActivate("[CLASS:Notepad]")

    ; Wait for the Notepad become active - it is titled "Untitled - Notepad" on English systems
    WinWaitActive("[CLASS:Notepad]")

    ; Now that the Notepad window is active type some text
    Send("{ENTER}Baron spawns in 15, Dragon spawns at 2:30{ENTER}")
    Sleep(500)
    Send("{ENTER}Wraiths/Wolves/Double Golems spawn at 1:40\. Red & Blue spawn at 1:55{ENTER}")
    Sleep(500)

EndFunc   ;==>StartGame

Func CLOSEClicked()
    ;Note: at this point @GUI_CTRLID would equal $GUI_EVENT_CLOSE,
    ;and @GUI_WINHANDLE would equal $mainwindow
    MsgBox(0, "GUI Event", "Thanks for using Jungle Timers Deluxe!")
    Exit
EndFunc   ;==>CLOSEClicked

; Finished! 
```

我根据[记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)示例教程构建了它并使用记事本，因为它更易于调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-04T20:09:17.640

**AutoIt**不支持同时运行两个函数，也称为多线程。

这是他们的解释： [AutoItNotOnToDoList](https://www.autoitscript.com/trac/autoit/wiki/AutoItNotOnToDoList)

为了使您的程序正常工作，您必须能够不断地监视按钮是否被按下，同时执行按钮调用的功能。

虽然它在技术上不是多线程，但解决此问题的方法是同时运行多个脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T23:04:39.867

> 有没有......更好的做事方式等？

演示多个计时器（和响应式 GUI）的示例：

```
#include <GUIConstantsEx.au3>; $GUI_EVENT_CLOSE
#include <Timers.au3>

Global Enum  $TMR_NAME, _
             $TMR_TIME, _
             $TMR_STAMP, _
             $TMR_STATE, _
             $TMR_PROGR, _
             $TMR_BTN, _
             $TMR__ENUM

Global       $g_aTimer[3][$TMR__ENUM]

             $g_aTimer[0][$TMR_NAME] = 'Timer A'
             $g_aTimer[0][$TMR_TIME] = 60
             $g_aTimer[1][$TMR_NAME] = 'Timer B'
             $g_aTimer[1][$TMR_TIME] = 30
             $g_aTimer[2][$TMR_NAME] = 'Timer C'
             $g_aTimer[2][$TMR_TIME] = 10

Main()

Func Main()
    Local $iMsg = 0
    Local $hGui

    GuiMain($hGui, 400, 25)

    While True

        $iMsg = GUIGetMsg()

        Switch $iMsg

            Case $GUI_EVENT_CLOSE
                ExitLoop

            Case Else
                ButtonCheck($iMsg)

        EndSwitch

        TimerUpdate()

    WEnd

    GUIDelete($hGui)
    Exit
EndFunc

Func GuiMain(ByRef $hGui, Const $iWidth, Const $iHeightTimer)
    Local Const $iAmount = UBound($g_aTimer)

    $hGui = GUICreate(@ScriptName, $iWidth, $iHeightTimer * 2 * $iAmount)

    For $i1 = 0 To $iAmount - 1

        $g_aTimer[$i1][$TMR_BTN]   = GUICtrlCreateButton($g_aTimer[$i1][$TMR_NAME], 0, $i1 * ($iHeightTimer * 2), $iWidth / 2, $iHeightTimer)
        $g_aTimer[$i1][$TMR_PROGR] = GUICtrlCreateProgress(0, $iHeightTimer + $i1 * ($iHeightTimer * 2), $iWidth, $iHeightTimer)

    Next

    GUISetState(@SW_SHOW, $hGui)

EndFunc

Func ButtonCheck(Const $iMsg)

    For $i1 = 0 To UBound($g_aTimer) - 1

        If $iMsg = $g_aTimer[$i1][$TMR_BTN] Then

            $g_aTimer[$i1][$TMR_STATE] = True
            $g_aTimer[$i1][$TMR_STAMP] = _Timer_Init()

            ExitLoop

        EndIf

    Next

EndFunc

Func TimerUpdate()
    Local $nDiff

    For $i1 = 0 To UBound($g_aTimer) - 1

        If Not $g_aTimer[$i1][$TMR_STATE] Then ContinueLoop
        $nDiff = _Timer_Diff($g_aTimer[$i1][$TMR_STAMP]) / ($g_aTimer[$i1][$TMR_TIME] * 1000) * 100

        If $nDiff > 100 Then

            $nDiff                     = 100
            $g_aTimer[$i1][$TMR_STATE] = False

        EndIf

        GUICtrlSetData($g_aTimer[$i1][$TMR_PROGR], $nDiff)

    Next

EndFunc 
```

# c++ - 模板类 c 中的析构函数：如何删除可能是指针或不是指针的字段？

> ID：13014286
> 
> 赞同：3
> 
> 时间：2012-10-22T15:07:33.303
> 
> 标签：c++, templates, destructor

我有模板类`Array`，其中模板类型`T`应该是指针或非指针类型。

```
template<class T>
class TArray
{   
     static const int max_len=100;
     T* data;
     int length;

  public:
     TArray(){data=new T[max_len]; this->length=0;} 
     void Add(T value){data[length++]=value;}   
     ~TArray();
}; 
```

问题是如何释放空间，因为我们不能`delete`像这样调用非指针类型

```
template<class T>
TArray<T>::~TArray()
{
    //for(int i =0; i < length; i++)
    //  delete data[i]; // NOT WORKING WITH OBJECTS THAT ARE NOT POINTERS !!!
    delete[] data;
} 
```

让我们加课

```
class A
{
    int* a;
  public:
    A(int n){a = new int[n];}
    ~A(){delete[] a;}
}; 
```

并制作模板类的两个实例

```
// Create array of doubles
TArray<double>* double_array = new TArray<double>();
delete double_array;

// Create array of pointers to class A
TArray<A*>* A_array = new TArray<A*>();
A* a = new A(5);
A_array->Add(a);
delete A_array; 
```

当我为类调用析构函数时，`TArray<A*>`我需要为类调用析构函数，`A`但我不知道如何，因为如果我们制作例如双精度数组，析构函数中的注释代码不会编译（C2541）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:09:23.177

在析构函数内部，您只能使用`std::is_pointer`数据`delete[]`。

首选的替代方法是不要自己管理内存（使用`std::vector`或智能指针）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T15:09:57.747

您可以为您的模板开发两个版本。首先，写普通版`template<class T>`。然后，编写第二个仅指针版本，通过像这样声明它来**专门化您的模板：**

```
template<class T>
class TArray<T*> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T15:08:54.980

如果用`std::unique_ptr`or替换原始指针`std::shared_ptr`，问题就会消失。

（如果这不是您想要的，那么请三思而后行，是否`TArray`应该管理它。谁会保证存储在 a 中的指针`TArray<T*>`已经被分配了`new`？这个问题没有[RAII](https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)解决方案。）

# c# - Visio 互操作问题

> ID：13014290
> 
> 赞同：1
> 
> 时间：2012-10-22T15:07:50.863
> 
> 标签：c#, interop

我编写了一个控制台应用程序，它使用 UDC（通用文档转换器）将 visio 图表转换为图像（更具体地说是 jpeg）。

一切正常（对于 2007 年和 2010 年的 visio 文件），我使用的是 Microsoft.Office.Interop.Visio 版本 14.0.0.0。我想我会通过在 Visio 2003 中创建一个 visio 图表并测试应用程序来进行测试。它工作正常，但是，我收到以下弹出窗口“必须更新此绘图中的 Microsoft Visio 构建计划形状才能在当前版本的 Visio 中运行”。如果我单击“是”，则程序可以正常工作。这段代码最终将作为服务运行，我想知道是否有办法抑制这些警告？或者告诉它自动进行任何转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:25:41.937

We seem to have found the answer (trying nearly every property on the Visio.Application class!):

```
vApp = new Microsoft.Office.Interop.Visio.Application();                
                vApp.Visible = false;
                vApp.Settings.ShowFileOpenWarnings = false;
                vApp.EventsEnabled = 0; 
```

It seems the EventsEnabled = 0 did the trick!

Hope this may be useful to someone eventually.. I spent about 4 hours on it :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T11:57:29.570

您可以设置 vApp.AlertResponse = vbYes，这会抑制对话框并为您选择 Yes。

# python - 使用 numpy 翻译网格化 csv 文件

> ID：13014297
> 
> 赞同：1
> 
> 时间：2012-10-22T15:08:18.493
> 
> 标签：python, parsing, numpy

我需要将一些气象数据存入 MySQL 数据库。File`inputFile.csv`是一个以逗号分隔的值列表。每行有 241 行和 481 个值。每条线映射到某个纬度，每个值在该线中的位置映射到某个经度。

还有两个具有相同结构的附加文件，`lat.csv`以及`lon.csv`. 这些文件包含`inputFile.csv`映射中的值的坐标。

因此，要找到 中的值的纬度和经度`inputFile.csv`，我们需要参考 和 中同一行/位置（或行/列）的`lat.csv`值`lon.csv`

我想`inputFile.csv`使用`lat.csv`和翻译，`lon.csv`这样我的输出文件包含*值*列表（来自`inputFile.csv`）、*纬度*和*经度*。

这是一个小的视觉示例：

```
 inputFile.csv
    3,5,1,4,5
    1,4,1,2,5
    5,7,3,8,0

    lat.csv
    22,31,51,21,52
    55,21,24,66,12
    11,23,12,55,55

    lon.csv
    12,35,12,52,11
    35,11,25,33,42
    62,53,45,25,54

    output:
    val lat lon
    3   22  12
    5   31  35
    1   51  12
    4   21  52
    5   52  11 
    1   55  35
    4   21  11
    1   24  25  
    2   66  33
    etc 
```

在 python/numpy 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:15:12.240

我想既然你知道你想要的数组的总大小，你可以预先分配它：

```
a = np.empty((241*481,3)) 
```

现在您可以添加数据：

```
for i,fname in enumerate(('inputFile.csv','lat.csv','lon.csv')):
    with open(fname) as f:
        data = np.fromfile(f,sep=',')
        a[:,i] = data.ravel() 
```

* * *

如果您不知道前面的元素数量，您可以生成一个二维列表（列表`np.ndarrays`）：

```
alist = []
for fname in ('inputFile.csv','lat.csv','lon.csv'):
    with open(fname) as f:
        data = np.fromfile(f,sep=',')
        alist.append( data.ravel() )
a = np.array(alist).T 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:23:13.517

仅使用 numpy 函数：

```
import numpy as np

inputFile = np.gentfromtxt('inputFile.csv',delimiter = ',')
inputFile.reshape(-1)
lat = np.gentfromtxt('lat.csv',delimiter = ',')
lat.reshape(-1)
lon = np.gentfromtxt('lon.csv',delimiter = ',')
lon.reshape(-1)

output = np.vstack( (inputFile,lat,lon) ) 
```

# ios - 可以用Macro识别iOS设备吗？

> ID：13014298
> 
> 赞同：1
> 
> 时间：2012-10-22T15:08:19.423
> 
> 标签：ios, xcode, macros

我有一个通用应用程序，在代码的几个部分中，我必须检查设备类型以呈现 UI 元素。早些时候，我有一个 bool变量`isDeviceIPad`（`viewDidLoad`

所以相反，我想我可能会使用宏，所以`isDeviceIPad`宏（而不是 bool 变量）永远不会出错：

```
#define isDeviceIPad ([[UIDevice currentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPad) 
```

可以使用这样的宏吗？我不应该的任何理由（性能考虑等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:12:04.730

该宏可以正常工作，并且不会有额外的性能问题。编译您的应用程序时，宏的每次使用都将替换为宏的定义。这就像一个大搜索和替换。

虽然你应该只使用：

```
#define isDeviceIPad (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:29:24.793

这是正确的语法（在 pad 或 phone 之前没有空格 && 没有 'i' && 没有额外的标点符号）

```
 #define isDeviceIPad UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad
   #define isDeviceIPhone UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone 
```

# blackberry - UI 引擎在没有持有事件锁的情况下被访问

> ID：13014301
> 
> 赞同：1
> 
> 时间：2012-10-22T15:08:21.157
> 
> 标签：blackberry, blackberry-jde

我创建了一个简单的应用程序，只要发起或接收到电话，它就会在浏览器字段中调用一个 url，但我不断收到异常：

> UI 引擎在没有持有事件锁的情况下被访问。

我在某处读到我必须使用全局事件，但我不知道该怎么做。我在这方面已经苦苦挣扎了很长时间，如果在拨打电话或拨打电话时没有收到错误，我将不胜感激有关加载 url 的任何帮助。

我的代码：

```
public class BackgroundApp extends MainScreen implements PhoneListener {

    BrowserField bf = new BrowserField();

    public BackgroundApp(){
        super();
        Phone.addPhoneListener(this); //Phonelistener added to code
        add(bf);
    }

    public void callIncoming(int callId) { //Method to listen for an incoming call and get the number
        try {
            bf.requestContent("http://www.yahoo.com/");
        } catch (Exception me) {
            me.printStackTrace();
        }
    }

    public void callAdded(int arg0) {}
    public void callAnswered(int callId) {}
    public void callConferenceCallEstablished(int callId) {}
    public void callConnected(int callId) {}
    public void callDirectConnectConnected(int callId) {}
    public void callDirectConnectDisconnected(int callId) {}
    public void callDisconnected(int callId) {}
    public void callEndedByUser(int callId) {}
    public void callFailed(int callId, int reason) {}
    public void callHeld(int callId) {}

    public void callInitiated(int callid) {
        try {
            bf.requestContent("http://www.google.com/");
        } catch (Exception me) {
            me.printStackTrace();
        }
    }

    public void callRemoved(int callId) {}
    public void callResumed(int callId) {}  /
    public void callWaiting(int callid) {}
    public void conferenceCallDisconnected(int callId) {}

    public boolean onClose() {
        System.exit(0);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:27:07.607

替换这个

> bf.requestContent("某事");

和

```
 synchronized (UiApplication.getEventLock()) 
 {
    bf.requestContent("http://www.yahoo.com/");
 } 
```

或像这样使用：

```
synchronized (UiApplication.getEventLock()) 
{
    UiApplication.getUiApplication().invokeLater(new Runnable() 
    {
        public void run() 
        {
            bf.requestContent("http://www.yahoo.com/");
        }
    });
} 
```

# javascript - 在使用模板的指令中更新 ng-model

> ID：13014303
> 
> 赞同：15
> 
> 时间：2012-10-22T15:08:21.993
> 
> 标签：javascript, angularjs

我有一个像这样实例化的指令：

```
<datepicker ng-model="foo"></datepicker> 
```

在指令内部，datepicker 标签被这个模板替换：

```
template: '<div class="datepicker-wrapper input-append">' +
                     '<input type="text" class="datepicker" />' +
                     '<span class="add-on"><i class="icon-calendar"></i></span>' +
                   '</div>' 
```

我希望 ng-model 绑定到的值是输入字段的值。解决这个问题的最佳方法是什么，所以我维护 ng-model 的双向数据绑定？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-16T23:13:51.970

根据传递的复杂程度，您可以使用 = 范围在本地名称和 ngModel 之间进行双向绑定，就像在这个小提琴中一样：

[http://jsfiddle.net/mThrT/22/](http://jsfiddle.net/mThrT/22/)

出于某种原因（第一次尝试使用角度），我花了很长时间设置小提琴，但这是金钱镜头：

```
template: '<div class="datepicker-wrapper input-append">' 
        + '<input type="text" class="datepicker" ng-model="bar" />' 
        + '<span class="add-on"><i class="icon-calendar"></i></span>' 
        + '</div>',
scope: {
    bar: '=ngModel'
}, 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T16:09:18.197

有几种方法可以做到这一点..

链接函数的参数上有一个`ctrl`函数调用`.$setViewValue(valueHere)`，您可以使用它来设置任何 ngModel 引用的值。它将完成设置 $dirty 等的工作。还有一个名为的属性，`.$viewValue`您可以使用它来获取当前值。因此，您可以在隔离范围属性上设置 $watch 以更新 ngModel 值。

更正确的方法仍然是在链接函数中，但它看起来像这样：

```
app.directive('myDirective', function() {
    restrict: 'E',
    require: 'ngModel',
    scope: {}, //isolate the scope
    template: '<div class="datepicker-wrapper input-append">' +
                         '<input type="text" class="datepicker" ng-model="date" />' +
                         '<span class="add-on"><i class="icon-calendar"></i></span>' +
                       '</div>',
    controller: function($scope) { 
    },
    link: function(scope, elem, attr, ctrl) {
       //get the value from ngModel
       scope.date = ctrl.$viewValue;

       //set the value of ngModel when the local date property changes
       scope.$watch('date', function(value) {
           if(ctrl.$viewValue != value) {
              ctrl.$setViewValue(value);
           }
       });
    }
}); 
```

# ios - iOS：将 iCloud 文档存储用于基于 XML 的小型数据库

> ID：13014306
> 
> 赞同：3
> 
> 时间：2012-10-22T15:08:24.600
> 
> 标签：ios, xml, document, icloud

只是想知道这是否是个好主意：

我想使用 iCloud 在我的 iOS 应用程序中的不同设备之间同步数据。它只是一个没有连接的小对象列表。但是将此列表存储在键/值存储中将不起作用，因为它的空间限制为 1 MB 左右，并且列表可能会变得更大（不多，但可以......）。核心数据对我来说似乎有点矫枉过正，而且还存在可能重复的问题。

所以我想知道子类化 UIDocument 来处理 XML 文件是否有意义。每个对象都有一个 ID，因此合并文件的不同版本应该没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:11:23.747

XML 的选择取决于数据存储的格式（单片或事务）和更新量。如果您的应用程序不断写入整个文件（1 MB+）（因此同步到 iCloud），或者如果一个小的更改导致整个商店同步到 iCloud，那么我会使用 Core Data。核心数据的优点是只同步您需要（或已更改）的事务日志。

# asp.net-mvc - 使用 https ASP.NET MVC 网站保护所有资源（图像、脚本、页面、sessionCookie），并从 http 重定向到 https

> ID：13014308
> 
> 赞同：3
> 
> 时间：2012-10-22T15:08:40.967
> 
> 标签：asp.net-mvc, redirect, iis-7, https

我想知道如何从 to 重定向`**http**`但`**https**`保持所有资源的安全。

我知道 IIS'`Require SSL`保护站点的所有资源。但是重定向呢？如果我使用`URL Rewrite`模块，我必须禁用 Require SSL 选项`IIS`。我可以教我的网站重定向`http`到`https`，还可以保护所有资源吗？

是的，我必须保护我网站的所有资源。网站将仅通过 https 结束。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:02:08.640

您可以考虑的一种选择是拥有 2 个网站，一个用于正常页面请求，另一个用于资源。

您的资源网站只支持`https`，并且不需要处理重定向。

您的主网站将同时提供`http`和，并使用您希望的任何方法从->`https`发出重定向，是模块或 MVC 的属性。`http``https``URL Rewrite``[RequireHttps]`

# wpf - 如何在焦点和焦点丢失时自动切换输入语言

> ID：13014311
> 
> 赞同：2
> 
> 时间：2012-10-22T15:08:48.030
> 
> 标签：wpf, behavior, attached-properties

我想为 TextBox 编写附加属性或行为，以便当焦点输入语言根据设置属性自动更改时

谁能为我提供示例代码来实现这一目标？

这是我到目前为止的代码，但我想根据文本框焦点设置和取消设置语言，所以当文本框焦点丢失时，我想切换到在这个附加的这个类改变它之前选择的输入语言

```
 public static class InputLanguageSwitch
{
    #region Dependency properties
    /// <summary>
    /// language to switch to when input got focus
    /// </summary>
    public static readonly DependencyProperty KeyboardLanguageProperty = DependencyProperty.Register("KeyboardLanguage", typeof(string), typeof(Localization), new FrameworkPropertyMetadata(null, OnKeyboardLanguageChanged));

    #endregion

    #region Dependency properties Get/Set methods
    /// <summary>
    /// Return selected keyboard language
    /// </summary>
    /// <param name="d"></param>
    /// <returns></returns>
    public static string GetKeyboardLanguage(DependencyObject d)
    {
        return d.GetValue(KeyboardLanguageProperty) as string;
    }

    /// <summary>
    /// Set input language base on keyboard
    /// </summary>
    /// <param name="d"></param>
    /// <param name="value"></param>
    public static void SetKeyboardLanguage(DependencyObject d, string value)
    {
        d.SetValue(KeyboardLanguageProperty, value);
    }
    #endregion

    #region Even processing
    /// <summary>
    /// action to perform when input language changes
    /// </summary>
    /// <param name="d">Dependency object</param>
    /// <param name="e">DependencyPropertyChangedEventArgs</param>
    public static void OnKeyboardLanguageChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (!(d is TextBoxBase)) return;
        var textBox = d as TextBoxBase;
        var language = FindKeyboardLanguage((string) e.NewValue);
        if (string.IsNullOrEmpty((string) e.NewValue) | ReferenceEquals(language, CultureInfo.InvariantCulture))
        {
            //textBox.PreviewGotKeyboardFocus -= OnTextBoxPreviewGotKeyboardFocus;
            d.ClearValue(InputLanguageManager.InputLanguageProperty);
            d.ClearValue(InputLanguageManager.RestoreInputLanguageProperty);
        }
        else
        {
            //textBox.PreviewGotKeyboardFocus += OnTextBoxPreviewGotKeyboardFocus;
            d.SetValue(InputLanguageManager.InputLanguageProperty, language);
            d.SetValue(InputLanguageManager.RestoreInputLanguageProperty, true);
            InputLanguageManager.Current.CurrentInputLanguage = language;
        }
    }

    #endregion

    /// <summary>
    /// Find and return keyboard language if one specified as an argument
    /// is installed on machine
    /// </summary>
    /// <param name="tag">language tag</param>
    /// <returns><see cref="CultureInfo"/> for requested language></returns>
    public static CultureInfo FindKeyboardLanguage(string tag)
    {
        CultureInfo result = CultureInfo.InvariantCulture;
        if (!string.IsNullOrEmpty(tag))
        {
            if (InputLanguageManager.Current.AvailableInputLanguages != null)
                foreach (CultureInfo c in InputLanguageManager.Current.AvailableInputLanguages)
                {
                    if (c.IetfLanguageTag.ToUpper().StartsWith(tag.ToUpper()))
                    {
                        result = c;
                    }
                    if (c.IetfLanguageTag.ToUpper() == tag.ToUpper())
                    {
                        break; // TODO: might not be correct. Was : Exit For
                    }
                }
        }
        return result;
    }
} 
```

# jquery - jQuery：通过 .attr() 添加两个属性；方法

> ID：13014317
> 
> 赞同：112
> 
> 时间：2012-10-22T15:09:05.517
> 
> 标签：jquery

**编辑：**

我了解到，使用 , 以外的其他值`_blank`不适用于移动浏览器打开新窗口/标签。

例如，如果您需要打开一个新窗口/选项卡：

*   **这适用**于所有浏览器，甚至是移动浏览器：`target="_blank"`.

*   **这不适**用于移动浏览器，但**适用**于桌面浏览器：`target="new"`.

--

虽然我有这个工作，但我不确定是否有更好的方法来做到这一点，或者我得到它的方式是否是正确/唯一的方式。

基本上我正在做的是将所有`target="_new"`or`target="_blank"`属性值替换为`target="nw"`，这样只有一个新窗口打开，并且所有其他新窗口都将打开，以免用多个窗口压倒用户。

我还添加了“*在新窗口中打开*”`title=""`属性。

所以我创建的解决方案是这个：

```
$("a[target='_blank'], a[target='_new']").attr('target','nw').attr('title','Opens in a new window'); 
```

注意这两种`.attr();`方法。

这是向元素添加两个属性的正确方法吗？

我试过`.attr('target','nw','title','Opens in a new window')`了，但没有用。

我问的原因是因为 DYR（不要重复自己）原则，所以如果我可以改进我拥有的代码，很好，如果没有，那就是它。

谢谢。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-10-22T15:10:54.377

应该管用：

```
.attr({
    target:"nw", 
    title:"Opens in a new window",
    "data-value":"internal link" // attributes which contain dash(-) should be covered in quotes.
}); 
```

**注意**：

> "*设置多个属性时，属性名称周围的引号是可选的。*
> 
> ***警告**：设置“类”属性时，必须始终使用引号！*

[来自.attr](http://api.jquery.com/attr/)的 jQuery 文档（2016 年 9 月）：

> 尝试更改通过 document.createElement() 创建的输入或按​​钮元素的类型属性将在 Internet Explorer 8 或更早版本上引发异常。

**编辑**：
供将来参考...要**获得您将使用的单个**属性

```
var strAttribute = $(".something").attr("title"); 
```

要**设置单个**属性，您将使用

```
$(".something").attr("title","Test"); 
```

要**设置多个**属性，您需要将所有内容包装在 { ... }

```
$(".something").attr( { title:"Test", alt:"Test2" } ); 
```

## 编辑 - 如果您尝试从复选框获取/设置“已选中”属性...

你需要使用`prop()` [jQuery 1.6+](http://api.jquery.com/prop/)

> *.prop() 方法提供了一种显式检索属性值的方法，而 .attr() 检索属性。*
> 
> *...关于 checked 属性要记住的最重要的概念是它不对应于 checked 属性。该属性实际上对应于 defaultChecked 属性，应该只用于设置复选框的初始值。**选中的属性值不会随着复选框的状态而改变，而选中的属性会***

因此，要**获得复选框的选中状态**，您应该使用：

```
$('#checkbox1').prop('checked'); // Returns true/false 
```

或者要将**复选框设置为选中或未选中**，您应该使用：

```
$('#checkbox1').prop('checked', true); // To check it
$('#checkbox1').prop('checked', false); // To uncheck it 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-22T15:11:20.933

正确的方法是：

```
.attr({target:'nw', title:'Opens in a new window'}) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-24T06:26:25.293

如果您在锚标记中动态添加引导属性，那么这将对您有很大帮助

```
 $(".dropdown a").attr({
      class: "dropdown-toggle",
     'data-toggle': "dropdown",
      role: "button",
     'aria-haspopup': "true",
     'aria-expanded': "true"
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-08T21:53:57.857

像这样的东西：

```
$(myObj).attr({"data-test-1": num1, "data-test-2": num2}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-31T09:22:52.603

使用大括号并将您要添加的所有属性放入其中

例子：

```
$('#objId').attr({
    target: 'nw',
    title: 'Opens in a new window'
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-25T05:18:30.167

```
Multiple Attribute

var tag = "tag name";
createNode(tag, target, attribute);

createNode: function(tag, target, attribute){
    var tag = jQuery("<" + tag + ">");
    jQuery.each(attribute, function(i,v){
        tag.attr(v);
    });
    target.append(tag);
    tag.appendTo(target);
}
var attribute = [
    {"data-level": "3"},
]; 
```

# html - 使用 Modbus TCP/IP 的 HTML5 离线 webapp 通信

> ID：13014318
> 
> 赞同：0
> 
> 时间：2012-10-22T15:09:06.567
> 
> 标签：html, web-applications, modbus

即使我认为这是不可能的，我也会问你这个问题：是否可以创建一个 webapp（离线/在线）以在没有外部服务器的情况下使用 Modbus TCP/IP 与机器通信？

重点是：我们销售使用 Modbus TCP/IP 发送和接收信息的机器，我们希望使用纯 HTML5 离线缓存清单功能创建一个独立的 web 应用程序，该应用程序可以在不经过外部服务器的情况下与它们通信（除了第一次启动接收配置并将它们保存到localStorage）。

我不认为这些可以做到，但如果我错了，我会很高兴;-)

我使用 Node.js 发现了 TooTallNate，并且我已经使用了 phpmodbus，但是这些需要在设备（智能手机或桌面浏览器）和机器之间有一个服务器。

所以我的问题是：有可能吗？如果是这样，如果存在，我可以使用哪个 Javascript 库，或者我在哪里可以找到所需的信息？

提前感谢您的回答。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:22:13.453

JavaScript 是不可能的。

由于安全原因，JavaScript 无法访问本地资源（端口、文件等）

# macos - Mac lion 在使用 Android 模拟器时无法连接到 Socket

> ID：13014330
> 
> 赞同：1
> 
> 时间：2012-10-22T15:09:29.567
> 
> 标签：macos, sockets, android-emulator, emulation

当我使用 Windows 运行 eclipse Android 模拟器连接套接字时，它是成功的。但是，当我使用 Mac os lion 运行“相同”代码时，模拟器显示“不幸的是客户端测试已停止！”请帮我解决这个问题。我已经添加了互联网权限！

```
package com.example.testclientokok;

import java.io.IOException;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        Socket socket=new Socket(InetAddress.getLocalHost(), 8888);
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

服务器部分

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class MyServer {

 public static void main(String[] args){
 ServerSocket serverSocket = null;
 Socket socket = null;
 DataInputStream dataInputStream = null;
 DataOutputStream dataOutputStream = null;

 try {
  serverSocket = new ServerSocket(8888);
  System.out.println("Listening :8888");
 } catch (IOException e) {
 // TODO Auto-generated catch block
  e.printStackTrace();
}

while(true){
  try {
   socket = serverSocket.accept();
   dataInputStream = new DataInputStream(socket.getInputStream());
   dataOutputStream = new DataOutputStream(socket.getOutputStream());
   System.out.println("ip: " + socket.getInetAddress());
   System.out.println("message: " + dataInputStream.readUTF());
   dataOutputStream.writeUTF("Hello!");
  } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }
  finally{
   if( socket!= null){
    try {
      socket.close();
    } catch (IOException e) {
    // TODO Auto-generated catch block
   e.printStackTrace();
 }
}

if( dataInputStream!= null){
 try {
  dataInputStream.close();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }
}

if( dataOutputStream!= null){
 try {
  dataOutputStream.close();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
     }
    }
   }
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:38:34.927

如果我理解正确，您正在您的机器上执行 MyServer，您还运行模拟器。如果模拟器中运行的 Activity 想要与 MyServer 建立连接，那么它应该使用以下 IP 地址：**10.0.2.2**（而不是 localhost，它引用了 emualor 环回接口）。

请参阅[http://developer.android.com/tools/devices/emulator.html#networkaddresses](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

# ruby-on-rails - 如何确定方法所在的类/模块

> ID：13014340
> 
> 赞同：0
> 
> 时间：2012-10-22T15:09:58.940
> 
> 标签：ruby-on-rails, ruby

由于在 Eclipse 中使用 Java，我总是非常容易确定方法的定义位置：只需 ctrl+单击方法调用，它就会将您带到其包含类中的方法定义。显然是 Eclipse 造成了很多这种情况，但即使使用普通的旧 Java，我们仍然需要依赖 import 语句。

在 Rails 开发中，方法查找似乎非常困难。

这是一个例子：

```
require 'test_helper'

class UserStoriesTest < ActionDispatch::IntegrationTest
  fixtures: products

  LineItem.delete_all
  Order.delete_all
  ruby_book = products(:ruby)

  get "/"
  assert_response :success
  assert_template "index"

  cart = Cart.find(session[:cart_id])
  assert_equal 1, cart.line_items.size
  assert_equal ruby_book, cart.line_items[0].product

  get "/orders/new"
  assert_response :success
  assert_template "new"
end 
```

假设我想仔细看看**assert_equal**方法。如果我正在使用 Java，并且包含**assert_equal**的类可能会由此类中的 import 语句描述，并明确指定其位置（例如*java.lang.SomeCoreClass*）。由于我不知道这个方法到底是在哪里定义的，所以我最终做的是谷歌搜索“assert_equal”以发现我正在调查的方法（可能并且希望）是在**Test::Unit::Assertions**中定义的。

我很想听听一些人关于他们确定方法位置的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:15:30.950

试试这个：

```
class Bong
  def smoke
    puts "smoke"
  end
end

Bong.method(:smoke)
Bong.method(:smoke).source_location 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:15:23.067

你可以使用`method(:<method_name>).owner`类来跟踪方法。在你的情况下，它会是`method(:assert_equal).owner`.

[方法#所有者](http://www.ruby-doc.org/core-1.9.3/Method.html#method-i-owner)

# localhost - rails应用程序非常慢

> ID：13014345
> 
> 赞同：4
> 
> 时间：2012-10-22T15:10:14.600
> 
> 标签：localhost, ruby-1.9.3, performance

我知道有很多类似的问题，但我无法从这些问题中找到解决方案。所以我们开始吧.. 我在索尼 vaio 上使用 Ubuntu 12.04。我正在使用 Ruby1.9.3-p194 运行 Rails 3.2.8。我正在使用瘦服务器而不是 webbrick。我也运行着 mongoid、elasticseaerch 和 redis。

本地主机上的页面加载时间非常长（超过 10 分钟）。我知道这个应用程序并不慢，因为它在我同事的 macbook 上运行得很好。我不确定是什么导致它的加载时间非常长。

任何提示表示赞赏。我真的很伤心/不开心，因为它在工作中大大减慢了我的速度。我问过我的同事，但他们似乎都不知道答案。

该应用程序在公司的生产机器上运行良好。这似乎是我的笔记本电脑上的问题。请记住，我有一台速度非常快的笔记本电脑（i5、6gb RAM）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:28:58.597

Look at your logs. Use `tail -f` on the console to watch various logs. In your rails app, look at `tail -f log/development.log` You'll also want to look at your thin server logs. Since your coworkers are running the same codebase, it's probably not any of the actual code in rails taking that long. So your first step is to determine at which point in the http request is your app getting stuck for 10 minutes.

Also, make sure you have the same db as your colleagues. Eliminate as many variables as possible and start with your knowns.

Questions I'd ask myself:

*   Is the request reaching rails immediately?
*   Is another component (redis, mongodb) causing the problem due to your local config?

That said, a 10 minutes request that actually completes is bizarre - are you overriding timeouts?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:37:31.143

Rails 使用了多少内存和 CPU？有多少内存和 CPU 可用？Rails 应用程序货车有时会泄漏内存并爬行停止。

# c# - 从 json 中检索 windows phone 7 的数据

> ID：13014353
> 
> 赞同：0
> 
> 时间：2012-10-22T15:10:48.130
> 
> 标签：c#, json, web-services, windows-phone-7

我计划创建一个显示最近发布的电影名称的 Windows 应用程序（C#）。我有以 json 格式显示数据的 url。我只想检索电影名称和发行日期。从谷歌搜索我知道我必须创建一个类，但我不知道如何开始......我是一只新蜜蜂，请指导我，我目前正在使用 7.1 需要哪个版本的操作系统。下面是我必须使用的 json检索数据

```
{"total":47,"movies":[{"id":"771242005","title":"Magic Mike","year":2012,"mpaa_rating":"R","runtime":110,"critics_consensus":"Magic Mike's sensitive direction, smart screenplay, and strong performances allows audiences to have their beefcake and eat it too.","release_dates":{"theater":"2012-06-29","dvd":"2012-10-23"},"ratings":{"critics_rating":"Certified Fresh","critics_score":79,"audience_rating":"Upright","audience_score":63},"synopsis":"Set in the world of male strippers, Magic Mike is directed by Steven Soderbergh and stars Channing Tatum in a story inspired by his real life. The film follows Mike (Tatum) as he takes a young dancer called The Kid (Pettyfer) under his wing and schools him in the fine arts of partying, picking up women, and making easy money. -- (C) Warner Bros.","posters":{"thumbnail":"http://content8.flixster.com/movie/11/16/66/11166610_mob.jpg","profile":"http://content8.flixster.com/movie/11/16/66/11166610_pro.jpg","detailed":"http://content8.flixster.com/movie/11/16/66/11166610_det.jpg","original":"http://content8.flixster.com/movie/11/16/66/11166610_ori.jpg"},"abridged_cast":[{"name":"Channing Tatum","id":"162661835","characters":["Magic Mike"]},{"name":"Alex Pettyfer","id":"326298019","characters":["Adam","The Kid"]},{"name":"Matt Bomer","id":"771077752","characters":["Ken"]},{"name":"Joe Manganiello","id":"770800475","characters":["Big Dick Richie"]},{"name":"Matthew McConaughey","id":"162652350","characters":["Dallas"]}],"alternate_ids":{"imdb":"1915581"},"links":{"self":"http://api.rottentomatoes.com/api/public/v1.0/movies/771242005.json","alternate":"http://www.rottentomatoes.com/m/magic_mike/","cast":"http://api.rottentomatoes.com/api/public/v1.0/movies/771242005/cast.json","clips":"http://api.rottentomatoes.com/api/public/v1.0/movies/771242005/clips.json","reviews":"http://api.rottentomatoes.com/api/public/v1.0/movies/771242005/reviews.json","similar":"http://api.rottentomatoes.com/api/public/v1.0/movies/771242005/similar.json"}}],"links":{"self":"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/upcoming.json?page_limit=1&country=us&page=1","next":"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/upcoming.json?page_limit=1&country=us&page=2","alternate":"http://www.rottentomatoes.com/dvd/upcoming.json"},"link_template":"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/upcoming.json?page_limit={results-per-page}&page={page-number}&country={country-code}"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:19:04.730

[你可以试试](http://json.codeplex.com/)JSON.NET：http://json.codeplex.com/

注意：我必须截断 JSON 字符串，以便此处的格式化程序可以处理它。

```
String JSONStr = @"{""total"":47,""movies"":[{""id"":""771242005"",""title"":""Magic....";

JObject jObject = JObject.Parse(JSONStr);

// movies is an array....of one.
Array Movies = jObject["movies"].ToArray();

foreach (JToken Movie in Movies)
    Response.Write(Movie["title"].ToString()); 
```

# c# - 优化 LINQ To Objects 查询

> ID：13014357
> 
> 赞同：1
> 
> 时间：2012-10-22T15:11:00.450
> 
> 标签：c#, .net, performance, linq, optimization

我正在尝试优化以下 LINQ 查询以提高其速度性能。它正在搜索的对象数量可能达到数万。

```
var lQuery = from o in oEvents
where (o.oSalesEvent != null && o.oSalesEvent.OccurDate < oCalcMgr.OccurDate && (
                (oCalcMgr.InclTransTypes == Definitions.TransactionTypes.SalesAll) ?
                   (o.oSalesEvent.EventStateID == ApprovedID || o.oSalesEvent.EventStateID == PendingID) : 
                   o.oSalesEvent.EventStateID == ApprovedID)) &&
      ((oCalcMgr.InclTransTypes == Definitions.TransactionTypes.SalesAll) ? 
                (o.oSalesMan.oEmployment.EventStateID == ApprovedID || o.oSalesMan.oEmployment.EventStateID == PendingID) : 
                 o.oSalesMan.oEmployment.EventStateID == ApprovedID)
select new { SaleAmount = o.SaleAmount.GetValueOrDefault(), CompanyID = o.oSalesEvent.CompanyID }; 
```

查询基本上是说，给我某个日期之前发生的所有销售事件的销售额和公司 ID。销售活动的状态和推销员的就业状态应该始终是“已批准”，或者如果指定，它们也可以是“待定”。

如您所见，有一个日期比较和几个整数比较。使用哪个整数比较取决于属性是否匹配某个 Enum 值。

我对如何进行优化有一些自己的想法，但我想听听其他人的想法，他们可能对 LINQ 如何在幕后翻译这个查询有更深入的了解。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:57:15.877

这既可以提高可读性，也可以加快速度，但试试看：

```
var lQueryTemp = from o in oEvents
where (o.oSalesEvent != null && o.oSalesEvent.OccurDate < oCalcMgr.OccurDate)

if (oCalcMgr.InclTransTypes == Definitions.TransactionTypes.SalesAll)
{
  lQueryTemp = from o in lQueryTemp
        where (o.oSalesEvent.EventStateID == ApprovedID || o.oSalesEvent.EventStateID == PendingID) &&
      (o.oSalesMan.oEmployment.EventStateID == ApprovedID || o.oSalesMan.oEmployment.EventStateID == PendingID);
}
else
{
  lQueryTemp = from o in lQueryTemp
        where (o.oSalesEvent.EventStateID == ApprovedID &&  o.oSalesMan.oEmployment.EventStateID == ApprovedID);
}

var lQuery = from o in lQueryTemp
select new { SaleAmount = o.SaleAmount.GetValueOrDefault(), CompanyID = o.oSalesEvent.CompanyID }; 
```

这可能会通过取消对 的两个检查来加快速度`oCalcMgr.InclTransTypes`，这对于此查询而言实际上是一个常数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:49:43.533

在我看来，您最大的挑战是您在 Linq 语句中执行多个条件检查，这将花费大量时间。在 oEvents 中创建一个新属性怎么样 - 说“IsEligable”并在其他变量的 Set 语句中设置它的值（比在 Linq 中不断重新查询每个变量快得多）。

然后，当您到达这部分代码时，您可以将 Linq 更新为以下内容：

```
var lQuery = from o in oEvents
where (o.oSalesEvent != null && o.oSalesEvent.OccurDate < oCalcMgr.OccurDate && o.IsEligable == True)
select new { SaleAmount = o.SaleAmount.GetValueOrDefault(), CompanyID = o.oSalesEvent.CompanyID }; 
```

...我猜这会加快执行速度，但只是一个想法...

# java - 从 .Net 应用程序通过 JNBridge 访问 JTextField 控件

> ID：13014359
> 
> 赞同：0
> 
> 时间：2012-10-22T15:11:02.130
> 
> 标签：java, .net, java-native-interface, jtextfield, accessibility-api

使用 JNBridge 是否可以从 .Net 应用程序更新 JTextField 的文本属性？

.Net 应用程序 -> JNBridge -> JTextField.setText("Something");

似乎有可能，但我还没有找到任何可靠的实现。

Java 应用程序是否还必须显式地实现 Java Accessibility API，或者这是您通过所有 Swing 控件免费获得的东西？

我正在寻找一个可靠的“是的，这是可能的......我已经做到了......这就是你开始的地方。” 或“这是一个很好的参考链接”。

如果我的问题含糊不清，那是因为我是一个几乎没有 Java 经验的 .Net 人。我很乐意详细说明...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:51:39.897

是的，您可以使用 JNBridgePro 做到这一点。请参阅 JNBridgePro 安装随附的 Java-in-.NET 嵌入示例。WinForms 和 WPF 应用程序都有示例。

请注意，JNBridgePro 要求嵌入式控件是重量级控件——即具有 Windows 对等体的控件。大多数 Swing 组件（包括 JTextField）不是重量级的，而 AWT 控件是重量级的。因此，我们建议将所有全 Swing 控件包装在重量级控件（通常是 AWT 面板）中，并将该面板包装器（其中包含 JTextField，可能还有其他东西）嵌入到 .NET 应用程序中. 但是一旦你这样做了，你肯定可以访问 Text 属性。

# perl - 从 Asterisk AGI 脚本中使用 Festival

> ID：13014363
> 
> 赞同：1
> 
> 时间：2012-10-22T15:11:14.640
> 
> 标签：perl, asterisk, festival, agi

这感觉像是一个非常愚蠢的问题，但我就是想不通。我正在使用 Perl 编写一个 AGI 脚本，`Asterisk::AGI`它需要调用 Festival 来向调用者读取一些文本。我知道在拨号方案中我可以说

```
Festival('Hello caller','any') 
```

它会说'Hello caller'并允许任何键中断。诀窍是从 AGI 脚本中做到这一点。如果我这样做：

```
$agi->exec('Festival', '"Hello caller"') 
```

它会说“你好来电者”。没问题。但我无法处理关键中断的可能性。它看起来有点像第二个参数，但也有点不像一个。我试过

```
$agi->exec('Festival', '"Hello caller"', 'any') 
```

它似乎完全忽略了它（没有发生键中断）。我也试过

```
$agi->exec('Festival', q{"Hello caller",'any'}) 
```

它说的是“任何”位，这让我对引用感到非常困惑（我传递的字符串中的双引号是我可以让它做的不仅仅是说第一个词的唯一方法）。

```
$agi->exec('Festival', q{"Hello caller", 'any'}) 
```

完全忽略“任何”位。

唯一提到使用 AGI 脚本中的 Festival 的在线资源都谈到在外部调用它，将其保存到临时文件然后播放。我真的必须走那条路吗？我不应该能够使用我喜欢的 AGI 的任何参数来运行任何拨号方案应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:50:34.813

是的，您可以使用[AGI exec 执行](http://www.voip-info.org/wiki/view/exec)拨号计划中的应用程序。您必须使用管道 (|) 字符分隔参数。

带有选项的示例`exec`拨号 (examples/agi-enum.agi)

```
if ($option) {
    $option .= '|' . $DEFAULTTIMEOUT if ($DEFAULTTIMEOUT);
    $AGI->verbose("Executing Dial $option\n",3);
    $res = $AGI->exec('Dial', $option);
} 
```

对于 Festival，它应该像这样工作：

```
$agi->exec('Festival', '"Hello caller"|"any"'); 
```

或者

```
$agi->exec('FESTIVAL "Hello caller"|"any"'); 
```

# storyboard - 启动特定的故事板

> ID：13014368
> 
> 赞同：0
> 
> 时间：2012-10-22T15:11:23.723
> 
> 标签：storyboard

如果设备是 iPhone 5，我需要启动一个特定的故事板，如果设备是 iPhone 4S 或更早版本，我需要启动另一个故事板。我知道我需要添加一些代码来执行 didFinishLaunchingWithOptions 方法，但我不知道具体是哪个！

任何人都可以给我正确的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:04:05.470

这个问题有一个很好的解决方案：

[xcode 4.5 如何在启动时选择故事板](https://stackoverflow.com/questions/12536689/xcode-4-5-how-to-pick-storyboards-at-launch)

本质上，您可以在 didFinishLaunchingWithOptions 中检查屏幕高度并加载适当的记分牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T13:03:09.923

您可以检查 iPhone 4/iPhone 5 并根据它实例化故事板

下面的代码甚至告诉你 iPhone 或 iPad。

可以通过 App 全局保存 iPhone 或 iPad bool。

注意：默认情况下 iphone4 故事板将被实例化。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

iPhone5 = NO;
iPad = NO;

// Override point for customization after application launch.
UIStoryboard *storyBoard;

if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    if ([UIScreen mainScreen].scale == 2.0f)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        CGFloat scale = [UIScreen mainScreen].scale;
        result = CGSizeMake(result.width * scale, result.height * scale);

        if(result.height == 960)
        {
            iPhone5 = NO;
           // NSLog(@"iPhone 4, 4s Retina Resolution");
        }
        if(result.height == 1136)
        {
            iPhone5 = YES;
          //  NSLog(@"iPhone 5 Resolution");
            storyBoard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
            UIViewController *tabBarController = [storyBoard instantiateInitialViewController];
            self.window.rootViewController = tabBarController ;
        }
    }
    else
    {
      //  NSLog(@"iPhone Standard Resolution");
        iPad = YES;
    }
}
else
{
    iPad = YES;
}

return YES; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T16:07:00.697

您必须定义两个不同的故事板。一种用于 iPhone 4 尺寸，一种用于 iPhone 5 尺寸。

然后将以下代码添加到您的应用程序委托应用程序 didFinishLaunchingWithOptions 方法...

```
// Override point for customization after application launch.
CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

if (iOSDeviceScreenSize.height == 480)
{
    // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone35
    UIStoryboard *iPhone35Storyboard = [UIStoryboard storyboardWithName:@"iPhone4" bundle:nil];

    // Instantiate the initial view controller object from the storyboard
    UIViewController *initialViewController = [iPhone35Storyboard instantiateInitialViewController];

    // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Set the initial view controller to be the root view controller of the window object
    self.window.rootViewController  = initialViewController;

    // Set the window object to be the key window and show it
    [self.window makeKeyAndVisible];
}

if (iOSDeviceScreenSize.height == 568)
{   // iPhone 5 and iPod Touch 5th generation: 4 inch screen
    // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone4
    UIStoryboard *iPhone4Storyboard = [UIStoryboard storyboardWithName:@"iPhone5" bundle:nil];

    UIViewController *initialViewController = [iPhone4Storyboard instantiateInitialViewController];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController  = initialViewController;
    [self.window makeKeyAndVisible];
}
return YES; 
```

或者您可以随时使用自动布局来试试运气。无论哪种方式都有效。

# java - 更新后首次打开应用程序时如何仅启动一次活动？

> ID：13014371
> 
> 赞同：1
> 
> 时间：2012-10-22T15:11:36.577
> 
> 标签：java, android, sharedpreferences

在更新后首次打开应用程序时，启动 Activity 的最合乎逻辑的方式是什么。我知道 sharedprefs 将是最简单的方法，但是 sharedprefs 在应用程序更新中是持久的，因此该选项似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T15:13:31.507

使共享首选项存储应用程序的版本号：如果版本不同，请更新它，然后启动您的 Activity。

编辑：这就是我在我的新功能检查中所做的。它加载应用程序信息，获取版本号，如果它已更改，它会弹出打开 Activity。

```
 public static boolean show(Context c)
    {
        ApplicationInfo ai = c.getApplicationInfo();
        String basis = ai.loadLabel(c.getPackageManager()).toString();
        try {
            PackageInfo pi = c.getPackageManager().getPackageInfo(c.getPackageName(), PackageManager.GET_META_
DATA);
            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(c);
            String lastVersion = prefs.getString("lastversion", null);
            SharedPreferences.Editor edit = prefs.edit();
            if(lastVersion == null){
                // save the first installed version so we can check and see when it got installed
                edit.putString("firstversion", String.valueOf(pi.versionCode));
                edit.commit();
            }
            if(lastVersion == null || pi.versionCode > Integer.parseInt(lastVersion)){
                edit.putString("lastversion", String.valueOf(pi.versionCode));
                edit.commit();
                // show it
                Intent i = new Intent(c, WhatsNew.class);
                c.startActivity(i);
                return true;
            }
        } catch (Exception e) {
            android.util.Log.v("WhatsNew", "Exception checking for release notes for [" + basis +
"]:" + e.getMessage(), e);
        }
        return false;
    } 
```

# c# - 查找已排序字符序列的所有组合

> ID：13014372
> 
> 赞同：0
> 
> 时间：2012-10-22T15:11:45.127
> 
> 标签：c#, combinations

对于以下字符`a,b,c,d`，我想找到以下组合。

序列总是排序的。我想知道我应该如何找到组合？

```
一种
b
C
d

抗体
交流
广告

公元前
BD

光盘

美国广播公司
abd
acd

bcd

A B C D
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:28:32.957

你想要的是每一个组合。通常，在获取组合时，您会得到特定大小 n 的所有组合。我们将首先创建该方法以从序列中获取大小 n 的组合：

```
public static IEnumerable<IEnumerable<T>> Combinations<T>(
      this IEnumerable<T> source, int n)
{
    if (n == 0)
        yield return Enumerable.Empty<T>();

    int count = 1;
    foreach (T item in source)
    {
        foreach (var innerSequence in source.Skip(count).Combinations(n - 1))
        {
            yield return new T[] { item }.Concat(innerSequence);
        }
        count++;
    }
} 
```

一旦你有了它，将所有 n 的 n 组合从 1 到序列的大小是一件简单的事情：

```
public static IEnumerable<IEnumerable<T>> AllCombinations<T>(this IList<T> source)
{
    IEnumerable<IEnumerable<T>> output = Enumerable.Empty<IEnumerable<T>>();
    for (int i = 0; i < source.Count; i++)
    {
        output = output.Concat(source.Combinations(i));
    }
    return output;
} 
```

一些使用它的示例代码：

```
var list = new List<string> { "a", "b", "c", "d" };

foreach (var sequence in list.AllCombinations())
{
    Console.WriteLine(string.Join(" ", sequence));
} 
```

值得注意的是，除了最小的输入序列之外，此操作对于所有其他操作都非常昂贵。这并不是最有效的，但即使你确实计算出最后一点性能，你也无法计算超过 15-20 的序列组合，这取决于你愿意等待多长时间并且你的电脑有多好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:39:10.207

您可以使用[Combinatorics](http://nuget.org/packages/Combinatorics)库为您计算它们（[文档](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)），但正如 Servy 所说，数据的长度是需要多长时间的主要因素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:01:45.417

它们不是真正的子集，因为没有什么可以阻止您的输入序列包含重复项，但以下扩展方法应该在一般情况下工作：

```
public static IEnumerable<IEnumerable<T>> Subsets<T>(this IEnumerable<T> source)
{
    List<T[]> yielded = new List<T[]> { new T[0] };
    foreach(T t in source)
    {
        List<T[]> newlyYielded = new List<T[]>();
        foreach(var y in yielded)
        {
            var newSubset = y.Concat(new[] {t}).ToArray();
            newlyYielded.Add(newSubset);
            yield return newSubset;
        }
        yielded.AddRange(newlyYielded);
    }
} 
```

基本上从一个空序列开始，它添加了附加第一个项目的空序列。然后对于这两个序列中的每一个，它都会添加该序列并附加下一个项目。然后对于这四个序列中的每一个......

这必须保留每个生成的序列的副本，因此会占用大量内存。

要从字符串中取出字符串，您可以将其称为

```
"abcd".Subsets().Select(chars => new string(chars.ToArray())) 
```

如果您不想有很多字符，您可以利用可以直接计算第 n 个子集的事实：

```
public static int SubsetCount(this string s)
{
    return 2 << s.Length;
}
public static string NthSubset(this string s, int n)
{
    var b = New StringBuilder();
    int i = 0;
    while (n > 0)
    {
        if ((n&1)==1) b.Append(s[i]);
        i++;
        n >>= 1;
    }
    return b.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:19:30.493

我编写了一个类来处理处理二项式系数的常用函数，这是您的问题所属的问题类型。我没有看过@Bobson 建议的 Cominatorics 库，但我相信我的课程可能更快、更高效。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人，但我可能是错的。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它可能比您找到的链接更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

您的问题的解决方案涉及为每个 N 选择 K 案例生成 K 索引。因此，在上面的示例中，N（A、B、C、D）有 4 种可能性，代码（在 C# 中）看起来像这样：

```
int TotalNumberOfValuesInSet = 4;
int N = TotalNumberOfValuesInSet;
// Loop thru all the possible groups of combinations.
for (int K = N - 1; K < N; K++)
{
   // Create the bin coeff object required to get all
   // the combos for this N choose K combination.
   BinCoeff<int> BC = new BinCoeff<int>(N, K, false);
   int NumCombos = BinCoeff<int>.GetBinCoeff(N, K);
   int[] KIndexes = new int[K];
   // Loop thru all the combinations for this N choose K case.
   for (int Combo = 0; Combo < NumCombos; Combo++)
   {
      // Get the k-indexes for this combination, which in this case
      // are the indexes to each letter in the set starting with index zero.
      BC.GetKIndexes(Loop, KIndexes);
      // Do whatever processing that needs to be done with the indicies in KIndexes.
      ...
   }
   // Handle the final combination which in this case is ABCD since since K < N.
   ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-27T08:18:17.007

[上面servy](https://stackoverflow.com/users/1159478/servy)的代码非常优雅，但它不会产生与源代码长度相同的组合。

```
for (int i = 0; i < source.Count; i++) should be
for (int i = 0; i <= source.Count; i++). 
```

下面是 vb.net 变体，它不能使用 yield。

```
<Extension()>
Public Function Combinations(Of T)(source As IEnumerable(Of T), n As Integer) As IEnumerable(Of IEnumerable(Of T))
    Dim lstResults As New List(Of IEnumerable(Of T))

    If n = 0 Then
        lstResults.Add(Enumerable.Empty(Of T))
    Else
        Dim count As Integer = 1

        For Each item As T In source
            For Each innerSequence In source.Skip(count).Combinations(n - 1)
                lstResults.Add(New T() {item}.Concat(innerSequence))
            Next
            count += 1
        Next
    End If

    Return lstResults

End Function

<Extension()>
Public Function AllCombinations(Of T)(source As IList(Of T)) As IEnumerable(Of IEnumerable(Of T))
    Dim output As IEnumerable(Of IEnumerable(Of T)) = Enumerable.Empty(Of IEnumerable(Of T))()

    For i As Integer = 0 To source.Count
        output = output.Concat(source.Combinations(i))
    Next
    Return output

End Function 
```

# java - 以编程方式在 jboss 7 中配置 infinispan

> ID：13014373
> 
> 赞同：0
> 
> 时间：2012-10-22T15:11:45.910
> 
> 标签：java, caching, jboss7.x, persistence.xml, infinispan

有没有办法我可以完全从standalone.xml中删除infinispan的配置，并在我的persistence.xml中有如下配置：

```
<property name="hibernate.cache.infinispan.entity.strategy" value= "LRU" />
<property name="hibernate.cache.infinispan.entity.eviction.max_entries" value= "1000"/>
<property name="hibernate.cache.infinispan.entity.eviction.strategy" value= "LRU"/>
<property name="hibernate.cache.infinispan.entity.eviction.wake_up_interval" value= "2000"/>
<property name="hibernate.cache.infinispan.entity.eviction.max_entries" value= "5000"/>
<property name="hibernate.cache.infinispan.entity.expiration.lifespan" value= "60000"/>
<property name="hibernate.cache.infinispan.entity.expiration.max_idle" value= "30000"/> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T06:25:42.743

我不知道您的用例，但可以使用 fluent builder API 以编程方式配置 Infinispan CacheManagers 和 Caches。这意味着不需要standalone.xml，甚至不需要在persistence.xml 中配置Infinispan。

有关更多信息，请参阅：[https ://docs.jboss.org/author/display/ISPN/Configuring+cache+programmatically](https://docs.jboss.org/author/display/ISPN/Configuring+cache+programmatically)

在本教程中，我可以看到这样的 CacheManager 配置（现在可能会令人困惑）：

```
 EmbeddedCacheManager manager = new DefaultCacheManager("my-config-file.xml"); 
```

您也可以完全以编程方式对其进行配置，而无需任何输入 xml 文件，例如：

```
 GlobalConfigurationBuilder global = new GlobalConfigurationBuilder();
  global.transport().defaultTransport();
  global.globalJmxStatistics().enable();
  manager = new DefaultCacheManager(global.build()); 
```

# jsf - Ice Faces 3 页面无法在 ie 9 中打开

> ID：13014375
> 
> 赞同：0
> 
> 时间：2012-10-22T15:11:49.120
> 
> 标签：jsf, internet-explorer-9, icefaces

我正在使用 Ice faces 3、tomcat 7.0 开发 JSF 应用程序。我的问题是该应用程序在 Firefox 和 chrome 上运行良好，但在 Internet Explorer 9 中无法打开。它不会抛出任何错误，只是页面在 ie 上显示为空白。这是 xhtml 页面：

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"[
     <!ENTITY nbsp   "&#160;">
     <!ENTITY auml   "&#228;">
     <!ENTITY ouml   "&#246;">
     <!ENTITY Ouml   "&#214;">
     <!ENTITY uuml   "&#252;"> 
     <!ENTITY szlig  "&#223;">
]>

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:icecore="http://www.icefaces.org/icefaces/core"  xmlns:ace="http://www.icefaces.org/icefaces/components"   xmlns:ice="http://www.icesoft.com/icefaces/component" 
    >
    <h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>#{msgs.MyTitle}</title> 
    <link rel="stylesheet" href="./css/tas.css" />
    <ice:outputStyle href="./css/processbar.css" />
  <script type="text/javascript" defer="defer" language="javascript" src="posadmin.js" />
    </h:head>
    <h:body>
    <ice:panelGrid columns="1" cellspacing="0" cellpadding="0" border="0" width="100%">
        ***<ui:include src="head.xhtml"/>
                <ui:include src="Filter.xhtml"/>
        <ui:include src="admin.xhtml"/>*** 
        </ice:panelGrid>
     <ice:form id="error_form">
    <ui:include src="/popups/error.xhtml"></ui:include>
  </ice:form>
  <ice:form id="message_form">
    <ui:include src="/popups/message.xhtml"></ui:include>
  </ice:form>
    <ice:form id="close_form">
    <ui:include src="/popups/close.xhtml"></ui:include>
  </ice:form>
    </h:body>
</html> 
```

当我删除任何一个 ui:include 语句时

```
<ui:include src="head.xhtml"/>
<ui:include src="Filter.xhtml"/> or
<ui:include src="admin.xhtml"/> 
```

上面，我删除了所有的冰块：页面显示在 IE 9 上的表单块......谁能帮我解决这个问题？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:54:53.227

您必须在应用程序的类路径中添加 javax.faces.jar (mojarra)。这个 jar 带有 Icefaces Libs

试试这个。

# javascript - Javascript“如果”操作顺序

> ID：13014379
> 
> 赞同：0
> 
> 时间：2012-10-22T15:12:15.850
> 
> 标签：javascript, conditional-statements, operator-precedence

所以假设你有一个非常基本的 person 对象，它有两个值和一个函数：

```
function personObject() {
    this.name = 'First Name';
    this.placeInLine = 1;
    this.setPlaceInLine = function(place) {
        this.placeInLine = place;
    }
} 
```

我们设置了一些这样的变量：

```
var john = new personObject();
var bill = new personObject();
var message = ""; 
```

现在看看下面的三个代码片段......

---代码#1---

```
if(john.placeInLine < bill.placeInLine) message = "John is before Bill";
else message = "John is not before Bill"; 
```

结果：消息=“约翰不在比尔之前”；// 因为 1 不小于 1

---代码#2---

```
bill.setPlaceInLine(2); // change Bill's place to 2 (instead of default of 1)
if(john.placeInLine < bill.placeInLine) message = "John is before Bill";
else message = "John is not before Bill"; 
```

结果：消息=“约翰在比尔之前”；// 因为 1 小于 2;

---代码#3---

```
if(john.placeInLine < bill.setPlaceInLine(2)) message = "John is before Bill";
else message = "John is not before Bill"; 
```

结果：消息=“约翰不在比尔之前”：//为什么？

比较后是否调用了 .setPlaceInLine 函数？或者运行该函数的行为是否返回了与 john.placeInLine 进行比较的内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T15:14:44.887

因为`setPlaceInLine`方法没有显式返回，因此返回`undefined`。并`1 < undefined`评估为`false`:`undefined`转换为`Number`, give `NaN`, 并且`1 < NaN`肯定是`false`( `1 > NaN`is `false`too, btw)。

虽然您可以通过让您的 setter 方法返回分配的值来解决此问题：

```
PersonObject.prototype.setPlaceInLine = function(place) {
  return this.placeInLine = place;
} 
```

...我认为单独使用 setter 和 getter 会更好（更干净）（就像在您的代码 #2 示例中一样）。

作为旁注，我建议使用原型来设置对象方法（就像我在示例代码中所做的那样）。[其原因在这个答案](https://stackoverflow.com/a/1635143/1229023)中得到了很好的解释：基本上，使用原型，您将只创建一个 Function 实体，供所有创建的对象使用，而`this.someMethod`每次调用构造函数时，您都会创建一个新的 Function 实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:16:34.533

您正在与函数的返回值进行比较。

除非您实际上通过`return this.placeInLine;`它返回一个值，否则它将与`undefined`始终导致的`false`.

将您的代码更改为：

```
this.setPlaceInLine = function(place) {
    return this.placeInLine = place;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T15:16:44.407

setPlaceInLine 不返回任何内容。并且没有任何东西被评估为小于 1。您可以更新 setPlaceInLine 以返回值：

```
function personObject() {
    this.name = 'First Name';
    this.placeInLine = 1;
    this.setPlaceInLine = function(place) {
        this.placeInLine = place;
        return place;
    }
} 
```

# c# - NUnit 测试错误？预期的 但是是

> ID：13014385
> 
> 赞同：10
> 
> 时间：2012-10-22T15:12:42.223
> 
> 标签：c#, unit-testing, nunit

```
[Test]
public void testMultiplication()
{
    var five=new Dollar(5);
    Assert.AreEqual(new Dollar(10), five.times(2));
    Assert.AreEqual(new Dollar(15), five.times(3));
} 
```

美元级

```
public class Dollar
{
    private int amount;

    public Dollar(int amount)
    {
        this.amount = amount;
    }

    public Dollar times(int multiplier)
    {
        return new Dollar(amount * multiplier);
    }

    public bool equals(Object theObject)
    {
       Dollar dollar = (Dollar) theObject;

       return amount == dollar.amount;
    }
} 
```

上线 Assert.AreEqual(new Dollar(10), Five.times(2)); 测试失败并出现错误：

预期：TDDbooks.Dollar

但是是：TDDbooks.Dollar

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T15:15:41.330

该`Assert.AreEquals`方法将使用该`Equals`方法来测试相等性。与其重写类型，不如定义一个不参与 .Net 对象相等性的新方法`Object.Equals`。因此它没有被使用，并且测试使用了失败的引用相等。要解决此问题，您需要覆盖该方法`Dollar``equals``Object.Equals`

```
public override bool Equals(object obj) { 
  Dollar other = obj as Dollar;
  if (other == null) {
    return false;
  }

  return amount == other.amount;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T15:18:29.143

NUnit 显示对象的字符串表示。为了方便输出，您应该覆盖类`ToString`的方法`Dollar`：

```
public override string ToString()
{
   return "$" + amount;
} 
```

现在输出将如下所示：

```
Expected: $10 
But was: $10 
```

下一个问题是美元比较。NUnit 通过调用`Equals`方法来比较对象（不是`equals`，而是`Equals`。Kent Beck 在他的示例中使用 Java。在 C# 中，我们为方法使用 Pascal 命名）。`Equals`如果对象具有相同的引用，则方法的默认实现返回 true。但是在`Times`方法中，您创建了类的新实例`Dollar`。为了解决这个问题，您应该更改`Equals`方法实现以比较金额字段。

```
public override bool Equals(object obj)
{ 
  Dollar other = obj as Dollar;
  if (other == null)
    return false;  

  return amount == other.amount;
} 
```

另请注意，您应该使用`override`关键字来覆盖基类功能。还有一件事——当你覆盖`Equals`功能时，你应该覆盖`GetHashCode`方法。在您的情况下，可以有类似的东西：

```
public override int GetHashCode()
{
  return amount.GetHashCode();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:17:52.003

有几件事：

1.  您已经定义了一个新方法`equals`，而不是覆盖基类方法`Equals`。切换到覆盖，NUnit 将调用你的方法。
2.  NUnit 使用它的 打印出对象`ToString`，而 ToString 的默认实现是简单地打印类名。覆盖`ToString`以打印金额和断言消息将更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:23:39.120

您所断言的`new Dollar(10)`是与返回的对象相同的对象`five.times(2)`，这是不正确的。

如果你想以这种方式断言，你需要在你的 Dollar 类中重载 Equals 方法，如下所示：

```
 public override bool Equals(Object obj)
 {
     if (obj is Dollar)
     {
         return this.Amount == ((Dollar)obj).Amount;
     }
     return false;
 } 
```

您没有`override`在方法中使用关键字`Equals`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T16:38:47.380

一些人已经给出了最好的解决方案，但是有一个替代方案可能在其他情况下也有效。您需要为该`amount`字段添加一个吸气剂，如下所示：

```
public int Amount { get { return amount; } } 
```

然后当你进行单元测试时，它看起来像：

```
Assert.AreEqual(10, five.times(2).Amount); 
```

所以现在你正在比较一个`int`和另一个`int`。或者，您可以将`amount`变量公开，但这会破坏封装。显然`Equals`，在这种情况下，正确使用该方法是更好的方法，但在某些情况下，这可能更可取。

# clearcase-ucm - 旧基线的快照

> ID：13014386
> 
> 赞同：1
> 
> 时间：2012-10-22T15:12:45.953
> 
> 标签：clearcase-ucm

我能否在不从源流创建新流的情况下使用旧基线创建快照视图？我一直在创建一个子流并将其指向旧基线；然后使用旧基线对新创建的流进行快照。没什么大不了的，只是好奇是否有另一种方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:29:41.617

如果基线是*完整*基线，那么可以，您可以使用如下配置规范创建*基本快照视图：*

```
 element * CHECKEDOUT
 element /Vob/Component/... YourBaselineId
 element * /main/0 
```

请参阅“ [Clearcase UCM 中完整基线和增量基线之间的区别是什么？](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988) ”以了解更多关于使用*基本*ClearCase 视图的完整基线的重要性。

否则，您的方法 ( `sub-stream`, `rebase`, `mkview`) 是标准方法，基于子流的配置创建 UCM 视图。

# iphone - Tapku 图书馆 - 显示预约详情

> ID：13014389
> 
> 赞同：0
> 
> 时间：2012-10-22T15:12:58.353
> 
> 标签：iphone, objective-c, ios, ipad, tapku

我有一个 TKCalendarDayTimelineView 显示几个事件。当我点击一个事件时，它会触发 gotSingleTapAtPoint 方法。使用这种方法，我想在新视图中显示被点击的事件的详细信息。我该怎么做？有没有办法确定从选定点选择了什么事件？

```
- (void)tapDetectingView:(TapDetectingView *)view gotSingleTapAtPoint:(CGPoint)tapPoint
{
    //get the selected event, use the details to init a new view
    CGPoint pointInTimeLine = CGPointZero;
    pointInTimeLine = [view convertPoint:tapPoint toView:self.scrollView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:11:07.367

您应该实现协议的可选`calendarDayTimelineView:eventViewWasSelected`方法`TKCalendarDayTimelineViewDelegate`。不要乱来`tapDetectingView:gotSingleTapAtPoint`。

```
- (void)calendarDayTimelineView:(TKCalendarDayTimelineView*)calendarDayTimeline eventViewWasSelected:(TKCalendarDayEventView *)eventView 
{
   // Access the event that was tapped by "eventView.sourceEvent". Something like:
   EKEvent *event = eventView.sourceEvent;
   // Now use EKEventViewController to display the event
} 
```

# javascript - ColorBox 在关闭时暂停 Vido

> ID：13014391
> 
> 赞同：1
> 
> 时间：2012-10-22T15:13:07.667
> 
> 标签：javascript, drupal-7, jquery-events, audiovideoplayback

我需要帮助解决 epacca.com 上的一个小错误

在右边你会看到一些图像，如果你点击它，它会弹出一个带有 OSM 播放器（MediaFront）的视频颜色框。当您关闭 ColorBox 时，视频会继续在 FireFox 中播放。所以 ColorBox close 上有一个钩子。我只需要正确的 JS 来暂停视频。

视频 API 可以在这里找到：http: [//mediafront.org/osmplayer/developer.html#.UIRpQ8XA9el](http://mediafront.org/osmplayer/developer.html#.UIRpQ8XA9el)我一直在尝试各种方法来尝试让视频暂停。

```
(function ($) {
    $(document).bind('cbox_closed', function(e){
        // Code here
    });
}(jQuery)); 
```

# logging - Log4j 使用 rootLogger 的多个日志文件

> ID：13014392
> 
> 赞同：2
> 
> 时间：2012-10-22T15:13:07.153
> 
> 标签：logging, log4j

我想将整个应用程序的所有日志详细信息存储在两个不同的文件中。例如：一个文件将包含所有 DEBUG 信息，而另一个文件将仅包含 ERROR

我当前的 log4j.properties 文件看起来像这样

```
log4j.rootLogger=DEBUG, file1
#Log Message in debug.log file
log4j.appender.file1=org.apache.log4j.FileAppender
log4j.appender.file1.File=log/debug.log
log4j.appender.file1.layout=org.apache.log4j.PatternLayout
log4j.appender.file1.layout.ConversionPattern=%-4r %d{dd MMM yyyy HH:mm:ss} [%t] %-5p %c %x - %m%n

log4j.rootLogger=ERROR, file2
#Log Message in error.log file
log4j.appender.file2=org.apache.log4j.FileAppender
log4j.appender.file2.File=log/error.log
log4j.appender.file2.layout=org.apache.log4j.PatternLayout
log4j.appender.file2.layout.ConversionPattern=%-4r %d{dd MMM yyyy HH:mm:ss} [%t] %-5p %c %x - %m%n 
```

但这只会更新 error.log 文件（最后提到的任何文件）

到目前为止我遇到的最好的解决方案是使用

```
log4j.logger.OTHER_LOGGER=DEBUG, file2
log4j.additivity.OTHER_LOGGER = false
#File Appender
log4j.appender.file2=org.apache.log4j.FileAppender
log4j.appender.file2.File=log/admin.log
log4j.appender.file2.layout=org.apache.log4j.PatternLayout
log4j.appender.file2.append=false
log4j.appender.file2.layout.ConversionPattern=%-4r %d{dd MMM yyyy HH:mm:ss} [%t] %-5p %c %x - %m%n 
```

并使用

```
private static final Logger logger = LoggerFactory.getLogger("OTHER_LOGGER"); 
```

但是使用它的问题是更新日志时显示如下

```
0    22 Oct 2012 20:38:50 [main] INFO  OTHER_LOGGER  - testclass 
```

现在这里没有提到报告日志的类，而是说 OTHER_LOGGER

因此，最好的方法是使用两个 rootLoger，但不知何故它不允许它

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:34:04.503

同样，这对 LevelMatchFilter 来说是件好事。只需将 LevelMatchFilter 与`LevelToMatch = ERROR`附加程序“file2”的属性一起使用。

您应该使用 XML 配置，因为属性配置不支持过滤器。在这里，我尝试编写您需要的 XML 配置：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="file1" class="org.apache.log4j.FileAppender"> 
            <param name="File" value="log/debug.log"/> 
            <layout class="org.apache.log4j.PatternLayout"> 
                    <param name="ConversionPattern" value="%-4r %d{dd MMM yyyy HH:mm:ss} [%t] %-5p %c %x - %m%n"/> 
            </layout> 
    </appender> 

    <appender name="file2" class="org.apache.log4j.FileAppender"> 
            <param name="File" value="log/error.log"/> 
            <layout class="org.apache.log4j.PatternLayout"> 
                    <param name="ConversionPattern" value="%-4r %d{dd MMM yyyy HH:mm:ss} [%t] %-5p %c %x - %m%n"/> 
            </layout> 

            <!-- Use LevelMatchFilter to write only ERROR messages to error.log -->
            <filter class="org.apache.log4j.varia.LevelMatchFilter">
                    <param name="LevelToMatch" value="error" />
                    <param name="AcceptOnMatch" value="true"/>
            </filter>
            <filter class="org.apache.log4j.varia.DenyAllFilter" />
    </appender> 

    <root> 
            <level value="debug"/> 
            <appender-ref ref="file1" /> 
            <appender-ref ref="file2" /> 
    </root> 
</log4j:configuration> 
```

# java - 运行 Ant 构建文件时出错

> ID：13014394
> 
> 赞同：2
> 
> 时间：2012-10-22T15:13:15.093
> 
> 标签：java, ant

我正在尝试使用以下步骤运行从 Eclipse 生成的 ant 构建文件：

1.  右键单击项目，然后“导出”
2.  在 General -> Ant Build File 下

但是当我尝试执行 Run As -> Ant Build File 时，它​​显示以下错误：

找不到类：org.eclipse.jdt.core.JDTCompilerAdapter

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:17:56.467

[在这里](http://www.javalobby.org/java/forums/t14808.html)检查第一个解决方案 这应该做

# objective-c - 如何转义 NSString 以在 NSURL 中使用？

> ID：13014398
> 
> 赞同：11
> 
> 时间：2012-10-22T15:13:29.547
> 
> 标签：objective-c, ios, nsstring

到目前为止，我的发送按钮得到了这个代码：

```
NSString* urlString = [NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", messageBox.text stringByAddingPercentEscapesUsingEncoding : NSUFT8StringEncoding];
NSURL *add = [NSURL URLWithString:urlString]; 
```

但是我确实收到错误“预期'：'

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T15:15:34.630

您需要将两个字符串构造调用分开

```
NSString* urlString = [[NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", messageBox.text] stringByAddingPercentEscapesUsingEncoding : NSUTF8StringEncoding];
NSURL *add = [NSURL URLWithString:urlString]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T15:42:31.063

正确的方法是不要转义整个 URL。您应该只转义单个参数值。

```
NSString* urlString = [NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", [messageBox.text stringByAddingPercentEscapesUsingEncoding : NSUFT8StringEncoding]]; 
```

更好的是，为了便于阅读和调试，请执行以下操作：

```
NSString *escapedText = [messageBox.text stringByAddingPercentEscapesUsingEncoding:NSUFT8StringEncoding];
NSString* urlString = [NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", escapedText]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:15:44.757

尝试：

```
NSString* urlString = [[NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", messageBox.text] stringByAddingPercentEscapesUsingEncoding : NSUFT8StringEncoding]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:18:58.627

把 NSString 方法分开看清楚：

```
NSString* urlString = [[NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", messageBox.text] stringByAddingPercentEscapesUsingEncoding : NSUFT8StringEncoding]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-22T17:19:32.713

当您调用 NSURL urlWithString 时，NSURL 将自动对字符串进行 url 编码，不需要此代码。

# python - Django post_save() 信号实现

> ID：13014411
> 
> 赞同：84
> 
> 时间：2012-10-22T15:14:11.787
> 
> 标签：python, django, django-models, django-signals

我有一个关于 django 的问题。

我这里有 ManyToMany 模型

```
class Product(models.Model):
     name = models.CharField(max_length=255)
     price = models.DecimalField(default=0.0, max_digits=9, decimal_places=2)
     stock = models.IntegerField(default=0)

     def  __unicode__(self):
         return self.name

class Cart(models.Model):
    customer = models.ForeignKey(Customer)
    products = models.ManyToManyField(Product, through='TransactionDetail')
    t_date = models.DateField(default=datetime.now())
    t_sum = models.FloatField(default=0.0)

    def __unicode__(self):
         return str(self.id)

class TransactionDetail(models.Model):
    product = models.ForeignKey(Product)
    cart = models.ForeignKey(Cart)
    amount = models.IntegerField(default=0) 
```

对于创建的 1 个购物车对象，我可以插入尽可能多的新 TransactionDetail 对象（产品和金额）。我的问题是。如何实现触发器？我想要的是每当创建交易详细信息时，我希望产品的库存量减去交易详细信息中的金额。

我读过关于 post_save() 但我不知道如何实现它。也许是这样的

什么时候：

```
post_save(TransactionDetail, 
       Cart) #Cart object where TransactionDetail.cart= Cart.id
Cart.stock -= TransactionDetail.amount 
```

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-10-22T17:56:24.157

如果您真的想使用信号来实现这一点，这里简要介绍一下方法，

```
from django.db.models.signals import post_save
from django.dispatch import receiver

class TransactionDetail(models.Model):
    product = models.ForeignKey(Product)

# method for updating
@receiver(post_save, sender=TransactionDetail, dispatch_uid="update_stock_count")
def update_stock(sender, instance, **kwargs):
    instance.product.stock -= instance.amount
    instance.product.save() 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-22T17:14:13.810

我个人会覆盖 TransactionDetail 的 save() 方法并在那里保存新的 TransactionDetail 然后运行

```
self.product.stock -= self.amount
self.product.save() 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-12-28T12:07:48.147

如果你想避免得到`maximum recursion depth exceeded`，那么你应该在信号处理程序中保存之前*断开信号。*上面的示例（Kenny Shen 的回答）将是：

```
from django.db.models.signals import post_save
from django.dispatch import receiver

class TransactionDetail(models.Model):
    # ... fields here

# method for updating
@receiver(post_save, sender=TransactionDetail, dispatch_uid="update_stock_count")
def update_stock(sender, instance, **kwargs):
 instance.product.stock -= instance.amount

 post_save.disconnect(update_stock, sender=TransactionDetail)
 instance.product.save()
 post_save.connect(update_stock, sender=TransactionDetail) 
```

这在[Disconnect signals for models and reconnect in django](https://stackoverflow.com/questions/2209159/disconnect-signals-for-models-and-reconnect-in-django)中有详细描述，并带有一个更抽象和有用的示例。

另请参阅： django 文档中的[https://docs.djangoproject.com/en/2.0/topics/signals/#disconnecting-signals](https://docs.djangoproject.com/en/2.0/topics/signals/#disconnecting-signals)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-23T05:37:51.520

如果你真的想在 django 中使用信号，请试试这个：

```
#import inbuilt user model
from django.contrib.auth.models import User
from django.db.models.signals import post_save
from django.dispatch import receiver

@receiver(post_save, sender=User)
def create_profile(sender,**kwargs):
    # write you functionality
    pass 
```

然后在初始化文件中添加 default_app_config

```
 default_app_config = "give your AppConfig path" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-08T04:33:37.123

事实上，docstrstring 解释了`Signals`is in `django.dispatch.Signal.connect`：

```
def connect(self, receiver, sender=None, weak=True, dispatch_uid=None):
    Connect receiver to sender for signal.

    Arguments:

        receiver
            A function or an instance method which is to receive signals.
            Receivers must be hashable objects.

            If weak is True, then receiver must be weak referenceable.

            Receivers must be able to accept keyword arguments.

            If a receiver is connected with a dispatch_uid argument, it
            will not be added if another receiver was already connected
            with that dispatch_uid.

        sender
            The sender to which the receiver should respond. Must either be
            a Python object, or None to receive events from any sender.

        weak
            Whether to use weak references to the receiver. By default, the
            module will attempt to use weak references to the receiver
            objects. If this parameter is false, then strong references will
            be used.

        dispatch_uid
            An identifier used to uniquely identify a particular instance of
            a receiver. This will usually be a string, though it may be
            anything hashable. 
```

# javascript - 这会导致rails检测到CSRF吗？

> ID：13014414
> 
> 赞同：1
> 
> 时间：2012-10-22T15:14:17.083
> 
> 标签：javascript, ruby-on-rails, csrf, dynamicform

好的，所以在其中一个页面上的 Rails 应用程序中，我需要传递一个 Javascript 变量，以便它可用于 rails。现在一个运行服务器端，一个运行客户端，所以我知道这非常困难。我查看了互联网并找到了一个解决方案，该解决方案涉及在我的外部 javascript 页面中包含的函数中动态创建表单。

基本上，使用`document.createElement`语句制作了一个带有隐藏字段的表单，隐藏字段被赋予了我想要传递给 rails 的值，然后`form.submit()`被调用以便提交表单。该表格被赋予了一种发布方法，并被赋予了一条路径。因此，当提交它时，页面会重定向到另一个页面，其中隐藏字段现在位于 params 哈希中，并且可以通过带有`params[:param]`.

这在一段时间内效果很好，直到我们开始使用 session 来跟踪登录用户。单击要使用该动态表单重定向的按钮后，会话将被清除。我在网上发现的关于会话被清除的唯一一件事是，当 rails 检测到 CSRF 时，它会清除会话。

那么我正在做的事情会导致 Rails 检测到 CSRF 从而清除我的会话吗？还有其他任何人都知道的会议可能被清除的原因吗？另外，如果没有 ajax（因为我只是不擅长搞砸，它不能很好地发挥作用。）我是否缺少传递 javascript 变量的另一种好方法（它必须是 javascript，我正在使用 javascript 函数获取用户当前位置）以便它可用于轨道？（我在想而不是对表单进行 javascript 处理，我可能只是在我的页面上制作一个隐藏的表单，尽管这有点不那么优雅，因为任何查看源代码的人都可以看到它并想知道为什么它在那里并搞砸了它）

如果有人感兴趣，下面是我的动态表单函数的代码。

```
function post_to_url(path, params, method) {
method = method || "post"; // Set method to post by default, if not specified.

var form = document.createElement("form");  
form.setAttribute("method", method);
form.setAttribute("action", path);     //page to go redirect to when form submitted

var hiddenField = document.createElement("input");
hiddenField.setAttribute("type", "hidden");

//after form is submitted params is available by params[:location]
hiddenField.setAttribute("name", 'location');     
hiddenField.setAttribute("value", params )

form.appendChild(hiddenField);

document.body.appendChild(form);

form.submit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:09:58.810

任何形式的请求和 ajax 都必须通过 CSRF 令牌。您需要在表单中创建一个名为 的隐藏字段`authenticity_token`。然后您需要从元标记中获取值：

```
<meta content="some_token_value" name="csrf-token" /> 
```

像这样：

```
var token = "";
var tags = document.getElementsByTagName("meta");
for(var i = 0; i < tags.length; i++) { 
  if(tags[i].name == "csrf-param") { 
    token = tags[i].content;
  }
} 
```

然后只需将其放入隐藏标签的值中，就像您对位置值所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:28:58.150

您可以在 javascript 文件中添加 erb 行：

```
var csrf_token = '<%= form_authenticity_token %>'; 
```

然后在您的请求中，添加`'authenticity_token' : csrf_token`后期数据。

# qml - Qt5\. Embed QWidget object in QML

> ID：13014415
> 
> 赞同：37
> 
> 时间：2012-10-22T15:14:17.190
> 
> 标签：qml, qwidget, qt5

I am using Qt5 beta and trying to embed a QWidget-based object into QML. The goal is to use QML as much as possible, and only use QWidget objects where QML does not do what I need. I found a link explaining how to do this for Qt4.7, but I have not found any information explaining how to do this in Qt5.

[http://doc.qt.digia.com/4.7/declarative-cppextensions-qwidgets.html](http://doc.qt.digia.com/4.7/declarative-cppextensions-qwidgets.html)

The same example is also available in the Qt5 examples folder under:

examples\qtquick1\declarative\cppextensions\qwidgets

Unfortunately, this example uses QtQuick 1, rather than QtQuick 2, and I would like to use the new features of Qt5\. I actually want to embed a qwt widget, but as a first step I would be happy to embed any simple QWidget-based object.

Can anybody help me get the example working under Qt5 / QtQuick 2 ?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T10:18:46.800

Qt Quick 2 uses a scene graph for efficient rendering on the GPU. Unfortunately this makes it impossible to embed classic widgets into the scene. The old approach to embed such widgets with the help of `QGraphicsProxyWidget` works only with Qt Quick 1, because internally it uses a `QGraphicsView` for all the heavy lifting and `QGraphicsProxyWidget` is meant to be used with it.

As of now there are no plans to enable embedding classic QWidgets into the scene graph I know of. I think this is rather unlikely to change, because the concepts of QPainter, the painting framework used for the classic widgets, and the new scene graph doesn't play well with each other.

There some efforts to develop new widgets sets specifically tailored for the needs of QML, but none of them are as powerful and mature as the classic widgets. The most prominent ones are the [QML Quick Controls](http://doc.qt.io/qt-5/qtquickcontrols-index.html), bundled with Qt since version 5.1.

If you really depend on QWT my advice would be to stick with Qt Quick 1.1 for now. It's still bundled with Qt 5, probably for cases like yours. That way you won't take advantage of the new scene graph, though.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T17:21:35.233

What could be done is to render the widget to an image and upload as texture.For interaction someone needs to forward events like mouseClick or keyPressed from the sceneGraph, translate to widget coordinates, pass on, render and upload texture again. Just an idea :)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-03-21T07:54:04.340

You can embed QWidget to QML by using QQuickPaintedItem class: [http://doc.qt.io/qt-5/qquickpainteditem.html](http://doc.qt.io/qt-5/qquickpainteditem.html)

Qt5 has an example: [http://doc.qt.io/qt-5/qtquick-customitems-painteditem-example.html](http://doc.qt.io/qt-5/qtquick-customitems-painteditem-example.html)

You should implement an inherent of QQuickPaintedItem with private widget attribute, that you want to embed. Provide paint method, that just render the QtWidget and provide mouse and other event transmitting from inherit of QQuickPaintedItem to embed QtWidget.

There's also QSG (Qt scene graph API), but my experience with that thing wasn't smooth. I believe the clue in multithreading (performing rendering in the different thread (not the Qt GUI thread one, however on Windows that's not true and all is done in main GUI thread).

I've implemented embedding of QCustomPlot, here's link: github.com/mosolovsa/qmlplot

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-09T12:55:20.550

The recommended approach is to stay with a QWidget based application and embed the QML parts using QWidget::createWindowContainer.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-25T05:33:58.447

Further to Julien's answer - a simple way to achieve this is to use QQuickWidget to display the QML scene, and then add a regular QWidget as a child of the QQuickWidget. You can also add a simple intermediate QObject to anchor the QWidget to an item in the scene.

E.g.:

In main.qml:

```
Item {

    ... // layouts, extra items, what have you

        Item
        {
            objectName: "layoutItem"
            anchors.fill: parent
        }

    ... // more layouts, extra items, etc.
} 
```

widgetanchor.h:

```
class WidgetAnchor: public QObject
{
    ptr<QWidget> _pWidget;
    QPointer<QQuickItem> _pQuickItem;
public:
    WidgetAnchor(QWidget* pWidget, QQuickItem* pItem)
        : QObject(pWidget), _pWidget(pWidget), _pQuickItem(pItem)
    {
        connect(_pQuickItem, &QQuickItem::xChanged, this, &WidgetAnchor::updateGeometry);
        connect(_pQuickItem, &QQuickItem::yChanged, this, &WidgetAnchor::updateGeometry);
        connect(_pQuickItem, &QQuickItem::widthChanged, this, &WidgetAnchor::updateGeometry);
        connect(_pQuickItem, &QQuickItem::heightChanged, this, &WidgetAnchor::updateGeometry);
        updateGeometry();
    }
private:
    void updateGeometry()
    {
        if (_pQuickItem)
        {
            QRectF r = _pQuickItem->mapRectToItem(0, QRectF(_pQuickItem->x(), _pQuickItem->y(), _pQuickItem->width(), _pQuickItem->height()));
            _pWidget->setGeometry(r.toRect());
        }
    }
}; 
```

In main.cpp:

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    auto pqw = new QQuickWidget;
    pqw->setSource(QUrl::fromLocalFile("main.qml"));
    pqw->setResizeMode(QQuickWidget::SizeRootObjectToView);
    pqw->setAttribute(Qt::WA_DeleteOnClose);
    auto pOwt = new MyWidget(pqw);
    if (auto pOverlayItem = pqw->rootObject()->findChild<QQuickItem*>("overlayItem"))
        new WidgetAnchor(pOwt, pOverlayItem);
    pqw->show();

    return app.exec();
} 
```

The documentation states that using QQuickWidget has advantages over QQuickView and QWidget::createWindowContainer, such as no restrictions on stacking order, but has a 'minor performance hit'.

Hope that helps.

# android - Adding elements to a ListView expands it below other elements using RelativeLayout

> ID：13014418
> 
> 赞同：1
> 
> 时间：2012-10-22T15:14:28.143
> 
> 标签：android, android-listview, xml-layout

In my activity i hava a ListView which has an ArrayAdapter as its adapter, and is updated dynamically. I am using RelativeLayout. At first, the ListView is empty, but I can see that it takes up space on the screen compared to before i added it. As soon as one element is added, it is expanded and shows this element. As soon as I add a second element, I only see the top of the second element and then it goes behind the message text element under. How can I solve this?

```
<Button
    android:id="@+id/btnAddAttachment"
    android:layout_marginTop="7dp"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_below="@id/sprType"
    android:text="Add attachment"/>

<!--ATTACHMENTS LIST-->
<ListView
    android:id="@+id/lstAttachments"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/btnAddAttachment">
</ListView>

<!-- MESSAGE TEXT -->
<EditText
    android:id="@+id/txtMessage"
    android:layout_width="fill_parent"
    android:layout_height="150dp"
    android:layout_below="@id/lstAttachments"
    android:layout_marginTop="7dp"
    android:lines="10"
    android:maxLines="10"
    android:maxLength="500"
    android:hint="Message text"
    android:gravity="top|left"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:18:28.097

的`android:layout_height`价值是`RelativeLayout`什么？

尝试将 更改`ListView`为：

```
android:layout_height="fill_parent" 
```

并对`RelativeLayout`包含它的内容执行相同的操作。

然后，您可以将其`EditText`下方与底部对齐`ListView`，并确保列表视图`layout_above`是`EditText`

# winforms - GridView 数据随着没有消息框单击而消失

> ID：13014419
> 
> 赞同：0
> 
> 时间：2012-10-22T15:14:29.627
> 
> 标签：winforms, datagridview, messagebox

我有一个带有删除按钮的gridview。我添加了一个带有“你确定”是/否的消息框。单击是时，该行数据被删除，但如果单击否，则gridview数据消失。

这是删除按钮单击的代码：

```
private void gvOrderLines_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    int intOrderID = 0;

    if (e.RowIndex < 0 || e.ColumnIndex != gvOrderLines.Columns["deleteBtn"].Index) return;

    Int32 orderLineID = (Int32)gvOrderLines[1, e.RowIndex].Value;

    DialogResult result = MessageBox.Show("Do you want to delete this item? ","Delete Item",MessageBoxButtons.YesNo);

    if (result == DialogResult.Yes)
    {
        using (SqlConnection conn = new SqlConnection(connection))
        {

            SqlCommand comm;

            comm = new SqlCommand("del_OrderLine", conn);
            comm.CommandType = CommandType.StoredProcedure;

            comm.Parameters.Add(new SqlParameter("@orderLineID", SqlDbType.Int));
            comm.Parameters["@orderLineID"].Value = orderLineID;

            comm.Parameters.Add("@ReturnValue", SqlDbType.Int).Direction = ParameterDirection.ReturnValue;

            try
            {
                conn.Open();
                comm.ExecuteNonQuery();

                intOrderID = (int)comm.Parameters["@ReturnValue"].Value;
            }
            catch 
            { 
                //tba
            }
            finally
            {
                comm.Dispose();
                conn.Close();
            }
        }
    }
    populateOrderLines(intOrderID); // This repopulates the gv so why is it blank?
    populateOrderTotals(intOrderID);
} 
```

有什么建议么？

一切顺利，麻木

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:54:22.347

将这些行放在`if (result == DialogResult.Yes)`块中：

```
populateOrderLines(intOrderID); // This repopulates the gv so why is it blank?
populateOrderTotals(intOrderID); 
```

# xml-parsing - XStream fromXML 具有动态内部结构

> ID：13014422
> 
> 赞同：1
> 
> 时间：2012-10-22T15:14:38.087
> 
> 标签：xml-parsing, xstream

我有想要将其转换回对象的 XML 对象，但在使用 XStream 时遇到了麻烦。它的问题是“RESULT”标签与不同的 API 服务不同，所以不知道如何为不同的类取别名。下面的示例将用于 LOGIN 服务示例。我可能有另一个服务，它具有相同的信封/正文/结果/但其中的属性不同，即注销。不知道如何利用信封和正文来减少冗余代码。

```
<Envelope>
<Body>
    <RESULT>
<SUCCESS>true</SUCCESS>
<SESSIONID>1320948a32098</SESSIONID>
<ORGANIZATION_ID>1</ORGANIZATION_ID>
</RESULT>
  </Body>
</Envelope> 
```

我目前已经为 EnvelopeResponse、BodyResponse 和一个 ResultResponse 类创建了类，我希望我的所有其他类都从中扩展吗？这是解决问题的方法吗？即我的LoginResponse 类从ResultResponse.class 扩展而来，LogoutResponse 也是如此。

我试过了

```
xStream = new Xstream();
xStream.alias("Envelope", EnvelopeResponse.class);
xStream.alias("Body", BodyResponse.class);
xStream.alias("RESULT", LoginResponse.class); //Dynamic based on what API I'd like in the RESULT 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:18:39.523

由于您有多个服务，因此添加一个抽象级别将是一个好主意。

IE

```
<Envelope>
<Body>
    <RESULT>
     <LOGINRESPONSE>
       <SUCCESS>true</SUCCESS>
       <SESSIONID>1320948a32098</SESSIONID>
       <ORGANIZATION_ID>1</ORGANIZATION_ID>
     </LOGINRESPONSE>
   </RESULT>
</Body>
</Envelope>

<Envelope>
<Body>
    <RESULT>
     <LOGOUT>
       <SUCCESS>true</SUCCESS>
     </LOGOUT>
   </RESULT>
</Body>
</Envelope> 
```

然后，您可以将这些服务响应别名为不同的类，

```
xStream.alias("LOGOUT", LOGOUT.class);

xStream.alias("LOGINRESPONSE", LOGINRESPONSE.class); 
```

# c# - 放置设计模式类的推荐文件夹是什么

> ID：13014426
> 
> 赞同：1
> 
> 时间：2012-10-22T15:14:47.260
> 
> 标签：c#, design-patterns

在 VS 2010 Web 应用程序中，我几乎没有设计模式类`Singleton`等`Factory`，目前居住在`Util Folder`. 将它们移动到 App_Code 文件夹中是否正确。

根据分层架构，建议将它们放入什么位置？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:16:34.433

这*完全*取决于**您**或开发组来决定如何设计此类文件的布局。

因此，请随意选择最适合**您**的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:16:52.760

您应该在应用程序中构建它们，因为它们符合它们最终代表的模型。没有预先定义的“正确方法”来做到这一点。您正在建模的系统是驱动力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:18:50.513

不同的团队有不同的命名/结构约定。我已经看到使用了**Util**文件夹、**Helper**文件夹等 - 只需与团队确认他们都乐意将文件存放在哪里。

另外，正如您提到的 APP_CODE，您使用的是**Web Project**而不是**Web Application**吗？ [http://msdn.microsoft.com/en-us/library/dd547590.aspx](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

# asp.net - MembershipUser.ResetPassword 抛出无效的 Base-64 异常

> ID：13014427
> 
> 赞同：0
> 
> 时间：2012-10-22T15:14:51.070
> 
> 标签：asp.net, passwords, asp.net-membership

我收到以下错误

![在此处输入图像描述](../Images/45d968d45b0e410d9166ee33a911296f.png)

每次我尝试重置特定用户密码时。

我只有一个用户有问题，我使用的是内置的会员提供程序，所以没有自定义。

我花了很多时间在谷歌上搜索，但没有发现其他人有这个问题。我不确定要尝试什么，因为它是引发错误的内置内容。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:55:27.497

听起来用户密码可能包含 Base-64 编码不能容忍的 unicode 字符。或者，用户 Salt 包含非 base-64 兼容的盐值。

# html - 具有多个背景图像的帧

> ID：13014431
> 
> 赞同：1
> 
> 时间：2012-10-22T15:15:04.007
> 
> 标签：html, css

我正在尝试使用多个背景图像在液体宽度 div 上获得此结果：

![在此处输入图像描述](../Images/abdaf2fa4a24105b31e6fa8150a47ac7.png)

我将图像分为三个部分：

![在此处输入图像描述](../Images/68a83c2763b4f99f178c43e1af129e08.png)

我正在尝试像这样设置 div 的样式：

```
 height: 14px;
        background-image: url(static/img/workspace-pre-hr-l.gif), 
            url(static/img/workspace-pre-hr-bg.gif),
            url(static/img/workspace-pre-hr-r.gif);
        background-repeat: no-repeat, repeat-x, no-repeat;
        background-position: left, center, right; 
```

但是右边距不起作用，所以我有这个：

![http://i.imgur.com/GSxuH.gif](../Images/774f548bee4e8b209d0b0a740de03fae.png)

有什么帮助吗？谢谢

**编辑** 小提琴！[http://jsfiddle.net/J5Tsa/](http://jsfiddle.net/J5Tsa/)

**已解决** 似乎这是图像之间的 z-index 问题。*在重复之前*声明右边距解决了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:28:58.427

据我了解，图像是按照`background-image`属性中指定的顺序堆叠的。所以我的理论是`workspace-pre-hr-r.gif`在下面显示`workspace-pre-hr-bg.gif`。

试试这个...

```
background-image: url(static/img/workspace-pre-hr-l.gif), 
  url(static/img/workspace-pre-hr-r.gif),
  url(static/img/workspace-pre-hr-bg.gif);
background-repeat: no-repeat, no-repeat, repeat-x;
background-position: left, right, center; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:59:52.080

`border-image`如果您愿意放弃与早期 CSS 版本和用户代理的兼容性，CSS 3 支持规则，它可以实现您想要的。语法看起来更简洁，更容易阅读：

```
<div style="border-width: 25px; border-image: url(http://codebrief.com/old/uploads/2011/11/aqua_bg.png) 25 25 25 25 repeat; background-color: #00e0a0; background-clip: padding-box;">Hello World!</div>​ 
```

我写并保存在[http://jsfiddle.net/Wnq3z/](http://jsfiddle.net/Wnq3z/)

我只是在谷歌上搜索并找到了一个解决方案，我将其归功于[http://codebrief.com/2011/11/two-game-changing-css-3-features/](http://codebrief.com/2011/11/two-game-changing-css-3-features/)在回忆起我读过一些关于 CSS 3 中存在的内容之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:20:38.140

等待小提琴，我可以建议你只使用中心图像，用类似的东西四舍五入它的边界：

```
border-radius: 10px 10px 0px 0px; 
```

编辑：作为一个注释，边界半径是为了绕过[滑动门](http://www.alistapart.com/articles/slidingdoors/)技术而诞生的......

# java - 在同一直线上设置文本框

> ID：13014440
> 
> 赞同：0
> 
> 时间：2012-10-22T15:15:24.237
> 
> 标签：java, android, user-interface, textbox

请看下面的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     >

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/firstNumber"
        />

    <EditText 
        android:id="@+id/firstNumberTxt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        />

    </LinearLayout>

     <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/secondNumber"
        />

    <EditText 
        android:id="@+id/secondNumberTxt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        />

    </LinearLayout>

         <RadioGroup
             android:id="@+id/radioGroup"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:orientation="horizontal"
             >

             <RadioButton 
                 android:id="@+id/sum"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:text="@string/sum"
                 />

             <RadioButton 
                 android:id="@+id/min"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:text="@string/min"
                 />

             <RadioButton 
                 android:id="@+id/max"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:text="@string/max"
                 />

             <RadioButton 
                 android:id="@+id/dev"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:text="@string/dev"
                 />
         </RadioGroup>

</LinearLayout> 
```

此代码的输出 GUI 作为图像附加 ![在此处输入图像描述](../Images/ff6d1951c235e75bb32f35e330660ffa.png)

但是，您可以看到一个文本框在另一个文本框之前开始，使 GUI 变得丑陋。我需要在同一列中以一条直线显示文本框。例如，如果文本框 1 从 X=1 和 Y=1 开始，第二个文本框应该从 X=1 和 Y=2 开始，这个例子是在 Java 的情况下。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:16:37.613

为您的 TextViews 使用固定大小（例如`android:layout_width="20dip"`，对于两个视图）。或者使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)显示两列：第一列将存储 TextViews，第二列将具有 EditTexts。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:21:08.360

让我试试

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
 >

<TextView 
    android:id="@+id/firstTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/firstNumber"
    android:alignParentLeft="true"
    android:alignParentTop="true"
    />

<EditText 
    android:id="@+id/firstNumberTxt"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:toRightOf="@+id/firstTextView"
    android:marginLeft=30dp 
    />

<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/secondNumber"
    android:alignLeft="@+id/firstTextView"
    android:below="@+id/firstTextView"
    />

<EditText 
    android:id="@+id/secondNumberTxt"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:alignLeft="@+id/firstNumberTxt"
    android:below="@+id/firstTextView"
    />

     <RadioGroup
         android:id="@+id/radioGroup"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:orientation="horizontal"
         >

         <RadioButton 
             android:id="@+id/sum"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/sum"
             />

         <RadioButton 
             android:id="@+id/min"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/min"
             />

         <RadioButton 
             android:id="@+id/max"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/max"
             />

         <RadioButton 
             android:id="@+id/dev"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/dev"
             />
     </RadioGroup> 
```

编辑：

所以它不是android：下面，它是

```
 android:layout_below="@+id/listActiveChat" 
```

和

```
 android:layout_toRightOf="@+id/mesagge_edit" 
```

# python - SQL Alchemy NULL 标识键

> ID：13014443
> 
> 赞同：2
> 
> 时间：2012-10-22T15:15:31.820
> 
> 标签：python, mysql, sqlalchemy, flask-sqlalchemy

我已经像这样定义了表的模型的 id 字段：

```
id = Column(Integer(15, unsigned=True),
               nullable=False,
               server_default='0',
               primary_key=True,
               unique=True,
               autoincrement=True) 
```

并相应地更改了数据库（MySQL）表，但是当我创建模型并尝试提交它时（我使用 SQLalchemy 0.7.8）

```
m = MyModel(values without defining the id)
session.add(m)
session.commit() 
```

我收到这个错误

```
FlushError: Instance <MyModel at 0x4566990> has a NULL identity key. 
If this is an auto-generated value, check that the database table 
allows generation of new primary key values, and that the mapped 
Column object is configured to expect these generated values.  Ensure 
also that this flush() is not occurring at an inappropriate time, such    
as within a load() event. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-09-16T06:41:36.023

我使用 Postgres 13，ID 的类型是 UUIT 数据类型。我遇到了同样的问题。我已经通过应用 server_default 解决了这个问题。

```
class TrafficLightController(Base):
    __tablename__ = 'Tlc'
    id = Column(UUID, primary_key=True, server_default='uuid_generate_v4()')
    type_id = Column('type_id', UUID)
    title = Column('title', String(100))
    gps_x = Column('gps_x', Float)
    gps_y = Column('gps_y', Float)
    hardware_config = Column('hardware_config', JSONB)
    lcu_id = Column('lcu_id', UUID)
    signal_id = Column('signal_id', UUID)

    def __init__(self, type_id, title, gps_x, gps_y, hardware_config, lcu_id, signal_id):
        self.type_id = type_id
        self.title = title
        self.gps_x = gps_x
        self.gps_y = gps_y
        self.hardware_config = hardware_config
        self.lcu_id = lcu_id
        self.signal_id = signal_id

if __name__ == "__main__":
    dbschema = 'asudd'
    engine = create_engine(DB_CONNECTION_STR, connect_args={'options': '-    csearch_path={}'.format(dbschema)})
    Session = sessionmaker(bind=engine)
    Base = declarative_base()
    Base.metadata.create_all(engine)

    session = Session()
    tlc_obj = TrafficLightController("b0322313-0995-40ac-889c-c65702e1841e", "test DK", 35, 45, "{}", None, None)
    session.add(tlc_obj) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:15:06.417

我通过删除 server_default 值解决了它

# c++ - 在 boost::variant 中使用 boost::blank 时的编译器警告

> ID：13014450
> 
> 赞同：2
> 
> 时间：2012-10-22T15:15:48.713
> 
> 标签：c++, boost

我收到以下代码的警告，如果我从变体中删除 boost::blank 则会消失：

```
namespace DB
{
struct Value{};
struct Container{};
}

typedef boost::variant <boost::blank, DB::Value, DB::Container> CommandData;

struct Command {
    explicit Command(CommandData& _data): data(_data){
    }

    CommandData data;
};

int main()
{
    CommandData commandData;
    Command command(commandData);
    return 0;
} 
```

这是什么问题？

这是警告：

```
1>: warning C4345: behavior change: an object of POD type constructed with an initializer of the form () will be default-initialized
1>          c:\boost_1_49_0\boost\variant\variant.hpp(1224) : while compiling class template member function 'boost::variant<T0_,T1,T2>::variant(void)'
1>          with
1>          [
1>              T0_=boost::blank,
1>              T1=DB::Value,
1>              T2=DB::Container
1>          ]
1>          c:\code.h(38) : see reference to class template instantiation 'boost::variant<T0_,T1,T2>' being compiled
1>          with
1>          [
1>              T0_=boost::blank,
1>              T1=DB::Value,
1>              T2=DB::Container
1>          ] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T15:32:36.270

这个警告相当愚蠢。[它警告说 MSVC](http://msdn.microsoft.com/en-us/library/wewb47ee%28v=vs.71%29.aspx)现在做的是正确的事情，而不是一些古老的版本。您可以使用`pragma`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:23:04.843

这不是因为变体。例如，尝试将 int 作为结构成员而不是变体，您将收到相同的警告。事情是变体默认使用第一个值初始化，而 boost::blank 是优化变体行为的特殊类型。请参阅 Boost 中的变体文档

# python - 从字典列表优化平均计算

> ID：13014452
> 
> 赞同：3
> 
> 时间：2012-10-22T15:15:54.610
> 
> 标签：python, numpy

我有一个字典列表，键为“a”、“n”、“o”、“u”。有没有办法加快这个计算，例如[NumPy](http://numpy.scipy.org/)？列表中有数以万计的项目。

数据是从数据库中提取的，所以我必须忍受它最初是字典列表的形式。

```
x = n = o = u = 0
for entry in indata:
    x += (entry['a']) * entry['n']  # n - number of data points
    n += entry['n']
    o += entry['o']
    u += entry['u']

    loops += 1

average = int(round(x / n)), n, o, u 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:51:00.567

我怀疑这会快得多，但我想它是`timeit`...的候选人

```
from operator import itemgetter
x = n = o = u = 0
items = itemgetter('a','n','o','u')
for entry in indata:
    A,N,O,U = items(entry)
    x += A*N  # n - number of data points
    n += N
    o += O    #don't know what you're doing with O or U, but I'll leave them
    u += U

average = int(round(x / n)), n, o, u 
```

至少，它保存了一个查找，`entry['n']`因为我现在已经将它保存到一个变量中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:04:08.503

你可以尝试这样的事情：

```
 mean_a = np.sum(np.array([d['a'] for d in data]) * np.array([d['n'] for d in data])) / len(data) 
```

## 编辑：实际上，@mgilson 的上述方法更快：

```
 import numpy as np
from operator import itemgetter
from pandas import *

data=[]
for i in range(100000):
    data.append({'a':np.random.random(), 'n':np.random.random(), 'o':np.random.random(), 'u':np.random.random()})

def func1(data):
    x = n = o = u = 0
    items = itemgetter('a','n','o','u')
    for entry in data:
        A,N,O,U = items(entry)
        x += A*N  # n - number of data points
        n += N
        o += O    #don't know what you're doing with O or U, but I'll leave them
        u += U

```
 average = int(round(x / n)), n, o, u
    return average 
```

def func2(data):
    mean_a = np.sum(np.array([d['a'] for d in data]) * np.array([d['n'] for d in data])/len(data)
    return (mean_a, 
                np.sum([d['n'] for d in data]), 
                np.sum([d['o'] for d in data]), 
                np.sum([d['u'] for d in data])
               )

def func3(data):
    dframe = DataFrame(data)
    return np.sum((dframe["a"]*dframe["n"])) / dframe.shape[0], np.sum(dframe["n"]), np.sum(dframe["o"]), np.sum(dframe["u"])

In [3]: %timeit func1(data)
10 loops, best of 3: 59.6 ms per loop

In [4]: %timeit func2(data)
10 loops, best of 3: 138 ms per loop

In [5]: %timeit func3(data)
10 loops, best of 3: 129 ms per loop 
```

如果您正在对数据进行其他操作，我肯定会考虑使用 Pandas 包。它的 DataFrame 对象与您正在使用的字典列表非常匹配。我认为大部分开销是将数据放入 numpy 数组或 DataFrame 对象的 IO 操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:29:54.063

如果您要做的只是获得某物的平均值，那为什么不呢？

```
sum_for_average = math.fsum(your_item)
average_of_list = sum_for_average / len(your_item) 
```

一点也不在乎 numpy。

# javascript - 使用 Javascript 更改 XML 标记名称

> ID：13014455
> 
> 赞同：0
> 
> 时间：2012-10-22T15:16:11.513
> 
> 标签：javascript, xml

我有一个场景，我必须从 xml 标签的名称中删除数字。例如，如果有一个标签`<xxx1>1234</xxx1>`，我需要一个输出为`<xxx>1234</xxx>`. 我上网冲浪并没有找到解决办法。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:20:11.213

您可以获取一个 dom 元素子元素并在其位置附加到一个新的 dom 元素，而不是更改元素细节本身。

伪代码：

```
curElementContent = get element from dom and get its contents
newElement = create new dom element

append curElementContent to newElement

remove curElement from dom and insert newElement. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:12:35.360

通过将 xml 转换为 xml 字符串并使用以下正则表达式使其工作。

```
xmlString = xmlString.replace(/\d+>/g, '>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:24:08.400

你可以试试这个：

```
tags.replace(/<xxxx\d>/gi, '<xxxx>').replace(/<\/xxxx\d>/gi,'</xxxx>'); 
```

其中 tags 包含您需要更新的字符串。

# c# - 我可以在我的 .NET 2 应用程序中运行 .NET 4 应用程序吗？

> ID：13014459
> 
> 赞同：5
> 
> 时间：2012-10-22T15:16:21.543
> 
> 标签：c#, .net-4.0, .net-2.0

> **可能重复：**
> [我可以在 .NET 2.0 应用程序中使用 .NET 4.0 库吗？](https://stackoverflow.com/questions/2382927/can-i-use-a-net-4-0-library-in-a-net-2-0-application)

所以我有一个旧的 .NET 2 GUI 应用程序。重做这个应用程序是不可能的。

我还有一个控制台 .NET 4 应用程序，它执行 FTP 和其他工作。它使用 LINQ。

现在，我将控制台应用程序（即 .NET 4）抽象为可重用的 DLL 等。

我想要做的是让 GUI 应用程序 (.NET 2) 能够包含这些 DLL 并调用它们。然后只需从中获取返回值。

我认为更糟糕的情况是我可以将其保留为控制台应用程序并让 .NET 两个在外部执行它。但我希望 GUI 应用程序能够执行 .NET 4 中的方法。

将运行此应用程序的客户端都具有 .NET 4。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T15:18:31.880

> 所以我有一个旧的 .NET 2 GUI 应用程序。重做这个应用程序是不可能的。

将框架目标更改为 .NET 4 并重建也不可能吗？这可能是最简单的方法 - 然后您就会*知道*您不会遇到奇怪的情况，即您实际上在 CLR v2 上运行并尝试加载需要 CLR v4（和 .NET 框架 v4 程序集）的程序集。

在大多数情况下，您应该能够简单地重新定位 - 虽然向后兼容性不是 100%，但它非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:19:18.097

您需要在此处将共享实用程序分解为针对 2.0 框架的 DLL。这些 DLL 然后可以在 2.0 和 4.0 .Net 进程中使用。.Net 对向后兼容性提出了很高的要求，并且在绝大多数情况下，2.0 DLL 可以在不更改 4.0 的情况下运行。

# javascript - 将 html 表单中的值保持在设定值以下

> ID：13014463
> 
> 赞同：0
> 
> 时间：2012-10-22T15:16:31.007
> 
> 标签：javascript, html, forms

在我的表格中，有 3 个捆绑包可供选择。让我们称它们为 Bundle 1、2 和 3。

表格看起来像这样......

**最多选择 3 个捆绑包。输入您需要的最大数量 3 的总数：**
捆绑 1 [ ]
捆绑 2 [ ]
捆绑 3 [ ]

标记目前是这样的：

```
<div id="formArea"><label for="first_name">Vorname<span class="formAsterisk">*</span>:<br />
        </label>   <input type="text" maxlength="40" size="40" id="first_name" class="textInput" name="first_name" /></div>
        <div id="formArea"><label for="last_name">Nachname<span class="formAsterisk">*</span>:<br />
        </label>   <input type="text" maxlength="80" size="40" id="last_name" class="textInput" name="last_name" /></div>
        <div id="formArea"><label for="company">Firma<span class="formAsterisk">*</span>:<br />
        </label>   <input type="text" maxlength="40" size="40" id="company" class="textInput" name="company" /></div>
        <div id="formArea">An welchem Bundle sind Sie interessiert? (Max Qty 3)<span class="formAsterisk"> *</span>:<br />
        <label for="bundle1">Bundle 1: <select name="bundle1">
        <option>0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        </select></label> <label for="bundle2">Bundle 2: <select name="bundle2">
        <option>0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        </select></label> <label for="bundle3">Bundle 3: <select name="bundle3">
        <option>0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        </select></label>​&lt;/div>
        <div id="formArea"><label for="email">Email<span class="formAsterisk">*</span>:<br />
        </label>   <input type="text" maxlength="40" size="40" id="email" class="textInput" name="email" /></div>
        <div id="formArea"><label for="phone">Telefonnummer<span class="formAsterisk">*</span>:<br />
        </label>   <input type="text" maxlength="40" size="40" id="phone" class="textInput" name="phone" /></div>
        <div id="formArea">Adresse<span class="formAsterisk">*</span>:<br />
        <textarea type="text" id="00N50000001puIQ" class="textInput" wrap="soft" cols="40" name="00N50000001puIQ"></textarea></div>
        <div id="formArea">Stadt<span class="formAsterisk">*</span>:<br />
        <input type="text" maxlength="40" size="40" id="00N50000001puIC" class="textInput" name="00N50000001puIC" /></div>
        <div id="formArea">PLZ<span class="formAsterisk">*</span>:<br />
        <input type="text" maxlength="20" size="40" id="00N50000001puIZ" class="textInput" name="00N50000001puIZ" /></div>
        <div id="formArea">Land<span class="formAsterisk">*</span>:<br />
        <select title="Lead Country" id="00N50000001puID" class="textInput" name="00N50000001puID">
        <option value="">--Ausw&auml;hlen--</option>
        <option value="Austria">Austria</option>
        <option value="Belgium">Belgium</option>
        <option value="United Kingdom">United Kingdom</option>
        <option value="Ireland">Ireland</option>
        <option value="France">France</option>
        <option value="Germany">Germany</option>
        <option value="Spain">Spain</option>
        <option value="Portugal">Portugal</option>
        <option value="Switzerland">Switzerland</option>
        <option value="Italy">Italy</option>
        <option value="Netherlands">Netherlands</option>
        <option value="Luxembourg">Luxembourg</option>
        <option value="OTHER">OTHER</option>
        </select></div>
        <div id="formArea">Position<span class="formAsterisk">*</span>:<br />
        <select title="Job Role" id="00N50000001puIX" class="textInput" name="00N50000001puIX">
        <option value="Administrative assistant">Assistant/in</option>
        <option value="Customer Services Manager">Callcenter Manager/in</option>
        <option value="Director">Director</option>
        <option value="Facilities Manager">Einkaufsleiter</option>
        <option value="IT Manager">IT-Manager</option>
        <option value="Office Manager">Personalleiter/in</option>
        <option value="Office Worker">B&uuml;romitarbeiter</option>
        <option value="Receptionist">Sekret&auml;rin</option>
        <option value="Sales Manager / Representative">Vertriebsmitarbeiter</option>
        <option value="Team Leader / Manager">Teamleiter</option>
        <option value="Telecommunications Manager">Telekommunikationsmanager</option>
        <option value="Other">Sonstiges</option>
        </select></div>
        <div id="formArea">Unternehmensgr&ouml;&szlig;e<span class="formAsterisk">*</span>:<br />
        <select title="Number of Employees" id="00N50000001puIH" class="textInput" name="00N50000001puIH">
        <option value="">--Ausw&auml;hlen--</option>
        <option value="10 or less">10 oder weniger</option>
        <option value="11-49">11-49</option>
        <option value="50-99">50-99</option>
        <option value="100-249">100-249</option>
        <option value="250-499">250-499</option>
        <option value="500 or more">500 oder mehr</option>
        </select></div>
        <div id="formArea"><label for="first_name">                 <input type="checkbox" name="marketing" id="marketing" />                 Opt-in for regular marketing<span class="formAsterisk">*</span><br />
        </label></div>
        <div id="formArea"><input type="submit" name="submit" value="Jetzt Testen" /></div> 
```

例如，您只能输入 Bundle 1:0、Bundle 2:1 和 Bundle 3:2。

不确定这是否是使用文本输入框的最佳方式，但欢迎提出建议。

如何使用 Javascript 实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:49:17.307

像这样**[的 jsFiddle 示例](http://jsfiddle.net/j08691/k2647/)**怎么样？

**jQuery**

```
var x = 3;
$('select').change(function() {
    var sum = 3;
    $('select').each(function() {
        sum = sum - $(this).val();
    });
    $('select').not($(this)).each(function() {
        //            console.log($(this).val());
        $('option', this).each(function() {
            $(this).prop('disabled',($(this).val() > sum)?true:false);
        });
    });
});​ 
```

**HTML**

```
<label for="bundle1">Bundle 1:
<select name="bundle1">
    <option>0</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    </select></label>
<label for="bundle2">Bundle 2:
<select name="bundle2">
    <option>0</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    </select></label>
<label for="bundle3">Bundle 3:
<select name="bundle3">
    <option>0</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    </select></label>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:35:10.103

像这样的东西？

```
<script type="text/javascript">
function countBundles(){

    var bundle1 = parseInt(document.getElementById('bundle1').value, 10);
    var bundle2 = parseInt(document.getElementById('bundle2').value, 10);
    var bundle3 = parseInt(document.getElementById('bundle3').value, 10);

    if (bundle1+bundle2+bundle3>3){
        alert("too many bundles");
    }

}
</script> 
```

```
<form name="bundles">
<label for="bundle1">Bundle 1:<br /></label>
<input type="text" maxlength="1" size="10" id="bundle1" class="textInput" name="bundle1" onchange="countBundles()"/>
<label for="bundle2">Bundle 2:<br /></label>
<input type="text" maxlength="1" size="10" id="bundle2" class="textInput" name="bundle2" onchange="countBundles()"/>
<label for="bundle3">Bundle 3:<br /></label>
<input type="text" maxlength="1" size="10" id="bundle3" class="textInput" name="bundle3" onchange="countBundles()"/>
</form> 
```

# android - 如何在文件java中为listview设置textview的字体大小？

> ID：13014468
> 
> 赞同：0
> 
> 时间：2012-10-22T15:16:37.223
> 
> 标签：android, android-listview

我想知道如何在java中设置字体大小列表视图..有人想帮忙吗？

这是我的 listview 代码：

```
 Categories weather_data[] = new Categories[]
            {
                new Categories(R.drawable.dokter, "Cardiology"),
                new Categories(R.drawable.dokter, "Dentistry"),
                new Categories(R.drawable.dokter, "Dermatology and Venereology"),
                new Categories(R.drawable.dokter, "Disgetive Surgery"),
                new Categories(R.drawable.dokter, "ENT")
            };

    CategoriesAdapter adapter = new CategoriesAdapter(this,R.layout.listcategoriesitem, weather_data);

    lvcategories = (ListView)findViewById(R.id.lvcategories);

   lvcategories.setBackgroundResource(R.drawable.bawah2);

    lvcategories.setAdapter(adapter); 
```

谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:23:25.623

您可以使用自定义适配器：

```
private class CategoriesAdapter extends ArrayAdapter<Categories> {

        public CategoriesAdapter (Context context, int textViewResourceId,
                ArrayList<Categories> items) {
            super(context, textViewResourceId, items);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.row, null);
            }
            Categories o = this.getItem(position);
            if (o != null) {
                TextView tt = (TextView) v.findViewById(R.id.tvCategoryName);
                if (tt != null) {
                    tt.setText(o.getName());
                    tt.setTypeface(typeface);
                }
            }
            return v;
        }
    } 
```

# web - 为什么 Coda 2 不保存 ftp 访问的密码？

> ID：13014481
> 
> 赞同：2
> 
> 时间：2012-10-22T15:17:13.850
> 
> 标签：web, passwords, save, definition, coda

我最近在 Mac (OSX 10.8.2) 上切换到 Coda 2，并且在站点定义下，主机、用户名和所有其他信息保存得很好。但是，它不会保存我的密码。我没有检查“每次都询问”（抢先回答）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T15:47:36.217

找到了解决方案。如果您打开 Keychain Access，请找到以您的站点命名的密钥，例如 ftp.sitename.com。双击它并进入访问。使任何程序都可以使用它。然后，如果您返回 Coda，请输入一次密码并 d/c。重新打开程序时应该保存它:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T17:20:10.327

伟大的！但唯一缺少的是，您没有提及如何或从何处打开 KeyChain 访问。我使用 mac 聚光灯找到它。打开 Keychain 访问的实际位置：在 Applications > Utility > KeychainAccess 下

只需选择 ftp.yourwebsiteurl.com 双击它就会有两个选项卡。单击 AccessControl 选项卡 选择单选按钮选项：允许所有应用程序访问此项目。它会询问您的系统管理员密码是否允许。

返回 Coda > 右键单击​​您的网站 > 单击断开连接 现在重新输入您的密码 > 连接。

而已。您的密码将被记住以供进一步连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T17:14:46.970

Coda 2.x 内置了 FTP、git、SSH 等。

Coda 处理 FTP 的方式是让您将文件设置为“站点”

一旦你以这种方式设置它，它就会为该站点的所有方面保存 FTP 登录、git 登录、ssh 登录等。

做这个：

1.  打开 Coda - Coda 应自动在“站点”页面打开。如果没有，请按 Command-1 转到站点。
2.  右键单击，然后选择“添加站点”。
3.  填写网站的详细信息，然后保存。
4.  每当您打开该站点时，Coda 都会自动连接到服务器。

浏览对话框选项非常容易。

# javascript - 使用 DataJS 使用 OData 服务

> ID：13014482
> 
> 赞同：0
> 
> 时间：2012-10-22T15:17:22.030
> 
> 标签：javascript

我在 MVC 视图中有这个 javascript 代码我尝试使用 Datajs 调用 OData 服务：

```
$(document).ready(function() {
     var temp = OData.read("http://odata.netflix.com/v1/Catalog/Genres", function (data,  response) {
     var x = 3;

      });
}); 
```

我有一个断点，`var x = 3;`但不幸的是断点从未被击中！如果我把断点放在`OData.Read`我可以看到它调用 OData-Service 但是回调函数永远不会被触发，我不知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:37:28.743

在调用之前添加`OData.Read()`：

```
OData.defaultHttpClient.enableJsonpCallback = true; 
```

此外，您的请求未指定格式。将请求字符串更改为：*http ://odata.netflix.com/v1/Catalog/Genres?$format=json&$callback=?callbackHere*

# bash - 创建一个 shell 脚本，该脚本可以生成多个调用指定 Web 服务的并发进程

> ID：13014490
> 
> 赞同：3
> 
> 时间：2012-10-22T15:17:46.107
> 
> 标签：bash, shell, sh

我正在尝试创建一个负载测试 shell 脚本，基本上我想要做的是让脚本产生一些 N 个并发进程，并让每个进程调用一个指定的 URL 并执行一些基本操作。我很难弄清楚这一点 - 任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:26:14.897

have a look at this article:

[http://prll.sourceforge.net/shell_parallel.html](http://prll.sourceforge.net/shell_parallel.html)

as described: "Parallel batch processing in the shell

How to process a large batch job using several concurrent processes in bash or zsh

This article describes three methods of parallel execution: the first is not very performant and the other two are not safe to use. A more complete solution is called prll and can be found here. This article is not meant to be good advice, but instead laments the state of scriptable job control in shells."

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:37:17.260

如果你真的需要使用 shell，看看[Bash:parallel processes](http://www.nrtm.org/index.php/2011/05/09/bash-parallel-processes/ "Bash：并行进程（NerdyRoom 博客）")。但是有一些负载测试工具，例如[ab（Apache HTTP 服务器基准测试）](http://httpd.apache.org/docs/2.2/programs/ab.html "ab - Apache HTTP 服务器基准测试工具")可以为您完成这项工作。

您可以像这样简单地使用*ab ：*

```
ab -n 10 -c 2 -A myuser:mypassword http://localhost:8080/ 
```

有关更多示例，请查看[Howto：Webserver 性能基准测试](http://www.cyberciti.biz/tips/howto-performance-benchmarks-a-web-server.html "Howto：性能基准测试 Web 服务器")。

# java - Java XML解析器错误从Word复制/粘贴时无效字符Unicode 0x1A

> ID：13014492
> 
> 赞同：0
> 
> 时间：2012-10-22T15:17:48.003
> 
> 标签：java, xml, unicode, xml-parsing, sax

很抱歉重复发帖。但我之前的帖子是基于 Flex 的：

[Flex TextArea - 从 Word 复制/粘贴 - xml 解析中的 unicode 字符无效](https://stackoverflow.com/questions/12905054/flex-textarea-copy-paste-from-word-invalid-unicode-characters-on-xml-parsing)

但现在我将其发布在 Java 端。

问题是：

我们有一个电子邮件功能（我们应用程序的一部分），我们在其中创建一个 XML 字符串并将其放入队列中。另一个应用程序接收它，解析 XML 并发送电子邮件。

`(<BODY>....</BODY)`当从 Word 复制/粘贴电子邮件文本时，我们会收到 XML 解析器异常：

```
Invalid character in attribute value BODY (Unicode: 0x1A) 
```

由于我们也使用 Java，我正在尝试使用以下方法从字符串中删除无效字符：

```
body = body.replaceAll("‘", "");
body = body.replaceAll("’", ""); 
```

//去除无效字符

```
public String stripNonValidXMLCharacters(String in) {
        StringBuffer out = new StringBuffer(); // Used to hold the output.
        char current; // Used to reference the current character.

        if (in == null || ("".equals(in))) {
            return ""; // vacancy test.
        }
        for (int i = 0; i < in.length(); i++) {
            //NOTE: No IndexOutOfBoundsException caught here; it should not happen.
            current = in.charAt(i); 
            if ((current == 0x9) 
                    || (current == 0xA) 
                    || (current == 0xD) 
                    || ((current >= 0x20) && (current <= 0xD7FF)) 
                    || ((current >= 0xE000) && (current <= 0xFFFD)) 
                    || ((current >= 0x10000) && (current <= 0x10FFFF)))
                out.append(current);
        }
        return out.toString();
    } 
```

//再次剥离

```
private String stripNonValidXMLCharacter(String in) {      
        if (in == null || ("".equals(in))) { 
            return null;
        }
        StringBuffer out = new StringBuffer(in);
        for (int i = 0; i < out.length(); i++) {
            if (out.charAt(i) == 0x1a) {
                out.setCharAt(i, '-');
            }
        }
        return out.toString();
    } 
```

//如果有特殊字符则替换

```
 emailText = emailText.replaceAll("[\\u0000-\\u0008\\u000B\\u000C" 
                        + "\\u000E-\\u001F" 
                        + "\\uD800-\\uDFFF\\uFFFE\\uFFFF\\u00C5\\u00D4\\u00EC"
                        + "\\u00A8\\u00F4\\u00B4\\u00CC\\u2211]", " ");
            emailText = emailText.replaceAll("[\\x00-\\x1F]", "");
            emailText = emailText.replaceAll(
                                    "[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f]", "");
            emailText = emailText.replaceAll("\\p{C}", ""); 
```

但它们仍然不起作用。XML 字符串也以：

```
 <?xml version="1.0" encoding="UTF-8"?>  
                    <EMAILS xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNameSpaceSchemaLocation=".\\SMTPSchema.xsd\"> 
```

我认为当 Word 文档中有多个选项卡时会出现问题。就像例如。

```
Text......text
<newLine>
<tab><tab><tab> text...text
<newLine> 
```

生成的 xml 字符串是：

```
<?xml version="1.0" encoding="UTF-8"?> <EMAILS xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNameSpaceSchemaLocation=".\SMTPSchema.xsd"> <EMAIL SOURCE="t@t.com" DEST="t@t.com" CC="" BCC="t@t.com" SUBJECT="test 61" BODY="As such there was no mechanism constructed to migrate the enrollment user base to Data Collection or to keep security attributes for common users in sync between the two systems.  The purpose of this document is to outline two strategies for bring the user base between the two applications into sync.?  It still is the same.  ** Please note: This e-mail message was sent from a notification-only address that cannot accept incoming e-mail. Please do not reply to this message."/> </EMAILS> 
```

请注意“？” 是 Word 文档中有多个选项卡的地方。希望我的问题很清楚，有人可以帮助解决问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:29:15.203

您是否尝试过使用诸如 TagSoup / JSoup / JTidy 之类的 XML 库来清理您的 XML？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:34:26.530

无效（隐藏）字符来自 UI (Flex TextArea)。所以必须在 UI 中处理好它，以免它也传递给 Java。使用 Flex textArea 中的 chagingHandler 处理并删除它以限制字符。

# java - HttpClient 自动上传文件到远程服务器

> ID：13014493
> 
> 赞同：1
> 
> 时间：2012-10-22T15:17:49.307
> 
> 标签：java, file-upload, upload, httpclient

我正在尝试通过在线网站转换许多 doc 文件，使用 HttpClient 来模拟 Http 请求

`URI uri = new URI("http://www.docx2doc.com/convert/convert-file");`

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(uri);

    MultipartEntity reqEntity = new MultipartEntity(
        HttpMultipartMode.BROWSER_COMPATIBLE);

    reqEntity.addPart("email",new StringBody(""));
    reqEntity.addPart("input_type",new StringBody("doc"));
    reqEntity.addPart("output_type",new StringBody("html"));
    reqEntity.addPart("script",new StringBody("converters"));

    FileBody bin = new FileBody(
        new File("mydoc.docx"));
    reqEntity.addPart("input_file", bin );

    httppost.setEntity(reqEntity);` 
```

帖子中的所有参数（电子邮件、输出类型...）都被服务器接受，但文件不接受...

我该如何处理？

谢谢你。

# hibernate - Hibernate createCriteria JOIN, ORDER, DISTINCT 从一个级别

> ID：13014497
> 
> 赞同：2
> 
> 时间：2012-10-22T15:18:15.280
> 
> 标签：hibernate, grails, createcriteria

我有 3 个课程：第一，第二，第三我有大约像这样的 createria：

```
First.createCriteria().listDistinct {
            if(....){fetchMode("second", FetchMode.JOIN)
            fetchMode("second.third", FetchMode.JOIN)}
            order(sortOrder, orderBy)
            order("id", "desc")
} 
```

（当“如果”为假时，createCriteria 工作正常）

当 "if" true Hibernate 生成这样的 sql 请求时

```
select 
  distinct id,
  secondfield
from
  FIRST as firsts
inner join
  SECOND
       ... on ...
inner join
  THIRD
       ... on ...
where(...)
order by 
     firsts.name asc
     firsts.id desc 
```

但是因此无法执行sql请求，因为（distinct，join，order by）不能在同一级别上。我在 SQL 开发人员那里吃午饭。没有 (distinct, join, order by) 之一的此请求可以正常工作。我能用这个做什么。可以通过我可以强制休眠在“不同的选择”级别中执行（加入，不同）和（顺序）吗？我如何用另一个 SELECT 包装 SELECT？

```
select *
from 
   (select 
     distinct id,
     secondfield
   from
     FIRST as firsts
   inner join
     SECOND
          ... on ...
   where(......))
order by
    (......) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:56:51.437

你可以试试 Groovy.SQL.*，它比 HQL 查询更灵活。

试试这个： http: [//groovy.codehaus.org/Tutorial+6+-+Groovy+SQL](http://groovy.codehaus.org/Tutorial+6+-+Groovy+SQL)

# bash - 在bash中将行ID添加到具有连续计数的多个文件

> ID：13014504
> 
> 赞同：1
> 
> 时间：2012-10-22T15:18:51.713
> 
> 标签：bash

假设我有文件 A.tsv、B.tsv 和 C.tsv。

做`cat -n A.tsv > A-id.tsv`的是我想要一个文件的输出。如何制作一个简单的 bash 命令来处理所有 3 个文件，使行 ID 与前一个文件连续，并且我可以获得 3 个单独的文件，A-id.tsv、B-id.tsv 和 C-id .tsv？

例如，如果 A.tsv 有 3 行，则 B.tsv 将以 4 开头，输出格式类似于`cat -n B.tsv`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:23:09.840

你为什么不`cat A.tsv B.tsv C.tsv | cat -n > ABC.tsv`呢？

通过特瓦尔伯格

> 或者更好的是， cat -n A.tsv B.tsv C.tsv > ABC.tsv

更新：

考虑到这不适用于您的 linux 发行版，这里有许多替代方案：

`cat A.tsv B.tsv C.tsv | nl > ABC.tsv`

`cat A.tsv B.tsv C.tsv | grep -n '^' > ABC.tsv`-- 该选项产生不同类型的格式，即： $linenumber: $line

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:03:56.450

这是一个 awk 替代方案：

`awk '{outfile=FILENAME; sub(".tsv", "-id.tsv", outfile); printf("%6d %s\n", NR, $0) >outfile;}' A.tsv B.tsv C.tsv`

更新、优化版本：

`awk 'FNR==1 {outfile=FILENAME; sub(".tsv", "-id.tsv", outfile);} {printf("%6d %s\n", NR, $0) >outfile;}' A.tsv B.tsv C.tsv`

# asp.net-mvc - 禁用 ASP.NET MVC 验证

> ID：13014506
> 
> 赞同：0
> 
> 时间：2012-10-22T15:19:05.490
> 
> 标签：asp.net-mvc, validation

我的 asp.net mvc 应用程序中有一个简单的 ViewModel 类。

```
public class DestinationViewModel
{
     [Display(Name = "Country")]
     [some validation attributes]
     public string CountryName { get; set; }

     [Display(Name = "Destination")]
     [some validation attributes]
     public string DestinationName { get; set; }

     public DateTime? DepartureDate { get; set; }

     public DateTime? ArrivalDate { get; set; }
} 
```

当我将数据传递给控制器​​时，我的应用程序显示无效出发和到达日期的验证错误。但我不想要这样的行为。有什么方法（属性）可以仅在`DepartureDate`和`ArrivalDate`字段上禁用验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:40:26.987

The MVC data binder will attempt to convert which ever value you put in your input field to it's corresponding ViewModel type. In your scenario, you are passing "*21321*" which obviously isn't going to work as it's not valid Date/Time.

Either pass a valid `DateTime` string value or leave it empty (as the field is nullable).

Tip - It's usually a good idea from a users point of view to make date fields readonly and provide a date picker of some sort to avoid issues with manually entering valid date formats.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:46:07.873

如果你想写任何你想要的东西，那么使用`string`，不`DateTime?`使用或使用以下解决方案之一：

*   [禁用某些字段的验证](https://stackoverflow.com/questions/2519568/disable-validation-on-certain-fields)
*   [在某些情况下禁用必需的验证属性](https://stackoverflow.com/questions/5367287/disable-required-validation-attribute-under-certain-circumstances)

# java - 切换 A2DP 设备 (Android)

> ID：13014509
> 
> 赞同：12
> 
> 时间：2012-10-22T15:19:19.370
> 
> 标签：java, android, bluetooth, a2dp

我有两个配对的蓝牙设备（用于电话音频的车头单元和用于 A2DP 的单独蓝牙接收器）。在我的手机上有一个“用于媒体音频”的复选框，我必须手动切换我的 A2DP 输出才能进入汽车的扬声器。我的目标是以编程方式切换它。

我尝试将 AudioManager 类与已弃用的 setBluetoothA2dpOn 和 setBluetoothScoOn 一起使用，但似乎都没有任何效果。我能够获得蓝牙配对设备的列表并获得我想要切换的连接的句柄，但我似乎无法完全正确。我还尝试获取默认的蓝牙适配器，然后使用 getProfileProxy，但我觉得我在那里叫错了树。

谁能指出我正确的方向？基本上我想做的就是选中“用于媒体音频”框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:45:45.597

不久前，我在尝试将蓝牙设备连接到安卓手机时遇到了类似的问题。尽管您的设备配置文件不同，但我认为解决方案是相同的。

首先，您需要在您的项目中创建一个名为的包，`android.bluetooth`并将以下**IBluetoothA2dp.aidl**放入其中：

```
package android.bluetooth;

import android.bluetooth.BluetoothDevice;

/**
 * System private API for Bluetooth A2DP service
 *
 * {@hide}
 */
interface IBluetoothA2dp {
    boolean connectSink(in BluetoothDevice device);
    boolean disconnectSink(in BluetoothDevice device);
    boolean suspendSink(in BluetoothDevice device);
    boolean resumeSink(in BluetoothDevice device);
    BluetoothDevice[] getConnectedSinks(); 
    BluetoothDevice[] getNonDisconnectedSinks();
    int getSinkState(in BluetoothDevice device);
    boolean setSinkPriority(in BluetoothDevice device, int priority);
    int getSinkPriority(in BluetoothDevice device);

    boolean connectSinkInternal(in BluetoothDevice device);
    boolean disconnectSinkInternal(in BluetoothDevice device);
} 
```

然后，要访问这些功能，请将以下类放入您的项目中：

```
public class BluetoothA2dpConnection {

private IBluetoothA2dp mService = null;

public BluetoothA2dpConnection() {

    try {
        Class<?>  classServiceManager = Class.forName("android.os.ServiceManager");
        Method methodGetService = classServiceManager.getMethod("getService", String.class);
        IBinder binder = (IBinder) methodGetService.invoke(null, "bluetooth_a2dp");
        mService = IBluetoothA2dp.Stub.asInterface(binder); 
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }
}

public boolean connect(BluetoothDevice device) {
    if (mService == null || device == null) {
        return false;
    }
    try {
        mService.connectSink(device);
    } catch (RemoteException e) {
        e.printStackTrace();
        return false;
    }
    return true;
}

public boolean disconnect(BluetoothDevice device) {
    if (mService == null || device == null) {
        return false;
    }
    try {
        mService.disconnectSink(device);
    } catch (RemoteException e) {
        e.printStackTrace();
        return false;
    }
    return true;
} 
```

}

最后，要连接您的 A2dp 设备，请从配对设备列表中选择一个 BluetoothDevice 并将其作为`connect`方法参数发送。请务必选择具有正确配置文件的设备，否则您将遇到异常。

我已经在具有 android 版本 2.3 的手机中测试了这个解决方案，它运行良好。

对不起任何英语错误。我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:44:34.890

首先，您需要设置程序以激活手机上的蓝牙并选择它应该通过配对的设备

```
bluetoothAdapter.disable() / enable() 
```

（我不确定配对，但这必须通过一些配置活动来完成）

然后你应该设置A2DP连接到汽车的音响

按照这个链接尝试找到它的代码，如果我有时间我会尝试为你找到它，但它是一个开始 =]

[隐藏和内部 api](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)

# wpf - 如何在不破坏 MVVM 的情况下向 xamdatagrid cellactivated 事件添加命令

> ID：13014512
> 
> 赞同：3
> 
> 时间：2012-10-22T15:19:27.987
> 
> 标签：wpf, commandbinding, xamdatagrid

我正在使用 XamDataGrid 来显示我的数据。现在我想为每一列添加不同的命令。

在整个网格上使用 CellActivated 事件然后绑定到 ActiveCell 将不起作用，因为 Viewmodel 必须了解 View 以及如何从 ActiveCell 返回的对象中评估 Column。

我正在寻找一种方法来告诉 XamDataGrid 应该调用哪个命令。

我想象这样的事情：

```
<igDP:Field Name="Dev"                  >
   <igDP:Field.Settings>
      <igDP:FieldSettings CellValuePresenterStyle="{StaticResource DevStyle}" ActivateCommand="{Binding DevCommand}/>
   </igDP:Field.Settings>
</igDP:Field> 
```

我真的不在乎命令是否必须是我的视图模型或数据项的属性。

我该如何实施？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:26:42.467

`Attached Behavior`并`MVVM`齐头并进。

通过附加行为处理您的事件并提供`Viewmodel.ICommand`给它，它会在处理事件时执行。然后，您可以将已处理事件中的事件参数发送到`ViewModel.ICommand`as 命令参数。

**您的附属财产**

```
 public static class MyBehaviors {

    public static readonly DependencyProperty CellActivatedCommandProperty
        = DependencyProperty.RegisterAttached(
            "CellActivatedCommand",
            typeof(ICommand),
            typeof(MyBehaviors),
            new PropertyMetadata(null, OnCellActivatedCommandChanged));

    public static ICommand CellActivatedCommand(DependencyObject o)
    {
        return (ICommand)o.GetValue(CellActivatedCommandProperty);
    }

    public static void SetCellActivatedCommand(
          DependencyObject o, ICommand value)
    {
        o.SetValue(CellActivatedCommandProperty, value);
    }

    private static void OnCellActivatedCommandChanged(
           DependencyObject d, 
           DependencyPropertyChangedEventArgs e)
    {
        var xamDataGrid = d as XamDataGrid;
        var command = e.NewValue as ICommand;
        if (xamDataGrid != null && command != null)
        {
           xamDataGrid.CellActivated +=
              (o, args) =>
                 {
                     command.Execute(args); 
                 };
        }
    }
} 
```

**你的 XAML：**

```
 <infragistics:XamDataGrid ...
        local:MyBehaviors.CellActivatedCommand="{Binding MyViewModelCommand}" /> 
```

希望能帮助到你。

# java - 在 Selenium 中定位 href 元素

> ID：13014514
> 
> 赞同：1
> 
> 时间：2012-10-22T15:19:45.223
> 
> 标签：java, selenium, selenium-rc, selenium-ide, selenium-webdriver

下面是我的代码

```
<TD ALIGN="LEFT" width="65%" id="oldcontent" >3\. Download csv template
    <a href="javascript:doformsubmit('3');"><IMG src="images/date_pick.gif" border=0></a>
</TD> 
```

如何找到具有 javascript 函数调用且没有 id 的 href 元素。在此先感谢您的帮助

我在回答我自己的问题：以下语法有效

```
assertTrue(selenium.isElementPresent("//a[@href=\"javascript:doformsubmit('3');\"]")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:24:48.980

你可以使用 BeautifulSoup 来读取网页的源代码。

以下解决方案是用python制作的，但你应该能够在java中使用类似的东西。编辑：除了 BeautifulSoup 不适用于 java :) => 你应该切换到 python。

```
soup = BeautifulSoup(br.page_source)
tmp = soup.findAll('a')
for t in tmp:
     string =  t['href'] 
```

然后你可以使用正则表达式来捕获每个具有 javascript 的 href。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:25:12.477

您可以使用适当的 Xpath 表达式（类似于 //a[(@href='javascript:doformsubmit('3');')]），查看这篇[文章](http://www.theautomatedtester.co.uk/tutorials/selenium/selenium_xpath.htm)以获取更多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:23:12.750

这样做的方法是 -

> driver.findElement(By.linkText("javascript:doformsubmit('3');"));

如果您的意图是单击href，您实际上可以使用TD，因为我看到它可以很容易地找到，因为它有一个ID。

# google-apps-script - onedit 为什么不能发邮件？

> ID：13014515
> 
> 赞同：3
> 
> 时间：2012-10-22T15:19:46.877
> 
> 标签：google-apps-script, google-sheets, triggers

我有这个简单的脚本，当单元格更改时应该发送电子邮件

```
function onEdit(e) {  

var doc = e.source; 

 var r = doc.getActiveRange().getValue();

 if (r == "Niccolò"){
var a = doc.getActiveRange().setBackground('#ff0000');
var b = GmailApp.sendEmail('name@gmail.com', 'subject', 'body');

} 
```

}

此功能还会更改单元格颜色。问题是单元格颜色有效，因此它在不发送任何电子邮件的情况下发生了变化。它看起来很简单，我不明白为什么不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:51:18.523

`onEdit()`像, `onOpen(`)这样的简单触发器或`onFormSubmit()`由于未经授权而运行而具有有限的可能操作集，请参阅[文档](https://developers.google.com/apps-script/understanding_triggers)以获取更多详细信息。

所以你描述的这种行为是正常的。

您应该使用可安装的触发器，如同一文档页面中所述。

这是文档的摘要：

*这些简单的触发器响应 Google 电子表格中的操作而运行，它们以活动用户的身份运行。例如，如果 Bob 打开电子表格，则 onOpen 函数以 Bob 的身份运行，无论是谁将脚本添加到电子表格。出于这个原因，简单触发器的操作受到限制：当电子表格以只读模式打开时，它们无法执行。他们无法确定当前用户。他们无法访问任何需要以该用户身份进行身份验证的服务。例如，谷歌翻译服务是匿名的，可以通过简单的触发器访问。Google 日历、Gmail 和协作平台不是匿名的，简单的触发器无法访问这些服务。他们只能修改当前的电子表格。禁止访问其他电子表格。有关事件权限的更多信息，*

# android - 在 Android 应用程序开发中使用图像

> ID：13014517
> 
> 赞同：4
> 
> 时间：2012-10-22T15:19:49.920
> 
> 标签：android, android-layout

这里是一个新手问题，但我在网上或我所拥有的书中找不到明确的答案。我正在设计一个与所有尺寸的 android 设备兼容的应用程序，并且我想在我的应用程序中显示图像。我知道android会自动缩放图像以适应正在显示的屏幕的分辨率。

我的问题是我在使用的图像中寻找什么？例如，我有一张 2418 x 2192 @ 240dpi 的图片。据我所知，这对于平板电脑等更大的屏幕来说应该是完美的。如果我把它放到我项目的 xhdpi 图像文件夹中，它会被其他设备检测到并缩放以适应它们的尺寸/分辨率吗？我是否必须在 Photoshop 中创建此图像的 3 个不同版本并将其放入相关的 dpi 文件夹中？

我找不到一个很好的初学者教程，所以不知道我在做什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:32:59.243

这是支持多种屏幕尺寸的最佳起点：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

简短的回答是，是的，您根据分辨率将图像放在不同的目录中，Android 将根据设备的属性选择要使用的图像。您应该制作一组较小的图像，例如，用于 mdpi 和 hdpi。您不必“必须”这样做，如果您只是将图像放入 drawable 中，它可以按比例缩小，但这通常不是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:34:51.740

这是您在几乎所有项目中都会遇到的问题，因为 Android 设备实在太多了。[这个资源](http://developer.android.com/guide/practices/screens_support.html)对我帮助很大。

如果您只有一个文件夹中的资源，Android 将为您扩展它。不同的可绘制文件夹旨在允许开发人员以最小的努力提供适当缩放的图像。例如，除了“标准”mdpi 图像之外，您还需要提供 xhdpi 以使资源在高分辨率设备上看起来更好。即使您只提供了一个图像，该应用程序也可以在所有分辨率下正常工作（并且具有缩放图像）。但是，如果您提供了一个 xhdpi 可绘制对象，那么缩小所有这些会产生一些开销，尤其是对于图标，结果可能看起来不太好（甚至无法识别）。

我通常为 mdpi 和 xhdpi 提供资产，但如果应用程序会在低分辨率设备上频繁使用，我也会提供 ldpi。如果可能的话，我包括所有四个。

注意：您提到的图像太大而无法包含在 UI 资源中，最好将其放置在资产中并根据请求加载。即使在 xhdpi 设备上，也必须按比例缩小。

# sql - SQL Server 中的查询优化器

> ID：13014518
> 
> 赞同：-1
> 
> 时间：2012-10-22T15:19:51.707
> 
> 标签：sql, sql-server-2008-r2, query-optimization

我们有以下代码：

```
select * from View1 where (Timestamp >= @x) and (SomeCode like 'ABC%') 
```

它运行**得非常慢**。但是代码

```
select * from View1 where (Timestamp >= @x)      (*) 
```

跑得**很快**。`SomeCode like...`过滤器在前面的 (*) 代码上也运行得非常快。因此，两相时速度很快。（`View1`是一个 CLR 计算视图。）

**问题**：如何建议SQL Server 2008 R2 分两个阶段进行查询（更准确地说是两个过滤器），即先`Timestamp`过滤器，然后`SomeCode`过滤器。

**注意**：嵌套查询对我们不起作用，它也很慢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-22T15:22:22.157

可能有更好的方法，但这对我有用：

```
SELECT * from (SELECT * FROM View1 WHERE Timestamp >= @x) x
WHERE field_x LIKE 'ABC%' 
```

这会强制首先运行快速查询。

*回复评论：*

也许“力”这个词不合适，但我肯定观察到它会有所作为。如果有人有更好的建议，我会修改这个。

**回复您的评论：**

“不起作用”=仍然很慢？

在这种情况下：时间戳列是否被索引？SQL Server 是否因较大的查询而在资源（内存、磁盘空间）上运行不足？你看过执行计划吗？

如果你*真的*强迫这个问题会发生什么：

```
SELECT * into #tmp FROM View1 WHERE Timestamp >= @x
SELECT * from #tmp WHERE field_x LIKE 'ABC%' 
```

# android - 列表视图中来自 sqlite 数据库的随机条目？

> ID：13014521
> 
> 赞同：0
> 
> 时间：2012-10-22T15:19:56.480
> 
> 标签：android, sqlite, listview

我有一个奇怪的错误。[我使用这个http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)创建了一个带有标题的列表视图。我已经用一个直接数组（没有那么多）填充了标题列表，并从预先存在的数据库中填充了项目列表视图。两个列表视图都显示得很好，并且项目单击到相关选择正常，但是列表中有**来自搜索参数之外的**条目。

这是来自返回列表的类：

```
private Cursor getBeginnersCursor()
{
    this.cursor = null;
    try{

        this.getmDB();
        if(this.mDB == null)
        {
            System.out.println("mDB = null");
        }

        this.cursor = mDB.query(TABLE_NAME,new String[]{KEY_ID,GAME_NAME}, "_id > 11 AND _id < 35",
                null,null,null,null);
        if(this.cursor != null)
        {
            this.cursor.moveToNext();
        }
        mDB.close();
        return this.cursor;
    }catch(SQLException e){
        throw e;
    }
}

private List<String> getBeginnersArrayList()
{
    this.getmDB();

    this.cursor = this.getBeginnersCursor();

    String result;

    for(this.cursor.moveToFirst(); !this.cursor.isAfterLast();this.cursor.moveToNext())
    {
        result = this.cursor.getString(1) + "\n";
        this.beginnersArrayList.add(result);
    }
    this.cursor.close();
    return beginnersArrayList;
} 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:47:47.923

好的，我解决了。SQLite 似乎没有将文本整数值视为与整数值相同，因此它将 id 1 混合在 id 的 9 和 10 之间，依此类推。我创建了另一列来定义这些部分。

# django - 保存时更改 django 子对象的属性

> ID：13014528
> 
> 赞同：0
> 
> 时间：2012-10-22T15:20:23.883
> 
> 标签：django, foreign-key-relationship

我有两个模型，一个项目和一个动作：

```
class Project(models.Model):
    name = models.CharField("Project Name", max_length=200, unique = True)
    complete = models.BooleanField(default=False, verbose_name="Complete?")

class Action(models.Model):
    name = models.CharField("Action Name", max_length=200)
    project = models.ForeignKey(Project, blank=True, null=True, verbose_name="Project")
    notes = models.TextField("Notes", blank=True)
    complete = models.BooleanField(default=False, verbose_name="Complete?")
    status = models.IntegerField("Action Status", choices = STATUS, default=0) 
```

当一个项目被标记为完成时，我希望它的所有操作也被标记为完成。

我正在尝试在项目的保存方法中执行此操作：

```
 def save(self, **kw):
        self.last_modified = datetime.today()
        self.action.all().update(complete=True)

        super(Project, self).save(**kw) 
```

我被困在上面的第三行。我不太确定如何设置与该项目相关的所有操作以完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:28:13.180

你试过钩子系统吗？

[https://www.djangoproject.com/documentation/0_91/models/save_delete_hooks/](https://www.djangoproject.com/documentation/0_91/models/save_delete_hooks/)

我认为这就是您要寻找的东西 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:27:16.573

在保存方法中使用...

```
Action.objects.filter(project = self).update(complete=True) 
```

# ruby-on-rails-3 - 为什么我的新 Ruby on Rails 站点无法开始开发？

> ID：13014538
> 
> 赞同：0
> 
> 时间：2012-10-22T15:21:12.817
> 
> 标签：ruby-on-rails-3, webrick

我在运行 ruby​​ 1.9.3 和 rails 3.2.8 的 Ubuntu 服务器上使用 user-per-app 配置。

当我在一个用户（我的主用户）的主目录中创建一个新站点`rails new test_app`然后`rails s`从应用程序目录运行时，我得到

```
Rails 3.2.8 application starting in development on http://0.0.0.0:3000 
```

但是当我`su`到另一个用户并在该用户的主目录中运行相同的命令时，我得到

```
Rails 3.2.8 application starting in production on http://0.0.0.0:3000 
```

即使我跑步也是一样的

```
rails s -e development 
```

无论我作为其他用户做什么，我都无法让 WEBrick 开始开发。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:34:53.877

这一定是我发布 Stack Exchange 问题并在片刻内[自己找到答案的日子。](https://askubuntu.com/questions/204670/why-arent-my-bash-aliases-applied-when-logging-in-to-server)

显然，这两个用户有些不同，我就是不知道是什么。最终用户之间的区别在于，作为失败的用户，我正在玩@wayne-e-seguin 的[SM 框架](https://smf.sh/)。默认安装将`environment`and设置`RAILS_ENV`为生产。将它们设置为“开发”`~/.smrc`就可以了。

# perl - Perl中的随机/随机散列键

> ID：13014541
> 
> 赞同：3
> 
> 时间：2012-10-22T15:21:21.210
> 
> 标签：perl, hash, random

我多次运行哈希，而不更改哈希的内容。我希望哈希每次都以随机顺序迭代（我知道哈希的内部顺序是随机的，但我需要改变随机顺序）

我想要的代码如下：

```
 for (my $i=1; $i<=$PopulationsizeA;$i++){ 
    my $P1 = rand;
    my $total=0; 
    my $Parent1='Parent1';
    my $P1A;
while ((my $Genotype1, my $Fitness1)=each (%Normalisedfithash)){
        $P1A=$P1-$total;

        if ($Parent1 eq 'Parent1'){ 
            if ($P1A<=$Fitness1){

                $Parent1=$Genotype1;
                $P1Tallyhash{$Genotype1}+=1; 

            }
            else{
                $total+=$Fitness1;
            }
        }
    }
  } 
```

我需要 %Normalisedfithash 的顺序来随机更改 for 循环的每次迭代。我看到了一个类似的[问题](https://stackoverflow.com/questions/6684209/how-to-shuffle-the-values-in-a-hash)，但是我不希望这些值随机更改键，而是希望键保持其关联值但随机更改顺序。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T15:28:06.733

最简单的方法可能是打乱从哈希中返回的键列表。`shuffle`from[`List::Util`](https://metacpan.org/module/List::Util)是一个很好的实现。

```
use strict;
use warnings;

use List::Util 'shuffle';

...

foreach my $Genotype1( shuffle keys %Normalisedfithash ) { 
    my $Fitness1 = $Normalisedfithash{$Genotype1};
} 
```

`shuffle`每次都会以不同的顺序对列表进行洗牌。

编辑：我应该说它每次都会以*随机顺序对列表进行洗牌。*巧合的是，顺序可能与前一次相同。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T15:27:44.907

```
use List::Util qw(shuffle);

...
foreach my $Genotype1 (shuffle( keys %Normalisedfithash )) {
    my $Fitness1 = $Normalisedfithash{$Genotype1};
    ...
} 
```

# ruby-on-rails - 验证多对多圈

> ID：13014543
> 
> 赞同：0
> 
> 时间：2012-10-22T15:21:33.697
> 
> 标签：ruby-on-rails

我在这里有这个对象关联：

```
Entry *--1 Category *--1 Project *--* User 1--* Entry 
```

解释：一个条目属于一个有很多条目的类别，一个类别属于一个有很多类别的项目——很多用户可以有很多项目。这个用户也有很多条目，一个条目属于一个用户。

当条目与类别和用户关联一起保存时，我想确保该类别属于分配给用户的项目。

我考虑过实现一个自定义验证器来获取工作日志的项目并检查它是否在用户的项目列表中。

是否有更类似于 Rails 的方式，或者我是否走在正确的轨道上？

# java - 使用数据库中表中的数据在java中动态生成xml

> ID：13014544
> 
> 赞同：1
> 
> 时间：2012-10-22T15:21:48.063
> 
> 标签：java, mysql, xml, json

这是过去几天我目前遇到的问题。我正在寻找有关如何处理的指导/方法。欢迎提供提示和建议。所以这是问题所在。数据库有一个表“**组**”，它有两列：**group_id** on **parent_group_id**.group_id 是表的主键。该表中的所有条目都表示组/子组。如果从前端添加子组，则使用自动生成的 group_id 将条目插入到组表中MySQL 生成的。parent_group_id 对应于添加子组的组的 group_id。所以本质上它就像 group_id 列的外键。我的任务是在 java 中使用组表中的数据。所以这就是我卡住的地方。我知道这将是一个需要编写的递归函数，但无法弄清楚如何动态创建节点并同时从 Db 填充数据。最终 XML 需要作为json数据发送到前端。

一个组可以有 n 个子组，并且层次结构可以继续。例如，车辆是 group_id =1 的根节点。它可以将汽车和自行车作为子组。所以对于汽车和自行车，父组 ID 将为 1，并且组 ID 分别为 2 和 3。

PS：这是我在过去一年中第一次使用这个网站。如果需要更多信息或者你是否能够理解我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:54:13.160

如果您将任务分成两部分，它将更易于管理。

以下是有关在关系数据库中查询分层数据的一些有用链接，特别是在 MySQL 中：

[在关系数据库中存储分层数据的选项有哪些？](https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database)

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

[http://www.slideshare.net/billkarwin/models-for-hierarchical-data](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)

[http://en.wikipedia.org/wiki/Common_table_expressions#Common_table_expression](http://en.wikipedia.org/wiki/Common_table_expressions#Common_table_expression)

只要您对查询结果进行了正确排序，就可以递归地遍历它，逐步构建 XML 树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:37:21.393

能够通过使用递归函数来解决它:)。使用实体类加载所有数据，然后使用递归函数迭代数据以构建树状结构。我没有尝试采用sql方式。

# c++ - C++：如何声明私有成员对象

> ID：13014545
> 
> 赞同：1
> 
> 时间：2012-10-22T15:21:50.527
> 
> 标签：c++, initialization, copy-constructor, member

> **可能重复：**
> [如何为成员使用非默认构造函数？](https://stackoverflow.com/questions/2088944/how-do-you-use-the-non-default-constructor-for-a-member)

我有当前的代码：

```
class ImagePoint {
private:
    int row;
    int col;

public:
    ImagePoint(int row, int col){
        this->row = row;
        this->col = col;
    }

    int get_row(){
        return this->row;
    }

    int get_col(){
        return this->col;
    }
}; 
```

我想这样做：

```
class TrainingDataPoint{
private:
    ImagePoint point;
public:
    TrainingDataPoint(ImagePoint image_point){
        this->point = image_point;
    }
}; 
```

但这不会编译，因为该行`ImagePoint point;`要求`ImagePoint`类有一个空的构造函数。替代方案（根据我的阅读）说我应该使用指针：

```
class TrainingDataPoint{
private:
    ImagePoint * point;
public:
    TrainingDataPoint(ImagePoint image_point){
        this->point = &image_point;
    }
}; 
```

但是，一旦构造函数完成运行，这个指针会指向一个清除的对象吗？如果是这样，我必须制作一份副本`image_point`吗？这需要一个复制构造函数吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T15:22:47.370

您需要使用构造函数初始化程序列表：

```
TrainingDataPoint(const ImagePoint& image_point) : point(image_point){
} 
```

如果可能，您应该更喜欢这个。但是，在某些情况下您必须使用它：

*   没有默认构造函数的成员（如您所述）
*   成员参考
*   `const`会员

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:42:18.163

您不需要知道这些事情，因为您不会使用该代码，而只是为了完整性：

> 一旦构造函数完成运行，这个指针会指向一个清除的对象吗？

`image_point`是的，当构造函数退出时，参数被销毁。所以你是对的，将指向它的指针存储在对象中并在之后尝试使用它是不正确的。

> 如果是这样，我是否必须制作 image_point 的副本？

这样做可以，但是您不打算使用此代码的原因是您将其复制到*哪里的问题。*

> 这需要一个复制构造函数吗？

是的，但`ImagePoint`已经有一个复制构造函数，编译器会自动为您生成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:23:30.373

你所读的是错误的。正确的选择是使用初始化列表

```
class TrainingDataPoint{
private:
    ImagePoint point;
public:
    TrainingDataPoint(ImagePoint image_point) : point(image_point){
    }
}; 
```

*顺便说一句，这与私人*成员无关，如果他们是公开的，你会遇到同样的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T15:25:40.797

只需使用构造函数初始化列表：

```
class TrainingDataPoint 
{
private:
    ImagePoint point;
public:
    TrainingDataPoint(const ImagePoint &imgpt) 
         : point(imgpt)
    {
        // other code here as necessary. point has already been initialized
    }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T17:05:20.557

使用构造函数初始化程序将解决您的问题。

```
TrainingDataPoint(const ImagePoint& image_point) : point(image_point){
} 
```

# git - 在进行更改之前我忘记签出分支

> ID：13014547
> 
> 赞同：20
> 
> 时间：2012-10-22T15:21:53.757
> 
> 标签：git, git-branch

我在我的 git 存储库中添加了一个新分支，用于添加我正在添加的新功能，但忘记显式检查它。从那以后我更改了很多文件而没有提交，但我希望能够将这些更改提交到备用分支，而不是主分支。我怎样才能安全地做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T15:24:13.160

您只需签出新分支 - 您未提交的更改将被转移到新分支。（如果您的本地更改会影响将通过切换分支更改的文件，则不允许这样做，但在这种情况下，听起来好像新分支与您上次提交的位置相同，所以这不会是问题。）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-22T15:24:12.530

```
git stash

git checkout other_branch

git stash pop 
```

应该做的伎俩。然后，您可以正常提交。另请参阅：[git stash 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)

# javascript - 使用 Mongoose 删除索引的推荐方法是什么？

> ID：13014548
> 
> 赞同：21
> 
> 时间：2012-10-22T15:21:56.077
> 
> 标签：javascript, node.js, mongodb, mongoose, database

我需要为 MongoDB 数据库创建几个部署脚本，例如数据迁移和固定装置，但我找不到有关如何使用 Mongoose API 删除索引的足够信息。这在使用官方 MongoDB API 时非常简单：

> 删除指定集合上的所有索引：
> 
> `db.collection.dropIndexes();`

但是，我想为此使用 Mongoose，并尝试使用`executeDbCommand`改编自[这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/bvdS3B_oNcM)，但没有成功：

```
mongoose.connection.db.executeDbCommand({ dropIndexes: collectionName, index: '*' },
  function(err, result) { /* ... */ }); 
```

我应该使用 Node.js 的官方 MongoDB API 还是我在这种方法中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-22T16:41:20.590

要通过集合的 Mongoose 模型执行此操作，您可以调用[`dropAllIndexes`](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#dropallindexes)本机集合：

```
MyModel.collection.dropAllIndexes(function (err, results) {
    // Handle errors
}); 
```

**更新**

`dropAllIndexes`在本机驱动程序的 2.x 版本中已弃用，因此[`dropIndexes`](http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#dropIndexes)应改为使用：

```
MyModel.collection.dropIndexes(function (err, results) {
    // Handle errors
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-09-28T01:57:59.210

如果您想使用 mongoose 维护架构定义中的索引（如果您使用的是 mongoose，您可能会这样做），您可以轻松删除不再使用的索引并创建尚不存在的索引。`await YourModel.syncIndexes()`您可以在需要同步的任何模型上运行一次。它将在后台创建`.ensureIndexes`并删除架构定义中不再存在的任何内容。您可以在此处查看完整文档： [https ://mongoosejs.com/docs/api.html#model_Model.syncIndexes](https://mongoosejs.com/docs/api.html#model_Model.syncIndexes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:38:25.460

看起来您正试图删除给定集合上的所有索引。

根据 MongoDB Docs，[这是正确的命令](http://docs.mongodb.org/manual/reference/command/dropIndexes/)。

> ...我尝试使用改编自这篇文章的 executeDbCommand，但没有成功：

为了在这里真正提供帮助，我们需要更多详细信息：

*   什么失败了？你如何衡量“没有成功”？
*   你能 100% 确认命令运行了吗？您是否在回调中输出到日志？你检查`err`变量了吗？
*   你在哪里创建索引？你能确认你没有在掉落后重新创建它们吗？
*   您是否在列出特定索引名称时尝试过该命令？老实说，您不应该使用`"*"`. 您应该删除并创建非常具体的索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-27T02:56:32.067

这可能不是发布此内容的最佳位置，但我认为无论如何都值得发布。

每次针对 db 连接定义/创建模型时，我都会调用`model.syncIndexes()`，这可以确保索引是最新的并且与模式保持同步，但是由于它已在线突出显示（[示例](https://thecodebarbarian.com/whats-new-in-mongoose-5-2-syncindexes)），这可能会在分布式架构中产生问题，多个服务器同时尝试相同的操作。如果使用类似库之类的东西在同一台机器上的多个内核上生成主/从实例，这一点尤其重要`cluster`，因为当整个服务器启动时，它们通常会在彼此靠近的地方启动。

参考上面的“codebarbarian”文章，当他们说：

> Mongoose 不会为您调用 syncIndexes()，您需要自己负责调用 syncIndexes()。这有几个原因，最值得注意的是 syncIndexes() 不执行任何类型的分布式锁定。如果您有多个在启动时调用 syncIndexes() 的服务器，您可能会因为尝试删除不再存在的索引而出错。

所以我要做的是创建一个函数，它使用 redis 和 redis redlock 来获得一段名义时间的租约，以防止多个工作人员（实际上是多个服务器中的多个工作人员）同时尝试相同的同步操作。

它也绕过了整个事情，除非它是试图执行操作的“主人”，我认为将这项工作委托给任何工人都没有任何实际意义。

```
const cluster               = require('cluster');
const {logger}              = require("$/src/logger");
const { 
    redlock, 
    LockError
}                           = require("$/src/services/redis");
const mongoose              = require('mongoose');

// Check is mongoose model, 
// ref: https://stackoverflow.com/a/56815793/1834057
const isMongoModel = (obj) => {
    return obj.hasOwnProperty('schema') && obj.schema instanceof mongoose.Schema;
}

const syncIndexesWithRedlock = (model,duration=60000) => new Promise(resolve => {

    // Ensure the cluster is master
    if(!cluster.isMaster) 
        return resolve(false)

    // Now attempt to gain redlock and sync indexes
    try {

        // Typecheck
        if(!model || !isMongoModel(model))
            throw new Error('model argument is required and must be a mongoose model');

        if(isNaN(duration) || duration <= 0)
            throw new Error('duration argument is required, and must be positive numeric')

        // Extract name
        let name        = model.collection.collectionName;

        // Define the redlock resource
        let resource    = `syncIndexes/${name}`;

        // Coerce Duration to Integer
        // Not sure if this is strictly required, but wtf. 
        // Will ensure the duration is at least 1ms, given that duration <= 0 throws error above
        let redlockLeaseDuration = Math.ceil(duration);

        // Attempt to gain lock and sync indexes
        redlock.lock(resource,redlockLeaseDuration)
            .then(() => {
                // Sync Indexes
                model.syncIndexes();

                // Success
                resolve(true);
            })
            .catch(err => {

                // Report Lock Error
                if(err instanceof LockError){
                    logger.error(`Redlock LockError -- ${err.message}`);

                // Report Other Errors
                }else{
                    logger.error(err.message);
                }

                // Fail, Either LockError error or some other error
                return resolve(false);
            })

    // General Fail for whatever reason
    }catch(err){
        logger.error(err.message);
        return resolve(false);
    }
}); 
```

我不会设置 Redis 连接，这是其他线程的主题，但上面这段代码的重点是展示如何`syncIndexes()`可靠地使用并防止一个线程删除索引而另一个线程尝试删除相同索引的问题，或尝试同时修改索引的其他分布式问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-01-18T09:33:33.970

删除您可以使用的特定索引

```
db.users.dropIndex("your_index_name_here") 
```

# objective-c - ios中归档解压，报错怎么处理？

> ID：13014549
> 
> 赞同：0
> 
> 时间：2012-10-22T15:22:00.670
> 
> 标签：objective-c, ios

我有一个需要更改其属性之一的业务对象。我尝试获取该属性的字符串表示形式，然后对其进行修改，就像我在下面的代码中尝试一样

```
 NSMutableString *mutatingString = [ [ NSMutableString alloc ] init ] ;
  mutatingString = ( NSMutableString * ) [ businessOject valueForKey:@"basicproperty" ] ;
  [ mutatingString appendString:@"Modified" ]; 
```

但是，当我在 appendString 的第三行加热时，我得到以下异常：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
   'Attempt to mutate immutable object with appendString:' 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:34:19.883

您不应将 [ businessOject valueForKey:@"basicproperty" ] 的结果从 NSString* 转换为 NSMutableString*。

```
NSString* str  =   [businessOject valueForKey:@"basicproperty" ];
NSMutableString *mutatingString = [[NSMutableString alloc ] initWithString:str  ] ;
[mutatingString appendString:@"Modified" ];
[businessOject setValue:mutatingString forKey:@"basicproperty" ] 
```

# php - Mongo Doctrine Query Builder Select 不起作用。漏洞？

> ID：13014550
> 
> 赞同：1
> 
> 时间：2012-10-22T15:22:06.753
> 
> 标签：php, mongodb, doctrine, doctrine-orm

```
$dm = $this->get('doctrine.odm.mongodb.document_manager');

$query = $dm->createQueryBuilder('MyBundle:Listing')
            ->select('title')
            ->field('coordinates')->geoNear(
                  (float)$longitude, 
                  (float)$latitude
            )->spherical(true);

$classifieds_array = $classifieds->toArray();

$data = array('success'=>true,'classifieds' => $classifieds_array, 
      'displaymessage' => $classifieds->count(). " Search Results Found"); 
```

尽管我只选择了一个字段，但对于我的结果集，我会将所有内容连同标题一起重新收集。这是一个错误吗？

**注意**：我注释掉了这一`->field('coordinates')->geoNear((float)$longitude, (float)$latitude)->spherical(true)`行，现在选择似乎有效。这太疯狂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:43:39.710

根据文档示例，MongoDB 中的[geoNear](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand)命令似乎不支持过滤结果字段。仅`query`支持一个选项来限制匹配的文档。

在您的情况下，它看起来也像是在 Doctrine 中混合了`geoNear()`和`near()`builder 方法。由于您在`coordinates`现场操作，因此适当的语法是`near()`. `geoNear()`是一种告诉构建器您希望使用该命令的顶级方法，它不需要字段名称，因为它使用集合中唯一且唯一的地理空间索引。

对于使用示例，我建议查看 Doctrine MongoDB 库中的[查询和构建器单元测试](https://github.com/doctrine/mongodb/tree/master/tests/Doctrine/MongoDB/Tests/Query)。

# iis - 我可以使用 Powershell 在远程 IIS 服务器上创建站点和应用程序池吗？

> ID：13014556
> 
> 赞同：3
> 
> 时间：2012-10-22T15:22:25.343
> 
> 标签：iis, powershell, web-administration

我有一个设置新 Web 服务器的 Powershell 脚本。目前，您必须通过远程桌面连接到服务器并在本地运行脚本；它使用该`WebAdministration`模块并且充满了 IIS:/Sites\www.mysite.com\ 等伪路径。

我可以使用相同的`WebAdministration`模块来管理远程服务器吗？我希望类似的东西`get-childitem IIS://myserver/Sites/`可能会起作用，但找不到任何文档或使用此模块针对远程服务器的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:27:23.033

你要做的是设置 powershell 远程处理（在你开始之前`WebAdministration`）。这必须首先在远程服务器上配置，因为默认情况下它没有启用。

您需要在`Enable-PSRemoting –force`以管理员身份运行 PS 时运行才能将其打开，并且还有一些其他的小问题可以使安全性变得合理。在[http://technet.microsoft.com/en-us/magazine/ff700227.aspx上有一篇不错的 technet 文章](http://technet.microsoft.com/en-us/magazine/ff700227.aspx)

完成后，您可以使用以下命令在远程计算机上调用命令：

```
Invoke-Command -ComputerName COMPUTER -ScriptBlock { COMMAND } -credential USERNAME 
```

# c# - 从 excel 复制一个范围并粘贴到 WPF 网格中

> ID：13014559
> 
> 赞同：0
> 
> 时间：2012-10-22T15:22:34.940
> 
> 标签：c#, wpf, coded-ui-tests

在编码的 UI 测试中，我试图使用 range.copy 从 excel 复制动态范围，并通过 ctrl + v 将其粘贴到 wpf 网格中。

这是从 xls 复制数据的代码

```
 var xlSheet = (Worksheet)excelApp.Worksheets[sheetName];
            excelApp.Worksheets.Select();

            XlRange = xlSheet.UsedRange;
            XlRange.Copy(Type.Missing); 
```

这是将其粘贴到 wpf 网格上的一点我单击开始单元格，然后执行 ctrl v 粘贴

```
Mouse.Click(targetCell);
Keyboard.SendKeys(CreateMdRebalWindow, "V", ModifierKeys.Control); 
```

但是无论出于何种原因，它都没有粘贴它..数据在剪贴板中复制得很好，因为如果我打开一个新工作表并手动执行 ctrl v 。它将值粘贴在那里..

任何指针..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:26:13.157

出于某种原因，我不允许对您的问题发表评论，因此我将不得不发布答案。

我看到您使用的是大写字母 v（“V”）。您不应该使用常规的 v（“v”）吗？

# mysql - 向查询中添加列

> ID：13014560
> 
> 赞同：-3
> 
> 时间：2012-10-22T15:22:40.433
> 
> 标签：mysql

我有这张桌子

```
user_id     time_completed
    4           86.30887
    5           57.81364
    5           35.50281
    5           10.00000
    5           74.19355
    5           31.91489
    6           15.00000
    6           20.50000 
```

我总结时间并替换另一个表（db_users）中的用户：

```
id          username        country
1           admin           ES
2           peter           IT
3           tom             US
4           user            GB
5           joey            GE
6           helen           FR 
```

但我也需要国家行也出现：

```
user_id     time_completed      country
joey           209.42489            GE
user           86.30887             GB
helen           35.50000            FR 
```

看看这里：[http ://sqlfiddle.com/#!2/24d1b/11](http://sqlfiddle.com/#!2/24d1b/11)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:24:16.010

您只需添加该字段：

```
SELECT b.username, SUM(time_COmpleted) totalTime, b.country
FROM tableName a 
      INNER JOIN  db_users b
        ON (a.user_id = b.id)
GROUP BY b.username, b.country 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/24d1b/18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:23:43.427

在这里，只添加缺少的字段

```
SELECT b.username, SUM(time_COmpleted) totalTime, b.country
FROM tableName a 
      INNER JOIN  db_users b
        ON (a.user_id = b.id)
GROUP BY b.username, b.country 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/24d1b/18)

根据您的演示，所有用户都生活在`GB`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:24:54.053

好吧，只需将国家添加到`SELECT`：

```
SELECT b.username, SUM(time_COmpleted) totalTime, b.country
FROM tableName a 
    INNER JOIN  db_users b
    ON (a.user_id = b.id)
GROUP BY b.username 
```

# ruby-on-rails - sidekiq 不会发送异常通知电子邮件

> ID：13014570
> 
> 赞同：2
> 
> 时间：2012-10-22T15:23:18.547
> 
> 标签：ruby-on-rails, redis, sidekiq

失败时如何启用从 sidekiq 发送的电子邮件？目前我知道异常通知器正在工作，但当 sidekiq 作业失败时，它什么也不做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:12:14.810

```
class DelayedWorker

  include Sidekiq::Worker
  # Utils include watchdog, which will email on failures
  include Sidekiq::Util

  def perform(type, args)
    watchdog('DelayedWorker failed') do
      raise 'Doh!'
      puts "Doing hard work #{type} #{args.to_json}"
    end
  end

end 
```

还要确保你有更新版本的异常通知器，它在它的`handle_background_exception`方法中接受 2 个参数

# asp.net - .Net 4.5 和 VS2012 在指定命名空间时需要“全局”命名空间

> ID：13014576
> 
> 赞同：1
> 
> 时间：2012-10-22T15:23:32.863
> 
> 标签：asp.net, visual-studio-2012, .net-4.5

我一直在使用 .Net 4.5 和 VS2012 开发一个新的 MVC 4 项目，并且有一段时间它运行良好。但是突然之间我遇到了很多错误，例如：

```
'System.Web.HttpApplication' is not defined. 
```

起初，我以为这是一个程序集引用问题，但这一切似乎都很好。经过进一步研究，似乎在任何时候指定命名空间时都需要全局命名空间。这两种形式中的任何一种都可以正常工作：

```
Public Class MvcApplication
    Inherits Global.System.Web.HttpApplication
End Class

Public Class MvcApplication
    Inherits HttpApplication
End Class 
```

但是，此表格不适用于任何课程：

```
Public Class MvcApplication
    Inherits System.Web.HttpApplication
End Class 
```

有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:13:12.857

嗯，我想通了。我有另一个程序集，其中 System 作为程序集名称的第二部分，第一部分被导入到我正在处理的程序集中。所以每当我尝试引用 System. 任何东西，它都在寻找另一个程序集的系统命名空间，而不是全局系统命名空间。

# gwt - 当每个位置的屏幕布局发生变化时，GWT 使用活动和位置

> ID：13014580
> 
> 赞同：2
> 
> 时间：2012-10-22T15:23:44.390
> 
> 标签：gwt, gwt-activities, gwt-places

我对 GWT 的活动和地点的理解是，对于屏幕上的给定区域，您有一个`ActivityManager`和一个`ActivityMapper`. 您可以在屏幕上拥有多个区域，这意味着您可以拥有多个`ActivityManagers`和`ActivityMappers`（每个区域一个）。因此，每当有人询问他们各自应该在给定的情况下显示什么活动`PlaceChange`时。只要你们所有人都有一个共同的布局，他们可以以不同的方式重用以执行不同的活动，这就很有效。我的问题是我们如何处理不同使用完全不同的布局的情况？我的第一个想法是拥有更多，如果不使用特定区域，那么`ActivityManagers``ActivityMapper``Place``Places``Places``ActivityManagers``ActivityMappers``Place``ActivityMapper``null`因为当我们更改为 that 时，该区域将简单地返回`Place`。如果有更好的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:39:22.343

我发现为整个应用程序使用单个 ActivityMapper/ActivityManager 对要容易得多。

在典型情况下，您有一个“菜单”区域和一个“主”区域。菜单区域非常基本：单击菜单项会将用户带到一个新位置。它还会突出显示新选择的项目并重置先前选择的项目的样式。所有这些都可以在一个简单的小部件中轻松完成，您可以将其包含在需要此菜单的所有视图中。为菜单区域设置单独的 ActivityMapper 和 ActivityManager 只会使一切复杂化，而不会带来任何好处。

我对“顶部菜单”区域和“左侧菜单/树”区域使用相同的方法：一个告诉演示者哪些数据要显示在“主”区域中的小部件。

我的应用中有 50 多个不同的地方，拥有一个简单的架构真的很有帮助：每个地方对应一个视图和一个活动。

# iphone - 为什么没有调用 kCLErrorNetwork？

> ID：13014582
> 
> 赞同：2
> 
> 时间：2012-10-22T15:24:00.757
> 
> 标签：iphone, objective-c, ios, xcode

在我的 iOS 应用程序中，我有一个 mapview，我正在尝试使用

`(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error`

方法来查看用户是否启用了定位服务以及是否有互联网连接。

在我的 .m 中，我正在这样做：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        _locationManager = [[CLLocationManager alloc] init];
        _locationManager.delegate = self;
        [_locationManager startUpdatingLocation];
    }
    return self;
} 
```

和这个：

```
- (void)locationManager:(CLLocationManager *)manager
   didFailWithError:(NSError *)error{

    [manager stopUpdatingLocation];
    NSLog(@"didFailWithError: %@\n\n\n", error);

    switch ([error code]) {
        case kCLErrorNetwork:{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"please check your internet connection or that you are not in airplane mode" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;

        case kCLErrorDenied:{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"enable location services to see your current position." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;

        default:{

            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Unknown network error" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;
    }

} 
```

如果用户不允许应用程序使用定位服务，他将正确地得到“kCLErrorDenied”弹出窗口。另一方面，如果我的电脑（我正在使用 iPhone 模拟器）的以太网电缆被移除，我不会收到 kCLErrorNetwork 错误。

难道是在iPhone模拟器上，即使没有互联网连接，wifi总是启用的？还能是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:17:34.107

如果我打开飞行模式（并确保 Wi-Fi 已关闭），我会在设备上看到类似的行为。我的猜测是这是一个 SDK 错误，所以我建议向 Apple 提交一个错误！如果我无法弄清楚，我计划进行更多研究并提交错误。

# sql-server - 如何检查不存在的参数

> ID：13014587
> 
> 赞同：1
> 
> 时间：2012-10-22T15:24:11.800
> 
> 标签：sql-server

有这个第 3 方软件将查询传递给 SQL Server，但是，当参数不存在时我遇到了问题。它解析没有任何引号的空字符串，从而给我一个无效的 SELECT 语句。例如

```
-- parameter exists
Select ISNULL('param','') as param1 

-- parameter doesn't exist
Select ISNULL(,'') as param1 
```

我事先知道预期的参数应该是字符串还是数字。当参数为数字时，我打算将其括在引号中并检查它是否是零长度字符串。但是你如何对字符串做同样的事情呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:59:14.400

感谢您的帮助。第三方软件实际上是在将参数传递给 SQL Server (2008) 之前解析参数，而它的怪癖是在不使用参数时它什么也不传递。对我有用的是：

选择 'param' + '' 作为 param1

# sql - 重命名 Oracle 列中的数据

> ID：13014590
> 
> 赞同：0
> 
> 时间：2012-10-22T15:24:23.643
> 
> 标签：sql, oracle

我想重命名 oracle 表中的某些数据。让我们假设“随机项目”表中的数据具有以下形式

```
Day      Item      Total

12/3     102         12

12/3     423         28 

12/4     102         48 
```

我想将项目编号重命名为特定字符串，因此当我从表中获取数据时，输出将如下所示

```
Day      Item           Total

12/3     Shoe           12

12/3     Orange         28 

12/4     Shoe           48 
```

所以鞋子 = 102 橙色 = 423

我没有写信给表格。我看过重命名、同义词和替换等命令，但它们都重命名了特定的表或列。我想对表中的数据表示敬意。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:41:29.413

```
select day, case ITEM when 102 then 'shoe'
                    when 423 then 'orange'
        end itemname, total
from items 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:39:58.667

尝试使用如下解码：

```
select day, decode(item, '102', 'Shoe', '423', 'Orange',...), total from items 
```

# ios - 如何在触摸按钮上获取 indexPath？

> ID：13014592
> 
> 赞同：4
> 
> 时间：2012-10-22T15:24:25.203
> 
> 标签：ios, xcode, uitableview

我有动态 tableView 和一个问题。每个 tableCell 中有两个按钮。我试图让 indexPath.row 触摸按钮但没有成功。

我的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    NSIndexPath *indexPath = [self.homeTableView indexPathForSelectedRow];      

    NSLog(@"%d", indexPath.row);

} 
```

我怎样才能为触摸按钮获取 indexPath.row （Segue 连接在这两个按钮上-> 两个连接）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-07T06:55:38.893

Apple change the UITableViewCell hierarchy in iOS 7

Using iOS 6.1 SDK

```
<UITableViewCell>
   | <UITableViewCellContentView>
   |    | <UILabel> 
```

Using iOS 7 SDK

```
<UITableViewCell>
   | <UITableViewCellScrollView>
   |    | <UITableViewCellContentView>
   |    |    | <UILabel> 
```

So if you want to get indexpath at button index then use following code Using iOS 6 or later SDK

```
UITableViewCell *clickedCell = (UITableViewCell *)[[sender superview] superview];
    NSIndexPath *clickedButtonPath = [book_table indexPathForCell:clickedCell];
    NSLog(@"index=%@",clickedButtonPath); 
```

Using iOS 7 or 7+ SDK

```
 UITableViewCell *clickedCell = (UITableViewCell *)[[[sender superview] superview]superview];
    NSIndexPath *clickedButtonPath = [book_table indexPathForCell:clickedCell];
    NSLog(@"index=%ld",(long)clickedButtonPath.item); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T15:45:51.883

它不起作用，因为您在单击按钮时没有选择行。

使用两个按钮，我会将您的 segues 与按钮断开连接，并在 IB 中执行 2 个手动 segues，然后添加类似的代码来处理它们：

```
-(void)button1Pressed:(id)sender {
    UITableViewCell *clickedCell = (UITableViewCell *)[[sender superview] superview];
    NSIndexPath *clickedButtonIndexPath = [self.homeTableView indexPathForCell:clickedCell];
    ...
    [self performSegueWithIdentifier:@"YourManualSegueIdentifier1" sender:self];
} 
```

**编辑第二个选项：**

在您的 MyTableViewCell.h 中：

```
@interface MyTableViewCell : UITableViewCell
    ...    
    @property (strong, nonatomic) NSIndexPath *cellIndexPath;
    ...
@end 
```

在您的 MyTableViewCell.m 中：

```
-(void)button1Pressed:(id)sender {
    ...
    NSInteger row = cellIndexPath.row;
    ...
} 
```

在您的 MyTableViewController.m 中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    MyTableViewCell *cell = (MyTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[MyTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];      
    }
    // remember index here!
    [cell setCellIndexPath:indexPath];
    ....
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-22T15:38:14.953

我没有使用情节提要，但是一旦我在基于简单 viewconroller 的项目中使用它，我认为这可能会对您有所帮助。

```
 - (IBAction)goToNew:(id)sender 
{
   UIButton *btn = (UIButton*) sender;
   UITableViewCell *cell = (UITableViewCell*) [btn superview];
   NSIndexPath *indexPath = [tableView indexPathForCell:cell]; 
   int row = indexPath.row;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T15:32:35.613

也许触摸发生在 UIButton 而不是 UITableView / UITableViewCell 上。

检查：

```
NSLog(@"%@",[sender class]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-07T06:59:51.493

给按钮`tag = indexpath.row+100;`

并得到..

```
-(IBAction)ShowListView:(id)sender
{

    UIButton *btn = (UIButton *)sender;

    int Iindex = btn.tag-100;

    NSLog(@"button title is %@",btn.titleLabel.text);
    NSLog(@"button id is %d",Iindex);

    NSLog(@"array category is....%@",arrayCategory); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T17:21:28.890

解决了 button.tag

在“cellForRowAtIndexPath”中，我设置了 button.tag = indexPath.row，然后在“- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {”

```
UIButton *btn = (UIButton*) sender;
NSLog(@"%d", btn.tag); 
```

# python - Pythonic迭代列表中的滑动窗口对？

> ID：13014595
> 
> 赞同：11
> 
> 时间：2012-10-22T15:24:29.467
> 
> 标签：python, list, iteration, itertools, list-manipulation

在滑动对中迭代列表的最 Pythonic 最有效的方法是什么？这是一个相关的例子：

```
>>> l
['a', 'b', 'c', 'd', 'e', 'f', 'g']
>>> for x, y in itertools.izip(l, l[1::2]): print x, y
... 
a b
b d
c f 
```

这是成对的迭代，但是我们如何才能在滑动对上进行迭代呢？含义迭代对：

```
a b
b c
c d
d e
etc. 
```

这是对对的迭代，除了每次将对滑动 1 个元素而不是 2 个元素。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T15:28:04.857

你可以更简单。只需压缩列表并将列表偏移一。

```
In [4]: zip(l, l[1:])
Out[4]: [('a', 'b'), ('b', 'c'), ('c', 'd'), ('d', 'e'), ('e', 'f'), ('f', 'g')] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T15:27:35.747

怎么样：

```
for x, y in itertools.izip(l, l[1:]): print x, y 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T15:27:02.153

这是我不久前为类似场景编写的一个小生成器：

```
def pairs(items):
    items_iter = iter(items)
    prev = next(items_iter)

    for item in items_iter:
        yield prev, item
        prev = item 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-22T15:41:40.087

这是一个适用于迭代器/生成器以及列表的任意大小滑动窗口的函数

```
def sliding(seq, n):
  return izip(*starmap(islice, izip(tee(seq, n), count(0), repeat(None)))) 
```

不过，内森的解决方案可能更有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T16:12:40.737

通过在列表中添加两个后续条目定义的时间显示在下方，并按从最快到最慢的顺序排列。

吉尔

```
In [69]: timeit.repeat("for x,y in itertools.izip(l, l[1::1]): x + y", setup=setup, number=1000)
Out[69]: [1.029047966003418, 0.996290922164917, 0.998831033706665] 
```

杰夫·里迪

```
In [70]: timeit.repeat("for x,y in sliding(l,2): x+y", setup=setup, number=1000)
Out[70]: [1.2408790588378906, 1.2099130153656006, 1.207326889038086] 
```

阿莱斯塔尼斯

```
In [66]: timeit.repeat("for i in range(0, len(l)-1): l[i] + l[i+1]", setup=setup, number=1000)
Out[66]: [1.3387370109558105, 1.3243639469146729, 1.3245630264282227] 
```

奇穆利格

```
In [68]: timeit.repeat("for x,y in zip(l, l[1:]): x+y", setup=setup, number=1000)
Out[68]: [1.4756009578704834, 1.4369518756866455, 1.5067830085754395] 
```

内森·维拉斯库萨

```
In [63]: timeit.repeat("for x,y in pairs(l): x+y", setup=setup, number=1000)
Out[63]: [2.254757881164551, 2.3750967979431152, 2.302199125289917] 
```

SR2222

注意减少的重复次数......

```
In [60]: timeit.repeat("for x,y in SubsequenceIter(l,2): x+y", setup=setup, number=100)
Out[60]: [1.599524974822998, 1.5634570121765137, 1.608154058456421] 
```

设置代码：

```
setup="""
from itertools import izip, starmap, islice, tee, count, repeat
l = range(10000)

def sliding(seq, n):
  return izip(*starmap(islice, izip(tee(seq, n), count(0), repeat(None))))

class SubsequenceIter(object):

    def __init__(self, iterable, subsequence_length):

        self.iterator = iter(iterable)
        self.subsequence_length = subsequence_length
        self.subsequence = [0]

    def __iter__(self):

        return self

    def next(self):

        self.subsequence.pop(0)
        while len(self.subsequence) < self.subsequence_length:
            self.subsequence.append(self.iterator.next())
        return self.subsequence

def pairs(items):
    items_iter = iter(items)
    prev = items_iter.next()

    for item in items_iter:
        yield (prev, item)
        prev = item
""" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T15:40:52.633

不完全是最有效的，但非常灵活：

```
class SubsequenceIter(object):

    def __init__(self, iterable, subsequence_length):

        self.iterator = iter(iterable)
        self.subsequence_length = subsequence_length
        self.subsequence = [0]

    def __iter__(self):

        return self

    def next(self):

        self.subsequence.pop(0)
        while len(self.subsequence) < self.subsequence_length:
            self.subsequence.append(self.iterator.next())
        return self.subsequence 
```

用法：

```
for x, y in SubsequenceIter(l, 2):
    print x, y 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-17T14:42:39.273

无需导入，只要提供对象列表或字符串即可；任何带有`var[indexing]`. 经测试`python 3.6`

```
# This will create windows with all but 1 overlap
def ngrams_list(a_list, window_size=5, skip_step=1):
    return list(zip(*[a_list[i:] for i in range(0, window_size, skip_step)])) 
```

for 循环本身就创建了这个`a_list`字母表（如图所示`window = 5`，OP 想要`window=2`：

```
['ABCDEFGHIJKLMNOPQRSTUVWXYZ',
 'BCDEFGHIJKLMNOPQRSTUVWXYZ', 
 'CDEFGHIJKLMNOPQRSTUVWXYZ', 
 'DEFGHIJKLMNOPQRSTUVWXYZ',
 'EFGHIJKLMNOPQRSTUVWXYZ'] 
```

`zip(*result_of_for_loop)`将收集所有完整的垂直列作为结果。如果你想要少于一个重叠：

```
# You can sample that output to get less overlap:
def sliding_windows_with_overlap(a_list, window_size=5, overlap=2):
    zip_output_as_list = ngrams_list(a_list, window_size)])
    return zip_output_as_list[::overlap+1] 
```

使用它跳过以&`overlap=2`开头的列，并选择`B``C``D`

```
[('A', 'B', 'C', 'D', 'E'),
 ('D', 'E', 'F', 'G', 'H'), 
 ('G', 'H', 'I', 'J', 'K'), 
 ('J', 'K', 'L', 'M', 'N'), 
 ('M', 'N', 'O', 'P', 'Q'), 
 ('P', 'Q', 'R', 'S', 'T'), 
 ('S', 'T', 'U', 'V', 'W'), 
 ('V', 'W', 'X', 'Y', 'Z')] 
```

编辑：看起来这与@chmullig 提供的类似，带有选项

# jquery - 数据表不显示分页

> ID：13014597
> 
> 赞同：0
> 
> 时间：2012-10-22T15:24:39.607
> 
> 标签：jquery, jquery-ui, jquery-plugins

这是我在使用 JQuery 数据表时遇到的问题的摘要。

一种。我的 JSP 页面有以下内容：

```
<script type="text/javascript" src="../include/jquery.dataTables.js"></script>
<script> 
$(document).ready(function() {
$('#snapTable').dataTable({
   "iDisplayLength": 5,
   "bPaginate": true
   } );
 } )

  :

 function checkSnapStatus() {
 var url = "....";                               // some JSP servlet return HTML table id = 'snapTable'. HTML has a div called  progress_bar
 $.get(url, function(xml) {
            $('#statuscontent').html(xml);      // Put the return HTML into div id='statuscontent' on the body element
            var object = $('div.progress_bar'); // Get the div id=progress_bar elements =
            $.each(object, function() {
                            //process some stuff
                            });

     });

  } 
```

湾。从 body.onload 调用 checkSnapStatus 函数。在 $.get 函数之后，会显示记录（很多），但没有分页。我没有看到上一个或下一个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:05:42.693

您使用什么版本的数据表和 jquery？我使用 jquery 1.6.4 和 datatables 1.9.0 以及以下作品 -

```
$('#snapTable').dataTable({
    "bJQueryUI"      : true,
    "iDisplayLength" : 5,
    "sDom"           : 'T<"clear">lfrtip'
}); 
```

# android - 带有 android 变体的 Switch-case

> ID：13014598
> 
> 赞同：0
> 
> 时间：2012-10-22T15:24:41.350
> 
> 标签：android

我想知道我是否可以将以下图表转换为 android 中的 switch-case 语句。我知道我可以用 if-else 做到这一点，但我只是想知道我是否可以......

```
switch (bodyfat)
case 2-4 : show (Essential Fat);
case 6-13 : show (Athelete Fat); 
```

………… ![在此处输入图像描述](../Images/a939721c4683486bcbb88c9279868f60.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:31:59.357

在这种情况下，您最好坚持使用 if-else 语句。开关盒（我不建议使用）的等效项是这样的：

```
switch(bodyfat) {
    case 2:
    case 3:
    case 4:
        show (Essential Fat);
        break;
    case 6:
    case 7:
    //...etc.
} 
```

然后它只是通过任何值。但是，您必须为*每个*值都有一个案例。对于这样的一系列值，您最好坚持使用 if-else。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:32:38.250

```
switch (bodyfat) {
case 2:
case 3:
case 4: show (Essential Fat); break;

} 
```

而不是这个：

```
if (bodyfat >= 2 && bodyfat =< 4) {
 show (Essential Fat);
} else if (bodyfat >= 6 && bodyfat =< 13) {
show (Athelete Fat);
} 
```

你可以试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:35:15.543

您可以通过以下方式使用 switch case 执行此操作：

```
switch (bodyfat)
    case 2: 
    case 3:
    case 4:
        show (Essential Fat);
        break;
    case 6: 
    case 7:
    case 8:
    case 9: 
    case 10:
    case 11:
    case 12: 
    case 13:
        show (Athelete Fat);
        break; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:36:11.550

我是两个结果检查的三级陈述的粉丝：

```
IFat result = (bodyfat >= 2 && bodyfat <= 4) ? EssentialFat : AthleteFat;
show(result); 
```

假设接口或子类结构，但我想我会在讨论中包括这个。

# c# - 布尔反序列化错误

> ID：13014599
> 
> 赞同：2
> 
> 时间：2012-10-22T15:24:41.947
> 
> 标签：c#, deserialization

我在反序列化 XML 元素时遇到问题，我假设它与反序列化程序未找到的 XML 元素中的命名空间有关。

数据来自外部来源，我无法将其修改为字符串，并且我使用的是 C# 4.0。

任何帮助，不胜感激。

```
string xml = "<boolean xmlns=\"http://schemas.microsoft.com/2003/10/serialization/\">false</boolean>";

var xSerializer = new XmlSerializer(typeof(bool));
using (var sr = new StringReader(xml)) 
using (var xr = XmlReader.Create(sr))
{
    var y = xSerializer.Deserialize(xr);
} 
```

错误：

```
System.InvalidOperationException was unhandled by user code
  HResult=-2146233079
  Message=There is an error in XML document (1, 2).
  Source=System.Xml
  StackTrace:
       at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)
       at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle)
            ...
            ...
            ...
  InnerException: System.InvalidOperationException
       HResult=-2146233079
       Message=<boolean xmlns='http://schemas.microsoft.com/2003/10/serialization/'> was not expected.
       Source=System.Xml
       StackTrace:
            at System.Xml.Serialization.XmlSerializationPrimitiveReader.Read_boolean()
            at System.Xml.Serialization.XmlSerializer.DeserializePrimitive(XmlReader xmlReader, XmlDeserializationEvents events)
            at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:39:47.683

It will work if you create your serializer as below

```
var xSerializer = new XmlSerializer(typeof(bool),null, null, 
                         new XmlRootAttribute("boolean"), 
                         "http://schemas.microsoft.com/2003/10/serialization/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:39:56.760

You can't use xml namespaces and attributes if you want to deserialize a *boolean*. Infact you have to deserialize this:

```
string xml = "<boolean>false</boolean>"; 
```

# java - Java Game - 将物体沿直线移动到另一点

> ID：13014605
> 
> 赞同：0
> 
> 时间：2012-10-22T15:25:01.277
> 
> 标签：java, game-physics

这是我到目前为止所拥有的：

```
int vx = (playerx - x);
    int vy = (playery - y);

    double distance = Math.sqrt((vx * vx) + (vy * vy));

    double doublex = ((vx / distance));
    double doubley = ((vy / distance));

    dx = (int) Math.floor(doublex + 0.5);
    dy = (int) Math.floor(doubley + 0.5);

    x += dx;
    y += dy; 
```

我只希望 x 和 y 直接向 playerx 和 playery 移动，但它仅以 0、1 或未定义的斜率移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:29:00.663

我怀疑它是因为你 x 和 y 是`int`，而且你移动的距离很短，你只会是`(1, 1)`，`(1, 0)`或`(0, 1)`。

您需要允许它进一步移动 1，或使用分辨率更高的类型。例如双倍。

顺便说一句：而不是使用 Math.floor 我相信更好的选择是

```
dx = (int) Math.round(doublex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:39:47.507

You are dividing horizontal distance and vertical distance by total distance, this will always result in a number between 1 and -1 so each time it moves it will move by either nothing or by 1 in a direction. I guess this is in pixels?

Each time the move happens you should keep track of the actual distance moved and the desired distance moved because, for example, you may be trying to move 0.4 along the y axes in every loop, and it will never move because that will always round down. So if in the second loop you know you should have moved by 0.8 in total, you can round up to one, and leave the desired set to -0.2 and keep looping.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-21T02:39:55.587

可以实现类似于 Bresanham 的线算法的解决方案。IE：

```
function line(x0, y0, x1, y1)
 real deltax := x1 - x0
 real deltay := y1 - y0
 real deltaerr := abs(deltay / deltax)    // Assume deltax != 0 (line is not vertical),
       // note that this division needs to be done in a way that preserves the fractional part
 real error := deltaerr - 0.5
 int y := y0
 for x from x0 to x1 
     plot(x,y)
     error := error + deltaerr
     if error ≥ 0.5 then
         y := y + 1
         error := error - 1.0 
```

资料来源：[Bresanham 的线算法](https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)

# magento - 获取所有用户的购物车

> ID：13014606
> 
> 赞同：0
> 
> 时间：2012-10-22T15:25:03.117
> 
> 标签：magento, migration, shopping-cart

我正在尝试将所有用户的购物车迁移到另一个系统。

有没有办法为每个用户获取购物车中的每件商品？我需要的只是产品和客户 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:58:25.597

你应该看看报价表：`sales_flat_quote`，`sales_flat_quote_item`和`sales_flat_quote_item_option`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:02:00.113

我认为当您说购物车商品时，您的意思是订购商品，对吗？

我将使用 sql 执行此操作，因为您需要迁移信息，如果您需要作为在 magento 上使用的集合，请告诉我。

```
SELECT o.customer_id , p.name
FROM sales_flat_quote as o
LEFT JOIN sales_flat_quote_item as i ON i.quote_id = o.entity_id
LEFT JOIN catalog_product_flat_1 as p ON i.product_id = p.entity_id

$list = Mage::getModel('sales/quote')->getCollection();
foreach($list as $li){
    $itens = $li->getItemsCollection(); //here we have the itens;
    $li->getCustomer()->getName; // here we have the customer name.
    foreach($itens as $i){
       $i->getName();//itens name;
    }
} 
```

# backbone.js - 在 Backbone.js 中加载 Google 地图后加载视图

> ID：13014612
> 
> 赞同：0
> 
> 时间：2012-10-22T15:25:19.070
> 
> 标签：backbone.js

我有以下设置：

类 App.Views.Maps 扩展 Backbone.View

```
el: '#map'

  events:

  initialize: ->
    @searchModel = new App.Models.Search()
    @view = new App.Views.MapBox(map: this)

    @render()

  render: ->
    @loadMap()
    $("[rel=tooltip]").tooltip()

 loadMap: =>
    osmMapType = new google.maps.ImageMapType(
      getTileUrl: (coord, zoom) ->
        "http://tile.openstreetmap.org/#{zoom}/#{coord.x}/#{coord.y}.png"
      tileSize: new google.maps.Size(256, 256)
      isPng: true
      alt: "OpenStreetMap layer"
      name: "OSM"
      maxZoom: 19
    )

cloudMadeMapType = new google.maps.ImageMapType(
  getTileUrl: (coord, zoom) ->
    "http://b.tile.cloudmade.com/111/54912/256/#{zoom}/#{coord.x}/#{coord.y}.png"
  tileSize: new google.maps.Size(256, 256)
  isPng: true
  alt: "CloudMade layer"
  name: "CMade"
  maxZoom: 13
)

lat = 51.503
lng = -0.113
latlng = new google.maps.LatLng(lat, lng)
options =
  zoom: 10
  center: latlng
  mapTypeId: 'OSM'
@gMap = new google.maps.Map(document.getElementById("map"), options)
@gMap.mapTypes.set('OSM', osmMapType)
@gMap.mapTypes.set('CloudMade', cloudMadeMapType)
@gMap.setMapTypeId('CloudMade')

allowedBounds = new google.maps.LatLngBounds(
  new google.maps.LatLng(51.278, -0.536)  
  new google.maps.LatLng(51.701, 0.309)
)

lastValidCenter = new google.maps.LatLng(51.503,-0.113)

google.maps.event.addListener @gMap, "dragend", =>
  if allowedBounds.contains(@gMap.getCenter())
    lastValidCenter = @gMap.getCenter()
    return
  $('#myModal').modal(backdrop: true)
  $('#myModal').on('hide', => 
    origin = new google.maps.LatLng(51.438264485659836,-0.05715396179630261)
    @gMap.setCenter(origin)
    center = google.maps.LatLng(51.503,-0.113)
    @gMap.panTo(origin)

    )
@initLabel()

initLabel: =>
    #rendered = view.render().el
    #console.log rendered
    @initLabel = new InfoBubble(
      position: new google.maps.LatLng(51.44115356738888, 0.14849636779354114)
      maxWidth: 240
      maxHeight: 210
      padding: 0
      content: '<div class="tooltip_header"></div>'
      tabPadding: 15
      backgroundColor: 'black'
      borderRadius: 0
      arrowSize: 10
      borderWidth: 0
      borderColor: '#AB2424'
      disableAutoPan: true
      hideCloseButton: false
      arrowPosition: 0.5
      backgroundClassName: 'phoney'
      tabClassName: 'tabClass'
      activeTabClassName: 'activeTabClass'
      arrowStyle: 2
    )
    @initLabel.open(@gMap) 
```

这会加载一个地图，然后在地图上加载一个 InfoBubble。它用内容加载它 `<div class="tooltip_header"></div>` 加载后，如果我附加`loadMap`并添加

```
view = new App.Views.MapBox()
view.render().el 
```

尝试加载视图：

```
class App.Views.MapBox extends Backbone.View

    el: '.tooltip_header'

    events:
      'click .testdrive' : 'loadTestDrive'
      'click .test' : 'loadTestDrive'

    template: JST["app/backbone/templates/mapbox"]

    initialize: ->

      @render()

    render: ->
      $(@el).html(@template())
      this

    loadTestDrive: ->
      console.log @options.map
      console.log "yessss"
      @options.map.loadTestDrive() 
```

什么都没有发生......但是，如果我进入控制台并执行以下操作：

```
view = new App.Views.MapBox({map: this}) 
```

内容在地图顶部的 Infobubble 内呈现。

我认为这是因为 InfoBubble 的负载是异步的，我正在调用要在它存在之前呈现的 div。但是我尝试过延迟加载，它仍然会发生。

在加载 infobubble 并因此 div 可用后，让此视图呈现的最佳方法是什么。这就是它在控制台中工作的原因。但不是负载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:42:45.877

只需使用谷歌地图事件来收听地图何时完全加载，就像这样

```
 google.maps.event.addListener(map, 'tilesloaded', _.bind(function() {
        this.render();
        google.maps.event.clearListeners(map, 'tilesloaded');
    },this)); 
```

有了这个，您就可以 100% 确定地图已渲染，并且 google.maps 全局变量可用并已初始化。

# windows - 如何获得新型 Windows 拖放光标

> ID：13014613
> 
> 赞同：5
> 
> 时间：2012-10-22T15:25:22.413
> 
> 标签：windows, winapi, drag-and-drop, mouse-cursor

当用户将某些东西（例如图像）从资源管理器拖动到我的应用程序时，如何在 Windows 上使用新型拖动光标？

![Windows 拖放光标](../Images/19e3dae64153be6ba352ce0cfb43c20b.png)

在某些应用程序（MS Paint、Visual Studio、Qt Creator，...）中使用旧光标，在其他应用程序（Explorer、Skype、Chrome、Opera...）中使用新光标。

**我只谈论在我们的应用程序之外**创建拖放操作的情况。所以它由其他程序处理（在我的例子中是 Explorer）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:23:27.433

使用[外壳拖放辅助对象](http://msdn.microsoft.com/en-us/library/ms997500.aspx)。

# git - 试图将一个本地存储库推送到另一个

> ID：13014615
> 
> 赞同：0
> 
> 时间：2012-10-22T15:25:28.917
> 
> 标签：git, repository, push

嗨 stackOverFlow 专家！

在我的机器（A 和 B）上的驱动器 C 下它们自己的子文件夹中有 2 个存储库，如下所示：

*   存储库 A 来自某个远程存储库的 git 克隆（在 c:\devA 中找到）

*   存储库 B 来自带有 git svn clone 的 svn 克隆（在 c:\clone\devB 中找到）

我想将 devB 推送到 devA 并尝试执行以下操作：

```
git remote add master /c/devA
git push master --all 
```

我收到以下错误：

```
fatal: 'c:/devA' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

谁能帮我这个？谢谢！！麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:25:24.110

这应该按照您使用它的方式工作，所以我看到两个选项：

*   c:/devA 不是 git 存储库（请检查 .git 文件夹）
*   Windows 路径有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:53:16.063

如果你想一起使用 repos，它们必须从同一个存储库中克隆，创建两个存储库然后链接它们是行不通的。

# .htaccess - .htaccess 重定向，更改 GET 变量

> ID：13014616
> 
> 赞同：2
> 
> 时间：2012-10-22T15:25:35.483
> 
> 标签：.htaccess, variables, redirect, get

很简单的问题。我需要更改网址

```
http://www.mysite.com/index.php?page=[x] 
```

其中 [x] 是任意数字

```
http://www.mysite.com/index.php?id=[x] 
```

只需使用 .htaccess 301 重定向将 ?page= 更改为 ?id= 。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:27:36.637

匹配`QUERY_STRING`里面的 a `RewriteCond`：

```
RewriteEngine On
# Capture (\d+) into %1
RewriteCond %{QUERY_STRING} page=(\d+) [NC]
# And rewrite (redirect) into id=%1
RewriteRule ^index\.php$ /index.php?id=%1 [L,R=301] 
```

以上只会将请求重写为`index.php`. 如果您想重写*所有内容*，请改用

```
RewriteRule ^(.*)$ /$1?id=%1 [L,R=301] 
```

# android - Android，布局图像和文本

> ID：13014620
> 
> 赞同：0
> 
> 时间：2012-10-22T15:25:42.893
> 
> 标签：android, android-layout, layout, android-linearlayout

我需要帮助才能使图像和文本的布局正常工作。

我希望图像缩放到与 TextView 使用时相同的高度。我还希望将图像留给文本。例如`#`是我的形象

```
# "My Text" 
```

或者

```
## "My long text
## is this here" 
```

图像的宽度将使图像保持各个方面。

我的代码现在是这样的，基本布局工作，但图像太大。

```
 <LinearLayout 
            android:id="@+id/packet_list_view_layout_subvehicle" android:layout_width="fill_parent"
            android:layout_weight="1" android:orientation="horizontal"
            android:gravity="left" android:layout_height="wrap_content">
            <ImageView 
                android:id="@+id/packet_list_view_layout_subvehicle_image"
                android:src="@drawable/packet"
                android:scaleType="fitCenter"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
            <TextView
                android:id="@+id/packet_list_view_layout_subvehicle_text"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="==================="
                /> 
```

**编辑 1**

另一个尝试给我同样的结果。

```
 <LinearLayout
            android:id="@+id/packet_list_view_layout_subvehicle"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:orientation="horizontal"
            android:gravity="left"
            android:layout_height="wrap_content"
        >
            <ImageView
                android:id="@+id/packet_list_view_layout_subvehicle_image"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:scaleType="fitCenter"
                android:src="@drawable/packet" />
            <TextView
                android:id="@+id/packet_list_view_layout_subvehicle_text"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:text="TV's (20) to London"
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout> 
```

**编辑 2**

我现在找到了一半工作代码，这里的问题是图像的宽度是原始宽度而不是新的比例宽度。

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:id="@+id/packet_list_view_layout_subvehicle"
        >
            <ImageView
                android:id="@+id/packet_list_view_layout_subvehicle_imageAA"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:src="@drawable/packet"
                />

            <TextView
                android:id="@+id/packet_list_view_layout_subvehicle_text"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center|left"
                android:text="TV's (20) to London"
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:09:11.033

我终于找到了一种工作方式，不是很好，但为我工作。

我的代码现在是

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:id="@+id/packet_list_view_layout_subvehicle"
        >
            <mypacket.MyImageView
                android:id="@+id/packet_list_view_layout_subvehicle_imageAA"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:src="@drawable/packet"
                />

            <TextView
                android:id="@+id/packet_list_view_layout_subvehicle_text"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center|left"
                android:text="TV's (20) to London"
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout> 
```

就是`mypacket.MyImageView`这个代码。

```
public class MyImageView extends ImageView {

    public MyImageView(Context context) {
        super(context);
    }
    public MyImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public MyImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

    }
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(heightMeasureSpec, heightMeasureSpec);
    }
} 
```

**编辑：**事实上，我不使用这个，基于系统如何计算尺寸的一些错误，图像会比需要的大，这会使文本变形为两行。最后我使用了一个普通的 ImageView 并设置了修复高度和撤销。

# android - 以对话框形式发送电子邮件意图

> ID：13014621
> 
> 赞同：2
> 
> 时间：2012-10-22T15:25:51.427
> 
> 标签：android, android-intent, gmail

我正在开发一个带有电子邮件共享的应用程序。我用来启动意图的代码是标准的Android，即：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, title);
emailIntent.setType("application/octet-stream");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Hello");

context.startActivity(emailIntent); 
```

问题是，这会以我不想要的全屏模式启动 Gmail 应用程序。我可以让它成为一个类似于下面 iOS 的对话框吗？如果没有，是已经写好了，还是需要我自己写。

![在此处输入图像描述](../Images/2db7c31e1c028f18b25e5936a1d31a35.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:02:38.633

您可以使用此布局创建一个对话框，以从用户那里获取数据并使用 avaMail API 发送实际的电子邮件，如帖子所示

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:28:11.260

您不能使用 ACTION_SEND。通过发送此 Intent，您是在告诉系统自己启动 Gmail。您可以在 Intent 中传递“附加”以填充一些有用的数据。这是一项*功能*，因为您允许用户在可以处理 ACTION_SEND 的应用程序中进行选择，而不是强制他们使用 Gmail。

如果您想要一个对话框，您必须先自己编写，然后将您收集的值传递给用户选择的电子邮件程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:42:23.017

通过触发 Intent，您正在启动另一个应用程序。没有邮件程序（公平）支持任何类型的嵌入，因此您需要自己编写图片活动，然后，一旦用户结束输入，抓取那里的内容并执行`ACTION_SEND`。然而，我建议不要这样做，除非你的用户开始抱怨（我认为这不会发生）。

# python - 正则表达式 - 匹配返回无。我哪里错了？

> ID：13014623
> 
> 赞同：17
> 
> 时间：2012-10-22T15:25:59.120
> 
> 标签：python, regex

```
>>> import re
>>> s = 'this is a test'
>>> reg1 = re.compile('test$')
>>> match1 = reg1.match(s)
>>> print match1
None 
```

在与 s 结尾处的测试相匹配的 Kiki 中。我想念什么？（我也试过`re.compile(r'test$')`）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-22T15:27:54.610

利用

```
match1 = reg1.search(s) 
```

反而。该`match`函数*仅*在字符串的开头匹配...请参阅[此处](http://docs.python.org/library/re.html#search-vs-match)的文档：

> Python 基于正则表达式提供了两种不同的原始操作：`re.match()`仅在字符串的开头检查匹配，而在`re.search()`字符串中的任何位置检查匹配（这是 Perl 默认所做的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:31:35.923

您的正则表达式与完整字符串不*匹配。*您可以使用*搜索*来代替无用提到的，或者您可以更改您的正则表达式以匹配完整的字符串：

```
'^this is a test$' 
```

或者有点难以阅读但没那么无用：

```
'^t[^t]*test$' 
```

这取决于你想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-30T20:40:10.343

这是因为如果找不到预期的模式，该`match`方法会返回，如果找到模式，它将返回一个类型为.`None``_sre.SRE_match`

所以，如果你想得到布尔（`True`或`False`）结果，`match`你必须检查结果是否`None`！

您可以像这样检查文本是否匹配：

```
string_to_evaluate = "Your text that needs to be examined"
expected_pattern = "pattern"

if re.match(expected_pattern, string_to_evaluate) is not None:
    print("The text is as you expected!")
else:
    print("The text is not as you expected!") 
```

# sql - 比较两个列表项

> ID：13014626
> 
> 赞同：4
> 
> 时间：2012-10-22T15:26:13.410
> 
> 标签：sql, tsql

我正在尝试将存储列表项（逗号分隔）的数据库字段与不幸的是一个也是列表项的变量进行比较。

**例子：**

在这种情况下，一个用户可以属于多个组，内容访问也分配给多个组。

```
contentid | group  
 (1)   (c,d)   
 (2)   (a,c)  
 (3)   (b) 
```

所以，我需要选择用户在组（a，c）中的所有内容。在这种情况下，应该返回 contentid 1,2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:53:02.320

这是 SQL 2008 的安全但缓慢的解决方案

```
BEGIN
-- setup
DECLARE @tbl TABLE (
    [contentid] INT
    ,[group] VARCHAR(MAX)
)
INSERT INTO @tbl VALUES
     (1, 'c,d')
    ,(2, 'a,c')
    ,(3, 'd')
-- send your request as simple xml
DECLARE @param XML
SET @param = '<g>a</g><g>c</g>'
-- query
SELECT DISTINCT contentid 
FROM @tbl t
    INNER JOIN @param.nodes('/g') AS t2(g)
        ON ',' + t.[group] + ',' LIKE '%,' + t2.g.value('.', 'varchar(max)') + ',%'
END 
```

您只需将查询作为 XML 片段而不是逗号分隔列表传递。

如果您的组名是单个字符，或者您可以确定名称*不是*彼此的字符子集（即：GroupA、GroupAB），则可以优化查询。

```
ON t.[group] LIKE '%' + t2.g.value('.', 'varchar(max)') + '%' 
```

* * *

如果您使用的是没有 XML 解析功能的 RDBMS，则必须使用字符串将查询拆分为临时表并以这种方式工作。

* * *

您真的不应该在列中使用逗号分隔值。如果 [group] 列仅包含一个值，并且您在组合（contentid，group）上有重复的条目，并且具有 UNIQUE 约束，那会好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:25:48.297

您可能会发现这个问题和答案很有用：[如何拆分字符串以便访问项目 x？](https://stackoverflow.com/questions/2647/split-string-in-sql)

或者你总是可以使用这样的东西：

```
create function SplitString(
    @string varchar(max),
    @delimiter char(1)
)
returns @items table (item varchar(max))
as
begin

declare @index int set @index = 0
if (@delimiter is null) set @delimiter = ','
declare @prevdelimiter int set @prevdelimiter = 0

while (@index < len(@string)) begin

    if (substring(@string, @index, 1) = @delimiter) begin
        insert into @items
        select substring(@string, @prevdelimiter, @index-@prevdelimiter)
        set @prevdelimiter = @index + 1
    end

    set @index = @index + 1

end

--last item (or only if there were no delimiters)
insert into @items
select substring(@string, @prevdelimiter, @index - @prevdelimiter + 1)

return
end
go

declare @content table(contentid int, [group] varchar(max))
insert into @content
select 1, 'c,d'
union
select 2, 'a,c'
union
select 3, 'b'

declare @groups varchar(max) set @groups = 'a,c'
declare @grouptable table(item varchar(max))
insert into @grouptable 
select * from dbo.SplitString(@groups, ',')

select * From @content
where (select count(*) from @grouptable g1 join dbo.SplitString([group], ',') g2 on g1.item = g2.item) > 0 
```

# php - php执行时关闭浏览器窗口

> ID：13014632
> 
> 赞同：1
> 
> 时间：2012-10-22T15:26:47.540
> 
> 标签：php, execution

当 PHP 将内容（例如 1 MB）放入文件并且用户关闭选项卡时，究竟发生了什么？文件是否已损坏？我怎样才能避免这种情况？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:41:28.210

这更像是一个客户端问题......

**我使用 Javascript 的window.onbeforeunload**和**window.onunload**函数解决了这个问题：

```
<head>
<script>
var invalid_exit=0;
var submitted=0;

window.onbeforeunload = function(){ 
    if (invalid_exit==1  && submitted==0 ){
        return 'You will lose your progress!';
    }
}

window.onunload = function(){ 
    if (invalid_exit==1  && submitted==0 ){
    //ajax call when an invalid exit is happening...        
    }
</script>
</head> 
```

在这种情况下，我使用了控制变量：invalid_exit 并提交......

您可以检查用户是否单击提交按钮（submitted=1）、关闭浏览器（invalid_exit=0）、刷新页面（invalid_exit=0）等...根据您的要求...

使用 Jquery，您可以控制每个事件...

我希望这可以帮助你！

# android - Android 为 ListVIews 分离空视图

> ID：13014634
> 
> 赞同：1
> 
> 时间：2012-10-22T15:26:54.403
> 
> 标签：android, android-listview

我想为列表视图创建多个空视图并以编程方式设置它们。所以我在 ListActivity 中有一个列表视图。我的客户想要应用程序的方式，我在应用程序中有一个标题栏，所以布局看起来像这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/providerListLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<include
    android:id="@+id/headerBar_ref"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/header_with_dashboard_button" />

<include
    android:id="@+id/loadingView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    layout="@layout/loading_view" />

<RelativeLayout
    android:id="@+id/listViewWrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_below="@id/headerBar_ref" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/headerBar_ref" >
    </ListView>
</RelativeLayout> 
```

所以我在单独的 xml 文件中有 2 个空视图。在 Activity 列表中，我尝试像这样设置空视图：

```
RelativeLayout rootLayout = (RelativeLayout) findViewById(R.id.listViewWrapper);
    RelativeLayout noFavsLayout = (RelativeLayout) this
            .getLayoutInflater().inflate(emptyViewLayoutId,
                    rootLayout);
    getListView().setEmptyView(noFavsLayout); 
```

但是当我这样做时，空视图一直存在。我还尝试使用 addContentView() 添加视图，但这会占据整个屏幕。我还没有找到关于 S/O 的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T19:45:26.530

根据阅读[http://wiresareobsolete.com/2010/08/adapting-to-empty-views/](http://wiresareobsolete.com/2010/08/adapting-to-empty-views/)，显示空视图的实际机制是适配器检查列表是否为空，然后设置可见性将 ListView 或空视图之一设置为 View.GONE，然后将另一个设置为 View.VISIBLE。为了使其正常工作，两个视图必须在同一个父视图中。在您的示例中，这意味着类似

```
<RelativeLayout
  android:id="@+id/listViewWrapper"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_alignParentBottom="true"
  android:layout_below="@id/headerBar_ref" >

  <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />

  <TextView
    android:id="@android:id/empty"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="This list is empty."
    />

</RelativeLayout> 
```

（请注意，我从您的 ListView 中删除了“layout_below”，它是相对布局中的唯一项目，因此不需要该引用。此外，该视图已添加到 XML 中，您不必将其膨胀爪哇。）

现在，如果您想以编程方式设置一个不同的空视图（例如在执行搜索之后），您可以将另一个视图添加到您的相对布局中，使用另一个 id（例如 noResults）......并发现它总是显示。

```
 <TextView
    android:id="@+id/noResults"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="No results were returned."
    /> 
```

因此，在您的 onCreate() 中，您需要找到该视图并将其可见性设置为消失。

```
ListView listView = (ListView)findViewById(android.R.id.list);
View empty = findViewById(android.R.id.empty);
listView.setEmptyView(empty);
View noResults = findViewById(R.id.no_results);
noResults.setVisibility(View.GONE); 
```

然后，每当您更改列表的空视图时，您都需要将另一个视图的可见性设置为 GONE 以确保只显示一个视图。

```
listView.setEmptyView(noResults);
empty.setVisibility(View.GONE); 
```

我希望这有帮助！

# c++ - Boost Mutex 的 Windows 实现

> ID：13014635
> 
> 赞同：5
> 
> 时间：2012-10-22T15:26:56.433
> 
> 标签：c++, windows, multithreading, boost

据我所知，旧版本的`boost::mutex`Windows Boost 实现是使用临界区完成的。但是在 Boost 1.51 的最新版本中，我发现现在互斥锁实现是基于事件的。

有谁知道这种变化背后的原因是什么？这样做是因为性能原因吗？关键部分会被弃用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:03:03.080

`boost`通过使用我们总是有最好的方法而没有改变，这不是很好吗？在新版本中`boost`，`boost::mutex`被实现为自旋锁，但在 windows 事件的帮助下避免忙等待，并且该事件仅在需要时创建，因此它非常轻量级并且具有非常高的性能，并且还可以`boost`使用这种轻量级`mutex`定时等待的重量！我认为这很棒

# maven - 在 Jenkins 上构建和部署 Grails 应用程序

> ID：13014636
> 
> 赞同：1
> 
> 时间：2012-10-22T15:27:01.273
> 
> 标签：maven, grails, jenkins

我继承了现有的 Grails Maven 应用程序，并负责研究自动构建和部署它。

它目前使用 grails 1.3.7，但很快将升级到 2.1。

所以1：有没有办法让某人登录jenkins并单击一个会自动创建构建的按钮？

2：我可以使用后续任务来允许用户将构建部署到我事先指定的服务器吗？

任何指向有用/相关文章的链接都会很棒......我对 grails 和 jenkins 都很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:34:26.817

1 + 2) 是的。这几乎正​​是 Jenkins 的工作所做的。

查看[持续集成与 Grails](https://stackoverflow.com/questions/9911745/continuous-integration-with-grails)以获得快速入门，或者查看[Jenkins Wiki](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project)以获得稍微不那么快速的入门。

# .net - 以编程方式将包名称与完整的包名称匹配

> ID：13014639
> 
> 赞同：1
> 
> 时间：2012-10-22T15:27:09.087
> 
> 标签：.net, windows-8, windows-runtime, windows-store-apps

我正在尝试以一种简单的方式自动运行 appcert.exe 的好方法。

我一生都无法弄清楚如何获得一个包的完整包名。例如，我有一个名为 的应用程序`TwitterDemo`，但是当我运行 Get-AppxPackage 时，该应用程序甚至没有被列出（可能列为类似的东西`c2934-289aa9-394...`。另外，我真的不想依赖使用来自 powershell 的 Get-AppxPackage 和然后解析它的输出和/或将其移动到常规命令行。甚至似乎没有用于从 .Net 查询包数据库的 API，而且 C++ API 似乎相当复杂。

所以基本上，将应用程序“标题”与其完整包名称匹配的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:06:12.267

There are multiple ways to determine the Package Full Name for a package. Do you have a running process, an installed package or merely definitional information?

If you have a running process, [GetPackageFullName](http://msdn.microsoft.com/en-us/library/windows/desktop/hh446605.aspx)() is the best way.

If you have an installed package, Powershell is probably the most convenient for human. To list all packages installed for the current user: powershell -c $(Get-AppxPackage).PackageFullName You can do the equivalent programmatically via [PackageManager](http://msdn.microsoft.com/en-us/library/windows/apps/br240960.aspx)'s [FindPackages](http://msdn.microsoft.com/en-us/library/windows/apps/br240969.aspx)() method.

If you just know a package's identity you can calculate its Package Full Name via [PackageFullNameFromId](http://msdn.microsoft.com/en-us/library/windows/desktop/hh446771.aspx)()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:53:15.377

我假设您正在编写一个外部应用程序来自动化 appcert。我还假设这是一个 win32 应用程序。如果是这种情况，您可以使用 win32 API [GetPackageFullName](http://msdn.microsoft.com/en-us/library/windows/desktop/hh446605%28v=vs.85%29.aspx)来获取一个 pacakge 的全名，给定一个进程句柄。因此，在下面的示例中，我向应用程序添加了一个列表框和按钮，然后具有以下代码：

```
[DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
static extern int GetPackageFullName(IntPtr hProcess, ref UInt32 packageFullNameLength, StringBuilder fullName);

public Form1()
{
    InitializeComponent();
    listBox1.DataSource = System.Diagnostics.Process.GetProcesses();

    listBox1.DisplayMember = "ProcessName";
}

private void button1_Click(object sender, EventArgs e)
{
    var proc = listBox1.SelectedItem as System.Diagnostics.Process;
    uint len = 250;
    StringBuilder sb = new StringBuilder(len);
    var err =  GetPackageFullName(proc.Handle, ref len, sb);

    MessageBox.Show(sb.ToString());     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:43:47.253

我发现最简单的方法是使用 Windows.Management.Deployment.PackageManager。这并不能完全解决问题，但我认为我的设计范围有点过于宽泛。

# .net - Excel VBA 无法调用使用多线程的 COM 方法（使用 .NET 构建）

> ID：13014644
> 
> 赞同：1
> 
> 时间：2012-10-22T15:27:22.283
> 
> 标签：.net, multithreading, vba, excel, com-interop

此 C# 代码位于 .NET 4.5`ComVisible`程序集中：

# C# 代码

```
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
[Guid("22341223-9264-12AB-C1B4-B4F112014C31")]
public interface IComWithTask
{
    void LongExecutionMethod(double x);
    void LongExecutionMethodAsync(double x);
}

[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
[Guid("23844123-9274-12CB-C1F4-B4F1521E4F33")]
public interface IComWithTaskEvents
{
    void OnLongExecutionMethodComplete(double x);
}

[ClassInterface(ClassInterfaceType.None)]
[ComSourceInterfaces(typeof(IComWithTaskEvents))]
[Guid("E4F27AA4-1932-2196-1234-121CF2722C42")]
[ProgId("ComWithTask")]
public class ComWithTask : IComWithTask
{
    [ComVisible(false)]
    public delegate void LongExecutionMethodComplete(double x);
    public event LongExecutionMethodComplete OnLongExecutionMethodComplete;

    public void LongExecutionMethod(double x)
    {
        if (OnLongExecutionMethodComplete != null)
        {
            OnLongExecutionMethodComplete(x * x);
        }
    }

    public void LongExecutionMethodAsync(double x)
    {
        Task.Factory.StartNew(state =>
        {
            var onLongExecutionMethodComplete = OnLongExecutionMethodComplete;
            if (onLongExecutionMethodComplete != null)
            {
                onLongExecutionMethodComplete(x * x);
            }
        }, null);
    }
} 
```

从 Excel 2010 32bit VBA，我有以下行为：

# VBA 代码

```
Private WithEvents oComWithTask As ComWithTask

Public Sub Class_Initialize()
    Set oComWithTask = New ComWithTask
End Sub

Public Sub LongExecutionMethod()
    ' Works as expected
    Call oComWithTask.LongExecutionMethod(2)
End Sub

Public Sub LongExecutionMethodAsync()
    ' Does NOT work!
    Call oComWithTask.LongExecutionMethodAsync(3)
End Sub

Private Sub oComWithTask_OnLongExecutionMethodComplete(ByVal x As Double)
    MsgBox x
End Sub 
```

我知道我在调用 .NET 时正在旋转一个线程`LongExecutionMethodAsync`，并且我知道办公应用程序是单线程的。

我确实找到了关于以多线程方式从 .NET 调用 COM 组件的优秀文献，但找不到任何相反的资源，即 VBA 调用使用 COM 方法包装的多线程 .NET。

> 关于如何`LongExecutionMethodAsync`使用多线程工作的任何想法，你能指出我关于这个主题的任何相关资源吗？另外，您对在 VBA 中触发异步事件有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:14:06.010

上面的代码按预期工作，问题是 VBA 中对象的生命周期，它在事件引发之前就死了。

# javascript - 非常简单的带循环的现金

> ID：13014647
> 
> 赞同：3
> 
> 时间：2012-10-22T15:27:27.730
> 
> 标签：javascript

我应该创建一个收银程序，提示输入物品的数量，然后根据物品的数量，提示每个单独的价格，然后计算总数。我很难掌握如何使用“while”循环来做到这一点。有人可以指出我正确的方向吗？

这就是我现在所拥有的：我知道它会创建一个无限循环

```
var itemTotal = prompt("Please enter the amount of items that you're purchasing.");

items = parseInt(itemTotal)

var i = 0;

while(i = items) {

    prompt ("Enter your item price here.");

    i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:33:16.580

您希望 while 循环中的表达式在您希望它循环时为真。在这种情况下，您希望`i`小于`items`

```
while ( i < items ) {
    /* get cost */
    /* add cost to total */
    i++;
} 
```

我忘了指出`i = items`将分配`items`to的值`i`。要检查是否`i`等于`items`您需要使用`i == items`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:33:19.933

如果您知道项目的数量（根据用户提示），为什么不使用 for 循环？两者都可以，但我认为 for 循环会更具可读性。

```
for (i=1; i <= NUM_FROM_PROMPT; i++) {
    //do something here
} 
```

有一个while循环

```
i=1 //starting point
while (i <= NUM_FROM_PROMPT) {
    //do something here
    i++
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:35:55.467

所以我试着得到你想要的：

```
var total = parseInt(prompt("How much items total?", "0"));

var price = 0;
for (var i = 0;i<total.length;i++) {
    var individualPrice = prompt("How much does item " + (i+1) + " cost?", 0);
    price+=parseInt(individualPrice);
}
alert("Total Price is " + price); 
```

希望有帮助。即使它可能是你的家庭作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:36:49.430

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/while](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/while)

在那个文档链接中，他们有一个看起来像这样的示例。

```
n = 0;
x = 0;
while (n < 3) {
  n ++;
  x += n;
} 
```

因此，您可以将其用作收银机程序的指南。

```
//get user input for number of items
var num_of_items = prompt("How many items?");
var n = 0;
var total = 0;

while (n < num_of_items) {
  n ++;

  //get cost of item
  var cost_of_item = 0;

   cost_of_item = parseInt(prompt("Cost of item"));

  total = total + cost_of_item;

}
alert("total price: " + total);
​ 
```

我不确定你是如何处理用户输入的，所以我把它留给你弄清楚:)

[http://jsfiddle.net/Robodude/LEdbm/3/](http://jsfiddle.net/Robodude/LEdbm/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T15:39:02.633

```
var itemTotal = Number(prompt("Please enter the amount of items that you're purchasing."));
var priceTotal = 0

while(itemTotal) {
    priceTotal += Number(prompt("Enter your item price here."));
    itemTotal--;
}

alert("Please pay " + priceTotal); 
```

​</p>

# django - 扩展 django.forms.FloatField

> ID：13014655
> 
> 赞同：3
> 
> 时间：2012-10-22T15:27:48.947
> 
> 标签：django

我正在尝试创建一个自定义表单字段，该字段与浮点字段的所有意图和目的相同，但是（默认情况下）输出没有尾随零的浮点值，例如 33 而不是 33.0

我试图像这样简单地扩展 django.forms.FloatField：

```
class CustomFloatField(django.forms.FloatField):

    def to_python(self, value):
        """
        Returns the value without trailing zeros.
        """
        value = super(django.forms.FloatField, self).to_python(value)
        # code to strip trailing zeros
        return stripped_value 
```

但这最终导致我收到验证错误。当我仔细查看 FloatField 类时，我注意到它在自己的**to_python()**方法中调用**super(IntegerField, self).to_python(value)**来检查以确保可以将值强制转换为 int，我的代码似乎绊倒了。这让我彻底糊涂了。如果 FloatField 必须尝试将其值转换为 int，它是如何工作的？:)

很可能我在这里完全叫错了树，但如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:43:20.603

你的预感是对的——FloatField 并没有真正调用`to_python`IntegerField 的方法。为了说明真正发生的事情，

```
class A(object):
    def __init__(self):
        print "A initialized"

    def to_python(self, value):
        print "A: to_python"
        return value

class B(A):
    def __init__(self):
        print "B initialized"

    def to_python(self, value):
        value = super(B, self).to_python(value)
        print "B: value = "
        print int(value)
        return int(value)

class C(B):
    def to_python(self, value):
        value = super(B, self).to_python(value)
        print "C: value = "
        print float(value)
        return float(value)

c = C()
c.to_python(5.5) 
```

给出输出，

```
B initialized
A: to_python
C: value = 
5.5 
```

把它放在上下文中，FloatField's 中的行`to_python`：

```
value = super(IntegerField, self).to_python(value) 
```

真的是调用 Field 的 to_python，很简单，

```
def to_python(self, value):
    return value 
```

在调用其余代码之前。这可能会进一步帮助您：[使用 __init__() 方法理解 Python super()](https://stackoverflow.com/questions/576169/understanding-python-super-and-init-methods)

# java - 将数组数组存储在自己的类中？

> ID：13014660
> 
> 赞同：0
> 
> 时间：2012-10-22T15:27:55.640
> 
> 标签：java, arrays, class, data-structures

我编写了一个程序，其中有 4 个数字。第一个数字是 ID。(int) 其他 3 个只是地图上的点。（双倍的）

我想在它自己的类中创建一个数组数组，理想情况下它存储这 3 个数字并使用第一个作为 ID。

数组列表是一个好方法吗？我真的只是在数据结构上苦苦挣扎。它的本质很简单。我只需要将一堆数字存储在数组数组中。我能做到。但是，将其存储在不同的类中很困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:32:10.543

由于 Java 是一种面向对象的语言，因此只需使用自定义类：

```
class MyPoint {
  double x, y, z;
} 
```

或者如果你真的需要一个数组

```
class MyPoint {
  double[] coords;
} 
```

然后它取决于你的 id 是什么，如果它是一个没有“洞”的自动增量值，你可以只拥有一个`ArrayList<MyPoint>`如果你需要随机访问。

如果它是一个稀疏索引并且您仍然需要随机访问，那么使用`HashMap<Integer, MyPoint>`. `TreeMap<Integer, MyPoint>`如果您需要对它们进行排序（按 id 或按位置），则可以使用 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:34:01.393

如果这三个点彼此相关，请考虑为它们引入一种类型，例如`MyPoints`并将它们存储在地图中以进行查找，如下所示：

`Map<Integer, MyPoints> myMap = new HashMap<Integer, MyPoints>`

请记住覆盖`hashCode`和`equals`方法以`MyPoints`使地图按预期运行，即考虑两个`MyPoint`具有相同内容的实例相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T15:34:28.947

您也可以使用 a`Map`并将您的 id 用作键，然后使用带有您的点的数组。

```
Map<Integer,Double[]> map = new HashMap<Integer,Double[]>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:43:19.323

你为什么不创建一个模型类并在你的控制器类中使用它呢？我想这会让我轻松很多。

```
class SomeModel {
    // getters and setters }

class Controller {
   public SomeModel model;

   //getter and setter for model
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T15:43:49.490

为什么不使用`MultiMap`Apache Commons Collections 中的 a：[请参见此处](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/MultiHashMap.html)

`MultiMap`为同一个键关联多个值。（这是透明的，这就是为什么`MultiMap`在这种情况下有用）。

```
MultiMap idWithDoubles = new MultiHashMap();
 idWithDoubles.put(1, 1.1);
 idWithDoubles.put(1, 1.2);
 idWithDoubles.put(1, 1.3); 
```

然后，您可以检索特定 id 的 Doubles 列表：

```
 List list = (List) idWithDoubles.get(1); 
```

默认返回 an`ArrayList`值：1.1, 1.2, 1.3

您还可以在此处查看 Guava 版本（最新）：

[http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T16:47:57.317

利用`Map`

```
Map<Integer, Double[]> map = new HashMap<Integer, Double[]>(); 
```

因此，对于每个 Integer ID，您都有一组关联的值。

要遍历`HashMap`,

```
Iterator it = map.entrySet().iterator();
while (it.hasNext()) {
    Map.Entry hashValues = (Map.Entry)it.next();
    System.out.println(hashValues.getKey() + " = " + hashValues.getValue());
} 
```

获取 Double 数组中的值并为每个键遍历它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T15:31:02.533

无需创建新的 4 类。

```
Number[][] lst = {{1, 3.0, 4.0, 11.0, 443.f}}; 
```

或者是这样的：

```
HashSet<Integer, <ArrayList<Double>> items = new HashSet<Integer, <ArrayList<Double>>(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-22T15:45:28.200

如果需要混合类型（int/double），那么您将需要一个类。像这样的东西：

```
public class MapPoints {
    private int id;

    private double point1;

    private double point2;

    private double point3;

    public void setId(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }

    public void setPoint1(double point1) {
        this.point1 = point1;
    }

    public double getPoint1() {
        return point1;
    }

    public void setPoint2(double point2) {
        this.point2 = point2;
    }

    public double getPoint2() {
        return point2;
    }

    public void setPoint3(double point3) {
        this.point3 = point3;
    }

    public double getPoint3() {
        return point3;
    }

} 
```

如果您只有 3 分，我不明白您为什么还要费心使用数组。这只是引入了 ArrayIndexOutOfBoundsException 的可能性。

之后，您可以只拥有一个 ArrayList 对象来保存所有这些。

但是，如果 ID 可以是浮点数，那么彼得的回答更有意义。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-22T16:08:16.790

正弦 java 是 OO

```
public class MyPoint extends Point.Double{

    private double z;

    public MyPoint(double x, doubley, doublez) {
        super(x, y);
        this.setZ(z);
    }

    public double getZ() {
        return z;
    }

    public void setZ(double z) {
        this.z = z;
    }

    public String toString() {
        return "MyPoint[" + x + ", " + y + ", " + z + "]";
    }

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-22T15:34:36.107

我的解决方案将是这样的。

```
class MyPoint {
    int id;
    double[] coordinate= new double[3];
    MyPoint(int id, double x,double y, double z) {
        this.id = id;
        coordinate[0]= x;
        coordinate[1]= y;
        coordinate[2]= z;
    }

    public int getId() {
        return id;
    }

    public double[] getCoordinate() {
        return coordinate;
    }
}

class MyPoints extends ArrayList<MyPoint> {
    public void addPoint(int id, double x,double y, double z) {
        super.add(new MyPoint(id,x,y,z));
    }
} 
```

注意：如果需要找到带有id的MyPoint，那么可以使用HashMap；

```
class MyPointWithHashMap extends HashMap<Integer,MyPoint> {
    public void addPoint(int id, double x,double y, double z) {
        super.put(id,new MyPoint(id,x,y,z));
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-22T15:37:36.887

我可能会为您的三点坐标系创建一个包装器类，但不会为包括 ID 在内的整个事物创建一个包装器类。ID 可能应该是单独的，因为它是坐标本身之上的抽象级别。

```
public class Point {

    double x, y, z;

    //standard constructors, getters, setters

} 
```

然后，无论您从哪里使用它，您都可以...

```
HashMap<Integer, Point> map = new HashMap<Integer, Point>();
int id = 0; 
```

...对于您的每一个观点...

```
map.put(id++, point); 
```

这为您的每个坐标集提供了唯一的 ID，而不是使 ID 成为对象的固有部分。

# sql - 转换为 HH:MM:SS

> ID：13014664
> 
> 赞同：1
> 
> 时间：2012-10-22T15:28:16.850
> 
> 标签：sql, sql-server

我有一个 SQL 服务器作业，该作业出去并导入一个文本文件。这项工作的一行如下：

```
SUBSTRING(Line, 61, 5) AS Col06, 
```

这是获取一个 5 位数字（通话的持续时间）并将其放入 nvarchar(50) 字段。我想把它转换成`HH:MM:SS`.

你能帮忙吗？我对此很陌生，所以解释得好像我很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:31:55.487

你可以试试这个：-

其中 1000 是秒数

```
 SELECT CONVERT(CHAR(8),DATEADD(second,1000,0),108) 
```

例子 ：

```
SELECT CONVERT(CHAR(8),DATEADD(second,CAST (SUBSTRING('the call was 10000 seconds', 14, 5) AS INT),0),108) 
```

# matlab - MATLAB 从 16 位图像创建电影

> ID：13014666
> 
> 赞同：0
> 
> 时间：2012-10-22T15:28:25.163
> 
> 标签：matlab, video, image-processing

我有一个简单的 MATLAB 序列，旨在从 uint16 图像的集合中创建 AVI 电影：

```
video = VideoWriter( vidName );
video.FrameRate = ( frmRate );
open( video );
for i=1:size
    img = imread( picNames(i).name );
    writeVideo( video, img );
end
close( video ); 
```

这会产生错误`IMG must be one of the following classes: double, single, uint8`。关于如何在不损失精度或增加压缩的情况下解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:31:12.067

您应该在之前添加以下行`writeVideo( video, img );`：

```
img=im2double(img); 
```

你不会失去精确度。

# android - 在列表视图中搜索不起作用

> ID：13014672
> 
> 赞同：0
> 
> 时间：2012-10-22T15:28:59.037
> 
> 标签：android, listview

我无法在我的 Android 应用程序中进行研究。我创建了一个editText，并在其中添加了一个TextWatcher。在我的自定义数组适配器中，我重写了 getFilter 函数来过滤结果并更新列表视图。

我创建了一个edittext并设置它：

```
et.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            adapter.getFilter().filter(s.toString());               
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            //ContactActivity.this.adapter.getFilter().filter(arg0);                
        } 
```

我的 ContactAdapter 是：

```
 public ContactAdapter(Context context, int textViewResourceId, ArrayList<String> objects) {
        super(context, textViewResourceId, objects);
        this.objects = objects;
    }

    /*
     * we are overriding the getView method here - this is what defines how each
     * list item will look.
     */
    public View getView(int position, View convertView, ViewGroup parent){

        // assign the view we are converting to a local variable
        View v = convertView;

        // first check to see if the view is null. if so, we have to inflate it.
        // to inflate it basically means to render, or show, the view.
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.list_item, null);
        }

        /*
         * Recall that the variable position is sent in as an argument to this method.
         * The variable simply refers to the position of the current object in the list. (The ArrayAdapter
         * iterates through the list we sent it)
         * 
         * Therefore, i refers to the current Item object.
         */
        String i = objects.get(position);

        TextView tt = (TextView) v.findViewById(R.id.name);

        if (i != null) {

            // This is how you obtain a reference to the TextViews.
            // These TextViews are created in the XML files we defined.

            if (tt != null){

                tt.setText(i);
            }

        }

        // the view must be returned to our activity
        return v;

    }

    @Override
    public Filter getFilter() {
        return new Filter() {
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                ArrayList<String> list  = (ArrayList<String>) results.values;
                int size = list.size();

                //list.clear();
                for (int i = 0; i<list.size();i++){
                    add(list.get(i));
                }
                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                ArrayList<String> filteredResults = getFilteredResults(constraint);

                FilterResults results = new FilterResults();
                results.values = filteredResults;

                return results;
            }

            private ArrayList<String> getFilteredResults(CharSequence constraint) {
                ArrayList<String> names = ContactAdapter.this.objects;
                    ArrayList<String> filteredNames = new ArrayList<String>();
                    for(int i=0;i< names.size();i++){
                        if(names.get(i).toLowerCase().startsWith(constraint.toString().toLowerCase())){
                            filteredNames.add(names.get(i));
                        }
                    }

                    return filteredNames;
                }
        };
    }
} 
```

建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:00:28.947

源代码 [main.xml] 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/LinearLayout01"
                android:layout_width="fill_parent"
android:layout_height="fill_parent"
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:orientation="vertical">
<EditText android:id="@+id/EditText01"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:hint="Search">
</EditText>

<ListView android:id="@+id/ListView01"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
</ListView>
</LinearLayout> 
```

源代码 [ListViewSearchExample.java] 是

```
package com.ListViewSearchExample;

import java.util.ArrayList;
import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;

public class ListViewSearchExample extends Activity
{
private ListView lv;
private EditText et;
private String listview_array[] = { "ONE", "TWO", "THREE", "FOUR", "FIVE",
"SIX", "SEVEN", "EIGHT", "NINE", "TEN" };
private ArrayList<String> array_sort= new ArrayList<String>();
int textlength=0;

public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

lv = (ListView) findViewById(R.id.ListView01);
et = (EditText) findViewById(R.id.EditText01);
lv.setAdapter(new ArrayAdapter<String>(this,
android.R.layout.simple_list_item_1, listview_array));

et.addTextChangedListener(new TextWatcher()
{
public void afterTextChanged(Editable s)
{
                                                                // Abstract Method of TextWatcher Interface.
}
public void beforeTextChanged(CharSequence s,
int start, int count, int after)
{
// Abstract Method of TextWatcher Interface.
}
public void onTextChanged(CharSequence s,
int start, int before, int count)
{
textlength = et.getText().length();
array_sort.clear();
for (int i = 0; i < listview_array.length; i++)
{
if (textlength <= listview_array[i].length())
{
if(et.getText().toString().equalsIgnoreCase(
(String)
listview_array[i].subSequence(0,
textlength)))
{
                                                                                                                array_sort.add(listview_array[i]);
                                                                                                }
                                                                                }
                                                                }
lv.setAdapter(new ArrayAdapter<String>
(ListViewSearchExample.this,
android.R.layout.simple_list_item_1, array_sort));
}
});
}
} 
```

还可以查看这些链接...

[http://androidsearchfilterlistview.blogspot.in/](http://androidsearchfilterlistview.blogspot.in/)

[http://software-workshop.eu/content/android-development-creating-custom-filter-listview](http://software-workshop.eu/content/android-development-creating-custom-filter-listview)

[http://www.mysamplecode.com/2012/07/android-listview-edittext-filter.html](http://www.mysamplecode.com/2012/07/android-listview-edittext-filter.html)

[http://androidcocktail.blogspot.in/2012/04/search-custom-listview-in-android.html](http://androidcocktail.blogspot.in/2012/04/search-custom-listview-in-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:36:14.827

您可以将此功能添加到您的自定义适配器：

@Override 公共过滤器 getFilter() {

```
 Filter myFilter = new Filter() {

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                // TODO Auto-generated method stub
                if (!m_orders.isEmpty()){
                    clear();
                }

                for (int i = 0; i < tempList.size(); i++) {
                    if(tempList.get(i).getName().toLowerCase().startsWith(constraint.toString().toLowerCase())){
                        add(tempList.get(i));
                    }
                }

                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                // TODO Auto-generated method stub
                return null;
            }
        };  

        return myFilter;
    } 
```

您可以将此过滤器搜索绑定到您的editText：

et_search.addTextChangedListener(new TextWatcher() {

```
 @Override
        public void onTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

            m_adapter.getFilter().filter(s, new FilterListener() {

                @Override
                public void onFilterComplete(int count) {
                    // TODO Auto-generated method stub
                    m_adapter.notifyDataSetChanged();
                }
            });
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {

        }

        @Override
        public void afterTextChanged(Editable str) {

        }
    }); 
```

# asp.net - 将 ASPX 页面转换为内容页面？

> ID：13014676
> 
> 赞同：-1
> 
> 时间：2012-10-22T15:29:15.723
> 
> 标签：asp.net, visual-studio-2012, master-pages, content-pages

我正在阅读 MCTS 培训套件书（考试 70-515）。我正在开展一个基于母版页和主题的案例研究实践项目，本书指导您将 ASPX 页面转换为内容页面。我环顾四周，找不到有关此主题的任何内容，因此任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:14:21.047

对于每个页面，请执行以下操作 - 将属性添加到名为 MasterPageFile="Your MasterPage Path" 的 <@Page > 标签 - 添加以下标签 - 删除 html 和 head 标签及其内容，除了 body 标签 - 删除 body 标签，但保留它内容 - 删除表单标签 - 完成

[有用的链接](http://www.asp.net/Guided-Tour/s19.aspx)

# javascript - 从 csv 文件检查邮政编码

> ID：13014678
> 
> 赞同：0
> 
> 时间：2012-10-22T15:29:17.150
> 
> 标签：javascript, mysql, csv

我正在开发一个网络应用程序，我需要获取用户的邮政编码，并查看它是否与 6000 个邮政编码的 csv 文件中的一个邮政编码匹配（如果是，请输入；否则显示错误；）我打算这样做sql 并使用用户的输入进行查询，但想知道是否有更好的方法（速度和其他建议）。首选Javascript。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:32:50.263

SQL 可能是最简单/最快的。

不过，作为一个有趣的实验，如果您真的想在 JavaScript 中执行此操作，您可以读取文件并通过将每个数字作为字符串拆分为其字符来创建排序索引，然后为查找创建多维散列。

然后，您可以将该性能与简单的 Array.indexOf() 调用进行比较。

这些可能相当快，但比需要的工作更多，只需使用 SQL。;)

# xslt - Concat 静态 URL 字符串与动态 xslt 文件夹名称 umbraco

> ID：13014679
> 
> 赞同：0
> 
> 时间：2012-10-22T15:29:35.003
> 
> 标签：xslt, transform, umbraco

我正在尝试在下面的图像 html 的 src 前面添加一个字符串，以便图像标签看起来像这样......

```
<img width="630" height="540" src="http://www.adifferentserver.com/media/6533/animage.jpg"> 
```

目前 xslt 输出这个

```
<img width="630" height="540" src="/media/6533/animage.jpg"> 
```

以下 xslt 生成下面的 html..

```
<ul class="overview">
  <xsl:for-each select="$mediaItems/Image">
    <xsl:variable name="picFile" select="umbracoFile"/>

    <li>
        <img>
          <xsl:attribute name="src">
            <xsl:value-of select="./umbracoFile"/>
          </xsl:attribute>
        </img>
    </li>
  </xsl:for-each>
</ul> 
```

HTML

```
<ul>
  <li>
    <img width="630" height="540" src="/media/6533/animage.jpg">
  </li>
</ul> 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:32:02.003

使用 xpath 函数“ **concat** ”：

```
<xsl:value-of select="concat('http://www.adifferentserver.com',./umbracoFile)"/> 
```

# mysql - MySQL 中使用可比较列的 INTERSECT

> ID：13014698
> 
> 赞同：1
> 
> 时间：2012-10-22T15:30:44.767
> 
> 标签：mysql, intersect

我想使用 MySQL 创建以下两个查询的 INTERSECtion：

```
1) SELECT atn_nid, atn_select_flag, atn_image_name
FROM city, attraction WHERE cty_nid = atn_cty_nid AND cty_nid = 5;

2) SELECT atn_nid, s2a_image_select_flag, atn_image_name 
FROM segment, seg2atn, attraction WHERE seg_nid = s2a_seg_nid AND
s2a_atn_nid = atn_nid and seg_nid = 68 AND
s2a_image_select_flag = true; 
```

注意：查询 1 中的 atn_select_flag 和 s2a_image_select_flag 都是布尔值

由于 MYSQL 出于某种原因不支持 INTERSECT，因此我不知道用于完成此操作的语法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:45:08.393

如果我正确地假设：

*   `atn_...`名为、`cty_...`、`seg_...`和的字段分别`s2a_...`属于`attraction`、`city`、`segment`和`seg2atn`。
*   命名的字段`..._nid`是主键。
*   `atn_cty_nid`,`s2a_seg_nid`等是外键。

那么您的第一个查询相当于：

```
SELECT atn_nid, atn_select_flag, atn_image_name
  FROM attraction
 WHERE aty_cty_nid = 5
; 
```

你的第二个查询相当于这个：

```
SELECT atn_nid, TRUE, atn_image_name
  FROM attraction
 WHERE atn_id IN
        ( SELECT s2a_atn_nid
            FROM seg2atn
           WHERE s2a_seg_nid = 68
             AND s2a_image_select_flag = TRUE
        )
; 
```

所以他们的交集是这样的：

```
SELECT atn_nid, TRUE AS atn_select_flag, atn_image_name
  FROM attraction
 WHERE atn_cty_nid = 5
   AND atn_nid IN
        ( SELECT s2a_atn_nid
            FROM seg2atn
           WHERE s2a_seg_nid = 68
             AND s2a_image_select_flag = TRUE
        )
; 
```

和*（编辑添加）*他们的工会是这样的：

```
SELECT atn_nid, atn_select_flag, atn_image_name
  FROM attraction
 WHERE aty_cty_nid = 5
UNION
SELECT atn_nid, TRUE, atn_image_name
  FROM attraction
 WHERE atn_id IN
        ( SELECT s2a_atn_nid
            FROM seg2atn
           WHERE s2a_seg_nid = 68
             AND s2a_image_select_flag = TRUE
        )
; 
```

# c# - 如何判断文件是否被修改？

> ID：13014704
> 
> 赞同：20
> 
> 时间：2012-10-22T15:31:06.247
> 
> 标签：c#

我正在写一个备份解决方案（各种）。只需从位置 C:\ 复制文件并将其粘贴到位置 Z:\

为确保速度快，在复制和粘贴之前检查原始文件是否存在。如果是这样，它会执行一些“计算”来确定副本是否应该继续或备份文件是否是最新的。我发现这些计算很困难。

最初，我比较了文件大小，但这还不够好，因为很有可能更改文件并且它的大小相同（例如，将字符 C 保存在记事本中的大小与我保存字符 T 的大小相同）。

所以，我需要找出修改日期是否不同。目前，我使用`FileInfo`该类获取文件信息，但在查看所有字段后，似乎没有任何合适的内容。

如何检查以确保我正在复制已修改的文件？

**编辑** 我已经看到关于使用 MD5 校验和的建议，但我担心这可能是一个问题，因为我正在比较的一些文件将高达 10GB

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-22T15:36:22.207

修改日期是不可靠的 - 计算机时钟在同步或手动调整时可能会倒退。在管理修改日期方面，某些程序在修改或复制文件时可能表现不佳。

使用归档位可能在受控环境中工作，但如果另一个软件正在运行并使用归档位，会发生什么情况？

[Windows 存档位是邪恶的，必须停止](http://www.computerworld.com/article/2598081/data-center/the-windows-archive-bit-is-evil-and-must-be-stopped.html)

如果你想要（几乎）完全的可靠性，那么你应该做的是使用像 SHA1 这样的良好散列函数存储最后备份版本的散列值，如果散列值发生变化，则上传新副本。

这是 SHA1 类以及底部的代码示例：

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1.aspx)

只需通过它运行文件字节并存储哈希值。将 a 传递`FileStream`给它，而不是使用字节数组将文件加载到内存中，以减少内存使用量，尤其是对于大文件。

您可以将其与修改日期以各种方式结合起来，根据速度和可靠性的需要调整您的程序。例如，您可以检查大多数备份的修改日期，并定期运行在系统空闲时运行的哈希检查器，以确保没有遗漏任何内容。有时修改的日期会改变但文件内容仍然相同（即被相同的数据覆盖），在这种情况下，您可以避免在重新计算哈希并意识到它仍然相同后重新发送整个文件。

大多数版本控制系统使用某种结合哈希和修改日期的方法。

如果您不想进行完整备份并每次都发送所有数据，您的方法通常会涉及某种风险管理，并在性能和可靠性之间进行折衷。出于这个原因，偶尔进行一次“完整备份”很重要。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-22T15:41:02.177

您可以通过哈希值比较文件：

```
private byte[] GetFileHash(string fileName)
{
    HashAlgorithm sha1 = HashAlgorithm.Create();
    using(FileStream stream = new FileStream(fileName,FileMode.Open,FileAccess.Read))
      return sha1.ComputeHash(stream);
} 
```

如果内容发生了变化，哈希值会有所不同。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-22T15:33:25.393

您可能想查看[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类。

> “这个类可以让你监控一个目录的变化，并在某些东西被修改时触发一个事件。”

然后，您的代码可以处理事件并处理文件。

**代码源 - MSDN：**

```
// Create a new FileSystemWatcher and set its properties.
FileSystemWatcher watcher = new FileSystemWatcher();
watcher.Path = args[1];

/* Watch for changes in LastAccess and LastWrite times, and
   the renaming of files or directories. */
watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
   | NotifyFilters.FileName | NotifyFilters.DirectoryName;

// Only watch text files.
watcher.Filter = "*.txt";

// Add event handlers.
watcher.Changed += new FileSystemEventHandler(OnChanged);
watcher.Created += new FileSystemEventHandler(OnChanged);
watcher.Deleted += new FileSystemEventHandler(OnChanged);
watcher.Renamed += new RenamedEventHandler(OnRenamed); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T15:50:00.960

一般来说，您会让操作系统负责跟踪文件是否已更改。

如果您使用：

```
File.GetAttributes 
```

并检查存档标志，这将告诉您文件自上次存档以来是否已更改。我相信 XCOPY 和类似的东西在完成复制后会重置这个标志，但你可能需要自己处理这个问题。

您可以使用以下命令轻松测试 DOS 中的标志：

```
dir /aa yourfilename 
```

或者只是在 Windows 资源管理器中添加属性列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T15:54:40.240

备份程序通常使用文件归档标志来检查文件是否需要备份。当 Windows 修改或创建文件时，它会设置存档标志（请参阅[此处](http://en.wikipedia.org/wiki/Archive_bit)）。检查是否设置了归档标志来决定文件是否需要备份：

```
if ((File.GetAttributes(fileName) & FileAttributes.Archive) == FileAttributes.Archive)
{
    // Archive file.
} 
```

备份文件后，清除存档标志：

```
File.SetAttributes(fileName, File.GetAttributes(fileName) & ~FileAttributes.Archive); 
```

这假定没有其他程序（例如，系统备份软件）正在清除存档标志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-03T19:01:10.307

从这篇文章中得到 Crc32 类 [在 C# 和 .NET 中计算 CRC-32](https://damieng.com/blog/2006/08/08/calculating_crc32_in_c_and_net)

**将您的文件路径传递给此函数...** 它返回一个 CRC 值...将其与您已经存在的文件进行比较...如果 CRC 不同，则文件已更改。

```
internal Int32 GetCRC(string filepath)
{
    Int32 ret = 0;
    StringBuilder hash = new StringBuilder();
    try
    {
        Crc32 crc32 = new Crc32();

        using (System.IO.FileStream fs = File.Open(filepath, FileMode.Open, FileAccess.Read, FileShare.None))
            foreach (byte b in crc32.ComputeHash(fs)) hash.Append(b.ToString("x2").ToLower());

        ret = Int32.Parse(hash.ToString(), System.Globalization.NumberStyles.HexNumber);
    }
    catch (Exception ex)
    {
        string msg = (ex.InnerException == null) ? ex.Message : ex.InnerException.Message;
        Console.WriteLine($"FILE ERROR: {msg}");

        ret = 0;
    }
    finally
    {
        hash.Clear();
        hash = null;
    }

    return ret;
} 
```

# codeigniter - Codeigniter 购物车 - 检查商品是否已添加到购物车

> ID：13014706
> 
> 赞同：1
> 
> 时间：2012-10-22T15:31:08.183
> 
> 标签：codeigniter

我在 Codeigniter 中使用 Cart 类。我想做的应该（希望！）很简单......但我正在努力。

在产品页面上，我有一个“添加到购物车”按钮。我想要发生的是，当商品已经在购物车中时，按钮变为“从购物车中删除”。

```
<? //if(**not in cart**) { ?>
    <a href="<?=base_url()?>jobs/addjob/<?=$row->id?>">Add to cart</a>
<? } else { ?>
    <a href="<?=base_url()?>jobs/removejob/<? /**cart 'rowid'**/ echo $rowid?>">Remove from cart</a>
<? } ?> 
```

如何查询购物车以查看该项目是否在其中并获取“rowid”以便我可以将其用于删除功能？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:18:58.463

我有一个类似的问题 - 我通过使用 2 个新函数 - in_cart() 和 all_item_count() 扩展 CI_Cart 库来解决它。

```
<?php
class MY_Cart extends CI_Cart {

    function __construct() 
        {
            parent::__construct();
            $this->product_name_rules = '\d\D';
        }

/*
 * Returns data for products in cart
 * 
 * @param integer $product_id used to fetch only the quantity of a specific product
 * @return array|integer $in_cart an array in the form (id => quantity, ....) OR quantity if $product_id is set
 */
public function in_cart($product_id = null) {
    if ($this->total_items() > 0)
    {
        $in_cart = array();
        // Fetch data for all products in cart
        foreach ($this->contents() AS $item)
        {
            $in_cart[$item['id']] = $item['qty'];
        }
        if ($product_id)
        {
            if (array_key_exists($product_id, $in_cart))
            {
                return $in_cart[$product_id];
            }
            return null;
        }
        else
        {
            return $in_cart;
        }
    }
    return null;    
}

public function all_item_count()
{
    $total = 0;

    if ($this->total_items() > 0)
    {
        foreach ($this->contents() AS $item)
        {
            $total = $item['qty'] + $total;
        }
    }

    return $total;
}
 }
 /* End of file: MY_Cart.php */
 /* Location: ./application/libraries/MY_Cart.php */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:09:51.470

如果作业名称或您想要检查的任何内容已经存在，您可以签入您的模型。如果存在则显示删除按钮，否则显示添加。

# sql-server - SqlServer 将 XML 转换为 varbinary 并在 .NET (C#) 中解析它

> ID：13014709
> 
> 赞同：1
> 
> 时间：2012-10-22T15:31:11.753
> 
> 标签：sql-server, xml, unicode, byte-order-mark, varbinary

考虑以下代码：

```
[Test]
    public void StackOverflowQuestionTest()
    {
        const string connectionString = "enter your connection string if you wanna test this code";

        byte[] result = null;
        using (var connection = new SqlConnection(connectionString))
        {
            connection.Open();
            using (var sqlCommand = new SqlCommand("declare @xml as xml = '<xml/>' SELECT convert(varbinary(max), @xml) as value"))
            //using (var sqlCommand = new SqlCommand("SELECT convert(varbinary(max), N'<xml/>') as value"))
            {
                sqlCommand.Connection = connection;

                using (SqlDataReader reader = sqlCommand.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        result = (byte[])reader["value"];
                    }

                    reader.Close();
                }
            }
        }

        string decodedString = new UnicodeEncoding(false, true).GetString(result);
        var document = XElement.Parse(decodedString);
    } 
```

如果我运行此测试，我会收到一条带有消息的 XmlException：“根级别的数据无效。第 1 行，位置 1。” 事实证明，问题是被视为无效字符的“0xFFFE”前导码。请注意，如果我改用注释字符串，一切正常，这对我来说很奇怪。看起来 SqlServer 在 UCS-2 中使用 BOM 存储 XML 字符串，同时它在没有它的情况下存储 nvarchar 值。主要问题是：如何将此字节数组解码为不包含此前导码（BOM）的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:57:21.843

如果将来有人需要这个，下面的代码可以工作：

```
using(var ms = new MemoryStream(result))
{
    using (var sr = new StreamReader(ms, Encoding.Unicode, true))
    {
        decodedString = sr.ReadToEnd();
    }
} 
```

# node.js - 将节点 js restify 应用程序部署到 heroku 时出错

> ID：13014712
> 
> 赞同：0
> 
> 时间：2012-10-22T15:31:31.007
> 
> 标签：node.js, heroku, dtrace, restify

我在将 restify 应用程序部署到 Heroku 时遇到问题。

```
npm ERR! dtrace-provider@0.0.9 install: `node-waf clean ; node-waf configure build`
npm ERR! `sh "-c" "node-waf clean ; node-waf configure build"` failed with 1
npm ERR!
npm ERR! Failed at the dtrace-provider@0.0.9 install script.
npm ERR! This is most likely a problem with the dtrace-provider package,
npm ERR! not with npm itself. 
```

似乎 Heroku 的 dtrace 有问题，restify 使用了它，虽然不需要，但我读过你可以通过从 restify 的 package.json 文件中删除 dtrace 来绕过这个问题，但是我尝试过这个但没有成功.

我是 node 新手并使用 Heroku 和 git，所以我确定我缺少一些东西，restify 的 package.json 文件包含以下内容：

```
"dependencies": {
    "dtrace-provider": "0.0.9",
},
"optionalDependencies": {
    "dtrace-provider": "0.0.9"
}, 
```

我已经删除了这些行，但在提交 git 并推送到 Heroku 后仍然收到与上述相同的错误消息。

谁能看到我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:40:46.530

当您在 heroku 上部署应用程序时，它会根据您的应用程序 package.json 文件安装依赖项，因此如果您从 restify 的 package.json 文件中删除它并不重要，因为 heroku 从它的存储库而不是从您的存储库中选择 restify 的 package.json 文件. 因此，您需要了解如何解决此错误。

# android - 4.0.3 三星 Galaxy S2 上的 Android Coverflow 问题

> ID：13014715
> 
> 赞同：6
> 
> 时间：2012-10-22T15:31:37.590
> 
> 标签：android, coverflow

我正在使用 android coverflow，它在大多数设备上都可以正常工作，但似乎在 Android 4.0.3 中，一旦你来回滑动，它就不会将中心图像放回中心。

他们仍然“卡住”并且处于错误的角度。

有没有人有类似的问题？什么可能导致这种行为？

所以附加图像上的中间图像应该居中而不是像原来那样倾斜。

![CowerFlow 问题](../Images/a2cd676cf338570c63c4e3cd13898389.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T15:02:15.147

我刚刚添加

```
child.invalidate() 
```

前

```
final int childCenter = getCenterOfView(child); in getChildStaticTransformation(View child, Transformation t) 
```

所以它变成了

```
protected boolean getChildStaticTransformation(View child, Transformation t) {

    child.invalidate();
    final int childCenter = getCenterOfView(child);
    final int childWidth = child.getWidth();
    int rotationAngle = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T06:37:50.950

您在使用 Neil Davies Coverflow Widget V2 吗？

如果是，我发现了问题。如果没有，对不起，我帮不了你。

问题出在函数 getCenterOfView 中。更准确的说，是view.getLeft()的问题。<--请告诉我是否有人知道为什么它在 4.0 之后有所不同

view.getLeft() 返回的值每次都不同。所以这会影响另一个函数getChildStaticTransformation，它找不到哪个imageview是中心。

我的解决方案，一个肮脏的修复，是给它一个范围来检测它的中心。

```
if (childCenter <= mCoveflowCenter + 125
            && childCenter >= mCoveflowCenter - 125) {
        transformImageBitmap((ImageView) child, t, 0);
} 
```

请让我知道是否有人对此有更好的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T17:58:01.800

我解决了这个代码

```
private int offsetChildrenLeftAndRight() {
    int offset = 0;
    for (int i = getChildCount() - 1; i >= 0; i--) {

        getChildAt(i).offsetLeftAndRight(offset);

        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN)
            getChildAt(i).invalidate();
    }
    return offset;
}

final int childCenter = getCenterOfView(child) + offsetChildrenLeftAndRight(); 
```

# php - Yii URL 管理 HTTPS

> ID：13014732
> 
> 赞同：3
> 
> 时间：2012-10-22T15:32:22.813
> 
> 标签：php, yii

我使用代码来分隔我网站中的 HTTPS 和 HTTP 页面

问题是：当我在 HTTP 上时，指向 HTTPS 的链接没有 WWW，反之亦然。我没有在脚本中发现问题。

```
public function createUrl($route, $params = array(), $ampersand = '&')
{
    $url = parent::createUrl($route, $params, $ampersand);

    // If already an absolute URL, return it directly
    if (strpos($url, 'http') === 0) {
        return $url;  
    }

    // Check if the current protocol matches the expected protocol of the route
    // If not, prefix the generated URL with the correct host info.
    $secureRoute = $this->isSecureRoute($route);
    if (Yii::app()->request->isSecureConnection) {
        return $secureRoute ? $url : 'http://' . Yii::app()->request->serverName . $url;
    } else {
        return $secureRoute ? 'https://' . Yii::app()->request->serverName . $url : $url;
    }
}

public function parseUrl($request)
{
    $route = parent::parseUrl($request);

    // Perform a 301 redirection if the current protocol 
    // does not match the expected protocol
    $secureRoute = $this->isSecureRoute($route);
    $sslRequest = $request->isSecureConnection;
    if ($secureRoute !== $sslRequest) {
        $hostInfo = $secureRoute ? 'https://' . Yii::app()->request->serverName : 'http://' . Yii::app()->request->serverName;
        if ((strpos($hostInfo, 'https') === 0) xor $sslRequest) {
            $request->redirect($hostInfo . $request->url, true, 301);
        }
    }
    return $route;
}

private $_secureMap;

/**
 * @param string the URL route to be checked
 * @return boolean if the give route should be serviced in SSL mode
 */
protected function isSecureRoute($route)
{
    if ($this->_secureMap === null) {
        foreach ($this->secureRoutes as $r) {
            $this->_secureMap[strtolower($r)] = true;
        }
    }
    $route = strtolower($route);
    if (isset($this->_secureMap[$route])) {
        return true;
    } else {
        return ($pos = strpos($route, '/')) !== false 
            && isset($this->_secureMap[substr($route, 0, $pos)]);
    }
} 
```

}

代码改编自：[http ://www.yiiframework.com/wiki/407/url-management-for-websites-with-secure-and-nonsecure-pages/](http://www.yiiframework.com/wiki/407/url-management-for-websites-with-secure-and-nonsecure-pages/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:23:28.103

最好使用过滤器在控制器级别进行管理。

在您的组件目录中设置 2 个过滤器`HttpsFilter`，`HttpFilter`如下所示：-

```
class HttpsFilter extends CFilter {

    protected function preFilter( $filterChain ) {
        if ( !Yii::app()->getRequest()->isSecureConnection ) {
            # Redirect to the secure version of the page.
            $url = 'https://' .
                Yii::app()->getRequest()->serverName .
                Yii::app()->getRequest()->requestUri;
                Yii::app()->request->redirect($url);
            return false;
        }
        return true;
    }

} 
```

和

```
class HttpFilter extends CFilter {

    protected function preFilter( $filterChain ) {
        if ( Yii::app()->getRequest()->isSecureConnection ) {
            # Redirect to the secure version of the page.
                $url = 'http://' .
                Yii::app()->getRequest()->serverName .
                Yii::app()->getRequest()->requestUri;
                Yii::app()->request->redirect($url);
            return false;
        }
        return true;
    } 
} 
```

然后在每个控制器中强制 https 使用过滤器，可选地通过操作：

```
class SiteController extends Controller {

    public function filters()
    {
        return array(
            'https +index', // Force https, but only on login page
        );
    }
} 
```

编辑：如果`filters()`上面的功能似乎对您不起作用，请尝试

```
return array(
           array('HttpsFilter +index'), // Force https, but only on login page
       ); 
```

请参阅[http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter)（及其评论）。

# php - 使用 jQuery 获取语法错误

> ID：13014735
> 
> 赞同：-5
> 
> 时间：2012-10-22T15:32:32.613
> 
> 标签：php, jquery

```
// Add an additional field to the checkout within a new fieldset
add_filter('eshopaddtocheckout','eshop_extras_checkout');

function eshop_extras_checkout($echo){

$echo .= '  <script>
        jQuery(function($) {
            $(".formGroup").hide();
            $("#chooseForm input:checkbox").on("change", function() {
                if($(this).is(":checked")) {
                    $("#" + $(this).val()).show();
                }
                else {
                    $("#" + $(this).val()).hide();
                }
            });
        });

    </script>';

    $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

    $echo .= '<legend>Select the Approriate Form</legend>' . "\n";

    $echo .= ' <div id="chooseForm">
        <input type="checkbox" name="forms2[]" id="ArticlesOrderForm" value="ArticlesOrderForm"> <b>Articles Order Form </b><br>
        <input type="checkbox" name="forms2[]" id="PressReleasesForm"  value="PressReleasesForm"> <b> Press Releases Form </b><br>
    </div>

    <div id="ArticlesOrderForm" class="formGroup">
        <legend>Articles Order Form</legend>
        <label for="kwd1">Art-Keywords1</label><input class="short" type="text" name="kwd1" value="" id="kwd1" maxlength="20" size="20" > <br>

    </div>

    <div id="PressReleasesForm" class="formGroup">
        <legend>Press Releases Form</legend>
        <label for="kwd2">PRKeywords2</label><input class="short" type="text" name="kwd2" value="" id="kwd2" maxlength="20" size="20"> <br>
    </div>';

 $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

    $echo .= '<legend>Extras</legend>' . "\n";
    $echo .= '<label for="eshop_extra">'.__('Extra Field','eshop').' <span class="reqd">*</span><br />
          <input class="short" type="text" name="eshop_extra" value="" id="eshop_extra" maxlength="20" size="20" /></label><br />';
    $echo .= '</fieldset>' . "\n";

    return $echo;
} 
```

```
 // Add extra field to error checks
    add_filter('eshoperrorcheckout','eshop_extras_errorcheckout');
    function eshop_extras_errorcheckout($_POST){
        $myerror='';

        if(!isset($_POST['eshop_extra']) || trim($_POST['eshop_extra'])==''){
        $myerror= '<li>'.__('<strong>Extra Field</strong> - missing.','eshop_extras').'</li>';
    }

    if(!isset($_POST['ArticlesOrderForm'])) {

      if(!isset($_POST['kwd1']) || trim($_POST['kwd1'])=='') {
        $myerror= '<li>'.__('<strong>KWD1</strong> - missing.','kwd1').'</li>';
        }
    }

    if(!isset($_POST['PressReleasesForm'])) {

      if(!isset($_POST['kwd2']) || trim($_POST['kwd2'])=='') {
        $myerror= '<li>'.__('<strong>KWD2</strong> - missing.','kwd2').'</li>';
        }
    }   

        return $myerror;
    } 
```

** 现在我没有收到任何语法错误....请检查下面的链接：（在选择适当的形式下），当您检查它们时，它们丢失了..我做错了什么..？**

articlewritingservicess.com/shopping-cart/checkout/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:49:50.487

您正在混淆服务器端代码和客户端代码。

PHP 在服务器上使用，并将生成发送到浏览器的 HTML（该 HTML 可以包括 jquery）。但是 jquery 只能在浏览器上运行。

问题是您**在服务器端**使用 jquery 命令，并带有以下行... （这是您函数
中的第二条`if`语句）`eshop_extras_errorcheckout`

```
if($('#check_id').is(":checked")) 
```

这应该是 PHP 代码，而不是 jquery ......类似......

```
if(isset($_POST('check_id'))){
  // Do something
} 
```

* * *

**附加基于OP的评论**

您的复选框在页面回发时没有保持“选中”的原因是因为您`<input type="checkbox"`每次都在创建代码，并且如果您没有专门提供该`checked`属性，那么在页面显示时它将被取消选中。

（我不确定您是否熟悉 ASP.NET，但在该技术中，如果您勾选复选框然后回发，ASP.NET 将为您处理此问题。PHP 不作为标准执行此操作，您需要告诉它检查它。）

因此，例如，您在函数中“回显”以下行`eshop_extras_checkout`（注意，这包含在 PHP 字符串中，它不是直接标记）：

```
<input type="checkbox" name="forms2[]" id="ArticlesOrderForm"
  value="ArticlesOrderForm"> <b>Articles Order Form </b><br> 
```

...您需要有条件地放置`checked`属性，如下所示：

```
(isset($_POST('ArticlesOrderForm')) ? "Checked" : "") 
```

...这将导致字符串看起来像

```
<input type="checkbox" name="forms2[]" id="ArticlesOrderForm" 
  value="ArticlesOrderForm" ' . (isset($_POST('ArticlesOrderForm')) ? "Checked" : "") . '> <b>Articles Order Form </b><br> 
```

因此，当最终的 HTML 发送到浏览器时，`checked`如果复选框被选中，该属性将出现，如果不选中则不会出现。

希望这是有道理的

# symfony - 从 2.0 更新到 2.1：类 for迷路了

> ID：13014737
> 
> 赞同：1
> 
> 时间：2012-10-22T15:32:34.193
> 
> 标签：symfony, twig, symfony-2.1

我刚刚将**symfony2**从*2.0.16*更新到*2.1.2*，现在我遇到了问题，我的标签类不再添加。

在 Twig 模板中，我包含如下字段：

```
<div class="row{% if form_errors(form.object) %} _error{% endif %}">
    {{ form_label(form.object, null, { 'attr': {'class': '_hint'} }) }}
    {{ form_widget(form.object, { 'attr': {'class': 'c6'} }) }}
</div> 
```

我对默认表单布局的扩展如下所示：

```
{% use 'form_div_layout.html.twig' with field_label as base_field_label %}

{% block field_label %}
    {{ block('base_field_label') }}

    {% if attr.class is defined and '_hint' == attr.class %}
        <div>
            some
        </div>
    {% endif %}
{% endblock %} 
```

奇怪的是，`attr.class`值是`<div>`在渲染时设置的。但是该类不再添加`<label>`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:07:40.100

1.  你应该覆盖一个`form_label`块而不是`field_label`因为`field_label`不[推荐使用](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig#L321)
2.  您应该使用`label_attr`数组而不是`attr`，即：

    ```
    {% if label_attr.class is defined and '_hint' == label_attr.class %} 
    ```

# tfs - TFS 2012 禁用多次签出不起作用

> ID：13014746
> 
> 赞同：28
> 
> 时间：2012-10-22T15:32:49.637
> 
> 标签：tfs, visual-studio-2012

我想为我们的 TFS 项目禁用多个签出。这是我期望它的工作方式：

1.  Bob 检查 File1.cs。
2.  Joe 在他的 Visual Studio 解决方案资源管理器中双击 File1.cs 并尝试对其进行修改，但看到一条错误消息，指出有人已签出该文件，因此他无法签出。

我已经尝试在 Visual Studio 中为 Bob 和 Joe 进行这样的设置：

1.  在**Team->Team Project Collection Settings->Source Control...->Workspace Settings 选项卡**中，我将默认工作区类型从“本地（推荐）”更改为“服务器”。
2.  在**Team->Team Project Settings->Source Control...->Check-out Settings 选项卡中**，我更改了**Enable multiple check-out** to be unchecked。
3.  在**Source Control Explorer->Workspace Combobox->Workspaces...->Edit...->Advanced->Location**中，我将“Local”更改为“Server”。

但是，Bob 和 Joe 仍然可以同时签出同一个文件。是否需要设置其他一些配置选项？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-23T13:18:50.683

问题（正如 Edward Thomson 所指出的）是没有在所有用户的工作空间上执行第 3 步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T09:51:20.713

您还可以取消选中**Team Project Collection Settings**中的**Enable file merging and multiple checkout**。

 **但是您必须对所需的任何类型的文件执行此操作。

[http://msdn.microsoft.com/en-us/library/ms252452(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms252452(v=vs.100).aspx)**

# android - 如何将导航箭头图标添加到 Horizo ntalListView？

> ID：13014753
> 
> 赞同：0
> 
> 时间：2012-10-22T15:33:20.750
> 
> 标签：android, android-listview

我想向此 [Horizo​​ntalListView](http://www.dev-smart.com/archives/34)添加箭头图标，以显示列表在右侧或左侧有更多项目，如下图所示：

![图片](../Images/45713a63a511a11bb017fa778f402e6a.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:26:12.000

[http://www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)

[Android 水平滚动视图的行为类似于 iPhone（分页）](https://stackoverflow.com/questions/2595063/android-horizontal-scollview-behave-like-iphone-paging)

希望这可以帮助。

# javascript - 带有背景画布的图像上方的 HTML5 文本未显示

> ID：13014762
> 
> 赞同：0
> 
> 时间：2012-10-22T15:33:55.013
> 
> 标签：javascript, html, canvas

使用什么元素：背景图像 + 图像（形状）+ 画布中的文本

问题：没有在画布背景图像上方显示文本。

我所期望的：在图像上方显示带有颜色背景图像的文本。

我所拥有的：如果删除图像`makeShape()`功能，它将显示文本。注意：图像函数有背景颜色。

* * *

这是一个 HTML 表单代码：

```
<!doctype html>
<html lang="en">
    <head>
        <title>Canvas text above picture</title>    
        <meta charset="utf-8">
        <style>
            canvas {
                border: 2px solid black;
            }
        </style>
    </head>
    <body>
<form>
<p>
<label for="backgroundColor">Text font:</label>
<select id="backgroundColor">
<option value="white" selected="selected">White</option>
<option value="black">Black</option>
</select>
</p>
<p>
<label for="txt">Text font:</label>
<textarea id="txt" cols="40" rows="3"></textarea>
</p>

<p>
<input type="button" id="previewButton" value="Preview">
</p>
</form>
        <canvas id="myCanvas" width="600" height="500"></canvas>
        <script src="canvasshirt.js"></script>

    </body>
</html> 
```

一个`canvasshirt.js`代码：

```
window.onload = function() {
    var button = document.getElementById("previewButton");
    button.onclick = previewHandler;
}

function previewHandler() {

    var ca = document.getElementById("myCanvas");
    var co = ca.getContext("2d");

    var bgcolor = document.getElementById("backgroundColor");
    var index = bgcolor.selectedIndex;
    var fgColor = bgcolor[index].value;

    var text = document.getElementById("txt").value;

    drawText(co, text); // ! - this should show text above of drawBckg() function

    drawBckg(ca, co, 600, 500, fgColor); // this draw a background of picture below of text
}

function drawBckg(ca, co, w, h, color)
{
    makeShape(co);

    co.fillStyle = color;
    co.fillRect(0, 0, w, h);
}

function makeShape(co)
{
    var shapeimg = new Image();

    shapeimg.src = "shape2.png";

    shapeimg.onload = function() {
        co.drawImage(shapeimg, 170, 10, 233, 350);
    }
}

function drawText(co, text)
{
    co.font = " 13px Arial";
    //co.font = "bold 1em sans-serif";
    co.textAlign = "left";
    co.fillText(text, 20, 40);
} 
```

固定试...

当更改源代码的功能排序时，将导致以下结果：

```
drawBckg(ca, co, 600, 500, fgColor);
drawText(co, text); 
```

示例图片（文字在图片下方）：

![蓝色文本在 <code>makeShape()</code> 关闭背景的图片下方](../Images/47b6f39fece87c64bb8907242f59c387.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:41:39.103

```
drawBckg(ca, co, 600, 500, bgcolor, function(){
    drawText(co, text, fgColor);
}); 
```

...

```
function drawBckg(ca, co, w, h, color, callback)
{
    makeShape(co, callback);

    co.fillStyle = color;
    co.fillRect(0, 0, w, h);
    callback();  // draw the text here as a fallback if the image doesn't load
}

function makeShape(co, callback)
{
    var shapeimg = new Image();

    shapeimg.src = "shape2.png";

    shapeimg.onload = function() {
        co.drawImage(shapeimg, 170, 10, 233, 350);
        callback();  // draw the text after drawing the image.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:06:33.360

找到解决方案。

首先，当绘制一个对象时，它必须恢复到新状态，否则它将覆盖相同图像上的图像。这是功能`co.restore()`：

```
function drawBckg(ca, co, w, h, color)
{
    co.restore();

    makeShape(co);
} 
```

但是，我失败的是放入 onload 函数：

```
function makeShape(co)
{
    var shapeimg = new Image();

    shapeimg.src = "shape2.png";

    shapeimg.onload = function() {  // <-- remove
    co.drawImage(shapeimg, 170, 10, 233, 350);
    }   // <-- remove
} 
```

这将加载，显示在图片下方，因为它首先加载。正常删除 onload 到加载的 drawImage ：

```
function makeShape(co)
{
    var shapeimg = new Image();

    shapeimg.src = "shape2.png";

    co.drawImage(shapeimg, 170, 10, 233, 350); // <-- this
} 
```

现在它起作用了！

# css - 动态改变单元格的 CSS 样式 柱子

> ID：13014770
> 
> 赞同：7
> 
> 时间：2012-10-22T15:34:18.633
> 
> 标签：css, jsf, primefaces

如何计算 B 列的单元格值以及如何动态更改其 css 样式 ![如何计算B列的值以及如何改变他的颜色](../Images/c5364a15cf133cdbf398599104dd1331.png)

我的 java 对象：

```
public class MyObject{
   private Date date;
   private int A;
   private int C;

   //Getters & Setters
} 
```

我的托管豆：

```
public class MyBean(){
    List<MyObject> List = myObjectDao.FindAll();

    //Getters & Setters
} 
```

我的jsf代码：

```
<p:dataTable id="idList" var="list" value="#{myBean.list}" >
    <p:column headerText="DATE">
        <h:outputText value="#{list.date}"  />
    </p:column>
        <p:column headerText="A">
        <h:outputText value="#{list.A}"  />
    </p:column>
        <p:column headerText="B">
        <h:outputText value="????????" style="???????"  //>
    </p:column>
        <p:column headerText="C">
        <h:outputText value="#{list.C} />
    </p:column>
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T15:58:11.587

您可以只`?:`在 EL 中使用条件运算符。

例如

```
<c:set var="B" value="#{(list.A / list.C) * 100}" />
<h:outputText value="#{B}" style="display: block; background-color: #{B lt 50 ? 'red' : (B lt 90 ? 'blue' : 'green')}" /> 
```

如果`B`还在模型或控制器的其他地方使用，那么您可以添加一个`public int getB()`仅包含的方法，`return (A/C) * 100;`然后使用`#{list.B}`而不是`#{B}`.

请注意，正确的设计是使用 CSS 类。例如

```
<h:outputText value="#{B}" styleClass="percentage #{B lt 50 ? 'poor' : (B lt 90 ? 'average' : 'good')}" /> 
```

和

```
td .percentage {
    display: block;
}

.percentage.poor {
    background-color: red;
}

.percentage.average {
    background-color: blue;
}

.percentage.good {
    background-color: green;
} 
```

您当然也可以按照其他答案的建议在 getter 方法中执行 CSS 样式/类的确定，但这是一个很差的关注点分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:51:07.563

我建议在你的`MyObject`课堂上做逻辑

所以我会这样称呼它`JSF`：

```
<p:column headerText="B">
    <h:outputText value="#{list.calculateB()}" styleClass="list.createLabel()">
</p:column> 
```

里面`MyObject`

```
public double calculateB() {
   return (A/C)*100;
}

public String createLabel() {
   if(calculateB() > 90) {
       return "GREEN";
   //DO YOUR LOGIC

} 
```

在`CSS`

```
.GREEN {
background-color: #00FF00 !important;

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-28T09:41:28.120

下面的代码解决了我的问题。

```
style="#{event.eventStatusDesc eq 'Completed' ? 'color: #32cd32;font-weight: bold;':(event.eventStatusDesc eq 'Rescheduled till Further Notice' ? 'color: blue;font-weight: bold;' : 'color: black;')}" /> 
```

# printing - 融合图未在打印中打印

> ID：13014772
> 
> 赞同：0
> 
> 时间：2012-10-22T15:34:19.590
> 
> 标签：printing, fusioncharts

我有一个融合图表，我想打印它，但是在图表的地方我得到了空白。

这是代码..

```
<script type="text/javascript">
function selectBehaviourTypes(id){  
$.post('/reports/tbchart', {Guid: id, Chart:"yes"}, function(response)
{
    $("#chart_div").html(response);
});
}
</script>
<div style="float: right"><a href="javascript:void(0)" onclick="printPage('pnlMainHeader','div_print');"><img src="<?=$this->baseUrl('/images/icons/small/print.png')?>" title="Print" alt="Print" /></a></div>  
<div id="div_print">
<div id="chart_div"></div>
</div> 
```

帮我
打招呼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:34:19.383

渲染的图表在屏幕上正确显示，但打印输出不正确尝试使用 PrintManager 类进行打印。

打印管理器需要一些时间来准备所有可供打印的图表。如果在打印管理器尚未准备好图像时调用打印操作，则图表不会显示在打印介质中。调用 managedPrint() 函数后，它会在继续调用 window.print() 函数之前自动等待图表准备好。

更多信息请参考：[FusionCharts Print Manager 文档](http://docs.fusioncharts.com/charts/contents/JavaScript/JS_PrintManager.html)

# json - 从 MongoCursor 检索嵌套元素

> ID：13014774
> 
> 赞同：2
> 
> 时间：2012-10-22T15:34:20.823
> 
> 标签：json, scala, mongodb

我在 Scala 中查询 Mongo DB 并遍历返回的元素，如下所示：

```
{ "_id" : "123:1350918540586068000:v" , 
    "i" : { 
        "vendorStyle" : "coolStyle" , 
        "createdAt" : 1350918540580 , 
        "productId" : "product123" , 
        "skuId" : "123"
    }
} 
```

我的问题是：如何从 skuId 中检索值？我知道您可以在 Mongo 的“查找”方法中使用符号 parent.child，但是从生成的 DBObject 读取时这不起作用

这是代码：

```
val elems = SkuStorage.collection.find(MongoDBObject("i.productId" -> productId))
elems.toSeq.map { element=>
    readSkuById(element.get("i.skuId")) //breaks! 
} 
```

我需要去 get("i") 然后将字符串解析为 JSON 吗？有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:45:10.747

你可以试试

```
element.expand[String]("i.skuId") 
```

它返回`Option[String]`

# c# - 如何将 XPathNavigator 对象的集合转换为 XPathNodeIterator

> ID：13014775
> 
> 赞同：1
> 
> 时间：2012-10-22T15:34:23.653
> 
> 标签：c#, xml, xpathnavigator, xpathnodeiterator

如何将[XPathNavigator](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator.aspx)对象集合转换为[XPathNodeIterator](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnodeiterator.aspx)对象集合？

下面是一个示例代码：

```
public XPathNodeIterator RandomizeXPathNodeIterator(XPathNodeIterator iterator)
{
    List<XPathNavigator> list = new List<XPathNavigator>();
    //Populate list with XPathNavigator's

    //How do i return XPathNodeIterator
} 
```

# asp.net - 带有自定义数据库的 ASP.net Windows 身份验证

> ID：13014782
> 
> 赞同：2
> 
> 时间：2012-10-22T15:34:59.023
> 
> 标签：asp.net, asp.net-membership, windows-authentication

我正在创建一个需要 Windows 身份验证的 Intranet 网站。我已经设置了一切，或者我想我已经设置了，以使用数据库中管理的 Windows 身份验证和角色。这很重要，因为我不能使用 Active Directory 组和角色。

有用。当我进入网站时，它会显示我的 Windows 用户名，并且可以使用`User.Identity.Name`. 我可以使用验证角色`User.IsInRole("roleName")`，它也可以工作。

现在我遇到的问题是，当我使用时`Membership.GetUser`，`Membership.GetAllUsers`我总是得到 null 和一个空集合。

我的 RoleManager 提供者是：

```
<add 
name="SqlRoleManager" 
type="System.Web.Security.SqlRoleProvider" 
connectionStringName="ApplicationServices" 
applicationName="/appName" 
/> 
```

我的会员提供者是这个：

```
<add 
name="AspNetSqlMembershipProvider" 
type="System.Web.Security.SqlMembershipProvider" 
connectionStringName="ApplicationServices" 
applicationName="/appName" 
/> 
```

我错过了什么还是我的配置有问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:56:24.870

Why do you want to call Membership.GetUser? You are already authenticated via Windows Authentication. If you want to use Membership with Windows Authentication (why, i don't know), you have to jump through some more hoops.

You can use the ActiveDirectoryMembershipProvider, rather than SqlMembershipProvider. This lets you call GetUser and retrieve AD information.

You can copy the Windows Authentication information into a SqlMembership database on login.

You can create a custom membership provider that allows you to do all the authentication yourself.

So, the first question is why do you want to use Membership?

# jquery - 如何让 jQuery validate 验证多个必需的文本区域？

> ID：13014783
> 
> 赞同：3
> 
> 时间：2012-10-22T15:34:58.367
> 
> 标签：jquery, forms, jquery-validate

我`<textarea>`在一个表单中有三个块，但是 jQuery validate 只在允许提交表单之前强制执行第一个块。

每个文本区域都有唯一的 id，我试图指定它们都是必需的：

```
<textarea id="textarea1" class="input-xlarge required" minlength="50" required="required"  >
</textarea> 
```

~~如果我不调用它似乎可以工作`jQuery('form').validate()`，但是这个表单是动态加载的，所以我相信我需要通过显式绑定 jquery validate 到表单`jQuery('form').validate()`~~

这是我所拥有的：

[http://jsfiddle.net/vjq2d/](http://jsfiddle.net/vjq2d/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:39:31.560

尝试使用`rules` 你可以在这里看到**DEMO** ：http : [//jsfiddle.net/yosafatade/vjq2d/7/](http://jsfiddle.net/yosafatade/vjq2d/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:19:49.410

问题只是您在文本区域中没有“名称”属性。

# excel - VBA Excel 的比率条件要求

> ID：13014785
> 
> 赞同：2
> 
> 时间：2012-10-22T15:35:03.850
> 
> 标签：excel, vba

我有一个财务数据，表明项目的健康状况，并根据差异填充颜色和字母以指示健康状况。例如，如果方差小于 5%，则用字母“G”填充绿色，>5% 但小于 20% 填充“Y”，>20% =“R”。我已经使用 if 语句来获得它。但是我需要填充整个项目的颜色。

有5个项目，这些是要求：

1.  如果 5 个项目中的任何一个具有“R”，则整体运行状况为“R”
2.  如果 1/5 项目为“Y”且 4/5 =“G”，则整体健康为“G”
3.  如果 2/5 = "Y" 和 3/5 "G" 则整体健康为 "Y"
4.  如果 3/5 = "Y" 和 2/5 "G" 则整体健康为 "Y"
5.  如果 4/5 = "Y" 和 1/5 "G" 那么 "Y"
6.  如果 5/5 = "Y" 那么 "Y"
7.  如果 5/5 = "G" 那么 "G"

因此，如果第一个项目是 G，第二个项目是 Y，第三个项目是 Y，第四个项目是 G，第五个项目是 RI，希望它填充“R”以获得整体健康。

我试过使用 if 语句，但我必须做的组合太多了。

我如何使用 VBA excel 来创建这种“比率”要求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:09:24.813

您可以创建一个变量来计算每个 Y、R 和 G，然后执行简单的 if elseif 以根据您的规则将单元格设置为等于 r、y 或 g：

```
Option Explicit

Sub getcounts()

Dim g As Long
Dim r As Long
Dim y As Long
Dim ovrallhealth As Range
Dim variancerange As Range
Set variancerange = Sheets(1).Range("A1:A5")
Set ovrallhealth = Sheets(1).Range("B1")

y = Application.WorksheetFunction.CountIf(variancerange, "y")
g = Application.WorksheetFunction.CountIf(variancerange, "g")
r = Application.WorksheetFunction.CountIf(variancerange, "r")

If r > 0 Then
   ovrallhealth = "R"
ElseIf y = 1 And g = 4 Then
   ovrallhealth = "G"
ElseIf y = 2 And g = 3 Then
   ovrallhealth = "Y"
ElseIf y = 3 And g = 2 Then
   ovrallhealth = "Y"
ElseIf y = 4 And g = 1 Then
   ovrallhealth = "Y"
ElseIf y = 5 Then
   ovrallhealth = "Y"
ElseIf g = 5 Then
   ovrallhealth = "G"
End If

End Sub 
```

# tomcat - Exception could not find Factory: javax.faces.application.ApplicationFactory

> ID：13014786
> 
> 赞同：3
> 
> 时间：2012-10-22T15:35:07.853
> 
> 标签：tomcat, jsf-2, primefaces

I´m using JSF 2.0 Apache MyFaces, TomCat 7.0 and primefaces 3.4.1,

While running my app i got this exception

```
 SEVERE: Exception sending context initialized event to listener instance of class org.apache.myfaces.webapp.StartupServletContextListener java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:851)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:309)
    at org.apache.myfaces.context.servlet.FacesContextImplBase.getApplication(FacesContextImplBase.java:131)
    at org.apache.myfaces.context.servlet.FacesContextImplBase.getELContext(FacesContextImplBase.java:180)
    at javax.faces.component.UIViewRoot.setLocale(UIViewRoot.java:1456)
    at org.apache.myfaces.webapp.AbstractFacesInitializer._createFacesContext(AbstractFacesInitializer.java:391)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initStartupFacesContext(AbstractFacesInitializer.java:363)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:105)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

here is the web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Capitulo2</display-name>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <filter>
    <filter-name>conexaoFilter</filter-name>
    <filter-class>financeiro.filter.ConexaoHibernateFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>conexaoFilter</filter-name>
    <url-pattern>*.jsf</url-pattern>
  </filter-mapping>
  <resource-ref>
    <description>DataSource financeirodb</description>
    <res-ref-name>jdbc/financeirodb</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
/WEB-INF/applicationContext.xml
/WEB-INF/applicationContext-security.xml
</param-value>
  </context-param>
  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
  </context-param>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <context-param>
    <description>
    This parameter tells MyFaces if javascript code should be allowed in
    the rendered HTML output.
    If javascript is allowed, command_link anchors will have javascript code
    that submits the corresponding form.
    If javascript is not allowed, the state saving info and nested parameters
    will be added as url parameters.
    Default is 'true'</description>
    <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <description>
    If true, rendered HTML code will be formatted, so that it is 'human-readable'
    i.e. additional line separators and whitespace will be written, that do not
    influence the HTML code.
    Default is 'true'</description>
    <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
    <param-value>false</param-value>
  </context-param>
  <context-param>
    <description>
    If true, a javascript function will be rendered that is able to restore the
    former vertical scroll on every request. Convenient feature if you have pages
    with long lists and you do not want the browser page to always jump to the top
    if you trigger a link or button action that stays on the same page.
    Default is 'false'
</description>
    <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
    <param-value>true</param-value>
  </context-param>
  <listener>
    <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>

</web-app> 
```

I've read a few topics about the same exception but all the solutions suggested are implemented.

Any new idea??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T15:45:34.300

您似乎在一个 webapp中混合了不同的 JSF 实现[Mojarra](http://javaserverfaces.java.net)和[MyFaces 。](http://myfaces.apache.org)

您的环境描述和堆栈跟踪确认您正在使用 MyFaces，但您在以下位置具有以下特定于 Mojarra 的侦听器条目`web.xml`：

```
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener> 
```

这个不对。你应该删除它。它在没有`ClassNotFoundException`监听器类的情况下成功初始化，这也表明您*实际上*已经在您的 web 应用程序的运行时类路径中使用了特定于 Mojarra 的 JAR，例如`javax.faces.jar`or`jsf-impl.jar`和`jsf-api.jar`。`myfaces-*.jar`在使用 MyFaces 时，您应该删除它们并坚持使用。

# python - 从Stata调用Python

> ID：13014789
> 
> 赞同：1
> 
> 时间：2012-10-22T15:35:13.363
> 
> 标签：python, merge, python-3.x, stata

这可能很容易，但是在过去几个小时在线查看文档和可能的示例之后，我无法弄清楚。

我有一个大型数据集（电子表格），它被 DO 文件大量清理。然后，在 DO 文件中，我想将清理后的数据的某些变量保存为临时 .csv，运行一些 Python 脚本，生成新的 CSV，然后将该输出附加到清理后的数据中。

如果不清楚，这里是一个例子。

`After cleaning my data set (XYZ) goes from variables A to Z with 100 observations. I want to take variables A and D through F and save it as test.csv. I then want to run a python script that takes this data and creates new variables AA to GG. I want to then take that information and append it to the XYZ dataset (making the dataset now go from A to GG with 100 observations) and then be able to run a second part of my DO file for analysis.`

我一直在手动执行此操作，这很好，但文件将开始快速更改，这将为我节省大量时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:40:30.883

这行得通吗（假设你可以使用 python

```
tempfile myfiletemp
save `myfiletemp'
outsheet myfile1.csv
shell python.exe myscript.py
insheet myfile2.csv, clear
append using `myfiletemp' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:38:16.047

在 Stata 中输入“帮助外壳”。您要做的是从 Stata 中脱壳，调用 Python，然后在 Python 脚本完成后让 Stata 恢复您希望它执行的任何操作。

# php - PHP SQL 仅每秒输入一次

> ID：13014793
> 
> 赞同：0
> 
> 时间：2012-10-22T15:35:30.370
> 
> 标签：php, mysql, sql, chat

我正在处理我的聊天脚本，但是我只在页面上获得每隔一个 sql 条目

我在下面发布了我的代码

添加.php代码：

```
<?php
mysql_connect( 'localhost:/tmp/mysql.sock', 'xxxxx', 'xxxxx' );
mysql_select_db( 'ios' );
mysql_query( "INSERT INTO chatitems VALUES ( null, null, '".mysql_real_escape_string( $_GET['user'] )."', '".mysql_real_escape_string( $_GET['message'] ). "')" );
header("Location: messages.php");
?> 
```

messages.php 代码：

```
<?php
$host="localhost:/tmp/mysql.sock";
$username="xxxxx";
$password="xxxxx";
$db_name="ios";
$tbl_name="chatitems";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name ORDER BY id DESC";
$result=mysql_query($sql);

$rows=mysql_fetch_array($result);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="index,follow" name="robots" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<link href="pics/homescreen.gif" rel="apple-touch-icon" />
<meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
<link href="css/style.css" rel="stylesheet" media="screen" type="text/css" />
<script src="javascript/functions.js" type="text/javascript"></script>
<title>VT Chat
</title>
<link href="pics/startup.png" rel="apple-touch-startup-image" />
</head>
<body>
<p>
<div id="content">
<?php
while($rows=mysql_fetch_array($result)){ 
?>
<ul class="pageitem">
<li class="textbox"><span class="header"><? echo $rows['user']; ?></span><p>
<? echo $rows['message']; ?></p></li>
<li class="pageitem"><span class="header"><? echo $rows['added']; ?></span></li>
</ul><p>
<?
}
mysql_close();
?>  
</div>
</body>
</html> 
```

所以我只需要它显示每个 SQL 条目，但仍然是顶部的最新条目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:36:52.363

你有这行两次：

```
$rows=mysql_fetch_array($result); 
```

摆脱第一个，只需使用：

```
while($row = mysql_fetch_array($result)){
    echo $row['message']
} 
```

# windows - 用于删除不在参考文件中的文件的 PowerShell 脚本

> ID：13014795
> 
> 赞同：-1
> 
> 时间：2012-10-22T15:35:35.763
> 
> 标签：windows, powershell, guid

我们的一位开发人员安装的系统导致电子邮件附件的文件一次又一次地复制到我们的服务器。

它将唯一的 GUID 附加到文件名的前面，并导致大约 35,000 个具有不同 GUID 的重复项。

我有一个我们想要保留的所有文件的列表，但需要一个脚本来引用这个文件并删除所有不在这个引用文件中的文件。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:55:47.177

您的描述中缺少一些细节，所以这是我的假设：

附加文件遵循与此类似的形式：

```
62dc92e2-67b0-437e-ba06-bcbf922f48e8file14.txt
66e7cbb3-873a-429b-b4c3-46597b5b5828file2.txt
68c426a3-49b9-4a80-a3e8-ef73ac875791file13.txt
etc. 
```

您要保留的文件列表如下所示：

```
file1.txt
file12.txt
file9.txt
file5.txt 
```

**代码：**

```
# list of files you want to keep
$keep = get-content 'keep.txt'

# directory containing files
$guidfiles = get-childitem 'c:\some\directory'

# loop through each filename from the target directory
foreach($guidfile in $guidfiles) {
    $foundit = 0;

    # loop through each of the filenames that you want to keep 
    # and check for a match
    foreach($keeper in $keep) {
        if($guidfile -match "$keeper$") {
            write-output "$guidfile matches $keeper"

            # set flag that indicates we don't want to delete file
            $foundit = 1
            break
        }
    }

    # if flag was not set (i.e. no match to list of keepers) then 
    # delete it
    if($foundit -eq 0) {
        write-output "Deleting $guidfile"

        # As a sanity test, I'd suggest you comment out the line below when 
        # you first run the script.  The output to stdout will tell you which 
        # files would get deleted.  Once you're satisfied that the output
        # is correctly showing the files you want deleted, then you can 
        # uncomment the line and run it for real.
        remove-item $guidfile.fullname
    }
} 
```

**其他注意事项：** 您提到这“导致了大约 35000 次重复”。听起来同一个文件可能被复制了不止一次。这意味着您可能还想删除要保留的文件的重复项，以便您只拥有一个。我无法从您的描述中确定这是否属实，但也可以修改脚本来做到这一点。

# c# - 在 Windows Mobile 上模拟键盘事件

> ID：13014798
> 
> 赞同：3
> 
> 时间：2012-10-22T15:35:42.550
> 
> 标签：c#, windows-mobile, compact-framework, unmanaged

请参考下面的截图：

datetime 控件是 Compact Framework DateTimePicker，编号按钮是标准 Button 控件。

单击 DateTimePicker 的箭头会显示一个日历控件，允许用户选择日期。但是，如果用户单击所选文本日期的任何部分，它会突出显示并且可以使用硬键或屏幕键盘进行修改。我试图用我的标准按钮来模拟这个功能。

我已经尝试过以下方法，但目前这只会导致 DateTimePicker 失去焦点。

```
 const int KEYEVENTF_KEYUP = 0x2;
    const int KEYEVENTF_KEYDOWN = 0x0;
    const int VK_NUMPAD1 = 0x61;

    private void digitButton_Clicked(object sender, EventArgs e)
    {
        keybd_event(VK_NUMPAD1, 0, KEYEVENTF_KEYDOWN, 0);
        keybd_event(VK_NUMPAD1, 0, KEYEVENTF_KEYUP, 0);
    }

    [DllImport("coredll.dll", EntryPoint = "keybd_event", SetLastError = true)]
    public static extern void keybd_event
    (
    byte bVk,
        byte bScan,
    int dwFlags,
        int dwExtraInfo
    ); 
```

![日期时间选择器键盘](../Images/a466f4f22a513cd4288ba7c6e1b44843.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:40:58.467

我想你指出了你的问题，“......但目前这只会导致 DateTimePicker 失去焦点”。我怀疑您的按钮正在获得焦点，因此正在消耗击键。您可以在生成击键之前尝试将焦点设置到 DateTimePicker。如果失败，作为最后的手段，您可以使用 SendMessage() 将控件硬编码到 DateTimePicker 的窗口句柄，使用 WM_KEYDOWN、WM_KEYUP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:51:30.647

keybd_event 工作正常，但你必须先关注 datePicker：

（在具有一个 datePicker 和 12 个按钮（按钮 1 到按钮 12）的表单上）：

```
 public Form1()
    {
        InitializeComponent();
        foreach (Control c in this.Controls)
        {
            if (c is Button)
            {
                int n = getButtonNumber((Button)c);
                if (n <= 10)
                    c.Text = n.ToString();
                c.Click += new EventHandler(c_Click);
            }
        }
        button11.Text = "<-"; button12.Text = "OK";
    }
    void c_Click(object sender, EventArgs e)
    {
        if (sender is Button)
        {
            Button b = (Button)sender;
            int n = Convert.ToInt16( b.Text);
            digitButtonClick(n);
        }
    }
    private void digitButtonClick(int n)
    {
        byte vkInt = (byte)(0x30 + n);
        dateTimePicker1.Focus();
        keybd_event(vkInt, 0, KEYEVENTF_KEYDOWN, 0);
        keybd_event(vkInt, 0, KEYEVENTF_KEYUP, 0);
    } 
```

问候

约瑟夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:34:21.353

请尝试以下操作 - 虽然我没有针对您的确切场景对其进行测试，但它确实适用于我们的 .NET CF 应用程序：

```
const int KEYEVENTF_EXTENDED_KEY = 0x1;
const int KEYEVENTF_KEYUP = 0x2;
const int KEYEVENTF_KEYDOWN = 0x0;
const int VK_NUMPAD1 = 0x61;

private void digitButton_Clicked(object sender, EventArgs e)
{
    keybd_event(VK_NUMPAD1, 0x45, KEYEVENTF_EXTENDEDKEY, 0);
    keybd_event(VK_NUMPAD1, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, 0);
}

[DllImport("coredll.dll", EntryPoint = "keybd_event", SetLastError = true)]
public static extern void keybd_event
(
byte bVk,
    byte bScan,
int dwFlags,
    int dwExtraInfo
); 
```

# javascript - TypeScript、RequireJS shim、环境模块声明

> ID：13014799
> 
> 赞同：4
> 
> 时间：2012-10-22T15:35:43.593
> 
> 标签：javascript, requirejs, typescript, js-amd

我有以下指向backbone.d.ts 定义的内容。

```
import Backbone = module("../../../dep/backbone/backbone");

export class Codebook extends Backbone.Model {

    defaults() {
        return {
            id: -1,
            title: -1
        }
    }

    initialize() {
        // do nothing
    }

} 
```

用`--module amd`它生成以下内容。

```
define(["require", "exports", "../../../dep/backbone/backbone"], function(require, exports, __Backbone__) { 
```

由于全局原因，我已经用我的 RequireJS 配置文件填充了主干。我希望我的定义只是说`backbone`而不是相对路径。除了后期构建过程来操纵定义之外，还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:46:38.707

我认为解决这个问题的方法是将环境声明放在与最终真实模块相同的位置，以便您可以使用相同的路径引用它。

所以`backbone.d.ts`需要和`backbone.js`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:52:23.973

我总是使用根路径，而不是使用相对路径。就像是：

```
import underscore = module('libs/underscore/underscore'); 
```

hack 是你可以在你的 shim 中定义相同的名称。像这样的东西：

```
require.config({
    paths: {
        'libs/underscore/underscore': 'libs/underscore/underscore'
    },
    shim: {
        'libs/underscore/underscore': {
            exports: '_'
        }
    }
}); 
```

通过始终使用从根开始的路径，路径保持不变，就像您使用相对路径一样。这是一个 hack，但它对我有用（[GitHub](https://github.com/joproulx/Propulsor.JS/blob/master/Propulsor.JS/scripts/app.js)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:55:39.283

我刚刚整理了一篇关于[如何在 TypeScript 中使用 AMD 模块](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/)的博客。

首先，只需使用主干的参考路径，如下所示：

```
/// <reference path="../../modules/Backbone.d.ts" /> 
```

然后在没有导入的情况下定义您的类：

```
export class MTodoCollectionView extends Backbone.View {
...
} 
```

然后是你的 require.config 和 apploader：

```
require.config({
    baseUrl: '../',
    paths: {
        'underscore': 'lib/underscore',
        'backbone': 'lib/backbone'
    }, 
    shim: {
        underscore: {
            exports: '_'
        },
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        }
    }
});

require(['jquery','underscore','backbone','console','app/AppMain', 
     ], 
    ($, _, Backbone, console, main) => {
    // code from window.onload
    var appMain = new main.AppMain();
    appMain.run();
}); 
```

一旦应用程序遇到了 require 代码块，Backbone 就会被全局定义。
玩得开心，

# ios - OpenCV imread() 在 iOS 上不返回图像数据

> ID：13014800
> 
> 赞同：5
> 
> 时间：2012-10-22T15:35:46.433
> 
> 标签：ios, opencv

我正在尝试使用 OpenCV 的`imread()`函数将 JPEG 图像加载到 a 中`cv::Mat`，但它在 iOS 上失败（相同的代码在 OS X 上工作）。返回的矩阵已分配且有效，但为空（即它不包含数据）。

在iOS下的功能`imread()`和工作？`imwrite()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T07:30:36.233

它至少在您正在运行的应用程序的 Documents-Directory 中保存和加载时有效。

```
//Creating Path to Documents-Directory
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"ocv%03d.BMP", picNum]];
const char* cPath = [filePath cStringUsingEncoding:NSMacOSRomanStringEncoding];

const cv::string newPaths = (const cv::string)cPath;

//Save as Bitmap to Documents-Directory
cv::imwrite(newPaths, frame); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T16:03:19.077

iOS 定义了自己的文件系统，我不相信 imread() 和 imwrite() 与它的接口。您需要使用本机功能来加载和保存图像，但是一旦获得指向图像数据的指针，您就可以将其包装在 cv::Mat 中，然后在 opencv 中处理它。为 iOS 编写自己的 cv_imread()、cv_imwrite() 函数应该不难。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-17T06:09:48.000

尝试将`Compress PNG Files - Packaging`设置更改为`No`

1.  选定的目标`Build Settings`
2.  搜索`png`
3.  更改`Compress PNG Files`为`No`
4.  更改`Remove Text Metadata From PNG Files`为`No`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T18:48:51.510

从应用程序包加载图像时，这对我有用。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"pattern" ofType:@"bmp"];
const char * cpath = [path cStringUsingEncoding:NSUTF8StringEncoding];
Mat img_object = imread( cpath, CV_LOAD_IMAGE_GRAYSCALE ); 
```

我只能让它与 bmps 一起使用，jpgs 和 pngs 目前在我的应用程序中无法使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T20:12:41.753

有一个本机功能。

```
#import <opencv2/imgcodecs/ios.h>

// t and m are UIImage* instances.
// transparentImage and maskImage are destination Mat.
// true/false is alpha condition.

UIImageToMat(t, transparentImage, true);
UIImageToMat(m, maskImage, true); 
```

# c - 如何正确填充套接字地址？

> ID：13014801
> 
> 赞同：1
> 
> 时间：2012-10-22T15:35:46.963
> 
> 标签：c, sockets

我正在通过 iOS 中的套接字发送 ICMP 数据包：

```
struct sockaddr         hostAddress;

self->hostAddress.sa_family = AF_INET;
inet_pton(AF_INET, "173.194.67.93", &self->hostAddress.sa_data); 
```

然后，我打开套接字并发送数据包：

```
bytesSent = sendto(
                   CFSocketGetNative(self->_socket),
                   [packet bytes],
                   [packet length],
                   0,
                   &self->hostAddress,
                   sizeof(self->hostAddress)
                   ); 
```

当我在 WireShark 中看到数据包时，它被发送到“67.93.0.0”，而不是“173.194.67.93”。

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:42:27.433

```
inet_pton(AF_INET, ...); 
```

应该将 a`struct in_addr`作为第三个参数（参见[docs](http://www.kernel.org/doc/man-pages/online/pages/man3/inet_pton.3.html)）。

你给它`sa_data`，从

```
struct sockaddr {
    unsigned short    sa_family;    // address family, AF_xxx
    char              sa_data[14];  // 14 bytes of protocol address
}; 
```

这实际上被视为：

```
struct sockaddr_in {
    short            sin_family;   // e.g. AF_INET, AF_INET6
    unsigned short   sin_port;     // e.g. htons(3490)
    struct in_addr   sin_addr;     // see struct in_addr, below
    char             sin_zero[8];  // zero this if you want to
}; 
```

因此，前 16 位进入端口，IPV4 地址的后 16 位实际上进入`sin_addr`，其余的似乎是零初始化的。

* * *

你*应该*这样做（为了清楚起见，我会放很多演员表）

```
struct sockaddr *addr = &self->hostAddress; // generic address
struct sockaddr_in *ipv4 = (struct sockaddr_in *)addr; // downcast to ipv4
inet_pton(AF_INET, "173.194.67.93", &ipv4->sin_addr); 
```

# sql-server - 结果集中具有动态列数的 EF 存储过程

> ID：13014802
> 
> 赞同：0
> 
> 时间：2012-10-22T15:35:53.297
> 
> 标签：sql-server, asp.net-mvc, entity-framework

首先我应该注意到我是 ASP.NET 的新手（不过，我对 C# 有一些经验）和实体框架。我在一个学校项目上工作，有一个相当复杂的数据库，其中包含能源消耗数据。我需要的那些（`I`导入、`E`导出、无功功率`C`和`L`）以二进制压缩的形式存储在一个列中，因此为了将它们取出，我必须使用一个存储过程，该过程调用自定义程序集中的一些方法来解压缩列并恢复数据。

存储过程有 4 个参数：

```
@identify int,
@startTime datetime,
@endTime datetime,
@args nvarchar(60) -- "Selector" 
```

比较`selector`特殊，它是一个参数，您可以在其中指定结果集中所需的内容，例如`'i'`仅针对 Import 列，`'i,e'`针对 Import 和 Export。他们这样设计它是因为如果您只需要一列而不是所有列（因为压缩数据的存储方式），它会更快。

因此，我创建了一个名为 的 ADO.NET 实体模型`EnergyConsumptionDBModel`，导入了存储过程并`EnergyConsumptionResult`为存储过程返回类型创建了复杂类型，如下所示：

```
public partial class EnergyConsumptionResult
{
    public System.DateTime Time { get; set; }
    public double I { get; set; }
    public double E { get; set; }
    public double L { get; set; }
    public double C { get; set; }
} 
```

该列`Time`始终存在于结果集中，但其余部分取决于`@args`存储过程的参数。例如，如果我选择`'i,e,c,l'`作为参数，它将返回列`Time, I, E, C, L`，一切都很好，但是如果我选择例如`'i'`它返回`Time, I`，这给了我一个例外：

> *数据读取器与指定的“EnergyConsumptionDBModel.EnergyConsumptionResult”不兼容。*
> *类型的成员“E”在数据读取器中没有同名的对应列。*

所以问题是，有没有一些简单的方法可以解决这个问题？某种复杂类型的动态结果映射，或者告诉我的同事谁设计了存储过程以使其返回所有列，`@args`但将未使用的列留空，这是我的项目负责人可能不会解决的解决方案。喜欢。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:26:11.193

我认为不可能在 EF 中自动映射具有可变列数的结果集。您在设计时指定映射，EF 依赖于此。您可以做的是返回所有列，但将不返回数据的列设置为空。您可以尝试使用直接执行存储过程并在 ObjectContext (http://msdn.microsoft.com/en-us/library/dd466384.aspx) 上使用 Translate 方法进行具体化，但我认为这种方法也将在您的读者中使用列对应于属性名称。

# php - 使用 PHP 根据 SQL Query 数据库中的值更改表的颜色

> ID：13014804
> 
> 赞同：1
> 
> 时间：2012-10-22T15:35:54.577
> 
> 标签：php, html, sql

我有一些代码可以从 SQL 查询生成表。我希望单元格的背景颜色代表“rel.cat”的值，可以是 1-8 之间的整数。

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<?php
// Connect to the database server
$dbcnx = mysql_connect("xxxxx",xxxxx,xxxxx);
if (!$dbcnx) {
  echo( "<P>Database Connection Failed</P>" );
  exit();
}
// Select the matrix databse database
  if ( !@mysql_select_db("sustaina_matrix") ) {
    echo( "<P>Not Connected to Matrix Database</P>" );
    exit();
  }
// Assign the query
$query = "SELECT rel.id, rel.cat colourcode FROM rel";
// Execute the query
$result = mysql_query($query);
if (!$result){
    die ("Could not query the database: <br />". mysql_error());
}
?>
<table>
    <tr>
        <th>Relationship ID</th>
        <th>Colour ID</th>
</tr>
<?php
// Change colours
function getcolour()
{
    if ($catc = "1")
        return '#000000';
    elseif($catc = "2")
        return '#C0C0C0';
    elseif($catc = "3")
        return '#00FF00';
    elseif($catc = "4")
        return '#0000FF';
    elseif($catc = "5")
        return '#FF99FF';
    elseif($catc = "6")
        return '#FF9900';
    elseif($catc = "7")
        return '#FF0000';
    else
        return '#FFFFFF';
}
// Fetch and display the results
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    $id = $row["id"];
    $catc = $row["colourcode"];
    echo "<tr>";
    echo "<td>$id</td>";
    echo "<td bgcolor='getcolour()'>$catc</td>";
    echo "</tr>";
}
?>
</table>
</body>
</html> 
```

目前所有的细胞都是红色的，我不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:41:19.870

your if statements should have a double "==".

Instead of

```
if ($catc = "1") 
```

it should be

```
if ($catc == "1") 
```

Assign == everywhere in all your if conditions.

And also assign the parameter to the function.

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    $id = $row["id"];
    $catc = $row["colourcode"];
    echo "<tr>";
    echo "<td>$id</td>";
    echo "<td bgcolor='getcolour(\"$catc\")'>$catc</td>";
    echo "</tr>";
} 
```

Get the parameter in the function as well.

```
function getcolour($catc)
{ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:42:11.120

你有几个问题。

*   传递`$catc`给函数接受`getcolour()`。
*   在您的条件中使用逻辑运算符 ( `==`) 而不是赋值 ( `=`)。
*   正确输出函数结果。

### 代码：

```
function getcolour($catc) {
    // ... existing code
}

echo "<td bgcolor='" . getcolour($catc) . "'>$catc</td>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T15:39:31.863

Supply the variable `$catc` to your function. i.e.

```
function getcolour($catc) {
    // ... existing code
}

echo "<td bgcolor='getcolour($catc)'>$catc</td>"; 
```

You might find it more readable to use a `switch()` instead

```
function getcolour($catc) {
    switch($catc)
    {
        case 1:
            return '#000000';
            break;
        case 2:
            return '#C0C0C0';
            break;
        case 3:
            return '#00FF00';
            break;
        case 4:
            return '#0000FF';
            break;
        case 5:
            return '#FF99FF';
            break;
        case 6:
            return '#FF9900';
            break;
        case 7:
            return '#FF0000';
            break;
        default:
            return '#FFFFFF';
            break;
    }
}

echo '<td bgcolor="' . getcolour($catc) . '">' . $catc . '</td>'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T15:39:08.663

您没有将值传递给`getcolour`函数。该函数也需要更改，此时 if 语句分配一个值而不是比较值，因此第一个 if 语句将始终为真。将每一项更改为“==”而不是“=”。

改变这个：

```
echo "<td bgcolor='getcolour()'>$catc</td>"; 
```

对此：

```
echo "<td bgcolor='".getcolour($row['catc'])."'>.$row['catc']</td>"; 
```

这假定 catc 从查询中返回为“catc”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T10:47:37.643

基于此处给出的所有 awnsers 是最终的工作代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta content="en-gb" http-equiv="Content-Language">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Relationships</title>
<link href="mainstyles.css" rel="stylesheet" type="text/css">
</head>
<body>
<?php
// Connect to database
require($DOCUMENT_ROOT . "connect.php");
// Assign the query
$query = "SELECT rel.id, rel.cat colourcode FROM rel";
// Execute the query
$result = mysqli_query($link ,$query);
if (!$result){
    die ("Could not query the database: <br />". mysqli_error());
}
?>
<table>
    <tr>
        <th>Relationship ID</th>
        <th>Colour ID</th>
</tr>
<?php
// Change colours
function getcolour($catc) { 
    switch($catc) 
    { 
        case 1: 
            return '#000000'; 
            break; 
        case 2: 
            return '#C0C0C0'; 
            break; 
        case 3: 
            return '#00FF00'; 
            break; 
        case 4: 
            return '#0000FF'; 
            break; 
        case 5: 
            return '#FF99FF'; 
            break; 
        case 6: 
            return '#FF9900'; 
            break; 
        case 7: 
            return '#FF0000'; 
            break; 
        default: 
            return '#FFFFFF'; 
            break; 
    } 
} 
// Fetch and display the results
while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC)){
    $id = $row["id"];
    $catc = $row["colourcode"];
    echo "<tr>";
    echo "<td>$id</td>";
    echo "<td bgcolor='" . getcolour($catc) . "'>$catc</td>";
    echo "</tr>";
}
?>
</table>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T15:46:17.880

```
 function getcolour($catc){
..........etc 
```

并称之为

```
<td bgcolor='",getcolour($catc),"'>$catc</td> 
```

并且不要忘记不推荐使用 bgcolor =)

# asp.net - 在单个 Azure Web 角色中混合 node.js 和 ASP.NET 项目？

> ID：13014805
> 
> 赞同：4
> 
> 时间：2012-10-22T15:35:56.293
> 
> 标签：asp.net, node.js, azure, azure-web-roles

在单个 Azure Web 角色（[教程](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)）上托管多个 ASP.NET 项目非常容易，但是否可以使用单个 Web 角色同时托管 ASP.NET 和 node.js 项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:31:34.620

是的，这是可能的，使用 2 种不同的解决方案：

1.  您可以有一个**后台**启动任务，它使用所需的参数运行 node.exe。对于您的 ASP.NET 应用程序，没有任何变化，您唯一需要做的就是在该项目中包含节点文件并在启动 node.exe 时引用该目录

2.  使用[iisnode](http://www.hanselman.com/blog/InstallingAndRunningNodejsApplicationsWithinIISOnWindowsAreYouMad.aspx)。这允许您通过 IIS HttpModule 运行您的节点代码，它带来了一些额外的好功能（引用 Tomasz Janczuk）：

    *   **流程管理。**iisnode 模块负责 node.exe 进程的生命周期管理，从而使提高整体可靠性变得简单。您不必实施基础设施来启动、停止和监控流程。
    *   **多核服务器上的可扩展性。**由于 node.exe 是一个单线程进程，它只能扩展到一个 CPU 内核。iisnode 模块允许为每个应用程序创建多个 node.exe 进程并平衡它们之间的 HTTP 流量，因此可以充分利用服务器的 CPU 容量，而无需应用程序开发人员提供额外的基础架构代码。
    *   **自动更新。**iisnode 模块确保无论何时更新node.js 应用程序（即脚本文件已更改），都会回收node.exe 进程。允许正在进行的请求使用旧版本的应用程序优雅地完成执行，而所有新请求都被分派到新版本的应用程序。
    *   **通过 HTTP 访问日志。**iisnode 模块提供通过HTTP 访问node.exe 进程的输出（例如由console.log 调用生成）。该工具是帮助您调试部署到远程服务器的 node.js 应用程序的关键。
    *   **与其他内容类型并排。**iisnode 模块以允许单个网站包含多种内容类型的方式与 IIS 集成。例如，单个站点可以包含 node.js 应用程序、静态 HTML 和 JavaScript 文件、PHP 应用程序和 ASP.NET 应用程序。这使得为​​手头的工作以及现有应用程序的渐进式迁移选择最佳工具成为可能。
    *   **对 node.js 应用程序代码的最小更改。**iisnode 模块能够以极少的更改托管现有的 HTTP node.js 应用程序。通常，只需将列出的 HTTP 服务器地址更改为 iisnode 模块通过 process.env.PORT 环境变量提供的地址。
    *   **综合管理经验。**iisnode模块与IIS配置系统完全集成，使用与其他IIS组件相同的工具和机制进行配置和维护。除了 iisnode 模块特有的好处之外，在 IIS 中托管 node.js 应用程序还允许开发人员从一系列 IIS 功能中受益，其中包括：
        *   端口共享（通过端口 80 托管多个 HTTP 应用程序）
        *   安全性（HTTPS、身份验证和授权）
        *   网址重写
        *   压缩
        *   缓存
        *   日志记录

# css - 有没有用 CSS 动画制作省略号的动画？

> ID：13014808
> 
> 赞同：108
> 
> 时间：2012-10-22T15:36:06.653
> 
> 标签：css, css-animations

我正在尝试制作省略号动画，并想知道是否可以使用 CSS 动画...

所以它可能就像

```
Loading...
Loading..
Loading.
Loading...
Loading.. 
```

基本上就这样继续下去。有任何想法吗？

编辑：像这样： http: [//playground.magicrising.de/demo/ellipsis.html](http://playground.magicrising.de/demo/ellipsis.html)

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2015-01-21T18:49:55.077

[@xec 答案](https://stackoverflow.com/a/13015019/1660815)的略微修改版本怎么样：http: [//codepen.io/thetallweeks/pen/yybGra](http://codepen.io/thetallweeks/pen/yybGra)

**HTML**

添加到元素的单个类：

```
<div class="loading">Loading</div> 
```

**CSS**

使用`steps`. [查看 MDN 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/timing-function#The_steps()_class_of_timing-functions)

```
.loading:after {
  overflow: hidden;
  display: inline-block;
  vertical-align: bottom;
  -webkit-animation: ellipsis steps(4,end) 900ms infinite;      
  animation: ellipsis steps(4,end) 900ms infinite;
  content: "\2026"; /* ascii code for the ellipsis character */
  width: 0px;
}

@keyframes ellipsis {
  to {
    width: 20px;    
  }
}

@-webkit-keyframes ellipsis {
  to {
    width: 20px;    
  }
} 
```

@xec 的答案对点有更多的滑入效果，而这允许点立即出现。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-10-22T18:12:09.977

您可以尝试使用`animation-delay property`和时间每个省略号字符。在这种情况下，我将每个省略号字符放在 a 中`<span class>`，这样我就可以分别为它们设置动画。

我做了一个**[演示](http://jsfiddle.net/DkcD4/94/)**，它并不完美，但它至少说明了我的意思:)

我的示例中的代码：

HTML

```
Loading<span class="one">.</span><span class="two">.</span><span class="three">.</span>​ 
```

CSS

```
.one {
    opacity: 0;
    -webkit-animation: dot 1.3s infinite;
    -webkit-animation-delay: 0.0s;
    animation: dot 1.3s infinite;
    animation-delay: 0.0s;
}

.two {
    opacity: 0;
    -webkit-animation: dot 1.3s infinite;
    -webkit-animation-delay: 0.2s;
    animation: dot 1.3s infinite;
    animation-delay: 0.2s;
}

.three {
    opacity: 0;
    -webkit-animation: dot 1.3s infinite;
    -webkit-animation-delay: 0.3s;
    animation: dot 1.3s infinite;
    animation-delay: 0.3s;
}

@-webkit-keyframes dot {
    0% {
        opacity: 0;
    }
    50% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

@keyframes dot {
    0% {
        opacity: 0;
    }
    50% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-12-06T09:08:03.270

即使是更简单的解决方案，效果也很好！

```
<style>
    .loading::after {
      display: inline-block;
      animation: dotty steps(1,end) 1s infinite;
      content: '';
    }

    @keyframes dotty {
        0%   { content: ''; }
        25%  { content: '.'; }
        50%  { content: '..'; }
        75%  { content: '...'; }
        100% { content: ''; }
    }
</style>
<div class="loading">Loading</div> 
```

只是用动画编辑了内容，而不是隐藏一些点......

在这里演示：[https ://jsfiddle.net/f6vhway2/1/](https://jsfiddle.net/f6vhway2/1/)

* * *

**编辑：** 感谢[@BradCollins](https://stackoverflow.com/users/424290/brad-collins)指出这`content`不是[动画属性](https://www.w3.org/TR/css3-transitions/#animatable-css)。

目前，(2021) 这适用于 Chrome/WebKit/Blink/Electron 和 Firefox 以及新版本的 Edge。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-10-22T15:49:00.083

简短的回答是“不是真的”。但是，您可以使用动画宽度和隐藏溢出，并且可能会获得“足够接近”的效果。（以下代码仅适用于 firefox，根据需要添加供应商前缀）。

**html**

```
<div class="loading">Loading</div> 
```

**css**

```
.loading:after {
    overflow: hidden;
    display: inline-block;
    vertical-align: bottom;
    -moz-animation: ellipsis 2s infinite;
    content: "\2026"; /* ascii code for the ellipsis character */
}
@-moz-keyframes ellipsis {
    from {
        width: 2px;
    }
    to {
        width: 15px;
    }
} 
```

演示：http: [//jsfiddle.net/MDzsR/1/](http://jsfiddle.net/MDzsR/1/)

**编辑**

似乎 chrome 在为伪元素设置动画时存在问题。一个简单的解决方法是将省略号包装在它自己的元素中。查看[http://jsfiddle.net/MDzsR/4/](http://jsfiddle.net/MDzsR/4/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-01-24T15:03:46.737

后期添加，但我找到了一种支持居中文本的方法。

```
<element>:after {
    content: '\00a0\00a0\00a0';
    animation: progress-ellipsis 5s infinite;
}

@keyframes progress-ellipsis {
    0% {
        content: '\00a0\00a0\00a0';
    }
    30% {
        content: '.\00a0\00a0';
    }
    60% {
        content: '..\00a0';
    }
    90% {
        content: '...';
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-06-25T18:35:26.450

您可以制作动画`clip`（`clip-path`如果您不需要 IE 支持则更好）

```
div {
  position: relative;
  display: inline-block;
  font-size: 1.4rem;
}

div:after {
  position: absolute;
  margin-left: .1rem;
  content: ' ...';
  display: inline-block;
  animation: loading steps(4) 2s infinite;
  clip: rect(auto, 0px, auto, auto);
}

@keyframes loading {
  to {
    clip: rect(auto, 20px, auto, auto);
  }
}
```

```
<div>Loading</div>
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-22T14:21:25.877

好吧，实际上有一种纯粹的 CSS 方法可以做到这一点。

我从 CSS Tricks 中获得了示例，但它也在 Internet Explorer 中得到支持（我已经在 10+ 中对其进行了测试）。

查看演示：http: [//jsfiddle.net/Roobyx/AT6v6/2/](http://jsfiddle.net/Roobyx/AT6v6/2/)

**HTML：**

```
<h4 id="searching-ellipsis"> Searching
    <span>.</span>
    <span>.</span>
    <span>.</span>
</h4> 
```

**CSS：**

```
@-webkit-keyframes opacity {
  0% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1;
  }
  100% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0;
  }
}

@-moz-keyframes opacity {
  0% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1;
  }

  100% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0;
  }
}

@-webkit-keyframes opacity {
  0% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1;
  }
  100% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0;
  }
}

@-moz-keyframes opacity {
  0% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1;
  }
  100% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0;
  }
}

@-o-keyframes opacity {
  0% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1;
  }
  100% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0;
  }
}

@keyframes opacity {
  0% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    opacity: 1;
  }
  100% {
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
    opacity: 0;
  }
}
#searching-ellipsis span {
  -webkit-animation-name: opacity;
  -webkit-animation-duration: 1s;
  -webkit-animation-iteration-count: infinite;
  -moz-animation-name: opacity;
  -moz-animation-duration: 1s;
  -moz-animation-iteration-count: infinite;
  -ms-animation-name: opacity;
  -ms-animation-duration: 1s;
  -ms-animation-iteration-count: infinite;
}
#searching-ellipsis span:nth-child(2) {
  -webkit-animation-delay: 100ms;
  -moz-animation-delay: 100ms;
  -ms-animation-delay: 100ms;
  -o-animation-delay: 100ms;
  animation-delay: 100ms;
}
#searching-ellipsis span:nth-child(3) {
  -webkit-animation-delay: 300ms;
  -moz-animation-delay: 300ms;
  -ms-animation-delay: 300ms;
  -o-animation-delay: 300ms;
  animation-delay: 300ms;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-25T14:49:58.193

这是我的纯 css 解决方案[https://jsfiddle.net/pduc6jx5/1/](https://jsfiddle.net/pduc6jx5/1/) 解释：[https ://medium.com/@lastseeds/create-text-ellipsis-animation-with-pure-css-7f61acee69cc](https://medium.com/@lastseeds/create-text-ellipsis-animation-with-pure-css-7f61acee69cc)

scss

```
 .dot1 {
 animation: visibility 3s linear infinite;
}

@keyframes visibility {
 0% {
 opacity: 1;
 }
 65% {
 opacity: 1;
 }
 66% {
 opacity: 0;
 }
 100% {
 opacity: 0;
 }
}

.dot2 {
 animation: visibility2 3s linear infinite;
}

@keyframes visibility2 {
 0% {
  opacity: 0;
 }
 21% {
  opacity: 0;
 }
 22% {
  opacity: 1;
 }
 65% {
  opacity: 1;
 }
 66% {
  opacity: 0;
 }
 100% {
  opacity: 0;
 }
}

.dot3 {
 animation: visibility3 3s linear infinite;
}

@keyframes visibility3 {
 0% {
  opacity: 0;
 }
 43% {
  opacity: 0;
 }
 44% {
  opacity: 1;
 }
 65% {
  opacity: 1;
 }
 66% {
  opacity: 0;
 }
 100% {
  opacity: 0;
 }
} 
```

html

```
Loading <span class="dot dot1">.</span><span class="dot dot2">.</span><span class="dot dot3">.</span> 
```

# boost - 使用 boost::chrono 而不链接到它

> ID：13014809
> 
> 赞同：2
> 
> 时间：2012-10-22T15:36:08.913
> 
> 标签：boost, chrono

[boost::chrono](http://www.boost.org/doc/libs/1_47_0/doc/html/chrono/reference.html#chrono.reference.cpp0x.chrono_hpp.conf.header_only)文档说

> 当定义 BOOST_CHRONO_HEADER_ONLY 时，lib 是仅标头。

即使定义了这个，我也会收到链接器错误：

```
1>LINK : fatal error LNK1104: cannot open file 'libboost_system-vc100-mt-gd-1_48.lib' 
```

这是文档错误吗？还是`chrono`真的支持仅使用标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:44:54.467

Boost 的最后一个版本说“Boost.Chrono 可以配置为定义 BOOST_CHRONO_HEADER_ONLY 的仅头文件库。但是 Boost.Chrono 依赖于非仅头文件库 Boost.System，因此您需要与 boost_system 链接。

“

我认为至少在主干中已经修复了该错误。

# jquery - 更新网址栏

> ID：13014810
> 
> 赞同：1
> 
> 时间：2012-10-22T15:36:14.280
> 
> 标签：jquery, ajax

> **可能重复：**
> [如何在 github 源代码浏览中完成 AJAX？](https://stackoverflow.com/questions/9041872/how-ajax-is-done-in-github-source-browse)

目前我在链接上有一个 div 和以下代码：

```
<a href="#" onclick="$('div#content').load('Admin/users.php');" id="admin-panel-icon"></a> 
```

基本上，这只是将文件 users.php 加载到 index.php 页面上的 div 内容中。在 URL 栏中，在从 href="#" 获取的 index.php 之后添加了一个 #。

所以我现在已经做到了，所以链接如下所示：

```
<a href="#AdminUsers" onclick="$('div#content').load('Admin/users.php');" id="admin-panel-icon"> 
```

但是现在出现了书签和页面刷新的问题。我将如何去做，以便当用户访问 index.php#AdminUsers 时，它将 users.php 文件内容加载到 div #Contents 中？

我想我正在做的事情可能有更好的解决方案。我的意思是理想情况下，我希望人们能够访问 /Admin/users.php 并且没有任何哈希标签，但我不确定我将如何去做，同时只加载 users.php 内容?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:40:18.010

You can use:

```
<a href="#AdminUsers" [...]> 
```

Hope that helps.

Edit: You can load the site in hash on load:

```
window.onload = function() {
  var l_hash = location.hash;
  if(l_hash.length>1) {
   var pagename = location.hash.substr(1);
   //do something with the pagename, e.g.:
    if(pagename=="AdminPage") {
      $('div#content').load('Admin/users.php');
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:53:44.640

如果您的 URL 有散列，您需要检查 onLoad ($(document).ready())。如果是这样，jQuery 应该加载指定的内容。但是您必须以某种方式将“#AdminUsers”链接到“Admin/users.php”。我建议为此使用隐藏输入。

首先，创建一个函数来加载 ajax 内容（而不是直接在链接上这样做）

```
function loadContent(page){
    $('div#content').load(page);
} 
```

并在您的链接中：

```
<a href="#AdminUsers" onclick="loadContent('Admin/users.php');" id="admin-panel-icon" ></a> 
```

在每一页的某个地方：

```
<input type="hidden" name="AdminUsers" id="AdminUsers" value="Admin/users.php" /> 
```

请注意，我在 href 中放置了一个自定义哈希 (AdminUsers)。因此，当用户单击它时，它会将所需的哈希放在 url 上。

最后，检查加载哈希的函数：

```
$(document).ready(function(){
    if(window.location.hash){
        var hash = window.location.hash;
        $target = $('#'+hash.slice(1));
        if ($target.length) {//found the hidden input field with your URL
            loadContent($target.val());
        }
    }
}); 
```

如果要在直接访问时显示整个页面，请执行以下操作：（在 PHP 中）：

```
<?php if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) ||
 strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) != 'xmlhttprequest'): //not ajax -> display header ?>
<div id="header">
   <!-- header content -->
</div>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:42:07.087

你可以使用 jQuery hashchange 插件看看这里[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

# android - FrameLayout setVisibility() 不起作用

> ID：13014815
> 
> 赞同：2
> 
> 时间：2012-10-22T15:36:32.143
> 
> 标签：android, android-layout, android-framelayout

我正在使用 FrameLayout 像一堆视图一样使用 onClick 事件进行更改，但它不起作用。

FrameLayout frameEvento 显示正常，但是当我单击它时，它会调用我的方法，但不会更改框架的可见性。

<---- 片段代码 ------->

```
<code>
View V = inflater.inflate(R.layout.home_fragment_layout, container, false);

LinearLayout ll = (LinearLayout) V.findViewById(R.id.homeLinearLayout);

FrameLayout f = (FrameLayout) V.findViewById(R.id.frameEvento);
f.setVisibility(View.GONE);
f.requestLayout();

FrameLayout f1 = (FrameLayout) V.findViewById(R.id.frameEventoSecundario);
f1.setVisibility(View.VISIBLE);
f1.requestLayout();

ll.invalidate(); 
```

<---- 布局代码------->

```
<code>
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/homeLinearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
android:orientation="vertical" >

<FrameLayout 
    android:id="@+id/frameEvento"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="5dp"
    >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

    <ImageView
        android:id="@+id/homeBotaoEventoPricipal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:src="@drawable/bt_hsm"
        android:scaleType="fitCenter"
        android:onClick="goEventoPrincipal"
        android:contentDescription="@string/expomanagement"
        android:text="" />

    <ImageView
        android:id="@+id/homeBotaoEventoSecundario"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_marginTop="5dp"
        android:scaleType="fitCenter"
        android:src="@drawable/bt_bdw"
        android:onClick="goEventoSecundario"
        android:contentDescription="@string/brasil_design_week"
        android:text="" />
    </LinearLayout>
</FrameLayout>

<FrameLayout
 android:id="@+id/frameEventoSecundario"
  android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_marginLeft="0dp"
    android:layout_marginRight="0dp"
    android:layout_marginTop="5dp" 
    android:visibility="gone"
 >

     <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

 <ImageView
        android:id="@+id/homeHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/bg_header_bdw"
        android:scaleType="fitCenter"
        android:contentDescription="@string/brasil_design_week"
        android:text="" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="276dp"
    android:layout_height="75dp"
    android:layout_marginLeft="20dp"
    android:text="UHUHUH"
    android:textSize="6pt"
    android:textStyle="bold" />

    <TextView
    android:id="@+id/textView2"
    android:layout_width="276dp"
    android:layout_height="75dp"
    android:layout_marginLeft="20dp"
    android:text="PLOKO"
    android:textSize="5pt"
    />

            <TextView
    android:id="@+id/textView3"
    android:layout_width="276dp"
    android:layout_height="75dp"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="20dp"
    android:text="FDSAF"
    android:textSize="5pt"
     />

            <TextView
    android:id="@+id/textView3"
    android:layout_width="276dp"
    android:layout_height="75dp"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="20dp"
    android:text="QWERT"
    android:textSize="5pt"
     />

                            <TextView
    android:id="@+id/textView3"
    android:layout_width="276dp"
    android:layout_height="75dp"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="20dp"
    android:text="ABCD"
    android:textSize="5pt"
     />
    </LinearLayout>
 </FrameLayout>  
</LinearLayout></code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:21:36.927

如果你调用`findViewbyId()`ll 而不是 V会更好

```
FrameLayout f = (FrameLayout) ll.findViewById(R.id.frameEvento); 
```

您不需要调用请求布局，因为 invalidate 将重绘您的视图。顺便问一下，“容器”指的是什么？

# tridion - 错误 - 为 SDL Tridion 2011SP1 安装用户界面更新

> ID：13014817
> 
> 赞同：1
> 
> 时间：2012-10-22T15:36:43.017
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在为 SDL Tridion 2011SP1 安装用户界面更新。当我在 cd_storage_conf.xml 文件中创建以下条目时

```
<Wrapper Name="SessionWrapper">
<Timeout>120000</Timeout>
<Storage Type="persistence" Id="db-session-staging" dialect="MSSQL"
Class="com.tridion.storage.persistence.JPADAOFactory">
<Pool Type="jdbc" Size="5" MonitorInterval="60"
IdleTimeout="120" CheckoutTimeout="120" />
<DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
<Property Name="serverName" Value="XYZ" />
<Property Name="portNumber" Value="123" />
<Property Name="databaseName" Value="XYZ" />
<Property Name="user" Value="TridionBrokerUser" />
<Property Name="password" Value="xyz" />
</DataSource>
</Storage>
</Wrapper> 
```

它抛出错误。

> **注意：** -*有时这种错误是由于许可证到期而出现的，所以我检查了许可证文件，它无论如何都没有过期。*

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

> 异常详细信息：Java.Lang.Throwable：无法初始化类 com.tridion.storage.StorageManagerFactory 无法找到或加载某些 Java 类或接口
> 
> 此问题的最典型原因是：
> 
> *   您忘记配置类路径
> *   类路径中缺少 jarfile、zipfile 或目录
> *   您的一个类路径条目中有错字
> *   您的类路径中缺少一个类所需的 jarfile
> *   您的类路径中的 jarfile 已过期且不包含一些新类
> 
> ==================================================== ==========
> 
> com.tridion.web.jsp.tag.BinaryLinkHandler com.tridion.preview.web.BinaryContentFilter com.tridion.web.jsp.ResponseWrapper com.tridion.web.jsp.tag.TaxonomyHandler com.tridion.webservices.odata.ODataPublicationMappingFilter com .tridion.storage.StorageManagerFactory com.tridion.web.jsp.JSPProcessor [Ljavax.servlet.http.Cookie; com.tridion.marketingsolution.profilesync.Handler com.tridion.webservices.odata.ODataContextListener com.tridion.web.jsp.tag.ComponentPresentationHandler com.tridion.web.jsp.tag.IncrementKeyHandler com.tridion.web.jsp.tag。 TargetGroupHandler com.tridion.preview.web.PageContentFilter com.tridion.web.jsp.tag.ConditionHandler com.tridion.ambientdata.web.AmbientDataServletFilter com.tridion.web.jsp.tag.ComponentLinkHandler com.tridion.web.jsp.JSPXSLTProcessor com.tridion.web.jsp。

请尽快在这方面帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:21:34.630

正如消息所述，您在某处缺少一些罐子。有关每个 CD 角色所需内容的完整图片，您可以阅读 LiveContent 上的[CD JAR 文件参考](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/reference_DB20ECA59C824CC3BBB4644187D2C57A)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:05:32.503

Are you sure you have the correct JRE installed? If you are using a 64bit deployer website you will need to install the 64bit JRE as well...

Alternatively you might have accidentally left the AppPool of the deployer website on 32bits (which would essentially give you the same issue as you would now need a 32bit JRE).

# entity-framework - edmx 没有从数据库中获取默认值

> ID：13014819
> 
> 赞同：1
> 
> 时间：2012-10-22T15:36:51.213
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, edmx

这是我的场景。我有一个用作后端的 SQL Server 数据库。我的应用程序在 ASP.net 中。我已经为 DB 表中的 2 个列定义了默认值，表名为`Car`.

1.  表中的一列`Car`被调用`Qty`，它的类型是`Int`. 我已将数据库中此列的默认值设置为 0（零）
2.  表中的另一列`Car`被调用`Model`，它的类型是`nvarchar(50)`. 我已将数据库中此列的默认值设置为`*`

我希望这些默认值也显示在 edmx 中。我的意图是，当我`Car`在代码中声明一个新的类实例时，我希望默认值`Qty`显示为 0（而不是 null），并且我希望默认值`Model`显示为`*`（而不是 null）。

所以在做了相当多的阅读之后，我意识到我需要`StoageGeneratedPattern = Computer`在edmx 文件中`Qty`进行设置。`Model`

它非常适用于`Qty`. 当我定义一个新的类实例`Car`并查看属性时，我看到它`Qty`是 0。**但是**对于`Model`，默认值仍然是`null`（而不是`*`）。

这是我所做的。我在 edmx 文件的 CSDL 内容和 SSDL 内容中设置了 and `nullable = false`。`StorageGeneratedPattern = Computed`我似乎仍然无法`*`将`Model`. 我在这里想念什么？

# java - 以下 Hibernate 自定义 ID 生成器代码是否正确？

> ID：13014823
> 
> 赞同：0
> 
> 时间：2012-10-22T15:37:09.077
> 
> 标签：java, hibernate, transactions

我刚刚创建了一个自定义休眠 ID 生成器，由于我不是休眠专家，我想获得一些关于我的代码的反馈。生成的 ID 为`select max(id) from table`, +1。

```
public class MaxIdGenerator implements IdentifierGenerator, Configurable {

    private Type identifierType;
    private String tableName;
    private String columnName;

    @Override
    public void configure(Type type, Properties params, Dialect dialect) {
        identifierType = type;
        tableName = (String) params.getProperty("target_table");
        columnName = (String) params.getProperty("target_column");
    }

    @Override
    public synchronized Serializable generate(SessionImplementor session,
            Object object) {
        return generateHolder(session).makeValue();
    }

    protected IntegralDataTypeHolder generateHolder(SessionImplementor session) {
        Connection connection = session.connection();
        try {
            IntegralDataTypeHolder value = IdentifierGeneratorHelper
                .getIntegralDataTypeHolder(identifierType
                        .getReturnedClass());
            String sql = "select max(" + columnName + ") from " + tableName;
            PreparedStatement qps = connection.prepareStatement(sql);
            try {
                ResultSet rs = qps.executeQuery();
                if (rs.next())
                    value.initialize(rs, 1);
                else
                    value.initialize(1);
                rs.close();
            } finally {
                qps.close();
            }
            return value.copy().increment();
        } catch (SQLException e) {
            throw new IdentifierGenerationException(
                    "Can't select max id value", e);
        }
    }
    } 
```

我想知道：

1.  我怎样才能使这个**多交易安全**？（即如果两个并发事务插入数据，我怎么能安全地假设我最终不会拥有两次相同的 ID？）——我想这里唯一的解决方案是防止两个并发的休眠事务同时运行如果他们使用相同的发电机，这可能吗？
2.  如果代码**可以改进**：我觉得必须使用硬编码`"select"`，`"target_column"`等等......

为了保证第 1 点），如有必要，我可以在我的 java 客户端代码上同步插入时回退。

*请不要评论我使用这种生成器的原因：遗留代码仍然将数据插入同一个数据库并使用这种机制......并且无法修改。是的，我知道，这很糟糕。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:45:30.400

我认为实现事务安全行为的最简单方法是将用于检索最大 id 并执行插入语句的代码放在事务块中。就像是：

```
Transaction transaction = session.beginTransaction();
//some code...
transaction.commit();
session.close() 
```

我还建议尽可能使用 HQL（Hibernate Query Language）来创建查询，而不是使用原生 sql。此外，根据您的描述，我了解到您期望从查询中获得唯一的结果，即最大 id。因此，您可以在查询上使用 uniqueResult() 方法而不是 executeQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:34:54.823

您可以使用 AtomicInteger 生成 ID。这可以被许多线程同时使用。

如果您可以自由使用任何其他 ID 提供者，那么我会建议使用 UUID 类来生成随机 ID。

```
UUID.randomUUID(); 
```

您可以参考[链接](http://www.javapractices.com/topic/TopicAction.do?Id=56)，其中包含其他一些生成 ID 的方法。

# ajax - 如何在 Drupal 7 中创建一个简单的 ajax 表单？

> ID：13014831
> 
> 赞同：1
> 
> 时间：2012-10-22T15:37:45.030
> 
> 标签：ajax, forms, drupal

我想在 Drupal7 中创建一个只有一个字段的简单表单。点击提交按钮时，我需要使用字段值调用 ajax 函数并更新页面上的 DIV 而无需重新加载。

我不熟悉 Drupal 表单 API，我尝试从表单 api 文档中实现示例，但我总是收到如下错误：

`Notice: Undefined index: #title_display form_pre_render_conditional_form_element() függvényben (/var/www/nmtest/includes/form.inc 2986 sor). Notice: Undefined index: #value theme_textarea() függvényben /var/www/nmtest/includes/form.inc 3727 sor).`

我可以通过创建自定义页面并简单地使用本机 PHP 来做到这一点，但这不是一种“优雅”的方式。

我想要类似这里的东西，但没有表单验证，页面重新加载左右：[在 Drupal 中创建一个非常简单的表单](https://stackoverflow.com/questions/3493093/create-a-very-simple-form-in-drupal)

我只想要一个调用 ajax 函数的按钮。我应该使用表单 API 执行此操作，还是只使用普通的旧原生 PHP 和 jQuery？

*编辑：*看起来我什至不需要真正的 ajax 调用，因为我只需要更改 IMG 标签的 SRC。

这是我在原生 PHP 中所做的。我想实现这个低谷形式的api：

```
<script>
    function getstar() {            
        starpoints = jQuery('#starpoints').val();
        rand = Math.floor(Math.random() * 9999) + 1;
        src = "test.php?star=" + starpoints + '&rand=' + rand;            
        jQuery('#starimg').attr("src",src);            
        return false;
    }        
</script>
<form>
<input type="text" name="starpoints" id="starpoints" />
<input type="submit" onclick="return getstar();" />
</form>
<img src="/test.php?star=5" id="starimg" /> 
```

**编辑：**好的，我设法用 Drupal API 渲染了一个表单。现在唯一的事情是我想通过我的模块插入 IMG 的占位符，但我不知道该怎么做。表单渲染得很好，但我想在它之后添加一个 HTML 块。目前我是通过javascript来做的：

```
jQuery(document).ready(function() {
jQuery('<div><br /><img id="starimg" src="" /></div>').insertAfter('#drawstar-form');
}); 
```

我应该抓住什么钩子在表单之后呈现这个 HTML 块？我试过*drupal_get_form*但它返回一个数组，我无法附加 HTML 块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:39:43.267

表单 API 提供了执行此操作所需的一切，而无需编写任何 JavaScript 代码。请参阅[http://drupal.org/node/752056](http://drupal.org/node/752056)和[http://api.drupal.org/api/examples/ajax_example!ajax_example.module/function/ajax_example_simplest/7](http://api.drupal.org/api/examples/ajax_example!ajax_example.module/function/ajax_example_simplest/7)和 .

# mobile - 元视口在移动设备上打破捏合/缩放

> ID：13014834
> 
> 赞同：3
> 
> 时间：2012-10-22T15:37:51.330
> 
> 标签：mobile, viewport

我正在开发一个需要允许用户捏合以缩放页面的移动网站。当我在下面添加元视口标签及其许多变体时，页面不允许缩放。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, user-scalable=1"> 
```

如果我一起删除标签，我会得到允许缩放的页面，但是它的初始缩放级别非常小并且几乎不可读。是的，我知道我允许用户缩放，但初始页面应该对大多数人来说是可读的，而不是像现在这样大约 5px 字体大小。任何关于视口设置问题需要工作的帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:41:27.847

我从未见过“用户可扩展”的值为“1”。我相信默认情况下它是打开的，所以尝试一起删除该部分。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"> 
```

# php - 更新单元格为空 MYSQL PHP

> ID：13014836
> 
> 赞同：2
> 
> 时间：2012-10-22T15:38:08.180
> 
> 标签：php, mysql, cell

在 Google 和 Stack Overflow 上环顾四周，也许我只是瞎了眼。有没有办法用“”（空）值更新表格单元格。比方说：

```
mysql_query("UPDATE table SET cellname = ' ' WHERE id = '$idneeded'"); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:45:49.857

您应该知道空字符串`''`与空格字符串`' '`不同，并且与 NULL 值不同。

将单元格值更新为空字符串：

```
mysql_query("UPDATE table SET cellname = '' WHERE id = '$idneeded'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:45:30.777

```
UPDATE table SET cellname = ' ' WHERE id = '$idneeded'
                            ^^^---not empty. spaces are not "empty". 
```

尝试

```
cellname='' 
```

或者

```
cellname=NULL 
```

反而。

# php - 长时间运行的 php 脚本挂起

> ID：13014842
> 
> 赞同：2
> 
> 时间：2012-10-22T15:38:32.273
> 
> 标签：php, linux, bash

我在我的 php 脚本中设置了这个设置，以使其运行，只要它需要解析和执行 mysql 查询并获取超过 100,000 行的图像。

```
ignore_user_abort(true);
set_time_limit(0);
#begin logging output
error_reporting(E_ALL);
ini_set('memory_limit', '512M'); 
```

我在shell中运行这样的命令：

```
nohup php myscript.php > output.txt 
```

运行大约 8 到 10 小时后，该脚本仍将运行，但执行只是停止......没有更多的输出......这不是我检查过的僵尸进程。它也没有达到内存限制，如果达到了，它不会退出吗？

到底是怎么回事？照看这个脚本并编写自定义代码来推动它真的很痛苦。到底是怎么回事？我在 unix 上阅读了可能会清理僵尸，但它不是僵尸。我知道这不是 php 设置.. 它不是通过网络服务器运行的，它只是来自命令行，所以给出了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:57:40.643

看起来你没有正确分离你的进程。目前，如果您的进程的父进程死亡，您的进程也会死亡。如果您将进程置于后台（创建一个真正的守护进程），您将不会遇到 scuh 的麻烦。

您可以以这种方式执行您的 PHP 以真正分离它：

```
php myscript.php > output.txt 2>&1 & 
```

供您参考 ：

```
> output.txt 
```

将标准输出（即您的回声、打印等）重定向到 output.txt 文件

```
2>&1 
```

将错误输出重定向到标准输出，将其写入同一个 output.txt 文件中

```
& 
```

在您的情况下是最重要的事情：它将分离您的进程以创建一个真正的守护进程。

编辑：如果您在断开 shell 时遇到问题，最简单的方法是将脚本放在 bash 脚本上，例如`run.sh`：

```
#!/bin/bash
php myscript.php > output.txt 2>&1 & 
```

你将以这种方式运行你的脚本：

```
bash run.sh & 
```

在这种情况下，你的 shell 会“认为”你的程序在 shell 脚本结束时结束，而不是在 php 守护进程结束时结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:46:32.327

长时间运行的 PHP 脚本不应无故死掉或挂起。我有连续运行 6 个月 + 的脚本。您的脚本主体内部一定有其他事情发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T16:10:57.187

我知道我应该用评论来回答这个问题，但我没有足够的声誉来做这件事......

也许您的进程正在消耗 100% 的 CPU，我遇到了一个`while`循环问题，而没有在循环结束时调用 a`sleep()`或`usleep()`。

# iphone - 试图将 jpeg 保存到应用程序的 Documents 目录

> ID：13014845
> 
> 赞同：1
> 
> 时间：2012-10-22T15:38:36.387
> 
> 标签：iphone, ios, xcode, uiimage

所以我有一个函数可以从如下所示的 URL 获取图像：

```
- (UIImage *) getImageFromURL:(NSString *)fileURL {
    UIImage * result;

    NSData * img_data = [NSData dataWithContentsOfURL:[NSURL URLWithString:fileURL]];
    result = [UIImage imageWithData:img_data];

    return result;
} 
```

然后是一个从 UIImage 中保存图像的函数，如下所示：

```
 -(void) saveImage:(UIImage *)image withFileName:(NSString *)imageName ofType:(NSString *)extension inDirectory:(NSString *)directoryPath {
    if ([[extension lowercaseString] isEqualToString:@"png"]) {
        [UIImagePNGRepresentation(image) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"png"]] options:NSAtomicWrite error:nil];
    } else if ([[extension lowercaseString] isEqualToString:@"jpg"] || [[extension lowercaseString] isEqualToString:@"jpeg"]) {
        [UIImageJPEGRepresentation(image, 1.0) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"jpg"]] options:NSAtomicWrite error:nil];
        NSLog(@"Image named %@ wrote to %@", imageName, directoryPath);
    } else {
        NSLog(@"Image Save Failed\nExtension: (%@) is not recognized, use (PNG/JPG)", extension);
    }
} 
```

我面临的问题是，当我通过 saveImage 函数运行 UIImage 时，我认为它不会保存图像。这是因为当我检查 UIImage imageNamed:@"Documents/filenamesavedas.jpeg" 它返回（空）。但是，图像确实可以正确下载。

这是我的文档目录路径功能：

```
- (NSString *)getDocumentsDirectoryPath {
    NSString * documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSLog(documentsDirectoryPath);
    return documentsDirectoryPath;
} 
```

这是我正在下载并尝试保存图像的地方：

```
 dispatch_async(jsonQueue, ^{
        // check to see if data authenticate runs successfully. 
    NSString *documentsDirectoryPath = [util getDocumentsDirectoryPath];
    UIImage *imageToSave = [util getImageFromURL:[properties objectForKey:@"current_group_logoURL"]];
    [util saveImage:imageToSave withFileName:[properties objectForKey:@"home_venue_logo"] ofType:@"jpeg" inDirectory:documentsDirectoryPath];
    NSLog(@"Group Logo URL %@", [properties objectForKey:@"current_group_logoURL"]);
    NSLog(@"Current Group Image %@", [properties objectForKey:@"home_venue_logo"]);        
        UIImage *testToSeeItHasDownloaded = imageToSave;
        NSString *imageLocation = [documentsDirectoryPath stringByAppendingPathComponent:[properties objectForKey:@"home_venue_logo"]];
        NSData *data = [NSData dataWithContentsOfFile:imageLocation];
        UIImage *testToSeeImageHasSaved = [UIImage imageWithData:data];
        NSLog(@"testToSeeImagehasDownloaded: %@", testToSeeItHasDownloaded);
        NSLog(@"image location to save to: %@", imageLocation);
        NSLog(@"testToSeeImagehasSaved: %@", testToSeeImageHasSaved );    

    }); 
```

控制台返回这个：

```
2012-10-22 16:27:45.642 asdaf[46819:1d807] Group Logo URL http://somesite.com/50a0e42619424ba551a956511c098656.jpeg
2012-10-22 16:27:45.642 asdaf[46819:1d807] Current Group Image 50a0e42619424ba551a956511c098656.jpeg
2012-10-22 16:27:45.649 asdaf[46819:1d807] testToSeeImagehasDownloaded: <UIImage: 0xb09ed50>
2012-10-22 16:27:45.649 asdaf[46819:1d807] testToSeeImagehasSaved: (null) 
```

testToSeeImagehasSaved 应该返回 null。但是我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:47:17.490

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
//documentsDirectory is your documents directory path

//Now append your image name in this path
NSString *imagePath = [documentsDirectory stringByAppendingPathComponent:@"ImageName.jpeg"];

//convert your image in NSData
NSData *imageData = UIImagePNGRepresentation(image);
//Now write it at path
[imageData writeToFile:imagePath atomically:NO]; 
```

**你可以用同样的方式得到这个图像**

```
NSData *data = [NSData dataWithContentsOfFile:imagePath];
UIImage *image = [UIImage imageWithData:data]; 
```

**编辑：**

```
-(void)saveImage:(UIImage *)image withFileName:(NSString *)imageName ofType:(NSString *)extension 
{
   NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
   NSString *documentsDirectory = [paths objectAtIndex:0];
   NSString *imageName = [imageName stringByAppendingString:extension];
   //Note extension should be like .png, .jpg, .jpeg dont forget dot (.).

   NSString *imagePath = [documentsDirectory stringByAppendingPathComponent:imageName];

   NSData *imageData = UIImagePNGRepresentation(image);
   [imageData writeToFile:imagePath atomically:NO]; 
} 
```

好吧，我现在不关心您的整个代码，而是为什么`UIImage`当您必须将图像保存在文档目录中时要传递对象。你也可以通过`NSData`你的方法。你做得更多。

**您的问题是您每次都保存 .jpg 图像，并且在检索时您试图在同一路径上找到 .jpeg 图像，这就是您获得空值的原因。在您的保存方法中看到这一行 -**

```
[UIImageJPEGRepresentation(image, 1.0) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"jpg"]] options:NSAtomicWrite error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:45:26.220

这条线对我来说不合适：

```
UIImage *testToSeeImageHasSaved = [UIImage imageNamed: [@"Documents/" stringByAppendingString: [properties objectForKey:@"home_venue_logo"]]]; 
```

我认为你必须这样做：

```
UIImage* image = [UIImage imageWithContentsOfFile:"YOUR_FILE_PATH"]; 
```

`[UIImage imageNamed:"image_name"]`仅适用于附加到您的项目的图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:48:04.170

当您将其保存在文档文件夹中时，它不会将其完全保存在“文档”目录中，而是类似于

```
path=/var/mobile/Applications/144B3628-5258-4939-8B80-006EC5BE45B2/Library/Caches/6_1.png 
```

因此，要检索您的图像，您应该使用

```
NSString *uniquePath = [directory stringByAppendingPathComponent: filename];
image = [UIImage imageWithContentsOfFile: uniquePath]; 
```

其中 directory 是您用来保存它的路径，而 filename 是您的 jpeg 的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:29:33.320

```
[UIImage imageNamed:@"Documents/filenamesavedas.jpeg"] 
```

不采用路径，它会在您的捆绑包中搜索具有特定名称的文件。

使用调用 NSFileManager 找到文件并使用预期的路径和文件名。

# c - 变量与存储在数组中的值的有效匹配

> ID：13014846
> 
> 赞同：4
> 
> 时间：2012-10-22T15:38:38.150
> 
> 标签：c, linux, arrays, pattern-matching

我已经搜索了具有类似问题的其他线程，但我找不到任何适用于我的线程。如果我有一个具有某些值的变量，以及一个具有值列表的数组......我是否可以有效地（时间效率，空间不是约束）在变量时找出数组的*索引*匹配数组中的元素？

我从读取大量文件中获取变量，并且暴力迭代每种可能性将意味着数百万次迭代。作为最后的手段，我愿意这样做，但我宁愿不这样做。:)

如果算法依赖于此，我正在用 C 编程。我没有使用 C++/Python 编程的选项。谢谢！

编辑：我想与数组匹配的值成对出现（x，y）。如果数组与 x 或 y 匹配，我会进一步处理 (x,y)。但是，如果我必须对它进行排序，那么排序不会改变是至关重要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:18:08.880

如果空间不是问题，并且您想知道数组中是否包含值，则可以执行以下操作：

*   首先，创建一个新数组。让我们称旧`v[ ]`的为新的`w[ ]`，并让我们`i`成为您的迭代器`v[ ]`。

*   现在， make`w[v[i]] = 1`和其余的`w[ ] = 0`. 这基本上是说“如果`x is a value in array v[ ], then w[x] = 1`”。（注意：如果你`w[ ]`全局声明，它的所有位置都会被初始化为0，默认情况下）

*   每当您想检查 中包含的值时`v[ ]`，请改为检查`w[value]`。如果它等于 1，那么答案是肯定的。

如果您对每个数组进行多次检查，这应该会很好。但是请注意，它`w[ ]`的大小可能会变得非常大。

编辑：如果你还想保留索引，你可以`w[ ]`用实际位置替换 1 - 只要值不重复，这很好用。

# ios - inappsettingskit 最初可以工作，但 1-2 天后在读取设置时返回 null

> ID：13014847
> 
> 赞同：1
> 
> 时间：2012-10-22T15:38:38.647
> 
> 标签：ios

当使用带有 inappsettingskit 的 iphone 应用程序读取设置值时，1-2 天后开始返回 null。它最初似乎工作正常，首选项保存和加载没有问题。使用该应用一段时间后，似乎是 1 或 2 天，无法再读取首选项并返回 null。这是我阅读它们的方式：

```
NSString *subjectValue = [[NSUserDefaults standardUserDefaults] stringForKey:@"email_subject"]; 
```

这工作正常并返回我想要的，但一两天后它开始返回空值。

# css - 仅使用 CSS 定位标题项

> ID：13014850
> 
> 赞同：0
> 
> 时间：2012-10-22T15:38:53.517
> 
> 标签：css, positioning

我被要求更改此慈善网站的布局：

[http://antidotemarketing.com/youthlife/](http://antidotemarketing.com/youthlife/)

我需要将导航放在顶部，然后是徽标，然后是包含滑块和主要内容的白框。

这必须仅使用 CSS 来完成。

到目前为止，我很难在 Chrome 和 FF 中获得相同的结果......我什至还没有检查过 IE。我将如何将徽标定位在导航和主要内容框的中间并有足够的间距（例如 20px 顶部和底部）

还有一个问题：我无法绝对定位徽标，因为当人们登录 wordpress 时，wordpress 注入顶部的标题会弄乱所有内容的间距。

感谢大家 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:48:39.737

好吧，我想我终于明白你在追求什么了。尝试添加以下样式：

```
#logo {
  position: absolute;
  top: 80px;
  z-index: 100;
}
#login #logo {
  position: relative;
}
#page {
  margin-top: 45px;
} 
```

# c# - 在 XML-RPC 中传递 XmlRpcStruct 数组会在 C# 中引发错误

> ID：13014851
> 
> 赞同：2
> 
> 时间：2012-10-22T15:38:53.640
> 
> 标签：c#, xml-rpc

我正在使用 XML_RPC v2.5.0 for .Net 对 Web 服务进行少量调用以发送产品数据。除一种情况外，所有呼叫均正常工作。我正在将产品数据发送到预期采用以下格式的 Web 服务（格式以 PhP 语言定义）-

```
$order['products'][] = ['sku', 'quantity'] 
```

我正在使用下面的代码来传递这些数据 -

```
XmlRpcStruct dic = new XmlRpcStruct();
DataTable dt1 = GetData();
XmlRpcStruct[] prod = new XmlRpcStruct[dt1.Rows.Count];
for (int i = 0; i < dt1.Rows.Count; i++)
{
   prod[i] = new XmlRpcStruct();
   prod[i].Add("sku", dt1.Rows[i][0].ToString());
   prod[i].Add("quantity", dt1.Rows[i][1].ToString());
}
dic.Add("products", prod);
object orderID = proxy.SubmitOrder(dic, custID, accessKey); 
```

当数据表 dt1 中只有 1 行并且我成功获取 orderID 时，上面的代码有效。但是，如果数据表中有超过 1 条记录，我会得到一个异常 -

> 参数属于或包含类型 CookComputing.XmlRpc.XmlRpcStruct 的实例，该类型无法映射到 XML-RPC 类型

我想我在这里遗漏了一些愚蠢的东西。请帮助并让我知道我在这里犯了什么错误。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:54:11.550

移动这行代码

```
`dic.Add("products", prod);` 
```

到循环中的最后一行以使其工作 b/c 目前仅将单个项目添加到您的字典中。

另一个错误是我认为“dic”和“prod”对象不是列表。

你的代码假设是：

```
`List<XmlRpcStruct> dic = new List<XmlRpcStruct>();
    for (int i = 0; i < dt1.Rows.Count; i++)
    {
       List<XmlRpcStruct> prod = new List<XmlRpcStruct>();
       prod.Add("sku", dt1.Rows[i][0].ToString());
       prod.Add("quantity", dt1.Rows[i][1].ToString());
       dic.Add("products", prod); //this line might be a culprit
    }

    object orderID = proxy.SubmitOrder(dic, custID, accessKey);` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:21:32.007

上面写的代码工作正常。我的问题是在传递数组时将空值传递给其他参数之一，因此出现了问题。

# r - 从查找表返回变长向量的高效函数

> ID：13014854
> 
> 赞同：1
> 
> 时间：2012-10-22T15:39:04.640
> 
> 标签：r, vectorization, lookup-tables

我有三个数据源：

```
types<-c(1,3,3)
places<-list(c(1,2,3),1,c(2,3))
lookup.counts<-as.data.frame(matrix(runif(9,min=0,max=10),nrow=3,ncol=3))
assigned.places<-rep.int(0,length(types)) 
```

“类型”向量中的数字告诉我给定观察的“类型”是什么。地点列表中的向量告诉我可以在哪些地方找到观察结果（有些观察结果只在一个地方找到，而另一些则在所有地方都可以找到）。根据定义，对于每个观察，类型中有一个条目，位置中有一个列表。Lookup.counts 告诉我每个地方有多少每种类型的观察值（从另一个数据源生成）。

我想根据lookup.counts 生成的概率将每个观察随机分配到一个地方。使用 for 循环它看起来像“

```
for (i in 1:length(types)){
  row<-types[i]
  columns<-places[[i]]
  this.obs<-lookup.counts[row,columns] #the counts of this type in each place
  total<-sum(this.obs)
  this.obs<-this.obs/total #the share of observations of this type in these places
  pick<-runif(1,min=0,max=1)

  #the following should really be a 'while' loop, but regardless it needs help
  for(j in 1:length(this.obs[])){
    if(this.obs[j] > pick){
      #pick is less than this county so assign
      pick<- 100 #just a way of making sure an observation doesn't get assigned twice
      assigned.places[i]<-colnames(lookup.counts)[j]
    }else{
      #pick is greater, move to the next category
      pick<- pick-this.obs[j]
    }
  }
} 
```

我一直在尝试以某种方式对其进行矢量化，但我对“places”和“this.obs”的可变长度感到困惑

当然，在实践中，lookup.counts 表要大一些（500 x 40），并且我有一些 900K 的观察结果，其中位置列表的长度为 1 到 39。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:09:35.073

要矢量化内部循环，您可以使用`sample`或`sample.int`从具有规定概率的多个替代方案中进行选择。除非我读错了你的代码，否则你需要这样的东西：

```
assigned.places[i] <- sample(colnames(this.obs), 1, prob = this.obs) 
```

我有点惊讶你正在使用它`colnames(lookup.counts)`。这不应该是子集`columns`吗？似乎我错过了什么，或者您的代码中有错误。

列表的不同长度是矢量化外部循环的严重障碍。也许您可以使用该`Matrix`包将该信息存储为稀疏矩阵。然后，您可以简单地将概率乘以该向量，以排除那些不在给定观察的位置列表中的列。但是由于您可能仍会使用`apply`上述示例代码，因此您不妨保留该列表并使用某种形式的`apply`来对其进行迭代。

总体结果可能看起来像这样：

```
assigned.places <- colnames(lookup.counts)[
  apply(cbind(types, places), 1, function(x) {
    sample(x[[2]], 1, prob=lookup.counts[x[[1]],x[[2]]])
  })
] 
```

`cbind`and的使用`apply`并不是特别漂亮，但似乎有效。每个`x`都是两个项目的列表，`x[[1]]`即类型和`x[[2]]`相应的位置。`lookup.counts`我们像您一样使用这些索引。然后，在选择我们在下标中使用的列之一的索引时，我们使用找到的计数作为相对概率。只有在将所有这些数字组合成单个向量之后`apply`，索引才会转换为基于 的名称`colnames`。

如果你不把事情放在一起，你可以检查事情是否更快`cbind`，而是只迭代索引：

```
assigned.places <- colnames(lookup.counts)[
  sapply(1:length(types), function(i) {
    sample(places[[i]], 1, prob=lookup.counts[types[i],places[[i]]])
  })
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:27:15.757

这似乎也有效：

```
# More convenient if lookup.counts is a matrix.
lookup.counts<-matrix(runif(9,min=0,max=10),nrow=3,ncol=3)
colnames(lookup.counts)<-paste0('V',1:ncol(lookup.counts))

# A function that does what the for loop does for each i
test<-function(i) {
  this.places<-colnames(lookup.counts)[places[[i]]]
  this.obs<-lookup.counts[types[i],this.places]
  sample(this.places,size=1,prob=this.obs)
}

# Applies the function for all i
sapply(1:length(types),test) 
```

# sql - 如何在 VB6 中使用 MS Access 公共功能

> ID：13014859
> 
> 赞同：0
> 
> 时间：2012-10-22T15:39:25.713
> 
> 标签：sql, vba, ms-access, vb6

我有一个 MS Access 数据库，它在 VBA 中定义了一个公共函数，存储在 Module1 中。我想将该函数作为查询的一部分包含在内，该查询通过 ADODB.RecordSet 的 Open 方法从 VB6 传递给 ADODB。

VBA 函数称为 IsOpcodePresent，它采用查询中提供的两个参数。

查询（缩写）是

```
SELECT * FROM tbl WHERE IsOpcodePresent(example,syl) order by syl; 
```

这可以做到吗？如果我使用像 IsNull 这样的标准 Access 函数，那么它就可以工作。但对于我自己的功能，它没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:43:36.340

恐怕这是不可能的。您需要一个 MS Access 实例。

MS Access“数据库”有两个部分。表单、报告和代码保存在 MS Access 中，数据通常保存在 Jet/ACE 数据库中。您的 ADODB 查询引用了 Jet/ACE 数据库，它与“前端”没有连接。当您在 MS Access 中运行查询时，它会引用代码。

根据功能，如果您使用 Access 2010 或更高版本，可能会重写为[数据宏。](http://office.microsoft.com/en-us/access-help/create-a-data-macro-HA010378170.aspx)它们甚至可以在 MS Access 之外运行，因为它们与 ACE 数据库相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:59:09.020

```
Function GetAccessRecordset(sDatabase As String, sSQL As String) As Variant
    Dim oAccess As Object
    Set oAccess = CreateObject("Access.Application")
    oAccess.OpenCurrentDatabase (sDatabase)
    oAccess.Visible = False
    Dim dbs As Object
    Set dbs = oAccess.CurrentDb.OpenRecordSet(sSQL)
    GetAccessRecordset = dbs.GetRows(dbs.RecordCount)
    dbs.Close
    oAccess.Quit
End Function 
```

这就是我想要的。只要没有脚本阻塞或脚本已签名并且数据库接受签名，它就可以正常工作。它为我提供了二维结果数组，并让我使用基于脚本的函数。

# python - 使用 BeautifulSoup/Python 解析目录中的每个文件，另存为新文件

> ID：13014862
> 
> 赞同：5
> 
> 时间：2012-10-22T15:39:43.597
> 
> 标签：python, html, html-parsing, beautifulsoup

Python 和 BeautifulSoup 的新手。我有一个 Python 程序，它打开一个名为“example.html”的文件，对其运行 BeautifulSoup 操作，然后对其运行 Bleach 操作，然后将结果保存为文件“example-cleaned.html”。到目前为止，它适用于“example.html”的所有内容。

我需要对其进行修改，以便它打开文件夹“/posts/”中的每个文件，在其上运行程序，然后将其保存为“/posts-cleaned/X-cleaned.html”，其中 X 是原始文件名。

这是我的代码，最小化：

```
from bs4 import BeautifulSoup
import bleach
import re

text = BeautifulSoup(open("posts/example.html"))
text.encode("utf-8")

tag_black_list = ['iframe', 'script']
tag_white_list = ['p','div']
attr_white_list = {'*': ['title']}

# Step one, with BeautifulSoup: Remove tags in tag_black_list, destroy contents.
[s.decompose() for s in text(tag_black_list)]
pretty = (text.prettify())

# Step two, with Bleach: Remove tags and attributes not in whitelists, leave tag contents.
cleaned = bleach.clean(pretty, strip="TRUE", attributes=attr_white_list, tags=tag_white_list)

fout = open("posts/example-cleaned.html", "w")
fout.write(cleaned.encode("utf-8"))
fout.close()
print "Done" 
```

很高兴收到对现有解决方案的帮助和指示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:11:25.627

您可以使用[`os.listdir()`](http://docs.python.org/library/os.html#os.listdir)获取目录中所有文件的列表。如果你想一直递归到目录树，你需要[`os.walk()`](http://docs.python.org/library/os.html#os.walk).

我会移动所有这些代码来处理单个文件来运行，然后编写第二个函数来处理整个目录的解析。像这样的东西：

```
def clean_dir(directory):

    os.chdir(directory)

    for filename in os.listdir(directory):
        clean_file(filename)

def clean_file(filename):

    tag_black_list = ['iframe', 'script']
    tag_white_list = ['p','div']
    attr_white_list = {'*': ['title']}

    with open(filename, 'r') as fhandle:
        text = BeautifulSoup(fhandle)
        text.encode("utf-8")

        # Step one, with BeautifulSoup: Remove tags in tag_black_list, destroy contents.
        [s.decompose() for s in text(tag_black_list)]
        pretty = (text.prettify())

        # Step two, with Bleach: Remove tags and attributes not in whitelists, leave tag contents.
        cleaned = bleach.clean(pretty, strip="TRUE", attributes=attr_white_list, tags=tag_white_list)

        # this appends -cleaned to the file; 
        # relies on the file having a '.'
        dot_pos = filename.rfind('.')
        cleaned_filename = '{0}-cleaned{1}'.format(filename[:dot_pos], filename[dot_pos:])

        with open(cleaned_filename, 'w') as fout:
            fout.write(cleaned.encode("utf-8"))

    print "Done" 
```

然后你只需打电话`clean_dir('/posts')`或不打电话。

我将“-cleaned”附加到文件中，但我想我更喜欢您使用全新目录的想法。`-cleaned`这样，如果某些文件等已经存在，您就不必处理冲突。

我还使用该[`with`](http://www.python.org/dev/peps/pep-0343/)语句在此处打开文件，因为它会关闭它们并自动处理异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:04:33.197

回答我自己的问题，对于其他可能觉得 os.listdir 的 Python 文档有点无用的人：

```
from bs4 import BeautifulSoup
import bleach
import re
import os, os.path

tag_black_list = ['iframe', 'script']
tag_white_list = ['p','div']
attr_white_list = {'*': ['title']}

postlist = os.listdir("posts/")

for post in postlist: 

        # HERE: you need to specify the directory again, the value of "post" is just the filename:
    text = BeautifulSoup(open("posts/"+post))
    text.encode("utf-8")

    # Step one, with BeautifulSoup: Remove tags in tag_black_list, destroy contents.
    [s.decompose() for s in text(tag_black_list)]
    pretty = (text.prettify())

    # Step two, with Bleach: Remove tags and attributes not in whitelists, leave tag contents.
    cleaned = bleach.clean(pretty, strip="TRUE", attributes=attr_white_list, tags=tag_white_list)

    fout = open("posts-cleaned/"+post, "w")
    fout.write(cleaned.encode("utf-8"))
    fout.close() 
```

我作弊并创建了一个名为“posts-cleaned/”的单独文件夹，因为将文件保存到那里比拆分文件名、添加“cleaned”并重新加入它更容易，尽管如果有人想向我展示一个这样做的好方法，那就更好了。

# java - Does Java compiler eliminate function calls from getters?

> ID：13014863
> 
> 赞同：0
> 
> 时间：2012-10-22T15:39:43.390
> 
> 标签：java, function, inline, compiler-optimization, getter

Can I be sure that

```
private int value;
public int getValue() { return value; } 
```

is compiled by compiler in the same way as

```
public int Value; 
```

in the terms of number of instructions and execution time? I mean do modern compilers trying to make functions "inline" (c++ term)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:40:44.030

No; the Java *compiler* will not change that.

However, the JITter probably will.

# arrays - Finding a sub-array where every pair has sum greater than a given K

> ID：13014867
> 
> 赞同：3
> 
> 时间：2012-10-22T15:39:55.853
> 
> 标签：arrays, algorithm

I have been given an array A of integers. Now I have to found out a sub-array(a sub-sequence of original array) where sum of every pair is greater than or equal to a pre-defined K.

What I thought :-

*   Will sort the array in O(nlgn) or O(n) depending upon range of values in array.
*   Find out i in sorted array such that `sorted[i] + sorted[i+1]>=k`
*   Set max to `sorted[i]`
*   Traverse the original array to delete all value smaller than max, which is the required sub-sequence

Repeat the above for all the elements of the array.

Running Time :- `O(nlgn)`

Is the solution optimal ? Can we further improve it ?

Example :-

```
-10 -100 5 2 4 7 10 23 81 5 25 
```

Sorted Array

```
-100 -10 2 4 5 5 7 10 23 25 81 
```

Let `K = 20`

Sub Array : -

10 23 25 81

Had the question been to find out longest sub-array, algorithm suggested by alestanis in the answers would work fine :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:07:07.937

这是一种略有不同的方法，由较早的评论之一暗示，类似于 alestanis 的答案，但略有不同，因为它不依赖于拆分数组。它通过数组进行单次传递（尽管这不能保证 O(N) ），并且只需要跟踪两个最小值以及正在考虑的子序列的起点和终点。

要使所有可能对的总和为 20 的连续子序列，两个最小元素的总和必须 >= 20。因此，首先要考虑后续的元素对 (`array[0]`和`array[1]`开始)。`array[1]`如果它们的总和不是 20 或更多，那么继续`array[2]`. 如果它们加起来达到 20 或更多，则将右侧端点扩大一。如果新元素大于其他两个元素，那么它将与子序列中已有的任何元素相加为 20 或更大，您可以再次展开右手。如果它更少，那么您需要通过几个比较来选择两个最小元素，如果两个新的最小元素现在不等于 20 或更多，则从子序列中删除您刚刚添加的元素，并注意这个特定的子序列，然后从现有子序列的第二个和第三个元素重新开始。最后，您通常会有一个符合约束的子序列列表，并且应该很容易选择第一个或最大的或任何您需要的。

例如，使用您列出的序列：

```
-10 -100 5 2 4 7 10 23 81 5 25 
```

开始`-10, -100`。它们的总和不是 20，所以向右移动 1 到`-100, 5`。同样，这些总和不等于 20，所以继续。总和为 20 的第一对是`10, 23`. 所以现在，我们将范围扩大到`10, 23, 81`. 81 大于两个最小值，所以我们再次展开，到`10, 23, 81, 5`。5 小于 10 和 23，所以新的最小值是 5 和 10，它们的和不等于 20，所以加 5 是错误的，我们需要回溯。我们发现`10, 23, 81`就是这样一个子序列。接下来我们继续`23, 81`，这将引导我们到子序列`23, 81, 5, 25`，它也符合标准。

所以，最后，我们有四个满足条件的可能子序列 - `10, 23, 81`、`23, 81, 5, 25`、`81, 5, 25`和`5, 25`。一旦我们有一个包含原始列表中最后一个元素的解决方案，就可以通过不找到其他解决方案来修剪最后两个，这将只留下前两个可能性。从那里我们可以选择第一个或最长的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T01:36:11.113

这是一个相当简单的解决方案。

```
>>> def f(A, k):
...     solution = [item for item in A if 2*item >= k]
...     m = min(solution)
...     for item in A:
...         if item + m >= k and 2*item < k:
...             solution.append(item)
...             break
...     return solution
...
>>> f([-10, -100, 5, 2, 4, 7, 10, 23, 81, 5, 25], 20)
[10, 23, 81, 25]
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T17:34:50.453

首先，你**不能**对你的集合进行排序。我认为问题的一部分是找到作为输入给出的原始数组的子数组。

这可以使用一些递归来解决：

1.  找到数组的两个最小值，`m1`然后`m2`
2.  如果`m1 + m2 < K`然后将您的数组拆分为最多两个不包含`m1`和`m2`同时的较小数组。`m1`如果and的索引`m2`是`i`and `j`with`i<j`那么子数组是`[O, j-1]`and `[i+1, n]`。从步骤 1 开始重复。
3.  如果`m1 + m2 >= K`那么您当前的数组是您的问题的可行解决方案：返回它的长度。
4.  添加一些**修剪**以丢弃无用的数组

让我们将此应用于您的示例：

```
Initialize max = 0;
A1 = -10* -100* 5 2 4 7 10 23 81 5 25 
```

它的两个最小值是 -10 和 -100。围绕这些值拆分数组，这给了我们一个数组（我们很幸运！）

```
A2 = 5 2* 4* 7 10 23 81 5 25 
```

两个最小值`A2`是 2 和 4。我们分成

```
A3_1 = 5* 4*   and    A3_2 = 2* 7 10 23 81 5* 25 
```

这将继续进行以下迭代：

```
A3_1 discarded    
A3_2 becomes A4_1 = 2* 7* 10 23 81    A4_2 = 7* 10 23 81 5* 25

A5_1 = 7* 10* 23 81
A5_2 = 7* 10* 23 81        -> Duplicate, discarded
A5_3 = 10* 23 81 5* 25

A6_1 = 10* 23* 81          -> Yay! update max = 3
A6_2 = 10* 23* 81          -> Length <= max. Discarded
A6_3 = 23 81 5* 25         -> Yay! update max = 4 
```

在此示例中，我通过以下方式修剪了搜索空间：

*   消除重复的子集（这可以通过将它们存储在一个集合中来完成）
*   丢弃小于或等于当前已知最大长度的子数组

该算法的复杂度为：

*   O(nlogn) 平均，
*   O(n^2) 最坏的情况。当数组被排序并且最小值总是在数组的一侧时会发生这种情况，因此不能将数组拆分为更小的子数组（如示例的第一次迭代）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-11T23:20:03.937

```
void sub_array(int ar[],int n,int val)
{
    int max=0;
    for(int i=0;i<n;i++)
    {
        if(ar[max]<ar[i])
            max=i;
    }
    int b[n];
    max=ar[max];
    int p=0;
    int min=0;
    for(int i=0;i<n;i++)
    {
        if(ar[i]+max>val)
        {
            b[p]=ar[i];
            if(ar[i]<max)
            {   
                min=p;
                max=ar[i];
            }
            p++;
        }
        else
        {
            if(ar[i]>max)
            {
                max=ar[i];
                b[min]=ar[i];
            }
        }
    }
    for(int i=0;i<p;i++)
    {
        cout<<b[i]<< "  " ;
    }
} 
```

# c# - This method does not accept null for this parameter. How can I fix this?

> ID：13014871
> 
> 赞同：-1
> 
> 时间：2012-10-22T15:40:11.830
> 
> 标签：c#, xna

I always get this error message:

> This method does not accept null for this parameter. Parameter name: texture

`MyTexture` in the `Bullet` class is null, but I don't know how to change that.
Could somebody help me, please?

```
public class Map
{
    Texture2D myEnemy;
    Player Player;
    List<Enemy> enemieslist = new List<Enemy>();    

    float fNextEnemy = 0.0f;
    float fEnemyFreq = 3.0f;
    int fMaxEnemy = 3;

    Vector2 Startposition = new Vector2(200, 200);
    GraphicsDeviceManager graphicsDevice; 

    public Map(GraphicsDeviceManager device) 
    { 
        graphicsDevice = device;
    } 

    public void Load(ContentManager content)
    {
    myEnemy = content.Load<Texture2D>("gegner");
    Player = new Player(graphicsDevice);
    Player.Load(content);
    }

    public void Update(GameTime gameTime)
    {
        Player.Update(gameTime);
        float delta = (float)gameTime.ElapsedGameTime.TotalSeconds;

         for(int i = enemieslist.Count - 1; i >= 0; i--) 
        {
        // Update Enemy
        Enemy enemy = enemieslist[i];
        enemy.Update(gameTime, this.graphicsDevice, Player.spielershape.Position, delta);
        // Try to remove an enemy
        if (enemy.Remove == true)
        {
            enemieslist.Remove(enemy);
            enemy.Remove = false;
        }
        }

        this.fNextEnemy += delta;
        //New enemy
        if (fMaxEnemy > 0)
        {
        if ((this.fNextEnemy >= fEnemyFreq) && (enemieslist.Count < 3))
        {
            Vector2 enemyDirection = Vector2.Normalize(Player.playershape.Position - Startposition) * 100f;
            enemieslist.Add(new Enemy(Startposition, enemyDirection, Player.playershape.Position));
            fMaxEnemy -= 1;
            fNextEnemy -= fEnemyFreq;
        }
        }        
  }

    public void Draw(SpriteBatch batch)
    {
        Player.Draw(batch);
        foreach (Enemy enemies in enemieslist)
        {
            enemies.Draw(batch, myEnemy);
        } 

    }      
}

public class Enemy
{
    List<Bullet> bulletslist = new List<Bullet>();
    Texture2D myBullet;

 private float nextShot = 0;
 private float shotFrequency = 2.0f;  

    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public bool Remove;
    public bool Shot;

    public Enemy(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
        this.Remove = false;
        this.Shot = false;
    }

    public void Load(ContentManager content)
    {
        myBullet = content.Load<Texture2D>("bullet");
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, Vector2 PlayerPos, float delta)
    {           
        nextShot += delta;

        for (int i = bulletslist.Count - 1; i >= 0; i--)
        {
            // Update Bullet
            Bullet bullets = bulletslist[i];
            bullets.Update(gameTime, graphics, delta);

            // Try to remove a bullet... Collision, hit, or outside screen.
            if (bullets.Remove == true)
                bulletslist.Remove(bullets);
            bullets.Remove = false;
        }

        if (nextShot >= shotFrequency)
        {
            this.Shot = true;
            nextShot -= shotFrequency;
        }

        // Does the enemy shot?
        if ((Shot == true) && (bulletslist.Count < 1))
        // New bullet
        {
            Vector2 bulletDirection = Vector2.Normalize(PlayerPos - this.vPos) * 200f;
            bulletslist.Add(new Bullet(this.vPos, bulletDirection, PlayerPos));
            Shot = false;
        }

        if (!Remove)
        {
            this.vMove = Vector2.Normalize(PlayerPos - this.vPos) * 100f;
            this.vPos += this.vMove * delta;

            if (this.vPos.X > graphics.PreferredBackBufferWidth + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.X < -20)
            {
                this.Remove = true;
            }

            if (this.vPos.Y > graphics.PreferredBackBufferHeight + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.Y < -20)
            {
                this.Remove = true;
            }
        }
    }

    public void Draw(SpriteBatch batch, Texture2D myTexture)
    {
        if (!Remove)
        {
            batch.Draw(myTexture, this.vPos, Color.White);
        }
        foreach (Bullet bullets in bulletslist)
        {
            bullets.Draw(batch, myBullet);
        } 
    }
}

public class Bullet
{
    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public bool Remove;

    public Bullet(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.Remove = false;
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, float delta)
    {
            if (!Remove)
            {
                this.vPos += this.vMove * delta;                  

                if (this.vPos.X > graphics.PreferredBackBufferWidth +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.X < -20)
                {
                    this.Remove = true;
                }

                if (this.vPos.Y > graphics.PreferredBackBufferHeight +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.Y < -20)
                {
                    this.Remove = true;
                }
            }         
    }

    public void Draw(SpriteBatch spriteBatch, Texture2D myTexture)
    {
        if (!Remove)
        {
            spriteBatch.Draw(myTexture, this.vPos, Color.White);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:00:27.043

我想这就是你的错误所在。因此，您需要添加一个空检查并绘制默认纹理或根本不绘制。

```
public void Draw(SpriteBatch spriteBatch, Texture2D myTexture)
{
    if (!Remove)
    {
        if (null == myTexture)
            myTexture = // some default texture, throw an error or skip the draw
        if (null != spriteBatch)
            spriteBatch.Draw(myTexture, this.vPos, Color.White);
    }
} 
```

和/或您可以输入 Enemy`Load()`方法：

```
public void Load(ContentManager content)
{
    myBullet = content.Load<Texture2D>("bullet");
    Debug.Assert(null != myBullet);
} 
```

每当您依赖某个值始终是某物（即不为空）时，您都应该使用[断言。](http://msdn.microsoft.com/en-us/library/kssw4w7z.aspx)

# c# - Subtle difference in using object initialiser inline opposed to passing variable of one to EF Select

> ID：13014872
> 
> 赞同：2
> 
> 时间：2012-10-22T15:40:16.747
> 
> 标签：c#, entity-framework

What's the difference between saving a Func as a variable and then passing it to a entity framework select opposed to typing the conversion inline inside of the select.

```
Func<Models.Contact,ViewModels.Contact> ToViewModel = 
    c => new ViewModels.Contact()
    {
        ID = c.ID,
        ...
        UserName = c.User.UserName
    };

...

return dc.Contacts.Select(ToViewModel); 
```

as opposed to

```
return dc.Contacts.Select(c => new ViewModels.Contact()
{
    ID = c.ID,
    ...
    UserName = c.User.UserName
}); 
```

I ask this because although both methods work, they have subtly different reaction to nulls and a few other things and I can't understand why.

For example in this case, a Contact may or may not have a User, so User may or may not be null. When typing the initialiser inline it will fail the property gracefully to null. However when passing the same initializer via the variable it will throw a NullReferenceException.

Why is this?

Note that the reason I want to save the initialiser is so that it can be reused in each of the CRUD operations for returning an object from a WebApi. It would be annoying to have to copy and paste the select around the class, especially if over time properties need to be added or removed from the response.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:41:39.290

您的第二个示例编译为`Expression<Func<Contact, Contact>>`EF 在服务器上运行的 . （使用`IQueryable`接口）
变成使用OUTER JOIN的SQL查询，不会产生空引用异常。

您的第一个示例不是表达式树，因此它通过`IEnumerable<T>`接口并在客户端上执行。
您可以通过将其更改`ToViewModel`为`Expression<Func<...>>`.

# node.js - nodejs - module dependencies

> ID：13014874
> 
> 赞同：0
> 
> 时间：2012-10-22T15:40:23.763
> 
> 标签：node.js, module

Let's say I have module A.js and B.js.

**A.js**

```
var b = require('./B');
[...some code here...] 
```

**B.js**

```
var a = require('./A');
[...some code here...] 
```

than in my **`app.js`** I have something like:

**app.js**

```
var a = require('./A');
[some code here] 
```

The thing is that the `var a` in **`B.js`** is always an empty object **`{}`** when I do like **`node app.js`** while If I directly do **`node B.js`** it is properly initialized.

What instead I would expect is that calling **`node app.js`** it triggers **`A.js`** (that requires **`B.js`**) and so, in turn it initialtes its own **`a`** variable.... but it is not like this apparently....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:08:17.010

你有一个[循环模块依赖](http://nodejs.org/api/modules.html#modules_cycles)，所以顺序是这样的：

1.  `app.js`需要一个
2.  A 需要 B
3.  B 需要 A（尚未完全定义）

在第 3 步中，B 在请求时获取 A 的定义。那时这只是一个空对象，所以这就是`a`设置为 in的内容`B.js`。

# java - Getting filename, location and author of changed files using RTC source control

> ID：13014876
> 
> 赞同：1
> 
> 时间：2012-10-22T15:40:27.243
> 
> 标签：java, clearcase, rtc

I'm trying to access the filename, location and author of changed files for a given stream. Below code is what I have so far. Looking at the api documentation this does not seem possible? Can this be achieved using the java api or some other method ?

```
 IChangeSetSearchCriteria c = IChangeSetSearchCriteria.FACTORY.newInstance();
        WorkspaceManager mgr = (WorkspaceManager) SCMPlatform.getWorkspaceManager(repo);
        IWorkspaceSearchCriteria criteria = IWorkspaceSearchCriteria.FACTORY.newInstance();
        criteria.setKind(IWorkspaceSearchCriteria.STREAMS);
        criteria.setExactName("mystream"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:54:13.770

Note: try to not use the Stream name directly, as a Stream can be renamed or another Stream can have the same name.
See [this thread](https://jazz.net/forum/questions/40758/searching-for-change-sets-programatically) for more.

> If they're running on the command line, then you can take the UUID of the stream, create a handle from it and set the value in the search criteria (although you may want to fetch the stream first, since the user may have made a typo).

For going from a UUID to an ItemHandle

```
workspaceHandle = (IWorkspaceHandle)IWorkspace.ITEM_TYPE.createItemHandle(workspaceID, null); 
```

Regarding listing the content of a changeset, [this thread](https://jazz.net/forum/questions/38090/get-files-referred-in-a-change-set-via-rest-apis) provides some clues:

> If the versionable represents a file, it will be an instance of an `IFileItem` which has a content object associated with it.
> You can get a stream to the contents from the content object.

Again, fetching the changeset (as in [this thread](https://jazz.net/forum/questions/13789/how-are-previous-change-set-comments-retrieved-using-the-api)) can be key to be sure to get *all* the data.

* * *

Note: taking the REST API route might be easier:
Your query is a POST

```
Request URL:https://jazzServer/jazz/oslc-scm/changeSet?jazz_scm:workspaceId=_OQt98EyrEeGAvYGjhK23_g&jazz_scm:maxResults=25&jazz_scm:changeKind=31
Request Method:POST
Cookie:SaveStateCookie=undefined%2Ccom.ibm.team.workitem.category%2Ccom.ibm.teamz.dsdef.category%2Ccom.ibm.team.dashboard.category%2Ccom.ibm.team.dashboard.category~%23_~%23com.ibm.team.dashboard.server.saveTeamDashboard; JSESSIONID=BF3DA3D5E0FCA16193876307E91A5471; JazzFormAuth=Form; net-jazz-ajax-cookie-rememberUserId=VonC; JSESSIONIDSSO=05626E20EC4F6DB231759EFC4DB69785
Host:jazzServer
Origin:https://jazzServer
Referer:https://jazzServer/jazz/web/projects/My%2°RTC%20Project

Form Dataview URL encoded
{"propertyRequest":{"jazz_scm:lastModified":null,"jazz_scm:creator":{"dcterms:name,rdf:resource":null},"jazz_scm:reasons":{"dcterms:title,rdf:resource":null},"jazz_scm:relatedArtifacts":{"dcterms:title,dcterms:description,rdf:resource,jazz_scm:linkTypeId,oslc_scm:mimeType":null}}}: 
```

That will return:

```
{jazz_scm:firstTimestamp:1350975540822, jazz_scm:lastTimestamp:1350285276229,…}
jazz_scm:firstTimestamp: 1350975540822
jazz_scm:lastTimestamp: 1350285276229
jazz_scm:results: [{rdf:resource:https://jazzServer/jazz/oslc-scm/changeSetId/__KSygRzVEeK_Q6KSNVybvA,…},…]
    0: {rdf:resource:https://jazzServer/jazz/oslc-scm/changeSetId/__KSygRzVDeK_Q6KSNVybvA,…}
    dcterms:description: "Check-in of xslts into RTC taken from UAT server."
    dcterms:identifier: "itemOid/com.ibm.team.scm.ChangeSet/__KSygRzVDeK_Q6KSNVybvA"
    dcterms:modified: 1350975540822
    dcterms:name: null
    dcterms:type: "com.ibm.team.scm.changeSet"
    jazz_scm:creator: {,…}
        dcterms:description: null
        dcterms:identifier: "itemOid/com.ibm.team.repository.Contributor/_YakgYGUUEeCXgMjSYYyTpw"
        dcterms:modified: 1321511726283
        dcterms:name: "a User"
        dcterms:type: "com.ibm.team.scm.contributor"
    jazz_scm:itemId: "_YakgYGUUEeCXgMjSYYyTpw"
    jazz_scm:itemType: "com.ibm.team.repository.Contributor"
    prefixes: {dcterms:http://purl.org/dc/elements/1.1/, rdf:http://www.w3.org/1999/02/22-rdf-syntax-ns#,…}
    qname: "jazz_scm:Contributor"
    rdf:resource: "https://jazzServer/jazz/oslc-scm/itemOid/com.ibm.team.repository.Contributor/_YakgYGUUEeCXgMgSYYyTpw"
    jazz_scm:itemId: "__KSygRzVDeK_Q6KSNVybvA"
    jazz_scm:itemType: "com.ibm.team.scm.ChangeSet"
    jazz_scm:lastModified: null
    jazz_scm:reasons: [{rdf:resource:itemName/com.ibm.team.workitem.WorkItem/258061,…}]
    jazz_scm:relatedArtifacts: []
    prefixes: {dcterms:http://purl.org/dc/elements/1.1/, rdf:http://www.w3.org/1999/02/22-rdf-syntax-ns#,…}
    qname: "oslc_scm:ChangeSet"
    rdf:resource: "https://jazzServer/jazz/oslc-scm/changeSetId/__KSygRzVEeK_Q6KSNVybvA"
1: {rdf:resource:https://jazzServer/jazz/oslc-scm/changeSetId/_Pg_RMRwzEeK_Q6KSNVybvA,…}
2: {rdf:resource:https://jazzServer/jazz/oslc-scm/changeSetId/_3L3gcRwyEeK_Q6KSNVybvA,…}
.... 
```

With `_OQt98EyrEeGAvYGjhK23_g` the **`workspaceItemId` of the Stream** (a Stream is a Workspace with the element "`stream`" set to true!)

You can get the WorkspaceItemId of a Stream with the following query:

```
Request URL:https://jazzServer/jazz/service/com.ibm.team.scm.common.internal.rest.IScmRestService2/searchWorkspaces?workspaceName=A%20STREAM%20NAME&workspaceNameKind=partial%20ignorecase&maxResultSize=50&workspaceKind=both
Request Method:GET
Cookie:SaveStateCookie=undefined%2Ccom.ibm.team.workitem.category%2Ccom.ibm.teamz.dsdef.category%2Ccom.ibm.team.dashboard.category%2Ccom.ibm.team.dashboard.category~%23_~%23com.ibm.team.dashboard.server.saveTeamDashboard; JSESSIONID=BF3DA3D5E0FCA16193876307E91A5471; JazzFormAuth=Form; net-jazz-ajax-cookie-rememberUserId=VonC; JSESSIONIDSSO=05626E20EC4F6DB231759EFC4DB69785
Host:jazzServer
Referer:https://jazzServer/jazz/web/projects/A%20STREAM%20NAME
X-Requested-With:XMLHttpRequest
Query String Parametersview URL encoded
workspaceName:A STREAM NAME
workspaceNameKind:partial ignorecase
maxResultSize:50
workspaceKind:both 
```

That will return results including:

```
<workspaces>
    <workspace itemId="_OQt98EyrEeGAvYGjhK23_g" properties="">
        <stateId>_-flUwBwpEeK_Q6KSNVybvA</stateId>
        <immutable>true</immutable>
        <contextId>_Dp6kMdwTEd2jUupDpEV1Rw</contextId>
        <modified>2012-10-32T10:22:18.766Z</modified>
        <name>A Stream Name</name>
        <stream>true</stream>
        <description>a stream</description>
        <time>109</time>
        <customContext xsi:nil="true"/>
        <normalizedName>a stream name</normalizedName>
        <readPermissionMode>0</readPermissionMode>
        <modifiedBy itemId="_Y70gkCYmEeGAvYGjhJ23_g"/>
        <owner itemId="_ICt_wDL6EeGeLde_4UGHCg" xsi:type="process:ProjectAreaHandle"/>
        <flows>
           ... 
```

# php - Simplepie, how to get the url feed inserted

> ID：13014877
> 
> 赞同：1
> 
> 时间：2012-10-22T15:40:27.757
> 
> 标签：php, simplepie

I am using this plugin for my website and I am struggling with problem I have. I use a multifeed system and the code looks like this :

```
$feed = new SimplePie();
$feed->set_feed_url($feedsArray);
$feed->init();
$feed->handle_content_type();
$feed->set_item_limit(50);

foreach ($feed->get_items() as $item){

     $data[] = array( 'title' => $item->get_title(), 'description' => $item->get_description() );

} 
```

Everything works perfectly but, what I want is to introduce in the $data array a value like "feedUrl" which is the url used in $feedsArray for the actual item. Remember this array contains all the urls and I want the url used for the actual item where I get news.

Sorry if my explanation is a bit confusing,

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:55:59.913

~~用于`$feed->get_permalink();`提要的链接或`$item->get_permalink();`项目的永久链接。~~

**更新**

使用`'feedUrl' => $item->get_base('href')`：

```
foreach ($feed->get_items() as $item) {

     $data[] = array( 'feedUrl' =>  $item->get_base('href'), 'title' => $item->get_title(), 'description' => $item->get_description() );

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T09:13:34.327

如果您想要您最初输入的完整 URL，请使用：

```
$item->get_feed()->subscribe_url() 
```

[http://simplepie.org/wiki/reference/simplepie/subscribe_url](http://simplepie.org/wiki/reference/simplepie/subscribe_url)

# xcode - Xcode 4 preferences pane is missing the "Source Trees" tab?

> ID：13014878
> 
> 赞同：4
> 
> 时间：2012-10-22T15:40:30.790
> 
> 标签：xcode, tabs, tree, preferences

I'm working on a project where I need to bring in an outside library.

I found the library, and in order to make it a part of my project, my understanding is that I need to take the project provided (which includes the library I want) and then set the HEADER_SEARCH_PATHS to an appropriate value to be able to find the new library.

However whenever I try, I found that the "Source Trees" tab is missing from my XCode preferences pane. Does anybody have any idea why this might be? It feels very strange. Should I try downloading the program again?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:51:59.443

在 Xcode 4 和 Xcode 5 的首选项窗格下，您可以转到“位置”选项卡，然后从该选项卡上的分段控件中选择“源树”选项。

此外，如果您想为单个项目添加未共享的内容，您可以选择您的项目，然后选择“构建设置”选项卡并`header search`在顶部的过滤器/搜索框中搜索以找到项目的“标题搜索路径”环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-29T14:09:31.747

它接缝`Source Trees`被重命名为`Custom Paths`

```
Xcode -> Preferences... -> Locations -> Custom Paths 
```

[![在此处输入图像描述](../Images/4ab79f437e0ceef25d705299ec00d942.png)](https://i.stack.imgur.com/nDhC9.png)

# jquery - 使用 JQuery Sorter 插件对表中的图像和超链接列进行排序

> ID：13014892
> 
> 赞同：1
> 
> 时间：2012-10-22T15:41:26.777
> 
> 标签：jquery, tablesorter

我有一个包含 3 列的表，第一列包含服务名称，它是一个超链接，第二列包含一个状态图标，最后一列再次是日志文件的图像，它又是一个超链接..

我想按作为超链接的第一列进行排序，因此应该对超链接的文本以及第二列进行排序，第二列是基于下面给出的状态权重的状态图标：

```
<table border="0" cellspacing="0" cellpadding="3" class="services" width=100%>
    <thead>
        <tr>
        <th align="left">Service Name</th>
        <th align="left">Status</th>
        <th align="left">Log</th>
    </thead>
    <tbody>
    <tr>
        <td><a href="">Service 1</a></td>
        <td><img srd="running.png" /></td>
       <td><a href=""><img src="log.png" />Log1</a></td>
    </tr>
    <tr>
        <td><a href="">Service 2</a></td>
        <td><img srd="error.png" /></td>
       <td><a href=""><img src="log.png" />Log</a></td>
    </tr>
    <tr>
        <td><a href="">Service 3</a></td>
        <td><img srd="stopped.png" /></td>
       <td><a href=""><img src="log.png" />Log</a></td>
    </tr>      
    </tbody>
</table> 
```

现在我想分别对第一列和第二列进行排序，即服务名称和状态。由于第一列包含链接和第二张图片，我想对它们进行排序。

我正在使用的代码在下面，它似乎不起作用..

```
jQuery(document).ready(function() { 

    jQuery(".services").tablesorter({

        // pass the headers argument and assing a object 
        headers: { 
            // assign the third column (we start counting zero) 
            2: { sorter: false }
        },
        textExtraction: extractValue
    });

     function extractValue(node){
         var cell = node.childNodes[0];
         console.log(cell.innerHTML);
         return cell.innerHTML;
     } 
}); 
```

任何帮助将不胜感激。注意：我想按他们的状态对状态进行排序，例如他们的权重状态如下：

```
running =>1
stopped =>2
error   =>3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:06:41.357

看起来您需要结合使用专门的解析器和 textExtraction。查看这个使用以下代码的[演示：](http://jsfiddle.net/Mottie/eY8uH/276/)

```
// add parser through the tablesorter addParser method 
// running =>1 stopped =>2 error =>3
$.tablesorter.addParser({
    // set a unique id 
    id: 'status',
    is: function(s) {
        // return false so this parser is not auto detected 
        return false;
    },
    format: function(s) {
        // format your data for normalization 
        return s.toLowerCase()
            .replace(/running.png/, 1)
            .replace(/stopped.png/, 2)
            .replace(/error.png/, 3);
    },
    // set type, either numeric or text 
    type: 'numeric'
});

$('table').tablesorter({

    headers: {
        1: { sorter: 'status' }
    },

    textExtraction: function(node) {
        var $n = $(node).children();
        return ($n[0].nodeName === "IMG") ? $n.attr('src') : $n.text();    
    }

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T13:06:36.383

我知道这可能有点快和肮脏，但我有一个生成的页面服务器端。检查例如 **（如果 field('reg') = 1，则显示 ok.png，如果不显示 not_ok.png）**

所以我按图像写数字，然后按数字排序。我使用一种样式将数字设为 1px，因此它不会显示。

css：.mini{大小：1px}`

html:

```
<td><img src="img/ok.png" alt="ok" /><span class="mini">1</span></td>
<td><img src="img/not_ok.png" alt="ok" /><span class="mini">0</span></td> 
```

排序没问题，我不必摆弄 JS。您可以使用任何数字进行排序。

# eclipse - Unresolved __builtin_ia32_stmxcsr

> ID：13014898
> 
> 赞同：1
> 
> 时间：2012-10-22T15:41:43.560
> 
> 标签：eclipse, gcc, intel, sse, nvidia

I have inherited code, trying to compile with gcc on Linux.

what library am I looking for that has __builtin_ia32_stmxcsr ?

apologies -- i was too fast to submit; running gcc inside of Nvidia Eclipse. actual error message is "Functuion . . . could not be resolved" so i jumped the conclusion i needed to reference some lib. As the offending lines hav a :#if defined(**SSE**) I take it to mean that the -msse2 switch is present although i cannot seem to find a copyh of the compile command line. [just learning this Eclipse tool -- very new!]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:54:18.890

You don't need to link with anything - the "builtin" in the name is a clue that it's a gcc built-in (intrinsic) compiler function.

However you do need to be compiling for an x86 target with SSE enabled for this to be recognised, e.g. `gcc -msse2 ...`.

Note that you can use the `_mm_getcsr` intrinsic from `<xmmintrin.h>` instead of `__builtin_ia32_stmxcsr` - this would be a little more portable.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:42:54.270

This is a bug in eclipses indexer with gcc's `__builtin*` functions. The bug report is at [https://bugs.eclipse.org/bugs/show_bug.cgi?id=352537](https://bugs.eclipse.org/bugs/show_bug.cgi?id=352537)

The problem is that even the glibc/gcc libraries themselves use these `__builtin*` functions, so eclipse complains about a faulty `xmmintrin.h` etc., which is of course nonsense.

There is a workaround given in the bug report, you can add the function prototypes as user defined macros for the indexer, but of course this becomes tedious if there are a few more and some type checking abilities are lost.

# c# - 如何更改 Exchange 2010 中的 MAPI MessageClass？

> ID：13014900
> 
> 赞同：4
> 
> 时间：2012-10-22T15:41:53.990
> 
> 标签：c#, mapi, exchange-server-2010

当传入的邮件具有特定的标头集时，我试图让 Exchange 2010 将传入邮件的 MessageClass (PR_MESSAGE_CLASS) 更改为我的自定义表单 (IPM.Note.MyCustom) 的 MessageClass。( `X-MyCustomHeader: Yes`)

我已经看到一些有关设置`Content-Class:`Exchange 将用于设置 MessageClass 的另一个 MIME 标头 ( ) 的信息，但它似乎对我不起作用。（我见过使用`Content-Class: MyCustom`and的例子`Content-Class: urn:content-class:custom.MyCustom`）

我什至研究过用 C# 编写一个传输代理，我确实`MapiMessageClass`在类上找到了一个属性`EmailMessage`，但它是只读的。我还查看了在 TNEF 部分中添加了 MAPI 属性，但如果不存在，Exchange API 不提供创建 TNEF 部分的方法。（大多数来自 Internet 的邮件都没有。）

必须有办法做到这一点。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:05:15.550

我们使用 Outlook Reemption：[http](http://www.dimastr.com/redemption/rdo/RDOMail.htm) ://www.dimastr.com/redemption/rdo/RDOMail.htm RDOMail 的 MessageClass 属性是读/写。Redemption 只是包装了 Extended MAPI，因此如果您不想使用 3rd 方库，则可以使用本机代码来完成。

# eclipse-plugin - 修改eclipse代码并创建功能补丁

> ID：13014902
> 
> 赞同：0
> 
> 时间：2012-10-22T15:41:56.790
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在构建一个 Eclipse rcp 应用程序。对于资源的拖放功能，我需要额外的验证。Eclipse 不建议对 ResourceDropAdapterAssistant 进行子类化。所以我修改了 org.eclipse.ui.navigator.resources 包中的 ResourceDropAdapterAssistant 的代码。

现在把这个功能放回我的日食的最好方法是什么？我已经通过这个链接。[http://eclipsesource.com/blogs/2012/07/30/patching-your-own-eclipse-ide/](http://eclipsesource.com/blogs/2012/07/30/patching-your-own-eclipse-ide/)

它帮助我创建了一个功能补丁。但是我在创建功能补丁时很清楚我应该只包含修改后的类还是插件下的所有类和包？

问候， 普里扬克·塔卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:52:00.980

它应该只复制修改后的 java 文件的 .class 文件。然而，我已经创建了几个功能补丁，只是发现包含所有 .class 文件更容易且更不容易出错。所以，这就是我建议做的事情。

请记住，默认情况下，功能补丁仅适用于已发布功能的一个版本。但是，您可以修改创建的 p2 元数据以扩大范围。有关更多信息，请参阅这些出色的博客文章：

[http://aniefer.blogspot.com/2009/06/patching-features-with-p2.html](http://aniefer.blogspot.com/2009/06/patching-features-with-p2.html)

[http://aniefer.blogspot.com/2009/06/patching-features-part-2.html](http://aniefer.blogspot.com/2009/06/patching-features-part-2.html)

# java - SimpleJpaRepository 不修改持久化实体

> ID：13014910
> 
> 赞同：1
> 
> 时间：2012-10-22T15:42:18.840
> 
> 标签：java, spring, hibernate, jpa

当我用它持久化一个实体时，`SimpleJpaRepository#save()`它不会修改它。例如，它不会设置实体的新 id。

除此之外，一切正常。该实体正在被持久化并被赋予一个 id。如果我从数据库中读取它，我可以看到 id。这是正常行为吗？我知道#save 方法返回持久化的实体，但我更希望它修改给定的实体。有没有办法配置这个？

谢谢

- 编辑

让我们假设这就是我所做的：

```
User user = new User();
// do something with user

userRepository.save(user); 
```

然后`user`保持不变。对象*已*写入数据库，但用户未成为托管对象。也`saveAndFlush(user)`不会导致不同的行为。我能做的是`user = userRepository.save(user)`。在这种情况下，用户成为托管实例。但是从 Hibernate 开始，我习惯于只保存对象，我提交的对象成为托管对象。有没有办法用 JPA 归档这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:04:12.193

请检查`@Id`实体中的配置。请确保您已正确定义属性`@GeneratedValue`。`Id`该属性在区分`insert`和`update`操作中起着关键作用。

# caching - 如何让我的受密码保护的目录在每次访问时提示用户登录？

> ID：13014913
> 
> 赞同：1
> 
> 时间：2012-10-22T15:42:30.027
> 
> 标签：caching, password-protection

我已通过托管服务器的控制面板对目录启用密码保护。它工作正常。但是，问题是用户的浏览器正在缓存他们的登录信息，因此如果他们离开页面然后返回密码保护页面 - 他们不会被提示再次登录。

我一直在阅读有关防止浏览器缓存的方法，并尝试了 META 标记选项（编译指示、缓存控制、过期），但这并不完全有效。它仅在用户完全关闭浏览器然后再次打开浏览器时才有效。我希望每次用户访问页面时都打开登录提示（有点像访问网络邮件页面）。

我很好奇是否有某种编码可以帮助解决这个问题。我的页面只是使用 css 和 html - 我熟悉的仅有的 2 种编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:28:13.293

使用 PHP 进行基本身份验证：

登录：

```
<?php session_start();$_SESSION=array();session_destroy(); ?>
<form method="POST" action="yoursite.php">
Username: <input name="username"><br>
Password: <input name="password" type="password"><br>
<button type="submit">Submit</button>
</form> 
```

您的网站：

```
<?php
session_start();
if(isset($_POST['username'])) {
  $username = trim($_POST['username']);
  $userpw = trim($_POST['password']);
  //here you have to check if the credentials are correct
    $user_may_see_content = false;
  //
  if(user_may_see_content) {
   $_SESSION['mayHaveRequest']=1;
   //now go to page

  } else {
   header("Location: <link_to_loginsite>");exit();
  }

}

//if user may see page
if(isset($_SESSION['mayHaveRequest']) && $_SESSION['mayHaveRequest']==1): ?>
$_SESSION['mayHaveRequest']=0;
?>
<!-- SECRET HTML CODE FOR AUTHENTICATED USERS -->

<?php else: 
header("Location: <link_to_loginsite>");exit();
endif;
?> 
```

这只是给你一个例子。

希望有帮助。

# android - 自定义 Sherlock 操作栏

> ID：13014914
> 
> 赞同：2
> 
> 时间：2012-10-22T15:42:36.260
> 
> 标签：android, android-layout, android-widget

请帮我解决这个问题。我正在尝试自定义操作栏 sherlock。请看我的图片： [图片](http://imageshack.us/a/img26/2416/indicatorl.png)（对不起，因为我没有足够的声誉上传图片）

我的问题 ：

1.  如何更改此图像上的图标（红色部分）。

2.  或者你知道它叫什么名字吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:29:48.667

把它放到你的主题中怎么样（values/themes.xml）：

```
<style name="Theme.MyTheme" parent="@style/Theme.Sherlock">
    <item name="actionOverflowButtonStyle">@style/Widget.MyOverflow</item>
</style> 
```

这是 v11 的主题（values-v11/themes.xml）

```
<style name="Theme.MyTheme" parent="@style/Theme.Sherlock">
    <item name="android:actionOverflowButtonStyle">@style/Widget.MyOverflow</item>
</style> 
```

最后是 values/styles.xml：

```
<style name="Widget.MyOverflow" parent="@style/Widget.Sherlock.ActionButton.Overflow">
        <item name="android:src">@drawable/some_other_drawable</item>
</style> 
```

查看 ActionBarSherlock 项目中的文件 values/abs_themes.xml*和 values/* abs_styles.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:20:49.953

我猜你不能改变这个图标，除非你修改 ActionBarSherlock。那是动作溢出菜单。

从文档中：

“默认情况下，系统会将所有项目放在操作溢出中，用户可以使用操作栏右侧的操作溢出图标（或按设备菜单按钮，如果可用）来显示它。启用快速访问重要的动作，你可以通过在相应的元素中添加 android:showAsAction="ifRoom" 来促进一些项目出现在动作栏中"

# python - 如何使用 TKinter 在 Python 中创建的计算器上进行数学运算？

> ID：13014915
> 
> 赞同：0
> 
> 时间：2012-10-22T15:42:36.713
> 
> 标签：python, tkinter, calculator

这是我的计算器代码。我不知道如何使 + - / * 执行它们的功能......我在想我的 Equals 函数中的 If 语句？

```
from Tkinter import*

calculator = Tk()
calculator.title('Calcualtor')
calculator.geometry('300x325')

screen = Frame(calculator, bd=2, width=250, height=25, relief=SUNKEN)
buttons = Frame(calculator, bd=2, width=250, height=200)
screen.grid(column=0, row=0, padx=25, pady=25)
buttons.grid(column=0, row=1, padx=25)

def appear(x):
    return lambda: results.insert(END, x)

def Zero():
    results.insert(END, "0")
    return

def Math():
    number= results.get()
    results.delete(0, END)
    number2=results.get()
    return

def Equals():

numbers=["7", "4", "1", "8", "5", "2", "9", "6", "3"]
for index in range(9):
    n=numbers[index]
    Button(buttons, bg="White", text=n, width=5, height=2, command=appear(n)).grid(padx=5, pady=5, row=index%3, column=index/3) 

zero= Button(buttons, bg="White", text="0", width=5, height=2, command=Zero)
zero.grid(padx=5, pady=5, column=1, row=3)

functions=["-", "+", "*", "/"]
for index in range(4):
    f=functions[index]
    Button(buttons, bg="White", text=f, width=5, height=2, command=Math).grid(padx=5, pady=5, row=index%4, column=3) 

equals= Button(buttons, bg="White", text="=", width=5, height=2, command=Equals)
equals.grid(ipadx=10, pady=5, row=5, column=1)

numbers = StringVar()
results = Entry(screen, textvariable=numbers, width=30)
results.pack()

calculator.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:25:11.250

最简单的解决方案是使用`eval()`并让 python 为您完成所有工作。只需像处理数字一样将 +-/* 添加到文本条目，然后使用等号按钮评估文本条目中的文本。

进行以下更改：

```
def Equals():
    try:
        result = eval(results.get())
    except:
        result = "Invalid sum"
    results.delete(0, END)
    results.insert(0, result)

....

Button(buttons, bg="White", text=f, width=5, height=2, command=appear(f)).grid(padx=5, pady=5, row=index%4, column=3) 
```

您还应该禁用文本输入，以便恶意用户无法执行代码。

# batch-file - Windows递归删除文件夹和所有内容

> ID：13014917
> 
> 赞同：1
> 
> 时间：2012-10-22T15:42:44.610
> 
> 标签：batch-file

我正在尝试找到一种方法来删除特定文件夹名称并在 Windows 中删除其所有内容。所以我的 D: 驱动器有 100 个文件夹，每个文件夹内都有名为 folder1、folder2、folder3 等的子文件夹。我希望能够在 D: 的根目录运行一个命令，它将搜索每 100 个文件夹和删除说 folder3 和 folder9 及其所有内容。

```
RD /s /q "folder1" 
```

上面的命令不喜欢搜索子目录。

无论如何使用 CMD 还是我需要一个 .vbs 脚本或其他东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:09:02.997

您可以使用该`FOR`命令从给定位置浏览子文件夹列表并在每个子文件夹上运行命令。例如：

```
for /F "delims=\" %%I in ('dir /ad /b <someFolder>') DO (
    cd "<someFolder>\%%I"
    rd /S /Q "folder1"
    rd /S /Q "folder3"
) 
```

它将获取*someFolder*中的文件夹列表，并从每个子文件夹中删除名为“folder1”和“folder3”的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:33:22.130

根据 OPs 的评论，我相信以下方法可以解决问题：

```
@echo off
for /f "delims=" %%F in (
  'dir /b /s /ad "d:\My files"^|findstr /ie /c:"\folder1" /c:"\folder9"'
) do if exist "%%F" rd /s /q "%%F" 
```

# javascript - 我怎么知道它在 JS 中的有效性？

> ID：13014923
> 
> 赞同：0
> 
> 时间：2012-10-22T15:43:01.520
> 
> 标签：javascript

我正在使用带有 JavaScript 的 LiveCycle LC 设计器开发 Adob​​e 交互式表单。

// 确定必填字段（可能是自由文本字段、下拉菜单、复选框，我的意思是有 3 种可能性）并将它们设为黄色

```
var myArrayYellow = new Array(); 
var yellowFields;  
yellowFields = my_required_fields_list_string.rawValue  
myArrayYellow = yellowFields.split(" "); 
for (var i = 0; i < myArrayYellow.length; i++)     { 
```

**===> 在这一点上，我想检查 [i] 字段是否存在，它是否是一个有效的字段/objetc？bcz，我有机会在 my_required_fields_list_string 中获得不存在的字段，因此在为它们分配黄色之前，我想检查它们在表单上的有效性吗？** **请。让我知道这个的JS** //如果它是真的/找到了，那么只分配黄色如下

```
 xfa.resolveNode("MY_ADOBE_FORM.." + myArrayYellow        [i]).ui.oneOfChild.border.fill.color.value = "255,255,254"
}; 
```

出于其他目的，一些专家给了我一个如下的 JS，我尝试按照我的上述要求对其进行调整，但它不起作用

```
function findNodes(vNode){
    if (vNode.className === "field"){
        if (vNode.isPropertySpecified("name") === true){
            var myStateName = new RegExp(vNode.name);
            var returnValue = GFL.search(myStateName);
            if (returnValue != -1) {
                this.ui.oneOfChild.border.fill.color.value = "192,192,192";
                this.access = "readOnly";
            } else {
                this.ui.oneOfChild.border.fill.color.value = "255,255,255"; //whatever colour is open access
                this.access = "open";
            }
        }
    }
    for (var a=0;a<vNode.nodes.length;a++) {
        findNodes(vNode.nodes.item(a));
    }
}
findNodes(xfa.form); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:45:37.990

如果我理解正确，您将尝试在对数组执行操作之前检查数组中的所有值是否有效。只需检查并确保它们不为空。

**编辑：您可能也应该检查空字符串。**

```
for (var i = 0; i < myArrayYellow.length; i++)     {
    if (!(myArrayYellow[i] == null || myArrayYellow[i] == "")){
        //Do Stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:50:07.383

如果我理解您的问题，您需要检查是否`xfa.resolveNode`返回某些东西并从那里处理它。

```
var node;
if ( (node=xfa.resolveNode("MY_ADOBE_FORM.." + myArrayYellow[i]) )!==null){
    node.ui.oneOfChild.border.fill.color.value = "255,255,254"
} 
```

# c++ - 编译 cyanoboot：没有规则来制作目标

> ID：13014924
> 
> 赞同：0
> 
> 时间：2012-10-22T15:43:04.193
> 
> 标签：c++, cygwin, u-boot

我正在尝试编译在此处找到的 cyanoboot[项目](https://github.com/CMNookTablet/acclaim_cyanoboot)。我没有 C++ 编译经验，但我按照自述文件进行操作，似乎遇到了障碍。我已经提取了下载的源文件并在 cygwin 中导航到它们，然后运行命令：

```
make clean 
```

看起来很成功。之后我跑

```
make omap4430sdp_config 
```

这似乎也可以工作，但不会创建任何文件（不确定是否应该这样做？）。然后，当我运行最终的 make 命令时，我得到了错误：

```
makefile:98: /cygdrive/c/cyanoboot/config.mk: No such file or directory 
make: *** No rule to make target `/cygdrive/c/cyanoboot/config.mk'.  Stop. 
```

这个 config.mk 文件确实存在，你可以在上面的 git hub 链接中看到它，我没有更改任何文件。我已经为此苦苦挣扎了几个小时，但我无法弄清楚。任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:11:50.050

这个包对我来说是新的。但是，支持多个处理器，例如 i386/m68k/arm。因此，您可能需要正确设置环境，例如 ARCH=arm 和 CROSS_COMPILE=arm-linux-gnueabi-

要检查 make config 是否有效，您可以查找修改过的文件或新文件。自己做，在这里你看到一个链接已经添加： ~/cmn/CMNookTablet-acclaim_cyanoboot-02c6247$ find 。| xargs ls -alt | 更多 lrwxrwxrwx 1 joe joe 7 Oct 24 10:03 ./include/asm -> asm-arm ...

我用我的工具链尝试了你的构建，得到了这个 FWIW

... arm-linux-gnueabi-gcc -g -Os -fno-strict-aliasing -fno-common -ffixed-r8 -msoft-float -D_ *KERNEL* _ -DTEXT_BASE=0x80e80000 -I/home/joe/cmn/CMNookTablet -acclaim_cyanoboot-02c6247/include -fno-builtin -ffreestanding -nostdinc -isystem /usr/lib/gcc/arm-linux-gnueabi/4.6/include -pipe -DCONFIG_ARM -D_ *ARM* _ -march=armv7-a -mabi=apcs -gnu -Wall -Wstrict-prototypes -c -o hal_services.o hal_services.c

{标准输入}：汇编器消息：{标准输入}：276：错误：所选处理器不支持 Thumb 模式`smc #0'

make[1]: *** [hal_services.o] 错误 1

make[1]: 离开目录`/home/joe/cmn/CMNookTablet-acclaim_cyanoboot-02c6247/board/omap4430sdp'

制作：*** [board/omap4430sdp/libomap4430sdp.a] 错误 2

# javascript - Raphael 对象属性“x”和“y”是什么意思？

> ID：13014927
> 
> 赞同：1
> 
> 时间：2012-10-22T15:43:11.867
> 
> 标签：javascript, svg, raphael

我预计这将是 100% 的明智之举，但事实证明，我无法弄清楚使用 Raphael.js 创建和操作的 svg的*x*和*y属性是什么意思。*我假设它们是对象左上角相对于画布的坐标，但现在我不太确定。

在创建`var paper = new Raphael(container,width,height)`画布`attr`（`object.attr("x")`对象，然后再次检索 x 和 y 的值，这些值不再反映我的对象的左上角相对于画布的位置。

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:51:55.460

我担心@afaf12 的回答得意洋洋地走了一半。他绝对正确，转换逻辑发生在给定元素的基本属性之后并且不会影响它们，但是在应用转换之后当然可以检索该元素的 x 和 y。您需要使用[getBBox](http://raphaeljs.com/reference.html#Element.getBBox)方法，如下所示：

```
var bbox = elem.getBBox();
console.log("Transformed coordinates of element are %s,%s", bbox.x, bbox.y ); 
```

请注意，这涉及到一些技巧——这会返回元素的边界框，它通常是元素占用的空间的超集——因此不能保证返回的点会在元素中。

如果您使用路径，则会出现另一种选择——路径。[getPointAtLength](http://raphaeljs.com/reference.html#Element.getPointAtLength)也适用于转换后的坐标，因此您可以通过调用获取路径开头的 x,y 偏移量

```
var coord = elem.getPointAtLength(0);
console.log("Transformed coordinates of path are %s,%s", coord.x, coord.y ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:00:52.903

旋转是一种变换，它不会改变对象的 x 和 y。 [http://raphaeljs.com/reference.html#Element.transform](http://raphaeljs.com/reference.html#Element.transform)

# jquery - 通过选择更新变量

> ID：13014933
> 
> 赞同：2
> 
> 时间：2012-10-22T15:43:43.257
> 
> 标签：jquery, jquery-mobile, knockout.js

我对 Knockoutjs 非常了解，我正在尝试对输入选择执行服务调用。

我的对象看起来像这样：

```
var teamViewModel = {
    teams: ko.observableArray([]),
    clearTeams: function(){
        this.teams.removeAll();
    },
    addTeam: function (id, name, isChecked) {
        t = new team(id, name, isChecked);
        this.teams.push(t);
    }
}; 
```

通过调用以下命令填充选择框：

```
function GetAvailableTeams() {

    var jqxhr =
    $.getJSON('http://localhost/Service.svc/GetTeamsAll',
    function (data) {
        teamViewModel.clearTeams();
        $.each(data.GetTeamsAllResult, 
        function (key, val) {
            teamViewModel.addTeam(val.TeamId, val.TeamName, true);
        });
        ko.applyBindings(teamViewModel, document.getElementById("teamNameLabel"));
    })
} 
```

该函数在页面加载时调用并像这样引用：

```
<select id="teamNameLabel" date-theme="f" data-bind="options: teams,  optionsText: 'name', value: 'id'"></select> 
```

选择 select 语句上的选项时，如何更新全局变量 TeamId？

编辑：

```
function GetAllUsersByTeam(){

var url = 'http://localhost/Service.svc/GetUsersByTeam/'+TeamId;

        var jqxhr =
        $.getJSON(url,
        function (data) 
        { 
            colleagueViewModel.clearColleagues();
            $.each(data.GetUsersByTeamResult, function (key, val) {
                colleagueViewModel.addColleague(val.FirstName, val.LastName, val.EmailAddress, val.PhoneNumber, val.LocationName, val.CapabilityId, val.CoeId);
            });
            ko.applyBindings(colleagueViewModel, document.getElementById("colleaguesListView"));
        })
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:03:40.803

无需使用全局变量。您可以在视图模型中添加一个`selectedTeam`observable，它代表所选选项：

```
var teamViewModel = {
    teams: ko.observableArray([]),
    selectedTeam: ko.observable(),
    // ...
} 
```

然后，[将 options' 绑定](http://knockoutjs.com/documentation/options-binding.html) `value`到`selectedTeam`，即：

```
<select data-bind="options: teams,  optionsText: 'name', value: selectedTeam">
</select> 
```

最后，要访问`id`所选选项的 ，只需使用`teamViewModel.selectedTeam().id`。

这是一个**[演示](http://jsfiddle.net/7a44n/)**。

# android - 新的 Facebook API 3.0。和 ActionBarSherlock 的兼容性

> ID：13014938
> 
> 赞同：15
> 
> 时间：2012-10-22T15:43:55.327
> 
> 标签：android, facebook, actionbarsherlock, facebook-android-sdk

我正在阅读 facebook Android API 3.0 文档，但我不明白 session 与后台活动有什么关系。在所有示例中，我都应该扩展“FacebookFragment”。好吧，如果我的整个应用程序没有扩展“SherlockFragment”那就太好了，所以我不认为扩展 FacebookFragment 是一种选择。

如果我使用 SessionLoginExample 中的代码，并将我的 AppID 放在与 facebook 相同的字符串中，我会得到：

**错误**

```
10-22 17:04:26.464: E/AndroidRuntime(5491): FATAL EXCEPTION: main
10-22 17:04:26.464: E/AndroidRuntime(5491): java.lang.RuntimeException: Unable to start activity ComponentInfo{nl.specsavers.moodspecs/nl.specsavers.moodspecs.LauncherActivity}: java.lang.NullPointerException: Argument applicationId cannot be null 
```

我正在尝试设置是否安装了应用程序以及会话是否存在的初始检查。

```
 Settings.addLoggingBehavior(LoggingBehaviors.INCLUDE_ACCESS_TOKENS);

    Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
        }
        if (session == null) {
            session = new Session(this);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        }

    } 
```

我需要能够以某种方式将我的 App ID 放在实际上可以的地方，但我找不到放置它的位置。

我需要知道在使用 SherlockFragment 时是否可以避免扩展 FacebookFragment。

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-22T19:51:24.743

FacebookFragment 不是公开的，也不打算供应用程序使用。

不过，这些示例确实主要使用 FacebookActivity，而且是的——您**不需要**扩展 FacebookActivity。正如您所提到的，SessionLoginSample 演示了这一点，如果您不使用 FacebookActivity，您应该处理 Session 序列化并覆盖/转发 onActivityResult，如图所示。

也就是说，听起来您遇到的主要问题是设置 applicationId。您可以在代码或元数据中设置 applicationId。

## 在代码中：

要在代码中设置它，请定义一个包含您的应用程序 ID 的字符串常量 MY_APP_ID 并替换以下行：

```
session = new Session(this); 
```

和：

```
session = new Session.Builder(this).setApplicationId(MY_APP_ID).build(); 
```

## 在元数据中：

要将其设置在元数据中，请将以下内容添加到您的 AndroidManifest.xml 应用程序标签内但任何活动标签外：

```
<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/> 
```

然后，在 values/strings.xml 中，为 app_id 添加一个具有您的应用 ID 的值：

```
<string name="app_id">1234567890</string> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-22T16:46:11.910

您不需要从任何东西继承，如果您不通过代码提供 app_id，则必须在应用程序元数据（和 strings.xml）中指定它。请参阅[https://developers.facebook.com/docs/reference/android/3.0/Session#APPLICATION_ID_PROPERTY](https://developers.facebook.com/docs/reference/android/3.0/Session#APPLICATION_ID_PROPERTY)

在您的 AndroidManifest.xml 中，您需要添加：

```
<application android:label="@string/app_name" ...>
  ... other activity stuff here ...
  <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/>
</application> 
```

然后将 app_id 作为字符串添加到您的 string.xml 中。

# ios6 - 使用 segues 和故事板，如果你弹出一个 UIViewController 它不会被破坏

> ID：13014940
> 
> 赞同：2
> 
> 时间：2012-10-22T15:43:58.213
> 
> 标签：ios6, uistoryboard, xcode4.5, uistoryboardsegue

我一直在我的应用程序中收到内存警告，这引起了我的注意。我有一个导航控制器及其根视图控制器。从这个根视图控制器，我通过调用将另一个视图控制器推送到导航堆栈上：

```
[self performSegueWithIdentifier:sender:] 
```

segue 是从根视图控制器到新视图控制器和模式 PUSH。

然后我删除这个视图控制器并通过调用弹回根视图控制器

```
[self.navigationController popViewControllerAnimated:YES]; 
```

问题是，如果我推动并弹出视图控制器大约 20 次，我就会开始收到内存警告。

didRecieveMemoryWarning 在视图控制器上在单个帧中被调用了大约 20 次，这表示每个弹出的视图控制器仍在挂起。

然后该应用程序最终崩溃。

我在任何地方都没有存储对推送视图控制器的引用。

我正在使用 ios6，所以我知道 viewDidUnload() 不会被调用。

当我收到内存警告时，我将删除所有缓存的图像，但理想情况下销毁旧的弹出视图控制器是前进的方向，但我不知道如何使用情节提要来做到这一点。

如果我从代码中手动调用 pushViewController，我可以维护一个对象引用以便每次重复使用，这样我就不会继续创建新的视图控制器来推送，但这与故事板相距甚远。

非常感谢您对此事的任何帮助。

谢谢，斯图尔特。

# ruby-on-rails - 如何覆盖所有资源，包括模型、控制器和视图

> ID：13014941
> 
> 赞同：0
> 
> 时间：2012-10-22T15:44:00.830
> 
> 标签：ruby-on-rails, spree

我正在使用带有 rails 3.2 的 spree cms 并成功配置到我的 rails 应用程序中。但是我想覆盖所有 spree 代码，包括模型、控制器和视图，这意味着将 spree gem 冻结到我的 app/vendor 目录中，以便我可以根据我的进行任何更改需要并且此更改应在启动服务器后应用于我的应用程序。我正在使用此命令但不适用于我

```
 spree install --path vendor 
```

有没有更好的建议请指教。

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-12T05:31:40.827

此链接为您提供自定义视图的确切答案

[http://guides.spreecommerce.org/developer/view.html](http://guides.spreecommerce.org/developer/view.html)

对于自定义模型，在 app/models/spree/user_decorator.rb 中为您的模型（例如：USER）创建一个装饰器文件

```
Spree::User.class_eval do
   Spree::PermittedAttributes.user_attributes << :your_custom_attribute

  def yourcustomfunction 
     # Your logic here
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-03T13:58:03.513

我认为下面提供的链接可能对您有所帮助.. :)

[http://serenetechnologies.ca/spree-e-commerce-customizations/](http://serenetechnologies.ca/spree-e-commerce-customizations/)

[http://guides.spreecommerce.com/developer/logic.html](http://guides.spreecommerce.com/developer/logic.html)

# android - Android在onResume中保存了活动状态？

> ID：13014943
> 
> 赞同：1
> 
> 时间：2012-10-22T15:44:07.220
> 
> 标签：android

如何使用 system.currentTimeMillis 记录秒表的开始时间？当您的`activity` `onResume()`or`onStart()`被调用时，我如何更新手表以显示从保存时间开始经过的时间？谢谢。到目前为止我尝试过的没有`onResume()`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_LEFT_ICON);
    setContentView(R.layout.stopwatch);
    getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.clock32);

    // initializes controls
    initControls();

    // sets format for chronometer
    chronometer.setText( "00:00:00" );

}

private void initControls(){

    // initializes buttons & chronometer
    pause = ( Button ) findViewById ( R.id.btStopWatchPause );
    stop = ( Button ) findViewById ( R.id.btStopWatchStop );
    start = ( Button) findViewById ( R.id.btStopWatchStart );
    reset = ( Button ) findViewById ( R.id.btStopWatchReset );
    chronometer = ( Chronometer ) findViewById ( R.id.chronometer );

    // sets listeners for buttons and chronometer
    pause.setOnClickListener(this);
    stop.setOnClickListener(this);
    start.setOnClickListener(this);
    reset.setOnClickListener(this);
    chronometer.setOnChronometerTickListener(this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub

    switch( v.getId() )
    {
    case R.id.btStopWatchStart:
        chronometer.setBase(SystemClock.elapsedRealtime() + timeWhenStopped);
        chronometer.start();
        break;
    case R.id.btStopWatchStop:
        chronometer.stop();
        break;
    case R.id.btStopWatchReset:
        chronometer.setBase(SystemClock.elapsedRealtime());
        break;
    case R.id.btStopWatchPause:
        timeWhenStopped = chronometer.getBase() - SystemClock.elapsedRealtime();
        chronometer.stop();
        break;

    } // end of switch statement

}

public void onChronometerTick(Chronometer c) {
    // TODO Auto-generated method stub

    CharSequence text = c.getText();
    if ( text.length()  == 5 ) {
        c.setText( "00:" + text );
    } else if ( text.length() == 7 ) {
        c.setText( "0" + text );
    }

} // end of onChronometerTick method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:53:03.657

```
 @Override
    protected void onResume() {
    super.onResume();
    TimeForActivity.StartTimer(AccountingTab.this);

    public class TimeForActivity implements Constants{
    public static void StartTimer(Context context, TextView aTvTime, Button aBtUserStatus, ProgressDialog aProgressDialog, String sessionID) {

        mHandler.removeCallbacks(mUpdateTimeTask);

        activity = context;
        tvTime = aTvTime;       
        btUserStatus = aBtUserStatus;

        tvTime.setText("");
        btUserStatus.setText(statusItems[userStatus - 1]);

        btUserStatus.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                showStatusDialog();
            }
        });
        progressDialog = aProgressDialog;       

        reStartTimer();
    }
    private static void reStartTimer() {

    if (pageConfig.getUserStatusTime() != null && StatusService.methodType != StatusService.GO_OUT) {

            if (mStartTime == null)
                mStartTime = pageConfig.getUserStatusTime() * 60 * 1000 - SystemClock.elapsedRealtime();
            //CommonHelper.showToastMsg(activity, Long.toString(SystemClock.elapsedRealtime()));
            //tvUserStatus.setText(Long.toString(SystemClock.uptimeMillis()) + " mStarTime: " + mStartTime);
            mHandler.removeCallbacks(mUpdateTimeTask);
            mHandler.postDelayed(mUpdateTimeTask, 100);
        }
    }

private static Runnable mUpdateTimeTask = new Runnable() {

        public void run() {

            try {
                final long start = mStartTime;          
                long millis = SystemClock.elapsedRealtime() + start;
                long seconds = (long) (millis / 1000);
                long hours =  seconds / 3600;
                seconds -= hours * 3600;
                long minutes = seconds / 60;
                seconds     = seconds % 60;

                tvTime.setText(CommonHelper.getTwoDigitTime(hours) +  ":" + CommonHelper.getTwoDigitTime(minutes)); 
                        //+ ":" + CommonHelper.getTwoDigitTime(seconds));
                //java.lang.System.out.println(tvTime.getText().toString());
                if (userStatus == StatusService.GO_OUT){
                   tvTime.setText("");
                   stopTimer();
                }
                if (StatusService.methodType != StatusService.GO_OUT)
                    mHandler.postAtTime(this, SystemClock.elapsedRealtime() + 60*1000);

            } catch (Exception e) {
                // TODO: handle exception
            }

        }
    };
    } 
```

# python - ipython上下箭头奇怪的行为

> ID：13014946
> 
> 赞同：6
> 
> 时间：2012-10-22T15:44:39.737
> 
> 标签：python, macos, ipython

在我安装 ipython 的过程中，我遇到了一个奇怪的问题，我无法使用向上和向下箭头可靠地浏览命令历史......很多时候它只是不起作用（按键时没有任何反应）。有时在命令末尾写普通字符也是行不通的。

我的系统：Mac OSX Lion

我已经安装了readline...

感谢您的帮助！大卫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T18:00:25.970

确保在ipython**之前**安装了 readline 。

`sudo pip uninstall ipython`

`sudo pip install readline ipython`

（我知道这个问题已经有几个月了，但供将来参考）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-09T18:41:01.327

我必须安装 readline`easy_install readline`并修复它。使用`pip install readline`对我不起作用，并且 ipython 给出了警告：

```
******************************************************************************
libedit detected - readline will not be well behaved, including but not limited to:
   * crashes on tab completion
   * incorrect history navigation
   * corrupting long-lines
   * failure to wrap or indent lines properly
It is highly recommended that you install readline, which is easy_installable:
     easy_install readline
Note that `pip install readline` generally DOES NOT WORK, because
it installs to site-packages, which come *after* lib-dynload in sys.path,
where readline is located.  It must be `easy_install readline`, or to a custom
location on your PYTHONPATH (even --user comes after lib-dyload).
****************************************************************************** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T07:47:04.197

在 iPython 和上下箭头访问历史的麻烦之后，浏览这篇文章，一个简单的解决方案（关闭“滚动锁定”）结果对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T19:46:07.723

这是 IPython 的一个有意的特性。如果您键入“abc”然后点击向上箭头，它将仅滚动以“abc”开头的行。如果您在滚动时点击左/右，它会触发相同的行为。当前行的全部内容被解释为您的搜索前缀，任何仅以 all 开头的行都将显示在进一步的向上/向下按键上。

您可以在`PYTHONSTARTUP`文件中更改此行为。我有以下几行：

```
import readline
# Prevent ctrl-p/ctrl-n/Up/Down from doing prefix searching 
readline.parse_and_bind('"\\C-p": previous-history')
readline.parse_and_bind('"\\C-n": next-history')
readline.parse_and_bind('"\\e[A": previous-history')
readline.parse_and_bind('"\\e[B": next-history') 
```

如果你好奇，[这里是](https://github.com/ipython/ipython/blob/058dda2a8cfc39eaa2541300f577af95f2f407e5/IPython/core/interactiveshell.py#L418-L431)我们覆盖的 IPython 源代码中的绑定。

不相关，但我也想覆盖 readline 的默认 ctrl-w：

```
# Ctrl-W behavior more like Vim
readline.parse_and_bind('"\\C-w": backward-kill-word') 
```

# java - 正则表达式匹配 C 风格的多行注释

> ID：13014947
> 
> 赞同：23
> 
> 时间：2012-10-22T15:44:48.057
> 
> 标签：java, regex, string

我有一个字符串，例如

```
String src = "How are things today /* this is comment *\*/ and is your code  /*\* this is another comment */ working?" 
```

我想从字符串中删除`/* this is comment *\*/` 和`/** this is another comment */`子`src`字符串。

我尝试使用正则表达式，但由于经验不足而失败。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2016-03-31T09:06:36.303

最好的*多行注释正则表达式*是一个展开的版本`(?s)/\*.*?\*/`，看起来像

```
String pat = "/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/"; 
```

请参阅[regex101.com 上的正则表达式演示和说明](https://regex101.com/r/dU5fO8/73)。

简而言之，

*   `/\*`- 匹配评论开始`/*`
*   `[^*]*\*+`- 匹配 0+ 个字符，而不是`*`后跟 1+ 个文字`*`
*   `(?:[^/*][^*]*\*+)*`- 0+ 序列：
    *   `[^/*][^*]*\*+`- 不是一个`/`或`*`（与 匹配`[^/*]`）后跟 0+ 个非星号字符 ( `[^*]*`) 后跟 1+ 个星号 ( `\*+`)
*   `/`- 关闭`/`

[David 的正则表达式](https://regex101.com/r/dU5fO8/2)需要*26 个步骤*才能在我的示例字符串中找到匹配项，而[我的正则表达式](https://regex101.com/r/KBZ5Y0/1)只需要*12 个步骤*。对于大量输入，David 的正则表达式可能会因堆栈溢出问题或类似问题而失败，因为`.*?`由于正则表达式引擎在每个位置执行的惰性模式扩展，惰性点匹配效率低下，而我的模式一次匹配线性文本块。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-22T15:46:48.943

尝试使用这个正则表达式（仅限单行注释）：

```
String src ="How are things today /* this is comment */ and is your code /* this is another comment */ working?";
String result=src.replaceAll("/\\*.*?\\*/","");//single line comments
System.out.println(result); 
```

**正则表达式解释：**

> 从字面上匹配字符“/”
> 
> 从字面上匹配字符“*”
> 
> “。” 匹配任何单个字符
> 
> “*？” 零到无限次之间，尽可能少，按需扩展（懒惰）
> 
> 从字面上匹配字符“*”
> 
> 从字面上匹配字符“/”

*或者，这里是通过添加(?s)*的单行和多行注释的正则表达式：

```
//note the added \n which wont work with previous regex
String src ="How are things today /* this\n is comment */ and is your code /* this is another comment */ working?";
String result=src.replaceAll("(?s)/\\*.*?\\*/","");
System.out.println(result); 
```

**参考：**

*   [https://www.regular-expressions.info/examplesprogrammer.html](https://www.regular-expressions.info/examplesprogrammer.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-21T06:21:33.550

试试这个：

```
(//[^\n]*$|/(?!\\)\*[\s\S]*?\*(?!\\)/) 
```

如果要排除“”中包含的部分，请使用：

```
(\"[^\"]*\"(?!\\))|(//[^\n]*$|/(?!\\)\*[\s\S]*?\*(?!\\)/) 
```

第一个捕获组标识所有“”部分，第二个捕获组为您提供评论（单行和多行）

如果需要解释，请将正则表达式复制到[regex101](http://regex101.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-09T23:43:31.957

无法直接解析 Java 源代码中的 C/C++ 样式注释。
带引号的字符串必须同时在同一个正则表达式中进行解析，
因为字符串可能嵌入`/*`或`//`，当它只是
字符串的一部分时，注释的开头。

*请注意，如果语言中可以使用原始字符串*构造，则需要考虑额外的正则表达式
。

实现这一壮举的正则表达式就是这个。
其中第 1 组包含***评论***，第 2 组包含***非评论***。
例如，如果您要删除评论，它将是：

寻找
`(/\*[^*]*\*+(?:[^/*][^*]*\*+)*/|//(?:[^\\]|\\(?:\r?\n)?)*?(?:\r?\n|$))|("[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|[\S\s][^/"'\\]*)`

代替
`$2`

* * *

弦：
`"(/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/|//(?:[^\\\\]|\\\\(?:\\r?\\n)?)*?(?:\\r?\\n|$))|(\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|[\\S\\s][^/\"'\\\\]*)"`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-22T15:59:44.230

```
System.out.println(src.replaceAll("\\/\\*.*?\\*\\/ ?", "")); 
```

你必须使用非贪婪量词？让正则表达式工作。我还添加了一个“？” 在正则表达式的末尾删除一个空格。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-10T22:07:59.510

试试这个对我有用的：

```
System.out.println(src.replaceAll("(\/\*.*?\*\/)+","")); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-11-04T06:23:33.057

这可能是多行注释的最佳方法

`System.out.println(text.replaceAll("\\/\\*[\\s\\S]*?\\*\\/", ""));`

# wso2 - 访问端点页面时出错

> ID：13014951
> 
> 赞同：0
> 
> 时间：2012-10-22T15:45:05.430
> 
> 标签：wso2, wso2esb, wso2carbon

我正在使用具有 ESB 和 AS 功能的 WSO2 Carbon 4.0.1，今天早上当我尝试访问端点页面时突然出现以下错误：

```
 TID[-1234] [WSO2 Carbon] [2012-10-22 10:33:57,106] ERROR {org.wso2.carbon.endpoint.ui.client.EndpointAdminClient} - Unable to access the registry instance for the ESB 
org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531) org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375) org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421) org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229) org.apache.axis2.client.OperationClient.execute(O aerationClient.java:165) 
org.wso2.carbon.endpoint.stub.types.EndpointAdminStub.getDynamicEndpoint(EndpointAdminStub.java:2333) org.wso2.carbon.endpoint.ui.client.EndpointAdminClient.getDynamicEndpoint(EndpointAdminClient.java:200) org.apache.jsp.endpoints.index_jsp._jspService(index_jsp.java:908) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161) org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36) org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90) org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111) 
org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:58) org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690) 
org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:599) org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:536) org.eclipse.equinox.http.servlet.internal.RequestDispatcherAdaptor.include(RequestDispatcherAdaptor.java:37) org.eclipse.equinox.http.helper.ContextPathServletAdaptor$RequestDispatcherAdaptor.include(ContextPathServletAdaptor.java:265) org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:966) org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:643) org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:637) sun.reflect.GeneratedMethodAccessor47.invoke(Unknown Source) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) java.lang.reflect.Method.invoke(Method.java:597) org.apache.tiles.jsp.context.JspUtil.doInclude(JspUtil.java:87) org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:88) org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:82) org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:465) org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:140) 
org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:117) org.apache.tiles.jsp.taglib.RenderTagSupport.execute(RenderTagSupport.java:171) org.apache.tiles.jsp.taglib.RoleSecurityTagSupport.doEndTag(RoleSecurityTagSupport.java:75) org.apache.tiles.jsp.taglib.ContainerTagSupport.doEndTag(ContainerTagSupport.java:80) org.apache.jsp.admin.layout.template_jsp._jspx_meth_tiles_insertAttribute_7(template_jsp.java:539) 
org.apache.jsp.admin.layout.template_jsp._jspService(template_jsp.java:290) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161) org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36) 
org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90) org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111) org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:58) org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690) org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477) org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402) 
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329) org.eclipse.equinox.http.servlet.internal.RequestDispatcherAdaptor.forward(RequestDispatcherAdaptor.java:30) org.eclipse.equinox.http.helper.ContextPathServletAdaptor$RequestDispatcherAdaptor.forward(ContextPathServletAdaptor.java:258) org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:198) 
org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:185) org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:419) org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:370) org.wso2.carbon.ui.action.ActionHelper.render(ActionHelper.java:52) org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:101) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36) org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90) 
org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111) org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67) javax.servlet.http.HttpServlet.service(HttpServlet.java:722) org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:58) org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61) org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:179) org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156) 
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:49) org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001) org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) 
org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653) java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) java.lang.Thread.run(Thread.java:662) 
```

我试图重新启动，我试图清理注册表。没有任何工作。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:57:10.013

看来这个问题已经在新版本中[修复了。](https://wso2.org/jira/browse/ESBJAVA-1036)

# java - 对 2 个数组列表进行排序的最佳方法？

> ID：13014952
> 
> 赞同：0
> 
> 时间：2012-10-22T15:45:06.570
> 
> 标签：java

我有 2 个数组列表。一个是包含生日的数组列表。另一个是名称的数组列表。

我正在使用按日期降序对日期数组列表进行排序

```
Collections.sort(birthdayList); 
```

我想让名称的数组列表按照与生日列表相同的顺序进行排序。

IE

未分类

```
bdaylist   namelist

1/20/1980 - Bob

3/15/1970 - Todd

8/25/1990 - Jeff 
```

变成

排序的

```
3/15/1970 - Todd

1/20/1980 - Bob

8/25/1990 - Jeff 
```

在 Java 中执行此操作的最有效方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T15:46:51.847

*   创建一个包含 2 个字段的 Person 类：姓名和生日。
*   将人员列在列表中
*   使用比较生日的自定义比较器进行排序

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T15:52:28.413

像这样创建一个类：

```
public class Person implements Comparable<Person> {

    private String name;

    private Date date;

    public Person(String name, Date date) {
        this.name = name;
        this.date = date;
    }

    public String getName() {
        return name;
    }

    public Date getDate() {
        return date;
    }

    @Override
    public int compareTo(Person o) {
        return this.date.compareTo(o.getDate());
    }
} 
```

然后你可以`Person`像这样对对象列表进行排序：

```
public static void main(String... args) {
    LinkedList<Person> persons = new LinkedList<Person>();
    persons.add(new Person("Name1", new Date())); //Specify different dates
    persons.add(new Person("Name2", new Date()));
    persons.add(new Person("Name3", new Date()));

    Collections.sort(persons);

    //Collections.sort(persons, Collections.reverseOrder()); //Reverse order
} 
```

而已。

或者另一种选择是使用`Comparator`：

```
Collections.sort(persons, new Comparator<Person>() {
    @Override
    public int compare(Person o1, Person o2) {
        return o1.getDate().compareTo(o2.getDate());
    }
}); 
```

相反的顺序：

```
Collections.sort(persons, Collections.reverseOrder(new Comparator<Person>() {
    @Override
    public int compare(Person o1, Person o2) {
        return o1.getDate().compareTo(o2.getDate());
    }
})); 
```

然后你不需要`Comparable<Person>`在你的 person 类中实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T15:46:16.637

不要对两个数组列表进行排序；对一个包含日期和名称的组合对象进行排序的数组列表。这真的是唯一的办法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:01:31.163

关于实现`Comparable`和使用它作为比较器的其他答案确实都是正确的。但是，如果这也有帮助...

根据[Collections.sort 的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)，请注意 sort() 使用**Modified Mergesort**作为排序算法。如果我错了，请纠正我，但人们普遍认为，在所有排序算法中，合并排序在最坏情况下实现了*最佳*运行时间：O(n log n)（我并没有消除这样一个事实可能还有其他排序算法在最坏的情况下也能达到 O(n log n)）。

*但是，O(n log n) 只是无界*值域的最佳运行时间。**[如果您的域有界限，那么您可以使用桶排序](http://en.wikipedia.org/wiki/Bucket_sort)**获得更好的 O(n) 运行时间。

# javascript - 使用angularjs，如何分别绑定两个对象？

> ID：13014954
> 
> 赞同：2
> 
> 时间：2012-10-22T15:45:05.503
> 
> 标签：javascript, angularjs

我希望能够让多个输入字段能够更改从 ajax 调用返回的对象。我不确定如何防止两个对象的链接。

```
$scope.items = [{value: 1},{value: 2},{value: 3}];
$scope.itemEdit1 = $scope.items;
$scope.itemEdit2 = $scope.items; 
```

我必须在不同的范围内进行每次编辑吗？这是一个描述我的问题的小提琴：http: [//jsfiddle.net/htTQc/](http://jsfiddle.net/htTQc/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T15:59:50.743

似乎您想复制对象，所以您没有编辑相同的参考？只需使用`angular.copy`. [文档在这里。](http://docs.angularjs.org/api/angular.copy)

```
$scope.items = [{value: 1},{value: 2},{value: 3}];
$scope.itemEdit1 = angular.copy($scope.items);
$scope.itemEdit2 = angular.copy($scope.items); 
```

[http://jsfiddle.net/blesh/htTQc/1/](http://jsfiddle.net/blesh/htTQc/1/)

# background - 在背景之外隐藏内容并在滚动时显示

> ID：13014955
> 
> 赞同：0
> 
> 时间：2012-10-22T15:45:07.117
> 
> 标签：background, scroll, hide

工作网址： [http ://webstage.co/scroll/stack.html](http://webstage.co/scroll/stack.html)

我想要完成的是在背景区域（1280x800）之外隐藏内容。我喜欢滚动到新部分时背景进入的方式，但我想隐藏内容直到它进入 1280x800 视口？关于我如何做到这一点的任何建议？

奖励......如果我也可以在顶部导航下方滚动内容时也将其隐藏起来，那就太好了。一个人可以做梦。:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:47:29.977

对于第一部分，您可以使用 css 添加另一个 div 和目标，如下所示：

```
 .viewport {
    width: 1280px;
    height: 100%;
    position: fixed;
    top: 0;
    left: 50%;
    margin-left: -640px;
    background: black;
    clip: rect(800px, 1280px, auto, auto);
} 
```

基本上，将背景设置为与页面背景相同的颜色，并使用剪辑仅显示位于所需视口区域下方的 div 部分，将内容隐藏在视口区域之外。

如果您稍后将内容添加到页脚，您可能需要调整一些 z-index 设置以确保它位于视口 div 的顶部。

# jquery - ajax循环遍历jquery中的数据

> ID：13014957
> 
> 赞同：-2
> 
> 时间：2012-10-22T15:45:08.163
> 
> 标签：jquery

可以循环遍历从 jquery ajax 调用返回的所有值吗？

下面是我正在尝试做的......

```
if ($(data.DATA).length == 1) {

   loop ALL data.DATA {
        get data.DATA.ID
   }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:49:28.310

试试这个：

```
$.each(data.DATA, function(index, value){
    alert(value.ID);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:48:23.037

你可以做类似的事情

```
for (var d in data) {
    alert(data[d]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:49:50.067

如果您的数据是一个 jQuery DOM 对象，那么：

```
if ($(data.DATA).length == 1) {
    $(data.DATA).each(function(){
        var id = $(this).attr('id');
        console.log(id);
    });
} 
```

# xml - 尝试使用 perl xml::dom::node->expandEntityRefs() 查找/替换字符实体

> ID：13014959
> 
> 赞同：0
> 
> 时间：2012-10-22T15:45:18.633
> 
> 标签：xml, perl

我正在编写一个 perl 脚本来对 xml 文件进行一些更改，我需要做的一件事是找到一个实体并替换另一个。

我想找到

```
<myelement>&#x25aa;</myelement> 
```

并替换为

```
<myelement>&#x2022;</myelement> 
```

我正在尝试使用 XML::DOM::Node->expandEntityRefs() 函数，但没有任何运气。我基本上是在尝试这样做：

```
# $nodeMyElement declared at top of function, not shown
my $textNode = $nodeMyElement->getFirstChild();

my $sChildText = $textNode ->toString();
# when calling from main node, the string is just nothing
my $test = $nodeMyElement ->expandEntityRefs( $sChildText ); 
```

# 从主包调用时出现错误：Can't use string ("XML::DOM::Node") as an ARRAY ref while "strict refs" in use at C:/Perl/site/lib/XML/ DOM.pm 第 1244 行。我的 $test2 = XML::DOM::Node->expandEntityRefs( $sChildText );

关于我做错了什么的任何想法，或者解决这个问题的更好方法？谢谢，bp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:35:06.120

我必须承认我不是回答这个问题的最佳人选，而且我不知道 XML::DOM。就我个人而言，我会使用[Mojo::DOM](http://p3rl.org/Mojo%3a%3aDOM)，但这只是因为它是我所知道的。此外，我仍在努力赶上 unicode 的东西。这里所说的都是我想出的：

```
#!/usr/bin/env perl

use strict;
use warnings;

use v5.10;
use utf8::all;
use Mojo::DOM;

my $dom = Mojo::DOM->new->xml(1)->parse(<<'END');
<myelement>&#x25aa;</myelement>
END

$dom->find('myelement')
    ->grep(qr/\x{25aa}/)
    ->pluck(replace_content => "\x{2022}");

say $dom; 
```

问题是我似乎无法回到`&#x`编码。我确信（？）必须有一种方法可以做到这一点，或者可能更好，迫使它一直保持这种状态。任何人？

# kml - KML 文件不工作？

> ID：13014963
> 
> 赞同：0
> 
> 时间：2012-10-22T15:45:32.953
> 
> 标签：kml, google-earth, google-earth-plugin

如果我双击我的 KML 文件，它会执行应有的操作并启动 GE 并按预期执行。当我将它放入我的 HTML 文件时，它将无法正常工作。然后我将它放入[http://earth-api-samples.googlecode.com/svn/trunk/examples/kml-fetch-interactive.html](http://earth-api-samples.googlecode.com/svn/trunk/examples/kml-fetch-interactive.html) 并且它也不能从那里工作。这是荷航[https://dl.dropbox.com/u/61240296/myPoints.Kml](https://dl.dropbox.com/u/61240296/myPoints.Kml)的链接。它基本上是 Google 示例的直接副本。KML 文件是否依赖于其他 KML 文件？我注意到的一件事是没有道路，因此似乎没有任何 KML 文件处于打开或活动状态。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
xmlns:gx="http://www.google.com/kml/ext/2.2" 

xmlns:kml="http://www.opengis.net/kml/2.2" 

xmlns:atom="http://www.w3.org/2005/Atom"> 
```

```
 <Camera>

     <longitude>-93.2539393007755</longitude>

     <latitude>45.5456585437059</latitude>

     <altitude>139.629438</altitude>

     <heading>-70.0</heading>

     <tilt>75</tilt>

  </Camera>

  <Placemark>

     <name>Placemark from KML file</name>

     <Point>

        <coordinates>-93.2539393007755, 45.5456585437059</coordinates>

     </Point>

  </Placemark>

  </Document>

  </kml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:55:03.723

您的 KML 文件很好。它也可以在您链接到的示例页面中完美运行。问题是示例页面在加载您的 kml 文件后不会更改视图。它甚至没有尝试。

编辑此功能

```
function finishFetchKml(kmlObject) {
  // check if the KML was fetched properly
  if (kmlObject) {
    // add the fetched KML to Earth
    currentKmlObject = kmlObject;
    ge.getFeatures().appendChild(currentKmlObject);
  } else {
    // wrap alerts in API callbacks and event handlers
    // in a setTimeout to prevent deadlock in some browsers
    setTimeout(function() {
      alert('Bad or null KML.');
    }, 0);
  }
} 
```

看起来像这样

```
function finishFetchKml(kmlObject) {
  // check if the KML was fetched properly
  if (kmlObject) {
    // add the fetched KML to Earth
    currentKmlObject = kmlObject;
    ge.getFeatures().appendChild(currentKmlObject);

    ///////////////////////////////////////////////
    // this is what you need to add
    var myView = currentKmlObject.getAbstractView();
            ge.getView().setAbstractView(myView);
    //////////////////////////////////////////////

  } else {
    // wrap alerts in API callbacks and event handlers
    // in a setTimeout to prevent deadlock in some browsers
    setTimeout(function() {
      alert('Bad or null KML.');
    }, 0);
  }
} 
```

然后，您需要决定是否要将`<Camera>`视图分配给`<Placemark>`或`<Document>` ，如果您没有意识到，您的`<Camera>`视图不会看 ，`<Placemark>`而是从直接上方的位置看地平线`<Placemark>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:07:46.030

如果您尝试加载格式正确的 KML 文件并且文件未正确加载，您应该使用 chrome、firebug 或类似的开发人员工具查看 Web 服务器的标头。如果您使用 apache 作为您的网络服务器，您应该添加到您的 httpd.conf：

AddType application/vnd.google-earth.kml+xml .kml AddType application/vnd.google-earth.kmz .kmz

# php - mysqli bind_result 仅适用于 INT 类型的列

> ID：13014971
> 
> 赞同：1
> 
> 时间：2012-10-22T15:45:53.303
> 
> 标签：php, mysql, mysqli, prepared-statement

我有一个 mySQL 表定义为：

```
CREATE TABLE IF NOT EXISTS `coupons` (
    `coupon_id` int(11) NOT NULL auto_increment,
    `coupon_code` varchar(50) NOT NULL,
    `coupon_expiration_date` date NOT NULL,
    `coupon_discount` decimal(10,2) NOT NULL,
    `coupon_created_date` date NOT NULL,
    PRIMARY KEY  (`coupon_id`)
) 
```

此表中的一项如下：

```
INSERT INTO `coupons` (`coupon_id`, `coupon_code`, `coupon_expiration_date`, `coupon_discount`, `coupon_created_date`) VALUES (1, 'test', '2012-11-30', '11.00', '2012-10-22'); 
```

尝试使用以下 PHP 代码查询此表时：

```
$strSelectCoupons = "SELECT coupon_id FROM coupons";
if($stmtSelectCoupons = $mysqlConn->prepare($strSelectCoupons))
{
    $stmtSelectCoupons->execute();
    $stmtSelectCoupons->bind_result($iCouponId);

    while($stmtSelectCoupons->fetch())
    {
        echo $iCouponId;
    }
}
else
{
    echo "Prepared statement error: " . $mysqlConn->error;
} 
```

正如预期的那样，我们看到屏幕上打印了一个“1”。

但是，如果我们尝试执行以下 PHP 代码：

```
$strSelectCoupons = "SELECT coupon_id, coupon_code FROM coupons";
if($stmtSelectCoupons = $mysqlConn->prepare($strSelectCoupons))
{
    $stmtSelectCoupons->execute();
    $stmtSelectCoupons->bind_result($iCouponId, $strCouponCode);

    while($stmtSelectCoupons->fetch())
    {
        echo $iCouponId . "<br />";
        echo $strCouponCode . "<br />";
    }
}
else
{
    echo "Prepared statement error: " . $mysqlConn->error;
} 
```

不显示结果，不打印错误，不记录错误，并且页面的其余部分不呈现。

事实上，唯一真正按预期工作的情况是仅返回 coupon_id 时。例如，如果我们将 select 语句更改为仅返回 coupon_code，这将再次导致页面爆炸。

关于导致此失败的任何想法？

阿帕奇版本：2.2.2

PHP版本：5.3.14

mySQL 版本：5.0.95-community

**编辑：**

在进一步调查中，bind_result 仅适用于 INT 类型的列，并在尝试绑定其他类型的任何列时失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:50:12.877

评论[`mysqli_stmt_bind_result()`](http://www.php.net/manual/en/mysqli-stmt.bind-result.php#101543)指出[MySQL 客户端库](https://bugs.php.net/bug.php?id=47928)中的一个错误，该错误导致大数据列崩溃。

据报道，mysqlnd 和 MySQL 的 Connector/C 没有出现这个问题，或者如果可能的话，您可以[`mysqli_stmt_store_result()`](http://www.php.net/manual/en/mysqli-stmt.store-result.php)在调用`mysqli_stmt_bind_result()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T12:36:10.077

很老的话题，但我找到了一个“解决方案”，一个奇怪的，把你的 bind_result 放在 IF

```
if(!$stmtSelectCoupons->bind_result($iCouponId, $strCouponCode)) { // TODO error } 
```

# tsql - 如何从 C# 中捕获新插入行的 ID 值？

> ID：13014972
> 
> 赞同：0
> 
> 时间：2012-10-22T15:46:00.177
> 
> 标签：tsql

这是我的存储过程

```
ALTER PROCEDURE dbo.spInsertNewTask
@ModuleID               int, 
@Task                   varchar(50), 
@StartDate              date, 
@PlannedEndDate         date, 
@EstimatedEndDate       date, 
@Status                 int,
@Comments               varchar(500),
@Started                bit
AS
INSERT INTO DTasks (ModuleID, Task, StartDate, PlannedEndDate, EstimatedEndDate, Status, Comments, Started, LastUpdated)
VALUES (@ModuleID, @Task, @StartDate, @PlannedEndDate, @EstimatedEndDate, @Status, @Comments, @Started, GETDATE())

RETURN SCOPE_IDENTITY() 
```

当我尝试捕获新创建的 ID 时，我得到的始终是 1。如何捕获新行的 ID？

```
newID = cmd.ExecuteNonQuery(); 
```

事实上，我需要这个新 ID 进行进一步处理。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:49:09.127

而不是`ExecuteNonQuery`, 它返回受影响的行数，您应该使用[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)，将返回`object`的类型转换为正确的类型：

```
newID = (int)cmd.ExecuteScalar(); 
```

为了使上述工作正常，您还需要将 SQL 从返回返回值更改为*选择*值：

```
SELECT SCOPE_IDENTITY() 
```

页面上的代码示例几乎就是您想要做的。

* * *

如果要保留返回类型，则需要在命令中添加返回类型参数，像当前一样以非查询方式执行，然后读取返回参数的值，如[从存储过程中获取返回值中所述在 C#](https://stackoverflow.com/questions/706361/getting-return-value-from-stored-procedure-in-c-sharp)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:31:33.453

您需要传递 [ID] 假设它是您的标识列作为输出参数：

在 C# 中，您需要添加新参数，即输出参数，并在执行结束时检索：

初始化：

```
 SqlParameter param = new SqlParameter("@ID", 0);
    param.Direction = ParameterDirection.Output;
    param.DbType = DbType.Int32; 
```

执行后检索：

```
 int id = Convert.ToInt32(sqlcommand.Parameters["@ID"].Value.ToString()); 
```

存储过程：

```
 ALTER PROCEDURE dbo.spInsertNewTask
        @ID                     INT = NULL OUTPUT,
        @ModuleID               int, 
        @Task                   varchar(50), 
        @StartDate              date, 
        @PlannedEndDate         date, 
        @EstimatedEndDate       date, 
        @Status                 int,
        @Comments               varchar(500),
        @Started                bit
    AS
    BEGIN
        INSERT INTO DTasks (ModuleID, Task, StartDate, PlannedEndDate, EstimatedEndDate, Status, Comments, Started, LastUpdated)
        VALUES (@ModuleID, @Task, @StartDate, @PlannedEndDate, @EstimatedEndDate, @Status, @Comments, @Started, GETDATE())

        SET @ID = SCOPE_IDENTITY()
    END 
    GO 
```

# c++ - 四元数 - 旋转到

> ID：13014973
> 
> 赞同：4
> 
> 时间：2012-10-22T15:46:05.340
> 
> 标签：c++, math, quaternions

我在世界空间中有一些对象，假设在 (0,0,0) 并希望将其旋转到面对 (10,10,10)。

我如何使用四元数来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T17:56:38.653

This question doesn't quite make sense. You said that you want an object to "face" a specific point, but that doesn't give enough information.

First, what does it mean to *face* that direction? In OpenGL, it means that the **-z** axis in the local reference frame is aligned with the specified direction in some external reference frame. In order to make this alignment happen, we need to know what direction the relevant axis of the object is currently "facing".

However, that still doesn't define a unique transformation. Even if you know what direction to make the **-z** axis point, the object is still free to spin *around* that axis. This is why the function `gluLookAt()` requires that you provide an 'at' direction *and* an 'up' direction.

The next thing that we need to know is what format does the end-result need to be in? The orientation of an object is often stored in quaternion format. However, if you want to *graphically* rotate the object, then you might need a rotation matrix.

So let's make a few assumptions. I'll assume that your object is centered at the world's point **c** and has the default alignment. I.e., the object's **x**, **y**, and **z** axes are aligned with the world's **x**, **y**, and **z** axes. This means that the orientation of the object, relative to the world, can be represented as the identity matrix, or the identity quaternion: `[1 0 0 0]` (using the quaternion convention where **w** comes first).

If you want the shortest rotation that will align the object's **-z** axis with point **p**:=[p.x p.y p.z], then you will rotate by φ around axis **a**. Now we'll find those values. First we find axis **a** by normalizing the vector **p-c** and then taking the cross-product with the unit-length **-z** vector and then normalizing again:

**a** = normalize( crossProduct(**-z**, normalize(**p-c**) ) );

The shortest angle between those two unit vectors found by taking the inverse cosine of their dot-product:

φ = acos( dotProduct(**-z**, normalize(**p-c**) ));

Unfortunately, this is a measure of the absolute value of the angle formed by the two vectors. We need to figure out if it's positive or negative when rotating around **a**. There must be a more elegant way, but the first way that comes to mind is to find a third axis, perpendicular to both **a** and **-z** and then take the sign from its dot-product with our target axis. Vis:

**b** = crossProduct(**a**, **-z** );

if ( dotProduct(**b**, normalize(**p-c**) )<0 ) φ = -φ;

Once we have our axis and angle, turning it into a quaternion is easy:

**q** = [cos(φ/2) sin(φ/2)**a**];

This new quaternion represents the new orientation of the object. It can be converted into a matrix for rendering purposes, or you can use it to directly rotate the object's vertices, if desired, using the rules of quaternion multiplication.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:58:15.457

[在Ogre::Vector3 类](https://bitbucket.org/sinbad/ogre/src/8bc7edb1a1d359045a77383832e653f946cf92d3/OgreMain/include/OgreVector3.h?at=default#cl-651)的 OGRE 源代码中可以找到计算表示两个向量之间旋转的四元数的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:40:18.953

为了回应您的澄清并回答这个问题，我无耻地复制了一个非常有趣且简洁的算法来查找两个向量之间的 quat，这看起来就像我以前从未见过的[一样](http://www.gamedev.net/topic/429507-finding-the-quaternion-betwee-two-vectors/)。从数学上讲，这似乎是有效的，而且由于您的问题是关于其背后的数学，我相信您将能够将此伪代码转换为 C++。

```
quaternion q;
vector3 c = cross(v1,v2);
q.v = c;
if ( vectors are known to be unit length ) {
    q.w = 1 + dot(v1,v2);
} else {
    q.w = sqrt(v1.length_squared() * v2.length_squared()) + dot(v1,v2);
}
q.normalize();
return q; 
```

如果您需要帮助澄清该伪代码的任何部分，请告诉我。不过应该直截了当。

```
dot(a,b) = a1*b1 + a2*b2 + ... + an*bn 
```

和

```
cross(a,b) = well, the cross product. it's annoying to type out and
can be found anywhere. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:52:51.423

您可能想要使用 SLERP（球面线性插值）。请参阅[本文](https://ece.uwaterloo.ca/~dwharder/C++/CQOST/Slerp/)以获取有关如何在 C++ 中执行此操作的参考

# rhel - selinux 并从 httpd 启动 init 进程

> ID：13014976
> 
> 赞同：0
> 
> 时间：2012-10-22T15:46:07.290
> 
> 标签：rhel, selinux

操作系统：RHEL6 和 CentOS6

当启动诸如 ntpd ( `/etc/init.d/ntpd start`) 之类的服务时，该进程将具有 selinux 上下文：

```
system_u:system_r:ntpd_t:s0 
```

如果我有一个 cgi，它是 root 的 setuid，它允许通过 Web 界面停止/启动服务，当通过这个 cgi（执行相同`/etc/init.d/ntpd start`）启动时，该进程具有 selinux 上下文：

```
system_u:system_r:httpd_t:s0 
```

我的 cgi 文件 selinux 上下文：

```
system_u:system_r:unconfined_exec_t:s0 
```

当服务通过执行`/etc/init.d script`启动服务的 httpd/cgi suid 进程启动时，我该如何做到这一点，该进程的类型是否正确？（`ntpd_t`在这个例子中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T20:00:32.917

原因是 SELinux 中的域之间存在转换，因此它意味着哪个进程和什么上下文类型运行/启动什么进程和从什么文件（什么 SELinux 上下文）。所以 sysV 或 systemd 默认从 systemd_t 或类似的东西启动服务，但您的 Web 服务器尝试从 httpd_t 启动服务。谷歌如何在 SELinux 中更改域。

# javascript - 搬家打开google map infoWindow

> ID：13014978
> 
> 赞同：0
> 
> 时间：2012-10-22T15:46:10.707
> 
> 标签：javascript, google-maps, latitude-longitude, infowindow

我以这种方式创建谷歌地图信息窗口

```
newMapView.infowindow.setContent(contentString);
newMapView.infowindow.setPosition(catMarker.getPosition());
newMapView.infowindow.open(newMapView.map); 
```

但是需要将地图中心向上移动一点。试图做类似的事情：

```
setTimeout(function(){
    var point = map.getCenter();
    point.Xa = point.Xa+1/1000;
    map.setCenter(new google.maps.LatLng(point.Xa,point.Ya));
},1000); 
```

*需要超时才能知道哪个窗口已经打开并移到了中心。*

但是这种方法在某些情况下无法正常工作，据我了解，使用超时并不是一个好的解决方案。

有没有办法将标记放在一个地方但将中心移到另一个地方？

# php - PHP 文件写入 - 最大行数

> ID：13014979
> 
> 赞同：2
> 
> 时间：2012-10-22T15:46:10.417
> 
> 标签：php, file, append, max, fopen

如何限制写入文件，如果达到限制则删除最后一行..

例如这里有一个文件：

```
Line 3
Line 2
Line 1 
```

我只想将它最多排成 3 行.. 所以当我使用任何附加函数写一个新行时，它会删除最后一行.. 假设我刚刚写了一个新行（第 4 行）.. 所以它转到最后一行一个并删除它，结果应该是：

```
Line 4
Line 3
Line 2 
```

对于新的书面行（第 5 行）：

```
Line 5
Line 4
Line 3 
```

*数字行不是必需的，如果通过附加函数（file_put_contents / fwrite）*有新添加的行，我只想删除最后一行，并将其最大为 3 或我给出的特定数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:57:16.620

你可以试试

```
$max = 3;
$file = "log.txt";
addNew($file, "New Line at : " . time()); 
```

使用的功能

```
function addNew($fileName, $line, $max = 3) {
    // Remove Empty Spaces
    $file = array_filter(array_map("trim", file($fileName)));

    // Make Sure you always have maximum number of lines
    $file = array_slice($file, 0, $max);

    // Remove any extra line 
    count($file) >= $max and array_shift($file);

    // Add new Line
    array_push($file, $line);

    // Save Result
    file_put_contents($fileName, implode(PHP_EOL, array_filter($file)));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:50:47.197

这是一种方法：

1.  用于`file()`将文件的行读入数组
2.  用于`count()`确定数组中的元素是否超过 3 个。如果是这样的话：
    1.  删除数组的最后一个元素`array_pop()`
    2.  用于`array_unshift()`将元素（新行）添加到数组的前面
    3.  用数组的行覆盖文件

例子：

```
$file_name = 'file.txt';

$max_lines = 3;              #maximum number of lines you want the file to have

$new_line = 'Line 4';               #content of the new line to add to the file

$file_lines = file($file_name);     #read the file's lines into an array

#remove elements (lines) from the end of the
#array until there's one less than $max_lines
while(count($file_lines) >= $max_lines) {    
    #remove the last line from the array
    array_pop($file_lines);
}

#add the new line to the front of the array
array_unshift($file_lines, $new_line);

#write the lines to the file
$fp = fopen($file_name, 'w');           #'w' to overwrite the file
fwrite($fp, implode('', $file_lines)); 
fclose($fp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:55:39.043

试试这个。

```
<?php

// load the data and delete the line from the array 

$lines = file('filename.txt'); 
$last = sizeof($lines) - 1 ; 
unset($lines[$last]); 

// write the new data to the file 

$fp = fopen('filename.txt', 'w'); 
fwrite($fp, implode('', $lines)); 
fclose($fp); 

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-27T15:39:03.393

根据[巴巴的](https://stackoverflow.com/users/1226894/baba)回答修改；此代码将在文件开头写入新行，并将擦除最后一行以始终保持 3 行。

```
<?php
function addNew($fileName, $line, $max) {
    // Remove Empty Spaces
    $file = array_filter(array_map("trim", file($fileName)));

    // Make Sure you always have maximum number of lines
    $file = array_slice($file, 0, --$max);

    // Remove any extra line and adding the new line
    count($file) >= $max and array_unshift($file, $line);

// Save Result
file_put_contents($fileName, implode(PHP_EOL, array_filter($file)));
}

// Number of lines
$max = 3;
// The file must exist with at least 2 lines on it
$file = "log.txt";
addNew($file, "New Line at : " . time(), $max);

?> 
```

# java - Primefaces 动态树：selectedNode 中的 null 祖父引用

> ID：13014980
> 
> 赞同：1
> 
> 时间：2012-10-22T15:46:10.900
> 
> 标签：java, tree, primefaces, nullpointerexception, parent

我有一个使用 Primefaces 3.2/JSF2.0/Mojarra/JBoss6 的动态树。我在我的 onNodeExpand 方法中成功添加了孩子。

```
 public void onNodeExpand(NodeExpandEvent event){
     if(selectedNode.type.equals("GrandParent")){
                  TreeNode parent = new DefaultTreeNode(data, event.getTreeNode());
     //parent.setParent(event.getTreeNode()); 
      parent.getChildren().add(new DefaultTreeNode(null, parent));

     }

     if(selectedNode.type.equals("Parent")){
      TreeNode child = new DefaultTreeNode(childData, event.getTreeNode());
      child.getChildren().add(new DefaultTreeNode(null, child));
     }
   } 
```

树显示正确，但是当我尝试访问“子”节点的祖父母时得到 NPE。

```
 public void onNodeSelect(NodeSelectEvent event){
       granPaNode = (NodeDto) event.getTreeNode().getParent().getParent().getData();
    } 
```

此代码在 primefaces 2.2 上运行良好，但在 PF 3.2 上运行良好

知道如何在不将 logicData 映射到另一个结构中的情况下解决此问题吗？

多谢。

# python - 尝试安装 Flask 0.9 后的警告和错误

> ID：13014984
> 
> 赞同：10
> 
> 时间：2012-10-22T15:46:20.563
> 
> 标签：python, installation, flask

我正在尝试安装[Flask](http://flask.pocoo.org/)，但我打赌所有这些警告和错误：

```
alex@alex-K43U:~/flask$ pip install Flask
Downloading/unpacking Flask
  Downloading Flask-0.9.tar.gz (481Kb): 481Kb downloaded
  Running setup.py egg_info for package Flask

    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking Werkzeug>=0.7 (from Flask)
  Downloading Werkzeug-0.8.3.tar.gz (1.1Mb): 1.1Mb downloaded
  Running setup.py egg_info for package Werkzeug

    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from Flask)
  Downloading Jinja2-2.6.tar.gz (389Kb): 389Kb downloaded
  Running setup.py egg_info for package Jinja2

    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Installing collected packages: Flask, Werkzeug, Jinja2
  Running setup.py install for Flask

    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
    error: could not create '/usr/local/lib/python2.7/dist-packages/flask': Permission denied
    Complete output from command /usr/bin/python -c "import setuptools;__file__='/home/alex/flask/build/Flask/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-KD7NsY-record/install-record.txt:
    running install

running build

(a lot of creating and building)

error: could not create '/usr/local/lib/python2.7/dist-packages/flask': Permission denied 
```

有什么建议可以解决这个问题吗？

我正在使用 ubuntu 11.10。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T15:52:09.590

您可以放心忽略的警告；但是这个错误：

`error: could not create '/usr/local/lib/python2.7/dist-packages/flask': Permission denied`

告诉我您正在尝试将其安装到您的全局系统 Python 中。这没有错，但如果你想这样做，你需要以提升的权限运行命令（使用`sudo`）。

最好使用[虚拟环境](http://www.virtualenv.org)，以免污染系统范围的 Python 安装。

使用虚拟环境：

```
$ virtualenv flask_env
$ source flask_env/bin/activate
(flask_env) $ pip install Flask 
```

您可能应该首先安装 virtualenv 二进制文件`sudo apt-get install python-virtualenv`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T15:52:30.217

至于警告，有时可以忽略。唯一相关的行是最后一行，它表示应用程序无权在该文件夹中创建目录。

添加`sudo`到您的命令以解决此问题。

```
sudo pip install Flask 
```

作为一般规则，您不想在系统范围内安装软件包。在 Python 世界中，规范是使用虚拟环境来创建本地环境，并将包安装到每个环境中。`virtualenv` [您可以在此处](http://pypi.python.org/pypi/virtualenv)找到更多信息。

# android - Android减去日期

> ID：13014987
> 
> 赞同：3
> 
> 时间：2012-10-22T15:46:27.390
> 
> 标签：android, date, simpledateformat, subtraction

所以我试图减去我想出的这段代码的 2 个日期：

```
java.text.DateFormat df = new java.text.SimpleDateFormat("hh:mm:ss_yyyy.MM.dd");
java.util.Date date1 = new java.util.Date();
java.util.Date date2 = df.parse("00:00:00_2013.01.01");
long diff = date2.getTime() - date1.getTime(); 
```

但问题是**差异**不正确。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T16:01:30.503

您在评论中的差异示例是错误的。我尝试了您的代码并得到了以下结果：

```
try {
    DateFormat df = new SimpleDateFormat("hh:mm:ss_yyyy.MM.dd");
    Date date1 = new java.util.Date();
    Date date2 = df.parse("00:00:00_2013.01.01");
    long diff = date2.getTime() - date1.getTime();
    Log.e("TEST" , date1.getTime() + " - " + date2.getTime() + " - " + diff);
} catch (ParseException e) {
    Log.e("TEST", "Exception", e);
}

date1: 1350921506492
date2: 1356994800000
diff: 6073293508

diff / 1000 / 60 / 60 / 24 = 70,292748935 
```

并大致检查了 70 天，直到新年听起来很稳定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-11T19:04:09.030

# 希望这会有所帮助

### 如果日期差异小于一天，则下面的代码输出时间，当日期差异小于 7 天时输出日期，依此类推....

```
public String ConvertDateToReadableDate(String DateTime) {
    if (DateTime != null) {
        if (!DateTime.equals("")) {
            // the input should be in this format 2019-03-08 15:14:29 
            //if not you have to change the pattern in SimpleDateFormat("yyyy-MM-dd hh:mm:ss")

                Date newDate;
                Date currentDate = new java.util.Date();
                int hour = 0, min = 0, sec = 0;
                String dayName = "", dayNum = "", monthName = "", year = "";
                long numOfMilliSecondPassed = 0;
                float milliSecond = 86400000.0f; // 1 day is 86400000 milliseconds 
                float numOfDayPass;

                DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");

                try {
                    newDate = dateFormat.parse(DateTime); // convert String to date
                    numOfMilliSecondPassed = currentDate.getTime() - newDate.getTime(); //get the difference in date in millisecond

                    hour = Integer.parseInt((String) android.text.format.DateFormat.format("hh", newDate));
                    min = Integer.parseInt((String) android.text.format.DateFormat.format("mm", newDate));
                    sec = Integer.parseInt((String) android.text.format.DateFormat.format("ss", newDate));
                    dayName = (String) android.text.format.DateFormat.format("EEEE", newDate);
                    dayNum = (String) android.text.format.DateFormat.format("dd", newDate);
                    monthName = (String) android.text.format.DateFormat.format("MMM", newDate);
                    year = (String) android.text.format.DateFormat.format("yyyy", newDate);

                } catch (ParseException e) {
                    e.printStackTrace();
                }
                //Convert the milliseconds to days
                numOfDayPass = (numOfMilliSecondPassed / milliSecond);       

                if (numOfDayPass < 1) {
                    return hour + ":" + min + ":" + sec;
                } else if ((numOfDayPass >= 1) && (numOfDayPass < 7)) {
                    return dayName + " "+ hour + ":" + min + ":" + sec;
                } else if ((numOfDayPass >= 7) && (numOfDayPass < 30)) {
                    int weeks = (int) numOfDayPass / 7;

                    if(weeks > 1) {
                        return weeks + " weeks ago";
                    }else{
                        return weeks + " week ago";
                    }
                }else if((numOfDayPass >= 30) && (numOfDayPass < 90) ){
                    int months = (int) numOfDayPass/30;

                    if(months > 1) {
                        return months + " months ago";
                    }else{
                        return months + " month ago";
                    }
                }else if((numOfDayPass >= 360) && (numOfDayPass < 1080) ){
                    int years = (int) numOfDayPass/360;

                    if(years > 1) {
                        return years + " years ago";
                    }else{
                        return years + " year ago";
                    }
                }else{
                    return dayName + " " + dayNum + " " + monthName + " " + year + " "+
                    hour + ":" + min + ":" + sec;
                }

        } else {
            return null;
        }
    } else {
        return null;
    }
} 
```

# vb.net - 如何向 VB.NET 2008 SOAP 请求添加标头？

> ID：13014992
> 
> 赞同：3
> 
> 时间：2012-10-22T14:42:52.620
> 
> 标签：vb.net, wcf, web-services, soap, siebel

我有一个 VB.NET 2008 程序，它访问由 WSDL 定义并使用 SOAP 协议的 Siebel Web 服务。

Siebel Web 服务要求在服务请求中包含一个包含用户名、密码和会话类型的标头，但该标头未在 WSDL 中定义。

因此，当我使用 soapUI 实用程序测试 WSDL 时，WSDL 定义的请求如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:lov="http://www.siebel.com/xml/LOVService" xmlns:lis="http://www.siebel.com/xml/ListQuery">
<soapenv:Header/>
   <soapenv:Body>
      <lov:EAILOVGetListOfValues_Input>
         <lis:ListsQuery>
            <lis:ListQuery>
               <lis:Active>Y</lis:Active>
               <lis:LanguageCode>ENU</lis:LanguageCode>
               <lis:Type>CUT_ACCOUNT_TYPE</lis:Type>
            </lis:ListQuery>
         </lis:ListsQuery>
      </lov:EAILOVGetListOfValues_Input>
   </soapenv:Body>
</soapenv:Envelope> 
```

但上述内容不起作用，因为它包含一个缺少用户和会话凭据的空标头。只有当我手动替换`<soapenv:Header/>`为包含用户名、密码和会话类型的标头时，它才有效，如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:lov="http://www.siebel.com/xml/LOVService" xmlns:lis="http://www.siebel.com/xml/ListQuery">
<soapenv:Header>
  <UsernameToken xmlns="http://siebel.com/webservices">TESTUSER</UsernameToken>
  <PasswordText xmlns="http://siebel.com/webservices">TESTPASSWORD</PasswordText>
  <SessionType xmlns="http://siebel.com/webservices">None</SessionType>
</soapenv:Header>
   <soapenv:Body>
      <lov:EAILOVGetListOfValues_Input>
         <lis:ListsQuery>
            <lis:ListQuery>
               <lis:Active>Y</lis:Active>
               <lis:LanguageCode>ENU</lis:LanguageCode>
               <lis:Type>CUT_ACCOUNT_TYPE</lis:Type>
            </lis:ListQuery>
         </lis:ListsQuery>
      </lov:EAILOVGetListOfValues_Input>
   </soapenv:Body>
</soapenv:Envelope> 
```

我的问题是我无法弄清楚如何将上述内容转换为 VB.NET 2008 代码。

将 WSDL 导入 Visual Studio 2008、在 VB 代码中定义服务并引用 Web 服务方法时，我没有问题。但是，我无法理清如何在 VB 中定义 Web 服务，以便更新的标头包含在 Web 服务请求中，而不是空标头。因此，我从 VB 发出的所有服务请求都失败了。

我可以定义一个继承自 SoapHeader 类的类...

```
Public Class MySoapHeader : Inherits System.Web.Services.Protocols.SoapHeader
    Public Username As String
    Public Password As String
    Public SessionType As String
End Class 
```

...但是如何在 VB 发出的 SOAP 请求中包含此标头？

我用来测试的示例代码是一个带有按钮和列表框的简单表单。

```
Public Class Form1

    Private Sub btnGetLOV_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnGetLOV.Click

        Dim MyService As New wsLOV.EAILOVPortClient

        Dim MyInput As New wsLOV.EAILOVGetListOfValues_Input
        Dim MyParams(0) As wsLOV.ListQuery
        Dim temp As New wsLOV.ListQuery

        Dim MyResult As New wsLOV.EAILOVGetListOfValues_Output

        temp.Active = "Y"
        temp.Type = "CUT_ACCOUNT_TYPE"
        temp.LanguageCode = "ENU"
        MyParams(0) = temp

        MyInput.ListsQuery = MyParams

        Dim MyRequest As New wsLOV.EAILOVGetListOfValuesRequest(MyInput)
        MyResult = MyService.EAILOVGetListOfValues(MyInput)

    End Sub

End Class 
```

代码在子例程的最后一行失败，并显示一条消息，指示请求尚未通过身份验证（错误代码：10944642 错误消息：错误：入站 SOAP 消息 - 会话令牌丢失或无效或已过期），这是相同的错误当我离开包含用户名、密码和会话类型的标题时，我进入了soapUI。

我相信我需要将标头添加到端点（根据[http://msdn.microsoft.com/en-us/library/ms731749.aspx](http://msdn.microsoft.com/en-us/library/ms731749.aspx)和[http://msdn.microsoft.com/en-us/library/system .servicemodel.configuration.serviceendpointelement.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.configuration.serviceendpointelement.aspx)）但我不确定如何在 VB 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:36:54.587

以下是我们解决此问题的方法。关键似乎是使用附加标头实例化端点，而不是在端点已经实例化后尝试添加标头。

```
Imports System.ServiceModel.Channels
Imports System.ServiceModel

Public Class Form1

    Private Sub btnGetOrg_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnGetOrgType.Click
        ' This example code queries the Siebel web service using the SOAP protocol for a list of
        ' Account (organization) types stored in a List of Values (LOV). The service request
        ' requires that a SOAP header be added that contains the username, password, and session
        ' type. We have to add this header because the WSDL file definition generated by Siebel
        ' does not include the header definition. The WSDL file was added to the VS2008 project as
        ' a Service Reference named "wsGetLOV"

        ' Create address headers for special services and add them to an array
        Dim addressHeader1 As AddressHeader = AddressHeader.CreateAddressHeader("UsernameToken", "http://siebel.com/webservices", "TESTUSER")
        Dim addressHeader2 As AddressHeader = AddressHeader.CreateAddressHeader("PasswordText", "http://siebel.com/webservices", "TESTPASSWORD")
        Dim addressHeader3 As AddressHeader = AddressHeader.CreateAddressHeader("SessionType", "http://siebel.com/webservices", "None")
        Dim addressHeaders() As AddressHeader = {addressHeader1, addressHeader2, addressHeader3}

        ' Endpoint address constructor with URI and address headers
        ' Replace <servername> in the following line with the name of your Siebel server.
        ' For example: http://actual-server/eai_enu...
        Dim endpointAddressWithHeaders As New EndpointAddress(New Uri("http://<servername>/eai_enu/start.swe?SWEExtSource=WebService&SWEExtCmd=Execute&WSSOAP=1"), addressHeaders)
        Dim MyService As New wsGetLOV.EAILOVPortClient("EAILOVPort", endpointAddressWithHeaders)

        Dim MyInput As New wsGetLOV.EAILOVGetListOfValues_Input
        Dim MyOutput As wsGetLOV.EAILOVGetListOfValues_Output
        Dim MyList(0) As wsGetLOV.ListQuery

        MyList(0) = New wsGetLOV.ListQuery
        MyList(0).Active = "Y"
        MyList(0).LanguageCode = "ENU"
        MyList(0).Type = "CUT_ACCOUNT_TYPE"
        MyInput.ListsQuery = MyList

        MyOutput = MyService.EAILOVGetListOfValues(MyInput)

        Dim myStrings As New List(Of String)

        ' We use nested loops because the results returned by the service is a list of
        ' lists though in our case, the result set is a list with a single item (this item
        ' being a list of multiple items)
        For Each myResultList As wsGetLOV.ListResult In MyOutput.ListsResult
            For Each myResultValue As wsGetLOV.ListValueResult In myResultList.ListValuesResult
                myStrings.Add(myResultValue.Value)
            Next
        Next

        ListBox1.DataSource = myStrings

    End Sub
End Class 
```

# windows-phone-7 - 停止循环功能全景 windows phone 7

> ID：13014993
> 
> 赞同：1
> 
> 时间：2012-10-22T15:46:41.157
> 
> 标签：windows-phone-7, cycle, panorama-control

有没有办法或解决方法来禁用 Windows Phone 7 中全景控制的循环功能？

我问这个是因为我把几个滚动查看器放在一起，我发现最好的方法是使用全景控件。

# c++ - C/C++ 中数据类型名称的含义

> ID：13014994
> 
> 赞同：1
> 
> 时间：2012-10-22T15:46:43.983
> 
> 标签：c++, c, types

在 C 和 C++ 中，内置整数类型的大小取决于实现。但是它们是否有任何预定义的预期含义，例如 int 应该代表机器字长等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:04:35.920

从历史上看，`int`它应该是机器硬件上最“自然”的整数类型；显然，“自然”有点主观，但在过去，它通常很明显，而且无论如何都没有那么多整数类型可用，所以制作与 a或 a`int`相同的大小是正常的过程。`long``short`

由于各种原因，大多数 64 位平台制作`int`32 位。人们很容易争辩说这不是最“自然”的长度，但人们希望 32 位整数成为默认值，并且`int`显然是默认整数类型。对于架构而言，它是否是最自然的成为次要的，它是否是所需的默认大小。

关于字长：从历史上看，这是最自然的，但在很多方面，现代机器上的“字长”是什么意思尚不清楚：您可以进行算术运算的最大尺寸？进出内存的总线大小？等等。传统上，“字长”被用来表示内部寄存器的宽度（当机器有它们时），或者基本总线传输的大小。（8088 通常被称为 8 位机器，尽管它有 32 位寄存器。）今天我不会过多地解释它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T15:53:46.123

有一些措辞，但不是很严格：

> 声明为字符 (char) 的对象应**足够大以存储实现的基本字符集的任何成员。**
> 
> 有五种标准有符号整数类型：“signed char”、“short int”、“int”、“long int”和“long long int”。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。(...)**普通整数具有执行环境架构所建议的自然大小**，提供其他有符号整数类型以满足特殊需要。

也没有关于浮动尺寸的严格建议：

> 有三种浮点类型：float、double 和 long double。double 类型提供的精度至少与 float 一样，long double 类型提供的精度至少与 double 一样。(...)**浮点类型的值表示是实现定义的。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:06:24.573

与 Java 不同，C 被设计为平台支持者，而不是独立平台。与使用最适合给定平台的数据类型大小相比，跨平台兼容性的优先级要低得多。因此，整数类型没有由 C 标准指定，并且完全是特定于平台的

# node.js - Nodejs - Frisby 测试

> ID：13014997
> 
> 赞同：0
> 
> 时间：2012-10-22T15:46:57.927
> 
> 标签：node.js

节点脚本必须调用一个 URL 并获取响应并使用响应的某个变量来调用下一个 url。是否可以？

在下面的示例中，我在其他脚本中使用令牌。

```
var http = require('http');
var options = {
    host: 'url' ,
    path: '/path',
    method: 'POST'
};
var req = http.request(options, function(res) {
    token="hi"; // to be populated by res
});
req.end();
exports.token = token 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:03:39.380

我认为您正在尝试`token`在它存在之前进行导出。当您分配`token = "hi"`时，这发生*在*http 请求完成并且您收到响应之后。你想要做的是`export`一个带有回调的函数，它从 url 返回你的数据。

```
var http = require('http');
var options = {
    host: 'url' ,
    path: '/path',
    method: 'POST'
};
exports.getToken = function (callback) {
    http.request(options, function(res) {
        callback(res);
    });
}; 
```

然后在您的另一个模块中，您将不得不调用`getToken`传递给它的回调函数的函数。

```
//I assume the above file is called tokenFinder.js
var tokenFinder = require('./tokenFinder');
var token;
tokenFinder.getToken(function (data) {
    token = data;
}); 
```

# c# - Zedgraph：带有日期轴的水平条形堆栈

> ID：13014998
> 
> 赞同：1
> 
> 时间：2012-10-22T15:47:00.037
> 
> 标签：c#, zedgraph

我尝试在 C# 中使用 ZedGraph 创建一个水平条堆栈。我已经做到了[这一点](http://img4.hostingpics.net/pics/689293Sanstitre.png)。这个图像应该是一种日历，一个条大小为 30 分钟，红色条表示忙碌，绿色表示空闲时间。

但是，正如您所看到的，X 值（时间）一点都不好。该图像仅代表一天（我的`XDate()`数据从 20/12/2011 0h0m0s 到 21/12/2011 0h0m0s）但是如果我放大我有 9999 年..

这是我的代码。我找不到我的错误。

谢谢你的帮助。

```
gPane.BarSettings.Type = BarType.Stack;
gPane.BarSettings.Base = BarBase.Y;
gPane.BarSettings.ClusterScaleWidth = 1; // Widen bars

gPane.XAxis.Title.Text = "Time (sec)";
gPane.XAxis.Scale.FontSpec.Angle = 65f;
gPane.XAxis.Type = AxisType.Date;
gPane.XAxis.Scale.Format = "dd-MMM-yy hh:mm";
gPane.XAxis.Scale.BaseTic = dataBar[0].X;
gPane.XAxis.Scale.Min = dataBar[0].X;
gPane.XAxis.Scale.Max = dataBar[dataBar.Count - 1].X;
gPane.XAxis.Scale.MajorUnit = DateUnit.Day;
gPane.XAxis.Scale.MinorUnit = DateUnit.Day;
gPane.XAxis.Scale.MinorStep = 1;
gPane.XAxis.Scale.MajorStep = 2;

foreach (PointPair pp in dataBar)
{
    //pp.X = XDate date (double)
    //pp.Y = 0 (free) ou 1 (busy)

    Color col = Color.Green;
    if (pp.Y == 1)
        col = Color.Red;

    gPane.AddBar("", /* I don't need it */
                new double[] { pp.X }, /* the current XDate date*/
                new double[] { 30 /* width of bar */ },
                col);
}

gPane.AxisChange(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:28:55.313

您是否尝试在添加栏时控制您的 XDate obj？尝试 xDate.AddDays(1) 来控制您的 xAxis 值。

# d - 不能从 D 中的 std.range 切片 Take！R？

> ID：13014999
> 
> 赞同：5
> 
> 时间：2012-10-22T15:47:02.453
> 
> 标签：d, phobos

我正在尝试使用切片运算符从 std.range 获取 take 函数的返回值的切片。我的代码：

```
auto tempChunk = ['a', 'b', 'c', 'd'];
auto a = tempChunk.take(3);
writeln(a[0..2]); 
```

在这种情况下，Take!R 只是 char[] 的别名，我希望它能够编译。但是，编译器告诉我`Take!(char[]) cannot be sliced with []`. 再举一个例子：

```
int[] arr1 = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]; 
auto s = arr.take(5);
writeln(s[0..4]); 
```

这将毫无问题地编译和运行，打印 [1, 2, 3, 4, 5]。在这一点上，我完全困惑为什么第一个例子不起作用，而第二个例子起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:00:54.770

**take**模板使用**hasSlicing**来确定是否可以返回输入切片而不是 Take!R 结构。检查实际的返回类型使其更加清晰：

```
import std.range, std.stdio;

void main()
{
    auto chararr = ['a', 'b', 'c', 'd'];
    auto a = chararr.take(3);
    writeln( typeid(typeof(a)) );

    auto intarr = [ 1, 2, 3, 4 ];  
    auto b = intarr.take(3);
    writeln( typeid(typeof(b)) );
}

// Output:
// std.range.Take!(char[]).Take
// int[] 
```

**hasSlicing**被明确指示为所有“窄字符串”返回*false* - 那些元素可能不代表单个字符，而是一个代码点（基于 char 和 wchar 的）。

现在，这是我的猜测开始的地方，但我想这样做是为了防止使用切片意外创建格式错误的 UTF-8 和 Co 字符串。如果您对 char[] 没有任何实际需要，最好使用 dchar[]。