# StackOverflow 问答 14846000-14846999

# android - 找到放置在视图中的图像

> ID：14846005
> 
> 赞同：0
> 
> 时间：2013-02-13T03:39:30.150
> 
> 标签：android, android-imageview

我有一个实现 OnDragListener 的类。我需要检查在视图中放置了哪个图像。请指导我如何做到这一点。

```
private class ChoiceDragListener implements OnDragListener {

    @Override
    public boolean onDrag(View v, DragEvent event) {
        switch (event.getAction()) { 
        case DragEvent.ACTION_DROP: 
            View view = (View) event.getLocalState(); 
            view.setVisibility(View.INVISIBLE); 
            ImageView dropTarget = (ImageView) v; 
            ImageView dropped = (ImageView) view; 
            dropTarget.setImageDrawable(dropped.getDrawable());  
            break;
        case DragEvent.ACTION_DRAG_ENDED:
            //no action necessary
            break;
        default:
            break;
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:36:22.510

你必须遵循一些步骤：

1) 制作 MyDragEventListener**类**的对象。

```
MyDragEventListener myDragEventListener = new MyDragEventListener(); 
```

2）使用这个类来定位布局。

```
view.setOnDragListener(myDragEventListener); 
```

3)

```
 class MyDragEventListener implements View.OnDragListener {
       @Override
       public boolean onDrag(View v, DragEvent event) {              

              final int action = event.getAction();           
              switch(action) {

              case DragEvent.ACTION_DRAG_STARTED:
                        if (event.getClipDescription()
                          .hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN))
                        {
                         return true; //Accept
                        }
                        else{
                         return false; //reject
                        }

              case DragEvent.ACTION_DRAG_ENTERED:
               return true;

              case DragEvent.ACTION_DRAG_LOCATION:
              return true;

              case DragEvent.ACTION_DRAG_EXITED:
              return true;

             case DragEvent.ACTION_DROP:
                  ClipData.Item item = event.getClipData().getItemAt(0);
                    if(v == view){
                            //put your logic here
                        } 
                       return true;

              case DragEvent.ACTION_DRAG_ENDED:
                  if (event.getResult())
                  {  
                  //forther any updation not require.
                  }                       
                  return true;

              default: //unknown case
                  return false;

              }

             }

        } 
```

进口部分：

```
case DragEvent.ACTION_DROP:
              ClipData.Item item = event.getClipData().getItemAt(0);
                if(v == view){
                        //put your logic here
                    } 
                   return true; 
```

如果您查询然后发表评论。

# android - GooglePlay - 应用程序现在显示在列表中

> ID：14846006
> 
> 赞同：0
> 
> 时间：2013-02-13T03:39:30.500
> 
> 标签：android, google-play

我在 GooglePlay 中有一个应用程序。它曾经位于 Tools -> Top New Free 列表的第 36 位。我之前发布了 4 个版本的应用程序，并且每次它都留在列表中。上次更新后，该应用程序刚刚从列表中弹出并且没有显示。除了功能之外，应用程序中的所有内容都是相同的。

根据我的经验，这是我所知道的。如果应用程序在过去 30 天内更新或发布，并且表现良好，那么它将保持在免费列表的顶部。

即使它从第一个版本发布之日起仅停留 30 天，但距离第一个版本（第一个版本是 2013 年 1 月 17 日）还没有 30 天。

假设我的应用程序做得非常糟糕（很多很多错误，人们没有使用它..）但即便如此，它也应该在列表中，即它更新的第一天。

可能是什么原因？有人遇到过这个问题吗？

是否发布了新版本，解决了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:09:05.553

> 如果应用程序在过去 30 天内更新或发布，并且运行良好，则它会保留在免费列表中。

我相信这不是真的。更新应用程序不会将其保持为“新”。一个应用程序在初始发布后的一段时间内被标记为“新”，然后它就会下架。

# regex - 正则表达式：使用混淆分隔符匹配域

> ID：14846009
> 
> 赞同：0
> 
> 时间：2013-02-13T03:39:53.367
> 
> 标签：regex

我有这个传给我的正则表达式，它与我们这样的好域匹配： `google.com`,`google.com.us`等。在 Python 中：

```
 """([\d\w.][-\d\w.]{0,253}[\d\w.]+\.)+
        (AC|AD|AE|AERO|AF|AG|AI|AL|AM|AN|AO|AQ|AR|ARPA|
         AS|ASIA|AT|AU|AW|AX|AZ|BA|BB|BD|BE|BF|BG|BH|BI|
         BIZ|BJ|BM|BN|BO|BR|BS|BT|BV|BW|BY|BZ|CA|CAT|CC|
         CD|CF|CG|CH|CI|CK|CL|CM|CN|CO|COM|COOP|CR|CU|CV|CX|
         CY|CZ|DE|DJ|DK|DM|DO|DZ|EC|EDU|EE|EG|ER|ES|ET|EU|
         FI|FJ|FK|FM|FO|FR|GA|GB|GD|GE|GF|GG|GH|GI|GL|GM|
         GN|GOV|GP|GQ|GR|GS|GT|GU|GW|GY|HK|HM|HN|HR|HT|HU|
         ID|IE|IL|IM|INFO|INT|IO|IQ|IR|IS|IT|JE|JM|JO|JOBS|
         JP|KE|KG|KH|KI|KM|KN|KP|KR|KW|KY|KZ|LA|LB|LC|LI|LK|
         LR|LS|LT|LU|LV|LY|MA|MC|MD|ME|MG|MH|MIL|MK|ML|MM|
         MN|MO|MOBI|MP|MQ|MR|MS|MT|MU|MUSEUM|MV|MW|MX|MY|MZ|
         NA|NAME|NC|NET|NF|NG|NI|NL|NO|NP|NR|NU|NZ|OM|ORG|
         PA|PE|PF|PG|PH|PK|PL|PM|PN|PR|PRO|PS|PT|PW|PY|QA|
         RE|RO|RS|RU|RW|SA|SB|SC|SD|SE|SG|SH|SI|SJ|SK|SL|SM|
         SN|SO|SR|ST|SU|SV|SY|SZ|TC|TD|TEL|TF|TG|TH|TJ|TK|
         TL|TM|TN|TO|TP|TR|TRAVEL|TT|TV|TW|TZ|UA|UG|UK|US|
         UY|UZ|VA|VC|VE|VG|VI|VN|VU|WF|WS|XN|XN|XN|XN|XN|
         XN|XN|XN|XN|XN|XN|YE|YT|YU|ZA|ZM|ZW)""" 
```

现在，有时域会被“混淆”，例如：`google<.>com`, `google[.]com[.]us`，请注意奇怪的分隔符。我对正则表达式不是很好，我想知道是否有办法扩展这个 re 以便它匹配具有这些分隔符的域。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:13:58.237

首先，将 com co org 等放在您的正则表达式中并不是一个好主意。应该是一般的。您可以使用以下正则表达式作为替代：

```
(((https?)|(ftp)):\/\/)?([\da-z\.-]+)(\[\.\]|<\.>|\.)([a-z\.]{2,8})([\/\w \.-]*)*\/? 
```

它也会匹配 google.com、google[.]com 和 google<.>com。

不过，如果您想使用您的正则表达式，请使用以下命令：

```
([\d\w.][-\d\w.]{0,253}[\d\w.]+(\[\.\]|<\.>|\.))+(AC|AD|AE|AERO|AF|AG|AI|AL|AM|AN|AO|AQ|AR|ARPA|AS|ASIA|AT|AU|AW|AX|AZ|BA|BB|BD|BE|BF|BG|BH|BI|BIZ|BJ|BM|BN|BO|BR|BS|BT|BV|BW|BY|BZ|CA|CAT|CC|CD|CF|CG|CH|CI|CK|CL|CM|CN|CO|COM|COOP|CR|CU|CV|CX|CY|CZ|DE|DJ|DK|DM|DO|DZ|EC|EDU|EE|EG|ER|ES|ET|EU|FI|FJ|FK|FM|FO|FR|GA|GB|GD|GE|GF|GG|GH|GI|GL|GM|GN|GOV|GP|GQ|GR|GS|GT|GU|GW|GY|HK|HM|HN|HR|HT|HU|ID|IE|IL|IM|INFO|INT|IO|IQ|IR|IS|IT|JE|JM|JO|JOBS|JP|KE|KG|KH|KI|KM|KN|KP|KR|KW|KY|KZ|LA|LB|LC|LI|LK|LR|LS|LT|LU|LV|LY|MA|MC|MD|ME|MG|MH|MIL|MK|ML|MM|MN|MO|MOBI|MP|MQ|MR|MS|MT|MU|MUSEUM|MV|MW|MX|MY|MZ|NA|NAME|NC|NET|NF|NG|NI|NL|NO|NP|NR|NU|NZ|OM|ORG|PA|PE|PF|PG|PH|PK|PL|PM|PN|PR|PRO|PS|PT|PW|PY|QA|RE|RO|RS|RU|RW|SA|SB|SC|SD|SE|SG|SH|SI|SJ|SK|SL|SM|SN|SO|SR|ST|SU|SV|SY|SZ|TC|TD|TEL|TF|TG|TH|TJ|TK|TL|TM|TN|TO|TP|TR|TRAVEL|TT|TV|TW|TZ|UA|UG|UK|US|UY|UZ|VA|VC|VE|VG|VI|VN|VU|WF|WS|XN|XN|XN|XN|XN|XN|XN|XN|XN|XN|XN|YE|YT|YU|ZA|ZM|ZW) 
```

如果您需要任何描述，请告诉我。

# objective-c - 字符串中的子字符串

> ID：14846010
> 
> 赞同：0
> 
> 时间：2013-02-13T03:39:55.833
> 
> 标签：objective-c, nsstring, substring

在我的应用程序中，我需要在很长的字符串中搜索子字符串。该字符串是从具有多行的文件中读取的。

我想读取字符串中通常可用的“（”和“）”之间的子字符串并将它们保存到数组中。字符串示例：

```
bla bla bla ( text) bla bla bla bla (text) bla bla
bla ( text) bla bla bla bla (text) bla bla ( text ) 
```

“文本”部分是我需要的部分。

这样做最有效的方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:26:09.787

使用 NSScanner[扫描器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)并首先扫描到“（”，然后扫描它，然后扫描到“）”。然后得到最后的扫描结果。

# ruby - 数据映射器中的堆栈溢出具有 n 关系

> ID：14846011
> 
> 赞同：1
> 
> 时间：2013-02-13T03:39:57.313
> 
> 标签：ruby, ruby-datamapper, datamapper-1.2

在我的 Profile 类中，与 :fields 有关联是有问题的。如果它在那里并且我运行以下命令：

```
user = User.create
user.profiles << Profiles.new
user.save
Profile.all 
```

抛出以下异常：

```
SystemStackError: stack level too deep
    from /Users/jon/.rvm/gems/ruby-1.9.3-p194/gems/dm-core-1.2.0/lib/dm-core/support/ordered_set.rb:319 
```

为什么会这样？有解决方法吗？这是代码：

```
require 'rubygems'
require 'data_mapper'
require 'dm-timestamps'
require 'active_support/core_ext'
DataMapper::Model.raise_on_save_failure = true
class User
  include DataMapper::Resource
    property :id, String, :default => lambda {|r,p| SecureRandom.uuid}, :key=>true
    property :givenName, String, :length => 255, :default => ""
    property :surname, String, :length => 255, :default => ""
    property :isTestUser, Boolean, :default => false
    has n, :organizations
    has n, :profiles

    def default_profile
        profiles.all(:organization => nil).first
    end

end

class Profile
    include DataMapper::Resource
    property :id, Serial
    belongs_to :organization, :required => false
    belongs_to :user
    has n, :fields # if i remove this line then Profile.all doesn't puke, if I have this line then any call to Profile.all fails with stack overflow.
end

class Field
    include DataMapper::Resource
    property :id, Serial
    property :fieldType, String, :length => 200, :required => true
    property :valueType, String, :length => 200, :required => true
    property :value, String, :length => 500, :required => true
    belongs_to :profile
end

class Organization
    include DataMapper::Resource

    property :id,   Serial
    property :name, String
    timestamps :at

    belongs_to :user, :required=>false

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:12:28.837

has n, :fields 导致了某种名称冲突。将 Field 更改为 ProfileField 并将 :fields 更改为 :profile_fields 问题就消失了。

# c# - 在 64 位 Windows 上启动 msconfig.exe

> ID：14846014
> 
> 赞同：1
> 
> 时间：2013-02-13T03:40:18.250
> 
> 标签：c#, x86, 64-bit

我有一个带有代码的表格：

```
private void msconfigButton_Click(object sender, EventArgs e)
{
    System.Diagnostics.Process.Start("msconfig.exe"); 
} 
```

这个想法是我单击一个按钮，它会为我启动 msconfig。问题是当我在 x64 机器上运行它时，它`Win32Excpetion`会因未处理的错误而崩溃，说它找不到文件。我知道该文件存在于 C:\Windows\System32\ 中，并且我相信这与我正在为`x86`CPU 类型编译的项目有关。

如何重写代码以在 64 位计算机上启动 msconfig.exe？我不想更改 CPU 类型来构建它。我的想法是我可以在 32 位或 64 位 Window 7 机器上运行这个程序，并且它的工作原理是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:02:48.503

似乎避免此问题的唯一方法是更改​​构建类型。请参阅 [http://social.msdn.microsoft.com/Forums/pl/csharplanguage/thread/ad97bb81-0566-4eb9-b1e1-c591476a4958](http://social.msdn.microsoft.com/Forums/pl/csharplanguage/thread/ad97bb81-0566-4eb9-b1e1-c591476a4958) 如果有什么似乎可以查看文件系统重定向器可以提供一些见解或解决方法！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:49:02.213

解决此问题的一种方法是编写一个启动 msconfig 的简单 x64 应用程序。

然后，您的应用程序将保持为 x86，并且您的 Process.Start 将启动您的包装应用程序，而后者又将启动 msconfig。

例如，使用以下内容创建一个新的控制台应用程序（我们称之为“msconfigstarter”）：

```
class Program
{
    private static void Main(string[] args)
    {
        System.Diagnostics.Process.Start("c:\\windows\\system32\\msconfig.exe");
    }
} 
```

将其构建平台设置为 x64。

现在，您可以将该 exe ('msconfigstarter.exe') 作为内容文件添加到您的应用程序项目中，该内容文件将复制到您的输出文件夹中，或者将其作为输出文件包含在您的安装程序中。

然后将您的按钮单击代码更改为：

```
private void msconfigButton_Click(object sender, EventArgs e)
{
    System.Diagnostics.Process.Start("msconfigstarter.exe"); 
} 
```

这解决了文件系统重定向器将 System32 文件夹交换为 x86 应用程序的问题，因为您启动了一个您知道存在“msconfigstarter.exe”的 x64 应用程序，然后它可以访问 msconfig.exe，因为没有为它重定向 system32 文件夹。

# grails - 在 Groovy/Grails 启动时运行查询

> ID：14846018
> 
> 赞同：0
> 
> 时间：2013-02-13T03:40:54.040
> 
> 标签：grails, gsp

我目前正在学习 Grails/Groovy（我是新手）并尝试建立一个电子商务类型的网站。我希望用户看到的第一页是我们所有商品类别的列表。每个类别都有项目。如果我将类别硬编码到主页中，我可以单击每个链接（每个类别）并转到我的控制器并查询该特定类别的每个项目。但我不知道如何在启动时查询类别，因为似乎没有任何控制器为我的 index.gsp 运行。

在启动时查询我的类别的最佳方法是什么，然后可能每次我回到我的 index.gsp 页面？下面是我用来对类别进行硬编码的代码：

```
<li><g:link id="2" controller="category" action="show">Category 1</g:link></li>
<li><g:link id="3" controller="category" action="show">Category 2</g:link></li> 
```

单击这些链接后，我的控制器就可以正常工作，并且该类别的项目会正确列出。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:41:40.133

尽管 UrlMappings.groovy 配置更改应该是首选解决方案，但是如果您不想这样做，那么您也可以在 index.gsp 中发出重定向。所以你的索引文件看起来像：

```
<% response.sendRedirect("${request.contextPath}/category/index") %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:44:15.593

默认 index.gsp 不映射到控制器（如您所见）。在 中`URLMappings.groovy`，您可以更改默认 URL`"/"`以映射到您想要的任何控制器。该控制器可以查询数据库并显示类别（因此您的默认控制器可能是`CategoriesController`示例）。

URL 映射的文档是[http://grails.org/doc/2.2.x/ref/Plug-ins/URL%20mappings.html](http://grails.org/doc/2.2.x/ref/Plug-ins/URL%20mappings.html)

# twitter-bootstrap - 如何使用 Bootstrap 在移动设备上显示表格？

> ID：14846026
> 
> 赞同：92
> 
> 时间：2013-02-13T03:41:40.910
> 
> 标签：twitter-bootstrap, twitter-bootstrap-3

我的表格在桌面上显示良好，但是一旦我尝试查看移动版本，我的表格最终对于移动设备屏幕来说太宽了。我正在使用响应式布局。

如何设置移动视图的表格宽度？还有哪些其他替代方法可以使用 Bootstrap 在移动视图上呈现表格数据？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-10-04T05:56:02.247

Bootstrap 3 引入了[响应式表](http://getbootstrap.com/css/#tables-responsive)：

```
<div class="table-responsive">
  <table class="table">
    ...
  </table>
</div> 
```

Bootstrap 4 类似，但通过一些[新类](https://getbootstrap.com/docs/4.0/content/tables/#responsive-tables)进行了更多控制：

> ...响应所有视口...使用`.table-responsive`. 或者，选择一个最大断点，通过使用`.table-responsive{-sm|-md|-lg|-xl}`.

感谢[Jason Bradley](http://jasonbradley.me/bootstrap-responsive-tables/)提供的示例：

![响应表](../Images/18d2958af272388b99d5db7d0f4c31bf.png)

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-02-13T03:49:48.437

您也可以考虑尝试其中一种方法，因为较大的表格在移动设备上并不完全友好，即使它有效：

[http://elvery.net/demo/responsive-tables/](http://elvery.net/demo/responsive-tables/)

我偏爱“No More Tables”，但这显然取决于您的应用程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-13T03:45:40.873

bootstrap 中的所有表格都根据它们所在的容器进行拉伸。您可以将表格放在一个`.span`元素中以控制大小。这个 SO Question 可以帮助你

[为什么 Twitter Bootstrap 表格总是有 100% 的宽度？](https://stackoverflow.com/questions/10687306/twitter-bootstrap-why-table-is-always-100-widh)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-14T16:00:18.570

经过近 1 个月的研究，我发现下面的代码在我的网站上运行得非常漂亮且 100% 完美。要检查预览它是如何工作的，您可以从链接中检查。[https://www.jobsedit.in/state-government-jobs/](https://www.jobsedit.in/state-government-jobs/)

和

[https://www.jobsrob.in/category/central-government-jobs/](https://www.jobsrob.in/category/central-government-jobs/)

CSS 代码-----

```
@media only screen and (max-width: 500px)  {
    .resp table  { 
        display: block ; 
    }   
    .resp th  { 
        position: absolute;
        top: -9999px;
        left: -9999px;
        display:block ;
    }   
     .resp tr { 
    border: 1px solid #ccc;
    display:block;
    }   
    .resp td  { 
        /* Behave  like a "row" */
        border: none;
        border-bottom: 1px solid #eee; 
        position: relative;
        width:100%;
        background-color:White;
        text-indent: 50%; 
        text-align:left;
        padding-left: 0px;
        display:block;      
    }
    .resp  td:nth-child(1)  {
        border: none;
        border-bottom: 1px solid #eee; 
        position: relative;
        font-size:20px;
        text-indent: 0%;
        text-align:center;
}   
    .resp td:before  { 
        /* Now like a table header */
        position: absolute;
        /* Top/left values mimic padding */
        top: 6px;
        left: 6px;
        width: 45%; 
        text-indent: 0%;
        text-align:left;
        white-space: nowrap;
        background-color:White;
        font-weight:bold;
    }
    /*
    Label the data
    */
    .resp td:nth-of-type(2):before  { content: attr(data-th) }
    .resp td:nth-of-type(3):before  { content: attr(data-th) }
    .resp td:nth-of-type(4):before  { content: attr(data-th) }
    .resp td:nth-of-type(5):before  { content: attr(data-th) }
    .resp td:nth-of-type(6):before  { content: attr(data-th) }
    .resp td:nth-of-type(7):before  { content: attr(data-th) }
    .resp td:nth-of-type(8):before  { content: attr(data-th) }
    .resp td:nth-of-type(9):before  { content: attr(data-th) }
    .resp td:nth-of-type(10):before  { content: attr(data-th) }
} 
```

HTML 代码——

```
<table>
<tr>
<td data-th="Heading 1"></td>
<td data-th="Heading 2"></td>
<td data-th="Heading 3"></td>
<td data-th="Heading 4"></td>
<td data-th="Heading 5"></td>
</tr>
</table> 
```

# ruby - Sinatra 中的通用设置

> ID：14846031
> 
> 赞同：3
> 
> 时间：2013-02-13T03:41:56.533
> 
> 标签：ruby, sinatra

我在 Sinatra 有一门课，在那里我设置了一些设置（来自 JSON，碰巧）：

```
class Pavo < Sinatra::Base
  configure :development do
    set :config, JSON.parse(File.open(File.dirname(__FILE__) + "/pavo.configuration.development.json", "rb").read)
    set :config_mtime, File.mtime(File.dirname(__FILE__) + "/pavo.configuration.development.json")
  end

  [...]

  get '/' do
    puts "whatever"
  end
end 
```

该类有一个模型，需要读取这些设置。

```
class Resolver < Sinatra::Base
  def get_data(workpid)
    url_str = settings.config['public']['BOOKS_DATA_SERVICE_URL'].gsub('${WORKPID}', workpid)
    return Resolver.get_json(url_str)
  end
  [...]
end 
```

但是，Resolver 类无法做到这一点：Resolver:Class 的未定义方法“config”。

也许我有错误的范围，或者我应该使用 Sinatra::Application？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T00:46:25.340

当您获得一个要从您那里继承的类时，`Sinatra::Base`您就是在制作一个 Sinatra 应用程序。每个应用程序都有*自己的* `settings`对象。如果您想跨应用程序共享设置，您有一些选择：

1.  合并应用程序。
2.  使设置更易于全局访问。
3.  继承（见下面的编辑）

合并它们很容易（除非有一些我们不知道的特殊原因），你基本上把它们放在同一个类中。

为了使设置更易于全局访问，我将执行以下操作：

a) 将整个应用程序包装在一个模块中以命名它。
b) 将您要使用的设置放入可通过“getter”方法访问的类实例变量中。

例如

```
module MyNamespace

  def self.global_settings
    @gs ||= # load your settings
  end

  class App < Sinatra::Base
    configure do
      set :something_from_the_global, MyNamespace.global_settings.something
    end
  end

  class SecondaryApp < Sinatra::Base
    helpers do
      def another_method
        MyNamespace.global_settings.something_else # available anywhere
      end
    end
    configure do # they're also available here, since you set them up before the app
      set :something_from_the_global, MyNamespace.global_settings.something
    end
  end

end 
```

如果您有一些非常小的应用程序，那很好，但如果您使用多个应用程序，那么您需要将它们分开一点。我倾向于组织应用程序的方式是从 rackup 文件（通常是`config.ru`）中删除除`require`s 和`run`. 我将中间件和应用程序设置放在另一个文件中，通常`app/config.rb`这样我就知道它是来自`config.ru`. 然后每个应用程序都有自己的文件（例如`app/app.rb`, `app/secondary.rb`）

```
# app/config.rb

require "app"
require "secondary"

module MyNamespace
  # set up your getters… e.g.

  def self.global_settings
    @gs ||= # load your settings
  end

  def self.app
    Rack::Builder.app do

      # …and middleware here
      use SecondaryApp
      run App
    end
  end
end

# config.ru

require 'rubygems'
require 'bundler'
Bundler.require

root = File.expand_path File.dirname(__FILE__)
require File.join( root , "./app/config.rb" )

map "/" do
  run MyNamespace.app
end 
```

这种设置有很多好处——更容易测试；更容易组织；您可以更轻松地移动应用程序。但是YMMV一如既往。

* * *

我还应该补充一点，因为我很失职，所以也可以使用继承，例如：

```
require 'sinatra/base'    

module MyNamespace
  class Controller < Sinatra::Base
    configure :development do
      set :config, "some JSON"
      set :mtime, Time.now.to_s
    end
  end

  class App1 < Controller

    get "/app1" do
      "in App1 config: #{settings.config} mtime: #{settings.mtime}"
    end
  end

  class App2 < Controller

    get "/app2" do
      "in App2 with config: #{settings. config} mtime: #{settings.mtime}"
    end
  end
end 
```

设置、路由、助手、过滤器都是继承的，因此如果您在祖先应用程序中配置某些内容，它将在继承者中可用。有时这样做会更好，可能是当设置对 Sinatra 应用程序来说只是“全局”时，或者当您想要创建可重用的应用程序和控制器时。其他时候，您需要可在模型、库等中使用的设置，然后我首先给出的更具全局性的解决方案将是最好的。

# javascript - 事件触发多次

> ID：14846033
> 
> 赞同：1
> 
> 时间：2013-02-13T03:42:08.897
> 
> 标签：javascript, jquery

```
$("input[type='color']").on("change blur", function() {
    alert("changed");
}); 
```

这也适用于其他元素，但这是一个很好的例子。在某些浏览器上使用颜色输入类型时，它会在“更改”上触发，但不会在“模糊”上触发，在某些浏览器上会在“模糊”上触发，但不会在“更改”上触发，而在某些浏览器上会同时触发。

有没有好的方法来确保它只触发一次？

我这里主要讲各种手机浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T03:46:42.627

您可以尝试使用`.one()`事件处理程序而不是`.on()` [http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T04:44:41.057

我已经编写了一个专门的版本`.one()`，它将在处理第一个事件后重新绑定事件处理程序。它在包装器中执行此操作，因此不必更改事件处理程序代码本身。

```
$.fn.one_rebind = function(events, listener) {
  return this.one(events, function fn() {
    var $self = $(this).unbind(events);

    listener.apply(this, arguments);

    setTimeout(function() {
      $self.one(events, fn);
    }, 0);
  });
};

$('input[type=color]').one_rebind('change blur', function(evt) {
  document.getElementById('debug').innerText += ' ' + evt.type;
}); 
```

虽然经过测试，但您的里程可能会有所不同:)

[**演示**](http://jsbin.com/ocisow/3/edit?html,js,output)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T03:46:53.813

用这个开始你的功能：

```
var now = new Date().getTime();
if( arguments.callee.lastcalled > now-250) return false;
arguments.callee.lastcalled = now; 
```

这样做是为了限制函数每 250 毫秒被调用一次以上（这通常就足够了，而不会冒丢失实际重复项的风险）

# php - 在任何浏览器中禁用后退按钮的替代方法

> ID：14846037
> 
> 赞同：3
> 
> 时间：2013-02-13T03:42:33.227
> 
> 标签：php, javascript, web-applications

是否有任何替代方法可以禁用任何浏览器的后退按钮以避免以下情况：

1.  用户正在填写一个大表格
2.  用户不小心按下了返回按钮
3.  当用户返回页面时，他们必须再次填写表单，因为表单已被擦除

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T03:52:03.930

查看[sisyphus.js](http://simsalabim.github.com/sisyphus/)。正是为了这个目的。它将 GMail 样式（客户端）自动保存到任何 HTML 表单。在您要保存的表单的页面中添加这行 JavaScript：

```
$('form').sisyphus(); 
```

当用户填写此表单时，库将自动在本地保存他们键入的任何内容。如果他们离开页面（或者浏览器崩溃，只要返回到同一页面就会用他们的所有数据自动填充表单。一旦他们成功提交表单，sisyphus.js 将清除本地缓存的输入数据。

有一个 Sisyphus 的替代品，我还没有尝试过，叫做[Garlic.js](http://garlicjs.org/)，据说它对旧浏览器有更好的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:53:38.160

您需要在表单上跟踪一些脏标志。浏览器有一个`onbeforeunload`事件。订阅此事件并向用户弹出一个对话框，他是否真的想离开该页面。

请记住，此事件会因页面上的任何导航而被触发。

# xaml - 无法以编程方式加载应用栏

> ID：14846038
> 
> 赞同：0
> 
> 时间：2013-02-13T03:42:55.840
> 
> 标签：xaml, microsoft-metro, winrt-xaml

当我将 appbar 作为资源对象附加到页面时，我无法显示 appbar。

以下代码无法生成有效的应用栏：

**应用程序.xaml**

```
 <AppBar x:Key="RegisterHome_TopAppBar" >
        <AppBar.Content>
            <Grid>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button x:Name="RegisterHome_MaterialsButton" />
                    <Button x:Name="RegisterHome_ServicesButton"  />
                </StackPanel>
            </Grid>
        </AppBar.Content>
    </AppBar> 
```

**一些代码隐藏文件**

```
 var view = flipView.SelectedItem as Register.Home;

        AppBar appbar = Application.Current.Resources["RegisterHome_TopAppBar"] as AppBar;

        view.TopAppBar = appbar; 
```

**注意：当我使用此代码时，它工作正常：**

```
 var appbar = new AppBar();
            StackPanel sp = new StackPanel();
            sp.Orientation = Orientation.Horizontal;
            Button myButton = new Button();
            myButton.Content = "Click Me";
            sp.Children.Add(myButton);
            appbar.Content = sp;

            view.TopAppBar = appbar; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:57:10.340

将 UI 元素声明为资源通常是个坏主意。当您这样做时，您不会在每次访问它并在不同位置使用它时都获得一个新实例。您会得到一个实例，在这种情况下是整个应用程序。UI 元素不能有多个父元素，但如果您在两个地方甚至同一控件的两个实例中使用该资源，则您违反了这一点。

相反，您应该使用模板作为资源，这将生成相同 UI 的新副本，并将它们注入到您使用模板的任何位置。在这种情况下，您可以将`Content`标签内的所有内容放入 a`DataTemplate`中，然后获取该资源并将其分配给新`AppBar`实例的`ContentTemplate`属性。这样，您每次都会获得一个单独的实例，但子对象和布局相同。

# c# - 将数据从 C# 传递到 jQuery

> ID：14846040
> 
> 赞同：3
> 
> 时间：2013-02-13T03:43:16.657
> 
> 标签：c#, javascript, jquery, ajax, processing

寻求一些建议如何最好地处理以下情况，我是一名独立程序员。

我目前正在开发一个 C# Winforms 应用程序，我正在编写的新功能允许用户创建 Processing.js 草图以进行数据分析。我已经构建了一个 Processing.js IDE（工作），它允许用户编写和测试 Processing.js 草图和 HTML 代码。

最后一个难题是将数据库中的数据暴露给草图。

我应该调查以实现这一目标的最佳方法是什么？

数据位于 Firebird 数据库中，并使用 NHibernate 访问/操作。数据访问是用 C# 编写的，数据访问层中的方法从数据库返回在整个应用程序中使用的对象。理想情况下，我想访问这些数据以创建处理草图。

Processing.js IDE 还包括 jQuery 库。如何使用 jQuery 检索数据库数据。我可以调用位于数据访问层的 C# 方法吗？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:35:47.853

1.  您将需要一个 REST 服务，您将使用 jQuery 从 UI 调用该服务。

2.  您的 REST 服务必须返回 JSON 结果，否则会使事情变得更加复杂。

3.  在 UI 中，您将使用 $.ajax() 函数调用 Web 服务。

    从服务中获取结果后，您可以在 javascript 中操作数据并显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:58:00.750

最好的方法可能是创建一个 Web 服务（WCF 或 Asmx）来访问数据，并让您的客户端（Processing.js）在页面加载后使用 JSON 或 XML 从那里获取数据。通过 jQuery 方法使用此类服务`ajax`​​很简单，您将在客户端获得更干净的类似 MVC 的环境。

所以，重申一下：

1.  使用 C# 和现有方法创建 Web 服务，以从数据库中检索数据并通过 HTTP 将其发送到客户端
2.  `ajax`使用jQuery 核心库中的或类似功能访问此服务。
3.  在客户端处理数据并为获取的数据创建必要的 DOM 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T03:58:31.583

您需要对服务器进行 Ajax 调用（Web 方法）以发送/接收数据。您在后端的 .NET 代码将连接到数据库。

# javascript - AttachEventListener('change' ...) 在带有下拉选择/离子的 IE9 中不起作用

> ID：14846041
> 
> 赞同：1
> 
> 时间：2013-02-13T03:43:32.850
> 
> 标签：javascript, cross-browser, internet-explorer-9, addeventlistener

我正在使用以下代码（简化版），它适用于新旧 firefox（3.6 和 12）以及 IE7 和 IE8。但在 IE9 中没有。

```
if (aDropdown.addEventListener)
   aDropdown.addEventListener("change", function(){alert("please work");} , false);
else
   aDropdown.attachEvent("onchange", function(){alert("please work");} ); 
```

这里可能是什么问题？我尝试对 and 使用单引号 (') `change`，`onchange`但没有运气。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:14:31.753

```
<!DOCTYPE html> 
```

您是否在 html 顶部添加了这个，以便它可以作为标准模式运行？

[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

# c - 如何在 C HTTP 客户端程序中将 HTTP 请求写入文件

> ID：14846044
> 
> 赞同：0
> 
> 时间：2013-02-13T03:43:38.327
> 
> 标签：c, http, sockets, network-programming, file-descriptor

有人可以告诉我如何将如下的 HTTP 请求写入文件（FILE *str）

GET /HTTP/1.0 主机：Google.com 连接：关闭

我正在尝试编写一个 HTTP 客户端程序，但此时我陷入了困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:48:51.380

`fputs("GET /HTTP/1.0 Host:Google.com Connection:close \r\n\r\n", str);`??

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:39:44.850

如果只是写入文件，您可以使用 fwrite、fputs、write 和其他此类函数。但由于它是一个 HTTP 客户端，我认为它必须是一个套接字写入，在这种情况下，你可以实现自己的套接字代码，也可以使用“curl”库来实现这个功能。

更多参考：[http ://curl.haxx.se/libcurl/c/simple.html](http://curl.haxx.se/libcurl/c/simple.html)

# regex - 如何在 Perl 中的正则表达式匹配后打印行？

> ID：14846045
> 
> 赞同：2
> 
> 时间：2013-02-13T03:43:39.417
> 
> 标签：regex, perl

我正在解析格式如下的文本文件

```
> alpha
apple
airplane
art
> beta
bear
blue
beat
> charlie
cow
cent
coat 
```

我正在尝试查找`alpha beta charlie`具有主题（例如“ta”）的条目（）。如果找到了主题，那么我将尝试打印出每个条目下方的单词 ( `bear blue beat`)。所以在这个例子中，我想要以下输出

```
> beta
bear
blue
beat 
```

我已经想出了如何打印入口行，但不知道如何打印出下面的行。任何想法将不胜感激。

```
my $motif = "ta";
my $file = "file.pl";
open(INPUT, $file) or die "Can't open file.\n";
parse($motif);

sub parse{
    my ($x) = (@_);
    while(<INPUT>){
        if($_ =~ />*($x)/){
            print $_."\n";
#       if($_ !~ />/){
#           print $_."\n";
        }else{
            next;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T04:45:36.860

这是另一种选择：

```
use strict;
use warnings;

my $motif = pop;
local $/ = '>';    # record separator

while (<>) {
    chomp;
    print $/ . $_ if /(?<=\x20).*?$motif/;
} 
```

用法：`perl script.pl data.txt 'ta'`

在 data.txt 中输出您的数据：

```
> beta
bear
blue
beat 
```

该符号`local $/ = '>'`将记录分隔符设置为`>`而不是通常的`\n`，因此每个`>`标记都标记了已读取记录的开始。您搜索的行在 之后有一个空格`>`，这就是积极的后视`(?<=\x20)`尝试匹配的内容。

您可以通过执行以下操作将输出重定向到文件：`perl script.pl data.txt 'ta' >output.txt`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T03:57:42.393

那么，你需要保持循环状态。匹配触发“打印”状态，不匹配则解除触发。所以你有这样的东西吗？

```
sub parse {
  my ($x) = (@_);
  my $printable = 0

  while (<INPUT>) {
    if ($_ =~ /^>.*($x)/) {
      print $_;
      $printable = 1;
    } elsif ($_ =~ /^>/) {
      $printable = 0;
    } elsif ($printable) {
      print $_;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T03:55:53.767

基本上，您可以使用变量 ( `$print_flag`) 来查看是否应该打印该行。如果您获得所需的匹配项，则将其设置为 1（评估为 true），如果您匹配以开头`">"`但不包含`$motif`.

试试这个（警告：未经测试）：

```
use strict;    #Always!
use warnings;  #Always!
my $motif = "ta";
my $file = "file.pl";
open(my $input,"<", $file) or die $!; #two argument open: bad!
parse($motif);

sub parse{
    my ($x) = (@_);
    my $print_flag = 0;
    while(<$input>){

        chomp; #removes trailing EOL character
        if(/^>.*($x)/)   #Don't need $_
        {    
            $print_flag = 1;
        }
        elsif(/^>/)
        {
            $print_flag = 0;
        }

        if($print_flag)
        {
            print "$_\n";
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T10:51:43.567

这种类型的问题对于 Perl 范围运算符（在这种情况下更普遍地称为“触发器”运算符）来说似乎很自然。但是，您的要求细节最终使它比我预期的要复杂一些：

```
#!/usr/bin/env perl    

use strict;
use warnings;

parse('ta');

sub parse {
  my $pattern = shift;

  my $seq;
  while (<DATA>) {
    if ($seq = /^>.*$pattern/ ... (/^>/ && !/^>.*$pattern/)) {
      print unless $seq =~ /E0$/;
    }
  }
}

__DATA__
> alpha
apple
airplane
art
> beta
bear
blue
beat
> charlie
cow
cent
coat 
```

输出：

```
> beta
bear
blue
beat 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T22:49:48.810

如果匹配后的行数总是相同（三），那么这个骇人听闻的“匹配倒计时”成语就可以了：

```
 perl -ne '$m=4 if (/^>s/ ); print if ($m-->0);' 
```

我们使用`"4"`来匹配行加上它后面的行数 ( `3`)，然后我们`$m--`在继续进行时使用 倒计时`print`。我`$m`用来模仿 shell 中的类似选项`grep`。但是，我实际上不确定这**是否是**一个成语，或者如果是这样的话，它的公认名称是什么。`flip-flop`范围方法可能`...`在脚本中更可取或更广泛使用 - 但这里有一个独立的脚本来尝试使用更hackish的方法。

传入要搜索的行数和模式作为参数：

```
#!perl
use v5.16; # strict & warnings

my $linesafter ; 
my $num = shift ;                                                              
my $pat = shift ;                                                              

while (<DATA>) {                                                               
  $linesafter = $num if ( /^> $pat/ );                                         
  print if ($linesafter-->0); 
}                                                                              

__DATA__                                                                       
> alpha                                                                        
apple                                                                         
airplane                                                                     
art                                                                           
> beta                                                                         
bear                                                                           
blue                                                                          
beat                                                                          
> charlie                                                                     
cow                                                                           
cent                                                                        
coat 
```

# emacs - emacs 中的 Python 3.3（ropemacs 支持）

> ID：14846048
> 
> 赞同：7
> 
> 时间：2013-02-13T03:43:53.780
> 
> 标签：emacs, python-3.x, ropemacs

我在 python 3.3 中运行 arch linux 和脚本我想要类似 IDE 的功能（自动完成、语法检查器等）。我已经安装了绳索、绳索模式和 pymacs。ropemacs 是否支持 python 3.x？

如果没有，建议其他方法（如果我得到上述功能，我准备考虑 vim）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T15:30:06.667

根据[其网页，原始的绳索库确实支持 Py3k](https://github.com/python-rope/rope)

你

```
pip install rope_py3k 
```

或从[PyPi](https://pypi.python.org/pypi/rope_py3k)下载。目前（16 年 1 月），github 项目页面的版本比 PyPi 更新。

然后你安装`Pymacs`，从[它的网站](http://pymacs.progiciels-bpi.ca/index.html)。该代码[似乎也托管在 github 上](https://github.com/pinard/Pymacs)。

最后，

```
pip install ropemacs 
```

或从[PyPi](https://pypi.python.org/pypi/ropemacs)或[github](https://github.com/python-rope/ropemacs)再次下载。

特别是，在 2012年 6 月 25 日（截至 2014 年）[最后一次提交rope_py3k 源代码](https://bitbucket.org/zjes/rope_py3k/commits)*之后，* [Python 3.3 于 2012 年 9 月 29 日发布。](http://docs.python.org/3.3/whatsnew/3.3.html)

 *所以 Python 3.3 的主要新特性（与 Python 3.2 相比）（基于我的个人喜好）不能明确支持：

*   `yield from`更容易从一个生成器委托/转发值
*   再次允许`u'unicode'`语法（存在于 >=Py2.7 和
*   的异常层次结构`IOErrors`，基于`class OSError`
*   `time.perf_counter()`等。到具有高亚秒精度的持续时间
*   标准库中的新功能：
    *   `ipaddress`,
    *   `lxma`（压缩），
    *   `unittest.mock`,
    *   `venv`（集成 PyPi 的 virtualenv）

（有关完整列表，请查看[Python 3.3 发行说明](http://docs.python.org/3.3/whatsnew/3.3.html)）

因此，虽然新 stdlib 模块、新函数、新异常类的自动完成功能可能无法正常工作，但最大的绊脚石可能是语句中添加的语法`yield`。

但我怀疑rope（或任何自动完成IDE）自省任何`import`ed模块以检查哪些函数/方法/变量可用于自动完成。所以以上所有可能（并且可以说应该）工作。

我当然会试一试。没有`yield from`检测到可能根本不是问题。我自己不是绳索用户，但由于您的问题而感兴趣。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-14T19:17:25.297

我多年来一直在使用 PyCharm 社区版，但就在今天我安装了 elpy（我相信它是绳索、绝地和 flymake 的超集），我非常高兴。我不确定 elpy 是否使用了rope、rope_py3k、jedi 或其他东西，但重构支持很棒：D

`sudo pip install rope`像大多数人一样，由于默认`python`使用 Python 3（我也在使用 ArchLinux），我无法运行，但我运行`sudo pip install rope_py3k`得很好。重构、语法高亮、自动完成和跳转到定义都运行良好。

以下是[安装说明](https://github.com/jorgenschaefer/elpy)和[文档](http://elpy.readthedocs.org/en/latest/introduction.html)。它似乎得到了很好的支持。我很高兴回来报告，看看我是否可以离开 PyCharm，以后只使用 elpy。

每当我遇到 elpy 问题时，我通常只是跑步`M-x elpy-config`，它会告诉我什么是坏的。我也跑步`M-x elpy-rpc-restart`只是为了确定。

**更新**

大约 2 个月了，带有 elpy 的 Emacs 仍然运行良好。我不必碰 PyCharm，而且可能再也不用碰了！我认为我所做的唯一更新是在`M-x customize-group RET elpy`. 我认为还有一个 Arch python3 更新，我需要重新安装`rope_py3k`，但这很容易。

另外，为了澄清，我还在我的基础安装和 virtualenvs 中安装了绳索。Python 3 是 Arch 中的默认设置，但我在 2.7 中有一些 virtualenvs，所以我需要`pip install rope`在我的 virtualenvs 和`pip install rope_py3k`基本安装中运行。*

# image - 如何轻松地将图像文件压缩成小尺寸？

> ID：14846049
> 
> 赞同：-3
> 
> 时间：2013-02-13T03:44:11.493
> 
> 标签：image, sockets, serversocket, udpclient

朋友们！请问，如果有人知道如何通过标准 java 工具压缩图像文件？我想通过 UDP 数据包发送图像文件，但出现图像尺寸太大的异常！！！请大家给点建议！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:48:19.593

看看[ImageWriteParam](http://java.sun.com/j2se/1.4.2/docs/api/javax/imageio/ImageWriteParam.html)或[pngtastic](https://github.com/depsypher/pngtastic/)

# python - Pylint 没有按预期工作

> ID：14846052
> 
> 赞同：1
> 
> 时间：2013-02-13T03:44:39.027
> 
> 标签：python, pylint

我正在使用 pylint 来检查错误。我的 python 代码在一个目录中，该目录包含许多其他子文件夹和文件。正在递归检查所有以 .py 结尾的文件夹文件。它工作正常。

我的问题是当我在主目录中运行脚本时，只有第一个 python 文件得到正确的报告。第二次和第四次根本不起作用。皮林特说

```
 ************* Module test.py
    F:  1: No module named test.py
    ***************
Global evaluation
-----------------
Your code has been rated at 0.00/10 (previous run: 0.00/10) 
```

每当我在主目录中运行我的脚本时，只有第一个文件报告是正确的。pylint 没有检查任何其他文件。（我在子目录中有近 50 个 python 文件）。

以下是我的代码：- [版本：-Python 2.7.2+]

```
"""
Automated error handling using pylint
1\. pylint --generate-rcfile > pylintrc

"""

import sys
import os 

if __name__ == '__main__' :
    if len(sys.argv) > 1:
        os.system(">output.txt")
        for r, d, f in os.walk(sys.argv[1]):
            for files in f:
                if files.endswith(".py"):
                    os.system("pylint %s >> output.txt" % files)
    else:
        os.system(">output.txt")
        for r, d, f in os.walk('.'):
            for files in f:
                if files.endswith(".py"):
                    os.system("pylint %s >> output.txt" % files) 
```

如何正确获取所有（近 50 个文件）文件报告，而在第一个文件报告后不存在。这是正确的方法吗？. 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:07:50.553

您需要在命令行上将完整路径传递给 pylint，即

```
for filename in f:
    if filename.endswith(".py"):                       
        os.system("pylint %s >> output.txt" % os.path.join(r, filename)) 
```

除非你使用有意义的变量名，否则你不会在这个脚本上得到很好的 pylint 分数 :-)

# iphone - 为什么 mutableCopy 在这里？

> ID：14846055
> 
> 赞同：1
> 
> 时间：2013-02-13T03:45:20.070
> 
> 标签：iphone, ios, nsmutablearray

我正在研究Apple 的[Your Second iOS App](http://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/)。该项目基于 ARC。

在研究示例时，我对示例中的以下代码有疑问：

```
// header
@interface BirdSightingDataController : NSObject

@property (nonatomic, copy) NSMutableArray *masterBirdSightingList;

@end

// implementation
- (void)setMasterBirdSightingList:(NSMutableArray *)newList {
    if (_masterBirdSightingList != newList) {
        _masterBirdSightingList = [newList mutableCopy];
    }
}

- (void)initializeDefaultDataList {
    NSMutableArray *sightingList = [[NSMutableArray alloc] init];
    self.masterBirdSightingList = sightingList;

    …
} 
```

我不知道为什么这段代码会覆盖`masterBirdSightingList`.

该`masterBirdSightingList`属性是类型的`NSMutableArray`，并被复制到`_masterBirdSightingList`实例变量中，该实例变量也是类型`NSMutableArray`。我认为这是完美的。

为什么在`_masterBirdSightingList = [newList mutableCopy];`这里？以防万一`setMasterBirdSightingList:`用 type 的参数调用`NSArray`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T03:49:35.750

它是必需的，因为默认实现将简单地调用`copy`，您最终将得到一个不可变数组而不是可变数组。

# actionscript-3 - 保存在共享对象中的对象在重新启动后不会保持其数据类型。有任何想法吗？

> ID：14846062
> 
> 赞同：1
> 
> 时间：2013-02-13T03:46:16.793
> 
> 标签：actionscript-3, flash, air, shared-objects, starling-framework

我在保存，然后检索 sharedObject 数据时遇到问题。

例如，如果我创建一个共享对象：

```
var myData:SharedObject = SharedObject.getLocal("myData"); 
```

然后，我制作了一个对象，在这种情况下，是一个“羽毛”listcollection 对象

```
var lc:ListCollection = new ListCollection() 
```

然后分配它：

```
myData.data.lc = lc; 
```

好的，如果我不重新启动手机（我正在使用 android）并将保存的 listCollection 分配给 listCollection var，它可以像这样正常工作：

```
var lc:ListCollection = myData.data.lc as ListCollection; 
```

但是如果我重新启动手机并这样做：

```
var lc:ListCollection = myData.data.lc as ListCollection; 
```

即使我投射它，它也不会将其识别为“ListCollection”。它说它被保存为“对象”

所以基本上它不是通过重启来保存数据类型。但是，如果我在重新启动之前加载它，它就可以工作......

任何想法为什么 SharedObject 不起作用？它适用于典型对象。有没有更好的方法可以在本地保存数据并检索它？为什么要更改数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:07:07.957

`registerClassAlias()`在获取和设置共享对象之前调用。

[手动的](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#registerClassAlias%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:55:49.167

AS3 lang ref 关于 SharedObject 数据：

> 每个属性都可以是任何 ActionScript 或 JavaScript 类型的对象 — Array、Number、Boolean、ByteArray、XML 等等。例如，以下行将值分配给共享对象的各个方面：

尝试使用**ByteArray**。如何在 SO 中写入对象：

```
 var list:ArrayList = new ArrayList(["test"]);
            var buffer:ByteArray = new ByteArray();
            buffer.writeObject(list);
            buffer.position = 0;

            var mySo:SharedObject = SharedObject.getLocal("application");
            mySo.data.list = buffer;
            mySo.flush(); 
```

并读取对象：

```
 var mySo:SharedObject = SharedObject.getLocal("application");
            var buffer:ByteArray = mySo.data.list;
            var result:ArrayList = ArrayList( buffer.readObject() ); 
```

对于自定义类，请使用 registerClassAlias，请参阅*Vesper*评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:40:29.340

我不相信 SharedObject 会保存任何类型信息，解决这个问题的最好方法是创建自己的序列化反序列化过程——我相信 SharedObject 会通过对象进行简单的深度迭代，并尝试对其进行序列化。

无论如何，最好有一个方法可以将您的对象转换为非本地实现，以防您决定使用其他格式来存储您的对象。使用本机 JSON 编码/解析——没有理由不这样做（另外，你可以决定或不决定写什么）——即使 SharedObject 确实保存了类信息，它如何确定私有变量？

IE：

```
SerializableListCollection extends ListCollection {

  public function serialize():Object {
     var children:Array = [];

     // loop and add children
     children.push(child.serialize());

     return {
        children: children;
     }
  }
} 
```

然后，您可以保存 JSON::stringify(ListCollection.serialize()) 以不依赖于任何实现的方式保存数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-29T14:47:41.943

您必须`myData.flush()`在将所有数据分配给`myData`.

# python - 什么是比 .grid() 更好的 Tkinter 几何管理器

> ID：14846063
> 
> 赞同：7
> 
> 时间：2013-02-13T03:46:18.883
> 
> 标签：python, tkinter

**我的投诉**

我目前比以往任何时候都更深入地研究 Tkinter GUI，并且我发现`.grid()`几何管理器由于以下几个原因而不足：

1.  这些图基于其中最大的小部件 - 这种相对性导致不准确。

2.  在 Windows 7 中，在 Python 2.7.3 上，该程序似乎没有注意我的行号，而是更喜欢使用小部件的顺序。

**我的代码**

我目前正在开发一个*非常*基本的文本编辑器，我希望在框架顶部有多个按钮。我无法做到这一点，因为我的小部件被放置在占据屏幕中心的巨大文本框的最左侧或右侧。

```
========Class __init__ Stuff============
def widget(self):#Place widgets here

    #Save Button
    self.saveButton = Button (self, text = "Save", command = self.saveMe)
    self.saveButton.grid(column = 0, row = 0, sticky = W)

    #Open Button
    self.openButton = Button (self, text = "Open", command = self.openMe)
    self.openButton.grid(column = 0, row = 1, sticky = W)
    #Area where you write 
    self.text = Text (self, width = (root.winfo_screenwidth() - 20),
                      height = (root.winfo_screenheight() - 10))
    self.text.grid(row = 2)
==============Mainloop/Command Stuff============ 
```

**我的问题**

是否有另一种`.grid()`方法可以更准确地使用几何管理器，或者我应该完全使用另一个功能？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T03:54:52.077

您可以使用 3 个几何管理器-`grid`和。第三种是最通用的，但也非常难用。我更喜欢. 请注意，您可以将小部件放置在其他小部件中 - 或者您可以指定. 因此，如果您想获得以下布局：`pack``place``grid``columnspan`

```
 -------------------------
  |    Button1  | Button2 |
  -------------------------
  |     Big Widget        |
  ------------------------- 
```

有 2 种规范的方法可以使用`.grid`. 第一种方法是`columnspan`：

```
import Tkinter as Tk
root = Tk.Tk()
b1 = Tk.Button(root,text="Button1")
b1.grid(row=0,column=0)
b2 = Tk.Button(root,text="Button2")
b2.grid(row=0,column=1)
big_widget = Tk.Canvas(root)
big_widget.grid(row=1,column=0,columnspan=2) 
```

*请注意，还有一个完全类似的`rowspan`选项。

第二种方法是使用 a`Frame`来按住你的按钮：

```
import Tkinter as Tk
root = Tk.Tk()
f = Tk.Frame(root)
f.grid(row=0,column=0)
#place buttons on the *frame*
b1 = Tk.Button(f,text="Button1")
b1.grid(row=0,column=0)
b2 = Tk.Button(f,text="Button2")
b2.grid(row=0,column=1)

big_widget = Tk.Canvas(root)
big_widget.grid(row=1,column=0)  #don't need columnspan any more. 
```

这种方法对于创建复杂的布局非常**有用**——我不知道如何在不使用这样的`Frame`对象的情况下创建复杂的布局......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T12:24:14.193

“最佳”几何管理器取决于您想要做什么，没有几何管理器最适合所有情况。对于您在这种特定情况下尝试做的事情，pack 可能是更好的选择。另请注意，应用程序中可能有多个“最佳”。在应用程序的不同部分同时使用 grid 和 pack 是很正常的。我很少创建一个既不使用网格又不使用包的 GUI。很少，我也用地方。

pack 擅长将东西放在单行和单列中。例如，工具栏是使用 pack 的完美案例，因为您希望所有按钮都向左对齐。顾名思义，当您需要固定的行和列时，网格是最好的。place 在 grid 和 pack 都不会做的极少数情况下很有用，因为它允许您将小部件放置在精确的固定或相对位置。

我的建议是将您的应用程序小部件分成组，并为每个组使用正确的几何管理器。在您的情况下，您有两个逻辑组：顶部的工具栏和底部的文本小部件和滚动条组合。所以，从两帧开始。由于工具栏位于顶部，文本小部件位于下方，因此打包效果最佳。

```
toolbar = tk.Frame(...)
main = tk.Frame(...)
toolbar.pack(side="top", fill="x", expand=False)
main.pack(side="bottom", fill="both", expand=True) 
```

上面现在为您提供了两个易于独立修改的区域。

对于工具栏，pack 再次是最自然的。但是，在这种情况下，您希望按钮位于左侧而不是顶部或底部：

```
b1 = tk.Button(toolbar, ...)
b2 = tk.Button(toolbar, ...)
b1.pack(side="left")
b2.pack(side="left")
... 
```

最后是底部区域。您的示例代码不显示滚动条，但我假设在某些时候您会想要添加它们。如果您同时使用水平和垂直滚动条，grid 效果很好。我会这样布置它们：

```
hsb = tk.Scrollbar(main, ..., orient="horizontal", ...)
vsb = tk.Scrollbar(main, ..., orient="vertical", ...)
text = tk.Text(main, ...)
vsb.grid(row=0, column=1, sticky="ns")
hsb.grid(row=1, column=0, sticky="ew")
text.grid(row=0, column=0, sticky="nsew")
main.grid_rowconfigure(0, weight=1)
main.grid_columnconfigure(0, weight=1) 
```

最后一部分很重要——你总是需要为至少一行和一列赋予权重。这告诉网格在调整窗口大小时哪些行和列应该增长和缩小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T15:32:33.693

我发现`place`经理是所有三个中最直观和准确的，因为可以为位置和大小指定绝对和相对长度的组合：

```
mywidget.place(x=..., y=..., width=..., height=...) # absolute
mywidget.place(relx=..., rely=..., relwidth=..., relheight=...) # relative

# combination
pad_left=5
pad_right=5
pad_top=5
pad_bottom=5
mywidget.place(relx=0, x=pad_left, rely=0, y=pad_top,\
       relwidth=1, width=-pad_left-pad_right,\
       relheight=1, height=-pad_top-pad_bottom, anchor="e") # use the whole space except some padding 
```

出于某种原因，`.place`管理器似乎不太受欢迎，但我发现定义小部件在调整父窗口大小时应该如何移动和调整大小是一项特别好的工作。

为了简化复杂窗口的构建，我有时会使用一个函数（模拟我想的网格行为）来帮助垂直放置，例如：

```
def offset_y(line_no):
    if line_no == 0:
        return 0
    else:
        return height_label + (line_no - 1)*height_button

mylabel.place(..., y=offset_y(0))
mybtn1.place(..., y=offset_y(1))
etc. 
```

垂直包装一个标签，然后是一系列按钮。（当然，`.pack`在这种情况下可以使用管理器，但我更喜欢`.place`管理器的原因是为了更准确地了解调整窗口大小时事物将如何移动）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-03-10T07:16:20.730

您可以使用坐标来代替行、列...等。

它可能比其他人更容易。

**例子：**

```
from Tkinter import*
root=Tk()
Button(root,text="HI").grid(padx=100,pady=50)
root.mainloop() 
```

通过更改 padx 和 pady 值自己尝试一下。

# .htaccess - 强制 HTTPS 破坏了我的页面设计

> ID：14846066
> 
> 赞同：-1
> 
> 时间：2013-02-13T03:46:49.623
> 
> 标签：.htaccess, https, config

https 正在破坏我网站的设计。请查看[www.pawpost.com.au/index.php](http://www.pawpost.com.au/index.php)

如果有帮助的话，我正在使用 opencart。

我在管理员/系统中启用了 SSL

配置文件：

```
// HTTP
define('HTTP_SERVER', 'http://www.pawpost.com.au/');
define('HTTP_IMAGE', 'http://www.pawpost.com.au/image/');
define('HTTP_ADMIN', 'http://www.pawpost.com.au/admin/');

// HTTPS
define('HTTPS_SERVER', 'http://www.pawpost.com.au/');
define('HTTPS_IMAGE', 'http://www.pawpost.com.au/image/');
define('HTTP_ADMIN', 'http://www.pawpost.com.au/admin/'); 
```

.ht 访问：

```
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]

RewriteCond %{HTTPS} off
RewriteRule (.*) https://www.pawpost.com.au/ [R] 
```

有什么想法吗？这让我疯狂。

试过：

1.  仅在管理员中启用 SSL。
2.  SSL 'on' 和上面的配置文件。
3.  SSL 'on' 和 .htaccess 如上所示。
4.  使用 SSL 'on'、.htaccess 和配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:51:09.360

尝试更新您定义为使用 https 的 HTTPS 链接：

```
// HTTPS
define('HTTPS_SERVER', 'https://www.pawpost.com.au/');
define('HTTPS_IMAGE', 'https://www.pawpost.com.au/image/');
define('HTTP_ADMIN', 'https://www.pawpost.com.au/admin/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:50:35.580

看起来您的图像引用了 http:// 路径。您需要将图像和 CSS 文件的任何路径更新为相对路径或绝对路径，以在其中包含 https://。

# excel - Excel 列等于文本和单元格

> ID：14846068
> 
> 赞同：0
> 
> 时间：2013-02-13T03:46:57.340
> 
> 标签：excel, if-statement, excel-formula

我正在尝试在另一列的 url 中的斜杠之后直接用 url 作为文本和列数据填充一列。

例如我想输入[http://xxx.xxx.xxx/](http://xxx.xxx.xxx/)列数据在这里

文本将是 url 地址，斜杠之后是我需要列数据的位置。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:13:48.123

试试这个`CONCATENATE`功能。

`=CONCATENATE("http://xxx.xxx.xxx/", A1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:18:35.723

我想你可能想使用这样的公式：

```
=HYPERLINK(CONCATENATE(A2,B2)) 
```

...在这种情况下，您将获得以下结果（假设链接等位于电子表格的第 2 行）：

```
A                       B   C
http://www.example.com/ xyz http://www.example.com/xyz 
```

使用单元格 C2 中的上述公式，您不仅有连接的链接，而且用户可以单击它以在链接页面上打开浏览器。

# android - Android WebView 中的触摸事件

> ID：14846071
> 
> 赞同：3
> 
> 时间：2013-02-13T03:47:39.310
> 
> 标签：android, webview, touchstart

我正在尝试使用 HTML5 画布和触摸在 Android 中制作 WebView 应用程序。

这是我认为我的代码的相关部分：

在 onCreate ：

```
WebView myWebView = (WebView) findViewById(R.id.webview);
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true);
    ...
    myWebView.loadData(content,"text/html", "UTF-8"); 
```

其中字符串“内容”包含一个 html / javascript 块，其中包含以下几行。

```
 this.canvas = document.getElementById(AN_ID); // AN_ID is id of a canvas tag
  ...
  this.canvas.addEventListener("touchstart", function(e) {
    ...
  }, false);

  this.canvas.addEventListener("touchend", function(e) {
    ...
  }, false); 
```

并且 activity_main.xml 文件包含标签

```
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

但是我的测试设备 Nexus 7 似乎没有响应触摸事件。如果我用“mousedown”和“mouseup”替换“touchstart”和“touchend”，看起来mousedown事件被识别了。但是 mouseup 的行为不正常（即，就像在浏览器中运行的相同代码一样）。

我显然错过了什么，例如。我需要在 javascript 中启用触摸事件的配置设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:52:17.380

好的。我解决了。

我仍在尝试获取 Page.X 和 Page.Y 值，而不是从 event.targetTouches 中获取。而且我假设在 touchend 中可以使用坐标，而实际上它们不是。您必须在 touchmove 期间跟踪它们。

# c++ - ＃包括 在全局命名空间中定义了许多符号，例如 Polygon

> ID：14846072
> 
> 赞同：4
> 
> 时间：2013-02-13T03:47:43.010
> 
> 标签：c++, windows, namespaces

Windows下，行后

```
#include <windows.h> 
```

许多符号在全局命名空间中定义。例如，`Polygon`被定义。那么有没有方便的方法来使用这个符号来定义一个自定义类，如下所示？

```
class Polygon {
    ...
}; 
```

放入`class Polygon`自己的命名空间是否意味着每次使用时都必须使用该命名空间显式限定？换句话说，有没有办法隐藏或掩盖特定的定义`windows.h`？或者还有其他实用的解决方法吗？

我想到了：

```
#define Polygon Polygon_windows
#include <windows.h>
#undef Polygon 
```

但这似乎很丑陋。

当然不能使用`namespace windows { #include <windows.h> }`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:00:01.683

对这种宏的唯一真正防御是在实现文件中隔离定义和直接使用带有冲突名称的类。

请注意，这`<windows.h>`是关于任意宏定义的绝对最糟糕的定义之一，其中有成千上万个……

就在昨天，我注意到另一个这样的冲突，在和 Microsoft 自己的代码之间`<windows.h>`，或者更准确地说是在和之间。`<windowsx.h>`即宏与方法`SelectFont`冲突。`CMFCButton::SelectFont`免责声明：我还没有尝试过，但在这种情况下，微软似乎甚至没有避免与他们自己的代码发生名称冲突。

然后在. `min`_ 或者，有这样的用法。我最近没有检查。`max``<gdiplus.h>`

所以，保重！:-)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-13T04:57:11.630

使用命名空间，这就是它们的用途！

```
namespace YourNamespace{
  class Polygon{ 
    //
  };
} 
```

另一种解决方法是这样做：

```
#include <windows.h>
#define Polygon _Polygon

class _Polygon{ 
}; 
```

# python - “[Errno -2] 名称或服务未知”上的 Python 套接字块？

> ID：14846073
> 
> 赞同：2
> 
> 时间：2013-02-13T03:47:47.527
> 
> 标签：python, sockets, tornado, nonblocking

我在 Tornado IOLoop 中异步运行非阻塞套接字。但是，尽管如此，有时会出现块（如 0% CPU 所证明的那样），并且总是导致`Errorno -2 Name or service not known`.

为什么会这样？

它阻塞了大约五秒钟（至少是超时的两倍多）。在任何给定时间可能有 15-30 个打开的套接字，与`setsockopt`标志一起重复使用。

插座：

```
 # make connection   
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    s.settimeout(2) # 2 seconds timeout

    ioloop.add_callback(self.connect, s) 
```

龙卷风错误警告：

```
WARNING:tornado.general:Connect error on fd 23: [Errno -2] Name or service not known 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:06:06.117

不确定它是否是答案，但我认为它有帮助（见第三段）：

```
 s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
        s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        s.settimeout(2) # 2 seconds timeout

        streamloop.add_callback(self.connect, s)

        # added this to close sockets completely after use. might help.
        l_onoff = 1
        l_linger = 0
        s.setsockopt(socket.SOL_SOCKET, socket.SO_LINGER, struct.pack('ii', l_onoff, l_linger)) 
```

# php - PHP 输入验证的正确顺序

> ID：14846074
> 
> 赞同：2
> 
> 时间：2013-02-13T03:47:49.623
> 
> 标签：php, regex, validation

显然，您应该在服务器端验证所有用户输入数据。我只是好奇什么被认为是“正确的”输入验证以及应该完成的顺序。

截至目前（以及过去的最近项目），我已经这样做了：

**获取用户输入，实例化对象，调用方法：**

```
if(isset($_POST['addCat'])) {
    $db = new DBConnection;
    $categories = new Category($db);

    if($categories->insert_cat($_POST['name']) === TRUE) {
        echo "Category Inserted Successfully!";
    }
} 
```

**从实例化对象调用的方法：
1\. 转义用户输入
2\. 实例化 data_validation 对象（请参阅下面的验证对象）**

```
class Categories {
    public function insert_cat($catName) {
        $catName = $this->mysqli->real_escape_string($catName);
        $validate = new data_validation;

        if(!($validate->validate_string($catName))) {
            echo "Invalid characters found in category name";
            die();
        }

        $query = $this->mysqli->query("INSERT INTO categories(name) VALUES ('".$catName."')");

        if($query === false) {
            printf("Error: %s\n", $this->mysqli->error);
            die();
        } else {
            return true;
        }
    }
} 
```

**data_validation 类：
1\. 修剪数据
2\. 将数据匹配到正则表达式
3\. 将数据返回到 insert_cat 方法以进行数据库插入**

```
class data_validation {
    public function validate_string($data) {
        // Remove excess whitespace
        $data = trim($data);

        if ( preg_match("/^[0-9A-Za-z \.\-\'\"]+$/", $data) ) {
            return true;
        } else {
            //return 'Not a valid string';
            return false;
        }
    }
} 
```

所以基本上简而言之，我的问题是：首先转义数据，然后修剪它，然后将其与正则表达式进行比较，然后添加`htmlentites()`或类似的东西以保留任何格式，还是应该以不同的顺序完成？

任何改善我的安全习惯的提示都非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:57:46.737

在[The Open Web Application Security Project](https://www.owasp.org/index.php/Data_Validation)中，您将找到大部分（如果不是全部）您需要的关于验证和一般安全性的信息。

# javascript - javascript下拉填充

> ID：14846079
> 
> 赞同：2
> 
> 时间：2013-02-13T03:48:17.400
> 
> 标签：javascript, jquery, asp.net

我正在使用 ASP.NET 通过 javascript 填充我的下拉列表，为此，我得到了该站点上一个答案的帮助。我使用了以下代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        alert("Hi");
        var select = document.getElementById('<%=ddlItems%>');
        var option = document.createElement("option");
        option.value = "1";
        option.innerHTML = "Option1";
        select.appendChild(option);

    });
</script> 
```

它不工作。为了检查程序流程是否进入功能，我放了一个警告框。它向我显示了正确的警报，这意味着它进入了函数但在该代码下方不起作用。可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T04:02:08.583

使用 ddlItems.ClientID

```
<script type="text/javascript">
    $(document).ready(function () {
        alert("Hi");
        var select = document.getElementById('<%=ddlItems.ClientID%>');
        var option = document.createElement("option");
        option.value = "1";
        option.innerHTML = "Option1";
        select.appendChild(option);

    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T04:00:01.230

试试这个方法。将您的 id 模式设置为静态`dropdownlist`

```
<asp:DropDownList ID="ddl" runat="server" ClientIDMode="Static"></asp:DropDownList> 
```

并将您的脚本更改为

```
var select = document.getElementById('ddl'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T04:16:20.523

您好，您可以添加如下选项：

```
$('#ddlItems').append($('<option></option>').val("1").html("option1")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T05:45:27.587

在下拉列表 id 之后使用 clientID..

```
 <script type="text/javascript">
 $(document).ready(function () {
     alert("Hi");
    var select = document.getElementById('<%=ddlItems.ClientID%>');
    var option = document.createElement("option");
    option.value = "1";
    option.innerHTML = "Option1";
    select.appendChild(option);

 });
 </script> 
```

# c# - 有没有办法让某个类中的某些对象不能被某些代码重新分配？

> ID：14846081
> 
> 赞同：1
> 
> 时间：2013-02-13T03:48:22.630
> 
> 标签：c#, .net

我有一个 Windows 服务，它查看 dll 列表（在设置文件中），将它们全部加载，并在每个 dll 中在其自己的线程中启动特定方法。这些 dll 中的每一个都必须从特定类（模块类）继承才能被此服务使用，并且该类的一部分是 MPI 对象，基本上是一个类的实例，它允许 dll 方法调用方法以直接与之交互服务。它是如何进行的：

> 1.  服务加载 dll
> 2.  使用反射检查是否有继承Module类的类
> 3.  创建该 Module 继承类的新实例
> 4.  创建 MPI 类的新实例。这有关于哪个模块正在使用它的识别信息
> 5.  将新创建的 MPI 对象分配给新的 Module 类
> 6.  启动主模块线程

基模块类本身就是它自己的 dll（以便服务和外部 dll 都可以使用它）。我想要做的是让服务能够为新的 Module 类分配一个具有特殊值的 MPI 对象，但我不希望该类能够更改 MPI 对象分配或任何值在里面。ReadOnly 用于继承的类，但可从其他类分配。我想我不能按照我的设置方式来做到这一点，我必须做些什么改变才能做到这一点。甚至可能吗？

MPI 几乎就像主要托管服务的 API。它处理一些集中的事情，比如错误记录。当服务加载一个新模块时，它会为其分配一个 ID。当该模块调用时`MPI.ErrorLog(someStuff)`，具有对主服务内存的引用并因此可以访问实际错误写入器的 MPI 将写入此时模块 ID # 有此错误。我希望 ID 对继承 Module 的类是私有的，而不是对主服务私有，以便 ID 可以由它设置。不要用设置所有内容的构造函数说私有变量，因为我不希望模块本身能够创建新的 MPI 对象并能够改变这些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:21:38.353

据我了解，您想为不同的上下文/用户修改对单个对象的访问。例如，'base' 知道 get 和 set 访问器，而 'module' 只知道 get 访问器。我可以在这里想象两个选项 - 访问修饰符和接口。

首先，[`internal`修饰符](http://msdn.microsoft.com/en-us/library/vstudio/7c5ka91b.aspx)使成员仅对同一程序集中的文件可见。

```
public class Mpi
{
    private int id;

    int Id
    {
        public get
        {
            return this.id;
        }
        internal set
        {
            this.id = value;
        }
    }
    //...
} 
```

因此，您的“模块”将假定这是一个仅获取属性，而您的“基础”将能够获取和设置。

您的第二个选择是拥有一个仅定义 get 访问器的接口。

```
public interface IMpi
{
    int Id { get; }
}

public class Mpi : IMpi
{
    public int Id { get; set; }
} 
```

在此模型中，“基”类使用`Mpi`对象，“模块”类使用`IMpi`对象。它们是同一个实例，但模块也不知道该`Id`属性有一个 set 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:52:35.357

假设你有：

```
var modules = from file in Directory.GetFiles(path, "*.dll").AsParallel()
              from type in Assembly.LoadFile(file).GetTypes().AsParallel()
              where !type.IsInterface && typeof(Module).IsAssignableFrom(type)
              select (Module)Activator.CreateInstance(type); 
```

然后你声明你的 Module 基类：

```
public abstract class Module
{
    public abstract Mpi Mpi { get; set; } // to inherit you must implement getter (you don't need it) and setter (what you're asking about)

    public abstract void Main(); // to inherit you must implement too
} 
```

并使用：

```
Mpi mpi = new Mpi();
foreach (Module m in modules)
{
     m.Mpi = mpi;
     m.Main();
} 
```

* * *

另一种解决方案。如果基类有一个无参数构造函数，它将始终被调用。在里面你只能分配一个基类可写的变量：

```
public abstract class Module
{
    protected Module()
    {
        this.Mpi = new Mpi();
    }

    protected Mpi Mpi { get; private set; } // getter is visible to children, setter only for class itself
} 
```

# javascript - 具有动态操作的 ASP.NET MVC RouteUrl

> ID：14846085
> 
> 赞同：0
> 
> 时间：2013-02-13T03:48:43.220
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我尝试在 javascript 中使用带有动态字符串的 URLHelp.RouteUrl。我想要这样-

```
function MyFun(action, param){
   var strPass = "MyController/" + action + "?param1=" + param;
   Windows.Location.href = "<%=Url.RouteUrl(" + strPass + ")%>";
} 
```

这没用。我错过了什么吗？我们在 ASP.NET MVC 中是否有替代方式以类似的方式工作？

谢谢，

附加信息 -

我尝试上述方法是因为我的应用程序有问题 -`"http://myserver/myapplicaiton/mycontroller/myaction"`当我使用`"Windows.Location.href ="MyController/MyAction"`. 但是出现了具有双控制器的下一页`"http://myserver/myapplication/mycontroller/mycontroller/myaction"`。
是什么导致了这个路由问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:00:23.823

这是行不通的。Razor 语法在 html 页面到达浏览器之前呈现。Javascript 之后执行。

因此，您正在尝试使用步骤 2 填充步骤 1。

```
 function MyFun(action, param){          
       Windows.Location ="/MyController/" + action + "?param1=" + param;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T03:59:20.953

试试这个代码

```
 function MyFun(action, param){          
       Windows.Location.href ="/MyController/" + action + "?param1=" + param;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:02:43.357

一旦代码离开服务器，您就无法将剃刀代码动态添加到视图中... Razor 未在客户端浏览器上编译。

您可以使用 jQuery 并调用 $.ajax() 来调用 Controller/Action，其唯一目的是为您返回一个 url：

```
public ActionResult GenerateUrlFromRoutingEngine(string ControllerName, string ActionName, string RouteValues) 
{
    var ctx = new HttpContextWrapper(HttpContext.Current);
    UrlHelper helper = new UrlHelper(
                           new RequestContext(ctx,
                           RouteTable.Routes.GetRouteData(ctx));
    var returnUrl = helper.Action(ControllerName,ActionName, RouteValues); //TODO: transform RouteValues to RouteValuesDictionary
    return Content(returnUrl);
} 
```

在 $.ajax 回调中，设置 Windows.Location.href = response; （将此 javascript 放在 razor .cshtml 文件中，或找到一种直观地传递 URL 的方法。）

```
function MyFun(action, param){
    $.ajax({
            type: "POST", 
            url: "@{Html.RouteLink("GenerateUrlFromRoutingEngine", "MyController")}",
            data: { ControllerName: 'MyController', ActionName: action, RouteValues: param },
            dataType: "text",
            success: function(response) { Windows.Location.href = response; }
            }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T03:04:43.993

我最终得到了一个获取整个网址的功能 -

功能完整网址（）{

```
var app = "<%=HttpRuntime.AppDomainAppVirtualPath.ToString()%>";

if (app == "/")
    app = "";

return location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '') + app; 
```

}

然后从 -

```
 function MyFun(action, param){          
       Windows.Location =FullURL() + "/MyController/" + action + "?param1=" + param;
    } 
```

# sql - SQL Server 2000 索引中 Include 关键字的向后兼容性

> ID：14846086
> 
> 赞同：0
> 
> 时间：2013-02-13T03:48:50.613
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2000

我在 SQL Server 2008 上运行 DEV 数据库，生产在 SQL Server 2000 上。我被要求处理在 prod 数据库上运行的存储过程超时问题。因此，我在我的 DEV 服务器（2008）上获得了 SQL Server 2000 数据库的转储

我尝试了几个选项，发现添加几个索引（带`INCLUDE`关键字）有很大帮助。现在 SQL Server 2000 不支持`Include`关键字。SQL Server 2000 可能的索引脚本是什么？

我的脚本看起来像这样：

```
CREATE INDEX _dta_ABC ON dbo.tbl
(
  COL_A ASC,
  COL_B ASC
) INCLUDE (COL_D,COL_E)
GO. 
```

# javascript - 扩展自举模块 AngularJS

> ID：14846089
> 
> 赞同：1
> 
> 时间：2013-02-13T03:49:06.090
> 
> 标签：javascript, angularjs, angularjs-directive

假设我有一个非常大的应用程序，此时我已经制作了通用用户界面，但是......

...应用程序太大。我有很多控制器和指令，我不想在开始时加载。相反，我`$http`向远程 API 发出请求，该 API 向我提供`uri`要加载的模板（例如在选项卡中）和模块的名称以使模板栩栩如生，因为我有一个自动加载文件的 Angular 包装器与当前定义模块的模块：

```
Shx.module('mrsCatalog' ['mrsGrid', 'mrsView', 'mrsForm', 'restApi')
///...angular module code 
```

它加载（那些尚未加载的）文件上的模块`/mrs/grid/mrsGrid.js`等。

问题是我不知道如何放置模板的代码，因为实际的模块（核心）没有可用的指令或控制器来制作目录。例如; 但是如果我先放它然后再做`angular.bootstrap()`它会导致错误，因为 Angular 会尝试加载目录 HTML 代码...

# c++ - C++ 生成文件的 Netbeans 环境变量

> ID：14846091
> 
> 赞同：6
> 
> 时间：2013-02-13T03:49:27.250
> 
> 标签：c++, macos, netbeans, makefile

我有一个简单的 makefile，它调用 C++ 编译器 as `$(CXX)`，这是在我的`~/.profile`脚本中设置的。Netbeans 似乎有一个复杂的工具链管理器，但它似乎无论如何都能`$CXX`解决`c++`。

如何`$CXX`正确设置，或者我的 makefile 是否可以检测到 Netbeans 设置的另一个变量？（恶心）

编辑：在导航器中右键单击生成文件允许我指定一个环境，尽管似乎只有一行输入的空间。指定`CXX=/usr/local/bin/g++`可以解决问题，但这远非最佳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T16:02:02.920

我将只描述我在 NetBeans 中使用 C++ 时通常会做什么。首先，我为每个项目创建一个简单的 makefile，如下所示：

```
MAIN = <my main target>
CFLAGS = -g -std=c++0x

include ${MAKELIBHOME}/MINGW32.inc
include ${MAKELIBHOME}/WINDOWS.inc

build: ${MAIN}

clean:; rm -fr <files to remove> 
```

环境变量 MAKELIBHOME 在 NetBeans 之外设置。目录 ${MAKELIBHOME} 包含许多 make 的*包含文件*，例如文件 MINGW32.inc 如下所示：

```
CC = g++

CFLAGS += -W -DLITTLE_ENDIAN=1
LDLIBS += -lws2_32

.SUFFIXES: .o .c .cpp

.c:     ;${CC} ${CFLAGS} ${LDFLAGS} $< -o latest ${LDLIBS}
.cpp:   ;${CC} ${CFLAGS} ${LDFLAGS} $< -o latest ${LDLIBS}

.c.o:   ;${CC} ${CFLAGS} -c $<
.cpp.o: ;${CC} ${CFLAGS} -c $< 
```

这些 inc 文件对于所有 NetBeans 项目都是相同的。这里没有绝对路径，因此 make 将使用 PATH 变量来定位 GCC 工具集，但当然您可以使用绝对路径来选择您喜欢的工具集（或包含不同的 inc 文件 - 我更喜欢这种方式）。

所有这些都适用于我的 Windows 机器，但 Linux 配置看起来非常相似——我只需要将另一组 inc 文件包含到我的所有主要 makefile 中。此外，此设置允许我从命令行调用 make。

希望对你有帮助~AY

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-24T15:32:30.327

这是一个旧帖子。但是我最近发现了同样的问题，并且我根据@HEKTO 的回答找到了一个替代方案。

我使用 PETSc，一个解决大型稀疏矩阵系统的库。他们的构建系统要求您在 makefile 中使用“包含”，这取决于两个环境变量：PETSC_DIR 和 PETSC_ARCH 必须在您的环境中设置......或者您可以将它们作为选项传递给您的 make 命令！这就是我所做的。

我使用了 NetBeans 生成的 makefile，最后我添加了我的包含：

```
include ${PETSC_DIR}/conf/variables 
```

请注意这如何取决于 PETSC_DIR 的定义。此外，这包括大量使用这个和 PETSC_ARCH。

因此，现在在 NetBeans 中，我将其配置为传递这些变量来生成： 工具->选项：在“项目选项”选项卡中，我将“生成选项”的文本框填充为：PETSC_DIR=/path/to/petsc PETSC_ARCH=一些拱形

此外，现在您可以开始使用这些环境变量（以及在项目选项中的 ${PETSC_DIR}/conf/variables 中定义的其他变量。例如，对于我的包含文件（右键单击项目，然后单击“属性”）： “C 编译器”、“包含目录”我输入：${PETSC_DIR}/include

在“链接器”、“库”下，我输入：${PETSC_LIB}（在上面的包含文件中定义）。

现在我可以在 NetBeans 中构建和运行我的项目了。如果我的 PETSc 版本发生变化，我只需要更改传递给 make 的变量的定义，其他一切都会得到解决。

我希望这可能对某人有所帮助。它肯定对我有用。好的部分是我可以将我的代码提供给其他人，他们可以像往常一样使用“make”从命令行编译（没有 NetBeans）并定义上述环境变量。编译现在没有任何硬编码路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-07T10:42:55.347

我在 linux 上遇到了一个非常相似的问题，Netbeans 没有从 bash 中获取环境变量。

解决方案：从 bash 启动 netbeans。

我不确定 Mac 上的等价物是什么，但想法很简单：从已设置正确环境变量的终端启动 Netbeans。

# maven - jenkins 有 maven3 插件吗？

> ID：14846097
> 
> 赞同：3
> 
> 时间：2013-02-13T03:49:56.900
> 
> 标签：maven, plugins, jenkins

jenkins 是否通过特定插件支持 maven3.. 或者，将 maven 2 插件与 jenkins 一起使用是否正常（即使对于 maven 3 项目）...？

我指的特定插件在这里：[https](https://wiki.jenkins-ci.org/display/JENKINS/Maven+2+Project+Plugin) ://wiki.jenkins-ci.org/display/JENKINS/Maven+2+Project+Plugin 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:58:05.443

该插件也适用于 maven 3，实际使用的 maven 版本是在作业中配置的。

要设置已安装的 Maven 版本，请转到“管理 Jenkins”->“配置系统”->“Maven 安装”并进行设置。

如果在“构建”下的每个作业上设置了多个 Maven 安装，则将有一个用于 Maven 版本的选项。如果只设置了一个默认使用的 maven 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:56:52.527

是的，只需使用 Maven 2 插件。很多关于 Maven 3 的内容仍然非常“Maven 2”。`M2_HOME`甚至仍然使用环境变量。

# iphone - iOS 中途暂停相机光圈 CATransition

> ID：14846106
> 
> 赞同：2
> 
> 时间：2013-02-13T03:51:24.340
> 
> 标签：iphone, ios, caanimation, catransition

我正在尝试使用来控制自定义图像选择器的快门动画

```
CATransition *animation = [CATransition animation];
animation.type = @"cameraIris"; 
```

并想在中间暂停快门并稍后恢复。

我尝试了两种似乎对我不起作用的方法：

1.  在 x 秒后暂停它，但这会在随机位置暂停图层
2.  使用 2 个转换`cameraIrisHollowClose`和`cameraIrisHollowOpen`，`animationDidFinish`我注意到第一个`CATransition`消失了，在第二个出现之前有一个小的延迟。

我想知道是否有人对如何做到这一点有任何想法，以使动画看起来很流畅。

# xml - SimpleXML - 如何使用 xpath 获取带有命名空间的 XML 中的数据？

> ID：14846107
> 
> 赞同：0
> 
> 时间：2013-02-13T03:51:25.043
> 
> 标签：xml, xpath, simplexml, xml-namespaces

我有这个 XML

```
<?xml version="1.0" encoding="utf-8"?>
    <DataSet xmlns="http://www.dotnous.co.nz/ws">
      <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
        <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
          <xs:complexType>
            <xs:choice minOccurs="0" maxOccurs="unbounded">
              <xs:element name="FuelLabelData">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="ErrorCode" type="xs:int" minOccurs="0" />
                    <xs:element name="Explanation" type="xs:string" minOccurs="0" />
                    <xs:element name="LabelVersion" type="xs:string" minOccurs="0" />
                    <xs:element name="LabelID" type="xs:string" minOccurs="0" />
                    <xs:element name="ModelCode" type="xs:string" minOccurs="0" />
                    <xs:element name="Variant" type="xs:int" minOccurs="0" />
                    <xs:element name="Make" type="xs:string" minOccurs="0" />
                    <xs:element name="Model" type="xs:string" minOccurs="0" />
                    <xs:element name="SubModel" type="xs:string" minOccurs="0" />
                    <xs:element name="VehicleType" type="xs:string" minOccurs="0" />
                    <xs:element name="Seats" type="xs:short" minOccurs="0" />
                    <xs:element name="FuelType" type="xs:string" minOccurs="0" />
                    <xs:element name="EngineSize" type="xs:int" minOccurs="0" />
                    <xs:element name="EnginePower" type="xs:int" minOccurs="0" />
                    <xs:element name="Transmission" type="xs:string" minOccurs="0" />
                    <xs:element name="Weight" type="xs:int" minOccurs="0" />
                    <xs:element name="FuelStars" type="xs:int" minOccurs="0" />
                    <xs:element name="FuelConsumption" type="xs:double" minOccurs="0" />
                    <xs:element name="YearlyCost" type="xs:double" minOccurs="0" />
                    <xs:element name="RUCrate" type="xs:double" minOccurs="0" />
                    <xs:element name="RUC" type="xs:double" minOccurs="0" />
                    <xs:element name="CO2Stars" type="xs:unsignedByte" minOccurs="0" />
                    <xs:element name="CO2" type="xs:double" minOccurs="0" />
                    <xs:element name="YearlyCO2" type="xs:double" minOccurs="0" />
                    <xs:element name="PollutantsStars" type="xs:unsignedByte" minOccurs="0" />
                    <xs:element name="TestRegime" type="xs:string" minOccurs="0" />
                    <xs:element name="DriverSafetyStars" type="xs:unsignedByte" minOccurs="0" />
                    <xs:element name="DriverSafetyTest" type="xs:string" minOccurs="0" />
                    <xs:element name="OthersSafetyStars" type="xs:unsignedByte" minOccurs="0" />
                    <xs:element name="OthersSafetyTest" type="xs:string" minOccurs="0" />
                    <xs:element name="LikeVehicle" type="xs:string" minOccurs="0" />
                    <xs:element name="Item" type="xs:long" minOccurs="0" />
                    <xs:element name="LastRegUpdate" type="xs:dateTime" minOccurs="0" />
                    <xs:element name="VIN" type="xs:string" minOccurs="0" />
                    <xs:element name="VehicleYear" type="xs:string" minOccurs="0" />
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:choice>
          </xs:complexType>
        </xs:element>
      </xs:schema>
      <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
        <NewDataSet xmlns="">
          <FuelLabelData diffgr:id="FuelLabelData1" msdata:rowOrder="0">
            <ErrorCode>0</ErrorCode>
            <Explanation>2011(a) cost per year based on price per litre of petrol $2.00 and an average distance of 14000 km</Explanation>
            <LabelVersion>2011(a)</LabelVersion>
            <LabelID>V:W0L0AHL4855174049D:130213</LabelID>
            <ModelCode>AH8TL48254;</ModelCode>
            <Variant>0</Variant>
            <Make>HOLDEN</Make>
            <Model>ASTRA</Model>
            <SubModel>CD AUTO</SubModel>
            <VehicleType>Car(Small)</VehicleType>
            <Seats>5</Seats>
            <FuelType>petrol</FuelType>
            <EngineSize>1796</EngineSize>
            <EnginePower>90</EnginePower>
            <Transmission>4-gear automatic</Transmission>
            <Weight>1805</Weight>
            <FuelStars>8</FuelStars>
            <FuelConsumption>8.2</FuelConsumption>
            <YearlyCost>2300</YearlyCost>
            <RUCrate>0</RUCrate>
            <RUC>0</RUC>
            <CO2Stars>8</CO2Stars>
            <CO2>188</CO2>
            <YearlyCO2>2.64</YearlyCO2>
            <PollutantsStars>8</PollutantsStars>
            <TestRegime>EUR4</TestRegime>
            <DriverSafetyStars>8</DriverSafetyStars>
            <DriverSafetyTest>Based on ANCAP rating for 04-08 models with front+side airbags</DriverSafetyTest>
            <OthersSafetyStars>2</OthersSafetyStars>
            <OthersSafetyTest>Based on ANCAP rating for 04-08 models with front+side airbags</OthersSafetyTest>
            <LikeVehicle>8|84||7|83||6|1434||5|70||4|58||15|2630||13|2576||16|2638||2|1215||1|12||20|3929||</LikeVehicle>
            <Item>6413</Item>
            <LastRegUpdate>2007-10-08T00:00:00+13:00</LastRegUpdate>
          </FuelLabelData>
        </NewDataSet>
      </diffgr:diffgram>
    </DataSet> 
```

我的问题是，如何`FuelLabelData`使用 xpath 获取标签内的数据（`FuelStars`例如获取信息）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:02:20.343

您可以将 X 路径表达式用作 //*[local-name() = "local_name"]

例如-:/ **/*[local-name() = "FuelStars"]**

微笑场景之前在这里发布过，也[看看他们](https://stackoverflow.com/questions/103576/whats-wrong-with-my-xpath-xml)

尽管在处理多个名称空间时这是一个非常方便的选项，但您不应该使用**//**除非您真的确定自己在做什么。

# xml - 如何使用pl/sql解析具有href标签的soap响应

> ID：14846110
> 
> 赞同：0
> 
> 时间：2013-02-13T03:51:30.040
> 
> 标签：xml, soap, plsql, xml-parsing

我想解析下面的肥皂响应。问题出在 tag1 中，它指向一个名为 id1 的 href 链接。所以我们必须去 id1 的响应中获取值。

还有一件事是这个soap响应值是改变每个请求的顺序。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
    <ns1:getBlock soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://diamondip.com/ipcontrol/ws/">
        <getBlockByIpAddressReturn href="#id0"/>
    </ns1:getBlock>

<multiRef id="id0" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns2:WSGenericBlock" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2="http://service.ipcontrol.diamondip.com">
    <tag1 href="#id1"/>      
    <tag2 soapenc:arrayType="soapenc:string[1]" xsi:type="soapenc:Array">
        <item xsi:type="soapenc:string">Container1</item>
    </tag2>  
    <tag3 xsi:type="xsd:dateTime">2013-02-01T06:45:32.000Z</tag3>
    <tag4 soapenc:arrayType="soapenc:string[4]" xsi:type="soapenc:Array">
        <item xsi:type="soapenc:string">uf1=221805</item>
        <item xsi:type="soapenc:string">uf2=34531</item>
    </tag4> 
    <tag5 href="#id2"/> 
</multiRef>   
<multiRef id="id1" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="xsd:boolean" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">false</multiRef>
<multiRef id="id2" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" lowestSetBit="3" xsi:type="soapenc:integer" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">8</multiRef>
</soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:24:37.343

也许这可以给你一个开始（它并不完美，我知道......）

```
declare

  xl clob := '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
    <ns1:getBlock soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://diamondip.com/ipcontrol/ws/">
        <getBlockByIpAddressReturn href="#id0"/>
    </ns1:getBlock>

<multiRef id="id0" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns2:WSGenericBlock" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2="http://service.ipcontrol.diamondip.com">
    <tag1 href="#id1"/>      
    <tag2 soapenc:arrayType="soapenc:string[1]" xsi:type="soapenc:Array">
        <item xsi:type="soapenc:string">Container1</item>
    </tag2>  
    <tag3 xsi:type="xsd:dateTime">2013-02-01T06:45:32.000Z</tag3>
    <tag4 soapenc:arrayType="soapenc:string[4]" xsi:type="soapenc:Array">
        <item xsi:type="soapenc:string">uf1=221805</item>
        <item xsi:type="soapenc:string">uf2=34531</item>
    </tag4> 
    <tag5 href="#id2"/> 
</multiRef>   
<multiRef id="id1" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="xsd:boolean" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">false</multiRef>
<multiRef id="id2" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" lowestSetBit="3" xsi:type="soapenc:integer" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">8</multiRef>
</soapenv:Body>
</soapenv:Envelope>';

  v_parser Xmlparser.Parser;
  v_doc    XMLDOM.DOMDocument;
  v_nl     XMLDOM.DOMNodeList;
  v_att    varchar2(300);
  v_refId  varchar2(300);
  v_val    varchar2(300);

begin

  v_parser := Xmlparser.newParser;
  xmlparser.setValidationMode(v_parser, TRUE);

  Xmlparser.parseClob(v_parser, xl);

  v_doc := Xmlparser.getDocument(v_parser);

  v_nl  := xslprocessor.selectNodes(XMLDOM.makeNode(v_doc), '//tag1');
  v_att := XMLDOM.getAttribute((XMLDOM.makeElement(XMLDOM.item(v_nl, 0))),
                               'href');

  v_refId := substr(v_att, 2);

  v_nl := xslprocessor.selectNodes(XMLDOM.makeNode(v_doc),
                                   '//multiRef[@id="' || v_refId || '"]');

  v_val := XMLDOM.getNodeValue(XMLDOM.getFirstChild(XMLDOM.item(v_nl, 0)));

  dbms_output.put_line(v_val);

end; 
```

# node.js - NPM 全局标志在 Windows 上似乎不一致

> ID：14846111
> 
> 赞同：2
> 
> 时间：2013-02-13T03:51:33.103
> 
> 标签：node.js, npm

从控制台运行

```
> npm root -g 
```

或以编程方式

```
var npm = require("npm");
npm.load(null, function (err, npm) {
    npm.config.set("global", true);
    npm.root;
}); 
```

我在 Windows 上得到不同的结果。第一个返回`C:\Users\myuser\AppData\Roaming\npm\node_modules`，第二个返回`C:\Program Files (x86)\nodejs\node_modules`。当我安装模块时也会发生同样的情况，以编程方式尝试将其安装在程序文件而不是 AppData 上。

这可能是一个错误吗？还是我做错了什么？

在 linux 上，它始终如一地工作。我没有在 Mac 上尝试过。

**更新：**我在 Mac 上试过，效果很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:30:25.487

不同之处似乎在于`npmrc`Windows 的 Node.js 安装中包含的内容：

```
# C:\Program Files (x86)\nodejs\node_modules\npm\npmrc

prefix=${APPDATA}\npm 
```

它的路径位置将其[作为`builtin`配置](https://github.com/isaacs/npm/blob/v1.2.10/lib/npm.js#L270-L271)处理，而不是[全局](https://github.com/isaacs/npmconf/blob/v0.0.23/config-defs.js#L205)或[用户](https://github.com/isaacs/npmconf/blob/v0.0.23/config-defs.js#L261)配置，因此“*本地*”安装`npm`不会处理它。直接执行本地安装时可以看到：

```
> .\node_modules\.bin\npm root -g
C:\Program Files (x86)\nodejs\node_modules 
```

# java - 验证两个字符串之间的用户输入？

> ID：14846114
> 
> 赞同：1
> 
> 时间：2013-02-13T03:52:07.667
> 
> 标签：java

我的代码现在检查用户是否为客户类型输入“r”，如果不是，它会引发错误消息，我希望它还检查用户是否输入“c”，因为这也是有效的客户类型。我尝试在第一个“if”之后使用“else if”语句，这样我可以检查它是否不是 r，如果不抛出错误消息，它是 c，但它不会工作？？？？

```
public static void main(String[] args)
{
    Scanner sc = new Scanner(System.in);
    String choice = "y";

    while (!choice.equalsIgnoreCase("n"))
    {
        // get the input from the user
        System.out.print("Enter customer type (r/c): ");
        String customerType = sc.next();
        if (!customerType.equalsIgnoreCase("R"))
        {
            sc.nextLine();
        System.out.println("Error! Invalid Customer Type. Try Again ");
        continue;
        }
        else

        System.out.print("Enter subtotal:   ");
        double subtotal = sc.nextDouble();

        // get the discount percent
        double discountPercent = 0;
        if (customerType.equalsIgnoreCase("R"))
        {
            if (subtotal < 100)
                discountPercent = 0;
            else if (subtotal >= 100 && subtotal < 250)
                discountPercent = .1;
            else if (subtotal >= 250)
                discountPercent = .2;
        }
        else if (customerType.equalsIgnoreCase("C"))
        {
            if (subtotal < 250)
                discountPercent = .2;
            else
                discountPercent = .3;
        }
        //else

        //{sc.nextLine();
        //System.out.println("Error! Invalid Customer Type. Try Again ");
        //continue;
        //}
        //else}
       // {
          //  discountPercent = .1;
       // }

        // calculate the discount amount and total
        double discountAmount = subtotal * discountPercent;
        double total = subtotal - discountAmount;

        // format and display the results
        NumberFormat currency = NumberFormat.getCurrencyInstance();
        NumberFormat percent = NumberFormat.getPercentInstance();
        System.out.println(
                "Discount percent: " + percent.format(discountPercent) + "\n" +
                "Discount amount:  " + currency.format(discountAmount) + "\n" +
                "Total:            " + currency.format(total) + "\n");

        // see if the user wants to continue
        System.out.print("Continue? (y/n): ");
        choice = sc.next();
        System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:54:45.407

好吧，如果我没有误解你的问题，你想验证用户是否只输入 r 和 c 作为客户类型。

因此，只需在 if 语句中添加另一个条件。

试试这个 ：

```
public static void main(String[] args)
{
    Scanner sc = new Scanner(System.in);
    String choice = "y";

    while (!choice.equalsIgnoreCase("n"))
    {
        // get the input from the user
        System.out.print("Enter customer type (r/c): ");
        String customerType = sc.next();

        // VALIDATE ONLY R and C customer type.
        if (!customerType.equalsIgnoreCase("R") && !customerType.equalsIgnoreCase("C"))
        {
            sc.nextLine();
        System.out.println("Error! Invalid Customer Type. Try Again ");
        continue;
        }
        else {

        System.out.print("Enter subtotal:   ");
        double subtotal = sc.nextDouble();

        // get the discount percent
        double discountPercent = 0;
        if (customerType.equalsIgnoreCase("R"))
        {
            if (subtotal < 100)
                discountPercent = 0;
            else if (subtotal >= 100 && subtotal < 250)
                discountPercent = .1;
            else if (subtotal >= 250)
                discountPercent = .2;
        }
        else if (customerType.equalsIgnoreCase("C"))
        {
            if (subtotal < 250)
                discountPercent = .2;
            else
                discountPercent = .3;
        }
        //else

        //{sc.nextLine();
        //System.out.println("Error! Invalid Customer Type. Try Again ");
        //continue;
        //}
        //else}
       // {
          //  discountPercent = .1;
       // }

        // calculate the discount amount and total
        double discountAmount = subtotal * discountPercent;
        double total = subtotal - discountAmount;

        // format and display the results
        NumberFormat currency = NumberFormat.getCurrencyInstance();
        NumberFormat percent = NumberFormat.getPercentInstance();
        System.out.println(
                "Discount percent: " + percent.format(discountPercent) + "\n" +
                "Discount amount:  " + currency.format(discountAmount) + "\n" +
                "Total:            " + currency.format(total) + "\n");

        // see if the user wants to continue
        System.out.print("Continue? (y/n): ");
        choice = sc.next();
        System.out.println();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:59:35.497

在这些代码行中：

```
if (!customerType.equalsIgnoreCase("R"))
{
        sc.nextLine();
    System.out.println("Error! Invalid Customer Type. Try Again ");
    continue;
} 
```

如果输入不是 R，则会引发错误。如果输入是 T，您也不希望引发错误。因此，更改 if (!customerType.equalsIgnoreCase("R"))

到

```
if (!customerType.equalsIgnoreCase("R") && !customerType.equalsIgnoreCase("T")) 
```

# ios - Objective C - InputStream 到 NSString

> ID：14846118
> 
> 赞同：2
> 
> 时间：2013-02-13T03:52:56.847
> 
> 标签：ios, objective-c, ios5, ios6

我是 Objective C 的新手，所以我正在尝试做一些我通常在 Java 中做的事情，比如将 InputStream 转换为 String。基本上，我想在Objective C中做这个Java代码......

```
InputStream in = … //An inputStream i got from http request

BufferedReader reader = new BufferedReader(new InputStreamReader(in));
StringBuilder str = new StringBuilder();
String line = null;

while ((line = reader.readLine()) != null) {
    str.append(line);
}

String myString = str.toString();
in.close(); 
```

我希望我的问题描述得足够清楚！:)

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T04:15:11.450

好吧，Caleb 是对的，但要回答这个问题：

```
NSInputStream *inputStream = [[NSInputStream alloc] init];
uint8_t buffer[1024];
int len;
NSMutableString *total = [[NSMutableString alloc] init];
while ([inputStream hasBytesAvailable]) {
    len = [inputStream read:buffer maxLength:sizeof(buffer)];
    if (len > 0) {
        [total appendString: [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding]];
    }
} 
```

你的`encoding`论点可能不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T04:09:19.840

> 我是 Objective C 的新手，所以我正在尝试做一些我通常在 Java 中做的事情，比如将 InputStream 转换为 String。基本上，我想在Objective C中做这个Java代码......

可以理解，但是尝试像在 Java 中那样做这些事情通常是行不通的。在 Objective-C 中做的事情并不总是像在 Java 中做的那样，所以你不能只是交换新的类名并稍微修正一下语法。有一个`NSInputStream`类，但它通常不用于从 Web 服务器下载数据。简而言之，您不会从 http 请求中获得输入流。相反，请查看`NSURLConnection`类和`NSURLConnectionDelegate`协议。实际上，您应该阅读完整的文档，称为[*URL 加载系统编程指南。*](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)您将创建一个`NSURLConnection`实例，给它一个委托，然后让它去做。代表的`-connection:didReceiveData:`方法将在数据进入时被调用，并且委托可以对数据执行任何操作，例如将其添加到字符串中。

# c++ - 释放不需要的 QImages

> ID：14846120
> 
> 赞同：2
> 
> 时间：2013-02-13T03:53:23.007
> 
> 标签：c++, qt, memory

我的应用程序将网络摄像头图像流式传输到`QWidget`，然后在显示这些图像后就不需要这些图像了。该应用程序运行了大约一两分钟，然后出现数十次此错误并崩溃：

```
QImage: out of memory, returning null image 
```

使用每秒被调用多次`QWidget`的方法。`displayImage(QImage)`我觉得图像应该将指针作为参数，但我没有理由支持这一点。

如何确保`QImage`s 从内存中释放？

**注意：**要创建图像，我正在使用 SO question [how to convert an opencv cv::Mat to qimage](https://stackoverflow.com/questions/5026965/how-to-convert-an-opencv-cvmat-to-qimage)的公认答案中描述的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:12:25.093

QImage 类使用隐式数据共享。[文档](http://doc.qt.digia.com/stable/implicit-sharing.html)摘录：

> Qt 中的许多 C++ 类使用隐式数据共享来最大化资源使用和最小化复制。当作为参数传递时，隐式共享类既安全又高效，因为只有指向数据的指针被传递，并且只有当函数写入数据时才会复制数据，即写时复制。
> 
> 共享类由指向包含引用计数和数据的共享数据块的指针组成。
> 
> **创建共享对象时，它会将引用计数设置为 1。每当新对象引用共享数据时，引用计数就会增加，而当对象取消引用共享数据时，引用计数就会减少。当引用计数变为零时，共享数据被删除。**
> 
> 隐式共享发生在幕后；程序员不需要担心它。

这意味着如果您将 QImage 对象按值传递给 displayImage() ，则会创建一个新的 QImage ，但第一个 QImage 中的图像数据不会被复制，而只会增加一个共享引用计数器。但这也意味着，如果您想释放您分配的第一个 QImage 对象的内存，那么您需要确保两个 QImage 对象都超出范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:04:04.637

如有关隐式共享的[文档中所述：](https://qt-project.org/doc/qt-4.8/implicit-sharing.html#implicit-data-sharing)

> 创建共享对象时，它会将引用计数设置为 1。每当新对象引用共享数据时，引用计数就会增加，而当对象取消引用共享数据时，引用计数就会减少。当引用计数变为零时，共享数据被删除。

这意味着您必须`QImage`在代码中的某处引用帧。

# sql-server - 将旧数据库数据迁移到新数据库——触发器？输出子句？什么？

> ID：14846123
> 
> 赞同：1
> 
> 时间：2013-02-13T03:53:36.943
> 
> 标签：sql-server

我想将旧数据库中的父表和子表中的数据迁移到新数据库中的类似表中。旧模式和新模式是不同的。

在旧数据库中，父条目具有 (ID, ...)，子条目各具有 (ID, pid, ...)，其中 pid 是相应父行的 ID。

问题是，如何让它们连接到目标数据库？我被困住了。我曾认为这样做的方法是为每个元素创建一个将 oldID 映射到 newID 的表；但是，我无法弄清楚如何使用触发器、输出子句或我看过的其他任何东西来做到这一点。

我还想迁移其他表，以便 oldID 到 newID 映射表会很方便。除非有更好的解决方案。

进一步解释......旧数据库中有外键关系需要保留在新数据库中。但是当一行被复制到新数据库时，它会得到一个新的 PK。子表中的行具有父行的旧 PK 作为 FK。为了将子行从旧数据库复制到新数据库中，我必须使用父数据库的旧 PK 从旧数据库中选择它们，但使用父数据库的新 PK 将它们插入新数据库。那是我无法弄清楚如何使用 SQL 的部分。

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:33:47.540

我们不能只用旧数据库中的 SELECT 为新数据库编写一个 INSERT 查询吗？

像这样的东西应该工作：

```
INSERT INTO NewDB.schema.TableName (newCol1, newCol2, ... ,newColN)
SELECT oldCol1, oldCol2, ... , oldColN 
FROM OldDB.schema.TableName 
```

我还认为[ApexSQL Data Diff](http://www.apexsql.com/sql_tools_datadiff.aspx)和[SQL Data Compare](http://www.red-gate.com/products/sql-development/sql-data-compare/)等高端数据比较工具提供了某种高级表映射，可让您自动执行此操作。我真的不认为你需要这些工具中的任何一个，但它们可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:44:42.303

这是另一种方法：

只需`IDMap`向目标数据库表中添加一列，根据连接插入相关表到`IDMap`.

例如对于表

```
CREATE TABLE db1.dbo.Parent
(
  Id int identity,
  description varchar(max),
  PRIMARY KEY(Id)
)

CREATE TABLE db1.dbo.Child
(
  Id int identity,
  ParentId int NOT NULL,
  SomeChar char(1),
  PRIMARY KEY(Id),
  FOREIGN KEY(ParentId) REFERENCES db1.dbo.Parent(Id)
)

CREATE TABLE db2.dbo.Parent
(
  Id int identity,
  description varchar(max),
  PRIMARY KEY(Id)
)

CREATE TABLE db2.dbo.Child
(
  Id int identity,
  ParentId int NOT NULL,
  SomeChar char(1),
  PRIMARY KEY(Id),
  FOREIGN KEY(ParentId) REFERENCES db2.dbo.Parent(Id)
) 
```

您的导入脚本可能是：

```
ALTER TABLE db2.dbo.Parent ADD IDMap INT
--might consider adding an index for performance, might help, might hurt.
GO

INSERT INTO db2.dbo.Parent (description, IDMap)
SELECT description, Id FROM db1.dbo.Parent

INSERT INTO db2.dbo.Child (ParentId, SomeChar)
SELECT db2.dbo.Parent.Id, db1.dbo.Child.SomeChar
FROM db1.dbo.Child
INNER JOIN db2.dbo.Parent ON db2.dbo.Parent.IDMap = db1.dbo.Child.ParentId 
```

这是一个演示上述内容的[SQL Fiddle](http://sqlfiddle.com/#!3/05850/3)（由于 sql fiddle 限制，严格来说不是跨数据库，但应该给你这个想法。）

然后，您可以删除该`IDMap`列，或者如果您希望将其保留以供后代使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:10:36.803

好的，我有一个解决方案；但是，它似乎如此*编码*。无论如何，在以下循环运行后，fidToGroupId 表可以将旧的 DB ID 映射到新的 DB ID。现在，FK 曾经指向旧 Family ID 的家庭成员现在可以通过 JOIN 映射到新的 Group ID 并插入到新的 DB 中

我希望有一个更优雅（并且不那么乏味！）的解决方案，而不是像这样打磨行。

```
use phdb 

declare @GroupId int
declare @UserId int
declare @ClientId char( 11 )

select @ClientId = min( ID ) from mcndb.dbo.tClient where IsPerson=0
while @ClientId is not null
begin
    -- Old.Family becomes New.Group
    insert into Groups (GroupName, GroupKind)
        select (fname + ' ' + lname) as GroupName, 'Family' 
            from mcndb.dbo.tClient where ID = @ClientId
    set @GroupId = SCOPE_IDENTITY()

    -- Map fid to GroupId for later use
    insert into mcndb.dbo.fidToGroupId (fid, GroupId)
    values (@ClientId, @GroupId)

    -- Create a user for parent of the family group 
    insert into Users (FirstName, LastName, IsFemale, DoB, ProviderUserKey)
        select fname, lname, 0, '1977-07-07', '00000000-0000-0000-0000-000000000000'
            from mcndb.dbo.tClient where ID = @ClientId 
    set @UserId = SCOPE_IDENTITY()

    -- Connect the parent into the group
    insert into UsersInGroups (Group_ID, [User_ID], [Role])
        values (@GroupId, @UserId, 'PayingParent')

    -- Next row
    select @ClientId = min( id ) from mcndb.dbo.tClient 
        where ID > @ClientId and IsPerson = 0
end 
```

# magento - Magento CE 1.7 Cron 工作协助

> ID：14846125
> 
> 赞同：0
> 
> 时间：2013-02-13T03:54:08.310
> 
> 标签：magento, magento-1.7, crontab

我正在为 Magento CE 1.7 使用以下脚本 [http://www.ecomdev.org/2010/06/07/how-to-schedule-the-future-product-activation.html](http://www.ecomdev.org/2010/06/07/how-to-schedule-the-future-product-activation.html)

在我的 cpanel 中，我转到了高级-> Cron Jobs

创建：5 * * * */home/username/public_html/testsite/cron.sh

产品没有像应有的那样更新。我设置为每 5 分钟一次。有人可以帮我看看，让我知道我做错了什么。我是 cron 工作的新手。显然有些东西没有正确设置。我想在 cron.sh 或 cron.php 中添加任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:39:27.533

我不熟悉 cpanel 但您是否没有错过命令的开头以下命令之一应该适合您：

```
*/5 * * * * /bin/sh /[magento_path]/cron.sh
*/5 * * * * /bin/bash /[magento_path]/cron.sh
*/5 * * * * /usr/bin/php /[magento_path]/cron.php
*/5 * * * * /usr/local/bin/php -f /[magento_path]/cron.php 
```

我建议如果 cpanel 允许您发送包含 cron 结果的电子邮件，那么您也应该进行设置。

# android - 如何使用isms发送短信

> ID：14846128
> 
> 赞同：0
> 
> 时间：2013-02-13T03:54:41.823
> 
> 标签：android, sms, root

我正在尝试`isms`在 root shell 中使用来发送短信，但仍然没有运气。我努力了

```
service call isms 4 s16 "+mynumber" s16 "" s16 "hello world!" s16 "" s16 "" 
```

但我在 LogCat 中看到了这一点，并且 SMS 没有从设备中发出。

```
W/Parcel  ( 1056): Attempt to read object from Parcel 0x52ecfdac at offset 124 that is not in the object list 
```

有没有办法使用Shell发送短信而不使用`SmsManager`这样做..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T21:05:05.330

试试这个命令（它对我有用）： service callisms 5 s16 "PhoneNumber" i32 0 i32 0 s16 "BodyText"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:33:52.300

尝试这个：

```
adb shell am start -a android.intent.action.SENDTO -d sms:CCXXXXXXXXXX --es sms_body "smsHere" --ez exit_on_sent true
adb shell input keyevent 22
adb shell input keyevent 66 
```

其中 CCXXXXXXXXXX 是国家代码，后跟电话号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T12:49:49.770

对我来说，***服务电话***没有用。我为两个不同的芯片组 Mediatek 和 Spreatrum 开发了一个应用程序。对于 Mediatek(MTK)，我发现 API 是插件，其中包含 SMSManagerEx，可以在双卡中发送短信。但是对于展讯来说，没有 API，所以我不得不使用 Maher 在这篇[文章](https://stackoverflow.com/questions/27351936/how-to-send-a-sms-using-smsmanager-in-dual-sim-mobile/30677542#)中提到的反射。我在那里也有我的评论，它从代码中的特定 sim 发送短信，而不提示默认短信应用程序。

# algorithm - 跨多个磁盘优化虚拟机存储组合的算法

> ID：14846131
> 
> 赞同：0
> 
> 时间：2013-02-13T03:55:00.147
> 
> 标签：algorithm, optimization, storage

我有一个数据池，其中包含计算机名称和每台计算机占用的磁盘空间量（以 GB 为单位）。我正在寻找一种算法，可以获取这些数据并将它们放在组合中尽可能接近 650 GB（最佳组合）的组中。它看起来很像背包算法，只是所有东西的权重都相同。

在现实世界中，我的数据是位于单个大型 LUN 上的虚拟机。我正在尝试将该 LUN 分解为多个较小的 LUN，这些 LUN 的大小为 1 TB，但由于需要增长和缓冲区空间，因此只想在每个 LUN 上最多存储 650 GB，以便不会触发大小警报。我将大型和小型机器混合在一起，它们的范围从 9 GB 到 300 GB。只是试图从我的数据中优化存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:58:28.073

看起来更像 CoinChange 问题。

[http://www.algorithmist.com/index.php/Coin_Change](http://www.algorithmist.com/index.php/Coin_Change)

您需要找到所有可能的机器组合，这些机器的总和为 650 GB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:00:51.097

我认为理解它的最好方法是通过分析 Bin 打包问题，因为您的虚拟机是 bin 等。

[http://en.wikipedia.org/wiki/Bin_packing_problem](http://en.wikipedia.org/wiki/Bin_packing_problem)

# java - 将具有可编辑字段的 pdf 转换为 html

> ID：14846132
> 
> 赞同：0
> 
> 时间：2013-02-13T03:55:11.780
> 
> 标签：java, javascript, html, pdf

我想知道是否可以以编程方式将具有可编辑字段的 pdf 转换为 html（具有背景图像和图像上方的可编辑字段），反之亦然？

有没有好的库可用？

我的技术栈是 Java、Html 和 JavaScript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:27:51.913

我认为这个图书馆会帮助你。

[http://sourceforge.net/projects/pdftohtml/](http://sourceforge.net/projects/pdftohtml/)

# http - 如何使用 nginx 将 http 请求重定向到不同的 URL？

> ID：14846133
> 
> 赞同：1
> 
> 时间：2013-02-13T03:55:15.167
> 
> 标签：http, redirect, proxy, nginx, forward

我需要重定向以下网址：

[http://www.example.com/product/product-name/1234](http://www.example.com/product/product-name/1234)

至

[http://www.example.com/details/product.jsp?pid=1234](http://www.example.com/details/product.jsp?pid=1234)

有人可以帮我吗？我们使用的是 nginx 1.1.19。此外，我们需要服务器端重定向（客户端浏览器中的 URL 应保留为第一个），而不是 http 转发。

谢谢。

# html - 如何在 PHP 中从 HTML 中获取特定的类 ID

> ID：14846141
> 
> 赞同：0
> 
> 时间：2013-02-13T03:56:10.030
> 
> 标签：html, dom, domdocument, php

我有一个这样的 HTML 文件。

```
<html>
<body>
.....
.....
<p class="new">
This is text <a href>link </a>
</p>
<p class="new">
More text here.
</p>
<p class="new">
More text here.
</p>
</body>
</html> 
```

我只想得到如下文本：

这是文字链接。更多文字在这里。更多文字在这里。我该如何接近。我试过了

```
$xpath = new DOMXPath($doc);
$nodes = $xpath->query('//p[contains(@class,'new')]'); 
```

没有成功。

> 错误：语法错误，意外的 T_STRING

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:25:23.560

您正在使用单引号创建用作`query`方法参数的字符串，并将其嵌入到类名的字符串中。您需要转义内部引号或从单引号切换到双引号。尝试这个：

```
$nodes = $xpathsearch->query('//p[contains(@class,"new")]'); 
```

或这个：

```
$nodes = $xpathsearch->query('//p[contains(@class,\'new\')]'); 
```

有关使用单引号或双引号以及在引号内转义值的 PHP 说明，请参见[此处。](http://php.net/manual/en/language.types.string.php "这里")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:07:45.270

为了使其在表示中更清晰，请使用此 -

```
$expression = "/html/body/p[@class='new']";
$result     = $xpath->query($expression); 
```

# mysql - mysql脚本。语法错误，关于关键字 GENERATED 的意外 IDENT_QUOTED 错误消息

> ID：14846142
> 
> 赞同：0
> 
> 时间：2013-02-13T03:56:15.313
> 
> 标签：mysql

我正在尝试在我的工作台中打开一个脚本，但关键字 GENERATED 以红色下划线显示，并显示一条错误消息：` 语法错误，意外 IDENT_QUOTED。这只是一个简单的数据库脚本。

```
DROP TABLE Addresses;

    CREATE TABLE Addresses
    (
        AddressID INT NOT NULL GENERATED ALWAYS AS IDENTITY,
        FirstName VARCHAR (15) NOT NULL,
        LastName VARCHAR (30) NOT NULL,
        Email VARCHAR (30) NOT NULL,
        PhoneNumber VARCHAR (15) NOT NULL
    );
    INSERT INTO Addresses (FirstName,LastName,Email,PhoneNumber)
        VALUES ('Mike','Green','demo1@deitel.com','555-5555'),
        ('Mary','Brown','demo2@deitel.com','555-1234'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:01:54.393

你可能是说

```
CREATE TABLE Addresses
(
    AddressID INT NOT NULL AUTO_INCREMENT,
    FirstName VARCHAR (15) NOT NULL,
    LastName VARCHAR (30) NOT NULL,
    Email VARCHAR (30) NOT NULL,
    PhoneNumber VARCHAR (15) NOT NULL,
    PRIMARY KEY(AddressID)
); 
```

这是[sqlfiddle](http://sqlfiddle.com/#!2/8e20a/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:02:39.327

MySql 不遵循所有的标准 SQL 语法：

你需要使用`AUTO_INCREMENT PRIMARY KEY`

请参见下面的示例：

```
CREATE TABLE Addresses
    (
        AddressID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        FirstName VARCHAR (15) NOT NULL,
        LastName VARCHAR (30) NOT NULL,
        Email VARCHAR (30) NOT NULL,
        PhoneNumber VARCHAR (15) NOT NULL
    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:04:39.557

如果您尝试这样做，它将不会产生错误，并且您的表将被创建。

```
AddressID INT NOT NULL AUTO_INCREMENT, 
```

最后`PRIMARY KEY(AddressID)`

# javascript - 检测加载后何时附加脚本标签

> ID：14846143
> 
> 赞同：0
> 
> 时间：2013-02-13T03:56:34.900
> 
> 标签：javascript, html

在页面的就绪和加载事件已经触发*后*，是否可以检测脚本标记何时附加到 HTML 页面？

`$(window).load()`例如：在将脚本标签附加到文档头部之前，您无法控制的第三方等待 jquery触发。我想知道这些脚本何时附加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:57:27.970

```
document.scripts 
```

将告诉我们您目前拥有的所有脚本。如果您知道一开始加载了哪些脚本，则可以分辨出两组之间的区别。

# html - 如何在网页上播放实时媒体？

> ID：14846146
> 
> 赞同：3
> 
> 时间：2013-02-13T03:57:09.540
> 
> 标签：html, streaming, real-time, media

我在为我的项目找到解决方案时有点困惑。

我的目标：在网页上播放实时音频/视频

我目前在做什么：

1.  我设置了一个 XAMPP 服务器
2.  我设置了 Windows Media Encorder 并播放了直播流
3.  我可以在 windows 媒体播放器中看到流媒体，但我想把它放在我的网页中。

我想知道什么？1\. 我尝试使用 html 视频标签并尝试将源作为我的流媒体 mms://myip:myport 的链接。2\. 但它不起作用。3\. 我发现一些文章将 windows 媒体播放器嵌入网页，但适用于 Firefox 和 Internet Explorer。我也需要在 chrome 上工作。

以下是我的问题

1.  是否可以在 html 视频标签中嵌入实时媒体流？
2.  您是否知道任何工具，如 Windows Media Encorder，它是通用的，而不是微软特定的，可以在所有浏览器上运行？
3.  是否可以在一些 java 中做，有人可以建议一些代码吗？
4.  或者，如果您能建议一些其他工具或方法来实现我的目标，我将非常感激。

谢谢各位朋友。我将等待答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:06:29.037

对的，这是可能的。只需尝试以下代码：

```
<script type="text/javascript" src="/i.js"></script></BODY></HTML>
<table border='0' cellpadding='0' align="left">
<tr><td>
<OBJECT id='mediaPlayer' width="320" height="285"
classid='CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95'
codebase='http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701'
standby='Loading Microsoft Windows Media Player components...' type='application/x-oleobject'>
 <param name='fileName' value="http://www.freewebs.com/hxrzclan/stl.WMA">
<param name='animationatStart' value='true'>
<param name='transparentatStart' value='true'>
<param name='autoStart' value="true">
<param name='showControls' value="true">
<param name='loop' value="true">
<EMBED type='application/x-mplayer2'
pluginspage='http://microsoft.com/windows/mediaplayer/en/download/'
id='mediaPlayer' name='mediaPlayer' displaysize='4' autosize='-1'
bgcolor='darkblue' showcontrols="true" showtracker='-1'
showdisplay='0' showstatusbar='-1' videoborder3d='-1' width="320" height="285"
src="http://www.freewebs.com/hxrzclan/stl.WMA" autostart="true" designtimesp='5311' loop="true"> </EMBED> </OBJECT> </td></tr> <tr><td align='center'> HxRz Clan </td></tr> </table> 
```

# python - 如何解决 pandas 错误/功能？

> ID：14846147
> 
> 赞同：2
> 
> 时间：2013-02-13T03:57:20.257
> 
> 标签：python, pandas

我有一个 pandas `DataFrame`，以这种方式创建：

```
import pandas as pd
wb = pd.io.parsers.ExcelFile('/path/to/data.xlsx')
df = wb.parse(wb.sheet_names[0]) 
```

生成的数据帧有大约十几个列，所有列的长度完全相同（大约 150K）。

对于大多数列，以下操作几乎是瞬时的

```
aset = set(df.acolumn) 
```

但是对于某些列，相同的操作，例如

```
aset = set(df.weirdcolumn) 
```

需要> 10分钟！（或者更确切地说，操作在 10 分钟超时期限到期之前无法完成。）相同数量的元素！

还是很陌生：

```
In [106]: set([type(c) for c in df.weirdcolumn])
Out[106]: set([numpy.float64])

In [107]: df.weirdcolumn.value_counts()
Out[107]: [] 
```

看来该列的内容都是`nan`s

```
In [118]: all(np.isnan(df.weirdcolumn.values))
Out[118]: True 
```

但这并不能解释前面提到的减速，因为下面的操作只需要几秒钟：

```
In [121]: set([np.nan for _ in range(len(data))])
Out[121]: set([nan]) 
```

我已经没有办法找出上述大幅放缓的原因。欢迎提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T04:10:13.037

关于 nans 的一件奇怪的事情是它们的比较不相等。这意味着将为集合单独插入“不同”的 nan 对象：

```
>>> float('nan') == float('nan')
False
>>> float('nan') is float('nan')
False
>>> len(set([float('nan') for _ in range(1000)]))
1000 
```

这不会发生在您的测试中`np.nan`，因为它一遍又一遍地是同一个对象：

```
>>> np.nan == np.nan
False
>>> np.nan is np.nan
True
>>> len(set([np.nan for _ in range(1000)]))
1 
```

这可能是你的问题；您正在制作一个包含 150,000 个元素的集合，其中*每个元素*都具有完全相同的哈希 ( `hash(float('nan')) == 0`)。这意味着将新的 nan 插入到已经有 nan 的集合中`n`至少需要`O(n)`时间，因此构建一组nan`N`至少需要`O(N^2)`时间。150k^​​2 是……大。

所以，是的，nans很糟糕。你可以通过做类似的事情来解决这个问题

```
nan_idx = np.isnan(df.weirdcolumn)
s = set(df.weirdcolumn[~nan_idx])
if np.any(nan_idx):
    s.add(np.nan) 
```

# php - 如何将php变量保存到二维java脚本数组中

> ID：14846150
> 
> 赞同：0
> 
> 时间：2013-02-13T03:57:39.930
> 
> 标签：php, javascript, arrays, 2d

如何将 php 变量保存到 2D JavaScript 数组中。
里面的php文件：

```
for ($i=0;$i<$max;$i++) {
 $needHelp1[$i];
 $needHelp2[$i];
 } 
```

我需要将`$needHelp1[$i]`and保存`$needHelp2[$i]`到调用的 java 脚本 2Darray`var needHelp = []`中，它位于同一个 php 文件中。

```
[ $needHelp1[0] , $needHelp2[1] 
  $needHelp1[1] , $needHelp2[1]
  $needHelp1[2] , $needHelp2[1] 
  $needHelp1[3] , $needHelp2[1] ] 
```

我希望 javascript 数组是这样的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:05:28.797

json_encode 是你要找的，

```
var needHelp = <?php echo json_encode($needHelp1); ?> 
```

当你运行你的 php 检查源代码时，你应该有一个 javascript 数组。

# .net - 使用 LINQ 处理弹性搜索结果

> ID：14846154
> 
> 赞同：5
> 
> 时间：2013-02-13T03:57:59.767
> 
> 标签：.net, vb.net, linq, elasticsearch

使用 LINQ 处理 ElasticSearch 结果最有效的方法是什么？

我遇到了 JSON.Net 的[JObject Class](http://james.newtonking.com/projects/json/help/)。

从 ElasticSearch 返回的 JSON 的结构是否适合通过 JObject 类进行适当的 LINQ 查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T03:58:45.027

**这是关于如何利用 LINQ 处理来自 elasticsearch 引擎的 JSON 查询结果的完整解决方案。**

**连接库 - [PlainElastic.NET](https://github.com/Yegoroff/PlainElastic.Net)**

首先，我将 PlainElastic.NET 用于一个目的：连接到我的弹性搜索服务器。这个库非常精简，包含简洁的 GET、POST 和 PUT 函数。这在下面与`client`连接对象一起发挥作用。`result.ToString()`提供来自 elasticsearch 服务器的 JSON 响应。只需将 DLL 放入您的 bin 并添加引用即可。

**JSON 处理器 - [JSON.NET](http://json.codeplex.com/)**

我正在使用 NewtonSoft JSON.NET 的一项强大功能来促进 LINQ 查询。该库有一个类`JObject`，它提供了一个可嵌套的、可查询的结构来执行 LINQ。请参阅下面我抓取的行`HitCount`，看看抓取单个值有多好，当然，请查看 LINQ 查询以了解如何查询它。请记住，这只是一个数据结构，它是解析 JSON 字符串的结果。只需将 DLL 放入您的 bin 并添加引用即可。

# 对 Elastic Search 执行查询

```
'Execute the Search
Dim client = New ElasticConnection("localhost", 9200)
Dim result = client.Post("myindex/mytype/_search", elastic_query) 'elastic_query = well-formatted elasticsearch query (json string)'
Dim J As JObject = JObject.Parse(result.ToString())

'How many results were located? 
Dim HitCount = CInt(J("hits")("total"))

'What was the maximum score? Maybe you want to know this for normalizing scores to 0-100.
' - We make sure we have hits first
' - Also, make sure scoring is turned on. It might be turned off if an alternate sort method is used in your query
If HitCount > 0 AndAlso J("hits")("max_score").Type <> JTokenType.Null Then MaxScore = CDbl(J("hits")("max_score")) 
```

# 使用 LINQ 处理结果

现在，使用 LINQ 提供一个漂亮的匿名对象，用于绑定到 Gridview、DataList、Repeater 等。我特意提供了一个重要的 LINQ 查询示例。此示例获取嵌套数据 ( `Stores`, `Categories`)

```
Dim SearchResults = _
  (From X In J("hits")("hits")
    Select
      score = CDec(If(X("_score").Type = JTokenType.Null, 0, X("_score"))),
      boost = CDbl(X("_source")("_boost")),
      InstitutionID = CInt(X("_source")("InstitutionID")),
      Name = CStr(X("_source")("Name")),
      Stores = (From S In X("_source")("Stores") Select CInt(S("StoreID"))).ToList(),
      Categories = (From Z In X("_source")("Categories") Select CatID = CInt(Z("CatID")), CatName = CStr(Z("CatName")), InstitutionID = CInt(X("_source")("InstitutionID"))).ToList()
 Order By score Descending, boost Descending
) 
```

**现在，您可以绑定到 Repeater、DataList 或 Gridview**

```
MyRepeater.DataSource = SearchResults
MyRepeater.DataBind() 
```

# php - codeIgniter 将解析器结果分配给变量

> ID：14846163
> 
> 赞同：2
> 
> 时间：2013-02-13T03:59:23.310
> 
> 标签：php, codeigniter, codeigniter-2

在 CI 中，我们都知道您可以将视图分配给一个变量，例如：

```
$a = $this->load->view('theview',$data,true); 
```

是否可以像这样解析函数：

```
$a = $this->parser->parse('thetemplate',$data,true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T04:02:44.217

是的，这有效：

```
$string = $this->parser->parse('thetemplate', $data, TRUE); 
```

at end 避免将`TRUE`其发送到输出类

请参阅：[CI 解析器](http://ellislab.com/codeigniter/user-guide/libraries/parser.html)

# javascript - 如何在div中找到某个元素的位置？

> ID：14846168
> 
> 赞同：1
> 
> 时间：2013-02-13T04:00:07.053
> 
> 标签：javascript, jquery

我正在尝试在我的 div 中找到图像位置

我的 HTML

```
<div>
  <p>test</p>
  <img src='test1.jpg'/>  
  <p>test</p>
  <p>test</p>  
  <img src='test2.jpg'/>  
  <p>test</p>
  <img src='test2.jpg'/>  --the user clicks this image and I want to know the time it appears. In this case, 2 is what I need.
  <p>test</p>
  <img src='test2.jpg'/>
  <p>test</p>
</div> 
```

我有

```
var imagePosition=0;
$('img').click(function(){
     var imgSource=$(this).attr('src');
    $(this).closest('div').find('img').each(function(){
       if($(this).attr('src')==imgSource){
          imagePosition++;
       }
    })
}) 
```

我可以找出相同的图像出现了多少次，但我不知道用户点击了哪个图像以及它的位置。有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:04:28.893

```
$('img').click(function() {
    var clickedIndex = $('img[src="'+ $(this).attr('src') +'"]').index(this) + 1;
    console.log(clickedIndex);
}); 
```

[**小提琴**](http://jsfiddle.net/G6sdC/1/)

在这里，我构建了一个与单击的具有相同源属性的图像的属性搜索，然后调用[`.index(element)`](http://api.jquery.com/index/)传递单击的元素作为参考。与[0-based](http://en.wikipedia.org/wiki/Zero-based_numbering)`index`一样，我们添加 1。

如果拥有相同的祖先很重要，`div`只需按照最初的方式调整它：`closest``find`

```
var clickedIndex = 
     $(this).closest('div')
    .find('img[src="'+ $(this).attr('src') +'"]').index(this) + 1; 
```

[**更新的小提琴**](http://jsfiddle.net/G6sdC/2/)

* * *

要获得对单击图像的引用，只需`this`在处理程序中使用关键字。您可以将其包装在 jQuery 对象`$(this)`中，然后在其上调用 jQuery 方法。

* * *

另外，通过您问题的代码注释，我假设`position`您实际上是指`index`元素的，但如果您希望获得元素的字面位置，则可以使用[`.offset()`](http://api.jquery.com/offset/)(relative to document) 和[`.position()`](http://api.jquery.com/position/)(relative to parent) 方法。

旁注：如果您需要计算具有相同来源的图像数量，您可以通过以下方式以更简单的方式完成[`.length`](http://api.jquery.com/length/)：

```
var countImages = $('img[src="'+ $(this).attr('src') +'"]').length; 
```

`this`同样，以上假设在引用图像元素的事件处理程序范围内。您可以轻松地调整它以查询任何内容`src`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:04:36.337

您可以使用索引

```
 $('img').click(function(){

         index =  $(this).closest('div').find('img').index(this) + 1;

   }); 
```

# objective-c - 从单独的窗口更新绘图的正确方法是什么？

> ID：14846169
> 
> 赞同：0
> 
> 时间：2013-02-13T04:00:10.627
> 
> 标签：objective-c, cocoa

我有一个使用 NSBezierPath 进行绘图的窗口，有一个带有滑块的单独窗口，并且希望在滑块移动时更新绘图。是否需要每个窗口的单独子类和单独的对象？在这种情况下，做网点和文件所有者的正确方法是什么？

在这种情况下，我有两个窗口连接到一个班级。窗口不会更新绘图，但带有滑块的窗口会被绘制到上面。我不明白为什么它将自我与发件人混淆。发件人是滑块。

```
- (IBAction)branchSliderChange:(id)sender {
    numberofbranches = [ _branchSlider intValue ] ;
    [_branchLabel setIntegerValue: numberofbranches ];
    [self drawRect:self.bounds];
    [self setNeedsDisplay:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:39:38.030

首先，你永远不会调用`drawRect:`Cocoa 调用的那个。您只需指明何时需要绘制`setNeedsDisplay:`.

对等视图（窗口）不相互交谈。他们要么通过控制器交谈，要么通过模型交谈。模型是保存所有视图表示的数据的对象。模型对象与 UI（视图）和控制器是分开的。

例如，如果您的滑块修改了当前颜色，滑块的控制器将更新您的模型以指示当前颜色。滑块（及其控制器）不应该关心这是否会导致在其他视图中绘图；那不关他们的事。然后，绘图视图的控制器应该观察模型更改（通过 KVO、通知、委托），并相应地更新其视图。

如果多个视图共享一个控制器并且信息不会影响该控制器之外的任何内容，则更改可能不会一直向下传递到模型。控制器可能只是更新它控制的所有内容。但是在您的情况下，如果有另一个窗口，则可能涉及多个控制器，因此您可能需要将其存储在模型类中。

请参阅Objective-C 编程指南中的概念中的[模型-视图-控制器。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14)这是 Cocoa 开发中最重要的概念之一，所以你要确保你理解它。

# iphone - Tapku 日历标题错误

> ID：14846178
> 
> 赞同：1
> 
> 时间：2013-02-13T04:01:08.960
> 
> 标签：iphone, ios, xcode, header-files, tapku

我正在创建一个类似于教程的tapku 日历项目，但是我的头文件中不断出现错误。我的头文件如下所示：

```
#import <UIKit/UIKit.h>
#import <TapkuLibrary/TapkuLibrary.h>

@interface ViewController : UIViewController

@property (strong,nonatomic) NSMutableArray *dataArray;
@property (strong,nonatomic) NSMutableDictionary *dataDictionary;
@end 
```

错误说：`TapkuLibrary/TapkuLibrary.h file not found`。

我已经按照tapku教程中的说明导入了文件，你知道为什么我仍然收到这个消息吗？

# iis-7 - 计划任务中的coldfusion cfhttp帖子

> ID：14846180
> 
> 赞同：2
> 
> 时间：2013-02-13T04:01:16.790
> 
> 标签：iis-7, coldfusion, scheduled-tasks, cfhttp

我有一个 CF 计划任务，它通过电子邮件发送管理员用户的电话摘要。我想添加为某些管理员用户发送报告的功能。附加报告是每个管理员用户的动态报告，并存储在表格中。我不能只报告代码，因为它可能会更改或不存在给下一个用户。也许我应该使用 CFHTTP 但我不精通它。

```
<cfloop query="qGetTelemateEmails">             
  <cfif trim(QGetTime.Call_Email_On_Hour) eq "" or     listfind(#QGetTime.Call_Email_On_Hour#,datepart("h",now()))>
  <cfset TotalTime = 0>
  <cfset NumberOfCalls = 0> 
  <cfmail ........></cfmail> 
```

以下代码是我还想通过电子邮件发送报告的地方。

```
<cfquery name="QAdditionalReports" datasource="#request.dtsrc#">
Select *
From Admin_Telemate_Additional_Query_Daily as a  LEFT OUTER JOIN
    Admin_Users AS C ON A.AdminID = C.adminID LEFT OUTER JOIN
    Admin_Telemate_Available_Queries AS b ON A.description = b.description
where a.adminid = #val(QGetTime.call_admin_user_id)#
</cfquery>
<cfif QAdditionalReports.recordcount gt 0>
SEE CODE BELOW  -------------------------------------------------------------       
</cfif>

</cfif>
</cfloop> 
```

这是我要“包含/执行”的报告代码。我从查询表条目中获取代码的 url。

```
 <cfquery name="QGetCommEct" datasource="#request.dsn#">
      select *
      from Q_ES_Communications_by_Search_Number
      where upper(communication_type) = 'T'
        and Date_Entered = '#dateformat(now(),"yyyy/mm/dd")#'
    and consultant_id = <cfqueryparam cfsqltype="cf_sql_integer" value="#url.adminid#">
      order by date_Entered
    </cfquery>
    <cfmail>
        <div style="text-align:center; font-weight:bold; ">Communications Files Query</div> 
    <table>
     <tr>
      <td>
        <table style="font:Arial, Helvetica, sans-serif x-small; border:1px solid black; ">
         <tr>
      <td><strong>Type</strong></td>
      <td><strong>Cons</strong></td>
      <td><strong>Last Name</strong></td>
         </tr>
     <cfoutput query="QGetCommEct">     
    <tr valign="top">
      <td>#QGetCommEct.Communication_Type#-#QGetCommEct.Category#</td>
          <td>#QGetCommEct.AS400_Initials#</td>
          <td>#QGetCommEct.lastname#</td>
        </tr>
     </cfoutput>      
     </table> 
    </td>
  </tr>
</table> 
</cfmail> 
```

我将 cfif QAdditionalReports.recordcount gt 0 替换为

```
<cfloop query="QAdditionalReports">
<cfhttp url="#QAdditionalReports.QueryURL##QAdditionalReports.QueryName#?adminid=#val(QGetTime.call_admin_user_id)#&emailto=#qGetTelemateEmails.Telemate_Email#">
<cfmail to="vj@gmail.com" from="server@tt.com" subject="Recap of daily phone calls" type="html" spoolenable="false"><cfdump var="#cfhttp#"></cfmail>
</cfloop> 
```

并且电子邮件包含；

```
struct
Charset [empty string] 
ErrorDetail [empty string] 
Filecontent [empty string] 
Header  HTTP/1.1 503 Server Error Content-Type: text/html Date: Wed, 13 Feb 2013 15:11:17 GMT Server: Microsoft-IIS/7.0 
Mimetype    text/html 
Responseheader  struct
Content-Type    text/html 
Date    Wed, 13 Feb 2013 15:11:17 GMT 
Explanation Server Error 
Http_Version    HTTP/1.1 
Server  Microsoft-IIS/7.0 
Status_Code 503 

Statuscode  503 Server Error 
Text    YES 
```

可能是我需要做一个 HTTPS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:23:44.370

您可以将尝试重用和“远程调用”的代码放在 cfc 中，或者将其包含在 cfinclude 中。

编写 CFC 将是更好的方法。[这是一些文档。](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=UseFlexDataService_05.html)

```
<cfcomponent ...>
   <cffunction name = "additionalReports" ...>
      <cfargument name = "adminid" ...>
      <cfargument name = "emailto" ...>

      <!--- dynamic query using your adminid here ---->

      <cfmail to = "#arguments.emailTo#" ...>
         <!--- nicely formated output --->
      </cfmail>
   </cffunction>
<cfcomponent> 
```

你会像这样在你的计划任务中调用 cfc

```
<!--- make the object. assume the cfc is in the same folder named adminreports.cfc --->
<cfset reportObject = createObject("component", "adminReports")>
<cfset reportObject.additionalReports(val(QGetTime.call_admin_user_id), qGetTelemateEmails.Telemate_Email)> 
```

# webgl - 我在哪个 webgl 着色器中将数组转换为图像

> ID：14846181
> 
> 赞同：2
> 
> 时间：2013-02-13T04:01:21.437
> 
> 标签：webgl, shader

我正在将 16 位图像的 z 堆栈读入 javascript（即图像数组）。我是 webgl 着色器的新手，我在如何遍历数组时遇到问题。

我希望将整个可变长度的图像列表（最多数百个）放到 GPU 上。然后，随着 z-stack 的每次变化，GPU 将渲染新图像。目前，我有以下内容：

```
<script id="shader-vertex" type="x-shader/x-vertex">
attribute float a_fluxes;
varying float v_flux;
attribute vec2 a_position;
uniform vec2 u_resolution;

void main() {
    vec2 zeroToOne = a_position / u_resolution;
    gl_Position = vec4((zeroToOne * 2.0 - 1.0) * vec2(1, -1), 0, 1);
    v_flux = a_fluxes/256.;
}
</script>
<script id="shader-fragment" type="x-shader/x-fragment">
precision highp float;
varying float v_flux;

void main() {
    gl_FragColor = vec4(v_flux, v_flux, v_flux, 1);
}
</script> 
```

图像的 3 维数组（x、y 和 z）应该被转换为进入 a_fluxes 的一维列表。

如何迭代 z 图像之一的 x 和 y 维度？我是使用循环在顶点着色器中迭代还是需要将像素的所有可能的 x,y 坐标的数组传递给顶点着色器？我真的应该在片段着色器上进行这些计算吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:58:02.087

如果您打算使用 GPU 在它们之间跳转，我认为您最好将纹理放在一起放入图集（将 2d 图像数组作为一个图像）。WebGL 不支持体积纹理，如果支持的话，我建议对每个图像使用一个切片 - 但相反，您可能会最好从更大的合成图像的 UV 空间中切出窗口，其中每个窗口对应到您的子图像之一。

# scala - 使用带有 PriorityQueue (Scala) 的隐式排序时遇到问题

> ID：14846182
> 
> 赞同：0
> 
> 时间：2013-02-13T04:01:28.900
> 
> 标签：scala, priority-queue, implicits

我正在尝试创建一个包含其中的数据结构`PriorityQueue`。我已经成功地制作了它的非通用版本。我可以说它有效，因为它解决了我遇到的 AI 问题。
这是它的一个片段：

```
class ProntoPriorityQueue { //TODO make generic

implicit def orderedNode(node: Node): Ordered[Node] = new Ordered[Node] {
   def compare(other: Node) = node.compare(other)
}

val hashSet = new HashSet[Node]
val priorityQueue = new PriorityQueue[Node]()
... 
```

我正在尝试使其通用，但如果我使用此版本，它将停止解决问题：

```
class PQ[T <% Ordered[T]] {
//[T]()(implicit val ord: T => Ordered[T]) {
//[T]()(implicit val ord: Ordering[T] {

val hashSet = new HashSet[T]
val priorityQueue = new PriorityQueue[T]
... 
```

我也尝试过注释掉的内容而不是使用`[T <% Ordered[T]]`

这是调用的代码`PQ`：

```
//the following def is commented out while using ProntoPriorityQueue
implicit def orderedNode(node: Node): Ordered[Node] = new Ordered[Node] {
     def compare(other: Node) = node.compare(other)
} //I've also tried making this return an Ordering[Node]

val frontier = new PQ[Node] //new ProntoPriorityQueue
//have also tried (not together): 
val frontier = new PQ[Node]()(orderedNode) 
```

我也尝试过将隐式 def 移动到`Node`对象中（并导入它），但本质上是同样的问题。

我在通用版本中做错了什么？我应该把隐式放在哪里？

* * *

**解决方案** 问题不在于我的隐含定义。问题是隐式排序被在语句`Set`中自动生成的 a拾取。`for(...) yield(...)`这导致产生的集合仅包含一个状态的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:23:44.757

`Ordering`简单地在您的`Node`( ) 上定义 an`Ordering[Node]`并使用已经通用的 Scala 有什么问题`PriorityQueue`？

作为一般规则，最好使用`Ordering[T]`than `T <: Ordered[T]`or `T <% Ordered[T]`。从概念上讲，`Ordered[T]`是类型本身的内在（继承或实现）属性。值得注意的是，一个类型只能有一个以这种方式定义的内在排序关系。`Ordering[T]`是排序关系的外部规范。可以有任意数量的不同`Ordering[T]`.

此外，如果您还没有意识到，您应该知道 和 之间的区别在于`T <: U`，`T <% U`前者仅包括名义子类型关系（实际继承），后者还包括应用隐式转换产生符合类型的值边界。

因此，如果您想使用`Node <% Ordered[Node]`并且没有在类中定义方法，则*每次需要进行比较时*`compare`都会应用隐式转换。此外，如果您的类型*有*自己的，则永远不会应用隐式转换，并且您将被“内置”排序所困扰。**`compare`**

 ****附录**

我将给出一些基于类的示例，称之为`CIString`简单地封装 a`String`并将排序实现为大小写不变的类。

```
/* Here's how it would be with direct implementation of `Ordered` */

class   CIString1(val s: String)
extends Ordered[CIString1]
{
  private val lowerS = s.toLowerCase

  def compare(other: CIString1) = lowerS.compareTo(other.lowerS)
}

/* An uninteresting, empty ordered set of CIString1
    (fails without the `extends` clause) */
val os1 = TreeSet[CIString1]()

/* Here's how it would look with ordering external to `CIString2`
    using an implicit conversion to `Ordered` */

class CIString2(val s: String) {
  val lowerS = s.toLowerCase
}

class CIString2O(ciS: CIString2)
extends Ordered[CIString2]
{
  def compare(other: CIString2) = ciS.lowerS.compareTo(other.lowerS)
}

implicit def cis2ciso(ciS: CIString2) = new CIString2O(ciS)

/* An uninteresting, empty ordered set of CIString2
    (fails without the implicit conversion) */
val os2 = TreeSet[CIString2]()

/* Here's how it would look with ordering external to `CIString3`
    using an `Ordering` */

class CIString3(val s: String) {
  val lowerS = s.toLowerCase
}

/* The implicit object could be replaced by
    a class and an implicit val of that class */
implicit
object  CIString3Ordering
extends Ordering[CIString3]
{
  def compare(a: CIString3, b: CIString3): Int = a.lowerS.compareTo(b.lowerS)
}

/* An uninteresting, empty ordered set of CIString3
    (fails without the implicit object) */
val os3 = TreeSet[CIString3]() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:58:01.093

好吧，一个可能的问题是您的`Ordered[Node]` *不是*`Node`：

```
implicit def orderedNode(node: Node): Ordered[Node] = new Ordered[Node] {
  def compare(other: Node) = node.compare(other)
} 
```

我会尝试使用一个`Ordering[Node]`代替，您说您尝试过，但没有更多信息。`PQ`将被声明为`PQ[T : Ordering]`.**

# javascript - 如何在 Rails 中使用 gmap

> ID：14846184
> 
> 赞同：1
> 
> 时间：2013-02-13T04:01:44.807
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, google-maps

我正在尝试使用此链接[http://rjshade.com/projects/gmaps-autocomplete/中的代码来实现地图](http://rjshade.com/projects/gmaps-autocomplete/)

我可以实现文本框，我确实看到了城市名称，但我根本看不到地图，它只是空白，我正在使用 rails，但我正在实现代码在 rails 系统中有简单的 html，但仍然可以'不让它运行

这是我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require jquery-fileupload
//= require bootstrap
//= require_tree . 
```

这里我的 gmaps.js 与提供的相同

```
var geocoder;
var map;
var marker;

// initialise the google maps objects, and add listeners
function gmaps_init(){

  // center of the universe
  var latlng = new google.maps.LatLng(51.751724,-1.255284);

  var options = {
    zoom: 2,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  // create our map object
  map = new google.maps.Map(document.getElementById("gmaps-canvas"), options);

  // the geocoder object allows us to do latlng lookup based on address
  geocoder = new google.maps.Geocoder();

  // the marker shows us the position of the latest address
  marker = new google.maps.Marker({
    map: map,
    draggable: true
  });

  // event triggered when marker is dragged and dropped
  google.maps.event.addListener(marker, 'dragend', function() {
    geocode_lookup( 'latLng', marker.getPosition() );
  });

  // event triggered when map is clicked
  google.maps.event.addListener(map, 'click', function(event) {
    marker.setPosition(event.latLng)
    geocode_lookup( 'latLng', event.latLng  );
  });

  $('#gmaps-error').hide();
}

// move the marker to a new position, and center the map on it
function update_map( geometry ) {
  map.fitBounds( geometry.viewport )
  marker.setPosition( geometry.location )
}

// fill in the UI elements with new position data
function update_ui( address, latLng ) {
  $('#gmaps-input-address').autocomplete("close");
  $('#gmaps-input-address').val(address);
  //$('#gmaps-output-latitude').html(latLng.lat());
  //$('#gmaps-output-longitude').html(latLng.lng());
}

// Query the Google geocode object
//
// type: 'address' for search by address
//       'latLng'  for search by latLng (reverse lookup)
//
// value: search query
//
// update: should we update the map (center map and position marker)?
function geocode_lookup( type, value, update ) {
  // default value: update = false
  update = typeof update !== 'undefined' ? update : false;

  request = {};
  request[type] = value;

  geocoder.geocode(request, function(results, status) {
    $('#gmaps-error').html('');
    $('#gmaps-error').hide();
    if (status == google.maps.GeocoderStatus.OK) {
      // Google geocoding has succeeded!
      if (results[0]) {
        // Always update the UI elements with new location data
        update_ui( results[0].formatted_address,
                   results[0].geometry.location )

        // Only update the map (position marker and center map) if requested
        if( update ) { update_map( results[0].geometry ) }
      } else {
        // Geocoder status ok but no results!?
        $('#gmaps-error').html("Sorry, something went wrong. Try again!");
        $('#gmaps-error').show();
      }
    } else {
      // Google Geocoding has failed. Two common reasons:
      //   * Address not recognised (e.g. search for 'zxxzcxczxcx')
      //   * Location doesn't map to address (e.g. click in middle of Atlantic)

      if( type == 'address' ) {
        // User has typed in an address which we can't geocode to a location
        $('#gmaps-error').html("Sorry! We couldn't find " + value + ". Try a different search term, or click the map." );
        $('#gmaps-error').show();
      } else {
        // User has clicked or dragged marker to somewhere that Google can't do a reverse lookup for
        // In this case we display a warning, clear the address box, but fill in LatLng
        $('#gmaps-error').html("Woah... that's pretty remote! You're going to have to manually enter a place name." );
        $('#gmaps-error').show();
        update_ui('', value)
      }
    };
  });
};

// initialise the jqueryUI autocomplete element
function autocomplete_init() {
  $("#gmaps-input-address").autocomplete({

    // source is the list of input options shown in the autocomplete dropdown.
    // see documentation: http://jqueryui.com/demos/autocomplete/
    source: function(request,response) {

      // the geocode method takes an address or LatLng to search for
      // and a callback function which should process the results into
      // a format accepted by jqueryUI autocomplete
      geocoder.geocode( {'address': request.term }, function(results, status) {
        response($.map(results, function(item) {
          return {
            label: item.formatted_address, // appears in dropdown box
            value: item.formatted_address, // inserted into input element when selected
            geocode: item                  // all geocode data: used in select callback event
          }
        }));
      })
    },

    // event triggered when drop-down option selected
    select: function(event,ui){
      update_ui(  ui.item.value, ui.item.geocode.geometry.location )
      update_map( ui.item.geocode.geometry )
    }
  });

  // triggered when user presses a key in the address box
  $("#gmaps-input-address").bind('keydown', function(event) {
    if(event.keyCode == 13) {
      geocode_lookup( 'address', $('#gmaps-input-address').val(), true );

      // ensures dropdown disappears when enter is pressed
      $('#gmaps-input-address').autocomplete("disable")
    } else {
      // re-enable if previously disabled above
      $('#gmaps-input-address').autocomplete("enable")
    }
  });
}; // autocomplete_init

$(document).ready(function() { 
  if( $('#gmaps-canvas').length  ) {
    gmaps_init();
    autocomplete_init();
  }; 
}); 
```

索引.html.erb

```
<div class='gmaps'>
  <div class='input-gmaps-autocomplete'>
    <input id='gmaps-input-address'placeholder='Start typing a place name...' type='text' />

    <div id='gmaps-error'></div>
  </div>

  <div id='gmaps-canvas'></div>
</div> 
```

布局负责人

```
<head>
  <title><%= full_title(yield(:title)) %></title>
  <<%= full_meta_description(yield(:meta_description)) %> />
  <<%= full_meta_keyword(yield(:meta_keyword)) %>  />
  <<%= full_meta_author(yield(:meta_author)) %> />
  <%= stylesheet_link_tag    "application", :media => "all" %>\
  <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key={sensorize}&sensor=true">
  </script>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %>  
</head> 
```

我做错了什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T04:05:14.667

最简单、更灵活的方法是使用[geocoder](http://www.rubygeocoder.com/) for rails。

查看此[railscasts](http://railscasts.com/episodes/273-geocoder?view=comments)了解更多详情

# java - 使用 ModelDriven 时出现 NullPointerException 错误

> ID：14846185
> 
> 赞同：1
> 
> 时间：2013-02-13T04:01:53.080
> 
> 标签：java, jsp, struts2, model-driven

我有两个课程如下

```
Address
  int ID
  int unit
  String street 

User 
    int ID 
    String Name
    Address address 
```

我的用户类

```
public class user{
    .....
    private Address address;
     ...getters setters...
} 
```

如上所示，User 类中有一个 Address 类的对象。我的代码预计会接收表单的值并在控制台上显示它们。

但是当我尝试访问地址类的单元属性时，它会显示以下错误。

“严重：处理请求期间发生异常：null java.lang.NullPointerException”

我的控制器

```
@Action
class myclass implements ModelDriven{

   private User user = new User();

   public Register(){
       System.out.println("User's Unit" + user.getAddress().getUnit()); // error is on this line
   }
     @Override
    public Object getModel() {
       return user;
    } 
```

.jsp 文件

```
<s:form action="Register">
             <s:textfield name="name" label="Name"/>
             <s:textfield name="unit" label="Unit"/>
             <s:textfield name="block" label="Block"/>
</s:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:38:46.423

试试这个动作课，这肯定会奏效

```
public class myclass extends ActionSupport implements ModelDriven<User>, Preparable{

    private User user = new User();

@Override
public void prepare() throws Exception {
    user=new User();
}

@Override
public User getModel() {
    return user;
}
public Register(){
   System.out.println("User's Unit" + user.getAddress().getUnit()); 
   }
} 
```

并更改jsp

```
<s:textfield name="address.unit" label="Unit"/> 
```

仅用于设置单位属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T04:35:59.373

做以下伴侣

```
<s:textfield name="address.unit" label="Unit"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:17:16.407

```
 <s:textfield name="name" label="Name"/> 
```

这里 struts2 将 在您各自的操作中搜索相关 DTO 中的**name="name"属性，但 value-stack 将无法在您的操作中找到名为****“name”**的属性，因为您创建了一个不同的 bean 类 Address 它具有成员名字”。因此，您必须告诉您的表单元素**“名称”**实例驻留在不同的 POJO 中，即**Adderess**。所以做这样的改变：

```
<s:textfield name="address.name" label="name"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T04:32:36.630

我看到的问题是，你没有`new`反对`address`

`address = new Address();`在`User`类的构造函数中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T04:34:47.710

看起来当您使用“private User user = new User()”创建用户对象时，用户的地址对象未初始化。由于 user.getAddress() 为空，当您尝试调用 user.getAddress().getUnit() 时，将导致空指针异常

# msbuild - 在“BeforeBuild”目标之前捕获的程序集版本

> ID：14846207
> 
> 赞同：3
> 
> 时间：2013-02-13T04:04:51.183
> 
> 标签：msbuild, msbuild-task, msbuildcommunitytasks

我正在使用 MSBuild.Community.Tasks 来帮助完成两件事，即调整版本和压缩文件。我没有结婚，所以如果它产生了我正在寻找的东西，欢迎使用另一种方法。目标是在构建之前增加内部版本号，然后在构建之后压缩一个新的 DLL（带有几个其他文件）。ZIP 文件应根据构建命名。

我快到*了*，但是，我的 DLL 中的版本号总是比我的 version.txt 文件落后一步（从版本任务自动生成）。这是我在`BeforeBuild`目标中的内容：

```
 <Target Name="BeforeBuild" BeforeTargets="PrepareForBuild">
    <Message Text=" --=== Before Build ===--"></Message>
    <ItemGroup>
      <PreviousFiles Include="$(MSBuildProjectDirectory)\BuildPackage\$(AssemblyName).*.zip">
        <InProject>false</InProject>
      </PreviousFiles>
    </ItemGroup>
    <Delete Files="@(PreviousFiles)"></Delete>
    <Delete Files="$(MSBuildProjectDirectory)\BuildPackage\$(AssemblyName).dll"></Delete>
    <Version VersionFile="version.txt" RevisionType="Increment">
      <Output TaskParameter="Major" PropertyName="Major" />
      <Output TaskParameter="Minor" PropertyName="Minor" />
      <Output TaskParameter="Build" PropertyName="Build" />
      <Output TaskParameter="Revision" PropertyName="Revision" />
    </Version>
  </Target> 
```

这会删除以前版本中的所有文件，然后正确递增 version.txt 文件。

接下来，在我的`AfterBuild`目标中，我把它放在一起：

```
 <Target Name="AfterBuild" AfterTargets="Build">
    <Message Text=" --=== After Build ==--"></Message>
    <AssemblyInfo CodeLanguage="CS" OutputFile="AssemblyVersion.cs" AssemblyVersion="$(Major).$(Minor).$(Build).$(Revision)" AssemblyFileVersion="$(Major).$(Minor).$(Build).$(Revision)" />
    <ItemGroup>
      <ProjectOutputFiles Include="bin\$(AssemblyName).dll">
        <InProject>false</InProject>
      </ProjectOutputFiles>
      <ZipFiles Include="$(MSBuildProjectDirectory)\BuildPackage\*.*" Exclude="$(MSBuildProjectDirectory)\BuildPackage\*.zip">
        <InProject>false</InProject>
      </ZipFiles>
    </ItemGroup>
    <Copy SourceFiles="@(ProjectOutputFiles)" DestinationFolder="$(MSBuildProjectDirectory)\StorePackage" />
    <Zip Files="@(ZipFiles)" WorkingDirectory="$(MSBuildProjectDirectory)\BuildPackage" ZipFileName="$(MSBuildProjectDirectory)\BuildPackage\$(AssemblyName).$(Major)-$(Minor)-$(Build)-$(Revision).zip" ZipLevel="9" />
  </Target> 
```

基本上，我正在更新`AssemblyInfo.cs`和指定一些文件组。然后我将项目输出复制过来，最后压缩所需的文件。

这一切都很好，除了我的 DLL 版本总是比我的*实际*修订号晚 1 个修订号 - 即，存储在 version.txt 中的内容以及保存的 .ZIP 文件的名称。

我在这里遗漏了一些明显的东西吗？这就像在构建过程开始之前捕获版本一样。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:04:51.183

*天哪*，是的，我遗漏了一些明显的东西。一旦我在发布之前重新阅读了这个问题，就很清楚我做错了什么。我什至把它拼出来了。

解决方法是将`AssemblyInfo`任务上移到 BeforeBuild 目标。这是输出 .cs 文件的任务，该文件包含将正确的版本控制信息注入 DLL 所需的属性。在构建完成之后才更新这个文件意味着我的 DLL 将永远失去竞争。

无论如何，我将继续发布此内容，以防其他人遇到类似情况。

干杯。

* * *

**编辑** 为了它的价值，这些目标的*最终*版本需要将 ZIP 操作移到一个单独的目标（我称之为 ZipProjectOutput），因为我无法解决竞争条件：DLL 从未出现在 ZIP 文件中，我认为操作系统释放文件锁定的时间或其他原因可能是罪魁祸首。

我使用`AfterTargets="AfterBuild"`ZipProjectOutput 目标在另一个完成时执行。我对此并不完全满意，因为我不确定我只是在这里“赢得”比赛，而不是解决问题，但这现在对我来说相当有效。#WFM

# ant - 删除通过 zipfileset 指定的文件？

> ID：14846209
> 
> 赞同：0
> 
> 时间：2013-02-13T04:05:02.527
> 
> 标签：ant

我有以下 Ant 目标，它从特定的 .ZIP 存档中提取内容：

```
<!-- UNPACK-MATH -->
<target name="unpack-math" depends="init-contrib">
  <!-- NOTE: the 'unzip' task doesn't fail when it cannot extract over read-only files; however, 'copy' with a 'zipfileset' does. -->
  <first id="math.archive">
    <fileset dir="${builddir}" includes="MATH_MF*.zip" />
  </first>
  <if>
    <length string="${toString:math.archive}" when="greater" length="0" />
    <then>
      <copy todir="${basedir}">
        <zipfileset src="${toString:math.archive}" />
      </copy>
    </then>
    <else>
      <echo message="No math to unpack." />
    </else>
  </if>
</target> 
```

我现在想做的是“清理”提取的文件。但是，以下方法不起作用：

```
<!-- CLEAN-MATH -->
<target name="clean-math" depends="init-contrib">
  <first id="math.archive">
    <fileset dir="${builddir}" includes="MATH_MF*.zip" />
  </first>
  <if>
    <length string="${toString:math.archive}" when="greater" length="0" />
    <then>
      <delete>
        <zipfileset src="${toString:math.archive}" />
      </delete>
    </then>
    <else>
      <echo message="No math to clean." />
    </else>
  </if>
</target> 
```

我得到以下堆栈跟踪：

```
BUILD FAILED
D:\Development\MForce\Games\gamebuild.xml:214: java.lang.ClassCastException: class org.apache.tools.ant.types.resources.ZipResource doesn't provide files
        at org.apache.tools.ant.types.resources.comparators.FileSystem.resourceCompare(FileSystem.java:43)
... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:48:10.927

此解决方案似乎有效，但需要先解压缩 .ZIP 存档（其中列出了您要作为其他根目录删除的文件），我希望避免这种情况：

```
<!-- CLEAN-MATH -->
<target name="clean-math" depends="init-contrib">
  <first id="math.archive">
    <fileset dir="${builddir}" includes="MATH_MF*.zip" />
  </first>
  <if>
    <length string="${toString:math.archive}" when="greater" length="0" />
    <then>
      <unzip dest="${builddir}/tmp" src="${toString:math.archive}"/>
       <delete>
        <fileset dir="${basedir}" includes="**/*">
          <present present="both" targetdir="${builddir}/tmp"/>
        </fileset>
      </delete>
      <delete dir="${builddir}/tmp"/>
    </then>
    <else>
      <echo message="No math to clean." />
    </else>
  </if>
</target> 
```

# android - Dagger 和对提供的类的依赖

> ID：14846214
> 
> 赞同：1
> 
> 时间：2013-02-13T04:05:35.933
> 
> 标签：android, dependency-injection, dagger

我正在“Daggering”我的 Android 应用程序，我面临一个小问题，我不知道是我还是框架的错。如果是我，我会对自己感到非常失望:)

我有以下课程要提供：

```
@Singleton
public class XmlService {

    private final DataCommitter<XmlWritable> mXmlCommitter;
    private final DataReader<XmlPushable> mXmlReader;
    private final ConcurrentObjectMonitor mConcObjMonitor;

   @Inject
   public XmlService(DataCommitter<XmlWritable> xmlCommitter,
        DataReader<XmlPushable> xmlProvider,
        ConcurrentObjectMonitor concObjMonitor) {
    mXmlCommitter = xmlCommitter;
    mXmlReader = xmlProvider;
    mConcObjMonitor = concObjMonitor;
   } 
```

使用以下（除其他外）类：

```
public class XmlDataReader implements DataReader<XmlPushable> {
  // No Singleton no more.
  // Eager Singleton (Therefore it should be made thread safe)
  //static XmlDataReader mInstance = new XmlDataReader();
  [CUT]

  protected XmlPullParser mXmlPullParser;

  @Inject
  public void XmlDataRead(XmlPullParser xmlPullParser) {
      mXmlPullParser = xmlPullParser;
  } 
```

这个类在我的 XmlServiceModule 中是这样引用的：

```
@Module(complete = true)
public class XmlServiceModule {

    @Provides DataReader<XmlPushable> provideDataReader(XmlDataReader dataReader) {
        return dataReader;
    }
} 
```

现在，问题是，注入提供的类是否合法？因为我在 XmlDataReader ctor 上的 @Inject 出现错误：无法注入 public void XmlDataRead(org.xmlpull.v1.XmlPullParser)。

* * *

编辑：对不起，伙计们，我的示例代码中有一个错误，但我会保持原样，因为它对于理解下面 Christian 的回答很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:23:02.940

实际上，您的示例代码中有一个错误。您没有可注入的构造函数 - 您不能注入实例方法，只能注入构造函数，并且永远不会调用该方法。

你应该有：

```
public class XmlDataReader implements DataReader<XmlPushable> {

  protected final XmlPullParser mXmlPullParser;

  @Inject
  public XmlDataReader(XmlPullParser xmlPullParser) {
      mXmlPullParser = xmlPullParser;
  }
} 
```

这样它就是一个构造函数，并且会被正确注入。

至于整体方法，您的方向是正确的。您，并在您的提供方法中`@Provide` `DataReader<XmlPushable`有效地绑定到它。`XmlDataReader`到现在为止还挺好。Dagger 在被要求时`DataReader<XmlPushable>`将使用该绑定，并将有效地传递依赖项并提供`XmlDataReader`来满足这一点。

`XmlDataReader`有一个带`@Inject`注释的构造函数，因此 Dagger 的分析会将其视为“可注入类型”，因此您不需要`@Provides`提供它。只要您有一个`XmlPullParser`具有带`@Inject`注释的构造函数或在`@Provides`模块上的方法中提供的，您在此处编码的内容似乎不错，但还不够完整。

您的@Module 中没有列出任何入口点，并且您***必须***有一个类，该类将是您从 ObjectGraph 获得的第一件事。所以这段代码是合理的，但不完整。您需要注入的东西（通过字段或构造函数）`DataReader<XmlPushable>` 例如，您可能会做一个`FooActivity`which 来执行此操作。

考虑：

```
public class XmlDataReader implements DataReader<XmlPushable> {    
  protected XmlPullParser mXmlPullParser;

  @Inject public XmlDataReader(XmlPullParser xmlPullParser) {
    mXmlPullParser = xmlPullParser;
  }
}

@Module(entryPoints = { FooActivity.class, BarActivity.class })
public class XmlServiceModule {
  @Provides DataReader<XmlPushable> provideDataReader(XmlDataReader dataReader) {
    return dataReader;
  }

  @Singleton
  @Provides XmlPullParserFactory parserFactory() {
     XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
     factory.setNamespaceAware(true);
     return factory;
  }

  @Provides XmlPullParser parser(XmlPullParserFactory factory) {
     XmlPullParser xpp = factory.newPullParser();
  }
}

public class YourApp extends Application {
  private ObjectGraph graph;

  @Override public void onCreate() {
    super.onCreate();
    graph = ObjectGraph.get(new ExampleModule(this));
  }

  public ObjectGraph graph() {
    return objectGraph;
  }
}

public abstract class BaseActivity extends Activity {
  @Override protected void onCreate(Bundle state) {
    super.onCreate(state);
    ((YourApp) getApplication()).objectGraph().inject(this);
  }
}

class FooActivity extends BaseActivity {
  @Inject DataReader<XmlPushable> reader;

  @Override public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    // custom Foo setup
  }
}

class BarActivity extends BaseActivity {
  @Inject DataReader<XmlPushable> reader;

  @Override public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    // custom Bar setup
  }
} 
```

这可能接近您想要的。所有东西都可以从一个入口点到达，你所依赖的所有东西都是绑定的。这两个活动是您的“入口点”（对象图中的根）。当它们被初始化时，它们最终会调用自己的`ObjectGraph`'`inject(Object)`方法，这会导致 Dagger 注入任何带`@Inject`注释的字段。这些字段是`DataReader<XmlPushable>`由 XmlDataReader 满足的字段，它由 XmlPullParser 提供，而 XmlPullParser 是通过使用 XmlPullParser 提供的。这一切都沿着依赖链向下流动。

小注 -`@Module(complete=true)`是默认值。您不需要指定完整，除非它不完整并且您指定`false`

# android - Android 需要一个带引号的字符串

> ID：14846215
> 
> 赞同：1
> 
> 时间：2013-02-13T04:05:37.710
> 
> 标签：android, web-services, ksoap2

我正在做android应用程序。我正在使用 ksoap2 来调用我的网络服务。当我调用 web 服务时，它会引发以下异常。有人可以帮我解决这个问题吗？ **需要一个带引号的字符串（位置：DOCDECL @1:50 in java.io.InputStreamReader@4111baf8）**

日志：

```
02-13 03:41:56.621 I/ActivityManager(  160): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.user.stub/.WelcomeMessage} from pid 322
02-13 03:41:56.671 D/ViewRootImpl(  160): pckname = com.user.stub
02-13 03:41:56.681 I/stub( 5367): WM - onCreate starts
02-13 03:41:56.731 D/OpenGLRenderer(  322): Flushing caches (mode 1)
02-13 03:41:56.781 D/OpenGLRenderer(  322): Flushing caches (mode 0)
02-13 03:41:56.831 I/stub( 5367): WM - pack exist check
02-13 03:41:57.031 I/stub( 5367): WM - onCreate ends
02-13 03:41:57.031 D/ViewRootImpl( 5367): pckname = com.user.stub
02-13 03:41:57.101 W/InputManagerService(  160): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4121beb8 (uid=10026 pid=322)
02-13 03:41:57.141 I/ActivityManager(  160): Displayed com.user.stub/.WelcomeMessage: +469ms
02-13 03:41:58.451 I/stub( 5367): WM - onClick start
02-13 03:41:58.461 I/ActivityManager(  160): START {cmp=com.user.stub/.stub} from pid 5367
02-13 03:41:58.621 D/dalvikvm(  160): GC_EXPLICIT freed 521K, 23% free 10623K/13703K, paused 4ms+9ms
02-13 03:41:58.641 I/stub( 5367): IMS - onCreate start
02-13 03:41:58.681 I/stub( 5367): IMS - onCreate ends
02-13 03:41:58.681 D/ViewRootImpl( 5367): pckname = com.user.stub
02-13 03:41:58.821 I/ActivityManager(  160): Displayed com.user.stub/.stub: +315ms
02-13 03:42:21.561 D/audio_hw_primary(   85): start_output_stream: card:0, port:0, rate:44100
02-13 03:42:21.691 D/dalvikvm(  288): GC_CONCURRENT freed 394K, 15% free 8064K/9479K, paused 4ms+4ms
02-13 03:42:24.581 I/stub( 5367): IMS - onProceed starts
02-13 03:42:24.581 I/stub( 5367): WM - getDyn starts
02-13 03:42:25.001 D/dalvikvm( 5367): GC_CONCURRENT freed 421K, 7% free 7106K/7623K, paused 2ms+9ms
02-13 03:42:25.401 I/stub( 5367): WM - getDyn ends
02-13 03:42:25.401 I/stub( 5367): WM - uniqueId start
02-13 03:42:25.411 E/BluetoothAdapter( 5367): this device does not have Bluetooth support
02-13 03:42:25.411 I/stub( 5367): WM - uniqueId ends
02-13 03:42:25.411 I/stub( 5367): IMS - onProceed before call
02-13 03:42:25.711 E/stub( 5367): Expected a quoted string (position:DOCDECL @1:50 in java.io.InputStreamReader@4111baf8) 
02-13 03:42:25.741 D/ViewRootImpl( 5367): pckname = com.user.stub
02-13 03:42:27.471 W/IInputConnectionWrapper( 5367): showStatusIcon on inactive InputConnection
02-13 03:42:27.471 W/InputManagerService(  160): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@412aaef8 (uid=10050 pid=5367)
02-13 03:42:27.691 D/dalvikvm(  322): GC_CONCURRENT freed 2849K, 40% free 8774K/14407K, paused 2ms+11ms
02-13 03:42:27.831 D/dalvikvm(  322): GC_FOR_ALLOC freed 45K, 40% free 8774K/14407K, paused 120ms
02-13 03:42:27.841 I/dalvikvm-heap(  322): Grow heap (frag case) to 9.862MB for 1286224-byte allocation
02-13 03:42:28.041 D/dalvikvm(  322): GC_FOR_ALLOC freed 403K, 34% free 9627K/14407K, paused 142ms
02-13 03:42:28.321 D/dalvikvm(  322): GC_FOR_ALLOC freed 1324K, 42% free 8455K/14407K, paused 64ms
02-13 03:42:28.321 I/dalvikvm-heap(  322): Grow heap (frag case) to 9.550MB for 1286224-byte allocation
02-13 03:42:28.401 D/dalvikvm(  322): GC_FOR_ALLOC freed 2K, 33% free 9709K/14407K, paused 60ms
02-13 03:42:28.501 D/dalvikvm(  322): GC_CONCURRENT freed 22K, 33% free 9712K/14407K, paused 3ms+24ms
02-13 03:42:28.681 D/dalvikvm(  322): GC_CONCURRENT freed 1714K, 38% free 9047K/14407K, paused 2ms+5ms
02-13 03:42:29.711 I/ActivityManager(  160): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=ukzzang.android.app.logviewer/.act.MainAct} from pid 322
02-13 03:42:29.861 D/OpenGLRenderer(  322): Flushing caches (mode 0)
02-13 03:42:29.931 W/InputManagerService(  160): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4121beb8 (uid=10026 pid=322)
02-13 03:42:32.551 D/OpenGLRenderer(  322): Flushing caches (mode 1)
02-13 03:42:38.871 I/ActivityManager(  160): Start proc com.google.android.gm for service com.google.android.gm/.provider.MailIndexerService: pid=5497 uid=10018 gids={3003, 1015, 1023}
02-13 03:42:39.101 I/ActivityThread( 5497): Pub gmail-ls: com.google.android.gm.provider.MailProvider
02-13 03:42:39.131 I/ActivityThread( 5497): Pub com.google.android.gmail.SuggestionProvider: com.google.android.gm.SuggestionsProvider
02-13 03:42:39.131 I/ActivityThread( 5497): Pub com.google.android.gm: com.google.android.gm.provider.PublicContentProvider
02-13 03:42:39.291 W/Gmail   ( 5497): No MailEngine for account: lance.pruitt.ibss@gmail.com
02-13 03:42:50.661 D/dalvikvm(  224): GC_CONCURRENT freed 439K, 33% free 8158K/12039K, paused 4ms+14ms
02-13 03:43:29.691 D/audio_hw_primary(   85): start_output_stream: card:0, port:0, rate:44100
02-13 03:43:33.931 W/InputManagerService(  160): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4141fde0
02-13 03:43:36.031 D/audio_hw_primary(   85): start_output_stream: card:0, port:0, rate:44100
02-13 03:43:36.071 W/InputManagerService(  160): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41381330 
```

# android - 未能执行目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.5.0:deploy ... InstallException: TimeoutException

> ID：14846219
> 
> 赞同：2
> 
> 时间：2013-02-13T04:06:09.127
> 
> 标签：android, exception, maven

我一直在尝试将我的 Android 项目转换为 maven，并且在遇到一些问题后我正在努力部署。我可以清理和安装，但是在部署时出现错误：

```
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.5.0:deploy (default-cli) on project mega: Uninstall of org.jointsecurityarea.android.mega failed. InstallException: TimeoutException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.5.0:deploy (default-cli) on project mega: Uninstall of org.jointsecurityarea.android.mega failed.
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Uninstall of org.jointsecurityarea.android.mega failed.
at com.jayway.maven.plugins.android.AbstractAndroidMojo$2.doWithDevice(AbstractAndroidMojo.java:806)
at com.jayway.maven.plugins.android.AbstractAndroidMojo.doWithDevices(AbstractAndroidMojo.java:715)
at com.jayway.maven.plugins.android.AbstractAndroidMojo.undeployApk(AbstractAndroidMojo.java:792)
at com.jayway.maven.plugins.android.AbstractAndroidMojo.undeployApk(AbstractAndroidMojo.java:776)
at com.jayway.maven.plugins.android.AbstractAndroidMojo.deployApk(AbstractAndroidMojo.java:600)
at com.jayway.maven.plugins.android.AbstractAndroidMojo.deployBuiltApk(AbstractAndroidMojo.java:670)
at com.jayway.maven.plugins.android.standalonemojos.DeployMojo.execute(DeployMojo.java:57)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
... 19 more
Caused by: com.android.ddmlib.InstallException
at com.android.ddmlib.Device.uninstallPackage(Device.java:687)
at com.jayway.maven.plugins.android.AbstractAndroidMojo$2.doWithDevice(AbstractAndroidMojo.java:798)
... 27 more
Caused by: com.android.ddmlib.TimeoutException
at com.android.ddmlib.AdbHelper.read(AdbHelper.java:648)
at com.android.ddmlib.AdbHelper.read(AdbHelper.java:616)
at com.android.ddmlib.AdbHelper.readAdbResponse(AdbHelper.java:216)
at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:378)
at com.android.ddmlib.Device.executeShellCommand(Device.java:372)
at com.android.ddmlib.Device.uninstallPackage(Device.java:684)
... 28 more 
```

我试图从命令行运行它，而不是使用 m2e 插件。另外，这是我的 pom.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.jointsecurityarea</groupId>
<artifactId>mega</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>apk</packaging>
<name>Mega</name>

<properties>
    <platform.version>4.0.1.2</platform.version>
</properties>

<build>
    <directory>target</directory>
    <outputDirectory>target/classes</outputDirectory>
    <finalName>${project.artifactId}-${project.version}</finalName>
    <testOutputDirectory>target/test-classes</testOutputDirectory>
    <sourceDirectory>src/main/java</sourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>src/test/resources</directory>
        </testResource>
    </testResources>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.5.0</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>17</platform>
                    <path>C:\Android\adt-bundle-windows-x86_64\sdk</path>
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
                <device>usb</device>
            </configuration>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <groupId>org.eclipse.m2e</groupId>
            <artifactId>lifecycle-mapping</artifactId>
            <version>1.0.0</version>
            <configuration>
                <lifecycleMappingMetadata>
                    <pluginExecutions>
                        <pluginExecution>
                            <pluginExecutionFilter>
                                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                                <artifactId>android-maven-plugin</artifactId>
                                <versionRange>[3.2.0,)</versionRange>
                                <goals>
                                    <goal>manifest-update</goal>
                                </goals>
                            </pluginExecutionFilter>
                            <action>
                                <execute />
                            </action>
                        </pluginExecution>
                    </pluginExecutions>
                </lifecycleMappingMetadata>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.1.1.4</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>commons-codec</groupId>
        <artifactId>commons-codec</artifactId>
        <version>1.7</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>fluent-hc</artifactId>
        <version>4.2.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.2.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient-cache</artifactId>
        <version>4.2.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpcore</artifactId>
        <version>4.2.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpmime</artifactId>
        <version>4.2.3</version>
    </dependency>
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20090211</version>
    </dependency>
</dependencies> 
```

我是 Maven 的新手。提前感谢您的帮助。

# mp3 - mediaelement.js 不在 Opera 中播放 MP3

> ID：14846220
> 
> 赞同：0
> 
> 时间：2013-02-13T04:06:41.183
> 
> 标签：mp3, opera, html5-audio, mediaelement.js

使用 mediaelement.js (mediaelementplayer-audio.html) 提供的示例，我无法在 Opera 中播放 MP3 文件。如果我将 Opera 导航到[http://www.mediaelementjs.com](http://www.mediaelementjs.com) ，它会起作用，但如果我尝试从本地主机访问文件，它就不会播放。控件正确呈现，但似乎没有加载。我在 Windows XP 上运行 Opera 12.14 我已经测试过 Chrome 24、Firefox 18、IE8（Flash 回退）和 Safari 5.1.7，只有 Opera 给我一个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:19:43.550

简短的回答：这不适用于 IIS 5.1，适用于 Apache 或 IIS 7。

长答案：查看 Opera 中的开发人员工具后，我发现 MP3 正在从服务器部分接收。然后我记得 IIS 5.1（这是我使用的 Web 服务器）不能正确支持这一点。然后我比较了来自 www.mediaelementjs.com 的 HTTP 响应标头，它说它使用的是 Apache。我在网上阅读到范围请求在 IIS 7 下工作。所以我将我的 Web 应用程序移到了 Windows 7 机器上，果然，它工作了。我必须记住明确定义我的 MIME 类型，但现在一切正常。

# java - 如何限制获取数据库中的行

> ID：14846221
> 
> 赞同：-2
> 
> 时间：2013-02-13T04:07:07.867
> 
> 标签：java, android, sqlite

我有一个这样的查询：

```
 Cursor _cursor = mbd.query(SQLITE_TABLE, new String[] {KEY_ROWID,
            KEY_SYLLABICATION, KEY_WORD, KEY_PARTOFSPEECH, KEY_MEANING, KEY_SPEAKWORD},
            null, null, null, null, null, null); 
```

我只是想限制从数据库中获取的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:10:18.513

根据[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)，您将该`LIMIT`子句作为第八个参数传递给`query`：

```
Cursor _cursor = mdb.query(SQLITE_TABLE,
                           new String[] { KEY_ROWID, KEY_SYLLABICATION,
                                          KEY_WORD, KEY_PARTOFSPEECH,
                                          KEY_MEANING, KEY_SPEAKWORD },
                           null, null, null, null, null,
                           "10"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:10:58.063

尝试这个

```
cursor = resolver.query(STORAGE_URI, projection,
                        Media.BUCKET_DISPLAY_NAME + "=?",
                        new String[] { folderName },
                        " _id asc limit " + num); 
```

或试试这个

```
final String orderBy = Constants.TABLE_CONVERSATION_FIELD_DATE + " DESC";
final String limit= 10;

return db.query(table, columns, selection, selectionArgs, groupBy, having, orderBy, limit); 
```

# c# - 我想添加一个带有文本框的搜索按钮和一个下拉菜单，用于使用 C# 在我的 Windows 应用程序中显示结果

> ID：14846222
> 
> 赞同：-1
> 
> 时间：2013-02-13T04:07:14.740
> 
> 标签：c#, winforms

当在文本框中输入文本并按下搜索按钮时，我应该在下拉框中获得搜索结果。搜索按钮应该从网页 URL 中获取结果，例如[http://in.finance.yahoo.com/actives?e=bo](http://in.finance.yahoo.com/actives?e=bo) ，并且那些匹配的结果应该显示在下拉列表中。任何人都可以帮助我了解它背后的逻辑以及应该使用哪些资源。我是开发和 C# 的初学者。提前致谢。我希望我在我的搜索框中和我的问题中得到最好的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:15:27.733

你没有完全解释你的目标，但是如果你想在你的 URL 网格视图中搜索，你可以这样做：我根据网格视图中的名称进行搜索：你可以简单地使用网络浏览器来搜索他：

```
 private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            btnsearch.Enabled = true;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            webBrowser1.Navigate("http://in.finance.yahoo.com/actives?e=bo");
        }

        private void btnsearch_Click(object sender, EventArgs e)
        {
            foreach (HtmlElement item in webBrowser1.Document.GetElementsByTagName("td"))
            {
                if (item.GetAttribute("className").Equals("second name"))
                {
                    if (item.InnerText.Contains( txtsearch.Text))
                    {
                        lstresult.Items.Add(item.InnerText);
                    }
                }
            }
        } 
```

使用这行代码，您可以根据名称搜索并在列表框中显示结果

# drupal - Drupal - 只在首页保持注销

> ID：14846223
> 
> 赞同：1
> 
> 时间：2013-02-13T04:07:19.737
> 
> 标签：drupal, login

Drupal 7.19
Acquia 托管
使用 Yottaa 进行优化和监控

问题：尝试从家里登录时，我们遇到了一些奇怪的事情：我们只在首页上不断“退出”。当您单击站点内的任意位置时，我们会返回管理工具栏和上下文链接。但是我们根本无法更新首页，因为它就像只为首页注销一样。

这只发生在我们在家工作时。当我们在工作办公室时，这不会发生。

有人经历过吗？不知道这发生在什么级别... drupal，yottaa？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:31:34.650

发现了问题。它是 Yottaa 的 CDN 上主页的特定缓存。关闭此功能后，我就可以再次编辑主页。

注意：他们说不建议将其关闭。相反，他们建议刷新缓存。无论哪种方式，找出导致问题的原因。

# sqlite - 执行更新的 SQLITE 语法错误

> ID：14846225
> 
> 赞同：0
> 
> 时间：2013-02-13T04:07:42.337
> 
> 标签：sqlite

我正在尝试通过添加一列并标记一些行以指示它们是每次旅行的最后一站来改进运输调度表。

每个行程将有许多行显示其停靠点及其沿行程的顺序。如果序列号是该行程的最高值，我想用“1”更新 LastStop 列。

我认为下面的 SQL 是在正确的轨道上，但我得到一个“没有这样的列：s1.stop_sequence”所以我不知道我是否在正确的轨道上，直到这个对我来说不明显的错误得到解决。我是一个 SQL 轻量级的，几乎没有超出新手的水平。Stop_Sequence 绝对是该列的正确名称。

```
UPDATE stop_times
   SET LastStop = '1'
 WHERE stop_sequence =(
             SELECT max(st.stop_sequence)
           FROM stop_times s1
          WHERE s1.trip_id = trip_id
       )
       AND
       trip_id = s1.trip_id
       AND
       stop_ID = s1.stop_id; 
```

示例数据的简化版本如下。

```
TripID  Stop    Sequence LastStop
665381  1766    1
665381  3037    2
665381  3038    3          1
667475  1130    1
667475  2504    2          1
644501  2545    1
644501  3068    2
644501  2754    3
644501  3069    4
644501  2755    5          1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:22:53.430

您不能从外部查询引用子查询中的列。此外，过滤器`trip_id = s1.trip_id`是重复的，您不想过滤，`stop_id`因为这会阻止他们`MAX`查看行程的任何其他站点。

试试这个：

```
UPDATE stop_times
SET LastStop = '1'
WHERE Stop_Sequence = (SELECT MAX(Stop_Sequence)
                       FROM stop_times s1
                       WHERE s1.Trip_ID = stop_times.Trip_ID) 
```

或者，最后一站是在同一行程中不存在具有更大序列号的其他站点的站点：

```
UPDATE stop_times
SET LastStop = '1'
WHERE NOT EXISTS (SELECT 1
                  FROM Stop_Sequence s1
                  WHERE s1.Trip_ID = stop_times.Trip_ID
                    AND s1.Stop_Sequence > stop_times.Stop_Sequence) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:37:46.737

这对您有用，只要停止字段始终小于 1000（如果是，请使用更大的乘数）：

```
UPDATE stop_times
SET laststop = 1
WHERE tripid*1000+sequence IN (
    SELECT tripid*1000+sequence FROM (
        SELECT tripid, max(sequence) AS sequence
        FROM stop_times
        GROUP BY 1
    )
) 
```

我会用元组语法写这个，但 SQLite 不支持它：

```
UPDATE stop_times
SET laststop = 1
WHERE (tripid, sequence) IN (
    SELECT (tripid, sequence) FROM (
        SELECT tripid, max(sequence) AS sequence
        FROM stop_times
        GROUP BY 1
    )
) 
```

抱歉，没有 SQLFiddle - 今天它似乎对我不起作用。

# php - 在 PHP 中的匿名函数中包装变量

> ID：14846228
> 
> 赞同：7
> 
> 时间：2013-02-13T04:08:04.407
> 
> 标签：php, javascript, scope, anonymous-function

我是一名 JS 开发人员，经常使用自执行匿名函数来最大限度地减少对全局范围的污染。

即：（JS）

```
(function(){
    var x = ...
})(); 
```

在 PHP 中是否可以/建议使用相同的技术来最小化函数/变量名冲突？

即：（PHP）

```
(function(){

    $x = 2;

    function loop($a){
        ...
    }

    loop($x);

})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:32:05.243

为避免全局污染，请使用类和面向对象的方法： [请参阅此处的 PHP 文档](http://php.net/manual/en/language.oop5.php)

为了进一步避免污染，请避免使用静态和全局变量。

像您展示的那样在 Javascript 中使用的闭包是因为它（Javascript）是一种基于原型的语言，通常在基于 OO 的语言中没有属性（在形成意义上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-15T00:13:01.953

是的，您可以在 PHP 中创建匿名函数，这些函数可以立即执行而不会污染全局命名空间；

```
call_user_func(function() {
  $a = 'hi';
  echo $a;
}); 
```

语法不如 Javascript 等价物漂亮，但它做同样的工作。我发现这个结构非常有用并且经常使用它。

你也可以像这样返回值；

```
$str = call_user_func(function() {
  $a = 'foo';
  return $a;
});

echo($str);   // foo
echo($a);     // Causes 'Undefined variable' error. 
```

# ios - 为什么applicationFrame高度为460时窗口高度为480？

> ID：14846229
> 
> 赞同：1
> 
> 时间：2013-02-13T04:08:07.430
> 
> 标签：ios, objective-c, uiwindow, appdelegate

我在我的 AppDelegate 类中创建了一个 TabBar VC，通过 [[UIScreen mainScreen] bounds] 设置窗口框架。由于我显示了一个状态栏，所以高度应该是 460，但它似乎是 480。如果我手动将高度设置为 460，它会将触摸识别切到选项卡的底部。下面是代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
UIColor *brownNavBarColor = [[UIColor alloc] initWithRed:0.78f green:0.56f blue:0.06f alpha:1.0f];
[application setStatusBarHidden:NO];

CGRect windowRect = [[UIScreen mainScreen] bounds];
self.window = [[UIWindow alloc] initWithFrame:windowRect];

CGRect appFrame = [[UIScreen mainScreen] applicationFrame];

NSLog(@" appFrame %f", appFrame.origin.y);
NSLog(@" appFrame %f", appFrame.size.height);

NSLog(@" window.frame %f", self.window.frame.origin.y);
NSLog(@" window.frame %f", self.window.frame.size.height);

NSLog(@" window.bounds %f", self.window.bounds.origin.y);
NSLog(@" window.bounds %f", self.window.bounds.size.height);

[self.window makeKeyAndVisible];

self.ingredientTabVC2 = [[NewIngredientViewController alloc] initWithNibName:nil bundle:NULL];
self.ingredientNC2 = [[UINavigationController alloc] initWithRootViewController:self.ingredientTabVC2];
[self.ingredientNC2.navigationBar setTintColor:brownNavBarColor];

self.ingredientTabVC3 = [[IngredientTabViewController alloc] initWithNibName:nil bundle:NULL];
self.ingredientNC3 = [[UINavigationController alloc] initWithRootViewController:self.ingredientTabVC3];
[self.ingredientNC3.navigationBar setTintColor:brownNavBarColor];

self.tabBarController = [[UITabBarController alloc] initWithNibName:nil bundle:NULL];
self.tabBarController.viewControllers = [[NSArray alloc] initWithObjects: self.ingredientNC2, self.ingredientNC3, nil];

[self.window setRootViewController:self.tabBarController];
return YES;
} 
```

这给出了日志输出

```
2013-02-12 23:04:21.867 SingleTest[24221:c07]  appFrame 20.000000
2013-02-12 23:04:21.868 SingleTest[24221:c07]  appFrame 460.000000
2013-02-12 23:04:21.869 SingleTest[24221:c07]  window.frame 0.000000
2013-02-12 23:04:21.870 SingleTest[24221:c07]  window.frame 480.000000
2013-02-12 23:04:21.870 SingleTest[24221:c07]  window.bounds 0.000000
2013-02-12 23:04:21.871 SingleTest[24221:c07]  window.bounds 480.000000 
```

有人可以解释这种差异背后的原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T04:11:50.787

从文档中`UIScreen`：

应用框架：

> 此属性包含屏幕边界减去状态栏占用的区域（如果可见）。使用此属性是检索应用程序初始窗口大小的推荐方法。矩形以点为单位指定。

界限：

> 包含屏幕的边界矩形，以点为单位。（只读）

`bounds`包括状态栏，`applicationFrame`不包括。

还要注意`applicationFrame`有 的`y`起源`20`。

您希望主窗口填满屏幕。当您设置窗口的`rootViewController`时，它会`applicationFrame`自动调整为 。

# java - 用纯 Java 制作视频游戏，该去哪里？

> ID：14846231
> 
> 赞同：2
> 
> 时间：2013-02-13T04:08:55.987
> 
> 标签：java, swing, resources, awt

我已经编程了大约一年，并且对所有编程基础知识都有很好的掌握，并且是一个相当不错的 Java 程序员，所以现在我有时间想开始用 Java 制作游戏。但是，我真的很喜欢不使用任何额外的库，并且在我完全理解视频游戏的机制之前只使用纯 Java。

我一直在浏览互联网，并且看到了比我数不清的更多“最佳方法”。因此，如果有人能指出我正确的方向，那就太好了！（如将我发送到最好的、最容易理解的和最新的资源，无论是印刷版还是网络版）

似乎无论我在哪里看，我都会在同一个主题上获得完全不同的信息。因此，如果有人能给我一个遵循当前标准的资源，我真的很感激。Ps 在我的手机上输入，抱歉有任何错别字:-)

# objective-c - 如何杀死停止背景选择器

> ID：14846233
> 
> 赞同：0
> 
> 时间：2013-02-13T04:08:59.107
> 
> 标签：objective-c, ios6, avfoundation

嘿，我有一个任务，我需要在后台线程中执行一个选择器，我需要在其中进行一些视频编码。任务很顺利。但是，如果我按下后退按钮，那么我希望该方法应该是停止/终止。但它并没有停止。

我搜索了很多，但没有找到满意的答案。我尝试了“cancellAllPreviousRequests”并且还寻找了 NSQueueOperation 但找不到如何使用它来停止后台选择器。任何人都可以帮助我提供相关代码。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:40:57.863

您需要一个并发`NSOperation`，它通过其`isCancelled`属性定期检查它是否已被取消。然后您可以调用或的`cancel`方法来停止后台任务。请记住，调用实际上并没有停止操作，而是设置了一个布尔属性，操作应该定期检查它是否应该杀死自己（停止做它正在做的事情）。您多久检查一次操作代码中的标志取决于您。`NSOperation``cancelAllOperations``NSOperationsQueue``cancel``isCancelled`

如需进一步阅读，请参阅[此处](https://stackoverflow.com/questions/3859631/subclassing-nsoperation-to-be-concurrent-and-cancellable)和[此处](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)。

# java - 如何将 iMacro 脚本移动到 Selenium？

> ID：14846236
> 
> 赞同：4
> 
> 时间：2013-02-13T04:09:07.873
> 
> 标签：java, selenium, migration, imacros

我们一直在使用 iMacro 进行 QA 自动化，在最近的一次讨论中，我们决定转向 Selenium。

Selenium 提供了一个比较，因此忽略了如何将脚本迁移到他们的平台.. [http://wiki.imacros.net/Selenium](http://wiki.imacros.net/Selenium)

有没有可用于此目的的工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:08:55.650

目前，据我所知，没有任何工具可以帮助您解决此问题。

从 iMacros 迁移到 Selenium 有两种选择：

1.  如果您有少量脚本，请使用 selenium IDE 重新录制它们
2.  如果您有大量测试，您可以编写一个可以映射等效命令的脚本，您可能仍然需要进行一些手动清理，但它至少可以节省一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T16:19:01.847

最简单的方法（如果您使用的是 firefox）是选择 Tools->Selenium IDE。这将在单独的窗口中打开 Selenium IDE。在 Selenium IDE 录制时，使用 Imacros 侧边栏“播放”脚本。我自己就是这样做的。它就像一个魅力。显然，这不会执行任何特定于 Imacros 的文本抓取，但如果您的脚本是一组简单的操作，它会非常有效。

# php - preg_replace 标签之间的标签

> ID：14846248
> 
> 赞同：0
> 
> 时间：2013-02-13T04:10:26.143
> 
> 标签：php

我试图替换 pre 标签之间的 html 标签。这就是我想要它做的：

```
$str = '<pre><div>Get<p>rid</p> of html tags</div></pre>';
$str = preg_replace('#(<pre.*?>)/<[^<>]+>/(</pre>)#', '$1$2', $str);
echo $str; 
```

它应该在 pre 标签中响应“摆脱 html 标签”

我知道一个事实，

```
$str = preg_replace('#(<pre.*?>).*?(</pre>)#', '$1$2', $str); 
```

有效，但以空的 pre 标签响应。

我只需要删除 pre 标签之间的所有 html 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:13:39.287

这是我的做法：

```
$str = preg_replace_callback("#(<pre[^>]*>).*?</pre>#is",function($m) {
    return $m[1].strip_tags($m[0])."</pre>";
},$str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:18:12.570

```
$str = '<pre><div>Get<p>rid</p> of html tags</div></pre>';
if(preg_match("/<pre>(.+?)<\/pre>/i", $str,$res))
{
  $str=strip_tags($res[1]);
}
echo $str; 
```

# ios - 从手动更新切换到 NSFetchedResultsController

> ID：14846251
> 
> 赞同：1
> 
> 时间：2013-02-13T04:10:48.997
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我的整个应用程序几乎都是表格视图。我没有使用 a `nsfetchedResultsController`，所以我自己做所有的 tableView 工作。但我的主要问题是：

如果我允许我的单元格被重新排序，如果我切换页面，它们不会保持我移动它们的顺序。因此，如果我将我的 tableViews 转换为使用`NSFetchedResultsController`，这会解决问题吗？我已经搜索并搜索了将 NSarray 顺序保存到核心数据或 NSUserDefaults 的解决方案，但我找不到解决方案/教程或关于该主题的任何内容。因此，如果有人可以帮助我，那就太好了！非常感谢！

# android - Android - 捕获防火墙阻止异常

> ID：14846254
> 
> 赞同：1
> 
> 时间：2013-02-13T04:11:11.067
> 
> 标签：android, firewall

我正在开发一个安卓应用程序。我正在使用我的网络链接从服务器下载一些文件。在此我想了解防火墙是否阻止了我的网络链接。有没有办法捕捉防火墙块异常？

# jquery - 将点击功能添加到切换功能？

> ID：14846255
> 
> 赞同：1
> 
> 时间：2013-02-13T04:11:12.717
> 
> 标签：jquery, toggle, slidetoggle

我有一个带有可折叠标签和切换 +/- 按钮的手风琴式 NAV 设置。

我正在尝试使我的“标签”DIV 可点击。我在我的部分代码周围添加了以下函数并删除了重复的 toggle() 函数，但它仍然不能正常工作——

**更新**

```
$('.tabs').click(function() {
    }
) 
```

我的 HTML

```
<div id="tab1" class="tabs">NEWS [<a href="#" class="button" id="plus1">more</a>]</div>
<div class="expandable" id="one">
<p>This is placeholder text.</p></div>

<div id="tab2" class="tabs">EVENTS [<a href="#" class="button" id="plus2">more</a>]</div>
<div class="expandable" id="two">
<p>This is placeholder text.</p></div> 
```

还有我的 javascript

```
$(window).load(function(){
$(document).ready(function(){

$(".expandable").hide();
$(".button").show();

$('.tabs').click(function() {  // added new

  $('.button').toggle(function(){
      $(".expandable").slideDown(
        function(){
          $(".button").text("less")
        }
      );
  },function(){
      $(".expandable").slideUp(
      function(){
          $(".button").text("more")
      }
      );
  });

}); // end of click
});

}); 
```

我最初为每个选项卡设置了一个 toggle() 函数，但我被告知不要这样做。我在 JS 语法上苦苦挣扎，所以我现在不知道该去哪里。

谢谢人们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:18:42.623

在您的情况下，不要创建多个切换功能，`$('#plus1').toggle` `$('#plus2').toggle`而是为它们分配类并创建一个，`$('.plus').toggle`这将最小化并使您的代码高效（可维护）
有关如何使用它的更多信息请参阅[幻灯片切换示例](http://api.jquery.com/slideToggle/)
它提供了一个很好的例子来处理使用此切换功能。你会知道如何使用它。继续吧，如果有任何问题，请发帖:)

**更新**
为您的 DIV 分配一个需要使其可点击的类（例如`tabs`）
在您的 JS 中编写此代码

```
$(document).ready(function() {
    $('.tabs').click(function() {
      alert('the div is clicked');
      alert($(this).html());  // This is nothing but the content of clicked DIV
    });
}); 
```

**已编辑**

```
$(document).ready(function() {
  $('.expandable').hide();
}); 
```

或者给个样式表

```
<style type="text/css">
.expandable {
  display: none;
}
</style> 
```

# javascript - 粘性导航栏出现奇怪的 JS 错误

> ID：14846259
> 
> 赞同：2
> 
> 时间：2013-02-13T04:11:26.693
> 
> 标签：javascript, html, css

所以我有一个网站，你可以[在这里](http://homegrowndevelopment.com/)看到。我的粘性导航栏有问题，当我滚动到页面底部时它会闪烁。

当我的 JS 是这样的时候，它的工作不会闪烁：

```
<script>
    $(document).ready(function() {
        $('#nav-wrapper').height($("#nav").height());
        $('#nav').affix({
            offset: 675
        });
    });
</script> 
```

但导航栏猛烈地跳来跳去。但是，当导航栏是这样时，它不会跳来跳去，而是会闪烁......

```
<script>
    $(document).ready(function() {
        $('#nav-wrapper').height($("#nav").height());
        $('#nav').affix({
            offset: $('#nav').height()
        });
    });
</script> 
```

显然，我想要一个不会闪烁或跳跃的导航栏。我在 FireFox、Chrome 和 Safari 上检查了我的代码。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:53:03.610

**快速回答：**只需将您应用于#nav.affix 的相同css 属性分配给#nav.affix-bottom 即在homegrown.css 更改中

```
#nav.affix {
    position: fixed;
    top: 0;
    width: 100%
} 
```

到

```
#nav.affix, #nav.affix-bottom {
    position: fixed;
    top: 0;
    width: 100%
} 
```

**解释：**大部分解释都在[这篇](https://stackoverflow.com/a/12082615/766570)文章中。但是根据我的测试，我注意到当您在页面末尾附近滚动时..闪烁正在发生 b/c`.affix-bottom`被突然应用到您的`#nav`div.. 所以我只是给出`.affix-bottom`了相同的属性`.affix`.. 所以没有div 发生了突然的变化。希望这会有所帮助！

# jquery - 无法读取 jQuery Ajax 错误

> ID：14846262
> 
> 赞同：0
> 
> 时间：2013-02-13T04:11:54.930
> 
> 标签：jquery, ajax, forms, debugging

我有一个脚本应该通过 ajax 将表单数据发送到 PHP 脚本。不幸的是它不起作用我知道 $.ajax 有一个错误，但我不知道如何查看该错误，目前我已经设置了它，所以错误只是警告'失败'。在无法找到错误根源的情况下，解决此问题非常棘手，如何查看此错误？我没有调试 ajax 的经验：S 谢谢！

```
 $('.jSubmit').click(function() {

        var form_data = $(this).closest('form').serialize();
        var form_id   = $(this).closest('form').attr("id");

        function text_success(return_data) {

            if(form_id == "page_form") {
            $('#trans_div').append('<div id="pop_up"><div>Thank you, we will be in touch shortly.</div></div>');
            $('#trans_div').css('display','block').animate({opacity: 0.9}, 800, function() {

                $('#trans_div').delay(1500).animate({opacity: 0.0}, 800, function() {

                        $(this).css('display','none');

                });

            });

            $(this).closest('form').find("input[type=text], textarea").val("");
            }
            else
            {
            //$('.form_bottom_text').html(return_data);
            alert('no');
            }

        }

        function text_failure() {

            if(form_id == "page_form") {
            //$('#trans_div').css('display','block').animate({opacity: 0.9});
            //$('#trans_div').append('<div id="pop_up"><div>Failed to send message.</div></div>');
            //$(this).closest('form').find("input[type=text], textarea").val("");
            alert('failed');
            }
            else
            {
            $('.form_bottom_text').html('Error Occurred');
            }

        }

            $.ajax ({
            url:"form.php",
            type:'POST',
            data: form_data,
            success: function(return_data) {
                text_success(return_data);
                },
            error: function() {
                //text_failure();
                alert('fail');
                }               
            });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:15:36.590

你为什么不充分利用你正在实现的回调并将适当的参数传递给`"error"`?

从[`.ajax`文档](http://api.jquery.com/jQuery.ajax/)中：

> 类型：Function(jqXHR jqXHR, String textStatus, String errorThrown)
> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象、描述发生的错误类型的字符串和可选的异常对象（如果发生）。

所以这：

```
error: function() {
    //text_failure();
    alert('fail');
} 
```

应该是这样的：

```
error: function( x, stat, msg ) {
    //text_failure();
    console.error( x.responseText );
    console.error( x.status );
    console.info( x.statusText );
    console.log( msg );
} 
```

你可能会很快发现发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:18:28.030

你可以为所有 AJAX 请求做这样的事情

```
$(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
    });
}); 
```

您也可以`error`像这样使用回调的参数

```
 $.ajax ({
            url:"form.php",
            type:'POST',
            data: form_data,
            success: function(return_data) {
                text_success(return_data);
                },
error: function(e, status, txt ) {

}
}); 
```

**检查这篇[文章](http://www.unseenrevolution.com/jquery-ajax-error-handling-function/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:35:13.303

奇怪的是，整个问题背后的问题是我的提交按钮的标签有一个 type="submit" ，改变它解决了这个问题。

# c# - 动态创建的文本框的 ontextchanged 事件在分配 ID 时不会触发

> ID：14846263
> 
> 赞同：1
> 
> 时间：2013-02-13T04:11:55.247
> 
> 标签：c#, asp.net

我阅读了所有相关的帖子，但仍然无法理解当前面临的问题。在 Oninit 上，我使用如下文本框创建表格，当我为文本框分配 id 时，textchanged 事件不会触发，但是当我没有分配一个它触发的 ID。无法解释为什么。请帮忙。

```
 protected override void OnInit(EventArgs e)
    {

    PopulateTextBoxes();
    base.OnInit(e);
    }
protected void PopulateTextBoxes()
{
    int quantityRequired = 0;
    quantityRequired =GetQuantity();
    for (int j = 0; j < quantityRequired; j++)
    {
        TableRow row = new TableRow();
        TableCell cell1 = new TableCell();
        TextBox tb = new TextBox();
        //tb.ID = j.ToString() +":RowTbx";---> this when uncommented does not fire my      tb_textChanged event while left commented the textchanged event is fired. Cant understand why? How is assigning an ID affect event Firing, I need to have the ID to further update my Db.                    
        tb.AutoPostBack = true;
        tb.TextChanged += new EventHandler(tb_TextChanged);
        cell1.Controls.Add(tb);
        row.Cells.Add(cell1);
        TableCell cell2 = new TableCell();
        CheckBox chBox = new CheckBox();
        chBox.CheckedChanged += new EventHandler(chBox_CheckedChanged);
        chBox.AutoPostBack = true;
        cell2.Controls.Add(chBox);
        row.Cells.Add(cell2);
        TableCell cell3 = new TableCell();
        Image img = new Image();
        img.Width = Unit.Pixel(25);
        img.Height = Unit.Pixel(25);
        img.ImageUrl = "HttpRuntime.AppDomainAppVirtualPath" + "/Images/" +"img.jpeg";
        cell3.Controls.Add(img);
        row.Cells.Add(cell3);
        tbl_Serial.Rows.Add(row);
    }
}
private void tb_TextChanged(object sender, EventArgs e)
{
    // TODO: Implement this method
    //throw new NotImplementedException();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:18:16.703

您设置的 ID 不是有效的控件 ID。

参考：[Control.ID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.id.aspx)

> 只有字母数字字符和下划线字符 (_) 的组合是此属性的有效值。包含空格或其他无效字符将导致 ASP.NET 页面解析器错误。

试试这个：

```
tb.ID = "RowTbx" + j; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:15:32.743

不要`:`用于`ID`. 试试这个

```
tb.ID = j.ToString() + "_RowTbx"; 
```

# processing - 如何在处理开发环境（PDE）中调试，还有支持智能感知的插件

> ID：14846264
> 
> 赞同：10
> 
> 时间：2013-02-13T04:12:11.177
> 
> 标签：processing

我是Processing开发环境的新手，我做了功课，我发现的只是将处理库导入Java IDE（eclipse）并使用调试，我想知道是否有一个PDE插件可以帮助智能感知和调试小草图 PDE 非常方便。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-26T04:13:05.127

# 调试

自**Processing 3**发布以来，调试现在是 Processing IDE 的原生特性。

在下面的屏幕截图中，您将看到一个新`Debug`菜单。`setup()`我在和`draw()`方法上设置断点，如`<>`行号中的标记所示。右侧是一个弹出窗口，列出变量和对象值等。

[![在此处输入图像描述](../Images/817be7b7a96f235d811b1c03418a6b29.png)](https://i.stack.imgur.com/3xMIB.png)

# 智能感知

在 Preferences 菜单中，选中**Code completion with Ctrl-space**框。

[![在此处输入图像描述](../Images/040d9aae8f95eebf41beb9de58aff0be.png)](https://i.stack.imgur.com/YirUR.png)

然后，您可以开始键入一个函数`ellipse`，然后按 CTRL+Space 弹出智能感知。此外，启用该功能后，通过键入`.`after 访问对象的属性或方法应该会自动弹出智能感知。

# 使用另一个 IDE

最后，您可以通过将处理 core.jar 导入任何 Java 项目来利用更强大的 IDE。core.jar 文件位于相对于您的 Processing 安装的位置，例如：

操作系统：`/Applications/Processing 3.0.1.app/Contents/Java/core/library/core.jar`
Windows：`\Program Files\processing-3.0.2\core\library\core.jar`

在处理 1 和 2 中，这必须作为**Applet**运行。在处理 3 中，作为**Java Application**运行。这是一个示例来演示：

```
import processing.core.*;

public class Main extends PApplet {

    // In Eclipse, run this project as Java Application (not Applet)
    public static void main(String[] args) {
        String[] a = {"MAIN"};
        PApplet.runSketch(a, new Main());
    }

    public void settings() { // <-- that's different
        size(500, 500); // necessary here to prevent runtime IllegalStateException
    }

    public void setup() {
        // other one and done operations
    }

    public void draw() {
        ellipse(mouseX, mouseY, 40, 40);
    }
} 
```

如果您想在 Eclipse 中跨多个类编写处理代码，请查看这篇文章。
[https://processing.org/tutorials/eclipse/](https://processing.org/tutorials/eclipse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:36:12.210

如果您使用最新的 Processing 2.0b7 版本，并启用“实验”模式（右上角），您可以访问一小组工具（断点，逐步）和一个实时调试控制台。它无法与 VS 或 Eclipse 等其他平台相比，但它是一个良好的开端，并且完成了一些工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:27:27.157

不幸的是，您无法在紧凑的处理开发环境中获得这些功能。

您可以使用像 IntelliJ 或 eclipse 这样的不错的 Java IDE 来获得自动完成/智能感知。就我个人而言，我对[Proclipsing](http://code.google.com/p/proclipsing/) eclipse 插件如何与 Processing 集成（轻松的项目导出、库管理等）感到非常满意

查看有关设置的 [视频指南：](http://vimeo.com/19076476)![Proclipsing 视频快照](../Images/026612eee64bd89535375d77884e1976.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T07:49:04.563

我从未尝试过，但是对于 Processing 2.x，有[这个](http://debug.martinleopold.com)工具用于调试。在处理论坛中已在[此主题](http://forum.processing.org/topic/gsoc-result-a-debug-mode-for-processing-2-0)中进行了讨论。

# php - 无法输出 PHP cookie 的值

> ID：14846265
> 
> 赞同：2
> 
> 时间：2013-02-13T04:12:23.940
> 
> 标签：php, cookies, output

我有一组 cookie：access[userid]、access[seriesid]、access[token]

到目前为止，我已经为它们中的每一个分配了值，这样做没有问题。我的问题是当我试图检索每个这些 cookie 的值时。

例如，我为 cookie access[userid] 分配了一个值，如下所示：

```
$userid = "matt";
setcookie("access[userid]", $userid, time()+(300)); 
```

稍后我尝试在网页正文中输出此 cookie 的值：

```
echo "You are already logged in as $_COOKIE['access[userid]']."; 
```

我尝试了其他几种方法，但都没有奏效：

```
$username = $_COOKIE["access[userid]"];
echo "You are already logged in as $username."; 
```

我的语法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:24:20.553

我会避免在您的 cookie 名称中使用方括号，您正在以数组表示法定义一个 cookie 变量，请尝试

```
echo "You are already logged in as {$_COOKIE['access']['userid']}"; 
```

或使用

```
setcookie("access_userid", $userid, time()+(300));
echo "You are already logged in as {$_COOKIE['access_userid']}"; 
```

此行为与数组结构的表单名称属性相同

[http://www.php.net/manual/en/faq.html.php#faq.html.arrays](http://www.php.net/manual/en/faq.html.php#faq.html.arrays)

# javascript - 如何在书签中包含外部 javascript 文件？

> ID：14846269
> 
> 赞同：1
> 
> 时间：2013-02-13T04:13:00.243
> 
> 标签：javascript, jquery, cdn, bookmarklet

我正在为我为工作编写的一堆脚本制作一个 CDN。我以前必须分发它们，每个人都获取文件并将其安装在他们的计算机上，但我将它们移动到亚马逊 cloudfront/s3 实例。

我将使用它来注入书签：[http ://allben.net/post/2010/01/30/CSS-JavaScript-Injection-Bookmarklets](http://allben.net/post/2010/01/30/CSS-JavaScript-Injection-Bookmarklets)

但是，我这样做的旧方法是使用 jquery 小书签生成器。这与此不同，我不知道如果我想使用它应该如何包含 jquery。

这是一个示例脚本：

```
javascript:(function(){var%20s=document.createElement('script');s.setAttribute('src','cdn.domain.com/scripts/somescript.js');document.getElementsByTagName('body')[0].appendChild(s);})(); 
```

这在书签中。

剧本：

```
alert($(somecontainer).size()); 
```

显然这不起作用，因为小书签不再注入 jquery。那么，解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:45:15.787

我猜你面临的问题是 jQuery 小书签生成器`$`在页面中不可用。它将 jQuery 变量隔离在一个函数中，然后在运行后将 jQuery 完全从页面中删除。

以下是此处代码的修改版本：http: [//benalman.com/projects/run-jquery-code-bookmarklet/](http://benalman.com/projects/run-jquery-code-bookmarklet/)应该可以工作。

```
function (e, a, g, h, f, c, b, d) {
  if (!(f = e.jQuery) || g > f.fn.jquery || h(f)) {
    c = a.createElement("script");
    c.type = "text/javascript";
    c.src = "http://ajax.googleapis.com/ajax/libs/jquery/" + g + "/jquery.min.js";
    c.onload = c.onreadystatechange = function () {
      if (!b && (!(d = this.readyState) || d == "loaded" || d == "complete")) {
        var s = document.createElement('script');
        s.setAttribute('src', 'cdn.domain.com/scripts/somescript.js');
        document.getElementsByTagName('body')[0].appendChild(s)
      }
    };
    a.documentElement.childNodes[0].appendChild(c)
  }
})(window, document, "1.3.2") 
```

请记住，这将替换页面上的任何`jQuery`变量`$`。如果您需要在已经使用这些变量的页面上运行小书签，请使用`jQuery.noConflict(1)`. 例如`_jq = e.jQuery.noConflict(1)`，将让您使用`_jq`而不是，`$`并将返回原始值`$`和`jQuery`原始值。例子：

```
alert(_jq(somecontainer).size()); 
```

如果你想在你的 .js 代码中使用 noConflict 但也使用 $ ，请将你的代码包装在一个函数中并创建一个本地范围的`$`. 例子：

```
(function(){
  var $ = _jq;  // this $ will not affect any $ that exists outside this function.
  alert($(somecontainer).size());
})(); 
```

# rabbitmq - 什么时候适合使用 AMQP？

> ID：14846273
> 
> 赞同：7
> 
> 时间：2013-02-13T04:13:09.630
> 
> 标签：rabbitmq, amqp

在我之前的工作中，我使用了 AMQP 的好处，但我没有参与 rabbitMQ 子项目的开发。在我目前的工作中，我想负责集成其中一个 AMQP 实现（可能是 rabbitMQ）。这里的问题是我必须说服我的老板使用 AMQP。

我正在阅读“RabbitMQ in Action”，Videla 先生写道 AMQP 可以改进任何系统，但我不知道如何改进我的项目。我们只使用 2 台服务器在两者之​​间进行 API 调用，因此我们现在没有可伸缩性问题。我们处理真实的资金流，这意味着我们需要任何操作的成功确认，即我不能将任务放入队列并“忘记”它。在这种情况下，AMQP 可以带来什么好处？

当您几乎不需要扩展时，您能否为相对较小的系统提供几个真实世界的示例？请省略标准的“记录”和“广播消息”情况:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:21:42.970

听起来您只需要[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)。Rabbit 并不以 RPC 闻名，[但它实际上做得](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)非常好，因为：

*   您可以使许多消息具有事务性（即全部在一个事务中）
*   它的平台、语言和协议格式不可知（即您可以发送二进制文件）
*   由于经纪人的想法，您可以轻松添加更多服务器来处理程序。
*   您可以使用 RabbitMQ 的管理 UI 轻松查看消息流和速率
*   RabbitMQ 是一种架构级别的控制反转
*   在 RabbitMQ 中，消息是合同……而不是程序。这是正确的做法。

现在让我们将其与[SOAP](http://en.wikipedia.org/wiki/SOAP)进行比较：

*   SOAP 没有为您提供代理或路由，因此您的所有服务器都需要相互了解。我无法告诉您必须为开发、登台、生产使用插件 IP 地址是多么烦人。
*   SOAP 不提供事务。你必须自己做。
*   SOAP 你必须使用 XML
*   有比 SOAP 客户端更可靠的 RabbitMQ 客户端。SOAP 兼容性是一个 PITA。
*   SOAP 你有消息和端点。在某些情况下，这是一个专业人士。

您不必使用 RabbitMQ 来使用[eventbus](http://code.google.com/p/guava-libraries/wiki/EventBusExplained) / [messagebus](http://en.wikipedia.org/wiki/Enterprise_service_bus)的想法。我个人不会制作任何类型的应用程序，因为从纯同步 RPC 到异步事件总线/消息总线需要大量工作。最好从一开始就做。

# sql - sql - 如何列出在特定日期范围内未保留的属性？

> ID：14846280
> 
> 赞同：1
> 
> 时间：2013-02-13T04:14:06.540
> 
> 标签：sql, postgresql

预订表：

```
 id  | fk_property_id |       arrival       |      departure      
------+----------------+---------------------+---------------------
 1    |            1   | 2013-01-11 14:00:00 | 2013-09-07 10:00:00
 2    |            1   | 2013-02-12 14:00:00 | 2013-09-07 10:00:00
 3    |            1   | 2013-03-29 14:00:00 | 2013-09-07 10:00:00
 4    |            2   | 2013-04-29 14:00:00 | 2013-09-07 10:00:00
 5    |            2   | 2013-05-29 14:00:00 | 2013-09-07 10:00:00
 6    |            3   | 2013-06-29 14:00:00 | 2013-09-07 10:00:00 
```

属性表：

```
 id  |                         title                          
-----+--------------------------------------------------------
 1   | blah blah
 2   | blah blah
 3   | blah blah
 4   | blah blah
 5   | blah blah
 6   | blah blah
 7   | blah blah
 8   | blah blah
 9   | blah blah
 10  | blah blah 
```

我需要列出特定日期范围内可用的属性。

例如用户输入日期范围：到达：2013-06-29 14:00:00 出发：2013-07-14 10:00:00

我需要列出该期间所有未出租的房产。我怎么做？
我认为它应该是一个左连接 - 但我无法绕过它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:31:05.327

这是正确的条件：

```
select p.*
from properties p left outer join
     reservations r
     on p.id = r.fk_property_id and
        r.arrival < '2013-07-14 10:00:00' and
        r.departure > '2013-06-29 14:00:00'
where r.id is null 
```

这是逻辑。首先，时间条件需要放在`on`子句中。在`where`子句中，它们与`left outer join`.

逻辑是，如果在较晚日期之前没有到达并且在第一个日期之后没有离开，那么房间在*所有*日子都是可用的。这考虑了所有不同的重叠可能性。

final`where`只查找可用的属性，因为没有保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:21:44.640

有几种方法：

左连接

```
SELECT p.id, p.title
FROM properties p 
LEFT JOIN reservations r 
on p.id = r.fk_property_id 
where arrival < '2013-06-29 14:00:00'
and departure > '2013-07-14 10:00:00'
and r.id is null 
```

但是，由于您实际上是在执行反半连接，`NOT EXISTS`因此可能对您更好：

```
select p.id, p.title
from properties p 
where NOT EXISTS (
    select 1 
        from reservations r 
            where where arrival > '2013-06-29 14:00:00'
                 and departure < '2013-07-14 10:00:00'
                 and p.id = r.fk_property_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:22:22.480

你会想`IS NULL`用你的`LEFT OUTER JOIN`桌子。这意味着在该特定属性的保留表中未找到任何内容。

```
SELECT *
FROM properties LEFT OUTER JOIN reservations ON properties.id =     reservations.fk_property_id AND a
WHERE arrival > '2013-06-29 14:00:00'
AND departure < '2013-07-14 10:00:00'
AND reservations.arrival IS NULL 
```

# wpf - DATAGRID 的 DataGridTemplateColumn RUNTIME 中“金额”列的总和

> ID：14846281
> 
> 赞同：0
> 
> 时间：2013-02-13T04:14:14.027
> 
> 标签：wpf, wpf-controls, wpfdatagrid, wpftoolkit

我们有 WPF 应用程序，其中我们在一个表单上使用 DataGrid。在运行时，当我们在 DataTemplate 列中输入值时，我需要在 DATAGRID 页脚中显示该特定列的 SUM。因此，当我每次更改该 AMOUNT 列的任何单元格中的值时，都需要显示该列的正确 SUM。我应该尝试哪个事件。我试过这段代码，但每次都需要按tab，它不显示正确的SUM。

```
 private void dgInfo_RowEditEnding(object sender, Microsoft.Windows.Controls.DataGridRowEditEndingEventArgs e)
 {
      Microsoft.Windows.Controls.DataGridRow row = this.dgInfo.ItemContainerGenerator.ContainerFromIndex(e.Row.GetIndex()) as Microsoft.Windows.Controls.DataGridRow;
      ContentPresenter CP = dgInfo.Columns[3].GetCellContent(row) as ContentPresenter;

      TextBlock t = FindVisualChild<TextBlock>(CP);
      if (t != null && t.Text.Length > 0)
      {
         decimal d = Convert.ToDecimal(t.Text);
         sum = sum + d;
         txtTotal.Text = sum.ToString();
      }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:59:13.640

```
 void dgInfo_CellEditEnding(object sender, Microsoft.Windows.Controls.DataGridCellEditEndingEventArgs e)
        {
                       decimal tot = 0;
                       GetFaltyExpenseGridResult newRecord;
                       for (int i = 0; i < (dgInfo.Items.Count - 1); i++)
                       {
                           newRecord = (GetFaltyExpenseGridResult)((ContentPresenter)dgInfo.Columns[0].GetCellContent(dgInfo.Items[i])).Content;

                           if (newRecord != null)
                           {

                                   decimal d = Convert.ToDecimal(newRecord.Amount);
                                   tot = tot + d;
                                   txtTotal.Text = tot.ToString();

                           }
                       }
       } 
```

# ant - 如何获取ant build xml文件自己的名字？

> ID：14846282
> 
> 赞同：8
> 
> 时间：2013-02-13T04:14:27.263
> 
> 标签：ant, filenames

假设我有一个名为`build_dev_linux.xml`.

我的问题是

如何找到 ant 脚本 XML 文件自己的名称，`build_dev_linux.xml` 以便将其放在该 XML 文件中的变量或属性上。？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T04:41:48.093

Ant 定义了一个有用的内置属性列表：

```
basedir             the absolute path of the project's basedir (as set
                    with the basedir attribute of <project>).
ant.file            the absolute path of the buildfile.
ant.version         the version of Ant
ant.project.name    the name of the project that is currently executing;
                    it is set in the name attribute of <project>.
ant.project.default-target
                    the name of the currently executing project's
                    default target;  it is set via the default
                    attribute of <project>.
ant.project.invoked-targets
                    a comma separated list of the targets that have
                    been specified on the command line (the IDE,
                    an <ant> task ...) when invoking the current
                    project.
ant.java.version    the JVM version Ant detected; currently it can hold
                    the values "1.2", "1.3",
                    "1.4",  "1.5" and "1.6".
ant.core.lib        the absolute path of the ant.jar file. 
```

该`ant.file`物业是您所需要的。如果您只想要没有路径的文件名，那么您可以使用`basename`类似的任务

```
<basename file="${ant.file}" property="buildfile"/> 
```

# c++ - 分段错误声明类私有变量

> ID：14846284
> 
> 赞同：-1
> 
> 时间：2013-02-13T04:14:48.490
> 
> 标签：c++, class, segmentation-fault

当我尝试在程序中调用类函数时出现分段错误。在我的程序中，矩阵`grid[][]`快速变化，我希望能够在某个时间保存网格的“图像”，以便我可以将网格的更高版本与此参考进行比较。因此，当我尝试将“图像”保存`grid[][]`到参考矩阵时，我只需使用 for 循环将所有值复制到它。我在我的程序中做了一些测试，我似乎在`getreference`函数中遇到了分段错误。

```
class lattice
{
public:
    lattice(){} // Constructor
    ~lattice(){} // Destructor
    void getgrid(){...}

    //Other functions...

    void getreference()
  {
    for(int a = 0; a<SIZEX; a++)
    {
        for(int b = 0; a<SIZEY; b++)
        {
            reference[a][b] = grid[a][b];
        }
    }
  }

private:
    short grid[SIZEX][SIZEY];
    short reference[SIZEX][SIZEY];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:19:40.407

```
for(int b = 0; a < SIZEY; b++) 
```

应该

```
for(int b = 0; b < SIZEY; b++) 
```

这就是您遇到分段错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T04:20:46.327

```
 for(int a = 0; a<SIZEX; a++)
    {
        for(int b = 0; a<SIZEY; b++) //??
        {
            reference[a][b] = grid[a][b];
        }
    } 
```

将其更改为`for(int b = 0; b < SIZEY; b++)`

# ios5 - AES 加密适用于 iOS5 但不适用于 iOS6

> ID：14846285
> 
> 赞同：0
> 
> 时间：2013-02-13T04:14:49.117
> 
> 标签：ios5, encryption, ios6

我正在编写一个将加密数据发送到外部服务器的应用程序。为此，我编写了加密/解密 NSData 缓冲区的函数。这些功能在 iOS5 上可以完美运行，但在 iOS6 上不可用。我没有修改代码。有人有解决方案吗？这是代码：

```
- (NSData*) AES256EncryptWithKey :(NSString*)pKey :(NSString*)pIV
{
    // key length is incorrect?
    if ([pKey length] != kCCKeySizeAES256)
    {
        M_LogErrorT("AE - incorrect value - " << [pKey length]);
        return nil;
    }

    // is initialization vector used?
    bool useIV = (pIV && [pIV length]);

    // initialization vector length is incorrect?
    if (useIV && [pIV length] != kCCBlockSizeAES128)
    {
        M_LogErrorT("AE - incorrect IV - " << [pIV length]);
        return nil;
    }

// key should be 32 bytes for AES256, will be null-padded otherwise
char pKeyPtr[kCCKeySizeAES256 + 1]; // room for terminator (unused)
bzero(pKeyPtr, sizeof(pKeyPtr));    // fill with zeroes (for padding)

// fetch key data
[pKey getCString:pKeyPtr maxLength:sizeof(pKeyPtr) encoding:NSUTF8StringEncoding];

    // initialization vector should be 16 bytes for AES256
    char pIVPtr[kCCBlockSizeAES128 + 1]; // room for terminator (unused)
    bzero(pIVPtr, sizeof(pIVPtr));       // fill with zeroes (for padding)

    // initialization vector is used?
    if (useIV)
        // fetch initialization vector data
        [pIV getCString:pIVPtr maxLength:sizeof(pIVPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

// see the doc: For block ciphers, the output size will always be less than or 
// equal to the input size plus the size of one block.
// That's why we need to add the size of one block here
size_t          bufferSize        = dataLength + kCCBlockSizeAES128;
void*           pBuffer           = malloc(bufferSize);
size_t          numBytesEncrypted = 0;
CCCryptorStatus cryptStatus       = CCCrypt(kCCEncrypt,
                                            kCCAlgorithmAES128,
                                            kCCOptionPKCS7Padding,
                                            pKeyPtr,
                                            kCCKeySizeAES256,
                                            useIV ? pIVPtr : NULL, /* initialization vector (optional) */
                                            [self bytes],
                                            dataLength,            /* input */
                                            pBuffer,
                                            bufferSize,            /* output */
                                            &numBytesEncrypted);

if (cryptStatus == kCCSuccess)
    // the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:pBuffer length:numBytesEncrypted];

    // free the buffer
    free(pBuffer);

return nil;
}

- (NSData*) AES256DecryptWithKey :(NSString*)pKey :(NSString*)pIV
{
    // key length is incorrect?
    if ([pKey length] != kCCKeySizeAES256)
    {
        M_LogErrorT("AE - incorrect value - " << [pKey length]);
        return nil;
    }

    // is initialization vector used?
    bool useIV = (pIV && [pIV length]);

    // initialization vector length is incorrect?
    if (useIV && [pIV length] != kCCBlockSizeAES128)
    {
        M_LogErrorT("AE - incorrect IV - " << [pIV length]);
        return nil;
    }

// key should be 32 bytes for AES256, will be null-padded otherwise
char pKeyPtr[kCCKeySizeAES256 + 1]; // room for terminator (unused)
bzero(pKeyPtr, sizeof(pKeyPtr));    // fill with zeroes (for padding)

// fetch key data
[pKey getCString:pKeyPtr maxLength:sizeof(pKeyPtr) encoding:NSUTF8StringEncoding];

    // initialization vector should be 16 bytes for AES256
    char pIVPtr[kCCBlockSizeAES128 + 1]; // room for terminator (unused)
    bzero(pIVPtr, sizeof(pIVPtr));       // fill with zeroes (for padding)

    // initialization vector is used?
    if (useIV)
        // fetch initialization vector data
        [pIV getCString:pIVPtr maxLength:sizeof(pIVPtr) encoding:NSUTF8StringEncoding];

NSUInteger dataLength = [self length];

// see the doc: For block ciphers, the output size will always be less than or 
// equal to the input size plus the size of one block.
// That's why we need to add the size of one block here
size_t          bufferSize        = dataLength + kCCBlockSizeAES128;
void*           pBuffer           = malloc(bufferSize);
size_t          numBytesDecrypted = 0;
CCCryptorStatus cryptStatus       = CCCrypt(kCCDecrypt,
                                            kCCAlgorithmAES128,
                                            kCCOptionPKCS7Padding,
                                            pKeyPtr,
                                            kCCKeySizeAES256,
                                            useIV ? pIVPtr : NULL, /* initialization vector (optional) */
                                            [self bytes],
                                            dataLength,            /* input */
                                            pBuffer,
                                            bufferSize,            /* output */
                                            &numBytesDecrypted);

if (cryptStatus == kCCSuccess)
    // the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:pBuffer length:numBytesDecrypted];

    // free the buffer
    free(pBuffer);

return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:55:37.567

我使用相同的代码，但没有初始化向量，并且运行良好。也许尝试朝那个方向看。

# ios - Cocos2d - 奇怪的 CCMenu 和 CCMenuItem 行为 - 不正确的命中测试层顺序

> ID：14846287
> 
> 赞同：1
> 
> 时间：2013-02-13T04:14:58.803
> 
> 标签：ios, objective-c, cocos2d-iphone

我遇到了一个奇怪的 CCMenu 和 CCMenuItem 怪癖，它可能会或可能不会故意成为 cocos2d 库的一部分，所以我不确定是否应该将其报告为错误。

当两个 CCMenu 项目重叠时，添加到菜单中的最后一个将其图像/纹理显示在另一个之上。前任：

```
CCMenu *menu = [CCMenu menuWithItems:item1, item2, nil]; 
// item2 will appear to be on top of item 1 
```

有趣的是，触摸发生重叠的 item2 会触发 item1 的选择器或块。为什么在进行触摸测试时，层层中视觉上较高的项目实际上较低？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:37:33.443

我查看了 CCMenu 的代码，发现这是因为在测试触摸时，CCMenu 会遍历其子数组并返回它找到的第一个通过命中测试的数组。

第二个按钮出现在第一个按钮的顶部，就像每个孩子在 cocos2d 中的工作方式一样。只要它们都具有相同的 z 顺序，最后添加的将显示在顶部。

我不确定这是否是一个错误，但我确实在 cocos2d 论坛上找到了建议的修复程序，您可以尝试一下。[http://www.cocos2d-iphone.org/forum/topic/8554](http://www.cocos2d-iphone.org/forum/topic/8554)

# ruby-on-rails - 如何在 Nokogiri HTML 抓取中加入这些元素？

> ID：14846292
> 
> 赞同：0
> 
> 时间：2013-02-13T04:15:43.133
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在尝试查看如何从该屏幕抓取中获取信息以加入，以便最终将其放入 cvs 或数据库文件中。这只是一个示例，但来自我选择测试的站点的真实数据。我测试了 css 调用以确保它们有效。提前感谢你的帮助。

代码如下：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

url = "http://neighbors.whitepages.com/search/neighbor_search/7707-Gralnick-Pl/Springfield,-VA"
doc = Nokogiri::HTML(open(url))
puts doc.at_css("title").text
doc.css(".header").each do |header|
  address = header.css(".address").text
  puts "#{address}"
end
doc.css(".household_members").each do |household_members|  
  names = household_members.css(".basic_info").text
  puts "#{names}" 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:20:53.527

我会用=~和/或s遍历`div`s 。`id``group_``class` `group`

然后在每个`div`提取地址和家庭成员中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:11:49.080

这将为您提供更可用格式的数据。它围绕外部容器循环`<div class="single">`，允许更轻松地对地址和人员进行分组：

```
require 'nokogiri'
require 'open-uri'

url = "http://neighbors.whitepages.com/search/neighbor_search/7707-Gralnick-Pl/Springfield,-VA"
doc = Nokogiri::HTML(open(url))
data = doc.search('div.single').map{ |div|
  [
    div.at('.address').text,
    div.search('.household_members > .basic_info').map{ |n| n.text.strip }
  ]
} 
```

看着`data[0, 5]`：

```
[
  ["7705 Gralnick Pl", ["Debra A Mussmon"]],
  ["7709 Gralnick Pl", ["Mary D Apker", "John E Apker"]],
  ["7202 Caulking Pl", ["Vivianjune S Furber"]],
  ["9246 Northedge Dr", ["Bridget Cox (703) 455-6057", "Joseph R Furber (703) 455-2442", "Vivian J Furber (703) 455-2442"]],
  ["9244 Northedge Dr", ["David B Burlingame (703) 455-5708", "Linda J Burlingame (703) 455-5708", "Colby Burlingame (703) 455-5708"]]
] 
```

如果您的数据库模式没有任何提示，就不可能给您任何写入数据库的帮助，但至少这为您提供了一个起点。遍历`data`数组数组，并为每个子数组存储地址，然后存储相关名称。

如果你想对电话号码做一些事情，你必须弄清楚如何使用正则表达式来捕获它们，但这是一个单独的问题。

# android - android toast 打印奇怪的数字而不是单词

> ID：14846295
> 
> 赞同：1
> 
> 时间：2013-02-13T04:16:26.933
> 
> 标签：android, toast

对于下面的吐司，为什么下面的代码

```
Toast message = Toast.makeText(getContext(), R.string.message_saved + savedFilePath, Toast.LENGTH_SHORT); 
```

显示一些奇怪的数字，例如 2131099680 /mnt/sdcard/*路径*而不是所需的“您的图像保存在：/mnt/sdcard/*路径*？

这怎么可能被修改？谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T04:18:52.867

只需在制作 Toast*之前*将两个字符串放在一起，使用从字符串资源 id[`Context#getString()`](http://developer.android.com/reference/android/content/Context.html#getString%28int%29)获取：`String`

```
String text = getContext().getString(R.string.message_saved) + savedFilePath;

Toast message =  Toast.makeText(getContext(), text, Toast.LENGTH_SHORT); 
```

在您打印出 int 表示之前，`R.string.message_saved`它实际上是 R 中的内容，只是整数。

`text`或者，您可以通过放置跳过使用字符串

```
getContext().getString(R.string.message_saved) + savedFilePath; 
```

直接在的第二个参数中，但为了*清楚起见*`Toast`，我使用了单独的字符串。

 *`getContext()`由于 OP 正在扩展，因此使用了我的上述答案`View`。[`View`有这个方法](http://developer.android.com/reference/android/view/View.html#getContext%28%29)，所以它是`Context`在这种情况下获得的有效方法。需要注意的重要一点是，真正的问题不是选择如何获取`Context`（如果您在 Activity 中而不是将实例`View,`传递给就足够了），而是如何从*字符串中获取**资源标识*。`Activity``makeText()``String`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:18:26.583

尝试这个

```
Toast.makeText(getApplicationContext(), getApplicationContext().getResources.getString(R.string.imgval), Toast.LENGTH_SHORT).toShow(); 
```**

# c++ - 使用迭代器从 STL 多重集中擦除元素

> ID：14846296
> 
> 赞同：0
> 
> 时间：2013-02-13T04:16:33.430
> 
> 标签：c++, data-structures, stl, multiset

我在单独的数据结构中维护一组多集容器的迭代器。过了一会儿，我从这个数据结构中选择了一个迭代器，然后从多重集中删除了与该迭代器相关的元素。我首先使用这样的东西：

```
#include <iostream>
#include <set>

int main ()
{
  std::multiset<int> myints;
  std::cout << "0\. size: " << myints.size() << '\n';

  for (int i=0; i<10; i++) myints.insert(i);
  std::cout << "1\. size: " << myints.size() << '\n';

  myints.insert (5);
  std::cout << "2\. size: " << myints.size() << '\n';

  std::multiset<int>::iterator it = myints.find(5);
  myints.erase (it);
  std::cout << "3\. size: " << myints.size() << '\n';
  myints.erase (it);
  std::cout << "4\. size: " << myints.size() << '\n';
  return 0;
} 
```

然而，事实证明第二个`myints.erase (it);`原因是分段错误。因此，我更改为以下代码并且它可以工作。我想知道这是否是好方法或者它是可行的`undefined`情况：

```
int main ()
{
  std::multiset<int> myints;
  std::cout << "0\. size: " << myints.size() << '\n';

  for (int i=0; i<10; i++) myints.insert(i);
  std::cout << "1\. size: " << myints.size() << '\n';

  myints.insert (5);
  std::cout << "2\. size: " << myints.size() << '\n';

  std::multiset<int>::iterator it = myints.find(5);
  myints.erase (it);
  std::cout << "3\. size: " << myints.size() << '\n';

  std::multiset<int>::iterator newit = myints.find(*it);
  myints.erase (newit);
  std::cout << "4\. size: " << myints.size() << '\n';

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:18:20.097

`erase(it)`使迭代器无效`it`，即在之后它是无用的，`erase`并且对它做任何事情都会导致未定义的行为。（当它指向的元素被擦除时，您可能期望它“移动到下一个元素”，但这不是它的作用。）

你的第二种方法不能解决这个问题。它可能会偶然起作用，但在`it`删除它后您仍然可以重复使用。

* * *

**编辑：**鉴于您的描述“我只想从多重集中擦除一个 5 并在擦除后保持它对下一次擦除有效。”，您可以通过创建迭代器的副本、递增原始副本然后擦除副本来做到这一点：

```
it = myints.find(5);
// better add a check here to make sure there actually is a 5 ...
std::multiset<int>::iterator newit = it;
it++;
myints.erase(newit); 
```

由于您已经增加了`it`，它仍然有效，因为它没有指向被 杀死的元素`erase`。

但是，老实说，我无法想象这种情况实际上可能有用，或者更确切地说，是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:05:23.017

在您的第一种方法中，当您删除该迭代器指向的元素时，迭代器将失效，稍后当您尝试使用相同的迭代器再次擦除时，您将遇到分段错误。
在您的第二种方法中，因为每次您在擦除后进行查找时都会为您提供正确的迭代器。

您可以通过在代码中进行以下更改来修复第一种情况。后增量运算符将返回一个新对象并将迭代器移动到下一个位置。我还建议在擦除之前进行结束检查，否则您可能会得到未定义的行为。

```
 std::multiset<int>::iterator it = myints.find(5);
      if(it != myints.end())
      myints.erase (it++);
      std::cout << "3\. size: " << myints.size() << '\n';
      if(it != myints.end())
      myints.erase (it++);
      std::cout << "4\. size: " << myints.size() << '\n'; 
```

# ios - 如何以编程方式将导航栏添加到 presentModalViewController？

> ID：14846299
> 
> 赞同：2
> 
> 时间：2013-02-13T04:16:40.897
> 
> 标签：ios, uitableview, presentmodalviewcontroller

如何以编程方式将导航栏添加到 presentModalViewController？我知道默认导航栏会出现在 pushViewController 中。希望您的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T04:37:04.343

在 viewDidLoad 中使用此代码。

```
UINavigationBar *myBar = [[UINavigationBar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
[self.view addSubview:myBar]; 
```

这会将导航栏添加到您的视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:40:01.130

这可能会帮助你

```
PopoverView *foo = [[PopoverView alloc] initWithNibName:@"PopoverView" bundle:nil];
 // Here you pass through properties if you need too.
 // ...
 UINavigationController *navC = [[UINavigationController alloc] initWithRootView:foo];
 [foo release];

 [self.navigationController presentModalViewController:navC animated:YES]; 
```

这就是向模态添加导航栏的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T14:08:58.407

尝试将此添加到您的视图中加载

```
[self.navigationController setNavigationBarHidden:NO animated:YES]; 
```

# macos - MACOS X 上的 SED 命令错误

> ID：14846304
> 
> 赞同：24
> 
> 时间：2013-02-13T04:17:32.383
> 
> 标签：macos, sed

我正在尝试在 MacOSX 终端上运行此命令，该终端最初打算在 Linux 上运行

```
sed '1 i VISPATH=/mnt/local/gdrive/public/3DVis' init.txt >> ~/.bash_profile 
```

但它给了我错误：

```
command i expects \ followed by text. 
```

有什么办法可以修改上述命令以在 MacOSX 终端上工作

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-06-22T22:31:43.817

避难所是对的，但还有另一种方法可以做到。在将`$'...'`字符串传递给`sed`.

所以：

```
 sed -iold '1i\'$'\n''text to prepend'$'\n' file.txt
                      ^^^^^^^^                     ^
                     / |\|||/ \                    |__ No need to reopen
                     | | \|/  |                          string to sed
     Tells sed to    | |  |   |
    escape the next _/ |  |   +-----------------------------+
         char          |  +-------------+                   |
                       |                |                   |
                  Close string   The  special bash   Reopen string to
                     to sed       newline char to      send to sed
                                    send to sed 
```

*unix.stackexchange.com 上的[这个答案让我找到了这个解决方案。](https://unix.stackexchange.com/a/42328)*

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-05-05T08:34:31.853

有同样的问题并用[brew](http://brew.sh/)解决了：

`brew install gnu-sed`

`gsed YOUR_USUAL_SED_COMMAND`

如果你想使用 sed 命令，那么你可以设置一个别名：

`alias sed=gsed`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T04:23:33.110

OSX`sed`是基于旧版本的，你需要在 sed 的方向上更加直截了当，而且你很幸运，在这种情况下，`sed`它会准确地告诉你该做什么。未经测试，因为我没有 OSX，但请尝试

```
sed '1 i\
VISPATH=/mnt/local/gdrive/public/3DVis

' init.txt >> ~/.bash_profile 
```

通过`i`cmd 输入的内容以空行结束。之后可以遵循其他 sed 指令。注意，字符后没有`\`字符！

另外，@StephenNiedzielski 是对的。使用单引号字符来包装您的 sed 语句。（如果您需要在您的 sed 中进行变量扩展并且可以逃避 的其他用途`$`，那么您也可以使用 dbl-quotes，但不建议将其作为常规做法。

**编辑**

据我所知，您是从命令行执行此操作，而不是在脚本或其他编辑器中执行此操作，我已经测试了上述内容，并且....我只能说来自技术支持的那句著名的行... “这个对我有用”。如果您收到错误消息

```
sed: -e expression #1, char 8: extra characters after command 
```

那么你几乎可以肯定在 . 之后添加了一些字符 `\`。我刚刚测试过，我收到了上面的错误信息。（我使用的是 sed 的 linux 版本，因此错误消息完全相同）。您应该编辑您的问题以包含命令行的精确剪切粘贴和**新**的错误消息。使用卷曲单引号将不起作用。

IHTH

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-22T05:58:03.987

这是我在 OS X 上的解决方法。就我而言，我需要将文本添加到文件中。显然，现代 sed 是这样工作的：

```
sed -i '1i text to prepend' file.txt 
```

但在 OS XI 上必须执行以下操作：

```
sed -i '' '1i\
text to prepend
' file.txt 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-13T04:20:06.153

看起来您复制了富文本。单引号应该是直的而不是卷曲的：

```
sed '1 i VISPATH=/mnt/local/gdrive/public/3DVis' 
```

# javascript - 如何使用div从右向左滑动显示内容

> ID：14846312
> 
> 赞同：1
> 
> 时间：2013-02-13T04:18:24.133
> 
> 标签：javascript, jquery

我看到了一个小提琴。当光标悬停在它上面时，它会从下到上动画。

我怎么能改变它，以便在点击时，它会从右到左动画，然后，内容会被隐藏？当内容被隐藏时，会有一个按钮，我可以单击该按钮再次显示内容。

HTML

```
<html>
<body>
<div class="wrapper">
<div class="inner">
    Sliding div here!! Yay!!
    </div>
    </div>
    <p>Hover over red div please!!</p>
</body>
</html> 
```

CSS

```
.wrapper{
background-color:red;
    width:200px;
    height:200px;
    position:relative;
    overflow:hidden;
    color:white;
}

.inner{
    width:200px;
    height:100px;
    position:absolute;
    background-color:black;
    margin-top:200px;
color:white;
} 
```

jQuery

```
$(document).ready(function(){
var innerHeigth = $(".inner").outerHeight();  
$(".wrapper").hover(function(){        $(".inner").stop().animate({top:-innerHeigth},1000);
//alert(innerHeigth)
},function(){
$(".inner").stop().animate({top:0},1000);

});
}); 
```

这是小提琴[http://jsfiddle.net/qGVfp/](http://jsfiddle.net/qGVfp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:32:55.210

您需要进行 2 项更改。首先调整样式表，使移动的 div 远离左侧而不是底部：

```
.inner{
    width:200px;
    height:100px;
    position:absolute;
    background-color:black;
    left:-200px;
    color:white;
} 
```

然后更改 javascript 以响应点击，基于宽度并修改左侧属性。请注意，有一个切换方法的行为很像悬停，但它已从 jQuery 中删除，因此您必须有一个跟踪状态的布尔值。

```
$(document).ready(function(){
    var width = $(".inner").width();
    var toggle = true;
    $(".wrapper").click(function(){
        if(toggle) {
            $(".inner").stop().animate({left:0},1000);
        } else {
            $(".inner").stop().animate({left:-width},1000);
        }
        toggle = !toggle;
    });
}); 
```

这是一个更新的小提琴：http: [//jsfiddle.net/qGVfp/30/](http://jsfiddle.net/qGVfp/30/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:37:28.047

```
.wrapper2{
    background-color:blue;
    width:400px;
    height:200px;
    position:relative;
    overflow:hidden;
    color:white;
}

.inner2{
    width:200px;
    height:200px;
    position:absolute;
    background-color:black;
    margin-left:400px;
    color:white;
}

$(".wrapper2").hover(function(){    
        $(".inner2").stop().animate({marginLeft:200},1000);
//alert(innerHeigth)
    },function(){
        $(".inner2").stop().animate({marginLeft:400},1000);
    });
}); 
```

[http://jsfiddle.net/bighostkim/vJrJh/](http://jsfiddle.net/bighostkim/vJrJh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:37:53.960

你基本上在那里只需要改变一些事情。

**HTML**

```
<!DOCTYPE html>
<html>
<body>
    <div class="wrapper">   
        <div class="inner">
            Sliding div here!! Yay!!
        </div>
    </div>
    <button id="btn">click</button>
</body>
</html> 
```

**CSS**

```
.wrapper {
    background-color:red;
    width:200px;
    height:200px;
    position:relative;
    overflow:hidden;
    color:white;
}

.inner {
    width:200px;
    height:100px;
    position:absolute;
    background-color:black;
    left:200px;
    color:white;
} 
```

**脚本**

```
var hidden = true;

$(document).ready(function(){
    $("#btn").click(function() { 
        if(hidden) {
            $(".inner").stop().animate({left:0}, 1000);
            hidden = false;
        }
        else {        
            $(".inner").stop().animate({left:200},1000);
            hidden = true;
        }
    });
}); 
```

这是一个展示这个的小提琴：http: [//jsfiddle.net/qGVfp/31/](http://jsfiddle.net/qGVfp/31/)

# jquery - 有没有办法用 jquery 改变选择器的属性和值

> ID：14846320
> 
> 赞同：0
> 
> 时间：2013-02-13T04:18:58.000
> 
> 标签：jquery, html, css

有没有办法完全更改选择器 onclick 的 css 属性及其值？也许这不是必需的。现在我正在使用 jquerymobile，我只用一个 li 选择器和 !important 覆盖了默认的列表视图样式。我有一个图像，用作每个列表视图中包含的按钮。单击它时，我希望能够将一个类附加到列表视图，以便替换我已经使用的样式，以用新样式覆盖默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:26:24.427

`.css()`有 3 个构造函数

```
var appliedStyles = $(selector).css();
$(selector).css("display", "block");
$(selector).css({"display":"block", "margin":"20px", "padding":"5px"}); 
```

将新类添加到选择器

```
$(selector).addClass(className); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:26:35.147

您可以使用 .addClass 添加具有适当样式的类，也可以使用 jquery 的 .css()。

[http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:34:25.897

我认为这就是您要查找的内容，只需将 .examplebutton 替换为按钮上的类， example1 是您要替换的类， example2 是新的类名。

```
<script>
$(document).ready(function() {
$('.examplebutton').click(function() {
$('.example1').removeClass('example1').addClass('example2');            
}); // end click
}); // end ready
</script> 
```

干杯!

# c++ - 我想获得一组唯一的 n*n 数组，这些数组在 c++ 中的随机位置仅包含 0 或 1

> ID：14846323
> 
> 赞同：0
> 
> 时间：2013-02-13T04:19:38.833
> 
> 标签：c++

我想获取一组 n*n 数组，包括 0 或 1

但是，每个元素必须彼此不同。

例如，

```
arr[3][3] = {{0,1,0},
             {1,0,0},
             {1,1,1}}
arr2[3][3] = {{0,1,1},
              {1,1,1},
              {0,0,1}} 
```

像上面一样，我需要唯一的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:23:38.457

对于 N 个元素的数组，取一个 N 位数并将其用作计数器。对于每个 N 位值，使用数组的每个元素中的计数器中的一个位创建一个数组。这将生成 2 ^N`0`个唯一数组（即， s 和s的最大可能数量`1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:56:59.670

您可以利用[`next_permutation`](http://en.cppreference.com/w/cpp/algorithm/next_permutation)这一点。以下为您提供 n 大小的 0 和 1 数组的每种组合：

```
std::vector<int> root(4, 1);
std::vector<std::vector<int>> vec(1, root);

for(auto i = root.begin(); i != root.end(); ++i)
{
    *i = 0;
    do {
        vec.push_back(root);
    } while(std::next_permutation(root.begin(), root.end()));
} 
```

在这里，`n`是 4。但你可以做任何事情。组合包含在`vec`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:04:29.590

如果您的矩阵很大（n >= 12），那么您可以简单地生成一个随机矩阵，并且具有*压倒性*的概率（假设您的 PRNG 很好），您将获得唯一的矩阵。（两个随机 12x12 矩阵相同的几率小于 2^70 分之一，或大约 10^21 分之一）。

在 C++11 中，您可以使用`mt19937`随机数生成器生成大量高质量的随机数：

```
#include <iostream>
#include <random>

main() {
    std::mt19937 generator;
    std::uniform_int_distribution<int> distribution(0,1);
    int n = 12;

    for(int i=0; i<n; i++) {
        for(int j=0; j<n; j++) {
            std::cout << distribution(generator);
        }
        std::cout << std::endl;
    }
} 
```

示例输出：

```
101101101001
001111110111
100110000011
111111001011
101110001000
110001000111
100110010000
101000000011
111101101101
000111011100
110111101011
100100011100 
```

# grails - gsp 邮件插件自动发送

> ID：14846325
> 
> 赞同：0
> 
> 时间：2013-02-13T04:19:41.193
> 
> 标签：grails, controller, grails-plugin, gsp

当我导航到页面时，为什么会自动调用 send() 函数？

我希望能够查看 gsp 页面，填写一些文本字段，然后使用“发送”操作调用提交

这是我的 gsp 文件

```
<%@ page contentType="text/html;charset=UTF-8" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<meta name="layout" content="main"/>
<title>Contact Form</title>
</head>
<body>
<g:form name="contactForm" action = "send">
    <g:render template = "contactFormFields"/>
    <g:actionSubmit value = "submit" action = "send"/>
</g:form>
</body>
</html> 
```

这是contactFormFields 模板

```
<g:select name = 'subject' from = '${EmailService.options}' noSelection='Topic'/>

Contact Name: <g:textField name = "contact"/>
Contact Number: <g:textField name = "phone"/>
Contact Email: <g:textField name = "email"/>
Aditional Information:
<g:textArea name = "information" rows="5" cols="40"/> 
```

电子邮件服务控制器

```
class EmailServiceController {

    def defaultAction = "contactService"

    def send() {
        sendMail(){
            to "mygroovytest@gmail.com"
            from params.email
            subject params.subject
            body params.information
        }
    }
} 
```

领域类

```
class EmailService {

    static constraints = {
        def options = new ArrayList()
        options.push("Qestions about service")
        options.push("Feedback on performed service")
        options.push("Other")
        options.push("Why am I doing this")
    }
} 
```

调用服务的 gsp

```
<div class="banner">
  <h1>My HVAC company</h1>
  <a href = "javascript: contactPop()"> Contact me today!</a>
  <a href = "services">Services</a>
  <a href = "emailService">Have Me Contact You!</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:16:22.457

您没有`contactService`操作，因此当您链接到没有操作名称的控制器时，`EmailServiceController`它可能被视为默认操作。`send()`尝试添加一个空`contactService`动作

```
def contactService() { } 
```

# c# - 从 C# 中的 json 响应获取对象属性值

> ID：14846327
> 
> 赞同：0
> 
> 时间：2013-02-13T04:19:52.067
> 
> 标签：c#, object, properties

我正在尝试访问“成功”属性以获取其值。现在，它正在说“对象引用未设置为对象的实例”。我如何获取字符串值？

> { "success": true, "next": "/locations", "amount": 325, "keys": 3, "credits": 6185}

```
 private static void postComplete(object sender, UploadStringCompletedEventArgs e)
    {
        object result = JsonConvert.DeserializeObject<object>(e.Result);
        try{
            PropertyInfo pi = result.GetType().GetProperty("success");
            String success = (String)(pi.GetValue(result, null));
            Console.Write(success);
        } 
        catch (Exception f) {
            Console.Write(f);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:36:55.277

您将其反序列化为直接`object`..`object`没有名为`success`.

另一种方法是键入一个代表这个的类：

```
class ExampleClass {
    public bool success { get; set; }
    public string next { get; set; }
    public int amount { get; set; }
    public int keys { get; set; }
    public int credits { get; set; }
} 
```

然后像这样调用它：

```
object result = JsonConvert.DeserializeObject<ExampleClass>(e.Result);
//                                            ^^^^^^^^^^^^
//                                                This
    try{
        PropertyInfo pi = result.GetType().GetProperty("success");
        bool success = (bool)(pi.GetValue(result, null));
        Console.Write(success); // True
    } 
    catch (Exception f) {
        Console.Write(f);
    } 
```

甚至更好..完全删除它：

```
ExampleClass example = JsonConvert.DeserializeObject<ExampleClass>(e.Result);
Console.WriteLine(example.success); // True 
```

# python - 系统找不到cmd中指定的路径

> ID：14846333
> 
> 赞同：0
> 
> 时间：2013-02-13T04:20:14.147
> 
> 标签：python, windows-7

当我打开命令提示符时，

默认路径是 C:\Users\acer> 所以我想将路径更改为 C:\Python27

方法如下我输入 cd.. 2 次.. 然后我输入 cd.. Python27 作为我位于 C:\ 的 Python27 文件夹

但是，我收到此消息“系统找不到指定的路径”

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:30:53.370

不需要`cd ..`胡说八道，去吧`cd C:/Python27`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:25:34.673

代替

光盘.. Python27

你需要输入

光盘\python27

# algorithm - 寻找最小/最大权重斯坦纳树

> ID：14846335
> 
> 赞同：1
> 
> 时间：2013-02-13T04:20:29.377
> 
> 标签：algorithm, graph, graph-algorithm, minimum-spanning-tree

我在 reddit 上问过这个问题，但还没有找到解决方案。由于我的许多搜索都将我带到了 Stack Overflow，因此我决定尝试一下。这是我的问题的简单表述：

给定一个加权无向图 G(V,E,w) 和 G 中顶点 S 的子集，找到跨越 S 的最小/最大权重树。不允许添加顶点。基本模型的扩展是添加权重为 0 的边和必须排除的顶点。这似乎类似于这里提出的问题：

[找到所选顶点的最小生成树的算法](https://stackoverflow.com/questions/13146710/algorithm-to-find-minimum-spanning-tree-of-chosen-vertices)

还可以更深入地了解边缘可以采用的值。每条边实际上是一个相关概率，我可以用几种方式对其进行编码，所以我想问图表的主要问题是：

1.  给定 k 个必须连接的顶点，连接它们的顶部 X 最小/最大生成树是什么，它们通过哪些顶点？据我了解，这与询问图表连接所有 k 个顶点的最高概率是多少是同一个问题。
2.  越来越模糊，是否有一种合乎逻辑的方式来集群节点？

至于实现，我安装了 boost 库，一旦我让框架解决了这个问题，我就可以处理如何多线程处理它（如果合适的话），使用什么样的图形，以及如何存储/缓存数据，因为顶点和边的数量将非常大。

**更新** 看看我要解决的问题，它是 NP-complete 是有道理的。我试图解决的现实世界问题涉及医学诊断；特别是当医学界正在考虑一个特定想法的问题时，他们需要退后一步，重新考虑他们是如何到达那里的。我想要从我试图设计的程序中得到的是：

*   鉴于多种情况、测试、症状、年龄、性别、季节、确诊诊断、时间线，您如何将它们联系起来？触及了哪些细胞/组织/器官/系统？他们甚至有关系吗？
*   除了条件/症状可以属于的已定义组之外，有没有办法对条件/症状进行逻辑分组？

**例如** 流感样症状、红眼、早期肺炎和一些糖尿病症状。有没有办法把所有的症状联系起来？是否可以进行一些测试以使其更容易确定？涉及哪些系统？

尝试将其映射到一个图表或几个图表，并使用概率作为不同症状/条件之间的相关性似乎很自然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:07:24.857

我已经看到了主要基于贝叶斯推理和模糊逻辑的问题模型。贝叶斯推理网络表达了因果关系，例如吸烟和肺癌。[在这里](http://www.autonlab.org/tutorials/bayesinf05.pdf)查看快速教程。您可以将模糊逻辑应用于该模型，以尝试考虑现实生活中的可变性（因为并非每个人都会患肺癌）。

# c# - 通过 System.Diagnostics.Process 安装在 32 位/XP 中不起作用？

> ID：14846336
> 
> 赞同：0
> 
> 时间：2013-02-13T04:20:34.923
> 
> 标签：c#, command-line, process

我有调用 System.Diagnostics.Process 的 ac# exe 来在 cmd.exe 中运行一些命令，被动地安装几个安装程序。我一直在我的机器上测试它（64 位 win8，它工作得很好，但是当我在 32 位版本的 Windows XP 上运行 exe，程序只是跳过进程部分。没有抛出错误，它只是忽略它们。这是我的代码：

```
System.Diagnostics.ProcessStartInfo psi = new System.Diagnostics.ProcessStartInfo("CMD.exe", @"/C [command stuff]}");
psi.CreateNoWindow = true;     
psi.UseShellExecute = false;   
System.Diagnostics.Process diag = System.Diagnostics.Process.Start(psi);
diag.WaitForExit();
diag.Close(); 
```

这里可能有什么交易？我再一次没有错误，它只是忽略它。这很有趣，因为我可以在那里完成所有这些，只需运行 date 作为命令，它工作正常，但它不会运行安装所需的 msi 和 exe 文件。我找不到任何关于它在 64 位但不是 32 位工作的信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:36:51.840

所以我发现我的问题是什么。在运行 .msi 进行安装之前，我使用语法 C:/folder/setup.msi 更改了目录。这在我的电脑上工作正常，但在 XP 上没有做任何事情。事实证明它不知道如何处理正斜杠。我所要做的就是将其更改为 C:\folder\setup.msi，它工作正常。我觉得自己像个白痴，希望这对某人有所帮助，尽管哈哈。

# c - zint 条码库中缺少 png.h 头文件：

> ID：14846339
> 
> 赞同：0
> 
> 时间：2013-02-13T04:21:07.947
> 
> 标签：c, barcode

我目前正在使用 zint 条形码库在我的应用程序中生成条形码。它工作得很好，并以 .txt、.eps、.svg 格式生成。它还支持“.png”格式，但问题是由于缺少头文件“png.h”，我无法生成“png”格式的条形码。我正在使用的 zint 版本是 2.4.2 在这方面有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:28:07.000

你在什么平台上开发？听起来您需要安装 PNG 开发库。例如，如果你在 Ubuntu 上，“apt-get install libpng-dev”。

# jquery - jQuery Deferred - 等待动态异步请求完成，即使有些失败

> ID：14846340
> 
> 赞同：4
> 
> 时间：2013-02-13T04:21:11.903
> 
> 标签：jquery, asynchronous, jquery-deferred

我收到了一个动态异步请求（对于我使用 ajax 的 jsfiddle），无论成功还是失败，我都需要等待，这意味着即使某些请求失败，我只需要知道所有进程都已完成。

//动态：在我的情况下，这是由 ajax 请求产生的，因此后续异步请求的数量是灵活的

所以我最初使用了这段代码：

```
 $.when.apply($,deferreds).done(function() {
        $("div").append("<p>All done!</p>");
    }).fail(function(){
        $("div").append("<p>Something failed!</p>");
    }); 
```

但是在其中一个延迟失败的情况下，将立即调用失败回调。我尝试将其更改为[always()](http://api.jquery.com/deferred.always/)但结果是：

**Uncaught TypeError: Object # has no method 'always'**

那么我怎样才能为此实现一个 always() 类型的解决方案呢？

[小提琴](http://jsfiddle.net/marlberm2014/ekGeA/2/)

我的原始来源：[jQuery Deferred - 等待多个 AJAX 请求完成](https://stackoverflow.com/questions/6538470/jquery-deferred-waiting-for-multiple-ajax-requests-to-finish)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T09:54:36.500

If you just want to wait a list of `$.Deferred` to end regardless they are `rejected` or `resolved`, you have the solution in my answer in your original source [jQuery Deferred - waiting for multiple AJAX requests to finish](https://stackoverflow.com/questions/6538470/jquery-deferred-waiting-for-multiple-ajax-requests-to-finish/13627555#13627555) :

```
$.when.apply($, $.map(deferreds, function(d) {
    var wrapDeferred = $.Deferred();
    // you can add .done and .fail if you want to keep track of each results individualy
    d.always(function() { wrapDeferred.resolve(); });
    return wrapDeferred.promise();
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:34:50.613

好的，就像[凯文 B](https://stackoverflow.com/users/400654/kevin-b)建议的那样。我使用了一个自定义延迟，无论异步请求的结果如何，它都会被解决。

```
var deferreds = $.map(i, function (count, index){
    var waitingProcess = new $.Deferred(); //Here is the custom deferred
    if(count == 7) {
        $.Deferred().fail(function(){
            $("div").append("<p>Task #" + count + " failed.");
            waitingProcess.resolve(); //resolve it no matter the outcome
        }).reject();
    }else{
        $.post('/echo/html/', {
            html: "<p>Task #" + count + " complete.",
            delay: count
        }).success(function(data) {
            $("div").append(data);
            waitingProcess.resolve(); //resolve it no matter the outcome
        });
    }
    return waitingProcess.promise();
}); 
```

[小提琴](http://jsfiddle.net/marlberm2014/ekGeA/4/)

# php - Laravel：没有密码的登录用户

> ID：14846350
> 
> 赞同：2
> 
> 时间：2013-02-13T04:22:41.910
> 
> 标签：php, facebook, laravel, laravel-3

我是 Laravel 的新手，它看起来像一个不错的 PHP 框架。通过指南和各种教程，我知道如何使用 Auth 类登录用户。但是，Auth 类需要用户名和密码才能登录用户。

现在，如果我使用 Facebook Connect，在成功通过 facebook 身份验证后，我可能能够检索与我将保存在数据库中的 facebook ID 对应的用户详细信息。但是，对于 facebook 用户，不会在数据库中保存密码。那么如何使用 Auth 类登录用户呢？

在 Codeigniter 中，我将会话数据设置如下：

```
$userdata = array(
    'logged_in' => true,
    'user_id' => $user_id
);
$this->session->set_userdata($userdata); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:26:43.960

这是如何执行此操作的[指南，还有一个](http://stephenradford.me/blog#/facebook-login-in-laravel)[捆绑包](http://bundles.laravel.com/bundle/oneauth)，可让您将用户与更多 oauth api 连接起来

# ios - 更快地从 Web 服务加载多个图像

> ID：14846353
> 
> 赞同：0
> 
> 时间：2013-02-13T04:22:54.733
> 
> 标签：ios, nsurlrequest, nsurlcache

我想从 JSON 网络服务加载多个图像到我的应用程序。这些图像用作我的应用程序中“商店”的缩略图。因此，当用户单击按钮转到“商店”时，正在发出请求。每次用户单击按钮时都会重复此请求。

现在这里没有问题，但是当JSON中的数据成倍增加时，问题就出现了。之前，我们只加载 5 张图像。现在，我们正在加载至少 18 张图像。当图像乘以 100 或更多时，这些可能会造成真正的问题。

我正在考虑使用`NSURLCache`缓存图像，但我怎么知道图像是否有更新？假设添加了新图像，或者不再使用当前图像？谁能给我任何关于解决此问题的最佳方法的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:00:55.080

[您可以使用来自https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)的 SDWebImage 从 Web 服务加载多个图像 阅读**如何**在下面的指令中使用它

*   您需要首先右键单击您的项目名称：-> 将文件添加到您的项目-> 选择 SDWebImageproject 并添加它们

注意：- 请不要检查复制选项

*   现在单击您的 xcode 中的项目名称，以构建阶段：-> 目标依赖项：-> 单击 + 按钮并添加 SDWebimage ARC

*   现在选择链接二进制库单击 + 按钮添加 libSDWebimageARC.a 并再次单击 + 并添加 imageIO.framework 并添加 libxml2.dylib 就是这样

*   去构建设置：->其他链接标志：->添加-ObjC

*   和标题搜索路径添加这三项

    1 /usr/include/libxml2

    2 "$(OBJROOT)/UninstalledProducts/include"

    3 "$(TARGET_BUILD_DIR)/usr/local/lib/include"

你可以像这样实现代码：- `#import <SDWebImage/UIImageView+WebCache.h>`

```
imageView = [[UIImageView alloc] init];

            UIActivityIndicatorView *activityIndicator = [[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
            activityIndicator.hidesWhenStopped = YES;
            activityIndicator.hidden = NO;
            [activityIndicator startAnimating];

            [imageView setImageWithURL:[NSURL URLWithString:strUrlSting]
                      placeholderImage:nil options:SDWebImageProgressiveDownload
                               success:^(UIImage *image) { [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }
                               failure:^(NSError *error) {  [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }];

            [imageView addSubview:activityIndicator];

            imageView.contentMode = UIViewContentModeScaleAspectFit;
            imageView.clipsToBounds = YES;
            imageView.tag = 1;
            imageView.backgroundColor = [UIColor blackColor]; 
```

现在构建和运行它的工作就像顺利欢呼.... :)

# d3.js - 如何通过模拟同步进行 d3 更新

> ID：14846354
> 
> 赞同：1
> 
> 时间：2013-02-13T04:23:00.133
> 
> 标签：d3.js

我正在使用 d3 编写模拟演示。我想展示解决方案状态的演变。

如果我将 d3 渲染嵌入到模拟循环中，那么浏览器直到最后都不会显示任何内容。应该很忙吧

我想要实现的是在主循环中进行一些计算，一些 d3 更新，然后等待所有转换完成。

由于转换是异步的，我无法找到等待它们的方法。

它可以使用 setInterval 来运行主循环，有点，但不是很好。

是否有一种“通常”的方式来实现使用 d3 转换锁定步进计算的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:54:34.553

是的，就像你说的那样，如果你的模拟是同步运行的（例如在一个单独的 for 循环中），那么浏览器永远没有机会呈现中间状态。

使用 setInteval 实际上是一个合理的解决方案，但您必须确保间隔至少与最长（基于 d3）的转换一样长。

但听起来你真正想要的是通过回调或事件确切地知道转换何时完成，然后调用模拟的 step 函数来推进状态。在这种情况下，请在此处阅读：[Invoke a callback at the end of a transition](https://stackoverflow.com/questions/10692100/invoke-a-callback-at-the-end-of-a-transition)。

虽然我从未尝试过这种方法，但我猜如果你正在转换多个元素，那么转换`end`事件将被多次调用——每个转换元素一次。在这种情况下，您必须做一些工作才能将它们合并为一个事件。您可能必须“计算”`end`事件被调用的次数，并且仅当计数与预期的元素数量匹配时才对其进行操作。或者，您可以编写条件代码以仅绑定到单个元素的转换——转换最后开始或预计最后结束的元素。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:17:23.900

使用 HTML5，您还可以采用不同的方法来解决此问题：让模拟发生在单独的线程`Web Worker`中，并在每次迭代时将结果传递回主显示线程。

[http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

事实上，你的应用程序几乎是完美的。

# java - 如何分析负载下的性能？

> ID：14846356
> 
> 赞同：1
> 
> 时间：2013-02-13T04:23:21.283
> 
> 标签：java, performance, web-applications, profiling, thread-dump

我有一个 Web 服务器，它有一些请求在重负载下表现不佳。我尝试使用常规的久经考验的技术，但它们存在各种问题。

**尝试过的技术**

1.  Yourkit 中的采样/跟踪分析
    *   我无法在负载下使用分析器，因为只有少数特定请求表现不佳
    *   仅测试单个请求不会重现性能问题
2.  线程转储
    *   我尝试以固定的时间间隔进行线程转储，但是如果时间间隔很大，则很难分辨出实际上慢的是什么，如果时间间隔很短，则会对服务器的性能特性影响太大

当服务器处于负载状态时，如何分析**单个请求的性能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T15:32:08.370

看看[http://www.spf4j.org](http://www.spf4j.org)，我使用这个库在 java 中以最小的开销进行连续分析......有 api 来监控代码的执行，对性能的影响最小，我最近添加了新的应用程序配置文件的可视化：http: [//blogs.zoltran.com](http://blogs.zoltran.com) 从主干获取最新版本并试用！

干杯

# window - 如何在 Smart GWT 中删除窗口边框

> ID：14846361
> 
> 赞同：1
> 
> 时间：2013-02-13T04:23:45.693
> 
> 标签：window, smartgwt

我正在使用智能 GWT 3.1。窗口没有标题。因此，它会留下不均匀的边界。我怎样才能摆脱边界？或者使所有尺寸的边框均匀？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T05:50:46.307

以下几行将解决您的问题：

```
setShowHeader(false);
setShowStatusBar(false);
setLayoutMargin(0); // to remove 4px gray border
setAttribute("styleName", "", true); // to remove 1px (rounded) outer border
setBodyStyle(""); // to remove 1px body border
setBodyColor(null); // to make background transparent 
```

祝你今天过得愉快 ;-）

# objective-c - 单击项目时关闭 NSTokenField 完成列表？

> ID：14846362
> 
> 赞同：5
> 
> 时间：2013-02-13T04:24:08.167
> 
> 标签：objective-c, macos, cocoa, nstokenfield

我的应用程序中有一个 NSTokenField 。当我单击完成列表中的一个建议时，我希望列表消失并完成令牌（如邮件）但是，这似乎没有发生——单击一个建议只是附加了其余的字符串并且列表不会消失。

如果我按下 Return 键，完成列表就会消失，但我也希望通过单击建议来消除它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T06:33:52.580

我找到了解决这个问题的方法，虽然还不完美，但我希望我能尽快解决我遇到的最后一个问题。

我正在使用 ruby​​motion，即使我可以翻译`Objective-C`，`Ruby`我也无法做相反的事情，所以我的答案将是`Ruby`。随意编辑我的答案以添加相应的`Objective-C`代码。

在我的委托中`NSTokenField`，我使用了[controlTextDidChange](https://developer.apple.com/library/mac/#documentation/cocoa/reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html)方法，`NSControl`只要我在令牌字段中写入字符，就会调用该方法。在这种方法中，我检查是否有一个`NSLeftMouseUp`事件被触发，如果是这样，我模拟点击`Return`（从另一个[SO 问题](https://stackoverflow.com/questions/2008126/cgeventpost-possible-bug-when-simulating-keyboard-events)中学习）。就是这样。

这是我的`Ruby`代码：

```
def controlTextDidChange(aNotification)
  application = NSApplication.sharedApplication
  event = application.currentEvent
  if event.type == NSLeftMouseUp
    e1 = CGEventCreateKeyboardEvent(nil, 0x24, true)
    CGEventPost(KCGSessionEventTap, e1)
  end
end 
```

但就像我告诉你的那样，它还不完美：我的问题是，如果我有一个包含 3 个项目的完成列表，默认情况下会选择其中一个，比如说第一个。在这种情况下，如果我单击第二个或第三个项目，我的解决方案将按预期工作，但我必须双击第一个项目才能使其工作。

但是，这是一个好的开始，我希望它会有所帮助！

**编辑**

为了解决我遇到的最后一个问题，我关闭了自动完成功能，只显示了建议框。为此，我在`tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:`方法中添加了这一行：

```
selectedIndex[0] = -1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T10:48:18.673

感谢**@siekfried**！

```
- (void)controlTextDidChange:(NSNotification *)aNotification;
{
    if([[NSApplication sharedApplication]currentEvent].type == NSLeftMouseUp)
    {
        CGEventPost(kCGSessionEventTap, CGEventCreateKeyboardEvent(nil, 0x24, true));
    }
} 
```

效果很好；）

为避免第一个元素自动选择，请将其添加到您的委托中：

```
-(NSArray *)tokenField:(NSTokenField *)tokenField completionsForSubstring:(NSString *)substring indexOfToken:(NSInteger)tokenIndex indexOfSelectedItem:(NSInteger *)selectedIndex
{
    *selectedIndex = -1;
...
...
} 
```

# php - 220 MB 大尺寸的 xml 插入或通过 mysql 和 php 更新哪个是最好的方法？

> ID：14846365
> 
> 赞同：-3
> 
> 时间：2013-02-13T04:24:25.397
> 
> 标签：php, mysql, xml

我的 xml 文件大小是 600 mb 我如何插入到 mysql 表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:55:43.660

```
 $block_size=100;
 $N=count($xml->product);
 $begin_block=0;
 while($begin_block<$N){
    try
    {
       mysql_query("BEGIN", $conn);
       $end_block=min($N, $begin_block+$block_size);

       for($j=$begin_block;$j<$end_block;$j++) {
          //check & insert into linkshareproducts ... $xml->product[$j]
       }
       mysql_query('COMMIT', $conn);
    }
    catch(Exception $e)
    {
       mysql_query('ROLLBACK', $conn);
    }
    $begin_block=$end_block;
 } 
```

# c++ - OpenSSL 私钥读取错误（PEM_read_bio_RSAPrivateKey）

> ID：14846366
> 
> 赞同：0
> 
> 时间：2013-02-13T04:24:27.877
> 
> 标签：c++, visual-c++, openssl

我正在尝试通过 openSSL 和 VC++ 读取 PrivateKey，我收到此错误“ `OpenSSL error: error:0906D064:lib(9):func(109):reason(100)`”..

我的私钥：

```
-----BEGIN RSA PRIVATE KEY-----
MIICXQIBAAKBgQCnHVS+q65lvG2xocltTYgPGt9FaysGZTrcOwHedo8tX1dyPrcx
2I8x/cvB9nmfdAkt65aGFAlBZrofbPCr2Mq4wDdvIZ31KSuyMQI4T68ylWNT89Ge
wQF6AOkpY1E2bW+oDXc+MpbtpYXY1rUJAS/Abt5vXi7gwKN9FSJ3mm9bjQIDAQAB
AoGACXuxnmxRpjZOJ0FeE9TNfsXwm5jcRS2jbHHwxjYGI/YAGVyTusFmRtj3Iheh
iTnld3SiAxPJ/qscrsHY2nef8Up60V7RF8bs+sbICnHbdz8ZoKxN9dEFCwJkIl55
dv0GHjox6UgWUUkUAiHCM2EgG5eOOQ8PsuXY8LpPWLvfuyUCQQDbkFG9y/Q/3lmb
CdYfBpsP3qvma+fdgCw9lRXTowhu0rKen/CC3rFkHMeHfSW9GHuR8QbPYdVA6d9H
Y7KxYa7LAkEAwtjTEo/zAVexH/+YgiqL6w89BHlTAmwIEkXpqtAnE86kDDCekYdE
fRIdGK1zHDOUddMAhwoJQjJzy/NJreQ8BwJBAMoJ6U3vKZjD8Ex8Jq5yE6nsyt3D
mZ73XL5mO6l9sjrYY0kX/+dNKIro+KoyfNGef8bxtcSLUALlsnIsybf0HTUCQQCR
DD4cvGJHJpOp4WkTxT6Bjsd6lCKyU9+yUq8/RFNC0HqYxHzWkx7uCFT2sPBXFyK2
j4v9+v+ncs13DzZTJ+tzAkBI6UWHtsn839nrAT32M8PEPF/TuDmqebMhFOaTl4an
W0Jr8w8iGk2gvQS2cXEPNh4XT9AgcTKDQkhui4RgxK4F
-----END RSA PRIVATE KEY----- 
```

我的代码：

```
#include <openssl/rand.h>
#include <openssl/rsa.h>
#include <openssl/engine.h>
#include <openssl/sha.h>

#include <openssl/hmac.h>
#include <openssl/evp.h>
#include <openssl/bio.h>
#include <openssl/pem.h>
#include <openssl/buffer.h>
#include <openssl/err.h>
#include <openssl/x509.h>

int main(int argc, char** argv)
{
    BIO *mem = NULL; 
    RSA *rsa_private = NULL;
    char *private_key = "-----BEGIN RSA PRIVATE KEY-----\nMIICXQIBAAKBgQCnHVS+q65lvG2xocltTYgPGt9FaysGZTrcOwHedo8tX1dyPrcx2I8x/cvB9nmfdAkt65aGFAlBZrofbPCr2Mq4wDdvIZ31KSuyMQI4T68ylWNT89GewQF6AOkpY1E2bW+oDXc+MpbtpYXY1rUJAS/Abt5vXi7gwKN9FSJ3mm9bjQIDAQABAoGACXuxnmxRpjZOJ0FeE9TNfsXwm5jcRS2jbHHwxjYGI/YAGVyTusFmRtj3IhehiTnld3SiAxPJ/qscrsHY2nef8Up60V7RF8bs+sbICnHbdz8ZoKxN9dEFCwJkIl55dv0GHjox6UgWUUkUAiHCM2EgG5eOOQ8PsuXY8LpPWLvfuyUCQQDbkFG9y/Q/3lmbCdYfBpsP3qvma+fdgCw9lRXTowhu0rKen/CC3rFkHMeHfSW9GHuR8QbPYdVA6d9HY7KxYa7LAkEAwtjTEo/zAVexH/+YgiqL6w89BHlTAmwIEkXpqtAnE86kDDCekYdEfRIdGK1zHDOUddMAhwoJQjJzy/NJreQ8BwJBAMoJ6U3vKZjD8Ex8Jq5yE6nsyt3DmZ73XL5mO6l9sjrYY0kX/+dNKIro+KoyfNGef8bxtcSLUALlsnIsybf0HTUCQQCRDD4cvGJHJpOp4WkTxT6Bjsd6lCKyU9+yUq8/RFNC0HqYxHzWkx7uCFT2sPBXFyK2j4v9+v+ncs13DzZTJ+tzAkBI6UWHtsn839nrAT32M8PEPF/TuDmqebMhFOaTl4anW0Jr8w8iGk2gvQS2cXEPNh4XT9AgcTKDQkhui4RgxK4F\n-----END RSA PRIVATE KEY-----";

    mem = BIO_new_mem_buf(private_key, strlen(private_key));
    if (mem == NULL) 
    { 
        char buffer[120]; 
        ERR_error_string(ERR_get_error(), buffer); 
        fprintf(stderr, "OpenSSL error: %s", buffer);
        exit(0);
    } 

    rsa_private = PEM_read_bio_RSAPrivateKey(mem, NULL, NULL, NULL); 
    BIO_free (mem); 
    if (rsa_private == NULL) 
    { 
        char buffer[120]; 
        ERR_error_string(ERR_get_error(), buffer); 
        fprintf(stderr, "OpenSSL error: %s", buffer);
        exit(0);
    } 

    return(0);

} 
```

我正在使用 WinXP-SP2 和 MS-Visual Studio 2008 .. 我在这一行出现错误：`rsa_private = PEM_read_bio_RSAPrivateKey(mem, NULL, NULL, NULL);` 错误：（`OpenSSL error: error:0906D064:lib(9):func(109):reason(100)`）

任何人都可以帮助我，我应该如何阅读这个私有密钥？？？？

谢谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T12:03:12.143

变量`private_key`初始化错误。您需要`\n`在私钥的每一行之后添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-07T16:24:26.637

这个对我有用

```
unsigned char *rsaPrivateKeyChar = (unsigned char *)key.c_str();
// write char array to BIO
BIO *rsaPrivateBIO = BIO_new_mem_buf(rsaPrivateKeyChar, -1);
// create a RSA object from private key char array
RSA *rsaPrivateKey = NULL;
PEM_read_bio_RSAPrivateKey(rsaPrivateBIO, &rsaPrivateKey, NULL, NULL);
return rsaPrivateKey; 
```

# jquery - 使用 Bookmarklet 覆盖 jQuery 灯箱

> ID：14846367
> 
> 赞同：0
> 
> 时间：2013-02-13T04:24:32.867
> 
> 标签：jquery, lightbox, bookmarklet

希望创建一个让用户存储有用信息的书签。是否可以创建一个在点击时加载 jQuery 灯箱的书签？我可以让它在我自己的域上运行，但是在我无法控制的不同域上时灯箱不会加载。

有没有解决的办法？

谢谢！

# linux - 如何在 Linux 中创建 Alt+Tab 友好的全屏程序（如游戏）？

> ID：14846370
> 
> 赞同：7
> 
> 时间：2013-02-13T04:25:00.413
> 
> 标签：linux, sdl, fullscreen, x11, screen-grab

我想创建一个应用程序，我在窗口上绘制，无论是窗口还是全屏，我抓住鼠标但**不**拦截*任何*WM 键盘快捷键，如 Alt+Tab，并且每当用户输入/离开时我也需要得到通知重点。

Google Chrome、Firefox 或 gnome-terminal 等常见应用程序可以很好地处理这个问题（使用 F11 全屏，但仍然有 Alt+Tab），但它们不会抓住鼠标。

SDL 对这个用例的处理很差是出了名的：SDL_WM_GrabInput 抓取鼠标但也拦截 WM 快捷方式；并且 SDL_FULLSCREEN 本身似乎有某种自动抓取（不要问我为什么）。

一个解决方案可能是自己为 Alt+Tab 编写代码，但这很糟糕（并且对其他 WM 快捷方式没有帮助，例如更改到另一个工作区）。

另一种解决方案是不调用 SDL_WM_GrabInput，而是假装抓取：只需隐藏鼠标指针（使用 SDL_ShowCursor）并在用户移动时将其移回中心。这是丑陋的，但在实践中有效 - 当然除了 SDL_FULLSCREEN，因为它会自动抓取（与理智的实现不同）。支持全屏的 SDL 解决方案就是这样，但这仍然不是我想要的。我不想让黑客启用和禁用抓取，我想抓住鼠标而不是抓住键盘。

所以我对 SDL 很生气，想看看替代品。我*想*使用 SDL，但这不是必需的。

[这个问题](https://stackoverflow.com/questions/10916997/alt-tab-from-fullscreen-sdl)似乎在指出，SDL 实际上所做的是使用 XGrabKeyboard。通过阅读手册页，我并不清楚您是否可以在不抓住键盘的情况下抓住鼠标（我自己从未使用过 Xlib）。

我知道如何使用 GTK（即 Alt+Tab 友好的 gnome-terminal 品种）制作“假全屏”。我想这样做，再加上鼠标隐藏并将其移回中心（“假抓取”）*可以*做到这一点，但这感觉就像太多的胶带。必须有更简单的方法。（此外，我不想将 GTK 添加为依赖项；但我也不确定进行原始 Xlib 调用是否是个好主意）。

对此有什么好的解决方案？

我需要一个 Linux/X11 解决方案，但它最好是跨平台的 - 我知道这可以在 Windows 上顺利解决，所以也许有一个库可以做到这一点。（另外，我用 OpenGL 渲染，但这无关紧要）

PS：也许我对这个问题的理解很差，我没有问*正确的问题*，所以请随时指出我没有考虑过的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T04:57:14.990

这些天来，我一直在使用 Gtk 和 GtkGLExt 在 Linux 上进行游戏（例如，我的 Ludum Dare 条目）。这里 ( [gtk.c Gist](https://gist.github.com/depp/4942294) ) 是我的代码，我在 FreeBSD 许可下发布了它。您可以看到我为调试窗口状态更改而注释掉的代码。我应该提到，这是我用于 Ludum Dare 之类的更大框架的一部分，我更喜欢它而不是 SDL，原因与您提到的相同：生成的应用程序更符合用户对本地应用程序的期望他们的平台（Linux、OS X、Windows）。不用说，走这条路需要做很多工作。

然而，原始的 X11 编程确实是一团糟。我估计我需要几个星期的扎实的编程和阅读文档才能将我的 Gtk 代码转换为 X11 代码；这对我来说不值得，但你可能会做出不同的决定。（很多小时只是为了消除每个人都安装的依赖项！）Gtk 依赖项实际上并没有那么离谱，它可能已经加载到内存中，并且 2.x 的 ABI 非常稳定，因此不会损害二进制兼容性.

X11 游戏编程的一个大问题是事件处理一团糟。您不能轻松地轮询事件。Xlib 接口是阻塞的，因此您必须使用神秘的函数调用序列来读取数据，检查是否有未决事件，然后仅从队列中读取事件（如果存在）（否则您的应用程序将阻塞直到事件出现）。xcb 库是 Xlib 的替代品，它在所有方面都更好，并且支持非阻塞接口，但它不能很好地与 OpenGL 配合使用。所以你可以尝试将两者混合，或者你可以只使用 Gtk。

让我给你一段全屏的 Gtk 代码：

```
static void toggle_fullscreen()
{
    if (sg_gtk_status & SG_STATUS_VISIBLE) {
        if (sg_gtk_status & SG_STATUS_FULLSCREEN)
            gtk_window_unfullscreen(sg_window);
        else
            gtk_window_fullscreen(sg_window);
    }
} 
```

想象一下 X11 界面需要做多少工作：确定屏幕的大小（可能不止一个！），调整窗口大小，更改顺序，使其位于其他所有内容之上，更改装饰，然后在用户切换虚拟桌面时智能响应。呸！（实际上，这描述了我的代码在 OS X 上的工作方式，但 API 更好。）

不仅如此，如果您使用 X11，您还必须学习如何以预期的方式对用户做出反应。X11 来自 1980 年代。相比之下，Gtk 为您的应用程序提供了来自 Gtk 的 UI 设计人员的一系列适当的默认值。UI设计是工作。请记住：您可以将 X11 与 Gtk 混合使用。

**总结：** X11 编程是为有大量空闲时间的程序员准备的。

**Notes:** The GtkGLExt adds an annoying linker flag, `-Wl,--export-dynamic`. My build scripts remove the flag from `pkg-config`'s output.

**X11 experiences:** I think I spent about a week trying to get the whole thing working in X11, and I ended up following lots of dead ends in the process. Learn from my failures.

# c# - 在 WCF Azure 服务总线中动态分配 json 响应内容类型

> ID：14846372
> 
> 赞同：9
> 
> 时间：2013-02-13T04:25:22.580
> 
> 标签：c#, wcf, azure, wcf-rest, azureservicebus

我正在编写一个使用 Microsoft.ServiceBus.dll 1.0.0.0（.NET 3.5 版本）的 POC 应用程序。

我的 WCF 合同和服务如下所示：

```
[ServiceContract(Name="MyServiceContract", Namespace = "http://mydomain.com/")]
internal interface IServiceContract
{
    [WebInvoke(Method = "POST", UriTemplate = "/DoOperation")]
    [OperationContract]
    Stream RelayRequest(Stream requestBody);
}

[ServiceBehavior(Name = "Service1", Namespace = "http://mydomain.com/Service1/", InstanceContextMode = InstanceContextMode.Single)]
internal class Service1 : IServiceContract
{
    Stream RelayRequest(Stream requestBody)
    {
        var contents = GetJsonResponse();
        var responseStream = new MemoryStream();
        var streamWriter = new StreamWriter(responseStream);
        streamWriter.AutoFlush = true;
        var writer = new JsonTextWriter(streamWriter);
        var serializer = new JsonSerializer();
        serializer.Serialize(responseStream, contents);

        responseStream.Position = 0 // reset the position of the stream so that it's contents will be read from the beginning.

        //Problem Line:
        WebOperationContext.OutgoingResponse.ContentType = "application/json";
        return responseStream;
    }
} 
```

监听端点配置为使用 WebHttpRelayBinding：

*   安全模式：传输
*   传输模式：流式传输

当我尝试将传出响应的 ContentType 分配给“application/json”时，不会发生错误，但调用请求返回状态码 504（网关超时）。

如果我将 ContentType 更改为“text/javascript”，则调用请求返回 200（OK）。

需要注意的一些事项：

*   内容类型直到运行时才知道，因此必须动态分配。
*   流的内容是纯的 - 100% 有效 - json。
*   接受和返回流的目的是让我们可以接受流式请求并将数据流式传输到客户端。
    *   每个请求/响应可以包含一个小的 json 有效负载或一个 200MB 的文档。
*   如果您想重现 - 此代码使用 Newtonsoft Json 库进行序列化。

为什么会发生这种情况，我该如何解决？

**编辑： 504 状态代码可能是**我正在测试的提琴手推断的红鲱鱼。从 System.Net.Http.HttpClient 发送相同的请求表示在收到响应之前连接已关闭。

**编辑：将内容类型设置为几乎其他任何东西（包括无意义的值）都可以正常工作。**我可以打破它的唯一内容类型是 application/json

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T17:23:07.790

这就是我使它工作的方式，但它是在 IIS 本地托管的简单 WCF 服务。我不使用 Microsoft.ServiceBus 或 Azure。

第一小提琴手的回应。如果这是您正在寻找的内容，请继续编写代码:)

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 121
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Thu, 04 Apr 2013 17:17:05 GMT

[{"BoolValue":true,"StringValue":"blah"},{"BoolValue":false,"StringValue":"boo"},{"BoolValue":true,"StringValue":"floo"}] 
```

服务定义：

```
namespace yourNS
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [WebGet(UriTemplate = "/CT", ResponseFormat = WebMessageFormat.Json)]
        List<CompositeType> GetData();
    }

    [DataContract]
    public class CompositeType
    {
        [DataMember]
        public bool BoolValue { get; set; }

        [DataMember]
        public string StringValue { get; set; }
    }

    public class Service1 : IService1
    {
        public List<CompositeType> GetData()
        {
            return new List<CompositeType>
            {
                new CompositeType { BoolValue = true, StringValue = "blah" },
                new CompositeType { BoolValue = false, StringValue = "boo" },
                new CompositeType { BoolValue = true, StringValue = "floo" },
            };
        }
    }
} 
```

和 web.config

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="yourNS.Service1">
        <endpoint 
          address="" 
          binding="webHttpBinding" 
          behaviorConfiguration="MyBehave"
          contract="yourNS.IService1" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="MyBehave">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

# ruby - 运行 rackup private_pub.ru -s thin -E production 命令时无法加载此类文件 - Thin (LoadError)

> ID：14846375
> 
> 赞同：5
> 
> 时间：2013-02-13T04:25:45.830
> 
> 标签：ruby, faye, private-pub

我指的是[pub railscast 教程](http://railscasts.com/episodes/316-private-pub "railscast 教程")并正确执行了所有步骤，但是在运行最后一个命令时，即

```
rackup private_pub.ru -s thin -E production 
```

为了架起 faye 服务器，我收到以下错误：

```
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- thin (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/handler/thin.rb:1:in `<top (required)>'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/handler.rb:20:in `const_get'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/handler.rb:20:in `block in get'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/handler.rb:20:in `each'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/handler.rb:20:in `inject'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/handler.rb:20:in `get'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:268:in `server'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:264:in `start'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:141:in `start'
from /var/lib/gems/1.9.1/gems/rack-1.5.2/bin/rackup:4:in `<top (required)>'
from /usr/local/bin/rackup:19:in `load' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T14:43:10.307

你已经安装瘦了吗？

`gem`您可以使用以下命令 安装 gem ：`gem install thin`

或者使用 Bundler，添加`thin`到`Gemfile`then 运行`bundle install`（当然你需要[`bundler`gem](http://gembundler.com/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-12T17:52:05.220

有同样的问题：这是你解决它的方法。进入您当前的 rails 目录，输入以下内容：1\. sudo gem install faye，2\. sudo gem install thin。

您可能没有将它安装到您的新 Rails 项目的本地。

# ios - 如何按 nspredicate 日期过滤 SQL 结果？

> ID：14846376
> 
> 赞同：1
> 
> 时间：2013-02-13T04:25:54.570
> 
> 标签：ios, date, nspredicate

我正在尝试按日期过滤 sql lite 数据库结果，但我对 ios 日期和时间对象很糟糕，并且不确定如何做到这一点。你会如何设置 NSPredicate 来过滤今天、过去 7 天、过去 30 天和过去 90 天的结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:31:15.087

**例子**

```
- (NSPredicate *)predicateForDateWithinLast30Days
{

    NSDate *currentDate = [NSDate date];// get the current date

    // get the date 30 days prior to current date

    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setDay:-30];
    NSDate *date30DaysAgo = [calendar
          dateByAddingComponents:dateComps
          toDate:currentDate options:0];

    // create the predicate
    NSPredicate *last30DaysPredicate = [NSPredicate
          predicateWithFormat:@"dateToCompare > %@", date30DaysAgo];

    return last30DaysPredicate;
} 
```

# hibernate - 将 Hibernate 与非关联实体一起使用

> ID：14846383
> 
> 赞同：0
> 
> 时间：2013-02-13T04:26:36.487
> 
> 标签：hibernate

我正在研究休眠，假设我们有两个类 A 和 B（对应于两个表 A1 和 B1）。

A1 表的主键被用作 B1 表中的外键。

```
Class A {

    int aid;
    //other columns

}

class B {

     int bid;
     //other columns
     ....
     //foreign key
     int aid;

} 
```

我没有将 A 的引用保留在 B 类中，而是将帮助保留为外键。

但在这种情况下，我无法使用条件查询来加入这些表。

有没有可用的解决方案？

但我的意见是不可能使用条件，因为hibernate不知道这两个表是否关联，所以我们应该使用简单的SQL查询来获取记录。

# java - 解析器缺少最后一个单词 - Java

> ID：14846386
> 
> 赞同：-2
> 
> 时间：2013-02-13T04:26:55.657
> 
> 标签：java, debugging, parsing

这是一个自定义构建的解析器，因为我真的不喜欢默认 java.util.Scanner 的工作方式。

我的问题是，当我使用 new Parser("Parsed phrase here") 或函数 reloadBuffer("Parsed phrase here") 创建解析器时，它会丢失输入的最后一个单词。我试图使这段代码尽可能地可读，但它仍然非常密集，对此感到抱歉。哦，如果这得到修复，请随意使用它。

```
import java.util.*;

public class Parser
{

    public static char letters[] = new char[]{'q','w','e','r','t','y','u','i','o','p','a','s','d','f','g','h','j','k','l','z','x','c','v','b','n','m','Q','W','E','R','T','Y','U','I','O','P','A','S','D','F','G','H','J','K','L','Z','X','C','V','B','N','M'};
    public static char numbers[] = new char[]{'0','1','2','3','4','5','6','7','8','9'};

    public ArrayList<String> words;
    public String buffer;
    public int wordIndex;
    /**
     * Assembles an empty parser.
     */
    public Parser()
    {
        words = new ArrayList<String>();
        buffer = "";
        wordIndex = 0;
    }
    /**
     * Assembles the Parser with given String as input. Uses reloadBuffer();
     * @see reloadBuffer
     */
    public Parser(String input)
    {
        words = new ArrayList<String>();
        reloadBuffer(input);
    }
    /**
     * Parses each word/set of chars into the array. Must be called before any retreiving of words can be done. 
     * This is basically the core function of the class. Be very careful if you edit this part.
     */
    public void parseBuffer(){
        String input = buffer;
        while(input.length()>=1)
        {
            input = trimToSelectedChars(input);
            words.add(removeFirstSet(input)[0]);
            input = removeFirstSet(input)[1];
        }
    }
    /**
     * Resets the array with given String as input. Used in the primary constructor. Uses parseBuffer();
     * @see parseBuffer()
     */
    public void reloadBuffer(String input){
        buffer = input;
        wordIndex = 0;
        parseBuffer();
    }

    /**
     * @return the next word parsed from the string, based upon the value of wordIndex.
     */
    public String next(){
        wordIndex++;
        if (wordIndex<= words.size()+1){
            try {return words.get(wordIndex-1);
            } catch(Exception ex) {
                System.err.println("Error: reached end of list. Resetting index to 0.");
                resetIndex();
            }
        }
        return "";
    }

    //Notice that when using wordAt(), it leaves the index where you selected, and it does not revert to where it was before.
    /**
     * @return the word at indicated index, much like the charAt() function, using the next() function. Also sets wordIndex to input index.
     * @see String
     * @see next()
     */
    public String wordAt(int index){
        wordIndex = index;
        return next();
    }

    /**
     * @return the first word parsed from the input.
     * @see String
     */
    public String firstWord()

    {
        return wordAt(0);
    }

    /**
     *Be careful in using lastWord() as it sets the wordIndex to the last value which will return a String
     *@return the last parsed word from the input.
     */
    public String lastWord(){
        return wordAt(words.size()-1);
    }

    /**
     * Resets the wordIndex to 0, the beginning.
     */
    public void resetIndex(){wordIndex = 0;}

    /**
     * return whether or not there is another word in the parser list.
     */
    public boolean hasNext(){
        return (wordIndex<words.size());
    }
    //internal methods here.
    private String[] removeFirstSet(String input)
    //removes the first set of adjecent letters from a string, and returns it.
    {
        String[] words = new String[2];
        int index = 0;
        if(input.length()<1) words[0] = "";
        while(index<input.length()){
            //this loop to retrieve the first word.
            if(isLetter(input.charAt(index))||isNumber(input.charAt(index))){
                index++; //if the first char is a letter, move on to the next one.
            }
            else{
                words[0]=input.substring(0,index);
                words[1]=input.substring(index);
                return words;
            }
        }
        return new String[]{"",""};
    }

    private String trimToSelectedChars(String input)
    //trims anything that is not a letter from the front of a String.
    {
        input = input.trim();
        while(input.length()>0){
            //this loop to clear up junk before the input.
            if(isLetter(input.charAt(0))||isNumber(input.charAt(0))){
                break; //if the first char is a letter or a number, break the loop
            }
            else input=input.substring(1);// else cut the first char off the string.
        }
        return input;
    }

    private boolean isLetter(char c)
    //returns whether or not the indicated char is an alphabetical letter.
    {
        for(int i = 0; i<letters.length; i++){
            if(letters[i]==c)return true;
        }
        return(false);
    }

    private boolean isNumber(char c)
    //returns whether or not the indicated char is a number.
    {
        for(int i = 0; i<numbers.length; i++){
            if(numbers[i]==c)return true;
        }
        return(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:10:22.983

将方法 removeFirstSet 替换为以下方法

```
private String[] removeFirstSet(String input)
    //removes the first set of adjecent letters from a string, and returns it.
    {
        String[] words = new String[2];
        int index = 0;
        if(input.length()<1) words[0] = "";
        while(index<input.length()){
            //this loop to retrieve the first word.
            if( isLetter(input.charAt(index))||isNumber(input.charAt(index))){
                index++; //if the first char is a letter, move on to the next one.
            }
            else{ 
                words[0]=input.substring(0,index);
                words[1]=input.substring(index);
                return words;
            }
        }
        if(index==input.length()){
             words[0]=input.substring(0,index);
             words[1]=input.substring(index);
             return words;
        }
        return new String[]{"",""};
    } 
```

希望这能解决您的问题。

# sql - 按日期获取平均值（缺少日期）

> ID：14846391
> 
> 赞同：2
> 
> 时间：2013-02-13T04:27:27.640
> 
> 标签：sql, sql-server, tsql

我有下表：

```
Interest Rate ID    Interest Rate   Interest Rate Start Date
20                  3.5             2009-12-02 00:00:00.000
21                  3.75            2010-03-03 00:00:00.000
22                  4               2010-04-07 00:00:00.000
23                  4.25            2010-05-05 00:00:00.000
24                  4.5             2010-11-03 00:00:00.000
25                  4.25            2011-11-02 00:00:00.000 
```

如您所见，`Interest Rate`从一个月到下一个月的跨度。我需要算出整个月的平均利息。

所以让我们说我们选择`2010-11`。`01/11/2010`到 the`02/11/2010`的利率`4.25`如行中所示，`23`但从`03/11/2010`后面开始是`4.5`百分比。如何编写使用月份和年份来查找平均利率的 SQL 查询（使用 TSQL）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:41:35.977

这很痛苦，所以我希望没有一个错误：

```
select sum(((case when end_date > lastdt then lastdt else end_date end) -
            (case when start_date < firstdt then firstdt else start_date end)
           )* t.rate) /
       sum((case when end_date > lastdt then lastdt else end_date end) -
           (case when start_date < firstdt then firstdt else start_date end)
          )
from (select t.*,
             (select top 1 start_date - 1 from t t2 where t2.start_date > t.start_date order by t2.start_date
             ) as end_date
      from t
     ) t cross join
     (select cast('2011-11-01' as date) as firstdt, cast(2011-11-30) as lastdt
where firstdt <= t.end_date and lastdt >= t.start_date 
```

这个想法是计算每个利率有效的天数。然后平均值是天数乘以比率除以天数的总和。

这有点复杂。内部查询为每条记录输入结束日期。该`where`子句仅选择重叠的子句。并且`select`具有加权平均值的计算。

# javascript - 在 Windows 8 Metro Apps 中使用 CSS 背景：url()

> ID：14846392
> 
> 赞同：0
> 
> 时间：2013-02-13T04:27:28.473
> 
> 标签：javascript, css, windows, windows-8, visual-studio-2012

我正在用 Javascript 创建一些 DOM 元素并向它们添加一些类，然后我使用我的 CSS 中的类来添加背景图像：

```
background: url('/images/reply.png'); 
```

但是，当我执行此操作并运行应用程序时，图像会显示，但细边框和中间的小黑点也会显示。当您在 CSS 背景中使用错误的 URL 时，也会显示此框和点： url() 部分。但是一旦 URL 正确，它仍然会与图像一起显示。

有人知道为什么在 Win 8 中会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T18:15:58.683

您可以使用“ms-appx://”前缀：

```
.myClass {
   background: url("ms-appx:///images/myImage.png");
} 
```

# objective-c - Xcode：setTitle 不起作用

> ID：14846393
> 
> 赞同：0
> 
> 时间：2013-02-13T04:27:31.990
> 
> 标签：objective-c, xcode, appkit

在我的`AppDelegate`方法中`applicationDidFinishLaunching:`

```
// Initialize here
NSLog(@"Application finished launching...");

MyMain* mainAccess;                    // To send messages to SAAMain
mainAccess = [[Main alloc] init];

NSLog(@"Setting title...");
version = @"v1.0";
[mainAccess setTitleVersion:version];   // Set Title with proper version 
```

如您所见，我创建了 MyMain 类的一个实例，以便向它发送消息（我所有重要的“主要”方法都位于其中）。在这种情况下，我正在尝试设置标题。

我的 MyMain 类有一个方法`setTitleVersion`并将 a`NSString`作为参数（版本）。

```
NSLog(@"setTitleVersion called");

NSString *title = [NSString stringWithFormat:(@"Version: %@", version)];
//[_mainWindow setTitle:([NSString stringWithFormat:title])];
[_mainWindow setTitle:@"Test"];

NSString *mainWindowTitle = _mainWindow.title;
NSString *test2 = _mainWindow.value;
NSLog(@"_mainWindow.title: %@\n_mainWindow.value: %@", mainWindowTitle, test2); 
```

我有一个附加到这个 MyMain 类的主窗口的出口（如您在 _mainWindow 中看到的那样）。

我添加了一些`NSLogs`尝试调试自己。value 和 title 都返回为`null`.

我究竟做错了什么？正如我在控制台输出中看到的那样，该方法被调用。好像`_mainWindow`插座不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:45:51.627

假设您的孩子有一碗冰淇淋，并且想要在上面放一颗樱桃。你去冰箱拿出冰淇淋盒。你从柜子里拿出一个碗。你在碗里放了一些冰淇淋。现在你有一碗冰淇淋。你从冰箱里拿出一颗樱桃，然后在上面放一颗樱桃。然后你把一碗冰淇淋（上面放着樱桃）扔掉。现在你很困惑，因为你孩子的冰淇淋碗上仍然没有樱桃！你做错了什么？

这种情况是您的问题的隐喻。您需要将`setTitleVersion:`消息发送到**现有**的`MyMain`. 您不能只创建一个全新的 实例`MyMain`，将消息发送给它，然后丢弃该新实例。

您对`rdelmar`答案的评论表明您现有的实例`MyMain`在您的主笔尖中，并且您有一个出口。我假设这意味着您的 . 上有一个类型的插座`MyMain`，`MyAppDelegate`并且该插座连接到`MyMain`您的笔尖中的一个对象。在这种情况下，您希望将`setTitleVersion:`消息发送到插座中的对象。如果你的出口被命名`mainObject`，你会这样做：

```
[self.mainObject setTitleVersion:version]; 
```

如果您还没有创建插座`MyAppDelegate`，您可以使用 Xcode 的助手编辑器一步创建并连接它。打开助手编辑器并确保它正在显示`MyAppDelegate.h`。`MyMain`然后从nib 中的对象控制拖动到您的`@interface MyAppDelegate`中，如下所示：

![创建并连接新的插座](../Images/d587167f79a0c4ba2ab77032bc399336.png)

如果您已经在 中声明了一个插座`MyAppDelegate`，则可以在 nib 编辑器中连接它。按住 Control 键单击`My App Delegate`笔尖的对象列表中的占位符。然后，在 outlets 弹出窗口中，从 outlet 的圆圈拖动到`MyMain`对象占位符，如下所示：

![连接现有插座](../Images/5c43e5db090a3c04600b8dfaa387fd56.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:41:17.847

你说你有一个 IBOutlet 连接到 Main 类，但我对什么是什么有点困惑。首先，您没有将插座连接到类，而是将它们连接到对象。从您的问题很难判断，但我怀疑问题在于您正在代码中创建 MainAccess 的一个实例，但这不是您在 IB 中有出口的实例。

# mysql - 我可以杀死“通过密钥缓存修复”吗？

> ID：14846399
> 
> 赞同：3
> 
> 时间：2013-02-13T04:28:43.660
> 
> 标签：mysql

我正在尝试在已添加到包含 850 万行的 MyISAM 表中的新字段上添加索引。查询从“REPAIR BY SORTING”变为“REPAIR BY KEYCACHE”，这似乎是由于排序期间磁盘空间不足所致。我知道 keycache 修复不好并且需要很长时间 - 到目前为止它已经运行了 1.5 小时。

如果我杀死这个查询会发生什么？是否可能损坏表（和数据库）？我不能杀死这个查询并进行 myisamchk 修复吗？

我有这个表和数据库的备份，如果我恢复并尝试再次添加索引假设它是由磁盘空间引起的，它会节省时间吗？

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-10-26T07:57:36.050

在 InnoDB 引擎上与我相同的错误。增加了我的 /mysql 挂载点并等待了 10 分钟 - 恢复自动开始

玛丽亚数据库 10.1

# docx - 从 RTF 模板创建 .docx 文件

> ID：14846400
> 
> 赞同：0
> 
> 时间：2013-02-13T04:29:02.130
> 
> 标签：docx, bi-publisher

我使用 BI 发布者桌面 API 从 RTF 模板创建文档。我想使用模板，以便可以直接在模板中对演示文稿进行任何细微的修改。目前我只能创建 doc 文件，因为 BIP 不支持创建 docx。有什么方法可以让我使用 rtf 模板创建 docx，或者将 doc 转换为 docx（我准备好使用的解决方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T15:43:29.973

我不太确定“我使用 BI 发布者桌面 API 从 RTF 模板创建文档”是什么。方法。假设您正在调用[BI Publisher Java API](http://docs.oracle.com/cd/E28280_01/bi.1111/e22259/javaapis.htm)来生成报告。目前 BI Publisher 不支持 .docx 格式，但 Word 可以帮助您将 .doc 转换为 .docx。您可以查看[此答案](https://stackoverflow.com/questions/2405417/automation-how-to-automate-transforming-doc-to-docx)以获取详细信息。所以基本上你需要创建一个命令字符串并使用[Runtime.exec](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)方法调用它。

# java - 在 Java Swing 中缩放 JPanel

> ID：14846402
> 
> 赞同：19
> 
> 时间：2013-02-13T04:29:20.427
> 
> 标签：java, swing, user-interface, jpanel, zooming

我有一个现有的`Java Swing`应用程序。在应用程序的中间是一个`JPanel`我想要的单曲`zoom in and out`。上面有`JPanel`很多`JComponents`（主要是 other`JPanels`和`JLabels`）。

此外`mouse`，位置也需要适当调整 - 因此即使在缩放`mouseevents`后也需要保持不变。`JPanel`因此，简单地改变`paint`每个方法`component`似乎并不合理。

**编辑：**

![在此处输入图像描述](../Images/e65d18547ffc2f802dec74c9dba5ec78.png)

好的，我`MagnifierUI` `class`通过一些小的编辑让它工作了。然而，我创建的放大面板有错误`mouseevents`- 即面板被缩放，`mouseevents`不是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:43:57.010

This is just a scetch:

*   in your `JPanel` keep track of an [AffineTransform](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html) which represents the scale factor (see `AffineTransform.scale(double,double)`,
*   override the `paint` method of your `JPanel`: before calling `super.paint` apply the affine transformation to your `Graphics2D` object (cast from the parameter of the `paint` method) by calling `Graphics2D.setTransform(AffineTransform)`, call `super.paint` afterwards
*   override the methods `processMouseEvent`, `processMouseMotionEvent` and `processMouseWheelEvent`, apply the affine transformation to the coordinates of their mouse event parameter (`AffineTransform.transform(java.awt.geom.Point2D,java.awt.geom.Point2D)`), call respective `super`-method afterwards.

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:28:34.577

试试 SwingUtilities.convertPoint(source, point,destination);

# powershell-3.0 - PowerShell 使用 format.ps1.xml 文件格式化自定义对象

> ID：14846403
> 
> 赞同：0
> 
> 时间：2013-02-13T04:29:33.840
> 
> 标签：powershell-3.0

我创建了一个自定义对象并在 ps1.xml 文件中创建了一个通用视图，它的格式很好，我想为输出添加颜色。我将如何为 ps1.xml 文件中的输出添加颜色。例如，我的输出是一个简单的表，其中一列有云服务器的状态输出。我希望输出显示白色表示活动，红色表示停止，黄色表示重新启动等。我猜这需要一个但我还没有找到任何示例或文章详细说明在 ps1.xml 文件中使用它作为颜色.

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:25:49.187

v3 中的 ps1xml 文件中没有颜色。你可以：

*   在连接上投票赞成[这个项目](http://connect.microsoft.com/PowerShell/feedback/details/288077/formatting-output-we-need-control-over-color)
*   自己定义颜色格式，就像 Jaykul 为 ls 所做的那样，[在这里](http://poshcode.org/2488)

我希望 v4 最终会得到它。有条件的彩色输出确实有助于发现问题，所以我想拥有它是非常有意义的。虽然还没有...

# javascript - 使用 For-Loop 对 Array 的所有元素进行样式化

> ID：14846407
> 
> 赞同：0
> 
> 时间：2013-02-13T04:30:32.240
> 
> 标签：javascript, arrays, html, loops, for-loop

我有一个带有红色边框的 div。我希望这个边框在页面加载完成后 3 秒后消失。这个 div 中有 3 个图像，我希望它们在同一时间之后不透明 0.1。我尝试使用计时器执行此操作，但它不会运行。我能够让边框部分工作，但是当我尝试制作图像时它没有运行，并且 Aptana 说 for 循环所在的位置有错误。

```
function setPlaylist(){
    var playlist = document.getElementById('playlist');
    var thumbnails = document.getElementsByClassName('thumb').getElementByTagName('img');

    for( var i=0,i<thumbnails.length;i++)
    {
        thumbnails[i].style.opacity = ('0.1');
    }
    playlist.style.border = ('none');
    /*thumbnails.style.opacity = ('0.1');*/
}

function timerPL(){
    setTimeout(setPlaylist,3000);
}

window.addEventListener('load',timerPL,false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:34:06.027

这个功能：

```
document.getElementsByClassName('thumb').getElementByTagName('img');
//                 ^
//                  \_ It's plural. It'll return an array of elements 
```

您需要遍历它们：

```
var thumbs = document.getElementsByClassName('thumb');

for (var i = 0; i < thumbs.length; i++) {
    var thumb = thumbs[i];

    ...
} 
```

如果您不关心旧版浏览器，请使用[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)：

```
var thumbs = document.querySelectorAll('#playlist .thumb img'); 
```

# javascript - Passing clicked elements parent to a function

> ID：14846409
> 
> 赞同：0
> 
> 时间：2013-02-13T04:31:03.350
> 
> 标签：javascript, object, parent-child

so I'm working on creating a Javascript version of the card game Dominion.

I have this function that takes in an array that hold my card objects I created with some custom objects. One object for each card. I create the container that holds each card (a div), I then create an image object, then a button that the user clicks to play a card (if it's an action card).

This is where I start having my problem. I add on onclick function to the button. I want to pass the card object (so I can send it to my discard array when they play it) and I want to send the parent of the button (which should be the div that holds the specific card) to my playAction() function (so basically my onclick function just calls another function). I'm getting an error that playCard[i] is undefined. I also tried to define it outside of the onclick function with no luck.

You can view a live version of where I'm at here: [http://people.rit.edu/lxl1500/Prog4/Project%202/project1.html](http://people.rit.edu/lxl1500/Prog4/Project%202/project1.html)

Javascript: [http://people.rit.edu/lxl1500/Prog4/Project%202/main-script.js](http://people.rit.edu/lxl1500/Prog4/Project%202/main-script.js)

So you click on the + button on a card to buy it and eventually it will show up in your hand. The error occurs when you click the play button on an action card.

**displayCard Function:**

```
function displayHand(hand){

var parent = Array();
var container = Array();
var card = Array(); 
var playCard = Array();

for(var i=0; i < hand.length; i++){

    container[i] = document.createElement('div');
    container[i].setAttribute('class','singleHandCard');
    var cardIndex = container[i].setAttribute('id', 'card'+i);
    document.getElementById('game-hand').appendChild(container[i]);

    //create each card in our hand

    card[i] = new Image();
    card[i].src = hand[i].image;

    //create play card item

    playCard[i] = new Image();
    playCard[i].setAttribute('class', 'playbtn')
    playCard[i].src = 'images/play-btn.png';
    playCard[i].style.visibility = 'hidden';
    if(hand[i].type == "action"){
        playCard[i].style.visibility = 'visible';
    }
    container[i].appendChild(playCard[i]);

    parent[i] = card[i].parentNode;

    playCard[i].addEventListener('click', function() {

        playAction(playCard[i],parent[i]);

    }.bind(hand[i]), false);

    container[i].appendChild(card[i]);
  }

} 
```

**playAction function:**

```
function playAction(actionCard,parent){
    discard.push(actionCard);
    parent.innerHTML='';
} 
```

Any help would be GREATLY appreciated. I've been trying to work this out for a couple of days now and I'm totally stumped. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:53:47.853

You're problem is that you're referencing an index variable (i) inside of the click handler. In the event listener callback i is still referencing the i from the loop that it was declared in. So it'll always be the last value i had, which is 4\. This is why you can play an action card as long as it's the last card in your hand.

```
playCard[i].addEventListener('click', function() {

    playAction(playCard[i],parent[i]);
    console.log(i); //Always 4

}.bind(hand[i]), false); 
```

One solution is put the event listener call into another function that takes the variables as an argument:

```
function cardClick(playCard, parent, hand) {
    playCard.addEventListener('click', function() {

        playAction(playCard,parent);

    }.bind(hand), false);
} 
```

And then just call that in your loop:

```
cardClick(playCard[i], parent[i], hand[i]); 
```

# javascript - Jquery/Jquery mobile - Aptana Studio 3

> ID：14846411
> 
> 赞同：2
> 
> 时间：2013-02-13T04:31:19.947
> 
> 标签：javascript, jquery, jquery-mobile, aptana, syntax-highlighting

我似乎找不到在 Aptana Studio 3 for Mac 中打开 jquery/jquery mobile 的语法突出显示或智能感知的好帖子。

我发现的内容已过时或说明与我安装的版本不匹配（[如此 SO post](https://stackoverflow.com/questions/4721124/how-to-enable-jquery-support-in-aptana-studio-3)。

在 Studio 3 for Mac 中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:38:49.783

好吧，在我发布之后，我[在一个 SO 帖子上找到了这个答案](https://stackoverflow.com/questions/10262320/jquery-code-assist-in-aptana-studio-3-1-1?rq=1)（就像所有其他人一样，没有正确的说明，但是这个离我设法找到它的地方足够近了）

这是我所做的：
1）右键单击项目文件夹->属性
2）单击格式化程序
3）检查“启用项目特定设置”
4）单击确定

# c++ - 核心文件的大小是否反映了应用程序崩溃时的内存使用情况？

> ID：14846413
> 
> 赞同：6
> 
> 时间：2013-02-13T04:31:27.693
> 
> 标签：c++, solaris, core, crash-dumps

我的应用程序（Sol 10 - 32 位上的 C++）崩溃了，应用程序生成的内核大小为 4 GB。我可以假设应用程序在即将崩溃时可能使用高达 4 GB 的内存（与核心文件的大小相同）吗？PS。我的应用程序是独立的，不依赖于任何其他进程。

有没有办法通过核心文件检查应用程序使用的总内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T07:09:43.537

是的，核心文件代表崩溃发生时进程使用的整个虚拟内存区域的转储。32 位进程的核心文件不能超过 4 GB。

在 Solaris 下，您可以使用位于 的几个命令`/usr/proc/bin`从核心文件中获取信息。尤其：

*   `file core`: 将确认核心文件来自您的进程
*   `pstack core`: 会告诉你进程在哪里崩溃
*   `pmap core`：将显示每个地址的内存使用情况

`coreadm`您可以使用该命令限制保存在核心文件中的数据集等。默认情况下，所有内容都会保存：
`stack + heap + shm + ism + dism + text + data + rodata + anon + shanon + ctf`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T05:05:50.927

从手册页（[http://linux.die.net/man/5/core](http://linux.die.net/man/5/core)）：

> 某些信号的默认操作是使进程终止并生成核心转储文件，该文件包含终止时进程内存的映像。

可能您的代码正在使用多线程环境和共享数据。

还：

> 从内核 2.6.23 开始，Linux 特定的 /proc/PID/coredump_filter 文件可用于控制在为具有相应进程 ID 的进程执行核心转储的情况下将哪些内存段写入核心转储文件。

可能通过这个你可以了解应用程序使用的内存。

# java - 在 Apache Axis 中使用 JAX-RPC 创建一个简单的 Web 服务

> ID：14846414
> 
> 赞同：0
> 
> 时间：2013-02-13T04:31:38.717
> 
> 标签：java, web-services, spring, axis, jax-rpc

我想使用 Apache Axis 在 Jax-RPC 中创建一个简单的 Web 服务。

我也想实现它的春天性质。

我是 Jax-RPC 的新手，可以分享一些参考资料。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:33:55.653

请查看 spring 提供的文档：

[http://static.springsource.org/spring/docs/2.5.x/reference/remoting.html](http://static.springsource.org/spring/docs/2.5.x/reference/remoting.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T09:05:46.597

`Apache Axis`并且`JAX-RPC`是用于创建 Web 服务的独立框架。没有人能回答你的问题，因为没有正确的答案。我能做的只是给你一些入门链接，这样你就可以更好地理解什么是 JAX-RPC 和 Apache Axis。

看：

*   [Web 服务 - Apache Axis](http://axis.apache.org/axis/)
*   [JAX-RPC](http://docs.oracle.com/javaee/1.3/tutorial/doc/IntroWS5.html)

从您之前与此相关的所有问题中，我假设您需要支持`rpc/encoded`WSDL 样式。好吧，JAX-RPC 和 Axis 会做到这一点。不知道如何通过`JAX-RPC`但这是一些提示如何使用 Axis 和 Spring 执行此操作：

创建两个类：

```
import org.apache.axis.EngineConfiguration;
import org.apache.axis.Handler;
import org.apache.axis.deployment.wsdd.WSDDProvider;
import org.apache.axis.deployment.wsdd.WSDDService;

public class WSDDSpringProvider extends WSDDProvider {

    public static final String PROVIDER_NAME = "SPRING";
    public static final String PARAM_SPRING_BEAN_ID = "springBeanId";

    public String getName(){
        return "SPRING";
    }

    public Handler newProviderInstance(WSDDService service, EngineConfiguration registry)
        throws Exception {
        return new SpringProvider(service.getParameter("springBeanId"));
    }

} 
```

还有一个：

```
import java.io.PrintStream;
import java.lang.reflect.Method;
import javax.servlet.Servlet;
import javax.servlet.ServletConfig;
import org.apache.axis.MessageContext;
import org.apache.axis.providers.java.RPCProvider;
import org.apache.axis.transport.http.HTTPConstants;
import org.springframework.web.context.WebApplicationContext;
import org.springframework.web.context.support.WebApplicationContextUtils;

public class SpringProvider extends RPCProvider {

    private String springBeanId;

    public SpringProvider(String springBeanId) {
        this.springBeanId = springBeanId;
    }

    protected Object makeNewServiceObject(MessageContext msgContext, String clsName)
        throws Exception {
        Servlet servlet = (Servlet)msgContext.getProperty(HTTPConstants.MC_HTTP_SERVLET);
        WebApplicationContext wac = WebApplicationContextUtils.getRequiredWebApplicationContext(servlet.getServletConfig().getServletContext());
        return wac.getBean(springBeanId);
    }

    protected Object invokeMethod(MessageContext msgContext, Method method, Object obj, Object argValues[])
        throws Exception {
        Method proxyMethod = obj.getClass().getMethod(method.getName(), method.getParameterTypes());
        return proxyMethod.invoke(obj, argValues);
    }

} 
```

将它们作为一个`.jar`文件并将其放入您的类路径中。这些类是您的 Axis Web 服务的实现类可以作为 Spring bean 公开的处理程序。

在`Axis WSDD`文件`java:SPRING`中为要公开为 Spring bean 的 Web 服务配置提供程序。定义参数的唯一值`springBeanId`。例如（来自 WSDD 文件）：

```
<ns:service name="TestService" provider="java:SPRING" use="literal">
   <ns:parameter name="springBeanId" value="webServiceImpl" />
   <!-- ... -->
</ns:service> 
```

在 中将您的 Web 服务实现定义为 Spring bean `WEB-INF/applicationContext.xml`，例如：

```
<bean id="webServiceImpl" class="your.pkg.WebServiceImpl">
</bean> 
```

在这些步骤之后，您可以将您的 Web 服务实现类用作常见的 Spring bean。

# php - yii，php，如何访问/解析数组中正确的记录/选定的记录

> ID：14846417
> 
> 赞同：0
> 
> 时间：2013-02-13T04:32:10.560
> 
> 标签：php, javascript, arrays, yii

我是 yii 的初学者，我无法访问数组中的正确项目。我希望能得到一些帮助。我将在这里解释代码。如果输入实际代码更容易，请告诉我。

我的视图“punt”被渲染，“actionPunt”函数在“CompetitionsController”中被调用。该函数使用以下内容检索游戏及其数据：

// CompetitionsController 中的函数 actionPunt

```
$model=Competitions::model()->with(array('round', 'round.games', 'round.games.team1', 'round.games.team2', 'round.games.league',))  ->findByPk($id); 
```

对于每个 ($model->round->games as $g) 都会发生以下两件事：

```
$leagues[$g->league_id] = array('name'=>$g->league->name, 'image'=>$g->league->image, 'federation'=>$g->league->federation_image);

$games[$g->league_id][$g->group][] = $g; 
```

然后使用以下内容呈现视图：

```
$this->render('punt', array('model'=>$model, 'games'=>$games, 'leagues'=>$leagues, 'default_league'=>$default_league,)); 
```

//平底船视图

```
<table>
For every ($games as $game)
{   
    for every ($game as $group)
    {
        $grp=reset($group);

        for every ($group as $g)
        {
            <tr><td><?php echo CHtml::image($image_url.$g->team1->image, $g->team1->name); ?></td>      
                <td><?php echo CHtml::image($image_url.$g->team2->image, $g->team2->name); ?></td>
                <td><?php if($g->hasGameStarted())
                    {
                          echo CHtml::link('Punt', '#', array('onclick'=>'showDialog('.$model->id.','.$g->id.'); return false;',));
                    } ?>
            </td></tr>
        }
    }
} 
```

所以基本上我有一个游戏列表，有team1和team2，游戏按联赛分组，当点击联赛时，比赛会刷新以显示该联赛的比赛

```
function showDialog(comp,game)
{   
     $("#competition_id").val(comp);    
     $("#game_id").val(game);   
     $("#punt_dialog").dialog("open");
} 
```

从 showdialog 函数调用的 punt_dialog 是一个用于绘制表单的 CJuiDialog 小部件。该表单具有以下元素：

//表单ID“punt_form”

```
<label><input type="radio" name="punt" value="1">team1</label><label><input type="radio" name="punt" value="2">team2</label>

<label><input type="hidden" id="game_id" name="game_id" value="0" /><input type="hidden" id="competition_id" name="competition_id" value="0" /><input type="submit" value="Punt!" /> 
```

代码工作正常，对话框显示我可以选择 team1 或 team2 并且选择被保存并正确显示。但是我不想显示“team1”和“team2”。我想显示团队的名称。我尝试了很多事情，包括以下内容：

首先在对javascript的函数调用中：

```
showDialog('.$model->id.','.$g->id.'); 
```

我尝试添加参数： $g->team1->name 和 $g->team2->name

然后再添加两个参数：

```
function showDialog(comp,game) 
```

但是这样做的结果是清除链接时没有出现对话框，实际上是屏幕，整个屏幕向上和向左移动一两个像素。

其次，我尝试了以下方法：

```
<label><input type="radio" name="punt" value="1">$g->team1->name</label> 
```

这被证明是一个错误的黎明，因为该值始终包含数组中第一场比赛的 team1

最后，我还尝试以表格本身的形式进行测试：

```
 $testingteam=Game::model()->findByPk($g->id); 
```

接着

```
<label><input type="radio" name="punt" value="1"><?php echo $testingteam->league_id; ?></label> 
```

不过这也总是显示数组中第一场比赛的联赛。

我的目标是在 punt_dialog 小部件/表单中显示所选比赛的球队和联赛。注意解析到showDialog的两个值是competition_id和game_id，competition_id与联赛不同，一个比赛有多个联赛。

提前感谢您的帮助。

布伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:50:09.607

有什么问题：

```
echo CHtml::link('Punt', '#', array(
     'onclick'=>'showDialog(
             '.$model->id.','.$g->id.', 
             "'.$g->team1->name.'", 
             "'.$g->team2->name.'"); 
      return false;',)); 
```

```
function showDialog(comp,game, team1, team2)
{   
     $("#competition_id").val(comp);    
     $("#game_id").val(game);   
     $("#team1").text(team1);   
     $("#team2").text(team2);   
     $("#punt_dialog").dialog("open");
} 
```

```
<label id="team1"><input type="radio" name="punt" value="1">team1</label>
<label id="team2"><input type="radio" name="punt" value="2">team2</label>

<label><input type="hidden" id="game_id" name="game_id" value="0" />
<input type="hidden" id="competition_id" name="competition_id" value="0" />
<input type="submit" value="Punt!" /> 
```

# javascript - HTML5 音频按钮 - 第一次按下时工作，然后停止工作

> ID：14846420
> 
> 赞同：0
> 
> 时间：2013-02-13T04:32:39.863
> 
> 标签：javascript, html, html5-audio

我有一个按钮，当按下它时，它会发出短促的声音。它在第一次按下并播放声音时工作。下一次和所有其他时间它都不起作用（直到我重新加载页面，然后它再次起作用）。我的代码如下：

我尝试添加 audio.stop(); 在 audio.play() 之前；希望它能修复它，但它使它根本不起作用。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>HTML5</title>
</head>
<body>

<audio>
<source src="buzzer.mp3" type="audio/mpeg">
</audio>

<input type="submit" id="buttonPlaySound" value="Play Sound">

<script>
var audio = document.getElementsByTagName("audio")[0];

buttonPlaySound.onclick = function () { 
    audio.play();
};
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:32:08.287

一种不同的解决方案，并且由于某些代理从远程重新加载文件而不太容易出现效率问题，是在您的示例中调用`audio.currentTime = 0`之前调用`audio.play()` ，这将变为：

```
buttonPlaySound.onclick = function () { 
    audio.currentTime = 0;
    audio.play();
}; 
```

**编辑**：
在 chrome 上`currentTime`最初似乎是只读的。所以这行不通。有一个解决方法：
如果您`src`手动设置音频对象（甚至与中相同的值`audio.src = audio.src`：）`currentTime`变为可设置，上述解决方案将按预期工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:39:55.477

这是因为 HTML5 音频播放了一次，并且它的状态是正在播放，所以它不会再次播放。

你可以试试这个：

```
var audio = document.getElementsByTagName("audio")[0];
var played = false;

buttonPlaySound.onclick = function () { 
    if (played) {
        audio.pause();
    }
    audio.play();
    played = true;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:40:43.313

你应该这样尝试..

```
<input type="submit" id="buttonPlaySound" value="Play Sound" onclick ="Play()">
<input type="submit" id="buttonPlaySound" value="Play Sound" onclick ="Pause()">

<script>
var audio = document.getElementsByTagName("audio")[0];
var played = false;

    function play() 
    {
        audio.play();
    }
    function pause()
    {
       if(played)
       {
           audio.pause();
       }
       audio.play();
       played = true;
    };
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T04:49:09.997

添加 audio.load(); 在 audio.play() 之前；为我修好了。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>HTML5</title>
</head>
<body>

<audio>
<source src="buzzer.mp3" type="audio/mpeg">
</audio>

<input type="submit" id="buttonPlaySound" value="Play Sound">

<script>
var audio = document.getElementsByTagName("audio")[0];

buttonPlaySound.onclick = function () { 
    audio.load();
    audio.play();
};
</script>
</body>
</html> 
```

# ruby - 有没有办法使用带有 cloudfoundry 的 sinatra 框架进行会话管理？

> ID：14846425
> 
> 赞同：0
> 
> 时间：2013-02-13T04:33:21.187
> 
> 标签：ruby, sinatra, cloud-foundry

我在网上找到的教程似乎都没有涵盖这一点。我的意思是这样做，但我没有看到他们说我在检查时应该看到的内容。这是因为我在cloudfoundry平台上吗？如果您能指导我阅读一些文献或给我一个提示，那就太好了！我试图通过在 cookie 中存储一些信息来实现会话控制，查看该 cookie，并在每次用户发出 HTTP 请求时将其与我的数据库中的会话表进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:29:48.783

这很简单。只需确保您在 Sinatra 中启用了会话并使用 session_id 作为数据库中的键。[我在https://gist.github.com/danhigham/4943057](https://gist.github.com/danhigham/4943057)创建了一个小例子

该示例从 twitter 以 json 格式获取推文，并使用 session_id 作为键从 Redis 检索集合，将推文作为 json 添加到集合中，然后将其存储回同一记录中。

我还将示例推送到[http://session-tweet.cloudfoundry.com](http://session-tweet.cloudfoundry.com)

# php - 即使表单有错误，实体仍然存在

> ID：14846431
> 
> 赞同：3
> 
> 时间：2013-02-13T04:33:32.367
> 
> 标签：php, symfony, doctrine-orm

我有一个问题，即使表单无效，我的表单类型也会保留关联的实体。我已经通过 $form->getErrorsAsString() 确认表单确实有错误。我还确认了检查表单是否有效的逻辑 if 语句是错误的。尽管表单永远无效，但实体仍然存在。

我不确定我在这里做错了什么，因为我没有其他地方可以找到保留实体或刷新实体管理器的地方。这是我的控制器：

```
/**
 * @Route("/settings/profile", name="settings_profile")
 * @Template();
 */
public function profileAction()
{
    $user = $this->getUser();
    $profile = $user->getUserProfile();

    if (null === $profile) {
        $profile = new UserProfile();
        $profile->setUser($user);
        $profileDataModel = $profile;
    } else {
        $profileDataModel = $this->getDoctrine()->getManager()->find('MyAppBundle:UserProfile',$profile->getId());
    }

    $form = $this->createForm(new ProfileType(),$profileDataModel);
    $request = $this->getRequest();

    if ($request->getMethod() === 'POST') {
        $form->bind($request);

        if ($form->isValid()) {
            // This logic never gets executed!
            $em = $this->getDoctrine()->getManager();
            $profile = $form->getData();
            $em->persist($profile);
            $em->flush();
            $this->get('session')->setFlash('profile_saved', 'Your profile was saved.');
            return $this->redirect($this->generateUrl('settings_profile'));
        }
    }

    return array(
        'form'      =>  $form->createView(),
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:21:36.663

我必须有一个听众或某处持续存在用户的东西。

我暂时解决这个问题的方法是：

```
$em = $this->getDoctrine()->getManager()
if ($form->isValid()) {
    // persist
} else {
    $em->clear();
} 
```

直到我能找出是什么监听器或其他数据转换器导致了这种情况。

# php - 联系表格 php

> ID：14846432
> 
> 赞同：1
> 
> 时间：2013-02-13T04:33:35.820
> 
> 标签：php, html, forms

这让我发疯，因为我之前有这个表格并且它确实有效，但现在我无法让它工作。

问题是当我按下“提交”按钮而不是提交表单时，“ReportIssueForm.php”文件在浏览器中以 txt 文件的形式打开，我看到了所有代码。

任何帮助将不胜感激。

下面是调用 PHP 文件的 HTML 代码：

```
<form name="htmlform" method="post" action="ReportIssueForm.php">
<table width="450px">
</tr>
<tr>
  <td valign="top">
  <label for="first_name"><b>First Name *</b></label>
 </td>
 <td valign="top">
  <input  type="text" name="first_name" maxlength="50" size="30">
 </td>
</tr>

<tr>
 <td valign="top"">
  <label for="last_name"><b>Last Name *</b></label>
 </td>
 <td valign="top">
  <input  type="text" name="last_name" maxlength="50" size="30">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="email"><b>Email *<font size='2'></b></label>
 </td>
 <td valign="top">
  <input  type="text" name="email" maxlength="80" size="30">
 </td>

</tr>
<tr>
 <td valign="top">
  <label for="comments"><b>Comments*</b></label>
 </td>
 <td valign="top">
  <textarea  name="comments" maxlength="1000" cols="25" rows="6"></textarea>
</td>

</tr>
<tr>
 <td colspan="4" style="text-align:center">
<br><br>
 <input type="submit" value="Submit">   
</td>
</tr>
</table>
</form> 
```

这是 php 文件中的代码：

```
<?php
if(isset($_POST['email'])) {

// CHANGE THE TWO LINES BELOW
$email_to = "myemail";     
$email_subject = "Reporting and issue";

function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['first_name']) ||
    !isset($_POST['last_name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['comments'])) {
    died('We are sorry, but there appears to be a problem with the form you submitted.');      
}

$first_name = $_POST['first_name']; // required
$last_name = $_POST['last_name']; // required
$email_from = $_POST['email']; // required
$comments = $_POST['comments']; // required

$error_message = "";

$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
$error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
     $string_exp = "/^[A-Za-z .'-]+$/";
    if(!preg_match($string_exp,$first_name)) {
   $error_message .= 'The First Name you entered does not appear to be valid.<br />';
   }
  if(!preg_match($string_exp,$last_name)) {
$error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
$error_message .= 'The Comments you entered do not appear to be valid.<br />';
 }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Last Name: ".clean_string($last_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
?>

<!-- place your own success html below -->

Thank you for Reporting an issue. We will look into it and try to solve it as soon as possible.<br><br>

<?php
}
die(); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:38:16.687

您需要检查配置，如果您的网络服务器配置正确以将 .php 文件请求路由到 PHP 引擎。

在这种情况下，似乎 Web 服务器可能没有正确配置。

如果您使用 Apache 作为网络服务器，请确保以下 2 行在 httpd.conf(apache config fle) 中未注释

```
LoadModule phpX_module "d:/wamp/bin/php/phpXXX/php5apacheXX.dll"
AddType application/x-httpd-php .php 
```

其中 X 表示 PHP 版本

# r - 使用 write.table 时避免在列名和行名中使用引号

> ID：14846433
> 
> 赞同：15
> 
> 时间：2013-02-13T04:33:37.780
> 
> 标签：r, double-quotes, write.table

我在一个名为“data.txt”的文件中有以下数据：

```
pid      1     2     4     15      18       20
1_at   100   200   89    189     299      788
2_at     8    78   33     89      90       99
3_xt   300    45   53    234      89       34
4_dx    49    34   88      8       9       15 
```

数据由制表符分隔。

现在我想提取该表上的一些列，基于名为“vector.csv”的 csv 文件的信息，该向量得到以下数据：

```
18,1,4,20 
```

所以我想以一个修改后的文件“datamod.txt”结束，该文件用以下选项卡分隔：

```
pid      18       1     4      20
1_at   299     100    89     788
2_at    90       8    33      99
3_xt    89     300    53      34
4_dx     9      49    88      15 
```

在一些帮助下，我制作了以下代码：

```
fileName="vector.csv"
con=file(fileName,open="r")
controlfile<-readLines(con)
controls<-controlfile[1]
controlins<-controlfile[2]
test<-paste("pid",controlins,sep=",")
test2<-c(strsplit(test,","))
test3<-c(do.call("rbind",test2)) 
df<-read.table("data.txt",header=T,check.names=F)
CC <- sapply(df, class)
CC[!names(CC) %in% test3] <- "NULL"
df <- read.table("data.txt", header=T, colClasses=CC,check.names=F)
df<-df[,test3]
write.table(df,"datamod.txt",row.names=FALSE,sep="\t") 
```

我遇到的问题是我生成的文件具有以下格式：

```
"pid"      "18"       "1"     "4"      "20"
"1_at"   299         100      89       788
"2_at"    90           8      33        99
"3_xt"    89         300      53        34
"4_dx"     9          49      88        15 
```

我的问题是如何避免出现在我保存的文件中的那些引号“”标记，以便数据看起来像我想要的那样。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-13T04:59:12.947

从帮助文件中*引用*`write.table`

`quote`

> 逻辑值（TRUE 或 FALSE）或数值向量。如果为 TRUE，任何字符或因子列都将被双引号括起来。如果是数字向量，则将其元素作为要引用的列的索引。在这两种情况下，行名和列名都会被引用，如果它们被写入的话。如果为 FALSE，则不引用任何内容。

所以

```
write.table(df,"datamod.txt",row.names=FALSE,sep="\t", quote = FALSE) 
```

应该工作得很好。

# javascript - FourSquare API 不支持 CORS

> ID：14846434
> 
> 赞同：1
> 
> 时间：2013-02-13T04:33:42.360
> 
> 标签：javascript, rest, foursquare, cors

FourSquare API 文档声明它支持 CORS。但是调用 /users/ 端点清楚地表明只支持 GET 请求：

```
curl -X OPTIONS -i "https://api.foursquare.com/v2/users/self/checkins?oauth_token=CLIENT_OAUTH_TOKEN"

HTTP/1.1 405 Method Not Allowed
Access-Control-Allow-Origin: *
Cache-Control: no-cache, private, no-store
Content-Type: application/json; charset=utf-8
Date: Wed, 13 Feb 2013 04:31:54 GMT
Expires: Wed, 13 Feb 2013 04:31:54 GMT
Pragma: no-cache
Server: nginx/1.2.1
Tracer-Time: 17
Content-Length: 104
Connection: keep-alive

{"meta":{"code":405,"errorType":"other","errorDetail":"This endpoint only supports GET."},"response":{}} 
```

这只是这些 API 端点特有的还是发生了一些变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:53:55.283

我没有研究 FourSquare API 中的所有方法，但我猜 FourSquare 不需要支持预检请求，因为它们的所有 API 请求都很简单。此处的[文档](https://developer.foursquare.com/overview/auth#requests)建议 API 仅支持 GET 和 POST。如果这些请求没有任何自定义标头，则它们永远不需要预检请求。

# arrays - 如何在字符串中索引值

> ID：14846435
> 
> 赞同：-2
> 
> 时间：2013-02-13T04:33:43.133
> 
> 标签：arrays, string, return-value

因此，对于家庭作业，我们需要`String`在`String array`. 这是我的代码

```
public String get( int idx ){//IT HAS TO RETURN STRING AND TAKE A INT

    for(int i = 0; i<wo.length; i ++)
    if(wo[i]==wo[idx])
    return wo[i];
} 
```

我尝试转换为字符串，但它没有用。有人对该怎么做有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:38:05.737

不能用 == 比较两个 String 对象。

使用`equals()`方法。

# maven - Maven 程序集插件：useTransitiveDependencies 不起作用？

> ID：14846436
> 
> 赞同：0
> 
> 时间：2013-02-13T04:33:49.287
> 
> 标签：maven, dependencies, maven-assembly-plugin

在我的程序集描述符中，我有以下内容：

```
<dependencySets>
    <dependencySet>
        <outputDirectory>ext</outputDirectory>
         <useTransitiveDependencies>false</useTransitiveDependencies>
        <excludes>
            <exclude>group1:artifact1:jar:${pom.version}</exclude>
            <exclude>group2:artifact2:jar:${pom.version}</exclude>
        </excludes>
    </dependencySet>
</dependencySets> 
```

运行*mvn dependency:tree*时，我得到以下示例：

```
[INFO] +- org.springframework:spring-context:jar:3.0.5.RELEASE:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.0.5.RELEASE:compile
[INFO] |  |  \- aopalliance:aopalliance:jar:1.0:compile 
```

我想要实现的是我的*ext*文件夹中只有*字符串上下文。*如上所述设置*useTransitiveDependencies时，* *ext*目录根本不存在，并且在删除属性时，我的*ext*文件夹中有所有 thress jar。

 ***任何人都知道我如何排除*spring-aop*和*aopalliance*？

乔纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-06T08:26:17.260

设置`useTransitiveFiltering`为`true`。如果你使用`include`/`exclude`里面`dependencySet`你应该考虑这个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:11:00.417

我会说 spring-context 应该适合你，而不是传递依赖，而是直接依赖。

如果您接受允许传递依赖项，则将要包含的依赖项的选择委托给依赖项 POM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T14:13:02.927

程序集描述符中有一个简单的条目：

```
 <useTransitiveDependencies>false</useTransitiveDependencies> 
```

这应该可以解决您的问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T04:51:55.060

> 任何人都知道我如何排除 spring-aop 和 aopalliance？

和：

```
<exclude>org.springframework:spring-aop:jar:3.0.5.RELEASE</exclude>
<exclude>aopalliance:aopalliance:jar:1.0</exclude> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-13T04:38:46.630

您是否尝试使用调试标志运行此 maven 命令？请使用调试标志运行它，您会找到解决方案。***

# javascript - 谷歌游乐场代码是否可以离线使用

> ID：14846443
> 
> 赞同：1
> 
> 时间：2013-02-13T04:34:31.827
> 
> 标签：javascript

我正在通过 Google API 构建简单的视觉效果。脚本调用示例：

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script> 
```

1.  这些文件可以在任何地方离线使用吗？
2.  这是给客户的，这足够可靠吗？或者你认为谷歌可以直接访问这些吗？（让我的公司搞砸了......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:59:17.783

它在文档中说您无法下载代码并且无法离线使用...

# php - 回显 javascript 表单值

> ID：14846444
> 
> 赞同：0
> 
> 时间：2013-02-13T04:34:45.533
> 
> 标签：php, javascript

我有这个脚本。

```
<head>
<script type="text/javascript" src="sha1.js"></script>

</head>
<body>
<?php
$A= 'TEST01';
$B= '059B8125F';
$C= '20061123_003';
$D= '100.00';
$E= '50126';

?>
<form name="checkout" method="post" action="">
<input type="hidden" name="A" value="<?php echo $A; ?>" />
<input type="hidden" name="B" value="<?php echo $B; ?>" />
<input type="hidden" name="C" value="<?php echo $C; ?>" />
<input type="hidden" name="D" value="<?php echo $D; ?>" />
<input type="hidden" name="E" value="<?php echo $E; ?>" />
</form>

<script type="text/javascript" language="javascript">
var str = "##" + form.A.value.toUpperCase() + "##" + form.B.value.toUpperCase() + "##" + form.C.value.toUpperCase() + "##" + form.D.value.toUpperCase() + "##" + form.E.value.toUpperCase() + "##";

form.SIGNATURE.value = hex_sha1(str);
</script>

</body> 
```

我的问题是，如何在 PHP 中显示 SIGNATURE 值？我想在回声中显示它。是否可以？

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:59:16.933

PHP 的 sha1 函数可能对此有用。

这应该从 php 端计算。

```
<head>
<script type="text/javascript" src="sha1.js"></script>

</head>
<body>
<?php
$A= 'TEST01';
$B= '059B8125F';
$C= '20061123_003';
$D= '100.00';
$E= '50126';

$hash_str = "##" + strtoupper($A) + "##" + strtoupper($B) + "##" + strtoupper($C) + "##" + strtoupper($D) + "##" + strtoupper($E) + "##";

$signature = sha1($hash_str);

echo $signature;
?>

<form name="checkout" method="post" action="">
<input type="hidden" name="A" value="<?php echo $A; ?>" />
<input type="hidden" name="B" value="<?php echo $B; ?>" />
<input type="hidden" name="C" value="<?php echo $C; ?>" />
<input type="hidden" name="D" value="<?php echo $D; ?>" />
<input type="hidden" name="E" value="<?php echo $E; ?>" />
<input type="hidden" name="SIGNATURE" value="<?php echo $signature; ?>" />
</form>

</body> 
```

# java - javax.xml.transform.Transformer 忽略前缀？

> ID：14846447
> 
> 赞同：3
> 
> 时间：2013-02-13T04:34:55.060
> 
> 标签：java, xml, xslt

我正在尝试解析一个非常简单的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<root xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/'>
    <openSearch:totalResults>100</openSearch:totalResults>
</root> 
```

我使用的样式表如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                version="1.0" 
                xmlns:app='http://www.w3.org/2007/app' >
<xsl:output method="xml" indent="yes"/>
<xsl:preserve-space elements="*"/>
<xsl:template match="/">
    <results>
        <xsl:attribute name="total-results">
                <xsl:value-of 
                 select="atom:root/openSearch:totalResults"/>
        </xsl:attribute>
    </results>
</xsl:template>
</xsl:stylesheet> 
```

这在 libxslt 中有效，没问题。我现在正在尝试在 java 中执行相同的任务，并且我正在尝试使用 javax.xml.transform 包来执行此操作。它为 total-results 属性提供了一个空值，而不是预期的结果。但是，当我将 value-of 更改为此：

```
 <xsl:value-of select="root/totalResults"/> 
```

有用。更改 xml 和 xslt 不是一种选择。是否有我应该在某处设置的参数？代码非常简单：

```
InputSource xmlSource = new InputSource( new StringReader(xml) );

DocumentBuilder builder = factory.newDocumentBuilder();
document = builder.parse(xmlSource);

// Use a Transformer for output
TransformerFactory tFactory = TransformerFactory.newInstance();

StreamSource stylesource = new StreamSource(new StringReader(styleSheet));
Transformer transformer = tFactory.newTransformer(stylesource);

StringWriter writer = new StringWriter();

DOMSource source = new DOMSource(document);
StreamResult result = new StreamResult(writer);
transformer.transform(source, result);

stringResult = writer.toString(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T05:36:58.977

在样式表中，您缺少“atom”和“openSearch”的命名空间声明。以下作品：

1.  在样式表中添加“openSearch”命名空间（从 xml 复制）
2.  删除“atom”命名空间，因为没有关于此命名空间的信息
3.  将工厂设置为命名空间感知：`factory.setNamespaceAware(true);`

这是 Scala 中的完整代码（抱歉，我太懒了从文件中解析 xml 和样式表或在 Java 中进行字符串连接）：

```
 def testxsl = {
      val xml = """<?xml version="1.0" encoding="UTF-8"?>
<root xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/'>
    <openSearch:totalResults>100</openSearch:totalResults>
</root>
      """
      val styleSheet = """<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" 
        xmlns:app='http://www.w3.org/2007/app' 
        xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/'>
<xsl:output method="xml" indent="yes"/>
<xsl:preserve-space elements="*"/>
<xsl:template match="/">
    <results>
        <xsl:attribute name="total-results">
                <xsl:value-of select="root/openSearch:totalResults"/>
        </xsl:attribute>
    </results>
</xsl:template>
</xsl:stylesheet>
        """
    val xmlSource = new InputSource( new StringReader(xml) );
    val factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    val builder = factory.newDocumentBuilder();
    val document = builder.parse(xmlSource);

    // Use a Transformer for output
    val tFactory = TransformerFactory.newInstance();

    val stylesource = new StreamSource(new StringReader(styleSheet));
    val transformer = tFactory.newTransformer(stylesource);

    val writer = new StringWriter();

    val source = new DOMSource(document);
    val result = new StreamResult(writer);
    transformer.transform(source, result);
    writer.toString(); 
  } 
```

# disqus - 安装 Disqus 后从 URL 中删除多余的字符

> ID：14846451
> 
> 赞同：0
> 
> 时间：2013-02-13T04:35:34.607
> 
> 标签：disqus

安装 Disqus 后，一些 URL 被修改为包含带有 # 的额外字符

示例：/#.URsPE-hf3PX

我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:01:51.000

This was a documented issue with AddThis. This question is closed.

# html - 如何仅概述 HTML 中的元素

> ID：14846452
> 
> 赞同：0
> 
> 时间：2013-02-13T04:35:38.630
> 
> 标签：html, css, image, border

我有这个：

```
< h1 style="position: relative; top: -103px; left: 700px; border-width: thin; border-style: dotted; border-color: grey;">
< small>Three Stars Of The Week</small>
</p> 
```

它给了我一个带有灰色虚线的标题，该虚线结束于标题末端。它转到页面的末尾。

如何修复它以使边框仅围绕字母，而不是一直到页面末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:37:25.190

`h1`是一个块级元素，所以这是预期的行为。将其内容放在一个内联元素（例如`span`）中并设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:43:44.867

很明显，因为`<h>`（标题 1 到 6）标签是块元素，所以它会从页面的开始到结束。尝试使用`display:inline-block`. 像这样的东西

你的 CSS 类

```
.head-class{
  position:relative; 
  top: -103px; 
  left: 700px; 
  border-width: thin; 
  border-style: dotted; 
  border-color: grey;
  display:inline-block; /* style to make element as inline but block */
} 
```

你的元素

```
< h1 class="head-class"><small>Three Stars Of The Week</small></h1><br> 
```

# version-control - 没有 cvsnt，乌龟 cvs 可以单独工作吗？

> ID：14846455
> 
> 赞同：0
> 
> 时间：2013-02-13T04:36:04.430
> 
> 标签：version-control, cvs, tortoisecvs, cvsnt

我想在不制作服务器的情况下使用 tortoise tortoise cvs 创建一个本地存储库...有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:37:56.803

您可以在计算机上创建本地存储库。您创建一个空目录，并`cvs init`在其中调用（我猜在 TortoiseCVS 的安装目录中某处有一个 cvs.exe 或 cvsnt.exe。如果没有，您需要获取它）。然后您可以将任何本地文件夹导入此存储库。当您被要求输入 CVSROOT 时，您输入顶层文件夹的文件路径。

```
:: create the repository
c:
mkdir c:\repo
cvs -dc:\repo init

:: import something
mkdir initial
cd initial
echo 23>42
cvs -dc:\repo import first-module useless-tag-1 useless-tag-2 
```

路径名中的“\”字符可能存在问题，然后您可以尝试使用正斜杠。

但老实说，今天我使用 Mercurial 和[TortoiseHg](http://tortoisehg.bitbucket.io/)进行版本控制，它有更多的功能并且不那么痛苦。

# github - Github 的 markdown 中的自定义字体（如 README.md）？

> ID：14846457
> 
> 赞同：20
> 
> 时间：2013-02-13T04:36:34.530
> 
> 标签：github, markdown, github-flavored-markdown

是否可以在 github 的 markdown 中使用自定义字体？我目前正在将图像加载为徽标，但渲染字体会更快更好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T08:03:57.563

> 渲染字体会更快更好。

是的，除非你在所说的“图标作为字体”中不使用任何（多种）颜色。
请参阅“ [GitHub 使用自定义字体重新设计其图标](http://blog.horizon-nigh.org/post/22761621054/github-redesigns-its-icons-using-a-custom-font)”

> 当然，您可以采用单调字体渲染图标并将其颜色设置为例如红色或蓝色，但这会改变整个图标；你不能让图标的不同部分使用不同的颜色，或者使用阴影

（[此处图标字体的 CSS 效果](http://css-tricks.com/examples/IconFont/)示例，来自[Trello 文章](http://blog.fogcreek.com/trello-uses-an-icon-font-and-so-can-you/)）

但是，据我所见（[Markdown Cheatsheet](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet)和[Markdown Help](https://help.github.com/articles/github-flavored-markdown)），不，您不能拥有自定义字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-04T01:26:47.843

您可以拥有自定义字体，只需使用[https://github.com/crocodilejs/custom-fonts-in-emails](https://github.com/crocodilejs/custom-fonts-in-emails)生成它，然后您可以将图像/上传到 GitHub 自述文件。

# android - 在 Android 模拟器中运行 OpenCV 应用程序的应用程序崩溃

> ID：14846458
> 
> 赞同：1
> 
> 时间：2013-02-13T04:36:36.067
> 
> 标签：android, opencv, android-emulator

我正在尝试使用一些模拟器来运行我的应用程序进行调试。这个应用程序在我的手机上完美运行，但是当我将它加载到模拟器中时，每当我调用 opencv 函数时它就会崩溃。模拟器使用的是 intel atom x86 cpu。我必须用 arm7 运行它们吗？

堆栈跟踪：

```
 02-13 04:25:51.986: E/AndroidRuntime(2006): FATAL EXCEPTION: main
    02-13 04:25:51.986: E/AndroidRuntime(2006): java.lang.ExceptionInInitializerError
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at com.uas.Processor.extract(Processor.java:48)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at com.uas.ImageProcessorActivity.onMenuItemClick(ImageProcessorActivity.java:626)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.widget.PopupMenu.onMenuItemSelected(PopupMenu.java:142)
   02-13 04:25:51.986: E/AndroidRuntime(2006):  at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at com.android.internal.view.menu.MenuPopupHelper.onItemClick(MenuPopupHelper.java:156)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.os.Handler.handleCallback(Handler.java:725)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.os.Handler.dispatchMessage(Handler.java:92)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.os.Looper.loop(Looper.java:137)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at android.app.ActivityThread.main(ActivityThread.java:5039)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at java.lang.reflect.Method.invokeNative(Native Method)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at java.lang.reflect.Method.invoke(Method.java:511)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at dalvik.system.NativeStart.main(Native Method)
    02-13 04:25:51.986: E/AndroidRuntime(2006): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load opencv_java from loader dalvik.system.PathClassLoader[dexPath=/data/app/com.uas-1.apk,libraryPath=/data/app-lib/com.uas-1]: findLibrary returned null
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at java.lang.Runtime.loadLibrary(Runtime.java:365)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at java.lang.System.loadLibrary(System.java:535)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     at org.opencv.core.Mat.<clinit>(Mat.java:2065)
    02-13 04:25:51.986: E/AndroidRuntime(2006):     ... 20 more 
```

# c - 编写自己的 printf 函数，尝试包含 %p。

> ID：14846459
> 
> 赞同：0
> 
> 时间：2013-02-13T04:36:37.797
> 
> 标签：c, printf

所以我正在编写自己的 printf 函数，所以我正在使用 stdarg.h 和系统调用 write()。但我不知道如何将 %p 错误地放入我的函数中。%X 会产生相同的结果吗？

我已经 %x 这样做了：

```
'x': x=va_arg(argp,argp, unsigned int); 
     char *temp = convert(x,16);
     write(1, temp, lengthOFtemp);
     break;

char *convert(unsigned int, int)
{
static char buf[33];
char *ptr;

ptr=&buf[sizeof(buff)-1];
*ptr='\0';
do
{
*--ptr="0123456789abcdef"[num%base];
num/=base;
}while(num!=0);

return(ptr);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:45:11.210

%p 和 %X 之间的区别在于指针大小是特定于平台的 - 在 64 位平台上为 8 个字节，在 32 位平台上为 4 个字节。因此，您必须使用“unsigned long”变量来处理来自 va_args 的指针参数，而不是在某些 64 位平台上保持 4 个字节的“unsigned int”。

否则是的，非常类似于您上面的 %X 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:17:36.513

您可能喜欢使用

```
void * pv = va_arg(va, void*) 
```

从可变参数列表中拉出指针。

*为了以这种方式安全地接收指针，可变参数函数的调用者（如上所示执行拉取操作）需要将指针传递为被强制转换为`void *`.*

然后像这样转换为整数：

```
#include <inttypes.h>
...
uintptr_t uipv = (uintptr_t) pv; 
```

最后调用一个转换函数：

```
char buff[64] = {0};
char * pc = convert_uintptr(uipv, 16); 
```

和：

```
char * convert_uintptr(uintptr_t uipv, unsigned base); 
```

# facebook - 如何显示自定义消息代替空出生日期

> ID：14846463
> 
> 赞同：2
> 
> 时间：2013-02-13T04:37:04.780
> 
> 标签：facebook, android-facebook

我正在编写一个应用程序，我在其中获取 Facebook 好友列表及其头像、姓名和出生日期

但是我的一些朋友没有给出他们的生日日期，所以默认情况下我会得到 null 的位置，而不是 null，但现在**我**想显示：**Birthday Not Mentioned**。

请参阅下面我现有应用程序的屏幕截图：

喜欢：Vikas Rana 在 Facebook 上给了 DOB，而 AJay November 没有在 Facebook 上给 DOB

```
 > VikY
        January 1

      > AJamber
        Null 
```

在这里，我想显示的地方为**Null ：***未提及生日*

好友列表.java：

```
 public View getView(int position, View convertView, ViewGroup parent) {

        JSONObject jsonObject = null;
        try {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e) {

        }

        FriendItem friendItem;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.listfb_friends, null);
            friendItem = new FriendItem();

            convertView.setTag(friendItem);
        } else {
            friendItem = (FriendItem) convertView.getTag();
        }

        friendItem.friendPicture = (ImageView) convertView
                .findViewById(R.id.picture);
        friendItem.friendName = (TextView) convertView
                .findViewById(R.id.name);
        friendItem.friendDob = (TextView) convertView
                .findViewById(R.id.dob);
        friendItem.friendLayout = (RelativeLayout) convertView
                .findViewById(R.id.friend_item);

        try {
            String uid = jsonObject.getString("uid");
            String url = jsonObject.getString("pic_square");
            friendItem.friendPicture.setImageBitmap(picturesGatherer
                    .getPicture(uid, url));
        } catch (JSONException e) {

            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        try {
            friendItem.friendName.setText(jsonObject.getString("name"));
            if(!friendItem.friendDob.equals(""))
            {
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
            }
            else 
            {
            friendItem.friendDob.setText("Birthday Not Mentioned");
            }
        } catch (JSONException e) {

            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        listofshit.put(position, friendItem);
        return convertView;
    } 
```

如果我正在编写这样的代码：

```
 try {
            friendItem.friendName.setText(jsonObject.getString("name"));
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
        } catch (JSONException e) {

            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }
        finally
        {
            friendItem.friendDob.setText("Birthday Not Mentioned");
        } 
```

所以我会为所有 Facebook 朋友的生日得到未提及的生日，*即使对于他们也提到过*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:50:55.173

试试这个。

```
 try{
    if(jsonObject.getString("birthday")!= null && !jsonObject.getString("birthday").equals("")){
          friendItem.friendDob.setText(jsonObject.getString("birthday"));
    }else{
         friendItem.friendDob.setText("Birthday Not Mentioned");
    }
}catch(JSONException e){
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:32:21.647

你在哪里`NullPointerException`使用`try-catch`它。

我想你可能已经做到了。**现在**只需通过在`catch block`.

* * *

**只需使用：-**

```
try {
       friendItem.friendName.setText(jsonObject.getString("name"));
       friendItem.friendDob.setText(jsonObject.getString("birthday"));
    } 
catch (Exception e) {    
       friendItem.friendName.setText("Name");  // try it for now.
       friendItem.friendDob.setText("Birthday Not Mentioned"); // Have to be here.
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:01:41.897

只需尝试以下代码：

```
 try 
        {
            friendItem.friendName.setText(jsonObject.getString("name"));
            friendItem.friendDob.setText(jsonObject.getString("birthday"));

            if(!(jsonObject.getString("birthday").equalsIgnoreCase("null")))
            {
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
            }
            else
            {
            friendItem.friendDob.setText("Birthday Not Mentioned");
            }

        } catch (JSONException e) 
        {
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }
        listofshit.put(position, friendItem);
        return convertView;
    } 
```

# arrays - 确定大小为 n 的数组中是否有超过一半的键在 O(n) 时间内是相同的键？

> ID：14846464
> 
> 赞同：4
> 
> 时间：2013-02-13T04:37:06.837
> 
> 标签：arrays, algorithm, key, compare, complexity-theory

您有一个已知大小为 n 的键的数组或列表。不知道这个列表中有多少个唯一键，可能小到 0，大到包括 n。键没有特定的顺序，它们实际上不可能，因为这些键没有大于或小于的概念，只有相等或不等。现在在你说哈希映射之前，我认为还有一个条件会影响这个想法：每个键的值都是私有的。您可以获得的有关密钥的唯一信息是它是否等于另一个密钥。所以基本上：

```
class key{
    private:
        T data;
        ...
    public:
        ...
        bool operator==(const key &k){return data==k.data}
        bool operator!=(const key &k){return data!=k.data}
};

key array[n]; 
```

现在，有没有一种算法可以确定数组中超过一半的键是否在线性时间内是相同的键？如果不是，那么 O(n*log(n)) 呢？因此，例如说数组只有 3 个唯一键。数组的 60% 填充有 key.data==foo、30% key.data==bar 和 10% key.data==derp 的键。该算法只需要确定超过 50% 的键是同一类型的（具有 data==foo 的键）并返回其中一个键。

根据我的教授的说法，它可以在 O(n) 时间内完成，但他说我们只需要找到一个可以在 O(n*log(n)) 时间内完成的任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T05:49:32.367

如果您可以提取并保留任何密钥以进行进一步比较，那么[Boyer-Moore 多数投票算法](http://www.cs.utexas.edu/~moore/best-ideas/mjrty/index.html)就是您的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:42:28.840

如果您不想使用 BM 算法，您可以使用基于相同思想的以下 2 种算法。

算法 A。在每次运行时，维护一组 S 的 M（N 的一小部分，例如 10）对元素计数，同时遍历每个元素的数组：

```
1.1\. If element E is in the set, increase count of the corresponding pair (E,count) -> (E, count+1)
1.2\. If not, drop out element with minimal count and insert new pair (E,1) 
```

如果元素的频率 F > 0.5，它将在此过程结束时以概率（非常粗略，实际上要高得多）1 - (1-F)^M 出现在集合中，在第二次运行中计算元素的实际频率套。

算法 B. 取数组中随机选取的N个长度为M的元素，用任何方法选择最频繁的元素并计算它的频率和系列的中频，频率计算的最大误差为
F（realFrequency）/ sqrt（N） . 所以如果你得到 F_e* 1 - 1.0 /sqrt(N) ) > 0.5 那么你会找到最频繁的元素，如果你得到 F_e(1 + 1.0/sqrt(N)) < 0.5 这个元素不存在。F_e 是估计频率。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-13T04:50:45.513

我想到的一个解决方案是..您将从该数组中选择第一个元素，并遍历列表以及您放入单独的arraylist中的所有匹配元素，现在您从原始列表中选择第二个元素并将其与首先，如果它们相等，请留下这个元素并选择下一个。这可能是一个可能的解决方案。

# angularjs - AngularJS，解析和未知的提供者

> ID：14846466
> 
> 赞同：52
> 
> 时间：2013-02-13T04:37:22.153
> 
> 标签：angularjs

我有两条有决心的路线。像这样：

```
.when('/foos', {
templateUrl: 'views/foos.html',
controller: 'FoosCtrl',
resolve: {
    foo_list: ['$q', '$route', '$timeout', '$location', 'Foos', function($q, $route, $timeout, $location, Foos) {
        // postpone the execution
        var deferred_foo = $q.defer()

        Foos.getFoos({token:session_uid}, successCb)

        function successCb(list) {
            if(list['status'] === 200) {
                deferred_foo.resolve(list)
            }
            else {
                alert('Crashcrashcrash')
                deferred_foo.reject("Something just wasn't right")
                //$location.path('maintenance')
            }
        }
        return deferred_foo.promise
        }]
    }
})
.when('/r/:type/:bar_id', {
    templateUrl: 'views/bar.html',
    controller: 'BarsCtrl',
    resolve: {
        bar: ['$q', '$route', '$timeout', '$location', 'Bars', function($q, $route, $timeout, $location, Bars) {
            // postpone the execution
            var deferred = $q.defer()

            Bars.getBar({type: bar_type}, successCb)    

            function successCb(result) {
                if(result['status'] === 200) {
                    deferred.resolve(result)    
                }
                else {
                    alert('Crashcrashcrash')
                    deferred.reject("Something just wasn't right")
                    $location.path('foos')
                }

                return deferred.promise
                }]
            }
        }) 
```

然后我有两个控制器像这样工作：

```
 App.controller('FoosCtrl', ['$scope', '$location', 'Foos', 'foo_list', function($scope, $location, Foos, foo_list) {...}

 App.controller('BarsCtrl', ['$scope', '$routeParams', '$location', 'Bars', 'bar', 'sharedService', function($scope, $routeParams, $location, Bars, bar, sharedService) {...} 
```

有人可以解释为什么 Bar 有效但 Foo 给了我`Error: Unknown provider: foo_listProvider <- foo_list`吗？`foo_list`如果 camelCasing 做了一些事情但没有帮助，我尝试用不同的名称替换。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-08-19T01:55:14.770

所以，这个问题与我自己的问题惊人地相似，我只是在 Angular IRC 频道的人们的帮助下才发现的......你是不是碰巧设置了你的控制器`ng-controller`？我有：

```
 <div ng-controller="myCtrl"> 
```

...当它应该被删除时：

```
 <div> 
```

...因为我在路由器上的解析中设置了控制器。这就是我正在做的事情，它导致了这个问题。你可以在这里看到更多：

[https://stackoverflow.com/a/18305423/1306982](https://stackoverflow.com/a/18305423/1306982)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T00:43:19.563

foo_list <- 是在脚本标签中的 html 页面中加载的 js 文件吗？可能是当您忘记包含工厂/服务/控制器并且实际上忘记将其包含在 index/app html 页面的脚本标记中（或需要垫片）时

好的，刚刚看到您的评论并在这里扩展答案，因为在这里更容易做到。

您声明控制器的代码应如下所示

```
App.controller('FoosCtrl', 
   ['$scope', '$location', 'Foos', /* comment out foo_list here*/ 
    function($scope, $location, Foos, foo_list /* this remains */) {
  ...
} 
```

当路线发生变化时，您在“解决”中提到的事情将由 ui-router 解决。但是，在您声明 FoosCtrl 的地方，您实际上并没有提供者来解决它。

试试这个，上周我也遇到过类似的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T07:22:10.493

提醒一下，我刚刚遇到了一个类似的问题，这是由于将解析变量作为依赖项添加到控制器而尚未设置响应功能而引起的`$stateProvider.state()`。

添加 resolve 函数修复了缺少的依赖项
（我仍然不太明白为什么 - 如果有人可以在评论中分享他的知识，我会很高兴）

# ios - 向服务器发送 JSON 对象请求

> ID：14846474
> 
> 赞同：0
> 
> 时间：2013-02-13T04:38:11.267
> 
> 标签：ios, objective-c, json, cocoa-touch

我正在向服务器发送 JSON 对象请求，但服务器返回状态码 405。如何解决此问题。请任何人帮助我。我的代码：

```
+(NSData *)GpBySalesDetailed:(NSMutableDictionary *)spDetailedDict{

NSLog(@"spDetailedDict:%@",spDetailedDict);
NSString *dataString = [spDetailedDict JSONRepresentation];
NSLog(@"%@dataString",dataString);

return [dataString dataUsingEncoding:NSUTF8StringEncoding];
}
-(void)requestWithUrl:(NSURL *)url WithJsonData:(NSData *)JsonData
{
   NSMutableURLRequest *urlRequest=[[NSMutableURLRequest alloc]initWithURL:@"http://srbisolutions.com/SmartReportService.svc/GpBySalesPersonDetailed];
if (JsonData != nil) {
    [urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [urlRequest setHTTPMethod:@"POST"];
    [urlRequest setHTTPBody:JsonData];
}
else
{
    [urlRequest setHTTPMethod:@"GET"];  
}
NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES];
[conn start];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:52:56.640

HTTP 代码 405 表示“方法不允许”，它不接受对此特定 URI 的发布请求。服务器必须配置为接受 POST 请求，或者它应该提供另一个 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:43:53.720

```
 NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"yourURL"]];

            [theRequest setHTTPMethod:@"POST"];

            NSDictionary *jsonRequest =
            [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@//add your objects
                                                 ]
                                        forKeys:[NSArray arrayWithObjects:
                                                 title,
                                                 link,
                                                 nil]];

            NString *jsonBody = [jsonRequest JSONRepresentation];
            NSLog(@"The request is %@",jsonBody);

            NSData *bodyData = [jsonBody dataUsingEncoding:NSUTF8StringEncoding];
            [theRequest setHTTPBody:bodyData];

            [theRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
            // create the connection with the request

            // and start loading the data

            theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:14:12.450

尝试这个

```
 NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:YOURURL  
                 cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:10.0 ];

        NSLog(@"final request is %@",request);

        [request setHTTPMethod:@"POST"];

        [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

     //Here postData is a Dictionary with key values in web services format  use ur own dic

        [request setHTTPBody:[[self convertToJSON:postData] dataUsingEncoding:NSUTF8StringEncoding]];  

        NSString    *contentLength = [NSString stringWithFormat:@"%d",[[request HTTPBody] length]]; 
        [request setValue:contentLength forHTTPHeaderField:@"Content-Length"];

        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 

        if (connection) 
        {
            self.responseData = [NSMutableData data];
        }

//============JSON CONVERSION========
-(NSString *)convertToJSON:(id)requestParameters
{
    NSData *jsonData   = [NSJSONSerialization dataWithJSONObject:requestParameters options:NSJSONWritingPrettyPrinted error:nil];

    NSLog(@"JSON DATA LENGTH = %d", [jsonData length]);

    NSString *jsonString    = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    NSLog(@"JSON STR LENGTH = %d", [jsonString length]);

    return jsonString;

} 
```

# c# - SharePoint 部署可重用代码

> ID：14846476
> 
> 赞同：1
> 
> 时间：2013-02-13T04:38:24.820
> 
> 标签：c#, sharepoint-2010, solid-principles

我刚刚继承了一个我想要重构的 SharePoint 项目，并采用所有通用/可重用代码并将其放置在解决方案中的一个单独项目中。该解决方案已经有多个项目，并且几乎所有项目在解决方案中的一个或多个其他项目之间都有依赖关系。

我希望将所有依赖项（SPMetal 类、静态方法、实用程序等）放入一个项目中，以便公共代码只需要一个引用（并且没有代码克隆）

我重构了项目，现在我正在尝试将此代码部署到 SharePoint 服务器（通过 VS2012 部署到本地开发服务器和通过 WSP 部署到生产服务器）。我最初尝试`Common.dll`在所有其他项目的“附加程序集”列表中添加（在`Package`文件中），但这导致所有 WSP 部署失败并出现以下错误：

```
Cannot add the specified assembly to the global assembly cache 
```

这是因为`Common.dll`owstimer 和其他一些服务正在使用 并且无法删除。

我的下一个想法是将代码部署为一项功能，然后使所有其他功能都依赖于它，但是，我不知道该怎么做。有没有办法让一个功能只包含类？

是否有更好的方法使公共代码可用于多个 SharePoint 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:41:33.883

根据错误，您似乎没有对“Common.dll”程序集进行强签名。结果它无法安装在 GAC 中。

# java - 从 2 点获取子弹 X 到 Y 的移动比率

> ID：14846477
> 
> 赞同：0
> 
> 时间：2013-02-13T04:38:32.270
> 
> 标签：java, math, angle, projectile

我正在制作非常简单的游戏。屏幕上有一个带枪的精灵，他朝鼠标指向的方向发射子弹。我用来执行此操作的方法是根据 2 个点（精灵的中心和鼠标位置）找到 X 与 Y 的比率。X 与 Y 的比率本质上是“每次 X 变化 1，Y 变化 __”。

到目前为止，这是我的方法：

```
public static Vector2f getSimplifiedSlope(Vector2f v1, Vector2f v2) {
    float x = v2.x - v1.x;
    float y = v2.y - v1.y;

    // find the reciprocal of X
    float invert = 1.0f / x;
    x *= invert;
    y *= invert;

    return new Vector2f(x, y);
} 
```

然后将此 Vector2f 传递给子弹，子弹每帧移动该数量。

但它不起作用。当我的鼠标直接位于精灵的上方或下方时，子弹移动得非常快。当鼠标在精灵的右侧时，它们移动得非常慢。如果鼠标在左侧，子弹同样从右侧射出。

当我从混合中删除反转变量时，它似乎工作正常。所以这是我的两个问题：

1.  我是否偏离了轨道，并且有一种更简单、更清洁、更广泛使用等方式来做到这一点？
2.  如果我在正确的轨道上，我如何“规范化”向量，使其保持不变，无论鼠标离精灵有多远？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:45:28.763

使用向量对您有利。我不知道Java的`Vector2f`类是否有这个方法，但我会这样做：

```
return (v2 - v1).normalize(); // `v2` is obj pos and `v1` is the mouse pos 
```

要对向量进行归一化，只需将其（即每个分量）除以*整个向量*的大小：

```
Vector2f result = new Vector2f(v2.x - v1.x, v2.y - v1.y);
float length = sqrt(result.x^2 + result.y^2);

return new Vector2f(result.x / length, result.y / length); 
```

结果是单位向量（其大小为 1）。所以要调整速度，只需缩放矢量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:47:36.890

是的，这两个问题：

*   要找到您所说的比率，您可以使用*arctan*函数，该函数将提供从第一个对象到第二个对象的向量的角度
*   标准化它，因为现在你从一个不需要做任何事情的角度开始：你可以直接使用[极坐标](http://en.wikipedia.org/wiki/Polar_coordinate_system)

代码相当简单：

```
float magnitude = 3.0; // your max speed
float angle = Math.atan2(y,x);
Vector2D vector = new Vector(magnitude*sin(angle), magnitude*cos(angle)); 
```

# javascript - JS：检查文本是否超过容器宽度

> ID：14846478
> 
> 赞同：3
> 
> 时间：2013-02-13T04:38:35.667
> 
> 标签：javascript, jquery, html, css, dom

是否有一个 js 或 jQuery 函数可以检测 innerHTML 或文本是否在被其容器剪切的某个像素数内？

我需要为页面上的几百个元素执行此操作，因此性能有点重要。

示例 - 确定其中的文本`<td>`是否在超过其宽度的 5px 内：

```
<td class="cell">
  12,3423
</td>

.cell {
   width: 20px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T04:56:25.663

试试这个

```
$.fn.textWidth = function(){
  var html_org = $(this).html();
  var html_calc = '<span>' + html_org + '</span>';
  $(this).html(html_calc);
  var width = $(this).find('span:first').width();
  $(this).html(html_org);
  return width;
};

$(function(){
   alert($('.cell').textWidth());    
}); 
```

小提琴[http://jsfiddle.net/Hpyay/](http://jsfiddle.net/Hpyay/)

[计算文本宽度](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)可能重复（**以及从上面复制的代码**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:57:37.170

你需要包裹一些东西（p，div等等）然后你得到那个元素的宽度/高度

```
 <td><p>text...</p></td> 
```

进行计算`$("td>p").width()`

但如果它只是文本或图像（带有`max-width:100%`），除非你不换行......

# php - Yii urlManager 无限参数

> ID：14846482
> 
> 赞同：3
> 
> 时间：2013-02-13T04:39:15.703
> 
> 标签：php, yii

yii有没有办法让参数不受限制

例如，我有模块 /admin/

```
'urlManager'=>array(
  'urlFormat'=>'path',
    'showScriptName'=>false,
    'caseSensitive'=>false,
    'rules'=>array(
      '<controller:\w+>/<id:\d+>'=>'<controller>/view',
      '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
      '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',                
      'admin/<controller:\w+>/<action:\w+>/<id:\d+>' => 'admin/<controller>/<action>',
      'admin/<controller:\w+>/<action:\w+>'=>'admin/<controller>/<action>',          
    ),
  ), 
```

在管理模块中，我需要每个动作都可以有无限的参数，例如：

```
 /admin/anycontroller/anyaction/anything
 /admin/anycontroller/anyaction/anything/anything2
 /admin/anycontroller/anyaction/anything/anything2/anything3
 /admin/anycontroller/anyaction/anything/anything2/anything3/anything4 
 ... and so on 
```

我应该在规则上一一定义吗？或者有捷径可以做到这一点？

以及如何在控制器动作中捕捉它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T05:01:52.930

有一个捷径：

```
'admin/<controller:\w+>/<action:\w+>/*'=>'admin/<controller>/<action>' 
```

即在规则后面加上`/*`

由于这是一个更通用的规则，它可以捕获很多 url，最好将它放在底部，或者至少在任何特定规则之后，即：

```
// ... other specific rules ...
'<controller:\w+>/<action:\w+>/<id:\w+>'=>'<controller>/<action>', // specifically for id
// ... other specific rules ...
'admin/<controller:\w+>/<action:\w+>/*'=>'admin/<controller>/<action>' 
```

对于您的情况：

```
'<controller:\w+>/<id:\d+>'=>'<controller>/view',
'<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
'<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
'admin/<controller:\w+>/<action:\w+>/<id:\d+>' => 'admin/<controller>/<action>',
'admin/<controller:\w+>/<action:\w+>'=>'admin/<controller>/<action>',
'admin/<controller:\w+>/<action:\w+>/*'=>'admin/<controller>/<action>' 
```

* * *

要在动作中捕获它，只需不要为动作指定任何参数，如下所示：

```
public function actionSomething() {
    // instead use $_GET
    $params=$_GET;

} 
```

但它也应该适用于您已有的定义：`public function actionAnyAction($id=0,$type='',$type2='')`

# neo4j - Torquebox 后台方法调用

> ID：14846487
> 
> 赞同：0
> 
> 时间：2013-02-13T04:39:44.510
> 
> 标签：neo4j, torquebox

我正在使用 Torquebox 构建一个带有嵌入式 Neo4j 实例作为数据存储的 Rails 应用程序。我读过多个博客都说 Torquebox 非常适合这个，因为 Backgroundable 方法调用在同一个进程中运行（替换在 jRuby 下无论如何都不起作用的延迟作业）。

不幸的是，在玩弄它之后，显然情况并非如此，因为新线程一直在尝试启动 Neo4j，但它失败了。

在查看文档后，我确实发现了这一点，这证实了这一点：

> 消息处理器在与应用程序不同的 ruby​​ 运行时中运行，如果您有集群，它可能在不同的机器上。

我是 Torquebox 的新手，所以我不确定人们是否对此不正确，或者 Torquebox 是否有另一种方式来执行在同一进程中运行的异步调用，以便它可以与嵌入式 Neo4j 数据存储进行交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:50:58.847

我不熟悉`Rails`/ ，但是您是否在每个线程中`Torquebox`创建一个新图表？`Neo4j`如果是这样，在`Neo4j`嵌入式环境中，只能与图形数据库建立一个连接。如果您托管 a`Neo4j`并使用`RESTful`客户端调用数据库，则可以有多个客户端。

# internet-explorer - Internet Explorer 无法打开扩展名为“.DOC”的 Microsoft Word 文件

> ID：14846493
> 
> 赞同：0
> 
> 时间：2013-02-13T04:40:12.463
> 
> 标签：internet-explorer, attachment, doc

我的 Java Web 应用程序有一个文档文件。当我尝试通过单击链接下载文件时，它会打开一个带有损坏字符的新页面作为另一个选项卡。当我尝试保存页面时，它保存为 .htm 文件

但该文件已在其他浏览器（如 Chrome、Firefox）中正确下载。我通过将扩展名从 .DOC 更改为 .doc 来进行检查，我可以下载该文件。

.DOC 在 IE 中打开损坏的页面是否有特殊原因。为什么它只发生在 IE 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T20:11:17.280

我刚刚遇到了同样的问题，发现原因是应用程序服务器（在我的例子中是 Tomcat）上缺少 MIME 类型映射。对于 Tomcat，您可以通过将以下内容添加到 conf/web.xml 来解决此问题：

```
<mime-mapping>
    <extension>doc</extension>
    <mime-type>application/msword</mime-type>
</mime-mapping> 
```

您需要编辑的确切文件将根据您的应用程序服务器而有所不同，但是通过 Google 快速搜索您的 AS 和“mime 类型映射”应该会告诉您需要编辑的内容和位置。

我应该注意旧版本的 Tomcat（在 Tomcat 8 之前发布）对 MIME 类型映射是区分大小写的，因此如果您发现 .doc 有效但 .DOC 无效，请在 web.xml 文件中添加一个附加条目，其中 DOC 为扩展名。

# c++ - seq_cst 排序是否保证立即可见？

> ID：14846494
> 
> 赞同：4
> 
> 时间：2013-02-13T04:40:24.200
> 
> 标签：c++, multithreading, c++11, atomic

N3243 1.10.21 说

> 可以证明，正确使用互斥锁和 memory_order_seq_cst 操作来防止所有数据竞争并且不使用其他同步操作的程序表现得好像它们的组成线程执行的操作只是交错的，对象的每个值计算都取自交错中对该对象的最后一个副作用。这通常被称为“顺序一致性”。

这是否意味着对原子对象的任何**seq_cst写入对使用****seq_cst**排序读取原子对象的其他线程立即可见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T10:48:31.587

不，C++ 标准中没有任何内容可以保证即时可见性。

原子写入应该在“合理”时间内对其他线程可见，但它们不必是立即的，并且没有“合理”的精确定义。

**保证的**是有一个单一的总`memory_order_seq_cst`操作顺序。因此，没有看到写入值的读取必须在该总顺序中比写入更早发生。由于这个总顺序包含**所有**变量和**所有** `memory_order_seq_cst`操作，如果线程之间有任何通信，那么写入必须很快变得可见。

# javascript - 将带有ajax请求的数组发送到php

> ID：14846496
> 
> 赞同：11
> 
> 时间：2013-02-13T04:40:39.570
> 
> 标签：javascript, php, jquery, ajax

我创建了这样的数组`["9", "ques_5", "19", "ques_4"]`。现在我想将它从 JS 发送到 PHP，但我没有得到正确的结果。我的 JS 代码是：

```
$(".button").click(function(e) {

    e.preventDefault();
    $.ajax({
        type    : 'post', 
        cache   : false,
        url     : 'test/result.php',
        data    : {result : stuff},
        success: function(resp) {
            alert(resp);
        }
    });
}); 
```

在上面的代码`stuff`中是一个包含记录的数组。如何使用上面的代码发送这个数组，然后在 PHP 中我想处理这个数组，就像`ques_5`键一样，`9`成为那个键的值。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T05:36:16.297

您可以将数据作为[JSON](http://www.w3schools.com/json/)对象传递给 PHP 脚本。假设您的 JSON 对象如下：

```
var stuff ={'key1':'value1','key2':'value2'}; 
```

您可以通过两种方式将此对象传递给 php 代码：

**1\. 将对象作为字符串传递：**

AJAX 调用：

```
$.ajax({
    type    : 'POST',
    url     : 'result.php',
    data    : {result:JSON.stringify(stuff)},
    success : function(response) {
        alert(response);
    }    
}); 
```

您可以处理传递给`result.php`as 的数据：

```
$data    = $_POST["result"];
$data    = json_decode("$data", true);

//just echo an item in the array
echo "key1 : ".$data["key1"]; 
```

**2.直接传递对象：**

AJAX 调用：

```
$.ajax({
    type    : 'POST',
    url     : 'result.php',
    data    : stuff,
    success : function(response) {
        alert(response);
    }    
}); 
```

直接`result.php`从`$_POST`数组中处理数据：

```
//just echo an item in the array
echo "key1 : ".$_POST["key1"]; 
```

这里我推荐第二种方法。但你应该尝试两者:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T04:45:54.333

如果您想发送键值对，这就是我所看到的，最好使用 PHP JSON 库（就像这个... [http://php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php) )

然后您可以使用 JSON 格式发送实际的键值对，例如... {"ques_5" : "19", "ques_4": "19"}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T04:46:25.667

试试这个

```
var array = ["9", "ques_5", "19", "ques_4"];
console.log(array.join(","));
```

上面的代码将输出用逗号分隔的字符串，`9,ques_5,19,ques_4`然后将其粘贴到 ajax 调用。

然后在`php explode`那个字符串中。

其他可能的解决方案。

**第一的**

```
var obj = { 'item1': 'value1', 'item2': 'value2' };

$.ajax(
{
    type:  'post', 
    cache:  false ,
    url:  'test/result.php',
    data:  { result : JSON.stringify(obj) },
    success: function(resp)
    {
        alert(resp);
    } 
});
```

**第二**

```
var a = $.JSON.encode(obj);

$.ajax(
{
    type:  'post', 
    cache:  false ,
    url:  'test/result.php',
    data:  { result : a },
    success: function(resp)
    {
        alert(resp);
    } 
});

In PHP File

<?php
    $json = $_POST["data"]
    var_dump(json_decode($json));
?>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T04:53:51.717

您可以将`array in json`格式发送到 php，然后使用`json_decode`函数来取回数组，例如

在 ajax 调用中，您必须为此发送 json，您需要首先制作值数组，以便您以正确的形式获取它，以便您的 json 看起来像`{"ques_5":"9","ques_4":19}`

并在ajax调用中使用

```
 data: JSON.stringify(`your created json`),
 contentType: "application/json; charset=utf-8",
 dataType: "json", 
```

在 PHP 中它看起来像

```
<?php
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';
var_dump(json_decode($json));
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-14T11:49:38.753

我想分享一个对我有用的完整示例，以避免为每个 PHP 函数创建每个 JavaScript 函数

// 在 HTML 端，来自链接的简单 JavaScript 调用

```
 <a href="javascript:CargaZona('democonllamada', 'tituloprin', {'key1':'value1','key2':'value2'})" >test</a>
<div id='tituloprin' >php function response here!</div> 
```

// 在 JavaScript 端

```
function CargaZona(fc, div, params) {
    var destino = "#" + div;
    var request = $.ajax({
        url : "inc/phpfunc.php",
        type : "POST",
        data : {
            fc : fc,
            params : JSON.stringify(params)
        },
        dataType : "html"
    });

    request.done(function (msg) {
        $(destino).html(msg);
    });

    request.fail(function (jqXHR, textStatus) {
        alert("Request failed: " + textStatus);
    });
} 
```

// 在 phpfunc.php 页面上

```
<?php

$params = "{'key1':'value1','key2':'value2'}"; 
$fc = 'def';
if (isset($_POST['fc']))   {    $fc = $_POST['fc']; }
if (isset($_POST['params']))   {    $params = $_POST['params']; }

switch ($fc) {
    default:
        call_user_func($fc,$params);
}

function democonllamada($params) {
    $params = json_decode("$params", true);
    echo "ok llegaron".$params['key1'];
}

?> 
```

# jquery - 如何让图像移动到下一个单元格

> ID：14846500
> 
> 赞同：-1
> 
> 时间：2013-02-13T04:41:19.787
> 
> 标签：jquery, html, cell, tabular

我正在尝试制作迷宫，并且正在使用一张桌子。我希望它通过键盘控件进行控制（左=移动到下一个单元格，下=移动到下一行，等等......）。查询可以吗？它必须移动到表格中的特定单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:52:58.913

我能想到的最简单的方法是将所有元素设置为`position: absolute`而不是将它们放入表格中。因为如果 is 更容易移动`position: absolute`。

移动时，您将需要[`$.animate`](http://api.jquery.com/animate/)动画效果。您需要自己计算（我认为这并不难）并设置如下参数：

```
$('.block').click(function() {
    $(this).animate({
        left: 100,
        top: 200
    }, 3000); // animation time is 3 seconds
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:13:17.653

好的，这就是你可以做的，说起点是表中的第一个 tr 和 td 。我只是要做这种蛇风格，其中玩家的位置是 td 是红色背景的地方。您可以设置填充以使框更大。

确定 2 个变量，tr 和 td。将两者都设置为 0。背景设置为红色。

使用 jquery 来检测上下左右的按下。如果正确，td+=1。如果离开，td-=1。如果向上，则 tr+=1，如果向下，则 tr+=1。然后通过指定条件设置墙壁。如果 tr == 0 和 to == 0 则不能行走，因为有一堵墙。然后你也应该把那个单元格变成蓝色或其他东西，因为它是一堵墙。您可以通过使用第 n 个子选择器和 .css 来做到这一点，如下所示。

要知道您在哪个框，请使用第 n 个子选择器和 .css。

要选择第一行第二个单元格， $('table tr:nth-child(1) td:nth-child(2)').css([do some changes to css here]); 你可以设置里面的背景颜色。

对于墙，您可以在包含 tr 和 tds 的数组中设置预先确定的值并将它们循环出来并为每个放置一个 .css() 以将单元格变为蓝色。

我在手机上输入所有这些。我希望我很清楚。如果您需要进一步解释，请告诉我。

# ruby - Ruby 等价于 ReadString？

> ID：14846505
> 
> 赞同：2
> 
> 时间：2013-02-13T04:41:56.807
> 
> 标签：ruby, c++-cli

我正在开发一个带有“客户制造”数据库的项目。他开发了一个 C++/CLI 应用程序，该应用程序使用 BinaryWriter.Write(String) 和 BinaryReader.ReadString() 方法从二进制文件中存储和检索他的数据。

我不是 C++/CLI 专家，但据我了解，这些方法使用第一个字节的 7 位编码来确定字符串长度。

我需要从铁路应用程序访问他的数据，有人知道如何在 ruby​​ 中做同样的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:56:01.153

如果您正在处理原始二进制数据，您可能需要花一些时间熟悉`pack`和`unpack`方法及其各种选项。也许您所描述的是一个“帕斯卡字符串”，其中长度是预先编码的，或者是它的变体。

例如：

```
length = data.unpack("C")[0]
string = data.unpack("Ca#{length}")[0] 
```

double-`unpack`是必需的，因为在执行第一步之前您不知道要解压的字符串的长度。您也可以使用子字符串来执行此操作，例如，`data[1,length]`如果您有理由确定您没有处理 UTF-8 数据。

# javascript - .append()、prepend()、.after() 和 .before()

> ID：14846506
> 
> 赞同：225
> 
> 时间：2013-02-13T04:42:48.587
> 
> 标签：javascript, jquery, append, prepend, jquery-after

我非常精通编码，但时不时地遇到一些似乎做基本相同事情的代码。我的主要问题是，你为什么要使用`.append()`而不是`.after()`或反之亦然？

我一直在寻找，似乎无法找到两者之间差异的明确定义，以及何时使用它们以及何时不使用它们。

一个比另一个有什么好处，为什么我要使用一个而不是另一个？有人可以向我解释一下吗？

```
var txt = $('#' + id + ' span:first').html();
$('#' + id + ' a.append').live('click', function (e) {
    e.preventDefault();
    $('#' + id + ' .innerDiv').append(txt);
});
$('#' + id + ' a.prepend').live('click', function (e) {
    e.preventDefault();
    $('#' + id + ' .innerDiv').prepend(txt);
});
$('#' + id + ' a.after').live('click', function (e) {
    e.preventDefault();
    $('#' + id + ' .innerDiv').after(txt);
});
$('#' + id + ' a.before').live('click', function (e) {
    e.preventDefault();
    $('#' + id + ' .innerDiv').before(txt);
}); 
```

* * *

## 回答 #1

> 赞同：483
> 
> 时间：2013-02-13T04:58:43.883

## 看：

* * *

`.append()`将数据放在元素中`last index`，
`.prepend()`并将前置元素放在`first index`

* * *

## 认为：

```
<div class='a'> //<---you want div c to append in this
  <div class='b'>b</div>
</div> 
```

## 执行时`.append()`将如下所示：

```
$('.a').append($('.c')); 
```

执行后：

```
<div class='a'> //<---you want div c to append in this
  <div class='b'>b</div>
  <div class='c'>c</div>
</div> 
```

* * *

### [在执行中摆弄 .append() 。](http://jsfiddle.net/hB2E4/4/)

* * *

## 执行时`.prepend()`将如下所示：

```
$('.a').prepend($('.c')); 
```

执行后：

```
<div class='a'> //<---you want div c to append in this
  <div class='c'>c</div>
  <div class='b'>b</div>
</div> 
```

* * *

### [在执行中摆弄 .prepend() 。](http://jsfiddle.net/hB2E4/5/)

* * *

`.after()`将元素放在元素之后 将元素
`.before()`放在元素之前

* * *

## 之后使用：

```
$('.a').after($('.c')); 
```

执行后：

```
<div class='a'>
  <div class='b'>b</div>
</div>
<div class='c'>c</div> //<----this will be placed here 
```

* * *

### [在执行中摆弄 .after() 。](http://jsfiddle.net/hB2E4/2/)

* * *

## 之前使用：

```
$('.a').before($('.c')); 
```

执行后：

```
<div class='c'>c</div> //<----this will be placed here
<div class='a'>
  <div class='b'>b</div>
</div> 
```

* * *

### [在执行中摆弄 .before() 。](http://jsfiddle.net/hB2E4/3/)

* * *

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2014-12-21T12:57:59.970

下面显示的这张图片提供了清晰的理解，并显示了 、`.append()`和之间的确切区别`.prepend()``.after()``.before()`

![jQuery 信息图](../Images/da3624dcf0a4aee3ed74981e8e8efe4f.png)

您可以从图像中看到`.append()`，`.prepend()`并将新元素作为**子**元素*（棕色）*添加到目标。

并将新元素作为**兄弟**元素*（黑色）*`.after()`添加到目标。`.before()`

 ***这是一个**[DEMO](http://jsfiddle.net/k4raa2gh/1/)**，以便更好地理解。

* * *

编辑：这些功能的翻转版本：

[![jQuery 插入信息图，以及函数的翻转版本](../Images/e51f78f25bace1fbd2f97383eff41c47.png)](https://i.stack.imgur.com/KatFd.png)

使用[此代码](http://jsfiddle.net/BobStein/uczj4ftm/)：

```
var $target = $('.target');

$target.append('<div class="child">1\. append</div>');
$target.prepend('<div class="child">2\. prepend</div>');
$target.before('<div class="sibling">3\. before</div>');
$target.after('<div class="sibling">4\. after</div>');

$('<div class="child flipped">or appendTo</div>').appendTo($target);
$('<div class="child flipped">or prependTo</div>').prependTo($target);
$('<div class="sibling flipped">or insertBefore</div>').insertBefore($target);
$('<div class="sibling flipped">or insertAfter</div>').insertAfter($target); 
```

在这个目标上：

```
<div class="target">
    This is the target div to which new elements are associated using jQuery
</div> 
```

* * *

因此，尽管这些函数颠倒了参数顺序，但每个函数都会创建相同的元素嵌套：

```
var $div = $('<div>').append($('<img>'));
var $img = $('<img>').appendTo($('<div>')) 
```

...但它们返回不同的元素。这对于[方法链接](https://stackoverflow.com/a/1104078/673991)很重要。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-02-13T04:54:44.363

`append()`&`prepend()`用于在元素内插入内容（使内容成为其子元素），而`after()`&`before()`在元素外插入内容（使内容成为其兄弟）。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-02-13T04:59:19.917

最好的方法是文档。

## `.append()`对比`.after()`

*   . [`append()`](http://api.jquery.com/append/): 将参数指定的内容插入**到匹配元素集中每个元素的末尾**。
*   . ：在匹配元素集中的每个元素 **之后**[`after()`](http://api.jquery.com/after/)插入由参数指定的内容。

 **## `.prepend()`对比`.before()`

*   [`prepend()`](http://api.jquery.com/prepend/): 将参数指定的内容插入**到匹配元素集中每个元素的开头**。
*   . ：在匹配元素集中的每个元素**之前**[`before()`](http://api.jquery.com/before/)插入由参数指定的内容。

 **因此，append 和 prepend 指的是对象的子对象，而 after 和 before 指的是对象的兄弟姐妹。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-02-13T05:02:56.460

`.append()`和`.after()`和`.prepend()`和之间有一个基本的区别`.before()`。

`.append()`*在最后的选择器元素标签内*添加参数元素，而*在元素标签之后*`.after()`添加参数元素。

 *反之亦然`.prepend()`和`.before()`。

[小提琴](http://jsfiddle.net/2RYkg/1/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-02-13T05:20:21.397

他们每个人都没有额外的优势。这完全取决于您的情况。下面的代码显示了它们的区别。

```
 Before inserts your html here
<div id="mainTabsDiv">
    Prepend inserts your html here
    <div id="homeTabDiv">
        <span>
            Home
        </span>
    </div>
    <div id="aboutUsTabDiv">
        <span>
            About Us
        </span>
    </div>
    <div id="contactUsTabDiv">
        <span>
            Contact Us
        </span>
    </div>
    Append inserts your html here
</div>
After inserts your html here 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-10-02T16:08:12.287

```
<div></div>    
// <-- $(".root").before("<div></div>");
<div class="root">
  // <-- $(".root").prepend("<div></div>");
  <div></div>
  // <-- $(".root").append("<div></div>");
</div>
// <-- $(".root").after("<div></div>");
<div></div> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-11-17T16:42:59.893

**将DOM** （HTML 页面）想象成一棵树吧。HTML 元素是这棵树的节点。

向您调用它的节点`append()`添加一个新节点`child`。

```
Example:$("#mydiv").append("<p>Hello there</p>") 

creates a child node <p> to <div> 
```

将`after()`一个新节点作为兄弟节点或在同一级别或子节点添加到您调用它的节点的父节点。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-26T12:21:28.337

## 尝试回答您的*主要*问题：

### **为什么**要使用 .append() 而不是 .after() 或反之亦然？

当您使用 jquery 操作 DOM 时，您使用的方法取决于您想要的结果，并且经常使用的是替换内容。

在替换内容时，您想要`.remove()`的内容并将其替换为新内容。如果您`.remove()`使用现有标签然后尝试使用`.append()`它，因为标签本身已被删除，因此它将不起作用，而如果您使用`.after()`，则新内容将添加到（现在已删除）标签的“外部”，并且不受前一个标签的影响`.remove()`.********

# hibernate - JPA 合并（）最佳实践

> ID：14846508
> 
> 赞同：5
> 
> 时间：2013-02-13T04:42:58.470
> 
> 标签：hibernate, jpa, concurrency, locking, pessimistic-locking

我为它实现了一个服务`entity object`，它使用了 pure `jpa`，我使用了`spring`，所以`spring xml config`配置`hibernate`为一个`jpa`impl。我正在使用`spring`数据进行`crud`操作。但是在我们的系统中，我们的`entity`对象被多次**拉取/更新**`concurrency`，并且数据存在高竞争（）。从我们在许多地方的代码中，很多`classes`只是`inject`服务 bean 和调用`getEntity`方法来获取一个实体，之后他们更改实体（据我的理解，这是分离的，但在同一个线程中，所以 em 对象应该与我的知识相同）所以实体需要一段时间才能回到服务进行更新，他们调用`save()`服务的方法来保存实体。`Save()`方法只不过是调用`merge()`粗加工操作。它是带有`@Transactional`注释的事务性的。这里出现了一个问题，当有人拉动一个实体对象并且在更改它时其他人可能会拉动并更改它并将其保存回来，所以我的实体读取是脏的，如果保存它，我将覆盖已经更新的实体。问题是我们正在改变服务之外的实体并调用保存。这里 spring 数据存储库类是 DAO 层。

`Optimistic lock`是一种解决方案，但由于某些原因我们不喜欢它，所以它对我们不起作用。我在想`pessimistic lock`。例如，当我通过锁定获取要更新的实体时，然后在不同位置的其他地方更改它并回调（`entity`已经锁定更新！）它是否有效？我不确定它是否仍然`EntityManager`反对我用来拉实体的地方。如果它在那里，则需要很长时间才能通过这些“智能”逻辑，然后才能对其进行更新和解锁。

这是该场景的简单示例代码：

```
class SomeEntity {
    Long id;
    String field1;
    String field2;
    String field3;
    String field4;
    String field5;
    String field6;
    String field7;
    //getters and setters, column annotations

}

class SomeEntityServiceImple implemenet SomeEntityService{
      @Transactional
      save(SomeEntity se){
           //call to spring data's merge() method 
      }

      get(Long id){
           //call to spring data's findOne() 
      }

}

//this class might be spring bean, might not be. If it is not I will get SomeEntityService bean from shared appContext
class SomeCrazyClass{
    @Autowired
    SomeEntityService service;
    someMethod(){
       SomeEntity e = service.get(1L);
       //do tons of logic here, change entity object, call some another methods and again, takes 3 seond
      service.save(e); //Probably detached and someone updated this object, probably overriding it.    
    }
}
} 
```

在这里，我不能`tons of logic`在服务层中移动它，它非常具体，这种不同的逻辑存在于数百个地方。

那么有什么办法可以解决并至少对这种情况应用悲观锁定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:16:33.980

对于悲观锁定，您可以尝试以下代码

*   获取实体时锁定

    `entityManager.find(Entity.class, pk, LockModeType.PESSIMISTIC_WRITE);`

*   之后应用锁

    `entityManager.lock(entity, LockModeType.PESSIMISTIC_WRITE);`

*   在查询中设置锁定模式

    `query.setLockMode(LockModeType.PESSIMISTIC_WRITE);`

否则，您可以尝试在`SomeEntityServiceImpl`.

```
public synchronized void saveEntity(e){
{
Object o = get(id); //-- Fetch most recent entity 
applyChanges(o, e); //-- Applying custom changes
save(o); //-- Persisting entity
} 
```

因此，您不必将所有逻辑移动到服务内部，而只需委托数据库操作。此外，它将是代码更改的常见场所，而不会影响应用程序逻辑。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T19:35:31.727

将@Transactional 注释移动到你的上层到“SomeCrazyClass”的“someMethod”。使用此方法所做的更改必须是一个事务流的一部分。据我所知，这个流程应该是原子的，这意味着它应该**全部**提交或不提交（完全回滚）。

将 @Transactional 注释单独放在退化的保存方法之上是缺少此注释的重点。您仍然可以将它留在那里（使用propagation.required 默认值），但您肯定还需要将它添加到上一级。

您应该在您的应用程序中遵循此建议。这意味着您应该使用 Transactional 注释来包装您的业务逻辑方法。

# javascript - 在窗口调整大小时检测表格单元格冲突

> ID：14846510
> 
> 赞同：0
> 
> 时间：2013-02-13T04:43:03.260
> 
> 标签：javascript, jquery, performance, dom

我正在尝试使用 jQuery 来允许我在任何表格内容超过其父列在窗口调整大小之前减小表格文本的大小。我知道我可以很容易地根据其父表格单元格检查单元格内容的宽度以检测冲突，但这种方法似乎效率低下，因为这可能需要每 100 毫秒左右在 1000 个表格单元格中完成，因为用户调整大小。

有没有人有更有效的方法？

伪代码如下：

```
On resize (throttled)
    If any table content has less than 10px until it exceeds the width of its containing column
        Do stuff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:02:21.383

您不需要检查表格中的每个单元格，只需检查第一行单元格即可。

或者，您可以设置表格单元格的最小宽度，然后使用 css3`text-overflow: ellipsis`

```
table {
    table-layout: fixed;
}
td {
    border: 1px solid black;
    min-width: 50px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

可能更好的选择是制作响应式数据表。查看[这篇](http://css-tricks.com/responsive-data-table-roundup/)关于 CSS-Tricks 的文章，展示了处理宽表数据的不同方法。

# c++ - decltype 在不生成代码的模板方法上抛出错误

> ID：14846511
> 
> 赞同：2
> 
> 时间：2013-02-13T04:43:04.157
> 
> 标签：c++, templates, c++11, sfinae, decltype

我正在尝试创建一种将所有运算符转发到其包含的对象的包装类，以尝试使其能够“假装”为包含的对象。我想写的代码*看起来*像这样（简化）：

```
template<typename T>
class Wrapper
{
private:
    T val;
public:
    Wrapper(T value) : val(value) {}
    auto operator++() -> decltype(++this->val)
    {
        return ++this->val;
    }
}; 
```

这适用于 a `int`，但如果我尝试将 a 传递给`std::string`它，我会收到错误`cannot increment value of type 'std::basic_string<char>'`。

我也尝试在这里使用 declval ，但这只会让事情变得更糟，因为它不仅仍然会在 上抛出错误，而且由于不是类`std::string`，它还会在这种情况下抛出错误。`int``int`

现在，在正常情况下，根本不会生成这个函数，因为我没有调用它。但是，无论出于何种原因，decltype 仍在此函数上进行处理，即使它根本没有生成。（如果我删除 decltype 并将返回类型更改为 void，我可以`std::string`毫无问题地编译。）

所以我的问题是：有什么办法可以解决这个问题吗？也许使用 SFINAE 的一些疯狂技巧？或者，这是否可能首先是编译器的不当行为，因为该函数没有生成代码？

编辑：解决方案，根据 BЈовић 建议的解决方案进行了一些修改：

```
//Class, supports operator++, get its declared return type
template<typename R, bool IsObj = boost::is_class<R>::value, bool hasOp = boost::has_pre_increment<R>::value> struct OpRet
{
    typedef decltype(++std::declval<R>()) Ret;
};
//Not a class, but supports operator++, return type is R (i.e., ++int returns int)
template<typename R> struct OpRet<R, false, true>
{
    typedef R Ret;
};
//Doesn't support operator++, return type is void
template<typename R> struct OpRet<R, true, false>
{
    typedef void Ret;
};
template<typename R> struct OpRet<R, false, false>
{
    typedef void Ret;
};

template<typename T>
class Wrapper
{
private:
    T val;
public:
    Wrapper(T value) : val(value) {}
    auto operator++() -> typename OpRet<T>::Ret
    {
        return ++val;
    }
}; 
```

这将适用于简单类型和类类型，对于类类型，也适用于 operator++ 的返回类型不是 R 的情况（这对于 operator++ 可能非常罕见，但为了最大程度的兼容性值得考虑。 )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:18:19.023

> 有什么办法可以解决这个问题吗？

您可以使用`boost::has_pre_increment`和 SFINAE ：

```
#include <string>
#include <boost/type_traits.hpp>

template<typename R,bool hasOp = boost::has_pre_increment<R>::value > struct OpRet
{
  typedef R Ret;
};
template<typename R> struct OpRet<R,false>
{
  typedef void Ret;
};

template<typename T>
class Wrapper
{
private:
    T val;
public:
    Wrapper(T value) : val(value) {}
    auto operator++() -> typename OpRet<T>::Ret
    {
        return ++val;
    }
};

int main()
{
  Wrapper<std::string> a("abc");
  Wrapper<int> b(2);
} 
```

> 由于函数没有生成代码，这是否可能首先是编译器的不当行为？

不，编译器发出正确的诊断。`std::string`确实没有前缀增量运算符。[temp.deduct] 7 和 8 对此很清楚：

7：

> 替换发生在函数类型和模板参数声明中使用的所有类型和表达式中。表达式不仅包括常量表达式，例如出现在数组边界或作为非类型模板参数的常量表达式，还包括 sizeof、decltype 和其他允许非常量表达式的上下文中的通用表达式（即非常量表达式）。[注意：异常规范中的等效替换仅在函数被实例化时进行，此时如果替换导致无效的类型或表达式，则程序是非良构的。——尾注]

8：

> 如果替换导致无效的类型或表达式，则类型推导失败。...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:55:43.317

你确实想要 SFINAE。`operator++`需要为此制作一个函数模板，一个好的技巧是使用模板参数的默认参数`T`转换为依赖类型（这是 SFINAE 应用所必需的）。

```
template<typename U = T>
auto operator++() -> decltype(++std::declval<U&>())
{
    return ++this->val;
} 
```

然而，您可能会注意到，我们失去了直接使用成员的便利性，我们需要一些思考来弄清楚我们应该提供什么`std::declval`来获得正确的值类别和 cv-qualifiers。

# java - 尝试获取 UTC 日期时间强制关闭应用程序

> ID：14846513
> 
> 赞同：1
> 
> 时间：2013-02-13T04:43:10.013
> 
> 标签：java, android, datetime, utc

我正在设计一个服务类来定期将数据更新到服务器中。一切正常，但我必须以这种格式**“MM/dd/yyyy HH:mm:ss”**将当前 UTC 日期时间发送到服务器。我尝试了多种方法来实现这一目标，但它们并没有给我想要的结果。

类的源代码：

```
public class MyAlarmService extends Service {

        String device_id;
    // GPSTracker class
       GPSTracker gps;

       String date_time;
@Override
public void onCreate() {
 // TODO Auto-generated method stub
    //Toast.makeText(this, "Service created", Toast.LENGTH_LONG).show();

    //---get a Record---

    }

@Override
public IBinder onBind(Intent intent) {
 // TODO Auto-generated method stub
 //Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG).show();
 return null;
}

@Override
public void onDestroy() {
 // TODO Auto-generated method stub
 super.onDestroy();
 //Toast.makeText(this, "Service Destroyed.", Toast.LENGTH_LONG).show();
}

@Override
public void onStart(Intent intent, int startId) {
 // TODO Auto-generated method stub
 super.onStart(intent, startId);

 //Toast.makeText(this, "Service Started.", Toast.LENGTH_LONG).show();

//create class object

 gps = new GPSTracker(this);

     // check if GPS enabled        
     if(gps.canGetLocation())
     {
        double latitude = gps.getLatitude();
        double longitude = gps.getLongitude();
        String locationUsing = gps.getLocationUsing();

         final TelephonyManager tm =(TelephonyManager)getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);

         String deviceid = tm.getDeviceId();

//       Calendar aGMTCalendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
//       aGMTCalendar.getTimeInMillis(); //or getTimeInMillis()

         **Date d = new Date(year);
         CharSequence s = DateFormat.format("yyyy-MM-dd hh:mm:ss", d.getTime());**

        // get_date();

         **SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyy-MM-dd");
         dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));
         java.util.Date date = null;
        System.out.println(dateFormatGmt.format(date));

        Toast.makeText(getApplicationContext(),""+date, Toast.LENGTH_LONG).show();**

        //Toast.makeText(getApplicationContext(),"Device ID: "+deviceid+ " Time: "+ s+"\nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();

        Log.w( "\nLat: " , ""+latitude);
        Log.w( "\nLong: " , ""+longitude);

        if(haveNetworkConnection())
        {

        //  sendPostRequest(deviceid,date_time,""+latitude,""+longitude);

//          ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
//          
//          nameValuePairs.add(new BasicNameValuePair("lat",""+latitude));
//          nameValuePairs.add(new BasicNameValuePair("lng",""+longitude));
//         
//          
//            try 
//            {
//              HttpClient httpclient = new DefaultHttpClient();
//              //HttpPost httppost = new HttpPost("http://eatcastle.com/security_system_portal/api/getting_lat_lng.php");
//              HttpPost httppost = new HttpPost("http://google.com");
//              httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
//              HttpResponse response = httpclient.execute(httppost);
//              String responseBody = EntityUtils.toString(response.getEntity());
//              
//              //Toast.makeText( getApplicationContext(),""+responseBody,Toast.LENGTH_LONG).show();
//          } 
//            catch (Throwable t) 
//            {
//              Log.d("Error",""+t);
//          } 

        }
        else
        {
            Toast.makeText( getApplicationContext(),"No Internet connection or Wifi available",Toast.LENGTH_LONG).show();
        }
     }
     else
     {
        // GPS or Network is not enabled
        Toast.makeText(getApplicationContext(), "No Network no GPS", Toast.LENGTH_LONG).show();
     }
}

@Override
public boolean onUnbind(Intent intent) {
 // TODO Auto-generated method stub
 // Toast.makeText(this, "Service binded", Toast.LENGTH_LONG).show();
 return super.onUnbind(intent);
}

//=======================================================================================================
//check packet data and wifi
//=======================================================================================================
private boolean haveNetworkConnection() 
{
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) 
    {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
}
//=======================================================================================================
    //checking packet data and wifi END
    //=======================================================================================================

void get_date()
{

}

//sending async post request
private void sendPostRequest(String deviceid, String date_time,String latitude, String longitude) {

    class SendPostReqAsyncTask extends AsyncTask<String, Void, String>{

        @Override
        protected String doInBackground(String... params) {

            String paramDeviceid = params[0];
            String paramDate_time = params[1];
            String paramLatitude = params[2];
            String paramLongitude = params[3];

            //System.out.println("*** doInBackground ** paramUsername " + paramUsername + " paramPassword :" + paramPassword);

            HttpClient httpClient = new DefaultHttpClient();

            // In a POST request, we don't pass the values in the URL.
            //Therefore we use only the web page URL as the parameter of the HttpPost argument
            HttpPost httpPost = new HttpPost("http://google.com");

            // Because we are not passing values over the URL, we should have a mechanism to pass the values that can be
            //uniquely separate by the other end.
            //To achieve that we use BasicNameValuePair             
            //Things we need to pass with the POST request
            BasicNameValuePair DeviceidBasicNameValuePair = new BasicNameValuePair("stringLoginUser", paramDeviceid);
            BasicNameValuePair Date_timeBasicNameValuePAir = new BasicNameValuePair("stringLoginPwd", paramDate_time);
            BasicNameValuePair LatitudeBasicNameValuePAir = new BasicNameValuePair("stringLoginPwd", paramLatitude);
            BasicNameValuePair LongitudeBasicNameValuePAir = new BasicNameValuePair("stringLoginPwd", paramLongitude);

            // We add the content that we want to pass with the POST request to as name-value pairs
            //Now we put those sending details to an ArrayList with type safe of NameValuePair
            List<NameValuePair> nameValuePairList = new ArrayList<NameValuePair>();
            nameValuePairList.add(DeviceidBasicNameValuePair);
            nameValuePairList.add(Date_timeBasicNameValuePAir);
            nameValuePairList.add(LatitudeBasicNameValuePAir);
            nameValuePairList.add(LongitudeBasicNameValuePAir);

            try {
                // UrlEncodedFormEntity is an entity composed of a list of url-encoded pairs. 
                //This is typically useful while sending an HTTP POST request. 
                UrlEncodedFormEntity urlEncodedFormEntity = new UrlEncodedFormEntity(nameValuePairList);

                // setEntity() hands the entity (here it is urlEncodedFormEntity) to the request.
                httpPost.setEntity(urlEncodedFormEntity);

                try {
                    // HttpResponse is an interface just like HttpPost.
                    //Therefore we can't initialize them
                    HttpResponse httpResponse = httpClient.execute(httpPost);

                    // According to the JAVA API, InputStream constructor do nothing. 
                    //So we can't initialize InputStream although it is not an interface
                    InputStream inputStream = httpResponse.getEntity().getContent();

                    InputStreamReader inputStreamReader = new InputStreamReader(inputStream);

                    BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

                    StringBuilder stringBuilder = new StringBuilder();

                    String bufferedStrChunk = null;

                    while((bufferedStrChunk = bufferedReader.readLine()) != null){
                        stringBuilder.append(bufferedStrChunk);
                    }

                    return stringBuilder.toString();

                } catch (ClientProtocolException cpe) {
                    System.out.println("First Exception caz of HttpResponese :" + cpe);
                    cpe.printStackTrace();
                } catch (IOException ioe) {
                    System.out.println("Second Exception caz of HttpResponse :" + ioe);
                    ioe.printStackTrace();
                }

            } catch (UnsupportedEncodingException uee) {
                System.out.println("An Exception given because of UrlEncodedFormEntity argument :" + uee);
                uee.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            Toast.makeText(getApplicationContext(), result, Toast.LENGTH_LONG).show();

        }           
    }

    SendPostReqAsyncTask sendPostReqAsyncTask = new SendPostReqAsyncTask();
    sendPostReqAsyncTask.execute(deviceid, date_time,latitude,longitude);       
}

} 
```

我应该如何以上述格式获取当前的 utc 日期时间并将其发送到服务器？

PS：有时在实现不同的方法时，我还发现一个 IDE 错误，说没有定义新的 Date() 构造函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:50:37.370

您可以使用`System.currentTimeMillis()`，这将返回从 1970 年 1 月 1 日 00:00:00 UTC 开始的很长的毫秒数。您可以使用 DateFormats 在任何时区将日期转换为字符串：

```
DateFormat df = DateFormat.getTimeInstance();
df.setTimeZone(TimeZone.getTimeZone("gmt"));
String gmtTime = df.format(new Date()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:49:58.913

为什么要将**null**分配给您的日期值..？

看一下这个：

```
Date formattedDate = new Date(System.currentTimeMillis());

SimpleDateFormat sdf = new SimpleDateFormat("yyyy MM dd, hh:mm a", Locale.US);

String time = sdf.format(formattedDate); 
```

# java - 使用 JAVA 更改 UNIX 密码

> ID：14846514
> 
> 赞同：0
> 
> 时间：2013-02-13T04:43:31.827
> 
> 标签：java, linux, command, jsch, passwd

对不起，如果我的英语这么差。我想问一下从 Java 执行“passwd”命令（我使用 Netbeans IDE 和 JSCH 库）

这是我的代码

```
String username = txtusername.getText();
    String password = txtpassword.getText();
    String ip = txtIP.getText();
    int port = 22;
    Session session = null;
    Session session2=null;
    ChannelExec channel = null;
    Channel channel2 = null;
    StringBuffer result = new StringBuffer();
    try
    {
        JSch shell = new JSch();
        session = shell.getSession(username, ip, port);
        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.setPassword(password);
        session.connect(3000);
        channel = (ChannelExec) session.openChannel("exec");
        ((ChannelExec)channel).setCommand("passwd");

        channel.setInputStream(null);
        channel.setOutputStream(null);
        ((ChannelExec)channel).setErrStream(System.err);

        InputStream in=channel.getInputStream();
        OutputStream out=channel.getOutputStream();

        PrintStream char_to_send_to_channel = new PrintStream(out,true);
        BufferedReader out_from_channel=new BufferedReader(new InputStreamReader(in));
        char_to_send_to_channel.println();

        String line;
        channel.connect();

        JOptionPane.showMessageDialog(null,"Channel opened!" +"\n");

       // Process p = Runtime.getRuntime().exec("passwd");

        byte[] tmp=new byte[1024];
        while(true){
          while(in.available()>0){
            int i=in.read(tmp, 0, 1024);
            if(i<0) {
                  break;
              }
          }
        }
    } catch (IOException ex) {
        Logger.getLogger(connect.class.getName()).log(Level.SEVERE, null, ex);
    }  catch(JSchException | HeadlessException e){
        JOptionPane.showMessageDialog(null, e);
    }
} 
```

问题是，我的输出就像

```
(current) UNIX password: 
```

如果我输入/输入当前的 UNIX 密码，什么也没有发生。我想更改 Ubuntu Server 帐户密码，它安装在我的 VMWare 上。我在我原来的操作系统上运行这个程序。简单地说，我希望我的输出是交互式的（输入和输出就像 linux 命令'passwd'的输出）

我的代码有什么问题？:( 需要建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:41:39.170

`passwd`默认情况下，将直接从 pty 而不是 stdin 读取。您需要将`--stdin`选项传递给`passwd`.

有关更多信息，请参阅此问题的答案：[在 shell 脚本中使用 passwd 命令](https://stackoverflow.com/questions/714915/using-the-passwd-command-from-within-a-shell-script)。

# zend-framework - Zend 实例在另一个 Zend 的子文件夹中

> ID：14846520
> 
> 赞同：0
> 
> 时间：2013-02-13T04:43:54.633
> 
> 标签：zend-framework

嗨，我在主域中有 Zend 安装。现在我想创建一个子文件夹并运行 Zend 以进行一些测试。我已将所有文件从主站点复制到名为 www2 的子文件夹。但是当我像`domain.com/www2`我认为主 Zend 实例被调用并产生`Message: Invalid controller specified (www2)`错误一样调用子文件夹时？

我的主要 Zend 的 .htaccess 是

```
SetEnv APPLICATION_ENV development
RewriteEngine on
RewriteCond %{REQUEST_URI} "/www2/"
RewriteRule (.*) $1 [L] 
```

和子文件夹就像

```
SetEnv APPLICATION_ENV development
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我在做什么错了。我可以完全访问服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:52:33.753

在文件 application/Bootstrap.php 的子文件夹 Zend 中添加如下：

```
protected function _initRoutes()
{
        $this->bootstrap('frontcontroller');
        /**
         * @var Zend_Controller_Front $front
         */
        $front = $this->getResource('frontcontroller');
        /**
         * @var Zend_Controller_Router_Rewrite $router
         */
        $router = $front->getRouter();
        $router->addRoute('www2',
            new Zend_Controller_Router_Route(
                'www2/:controller/:action',
                array('controller' => 'index',
                      'action' => 'index'))
        );
} 
```

但可能你需要另一条路线......

UPD1：首先 .htaccess 像这样：

```
RewriteEngine On

RewriteCond %{REQUEST_URI}  ^/www2*
RewriteRule ^.*$ www2/index.php [NC,L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:58:23.340

您可以创建一个`www2.domain.com`指向该`www2/public`目录的子域并将所有`.htaccess`文件恢复到其正常的单站点状态。

这样，www2 副本是完全独立的应用程序，具有与原始 www 站点相同的 url 和文件结构。

# html - HTML 表单输入和帮助文本

> ID：14846525
> 
> 赞同：0
> 
> 时间：2013-02-13T04:44:39.437
> 
> 标签：html, accessibility

我们的应用程序中有许多 HTML 表单。页面顶部提供了内容团队为每个页面准备的帮助文档的相应链接。但这对于盲人甚至对于普通用户来说没有意义，因为每次他们需要转到打开单独页面的链接时。

如何在与当前输入相关的不同页面中显示内容的输入框的帮助文本？

对于有视觉障碍的用户，如果有办法链接到该文档，我可以使用“aria-required”和“aria- describeby”标志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:51:23.340

帮助文本确实应该与表单在同一页上。您始终可以使用手风琴或其他方法来折叠或显示/隐藏文档。

如果内容确实必须存在于单独的 URL 中，我想您可以向相应的 HTML 页面发出 AJAX 请求，以便在用户请求时将内容拉入，但请确保使用[ARIA Live Regions](https://developer.mozilla.org/en-US/docs/Accessibility/ARIA/ARIA_Live_Regions)，以便辅助技术的用户会知道新内容已经加载。

此外，这可能会有所帮助：[WCAG 2,G184：在描述必要输入的表单或字段集的开头提供文本说明](http://www.w3.org/TR/2012/NOTE-WCAG20-TECHS-20120103/G184)

# c++ - 哈希返回负值

> ID：14846539
> 
> 赞同：3
> 
> 时间：2013-02-13T04:45:59.980
> 
> 标签：c++, hash

为什么返回负数？以及如何使返回值变为正值？

键盘输入：ABCD123

```
for(int a=0; a<keyInput.length(); a++){
        key = ((key << 5)+key)^keyInput[a];
    }

return key; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:47:45.817

将 'key' 设为无符号类型，例如 ' `unsigned int`'。

它变为负数的原因是因为对于有符号类型，高位表示符号。一旦哈希值大于 0x7FFFFFFF，符号位变为“1”并且值变为负数。无符号类型不使用符号位。太大的值继续保持积极。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:47:28.020

声明`key`为无符号长整数应该可以解决问题。

# ruby-on-rails - ActiveRecord 错误：找不到没有 ID 的用户

> ID：14846540
> 
> 赞同：4
> 
> 时间：2013-02-13T04:46:00.407
> 
> 标签：ruby-on-rails, omniauth, rails-activerecord

我一直在构建一个网络应用程序，允许用户使用 Facebook 登录，然后重定向到他们的个人资料提要。如果用户不存在，将使用他们的 Facebook 凭据创建新记录并存储在用户模型中。

我遇到的问题是，当我尝试从 Facebook 回调重定向回用户的个人资料页面时**，**无论是否记录已存在或在登录过程中新创建。

我正在使用 OmniAuth 进行身份验证和访问 Facebook Graph API，大致遵循 Ryan Bates RailsCast #360 ( [http://railscasts.com/episodes/360-facebook-authentication?autoplay=true](http://railscasts.com/episodes/360-facebook-authentication?autoplay=true) )中概述的约定

## 这是我的用户模型：

```
class User < ActiveRecord::Base
  def self.from_omniauth(auth)  
    where(auth.slice(:uid)).first_or_create.tap do |user|
       user.uid = auth.uid
       user.name = auth.info.name
       user.oauth_token = auth.credentials.token
       user.oauth_expires_at = Time.at(auth.credentials.expires_at)
       user.img_url = auth.info.image
       user.save!
    end
  end
end 
```

以及两个相关的控制器，

## 会话控制器：

```
class SessionsController < ApplicationController
  def new
    redirect_to '/auth/facebook'
  end

  def create
    user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id
    redirect_to user
  end

  def destroy
    session[:user_id] = nil
    redirect_to root_url
  end
end 
```

## 和用户控制器：

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:uid])
  end
end 
```

# 跟踪数据和会话转储

此外，跟踪显示错误发生在用户控制器的“显示”方法中：

```
app/controllers/users_controller.rb:4:in `show' 
```

我不明白为什么显示用户的查询使用不属于模型的 id 字段，如请求参数中所示：

```
{"id"=>"1"} 
```

和会话转储：

```
_csrf_token: "sjym9SfVWrLipH/7Lxn4RCp2Df6kQTNITnhjro2tirI="
session_id: "7d2c6e70bcae6f1ec257fd634a73c44b"
user_id: 1 
```

最令人困惑的是，当我使用 rails 控制台检查用户数据库时，会返回以下哈希值，其中包含一个不属于原始模式的附加 ID 字段：

```
=> #<User id: 1, uid: "1123581321", name: "Bob Loblaw", oauth_token: "AAAHFZAqhAyeEBADdZCxeCIdFQWjkbQFjfGfJjCiZA8VKSAw5zy...", oauth_expires_at: "2013-04-14 01:15:20", created_at: "2013-02-13 01:19:24", updated_at: "2013-02-13 01:57:18", img_url: "http://graph.facebook.com/1123581321/picture?type=s..."> 
```

## 架构：

```
create_table "users", :force => true do |t|
  t.string   "uid"
  t.string   "name"
  t.string   "oauth_token"
  t.datetime "oauth_expires_at"
  t.datetime "created_at",       :null => false
  t.datetime "updated_at",       :null => false
  t.string   "img_url"
end 
```

## 路线

路线相当标准，我不认为问题出在那儿：

```
resources :users

root to: 'static_pages#home'

match 'auth/:provider/callback', to: 'sessions#create'
match 'auth/failure', to: redirect('/')
match 'signout', to: 'sessions#destroy', as: 'signout'

match '/how_it_works',    to: 'static_pages#how_it_works'
match '/about',   to: 'static_pages#about'
match '/contact', to: 'static_pages#contact' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:55:28.250

因为 rails 正在寻找保存在数据库中的 user_id 来访问记录。所以你需要把它作为

```
@user = User.find(params[:id]) 
```

当您显示特定用户时。rails 需要找到 user_id。这就是您收到该错误的原因。

如果您查看会话创建方法，它是通过会话创建的 [:id] = user.id

user_id 列是在您创建表时自动创建的。

# php - mysql select查询在多列中搜索一个单词

> ID：14846543
> 
> 赞同：1
> 
> 时间：2013-02-13T04:46:24.097
> 
> 标签：php, mysql

需要帮助。我正在准备一个搜索表格。在选择查询中需要帮助是否有可能我可以在我的表的所有列中搜索“建筑”字以下是我尝试过的查询。

```
$search = $_POST['search'];
$sql = mysql_query("SELECT * FROM property WHERE posthead,requestto,ptype,requestby,owner,bed,bath,price,sqft,descp = '".$search."'");
$result = (mysql_fetch_array($sql));

echo "Post Head : ". $result['posthead']."<br />";
echo "Request To : ". $result['requestto']."<br />";
echo "Type : ". $result['ptype']."<br />";
echo "Request By : ". $result['requestby']."<br />";
echo "Owner : ". $result['owner']."<br />";
echo "Bed : ". $result['bed']."<br />";
echo "Bath : ". $result['bath']."<br />";
echo "Price : ". $result['price']."<br />";
echo "Sq ft. : ". $result['sqft']."<br />";
echo "Description : ". $result['descp']."<br />"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:48:50.023

```
$sql = mysql_query("SELECT * FROM property WHERE posthead = '".$search."' OR requestto= '".$search."' OR ptype= '".$search."' OR requestby = '".$search."' OR owner= '".$search."' OR bed = '".$search."' OR bath= '".$search."' OR price= '".$search."' OR sqft,descp = '".$search."'"); 
```

并更改`$result = (mysql_fetch_array($sql));`为`$result = (mysql_fetch_assoc($sql));`

**笔记 ：**

1.  您的查询容易受到 sql 注入的影响
2.  不推荐使用 mysql_* 函数使用 mysqli_* 或 PDO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-27T20:19:50.183

**试试这个：**

更好的是**`"CONCAT"`**用于列：

> $sql = mysql_query("SELECT * FROM property WHERE CONCAT(posthead,requestto,ptype,requestby,owner,bed,bath,price,sqft,descp) LIKE "%.$search."%'");

**`OR`**将起作用，但**`CONCAT`**可以减少查询大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:49:47.933

尝试`SELECT * FROM property WHERE posthead = $search OR requestto = $search ...`等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:08:20.260

由于您正在创建一个搜索表单，您可能希望能够通过部分匹配而不是完全匹配来查找记录。为此，您可以使用`LIKE`

```
$q = "SELECT * FROM property 
WHERE posthead  LIKE '%$search%' OR
      requestto LIKE '%$search%' OR
      ptype     LIKE '%$search%' OR
      requestby LIKE '%$search%' OR
      owner     LIKE '%$search%' OR
      bed       LIKE '%$search%' OR
      bath      LIKE '%$search%' OR
      price     LIKE '%$search%' OR
      sqft      LIKE '%$search%' OR
      descp     LIKE '%$search%'";

$sql = mysql_query($q); 
```

# node.js - 在 node.js 中唯一标识一个进程

> ID：14846545
> 
> 赞同：5
> 
> 时间：2013-02-13T04:46:46.813
> 
> 标签：node.js, unix

node.js 中可用的哪些值结合起来为 node.js 中每个服务器上的每个进程创建一个唯一 ID？目前，我只知道如何获取进程ID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T05:25:07.233

不确定您的要求是什么，但您可以对（主机名 + pid + 时间戳）进行哈希处理：

```
const crypto = require('crypto');
const os = require('os');

const parts = [os.hostname(), process.pid, +(new Date)];
const hash = crypto.createHash('md5').update(parts.join(''));

hash.digest('hex'); // "56f0dec9b403c5aa19827326555d6a5b" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T07:34:51.710

node.js 是一个单线程服务器。它只会使用一个 CPU 内核（生成的进程可以使用其他内核）并且`process.pid`足以识别系统上的节点进程。如果您运行多个 node.js 服务器，那么每个服务器将有不同的 process.pid。

如果您希望单节点服务器利用多核 CPU，则必须在集群中运行 node.js。使用`cluster`包[http://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)。

它将主线程分叉成多个工作线程，这些工作线程使用 IPC（进程间通信）相互通信。每个工作人员使用一个 CPU 内核。要获取每个工作人员的 ID，您可以使用`worker.id` [http://nodejs.org/api/cluster.html#cluster_worker_id](http://nodejs.org/api/cluster.html#cluster_worker_id)

**编辑：从评论中添加**

答案取决于可能值的大小/范围。在 LAN 主机名上，IP 和 pid 可能就足够了。此外，每台服务器都可以有多个可以监听的 NIC 和 IP。检查这个使用`app.address() { address: '192.1.168.5', family: 'IPv4', port: 3000 }`

# php - JQuery-AJAX 发布工作流

> ID：14846546
> 
> 赞同：0
> 
> 时间：2013-02-13T04:46:52.243
> 
> 标签：php, jquery, ajax, forms

**编辑**

忘记了几个重要的点。

1.  我这样做是为了消除页面必须刷新并因此跳回页面顶部。

2.  ajax 函数的成功函数将返回一个全新的 div id="comments" 以替换现有的一个错误消息或新的评论以及它下面的所有其他评论。

**结束编辑**

我一直在尝试封装这个 jquery-ajax 函数，但没有成功。我在一个页面上有 X 个帖子，每个帖子都有一个用于在每个帖子下插入评论的表单。我认为我非常接近并尝试使用 firebug 对其进行调试，但老实说，我真的不知道我在看什么或在 firebug 中查看什么。

所有代码都在下面，任何帮助将不胜感激！

HTML表单和结构（由于表单重复，我觉得应该使用父jquery选择方法，而不是在我的输出脚本中迭代每个post-comment分区）

```
 <div id="content_body_right">
        <div id="activity">
            ....this is the area for each post....
        </div>
        <div id="comments">
            <p class="comments_label">' . $reply_count . ' Comment</p>
            <div id="comment1">
                <div id="comment_user_img">
                    ' . $imgOutputReply . '
                </div>
                <div id="comment_user">
                    <p class="user_text_comment">' . $firstNameReply . ' ' . $lastNameReply . '</p><p class="date_text_comment">' . $date_timeReply . '</p>
                    <p class="message_text_comment">' . $messageReply . '</p>
                </div>
            </div>
            <div id="add_comment">
                <form id="formAddComment" action="dashboard.php" enctype="multipart/form-data" method="post">
                <div id="add_comment_left">
                    <textarea id="comment" name="comment" cols="75" rows="2">Add a Comment...</textarea> 
                </div>
                <div id="add_comment_right">
                    <input id="userID" name="userID" type="hidden" value="' . $userID . '" />
                    <input id="actID" name="actID" type="hidden" value="' . $actID . '" />
                    <input id="btnComment" name="btnComment" type="submit" value="" title="Add Comment" />
                </div>
                </form>
            </div>
        </div>
    </div> 
```

好的，现在是 JQuery 标记

```
 <script type="text/javascript">
        $(document).ready(function(){
            $("#formAddComment").submit( function(e) {
                e.preventDefault();
                var form = $(this);
                var div_add_comment = form.parent();
                var div_comments = div_add_comment.parent();
                $.ajax({
                    type: "POST",
                    data: form.serialize(),
                    url: "includes/comment.php",
                    success: function(msg){
                        $div_comments.html(msg);
                    }
                });
                return false;
            });
        });
    </script> 
```

最后是外部 php 脚本（注意：我只会发布将数据馈送本地化到 php vars 的初始行。）

```
 if(isset($_POST['actID'])){
        $actID = mysql_real_escape_string($_POST['actID']);
        $userID = mysql_real_escape_string($_POST['userID']);
        $comment = mysql_real_escape_string($_POST['comment']);
          ............other processing here...........
    } 
```

我主要怀疑我的 jquery 脚本。

再次感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:19:36.080

我将一般结构放入[http://jsfiddle.net/cori/JsLWq/](http://jsfiddle.net/cori/JsLWq/)`http://fiddle.jshell.net/cori/JsLWq/show/includes/comment.php`的 jsfiddle 中，当我提交表单时，由于相对的 ajax url，我确实得到了一个不存在的 ajax POST ，所以这不是据我所知，这个问题。我*认为*问题在于您正在混合变量命名规则。

你开始命名你的变量，比如普通的 javascript 对象

```
var form = $(this);
var div_add_comment = form.parent();
var div_comments = div_add_comment.parent(); 
```

但随后在您的成功处理程序中，您切换到相当常见的`$x`约定，通常用于指示变量是 jQuery 实例：

```
$div_comments.html(msg); 
```

但是那时没有变量`$div_comments`；只有`div_comments`. 如果你在[http://jsfiddle.net/cori/JsLWq/1/](http://jsfiddle.net/cori/JsLWq/1/)中提交表单，它有一个 ajax 错误处理程序，并查看你的 firebug 控制台，你会看到你得到一个 ReferenceError 因为`$div_comments`未定义。

**编辑**

结合 kgarrigan 的建议，如果在您的 php 中循环遍历要创建的表单，并使用索引跟踪您的位置，您可以使用索引重命名表单，因此您的表单 php/html 代码如下所示：

```
<form id="formAddComment-' . $index . '" action="dashboard.php" enctype="multipart/form-data" method="post"> 
```

所以你最终会得到带有 id 之类的表单元素`formAddComment-1`。

然后在您的 jquery 中，您将使用[startsWith](http://api.jquery.com/attribute-starts-with-selector/)选择器选择所有表单并将提交事件绑定到它们，因此：

```
$('[id^="formAddComment"]').submit( function(e) {
    // do your ajax
}); 
```

这样每个表单都有自己的提交处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T04:53:12.377

在 firebug 中，单击控制台，然后单击全部。当您单击按钮触发您的 ajax 调用时，您应该会看到一行弹出，可能带有一个显示正在发送的发布请求的加载图标。您应该能够单击选项卡以查看正在发布的数据和给出的响应以及响应状态代码...

在您的编辑中，您说成功功能将发送一个新的 div id="comments" 来替换现有的，但是正如您现在所写的那样，我相信它只会在现有的内部添加一个 div id="comments"一。不知道这是否会导致您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:05:30.360

如果您在同一页面上有多个表单，并且 id 相同，这将导致问题。尤其是 #formAddComment id，它附加在 submit() 调用中。如果有多个这些 id，这将不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:48:08.747

jquery 与选择器一起使用。当你写 $(something) 时，某事就是选择器。它可以是 id、类名、变量、html 元素。所以而不是

```
$("#formAddComment").submit( function(e) { 
```

你可以使用

```
$(".someclassName").submit( function(e) { 
```

就像 css 一样，使用 # 作为 id，. 上课。只需确保将 class 属性添加到具有相同名称的表单中即可。你也可以试试

```
$("form").submit(function(e) { 
```

它应该选择任何表单元素。我认为你的函数的其余部分应该可以正常工作，因为你使用的是 'this' 和 parent() 而不是任何直接引用。

# r - 按组计算连续行中的值之间的差异

> ID：14846547
> 
> 赞同：73
> 
> 时间：2013-02-13T04:46:54.727
> 
> 标签：r

这是我的`df`（data.frame）：

```
group value
1     10
1     20
1     25
2     5
2     10
2     15 
```

我需要按组计算连续行中的值之间的差异。

所以，我需要一个这样的结果。

```
group value diff
1     10    NA # because there is a no previous value
1     20    10 # value[2] - value[1]
1     25    5  # value[3] value[2]
2     5     NA # because group is changed
2     10    5  # value[5] - value[4]
2     15    5  # value[6] - value[5] 
```

虽然，我可以通过使用来处理这个问题`ddply`，但它需要太多时间。这是因为我的`df`. （我的超过 1,000,000 个群组`df`）

有没有其他有效的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-13T04:56:08.453

使用该功能，该包`data.table`可以相当快地做到这一点。`shift`

```
require(data.table)
df <- data.table(group = rep(c(1, 2), each = 3), value = c(10,20,25,5,10,15))
#setDT(df) #if df is already a data frame

df[ , diff := value - shift(value), by = group]    
#   group value diff
#1:     1    10   NA
#2:     1    20   10
#3:     1    25    5
#4:     2     5   NA
#5:     2    10    5
#6:     2    15    5
setDF(df) #if you want to convert back to old data.frame syntax 
```

* * *

或者使用中的`lag`函数`dplyr`

```
df %>%
    group_by(group) %>%
    mutate(Diff = value - lag(value))
#   group value  Diff
#   <int> <int> <int>
# 1     1    10    NA
# 2     1    20    10
# 3     1    25     5
# 4     2     5    NA
# 5     2    10     5
# 6     2    15     5 
```

* * *

有关 pre-`data.table::shift`和 pre-的替代方案`dplyr::lag`，请参阅编辑。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-05-04T20:42:39.937

您可以`ave()`为此使用基本功能

```
df <- data.frame(group=rep(c(1,2),each=3),value=c(10,20,25,5,10,15))
df$diff <- ave(df$value, factor(df$group), FUN=function(x) c(NA,diff(x))) 
```

返回

```
 group value diff
1     1    10   NA
2     1    20   10
3     1    25    5
4     2     5   NA
5     2    10    5
6     2    15    5 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T05:01:28.123

用 tapply 试试这个

```
df$diff<-as.vector(unlist(tapply(df$value,df$group,FUN=function(x){ return (c(NA,diff(x)))}))) 
```

# android - 当列表视图在滚动视图中时，不检查自定义列表视图的 android 复选框

> ID：14846548
> 
> 赞同：1
> 
> 时间：2013-02-13T04:47:01.450
> 
> 标签：android, listview, checkbox, customization

我已经实现了带有复选框和文本视图的自定义列表视图。当列表视图不在滚动时它工作正常，但是如果行增加，那么当我单击复选框时，列表视图处于滚动视图中，选中标记不会保留。这是我的代码，如果该代码有任何问题，请建议我

```
public class ArchivedAdapter extends ArrayAdapter<MessageBean> {
final ArrayList<MessageBean> updatedList = new ArrayList<MessageBean>();
private List<MessageBean> list;
private TextView officenameView, sentOnView, messageView;
public final static String MY_ACTION = "com.android.threeptalk.broadcast";
private boolean isDeleted = false;
int count = 0;
HashMap<Integer, CheckBox> checkList = new HashMap<Integer, CheckBox>();

public ArchivedAdapter(Context context, int resourseID,
        List<MessageBean> list) {
    super(context, resourseID, list);
    this.list = list;

}

@Override
public int getCount() {
    return list.size();
}

@Override
public MessageBean getItem(int arg0) {
    return list.get(arg0);
}

@Override
public long getItemId(int arg0) {
    return arg0;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    View row = convertView;
    LayoutInflater inflater = (LayoutInflater) this.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    row = inflater.inflate(R.layout.archievedmsgrow, parent, false);
    row.setId(position);
    Object obj = getItem(position);
    if (obj instanceof MessageBean) {
        final MessageBean message = (MessageBean) obj;
        CheckBox checkBox = (CheckBox) row.findViewById(R.id.checkBox);
        officenameView = (TextView) row.findViewById(R.id.officename);
        sentOnView = (TextView) row.findViewById(R.id.time);
        messageView = (TextView) row.findViewById(R.id.message);
        officenameView.setText(message.getOfficeName());
        checkList.put(position, checkBox);
        checkBox.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                CheckBox c = (CheckBox) v;
                if (c.isChecked()) {
                    c.setChecked(true);
                    count++;
                    updatedList.add(message);

                } else {
                    c.setChecked(false);
                    count--;
                    updatedList.remove(message);
                    updatedList.size());
                }
                checkedCount(count, updatedList);
            }
        });

        row.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                rowclicked(message, position);

            }
        });
        sentOnView.setText(Common.getAppropriateTimeUsingTimeZone(message
                .getmDate()));
        if (message.getMessage() != null) {

            messageView.setText((message.getMessage()));

        } else {
            if (message.getMessageType().equals("OPTION")) {
                if (message.getOptions() != null
                        && message.getOptions().size() > 0) {
                    String data = message.getOptions().get(0);
                    if (data != null && !data.equals("")) {

                        messageView.setText(data);
                    }
                }
            }
        }

    }
    return row;
}

protected void messageSelected() {

}

protected void rowclicked(MessageBean message, int position) {
    // TODO Auto-generated method stub

}

protected void checkedCount(int count2, ArrayList<MessageBean> updatedList) {

}
} 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:09:02.810

试试这个带有复选框滚动问题的示例[**ListView**](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T05:22:00.793

似乎您正在检查其**onClickListener()**中复选框的检查状态。

首先定义一个[Hashmap](http://developer.android.com/reference/java/util/HashMap.html)或[SparseBooleanArray](http://developer.android.com/reference/android/util/SparseBooleanArray.html)来保存您的选择。

```
private HashMap<Integer, Boolean> mSelection = new HashMap<Integer, Boolean>(); 
```

然后将以下代码添加到您的**getView()**方法中。

```
 CheckBox checkBox = (CheckBox) row.findViewById(R.id.checkBox);
    checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            mSelection.put(position, isChecked);
        }
    });

    if (mSelection.get(position) != null) {
        if (mSelection.get(position))
            checkBox.setChecked(true);
        else
            checkBox.setChecked(false);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:01:10.930

试试这个，假设您为 ListView 使用自定义适配器，您将能够为适配器的 getView() 中的每个项目设置标签，

```
 public View getView(int position, View convertView, ViewGroup parent) {
    EvenViewHolder holdereven;
        if (convertView == null) {
            convertView = mInfaltor.inflate(R.layout.schedule_adapter_view,
                    null);
            holdereven = new EvenViewHolder();
            holdereven.time = (TextView) convertView
                    .findViewById(R.id.time);
            holdereven.title = (TextView) convertView
                    .findViewById(R.id.title);
            holdereven.des = (TextView) convertView.findViewById(R.id.des);
            convertView.setTag(holdereven);

        } else {
            holdereven = (EvenViewHolder) convertView.getTag();
        }

 static class EvenViewHolder {
    TextView time, title, des;

}
  } 
```

# ide - 请参阅 PHPStorm 中的继承文档

> ID：14846556
> 
> 赞同：11
> 
> 时间：2013-02-13T04:47:33.927
> 
> 标签：ide, phpstorm

如果可以的话，我通常会将文档放在界面中：

```
interface SenderInterface
{
    /**
     * Sends Email to user
     *
     * @param UserInterface $receiver
     * @param string $msg
     */
    public function sendEmail(UserInterface $receiver, $msg)
    //...
    { 
```

然后我像这样继承文档以避免冗余。

```
class Sender implements SenderInterface
{
    /**
     * {@inheritDoc}
     */
    public function sendEmail(UserInterface $receiver, $msg)
    //...
    { 
```

有没有办法直接在 PHPStorm`Sender class`中打开继承的文档？`SenderInterface`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T15:57:11.827

即将推出的**PhpStorm v6**`{@inheritDoc}`对（与**v5**和更早版本相比）有更好的支持。

您需要的功能已经在**EAP**构建（抢先体验计划）中正常运行——您可以从这里自己尝试： http: [//confluence.jetbrains.net/display/WI/Web+IDE+EAP](http://confluence.jetbrains.net/display/WI/Web+IDE+EAP)

查看文档的命令是**View | 快速文档**（`Ctrl+Q`.. 或您可能拥有的任何快捷方式）

# android - SimpleCursorTreeAdapter 的 getChildCursor() 中的光标错误

> ID：14846558
> 
> 赞同：0
> 
> 时间：2013-02-13T04:47:42.950
> 
> 标签：android, android-listview, android-adapter

我正在`SimpleCursorTreeAdapter`使用`ExpandableListView`. 问题是一旦使用 groupCursor，然后在`getChildCursor(Cursor groupCursor)`groupCursor 中返回意外的列，其中的列`groupCursor`将**替换**为**子游标的列**。

我无法追踪为什么组游标列被子列替换。它是`SimpleCursorTreeAdapter`用来绑定数据库的好方法吗`ExpandableListView`的好方法吗？

我在 CursorTreeAdapter 和 SimpleCursorTreeAdapter 中尝试与过去 3 天不同的方法。

请找到以下屏幕截图以获取更详细的说明。

**使用具有 3 列的游标正确初始化构造函数**

![  ](../Images/ff103e28ba4fc7326d1bcb96d5f9fb1f.png)

**在 getChidrenCount() 中，在一些迭代中返回正确的结果。您可以看到调试中的列仍然是 3**

![  ](../Images/a243969550429a21bf5fc5e055f8a6dd.png)

**经过一些迭代后，列值发生了变化。这就是总问题所在..**

![  ](../Images/a78a49ff931d30a4a4345813d6dd4f66.png)

建议我最好的解决方案。

谢谢和问候，
沙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:00:29.703

我doono是什么问题，但我通过实现我自己的自定义适配器解决了这个问题。

# image - pdfbox可以提取矢量图吗？

> ID：14846560
> 
> 赞同：0
> 
> 时间：2013-02-13T04:47:52.260
> 
> 标签：image, pdf, ms-word, pdfbox, xpdf

据我了解，

```
1\. .eps format images are vector images.
2\. When we draw something in word (like a flowchart) that is stored 
as a vector image. 
```

我几乎可以肯定第一个，不确定第二个。如果我错了，请纠正我。

假设这两件事，当乳胶文件（插入.eps图像）或word文件（包含矢量图像）转换为pdf时，图像是否会转换为光栅图像？

另外，我认为`PDFBox`/`xpdf`只能从 pdf 中提取光栅图像（因为它们嵌入为`XObjects`），而不是矢量图像。这种理解正确吗？[stackoverflow 中的这个问题](https://stackoverflow.com/questions/13448018/flatten-vector-graphics-inside-pdf-and-extract-using-java)是相关的，但尚未得到解答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:49:24.657

您的第 1 点不正确，eps 文件是 PostScript 程序，它们可能包含矢量信息，或文本或图像数据，或以上所有内容。

点 2 在 PDF 中没有“矢量图像”，图像表示位图，因此不能是矢量。

如果您将 PostScript 程序转换为 PDF 文件，则结果完全取决于您使用的转换程序。一般来说，向量将作为向量保留，文本作为文本保留。但是，应用程序完全有可能渲染整个 PostScript 程序并将结果作为图像插入 PDF。

因此，您的第一个问题（“图像是否转换为光栅图像”）的答案是“可能，但可能不是”。

恐怕我对 PDFBox/xpdf 的功能一无所知，但由于矢量集合可能不会以任何原子方式排列为“图像”（它们*可以*作为 XObject 或模式保存），因此没有知道何时停止提取的任何明显方法。无论如何，您会以什么格式存储结果？

# c - C 位逻辑运算谜题

> ID：14846565
> 
> 赞同：2
> 
> 时间：2013-02-13T04:48:50.063
> 
> 标签：c, operators, bits

所以我需要写一个方法来解决这个难题：

浮动_f2i

*   返回浮点参数 f 的表达式 (int) f 的位级等效项。

*   参数作为 unsigned int 传递，但它被解释为单精度浮点值的位级表示。

*   任何超出范围（包括 NaN 和无穷大）都应返回 0x80000000u。

所以我从中得到的是，我得到了一个十六进制的数字，我必须编写代码把它变成整数格式。给我们的一个测试用例是； `Argument [0x00800000], returns [0x0]`因为 0x00800000 是 1.1754....E-38，小到可以返回为零（所以我假设）

到目前为止，我所拥有的是：

```
int float_f2i(unsigned uf) {
  unsigned sign = uf & (0x80000000);
  unsigned exp  = uf >> 23 & 0xff;
  unsigned frac = uf & 0x7fffff;

  //takes care of NaN and inifinity
  if (exp == 255) {return 0x80000000u;}

  if ((exp > 0) && (exp < 255)) //normalized
  {
    if ((sign >> 28) == 0x0) //if sign bit is 0
    {
      return (0x1); //NEEDS MORE HERE
    }
    else if ((sign >> 28) == 0x8) //if sign bit is 1
    {
      return (0x8); //NEEDS MORE HERE
    }
  }
  else if (exp == 0)//denormalized
  {
    return 0; // rounds to zero anyway
  }
} 
```

我知道要使它起作用，我必须将指数部分添加到返回语句（1.frac ^（exp-127））中，但我不知道如何对其进行编码。向左移动乘以二，但对于2 的负指数，我需要右移，但 >> 运算符在算术上执行此操作。我是否需要创建一个动态掩码来消除算术移位创建的 1 位？

编辑：得到了答案，我走错了方向，如果有人必须这样做，未来的参考：

```
int float_f2i(unsigned uf) {
  int exponent = (uf >> 23) & 0ff;
  int exp = exponent - 127;
  int frac = uf & 0x7fffff;

  if(exponent == 0x7F800000)
    return 0x80000000u;
  if(!exponent)
    return 0;
  if(exp < 0)
    return 0;
  if(exp > 30)
    return 0x80000000u;

  frac = frac | 0x800000;
  if (exp >= 23)
    frac = frac << (exp - 23);
  else
    frac = frac >> (23 - exp);

  if((uf >> 31) & 1)
    return ~frac + 1;

  return frac;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:15:33.837

`c`只有一个右移运算符`>>`，但当数字是有符号值类型时，这只是算术移位。

```
main()
{
  int x = -2;
  printf("%d\n",x>>1);
  printf("%d\n",((unsigned int)x)>>1);
  return 0;
} 
```

[在这里运行](http://codepad.org/xoLNxpuf)

因此，如果您需要确保非算术移位，您可以强制转换为无符号。

# c++ - 如何在 uint64_t 中移动 >= 32 位？

> ID：14846566
> 
> 赞同：3
> 
> 时间：2013-02-13T04:48:58.807
> 
> 标签：c++, bit-manipulation

以下代码触发`gcc`警告（gcc 4.2.1）：

```
#include <boost/cstdint.hpp>
boost::uint64_t x = 1 << 32; // warning: left shift count >= width of type 
```

因为类型有 64 位，不应该没问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T04:50:08.033

> > *如何将 >= 32 位移入`uint64_t`？*

如果您的编译器支持`long long`：

```
boost::uint64_t x = 1LL << 32; 
```

除此以外：

```
boost::uint64_t x = boost::uint64_t(1) << 32; 
```

> > *因为类型有 64 位，不应该没问题吗？*

不。即使`x`是 64 位，`1`也不是。`1`是 32 位。您使用结果的方式对该结果的生成方式没有影响。

# vector - 将最初在堆栈上的对象推送到向量，对象会丢失吗？

> ID：14846567
> 
> 赞同：1
> 
> 时间：2013-02-13T04:49:09.430
> 
> 标签：vector, stl, heap-memory, stack-memory

我刚开始使用 STL，假设我有一个兔子课程，现在我正在创建一个兔子军队......

```
#include <vector>

vector<rabbit> rabbitArmy (numOfRabbits,rabbit()); 
//Q1: these rabbits are on the heap right?

rabbit* rabbitOnHeap = new rabbit(); 
//Q2: rabbitOnHeap is on the heap right?

rabbit rabbitOnStack; 
//Q3: this rabbit is on the stack right?

rabbitArmy.push_back(rabbitOnStack); 
//Q4: rabbitOnStack will remain stored on the stack? 
//And it will be deleted automatically, though it's put in the rabbitArmy now? 
```

Q4是我最关心的一个，我应该总是使用***new***关键字来添加我的军队吗？

Q5：有没有比增加兔子更好的方法：

```
rabbitArmy.push_back(*rabbitOnHeap); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:02:02.687

1.  由于您没有另外指定，因此您放入向量中的对象将被分配`std::allocator<rabbit>`，它使用`new`. 对于它的价值，这*通常*被称为“免费存储”而不是堆¹。
2.  同样，通常的术语是免费商店。
3.  正式地说，那是“自动存储”，但是是的，在您的典型实现上将是堆栈，并且在不支持硬件堆栈的实现上，它仍然是类似堆栈（LIFO）的数据结构某种意义上的。
4.  当您将项目添加到向量（或其他标准容器）时，实际添加到容器中的是您作为参数传递的项目的*副本。*您作为参数传递的项目仍由您自己处理。对于具有自动存储类的东西，它会在超出范围时被销毁——但它在集合中的副本将保持有效，直到它被擦除或集合被销毁等。
5.  不。事实上，您应该很少使用它`new`来分配要放入标准集合中的项目。由于数组中的项目将是您传递的内容的副本，因此您通常不需要使用`new`来分配它。
6.  通常你只是推回一个本地对象。

例如：

```
for (i=0; i<10; i++)
    rabbitArmy.push_back(rabbit()); 
```

这将创建 10 个临时`rabbit`对象（`rabbit()`部分），将每个对象的副本添加到 rabbitArmy。然后每个临时人员都被摧毁了，但他们在rabbitArmy中的副本仍然存在。

* * *

1.  在典型用法中，“堆”是指由`calloc`、`malloc`、`realloc`和管理的内存`free`。什么`new`和`delete`管理的是免费商店。反过来，新表达式从`operator new`（全局或类内部）获取内存。`operator new`和`operator delete`被指定，因此它们*几乎可以*分别直接传递到`malloc`和`free`，但即使在这种情况下，堆和空闲存储通常也是分开考虑的。

# php - .= 运算符在 PHP 中是什么意思？

> ID：14846570
> 
> 赞同：45
> 
> 时间：2013-02-13T04:49:57.463
> 
> 标签：php, operators, equals

我有一个变量被定义为

```
$var .= "value"; 
```

点等于函数如何使用？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-13T04:51:02.003

它是连接赋值运算符。它的工作原理类似于：

```
$var = $var . "value"; 
```

`$x .=`不同之处在于`$x = $x .`前者是就地的，但后者重新分配`$x`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-13T04:53:02.560

这是用于串联

```
$var  = "test";
$var .= "value";

echo $var; // this will give you testvalue 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-13T04:55:56.267

" `.`" 运算符是字符串连接运算符。和 " `.=`" 将连接字符串。

**例子：**

```
$var = 1;
$var .= 20; 
```

**这与以下内容相同：**

```
$var = 1 . 20; 
```

" `.=`" 运算符是一个字符串运算符，它首先将值转换为字符串；并且由于“ `.`”表示**连接/追加**，结果是字符串“ `120`”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-22T02:45:01.063

用非常简单的语言来说，发生的事情是将每个变量中存储的任何内容都转换为字符串，然后将每个字符串放入包含每个变量的每个值放在一起的最终变量中。

我用它来生成字母数字和特殊字符的随机变量。下面的例子：

```
function generateRandomString($length = 64) {
    $characters = '0123456789-!@#$%^*()?:abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $charactersLength = mb_strlen($characters);
    $randomString = '';
    for ($i = 0; $i < $length; $i++) {
        $randomString .= $characters[rand(0, $charactersLength - 1)];
    }
    return $randomString;
} 
```

然后为了得到 $randomString 的值，我像这样为函数分配了一个变量

```
$key = generateRandomString();
echo $key; 
```

这样做是从 $characters 变量中的任何字符中选择一个随机字符。然后 .= 将这些随机“选择”中的每一个的结果放在一个新变量中，该变量具有来自 $characters 字符串组的 64 个随机选择，称为 $randomString。

# macos - OS X：在全屏动画期间更新绘制

> ID：14846574
> 
> 赞同：1
> 
> 时间：2013-02-13T04:50:11.160
> 
> 标签：macos, cocoa, osx-lion

我目前正在通过[本苹果指南](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html)中描述的技术以编程方式在 OS X 10.7+ 应用程序中启用全屏，该技术使用 OpenGL 渲染其视图。是否可以在全屏动画期间启用每帧屏幕更新？目前，似乎在进入全屏之前和之后截取了屏幕截图，并且两者之间存在自动 alpha 淡入淡出。

我想在每一帧重绘内容，以便在两种尺寸之间平滑淡入淡出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:45:43.097

[您可能想查看NSWindowDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html)文档中的自定义全屏演示动画部分

# gnuplot - 带有月份名称的 Gnuplot X 轴

> ID：14846579
> 
> 赞同：1
> 
> 时间：2013-02-13T04:50:55.797
> 
> 标签：gnuplot

我有一个数据文件，其中浮点时间列从零增加到某个大值。每个时间点与一个数据点相关联。

时间点也恰好对应于月份，这样`0=Jan, 1=Feb, ..., 11=Dec, 12=Jan, 13=Feb, ...`

我想绘制这些数据，以便在 X 轴上看到月份名称，而不是`0-*`.

有没有办法做到这一点？

如果有帮助，我还可以在数据中预先生成月份名称。

示例数据，包括可能有用的月份名称，如下。

```
#Time 月份数据
0.01 一月 0
0.055 一月 0
0.2575 一月 0
1.1687 二月 0
1.9889 二月 0
3.1037 四月 0.00065915
3.2427 四月 0.0035198
4.0656 五月 0.03785
4.2134 五月 0.041977
5.0032 六月 0.049293
6.024 七月 0.080957
7.0317 八月 0.34284
7.9847 八月 0.80902
8.0081 九月 0.8149
8.9749 九月 0.94009
9.0316 十月 0.94389
9.9893 十月 0.97967
10.058 十一月 0.97967
10.295 十一月 0.97967
11.125 十二月 0.97967
13.151 二月 0.97967
13.696 二月 0.97967
14.124 三月 0.9797
15.119 四月 0.97733

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:06:35.637

我的第一个想法是尝试一些偷偷摸摸的东西`timefmt`，但不幸的是，这不起作用，因为所有月份的长度都不一样，所以这里实际上没有线性比例。我认为你能做的最好的事情就是手动指定抽动：

```
set xtics ("Jan" 0.5, "Feb" 1.5, "Mar" 2.5, ...) 
```

这会调整抽动，使它们位于范围的中心。如果您不希望这样，请改用整数值：

```
set xtics ("Jan" 0, "Feb" 1, "Mar" 2, ...) 
```

当然，您可以使用 gnuplot 4.6 中引入的 for do 循环使其更加灵活：

```
MONTHS="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
set xtics ( "Jan" 0.5 )  #first one can't have `add`.
do for [i=1:15] {
    which_month = word(MONTHS,i%12+1)
    pos = i+0.5
    set xtics add ( which_month pos )
}
plot 'test.dat' u 1:3 
```

`stats`您甚至可以通过查看`STATS_max`-- （您可能会使用`N = int(STATS_max+1)`或类似的东西）的命令来获得循环的上限：

```
stats 'test.dat' u 1 nooutput #Runs stats on the file, generates STATS_max 
```

还有一个速记符号也适用于 gnuplot 4.4：

```
MONTHS="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
set xtics ( "Jan" 0.5 )
set for [i=1:15] xtics add ( word(MONTHS,i%12+1) i+0.5 )
plot 'test.dat' u 1:3 
```

# php - 在php中上传doc和docx文件不起作用

> ID：14846582
> 
> 赞同：0
> 
> 时间：2013-02-13T04:51:10.333
> 
> 标签：php, file-upload, docx, doc

我有一个代码在两个不同的文件夹中上传两个文件（图像和文本）。

```
 $file_path = "users/".$uname."/dp/";
        $file_path2 = "users/".$uname."/resume/";

        $q=mkdir("users/".$uname."/dp/", 0777, $recursive=true);
        $r=mkdir("users/".$uname."/resume/", 0777, $recursive=true);
        if($q && $r)
        {
             $targate = $file_path.basename($_FILES['dp']['name']);
            //echo $targate ;die;
            if ((($_FILES['dp']["type"] == "image/gif") || ($_FILES['dp']["type"] == "image/jpeg") || ($_FILES['dp']["type"] == "image/png") || 
                ($_FILES['dp']["type"] == "image/jpg")) && ($_FILES['dp']["size"] < 20000))
            {
                if ($_FILES['dp']["error"] > 0)
                {
                    echo "Return Code: " . $_FILES['dp']["error"] . " ";
                }
                else
                {
                    move_uploaded_file($_FILES['dp']["tmp_name"], $targate);
                }
            }
            else
            {
                //echo "Invalid file";
            }

             $targate2 = $file_path2.basename($_FILES['resume']['name']);
            //echo $targate2 ;die;
            if ((($_FILES["resume"]["type"] == "text/plain")   || ($_FILES["resume"]["type"] == "application/msword")
            || ($_FILES["resume"]["type"] == "application/vnd.openxmlformats-officedocument.wordprocessingml.document")) && $_FILES['resume']["size"] < 20000)
            {
                if ($_FILES['resume']["error"] > 0)
                {
                    echo "Return Code: " . $_FILES['resume']["error"] . " ";
                }
                else
                {
                    move_uploaded_file($_FILES['resume']["tmp_name"], $targate2);

                }
            }
            else
            {
                //echo "Invalid file";
            }

            echo "success";die;
        }
        else{ echo "fail";die;} 
```

对于所有类型的图像，它都可以正常工作。但如果是文本文件**（doc 和 docx 文件）**，它会打印**成功**，但只上传图像文件。

当我更换这个

```
if ((($_FILES["resume"]["type"] == "text/plain")
            || ($_FILES["resume"]["type"] == "application/msword")
            || ($_FILES["resume"]["type"] == "application/vnd.openxmlformats-officedocument.wordprocessingml.document")) && $_FILES['resume']["size"] < 20000) 
```

条件与

```
if (($_FILES["resume"]["type"] == "text/plain")
             && $_FILES['resume']["size"] < 20000) 
```

这适用于**.txt** 有什么问题？我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:55:21.863

Step 1

Create one html file named index.html and paste the following code into it.

```
<html>

<body>

<form enctype="multipart/form-data" method="POST" action="upload.php">This is the code for html:

<table border="0">

<tbody>

<tr>

<td align="left">File:</td>

<td><input accept="doc/docx" name="filename" size="40" type="file" /></td>

</tr>

<tr>

<td><input name="Upload" type="submit" value="Upload" /></td>

</tr>

</tbody></table>

</form>

</body>

</html> 
```

Step 2

Create one PHP file named upload.php and paste the following code.

```
<?php

//if we clicked on Upload button

if($_POST['Upload'] == 'Upload')

  {

  //make the allowed extensions

  $goodExtensions = array(

  '.doc',

  '.docx',

  ); 

  $error='';

  //set the current directory where you wanna upload the doc/docx files

  $uploaddir = './ ';

  $name = $_FILES['filename']['name'];//get the name of the file that will be uploaded

  $min_filesize=10;//set up a minimum file size(a doc/docx can't be lower then 10 bytes)

  $stem=substr($name,0,strpos($name,'.'));

  //take the file extension

  $extension = substr($name, strpos($name,'.'), strlen($name)-1);

  //verify if the file extension is doc or docx

   if(!in_array($extension,$goodExtensions))

     $error.='Extension not allowed<br>';

echo "<span> </span>"; //verify if the file size of the file being uploaded is greater then 1

   if(filesize($_FILES['filename']['tmp_name']) < $min_filesize)

     $error.='File size too small<br>'."\n";

  $uploadfile = $uploaddir . $stem.$extension;

$filename=$stem.$extension;

if ($error=='')

{

//upload the file to

if (move_uploaded_file($_FILES['filename']['tmp_name'], $uploadfile)) {

echo 'File Uploaded. Thank You.';

}

}

else echo $error;

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T09:43:47.043

```
// Above answer is right but for perfection need some slight changes.......
 //  thanx...
//It will store particular document in a folder

<?php

//if we clicked on Upload button

if($_POST['Upload'] == 'Upload')

  {

  //make the allowed extensions

  $goodExtensions = array( '.doc', '.docx',); 

  $error='';

  //set the current directory where you wanna upload the doc/docx files

  $uploaddir = 'upload./ ';

  $name = $_FILES['filename']['name'];//get the name of the file that will be uploaded

  $min_filesize=10;//set up a minimum file size(a doc/docx can't be lower then 10 bytes)

  $stem=substr($name,0,strpos($name,'.'));

  //take the file extension

  $extension = substr($name, strpos($name,'.'), strlen($name)-1);

  //verify if the file extension is doc or docx

   if(!in_array($extension,$goodExtensions))

     $error.='Extension not allowed<br>';

echo "<span> </span>"; //verify if the file size of the file being uploaded is greater then 10

   if(filesize($_FILES['filename']['tmp_name']) < $min_filesize)

     $error.='File size too small<br>'."\n";
   else

  $uploadfile = $uploaddir . $stem.$extension;

  $filename=$stem.$extension;

  if ($error=='')

    {

//upload the file to

  if (move_uploaded_file($_FILES['filename']['tmp_name'], $uploadfile)) {

   echo 'File Uploaded. Thank You.';

    }

   }

    else echo $error;

   }

?> 
```

# image - 使用 FFT 的模板匹配对灰度图像更有效？

> ID：14846583
> 
> 赞同：1
> 
> 时间：2013-02-13T04:51:38.540
> 
> 标签：image, image-processing, fft, template-matching

如果源图像和模板图像是灰度图像，使用 FFT 进行模板匹配是否更有效？

还有，让我背锅。有人知道使用快速傅里叶变换实现模板匹配的优秀教程吗？

谢谢。！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:58:12.017

再优秀的教程：JP“Zilla”Lewis 关于[快速归一化互相关](http://scribblethink.org/Work/nvisionInterface/nip.html)的论文很难被击败。真是经典。

# iphone - 儿童锁功能

> ID：14846594
> 
> 赞同：0
> 
> 时间：2013-02-13T04:52:49.490
> 
> 标签：iphone, ios, objective-c

这可以制作*儿童锁*应用程序吗？

例如，当儿童锁开启时控制通话/短信/电子邮件/照片/视频。童锁开启时，孩子不能做任何事情。

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:56:47.403

在 iOS 中，第 3 方应用程序无法控制其他应用程序。不要认为这是可能的。除非 iPhone 越狱，否则您无法从您的应用程序控制另一个应用程序。但是，您可以获取本文中提到的 iOS 中的进程列表。如果您不打算将此应用程序发布到应用商店（不推荐），您可以尝试发送 SIGKILL 来终止它们。

> 但 iOS 6 包含一项新功能，让父母可以将 iPad 锁定到单个应用程序，这样孩子们就无法打开其他应用程序、发布到 Facebook 或从 iPad 上删除应用程序。新的 iOS 6 软件更新包括引导访问模式，该模式将 iPad 锁定到单个应用程序，并允许在 iPad 锁定时阻止屏幕的某些区域或其他功能。这也可以称为 iPad 的儿童模式。

使用引导访问：

*   暂时将您的 iOS 设备限制为特定应用
*   禁用与任务无关的屏幕区域，或意外手势可能导致分心的区域
*   禁用硬件按钮

![在此处输入图像描述](../Images/34ecc16dab6f244172ed455422671306.png)

[[来源]](http://www.gottabemobile.com/2012/10/01/how-to-lock-the-ipad-to-a-single-app-for-kid-mode/)和[[来源]](http://support.apple.com/kb/HT5509)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:01:11.053

我不敢说，但这只能在您的应用程序中锁定您想要锁定或不锁定的内容。如果您希望您的应用程序应该锁定您的默认电话呼叫系统或短信服务，那么据我所知，这是不可能的，因为您想从一些拥有自己的地址空间（即沙盒）的应用程序中做到这一点。意味着每个应用程序都有自己的地址空间，其他应用程序无法访问它，因为它会导致崩溃。

# php - Javascript 无法正常运行，请快速查看调试

> ID：14846602
> 
> 赞同：1
> 
> 时间：2013-02-13T04:53:40.020
> 
> 标签：php, javascript, printing, formatting

我有一些存在于 PHP 脚本中的 Javascript。这里是：

```
// start of JS script
print("<script type=\"text/javascript\"> <!--\n");
print("function storeData()");
print("{");
print("pos_index = ff_getElementByName('selectFormField').selectedIndex;"); 
for ($i = 0; $i < count($rows); $i++) 
{
$offsetIndex = $i + 1; // allow for "Please make a selection"
$f01 = $rows[$i]->username;
$f02 = $rows[$i]->email;
print("if (pos_index == $offsetIndex) {populatefields (\"$f01\", \"$f02\");}"); 
}
print("}");
print("\n//--> </script>");

// end of JS script 
```

它没有按应有的方式运行。有什么从格式中脱颖而出的不正确的吗？

* * *

如以下评论中所述，该`populateFields()`函数是对 Joomla 中第三方组件的内置函数的调用。这是代码：

```
function ff_SimpleSelect_init()
{
} // ff_SimpleSelect_init

function populateFields(f01, f02) 
{
ff_getElementByName('formField_01').value = f01; 
ff_getElementByName('formField_02').value = f02;  
} 
```

这个想法是，当用户从下拉菜单中选择一个值时，其他表单条目会使用与该用户 ID 关联的用户名和电子邮件值进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:57:35.990

我不确定你想要什么，但我看到你`<!--`在第一行使用过。你的意思是评论下面的JS代码吗？

但它在 JS 块内，`<!--`用于注释 HTML 代码。

因此，如果需要，您应该使用`/* ... */`评论。

# linux - 链接共享库的小异常

> ID：14846607
> 
> 赞同：0
> 
> 时间：2013-02-13T04:54:14.520
> 
> 标签：linux, monodevelop, ubuntu-12.04, awesomium

我将 libawesomium.1.6.5.so 和 libawesomium.1.6.5.so.0 文件保存在 /usr/lib/awesomium.1.6.5 文件夹中，并在 ld.co.config 中给出了这个 .so 库的路径。 d，在一个新的 .conf 文件中，但是当我运行我的项目时，它给了我一个

System.dll 未找到 libawesomium.1.6.5.so.0 的异常（包装器托管到本机）。

如何解决这个错误。当我通过

sudo ldconfig -p | grep libawesomium-1.6.5.so

命令，它给了我以下输出：

libawesomium-1.6.5.so.0 (libc6) => /usr/lib/awesomium-1.6.5/libawesomium-1.6.5.so.0

这意味着它存在。但仍然在运行时我的项目给出了这个错误：

System.dllnotfoundexception libawesomium-1.6.5.so.0

我正在研究monodevelop，所以有人可以建议我请我缺少什么。是否有一些我必须安装的插件或我必须遵循的一些终端命令。希望快速响应。

问候

罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-12T00:52:47.357

我需要 2 天时间才能找到解决此问题的方法！在 Linux Wheezy 32bit 上，您需要安装 libjpeg62 ...

apt-get 安装 libjpeg62

这将解决问题！...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:13:35.740

您应该能够将 LIBDIR=/lib 添加到 /etc/ld.so.conf，然后发出 ldconfig。如果没有，那么您可能正在使用 VMX 或其他类型的设置，例如需要您使用带有 -W/lib 的链接器。

# android - Corona SDK - 在动态图像分辨率中首先使用更高分辨率的图像

> ID：14846608
> 
> 赞同：0
> 
> 时间：2013-02-13T04:54:19.427
> 
> 标签：android, coronasdk

在 Corona SDK 中，可以使用动态图像分辨率，修改 config.lua 并添加带有相应后缀的图像，为不同的设备设置不同的分辨率。虽然这个系统适用于需要支持少量分辨率的 iOS，但 Android 有许多需要支持的分辨率，并且在更高分辨率的设备上缩放时，较低分辨率的图形看起来很模糊。

是否可以让 Corona SDK 在其动态图像分辨率系统中首先选择更高分辨率的图像，以确保 Android 用户不会得到一个模糊的应用程序？我知道节省内存不是默认行为，但我的目标是更高端的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:33:24.217

首先，不要这样做（首先加载更高分辨率），因为某些设备无法处理它（不是因为内存不足，而是因为 GPU 容量不足来处理大图像），你会遇到一些讨厌的问题。

您需要做的是更改高分辨率图形的阈值，而不是使用默认值。

这是我的 config.lua 相关部分，所以你可以明白我在说什么

```
content = {
    width = 307,
    height = 512, 
    scale = "letterBox",
    fps = 60,

    imageSuffix = {
        ["@2"] = 1.42857143, -- note I am not using 2 here
        ["@4"] = 4,
    }, 
```

我选择 1.42 的原因是我发现这个数字可以让大多数 Android 手机加载 @2 图像而不是 @1 而不会遇到内存或 GPU 问题。

# android - 限制在平板电脑中安装应用程序

> ID：14846609
> 
> 赞同：6
> 
> 时间：2013-02-13T04:54:32.200
> 
> 标签：android, android-screen-support

我有一个 Android 应用程序，我想**停止在 Tablet 中安装这个应用程序**。我搜索了很多网站。我有一些想法并遵循了。但这不是限制。

以下是我访问过的一些网站。

[Android 清单限制为平板电脑](https://stackoverflow.com/questions/7649558/android-manifest-restrict-to-tablets)

[http://android-developers.blogspot.in/2011/09/preparing-for-handsets.html](http://android-developers.blogspot.in/2011/09/preparing-for-handsets.html)

我已经尝试`supports-screens`在平板电脑中安装仍然应用程序。这该怎么做？

> **注意：我的应用具有 minsdkversion = 8 和 targetsdkversion = 17**

**编辑 1：**我使用以下代码来查找屏幕尺寸

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp

WindowManager wm=getWindowManager();
DisplayMetrics dm=new DisplayMetrics();
wm.getDefaultDisplay().getMetrics(dm);
deviceWidth=dm.widthPixels;
deviceHeight=dm.heightPixels; 
if((deviceHeight< 640 && deviceWidth<480)|| (deviceHeight<480 && deviceWidth< 640))
  {
      //large screen - TABLET

  } 
```

但我不知道`where to put this code to restricts installation and what will be the code to stop installation if large screen is true`。

**EDIT2：iOS 中的目标设备将是 IPAD/IPHONE/UNIVERSAl，就像我想在 Android 应用程序中设置的那样**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:56:31.437

我们可以通过两种方式安装安卓应用。

1.  adb 安装命令
2.  来自 Google Play 商店

使用 adb install 命令，没有人可以将应用程序安装限制在平板电脑或手机上。清单设置文件中的 , 等仅适用于 Google Play 商店过滤器。当您在市场上上传您的 APK 查看所有应用程序 > 选择您的应用程序 > APK > 支持的设备 | 时，我们可以将应用程序安装限制在特定设备上。排除的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:05:30.797

没有人真的希望你这样做，所以这可能有点棘手。您可以在 Google Play 的开发者控制台中禁用特定设备，但由于有数千种设备，可能需要涵盖的列表很长。不过，您可以使用控制台搜索 Tab、pad、tablet 和 nexus 7,10，这可能涵盖这些设备的很大一部分。

要考虑的另一个选项实际上是将目标 sdk 设置为预蜂窝级别。也就是说，请注意它可能会损害您的应用程序的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:12:54.420

一种快速而肮脏的方法是将以下行添加到您的清单中：

```
<uses-feature android:name="android.hardware.telephony" android:required="true" /> 
```

虽然严格来说，这只会强制您的应用程序将用于具有语音收音机的设备，但实际上它会满足您的目的，因为几乎没有平板电脑具有电话功能。然而，一个值得注意的例外是三星 Galaxy Note II，它是一款 5.5 英寸的手机，所以从技术上讲，它介于手机和平板电脑之间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:12:15.997

请记住，Google Play 分发可能需要一段时间。通过控制台上传新应用程序不会立即反映在您的设备上。

这可能需要几个小时，可能会错过正确的解决方案。

希望这可以帮助。亚龙

# java - 获取 java.lang 包中所有类的集合（或集合）

> ID：14846610
> 
> 赞同：0
> 
> 时间：2013-02-13T04:54:36.767
> 
> 标签：java, compiler-construction, compilation, java.lang.class

我正在为 Java 编写一个编译器，并希望将`java.lang`包隐式导入所有源文件（这是我所知道的大多数 Java 编译器所做的）。

为此，我需要以某种方式获取包中所有类的一组所有类（即，`Set<Class<?>>`）或一组所有限定名称（即，`Set<String>`）。

我已经从[这个页面](http://code.google.com/p/reflections/)查看了反射 API ，但是我的项目结构（和其他因素）使它不太适合。

所以我想知道是否有任何其他方式来获得这样的类（当然，除了硬编码这个东西！）？这是 Java 中最流行的包这一事实`java.lang`表明应该有一些方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:18:24.710

尝试

```
 String path = Object.class.getResource("Object.class").getPath().replace("!/java/lang/Object.class", "");
    ZipFile z = new ZipFile(new File(new URI(path)));
    Enumeration<? extends ZipEntry> e =z.entries();
    Set<String> s = new HashSet<String>();
    while(e.hasMoreElements()) {
        String n = e.nextElement().getName();
        if (n.matches("java/lang/\\w+\\.class")) {
            s.add(n);
        }
    } 
```

# asp.net-mvc-4 - 表单帖子中缺少 mvc4 动态生成的字段

> ID：14846611
> 
> 赞同：0
> 
> 时间：2013-02-13T04:54:36.853
> 
> 标签：asp.net-mvc-4

我有一个有点奇怪的情况，我在表单上动态生成了字段——所有下拉列表。这些选择对应于我想将它们相加以形成位掩码的二进制值。我以这种方式生成下拉列表：

```
<table class="center">
    @foreach (var field in Model.Fields)
    {
        <tr>
            <td>@field.DisplayText:</td>
            <td>
                @Html.DropDownList(field.FieldName, new SelectList(field.Options, "FlagValue", "Text", field.SelectedValue), "(doesn't matter)")                
            </td>
        </tr>
    }
</table> 
```

这似乎可行——就在视图中呈现正确的 HTML 而言。但是我的控制器没有收到字段中的选择。我试着循环遍历动态字段。

在下面的代码中，PatientSelectorEditor 是我的 ViewModel。

```
 private void GetFlagInfo(PatientSelectorEditor pse, out string description, out long flags)
    {
        description = null;
        flags = 0;

        // get list of all possible fields that could be in the view.
        pse.Fields = InitPatientSelectorFields(0);
        foreach (PriceFlagField field in pse.Fields)
        {                
            foreach (var option in field.Options)
            {
                // was something selected here?
                if (Request[field.FieldName].Equals(option.FlagValue))
                {
                    description += ", " + option.Text;
                    flags += option.FlagValue;
                }
            }                
        }            
    } 
```

走的线

```
 Request[field.Name] 
```

没有在我的视图中找到动态生成的字段。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:24:02.433

我发现我在这里做错了什么。这条线……

```
if (Request[field.FieldName].Equals(option.FlagValue)) 
```

需要像这样的显式字符串比较

```
if (Request[field.FieldName].Equals(option.FlagValue.ToString())) 
```

# javascript - 如何使用 window.open 方法或 xmlhttprequest onject 从服务器的预定义位置下载 .exe 文件？

> ID：14846616
> 
> 赞同：0
> 
> 时间：2013-02-13T04:55:13.280
> 
> 标签：javascript, gwt, xmlhttprequest, window.open

我的问题是我想从服务器读取 .exe 文件并将其保存到预定义的位置。目前我正在使用 window.open 方法，但它正在打开一个窗口并询问路径。请告诉我是否知道任何此类方法，最好使用 javascript 或 GWT。

然后我还尝试使用 xmlhttprequest 对象附加进度事件，它可以告诉我下载是否完成，但它也不能正常工作，并且没有出现所需的输出。

请帮我解决这两个问题。

希望尽快得到答复。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:59:00.727

由于安全隐患，您无法保存到预定义的位置。

# php - 从 FPDF 中删除错误输出？

> ID：14846625
> 
> 赞同：2
> 
> 时间：2013-02-13T04:56:16.467
> 
> 标签：php, html, fpdf

有没有办法禁用 FPDF 中的错误消息？我有自己的错误消息，我不希望 FPDF 也显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-13T05:43:17.137

将 FPDF 库的 Error() 函数编辑为：

```
function Error($msg)
{
    // Fatal error
    die;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-06T06:16:35.087

FPDF 库的`Error()`函数调用 PHP 的`die()`函数：

```
function Error($msg)
{
    // Fatal error
    die('<b>FPDF error:</b> '.$msg);
} 
```

要覆盖它，你应该继承 FPDF 类并覆盖`Error()`你的类中的函数。或者，如果您想要快速破解，请编辑该`Error()`函数以删除对`die()`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T04:57:10.040

使用此代码禁用错误报告

```
 error_reporting(0); 
```

# ruby-on-rails - Rails：通过 Ajax 传递参数

> ID：14846626
> 
> 赞同：10
> 
> 时间：2013-02-13T04:56:20.180
> 
> 标签：ruby-on-rails, ajax, json, params

我需要通过 javascript 将参数传递回服务器。目前，我将它们传递给 javascript，如下所示：

```
sendParams("<%= params[:q].to_json %>"); 
```

然后像这样把它们送回去：

```
function sendParams(q){
  $.ajax({
    url: '/mymodel/myaction',
    type: 'post',
    data: {'q':q},
    contentType: 'json'
  });
} 
```

在我的控制器中，我尝试像使用任何其他参数一样使用它们：

```
MyModel.where(params[:q]) 
```

但是参数是空的，即使萤火虫在 POST 选项卡中显示了这一点：

```
q=%7B%26quot%3Bc%26quot%3B%3A%7B%26quot%3B0%26quot%3B%3A%7B%26quot%3Ba%26quot%3B%3A%7B%26quot%3B0%26quot%3B%3A%7B%26quot%3Bname%26quot%3B%3A%26quot%3Btitle%26quot%3B%7D%7D%2C%26quot%3Bp%26quot%3B%3A%26quot%3Bcont%26quot%3B%2C%26quot%3Bv%26quot%3B%3A%7B%26quot%3B0%26quot%3B%3A%7B%26quot%3Bvalue%26quot%3B%3A%26quot%3B2%26quot%3B%7D%7D%7D%7D%2C%26quot%3Bs%26quot%3B%3A%7B%26quot%3B0%26quot%3B%3A%7B%26quot%3Bname%26quot%3B%3A%26quot%3Bvotes_popularity%26quot%3B%2C%26quot%3Bdir%26quot%3B%3A%26quot%3Bdesc%26quot%3B%7D%7D%7D 
```

知道为什么这些信息没有被 where 子句处理吗？我该怎么做才能使 params Rails 再次可读？

更新：

```
Started POST "/publications/search?scroll=active&page=6" for 127.0.0.1 at 2013-0
2-12 22:55:24 -0600
Processing by PublicationsController#index as */*
Parameters: {"scroll"=>"active", "page"=>"6"} 
```

更新 2：

问题显然源于`contentType`. 当我删除它时，然后`q`作为 Rails 参数发送。不幸的是，`q`仍然是JSON，导致错误：

```
undefined method `with_indifferent_access' for #<String:0x686d0a8> 
```

如何将 JSON 转换为参数哈希？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T09:32:41.373

您的数据参数错误。

你有

```
data: {'q':q}, 
```

它应该是

```
data: {q: 'q'}, 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T14:28:13.977

有几个问题需要解决才能使其发挥作用。首先，`q`它没有作为参数发送到 Rails，即使它正在发布。原因是它被视为 JSON 数据而不是参数。我通过删除该行来解决这个问题：

```
contentType: 'json' 
```

之后，AJAX 正确地发送了 'q'，但 Rails 在使用它时遇到了麻烦，因为它在 JSON 中。我不得不用 解析它`ActiveSupport::JSON.decode`，但这会引发`737: unexpected token`错误。我通过 (JSONlint)[http://jsonlint.com/] 运行代码，结果发现所有的引号都被转义了。

从那里，有两个解决方案。显而易见的是这样使用`.html_safe`：

```
sendParams("<%= params[:q].to_json.html_safe %>"); 
```

但这会在用户输入引号时引起问题。更安全的替代方法是在将转义的 HTML 实体传递回 Rails 后对其进行解码，如下所示：

```
ActiveSupport::JSON.decode(CGI.unescapeHTML(params[:q])) 
```

这成功了。

# java - 如何在 java 代码中解决这个 java.lang.ExceptionInInitializerError？

> ID：14846628
> 
> 赞同：0
> 
> 时间：2013-02-13T04:56:30.047
> 
> 标签：java, android, cordova, phonegap-plugins

这条线上出现了一个错误，我不明白该说什么。还有我正在使用一个qoppa.jar库如何解决这个问题有人可以帮助我吗

```
 m_LoadedDoc = new PDFDocument(new FilePDFSource((String) path[0]), PDFViewer.this);

    java.lang.ExceptionInInitializerError
    at com.qoppa.android.pdfProcess.PDFDocument$1.b(Unknown Source)
    at com.qoppa.android.pdfViewer.e.p.b(Unknown Source)
    at com.qoppa.android.pdfProcess.PDFDocument.b(Unknown Source)
    at com.qoppa.android.pdfProcess.PDFDocument.<init>(Unknown Source)
    at com.qoppa.android.pdfProcess.PDFDocument.<init>(Unknown Source)
    at com.pdfplugin.PDFViewer$LoadDocument.doInBackground(PDFViewer.java:469) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T15:29:47.590

在阅读文档之前需要调用一条魔法线：

```
// Magic: Register asset manager for font loading.
StandardFontTF.mAssetMgr = getContext().getAssets();

// Now you can read the document.
PDFDocument doc = new PDFDocument(new FilePDFSource(path), PDFViewer.this); 
```

您可能还需要包含示例项目中的`assets/fonts`和`assets/cmaps`目录。

# c - char 数组的值更改为第二次迭代值，我希望它是独立的

> ID：14846629
> 
> 赞同：0
> 
> 时间：2013-02-13T04:56:40.540
> 
> 标签：c

我的印象是，在每次运行时，在我的 Strings 数组中，我都在 pos 存储一个新的 str，因为我每次都声明它，相反，如果 addstr 变为 hello，则在第二次运行时，在第一次运行时它是 hi，第一次运行 hi 也变成了 hello。我只想在字符串中每次运行时使用不同的字符数组，所以稍后在每个位置我都有不同的字符串。要求是不能使用malloc、realloc、calloc。我真的认为在第一个 for 循环的第二次迭代中，我在一个独立于前一个的 char str 上创建。请帮我。

```
int pos = 0;
for(i=0; i<4; i++)
{
   if(file [i]=='a')
   {
      char str[5];
      int b=0;
      for(b; b<3; bi++)
      {
         str[b]=file[b];
      }
      Strings[pos]=str;
      pos++;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:08:48.507

当你这样做时：

```
Strings[pos]=str; 
```

它只是将该数组元素设置为“str”指向的缓冲区。它不复制字符串。'str' 缓冲区永远不会改变，因此您的整个数组最终都指向同一个缓冲区。

相反，您需要在该行复制字符串。如果您不能使用 malloc，那么您的 Strings 数组需要在每个数组元素（又名二维数组）处具有缓冲区。也许声明它是这样的：

```
char Strings[5][5]; 
```

然后不要使用 strcpy 复制到“str”，而是将字符串复制到“Strings[pos]”；

# java - 您在 LWJGL 中使用的 GL 版本是否重要？

> ID：14846632
> 
> 赞同：0
> 
> 时间：2013-02-13T04:56:45.430
> 
> 标签：java, opengl, lwjgl

我开始在此链接上浏览有关 lwjgl 的教程：[https ://www.youtube.com/watch?v=cQAYMkzy9rQ](https://www.youtube.com/watch?v=cQAYMkzy9rQ)

我注意到教程使用以下导入

```
import static org.lwjgl.opengl.GL11.*; 
```

我相信这意味着它使用 GL 1.1，它不是最新版本的 GL。使用此版本而不是使用最新版本有什么负面影响？如果我以后想用 lwjgl 编写自己的游戏，我会导入最新版本的 openGL 吗？而且，如果它使用旧版本的 GL，我什至应该遵循本教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T04:59:18.527

不，没关系，但较新的版本能够使用较新的功能。您可以阅读 OpenGL 的 wiki 以查看添加了哪些新内容。 [维基](http://www.opengl.org/wiki/History_of_OpenGL#Summary_of_version_changes)

# javascript - 当页面中发生事件时如何调用javascript函数？

> ID：14846643
> 
> 赞同：0
> 
> 时间：2013-02-13T04:57:20.583
> 
> 标签：javascript, javascript-events

我有一个具有一定价值的跨度：

```
<li>Rent Collected: Euros <span id="rentTotal">2000</span></li> 
```

每当用户在页面中执行任何操作时，我都需要更新该值。有没有办法在所有元素上不使用 onclick 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:01:30.903

假设这是使用表单元素输入信息，form.onchange 事件对于这样的重新计算非常方便。

如果您不使用表单元素，而是仅使用 HTML 和大量 onclick 代码……那么这就是您应该使用表单元素的原因。

# c# - 如何模拟套接字连接丢失？

> ID：14846646
> 
> 赞同：5
> 
> 时间：2013-02-13T04:57:36.233
> 
> 标签：c#, .net, sockets

在我们的一个客户端-服务器应用程序中，我们需要测试由于各种原因导致套接字连接丢失时应用程序的行为。对于这个测试，我们需要模拟一个程序，它可以每隔几秒就强制断开服务器上特定端口上的连接。通过这种方式，我们可以测试连接的客户端如何对此类连接中断做出反应。

请建议我是否可以在我的代码中执行此操作，或者我可以将其与任何免费软件一起使用。

编辑：我们知道我们需要在几毫秒或几秒内阻止连接的端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:23:10.613

一项艰巨的任务！

*   一、抢[微软机器人SDK](http://www.microsoft.com/robotics/)

*   接下来，您需要一个可编程的机械臂套件——这里有一些[看起来](http://www.brighthub.com/electronics/gizmos-gadgets/articles/123823.aspx#)很有前途的产品。

*   现在是棘手的部分 - 您需要编写一系列动作，将手臂移动到位，合上手（从而按下 RJ45 释放小块），然后横向移动，以创建拔出/重新插入动作。

*   完成后，将您的机械臂放在系统后面靠近 NIC 以太网端口的位置，并调用您的方法来触发序列！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:49:21.390

假设你在 Windows

[NetStat Agent](http://netstatagent.com/)有一个试用版，您可以在其中监视连接并根据过滤器自动终止它们。您也可以手动杀死它们。它不能做的一件事是在终止连接之前设置一些延迟。

# iphone - 需要时间从后台恢复应用程序，显示启动画面

> ID：14846648
> 
> 赞同：1
> 
> 时间：2013-02-13T04:58:08.593
> 
> 标签：iphone, ios

我们的应用程序需要时间从 iPod 的后台恢复，所以它每次都显示启动画面。当应用程序进入前台时，它会从缓存中加载一些数据，如果有大量数据需要时间。我该如何处理这种情况？我只是将这些方法放入调度队列，但没有显着效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:08:14.903

使用调度队列并将那些耗时的方法（从缓存加载数据的方法）发送到后台。完成后，说您现在需要进行一些 UI 更新，获取主队列并在那里更新 UI

```
dispatch_queue_t queue = dispatch_queue_create("name for the queue", NULL);
dispatch_async(queue, ^{
    //your extensive code goes here, should not involve any UI updates
    //If there are any UI updates involved, uncomment the following code:
    /*dispatch_async(dispatch_get_main_queue(), ^{
        //UI update here, as it should always be done on main thread
    });*/
}); 
```

由于您在启动期间在主线程上进行大量计算，因此您将看到初始屏幕。您应该照顾好它并将其移至后台，因为将来，如果从缓存中加载需要很长时间，超过 10 秒，您的应用程序将被看门狗杀死。

干杯，玩得开心

# mysql - 大多数网站使用什么MYSQL表存储引擎？支持 FULLTEXT 索引以及 RELATIONSHIPS 的一种？

> ID：14846649
> 
> 赞同：1
> 
> 时间：2013-02-13T04:58:12.443
> 
> 标签：mysql, indexing, innodb, myisam

这是我在 Stackoverflow 中阅读的一篇文章中学到的。

“我看到的第一个主要区别是 InnoDB 实现了行级锁，而 MyISAM 只能执行表级锁。您会在 InnoDB 中找到更好的崩溃恢复。但是，它没有 FULLTEXT 搜索索引，MyISAM 也是如此。InnoDB还实现了事务、外键和关系约束，而 MyISAM 没有。”

由于大多数站点需要表之间的关系以及站点搜索，他们使用哪个引擎？我应该选择哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:22:56.063

我在 Percona 工作，这是一家领先的 MySQL 咨询和培训公司。我们推荐 InnoDB 作为存储引擎的默认选择，而 MyISAM 仅在可以证明它具有一些优势的特殊情况下推荐（即通过对您的应用程序使用两种存储引擎进行基准测试来证明它）。

自 2010 年 12 月起，InnoDB 已成为 MySQL 5.5 的默认存储引擎。

在 2013 年 2 月发布的 MySQL 5.6 中，InnoDB 现在支持自己的全文索引实现。但是大多数需要大规模全文搜索的网站发现使用 Sphinx 搜索仍然更胜一筹。另请参阅我的演示文稿[Full Text Search Throwdown](http://www.slideshare.net/billkarwin/practical-full-text-search-with-my-sql)。

InnoDB 不仅具有您列出的优势，而且[在许多基准测试中也比 MyISAM 更快](http://www.mysqlperformanceblog.com/2007/01/08/innodb-vs-myisam-vs-falcon-benchmarks-part-1/)。许多年前，曾经有一段时间，人们认为 MyISAM 是更快的存储引擎。但是 InnoDB 已经收到了大量的工作来提高它的性能和可扩展性。

InnoDB 需要更多地注意调整配置变量，因为默认值并不完全适合生产网站使用。我有另一个演示文稿，[InnoDB 状态指南](http://www.slideshare.net/billkarwin/mysql-55-guide-to-innodb-status)，它描述了一些最重要的调优选项。

# html - Twitter Bootstrap - Row Div 和 Span Divs 1px 大小

> ID：14846659
> 
> 赞同：0
> 
> 时间：2013-02-13T04:59:15.047
> 
> 标签：html, css, twitter-bootstrap

我目前正在 Twitter Bootstrap 中创建登录页面，但遇到了问题。该行中包含的行和跨度正在被内容填充。它们每个的高度都是 1px。

[http://www.landing.xeonweb.com.au](http://www.landing.xeonweb.com.au) - 是网址

下面是代码：

```
 <!-- Bootstrap -->
<link href="css/bootstrap.css" rel="stylesheet" media="all">
<link href="css/bootstrap-responsive.css" rel="stylesheet" media="all">

<!--Bootstrap Js-->
<script src="http://code.jquery.com/jquery.js"></script>
<script src="js/bootstrap.min.js"></script> 
```

```
<div id="headerwrapper">
<div id="header" class="container">

   <div class="row">

     <div class="span5">
                <div id="logo">
                    <img src="../img/logo.png" alt="Barrier Reef Pools Newcastle">
                </div>

                <div id="contactbutton">
                    <button class="btn btn-large btn-block btn-success" type="button">Contact Us</button>
                </div>

     </div>

   <div class="span5">

   <div id="myCarousel" class="carousel slide">
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
  </ol>
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="item"><img src="img/majestichead.jpg" alt="Majestic Range" /></div>
    <div class="active item"><img src="img/barrierhead.jpg" alt="Barrier Reef Range" /></div>
    <div class="item"><img src="img/indulgencehead.jpg" alt="Indulgence Range" /></div>

  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>

   </div>       

    <!--end Row-->  
        </div>      

<!--end Header-->       
  </div>            
<!-end Head wrap-->
</div> 
```

标题没有响应或者我认为是因为这个？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:08:29.343

尝试`<div class="row-fluid">` 代替`<div class="row">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:16:26.657

好吧，您已经搞砸了整个引导程序代码，最好的做法是在不同的 css 文件中编写自定义样式，而不是将它们包含在引导程序主 css 中。

尝试这个 -

请使用默认样式 -

```
<head>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrapcombined.min.css" rel="stylesheet">
 </head>

  <div class="container">
  <div class="row">
  <div class="span4">
  <h2>Heading</h2>
   <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
  <p><a class="btn" href="#">View details »</a></p>
</div>
     <div class="span6">
     <!--  Carousel code here-->

     <!-- end carousel -->
   </div>
   </div>
   </div> 
```

# android - 视频流格式

> ID：14846665
> 
> 赞同：1
> 
> 时间：2013-02-13T04:59:35.510
> 
> 标签：android, video, video-streaming

哪种视频格式最适合从服务器到 Android 平板电脑和 Android 手机的视频流？

`.3gpp or .mpeg4?`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:37:33.190

它取决于兼容性，有特定的格式是可支持的，在开发者网站上很好地提到，看看。

[Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)

> 对于通过 HTTP 或 RTSP 流式传输的视频内容，还有其他要求：
> 
> 对于 3GPP 和 MPEG-4 容器，moov 原子必须在任何 mdat 原子之前，但必须在 ftyp 原子之后。
> 
> 对于 3GPP、MPEG-4 和 WebM 容器，对应相同时间偏移的音频和视频样本可能相隔不超过 500 KB。为了最大限度地减少这种音频/视频漂移，请考虑以较小的块大小交错音频和视频。

# mysql - 存储过程中的嵌套游标

> ID：14846666
> 
> 赞同：2
> 
> 时间：2013-02-13T04:59:39.073
> 
> 标签：mysql, stored-procedures, cursor

我在存储过程中创建了带有 52600 条记录的临时表，我想迭代临时表并为每一行更新一列。

在这里，我有两个`cursors`用于临时表，第二个用于其他表，例如 table2，它有三行，我必须从临时表中取出 1 行并遍历 table2 并进行比较，如果找到匹配，我正在更新临时表中的列。

这个过程大约需要 500 秒的时间，`stored procedure`使用游标和循环是好还是在代码中好？

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_repaymentDelay`()
BEGIN
    drop table if exists loan_repayed_temp;
    create temporary table loan_repayed_temp ( l_id int primary key, loan_Id int, installmentNo int,date_Diff int,interval_id int default 0);

insert into loan_repayed_temp (l_id,loan_Id,installmentNo,date_Diff) 

     select  lrs.id ,lrs.loan_profile_id ,lrs.installment_number , datediff(curdate(), lrs.estimated_payment_date) from 
 loanTable lp inner join loanrepaymentschedule lrs on lp.id = lrs.loan_profile_id and lp.state = 'REPAYMENT_IN_PROGRESS'
 left join repayments r on lrs.loan_profile_id = r.loan_profile_id and r.repayment_number = lrs.installment_number 
 where r.loan_profile_id is null and lrs.estimated_payment_date < NOW()  

;

    BEGIN
        declare done int default false;

        declare lid, loanId, installmentNo , dateDiff int;
        declare cursor2 cursor for select id, interval_range_min, interval_range_max from delay_interval;
        declare cursor1 cursor for select l_id,loan_Id, installmentNo,date_Diff from loan_repayed_temp;

        declare continue handler for not found set done = true;

       open cursor1;

            cursor1_loop : loop

                fetch cursor1 into lid, loanId, installmentNo, dateDiff;

                IF done THEN
                LEAVE cursor1_loop;
                END IF;

          --    delay interval comparision --

                BEGIN
                    declare i , min ,max int;
                    declare done2 int default false;
                    declare continue handler for not found set done2 = true;

                    open cursor2;

                    cursor2_loop: loop

                            fetch cursor2 into i, min, max;

                            IF done2 THEN
                            LEAVE cursor2_loop;
                            end IF;

                                if dateDiff >= min and dateDiff <= max then

                            --    insert into datedemo values(dateDiff,loanId,i);

                                 update loan_repayed_temp set interval_id = i where l_id = lid; 

                                    leave cursor2_loop;

                                end if; 

                        end loop cursor2_loop; 

                    close cursor2;
                END; 

                -- --

                end loop cursor1_loop;

        close cursor1;

    END; 

    drop table  loan_repayed_temp;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:21:58.593

如果我正确理解了您的光标，您将遍历临时表中的所有记录并查看 date_diff 字段是否介于 delay_interval 表的最小值和最大值之间。如果是这样，我认为这将以相同的方式工作，并且应该更快：

```
UPDATE loan_repayed_temp l
    INNER JOIN delay_interval d
        ON l.date_Diff >= d.interval_range_min
            AND l.date_Diff <= interval_range_max
SET l.interval_id = d.id 
```

这是一个示例[SQL Fiddle](http://sqlfiddle.com/#!2/f2f7c/1)。如果我误解了，请告诉我。

祝你好运。

# c# - 从 winforms 运行 aspx 页面

> ID：14846667
> 
> 赞同：1
> 
> 时间：2013-02-13T04:59:59.243
> 
> 标签：c#, asp.net, winforms, devserver

我有网站和 winform 项目，该网站是虚拟书店，当您完成“购买”时有一部分，该网站根据 session[“Order”] 值生成 aspx 页面的收据，我希望能够从我的 winform 项目进入收据页面（当我传递我的 id 参数时），我想我有两个选项可以做到这一点：

1.  从我的winform项目中获取值并用它加载recipt页面。
2.  运行一个允许我输入 id 的不同 aspx 页面。（我认为更容易）

我的主要问题是我无法意识到如何使用 webdev 工具从我的 winform 项目（并为它打开端口）运行 aspx 页面。
第二个问题是我不确定如何在 winforms 中使用会话（为了传递我的参数）。

我google了很多，发现自己太困惑了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:04:18.410

您可以使用 Winform 应用程序中的 URL 通过查询字符串传递 ID。在您的 ASP.Net 站点中，处理来自查询字符串的 ID 并相应地显示收据页面。就像是：

```
ProcessStartInfo processStartInfo = new ProcessStartInfo("http://example.com/yoursite?ID=2");  
Process.Start(sInfo); 
```

*以上将在机器上的默认浏览器中打开站点*

至于在 Winform 和 ASP.Net 站点中管理会话，我认为这是不可能的，因为`Session`WinForm 没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:51:52.490

尝试使用 Web 浏览器控件，您可以使用它托管 *.aspx。

如果可以，请使用这些教程，

[http://msdn.microsoft.com/en-us/library/aa752041(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa752041%28v=vs.85%29.aspx)

# php - 使用 padcrypt.php 在 php 中使用 aes 进行加密

> ID：14846668
> 
> 赞同：0
> 
> 时间：2013-02-13T05:00:00.903
> 
> 标签：php, encoding

我需要在 php 中创建一些数据的加密。在我正在阅读的 Netsuite 文档中，它指出如果您的帖子数据`{"id":"373"}` 使用 SHA-1 散列算法将其转换为

```
2274ff3113280bec7e6d777813eaa6806d86b730 
```

然后，使用 256 对称加密`AES`算法，`SHA-1`哈希变为

```
sntKRzFdXq5wtaghU5OSXBzVN4jAeS4Tj8e1LPQNmVA= 
```

我使用 padcrypt.php 进行编码。我能够生成与文档相同的 SHA-1。但是，我无法像示例中那样创建 AES 加密。我尝试更改填充，我用 base64 加密但没有得到这个数字。

任何人都可以从这个例子中找出答案并告诉我哪些设置（使用 padcrypt.php）会创建这个 AES 加密吗？

# android - 在android中使用陀螺仪获取角度

> ID：14846674
> 
> 赞同：1
> 
> 时间：2013-02-13T05:00:19.760
> 
> 标签：android, gyroscope

我可以用这个代码计算陀螺仪的角度吗？我的意思是 dT 的计算是否正确？

```
public void onSensorChanged(SensorEvent event) {
            switch (event.sensor.getType()) {
      /* Other sensor cases */
           case Sensor.TYPE_GYROSCOPE: 
            for (int j=0;j<3;j++) mGyro[j] = event.values[j];
            if(i==0)
                i=1;
            else
                i=2;
            if(i==1)
                start=System.nanoTime();
                else if(i==2) {
                    finish=System.nanoTime();
                 dT=( finish-start )/1000000000f;
                             i=0;
                }

            angle[0]=(float) ((angle[0]+mGyro[0]*dT)*180/3.1428f);
            angle[1]=(float) ((angle[1]+mGyro[0]*dT)*180/3.1428f);
            angle[2]=(float) ((angle[2]+mGyro[0]*dT)*180/3.1428f);

            break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:40:01.753

我假设您正在尝试获取方向。不，这些公式不正确，这不是您在 3D 中整合角速率的方式，这实际上有点棘手。

如果你想要角度，那么只需使用API 中的[SensorManager.getOrientation()](http://developer.android.com/reference/android/hardware/SensorManager.html#getOrientation%28float%5B%5D,%20float%5B%5D%29)。换句话说，有人已经为您编写了此代码，无需重新发明轮子。

不要**对**任意方向使用偏航、俯仰和滚动，[欧拉角是邪恶的](https://stackoverflow.com/q/5577334/341970)。

[如果您的目标是学习，您可以在方向余弦矩阵 IMU：理论](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)手稿中找到如何在 3D 中集成。这份手稿基本上是一个教程，非常简单明了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T12:11:32.937

[SensorEvent](http://developer.android.com/reference/android/hardware/SensorEvent.html)类的文档提供了如何使用陀螺仪的完整示例。您基本上只需要复制和粘贴代码。有关如何从陀螺仪获取方向的信息，请参阅[此答案。](https://stackoverflow.com/a/18800083/448357)

# javascript - 如何在不重新加载页面的情况下将表单字段值动态附加到变量

> ID：14846677
> 
> 赞同：1
> 
> 时间：2013-02-13T05:01:07.507
> 
> 标签：javascript, jquery, coldfusion

如何将输入的字母从表单动态附加到查询中的变量...

代码如下......

```
 <cfquery name="select" datasource="#xxxx#" dbtype="ODBC">
      select xxxxx from yyyy where xxxxx like '%#form.search#%'
    </cfquery>

    <cfset head=#ValueList(MyQuery.pname,",")#>
    <cfset head1=#listtoarray(head)#>

   <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
   <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
   <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
   <link rel="stylesheet" href="/resources/demos/style.css" />
   <script>

  $(function() {
  var states = <cfoutput>#serializeJson(head1)#</cfoutput>;
  $("#k").autocomplete({
  source:states
  });
  });
 </script>

 <form action="/" method="get" id="searchForm">
   <input type="text" name="search" id="search">
 </form> 
```

所以在这里我只想将“搜索”文本框值附加到查询（'%#form.search#%'），只要我键入它而不重新加载页面或失去表单字段的焦点......

先感谢您... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:26:47.603

```
<input type="text" name="search" id="search"> //search is your element-id

<cfquery name="select" id="select" datasource="#xxxx#" dbtype="ODBC"/>

$('#search').keydown(function (){
 var data = $('#search').val();
 $('#select').append(data);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:21:32.587

```
<cfquery name="select" id="select" datasource="#xxxx#" dbtype="ODBC">
  select xxxxx from yyyy where xxxxx like '%#form.search#%'
</cfquery>

$('#inputId').keyup(function (){
 var data = $('#inputId').val();
 $('#select').append(data);
}) 
```

# youtube - 获取高质量的 youtube 视频

> ID：14846684
> 
> 赞同：1
> 
> 时间：2013-02-13T05:01:25.810
> 
> 标签：youtube, video-streaming, youtube-api

我正在使用 mediaelement 播放器从 youtube 流式传输视频。然而，我得到的视频质量很差。我试图强制使用最高质量的播放：

```
 <source type="video/youtube" src='http://www.youtube.com/watch?v=WA4iX5D9Z64&hd=1'></source> 
```

但是，这是行不通的。我怎样才能以最高质量取回视频或指定我想要的质量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:24:09.840

一般来说，只有当视频窗口足够大以处理更高的定义时，Youtube API 才会尊重 hd 参数......所以如果你的 iFrame 最终只有 640x360，即使添加了 hd=1，你也会得到一个 360p 视频. 这可以通过增加 iFrame 的大小（或传递给 API 的高度/宽度参数）来改变，或者通过使用 vq 参数来指定您想要的质量（即 vq=720p 或类似的东西）。

但是，您的情况很复杂，因为您自己没有与 API 交互或使用简单的 iFrame 嵌入，而是用 mediaelement 播放器包装它。在查看源代码时，似乎当 mediaelement 与 Youtube API 交互时，除了 Youtube ID 本身之外，它没有传递任何参数（在“playerVars”数组中），因此 hd 或 vq 都不会有任何效果. 更改播放器的大小仍然有效；例如，

```
<video width="1280" height="720" id="player1" preload="none">
    <source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI"/>
</video> 
```

将为您提供比以下质量更高的视频：

```
<video width="640" height="360" id="player1" preload="none">
    <source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI"/>
</video> 
```

当您执行 mediaelement 回调时。

如果您不想增加播放器的大小但仍然有更高质量的视频，您可以修补 mediaelement-and-player.js 文件以确保它将 vq 参数发送到 API，然后在src 属性。

# java - 退出应用程序时Android停止服务

> ID：14846687
> 
> 赞同：13
> 
> 时间：2013-02-13T05:01:32.560
> 
> 标签：java, android

我正在创建一个带有背景音乐的游戏应用程序。我使用 Android Service 播放背景音乐，因为我想在更改活动时运行 BGM。我的问题是，我已经在每个活动的 onPause 方法中声明了完成（）（我不想让用户返回并想要终止活动）。

所以当我打算进行其他活动时，它会调用 onDestroy 并停止服务。我想停止服务完全退出应用程序（按下主页按钮）并想通过 BGM 和完成（）在 onPause（）中完成活动。这可能吗？还是有其他解决方案？

```
public class BackgroundMusicService extends Service {
    private static final String TAG = null;
    MediaPlayer player;

    public IBinder onBind(Intent arg0) {

        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        player = MediaPlayer.create(this, R.raw.topbgm);
        player.setLooping(true); // Set looping
        player.setVolume(100, 100);
    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        player.start();
        return 1;   
    }

    public void onStart(Intent intent, int startId) {
        // TO DO

    }

    public IBinder onUnBind(Intent arg0) {
        // TO DO Auto-generated method
        return null;
    }

    public void onStop() {

    }

    public void onPause() {

    }

    @Override
    public void onDestroy() {
        player.stop();
        player.release();
        Log.i("service", "service killed");
    }

    @Override
    public void onLowMemory() {

    }
} 
```

在清单中

```
<service android:name=".BackgroundMusicService" android:process=":remote" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T05:08:51.287

把这条线放在你的活动中

```
stopService(new Intent(this, BackgroundMusicService.class)); 
```

在按下主页按钮的 onDestroy() 方法中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:38:04.733

`stopService(new Intent(this, BackgroundMusicService.class));`

将此添加到您的主要活动中的`onPause()`方法和方法中。`onDestroy()`因为如果您按下`Home`按钮，应用程序将在后台随机运行一段时间，并且`onDestroy()`在您最小化应用程序后不会立即调用方法。最好的方法是将其放入`onPause()`方法中。`onPause()`当您的应用程序活动不是前台活动时调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T10:02:11.727

覆盖Service中的onUnbind(Intent intenet)方法

# .htaccess - 在 htaccess 中使用以下字符重定向所有 html 扩展

> ID：14846692
> 
> 赞同：1
> 
> 时间：2013-02-13T05:02:19.607
> 
> 标签：.htaccess, redirect, character

我有成千上万的页面像这样被抓取：（带有 shtml 扩展名之后的字符）

```
news2005/1124024714.shtml&lt;/a&gt;      
news2005/1126747676.shtml&lt;/a&gt;      
news2005/1686586565.shtml&lt;/a&gt;      
news2005/1168658656.shtml&lt;/a&gt;          
news2005/1486856686.shtml&lt;/a&gt; 
```

我需要在 htaccess 中放置一个简单的重定向，它将重定向所有

```
.shtml&lt;/a&gt; to mysite.com 
```

网址有字符，我不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:53:04.313

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule \.shtml.+$ http://%{HTTP_HOST} [L,NC,R=301] 
```

# aggregation - 查找地址之间的相似性

> ID：14846694
> 
> 赞同：1
> 
> 时间：2013-02-13T05:02:28.317
> 
> 标签：aggregation, similarity, deduplication

我编写了以下代码来查找两个邮政地址之间的相似性

```
 double similarAddr(String resAddr,String newAddr)
    {
       String sortedResAddr=asort(resAddr); //asort alphabetically sorts the sentence passed as its parameter
       String sortedNewAddr=asort(newAddr);
       String[] addrToks=sortedResAddr.split("[ ]+");
       String[] newToks=sortedNewAddr.split("[ ]+");
       int l1=addrToks.length;
       int l2=newToks.length;
       double similarity=0.0;
       int lengths,lengthl; //lengths is length of shorter string while lengthl is that of longer string
       if(l1<l2)
       {
         lengths=l1;
         lengthl=l2;
         for(int i=0;i<l1;i++)
           {
            double max=0.0;
            for(int j=i;j<l2;j++)
               {

                 double curr_similarity=findSimilarity(addrToks[i],newToks[j]); //findSimilarity calculates similarity between two string based on their edit distance, it first calculates the edit distance and normalize by dividing it by the longer string length and subtracts it from 1
                 if(max<curr_similarity)
                      max=curr_similarity;
                }
               similarity+=max;
            }

        }
       else
        {
           lengths=l2;
           lengthl=l1;
           for(int i=0;i<l2;i++)
             {
                 double max=0.0;
                 for(int j=i;j<l1;j++)
                    {

                      double curr_similarity=findSimilarity(newToks[i],addrToks[j]);
                      if(max<curr_similarity)
                         max=curr_similarity;
                     }
                  similarity+=max;
              }
         }
    similarity/=lengths;
    return similarity;
} 
```

但是通过这种方法，我发现了许多误报。在这里，我将阈值设为 0.5，即如果相似度得分高于 0.5，那么它们可能是相似的。但是仅增加阈值并不能解决我的问题，因为许多不同地址的相似度得分约为 0.7 左右，并且它可能会错过许多相似度得分接近 0.6 左右的真正相似的对。

例如，以下两个地址 **9/18, Ekdalia Road, Gariahat, Kolkata** 和 **1/3, City Mall, Jessore Road, Near Dak Banglow More, Barasat, Kolkata - 700124 之间**的相似度 为 0.6488，但它们根本不一样.

所以我问是否有人可以提出更好的方法来做同样的事情。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:38:25.400

地址上的代币比较不会给你很好的结果，因为地址的组成部分具有不同的重要性。例如，街道名称的相似性并不重要，除非城市名称也匹配。

要做好地址比较，需要尝试解析出地址的层次性——街道、城市、州、国家等，并以层次的方式比较地址。

如果您不想为此付出努力，您可以通过消除“停用词”来改善您的结果。例如，“street”、“road”等词经常出现，并且不是很好的鉴别器——它们使地址看起来比实际更相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:38:41.777

我认为 kc2001 是正确的：您需要将地址解析为单独的字段。看起来[Gisgraphy](http://www.gisgraphy.com/documentation/addressparser.htm)有一个适用于印度地址的解析器。

如果您还可以将地址地理编码为纬度/经度坐标，这也很有帮助，因为有时可以用多个地址描述同一个地方。从描述看来，Gisgraphy 也可以做到这一点。

然而，解析地址只是第一步。之后你需要比较它们，我发现你需要一个非常精细的比较器才能让它工作。例如，Ekdalia Road 9/18 与 Ekdalia Road 382/21 是完全不同的地方，即使字符串非常相似。通过对街道地址和高于字母的加权数字使用加权 Levenshtein 比较，我得到了很好的结果。

我编写了一个名为[Duke](http://code.google.com/p/duke/)的重复数据删除工具，它可以让您通过使用加权 Levenshtein 和其他比较器分别比较字段来比较解析的地址，然后将各个字段的结果组合成一个相似度值。我已经成功地使用它对客户数据和酒店数据进行了重复数据删除，等等。

您需要对其进行一些配置和调整，但这应该比自己做这一切要容易得多。

# html - 如何减少 Blogger 中的外包装？

> ID：14846695
> 
> 赞同：0
> 
> 时间：2013-02-13T05:02:36.120
> 
> 标签：html, css, templates, blogger

我有一个 Blogger 简单模板 ( [www.elleliterate.com](http://www.elleliterate.com) )，我的博客有一个相当宽的外包装。它在左侧还不错，但在侧边栏的右侧，它相当宽，在页脚下方也是如此。我在网上查看，它一直告诉我在我的 HTML 中找到#outer-wrapper，但我已经搜索了整个内容，但无处可寻！也没有主包装器或侧边栏包装器！如何调整外包装尺寸以减少列和背景之间的填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:37:41.340

`min-width: 0; max-width: none`您可以通过添加来最小化窗口填充`<div class="content-outer">`。

要使标题图片居中，您必须`display: block`从`<img alt="elleliterate" height="300px;" id="Header1_headerimg" src="..." style="display: block" width="1020px; ">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:14:39.863

我刚刚意识到这一点是多么尴尬。

模板>自定义>调整宽度>滑开

解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:35:21.183

减少这里的宽度

在您的模板中找到此代码并进行编辑

```
 body {
 min-width: 1100px;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T19:27:07.517

我也在使用博客更简单的模板。但我有相反的问题，我的页面太窄：

当我调整以下内容时，似乎改变了页面的宽度。我的默认是：

```
 body {
    min-width: $(content.width);
  }

  .content-outer, .content-fauxcolumn-outer, .region-inner {
    min-width: $(content.width);
    max-width: $(content.width);
    _width: $(content.width);
  } 
```

希望这可以帮助

# javascript - 从点击终止 Javascript 循环

> ID：14846709
> 
> 赞同：0
> 
> 时间：2013-02-13T05:04:03.580
> 
> 标签：javascript

我有一个我正在为 phonegap 应用程序开发的 javascript 脚本，该应用程序获取设备位置，直到获得一定的目标精度。如果没有达到目标，脚本会再次调用自身进入永恒。通常需要 1-8 次尝试，具体取决于位置和上次使用的时间，然后一切正常。我遇到的问题是某些设备永远不会达到该阈值（这对应用程序来说很好），但会破坏电池寿命，因为该脚本一直在后台运行。那么如何通过单击事件（提交按钮）终止此脚本？我正在考虑设置一个点击提交按钮更改的全局变量。就像是：

```
if (var != 'quit') {
    //function 
} else {
    ///nothing
}

function getlocation(position) {
    document.getElementById("lat").value = (position.coords.latitude);
    document.getElementById("long").value = (position.coords.longitude);
    document.getElementById("accu").value = (position.coords.accuracy);
    var accuracy = parseInt(position.coords.accuracy, 10);
    if (accuracy <= 50) {
        $('#scanner').removeClass('littlered').addClass('littlegreen');
    } else {
        setTimeout(navigator.geolocation.getCurrentPosition(getDroplocation, onError, {
            enableHighAccuracy: true
        }), 3000);
    }
} 
```

不过，这并没有奏效。我设置了全局变量，但没有任何反应。有什么更好的方法或方法来实现我上述的想法吗？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:13:40.417

你想要[clearTimeout](https://developer.mozilla.org/en/docs/DOM/window.clearTimeout)

改变

```
function getlocation(position) { 
```

到

```
var tId;
function getlocation(position) { 
```

并`setTimeout`_`tId=setTimeout`

并`clearTimeout(tId);`单击您想要单击的任何内容或添加计数器并在 10 次左右尝试后杀死

例如

```
<input type="button" id="togglebutton" value="Stop" /> 
```

使用

```
var tId,startPosition="whateverdefaultpositionissetto";
window.onload=function() {
  document.getElementById("togglebutton").onclick = function() {
    if (tId) {
      clearTimeout(tId);
      this.value="Start";
    }
    else {
      getlocation(startPosition); 
      this.value="Stop";
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:18:48.150

使用[clearTimeout()](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)方法清除使用 setTimeout() 方法设置的计时器。

```
var to;

function getlocation(position) {
    document.getElementById("lat").value = (position.coords.latitude);
    document.getElementById("long").value = (position.coords.longitude);
    document.getElementById("accu").value = (position.coords.accuracy);
    var accuracy = parseInt(position.coords.accuracy, 10);
    if (accuracy <= 50) {
        $('#scanner').removeClass('littlered').addClass('littlegreen');
    } else {
        to = setTimeout(navigator.geolocation.getCurrentPosition(getDroplocation, onError, {
            enableHighAccuracy: true
        }), 3000);
    }
}

//Add click event handler to a button to stop the looping
var button = document.getElementById("testbtn");
testbtn.onclick = function() {
    clearTimeout(to);
} 
```

# mongodb - 复制/克隆 mongodb 数据库及其数据

> ID：14846712
> 
> 赞同：45
> 
> 时间：2013-02-13T05:04:12.867
> 
> 标签：mongodb

我需要复制我的 Mongo 数据库及其数据。我努力了

```
db.copyDatabase( "Old_db", "new_db", "localhost" ) 
```

但问题是它只复制一个空白数据库，而不是以前的数据。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2019-02-21T20:10:35.510

**2019 年 2 月**

由于`db.copyDatabase()`在 v4.0 中已弃用，您应该使用`mongodump`and`mongorestore`代替：

```
mongodump 
    --host <source host:port> 
    --ssl 
    --username <username> 
    --password <password> 
    --authenticationDatabase admin 
    --db <sourceDbName> 
    --collection <collection-name> 
```

`mongodump`命令会将整个数据库导出到`dump/<sourceDbName>`默认命名的本地文件夹中，然后使用`mongorestore`命令导入到目标数据库：

```
mongorestore 
    --host <target host:port> 
    --ssl 
    --username <username> 
    --password <password> 
    --authenticationDatabase admin 
    --db <targetDbName>
    --collection <collection-name>
    <dump folder/file> 
```

例子：

```
# backup the whole db (mydb-old):
mongodump -h Cluster0-shard-0/sample-shard-00-00-xyz.mongodb.net:27017 \
--ssl -u user1 -p 123123 --authenticationDatabase admin \
-d mydb-old

# backup only one collection (mydb-old.users):
mongodump -h Cluster0-shard-0/sample-shard-00-00-xyz.mongodb.net:27017 \
--ssl -u user1 -p 123123 --authenticationDatabase admin \
-d mydb-old -c users

# restore the whole db (mydb-old) to mydb-new:
mongorestore -h Cluster0-shard-0/sample-shard-00-00-xyz.mongodb.net:27017 \
--ssl -u user1 -p 123123 --authenticationDatabase admin \
-d mydb-new dump/mydb-old

# restore only one collection (mydb-old.users) to mydb-new.users:
mongorestore -h Cluster0-shard-0/sample-shard-00-00-xyz.mongodb.net:27017 \
--ssl -u user1 -p 123123 --authenticationDatabase admin \
-d mydb-new -c users dump/mydb-old/users.bson 
```

了解更多：

*   [mongodump](https://docs.mongodb.com/manual/reference/program/mongodump)
*   [mongorestore](https://docs.mongodb.com/manual/reference/program/mongorestore)

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-03-27T00:06:16.813

您可以使用 copydb 或 clone，或它们的助手`copyDatabase()`或`cloneDatabase()`，但有一些注意事项：

[http://docs.mongodb.org/v2.2/tutorial/copy-databases-between-instances/#considerations](http://docs.mongodb.org/v2.2/tutorial/copy-databases-between-instances/#considerations)

也许你正在触发其中的一些。

我刚测试

```
db.copyDatabase("test","testCopy","127.0.0.1") 
```

它工作得很好。

**让我们知道您是否成功。**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-20T04:11:08.740

如果需要认证：

```
db.copyDatabase('crm', 'crm_copy', 'localhost', 'admin', '123456') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-17T21:59:03.200

## 对于 MongoDB v4.2+：

较旧`copyDatabase`且`cloneDatabase`已弃用。您应该使用 and 的组合来`mongodump`代替`mongorestore`。

## 例子：

**源数据库：** [名称= `olddb`（主机= `localhost`，端口= `27017`）]

**目的地。DB：** [名称= `newdb` （主机= `localhost`，端口= `27017`）]

## 方法 1 - 通过使用存档文件：

1-运行 mongodump 将`olddb`数据库转储到存档`mongodump-old-db`：

```
mongodump --archive="mongodump-old-db" --db=olddb --host=localhost --port=27017 
```

2-运行 mongorestore`--nsFrom`并`--nsTo`从存档中恢复（数据库名称更改）：

```
mongorestore --archive="mongodump-old-db" --nsFrom='olddb.*' --nsTo='newdb.*' --host=localhost --port=27017 
```

* * *

## 方法 2 - 通过使用标准输出流：

`olddb`您可以将数据库 mongodump 到标准输出流并通过管道传输到 mongorestore ，而不是使用存档文件。

赶紧跑：

```
mongodump --archive --db=olddb --host=localhost --port=27017 | mongorestore --archive  --nsFrom='olddb.*' --nsTo='newdb.*' --host=localhost --port=27017 
```

**提示：**您可以根据需要包含其他选项，例如 uri ( **--uri** ) 或主机 ( **--host** )、端口 ( **--port** )、用户名 ( **--username** )、密码 ( **--password** ) 或[其他选项](https://docs.mongodb.com/v4.2/reference/program/mongodump/#mongodump-options).

资料来源：[有关该主题的官方 MongoDB 文档](https://docs.mongodb.com/database-tools/mongodump/#mongodump-example-copy-clone-database)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-01T19:17:22.340

我刚刚从同事那里复制了 data/db 文件，它运行良好。我想在这样做之前关闭任何连接/mongod 是个好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-25T15:51:42.160

I would recommend to have a look at the daemon(s). It happened to me that I had to reinitialize it/them (in my case I had a replica set)

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2016-05-06T13:49:37.580

使用 MongoChef 很容易做到，在本地创建相同的数据库，然后复制源的集合，然后过去到本地新创建的数据库。

# jdbc - 如何使用不同的 where 条件执行相同的 JDBC 查询

> ID：14846719
> 
> 赞同：0
> 
> 时间：2013-02-13T05:04:57.403
> 
> 标签：jdbc

我有一个类似的java方法

```
public List<Employee> getEmployeeById(Long id){
    final String query = "SELECT * FROM EMPLOYEE WHERE ID=?";
    preparedStatement.setLong(1,id);

   // from the result set prepare employee object
   // close result set
   // close prepared stmt
   // close connection.
} 
```

现在我该如何更改方法，以便我的 where 子句可以是 'where name=?' 或“哪里部门=？” 或其他一些标准。

即 1\. 我不需要将结果集解析为员工 obj，因为我使用的是简单的 jdbc。2.无需编写相同的样板代码（即关闭结果集，preparedstmt，conn）

我想使用简单的 JDBC。
我需要为此编写不同的方法还是有其他方法。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T12:29:45.523

您可以创建一个包含这些参数的类。传递类的实例而不是冗长的参数。IE

```
Class xyz = new Class(); 
```

xyz.TableName = "随便"; xyz。员工 ID = 12345；

然后执行：getEmployeeByID(xyz);

# android - 您是否忘记在 FragmentActivity 中调用 setup(LocalActivityManager) 异常

> ID：14846723
> 
> 赞同：2
> 
> 时间：2013-02-13T05:06:11.110
> 
> 标签：android, android-fragments, android-tabhost, android-fragmentactivity

我有这段代码，我想在其中显示每个选项卡的新片段。

```
public class Second extends FragmentActivity{

private TabHost mTabHost;
private static final String TAG_1 = "tab1";
private static final String TAG_2 = "tab2";
private static final String TAG_3 = "tab3";
private static final String TAG_4 = "tab4";

Fragment srkt_fragment,srk2_fragment,holl_fragment,bink_fragment;

EditText k1_e,k2_e,al_e,alconst_e,dr_e;
float k1,k2,al,al_const,dr;
int invalid=0;
TextView emm;
EditText k2_m,k1_m;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);

    dr_e=(EditText)findViewById(R.id.dr_editText);
    k1_e=(EditText)findViewById(R.id.k1_editText);
    k2_e=(EditText)findViewById(R.id.k2_editText);
    al_e=(EditText)findViewById(R.id.al_editText);
    alconst_e=(EditText)findViewById(R.id.al_const_editText);
    emm=(TextView)findViewById(R.id.iolpower);

    mTabHost=(TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();

    /*68 line*/addTab("SRK/T", TAG_1, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent().setClass(Second.this, Srkt_x.class));
    addFragment(new Srkt_x(), true, FragmentTransaction.TRANSIT_NONE);
    addTab("SRK II", TAG_2, createTabDrawable(R.drawable.ic_tab_eye_unselected),new Intent().setClass(Second.this, Srk2_x.class));
    addFragment(new Srk2_x(), true, FragmentTransaction.TRANSIT_NONE);
    addTab("BINKHORST", TAG_3, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent().setClass(Second.this, Binkhorst_x.class));
    addFragment(new Binkhorst_x(), true, FragmentTransaction.TRANSIT_NONE);
    addTab("HOLLADAY", TAG_4, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent().setClass(Second.this, Holladay_x.class));
    addFragment(new Holladay_x(), true, FragmentTransaction.TRANSIT_NONE); 
```

/*更多代码在这里*/

```
private void addTab(String label, String tag, Drawable drawable, Intent intent) {
    TabHost.TabSpec spec = mTabHost.newTabSpec(tag);
    spec.setIndicator(createTabIndicator(label, drawable));
    spec.setContent(intent);
    intent.putExtra("AL", al);
    intent.putExtra("K1", k1);
    intent.putExtra("K2", k2);
    intent.putExtra("ALC", al_const);
    intent.putExtra("DR", dr);
    intent.putExtra("INVALID", invalid);
    mTabHost.addTab(spec);
    startActivity(intent);
}
void addFragment(Fragment fragment, boolean addToBackStack, int transition) {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.wrapfragment, fragment);//314 line
    ft.setTransition(transition);
    if (addToBackStack)
        ft.addToBackStack(null);
    ft.commit();
} 
```

* * *

我得到以下异常

```
 02-13 10:26:12.734: D/AndroidRuntime(400): Shutting down VM
02-13 10:26:12.734: W/dalvikvm(400): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-13 10:26:12.744: E/AndroidRuntime(400): FATAL EXCEPTION: main
02-13 10:26:12.744: E/AndroidRuntime(400): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.IllegalStateException: Did you forget to call 'public void setup(LocalActivityManager activityGroup)'?
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.os.Looper.loop(Looper.java:123)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-13 10:26:12.744: E/AndroidRuntime(400):  at java.lang.reflect.Method.invokeNative(Native Method)
02-13 10:26:12.744: E/AndroidRuntime(400):  at java.lang.reflect.Method.invoke(Method.java:507)
02-13 10:26:12.744: E/AndroidRuntime(400):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-13 10:26:12.744: E/AndroidRuntime(400):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-13 10:26:12.744: E/AndroidRuntime(400):  at dalvik.system.NativeStart.main(Native Method)
02-13 10:26:12.744: E/AndroidRuntime(400): Caused by: java.lang.IllegalStateException: Did you forget to call 'public void setup(LocalActivityManager activityGroup)'?
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:652)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.widget.TabHost.addTab(TabHost.java:216)
02-13 10:26:12.744: E/AndroidRuntime(400):  at com.example.iolcalci.Second.addTab(Second.java:314)
02-13 10:26:12.744: E/AndroidRuntime(400):  at com.example.iolcalci.Second.onCreate(Second.java:68)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-13 10:26:12.744: E/AndroidRuntime(400):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-13 10:26:12.744: E/AndroidRuntime(400):  ... 11 more 
```

* * *

我知道可以通过使用 ActivityGroup 而不是 FragmentActivity 来纠正它，但我也想使用 FragmentManager。请帮我解决这个问题（android 初学者）

# windows - 全屏时qt'x'不会关闭应用程序

> ID：14846724
> 
> 赞同：0
> 
> 时间：2013-02-13T05:06:22.950
> 
> 标签：windows, qt, mobile

我一直在用头撞这个，所以我终于放弃并寻求帮助。

我的问题是我的程序有一个 settings.ini，我想在程序关闭时更新它。我使用以下方法实现了这一点：

**kegTrackerce.h**

```
protected:
    void closeEvent(QCloseEvent *event); 
```

和

```
 void KegTrackerCE::closeEvent(QCloseEvent *event)
    {
        saveSettings();
        event->accept();
    } 
```

当我浏览文件并退出时，这会保存设置并关闭程序，这很好，但是当我点击右上角的“X”时，窗口消失但程序不退出（没有退出代码）加上当我再次打开应用程序 exe，程序立即打开而不是加载。

我已经确定只有当我包含以下代码时才会发生这种情况

```
KegTrackerCE::KegTrackerCE(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
//A heap of other stuff here
KegTrackerCE::showFullScreen();
} 
```

当我注释掉 showfullscreen，ta dah 时，“x”正常工作，设置文件被适当更新，程序从内存中清除，我得到一个 0 退出代码。

我真的不想让应用程序最大化而不是全屏，因为屏幕空间已经足够有限，顶部没有多余的栏没有意义。

感谢你们的帮助，我已经尝试了很多东西，我已经包括：

```
qApp->setQuitOnLastWindowClosed(true); 
```

随着

```
void KegTrackerCE::lastWindowClosed (){
QApplication::quit();
} 
```

但这无济于事。

我相当确定`closeEvent()`当事物处于全屏状态时按下 x 时根本不会调用。

无论如何，请帮助！您的帮助将不胜感激！！

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:19:23.417

经过一番环顾后，我发现了这一点：

[Windows Mobile 中的非关闭关闭按钮（使用 Qt 开发）](https://stackoverflow.com/questions/1079825/nonclosing-close-button-in-windows-mobile-developed-with-qt)

这是一个解决方案，但我对我的修复感到满意。基本上，当按下按钮时，win ce 会默认保持应用程序运行。有人谈论在样式中设置一点，但我认为简单地删除 x 是最简单和最有效的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:15:49.517

“我相当确定当事物处于全屏状态时按下 x 时，closeEvent() 根本不会被调用”在函数内放置一个断点并检查，因为我看不出 closeEvent 的任何原因是不叫。

并`hide()`在 closeEvent 之前调用`event->accept();`。可能不是一个解决方案，但只是为了检查

# jquery - 如何使用 css 或 jquery 覆盖 div [span in a span] 中的特定样式？

> ID：14846726
> 
> 赞同：0
> 
> 时间：2013-02-13T05:06:34.780
> 
> 标签：jquery, css

1.  如果我们有 div 并且没有跨度，即跨度在一个跨度中，并且每个跨度都有一种颜色样式，如何使用 css 或 jquery 覆盖特定的样式[颜色] ..。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:16:57.477

您可以使用 jquery`.css()`函数示例`$("span").css("color","red");`

或创建一个单独的 css 类并`.addClass()`用于跨度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:20:52.363

你的意思是这样的吗？

```
<div><span style="color:red;">red <span style="color:blue;">blue</span></span></div> 
```

如果是这样，您可以使用 !important 更改它们的颜色：

```
div span {color: green !important;} 
```

# java - Java网络游戏设计

> ID：14846727
> 
> 赞同：-1
> 
> 时间：2013-02-13T05:06:41.663
> 
> 标签：java, networking, client

我正在用 java 设计一个简单的国际象棋游戏，并想向其中添加网络（客户端和服务器模型）
。一个玩家在服务器端，另一个在客户端。现在我有一个 server.java client.java 和 game.java。

game.java 包含在服务器端和客户端（每个玩家都有一个游戏实例）。我的问题是我不知道何时在两侧之间发送数据。我将侦听器添加到游戏类，但服务器客户端似乎无法在游戏类中获取点击事件。一种方法是我使用忙等待来不断检查是否有更新。但是有没有办法在不使用忙等待的情况下检查更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:20:14.563

设计这个游戏的标准方法是让你的客户端类的两个实例（每个玩家一个）与协调游戏的中央服务器通信。每个客户端在内存中都有自己的棋盘表示，但由服务器确保移动从一个客户端中继到另一个客户端，所选移动有效，保持得分，确定游戏何时结束等。基本上，服务器是控制器/协调器/裁判。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:22:26.987

基本上，您需要设置某种“令牌”来指示哪个玩家可以移动。拥有令牌的玩家是唯一可以进行有效移动并将该数据连同令牌一起发送回其他玩家的玩家。然后第一个玩家将被置于“等待”状态......

没有令牌的玩家将等待其他玩家的响应。这可以通过简单地从套接字的输入流中读取来轻松建立。

当主动玩家移动时，该移动（以及令牌）被发送给等待玩家。活动播放器然后进入等待状态，读取那里的套接字的输入流。刚刚激活的玩家将收到更新通知，并被允许采取行动。它周围...

我会从您的“网络引擎”获得一个回调机制，该机制会通知“游戏引擎”网络事件，例如“收到移动”、“网络故障”等。

我将在“网络引擎”中有一个简单的方法，允许我将移动数据发送回其他玩家。如果编码正确，“网络引擎”可以阻止来自“游戏引擎”的请求，直到玩家轮流移动。同样，您也可以通过检查来确定玩家的当前状态。

只是一些随机的想法：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:15:01.357

这篇[文章](https://stackoverflow.com/questions/12588476/multithreading-socket-communication-client-server/12589851#12589851)有关于如何编写服务器和客户端并接受多个请求的示例代码。

# dojo - 在 Dijit 中查找 Dijit

> ID：14846728
> 
> 赞同：0
> 
> 时间：2013-02-13T05:06:45.840
> 
> 标签：dojo

我有一个名为 的小部件`ImageBox`，它只是在另一个名为`SlideBox`.

解析后ImageBox节点结构的示例结构（我在控制台中看到的）：

```
<div class="textwrapper">
    <div class="text">
         <h2>Title of Image</h2>
    </div>
</div> 
```

完整 SlideBox 的示例结构：

```
<div data-dojo-type="dj/SlideBox" widgetid="SlideBox_1">
    <div data-dojo-type="dj/ImageBox" widgetId="ImageBox_1">
        <!-- It's here!! Right here!! -->
        <div class="textwrapper">
            <div class="text">
             <h2>Title of Image</h2>
            </div>
        </div>
    </div>
</div> 
```

在 ImageBox`postCreate`方法中，我试图找到 textwrapper div 的高度，但是所有使用任何 dijit 注册表方法查询或查找小部件的尝试都没有返回任何内容。

请注意，textwrapper 和文本 div 是使用 dojo 创建的，而不是在原始标记中创建的。

我可以看到小部件，它就在那里，我可以看到`.textwrapper`我正在尝试访问的 div。似乎有一些订单内容或 Dojo 处理小部件解析的某种方式。

如何在小部件中找到小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:26:13.403

您通常会使用[registry.findWidgets](http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#finding-all-widgets-underneath-a-dom-node)方法来查找节点下方的小部件。如参考指南中所述，findWidgets 不会递归地在小部件中查找小部件......

但在您的情况下，将 data-dojo-attach-point 设置到小部件模板中的 textwrapper div 就足够了。像这样的东西可能在你的 ImageBox 的模板 html 文件中：

```
<div class="${baseClass}">
    <div class="textwrapper" data-dojo-attach-point="textwrapper"></div>
</div> 
```

然后，您可以在 ImageBox 小部件中引用 textwrapper div：

```
postCreate: function() {
    // use this.textwrapper to access the textwrapper div, e.g. like:
    var contentBox = domGeom.getContentBox(this.textwrapper);
    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:03:23.267

根据要求，从对 OP 答案的评论中移出：要访问子小部件，请等到 postCreate() 之后，以便可以将子小部件添加到 DOM。

然后应该可以根据小部件生命周期从容器小部件的 startup() 方法访问子小部件 - [http://dojotoolkit.org/documentation/tutorials/1.8/understanding_widgetbase/](http://dojotoolkit.org/documentation/tutorials/1.8/understanding_widgetbase/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:27:02.170

这似乎有点hacky，但它有效。通过在基类中添加`dojo/ready`调用`postCreate`，我可以等到一切都完成后，再进行查询。

我在每个小部件的生命周期中添加了一些 log() 调用，我发现 ImageBox 是最后触发的，因此我放入包含的任何内容`postCreate`都不会看到它的孩子的任何以小部件为中心的属性。将`ready()`调用添加到`postCreate()`包含小部件的调用颠倒了日志调用的顺序，从而有效地使其等待所有依赖项加载后再继续。

# json - 415 不支持的媒体类型。内容类型集

> ID：14846729
> 
> 赞同：1
> 
> 时间：2013-02-13T05:06:52.950
> 
> 标签：json, rest, post, jersey

我已经设置了请求的内容类型，但仍然收到不受支持的媒体类型异常。在这里寻找第二双眼睛......

我的java代码：

```
@Path("/myPath")
public class MyResource {

    SensorStore dataStore = new SensorStoreDynamoImpl();

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("/{id}")
    public Reading getObj(String id) {
        return dataStore.getValue(id);
    }

    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public void saveObj(String id, Double myDouble, Long myLong) {
        dataStore.saveReading(id, myDouble, myLong);
    }

} 
```

我正在拨打的电话：

```
POST to /myPath

Header:
Content-Type: application/json

Body:

{
id:"test", 
myDouble:22.2, 
myLong:22
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:11:09.807

这看起来不像我知道的任何有效的资源方法。如果有一些我不知道的高级功能，我很乐意得到纠正，但我从来不知道 JAX-RS/Jersey 允许您按名称将任意 JSON 字段绑定到方法参数。你需要更多类似的东西：

```
class MyPojo {
    String id;
    Double myDouble;
    Long myLong;
}

@POST
@Consumes(MediaType.APPLICATION_JSON)
public void saveObj(MyPojo myPojo) {
    dataStore.saveReading(myPojo.id, myPojo.myDouble, myPojo.myLong);
} 
```

# html - 嵌入时浏览器不显示图像

> ID：14846730
> 
> 赞同：3
> 
> 时间：2013-02-13T05:07:06.647
> 
> 标签：html, image

如果您访问[http://cartpauj.icomnow.com/](http://cartpauj.icomnow.com/)，您会看到 HTML 中的图像没有显示出来。这是一个截图：[http ://cl.ly/MrL6](http://cl.ly/MrL6)

图像的 src 是 100% 正确的，如果我在浏览器中直接浏览到图像文件，它就会显示出来。Chrome 中元素检查器的屏幕截图：http: [//cl.ly/Mrlt](http://cl.ly/Mrlt)

然而，当我直接浏览到该图像时，它显示得很好。我会发布一个图片链接，但我不能，因为我在这里没有 10 个声望点。您可以在上面的屏幕截图中看到图像的 URL。

我检查了 .htaccess 是否有任何奇怪的规则，但没有任何问题。有没有人有任何想法可能导致这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:13:37.360

问题是对您的图像的请求如下：

[http://cartpauj.icomnow.com/wp-content/uploads/logoBig.png](http://cartpauj.icomnow.com/wp-content/uploads/logoBig.png)

正在重定向到[http://icomnow.com](http://icomnow.com)。这仅在`Referer`设置标题时发生（当您从页面加载图像时发生，而不是直接加载）。您可能有一个损坏的重写规则导致了这种情况。

其他损坏的图像：

*   /wp-content/uploads/2011/05/Blue_store1.jpg
*   /wp-content/themes/simplex/images/logo-simpleX.png
*   /wp-content/uploads/2011/05/istore-banner125.png
*   /wp-content/uploads/2011/05/android-logo-white-150x1501.png
*   /wp-content/uploads/logoBig.png
*   /wp-content/uploads/2010/11/plugin_store250x1251.gif
*   /wp-content/uploads/ads/icomnowad125.jpg
*   /wp-content/themes/simplex/images/arrows-ffffff.png
*   /wp-content/uploads/ads/icomnowad125.jpg
*   /wp-content/uploads/logoBig.png
*   /wp-content/uploads/logoBig.png

您可以使用[Fiddler](http://www.fiddler2.com)等工具轻松找到这些内容。

# tsql - 根据表连接上的空结果更新字段

> ID：14846737
> 
> 赞同：1
> 
> 时间：2013-02-13T05:07:46.527
> 
> 标签：tsql

我一直在寻找有关如何从另一个表中获取 SET 值的参考资料，但我们并没有真正使用此字段，因此很高兴将其设置为通用值“1”

我只想设置 11k 示例，其中使用此查询底部的选择删除了模型类型。

```
update webhelpdesk.dbo.ASSET
set MODEL_ID = N'1'
where ASSET_NUMBER = 
    (select a1.ASSET_NUMBER
    from asset a1
    left join webhelpdesk.dbo.MODEL m1 on m1.MODEL_ID=a1.MODEL_ID
    where m1.MODEL_ID is null) 
```

这将返回 **子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。该语句已终止。**

我想我应该使用其他东西而不是更新帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:28:43.047

You should use `IN` instead of `=` in WHERE condition

```
update webhelpdesk.dbo.ASSET
set MODEL_ID = N'1'
where ASSET_NUMBER IN
    (select a1.ASSET_NUMBER
    from asset a1
    left join webhelpdesk.dbo.MODEL m1 on m1.MODEL_ID=a1.MODEL_ID
    where m1.MODEL_ID is null) 
```

# php - Typo3 中的分页

> ID：14846738
> 
> 赞同：0
> 
> 时间：2013-02-13T05:07:53.970
> 
> 标签：php, typo3

我写了一个 TYPO3 扩展，它列出了页面上数据库中的记录。现在我必须在页面底部添加分页，每页有 10 条记录，就像 tt_news 一样。

谁能给我一个提示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:14:26.023

尝试扩展“通用页面浏览器”（[http://typo3.org/extensions/repository/view/pagebrowse](http://typo3.org/extensions/repository/view/pagebrowse)）。该扩展为其他扩展提供页面浏览服务。

# android - setNotifyOnChange(true) 不工作

> ID：14846752
> 
> 赞同：0
> 
> 时间：2013-02-13T05:09:11.073
> 
> 标签：android, sqlite, android-arrayadapter, autocompletetextview

`onResume()`我在我的 android 活动中的方法中添加了以下代码。

```
 username.addTextChangedListener(this);
    usernames_adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line,
            users.getUserList());
    username.setAdapter(usernames_adapter);
    usernames_adapter.setNotifyOnChange(true); 
```

我正在使用 sql 脚本将数据插入数据库。我需要在`username`（`username`插入`AutoCompleteTextView)`后显示插入的数据。所以我使用`usernames_adapter.setNotifyOnChange(true);`了。但它不起作用。我必须在`Force Stop`我的应用程序中显示插入的数据`AutoCompleteTextView`。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:16:22.240

改变

> usernames_adapter.setNotifyOnChange(true);

至

> usernames_adapter.notifyDataSetChanged();

此方法仅在您删除、更新和插入项目时有效。

# php - 从 PHP 中的图像 url 中删除分辨率字符串

> ID：14846753
> 
> 赞同：2
> 
> 时间：2013-02-13T05:09:18.113
> 
> 标签：php, regex

我有以下图片网址：

```
http://www.example.org/wp-content/blogs.dir/29/files/2013/02/Personalized-Results-Asterisk-600x417.png 
```

这里包含默认分辨率的网址，即`600x417.png`其中。我想从此图片网址中删除此分辨率。

图片 url 的最终输出应该是这样的：

```
http://www.example.org/wp-content/blogs.dir/29/files/2013/02/Personalized-Results-Asterisk.png 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T05:14:47.917

试试这个 ：

```
$string = 'http://www.example.org/wp-content/blogs.dir/29/files/2013/02/Personalized-Results-Asterisk-600x417.png';
$pattern = '/\-*(\d+)x(\d+)\.(.*)$/';
$replacement = '.$3';
echo preg_replace($pattern, $replacement, $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:19:34.157

你可以试试

正则表达式：`^(.*?)-\d+x\d+\.([^/]+)$`

用。。。来代替：`$1$2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:15:45.647

```
$str=preg_replace("/^(.+)-\d+?x\d+?(\.\w+)$/i","$1$2",$str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:17:21.493

preg_replace

```
$correct_url = preg_replace('`\-[0-9]*x[0-9]*(\.[^\.]*)$`','$1',$url); 
```

有很多方法。

# hibernate - 如何避免在选择操作期间加载 ManyToOne 对象

> ID：14846754
> 
> 赞同：0
> 
> 时间：2013-02-13T05:09:39.303
> 
> 标签：hibernate, jpa

```
@Entity
public class Foo {
   int v1;
   int v2;

   @ManyToOne
   Bar bar;
}

Query query = EntityManager.createQuery("select foo from Foo"); 
```

上面的查询返回`Foo`（s），但也加载（s）`bar`对象。如何防止加载条形对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:15:08.773

默认情况下，多对一关系是渴望的。当首选延迟获取时，可以通过以下方式完成：

```
@ManyToOne (fetch=FetchType.LAZY) 
```

FetchType.LAZY 只是对提供者的提示，根据 JPA 2.0 规范*Attributes with FetchType.LAZY may or may not have been loaded*。所以不能保证在所有 JPA 实现中都是惰性的——在 Hibernate 中它确实有效。

# iphone - 这个字符串是否为空

> ID：14846760
> 
> 赞同：0
> 
> 时间：2013-02-13T05:10:38.040
> 
> 标签：iphone, nsstring

这是我的字符串在控制台中的输出。

```
device type-------------(
mobile,
"<null>",
tablet 
```

如何处理第二个值。我尝试了以下方式，但在这些行中应用程序无法正常工作。

```
if([dType isEqualToString:@"<null>"])
if([dType isEqualToString:@""])
if([dType isEqualToString:@"null"]) 
```

以上都不起作用。请指导以上。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:23:27.187

```
 if (dType == (NSString *)[NSNull null])
    {
       // your logic here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:12:36.587

而不是比较字符串。始终建议您检查字符串的长度。像 ：

```
[yourString length] == 0 
```

并且，检查状况。你也可以检查[这个](https://stackoverflow.com/questions/899209/how-do-i-test-if-a-string-is-empty-in-objective-c)。希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:12:45.907

您可以检查**[字符串长度] == 0。**这将检查它是否是有效但为空的**字符串 (@"")**以及它是否为 nil，因为在 nil 上调用 length 也会返回 0。

或者，您也可以`[string isEqual:[NSNull null]];`尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:15:49.937

我在我的 Defines.h 文件中为此使用了两个宏

```
#define NULLVALUE(m)                    (m == nil ? @"" : m)
#define NULLVALUE1(m)                    (m == nil ? @" " : m) 
```

它将空值更改为“”或空格“”易于处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T05:33:24.813

你可以像这样检查

```
if ([YOUR_STRING isKindOfClass:[NSNull class]] || YOUR_STRING == nil ) {

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T05:52:42.957

```
+(NSString *) removeNull:(NSString *) string {

    if ([string isEqual:[NSNull null]] ) {
        return @"";
    }

    if ([string isEqualToString:@"<null>"]) {
        return @"";
    }
    if ([string isEqualToString:@"null"]) {
        return @"";
    }
    @try {
        NSRange range = [string rangeOfString:@"null"];
        ////////NSLog(@"in removeNull : %d  >>>> %@",range.length, string);
        if (range.length > 0 || string == nil) {
            string = @"";
        }
        range = [string rangeOfString:@"<null>"];
        ////////NSLog(@"in removeNull : %d  >>>> %@",range.length, string);
        if (range.length > 0 || string == nil) {
            string = @"";
        }
    }
    @catch (NSException *exception) {
        return @"";
    }
    @finally {

    }

    string = [self trimString:string];
    return string;
} 
```

------------------------------ 像这样调用 NSString *strFb = [classname removeNull:YourString];

# highcharts - Highcharts 选择事件未通过 xAxis

> ID：14846764
> 
> 赞同：0
> 
> 时间：2013-02-13T05:10:58.287
> 
> 标签：highcharts

我正在处理一个具有多个数据源的图表，这些数据源根据缩放范围动态加载，但由于某种原因，图表“选择”事件永远不会传递 xAxis，因此我可以获得选择范围，然后重新加载适当的数据缩放级别。由于我尝试做的调试有点复杂，因此我将案例简化为单个静态数据集，该数据集仅在选择事件上执行 console.log(e)。我提炼的例子在这里：

[http://jsfiddle.net/j5z5E/](http://jsfiddle.net/j5z5E/)

当我在此示例图表上进行选择时，没有任何缩放，JavaScript 控制台显示事件具有 xAxis 和 yAxis 数组，但 xAxis 的长度为 0，yAxis 的长度为 1。

我一直在示例中看到检查：

```
if (e.xAxis[0]) {
    //do stuff
} 
```

所以很明显，在某些情况下 xAxis 不会被传递。我是否正在做一些事情来触发这种情况？我知道我一定做错了什么，但我一辈子都想不通是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:33:34.253

问题是你设置：

```
xAxis: {
     type: 'datetime',
     min: start,
     max: end,
     minRange: 3600000      
}, 
```

它设置了最小值和最大值，它不会让图表缩放，因为它已经定义了最小值和最大值。

[工作演示](http://jsfiddle.net/zaheerahmed/j5z5E/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:19:51.727

问题是您的最小值和最大值不是数字而是日期字符串。将它们转换为时间戳数字时，它可以工作。

```
var start = +new Date(2013, 1, 12, 0, 0, 0, 0);
var end = +new Date(2013, 1, 14, 0, 0, 0, 0); 
```

[工作演示](http://jsfiddle.net/j5z5E/11/)

# android - 如何使用 JNI 访问系统文件

> ID：14846765
> 
> 赞同：0
> 
> 时间：2013-02-13T05:11:04.887
> 
> 标签：android, permissions, android-ndk, sys

我需要有关如何使用 Jni 编辑系统的示例代码。我需要在 /sys/class/gpio/gpio41/value 位置编辑文件

我尝试了这些代码，但它不起作用。

```
#include <jni.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <fcntl.h>

 jstring
       Java_com_example_hellojni_HelloJni_stringFromJNI( JNIEnv* env,
                                              jobject thiz )
 {

int fd ;
    char gpio_path[30];
    sprintf(gpio_path,"/sys/class/gpio/gpio41/value");

    fd = open(gpio_path, O_RDWR | O_NONBLOCK );

        write(fd, "1", 2);

    close(fd);

return (*env)->NewStringUTF(env, gpio_path); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:16:05.020

一般来说，出于安全问题，sysfs 文件在 android 中是不可写的。

特定应用程序可以是可写的，具有合适的 uid，例如系统、媒体、图形等。

请参阅[https://android.googlesource.com/platform/cts/+/master/tests/tests/permission/src/android/permission/cts/FileSystemPermissionTest.java](https://android.googlesource.com/platform/cts/+/master/tests/tests/permission/src/android/permission/cts/FileSystemPermissionTest.java)并查看 testAllFilesInSysAreNotWritable() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:39:28.543

授予文件执行命令的权限

chmod 777 /sys/class/gpio/gpio41/value

有效................

# javascript - std 正常 cdf、正常 cdf 或错误函数

> ID：14846767
> 
> 赞同：6
> 
> 时间：2013-02-13T05:11:10.553
> 
> 标签：javascript, jquery, function, distribution, probability

这些函数中的任何一个，标准正态累积分布函数、正态累积分布函数或误差函数，都可以用javascript可靠地计算吗？

考虑到 Windows 上缺乏 PECL 可用性，我想要一个完全客户端的解决方案。

请告诉我如何。

提前谢谢了！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-14T11:00:44.760

我使用这些实现：

```
function cdf(x, mean, variance) {
  return 0.5 * (1 + erf((x - mean) / (Math.sqrt(2 * variance))));
}

function erf(x) {
  // save the sign of x
  var sign = (x >= 0) ? 1 : -1;
  x = Math.abs(x);

  // constants
  var a1 =  0.254829592;
  var a2 = -0.284496736;
  var a3 =  1.421413741;
  var a4 = -1.453152027;
  var a5 =  1.061405429;
  var p  =  0.3275911;

  // A&S formula 7.1.26
  var t = 1.0/(1.0 + p*x);
  var y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);
  return sign * y; // erf(-x) = -erf(x);
} 
```

资料来源：

*   cdf：[http ://en.wikipedia.org/wiki/Normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution)
*   erf：[对于 Python，erf() 是否有一个容易获得的实现？](https://stackoverflow.com/questions/457408/is-there-an-easily-available-implementation-of-erf-for-python)

我认为错误受 erf 实现的约束，尽管这对我来说并不重要，所以当错误很重要时，你可能想更深入地研究它。

显然，要获得标准的正态 cdf，您将 mean = 0 和 variance = 1 传递给 cdf 函数，即

```
function std_n_cdf(x) {
  return cdf(x, 0, 1);
} 
```

# c - 在 C 中，如何使用 dup2 将 STDOUT_FILENO 重定向到 /dev/null，然后稍后再重定向回其原始值？

> ID：14846768
> 
> 赞同：14
> 
> 时间：2013-02-13T05:11:09.810
> 
> 标签：c, fork, stdout, dup2, dup

我有一个正在处理的任务，但我很难完成它。这个想法是编写一个程序 if.c 来执行一个程序，如果成功则执行第二个程序。我应该抑制第一个程序的标准输出并取消第二个程序的标准输出。我在多个测试中收到错误消息。例如：“./if echo no then echo yes”返回“echo:write error: Bad file descriptor”。我试过在网上找到我做错了什么，但没有运气。

这是我的代码：

```
#include <fcntl.h>
#include <sys/wait.h>
#include <stdio.h>
#include "tlpi_hdr.h"

int main(int argc, char *argv[])
{
    if(argc < 4){
        fprintf(stderr,"Incorrect number of arguments.\n");
        exit(EXIT_FAILURE);
    }

    int thenArg = 0;
    char then[4];
    strcpy(then,"then");
    for(int x=1; x<argc; x++){
        if(strncmp(argv[x], then, 4) == 0) thenArg = x;
    }

    if(thenArg == 0){
        fprintf(stderr,"No 'then' argument found.\n");
        exit(EXIT_FAILURE);
    }

    int save_out = dup(STDOUT_FILENO);
    if(save_out == -1){
        fprintf(stderr,"Error in dup(STDOUT_FILENO)\n");
        exit(EXIT_FAILURE);
    }

    int devNull = open("/dev/null",0);
    if(devNull == -1){
        fprintf(stderr,"Error in open('/dev/null',0)\n");
        exit(EXIT_FAILURE);
    }

    int dup2Result = dup2(devNull, STDOUT_FILENO);
    if(dup2Result == -1) {
        fprintf(stderr,"Error in dup2(devNull, STDOUT_FILENO)\n");
        exit(EXIT_FAILURE);
    }

    int program1argLocation = 1;
    int program2argLocation = thenArg + 1;
    int program1argCount = thenArg-1;
    int program2argCount = argc-(program2argLocation);
    char *program1args[program1argCount+1];
    char *program2args[program2argCount+1];

    for(int i=0; i<program1argCount; i++){
        program1args[i]=argv[program1argLocation + i];
    }
    program1args[program1argCount] = NULL;
    for(int i=0; i<program2argCount; i++){
        program2args[i]=argv[program2argLocation + i];
    }
    program2args[program2argCount] = NULL;

    pid_t pid = fork();
    int child_status;
    switch (pid) {
    case -1:
        fprintf(stderr,"Fork failed\n");
        exit(EXIT_FAILURE);

    case 0: //child
        //child will run program 1
        if(execvp(program1args[0],&program1args[0]) == -1){
            fprintf(stderr,"Program 1 Failed.\n");
            exit(EXIT_FAILURE);
        }  

    default: //parent
        //parent will run program2
        pid = wait(&child_status);

        if(WEXITSTATUS(child_status) == 0){
            dup2(save_out, STDOUT_FILENO);

            int prog2status = execvp(program2args[0],&program2args[0]);
            if(prog2status == -1) {
                fprintf(stderr,"Program 2 failed.\n");
                exit(EXIT_FAILURE);
            }  
        }  
    }  

} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-13T05:21:40.920

Your error is here:

```
int devNull = open("/dev/null",0); 
```

To use `devNull` as `STDOUT_FILENO`, it must be opened for writing:

```
int devNull = open("/dev/null", O_WRONLY); 
```

# asp.net - 如何在 BoundFiled Cell 中设置只读属性为 true？

> ID：14846777
> 
> 赞同：0
> 
> 时间：2013-02-13T05:12:28.383
> 
> 标签：asp.net, gridview, boundfield

我这样做：

```
 if (e.Row.Cells[3].Text != null && e.Row.Cells[3].Text != "&nbsp;" 
          && e.Row.Cells[3].Text != "")
 {
     e.Row.Cells[3].Attributes.Add("readonly", "true");
 } 
```

但它不起作用。当单元格为空或包含“”时，我需要将只读属性设置为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:54:11.727

没有`direct way`设置`Gridview column`为`readonly`。
但是您可以在您的 Gridivew 事件中设置`controls to readonly`该列中的内容。`RowDataBound`例如

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowState == DataControlRowState.Edit || e.Row.RowState == DataControlRowState.Alternate)
    {
        TextBox txt = (TextBox)e.Row.FindControl("ControlID");
        txt.ReadOnly = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T06:22:54.407

对于绑定字段，您可以假设 Controls(0) 是您想要的控件。

因此这有效：

```
 Protected Sub DropDownListNoVariation_SelectedIndexChanged(sender As Object, e As EventArgs)
    Dim sourceGridViewRow As GridViewRow
    Dim sourceDropDown As DropDownList
    Dim TargetTextBox As TextBox

    sourceGridViewRow = sender.Parent.Parent
    sourceDropDown = sender
    If sourceDropDown.Text = "True" Then
        TargetTextBox = sourceGridViewRow.Cells(4).Controls(0)
        TargetTextBox.ReadOnly = True
        TargetTextBox = sourceGridViewRow.Cells(5).Controls(0)
        TargetTextBox.ReadOnly = True
    Else
        TargetTextBox = sourceGridViewRow.Cells(4).Controls(0)
        TargetTextBox.ReadOnly = False
        TargetTextBox = sourceGridViewRow.Cells(5).Controls(0)
        TargetTextBox.ReadOnly = False
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T05:16:18.640

这行得通吗？

```
if (e.Row.Cells[3].Text != null && e.Row.Cells[3].Text != "&nbsp;" && e.Row.Cells[3].Text != "")
 {
     e.Row.Cells[3].ReadOnly = true;
 } 
```

它确实看起来好像`BoundField`有一个[`ReadOnly`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.readonly.aspx)。但我现在不确定是否`e.Row.Cells[3]`是`BoundField`类型。也许你可能不得不把它投射到`BoundField`

# php - chmod 不工作？

> ID：14846786
> 
> 赞同：1
> 
> 时间：2013-02-13T05:12:56.320
> 
> 标签：php, xampp

我正在运行这个非常简单的代码：

```
echo chmod('file_permissions.php', 0664);
echo decoct(fileperms('file_permissions.php')); 
```

我想明确表示安全模式已关闭，并且我在 Windows 上工作，在 XAMPP 服务器上运行 apache。

关于可能发生的事情有什么想法吗？

更新：它只适用于 mods 0444 和 0666，其他任何东西都没有任何效果，即 0777 设置为 0666.... 太奇怪了。

# php - 数组值在一段时间后自动清除

> ID：14846787
> 
> 赞同：0
> 
> 时间：2013-02-13T05:13:11.617
> 
> 标签：php, arrays, execution

我面临一个奇怪的问题。我有一个名为 $ipList 的数组，它包含一定数量的要传递给服务的 ip 地址。服务是指执行检查 ip 是否在他们的列表中的 api。此检查是通过 curl 会话完成的。它执行一分钟，得到这个结果后，当我打印我的数组时，它是空白的。如果我执行调用，它将打印数组，我认为数组在某个时间后被清除，该怎么办。

```
$ipList=getIpList(); //get iplist
$res=checkService($ipList); //this is the function for checking through curl 
print_r($ipList); // try printing array 
```

如果我评论该行，它会打印`$res=checkService($ipList);`

我需要帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:18:57.630

最有可能发生的是`checkService`函数（您的“API 调用”）超时。

检查这是不是真的。如果是，请尝试优化`checkService`（或相应的脚本）或增加您的 PHP 超时间隔。

**例子 ：**

```
set_time_limit (0); 
```

**文档：**

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

```
void set_time_limit ( int $seconds ) 
```

> 设置允许脚本运行的秒数。如果达到此值，脚本将返回致命错误。默认限制为 30 秒，如果存在，则为 php.ini 中定义的 max_execution_time 值。
> 
> 调用时， set_time_limit() 从零重新启动超时计数器。换句话说，如果超时是默认的 30 秒，并且在脚本执行 25 秒后调用了诸如 set_time_limit(20) 之类的调用，则脚本将在超时之前总共运行 45 秒。

# c++ - MP3 文件可视化

> ID：14846789
> 
> 赞同：1
> 
> 时间：2013-02-13T05:13:26.473
> 
> 标签：c++, mp3, data-visualization

再会。

我的目标是开发一种可以可视化 mp3 文件的数据部分的软件。我已经进行了大量的互联网研究，但我没有找到任何好的来源。之前，我设法创建了一个可以可视化未压缩的规范 wav 文件（8 位、16 位、单声道和立体声）的软件，我想通过能够可视化 mp3 文件来更进一步。

我知道与未压缩的规范 wav 文件相比，mp3 文件并不那么简单。任何知道可视化 mp3 文件的良好起点的人都非常欢迎分享他或她的知识。

我正在用 C++ 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:21:43.050

You want to decode the mp3 file to uncompressed WAV and then visualise that. Have a look at this question for some options: [https://stackoverflow.com/questions/4936177/what-is-a-good-platform-independend-c-library-for-mp3-decoding](https://stackoverflow.com/questions/4936177/what-is-a-good-platform-independend-c-library-for-mp3-decoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:32:43.493

您可以考虑`LAME`将输入`mp3`文件解码为原始 pcm（未压缩）并将其可视化。

# javascript - 2 秒内随机 div 数组变化

> ID：14846792
> 
> 赞同：-2
> 
> 时间：2013-02-13T05:13:40.757
> 
> 标签：javascript, random

嗨，我有这段代码，任何人都可以知道如何在 2 秒内更改这个随机关键字，

```
function shuffle(a, b) {
  return Math.random() > 0.5 ? -1 : 1;

}

var keywords = ["<div>1</div>", "<div>2</div>", "<div>3</div>", "<div>4</div>", "<div>5</div>", "<div>6</div>", "<div>7</div>", "<div>8</div>", "<div>9</div>", "<div>10</div>", "<div>11</div>", "<div>22</div>", "<div>44</div>", "<div>32</div>", "<div>46</div>"];
var randomKeywords = keywords.sort(shuffle);

function luckcricket() {
  document.write(randomKeywords);
  alert('laad');
}

luckcricket(); 
```

请更正我的代码。在这段代码中，我看不到任何 div 在 2 秒内随机变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:17:36.397

您需要添加计时器，

```
window.setInterval(function() {
// your logic goes here
}, 2000); 
```

每 2 秒你的逻辑就会被执行一次。您可以在此处输入代码以更改随机密钥

**更新**
应该是这样的

```
var keywords = ["<div>1</div>", "<div>2</div>", "<div>3</div>", "<div>4</div>", 
        "<div>5</div>", "<div>6</div>", "<div>7</div>", "<div>8</div>", 
        "<div>9</div>", "<div>10</div>", "<div>11</div>", "<div>22</div>", 
        "<div>44</div>", "<div>32</div>", "<div>46</div>"];

function luckcricket() {
    var randomKeywords = keywords.sort(shuffle); 
    document.write(randomKeywords); 
    alert('laad'); 
}

function shuffle(a, b) { 
    return Math.random() > 0.5 ? -1 : 1; 
}

window.setInterval(luckcricket, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:02:15.923

使用[window.setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)在特定时间后以这种方式重复函数调用：

```
$(document).ready(function(){
    window.setInterval(function() {
       luckcricket();
    }, 2000);
}); 
```

它将每 2 秒调用**一次luckcricket()**函数。

这是工作演示：http: [//jsfiddle.net/5NKXK/](http://jsfiddle.net/5NKXK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:35:59.580

听起来您希望您的 div 定期洗牌。这不会发生，因为您正在编写`randomKeywords`，当您调用时它是一个数组`luckcricket`。您想要做的是从内部调用 shuffle`luckcricket()`或执行`document.write(keywords.sort(shuffle))`

```
function shuffle(a, b) {
  return Math.random() > 0.5 ? -1 : 1;

}

var keywords = ["<div>1</div>", "<div>2</div>", "<div>3</div>", "<div>4</div>", "<div>5</div>", "<div>6</div>", "<div>7</div>", "<div>8</div>", "<div>9</div>", "<div>10</div>", "<div>11</div>", "<div>22</div>", "<div>44</div>", "<div>32</div>", "<div>46</div>"];

function luckcricket() {
    // Shift random keywords into callback so it gets updated EVERY TIME
    var randomKeywords = keywords.sort(shuffle);
    document.write(randomKeywords);

    window.setTimeout( function () {
        // Clear after 1 second
        document.body.innerHTML = '';
    }, 1000);
}

luckcricket();
window.setInterval(luckcricket, 2000); 
```

JSFiddle 示例：http: [//jsfiddle.net/rfRzH/](http://jsfiddle.net/rfRzH/)

# android - 如何调试从 eclipse 到 samsung galaxy pop 的 android 应用程序？

> ID：14846796
> 
> 赞同：1
> 
> 时间：2013-02-13T05:14:07.283
> 
> 标签：android

我正在使用三星galaxy pop。我想将应用程序从 eclipse 调试到设备。这将适用于我的 HTC 手机。但是每当我连接三星 android 设备时，它都没有连接到我的 Eclipse。

如何解决这个问题？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:17:16.103

尝试这个..

1.  在移动设置中启用调试模式后，在您的电脑上下载 Kies

进入设置->应用程序->开发->启用usbdebugging。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:19:30.770

首先，您是否检查过您的三星 USB 驱动程序是否已安装？[你可以在这里](http://developer.android.com/tools/extras/oem-usb.html)找到介绍和三星的驱动程序在[这里](http://www.samsung.com/us/support/downloads)。

此外，您需要将手机设置为 USB 调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:35:05.207

更新您的设备驱动程序，然后为您的手机下载 Samsung kies，然后在您的手机中启用 USB 调试，然后在 eclipse 中选择目标作为手动，您就可以开始了..

# c++ - 在 C++ 中创建人员对象的数组列表

> ID：14846801
> 
> 赞同：1
> 
> 时间：2013-02-13T05:14:30.173
> 
> 标签：c++, arrays, list, arraylist

我正在尝试在 C++ 中为我拥有的项目创建一个 Person 对象的数组列表。我是 C++ 编程新手，所以我不确定从哪里开始。程序成功构建，但在将人对象插入索引 0 的行中出现奇怪的线程错误。有人可以指出如何将对象插入数组列表的正确方向吗？谢谢！

这是我的 Person 类：

```
#include <iostream>
using namespace std;

class Person
{
public:
    string fName;
    string lName;
    string hometown;
    string month;
    int day;

    Person();
    Person(string f, string l, string h, string m, int d);
    void print();
    int compareName(Person p);

};

Person::Person(string f, string l, string h, string m, int d) {
    fName = f;
    lName = l;
    hometown = h;
    month = m;
    day = d;
}

void Person::print() {
    std::cout << "Name: " << lName << ", " << fName <<"\n";
    std::cout << "Hometown: " << hometown <<"\n";
    std::cout << "Birthday: " << month << " " << day <<"\n";
} 
```

数组列表.h

```
#ifndef __Project2__ArrayList__
#define __Project2__ArrayList__

#include <iostream>
#include "Person.h"

class ArrayList {
public:
    ArrayList();

    bool empty() const {return listSize ==0;}
    int size() const {return listSize;}
    int capacity() const {return arrayLength;}
    void insert(int index, Person *p); //insertion sort
    void output();

protected:
    Person* per;
    int arrayLength;
    int listSize;

};
#endif 
```

数组列表.cpp：

```
#include "ArrayList.h"
#include <iostream>
using namespace std;

ArrayList::ArrayList()
{
    arrayLength = 10;
    listSize = 0;
}

void ArrayList::insert(int index, Person *p)
{
    per[index] = *p;
    listSize++;
}

void ArrayList::output()
{
    for(int i=0; i<listSize; i++)
    {
        per[i].print();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:16:49.987

您的指针未初始化，它没有引用有效的内存位置。如果要以这种方式实现数据结构，则需要对其进行初始化，然后检查是否需要在插入时重新分配。

```
ArrayList::ArrayList(size_t capacity)
{
    _capacity = capacity;
    _list_size = 0;
    // initialize your backing store
    _per = new Person[_capacity];
} 
```

您还需要正确处理释放、分配、复制等。

# wpf - WPF中Datagrid的DataGridTemplateColumn中的浏览按钮

> ID：14846808
> 
> 赞同：0
> 
> 时间：2013-02-13T05:15:12.460
> 
> 标签：wpf, wpf-controls, wpfdatagrid, wpftoolkit

![在此处输入图像描述](../Images/d4e1b4e4298325c0ba9fbe1355dd36b1.png)我们有 WPF 应用程序，其中我们在一个表单上使用 DataGrid。我们在该 DATAGRID 中使用了多个 DataTemplateColumn。我需要在一列中取一个按钮，假设“浏览”按钮。现在，当我在编辑模式下单击它时，它会打开文件对话框，当我选择文件时，该文件的路径必须存储在该 DATAGRID 列中。那么如何实现这一点，在编辑模式下浏览按钮和正常模式下该文件的路径。

```
<toolkit:DataGridTemplateColumn Header="Attachment Copy Of Invoice" Width="180" >
                <toolkit:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>

                        <TextBlock x:Name="Attach"  Text="{Binding Path=Attachment,UpdateSourceTrigger=PropertyChanged}" />

                    </DataTemplate>
                </toolkit:DataGridTemplateColumn.CellTemplate>
                <toolkit:DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>

                        <Button Name="Click" Click="Click_Click" ></Button>
                    </DataTemplate>
                </toolkit:DataGridTemplateColumn.CellEditingTemplate>
            </toolkit:DataGridTemplateColumn> 
```

代码：

```
 private void Click_Click(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

        // Set filter for file extension and default file extension

        dlg.DefaultExt = ".txt";
        dlg.Filter = "Text documents (.txt)|*.txt";

        // Display OpenFileDialog by calling ShowDialog method
        Nullable<bool> result = dlg.ShowDialog();

        // Get the selected file name and display in a TextBox
        if (result == true)
        {

            // Open document

            string filename = dlg.FileName;

        }

    } 
```

我需要存储文件名，即相同 TextBlock 的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T05:50:05.953

```
private void Click_Click(object sender, RoutedEventArgs e) {
   var dlg = new Microsoft.Win32.OpenFileDialog();

    // Set filter for file extension and default file extension

    dlg.DefaultExt = ".txt";
    dlg.Filter = "Text documents (.txt)|*.txt";

    // Display OpenFileDialog by calling ShowDialog method
    Nullable<bool> result = dlg.ShowDialog();

    // Get the selected file name and display in a TextBox
    if (result == true) {
        // Open document
        string filename = dlg.FileName;
        var yourType = ((FrameworkElement)sender).DataContext as YourType;
        yourType .Attachment= filename;
    }
 } 
```

# python-2.7 - TypeError：“NoneType”对象不可调用

> ID：14846814
> 
> 赞同：1
> 
> 时间：2013-02-13T05:15:50.470
> 
> 标签：python-2.7

对于 python 2.7 中的这些代码行：

```
print performer[0]
print performer[0].split(">")[1] 
```

我明白了

```
<span itemprop="name performers">Lindsey Stirling Tickets</span> 
```

好的结果在这里，但是

```
Traceback (most recent call last):
 File "C:\Users\Administrator\Desktop\format.py", line 51, in <module>
  print performer[0].split(">")[1]
TypeError: 'NoneType' object is not callable 
```

文字来自美丽的汤，所以不确定它的类型是否搞砸了。以前使用过拆分，但从未遇到过这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:48:14.370

是的，没有意识到 list(performer) 只影响列表而不是单个项目。

迭代以更改每个修复它。物品仍然：

```
<class 'bs4.element.Tag'> 
```

# java - 如何编译多个 *.java 文件

> ID：14846817
> 
> 赞同：1
> 
> 时间：2013-02-13T05:16:14.793
> 
> 标签：java

有人给了我他们的代码：同一目录下的几个 *.java 文件 (src\eval\*.java)。我猜它们是同一个项目中的多个源代码文件。

尝试编译时（在 Windows 下），我输入

```
javac -sourcepath src\eval\AlnEval.java -d bin 
```

但是这样做时出现此错误：

> javac：没有源文件。

* * *

试过了

```
javac src\eval\AlnEval.java 
```

编译错误很多。似乎 AlnEval.java 使用了在其他 *.java 文件中定义的几个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:30:17.773

try below code

first go to your main src directory

```
javac -cp .;lib/<YOU_JARS>.jar -d bin  packA/*.java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:30:35.907

尝试将类路径设置为包含外部依赖项。例如，如果您将所有依赖项作为 jar 文件保存在 lib 目录中，则可以使用

```
java -cp lib\* src\eval\*.java 
```

这包括编译应用程序所需的所有依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:17:37.200

您可以键入`javac *.java`或更好地使用和 IDE，例如 eclipse

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:17:45.583

要一次编译多个文件，您只需

```
javac src\eval\*.java 
```

而已！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T05:18:22.550

```
$ cd src/eval
$ javac *.java 
```

100101010101

# javascript - Jquery选择的突出显示文本的值

> ID：14846824
> 
> 赞同：2
> 
> 时间：2013-02-13T05:16:30.667
> 
> 标签：javascript, jquery

我试图让我的编辑器在您突出显示计算机上的文本时，jquery 将采用该选定值并在其周围抛出标签，更具体的代码或预标签。

```
 var Selectedvalue =  // set highlighted selection value
        $("#content").contents().find("body").append($("<pre></pre>").append(Selectedvalue))
   ; 
```

我已经知道如何获取标签之间的值，我只需要知道如何获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:23:21.653

好吧，通过几次谷歌搜索发现 h​​ttp://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html[我](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)相信就是这样。

[**例子**](http://mark.koli.ch/2009/09/05/get-selected-text-javascript.html)

**对 OP 评论的回应**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        var ifx = $('<iframe src="code/sample.html" height=200 width=200></iframe>').appendTo(document.body);

        $(document.body).bind('mouseover', function()
        {
            var u_sel;
            if(window.getSelection)
            {
                u_sel = ifx[0].contentWindow.getSelection();
                alert(u_sel);
            }
        });
    });

</script>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:20:43.783

try something like this

```
function getSelectionText() {
var text = "";
if (window.getSelection) {
    text = window.getSelection().toString();
} else if (document.selection && document.selection.type != "Control") {
    text = document.selection.createRange().text;
}
return text; 
```

}

# android - 片段菜单没有改变

> ID：14846825
> 
> 赞同：0
> 
> 时间：2013-02-13T05:16:34.743
> 
> 标签：android, android-fragments, android-menu

我试图弄清楚为什么在我的主要活动中的片段之间切换时菜单在操作栏中没有改变。我已经尝试了一些关于 setHasOptionsMenu(true) 和 menu.clear 的建议，但没有运气......我只是不明白。

ConsoleActivity.class

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  // Set up the action bar to show a dropdown list.
  final ActionBar actionBar = getActionBar();
  actionBar.setDisplayShowTitleEnabled(false);
  actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

  // Set up the dropdown list navigation in the action bar.
  actionBar.setListNavigationCallbacks(

  // Specify a SpinnerAdapter to populate the dropdown list.
  new ArrayAdapter<String>(actionBar.getThemedContext(),
    android.R.layout.simple_list_item_1,
    android.R.id.text1, new String[] {
    getString(R.string.NavItem1),
    getString(R.string.NavItem2) }), this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
  // Inflate the menu; this adds items to the action bar if it is present.
  getMenuInflater().inflate(R.menu.activity_main, menu);
  return true;
}

@Override
public boolean onNavigationItemSelected(int position, long id) {
  // When the given dropdown item is selected, show its contents in the
  // container view.
  Fragment fragment = new SectionFragment();
  Bundle args = new Bundle();
  args.putInt(SectionFragment.ARG_SECTION_NUMBER, position + 1);
  fragment.setArguments(args);
  getFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();
  return true;
}

public static class SectionFragment extends Fragment {
/**
* The fragment argument representing the section number for this
* fragment.
*/
public static final String ARG_SECTION_NUMBER = "section_number";

public SectionFragment() {
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
  // Create a new TextView and set its text to the fragment's section
  // number argument value.
  View mView = null;
  switch (getArguments().getInt(ARG_SECTION_NUMBER)) {
  case 1:
    mView = (View) inflater.inflate(R.layout.schedule_fragment, container, false);
    break;
  case 2:
    mView = (View) inflater.inflate(R.layout.timesheet_fragment, container, false);
    break;
  }         
  return mView;
} 
```

ScheduleFragment.class：

```
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.View;
import android.view.ViewGroup;

public class ScheduleFragment extends Fragment {

  public void onCreate(Bundle savedInstanceState) {
    setHasOptionsMenu(true);
    super.onCreate(savedInstanceState);
  }

  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    return inflater.inflate(R.layout.schedule_fragment, null);
  }

  public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.schedule_context, menu);
    super.onCreateOptionsMenu(menu, inflater);
  }

} 
```

菜单文件夹中的 schedule.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/menu_edit_trips"
          android:icon="@drawable/ic_menu_trips"
          android:title="Trips"
          android:showAsAction="always|withText">
        <menu>
            <item android:id="@+id/menuitem_trip_edit"
                  android:icon="@drawable/ic_menu_trip_edit"
                  android:title="Edit" />

            <item android:id="@+id/menuitem_trip_new"
                  android:icon="@drawable/ic_menu_trip_new"
                  android:title="New" />

            <item android:id="@+id/menuitem_trip_cancel"
                  android:icon="@drawable/ic_menu_trip_cancel"
                  android:title="Cancel" />
        </menu> 
    </item>

</menu> 
```

菜单文件夹中的 main.xml。这是在所有片段之间保持一致的菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/menuitem_main"
          android:icon="@drawable/ic_menu_main"
          android:title="Main"
          android:showAsAction="always">
        <menu>
            <item
                android:id="@+id/menuitem_logout"
                android:icon="@drawable/ic_menu_main_logout"
                android:title="Logout" />

            <item
                android:id="@+id/menuitem_about"
                android:icon="@drawable/ic_menu_main_about"
                android:title="About" />

            <item
                android:id="@+id/menuitem_settings"
                android:icon="@drawable/ic_menu_main_settings"
                android:title="@string/menu_settings" />
        </menu>
    </item>

</menu> 
```

我不知道该怎么办...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:15:33.900

我想我明白了，不确定这是否是正确的解决方案，但这就是我所做的：

我将此添加到我的 ConsoleActivity.class

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuInflater inflater = new MenuInflater(this);
    switch (sectionNumber) {
    case 1:
        inflater.inflate(R.menu.schedule, menu);
        break;
    case 2:
        inflater.inflate(R.menu.timesheet, menu);
        break;      
    default:
        menu.clear();
        inflater.inflate(R.menu.main, menu);
        break;
    }
    return true;
} 
```

我添加了一个类变量：

```
private byte sectionNumber = 0; 
```

最后我添加了 getActivity().invalidateOptionsMenu(); 这里：

```
public static class SectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public SectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        View mView = null;
        switch (getArguments().getInt(ARG_SECTION_NUMBER)) {
        case 1:
            mView = (View) inflater.inflate(R.layout.schedule_fragment, container, false);
            break;
        case 2:
            mView = (View) inflater.inflate(R.layout.timesheet_fragment, container, false);
            break;
        }
        getActivity().invalidateOptionsMenu();
        return mView;
    }       
} 
```

这是我的 onNavigationItemSelected：

```
@Override
public boolean onNavigationItemSelected(int position, long id) {
    // When the given dropdown item is selected, show its contents in the
    // container view.
    Fragment fragment = new SectionFragment();
    Bundle args = new Bundle();
    sectionNumber = (byte) (position + 1);
    args.putInt(SectionFragment.ARG_SECTION_NUMBER, sectionNumber);
    fragment.setArguments(args);
    getFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();
    return true;
} 
```

# shell - shell脚本中的if条件

> ID：14846826
> 
> 赞同：1
> 
> 时间：2013-02-13T05:16:44.890
> 
> 标签：shell

我有一个这样的shell脚本。

```
#!/bin/sh

s=$1      

pro=`ps -ef | grep $s | grep -v grep | grep -v test3.sh | wc -l`

 if [ $pro -eq 0 ] 
    then
            echo "Service $s is DOWN..."
            echo "Service $s is DOWN..." >> processlogs.txt
            echo "Starting Service $s..."
            echo "Starting Service $s..." >> processlogs.txt
            java -jar clientApplication.jar $s &

 else
            echo "Service $s is Running..."
            echo "Service $s is Running..." >> processlogs.txt

 fi 
```

当我执行 shell 脚本时，操作进入 if 条件，它永远不会回来。它连续执行命令“java -jar clientApplication.jar $s”。但是在其他条件下没有问题。我的语法错误还是任何逻辑错误。

谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:47:34.737

你应该试试这个...

```
(java -jar clientApplication.jar $s &) 
```

... 代替 ...

```
java -jar clientApplication.jar $s & 
```

如果这确实有效，请查看 nohup

# eclipse - JOGL 异常 - 在 java.library.path 中找不到gluegen- rt

> ID：14846835
> 
> 赞同：5
> 
> 时间：2013-02-13T05:17:28.057
> 
> 标签：eclipse, exception, jar, path, jogl

线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860) 处 java.lang.Runtime.loadLibrary0(Runtime.java: 845) 在 java.lang.System.loadLibrary(System.java:1084) 在 com.jogamp.gluegen.runtime.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:102) 在 com.jogamp.gluegen.runtime.NativeLibLoader.access$000( NativeLibLoader.java:51) at com.jogamp.gluegen.runtime.NativeLibLoader$1.run(NativeLibLoader.java:70) at java.security.AccessController.doPrivileged(Native Method) at com.jogamp.gluegen.runtime.NativeLibLoader.loadGlueGenRT (NativeLibLoader.java:68) 在 com.jogamp.common.jvm.JVMUtil.(JVMUtil.java:56) 在 javax.media.opengl.GLProfile.(GLProfile.java:1051) 在 HelloWorld.main(HelloWorld.java: 14)

所以每次我尝试运行一个教程 JOGL 文件时，我都会得到这个可爱的异常。我已经拼命尝试了我能做的一切。为 jogl 和 gluegen 添加所有可能的库，包括：

jogl.jar jogl.all.jar jogl natives gluegen natives gluegen 和 jogle natives for macosx

一切，它说没有gluegen库，尽管显然有。-.- 我在某处阅读了有关 jnilib 文件的信息，并尝试将它们放入包含 jar 文件的文件夹中，但仍然没有运气。

顺便说一句，我正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:52:07.393

当操作系统尝试运行应用程序时，必须告诉操作系统在哪里可以找到gluegen-rt 本机库，您可以通过在Eclipse 中编辑“运行配置”来设置适当的环境变量来做到这一点。我在 Linux 上开发，对我来说，步骤是

*   右键单击项目资源管理器中的主类
*   选择运行方式-> 运行配置...
*   选择环境选项卡
*   点击“新建...”
*   输入名称：`LD_LIBRARY_PATH`和值：`/usr/lib64/jogl:/usr/lib64/gluegen`
*   单击“确定”、“应用”、“运行”

在 Mac OSX 上，您可能必须使用`DYLD_FALLBACK_LIBRARY_PATH`or`DYLD_LIBRARY_PATH`代替`LD_LIBRARY_PATH`，并且 JOGL 和 Gluegen 库的位置会有所不同。这些是包含本机库的目录，名称以`.so`Linux 结尾，我相信`.jnilib`在 Mac OSX 上。

# angularjs - 在元素内插入角度 js 模板字符串

> ID：14846836
> 
> 赞同：30
> 
> 时间：2013-02-13T05:17:29.377
> 
> 标签：angularjs

我试图将一些有角度的 js 模板字符串放在一个元素中，并期待一个编译的输出。但这并没有发生。

**HTML**

```
<div ng-controller="testController">
    <div ng-bind-html-unsafe="fruitsView"></div>
</div> 
```

**控制器：**

```
function filterController($scope){
    ...
    $scope.arr = ["APPLE", "BANANA"];
    $scope.fruitsView = '<div><p ng-repeat="each in arr">{{each}}</p></div>';
} 
```

输出只是`{{each}}`.

那么我如何`$scope.fruitsView`在元素内插入一个有角度的 js 模板字符串（这里）？

我为此做了一个[小提琴](http://jsfiddle.net/3LfU7/)。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-13T05:29:31.543

In this case, you don't want to just "insert HTML", but compile it. You can create DOM nodes using the `$compile` service.

```
var tpl = $compile( '<div><p ng-repeat="each in arr">{{each}}</p></div>' )( scope ); 
```

As you can see, `$compile` returns a function that takes a scope object as a parameter, against which the code is evaluated. The resultant content can be inserted into the DOM with `element.append()`, for example.

**Important note**: But under *no circumstances* does any DOM-related code belong in your controller. The proper place is *always* a directive. This code can easily be thrown into a directive, but I wonder why you are programmatically inserting the HTML at all.

Can you shed some light here so I can provide a more specific answer?

**Update**

Assuming your data comes from a service:

```
.factory( 'myDataService', function () {
  return function () {
    // obviously would be $http
    return [ "Apple", "Banana", "Orange" ];
  };
}); 
```

And your template comes from a service

```
.factory( 'myTplService', function () {
  return function () {
    // obviously would be $http
    return '<div><p ng-repeat="item in items">{{item}}</p></div>';
  };
}); 
```

Then you create a simple directive that reads in the provided template, compiles it, and adds it to the display:

```
.directive( 'showData', function ( $compile ) {
  return {
    scope: true,
    link: function ( scope, element, attrs ) {
      var el;

      attrs.$observe( 'template', function ( tpl ) {
        if ( angular.isDefined( tpl ) ) {
          // compile the provided template against the current scope
          el = $compile( tpl )( scope );

          // stupid way of emptying the element
          element.html("");

          // add the template content
          element.append( el );
        }
      });
    }
  };
}); 
```

Then from your view:

```
<div ng-controller="MyCtrl">
   <button ng-click="showContent()">Show the Content</button>
   <div show-data template="{{template}}"></div>
</div> 
```

And in the controller, you simply tie it together:

```
.controller( 'MyCtrl', function ( $scope, myDataService, myTplService ) {
  $scope.showContent = function () {
    $scope.items = myDataService(); // <- should be communicated to directive better
    $scope.template = myTplService();
  };
}); 
```

And it should all work together!

PS: this is all assuming your template comes from the server. If it doesn't, then your template should be in the directive, which simplifies things.

# c++ - 模板化插入结束函数

> ID：14846841
> 
> 赞同：0
> 
> 时间：2013-02-13T05:17:41.613
> 
> 标签：c++, class, function, templates, insert

我正在尝试创建一个模板化函数，该函数将在数组末尾插入一个值，但是无论我尝试做什么，我都会遇到段错误。任何建议将不胜感激。

```
template <typename T> 
void ArrayList<T>::insert_back(const T& x)
{
   if(m_size == m_max)
   {
      m_max = m_max*2; //resize array
      T* P = new T[m_max];
      for(int y = 0; y < m_size; y++) //copying array
      {
         P[y] = m_data[y];
      }
      delete[] m_data; //copy done delete
      m_data = P;
      P[m_size] = x; //gdb segfault -- caused by accessing P[m_size]
      m_size ++;
   }
   else // no resizing
   {
     m_data[m_size] = x;
     m_size++;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:54:22.103

鉴于您已正确初始化和`m_data`，您发布的代码有效。事实上，我在[这里](http://liveworkspace.org/code/37kJFT%245 "实时工作区示例")创建了一个测试版本，它运行时没有错误。简单地说，我将它放在一个结构中，这只是为了让我更容易编写。另外，我将循环变量更改为 size_t，以避免出现有关比较有符号和无符号值的警告。`m_size``m_max`

鉴于此，最可能的问题是您没有分配任何初始内存。`m_size`应该初始化为零并且`m_max`需要大于零（并且匹配分配的内存量），否则新计算`m_max`的`2*m_max`仍然是0。

# c# - XML 声明和转换

> ID：14846843
> 
> 赞同：0
> 
> 时间：2013-02-13T05:17:54.820
> 
> 标签：c#, xml, declaration

我正在获取一个要从 ansi 转换为 UTF-8 的 xml 文件。最初我的代码可以正常工作，因为原始 xml 文件没有 xml 声明。但最近原始 xml 文件带有以下声明：

```
 <?xml version="1.0" encoding="WINDOWS-1256"?> 
```

在我的代码中，我正在进行从 ansi 到 uft-8 的转换并添加另一个标头：

```
<?xml version="1.0" encoding="utf-8"?> 
```

所以在我通过我的代码传递新文件以转换为 utf-8 之后，新的声明是：

```
<?xml version="1.0" encoding="utf-8"?><?xml version="1.0" encoding="WINDOWS-1256"?> 
```

我认为这是无效的。

下面是我的代码：

```
Encoding utf8 = new UTF8Encoding(false);
Encoding ansi = Encoding.GetEncoding(1256);
System.Threading.Thread.Sleep(2000);

string xml = File.ReadAllText(FileName,ansi);
//   XDocument xmlDoc = XDocument.Parse(xml);
//  Console.WriteLine("1st");
File.WriteAllText(
      FileName,
      @"<?xml version=""1.0"" encoding=""utf-8""?>" +  xml.ToString(),
      utf8
);

if (File.Exists(destinationFile))
    File.Delete(destinationFile);

File.Copy(FileName, destinationFile,true);
Console.WriteLine("File Copied" + "  " + DateTime.Now.ToString("HH:mm:ss tt")); // for troubleshoooting only
Console.WriteLine("Press \'q\' to quit."); 
Console.Write(CrL); 
```

输出为带有两个声明的乱码阿拉伯文本。我在代码中哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:38:55.187

使用 string.Concat 正确构造 XML 非常困难，需要深入了解规范才能正确完成。不幸的是，通过阅读规范，您会了解到专门的 API 更适合操作 XML - 因此无法真正回答您的问题。

相反，请考虑使用常规 Xml API -`XmlDocument`或者 `XDocument`两者都可以在您的情况下正常工作。要以您选择的编码保存文件，您只需要使用您喜欢的编码创建 XmlWriter，如[XmlWriterSettings.Encoding](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.encoding.aspx)中所述。

```
var doc = new XmlDocument();
doc.Load(FileName); 
```

使用带有设置的 XmlWriter 将文档保存到文件中。

```
XmlWriterSettings settings = new XmlWriterSettings{Encoding=Encoding.UTF8};
using(var fileStream = File.OpenWrite(destinationFile))
{
  using(var writer = XmlWriter.Create(fileStream, settings))  
  {
    doc.Save(writer);
  }
} 
```

# sql-server - 何时在 Sql Server 2008 中使用 Count(*) 和 Count(1)

> ID：14846844
> 
> 赞同：2
> 
> 时间：2013-02-13T05:17:58.970
> 
> 标签：sql-server, sql-server-2008, count, query-optimization

我想知道查询优化的 Count(*) 和 Count(1) 有什么区别。在研究它时，我遇到了[Ask Tom](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1156159920245)，它是针对`oracle`并指出两者在执行时间方面是相同的。

1.  是否也适用于`SQL Server 2008`？
2.  如果是，那么为什么有两个相同的 diff 函数？
3.  如果没有，使用哪个进行更好的优化？
4.  是否有任何情况下我们应该使用 Count(*) 而不是 Count(1) 反之亦然

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:20:19.340

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T05:29:09.043

It should be same. As per definition of COUNT `"COUNT ( { [ [ ALL | DISTINCT ] expression ] | * } )"` So 1 is treated as non null expression.

# iphone - Youtube 视频崩溃 Xcode ios6

> ID：14846845
> 
> 赞同：0
> 
> 时间：2013-02-13T05:18:00.357
> 
> 标签：iphone, ios, ios6, uiwebview, youtube

当`UIWebview`我尝试播放任何视频时`youtube`它崩溃了我的xcode，我使用的是iOS6 ..我只是使用了`UIWebview`加载url youtube到它...我需要嵌入媒体播放器来播放视频吗？

我还需要做什么才能在 youtube 上播放视频`UIWebView`

**代码**

```
- (void)viewDidLoad
{
[super viewDidLoad];

 NSString *newVersionHTML = @"<html>\
<style>body{padding:0;margin:0;}</style>\
<iframe width=\"%0.0f\" height=\"%0.0f\" src=\"http://www.youtube.com/embed/%@?modestbranding=1;title=;showinfo=0;rel=0;controls=0\" frameborder=\"0\" allowfullscreen></iframe>\
</html>";

  NSString *htmlToLoad = [NSString stringWithFormat:newVersionHTML, webView.frame.size.width, webView.frame.size.height,videoId];
 [webView loadHTMLString:htmlToLoad baseURL:nil];
 webView.delegate = self;
// self.webView.mediaPlaybackRequiresUserAction = NO;

webView=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 1024, 768)];

[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.youtube.com/"]]]];
 [self.view addSubview:webView];

} 
```

**新错误**

```
2013-02-13 11:08:20.902 webview[593:c07] [MPAVController] Autoplay: Enabling autoplay
2013-02-13 11:08:20.903 webview[593:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-02-13 11:08:20.903 webview[593:c07] setting movie path: http://r4---sn-ci5gupcc-cage.c.youtube.com/videoplayback?el=watch&itag=18&cp=U0hVRVdQVF9IU0NONV9PSlhFOl9xb2x5ZzMxX3Zw&sver=3&expire=1360756439&yms=_tpjcd07_wk&signature=0659B5710FD8503E5AA5059CE35A9754DD59B90F.5194D7A1B0EC8749FC91CC1B31261B81950E801E&upn=Y8J9bVD4jLE&newshard=yes&ratebypass=yes&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&ipbits=8&source=youtube&id=748bf802989d33fb&app=youtube_mobile&key=yt1&ip=122.179.77.11&fexp=906335%2C901802%2C909917%2C910207%2C914052%2C916613%2C901446%2C920704%2C912806%2C902000%2C922403%2C922405%2C929901%2C913605%2C925710%2C929114%2C925006%2C908529%2C920201%2C911116%2C926403%2C910221%2C901451%2C919114&dnc=1&mt=1360733832&mv=m&ms=au&cpn=dxlJMMz5hJkR_ARd&ptk=Radaantv&oid=bGpsJKyLNbnXo_1YohiEiw&ptchn=RadaanMedia&pltype=content
2013-02-13 11:08:20.904 webview[593:c07] [MPAVController] Autoplay: Enabling autoplay
2013-02-13 11:08:20.908 webview[593:c07] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2013-02-13 11:08:23.974 webview[593:8817]  <0xb057e000> Error '!obj' trying to fetch default input device's sample rate
2013-02-13 11:08:23.974 webview[593:8817]  <0xb057e000> Error getting audio input device sample rate: '!obj'
2  013-02-13 11:08:23.975 webview[593:8817]  <0xb057e000> AQMEIOManager::FindIOUnit: error 'NoHW'
2013-02-13 11:08:23.975 webview[593:c07]  <com.apple.main-thread> AQMEIOManager::FindIOUnit: error 'NoHW'
2013-02-13 11:08:24.567 webview[593:c07]  <com.apple.main-thread> AQMEIOManager::FindIOUnit: error 'NoHW'
2013-02-13 11:08:24.567 webview[593:c07]  <com.apple.main-thread> AQMEIOManager::FindIOUnit: error 'NoHW'
2013-02-13 11:08:24.569 webview[593:c07]  <com.apple.main-thread> AQMEIOManager::FindIOUnit: error 'NoHW' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:31:37.380

只需在以下代码中传递 youtube 视频的 videoId 即可播放 youtube 视频

例如，如果链接是[http://www.youtube.com/watch?v=DTbgpJAggg0&feature=youtube_gdata](http://www.youtube.com/watch?v=DTbgpJAggg0&feature=youtube_gdata)那么

```
- (void)viewDidLoad
{
   [super viewDidLoad];

   webView=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 1024, 768)];

   [self.view addSubview:self.webView];

   self.webView.delegate = self;

   NSString *newVersionHTML = @"<html>\
<style>body{padding:0;margin:0;}</style>\
<iframe width=\"%0.0f\" height=\"%0.0f\" src=\"http://www.youtube.com/embed/%@?modestbranding=1;title=;showinfo=0;rel=0;controls=0\" frameborder=\"0\" allowfullscreen></iframe>\
</html>";

    NSString *htmlToLoad = [NSString stringWithFormat:newVersionHTML, self.webView.frame.size.width, self.webView.frame.size.height,videoId];
    [self.webView loadHTMLString:htmlToLoad baseURL:nil];

} 
```

只需在 webview 中使用 OPEN youtube 主页：

在 .h 中：

```
@property (nonatomic, retain) UIWebView *webView; 
```

在 .m 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _webView=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 1024, 768)];

    [self.view addSubview:self.webView];

    self.webView.delegate = self;

    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.youtube.com/"]]]];

} 
```

# java - 如何将文件调用到jsp？

> ID：14846849
> 
> 赞同：0
> 
> 时间：2013-02-13T05:18:23.997
> 
> 标签：java

这是我的 JSP 页面。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

    <html>

    <head>

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

    <title>Insert title here</title>

    </head>

    <body>

    <jsp:useBean id="link" class="com.Sshexample">

    <%= link.callconst()%>

    </jsp:useBean>

    </body>

    </html> 
```

我想问这是我想调用.java 文件的ma 页面，它正在与unix 服务器建立连接。任何人都可以告诉我为什么我会收到这个错误吗？

```
org.apache.jasper.JasperException: org.apache.jasper.JasperException: Unable to load class for JSP
    org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:156)

    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329)

    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)

    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)

    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我正面临这个问题......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:32:40.970

你在里面`<jsp:useBean>`写了`<%= link.callconst()%>`

```
<body>

    <jsp:useBean id="link" class="com.Sshexample">

    <%= link.callconst()%>

    </jsp:useBean>

    </body> 
```

用这个

```
<body>

    <jsp:useBean id="link" class="com.Sshexample"></jsp:useBean>

     <%= link.callconst()%>
    </body> 
```

# google-apps-script - 使用时间值时 Google Script 会丢失精度

> ID：14846851
> 
> 赞同：0
> 
> 时间：2013-02-13T05:18:24.953
> 
> 标签：google-apps-script, google-sheets

我正在使用一个脚本，该脚本使用在电子表格上输入的信息创建日历事件，其中我在两个单元格中有一个开始和结束时间。但是，当我尝试获取事件的开始/结束时间时，值会出现**2'20"**的差异（我得到的值是

```
Sat Dec 30 1899 18:57:40 GMT-0430 (VEST) 
```

但单元格值为**19:00:00**）。

*   有没有办法修复这个 2'20" 偏移量？这是一个错误吗？我看到的区别是“VEST”时间而不是“VET”（委内瑞拉标准时间）值。
*   如果这是一个错误，它是否总是相同的时差（2'20"）？我可以通过将这些秒数添加到该日期来修复该偏移量。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T15:18:58.990

问题不在于您似乎认为的地方...

javascript 中没有“小时”值，也没有“日期”值，无论您选择如何将其可视化，日期对象始终是日、月、年、小时、分钟、秒和毫秒的完整日期。

您显示的值来自始终显示完整日期对象的记录器，并且由于您的值未定义有效日期，因此它认为它是 0，即电子表格的参考日。要检查是否只需在电子表格单元格中键入 0 并将数字格式强制为日期，您将得到`30/12/1899 00:00:00`

这为您提供了部分答案，因为它解释了原因……现在回答您的问题并提供答案，有几种可能的方法可以解决这个问题。

最简单的方法是在电子表格级别将 2 个单元格合并为一个，方法是创建一个使用简单公式的第 3 个单元格：

考虑到您有日期`A1`和时间`B1`，请使用公式创建 C1`=A1+B1`

这很容易，但您可能不愿意拥有一个额外的单元格......您最终可以使用一个隐藏单元格来执行（简单）添加，并让您的脚本读取该单元格而不是其他 2 个单元格......

另一种可能性是在脚本本身中进行此添加，这里有一个脚本，它有一个逐步的过程，尽可能清晰。

```
function myFunction() {
  var sh = SpreadsheetApp.getActive();
  var day = new Date(sh.getRange('A1').getValue());
  var time = new Date(sh.getRange('B1').getValue());
  var hour = time.getHours();
  var min = time.getMinutes();
Logger.log(day+'  + '+time+'  '+hour+':'+min+'   =  '+ new Date(day.setHours(hour,min,0,0)));
} 
```

结果记录器：（比利时时间）

```
[13-06-21 17:16:19:071 CEST] Fri Dec 27 2013 00:00:00 GMT+0100 (CET)  + Sat Dec 30 1899 20:30:00 GMT+0100 (CET)  20:30   =  Fri Dec 27 2013 20:30:00 GMT+0100 (CET) 
```

# java - 计算整数到数组位置java

> ID：14846852
> 
> 赞同：0
> 
> 时间：2013-02-13T05:18:38.613
> 
> 标签：java, if-statement, multidimensional-array, modulo

不明白如何解决这个问题。我需要接受座位号作为参数（座位）。然后将该座位号转换为二维数组的行列索引。

为了检查自己，我一直假设有 10 排 (0-9) 和 2 个席位每排 (0-1)，并从中选择 1-20 个座位来检查数学。但是可以有任意数量的行和列。这正是我用来检查自己的。

```
static void isAvailable(int seat, boolean seat[][]) {

    int row = 0;
    int column = 0;

    if (seat > 0 && seat <= (getRows() * getSeatsPerRow())){
        row = (seat ) % getRows();
        column = (seat - 1) % getSeatsPerRow;
        seat[row][column] = false;
    }
} 
```

假设座位是这样安排的：

```
 seatsPerRow
       0   1   2   3   4   5   6 

    0 (1) (2) (3) (4) (5) (6) (7)

 r  1 (8) (9) (10)(11)(12)(13)(14)

 o  2 (15)(16)(17)(18)(19)(20)(21)

 w  3  ...

 s  4  ...

    .

    .

    . 
```

假设我想找到 11 号座位。它将是座位 [1][3]。我不明白如何将座位号转换为二维数组上的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:30:14.700

The modulus operator will be invaluable here, since it can determine which seat we'll want to wind up using.

First, let's take in our assumptions and convert them to something more abstract:

*   There are N seats, where N = 20\. We take N to be our rows.
*   There are K rows, where K = 2\. We take K to be our columns.
*   Given this, there are N/K seats per row.

Now, we can use some modulus mathematics to work the rest of the problem out. Let's declare our array of seats now.

```
boolean[][] seats = new boolean[N][K]; //presumed 
```

If we want to claim seat 13, then we need to figure two things out:

*   What **row** is the seat in?
*   What **column** is the seat in?

Given the above, the math for the row is as follows:

```
int row = (seatWanted % N)-1; // (13 % 10)-1 = 2. 
```

Now, the column is similarly easy to find - we would use integer division instead of modulus, though.

```
int column = seatWanted / K; // 13 / 10 = 1. 
```

The rest is an exercise to the reader, but we would want to mark `seats[2][1]` as taken.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:23:48.240

假设座位安排是这样的：

```
 1  2
 3  4
 5  6
 7  8
 9 10
11 12
13 14
15 16
17 18
19 20

int col = (seat % 2 == 0)? 1:0;
int row = (int)Math.ceil(seat / 2.0f); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:27:05.300

好吧，假设座位从 1 开始编号，您可以简单地使用以下方法获取列索引：

```
int column = (seatNum - 1) % seat[0].length; 
```

然后，您可以使用简单的表达式找到该行：

```
int row = (int) ((seatNum - 1) / seat[0].length); 
```

然后，您将通过执行以下操作获得实际元素：

```
seats[row][column] 
```

这两个表达式都适用于数组的*所有维度*`seat`（0 x 0 除外）。

第一行将使用模数来找到 的*余数*，`seatNum / seat[0].length`或者基本上是座位数除以每排座位数。这将重建`column`到正确的范围。

接下来，第二行将座位数除以一排的长度，这将找到该排本身。然后我们将它转​​换为一个带有 的 int `(int)`，它会截断它，删除可能由操作产生的任何小数。在这种情况下，我们实际上是在执行纯整数数学运算，因此不需要强制转换。

# java - 将类作为参数传递给java中的方法

> ID：14846853
> 
> 赞同：12
> 
> 时间：2013-02-13T05:18:39.507
> 
> 标签：java, argument-passing, instanceof

我正在编写一个方法，如果我想将一个类传递给一个方法，其中一部分代码包括检查对象是否属于某种类型。这就是我想要的（但显然不起作用）：

```
private static class MyClass1 { /***/ }
private static class MyClass2 { /***/ }

private void someFunc() {
    /* some code */
    methodName(MyClass1);
    methodName(MyClass2);
}

private void methodName(Class myClass) {
    Object obj;
    /* Complicated code to find obj in datastructure */
    if (obj instanceof myClass) {
        /* Do stuff */
    }
} 
```

关于如何做到这一点的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-13T05:19:32.793

`Class`有一个[isInstance()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)方法和一个[isAssignableFrom()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)方法来检查类似的东西。最接近您正在寻找的是：

```
if (myClass.isInstance(obj)) { 
```

**更新：**从您的评论中，您希望将类的名称传递给方法并检查是否可以分配给该类。唯一的方法是将类名作为字符串传递，然后加载类并使用上述方法之一。例如（省略异常处理）：

```
private void methodName(String className) {
    Class myClass = Class.forName(className);
    Object obj;
    /* Complicated code to find obj in datastructure */
    if (myClass.isInstance(obj)) {
        /* Do stuff */
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T05:47:43.273

我想你想在运行时知道对象的类类型.. 所以使用反射 api。对于您的问题，我认为此解决方案有效

```
public class Clazz {
public static void main(String[] args) {
    Clazz clazz = new Clazz();
    ArrayList list = new ArrayList<>();
    Class myClass = list.getClass();
    clazz.display(myClass);
}

/**
 * Modified By nirav.modi on Feb 13, 2013
 */
private void display(Class myClass) {
    ArrayList list = new ArrayList<>();
    if(myClass.isInstance(list)) {
        System.out.println("Yooo , its instance..");
    }else {
        System.out.println("Not instance");
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:58:38.907

```
MyClass1 myClass1 = new MyClass1();
if(MyClass1.class.isInstance(myClass1))
    System.out.println("(MyClass1.class.isInstance(myClass1) is TRUE");
else
    System.out.println("(MyClass1.class.isInstance(myClass1) is FALSE");

Object myClass2 = new MyClass2();
Class class1 = myClass1.getClass(); 
Class class2 = myClass2.getClass();
System.out.println("class1 == class2 : " + ( class1 == class2));
System.out.println("class1.isAssignableFrom(class2) = " 
    + class1.isAssignableFrom(class2));

MyClass1 myClass3 = new MyClass1();
Class class3 = myClass3.getClass();
System.out.println("class1 == class3 : " + ( class1 == class3));
System.out.println("class1.isAssignableFrom(class3) = " 
    + class1.isAssignableFrom(class3));

OUPUT:

(MyClass1.class.isInstance(myClass1) is TRUE
class1 == class2 : false
class1.isAssignableFrom(class2) = false
class1 == class3 : true
class1.isAssignableFrom(class3) = true 
```

# erlang - erlang并行服务器错误？

> ID：14846854
> 
> 赞同：0
> 
> 时间：2013-02-13T05:18:44.120
> 
> 标签：erlang, client-server

我决定通过将服务器更改为并行服务器（如书中所述）来修改[此线程](https://stackoverflow.com/questions/14807073/erlang-client-server-error)中的代码，但它无法正常工作。根据“Programming Erlang”一书，以下代码应该是 presto-chango，但我在第 17 行遇到错误。这是并行服务器代码（完成的并行服务器在底部，这只是对最后一个线程上的旧服务器代码），

```
startp() ->
    {ok, Listen} = gen_tcp:listen(4042, [binary, {packet, 0},  
                     {reuseaddr, true},
                     {active, true}]),                       
                     spawn(fun() -> par_connect(Listen) end).

par_connect(Listen) ->      
        {ok, Socket} = gen_tcp:accept(Listen),
        spawn(fun() -> par_connect(Listen) end),
        loop(Socket). 
```

这就是错误，

```
=ERROR REPORT==== 12-Feb-2013::23:05:13 ===
Error in process <0.35.0> with exit value: {{badmatch,{error,einval}},[{ps1,loop,1,[{file,"ps1.erl"},{line,17}]}]} 
```

以下是并行服务器代码，我认为调用循环（套接字）的第 14 行参数有问题。也许是别的东西，我不知道？

```
-module(ps1).
-compile(export_all).
-import(lists, [reverse/1]).

startp() ->
    {ok, Listen} = gen_tcp:listen(4042, [binary, {packet, 0},  
                     {reuseaddr, true},
                     {active, true}]),                       
                     spawn(fun() -> par_connect(Listen) end).

par_connect(Listen) ->      
        {ok, Socket} = gen_tcp:accept(Listen),
        spawn(fun() -> par_connect(Listen) end),
        loop(Socket).

loop(Listen) ->
    {ok, Socket} = gen_tcp:accept(Listen),
    receive
    {tcp, Socket, Bin} ->
        io:format("Server received binary = ~p~n",[Bin]),
        Str = binary_to_term(Bin), 
        io:format("Server (unpacked)  ~p~n",[Str]),
        Reply = string:to_upper(Str),  
        io:format("Server replying = ~p~n",[Reply]),
        gen_tcp:send(Socket, term_to_binary(Reply)),  
        loop(Listen);
    {tcp_closed, Socket} ->
        io:format("Server socket closed~n")
    end. 
```

接下来是客户端代码，它也最终死于等待回复

```
c1:nano("list_to_tuple([2+3*4,10+20])").
nano got not answer to "list_to_tuple([2+3*4,10+20])"
{error,timeout}

-module(c1).
-compile(export_all).
-import(lists, [reverse/1]).

%old port 2345
nano(Str) ->
    {ok, Socket} = 
    gen_tcp:connect("localhost", 4042,
            [binary, {packet, 0}]),
    ok = gen_tcp:send(Socket, term_to_binary(Str)),
    R = receive
        {tcp,Socket,Bin} ->
            io:format("Client received binary = ~p~n",[Bin]),
            Val = binary_to_term(Bin),
            io:format("Client result = ~p~n",[Val]),
            {ok,Val}
        after 5000 ->
            io:format("nano got no answer to ~p~n",[Str]),
            {error,timeout}
    end,
%   gen_tcp:close(Socket),
    R. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:40:23.733

根据文档，您得到的错误描述有点奇怪：

> einval
> 
> ```
> Attempt to delete the current directory. On some platforms, eacces is returned instead. 
> ```

我必须说它没有多大帮助。

无论如何，你不需要`{ok, Socket} = gen_tcp:accept(Listen)`在循环中调用，而它已经在`par_connect(Listen)`. 但在这种情况下，循环的参数将是 Socket 而不是 Listen。您在 per_connect 中进行了更正，但没有在循环中进行更正（这是您遇到错误的原因）。

这样做，第一个服务器被生成，它初始化与 gen_tcp:listen 的连接，并等待与 gen_tcp:accept 的连接。一旦建立连接，就会启动一个新进程，等待接受，并在当前进程中调用循环，并将连接端口作为参数。

现在你应该编写一个比我建议的更聪明的客户端，它可以使用相同的打开连接循环一段时间:o)

```
-module(socket_examples).
-compile(export_all).

nano_client_eval(Str) ->
    {ok, Socket} = gen_tcp:connect("localhost", 2345,[binary, {packet, 0}]),
    nano_client_eval(Str,10,Socket).

nano_client_eval(_,0,Socket) ->
    gen_tcp:close(Socket);
nano_client_eval(Str,N,Socket) ->
    ok = gen_tcp:send(Socket, term_to_binary(Str ++ " loop " ++ integer_to_list(N))),
    receive
        {tcp,Socket,Bin} ->
            io:format("Client received binary = ~p on socket ~p~n",[Bin,Socket]),
            Val = binary_to_term(Bin),
            io:format("Client result = ~p~n",[Val]),
            timer:sleep(1000),
            nano_client_eval(Str,N-1,Socket)
        after 5000 ->
            io:format("nano_client_eval got not answer to ~p~n",[Str]),
            {error,timeout}
    end.

start_nano_server() ->
    {ok, Listen} = gen_tcp:listen(2345, [binary, {packet, 0},{reuseaddr, true},{active, true}]),                       
    spawn(fun() -> par_connect(Listen) end).

par_connect(Listen) ->      
    {ok, Socket} = gen_tcp:accept(Listen),
    spawn(fun() -> par_connect(Listen) end),
    loop(Socket).                    

loop(Socket) ->
    receive
    {tcp, Socket, Bin} ->
        io:format("Server received binary = ~p~n",[Bin]),
        Str = binary_to_term(Bin),  %% (9)
        io:format("Server (unpacked)  ~p~n",[Str]),
%        Reply = lib_misc:string2value(Str),  %% (10)
        Reply = string:to_upper(Str),  %% (10)
        io:format("Server replying = ~p~n",[Reply]),
        gen_tcp:send(Socket, term_to_binary(Reply)),  %% (11)
        loop(Socket);
    {tcp_closed, Socket} ->
            io:format("Server socket ~p closed by request~n",[Socket])
    after 60000 ->
            gen_tcp:close(Socket),
            io:format("Server socket ~p closed, no more activity~n",[Socket])
    end. 
```

![在此处输入图像描述](../Images/f0b53dfe61fc01d7f3ebacd9d6d7a47b.png)

# filenet-p8 - 在哪里存储 objectstore 和 vwsession 对象

> ID：14846858
> 
> 赞同：1
> 
> 时间：2013-02-13T05:18:54.967
> 
> 标签：filenet-p8, filenet, filenet-content-engine, filenet-process-engine

我目前正在为 filenet 制作一个 Web 应用程序，我目前正在通过调用静态类中的方法来获取 objectstore 和 vwsession 对象。

每次我调用这些方法时，它再次获得连接，我可以将这些对象存储在 httpsession 中，但这些对象很重，这可能是个问题。

从哪里获取这些对象或存储这些对象的最佳方法是什么

编辑：我正在使用 java 并使用 filenet 4.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:13:03.900

在您的代码中缓存 Content Engine Connection 对象会在几分钟后导致您出现与安全相关的错误。在内部，CE Java API 执行连接缓存，因此在第一次调用获取连接后没有网络往返，因此无需您自己对该对象进行缓存。

PE 连接可以被缓存而不会出现同样的问题，但是如果你序列化对象时要非常小心，因为如果有人恶意反序列化它，他们可以使用它访问你的系统。您需要为每组不同的用户凭据获取一个单独的连接对象。

我建议您在分析代码并看到缓存解决的性能问题之前不要缓存任何内容，因为在内部 API 会进行一些缓存，您最终可能只会缓存两次，并且可能会使事情变得更慢。

# vector - 如果使用关键字 new 创建的对象，然后推送到向量中，我还需要删除它吗？

> ID：14846859
> 
> 赞同：1
> 
> 时间：2013-02-13T05:18:55.960
> 
> 标签：vector

问题如标题所述，示例代码如下：

```
#include <vector>
//I have a rabbit class...
vector<rabbit> rabbitArmy (numOfRabbits,rabbit()); 
rabbit* rabbitOnHeap = new rabbit(); 
rabbitArmy.push_back(*rabbitOnHeap); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:18:55.960

有人刚刚回答了我的另一个启发我的问题：因为 push_back 实际上将对象复制到向量，我仍然应该删除 rabbitOnHeap。此外，我根本不需要使用 new 关键字将对象添加到向量中。

PS：如果有人评论“是的，你是对的”，那就太好了。所以我可以确认我的答案:)

# iphone - 可以将 iphone 的图像用于 ios 应用程序

> ID：14846863
> 
> 赞同：2
> 
> 时间：2013-02-13T05:19:30.023
> 
> 标签：iphone, image, app-store

我想在我的 ios 应用程序的设置视图中显示 iphone 方向。我想展示一个 iphone 横向和纵​​向。为此使用 iphone 的图像是否合法。它会因此被苹果拒绝吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:22:33.007

**简短的回答：**不，这是不允许的。

迟早一些 App Store 评论者会以侵犯版权/商标为由拒绝你的二进制文件。

来源：个人经验。哈哈。（当然，我不是代表 Apple 发言，但是......）

# python - 全局变量重置在 Google App Engine 中不起作用

> ID：14846870
> 
> 赞同：0
> 
> 时间：2013-02-13T05:19:50.887
> 
> 标签：python, google-app-engine, global-variables, webapp2

我从 GAE 中的处理程序调用网络爬取函数，它检索一些图像，然后显示它们。它在第一次调用时工作得很好，但下一次它显示所有相同的图像并且爬虫从最后一个停止的地方启动。我认为这是我的全局变量未正确重置的问题。

每次我重新部署应用程序时，它都会第一次正确执行，但问题就开始了。

这是我的代码，如果您需要我澄清它，请告诉我，但我认为它应该有意义。

这是刮板功能

```
visited_pages = []
visit_queue = deque([])
collected_pages = []
collected_pics = []
count = 0
pic_count = 0

def scrape_pages(url, root_url, keywords=[], recurse=True):
    #variables
    max_count = 16
    pic_num = 100

    global count
    global pic_count
    global collected_pics
    global collected_pages

    print 'the keywords and url are'
    print keywords
    print url

    #this is all of the links that have been scraped
    the_links = []

    soup = soupify_url(url)

    #only add new pages onto the queue if the recursion argument is true    
    if recurse:
        #find all the links on the page
        try:
            for tag in soup.findAll('a'):
                the_links.append(tag.get('href'))
        except AttributeError:
            return

        try:
            external_links, internal_links, root_links, primary_links = categorize_links(the_links, url, root_url)
        except TypeError:
            return

        #change it so this depends on the input
        links_to_visit = external_links + internal_links + root_links

        #build the queue
        for link in links_to_visit:
            if link not in visited_pages and link not in visit_queue:
                visit_queue.append(link)

    visited_pages.append(url)
    count = count + 1
#    print 'number of pages visited'
#    print count

    #add pages to collected_pages depending on the criteria given if any keywords are given
    if keywords:
        page_to_add = find_pages(url, soup, keywords)

#        print 'page to add'
#        print page_to_add
        if page_to_add and page_to_add not in collected_pages:
            collected_pages.append(page_to_add)

    pics_to_add = add_pics(url, soup)
#    print 'pics to add'
#    print pics_to_add
    if pics_to_add:
        collected_pics.extend(pics_to_add)

    #here is where the actual recursion happens by finishing the queue
    while visit_queue:
        if count >= max_count:
            return

        if pic_count > pic_num:
            return

        link = visit_queue.popleft()
#        print link
        scrape_pages(link, root_url, keywords)

#    print '***done***'
    ###done with the recursive scraping function here

#here I just get a list of links from Bing, add them to the queue and go through them then reset all the global variables
def scrape_bing_src(keywords):
    visit_queue, the_url = scrape_bing.get_links(keywords, a_list = False)
    scrape_pages(visit_queue.popleft(), the_url, keywords, recurse=True)

    global collected_pics
    global pic_count
    global count
    global visited_pages
    global visit_queue

    pic_count = 0
    count = 0
    visited_pages = []
    visit_queue = deque([])

    pics_to_return = collected_pics
    collected_pics = []
    return pics_to_return 
```

这是调用刮板功能的处理程序

```
#this just simply displays the images
class Try(BlogHandler):
    def get(self, keyword):
        keyword = str(keyword)
        keyword_list = keyword.split()
        img_list = scraper.scrape_bing_src(keyword_list)

        for img in img_list:
            self.response.write("""<br><img src='""" + img + """'>""")

        self.response.write('we are done here') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:12:15.067

Your code isn't run inside only one "server" and one instance, you probably already noticed instances tab in admin console. So there is chance that even between calls you will be switched to different server, or process will be "restarted" (more you can read [here](https://developers.google.com/appengine/docs/python/backends/overview)). During warmup process your application reads from disk into memory and then starts to handle requests. So every time you getting new precached python instance with its own globals variable values.

In your case it is better to use [memcache](https://developers.google.com/appengine/docs/python/memcache/overview).

# java - Android中未建立数据库连接

> ID：14846871
> 
> 赞同：1
> 
> 时间：2013-02-13T05:19:56.187
> 
> 标签：java, android

我正在尝试编写此代码以在 Android 中进行连接。

```
public class DataBaseAdapter
{
....
....
    public DataBaseAdapter(Context context)
    {
        contextApp = context;
        myAlarmDB = new MyAlarmDatabase(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    public DataBaseAdapter open() throws SQLException 
    {
        try
        {
            db = myAlarmDB.getWritableDatabase();
        }
        catch (SQLiteException ex)
        {
            db = myAlarmDB.getReadableDatabase();
        }
        return this;
    }
} 
```

当任何代码调用`open()`方法时，Android 应用程序会因错误而终止。当这个特定的代码被注释时，应用程序就会运行。那就是它自由地创建 SQLiteDatabase 对象。

请帮助我该怎么办。？

这是连接到的类的代码`SQLiteOpenHelper`

```
public class MyAlarmDatabase extends SQLiteOpenHelper
{   
    private static final String CREATE_STATEEMENT=
    "create table if not exists AlarmDataBase" +
    "(alarm_id integer primary key auto_increment," +
    " description text," +
    " repeatType integer," +
    " repeatDay text," +
    " millis text)";
    public MyAlarmDatabase(Context context, String name, CursorFactory factory, int version)
    {
            super(context, name, factory, version);
            // TODO Auto-generated constructor stub
    }
    @Override
    public void onCreate(SQLiteDatabase db)
    {
        //db = SQLiteDatabase.openOrCreateDatabase("AlarmManagerDatabase.db", Context.MODE_PRIVATE, null);
        db.execSQL(CREATE_STATEEMENT);
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        // TODO Auto-generated method stub
        Log.w("TaskDBAdapter", "Upgrading from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");
        // The simplest case is to drop the old table and create a new one.
        db.execSQL("create table alarm_standby as select * from AlarmDataBase");
        db.execSQL("DROP TABLE IF EXISTS AlarmDataBase");
        db.execSQL("create table AlarmDataBase as select * from alarm_standby");
        db.execSQL("drop table alarm_standby");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:20:11.057

问题在于上下文传递..否则代码会运行。您在将上下文值传递给数据库连接类时犯了错误。这反过来导致应用程序关闭。如果您注释创建数据库连接类对象的代码，则代码将运行。

`So it is just that you are making mistake in passing context value`.

修改你的代码。

# c++ - 在函数调用中从 %esp 中减去分配了多少空间？

> ID：14846874
> 
> 赞同：6
> 
> 时间：2013-02-13T05:20:18.280
> 
> 标签：c++, assembly, att

**C++、ATT 程序集**

我有以下汇编代码：

```
push %ebp
mov  %esp, %ebp
sub $0x28, %esp
(...) 
```

我的教科书声称，通过从 %esp 中减去 0x28（作为堆栈形成的一部分），为变量分配了 12 个字节。为什么从堆栈中减去十进制 40 会分配 12 个字节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T05:34:06.710

这会在堆栈上分配 40 个字节。但是，除了局部变量之外，它还有其他用途，所以我猜其余部分用于对齐和未来函数调用的参数。

由于函数参数也在堆栈上传递，因此该函数想要传递给另一个函数的任何参数都需要空间。可以在执行调用时通过 using 分配此空间`push`，但在函数开始时分配一次空间并`mov`稍后仅用于将数据放置到位是很常见的。如果您的函数使用 12 个字节作为局部变量，则最多有 28 个字节用于函数参数以供以后使用。

也可能会为对齐分配一些额外的空间。除了 Jerry 提到的变量对齐之外，许多系统都希望堆栈指针与某个值对齐，因此如果您要进行函数调用，则需要保留这一点。在 32 位系统上，这通常是 8 个字节，但在这种情况下也可能是 16 个字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T05:29:24.980

I suspect you may have misread your book, but if you haven't, it looks a great deal to me as if the book is mistaken about this.

Subtracting 40 from the stack pointer allocates 40 bytes. That may not *always* be precisely correct¹, but any deviation from it will usually be pretty small.

* * *

1.  For example, if you allocate an 8-byte object in 32-bit code, it could allocate some extra space (12 bytes total) so it can ensure the 8-byte object has 8-byte alignment. Likewise, in 32-bit code you can typically only adjust the stack pointer in (at least) 32-bit increments, so a function that has one `char` local variable will typically still subtract at least 4 from the stack pointer to make room for it.

# peoplesoft - using UNIX command to zip/compress a file with PASSWORD in SQR

> ID：14846877
> 
> 赞同：1
> 
> 时间：2013-02-13T05:20:24.330
> 
> 标签：peoplesoft, sqr

I want to use unix command in SQR to zip/ compress a file with password and after that verifying password option

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:38:19.603

您必须`'Call system'`在 SQR 文件中使用该命令。相同的语法 -

```
$cmd_string = '<Command here>'
Call System using $cmd_string #status 
```

#status 变量可用于异常/错误处理。

要在 unix 环境中使用密码压缩文件，您必须使用`zip`命令或类似命令。`zip`，当与参数 -P 一起使用时，将为您提供使用提供的密码加密的 zip。在此处查看文档 - [http://linux.about.com/od/commands/l/blcmdl1_zip.htm](http://linux.about.com/od/commands/l/blcmdl1_zip.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:08:16.407

SQR 可以为它运行的平台运行命令——使用“调用系统”命令。我在 Unix 中使用它来运行邮件命令。

我将向您展示我的程序中的一些代码，希望对您有所帮助：

```
Let $Mail_Command = 'echo ' || $body || ' | mailx -s ' || $Subject || ' -r ' || $from || ' ' || $to 

! This is the key command you're looking for    
call system using $Mail_Command #Send_Status wait

If #Send_Status <> 0
        show ' '
        show 'ERROR sending email to : ' $to ' $From: ' $From ' $Subject: ' $Subject  
        show $Mail_Command
        show 'system stat: ' #Send_Status
        show ' '
   else
        #debug  show ''
        #debug  show 'Email sent to  : ' $to ' $From: ' $From ' $Subject: ' $Subject  
        #debug  show '$Body:     <' $Body '>'
   end-if 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T16:49:46.170

`CALL SYSTEM USING`我还在使用该命令在 SQR 中寻找文件压缩技术。

我先尝试了 zip 命令，但它不起作用。后来我尝试使用 gzip 并且它起作用了，而 gzip 命令的唯一缺点是它会删除原始文件。下面是我使用的代码：

```
let $zipcmd  = 'gzip' ||' '|| $OutputFileName
CALL SYSTEM USING $zipcmd #Status WAIT 
```

# android - Multiple Screens support - emulators

> ID：14846878
> 
> 赞同：0
> 
> 时间：2013-02-13T05:20:29.040
> 
> 标签：android, user-interface, android-emulator

I'm developing an Android app and I would like to support multiple screens.

I checked the dashboard in the link below and there are 10 types of screen configuration in use: [http://developer.android.com/about/dashboards/index.html#Screens](http://developer.android.com/about/dashboards/index.html#Screens)

I got the dimension of the screens from the link below: [http://developer.android.com/guide/practices/screens_support.html#testing](http://developer.android.com/guide/practices/screens_support.html#testing)

and then I created the following emulators to test my app on:

*   large_ldpi_2.3_800x480_120
*   large_mdpi_2.3_800x480_160
*   large_xhdpi_2.3_800x480_320
*   normal_hdpi_2.3_800x480_240
*   normal_ldpi_2.3_400x240_120
*   normal_mpdi_2.3_480x320_160
*   normal_xhdpi_2.3_960x640_320
*   small_hdpi_2.3_640x480_240
*   small_ldpi_2.3_320x240_120
*   xlarge_mdpi_2.3_1280x800_160

format:

```
<size>_<density>_<android version>_<size>_<density> 
```

Am I doing this right? What is the best practice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:31:40.460

在我看来，当您测试您的应用程序时，无需担心模拟器的大小。当您的应用程序在设备上运行时，有三个文件夹用于放置不同分辨率的不同图像，当您在真实设备上运行应用程序时，应用程序会为设备选择最佳分辨率图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:32:36.443

有特定的 Android API 调用可以在运行时告诉您手机的密度和（小/大/正常）屏幕尺寸。但是，作为开发人员，我们根本不需要担心个别手机。我们需要做的就是在 apk 中有 ldpi/mdpi/hdpi 资产和小/正常/大布局。Android 在内部处理一切。

不要忘记深入了解 Android 如何确定要使用的资产和[类似这样](http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html)的别名。

定义是：

超大屏幕至少为 960dp x 720dp。

大屏幕至少为 640dp x 480dp。

普通屏幕至少为 470dp x 320dp。

小屏幕至少为 426dp x 320dp。（Android 目前不支持比这更小的屏幕。）

以下是更多关于如何在真实屏幕上工作的示例：

QVGA 屏幕为 320x240 ldpi。转换为 mdpi（4/3 比例因子）给我们 426dp x 320dp；这与上面小屏幕桶的最小尺寸相匹配。

Xoom 是一款典型的 10 英寸平板电脑，具有 1280x800 mdpi 屏幕。这会将其放入 xlarge 屏幕存储桶中。

Dell Streak 是 800x480 mdpi 屏幕。这会将其放入大号桶的底部。

典型的 7 英寸平板电脑具有 1024x600 mdpi 屏幕。这也算大屏幕。

# mysql - 在 Windows 7 中通过命令行导入 SQL 文件

> ID：14846879
> 
> 赞同：32
> 
> 时间：2013-02-13T05:20:30.383
> 
> 标签：mysql, phpmyadmin, command-line-arguments, wampserver

我想将一个 SQL 文件（大小 > 500MB）导入数据库。我的电脑上有 wamp。Phpmyadmin 不适用于这种大小。我更改了 php.ini 中的所有参数（max_upload_size 等）。但这对我不起作用。所以我想通过命令行导入它。

我使用这些命令来导入文件：

```
mysql -u root -p sysdat < D:\Nisarg\ISPC\Database\sysdat.sql 
mysql -u root -p -D sysdat < D:\Nisarg\ISPC\Database\sysdat.sql
mysql -u root sysdat < D:\Nisarg\ISPC\Database\sysdat.sql -p 
```

这些都不起作用。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-13T05:27:44.547

试试这样：

我认为您需要在命令行中使用完整路径，例如：

```
C:\xampp\mysql\bin\mysql -u {username} -p {databasename} < file_name.sql 
```

另请参阅此链接：

[http://www.ryantetek.com/2011/09/importing-large-sql-files-through-command-line-when-using-phpmyadminxampp/](http://www.ryantetek.com/2011/09/importing-large-sql-files-through-command-line-when-using-phpmyadminxampp/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-19T18:52:15.700

如果您安装了 wamp，则转到命令提示符，转到 mysql.exe 所在的路径，就像我一样：C:\wamp\bin\mysql\mysql5.0.51b\bin，然后将 sql 文件粘贴到相同的位置，然后在 cmd 中运行此命令：

```
C:\wamp\bin\mysql\mysql5.0.51b\bin>mysql -u root -p YourDatabaseName < YourFileName.sql 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-24T10:25:21.997

要从转储文件导入数据库，请使用：

```
mysql -u UserName -p Password DatabaseName < FileName.sql 
```

在沼泽中

```
C:\wamp\bin\mysql\mysql5.0.51b\bin>mysql mysql -uroot -p DatabaseName < FileName.sql 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-04T08:43:56.653

----------------温暖的服务器。

步骤1：进入cmd 进入目录C:\wamp\bin\mysql\mysql5.6.17 按住Shift+右键（选择“在此处打开命令窗口”）

第二步：C:\wamp\bin\mysql\mysql5.6.17\bin>mysql -u root -p SellProduct < D:\file.sql

```
in this case
+ Root is username database  
+ SellProduct is name database.
+ D:\file.sql is file you want to import 
```

---------------这是我的工作-------------------

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-12T07:19:43.217

从转储文件导入数据库（在本例中称为 filename.sql）

```
 use: mysql -u username -p password database_name < filename.sql 
```

您在 Windows 上，您需要打开 CMD 并转到安装 mysql.exe 的目录。您正在使用 WAMP 服务器，那么它通常位于：C:\wamp\bin\mysql\mysql5.5.8\bin （*注意 mysql 的版本可能不同）

所以你会： cd C:\wamp\bin\mysql\mysql5.5.8\bin

然后执行上述命令之一。像这样的最终命令

```
 C:\wamp\bin\mysql\mysql5.5.8\bin>mysql -u rootss -p pwdroot testdatabasename < D:\test\Projects\test_demo_db.sql 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-19T13:48:52.177

试试这个

```
 C:\xampp\mysql\bin\mysql -u {username} -p {databasename} < {filepath} 
```

如果 username=root ,filepath='C:/test.sql', databasename='test' ,password ='' 那么命令将是

```
 C:\xampp\mysql\bin\mysql -u root  test < C:/test.sql 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-23T23:35:10.137

我`mysql -u root -ppassword databasename < filename.sql`在批处理中使用。对于单个文件，我喜欢使用`source`更多，因为它显示了进度和任何错误，例如

```
Query OK, 6717 rows affected (0.18 sec)
Records: 6717  Duplicates: 0  Warnings: 0 
```

1.  使用登录 MySQL`mysql -u root -ppassword`
2.  在 MySQL 中，更改要导入的数据库：`mysql>use databasename;`

    *   这非常重要，否则它将导入到默认数据库
3.  使用 source 命令导入 SQL 文件：`mysql>source path\to\the\file\filename.sql;`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-16T11:32:54.923

试试这个它会工作。不要输入密码它会询问您执行以下cmd

```
C:\xampp\mysql\bin\mysql -u xxxxx -p -h localhost your_database_name < c:\yourfile.sql 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-24T10:39:59.720

如果您使用的是 Windows PowerShell，您可能会收到以下错误：

```
The '<' operator is reserved for future use. 
```

在这种情况下，只需键入命令：

```
cmd 
```

切换到 cmd shell，然后重新键入命令，它将起作用。

```
c:\xampp\mysql\bin\mysql -u root -p my_database < my_database_dump.sql 
```

要返回 PowerShell 类型：

```
exit 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-10T17:02:11.090

导入对我有用的 SQL 文件

对于 Wamp 服务器

> 1.  在 wamp 中找到 mysql。在我的电脑中，它的位置是“C:\wamp64\bin\mysql\mysql5.7.21\bin”

打开 cmd，进入 bin 后，您必须编写“mysql -uroot -p database_name < filename.sql”

记得把 sql 文件放在 bin 下。

简而言之，您必须这样做：-

> C:\wamp64\bin\mysql\mysql5.7.21\bin>mysql -uroot -p database_name <文件名.sql

之后，它会要求输入密码，我的密码什么都没有（空白）。

希望它可以帮助某人。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-03T17:23:25.927

与导入相关，如果您在导入带有批量插入的文件时遇到问题，并且遇到 MYSQL GONE AWAY、丢失连接或类似错误，请打开您的 my.cnf / my.ini 并将您的 max_allowed_pa​​cket 临时设置为 400M 之类的大值

请记住在导入后再次设置它！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-16T12:17:42.593

mysql : <（用于导入）>（用于导出）

在windows中，要备份或导入sql文件，然后转到cmd提示符输入mysql安装的地址 eg:C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin> 在此之后

C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin> mysql -u UserName -p Password DatabaseName < FileName.sql (import)

C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin> mysql -u UserName -p Password DatabaseName > FileName.sql（导出）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-21T19:05:09.323

如果这些命令似乎不起作用——我向你保证它们会起作用——检查你的 sql 转储文件的顶部是否使用：

```
CREATE DATABASE {mydbname} 
```

和

```
USE {mydbname} 
```

mysql 命令的最后一个参数 {mydbname} 可能会产生误导：如果您的转储文件中有`CREATE DATABASE`一个参数`USE`，则导入实际上将在此数据库中完成，而不是在 mysql 命令中的那个。

将提示的 mysqldump 命令`CREATE DATABASE`是`USE`：

```
mysqldump.exe -h localhost -u root --databases xxx > xxx.sql 
```

使用不带 --databases 的 mysqldump 省略`CREATE DATABASE`和`USE`：

```
mysqldump.exe -h localhost -u root xxx > xxx.sql 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-25T12:51:34.990

如果您没有密码，则可以使用该命令而无需

```
-u 
```

像这样

```
C:\wamp>bin\mysql\mysql5.7.11\bin\mysql.exe -u {User Name} {Database Name} < C:\File.sql 
```

或者在 SQL 控制台上

```
mysql -u {User Name} -p {Database Name} < C:/File.sql 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-24T10:49:40.290

首先打开你的 cmd 面板并输入 mysql -u root -p（然后按 Enter）在 cmd 之后询问 mysql 密码（如果你有 mysql 密码，那么现在输入并再次按 Enter）现在输入 source mysqldata.sql（按 Enter）你的数据库将导入没有任何错误

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-02-12T10:32:51.740

如果您在本地计算机上运行 WampServer，则导入意味着恢复您拥有的转储文件（以 sql 格式）

以下是步骤

1.  转到“开始”->“运行”并输入 cmd 进入命令行。
2.  将目录更改为 Mysql bin 目录。它会像

    c:\wamp\bin\mysql\mysql5.7.14\bin

3.  转储文件最好保留在上述目录中（我们可以删除，恢复后）

4.  希望您已经创建了数据库（通过 phpMyadmin 或使用命令行）

5.  然后输入命令`mysql.exe -u root -p databasename < filename.sql`

请注意区别，它是 'mysql.exe' 而不是 'mysql'

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-29T12:23:32.983

如果您在本地计算机上使用**XAMPP** SERVER，请按照以下步骤将表导入数据库中

1.  创建要使用 cmd 导入这些表的数据库（通过**PhpMyAdmin**或使用命令行）

2.  转到“开始”->“运行”并输入 cmd 进入命令行。将目录更改为**MySQL bin 目录**。就像您使用 C 驱动器安装此应用程序 C:\Windows\System32\cmd.exe 或转到 XAMPP/WAMP/LAMP 中的 MySQL bin 目录并在地址栏中键入**cmd**并按 ENTER

3.  在cmd中目录会显示如下**C:\xampp\mysql\bin>**然后输入以下命令：

> mysql -u {user_name} -p {user_password} {database_name} < file_path.sql

或者，如果您没有设置密码，请使用以下命令：

> mysql -u {user_name} {database_name} < file_path.sql

**另一种方法：按照上述第 2 点进行操作，然后执行以下步骤：**

***步骤 01：***

> mysql -u {user_name} -p {user_password}

`example: C:\xampp\mysql\bin>mysql -u root -p password`

***步骤02：***

> 使用 {database_name}

`example: MariaDB [(none)]> use database_name`

***步骤 03：***

提供导入文件的来源

> 源文件路径.sql

`example: MariaDB [database_name]> source sql_file.sql`

输出将作为附加图像：

[![在此处输入图像描述](../Images/07566e4579556f7b2376001ed1dabbec.png)](https://i.stack.imgur.com/RBENS.png)

希望它会工作，享受！

# c++ - C++: Code from wikibooks on overloading pointer/reference related operators won't compile

> ID：14846889
> 
> 赞同：0
> 
> 时间：2013-02-13T05:21:35.080
> 
> 标签：c++, visual-studio, visual-c++, operator-overloading

I'm trying a piece of example code from wikibooks ([http://en.wikibooks.org/wiki/C%2B%2B_Programming/Operators/Operator_Overloading](http://en.wikibooks.org/wiki/C%2B%2B_Programming/Operators/Operator_Overloading)), but it won't compile in Visual Studio. The code is about overloading address of, reference, and pointer operators (`operator&()`, `operator*()` and `operator->()`):

```
//file example.cpp
#include "stdafx.h"
#include <iostream>

class T {
public:
    const void memberFunction() const {
        std::cout << "Hello!\n";
    }
};

// forward declaration
class DullSmartReference;

class DullSmartPointer {
private:
    T *m_ptr;
public:
    DullSmartPointer(T *rhs) : m_ptr(rhs) {};
    DullSmartReference operator*() const {
        return DullSmartReference(*m_ptr);
    }
    T *operator->() const {
        return m_ptr;
    }
};

class DullSmartReference {
private:
    T *m_ptr;
public:
    DullSmartReference (T &rhs) : m_ptr(&rhs) {}
    DullSmartPointer operator&() const { // error C2027: use of undefined type 'DullSmartReference'
        return DullSmartPointer(m_ptr);
    }
    // conversion operator
    operator T() { return *m_ptr; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    DullSmartPointer dsp(new T);
    dsp->memberFunction(); // calls T::memberFunction

    T t;
    DullSmartReference dsr(t);
    dsp = &dsr;
    t = dsr; // calls the conversion operator

    std::cin.get();

    return 0;
} 
```

Visual studio always reports Compiler Error C2079\. The error message is

```
1>e:\projects\bad\example.cpp(20): error C2027: use of undefined type 'DullSmartReference'
1>          e:\projects\bad\example.cpp(13) : see declaration of 'DullSmartReference'
1>e:\projects\bad\example.cpp(21): error C2440: '' : cannot convert from 'T' to 'DullSmartReference'
1>          Source or target has incomplete type

```

How can I fix the errors? I'm using VS 2010, but I don't think the version matters. Thanks!

**Update:** 1\. I updated the code and complete error message.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:29:30.353

Because you're trying to return a `DullSmartReference` object in this line:

```
DullSmartReference operator*() const 
```

There is no definition, just a forward declaration.

Therefore,

> **C2079**: The specified identifier is an undefined class, structure, or union.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:31:46.807

该示例中的错误（至少在给出的情况下）是`DullSmartReference`在定义之前使用的。在 C2079 行上，它试图构造并返回 a `DullSmartReference`，如果没有它的定义，这是不可能的。要解决此问题，该部分代码应为：

```
// forward declaration
class DullSmartReference;

class DullSmartPointer {
private:
    T *m_ptr;
public:
    DullSmartPointer(T *rhs) : m_ptr(rhs) {};
    DullSmartReference operator*() const;   // DullSmartReference not used yet
    T *operator->() const {
        return m_ptr;
    }
};

// DullSmartReference definition goes here

DullSmartReference DullSmartPointer::operator*() const {
    return DullSmartReference(*m_ptr);  // OK; we have the definition by now
} 
```

# database - Inserting data to same table through multiple threads

> ID：14846890
> 
> 赞同：1
> 
> 时间：2013-02-13T05:21:40.467
> 
> 标签：database, multithreading, c#-4.0, entity-framework-4, concurrency

Let's say I have two related tables, Account and User, where User holds a foreign key to Account. I have 2,000 Accounts, and need to copy 10,000 users from one Account to other 1,999 Accounts. So all data goes to the User table. I've queried the 10,000 Users that needs to be copied. Now I have to insert them in the User table. So that's a count of (10000 x 1999 =) 199,90,000 rows.

I'm planning to use multiple threads for the insert operation. I need to know how SQL Server handles concurrent request -

*   Does it uses multiple connections, one for each thread?
*   How does it insert data to the same table as multiple threads provide them concurrently?
*   Since the User table has an Identity column, the insert operation can never be truly concurrent. But can this approach of using multiple threads from the client end achieve any performance gain at all?
*   What is a better scalable and faster way to perform this operation?

Thanks in advance.

**EDIT :** I'm using Entity Framework 4.0, which actually doesn't have support for bulk copy :(

# php - ERROR - Directive 'register_globals' is deprecated in PHP 5.3 and greater in Unknown on line 0

> ID：14846892
> 
> 赞同：0
> 
> 时间：2013-02-13T05:21:43.117
> 
> 标签：php, deprecated, laravel, register-globals

Im occasionally getting this error, sometimes it pops up sometimes it doesnt: ERROR - Directive 'register_globals' is deprecated in PHP 5.3 and greater in Unknown on line 0

There was no php.ini file so i created one and turn register globals off, but that didn't work. I added "php_flag register_globals 0" to the htaccess file, but that didn't work either…</p>

Im using the laravel framework.

[Here is the link to the website, if you scroll through about 5 or so pages the error will occur](http://www.documentaryedge.org.nz/index.php/pages/6)

I have no more ideas. Any help would be greatly appreciated! Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:44:38.510

来自 PHP 文档：

```
This feature has been DEPRECATED as of PHP 5.3.0 and REMOVED as of PHP 5.4.0. 
```

因此，您要么需要将 PHP 版本降级到 <=5.2，要么需要删除任何使用寄存器全局变量的代码。

> 没有 php.ini 文件，所以我创建了一个并关闭了注册全局变量

总是有一个 php.ini 文件。我猜你在某个地方的托管解决方案上，所以你看不到 ini 文件。您需要与您的服务器管理员交谈并让他们更改它。

# java - Spring Data, _id field mapping

> ID：14846894
> 
> 赞同：1
> 
> 时间：2013-02-13T05:21:46.543
> 
> 标签：java, spring, mongodb, spring-data

Spring-data for mongodb treats fields named "id" special: [http://static.springsource.org/spring-data/data-mongo/docs/1.0.0.M5/reference/html/#d0e1508](http://static.springsource.org/spring-data/data-mongo/docs/1.0.0.M5/reference/html/#d0e1508), in that it tries to map a field named id to the _id field in MongoDB. Is there a way to disable this behavior? I'd like the mongodb ObjectId only mapped to fields with the explicit `@Id` annotation. Currently I have fields named id in mongodb, and this is not something I can change, and I'm finding it to be near impossible to get spring-data to map the correct id value back into the pojo.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:29:23.777

当前版本的 Spring Data MongoDB (1.2.0.RELEASE) 将拒绝具有多个 id 属性（注释或默认属性）的类。如果您认为我们应该对此更加宽容（如果属性明确注释，则忽略所有默认属性`@Id`），请随时在我们的[JIRA](http://jira.springsource.org/browse/DATAMONGO)中打开一张票。当前行为的实现是为了急切地发现从默认映射移动到显式注释时可能发生的潜在错误配置。

# app-store - 将 Xcode 更新到 4.6 和 iOS 更新到 6.1 后的问题

> ID：14846896
> 
> 赞同：0
> 
> 时间：2013-02-13T05:21:48.470
> 
> 标签：app-store, code-signing, provisioning, xcode4.6, ios6.1

我希望有人能帮助我。当我将 XCode 更新到 4.6 并将 iPhone 上的 iOS 更新到 6.1 时，我刚刚完成了我的应用程序并准备将其上传到 APP Store。现在我什至无法在自己的设备中测试 APP 而不会出现以下错误：

```
error: failed to launch '/Users/Drausio/Library/Developer/Xcode/DerivedData/Surf+-   hifxllpzxwzhrqgnmsjhoikiuomi/Build/Products/Debug-iphoneos/Surf+.app/Surf+' 
-- No such file or directory (/Users/Drausio/Library/Developer/Xcode/DerivedData/Surf+-hifxllpzxwzhrqgnmsjhoikiuomi/Build/Products/Debug-iphoneos/Surf+.app/Surf+) 
```

此外，当我尝试上传应用程序时，我遇到了各种代码签名错误。像这样的错误：

```
Application failed code sign verification. The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate.

Unable to extract codesining entitlements from your application. Please make sure Surf+ is a valid Mach executable that's properly signed. 
```

我检查并重新检查了每个证书和配置文件。开发人员和发行版，但我没有想法。

提前感谢您的想法！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:53:25.513

回答我自己的问题，显然 XCode 不喜欢我的应用程序的名称。我将其更改为 Surf-.app，一切都像魔术一样发生。

# opencv - 在 Windows phone 8 应用程序中使用 OpenCV

> ID：14846898
> 
> 赞同：3
> 
> 时间：2013-02-13T05:22:00.403
> 
> 标签：opencv, windows-phone-8

我需要在我的**Windows phone 8**项目中使用**OpenCV**。我找不到任何用于 wp8 的 openCV 编译版本。任何想法？我可以编译 wp8 的源代码吗？

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-21T21:51:43.237

我知道这是一个较老的问题，但是当我搜索“Windows Phone 8 opnecv”时，它仍然出现在 Google 上。最近的 Github 项目已经发布（也包括示例！），可用于 Windows Phone 8 --> [https://github.com/MSOpenTech/opencv](https://github.com/MSOpenTech/opencv)。它最初是在这里宣布的 --> [http://msopentech.com/blog/2014/03/20/easy-build-opencv-powered-apps-for-windows-store/](http://msopentech.com/blog/2014/03/20/easily-build-opencv-powered-apps-for-windows-store/)**

# c++ - 在 C++ 中转置矩阵

> ID：14846905
> 
> 赞同：3
> 
> 时间：2013-02-13T05:22:39.720
> 
> 标签：c++, matrix, transpose

我正在编写一个程序来使用分配的内存转置给定的矩阵。该函数与方阵 NxN (rows==cols) 完美配合，但它与 MxN 矩阵 (rows != cols) 一起崩溃。请帮忙

```
void transpose(int **matrix, int *row, int *col)
{
    // dynamically allocate an array
    int **result;
    result = new int *[*col]; //creates a new array of pointers to int objects
    // check for error
    if (result == NULL)
    {
        cout << "Error allocating array";
        exit(1);
    }
    for (int count = 0; count < *col; count++)
    {
        *(result + count) = new int[*row];
    }

    // transposing
    for (int i = 0; i<*row; i++)
    {
       for (int j = i+1; j<*col; j++)
       {
        int temp = *(*(matrix + i) + j);
        *(*(matrix + i) + j) = *(*(matrix + j) + i);
        *(*(matrix + j) + i) = temp;
       }
    }

    for (int i = 0; i<*row; i++)
    {
       for (int j = 0; j<*col; j++)
       {
          *(*(result + i) + j) = *(*(matrix + i) + j);
          cout << *(*(result + i) + j) << "\t";
       }
       cout << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T05:34:43.023

这些行：

```
for (int i = 0; i<*row; i++)
{
   for (int j = i+1; j<*col; j++)
   {
    int temp = *(*(matrix + i) + j);
    *(*(matrix + i) + j) = *(*(matrix + j) + i);
    *(*(matrix + j) + i) = temp;
   }
} 
```

是问题。问题是矩阵由 i 然后 j 索引，而不是 j 然后 i 就像你在 while 循环的第二行和第三行中所做的那样。矩阵是 2x3 矩阵的图像，然后您尝试执行 matrix[2][3] = matrix[3][2]，但 matrix[3][2] 不存在。

最好直接在这个循环中简单地初始化结果：

```
for (int i = 0; i<*row; i++)
   for (int j = 0; j<*col; j++)
     result[j][i] = matrix[i][j]; 
```

然后你可以像下面这样输出，或者删除矩阵并将矩阵重新分配为你想要的结果。我的整个转置函数变成了以下代码（row 和 col 不必是指向 int 传递值的指针就可以了。访问矩阵也应该使用数组下标，因为它是更好的样式）：

```
void transpose(int **matrix, int row, int col)
{
  // dynamically allocate an array
  int **result;
  result = new int *[col]; //creates a new array of pointers to int objects
  for (int i = 0; i < col; i++)
    result[i] = new int[row];

  // transposing
  for (int i = 0; i<row; i++)
   for (int j = 0; j<col; j++)
     result[j][i] = matrix[i][j];

  //output resulting matrix
  for (int i = 0; i<col; i++) {
   for (int j = 0; j<row; j++)
    cout << result[i][j] << "\t";
   cout << endl;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:39:11.033

您正在尝试“就地”转置矩阵：

> *(* (矩阵 + i) + j) = *(* (矩阵 + j) + i);

你不应该这样做。如果列数大于为 分配的行数`matrix`，您将读取和写入未分配的内存。

恕我直言，最好将整个矩阵存储在连续内存中。不是在不同的部分。以这种方式，代码将如下所示：

```
void transpose( int *matrix, int row, int col )
{
    for ( int i = 0; i < row; i++ )
    {
       for ( int j = i + 1; j < col; j++ )
       {
           int temp = matrix[ i * col + j ];
           matrix[ i * col + j ] = matrix[ j * col + i ];
           matrix[ j * col + i ] = temp;
       }
    }
} 
```

此分配的唯一缺点是，您无法处理`matrix[ i ][ j ]`但仅. 之类的元素`matrix[ i + col + j ]`。优点是：1）易于分配/释放内存（只是`matrix = new int[ col * row ]`和`delete [] matrix`）2）更快地访问元素（因为它们的连续位置）

最后，我认为这将是查看`std::vector`. 如果你愿意，我可以告诉你，你将如何使用矢量

# excel - 具有特定模式的字符串分隔公式

> ID：14846910
> 
> 赞同：2
> 
> 时间：2013-02-13T05:22:59.327
> 
> 标签：excel, excel-formula, vba

这是我工作中最糟糕的情况。我必须自动分离这组字符串，但只是不知道我应该使用哪个函数。这完全是困难的！我需要在 Excel 中为我的数据库工作的下一步分离字符串。

以下是数据示例：

A列中要分隔的字符串——

```
java-1.6.0-openjdk-1.6.0.0-1.21.b17.el6.x86_64
java-utils-1.6.0.0-1.el6.x386 
Java-1.7.0-openjdk-1.7.1-3.1.5
gdb-1.6-5.2.7.el6 
```

成功分离后的字符串部分，列BCDEFGHI --

```
#         name        #         Version    # OSLv # Architecture #
java # 1.6.0 #openjdk # 1.6.0.0 # 1.21.b17 # el6  # x86_64 #
java#  utils#         # 1.6.0.0 # 1         #el6_3 #x386  #
Java#       #         # 1.7.1   #   3.1.5  #      #      #
gdb #       #         # 1.6     #5.2.7     #el6   #      # 
```

（在我看来，如果我们先将字符串分成两部分，比如

```
java-1.6.0-openjdk-1.6.0.0-1.21.b17     #####     .el6.x86_64 
```

那么以后拆分成特定部分会更容易......也许！？）

非常感谢您的每一点帮助。

我会接受你可以为我以后学习提供的任何解决方案：D

*“#”标记表示将字符串的各个部分分隔到不同的单元格中。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:01:21.880

以下公式不是一个完整的解决方案，但应该为您提供一个了解您需要执行的字符串操作类型的起点：

从要解析的字符串的头部开始：

```
 =LEFT(A1,SEARCH("-",A1)-1)

  =IFERROR(MID(A1,LEN(A6)+2,SEARCH("-",A1,LEN(A6)+2)-LEN(A6)-2),"-")

  =IFERROR(MID(A1,LEN(A6&B6)+3,SEARCH("-",A1,LEN(A6&B6)+3)-LEN(A6&B6)-3),"-")

  =IFERROR(MID(A1,LEN(A6&B6&C6)+4,SEARCH("-",A1,LEN(A6&B6&C6)+5)-LEN(A6&B6&C6)-4),"-") 
```

*（我在字符串中间留了一些让你做。）*

从要解析的字符串的尾部：

```
 =IFERROR(MID(A1,SEARCH("el",$A1),SEARCH("x",A1)-(SEARCH("el",A1)+1)),"-")

  =IFERROR(RIGHT(A1,LEN(A1)-SEARCH("x",A1)+1),"-") 
```

字符串没有相同数量的元素并且并非所有元素都由破折号（“-”）分隔的事实使得这比通常的字符串解析任务更复杂。当您遇到困难时，您应该返回一个更具体的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:46:59.497

对于非常复杂的字符串提取，我很想在工作表函数中使用正则表达式。

请参阅[http://excelicious.wordpress.com/code-samples/vba/regex-functions/](http://excelicious.wordpress.com/code-samples/vba/regex-functions/)了解您可以使用/在其上构建的库。

# java - Collections.emptyMap() 与新的 HashMap()

> ID：14846920
> 
> 赞同：154
> 
> 时间：2013-02-13T05:23:59.663
> 
> 标签：java, collections

我可以使用哪些情况`Collections.emptyMap()`？文档说如果我希望我的集合是不可变的，我可以使用这种方法。

**为什么我想要一个不可变的空集合？重点是什么？**

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-02-13T05:28:40.877

来自**Effective Java**的 **Item #43** -`"Return empty arrays or collections, not null"`演示了返回一个空集合，甚至可能演示了使用 Collections 类上的这些`emptyList()`、、`emptySet()`和`emptyMap()`方法来获得一个空集合，该集合还具有不可变的额外好处。来自 **第 15 条** `"Minimize Mutability"`。

来自[Collections-emptySet-Collections-emptyList-Collections](http://www.coderanch.com/t/536728/java/java/Collections-emptySet-Collections-emptyList-Collections)

> 它是一种编程习惯。这适用于不想要空变量的人。所以在集合被初始化之前，他们可以使用空集合。

**注意：**下面的代码只是一个示例（根据您的用例进行更改）：

```
private Set myset = Collections.emptySet();

void initSet() {
   myset = new HashSet();
}
void deleteSet() {
   myset = Collections.emptySet();
} 
```

这些方法有几个优点：

1.  它们更简洁，因为您不需要显式输入集合的泛型类型——它通常只是从方法调用的上下文中推断出来的。

2.  它们更高效，因为它们不需要创建新对象；他们只是重新使用现有的空且不可变的对象。这种影响通常非常轻微，但偶尔（嗯，很少）很重要。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-13T05:26:46.060

诚然，就我个人的经验而言，它在 API 需要一组参数但您没有提供任何东西的情况下非常有用。例如，您可能有一个看起来像这样的 API，并且不允许空引用：

```
public ResultSet executeQuery(String query, Map<String, Object> queryParameters); 
```

如果您有一个不带任何参数的查询，那么创建一个涉及分配数组的 HashMap 肯定有点浪费，当您可以传入实际上是一个常量的“空映射”时，它的实现方式在`java.util.Collections`.

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-13T11:02:29.110

> 为什么我想要一个不可变的空集合？重点是什么？

这里有两个不同的概念，放在一起看时会显得很奇怪。当您分别处理这两个概念时，它更有意义。

*   首先，您应该尽可能使用不可变集合而不是可变集合。不变性的好处在[其他地方有很好的记载](https://stackoverflow.com/questions/214714/mutable-vs-immutable-objects/214718#214718)。

*   其次，您应该更喜欢使用空集合而不是使用 null 作为标记。这[在这里有很好的描述](https://stackoverflow.com/a/1970001/249879)。这意味着您将拥有更清晰、更易于理解的代码，并且隐藏错误的地方更少。

因此，当您有需要映射的代码时，最好传递一个空映射而不是 null 来指示不存在映射。而且大多数情况下，当您使用地图时，最好使用不可变地图。所以这就是为什么有一个方便的函数来制作一个不可变的空地图。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-13T09:42:33.353

在某些情况下，您更喜欢使用不可变映射、列表、集合或其他类型的集合。

**第一个**并且可以说是最重要的用例是，每当您返回将返回结果集（或列表或映射）的查询或计算的结果时，您应该更喜欢使用不可变数据结构。

在这种情况下，我更喜欢返回这些的不可变版本，因为这更清楚地反映了计算结果集的事实不变性 - 无论您以后如何处理数据，您从查询中收到的结果集都不应该改变。

**第二个**常见用例是当您需要提供参数作为方法或服务的输入时。除非您*希望*输入集合被服务或方法修改（这通常是一个非常糟糕的设计理念），否则在许多情况下传入不可变集合而不是可变集合可能是合理且安全的选择。

我认为它是*“按价值传递”的*约定。

**更一般地说**，当数据跨越模块或服务边界时，使用不可变数据结构是一种明智的做法。这使得推理（不可变）输入/输出和可变内部状态之间的差异变得更加容易。

这样做的一个非常有益的副作用是提高了模块/服务的安全性和线程安全性，并确保了更清晰的关注点分离。

**使用方法的**另一个好理由**`Collections.empty*()`是它们明显不冗长。在 Java7 之前的时代，如果你有一个泛型集合，你必须在所有地方都使用泛型类型注解。**

 **只需比较这两个声明：

```
Map<Foo, Comparable<? extends Bar>> fooBarMap = new HashMap<Foo, Comparable<? extends Bar>>(); 
```

相对：

```
Map<Foo, Comparable<? extends Bar>> fooBarMap = Collections.emptyMap(); 
```

后者显然在两个重要方面赢得了可读性：

1.  在第一个声明中，空映射的整个实例化被埋没在泛型类型声明的噪音中，使得本质上微不足道的声明比它需要的更加神秘。
2.  除了右侧明显缺少泛型类型注释外，第二个版本明确指出该映射被初始化为一个空映射。此外 - 知道此方法返回一个不可变映射，现在我更容易通过搜索找到另一个*非空*`fooBarMap`值的分配位置。*`/fooBarMap =/`*

 ** * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-13T05:28:47.567

一方面，您可以摆脱参考共享。一个`new HashMap()`etc 将需要一个分配的对象，可能还需要一些额外的元素来保存数据，但您只需要一个不可变的空集合（列表、集合、映射或任何其他此类）的副本。当您调用的方法需要接受 Map 但不需要编辑它时，这使它成为一个明显的选择。

我建议查看 Josh Bloch 的*Effective Java*，它列出了一些非常好的不可变对象的属性（包括线程安全）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-13T05:31:08.543

`immutable collection`当您有一个返回 an 的函数并且在某些情况下没有要返回的数据时，它可能很有用，因此`null`您可以返回而不是返回`emptyMap()`

它使您的代码更容易并防止`NullPointerException`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-13T05:34:40.187

大多数时候我们使用 a`constructor`来创建一个新的`empty map`. 但是`Collections` `methods`提供了几个优点来创建一个`empty map`使用`static` `method` `java.util.Collections.emptyMap()`

> 1.  它们更简洁，因为您不需要显式输入集合的泛型类型——它通常只是从方法调用的上下文中推断出来的。
>     
>     
> 2.  它们更高效，因为它们不需要创建新对象；他们只是重新使用现有的空且不可变的对象。这种影响通常非常轻微，但偶尔（嗯，很少）很重要。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-13T05:28:46.540

> 为什么我想要一个不可变的空集合？重点是什么？

出于同样的原因，您会[`Collections.unmodifiableMap()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)在某些时候使用。如果用户尝试修改它，您希望返回一个引发异常的 Map 实例。这只是一个特例：空地图。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-13T09:31:20.703

> 为什么我想要一个不可变的空集合？重点是什么？

出于同样的原因，您可能需要不可变对象。主要是因为您知道多个线程可以访问对象的同一实例并且它们都将看到相同的值，因此您可以在晚上安然入睡。集合中没有项目仍然是一个有效值，您希望保持该值。***

# ios - 用深色 UIView 覆盖屏幕会节省电池电量吗？

> ID：14846922
> 
> 赞同：0
> 
> 时间：2013-02-13T05:24:18.260
> 
> 标签：ios, battery, batterylevel

具有 0.8 alpha 值的全屏黑色覆盖 UIView 是否会像将设备系统亮度设置为低值一样减少电池消耗？

我更喜欢使用我自己的 UIView 叠加层，这样我就可以平滑地使屏幕变暗而不是弄乱用户的设备设置。

谢谢你的帮助。

Geoff iOS 6，通用应用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:56:17.880

我不这么认为；不管屏幕上有什么，背光都会打开，这就是消耗能量的原因。幸运的是，仪器中有能量诊断工具，可以帮助您以一种或另一种方式证明它。

# php - 预选匹配 db 值的多选选项

> ID：14846923
> 
> 赞同：0
> 
> 时间：2013-02-13T05:24:26.023
> 
> 标签：php, multi-select, selected

我正在创建一个客户帐户页面，该页面显示数据库中的信息并允许客户编辑他们的信息。下面的代码显示了当关联的 db 列中只有一个值时选择的相关选项，但是当列中有多个值时它会停止预选值，因此不适用于多选元素在页面上。

如何修改`if($row1['notifications']=='New_Items')`以便在选择多个值时可以工作？添加方括号`['notifications[]']=='New_Items'`会引发错误消息`"Notice: Undefined index notifications[]"`并阻止任何值被预先选择。

多选表单元素的结构为 name="element_name[]" 并作为数组插入到数据库中，并`implode`在插入时作为数组插入。获取值时，我使用`str_replace`在每个选项之后去除逗号，以便它可以正确地将值与选项的值进行比较*（似乎不需要分解值）*

```
<?php   
try {  
$stmt = $conn->prepare("SELECT * FROM customer_info WHERE user_id = :user_id");  
$stmt->bindValue(':user_id', $user_id); 
$stmt->execute();
}catch(PDOException $e) {echo $e->getMessage();}
$row = $stmt->fetch();
$row1 = str_replace(',', '', $row);
?>
<form action="account_information-exec.php" method="post">
    <select name="notifications[]" multiple="multiple" >            
    <option value="New_Items" <?php if($row1['notifications']=='New_Items') echo "selected='selected'"; ?>>New items</option>           
    <option value="Sale_Items" <?php if($row1['notifications']=='Sale_Items') echo "selected='selected'"; ?>>Sale items</option>
    </select>  
<input type="submit" value="submit">
</form> 
```

account_information-exec.php *- 插入和/或更新数据库的文件*

```
<?php
require_once "config/config.php"; // Connects to db 
$user_id = $_SESSION['SESS_USER_ID'];   
try {        
$stmt = $conn->prepare('INSERT INTO customer_info (user_id, notifications) 
VALUES(:user_id, :notifications)                  
ON DUPLICATE KEY UPDATE notifications = :notifications2');    
    function bindMultiple($stmt, $params, &$variable, $type) {
    foreach ($params as $param) {
        $stmt->bindParam($param, $variable, $type);
        }
    } 
    $stmt->bindParam(':user_id', $user_id);    
    bindMultiple($stmt, array(':notifications', ':notifications2'), implode(',', $_POST['notifications']), PDO::PARAM_STR);
    $result = $stmt->execute();
} catch(PDOException $e) {echo $e->getMessage();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:29:31.507

I assume $row1['notifications'] is stored as a concatenated string of selected values. If so, try this instead:

```
if(strpos($row1['notifications'], 'New_Items') >= 0) 
```

Note that you should account for delimiters (not sure why you're stripping the comma, is there a space left?).

# socialengine - 社交引擎模块的文件结构

> ID：14846924
> 
> 赞同：0
> 
> 时间：2013-02-13T05:24:32.707
> 
> 标签：socialengine

谁能告诉我社交引擎 4 模块的文件结构，即需要哪些文件或文件夹，哪些是可选的等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:32:49.950

所需的目录/文件似乎是控制器/视图/模型/设置。其余的似乎是可选的，至少在我构建的模块上，尽管我只有一个空目录，每个目录都有一个 .htaccess 文件。

# jquery - fancybox 中的 jwplayer 无法在 ipad/iphone 上播放

> ID：14846926
> 
> 赞同：0
> 
> 时间：2013-02-13T05:24:54.737
> 
> 标签：jquery, fancybox, jwplayer

我正在使用以下代码，但视频无法在 iOS（ipad/iphone）上的 fancybox 内使用 jwplayer 播放......否则工作正常。我很欣赏 iOS 不处理 flash，但我不确定如何修改此代码以提供 html5 后备...

```
<script type="text/javascript" src="scripts/jwplayer/html5/jwplayer.html5.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

    $(".video_popup").fancybox({
    fitToView: false, // to show videos in their own size
    content: '<span></span>', // create temp content
    scrolling: 'no', // don't show scrolling bars in fancybox
    afterLoad: function () {
      // get dimensions from data attributes
      var $width = $(this.element).data('width'); 
      var $height = $(this.element).data('height');
      // replace temp content
      this.content = "<embed src='scripts/jwplayer/player.swf?file=" + this.href + "&autostart=true&amp;wmode=opaque' type='application/x-shockwave-flash' width='" + $width + "' height='" + $height + "'></embed>"; 
    }
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:45:13.817

iOS 仅支持通过 HTTP 协议的视频流，不像 Flash 可以使用 RTMP。可以在[文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/18530/embedding-an-rtmp-stream-with-an-html5-fallback/)中找到如何使用 HTML5 后备解决方案配置 JWPlayer 的配置示例。

但是，您需要注意以下几行：

```
'provider': 'rtmp',
'streamer': 'rtmp://rtmp.example.com/application',
'file': 'sintel.mp4' 
```

如前所述，iOS 仅支持通过 HTTP 进行流式传输，因此您需要以下内容：

```
'provider': 'http',
'streamer': 'http://rtmp.example.com/application',
'file': 'sintel.mp4' 
```

当然，您的流媒体服务器也必须支持 HTTP 流媒体。

* * *

**编辑**

为了在 fancybox 中设置你的 JWPlayer，你可以像往常一样使用这些方法。一起使用 Fancybox 和 JWPlayer 并没有什么特别之处。

HTML

```
<div class="video_popup">
    <div id="mediaplayer">Here the player will be placed</div>
</div> 
```

Javascript（改编自您的问题）

```
$(document).ready(function() {
  $(".video_popup").fancybox({
  fitToView: false, // to show videos in their own size
  scrolling: 'no', // don't show scrolling bars in fancybox
  afterLoad: function () {
    // get dimensions from data attributes
    var $width = $(this.element).data('width'); 
    var $height = $(this.element).data('height');

    // now, use JWPlayer to setup the player instead of embedding Flash
    jwplayer('mediaplayer').setup({
      // configuration code as in the documentation
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:29:14.673

在 w4rumy 的帮助下，我设法让 jwplayer 使用 html5 在 fancybox 中工作，所以可以在 ipad/iphone 上播放：

```
<script type="text/javascript" src="scripts/jwplayer6/jwplayer.js"></script>
<script type="text/javascript"> 
$(document).ready(function() {
  $(".video_popup").fancybox({
  fitToView: false, 
  scrolling: 'no', 
  content: '<div id="myvideo"></div>',
  afterShow: function () {
   jwplayer('myvideo').setup({
        file: this.href,
        autostart: 'true',
         modes: [
        {type: 'flash', src: 'scripts/jwplayer6/jwplayer.flash.swf'},
        {type: 'html5', config: {file: this.href, provider: 'video'}},
    ]
    });
  }
}); 
```

# ajax - 如何使用 jsonp 从跨域获取响应

> ID：14846927
> 
> 赞同：0
> 
> 时间：2013-02-13T05:24:54.673
> 
> 标签：ajax, json, cross-domain, jsonp

我正在跨域进行 AJAX 登录，请求已正确发送并从其他域获得响应，但我的 onSuccess 函数没有被调用。我试过在请求中写 onsuccess 像

```
sucess : function(){} 
```

但它也没有被调用。

我的代码片段：

```
new Ajax.JSONRequest(this.preCheckUrl, {
    callbackParamName: "jsoncallback",
    parameters: {
    userEmail: this.userEmail, userPassword: this.userPassword, format: 'json'
  },

  onSuccess:function(response) {
        alert('hello');
  } }); 
```

-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:06:23.953

根据文档，您的请求看起来不错。来自[README.md](https://github.com/dandean/Ajax.JSONRequest)

> **处理故障**
> 
> 由于无法检查我们使用 JSONP 技术发出请求后会发生什么，因此我们不得不对正在发生的事情做出明智的猜测。
> 
> 此示例向无效 URL 发出请求。由于在默认超时期限（10 秒）内未调用回调，因此请求被“取消”，如果指定，则调用 onFailure 回调。Ajax.JSONResponse 的状态为 504，statusText 为“Gateway Timeout”。

```
new Ajax.JSONRequest('http://api.flickr.com/services/feeds/asdfasdfasdfasdfasdfsdf', {
  callbackParamName: "jsoncallback",
  parameters: {
    tags: 'cat', tagmode: 'any', format: 'json'
  },
  onCreate: function(response) {
    console.log("2: create", response, response.responseJSON);
  },
  onSuccess: function(response) {
    console.log("2: success", response, response.responseJSON);
  },
  onFailure: function(response) {
    console.log("2: fail", response, response.responseJSON);
  },
  onComplete: function(response) {
    console.log("2: complete", response, response.responseJSON);
  }
}); 
```

所以，你应该添加额外的回调，看看出了什么问题。

# c - 如何使用 fdopen() 和 getline() 检查 HTTP 客户端的 EOF

> ID：14846928
> 
> 赞同：0
> 
> 时间：2013-02-13T05:24:56.890
> 
> 标签：c, sockets, network-programming, httpclient, getline

首先我检查参数并创建一个可以连接到服务器的套接字并定义了一个文件，我可以在其中编写我的 HTTP 请求，当有数据时，我需要通过 getline 和之后处理我们读取的行我应该检查流结束，在流结束时我需要关闭流并退出。但我不知道如何检查 Endofline ......以及我写的格式是否正确

```
int main(int argc, char *argv[])
{ 
if(argc<2) //checking arguments
{
printf("expected a name for resolving");
exit(1);
}

int sock = createSocket(argv[1], argv[2]);
FILE *stream = getStream(sock);
printf("\n###### CLIENT IS SENDING THE FOLLOWING TO THE SERVER\n");
 fputs("GET /HTTP/1.0\n Host:Google.com\n Connection:close \r\n\r\n",stream);

while(1) 
{
char *string = NULL;
int len = getLine(&string, stream);
int numbytes=0;
printf("The length of string: %d\n",len);
printf("#####CLIENT RECEIVED THE FOLLOWING FROM SERVER \n%s", string);      

while (fgetc(stream) != EOF)
++numbytes;
fclose(stream);
printf("##### Connection closed by server");
exit(EXIT_SUCCESS);
free(string);

} 

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T05:33:48.217

我怀疑这是否可行……通过 send 和 recv 命令执行对套接字的读取和写入。

http 客户端的示例代码保存在这里：

[http://coding.debuntu.org/c-linux-socket-programming-tcp-simple-http-client](http://coding.debuntu.org/c-linux-socket-programming-tcp-simple-http-client)

# html - div中的网格列

> ID：14846931
> 
> 赞同：0
> 
> 时间：2013-02-13T05:25:03.940
> 
> 标签：html, css

我在我的网站中创建了一个网格，它看起来像这样。我不知道为什么，但是当字符变得太长时，div 的位置会被破坏。谁能帮我解决这个问题并解释原因？

图片：

![在此处输入图像描述](../Images/844e9364dddd384e05fbde432522906b.png)

我的 CSS

```
 .product-wrapper{
    margin: 0 auto; 
    display: table;
    text-align: center; 
}
.product-holder{   
    display: inline-block; 
    width:220px;
    height: 150px;
    border:1px solid #666666;
    margin-right: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
    -moz-box-shadow: 0 0 0 5px #666666;
    -webkit-box-shadow: 0 0 0 5px #666666;
    box-shadow: 0 0 5px #666666;  
}

.product-image{
    display: block;
    width: auto;
    height: 90px; 
    margin:10px; 
    border:1px solid #666666;
}
.product-caption{
    width: auto; 
    display: block;
    font-weight: bold;
    margin:0 10px; 
    word-wrap:break-word; 
} 
```

我的 html

```
 <div class="product-wrapper">
                        <div class="product-holder"> 
                            <span class="product-image"></span>
                            <span class="product-caption">Simple Product Name</span>
                        </div>
                        <div class="product-holder"> 
                            <span class="product-image"></span>
                            <span class="product-caption">AveryVeryverylongPRoductNamewithoutspace</span>
                        </div>
                        <div class="product-holder"> 
                            <span class="product-image"></span>
                            <span class="product-caption">AveryVeryverylongPRoductNamewithoutspace</span>
                        </div>
                        <div class="product-holder"> 
                            <span class="product-image"></span>
                            <span class="product-caption">Products</span>
                        </div>
                       <div class="product-holder"> 
                            <span class="product-image"></span>
                            <span class="product-caption">A productNamefor Sample</span>
                        </div>
                        <div class="product-holder"> 
                            <span class="product-image"></span>
                            <span class="product-caption">Another Product</span>
                        </div>
                    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:41:55.427

将此添加到 .product-holder

.product-holder { 垂直对齐：中间；}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:05:27.510

试试这个 .product-wrapper{ margin: 0 auto; 显示：表格；文本对齐：居中；}

```
.product-holder{   
             display: inline-block; 
             width:220px;
            height: 150px;
            border:1px solid #666666;
            margin-right: 10px;
            margin-bottom: 10px;
           border-radius: 5px;
          -moz-box-shadow: 0 0 0 5px #666666;
          -webkit-box-shadow: 0 0 0 5px #666666;
           box-shadow: 0 0 5px #666666;  
         }

.product-image{
              display: block;
              width: auto;
              height: 90px; 
               margin:10px; 
             border:1px solid #666666;
              }

 .product-caption {

                 display: block;
              float:left;
                  font-weight: bold;
                   margin: 0 10px;
                   overflow: hidden;
                  width: 200px;
                  word-wrap: break-word;
                    } 
```

# javascript - 重定向并打开编辑弹出窗口

> ID：14846934
> 
> 赞同：0
> 
> 时间：2013-02-13T05:25:40.353
> 
> 标签：javascript, jquery, ajax, redirect, popup

我遇到了一个问题，我有一个带有`anchor`标签的链接，并且 href 设置为打开一些反馈。锚标签作为单个标签处理`Note`，我需要打开一个弹出窗口来删除它`Note`。我将这个锚标记与 a 绑定`span`并应用 onclick 来打开`Edit Popup`。

这是我的 HTML

```
<span style="font-size: 13px; font-family: Arial;float:left; cursor: pointer;" onclick="javascript:OpenMoveFeedback('4909','2838','0');">
   <a href="http://localhost:16185/SurveyDesigner/FeedbackReport.aspx?RequestId=7f2679e8-d131-47d8-9074-318516c7b95b&amp;$$$$=4909" 
       target="_Blank" 
       style="cursor: pointer; text-decoration: none; color: #0431B4; font-size: 13px; font-family: Arial;">
     View Anonymous Feedback 
   </a> 
   (Form: ff5).
</span> 
```

正如你所看到的，有一个函数`OpenMoveFeedback`会打开一个弹出窗口，并且锚标签有一些重定向到自身。

现在的重点是当用户点击`(Form: ff5)`它时会打开该弹出窗口（这里没有问题），但是当用户点击`View Anonymous Feedback`它时会在浏览器窗口中打开一个新选项卡+它也会触发弹出窗口。在这种情况下，我不想打开那个弹出窗口。

请建议我在这里更新什么。我正在从 json ajax 构建数据。客户端代码中没有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:37:04.593

这是因为您的“查看匿名供稿”也在跨度内，带有一些 javascript 代码。

只是做类似的事情。

```
<a href="http://localhost:16185/SurveyDesigner/FeedbackReport.aspx?RequestId=7f2679e8-d131-47d8-9074-318516c7b95b&amp;$$$$=4909" target="_Blank" style="cursor: pointer; text-decoration: none; color: #0431B4;font-size: 13px; font-family: Arial;">View Anonymous Feedback </a> <span style="font-size: 13px; font-family: Arial;float:left; cursor: pointer;" onclick="javascript:OpenMoveFeedback('4909','2838','0');">(Form: ff5).</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:33:10.433

您应该`currentTarget`在`OpenMoveFeedback()`函数中检查。如果事件不是由 生成的`<span>`，那么只需`return`从函数中生成。当您单击链接而不是`<span>`.

例如：

```
function OpenMoveFeedback(event){
  if(event.currentTarget.tagName == 'a'){
      //event is generated by <a>, do nothing 
      return;
  }
  /*
    rest of your function code.
  */
} 
```

# algorithm - 在数组中的每个位置递增数字的算法

> ID：14846937
> 
> 赞同：1
> 
> 时间：2013-02-13T05:25:52.160
> 
> 标签：algorithm

我想知道这个算法是否有正式名称，以及解决这个问题的优雅方法是什么：问题是——给定一个数组，比如说，打印出所有以, , ,`[3, 6, 2]`开头的数字，然后下一个数字将“结转”并成为，然后。它就像汽车的里程表，只是增加另一端的数字就可以了。是第二个数字的最大数字。是第三个数字的最大数字。所以程序应该打印出最后一个数字。`000``100``200``300``010``110``6``2``362`

我想出了下面的解决方案，但它看起来太乱了。所以我想知道是否有一个优雅的解决方案，这个问题和解决方案实际上是否有一个正式的名称和一个已知的优雅解决方案来解决它？

递归实际上是可能的，但我认为如果递归返回一个包含所有数字的数组，如果输入数组中有 10 或 15 个数字，算法将无法处理它，因为生成的数组可以呈指数增长并且它可以变得非常大并且吃掉很多内存。

```
# In Ruby

def print_all_numbers(arr_ranges)
  arr = arr_ranges.map { 0 }   # convert it to [0, 0, 0]

  while (true)
    incrementer_index = 0
    puts arr.join
    arr[incrementer_index] += 1
    while arr[incrementer_index] > arr_ranges[incrementer_index]
      arr[incrementer_index] = 0
      incrementer_index += 1
      return if incrementer_index >= arr.length 
      arr[incrementer_index] += 1
    end
  end
end

print_all_numbers([3, 6, 2]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:46:08.137

在我看来，递归更简单。使函数采用数字最大值列表和包含到目前为止计算的数字的后缀。如果列表为空。后缀是要打印的数字。否则，从列表中剥离最后一个最大值并迭代，递归调用自己。我不知道鲁比。这是一个（经过测试的）Python 解决方案：

```
#!/usr/bin/python

def printNumbers(digitMaxima, suffix=''):
    if len(digitMaxima) == 0:
        print suffix
        return

    thisDigitMaximum = digitMaxima[-1]
    remainingDigitMaxima = digitMaxima[:-1]
    for d in range(0, thisDigitMaximum+1):
        digitAsString = '%d' % d
        printNumbers(remainingDigitMaxima, digitAsString + suffix)

printNumbers([3, 6, 2]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:57:55.977

有混合基（或混合基数）位置数字系统。众所周知的例子 - 小时-分钟-秒。您可以通过简单的循环遍历所有值。预先计算基数的部分乘积，并使用整数除法和模运算来隔离每个数字。

十进制示例：要提取 76543 的第四位，我们使用 (76543 div 1000) mod 10。

工作德尔福代码

```
var
  A, Products: TDynIntegerArray;
  Len, i, j: Integer;
  s: string;
begin
  A := TDynIntegerArray.Create(3, 4, 2);
  Len := Length(A);
  SetLength(Products, Len);
  Products[Len - 1] := 1;
  for i := Len - 2 downto 0  do
    Products[i] := Products[i + 1] * (A[i + 1] + 1); //partial products
  for i := 0 to Products[0] * (A[0] + 1) - 1 do begin // overall count of "numbers"
    s := '';
    for j := 0 to Len - 1 do
      s := s + IntToStr((i div Products[j]) mod (A[j] + 1));
    Memo1.Lines.Add(s); // output string
  end; 
```

Output: 000 001 002 010 011 012 020 021 022 030 031 032 040 041 042 100 101 102 110 111 112 120 121 122 130 131 132 140 141 142 200 201 202 210 211 212 220 221 222 230 231 232 240 241 242 300 301 302 310 311 312 320 321 322 330 331 332 340 341 342

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:09:16.373

您有特定的语言吗？Python 有一种[`range()`方法](http://docs.python.org/release/1.5.1p1/tut/range.html)可以使此类问题变得相当简单。返回和`range(n)`之间的所有数字的列表，因此返回。一些简单的谷歌搜索告诉我，可以在 Ruby[中使用](http://www.tutorialspoint.com/ruby/ruby_ranges.htm)类似的效果创建（尽管这看起来有点 hackish）。`0``n-1``range(3)``[0, 1, 2]`[`(0..n-1)`](http://www.tutorialspoint.com/ruby/ruby_ranges.htm)

使用`range()`，然后我将采用动态编程方法来存储我看到的数字的所有可能前缀（从没有前缀开始）。我将遍历每个最大数字，计算所有可能的有效数字，然后将它们与有效前缀组合，从而生成一个新的有效前缀列表，该列表比前一个列表长 1 位。一旦我的“前缀”与所需的数字一样长，我就完成了。

例如，给定`[1, 2, 3]`，首先我生成`[0, 1]`（最大为 1 的所有有效数字）。接下来我生成`[0, 1, 2]`（所有有效数字最多为 2），然后将它们与我的可能前缀列表 ( `[0, 1]`) 结合以生成`[00, 01, 02, 10, 11, 12]`. 现在这是我的新前缀列表，我会重复，直到我查看了所有最大值。所有这些都不需要递归。我也觉得这个解决方案在概念上和查看代码上都更容易理解。

这是一个 Python 实现：

```
def printNumbers(maxNums):
    possibleNums = [""] #start with empty prefix

    for digit in maxNums: #start with the first digit then work back
        possibleSuffixes = range(digit + 1) #+1 to allow us to capture the number itself

        newNums = [] #this will hold the new list of possible numbers
        for prefix in possibleNums: #looking at each prefix
            for suffix in possibleSuffixes: #looking at each suffix
                newNums.append("{}{}".format(prefix, suffix)) #join them
        possibleNums = newNums

    for num in possibleNums: #for each number
        print num 
```

*请注意，`"{}{}".format()`我可以使用字符串连接而不是使用字符串连接，但是由于我将`str`s 和`int`s 组合在一起，因此我想避免任何类型错误*

# c - 将字符串存储在不规则数组中

> ID：14846938
> 
> 赞同：0
> 
> 时间：2013-02-13T05:26:07.343
> 
> 标签：c, arrays, string

我试图将一些用户输入的名称存储在一个参差不齐的数组中。但是，我在运行时遇到错误，我试图找出问题所在。

我的代码：

```
int num, count, i;
char *myNames[10];

printf("Enter the number of names: ");
scanf( "%d" , &num);

fflush(stdin);

    // Ask user to input the name
for( count = 0 ; count <= num ; count++)
{
    printf("Enter a name: ");
    scanf( "%s" , myNames[count]);
    fflush(stdin);
}

    // To check if names are stored correctly
printf("%s", *myNames[1]);

return 0;
} 
```

如果有人可以分享一些帮助，或者至少为我指出正确的方向，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:30:08.227

您需要为字符串本身分配空间；目前您只分配了一个由 10 个指针组成的数组，但它们实际上从未指向任何有效内存；因此当 scanf() 尝试写入它们时会出现错误。

当然，为了给一个字符串分配合适的空间，你需要知道字符串中有多少个字符，这有点像鸡与蛋的问题；您可能应该使用一个堆栈分配的数组让 scanf() 写入然后 strdup() ，如下所示：

```
for( count = 0 ; count <= num ; count++)
{
   printf("Enter a name: ");
   char temp[1024];
   scanf( "%s" , temp);
   myNames[i] = strdup(temp);
   fflush(stdin);
} 
```

...当然，如果您希望程序 100% 正确并避免内存泄漏，则需要在返回之前 free() 10 个字符串中的每一个，但如果这只是一个玩具程序，您可以忽略它并让操作系统处理清理工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:29:08.720

`char *myNames[10];`创建指向某个随机内存位置的 10 个字符指针。当你这样做时，`scanf( "%s" , myNames[count]);`你正试图写入这个导致访问冲突的内存位置。您需要为字符串分配内存，然后通过执行以下操作使这些指针指向分配的内存：`myNames[0] = malloc(10);`为 10 个字符分配空间。请注意，一旦处理完成，您需要通过`free(myNames[0]);`.

# php - 如何将此查询转换为 yii 查询？

> ID：14846942
> 
> 赞同：3
> 
> 时间：2013-02-13T05:26:46.200
> 
> 标签：php, mysql, yii

我希望将此 Sql 命令转换为 yii cactivedataprovider 格式，以便我可以使用此标准提供 dataprovider。

```
 SELECT *
    FROM (

    SELECT (

    CASE WHEN product_name LIKE '%nokia%'
    THEN 1
    ELSE 0
    END +
    CASE WHEN product_name LIKE '%lumia%'
    THEN 1
    ELSE 0
    END +
    CASE WHEN product_name LIKE '%800%'
    THEN 1
    ELSE 0
    END
    ) AS numMatches, product_name
    FROM Production
    ) AS t
    WHERE numMatches >0
    ORDER BY numMatches DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:46:22.647

您关于需要 a 的评论`ActiveDataProvider`可能不正确，大多数 Yii 小部件只需要[`CDataProvider`](http://www.yiiframework.com/doc/api/1.1/CDataProvider)SQLDataProvider 和 ActiveDataProvider 都是的实例。如果你**真的**需要活动记录模型，你可以通过 SQL 选择活动记录模型：

```
$models = MyModel::model()->findAllBySql($sql); 
```

然后在这样的数据提供者中使用它们：

```
$data = CArrayDataProvider($models); 
```

# hibernate - 无法获取某个实体的结果列表

> ID：14846947
> 
> 赞同：0
> 
> 时间：2013-02-13T05:27:08.073
> 
> 标签：hibernate, jpa

```
@Entity
public class Foo {
   int v1;
   int v2;

   @ManyToOne
   Bar bar;
}

Query query = EntityManager.createQuery("select foo from Foo");

query.getResultList() 
```

根本不会被执行。如何调试此语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:56:55.700

你的查询是错误的

修改如下：

```
Query query = EntityManager.createQuery("from Foo"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:40:29.170

@TheSureshAtta 的回答对 Hibernate API 有效。由于您用 标记了您的问题`JPA`，因此相应的类型安全 JPA 查询可能很重要：

```
TypedQuery<Foo> query = EntityManager.createQuery("SELECT f FROM Foo f", Foo.class);
List<Foo> result = query.getResultList(); 
```

# python - Why can't I change or reassign the values of variables in lists using a for loop (python)?

> ID：14846951
> 
> 赞同：1
> 
> 时间：2013-02-13T05:27:47.213
> 
> 标签：python

If I have a list of numbers, and I want to increment them using a for loop, why isn't this working:

```
>>> list=[1,2,3,4,5]
>>> for num in list: 
...  num=num+1
... 
>>> list
[1, 2, 3, 4, 5] 
```

I expected to get [2,3,4,5,6].

I know I can get around this by doing

```
>>> newlist=[] 
>>> for num in list: 
...  newlist.append(num+1)
... 
>>> newlist
[2, 3, 4, 5, 6]
>>> 
```

but there must be an easier way.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:29:20.763

This is because you only get a reference to the variable in the list. When you replace it, you simply change what that reference is pointing to, so the item in the list is left unchanged. The best explanation for this is to [follow it visually](http://www.pythontutor.com/visualize.html#code=old_list%3D%5B1,2,3,4,5%5D%0Afor+num+in+old_list%3A+%0A++++num+%3D+num+%2B+1&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0) - step through the execution visualization found at that link and it should be very clear.

Note that mutable objects can be mutated in place, and that will affect the list (as the objects themselves will have changed, not just what the name you are working with is pointing to). For comparison, see [the visualization here](http://www.pythontutor.com/visualize.html#code=old_list=%5B%5B1%5D,+%5B2%5D,+%5B3%5D,+%5B4%5D,+%5B5%5D%5D%0Afor+num+in+old_list%3a+%0A++++num.append%281%29&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0).

The best option here is a [list comprehension](http://www.youtube.com/watch?v=pShL9DCSIUw).

```
new_list = [num + 1 for num in old_list] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T05:29:56.213

This is an artifact of how assignment works in python. When you do an assignment:

```
name = something 
```

You are taking the object `something` (which is the result of evaluating the right hand side) and binding it to the name `name` in the local namespace. When you do your `for` loop, you grab a reference to an element in the loop and then you construct a new object by adding 1 to the old object. You then assign that new object to the name `num` in your current namespace (over and over again).

If the objects in our original list are mutable, you can mutate the objects in a for loop:

```
lst = [[],[],[]]
for sublst in lst:
    sublst.append(0) 
```

And you will see those changes in the original list -- Notice however that we didn't do any assignment here.

Of course, as suggested by lattyware, you can use a list-comprehension to construct a new list:

```
new_list = [x+1 for x in old_list] 
```

and you can even make the assignment happen in place:

```
old_list[:] = [x+1 for x in old_list] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:31:39.520

您可以通过索引数组来实现这一点。

```
>>> list=[1,2,3,4,5]
>>> for i in range(len(list)): 
...  list[i]=list[i]+1 
```

这将绕过 Lattyware 提到的引用问题。

# c# - Personalize Caliburn.Micro Views path

> ID：14846955
> 
> 赞同：0
> 
> 时间：2013-02-13T05:28:13.890
> 
> 标签：c#, caliburn.micro

I'm new with caliburn and building a simple app, but i want to change where i put my views

my project look like:

```
Project/
  Model/
    ...
  View/
    TestView.xaml
  ViewModel/
    TestViewModel.cs
  App.xaml 
  AppBootstrapper.cs 
```

but with this i get a `cannot find view for Project.ViewModel.TextViewModel`. obviously if I put the view into the same directory, the application works perfectly but i want to cahnge the location where i can configure that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:00:51.310

Views 和 ViewModels 所在的文件夹是特定于命名空间的。将文件夹 View 更改为 Views，将 ViewModel 更改为 ViewModels，并更新该新命名空间的 .cs 和 .xaml。

查看此链接以获取更多信息： [http ://caliburnmicro.codeplex.com/wikipage?title=View/ViewModel%20Naming%20Conventions](http://caliburnmicro.codeplex.com/wikipage?title=View/ViewModel%20Naming%20Conventions)

具体来说，在您的情况下，标题：“类型命名空间的命名约定”

# sql - Copy huge amount of SQL data into a file

> ID：14846957
> 
> 赞同：0
> 
> 时间：2013-02-13T05:28:34.840
> 
> 标签：sql

I need to copy over 6 million rows of data into a source file, for instance SQL to Excel, but the problem is copying to excel gives me a memory error. Any suggestions on what to do or what type of source file I could use that would support this amount of data ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:25:12.880

Microsoft Server Management Studio 允许您将表、视图和查询导出到没有大小限制的 csv 和 rpt 文件。这里有两个选项。

第一个选项：

对于 SSMS - SQL Server 2008 R2（获取 CSV）

工具 > 选项

![截屏](../Images/a8e15c9e220cfd133ee3477bb57db2a7.png)

展开查询结果 > SQL Server > 结果到文本

选择您要使用的输出格式

查询 > 结果到 > 结果到文件

然后执行所需的查询。它将提示将结果保存为 .rpt。

您可以将此结果显式保存为 .csv（带扩展名的双引号括起来的文件名）或使用 excel 打开 .rpt 文件进行查看。[来自 SQL 论坛的详细信息](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/7a3f031c-3579-475d-8182-0321084de1db/)。

第二种选择：

使用您需要的数据创建一个视图。右键单击数据库任务 > 导出数据...

![在此处输入图像描述](../Images/4d3797881c3d31175fdf9ec668226e7f.png)

然后保存 csv 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:45:12.840

OpenOffice Base 对行数没有限制。您可以尝试将其导入其中。如果没有关于您正在尝试做什么的更多详细信息，很难推荐最适合这项工作的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-17T03:15:54.530

Excel 对行数有限制，当前限制为 1,048,576。

我有 2 条建议通常适用于大量数据导出：

1.  尝试以 .csv 格式导出文件。它比 Excel 导出更节省内存。此外，就数据转换而言，csv 格式是最方便的格式之一。

2.  找出一种方法来拆分 sql 查询中的记录数。应用一组过滤器，详尽地覆盖所有记录。（在您的情况下，您可以尝试创建 100 万条记录的 6 种不同导出）

您想对这些数据进行什么最终分析？了解更多关于您希望执行的分析类型和您将使用的平台可以帮助我们帮助您。

# c++ - popen not working correctly on sunos5

> ID：14846958
> 
> 赞同：0
> 
> 时间：2013-02-13T05:28:35.400
> 
> 标签：c++

I have program to find emacs path using `which command` if it does not find emacs then i find emacs in `$PATH` variable. Lets my system have emacs then below program is giving output correct **but it is sourcing .cshrc file** I dont know why?

```
/* getenv example: getting path */
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <sys/stat.h>
using namespace std;
int main ()
{
    FILE *fp;
    int status;
    char path[256];
    const char *command = "which emacs 2>&1";
    /* Open the command for reading. */
    fp = popen(command, "r");
    if (fp == NULL) {
        printf("Failed to run command\n" );
        exit(0);
    }
    string path1;
    /* Read the output a line at a time - output it. */
    while (fgets(path, sizeof(path)-1, fp) != NULL) {
        path1 += path;
    }
    cout<<"orignal path after which command = "<<path1<<endl;
    /* close */
    bool found = true;
    std::string search="which:";
    char *tmp; 
    tmp = strstr(path1.c_str(),search.c_str()); 
    if (tmp != NULL) 
    {
        found = false;
    }
    else 
    {
        found = true;
    }
    if (found){
        cout<<"Found Emacs"<<endl;
        cout<<"path = "<<path1;
        string path2;
        for (int i=0; i < path1.length()-1; i++)
        {
            path2 += path1[i];
        }
        //path1[path1.length()-1]= " ";
        path2 += " -i";
        cout<<"final path = "<<path2<<endl;}
    else
        cout<<"Not found Emacs"<<endl;
    pclose(fp);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:37:14.367

正如您所说，您在 $PATH 变量中找到 emacs，所有路径变量都位于 ~/.cshrc 或 ~/.bashrc 中，具体取决于您是分别使用 csh 还是 bash。您可以使用命令 ps 查看正在使用的 shell。也许您在每个操作系统中使用不同的 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:35:47.817

该`SunOS` `which`命令是一个`csh`脚本，`.cshrc`它会在搜索 csh 别名时获取您的文件，而它无法从外部 csh 执行此操作。linux`which`命令是一个 posix shell 脚本。它们是不同的命令，以不同的方式运行。

沿着`PATH`环境变量搜索比依赖 which 命令更有意义。which 命令可以变成内置在某些 shell（例如`zsh`）上的 shell，并根据操作系统以不同的方式运行（我认为 mac 使用二进制文件）。

# git - git submodule foreach - Robust way to recursively commit a child module first?

> ID：14846967
> 
> 赞同：12
> 
> 时间：2013-02-13T05:28:56.610
> 
> 标签：git, foreach, git-submodules

Is there a robust way to do a recursive depth-first `git submodule foreach` command? I am using the `foreach --recursive` command which does the job, except it is breadth-first. This is a problem because if I have the following structure:

*   A
    *   B
*   C

And I have commits in all three, a `foreach --recursive add -A && git commit ...` will hit A, B, C, which is problematic if I want the supermodule to capture the commits of B at that time.

I found [this discussion](http://marc.info/?l=git&m=120997867213008) from 2008, but it does not look like any of the suggested features are in the current version of Git that I have (1.7.9.5).

I wrote a small bash function to do this (excuse the shorthand naming):

```
function git-sfed() { git submodule foreach "git submodule foreach '$*' && $*"; } 
```

And testing it with the following fanciful command seems to work:

```
git-sfed 'python -c "import sys; print sys.argv" $path' 
```

Does this command seem robust, or are there other common existing methods?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T14:58:40.047

你可以试试这个

```
git submodule  foreach --recursive  |  tail  -r | sed 's/Entering//' | xargs -I% cd % ; git add -A \& git commit 
```

此列表（递归）所有子模块，然后反转列表，`tail -r`因此您可以按照您想要的顺序获取目录（首先是子模块），输入目录并在其中做任何您想做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T07:50:07.840

除了您的函数之外，我没有找到任何其他方法来执行深度优先`foreach`命令。

测试将检查它是否确实实现了深度超过一的递归。

```
A
  B
    D
  C 
```

* * *

> 我在尝试使用单引号时遇到了你和我的命令的麻烦（不能写它们有点糟糕） - 使用多个级别的 bash 命令转义有点令人困惑。

这个（引用问题）应该在 Git 1.9/2.0（2014 年第一季度）中简化，来自[Anders Kaseorg (andersk)的](https://github.com/andersk)[提交 1c4fb13](https://github.com/git/git/commit/1c4fb136dbad762c9c4350ee79c3474ae8037587)：

> ' `eval "$@"`' 创建了一个额外的 shell 解释层，这可能是向 git submodule foreach 传递多个参数的用户所不期望的：

```
 $ git grep "'"
 [searches for single quotes]
 $ git submodule foreach git grep "'"
 Entering '[submodule]'
 /usr/lib/git-core/git-submodule: 1: eval: Syntax error: Unterminated quoted string
 Stopping at '[submodule]'; script returned non-zero status. 
```

> 要解决此问题，如果用户传递了多个参数，`$@`请直接执行“”，而不是将其传递给`eval`.
> 
> 例子：
> 
> *   添加额外级别的引用时的典型用法是传递一个表示要传递给 shell 的整个命令的参数。
>     这不会改变这一点。
> *   可以想象有人将不可信的输入作为参数提供：

```
 git submodule foreach git grep "$variable" 
```

> 这目前导致了一个不明显的 shell 代码注入漏洞。
> 直接执行由参数命名的命令，就像在这个补丁中一样，修复它。

* * *

自 Git 2.21（2017 年第二季度）以来，您拥有[`git grep -e "bar" --recurse-submodules`](https://stackoverflow.com/a/41788645/6309)

# jquery - jQuery UI 对话框在关闭后不会重新打开

> ID：14846970
> 
> 赞同：0
> 
> 时间：2013-02-13T05:29:11.233
> 
> 标签：jquery, jquery-ui

这是我正在使用的代码：

```
jQuery(document).ready(function($) {
            $('.addNew').click(function(event) {
                event.preventDefault();
                openEditor(event);
            }); /* END ADD CLICK */

            $('.editLink').click(function(event) {
                event.preventDefault();
                openEditor(event);
            }); /* END EDIT CLICK */

            /* DEFINE THE EDITOR OPEN LATER */
            $('.viewer').dialog({
                fullscreen: true,
                show: "pulsate",
                width: $(window).width()-20,
                height: $(window).height(),
                autoOpen: false
            }); /* END OPEN EDITOR */

        }); /* END DOCUMENT READY */

        function openEditor(event) {
            jQuery(document).ready(function($) {
                $('.viewer').load(window.location.pathname + 'edit.php');
                var x =event.pageX - ( $(document).scrollLeft() - 100 );
                var y =event.pageY -$(document).scrollTop();
                $('.viewer').dialog('open');
            }); /* END DOCUMENT READY */
        } /* END OPENEDITOR FUNCTION */ 
```

对话框第一次打开得很好，但是如果我通过单击关闭按钮或点击退出来关闭对话框，它不会第二次打开。这是我在控制台中收到的错误消息：

```
TypeError: $(...).dialog is not a function
[Break On This Error]   
$('.viewer').dialog('open'); 
```

我最初没有使用 autoOpen: false ，我认为这是问题所在，但是当我改用这种方式时，它仍然给出了同样的错误。

有任何想法吗？

更新：

我一直在挖掘更多，它似乎是由 $('.viewer').load('filename'); 线。由于某种原因，这只允许查看器打开一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:38:43.763

我假设您正在重新尝试通过调用 openEditor 来启动对话框？如果是这种情况，请尝试删除对文档就绪的内部调用

```
function openEditor(event) {
    $('.viewer').load(window.location.pathname + 'edit.php');
    var x =event.pageX - ( $(document).scrollLeft() - 100 );
    var y =event.pageY -$(document).scrollTop();
    $('.viewer').dialog('open');
} /* END OPENEDITOR FUNCTION */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:49:26.573

我发现这是因为我在加载到 Viewer 类的页面上重新包含了 jQuery，所以我猜你不能重新包含 jQuery 库。

# c++ - C++ - 程序运行时不断更新 WxWidgets 值

> ID：14846983
> 
> 赞同：0
> 
> 时间：2013-02-13T05:29:45.977
> 
> 标签：c++, wxwidgets

我目前正在使用 WxWidgets 在 C++ 中编写一个小型 GUI 应用程序。

我有一个 wxStaticText 小部件，其中有一个值。

如何在程序运行时不断更新该值？

我尝试使用更新 UI 事件：

```
Connect(wxEVT_UPDATE_UI, wxUpdateUIEventHandler(MyFrame::Display)) 
```

虽然这会更新值，但它并不平滑，即值在更新之间“闪烁”，有什么办法可以停止这种闪烁并进行连续、平滑的更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:35:13.983

你的 CPU 利用率是多少？

看起来（据我从您发布的一小段代码中可以看出）您正在每秒多次重写整个显示器。不好！

如果您还没有在未向我们展示的代码中，最好***只***更新 wxStaticText 小部件标签，并且***仅***在值实际更改时更新。

# python - Python Date/Time Formatting

> ID：14846986
> 
> 赞同：3
> 
> 时间：2013-02-13T05:29:58.467
> 
> 标签：python, string, datetime, utc

I am working with an API that is returning a JSON string that contains the following date/time in it:

```
2013-03-14T14:15:23-07:00 
```

I get the date and the time, down to the second. But the last 5 characters are confusing me. I'm guessing that's a UTC offset. (mountain time) What i can't figure out how to do is to compare the above string to a date/time in python. The T is also throwing me off.

How do I encode a python date/time string to match the above?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:36:45.773

如果您使用该`python-dateutil`库（[https://crate.io/packages/python-dateutil/](https://crate.io/packages/python-dateutil/)），您可以将该值转换为`datetime`.

```
>>> dateutil.parser.parse('2013-03-14T14:15:23-07:00')
datetime.datetime(2013, 3, 14, 14, 15, 23, tzinfo=tzoffset(None, -25200)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:52:48.867

您正在查看[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)日期格式。您可以使用[包来解析它](https://stackoverflow.com/q/969285/298607)或自己做。

您可以使用 datetime.strptime 来解析：

```
>>> ts='2013-03-14T14:15:23-07:00'
>>> datetime.datetime.strptime(ts[0:-6],'%Y-%m-%dT%H:%M:%S')
datetime.datetime(2013, 3, 14, 14, 15, 23) 
```

然后只需添加/减去时间增量（对于“天真”对象）：

```
>>> datetime.timedelta(hours=int(ts[-6:-3]))
datetime.timedelta(-1, 61200) 
```

所以：

```
>>> d=datetime.datetime.strptime(ts[0:-6],'%Y-%m-%dT%H:%M:%S')+datetime.timedelta(hours=int(ts[-6:-3]))
>>> d
datetime.datetime(2013, 3, 14, 7, 15, 23) 
```

棘手的部分是 TZ 是可选的，无论您是添加/减去时间偏移还是在日期对象中设置时区。

# java - 用 Java 编写脚本，定期从网站请求数据

> ID：14846987
> 
> 赞同：5
> 
> 时间：2013-02-13T05:30:04.967
> 
> 标签：java, load, xmlhttprequest

我正在开展一个项目，该项目要求我使用加拿大边境巡逻队在其[网站](http://www.cbsa-asfc.gc.ca/bwt-taf/menu-eng.html)上提供的边境等待时间信息来构建等待时间分布的可视化表示。

我试图找到一种方法让 Java 脚本定期检查网站，并在几个不同的边境站（不是全部）提取信息。我想我会使用 XPath 来获取特定站点，但是如何定期加载网页？

（PS 我知道他们现在也有 Twitter 帐户，但他们每天更新一次，更具体地说，我想学习如何使用网站和 XPATH）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:34:48.437

使用 Java 中的 URL。创建 URL，然后使用其方法 .openConnection() 开始从网站读取。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

public class webVisitor {

    public static void main(String[] args) {

        URL url;

        try {

            url = new URL("http://seinfeldaudio.com");
            URLConnection conn = url.openConnection();

            BufferedReader buffRead = new BufferedReader(new InputStreamReader(conn.getInputStream()));

            String inputLine = "";

            while (inputLine != null){
                inputLine = buffRead.readLine();
                System.out.println(inputLine);
            }

        }
        catch (Exception e){

        }

    }

} 
```

更多信息在这里：[http ://www.mkyong.com/java/how-to-get-url-content-in-java/](http://www.mkyong.com/java/how-to-get-url-content-in-java/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T10:16:00.017

好的，我今天在工作上有一点时间，想给你一个帮助，然后写给你。对不起，这是我第一次解析网站时出现任何错误，我做了一些研究并决定为此使用 jSoup。

好的，这段代码将解析表格并用值系统出 3 列，您可以更改代码并根据需要构建它:)

你必须下载 jsoup jar[下载 jSoup](http://jsoup.org/download "下载 Jsoup")

```

`import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.Iterator;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

/**
 * 
 */
public class ParseWithJsoup{

    public static void main(String[] args) {

        URL url;

        try {

            url = new URL("http://www.cbsa-asfc.gc.ca/bwt-taf/menu-eng.html");
            URLConnection conn = url.openConnection();

            BufferedReader buffRead = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            StringBuffer buffer = new StringBuffer("");

            String inputLine = "";

            // Append the site in a buffer
            while (inputLine != null){
                inputLine = buffRead.readLine();
                buffer.append(inputLine);
            }

            Document doc = Jsoup.parse(buffer.toString());

            // Parse the table
            Element table = doc.select("table[class=bwt]").first();

            //Office elements iterator
            Iterator<Element> officeElements = table.select("td[headers=Office]").iterator();

            //Commercial Flow iterator
            Iterator<Element> comElements = table.select("td[headers=Com ComCanada]").iterator();

            //Travellers Flow iterator
            Iterator<Element> travElements = table.select("td[headers=Trav TravCanada]").iterator();

            // Iterate all elements through first element row for all columns
            while(officeElements.hasNext()){            
                System.out.println("Office: " + officeElements.next().text());
                System.out.println("Commercial Flow: " + comElements.next().text());
                System.out.println("Travellers Flow: " + travElements.next().text());
            }

        }
        catch (Exception e){
            System.out.println("Exc:"+e.getMessage());
        }
    }

}` 

`

            回答 #3

赞同：0

时间：2013-02-13T05:36:39.993

看起来像 Ajax 使用`setInterval("function()",x)` 

参考这个问题 -[重复 jQuery ajax 调用](https://stackoverflow.com/questions/5140939/repeat-jquery-ajax-call)

我还没来得及学习[node.js](http://nodejs.org/)但这看起来很适合它

            回答 #4

赞同：0

时间：2013-03-06T16:12:46.807

使用[DWR (Easy Ajax for Java)](http://directwebremoting.org/dwr/index.html)，通过将时间间隔设置为从您的 java 脚本调用 DWR 方法

```
setInterval(DWR function here , millisec, lang) 
```

在 Java 方法中，使用 java.net.URL 类根据需要读取和解析内容。

```

# mysql - JOIN - 排除第二个表中的所有值

> ID：14846994
> 
> 赞同：1
> 
> 时间：2013-02-13T05:30:29.930
> 
> 标签：mysql

我有两个表，并希望以排除第二个表中的所有值的方式将它们连接在一起。当我加入两个表时，我只需要表 1 中的值，而不需要两个表中的值或表 2 中的值。

我认为这可以通过 LEFT JOIN 或 LEFT OUTER JOIN 来完成，但我发现了一些奇怪的发现。

当我检查所有数据时，我有以下计数。

```
-- TOTAL LEADS: 10067
SELECT COUNT(*) FROM sold_leads AS sl 
WHERE sl.affiliate_id IN(1000,1001,1002,1033) 
AND sl.create_date >= '2013-1-1' 
AND sl.lead_type = 'AUTO'; 
```

但是，当我尝试仅查找表 1 中的值时，我发现了一个更高的数字，这是不可能的。

```
 -- How many had No suspension/dui, sr22, and <=2 accidents AND <=2 tickets: 13931
 SELECT COUNT(*) FROM sold_leads AS sl
 INNER JOIN drivers AS dr ON sl.lead_id = dr.lead_id
 LEFT OUTER JOIN duis AS duis ON sl.lead_id = duis.driver_id
 LEFT OUTER JOIN accidents AS ac ON sl.lead_id = ac.driver_id  
 WHERE sl.affiliate_id IN(1000,1001,1002,1033)
 AND sl.create_date >= '2013-1-1'
 AND dr.relationship_type = 'SELF'; 
```

总计数不可能少于我离开加入一些表并添加一些限制的计数。我究竟做错了什么。

另外，我知道我没有提供架构，但我将如何选择 <=2 事故。有一个带有 driver_id 的事故表，但我玩过 HAVING(COUNT(*)) 的不同变体并且没有运气。

帮助！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:42:54.030

排除连接通常具有将结果限制为在外部连接表中不匹配的条件：

```
SELECT COUNT(*) FROM sold_leads AS sl
INNER JOIN drivers AS dr ON sl.lead_id = dr.lead_id
LEFT OUTER JOIN duis AS duis ON sl.lead_id = duis.driver_id
LEFT OUTER JOIN accidents AS ac ON sl.lead_id = ac.driver_id  
WHERE sl.affiliate_id IN(1000,1001,1002,1033)
AND sl.create_date >= '2013-1-1'
AND dr.relationship_type = 'SELF'
-- these are the exclusion join tests:
AND duis.driver_id IS NULL AND ac.driver_id IS NULL 
```

@ConradFrix 的评论也很好；如果您在 中的`drivers`每行有 >1 行`sold_leads`，则可以获得乘法效果，因此最好返回`COUNT(DISTINCT sl.something)`某个*唯一*列的位置。

我也不太确定您的加入条件，您正在将 duis.driver_id 和 ac.driver_id 与 sl.lead_id 进行比较。但 dr.lead_id 也与 sl.lead_id 进行比较。这些条件中的一个或另一个不正确吗？当然，您比我更了解您的架构，但看起来列名不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:40:49.140

如果`drivers`, `duis`, 或`accidents`有不止一行相同`lead_id`，那么您的结果将有不止一行相同`lead_id`，并且您将增加总行数。您可能打算将此添加到您的 where 子句中：

```
AND     duis.lead_id IS NULL
AND     ac.lead_id IS NULL 
```

如果您只希望在or`sold_leads`中没有匹配的记录，那么使用和子查询可能会更清楚，而不是直接加入这些表。[您可以在这个问题](https://stackoverflow.com/q/1519272/4794)中看到一些示例和一些替代方案的讨论。`duis``accidents``NOT IN`

# iphone - 线性 iCarousel 中的页面在水平滚动时向上移动？

> ID：14846995
> 
> 赞同：0
> 
> 时间：2013-02-13T05:30:31.117
> 
> 标签：iphone, ios5, uiscrollview, icarousel

我正在使用 Linear 类型的 iCarousel 来实现分页。每个页面都可以在其位置垂直滚动。问题是当我开始水平滚动时，页面会向上移动。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:22:20.107

我认为您必须增加**委托中的****视图**大小

 **```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view 
```

或者**委托**中的**间距**

 **```
- (CGFloat)carousel:(iCarousel *)_carousel valueForOption:(iCarouselOption)option withDefault:(CGFloat)value 
```****

# c# - 仅在 IIS 中为 WCF 服务启用了 HTTPS，但 BasicHttpBinding 配置为禁用了安全性

> ID：14846996
> 
> 赞同：1
> 
> 时间：2013-02-13T05:30:31.080
> 
> 标签：c#, .net, wcf, iis-7

IIS 中 WCF 服务的绑定已配置为仅使用 HTTPS。web.config 中的端点声明使用的是 BasicHttpBinding。绑定配置已禁用安全性（安全性 = 无）。该服务可以通过 HTTPS 访问吗？

它似乎在客户端使用 BasicHttpBinding 并将安全模式设置为传输。我在想这个配置会抛出错误，但服务是否被正确访问？在这种情况下，IIS 是否覆盖了安全模式配置？