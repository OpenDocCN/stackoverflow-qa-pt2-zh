# StackOverflow 问答 15762000-15762999

# javascript - Firefox中奇怪的JS流

> ID：15762001
> 
> 赞同：1
> 
> 时间：2013-04-02T10:39:22.070
> 
> 标签：javascript, firefox, flow

我的JS代码如下

```
if (fileControl != NoFileMessage) {
    if (fileControl.val() != NoFileMessage) {
        var valid_extensions = /(.xlsx)$/i;
        if (!valid_extensions.test(fileControl.val())) {
            alert($("#txtInvalidFileFormatMsg").val());
            return false;
        }
...
    }
} 
```

在第一次执行期间，`alert`显示了，然后控件“跳回”到第一个`if`语句而不是继续`return false`执行，因此代码执行了两次并且`alert`显示了两次

因此，警告框会显示两次。关于如何解决这个问题的任何指示？它在其他浏览器中运行良好（包括 IE ！）

**更新：** 一些更深入的了解，这段代码被调用的`.change()`事件`<input type='file />'`

正如我之前所说，代码片段被执行了两次，在深入研究之后，我发现`.change()`事件被触发了两次。为什么这种情况只发生在 FX 中？

# indexing - hsqldb：我必须 ORDER BY 以确保选择顺序一致吗？

> ID：15762003
> 
> 赞同：2
> 
> 时间：2013-04-02T10:39:33.507
> 
> 标签：indexing, hsqldb

我有一张包含样本的表格。插入的样本已经按时间戳自然排序。

我的问题是——当我从表中选择时，我是否必须使用 ORDER BY 子句来确保获取的样本按时间戳排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:43:59.217

关系数据库中的行未***排序***（将它们想象成篮子中的球。哪个是“第一个”？）

获得一致排序结果的**唯一**方法（真的，*唯一*`ORDER BY`的）是使用.

您不能依赖连接的副作用，`group by`. `UNION`, 索引检索或类似的运算符。他们永远不会保证订单。DBMS 可以自由选择以它认为最快的顺序返回行，除非您指定`ORDER BY`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:39:36.140

如果 HSQLDB 表 T 有一个列 C 作为主键，或者在该列上有任何索引，

```
SELECT FROM T ORDER BY C 
```

将返回有序行而无需额外的 ORDER BY 处理。

如果 select 上有一个条件，它使用不同列上的索引，您仍然可以强制使用索引进行 ORDER BY：

```
SELECT FROM T WHERE <some condition> ORDER BY C USING INDEX 
```

但在这种情况下，如果将返回表的大部分行，则应仅使用 USING INDEX。否则最好让引擎使用其他索引以减少表扫描时间。

如果没有用于 ORDER BY 的索引，则忽略 USING INDEX。

# android - 使用 adb 备份/恢复？

> ID：15762004
> 
> 赞同：3
> 
> 时间：2013-04-02T10:39:36.247
> 
> 标签：android, backup, adb, restore, android-backup-service

我想使用`adb backup / restore`. 我`adb restore`用来恢复备份。但是我的问题经过一段时间的延迟后，机制恢复停止了。我希望我的恢复不要停止。如果可能的话，它会自动启动，并且不需要对我进行验证。用来`adb back up`获取我的backup.ab。然后我用`adb restore backup.ab`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-23T12:18:51.800

```
adb backup -apk -shared -all -f backup.ab 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T11:35:30.340

恢复时需要输入手机*备份时*的密码，因为备份是加密的。如果您没有输入正确的密码，`adb restore`将终止且不发出警告。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-10-08T03:55:49.827

这可能为时已晚 2 年，但如果您记得备份中使用的参数，请在执行`adb restore backup.ab`.

# sql - 对两个表使用 distinct 关键字

> ID：15762005
> 
> 赞同：1
> 
> 时间：2013-04-02T10:39:38.070
> 
> 标签：sql, sql-server-2008, distinct

我想使用 DISTINCT 关键字获取唯一值。我还有两张桌子。

表名：

*   (T1)Cand_details

    工作地点

*   (T2)requirement_details

    发帖地点

我想通过使用关键字 distinct 来选择这两个表值。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:42:32.620

```
select LocationOfWork
  from cand_details
 union
select Locationofposting
  from requirement_details; 
```

`UNION`运算符用于组合来自**多个 SELECT 语句**的数据。

在这种情况下，如果没有**ALL**关键字 ( `UNION ALL`)，则`UNION`运算符包含一个`DISTINCT`函数，该函数将为您提供两个表中的唯一位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:42:05.173

像这样的东西？

```
SELECT DISTINCT Locationofwork, Locationofposting FROM Cand_details, Locationofposting 
```

如果有，您应该将两个表与公共字段相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:45:27.247

```
Select Locationofwork as "LOC" 
From Cand_details 
UNION Select Locationofposting as "LOC" 
FROM requirement_details 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:42:29.723

是的，这很容易实现。您可以在 distinct ( ) 子句中封装任意数量的字段。

# android - Android eclipse项目坏了

> ID：15762006
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:39:40.763
> 
> 标签：android, eclipse, git

切换到我的发布分支后，项目缺少 gen 文件，因此我从 java 构建路径添加了 gen 文件。

现在资产和 res 文件夹显示为灰色包而不是文件夹，并且出现 res/values/ 丢失等错误。

如何在eclipse中返回标准的android项目结构？

是否有返回标准 Android 项目的标准方法。我已经厌倦了修复项目属性，我试图清理并重新启动 eclipse 它似乎某些项目元数据以错误的方式保存。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:46:20.107

/gen/ 文件夹在编译过程中自动生成。您应该将它和 /bin/ 以及 /.properties/ 包含到 .gitignore 中，以避免必须一直修复属性，并尽量减少存储在存储库中的不必要数据量。

# ruby-on-rails - 飞行狮身人面像 noMethodError => 未定义的方法“生成”

> ID：15762010
> 
> 赞同：1
> 
> 时间：2013-04-02T10:39:56.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sphinx, thinking-sphinx

我正在将我的网站推送到 heroku 并且遇到了飞行狮身人面像的问题。

我在开发中实现了一个有效的 Thinking-Sphinx 搜索功能。它工作得很好。我获得了飞行狮身人面像。但是，当我运行时：

```
heroku run flying-sphinx configure 
```

我收到以下错误消息：

```
Connecting to database specified by DATABASE_URL
/app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/lib/flying_sphinx/sphinx_configuration.rb:24:in `content': undefined method `generate' for #<ThinkingSphinx::Configuration:0x00000004648e90> (NoMethodError)
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/lib/flying_sphinx/sphinx_configuration.rb:8:in `upload_to'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/lib/flying_sphinx/cli.rb:32:in `configure'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/lib/flying_sphinx/cli.rb:20:in `block in run'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/lib/flying_sphinx/cli.rb:20:in `each'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/lib/flying_sphinx/cli.rb:20:in `all?'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/lib/flying_sphinx/cli.rb:20:in `run'
    from /app/vendor/bundle/ruby/1.9.1/gems/flying-sphinx-0.8.5/bin/flying-sphinx:5:in `<top (required)>'
    from /app/bin/flying-sphinx:19:in `load'
    from /app/bin/flying-sphinx:19:in `<main> 
```

以下是我使用的版本：

```
Rails 3.2.11
Thinking-Sphinx 3.0.2
Flying-Sphinx 0.8.5
MySQL2 0.3.12 
```

（我的数据库在 PostGresql 上运行 - MySQL2 仅用于 Sphinx）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T00:53:22.343

我已经在其他地方与 Laurent 一起解决了这个问题，但它的核心是：flying-sphinx 的 gem 版本（最高 0.8.5）不支持 Thinking Sphinx v3。我确实为此准备了一些东西，只是等待其他依赖项合并一些提交并发布他们自己的 gem 更新。

同时，您可以通过 git 使用最新最好的（这将适用于 v1/v2/v3 的 Thinking Sphinx 的最新版本）：

```
gem 'pusher-client',
  :git    => 'git://github.com/pat/pusher-ruby-client.git',
  :branch => 'catch-io',
  :ref    => '608cc28d1a'
gem 'flying-sphinx',
  :git    => 'git://github.com/flying-sphinx/flying-sphinx.git',
  :branch => 'master',
  :ref    => 'e1395e724a' 
```

如果您使用的是 Ruby 1.8.7，您还需要以下 gem 来覆盖标准库中 OpenSSL 的一些限制：

```
gem 'openssl-nonblock', '0.2.1' 
```

# php - .htaccess Mod Rewrite 'pretty ur'l to actual 不起作用

> ID：15762013
> 
> 赞同：0
> 
> 时间：2013-04-02T10:40:03.327
> 
> 标签：php, .htaccess, mod-rewrite

我试图让 htaccess 重写这个 url：

```
http://127.0.0.1/papercut3/article/post-title/ 
```

对此：

```
http://127.0.0.1/papercut3/article.php?p=post-title/ 
```

我当前的 .htaccess 是：

```
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^article/(\d+)*$ ./article.php?p=$1  
RewriteRule ^section/(\d+)*$ ./section.php?s=$1 
```

我的网址写在代码中：

```
http://127.0.0.1/papercut3/article/execution-call-for-cinema-killer/ 
```

我的问题是，当我单击链接时，我得到了这个：

```
Not Found

The requested URL /papercut3/article/syria-suffers-deadliest-month/ was not found on this server. 
```

我正在使用 WAMP，.htaccess 位于 /papercut3 目录的根目录中，其中包含所有核心文件。任何帮助将不胜感激！：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:48:44.420

如果你可以使用`.htaccess`文件，你希望它看起来像：

```
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^article/(.+)$ ./article.php?p=$1  
RewriteRule ^section/(.+)$ ./section.php?s=$1 
```

或者，您可以更具体地了解允许的内容，但您问题中的那个只允许 character `[0-9]`，这样它就会打开它，让相应的 PHP 文件进行检查/错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:42:17.323

您可能会在 apache 的日志文件中找到帮助，但我认为这与[`AllowOverride`](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)指令有关，必须设置为 None。

如文档中所述，您`AllowOverride`至少需要包含`FileInfo`.

**编辑**：顺便说一句，您的规则与您的任何网址都不匹配，因为您期望一个 int`\d`但不提供任何输入。

# graphviz - GraphViz 用点保持节点位置

> ID：15762014
> 
> 赞同：2
> 
> 时间：2013-04-02T10:40:03.450
> 
> 标签：graphviz

我知道有一些相关的问题，但我想知道是否有更好的解决方案来强制 graphviz 以定义的顺序保持节点位置。

这是我的问题：我有两个子图，每个子图有 5 个节点。每个节点都连接到另一个图的每个节点。我希望节点保持从 1-1 到 1-5 的顺序。但是graphviz总是把它们混在一起。

这是图表，我正在使用 DOT：

```
digraph G {
rankdir=LR;
ranksep=4.0;
subgraph cluster_1 {
rank=same;
label="Nr:1";
"1-1" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="1-1"];
"1-2" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="1-2"];
"1-3" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="1-3"];
"1-4" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="1-4"];
"1-5" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="1-5"];
}

subgraph cluster_2 {
rank=same;
label="Nr:2";
"2-1" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="2-1"];
"1-1" -> "2-1"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-2" -> "2-1"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-3" -> "2-1"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-4" -> "2-1"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-5" -> "2-1"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"2-2" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="2-2"];
"1-1" -> "2-2"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-2" -> "2-2"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-3" -> "2-2"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-4" -> "2-2"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-5" -> "2-2"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"2-3" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="2-3"];
"1-1" -> "2-3"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-2" -> "2-3"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-3" -> "2-3"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-4" -> "2-3"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-5" -> "2-3"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"2-4" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="2-4"];
"1-1" -> "2-4"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-2" -> "2-4"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-3" -> "2-4"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-4" -> "2-4"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-5" -> "2-4"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"2-5" [width=1, shape=circle, style=filled, fillcolor="#E3A869", label="2-5"];
"1-1" -> "2-5"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-2" -> "2-5"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-3" -> "2-5"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-4" -> "2-5"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
"1-5" -> "2-5"  [color=blue, labelfontcolor="#009933", fontsize="10.0", penwidth=1];
} 
```

![节点顺序错误](https://i.stack.imgur.com/WuFnI.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T19:03:46.303

使用一些**不可见边**对子图中的节点进行排序，**避免 LR 等级方向**及其怪癖，使用不影响可见蓝色节点连接的节点 ( )排名的**直边**( )，**应用默认样式**以最小化重复和重新排序图形标记让我得到以下信息：`splines=false``constraint=false`

 **```
digraph G {
    nodesep=4.0;
    splines=false;

    node[width=1, shape=circle, style=filled, fillcolor="#E3A869"];
    edge[style=invis];

    subgraph cluster_1 {
        label="Nr:1";
        "1-1" -> "1-2" -> "1-3" -> "1-4" -> "1-5";
    }

    subgraph cluster_2 {
        label="Nr:2";
        "2-1" -> "2-2" -> "2-3" -> "2-4" -> "2-5";
    }

    edge[style=solid, color=blue, penwidth=1, constraint=false];

    "1-1" -> "2-1";
    "1-2" -> "2-1";
    "1-3" -> "2-1";
    "1-4" -> "2-1";
    "1-5" -> "2-1";

    "1-1" -> "2-2";
    "1-2" -> "2-2";
    "1-3" -> "2-2";
    "1-4" -> "2-2";
    "1-5" -> "2-2";

    "1-1" -> "2-3";
    "1-2" -> "2-3";
    "1-3" -> "2-3";
    "1-4" -> "2-3";
    "1-5" -> "2-3";

    "1-1" -> "2-4";
    "1-2" -> "2-4";
    "1-3" -> "2-4";
    "1-4" -> "2-4";
    "1-5" -> "2-4";

    "1-1" -> "2-5";
    "1-2" -> "2-5";
    "1-3" -> "2-5";
    "1-4" -> "2-5";
    "1-5" -> "2-5";
} 
```

![graphivz 输出，子图节点使用不可见边排序](https://i.stack.imgur.com/Uxkpv.png)**

# iphone - UIView 动画 iOS，诡异

> ID：15762015
> 
> 赞同：2
> 
> 时间：2013-04-02T10:40:04.650
> 
> 标签：iphone, ios, objective-c, uiview, uiviewanimation

我可能正在做一些非常愚蠢的事情，但我无法弄清楚为什么这不起作用。

我正在尝试执行一个简单的 UIView 块动画，但遇到了麻烦。我在一个测试项目中重新创建了。

我在视图控制器上有一个视图，当我按下按钮时，我创建一个新视图并将其框架设置为当前视图之外（在其上方）。我想为过渡设置动画，以便当前屏幕上的视图向下移出视图，因为它上面的新视图下降以取代它的位置。

这是连接到按钮的代码，原始视图连接为`self.view1`

```
- (IBAction)buttonPressed:(id)sender {

    UIView *view2 = [[UIView alloc] init];
    view2.backgroundColor = [UIColor blueColor];
    float offScreenY = 0 - self.view1.frame.size.height;
    CGRect offScreenRect = CGRectMake(0, offScreenY, self.view1.frame.size.width, self.view1.frame.size.height);
    view2.frame = offScreenRect;
    [self.view addSubview:view2];

    float oldY = self.view1.frame.origin.y + self.view1.frame.size.height;
    CGRect oldRect = CGRectMake(0, oldY, self.view1.frame.size.width, self.view1.frame.size.height);

    [UIView animateWithDuration:0.5 animations:^{
        self.view1.frame = oldRect;
        view2.frame =  CGRectMake(0, 0, self.view1.frame.size.width, self.view1.frame.size.height);
    }];
} 
```

这只会使 view2 向下动画，而不会为 view 1 设置动画。

如果我不将视图 2 添加为子视图，并且仅将 view1 的帧更改放在动画块中，则 view1 会正确设置动画。

但他们不会一起工作！

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:30:25.897

这是打开自动布局的典型症状。如果您设置动画`frame`，它可以工作，但是一旦自动布局重新应用视图上的约束，`view1`它将返回到其原始位置。通过添加`view2`，iOS 会立即自动重新应用自动布局约束，`view1`因此您不会移动。

最重要的是，不要使用自动布局并尝试`frame`直接为属性设置动画。两种解决方案：

1.  简单的解决方案是关闭自动布局。转到 IB，选择“文件检查器”并取消选中“使用自动布局”按钮：

    ![在此处输入图像描述](https://i.stack.imgur.com/sq4H0.png)

2.  如果您想保持自动布局，您不应该通过`frame`直接更改属性来制作动画。您可以通过更改布局约束常量来制作动画。这已在 SO 的其他地方得到解答，但如果您需要有关该方法的指导，请告诉我。

    `IBOutlet`但是，基本思想是为被调用的顶部约束创建一个`view1`，例如，`view1TopConstraint`然后在您的动画块中您可以说

    ```
    self.view1TopConstraint.constant += self.view1.frame.size.height;
    [self.view layoutIfNeeded]; 
    ```

    但是，要使它起作用，您必须小心其他约束`view1`（例如，有高度约束，没有底部约束，或者如果有，则降低其优先级等）。第一次这样做可能会很麻烦，但是通过更改约束，您将很快掌握动画制作的窍门。

    但是，话又说回来，如果你使用约束，你可能不应该`view2`用它来定义`frame`，但也可能为此定义约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:52:16.897

在这种情况下，最好有一个容器视图。

相应地在此容器内添加 view1 和 view2。容器的某些部分将在屏幕中，容器的框架大小将是视图大小的两倍。动画容器，因此其他两个视图将相应地动画..

# iphone - 拆分 NSString 不起作用

> ID：15762020
> 
> 赞同：0
> 
> 时间：2013-04-02T10:40:11.003
> 
> 标签：iphone, objective-c, xcode, split

我见过可能谈论这个的话题，但没有一个对我有用。我正在尝试解析 GEORSS，并使用以下格式给我坐标：

```
<georss:point>4613618.31000115 676474.87007986</georss:point> 
```

因此，我尝试将其拆分为 NSArray，然后将它们分配给相应的 XML 键，但它总是因该错误而崩溃：

2013-04-02 12:33:11.234 GeoRss1[2125:c07] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]：索引 1 超出范围 [0 .. 0]” ***首先抛出调用堆栈：

(0x1959012 0x1275e7e 0x18fb0b4 0x19d23a8 0x3f48 0xd55a37 0x1c96600 0x1ca1a2b 0x1ca0f07 0xd53e02 0x34b8 0xd7b589 0xd79652 0xd7a89a 0xd7960d 0xd79785 0xcc6a68 0x14a1911 0x14a0bb3 0x14decda 0x18fb8fd 0x14df35c 0x14df2d5 0x13c9250 0x18dcf3f 0x18dc96f 0x18ff734 0x18fef44 0x18fee1b 0x18b37e3 0x18b3668 0x1b9ffc 0x1ddd 0x1d05) libc++abi.dylib: terminate called throwing an exception (lldb )

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    }else if([elemAct isEqualToString:@"georss:point"]){

        componentes = [[string componentsSeparatedByString:@" "] mutableCopy];
        if ( componentes != nil){

            [xmlLat appendString:componentes[0]];
            [xmlLon appendString:componentes[1]];
        }
     ...
 ... 
```

在该文件的标题中，我正确声明了两个变量并合成了它们：

```
...    
@property (strong) NSMutableString *xmlLat; 
@property (strong) NSMutableString *xmlLon;
... 
```

谢谢大家的进步，你们已经在其他主题上帮助了我一些回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:54:05.097

我尝试了以下代码：

```
NSString *abc = @"4613618.31000115 676474.87007986";
NSArray *componentes = [[abc componentsSeparatedByString:@" "] mutableCopy];
NSLog(@"componentes : %@",componentes);

NSMutableString *xmlLat = [[NSMutableString alloc]initWithString:@""];
NSMutableString *xmlLon = [[NSMutableString alloc]initWithString:@""];

[xmlLat appendString:componentes[0]];
[xmlLon appendString:componentes[1]];

NSLog(@"xmlLat : %@",xmlLat);
NSLog(@"xmlLon : %@",xmlLon); 
```

它对我来说非常有效。我认为问题是您没有在字符串中获得正确的数据。

# java - Netty 4 - 丢弃管道头部的出站消息

> ID：15762022
> 
> 赞同：0
> 
> 时间：2013-04-02T10:40:21.223
> 
> 标签：java, netty

我正在使用 Netty 4 RC1。我在客户端初始化我的管道：

```
public class NodeClientInitializer extends ChannelInitializer<SocketChannel> {

  @Override
  protected void initChannel(SocketChannel sc) throws Exception {
    // Frame encoding and decoding
    sc.pipeline()
      .addLast("logger", new LoggingHandler(LogLevel.DEBUG))

    // Business logic
      .addLast("handler", new NodeClientHandler());
  }
} 
```

NodeClientHandler 有以下相关代码：

```
public class NodeClientHandler extends ChannelInboundByteHandlerAdapter {
  private void sendInitialInformation(ChannelHandlerContext c) {
    c.write(0x05);
  }

  @Override
  public void channelActive(ChannelHandlerContext c) throws Exception {
    sendInitialInformation(c);
  }
} 
```

我使用以下方式连接到服务器：

```
 public void connect(final InetSocketAddress addr) {
    Bootstrap bootstrap = new Bootstrap();
    ChannelFuture cf = null;
    try {
      // set up the pipeline
      bootstrap.group(new NioEventLoopGroup())
        .channel(NioSocketChannel.class)
        .handler(new NodeClientInitializer());

      // connect
      bootstrap.remoteAddress(addr);
      cf = bootstrap.connect();
      cf.addListener(new ChannelFutureListener() {
        @Override
        public void operationComplete(ChannelFuture op) throws Exception {
          logger.info("Connect to {}", addr.toString());
        }
      });

      cf.channel().closeFuture().syncUninterruptibly();
    } finally {
      bootstrap.shutdown();
    }
  } 
```

所以，我基本上想做的是在通道处于活动状态（即连接成功）之后，从客户端向服务器发送一些初始信息。但是，在执行此操作时，`c.write()`我收到以下警告并且没有发送任何包裹：

```
WARNING: Discarded 1 outbound message(s) that reached at the head of the pipeline. Please check your pipeline configuration. 
```

我知道我的管道中没有出站处理程序，但我认为我不需要一个（此时），我认为 Netty 会小心地将 ByteBuffer 传输到服务器。我在管道配置中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:34:33.877

如果您写入 Channel，Netty 默认只处理 ByteBuf 类型的消息。所以你需要把它包装在一个 ByteBuf 中。另请参阅 Unpooled 类及其静态帮助程序以创建 ByteBuf 实例。

# android - 如何获取 TextView 的样式属性

> ID：15762025
> 
> 赞同：10
> 
> 时间：2013-04-02T10:40:25.323
> 
> 标签：android, textview, typeface

我正在创建一个自定义 TextView 类 MTextView 。在构造函数内部，我想知道 textview 的样式属性的值，以便我可以根据样式是否设置为粗体来设置不同的字体。但是没有 getStyle() 函数？该怎么办？

```
 public class MTextView extends TextView{

    public MTextView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            if(style.equals(TypeFace.bold))  //how to get style?
                setTypeface(Typeface.createFromAsset(getContext().getAssets(),"rc.ttf"));
    }

    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-02T10:41:53.643

您可以从 TextView 的`getTypeface()`实例方法中获取 textStyle。

```
int style = getTypeface().getStyle(); 
```

如果没有指定textStyle（即你想支持普通的textStyle），那么`getTypeface()`可以返回null。

在它不为空的情况下，最好假设 textStyle 被隐式设置为正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T23:27:48.967

使用此代码：

```
 if (attrs != null) {
        try {
            int style = attrs.getAttributeIntValue(
                "http://schemas.android.com/apk/res/android",
                "textStyle", 
                Typeface.NORMAL);

            setTypeface(Typeface.createFromAsset(
                            getContext().getAssets(), 
                            "rc.ttf"), 
                        style);
        }
        catch (Exception e) {
            Log.e(TAG, e.getMessage());
        }
    } 
```

# java - 以原始文件名下载文件

> ID：15762030
> 
> 赞同：36
> 
> 时间：2013-04-02T10:40:47.930
> 
> 标签：java, spring-mvc

在我的项目中，我正在上传一个文件。上传时，我将其原始文件名和扩展名保存在数据库中，并将该文件与`GUID`服务器上的一些文件一起保存，生成的 GUID 也与文件名和扩展名一起存储在数据库中。

例如-

- 上传文件名为 questions.docx

-然后 orignalFileName 将是“问题”

-FileExtension 将是“.docx”

-文件被上传，文件名为“0c1b96d3-af54-40d1-814d-b863b7528b1c”

上传工作正常..但是当我下载一些文件时，它会以文件名作为 GUID 下载，在上面的情况下它是“0c1b96d3-af54-40d1-814d-b863b7528b1c”。
如何下载具有原始文件名的文件，即“questions.docx”。

**添加代码**

```
 /**
     * code to display files on browser
     */
    File file = null;
    FileInputStream fis = null;
    ByteArrayOutputStream bos = null;

    try {
        /**
         * C://DocumentLibrary// path of evidence library
         */
        String fileName = URLEncoder.encode(fileRepo.getRname(), "UTF-8");
        fileName = URLDecoder.decode(fileName, "ISO8859_1");
        response.setContentType("application/x-msdownload");            
        response.setHeader("Content-disposition", "attachment; filename="+ fileName);
        String newfilepath = "C://DocumentLibrary//" + systemFileName;
        file = new File(newfilepath);
        fis = new FileInputStream(file);
        bos = new ByteArrayOutputStream();
        int readNum;
        byte[] buf = new byte[1024];
        try {

            for (; (readNum = fis.read(buf)) != -1;) {
                bos.write(buf, 0, readNum);
            }
        } catch (IOException ex) {

        }
        ServletOutputStream out = response.getOutputStream();
        bos.writeTo(out);
    } catch (Exception e) {
        // TODO: handle exception
    } finally {
        if (file != null) {
            file = null;
        }
        if (fis != null) {
            fis.close();
        }
        if (bos.size() <= 0) {
            bos.flush();
            bos.close();
        }
    } 
```

这段代码是完美的吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-02T10:53:33.260

您应该将原始文件名设置到响应标头中，如下所示：

```
String fileName = URLEncoder.encode(tchCeResource.getRname(), "UTF-8");
fileName = URLDecoder.decode(fileName, "ISO8859_1");
response.setContentType("application/x-msdownload");            
response.setHeader("Content-disposition", "attachment; filename="+ fileName); 
```

希望能帮到你：）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-02T10:50:50.127

您只需从数据库中获取 originalName 并将其设置在`Content-Disposition`标题中：

```
@RequestMapping("/../download")
public ... download(..., HttpServletResponse response) {
  ...
  response.setHeader("Content-Disposition", "attachment; filename=\"" + original + "\"");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:50:08.530

您可以在标题中设置文件名。

例如，您正在使用 RestFul Webservice，那么[ResponseBuilder](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Response.ResponseBuilder.html)可以像这样使用：

```
ResponseBuilder rsp = Response.ok("Your Content Here", "application/docx");    
rsp.setHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); 
```

内容类型和文件名都可以在运行时设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:20:17.333

嗨@Amogh 使用下面的代码

```
response.setHeader("Content-Disposition", "attachment; filename="+FILENAME+".docx"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-02T09:09:48.893

要在响应标头中使用当前日期命名文件，您可以使用以下代码：

```
final String Date_FORMAT = "dd/MM/yyyy"; 
Date currentDate = new Date();
SimpleDateFormat formatDate = new SimpleDateFormat(Date_FORMAT);
String datenew = formatDate.format(currentDate);

response.setContentType("application/pdf");//for pdf file
response.setHeader("Content-disposition","attachment;filename="+ datenew +"Smoelenboek.pdf"); 
```

Date_Format 可以是您想要的任何日期格式！！:)

```
enter code here 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-19T10:35:27.127

根据[RFC 5987对 Content-Disposition 进行编码](https://www.rfc-editor.org/rfc/rfc5987)

此代码可以处理非 ASCII 字符。部分代码是从 Spring Framework 复制而来的。

```
import java.nio.charset.Charset;
import org.springframework.http.HttpHeaders;
import org.springframework.util.Assert;

public class HttpHeadersExtended extends HttpHeaders {

    public static final String CONTENT_DISPOSITION_INLINE = "inline";
    public static final String CONTENT_DISPOSITION_ATTACHMENT = "attachment";

    /**
     * Set the (new) value of the {@code Content-Disposition} header
     * for {@code main body}, optionally encoding the filename using the RFC 5987.
     * <p>Only the US-ASCII, UTF-8 and ISO-8859-1 charsets are supported.
     *
     * @param type content disposition type
     * @param filename the filename (may be {@code null})
     * @param charset the charset used for the filename (may be {@code null})
     * @see <a href="https://www.rfc-editor.org/rfc/rfc7230#section-3.2.4">RFC 7230 Section 3.2.4</a>
     * @since 4.3.3
     */
    public void setContentDisposition(String type, String filename, Charset charset) {

        if (!CONTENT_DISPOSITION_INLINE.equals(type) && !CONTENT_DISPOSITION_ATTACHMENT.equals(type)) {
            throw new IllegalArgumentException("type must be inline or attachment");
        }

        StringBuilder builder = new StringBuilder(type);
        if (filename != null) {
            builder.append("; ");

            if (charset == null || charset.name().equals("US-ASCII")) {
                builder.append("filename=\"");
                builder.append(filename).append('\"');
            } else {
                builder.append("filename*=");
                builder.append(encodeHeaderFieldParam(filename, charset));
            }
        }
        set(CONTENT_DISPOSITION, builder.toString());
    }

    /**
     * Copied from Spring  {@link org.springframework.http.HttpHeaders}
     *
     * Encode the given header field param as describe in RFC 5987.
     *
     * @param input the header field param
     * @param charset the charset of the header field param string
     * @return the encoded header field param
     * @see <a href="https://www.rfc-editor.org/rfc/rfc5987">RFC 5987</a>
     */
    private static String encodeHeaderFieldParam(String input, Charset charset) {
        Assert.notNull(input, "Input String should not be null");
        Assert.notNull(charset, "Charset should not be null");
        if (charset.name().equals("US-ASCII")) {
            return input;
        }
        Assert.isTrue(charset.name().equals("UTF-8") || charset.name().equals("ISO-8859-1"),
            "Charset should be UTF-8 or ISO-8859-1");
        byte[] source = input.getBytes(charset);
        int len = source.length;
        StringBuilder sb = new StringBuilder(len << 1);
        sb.append(charset.name());
        sb.append("''");
        for (byte b : source) {
            if (isRFC5987AttrChar(b)) {
                sb.append((char) b);
            } else {
                sb.append('%');
                char hex1 = Character.toUpperCase(Character.forDigit((b >> 4) & 0xF, 16));
                char hex2 = Character.toUpperCase(Character.forDigit(b & 0xF, 16));
                sb.append(hex1);
                sb.append(hex2);
            }
        }
        return sb.toString();
    }

    /**
     * Copied from Spring  {@link org.springframework.http.HttpHeaders}
     */
    private static boolean isRFC5987AttrChar(byte c) {
        return (c >= '0' && c <= '9') || (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') ||
            c == '!' || c == '#' || c == '$' || c == '&' || c == '+' || c == '-' ||
            c == '.' || c == '^' || c == '_' || c == '`' || c == '|' || c == '~';
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-04T14:30:07.133

使用标题中的这一行，您可以设置文件的名称：

```
response.setHeader("Content-disposition", "attachment; filename="+ fileName); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-03T17:57:07.447

您还可以使用 ContentDisposition 构建器添加到 HttpHeaders 实例。

示例代码

```
InputStreamResource resource = new InputStreamResource(new FileInputStream(file));

            HttpHeaders httpHeaders = new HttpHeaders();
            httpHeaders.setContentDisposition(
                    ContentDisposition.builder("attachment")
                                      .filename(file.getName()).build());
            return ResponseEntity.ok()
                                 .contentLength(file.length())
                                 .contentType(MediaType.APPLICATION_OCTET_STREAM)
                                 .headers(httpHeaders)
                                 .body(resource); 
```

# node.js - 在 node.js 中处理 Accept 标头 restify

> ID：15762034
> 
> 赞同：0
> 
> 时间：2013-04-02T10:41:00.933
> 
> 标签：node.js, http, restify

我正在尝试通过使用如下方式正确处理 node.js/ [restify中 RESTful API 中的 Accept 标头。](http://mcavage.github.com/node-restify)`WrongAcceptError`

```
var restify = require('restify')
  ; server = restify.createServer()

// Write some content as JSON together with appropriate HTTP headers. 
function respond(status,response,contentType,content)
{ var json = JSON.stringify(content)
; response.writeHead(status,
  { 'Content-Type': contentType
  , 'Content-Encoding': 'UTF-8'
  , 'Content-Length': Buffer.byteLength(json,'utf-8')
  })
; response.write(json)
; response.end()
}

server.get('/api',function(request,response,next)
{ var contentType = "application/vnd.me.org.api+json"
; var properContentType = request.accepts(contentType)
; if (properContentType!=contentType)
  { return next(new restify.WrongAcceptError("Only provides "+contentType)) }
  respond(200,response,contentType,
  { "uri": "http://me.org/api"
  , "users": "/users"
  , "teams": "/teams"
  })
  ; return next()
});

server.listen(8080, function(){}); 
```

如果客户端提供正确的`Accept`标头或没有标头，则可以正常工作，如下所示：

```
$ curl -is http://localhost:8080/api
HTTP/1.1 200 OK
Content-Type: application/vnd.me.org.api+json
Content-Encoding: UTF-8
Content-Length: 61
Date: Tue, 02 Apr 2013 10:19:45 GMT
Connection: keep-alive

{"uri":"http://me.org/api","users":"/users","teams":"/teams"} 
```

问题是，如果客户端*确实*提供了错误的`Accept`标头，服务器将不会发送错误消息：

```
$ curl -is http://localhost:8080/api -H 'Accept: application/vnd.me.org.users+json'
HTTP/1.1 500 Internal Server Error
Date: Tue, 02 Apr 2013 10:27:23 GMT
Connection: keep-alive
Transfer-Encoding: chunked 
```

因为假定客户端不理解错误消息，它是 JSON 格式的，如下所示：

```
$ curl -is http://localhost:8080/api -H 'Accept: application/json'
HTTP/1.1 406 Not Acceptable
Content-Type: application/json
Content-Length: 80
Date: Tue, 02 Apr 2013 10:30:28 GMT
Connection: keep-alive

{"code":"WrongAccept","message":"Only provides application/vnd.me.org.api+json"} 
```

因此，我的问题是，我如何强制[restify](http://mcavage.github.com/node-restify)发回正确的错误状态代码和正文，或者我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:22:46.683

问题实际上是您返回的 JSON 对象的内容类型 ( `application/vnd.me.org.api+json`) 是 Restify 不知道的（因此会产生错误 `no formatter found`）。

你需要告诉 Restify 你的回复应该如何格式化：

```
server = restify.createServer({
  formatters : {
    '*/*' : function(req, res, body) { // 'catch-all' formatter
      if (body instanceof Error) { // see text
        body = JSON.stringify({
          code    : body.body.code,
          message : body.body.message
        });
      };
      return body;
    }
  }
}); 
```

`body instanceof Error`也是必需的，因为必须先将其转换为 JSON，然后才能将其发送回客户端。

该`*/*`构造创建了一个“包罗万象”的格式化程序，用于所有 Restify 无法自行处理的 mime 类型（该列表是、`application/javascript`和`application/json`）。我可以想象在某些情况下，包罗万象的格式化程序可能会带来问题，但这取决于您的确切设置。`text/plain``application/octet-stream`

# javascript - 如何以 YYYYMM 格式创建 Javascript 日期验证。？

> ID：15762042
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:41:31.787
> 
> 标签：javascript, validation, date

如何创建这样的 javascript 来检查格式 YYYYMM 的日期验证。并在以 YYYYMM 以外的任何其他格式输入日期时发出警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:51:12.843

使用[moment.js](http://momentjs.com/)：

```
 return moment(yourDate, 'YYYYMM').isValid() 
```

有关更多示例，请参阅[http://momentjs.com/docs/#/parsing/is-valid/](http://momentjs.com/docs/#/parsing/is-valid/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:45:09.173

您可以使用正则表达式来完成此操作（在检查多种日期格式时可能会非常复杂）。查看[此 SO 链接](https://stackoverflow.com/questions/14693298/js-check-for-valid-date-format)以获取更多信息。

处理日期的有用库是[XDate](http://arshaw.com/xdate/)（它不检查特定的日期格式！）。

您可以使用以下方法轻松检查日期是否有效`.valid()`：

```
var mydate = new XDate('2012-06-08', true);
if (mydate.valid()) {
    console.log('date is valid!');
} 
```

# javascript - JS数据服务加载所有数据或只需要数据

> ID：15762048
> 
> 赞同：0
> 
> 时间：2013-04-02T10:41:59.673
> 
> 标签：javascript, ajax, odata, datacontext

我正在开发一个按类别划分产品的网上商店。

可以说在每个类别中我都有 300 种产品。现在，如果我想通过 ajax（带有过滤和分页）展示这些产品，最好的方法是：

1.  拉出一个类别的所有产品，然后从内存中操作列表（用于过滤器和分页）？

2.  每次只提取需要的数据，这意味着每次我更改过滤器或移动到产品的不同页面（分页中）时，都会向服务器发送查询。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:01:07.670

如果您谈论少于 500 个项目的类别，最好在客户端操作它们。简单地用数据存储 json 对象并用模板渲染它。

# javascript - HTML - JavaScript onclick() 函数不起作用

> ID：15762056
> 
> 赞同：0
> 
> 时间：2013-04-02T10:42:19.643
> 
> 标签：javascript, html, javascript-events, onclick

我有 JavaScript 代码，包括几个函数，主要的是`CheckForm()`.

通过单击“提交”按钮调用该函数：

```
<td><input type="submit" name="submit1" id="submit1" value="Register" onclick="return CheckForm();"/></td> 
```

但是当按钮被按下时，什么也没有发生（该功能没有被执行）。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:49:03.187

您是否尝试过使用[FireBug](http://getfirebug.com/)或[jsFiddle](http://jsfiddle.net/)调试您的代码？

一些可能的原因是函数或函数调用名称不正确（请记住 JavaScript 区分大小写）、函数错误或页面中未引用 JavaScript 代码。

如果您没有使用上述任何一种工具，请尝试在您的函数中使用 console.log 或 alert 来查看它是否被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:46:49.373

你可以像这样使用它。

```
function CheckForm()
{
 //doing stuff
  return true;
}

<form id="formToCheck"></form>

$('#formToCheck').submit(CheckForm); 
```

希望能帮助到你

如果您想在没有 jquery 的情况下执行此操作，只需添加

```
 <form onSubmit="return CheckForm()"></form> 
```

您可以在此处阅读有关不使用 jQuery 的表单验证的更多信息 -> [http://www.w3schools.com/js/js_form_validation.asp#gsc.tab=0](http://www.w3schools.com/js/js_form_validation.asp#gsc.tab=0)

也许如果它不起作用，您会遇到一些错误。检查浏览器中的 JS 控制台并删除它们。

# php - 提取javascript方法调用的正则表达式

> ID：15762060
> 
> 赞同：1
> 
> 时间：2013-04-02T10:42:26.963
> 
> 标签：php, javascript, preg-match

我已经为 javascript 文件的翻译创建了字符串提取器。我找到了用作起点的 jsgettext 项目（[请参阅](http://code.google.com/p/jsgettext/)参考资料）。

它使用正则表达式来查找对`__()`javascript 文件中的方法的调用。成功找到了简单的调用，但没有找到带有参数`__('string', { a: 'b'})`的调用。

我尝试修改正则表达式以匹配带有参数的方法调用，但没有任何成功（我不是正则表达式专家）。

我的问题是：**如何修改以下正则表达式以匹配这样的字符串？**

```
// this is catched successfully 
// var string = __("Please enter %number% more characters.");

// this is problematic
var string = __("Please enter %number% more characters.", { '%number%' : 2 }); 
```

正则表达式：

```
 $keywords = join('|', array('__'));
 preg_match_all('# (?:' . $keywords . ') \(\\ *" ( (?: (?>[^"\\\\]++) | \\\\\\\\ | (?<!\\\\)\\\\(?!\\\\) | \\\\" )* ) (?<!\\\\)"\\ *\) #ix', $content, $matches, PREG_SET_ORDER); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:51:59.730

我不认为你真的需要匹配整个电话，如：

```
__("Please enter %number% more characters.", { '%number%' : 2 }); 
```

你只需要匹配：

```
__("Please enter %number% more characters.", 
```

其余部分保持不变，因为这些只是不应该成为数据库内翻译的一部分的参数。

[因此，在第81](https://code.google.com/p/jsgettext/source/browse/trunk/JSParser.php#81)行和第[89](https://code.google.com/p/jsgettext/source/browse/trunk/JSParser.php#89)行编辑正则表达式以完成`*(?:\)|,) #ix`而不是`*\) #ix`应该足够好。

# exception - grails webflow中的BadlyFormattedFlowExecutionKeyException

> ID：15762065
> 
> 赞同：2
> 
> 时间：2013-04-02T10:42:34.873
> 
> 标签：exception, grails, spring-webflow

当我更改地址栏中的执行参数值时，我收到 grails“BadlyFormattedFlowExecutionKeyException”异常！有谁知道如何处理此类异常？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T13:28:55.200

我有同样的问题。经过大量谷歌搜索后，我为每个流程制作了一个过滤器。并且在“之前”关闭中，我读取了 params.execution，如果 params.execution 不为空，我使用 getFlowStateName 函数测试状态：

[从过滤器访问流状态名称](https://stackoverflow.com/questions/15268603/accessing-flow-state-name-from-filter)

如果是无效状态（函数返回 null），我将重定向到流程的开头（重定向控制器：'xx'，动作：'yy'）。

最好的祝福！

# ios - Objective-C 等效于 Java 的 LinkedBlockingQueue

> ID：15762067
> 
> 赞同：0
> 
> 时间：2013-04-02T10:42:39.513
> 
> 标签：ios, objective-c, linked-list

我正在使用最新的 SDK 开发一个 iOS 应用程序，我必须`LinkedBlockingQueue`使用 Objective-C 实现一个。

我必须做这样的代码：

```
public boolean onEvent(final EventArgs e) {

    if (e.getClass() != this.eventType) return false;

    long now = android.os.SystemClock.uptimeMillis();

    long diff = now - this.last;

    final long threadExecutionTimeMs = now - lastThreadExecution;

    if (executions.remainingCapacity() == 0)
    {
        executions.poll();
    }

    executions.add(threadExecutionTimeMs);

   ...
} 
```

可能我可以使用`NSMutableArray`，但我不知道如何模拟阻塞等。

**有什么建议吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:11:51.323

没有等效的 AFAIK，您需要自己动手。

我想我可能会使用[dispatch semaphore](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW24)。

创建一个具有实例变量的类，该实例变量是队列中的项目列表（`NSMutableArray`可能是一个很好的候选者）。该类还应该有一个作为分派信号量的实例变量。在`-init`初始化数组和信号量时，初始计数为零。

创建两种方法，一种使元素入队，另一种使元素出队。添加元素*后*，入队还必须向信号量发出信号。在移除元素*之前*，出队必须等待信号量。

代码看起来像这样：

```
@implementation MyQueue
{
    NSMutableArray* myArray;
    dispatch_semaphore_t fd_sema;
}

-(void) enqueue (id) anObject
{
    @synchronized(myArray)
    {
        [myArray addObject: anObject];
    }
    dispatch_semaphore_signal(fd_sema);
}

-(id) dequeue
{
     dispatch_semaphore_wait(fd_sema, DISPATCH_TIME_FOREVER);
     id ret = nil;
     @synchronized(myArray)
     {
         ret = [myArray objectAtIndex: 0];
         [myArray removeObjectAtIndex: 0];
     }
     return ret;
} 
```

信号量有效地计算数组中对象的数量。 `dispatch_semaphore_signal()`增加信号量。 `dispatch_semaphore_wait()`递减信号量，除非它已经为零，在这种情况下，线程停止，直到有其他信号量发出信号。

对数组本身的访问是同步的，因为 a) 否则会在从队列中删除某些内容时出现竞争条件，并且 b) 我不会费心查找 NSMutableArray 是否是线程安全的。

# jquery - WooCommerce - t.product_variations 未定义

> ID：15762074
> 
> 赞同：1
> 
> 时间：2013-04-02T10:42:51.147
> 
> 标签：jquery, wordpress, woocommerce

我正在开发一个带有自定义主题的 WooCommerce 网站（复制模板等）

无论如何，在查看有变体的产品时，我看不到购物车按钮。做出选择后，不会出现购物车按钮。

有一个 JS 错误：`t.product_variations is undefined`.

所有变体均已正确设置。

我读过很多帖子说购物车按钮没有出现，但到目前为止似乎没有解决我的具体问题——也没有提到我的 JS 错误。这是我到目前为止所尝试的：

1.  检查了 wp_footer() 函数是否被调用（它是）
2.  删除了我自己的所有 JS 以避免可能的冲突（没有任何区别）
3.  确保所有产品选项都有价格等（尝试过和不尝试过）
4.  尝试禁用插件（仅使用了一个其他插件 - 高级自定义字段 - 没有区别）
5.  切换到默认主题“twentytwelve”。当我这样做时，**它确实有效**......

因此，切换主题向我表明我可能已经删除了某些内容或破坏了导致主题中出现此问题的某些内容，但我无法理解是什么或如何。

在撰写本文时，我正在使用最新的 WP 安装和最新的 WooCommerce 插件。

我真的很感激这方面的一些帮助！*任何*真正能引导我走上正确道路的事情。

非常感谢，米奇。

**错误截图：** ![在此处输入图像描述](https://i.stack.imgur.com/u1HXg.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:29:41.507

我已经找到了解决方法，但不确定它为什么起作用；这里适用于遇到类似问题的任何人。

将插件更新到最新版本后，我将插件的“添加到购物车”文件夹中的 5 个文件复制到我的 WooCommerce 模板的主题版本中，然后上传它们……这似乎解决了它。

基本上，我认为我的主题中的文件旨在覆盖核心 WooCommerce 模板，可能有一些旧代码破坏了变体逻辑。

换句话说，如果您要覆盖模板，请确保它们也是最新的以及插件文件本身。

**有问题的文件夹在这里：**

/wp-content/themes/my-theme/woocommerce/single-product/add-to-cart/

# java - 如何从 Android 中的不同活动调用方法

> ID：15762075
> 
> 赞同：1
> 
> 时间：2013-04-02T10:42:55.247
> 
> 标签：java, android

我有一个使用此方法动态创建按钮显示的应用程序

```
public void ButtonLayout() { 
    //Creates new layout and params to go with
    final LinearLayout llb = (LinearLayout)findViewById(R.id.buttonlayout);

    //Creates new buttons and indexes
    for(int i = 0; i < count; i++) {
        Button displayButton = buttonlist.get(i);
        //Adds button to view with index and parameters
        if(displayButton.getTag() == tag || tag == null){
            llb.addView(displayButton, i, lp);
        }
    }
} 
```

然后它会打开一个新的活动，它是一个菜单，菜单上有按钮，我希望能够从我的菜单活动中调用上述方法（重新加载所有按钮），我不能再次开始第一个活动。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:50:09.327

我会编写类或方法，在其中将依赖项注入到活动中并在那里处理您的工作

例如：

```
public class Util{    
pulic static void  doSomething(LinearLayout  llb, List<Buttons> buttonlist){
    llb.clear(); // pseudocode
    for(int i = 0; i < count; i++) {
        Button displayButton = buttonlist.get(i);
        //Adds button to view with index and parameters
        if(displayButton.getTag() == tag || tag == null){
            llb.addView(displayButton, i, lp);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:45:23.047

您可以编写一个具有此方法的父活动。需要使用此方法的其他活动，可以扩展此父活动，并且可以重用您在此处拥有的布局代码。

# c# - 如何使用 C# 在 asp.net 中的 executeReader() 中使用 executeScalar()

> ID：15762078
> 
> 赞同：0
> 
> 时间：2013-04-02T10:43:01.597
> 
> 标签：c#, asp.net, ado.net, sqlcommand

我收到错误：

> *“已经有一个打开的 DataReader 与此命令关联，必须先关闭它。”*

代码如下：

* * *

我正在使用 1 个表 & 在该表的每一行中生成动态表，我想从另一个表中求和计算，

我`readDr()`首先使用 sqlcommand "cmd" &调用了该表`ExecuteReader()`。
之后我调用`CalTotAmt(string CC)`了它使用 sqlcommand "cmdTotAmt" & `ExecuteScalar()`。
我已经使用了 2 diff sqlcommand 仍然给出错误。

```
protected void readDr()
{
        string str = "select CCNo,TotalAmt,NoOfRect,Energy,New1,Theft,Misc from ChallanTable;";
        cmd = new SqlCommand(str, con);
        rdr = cmd.ExecuteReader();      
}

protected void CreateChallanTable()
{
        table.Caption = "Challan Entry";
        table.ID = "Challan Entry";
        table.BackColor = System.Drawing.Color.Maroon;
        table.ForeColor = System.Drawing.Color.Gray;

        readDr();      //call to function readDr()

        Panel2.Controls.Add(table);

        for (i = 0; i < 1; i++)
        {
            row = new TableRow();
            row.BorderStyle = BorderStyle.Ridge;
            m = 0;
            while (rdr.Read())
            {
                row = new TableRow();
                row.ID = "Row" + m;
                row.BorderStyle = BorderStyle.Ridge;

                for (n = 0; n <= 6; n++)
                {
                    cell = new TableCell();
                    cell.ID = "cell" + m + n;
                    cell.BorderWidth = 5;
                    cell.BorderStyle = BorderStyle.Ridge;
                    //cell.BorderColor = System.Drawing.Color.Azure;
                    for (n = 0; n <= 0; n++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "lblCCRow" + m + n;
                        lbl.Text = Convert.ToString(rdr[0]);
                        lbl.Width = 70;
                        CCNo = lbl.Text;
                        // Add the control to the TableCell
                        cell.Controls.Add(lbl);
                    }

                    for (n = 1; n <= 1; n++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "lblTotAmt" + m + n;
                        lbl.Text = Convert.ToString(rdr[1]);
                        lbl.Width = 70;
                        TotAmt = Convert.ToDouble(lbl.Text);
                        // Add the control to the TableCell
                        cell.Controls.Add(lbl);
                        Label2.Text = Convert.ToString(CalTotAmt(CCNo));
                    }
                    for (n = 2; n <= 2; n++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "lblNoRect" + m + n;                            
                        lbl.Text = Convert.ToString(rdr[2]);
                        lbl.Width = 70;
                        NoofRects = Convert.ToDouble(lbl.Text);
                        // Add the control to the TableCell
                        cell.Controls.Add(lbl);
                    }
                    for (n = 2; n <= 2; n++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "lblEnergy" + m + n;
                        lbl.Text = Convert.ToString(rdr[3]);
                        lbl.Width =70;
                        Energy = Convert.ToDouble(lbl.Text);
                        // Add the control to the TableCell
                        cell.Controls.Add(lbl);
                    }
                    for (n = 3; n <= 3; n++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "lblNew" + m + n;
                        lbl.Text = Convert.ToString(rdr[4]);
                        lbl.Width =70;
                        NewSD = Convert.ToDouble(lbl.Text);
                        // Add the control to the TableCell
                        cell.Controls.Add(lbl);
                    }
                    for (n = 4; n <= 4; n++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "lblTheft" + m + n;
                        lbl.Text = Convert.ToString(rdr[5]);
                        lbl.Width = 70;
                        Theft = Convert.ToDouble(lbl.Text);
                        // Add the control to the TableCell
                        cell.Controls.Add(lbl);
                    }
                    for (n = 5; n <= 5; n++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "lblMisc" + m + n;
                        lbl.Text = Convert.ToString(rdr[6]);
                        lbl.Width = 70;
                        Misc = Convert.ToDouble(lbl.Text);
                        // Add the control to the TableCell
                        cell.Controls.Add(lbl);
                    }
                    row.Cells.Add(cell);
                }
                // Add the TableRow to the Table
                table.Rows.Add(row);
                //dr.NextResult();
                //outer for-loop end     
                m++;
            }
            rdr.Close();         
}

protected double CalTotAmt(string CC)
{
    double Total = 0;
    string str = "select Sum(Amount) from MainDataTable Where CC='" + CC + "' and BU ='" + LogInBU + "'";
    SqlCommand cmdTotAmt = new SqlCommand(str,con);
    Total = Convert.ToDouble(cmdTotAmt.ExecuteScalar());
    Label2.Text = Total.ToString();

    return Total;
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:48:31.310

在这里，您尝试在同一连接上同时打开多个记录集。您可以通过将 MultipleActiveResultSets=True 添加到连接字符串来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:20:00.583

您通常会通过编写一个一次性计算所有结果的查询来修复它 - 而不是强迫您的代码一遍又一遍地查询数据库。

就像是：

```
select CCNo,TotalAmt,NoOfRect,Energy,New1,Theft,Misc,SumTotal
from ChallanTable ct
      cross apply
     (select Sum(Amount) as SumTotal from MainDataTable Where CC=ct.CCNo) t 
```

然后你只需要处理结果。

（此外，您目前的显示代码中有一个错误 - 当 n==2 时，您有两次尝试做某事，第二次`for`永远不会输入）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:06:32.217

尝试修改您的代码，以确保 DataReader 正确关闭：

示例代码：

```
protected DataTable readDr()
{
        con.Open();
        string str = "select CCNo,TotalAmt,NoOfRect,Energy,New1,Theft,Misc from ChallanTable;";
        cmd = new SqlCommand(str, con);
        rdr = cmd.ExecuteReader();
        DataTable dt = new DataTable(); 
        dt.Load(rdr);
        rdr.Close();
        con.Close();
} 
```

# forms - 两种形式，其中第二种形式读取第一种形式

> ID：15762079
> 
> 赞同：0
> 
> 时间：2013-04-02T10:43:01.963
> 
> 标签：forms

我在一个带有两个按钮的页面上有两个几乎相同的表单，每个表单一个。现在我希望第二个按钮也可以从第一个表单的字段中读取数据并隐藏第二个表单的字段或没有它们。我怎样才能做到这一点？

第一种形式

```
<form:form id="excelform" commandName="tg35FormBackingModel" action="${createExcel}" method="post">
<div>
<table>
<tr>
<td class="tg35-left"><spring:message code="tg35.fromDate" />
<em title="<spring:message code='tooltip.mandatory' />"
class="mandatory float-right">*</em>
</td>
<td><form:input path="fromDate" cssClass="dateInput" /> <form:errors
cssClass="ui-state-error ui-corner-all" path="fromDate" />
</td>
</tr> 
```

...

# facebook - 为 Facebook API 生成页面/用户访问令牌，无需重定向

> ID：15762084
> 
> 赞同：0
> 
> 时间：2013-04-02T10:43:14.327
> 
> 标签：facebook, oauth-2.0, facebook-c#-sdk, facebook-oauth, facebook-rest-api

我正在尝试在我的应用程序中使用 Facebook Rest API。我想生成身份验证令牌并使用该生成可用于在页面上发布的页面访问令牌。当我完成身份验证过程时，我发现所有身份验证流程都使用重定向到主 Facebook 应用程序。我想要一个身份验证流程，我不必重定向来生成身份验证令牌和页面令牌。有没有办法做到这一点。

# objective-c - 在 OSX 中加密和解密数据

> ID：15762085
> 
> 赞同：1
> 
> 时间：2013-04-02T10:43:22.663
> 
> 标签：objective-c, macos, cocoa, encryption

我正在尝试使用此示例[https://developer.apple.com/library/mac/documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW9](https://developer.apple.com/library/mac/documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW9)，创建公钥/私钥并在加密一些数据之后。

> SecKeyRef publicKey = NULL; // 3
> 
> ```
> NSData * publicTag = [NSData dataWithBytes:publicKeyIdentifier
>                                     length:strlen((const char *)publicKeyIdentifier)]; // 4
> 
> NSMutableDictionary *queryPublicKey =
> [[NSMutableDictionary alloc] init]; // 5
> 
> [queryPublicKey setObject:(id)kSecClassKey forKey:(id)kSecClass];
> [queryPublicKey setObject:publicTag forKey:(id)kSecAttrApplicationTag];
> [queryPublicKey setObject:(id)kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
> [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnRef];
> // 6
> 
> status = SecItemCopyMatching
> ((CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKey); // 7 
> ```

在 iOS 上，这工作正常。

在 OSX 中，当我调用 SecItemCopyMatching (7) 时，我得到了这个。它是 Apple 提供的示例。我不知道出了什么问题，在 OSX 上查询的某些属性可能需要不同吗？

谢谢

> [NSConcreteData _fastCharacterContents]：无法识别的选择器发送到实例 0x1005440f0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:51:06.713

您正在 OS X 上尝试 iOS 示例代码，框架相似但不完全相同。

您可以通过删除 kSecClass 键来避免 _fastCharacterContents 选择器问题，即删除以下代码行，它修复了崩溃问题但无法正常工作

[queryPublicKey setObject:(id)kSecClassKey forKey:(id)kSecClass];

请参阅 Mac OS X 示例的此问题：Mac [上公钥加密/解密的示例代码？](https://stackoverflow.com/questions/4140664/sample-code-for-public-key-encryption-decryption-on-mac)

# windows-phone-7 - 如何在列表框中显示来自隔离存储的文件名？

> ID：15762087
> 
> 赞同：0
> 
> 时间：2013-04-02T10:43:27.543
> 
> 标签：windows-phone-7, c#-4.0, listbox, isolatedstorage

我正在开发一个应用程序，我必须在列表框中显示文件名，文件由用户创建并存储在使用隔离存储创建的目录中。我是 Windows Phone 编程的新手。我没有找到足够的资源来访问隔离存储文件？？？请帮忙

绑定到列表的代码：

```
private void bindList()
        {
           var  appStorage = IsolatedStorageFile.GetUserStoreForApplication();

            string[] fileList = appStorage.GetFileNames("/NotesForBible");

            listPicker1.ItemsSource = fileList;

       } 
```

添加文件的代码：

{

var appStorage = 隔离存储文件.GetUserStoreForApplication(); appStorage.CreateDirectory("NotesForBible");

```
 if (!appStorage.FileExists(fileName))
    {
        using (var file = appStorage.CreateFile("NotesForBible/" + fileName ))
        {
            using (var writer = new StreamWriter(file))
            {
                writer.WriteLine(fileContent);
            }
        }
        } 
```

我无法查看在列表框中创建的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:53:28.593

```
IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication(); 
```

要获取所有文件名的数组：

```
string directory = "whatever";
string[] filenames = store.GetFileNames(directory); 
```

欲了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.aspx)

# javascript - Ruby - 解析来自 URL 的 JSON

> ID：15762091
> 
> 赞同：2
> 
> 时间：2013-04-02T10:43:34.993
> 
> 标签：javascript, ruby, json, url

我正在使用 javascript 向 ruby​​ 发送一个 JSON 对象。但我无法在那里解析它。我尝试了以下东西，但没有运气。我也一直在寻找一段时间，但我找不到任何有用的东西。

请注意，我是非常新的红宝石。

我的试验：

```
def initialize(game_conf_json)        
    parsed_conf = JSON.parse(conf_json)
    @param1 = parsed_conf['name'][0]
    @param2 = parsed_conf['surname'][0]

    =begin
    I also tried this:
    @param1 = parsed_conf['name']
    @param2 = parsed_conf['surname']

    But no matter what other things I try, I'm getting the following error:
    "21:in `[]': can't convert String into Integer (TypeError)"

    OR

    "can't convert Array into String (TypeError), "

    =end

    File.open("some_direc/conf.json", "w") do |f|
        f.write(game_conf_json)
    end

end 
```

我像这样在javascript中创建json：

```
var json_of_form_vars = {};
json_of_form_vars.name = name_val;
json_of_form_vars.surname = surname_val; 
```

并以这种方式发送：

```
$.ajax({
    url: "../fundament/dispatch.rb/",
    type: "post",
    dataType: "json",
    data: "conf="+json_of_form_vars,
    ..... 
```

我怎么解决这个问题？是否有针对此问题的适当教程？

**UPDATE1（根据建议）：** 我使用 JSON.stringify 然后将对象传递给 ruby​​。然后我终于可以用 ruby​​ 打印对象了。它在下面列出：

```
{"name": "METIN", "surname": "EMENULLAHI"} 
```

方法 .class 声称它是一个数组。但我无法使用经典方式访问数据，例如：

```
array['name'] 
```

错误是：

> 无法将字符串转换为整数

当我尝试将它传递给`JSON.parse`in ruby​​ 时，它给了我以下错误：

> 无法将数组转换为字符串

所以我使用`JSON.parse(conf_array.to_json)`了，但是在访问数据时再次出现与数组相同的错误：

> 无法将字符串转换为整数

现在应该怎么办？

**UPDATE2** 这是我的 cgi 处理程序，它将 URL 参数传递到适当的位置：

```
cgi_req = CGI::new
puts cgi_req.header

params_from_request = cgi_req.params

logger.error "#{params_from_request}"

action_todo = params_from_request['action'][0].chomp

base = Base.new

if action_todo.eql?('create')
    conf_json = params_from_request['conf']
    # This line prints the json like this: {"name": "SOME_NAME", "surname": "SOME_SURNAME"}
    logger.error "#{conf_json}"
    base.create_ident(conf_json) 
end 
```

在基类中：

```
def create_ident(conf_json)
   require 'src/IdentityCreation'
   iden_create = IdentityCreation.new(conf_json)
end 
```

`IdentityCreation`的构造函数在上面列出。

**更新3：**

好的，我现在至少从数组中得到了一些东西。但是当我访问一个密钥时，它会显示密钥本身：

```
parsed_conf = JSON.parse(conf_json.to_json)
@param1 = parsed_conf[0]['name']
@param2 = parsed_conf[0]['surname']

# At this point when I print the @param1, it gives me "name"(the key), not "SOME_NAME"(the value). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:58:33.877

这里是解析 JSON 字符串的示例。如果仍有问题，请发布生成的 JSON 以便我们试用。

```
require 'json'
require 'ap'

string = %{
  {"configurations" : [ 
  { "drinks" : [
          {"menus" : [
            { "hot" : [
              {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 4},
              {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 6}
            ] },

            { "cold" : [
          {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 4},
              {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 6}
             ] },

            { "terminals" : { "id" : 4, "id": 6, "id": 7 } }, 

            { "keys" : { "debit" : "on", "credit": "off" }  }

          ] }
  ] } ] } 
}

hash = JSON.parse(string)
ap hash 
```

给

```
{
    "configurations" => [
        [0] {
            "drinks" => [
                [0] {
                    "menus" => [
                        [0] {
                            "hot" => [
                                [0] {
                                          "id" => 15,
                                        "unit" => "0.33",
                                       "price" => "1",
                                    "currency" => "Euro",
                                    "position" => 4
                                }, 
```

ETC..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:00:47.980

目前，您实际上并没有发布 json。您正在尝试发布包装在表单编码参数中的 json。此外，当你这样做

```
"conf=" + json_of_form_vars 
```

javascript 将为`json_of_form_vars`您转换为字符串，但该转换与转储为 JSON 不同。Javascript 默认字符串转换对于对象来说是非常无用的，因此您需要使用 JSON.stringify 来获取实际的 json。

由于您将正文编写为字符串文字，因此您还需要转义在此上下文中不允许（或具有特殊含义）的任何特殊字符。让 jquery 完成繁重的工作通常更容易，比如

```
$.ajax({
    url: "../fundament/dispatch.rb/",
    type: "post",
    dataType: "json",
    data: {conf: JSON.stringify(json_of_form_vars)} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:36:35.037

我终于解决了。使用在这篇文章下提出的所有建议，以及我在哈希、数组、json 等方面的 irb 经验。

因此，我没有将对象 ( `conf_json`) 转换为 json (with )，而是将其作为字符串`to_json`传递给，如下所示：`JSON.parse`

```
parsed_conf = JSON.parse(%{#{conf_json}}) 
```

这对我来说似乎有点奇怪，因为当尝试将它传递给下面的函数时，我得到了`can't convert Array into String`.

```
parsed_conf = JSON.parse(conf_json) 
```

但它现在就像一个魅力。

# javascript - setInterval() 函数的行为是否像线程？

> ID：15762097
> 
> 赞同：-3
> 
> 时间：2013-04-02T10:43:47.567
> 
> 标签：javascript, html

setInterval 中的代码是并行执行的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:46:20.530

不，不是的。在浏览器的 javascript 中，除非您使用[Web Workers](http://en.wikipedia.org/wiki/Web_worker)，否则只有一个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:50:39.617

不，它的行为不像线程。

发生的情况如下：

您执行以下内容：

```
setTimeout(function(){
    console.log("bar");
}, 10);
console.log("foo"); 
```

它将将该 setTimeout 参数中的函数添加到队列中，将执行“foo”的日志记录，然后将挖掘队列以查找接下来将发生的事件。

然后它将执行`console.log("bar");`

在内部它看起来像：

```
console.log("foo");
// waiting for 10 ms unless another event is getting fired
console.log("bar"); 
```

这是非常抽象的，但基本上会发生什么。

正如thejh 已经回答的那样，您搜索的是网络工作者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:50:49.240

它不会像您期望的从另一个线程分离时那样并行执行，但是它*是*异步的，因为回调不一定会以线性方式发生。

这对您有何影响，我们无法确定，因为您没有提供任何有关您的问题的有意义的信息或您为什么想要这个问题的答案。

# python - Neo4J 通过索引中的节点的最短路径

> ID：15762099
> 
> 赞同：1
> 
> 时间：2013-04-02T10:43:48.327
> 
> 标签：python, graph, neo4j, shortest-path, cypher

我目前正在使用这个 Cypher 查询来查找两个节点之间的最短路径：

```
START topic=node:cities(name='amsterdam'), top=node:categories(name='world')
MATCH p=shortestPath(topic-[*]->top)
RETURN p 
```

但是，我需要路径中的节点具有特定的属性，或者更好的是，在索引类别中。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:03:15.373

[那是更复杂的东西，您可能应该在https://github.com/neo4j/neo4j/tree/master/community/graph-algo/src/main/java/org](https://github.com/neo4j/neo4j/tree/master/community/graph-algo/src/main/java/org/neo4j/graphalgo/impl/shortestpath)查看遍历框架和 ShortestPath 的实现[/neo4j/graphalgo/impl/shortestpath](https://github.com/neo4j/neo4j/tree/master/community/graph-algo/src/main/java/org/neo4j/graphalgo/impl/shortestpath)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T16:15:46.697

可能是这样的

`START topic=node:cities(name='amsterdam'), top=node:categories(name='world') MATCH p=shortestPath(topic-[r]->top) WHERE HAS(r.PROPERTY) RETURN p`

其中 PROPERTY 是您要指定用于限制输出的任何属性

# android-layout - Android：更改布局主题保存在哪里？

> ID：15762100
> 
> 赞同：1
> 
> 时间：2013-04-02T10:43:51.230
> 
> 标签：android-layout, android-manifest, android-theme

我有两个问题：

**1**当我在eclipse上开发android应用程序时，我注意到在布局编辑器中有改变主题的能力，但我不知道这些修改保存在哪里。

**2**在 AndroidManifest.xml 中，当我为活动应用浅色主题时，它仍然是黑色的

*样式文件包含：*

```
<style name="NoActionBar" parent="android:Theme.Holo.Light.NoActionBar"></style> 
```

*清单文件包含：*

```
<activity
            android:name="com.example.myapp.MainActivity"
            android:theme="@style/NoActionBar"/> 
```

我很难弄清楚这些问题。

先感谢您

# phpstorm - 如何将方法传递给 PHPStorm 6 REST 客户端 Windows 工具

> ID：15762104
> 
> 赞同：0
> 
> 时间：2013-04-02T10:44:03.380
> 
> 标签：phpstorm

嗨（对不起我的英语），

我将使用新的工具窗口：PHPStorm 6 中的 REST Client，但我有一个小问题。

我写了我的肥皂网址，没关系，我检索了 xml 响应（查看[Heberger 图像 http://img15.hostingpics.net/thumbs/mini_529269screen1.png](http://www.hostingpics.net/viewer.php?id=529269screen1.png)）。之后我想调用方法：登录但我不知道它是如何工作的，如何将此方法传递给其余的 api。（查看[Heberger 图片 http://img15.hostingpics.net/thumbs/mini_696499screen2.png](http://www.hostingpics.net/viewer.php?id=696499screen2.png)）

xml响应是：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body><SOAP-ENV:Fault><faultcode>Sender</faultcode><faultstring>Invalid XML</faultstring></SOAP-ENV:Fault></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

感谢您的回复（以及对我糟糕的英语的更正：（）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:41:50.727

判断您的服务使用 SOAP 的响应，为什么这个客户端是为 REST 量身定制的。看看[Representational state transfer (REST) 和 Simple Object Access Protocol (SOAP)](https://stackoverflow.com/questions/209905/rest-and-soap)来了解其中的区别。

基本上要执行请求，您需要提供格式正确的请求正文（可能非常复杂）。

# jquery - 使用 jQuery 在 Firefox 插件中选中和取消选中 menuitem

> ID：15762106
> 
> 赞同：0
> 
> 时间：2013-04-02T10:44:05.237
> 
> 标签：jquery, firefox, firefox-addon, xul

`<menuitem type="checkbox" checked="true" label="Enabled">`我正在开发的 Firefox 插件中有一个元素。我正在使用 jQuery 设置和取消设置`checked`属性，如下所示：

```
var element = $("#extension-menupopup:first-child");
element.attr("checked", "false");
element.attr("label", "Disabled");
element.attr("tooltiptext", "Extension is disabled."); 
```

前两个`.attr()`调用似乎有效，但“启用”旁边的刻度线并没有消失，并且`label`不会变为“禁用”。验证 Scratchpad 的“浏览器上下文”上的值，这些值分别返回为“false”和“Disabled”。因此，属性的值已正确设置，但 UI 不会更新以显示这些更改。最后一行成功`tooltiptext`正确设置了文本，并且 UI 更改立即可见。我应该怎么做才能使更改在 UI 中可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:02:10.233

jQuery 似乎不适合这个特定目的，尽管它在其他情况下也能正常工作。改变`label`and`checked`属性的方法是使用普通的 javascript 方式：

```
//get the element that needs to be modified
var element = document.getElementById("extension-menupopup").childNodes[0];
element.setAttribute("checked", false);
element.setAttribute("label", "Disabled"); 
```

此外，请注意[此错误](https://bugzilla.mozilla.org/show_bug.cgi?id=15232)以避免任何陷阱。

# php - 如何计算条件语句的输出？

> ID：15762107
> 
> 赞同：0
> 
> 时间：2013-04-02T10:44:14.013
> 
> 标签：php, wordpress

我正在尝试计算我的 wordpress 网站上时间戳大于或等于今天的帖子数量。

我已将当前时间和发布时间戳放入两个变量中，并猜测它会开始：

```
if ($timestamp >= $curent_time) { 
```

还包括`count`也许`the_post()`

但我被困住了。我无法弄清楚如何将它组合在一起。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:50:11.907

您应该对您的帖子进行某种循环，然后增加条件内的计数器，例如：

```
$curent_time = date('d-m-Y'); //or whatever format date

$cont = 0;

//for each post
foreach($posts as $post){
    $timestamp = $post['timestamp'] // or whatever

    if ($timestamp >= $curent_time) {
        $cont++;
    }
}

echo $cont; 
```

# java - XStream(new StaxDriver()) 没有 XML 声明

> ID：15762109
> 
> 赞同：3
> 
> 时间：2013-04-02T10:44:17.660
> 
> 标签：java, xml, xml-parsing, xml-serialization

## 我的程序JAVA：

```
public static String toXml() {
KtpMessage ktpMessage =new KtpMessage();
ktpMessage.setdetails("test");
XStream xstream = new XStream(new StaxDriver());
String objectXml = xstream.toXML(ktpMessage);
return objectXml; 
```

* * *

结果是：

```
<?xml version='1.0' encoding='utf-8'?><myclasses.Message><details>test</details></myclasses.Message> 
```

我的问题：我想生成“objectXml”但没有`<?xml version='1.0' encoding='utf-8'?>` 我该怎么做？

我想要这个结果：

```
<myclasses.Message><details>test</details></myclasses.Message> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:30:38.330

如果您创建自己的[StaxWriter](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/StaxWriter.html)，则可以使用构造函数告诉它不要编写`startDocument`StAX 事件（这是创建 XML 声明的原因）。像这样（省略异常处理）：

```
StaxDriver drv = new StaxDriver();
XStream xstream = new XStream(drv);
StringWriter strWriter = new StringWriter();
StaxWriter sw = new StaxWriter(drv.getQnameMap(),
   drv.getOutputFactory().createXMLStreamWriter(strWriter),
   false, // don't do startDocument
   true); // do repair namespaces
xstream.marshal(ktpMessage, sw);
sw.close();
String objectXml = strWriter.toString(); 
```

# mysql - MySQL Like 查询逻辑

> ID：15762110
> 
> 赞同：0
> 
> 时间：2013-04-02T10:44:21.763
> 
> 标签：mysql, sql-like

我有一张这样的桌子；

```
|----------------------|
|field1    |   field2  |
|----------------------|
|1,2,3,0   |   area 1  |
|5,7,8     |   area 2  |
|10,6      |   area 3  |
|----------------------| 
```

我有这样的查询：

`select * from areas where field1 like '%0%'`

这个查询给了我`area 1`和`area 3`。但我只想得到`area 1`，因为 0 只在`area 1`. 我也试过`field1 like '0%'`了，但它没有给我排。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:45:54.090

[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的表格。这是解决这个问题的唯一好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:48:12.300

试试这个`Query`：

 ~~~~```
select * from areas where field1 like '%,0%' 
```~~ 

~~感谢**[OSSCube 解决方案](https://stackoverflow.com/users/1035257/osscube-solution)**~~

**编辑**

```
select * from areas where field1 like '0%' or field1 like '%,0%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:00:03.840

试试这个

```
 select * from areas where field1 like '%,0%'  or 
                              field1 like '%,0,%' or 
                              field1 like '0,%' 
```~~

# javascript - 如果使用Javascript匹配数组中任何值的任何字符，如何从数组中搜索数据

> ID：15762113
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:44:41.393
> 
> 标签：javascript, html, arrays

我正在使用以下代码来获取特定的索引值，但现在它会显示 a 但我希望它可以显示所有具有字符 a 的索引值就像我们搜索

```
 var con = document.getElementById('data');

    var char = 'a';
    var str = '';
    var ad = ['abc', 'a', 'call', 'all', 'ded', 'ee', 'aee'];
    var count = ad.filter(function (v) {
     return v == char;
    }).length;

   for (var i = 0; i < count; i++)
   str += char;

   alert(str);

   con.innerHTML = str; 
```

这是jsfiddel链接

[http://jsfiddle.net/Pescf/7/](http://jsfiddle.net/Pescf/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:52:05.397

鉴于字符位于字符串开头的新要求：

[http://jsfiddle.net/jeffshaver/Pescf/26/](http://jsfiddle.net/jeffshaver/Pescf/26/)

* * *

如果您需要跟踪当前数组元素，最好的方法可能是迭代整个数组，而不仅仅是数组中具有字符的元素数。

在 for 循环中，只需检查当前项目中是否包含字符：http: [//jsfiddle.net/jeffshaver/Pescf/13/](http://jsfiddle.net/jeffshaver/Pescf/13/)

* * *

我想我明白了...尝试替换`return v == char;`为`return v.indexOf(char) !== -1`. 目前 count 只等于 1，所以它不会做你想要的。改变它会导致计数等于 5，得到你想要的结果（我认为）。

`return v == char`不起作用的原因是因为您正在测试完整的字符串是否等于单个字符，该字符只存在一次。

相反，`indexOf`将检查字符串是否包含字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:59:06.927

像这样试试

```
var con = document.getElementById('data');
var char = 'a';
var str = '';
var ad = ['ali', 'bbc', 'call', 'a', 'd', 'eaa', 'ab'];
for (var i = 0; i < ad.length; i++)
  if (ad[i].indexOf(char) != -1)
      str += ad[i] + "<br/>";
con.innerHTML = str+'\n 
```

[看演示](http://jsfiddle.net/Dineshkani/Pescf/12/)

**更新**

请参阅下面的演示，为您提供搜索字符串，它显示为搜索引擎优化您的代码以方便您使用。

[演示 2](http://jsfiddle.net/Dineshkani/Pescf/29/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:03:21.233

试试下面的方法，它会帮助你...

**更新小提琴：http:** [//jsfiddle.net/Pescf/24/](http://jsfiddle.net/Pescf/24/)

```
var con = document.getElementById('data');
var char = 'a';
var str = '';
var ad = ['ali', 'bbc', 'call', 'a', 'd', 'eaa', 'ab'];
var len = ad.length;
for (var j=0; j<len; j++) {
    var str = ad[j];
    var n=str.indexOf(char);
        if (n==0) 
            con.innerHTML += str + "<br>";
    } 
```

它的输出如下...

```
ali
a
ab 
```

# angularjs - 处理 $resource 对象参数

> ID：15762116
> 
> 赞同：0
> 
> 时间：2013-04-02T10:44:46.163
> 
> 标签：angularjs

具有以下 $resource 服务：

```
myService.factory('Phones', function ($resource) {
    return $resource('/api/Phones', { phoneName: '@phoneName' }, {
        submit: { method: 'POST', },
    });
}); 
```

在返回的 $resource 对象上调用 submit 会将 phoneName 作为参数发布，例如 **`/api/Phones?phoneName=Nokia`**。但是，使用 GET 方法调用相同的资源对象也会使用未定义的 phoneName 参数，例如 **`/api/Phones?phoneName=undefined`**。

是否可以使用相同的 $resource 对象阻止 phoneName 出现在 GET 方法中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:44:12.387

尝试将您的服务更改为：

```
myService.factory('Phones', function ($resource) {
    return $resource('/api/Phones', {}, {
        submit: { 
          method: 'POST'
        }
    });
}); 
```

这样，您只需在“提交”操作上定义参数“电话名称”，而不是所有操作。

**编辑：**您不需要`phoneName`在 $resource 操作中定义为参数。

# wcf - 默认情况下，WCF 服务如何连接到端点？

> ID：15762118
> 
> 赞同：1
> 
> 时间：2013-04-02T10:44:55.137
> 
> 标签：wcf

我已经获得了一个代码库，其中 WCF 服务托管在 IIS 中。该项目使用开发服务器，但这并不重要。web.config 文件仅包含以下用于服务配置的部分：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

.svc 文件包含以下内容：

```
<%@ ServiceHost Language="C#" Debug="true" Service="TestApp.MySvcClass" CodeBehind="MySvcClass.svc.cs" %> 
```

MySvcClass 实现合同 (ISvcContract)。问题是，在 .NET 4 下，此配置有效。任何地方都没有任何声明可以建立合同和服务类型之间的联系，没有任何东西可以将行为与服务类型联系起来，没有终点声明，但它仍然有效。对于 .net 3.5，它不会。它抱怨配置。

WCF 服务项目配置的默认行为是什么？它记录在哪里？我可以强制这些类型的设置失败吗？

我没有时间测试，但如果我添加另一个 svc 文件，项目可能会发疯，因为单个服务可能会神奇地到位，但我宁愿不以智能方式处理配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:18:40.923

[开发人员对 Windows Communication Foundation 4 的介绍](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

阅读*简化配置*部分。它列出了默认端点、协议、绑定等。

# asp.net - 在 SignalR 中调用特定客户端

> ID：15762119
> 
> 赞同：1
> 
> 时间：2013-04-02T10:45:01.780
> 
> 标签：asp.net, signalr, signalr.client

我正在开发一个 SignalR 应用程序，其中一组 .NET 控制台客户端连接到 Web 服务器。如何使用 SignalR 从服务器调用特定客户端。

在我做的当前应用程序中，当我从服务器端单击按钮时。它触发所有控制台客户端。**但我想要触发的是保留 server.html 上的所有客户端信息并调用特定客户端。**

目前这是我的控制台应用程序

```
class Program
{
    static void Main(string[] args)
    {
        var connection = new Connection("http://localhost:65145/printer");

        //Establishing the connection
        connection.Start().ContinueWith(task =>
        {
            if (task.IsFaulted)
            {
                Console.WriteLine("Failed to start: {0}", task.Exception.GetBaseException());
            }
            else
            {
                Console.WriteLine("Success! Connected with client connection id {0}", connection.ConnectionId);
            }
        });

        //Reciveing data from the server
        connection.Received += data =>
        {
            Console.WriteLine("Receiving print request from server");
            Console.WriteLine(data);    
        };

        Console.ReadLine();
    }
} 
```

**这是服务器端。**

调用客户端的服务器 html

```
<script type="text/javascript">
        $(function () {
            var connection = $.connection('/printer');

          connection.received(function (data) {
              //$('#messages').append('<li>' + data + '</li>');
          });

          connection.start().done(function() { 
              $('#print').click(function () {
                  var printThis = { value: 113, reportId: 'Report', printer: '3rd Floor Lazer Printer', Copies: 1 };
                  connection.send(JSON.stringify(printThis));
              });
          });
      });
  </script> 
```

全球.asax

```
 protected void Application_Start(object sender, EventArgs e)
    {
        RouteTable.Routes.MapHubs();
        RouteTable.Routes.MapConnection<MyConnection>("printer", "/printer");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T17:05:43.247

该文档显示了如何执行此操作[https://github.com/SignalR/SignalR/wiki/PersistentConnection#sending-to-a-specific-connection](https://github.com/SignalR/SignalR/wiki/PersistentConnection#sending-to-a-specific-connection)

# html - 单选按钮上的白框，只有 chrome，不是所有网站

> ID：15762132
> 
> 赞同：3
> 
> 时间：2013-04-02T10:45:37.347
> 
> 标签：html, css, google-chrome, radio-button

编辑：这个问题已经解决了。@jerome.s 评论帮助我缩小搜索范围，阅读问题底部的编辑。

我发现一个问题不仅仅影响 Chrome（在 Chrome、Firefox、Safari、IE9/8/7 上测试），但真正让我抓狂的是它不会在所有网站上发生。

为无线电输入的容器提供背景会导致输入上出现一个小的白色背景框，但是任何 CSS 都没有添加此背景，我使用在 twitter 引导页面上找到的一些代码创建了一个小提琴：

小提琴描绘问题：http: [//jsfiddle.net/DMFca/1/](http://jsfiddle.net/DMFca/1/)

复制问题的替代代码：

```
<div style="background-color:lightblue">
  <input type="radio"/>
</div> 
```

我的 Chrome 上小提琴的结果（25.0.1364.172 和 26.0.1410.43）： ![在此处输入图像描述](https://i.stack.imgur.com/XxPBT.png)

问题是，在我向包含无线电输入的任何表单添加背景后，代码在引导站点 ( [http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms) )中的行为方式不同。我有一些其他网站不会发生此问题。

我尝试禁用所有影响收音机及其最近容器的 CSS 以尝试发现“修复”，但尽管没有应用 CSS，但它仍然表现不同（正确）。

一旦所有的 CSS 都被禁用，我将输入的计算样式与我自己的有问题的输入进行比较，它们完全相同，这让我相信它可能是 doctype、一些神奇的元标记或容器上的一些奇怪行为影响了输入，但也没有成功。

这个问题可以很容易地复制，而且我确实知道一些不会发生的情况（所以我假设有一个修复），但是我找不到它。相同的浏览器和（显然）相同的代码有不同的结果。

PS：我发现了一个关于 Chromium 的错误报告，描述了一个非常相似的行为，但相对较旧并且据说已修复

编辑：将 chrome 更新为 26.0.1410.43，问题仍然存在

EDIT2：在 iframe 之外查看小提琴似乎可以解决它，但我最初的问题仍然存在，将尝试再次复制问题并更新问题

EDIT3：在看到 iframe 导致了它自己的不同错误后，我专注于试图找出导致我原来问题的确切原因，我最终禁用了影响无线电输入及其所有父级的每条 css 规则，直到我找到罪魁祸首：

```
body {
  -webkit-backface-visibility: hidden
} 
```

这个对错误的“修复”（[Webkit 文本别名在 CSS3 动画期间变得很奇怪](https://stackoverflow.com/questions/11589985/webkit-text-aliasing-gets-weird-during-css3-animations)）导致了我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:57:21.523

在 mac 上的 chrome 上看起来不错...也许您可以尝试在输入元素上设置透明？

```
input {background: transparent;} 
```

[http://jsfiddle.net/DMFca/2/](http://jsfiddle.net/DMFca/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:17:38.780

尽管在 iframe 中显示无线电输入时似乎存在错误（如 jerome.s 所述），但我自己的问题是由修复 webkit 文本别名错误引起的：

```
body {
  -webkit-backface-visibility: hidden
} 
```

此“错误修复”可在此处找到：[Webkit text aliasing get Francis during CSS3 animations](https://stackoverflow.com/questions/11589985/webkit-text-aliasing-gets-weird-during-css3-animations)

删除此行后，问题就解决了，并且未检测到上面链接中确定的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T17:43:26.690

我曾经遇到过这个问题。那是……痛苦！

我的问题是不正确的溢出：隐藏应用在父级中。

尝试使用 Chrome 检查器将您的无线电节点逐级向上移动到根目录，因此当您看到它没问题时，这意味着问题位于您上次退出的父级别。

# prolog - swi序言解决

> ID：15762140
> 
> 赞同：0
> 
> 时间：2013-04-02T10:45:58.910
> 
> 标签：prolog, logic, swi-prolog, puzzle

我正在为 Windows 7 使用 SWI Prolog，我的一项任务是一个基本的逻辑难题。我们已经获得了一个单独问题的示例解决方案 - 包括它的源代码。

它的“它的一个领带”问题。但是我不知道如何使用 Solve:- 谓词获得结果。在查阅 .pl 文件后，我是否必须向控制台输入特定命令或类似的命令？

谢谢你的帮助。

源代码（我没有写这个代码）：

```
% Problem #1, "It's a tie", Dell Logic Puzzles, October 1999
% Each man (mr so-and-so) got a tie from a relative.
tie(cupids).
tie(happy_faces).
tie(leprechauns).
tie(reindeer).

mr(crow).
mr(evans).
mr(hurley).
mr(speigler).

relative(daughter).
relative(father_in_law).
relative(sister).
relative(uncle).

solve :-
tie(CrowTie), tie(EvansTie), tie(HurleyTie), tie(SpeiglerTie),
all_different([CrowTie, EvansTie, HurleyTie, SpeiglerTie]),

relative(CrowRelative), relative(EvansRelative),
relative(HurleyRelative), relative(SpeiglerRelative),
all_different([CrowRelative, EvansRelative, HurleyRelative, SpeiglerRelative]),

Triples = [ [crow, CrowTie, CrowRelative],
            [evans, EvansTie, EvansRelative],
            [hurley, HurleyTie, HurleyRelative],
            [speigler, SpeiglerTie, SpeiglerRelative] ],

% 1\. The tie with the grinning leprechauns wasn't a present from a daughter.
\+ member([_, leprechauns, daughter], Triples),

% 2\. Mr. Crow's tie features neither the dancing reindeer nor the yellow happy faces.
\+ member([crow, reindeer, _], Triples),
\+ member([crow, happy_faces, _], Triples),

% 3\. Mr. Speigler's tie wasn't a present from his uncle.
\+ member([speigler, _, uncle], Triples),

% 4\. The tie with the yellow happy faces wasn't a gift from a sister.
\+ member([_, happy_faces, sister], Triples),

% 5\. Mr Evans and Mr. Speigler own the tie with the grinning leprechauns
%    and the tie that was a present from a father-in-law, in some order.
( (member([evans, leprechauns, _], Triples),
   member([speigler, _, father_in_law], Triples)) ;

  (member([speigler, leprechauns, _], Triples),
   member([evans, _, father_in_law], Triples)) ),

% 6\. Mr. Hurley received his flamboyant tie from his sister.
member([hurley, _, sister], Triples),

tell(crow, CrowTie, CrowRelative),
tell(evans, EvansTie, EvansRelative),
tell(hurley, HurleyTie, HurleyRelative),
tell(speigler, SpeiglerTie, SpeiglerRelative).

% Succeeds if all elements of the argument list are bound and different.
% Fails if any elements are unbound or equal to some other element.
all_different([H | T]) :- member(H, T), !, fail.
all_different([_ | T]) :- all_different(T).
all_different([_]).

tell(X, Y, Z) :-
write('Mr. '), write(X), write(' got the '), write(Y),
write(' tie from his '), write(Z), write('.'), nl. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:12:11.317

查阅文件后，只需键入谓词的名称，括号中的参数（如果有的话），后跟一个句点。如果您的查询中有多个谓词，请用逗号分隔它们。在你的情况下（我称之为文件`solve.pl`）：

```
?- [solve].
% solve compiled 0.00 sec, 18 clauses
true.

?- solve.
Mr. crow got the cupids tie from his daughter.
Mr. evans got the leprechauns tie from his uncle.
Mr. hurley got the reindeer tie from his sister.
Mr. speigler got the happy_faces tie from his father_in_law.
true ;
false.

?- 
```

# hash - 雪崩的目的

> ID：15762151
> 
> 赞同：1
> 
> 时间：2013-04-02T10:46:35.550
> 
> 标签：hash, computer-science

我正在研究不同的哈希函数并遇到了[SuperFastHash](http://landman-code.blogspot.se/2009/02/c-superfasthash-and-murmurhash2.html)。该散列函数使用了一种称为“雪崩”的技术，其定义如下：

```
/* Force "avalanching" of final 127 bits */
hash ^= hash << 3;
hash += hash >> 5;
hash ^= hash << 4;
hash += hash >> 17;
hash ^= hash << 25;
hash += hash >> 6; 
```

雪崩的目的是什么？为什么要使用这些特定的位移步骤（3、5、4..）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:56:05.017

雪崩只是一个术语，用于定义对最终结果的输入的微小变化的“扩散”，对于不可逆性非常关键的加密散列，具有相似的输入提供真正不同的结果是避免近似攻击的理想特征单个哈希。[在http://en.wikipedia.org/wiki/Avalanche_effect](http://en.wikipedia.org/wiki/Avalanche_effect)查看更多信息

我看不出它为什么使用这些步骤，但它使用 AND 和 XOR 以及自己的移位结果来增加扩散，可能其他值会执行类似的操作，但这需要更深入的分析

# breeze - EntityKey 未定义错误

> ID：15762152
> 
> 赞同：0
> 
> 时间：2013-04-02T10:46:42.547
> 
> 标签：breeze

我用微风/杜兰达尔开发了一个 asp.net mvc 解决方案。

我想执行以下代码：

```
var entityKey = new EntityKey(entityNames.transport, transportId);
var query = EntityQuery.fromEntityKey(entityKey).expand("Sender.Country"); 
```

我收到以下错误：

`EntityKey is not defined`

我不知道为什么。

我可以执行以下代码：

```
var query = EntityQuery.from('Transports')
                       .where('id', 'eq', transportId)
                       .expand('Sender.Country')
                       .orderBy(orderBy.transport);

return manager.executeQuery(query)
        .then(fetchSucceeded)
        .fail(queryFailed); 
```

所以微风似乎正确安装。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:06:42.243

它应该是breeze.EntityKey，但为了更容易使用，我们通常在使用前将其分配一个较短的名称。IE

```
var EntityKey = breeze.EntityKey; 
```

您显然为 EntityQuery 做了类似的事情。

# php - 会话 + 另一个会话

> ID：15762153
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:46:48.250
> 
> 标签：php, operators, session-variables

我试过这个：

```
$_SESSION['fullname'] = $_SESSION['firstname'] + $_SESSION['surname'];

echo $_SESSION['fullname']; 
```

但它不起作用:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:47:59.003

你可能的意思是：

```
$_SESSION['fullname'] = $_SESSION['firstname'] . $_SESSION['surname'];
//                                             ^ 
```

要连接字符串，您应该使用`.`not `+`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:50:25.490

要组合字符串，请使用“。” 而不是 "+" $_SESSION['fullname'] = $_SESSION['firstname'] 。$_SESSION['姓氏'];

# maven - 在 felix 等 osgi 框架中创建 Bundle

> ID：15762155
> 
> 赞同：0
> 
> 时间：2013-04-02T10:46:49.960
> 
> 标签：maven, maven-2, osgi, apache-felix, osgi-bundle

我想创建一个简单的包作为 maven 项目。请让我知道我该怎么做。实际上我可以使用现有的 pom 创建一个包，但现在我不想这样做。我想像 mvn archetype:generate 一样从头开始制作它。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:30:16.797

PaxConstruct 就是为此而开发的。检查这个不错的[教程](http://www.jroller.com/habuma/entry/pax_construct_from_zero_to)

# utf-8 - UTF-8 网络服务中没有重音符号

> ID：15762156
> 
> 赞同：0
> 
> 时间：2013-04-02T10:46:51.647
> 
> 标签：utf-8

我正在开发一个用 C 语言编写并由 RedHat 6.3 主机托管的 Web 服务。框语言环境是 fr_FR.UTF-8。当我从命令行 curl 我的 web 服务时，我可以在命令行上读取包含重音符号的文本内容。但是，当我通过 Chrome 开发人员工具和网页输出检查 WS 输出时，重音符号被替换为包含询问标记的正方形。webservice输出的内容类型为application/json；字符集=utf-8。网页字符集为 utf-8，浏览器处于自动检测状态。我错过了什么无法正确显示 utf-8 的重音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:52:56.230

我通过检查重音内容的生成方式解决了这个问题。实际上我的是由 Postgresql 生成的，其配置参数 client_encoding 设置为 ascii，未将 client_encoding 更改为 'UTF8'，这解决了我的问题。

# icarousel - iCarousel 项目在滚动到其高度时消失？

> ID：15762157
> 
> 赞同：0
> 
> 时间：2013-04-02T10:47:01.130
> 
> 标签：icarousel

我已经编写了一个程序来在 iCarousel 中垂直滚动，项目看起来很好，但是当我滚动出 iCarousel 分配的宽度时，我在滚动时遇到了问题，就像项目消失一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:46:30.530

确保您告诉 iCarousel 使用以下选项使用足够的视图`iCarouselOptionVisibleItems`：

```
- (CGFloat)carousel:(iCarousel *)_carousel valueForOption:(iCarouselOption)option withDefault:(CGFloat)value
{
    //customize carousel display
    switch (option)
    {
        case iCarouselOptionVisibleItems:
        {
            return 11;
        }
        default:
        {
            return value;
        }
    }
} 
```

# jquery - 从单选按钮获取值并添加 url

> ID：15762162
> 
> 赞同：1
> 
> 时间：2013-04-02T10:47:39.153
> 
> 标签：jquery, url, radio-button

我有一个带有单选按钮的列表。当用户检查单选按钮时，它会获取单选按钮的值并将其添加到 url。如何完成此功能？以下是我的简单代码。但这不起作用。请帮助我，请。

```
<script type="text/javascript">
$(document).ready(function($){
    var val = $(':radio[name=rdo_1]:checked').val();
    $('#button').click(function(){
        document.location.href = 'http://localhost/test/val1.html';

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:50:13.870

你可以像这样发送参数

```
<script type="text/javascript">
$(document).ready(function($){
    var val = $(':radio[name=rdo_1]:checked').val();
    $('#button').click(function(){
        document.location.href = 'http://localhost/test/val1.html?radio_button_value='+val

    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:53:36.683

您希望按钮单击处理程序中的 var 分配。如果不这样做，它将在加载时分配，任何更改都不会影响功能。

```
$(function() {
    $('#button').click(function(){
        var val = $(':radio[name=rdo_1]:checked').val();
        document.location.href = 'http://localhost/test/val1.html?radio_button_value=' + val
    });
}); 
```

注意：我还使用了 document ready 的速记版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:00:36.353

尝试以下

```
<script type="text/javascript">
$(document).ready(function($){

    $('#button').click(function(){
        var val = $('input[type=radio][name=rdo_1]:checked').val();
        var url="http://localhost/test/"+val+".html";
        window.location.href = url;

    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:51:39.210

使用`<input type="submit"/>`附带`<form method="get"> </form>`

示例如下所示。

但不要忘记添加名称字段

```
<form action="http://localhost/test/val1.html?" method="get" name="f">
    <input type="text" name="user" />
    <input type="checkbox" name="name1" />
    <input type="submit" class="login_button" value="LOGIN">
</form> 
```

最好不要使用 javascript

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:51:55.083

```
$(document).ready(function($){
      $('#button').click(function(){
          var val = $(':radio[name=rdo_1]:checked').val(); 
          document.location.href = 'http://localhost/test/val1.html?radio='+val; 
      });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T10:52:23.650

jQuery：

```
$('input[@name="NAME"]:checked').val(); 
```

javascript:

```
var radios = document.getElementsByName('NAME');

for (var i = 0, length = radios.length; i < length; i++) {
if (radios[i].checked) {
    alert(radios[i].value);
}
} 
```

# c# - C# Getting Serial Port In use 错误，不明白为什么

> ID：15762163
> 
> 赞同：2
> 
> 时间：2013-04-02T10:47:45.130
> 
> 标签：c#, printing, resources, serial-port

基本上我需要与一个`COM serial printer`. 有 2 个计时器，一个会一次打印一张票，另一个会挂机检查错误并在错误消失后恢复打印。

例如：打印机正在打印，但如果我按下暂停按钮，一个错误（在缓冲区中读取）将使一些布尔值变为 1，在我读取它们之后，我能够判断错误是什么并停止打印。

我的问题出`ErrorTimer_Elapsed()`在计时器已用事件的方法中，并且可能与 ErrorCheck 和 SendToCom （这是打印方法）相关联。问题是程序可以很好地检测错误，但是当`ErrorTimer_Elapsed()`我尝试重复检查错误状态更改时，我会收到如下 IO 错误：

-无法访问 COM PORT -您需要的资源正在使用中

等等。

你能帮助我吗？谢谢，这是代码（大约 180 行），从 3 天以来我一直在努力解决这个问题 :( :

```
using System;
using System.Collections;
using System.Configuration;
using System.IO;
using System.IO.Ports;
using System.Windows.Forms;

namespace WindowsFormsApplication3
{
    public partial class Form1 : Form
    {

        #region Variabili di istanza

        private ArrayList _filesToPrint = new ArrayList();  
        private static SerialPort _serialPort1 = new SerialPort();  
        private string _portName = ConfigurationSettings.AppSettings["COM"];    
        private string FilesPath = ConfigurationSettings.AppSettings["Path"];   
        private System.Timers.Timer PrintTimer = new System.Timers.Timer(2000);
        private System.Timers.Timer ErrorTimer = new System.Timers.Timer(3500); 
        private bool PrintTimerIsActive = true; 
        private string HsCOMerrorStrings, PrintErrors;  

        #endregion

        public Form1() 
        {
            _serialPort1.PortName = _portName; 
            _serialPort1.ReadTimeout = 1000;
            _IfFileExistsPrint();
        }

        private void _IfFileExistsPrint()
        {
            foreach (string file in Directory.GetFiles(FilesPath))
                _filesToPrint.Add(file); 

            FileSystemWatcher SysWatch = new FileSystemWatcher(FilesPath, "*.*");
            SysWatch.Created += new FileSystemEventHandler(SysWatch_Created);
            SysWatch.EnableRaisingEvents = true;

            PrintTimer.Elapsed += new System.Timers.ElapsedEventHandler(Timer_Elapsed);
            PrintTimer.Start();

            ErrorTimer.Elapsed += new System.Timers.ElapsedEventHandler(ErrorTimer_Elapsed);
        }

        private void SysWatch_Created(object Sender, FileSystemEventArgs w)
        {
            _filesToPrint.Add(w.FullPath);
        }

        private void Timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            if (_filesToPrint.Count > 0 && PrintTimerIsActive)
            {
                PrintTimer.Stop();  
                SendFilesToCom(_filesToPrint[0].ToString());
                MessageBox.Show("Printing file :" + _filesToPrint[0].ToString());
                File.Delete(_filesToPrint[0].ToString());   
                _filesToPrint.RemoveAt(0);  
                _filesToPrint.TrimToSize(); 
                Console.Write(HsCOMerrorStrings);
                PrintTimer.Start(); 

                PrintErrors = ErrorCheck(HsCOMerrorStrings);
            }
        }

        private void ErrorTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs d)
        {
            if (!_serialPort1.IsOpen)
            {
                try
                {
                    _serialPort1.Open();
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Data);
                }
            }

            try
            {
                HsCOMerrorStrings = _serialPort1.ReadExisting();
                _serialPort1.Close();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Data);
            }
            Console.WriteLine(ErrorCheck(HsCOMerrorStrings));
        }

        private string ErrorCheck(string COMHostStatusReturn)
        {
            string ErrorsReturn = System.String.Empty;
            string[] COMCode = COMHostStatusReturn.Split(',');

            if (COMCode[1] == "1") { ErrorsReturn += "Carta Esaurita" + Environment.NewLine; }
            if (COMCode[2] == "1") { ErrorsReturn += "Stampante in Pausa" + Environment.NewLine; }
            if (COMCode[5] == "1") { ErrorsReturn += "Memoria Stampante Esaurita" + Environment.NewLine; }
            if (COMCode[9] == "1") { ErrorsReturn += "Memoria RAM corrotta" + Environment.NewLine; }
            if (COMCode[10] == "1") { ErrorsReturn += "Temperatura troppo bassa" + Environment.NewLine; }
            if (COMCode[11] == "1") { ErrorsReturn += "Temperatura troppo alta" + Environment.NewLine; }

            if (COMCode[7] == "1") { ErrorsReturn += "Partial Format Flag" + Environment.NewLine; }

            if (ErrorsReturn != System.String.Empty)    
            {

                if (PrintTimerIsActive == true)         
                {
                    PrintTimer.Stop();                  

                    if (!ErrorTimer.Enabled)             
                        ErrorTimer.Start();             

                    MessageBox.Show(ErrorsReturn);      
                }
                PrintTimerIsActive = false;             
            }
            else                                        
            {                                   
                if (PrintTimerIsActive == false)        
                {
                    ErrorTimer.Stop();                  
                    PrintTimer.Start();                 
                    PrintTimerIsActive = true;          
                }
            }

            return ErrorsReturn;
        }

        private void SendFilesToCom(string filePath)
        {
            if (!_serialPort1.IsOpen)
            {
                try
                {
                    _serialPort1.Open();
                }
                catch (Exception ex)
                {
                }
            }
            try
            {
                using (System.IO.TextReader reader = File.OpenText(filePath))
                {
                    string line;
                    while ((line = reader.ReadLine()) != null)
                    {
                        _serialPort1.WriteLine(line);
                    }

                    HsCOMerrorStrings = _serialPort1.ReadLine();
                    reader.Close(); 
                    _serialPort1.Close();
                }
            }
            catch (Exception ex)
            {
            }
        }
    }
} 
```

# c++ - OpenCV：如何检查 SparseMat 中是否存在元素

> ID：15762174
> 
> 赞同：0
> 
> 时间：2013-04-02T10:48:33.070
> 
> 标签：c++, opencv, sparse-matrix

我正在使用`SparseMat`of`CV_32FC3`并正在尝试执行以下操作：

```
int dims = 2;
    int size[] = {10,10};
    SparseMat m = SparseMat(dims, size, CV_32FC3);
    m.ref<Vec3f>(2,5)[0] = 0.5;
    m.ref<Vec3f>(2,5)[0] = 0.5;
    m.ref<Vec3f>(2,5)[0] = 0.5;

    if(m.find(2,6) == m.end()){
        cout << " could not find 2,6" << endl;
    }
    if(m.find(2,5) != m.end()){
        cout << "found 2, 5" << m.ref<Vec3f>(2,5)[0] << ", " << .ref<Vec3f>(2,5)[1] << ", " << .ref<Vec3f>(2,5)[2] << endl;
    } 
```

但是，查找部分不正确，我如何使用它来检查该索引处的元素是否已添加到稀疏垫中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T08:09:35.403

根据[SparseMat::ptr](http://www.docs.opencv.org/modules/core/doc/basic_structures.html#sparsemat-ptr)的定义：

```
C++: uchar* SparseMat::ptr(int i0, int i1, bool createMissing, size_t* hashval=0) 
```

> 返回指向矩阵元素的指针。如果元素存在（非零），则返回指向它的指针。**如果它不存在并且 createMissing=false，则返回 NULL 指针。**如果它不存在并且 createMissing=true，则创建新元素并用 0 初始化。返回指向它的指针。如果可选的 hashval 指针不为 NULL，则不计算元素哈希值，而是采用 hashval。

所以在你的代码中

```
m.find(2,6) == m.end()
m.find(2,5) != m.end() 
```

应该

```
m.ptr(2,6,false) == NULL
m.ptr(2,5,false) != NULL 
```

# c++ - C++11 智能指针和多态性

> ID：15762176
> 
> 赞同：11
> 
> 时间：2013-04-02T10:48:38.217
> 
> 标签：c++, polymorphism, smart-pointers

我正在使用 c++11 智能指针重写应用程序。

我有一个基类：

```
class A {}; 
```

和一个派生类：

```
class B : public A {
  public:
  int b;
}; 
```

我有另一个类，其中包含一个带有 A 或 B 对象的向量：

```
class C {
  public:
  vector<shared_ptr<A>> v;
}; 
```

我用 A（基类）对象构造 C 没有问题，但是如何用 B（派生类）对象填充它？

我正在尝试这个：

```
for(int i = 0; i < 10; i++) {
    v.push_back(make_shared<B>());
    v.back()->b = 1;
}; 
```

编译器返回：error: 'class A' has no member named 'b'</p>

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T11:00:18.613

> 但是如何用 B（派生类）对象填充它？

您正在用（指向）`B`对象的方式填充它。但是，指针的静态类型是指基类`A`，因此您不能直接使用它们来访问派生类的任何成员。

在您的简单示例中，您可以简单地保留一个指向`B`并使用它的指针：

```
std::shared_ptr<B> b = make_shared<B>();
b->b = 1;
v.push_back(b); 
```

如果您无法访问原始指针，那么您将需要某种多态性：

*   `static_cast<B*>(v.back().get())` **如果**您知道所有对象都有类型，请使用`B`
*   如果对象可能具有不同的类型，则使用虚函数或`dynamic_cast`（需要基类包含虚函数才能工作）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T10:51:54.250

```
for(int i = 0; i < 10; i++) {
    auto bptr = make_shared<B>();
    v.push_back(bptr);
    bptr->b = 1;
}; 
```

# scala - LinkedList：迭代和删除元素

> ID：15762177
> 
> 赞同：1
> 
> 时间：2013-04-02T10:48:38.360
> 
> 标签：scala, iterator, iteration

在 Scala 中，在遍历 LinkedList 的元素时，我想要一些方法 remove() 删除当前元素并且（非常重要）使迭代器指向下一个元素（或者如果当前元素是第一个元素，则指向第一个元素最后一个；如果没有更多元素，则为 null 或其他内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:50:55.570

不确定这是否是您想要的，但如何：

```
@annotation.tailrec
def round(xs: Set[(Int, Int)]) = {
    // here you might check if items are exhausted and possibly don't go through recursion deeper

    val suitable = xs.filter {
        case (x, i) => 
            println("Element "+x+" on position "+i)
            x != 0
    }

    // do something with suitable items

    round(xs.diff(suitable)) // next round with items that doesn't succeed in current round
}

val list = List(3,4,5)
round(list.zipWithIndex.toSet) 
```

# c# - 无法将类型“ClassA”转换为 T

> ID：15762179
> 
> 赞同：0
> 
> 时间：2013-04-02T10:48:40.730
> 
> 标签：c#, asp.net, generics

我正在用 C# 编写一个泛型方法：

```
private T GetMamConfigurations<T>(IDictionary<string, object> items,
                                  MaMDBEntities maMDBEntities) where T : class
{
    T geoConfigs = default(T);
    if (typeStr.Equals("MamConfiguration", StringComparison.OrdinalIgnoreCase))
    {
        geoConfigs = (T)GetGeoConfigurationNumericFromDB(items, maMDBEntities);
    }
    else if (typeStr.Equals("ListOfMamConfiguration", StringComparison.OrdinalIgnoreCase))
    {
        geoConfigs = (T)GetGeoConfigurationsPercentageFromDB(items, maMDBEntities);
    }

    return geoConfigs;
} 
```

`GetGeoConfigurationNumericFromDB`返回`MamConfiguration`

然而

`GetGeoConfigurationsPercentageFromDB`返回`IList<MamConfiguration>`

我得到编译错误：

> *不能将类型的表达式`MamConfiguration`转换为类型`T`*

这是为什么？

有没有什么办法可以在不强制这两种方法返回的情况下解决`IList<MamConfiguration>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:54:25.630

好吧，您总是可以通过在中间添加强制转换来*安抚*编译器：`object`

```
geoConfigs = (T)(object)GetGeoConfigurationNumericFromDB(items, maMDBEntities); 
```

这会将类型检查推迟到运行时。然而！否则没有编译器方法可以做到这一点，因为它永远不会对像`"MamConfiguration"`. 此外，当代码是……*泛型*时，泛型也能很好地工作——即每种类型都做同样的事情。显示的代码与*generic*相反。它是通过通用 API 公开的非通用代码。里面总是乱七八糟的。就我个人而言，我首先会尽量避免这种用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:53:48.093

您可以使用运算符，而不是使用`(T)`to cast to 。如果转换失败将返回。如果成功，它将返回您的转换值。`T``as``as``null`

```
geoConfigs = GetGeoConfigurationNumericFromDB(items, maMDBEntities) as T; 
```

# git - Git：是否应该始终删除合并的分支？

> ID：15762183
> 
> 赞同：2
> 
> 时间：2013-04-02T10:48:53.897
> 
> 标签：git, git-branch, git-merge

我有一个与 git merge 工作流相关的问题。

当我们将一个分支合并到另一个分支时，AFAIK 可能会发生两件事：要么在目标分支上创建单个提交（在非快进情况下），要么来自合并分支的提交将应用在目标分支。

我对第一个案例特别感兴趣。在第二种情况下，所有更改历史记录都被转移到目标分支，在第一种情况下，历史记录被“压缩”为单个提交。因此，如果我们删除合并的分支，我们只有一个提交合并了该分支的所有更改。另一方面，如果合并分支恰好来自目标分支 AFAIK，则目标分支的每个变基都需要合并分支的变基以保持它们同步。

我的问题是：我们应该总是删除合并的分支，还是有办法保留合并的分支并防止每次“根”分支被重新定位时重新定位它？

保留合并分支的理由是，在这种情况下，我们可以深入了解该分支上所做更改的详细历史记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:58:50.093

除非您`--squash`在调用中使用该选项，否则`git merge`合并分支的分支信息将被保留。新创建的*合并*提交只有两个（或更多，在章鱼合并的情况下）父提交，而不是一个。第一个父级对应于您合并到的分支，其他父级代表合并的分支。

您可以使用例如该`gitk`工具或通过例如使用

```
git log --pretty=oneline --abbrev-commit --graph --decorate 
```

因此，在正常合并的情况下（非压缩，无论是快进还是非快进），您都可以轻松保留原始分支并继续使用它进行开发。如果你压缩了，未来的非压缩合并可能会让后代非常困惑，所以使用它可能是一个好主意，`git reset --hard`或者`git rebase`如果你已经有了新的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:57:48.720

合并时，您可以选择将其压扁或保持原样。

我想说的是，如果您将其压扁，只需向前删除分支，因为它显然已经完成了它被压扁后的一部分。

如果您保持分支完好无损（没有挤压），您可以留下它并在需要时重新使用它。

一般来说，如果历史记录无用甚至是错误的，我只会压缩​​提交。我已经完成了提交无法构建稍后修复的开发。这些提交应该在合并之前被压扁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:42:07.817

在我工作的地方，我们使用[它](http://nvie.com/posts/a-successful-git-branching-model/)作为我们的工作流模型。当我们实施更改时，我们会创建一个功能分支并放入一个空提交来描述该分支。

```
git checkout -b feature1
git commit --allow-empty -m "Create branch to add a menu." 
```

当我们完成这项工作或达到一个好的停止点时，我们合并到特征分支（非快进）并删除特征分支。

```
git checkout develop
git merge --no-ff feature1
git branch -d feature1 
```

分支历史仍然保留为 gitk 下的“换道”。这使我们可以很好地了解该功能的更改内容，但避免弄乱我们拥有的分支列表。

# php - 从数据库中的表打印数据

> ID：15762184
> 
> 赞同：1
> 
> 时间：2013-04-02T10:48:56.090
> 
> 标签：php, mysql

我正在打印数据库中一张表中的所有数据，方法是使用`mysql_fetch_query()`来创建一个数组，然后使用`while`函数来打印它。

唯一的问题是，它跳过了第一条记录并直接打印记录 2。记录 1 确实存在于表中，并被命名为这样。

有什么我遗漏或需要添加的吗？

```
mysql_connect("$host", "$username", "$db_password")or die("cannot connect"); 

$data=mysql_query("SELECT * FROM users")or die(mysql_error()); 
$info=mysql_fetch_array($data);
while($info = mysql_fetch_array($data)){
    echo "<br />";
    echo "Record id: <strong>" . $info['id'] . "</strong>";
    echo "<br />";
    echo "Visit time and date: <strong>" . $info['visitDate'] . "</strong>";    
    echo "<br />";
    echo "Previous destination: <strong>" . $info['cameFrom'] . "</strong>";
    echo "<br />";
    echo "Browser used: <strong>" . $info['browser'] . "</strong>";
    echo "<br />";
    echo "Location of user: <strong>" . $info['location'] . "</strong>";
    echo "<p> </p>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:50:37.910

在 while 循环之前删除此行：

```
$info=mysql_fetch_array($data); 
```

这将获取第一条记录，并且当您开始时循环从第二行开始，因为您`mysql_fetch_array()`再次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:51:30.243

```
$info=mysql_fetch_array($data);
while($info = mysql_fetch_array($data)){ 
```

只保留条件，因为您在循环之前进行了一次提取，这是第一个船长行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:02:48.877

你已经调用了 mysql_fetch_array() 两次

```
**$info=mysql_fetch_array($data);
while($info = mysql_fetch_array($data))** 
```

所以你的第一条记录已经通过第一次调用 mysql_fetch_array() 获取

只需删除第一个电话，它就可以正常工作。

# ruby - Chef Template DSL - 如何从 json 加载哈希并迭代键和值

> ID：15762187
> 
> 赞同：0
> 
> 时间：2013-04-02T10:49:02.593
> 
> 标签：ruby, chef-infra

我在厨师模板中有以下代码，但在上传到厨师服务器时出错。我该如何解决？

```
<%
    contents_hash = File.read('/tmp/cluster_hash')
        neoservers_hash  = JSON.parse(contents_hash)
-%>

<% "#{neoservers_hash}".each_pair do |id, ipaddress| %>
<%= "server.#{id}=#{ipaddress}:2888:3888" %>
<% end %> 
```

当我尝试上传食谱时，我收到以下错误：

```
$ knife cookbook upload neo4j -E development
Uploading neo4j          [0.1.0]
FATAL: Erb template templates/default/coord.cfg.erb has a syntax error:
FATAL: -:7: syntax error, unexpected tIDENTIFIER, expecting '}'
FATAL:  _buf << ( "server.#{id}=#{ipaddress}:2888:3888" ).to_s; _buf << '
FATAL:                   ^
FATAL: -:8: unterminated string meets end of file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:53:54.170

您在这一行中有一个奇怪的语法：

```
<% "#{neoservers_hash".each_pair do |id, ipaddress| %> 
```

您似乎尝试对`neoserver_hash`变量使用字符串评估，这实际上不起作用，就像`neoserver_hash`哈希而不是字符串一样。此外，您还缺少右括号。相反，您可能希望完全摆脱字符串评估并使用以下内容：

```
<% neoservers_hash.each_pair do |id, ipaddress| %> 
```

# asp.net - www 和不带 www 的表单身份验证

> ID：15762195
> 
> 赞同：4
> 
> 时间：2013-04-02T10:49:18.737
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, forms-authentication

这是我的配置文件的一部分

```
<authentication mode="Forms">
   <forms loginUrl="~/Account/Login" timeout="2880" enableCrossAppRedirects="true"
          name="authtoken" domain="localsite.com" />
</authentication> 
```

这是我的身份验证方法

```
public void Authenticate(string token, int userId)
{
    var userData = new FormTicketUserData() {UserId = userId};
    var ticket = new FormsAuthenticationTicket(1, token, DateTime.Now, DateTime.MaxValue,  
                                               false, userData.ToString());
    var encryptString = FormsAuthentication.Encrypt(ticket);
    var authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptString);
    authCookie.Path = FormsAuthentication.FormsCookiePath;
    HttpContext.Current.Response.Cookies.Remove(FormsAuthentication.FormsCookieName);
    HttpContext.Current.Response.Cookies.Add(authCookie);
    HttpContext.Current.User = new MyFormsPrincipal(new FormsIdentity(ticket), userId);
    UserContext.Refresh();
} 
```

当我在 www.localsite.com 上进行身份验证时，我不在 localsite.com 上进行身份验证，反之亦然。
当我在 www.localsite.com 上进行身份验证时，我也需要在 localsite.com 上进行身份验证。
我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:03:40.187

这解决了问题

```
authCookie.Domain = "localsite.com"; 
```

# ios - 如何以编程方式创建具有多个占位符的多行 UITextfield？

> ID：15762197
> 
> 赞同：4
> 
> 时间：2013-04-02T10:49:19.390
> 
> 标签：ios, uitextfield

如何以编程方式创建多行 UITextfield？

我需要创建一个具有多个占位符的多行支持文本字段。我不想参考它的xib。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-24T05:49:24.427

你可以用一些技巧来做到这一点。请在此处查看我的答案：[Multiline UITextfield](http://www.stackoverflow.com/a/13476467/1572408)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:58:54.470

你的问题不是很清楚，所以这可能是答案：

```
UITextView *textView ;
textView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 400, 50)] ;

NSString *myMultilineString = [NSString stringWithFormat:@"nanan %d \nline2 %f\nline3 %@", 5, 1.45f, self] ; 
textView.text = myMultilineString ;
textView.userInteractionEnabled = NO ;

[self.view addSubview:textView] ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:21:28.823

看看这里：[https](https://github.com/flypigz/UIPlaceHolderTextView) ://github.com/flypigz/UIPlaceHolderTextView 它是 UITextView 的子类，其中 UILabel 被添加为占位符。如果需要多个占位符，可以添加多个标签。

# mysql - MySQL 选择给定日期之前的最新日期来计算 SUM(#)

> ID：15762199
> 
> 赞同：0
> 
> 时间：2013-04-02T10:49:24.750
> 
> 标签：mysql, sql

我正在为我的一门课做作业，并在高低处搜索了我的问题的答案，但找不到答案。我有两张正在使用的桌子。

他们是：

```
TaxAreaAuthority                TaxRates
+--------------+---------+      +--------------+------------+-------------+
| TaxAuthority | TaxArea |      | TaxAuthority | Effective  | AuthTaxRate |
+--------------+---------+      +--------------+------------+-------------+
| city1        | city1   |      | city1        | 1993-01-01 |         1.0 |
| city2        | city2   |      | city1        | 1994-01-01 |         1.5 |
| city3        | city3   |      | city2        | 1993-09-01 |         1.5 |
| county1      | city1   |      | city2        | 1994-01-01 |         2.0 |
| county1      | city2   |      | city2        | 1995-01-01 |         2.5 |
| county2      | city3   |      | city3        | 1993-01-01 |         1.9 |
| state1       | city1   |      | city3        | 1993-07-01 |         2.3 |
| state1       | city2   |      | county1      | 1993-01-01 |         2.3 |
| state1       | city3   |      | county1      | 1994-10-01 |         2.5 |
+--------------+---------+      | county1      | 1995-01-01 |         2.7 |
                                | county2      | 1993-01-01 |         2.4 |
                                | county2      | 1994-01-01 |         2.7 |
                                | county2      | 1995-01-01 |         2.8 |
                                | state1       | 1993-01-01 |         0.5 |
                                | state1       | 1994-01-01 |         0.8 |
                                | state1       | 1994-07-01 |         0.9 |
                                | state1       | 1994-10-01 |         1.1 |
                                +--------------+------------+-------------+ 
```

这是带有示例的主要问题：

> 1994 年 11 月 1 日 city2 的税率是多少？
> 
> 城市 2 = 2.0，县 1 = 2.5，州 1 = 1.1
> 
> 总计 = 5.6

我可以使用以下语句从*TaxAreaAuthority中选择县和州：*

```
SELECT TaxAuthority FROM TaxAreaAuthority
    WHERE TaxAuthority LIKE 'county%'
    AND TaxArea='city2';

SELECT TaxAuthority FROM TaxAreaAuthority
    WHERE TaxAuthority LIKE 'state%'
    AND TaxArea='city2'; 
```

这就是我卡住的地方。我选择正确日期的代码已关闭，这导致它无法将正确的*AuthTaxRate*项目添加在一起。

```
SELECT SUM(AuthTaxRate) as 'Tax_Total' FROM TaxRates
    WHERE EXTRACT(YEAR FROM Effective)='1994'
        AND TaxAuthority=(
            (SELECT TaxAuthority FROM TaxRates
                WHERE TaxAuthority='city2'
                AND EXTRACT(year FROM Effective)='1994')
            OR
            (SELECT TaxAuthority FROM TaxAreaAuthority
                WHERE TaxAuthority LIKE 'county%'
                AND TaxArea='city2')
            OR
            (SELECT TaxAuthority FROM TaxAreaAuthority
                WHERE TaxAuthority LIKE 'state%'
                AND TaxArea='city2')
            )
    ; 
```

它返回这个：

```
+-----------+
| Tax_Total |
+-----------+
|      11.5 |
+-----------+ 
```

但我需要它来匹配他上面给出的例子。

任何帮助将不胜感激。我很确定这完全是因为我没有选择正确的日期来确定要使用的*TaxAuthority*和*AuthTaxRate*。再次感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:59:44.070

您想对分组最大值求和。

首先，`(TaxAuthority, Effective)`通过加入表格并对结果进行分组来找到相关的 对：

```
SELECT   TaxAuthority, MAX(Effective) Effective
FROM     TaxRates JOIN TaxAreaAuthority USING (TaxAuthority)
WHERE    TaxArea = 'city2' AND Effective <= '1994-11-01'
GROUP BY TaxAuthority 
```

然后将结果连接回`TaxRates`表：

```
SELECT SUM(AuthTaxRate)
FROM   TaxRates NATURAL JOIN (
  SELECT   TaxAuthority, MAX(Effective) Effective
  FROM     TaxRates JOIN TaxAreaAuthority USING (TaxAuthority)
  WHERE    TaxArea = 'city2' AND Effective <= '1994-11-01'
  GROUP BY TaxAuthority
) t 
```

# c# - Windows Schdule 任务通过 c# 和 asp net 给出访问被拒绝错误

> ID：15762203
> 
> 赞同：0
> 
> 时间：2013-04-02T10:49:30.787
> 
> 标签：c#, asp.net, c#-4.0, scheduling

我通过 C# 和 asp.net 创建了一个时间表。它在开发服务器中工作，但实时服务器给出了以下问题

```
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))

public Task CreateTask(string name) 
{
    Task tester = OpenTask(name);
    if (tester != null) {
    tester.Close();
    throw new ArgumentException("The task \"" + name + "\" already exists.");
    }
    try {
        object o;
            //Error Occrured at this below line of Code
        its.NewWorkItem(name, ref CTaskGuid, ref ITaskGuid, out o); 
        ITask iTask = (ITask)o;
        return new Task(iTask, name);
        }
    catch (Exception objException)
    {                       
       throw objException;          
    }   
} 
```

# jquery - kaminari ajax 分页在本地工作，而不是在 heroku 生产

> ID：15762205
> 
> 赞同：3
> 
> 时间：2013-04-02T10:49:37.207
> 
> 标签：jquery, ruby-on-rails, heroku, kaminari

我正在尝试让 ajax 分页在 Heroku 上的生产环境中与 Kaminari 一起使用。目前以开发模式在本地运行代码似乎一切正常。我似乎找不到什么会导致它在本地工作，但不是在生产中

控制台输出

```
Started GET "/events/page/2" for 127.0.0.1 at 2013-04-02 21:48:33 +1100
Processing by EventsController#index as JS
  Parameters: {"event_page"=>"2"} 
```

事件控制器

```
def index
    @events = Event.all

    respond_to do |format|
      format.html # index.html.haml
      format.json
      format.js
    end
  end 
```

index.js.haml

```
$('#events').html('#{escape_javascript render('events_list')}');
$('#events_page').html('#{escape_javascript render('paginator')}');
$('#event_counter').html('(#{pluralize(@events.count, 'event')})'); 
```

index.html.haml

```
%section.section
    %p.title= link_to 'List View', '#events'
    .content{'data-slug'=>'events'}
      %p#events= render 'events/events_list'
      = render 'events/paginator' 
```

heroku 日志

```
2013-04-02T10:29:39+00:00 app[web.1]: Started GET "/events/page/2" for 203.206.108.64 at 
2013-04-02 10:29:38 +0000
2013-04-02T10:29:39+00:00 app[web.1]: 
2013-04-02T10:29:39+00:00 app[web.1]: 
2013-04-02T10:29:39+00:00 heroku[router]: at=info method=GET path=/events/page/2 host=www.*****.com.au fwd="203.206.108.64" dyno=web.1 connect=2ms service=1062ms status=304 bytes=0 
```

# eclipse-rcp - EMF 验证：正确的方法是什么？

> ID：15762212
> 
> 赞同：4
> 
> 时间：2013-04-02T10:50:00.080
> 
> 标签：eclipse-rcp, eclipse-emf, emf

我们目前正在使用 EMF 验证向用户提供直接反馈，以防违反模型约束。

系统设置如下：

*   记录对模型所做的`EContentAdapter`所有修改
*   A`CommandStackListener`在完成`Command`. 这减少了执行的验证次数。EMF`LiveValidator`被配置为也报告成功。
*   每个约束都`Notification`基于以下标准：
    *   它是对正在验证的实体内容的修改吗？
    *   它是添加被验证实体的修改吗？
    *   是否会以其他方式影响先前计算的验证结果的修改？
*   A`ValidationListener`保留了所有约束失败的实体的列表。它使用新的 SUCCESS 或 FAILED ConstraintStatus 消息更新此列表。它还更新列表以删除不再包含在资源中的 FAILED 实体（因为它们已被删除）。

看来我自己实现了很多功能。是否没有标准的 API / 实现可用于执行以下操作？

*   跟踪验证状态
*   跟踪约束使用的属性；仅当这些属性之一发生更改时才重新验证。
    *   与 JFace 数据绑定的`ComputedValue`工作方式相当。

或者我实际上是在充分利用这个框架吗？如果我将使用 OCL 约束，那么系统是否能够检测到哪些更改会影响约束结果？

# java - 自动建议：子字符串匹配

> ID：15762214
> 
> 赞同：0
> 
> 时间：2013-04-02T10:50:04.137
> 
> 标签：java, c++, data-structures

我正在尝试使用三元搜索树（TST）实现自动建议，但是 TST 在我们寻找前缀搜索时很有用，我们如何也为子字符串匹配实现自动建议？还有其他可以使用的数据结构吗？

例如子字符串匹配：当我尝试使用自动建议搜索 UML 时，即使字符串“UML 初学者指南”也应该匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:37:04.613

这是我的想法，不是任何适当且经过验证的数据结构/算法：

1.  选择所有合法字符到 N 个符号的映射（为简单起见：26 个符号用于拉丁字母和类似的非拉丁字母，忽略大小写 + 1 个用于非字母 = 总共 27 个符号）。

2.  从您的字典中，创建一个最大分支因子为 N（即相当高）的浅树。叶节点将包含对包含从根到该叶的符号组合的所有单词的引用（中间节点可能包含对比叶节点深度短的单词的引用，或者您可以忽略那么短的单词）。

3.  树的深度将是可变的，可能在 1..4 的范围内，因此每个叶节点将包含大约相同数量的单词（当然在许多叶子下列出相同的单词，例如 MATCH 在叶子 MAT、ATC、TCH 如果树深度碰巧是3）。

4.  当用户输入字母时，沿着树一直往前走，直到留下相对较少的单词。然后在您处于树的叶子之后对剩余的单词进行线性过滤并且用户输入更多文本进行匹配。`äöO`可以选择过滤掉实际上不是字符匹配的符号匹配，尽管在用户输入`ao0`等时匹配也可能很好。

5.  优化您将字符映射到的符号数量，以使树具有良好的分支因子。优化每个叶子的单词以获得良好的内存使用，而在到达树的叶子后没有太多的单词需要线性过滤。

* * *

当然，有一些实际研究过的算法可以在一大段文本（您想要匹配的所有短语/单词）中查找字符串（用户输入的内容），例如[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)和[Rabin-Karp](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)，这可能值得研究。

# java - 从 Java 中查找 unix 命令 PID

> ID：15762233
> 
> 赞同：4
> 
> 时间：2013-04-02T10:51:05.167
> 
> 标签：java, unix, process, pid

在unix中很容易得到前一个进程的PID-

```
echo $! 
```

但是，假设我**通过 Java 执行一个 unix 命令**-

```
Process process=Runtime.getRuntime().exec("myScript.sh"); 
```

现在，我现在如何**通过 Java**获取“myScript.sh”的**PID**？

 **例如- 在 Unix 中，我们会做- 1\. 执行`myScript.sh` 2\. 执行`ps -ef | grep -i "myScript.sh" | grep -v grep`

输出会像 -

```
 UID   PID  PPID   C    STIME TTY         TIME CMD
userprod 11764 28386   0 05:57:45 pts/3       0:01 myScript.sh 
```

我**通过 Java**需要的是 PID，在这种情况下是“11764”。

ps-脚本也将从 Java 执行，而不是从 shell。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:56:40.067

不确定这是否有效；

```
that process(Process process=Runtime.getRuntime().exec("myScript.sh")) 
```

是一个 java.lang.UNIXProcess 并且它有一个字段 pid；使用反射获取值**

# ios - Modal Segue，从孩子那里获取变量以在父母中使用

> ID：15762236
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:51:17.930
> 
> 标签：ios, objective-c

我有一个故事板，我想将子视图控制器连接到父视图控制器。子视图将保存一个日期选择器，它的值将作为变量传递给父类以在函数中使用。

我发现这个堆栈溢出 [使用最简单的方式将数据（字符串）从子 VC 传递到父 VC](https://stackoverflow.com/questions/13829151/passing-datastring-from-child-vc-to-parent-vc-using-easiest-way?answertab=active#tab-top)

但无法理解下面所说的部分。“setFirstViewController”

```
 [segue.destinationViewController setFirstViewController:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:23:18.567

用于`segue.sourceViewController`访问 segue 所源自的控制器。同样，`segue.destinationViewController`是目的地之一。当您在里面`prepareForSegue:sender`时，两个控制器都处于活动状态并已实例化。

只需阅读[UIStoryboardSegue](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboardSegue_Class/Reference/Reference.html)文档，就很清楚了。

# java-me - 在诺基亚设备上 getLocation 时出现 InstantiationException

> ID：15762242
> 
> 赞同：0
> 
> 时间：2013-04-02T10:51:29.347
> 
> 标签：java-me, geolocation, nokia

诺基亚开发的新手。我正在尝试编写一个 hello world 来获取我当前位置的 GPS 坐标。我在这里做错了什么？

```
public class HomeScreen extends MIDlet  {

    public HomeScreen() {
    }

    protected void destroyApp(boolean arg0) throws MIDletStateChangeException {
    }

    protected void pauseApp() {
    }

    protected void startApp() throws MIDletStateChangeException {
        Displayable current = Display.getDisplay(this).getCurrent() ;
        if (current == null) {
            UpdateJourney updateJourney = new UpdateJourney(this) ;
            Display.getDisplay(this).setCurrent(updateJourney) ;
        }
    }

}

public class UpdateJourney extends Form implements CommandListener, Runnable {
    private LocationProvider myLocation;
    private Criteria myCriteria;
    private Location myCurrentLocation;

    private HomeScreen helloScreen;
    private Command exitCommand;

    private Thread getLocationThread = new Thread(this);;

    public UpdateJourney(HomeScreen helloScreen) {
        super("Taxeeta");

        StringItem helloText = new StringItem("", "Taxeeta");
        super.append(helloText);
        this.helloScreen = helloScreen;
        getLocationThread.start();
    }

    public double getMyLatitude() {
        return myCurrentLocation.getQualifiedCoordinates().getLatitude();
    }

    public double getMyLongitude() {
        return myCurrentLocation.getQualifiedCoordinates().getLongitude();
    }

    public void commandAction(Command command, Displayable arg1) {
        if (command == exitCommand) {
            helloScreen.notifyDestroyed();
        }
    }

    public void run() {
        myCriteria = new Criteria();
        myCriteria.setHorizontalAccuracy(500);
        try {
            myLocation = LocationProvider.getInstance(myCriteria);
            myCurrentLocation = myLocation.getLocation(60);
        } catch (LocationException e) {
            e.printStackTrace();
            System.out
                    .println("Error : Unable to initialize location provider");
            return;
        } catch (InterruptedException e) {
            e.printStackTrace();
            System.out.println("Error: Waited enough for location to return");
            return;
        }
        System.out.println("Location returned Lat:"
                + myCurrentLocation.getQualifiedCoordinates().getLatitude()
                + " Lng:"
                + myCurrentLocation.getQualifiedCoordinates().getLongitude());
        exitCommand = new Command("Location returned Lat:"
                + myCurrentLocation.getQualifiedCoordinates().getLatitude()
                + " Lng:"
                + myCurrentLocation.getQualifiedCoordinates().getLongitude(),
                Command.EXIT, 1);
        addCommand(exitCommand);
        setCommandListener(this);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:20:10.463

在应用程序描述符中，我将 UpdateJourney 作为 MIDlet，我将其更改为 HomeScreen 并且它可以工作。

# sql - 改进 order 子句中的 case 语句

> ID：15762246
> 
> 赞同：0
> 
> 时间：2013-04-02T10:51:39.480
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有商店 sql

```
ALTER procedure [dbo].[TNNews_User_SearchBasic]
    @Title nvarchar(400),
    @CategoryId int,
    @IsInterested int,
    @IsHot int,
    @IsTopCategory int,
    @IsPublish int,
    @PageSize int,
    @PageIndex int,
    @OrderBy varchar(20),
    @PortalId int,
    @LanguageId varchar(6)
as

DECLARE @EndTime   DATETIME
DECLARE @StartTime DATETIME
    SET @StartTime = GETDATE()

    declare @tbCategory table(Id int)
    DECLARE @StartRowIndex INT
    IF @PageSize=0 SELECT @PageSize=count(*) FROM TNNews
        IF(@PageIndex<0) SET @PageIndex=0
        SET @StartRowIndex = @PageSize*(@PageIndex-1)+1

    ;WITH tmpCategory(Id, Name,ParentId,Level)
    AS (
        SELECT 
            e.Id,
            e.Name,
            e.ParentId,
            1
        FROM dbo.TNCategory AS e
        WHERE 
        Id = @CategoryId or (@CategoryId='' and ParentId<=0)
        UNION ALL
        SELECT 
            e.Id,
            e.Name,
            e.ParentId,
            Level + 1
        FROM dbo.TNCategory AS e
        JOIN tmpCategory AS d ON e.ParentId = d.Id
        )
    insert @tbCategory select Id  from tmpCategory  

        ;WITH tmpNews as 
        (
            SELECT  
            a.Id,a.Title,a.Subject
            ,ROW_NUMBER() OVER (ORDER BY (Publisheddate) desc) as ThuTuBanGhi
            FROM dbo.TNNews a
            where 1 = 1
            --and ( Title like '%'+@Title+'%')
            and (@CategoryId = -1 or exists (select 0 from @tbCategory b where b.Id = a.CategoryId))
            and (@IsInterested = -1 or IsIntrested = @IsInterested )
            and (@IsHot = -1 or IsHot = @IsHot )
            and (@IsTopCategory = -1 or IsTopCategory = @IsTopCategory )
            and (@IsPublish = -1 or IsPublished = @IsPublish)
            and PortalId=@PortalId
            and LanguageId = @LanguageId
         )  
        select *, (select COUNT(Id) from tmpNews) as 'TongSoBanGhi' from tmpNews
        WHERE 
            ThuTuBanGhi BETWEEN (@StartRowIndex) AND (@StartRowIndex + @PageSize-1)

SET @EndTime = GETDATE()
PRINT 'StartTime = ' + CONVERT(VARCHAR(30),@StartTime,121)
PRINT '  EndTime = ' + CONVERT(VARCHAR(30),@EndTime,121)
PRINT ' Duration = ' + STR(DATEDIFF(MILLISECOND,@StartTime,@EndTime)) + ' millisecond'

select STR(DATEDIFF(MILLISECOND,@StartTime,@EndTime)) 
```

在这家商店执行后

```
EXEC    [dbo].[TNNews_User_SearchBasic]
        @Title='',
        @CategoryId = '',
        @IsInterested = -1,
        @IsHot = -1,
        @IsTopCategory = -1,
        @IsPublish = -1,
        @PageSize = 20,
        @PageIndex = 1,
        @OrderBy = '',
        @PortalId = 0,
        @LanguageId = N'vi-VN'

go 
```

执行时间约为“200ms”。我创建了一个新商店“TNNews_User_SearchBasic1”，并进行了一些更改。

```
.....
--,ROW_NUMBER() OVER (ORDER BY (Publisheddate) desc) as ThuTuBanGhi
,ROW_NUMBER() OVER (ORDER BY (case when @OrderBy='VIEW_COUNT' then ViewCount else PublishedDate end) desc) as ThuTuBanGhi
..... 
```

现在是时候执行这家商店了

```
EXEC    [dbo].[TNNews_User_SearchBasic1]
        @Title='',
        @CategoryId = '',
        @IsInterested = -1,
        @IsHot = -1,
        @IsTopCategory = -1,
        @IsPublish = -1,
        @PageSize = 20,
        @PageIndex = 1,
        @OrderBy = '',
        @PortalId = 0,
        @LanguageId = N'vi-VN'

GO 
```

大约 900 毫秒。我不明白为什么会有变化。请帮我改进这些商店。

PS：我把示例数据库放在：[http ://anhquan22.tk/Portals/0/Videos/web.rar](http://anhquan22.tk/Portals/0/Videos/web.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:13:42.583

分析完你的数据库结构。问题的一部分隐藏在表结构中。我已经为你准备了备份。在其中，我稍微修改了方案以提高性能并对表格进行了一些规范化。您可以从此[链接](https://mega.co.nz/#!dxswkKTK!ART_clrsDlD6wbV8_E4QJBWFTT5FVHAnw8JWqYNgzLw)下载它。

...对于您的问题，我会这样做-

```
DECLARE @SQL NVARCHAR(1000)
SELECT @SQL = N'
;WITH tmpCategory (Id, Name, ParentId, [Level]) AS 
(
 SELECT
   e.Id
 , e.Name
 , e.ParentId
 , 1
 FROM dbo.TNCategory e
 WHERE Id = @CategoryId OR (@CategoryId = '''' AND ParentId <= 0)

 UNION ALL

 SELECT
   e.Id
 , e.Name
 , e.ParentId
 , [Level] + 1
 FROM dbo.TNCategory e
 JOIN tmpCategory d ON e.ParentId = d.Id
)
SELECT 
   a.Id
 , ROW_NUMBER() OVER (ORDER BY ' + 
   CASE WHEN @OrderBy = 'VIEW_COUNT' 
    THEN 'ViewCount' 
    ELSE 'PublishedDate'
   END +' DESC) AS ThuTuBanGhi
FROM dbo.TNNewsMain a
where PortalId = @PortalId 
 AND LanguageId = @LanguageId'
 + CASE WHEN @IsInterested != -1 THEN ' AND IsInterested = @IsInterested' ELSE '' END
 + CASE WHEN @IsHot != -1 THEN ' AND IsHot = @IsHot' ELSE '' END
 + CASE WHEN @IsTopCategory != -1 THEN ' AND IsTopCategory = @IsTopCategory' ELSE '' END
 + CASE WHEN @IsPublish != -1 THEN ' AND IsPublish = @IsPublish' ELSE '' END
 + CASE WHEN @CategoryId != -1 THEN '' ELSE ' AND EXISTS(SELECT 1 FROM tmpCategory b WHERE b.Id = a.CategoryId)' END

INSERT INTO @temp (Id, ThuTuBanGhi)
EXECUTE sp_executesql 
@SQL
, N'@PortalId INT
, @LanguageId VARCHAR(6)
, @CategoryId INT
, @IsInterested INT
, @IsHot INT
, @IsTopCategory INT
, @IsPublish INT'
, @PortalId = @PortalId
, @LanguageId = @LanguageId
, @CategoryId = @CategoryId
, @IsInterested = @IsInterested
, @IsHot = @IsHot
, @IsTopCategory = @IsTopCategory
, @IsPublish = @IsPublish;

SELECT 
  d.Id
, tm.Title
, tm.[Subject]
, d.ThuTuBanGhi
, c.TongSoBanGhi
FROM (
SELECT  t.Id
 , t.ThuTuBanGhi
FROM @temp t
WHERE t.ThuTuBanGhi BETWEEN @StartRowIndex AND @StartRowIndex + @PageSize - 1
) d 
JOIN TNNewsMain tm ON d.Id = tm.Id
CROSS JOIN (
SELECT TongSoBanGhi = (SELECT COUNT(1) FROM @temp)
) c 
```

# android - 获取 SSLHandShakeException

> ID：15762249
> 
> 赞同：11
> 
> 时间：2013-04-02T10:51:55.740
> 
> 标签：android, exception

当我访问 wsdl url 时，我在 android 中遇到异常

```
javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found. 
```

我已经使用**ksoap2**库来执行该`WSDL`文件。

我也实施了认证课程，但我遇到了同样的问题

请告诉是否有任何解决方案。

我正在使用这两个类进行认证：

**AndroidInsecureHttpsServiceConnectionSE 类：**

```
 package com.example.androidwsdltest;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.security.KeyManagementException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;
import javax.net.ssl.X509TrustManager;

import org.ksoap2.HeaderProperty;
import org.ksoap2.transport.ServiceConnection;

import android.util.Log;

public class AndroidInsecureHttpsServiceConnectionSE implements
        ServiceConnection {
    private HttpsURLConnection connection;

    public AndroidInsecureHttpsServiceConnectionSE(String host, int port,
            String file, int timeout) throws IOException {
        // allowAllSSL();
        connection = (HttpsURLConnection) new URL("https", host, port, file)
                .openConnection();
        updateConnectionParameters(timeout);
    }

    private static TrustManager[] trustManagers;

    public static class EasyX509TrustManager implements X509TrustManager {

        private X509TrustManager standardTrustManager = null;

        /**
         * Constructor for EasyX509TrustManager.
         */
        public EasyX509TrustManager(KeyStore keystore)
                throws NoSuchAlgorithmException, KeyStoreException {
            super();
            TrustManagerFactory factory = TrustManagerFactory
                    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
            factory.init(keystore);
            TrustManager[] trustmanagers = factory.getTrustManagers();
            if (trustmanagers.length == 0) {
                throw new NoSuchAlgorithmException("no trust manager found");
            }
            this.standardTrustManager = (X509TrustManager) trustmanagers[0];
        }

        /**
         * @see 
         *      javax.net.ssl.X509TrustManager#checkClientTrusted(X509Certificate
         *      [],String authType)
         */
        public void checkClientTrusted(X509Certificate[] certificates,
                String authType) throws CertificateException {
            standardTrustManager.checkClientTrusted(certificates, authType);
        }

        /**
         * @see 
         *      javax.net.ssl.X509TrustManager#checkServerTrusted(X509Certificate
         *      [],String authType)
         */
        public void checkServerTrusted(X509Certificate[] certificates,
                String authType) throws CertificateException {
            if ((certificates != null) && (certificates.length == 1)) {
                certificates[0].checkValidity();
            } else {
                standardTrustManager.checkServerTrusted(certificates, authType);
            }
        }

        /**
         * @see javax.net.ssl.X509TrustManager#getAcceptedIssuers()
         */
        public X509Certificate[] getAcceptedIssuers() {
            return this.standardTrustManager.getAcceptedIssuers();
        }

    }

    public static class FakeX509TrustManager implements X509TrustManager {
        private static final X509Certificate[] _AcceptedIssuers = new X509Certificate[] {};

        public void checkClientTrusted(X509Certificate[] arg0, String arg1)
                throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] arg0, String arg1)
                throws CertificateException {
        }

        public boolean isClientTrusted(X509Certificate[] chain) {
            return true;
        }

        public boolean isServerTrusted(X509Certificate[] chain) {
            return true;
        }

        public X509Certificate[] getAcceptedIssuers() {
            return (_AcceptedIssuers);
        }
    }

    /**
     * Allow all SSL certificates by setting up a host name verifier that passes
     * everything and as well setting up a SocketFactory with the
     * #FakeX509TrustManager.
     */
    public static void allowAllSSL() {

        HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {

            @Override
            public boolean verify(String hostname, SSLSession session) {
                // TODO Auto-generated method stub
                return true;
            }

        });

        SSLContext context = null;

        if (trustManagers == null) {
            try {
                trustManagers = new TrustManager[] { new EasyX509TrustManager(
                        null) };
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (KeyStoreException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        try {
            context = SSLContext.getInstance("TLS");
            context.init(null, trustManagers, new SecureRandom());
        } catch (NoSuchAlgorithmException e) {
            Log.e("allowAllSSL", e.toString());
        } catch (KeyManagementException e) {
            Log.e("allowAllSSL", e.toString());
        }
        // HttpsURLConnection.setDefaultAllowUserInteraction(true);
        HttpsURLConnection.setDefaultSSLSocketFactory(context
                .getSocketFactory());
    }

    /**
     * update the connection with the timeout parameter as well as allowing SSL
     * if the Android version is 7 or lower (since these versions have a broken
     * certificate manager, which throws a SSL exception saying "Not trusted
     * security certificate"
     * 
     * @param timeout
     */
    private void updateConnectionParameters(int timeout) {
        connection.setConnectTimeout(timeout); // 20 seconds
        connection.setReadTimeout(timeout); // even if we connect fine we want
                                            // to time out if we cant read
                                            // anything..
        connection.setUseCaches(false);
        connection.setDoOutput(true);
        connection.setDoInput(true);

        allowAllSSL();

        /*
         * int buildVersion = Build.VERSION.SDK_INT; if (buildVersion <= 7) {
         * Log.d("Detected old operating system version " + buildVersion +
         * " with SSL certificate problems. Allowing " + "all certificates.",
         * String.valueOf(buildVersion)); allowAllSSL(); } else {
         * Log.d("Full SSL active on new operating system version ",
         * String.valueOf(buildVersion)); }
         */
    }

    public void connect() throws IOException {
        connection.connect();
    }

    public void disconnect() {
        connection.disconnect();
    }

    public List getResponseProperties() {
        Map properties = connection.getHeaderFields();
        Set keys = properties.keySet();
        List retList = new LinkedList();

        for (Iterator i = keys.iterator(); i.hasNext();) {
            String key = (String) i.next();
            List values = (List) properties.get(key);

            for (int j = 0; j < values.size(); j++) {
                retList.add(new HeaderProperty(key, (String) values.get(j)));
            }
        }

        return retList;
    }

    public void setRequestProperty(String key, String value) {
        // We want to ignore any setting of "Connection: close" because
        // it is buggy with Android SSL.
        if ("Connection".equalsIgnoreCase(key)
                && "close".equalsIgnoreCase(value)) {
            // do nothing
        } else {
            connection.setRequestProperty(key, value);
        }
    }

    public void setRequestMethod(String requestMethod) throws IOException {
        connection.setRequestMethod(requestMethod);
    }

    public OutputStream openOutputStream() throws IOException {
        return connection.getOutputStream();
    }

    public InputStream openInputStream() throws IOException {
        return connection.getInputStream();
    }

    public InputStream getErrorStream() {
        return connection.getErrorStream();
    }

    public String getHost() {
        return connection.getURL().getHost();
    }

    public int getPort() {
        return connection.getURL().getPort();
    }

    public String getPath() {
        return connection.getURL().getPath();
    }

} 
```

**AndroidInsecureKeepAliveHttpsTransportSE 类：**

```
 package com.example.androidwsdltest;

import java.io.IOException;

import org.ksoap2.transport.HttpsTransportSE;
import org.ksoap2.transport.ServiceConnection;

public class AndroidInsecureKeepAliveHttpsTransportSE extends HttpsTransportSE {

    private AndroidInsecureHttpsServiceConnectionSE conn = null;
    private final String host;
    private final int port;
    private final String file;
    private final int timeout;

    public AndroidInsecureKeepAliveHttpsTransportSE(String host, int port,
            String file, int timeout) {
        super(host, port, file, timeout);
        this.host = host;
        this.port = port;
        this.file = file;
        this.timeout = timeout;
    }

    @Override
    protected ServiceConnection getServiceConnection() throws IOException {
        super.getServiceConnection();
        conn = new AndroidInsecureHttpsServiceConnectionSE(host, port, file,
                timeout);
        conn.setRequestProperty("Connection", "keep-alive");

        return conn;
    }
} 
```

使用这些认证课程后，我得到了同样的例外

请帮我..

提前致谢......：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T09:29:54.987

你应该有一个授权的 SSL 证书 - 这可能会解决问题，这是解决问题的最佳方法。

**如果没有，你必须做一点工作：**

这个概念是，当使用 SSL 时，Android 比平时更难，你应该在你的 android 上拥有证书权限，因此，你应该在你的 Android 上拥有一个基本的密钥库（如谷歌商店，但免费，并且在您自己的 Android），并通过一些基本操作使您自己的 Android 受信任。

1.  在服务器上找到您的证书，并使用私钥导出（您应具有管理员权限）。这可以通过从 start->run + certmgr.msc 运行来完成。查找“受信任的根证书颁发机构”。找到您的证书并进行导出（keytool 可以加载现有的 pfx 证书。在 *.cer 类型的证书上，可能会有小问题。
2.  你应该有一个钥匙工具。[您可以在http://keytool.sourceforge.net/](http://keytool.sourceforge.net/)上找到说明 您可以安装，但我更喜欢以下建议：这是通过帮助 - 软件更新 - 查找并安装 - 搜索新功能来完成的...。单击新建远程站点并在名称和 URL 中添加[http://keytool.sourceforge.net/update](http://keytool.sourceforge.net/update)，并确保已选中。点击完成。
3.  添加一个新的密钥库，并加载您的证书（使用 pcs12 协议，选择您能记住的密码）。
4.  需要添加的代码如下：http: [//developer.android.com/training/articles/security-ssl.html#UnknownCa](http://developer.android.com/training/articles/security-ssl.html#UnknownCa)
5.  你应该把你的联系联系起来。您可以像示例一样使用 HttpTransportSE::ServiceConnection::setSSLSocketFactory。 [https://code.google.com/p/androidzon/source/browse/Androidzon/src/it/marco/ksoap2/HttpTransportSE.java?r=77](https://code.google.com/p/androidzon/source/browse/Androidzon/src/it/marco/ksoap2/HttpTransportSE.java?r=77) （只需创建自己的新功能，并将其连接到网络服务。如果不起作用，请删除 ?wsdl)

祝你好运！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:22:23.127

该错误是由于与服务器建立信任时出现的问题。大多数情况下，您的信任库没有服务器提交的证书。以下2个问题的答案可能会对您有所帮助。

[1] -[如何通过 Android 访问 SSL 连接？](https://stackoverflow.com/questions/6441158/how-can-i-access-an-ssl-connection-through-android)

[2] -[证书受 PC 信任，但不受 Android 信任](https://stackoverflow.com/questions/11340298/certificate-trusted-on-pc-but-not-in-android)

# xcode - 从应用程序存档和取消存档

> ID：15762252
> 
> 赞同：2
> 
> 时间：2013-04-02T10:52:04.697
> 
> 标签：xcode, zip

从 iPhone 应用程序归档和取消归档文件的优化方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:55:55.053

[您可以从http://code.google.com/p/ziparchive/downloads/list](http://code.google.com/p/ziparchive/downloads/list)下载 ziparchive 文件 并将文件添加到您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:00:03.867

您可以使用以下方法将文件存档在单个 zip 文件中。

-(BOOL) CreateZipFile2:(NSString*) zipFile;

-(BOOL) CreateZipFile2:(NSString*) zipFile 密码:(NSString*) 密码；

-(BOOL) addFileToZip:(NSString*) 文件新名称:(NSString*) 新名称；

-(BOOL) CloseZipFile2;// 关闭归档器实例。

您可以使用以下方法来解压缩 zip 文件。

-(BOOL) UnzipOpenFile:(NSString*) zipFile;

-(BOOL) UnzipOpenFile:(NSString*) zipFile 密码:(NSString*) 密码；

-(BOOL) UnzipFileTo:(NSString*) 路径覆盖:(BOOL) 覆盖；

-(BOOL) UnzipCloseFile;// 关闭归档器实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:07:05.563

ZipArchive 是用于压缩或解压缩 zip 文件的 Objective-C 类。

它可用于 iPhone 应用程序开发，也可用于 Mac OSX 上的可可。

看这里 ：`http://code.google.com/p/ziparchive/downloads/list`

您可以下载文件并将它们导入到您的项目中以使用它们。

# php - 对数组进行排序并保留键的值

> ID：15762256
> 
> 赞同：36
> 
> 时间：2013-04-02T10:52:15.727
> 
> 标签：php, arrays, sorting

我有一个看起来像这样的数组：

```
Array
(
    [team1] => Array
        (
            [points] => 10
            [players] => Array
                (
                     ...
                )
        )

    [team2] => Array
        (
            [points] => 23
            [players] => Array
                (
                     ...
                )
        )

    ... many more teams
) 
```

我想按每支球队的分数对球队进行排序。我试过这个：

```
function sort_by_points($a,$b)
{
    if ($a['points']==$b['points']) return 0;
        return ($a['points']<$b['points'])?1:-1;
}

usort($this->wordswithdata, "sortbycount"); 
```

但是这种方法会覆盖包含团队名称的键并返回：

```
Array
(
    [0] => Array
        (
            [points] => 23
            [players] => Array
                (
                     ...
                )
        )

    [1] => Array
        (
            [points] => 10
            [players] => Array
                (
                     ...
                )
        )

    etc...
) 
```

有没有办法对数组进行排序而不覆盖团队名称作为数组键？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-02T10:56:09.167

使用[uasort](http://php.net/manual/en/function.uasort.php)函数，它应该保持键 => 值关联完整。

（旁注：你可以做`return $a['points'] - $b['points']`而不是ifs）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-02T10:57:08.293

您可以使用[`uasort`](http://www.php.net/manual/en/function.uasort.php)：

```
uasort($array, function($a, $b) {
    return $a['points'] - $b['points'];
}); 
```

> 此函数使用用户定义的比较函数对数组进行排序，以使数组索引**与其关联**的数组元素保持相关性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-22T12:54:23.603

你可以像这样按它的值对关联数组进行排序

```
$age = array("Peter"=>"35", "Ben"=>"37", "Joe"=>"43");

function Ascending($a, $b) {   
    if ($a == $b) {        
        return 0;
    }   
        return ($a < $b) ? -1 : 1; 
}  

function Descending($a, $b) {   
    if ($a == $b) {        
        return 0;
    }   
        return ($a > $b) ? -1 : 1; 
}  

echo "Ascending order" ;
uasort($age,"Ascending");
print_r($age);

echo "</br>Descending order" ;
uasort($age,"Descending");
print_r($age); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-30T08:29:45.010

```
its working fine i giving example
that array need sort
$sumarray=array [▼
  484 => 54.7875
  486 => 53.5375
  487 => 52.9125
  488 => 52.2875
  493 => 54.7875
]

$original=$sumarray;

 $svalue=array_values($sumarray);
  rsort($svalue);
  $sorted=array();
  foreach ($svalue as $key => $value) {
   $kk=array_search($value,$sumarray);
  $sorted[$kk]=$value;
  unset($sumarray[$kk]);

    }
  print_r($original);
    print_r($svalue);
  print_r($sorted);
             //out put
  array:5 [▼
  484 => 54.7875
  486 => 53.5375
  487 => 52.9125
  488 => 52.2875
  493 => 54.7875
]
array:5 [▼
  0 => 54.7875
  1 => 54.7875
  2 => 53.5375
  3 => 52.9125
  4 => 52.2875
]
array:5 [▼
  484 => 54.7875
  493 => 54.7875
  486 => 53.5375
  487 => 52.9125
  488 => 52.2875
] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:56:01.323

试试这个代码，希望它能工作。

```
function aasort (&$array, $key) {
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    asort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
}

aasort($your_array,"points"); 
```

# php - 用于监听自定义端口的独立肥皂服务器的 php 肥皂客户端

> ID：15762258
> 
> 赞同：0
> 
> 时间：2013-04-02T10:52:18.510
> 
> 标签：php, web-services, soap-client, gsoap

我使用 gSoap 2.8.14 和 c++ 构建了一个独立的 web 服务。现在我正在尝试为此 Web 服务编写一个 php 客户端，但无法这样做。我的网络服务正在监听 9009 端口 PHP 代码如下：

```
$params = array('user' => 'username','password' => 'password','session-id'=>'approved');
$client = new SoapClient("authenticate.wsdl");
var_dump($client->__getFunctions());
$res = $client->verifyUser ( $params);

print_r( $res); 
```

关于如何为 php 客户端指定自定义端口的任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:56:25.507

只需指定将一组选项传递给构造函数的主机和端口

```
$client = new SoapClient("authenticate.wsdl", 
                          array('proxy_host' => 'YOUR_HOST',
                                'proxy_port' => '9009')); 
```

# objective-c - 在@implementation 内部和外部声明变量

> ID：15762259
> 
> 赞同：2
> 
> 时间：2013-04-02T10:52:19.617
> 
> 标签：objective-c

我只是想通过下面的代码来理解变量的生命。在实例化新实例时，我可以看到 _inside 和 _outside 保留，而大括号则没有。

```
@interface ViewController (){
    NSString *_innBraces;
}

@end

NSString *_outside;

@implementation ViewController{
    NSString *_inmBraces;
}

NSString *_inside;

-(id)initWithInside:(NSString*)inside outside:(NSString*)outside nBraces:(NSString*)nBraces mBraces:(NSString*)mBraces{
    self = [super init];
    if (self) {
        _inside = inside;
        _outside = outside;
        _innBraces = nBraces;
        _inmBraces = mBraces;
        return self;
    }else{
        return nil;
    }
} 
```

1.  _inside 和 _outside 的申报地点有区别吗？
2.  大括号变量与声明它的位置有什么区别？
3.  以相同方式声明的静态变量与 _inside/_outside 变量之间有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:03:56.663

1.  `_inside`并且`_outside`都被声明为全局变量。
2.  `_innBraces`由于您似乎在同一个文件中声明所有内容，因此和之间没有区别`_inmBraces`，它们都是类中的实例变量。如果`@interface`位于头文件中，那么您会看到两者之间的范围有所不同，因为`_inmBraces`只会在您的实现文件`_innBraces`中可见，并且在包含该`.h`文件的任何文件中都可见。
3.  这些都不是静态的。如果它们曾经是（在`static`关键字之前），那么它们每个都将是本地的存储和命名空间到声明它们的文件。

在 1 和 3 的情况下，它们都是直接的 C 声明，因此它们是否在`@implementation`and `@interface`is 的范围内没有任何区别。在 Objective-C 中，没有类变量。

对于类变量，一般的过程是创建一个文件静态变量的形式：

```
static NSString *sMyClassVariable; 
```

在实现文件中。这个变量，因为它是静态的，在你的实现文件之外的任何其他文件中都不可见。

# highslide - Highslide 全尺寸图像图标不适用于控件

> ID：15762264
> 
> 赞同：0
> 
> 时间：2013-04-02T10:52:31.097
> 
> 标签：highslide

我正在尝试使用带有控件的 Highslide 示例：

[http://www.roadrash.no/hs-support/gallery-custom-nav.html](http://www.roadrash.no/hs-support/gallery-custom-nav.html)

它工作正常，但是当我使用它时，我失去了“全尺寸图像”选项。图标不显示。

我已经使用 Highslide 有一段时间了，只是没有控件，并且习惯于自然地获得该选项。

fullExpandOpacity 设置为 1。

谁能帮我？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:53:27.940

带有控件的 Highslide 画廊没有您正在寻找的完全展开按钮类型（您习惯于从没有控件的图像中获得的完全展开按钮）。

您找到的演示是我很久以前为客户创建的，他只想要下一个/上一个按钮。这些按钮是使用 JavaScript 为我们的常规控件构建的，但此定制控件的图像仅包含下一个/上一个按钮 - 不包含移动/关闭/完全展开按钮。

您可以创建一个还包含完全展开按钮的新图像并更改控件的 CSS 以反映图像的新部分（完全展开按钮），或者您可以使用我们的预制控件之一有全套按钮 - 请参阅我们的演示画廊：[http](http://highslide.com/index.htm) ://highslide.com/index.htm => 使用画廊，或使用[Highslide 编辑器](http://highslide.com/editor/)中的控件创建您自己的自定义画廊。

# android - findFragmentById 总是返回 null

> ID：15762266
> 
> 赞同：3
> 
> 时间：2013-04-02T10:52:38.697
> 
> 标签：android, android-layout, nullpointerexception, android-tabs, mapfragment

我在 mainActivity 的导航模式下使用操作栏。不同的选项卡有不同的布局，在其中一个选项卡上，我嵌入了一个布局，里面有一个 MapFragment。使用以下代码，应用程序运行良好，mapFragments 运行良好，选项卡运行良好。但是，一旦我想访问嵌入在 myFragment 中的 mapFragment 使用 getFragmentManager().findFragmentById(R.id.map_add)，我总是会得到 null。

我尝试使用 FragmentManager 和 FragmentTransaction 来添加 myfragment 和 MapFragment，但仍然从 findFragmentById(R.id.map_add) 获得 null。请帮忙...

MainActivity 初始化如下：

```
protected void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.main);

    // ActionBar gets initiated
    ActionBar actionbar = getActionBar();
    // Tell the ActionBar we want to use Tabs.
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    // initiating the tabs and set text to it.
    ActionBar.Tab myTab = actionbar.newTab().setText("hey");

    // create the fragments we want to use for display content
    Fragment myFragment = new myFragment();

    // set the Tab listener. Now we can listen for clicks.
    myTab.setTabListener(new MyTabsListener(myFragment));

    // add the tabs to the actionbar
    actionbar.addTab(myTab);
    map=((MapFragment)getFragmentManager().findFragmentById(R.id.map_add)).getMap();//line 103

} 
```

MainActivity的布局，main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/fragment_container"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >
</RelativeLayout> 
```

tablistener 的代码：

```
 class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);           
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

} 
```

myFragment 的代码：

```
public static class AddAliasFragment extends Fragment {

    private static View view;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (view != null) {
            ViewGroup parent = (ViewGroup) view.getParent();
            if (parent != null)
                parent.removeView(view);
        }
        try {
            view = inflater.inflate(R.layout.myfragment_layout, container, false);
        } catch (InflateException e) {
            /* map is already there, just return view as it is */
        }
        return view;
    }

    public MapFragment getMapFragment(){
        return (MapFragment)getFragmentManager().findFragmentById(R.id.map_add);
    } 

} 
```

myFragment 的布局：myfragment_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map_add_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<EditText
    android:id="@+id/search"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="@string/searchhint"
    />

<Button
    android:id="@+id/searchbtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/search"
    android:layout_toRightOf="@id/search"
    android:text="@string/go" />

<fragment 
      android:id="@+id/map_add"
      android:tag="add"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_below="@id/search"
      android:name="com.google.android.gms.maps.MapFragment"/> 
```

Logcat 输出：nullpointer 异常是指第 103 行，即 getMap() 行，我在前面的代码中后面有注释

```
04-02 21:23:12.122: E/AndroidRuntime(3672): FATAL EXCEPTION: main
04-02 21:23:12.122: E/AndroidRuntime(3672): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.test.test/com.test.test.MainActivity}:     java.lang.NullPointerException
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2307)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2357)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.ActivityThread.access$600(ActivityThread.java:153)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.os.Looper.loop(Looper.java:137)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.ActivityThread.main(ActivityThread.java:5226)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at java.lang.reflect.Method.invoke(Method.java:511)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at dalvik.system.NativeStart.main(Native Method)
04-02 21:23:12.122: E/AndroidRuntime(3672): Caused by: java.lang.NullPointerException
04-02 21:23:12.122: E/AndroidRuntime(3672):     at     com.test.test.MainActivity.onCreate(MainActivity.java:103)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.Activity.performCreate(Activity.java:5104)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-02 21:23:12.122: E/AndroidRuntime(3672):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2261)
04-02 21:23:12.122: E/AndroidRuntime(3672):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:25:11.183

发生这种情况是因为 MapFragment 尚未完成加载谷歌地图对象。要解决此问题，请在创建地图片段时尝试覆盖 onActivityCreated。从您的 onActivityCreated 实现中，然后进行所有地图访问和修改。

```
myMapFragment=new SupportMapFragment(){
    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        //modify your map here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T17:13:12.897

在我的情况下，问题不是指定 SupportMapFragment。我有这样的用途：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

如此处所述，[https://stackoverflow.com/a/16663713/2411379](https://stackoverflow.com/a/16663713/2411379)供 Google Map V2 使用。

# android - 来自 Assets 文件夹的 Android 中的 SQLIte

> ID：15762267
> 
> 赞同：1
> 
> 时间：2013-04-02T10:52:38.827
> 
> 标签：android, database, sqlite

我正在尝试在我的应用程序中使用资产文件夹中的数据库，但我似乎无法引用它。

我的结构设置如下：

```
public static String DBName = "myDB.db";
public static String DBLocation = "/data/data/com.yes.auntsally/databases/";
public static String DBFullLocation = DBLocation + DBName; 
```

然后调用：

```
public static void getDbFile() {
        if (dbFile == null) {
            dbFile = new File(Global.DBFullLocation);
        }
    }

public static void openDb() {
        if (db == null) {
            getDbFile();  
            db = SQLiteDatabase.openOrCreateDatabase(dbFile, null);
            setDbOpen(true);
        }
        if (!db.isOpen()) {
            getDbFile();  
            db = SQLiteDatabase.openOrCreateDatabase(dbFile, null);
            setDbOpen(true);
        }

    } 
```

但我得到了错误：

```
04-02 11:51:31.375: E/SQLiteLog(4024): (14) cannot open file at line 30241 of [00bb9c9ce4]
04-02 11:51:31.375: E/SQLiteLog(4024): (14) os_unix.c:30241: (2) open(/data/data/com.yes.auntsally/databases/myDB.db) - 
04-02 11:51:31.390: E/SQLiteDatabase(4024): Failed to open database '/data/data/com.yes.auntsally/databases/myDB.db'.
04-02 11:51:31.390: E/SQLiteDatabase(4024): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:03:37.647

尝试参考下面的代码

```
public class DataBaseHelper extends SQLiteOpenHelper {

private static String DB_PATH;
private static String DB_NAME = "podcastDB.db";
private SQLiteDatabase myDataBase;
private final Context myContext;
SharedPreferences sharedPreferences;

public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
    DB_PATH = "/data/data/" + myContext.getPackageName() + "/databases/";

    sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(myContext);
}

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 * */
public void createDataBase() throws IOException {

    // ---Check whether database is already created or not---
    boolean dbExist = checkDataBase();

    if (dbExist) {
    } else {
        this.getReadableDatabase();
        try {
            // ---If not created then copy the database---
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {
    try {
        String myPath = DB_PATH + DB_NAME;
        File f = new File(myPath);
        if (f.exists())
            return true;
        else
            return false;
    } catch (SQLiteException e) {
        Log.e("Podcast", "There was an error", e);
        return false;
    }
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {

    InputStream myInput = myContext.getAssets().open(DB_NAME);

    String outFileName = DB_PATH + DB_NAME;

    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public void openDataBase() throws SQLException {

    // --- Open the database---
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);

}

@Override
public synchronized void close() {

    if (myDataBase != null)
        myDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:00:20.967

试试这个它非常简单的库项目是为同样的

[https://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)

# rvm - Homebrew 在尝试安装 libksba 时说下载失败

> ID：15762268
> 
> 赞同：1
> 
> 时间：2013-04-02T10:52:43.007
> 
> 标签：rvm, homebrew

在 rvm 要求中，我有`libksba`. 所以我尝试用自制软件安装它：

```
➜  ~  brew install libksba
==> Downloading ftp://ftp.gnupg.org/gcrypt/libksba/libksba-1.3.0.tar.bz2

curl: (56) Recv failure: Operation timed out
Error: Download failed: ftp://ftp.gnupg.org/gcrypt/libksba/libksba-1.3.0.tar.bz2 
```

有没有办法解决这个问题（通过指定额外的存储库）？或者[我应该手动安装 lib](https://stackoverflow.com/questions/9879629/how-do-i-install-libksba-on-mac-osx)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:13:30.290

你可以

`rvm autolibs enable`接着

`rvm do what you want`（在我的情况下`rvm install 1.9.3`：）

# visual-studio-2010 - 测试失败时向 MsTest 添加自定义操作

> ID：15762269
> 
> 赞同：1
> 
> 时间：2013-04-02T10:52:45.447
> 
> 标签：visual-studio-2010, visual-studio, command-line, mstest

当我的套件测试失败时，我想添加一些自定义报告。即我不想只是在屏幕上显示失败的测试名称和所有者输出（我们从 cmd 运行测试），而是要查询数据库，我们有我们的运行历史和给定测试的输出历史，以便告诉developer 是故障回归和检查阻止程序，或者它只是一个不稳定的测试。

实现这一目标的最简单方法是什么？我也许可以围绕 mstest 创建一个包装器并以某种方式提取结果信息？还是有更简单的方法？

谢谢

# php - php里面的echo标签

> ID：15762270
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:52:47.920
> 
> 标签：php, wordpress, echo, categories, sidebar

我正在运行一个 wordpress 网站，我试图根据不同的类别回显不同的侧边栏，但我似乎无法将 php 代码放在回显标签中。该代码可以很好地在侧边栏中的不同类别页面上回显不同的内容，但我无法在 echo ' ' 中添加 php 代码，因为它返回错误。这是我的代码：

```
<?php  if ( is_active_sidebar( "main_sidebar" ) ) :  ?>

     <div id="main_sidebar" class="widget-area">
               <?php
               if ( is_category( '7' )) {
               echo 'Sidebar to be echo'd on category page with ID=7';
               }
               else 
               {
               echo 'Sidebar to be echo'd on all the other category pages';
               }   
               ?>
     </div><!-- #first_sidebar .widget-area -->

<?php endif; ?> 
```

这就是我希望它发挥作用的方式：

```
<?php  if ( is_active_sidebar( "main_sidebar" ) ) :  ?>

     <div id="main_sidebar" class="widget-area">
               <?php
               if ( is_category( '7' )) {
               echo '<?php dynamic_sidebar( 'category_fashion' ); ?>';
               }
               else 
               {
               echo '<?php dynamic_sidebar( 'main_sidebar' ); ?>';
               }   
               ?>
     </div><!-- #first_sidebar .widget-area -->

<?php endif; ?> 
```

使用上述代码时出现此错误：

> 解析错误：语法错误，意外的 T_STRING，期待 ',' 或 ';' 在第 6 行的 /home/ignoremu/public_html/wp-content/themes/.../sidebar.php

请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:53:35.047

对你来说最好的方法是完全跳过你的 echo 中的 HTML，然后用 echo 输出结果，如下所示：

```
<?php  if ( is_active_sidebar( "main_sidebar" ) ) :  ?>

     <div id="main_sidebar" class="widget-area">
               <?php
               if ( is_category( '7' )) {
               echo dynamic_sidebar( 'category_fashion' );
               }
               else 
               {
               echo dynamic_sidebar( 'main_sidebar' );
               }   
               ?>
     </div><!-- #first_sidebar .widget-area -->

<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:54:30.720

如果要将单引号放在带有单引号的 echo 中，则必须转义引号：

```
//                      Escaped here
echo 'Sidebar to be echo\'d on category page with ID=7'; 
```

双引号字符串中的双引号也是如此。

编辑：哎呀，没有完全阅读。要解决您的问题更改：

```
if ( is_category( '7' )) {
    echo '<?php dynamic_sidebar( 'category_fashion' ); ?>';
} else {
    echo '<?php dynamic_sidebar( 'main_sidebar' ); ?>';
} 
```

到：

```
if ( is_category( '7' )) {
    echo dynamic_sidebar( 'category_fashion' );
} else {
    echo dynamic_sidebar( 'main_sidebar' );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:54:35.100

你已经在 php 为什么要重新启动 php 呢？下面就可以了。

```
echo dynamic_sidebar( 'category_fashion' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:56:31.230

如果 dynamic_sidebar() 是一个函数，为什么需要回显它，而不是在函数内部返回/回显值，所以调用它，将通过给定的参数返回值

# ios - 我在 iOS UITableView 中有 NSInvalidArgumentException

> ID：15762274
> 
> 赞同：0
> 
> 时间：2013-04-02T10:52:59.737
> 
> 标签：ios, objective-c, uitableview, row

错误是：

```
2013-04-02 14:46:07.180 ECom[7855:c07] -[UITableViewController setItemRow:]: unrecognized selector sent to instance 0x768c770
2013-04-02 14:46:07.180 ECom[7855:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewController setItemRow:]: unrecognized selector sent to instance 0x768c770' 
```

在方法 int 代码的最后一行：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"clPanelSegue"])
    {
        NSIndexPath *path = [self.tableView indexPathForSelectedRow];
        ECOMClPanelDetailViewController *detail = (ECOMClPanelDetailViewController*)segue.destinationViewController;
        NSLog(@"clPanelSeguePathRow = %d", path.row);
        [detail setItemRow:path.row];
    }
} 
```

最后一行的方法是

```
-(void)setItemRow:(int)aItemRow
{
    clDetailItemRow = aItemRow;
} 
```

无法理解出了什么问题。谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:58:26.500

首先，您的详细信息面板似乎不是您认为的那样。根据错误消息，`seque.destinationViewController`is of class `UITableViewController`， not `ECOMClPanelDetailViewController`。这就是您需要首先追踪的内容。

其次，正因为如此，当您发送`setItemView:`消息时，它无法被解释并引发异常。

首先查看 `destinationViewController 的实例化位置（可能是您的 XIB 文件），并确保您设置了正确的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:58:29.167

不是`detail`ECOMClPanelDetailViewController，而是指向 UITableViewController。您可以在情节提要中检查 segue 的标识符，以确保您没有在标识符名称中犯错误。

# android - Robospice 上传文件问题

> ID：15762284
> 
> 赞同：1
> 
> 时间：2013-04-02T10:53:21.437
> 
> 标签：android, robospice

我是[RoboSpice](https://github.com/octo-online/robospice)的新手。我正在尝试上传文件。但我收到了这个错误：

```
 04-02 17:47:31.151: E//RequestProcessor.java:234(11021): org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [java.lang.String] and content type [text/html] 
```

.这是我的请求类：

```
public class UploadFileRequest extends SpringAndroidSpiceRequest<String>{
private static final String TAG = "UploadFileRequest";
private UploadRequestModel requestModel;
private String link;

public UploadFileRequest(UploadRequestModel model, String link) {
    super(String.class);
    requestModel = model;
    this.link = link;
}

@Override
public String loadDataFromNetwork() throws Exception {    

    MultiValueMap<String, Object> parts = new LinkedMultiValueMap<String, Object>();
    parts.add("file1", new FileSystemResource(requestModel.getFile1()));
    parts.add("file2", new FileSystemResource(requestModel.getFile1()));
    return getRestTemplate().postForObject(link, parts, String.class);

}

} 
```

我正在使用：JacksonSpringAndroidSpiceService 类。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:37:27.170

从`JacksonSpringAndroidSpiceService` [源代码](http://bit.ly/14KFBTJ)`application/json`中可以看出，它通过类提供了一个仅用于内容类型的转换器`MappingJacksonHttpMessageConverter`。

对于任何其他内容类型，Spring 都不知道如何处理它。

您可以轻松地添加具有`StringHttpMessageConverter`类子类化的通用型转换器，`JacksonSpringAndroidSpiceService`或基于其源代码创建您自己的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T00:12:16.283

我有一个类似的问题并用以下方法解决了

代替

```
return getRestTemplate().postForObject(link, parts, String.class); 
```

和

```
RestTemplate restTemplate = getRestTemplate();
restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
return restTemplate.postForObject(link, parts, String.class); 
```

希望这可以帮助！

# c# - 为什么要拆分不在 UI 线程上运行的任务以使 WPF 应用程序更具响应性？

> ID：15762294
> 
> 赞同：1
> 
> 时间：2013-04-02T10:53:53.017
> 
> 标签：c#, wpf, multithreading, c#-4.0, task-parallel-library

在第 1 部分[“入门”](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)中

*   亚历山德拉鲁西娜的系列。.NET Framework 4 中的并行编程

为了使 WPF UI 具有响应性，它是通过将密集的计算外包到 UI 之外来完成的。最终，代码改为：

```
for (int i = 2; i < 20; i++)
 {
     var t = Task.Factory.StartNew(() =>
     {
         var result = SumRootN(i);
         this.Dispatcher.BeginInvoke(new Action(() =>
             textBlock1.Text += "root " + i.ToString() + " " + 
                result.ToString() + Environment.NewLine)
             ,null);
     });
 } 
```

更新：**因此将密集计算从 UI 线程中移出。**

[以下是第1 部分文章](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)中的引语：

*   *“为了让 UI 具有响应性，我将使用任务，这是任务并行库引入的一个新概念。任务代表一种异步操作，通常在单独的线程上运行”*
*   *“编译、运行……嗯，UI 是响应式的”*

并且为了从那些单独的任务线程输出到 WPF UI（或避免 InvalidOperationException 说“调用线程无法访问此对象，因为不同的线程拥有它。”）使用了 Dispatcher.BeginInvoke()。

同一系列[“并行编程：任务调度程序和同步上下文”](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/18/parallel-programming-task-schedulers-and-synchronization-context.aspx)的第 2 部分讲述了相同的代码片段（在引入局部迭代变量的小改动之后）：

> “这个需要更彻底的重构。我不能在 UI 线程上运行所有任务，因为它们执行长时间运行的操作，这会使我的 UI 冻结。此外，它将取消所有并行化的好处，因为只有一个用户界面线程。
> 
> 我能做的就是把每个任务拆分成……”

[part1-article与](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)[part2-article](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/18/parallel-programming-task-schedulers-and-synchronization-context.aspx)不矛盾吗？

将不在 UI 线程上运行的任务拆分成多个部分的需要是什么？

我在这里误解了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:01:44.577

我认为这里有两个不同的概念。第 1 部分讨论了在任务中运行代码以不阻塞 UI 线程。第 2 部分讨论并行运行多个任务。一个用于“不阻塞 UI 线程”，另一个用于并行完成更多事情。如果你只有两个线程：UI 线程和任务线程，事情就不会并行发生，你也没有利用并行处理的真正力量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:02:35.890

这些陈述并不矛盾，它们是一个整体。
UI线程负责刷新窗口和其中的控件，因此当您激活它们时会做出反应，用鼠标光标遍历它们等。
如果您要执行长时间运行的操作，例如`for-loop`具有 10000 次迭代，`UI would freeze`然后变得没有反应（窗口会模糊，死亡的蓝色小甜甜圈会出现）。`for-loop`完成后，您的 UI 将再次出现。
为了减轻 UI 线程的额外负担，您将长时间运行的任务放在单独的线程/任务中，以便它们同时执行。您`UI`将保持响应并接受命令（点击、击键等）。也许不相关，但正在努力解决其背后的基础知识

> 无论机器类型如何，用户都希望应用程序在计算时保持响应。这对不同的应用程序意味着不同的东西。对于某些人来说，这意味着提供更逼真的物理效果、更快地从磁盘或 Web 加载数据、快速呈现复杂场景并在页面之间导航、快速找到方向或快速处理数据。无论计算类型如何，用户都希望他们的应用根据他们的输入采取行动，并消除它在“思考”时出现暂停的情况。</p>

在这里阅读[这篇](http://msdn.microsoft.com/en-us/library/windows/apps/hh994635.aspx)文章。

# php - 在 PHP mysql 中的数据库中的所有表中显示具有特定 ID 的行

> ID：15762300
> 
> 赞同：0
> 
> 时间：2013-04-02T10:54:17.240
> 
> 标签：php, mysql

目前我有一个大型数据库，其中包含 5 个以上的表和大量数据。

对于每一行数据，我都有一个用户 ID 作为字段之一。我有这种方式，以便可以识别哪些数据属于哪个用户标识。

现在如何显示具有特定用户 ID 的所有表中的所有数据？

我尝试了一些我在网上找到的示例，这些示例使用 information_schema.tables 显示了所有数据，但是我如何仅从特定的用户 ID 显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:57:59.590

您必须在 mysql 语句中使用 where 子句

**其中用户 ID = 这个**

把它放在你的陈述的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:02:24.817

恐怕没有简单的方法可以做到这一点，您可以：

### 运行多个查询：

对每种类型的表（文章、评论、帖子...）运行一个查询：

```
display_articles_from_select( 'SELECT FROM articles WHERE user_id ... ');
display_comments_from_select( 'SELECT FROM comments WHERE user_id ... '); 
```

### [`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)

仅当每个表中的列彼此“兼容”时，此选项才可用，例如每个表都有`title`和`text`字段。

```
(SELECT title, text FROM articles WHERE used_id = ...)
UNION
(SELECT header AS title, text FROM comments WHERE used_id = ...)
... 
```

### [`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)

如果您有允许这样做的数据库架构，您可以简单地连接表，但没有详细的数据库方案信息，我无法提供示例，也无法确认在您的情况下这是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:02:25.327

从不同表中选择所有数据的基本语法：

表 1、表 2、表 3

```
SELECT t1.*, t2.*, t3.* 
FROM table1 as t1, table2 as t2, table3 as t3
WHERE
t1.userid = '1' and t2.userid = '1' t3.userid = '1' 
```

您可以查看[此网站](http://www.informit.com/articles/article.aspx?p=30875&seqNum=5)以获取更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:13:00.677

这将通过 JOIN Queries 来实现。如果您有任何疑问，请查看此链接。[http://phpweby.com/tutorials/mysql/32](http://phpweby.com/tutorials/mysql/32)或 o/w 给我我将更新的表字段。

我希望这会帮助你..

例如，

```
1). mysql> SELECT * FROM products;
+----+--------------+--------------+
| id | product_name | manufacturer |
+----+--------------+--------------+
|  1 | Shoes        | Company1     |
|  2 | Laptop       | Company2     |
|  3 | Monitor      | Company3     |
|  4 | DVD          | Company4     |
+----+--------------+--------------+
4 rows in set (0.00 sec)

 2). mysql> SELECT * FROM buyers;

    +----+------+------------+----------+
    | id | pid  | buyer_name | quantity |
    +----+------+------------+----------+
    |  1 |    1 | Steve      |        2 |
    |  2 |    2 | John       |        1 |
    |  3 |    3 | Larry      |        1 |
    |  4 |    3 | Michael    |        5 |
    +----+------+------------+----------+ 
```

这将是输出。

```
mysql> SELECT buyers.buyer_name, buyers.quantity, products.product_name FROM buyer
s LEFT JOIN products ON buyers.pid=products.id where buyers.id=1;
+------------+----------+--------------+
| buyer_name | quantity | product_name |
+------------+----------+--------------+
|John        |        1 | Laptop       |
+------------+----------+--------------+ 
```

# javascript - Firebase 存在：onDisconnect 进行交易

> ID：15762301
> 
> 赞同：4
> 
> 时间：2013-04-02T10:54:23.620
> 
> 标签：javascript, firebase

在 auth 回调中，我们将队长添加到列表中，因为我们有一个新玩家：

```
var cptns = new Firebase("http://allure.firebaseio.com/cptns");

cptns.transaction(function(current_value) {return current_value + 1;
}, function(error, committed, snapshot) {
$('#captains').text(snapshot.val());
}); 
```

我的目标是在玩家/队长离开页面时将 current_value 减 1。我确实尝试了没有运气的文档建议，因为当我注销时它不会发出警报（“未连接”）

```
var connectedRef = new Firebase('http://allure.firebaseio.com/.info/connected');
connectedRef.on('value', function(snap) {
  if (snap.val() === true) {
    alert('connected');
  } else {
    alert('not connected');
  }
}); 
```

这也不起作用：

```
 // Get a reference to my own presence status.
     var connectedRef = new Firebase("http://presence.allure.firebaseio.com/.info/connected");
      connectedRef.on("value", function(isOnline) {
        if (!isOnline.val()) {
          cptns.transaction(function(current_value) {return current_value -1;
    }, function(error, committed, snapshot) {
    $('#captains').text(snapshot.val());
    });

    alert("removed 1");

        } 

else{    alert("all good do nothing");

}
      }); 
```

我错过了什么？TIA

（感谢 firebase 为您构建的令人惊叹的平台！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:09:34.843

据我了解，您不能在断开连接时使用事务。此外，`.info/connected`监控单个客户端与 Firebase 的连接，而不是其他用户的连接。

好消息是存在非常简单，假设每个“团队”不会有成千上万的用户，你并不真的需要交易。相反，您可以：

*   维护成员列表
*   在每个成员 onDisconnect 上设置一个存在字段： `firebaseRef.child('member/status').onDisconnect().set('offline')`
*   计算客户端上的成员（相当琐碎）

如果您提供有关客户结构的更多详细信息（团队的结构，团队中有多少玩家等），那么我可以提供更具体的示例。

# sql - 在 Oracle 中填充表

> ID：15762307
> 
> 赞同：-6
> 
> 时间：2013-04-02T10:54:32.367
> 
> 标签：sql, oracle

第一次使用 Oracle SQL，我试图用随机数据填充一个简单的表。

该表创建为：

```
CREATE TABLE COUNTY 
      (COUNTYID NUMERIC(10) NOT NULL,
COUNTYNAME VARCHAR2(20) NOT NULL,
COUNTYREGION VARCHAR(20) NOT NULL,
COUNTYPOPULATION INT NOT NULL,
CONSTRAINT COUNTY_PK PRIMARY KEY (COUNTYID)); 
```

使用countyID 作为自动增量字段。

我还以以下格式插入了 5 个插入语句：

```
INSERT INTO COUNTY
(COUNTYNAME,COUNTYREGION,COUNTYPOPULATION)
 values('Cork','Munster', 150000); 
```

谁能告诉我**如何使用 SQL**用随机数据填充表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:30:37.847

以下代码段应该适合您：

```
declare

v_id  number := 1 ;
v_name varchar2(20) ;
v_region varchar2(20);
v_pop number ;

begin

while (v_id < 123)

loop

v_name    := 'Cork' || v_id;
v_region  := 'Munster' || v_id;
v_pop     := v_id * 10000;

INSERT INTO COUNTY
(COUNTYID,COUNTYNAME,COUNTYREGION,COUNTYPOPULATION)
 values(v_id,v_name,v_region,v_pop);

v_id := v_id +1;

end loop;

commit;
end; 
```

这将在 yr 表中插入 122 行随机数据。要改变这一点，只需改变

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:54:17.930

如果您希望将任何随机数据插入表中 5 次，则下面的查询将正常工作。如果您想要超过 5 行数据，则只需将 5 替换为您想要的数字。

```
insert into COUNTY
select level,'Cork' || level,'Munster' || v_id,150000+level from dual connect by level<=5; 
```

# javascript - 重新初始化 iscroll

> ID：15762310
> 
> 赞同：3
> 
> 时间：2013-04-02T10:54:54.867
> 
> 标签：javascript, html, iscroll

我在我的项目中使用 iScroll4 ( [http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4) )

随着容器高度的变化，我需要为 dom 元素重新初始化 iscroll。反正我能做到吗

例如

```
scroller.reset(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:58:46.690

是的，您需要以下[`refresh()`](http://cubiq.org/iscroll-4#refreshmethod)功能：

> iScroll 需要知道包装器和滚动条的正确尺寸。它们在启动时第一次计算，但如果您的代码更改了元素大小，则需要警告 iScroll 您正在弄乱 DOM。
> 
> 这是通过以`refresh`正确的时间调用函数来实现的。请密切关注我，了解这将为您节省数小时的滚动挫败感。

您可以按如下方式使用它：

```
myScroll.refresh(); 
```

其中`myScroll`表示您初始化 iScroll 的变量。

# java - 在循环中添加 keyListener ？是否可以？

> ID：15762311
> 
> 赞同：2
> 
> 时间：2013-04-02T10:54:54.927
> 
> 标签：java, swing, listener, actionlistener, keylistener

我有输入此代码的侦听器：

```
 someBoolean = true;
        case FILL_POLYGON:      
        {
            if (greenLightForFilling == true)
            {
                while (someBoolean)
                {
                    fillPressed = true;
                    fillPolygon(polyFiller);
                }

            }
            break;

        }  // end FILL_POLYGON 
```

当我击中`f`.

是否可以在该循环内添加**另一个**侦听器`while`，以便当用户`f`再次点击时，`someBoolean`会得到`false`？

请注意，我已经有一个用于输入 switch-case 的 key-listener。

问候

**编辑 - 相关代码：**

```
public class DrawPolygons
{
    public static void main (String[] args) throws FileNotFoundException
    {
        // attaching the menu to the frame
        final JFrame frame = new JFrame("Draw polygons");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new DrawingPanel());
        frame.pack();
        frame.setVisible(true);
    }

}

/**
 * Main class
 * @author X2
 *
 */
class DrawingPanel extends JPanel implements MouseListener, MouseMotionListener ,KeyListener
{
    /**
     *    private variables
     */

    // dimensions of the window
    private static final long serialVersionUID = 1L;
    private static final Dimension MIN_DIM = new Dimension(300, 300);
    private static final Dimension PREF_DIM = new Dimension(500, 500);

    // Hot-keys hit by the user - used for keyboard listening
    private static final char FILL_POLYGON = 'F';
    private static final char SAVE_POLYGONS = 'S';
    private static final char LOAD_POLYGONS = 'L';
    private static final char FILL_POLYGON_LOWERCASE = 'f';
    private static final char SAVE_POLYGONS_LOWERCASE = 's';
    private static final char LOAD_POLYGONS_LOWERCASE = 'l';
    private static final String SPACE = " ";

    // boolean flags
    private boolean greenLightForFilling = false;
    private boolean polygonDone = false;
    private boolean loading = false;
    private boolean loading2 = false;
    private boolean fillPressed = false;

    // data structures

    // The dummy point tracking the mouse
    private final Point trackPoint = new Point();                    

    // The list of points making up a polygon
    private ArrayList<Point> points = new ArrayList<Point>();   

    // holds edges of current polygon
    private ArrayList<Edge> edges = new ArrayList<Edge>();  

    // array-list of vertices
    private ArrayList<Point> vertices = new ArrayList<Point>();      

    // all the polygons
    private ArrayList<Polygon> polygons = new ArrayList<Polygon>();  

    // count the vertices
    private int verticesCounter = 0;

    // hold polygon vertices for the polygon-filling
    private Vector<Point> polygon = new Vector<Point>();

    private ArrayList<Point> bigVerticesList= new ArrayList<Point>();

    static int counter = 0;
    /**
     * Setting the dimensions of the window
     */
    public Dimension getMinimumSize() { return MIN_DIM; }

    public Dimension getPreferredSize() { return PREF_DIM; }

    /**
     *  The constructor
     */
    DrawingPanel()
    {
        super();
        addMouseListener(this);
        addMouseMotionListener(this);
        addKeyListener(this);
        setFocusable(true);
        requestFocusInWindow();
    }

    /**
     *  The drawing itself 
     */
    public void paintComponent(Graphics g)
    {

        super.paintComponent(g);

        // draw previous polygons

        if (this.polygons.size() > 0)
            drawPreviousPolygons(g);

        int numPoints = points.size();
        if (numPoints == 0)
            return; // nothing to draw

        Point prevPoint = points.get(0);

        // draw polygon
        Iterator<Point> it = points.iterator();
        while (it.hasNext())
        {
            Point curPoint = it.next();
            draw(g, prevPoint, curPoint);           
            prevPoint = curPoint;
        }

        // now draw tracking line or complete the polygon
        if (polygonDone == true)
        {
            Point point0 = points.get(0);       // grab the starting point (x,y) 

            // draw the last edge between the starting point & the last point 
            draw(g, prevPoint, point0);

        }

        else  // polygonDone == false
            draw(g, prevPoint, trackPoint); 

    }

    /**
     * MouseListener interface 
     */
    public void mouseClicked(MouseEvent evt)
    {
        int x = evt.getX();
        int y = evt.getY();

        if (polygonDone == false)
        {
            Point p = new Point(x,y);       // new point 
            vertices.add(p);                // add to vertices list 
            this.verticesCounter++; 
        }

        if (verticesCounter > 1)    // create a new edge 
        {
            int verSize = vertices.size();      // grab number of vertices
            Point p1 = vertices.get(verSize - 1); // grab the last vertex 
            Point p2 = vertices.get(verSize - 2); // grab the one before last vertex 

            // create the current edge between the two points P1 and P2
            Edge currentEdge = new Edge(p1,p2);

            // add the edge to the edges list 
            if (polygonDone == false)
                this.edges.add(currentEdge);

        }

        switch (evt.getClickCount())
        {
            case 1: // single-click
                if (polygonDone == true)
                {
                    /**
                     * remove all the entries from the edges list - preparing for the next polygon  
                     */

                    // first add the last edge between the final vertex and the first vertex
                    Point p1 = null ,p2 = null;
                    if (!loading)
                    {
                        p1 = this.vertices.get(0);  // grab 1st vertex 
                        int verSize = vertices.size();                      
                        p2 = vertices.get(verSize - 1);     // grab last vertex 
                        // create the last edge between the final point & the first point 
                        Edge currentEdge = new Edge(p1,p2);

                        // add the last edge to the edges list 
                        this.edges.add(currentEdge);        
                    }

                    if (loading)
                        loading = false;

                    // create the new polygon structure with the edges 
                    Polygon poly = new Polygon(this.edges , this.vertices);

                    // add the polygon to the polygons array 
                    this.polygons.add(poly);

                    // reset edges ,reset points , reset vertices-counter , reset vertices  

                    greenLightForFilling = true;

                    verticesCounter = 0;
                    edges.clear();
                    points.clear();  
                    vertices.clear();
                    polygonDone = false;
                    repaint();
                    break;

                }
                points.add(new Point(x, y));
                repaint();
                break;

            case 2: // double-click
                polygonDone = true;
                points.add(new Point(x, y));
                repaint();
                break;

            default: // ignore anything else
                break;
        }
    }

    /**
     * MouseMotionListener interface 
     */
    public void mouseMoved(MouseEvent evt)
    {
        trackPoint.x = evt.getX();
        trackPoint.y = evt.getY();
        repaint();
    }

    /**
     * draw points and lines 
     * @param g
     * @param p1
     * @param p2
     */
    private void draw(Graphics g, Point p1, Point p2)
    {
        int x1 = p1.x;
        int y1 = p1.y;

        int x2 = p2.x;
        int y2 = p2.y;

        // draw the line
        g.setColor(Color.green.darker());
        g.drawLine(x1 + 3, y1 + 3, x2 + 3, y2 + 3);

        // now just paint the edge between those two points
        g.setColor(Color.green);
        g.fillOval(x1, y1, 8, 8);

        g.setColor(Color.black);
        g.fillOval(x2, y2, 8, 8);

        greenLightForFilling = false;       
    }

    /**
     * Run on the arrayList of the Polygons , and draw the previous polygons 
     * that we already made 
     * @param g
     */
    private void drawPreviousPolygons(Graphics g) 
    {
        int i = 0;

        while (i < this.polygons.size())
        {
            Polygon currentPoly = polygons.get(i);  // grab current polygon
            int j = 0; 

            ArrayList<Edge> edges = currentPoly.getPolygonEdges();

            // draw the edges of the polygon
            while (j < edges.size()) // run on all the edges of the polygon
            {
                Edge edgeCurrent = edges.get(j);        // grab current edge

                // drawing the edge 

                // now draw it - grab the two points that create the edge
                int x1 = edgeCurrent.getX1();
                int y1 = edgeCurrent.getY1();

                int x2 = edgeCurrent.getX2();
                int y2 = edgeCurrent.getY2();

                // draw the line first so that the points appear on top of the line ends, not below
                g.setColor(Color.green.darker());
                g.drawLine(x1 + 3, y1 + 3, x2 + 3, y2 + 3);

                // now just paint the edge between those two points
                g.setColor(Color.green);
                g.fillOval(x1, y1, 8, 8);

                g.setColor(Color.black);
                g.fillOval(x2, y2, 8, 8);

                // proceed to next edge 

                j++; 

            }

            i++;    // next polygon

        }

    }

    @Override
    public void keyTyped(KeyEvent keyEvent) 
    {
        PolygonFiller polyFiller = new PolygonFiller();
        char key = keyEvent.getKeyChar();

        switch(key)
        {
            /**
             *  Fill the polygons 
             */
            case FILL_POLYGON:      
            {
                if (greenLightForFilling == true)
                {
                    while (true)
                    {
                        fillPolygon(polyFiller);
                    }

                }
                break;

            }  // end FILL_POLYGON

            case FILL_POLYGON_LOWERCASE:
            {
                if (greenLightForFilling == true)
                {
                    fillPolygon(polyFiller);
                }
                break;              

            }

            /**
             *  save all polygons in a .scn file
             */
            case SAVE_POLYGONS :         
            {
                if (greenLightForFilling == true)
                {
                    saveWorkspace();
                } 
                break;  
            }   // end SAVE_POLYGONS

            case SAVE_POLYGONS_LOWERCASE:
            {
                if (greenLightForFilling == true)
                {
                    saveWorkspace();
                } 
                break;  
            }

            /**
             *  Delete everything & load all polygons from .scn file
             */
            case LOAD_POLYGONS:      
            {
                loadWorkspace();
                break;
            }   

            case LOAD_POLYGONS_LOWERCASE:
            {
                loadWorkspace();
                break;
            }

            default: break;  
        } // end switch

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:01:26.947

我不明白为什么不。有几件事需要考虑。

键监听器本身运行在事件调度线程上；您不希望该线程上出现此循环，因为第二个按键的代码也在该线程中运行。所以第一次按键需要启动一个 SwingWorker 或其他线程来运行填充。

我建议多边形填充器要么运行缓慢（做一点填充，然后以某种方式暂停，除非填充需要相当长的时间），否则它必然会在第二次按键之前完成填充。它可能还需要“刷新”填充输出，以便缓冲不会消除可见效果。

--- 附录

我不会创建额外的 keylistener，我只会使用我拥有的那个。我会在那个监听器中有一个布尔开关，指示我是否处于“绘图模式”；如果不是，则启动绘图循环并更改开关，如果是，则终止绘图循环并更改开关。

我会编写一个类来执行填充循环，并使其可运行。当需要启动循环时，我会实例化它并在 SwingWorker 线程中运行它。循环会填充一点，睡眠一点，然后再填充一点直到完成。我对你的填充循环一无所知，所以你必须在这里填写。

您的 keylistener 可以保留对循环填充对象的引用，并在其上调用一个方法来设置您提到的“结束循环”布尔值。该类中的循环将检查填充之间的布尔值。

网上有很多关于如何启动在事件调度线程之外运行的 SwingWorker 线程的示例；我可以创建一个，但您似乎对此没有任何具体问题，因此应该提供一般案例文档和示例。如果您尝试并遇到特定问题，请将该问题发回给 SO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:03:11.423

您可以通过以下示例：

```
 Component.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e)
        {
            //Execute when button is pressed
        }
    }); 
```

只需更改`ActionListener`为您需要的任何侦听器。但是，由于您已经有一个侦听器，您可以只使用那个侦听器来进行击键。

# java - 我正在学习java。这里有什么错误？它告诉 String 不是一个语句

> ID：15762318
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:55:46.400
> 
> 标签：java

这里的错误是什么？它告诉 String 不是语句

```
import java.util.Scanner;

public class family{

    public static void main( String[] args){

       Scanner user_input = new Scanner(System.in);

       String "first_name";
       System.out.print("Enter your first name");
       first_name= user_input.next();

       String "surname";
       System.out.print("Enter your Surname");
       surname=user_input.next();
       String "your_name";
       your_name= first_name+" "+surname;
       System.out.print(+your_name);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:57:27.520

给出字符串标识符。如;

```
String firstName = "first_name"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:57:47.623

试试`String first_name;`- 这应该工作;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T10:58:36.437

```
String "first_name"; 
```

是错的

```
String first_name; 
```

是正确的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T10:57:29.250

代替

```
String "first_name"; 
```

利用

```
String variable_name_here = "Value for Name"; 
```

或使用：

```
String first_name; 
```

然后你可以更改`first_name`程序中变量的值。

```
first_name = "Value for Name"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T11:04:58.930

您的变量声明不遵循 java 变量命名标准。

来自[**java 文档**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)：

> 变量名区分大小写。变量的名称可以是任何合法标识符——无限长度的 Unicode 字母和数字序列，以字母、美元符号“$”或下划线字符“ *”开头。然而，惯例是始终以字母开头变量名，而不是“$”或“* ”。此外，按照惯例，从不使用美元符号字符。您可能会发现在某些情况下自动生成的名称将包含美元符号，但您的变量名称应始终避免使用它。下划线字符也有类似的约定；虽然以“_”开头的变量名称在技术上是合法的，但不鼓励这种做法。不允许使用空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T10:59:03.070

您没有正确声明 String 变量。

遵循以下修改后的代码。用于`Eclipse`获得帮助以避免编译时错误。

```
import java.util.Scanner;

class Family {    
    public static void main( String[] args){    
       Scanner user_input = new Scanner(System.in);

       String first_name;
       System.out.print("Enter your first name");
       first_name = user_input.next();

       String surname;
       System.out.print("Enter your Surname");
       surname = user_input.next();
       String your_name;
       your_name = first_name + " " + surname;
       System.out.print(your_name);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T11:00:16.130

您需要查看创建对象的方式。

```
String "first_name"; 
```

不是有效的java。要创建一个对象，它需要一个标识符，所以它应该如下所示：

```
String first_name = new String("first name"); 
```

因为创建字符串有点特殊，所以可以/应该缩短为：

```
String first_name = "first name"; 
```

此外，在 java 中，通常不会在这样的变量名中使用下划线。firstName 是通常的做法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-02T11:05:44.873

`String "surname";`这是一个无效的陈述。语句应该是赋值、声明、方法调用或任何表达式。

在这种情况下，字符串“姓氏”是一个声明，但由于标识符不遵循命名规则，因此它给出了错误。（标识符可以以字母或 _ 或 # 或 $ 开头，并且只能包含字母、数字和 _ 或 # 或 $）

所以相应地更改标识符。例如。`String surname = "surname";`

# c++ - C ++中的fstream错误

> ID：15762325
> 
> 赞同：6
> 
> 时间：2013-04-02T10:56:02.727
> 
> 标签：c++, gcc, syntax-error, codeblocks, fstream

我真的需要你的帮助。看来我不能在 C++ 中进行文件操作。我使用 fstream 进行了一些文件操作，但是当我编译它时，会出现一个错误，上面写着：

```
|63|error: no matching function for call to 'std::basic_fstream<char>::open(std::string&, const openmode&)'| 
```

我犯了什么错误？

以下是部分源代码：

```
#include<stdio.h>
#include<iostream>
#include<fstream>
#include<string>    

using namespace std;

inline int exports()
{
string fdir;
// Export Tiled Map
cout << "File to export (include the directory of the file): ";
cin >> fdir;
fstream fp; // File for the map
fp.open(fdir, ios::app);
if (!fp.is_open())
    cerr << "File not found. Check the file a file manager if it exists.";
else
{
    string creator, map_name, date;
    cout << "Creator's name: ";
    cin >> creator;
    cout << "\nMap name: ";
    cin >> map_name;
    cout << "\nDate map Created: ";
    cin >> date;
    fp << "<tresmarck valid='true' creator='"+ creator +"' map='"+ map_name +"'   date='"+ date +"'></tresmarck>" << endl;
    fp.close();
    cout << "\nCongratulations! You just made your map. Now send it over to tresmarck@gmail.com for proper signing. We will also ask you questions. Thank you.";
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T11:00:01.727

[`fstream::open()`](http://en.cppreference.com/w/cpp/io/basic_fstream/open)接受`std::string`类型作为文件名的 是在 C++11 中添加的。`-std=c++11`使用标志编译或`fdir.c_str()`用作参数（改为传递`const char*`）。

请注意，`fstream()`如果提供了文件名，构造函数可以打开文件，这将消除对 的调用`fp.open()`：

```
if (std::cin >> fdir)
{
    std::fstream fp(fdir, std::ios::app); // c++11
    // std::fstream fp(fdir.c_str(), std::ios::app); // c++03 (and c++11).
    if (!fp.is_open())
    {
    }
    else
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T11:00:06.527

您需要启用 C++11 模式才能使`std::basic_fstream<char>::open(std::string&, const openmode&)`重载可用。

将其中之一传递给 gcc：

`-std=c++11`或者`-std=c++0x`

在 C++11 之前，`istream::open`函数只接受 C 字符串。（你可以这样称呼它 `fp.open(fdir.c_str(), ios::app);`）

# sql - Sql Server 日期时间问题

> ID：15762337
> 
> 赞同：-4
> 
> 时间：2013-04-02T10:56:42.730
> 
> 标签：sql, sql-server

我想以 110 格式检索我的日期（这里您可以参考格式*“ [http://www.sql-server-helper.com/sql-server-2008/sql-server-2008-date-format.aspx](http://www.sql-server-helper.com/sql-server-2008/sql-server-2008-date-format.aspx) ”* ) 但我的系统以 109 格式返回日期)。下面是我的代码

```
DECLARE @startDate DATETIME
SET @startDate = SYSDATETIME()
PRINT(@startDate) 
```

请帮忙，因为我正在做一些以 110 格式获取日期的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:01:15.983

只需转换为varchar ...

```
DECLARE @startDate DATETIME
SET @startDate = GetDate()
PRINT(Convert(varchar(max),@startDate,110)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:01:44.750

尝试这个：

```
DECLARE @startDate DATETIME = SYSDATETIME() 
PRINT(Convert(varchar(10), @startDate, 110)) 
```

# perl - Perl - 如何确定用户是否通过搜索引擎之一访问网站

> ID：15762338
> 
> 赞同：0
> 
> 时间：2013-04-02T10:56:45.560
> 
> 标签：perl

有什么方法可以查明用户是否通过任何一个使用 Perl 的搜索引擎（Google/Yahoo/Bing 等）访问网站？在我的项目中，我必须确定用户是否通过其中一个搜索引擎访问该网站。

CGI referer 可用于找出用户之前查看的内容，但在获取 URL 后，必须对所有搜索引擎进行匹配，以确定它是否来自搜索引擎（Google/Yahoo/Bing 等），这将不可行

我的 $cgi = 新的 CGI；打印 $cgi->referer();

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:06:26.760

这几乎就是您必须做的：获取推荐人，然后对照搜索引擎列表检查它。除了检查 URL 的文本之外，没有其他方法可以确定任意 URL 是否属于搜索引擎。

# c++ - 如何使用捕获子句从 lambda 获取状态引用？

> ID：15762340
> 
> 赞同：1
> 
> 时间：2013-04-02T10:57:02.297
> 
> 标签：c++, lambda, closures, this, std

`[=]`Lambda 可以使用语法从创建成员的上下文中捕获成员。我假设必须有一个状态引用存储在 lambda 中，类似于`this`指针。

```
class Class
{
public:
    void Function()
    {
        /*
         * pass this lambda expression as parameter to another
         * function and from there recover the this pointer which
         * would be of the type Class* for further usage.
         */

        [=](int)->int { /* do something with this->Member */ }
    }
private:
    int Member;
}; 
```

有没有办法从 lambda 表达式中获取引用指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:10:19.180

不，您不能从 lambda 对象中恢复捕获的值或引用。

lambda 类型没有公共数据成员，唯一的公共成员函数是函数调用运算符、构造函数、析构函数、赋值运算符和转换为函数指针的运算符（如果它不捕获任何内容）。这些都不能用于提取捕获的实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:06:58.520

为了补充 Mike 的回答：您实际上可以恢复存储在 lambda 中的任何信息......通过在调用时返回它（或将其存储在 out-parameters 中）。甚至可以在 lambda 中捕获对变量的引用，请记住，该引用仅在 lambda 存在时才可用。

当然，这可能需要更改 lambda 的签名。

```
[=](int i) -> std::pair<int, X*> {
    return std::make_pair(i, this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:08:41.707

试试 [this] 而不是 [=]。

如需进一步参考，我建议 [http://www.cprogramming.com/c++11/c++11-lambda-closures.html](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)

目前我倾向于使用 [&] 作为捕获大部分时间。它很便宜，而且通常 lambda 表达式足够短，所以这是安全的。

# javascript - Fullcalendar 函数从 url 查询字符串创建事件数据

> ID：15762341
> 
> 赞同：0
> 
> 时间：2013-04-02T10:57:03.943
> 
> 标签：javascript, jquery, query-string, fullcalendar

我正在尝试将 url 中传递的一些参数作为查询字符串，并创建必要的事件数组以将数据加载到 fullcalendar 中。我查看了从 JSON 提要中获取数据的事件函数，并尝试根据我的需要修改它，但未成功。

谁能给我一些关于如何获取查询字符串值数组的指示（这部分我很好），然后让 fullcalendar 将这些作为事件加载。提前致谢。

肖恩

**更新了我从查询字符串创建的数组的示例代码。示例测试网址如下：/test.html?Event=Test1,Test2,Test3&Date=2013-04-01,2013-04-02,2013-04-03**

```
 var qsParm = new Array();

    qsParm['Event'] = null;
    qsParm['Date'] = null;
    qs();

    function qs() {
        var query = window.location.search.substring(1);
        var parms = query.split('&');
        for (var i = 0; i < parms.length; i++) {
            var pos = parms[i].indexOf('=');
            if (pos > 0) {
                var key = parms[i].substring(0, pos);
                var val = parms[i].substring(pos + 1);
                qsParm[key] = val;
            }
        }

        var title = qsParm['Event'].split(',');
        var start = qsParm['Date'].split(','); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:44:45.243

迄今为止您的字符串：

```
var i = 0;
var start ="27,8,72".split(",");
for(i=0;i<start.length;i++){
  start[i]=parseInt(start[i],10);
  if(isNaN(start[i])){
    throw(new Error("Invalid date:"+start.join(",")));
  }
}
var date=new Date(start[2],start[1]-1,start[0]);
console.log(date); 
```

使用新的 Date(year,month,day)。请注意，月份是第 1 个月，因为日期构造函数使用基于零的月份，因此 0 是一月。

# algorithm - 如何对旋转矩形的点进行排序？

> ID：15762346
> 
> 赞同：1
> 
> 时间：2013-04-02T10:57:15.610
> 
> 标签：algorithm

![在此处输入图像描述](https://i.stack.imgur.com/IjxgF.jpg)

它是度数小于 90 的旋转矩形。它可以是顺时针或逆时针。我喜欢将这些点排序为矩形的原始序列。像文本注释一样，1、2、3、4……

我的算法是： 1.找到最左、右、上、最下的点， 2.比较top.x和bottom.x 3.根据比较值，可以找到四个角的序列。4.从四个角点，计算矩形边缘的线函数，然后排列其他点。

我不确定是否有另一种更有效或更优雅的算法来解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:06:02.283

假设矩形已顺时针旋转小于 90 度。在这种情况下，请注意顶行中的第 (i+1) 个点始终位于第 i 个点的下方和右侧。所以我们可以剥离行：

1.  按 y 坐标（即从上到下）对所有点进行降序排序。
2.  将这些排序的点放在一个链表中。（这不是必需的，但会使点删除更有效。）
3.  设置 i = 1。
4.  设置 lastX = -inf。
5.  设置 p 指向已排序的点列表中的第一个元素。如果没有剩余元素，我们就完成了。
6.  从 p 开始，扫描点列表，直到找到 x 坐标大于 lastX 的点，表明它在上一个添加的点的右侧。（在每一行的第一次迭代中，这将始终取列表中的第一个点。）
7.  如果能找到这样一个点：

    *   从链表中删除该点并将其标记为 i。
    *   将 p 设置为列表中的下一个点。
    *   设置 i = i + 1。
    *   将 lastX 设置为刚刚添加的点的 x 坐标。
    *   转到 6 以查找该行中的下一个点。

    除此以外：

    *   我们已经完成了这一行，并且其中的所有点都已从链表中删除。转到 4 开始下一行。

这是一个 O(n^2) 算法，因为一旦找到了一行中最右边的点，它就会浪费地遍历所有剩余的点，然后再从顶部开始处理下一行。这可能已经足够好了，但是**时间复杂度可以降低到 O(nlog n)**通过维护一个包含从左到右排序的所有点的单独链表，并在自上而下列表中的每个节点中提供一个额外的字段，该字段指向从左到右列表中的相应节点。由于最上面一行中最右边的点始终是整个点集中的最右边的点，我们可以通过测试刚刚删除的点是否对应于整个点中的最后一个点来检测一行何时在 O(1) 时间内完成从左到右的列表。每当从自上而下的列表中删除一个点时，它也必须从从左到右的列表中删除。

**但是如果矩形逆时针旋转呢？** 正如评论者 nm 指出的那样，如果没有进一步的信息，就无法将这种情况与顺时针旋转区分开来：逆时针旋转 d 度的 n x m 矩形看起来与顺时针旋转 (90-d) 度的 m x n 矩形完全一样。如果您有一些其他信息可以区分这些情况，则可以使用与以前相同的算法处理逆时针旋转，但要注意第一行（或任何行）的宽度，然后重新排列标签。

# c# - 是否有必要在 WPF/Silverlight 行为中调用 base.OnAttached()？

> ID：15762349
> 
> 赞同：1
> 
> 时间：2013-04-02T10:57:23.057
> 
> 标签：c#, wpf, silverlight, behavior

从 派生时`Behavior<T>`，大多数代码示例在重写的方法中显式调用`base.OnAttached()`(and )。`base.OnDetaching()`这是必要的，还是只是“好的做法”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:11:22.060

在派生类中调用 base.OnAttached() 和 base.OnDetaching() 什么都不做，因为这些方法在 Behavior 基类中是空的。

对于更一般的解释，这个答案很好地总结了它：[什么时候应该在重写方法中调用 base.Method()，以及在团队中编写代码时如何标记它？](https://stackoverflow.com/questions/4721541/when-should-you-call-base-method-in-overridden-method-and-how-to-mark-this-wh)

# php - 我将我的 codeigniter webapp 移动到测试服务器，现在我没有将任何数据插入到我的表中？

> ID：15762361
> 
> 赞同：0
> 
> 时间：2013-04-02T10:58:04.527
> 
> 标签：php, mysql, configuration, codeigniter-2

我在本地开发了一个codeigniter webapp，然后一切都很顺利，现在为了测试目的我将应用程序移动到测试服务器，现在没有数据被插入到数据库中。可能的原因是什么？这种错误可能会出错的事情是什么。

我知道这很难查明，但我只想要一份我应该做的检查清单。我检查了数据库配置文件。

我的应用程序在 codeigniter 中，操作系统是 ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:03:27.113

检查：用户有执行插入的权限。

你可以尝试把mysql_error()。检查问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:40:54.437

除了对数据库配置的常规检查之外，本地数据库表必须具有与测试服务器相同的字段。

这不是唯一的检查，而是多种可能性之一。

# xml - Perl - XML/HoH 中的循环依赖检查

> ID：15762363
> 
> 赞同：2
> 
> 时间：2013-04-02T10:58:07.593
> 
> 标签：xml, perl, graph, circular-dependency

我正在尝试使用示例工作流定义构建批处理/工作流脚本，如下所示。

```
<project id="1" name="Project One" desc="" status="">
    <module id="11" name="Module Eleven" desc="" status="">
        <group id="101" name="Group 101" desc ="" status="" skip="false">
            <task id="1001" type="Shell" priority="10" desc="" author="" added="" modified="" status="" skip="false">
                <predecessors ref="1002" />
                <program folder="." object="test.pl" />
                <arguments value="job1 10 0" />
            </task>
            <task id="1002" type="Shell" priority="10" desc="" author="" added="" modified="" status="" skip="false">
                <predecessors ref="1003" />
                <program folder="." object="test.pl" />
                <arguments value="job2 5 0" />
            </task>
            <task id="1003" type="Shell" priority="10" desc="" author="" added="" modified="" status="" skip="false">
                <predecessors ref="1001" />
                <program folder="." object="test.pl" />
                <arguments value="job3 15 0" />
            </task>
        </group>
    </module>
</project> 
```

我使用 XML::Simple 将 XML 转换为哈希值。

我正在寻找一种有效的逻辑来检测 XML 或 HoH 中的循环依赖关系。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:34:16.660

```
use Graph       qw( );
use XML::LibXML qw( );

my ($xml_qfn) = @ARGV
   or die "usage\n";

my $parser = XML::LibXML->new();
my $doc = $parser->parse_file($xml_qfn);

my %seen_task_ids;
my $task_dep_graph = Graph->new();

for my $task_node ($doc->findnodes('/project/module/group/task')) {
   my $id = $task_node->getAttribute('id');
   die("Duplicate task id $id\n") if $seen_task_ids{$id}++;

   my @deps =
      map $_->getAttribute('ref'),
       $task_node->findnodes('predecessors');

   $task_dep_graph->add_edge($id, $_) for @deps;
}

if (my @cycle = $task_dep_graph->find_a_cycle()) {
   die("Task dependency cycle @cycle\n");
} 
```

# android - Google Play 应用内结算版本 3 是否支持退款？

> ID：15762370
> 
> 赞同：25
> 
> 时间：2013-04-02T10:58:27.410
> 
> 标签：android, in-app-purchase, in-app-billing, google-play-services

我已经让 IAB v3 正常工作，并且能够购买托管项目。但是，为了继续开发和测试，我想退还购买的款项，以便再次尝试进行相同的购买。我登录了我的 Google Checkout 商家帐户并成功退款了购买。但是，应用程序仍然认为用户购买了该项目。我退款已经好几个星期了，所以这不是延迟问题。

基本上，在我的`QueryInventoryFinishedListener`实现中`inventory.hasPurchase(SKU_REMOVE_ADS)`，即使在退款之后（`SKU_REMOVE_ADS`是我正在销售的商品的 SKU），也总是返回 true。我期待它在退款处理后返回错误。

如果您查看[IAB 参考的“处理退款”部分](http://developer.android.com/google/play/billing/billing_admin.html#billing-refunds)，它表示您的应用需要监听 IN_APP_NOTIFY 消息。但是[，IN_APP_NOTIFY 的文档](http://developer.android.com/google/play/billing/v2/api.html#billing-action-notify)特定于 v2 的应用内计费。它似乎不是 v3 中可用的东西，因为它在 v3 参考中的任何地方都没有提到，我也无法在他们用来演示 IAB v3的[示例 TrivialDrive 应用程序中找到任何参考。](https://github.com/obriand/android-iabv3-trivialdrive)

那么 IAB v3 是否支持退款/取消购买？有没有人尝试过并让它工作？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-04T20:42:55.903

就 Google Play 而言，消耗品和非消耗品之间确实没有区别；这种区别完全取决于您在应用程序中实现的内容。因此，即使您正在测试的 SKU 旨在为非消耗品（例如，永久高级升级），出于测试目的，您也可以将其视为消耗品并进行消费，以便再次购买。

一种方便的方法是在您的应用程序中设置一个临时测试菜单（例如，通过在测试期间将一个菜单项添加到您的应用程序的主选项菜单中），然后让该项目的处理程序调用您的 IabHelper 实例的 consumeAsync() 方法您想再次测试购买的 SKU。这将消耗该项目，从而使其立即可用于从您的设备回购。

当然，您仍然希望从 Google Checkout 退还购买的款项，这样您就不会花费自己的钱来测试您的应用程序。

我要补充一点，如果您使用此类静态值进行测试，consumeAsync() 似乎也可以很好地重置测试 SKU android.test.purchased。

关于更新购买状态以反映退款，我亲身经历过（其他开发人员发布了许多类似的报告），通过 Checkout 手动发起退款（例如，从 TrivialDrive 应用程序进行测试购买）需要*几天*才能得到结果更改产品的购买状态（更改为 INAPP_PURCHASE_STATE_REFUNDED）。

（知道苦难爱陪伴，一些额外的报告可以在这个讨论线程中找到：https: [//plus.google.com/+AndroidDevelopers/posts/R8DKwZDsz5m](https://plus.google.com/+AndroidDevelopers/posts/R8DKwZDsz5m)）

至少部分原因是由于 Google Play 在设备上缓存了购买数据。

根据我的经验，重新启动设备有时会导致 Google Play 从 GP 服务器刷新其缓存。因此，重新启动后也可能会检测到由于通过 Checkout 取消或退款订单而导致的更改。

这么长的周转期似乎对您没有好处，因为您不知道用户何时会重新启动。但是话又说回来，您知道每台设备最终都会重新启动，因此，如果您担心收到退款的用户最终应该被阻止使用退款的 IAB 产品，那么延迟几天可能无关紧要，只要它最终发生。

当然，请记住，缓存将在重新启动时刷新的概念是未记录的并且是轶事（到目前为止，就像相当多的 IAB3 和 TrivialDrive 行为一样）。民间传说，他们称之为。

触发更新的另一件事是用户尝试购买产品时。一旦启动购买，系统必须确保该产品尚未拥有，因此它会更新 Google Play 缓存。以我个人的经验，这种情况一直存在。但同样，这不是一个非常实用的检查退款的方法，因为这将涉及显示未出价的购买对话框，并且还会显示一条错误消息，告诉用户“您已经拥有它”（如果他们*确实*拥有它）。

*这在*哪里*派上用场的情况是，当用户在她的一台设备上为 IAB 商品付款，然后尝试在另一台设备上访问该商品时，该设备与用于购买该商品的帐户相同。这种情况下的购买信息通常还没有被缓存。但是您可以在购买对话框中添加一点说明，如果该项目已被购买，尝试重新购买应该可以在当前设备上免费使用它。有时需要两次（用户发起的）购买尝试才能最终获得 IabHelper.BILLING_RESPONSE_RESULT_ITEM_ALREADY_OWNED 响应。是的，有点笨拙，但我认为从人的角度来看，它可以适当地突出显示消息和确认对话框的道歉措辞，告诉他们他们拥有该项目等 :-) )。*

 *实际上，您可以看到 Google 可能不希望世界上每个 IAB 应用程序的每个实例在每次访问应用程序的购买数据时都访问其服务器*，*特别是考虑到他们正在建议开发人员检查有哪些内容每次启动应用程序时购买。这也是您的应用程序的性能问题 - 这就是缓存的全部内容。所以你需要知道更新缓存的触发器，我还没有找到一个正式记录的地方（除了，我们假设，在代码中）。所以准备好把手伸到你面前，开始在黑暗中摸索吧。

有关 Google Play 缓冲的更多信息，请参阅此页面：

[在什么情况下可以在客户端设备上使用应用内计费版本 3 服务器更改？](https://stackoverflow.com/questions/15384067/under-what-conditions-are-in-app-billing-version-3-server-changes-made-available)

我会注意到，在您帖子的代码片段中，您调用的是 inventory.hasPurchase(SKU_REMOVE_ADS)，但这只会告诉您购买是否在库存对象中返回的购买列表中；它不会告诉您该SKU 的购买*状态。*我知道这是 TrivialDrive 应用程序使用的方法，但该应用程序不处理退款和取消。要检测退款和取消的订单，您需要以下内容：

```
Purchase removeAdsPurchase = inventory.getPurchase(SKU_REMOVE_ADS);
if(removeAdsPurchase != null) {
  int purchaseStateForRemoveAds = removeAdsPurchase.getPurchaseState();
  if(purchaseStateForRemoveAds == 1) {
    //Do cancelled purchase stuff here
  }
  else if(purchaseStateForRemoveAds == 2) {
    //Do refunded purchase stuff here
  }
} 
```

关于退款和取消订单的好消息是，AFAIK 两者都完全由开发商选择。因此，如果您发现获得这些的用户能够在此后很长一段时间内继续使用您的应用程序，并且如果您发现很多用户都在利用这一点，那么您可以决定是否要继续提供退款所有情况。我最好的猜测是这不会有问题。即使某些获得退款的用户在那之后可以使用您的应用程序一段时间，这看起来也没什么大不了的。

为了测试，您需要能够非常快速地重新尝试购买，并且使用 consumeAsync() 绝对适用于该目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:47:42.687

我建议您在应用处于开发阶段时使用静态产品 ID。

现在确保您正在使用相同的 Gmail ID 测试应用程序并获得退款？为了测试退款方案，我认为您可以将`android.test.refunded`其用作产品 ID。

如果这不起作用，那么您可以在首次启动您的应用程序时首先在 google play 中检查**购买的总商品**和**可用商品**，如果您在两个调用中获得相同的产品 ID（不应该是这种情况如果是这种情况，请将此错误报告给谷歌）然后进行 api 调用以制作与消费相同的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T00:34:24.110

自从发布这个问题以来，我注意到我需要打电话`getPurchase(...).getPurchaseState()`检查它的价值。可能的值为 0（已购买）、1（已取消）或 2（已退款）。﻿</p>

但是，在我的情况下，即使该项目已退款，它仍然会重新调整 0（已购买）。我在此处发布此信息以防对其他人有所帮助。*

# java - 跳过 While 条件的 Java Do/While 循环

> ID：15762380
> 
> 赞同：1
> 
> 时间：2013-04-02T10:58:43.827
> 
> 标签：java, loops, while-loop, do-while

我在使用 Do/While 循环时遇到问题。无论用户键入什么字符或字符串，都会显示 if 块，即使不满足 while 条件也是如此。

更具体地说，此代码*旨在*提供条件（您要计算分数吗？）并根据用户响应，继续 if 块（用户 = y ---> 你的名字等），或者，当不满足 which 语句，跳过它（用户 = n ----> 程序结束）。

我使用的代码如下：

请记住，此代码尚未完成，并且显示的一些变量尚未使用。

```
import java.util.Scanner;

public class Test1 {

    public static void main (String [] args) {

        //Declares letters to allow repetition of program
        final String START= "y";

        //Declerations of variables

        //Declares space for user's name
        String Name;

        //Declares space for user's year of birth
        int Year;

        //Declares space for user's double value, day and month of birth entered
        //by user
        double birthDM;

        //Declares space for int value day of birth, calculated from double value
        int day;

        //Declares space for int value month of birth, calculated from double value
        int month;

        //Declares space for int of calculated score
        int Score = 0;

        //Declares space for the string value of test (check wording)
        String confirmation;

        //Declares space for total number of scores calculated
        int Total;

        //Initilisaton of Scanner object
        Scanner sc;

        //Declares the space for the string that will carry the initilising letter 
        String userStart;

        //Declares space for the char that will activate program
        char yesChar;

        // Program Start

        //User input to begin loop or not (test)
        System.out.println(
                "The following program will calculate an score from your name and birthday.");
        System.out.println(" ");

        do {
            System.out.println("Would you like to calculate and score?");
            sc = new Scanner(System.in);
            userStart=sc.next();
            if (uProgStart.equalsIgnoreCase(PROGSTART));
            {
                System.out.println("What is your name?");
                userName=sc.next();
                System.out.println("What is the year of your birth?");
                birthYear = sc.nextInt();
            }
        } while(!uProgStart.equalsIgnoreCase(PROGSTART));

        System.out.println("Program End");
    }
} 
```

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:04:18.103

去掉这里的分号：

```
if (uProgStart.equalsIgnoreCase(PROGSTART)); 
```

这将解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:03:15.283

只需`;`从 `if (uProgStart.equalsIgnoreCase(PROGSTART))`

像这样 ：

```
if (uProgStart.equalsIgnoreCase(PROGSTART))
{
    System.out.println("What is your name?");
    userName=sc.next();

    System.out.println("What is the year of your birth?");
    birthYear = sc.nextInt();
}
else
    System.exit(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:09:39.453

您已经给出了这样的`;`after `if`，这 `if(....);`意味着`;`是一个空语句。

它使`{ ... }`后`if`一个*块*。

所以在检查条件后没有任何反应。

*   如果为真，则执行空语句`;`并且程序转到该块。
*   如果它是假的，`else`那么再次没有，程序进入阻塞状态。

您将不得不***删除***`;`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:05:47.657

您可以`if`从 the 中提取事物，`while`而不是两次检查相同的条件 - 并`;`在一段时间后删除多余的，如果等。

```
do {
    System.out.println("Would you like to calculate and Ess-score?");
    sc = new Scanner(System.in);
    uProgStart=sc.next();
} while(!uProgStart.equalsIgnoreCase(PROGSTART))

System.out.println("What is your name?");
userName=sc.next();
System.out.println("What is the year of your birth?");
birthYear = sc.nextInt(); 
```

# java - 如何避免在网络中的每台计算机上都安装 Swing 应用程序的配置文件？

> ID：15762382
> 
> 赞同：0
> 
> 时间：2013-04-02T10:58:48.643
> 
> 标签：java, swing, jasper-reports

我有一个安装在服务器中的 Swing 应用程序，为了访问它，我在网络中的每台计算机上创建了一个快捷方式，它工作得很好。该应用程序使用**jrxml**文件来生成文档，它们被打包在一个名为**Cycloplan**的文件夹中并且工作正常，但我仍然有一些技术问题，每次我在配置文件中进行一些更新时，我都必须去每个计算机并将**Cycloplan**文件夹粘贴到其中，因此我正在寻找一种方法来避免在出现更新时进行此操作。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:10:22.293

将`.jrxml`文件打包到 Jars 中并使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署该批次。当 Jar 更新时，它们将自动更新。

# windows-7 - Windows 7 x64 可以与 XPDM 驱动程序一起使用吗？或 geforce 卡在 TCC 模式下工作？

> ID：15762384
> 
> 赞同：0
> 
> 时间：2013-04-02T10:58:51.997
> 
> 标签：windows-7, cuda, windows-xp, gpgpu, windows-7-x64

我使用 GeForce 卡通过 CUDA 进行 GPGPU 计算。一个众所周知的问题是 WDDM 在 CPU 端引入了巨大的开销，导致不可忽略的延迟增加。

我还需要在 MS Windows 环境中运行这些程序，并且我想在 Windows 7 x64 等现代系统中运行这些程序。

那么，有什么方法可以让 Windows 7 与 XPDM 一起工作？我认为这在 Vista 甚至在 Windows 7 x86 中是可能的（不确定）。

TCC 模式仅适用于 Tesla 产品（我买不起的产品，我也不需要它们通过 GeForce 提供的功能）。是否有任何解决方法可以让 GeForce 在 TCC 模式下工作？

在此先感谢，哈维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:40:53.760

win 7 的 NVIDIA GPU 驱动程序必须处于 WDDM 模式或 TCC 模式。该驱动程序没有其他可能性。正如您所说，TCC 模式不适用于 GeForce 品牌的 GPU，因此您只能使用 WDDM 模式。

# c# - 如何将图表从excel文件复制到power point？

> ID：15762385
> 
> 赞同：5
> 
> 时间：2013-04-02T10:58:54.233
> 
> 标签：c#, excel, .net-4.0, office-interop

我有一个 C# 代码构建一个包含几个图表的 excel 文件。我正在使用 Excel 到`Microsoft.Office.Interop.Excel`12。

这很好，但同时我需要生成一个包含相同图表的 PowerPoint 演示文稿。

有没有办法复制 `Microsoft.Office.Interop.Excel.ChartObject`到 PowerPoint 文件？或者以任何其他方式以编程方式将这些图表复制到 PowerPoint 演示文稿中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:31:35.117

我想这应该工作

```
 using xlNS = Microsoft.Office.Interop.Excel;
            using Microsoft.Office.Interop.PowerPoint;

            xlNS.ApplicationClass excelApplication = null;
            xlNS.Workbook excelWorkBook = null;
            xlNS.Worksheet targetSheet = null;
            xlNS.ChartObjects chartObjects = null;
            xlNS.ChartObject existingChartObject = null;
            Microsoft.Office.Interop.PowerPoint.ShapeRange shapeRange = null;
            Microsoft.Office.Interop.PowerPoint.Slide CurSlide;

            excelApplication = new xlNS.ApplicationClass();//Create New Excel
            excelWorkBook = excelApplication.Workbooks.Open(Excelpath,
                 paramMissing, paramMissing, paramMissing, paramMissing, paramMissing,
                 paramMissing, paramMissing, paramMissing, paramMissing, paramMissing,
                 paramMissing, paramMissing, paramMissing, paramMissing);

            Ws = (Excel.Worksheet)excelWorkBook.Worksheets[6];//Your Sheet that contain Chart
            Ws.Activate();
            targetSheet = (xlNS.Worksheet)(excelWorkBook.Worksheets["SheetName"]);
            chartObjects = (xlNS.ChartObjects)(targetSheet.ChartObjects(paramMissing));
            existingChartObject = (xlNS.ChartObject)(chartObjects.Item(1));

            existingChartObject.Copy();
            shapeRange = CurSlide.Shapes.Paste();//Paste it to your Current Slide
            shapeRange.Left = 435;
            shapeRange.Top = 80; //Formatting your chart 
```

# c# - 将每个 Window 窗体作为 MdiParent 的子窗体打开

> ID：15762389
> 
> 赞同：2
> 
> 时间：2013-04-02T10:59:07.927
> 
> 标签：c#, .net

如果我使用以下代码使用子菜单选项打开**表单 B** ，我的`MdiParent`表单具有`Menu`并且`Submenu` 父表单是说**表单 A**

 **```
B addbill = new B();
B.Show();
B.MdiParent = this; 
```

它打开**Form B**作为**Form A**的子级。现在我想在单击表单 B 上的按钮后**从**表单**B打开****表单 C**，**表单 B**将关闭，**表单 C**将作为**表单 A 的**子项 再次打开，然后单击表单 C 上的按钮**，**表单**C**将关闭，**表单 B**将以**表格 A的形式打开**

 ******那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-27T05:39:46.173

在 FormB 按钮单击事件上编写以下代码：

```
 FormC fc=new FormC();
 fc.MdiParent=this.MdiParent;
 fc.Show(); 
```

并在 FormC 加载事件中编写以下代码：

```
FormB fb=new FormB();
fb.Hide();
fb.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:52:17.310

在 Form B 按钮单击调用 Form C 的位置，您必须将 FormB 的 MdiParent 分配给 FormC 的 MdiParent，即 FormA。之后，您可以关闭 FormB。

//FormB按钮点击

```
private void button1_Click(object sender, EventArgs e)
        {
            FormC frm = new FormC();
            frm.MdiParent = this.MdiParent; // assign MdiParent of FormB to FormC
            frm.Show();
            this.Close();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:02:46.900

在 B 关闭之前：

```
C.MdiParent = B.MdiParent; // which is pointing to A 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T03:14:16.093

```
 private void button1_Click(object sender, EventArgs e)
    {

        Analysis an = new Analysis();//on login click open anothe form on same perrent
        an.MdiParent = this.MdiParent;
        an.Show();

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-12T19:33:10.673

它的工作..试试这个代码

```
 private void btCountSale_Click(object sender, EventArgs e)
    {
        bool exist = false;
        foreach (Form f in Application.OpenForms)
        {
            if (f.Name== "frmCounterSale")
            {
                exist = true;
                f.BringToFront();
                break;
            }
        }
        if (exist == false)
        {
            frmCounterSale fm = new frmCounterSale();
            fm.MdiParent = this.MdiParent; 
            fm.Show();
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-12T19:22:55.947

它的工作..试试这个代码

```
 private void btCountSale_Click(object sender, EventArgs e)
    {
        bool exist = false;
        foreach (Form f in Application.OpenForms)
        {
            if (f.Text == "Counter Sale")
            {
                exist = true;
                f.BringToFront();
                break;
            }
        }
        if (exist == false)
        {
            frmCounterSale fm = new frmCounterSale();
            fm.MdiParent = this.MdiParent; 
            fm.Show();
        }
    } 
```********

# facebook - 这可以在标准 facebook 登录的用户墙上写一篇文章吗？

> ID：15762390
> 
> 赞同：0
> 
> 时间：2013-04-02T10:59:15.953
> 
> 标签：facebook, login

我想知道这是否可以创建从外部源获取一些数据并在用户登录到他的 Facebook 帐户后将其发布到用户墙上的应用程序。这在脸书上可行吗？

# sql-server-2008 - 通过存储过程从表中的逗号分隔列中获取记录

> ID：15762394
> 
> 赞同：0
> 
> 时间：2013-04-02T10:59:35.833
> 
> 标签：sql-server-2008, stored-procedures, comma

我有一个存储这样的值的表：

```
Name      CategoryId
Gaurav    4,6
Amit      2,4
Ajay      6,2 
```

**2,4,6（这是名称存在于其主表中的类别的 ID）**

像这样的类别的主表。

```
Id  CategoryName
2   Motor
4   Scooter
6   Car 
```

*我想首先从表中获取所有记录，并且想要类别名称（而不是类别 ID）。*

```
Name       CategoryName
Gaurav     Scooter, Car
Amit       Motor, Scooter
Ajay       Car, Motor 
```

这是如何通过存储过程完成的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:38:21.167

像这样的东西可能会起作用：

```
with peopleCategory as
(
  select p.Name
    , c.CategoryName
  from people p
    inner join category c on charindex(',' + cast(c.Id as varchar(100)) + ','
                                     , ',' + p.CategoryId + ',') > 0
)
select p.Name
  , CategoryName = stuff
    (
      (
        select ',' + pc.CategoryName
        from peopleCategory pc
        where p.Name = pc.Name
        order by pc.CategoryName
        for xml path('')
      )
      , 1
      , 1
      , ''
    )
from people p
order by Name 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/76eb1/7)。

但是，将这些表规范化为合理的结构会**好得多，**这样您就可以在没有上述复杂性的情况下查询它们。

# c++ - GCC 会将算术保留为运行时的固定值还是编译输出？

> ID：15762400
> 
> 赞同：5
> 
> 时间：2013-04-02T10:59:46.813
> 
> 标签：c++, c, math, optimization, gcc

我想知道 GCC 是否会将具有固定值的算术保留在运行时执行，或者是否会将其设置为它的答案，例如。

```
const float halfPi = M_PI/2; 
```

它会“简化”方程式并设置

```
const float halfPi = 1.57079; 
```

还是将算法留给运行时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T11:46:01.060

好吧......如果我们谈论**积分**，答案将是明确的“**是**”（在通用术语下*恒定折叠*）。即使是冗长的计算也可以在编译时完成......这实际上是模板非类型参数评估和（现在）`constexpr`变量所必需的。

在**浮点**表示的情况下，一旦计算变得更复杂，事情就会变得有点复杂。问题是不同大小（以及精度）的浮点表示对于相同的基本输入会产生不同的结果。

要理解为什么，假设它`float`最多具有 5 位精度：

```
 5.0000 + 0.00001
-> 5.00001
-> 5.0000 (truncation to 5 digits)

   5.0000 + 0.00001 + ... + 0.00001 (10 times)
-> 5.0000 + 0.00001 + ... + 0.00001 (9 times)
-> 5.0000 + 0.00001 + ... + 0.00001 (8 times)
-> ...
-> 5.0000 
```

令人惊讶……对吧？如果编译是在运行时完成的，那么结果可能会根据是否使用寄存器（具有更大位宽）而有所不同。

因此，是否发生常量折叠可能取决于您使用*的优化标志集。*例如，[对于 gcc](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)，这可能由`-freciprocal-math`（真的不知道）控制。因为即使编译器肯定*可以*做到，你可能会告诉它不要（在不知不觉中）。

因此，唯一可靠的测试方法是检查编译器输出；通过检查目标代码或通过要求编译器发出程序集。您将需要检查您使用的每个选项组合的此输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T11:15:36.857

今天是你的幸运日，因为你会发现 Agner Fog 和他令人惊叹的深度[`c++`手册](http://www.agner.org/optimize/#manuals)！如果你看一下[这个](http://www.agner.org/optimize/optimizing_cpp.pdf)`8.2`部分，你会发现基本上所有的编译器都能够进行常量折叠。

尽管使用编译器选项确保它确实发生在这种特殊情况下，但您应该按照上面的建议检查程序集输出（使用`-S`）。我喜欢`asm("MY_LABEL:");`在代码中放置类似附近的内容以便于查找，但请记住，这可能会改变代码的含义，从而改变编译器解释它的方式。在这种情况下，我不相信它会改变任何东西。

# ios - 检测 UiScrollView 上的触摸位置

> ID：15762401
> 
> 赞同：2
> 
> 时间：2013-04-02T10:59:47.103
> 
> 标签：ios, animation, uiscrollview, touch

我需要从 UIScrollView 获取触摸位置。但是当我为我的滚动视图创建一个子类时：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
  NSArray *touchesArray = [touches allObjects];
  UITouch *touch = (UITouch *)[touchesArray objectAtIndex:0];
  CGPoint point = [touch locationInView:self];
  self.position = point;} 
```

该函数`touchesBegan`并不总是被调用。如果我快速滑动，`touchesBegan`则永远不会调用，而是`scrollViewDidScroll`直接调用。

我无法使用`UIGesture (UITapGestureRecognizer, ... )`，因为用户不会点击或滑动。

还有其他方法可以从 UIScrollView 获取位置吗？

**编辑 ：**

谢谢ThXou：[https ://stackoverflow.com/a/15763450/1752843](https://stackoverflow.com/a/15763450/1752843)

UIScrollView 子类：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event{
    self.position = point;
    return self;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T11:13:16.303

要检测滚动视图内的触摸位置，请尝试此代码

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
[scrollView addGestureRecognizer:singleTap]; 

- (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture
 { 
   CGPoint touchPoint=[gesture locationInView:scrollView];
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-21T12:15:43.560

您也可以使用`scrollview.panGestureRecognizer`' `locationInView`方法在视图中获取触摸的坐标。`scrollView`根据您的要求，这可以在任何委托方法中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T11:54:46.473

我在 SO 中看到[了一个答案](https://stackoverflow.com/a/1668643/1257854)，我认为它可以解决您的问题。似乎 SDK 不再将触摸处理方法传递给 UIScrollView 子类。因此，您应该执行 a`hitTest:`以将触摸传递给您的子类。

有关更多信息，请参阅答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-12T09:18:44.010

```
scrollView.delaysContentTouches = NO; 
```

它将使得 touchesBegan 和其他触摸事件将在 scrollViewDidScroll 之前触发。

hitTest 是一个 hack，不应该是首选解决方案。

# php - 使用 PHP 如何将已保存在 SQL 中的图像显示为图像路径

> ID：15762402
> 
> 赞同：1
> 
> 时间：2013-04-02T10:59:51.570
> 
> 标签：php

我正在尝试从我的 SQL 数据库中检索已使用图像路径保存的图像。图像保存在服务器上。当我检索图像时，没有返回任何内容。

```
if(isset($_GET))
{
  include_once "mysql_connect.php"; 
  $text = $_GET['text']; 

  if($text=="")
  {

  $query = mysql_query("SELECT `URL` FROM `gallery` WHERE `img_text` LIKE '1'")
  or die(mysql_error());  

  while( $rows=mysql_fetch_array($query) )
  {
   $search[] = $rows[0];

  }

 $result = array();
 $result["result"] = 500;
 $result["message"] = "Database Read Successfully";
 $result["rows"] = $search;
 echo json_encode($result);
 exit; 
```

代码示例用于在用户不输入值的情况下进行搜索。SQL 语句中的“URL”是存储图像路径的字段。图像路径值是完整的 URL [http://example.com/images/test.jpg](http://example.com/images/test.jpg)并存储为 VARCHAR(200) 。任何意见，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:06:06.643

您的代码应该不能正常工作。你没有结束`if`声明。

此外，当`$text`不为空时，您没有对数据库的任何查询......

你需要类似的东西：

```
if($text==""){
  $query = mysql_query("SELECT `URL` FROM `gallery` WHERE `img_text` LIKE '1'")
  or die(mysql_error());  
}

//when $text is not empty...
else{
  $query = mysql_query("SELECT `URL` FROM `gallery` WHERE `img_text` LIKE '".$text."'")
  or die(mysql_error());  
}

while( $rows=mysql_fetch_array($query)){
    $search[] = $rows[0];
} 
```

顺便说一句，尝试使用[PDO](http://php.net/manual/es/book.pdo.php)而不是`mysql_query`，最后一个已经过时并且容易受到 SQL 注入的攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:07:40.233

图像在服务器中，因此路径仅在那里有效。

如果您执行以下操作：

```
echo json_encode($result); 
```

我猜你正在将此信息返回给客户端，如果你想显示它们，图像路径在那里没有价值！

如果您想向用户显示您需要使用 HTML 标记的图像，并使用**FROM THE SERVER**`img`的路径填充 src 属性。

# qt - 明确设置值时抑制Qt信号的正确方法是什么

> ID：15762404
> 
> 赞同：10
> 
> 时间：2013-04-02T11:00:03.627
> 
> 标签：qt, signals, qobject

我从 QWidget 派生类中得到了一个包含三个 QSpinBoxes（例如坐标）的类。`valueChanged()`至少在以下三种情况下，信号被连接并发出：

1.  上/下按钮
2.  手动输入的号码
3.  `setValue()`

但是，在使用时`setValue()`，我想抑制信号，因为我不想拥有（三个）信号。据我了解，有两种方法可以解决这个问题：

1.  `QObject::blockSignals()`
2.  使用指示值是否被明确设置的标志

两种变体都有效，但我认为它们根本不是直截了当的：对于第一个，我通常会阻止所有信号并且我需要`blockSignals(true)`为所有底层小部件设置（blockSignals 不会阻止我的应用程序中的子 QObjects）。对于第二个，我需要在每个更新方法中查询标志，并且尽管我不需要它们，但会引发信号。

是否有任何通用的设计模式可以防止这种行为？如果不是，您更喜欢哪种变体？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T20:49:39.627

第三个选项是继承 QSpinBox，在那里实现所需的功能，并使用派生类而不是 QSpinBox - 这隐藏了派生类中所有相关的复杂性，并允许您像使用 QSpinBox 一样使用它。

例如，下面的类

我的QSpinBox.h

```
#ifndef MYQSPINBOX_H
#define MYQSPINBOX_H

#include <QSpinBox>

class myQSpinBox : public QSpinBox
{
    Q_OBJECT
public:
    myQSpinBox(QWidget * parent = 0 );
protected:
    bool valueBeingSet;
public slots:
    void setValue (int val);
private slots:
    void On_valueChanged(int val);
signals:
    void valueChangedNotBySet(int val);
};

#endif // MYQSPINBOX_H 
```

我的QSpinBox.cpp

```
#include "myQSpinBox.h"

myQSpinBox::myQSpinBox(QWidget * parent)
        : QSpinBox(parent)
        , valueBeingSet(false)
{
    connect(this,SIGNAL(valueChanged(int)),this,SLOT(On_valueChanged(int)));
}

void    myQSpinBox::setValue ( int val )
{
    valueBeingSet = true;
    QSpinBox::setValue(val);
    valueBeingSet = false;
}

void myQSpinBox::On_valueChanged(int val)
{
    if(!valueBeingSet)
        emit valueChangedNotBySet(val);
} 
```

将`valueChangedNotBySet(int);`在情况 1\. 和 2\. 中发出，但不会在情况 3\. 中发出，保持所有 QSpinBox 功能不变

# python - 列表函数意外动作

> ID：15762408
> 
> 赞同：0
> 
> 时间：2013-04-02T11:00:09.523
> 
> 标签：python, list, function, recursion

```
def print_list(l):
    for item in l:
        if isinstance(item, list):
            print_list(item)
        else:
            print(item) 
```

我已经编写了这个函数，它使用递归来正确打印列表，但我的问题是，当我给它一个参数时，`[[1, 2, 3], 4]`根据我的说法，它应该在显示后终止，`3`但它仍然正确显示所有 4 个值是什么原因，有人能启发我吗.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:02:29.863

我认为您误解了递归。

外部列表有两项，一项是列表，一项是数字 4。该`print_list()`函数`print_list()`再次调用以打印内部列表，然后调用`print(4)`第二个元素。

所以，这就是发生的事情：

1.  `print_list([[1, 2, 3], 4])`-> 循环 2 个项目

    1.  `print_list([1, 2, 3])`-> 循环 3 个项目

        1.  `print(1)`
        2.  `print(2)`
        3.  `print(3)`

    2.  `print(4)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:09:06.173

当我尝试你的功能时，我得到了

```
1
2
3
4 
```

作为输出。这正是您所期望的，因为您的函数首先进入递归，循环遍历`[1, 2, 3]`. 这打印`1`到`3`. 然后递归结束，返回到原始调用，打印外部列表中的第二个元素，即`4`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:13:32.033

你为什么希望程序在三点结束？如果您说递归停止并打印出数字 3，那么您是对的，但此时原始列表仍未完全处理。如果你写下你的程序的步骤，它可能是这样的：

*   迭代可迭代 [[1, 2, 3], 4] 中的所有元素
*   第一项 [1, 2, 3] 是列表吗？-> 是的
*   使用第一项调用 print_list
    *   遍历 [1, 2, 3] 中的所有项目
    *   第一项是列表吗？-> 没有
    *   打印 1
    *   第二项 2 是列表吗？-> 没有
    *   打印 2
    *   第三项 3 是列表吗？-> 没有
    *   打印 3
    *   已到达列表末尾，请返回
*   第二项 4 是列表吗？-> 没有
*   打印 4

# asp.net - 如何一次选择 1 个在 Gridview 中使用的单选按钮

> ID：15762411
> 
> 赞同：0
> 
> 时间：2013-04-02T11:00:21.170
> 
> 标签：asp.net

我将数据绑定到 gridview，如下所示。在这里，我需要为每个组一次选择 1 个单选按钮。如何在gridview中实现这一点

![在此处输入图像描述](https://i.stack.imgur.com/k1at2.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:02:54.830

尝试使用`name`单选按钮的属性
或者您可以设置`GroupName="group"`单选按钮的属性

参考
[如何在 asp.net 的网格视图中使用单选按钮](https://stackoverflow.com/questions/3163421/how-to-use-radio-buttons-in-grid-view-in-asp-net)

更多教程
[http://www.c-sharpcorner.com/uploadfile/krishnasarala/select-single-radio-button-in-gridview-in-Asp-Net/](http://www.c-sharpcorner.com/uploadfile/krishnasarala/select-single-radio-button-in-gridview-in-Asp-Net/)

## 编辑 1

正如上面的教程所建议的

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
        DataKeyNames="AuthId">
   <Columns>
     <asp:TemplateField ShowHeader="false">
        <ItemTemplate>
        <asp:RadioButton ID="rdbauthid" runat="server" 
             onclick="javascript:CheckOtherIsCheckedByGVID(this);" />
        </ItemTemplate>
     </asp:TemplateField>
     <asp:BoundField HeaderText="AUTHOR NAME" DataField="AuthName" />
     <asp:BoundField HeaderText="AUTHOR LOCATION" DataField="AuthLocation" />
   </Columns>
 </asp:GridView> 
```

并创建一个java脚本函数如下

```
<script type="text/javascript">
    function CheckOtherIsCheckedByGVID(spanChk) {
            var IsChecked = spanChk.checked;
            if (IsChecked) {
                spanChk.parentElement.parentElement.style.backgroundColor = '#228b22';
                spanChk.parentElement.parentElement.style.color = 'white';
            }
            var CurrentRdbID = spanChk.id;
            var Chk = spanChk;
            Parent = document.getElementById("<%=GridView1.ClientID%>");
            var items = Parent.getElementsByTagName('input');
            for (i = 0; i < items.length; i++) {
                if (items[i].id != CurrentRdbID && items[i].type == "radio") {
                    if (items[i].checked) {
                        items[i].checked = false;
                        items[i].parentElement.parentElement.style.backgroundColor = 'white'
                        items[i].parentElement.parentElement.style.color = 'black';
                    }
                }
            }
        }
</script> 
```

# perl - 如何在 Perl 中获取父类实例

> ID：15762416
> 
> 赞同：2
> 
> 时间：2013-04-02T11:00:44.100
> 
> 标签：perl, perl-module

我在 Perl 中使用/创建了很多类，我需要在其中做的一件常见事情是访问父对象的某些属性。例如，假设我有 Class_A 和 Class_B，它们就像这样简单：

`Class_A.pm`

```
package Class_A;
use strict;
use warnings;

sub new {
    my $class = shift;
    my $this = {
        history_data => [],
    };
    bless $this, $class;
} 
```

`Class_B.pm`

```
package Class_B;
use strict;
use warnings;

sub new {
    my $class = shift;
    my $this = {
        history_data => [],
    };
    bless $this, $class;
} 
```

Class_A 可以`use`Class_B 并创建一个实例作为属性。两者都有属性`history_data`，但如果 Class_B 是由 Class_A 的实例创建的实例，我希望 Class_B`hitory_data`在其父对象中使用。

所以，我一直以来所做的就是在创建子实例时传递一个引用，如下所示：

```
#!/usr/bin/perl
use strict;
use warnings;
use Class_A;
use Class_B;

my $class_a = new Class_A;

$class_a->{instance_of_B} = new Class_B parent => $class_a; 
```

我这样做非常简单，但是当需要使用 Class_B 时，可以通过 Class_A 中的某个方法创建该实例。这里的问题是，虽然 Class_B 有它自己的属性，但我希望它在作为其父级时使用 Class_A 的属性。

这很好用，但我有好几次想知道是否存在一种方法来做到这一点，而无需将父引用传递给子代。类似于 Perl 中已经实现的调用父对象的方法。

所以，这是我的问题。Class_B 有没有办法在不直接接收引用的情况下访问其父 Class_A 的实例？

谢谢。:-)

**编辑：另一种说法是：**

Class_B 有没有办法在没有传递引用的情况下说“我目前是 Class_B 的一个实例，生活在 Class_A 的一个属性中，该属性当前在它自己的属性上具有 x、y 和 z 值”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:23:32.100

正如 Michael Carman 正确指出的那样，如果您希望 B 类对象知道它属于哪个 A 类对象，您必须明确告诉它。

但是，您至少可以做的是通过让 A 类负责创建其 B 类组件来简化用户界面，例如：

```
package Class_A;
use strict;
use warnings;

sub new {
    my $class = shift;
    my $this = {
        history_data => [],
    };
    bless $this, $class;
    $this->{instance_of_B} = Class_B->new( parent => $this );
    return $this;
} 
```

附言。请注意，如果 Class A 和 Class B 对象都持有对彼此的引用，那么您刚刚创建的是[循环引用](http://perldoc.perl.org/perlref.html#Circular-References)。Perl 只有简单的引用计数垃圾回收，不能自动检测这种引用循环；这意味着，如果您随后让两个对象超出范围而没有显式破坏循环中的至少一个链接，则这些对象将永远不会被垃圾收集（直到您的程序结束）并且您的代码最终会泄漏内存。

解决此问题的一种方法是[削弱](http://perldoc.perl.org/Scalar/Util.html)其中一个引用——通常是从 B 到 A 的引用，假设 A 类对象是外部代码实际引用的对象——如下所示：

```
package Class_B;
use strict;
use warnings;
use Scalar::Util qw(weaken);

sub new {
    my $class = shift;
    my $this = { @_ };
    weaken $this->{parent}; 
    bless $this, $class;
} 
```

请注意，作为副作用，如果有人直接获取对 B 类对象的引用，让其父 A 类对象超出范围，然后尝试直接调用 B 类对象的方法，则 B 类对象可能会发现它的父对象只是消失了，对它的引用变得未定义。不幸的是，这是处理 Perl 的垃圾收集方法不可避免的副作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T12:51:51.720

不。一个对象只有在你为它定义和设置一个属性时才知道它的父对象。（在您的情况下是一个哈希条目。）Perl 不会在后台跟踪谁创建了谁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T17:28:51.727

这里的某个地方似乎存在设计问题。但是，看看[Aspect::Library::Wormhole](http://search.cpan.org/perldoc/Aspect%3a%3aLibrary%3a%3aWormhole)是否有帮助。

根据具体情况，使用[Beam::Wire](http://search.cpan.org/perldoc/Beam%3a%3aWire)等依赖注入框架可能会有所帮助。

### 更新

我不提倡将下面的代码作为“好的”解决方案甚至是“好的”实践，但这里`Wormhole`可能会有所帮助：

```
package A;
use strict; use warnings;

sub new {
    my $class = shift;
    bless {
        b => undef,
        history_data => [],
    } => $class;
}

sub set_b {
    my $self = shift;
    $self->{b} = B->new;
    return $self->{b};
}

package B;

use strict; use warnings;

sub new {
    my $class = shift;
    my $owner = shift;
    bless {
        history_data => $owner->{history_data} // [],
    } => $class;
}

sub add_event {
    my $self = shift;
    push @{ $self->{history_data} }, [ @_ ];
    return;
}

package main;

use strict; use warnings;
use Aspect;
use YAML;

aspect Wormhole => 'A::add_b', 'B::new';

my $x = A->new;
my $y = $x->set_b;

$y->add_event(Horizon => 180, 0, 'Terminal');

print Dump $x;
print Dump $y; 
```

# excel - 绘制图形 Excel VBA 时自动数据范围识别

> ID：15762419
> 
> 赞同：0
> 
> 时间：2013-04-02T11:00:59.323
> 
> 标签：excel, graph, vba

我有一个生成两列数据的 VBA 代码。重复此分析以在相同列中生成更多数据，但条件不同，并将此数据放在第一次迭代的输出下方。如何获取代码以在生成的每个数据块旁边生成带有平滑线的 XY 散点图？我的尝试如下，但是我遇到了三个问题：1）在调试停止宏之前它只生成一个图，2）它生成一个条形图而不是散点图 3）我如何获得每个生成的图以按比例放置在它从中提取的数据旁边，我得到一列图表？

```
 Sub TestExample()

   Dim NoIteration As Integer
   Dim Iteration As Integer
    NoIteration = Range("N26").Value

    Dim YieldIteration As Integer
    Dim NoOfJumps As Long
    Dim minyield As Long
    Dim maxyield As Long
    Dim jump As Long
        NoOfJumps = Range("Q24").Value
        minyield = Range("Q25").Value
        maxyield = Range("Q26").Value
        jump = Range("Q27").Value

    Dim xaxis As Range
    Dim yaxis As Range
        Dim c As Chart
       Dim Sh As String
        Sh = ActiveSheet.Name

    Range("M29:T1000").Select
    Selection.Clear

    For jump = 0 To NoOfJumps

        For Iteration = 0 To NoIteration
                    'Print Intervals
                    Range("M30").Offset(NoIteration + Iteration + 4, 0).Value = Range("V19").Value * Iteration

                    'Solve weights for minimum Spot SD for each given interval
                    SolverReset
                    SolverOk SetCell:="$T$18", MaxMinVal:=2, ValueOf:="0", ByChange:="$O$20:$R$20"
                    SolverAdd CellRef:="$T$17", Relation:=2, FormulaText:=Range("M30").Offset(NoIteration + Iteration + 4, 0).Value
                    SolverAdd CellRef:="$T$20", Relation:=2, FormulaText:=1
                    SolverAdd CellRef:="$T$7", Relation:=1, FormulaText:=minyield + jump 'State min required yield
                    SolverAdd CellRef:="$T$7", Relation:=3, FormulaText:=maxyield + jump 'State max required yield
                    SolverAdd CellRef:="$O$20:$R$20", Relation:=3, FormulaText:="0"
                    SolverSolve UserFinish:=True
                    SolverFinish KeepFinal:=1

                    'Print Income Return, SD
                    Range("N30").Offset(Iteration + jump * 50, 0).Value = Range("T7").Value
                    Range("O30").Offset(Iteration + jump * 50, 0).Value = Range("T8").Value

                    'Print Spot Return, SD
                    Range("N30").Offset(NoIteration + Iteration + 4 + jump * 50, 0).Value = Range("T17").Value
                    Range("O30").Offset(NoIteration + Iteration + 4 + jump * 50, 0).Value = Range("T18").Value

                    'Print Total Return, SD
                    Range("N30").Offset(NoIteration * 2 + Iteration + 8 + jump * 50, 0).Value = Range("AC17").Value
                    Range("O30").Offset(NoIteration * 2 + Iteration + 8 + jump * 50, 0).Value = Range("AC18").Value

        Next Iteration

        Set yaxis = Range(Range("N30").Offset(Iteration + jump * 50, 0), Range("N30").End(xlDown))
        Set xaxis = Range(Range("O30").Offset(Iteration + jump * 50, 0), Range("$O30").End(xlDown))

Set c = ActiveWorkbook.Charts.Add
ActiveChart.Location Where:=xlLocationAsObject, Name:=Sh
'Set c = c.Location(Where:=xlLocationAsObject, Name:="Sheet1")
With c
    .ChartType = xlXYScatterLines
    ' set other chart properties
End With

Dim s As Series
Set s = c.SeriesCollection.NewSeries
With s
    .Values = yaxis
    .XValues = xaxis

End With

    Next jump
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:17:45.337

此代码在列中查找代码并在指定范围内绘制图形。当第一个代码通过循环时，它会抵消查找和绘图。

```
Dim srs As Series

Set cht = ActiveChart
'GRAPH 1
    Set rng1 = ActiveSheet.Range(Range("W30").Offset(jump * 50, 0), Range("AA40").Offset(jump * 50, 0))

With ActiveSheet.ChartObjects.Add(Left:=rng1.Left, Width:=rng1.Width, Top:=rng1.Top, Height:=rng1.Height)
 '(Left:=100, Width:=375, Top:=75, Height:=225)
    .Chart.ChartType = xlXYScatterLines

     Set srs = .Chart.SeriesCollection.NewSeries
    srs.Name = "Graph1" '
    srs.XValues = Range(Range("O30").Offset(jump * 50, 0), Range("O30").Offset(jump * 50, 0).End(xlDown))
    srs.Values = Range(Range("N30").Offset(jump * 50, 0), Range("N30").Offset(jump * 50, 0).End(xlDown))

End With
    End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:36:42.297

1.  当我们没有您正在使用的数据时，可能会有很多难以分析的问题。但是，请参阅可能有帮助的下一点并解决第一个问题。

2.  如果您最终将图表`ChartObject`放在某张纸上，则可以采用不同的方式。此外，默认情况下，新图表是条形图。为了避免将其更改为 ScatterLines 然后（我猜这会导致一些异常），请尝试使用以下代码（而不是在某些区域中使用您的代码）：

    `Dim c As Chart`==>变成`Dim c as Shape`

整个部分以：`Set c=Activeworkbook.Charts.Add`直到`End With`替换为以下代码：

```
Set c = Sheets(Sh).Shapes.AddChart(xlXYScatterLines, 10, 10, 200, 200)

Dim s As Series
Set s = c.Chart.SeriesCollection.NewSeries
With s
    .Values = yaxis
    .XValues = xaxis

End With 
```

1.  要设置图表的位置，请尝试在循环结束之前使用类似的解决方案：

    ```
    'setting position
    With c
        .Left = Range("M10").Offset(0,1).Left
        .Top = Range("M10").Offset(0,1).Top
    End With 
    ```

但不是`Range("M10")`把你的数据范围的参考。

# android - 从原生安卓应用在线上传 docx、doc 和 pdf 文件到 sharepoint

> ID：15762424
> 
> 赞同：2
> 
> 时间：2013-04-02T11:01:08.283
> 
> 标签：android, sharepoint, file-upload, sd-card

我正在开发一个 android 应用程序来远程访问在线共享点。我可以使用 http put 方法上传文件并查看它们，但我无法打开它们。我觉得我没有指定正确的内容类型。这是我的代码：

```
try {       
    File sdcard = Environment.getExternalStorageDirectory();

    //Get the text file
    File file = new File(sdcard, "gps.doc");

    FileInputStream fIn = new FileInputStream(file);
    BufferedReader myReader = new BufferedReader(
            new InputStreamReader(fIn));
    String aDataRow = "";
    String aBuffer = "";
    while ((aDataRow = myReader.readLine()) != null) {
        aBuffer += aDataRow + "\n";
    }

    System.out.println(aBuffer + "content of the file");

    HttpPut httpupld = new HttpPut("http://mysite.sharepoint.com/Sites/Documents/gps.doc");

    StringEntity entity1 = new StringEntity(aBuffer, "HTTP.UTF_8");
    httpDel.setEntity(entity1);

    System.out.println(title);
    HttpResponse rsp = http2.execute(httpupld);
    respcode=rsp.getStatusLine().getStatusCode();
    System.out.println(respcode);

} catch (Exception e) {
    Log.e("Error: ", e.getMessage());
} 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:54:44.217

您无法在 SharePoint Online 或本地安装的 Office Web Apps 中打开（但查看）文档。

在上传之前将您的 office 文档转换为 office 2007/2010 标准，即 docx、xlsx、pptx ...

# actionscript-3 - AS3 获取 MacAdress 唯一 ID

> ID：15762425
> 
> 赞同：3
> 
> 时间：2013-04-02T11:01:15.093
> 
> 标签：actionscript-3

为什么当我获得 MacAdress 时启用和禁用 NetworkAdapter 时会有不同的值...？请帮忙，我需要唯一的ID..

```
var networkInterface : Object =  NetworkInfo.networkInfo.findInterfaces();
var networkInfo  : Object = networkInterface[0];
var strNet : String = networkInfo.hardwareAddress.toString();
trace(strNet); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:41:46.897

也许闪存从操作系统获取默认网络接口的 MAC 地址。当您关闭一个界面时，操作系统会默认获得另一个界面。正如 Apocalyptic0n3 所提到的，使用 UID 是一种更好的方法。您可以将 UID 保存在 Flash 共享对象中以供下次运行...

# iphone - 我可以从应用程序的某些页面更改应用程序的本地化吗？

> ID：15762426
> 
> 赞同：0
> 
> 时间：2013-04-02T11:01:15.143
> 
> 标签：iphone, ios, objective-c, xcode

我想从某个页面更改我的应用程序的本地化（例如：从页面“设置”）？

但我不确定我是否做这个应用商店拒绝我的应用！

所以问题：

1 我可以做这个功能吗？如果是的话，也许你有一些例子？

2 请给我有关允许或禁止这样做的文件的链接！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:29:27.633

请为您的问题找到以下答案

1.是的。你可以实现它。

在我们的项目中，我们为每种语言添加了可本地化的字符串。在设置屏幕中，我们显示了下拉菜单以选择应用程序的语言

例如

```
switch([indexPath row])//table row index selected by user
        {
            case 1:[[NSUserDefaults standardUserDefaults] setValue:@"french" forKey:@"language"];

                break;
            case 2:[[NSUserDefaults standardUserDefaults] setValue:@"german" forKey:@"language"];

                break;
            case 0:[[NSUserDefaults standardUserDefaults] setValue:@"english" forKey:@"language"];

                break;
            case 3:[[NSUserDefaults standardUserDefaults] setValue:@"Portuguese" forKey:@"language"];

                break;
        } 
```

我们第一次默认设置了英语语言。选择语言后，我们通过传递键调用以下函数

```
-(NSString*) languageSelectedStringForKey:(NSString*) key
{
    //set = [[SettingsViewController alloc]initWithNibName:@"SettingsViewController" bundle:nil];
    NSString *path=@""; 
    NSString *currentLanguage=[[NSUserDefaults standardUserDefaults] valueForKey:@"language"];

    if([currentLanguage isEqualToString:@"english"])
    {
        path = [[NSBundle mainBundle] pathForResource:@"English" ofType:@"lproj"];

    }
    else if([currentLanguage isEqualToString:@"german"])
    {
        path = [[NSBundle mainBundle] pathForResource:@"de" ofType:@"lproj"];

    }
    else if([currentLanguage isEqualToString:@"french"])
    {
        path = [[NSBundle mainBundle] pathForResource:@"fr" ofType:@"lproj"];
    }

    else if([currentLanguage isEqualToString:@"Portuguese"])
    {
        path = [[NSBundle mainBundle] pathForResource:@"Portuguese" ofType:@"lproj"];
    }

    NSBundle* languageBundle = [NSBundle bundleWithPath:path];
    NSString* str=[languageBundle localizedStringForKey:key value:@"" table:nil];
    return str;
} 
```

例如

```
aboutUsTitle.text=[self languageSelectedStringForKey:@"AboutUs"]; 
```

在可本地化的文件中，您必须设置以下键值才能获得 About us 值

```
"AboutUs" = "A propos de nous";//for french(fr.lproj)

"AboutUs" = "About Us";//for english(english.lproj) 
```

2\. [http://kb.tethras.com/localizing-your-ios-app](http://kb.tethras.com/localizing-your-ios-app)

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:26:39.133

是的，您可以在应用程序的某些页面中实现它。按照这个教程

[教程](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

通过此代码，您可以将所需的单词翻译成所需的语言。

```
NSString *translatedString = [self languageSelectedStringForKey:@"YesButton"]; // Give your key here

-(NSString*) languageSelectedStringForKey:(NSString*) key
{
    NSString *path;
    path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"]; // give your   language type in pathForResource, i.e. "en" for english, "da" for Danish
    NSBundle* languageBundle = [NSBundle bundleWithPath:path];
    NSString* str=[languageBundle localizedStringForKey:key value:@"" table:nil];
    return str;
} 
```

希望这会有所帮助。，谢谢。快乐编码。

# php - 通过类型转换验证用户输入

> ID：15762430
> 
> 赞同：3
> 
> 时间：2013-04-02T11:01:20.827
> 
> 标签：php, security, validation, casting, web

当我在网站导航上工作时，应该在网站本身上显示一个 GET 参数，我不知道如何才能验证用户输入。

“正常”的方法是使用 htmlspecialchars() 之类的东西转换输入，以避免 XSS 攻击。我决定不转换输入，而是将其类型转换为 int。

代码看起来像这样：

```
$siteinfo['current_site'] = (int) $_GET['p']; 
```

（当然这只是可能的，因为预期的输入是一个整数）

你怎么看待这件事？安全吗？你认为有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:03:32.347

这可能是验证 int 最安全的方法：

```
$siteinfo['current_site'] = filter_input(INPUT_GET, 'p', FILTER_VALIDATE_INT); 
```

在这里阅读更多：http: [//php.net/manual/en/function.filter-input.php](http://php.net/manual/en/function.filter-input.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:39:41.487

好吧，我认为这很好，但我也会将其切断：

```
// imagine you need up to four chars
$_GET['var'] = substr($_GET['var'], 0, 4); 
```

如果是文本，那么我也可以这样做：

```
// sample of bad guys
$bad = array('<','>');
$_GET['var'] = str_replace($bad, '', $_GET['var']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:19:26.153

是的，这是安全的，假设您认为任何整数“安全”。

但是请注意，攻击者仍然可以尝试向您提供零值或负值，或非常大的值，例如 999999999 或（如果您使用 64 位 PHP）甚至 9999999999999999999。如果您的代码尝试，说，运行具有那么多迭代的循环，分配具有那么多元素的数组，甚至创建那么多数据库记录，它可以作为对您的站点执行拒绝服务攻击的简单方法。

因此，为了真正安全，您不仅应该将输入强制转换为整数，还应该验证结果数值对于您使用它的目的是否合理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-25T14:37:42.773

@Mahdi：这两个建议似乎都不太合适。第一个建议将输入视为字符串 - 您使用对字符串进行操作的函数。从某种角度来看，这一切都很好（$_GET 仅包含字符串），但从您期望输入为某种形式（整数）的角度来看，这一切都很好。

第二个建议也这样做（视为字符串），但此外使用*blacklist*而不是*whitelist*。黑名单的缺点是您忘记某些情况的风险很高。如果您完全采用这种方法，您可以以正则表达式检查的形式创建一个白名单。

类型转换意味着输入的原始形式是或可能是不正确的。它也可能会自动尝试修复输入。最好明确检查输入。

user1909426 的建议似乎是迄今为止最好的，同时也考虑了 Ilmari Karonen 的笔记。

# php - 将图片上传到 Facebook 粉丝页面

> ID：15762431
> 
> 赞同：1
> 
> 时间：2013-04-02T11:01:20.970
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我希望我们 Facebook 页面的粉丝能够将图像发布到特定专辑。尽管该应用程序能够将图像上传到用户时间轴，但该应用程序无法将其发布到粉丝页面（公司的 Facebook 页面）中的相册。出了什么问题，或者如何更改代码以便跟踪错误。

在较早的尝试中，我能够使用类似的脚本和永不过期的令牌将图像发布到粉丝页面的墙上，但随后应用程序发布了它，我想查看用户名。

```
<?php
require 'facebook.php';

$app_id = "xxx";
$app_secret = "xxx";
$facebook = new Facebook(array(
'appId' => $app_id,
'secret' => $app_secret,
'cookie' => true
));

$canvas_page = "http://apps.facebook.com/xxx/";
$auth_url = "https://www.facebook.com/dialog/oauth?client_id=" 
. $app_id . "&redirect_uri=" . urlencode($canvas_page)."&scope=publish_stream";

$signed_request = $_REQUEST["signed_request"];

if(isset($_FILES["source"]["name"]))
{
    try {
        $facebook->setFileUploadSupport(true);
        $response = $facebook->api(
        '/ALBUMID/photos/',
        'post',
        array(
        'message' => $_POST['message'],
        'source' => '@'.$_FILES["source"]["tmp_name"], 
        'access_token' => 'xxx'
        )
        );
    }
    catch (FacebookApiException $e) {
        error_log('Could not post image to Facebook.');
    }
}

list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

$data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

if (empty($data["user_id"])) {
    echo("<script> top.location.href='" . $auth_url . "'</script>");
    } else {
    echo ("Welcome User: " . $data["user_id"]);
};

$signed_request = $facebook->getSignedRequest();
$user = $facebook->getUser();
$page_id = $signed_request["page"]["id"];
$page_admin = $signed_request["page"]["admin"];
$like_status = $signed_request["page"]["liked"];
$country = $signed_request["user"]["country"];
$locale = $signed_request["user"]["locale"];

echo "<br>user id = $user";
echo "<br>page id = $page_id";
echo "<br>page admin = $page_admin";
echo "<br>like status = $like_status";
echo "<br>country = $country";
echo "<br>locale = $locale";
if ($like_status) {
?>
<div id="like">
    You like us.
    <form enctype="multipart/form-data" action=" " method="POST">
        Please choose a photo:
        <input name="source" type="file"><br/><br/>
        Say something about this photo:
        <input name="message"
        type="text" value=""><br/><br/>
        <input type="submit" value="Upload" class="btn btn-primary"/><br/>
    </form>
    <?php
        if(isset($response))
        {
            echo "Image Uploaded. <a href='http://facebook.com/{$response['id']}' target='_blank'>Click here to view</a>";
        }
    ?>

</div>
<?php
}
else {
?>
<div id="niet_leuk">
    You don't like us.
</div>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:22:29.547

这是 facebook opengraph 的一个已知错误。你可以在这里看到它的细节： [https ://developers.facebook.com/bugs/246002638848837/](https://developers.facebook.com/bugs/246002638848837/)

它被标记为低优先级，所以我不希望很快得到修复。

所以现在，您只能以页面管理员或页面本身的身份将图像发布到非用户页面。

# api - 带有 xml 异步集成的 Wordpress 小部件

> ID：15762434
> 
> 赞同：0
> 
> 时间：2013-04-02T11:01:26.853
> 
> 标签：api, xml-parsing, wordpress, wordpress-theming

我有一项任务要做，我需要调用外部 xml api 以获取站点侧栏中的事件日历的数据。日期将使用 JavaScript 更改，然后我需要再次调用以刷新数据。有人可以告诉我如何在可以将 Ajax 操作定向到的某个地方干净地设置操作或功能吗？使用正确的 HTML 等设置小部件很容易，但是 Ajax 连接到哪里？理想情况下，当内容最初加载到页面上时，它将使用帖子将用于在服务器端生成 HTML 的相同功能。

任何提示将不胜感激。这是一个 xml api...对于 json 或 jsonp 没有选项，因此我假设包括令牌和用户在内的凭据必须放在我的小部件中的某个地方，比如代理函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:05:41.010

听起来好像您在询问是否提出跨域 AJAX 请求，也就是“同源策略”。

同源策略防止从一个源加载的文档或脚本从不同源（域）获取或设置文档的属性。有关该策略的更详细说明，请参见[http://www.mozilla.org/projects/security/components/same-origin.html](http://www.mozilla.org/projects/security/components/same-origin.html)。

有关可用于规避此限制的选项的详细说明，请参阅[规避同源策略的方法。](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

简短的回答是，除非您可以控制向其发出 AJAX 请求的域，否则最好的选择可能是设置一个简单的代理，该代理位于运行 AJAX 的同一域中，它将请求转发到目的地。在“简单的 AJAX 代理”上进行谷歌搜索将获得大量结果，包括各种语言的预构建代理。

# android - Android Webview处理方向不起作用

> ID：15762436
> 
> 赞同：1
> 
> 时间：2013-04-02T11:01:32.243
> 
> 标签：android, android-webview

我正在使用 webview，我想在方向改变时停止重新加载页面。

我的活动中有以下内容：

```
@Override
public void onConfigurationChanged(Configuration config) {
    super.onConfigurationChanged(config);
}

@Override
protected void onSaveInstanceState(Bundle outState ){
    ((WebView) findViewById(R.id.webView)).saveState(outState);
} 
```

在我的布局中，我有：

```
<WebView
android:id="@+id/webView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:configChanges="keyboardHidden|orientation"
android:visibility="gone" > 
```

但是上面的代码不起作用。我在 Android 2.3.3 中测试它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:09:32.497

像这样添加`android:configChanges="keyboardHidden|orientation"`到`AndroidManifest.xml`文件中此布局使用的活动中

```
<activity
        android:name=".UserProfileActivity"
        android:configChanges="orientation|screenSize|keyboardHidden"/> 
```

某些版本可能不支持新版本方向的用户屏幕大小需要使用屏幕大小进行配置更改

# javascript - 如何使用javascript解码数组数据的字节

> ID：15762437
> 
> 赞同：0
> 
> 时间：2013-04-02T11:01:38.713
> 
> 标签：javascript, bytearray, decode

我有以下类型的数据。它是 Ajax 请求调用服务器后获取的字节数据数组。服务器对相应的文件进行编码并将此数据作为响应返回。现在我必须使用 JavaScript 以字符串格式解码该数据。我怎样才能做到这一点？请帮我。

```
67,37,94,38,42,44,69,67,71,32,97,116,116,97,99,104,101,100,32,102,111,114,32,112,
97,116,105,101,110,116,32,45,32,71,82,65,72,65,77,44,32,77,65,82,89,13,10,72,37,
94,38,42,44,49,44,44,44,44,44,44,44,44,51,47,49,52,47,50,48,49,51,32,49,50,58,50,
57,58,52,55,32,80,77,44,44,13,10,77,37,94,38,42,44,77.. 
```

# xamarin.ios - 在按钮单击时显示子视图

> ID：15762442
> 
> 赞同：2
> 
> 时间：2013-04-02T11:02:00.573
> 
> 标签：xamarin.ios, xamarin, xamarin-studio

我正在xamarin中开发一个ios应用程序。单击按钮时如何显示子视图（我使用xcode IB创建子视图）。然后当我单击同一个按钮时，必须再次显示子视图。如果按下按钮3次，必须显示 3 个子视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:07:08.233

以一种非常常见的方式，它将是这样的：

```
yourButton.TouchUpInside += (object sender, EventArgs e) => {
    var newView = new UIView();
    // do some stuff with your view here
    this.Add (newView);
}; 
```

# javascript - 单击不同的 2 缩略图时页面正在跳转

> ID：15762443
> 
> 赞同：1
> 
> 时间：2013-04-02T11:02:02.593
> 
> 标签：javascript, jquery, html, css

示例：[http ://www.gassmanfg.com/the-g&g-team](http://www.gassmanfg.com/the-g&g-team)

我已经创建了这个简单的显示隐藏内容示例 - 但是当您位于页面底部然后单击任何缩略图图像时，它会跳到顶部或缩略图处不怎么办？

我想停止这个跳跃问题

也尝试了 event.preventDefault() 但仍然无法正常工作。

```
event.preventDefault(); 
```

**下面是我正在使用的 Jquery：**

```
$(document).ready(function () {
    //Default Action
    $(".tab_content").hide();
    $("ul.tabs li:first").addClass("active").show();
    $(".tab_content:first").show();

    //On Click Event
    $("ul.tabs li").click(function () {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $(".tab_content").hide();
        var activeTab = $(this).find("a").attr("href");
        $(activeTab).fadeIn();
        if (activeTab == '#tab1') {
            $(window).resize(function () {
                //$("#tab2").css({'display':'block'});
                //$("#map_canvas").css({'width':'630px', 'height':'400px'});
                //initialize();
                //alert('Changed!');
            });
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:07:44.353

$(".tab_content").hide(); - 这会导致问题。您的页面高度正在变小，而您的 netx 选项卡尚未显示。

曾经遇到同样的问题，我的解决方案是在隐藏幻灯片之前设置页面的最小高度。代码如下所示：

```
 $("ul.tabs li").click(function () {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $('.tab_container').css('min-height', $('.tab_container').height()+'px');
        $(".tab_content").hide();
        var activeTab = $(this).find("a").attr("href");
        $(activeTab).fadeIn();
        if (activeTab == '#tab1') {
            $(window).resize(function () {
                //$("#tab2").css({'display':'block'});
                //$("#map_canvas").css({'width':'630px', 'height':'400px'});
                //initialize();
                //alert('Changed!');
            });
        }
        return false;
    }); 
```

# php - 将html内容放入页面

> ID：15762451
> 
> 赞同：1
> 
> 时间：2013-04-02T11:02:36.873
> 
> 标签：php, html

我需要从页面上的数据库中提取内容，但是其中一些内容具有整个 HTML 页面 - 带有 css、head 等...

防止拥有所有 htlm 标签、脚本、css 的最佳方法是什么？iframe 在这里有帮助吗？

最令人烦恼的是我在页面上得到了奇怪的字符：� 并且发现这是由于不同的编码。

该网站有 utf-8 编码，如果内容包含不同的编码，这些标志就会出现，我无法替换它们。它使它们删除的唯一一件事是更改我的编码，但这不是真正的解决方案。

如果有人能告诉我如何删除它们，那就太好了。

解决方案：在您的帮助下，我检查了编码，但无法更改。我将 mysql_query 中的名称设置为 UTF-8，并去除了无用的标签。现在看来还可以。感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:14:14.570

我认为你没有机会分开一个丑陋的 iframe。关于编码，你应该检查db encoding，connection encoding并根据需要进行转换。用于`iconv`完全控制转换，例如：

```
$html=iconv("UTF-8", "ISO-8859-15"."//TRANSLIT//IGNORE",$html]); 
```

在这种情况下，您将丢失一些未在 ISO-8859-15 中映射的字符。考虑将您的整个站点转为 UTF-8 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:16:44.877

# jms - Apache activeMQ，从客户端动态创建队列

> ID：15762453
> 
> 赞同：0
> 
> 时间：2013-04-02T11:02:41.937
> 
> 标签：jms, activemq, stomp

目标是，创建一个可以从服务器发送和接收更新的 HTML 页面。

我创建了 HTML 页面并通过 STOMP over websocket 与 Apache ActiveMQ 建立了连接，并在服务器端编写了 Java 代码，它将向这些队列发送更新。这很好用，但理想情况下 HTML 页面将被许多用户使用，所以我希望每个用户都有自己的单独队列（动态生成）并仅在各自的队列上收听和发送。HTML 客户端将能够注册队列，但我不知道我的服务器端代码将如何得到通知，我们有任何回调函数吗？尝试使用 DestinationSource 类，它确实告诉存在多少队列，但不清楚如何访问该队列

我在解决这个问题上走错路了吗？任何有关此的帮助/链接/信息将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:03:55.983

您可能想查看 ActiveMQ 咨询消息，它可以触发各种事件，例如目标创建和销毁、无消费者、消息过期等。

ActiveMQ 站点有这方面的[文档](http://activemq.apache.org/advisory-message.html)。

# javascript - Hallo.js - 未定义 Rangy

> ID：15762454
> 
> 赞同：0
> 
> 时间：2013-04-02T11:02:43.063
> 
> 标签：javascript, rangy, hallo-js

我只是尝试将 Hallo.js 编辑器添加到我的网站。它有点工作，但是当我编辑文本时，我在 Chrome 和 Firefox 中看到以下错误。在 Opera 中，它似乎工作正常。

```
rangy is not defined (sel = rangy.getSelection();    Line 2674 in hallo.js) 
```

您可以在 JSBin 上找到该行为的示例：http: [//jsbin.com/unuces/2/](http://jsbin.com/unuces/2/)

在[hallo.js 的文档中，](https://github.com/bergie/hallo)没有提到对 rangy 的依赖，所以我认为不需要它。有没有人已经有这方面的经验？

谢谢您的帮助。

==== **解决方法：** ========

**Rangy 未定义**

当不包括 rangy 时会发生这种情况。为了让 Hallojs 正常工作，必须包括在内。

**...没有方法 getSelected**

如果动态加载 rangy，就会发生这种情况。要解决此错误，请在加载后调用 rangy.init()。

# c# - 返回多个列表c#

> ID：15762458
> 
> 赞同：1
> 
> 时间：2013-04-02T11:02:50.337
> 
> 标签：c#, ajax, webmethod

好的。我有几个 JQuery Ajax 帖子，它们调用了单独的 WebMethods。我遇到了一个问题，我现在需要将 webmethods 合并为一个，但仍然能够根据列表拆分返回值。因此，例如，我需要返回多个列表的东西，以便我的 Ajax 调用可以呈现相应的 Jquery 数据表，例如：table 1 = drList[0]、table 2 =drList[1] 等。

Web方法代码如下：

```
[WebMethod]
[ScriptMethod]
public static List<GlobalClasses.ValueDateSummary>  GetValueDateSummary()
{

    string TSQL = "SELECT * FROM vw_view1 WHERE (SenderBIC ='" +    HttpContext.Current.User.Identity.Name + "') ORDER BY ValueDate DESC";
    DataTable dtValueDateSummary = null;
    GlobalClasses.ValueDateSummary objSummary;

    SqlConnection conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["MIReporting"].ConnectionString);
    using (conn)
    {
        conn.Open();
        using (SqlDataAdapter sqlAdapter = new SqlDataAdapter(TSQL, conn))
        {
            dtValueDateSummary = new DataTable();
            sqlAdapter.Fill(dtValueDateSummary);
        }
    }
    List<GlobalClasses.ValueDateSummary> drList = new List<GlobalClasses.ValueDateSummary>();
    foreach (DataRow row in dtValueDateSummary.Rows)
    {
        objSummary = new GlobalClasses.ValueDateSummary();
        objSummary.fld1= row["1"].ToString();
        objSummary.fld2 = row["2"].ToString();
        objSummary.fld3 = row["3"].ToString();
        objSummary.fld5 = row["4"].ToString();

        drList.Add(objSummary);
    }
    return drList;
} 
```

这个和其他 webmethod 调用之间的唯一区别是正在使用的视图。

Ajax 调用是：

```
 $.ajax({
               type: 'POST',
               url: 'Default.aspx/GetValueDateSummary',
               data: '{}',
               contentType: 'application/json;charset=utf-8',
               dataType: 'json',
               success: function (response) {

                 renderMsgSummary(response.d);
               },
               error: function (errMsg) {
                   $('#errorMessage').text(errMsg);
               }
           }) 
```

是`renderMsgSummary`Jquery数据表，所以这需要如下：

```
renderMsgSummary(response.d[0]);
renderOtherTable(response.d[1]); 
```

好的 - 快到了，现在正在尝试合并客户端脚本。

```
 <script type="text/javascript">
       $(document).ready(function () {
           function renderMsgVal(result) {
               var dtMsgValData = [];
               $.each(result, function () {
                   dtMsgValData.push([
                       this.SenderBIC,
                       this.ValueDate,
                       this.MessageType,
                       this.Reference
                   ]);
               });

               function renderMsgSummary(result) {
                   var dtMsgSumData = [];
                   $.each(result, function () {
                       dtMsgSumData.push([
                           this.SenderBIC,
                           this.MessageDate,
                           this.MessageType,
                           this.Count
                       ]);
                   });

                   $('#tblValueDateSummary').dataTable({
                       "aaData": dtMsgValData,

                       "aLengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100]]
                       'asStripClasses': null,
                       "iDisplayLength": 10,
                       //"aaSorting": [[0, "asc"]],
                       "bJQueryUI": true,
                       "bFilter": true,
                       "bAutoWidth": false,
                       "bProcessing": true,
                       // "sDom": 'RC<"clear">lfrtip',
                       "sDom": 'RC<"H"lfr>t<"F"ip>',

                       //Scrolling .......
                       "sScrollY": "250px",
                       "sScrollX": "100%",
                       "sScrollXInner": "100%",
                       "bScrollCollapse": true,

                       //Dynamic Language .......
                       "oLanguage": {
                           //"sZeroRecords": "There are no messages that match your,
                           "sLengthMenu": "Display _MENU_ records per,
                           "sInfo": "Displaying _START_ to _END_ of _TOTAL_ records",
                           "sInfoEmpty": "Displaying _START_ to _END_ of _TOTAL_m
                           "sInfoFiltered": "(filtered from _MAX_ total records)",
                           "sEmptyTable": 'No Rows to display.....!',
                           "sSearch": "Search all columns:",
                           "sLoadingRecords": "Please wait - loading..."
                       },
                       "oSearch": {
                           "sSearch": "",
                           "bRegex": false,
                           "bSmart": true
                       }
                   });

                   $('#tblMessageDateSummary').dataTable({
                       "aaData": dtMsgSumData,
                       "aLengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100]]
                       "asStripClasses": null,
                       "iDisplayLength": 10,
                       "aaSorting": [[0, "asc"]],
                       "bJQueryUI": true,
                       "bFilter": true,
                       "bAutoWidth": true,
                       "bProcessing": true,
                       "sDom": 'RC<"clear">lfrtip',
                       //"sDom": '<"F"ip>l',

                       //Scrolling .......
                       "sScrollY": "250px",
                       "sScrollX": "100%",
                       "sScrollXInner": "100%",
                       "bScrollCollapse": true,

                       //Dynamic Language .......
                       "oLanguage": {
                           // "sZeroRecords": "There are no messages that match your,
                           "sLengthMenu": "Display _MENU_ records per,
                           "sInfo": "Displaying _START_ to _END_ of _TOTAL_ records",
                           "sInfoEmpty": "Showing 0 to 0 of 0 records",
                           "sInfoFiltered": "(filtered from _MAX_ total records)",
                           "sEmptyTable": 'No Rows to display.....!',
                           "sSearch": "Search all columns:"
                       },
                       "oSearch": {
                           "sSearch": "",
                           "bRegex": false,
                           "bSmart": true
                       }
                   });
               }

               $.ajax({
                   type: 'POST',
                   url: 'Default.aspx/GetMessageDetails',
                   data: '{}',
                   contentType: 'application/json;charset=utf-8',
                   dataType: 'json',
                   success: function (response) {
                       //console.log(response);
                       //alert(response.d);
                       renderMsgVal(response.d[0]);
                       renderMsgSummary(response.d[1]);
                   },
                   error: function (errMsg) {
                       $('#errorMessage').text(errMsg);
                   }
               });

       </script> 
```

不确定这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:11:10.727

如果我理解正确，您可以返回一个`List of Lists`.

```
public static List<List<GlobalClasses.ValueDateSummary>> GetValueDateSummary()    
{
    var allLists = new List<List<GlobalClasses.ValueDateSummary>>();

    foreach (DataRow row in dtValueDateSummary.Rows)
    {
        objSummary = new GlobalClasses.ValueDateSummary();
        objSummary.fld1= row["1"].ToString();
        objSummary.fld2 = row["2"].ToString();
        objSummary.fld3 = row["3"].ToString();
        objSummary.fld5 = row["4"].ToString();

        drList.Add(objSummary);
    }   
    allLists.Add(drList);

    //add other lists to allLists
    //..

    return allLists;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:08:55.257

将您的各种列表包装成一个更大的类，即

做一个类似的课程

```
public class Wrapper
{
    public List<GlobalClasses.ValueDateSummary> list1 {get;set;}
    public List<GlobalClasses.ValueDateSummary> list2 {get;set;}
    public List<SomeOtherClassCollectino> list3{get;set;}
} 
```

并在您的网络方法中返回这个包装器，即

```
[WebMethod]
[ScriptMethod]
public static List<GlobalClasses.ValueDateSummary>  GetValueDateSummary()
{
    // your db logic
    Wrapper wrapper = new Wrapper();

    List<GlobalClasses.ValueDateSummary> drList = new List<GlobalClasses.ValueDateSummary>();
    foreach (DataRow row in dtValueDateSummary.Rows)
    {
        objSummary = new GlobalClasses.ValueDateSummary();
        objSummary.fld1= row["1"].ToString();
        objSummary.fld2 = row["2"].ToString();
        objSummary.fld3 = row["3"].ToString();
        objSummary.fld5 = row["4"].ToString();

        drList.Add(objSummary);
    }
    wrapper.list1 =  drList;
    //similarly fetch other lists 
    //wrapper.list2 = drList2;
    return new JavaScriptSerializer().Serialize(wrapper);
} 
```

在客户端，您可以像这样访问它：

```
 var jsonData = $.parseJSON(msg.d);
 renderMsgSummary(jsonData.list1);
 renderMsgSummary(jsonData.list2); 
```

# android - 在 AVD 中播放声音

> ID：15762469
> 
> 赞同：1
> 
> 时间：2013-04-02T11:03:14.120
> 
> 标签：android

我正在做一个项目，我需要创建一些`Button`s，单击它们会播放一些音调。这是我使用的代码

```
package com.entrainment.www;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

Button mButtonOne;
Button mButtonTwo;
MediaPlayer mp;
MediaPlayer mp1; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mp=MediaPlayer.create(this, R.raw.tone_1);
    mp1=MediaPlayer.create(this, R.raw.tone_2);

    mButtonOne = (Button)findViewById(R.id.button1);
    mButtonTwo = (Button)findViewById(R.id.button2);
    mButtonOne.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v){
            mp.start();
        }
    }); 

    mButtonTwo.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v){
            mp1.start();
        }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

我已经让 AVD 运行，一切都很好，但是当我点击按钮时，什么也没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:21:14.383

因为您要设置内容两次。

```
 setContentView(R.layout.activity_main); 
```

call 会膨胀你的布局。

每当您第二次设置它时，都会制作新副本，所以

`mButtonOne`并且`mButtonTwo`是第一个膨胀布局的实例，但您的当前视图是第二个膨胀布局。简单地说，您在屏幕上看到的按钮是不同的，因为它们属于第二种布局。因此，您正在单击您没有设置任何操作的按钮。

所以第二次删除 `setContentView(R.layout.activity_main);`。

# android - 在Android中获取空指针异常

> ID：15762475
> 
> 赞同：0
> 
> 时间：2013-04-02T11:03:23.220
> 
> 标签：android

我正在 android 中创建一个应用程序，用于使用 csv 文件备份和恢复通话记录。我面临一个问题，我没有得到问题在哪里我是错误日志请建议我错误在哪里以及如何修复它.....

```
04-02 16:26:10.284: E/AndroidRuntime(7030): FATAL EXCEPTION: AsyncTask #1
04-02 16:26:10.284: E/AndroidRuntime(7030): java.lang.RuntimeException: An error   occured while executing doInBackground()
04-02 16:26:10.284: E/AndroidRuntime(7030):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.lang.Thread.run(Thread.java:856)
04-02 16:26:10.284: E/AndroidRuntime(7030): Caused by: java.lang.NullPointerException
04-02 16:26:10.284: E/AndroidRuntime(7030):     at android.os.Parcel.readException(Parcel.java:1431)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:188)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:140)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at android.content.ContentProviderProxy.insert(ContentProviderNative.java:420)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at   android.content.ContentResolver.insert(ContentResolver.java:866)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at com.example.androidbackuppro.Restore.RestoreCallLogs(Restore.java:396)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at com.example.androidbackuppro.Restore$CallLogsRestore.doInBackground(Restore.java:318)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at com.example.androidbackuppro.Restore$CallLogsRestore.doInBackground(Restore.java:1)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-02 16:26:10.284: E/AndroidRuntime(7030):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-02 16:26:10.284: E/AndroidRuntime(7030):     ... 5 more
04-02 16:26:19.329: I/Choreographer(7030): Skipped 508 frames!  The application may be doing too much work on its main thread.
04-02 16:26:19.724: E/SpannableStringBuilder(7030): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-02 16:26:19.729: E/SpannableStringBuilder(7030): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-02 16:26:19.764: W/IInputConnectionWrapper(7030): getSelectedText on inactive InputConnection
04-02 16:26:19.784: W/IInputConnectionWrapper(7030): setComposingText on inactive InputConnection
04-02 16:26:19.829: E/WindowManager(7030): Activity com.example.androidbackuppro.Restore has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41bd7850 that was originally added here
04-02 16:26:19.829: E/WindowManager(7030): android.view.WindowLeaked: Activity com.example.androidbackuppro.Restore has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41bd7850 that was originally added here
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:409)
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:322)
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:234)
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:153)
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.Window$LocalWindowManager.addView(Window.java:559)
04-02 16:26:19.829: E/WindowManager(7030):  at android.app.Dialog.show(Dialog.java:277)
04-02 16:26:19.829: E/WindowManager(7030):  at com.example.androidbackuppro.Restore$CallLogsRestore.onPreExecute(Restore.java:297)
04-02 16:26:19.829: E/WindowManager(7030):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
04-02 16:26:19.829: E/WindowManager(7030):  at android.os.AsyncTask.execute(AsyncTask.java:534)
04-02 16:26:19.829: E/WindowManager(7030):  at com.example.androidbackuppro.Restore.CallLogsRestore(Restore.java:92)
04-02 16:26:19.829: E/WindowManager(7030):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 16:26:19.829: E/WindowManager(7030):  at java.lang.reflect.Method.invoke(Method.java:511)
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.View$1.onClick(View.java:3719)
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.View.performClick(View.java:4261)
04-02 16:26:19.829: E/WindowManager(7030):  at android.view.View$PerformClick.run(View.java:17356)
04-02 16:26:19.829: E/WindowManager(7030):  at android.os.Handler.handleCallback(Handler.java:615)
04-02 16:26:19.829: E/WindowManager(7030):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-02 16:26:19.829: E/WindowManager(7030):  at android.os.Looper.loop(Looper.java:137)
04-02 16:26:19.829: E/WindowManager(7030):  at android.app.ActivityThread.main(ActivityThread.java:4921)
04-02 16:26:19.829: E/WindowManager(7030):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 16:26:19.829: E/WindowManager(7030):  at java.lang.reflect.Method.invoke(Method.java:511)
04-02 16:26:19.829: E/WindowManager(7030):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
04-02 16:26:19.829: E/WindowManager(7030):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
04-02 16:26:19.829: E/WindowManager(7030):  at dalvik.system.NativeStart.main(Native Method) 
```

这是代码

```
folder = new File(Environment.getExternalStorageDirectory() + File.separator + getString(R.string.app_name));
            String csvFilename = folder+"/CallLogs.csv";
            if(IsFileExists(csvFilename))
            {

            CSVReader csvReader = new CSVReader(new FileReader(csvFilename), ',', '\'', 0);
            String[] row = null;
            if(csvReader.readNext()!=null)
            {
                 while((row = csvReader.readNext()) != null)
                     {
                    RestoreCallLogs(row[0],row[1],row[2],row[3],row[4]);

                    }
                 csvReader.close();
                 //If Restoration is successful
                IsRestore="1";
              }

 public  void RestoreCallLogs(String Name,String number,String Date,String Type,String Duration){
        ContentValues values = new ContentValues();
        values.put(CallLog.Calls.NUMBER, number);
        values.put(CallLog.Calls.DATE, Date);
        values.put(CallLog.Calls.DURATION,Duration);
        values.put(CallLog.Calls.TYPE, Type);
        /* if(Type=="Incoming")
           values.put(CallLog.Calls.TYPE, 1);
        else if(Type=="Missed")
            values.put(CallLog.Calls.TYPE, 2);
        else
            values.put(CallLog.Calls.TYPE, 3);*/
        if(Name!="Unknown")
         values.put(CallLog.Calls.CACHED_NAME, Name);
        getContentResolver().insert(CallLog.Calls.CONTENT_URI, values);
    } 
```

# asp.net - 如何修复 MVC-3 ddl 的选定值？

> ID：15762482
> 
> 赞同：0
> 
> 时间：2013-04-02T11:03:35.297
> 
> 标签：asp.net, asp.net-mvc-3

在 mvc 中，我正在绑定这样的下拉列表

```
@Html.DropDownList("wantedTime", new List<SelectListItem>

                 {                                        
                    new SelectListItem{ Text="select time", Value = "#" },
                    new SelectListItem{ Text="12:00 AM", Value = "00:00"},
                    new SelectListItem{ Text="12:30 AM", Value = "00:30" },
                    new SelectListItem{ Text="01:00 AM", Value = "01:00" }) 
```

第一次加载很好，但下次视图重新加载时由于某种原因我想修复我在会话中持有的下拉列表的选定值。

那么对于上述场景，我如何才能在 MVC 中为 ddl 选择值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:10:21.920

您能否更具体地说明“修复所选值”的含义？比尔发布的链接正是您在调用之间保留下拉列表的选定值的方式。

如果您在 Session 中保存一个值，那么将其发送到视图的正确方法是将其放在 ViewBag 中，或者在您的视图模型上为所选值设置一个属性，然后将其设置为您在 Session 中拥有的值。

您是否有理由在 Session 中保留此值？

# playframework - 资产已定义为对象资产

> ID：15762484
> 
> 赞同：6
> 
> 时间：2013-04-02T11:03:39.303
> 
> 标签：playframework, playframework-2.0, playframework-2.1

我正在对 Play Subproject 功能进行更多扩展测试，如下所述：[http](http://www.playframework.com/documentation/2.0/SBTSubProjects) ://www.playframework.com/documentation/2.0/SBTSubProjects 。但我收到错误：

```
Assets is already defined as object Assets 
```

托管在 github 上的示例应用程序：[https ://github.com/adis-me/PlayStrap](https://github.com/adis-me/PlayStrap)

我已经为我的子项目定义了一个资产控制器，如下所述：[资产控制器描述](https://github.com/playframework/Play20/blob/master/documentation/manual/detailledTopics/build/SBTSubProjects.md#assets-and-controller-classes-should-be-all-defined-in-the-controllersadmin-package)，即使是主项目，但错误不断弹出。我的项目有什么问题？

**控制器**

```
package com.company.playstrap.controllers;

import controllers.AssetsBuilder;

public class Assets {

    public static controllers.AssetsBuilder delegate = new AssetsBuilder();

} 
```

**路由文件**

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                               com.company.playstrap.controllers.Application.index()

# Include sub projects
-> /common                              common.Routes
-> /admin                               admin.Routes
-> /website                             website.Routes

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file                   com.company.playstrap.controllers.Assets.delegates.at(path="/public", file) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:46:43.033

这是一个已知的错误：[https ://groups.google.com/forum/#!msg/play-framework/2Zk5wjAlIng/Jcec1lt7AzQJ](https://groups.google.com/forum/#!msg/play-framework/2Zk5wjAlIng/Jcec1lt7AzQJ)

我自己的管理模块的解决方法：

```
package controllers.admin;
import controllers.AssetsBuilder;
import play.api.mvc.AnyContent;
import play.api.mvc.Action;
import play.mvc.*;

public class Application extends Controller {

    private static AssetsBuilder delegate = new AssetsBuilder();

    public static Action<AnyContent> asset(String path, String file) {
        return delegate.at(path, file);
    }

}

//routes file
GET /assets/*file   controllers.admin.Application.asset(path="/public", file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T03:06:40.840

上周我在尝试将 Assets 类编写为 Java 类时遇到了这个问题。我可以解决在我的子模块中将 Assets 类编写为 Scala 类的编译问题，与文档中描述的方式相同：[http ://www.playframework.com/documentation/2.1.1/SBTSubProjects](http://www.playframework.com/documentation/2.1.1/SBTSubProjects)

基本上，我的项目结构是：

```
MyApplication
  | - app
  | - conf
  | - modules
        | - admin
            | - app
                | - controllers
                    | - admin
                        | - Assets.scala
  | - project
  | - public 
```

**Assets.scala**内容：

```
package controllers.contabil

object Assets extends controllers.AssetsBuilder 
```

最后，我的**admin.routes**文件的内容是：

```
GET     /assets/*file    controllers.admin.Assets.at(path="/public", file)

# Home page
GET     /index           controllers.admin.Application.index() 
```

干杯

# html - HTML CSS 水平布局缩放

> ID：15762494
> 
> 赞同：0
> 
> 时间：2013-04-02T11:04:07.067
> 
> 标签：html, css, scale, aspect-ratio

我正在尝试制作一个水平布局（带有列），其中内容根据浏览器窗口**高度**进行缩放。

我遇到了关于基于宽度的完美比例的答案，但我希望有一个无限的宽度（因为内容的数量并不总是相同的）。

这可能仅使用 HTML/CSS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:12:48.660

使用 css 很难保持纵横比，但是如果将 maincontent 框的高度设置为 90%，将容器的高度设置为 100%。他们应该响应浏览器窗口。但只有高度，从来没有宽度。

从那里您可以使用 javascript 将 with 设置为`<height> * 1.5`（或类似），您必须在文档就绪事件中执行此操作，也可以在窗口调整大小事件中执行此操作。

# java - 多线程：我们可以将一个线程作为守护线程，并每隔5分钟对其他线程执行一次线程状态检测

> ID：15762498
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:04:16.407
> 
> 标签：java, multithreading

如前所述，我们可以将一个线程作为守护线程，并在检测其他线程状态时执行一些检测代码吗？我希望守护线程每 5 分钟执行一次（或多或少，误差不能很大，可以接受几秒钟的延迟）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:20:05.530

看看这个：

```
public static void main(String[] args) throws InterruptedException {

    ScheduledThreadPoolExecutor svc = new ScheduledThreadPoolExecutor(1, new ThreadFactory() {

        @Override
        public Thread newThread(Runnable r) {
            Thread t1 = new Thread(r);
            t1.setDaemon(true);
            return t1;
        }
    });

    svc.scheduleWithFixedDelay(new Runnable() {

        @Override
        public void run() {
            System.out.println("Himanshu "+Thread.currentThread().getName());
        }
    }, 5, 5, TimeUnit.SECONDS);

    svc.awaitTermination(10000, TimeUnit.SECONDS);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:21:29.180

首先看[这里](https://stackoverflow.com/questions/426758/running-a-java-thread-in-intervals)，就像@Azodious 说的那样。您要安排的作业正在使用`ThreadMXBean`s。[在此处](http://www.javamex.com/tutorials/profiling/profiling_java5_threads_howto.shtml)查看示例核心。

# javascript - 使用 OData 和 IQueryable 的风险

> ID：15762502
> 
> 赞同：1
> 
> 时间：2013-04-02T11:04:53.417
> 
> 标签：javascript, linq, odata, iqueryable, breeze

我看过许多关于制作 SPA（单页应用程序）的教程，其中许多使用外部库（例如轻风和 jaydatajs）来获得自动化的数据服务层。

这些库希望我公开一个他们可以查询的 IQueryable 对象。

我的问题是，从服务器公开 IQueryable 有什么风险？我想知道使用这些 js 库创建这个快捷方式是否值得，或者我应该在服务器中公开我自己的函数并在客户端自己实现数据服务。

问题是，当公开一个 Iqueryable 时，我可以使用例如轻量级的 linq 来创建过滤和分页查询，使用类似 linq 的语法。如果我不使用它，我将不得不在服务器中实现这些用于过滤和分页的功能。并在 javascript 中实现对它们的调用。

我希望我很清楚:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:43:46.687

在公开 IQueryable 时，我尝试做一件事...确保您不公开您的 EF 样式对象，始终确保您有一个可以控制的位于顶部的某种视图模型。

举个例子，假设你的数据库有 User 和 UserSecrets

```
public class User
{
    public long UserId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<UserSecret> UserSecrets { get; set; }
}

public class UserSecret
{
    public long UserSecretId { get; set; }
    public long UserId { get; set; }
    public string Secret { get; set; }
} 
```

如果您公开`IQueryable<User>`，您也可以轻松提取 UserSecrets

```
www.blah.com/users?$expand=UserSecrets 
```

而是公开一个`UserViewModel`或类似的东西

```
public class UserViewModel
{
     public string Name { get; set; }
} 
```

`IQueryable<UserViewModel>`您可以通过以下方式公开：

```
return dbContext.Users.Select(u => new UserViewModel { Name = u.Name }) 
```

很棒的是，这仍然是`IQueryable`- 您仍然可以过滤等，它仍将在 db 级别执行，但您可以准确控制可以提取哪些数据（在这种情况下`UserSecret`不再可访问）。

当然，您也可以应用自己的过滤器，这样您就可以避免用户无法访问他们不允许的数据：

```
return dbContext.Users.Where(u => ...).Select(u => new UserViewModel { Name = u.Name }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:54:09.210

可以看出您创建了 DTO 对象以投影实体对象并尝试在此 DTO 上创建基本属性。此操作将使我们保护从数据库公开的我们自己的信息，并避免将一些秘密信息从服务端泄露到客户端。

# matlab - matlab如何从文本文件中读取矩阵

> ID：15762503
> 
> 赞同：2
> 
> 时间：2013-04-02T11:04:56.167
> 
> 标签：matlab, transpose

我有一个文本文件，其中包含`500 columns`和`500 rows`的数值（整数）值。行中的每个元素都由制表符分隔。我想将此文件作为`matlab`. 示例（我的文本文件是这样的）：

```
 1 2 2 1 1 2 
 0 0 0 1 2 0
 1 2 2 1 1 2 
 0 0 0 1 2 0 
```

在 matlab中将这个文本文件作为矩阵 ( `a[]`) 读取后，我想做`transpose`。帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:10:34.307

您可以使用`importdata`. 就像是：

```
filename = 'myfile01.txt';
delimiterIn = '\t';
headerlinesIn = 1;
A = importdata(filename,delimiterIn,headerlinesIn);
A_trans = A'; 
```

如果您的文件没有任何 haeder，您可以跳过标题行。（这是实际数据开始之前的行数）

取自 Matlab 文档，[improtdata](http://www.mathworks.se/help/matlab/ref/importdata.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:46:47.533

你厌倦`load`了`-ascii`选择吗？
例如

```
 a = load('myfile.txt', '-ascii'); % read the data
 a = a.'; %' transpose 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:50:58.547

你可以简单地做：

```
yourVariable = importdata('yourFile.txt')';
%Loads data from file, transposes it and stores it into 'yourVariable'. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:15:18.250

```
% Pre-allocate matrix
Nrow=500; Ncol=500;
a = zeros(Nrow,Ncol);
% Read file
fid = fopen('yourfile.txt','r');
for i:1:Nrow
   a(i,:) = cell2mat(textscan(fid,repmat('%d ',Ncol));
end
fclose(fid); 
% Trasnspose matrix
a_trans = a.'; 
```

# vb.net - 在不关闭 Outlook 应用程序的情况下使用 vb.net 释放并退出 Outlook 对象

> ID：15762505
> 
> 赞同：0
> 
> 时间：2013-04-02T11:05:03.817
> 
> 标签：vb.net

我正在使用 Outlook 2010 和 Visual Studio 2010

我试过这段代码，它工作正常：

```
 Dim objOLApp As Outlook.Application

    Dim objFolder As Outlook.MAPIFolder

    Dim objExplorer As Outlook.Explorer

    Dim objSubFolder As Outlook.MAPIFolder

    Dim objCalenderItem As Outlook.AppointmentItem

    Dim objOutlookFolders As Outlook.Folders

    Dim intFolderCtr As Integer

    Dim intSubFolderCtr As Integer

    Dim intAppointmentCtr As Integer

    ' >> Initialize The Base Objects

    objOLApp = New Outlook.Application

    objOutlookFolders = objOLApp.Session.Folders

    ' >> Loop Through The PST Files Added n Outlook

    For intFolderCtr = 1 To objOutlookFolders.Count

        objFolder = objOutlookFolders.Item(intFolderCtr)

        objExplorer = objFolder.GetExplorer()

        ' >> Loop Through The Folders In The PST File

        For intSubFolderCtr = 1 To objExplorer.CurrentFolder.Folders.Count

            objSubFolder = objExplorer.CurrentFolder.Folders.Item(intSubFolderCtr)

            ' >> Check if Folder Contains Appointment Items

            If objSubFolder.DefaultItemType = Outlook.OlItemType.olAppointmentItem Then

                ' >> Loop Through Appointment Items

                For intAppointmentCtr = 1 To objSubFolder.Items.Count

                    ' >> Get Teh Calender Item From The Calender Folder

                    objCalenderItem = objSubFolder.Items.Item(intAppointmentCtr)

                    ' >> Process Appointment Item Accordingly

                    If objCalenderItem.Start.ToShortDateString = Today.Date.ToShortDateString Then
                        DataGridView1.Rows.Add(1)
                        DataGridView1.Rows(DataGridView1.Rows.Count - 1).Cells("col_seq").Value = DataGridView1.Rows.Count
                        DataGridView1.Rows(DataGridView1.Rows.Count - 1).Cells("col_subject").Value = objCalenderItem.Subject
                        DataGridView1.Rows(DataGridView1.Rows.Count - 1).Cells("col_date").Value = objCalenderItem.Start.ToShortDateString
                        DataGridView1.Rows(DataGridView1.Rows.Count - 1).Cells("col_time").Value = objCalenderItem.Start.ToShortTimeString
                    End If

                Next

            End If

        Next

    Next

    ' >> Close Application

    Call objOLApp.Quit()

    ' >> Release COM Object

    Call System.Runtime.InteropServices.Marshal.ReleaseComObject(objOLApp)

    objOLApp = Nothing 
```

如果 Outlook 已经打开，它将被终止并关闭，这是我的问题，我需要在不关闭 Outlook 的情况下删除并释放所有创建的对象和额外进程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T08:07:10.467

```
 objDoc.Close()
    objDoc.Application.Quit()
    objDoc.Application.DDETerminateAll()
    GC.Collect()
    System.Runtime.InteropServices.Marshal.FinalReleaseComObject(objDoc)<-- interop only

   try these something should work i have a similar problem  and good luck 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:04:09.537

只需删除这行代码：

```
Call objOLApp.Quit() 
```

设置它`=Nothing`但不要退出应用程序......它保持打开状态，你只是没有在程序中附加到它。

# jquery - 简单的 jquery synax 看起来不错，但显示错误

> ID：15762506
> 
> 赞同：1
> 
> 时间：2013-04-02T11:05:09.340
> 
> 标签：jquery, ajax

在搜索了 google 和 SA 之后，我决定在这里发布这个问题。我已经尝试了我看到的所有解决方案。我检查了括号和逗号。如果有人可以指导哪里错了，这是我的 jQuery

```
$(document).ready(function(){
    $("#form1").validate({
                debug: false,
                rules: {
                    passwordid:"required",
                    username:"required",
                    password_again :"required",
                    password_again:{
                        equalTo: "#passwordid"
                    },
                    email: {
                        required: true,
                        email: true
                    }
                },
                messages: {
                    email: "Please enter your valid email address.",
                    username: "Please enter your username",
                    passwordid:"Enter Password",
                    password_again:"Please enter the same value",
                },
                submitHandler: function(form) {
                    $.ajax
                        ({
                            type: "POST",
                            url: "new.php",
                            data: dataString,
                            cache: false,
                            success: function(html)
                            {
                                $("#result").html(html);
                            }
                        });
                });//error shown here:missing} after property list
            }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:07:10.360

你的牙套错了，试试这个。我将倒数第二行 ( `}`) 与 ( ) 周围的倒数第三行交换了`});`。

```
$(document).ready(function () {
    $("#form1").validate({
        debug: false,
        rules: {

            passwordid: "required",
            username: "required",
            password_again: "required",
            password_again: {
                equalTo: "#passwordid"
            },
            email: {
                required: true,
                email: true
            }
        },
        messages: {

            email: "Please enter your valid email address.",
            username: "Please enter your username",
            passwordid: "Enter Password",
            password_again: "Please enter the same value",
        },
        submitHandler: function (form) {

            $.ajax({
                type: "POST",
                url: "new.php",
                data: dataString,
                cache: false,
                success: function (html) {
                    $("#result").html(html);
                }
            });
        }
    });
}); 
```

# android - 如何从搅拌机 .obj 文件中提取法线、纹理、顶点、索引到 .h 文件？

> ID：15762508
> 
> 赞同：4
> 
> 时间：2013-04-02T11:05:29.517
> 
> 标签：android, opengl-es, blender

我有搅拌器工具来为 OpenGL ES for android 创建 3D 对象。我已经在搅拌机中尝试了这个例子并导出了 .obj 文件和 .mtl 文件。我已经使用`obj2opengl.pl`代码文件从 .obj 文件中提取 .h 文件。

但提取后，我得到了法线点、顶点线和索引。纹理坐标不是按`obj2opengl.pl`文件提取的。如何使用搅拌机生成带有纹理的 .obj 文件以及如何提取它？

请让我知道搅拌机到 openGL ES 导出的正确教程。我还需要生成纹理图像。这个过程完全基于 android 的增强现实，我正在使用 QCAR SDK 来增强现实。

# google-maps - 如何在初始加载时显示谷歌地图中的所有标记？

> ID：15762509
> 
> 赞同：0
> 
> 时间：2013-04-02T11:05:42.143
> 
> 标签：google-maps, google-maps-api-3

我开发了一个项目，显示带有多个标记的谷歌地图。我的问题是并非所有标记都显示在初始负载上。IE。如果我有四个标记，当地图最初加载时，地图中只有 2 个可见。我必须缩小才能查看其余的标记。

我该如何解决这个问题？

这是我通过 javascript 获取 Googlemap 的代码

```
window.onload=function(){                  
        var mapOptions={                 
            center:new google.maps.LatLng(markers[0].lat,markers[0].lng),                
            mapTypeId:google.maps.MapTypeId.ROADMAP        
        };
        var infoWindow=new google.maps.InfoWindow();
        var map=new google.maps.Map(document.getElementById("dvMap"),mapOptions);
        var bounds=new google.maps.LatLngBounds();
        for(i=0;i<markers.length;i++){                
            var data=markers[i];
            var latlng=new google.maps.LatLng(data.lat,data.lng);
            var marker=new google.maps.Marker({
                position:latlng,
                map:map,
                title:data.title             
            });
            (function(marker,data){
                google.maps.event.addListener(marker,"click",function(e){
                    infoWindow.setContent(data.description);
                    infoWindow.open(map,marker);
                });                
            })(marker,data);                
        } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:11:20.520

自从我从事 Google Maps API 工作以来已经有一段时间了，但我相信您需要的是：

```
var bounds = new google.maps.LatLngBounds ();

//  Go through each...
for (var i = 0, LtLgLen = LatLngList.length; i < LtLgLen; i++) {
  //  And increase the bounds to take this point
  bounds.extend (LatLngList[i]);
}

//  Fit these bounds to the map
map.fitBounds (bounds); 
```

您已经定义了边界数组并循环标记以将每个标记添加到边界数组然后 fitBounds。

有关原始文章，请参阅[http://blog.shamess.info/2009/09/29/zoom-to-fit-all-markers-on-google-maps-api-v3/](http://blog.shamess.info/2009/09/29/zoom-to-fit-all-markers-on-google-maps-api-v3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:11:27.137

```
for(i=0;i<markers.length;i++){                
            var data=markers[i];
            var latlng=new google.maps.LatLng(data.lat,data.lng);
            var marker=new google.maps.Marker({
                position:latlng,
                map:map,
                title:data.title             
            });
            bounds.extend(marker); // here is the code to add every marker plotted on bounds
            (function(marker,data){
                google.maps.event.addListener(marker,"click",function(e){
                    infoWindow.setContent(data.description);
                    infoWindow.open(map,marker);
                });                
            })(marker,data);                
        } 
map.setCenter(latlngbounds.getCenter()); // this will set the center of map to center of all markers
map.fitBounds(latlngbounds); // this will fit all the markers to screen 
```

# c# - 设置记录器详细程度

> ID：15762522
> 
> 赞同：1
> 
> 时间：2013-04-02T11:06:13.247
> 
> 标签：c#, logging

有人可以帮我设置 Logger 的详细程度吗？ [http://msdn.microsoft.com/en-us/library/microsoft.build.utilities.logger.verbosity(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/microsoft.build.utilities.logger.verbosity(v=vs.100).aspx)

```
logger.Verbosity = "Normal";
//doesn't work

logger.Verbosity = 1;
//doesn't work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:07:27.540

您必须使用[`LoggerVerbosity`](http://msdn.microsoft.com/en-us/library/microsoft.build.framework.loggerverbosity%28v=vs.100%29.aspx)-Enumeration：

```
using Microsoft.Build.Framework;

// ...
logger.Verbosity = LoggerVerbosity.Minimal; // For example (see link for more values). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:08:49.687

试试这个：

```
logger.Verbosity = LoggerVerbosity.Normal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:09:27.210

要设置`Normal`详细程度，您需要：

```
logger.Verbosity = Microsoft.Build.Framework.LoggerVerbosity.Normal; 
```

# vb.net - 为 DataGridView CellFormatting 声明一个 DataSet

> ID：15762525
> 
> 赞同：1
> 
> 时间：2013-04-02T11:06:29.950
> 
> 标签：vb.net, winforms, datagridview, dataset

我试图更改 datagridview 中的行颜色，但曾经为我工作的代码需要一个数据集。这是我用来填充我的 datagridview 的代码

```
 Dim sql As String
    sql = "SELECT * FROM [product info]"
    Dim adapter As New OleDbDataAdapter(sql, strcon)
    Dim dt As New DataTable("[product info]")
    adapter.Fill(dt)
    DataGridView1.DataSource = dt

    Dim sql1 As String
    sql1 = "SELECT * FROM [product info]"
    Dim adapter1 As New OleDbDataAdapter(sql1, strcon)
    Dim cmd As New OleDbCommand(sql1, strcon)
    strcon.Open()
    Dim myreader As OleDbDataReader = cmd.ExecuteReader
    myreader.Read()

    strcon.Close() 
```

如何在这行代码中声明数据集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:50:22.350

```
 Dim sql As String
    sql = "SELECT * FROM [product info]"
    Dim adapter As New OleDbDataAdapter(sql, strcon)
    Dim ds As New DataSet("[product info]")
    adapter.Fill(ds)
    DataGridView1.DataSource = ds

    Dim sql1 As String
    sql1 = "SELECT * FROM [product info]"
    Dim adapter1 As New OleDbDataAdapter(sql1, strcon)
    Dim cmd As New OleDbCommand(sql1, strcon)
    strcon.Open()
    Dim myreader As OleDbDataReader = cmd.ExecuteReader
    myreader.Read()

strcon.Close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:53:57.823

```
Dim ds as New Dataset("product_info")
ds.Tables.Add(dt) 
```

将数据填充到数据表 dt 后添加这些行

# c# - 禁用asp按钮自动回发

> ID：15762530
> 
> 赞同：2
> 
> 时间：2013-04-02T11:06:54.317
> 
> 标签：c#

我的 aspx 页面中有一些按钮，在每个按钮中单击一个面板就会打开。现在，当我单击页面顶部的第一个按钮时，页面保持不变。但是，当我单击第三个或其他按钮时，面板会打开，但页面会再次移回顶部。每当我单击按钮时，我都必须停止此页面。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:07:53.587

设置按钮`onclientclick="return false;"`将防止回发。

# java - JLabels 变得非常小

> ID：15762533
> 
> 赞同：2
> 
> 时间：2013-04-02T11:06:55.960
> 
> 标签：java, swing, user-interface, gridbaglayout

我正在为我的 Java 项目使用 gridbaglayout，由于某种原因，当我启动程序时，所有 JLabel 似乎都非常小，即使我已经使用百分比调整了它们的大小（因此大小应该是相对的）

这是我用来设置首选大小的代码：

```
int stswidth = (int)(((float)66/100) * getWidth()), stsheight = (int)(((float)65/100) * getHeight()); 
int navwidth = (int)(((float)21.5f/100) * getWidth()), navheight = (int)(((float)10/100) * getHeight());
int clwidth = (int)(((float)25/100) * getWidth()), clheight = (int)(((float)80/100) * getHeight());
int hwidth = (int)(((float)100/100) * getWidth()), hheight = (int)(((float)20/100) * getHeight()); 
```

这是使用网格包约束设置每个标签位置的代码：

```
c = new GridBagConstraints();

   c.gridx = 0;
   c.gridy = 0;

   core.add(sts[1], c);

   //nav

   c.gridx = 0;
   c.gridy = 0;

   nav.add(navb[0], c);

   c.gridx = 1;
   c.gridy = 0;

   nav.add(navb[1], c);

   c.gridx = 2;
   c.gridy = 0;

   nav.add(navb[2], c);

   //cl

   c.gridx = 0; 
   c.gridy = 0;

   clock.add(cl, c);
   head.add(header, c); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:20:09.340

我看不到您在哪里设置任何约束 weightx 和 weighty。尝试给他们默认值 1.0。

```
c = new GridBagConstraints();

c.weightx = 1.0;
c.weighty = 1.0;
c.gridx = 0;
c.gridy = 0; 
```

这将有助于防止所有组件在中心挤压。
是的，如果这没有帮助，那么创建并发布您的[sscce](http://sscce.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:21:11.213

不要设置首选宽度。使用`weightx`和`weighty`

# php - 如何使用 PHP GD 库计算 PNG 文件中对象的厚度

> ID：15762534
> 
> 赞同：1
> 
> 时间：2013-04-02T11:06:58.390
> 
> 标签：php, image-processing, png, gd, php-gd

我有一个 PNG 框架，我想知道它的厚度。我能够计算图像本身的宽度/高度。

```
$frame = imagecreatefrompng('frame.png');
// get frame dimentions
$frame_width = imagesx($frame);
$frame_height = imagesy($frame); 
```

但无法找出计算框架厚度的方法，请参见下图，了解我的意思。

![在此处输入图像描述](https://i.stack.imgur.com/SOIj4.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:55:23.500

从最后一个答案中可以看出，光栅图像文件中没有对象。但是，您可以通过搜索第一次出现的透明颜色和第一次出现的非透明颜色并计算它们的距离来做到这一点（假设您的图像的空白区域都是透明的）。

示例代码：

```
<?php
$img = imagecreatefrompng('./frame.png');//open the image
$w = imagesx($img);//the width
$h = imagesy($img);//the height

$nonTransparentPos = null;//the first non-transparent pixel's position
$transparentPos = null;//the first transparent pixel's position

//loop through each pixel
for($x = 0; $x < $w; $x++){
   for($y = 0; $y < $h; $y++){
        $color = imagecolorsforindex($img,imagecolorat($img,$x,$y));
        if($color['alpha'] < 127 && $nonTransparentPos === null){
            $nonTransparentPos = array($x,$y);
        }
        if($color['alpha'] === 127 && $transparentPos === null){
            $transparentPos = array($x,$y);
        }
   }
   //leave the loop if we have finished finding the two values.
   if($transparentPos !== null && $nonTransparentPos !== null){
        break;
   }
}
$length = $transparentPos[0]-$nonTransparentPos[0];//calculate the two point's x-axis distance
echo $length;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:19:50.857

PNG文件中没有任何对象。您只能通过与[`imagecolorat()`](http://www.php.net/manual/en/function.imagecolorat.php)&的坐标获得颜色（具有透明度） [`imagecolorsforindex()`](http://www.php.net/manual/en/function.imagecolorsforindex.php)。

# php - 如何在php中安装ffmpeg

> ID：15762542
> 
> 赞同：3
> 
> 时间：2013-04-02T11:07:11.210
> 
> 标签：php, ffmpeg, installation

我想为我的网站安装 ffmpeg。但我使用的是共享服务器，所以主机不会提供这个

谁能帮我安装ffmpeg（我没有使用Linux环境）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:11:01.997

如果主人不允许，那恐怕没有办法了。尝试升级到更好的主机或购买允许它的 VPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:12:56.260

可能会在下面对您有所帮助...

[http://ffmpeg.org/trac/ffmpeg/wiki/Using%20FFmpeg%20from%20PHP%20scripts](http://ffmpeg.org/trac/ffmpeg/wiki/Using%20FFmpeg%20from%20PHP%20scripts)

[http://www.ndchost.com/wiki/server-administration/install-ffmpeg](http://www.ndchost.com/wiki/server-administration/install-ffmpeg) （这适用于linux环境。所以在你的情况下它没有用。但将来可能会对你有所帮助。）

[FFMPEG PHP 似乎不起作用](https://stackoverflow.com/questions/11607062/ffmpeg-php-does-not-seem-to-work) （解决方案的类似问题）

[http://vexxhost.com/blog/2006/12/20/what-ffmpeg-php-can-do-and-how-to-use-the-most-out-of-it/](http://vexxhost.com/blog/2006/12/20/what-ffmpeg-php-can-do-and-how-to-use-the-most-out-of-it/)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:14:25.593

你可以使用，但不能用 PHP 安装 ffmpeg。您必须要求您的托管服务提供商为您提供（但我认为他们不会）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-15T07:46:29.023

使用以下命令安装 ffmpeg ：

希望网址能帮到你

[http://www.mysql-apache-php.com/ffmpeg-install.htm](http://www.mysql-apache-php.com/ffmpeg-install.htm)

# ios - 将数据从类发送到 UITableViewController？

> ID：15762545
> 
> 赞同：0
> 
> 时间：2013-04-02T11:07:17.530
> 
> 标签：ios, objective-c, ios6

我在 xcode 4.6 中创建了主详细信息模板项目，并添加了带有 2 个文本字段的自定义单元格。由于我无法在 UITableViewController 中为 textField 创建插座，我必须创建新的 DataCell 类，它是 UITableViewCell 的子类。现在我不知道如何将数据从 DataCell 传递到 viewController 或任何其他类？

所有的协议和委托教程都集中在 viewControllers 上，所以我总是以如下几行结尾：

```
[self presentModalViewController:enterAmountVC animated:YES]; 
```

我显然不能使用它，因为我的班级没有任何模型或推送连接。那么问题是在这种情况下如何传输数据？将 UITableViewCell 的子类 DataCell 设为模型类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:22:56.623

您不需要从 DataCell 传递数据。单元格主要用于显示数据而不是用于存储。如果您使用的是 UITableView，我想您也使用了一些数组作为 UITableView 的数据源。所以你可以从数组中获取数据。如果你有单元格，你可以使用它在你的数组中获取它的索引

```
NSIndexPath *indexPath = [tableView indexPathForCell:cell];
if (indexPath)
{
    DataModel *dataModel = [myDataArray objectAtIndex:indexPath.row];
} 
```

现在您可以使用`dataModel`来获取所需的数据并将其传递给您的 UIViewController。

**如果所有信息都存储在单元格的文本字段中**，您需要在`DataCell`类中为您的文本字段创建属性，然后通过这些属性获取信息。

# jquery - Resharper 不显示 jqeury.intellisense.js 的摘要

> ID：15762547
> 
> 赞同：1
> 
> 时间：2013-04-02T11:07:18.117
> 
> 标签：jquery, visual-studio-2012, resharper

当我使用 Visual Studio 智能时，jquery 方法的摘要显示良好，我可以轻松地在重载方法之间进行选择。但是当我使用 resharper intellisense 时，摘要没有显示。有没有人遇到过这个问题或知道如何为 jquery.intellisense 制作更清晰的显示摘要？

![Visual Studio 智能感知](https://i.stack.imgur.com/OjcfY.jpg)

![锐化智能感知](https://i.stack.imgur.com/F5iuE.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:53:16.787

Visual Studio 读取 xml 注释并将它们嵌入到智能中，但 resharper 只读取 xml 注释中的摘要部分，并且当注释中有参数标签时，resharper 不会读取它，顺便说一下 jquery-vsdoc.js 是一个更好的选择到 jquery.intellisence.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T13:24:03.360

user1239169 的回答不正确。事实上，ReSharper 不支持 8.1 和以前版本中“*.intellisense.js”文件中常用的“intellisense.annotate”样式。在其他情况下（例如使用“*vsdoc.js”），它会解析所有内容（摘要、参数、签名标签），至少在 8.1 版本中是这样。

# android - LayoutInflater 中的空指针异常

> ID：15762548
> 
> 赞同：0
> 
> 时间：2013-04-02T11:07:24.360
> 
> 标签：android, listview, layout-inflater

我已经制作了 Bean 类，我们在其中获取和设置名称和图像的值，并制作了另外两个类。我做了`MainActivity`课程和`ListAdapterPlay`课程，我想在 listView item 中设置图像。但它屈服`NullPointerException`了`LayoutInflater`

```
public class ListAdapterPlay extends BaseAdapter {
// private Bean bean;
private ArrayList<Bean> objarraylist;
private Context context;
private LayoutInflater objlayoutinflater;

public ListAdapterPlay(ArrayList<Bean> objarraylist, Context context) {
    this.context = context;
    this.objarraylist = objarraylist;
    objlayoutinflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); //error at this line 
    // TODO Auto-generated constructor stub
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Bean bean = (Bean) getItem(position);
    convertView = objlayoutinflater.inflate(R.layout.listviewrow,null);
    // TODO Auto-generated method stub
    TextView txt = (TextView) convertView.findViewById(R.id.textView1);
    // bean= new Bean();
    txt.setText(bean.getName());

    ImageView img = (ImageView) convertView.findViewById(R.id.imageView1);
    String uri = "drawable/" + bean.getImage();
    int imageResource = context.getResources().getIdentifier(uri, null,
            context.getPackageName());
    Drawable image = context.getResources().getDrawable(imageResource);
    img.setImageDrawable(image);
    // img.setBackgroundResource()

    return convertView;
}
} 
```

我`MainActivity`上课如下

```
public class MainActivity extends Activity {
private ArrayList<Bean> objarraylist;
private  ListAdapterPlay objlistadapter;
private ListView listview;
private Context context;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    objarraylist=new ArrayList<Bean>();
    objarraylist.add(new Bean("RAM","ic_launcher"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));
    objarraylist.add(new Bean("RAM","lion"));

    objlistadapter= new ListAdapterPlay(objarraylist,context);
    listview=(ListView)this.findViewById(R.id.listview1);
    listview.setAdapter(objlistadapter);
}

} 
```

我想在 listView 项目中设置图像，但`NullPointerException`在`ListAdapterPlay`课堂上通过。错误在这一行

```
objlayoutinflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

我被困在这种情况下，为什么？它给`NullPointerException`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:12:11.390

```
public ListAdapterPlay(ArrayList<Bean> objarraylist, Context context) {
    this.context = context;
    this.objarraylist = objarraylist;
    objlayoutinflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); //error at this line 
    // TODO Auto-generated constructor stub
} 
```

**可能是上下文为空**

```
objlistadapter= new ListAdapterPlay(objarraylist,context); 
```

在构建时`ListAdapterPlay`

尝试

```
objlistadapter= new ListAdapterPlay(objarraylist,this); 
```

# c# - FixedPage 类和 IEnumerable

> ID：15762549
> 
> 赞同：4
> 
> 时间：2013-04-02T11:07:24.727
> 
> 标签：c#, ienumerable, fixedpage

我有一个 FixedPage 类如下

```
 PageContent pageContent = new PageContent();
        FixedPage fixedPage = new FixedPage();
        double pageWidth = 96 * 8.5;
        double pageHeight = 96 * 11;
        fixedPage.Width = pageWidth;
        fixedPage.Height = pageHeight;
        Size sz = new Size(8.5 * 96, 11 * 96);
        fixedPage.Measure(sz);
        fixedPage.Arrange(new Rect(new Point(), sz));
        fixedPage.UpdateLayout();

        ((IAddChild)pageContent).AddChild(fixedPage); 
```

和一个 IEnumerable 对象如下

```
IEnumerable<FixedPage> page;
page.Concat(new[] { fixedPage }); 
```

在行中

```
page.Concat(new[] { fixedPage }); 
```

其显示错误为

> *'使用未分配的局部变量'page''*

如何将 fixedPage 分配给页面？

我还需要帮助来创建一个 fixedPage 对象（元素）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:13:58.313

您应该通过创建一个实现**IEnumerable**接口的类的新实例来初始化 page 变量，例如通用**List**类：

```
IEnumerable<FixedPage> page = new List<FixedPage>(new FixedPage[] { fixedPage }); 
```

# google-search - 是否建议将标签站点地图发送到 Google 站长工具

> ID：15762552
> 
> 赞同：1
> 
> 时间：2013-04-02T11:07:29.633
> 
> 标签：google-search, google-search-console

我有一个动态网站，我目前已向 Google 网站管理员工具的站点地图部分提交了大约 1,600,000 个用户生成的项目。

所有这些项目也有用户添加的标签，所以我的问题是，如果我为这些标签创建站点地图（大约有 4,000,000 个）将有助于我索引更多页面，否则它将被谷歌视为垃圾邮件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:50:16.317

只要这些标签页有足够多的不同内容，即使有一些块被重用，也可以。

更糟糕的是，如果有多个标签具有相同的块并且只更改 H1 和标题。

但这一切都取决于标签页面是否对随机访问者有用，如果没有，则避免在robot.txt上列出并阻止它以改善蜘蛛计时。

# events - 在用户控件上捕获事件

> ID：15762553
> 
> 赞同：0
> 
> 时间：2013-04-02T11:07:32.017
> 
> 标签：events, user-controls

在 Windows 窗体上，我有一个 UserControl (UC)。在这个 UC 中，有一个没有 DragDrop 事件的 WebBrowser 控件。

如何在我的 UC 区域捕捉 DragDrop？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:10:41.337

也许这可以指向正确的方向：

[http://msdn.microsoft.com/en-us/library/aa984430(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa984430(v=vs.71).aspx)

# c# - 具有 linq 查询样式的 DefaultIfEmpty 在哪里

> ID：15762556
> 
> 赞同：2
> 
> 时间：2013-04-02T11:07:43.727
> 
> 标签：c#, linq

```
var query = from r in list where r.Id == "" DefaultIfEmpty(String.Empty) 
```

不起作用。

如何编写具有查询样式的 linq 查询并使用 DefaultIfEmpty 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:14:22.863

假设您的列表包含`Item`您想要的类型：

```
// define your default item
var defaultItem = new Item { ... };

var query = (from r in list where r.Id == "" select r).DefaultIfEmpty(defaultItem); 
```

或在方法语法中

```
var query = list.Where( r => r.Id == "" ).DefaultIfEmpty(defaultItem); 
```

但是，如果您选择的是特定的字符串属性，`Item`那么您可能需要类似

```
var query = (from r in list where r.Id == "" select r.StringProperty)
            .DefaultIfEmpty(string.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:10:30.617

[DefaultIfEmpty](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.defaultifempty.aspx)通常与,（外连接）*一起使用。*`JOINS`您可能会看到：[如何：执行左外连接（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb397895.aspx)

对于您的情况，如果 r.Id 为空，您想选择空字符串，您可以这样做：

```
var query = from r in list
            select new 
               {
                 ID =  r.Id == null ? string.Empty : r.Id
               }; 
```

# jquery - 如何调用ajax方法

> ID：15762561
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:08:00.400
> 
> 标签：jquery, ajax

我有以下代码

```
<li id="btemaildelete"><a href="##" onClick="return confirm('Are you sure you want to delete this Email Address?');"><i class="cus-cancel"></i> Delete</a></li> 
```

并想拨打以下电话

```
emaildelete.cfm?intuserid=1 
```

你能帮我理解一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:11:12.277

如果您包含 jQuery：

```
$.get("emaildelete.cfm", {intuserid: 1}, function(data) {
    // data contains the response of emaildelete.cfm
}); 
```

要在 jQuery 中捕获单击事件，您可以执行以下操作：

```
HTML:
<a href="..." data-id="1">Delete</a>

JavaScript:
$(document).ready(function() {
    $("a[data-id]").click(function() {
       var confirm = confirm("Are you sure u wanna delete?");
       if(!confirm) return false;

       var deleteId = $(this).data("id");
       $.get("emaildelete.cfm", {intuserid: deleteId}, function(data) {
           // data contains the response of emaildelete.cfm
       });

       return false;
    });
}); 
```

使用该代码，您不再需要“onclick”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:17:21.013

您必须从链接本身传递 id，不确定如何诚实地通过 aspx 填充这些链接。您只需要将电子邮件的 id 放入链接的 id 中，但是您的应用程序可以这样做。

```
<li class="btemaildelete"><a href="##" class="deleteLink" id="get your ID in here" 
onClick="return confirm('Are you sure you want to delete this Email Address?');"><i 
class="cus-cancel"></i> Delete</a></li>

$(".deleteLink").on("click",function(){
$.ajax({
    type: 'POST',
    url: 'emaildelete.cfm',
    data: '{ intuserid : $(this).attr("id") }',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function(msg) {
        alert('Email deleted');
    }
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:09:50.847

这是一个例子

```
$.ajax({
    type: 'POST',
    url: 'url',
    data: '{ }',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function(msg) {
        // Do something interesting here.
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:14:19.627

试试这样：

```
<li id="btemaildelete"><a href="##" onClick="call_function();"><i class="cus-cancel"></i> Delete</a></li> 
```

在您的 JavaScript 代码中：

```
function call_function() {
    if(confirm('Are you sure you want to delete this Email Address?'))
     {
     $.ajax({
     url: "emaildelete.cfm?intuserid=1",  //Or any other server page you want
     type: "POST",
     success: function (response) {
      alert('Success' + response);
     }
    }); 
```

# php - 如何在 Yii 中获取所有相关的模型 ID？

> ID：15762562
> 
> 赞同：1
> 
> 时间：2013-04-02T11:08:00.963
> 
> 标签：php, yii

假设 $model 有一些项目（一对多的关系），所以在 Yii $model->items 返回一个项目模型数组。
如何获取相关项目的 ID 数组。这意味着返回数组的每个元素都是一个整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:35:16.610

您应该为此编写自己的函数，例如

```
public function getItemsIDs()
{
  $ids = array();
  foreach($this->items as $item)
    $ids[] = $item->id;
  return $ids;
} 
```

之后你只需要打电话`$model->itemsIDs`。

编辑：正如*darkheir*在其评论中所说，您应该考虑使用[DAO](http://www.yiiframework.com/doc/guide/1.1/en/database.dao)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-14T18:08:39.217

这是直接查询的示例，从模型运行：

```
$this->getDbConnection()->createCommand("SELECT id FROM items WHERE model_id = :modelId")->bindParam(":modelId", $model->id, PDO::PARAM_STR)->queryColumn(); 
```

结果，您将获得带有表中 ID 作为值的数字 Array()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-05T11:37:35.777

另一种变体。

```
Yii::app()->db->createCommand("SELECT id FROM items WHERE model_id=".$model->id)->queryColumn() 
```

这将从表中获取所有 ID 作为数组

# java - '{' 让我大吃一惊

> ID：15762563
> 
> 赞同：3
> 
> 时间：2013-04-02T11:08:02.823
> 
> 标签：java, stringtemplate-4

我想`org.stringtemplate.v4.*`用作渲染 html 页面的模板引擎。但是我找不到如何在我的文件中转义左括号。Templator 认为它是某种表达式，而它只是 javascript 代码。

我试过`\{`了，但这无济于事 - 我仍然得到

```
504:15: invalid character '\'
504:16: '{' came as a complete surprise to me 
```

如何逃避这个？或者存在哪些 stringtemplate 的类似物，可以正确处理 html 页面作为输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T17:05:13.117

当我收到此错误时，是因为我忘记了属性的结束符号 ($)。应该是这样的`$attribute.name$`

参考：[http ://www.antlr.org/wiki/display/ST/Expressions#Expressions-AttributeReferences](http://www.antlr.org/wiki/display/ST/Expressions#Expressions-AttributeReferences)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:41:03.633

由于 java 被标记，我猜你也必须转义`\`，因为它是 java 中的一个特殊字符，可能是`\\{`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-19T00:46:22.037

`$`当我在用作模板的 XML 文件中的某些内容中有未转义的内容时，我遇到了这个问题。通过使用来修复它`\$`。

# php - zend 使用装饰将服务器端验证消息移动到文本框旁边

> ID：15762564
> 
> 赞同：4
> 
> 时间：2013-04-02T11:08:10.823
> 
> 标签：php, zend-framework

在zend中，

使用装饰器如何将验证消息带到文本框旁边。我目前的装修代码

```
$elementDecoration = array(
            'ViewHelper',
            'Description',
            'Errors',
            array(array('data'  => 'HtmlTag'), array('tag' => 'td','width'=>'75%', 'class' => 'txt-td-field')),
            array('Label', array('tag' => 'td','width'=>'50%', 'class' => 'txt-td-label', 'placement' => 'prepend')),
            array(array('row'   => 'HtmlTag'), array('tag' => 'tr','valign'=>'top'),'width'=>'102%'),
        ); 
```

![在此处输入图像描述](https://i.stack.imgur.com/hFXTF.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:34:04.063

```
$fname = $this->createElement('text', 'first_name');
$fname ->setRequired(true)
       ->setAttrib('class','my_class')
       ->addValidator('NotEmpty', true, array('Name is required'));
$fname->setDecorators(array('ViewHelper','Errors')); 
```

这将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:47:14.120

尝试使用自定义装饰器：

```
class My_Form_Decorator_TdError extends Zend_Form_Decorator_Errors
{
    public function render($content)
    {
        $errors = parent::render('');
        return $content . "<td>" . $errors . "</td>";
    }
} 
```

然后设置装饰器如下：

```
 $elementDecoration = array(
        'ViewHelper',
        'Description',
        array(array('data'  => 'HtmlTag'), array('tag' => 'td','width'=>'75%', 'class' => 'txt-td-field')),
        array('Label', array('tag' => 'td','width'=>'50%', 'class' => 'txt-td-label', 'placement' => 'prepend')),
        'TdError',enter code here
        array(array('row'   => 'HtmlTag'), array('tag' => 'tr','valign'=>'top'),'width'=>'102%'),
    ); 
```

在表单构造函数中设置自定义装饰器调用的路径

```
$this->addPrefixPath('My_Form_Decorator', 'My/Form/Decorator', 'decorator'); 
```

# c++ - 函数指针中的可变参数个数

> ID：15762565
> 
> 赞同：2
> 
> 时间：2013-04-02T11:08:12.557
> 
> 标签：c++, function-pointers, managed-c++

我有一个指向函数的指针，它可以指向带有一个、两个或多个参数的函数。

```
double (*calculate)(int);

double plus(int a, int b){ return a+b; }

double sin(int a){ return Math::Sin(a); } 
```

我怎么可能使用

```
calculate = plus; 
calculate = sin; 
```

在同一个程序中。不允许更改函数 plus 和 sin。用托管 C++ 编写；

我试过`double (*calculate)(...);`了，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:59:50.720

你可以尝试使用这样的东西：

```
struct data
{
  typedef double (*one_type) ( int a );
  typedef double (*other_type) ( int a, int b );

  data& operator = ( const one_type& one ) 
  {
    d.one = one;
    t = ONE_PAR;
    return *this;
  }

  data& operator = ( const other_type& two ) 
  {
    d.two = two;
    t = TWO_PAR;
    return *this;
  }

  double operator() ( int a )
  {
    assert( t == ONE_PAR );
    return d.one( a );
  }

  double operator() ( int a, int b )
  {
    assert( t == TWO_PAR );
    return d.two( a, b );
  }

  union func
  {
    one_type one;
    other_type two;
  } d;

  enum type
  {
    ONE_PAR,
    TWO_PAR
  } t;
};
double va( int a ) 
{
  cout << "one\n";
}
double vb( int a, int b ) 
{
  cout << "two\n";
} 
```

这工作正常：

```
data d;
d = va;
d( 1 );
d = vb;
d( 1, 2 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:12:26.453

`plus`to的赋值`calculate`是一种类型违规，并且在`calculate`稍后调用时会导致[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)，因此任何（坏的）都可能发生。

您可能对[libffi](http://sourceware.org/libffi/)感兴趣（但我不知道它是否适用于托管 C++）。

# c# - 一次读取 50 行 xml 文件

> ID：15762569
> 
> 赞同：0
> 
> 时间：2013-04-02T11:08:36.753
> 
> 标签：c#, xml, streamreader, xmlreader

目前正在尝试创建一种方法来一次读取 50 行 XML 文件，这将增加以允许在程序中使用更大的文件。

目前我正在尝试使用以下代码来完成此操作。

```
 List<dataclass.DataRecord> list = new List<dataclass.DataRecord>();
 string filename = "FileLocation"
 XmlDocument testing = new XmlDocument();

 //using (StreamReader streamreader = new StreamReader(filename))
 using (XmlTextReader reader = new XmlTextReader(new StringReader(filename)))
 {
   while (reader.Read() != null)
   {
    for (int i = 0; i < 50; i++)
    {
     testing.Load(reader);

     //list.add(line);
     Console.WriteLine(testing);
     //testing.Load(reader);
     }
   }
 } 
```

注释行只是来自我以前用来实现我的目标的想法，并且文件名已被删除，因为我只是不想将它放在网上。

基本上目前我不断收到以下错误：

根级别的数据无效。第 1 行，位置 1。

所以我不知道我是不是：

A. 以正确的方式解决这个问题。

B. 修复此错误的唯一方法是用“root + /root”标签包围“testing.load”

希望有人能帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:14:06.137

如果您只是想将 xml 加载到 XmlDocument - 为什么不只是

```
 XmlDocument testing = new XmlDocument();
 testing.Load(filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:23:15.337

如果您的 XML 文件非常大，最好使用某种拉式解析器（逐个标签、逐个属性解析等）而不是 DOM 解析器（在解析期间加载整个文档，将其保存在内存中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:45:16.710

正如我在评论中解释的那样，XML 由**节点**组成，而您将其视为带有线条的平面文件。

有几个 Stackoverflow 问题的答案与您尝试做的事情相匹配。真正的问题是**“如何加载大型 XML 文件”**。答案是使用流而不是加载一大块，从那里你可以找到很多关于使用[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)的资源。

**指向其他 SO 文章的几个指针：**

[C# 和读取大型 XML 文件](https://stackoverflow.com/questions/12931769/c-sharp-and-reading-large-xml-files)

[在 .net 中读取大型 XML 文档](https://stackoverflow.com/questions/7671958/reading-large-xml-documents-in-net)

希望有帮助！

# mysql - Tablesorter：子行高于总数

> ID：15762571
> 
> 赞同：1
> 
> 时间：2013-04-02T11:08:42.567
> 
> 标签：mysql, tablesorter

我得到一个带有详细行和总数的 MySQL 查询。我很想使用 Tablesorter 子行功能来隐藏详细信息行，但面临需要将 csv 文件转换为 html 的问题（这没问题），但我的总行数位于每个详细行列表的底部，而不是上面.

问题是，我可以使用 Tablesorter 子行以单击链接相关的上排展开的方式吗？

我的示例表（在将其转换为 html 之前）是：

```
n_cli   n_inv                          date_inv     date_due        eur       +exp
----------------------------------------------------------------------------------
10289   21222321-1                   2012-10-04   2012-12-30   1,031.05   1,072.29 
10289   21222479-1                   2012-10-09   2012-12-30     257.28     267.57 
----------------------------------------------------------------------------------
Total   CUSTOMER1 NAME                                         1,288.33   1,339.86 

10416   21110039-1                   2011-06-22   2011-06-22     136.28     145.28 
----------------------------------------------------------------------------------
Total   CUSTOMER2 NAME                                           136.28     145.28 
```

顺便问一下，我可以使用具有三个细节级别的子行吗？例如，“每位客户的总销售额/每张发票的总销售额/每张发票的产品线”？

谢谢，

编辑：这是源（示例）文件：

```
n_cli;n_inv;date_inv;date_due;eur;+exp
10289;21222321-1;2012-10-04;2012-12-30;1,031.05;1,072.29
10289;21222479-1;2012-10-09;2012-12-30;257.28;267.57
Total;CUSTOMER1 NAME;;;1,288.33;1,339.86
10416;21110039-1;2011-06-22;2011-06-22;136.28;145.28
Total;CUSTOMER2 NAME;;;136.28;145.28 
```

还有我的 html，它显然无法正常工作，因为我无法：

1.  通过 loadComplete 函数 (¿?) 编辑 CSVTOTABLE 进程，以便标记要显示的行和要隐藏的行。
2.  隐藏上面的行（在 Total 上面）而不是下面的行。

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <link rel="stylesheet" type="text/css" href="/js/ts/css/theme.default.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="/js/ts/js/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="/js/ts/js/jquery.tablesorter.widgets.min.js"></script>
    <script type="text/javascript" src="/js/csv/js/jquery.csvToTable.js"></script>

    <script>
    $(function() {
       $('#tabla1').CSVToTable('dat.txt',
    {
    startLine: 0,
    separator: ";"
    }
    ).bind("loadComplete",function() {
       $(document).find('#tabla1').tablesorter({widgets:
       ["zebra", "stickyHeaders"]});
    });;
    });
    </script>

    </head>
    <body>

    <div>
    <table id="tabla1" class="tablesorter">
    </div>

    </table>

    </body>
    </html> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:22:31.760

因此，您可以使用 CSVToTable 加载完成回调函数来根据需要修改表。

我将这段代码和[演示](http://jsfiddle.net/Mottie/abkNM/595/)* 放在一起，以展示如何分配子行并使总行之上的行可折叠：

```
$(function () {

  $('table')
  .CSVToTable('csv.txt', {
    startLine: 0,
    separator: ';'
  })
  .bind("loadComplete", function () {
    $('table')
      .find('td:contains("Total")')
      .each(function () {
        var $cell = $(this).prepend('<i/>'),
        $totalRow = $cell.parent().addClass('totals tablesorter-childRow'),
        group = $totalRow.prevUntil('.totals');
        group.last().addClass('tablesorter-parentRow');
        group.slice(0, -1).addClass('tablesorter-childRow');
      }).end()
      .tablesorter({
        theme: 'blue',
        widgets: ["zebra", "stickyHeaders"]
      })
      .find('tr.totals').click(function () {
        $(this)
        .toggleClass('collapsed')
        .prevUntil('.totals').toggle();
      });
  });

}); 
```

*该演示没有使用 CSVToTable 脚本，但添加的 HTML 是相同的。

“Total”单元格内的箭头由 css 设置样式，因此您可以根据需要更改它们：

```
/* collapsed arrow */
tr.totals.collapsed td i {
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
  border-left: 5px solid #888;
  border-right: 0;
  margin-right: 10px;
}
tr.totals td i {
  display: inline-block;
  width: 0;
  height: 0;
  border-bottom: 4px solid transparent;
  border-top: 4px solid #888;
  border-right: 4px solid #888;
  border-left: 4px solid transparent;
  margin-right: 7px;
} 
```

* * *

更新：因为您正在折叠行，所以您需要一个自定义解析器来在最后一行而不是第一行中查找自定义名称，因此它可以正确排序。这是要使用的解析器和[更新的演示](http://jsfiddle.net/Mottie/abkNM/597/)

```
$.tablesorter.addParser({
    id: 'findname',
    format: function (s, table, cell, cellIndex) {
        var $cell = $(cell).parent().nextAll('tr.totals').eq(0).find('td').eq(cellIndex);
        return $cell.text();
    },
    // set type, either numeric or text
    type: 'text'
}); 
```

* * *

更新#2：好吧，您需要另一个解析器来处理数字列，以便它们也能正确排序；这是一个[更新的演示](http://jsfiddle.net/Mottie/abkNM/598/)：

```
$(function () {

    $.tablesorter.addParser({
        id: 'findname',
        format: function (s, table, cell, cellIndex) {
            var $cell = $(cell).parent().nextAll('tr.totals').eq(0).find('td').eq(cellIndex);
            return $cell.text();
        },
        type: 'text'
    });

    $.tablesorter.addParser({
        id: 'findnumber',
        format: function (s, table, cell, cellIndex) {
            var $cell = $(cell).parent().nextAll('tr.totals').eq(0).find('td').eq(cellIndex);
            return $.tablesorter.formatFloat($cell.text(), table);
        },
        type: 'numeric'
    });

    $('table')
    .CSVToTable('csv.txt', {
        startLine: 0,
        separator: ';'
    })
    .bind("loadComplete", function () {
        $('table')
            .find('td:contains("Total")')
            .each(function () {
            var $cell = $(this).prepend('<i/>'),
                $totalRow = $cell.parent().addClass('totals tablesorter-childRow'),
                group = $totalRow.prevUntil('.totals');
            group.last().addClass('tablesorter-parentRow');
            group.slice(0, -1).addClass('tablesorter-childRow');
        }).end()
       .tablesorter({
            theme: 'blue',
            headers: {
                1: { sorter: 'findname' },
                4: { sorter: 'findnumber' },
                5: { sorter: 'findnumber' }
            },
            widgets: ["zebra", "stickyHeaders"]
        })
        .find('tr.totals').click(function () {
            $(this)
                .toggleClass('collapsed')
                .prevUntil('.totals').toggle();
        });
    });

}); 
```

* * *

更新#3

要分别设置父行和子行的样式，您可以使用应用的类名`tablesorter-parentRow`和`tablesorter-childRow`，但为了避免混淆，我将 重命名`tablesorter-parentRow`为`tablesorter-firstChildRow`因为在插件中它实际上是父行，但出于样式目的，最好将其命名作为一个子行，因为我们正在自下而上地工作。“总计”行也`tablesorter-childRow`应用了类名，因此为了区分它，您可以使用`totals`类名。

无论如何，这是一个更新的演示，其中包含类名更改和 css，以及确保它仅针对 tbody ( `.find('tbody td:contains("Total")')`)中的单元格的附加内容

```
/* child row styling */
.tablesorter-firstChildRow td, .tablesorter-childRow td {
    color: red;
}
/* Totals row */
tr.totals td {
    color: blue;
} 
```

# asp.net-mvc - 无法在 nopCommerce v2.60 上访问管理员 CP

> ID：15762575
> 
> 赞同：1
> 
> 时间：2013-04-02T11:08:52.297
> 
> 标签：asp.net-mvc, nopcommerce

我[在 CodePlex 上去了这里](http://goo.gl/DiIvF)并下载了 nopCommerce v2.60。我在 Windows 8 Pro 64x 机器上，我安装了 .NET Framework 和 SQLEXPRESS 2012。

nopCommerce 解决方案安装得很好，没问题！所有前端的东西都工作正常。但是当我尝试访问时：

> 本地主机：xxxx/管理员

我收到以下错误：

![在此处输入图像描述](https://i.stack.imgur.com/DUx8E.png)

我已经尝试使用新的数据库和文件重新安装，但没有成功。我不知道如何让它工作。在此使用之前工作完全没有问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:08:33.423

您需要在运行之前构建整个解决方案。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:39:24.257

在与我的一位非常擅长 C# 并且在 nopCommerce 方面拥有出色经验的朋友交换了电子邮件之后。他也能够像我一样在运行 Win 8 Pro 64x 和 VS 2012 的机器上复制问题。

事实证明，出于某种奇怪的原因，在 VS 2012 中运行之前，必须构建并重新构建解决方案几次。

因此，在 VS2012 中重新打开您的 nopCommerce，在运行它之前，重新构建解决方案 2 或 3 次，然后运行它。

那是我的解决方法。太烦人了，我花了这么多时间坚持它，但我很高兴它现在可以工作了。

# css - css根据滚动位置调整div大小

> ID：15762577
> 
> 赞同：0
> 
> 时间：2013-04-02T11:08:57.343
> 
> 标签：css

我知道如何做到这一点是 JavaScript，但是否有可能只使用 css 和媒体查询来实现相同的结果。

如果窗口滚动位置大于 100，则将“myDiv”高度调整为 100px，如果窗口滚动位置小于 100px，则将“myDiv”高度调整为默认值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:10:50.497

不，您不能使用 CSS 执行此操作，如果您想根据当前视口位置/滚动条操作视图，则需要 JavaScript。

# android - Android：如何使带有子列表的列表元素可选？

> ID：15762578
> 
> 赞同：0
> 
> 时间：2013-04-02T11:09:02.187
> 
> 标签：android, android-layout, android-listview

我有一个 ListView，其中的元素有一个子列表及其元素。这看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/HDw2l.png)

我的问题如下：

所有元素都应该是可选的。但这仅在没有为此元素存储任何子列表的情况下才有效（请参阅具有绿色背景色的元素“Abc”）。如何使其他元素（带有子列表的元素，在本例中为“Do Br”或“XY”）也可选择？注意：元素名称中的空格无关紧要。

代码：

主要清单：

```
<ListView
    android:id="@+id/listViewWithSubLists"
    android:choiceMode="singleChoice" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
</ListView> 
```

主列表中的条目：

```
<TextView
    android:id="@+id/listentry"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#004400"
    android:textSize="18sp" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:paddingLeft="20dip" 
    >
    <ListView
        android:id="@+id/sublistView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:28:03.150

您的需求问题可以通过使用[可扩展列表来解决](http://developer.android.com/reference/android/widget/ExpandableListView.html)

[试试这个指南以获取可扩展列表](http://www.edumobile.org/android/android-game-programming/simple-expandable-list-example/)

[您还可以尝试通过使用ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)扩展类来使用自己的自定义适配器

```
Override the method
public View getView(int position, View convertView, ViewGroup parent) 
```

在您的子列表中添加事件。

# jquery - D3 可重用图表函数创建多个图表

> ID：15762580
> 
> 赞同：1
> 
> 时间：2013-04-02T11:09:16.110
> 
> 标签：jquery, d3.js

我构建了一个可重复使用的图表函数（向 Mike Bostock 致敬 - [http://bost.ocks.org/mike/chart/](http://bost.ocks.org/mike/chart/)）：

```
function chartBubble() {
  var width = 800,
      height = 800; 

  function chart() {
   var svg = d3.select("#chart").append("svg")
            .attr("width", width)
            .attr("height", height); 

   // generate rest of chart here
  }

  chart.width = function(value) {
    if (!arguments.length) return width;
    width = value;
    return chart;
  };

  return chart;
} 
```

通过调用函数，这在初始时效果很好：

```
d3.csv("data.csv", function (data) {
 d3.select("#chart")
  .datum(data)
  .call(chartBubble().width(800));
}); 
```

当我想通过调用更改宽度时，会出现创建重复 svg 图表对象的问题：

```
$("#button").click(function(){
  d3.select("#chart")
   .call(chartBubble().width(500)); 
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T21:16:27.647

我会将实现更改为*更*可重用：

```
function chartBubble() {
  var width = 800,
      height = 800; 

  function chart(selection) {
    selection.each(function (d, i) {
        var chartElem = d3.select(this);
        var svg = chartElem.selectAll('svg').data([d]);

        var svgEnter = svg.enter().append('svg');

        // Now append the elements which need to be inserted
        // only once to svgEnter.
        // e.g. 'g' which contains axis, title, etc.

        // 'Update' the rest of the graph here.
        // e.g. set the width/height attributes which change:
        svg
           .attr('width', width)
           .attr('height', height);

    });
  }

  chart.width = function(value) {
    if (!arguments.length) return width;
    width = value;
    return chart;
  };

  return chart;
} 
```

然后您将以几乎相同的方式创建图表：

```
// Bubble is created separately and is initialized
var bubble = chartBubble().width(800);

d3.csv("data.csv", function (data) {
 d3.select("#chart")
  .datum(data)
  .call(bubble);
}); 
```

然后，当涉及通过更新或更改其他属性来*更新*图表时`data`，您有一个统一的方法，非常接近您的实现：

```
$("#button").click(function(){
  // The advantage of defining bubble is that we can now change only
  // width while preserving other attributes.
  bubble.width(500);
  d3.select("#chart")
  //.datum(newData)
    .call(bubble); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T07:13:13.707

现在有一个框架可以创建可重用的 d3 图表（基于 Mike Bostock 的文章 - [http://bost.ocks.org/mike/chart/](http://bost.ocks.org/mike/chart/)）：

[d3.chart](http://misoproject.com/d3-chart/)

关于此的广泛文​​章 - [http://weblog.bocoup.com/reusability-with-d3/](http://weblog.bocoup.com/reusability-with-d3/)和[http://weblog.bocoup.com/introducing-d3-chart/](http://weblog.bocoup.com/introducing-d3-chart/)

# mysql - Mysql查询获取温度趋势

> ID：15762585
> 
> 赞同：0
> 
> 时间：2013-04-02T11:09:47.557
> 
> 标签：mysql, logging, temperature, trend

我有一个非常大的表，每 1 分钟记录一次温度，我想查询的是趋势；每个选定时间段的百分比增加或百分比减少（小时或 15 分钟；取决于查询）

我的表看起来（示例）如下

```
ID      time                temp
119950  2013-03-27 07:56:05 27.25
119951  2013-03-27 07:57:05 27.50
119952  2013-03-27 07:58:05 27.60
119953  2013-03-27 07:59:05 27.80
119954  2013-03-27 08:00:05 27.70
119955  2013-03-27 08:01:05 27.50
119956  2013-03-27 08:02:05 27.25
119957  2013-03-27 08:03:05 27.10
119958  2013-03-27 08:04:05 26.9
119959  2013-03-27 08:05:05 27.1
119960  2013-03-27 08:06:05 27.25
119961  2013-03-27 08:07:05 27.6 
```

我相信可以按以下方式计算趋势（根据[链接](http://www.wikihow.com/Calculate-the-Rate-of-Temperature-Increase)），但是如果您有更好的方法，请纠正我；取每行之间的差异，然后加起来并除以计数。所以对于上表我们得到

```
Diff
+0.25
+0.10
+0.20
-0.10
-0.20
-0.25
-0.15
-0.20
+0.20
+0.15
+0.35 
```

过去 11 分钟的每分钟趋势是 diff/11 的总和。在最后 11 分钟内每分钟产生 0.063C。

有人可以帮我获取过去 3 小时每小时的百分比趋势。和每分钟趋势 1 小时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:57:51.890

```
CREATE TABLE temperature_log
(ID      INT NOT NULL,dt DATETIME NOT NULL, temperature DECIMAL(5,2) NOT NULL);

INSERT INTO temperature_log VALUES
(119950  ,'2013-03-27 07:56:05',27.25),
(119951  ,'2013-03-27 07:57:05', 27.50),
(119952  ,'2013-03-27 07:58:05', 27.60),
(119953  ,'2013-03-27 07:59:05', 27.80),
(119954  ,'2013-03-27 08:00:05', 27.70),
(119955  ,'2013-03-27 08:01:05', 27.50),
(119956  ,'2013-03-27 08:02:05', 27.25),
(119957  ,'2013-03-27 08:03:05', 27.10),
(119958  ,'2013-03-27 08:04:05', 26.9),
(119959  ,'2013-03-27 08:05:05', 27.1),
(119960  ,'2013-03-27 08:06:05', 27.25),
(119961  ,'2013-03-27 08:07:05', 27.6);

SELECT x.*
     , x.temperature - y.temperature diff
     , COUNT(*) cnt
     ,(x.temperature-y.temperature)/COUNT(*) trend 
  FROM temperature_log x 
  JOIN temperature_log y 
    ON y.id < x.id 
 GROUP 
    BY x.id;
+--------+---------------------+-------------+-------+-----+-----------+
| ID     | dt                  | temperature | diff  | cnt | trend     |
+--------+---------------------+-------------+-------+-----+-----------+
| 119951 | 2013-03-27 07:57:05 |       27.50 |  0.25 |   1 |  0.250000 |
| 119952 | 2013-03-27 07:58:05 |       27.60 |  0.35 |   2 |  0.175000 |
| 119953 | 2013-03-27 07:59:05 |       27.80 |  0.55 |   3 |  0.183333 |
| 119954 | 2013-03-27 08:00:05 |       27.70 |  0.45 |   4 |  0.112500 |
| 119955 | 2013-03-27 08:01:05 |       27.50 |  0.25 |   5 |  0.050000 |
| 119956 | 2013-03-27 08:02:05 |       27.25 |  0.00 |   6 |  0.000000 |
| 119957 | 2013-03-27 08:03:05 |       27.10 | -0.15 |   7 | -0.021429 |
| 119958 | 2013-03-27 08:04:05 |       26.90 | -0.35 |   8 | -0.043750 |
| 119959 | 2013-03-27 08:05:05 |       27.10 | -0.15 |   9 | -0.016667 |
| 119960 | 2013-03-27 08:06:05 |       27.25 |  0.00 |  10 |  0.000000 |
| 119961 | 2013-03-27 08:07:05 |       27.60 |  0.35 |  11 |  0.031818 |
+--------+---------------------+-------------+-------+-----+-----------+ 
```

顺便说一句，如果你对每小时获得平均结果感兴趣，你可以做这样的事情......

```
SELECT DATE_FORMAT(x.dt,'%Y-%m-%d %h:00:00')
     , AVG(x.temperature) avg_temp
  FROM temperature_log x 
 GROUP 
    BY DATE_FORMAT(x.dt,'%Y-%m-%d %h:00:00'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-17T09:12:54.070

我知道这个主题很老，但如果我可以与您分享我的经验。也许这对下一个人有用:)

我有一张非常大的桌子，上面有我所有设备的温度（100+），我所有的设备每 5 秒推动一次温度（一个设备有 6 个视野区域，我可以得到每个区域的温度）。

所以桌子很大。对我来说，之前的响应对于大量数据来说效率不高。看看我在做什么：

这是我的大表的架构：

```
CREATE TABLE `histozone` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `camera_id` INT(11) NULL DEFAULT NULL,
    `Date` DATE NOT NULL,
    `Time` TIME NOT NULL,
    `ZoneId` INT(11) NOT NULL,
    `AverageTemperature` INT(11) NOT NULL,
    `MinimumTemperature` INT(11) NOT NULL,
    `MaximumTemperature` INT(11) NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `IDX_19E8F664B47685CD` (`camera_id`),
    INDEX `datetime` (`camera_id`, `Date`, `Time`),
); 
```

如您所见，我对每一行都有`Date`and 。`Time`

1.  在我的 PHP 代码中使用 MEMORY 引擎为每个设备创建一个临时表。我将 tmp 表限制在一个持续时间（日期和时间）内。

```
DROP TEMPORARY TABLE IF EXISTS histoZoneMaxTempCamera{$cameraId};
CREATE TEMPORARY TABLE histoZoneMaxTempCamera{$cameraId} (
    `id` INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `originalid` INT(11) NOT NULL,
    `date` DATE NOT NULL,
    `time` TIME NOT NULL,
    `zoneid` INT(11) NOT NULL,
    `maximumtemperature` INT(11) NOT NULL,
    INDEX (`maximumtemperature`)
) ENGINE=MEMORY;
INSERT INTO histoZoneMaxTempCamera{$cameraId} (`originalid`, `date`, `time`, `zoneid`, `maximumtemperature`)
    SELECT
        h.id,
        h.Date,
        h.Time,
        h.ZoneId,
        h.MaximumTemperature
    FROM histozone h

    INNER JOIN (
        SELECT
            hz.camera_id,
            MAX(hz.MaximumTemperature) AS MaximumTemperature,
            hz.Date,
            hz.Time
        FROM histozone hz
        WHERE hz.camera_id = '{$cameraId}'
            AND hz.Date >= '{$date}'
            AND hz.Time >= '{$time}'
        GROUP BY hz.Date, hz.Time
    ) histozoneMaxTemp 
        ON  h.Date = histozoneMaxTemp.Date
        AND h.Time = histozoneMaxTemp.Time
        AND h.MaximumTemperature = histozoneMaxTemp.MaximumTemperature

    WHERE h.camera_id = histozoneMaxTemp.camera_id
    ORDER BY h.Date ASC, h.Time ASC; 
```

2.  最后一步是获取数据、趋势等……我，我只想要波动的温度点。在同一级别有很多点的图表并不有趣。

```
SELECT 
a.*
FROM (
    SELECT 
        x.id AS xid
        , x.Date AS `Date`
        , x.Time AS `Time`
        , x.maximumtemperature AS maximumtemperature
        , y.maximumtemperature AS previousmaximumtemperature
        , x.maximumtemperature - y.maximumtemperature diff
        ,(x.maximumtemperature-y.maximumtemperature)/MAX(x.id) trend 
    FROM histoZoneMaxTempCamera{$cameraId} x
    LEFT JOIN histoZoneMaxTempCamera{$cameraId} y
        ON y.id = (x.id - 1)
    GROUP BY x.id
) a
WHERE a.trend <> (
        SELECT b.trend
        FROM (
            SELECT 
                x.id AS xid
                ,(x.maximumtemperature-y.maximumtemperature)/MAX(x.id) trend 
            FROM histoZoneMaxTempCamera{$cameraId} x
            LEFT JOIN histoZoneMaxTempCamera{$cameraId} y
                ON y.id = (x.id - 1)
            GROUP BY x.id
        ) b
        WHERE b.xid = a.xid - 1
    ) OR a.xid = 1
; 
```

这非常有效，即使有一个非常大的起始表也非常快。

# database - Jquery flowplayer a href 需要点击两次？

> ID：15762588
> 
> 赞同：2
> 
> 时间：2013-04-02T11:09:53.317
> 
> 标签：database, jquery-mobile, flowplayer

我不知道如何正确解释这一点，但我会尽力而为。我曾在 jquery mobile 中使用 flowplayer（带有多页）。我有大约 20 个来自数据库的视频。

现在的问题是：当我开始播放视频时，我不希望所有视频都开始加载。我试图用 '' 标签制作 javascript 来开始正确的视频，但它需要两次点击才能开始视频。

这是我正在使用的链接（对不起，有些表格是芬兰语）[http://www.rakentaja.fi/test/mobv/3mobvid.asp](http://www.rakentaja.fi/test/mobv/3mobvid.asp)

不要费心去首页，因为我还没有完成那些网站。只需选择任何链接并观察会发生什么。

请使用谷歌浏览器，它是唯一有效的浏览器。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:23:14.420

避免使用内联 Javascript 函数，这样做。

```
$('a.ui-link').on('click', function() {
 aloitavid(61,'Valloxsuodpuhdvaihto');
}); 
```

由于每个环节都有不同的参数；您需要将它们添加到`<a>`链接属性中，然后将它们拉到您的函数中使用。

**更新**

您可以执行以下操作。将视频参数保存为属性`vlink`，然后读取参数并将它们传递给您的函数`aloitavid()`。[这里的例子。](http://jsfiddle.net/Palestinian/kL4KA/)

HTML

```
<a href="#" class="ui-link" vlink="60,Valloxyleistailmanvkoneenhuollosta">start video</a> 
```

代码

```
$('a.ui-link').on('click', function () {
 var vlink = $(this).attr('vlink').split(",");
 var value1 = vlink[0];
 var value2 = vlink[1];
 aloitavid(value1,value2)
}); 
```

这个结果

> 值1：60
> 
> value2: Valloxyleistailmanvkoneenhuollosta

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T07:04:13.353

尝试将链接放入硬编码

```
<a href="-previous page-"> Back </a> 
```

如果可能的话。

这不会很好，但它有效。

# php - 当我使用 php 重复从 mysql 检索的数据时，Javascript 仅适用于第一条记录？

> ID：15762589
> 
> 赞同：0
> 
> 时间：2013-04-02T11:09:54.173
> 
> 标签：php, javascript, html, mysql

我有一个让我发疯的小问题，我正在从 mysql 数据库中检索记录并显示这些记录，在每条记录下应该有一个倒计时 javascript 时钟，它从 mysql 中获取值它只适用于第一条记录和其他记录只有 text ，这里是 HTML ， PHP 和 JS ：

```
<a>
    <div>
    <? echo $row['Device Name']; ?>
    </div>
    <? $Remain = $row['Remaining Time']; ?>
    <font color="red" size="6"><span id="countdown"> <? echo $Remain; ?></span></font>
    <img src="img/stop.png" /> 
    </a>  

<script type="text/javascript">

    // Initialize clock countdowns by using the total seconds in the elements tag

   secs       =  parseInt(document.getElementById('countdowno').innerHTML,10);
   setTimeout("countdown('countdowno',"+secs+")", 1000);

    /**
     * Countdown function
     * Clock count downs to 0:00 then hides the element holding the clock
     * @param id Element ID of clock placeholder
     * @param timer Total seconds to display clock
     */
    function countdown(id, timer){
        timer--;
        minRemain  = Math.floor(timer / 60);
        secsRemain = new String(timer - (minRemain * 60));
        // Pad the string with leading 0 if less than 2 chars long
        if (secsRemain.length < 2) {
            secsRemain = '0' + secsRemain;
        }

        // String format the remaining time
        clock      = minRemain + ":" + secsRemain;
        document.getElementById(id).innerHTML = clock;
        if ( timer > 0 ) {
            // Time still remains, call this function again in 1 sec
            setTimeout("countdown('" + id + "'," + timer + ")", 1000);
        } else {
            // Time is out! Hide the countdown
            document.getElementById(id).style.display = 'none';
        }

    }
</script> 
```

请帮助我能够使 js 计数器为每条记录工作谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:13:05.677

HTML 元素的 id 应该是唯一的，如果您想通过一个名称选择所有想要的元素，则可以使用 class 代替。

```
<span id="countdown"> 
```

您可以添加类：

```
<span class="countdown"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:18:18.023

问题是您将 id`countdown`用于多个跨度，但每个人都必须有另一个唯一的 id，因此您可以指向每个。

```
<?php $id = uniqid(); /* create unique id for each row */ ?>
<a>
    <div>
    <? echo $row['Device Name']; ?>
    </div>
    <? $Remain = $row['Remaining Time']; ?>
    <font color="red" size="6"><span id="countdown_<?php echo $id; ?>"> <? echo $Remain; ?></span></font>
    <img src="img/stop.png" /> 
    </a>  

<script type="text/javascript">

    // Initialize clock countdowns by using the total seconds in the elements tag

   secs       =  parseInt(document.getElementById('countdown_<?php echo $id; ?>').innerHTML,10);
   setTimeout("countdown('countdown_<?php echo $id; ?>',"+secs+")", 1000);

    /**
     * Countdown function
     * Clock count downs to 0:00 then hides the element holding the clock
     * @param id Element ID of clock placeholder
     * @param timer Total seconds to display clock
     */
    function countdown(id, timer){
        timer--;
        minRemain  = Math.floor(timer / 60);
        secsRemain = new String(timer - (minRemain * 60));
        // Pad the string with leading 0 if less than 2 chars long
        if (secsRemain.length < 2) {
            secsRemain = '0' + secsRemain;
        }

        // String format the remaining time
        clock      = minRemain + ":" + secsRemain;
        document.getElementById(id).innerHTML = clock;
        if ( timer > 0 ) {
            // Time still remains, call this function again in 1 sec
            setTimeout("countdown('" + id + "'," + timer + ")", 1000);
        } else {
            // Time is out! Hide the countdown
            document.getElementById(id).style.display = 'none';
        }

    }
</script> 
```

`countdown()`此外，如果您在循环之外定义一次而不是在每一行中定义一次，那会更好

# javascript - 无法在 jQuery 中收听全局事件

> ID：15762590
> 
> 赞同：15
> 
> 时间：2013-04-02T11:09:58.240
> 
> 标签：javascript, jquery

[关于 stackoverflow 的另一个问题](https://stackoverflow.com/questions/6860146/jquery-event-triggering-on-all-listeners "关于stackoverflow的另一个问题")指出，应该可以使用以下方式触发所有列表对象上的事件：

```
$.event.trigger('customEvent'); 
```

但是，这似乎对我不起作用，例如：

```
$('body').bind('customEvent', function(){ alert('Working!'); }); 
```

我是在做完全错误的事情，还是这个强大的功能被禁用了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:25:58.713

看起来该功能已被删除。浏览标签，我设法[在 v1.8b1 中找到了这个 TODO](https://github.com/jquery/jquery/blob/1.8b1/src/event.js#L263)：

> // TODO: 停止嘲弄数据缓存；删除全局事件并始终附加到文档

[从v1.9.0 开始](https://github.com/jquery/jquery/blob/1.9.0/src/event.js)，它已被删除。

没有什么可以阻止您根据[此处的旧源代码 (v1.6.2)](https://github.com/jquery/jquery/blob/1.6.2/src/event.js#L322-335)来实现它，但看起来它正在做一些顽皮的事情，`jQuery.cache`所以最好不要它或想出另一个解决方案。

```
$('*').trigger('customEvent'); 
```

也许？( [jsFiddle](http://jsfiddle.net/Tyriar/5hEgy/) )

或者一种更有效的方法来跟踪每个订阅并调用`.trigger()`它。

[jsFiddle](http://jsfiddle.net/Tyriar/gshsu/)

```
var customSubs;

$.fn.subscribeCustom = function (fn) {
    this.on('customEvent', fn);
    if (!customSubs)
        customSubs = this;
    else
        customSubs = customSubs.add(this);
};

$('span').subscribeCustom(function () {
    alert('span!');
});
$('div').subscribeCustom(function () {
    alert('div!');
});

customSubs.trigger('customEvent'); 
```

# c - C，不同的 GCC，fflush() 不工作？

> ID：15762591
> 
> 赞同：0
> 
> 时间：2013-04-02T11:09:59.673
> 
> 标签：c, gcc, stdin, fflush

我是一个初学者程序员。我有一个不允许输入浮点数或字符的函数。它在 gcc 3.4.2 上运行良好，但现在我更新到 4.7.1 并且无法正常运行。它现在仅适用于第一个输入 a[0]。如果我输入让我们说'x'，它会显示“错误输入”，但是如果我输入例如'1' for a[0]，然后输入'x' for a[1]，它仍然会说 Input OK and将“1”分配给 a[1]；我怎样才能解决这个问题？谢谢！

```
void initArray(unsigned int a[]) {

double q;
int x, c;

for ( x = 0; x < SIZE; x++){
    printf("a[%d] ", x);
    printf("Enter number: ");

    scanf("%lf", &q);

    if (q == (unsigned int) q) {
        printf("Input OK.\n");
        a[x] = q;
        fflush(stdin);
    }
    else {
        printf("Wrong Input\n");
        fflush(stdin);
        x--;
    }
}
printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:15:54.097

您应该检查`scanf`. 它返回它设法“扫描”的项目数，如果它未能扫描任何内容，则它将为零，例如当您输入时`'x'`：

```
if (scanf("%lf", &q) == 1)
{
    printf("Input OK.\n");
    a[x] = q;
}
else
{
    printf("Wrong Input\n");
    x--;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:22:27.070

我建议你更换

```
scanf("%lf", &q); 
```

和

```
while ((c=(scanf(" %lf%c", &q, &tmp) !=2 || !isspace(tmp)))
       || (q != (unsigned int) q)) {
    printf("Your input is invalid please enter again: ");
    if(c) scanf("%*[^\n]");
} 
```

清理您的标准输入，因此您的代码`scanf("%*[^\n]");`不再需要`fflush(stdin)`

所以你的代码可能是：

```
void initArray(unsigned int a[]) {

double q;
int x, c=0;
char tmp;

for ( x = 0; x < SIZE; x++){
    printf("a[%d] ", x);
    printf("Enter number: ");

    while ( (c=(scanf(" %lf%c", &q, &tmp) !=2 || !isspace(tmp)))
               || (q != (unsigned int) q)) {
       printf("Your input is invalid please enter again: ");
       if(c) scanf("%*[^\n]");
    }

    a[x] = q;
}
printf("\n");
} 
```

# android - 默认警报对话框按钮的高度和宽度

> ID：15762593
> 
> 赞同：3
> 
> 时间：2013-04-02T11:10:06.910
> 
> 标签：android, android-layout, android-framework

有什么方法可以改变android框架中的默认警报对话框按钮（取消和保存）的高度和宽度。

我的意思是在路上的某个地方

框架/基础/核心/资源/资源

我不是在寻找自定义警报对话框。我只需要减少标准警报对话框按钮的宽度......有什么办法吗？？..从 2 天开始拉我的头发:(

我尝试修改 frameworks/base/core/res/res/layout/alert_dialog.xml
但我所做的更改不起作用

下面是 alert_dialog.xml 文件代码

```
<com.android.internal.widget.WeightedLinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parentPanel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="9dip"
    android:paddingBottom="3dip"
    android:paddingLeft="3dip"
    android:paddingRight="1dip"
    android:majorWeight="0.65"
    android:minorWeight="0.9">

    <LinearLayout android:id="@+id/topPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="54dip"
        android:orientation="vertical">
        <LinearLayout android:id="@+id/title_template"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center_vertical"
            android:layout_marginTop="6dip"
            android:layout_marginBottom="9dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip">
            <ImageView android:id="@+id/icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:paddingTop="6dip"
                android:paddingRight="10dip"
                android:src="@drawable/ic_dialog_info" />
            <com.android.internal.widget.DialogTitle android:id="@+id/alertTitle"
                style="?android:attr/textAppearanceLarge"
                android:singleLine="true"
                android:ellipsize="end"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
        </LinearLayout>
        <ImageView android:id="@+id/titleDivider"
            android:layout_width="match_parent"
            android:layout_height="1dip"
            android:visibility="gone"
            android:scaleType="fitXY"
            android:gravity="fill_horizontal"
            android:src="@android:drawable/divider_horizontal_dark" />
        <!-- If the client uses a customTitle, it will be added here. -->
    </LinearLayout>

    <LinearLayout android:id="@+id/contentPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical">
        <ScrollView android:id="@+id/scrollView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingTop="2dip"
            android:paddingBottom="12dip"
            android:paddingLeft="14dip"
            android:paddingRight="10dip"
            android:overScrollMode="ifContentScrolls">
            <TextView android:id="@+id/message"
                style="?android:attr/textAppearanceMedium"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="5dip" />
        </ScrollView>
    </LinearLayout>

    <FrameLayout android:id="@+id/customPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1">
        <FrameLayout android:id="@+android:id/custom"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingTop="5dip"
            android:paddingBottom="5dip" />
    </FrameLayout>

    <LinearLayout android:id="@+id/buttonPanel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="4dip"
        android:orientation="vertical" >
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:paddingTop="4dip"
            android:paddingLeft="2dip"
            android:paddingRight="2dip"
            android:useLargestChild="true">
            <LinearLayout android:id="@+id/leftSpacer"
                android:layout_weight="0.25"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:visibility="gone" />
            <Button android:id="@+id/button1"
                android:layout_width="0dip"
                android:layout_gravity="left"
                android:layout_weight="1"
                android:maxLines="2"
                android:layout_height="wrap_content" />
            <Button android:id="@+id/button3"
                android:layout_width="0dip"
                android:layout_gravity="center_horizontal"
                android:layout_weight="1"
                android:maxLines="2"
                android:layout_height="wrap_content" />
            <Button android:id="@+id/button2"
                android:layout_width="0dip"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:maxLines="2"
                android:layout_height="wrap_content" />
            <LinearLayout android:id="@+id/rightSpacer"
                android:layout_width="0dip"
                android:layout_weight="0.25"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:visibility="gone" />
        </LinearLayout>
     </LinearLayout>
</com.android.internal.widget.WeightedLinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-29T02:46:20.433

无需创建自定义布局，试试这个：

创建 res/values/dimens.xml：

`<resources>`

```
<dimen name="alertdialog_button_width">150dp</dimen>
<dimen name="alertdialog_button_height">150dp</dimen> 
```

`</resources>`

然后添加这个代码片段：

```
private void setButtonSize(AlertDialog dialog) {
    Button button = dialog.getButton(AlertDialog.BUTTON_POSITIVE);
    int height = getResources().getDimensionPixelSize(R.dimen.alertdialog_button_height);
    int width  = getResources().getDimensionPixelSize(R.dimen.alertdialog_button_width);

    button.setHeight(height);
    button.setWidth(width);
} 
```

如果您使用的是 DialogFragment，则将其转换`getDialog()`为`AlertDialog`并将其传递给`setButtonSize`. 您可以另外指定第三个参数来传递按钮 ID（BUTTON_NEGATIVE、BUTTON_NEUTRAL 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:18:49.970

尝试像这样创建您自己的布局 xml 并传入您的对话框。

```
AlertDialog dialog = new AlertDialog.Builder(context);
    dialog.setContentView(R.layout.custom);//put this layout here
    dialog.setTitle("Title..."); 
```

阅读此 [http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

**更新：-**

```
<Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:onClick="showOk"
        android:text="Ok" 
        android:scaleX=".5"
        android:scaleY=".5"/> 
```

在我的应用程序中看到我正在这样做

```
 android:scaleX=".5"
        android:scaleY=".5" 
```

所以你可以像这样设置按钮大小..根据需要增加和减小大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:31:00.530

仅可以使用自定义对话框。因为我们不能默认对话框。在自定义对话框中，您必须设置警报对话框的大小和自定义大小。

# html - 不确定我的 HTML 是否仅限于使用 IE 条件的单个媒体文件请求

> ID：15762601
> 
> 赞同：2
> 
> 时间：2013-04-02T11:10:23.980
> 
> 标签：html, bandwidth

我的服务器上的带宽消耗非常高，我想知道以下标记是否会导致请求的信息多于必要的信息。是这种情况还是会按预期工作？

这是我的标记：

```
 <div id="video-container">
     <object class="video" height="100%" width="100%">
       <param name="movie" value="http://cutmeoffmidfunk.s3.amazonaws.com/bill.swf">
       <param name="scale" value="exactfit" />
       <param value="transparent" name="wmode">
       <![if !IE]>
         <object class="video" type="application/x-shockwave-flash" data="http://cutmeoffmidfunk.s3.amazonaws.com/bill.swf" height="100%" width="100%">
            <param value="transparent" name="wmode">
            <param name="scale" value="exactfit" />
         </object>
       <![endif]>
         <![if !IE]>
           <div class="video">
             <video class="video" height="100%" width="100%" autoplay loop >
               <source src="http://cutmeoffmidfunk.s3.amazonaws.com/bill.mp4" type="video/mp4">
                <source src="http://cutmeoffmidfunk.s3.amazonaws.com/bill.webm" type="video/webm">
               <source src="http://cutmeoffmidfunk.s3.amazonaws.com/bill.ogg" type="video/ogg">
             </video>                                
           </div>
         <![endif]-->
         <!--[if IE]>
           <div class="video" >
             <object class="video" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="100%" width="100%">
               <param name="src" value="http://cutmeoffmidfunk.s3.amazonaws.com/bill.mov">
               <param name="autoplay" value="true">
               <param name="type" value="video/quicktime" height="100%" width="100%">
             </object>
           </div>
         <![endif]-->
       <![if !IE]>
         </object>
       <![endif]>
     </object>
    </div>

<audio id="audioplayer" autoplay loop>
    <source src="http://cutmeoffmidfunk.s3.amazonaws.com/bill.mp3">
    <source src="http://cutmeoffmidfunk.s3.amazonaws.com/bill.ogg">
</audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:42:38.687

您发布的 HTML 似乎格式不正确，因为某些参数上缺少 />。非 ie 浏览器还有一个额外的标签，并且您的第一组和最后一组条件注释格式错误。我会修复这些，然后看看代码的作用。

正确形成后，您的代码和您不在 IE 中：

1.  您的代码将为外部对象加载 bill.swf 文件
2.  然后它也会使用下一个对象，这可能会也可能不会，这取决于您的缓存设置会导致 bill.swf 再次加载。
3.  然后它将开始加载源中的资产。浏览器可能决定下载所有三个文件，也可能不决定下载它需要的一个文件。

在 IE 中时：

1.  您的代码将为外部对象加载 bill.swf 文件
2.  然后它也会使用下一个对象，这可能会也可能不会，这取决于您的缓存设置会导致 bill.swf 再次加载。
3.  然后它将开始仅在第三个声明中加载资产。

一旦您修复了 HTML 并确保您请求的资产是必要的并且实现了您想要的结果，如果您仍然遇到高负载，您可能需要考虑使用 CloudFlair 之类的服务（我不推荐 CloudFlair，尽管它们在许多 cPanel 主机上免费），以便缓存文件并保持服务器本身的负载。您可能还想查看在服务内容上设置的 chache 标头，以查看是否可以将不经常更改的文件设置为长时间缓存，以便它们只需要在每个客户端上加载一次并减少服务器负载。

# custom-controls - 如何在 XPages 的自定义控件中使用 ExtraColumn 类型属性？

> ID：15762609
> 
> 赞同：0
> 
> 时间：2013-04-02T11:10:45.803
> 
> 标签：custom-controls, xpages, xpages-extlib

在“属性定义”部分定义自定义控件的属性时，可以在“属性”选项卡中选择“extraColumn”和“iconColumn”选项作为“类型”。

这种类型应该如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:15:54.390

iconColumn 和extraColumn 都与dataView 控件的相应标签相关。当您的自定义控件包含 dataView 并且您希望允许外部控件传递有关要在 dataView 中使用的列的详细信息时，您通常会使用这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:40:34.047

在标准 XPage 中使用数据视图时，extraColumns 显示为实际列。summaryColumn 是第一列并显示为链接。

但是，在移动应用程序中，额外的列在移动数据行中显示为额外的数据行。summaryColumn 值在数据行中显示为“标题”，而 extraColumn 值显示在该值下方。

```
<xe:dataView id="dataView1" pageName="#contactDetails" collapsibleDetail="true">
    <xe:this.data>
        <xp:dominoView var="view1" viewName="TeamDirectoryNameLU">
        </xp:dominoView>
    </xe:this.data>
    <xe:this.summaryColumn>
        <xe:viewSummaryColumn columnName="Name"></xe:viewSummaryColumn>
    </xe:this.summaryColumn>
    <xe:this.extraColumns>
        <xe:viewExtraColumn columnName="Office" style="font-size:12pt"></xe:viewExtraColumn>
        <xe:viewExtraColumn columnName="OfficePhone" style="font-size:12pt"></xe:viewExtraColumn>
        <xe:viewExtraColumn columnName="Email" style="font-size:12pt"></xe:viewExtraColumn>
    </xe:this.extraColumns>
</xe:dataView> 
```

其中一行可能显示为：

```
Ian Kennedy
London Office
44-22-830-6000
ian.kennedy@company.co.uk 
```

# javascript - JavaScript 构建 JSON 异步和动态

> ID：15762620
> 
> 赞同：0
> 
> 时间：2013-04-02T11:11:15.510
> 
> 标签：javascript, jquery, json, asynchronous

我在使用异步 JavaScript 时遇到了一些问题。我在 jQuery AJAX 调用中调用了一个函数，在这个函数中可能还有其他异步方法调用。我当时就卡在那里了。

这里我有 jQuery AJAX 函数调用的代码片段： 这里我动态构建一个 JSON 对象。

```
function getJSONObjektList() {
    //MainJSON
    var jsonObjekt = {};
    jsonObjekt.ObjektId = [];
    jsonObjekt.Selected = [];

    doc = XYZ.GetCurrentDocument();
    //probably also an asynchrounous call
    doc.GetAllObjects(function (objects) {
        for (var i = 0; i < objects.length; i++) {
            var obj = objects[i];
            var id = obj.id;
            var caption = obj.caption;
            var type = obj.type;
            var my = obj.my;
            console.log("[obj:" + obj + " id:" + id + " caption:" + caption + " type:" + type + " my: " + my + "]");

            //liste alle verfuegbaren  Objekte auf 
            jsonObjekt.ObjektId.push(id);

            if (type === "Statusbox") {
                doc.GetObject(id, function () {
                    var statusboxInhalt = this.Data.Rows;
                    //inner JSON object                        
                    var utilJSONObjekt;

                    for (var j = 0; j < statusboxInhalt.length; j++) {
                        // make sure to re-initialize so we don't update the same reference
                        utilJSONObjekt = {};
                        utilJSONObjekt.SelectedObjektId;
                        utilJSONObjekt.SelectedObjektWerte = [];

                        var inhalt = statusboxInhalt[j];
                        console.log("Name: " + inhalt[0].text + " Wert: " + inhalt[2].text);

                        utilJSONObjekt.SelectedObjektId = inhalt[0].text;

                        var valAr = inhalt[2].text.split(",");
                        for (var k = 0; k < valAr.length; k++) {
                            utilJSONObjekt.SelectedObjektWerte.push($.trim(valAr[k]));
                        }
                        jsonObjekt.Selected.push(utilJSONObjekt);
                        //**till here is the jsonObject not null or empty, there are some values in there**
                    }
                });
            }
        }
    });
    //**but on the return statment is the jsonObjekt empty**
    return jsonObjekt;
} 
```

有一些提示如何解决我的问题，或者如何使 JavaScript 以最佳方式异步工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:33:31.463

是的，只需使用回调模式：

```
function getJSONObjektList(callback) { // <--- note callback
   // asynchronous code starts here...
               for (var k = 0; k < valAr.length; k++) {
                   utilJSONObjekt.SelectedObjektWerte.push($.trim(valAr[k]));
               }
               jsonObjekt.Selected.push(utilJSONObjekt);
               callback(jsonObjekt);
   // ...and ends here
} 
```

在您的代码中，您可以像这样使用它：

```
getJSONObjektList(function(jsonObjekt) {
    console.log(jsonObjekt);
    // other code
}); 
```

**编辑**这是同一问题的两种解决方案的示例。一种带有回调模式，一种没有回调模式：

**没有回调**

```
var add = function(x,y) {
    return x+y;
};
var x = 1;
var sum = add(x, 1);
var sum2 = add(sum, 1);
console.log(sum2); 
```

**打回来**

```
var add = function(x,y,callback) {
    callback(x+y);
}
var x = 1;
add(x, 1, function(sum) {
    add(sum, 1, function(sum2) {
        console.log(sum2);
    });
}); 
```

显然回调模式比较混乱，但是如果你正在处理异步操作，那么你绝对需要它，例如：

```
var add = function(x, y, callback) {
    // add numbers after 2 seconds
    setTimeout(function() {
        callback(x+y);
    }, 2000);
}
add(1, 2, function(sum) {
    console.log(sum);
    // will produce 3 after 2 seconds
    // you can continue your code here
}); 
```

这个想法是传递一个函数，该函数将在异步操作完成后调用。

# php - 传入信号是否崩溃阻塞在 php 应用程序中的流上

> ID：15762625
> 
> 赞同：0
> 
> 时间：2013-04-02T11:11:32.223
> 
> 标签：php, stream, signals, pcntl

我在我的代码中使用了 pcntl 扩展，如下所示：我将处理程序绑定到某个信号，例如 SIGUSR1，并有一个向我的应用程序发送信号的脚本。

```
pcntl_signal(SIGUSR1, function ($signo){
 echo 'Signal:' . $signo . PHP_EOL; 
}); 
```

我有这样一个错误：

```
stream_get_contents(): Failure 'would block' (-9) 
```

我还有一个通过 ssh 执行远程命令的代码（功能的一部分）：

```
 $stream = ssh2_exec(
    $this->connection,
    $command,
    $options['pty'],
    $options['env'],
    $options['width'],
    $options['height'],
    $options['width_height_type']
  );
  if ($options['waitOut']) {
    stream_set_blocking($stream, true); 
```

如果在此处引发信号，则会出现以下错误：“Failure 'would block' (-9)”

```
 $output = stream_get_contents($stream);
  }
  fclose($stream);
  return $output; 
```

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:47:01.100

好吧，stream_get_contents 函数不能正常使用 unix 信号。我使用下一个代码而不是“stream_get_contents”

```
 $finisher = "SSH_FINISHED_COMMAND";
  $command .= " && echo \"{$finisher}\"";
  $command  = str_replace(' &&' , ' 2>&1 &&', $command);
  $stream = ssh2_exec(
      $this->connection,
      $command,
      $options['pty'],
      $options['env'],
      $options['width'],
      $options['height'],
      $options['width_height_type']
  );
  stream_set_blocking($stream, true);
  $block = false;
  $isFinished = false;
  while (! feof($stream) && ! $isFinished){
       $block = fread($stream, 256);
       $output .= $block;
       $isFinished = substr($output , -strlen($finisher)-2) == $finisher . '\n';           
  }
  $output = str_replace($finisher . "\n", '', $output);
  fclose($stream);
  return $output; 
```

# java - 如何在 UML 类图上表示通过 JNI 调用的类

> ID：15762627
> 
> 赞同：3
> 
> 时间：2013-04-02T11:11:41.363
> 
> 标签：java, android, class, opencv, diagram

目前我正在完成我的 Android 项目，该项目使用 OpenCV 和 Tesseract 实时检测数字。我创建了一个包含所有 Java 类的类图，但问题是我不知道如何添加一个用 C++ 编写的类（通过 JNI 调用）。我认为显示从 Java 端发生的对这个 C++ 类的调用很重要，但我不知道关联应该是什么样子，因为我从未见过由 Java 类以外的任何东西组成的类图。

任何指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T07:37:29.150

我会将其定义为具有刻板印象的接口，例如 <<native>>

有关构造型的简要描述，请参见[UML 构造](http://publib.boulder.ibm.com/infocenter/rsahelp/v7r0m0/index.jsp?topic=/com.ibm.xtools.modeler.doc/topics/cstereotyp.html)型。

# android - 带有下拉选项的android自定义微调器显示在微调器下方

> ID：15762628
> 
> 赞同：1
> 
> 时间：2013-04-02T11:11:42.047
> 
> 标签：android, spinner, android-spinner

我想创建一个自定义微调器，下拉选项将显示在微调器本身下方，就像 webservice 中的下拉列表框一样。但我只能更改微调器的颜色和文本颜色，无法实现。有没有可能实现这一点，因为现在选项显示在屏幕中间，看起来不太好。

```
My android version is 2.3.7 
```

请帮我解决这个问题。

提前致谢。

# mysql - 如何使用codeigniter在多个表中搜索？

> ID：15762630
> 
> 赞同：0
> 
> 时间：2013-04-02T11:11:48.773
> 
> 标签：mysql, codeigniter, search, multiple-tables

所以我有一个搜索框可以在我的工厂表中搜索。它就像一个魅力，但我对codeigniter还是新手。

**我是否需要使用 select 在我的数据库中选择多个表？**

我的控制器功能：

```
 function search()
    {
        $this->load->view('views/header');
        $this->load->view('views/search');
        $this->load->view('views/footer');
    }

    function searchresults()
    {
        $match = $this->input->post('search');
        $data['query'] = $this->bedrijven_model->get_search($match);
        $this->load->view('views/header');
        $this->load->view('views/searchresults', $data);
        $this->load->view('views/footer');
    } 
```

我的模型：

```
function get_search($match)
{
    $this->db->like('Bedrijfsnaam', $match);
    $this->db->or_like('Postcode', $match);
    $this->db->or_like('Plaats', $match);
    $this->db->or_like('Telefoonnummer', $match);
    $this->db->or_like('Email', $match);
    $this->db->or_like('Website', $match);
    $this->db->or_like('Profiel', $match);
    $this->db->or_like('Adres', $match);
    $query = $this->db->get('bedrijven');

    return $query->result();
} 
```

**我还想知道您是否可以将模型中的搜索功能放入控制器中。因为那时我需要为每个表创建一个新的模型函数。**

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:16:06.187

尝试加入两个表，然后像这样应用

```
$this->db->like('Bedrijfsnaam', $match);
$this->db->or_like('Postcode', $match);
$this->db->or_like('Plaats', $match);
$this->db->or_like('Telefoonnummer', $match);
$this->db->or_like('Email', $match);
$this->db->or_like('Website', $match);
$this->db->or_like('Profiel', $match);
$this->db->or_like('Adres', $match); 
```

**在 col1,col2 中的 table2 中搜索匹配项**

```
$this->db->or_like('table2.col1',$match);
$this->db->or_like('table2.col2',$match); 
```

**最后将上面应用了喜欢的表与表1连接起来**

```
$this->db->join('table2','table1.id = table2.id');
$query = $this->db->get('bedrijven'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:17:30.383

用户指南中的示例应说明这一点：

```
$this->db->select('*'); // <-- There is never any reason to write this line!
$this->db->from('blogs');
$this->db->join('comments', 'comments.id = blogs.id');

$query = $this->db->get();

// Produces:
// SELECT * FROM blogs
// JOIN comments ON comments.id = blogs.id 
```

查看用户指南中[Active Record页面下的全部内容。](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# c - C 中的 Apple 无损 (ALAC) 编码器库，而不是 C++

> ID：15762631
> 
> 赞同：2
> 
> 时间：2013-04-02T11:11:48.893
> 
> 标签：c, shared-libraries, codec

我有一个用 C 编写的小型音频项目，我想在其中将流式 PCM 转换为 ALAC。

我知道有一个非常大的库“FFmpeg”，其中包含这种编码的方法，但 FFmeg 对于我的项目来说太大了。

Apple还[提供原始的 ALAC 编码器](http://alac.macosforge.org/)，但它只有一个用 C++ 编写的接口。

有人知道用 C 编写的小型独立 ALAC 编码器的地址吗？它可以是一个共享库或只是一些 C 文件。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:56:05.707

[您可以使用 LLVM 将 C++ 代码转换为 C](http://llvm.org/releases/3.1/docs/FAQ.html#translatecxx)并[阅读一些常见问题解答](http://www.parashift.com/c++-faq/mixing-c-and-cpp.html)，这总是一件好事。

# ios - 如何在 ios 中使用 asl 在日志文件中搜索另一个 PID

> ID：15762633
> 
> 赞同：1
> 
> 时间：2013-04-02T11:11:56.703
> 
> 标签：ios, objective-c

我有这个方法：

```
q = asl_new(ASL_TYPE_QUERY);
asl_set_query(q, ASL_KEY_SENDER, "MyApp", ASL_QUERY_OP_EQUAL);

// Count the number of results
r = asl_search(NULL, q);
while (NULL != (m = aslresponse_next(r))) {
    counter++;
}

r = asl_search(NULL, q);
while (line++ < counter && NULL != (m = aslresponse_next(r)))
{
    // Take only the latest results
    if (!(line < counter-NUMBER_OF_LOG_MESSAGES)) {
        log = [NSMutableDictionary dictionary];
        for (i = 0; (NULL != (key = asl_key(m, i))); i++)
        {
            keyString = [NSString stringWithUTF8String:(char *)key];

            if ([self.logKeyFilter containsObject:keyString]) {
                val = asl_get(m, key);

                string = [NSString stringWithUTF8String:val];
                [log setObject:string forKey:keyString];
            }
        }

        date = [dateFormat stringFromDate:[NSDate dateWithTimeIntervalSince1970:[[log objectForKey:@"Time"] doubleValue]]];
        [logs addObject:[NSString stringWithFormat:@"%@ %@ %@", date, [self.logLevelKeyFilter objectForKey:[log objectForKey:@"Level"]], [log objectForKey:@"Message"]]];
    }
}
aslresponse_free(r);
return logs; 
```

返回“MyApp”的最新日志。NUMBER_OF_LOG_MESSAGES 仅用于获取最新日志。

问题是当我使用 PID X 的 MyApp 崩溃并且我重新启动 MyApp 以捕获日志时，我只有新 PID Y 的日志。

那么，我如何在每个日志文件中搜索以找到 MyApp 的日志。

谢谢你。

# ldap - Websphere Portal 8 登录服务检查现有密码是否正确

> ID：15762636
> 
> 赞同：0
> 
> 时间：2013-04-02T11:12:19.153
> 
> 标签：ldap, portlet, websphere-portal, puma

我有一个用于更改登录用户密码的 portlet。用户必须输入当前密码和两次新密码。它调用 LoginService.checkPassword(String userId, char[] password) 来确定现有密码是否正确。如果此方法返回 true，则通过 Puma Profile 获取当前用户并使用 PumaController.setAttributes(User user, Map attributes) 调用设置更新后的属性来更新密码。然后通过 PumaProfile.reload 方法重新加载 puma 配置文件（我也尝试过使用 PumaController.reload() 方法。

我面临的问题是 LoginService.checkPassword(String userId, char[] password) 为当前密码和旧密码返回 true，而不仅仅是当前密码。有谁知道为什么会这样？

在 ldap 中，密码字段是单个属性字段，在 wimdomain.xml 中也是如此，如果我注销并尝试登录，我只能使用当前密码登录（如您所料）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T11:29:53.477

发现这是门户网站的一个错误。即使您使用开箱即用的配置文件编辑 portlet，您也会遇到同样的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T07:18:24.987

验证 Websphere Portal 用户密码 验证用户密码的方法有两种 -

1）使用“用户注册表”

```
public static boolean checkUserAuthenticatedLDAP(String userId, String password) {
    try {
        Context ctx = new InitialContext();
        com.ibm.websphere.security.UserRegistry reg =
            (com.ibm.websphere.security.UserRegistry) ctx.lookup("UserRegistry");

        String res = reg.checkPassword(userId, password);

        return res != null;
    } catch (Exception ex) {
        return false;
    }
} 
```

2）使用“登录上下文”

```
/**
 * This method validates the user based on the user id and password
 * attributes, If the user id or password is not valid then throws Exception.
 *
 * @param userId
 * @param password
 * @return boolean
 * @throws Exception
 */
public boolean checkUserAuthenticated(String userId, String password) throws Exception {
    javax.security.auth.login.LoginContext loginContext = null;

    Subject subject = null;

    try {
        loginContext = new javax.security.auth.login.LoginContext("WSLogin",
            new com.ibm.websphere.security.auth.callback.WSCallbackHandlerImpl(userId, password));
    } catch (javax.security.auth.login.LoginException e) {
        throw new Exception("Cannot create LoginContext", e);
    }

    try {
        loginContext.login();

        subject = loginContext.getSubject();
    } catch (com.ibm.websphere.security.auth.WSLoginFailedException e) {
        throw new Exception("Password is incorrect", e);
    } catch (Exception e) {
        throw new Exception("Unknown username", e);
    }

    if (subject == null)
        throw new Exception("Password is incorrect");

    return true;
} 
```

# c# - GetManifestResourceStream 方法，参数是什么？

> ID：15762637
> 
> 赞同：1
> 
> 时间：2013-04-02T11:12:21.310
> 
> 标签：c#, windows-phone-8, xna-4.0

我有组装课。

我应该传递什么参数`assembly.GetManifestResourceStream(?)`？

它说，应该有字符串。但是哪一个？

* * *

我有这样的代码：

```
private string returnStringFile(string resName)
    {
        var assembly = Assembly.GetExecutingAssembly();
        var strResources = assembly.GetName().Name + resName;
        var rStream = assembly.GetManifestResourceStream(strResources);

        var streamReader = new StreamReader(rStream);

        return streamReader.ReadToEnd();
    } 
```

在行`var streamReader...`我有例外：

> 'System.ArgumentNullException'

我应该将什么传递给`GetManifestResourceStream`方法？

我正在尝试从我的项目中读取文本文件，并将其作为字符串返回。

# javascript - 无法在 javascript 函数中传递字符串值

> ID：15762639
> 
> 赞同：0
> 
> 时间：2013-04-02T11:12:24.583
> 
> 标签：javascript, fusioncharts

```
for(int i = 0; i < ob.length; i++) {
  logger.logDebug(this.getClass(),"ob value check- "+ob[i].toString());
  String val=ob[i].toString();
  strXML1.append("<graph caption='City Wise Total Properties' xAxisName='City' yAxisName='Count' decimalPrecision='0' formatNumberScale='0'>")
         .append("<set name='")
         .append(ob[i].toString())
         .append("'  value='" + ob1[i].toString())
         .append( "'color='A186BE' link='javascript:drillDownReport1(2,"+val+")' />")
         .append("</graph>");
  } 
```

我没有得到`val`使用以下 JavaScript 函数的价值：

```
function drillDownReport1(reportnumber,val) {
    alert("val"+val);
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:20:28.320

这是因为生成的 javascript 是 if `val`= "toto"

```
javascript:drillDownReport1(2,toto)' />") 
```

并不是

```
javascript:drillDownReport1(2,"toto")' />") 
```

所以你需要用引号来转义你的字符串。像那样：

```
.append( "'color='A186BE' link='javascript:drillDownReport1(2,\""+val+"')' />") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:19:10.520

利用

```
var val=ob[i].toString(); 
```

代替

```
String val=ob[i].toString(); 
```

?

因为，你知道，这是 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:19:28.367

你的问题是你把价值`val`放在你的函数中的方式

因为`val`是一个字符串，所以你需要把它放在引号中。

```
strXML1.append("<graph caption='City Wise Total Properties' xAxisName='City' yAxisName='Count' decimalPrecision='0' formatNumberScale='0'>")
        .append("<set name='")
        .append(ob[i].toString())
        .append("'  value='" + ob1[i].toString())
        .append( "'color='A186BE' link='javascript:drillDownReport1(2,\""+val+"\")' />")
        .append("</graph>"); 
```

# c# - CSV 的写入/解析库，列数未知

> ID：15762642
> 
> 赞同：1
> 
> 时间：2013-04-02T11:12:29.030
> 
> 标签：c#, parsing, csv, filehelpers

我正在尝试遵循每个人的建议，并使用一个库来满足我的 CSV 编写/解析需求。但最推荐的`FileHelpers`，需要一个列映射类。但是，我只需要读取写入单行逗号分隔值，然后再将它们解析回来。我找不到以这种简单方式使用 FileHelpers 或其他库的方法。

例如，我将 a`String testInput = "\"yoyo\",\"yaya\",\"te\"\"st\"";`作为输入，并希望将其解析为`String[]`带有值`yoyo`, `yaya`,的 a `te"st`。

我也需要做相反的事情，像这样将值写回字符串`"yoyo","yaya","te"st"`。

有谁知道可以执行此操作的库或我如何使用例如 FileHelpers 来执行此操作？

由于 xml 字段中涉及大量“垃圾”字符（带宽/存储限制），我真的不想做 xml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:16:47.210

代码项目上的[CSV 阅读器](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)应该处理这个问题；只需关闭文件头并`new StringReader(line)`逐行使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:17:19.343

[`Microsoft.VisualBasic.FileIO.TextFieldParser`](http://msdn.microsoft.com/en-us/library/ms128079.aspx)应该能够完成这项工作，[`ReadFields`方法](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.readfields.aspx)定义为：

> > > 读取当前行上的所有字段，将它们作为字符串数组返回，并将光标前进到包含数据的下一行。

[我在这里](http://www.dotnetperls.com/textfieldparser)找到了很好的例子。

至于编写 CSV，我会使用在[stackoverflow](https://stackoverflow.com/a/4685745/1149736)上找到的不同方法。这似乎是不需要导入 3 ^(rd)方扩展的最简单方法。

# maven - 声纳分析的项目未显示

> ID：15762643
> 
> 赞同：1
> 
> 时间：2013-04-02T11:12:29.143
> 
> 标签：maven, sonarqube, build-server

我有一个 Sonar 服务器 (v3.5)，已配置、运行等。我还有一个用 Maven (3.0.3) 构建的项目，并用这个 Sonar 实例进行了分析。奇怪的是：“所有项目”视图显示“无数据”，但“批量删除”页面列出了项目。另外：项目 id 存储在数据库的项目表中。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:13:16.527

解决了。问题与用户授权有关：只有一个用户有权访问新创建的项目。将“任何人”特殊组分配给新创建的项目作为“用户”和“代码查看器”是一个有用的设置。

# jquery - 将 DIV 标记添加到 LI 标记时，JSP 选项卡不活动

> ID：15762648
> 
> 赞同：0
> 
> 时间：2013-04-02T11:12:39.613
> 
> 标签：jquery, html, jsp, html-lists

我在 JSP 中使用引导程序创建了选项卡。第一个选项卡包含一个选择标签，并根据所选值显示其他一些选项卡并隐藏一些选项卡。

这是我的代码

```
<div class="navbar btn-navbar">
        <div id="tabs" class="tabbable">
            <ul id="myTab" class="nav nav-tabs">
                <li class="active"><a href="#datacollector" target="main"
                    data-toggle="tab">Data Collector</a></li>
                    <div id="fromDB" class="selectDataloadType" style="display: none;">
                <li><a href="#fromDB" target="main"
                    data-toggle="tab">Data Load Database</a></li> </div>
                    <div id="fromFile" class="selectDataloadType" style="display: none;">
                <li><a href="#fromFile" target="main"
                    data-toggle="tab">Data Load File</a></li> </div>
                    <div id="email" class="selectDataloadType" style="display: none;">
                <li><a href="#email" target="main"
                    data-toggle="tab">Data Load Email</a></li> </div>
                    <div id="webServices" class="selectDataloadType" style="display: none;">
                <li><a href="#webServices" target="main"
                    data-toggle="tab">Data Load Web</a></li> </div>
                <li><a href="#datamap" target="main"
                    data-toggle="tab">Data Map</a></li>
                <li><a href="#schedule" target="main" data-toggle="tab">Schedule</a></li>
            </ul>
<br> <br> <br>
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade in active" id="datacollector">
                    <div class="container">
                        <div class="row">
                            <div class="span8">
                                <form name="selectType" action="selectType"
                                    onsubmit="return validateForm()" target="#fromDB" method="get">
                                    <fieldset>
                                        <label class="control-label" for="dataloadType">Data
                                            load Type:</label> <select id="dataloadType" name="dataloadType">
                                            <option>Choose Data load Type</option>
                                            <option value="fromDB">From Database</option>
                                            <option value="fromFile">From File</option>
                                            <option value="email">E-mail</option>
                                            <option value="webServices">Web Services</option>
                                        </select>
                                        <p>
                                            <button type="submit" class="btn btn-success">Submit</button>
                                        </p>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="fromDB">
                    <iframe src="GenericFileUpload.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="fromFile">
                    <iframe src="GenericDB.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="email">
                    <iframe src="EmailService.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="webServices">
                    <iframe src="WebService.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="datamap">
                    <iframe src="DataFieldMapping.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="schedule">
                    <iframe src="UploadConfiguration.jsp" width="1250" height="400"></iframe>
                </div>
            </div>
        </div>
    </div> 
```

我的脚本是

```
<script>
$(function() {    

    $('#dataloadType').change(function(){
    $('.selectDataloadType').hide();
    $('#' + $(this).val()).show();
    var value = $(this).val();
      $('#tabs').tabs('select',value);
    });
    });
</script> 
```

我这里有个问题。

在`<li>`标签 3 中使用的是 DIV 标签，因为这 3 个标签是根据 SELECT 值隐藏和显示的。脚本工作正常，它将仅显示基于所选值的选项卡。但真正的问题是，将显示的不是选项卡。**（使用 DIV 的 3 LI 标签未显示为标签）**它仅显示为链接，我无法打开该选项卡。我该怎么办？

它的显示是这样的

![在此处输入图像描述](https://i.stack.imgur.com/yxczv.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:14:26.417

我得到了它的答案。不要添加`DIV`。`LI`相反，将**id**和**类**添加到**LI**本身

```
<div class="navbar btn-navbar">
            <div id="tabs" class="tabbable">
                <ul id="myTab" class="nav nav-tabs">
                    <li class="active"><a href="#datacollector" target="main"
                        data-toggle="tab">Data Collector</a></li>
                    <li id="fromDB" class="selectDataloadType" style="display: none;"><a
                        href="#fromDatabase" target="main" data-toggle="tab">Data Load
                            Database</a></li>
                    <li id="fromFile" class="selectDataloadType" style="display: none;"><a
                        href="#fromFiles" target="main" data-toggle="tab">Data Load
                            File</a></li>
                    <li id="email" class="selectDataloadType" style="display: none;"><a
                        href="#fromEmail" target="main" data-toggle="tab">Data Load
                            Email</a></li>
                    <li id="webServices" class="selectDataloadType"
                        style="display: none;"><a href="#fromWebServices"
                        target="main" data-toggle="tab">Data Load Web</a></li>
                    <li><a href="#datamap" target="main" data-toggle="tab">Data
                            Map</a></li>
                    <li><a href="#schedule" target="main" data-toggle="tab">Schedule</a></li>
                </ul> 
```

# scala - 如何从子类型中的特征初始化值？

> ID：15762650
> 
> 赞同：7
> 
> 时间：2013-04-02T11:12:49.663
> 
> 标签：scala, traits

如果我写：

```
trait T {
  val t = 3
  val u = 1::t::Nil
}

class U extends T {
  override val t = 2
}

(new U).u 
```

它表明了这一点。

```
List(1, 0) 
```

我应该如何更改上面的代码以使其显示以下内容：

```
List(1, 2) 
```

即在特征中设置for`override val t`的值？`t``u``T`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T11:38:34.280

一种方法是`u`使用`def`or来延迟评估，`lazy val`如下所示：

```
trait T {
  def t = 3
  def u = 1::t::Nil
}

class U extends T {
  override def t = 2
}

(new U).u 
```

或者

```
trait T {
  val t = 3
  lazy val u = 1::t::Nil
}

class U extends T {
  override val t = 2
}

(new U).u 
```

区别如下：

*   `val`在初始化期间使表达式求值
*   `def`每次`u`使用时都对表达式求值
*   `lazy val`使其在首次`u`使用时进行评估并缓存结果

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T11:44:47.773

尝试使用早期初始化程序：

```
scala> trait T {
     |   val t = 3
     |   val u = 1::t::Nil
     | }
defined trait T

scala> class U extends {
     | override val t = 2;
     | } with T
defined class U

scala> (new U).u
res1: List[Int] = List(1, 2) 
```

有关早期初始化的更多信息，请参见[此处](https://stackoverflow.com/questions/4712468/in-scala-what-is-an-early-initializer)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T13:13:10.317

所有 scala 声明式风格都只是一种错觉。Scala 是建立在 jvm 之上的，并且像 java 一样工作。

Evetything 是一个类，应该独立于它的使用（java 不是 c++ 并且支持增量构建，它的优点和缺点）。每个 trait 都有自己的初始化代码，multi-trait 类一个接一个地运行各自的初始化代码。如果您使用一些仅在子类中声明的 AnyRef，则其值将在初始化期间设置为 null。

我用指定的约定规则来保护自己：每个 val 都应该是 final 或惰性的（[为什么在非 final 类中使用普通 val](https://stackoverflow.com/questions/12091689/why-using-plain-val-in-non-final-classes)）。所以我不关心初始化顺序，可能会进一步假装我正在使用声明性语言。

我也在使用选项`-Xcheckinit`：向字段访问器添加运行时检查。

# java - Youtube 搜索查询总是返回相同的视频列表

> ID：15762656
> 
> 赞同：0
> 
> 时间：2013-04-02T11:13:04.507
> 
> 标签：java, android, video, youtube

我正在开发一个可以播放 Youtube 视频的应用程序。我的需要是，当用户键入任何关键字时，需要显示该关键字的相关视频。然而，目前无论键入什么关键字，执行时似乎都只包含有关“android”的视频。如果有人知道如何解决这个问题，我将不胜感激。下面是我的代码：

```
public void searchData(View v) {
    ev = (EditText) findViewById(R.id.editText1);
    if (v.getId() == R.id.button1) {
        String appPackageName = getPackageName();
        Intent intent = new Intent(Intent.ACTION_SEARCH);
        intent.setPackage("com.google.android.youtube");
        intent.putExtra("query", "Android");
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:16:32.830

它正在按预期进行。因为您将查询设置为：

```
intent.putExtra("query","Android"); 
```

它只显示与android相关的东西。

尝试将用户输入的值放在那里：

```
intent.putExtra("query",ev.getText()); 
```

**更新 ：**

在 OP 验证以下行工作正常后：

```
intent.putExtra("query",ev.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:16:18.050

```
intent.putExtra("query","Android");

```

您已将查询字符串硬编码到 Android

# css - 在一个菜单上均匀分布多个不同宽度的项目

> ID：15762661
> 
> 赞同：0
> 
> 时间：2013-04-02T11:13:13.993
> 
> 标签：css, menu

我一直试图找到一个常见问题的解决方案，但由于我的代码中的一些 CSS 规则，我无法使用我找到的任何解决方案。我有一个水平菜单 (a `<ul> <li> <a>`)，其中包含不同的项目、不同的宽度，我无法在菜单内分配项目，因此它们之间的空间相同。这是代码：

```
<nav id="main-menu">
     <ul class="child-menu">
         <li class="menu-1"><a>outsourcing tecnologico</a></li>
         <li class="menu-2"><a>seleccion de personal</a></li>
         <li class="menu-3"><a>solucion integral de nuevos profesionales</a></li>
         <li class="menu-4"><a>consultoria</a></li>
         <li class="menu-5"><a>formacion especializada</a></li>
         <li class="menu-6"><a>I+D+I<a></li>
    </ul>
</nav> 
```

的CSS：

```
#main-menu {
    background-color:#000;
    position:relative;
    margin:10px 0 0 0;
    width:980px;
    height:28px;
    float:left;
}

#main-menu ul {
width:980px;
margin:0;
}

#main-menu ul li {
float: left;
font-size: 12px;
text-transform: uppercase;
font-weight: bold;
}

#main-menu ul li a {
display:block;
color:#fff;
text-decoration:none;
line-height:27px;
height:28px;
text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:37:21.367

如果不需要低于 9.0 版，那么以下内容将很有用：

1.  弹性盒子属性。
2.  2.`ul { display:table; } ul li { display:table-cell; text-align:center }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:25:42.903

不要在 li 上使用 float left 而是使用 display inline-block 和 *display: inline hack for IE with a zoom: 1; 然后，您可以向 li 添加边距以保持间距相同。在分配了宽度的父元素上使用 text-align center 将内容居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:14:57.637

**部分解决方案**

我有一个可能是一个好的开始的解决方案：

```
#main-menu {
    background-color:#000;
    margin:10px 0 0 0;
    padding: 0;
    width:1080px;
    height:28px;
    float: left;
    overflow: auto;
    text-align: center;
}
.child-menu  {
    margin: 0;
    padding: 0;
    display: inline;
}
.child-menu li {
    display: inline;
    list-style: none;
    margin: 0 5px;
    padding: 0;
    font-size: 12px;
    text-transform: uppercase;
    font-weight: bold;
}
.child-menu a {
    color:#fff;
    text-decoration:none;
} 
```

用小提琴：http: [//jsfiddle.net/audetwebdesign/Tp7wH/](http://jsfiddle.net/audetwebdesign/Tp7wH/)

**一些设计问题和问题**

如果你固定 的宽度`main-menu`，你会在最左边和最右边看到一些空间。

当我将宽度设置为 980 像素时，链接会换成第二行。你需要考虑一下。

我将`ul`and`li`元素显示为内联，但如果您希望菜单看起来更像按钮，也可以使用内联块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T07:02:58.367

我的解决方案是在菜单项之间添加额外的空 li 元素只是为了间距。如果事先知道水平菜单项的数量，则此解决方案效果很好。它还允许第一个项目接触包含元素的左边缘，最后一个项目接触右边缘。当窗口变小时，菜单项不会被包装或重新排列。

HTML：

```
<ul class="tabs">
    <li><a href="#">First Item</a></li><li class="space"></li>
    <li><a href="#">Second</a></li><li class="space"></li>
    <li><a href="#">Bah</a></li><li class="space"></li>
    <li><a href="#">Last one is long</a></li>
</ul> 
```

CSS：

```
.tabs{
    display:table;
    width:500px;
}
.tabs li{
    display:table-cell;
    white-space: nowrap;
}
.space {
    width: 33%; /* This should be 100 / (nr of elements - 1) */
} 
```

这是演示：http: [//jsfiddle.net/LqLE9/](http://jsfiddle.net/LqLE9/)

# windows-phone-7 - 隔离存储 - 延迟和错误的工作

> ID：15762671
> 
> 赞同：0
> 
> 时间：2013-04-02T11:13:43.460
> 
> 标签：windows-phone-7

我正在用 WP7 编写我的第一个应用程序，但我对 IS 有一个奇怪的问题：

```
 case "pn_s":            
                IsolatedStorageFile isoStorage = IsolatedStorageFile.GetUserStoreForApplication();
                //IsolatedStorageFileStream isoStream = isoStorage.CreateFile("plan_zajec_pn.txt"); 
                IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream(("plan_zajec_pn.txt"), FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.None, isoStorage);
                StreamWriter writer = new StreamWriter(isoStream);
                string dane="";
                for (int i = 0; i < 10; i++)
                {
                    dane += godzina[i].Text;
                    dane += ";";
                    dane += przedmiot[i].Text;
                    dane += ";";
                    dane += sala[i].Text;
                    dane += ";";
                }
                writer.WriteLine(dane);
                isoStream.Close();
                break; 
```

实际上它不起作用......我重新打开应用程序后创建文件但它是空的，我检查了“dane”并且它包含日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:50:18.577

使用 a`StreamWriter`时，不能关闭底层流，否则编写器可能没有足够的时间写入所有数据。只需关闭编写器，它就会负责关闭流。`using`此外，即使抛出错误，您也应该将流包含在语句中以关闭它们。

最后，您的代码应如下所示：

```
case "pn_s":            
    using (var isoStorage = IsolatedStorageFile.GetUserStoreForApplication())
    {
        using (var isoStream = new IsolatedStorageFileStream(("plan_zajec_pn.txt"), FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.None, isoStorage))
        {
            using (var writer = new StreamWriter(isoStream))
            {
                string dane = "";

                for (int i = 0; i < 10; i++)
                {
                    dane += godzina[i].Text;
                    dane += ";";
                    dane += przedmiot[i].Text;
                    dane += ";";
                    dane += sala[i].Text;
                    dane += ";";
                }

                writer.WriteLine(dane);
            }
        }
    }

    break; 
```

# javascript - Canvas 的 JavaScript 问题 - Chrome 中的正常 / Firefox 中的错误

> ID：15762672
> 
> 赞同：1
> 
> 时间：2013-04-02T11:13:48.377
> 
> 标签：javascript, html, google-chrome, firefox, canvas

得到了一些我用来在 HTML5 画布上制作免费绘图工具的代码。该代码在 Chrome 中运行良好，但在 Firefox 中，鼠标绘制到画布上的不同点。我试图研究偏移位置以查看Firefox是否有任何问题，但我没有发现任何问题。我已经粘贴了下面的代码；任何帮助/指针将不胜感激。

```
function ChangeFreeVal()
{
var ValChecker = document.getElementById("FreeDRAW").value;
if(ValChecker=='ON'){
    document.getElementById("FreeDRAW").value = 'OFF';
}
else{
    document.getElementById("FreeDRAW").value = 'ON';
}
 }
  if(window.addEventListener) {
   window.addEventListener('load', function () {
    var canvas, context, tool;

 function init () {
   canvas = document.getElementById('canvas');
    if (!canvas) {
    alert('Error: I cannot find the canvas element!');
    return;
    }
 if (!canvas.getContext) {
  alert('Error: no canvas.getContext!');
  return;
 }

context = canvas.getContext('2d');
if (!context) {
  alert('Error: failed to getContext!');
  return;
}
 tool = new tool_pencil();

canvas.addEventListener('mousedown', ev_canvas, false);
canvas.addEventListener('mousemove', ev_canvas, false);
canvas.addEventListener('mouseup',   ev_canvas, false);
}
function tool_pencil () {
var tool = this;
this.started = false;
this.mousedown = function (ev) {
var checker = document.getElementById('FreeDRAW').value;
    if(checker=='ON'){
    context.beginPath();
    context.moveTo(ev._x, ev._y);
    tool.started = true;
    document.getElementById('middle_centre_canvas').style.opacity = 1;
    }
   };
  this.mousemove = function (ev) {
    if (tool.started) {
    var checker = document.getElementById('FreeDRAW').value;
    if(checker=='ON'){
     context.lineTo(ev._x, ev._y);
    context.lineJoin = "round";
    var linewidthVAL = document.getElementById('FreeSize').value;
    if(linewidthVAL==1){
        context.lineWidth = 5;
    }
    else if(linewidthVAL==2){
        context.lineWidth = 10;
    }
    else if(linewidthVAL==3){
        context.lineWidth = 15;
    }
    else if(linewidthVAL==4){
        context.lineWidth = 22;
    }
    var linecolourVAL = document.getElementById('FreeColour').value;
    if(linecolourVAL==1){
        context.strokeStyle = 'blue';
    }
    else if(linecolourVAL==2){
        context.strokeStyle = 'green';
    }
    else if(linecolourVAL==3){
        context.strokeStyle = 'red';
    }
    else if(linecolourVAL==4){
        context.strokeStyle = 'purple';
    }
    else if(linecolourVAL==5){
        context.strokeStyle = 'black';
    }
    else if(linecolourVAL==6){
        context.strokeStyle = 'white';
    }
    context.stroke();
    }
  }
 };
 this.mouseup = function (ev) {
  if (tool.started) {
    tool.mousemove(ev);
    tool.started = false;
    push();
  }
 };
 }
 function ev_canvas (ev) {
 if (ev.layerX || ev.layerX == '0') { 
  ev._x = ev.layerX;
  ev._y = ev.layerY;
 } else if (ev.offsetX || ev.offsetX == '0') { 
   ev._x = ev.offsetX;
  ev._y = ev.offsetY;
 }
var func = tool[ev.type];
if (func) {
  func(ev);
 }
 }
  init();
   }, false); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:21:30.873

你在不同的浏览器中设置你的`_x`和`_y`完全不同的东西，因为`layerX`并不`layerY`存在于每个浏览器中。

如果你想要相对于画布的坐标，我建议使用`ev.clientX - canvas.getBoundingClientRect().left`和类似的垂直坐标。

# c - 无法在 Visual Studio 2012 第二部分中编译 c

> ID：15762673
> 
> 赞同：1
> 
> 时间：2013-04-02T11:13:50.390
> 
> 标签：c, visual-studio

在我[之前的问题](https://stackoverflow.com/questions/15761347/cant-compile-c-in-visual-studio-2012)中，我询问了编译`c`存在命名问题的地方，因为在一些重命名之后，`C++`保留字比`C`我现在意识到的要多，这是楔子的薄弱环节。

示例：Test.c：

```
#include <math.h>

int test()
{
    int n = pow(10, 10);
    return n;
} 
```

因为 C++ 中的 math.h 为 定义了重载`pow`，而这些都不是`int, int`它不知道选择哪个。

出现的其他问题包括：

1.  Int 不是默认类型，例如`static x = 1;`失败
2.  参数类型可以在签名之后但在正文之前定义`c`，但不能`c++`

等等，在这个项目上进行转换基本上不是一件简单的工作。我不想改变它的另一个原因是它仍然必须在另一个编译器中`C`编译。

所以我不是要解决这些问题，它们非常明显，只是在这个庞大的项目上耗时。我正在寻找一种`c`在视觉工作室中几乎“按原样”编译的方法，或者一个明确的“不，这是不可能的”。

我试过的：

1.  通过 Project->Properties->C/C++->Advanced->Compile as C Code 强制 c 编译
2.  通过 Project->Properties->C/C++->Language->Disable Language Extensions 关闭扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:18:25.997

pow(10.0, 10.0) 或 pow((double)10, (double)10) 怎么样？它会给你的代码带来麻烦吗？

# drupal - 本地化的词汇名称不会出现在视图中 drupal

> ID：15762674
> 
> 赞同：1
> 
> 时间：2013-04-02T11:13:51.617
> 
> 标签：drupal, drupal-modules, drupal-views, vocabulary

我在 drupal 中看到了一个视图，它显示了术语及其对应的词汇名称来对这些术语进行分组。问题：当我切换语言时，只有术语显示它们的翻译版本，词汇名称保持在原始语言中。

知道如何解决吗？感谢所有提示:)

在此先感谢 Fab

# ruby-on-rails - 测试电子邮件：通过后台工作人员发送时，最后一封电子邮件为零

> ID：15762675
> 
> 赞同：4
> 
> 时间：2013-04-02T11:13:54.070
> 
> 标签：ruby-on-rails, email, testing, rspec, sidekiq

我正在尝试使用[此 railscast](http://railscasts.com/episodes/275-how-i-test)添加一些电子邮件测试，但是我得到了`undefined method 'to' for nil:NilClass`.

这些电子邮件实际上是通过使用[Sidekiq](https://github.com/mperham/sidekiq)的后台工作人员处理的，我知道它们可以正确发送，因为它们在生产中工作，而且它们会在我添加`require 'sidekiq/testing'`到之前发送`spec_helper.rb`

所以基本上我的问题是如何访问 Sidekiq 中的电子邮件？我试图让工作人员处理电子邮件，但仍然遇到同样的错误。

规范/支持/mailer_macros.rb

```
module MailerMacros
  def last_email
    ActionMailer::Base.deliveries.last
  end

  def reset_email
    ActionMailer::Base.deliveries = []
  end
end 
```

规范/spec_helper.rb

```
require 'sidekiq/testing'
...
config.include MailerMacros
config.before(:each) { reset_email } 
```

配置/环境/test.rb

```
config.action_mailer.delivery_method = :test
config.action_mailer.default_url_options = { host: 'localhost:8080' } 
```

控制器/tickets_controller.rb

```
def create
  @ticket = current_user.tickets.build(params[:ticket])   
  if @ticket.save
    Sidekiq::Client.enqueue(TicketNotifier, @ticket.id)
    flash[:success] = "Your ticket has been submitted successfully."
    redirect_to ticket_path(@ticket)
  else
    render 'new'
  end
end 
```

规范的一部分：

```
require 'spec_helper'

describe "Tickets" do
  subject { page }

  describe "when creating a new ticket successfully" do
    before do
      login_as_user
      visit new_ticket_path
      fill_in "Subject", with: "Test ticket"
      fill_in "Description", with: "This is a test ticket"
      select 'Billing', from: "ticket[category]" 
      click_button "Submit Ticket"
    end

    specify { last_email.to.should include("admin@email.com") }
    # the rest tests the tickets#show view
    it { should have_selector('title', text: "Ticket #1") }
    it { should have_content("ticket has been submitted successfully") }
    ...
  end
end 
```

当我改用时`specify { ActionMailer::Base.deliveries.last.to.should include("admin@email.com") }`，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:00:01.520

当 requires`sidekiq/testing`和 not`sidekiq/testing/inline`时，作业被放入队列中，但在给出如下命令之前不会执行：

```
Sidekiq::Extensions::DelayedMailer.drain 
```

我在我的规范中使用了这样的辅助方法：

```
def process_async
  EventWorker.drain
  Sidekiq::Extensions::DelayedMailer.drain
end 
```

EventWorker 可能是我的应用程序中的自定义工作程序，并且`Sidekiq::Extensions::DelayedMailer`默认情况下是 Sidekiq 延迟邮件的位置。

然后我可以有这样的规范：

```
#do stuff that should send an email and trigger other sidekiq events
...
process_async
...
#assert the email was sent correctly 
```

在 SideKiq wiki 上有一个很好的解释：[https ://github.com/mperham/sidekiq/wiki/Testing](https://github.com/mperham/sidekiq/wiki/Testing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T12:57:20.507

除了 cmaitchison 的回答之外，我还修复了它（在他们的 wiki 上：[https](https://github.com/mperham/sidekiq/wiki/Testing#rspec) ://github.com/mperham/sidekiq/wiki/Testing#rspec ）

```
require 'sidekiq/testing'

RSpec.configure do |config|
  config.before(:each) do
    # Clears out the jobs for tests using the fake testing
    Sidekiq::Worker.clear_all

    if example.metadata[:sidekiq] == :fake
      Sidekiq::Testing.fake!
    elsif example.metadata[:sidekiq] == :inline
      Sidekiq::Testing.inline!
    elsif example.metadata[:type] == :acceptance
      Sidekiq::Testing.inline!
    else
      Sidekiq::Testing.fake!
    end
  end
end 
```

并像这样进行测试：

```
describe "Tickets", :sidekiq => :inline do
  subject { page }

  describe "when creating a new ticket successfully" do
    before do
      login_as_user
      visit new_ticket_path
      fill_in "Subject", with: "Test ticket"
      fill_in "Description", with: "This is a test ticket"
      select 'Billing', from: "ticket[category]" 
      click_button "Submit Ticket"
    end

    specify { last_email.to.should include("admin@email.com") }
    # the rest tests the tickets#show view
    it { should have_selector('title', text: "Ticket #1") }
    it { should have_content("ticket has been submitted successfully") }
    ...
  end
end 
```

# sql - 如何过滤 JPA 2 中的子实体集合？

> ID：15762677
> 
> 赞同：2
> 
> 时间：2013-04-02T11:14:03.703
> 
> 标签：sql, hibernate, jpa-2.0

我在 OneToMany 关系中有两个实体。

```
@Entity
public class Employee {

@Id @GeneratedValue
public long id;

public String name;

@OneToMany
public Collection<Address> addresses = new ArrayList<Address>();
...}

@Entity
public class Address {

@Id @GeneratedValue
public long id;

public String city;
...} 
```

我想在员工字段上使用一些简单的标准来获取员工（这很好，不是问题），它应该只包含那些在其城市字段中具有“新德里”的地址（这是问题所在）。

相当于 JPA 2 中的以下内容

```
from Cat as cat
left join cat.kittens as kitten
    with kitten.bodyWeight > 10.0 
```

这个问题是我实际问题的简化版本。

如果要复杂得多，我的主要问题是它有多个子实体，并且对父实体的过滤使用 sql 函数。

由于上述原因，我不能使用 HQL 或本机查询。

因此，我正在使用 EntityManager 、 CtiteriaBuilder 等在“仅 JPA 2”中寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-19T23:05:27.723

EclipseLink JPA 中的过滤关系需要使用本机 API。你这样做的方式是创建一个[DescriptorCustomizer](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_customizer.htm#CHDCCDGC)：

```
package ec.pack.z.pruebasDesarrollo;

import org.eclipse.persistence.config.DescriptorCustomizer;
import org.eclipse.persistence.descriptors.ClassDescriptor;
import org.eclipse.persistence.expressions.Expression;
import org.eclipse.persistence.expressions.ExpressionBuilder;
import org.eclipse.persistence.mappings.OneToManyMapping;

public class DC implements DescriptorCustomizer {
 @Override
 public void customize(ClassDescriptor descriptor) throws Exception {
  OneToManyMapping oneToManyMapping = (OneToManyMapping) descriptor.getMappingForAttributeName("addresses");
       Expression exp = oneToManyMapping.buildSelectionCriteria();
       ExpressionBuilder builder = exp.getBuilder();
       Expression addedExpression = builder.getField("city").equal("New Delhi");
       oneToManyMapping.setSelectionCriteria(exp.and(addedExpression));
 }
} 
```

关于实体：

```
import org.eclipse.persistence.annotations.Customizer;

@Entity
@Customizer(ec.pack.z.pruebasDesarrollo.DC.class)    
public class Employee {

@Id @GeneratedValue
public long id;

public String name;

@OneToMany
public Collection<Address> addresses = new ArrayList<Address>();
...} 
```

[参考](https://dev.eclipse.org/mhonarc/lists/eclipselink-users/msg07940.html)

# internet-explorer-9 - ie9中多个音频标签的html5问题，同时更改所有音频的当前时间

> ID：15762680
> 
> 赞同：0
> 
> 时间：2013-04-02T11:14:07.167
> 
> 标签：internet-explorer-9, html5-audio

我正在开发多轨播放器，我在其中使用多个音频标签并使用 javascript 操作所有这些标签。 [（见示例代码）](http://blogs.msdn.com/b/ie/archive/2011/05/13/unlocking-the-power-of-html5-lt-audio-gt.aspx)

```
var audios = [];
var loading = 0;
AddNote("2C");
AddNote("2E");
AddNote("2G");
AddNote("3C");
AddNote("3E");
AddNote("3G");
AddNote("4C");

function AddNote(name) {
    loading++;
    var audio = document.createElement("audio");
    audio.loop = true;
    audio.addEventListener("canplaythrough", function () {
    loading--;

    if (loading == 0) // All files are preloaded
        StartPlayingAll();
    }, false);

    audio.src = "piano/" + name + ".mp3";
    audios.push(audio);
}

function StartPlayingAll() {
    for (var i = 0; i < audios.length; i++)
        audios[i].play();
} 
```

当我尝试`currentTime`使用以下代码进行更改时

```
function playfrom(time) {
    for (var i = 0; i < audios.length; i++)
        audios[i].pause();
        audios[i].currentTime = time; //time in seconds
        audios[i].play();
    }    
} 
```

这在谷歌浏览器上运行良好，但在 IE9 上会产生问题。

`canplaythrough`事件已为所有音频标签绑定。因此，即使在使用上述代码更改音频标签的 currentTime 时，所有音频文件都已完全加载，浏览器（IE9）也会挂起。

有没有其他方法可以做到这一点？

# python - 通过 SSH 的 Python IPC

> ID：15762685
> 
> 赞同：0
> 
> 时间：2013-04-02T11:14:17.210
> 
> 标签：python, ssh, ipc

我打算编写一个工具，通过 Internet 连接多个家庭自动化系统（Raspberry Pis）。我不想编写自己的身份验证系统，但想使用 SSH：

`[Device] <-python-> [Raspberry Pi] <-ssh-> [Raspberry Pi] <-python-> [Device]`

两边的设备都应该由一个持久的 python 守护进程控制。棘手的部分是我想让任何一方连接到对方并更改设置或从中获取数据。我将如何实现这一目标？

我不想使用 SSH 端口转发，因为两个互联网连接都可能随时中断（消费者级 DSL）。

# javascript - AngularJS：在控制器中使用解析时更正可缩小的语法

> ID：15762691
> 
> 赞同：36
> 
> 时间：2013-04-02T11:14:25.517
> 
> 标签：javascript, angularjs, minify

我正在使用带有几个控制器的解析功能在新视图的渲染开始之前获取一些数据，如下所示：

```
HomeCtrl.resolve = {
    pictures: function(Picture) {
        return Picture.getall();
    } 
}; 
```

我该如何写这个，以便作为参数传递的图片服务在缩小时不会被覆盖？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-02T11:20:28.323

您可以使用以下模式注入依赖项，这是缩小证明

```
HomeCtrl.resolve = {
    pictures : ['Picture', function(Picture) {
                return Picture.getall();
            }]
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-19T20:29:23.700

使解析函数缩小安全的另一种方法：

```
HomeCtrl.resolve = {
    pictures: getPictures
};

getPictures.$inject = ['Picture'];
function getPictures(Picture){
    return Picture.getall();
} 
```

这种技术利用了在 javascript 中函数也是对象的事实，因此可以具有属性。

有关更多信息，请访问[https://docs.angularjs.org/guide/di](https://docs.angularjs.org/guide/di)并搜索“$inject”。

# jquery - 为什么 jQuery Mobile 固定工具栏在 Mobile Safari 中不固定？

> ID：15762693
> 
> 赞同：2
> 
> 时间：2013-04-02T11:14:37.977
> 
> 标签：jquery, iphone, ios, css, jquery-mobile

我在使用 jQuery Mobile 网站时遇到问题。有一个工具栏固定在屏幕底部，使用

```
<footer data-role="footer" data-position="fixed" data-tap-toggle="false"> 
```

但是，在 iPhone 上，当键盘出现时，它似乎会向上跳跃——而且它会比键盘向上跳跃，因此工具栏底部和键盘顶部之间存在空间。

要查看效果，请在 iPhone/Mobile Safari 上访问以下 URL：

[http://goo.gl/F4blB](http://goo.gl/F4blB)

单击“加入讲座”按钮，然后在下一个屏幕上，开始在文本框中输入内容。您应该会看到工具栏跳到键盘上方。请注意，它在桌面上运行良好，因此请确保您在 iPhone 上查看问题。

这似乎与页面内容的长度有关。如果只有一两行内容，那也没关系。只有当页面的长度增加时才会出现问题。

即使将窗口大小调整为与 iPhone 窗口一样小，Chrome 也没有问题。

我们使用 jQM 1.3.0 和 jQuery 1.9.1。最新版本的 iOS。

知道如何*真正*修复工具栏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:52:32.040

这是 jQuery Mobile 中的一个错误。

您需要自己修复 jQuery Mobile 代码。首先搜索此代码行：

```
if( screen.width < 500 && $( e.target ).is( o.hideDuringFocus ) && !$( e.target ).closest( ".ui-header-fixed, .ui-footer-fixed" ).length ){ 
```

并更改 screen.width < XXX 以适应更大的屏幕设备。

关于这个问题的更多信息可以在这里找到，在其官方票：[https ://github.com/jquery/jquery-mobile/issues/4113](https://github.com/jquery/jquery-mobile/issues/4113)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T12:33:56.730

用这个：

[https://github.com/jquery/jquery-mobile/issues/5532](https://github.com/jquery/jquery-mobile/issues/5532)

$('input, textarea') .on('focus', function (e) { $('header, footer').css('position', 'absolute'); }) .on('blur', function (e) { $('header, footer').css('position', 'fixed'); //强制页面重绘以修复定位不正确的固定元素 setTimeout( function() { window.scrollTo( $.mobile.window .scrollLeft(), $.mobile.window.scrollTop() ); }, 0 ); });

# php - 简单的 html dom 不起作用

> ID：15762701
> 
> 赞同：3
> 
> 时间：2013-04-02T11:15:20.470
> 
> 标签：php, cakephp, simple-html-dom

我正在尝试使用简单的 html dom 来解析我的 html 数据。但是每当我使用下面的代码时，我都会收到错误：-

```
Trying to get property of non-object 
```

我的代码是：-

```
foreach($html->find('div.row') as $val)
        {
            $name = $val->find('h1')->innertext;
            echo $name;
        } 
```

但是当我这样使用它时，我得到了正确的结果：-

```
foreach($html->find('div.row') as $val)
        {
            foreach($val->find('h1') as $v)
             echo $v->innertext;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:34:49.473

该`find()`方法返回一个数组，除非您将索引指定为第二个参数。您的第二段代码在遍历数组并获取数组`innertext`中的每个元素时起作用，而您的第一段代码试图获取`innertext`实际数组的属性。

如果您想获得例如的第一次（或唯一一次）出现`h1`，请执行以下操作：

```
$name = $val->find('h1', 0)->innertext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:18:53.553

试试这个

```
$dom = new DOMDocument();
$dom->loadHTML($html);

$elements = $dom->getElementsByTagName('div');
foreach ($elements as $child) {
    echo $child->nodeValue;
} 
```

# php - 如何在我的网页上获取会话值

> ID：15762704
> 
> 赞同：0
> 
> 时间：2013-04-02T11:15:27.967
> 
> 标签：php, session-cookies

我使用 php`setcookie`函数添加了 3 个 cookie，我可以在浏览器 cookie 数据中看到它们，但是当我在我的页面上调用它们时，它们没有显示在我的页面上。

例如，我在浏览器数据中看到为我的网站设置了 15 个 cookie，其中包括我的 3 个 cookie，但是当我`var_dump($_COOKIE)`在页面上这样做时，它只显示 8 个 cookie 而没有显示我的 3 个 cookie，谁能告诉我如何获取它们在我的页面上。

这就是我设置cookie的方式：

```
setcookie("useremail", $email);
setcookie("username", $name);
setcookie("userid", $uid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:18:59.633

试试这个：`print_r($_COOKIE);`显示所有 cookie

或`echo $_COOKIE["useremail"];`仅显示 useremail

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:19:06.177

这就是我们在页面中获取 cookie 值的方式：它应该可以工作。

```
$email=$_COOKIE['useremail'];
$username=$_COOKIE['username'];
$userid=$_COOKIE['userid']; 
```

# google-maps - 谷歌地图自动完成地址点击

> ID：15762705
> 
> 赞同：1
> 
> 时间：2013-04-02T11:15:28.123
> 
> 标签：google-maps, autocomplete

我有一个谷歌地图和他们的一个自动完成文本框，用户开始输入，地址显示在下拉列表中，然后地图缩放到最终选择的那个。到目前为止，我对自己所拥有的感到非常满意；问题是，用户必须单击列表中的地址才能使其工作。

我想要的也是这个选项：当用户在键盘上单击“ENTER”时，即使他们没有完全填写 auto_complete 框，也会自动选择列表中的第一个地址，并且地图会缩放到该地址。

我在玩

```
$(autocomplete).trigger("click"); 
```

但我无法修复它。所以，如果你能帮我一把，我将不胜感激......我拥有的代码是：

```
<script type="text/javascript">
  function initialize_google_maps() {

    var midOfIreland = new google.maps.LatLng(53.252069, -7.860718);
    var myOptions = {
      zoom: 7,
      center: midOfIreland,
      mapTypeId: google.maps.MapTypeId.ROADMAP, // ROADMAP, SATELLITE, HYBRID
      streetViewControl: false
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var input = document.getElementById('address_autocomplete');
    var options = {
      types: ['geocode']
    };

   autocomplete = new google.maps.places.Autocomplete(input, options);
    autocomplete.bindTo('bounds', map);
    // $(autocomplete).trigger("click");

    var contentstring = $('#info_window').html();

var infowindow = new google.maps.InfoWindow({content: contentstring, width:1, height:1});
// for the 'x', to close the infoWindow, we give it the same behaviour as the 'No' link, in the infoWindow
google.maps.event.addListener(infowindow, 'closeclick', function() {   
  $(".map-no-link").trigger("click");
});  

   var marker = new google.maps.Marker({
      map: map
    });

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
      var place = autocomplete.getPlace();
      if (place.geometry.viewport) {
          map.fitBounds(place.geometry.viewport);
      } else {
          map.setCenter(place.geometry.location);
          map.setZoom(11);
      }
      marker.setPosition(place.geometry.location);
      $('#user_lat').val(place.geometry.location.lat());
      $('#user_lng').val(place.geometry.location.lng());
      $('#changed').val('1');

   //   infowindow.setContent(place.name);
      infowindow.open(map, marker);
    });

    <% if current_user.address and current_user.lat %>
      var currentlatlng = new google.maps.LatLng(<%= current_user.lat %>, <%= current_user.lng %>);
      var marker = new google.maps.Marker({map: map, position: currentlatlng});
      map.setCenter(currentlatlng);
      map.setZoom(11);
    <% end %>

  }

  $(function() {
      initialize_google_maps();
  });

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:09:38.873

检查这个[jsFiddle](http://jsfiddle.net/dodger/pbbhH/)。您需要做的是在按下 Enter 时进行监听，从自动完成容器中取出第一项，对其进行地理编码并处理结果。

```
$(document).keypress(function (e) {
  if (e.which == 13) {
    var firstResult = $(".pac-container .pac-item:first").text();
    var geocoder = new google.maps.Geocoder();
      geocoder.geocode({"address":firstResult }, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var lat = results[0].geometry.location.lat(),
            lng = results[0].geometry.location.lng(),
            placeName = results[0].address_components[0].long_name,
            latlng = new google.maps.LatLng(lat, lng);

        moveMarker(placeName, latlng);
        $("input").val(firstResult);
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T21:48:24.343

这是我最终使用的代码，它有效：

```
<script type="text/javascript">
  var pac_input = document.getElementById('address_autocomplete');

  (function pacSelectFirst(input){
    // store the original event binding function
    var _addEventListener = (input.addEventListener) ? input.addEventListener : input.attachEvent;

    function addEventListenerWrapper(type, listener) {
      // Simulate a 'down arrow' keypress on hitting 'return' when no pac suggestion is selected,
      // and then trigger the original listener.
      if (type == "keydown") {
        var orig_listener = listener;
        listener = function (event) {
          var suggestion_selected = $(".pac-item.pac-selected").length > 0;
          if (event.which == 13 && !suggestion_selected) {
            event.preventDefault();
            var simulated_downarrow = $.Event("keydown", {keyCode:40, which:40})
            orig_listener.apply(input, [simulated_downarrow]);
          }

          orig_listener.apply(input, [event]);
        };
      }

      // add the modified listener
      _addEventListener.apply(input, [type, listener]);
    }

    if (input.addEventListener)
      input.addEventListener = addEventListenerWrapper;
    else if (input.attachEvent)
      input.attachEvent = addEventListenerWrapper;

  })(pac_input);

  function initialize_google_maps() {
    var midOfIreland = new google.maps.LatLng(53.252069, -7.860718);
    var myOptions = {
      zoom: 7,
      center: midOfIreland,
      mapTypeId: google.maps.MapTypeId.ROADMAP, // ROADMAP, SATELLITE, HYBRID
      streetViewControl: false
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var options = {
      types: ['geocode']
    };

    autocomplete = new google.maps.places.Autocomplete(pac_input, options);
    autocomplete.bindTo('bounds', map);
    // $(autocomplete).trigger("click");

    var contentstring = $('#info_window').html();

    var infowindow = new google.maps.InfoWindow({content: contentstring, width:1, height:1});
    // for the 'x', to close the infoWindow, we give it the same behaviour as the 'No' link, in the infoWindow
    google.maps.event.addListener(infowindow, 'closeclick', function() {   
      $(".map-no-link").trigger("click");
    });  

    var marker = new google.maps.Marker({
      map: map
    });

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
      var place = autocomplete.getPlace();
      if (place.geometry.viewport) {
          map.fitBounds(place.geometry.viewport);
      } else {
          map.setCenter(place.geometry.location);
          map.setZoom(11);
      }

      marker.setPosition(place.geometry.location);
      $('#user_lat').val(place.geometry.location.lat());
      $('#user_lng').val(place.geometry.location.lng());
      $('#changed').val('1');

      //infowindow.setContent(place.name);
      infowindow.open(map, marker);
    });

    <% if current_user.address and current_user.lat %>
      var currentlatlng = new google.maps.LatLng(<%= current_user.lat %>, <%= current_user.lng %>);
      var marker = new google.maps.Marker({map: map, position: currentlatlng});
      map.setCenter(currentlatlng);
      map.setZoom(11);
    <% end %>

  }

  $(function() {
      initialize_google_maps();
  });
</script> 
```

# smalltalk - 如何使用依赖于基线的#development 版本定义 ConfigurationOf？

> ID：15762706
> 
> 赞同：6
> 
> 时间：2013-04-02T11:15:34.537
> 
> 标签：smalltalk, pharo, squeak, metacello

在 Pharo 中，我想定义一个`ConfigurationOfNand2Tetris`只有一个包的 Metacello：

```
ConfigurationOfNand2Tetris>>baseline01: spec
  <version: '0.1-baseline'>

  spec
    for: #common
    do: [ 
      spec
        blessing: #baseline;
        repository: 'http://www.smalltalkhub.com/mc/DamienCassou/Nand2Tetris/main';
        package: 'Nand2Tetris' ]

ConfigurationOfNand2Tetris>>development: spec
  <symbolicVersion: #development>

  spec for: #common version: '0.1-baseline'. 
```

当我执行时，`MetacelloToolBox validateConfiguration: ConfigurationOfNand2Tetris`我总是收到 2 个警告：

*   警告：符号版本#development是指一个版本'0.1-baseline'，其祝福#baseline不是#development { notDevelopmentVersion } [ #validateVersionSpecForSymbolicVersion:symbolicVersion: ]
*   警告：仅定义基线（未定义版本）。{ onlyBaselineVersion } [ #validatePragmas ]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T11:43:59.740

如果你只想依赖基线，Metacello 中的比喻是使用`#bleedingEdge`祝福。此外，您可以明确拒绝其他符号版本：

```
ConfigurationOfNand2Tetris>>baseline01: spec
  <version: '0.1-baseline'>

  spec
    for: #common
    do: [ 
      spec
        blessing: #baseline;
        repository: 'http://www.smalltalkhub.com/mc/DamienCassou/Nand2Tetris/main';
        package: 'Nand2Tetris' ]

ConfigurationOfNand2Tetris>>bleedingEdge: spec
  <symbolicVersion: #bleedingEdge>
  spec for: #common version: '0.1-baseline'.

ConfigurationOfNand2Tetris>>development: spec
  <symbolicVersion: #'development'>
  spec for: #'common' version: #'notDefined'.

ConfigurationOfNand2Tetris>>stable: spec
  <symbolicVersion: #'stable'>
  spec for: #'common' version: #'notDefined'. 
```

这里的想法是，`#stable`版本`#development`链接到明确编号的版本，而`#bleedingEdge`始终指向最新版本。

这应该避免第一次警告。我认为，只要您没有发布版本，您就可以放心地忽略第二个警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T11:39:56.907

通常你会定义你的基线，然后是一个`#versionN:`方法：

```
ConfigurationOfNand2Tetris>>version01: spec
  <version: '0.1' imports: #('0.1-baseline')>

  spec
    for: #common do: [ 
      spec
        blessing: #baseline;
        package: 'Nand2Tetris' with: 'Nand2Tetris-yourname.22']. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T11:41:35.947

我想你忘了实施：

```
ConfigurationOfNand2Tetris>>version01: spec

<version: '0.1' imports: #('0.1-baseline' )>

spec for: #'common' do: [
    spec blessing: #'development'.
    spec description: 'some description'.
    spec author: 'yourName'.
    spec timestamp: '1/15/2013 16:13'.
    spec  
        package: 'Nand2Tetris' with: 'Nand2Tetris-yourName.versionNumber'] 
```

那么你应该改变：

```
ConfigurationOfNand2Tetris>>development: spec

  <symbolicVersion: #development>

  spec for: #'common' version: '0.1'. 
```

# sql - 在 drupal7 中获取复选框

> ID：15762707
> 
> 赞同：0
> 
> 时间：2013-04-02T11:15:35.187
> 
> 标签：sql, jquery, drupal-7

我有一个基于该状态表中所选项目的状态下拉列表（drupal 7 中的列表），我也有复选框。当我从下拉列表中选择任何州时，所选州下的城市希望显示为复选框。我的代码是

```
function signup_form($form, &$form_state) {
 $form['rate_the_service']['state'] = array(
    '#type' => 'select',
    //'#title' => 'State/Province',
    '#prefix'=>'<div id="dropdown-third-replace">',
    '#suffix'=>'</div>',
    '#options'=>$opt,
    '#attributes'=>array('selected'=>array('selected')),
 '#validated' => TRUE,
  '#ajax' => array(
      'callback' => 'ajax_example_dependent_dcheck_state_callback',
      'wrapper' => 'dropdown-four-replace',
    ),
  );
   $form['rate_the_service']['city'] = array(
    '#prefix'=>'<div id="dropdown-four-replace">',
    '#type' => 'checkboxes',
    '#options' => '',
    '#default_value' => isset($values['states']) ? $values['states'] : NULL,
    '#suffix'=>'</div></div>',

  );

} 
```

阿贾克斯调用

```
function ajax_example_dependent_dcheck_state_callback($form, $form_state) {
   $state = $form_state['values']['state'];

       $state_query_result2 = db_query('SELECT cityname FROM cities WHERE varstatekey = :varstatekey', array(':varstatekey' => $state));

        $state_array = array();

       // $state_array[0] = '-- Select State --';
        foreach($state_query_result2 as $row2){
            $state_array[$row2->cityname] = $row2->cityname;
        }

        $options[$state] = $state_array;

    $form['rate_the_service']['city']['#options'] = $state_array;

    //print_r($form['rate_the_service']['city']['#options']);

    return $form['rate_the_service']['city'];

} 
```

如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T08:13:44.850

在您的 ajax 函数下，只需 return `$form['rate_the_service']['city']`。然后在状态表单元素之后的表单中检查是否设置了状态表单字段。如果已设置，请执行您的 sql 查询并在数组中收集城市值。在此之后，您编写城市表单元素并在选项中分配包含城市的数组。不要忘记对`isSet`state 的值使用函数，否则在表单加载时 city 数组将为空并给出错误。

# jetty - 码头错误：java.lang.NoClassDefFoundError：com/mysema/query/dml/UpdateClause

> ID：15762713
> 
> 赞同：0
> 
> 时间：2013-04-02T11:16:06.803
> 
> 标签：jetty

我跑

```
mvn jetty:run-war 
```

看到这个错误：

```
java.lang.NoClassDefFoundError: com/mysema/query/dml/UpdateClause
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Class.java:2436)
        at java.lang.Class.getDeclaredMethod(Class.java:1937)
        at org.mortbay.jetty.annotations.AnnotationFinder$ParsedMethod.toMethod(AnnotationFinder.java:360)
        at org.mortbay.jetty.annotations.AnnotationFinder.getMethodsForAnnotation(AnnotationFinder.java:678)
        at org.mortbay.jetty.annotations.AnnotationProcessor.processPostConstructAnnotations(AnnotationProcessor.java:303)
        at org.mortbay.jetty.annotations.AnnotationProcessor.processLifeCycleCallbackAnnotations(AnnotationProcessor.java:295)
        at org.mortbay.jetty.annotations.AnnotationProcessor.process(AnnotationProcessor.java:110)
        at org.mortbay.jetty.annotations.Configuration.parseAnnotations(Configuration.java:138)
        at org.mortbay.jetty.plugin.Jetty6MavenConfiguration.parseAnnotations(Jetty6MavenConfiguration.java:121)
        at org.mortbay.jetty.plus.webapp.AbstractConfiguration.configure(AbstractConfiguration.java:121)
        at org.mortbay.jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:229)
        at org.mortbay.jetty.plus.webapp.AbstractConfiguration.configureWebApp(AbstractConfiguration.java:98)
        at org.mortbay.jetty.plus.webapp.Configuration.configureWebApp(Configuration.java:149)
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1212)
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:548)
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:348)
        at org.mortbay.jetty.plugin.Jetty6PluginWebAppContext.doStart(Jetty6PluginWebAppContext.java:107)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:151)
        at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:151)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
        at org.mortbay.jetty.Server.doStart(Server.java:222)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.plugin.Jetty6PluginServer.start(Jetty6PluginServer.java:132)
        at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:384)
        at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:320)
        at org.mortbay.jetty.plugin.Jetty6RunWar.execute(Jetty6RunWar.java:67)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.ClassNotFoundException: com.mysema.query.dml.UpdateClause
        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:326)
        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:279)
        ... 52 more
2013-04-02 12:07:44.209::INFO:  Started SelectChannelConnector@0.0.0.0:8080
[INFO] Started Jetty Server 
```

POM 是：

```
<?xml version="1.0"?>
<project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.rbs.prototypeweb</groupId>
        <artifactId>stylesuite</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>

    <groupId>com.rbs.prototypeweb</groupId>
    <artifactId>stylesuite.ui</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <packaging>war</packaging>

    <name>stylesuite.ui</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <finalName>sms</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <!-- As we are doing "inplace" GWT compilation, ensure the widgetset -->
            <!-- directory is cleaned properly -->
            <plugin>
                <artifactId>maven-clean-plugin</artifactId>
                <version>2.4.1</version>
                <configuration>
                    <filesets>
                        <fileset>
                            <directory>src/main/webapp/VAADIN/widgetsets</directory>
                        </fileset>
                    </filesets>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.vaadin</groupId>
                <artifactId>vaadin-maven-plugin</artifactId>
                <version>${vaadin.plugin.version}</version>
                <configuration>
                    <extraJvmArgs>-Xmx512M -Xss1024k</extraJvmArgs>
                    <webappDirectory>${basedir}/src/main/webapp/VAADIN/widgetsets
                    </webappDirectory>
                    <hostedWebapp>${basedir}/src/main/webapp/VAADIN/widgetsets
                    </hostedWebapp>
                    <noServer>true</noServer>
                    <!-- Remove draftCompile when project is ready -->
                    <draftCompile>true</draftCompile>
                    <compileReport>true</compileReport>
                    <style>OBF</style>
                    <strict>true</strict>
                    <runTarget>http://localhost:8080/</runTarget>
                </configuration>
                <executions>
                    <execution>
                        <configuration>
                            <!-- if you don't specify any modules, the plugin will find them -->
                            <!-- <modules> <module>com.vaadin.demo.mobilemail.gwt.ColorPickerWidgetSet</module> 
                                </modules> -->
                        </configuration>
                        <goals>
                            <goal>resources</goal>
                            <goal>update-widgetset</goal>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.10</version>
                <configuration>
                    <scanIntervalSeconds>2</scanIntervalSeconds>
                    <stopKey>foo</stopKey>
                    <stopPort>9999</stopPort>
                </configuration>
                <executions>
                    <execution>
                        <id>start-jetty</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <scanIntervalSeconds>0</scanIntervalSeconds>
                            <daemon>true</daemon>
                        </configuration>
                    </execution>
                    <execution>
                        <id>stop-jetty</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>

        <dependency>
                <groupId>com.vaadin</groupId>
                <artifactId>vaadin-client</artifactId>
                <version>${vaadin.version}</version>
            </dependency>

            <dependency>
                <groupId>com.vaadin</groupId>
                <artifactId>vaadin-client-compiled</artifactId>
                <version>${vaadin.version}</version>
            </dependency>

            <dependency>
                <groupId>com.vaadin</groupId>
                <artifactId>vaadin-server</artifactId>
                <version>${vaadin.version}</version>
            </dependency>

            <dependency>
                <groupId>com.vaadin</groupId>
                <artifactId>vaadin-shared</artifactId>
                <version>${vaadin.version}</version>
            </dependency>

            <dependency>
                <groupId>com.vaadin</groupId>
                <artifactId>vaadin-themes</artifactId>
                <version>${vaadin.version}</version>
            </dependency>

            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-orm</artifactId>
                <version>${spring.version}</version>
            </dependency>

            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-tx</artifactId>
                <version>${spring.version}</version>
            </dependency>

            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
                <version>${spring.version}</version>
            </dependency>

            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
                <version>${spring.version}</version>
            </dependency>

            <dependency>
                <groupId>org.springframework.data</groupId>
                <artifactId>spring-data-jpa</artifactId>
                <version>${spring.data.jpa.version}</version>
            </dependency>

            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>${junit.version}</version>
                <scope>test</scope>
            </dependency>

            <dependency>
                <groupId>log4j</groupId>
                <artifactId>log4j</artifactId>
                <version>1.2.16</version>
            </dependency>

            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-test</artifactId>
                <version>${spring.version}</version>
                <scope>test</scope>
            </dependency>

            <dependency>
                <groupId>org.hamcrest</groupId>
                <artifactId>hamcrest-all</artifactId>
                <version>1.1</version>
            </dependency>

            <dependency>
                <groupId>org.hibernate.javax.persistence</groupId>
                <artifactId>hibernate-jpa-2.0-api</artifactId>
                <version>1.0.0.Final</version>
            </dependency>

            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-entitymanager</artifactId>
                <version>${hibernate.version}</version>
            </dependency>

            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-log4j12</artifactId>
                <version>${slf4j.version}</version>
                <scope>runtime</scope>
            </dependency>   

            <!-- HSQL -->
            <dependency>
                <groupId>org.hsqldb</groupId>
                <artifactId>hsqldb</artifactId>
                <version>${hsql.version}</version>
            </dependency>       

            <!-- H2 -->
            <dependency>
                <groupId>com.h2database</groupId>
                <artifactId>h2</artifactId>
                <version>${h2.version}</version>
            </dependency>

            <dependency>
                <groupId>joda-time</groupId>
                <artifactId>joda-time</artifactId>
                <version>${jodatime.version}</version>
            </dependency>

            <dependency>
                <groupId>org.aspectj</groupId>
                <artifactId>aspectjrt</artifactId>
                <version>${aspectj.version}</version>
            </dependency>

            <dependency>
                <groupId>org.aspectj</groupId>
                <artifactId>aspectjweaver</artifactId>
                <version>${aspectj.version}</version>
                <scope>runtime</scope>
            </dependency>       

            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-validator-annotation-processor</artifactId>
                <version>4.1.0.Final</version>
            </dependency>

            <dependency>
                <groupId>com.vaadin.addon</groupId>
                <artifactId>jpacontainer</artifactId>
                <version>3.0.0.beta1</version>
            </dependency>   

    </dependencies>

</project> 
```

它似乎在 Tomcat 上运行正常。另外，当我查看服务器输出时说

> [信息] 启动码头 7.0.0.pre5 ...

这是与插件中定义的不同的码头版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:27:48.690

将此添加到 POM 似乎可以解决它：

```
<dependency>
   <groupId>com.mysema.commons</groupId>
   <artifactId>mysema-commons-jetty</artifactId>
   <version>6.1.15</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T16:06:17.600

它可能很旧，但这个解决方案对我有用。将此添加到 POM：

```
<dependency>
    <groupId>com.mysema.querydsl</groupId>
    <artifactId>querydsl-core</artifactId>
    <version>3.7.3</version>
</dependency> 
```

# php - 为 Wordpress 导航添加标题

> ID：15762714
> 
> 赞同：0
> 
> 时间：2013-04-02T11:16:09.210
> 
> 标签：php, wordpress

我目前有以下代码在我的 Wordpress 网站上显示导航；

```
<?php wp_nav_menu( array( 
'container' => false, 
'theme_location' => 'primary', 
'menu' => 'mainmenu',
'menu_id' => 'access'
) ); 
?> 
```

我将如何使导航显示生成的每个链接的标题？这是出于 SEO 目的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:40:16.317

你需要一个自定义的walker函数来实现这一点。这可以帮助你：[http ://shinraholdings.com/62/custom-nav-menu-walker-function/#example-code](http://shinraholdings.com/62/custom-nav-menu-walker-function/#example-code)

# ruby-on-rails - 如何在 activeadmin/formtastic 中以深度嵌套的形式创建项目

> ID：15762719
> 
> 赞同：0
> 
> 时间：2013-04-02T11:16:21.423
> 
> 标签：ruby-on-rails, activeadmin, nested-forms, formtastic

关于如何在 ActiveAdmin 中使用 formtastic 创建深度嵌套的表单，我已经有一段时间了。这是我的模型结构的示例：

```
class Herb < ActiveRecord::Base
has_one :medicinal
attr_accessible :medicinal_attributes
accepts_nested_attributes_for :medicinal 
```

一种药草有一种药用（使用）

```
class Medicinal < ActiveRecord::Base
attr_accessible :recipe_attributes
belongs_to :herb
has_and_belongs_to_many :recipes
accepts_nested_attributes_for :recipes 
```

一个药用（用途）可以有很多配方

```
class Recipe < ActiveRecord::Base
has_and_belongs_to_many :medicinals
has_many :recipe_ingredients
has_many :ingredients, :through => :recipe_ingredients
attr_accessible :recipe_ingredients_attributes
accepts_nested_attributes_for :recipe_ingredients 
```

一个食谱可以有很多成分（通过recipe_ingredients）

```
class RecipeIngredient < ActiveRecord::Base
attr_accessible :ingredient_attributes
belongs_to :recipe
belongs_to :ingredient 
```

成分

```
class Ingredient < ActiveRecord::Base
    attr_accessible :item
has_many :recipes, :through => :recipe_ingredients 
```

所以这是我的问题。我希望用户能够从 ActiveAdmin 中的 Herb Entry 页面创建配方，能够将 Herb 自动输入为成分，并且如果用户输入当前不存在的成分，则将其作为新成分输入（因此其他食谱可以使用它）。我认为我不太了解如何在 ActiveAdmin 中使用控制器来知道从哪里开始......这是我到目前为止所拥有的：

```
ActiveAdmin.register Herb do

controller do
 def new
  @herb = Herb.new
  @herb.build_medicinal
 end
 def edit
  @herb = Herb.find(params[:id])
  if @herb.medicinal.blank?
    @herb.build_medicinal  
  end
 end
end

  form do |f|
   f.inputs "Herb" do
   f.inputs :name => "Medicinal", :for => :medicinal do |med| 
    med.input :content,  :label => "Medicinal Uses", :required => true
     med.has_many :recipes do |r|
      r.inputs "Recipe" do
       r.has_many :recipe_ingredients do |i|
        i.inputs "Ingredients" do
          i.input :ingredient
        end
       end
      end
     end
    end 
   end
  f.actions
  end 
```

我知道这很长，但是您能给我的任何建议将不胜感激。我对rails比较陌生。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:11:41.530

如果我正在构建同一个站点，我可能会稍微移动文件的结构以获得您正在寻找的结果。

应用程序/管理员/herb.rb

```
ActiveAdmin.register Herb do
end 
```

这应该是您在 active_admin 中创建页面所需的全部内容。然后为您的 app/controller/herb_controller.rb

```
class HerbController < ApplicationController
 def new 
  @herb = Herb.new
 end 
end 
```

我现在要检查以验证您是否可以转到 ActiveAdmin 并创建一个新药草。我会进一步添加到您的 app/controller/herb_controller.rb 以检查在您创建草药时是否需要添加新成分。

```
...
def create
 @herb = Herb.new
 if @herb.save
  @herb.create_ingredient_if_not_existing
  # perform any other actions, such as flash message or redirect 
 else
  # perform action if save not successful
 end
end 
```

现在你想在你的 Herb 模型中创建方法

```
def create_if_not_existing
 unless Ingredient.where("name = ?", self.name) then
  new_ingredient = ingredient.build
  new_ingredient.name = self.name
  # add extra attributes here if necessary
  new_ingredient.save
 end
end 
```

然后，您可以确保您没有在任何一个模型中创建重复项，其中包含类似于以下的行：

```
validates :name, :uniqueness => true 
```

这是我在 Stack Overflow 上的第一个答案，如果这对您有任何帮助，请告诉我！不久前我在同样的事情上苦苦挣扎，很幸运有几个人一路帮助我。

# c# - 使用 Jquery 重新填充会话值

> ID：15762722
> 
> 赞同：0
> 
> 时间：2013-04-02T11:16:24.050
> 
> 标签：c#, jquery, asp.net, webforms

`DDL`如果选择了 a 中的项目并显示另一个文本字段供用户填写，我有一个使用 jquery 显示/隐藏的表单。

我现在使用 session 来存储表单中的所有值，因为它位于多个页面上。当用户单击上一页按钮时，我`Repopulating()`使用会话值。

所以有些文本框在里面`Panels`，我必须检查隐藏了`if`的`radio button`是什么，如果选中，然后从会话中填充值。`checked``panel``panel.Visible`

如何在后面的代码中使用 jQuery 来做到这一点？还是我应该只使用面板？

这就是页面加载时我正在做的事情。

```
$(function () {

 $('#whereIncident').hide();

 var result = $('.drpIncidentTookPlace').val();

 if (result == "Victim-Other") {
    $('#whereIncident').show(400);
 } else {
    $('#whereIncident').hide(300);
 }
}); 
```

我正在将我的会话保存到一个班级。并根据选择的内容重新填充。

```
 SessionVars.Current.Incident.incidentPlace = drp_IncidentTookPlace.SelectedValue;
 SessionVars.Current.Incident.incidentPlaceOther = txt_other_type.Text; 
```

重新弹出（）

```
 drp_IncidentTookPlace.SelectedValue = SessionVars.Current.Incident.incidentPlace;
      if (drp_IncidentTookPlace.SelectedValue == "Victim-Other")
       {
           txt_other_type.Text = SessionVars.Current.Incident.incidentPlaceOther;
       } 
```

`other`重新填充会话时，如何使用 jQuery 重新显示隐藏字段？因为这是在后面的代码中？

# c++ - 如何在 C++ 中的多线程中调用 exe

> ID：15762723
> 
> 赞同：-2
> 
> 时间：2013-04-02T11:16:24.457
> 
> 标签：c++, multithreading, exe

我需要从我的 c++ 应用程序中调用一个 exe。exe 需要“10 秒”才能完成该过程。我需要多次调用“exe”。所以我计划使用多线程从我的 C++ 应用程序中多次调用“exe”。有人可以提供一个样本来做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:18:02.227

[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)为您提供可等待的进程句柄。

它在[`PROCESS_INFORMATION`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684873%28v=vs.85%29.aspx)由 填充的数据结构中`CreateProcess`。

如果您需要便携式解决方案，请使用[`Boost.Interprocess`](http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess.html). 有了它，您可以在不同进程的线程之间共享数据。`Boost.Interprocess`不包含启动流程的方法；这可以通过 C 函数（如`system()`. 请注意，调用`system()`启动其他进程的线程将被阻塞，直到其他进程退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:21:07.607

通过这个 MSDN 示例运行“exe”。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682512(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682512(v=vs.85).aspx)

# android - Gmail 和 Android 同步协议的详细信息

> ID：15762724
> 
> 赞同：0
> 
> 时间：2013-04-02T11:16:27.477
> 
> 标签：android, gmail, push-notification, sync

iOS 设备可以通过 CalDAV、CardDAV 和 IMAP 与外部服务器同步。我怎样才能对 Android 做同样的事情？Android 开箱即用不支持 CalDAV 和 CardDAV。ActiveSync 不是一种选择，因为它是专有技术，需要从 MS 获得昂贵的许可。

我很好奇 Gmail 本身是如何与 Android 同步的。是否有任何文档/示例（最好在 PHP 中）可以让我实现类似的后端，以便 Android 设备能够将其邮件、联系人和日历与我自己的服务器同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:02:55.330

Gmail 与 Android 上的大多数其他应用程序（Facebook、日历、联系人等）一样，除了在邮件客户端的情况下使用 IMAP 和 POP3 协议外，还使用推送通知。

您可以在自己的服务器上设置[GCM ，您可以通过它向您的应用发送推送通知。](http://developer.android.com/google/gcm/)

# asp.net - 如何将 System.Web.UI.HtmlControls.HtmlInputText 值转换为字符串

> ID：15762725
> 
> 赞同：0
> 
> 时间：2013-04-02T11:16:29.187
> 
> 标签：asp.net

您好我想将*System.Web.UI.HtmlControls.HtmlInputText*值转换为字符串。

实际上我正在使用身份验证功能，其中我正在使用 HTML 控件：

```
private void Authenticate_User(System.Web.UI.HtmlControls.HtmlInputText username, System.Web.UI.HtmlControls.HtmlInputText password)
  {
//-- doing some code here & Save credentials into cookies.
  } 
```

***现在我在 page_load 上检查上述功能：***

```
 protected void Page_Load(object sender, EventArgs e)
{
string userid = Request.Cookies["UserDetails"]["UserName"].ToString();
string pass = Request.Cookies["UserDetails"]["Password"].ToString();

Authenticate_User(userid, pass);  //---- It gives some conversation error (HTML contorl to string )

} 
```

**有关的任何建议。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:26:12.077

有两种方法可以做到

方法一：

将参数类型更改`Authenticate_User(System.Web.UI.HtmlControls.HtmlInputText username, System.Web.UI.HtmlControls.HtmlInputText password)`为`private void Authenticate_User(String username, String password)`

如果你想将字符串类型化为 htmlinput 然后使用这个

```
protected void Page_Load(object sender, EventArgs e)
{
    string userid = Request.Cookies["UserDetails"]["UserName"].ToString();
    string pass = Request.Cookies["UserDetails"]["Password"].ToString();

    Authenticate_User(new System.Web.UI.HtmlControls.HtmlInputText() {Value=userid, Size=userid.Length }, new System.Web.UI.HtmlControls.HtmlInputText() {Value=pass, Size=pass.Length });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:20:24.313

尝试以下

```
private void Authenticate_User(System.Web.UI.HtmlControls.HtmlInputText username, System.Web.UI.HtmlControls.HtmlInputText password)
  {
 String _username= username.Value;
 String _pass=password.Value;
//-- doing some code here & Save credentials into cookies.
  } 
```

要转换，您需要制作一个新对象

```
HtmlInputText obj=new HtmlInputText();
obj.Value=""; 
```

# shell - 如何在 shell 脚本中启动另一个动作

> ID：15762728
> 
> 赞同：0
> 
> 时间：2013-04-02T11:16:41.870
> 
> 标签：shell, scripting

有人将此脚本放在网上以检查网站是否有活动门票。当 this_year_count > 1 时，如何修改它以启动 iTunes 播放 osascript 或播放系统哔声等？我可以从这个脚本发送短信吗？

```
 # !/bin/sh
    #
    # ABCD 2013 checking script

    CURL='curl'
    ABCD__SUPER_SECRET="uggcf://qrirybcre.nccyr.pbz/jjqp/"
    CURL_OPTIONS='--silent'
    $CURL $CURL_OPTIONS `echo -n $ABCD__SUPER_SECRET | tr '[A-Za-z]' '[N-ZA-Mn-za-m]'` | \

    sed -e 's/[^A-Za-z0-9][^A-Za-z0-9]*/\
    /g' | awk ' BEGIN { this_year_count = 0 }
    /2013/ { this_year_occurrences[NR] }
    !/2013/ { ++not_abcd_count }
    END { for (line in this_year_occurrences) {
    ++this_year_count
    }
    if(this_year_count > 1)
    print "Hey, you might want to consider seeing if you can order tickets."
    else
    print "Run this checker again when you are ready to check things again"
    }' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:30:42.373

好的，所以我将简短回答/长回答：

简短回答：当 this_year_count > 1 时，如何修改它以启动 iTunes 播放 osascript 或播放系统哔声等？

代替

> 打印“嘿，您可能想考虑看看是否可以订购门票。”

用你的电话/哔声

我可以从这个脚本发送短信吗？

你可以 如果你有办法在另一个文件中发送 SMS 消息，你可以导入。即它可能，但此脚本中没有任何内容允许您这样做。

长答案：替换

> 打印“嘿，您可能想考虑看看是否可以订购门票。”

和

> osascript -e "告诉应用程序\"iTunes\" 激活"

对于iTu​​nes

或者

> sudo apt-get 哔声

或者

> sudo apt-get mpg123

发出哔声（在我的系统上工作，但我没有使用 mac，你需要检查那个）

至于发送短信

> [如何从外壳发送短信？](https://stackoverflow.com/questions/4043490/how-do-i-send-an-sms-from-a-shell)

会看到你的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:09:17.660

我只是用谷歌搜索了脚本。[http://blog.agilebits.com/2013/04/01/1password-4-mac-wwdc-april-fools/](http://blog.agilebits.com/2013/04/01/1password-4-mac-wwdc-april-fools/)

检查日期和标题。如果您将此作为笑话发布，我承认我爱上了它，但考虑到它是在 4 月 2 日而不是第 1 天发布的，所以有点晚了。

如果这是一个诚实的问题，那么丢弃这个脚本，它不会做你想要它做的事情。

# android - Imagebutton 像 android 中的后退按钮一样工作

> ID：15762733
> 
> 赞同：1
> 
> 时间：2013-04-02T11:16:50.267
> 
> 标签：android

我是 android 新手并在操作栏上工作，因此该操作包含两个 imagebutton 和 textview 这里是操作栏的快照：

![在此处输入图像描述](https://i.stack.imgur.com/mCQ7D.png)

红色标记是 imagebutton 。

所以问题是我们如何才能像默认的android back那样在点击或按下imagebutton时移动到上一个活动或屏幕，或者我已经明确提及它的意图。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:18:47.810

在图像按钮中单击只需添加`finish();`它带您进入以前的活动。

对于**ActionBar**：如果您以下列方式使用它：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);

} 
```

然后您使用以下代码进行先前的活动：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        if (item.getItemId() == android.R.id.home) {
            finish();
        }
        return super.onOptionsItemSelected(item);
    } 
```

检查此[链接](http://developer.android.com/guide/topics/ui/actionbar.html)以获取更多详细信息。

这是图像按钮的完整代码：

```
ImageButton imgBtn = (ImageButton)findViewById(R.id.imgbtn);
        imgBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:19:27.433

只需将 onclicklistener 添加到 ImageButton，然后调用 finish(); 在 onClick() 方法中：

```
ImageButton ib = (ImageButton)findViewById(R.id.button_id);
ib.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        finish();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:25:31.327

我给了你一个应该在操作栏中工作的代码

```
 @Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) 
{
     imageButton=(ImageButton)                     menu.findItem(R.id.overflow).getActionView().findViewById(R.id.imageOverflow);
}
imageButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        finish();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:29:41.617

在图像按钮 onclickListener 中，只需调用 finish() 方法。

ImageButton imagebtn_back = (ImageButton)findViewById(R.id.imageButton1);

imagebtn_back.setOnClickListener(new OnClickListener() {

```
@Override
public void onClick(View v) {
    finish();
} 
```

});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:21:48.800

大多数情况下，**在 Android 应用程序中提供返回按钮是失败或坏主意。**

即使，如果您想实现后退按钮导航，那么您可以实现以下内容：

1.  覆盖[**`onBackKeyPressed()`**](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)并调用`finish()`其中的方法。
2.  `finish()`按钮单击侦听器内的调用方法。

# xamarin.ios - 是否可以在 xamarin 中创建条形图

> ID：15762741
> 
> 赞同：2
> 
> 时间：2013-04-02T11:17:12.303
> 
> 标签：xamarin.ios, xamarin.android, xamarin

冲浪网无法确定 xamarin 是否支持图表。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:22:26.233

Xamarin MonoTouch 框架不包含图表，但请查看我的 OxyPlot 库端口：

[https://github.com/Emasoft/OxyPlot.2DGraphLib.MonoTouch](https://github.com/Emasoft/OxyPlot.2DGraphLib.MonoTouch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:30:57.740

如果您想购买专业的东西，可以查看以下控件：[http](http://www.shinobicontrols.com/shinobicharts/) ://www.shinobicontrols.com/shinobicharts/或[http://www.steema.com/tags/monotouch/](http://www.steema.com/tags/monotouch/)。基本上只是谷歌它“Monotouch图表/图表”。

**编辑**
您还应该查看[https://components.xamarin.com/](https://components.xamarin.com/)。我认为我上面提到的控件在组件商店中，还有其他可能是免费的。此外，如果您采用组件存储路线，那么将它们添加到您的项目应该是一件轻而易举的事，因为 Xamarin Studio（和 Visual Studio）支持/为您执行此操作。

或尝试 [http://infragistics.com/nuclios](http://infragistics.com/nuclios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T23:21:55.620

Oxyplot 图表在 MIT 许可下支持 Xamarin。刚刚测试过了。这令人印象深刻，尽管与图表视图的交互现在似乎不存在。

[http://www.oxyplot.org/](http://www.oxyplot.org/)

[http://oxyplot.codeplex.com/SourceControl/latest#Source/OxyPlot.XamarinIOS/](http://oxyplot.codeplex.com/SourceControl/latest#Source/OxyPlot.XamarinIOS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-09T14:17:32.230

您可以使用同步融合。有许多易于使用的图表和许多其他组件可供尝试的 Xamarin 插件。有钱而且真的很好！有一个社区许可证，因此您可以免费使用它。
[https://www.syncfusion.com/products/xamarin/chart](https://www.syncfusion.com/products/xamarin/chart)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-19T20:03:57.137

对于条形图，[SciChart](https://www.scichart.com)在下面有一个堆积条形图/堆积柱形图演示

*   [Xamarin 堆积条形图](https://www.scichart.com/example/xamarin-stacked-bar-chart-example/)（水平）
*   [堆积柱](https://www.scichart.com/example/xamarin-stacked-column-chart-example/)（垂直）
*   [条形图/柱形图](https://www.scichart.com/example/xamarin-chart-stacked-grouped-column-chart-side-by-side-example/)（垂直）

[![Xamarin 柱形图](https://i.stack.imgur.com/azLHT.png)](https://i.stack.imgur.com/azLHT.png)

*披露，我是 SciChart Xamarin 项目的技术负责人*

# android - 需要确认网络服务不起作用

> ID：15762742
> 
> 赞同：0
> 
> 时间：2013-04-02T11:17:18.497
> 
> 标签：android, web-services, webclient

我正在学习 Android 操作系统以及如何获取和解析由 Web 服务生成的 XML 文件。我最近确实使用[http://www.webservicex.net/进行了测试。](http://www.webservicex.net/)返回的`GetCurrencyCode`文档包括：国家名称、国家代码、货币名称和货币代码。

在编写 Xml.newPullParser() ( [http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html) ) 时，我无法让它工作——观察我不习惯的错误.

之后我再次检查了服务服务器，它现在似乎不起作用。请您确认[http://www.webservicex.net/country.asmx/GetCurrencyCode](http://www.webservicex.net/country.asmx/GetCurrencyCode)返回可视文本（在浏览器中）：

```
System.IO.IOException: There is not enough space on the disk.

   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.FileStream.FlushWrite(Boolean calledFromFinalizer)
   at System.IO.FileStream.Dispose(Boolean disposing)
   at System.IO.Stream.Close()
   at System.IO.StreamWriter.Dispose(Boolean disposing)
   at System.IO.TextWriter.Dispose()
   at Microsoft.CSharp.CSharpCodeGenerator.FromSourceBatch(CompilerParameters options, String[] sources)
   at Microsoft.CSharp.CSharpCodeGenerator.System.CodeDom.Compiler.ICodeCompiler.CompileAssemblyFromSourceBatch(CompilerParameters options, String[] sources)
   at System.CodeDom.Compiler.CodeDomProvider.CompileAssemblyFromSource(CompilerParameters options, String[] sources)
   at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
   at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)
   at System.Xml.Serialization.TempAssembly..ctor(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, String location, Evidence evidence)
   at System.Xml.Serialization.XmlSerializer.FromMappings(XmlMapping[] mappings, Type type)
   at System.Web.Services.Protocols.XmlReturn.GetInitializers(LogicalMethodInfo[] methodInfos)
   at System.Web.Services.Protocols.XmlReturnWriter.GetInitializers(LogicalMethodInfo[] methodInfos)
   at System.Web.Services.Protocols.MimeFormatter.GetInitializers(Type type, LogicalMethodInfo[] methodInfos)
   at System.Web.Services.Protocols.HttpServerType..ctor(Type type)
   at System.Web.Services.Protocols.HttpServerProtocol.Initialize()
   at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing) 
```

这应该是在页面[http://www.webservicex.net/country.asmx?op=GetCurrencyCode](http://www.webservicex.net/country.asmx?op=GetCurrencyCode)的*测试*部分中 按下按钮**Invoke的结果**

 *您能否为此目的推荐一个更可靠的 Web 服务服务器（即学习如何下载和解析 XML 文档）？*

# ios - 如何将按钮的隐藏状态保存为 NSUserDefault？

> ID：15762743
> 
> 赞同：0
> 
> 时间：2013-04-02T11:17:18.577
> 
> 标签：ios, objective-c, delegates, nsuserdefaults, hidden

Bellow 我有一些代码通过 Xcode 中的委托系统简单地隐藏了一个按钮。我相信这一切都有效，但是当我将视图传输回“leveSelector”视图时，委托无效，因此按钮不会显示为未隐藏。因此，我想应用一些`NSUserDefaults`来保存按钮状态，这样当我稍后在游戏中返回“levelComplete”视图时，我希望按钮不被隐藏。

`delegate`在这里，我有我正在使用的系统的代码：

**在这里，我有 levelComplete 代码... .h**

```
#import <UIKit/UIKit.h>
#import "levelComplete.h"
#import "LevelSelector.h"

@interface levelComplete : UIViewController{
  }
 @property (nonatomic, strong) id<CustomDelegate> delegatePpty;

 @end 
```

**.m**

```
@implementation levelComplete
@synthesize delegatePpty;

-(void)someAction
 {
[self.delegatePpty hideUnhidebutton:YES];//Call the delegate method to execute
 }

 - (void)viewDidLoad
   {
     [super viewDidLoad];
     // Do any additional setup after loading the view from its nib.
     [self someAction]; // Here I call my action
   }
@end 
```

在这里，我有 levelSelector 代码...

**。H**

```
 @protocol CustomDelegate <NSObject>
  -(void)hideUnhidebutton:(BOOL)value;
  @end

#import <UIKit/UIKit.h>
#import "levelComplete.h"
#import "LevelSelector.h"

@interface LevelSelector : UIViewController <CustomDelegate>{        

}

@property (nonatomic, strong) UIButton *level1;

@end 
```

**.m**

```
@implementation LevelSelector
@synthesize level1;

-(void)hideUnhidebutton:(BOOL)value
 {
  [self.level1 setHidden:value];

  } 
```

因此，为了澄清，我想在按钮被隐藏为`NSUserDefault`. 在这种情况下，我希望隐藏的按钮称为`level1`。

编辑：感谢所有发布应用您的代码的人工作得很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:19:57.283

您可以以`NSUserDefaults`简单的方式将值保存到：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSNumber numberWithBool:value]
             forKey:@"SomeSensibleKey"]; 
```

您可以使用以下命令检查保存的状态：

```
[[defaults objectForKey:@"SomeSensibleKey"] boolValue] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:58:23.617

Sapi 的回答已经涵盖了您的评论**我将如何加载 NSUserDefaults**

```
BOOL yourBoolValue = YES;

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSNumber numberWithBool:yourBoolValue] forKey:@"YourVariableKey"]; 
```

最后一行已经有了你想要的结果。[NSUserDefaults standardUserDefaults] 是一个单例并且也是持久的，因此您可以在每个上下文中创建它，并具有相同的实例。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
BOOL restoredBoolValue = [[defaults objectForKey:@"YourVariableKey"] boolValue];
[self.level1 setHidden:restoredBoolValue]; 
```

蚂蚁就是这样。您基本上可以将所有内容保存在 NSUserDefaults 中。只需查看[Apple 的参考资料](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:04:04.277

要将布尔值保存到用户默认值，您必须调用 setBool 方法：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setBool:YES forKey:@"ButtonHiddenKey"]; 
```

从用户默认值加载布尔值（在 init 方法中）：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
button.hidden = [defaults boolForKey:@"ButtonHiddenKey"]; 
```

还有消息存储其他类型的变量如setInteger、setFloat等

# php - osclass Cities 下拉菜单基于 Region Select

> ID：15762748
> 
> 赞同：2
> 
> 时间：2013-04-02T11:17:27.123
> 
> 标签：php, javascript, drop-down-menu, osclass

我将 osclass 用于本地分类网站，我面临以下问题。我需要导入 12 个地区和 7000 个城市/村庄。

在 main.php 中，我使用带有字段搜索文本、类别（下拉）、地区（下拉）、城市（下拉）、最高价格（文本）和最低价格（文本）的水平搜索栏

对于地区和城市，我使用 inc.search.php 中的代码

```
<?php $aRegions = Region :: newInstance()->listAll();?>
<?php if (count($aRegions) > 0) {?>
<select name="sRegion" id="sRegion">
<option value="">Select a Region</option>
<?php foreach ($aRegions as $region) {?>
<option  value="<?php echo $region['s_name'];?>"><?php echo $region['s_name'];?>  </option>
<?php } ?>
</select>
<?php } ?>
<?php $aCities = City::newInstance()->listAll(); ?>
<?php if(count($aCities) > 0 ) { ?>
<select name="sCity" id="sCity">
<option value="">Select a city</option>
<?php foreach($aCities as $City) { ?>
<option value="<?php echo $City['s_name'] ; ?>"><?php echo $City['s_name'] ; ?></option>
<?php }?>
</select>
<?php }?> 
```

问题是上面的代码在页面加载时会带上所有城市，并没有检查先选择哪个地区。这意味着当页面加载时，城市下拉列表将包含 7000 个城市/村庄。

我试图删除线条

```
<?php foreach($aCities as $City) { ?>
<option value="<?php echo $City['s_name'] ; ?>"><?php echo $City['s_name'] ; ?></option>
<?php }?> 
```

所以当页面加载时，城市下拉菜单是空的，但我不知道如何用城市填充下拉菜单取决于区域选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:12:22.873

此处描述了如何在搜索表单中使用区域/城市的解决方案[http://forums.osclass.org/jobs/cities-dropdown-based-on-region-select/](http://forums.osclass.org/jobs/cities-dropdown-based-on-region-select/)

# java - 如何使用 Eclipse 创建通用启动配置？

> ID：15762751
> 
> 赞同：16
> 
> 时间：2013-04-02T11:17:34.383
> 
> 标签：java, eclipse, maven, run-configuration, launch-configuration

我的 Eclipse 中有一个运行配置。在我的项目中，我们有两个分支：DEV 和 STABLE。我想创建一个运行配置来构建我的项目，无论它位于哪个分支。

现在，当我`Base directory`使用这两个变量之一进行设置时：`${project_path}`，，`${build_project}`我面临这个错误：

> 基本目录不存在或无法读取。

这有效：`${workspace_loc:/my-project-dev-branch}`但与特定分支相关联。我必须复制这个配置来构建稳定的分支。

*   那么，如何查看 , 的实际内容`${project_path}`呢`${build_project}`？
*   或者我应该使用哪个变量来获得这个结果： `${workspace_loc:/${eclipse_variable_with_project_name}}`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T11:35:24.840

我不确定我是否遵循您的分支在工作区中的表示方式，但是

*   `${project_path}`表示相对于您的工作空间的路径
*   `${build_project}`只会在实际构建期间设置（而不是在程序执行期间）

根据您想要使用的描述`${project_loc}`。

**注意：**在启动运行配置之前，必须在透视项目中选择项目。否则，您将收到如下截图所示的消息：

![带有文本“Launching MY RUN CONFIGURATION”的警报框弹出图片遇到了问题。 变量引用空选择：${project_loc}'](https://i.stack.imgur.com/vsfXf.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-19T12:32:20.283

由于您已经通过 Eclipse Preferences 中的 Run Debug->String Substitution 创建了一个[String Substitution](http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Frun-debug%2Fref-string_substitution.htm)变量来处理单独的路径，您可以：

1.  创建一个变量，例如`branch_loc`，其值为`${workspace_loc:/my-project-dev-branch}`
2.  如果路径仅略有不同，例如分支名称，那么您可以创建一个`branch`具有值的变量，例如`dev`，然后`branch_loc`使用`${workspace_loc}\${branch}`

然后`${branch_loc}`为您使用 Maven 基本目录。

最好让所有分支都使用相同的路径，git 和 mercurial 允许您这样做。然后你可以使用`${project_loc}`你的 Maven 基础目录。因为`project_loc`如果您指定项目的项目名称，例如`${project_loc:MY_PROJECT_NAME}`，则不需要您选择项目即可工作。

如果您右键单击该项目，然后选择“属性”，您可以`${project_path}`通过查看路径查看将解析的内容以及`${project_loc}`查看位置将解析的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:34:18.137

首先，如果你使用 git 作为版本控制系统：不要两次 checkout 项目，而只是在单个项目中的分支之间切换。Git 就是为此而设计的，它可以在几秒钟内完成。这样你的问题就会完全消失。

如果这不是一个选项，也许将运行配置置于版本控制之下是一种替代方法。设置**共享文件**选项，如第一个突出显示所示： ![在此处输入图像描述](https://i.stack.imgur.com/lZBJo.png)

然后，您可以通过在相应项目中选择它来运行运行配置（因为那实际上是一个文件）并通过上下文菜单启动它。但是，我从未尝试过两次检查*相同的启动配置。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-15T06:11:19.757

您可以通过以下方式设置基本目录：

```
${project_loc:${project_name}} 
```

您可以从 variables 选项中找到上述变量。

您也可以在目标中设置 mvn 命令，如下例所示：

```
clean install -PautoInstallPackage -Padobe-public -DskipTests 
```

# c - 在 Linux 中独占打开一个设备文件

> ID：15762752
> 
> 赞同：17
> 
> 时间：2013-04-02T11:17:40.070
> 
> 标签：c, linux, posix, flock

有哪些方法可以专门打开设备文件（例如，显示帧缓冲区）？

[信息：我已经知道flock() 和朋友，它们只有在其他应用程序也在使用它时才会起作用（换句话说：open() 会成功，但如果flock() 已经锁定，则会失败）--> 但是仍然可以使用从 open() 检索到的设备句柄来写入显示器..]

如果我想对设备文件强制执行此类独占访问，该怎么办？这样的强制执行怎么可能？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-02-21T13:59:51.313

从[fcntl(2)](http://man7.org/linux/man-pages/man2/fcntl.2.html)：

> 要使用强制锁定，必须在包含要锁定的文件的文件系统和文件本身上都启用强制锁定。

...另外，您需要`CONFIG_MANDATORY_FILE_LOCKING`在内核中启用。

> 使用 mount(8) 的“-o mand”选项或 mount(2) 的 MS_MANDLOCK 标志在文件系统上启用强制锁定。通过禁用文件的组执行权限并启用 set-group-ID 权限位（请参阅 chmod(1) 和 chmod(2)），对文件启用强制锁定。
> 
> POSIX 未指定强制锁定。其他一些系统也支持强制锁定，尽管如何启用它的细节因系统而异。

因此，当您请求`posix`兼容的解决方案时，答案是：**不**，POSIX 标准中没有这样的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T16:40:54.850

要打开设备，您应该在 linux 中使用**open 系统调用**并检查可用设备的列表，例如 /dev/ttyUSB0 或 /dev/ttyS0 等，然后打开它，您将获得一个要写入和读取设备的描述符是你打开一个设备进行通信。要了解更多详情，请点击链接： [http ://www.firmcodes.com/lower-level-file-handling-in-linux/](http://www.firmcodes.com/lower-level-file-handling-in-linux/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T00:23:18.970

尝试[lockf()](http://man7.org/linux/man-pages/man3/lockf.3.html)：在打开的文件上应用、测试或删除 POSIX 锁

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T00:15:45.360

如果您想获得对设备的独占访问权限，请在`/var/lock`. 可以创建锁定文件的进程可以`open("my_device.lock", O_CREAT|O_EXCL, 0777)`访问设备，其他进程必须等待。使用设备完成该过程后，它会关闭文件。

这种锁定只是建议性的，并不能保证没有其他进程（您不知道）访问该设备。

# jquery - 如果点击然后 load();?

> ID：15762755
> 
> 赞同：0
> 
> 时间：2013-04-02T11:17:48.343
> 
> 标签：jquery, menu

我有这种“某种”伪代码：

```
if($('#menuOption1').click()){
  $('#mainContent').load('optionContent1.html #optionContent1');
}
else if($('#menuOption2').click()){
  $('#mainContent').load('optionContent2.html #optionContent2');
}
else if($('#menuOption3').click()){
  $('#mainContent').load('optionContent3.html #optionContent3');
} 
```

这是不言自明的。我有一个包含 3 个选项（#menuOption*）的菜单，当我单击其中一个选项时，它应该是 load(); 它是对应的 html 文件 (optionContent*.html - #optionContent*) 到我的 index.html (#mainContent) 中。代码更正好吗？

佩德罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:20:50.360

您应该将代码添加到单击事件处理程序中，如下所示：

```
$('#menuOption1').click(function(){
  $('#mainContent').load('optionContent1.html #optionContent1');
}); 
```

ETC...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:20:57.687

click 返回一个 jquery 对象，而不是一个布尔值，你真正想要的是：

```
$('#menuOption1').click(function(e) {
    $('#mainContent').load('optionContent1.html #optionContent1');
    return false;
});

$('#menuOption2').click(function(e) {
    $('#mainContent').load('optionContent2.html #optionContent2');
    return false;
});

$('#menuOption3').click(function(e) {
    $('#mainContent').load('optionContent3.html #optionContent3');
    return false;
}); 
```

取决于您的 HTML 标记，我相信您也可以优化 Javascript 代码

# cassandra - 使用 Astyanax 对列进行范围扫描

> ID：15762759
> 
> 赞同：2
> 
> 时间：2013-04-02T11:18:12.123
> 
> 标签：cassandra, astyanax

我的列族将数据存储在列名中，我想使用 Astyanax 对列执行范围查询。谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:38:04.927

我同意 abhi，这正是 Playorm 实现它的方式。[您可以在https://github.com/deanhiller/playorm/blob/master/src/main/java/com/alvazan/orm/layer9z/spi/db/cassandra/Cas](https://github.com/deanhiller/playorm/blob/master/src/main/java/com/alvazan/orm/layer9z/spi/db/cassandra/CassandraSession.java) ​​sandraSession.java 看到 columnSlice() API 的代码

此外，如果你使用 Playorm for Cassandra，你可以只使用它的 ColumnSlice API。该示例在[https://github.com/deanhiller/playorm/blob/master/src/test/java/com/alvazan/test/TestColumnSlice.java给出](https://github.com/deanhiller/playorm/blob/master/src/test/java/com/alvazan/test/TestColumnSlice.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:13:37.990

[这里](https://github.com/Netflix/astyanax/blob/master/astyanax-thrift/src/test/java/com/netflix/astyanax/thrift/ThriftKeyspaceImplTest.java)有很多关于范围查询的示例

样品一

```
keyspace.prepareQuery(CF_TIME_UUID)
    .getKey(rowKey)
    .withColumnRange(
        new RangeBuilder()
            .setLimit(10)
            .setStart(TimeUUIDUtils.getTimeUUID(0))
            .setEnd(TimeUUIDUtils
                .getTimeUUID(Long.MAX_VALUE >> 8))
            .build()).execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:27:19.657

实际上，如果您的最终目标是取出实体，您也可以使用 PlayOrm 查询语言。

# android - ListView 内的 TableLayout

> ID：15762760
> 
> 赞同：0
> 
> 时间：2013-04-02T11:18:13.587
> 
> 标签：android, listview, tablelayout

我的 android 应用程序中有一个页面，其中有一个滑出菜单和一些需要在主屏幕中显示的数据。滑出菜单具有所需的菜单选项。

主页是 ListView 格式。我想要这个 ListView 中的 TableLayout 格式布局。问题是当我将布局更改为 TableLayout 时，它与我的 java 活动文件混淆了。

我想在此页面的主屏幕上以表格格式显示从外部源提取的数据。

随附 XML 和 Java 活动文件。

提前致谢。

XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent" 
android:layout_weight="1"
android:background="@drawable/galaxy">

<!-- Menu Panel -->
<RelativeLayout
       android:id="@+id/menuPanel"
       android:layout_height="match_parent"
       android:layout_width="wrap_content"
       android:gravity="right"
       android:background="@drawable/grey"
       android:orientation="vertical" >

        <TextView
            android:id="@+id/menu_title_1"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="0dp" 
            android:paddingLeft="15dp"             
            android:gravity="center_vertical"
            android:background="@drawable/grey"
            android:textStyle="bold"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@android:color/black"
            android:text="MAIN  MENU">     
        </TextView>

        <View
            android:id="@+id/menu_item_divider_1"
            android:layout_width="fill_parent"
            android:layout_height="0.5dp"
            android:layout_marginLeft="0dp"
            android:layout_marginRight="0dp"
            android:layout_below="@+id/menu_title_1"
            android:background="#000000"/>

        <Button
            android:id="@+id/readall"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_marginLeft="0dp"             
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:layout_below="@+id/menu_item_divider_1"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:text="All Parameters"/>     

          <Button
            android:id="@+id/param1"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_marginLeft="15dp"             
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:layout_below="@+id/readall"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:text="Parameter 1"/>    

             <Button
            android:id="@+id/param2"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_marginLeft="15dp"             
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:layout_below="@+id/param1"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:text="Parameter 2"/>    

             <Button
            android:id="@+id/param3"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_marginLeft="15dp"             
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:layout_below="@+id/param2"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:text="Parameter 3"/>    

             <Button
            android:id="@+id/dtc"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_marginLeft="0dp"             
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:layout_below="@+id/param3"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:text="D.T.C."/>    

             <Button
            android:id="@+id/logout"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_marginLeft="0dp"             
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:layout_below="@+id/dtc"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:text="Log Out"/>    

        </RelativeLayout>

   <!-- Sliding Panel -->     
    <LinearLayout
            android:id="@+id/slidingPanel"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="left"
            android:orientation="vertical"
            android:background="@drawable/grey" >

            <RelativeLayout
                android:id="@+id/header"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                android:background="@drawable/black" >

                <View
                    android:id="@+id/header_vertical_divider_1"
                    android:layout_width="2dp"
                    android:layout_height="fill_parent"
                    android:layout_alignParentTop="true"
                    android:layout_marginLeft="15dp"
                    android:layout_toRightOf="@+id/menuViewButton"
                    android:background="@drawable/grey" />

                    <ImageView
                        android:id="@+id/menuViewButton"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_centerVertical="true"
                        android:layout_marginLeft="15dp"
                        android:clickable="true"
                        android:contentDescription="Main Menu"
                        android:textColor="#000000"
                        android:src="@drawable/icon"
                        android:visibility="visible" />

                    <TextView
                        android:id="@+id/textView1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:layout_marginLeft="22dp"
                        android:layout_toRightOf="@+id/header_vertical_divider_1"
                        android:text="ECU Description"
                        android:textAppearance="?android:attr/textAppearanceLarge"
                        android:textColor="#ffffff" />

            </RelativeLayout>

            <View
                 android:id="@+id/dividerHeaderBottom"
                 android:layout_width="fill_parent"
                 android:layout_height="1dp"
                 android:background="#414141" ></View>
             <ListView
                android:id="@+id/list"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:divider="#000000"
                android:dividerHeight="0.5dp"
                android:background="@drawable/galaxy"         >

            </ListView>

    </LinearLayout>

             <LinearLayout
                 android:id="@+id/footer"
                 style="@android:style/ButtonBar"
                 android:layout_width="fill_parent"
                 android:layout_height="50dp"
                 android:layout_alignParentBottom="true"
                 android:layout_gravity="bottom|center"
                 android:background="@drawable/black"
                 android:orientation="horizontal" >

           <EditText
                android:id="@+id/DefUid"
                android:layout_width="0px"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView2"
                android:layout_weight="0.50"
                android:digits="0123456789."
                android:hint="IP Address"
                android:maxLength="15"
                android:maxWidth="350dip"
                android:singleLine="true"
                android:windowSoftInputMode="adjustNothing" >

            </EditText>

            <EditText
                android:id="@+id/DefUid"
                android:layout_width="0px"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView2"
                android:layout_weight="0.20"
                android:maxWidth="80dip"
                android:hint="Port"
                android:digits="0123456789"
                android:maxLength="4"
                android:singleLine="true" >

            </EditText>

                     <Button
                        android:id="@+id/conn"
                        android:layout_width="0px"
                        android:layout_height="40dp"
                        android:layout_weight="0.15"
                        android:text="C"/>

                   <Button
                        android:id="@+id/disc"
                        android:layout_width="0px"
                        android:layout_height="40dp"
                        android:layout_weight="0.15"
                        android:text="D"/>

                </LinearLayout>
</FrameLayout> 
```

Java 活动文件

```
public class LayerStack extends Activity 
{

//Declare
private LinearLayout slidingPanel;
private boolean isExpanded;
private DisplayMetrics metrics; 
private ListView listView;
private RelativeLayout headerPanel;
private RelativeLayout menuPanel;
private int panelWidth;
private ImageView menuViewButton;
private static final int HIDE_TOOLBARS = 0;
private static final int SHOW_TOOLBARS = 1;
private static final int TOGGLE_TOOLBARS = 2;
Handler handler;
LinearLayout toolbarTop, toolbarBottom;

FrameLayout.LayoutParams menuPanelParameters;
FrameLayout.LayoutParams slidingPanelParameters;
LinearLayout.LayoutParams headerPanelParameters ;
LinearLayout.LayoutParams listViewParameters;

//@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState)
{   
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page7);
    //ImageView myImage = (ImageView) findViewById(R.id.menuPanel);
    //myImage.setAlpha(100);
    // Get references to the elements in the layout

    //Initialize
    metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    panelWidth = (int) ((metrics.widthPixels)*0.50);

    headerPanel = (RelativeLayout) findViewById(R.id.header);
    headerPanelParameters = (LinearLayout.LayoutParams) headerPanel.getLayoutParams();
    headerPanelParameters.width = metrics.widthPixels;
    headerPanel.setLayoutParams(headerPanelParameters);

    menuPanel = (RelativeLayout) findViewById(R.id.menuPanel);
    menuPanelParameters = (FrameLayout.LayoutParams) menuPanel.getLayoutParams();
    menuPanelParameters.width = panelWidth;
    menuPanel.setLayoutParams(menuPanelParameters);

    slidingPanel = (LinearLayout) findViewById(R.id.slidingPanel);
    slidingPanelParameters = (FrameLayout.LayoutParams) slidingPanel.getLayoutParams();
    slidingPanelParameters.width = metrics.widthPixels;
    slidingPanel.setLayoutParams(slidingPanelParameters);

    listView = (ListView) findViewById(R.id.list);
    listViewParameters = (LinearLayout.LayoutParams) listView.getLayoutParams();
    listViewParameters.width = metrics.widthPixels;
    listView.setLayoutParams(listViewParameters);

    //Slide the Panel   
    menuViewButton = (ImageView) findViewById(R.id.menuViewButton);
    menuViewButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if(!isExpanded)
            {
                isExpanded = true;                                              

                //Expand
                new ExpandAnimation(slidingPanel, panelWidth,
                Animation.RELATIVE_TO_SELF, 0.0f,
                Animation.RELATIVE_TO_SELF, 0.50f, 0, 0.0f, 0, 0.0f);   

                Button b2 = (Button) findViewById(R.id.readall);
                b2.setOnClickListener(new View.OnClickListener()
                {

                    @Override
                    public void onClick(View v) 
                    {
                        Intent i = new Intent(LayerStack.this,AppActivity8.class);
                        startActivity(i);
                        finish();

                    }
                });
               Button b1 = (Button) findViewById(R.id.logout);
                b1.setOnClickListener(new View.OnClickListener()
                {

                    @Override
                    public void onClick(View v) 
                    {
                        new AlertDialog.Builder(LayerStack.this)
                        .setTitle("Log Out Confirmation")
                        .setMessage("Are you sure you want to log out?")
                        .setNegativeButton("No", null)
                        .setPositiveButton("Yes", new DialogInterface.OnClickListener()
                        {

                            @Override
                            public void onClick(DialogInterface arg0,int arg1)
                            {
                                Intent i = new Intent(LayerStack.this,AppActivity4.class);
                                startActivity(i);
                                finish();

                            }

                        }).create().show();

                    }
                });
            }
            else
            {
                isExpanded = false;
                //Collapse
                new CollapseAnimation(slidingPanel,panelWidth,
                TranslateAnimation.RELATIVE_TO_SELF, 0.50f,
                TranslateAnimation.RELATIVE_TO_SELF, 0.0f, 0, 0.0f, 0, 0.0f);

            }

        }
    });

}       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:03:40.227

我改用 MultiColumn ListView。

# asp.net - 安装 .net 4.5 自定义表单后，身份验证中断

> ID：15762764
> 
> 赞同：4
> 
> 时间：2013-04-02T11:18:24.887
> 
> 标签：asp.net, .net, forms-authentication

我刚刚从 VS2010 升级到 VS 2012，并且在使用 FormsAuthentication 时遇到了一些问题。

我有一些旧代码创建了一个自定义身份验证 cookie 来在其中存储 som 信息：

```
 public static int SetAuthCookie<T>(this HttpResponse responseBase, string name, bool rememberMe, T userData)
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();

            var cookie = FormsAuthentication.GetAuthCookie(name, rememberMe);
            var ticket = FormsAuthentication.Decrypt(cookie.Value);

            var newTicket = new FormsAuthenticationTicket(ticket.Version,
                                                          ticket.Name,
                                                          ticket.IssueDate,
                                                          ticket.Expiration,
                                                          ticket.IsPersistent,
                                                          serializer.Serialize(userData),
                                                          ticket.CookiePath);

            var encodedTicket = FormsAuthentication.Encrypt(newTicket);

            cookie.Value = encodedTicket;
            responseBase.Cookies.Add(cookie);

            return encodedTicket != null ? encodedTicket.Length : 0;
        }
    } 
```

升级到 .Net 4.5 之后，HttpContext.Current.Request.IsAuthenticated 始终为空。我已经看到在 .Net 4.5 中有一种新的身份验证方法，但我宁愿不使用它，因为我将无法从 .Net 4.0 升级生产环境。使用自定义身份验证 cookie 时有没有办法设置身份验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:22:34.523

我必须自己在 Global.asax 中设置当前用户：

```
 private void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    HttpCookie cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
    if (cookie != null)
    {
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookie.Value);
        HttpContext.Current.User = new System.Security.Principal.GenericPrincipal(new FormsIdentity(ticket), new string[0]);
    }
} 
```

为什么这在 .Net 4.5 中发生了变化，我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:30:51.047

听起来您正面临以下问题之一：

[http://social.microsoft.com/Forums/en-US/Offtopic/thread/1791c5e3-4087-4e92-a460-51c5c4221f49](http://social.microsoft.com/Forums/en-US/Offtopic/thread/1791c5e3-4087-4e92-a460-51c5c4221f49)

或更简单的配置：

[http://forums.asp.net/t/1835788.aspx/1](http://forums.asp.net/t/1835788.aspx/1)

或损坏的 web.config 如下所示：

[http://forums.asp.net/t/1852961.aspx/1](http://forums.asp.net/t/1852961.aspx/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T16:30:31.740

machineKey 在 .NET 4.5 中的处理方式不同。您可以将 compatibilityMode="Framework20SP1" 添加到您的配置中：

（以上是 2.0 / 4.0 应用程序的默认值，但不是 4.5 应用程序的默认值，因此必须在 4.5 应用程序中显式设置。）

参考：[http ://forums.asp.net/t/1835788.aspx/1](http://forums.asp.net/t/1835788.aspx/1)

# windows-7 - 在 Win7 中可以减慢虚拟机的速度（通过减少 CPU 等）

> ID：15762766
> 
> 赞同：0
> 
> 时间：2013-04-02T11:18:26.840
> 
> 标签：windows-7, internet-explorer-8, virtual-pc

我正在尝试使用 IE8 来测试一些客户的慢速机器。MS提供的虚拟PC机可以慢吗？我确实只找到了如何减少 RAM 而不是 CPU。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T01:56:42.430

在选项中，您可以选择在所有 VPC 实例之间平均分配 CPU 时间，而不是以最大速度运行活动 VPC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T06:01:12.900

[不，由于虚拟机的工作方式](http://blogs.msdn.com/b/virtual_pc_guy/archive/2007/05/14/slowing-down-virtual-machines.aspx)，这是不可能的。由于虚拟机直接在处理器上运行，因此不能减慢速度。您唯一的选择是在执行处理器仿真的虚拟机上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T14:35:55.377

Oracle 的 VirtualBox 可以满足您的需求。在主界面中，单击设置 > 系统 > 处理器并将执行上限设置为（例如）50%。效果很好，除了整个虚拟机变慢（不仅仅是像 IE 这样的特定应用程序）。

# javascript - JavaScript 数学，四舍五入到小数点后两位

> ID：15762768
> 
> 赞同：488
> 
> 时间：2013-04-02T11:18:30.403
> 
> 标签：javascript, math

我有以下 JavaScript 语法：

```
var discount = Math.round(100 - (price / listprice) * 100); 
```

这四舍五入为整数。如何返回两位小数的结果？

* * *

## 回答 #1

> 赞同：899
> 
> 时间：2013-04-02T11:19:49.260

**注意 - 如果 3 位精度很重要，请参阅编辑 4**

```
var discount = (price / listprice).toFixed(2); 
```

toFixed 将根据超过 2 位小数的值向上或向下舍入。

示例：http: [//jsfiddle.net/calder12/tv9HY/](http://jsfiddle.net/calder12/tv9HY/)

文档：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed)

**编辑**- 正如其他人所提到的，这会将结果转换为字符串。为了避免这种情况：

```
var discount = +((price / listprice).toFixed(2)); 
```

**编辑 2** - 正如评论中还提到的，此函数在某些精度上失败，例如，在 1.005 的情况下，它将返回 1.00 而不是 1.01。如果这种程度的准确性很重要，我找到了这个答案：[https](https://stackoverflow.com/a/32605063/1726511) ://stackoverflow.com/a/32605063/1726511这似乎适用于我尝试过的所有测试。

虽然需要进行一个小的修改，上面链接的答案中的函数在四舍五入时会返回整数，因此例如 99.004 将返回 99 而不是 99.00，这不适合显示价格。

**编辑 3** - 似乎在实际返回时 toFixed 仍然搞砸了一些数字，这个最终编辑似乎有效。哎呀，这么多返工！

```
var discount = roundTo((price / listprice), 2);

function roundTo(n, digits) {
  if (digits === undefined) {
    digits = 0;
  }

  var multiplicator = Math.pow(10, digits);
  n = parseFloat((n * multiplicator).toFixed(11));
  var test =(Math.round(n) / multiplicator);
  return +(test.toFixed(digits));
} 
```

请参阅此处的小提琴示例：[https ://jsfiddle.net/calder12/3Lbhfy5s/](https://jsfiddle.net/calder12/3Lbhfy5s/)

**编辑 4** - 你们要杀了我。编辑 3 在负数上失败，没有深入研究为什么在进行舍入之前将负数变为正数更容易，然后在返回结果之前将其返回。

```
function roundTo(n, digits) {
    var negative = false;
    if (digits === undefined) {
        digits = 0;
    }
    if (n < 0) {
        negative = true;
        n = n * -1;
    }
    var multiplicator = Math.pow(10, digits);
    n = parseFloat((n * multiplicator).toFixed(11));
    n = (Math.round(n) / multiplicator).toFixed(digits);
    if (negative) {
        n = (n * -1).toFixed(digits);
    }
    return n;
} 
```

小提琴：[https ://jsfiddle.net/3Lbhfy5s/79/](https://jsfiddle.net/3Lbhfy5s/79/)

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2014-04-10T01:32:52.937

如果您使用一元加号将字符串转换[为 MDN 上记录](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Unary_plus)的数字。

例如：`+discount.toFixed(2)`

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2015-03-17T13:58:46.413

函数 Math.round() 和 .toFixed() 旨在四舍五入到最接近的整数。处理小数并使用 Math.round() 的“乘除”方法或 .toFixed() 的参数时，您会得到不正确的结果。例如，如果您尝试使用 Math.round(1.005 * 100) / 100 对 1.005 进行舍入，那么您将得到 1 的结果，而使用 .toFixed(2) 将得到 1.00，而不是得到 1.01 的正确答案。

您可以使用以下方法解决此问题：

```
Number(Math.round(100 - (price / listprice) * 100 + 'e2') + 'e-2'); 
```

添加 .toFixed(2) 以获得您想要的两位小数。

```
Number(Math.round(100 - (price / listprice) * 100 + 'e2') + 'e-2').toFixed(2); 
```

您可以创建一个为您处理舍入的函数：

```
function round(value, decimals) {
    return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);
} 
```

示例： [https ://jsfiddle.net/k5tpq3pd/36/](https://jsfiddle.net/k5tpq3pd/36/)

**另类**

您可以使用原型向 Number 添加舍入函数。我不建议在此处添加 .toFixed() ，因为它会返回字符串而不是数字。

```
Number.prototype.round = function(decimals) {
    return Number((Math.round(this + "e" + decimals)  + "e-" + decimals));
} 
```

并像这样使用它：

```
var numberToRound = 100 - (price / listprice) * 100;
numberToRound.round(2);
numberToRound.round(2).toFixed(2); //Converts it to string with two decimals 
```

示例 [https://jsfiddle.net/k5tpq3pd/35/](https://jsfiddle.net/k5tpq3pd/35/)

资料来源：[http ://www.jacklmoore.com/notes/rounding-in-javascript/](http://www.jacklmoore.com/notes/rounding-in-javascript/)

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-04-02T11:33:19.887

要获得两位小数的结果，您可以这样做：

```
var discount = Math.round((100 - (price / listprice) * 100) * 100) / 100; 
```

要四舍五入的值乘以 100 以保留前两位数，然后我们除以 100 得到实际结果。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2017-02-21T13:22:01.160

我找到的最好和简单的解决方案是

```
function round(value, decimals) {
 return Number(Math.round(value+'e'+decimals)+'e-'+decimals);
}   
round(1.005, 2); // 1.01 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2013-04-02T11:22:24.717

尝试使用`discount.toFixed(2);`

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2017-04-21T02:14:39.223

我认为我见过的最好的方法是乘以 10 的位数的幂，然后做一个 Math.round，最后除以 10 的位数。这是我在打字稿中使用的一个简单函数：

```
function roundToXDigits(value: number, digits: number) {
    value = value * Math.pow(10, digits);
    value = Math.round(value);
    value = value / Math.pow(10, digits);
    return value;
} 
```

或普通的javascript：

```
function roundToXDigits(value, digits) {
    if(!digits){
        digits = 2;
    }
    value = value * Math.pow(10, digits);
    value = Math.round(value);
    value = value / Math.pow(10, digits);
    return value;
} 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2014-11-30T16:23:12.403

接受答案的一个小变化。 `toFixed(2)`返回一个字符串，你总是会得到两位小数。这些可能是零。如果您想抑制最后的零，只需执行以下操作：

```
var discount = + ((price / listprice).toFixed(2)); 
```

编辑：我刚刚发现了 Firefox 35.0.1 中的一个错误，这意味着上面可能会给 NaN 一些值。
我已将代码更改为

```
var discount = Math.round(price / listprice * 100) / 100; 
```

这给出了最多两位小数的数字。如果你想要三个，你可以乘除以 1000，以此类推。
OP 始终需要两位小数，但如果 toFixed() 在 Firefox 中被破坏，则需要先修复。
见[https://bugzilla.mozilla.org/show_bug.cgi?id=1134388](https://bugzilla.mozilla.org/show_bug.cgi?id=1134388)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-02-13T00:59:10.520

**最快的方式**- 比 toFixed() 更快：

## 两个小数

```
x      = .123456
result = Math.round(x * 100) / 100  // result .12 
```

* * *

## 三个小数

```
x      = .123456
result = Math.round(x * 1000) / 1000      // result .123 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-25T04:56:48.677

```
 function round(num,dec)
    {
      num = Math.round(num+'e'+dec)
      return Number(num+'e-'+dec)
    }
      //Round to a decimal of your choosing:
    round(1.3453,2) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-13T14:33:36.490

这是一个工作示例

```
var value=200.2365455;
result=Math.round(value*100)/100    //result will be 200.24 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-05T16:02:01.060

要处理四舍五入到任何小数位，一个具有 2 行代码的函数就足以满足大多数需求。这是一些可以使用的示例代码。

```
 var testNum = 134.9567654;
    var decPl = 2;
    var testRes = roundDec(testNum,decPl);  
    alert (testNum + ' rounded to ' + decPl + ' decimal places is ' + testRes);

    function roundDec(nbr,dec_places){
        var mult = Math.pow(10,dec_places);
        return Math.round(nbr * mult) / mult;
    } 
```

# android - C 代码中的 Android NDK 和外部变量

> ID：15762769
> 
> 赞同：3
> 
> 时间：2013-04-02T11:18:33.870
> 
> 标签：android, c, android-ndk, extern

我有一个库，我想自定义它的工作（我的意思是用我的外部程序替换库的主要部分，这样我就可以重新排序库函数的调用），为此我不得不将一些静态变量更改为`extern`变量所以图书馆和我的程序可以同时处理它们。

我的程序在我的 Linux 台式机上运行时运行良好，但是当我尝试使用 NDK 将其移植到 Android 时，由于`extern`关键字 .

所以，我想知道是否有一种关于 Android.mk 或替代使用`extern`关键字的方法来使事情正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T06:45:26.183

你得到一个“未定义的引用”，因为`extern`它不是一个变量定义，只是一个声明。这意味着您必须`extern`在代码的其他地方有一个非声明，否则编译器不会为您的变量分配符号。

至于替代方案，不，`extern`变量是在 C 中跨多个目标文件拥有全局变量的唯一方法。

如果您只需要同一个对象文件中的全局变量，您可以使用`static`这样符号就不会导出到其他对象。

# metadata - 如何在 windows phone 上获取图片元数据？

> ID：15762771
> 
> 赞同：0
> 
> 时间：2013-04-02T11:18:44.117
> 
> 标签：metadata, windows-phone, latitude-longitude, image

我选择了一张带有 PhotoChooserTask 的图片，我想从这张图片中获取元数据（经度、纬度、设备等）。我怎样才能做到这一点 ？

我的代码：

```
 void photochoosertask_Completed(object sender, PhotoResult e)
    {
        BitmapImage bmp = new BitmapImage();
        bmp.SetSource(e.ChosenPhoto);
        im.Source = bmp;

        //get metadatas ?
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:16:37.260

如果您碰巧将图像上传到可以访问完整 .NET Framework 的服务，您还可以使用 BitmapMetadata 类 - [http://msdn.microsoft.com/en-us/library/ms619225.aspx](http://msdn.microsoft.com/en-us/library/ms619225.aspx) .

# php - 关闭浏览器后如何在 Chrome 中访问 Cookie

> ID：15762776
> 
> 赞同：1
> 
> 时间：2013-04-02T11:18:58.040
> 
> 标签：php, magento, cookies

当我关闭我的 chrome 浏览器时，我遇到了一个问题，它不会在我使用打印信息的位置显示我的 cookie 信息`$_COOKIE`

我将 Cookie 设置为 30 天，这里是用于设置 cookie 的代码：

```
setcookie("cookie[".$_product->getSku()."]","".$_product->getSku()."",time()+2592000,'/','new.domain.com',true); 
```

我的网站是安全的，所以我设置`true`为最后一个参数

如果我没有关闭浏览器，它会显示正确的 cookie 信息，但是当 O 关闭我的浏览器并再次访问时，它不会显示我在 cookie 中设置的信息。

但是当我显示 cookie 信息时，它会显示之前设置的 cookie。

我还将 chrome 的设置设置为未选中该选项，因此当我关闭浏览器时，它也不会从 chrome 浏览器设置中删除我的 cookie。

即使我关闭浏览器，cookie 在 FireFox 中也能正常工作，但我不知道 chrome 出现了什么问题，所以如果有人遇到过这类问题，请告诉我我能做些什么来解决这个问题

注意：我还设置了 cookie 的过期时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:39:03.597

奇怪的是它可以在 Firefox 中运行。我假设您的 Chrome 安装是最新的！？您是否尝试过使用 setcookie() 省略路径和域参数来查看是否会提醒 Chrome 中的行为？

# php - mysql插入js数组创建的textareas

> ID：15762781
> 
> 赞同：0
> 
> 时间：2013-04-02T11:19:18.843
> 
> 标签：php, javascript, jquery, mysql, for-loop

我有一个页面，用户可以在其中添加嵌套在 div 中的动态创建的文本区域。

我正在尝试插入添加的文本区域

我遇到的问题是，如果我添加 3 个文本区域，然后删除第二个，然后提交提交的文本区域的数量为 2，但两个区域的 id 为 1 和 3，当我尝试使用 for 循环添加第二个文本区域时没有价值

除了 for 循环，我还能如何将发布的文本区域插入到数据库中。

继承人代码php插入代码：

```
<?
$page_ref="170";
$template_ref="15";  
if($_SERVER['REQUEST_METHOD'] == "POST") 
{       
    mysql_query("DELETE FROM site_content WHERE page_ref='$page_ref' AND template_ref='$template_ref' AND box_type='text'");
    $q=count($_POST["textarea"])+1; 
    for($m=1; $m<$q;$m++) 
        {           
            $left=$_POST["left"][$m];
            $top=$_POST["top"][$m];
            $height=$_POST["height"][$m];
            $width=$_POST["width"][$m];
            $text=addslashes($_POST["textarea"][$m]);       
            $j=$m+1;
            $drag_id++;
            $box_type=$_POST['box_type'][$m];
            $box_id=$_POST['id'][$m];
            mysql_query("INSERT INTO site_content(page_ref, template_ref, content, box_id, box_type, box_top, box_left, box_width, box_height)VALUES('$page_ref','$template_ref','$text','$box_id','$box_type','$top','$left','$width','$height')");                
        }         
}
?> 
```

javascript:

```
function NewTextArea(id) {
    id = id + i;
    var newdiv = document.createElement('div');
    newdiv.setAttribute('id', id);
    newdiv.setAttribute('class', 'dragbox');
    newdiv.setAttribute('iterate', i);
    newdiv.style.position = "relative";
    newdiv.style.top = p;
    newdiv.style.left = p;
    newdiv.style.cursor = 'move';
    newdiv.innerHTML = "</div><br><textarea id='" + i + "'  onDblClick='editor1(" + i + ")' name='textarea[" + i + "]' class='textarea1' style='position:absolute; top:10px;left:0px;overflow-y: auto;background-color:transparent;border: 1px solid #00FFFF; '>text here" + i + "</textarea>";
    newdiv.innerHTML = newdiv.innerHTML + "<br><input type='hidden' value='" + i + "' name='id[" + i + "]'><br><input name='box_type[" + i + "]' type='hidden' value='text'/>";
    newdiv.innerHTML = newdiv.innerHTML + "<br><input type='hidden' value='300' name='width[" + i + "]' id='width" + i + "'><br><input type='hidden' value='75' name='height[" + i + "]' id='height" + i + "'>";
    newdiv.innerHTML = newdiv.innerHTML + "<br><input type='hidden' value='0' name='left[" + i + "]' id='left" + i + "'><br><input type='hidden' value='0' name='top[" + i + "]' id='top" + i + "'>";

    document.getElementById("frmMain").appendChild(newdiv);

    var but = document.createElement('input');
    but.setAttribute('type', 'button');
    but.setAttribute('class', 'removebutton');
    but.style.visibility = "visible";
    but.style.float = "right";
    but.style.position = "absolute";
    but.style.left = "300px";
    but.style.top = "0px"

    but.onclick = function () {
        if (confirm('Really delete?')) {
            document.getElementById("frmMain").removeChild(newdiv);
            document.getElementById(id).removeChild(but);
            document.getElementById(id).removeChild(newbr);
        }
    }

    newbr = document.createElement('BR');
    document.getElementById(id).appendChild(newbr);
    document.getElementById(id).appendChild(but);

    $(function() {
        $("#" + i).resizable({
            autoHide: true
        })
        $("#" + id).hover(function() {
            $("#" + i).css('border', '1px solid #00FFFF');
        });
        $("#" + id).mouseleave(function() {
            $("#" + i).css('border', '0px');
        });
        $("#" + i).resizable({
            stop: function (event, ui) {
                var width = ui.size.width;
                var height = ui.size.height;
                $("#" + id).find(".removebutton").css('left', +width + 'px');
                // alert("width="+width+"height="+height);
                ValProportions(width, height, ui.element.context.id);
            }
        });

        $("#" + id).draggable({
            stop: function(event, ui) {
                Stoppos = $(this).position();
                $("div#stop").text("STOP: \nLeft: " + Stoppos.left + "\nTop: " + Stoppos.top);
                // alert("left="+Stoppos.left+"top="+Stoppos.top);
                ValPostion(Stoppos.left, Stoppos.top, $(this).attr('iterate'));
            }
        });
        $("#" + i).draggable({
            handle: "#handle"
        });
    });

    function ValProportions(defaultwidth, defaultheight, id) {
        $('#width' + id).val(defaultwidth);
        $('#height' + id).val(defaultheight);
    }

    function ValPostion(defaultleft, defaulttop, id) {
        $('#left' + id).val(defaultleft);
        $('#top' + id).val(defaulttop);
    }

    p = p + 25;
    i++;

    $('.dragbox').click(function() {
        $(".removebutton").css('visibility', 'hidden');
        $("#" + i).css('border', '0px');
        $(this).css('border', '1px solid #000');
        $(this).css('background-color', 'red');
        $(this).css('background-image', 'url(img/move.png)');
        $(this).css('background-repeat', 'no-repeat');
        $(this).css('width', '15px');
        $(this).css('height', '15px');
        $(this).find(".removebutton").css('visibility', 'visible');
        $(this).find("#" + i).css('border', '1px solid #00FFFF');
    });

    $('.dragbox').focusout(function(e) {
        $("#" + i).css('border', '0px');
        $('.dragbox').css('background-color', 'transparent');
        $('.dragbox').css('width', '0px');
        $('.dragbox').css('border', '0px');
        $(this).css('border', '0px');
        $(this).css('background-color', 'transparent');
        $(this).css('width', '0px');
    });
} 
```

html代码：

```
<form id="frmMain" name="frmMain" enctype="multipart/form-data" action="dynamic_div5.php" method="post">
  <input id="btn1" type="button" value="Add New textbox" onClick="NewTextArea('draggable');"/>  
  <input type="submit" value="Save Page"  >
  <div id="content">
   <?
   $sql=mysql_query("SELECT * FROM site_content WHERE page_ref='$page_ref' AND template_ref='$template_ref' ORDER BY box_id DESC");    
   $numrows=mysql_num_rows($sql); 
   while($row=mysql_fetch_array($sql))
 {
 ?>
     <script>OldTextArea('<? echo $row['box_id']; ?>','draggable','<? echo $row['box_top']; ?>','<? echo $row['box_left']; ?>','<? echo $row['box_width']; ?>','<? echo $row['box_height']; ?>','<? echo $row["content"]; ?>');</script>

 <? 
 } 
     ?> 
  </div>

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:29:36.053

Easyway 将 textareas 创建为数组

```
<textarea name="textarea[]"></textarea>
<textarea name="textarea[]"></textarea>
<textarea name="textarea[]"></textarea> 
```

并在循环中

```
<?php
  foreach($_POST['textarea'] as $i => $value)
  {
     //Save Here
  }
?> 
```

并且您将避免丢失文本区域

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:28:47.893

使用此方法：

```
<textarea name="somename[]"></textarea>
<textarea name="somename[]"></textarea>
<textarea name="somename[]"></textarea>
<textarea name="somename[]"></textarea> 
```

与 PHP 相比，您将拥有数组：

```
$somename[0]; $somename[1]; $somename[2]; $somename[3]; ... 
```

所以，你必须改变你的代码（js）

```
newdiv.innerHTML = "</div><br><textarea id='"+i +"'  onDblClick='editor1("+i+")' name='textarea[]' class='textarea1' style='position:absolute; top:10px;left:0px;overflow-y: auto;background-color:transparent;border: 1px solid #00FFFF; '>text here"+i+"</textarea>"; 
```

和（在 PHP 中）

```
$q=count($_POST["textarea"]); 
for($m=0; $m<$q;$m++) 
```

# javascript - JavaScript中从文件中解析大量数据的最有效方法是什么

> ID：15762788
> 
> 赞同：9
> 
> 时间：2013-04-02T11:19:37.343
> 
> 标签：javascript, json, performance

JavaScript 中从文件中解析大量数据的最有效方法是什么？

目前我使用 JSON 解析来序列化一个未压缩的 250MB 文件，这真的很慢。有没有一种简单快速的方法可以从文件中读取大量 JavaScript 数据，而无需遍历每个字符？文件中存储的数据只是几个浮点数组？

**更新：** 该文件包含一个 3d 网格、6 个缓冲区（vert、uv 等）。此外，缓冲区需要呈现为类型化数组。流式传输不是一种选择，因为必须先完全加载文件，然后图形引擎才能继续。也许一个更好的问题是如何以最有效的方式将巨大的类型化数组从文件传输到 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:39:07.813

我会为这类 JavaScript 或流解析器推荐基于 SAX 的解析器。

DOM 解析会将整个内容加载到内存中，这不是您提到的大文件的方式。

`For Javascript based SAX Parsing (in XML)`你可以参考 [https://code.google.com/p/jssaxparser/](https://code.google.com/p/jssaxparser/)

和

`for JSON`您可以自己编写，以下链接演示了如何在 Javascript [http://ajaxian.com/archives/javascript-sax-based-parser中编写基于 SAX 的基本解析器](http://ajaxian.com/archives/javascript-sax-based-parser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:02:56.847

您是否尝试过将其编码为二进制文件并将其作为 blob 传输？

[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)

[http://www.htmlgoodies.com/html5/tutorials/working-with-binary-files-using-the-javascript-filereader-.html#fbid=LLhCrL0KEb6](http://www.htmlgoodies.com/html5/tutorials/working-with-binary-files-using-the-javascript-filereader-.html#fbid=LLhCrL0KEb6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:33:33.877

没有一个很好的方法可以做到这一点，因为整个文件将被加载到内存中，我们都知道它们都有很大的内存泄漏。您不能添加一些分页来查看该文件的内容吗？

检查是否有任何插件允许您将文件作为流读取，这将大大改善这一点。

**更新**

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

您可能想了解新的 HTML5 API 以读取本地文件。您仍然会遇到下载 250mb 数据的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-03T23:02:25.503

我能想到 1 个解决方案和 1 个 hack

解决方案：将数据拆分成块扩展：归结为 http 协议。REST 部分认为 http 有足够的“语言”用于大多数客户端-服务器场景。

您可以在客户端上设置请求标头 Content-len 来确定每个请求需要多少数据

然后在后端有一些选项[http://httpstatus.es](http://httpstatus.es)

*   如果服务器根本无法从数据库中获取那么多数据，请回复 413
*   417 如果服务器能够回复但不在请求的标头下（Content-len）
*   206 与提供的块，让客户知道“还有更多来自哪里”

HACK：使用 Websocket 并获取二进制文件。然后使用 html5 FileAPI 将其加载到内存中。这很可能会失败，因为它不是导致问题的下载，而是解析一个几乎无穷无尽的 JS 对象

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:35:51.037

你在浏览器上不走运。您不仅必须下载文件，而且无论如何都必须解析 json。在服务器上解析它，将其分成更小的块，将数据存储到数据库中，然后查询您需要的内容。

# c++ - C++：当指针本身发生变化时，如何更新对指针值的引用？

> ID：15762789
> 
> 赞同：0
> 
> 时间：2013-04-02T11:19:38.657
> 
> 标签：c++, pointers, reference

考虑以下程序：

```
include <iostream>

using namespace std;

int main()
{

    int *ptr = new int(10);
    int &ref = *ptr;

    cout << ref << endl << &ref << endl;

    delete ptr;
    ptr = new int(100);
    cout << ref << endl << &ref << endl;

    return 0;
} 
```

输出：
10
0x80010348
100
0x80010348

这里的`ref`变量是对指向的内存位置的引用`ptr`。但是，当`ptr`删除指针并分配新的内存位置时，`ref`现在应该引用未定义的内存位置，因为以前的内存位置不存在。但是当我运行这个程序时，我通过 ref 和 cygwin/linux 上的 g++ 以及 VC++2012 express 获得了更新的值和地址。

但是，如果 ptr*没有*被删除，则`ref`不会更新，并且输出显示旧值 10 和旧地址。这是行为标准还是特定于编译器？如果它是标准的，那么为什么更新`ref`取决于是否`ptr`被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:29:40.080

这只是内存分配器的工作方式。在您的代码中：

```
delete ptr;
ptr = new int(100); 
```

你删除了一个`int`，然后你立即要求一个新的。运行时说“好的，有这个。它刚刚可用”。

简单回收。

# java - Aspose xlsx 和 pptx 文件转换异常

> ID：15762792
> 
> 赞同：3
> 
> 时间：2013-04-02T11:19:44.467
> 
> 标签：java, aspose, aspose-cells

我正在使用这些 jar 文件将 excel 和 power point 文件转换为 PDF
**aspose.slides-6.7.0.jar**
**aspose.slides-6.7.0-jdk14.jar**
**aspose-cells-7.3.4.jar**
Aspose 正在转换`ppt`和`xls`文件正确但它会在`xlsx`和`pptx`文件上引发异常。
现在我正在使用试用版。
这是由于试用版还是我使用的是旧版 Aspose？
这是例外

```
SEVERE: com.aspose.slides.UnsupportedFormatException: The file is ZIP archive. It can be Microsoft PowerPoint 2007 PPTX presentation.
    at com.aspose.slides.eQ.break(Unknown Source)
    at com.aspose.slides.eQ.<init>(Unknown Source)
    at com.aspose.slides.eS.byte(Unknown Source)
    at com.aspose.slides.eS.new(Unknown Source)
    at com.aspose.slides.eS.<init>(Unknown Source)
    at com.aspose.slides.uj.do(Unknown Source)
    at com.aspose.slides.uj.<init>(Unknown Source)
    at com.aspose.slides.Presentation.do(Unknown Source)
    at com.aspose.slides.Presentation.<init>(Unknown Source)
    at com.aspose.slides.Presentation.<init>(Unknown Source)
    at com.delta.MiDAS.commonlibs.Utility.convertPPT(Utility.java:58)
    at com.delta.MiDAS.controllers.DocumentInsertController.loadDocForPreview(DocumentInsertController.java:485)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIData.broadcast(UIData.java:1093)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

这是我的转换代码

```
public void convertPPT(String Path) throws Exception{
            Presentation pres = new Presentation(Path);
            Integer index=Path.lastIndexOf(".");
            String destPath=Path.substring(0, index)+".pdf";
            pres.saveToPdf(destPath);
            System.out.println("PPT file converted to PDF");

        }

        public void convertExcel(String Path) throws Exception{

            Workbook workbook = new Workbook(Path);

            //Save the document in PDF format
            Integer index=Path.lastIndexOf(".");
            String destPath=Path.substring(0, index)+".pdf";

            workbook.save(destPath, FileFormatType.PDF);

            System.out.println("excel converted to doc");

        } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:38:57.330

不，例外不是因为使用 Aspose 的试用版或旧版本（虽然推荐使用的版本始终是最新版本，但您应该使用 Aspose.Cells for Java 7.4.2 和 Aspose.Slides for Java 7.2.0 )

要处理 xlsx 和 pptx 文件，您必须修改转换方法，如下所示：

```
public void convertPPTToPDF(String Path) throws Exception
{
    String extension = "";
    Integer index = Path.lastIndexOf(".");
    if (index > 0) {
        extension = Path.substring(index+1);
    }

    if (extension.equals("ppt"))
    {
        Presentation pres = new Presentation(Path);
        String destPath=Path.substring(0, index)+".pdf";
        pres.saveToPdf(destPath);
    }
    else if (extension.equals("pptx"))
    {
        //Instantiate a PresentationEx object that represents a PPTX file
        PresentationEx pres = new PresentationEx(Path);
        String destPath=Path.substring(0, index)+".pdf";

        //Saving the PPTX presentation to PDF document
        pres.save(destPath, com.aspose.slides.SaveFormat.Pdf);
    }
    System.out.println("Powerpoint file converted to PDF successfully");
}

public void convertExcelToPDF(String Path) throws Exception
{
    String extension = "";
    Integer index = Path.lastIndexOf(".");
    if (index > 0) {
        extension = Path.substring(index+1);
    }

    if (extension.equals("xls"))
    {
        Workbook workbook = new Workbook(Path);

        //Save the document in PDF format
        String destPath=Path.substring(0, index)+".pdf";
        workbook.save(destPath, FileFormatType.PDF);
    }
    else if (extension.equals("xlsx"))
    {
        //Createing and XLSX LoadOptions object
        LoadOptions loadOptions = new LoadOptions(FileFormatType.XLSX);

        //Creating an Workbook object with 2007 xlsx file path and the loadOptions object
        Workbook workbook = new Workbook(Path, loadOptions);
        String destPath=Path.substring(0, index)+".pdf";
        workbook.save(destPath, FileFormatType.PDF);
    }

    System.out.println("Excel file converted to PDF successfully");
} 
```

我检查了更新的方法是否适用于最新版本的 Aspose.Cells 和 Aspose.Slides for Java 的 ppt、pptx、xls 和 xlsx 文件。

我是 Aspose 的开发人员布道师。

# javascript - 准备好作为第二个 eventType

> ID：15762799
> 
> 赞同：0
> 
> 时间：2013-04-02T11:20:05.903
> 
> 标签：javascript, jquery, forms, bind, jquery-events

我目前有一个程序，如果我在左侧更改设置，它会在右侧自动更改。所以你可以预览你在做什么。

文本将自动显示在每个`keyup`. 因此，当您键入时，您会看到预览的外观。

我目前这样调用我的 Javascript 函数。

`"#chapter_form_number"`然后是表单输入的 ID。

```
$("#chapter_form_number").bind("mouseup" , {key: 'chapter_display_number'} ,    chapter_generate_num);
$("#chapter_form_title").bind("keyup" , {key: 'chapter_display_title'} ,    generate_text);

// Number gen Chapter
function chapter_generate_num(dest){
    var dest = dest.data.key;
    var number = $(this);   
    $("#" + dest).html(number.val());
}

// change text
function generate_text(dest){
    var text = $(this); 
    var dest = dest.data.key;
    $("#" + dest).html(text.val());
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/Fcq06.png)

但它只在我`keyup`或`mouseup`输入时改变。**我希望它在加载时也会改变一次。**所以它至少加载一次输入。所以我试图把它准备好，`eventType`但这不起作用。

有什么建议可以解决这个问题吗？

```
$("#chapter_form_number").bind( "mouseup ready" , {key: 'chapter_display_number'} ,     chapter_generate_num);
$("#chapter_form_title").bind("keyup ready" ,   {key: 'chapter_display_title'} ,    generate_text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:32:58.320

采用[`.trigger( eventType [, extraParameters ] )`](http://api.jquery.com/trigger/)

```
$("#chapter_form_number")
    .bind("mouseup" , {key: 'chapter_display_number'}, chapter_generate_num)
    .trigger("mouseup");
$("#chapter_form_title")
    .bind("keyup" , {key: 'chapter_display_title'}, generate_text)
    .trigger("keyup"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:34:07.077

您需要使用适当的上下文（`this`对象）调用这两个函数。试试这个

```
$(function() {
     chapter_generate_num.apply($("#chapter_form_number")[0], [{data: {key: 'chapter_display_number'}}])
     generate_text.apply($("#chapter_form_title")[0], [{data: {key: 'chapter_display_title'}}])    
}) 
```

我假设这两个函数是全局的，并且在 onload 事件之前定义。

# solr - 通过 Collections API (Solr 4.x) 的集合名称

> ID：15762803
> 
> 赞同：0
> 
> 时间：2013-04-02T11:20:12.877
> 
> 标签：solr, solr4

我正在使用 Solr 集合 API 创建一个集合。

```
http://127.0.0.1:8983/solr/admin/collections?action=CREATE&name=test2&numShards=1&replicationFactor=2&collection.configName=default 
```

我期待新集合被命名为“test2”，而我得到的是“test2_shard1_replica2”。我不想将我的索引名称绑定到任何当前设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:33:50.913

您的集合*名为*test2。您在那里显示的名称是组成集合的各个核心（分片/副本）的名称

# arrays - perl 从数组中获取特定元素

> ID：15762813
> 
> 赞同：0
> 
> 时间：2013-04-02T11:20:57.170
> 
> 标签：arrays, perl

我正在尝试从 perl 中的数组中获取特定元素，但代码不起作用

```
print "Enter the column numbers you want separated by comma "; 
$temp=<>; 

@shortdays = qw/Mon Tue Wed Thu Fri Sat Sun/; 
@weekdays = @shortdays[scalar $temp];  

print @weekdays; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:32:06.340

如果要获取数组的一部分，则必须将数字列表放在括号内`[ .. ]`，而不是字符串。当然，一个字符串*是*一个列表，*它将*被视为一个数字，因此转换为一个数字，但正如您所指出的，它只是第一个数字。

如果你`use warnings`打开了，我强烈怀疑你没有打开，你会得到错误：

```
Argument "3,4\n" isn't numeric in array slice at yourscript.pl ... 
```

但是 Perl 会尽其所能将此字符串转换为数字，并提供`3`.

所以，这就是你做错了。你可以做什么：

```
my @nums = $temp =~ /\d+/g;
my @weekdays = @shortdays[@nums]; 
```

这将以相当简单的方式从字符串中提取整数。它还将消除使用特定分隔符（例如逗号）的要求。请注意，使用全局`/g`修饰符时会隐含捕获括号。

如果您绝对使用逗号，请使用 split 提取数字。但请注意，这可能会留下空格和其他不需要的字符。

```
my @nums = split /,/, $temp; 
```

调试时，使用语句如

```
print @weekdays; 
```

有点混乱。我建议您改为这样做：

```
use Data::Dumper;

...

print Dumper \@weekdays; 
```

然后您将确切地看到数组包含的内容。

当然，将这两行添加到所有脚本中：

```
use strict;
use warnings; 
```

如果你用过这些，你就不会遇到这个问题。这两个 pragma 提供的信息和控制以及减少的调试时间足以弥补与使用它们相关的较短的学习曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:28:37.480

这在我的地方有效：

```
my $temp=<>;
my @shortdays = qw/Mon Tue Wed Thu Fri Sat Sun/;
my @id=split ",",$temp;
my @weekdays;

for(@id)
{
push(@weekdays,@shortdays[$_]);
}
print @weekdays; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:32:05.860

像这样做：

```
#!/usr/bin/perl -w
use strict;

print "Enter the column numbers you want separated by comma ";     
my $temp=<>;
my @a1=split(/,/,$temp);
my @shortdays = qw/Mon Tue Wed Thu Fri Sat Sun/;
my @weekdays = @shortdays[@a1];
print "@weekdays"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:32:45.100

使用您的方法实现您想要的一种方法是

```
@weekdays = @shortdays[split(","$temp)]; 
```

这样打印效果更好：

```
print join(' ',@weekdays), "\n"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T18:02:40.803

```
use strict;
use warnings;

my @shortdays = qw'Mon Tue Wed Thu Fri Sat Sun';

print "Enter the column numbers you want\n";

my $line = <STDIN>;
my @ids = $line =~ /[0-7]/g;
my @days = @shortdays[ @ids ];

print join( ', ', @days ), "\n"; 
```

由于您只需要`$line`, 并且`@ids`一次，因此您无需使用它们就可以逃脱。

```
# my $line = <STDIN>;
# my @ids = $line =~ /[0-7]/g;
# my @days = @shortdays[ @ids ];
my @days = @shortdays[ <STDIN> =~ /[0-7]/g ]; 
```

* * *

为什么`/[0-7]/g`你可能会问。

*   唯一有效的数字是 0..7。
*   不需要知道用户使用什么来分隔数字。
*   [`/g`](http://perldoc.perl.org/perlretut.html#Global-matching "全局匹配")会给我们一个匹配列表。

由于正则表达式只匹配一个数字，我们不需要指定用户应该使用什么来分隔数字。实际上，（在这种情况下）用户甚至根本不需要将它们分开。

# c# - Numeric(x,x) 到 Decimal(x,x) Sql Server 怪异

> ID：15762820
> 
> 赞同：0
> 
> 时间：2013-04-02T11:21:23.853
> 
> 标签：c#, sql-server-2008-r2, sql-server-profiler

我有一个非常奇怪的问题。我有一个存储过程，它具有以下参数：

```
@Id int OUTPUT,
@DataSourceId int, 
@OwnerId int, 
@Size numeric(16,6),
@SizeUnitId int,
@LayCanFrom datetime, 
@LayCanTo datetime, 
@DischargeDate datetime, 
@IMO int,
@ProductIds inttable readonly,
@LoadPortIds inttable readonly, 
@DischargePortIds inttable readonly, 
@LoadCountryIds inttable readonly, 
@DischargeCountryIds inttable readonly,
@LoadZoneIds inttable readonly, 
@DischargeZoneIds inttable readonly, 
@FreightRate numeric(16,6), 
@FreightRateUnitId int, 
@StateId int, 
@OriginalMessage varchar(max),
@Comments varchar(max) = null 
```

这里感兴趣的特定参数是@Size numeric(16,6)。在 C# 方面，当我调用存储过程时，我将参数声明为：

```
var paramSize = command.Parameters.AddParameter("@Size", this.Size);
paramSize .SqlDbType = SqlDbType.Decimal;
paramSize .Size = 16;
paramSize .Precision = 6; 
```

我得到的连接字符串为：

```
using (var connection = new SqlConnection(
                (context.Connection as EntityConnection).StoreConnection.ConnectionString))
        {
            // Call function to execute the stored proc.
        } 
```

然后我打开连接，并执行通常的操作`command.ExecuteNonQuery();` Now @Size 作为 75000.000000 传入，这应该没问题，因为该字段是 numeric(16,6)。事实上，我已经在同一个表中有记录，在该 Size 列中有类似 75000.000000 的值。但是，当我打电话时`command.ExecuteNonQuery();`，它会返回

> 参数值“75000.000000”超出范围。

因此，我决定将存储过程中的 @Size 默认设置为 75000.000000，而不是传入参数。你猜怎么着？有用！另一个有趣的事情是我正在尝试使用 SQL Profiler 捕获 SP 执行，无论我尝试什么，或者我选择捕获哪些事件，我都无法看到 SP 执行。这是因为我从 EF storeconnection 获取我的连接字符串吗？有没有人遇到过这样的事情？这让我有点发疯！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:29:25.403

您应该设置[`Scale`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale.aspx)而不是[`Size`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.size.aspx)：

```
paramSize.Precision = 16;
paramSize.Scale = 6; 
```

另请注意，`decimal`（或`numeric`）定义[为](http://msdn.microsoft.com/en-us/library/ms187746.aspx)：

```
 decimal [ (p[ ,s] )] and numeric[ (p[ ,s] )] 
```

第一个数字是*精度*，第二个数字是*比例*。因此，`@Size numeric(16,6)`意味着“精度为 16，比例为 6”。

你也混淆了这一点。

# c# - 在 asp.net 中从 JavaScript 调用 ac# 函数

> ID：15762825
> 
> 赞同：0
> 
> 时间：2013-04-02T11:21:29.383
> 
> 标签：c#, javascript, asp.net, pagemethods

我有一个函数，`callData()`在 c# 中被命名为。现在我想从 JavaScript 调用这个函数。我不需要对 JavaScript 进行任何操作。只是我想调用那个函数。在这个问题中，我不需要任何其他选项。只是我想知道如何从 JavaScript 调用 c# 方法。

JavaScript

```
<script type="text/javascript">
function call()
    {
    //To call callData function

    }
</script> 
```

html代码

```
 <html>
 <div>
 <asp:Button ID="hbtn" runat="server" OnClientClick="Javascript:call();"/>
 </div>
 </html> 
```

C# 代码

```
public static void callData()
{
 //some operations
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:25:30.967

您可以通过使该 C# 函数成为 Web 服务中的 Web 方法来实现此目的。一旦你这样做了，你就可以使用 jQuery 并调用该函数。据我所知，您不能只在 javascript 中调用 C# 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:44:27.237

您需要使用该`WebMethod`属性装饰您的 C# 服务器端方法，并将其设为静态以将其公开为可调用的 AJAX 成员：

```
[WebMethod]
public static void callData() {
  //some operations
} 
```

然后`ajax`在你的 JavaScript 方法中使用类似这样的方法：

```
$.ajax({
  type: "POST",
  url: "path/to/page/callData",
  contentType: "application/json; charset=utf-8",
  data: {},
  dataType: "json",
  success: function (data) { },
  error: function (xhr, status, error) { }
}); 
```

其中`successFn`和`errorFn`是分别处理成功或失败结果的函数，例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:40:08.437

这个问题已经有很多人回答了。即使是这样，我也会建议你最好的答案在这里。[请点击这里](http://globetech.wordpress.com/2008/01/07/call-managed-c-method-from-javascript-code/)

# opengl-es-2.0 - 在具有基于延迟渲染的 PVR SGX 5 系列的 iOS 设备上，硬件何时执行之前提交的绘图命令？

> ID：15762826
> 
> 赞同：0
> 
> 时间：2013-04-02T11:21:36.710
> 
> 标签：opengl-es-2.0, powervr-sgx

我们都知道内置 POWER-VR SGX 5 系列 GPU（3GS 或更高版本）的 iOS 设备。

POWER VR GPU 基于 TBDR 技术进行 opengl 渲染，这意味着硬件不会立即执行绘图命令，而是将它们缓存到某个点，然后将它们全部执行。

这可以执行早期的 HSR，因为所有绘图数据都在执行点提交给 opengl，硬件在每个正在处理的 tile 中都有全局可见性信息，这很好我们都知道。

但我很困惑，除了 Opengl 对象（tex、着色器、缓冲区对象......）修改操作之外，WHEN 或 WHAT 使硬件停止缓存并执行先前作为应用程序调用 glDrawArray 或 glDrawElement 一次又一次提交的命令和 glFlush、glFinish 函数？

PS 我也知道当 PB（帮助执行 HSR 的参数缓冲区）已满时，硬件将刷新之前提交的命令。

# c# - 使用 tableadapter 填充数据集后 Datagridview 的 rowindex 不断重置

> ID：15762828
> 
> 赞同：0
> 
> 时间：2013-04-02T11:21:40.400
> 
> 标签：c#, datagridview, indexing, row

我正在使用计时器来更新我的 datagridview。问题是每次更新后，rowindex 会回到左上角，所以基本上是第一个单元格。有没有办法在填充数据集时保持行索引相同？我正在使用此代码来填充数据集。

```
this.gASFLESSENTableAdapter.Fill(this.dataSet1.GASFLESSEN); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:30:01.830

如果您在填充后具有相同的行索引，那么

```
int rowindex=datagridview.CurrentRow.Index;
this.gASFLESSENTableAdapter.Fill(this.dataSet1.GASFLESSEN);
datagridview.Rows[rowindex].Selected=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T02:57:09.863

将 TableAdapter 的`ClearBeforeFill`属性设置为`False`将停止此行为。它使您不必手动获取/设置行索引，也意味着用户在`Fill`被调用时正在滚动，不必处理卡住的滚动条。

# robotium - 比较 Robotium 和 AndroidDriver？

> ID：15762829
> 
> 赞同：1
> 
> 时间：2013-04-02T11:21:44.360
> 
> 标签：robotium

您如何比较 Robotium 和 AndroidDriver 工具进行移动应用程序测试？
谁能解释一下详细的统计数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-19T22:19:54.663

I have use android driver of the appium testing.

Robotium can test both blackbox and white box.

AndroidDriver is for blackbox testing, which means that if you want to assert the activity, you cannot do with it.

Robotium is a very powerful tool, and the biggest problem is the cross process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T20:28:13.197

这是一个非常广泛的问题，但我将讨论三个方面：应用程序的类型、不同的操作系统和不同的开发语言。我将讨论[appium](http://appium.io/)作为 WebDriver (Selenium) 的实现。

1.  通常我们会考虑三种类型的移动应用程序——原生应用程序、混合应用程序和网络应用程序。Robotium 为原生应用程序提供了良好的支持。Robotium 4.0 支持混合应用。Appium 还为移动 Web 应用程序提供了良好的支持。特别是如果您必须在其他平台（Linux、Windows）上测试 Web 应用程序，我会推荐 appium。在这种情况下，您可以使用几乎相同的代码。

2.  我们仅将 Robotium 用于 Android 设备。您可以将 appium 用于 iOS 等不同的操作系统。

3.  Appium 的最大优势之一是您可以使用多种编程语言（例如 Java、Objective-C、JavaScript、PHP、Ruby、Python 或 C# 等）编写 Appium 代码

总结一下：如果您需要快速编写测试并且您只对 Android 应用感兴趣，请使用 Robotium。如果您需要广泛的设备/操作系统支持并且 Java 不是您喜欢的语言，请使用 appium，

# php - 创建一个后退按钮，在 jquery 对话框中转到上一页

> ID：15762830
> 
> 赞同：0
> 
> 时间：2013-04-02T11:21:46.590
> 
> 标签：php, jquery, ajax, jquery-ui-dialog

我有一个 jquery 对话框，它打开并具有主用户视图，主要是客户端列表和按钮选择，用户可以从中编辑客户端详细信息、删除客户端或添加一些信息到客户端。当用户单击编辑客户端时，它会将用户带到编辑客户端表单，该表单加载在同一对话框中，这是单击编辑按钮后发生的 jquery 标记：

```
$(".editClient").button({icons: {primary: "ui-icon-pencil"}, text: false}).width("28px").height("20px").click(function() {

                   $.ajax({
                   dataType: "html",
                   url: "ajax.php?action=edit_client_form",
                   beforeSend: function()
                   {
                    $('.error, .success, .notice').remove();

                   },
                   success: function(html)
                   {

                    $('#users-contain').html(html);

                   }

                 });
            }); 
```

如您所见，它当前从 ajax 页面加载信息，这是该`edit_client_form`部分的标记：

```
 $html .= '<table>
                <tr>
                 <td><button class="backForm" type="button">Back</button></td>
                </tr>
              </table>';

echo $html; 
```

我需要的是一个后退按钮，它将用户从编辑表单返回到主视图，有人对我将如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:25:40.533

也许这会有所帮助，它已附加到文档中，因此可以随时加载链接/按钮

```
$(function(){

    $(document).on('click', 'button.backForm', function(){

        history.go(-1);

    });

}); 
```

# php - Zend 框架循环依赖

> ID：15762843
> 
> 赞同：0
> 
> 时间：2013-04-02T11:22:44.153
> 
> 标签：php, zend-framework2

在 Zend Framework 2 中，我们使用工厂来启动类。对于我们使用的工厂`FactoryInterface`，它使您能够使用 ServiceManager。

我们的问题只是反复出现的依赖。我们有以下

我们有`PlaceRepository`和`PlaceEntity`。

它`PlaceRepostory`是 the 的依赖项，`PlaceEntity`因此它知道它需要返回哪个实体。然而，它`PlaceEntity`也需要`PlaceRepostory`这样它才能得到一个父位置。（比如获取城市 x 的国家（城市和国家都是一个地方））。

这以永远存在的依赖而告终。

现在我们可以在实体中注入服务定位器，但是您失去了轻松测试的能力，并且您看不到它依赖于哪个类。

那么对于这个问题是否有其他选项或更好的选项，因此您仍然可以拥有依赖关系，但它不会像 inity 循环那样重复出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:32:52.190

如果依赖是分层的，则将其分为所有权和成员资格。尝试添加指向成员和所有者的对象属性。由于 PlaceRepository 拥有 PlaceEntity 对象，您可以这样实现

```
instancePlaceRepository->members['instancePlaceEntityName'] = instancePlaceEntity; 
```

和

```
instancePlaceEntity->owner = instancePlaceRepository; 
```

这将使一切井井有条。

你可以走下来的成员和爬上业主。

如果您有 Country->City->Street 类型的依赖项，所有内容都是 placeEntity 并且单个 placeRepository 包含所有内容，然后消除 PlaceRepository 的所有权，这次围绕场所构建层次结构。国家->成员有城镇和城市->成员有街道、建筑物等

# asp.net - 如何在asp.net中获取gridview的当前单元格值？strautoid 什么也没检索

> ID：15762845
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:22:46.930
> 
> 标签：asp.net, vb.net

```
Protected Sub GridView1_RowUpdating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles GridView1.RowUpdating
    sqlqrystrng = "UPDATE temp_zone set zone_id = @zoneid, zone_name = @zonename WHERE auto_id = @autoid"

    Dim strautoid As String = GridView1.Rows(e.RowIndex).Cells(1).Text

    'Dim strautoid As String = Int(GridView1.SelectedRow.Cells(0).Text.ToString())

    grid_view_load()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:37:51.617

```
sqlqrystrng = "UPDATE temp_zone set zone_id = @zoneid, zone_name = @zonename WHERE auto_id = @autoid"

    Dim strautoid As String = GridView1.Rows(e.RowIndex).Cells(e.ColumnIndex).Text

    grid_view_load() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:40:22.257

```
 Dim Gridview1 As New DataTable
    For i As Integer = 0 To Gridview1.Rows.Count - 1
        Gridview1.Rows(i).Item(0).ToString()
    Next
End Sub 
```

我使用了 DataTable 而不是 gridview，因为我打开的项目是 Windows 服务而不是表单应用程序，但它应该可以正常工作

```
<%@ Page Language="VB" %>
<%@ Import Namespace="System.Data" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">

  Protected Sub Page_Load()

    If Not Page.IsPostBack Then
      ' Create a new table.
      Dim taskTable As New DataTable("TaskList")

      ' Create the columns.
      taskTable.Columns.Add("Id", GetType(Integer))
      taskTable.Columns.Add("Description", GetType(String))
      taskTable.Columns.Add("IsComplete", GetType(Boolean))

      'Add data to the new table.
      For i = 0 To 19
        Dim tableRow = taskTable.NewRow()
        tableRow("Id") = i
        tableRow("Description") = "Task " + i.ToString()
        tableRow("IsComplete") = False
        taskTable.Rows.Add(tableRow)
      Next

      'Persist the table in the Session object.
      Session("TaskTable") = taskTable

      'Bind data to the GridView control.
      BindData()
    End If

  End Sub

  Protected Sub TaskGridView_PageIndexChanging(ByVal sender As Object, ByVal e As GridViewPageEventArgs)
    TaskGridView.PageIndex = e.NewPageIndex
    'Bind data to the GridView control.
    BindData()
  End Sub

  Protected Sub TaskGridView_RowEditing(ByVal sender As Object, ByVal e As GridViewEditEventArgs)
    'Set the edit index.
    TaskGridView.EditIndex = e.NewEditIndex
    'Bind data to the GridView control.
    BindData()
  End Sub

  Protected Sub TaskGridView_RowCancelingEdit()
    'Reset the edit index.
    TaskGridView.EditIndex = -1
    'Bind data to the GridView control.
    BindData()
  End Sub

  Protected Sub TaskGridView_RowUpdating(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs)
    'Retrieve the table from the session object.
    Dim dt = CType(Session("TaskTable"), DataTable)

    'Update the values.
    Dim row = TaskGridView.Rows(e.RowIndex)
    dt.Rows(row.DataItemIndex)("Id") = (CType((row.Cells(1).Controls(0)), TextBox)).Text
    dt.Rows(row.DataItemIndex)("Description") = (CType((row.Cells(2).Controls(0)), TextBox)).Text
    dt.Rows(row.DataItemIndex)("IsComplete") = (CType((row.Cells(3).Controls(0)), CheckBox)).Checked

    'Reset the edit index.
    TaskGridView.EditIndex = -1

    'Bind data to the GridView control.
    BindData()
  End Sub

  Private Sub BindData()
    TaskGridView.DataSource = Session("TaskTable")
    TaskGridView.DataBind()
  End Sub

</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>GridView example</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

      <asp:GridView ID="TaskGridView" runat="server" 
        AutoGenerateEditButton="True" 
        AllowPaging="true"
        OnRowEditing="TaskGridView_RowEditing"         
        OnRowCancelingEdit="TaskGridView_RowCancelingEdit" 
        OnRowUpdating="TaskGridView_RowUpdating"
        OnPageIndexChanging="TaskGridView_PageIndexChanging">
      </asp:GridView>

    </div>
    </form>
</body>
</html> 
```

# jqplot - 带有多个针的 Jplot 仪表表

> ID：15762850
> 
> 赞同：1
> 
> 时间：2013-04-02T11:22:59.923
> 
> 标签：jqplot

我已经实施了计量表，它工作正常。我想在同一个仪表上有多个针。那可能吗？

例如：如果我们有

```
s1 = [122,80]; or s1 = [122,80];s2 = [200]; 
```

在这种情况下，我们可以在同一个仪表上获得多根针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-13T13:46:56.647

简而言之，没有。像你一样，我尝试了很多事情，但该系列的正常方法是：

```
s1 = [122];s2 = [200];
series = [s1, s2];

plot = $.jqplot('chart',series,{ ... }); 
```

...但这显然行不通。而且我在文档中也找不到这样的东西。我希望它也可以在未来的版本中使用。

# jvm-hotspot - Jprofiler - 如何找出应用程序页面的实际渲染时间

> ID：15762854
> 
> 赞同：0
> 
> 时间：2013-04-02T11:23:25.113
> 
> 标签：jvm-hotspot, jprofiler

在我们的应用程序中，有调度程序查询在后台运行。在 Java EE 和探针中通过 Jprofiler 分析代码时 - JBDC

1.  线程选择 - 所有线程组
2.  聚合级别 - 方法
3.  线程状态 - 选择所有状态。

因此 Java EE & probes - JBDC 下显示的 JDBC 查询列表也包含与调度程序相关的查询，它们对热点列表有贡献。

我的问题是：当我启动我的应用程序并开始分析代码时，执行调度程序所产生的时间是否会查询渲染我的应用程序页面所需的部分时间，或者该时间是独立的？

Jprofiler 中是否还有一个选项可以像 Httpwatch 一样显示渲染应用程序页面的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:15:48.273

“调度程序查询”听起来不像呈现任何页面。

您可以在调用树的 URL 节点中查看页面呈现时间。它们显示 servlet 路径而不是方法名称。

# python - 如何在派生的python类上操作装饰器？

> ID：15762855
> 
> 赞同：4
> 
> 时间：2013-04-02T11:23:29.173
> 
> 标签：python, python-2.7, inheritance, decorator, python-decorators

我想使用装饰器对派生类做一些事情（例如注册类或其他东西）。这是我的代码：

```
from functools import wraps

class Basic(object):
    def __init__(self):
        print "Basic::init"

def myDeco(name):
    # define the decorator function that acts on the actual class definition
    def __decorator(myclass):

        # do something here with the information
        print name, myclass

        # do the wrapping of the class 
        @wraps(myclass)
        def __wrapper(*args, **kwargs):
            return myclass( *args, **kwargs)

        # return the actual wrapper here
        return __wrapper

    # return the decorator to act on the class definition
    return __decorator

@myDeco("test")
class Derived(Basic):
    def __init__(self):
        super(Derived, self).__init__()
        print "Derived::init"

instance = Derived() 
```

这给出了以下错误：

```
TypeError: must be type, not function 
```

当调用`super`in 方法时`Derived`。我假设变量`Derived`不再是 a `type`，而是函数`__decorator`实际上。

我如何需要更改装饰器（并且只有装饰器）才能解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:28:45.730

您正在用函数替换装饰类，因此类定义失败。

具体来说，`super(Derived, self).__init__()`现在将一个*函数*传递给`super()`：

```
>>> super(Derived, object())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: must be type, not function
>>> type(Derived)
<type 'function'> 
```

类装饰器通常会更改类，添加、删除或更改其属性，然后再次返回类对象。

你不应该*用*一个新的类替换`Derived`，因为你`Derived.__init__()`的名字是指自己。用另一个类替换该名称会导致痛苦（例如无限递归）。

一个可以工作的示例类装饰*器*：

```
def my_deco(name):
    # define the decorator function that acts on the actual class definition
    def decorator(cls):

        # do something here with the information
        print name, cls

        setattr(class, name, 'Hello world!')

        # return the original, augmented class
        return cls

    # return the decorator to act on the class definition
    return decorator 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:30:48.363

您的程序中有两个错误：

```
from functools import wraps

class Basic(object):
    def __init__(self):
        print "Basic::init"

def myDeco(name):
    # define the decorator function that acts on the actual class definition
    def __decorator(myclass):

        # do something here with the information
        print name, myclass

        # do the wrapping of the class
        class Wrap(myclass): # error 1
            realSuper = myclass # I dislike this. has anyone an other aproach
            def __new__(*args, **kwargs):
                return myclass.__new__(*args, **kwargs)

        # return the actual wrapper here
        return Wrap

    # return the decorator to act on the class definition
    return __decorator

@myDeco("test")
class Derived(Basic):
    def __init__(self):
        super(Derived.realSuper, self).__init__() # error 2
        print "Derived::init"

instance = Derived() 
```

现在给出以下输出：

```
test <class '__main__.Derived'>
Basic::init
Derived::init 
```

首先，正如其他人指出的那样，您需要一堂课。

其次`super(Derived, self).__init__()`导致了无限递归：

```
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    exec s
  File "<string>", line 32, in <module>
  File "<string>", line 28, in __init__
  File "<string>", line 28, in __init__
  File "<string>", line 28, in __init__
  File "<string>", line 28, in __init__ 
```

原因见下文讨论。

# php - “XML 解析错误：文档元素后出现垃圾”

> ID：15762857
> 
> 赞同：3
> 
> 时间：2013-04-02T11:23:55.977
> 
> 标签：php, google-maps-api-3, xml-parsing

大家好，我正在尝试显示带有从数据库中检索的动态位置的[Google](https://developers.google.com/maps/articles/phpsqlajax_v3)地图

**trnsport公共表**

transportpublicid int 11 自动增量

传输类型 varchar 60

costPerKm 小数（7,2）

地址 varchar 800

电话号码 int 10

网络链接 varchar 300

说明 varchar 800

纬度双 (10,6)

液化天然气双（10,6）

* * *

**生成XML.php**

```
 <?php

          require("db_connection.php");

          function parseToXML($htmlStr) 
          { 
              $xmlStr=str_replace('<','&lt;',$htmlStr); 
              $xmlStr=str_replace('>','&gt;',$xmlStr); 
              $xmlStr=str_replace('"','&quot;',$xmlStr); 
              $xmlStr=str_replace("'",'&#39;',$xmlStr); // line 11  
              $xmlStr=str_replace("&",'&amp;',$xmlStr); 
              return $xmlStr; 
          } 

          // Select all the rows in the markers table
          $query = "SELECT transportType,costPerKm,address,teleNo,webLink,lat,lng FROM transportpublic";

          $result = mysql_query($query);
          if (!$result) 
          {
            die('Invalid query: ' . mysql_error());
          }

          header("Content-type: text/xml");

          // Start XML file, echo parent node
          echo '<transportpublic>';

          // Iterate through the rows, printing XML nodes for each
          while ($row = mysql_fetch_assoc($result)){
            // ADD TO XML DOCUMENT NODE
            echo '<marker ';
            echo 'transportType="' . parseToXML($row['transportType']) . '" ';
            echo 'costPerKm="' . $row['costPerKm'] . '" ';
            echo 'address="' . parseToXML($row['address']) . '" ';
            echo 'teleNo="' . $row['teleNo'] . '" ';
            echo 'webLink="' . parseToXML($row['webLink']) . '" ';
            echo 'lat="' . $row['lat'] . '" ';
            echo 'lng="' . $row['lng'] . '" ';
            echo '/>';
          }

          // End XML file
          echo '</transportpublic>';
    ?> 
```

当我在浏览器上运行**GenerateXml.php时，我会感到困惑**

```
XML Parsing Error: junk after document element
Location: http://localhost:8080/testserver/generateXml.php
Line Number 11, Column 8:
</html>
<transportpublic>
<marker transportType="Bus" costPerKm="1.50" address="abc" teleNo="112554476" webLink="http://www.abc.html" lat="0.000000" lng="0.000000" />

<marker transportType="Train" costPerKm="12.00" address="abc" teleNo="118745963" webLink="http://www.abc.html" lat="0.000000" lng="0.000000" />

<marker transportType="hmmmm" costPerKm="40.00" address="abc" teleNo="112541254" webLink="http://www.abc.html" lat="-33.005985" lng="-58.501824" />

<marker transportType="test" costPerKm="2.00" address="abc" teleNo="112541258" webLink="http://www.abc.html" lat="39.785999" lng="-75.041976" />

<marker transportType="test2" costPerKm="2.00" address="abc" teleNo="112541254" webLink="http://www.abc.html" lat="6.901698" lng="79.853854" />

</transportpublic>
-------^ 
```

* * *

我只知道在根元素之后我不应该解析任何数据，它将被视为垃圾，但在我的 GenerateXml.php 中，我在此行之后不做任何事情

```
echo '</transportpublic>'; 
```

* * *

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:00:56.370

根节点是`<transportpublic>`，但错误消息`</html>`在它之前显示了一个虚假的关闭标记。XML 解析器可能认为这`<html>`是根节点，因此 XML 的其余部分是错误提到的*文档元素之后的垃圾。*

# c# - 如何访问 XmlDocument 对象的 Root 属性？

> ID：15762858
> 
> 赞同：-4
> 
> 时间：2013-04-02T11:23:59.567
> 
> 标签：c#, xml

我正在尝试查询 XMLDocument 并收到错误：

```
var query = from date in xmlDoc.Root.Elements("Serial") 
```

错误大约是`Root`.

我的完整代码如下所示：

```
private async void Button_Click_1(object sender, RoutedEventArgs e) 
{ 
    StorageFile xmlFile = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync("Content‌​1.xml"); 
    XmlDocument xmlDoc; 
    xmlDoc = await XmlDocument.LoadFromFileAsync(xmlFile); 
    System.Xml.Linq.XDocument duc = System.Xml.Linq.XDocument.Parse(xmlDoc.GetXml()); 
    var query = from Date in xmlDoc.Root.Elements("Serial")
        where Date.Attribute("No").Value == "1";
} 
```

如何访问对象的`Root`属性`XmlDocument`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:08:23.743

您的`xmlDoc`对象是 type `XmlDocument`，并且[XmlDocument 没有名为 Root 的属性](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument_properties.aspx)。

要访问 的根`XmlDocument`，请使用[DocumentElement](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.documentelement.aspx)属性

```
XmlElement root = xmlDoc.DocumentElement; 
```

应该注意`DocumentElement`的是[XmlElement](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.aspx)类型，并且`XmlElement`不包含名为 的属性`Elements`，因此如果您选择坚持使用，则需要查找该属性的替代项`XmlDocument`

但是在您的情况下，您可能与[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)类`XmlDocument`混淆了，该类*确实*包含一个称为[XElement](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)类型的属性，并且包含一个属性。*`Root``XElement``Elements`*

 *因此，要么用 替换你`XmlDocument`的`XDocument`，要么重写你的 linq 查询以使用`XmlDocument`语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T11:27:04.503

确保在文件顶部有这些：

```
using System.Linq;
using System.Xml;
using System.Xml.Linq;
using System.IO; 
```

如果您正在编写 Windows 8“沉浸式”应用程序，请添加以下内容：

```
using Windows.Data.Xml.Dom; 
```*

# c# - 从动态生成的面板控件中获取值

> ID：15762859
> 
> 赞同：1
> 
> 时间：2013-04-02T11:24:08.057
> 
> 标签：c#

我根据表中的记录数动态地在 flowlayoutpanel 中添加面板控件。我想从每个面板中获取 id，以便我可以在面板的单击事件上打开一个弹出窗口。有什么建议吗？

这是我的代码示例。

```
 int id=0;
        public void FillSearch()
        {
            var playerList = dianaDB.TblPlayers.Where(p => p.Status == "Active" & p.CancellationStatus == "Active" & p.Version == "Active").Select(p => p);
            Panel pnlPlayer = new Panel();
            foreach (var pl in playerList)
            {
                pnlPlayer = new Panel();
                pnlPlayer.Size = new Size(153, 116);
                pnlPlayer.BorderStyle = BorderStyle.FixedSingle;
                pnlPlayer.Cursor = Cursors.Hand;
                pnlPlayer.Click += new EventHandler(pbx_Click);
                id=pl.Id;
            }
        }

        private void pbx_Click(object sender, EventArgs e)
        { 
            DlgSearchDetails newDlg = new DlgSearchDetails(id);
            newDlg.ShowDialog();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:32:08.207

假设你在询问 WinForm 每个控件中有一个[标签](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)属性，你可以利用它。

```
 public void FillSearch()
    {
        var playerList = dianaDB.TblPlayers.Where(p => p.Status == "Active" & p.CancellationStatus == "Active" & p.Version == "Active").Select(p => p);
        Panel pnlPlayer = new Panel();
        foreach (var pl in playerList)
        {
            pnlPlayer = new Panel();
            pnlPlayer.Size = new Size(153, 116);
            pnlPlayer.BorderStyle = BorderStyle.FixedSingle;
            pnlPlayer.Cursor = Cursors.Hand;
            pnlPlayer.Click += new EventHandler(pbx_Click);
            pnlPlayer.Tag = pl.Id;
        }
    }

    private void pbx_Click(object sender, EventArgs e)
    { 
         var panle = sender as Panel;
         if(panel!=null)
         {
           DlgSearchDetails newDlg = new DlgSearchDetails(panel.Tag);
           newDlg.ShowDialog();
         }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:34:19.843

您可以将`ID`面板的 存储在其[Tag](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.tag.aspx)属性中。

```
pnlPlayer.Tag = id; 
```

然后稍后取回

```
private void pbx_Click(object sender, EventArgs e)
{ 

    Panel p = sender as Panel;
    if(p != null)
    { 
       //TODO add error handling to ensure Tag contains an int
       //...
       DlgSearchDetails newDlg = new DlgSearchDetails((int)p.Tag);
       newDlg.ShowDialog();
    }
} 
```

# asp.net-mvc - 级联删除实体内的实体

> ID：15762861
> 
> 赞同：1
> 
> 时间：2013-04-02T11:24:31.823
> 
> 标签：asp.net-mvc, entity-framework, database-design, ef-code-first, cascading-deletes

我一直在做一个项目，我正在尝试启动级联删除。我在下面有一个模型用于评论。这些评论可以有来自他们调用评论类的回复。我想要做的是让它删除所有可以从评论中流出的回复。

评论 -> 回复 -> 回复 -> 回复 -> 以此类推。

如果我在错误的方向上进行此操作，请告诉我。我曾尝试对此进行研究，但我想出的只是一对一和一对多级联代码。我使用 CodeFirst 和 MVC 4 来构建我的项目。

**已编辑**

```
public class Comment
    {
        // Properties
        public long Id { get; set; }

        [Required]
        [StringLength(250, ErrorMessage = "{0} must be between {1} and {2} characters", MinimumLength = 2)]
        public string Body { get; set; }

        [Required]
        public DateTime CreateDate { get; set; }

        [Required]
        [InverseProperty("Comments")]
        public User Author { get; set; }

        [InverseProperty("CommentCount")]
        public Blog Blog { get; set; }

        public bool Hidden { get; set; }

        public long RepliesId { get; set; }

        [InverseProperty("Replies")]
        public virtual Comment Comments { get; set; }

        [InverseProperty("Comments")]
        public virtual ICollection<Comment> Replies { get; set; }

        public virtual ICollection<Vote> Votes { get; set; }

        public Comment()
        {
            CreateDate = DateTime.UtcNow;
            Hidden = false;
        }
    } 
```

这是我的 DataContextInitializer

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Comment>().HasMany(i => i.Replies)
            .WithOptional(i => i.Comments)
            .HasForeignKey(i => i.RepliesId)
            .WillCascadeOnDelete();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:03:50.963

您可以使用这样的方式启用级联删除（即您需要手动设置关系）...

```
modelBuilder.Entity<Comment>()
    .HasOptional(x => x.Replies)
    .WithOptionalDependent()
    .WillCascadeOnDelete(true); 
```

**但是**，它不会对你有多大好处 - 因为`Update-Database`会失败，比如......

> 不允许使用具有 UPDATE 或 DELETE CASCADE 规则并自引用同一表中的列的外键约束。

即适用于连接不同表的 FK-s -**但不适用于 if`self-referencing`**。

看到这篇文章有一些更相关的信息 - 尤其是提到的评论

> “您需要删除 FK 并在 DatabaseInitializer 中使用级联删除手动创建它”

[EF4 代码优先 - 从数据库中删除父级时删除所有子级？](https://stackoverflow.com/questions/6763017/ef4-code-first-delete-all-children-when-deleting-parent-from-db/6763287#6763287)

简而言之，我认为没有直接的解决方案 - 但需要一些手动设置（初始化程序等）（我没有尝试过）。或者尝试重新组织，稍微扁平化关系（我没有想太多，只是在这里抛出一些非常通用的方法）。

* * *

仅供参考-即使我认为它不会带您到任何地方（见上文）...

```
public class Comment
{
    // Properties
    public long Id { get; set; }

    //[Required]
    //[StringLength(250, ErrorMessage = "{0} must be between {1} and {2} characters", MinimumLength = 2)]
    public string Body { get; set; }

    [Required]
    public DateTime CreateDate { get; set; }

    // [Required]
    // [InverseProperty("Comments")]
    public MyUser Author { get; set; }

    // [InverseProperty("CommentCount")]
    public Blog Blog { get; set; }

    public bool Hidden { get; set; }

    public virtual ICollection<Comment> Replies { get; set; }
    public virtual ICollection<Vote> Votes { get; set; }

    public Comment()
    {
        CreateDate = DateTime.UtcNow;
        Hidden = false;
    }
}

modelBuilder.Entity<Comment>()
    .HasOptional(x => x.Replies)
    .WithOptionalDependent()
    .WillCascadeOnDelete(true); 
```

如果您让它“不级联”，这应该可以正常工作。否则失败。

# google-gadget - 我的 Google 小工具部分显示在屏幕之外

> ID：15762862
> 
> 赞同：0
> 
> 时间：2013-04-02T11:24:35.263
> 
> 标签：google-gadget

当我将此作为小工具添加到谷歌日历时，它会部分显示在屏幕之外......我应该如何更正以便小工具将出现在屏幕上......

这是一个代码，它创建一个小工具，要求输入用户名和密码以及登录按钮..

我只是想知道程序也让小工具出现在屏幕上

```
enter code here
<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="ABC Google Calendar Gadget" width="180" author="abc" author_email="abcgmail.com" description="My First Test">
<Require feature="dynamic-height"/>
 <Require feature="google.calendar-0.5"/>
  </ModulePrefs>
  <Content type="html">
  <![CDATA[
<html style="overflow: hidden;">
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<style>
//.login {
//  display: block;
//}
//.event {
//  display: none;
/}
</style>

</head>
<body class="loc-en ff ff3">

<script>

var _message = 'This is My first Gadget!';
function validateForm(){
alert("Hello");
$('.login').hide();
$('.event').show();
}
function createEventfun(){
alert("create event");
var eventData = {
    title: 'NewYear',
    details: 'Hi all',
    location: 'My room',
    allDay: true,
    startTime: {year: 2013, month: 04, date: 21},
    endTime: {year: 2013, month: 04, date: 22},
    attendees: [
      {email: 'nirupama.ninusah@gmail.com'}
    ],
    rrule: 'RRULE:FREQ=YEARLY'
  };
google.calendar.composeEvent(eventData);
}  

function load()
{
alert("Page is loaded");
}

function changeWidth(){
        var e1 = document.getElementById("gadgetcell");
        e1.style.width = 180;
        alert("Page is loaded and width of gadgetcell is modified to 180");
    }

</script>

<div class="login" align="left">
<table border="1" height="200" width="100%">
<tr>
<td>
<image src="http://abc.com/Portals/78096/images/abc_logo.jpg" height="60" width="90"/>
</td>
</tr>
<tr>
<td align="left">
<table border="0">
<tr>
<td>Userid</td>
<td><input type="text" name="userid" size=10/><br></td>
</tr>
<tr>
<td>Password</td>
<td><input type="password" name="password" size=10/><br></td>
</tr>
<tr>
<td>VidyoURL</td>
<td><input type="text" name="url" size=10/><br></td>
</tr>
<tr>
<td><button onClick="validateForm()" style="background-color:red;color:white">LOGIN</button></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div class="event" style="width: 180px;">
<table border="1">
<tr>
<td>
<image src="http://abc.com/Portals/78096/image/abc_logo.jpg" height="60" width="90"/>
</td>
</tr>
<tr>
<td align="center">
<table border="0" height="200" width="100%">
<tr>
<span>User Successfully Aunthenticated</span>
</tr>&nbsp;
<tr>
<button onclick="createEventfun()" style="background-color:red;color:white">CREATE VIDYO EVENT</button>
</tr>
</table>
</td>
</tr>
</table>
</div>
</body>
</html>
 ]]></Content>
</Module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T15:44:28.480

看看[管理小工具高度](https://developers.google.com/gadgets/docs/ui)：

```
- A <Require feature="dynamic-height"/> tag (under <ModulePrefs>) to tell the 
  gadget to load the dynamic-height library.
- A call to the JavaScript function gadgets.window.adjustHeight() whenever there 
  is a change in content, or another event occurs that requires the gadget to 
  resize itself. 
```

我将此脚本添加到所有视图中并且它有效：

```
<script type="text/javascript" charset="utf-8">
    function resize(){
        gadgets.window.adjustHeight();
    }
    window.onload=resize;
</script> 
```

不要忘记“必需功能”标签

# date - 在 unitils 数据集上插入空日期

> ID：15762863
> 
> 赞同：0
> 
> 时间：2013-04-02T11:24:42.243
> 
> 标签：date, testing, dataset, unitils

我收到类似于此的错误：[Unitils dataset - insert into sybase datetime column](https://stackoverflow.com/questions/14121793/unitils-dataset-insert-into-sybase-datetime-column)

我的情况是需要插入一个空的日期值。空字符串不做这件事。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:12:56.893

如果您将日期元素从行定义中删除，则不会在该字段中添加任何内容。因此，表定义为：

```
CREATE TABLE Table (
  id          INTEGER,
  name        VARCHAR,
  birthDate   DATE
); 
```

像这样创建一行：

```
<table id="3" name="Katie"/>
<table id="4" name="Christie" birthDate="2001-04-22"/> 
```

在 ID 3 中加载一个空日期。

# highcharts - 导航器在放大和缩小时会丢失 Highcharts xAxis 填充，并且在缩小时无法恢复填充

> ID：15762865
> 
> 赞同：1
> 
> 时间：2013-04-02T11:24:43.367
> 
> 标签：highcharts, zooming, navigator

我正在使用需要在图表上进行额外填充的 highcharts。当我使用导航器并放大时，填充丢失了 - 这很好，因为我正在放大。但是当我使用导航器缩小时，我没有得到我的填充。或者，如果我使用图表上的缩放按钮，我会得到填充（当我尝试缩小时，我希望导航器也有相同的行为）。

我已经在 jsFiddle [http://jsfiddle.net/gajjargaurav/RULh9/5/](http://jsfiddle.net/gajjargaurav/RULh9/5/)上使用 Navigator 和[http://jsfiddle.net/gajjargaurav/RULh9/4/](http://jsfiddle.net/gajjargaurav/RULh9/4/)复制了一个示例图表形式的 Highcharts Demo 和Zoom 按钮

我为我的示例设置的填充如下，

```
xAxis: {
            maxPadding: 0.22, //Prevent chart going off the screen on the right
            minPadding: 0.22,
            tickPosition: 'outside'
        } 
```

问题是，当我尝试使用导航器缩小时，如何让导航器表现得像缩放按钮一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:22:19.847

不幸的是 min/maxPadding 仅适用于初始状态。如果你想以这种方式提高你的范围，我建议使用`afterSetExtremes`事件处理程序，并在那里设置新的极端（只需增加你得到的那个）。

注意：在 afterSetExtremes 中设置新的极值时，会调用另一个 afterSetExtremes。确保。确保您不会创建无限循环（添加一些标志来检查极端情况是否已经得到改善）。

# c# - 在等于的一侧加入比较键（以开头）

> ID：15762868
> 
> 赞同：2
> 
> 时间：2013-04-02T11:24:55.003
> 
> 标签：c#, linq, join

我加入了两个列表，一个带有总线路径，另一个带有作为总线子路径的磁盘路径。所以基本上我想加入diskpath.startswith(buspath)。问题是 Join On 只允许在 equals 的一侧使用一个键。

我要这个：

```
Dictionary<string, string[]> disksPerBus;

Dictionary<string, string> busesHWPath;  // key Bus Path, Value Bus name
Dictionary<string, string> disksHWPath;  // Key Disk Path, Value Disk name 

from busHWPath in busesHWPath 
join diskHWPath in disksHWPath on diskHWPath.Key.StartsWith(busHWPath.Key)
... 
```

最终目标是获取带有总线名称 (busHWPath.Value) 的字典 (disksPerBus)，以及连接到该总线的所有磁盘 (diskHWPath.Value)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:40:44.443

如果 bus-dictionary 的值也是唯一的（您的问题表明）：

```
Dictionary<string, string[]> disksPerBus = new Dictionary<string, string[]>();
foreach(var bkv in busesHWPath)
{
    string[] disks = disksHWPath.Where(dkv => dkv.Key.StartsWith(bkv.Key))
                     .Select(dkv => dkv.Value).ToArray();
    disksPerBus.Add(bkv.Value, disks); // this may fail if the value is not unique
} 
```

# c# - 用c#读取一个xml文件

> ID：15762869
> 
> 赞同：-9
> 
> 时间：2013-04-02T11:25:01.083
> 
> 标签：c#, .net, xml, linq-to-xml

我有一个奇怪的 xml 文件，我想阅读 c#，我在互联网上搜索了很多，但没有找到适合我的案例

```
<XMLFile>
<Template>
<TestElement ID="22">
    <PlugIn Name="ESA620" TestID="1240"/>
    <Info>
        <Type>Current 1</Type>
        <Parameter>Current 1</Parameter>
        <Name>Current 1</Name>
    </Info>
    <ExpectedResult>
        <Standard AlphaName="IEC" CompleteName="IEC 60601" Type="Predefined">
            <Limit Key="::ST">
                <Unit>uA</Unit>
                <Value Type="High">100</Value>
            </Limit>
        </Standard>
    </ExpectedResult>
</TestElement>
.   .   .   .   .   .
<TestElement ID="35">
    <PlugIn Name="ESA620" TestID="1500"/>
    <Info>
        <Type>Current auxiliary</Type>
        <Name>Current auxiliary</Name>
    </Info>
    <ExpectedResult>
        <Standard AlphaName="IEC" CompleteName="IEC 60601">
            <Limit Key="::B">
                <Unit>uA</Unit>
            </Limit>
            <Limit Key="::BF">
                <Unit>uA</Unit>
            </Limit>
            <Limit Key="::CF">
                <Unit>uA</Unit>
            </Limit>
            <Limit Key="::B_DC">
                <Unit>uA</Unit>
            </Limit>
            <Limit Key="::BF_DC">
                <Unit>uA</Unit>
            </Limit>
            <Limit Key="::CF_DC">
                <Unit>uA</Unit>
            </Limit>
        </Standard>
    </ExpectedResult>
    <PlugInData PlugIn="ESA620">
        <ValueFilter>None</ValueFilter>
        <EnableBtn Skip="True" NA="True" Step="True"/>
        <ModuleOptions Sep="False" Exp="False" Stop="False"/>
        <TestOptions>
            <Run Opt="False" HaltOnFail="True" MultiPE="False" TotalLeakage="False" MeasType="0" TestVoltage="0" AppliedParts="0"/>
            <StopOnPC Before="False" After="False"/>
            <Delay On="2" Off="0"/>
        </TestOptions>
    </PlugInData>
    <TestElement ID="36">
        <PlugIn Name="ESA620" TestID="1510"/>
            <Info>
                <Type>Patient Current auxiliary </Type>
                <Parameter>Normal Condition</Parameter>
                <Name>Normal Condition</Name>
            </Info>
            <ExpectedResult>
            <Standard AlphaName="IEC" CompleteName="IEC 60601" Type="Predefined">
                <Limit Key="::B">
                    <Unit>uA</Unit>
                    <Value Type="High">100</Value>
                </Limit>
                <Limit Key="::BF">
                    <Unit>uA</Unit>
                    <Value Type="High">100</Value>
                </Limit>
                <Limit Key="::CF">
                    <Unit>uA</Unit>
                    <Value Type="High">10</Value>
                </Limit>
                <Limit Key="::B_DC">
                    <Unit>uA</Unit>
                    <Value Type="High">10</Value>
                </Limit>
                <Limit Key="::BF_DC">
                    <Unit>uA</Unit>
                    <Value Type="High">10</Value>
                </Limit>
                <Limit Key="::CF_DC">
                    <Unit>uA</Unit>
                    <Value Type="High">10</Value>
                </Limit>
            </Standard>
        </ExpectedResult>
    </TestElement>
    <TestElement ID="37">
        <PlugIn Name="ESA620" TestID="1520"/>
        <Info>
            <Type>Patient Current auxiliary</Type>
            <Parameter>Neutral open</Parameter>
            <Name>Neutral open</Name>
        </Info>
        <ExpectedResult>
            <Standard AlphaName="IEC" CompleteName="IEC 60601" Type="Predefined">
                <Limit Key="::B">
                    <Unit>uA</Unit>
                    <Value Type="High">500</Value>
                </Limit>
                <Limit Key="::BF">
                    <Unit>uA</Unit>
                    <Value Type="High">500</Value>
                </Limit>
                <Limit Key="::CF">
                    <Unit>uA</Unit>
                    <Value Type="High">50</Value>
                </Limit>
                <Limit Key="::B_DC">
                    <Unit>uA</Unit>
                    <Value Type="High">50</Value>
                </Limit>
                <Limit Key="::BF_DC">
                    <Unit>uA</Unit>
                    <Value Type="High">50</Value>
                </Limit>
                <Limit Key="::CF_DC">
                    <Unit>uA</Unit>
                    <Value Type="High">50</Value>
                </Limit>
            </Standard>
        </ExpectedResult>
    </TestElement>
    <TestElement ID="38">
.   .   .   .   .
    </TestElement>
</TestElement>
</Template>
<Result>
<ResultItem MTI="1" ElementID="22">
    <Status>Passed</Status>
    <Measurement Key="::ST">
        <Description>normal conditions, reverse polarity</Description>
        <Value Type="Float">.2</Value>
        <Unit>uA</Unit>
        <Status>Passed</Status>
    </Measurement>
</ResultItem>
.   .   .   .   .   
<ResultItem ElementID="35">
    <Status>Passed</Status>
    <ResultItem MTI="1" ElementID="36">
        <Status>Passed</Status>
        <Measurement Key="::1::B">
            <Description>patient circuit</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
        <Measurement Key="::2::CF">
            <Description>ECG</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
        <Measurement Key="::3::B">
            <Description>Spo2</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
        <Measurement Key="::4::B">
            <Description>NiBp</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
    </ResultItem>
    <ResultItem MTI="1" ElementID="37">
        <Status>Passed</Status>
        <Measurement Key="::1::B">
            <Description>Patient circuit</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
        <Measurement Key="::2::CF">
            <Description>ECG</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
        <Measurement Key="::3::B">
            <Description>Spo2</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
        <Measurement Key="::4::B">
            <Description>NiBp</Description>
            <Value Type="Float">.1</Value>
            <Unit>uA</Unit>
            <Status>Passed</Status>
        </Measurement>
    </ResultItem>
<ResultItem MTI="1" ElementID="38">
.   .   .   .   .   .
</ResultItem>
</ResultItem>
</Result>
</XMLFile> 
```

我的 xml 文件由两部分组成，第一部分是模板，第二部分是值。我试图得到的例如：

> 电流 1：电流 1，单位：uA，上限：100，值：.2，状态通过
> 
> 电流辅助：电流辅助：患者电流辅助：患者电路：单位：uA，上限：100，值：.1 状态：通过
> 
> ECG：单位：uA，上限：10，值：0.1 状态：通过
> 
> Spo2：单位：uA，上限：100，值：0.1 状态：通过
> 
> NiBp：单位：uA，上限：100，值：0.1 状态：通过
> 
> 中性开路：患者电流辅助：患者电路：单位：uA，上限：500，值：0.1 状态：通过
> 
> ECG：单位：uA，上限：50，值：.1 状态：通过
> 
> Spo2：单位：uA，上限：500，值：0.1 状态：通过
> 
> NiBp：单位：uA，上限：500，值：0.1 状态：通过

如何用 c# 读取这个 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:26:44.613

[XDocument.Load](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.load.aspx)

[XDocument.Parse](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)

```
string str =
@"<?xml version=""1.0""?>
<!-- comment at the root level -->
<Root>
    <Child>Content</Child>
</Root>";
XDocument doc = XDocument.Parse(str);
Console.WriteLine(doc); 
```

# c# - LINQ to SQL - 检查对象是否选择了子、孙等

> ID：15762874
> 
> 赞同：1
> 
> 时间：2013-04-02T11:25:18.713
> 
> 标签：c#, linq, linq-to-sql

我一直在到处寻找答案，但找不到任何东西。我有两个表，媒体和关键字，它们具有多对多的关系。现在，Keywords 表非常简单 - 它有一个 ID、Name 和 ParentFK 列，这些列与 ID 列相关（它是一个树结构）。用户可以将任何单个关键字分配给媒体文件，这意味着他可以选择叶子而不选择根或分支。

现在我必须能够确定根关键字是否有分配给媒体对象的子、孙等，但我必须从根开始。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:33:15.010

只需查找任何将给定的 ParentFK 设置为您的 ID 的条目。

```
public static bool HasChild(int id) {
    return
        db.Keywords.Any(item => item.Parent == id);
}

public static bool HasGrandChilds(int id) {
    return
        db.Keywords.Where(item => item.Parent == id).Any(item => HasChild(item.ID);
} 
```

更通用的方法：

```
public static bool HasGrandChilds(int id, int depth) {
    var lst = new List<Keywords>();
    for (var i = 0; i < depth - 1; i++) {
        if (i == 0)
        {
            //Initial search at first loop run
            lst = db.Keywords.Where(item => item.ParentId == id);
        }
        else
        {
            //Search all entries, where the parent is in our given possible parents
            lst = db.Keywords.Where(item => lst.Any(k => k.Id == item.Parent));
        }
        if (!lst.Any())
        {
            //If no more children where found, the searched depth doesn't exist
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:39:47.517

从您当前的架构中，我想不出比以下更好的解决方案：

*   发出查询以检索根的所有子项的列表。
*   发出查询以检索上一步中子项的所有子项的列表。
*   依此类推，递归地创建根的所有后代的列表。
*   接下来查询数据库中具有列表中任何关键字的所有媒体对象。

但上述算法将需要多次调用数据库。您可以在一个查询中完成它，您可以稍微改进您的架构。我建议您不仅为每个关键字保留其父 FK，还保留其根 FK。这样，您可以发出单个查询来获取所有具有其根 FK 是所需关键字的对象。

# c++ - 执行 make 命令创建 moses\scripts\training\memscore 时出错

> ID：15762876
> 
> 赞同：0
> 
> 时间：2013-04-02T11:25:21.093
> 
> 标签：c++, boost, cygwin

我必须实现机器翻译系统，因此我计划使用 moses，但在 Cygwin 上执行 make 命令时遇到以下错误：

```
Administrator@diebold-69b7050 /cygdrive/c/JT/NewSetup/Moses/moses-2010-08-13/moses/scripts/training/memscore$ make
make  all-am
make[1]: Entering directory `/cygdrive/c/JT/NewSetup/Moses/moses-2010-08-13/moses
scripts/training/memscore'
g++ -I/usr/include -Wall -ffast-math -ftrapping-math -fomit-frame-pointer -g -O2    -o memscore.exe  phrasetable.o memscore.o  scorer.o lexdecom.o      -lz -lm
phrasetable.o: In function `_ZlsRSoRK15PhraseAlignment':
/cygdrive/c/JT/NewSetup/Moses/moses-2010-08-13/moses/scripts/training/memscore/phrasetable.cpp:111: undefined reference to `boost::system::system_category()'
phrasetable.o: In function `__tcf_0':
/cygdrive/c/JT/NewSetup/Moses/moses-2010-08-13/moses/scripts/training/memscore/datastorage.h:31: undefined reference to `boost::system::system_category()'
phrasetable.o: In function `_ZN14PhrasePairInfo12realloc_dataEj':
/usr/include/boost/pool/simple_segregated_storage.hpp:97: undefined reference to `boost::system::system_category()'
phrasetable.o: In function `_ZNK14PhrasePairInfo14get_alignmentsEv': 
```

请不要给我链接器错误之类的建议，因为我完全不喜欢尝试链接器选项。

我想，我有一些 Cygwin-> 引导库问题。你能建议我哪里错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:34:07.023

您正在`-lboost_system`使用您的编译命令。

一些 boost 库只是标题。其他的需要编译。库有时相互依赖。在这种情况下，您正在使用一些需要`-lboost_system`. 添加它，以便它与您的项目链接。

它应该在这条线上。在哪里完成链接

```
g++ -I/usr/include -Wall -ffast-math -ftrapping-math -fomit-frame-pointer -g -O2 -o memscore.exe  phrasetable.o memscore.o  scorer.o lexdecom.o  **-lboost_system** -lz -lm 
```

# java - Android振动设置 - 其他下的红线？

> ID：15762877
> 
> 赞同：0
> 
> 时间：2013-04-02T11:25:23.990
> 
> 标签：java, android, settings, vibration, android-vibration

我已将这部分代码放在我的设置活动中，因此如果选中正在工作的 xml 文件中的振动框，则将打开振动器，否则将取消它们。但是，else 似乎存在问题，无法让我运行该应用程序。任何帮助将不胜感激，谢谢。

```
 if (preference instanceof vibrateapp_checkbox=="true");
    Vibrator.vibrate(new long[] { 0, 200, 0 }, 0);
    Else if (preference instanceof vibrateapp_checkbox=="false");
    Vibrator.cancel(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:26:29.267

它不是`Else`它`else`。java区分大小写。此外，`else`没有，`if`因为你结束了 if by`(;)`

```
if (preference instanceof vibrateapp_checkbox=="true")
    Vibrator.vibrate(new long[] { 0, 200, 0 }, 0);
else if (preference instanceof vibrateapp_checkbox=="false")
    Vibrator.cancel(); 
```

此外，这似乎是不正确 的，`(preference instanceof vibrateapp_checkbox=="false")`因为 after `instanceof`，`type`预计不值

您可以将其更正为

```
if (vibrateapp_checkbox.isChecked())
        Vibrator.vibrate(new long[] { 0, 200, 0 }, 0);
    else
        Vibrator.cancel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:28:09.207

Java 区分大小写。使用 else 而非 Else

```
 if (preference instanceof vibrateapp_checkbox=="true")
    {
        Vibrator.vibrate(new long[] { 0, 200, 0 }, 0);
    }
        else if (preference instanceof vibrateapp_checkbox=="false")
    {
        Vibrator.cancel();
    } 
```

# c++ - C++ 重载运算符 [ ][ ]

> ID：15762878
> 
> 赞同：13
> 
> 时间：2013-04-02T11:25:25.293
> 
> 标签：c++, matrix, overloading, operator-keyword

我有 CMatrix 类，其中是指向值数组的“双指针”。

```
class CMatrix {
public:
    int rows, cols;
    int **arr;
}; 
```

我只需要通过键入以下内容来访问矩阵的值：

```
CMatrix x;
x[0][0] = 23; 
```

我知道如何使用：

```
x(0,0) = 23; 
```

但我真的需要以另一种方式做到这一点。任何人都可以帮助我吗？请？

最后感谢大家的帮助，我是这样做的...

```
class CMatrix {
public:
   int rows, cols;
   int **arr;

public:
   int const* operator[]( int const y ) const
   {
      return &arr[0][y];
   }

   int* operator[]( int const y )
   {
      return &arr[0][y];
   }

   .... 
```

谢谢你的帮助，我真的很感激！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-02T11:30:38.823

您不能重载`operator [][]`，但这里的常用习惯用法是使用*代理类*，即重载`operator []`以返回已`operator []`重载的不同类的实例。例如：

```
class CMatrix {
public:
    class CRow {
        friend class CMatrix;
    public:
        int& operator[](int col)
        {
            return parent.arr[row][col];
        }
    private:
        CRow(CMatrix &parent_, int row_) : 
            parent(parent_),
            row(row_)
        {}

        CMatrix& parent;
        int row;
    };

    CRow operator[](int row)
    {
        return CRow(*this, row);
    }
private:
    int rows, cols;
    int **arr;
}; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-02T11:28:28.270

C++中没有`operator[][]`。但是，您可以重载`operator[]`以返回另一个结构，并且在该重载中`operator[]`也可以获得您想要的效果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T11:29:51.767

您可以通过重载`operator[]`返回一个来做到这一点`int*`，然后由 . 的第二个应用程序对其进行索引`[]`。`int*`你也可以返回另一个代表行的类，它`operator[]`可以访问行的各个元素，而不是你。

本质上，operator[] 的后续应用会处理前一个应用的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T11:30:47.780

如果您使用标准库容器创建矩阵，这很简单：

```
class Matrix {
    vector<vector<int>> data;

public:
    vector<int>& operator[] (size_t i) { return data[i]; }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T11:29:11.540

你可以`operator[]`让它返回一个指向相应`row or column`矩阵的指针。因为指针支持 [ ] 下标，所以可以通过 'double-square' 访问`notation [][]`。

# java - 如何在连接丢失时重新连接 jconsole

> ID：15762881
> 
> 赞同：4
> 
> 时间：2013-04-02T11:25:34.717
> 
> 标签：java, load-testing, jconsole

我正在为我的项目做负载测试，当我尝试使用 jconsole 来监控服务器何时重新启动时，连接丢失了，有什么解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:29:44.420

jconsole 连接到一个进程，当服务器重新启动时，它会获得一个新的进程 ID，并且 jconsole 不知道创建的新进程。没有其他的，但你必须自己连接它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:31:53.427

Jconsole 连接到一个进程 (jvm)。当您的服务器停止时，该进程不再存在，因此 jconsole 连接丢失。因此，您必须将 jconsole 连接到服务器启动时创建的新进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:33:49.577

> 有什么解决办法吗？

减轻痛苦的一种方法是使用 JMX URL 而不是进程 ID。[JMX URL](http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html)在重新启动时永远不会更改，因此无论如何您都必须重新连接，至少该过程不那么痛苦。

URL 的格式为`service:jmx:rmi:///jndi/rmi://hostName:portNum/jmxrmi`. 不确定您的服务器是什么，但这是[在 tomcat 上启用它的方法](http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html#Enabling_JMX_Remote)。

# jpa - 使用带有外键和多对多关系的 @Embedabble

> ID：15762882
> 
> 赞同：0
> 
> 时间：2013-04-02T11:25:36.897
> 
> 标签：jpa, foreign-keys, persistence, jpa-2.0, entities

我为我试图实现的代码编写了一个示例，我收到一个错误，约束“Student_Teacher_FK”已经存在。

@embiddable 类有一个用当前代码创建两次的外键。

```
@Entity
public class Teacher {

    @Id
    @GeneratedValue
    private Long id;

    @Column(name = "Name")
    private String name;

}

@Entity
public class Student{

    @Id
    @GeneratedValue
    private Long id;

    @Column(name = "Name")
    private String name;

}

@Embeddable
public class StudentList implements Serializable {

    @ManyToMany
    @JoinTable(name = "Student_Teacher",
            joinColumns =
            @JoinColumn(name = "Student_ID", referencedColumnName = "ID"),
            inverseJoinColumns =
            @JoinColumn(name = "Teacher_ID", referencedColumnName = "ID")
    )
    @ForeignKey(name = "Student_Teacher_FK", inverseName = "Teacher_Student_FK")
    public List<Student> studentList = new ArrayList<Student>();

}

@Entity
public class HistoryTeacher extends Teacher {
   @Embedded
   @NotNull
   private StudentList StudentList = new StudentList ();   
}

@Entity
public class LangTeacher extends Teacher {
   @Embedded
   @NotNull
   private StudentList StudentList = new StudentList ();    
}

@Entity
public class RetiredTeacher extends Teacher {
    // has no students
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:06:03.607

@embeddable ：定义一个类，其实例存储为拥有实体的固有部分并共享实体的身份（[http://docs.oracle.com/javaee/6/api/javax/persistence/Embeddable.html](http://docs.oracle.com/javaee/6/api/javax/persistence/Embeddable.html)）
当您在 2 个不同的实体中声明它时，jpa 将使用明确命名的关联 fk 创建关联的关联表（学生-教师）2 次，因此也使用相同的名称创建 2 次。这是你的错误。

我不认为使用 @embeddable 适合您打算做的事情。学生有自己的存在，而不是老师本身的一部分（不是 uml 组合/黑色菱形），因此它不是可嵌入的实体。学生列表应该由教师实体使用简单的多对多关联来保存。

# verilog - 时钟生成的差异

> ID：15762894
> 
> 赞同：4
> 
> 时间：2013-04-02T11:26:05.400
> 
> 标签：verilog, clock

以下代码有什么区别？

```
initial begin
  clk = 0 ;
  forever begin
    #5  clk =   ~clk;
  end
end

initial begin
  clk = 0 ;
  forever begin
    clk = #5  ~clk;
  end
end 
```

我确实知道惯性和传输延迟之间的区别，并且我知道在这两种情况下都会生成时钟（两者之间存在一些相位差），但我想知道模拟器如何对以下代码做出反应。它是相同的还是不同的 ？比如在计算值时考虑了多少事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:55:59.250

两者从使用上的区别：

`#5 clk = ~clk;`表示等待 5 个时间步然后执行`clk = ~clk;`

对于 Wires`B = #5 A;`意味着 B 从 5 个时间步前分配给 A。A 领先 B 5 个时间步长。如果 B 更改为 A`A = #5 A;`

```
wire B;
assign B= #5 A; 
```

[IEEE 1800-2012](http://standards.ieee.org/getieee/1800/download/1800-2012.pdf)第**6.7 节网络声明**涵盖了电线的使用

 **从@new2androids 更新语法`A = #5 B;`，因为寄存器不同于电线。B 每 5 个时间单位检查一次，并立即为 A 赋值。这就是为什么它适用于测试台时钟生成。

至于模拟器如何反应，可能会有一些其他人可以评论的标准调度实践，但在某种程度上它可能取决于您使用的模拟器。

@new2android 提供了从[1996 年读取的以下信息：了解 Verilog 阻塞和非阻塞分配](http://www.sutherland-hdl.com/papers/1996-CUG-presentation_nonblocking_assigns.pdf)

1.  `#5 A = B;`宽度小于 5 的脉冲会被模拟器忽略
2.  `A = #5 B;`每 5 个时间单位检查输入并立即分配值

**笔记**

1.  所有延迟的使用仅用于模拟，不可综合。
2.  `B <= #5 A;`问题和答案不涵盖使用延迟（ ，`#5 B <= A;`）的非阻塞变体时的差异。**

# jquery-mobile - 用于滑动的 Durandal 和 jquery mobile

> ID：15762898
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:26:29.557
> 
> 标签：jquery-mobile, swipe, durandal

我正在使用热毛巾模板 SPA 中提供的 Durandal。这个想法是为基于触摸的设备提供一个 SPA 应用程序，我需要在 div 上的一些上实现滑动功能。

jquery mobile 支持滑动功能，但有人可以告诉我如何使用它。div 上有一个数据绑定，我在其中给出了“滑动：某些功能” - 这不会发生，而当我使用点击而不是滑动时同样有效。在视图模型中定义了一些功能。

我已将 jquery mobile 包含在脚本和捆绑包中。

如果可能的话，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:31:03.023

这是一个工作示例：http: [//jsfiddle.net/Gajotres/pf3kc/](http://jsfiddle.net/Gajotres/pf3kc/)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
  <title>Share QR</title>
  <meta name="viewport" content="width=device-width,height=device-height,minimum-scale=1,maximum-scale=1"/>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />   
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <div data-role="page" id="article1">
    <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
      <h1>Articles</h1>
    </div>
    <div data-role="content">
      <p>Article 1</p>
    </div>
    <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
      <h1>Footer</h1>    
    </div>
  </div>    
</body>
</html> 
```

**Javascript：**

```
$(document).off('swipeleft').on('swipeleft', '[data-role="page"]', function(event){    
    alert('swipeleft');      
});

$(document).off('swiperight').on('swiperight', '[data-role="page"]', function(event){   
    alert('swiperight');           
}); 
```

# android - “发生内部错误”与 Google Plus 登录的集成

> ID：15762904
> 
> 赞同：42
> 
> 时间：2013-04-02T11:27:09.690
> 
> 标签：android, google-plus

我正在尝试按照以下链接提供的说明在我的应用程序中集成 Google plus Login： [https ://developers.google.com/+/quickstart/android#install-sdk](https://developers.google.com/+/quickstart/android#install-sdk)

我完全按照所有说明进行操作。当我在 android-sdk 中提供的真实设备上运行示例应用程序并单击`signin`按钮时，它会显示一条 Toast 消息`An internal error occurred`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2014-03-19T12:18:50.073

我有这个问题，即使在创建了 10 个不同的客户端 ID 和不同`SHA`的包名称之后，它也不起作用......直到我发现你必须填写`Consent screen`.

根据 GoogleDevelopers Console -

> 每当您使用您的客户端 ID 请求访问他们的私人数据时，都会向用户显示同意屏幕。

![同意屏幕](https://i.stack.imgur.com/d0bFU.png)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-02T11:33:31.950

如果您没有在 API 控制台项目中为客户端 ID 设置签名，或者如果您从 keytool 复制了错误的键值，则可能会发生这种情况。[快速入门指南](https://developers.google.com/+/quickstart/android#install-sdk)的步骤 7、8、9 和 10中记录了这样做。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-10-17T09:19:58.297

我通过`.setScopes("PLUS_LOGIN")`在 PlusClient.Builder 中删除解决了问题。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-09-12T17:30:59.293

我在我的 android 应用程序中收到了这个 toast 消息错误：

```
An internal error occurred 
```

**概括：**

假设您在配置您的 android 应用程序和授予您访问权限的 Android API 服务器之间的协商时出错。很可能是由于您没有添加正确的包名称或正确的 SHA1 指纹。我按照这些步骤清除了错误的配置并正确执行。

**修复步骤：**

1.  转到您的 google api 控制台并登录：[https ://code.google.com/apis/console](https://code.google.com/apis/console)

2.  单击“API 访问”选项卡。

3.  单击按钮：“创建另一个客户 ID”。

4.  选择：“已安装的应用程序”单选按钮。

5.  选择：“Android”单选按钮。

6.  输入显示上述错误的 android 应用程序的包名称。`PlusSampleActivity.java`您可以在代码文件的顶部找到它的定义。对我来说是 com.google.android.gms.samples.plus

7.  获取您的 SHA1 指纹值：

    一种。使用命令`keytool -list -v -keystore /home/el/.android/debug.keystore`。输入密码，如果您从未设置过，默认密码为“android”。

    湾。SHA1 指纹显示在屏幕上，复制它。

8.  将上述值粘贴到“签名证书指纹（SHA1）：”框中。

9.  单击按钮：“创建客户 ID”。

10.  再次运行你的安卓应用程序，点击“登录”。

现在，您将看到一个“使用 Google 登录 Google+ SDK”的活动。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-10T11:34:15.413

就我而言，解决方案是**在同意屏幕中实际设置一个电子邮件地址。** 首先，我有点不愿意选择我的个人地址，出于一个奇怪的原因，您可以在没有这条数据的情况下保存表单而不会出错。在检查了其他人的建议后，一旦我在该表单中设置了我的电子邮件地址，它就开始工作了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-18T15:50:57.603

在没有运气的情况下，我一直在寻找如何解决这个问题，最后我设法通过以下方法解决了这个问题。

在我开始解决这个问题之前（至少 ti 如何为我工作），我必须说文档上的所有内容都是正确的，您不必更改任何代码行左右。它看起来更像是**[https://cloud.google.com/console](https://cloud.google.com/console)**云控制台中的一个错误

首先确保您获得正确的 SHA1 和项目的包名称，如文档 **[https://developers.google.com/+/quickstart/android中所述](https://developers.google.com/+/quickstart/android)**

现在我注意到的这个错误（至少对我来说）是在我的云控制台中，我创建的项目很久以前使用旧界面，几个月前我迁移到了新的 GUI。一旦你在云上获得了新的外观控制台你会注意到新项目有一个自动生成的**项目 ID** ，比如 **atlantean-ares-331**，而旧项目有一个长整数值作为**项目 ID** *，这是不可见*的。因此，如果您的项目是使用旧 GUI 创建的，并且您刚刚为该项目的 OAuth 创建了新的客户端 ID，您将在尝试使用 google 登录时收到 Toast“发生内部错误”。

**怎么修**

1.  转到您的云控制台
2.  做一个**新**项目我会建议一个像 oldprojectname-gplus 这样的名字
3.  在 API 部分启用 Google+ API
4.  确保**您的所有项目**在 OAuth 客户端 ID 上的包名称都与您现在将使用的相同，否则您将收到**错误** `This client ID is globally unique and is already in use`。（您必须删除旧的 OAuth 客户端 ID，并与您现在使用的包名称相同）。

5.  转到凭据为 OAuth 创建新的客户端 ID。

已安装的应用程序

安卓

输入你的项目的包名和你的 SHA1

完毕

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-20T15:30:55.493

我对这个问题的解决方案如下。

我做了其他人推荐的所有事情，并且没有关于包名称和 SHA1 密钥的拼写错误。我也尝试删除密钥然后再次添加它，但它没有帮助。

有什么帮助是删除密钥并创建一个*新*项目（在[https://code.google.com/apis/console](https://code.google.com/apis/console)），然后在那里再次创建客户端 ID（使用 package+sha1）。之后（5 秒）一切都在我的 Android 设备上运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-19T05:40:16.467

此问题与来自 api 控制台的权限有关。

如果您使用与 SCOPE_PLUS_LOGIN 相关的权限，则必须在 api 控制台中创建两个密钥，一个用于 OAuth 客户端 ID，另一个用于公共 api 密钥。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-20T10:52:02.173

就我而言，问题是我更改了应用程序的包名称并且没有在开发控制台中更新。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-04T15:58:40.353

对我来说，这是我在使用我的调试密钥安装它时试图使用我的生产密钥。确保您使用来自正确密钥库的正确 SHA1。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-12T03:13:26.407

我转向Google IO 2013，并更改了PlusClient的初始化，然后它就可以工作了。

```
public static final String AUTH_SCOPES[] = {
    Scopes.PLUS_LOGIN,
    "https://www.googleapis.com/auth/userinfo.email",
    "https://www.googleapis.com/auth/developerssite" };

mPlusClient = new PlusClient.Builder(this, this, this)
    .setScopes(AUTH_SCOPES)
    .build(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-04T18:55:21.593

感谢 Thano 的解决方案“现在我注意到的这个错误（至少对我来说）是在我的云控制台中，我创建的项目很久以前使用旧界面，几个月前我迁移到了新的 GUI。一旦你在云控制台上获得新外观，您会注意到新项目具有自动生成的项目 ID，例如 atlantean-ares-331，而旧项目有一个长整数值作为项目 ID，这是不可见的。因此，如果您的项目是使用旧的 GUI 并且您刚刚为该项目的 OAuth 创建了新的客户端 ID，您将在尝试使用 google 登录时收到 Toast “发生内部错误”。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-05T05:14:04.640

经过其他几次尝试后，在 Google 控制台中重新创建项目对我有用：

出于某种原因，我的项目没有项目 ID（旧控制台/新控制台？）。

正如 Thano（上图）所建议的那样，我创建了一个全新的项目，创建了客户端 ID，......然后开始工作。感谢您的建议！！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-06-10T14:43:46.683

请记住使用内置的调试密钥库进行测试。我的其他一切工作正常，但我在开发人员控制台的凭据中设置了我的生产密钥库 SHA1 指纹，这导致它无法工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-25T09:46:07.040

如果您在尝试运行示例应用程序时遇到此错误“或”复制您在其他机器中创建的项目，该项目在该机器中成功运行并在您尝试运行的另一台机器上出现此类弹出错误，你可以按照下面的方法，它会有所帮助。

如果您正在构建应用程序以进行测试/调试，那么，

1.如果您复制您的项目并在其他机器上为密钥库提供的包名称和路径运行它，则生成新的 SHA1。

2.在开发人员控制台中更改新生成的 SHA1 的 ClientId 并在您复制项目并尝试运行它的新机器上运行它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-12-13T16:15:41.653

经常被忽略的是包名。我想澄清上面 Eric Leschinski 的第 6 步（不能在此处发表评论）：所需的包不是活动的包，而是应用程序清单的包。

您可以从 AndroidManifest.xml 的根元素中检索正确的值：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ntk.darkmoor"
    android:versionCode="1"
    android:versionName="1.0" > 
```

在此示例中，在创建客户端 ID 时定义“com.ntk.darkmoor”

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-07-12T17:25:02.707

当我使用 SHA1 进行 debug.keystore 进行调试然后导出我的应用程序时忘记为我用来导出我的应用程序的密钥库生成 SHA1 时，我遇到了同样的问题。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-09-13T08:48:23.567

当我连接设备并从 Android Studio 安装 apk 时，它对我有用。但是当我生成 .apk 并从保管箱安装它时，它现在对我有用。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2014-12-08T20:11:31.990

我浏览了此处提供的所有答案以及其他答案。就我而言，问题也是 SHA-1。我得到不正确的 SHA-1 的原因是我的 keytool export cert 命令。

以前我在使用

```
C:\Users\mysuername\.android SHA 1 signature keytool -exportcert -alias androiddebugkey -keystore "keystorepath" -list -v 
```

问题出在 androiddebugkey 变量中。在这里，您必须提供用于签署应用程序的密钥的名称。

```
C:\Users\mysuername\.android SHA 1 signature keytool -exportcert -alias mykeyname -keystore "keystorepath" -list -v 
```

希望这对某人有帮助！

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-09-02T12:36:11.480

添加到这个长长的原因列表中，我的问题是我从 jks 文件而不是应用程序中获取了调试密钥。

它总是一些小事。

# android - 如何在 Android 警报对话框中显示列表视图？

> ID：15762905
> 
> 赞同：313
> 
> 时间：2013-04-02T11:27:09.990
> 
> 标签：android, android-alertdialog

在 Android 应用程序中，我想在 AlertDialog 中显示自定义列表视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：521
> 
> 时间：2013-04-02T11:29:30.873

使用下面的代码在 AlertDialog 中显示自定义列表

```
AlertDialog.Builder builderSingle = new AlertDialog.Builder(DialogActivity.this);
builderSingle.setIcon(R.drawable.ic_launcher);
builderSingle.setTitle("Select One Name:-");

final ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(DialogActivity.this, android.R.layout.select_dialog_singlechoice);
arrayAdapter.add("Hardik");
arrayAdapter.add("Archit");
arrayAdapter.add("Jignesh");
arrayAdapter.add("Umang");
arrayAdapter.add("Gatti");

builderSingle.setNegativeButton("cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });

builderSingle.setAdapter(arrayAdapter, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                String strName = arrayAdapter.getItem(which);
                AlertDialog.Builder builderInner = new AlertDialog.Builder(DialogActivity.this);
                builderInner.setMessage(strName);
                builderInner.setTitle("Your Selected Item is");
                builderInner.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,int which) {
                                dialog.dismiss();
                            }
                        });
                builderInner.show();
            }
        });
builderSingle.show(); 
```

* * *

## 回答 #2

> 赞同：307
> 
> 时间：2017-04-21T01:35:05.933

[根据文档](https://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)，可以使用三种列表`AlertDialog`：

1.  传统单选清单
2.  持久的单选列表（单选按钮）
3.  持久的多项选择列表（复选框）

我将在下面给出一个例子。

# 传统单选清单

制作传统单选列表的方法是使用`setItems`.

[![在此处输入图像描述](https://i.stack.imgur.com/pzfPl.png)](https://i.stack.imgur.com/pzfPl.png)

**爪哇版**

```
// setup the alert builder
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Choose an animal");

// add a list
String[] animals = {"horse", "cow", "camel", "sheep", "goat"};
builder.setItems(animals, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        switch (which) {
            case 0: // horse
            case 1: // cow
            case 2: // camel
            case 3: // sheep
            case 4: // goat
        }
    }
});

// create and show the alert dialog
AlertDialog dialog = builder.create();
dialog.show(); 
```

不需要 OK 按钮，因为只要用户单击列表项控件就会返回到`OnClickListener`.

**Kotlin 版本**

```
// setup the alert builder
val builder = AlertDialog.Builder(context)
builder.setTitle("Choose an animal")

// add a list
val animals = arrayOf("horse", "cow", "camel", "sheep", "goat")
builder.setItems(animals) { dialog, which ->
    when (which) {
        0 -> { /* horse */ }
        1 -> { /* cow   */ }
        2 -> { /* camel */ }
        3 -> { /* sheep */ }
        4 -> { /* goat  */ }
    }
}

// create and show the alert dialog
val dialog = builder.create()
dialog.show() 
```

# 单选按钮列表

[![在此处输入图像描述](https://i.stack.imgur.com/uyfUy.png)](https://i.stack.imgur.com/uyfUy.png)

单选按钮列表相对于传统列表的优点是用户可以看到当前设置是什么。制作单选按钮列表的方法是使用`setSingleChoiceItems`.

**爪哇版**

```
// setup the alert builder
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Choose an animal");

// add a radio button list
String[] animals = {"horse", "cow", "camel", "sheep", "goat"};
int checkedItem = 1; // cow
builder.setSingleChoiceItems(animals, checkedItem, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // user checked an item
    }
});

// add OK and Cancel buttons
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // user clicked OK
    }
});
builder.setNegativeButton("Cancel", null);

// create and show the alert dialog
AlertDialog dialog = builder.create();
dialog.show(); 
```

我在这里对所选项目进行了硬编码，但您可以在实际项目中使用类成员变量对其进行跟踪。

**Kotlin 版本**

```
// setup the alert builder
val builder = AlertDialog.Builder(context)
builder.setTitle("Choose an animal")

// add a radio button list
val animals = arrayOf("horse", "cow", "camel", "sheep", "goat")
val checkedItem = 1 // cow
builder.setSingleChoiceItems(animals, checkedItem) { dialog, which ->
    // user checked an item
}

// add OK and Cancel buttons
builder.setPositiveButton("OK") { dialog, which ->
    // user clicked OK
}
builder.setNegativeButton("Cancel", null)

// create and show the alert dialog
val dialog = builder.create()
dialog.show() 
```

# 复选框列表

[![在此处输入图像描述](https://i.stack.imgur.com/9G2mW.png)](https://i.stack.imgur.com/9G2mW.png)

制作复选框列表的方法是使用`setMultiChoiceItems`.

**爪哇版**

```
// setup the alert builder
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Choose some animals");

// add a checkbox list
String[] animals = {"horse", "cow", "camel", "sheep", "goat"};
boolean[] checkedItems = {true, false, false, true, false};
builder.setMultiChoiceItems(animals, checkedItems, new DialogInterface.OnMultiChoiceClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which, boolean isChecked) {
        // user checked or unchecked a box
    }
});

// add OK and Cancel buttons
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // user clicked OK
    }
});
builder.setNegativeButton("Cancel", null);

// create and show the alert dialog
AlertDialog dialog = builder.create();
dialog.show(); 
```

在这里，我硬编码了列表中的哪些项目已经被检查过。您更有可能希望在`ArrayList<Integer>`. 有关更多详细信息，请参阅[文档示例](https://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)。`null`如果您总是希望一切都开始未选中，您还可以将选中的项目设置为。

**Kotlin 版本**

```
// setup the alert builder
val builder = AlertDialog.Builder(context)
builder.setTitle("Choose some animals")

// add a checkbox list
val animals = arrayOf("horse", "cow", "camel", "sheep", "goat")
val checkedItems = booleanArrayOf(true, false, false, true, false)
builder.setMultiChoiceItems(animals, checkedItems) { dialog, which, isChecked ->
    // user checked or unchecked a box
}

// add OK and Cancel buttons
builder.setPositiveButton("OK") { dialog, which ->
    // user clicked OK
}
builder.setNegativeButton("Cancel", null)

// create and show the alert dialog
val dialog = builder.create()
dialog.show() 
```

# 笔记

*   对于`context`上面代码中的，不要使用，`getApplicationContext()`否则你会得到一个`IllegalStateException`（见[这里](https://stackoverflow.com/questions/21304032/java-lang-illegalstateexception-in-custom-dialog)为什么）。相反，获取对活动上下文的引用，例如 with `this`。
*   您还可以使用[`setAdapter`](https://developer.android.com/reference/android/app/AlertDialog.Builder.html#setAdapter(android.widget.ListAdapter,%20android.content.DialogInterface.OnClickListener))or[`setCursor`](https://developer.android.com/reference/android/app/AlertDialog.Builder.html#setCursor(android.database.Cursor,%20android.content.DialogInterface.OnClickListener,%20java.lang.String))或将 or 传入`Cursor`or`ListAdapter`来`setSingleChoiceItems`填充来自数据库或其他来源的列表项`setMultiChoiceItems`。
*   如果列表的长度超出屏幕的大小，则对话框将自动滚动它。但是，如果您的列表很长，我猜您可能应该使用[RecyclerView创建一个](https://stackoverflow.com/questions/40584424/simple-android-recyclerview-example/40584425#40584425)[自定义对话框](https://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)。
*   为了测试上面的所有示例，我只有一个带有单个按钮的简单项目，而不是在单击时显示对话框：

    ```
    import android.support.v7.app.AppCompatActivity;

    public class MainActivity extends AppCompatActivity {

        Context context;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            context = this;
        }

        public void showAlertDialogButtonClicked(View view) {

            // example code to create alert dialog lists goes here
        }
    } 
    ```

# 有关的

*   [带有一个、两个和三个按钮的 Android 警报对话框](https://stackoverflow.com/questions/43513919/android-alert-dialog-with-one-two-and-three-buttons) [![在此处输入图像描述](https://i.stack.imgur.com/vUE93.png)](https://i.stack.imgur.com/vUE93.png)
*   [如何实现自定义的 AlertDialog 视图](https://stackoverflow.com/a/46742001/3681880) [![在此处输入图像描述](https://i.stack.imgur.com/keoAH.png)](https://i.stack.imgur.com/keoAH.png)

* * *

## 回答 #3

> 赞同：127
> 
> 时间：2013-04-02T11:32:55.103

您可以使用自定义对话框。

自定义对话框布局。`list.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <ListView
        android:id="@+id/lv"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

在你的活动中

```
Dialog dialog = new Dialog(Activity.this);
       dialog.setContentView(R.layout.list)

ListView lv = (ListView ) dialog.findViewById(R.id.lv);
dialog.setCancelable(true);
dialog.setTitle("ListView");
dialog.show(); 
```

编辑：

使用警报对话框

```
String names[] ={"A","B","C","D"};
AlertDialog.Builder alertDialog = new AlertDialog.Builder(MainActivity.this);
LayoutInflater inflater = getLayoutInflater();
View convertView = (View) inflater.inflate(R.layout.custom, null);
alertDialog.setView(convertView);
alertDialog.setTitle("List");
ListView lv = (ListView) convertView.findViewById(R.id.lv);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,names);
lv.setAdapter(adapter);
alertDialog.show(); 
```

自定义.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</ListView> 
```

折断

![在此处输入图像描述](https://i.stack.imgur.com/jUYUr.png)

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2015-10-07T06:54:44.173

```
final CharSequence[] items = {"A", "B", "C"};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Make your selection");
builder.setItems(items, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {
        // Do something with the selection
        mDoneButton.setText(items[item]);
    }
});
AlertDialog alert = builder.create();
alert.show(); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-10-15T07:13:27.560

使用“ `import android.app.AlertDialog;`”导入然后你写

```
 String[] items = {"...","...."};             
    AlertDialog.Builder build = new AlertDialog.Builder(context);
    build.setItems(items, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            //do stuff....
        }
    }).create().show(); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-04-20T04:48:20.573

这是如何使用自定义列表项显示自定义布局对话框，可以根据您的要求进行自定义。

[![在此处输入图像描述](https://i.stack.imgur.com/iC1UL.png)](https://i.stack.imgur.com/iC1UL.png)

步骤 - 1 创建对话框的布局，即：-

**R.layout.assignment_dialog_list_view**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/rectangle_round_corner_assignment_alert"
    android:orientation="vertical">
    <TextView
        android:id="@+id/tv_popup_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="8dp"
        android:singleLine="true"
        android:paddingStart="4dp"
        android:text="View as:"
        android:textColor="#4f4f4f" />

    <ListView
        android:id="@+id/lv_assignment_users"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
</LinearLayout> 
```

STEP - 2 根据您的业务逻辑创建自定义列表项布局

**R.layout.item_assignment_dialog_list_layout**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:padding="4dp"
    android:orientation="horizontal">
    <ImageView
        android:id="@+id/iv_user_profile_image"
        android:visibility="visible"
        android:layout_width="42dp"
        android:layout_height="42dp" />
    <TextView
        android:id="@+id/tv_user_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="8dp"
        android:layout_marginStart="8dp"
        android:paddingBottom="8dp"
        android:textColor="#666666"
        android:textSize="18sp"
        tools:text="ABCD XYZ" />
</LinearLayout> 
```

STEP - 3 创建您自己选择的数据模型类

```
public class AssignmentUserModel {

private String userId;
private String userName;
private String userRole;
private Bitmap userProfileBitmap;

public AssignmentUserModel(String userId, String userName, String userRole, Bitmap userProfileBitmap) {
    this.userId = userId;
    this.userName = userName;
    this.userRole = userRole;
    this.userProfileBitmap = userProfileBitmap;
}

public String getUserId() {
    return userId;
}

public void setUserId(String userId) {
    this.userId = userId;
}

public String getUserName() {
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}

public String getUserRole() {
    return userRole;
}

public void setUserRole(String userRole) {
    this.userRole = userRole;
}

public Bitmap getUserProfileBitmap() {
    return userProfileBitmap;
}

public void setUserProfileBitmap(Bitmap userProfileBitmap) {
    this.userProfileBitmap = userProfileBitmap;
}

} 
```

STEP - 4 创建自定义适配器

```
public class UserListAdapter extends ArrayAdapter<AssignmentUserModel> {
private final Context context;
private final List<AssignmentUserModel> userList;

public UserListAdapter(@NonNull Context context, int resource, @NonNull List<AssignmentUserModel> objects) {
    super(context, resource, objects);
    userList = objects;
    this.context = context;
 }

@SuppressLint("ViewHolder")
@NonNull
@Override
public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.item_assignment_dialog_list_layout, parent, false);
    ImageView profilePic = rowView.findViewById(R.id.iv_user_profile_image);
    TextView userName = rowView.findViewById(R.id.tv_user_name);
    AssignmentUserModel user = userList.get(position);

    userName.setText(user.getUserName());

    Bitmap bitmap = user.getUserProfileBitmap();

    profilePic.setImageDrawable(bitmap);

    return rowView;
}

} 
```

STEP - 5 创建此函数并在此方法中提供上述数据模型的 ArrayList

```
// Pass list of your model as arraylist
private void showCustomAlertDialogBoxForUserList(ArrayList<AssignmentUserModel> allUsersList) {
        final Dialog dialog = new Dialog(mActivity);
        dialog.setContentView(R.layout.assignment_dialog_list_view);
        if (dialog.getWindow() != null) {
            dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT)); // this is optional
        }
        ListView listView = dialog.findViewById(R.id.lv_assignment_users);
        TextView tv = dialog.findViewById(R.id.tv_popup_title);
        ArrayAdapter arrayAdapter = new UserListAdapter(context, R.layout.item_assignment_dialog_list_layout, allUsersList);
        listView.setAdapter(arrayAdapter);
        listView.setOnItemClickListener((adapterView, view, which, l) -> {
            Log.d(TAG, "showAssignmentsList: " + allUsersList.get(which).getUserId());
           // TODO : Listen to click callbacks at the position
        });
        dialog.show();
    } 
```

步骤 - 6 为对话框提供圆角背景

**@drawable/rectangle_round_corner_assignment_alert**

```
 <?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#ffffffff" />
    <corners android:radius="16dp" />
    <padding
        android:bottom="16dp"
        android:left="16dp"
        android:right="16dp"
        android:top="16dp" />
</shape> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-04-29T07:09:22.773

这太简单了

```
final CharSequence[] items = {"Take Photo", "Choose from Library", "Cancel"};

AlertDialog.Builder builder = new AlertDialog.Builder(MyProfile.this);

builder.setTitle("Add Photo!");
builder.setItems(items, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int item) {
        if (items[item].equals("Take Photo")) {
            getCapturesProfilePicFromCamera();
        } else if (items[item].equals("Choose from Library")) {
            getProfilePicFromGallery();
        } else if (items[item].equals("Cancel")) {
            dialog.dismiss();
        }
    }
});
builder.show(); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-04-02T11:35:12.590

作为初学者，我建议您通过[http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

我将简要介绍它的基本功能

1.  为对话框和主 Activity 创建一个 XML 文件
2.  在主要活动所需的地方创建一个android类的对象[`Dialog`](http://developer.android.com/guide/topics/ui/dialogs.html)
3.  基于 XML 文件添加自定义样式和文本
4.  调用`dialog.show()`方法。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-08-02T06:24:36.133

在科特林：

```
fun showListDialog(context: Context){
    // setup alert builder
    val builder = AlertDialog.Builder(context)
    builder.setTitle("Choose an Item")

    // add list items
    val listItems = arrayOf("Item 0","Item 1","Item 2")
    builder.setItems(listItems) { dialog, which ->
        when (which) {
            0 ->{
                Toast.makeText(context,"You Clicked Item 0",Toast.LENGTH_LONG).show()
                dialog.dismiss()
            }
            1->{
                Toast.makeText(context,"You Clicked Item 1",Toast.LENGTH_LONG).show()
                dialog.dismiss()
            }
            2->{
                Toast.makeText(context,"You Clicked Item 2",Toast.LENGTH_LONG).show()
                dialog.dismiss()
            }
        }
    }

    // create & show alert dialog
    val dialog = builder.create()
    dialog.show()
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-10-10T14:39:03.840

您实际上可以像这样使用警报对话框创建一个简单的数组。

```
 val sexArray = arrayOf("Male", "Female")
 val selectedPosition = 0

 AlertDialog.Builder(requireContext())
    .setSingleChoiceItems(sexArray, 0) { dialog, position ->
        val selectedSex = sexArray[position]
    }.show() 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-05T05:47:40.447

在AlertDialog中创建EditText单元后调用一个方法，用于一般用途，不是更顺畅吗？

```
public static void EditTextListPicker(final Activity activity, final EditText EditTextItem, final String SelectTitle, final String[] SelectList) {
    EditTextItem.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            AlertDialog.Builder builder = new AlertDialog.Builder(activity);
            builder.setTitle(SelectTitle);
            builder.setItems(SelectList, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialogInterface, int item) {
                    EditTextItem.setText(SelectList[item]);
                }
            });
            builder.create().show();
            return false;
        }
    });
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-18T08:34:08.370

```
private void AlertDialogue(final List<Animals> animals) {
 final AlertDialog.Builder alertDialog = new AlertDialog.Builder(AdminActivity.this);
 alertDialog.setTitle("Filter by tag");

 final String[] animalsArray = new String[animals.size()];

 for (int i = 0; i < tags.size(); i++) {
  animalsArray[i] = tags.get(i).getanimal();

 }

 final int checkedItem = 0;
 alertDialog.setSingleChoiceItems(animalsArray, checkedItem, new DialogInterface.OnClickListener() {
  @Override
  public void onClick(DialogInterface dialog, int which) {

   Log.e(TAG, "onClick: " + animalsArray[which]);

  }
 });

 AlertDialog alert = alertDialog.create();
 alert.setCanceledOnTouchOutside(false);
 alert.show();

} 
```

# phpunit - PHPUNIT如何将当前类放入另一个文件

> ID：15762906
> 
> 赞同：0
> 
> 时间：2013-04-02T11:27:12.313
> 
> 标签：phpunit

我有一个由其他 php 文件调用的通用 A 类。我想将当前类的名称放入 A 类中。

这里**A 类**：

```
class A extends PHPUnit_Framework_TestCase
{

............................

public static function setUpBeforeClass()
{

try {
**Here the function to get the class**  ??????
    self::$selenium = new ObjetConnexion();
    self::$tab_castest= array();
    self::$nbjeu = -1;
 } catch (Testing_Selenium_Exception $e) {
        echo $e;
    }
}

} 
```

**B**类：BTest 类扩展 A {

```
protected function setUp()
{
    ...

}
public function testConnexion()
{  
......
}
} 
```

以及 phpunit.xml 的内容：

```
 <file>Nouveaux_services/BTest.php</file>
  <file>Nouveaux_services/CTest.php</file>
  <file>Nouveaux_services/DTest.php</file>

</testsuite> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:02:34.497

你可以得到被调用的类`get_called_class()`

[http://php.net/manual/en/function.get-call-class.php](http://php.net/manual/en/function.get-called-class.php)

# asp.net - 标签上有多个 AssociatedControlID

> ID：15762907
> 
> 赞同：0
> 
> 时间：2013-04-02T11:27:15.083
> 
> 标签：asp.net, vb.net, webusercontrol

是否可以将多个 ID 关联到 asp.net 标签上的“AssociatedControlID”字段？

例子：

```
<asp:Label ID="lblColour" runat="server" AssociatedControlID="txtColourFront, txtColourBack, txtColour" Text="ColourFront" />
<asp:TextBox ID="txtColourFront" runat="server" />
<asp:TextBox ID="txtColourBack" runat="server" />
<asp:TextBox ID="txtColour" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:30:21.503

不，它不可能。

这将呈现为HTML 中元素的`for`属性。`label`

此元素不接受多个`for`属性。

# javascript - 如何从包含 ISODate 的 BSON 字符串创建 JSON 对象

> ID：15762908
> 
> 赞同：2
> 
> 时间：2013-04-02T11:27:16.443
> 
> 标签：javascript, json, node.js, bson

我正在尝试从包含 ISODate 的字符串创建一个 JSON 对象。

```
var teststring = '{ "_id" : "test001", "CreatedDate" : ISODate("2013-04-02T10:37:21.529Z") }';
console.log(JSON.parse(teststring)); 
```

得到错误：

```
undefined:1
{ "_id" : "test001", "CreatedDate" : ISODate("2013-04-02T10:37:21.529Z") }
                                     ^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:26:55.860

您的测试字符串不是有效的 JSON 字符串，因为

```
ISODate("2013-04-02T10:37:21.529Z") 
```

不是有效的 JSON 日期类型（参见[wikipedia](http://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example)）。

因此，您必须在 JSON.parse() 解析之前将您的文本字符串转换为有效的 JSON。

对于您的情况，简单/天真的文本替换可以解决问题：

```
//this should work:
var valid = teststring.replace("ISODate(", "").replace(")", "");
var parsedObj = JSON.parse(valid); 
```

请记住，`replace()`它将替换第一次出现（或所有出现，当您使用正则表达式时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:56:56.983

扩展@ user1896296的答案

```
var valid = teststring.replace("ISODate(", "").replace(")", ""); 
```

不是很健壮，不应该用于生产有价值的代码。使用正则表达式进行替换。

```
var isoRegex = /ISODate\((".+?")\)/g;
teststring = teststring.replace(isoRegex, function (match, parenGroup) {
    return parenGroup;
});
var parsedObj = JSON.parse(teststring); 
```

即使在这种情况下，这也能正常工作：

```
{
    "_id" : "test001",
    "RandomUserInput" : "Sometimes I like to say ISODate(\"2013-04-02T10:37:21.529Z\") in the body of my replies!",
    "CreatedDate" : ISODate("2013-04-02T10:37:21.529Z")
} 
```

由于用户输入中的任何双引号都必须转义，因此正则表达式不可能匹配用户提供的输入。

此外，如果您真的想将这些字段解析为日期对象，您可以编写一个辅助函数，如下所示：

```
var isoRegex = /"([^"]+?)"\s*:\s*ISODate\((".+?")\)/g;
function parseBson (bson) {
    var dateProps = [];
    bson = bson.replace(isoRegex, function (match, propName, dateStr) {
        dateProps.push(propName);
        return '"' + propName + '" : ' + dateStr;
    });

    var obj = JSON.parse(bson);

    for (var i in dateProps)
        obj[dateProps[i]] = new Date(obj[dateProps[i]]);

    return obj;
}

var parsedObj = parseBson(teststring); 
```

请注意，此功能仅适用于顶级属性。尝试自动转换嵌套属性会很棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T14:31:34.343

在 C#/.Net 中，您可以使用 Regex.Replace：

```
 var isoRegex = new Regex("ISODate[(](.+?)[)]");
    json = isoRegex.Replace(json, "$1"); 
```

这将更`ISODate("2013-04-02T10:37:21.529Z")`改为`"2013-04-02T10:37:21.529Z"`.

# regex - RegEX - 仅替换第一次出现的文本

> ID：15762909
> 
> 赞同：0
> 
> 时间：2013-04-02T11:27:18.630
> 
> 标签：regex, msbuild, msbuild-task

我试图只替换第一次出现的某些文本，首先是在[http://regexpal.com/](http://regexpal.com/)等在线工具中，然后看看这是否适用于 MSBUILD 任务。

我可以像这样在.net中做我想做的事：

```
 StringBuilder sb = new StringBuilder();
        sb.Append("IF @@TRANCOUNT>0 BEGIN");            
        sb.Append("IF @@TRANCOUNT>0 BEGIN");
        sb.Append("IF @@TRANCOUNT>0 BEGIN");
        Regex MyRgx = new Regex("IF @@TRANCOUNT>0 BEGIN");

        string Myresult = MyRgx.Replace(sb.ToString(), "foo", 1); 
```

如前所述，让这个在 MSBUILD 任务中工作是我的最终目标。我最接近的是替换除最后一个以外的所有内容（诚然，它没有关闭！）

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />

  <ItemGroup>
    <SourceFile Include="source.txt" />
    <FileToUpdate Include="FileToUpdate.txt" />    
  </ItemGroup>

  <Target Name="go">
    <!-- a) Delete our target file so we can run multiple times-->
    <Delete Files="@(FileToUpdate)" />

    <!-- b) Copy the source to the version we will amend-->
    <Copy SourceFiles= "@(SourceFile)"
      DestinationFiles="@(FileToUpdate)"
      ContinueOnError="false" />

    <!-- c) Finally.. amend the file-->
    <FileUpdate 
        Files="@(FileToUpdate)"
        Regex="IF @@TRANCOUNT>0 BEGIN(.+?)" 
        ReplacementText="...I have replaced the first match only..."
        Condition=""/>
    <!-- NB The above example replaces ALL except the last one (!)-->

  </Target>

</Project> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:49:17.270

`(.+?)`在正则表达式中意味着单词后面会有额外的文本`BEGIN`，但看起来你的测试文件只是以此结尾`BEGINS`- 所以它不能匹配它。

尝试使用`*`而不是`+`，或在文件末尾添加一些垃圾 - 取决于您的实际需求。

要解决您的初始任务 - 使用例如单行模式，它贪婪地匹配文件的其余部分：

```
<FileUpdate 
    Files="@(FileToUpdate)"
    Regex="(IF @@TRANCOUNT>0 BEGIN)(.*)" 
    ReplacementText="...I have replaced the first match only...$2"
    Singleline="true"
    Condition=""/> 
```

# c# - 使用 HTML Helper 创建视图比使用直接 HTML 更好？考虑性能

> ID：15762912
> 
> 赞同：1
> 
> 时间：2013-04-02T11:27:35.360
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, html-helper

我想知道使用 Razor 视图引擎和 Html.LabelFor()、Html.TextBoxFor() 等原生方法的 HTML Helpers 或直接 HTML 构造视图之间是否存在显着的性能差异。

有什么情况我应该避免使用 HtmlHelpers （性能方面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:34:06.490

我更喜欢在构建表单时使用辅助方法。我也不喜欢**使用**Html.TextboxFor()，99% 的时间我使用 Html.EditorFor() 作为编辑器。

所以，我建立了一个这样的表格：

```
@Html.LabelFor(model=>model.SomeField)
@Html.EditorFor(model=>model.SomeField)
@Html.ValidationMessageFor(model=>model.SomeField) 
```

这给了我很多：它确保我的所有字段都有正确的名称和 ID，并且它允许使用客户端验证，而无需我编写大量额外的标记。

使用 Html.EditorFor() 方法而不是 Html.TextboxFor()，让我有机会为正确的字段使用正确的编辑器。电子邮件字段应使用 type="email"，日期应使用 type="date"。不是类型=“文本”。使用 EditorFor()，我可以制作模板，在这里我可以使用 TextboxFor() 或只是简单的标记。这样，每个带有电子邮件字段的模型都将获得相同的编辑器，并且每个日期都将获得相同的日期选择器。

简而言之：如果您不使用 EditorForModel()，请始终使用 LabelFor()、EditorFor() 和 ValidationMessageFor()。如果您需要特殊标记，请使用模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:32:04.927

只要您以应有的方式使用助手，设计人员学习如何使用应该是相当简单的。请记住，我们的目标是让事情变得简单，如果它们最终使事情变得更复杂，则意味着它们没有被正确使用。

性能差异可以忽略不计

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:32:09.960

我没有关于性能的答案，但我对你的最后一个问题有答案。

> 有什么情况我应该避免使用 HtmlHelpers？

在我们的项目中，我们倾向于避免使用 HtmlHelpers，因为静态方法（例如 Html 辅助扩展方法）很难以我们想要的方式进行单元测试。

我们没有使用 HTML Helpers（扩展方法），而是为我们的视图提供了一个自定义基类。这个基类公开了我们的帮助服务（Uri、Html、DataEndpoint）并使事情保持可测试性。

# python - TypeError：“长”对象不是可迭代的 Python

> ID：15762915
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:27:44.830
> 
> 标签：python, arcgis, floating

我试图在 32 位浮动栅格中重新分类 PixelValue 并得到以下错误：

```
 bw_liss-3_spring_mosaick_gk3_ndvi_mask.tif

 Traceback (most recent call last):    File
 "F:\Daten_Soner\CBD06\Test\NDVI\Spring\Extract\Reclassify_Cloudmask_LISS_Summer.py",
 line 29, in <module>
      remap = RemapValue([-340282346638528860000000000000000000000,000000,2])   

 File "C:\Program Files
 (x86)\ArcGIS\Desktop10.0\arcpy\arcpy\sa\ParameterClasses.py", line
 806, in __init__
     _Remap.__init__(self, remapTable)    File "C:\Program Files (x86)\ArcGIS\Desktop10.0\arcpy\arcpy\sa\ParameterClasses.py", line
 751, in __init__
     self.remapTable = [list(record) for record in remapTable]

 TypeError: 'long' object is not iterable 
```

我使用以下脚本：

```
Import arcpy module
import arcpy, os, sys

Check out any necessary licenses
arcpy.CheckOutExtension("Spatial")

Set the workspace environment
from arcpy import env
from arcpy.sa import *
env.workspace = "F:\Daten_Soner\CBD06\Test\NDVI\Spring\Extract" 
```

从工作区获取 TIFFS 列表并打印

```
rasterList = arcpy.ListRasters()

for raster in rasterList:
    print raster
    arcpy.CalculateStatistics_management(raster)

    # Process: Reclassify
    remap = RemapValue([-340282346638528860000000000000000000000,000000,2])  
    outReclassify = Reclassify(raster, "Value", remap , "NODATA")
    outReclassify.save(raster + "_re.tif") 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:34:26.727

`RemapValue``[[oldValue, newValue],...]`当您只传递一个列表时，获取一个列表列表 ( )。

# java - 在 OSGI 之前执行代码

> ID：15762918
> 
> 赞同：0
> 
> 时间：2013-04-02T11:27:52.147
> 
> 标签：java, osgi, equinox

我们有一个基于 Eclipse 平台的软件，它记录了许多重要的消息。为了获取这些消息，我们有一个工具可以收集这些日志，将它们保存在一个 zip 文件中并删除旧日志。

现在我们想要，当用户启动我们的软件（通过单击可执行文件）时，我们的工具被执行，但在任何东西都已经被记录之前。但是，我们找不到解决方案。

到目前为止我们所做的尝试：
我们考虑将其打包到 OSGI 包中并强制它提前启动。这是不可能的（或不需要），因为在加载包之前，日志中已经有消息。

另一种尝试是使用可执行文件的[*-startup*参数](http://wiki.eclipse.org/Equinox_Launcher#Command_line_arguments)来启动我们的工具（它会自动运行），然后执行启动程序。但是，有两个问题：

1.  我们无法启动该工具，我们得到一个*NoSuchMethodError: run* -exception。代码中既没有方法，我们也没有调用过这样的方法。

2.  我们不知道如何启动Equinox-launcher。

有没有办法在加载 osgi 平台之前启动我们的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:53:58.850

为什么不[编写自己的启动器](http://njbartlett.name/2011/03/07/embedding-osgi.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:53:19.770

一个好的旧 shell 脚本怎么样？

# iphone - iPhone（iOS 5）从横向强制纵向并返回

> ID：15762929
> 
> 赞同：3
> 
> 时间：2013-04-02T11:28:22.633
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, landscape-portrait

我正在开发适用于 iOS 5 的应用程序，并且我有一个需要以纵向视图推送的控制器。从风景中以纵向模式推动控制器非常棘手，但最后我想出了如何做到这一点。我通过`presentModalViewController`或通过`pushViewController`并在我覆盖`preferredInterfaceOrientationForPresentation`metod的控制器内部显示控制器。

```
-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

它工作正常，只是它有一个问题。下面是场景。

1.  用户以横向模式握住设备，当前控制器以横向模式正确显示
2.  用户进行一些操作，出现仅纵向控制器（作为模态控制器和纵向模式）
3.  用户关闭模态控制器
4.  以前在横向工作的控制器现在是纵向的，但用户仍然以横向方式握住他的设备 ---> 这就是问题

我试图通过打电话来解决它，`[UIViewController attemptRotationToDeviceOrientation]`但它没有帮助。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:38:44.713

我希望你能得到一个更好的、有效的解决方案我做了一件令人讨厌的事情来开始工作。我的问题是我需要支持从 4.3 到 6.0。一些 pushModal 功能发生了根本性的变化，被弃用等等，在轮换方面也有变化。

我写了一个 RoatatingViewController 并添加到了根目录。我根据需要添加了推送模式和 pushviewconcollers。当我需要弹出时，我会进行检查：如果堆栈上的所需组件处于所需的方向而不是好的方向，则没有变化。否则：弹出景观并推送肖像实例并将景观数据复制到肖像。

这不好，它的内存效率不高，但在所有 iOS 版本上都可以正常工作。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:45:26.710

**你说使用 IOS 5**，但`preferredInterfaceOrientationForPresentation()`方法**只能从 IOS 6**开始。

要解决您的问题**（在 ios5 中）**，您需要`shouldAutorotateToInterfaceOrientation()`像这样覆盖该方法...

在目标视图控制器**（您在纵向模式下需要的视图控制器）**中像这样......

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

**更新：**

在当前视图控制器**（您在横向模式下需要的视图控制器）** 中像这样......

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# c++ - C ++ unicode（或wstring？）等效于（char）

> ID：15762931
> 
> 赞同：0
> 
> 时间：2013-04-02T11:28:26.723
> 
> 标签：c++, unicode

有人可以告诉我“（char）”的Unicode等价物是什么吗？

例如，对于 ASCII，我总是使用

```
 (char)(7) 
```

现在我想做同样的事情，但对于 Unicode。

但

```
 (wchar_t)(7) 
```

没有成功，并且 wchar 不存在。

我想将这个（可能的）Unicode 字符传递给一个接受 wstring 的函数。

或者换句话说：如何以编程方式从 unicode 字符值创建 wstring（如 TAB 的 7）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:36:39.717

> 我想将此（可能的）Unicode 字符传递给接受`wstring`.

然后您需要制作 a `wstring`，就像您需要`string`从 a 制作 a`char`如果您需要将 ASCII 字符传递给接受 a 的函数一样`string`。

```
function(std::wstring(1, 7)); // length 1, filled with value 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:52:33.223

内存中的数据不以 Unicode 格式存储。Unicode 为计算机上使用的每个（嗯，很多）字符提供了一个唯一编号。

在内存中，字符被编码：将字节值映射到 Unicode 数字。

你使用什么编码？

*   [UTF-8](http://en.wikipedia.org/wiki/UTF-8)：每个字符都映射到 1、2、3、4、5 或 6 字节序列。
*   [UTF-16](http://en.wikipedia.org/wiki/UTF-16)：每个字符都映射到一个 2 或 4 字节序列。
*   UCS-2：大多数字符到 2 字节序列的不完整映射。
*   [UTF-32](http://en.wikipedia.org/wiki/UTF-32)：每个字符都映射到一个 4 字节序列。

win32 中的 wchar_t 是 16 位的，字符应以~~UCS-2~~ [UTF-16](http://msdn.microsoft.com/en-us/library/dd374081%28v=vs.85%29.aspx)编码。

大多数 *NIX 上的 wchar_t 是 32 位的，字符应该以 UTF-32 编码。

**更新**

呵呵，看来我老了。我的最后一部作品是在 VS2005 中，仍然有提到 UCS-2 作为内部编码，但我想即使那已经过时了。

# database - appfabric 缓存在大量请求时的性能如何？

> ID：15762933
> 
> 赞同：0
> 
> 时间：2013-04-02T11:28:28.543
> 
> 标签：database, appfabric-cache

当用户登录到应用程序时，我将他的所有数据从数据库加载到分布式缓存中。

这意味着除非缓存出现问题，否则在用户注销之前，我永远不会再次从数据库中选择数据。

这是明智的吗？**appfabric 缓存**能否为我提供与 SQL Server 数据库相同或更好的性能？

它每天会给我数千个请求，而且请求一个接一个地发生得非常快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:02:56.917

任何缓存都将为您提供比数据库更好的性能。

您可以使用 appfabric 会话状态提供程序并将您的数据存储在会话变量中。

你可以用 redis 做同样的事情（恕我直言，这是一个比 appfabric 更好的解决方案——我都广泛使用过）

如果您没有运行网络场/多个应用程序访问缓存，您甚至可以考虑使用 .net 4 ObjectCache - 它只是使用内存而不是专用缓存服务的额外开销，并且仍然可以获得到期等功能.

缩放规则 #1 - 缓存所有内容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:09:30.740

我在一个每月有 1300 万页面浏览量的网站上工作（与其他一些网站相比可能没有那么多），我们使用了 AppFabric。当我们的网站被各种电视新闻台报道时，我们能够处理 35 倍的峰值。

当 AppFabric 不工作时，SQL 会在一两个小时后死掉。

根据我的经验，它将处理您的流量。设置一个集群，如果它不堪重负，就继续添加节点。

# java - 小错误我不知道如何解决，“不是陈述”

> ID：15762941
> 
> 赞同：-6
> 
> 时间：2013-04-02T11:28:48.263
> 
> 标签：java, syntax-error

我要做的是从最终用户那里获取输入并将其写入一个名为**dictionary.txt**的文件。然后我试图检查最终用户输入的单词是否已经在 dictionary.txt 文件中，因为我不想重复。如果该词不在字典中，那么它将存储在 dictionary.txt 中。我遇到的问题是一个`compilation error`告诉我的问题`Project3.java:81: not a statement FileWriter aDictionary = new FileWriter("dictionary.txt", true);`。

```
public static void addNewWord()throws IOException
{
    String newWord = "";
    newWord = JOptionPane.showInputDialog(null, "Enter the word you want to add to your dictionary.");
    String aLineFromFile = "";
    String filename = "dictionary.txt";
    ArrayList<String> dictionary = new ArrayList<String>();
    File resultsFile = new File(filename);
    Scanner inFile = new Scanner(resultsFile);

    while(inFile.hasNext())
         aLineFromFile = inFile.nextLine();
         if (aLineFromFile.startsWith(newWord))
         {
            dictionary.add(aLineFromFile);
            JOptionPane.showMessageDialog(null, "Word already is dictionary");
            addNewWord();
                 }

 else
    FileWriter aDictionary = new FileWriter("dictionary.txt", true);
    PrintWriter out = new PrintWriter(aDictionary);
    out.println(newWord);
    out.close();
    aDictionary.close();

  return;
} 
```

我已导入`java.io.*; javax.swing.*; java.awt.Dimension; java.util.*;` 如果有人能告诉我为什么会收到此错误并告诉我如何解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:34:13.497

不要忘记缩进，这有助于查看缺少的大括号和范围。

这应该会更好：

```
public static void addNewWord() throws IOException {
    String newWord = JOptionPane.showInputDialog(null, "Enter the word you want to add to your dictionary.");
    String filename = "dictionary.txt";
    File resultsFile = new File(filename);
    Scanner inFile = new Scanner(resultsFile);
    List<String> dictionary = new ArrayList<String>();
    while (inFile.hasNext()) {
        String aLineFromFile = inFile.nextLine();
        if (aLineFromFile.startsWith(newWord)) {
            dictionary.add(aLineFromFile);
            JOptionPane.showMessageDialog(null, "Word already is dictionary");
            addNewWord();
        } else {
            FileWriter aDictionary = new FileWriter("dictionary.txt", true);
            PrintWriter out = new PrintWriter(aDictionary);
            out.println(newWord);
            out.close();
            aDictionary.close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:33:51.703

将 else 代码放在这个`{}`块中

像这样

```
else{
         FileWriter aDictionary = new FileWriter("dictionary.txt", true);
         PrintWriter out = new PrintWriter(aDictionary);
         out.println(newWord);
         out.close();
         aDictionary.close();
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:35:30.707

使用以下修改后的代码。在 while 循环和 else 块之后你错过了大括号

```
public static void addNewWord() throws IOException {
    String newWord = "";
    newWord = JOptionPane.showInputDialog(null, "Enter the word you want to add to your dictionary.");
    String aLineFromFile = "";
    String filename = "dictionary.txt";
    ArrayList<String> dictionary = new ArrayList<String>();
    File resultsFile = new File(filename);
    Scanner inFile = new Scanner(resultsFile);

    while (inFile.hasNext()) {
        aLineFromFile = inFile.nextLine();
        if (aLineFromFile.startsWith(newWord)) {
            dictionary.add(aLineFromFile);
            JOptionPane.showMessageDialog(null, "Word already is dictionary");
            addNewWord();
        } else {
            FileWriter aDictionary = new FileWriter("dictionary.txt", true);
            PrintWriter out = new PrintWriter(aDictionary);
            out.println(newWord);
            out.close();
            aDictionary.close();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:37:07.310

这是您的代码，但这只是您的问题的开始：

```
 public static void addNewWord() throws IOException {
        String newWord;
        newWord = JOptionPane.showInputDialog(null, "Enter the word you want to add to your dictionary.");
        String aLineFromFile = "";
        String filename = "dictionary.txt";
        ArrayList<String> dictionary = new ArrayList<String>();
        File resultsFile = new File(filename);
        Scanner inFile = new Scanner(resultsFile);
        while (inFile.hasNext()) {
            aLineFromFile = inFile.nextLine();
            if (aLineFromFile.startsWith(newWord)) {
                dictionary.add(aLineFromFile);
                JOptionPane.showMessageDialog(null, "Word already is dictionary");
                addNewWord();
            } else {
                FileWriter aDictionary = new FileWriter("dictionary.txt", true);
                PrintWriter out = new PrintWriter(aDictionary);
                out.println(newWord);
                out.close();
                aDictionary.close();
            }
        }
    } 
```

我认为它的构思很糟糕。没有充分的理由将这样的功能与 UI/Swing 类混合。将两者分开，否则如果没有 Swing UI，您将永远无法使用此方法。这称为分层或关注点分离。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:38:03.577

更好的格式：

```
public static void addNewWord()throws IOException {

    String newWord = "";
    newWord = JOptionPane.showInputDialog(null, "Enter the word you want to add to your dictionary.");
    String aLineFromFile = "";
    String filename = "dictionary.txt";
    ArrayList<String> dictionary = new ArrayList<String>();
    File resultsFile = new File(filename);
    Scanner inFile = new Scanner(resultsFile);

    while (inFile.hasNext()) {
        aLineFromFile = inFile.nextLine();
        if (aLineFromFile.startsWith(newWord)) {
            dictionary.add(aLineFromFile);
            JOptionPane.showMessageDialog(null, "Word already is dictionary");
            addNewWord();
        }

        else {
            FileWriter aDictionary = new FileWriter("dictionary.txt", true);
            PrintWriter out = new PrintWriter(aDictionary);
            out.println(newWord);
            out.close();
            aDictionary.close();
        }
    }

    return;
} 
```

为代码块保留 4 个字符的缩进，即使您必须使用空格键和删除键单独执行此操作（而不是使用为您执行此操作的编辑器）。从长远来看，它可以节省您的时间。

# sharepoint - Sharepoint 2010 - 托管客户端对象模型 - 如何访问文档集（文件夹）中的文件

> ID：15762942
> 
> 赞同：1
> 
> 时间：2013-04-02T11:28:58.107
> 
> 标签：sharepoint, object, model, client

我一直在互联网上搜索这个，但没有具体参考托管客户对象模型的答案。

如何迭代存储在文档库下的文档集中的文件？我有一个名为 SAMPLELIST 的列表，所有文档集都存储在其中。每个文档集也可以存放文件。我如何迭代这些文件？

到目前为止我发现的是 LIST.ROOTFOLDER.FILES。但是，这会返回列表中的所有文件（参考 ROOFOLDER）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:51:54.960

你可以用这个

```
 ClientContext clientContext = new ClientContext("http://sharepoint");
        List sharedDocumentsList = clientContext.Web.Lists.GetByTitle("SAMPLELIST");
        CamlQuery camlQuery = new CamlQuery();
        string documentSetName = "DS1";
        camlQuery.ViewXml =
            @"<View>
            <Query>
              <Where>
                    <And>
                        <BeginsWith>
                            <FieldRef Name='ContentTypeId'/>
                            <Value Type='Text'>0x0120D5</Value>                                   
                        </BeginsWith>
                        <Eq>
                            <FieldRef Name='FileLeafRef'/>
                            <Value Type='Text'>" + documentSetName + @"</Value>
                        </Eq>
                    </And>
              </Where>
            </Query>
          </View>";
        ListItemCollection listItems = sharedDocumentsList.GetItems(camlQuery);
        clientContext.Load(sharedDocumentsList);
        clientContext.Load(listItems);
        clientContext.ExecuteQuery();
        foreach (ListItem item in listItems)
        {
                clientContext.Load(item);
                clientContext.ExecuteQuery();

                Folder folder = clientContext.Web.GetFolderByServerRelativeUrl(item.FieldValues["FileRef"].ToString());
                FileCollection files = folder.Files;

                clientContext.Load(folder);
                clientContext.Load(files);
                clientContext.ExecuteQuery();

                foreach (File file in files)
                {
                    Console.WriteLine("{0}", file.Name);
                }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T09:19:48.887

## 如何通过 SharePoint CSOM 获取文档集的文件

假设以下结构：

```
/ (Root Site)
   |
   DocCenter (Site)
       |
     Documents (Library)
         |
       2013 (Document Set) 
```

**使用 Web.GetFolderByServerRelativeUrl 方法**

使用[Web.GetFolderByServerRelativeUrl 方法](https://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.web.getfolderbyserverrelativeurl(v=office.14).aspx)获取位于指定服务器相对 URL 的 Document Set 对象，然后[使用 Folder.Files 属性](https://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.folder.files(v=office.14).aspx)获取 Document Set 中包含的所有文件的集合

```
var folderUrl = "/doccenter/Documents/2013";
using (var ctx = new ClientContext(webUri))
{
    var files = ctx.Web.GetFolderByServerRelativeUrl(folderUrl).Files;
    ctx.Load(files);
    ctx.ExecuteQuery();
} 
```

**基于查询的方法**

[以下示例演示如何使用CAML 查询](https://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.camlquery(v=office.14))返回位于文档集中的文件：

```
var folderUrl = "/doccenter/Documents/2013";
var listTitle = "Documents";
using (var ctx = new ClientContext(webUri))
{
   var list = ctx.Web.Lists.GetByTitle(listTitle);
   var qry = CamlQuery.CreateAllItemsQuery();
   qry.FolderServerRelativeUrl = folderUrl;
   var items = list.GetItems(qry);
   ctx.Load(items, icol=> icol.Include(i => i.File));
   ctx.ExecuteQuery();

   //print file names            
   foreach (var item in items)
   {
       Console.WriteLine(item.File.Name);
   }
} 
```

关键点：

*   [CamlQuery.FolderServerRelativeUrl 属性](https://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.camlquery.folderserverrelativeurl(v=office.14).aspx)用于仅返回位于特定 url 下的文件

# python - Anaconda vs. EPD Enthought vs. Python 的手动安装

> ID：15762943
> 
> 赞同：113
> 
> 时间：2013-04-02T11:29:00.670
> 
> 标签：python, epd-python, anaconda

各种 Python 包（EPD / Anaconda）与手动安装的相对优点/缺点是什么？

我已经安装了 EPD Academic，我对此没有任何问题。它提供了更多我认为我将需要的软件包，并且使用 enpkg enstaller 很容易更新。然而，环保署学术许可证需要每年更新，而免费版本的更新并不容易。

目前我真的只使用了一些包，比如[Pandas](https://en.wikipedia.org/wiki/Pandas_%28software%29)、[NumPy](http://en.wikipedia.org/wiki/NumPy)、[SciPy](http://en.wikipedia.org/wiki/SciPy)、[matplotlib](http://en.wikipedia.org/wiki/Matplotlib)、[IPython](http://en.wikipedia.org/wiki/IPython)、[Statsmodels](http://statsmodels.sourceforge.net/)以及它们各自的依赖项。

对于这种有限的使用，我最好还是手动安装，`pip install --upgrade 'package'`或者捆绑包是否提供除此之外的任何东西？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-15T17:28:45.370

**2015 年更新**：现在我总是推荐 Anaconda。它包括许多用于科学计算、数据科学、Web 开发等的 Python 包。它还提供了一个出色的环境工具，`conda`它允许在环境之间轻松切换，甚至在 Python 2 和 3 之间切换。它也很快更新随着新版本的软件包发布，您只需`conda update packagename`对其进行更新即可。

**下面的原始答案**：

在 Windows 上，复杂的是编译数学包，所以我认为手动安装是一个可行的选择，只有当你只对 . 感兴趣`Python`，没有其他包时。

因此，最好选择 EPD（现在的 Canopy）或 Anaconda。

Anaconda 有大约 270 个包，包括对大多数科学应用程序和数据分析最重要的包，即[NumPy](http://en.wikipedia.org/wiki/NumPy)、[SciPy](http://en.wikipedia.org/wiki/SciPy)、[Pandas](https://en.wikipedia.org/wiki/Pandas_%28software%29)、[IPython](http://en.wikipedia.org/wiki/IPython)、[matplotlib](http://en.wikipedia.org/wiki/Matplotlib)、[Scikit-learn](https://en.wikipedia.org/wiki/Scikit-learn)。所以如果这对你来说足够了，我会选择 Anaconda。

相反，如果您对其他包感兴趣，甚至更多如果您使用任何 Enthought 包（例如[Chaco](http://code.enthought.com/chaco/)对于实时数据可视化非常有用），那么 EPD/Canopy 可能是更好的选择。学术版在基础安装中有更多的软件包，在存储库中还有更多。Anaconda 还包括 Chaco。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-24T21:25:32.453

去年我尝试了各种 Windows 发行版，试图找到一个适合我的工作环境的发行版（在代理之后，但无法访问代理配置）。

以下是我的经验反馈：

**EPD/Canopy：** 我们有 EPD 的许可证，但它很旧，由于代理情况奇怪，我们无法更新。为了添加一些包（例如最新版本的[xlrd/xlwt](http://www.python-excel.org/)），我从源代码编译。为了更新[SciPy](http://en.wikipedia.org/wiki/SciPy)和[NumPy](http://en.wikipedia.org/wiki/NumPy)，我使用了来自[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)的预编译安装程序，但它有时会破坏兼容性。我喜欢拥有完全配置的[Py2exe](https://en.wikipedia.org/wiki/Py2exe)和[Cython](http://en.wikipedia.org/wiki/Cython)，而且它开箱即用。

过了一段时间，我尝试安装 Canopy 的免费版本，但它缺少 Cython 和 py2exe 以及一些我需要的特定高级打包，所以我从来没有真正使用过它。我的一些同事购买了完整的 Canopy 许可证，但我们仍然不确定他们将如何更新......

**Python(x,y)：** 不想为许可证而苦恼，我在家里安装了 Python(x,y)。我现在注意到的唯一缺点是标准安装要求您选择所需的软件包。这既是好事也是坏事，因为我不能确定我的客户端是否具有与我安装时完全相同的配置。（Enthought 工具套件可以安装在 Python(x,y) 中。）使用 Python(x,y) 一段时间后，我注意到我安装了 32 位版本。虽然在他们的网站上不清楚，但截至 2015 年 7 月，他们似乎没有 64 位版本。我将卸载它并获得 64 位分发版。

**Anaconda：** 当我第一次写这篇文章时，Anaconda 似乎还没有足够的包。几年后，它似乎好多了，我要试一试！

**手动：** 为了避免与我们的旧 EPD 版本的版本兼容性问题，我最终使用手动 Python 安装并从上面链接的 LFD 网站添加额外的包。它效果很好，但我仍然会向需要高级软件包（如[GDAL](https://en.wikipedia.org/wiki/GDAL)或[PyFITS](https://en.wikipedia.org/wiki/Astropy#Core_functionality)）的新用户推荐 Canopy。

**摘要：**如果您选择 Canopy，请获得完整许可证（学术或购买）。否则，使用 Python(x,y)，它最终会是一样的。

**在 Ubuntu 上：** 不需要发行版。这都是相对较新的（+/- 6 个月是可以容忍的）并且是预编译的。你只需要执行`sudo apt-get install python python-scipy`它就在那里！大多数高级软件包也在那里。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-18T14:47:57.387

其他答案很好地涵盖了基础，所以我只想评论一个尚未有人提及的特定方面。它可能相当小众，但对于 Linux 系统下的某些人来说，它*可能会成就或破坏 Anaconda 或 Canopy：*

Anaconda Python 构建使用 UCS4 Unicode 模式，而 Enthought Canopy 使用 UCS2。

这实际上意味着，如果您依赖任何由于任何原因无法自己编译的扩展（例如预编译的专有库），如果它们碰巧不是为具有相同模式的 Python 版本构建的，您可能会更快或稍后遇到类似于`undefined symbol: PyUnicodeUCS4_AsUTF8String`.

根据[PEP 0513](https://www.python.org/dev/peps/pep-0513/#ucs-2-vs-ucs-4-builds)，UCS4 目前似乎更受欢迎和推荐。此外，整个 UCS 兼容性问题似乎只影响 2.x 和 < 3.3 版本。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2016-03-01T22:53:02.607

我使用 Anaconda 多年，非常喜欢它。不幸的是，没有企业版， [IPython Notebook](https://en.wikipedia.org/wiki/IPython#Notebook)（现在的[Jupyter ）就无法使用。](https://en.wikipedia.org/wiki/IPython#Project_Jupyter)

我想在课堂上使用 Jupyter 笔记本，所以我改用 Canopy。安装我们需要的所有软件包似乎很容易。诚然，我们还没有对它们进行全部测试。

# codenameone - 代号一中的 Datespinner

> ID：15762945
> 
> 赞同：-1
> 
> 时间：2013-04-02T11:29:06.227
> 
> 标签：codenameone

我已经在我的 GUI 表单中使用了 datespinner 来选择日期，但它并没有显示在所有手机中，我在这仅有的两个手机 diaplaydatespinner 中测试了 8 个手机，所有其他的不显示日期微调器，但日期微调器的功能正在工作。请帮我解决这个问题，或者让我知道我们如何在代号中为所有手机正确使用日期微调器。我目前正在使用 android 设备。问候，梅加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:09:55.450

你能再清楚一点吗？

我假设手机不是 iOS 或 Android 手机？如果是这样，这些手机的主题不包括微调器样式，因为这些设备通常没有类似于微调器的组件。我们通常建议人们在这些设备上使用日历组件，尽管您可以使用 Spinner，假设设备是触摸设备并且您在主题中添加了适当的样式。

# linq - 错误 LINQ 表达式包含对与不同上下文关联的查询的引用

> ID：15762949
> 
> 赞同：2
> 
> 时间：2013-04-02T11:29:13.163
> 
> 标签：linq, join, entity-framework-5

执行以下查询时出现错误

**错误：** *指定的 LINQ 表达式包含对与不同上下文关联的查询的引用*

**询问：**

```
var wordlePuzzle = (from wp in wordlepostitionRepository.All
join wtc in wordletextclueRepository.All on wp.WordleTexCluetId equals wtc.WordleTextClueId
join w in wordleRepository.All on wtc.WordleId equals w.WordleId
where wtc.WordleId == id
select new WordlePuzzle
{
   Row = w.WordleRow,
   Column = w.WordleColumn,
   Title = w.WordleTitle,
   DifficultyLevel = DifficultyLevel.Easy,
   Duration = w.WordleDuration,
   ExpiresOn = w.ExpireDate
}); 
```

我试过`.AsEnumerable();`在查询结束后追加，但它仍然给出错误。

对于所有这些表，我只有一个数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:35:45.783

看看实现工作单元模式，以便您可以跨存储库共享上下文实例。

网上有很多例子，例如[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns -in-an-asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

# android - 如何在android中使用耳机按钮作为通话按钮

> ID：15762953
> 
> 赞同：0
> 
> 时间：2013-04-02T11:29:28.417
> 
> 标签：android

我想在android中使用耳机按钮“KEYCODE_HEADSETHOOK”作为通话按钮，即按住时我可以做某事，然后当我释放它时停止。谢谢

这是我的代码

```
if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK/*KEYCODE_HEADSETHOOK*/ && event.getAction() == KeyEvent.ACTION_DOWN) {
     Log.e("RAM","Set");
     setPushToTalk(true);
     return true;
     }
    else if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK && event.getRepeatCount() == 0 && (event.getFlags() & KeyEvent.FLAG_LONG_PRESS) == KeyEvent.FLAG_LONG_PRESS) {
        switch (keyCode) {
        case MotionEvent.ACTION_DOWN:
            if(!mService.isConnected()){
                playTone();
                return false ;
            }
            boolean waitFlag = false;
            for (User user : mService.getUserList()) {
                if (user.getChannel().equals(getChannel())) {
                    if (user.talkingState == 1)
                        waitFlag = true;// user);
                    // Log.e("Talking user",user.name+"/"+user.talkingState);
                }
            }
            if (waitFlag){
                sendWaitingMsg();
            }
            else{
                setPushToTalk(true);
            }
            Log.e("headphone btn", "down");
            return true;
        case MotionEvent.ACTION_UP:
            setPushToTalk(false);
            Log.e("headphone btn", "up");
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:47:25.583

看着[http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HEADSETHOOK](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HEADSETHOOK)

它看起来像一个单一的标志。它只会在按下时发送一条消息，按住不会产生稳定的输入，您必须使用按钮“切换”通话，如果标志被它打开/关闭，也许允许语音检测功能或避免keyEvent 完全和做硬件寻址？

# iphone - 无法使用自定义比较器对两个属性的数组进行排序

> ID：15762956
> 
> 赞同：0
> 
> 时间：2013-04-02T11:29:31.810
> 
> 标签：iphone, ios, objective-c, macos, ipad

编辑：正如我所想，甚至没有问题，我只是使用错误的值来检查我的结果。

我在比较我的数据库的自定义对象与以非常特定的顺序对它们进行排序的目标时遇到了一点麻烦，原则上，这很容易，排序机制必须使用这个由字符串表示的自定义对象的两个属性，但也可能包含数值。

这是我目前正在尝试修复的自定义比较器块。

```
NSArray *sortedArray = [baseAry sortedArrayUsingComparator:^NSComparisonResult(Obj *o1, Obj *o2) {
NSComparisonResult comp1 = [o1.attr_a compare:o2.attr_a];
if (comp1 == NSOrderedSame) {
    return [o1.attr_b compare:o2.attr_b];    
}
return [o1.attr_a compare:o2.attr_a]; 
}]; 
```

最后，列表应如下所示：

*   12 - 3
*   12 - 8
*   13 - 1
*   14 - 2
*   14 - 4
*   22 - 1 等

但是使用当前的比较器，我只能得到这样的结果：

*   12 - 8
*   12 - 3
*   13 - 1
*   14 - 4
*   14 - 2
*   22 - 3
*   22 - 2
*   22 - 1

有没有一种舒适的方法可以用一段代码来做到这一点？我可以想象的另一种方法是将列表拆分为子列表并将它们单独排序并最终将它们粘合在一起，但这可能需要更高的计算能力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:37:23.273

您应该`attr_a`首先比较两个对象。如果它们相等，则比较`attr_b`两个对象：

```
NSComparisonResult comp = [o1.attr_a compare:o2.attr_a];
if (comp == NSOrderedSame) {
    comp = [o1.attr_b compare:o2.attr_b];    
}
return comp; 
```

（您的代码将`attr_a`第一个对象与`attr_b`第二个对象进行比较，这没有多大意义。）

# wpf - 将 ComboBox DataTemplate 绑定到 ItemSource 属性

> ID：15762957
> 
> 赞同：2
> 
> 时间：2013-04-02T11:29:34.263
> 
> 标签：wpf, data-binding, mvvm, combobox

我在 GridView 列中有一个 ComboBox 的 DataTemplate。我想在编辑单元格时显示一个 ComboBox ，否则显示一个 TextBlock 。但是，我无法让 TextBox 显示所需的值。

该行的 ViewModel 只有 RegionId，但 Combo 绑定到 Region 对象的集合（带有 Id 和 Name）。我想在未编辑值时显示 Region.Name ，目前我只能找到一种显示 RegionId 的方法，因为 ViewModel 不包含 Name 属性。

我正在使用 Telerik 组合框，但我认为我的问题与标准 ComboBox 控件相同，因为我认为这只是一个绑定问题。

我应该如何在 DataTemplate 中绑定我的 TextBlock？

```
<telerik:GridViewDataColumn>
<telerik:GridViewDataColumn.CellTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding RegionId}" />  <!-- would like Region.Name -->
    </DataTemplate>
</telerik:GridViewDataColumn.CellTemplate>
<telerik:GridViewDataColumn.CellEditTemplate>
    <DataTemplate>
        <telerik:RadComboBox ItemsSource="{Binding Source={StaticResource regionView}}" 
            DisplayMemberPath="Name" SelectedValuePath="Id" SelectedValue="{Binding Path=RegionId, Mode=TwoWay}" />
    </DataTemplate>
</telerik:GridViewDataColumn.CellEditTemplate>
</telerik:GridViewDataColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:27:17.147

ViewModel 应该反映在 中`View`，因此您最好的做法就是`Name`向您的`ViewModel`

但是由于您在[评论](https://stackoverflow.com/questions/15762957/bind-combobox-datatemplate-to-itemsource-property#comment22405284_15762957)中说您是在固定数据合同中定义的，因此`ViewModel`您可以改用 a`Converter`将`Id``Name`

如果您的转换器代码可以访问 的列表`Regions`，那么使用[IValueConverter是最简单的](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

```
<TextBlock Text="{Binding RegionId, Converter={StaticResource MyRegionIdToNameConverter}}" /> 
```

但如果没有，您将不得不使用[IMultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)将两个参数传入

```
<TextBlock.Text>
    <MultiBinding Converter="{StaticResource MyRegionIdToNameMultiConverter}">
        <Binding Source="{StaticResource regionView}"/>
        <Binding Path="RegionId" />
    </MultiBinding>
</TextBlock.Text> 
```

# php - 正则表达式仅在整个字符串中传递某些字符

> ID：15762960
> 
> 赞同：1
> 
> 时间：2013-04-02T11:29:38.133
> 
> 标签：php, regex

我有一个字符串（可以是任意长度，最多 255 个字符），它需要检查每个字符并确保它只包含以下字符（可以是任何顺序）：

*   字母（az 不区分大小写，AZ 也不区分大小写）
*   数字 (0-9)
*   连字符 (-)
*   和号 (&)
*   撇号 (')
*   句号 (.)
*   斜线 (/)
*   仅单个空格（理想情况下，如果可以单独标记它以允许我删除任何其他不需要的空格，那就太好了）

因此，例如，以下将成功

> 唐宁街 10 号

但以下不会

> 10，唐宁街

正则表达式能够做到这一点吗？将使用 PHP`preg_match`函数。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:44:40.493

单个字符匹配可以使用字符类完成，类似于您尝试过的：

```
[a-zA-Z0-9\-&'./] 
```

然后，您可以通过在其后添加来指定任何大于或等于这些字符之一的数字`+`。但是由于您要验证 is 不应超过 255 个字符，您也可以使用显式量词来执行此操作：`{0,255}`允许从 0 到 255 的任何长度。请注意，连字符被转义，因为它在 a 中具有特殊含义字符类。您可以通过使用`i`修饰符使模式不区分大小写来简化此操作。

匹配单个空格的要求*有点*复杂，有几种方法可以做到这一点，但既然你也说你想将它们标准化为一个空格，我建议你先这样做，这样你就可以添加为简单起见，为您的角色类留出空间。这可以通过另一个正则表达式轻松完成：

```
/ +/ 
```

这匹配每个包含 1 个或多个空格字符的块，因此您只需用一个空格替换所有匹配项。

现在您知道字符串只包含单个空格，您可以简单地断言整个字符串只包含列表中的字符，方法是使用主题断言`^`和开始和结束。`$`所以把它们放在一起，你会得到这样的东西：

```
// Replace all space blocks to a single space
$normalizedSpace = preg_replace('# +#', ' ', $input);

// Validate the input contains only the chars you want
if (!preg_match('#^[a-z0-9\-&\'./ ]{0,255}$#i', $normalizedSpace)) {
    // Data invalid, handle error here
} else {
    // If you get here the data is valid
    $validData = trim($normalizedSpace);
} 
```

我怀疑您也会想要`trim()`数据，尽管情况可能并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:43:32.173

这将匹配允许的字符，最多允许 255 个字符（或空字符串）。

```
/^[a-z0-9'.\/& -]{0,255}$/iD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:45:52.183

您可以否定正则表达式范围：

```
[^a-zA-Z0-9 -'&./] 
```

这将匹配除 az、AZ、0-9、' '、'-'、''&、'.'、'/' 以外的任何字符。

如果您得到匹配项，则字符串中存在错误。

这确实 npot 处理 whitspace，因为这是在验证字符串之前应该处理的问题。

[http://www.webdeveloper.com/forum/showthread.php?230179-How-do-I-reduce-multiple-spaces-into-a-single-space-using-preg_replace](http://www.webdeveloper.com/forum/showthread.php?230179-How-do-I-reduce-multiple-spaces-into-a-single-space-using-preg_replace)

# c - gcc -Wpadded 不提供任何警告

> ID：15762970
> 
> 赞同：5
> 
> 时间：2013-04-02T11:30:05.150
> 
> 标签：c, gcc

我正在尝试使用 gcc 的 -Wpadded 选项来了解 gcc 是否可以帮助我找出结构是否被填充。这是以下代码。

```
#include<stdio.h>

struct my {
    char *name;
    int age;
} my_details;

int main() {
    struct my person1;
    return 0;
} 
```

我使用以下代码编译了代码。`gcc -Wpadded alignment_demo.c`. 它没有返回任何警告。那么是我的结构没有填充还是我遗漏了什么？`man gcc`但是显示它支持一个名为 -Wpadded 的选项。请帮助

谢谢奇丹巴拉姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T11:35:12.437

似乎 pack struct 默认为 - 4。（`gcc -fpack-struct=4`）
如果是这样 - 比这个结构已经对齐。
因为

```
char* - 4 or 8 bytes
int - 4 bytes 
```

如果你运行这个，你会收到警告：

```
azat:~$ gcc -Wpadded -fpack-struct=8 -o test /tmp/test.c
/tmp/test.c:6:1: warning: padding struct size to alignment boundary [-Wpadded] 
```

由于`int`.

# opencv - Kinect for Windows 在 Windows7 上使用 GCC 编译的 OpenCV 而不是 Visual C++！

> ID：15762971
> 
> 赞同：0
> 
> 时间：2013-04-02T11:30:09.700
> 
> 标签：opencv, kinect, openkinect

我已经被困了好几个星期了，我几乎要把我的脸（或 MS 的某个人）砸在墙上。我想使用 GCC 编译带有 Kinect 支持的 OpenCV。我没有看到没有办法在没有视觉 c 的情况下在 windows 上编译任何与 Kinect 相关的东西。为什么会这样？许多库，如旧的 OpenNI 或 freenect 是交叉兼容的，但在 Windows 上您必须使用 Visual c++？我想使用 GCC，因为我的所有项目（以及我需要 kinect 的当前项目）都是使用 GCC（windows 上的 mingw）制作和编译的。我已经尝试了一切。旧 OpenNI (<2)、OpenKinect、Windows SDK，应有尽有。没有 Visual c++ 就无法编译，或者如果它们编译了，那么它们由于其他原因无法工作。就像 OpenNI2 根本不适用于 gcc，OpenNI<2 不适用于 Kinect for Windows，OpenKinect 不适用于 K4W，如果可以，那么它需要 Visual c++，windows sdk 没有其他任何东西，然后是 Visual c++。如果只能在一个平台上用 8gb 软件编译，那么用 c++ 编写代码有什么意义？

那么请问，有没有人知道任何编译 OpenCV 的方法，它可以与 K4W 一起使用，并且可以使用非可视 C++ 编译器进行编译？即使我切换到 Linux，我仍然无法使用 K4W，因为该平台上没有库支持它。我想使用 Ubuntu，但这似乎也不可行。所以基本上Kinect，虽然很酷，但它可以运行和编译的东西非常有限？

像这样的问题很多，但没有人回答。所以我相信没有人能够运行它，也没有人能够只是来到这里说这是不可能的。至少那时我会知道我白白浪费了大约 2 周的时间，我可以扔掉我的 Kinect。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:38:28.187

不同的 ABI，允许 1 个编译器。

# asp.net - 我无法在浏览器中显示来自 WCF 的数据

> ID：15762972
> 
> 赞同：0
> 
> 时间：2013-04-02T11:30:16.937
> 
> 标签：asp.net, xml, wcf, xpo

大家，早安，

我有一个 web 应用程序项目，我添加了一个 xpo 模型来从数据库中检索数据，并且我添加了一个 webservice WCF ( .svc ) 来发布从 xpo 检索到的数据。问题是当我用谷歌浏览器浏览网络服务时，它显示给我：

此页面包含以下错误：

第 2 行第 2 列的错误：StartTag: invalid element name 下面是页面的呈现直到第一个错误

当我使用内部网络浏览器时，它会显示：

La page XML ne peut pas être affichée Impossible d'afficher l'entrée XML en utilisant la feuille de style XSL。Corrigez l'erreur, puis cliquez sur le bouton Actualiser ou réessayez ultérieurement。

* * *

Nom commencé avec un caractère non valide。Erreur lors du traitement de la ressource

<%@ ServiceHost 带有下划线。

我在一组 3 人中工作，即使我们有相同的代码，他们的数据也没有显示！

我正在使用 II8、VS2010、SQL SERVER 2012

这是我的 .svc 文件的内容：

命名空间 DxWCF {

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class MyWCF : XpoDataServiceV3
{

    public MyWCF() : base(new MyContext("XpoContext", "BaseWCF", CreateDataLayer())) { }
    static IDataLayer CreateDataLayer()
    {
        ConnectionStringSettings mySetting = ConfigurationManager.ConnectionStrings["myconn"];
        if (mySetting == null || string.IsNullOrEmpty(mySetting.ConnectionString))
            throw new Exception("Fatal error: missing connecting string in web.config file");
        string myconn = mySetting.ConnectionString;

        DevExpress.Xpo.Metadata.XPDictionary dict = new DevExpress.Xpo.Metadata.ReflectionDictionary();
        // Initialize the XPO dictionary. 
        dict.GetDataStoreSchema(typeof(Users).Assembly);
        IDataStore store = XpoDefault.GetConnectionProvider(myconn, DevExpress.Xpo.DB.AutoCreateOption.SchemaAlreadyExists);
        return new ThreadSafeDataLayer(dict, store);
    }
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
        config.DataServiceBehavior.AcceptProjectionRequests = true;
    }
}
public class MyContext : XpoContext
{
    public MyContext(string containerName, string namespaceName, IDataLayer dataLayer)
        : base(containerName, namespaceName, dataLayer) { }
} 
```

}

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:34:53.850

尝试删除空间 <%@_HERE_IS_EXTRA_SPACE_ServiceHost 。. .

# eclipse - 日食和轴 2 的壁垒安全性

> ID：15762973
> 
> 赞同：0
> 
> 时间：2013-04-02T11:30:19.130
> 
> 标签：eclipse, axis2, rampart

所以我按照本教程使用轴 2 和 eclipse 创建了我的第一个 Web 服务

[http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

现在我想为这个网络服务添加安全性，所以我下载了壁垒。但我还没有找到关于如何在 Eclipse 中使用壁垒以及将这个 .mar 文件和 .jar 文件放在哪里的教程

如果您有一些好的入门教程或链接或您解决的类似问题，我将不胜感激；

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T01:14:23.547

这是在 Eclipse 上执行此操作的一个很好的教程。第 19 页详细介绍了使用 WS 安全性保护 Web 服务的配置细节和步骤。在那里，您还将找到有关通过 SSL 进行保护的详细信息。

[http://jkrzemie.files.wordpress.com/2011/02/ws.pdf](http://jkrzemie.files.wordpress.com/2011/02/ws.pdf)

# javascript - 我不明白为什么这个 JS/JQuery IF 语句不能像我期望的那样工作

> ID：15762977
> 
> 赞同：2
> 
> 时间：2013-04-02T11:30:35.917
> 
> 标签：javascript, jquery

请有点同情，因为我对这些语言很陌生。 [http://jsfiddle.net/3vyJR/](http://jsfiddle.net/3vyJR/)

我想要实现的目标非常简单。我正在尝试获取 Jquerys scrollTop 方法的值并将其存储在一个变量中。然后使用JS IF语句检查变量的值，如果小于4则背景为绿色，否则为蓝色。

在下面的代码中，我使用 alert 来告诉我页面加载时 scrolltop 的值，它告诉我它是 0，所以我希望页面是绿色的，但它不是蓝色的。

有人可以告诉我代码有什么问题吗？

```
$(document).ready(function(){ 
    var n = $(document).scrollTop;
    alert($(document).scrollTop());
    if (n <= 4) {
        $("body").css("background", "green");
    } 
    else {
        $("body").css("background", "blue");            
    }
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:32:34.837

尝试

```
var n = $(document).scrollTop(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T11:32:46.323

n 未设置为数字，因为您在 scrollTop 之后缺少 ();

尝试：

```
var n = $(document).scrollTop(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:33:11.023

试试这个

```
var n = $(document).scrollTop(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T11:35:03.543

你可能想写

```
var n = $(document).scrollTop(); 
```

代替

```
var n = $(document).scrollTop; 
```

`$(document).scrollTop`返回一个`function`实现`$.scrollTop()`

可能是笔误？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T11:36:39.193

您有拼写错误要纠正，您必须使用

var n = $(document).scrollTop();

您可以在 IE 中使用较旧的文档类型

```
var n = (document.documentElement && document.documentElement.scrollTop) || 
          document.body.scrollTop; 
```

得到 n = 0

# java - String.ReplaceAll 中的正则表达式

> ID：15762978
> 
> 赞同：0
> 
> 时间：2013-04-02T11:30:38.293
> 
> 标签：java, regex, string

我有不喜欢美元符号的代码，必须在替换时可见。

```
String s1= "this is amount <AMOUNT> you must pay";
s1.replaceAll("<AMOUNT>", "$2.60");
System.out.print(s1); 
```

我有例外`java.lang.IllegalArgumentException: Illegal group reference`

我渴望得到字符串`"this is amount $2.60 you must pay"`

如何更改我的代码以获得所需的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:32:31.273

如果您不需要使用正则表达式（您似乎不需要），请`replace`改用：

```
s1 = s1.replace("<AMOUNT>", "$2.60"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T11:32:59.073

您必须像这样更改代码：

```
 String s1= "this is amount <AMOUNT> you must pay";
    s1 = s1.replaceAll("<AMOUNT>", "\\$2.60");
    System.out.print(s1); 
```

1) 转义`$`字符

2）您需要保存`replaceAll`方法的结果，因此`s1`再次将其分配给。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T11:33:55.700

只需使用替换即可。无需使用正则表达式。

```
s1 = s1.replace("<AMOUNT>", "$2.60"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T11:33:23.097

正则表达式使用特殊字符`$`来指示表达式中的组。这就是你感到困惑的原因。如果你想要字面的东西，就逃避它。

```
public static void main(String[] args) {  
    String s1= "this is amount <AMOUNT> you must pay";
    System.out.print(s1.replaceAll("<AMOUNT>", "\\$2.60"));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:34:34.717

不使用正则表达式时，应使用replace()。

此外，您应该将生成的字符串存储在其他地方，例如

```
String s1 = "this is amount <AMOUNT> you must pay";
String s2 = s1.replace("<AMOUNT>", "$2.60");
System.out.println(s2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T11:43:33.947

在符号`\\`前使用双斜杠。`$`

```
String s1 = "this is amount <AMOUNT>you must pay";
s1 =s1.replaceAll("<AMOUNT>", "\\$2.60");
System.out.print(s1); 
```

# excel - 从 Excel 范围填充 Outlook 中的列表框 - 获取单元格的超链接

> ID：15762987
> 
> 赞同：2
> 
> 时间：2013-04-02T11:30:59.390
> 
> 标签：excel, vba, hyperlink, outlook, range

我正在尝试使用 Excel 范围中的数据填充 Outlook VBA 中的多列列表框。

到目前为止，我已经设法使用以下代码使其工作：

```
Private Sub CommandButton1_Click()

'Late binding.  No reference to Excel Object required.
Dim xlApp As Object
Dim xlWB As Object
Dim xlWS As Object
Dim cRows As Long
Dim I As Long
  Set xlApp = CreateObject("Excel.Application")
  'Open the spreadsheet to get data
  Set xlWB = xlApp.Workbooks.Open("Query Log.xlsx")
  Set xlWS = xlWB.Worksheets(1)
  cRows = xlWS.Range("Guides").Rows.Count - xlWS.Range("Guides").Row + 1
  ListBox1.ColumnCount = 2
  'Populate the listbox.
  With Me.ListBox1
    For I = 2 To cRows
       'Use .AddItem property to add a new row for each record and populate column 0
      .AddItem xlWS.Range("Guides").Cells(I, 1)
      'Use .List method to populate the remaining columns
      .List(.ListCount - 1, 1) = xlWS.Range("Guides").Cells(I, 2)
    Next I
  End With
  'Clean up
  Set xlWS = Nothing
  Set xlWB = Nothing
  xlApp.Quit
  Set xlApp = Nothing
lbl_Exit:
  Exit Sub
End Sub 
```

Excel 范围为 2 列 - 第一列是标题，第二列是 Word 文档的超链接单元格。

With the code above I can get the listbox populated fine, but what I want to do is when one of the rows has been selected I want to be able to find out the hyperlink that is in the corresponding cell.

例如，范围如下所示：

```
Guide 1  |  Link to guide (<--- hyperlinked to "guide1.doc")
Guide 2  |  Link to guide (<--- hyperlinked to "guide2.doc")
Guide 3  |  Link to guide (<--- hyperlinked to "guide3.doc")
Guide 4  |  Link to guide (<--- hyperlinked to "guide4.doc") 
```

使用代码我得到超链接文本（例如，“链接到指南”），但我需要超链接位置是什么（例如，“guide1.doc”）。

有什么方法可以将超链接位置加载到列表框中，而无需重写 Excel 文件？（它是由其他人维护的，所以它是可能的，但需要很长时间才能这样做）。

我希望我清楚我要做什么！

有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:03:54.750

你的问题很清楚。Excel 有一个`Hyperlinks`集合，可让您获取超链接的文本和地址。这个集合可以是一个范围的属性，所以很容易做你想做的事。

第一个示例假定要显示的文本位于超链接上（一般情况）：

```
Private Sub CommandButton1_Click()

    'Late binding.  No reference to Excel Object required.

    Dim xlApp As Object
    Dim xlWB As Object
    Dim xlWS As Object
    Dim cRows As Long
    Dim hLink As Hyperlink
    Dim I As Long

    Set xlApp = CreateObject("Excel.Application")
    'Open the spreadsheet to get data
    Set xlWB = xlApp.Workbooks.Open("Query Log.xlsx")
    Set xlWS = xlWB.Worksheets(1)

    ListBox1.ColumnCount = 2

    'Populate the listbox.
    With Me.ListBox1

        For Each hLink In xlWS.Range("Guides").Hyperlinks

            'Use .AddItem method to add a new row for each record and populate column 0
            .AddItem hLink.TextToDisplay
            'Use .List method to populate the remaining columns
            .List(.ListCount - 1, 1) = hLink.Address

        Next hLink

    End With
    'Clean up
    Set xlWS = Nothing
    Set xlWB = Nothing
    xlApp.Quit
    Set xlApp = Nothing
lbl_Exit:
  Exit Sub
End Sub 
```

第二个示例是针对文本位于一个单元格中的特定情况，其中超链接位于右侧一个单元格中：

```
Private Sub CommandButton1_Click()

    'Late binding.  No reference to Excel Object required.

    Dim xlApp As Object
    Dim xlWB As Object
    Dim xlWS As Object
    Dim cRows As Long
    Dim rngGuide As Range
    Dim I As Long

    Set xlApp = CreateObject("Excel.Application")
    'Open the spreadsheet to get data
    Set xlWB = xlApp.Workbooks.Open("Query Log.xlsx")
    Set xlWS = xlWB.Worksheets(1)

    Set rngGuide = xlWS.Range("Guides")

    ListBox1.ColumnCount = 2

    'Populate the listbox.
    With Me.ListBox1

        For I = 1 To rngGuide.Rows.Count

            'Use .AddItem method to add a new row for each record and populate column 0
            .AddItem rngGuide.Cells(I, 1).Value

            'Use .List method to populate the remaining columns
            .List(.ListCount - 1, 1) = rngGuide.Offset(I - 1, 1).Resize(1, 1).Hyperlinks(1).Address

        Next I

    End With
    'Clean up
    Set xlWS = Nothing
    Set xlWB = Nothing
    xlApp.Quit
    Set xlApp = Nothing
lbl_Exit:
  Exit Sub
End Sub 
```

# android - 是否可以在 android 中将动画 gif 文件设置为我的应用程序的背景？

> ID：15762990
> 
> 赞同：0
> 
> 时间：2013-04-02T11:31:11.613
> 
> 标签：android, background, animated-gif

我正在为珠宝店做应用程序

我想将 gif 图像设置为我的应用程序的背景。

可以设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:36:05.003

是的，您可以设置 gif 图像，但这不会为您的 gif 图像设置动画。您需要将 gif 图像显式提取到所有帧中，然后使用动画图像作为 gif 这里是示例

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false" >

    <item
        android:drawable="@drawable/framelayout1"
        android:duration="1000"/>

    <item
        android:drawable="@drawable/framelayout2"
        android:duration="1000"/>

    <item
        android:drawable="@drawable/framelayout3"
        android:duration="1000"/>

    <item
        android:drawable="@drawable/framelayout4"
        android:duration="1000"/>

    ....

</animation-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:35:19.980

为什么这与在 Android 上的其他任何地方使用动画 Gif 不同？答案是——完全一样。

以下是在 Android 上显示动画 GIF 的方法： [显示动画 GIF](https://stackoverflow.com/questions/3660209/android-display-animated-gif)

# java - 如何从 Vaadin7 中的服务器下载文件？

> ID：15762991
> 
> 赞同：7
> 
> 时间：2013-04-02T11:31:12.910
> 
> 标签：java, download, vaadin

我有文件资源

```
FileResource curResource = new FileResource(new File(basepath +
                                "/WEB-INF/docs/"+path+".pdf")); 
```

我想通过单击按钮从计算机上的浏览器中保存此文件。我如何在 Vaadin 7 中做到这一点？谢谢

我尝试这样的事情：

```
ExternalResource resource = new ExternalResource(basepath +
                                "/WEB-INF/icons/"+"block_16.png");
Page.getCurrent().open(resource.getURL(),"Download",true); 
```

但我有空关于：空白页，没有任何反应......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T14:16:00.007

我解决我的问题！

```
private String basepath = VaadinService.getCurrent()
            .getBaseDirectory().getAbsolutePath();
private Button saveExcel = new Button();
Resource res = new FileResource(new File(basepath +
                "/WEB-INF/docs/settings.xlsx"));
FileDownloader fd = new FileDownloader(res);
fd.extend(saveExcel); 
```

从 Vaadin 的服务器下载非常容易

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-01T16:01:28.780

这个解决方案的问题是：在调用fd.extend之前必须知道文件名和文件内容。

如果您想按需构建文件名和文件内容，请参阅 Vaadin wiki 页面中的教程：[让用户下载文件](https://vaadin.com/docs/v8/framework/articles/LettingTheUserDownloadAFile.html)

# plone - z3c.dependencychecker 列出的哪些依赖项不应该包含在我的包中？

> ID：15762992
> 
> 赞同：3
> 
> 时间：2013-04-02T11:31:18.910
> 
> 标签：plone, setuptools, zope

我使用[z3c.dependencychecker](https://pypi.python.org/pypi/z3c.dependencychecker)作为帮助工具来列出我的 Plone 包的依赖项。

前几天有人告诉我，我不应该把它们都包括在内，因为有些像 OFS 和 Products.Five 是[Zope 2](http://zope2.zope.org/)中包含的特殊包。

有人有这些例外的完整列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:37:16.773

我将从[Plone 的 versions.cfg 文件](http://dist.plone.org/release/4.3-latest/versions.cfg)开始，其中包含指向 Zope 版本文件的链接。

请注意，文件中有一条注释“# Ecosystem（不是核心的正式部分）”。在那之后列出的包不是 Plone 依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T20:29:03.010

Zope2 egg 发行版包含许多顶级包。从 Zope2 2.13.19 开始，这些是：

*   应用程序
*   全局变量
*   帮助系统
*   寿命
*   OFS
*   产品（插件也使用的命名空间包）
*   共享
*   信号
*   测试
*   ZPublisher
*   ZServer
*   ZTUtils
*   佐佩2
*   重构文本
*   网络视频

它还在 Products 命名空间中包含这些包：

*   产品.五
*   Products.PageTemplates
*   Products.Sessions
*   Products.SiteAccess
*   Products.SiteErrorLog
*   Products.TemporaryFolder
*   产品.瞬态
*   Products.ZODBMountPoint
*   产品.ZReST

# eclipse - 在 Eclipse 中运行具有依赖关系的单个 TestNG 测试

> ID：15762998
> 
> 赞同：1
> 
> 时间：2013-04-02T11:31:55.080
> 
> 标签：eclipse, testng

我在一个类中几乎没有测试依赖于另一个包中的设置组。我的 TestNG.xml 看起来像这样：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<suite name="mysuite" verbose="1">
<test name="mytest">
    <classes>
    <class name="path.to.setup.class"/>
    <class name="path.to.test.class"/>
</classes>
</test>
</suite> 
```

在 eclipse 中运行所有测试时，这工作正常。

问题是当我尝试从 testClass 执行单个测试时，这取决于设置组。我收到以下错误：DependencyMap::Method "myMethod" 依赖于不存在的组 "setup"。是否有任何简单的方法来执行单个测试而无需为每个测试创建单独的 xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:36:38.033

在我看来，最好的方法是拥有一个测试类的抽象超类，它可以完成所有设置工作。这可以在超类的标准构造函数中实现，或者（更好的 imo）通过添加 @Before* 注释方法来实现。使用 @Before* 和 @After* 方法，您可以自由选择应该运行与 testng 组相关的方法，具体取决于其他方法、错误/异常处理或拆除。如果您有特定于类的设置内容，则可以在类本身的 @Before* 方法中执行此操作，这依赖于高级设置的执行。