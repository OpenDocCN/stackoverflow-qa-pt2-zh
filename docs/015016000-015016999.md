# StackOverflow 问答 15016000-15016999

# shell - cron 作业的状态

> ID：15016001
> 
> 赞同：1
> 
> 时间：2013-02-22T02:44:27.097
> 
> 标签：shell, crontab

我已经编写了一个 cron 作业，如下所示： `$crontab -e` 然后它打开了一个文件，我在其中编写了 `5 * * * * USERNAME PATH-TO-SHELLSCRIPT` 我如何知道我的作业已执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:57:12.907

用脚本做点什么？编辑一个文件并添加时间戳，例如查看它是否正常 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:32:38.957

还要确保你了解时间参数，这样你就知道它什么时候可以工作:) 我使用 crontab 进行 5 分钟间隔的 cron，如下所示：*/5 * * * *

[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:28:28.323

您可以使用日志文件。在您的主目录下创建一个文件，例如“/home/user/.cronlog/script1”，并输出脚本执行时间和带有时间戳的状态消息。然后，您可以检查日志以查看脚本历史记录。要测试您的脚本，首先每分钟执行一次。然后将 crontab 条目更改为实际期间。

# php - 循环数据创建多个表单以提交

> ID：15016003
> 
> 赞同：0
> 
> 时间：2013-02-22T02:44:53.877
> 
> 标签：php, sql

我正在使用 PHP 打开一个文件（格式化为行和列），循环遍历文件上的行并将行回显到满足特定条件的表中。在我回显的每一行上，我都将其包装在表单标签中。最终，如果我回显 20 行，我将回显 20 个表格，每个表格都有一个按钮。我还用评论框呼应了一个专栏。我希望最终用户能够访问此页面，在每一行上输入评论，然后点击提交按钮将行的结果存储到数据库中。我有 2 个问题，我不知道如何克服。

1.) 将结果回显到表中时，我在创建 SQL 插入语句时没有创建要引用的静态变量。如何标记每条数据以便以后调用？

2.) 会有多种形式，用户一次只能使用一种。如何确保当用户单击提交时，它只提交同一行的数据字段？

希望这是有道理的。如果不是，我很乐意根据需要添加尽可能多的说明。我绝对是 PHP 的新手，所以我确信这是一个糟糕的设计，但我的时间紧迫，我现在只需要一个工作产品。下周我可以回去，也许会实施一个更好的解决方案，我相信你们会建议一个：）

```
<?php 

if (($handle = fopen("name of file to open here", "r")) !== FALSE) {
while (($data = fgetcsv($handle, 1000, "\t")) !== FALSE) {
    if ($data[4] == $login){
        $num = count($data);
                echo "<form action='analyzer.php' method='post'>";
                echo "<tr>";
                echo "<td>"; 
                echo $data[1];
                echo "</td>";
                echo "<td>";
                echo $data[2];
                echo "</td>";
                echo "<td>";
                echo $data[3];
                echo "</td>";
                echo "<td>";
                echo $data[4];
                echo "</td>";
                echo "<td>";
                echo $data[5];
                echo "</td>";
                echo "<td>";
                echo $data[6];
                echo "</td>"; 
                echo "<td>"; 
                echo $data[7];
                echo "</td>";
                echo "<td>";
                echo $data[8];
                echo "</td>"; 
                echo "<td>";    
                echo "<input type='text' name='comments' />";
                echo "</td>"; 
                echo "<td>"; 
                echo "<input class='mybutton' type='submit'         name='#' value='Submit' />";    
                echo "</td>"; 
                echo "</tr>";
                echo "</form>";

}
fclose($handle);
}
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:48:15.433

> 1.) 将结果回显到表中时，我在创建 SQL 插入语句时没有创建要引用的静态变量。如何标记每条数据以便以后调用？

您需要某种唯一标识数据的方法。您可以使用隐藏的输入变量来执行此操作。

> 2.) 会有多种形式，用户一次只能使用一种。如何确保当用户单击提交时，它只提交同一行的数据字段？

您可以命名表单或为它们分配数组中的序列。例如：

```
<input type="submit" name="form[5]" /> 
```

您还可以使用这样的循环来简化代码：

```
foreach( $data as $key=>$val ) {
    echo "<td>$val</td>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T06:25:34.380

我知道这里已经有一个公认的答案，但我想建议另一种方法。在一个页面上有一堆表单，每个表单都有自己的提交按钮，并且每次都需要加载页面，从 UI 的角度来看有点麻烦。

我的建议是您开始学习 Ajax 的漫长、痛苦和有益的过程。我一直在学习 jQuery AJAX，我用它来做类似的事情。

例子：

我有一个有 30 行的表，每行代表一个进程。每行都有一个复选框。我在底部有一个提交按钮，用户可以在其中提交带有复选框的所有行。

但是，我在每一行也有按钮（实际上就在复选框旁边）。这些按钮被简单地标记为“现在”，当您单击它们时，该行将在后台处理而无需重新加载页面。

因此，如果用户愿意，我允许用户使用普通表单提交按钮提交许多行，或者提交任何单独的行而不必等待页面重新加载。

如果有人感兴趣，我也许可以在这里添加一些代码。

# xml - 在 text/xml 值中编码 CR-LF 换行符的正确方法是什么？

> ID：15016004
> 
> 赞同：5
> 
> 时间：2013-02-22T02:45:00.900
> 
> 标签：xml, xml-serialization

与可以做任何事情的 application/xml 文件或将所有空白序列转换为单个空格字符的 normalizedString 值相反，我在这里专门在具有字符串值的 text/xml 文件的上下文中询问。为简单起见，假设我只使用带有 UTF8 编码文件的 ASCII 字符。

给定以下我希望用 XML 表示的两行文本字符串：

```
Hello
World! 
```

这是内存中的以下字节：

```
0000: 48 65 6c 6c 6f 0d 0a 57 6f 72 6c 64 21 Hello..World! 
```

根据 RFC 2046，任何 text/* MIME 类型必须（不应该）使用回车后跟换行字符序列来表示换行符。鉴于此，以下 XML 片段应该是正确的：

```
<tag>Hello
World!</tag> 
```

或者

```
0000: 3c 74 61 67 3c 48 65 6c 6c 6f 0d 0a 57 6f 72 6c <tag>Hello..Worl
0010: 64 21 3c 2f 74 61 67 3c                         d!</tag> 
```

但我经常看到如下文件：

```
<tag><![CDATA[Hello
World!]]></tag> 
```

或者，甚至更陌生：

```
<tag>Hello&xD;
World!</tag> 
```

其中 &0xD; 序列后跟一个换行符：

```
0000: 3c 74 61 67 3c 48 65 6c 6c 6f 26 78 44 3b 0a 57 <tag>Hello&xD;.W
0010: 6f 72 6c 64 21 3c 2f 74 61 67 3c                orld!</tag> 
```

我在这里想念什么？在 XML 字符串值中表示多行文本以便它可以不受干扰地出现在另一端的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:51:57.470

CR (&x0D;)、LF (&x0A;)、CRLF 或其他一些组合都是有效的。如[规范中所述](http://www.w3.org/TR/2004/REC-xml11-20040204/#sec-line-ends)，所有这些都转换为单个 &x0A; 特点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:06:31.467

在 Mono 中编写 NUnit 测试并在 Java 中编写 JUnit 测试后，答案似乎是使用 <tag>Hello \nWorld!</tag> 或 <tag>Hello \nWorld!</tag>如下...

Foo.cs：

```
using System.IO;
using System.Text;
using System.Xml.Serialization;

namespace XmlStringTests
{
    public class Foo
    {
        public string greeting;

        public static Foo DeserializeFromXmlString (string xml)
        {
            Foo result;
            using (MemoryStream memoryStream = new MemoryStream()) {
                byte[] buffer = Encoding.UTF8.GetBytes (xml);
                memoryStream.Write (buffer, 0, buffer.Length);
                memoryStream.Seek (0, SeekOrigin.Begin);
                XmlSerializer xs = new XmlSerializer (typeof(Foo));
                result = (Foo)xs.Deserialize (memoryStream);
            }
            return result;
        }
    }
} 
```

XmlStringTests.cs：

```
using NUnit.Framework;

namespace XmlStringTests
{
    [TestFixture]
    public class XmlStringTests
    {
        const string expected = "Hello\u000d\u000aWorld!";

        [Test(Description="Fails")]
        public void Cdata ()
        {
            const string test = "<Foo><greeting><![CDATA[Hello\u000d\u000aWorld!]]></greeting></Foo>";
            Foo bar = Foo.DeserializeFromXmlString (test);
            Assert.AreEqual (expected, bar.greeting);
        }

        [Test(Description="Fails")]
        public void CdataWithHash13 ()
        {
            const string test = "<Foo><greeting><![CDATA[Hello&#13;\u000aWorld!]]></greeting></Foo>";
            Foo bar = Foo.DeserializeFromXmlString (test);
            Assert.AreEqual (expected, bar.greeting);
        }

        [Test(Description="Fails")]
        public void CdataWithHashxD ()
        {
            const string test = "<Foo><greeting><![CDATA[Hello&#xd;\u000aWorld!]]></greeting></Foo>";
            Foo bar = Foo.DeserializeFromXmlString (test);
            Assert.AreEqual (expected, bar.greeting);
        }

        [Test(Description="Fails")]
        public void Simple ()
        {
            const string test = "<Foo><greeting>Hello\u000d\u000aWorld!</greeting></Foo>";
            Foo bar = Foo.DeserializeFromXmlString (test);
            Assert.AreEqual (expected, bar.greeting);
        }

        [Test(Description="Passes")]
        public void SimpleWithHash13 ()
        {
            const string test = "<Foo><greeting>Hello&#13;\u000aWorld!</greeting></Foo>";
            Foo bar = Foo.DeserializeFromXmlString (test);
            Assert.AreEqual (expected, bar.greeting);
        }

        [Test(Description="Passes")]
        public void SimpleWithHashxD ()
        {
            const string test = "<Foo><greeting>Hello&#xd;\u000aWorld!</greeting></Foo>";
            Foo bar = Foo.DeserializeFromXmlString (test);
            Assert.AreEqual (expected, bar.greeting);
        }
    }
} 
```

Foo.java：

```
import java.io.StringReader;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "Foo")
@XmlType(propOrder = { "greeting" })
public class Foo {
    public String greeting;

    public static Foo DeserializeFromXmlString(String xml) {
        try {
            JAXBContext context = JAXBContext.newInstance(Foo.class);
            Unmarshaller unmarshaller = context.createUnmarshaller();
            Foo foo = (Foo) unmarshaller.unmarshal(new StringReader(xml));
            return foo;
        } catch (JAXBException e) {
            e.printStackTrace();
            return null;
        }
    }
} 
```

XmlStringTests.java：

```
import static org.junit.Assert.*;
import org.junit.Test;

public class XmlStringTests {
    String expected = "Hello\r\nWorld!";

    @Test //Fails
    public void testCdata ()
    {
        String test = "<Foo><greeting><![CDATA[Hello\r\nWorld!]]></greeting></Foo>";
        Foo bar = Foo.DeserializeFromXmlString (test);
        assertEquals (expected, bar.greeting);
    }

    @Test //Fails
    public void testCdataWithHash13 ()
    {
        String test = "<Foo><greeting><![CDATA[Hello&#13;\nWorld!]]></greeting></Foo>";
        Foo bar = Foo.DeserializeFromXmlString (test);
        assertEquals (expected, bar.greeting);
    }

    @Test //Fails
    public void testCdataWithHashxD ()
    {
        String test = "<Foo><greeting><![CDATA[Hello&#xd;\nWorld!]]></greeting></Foo>";
        Foo bar = Foo.DeserializeFromXmlString (test);
        assertEquals (expected, bar.greeting);
    }

    @Test //Fails
    public void testSimple ()
    {
        String test = "<Foo><greeting>Hello\r\nWorld!</greeting></Foo>";
        Foo bar = Foo.DeserializeFromXmlString (test);
        assertEquals (expected, bar.greeting);
    }

    @Test //Passes
    public void testSimpleWithHash13 ()
    {
        String test = "<Foo><greeting>Hello&#13;\nWorld!</greeting></Foo>";
        Foo bar = Foo.DeserializeFromXmlString (test);
        assertEquals (expected, bar.greeting);
    }

    @Test //Passes
    public void testSimpleWithHashxD ()
    {
        String test = "<Foo><greeting>Hello&#xd;\nWorld!</greeting></Foo>";
        Foo bar = Foo.DeserializeFromXmlString (test);
        assertEquals (expected, bar.greeting);
    }
} 
```

我希望这可以节省一些人一些时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-26T07:49:59.507

我发现的唯一适用于 <![CDATA 元素的解决方案是在传递 XML 之前用 GUID 的文本替换 CR，然后在检索后将 GUID 替换回 CR。

使用 GUID 而不是固定的转义序列意味着不会意外地与已经存在的数据发生冲突。

# actionscript-3 - 在 Actionscript 中使用图形

> ID：15016017
> 
> 赞同：2
> 
> 时间：2013-02-22T02:46:39.707
> 
> 标签：actionscript-3

直到现在我还没有使用图形..所以我对在 flash cs6 中使用图形对象没有太多想法。我想根据这个人是否按下按钮来移动这个角色，并在释放按钮后停止他的移动。我查看了如何进行此过程.. 到目前为止，不断出现的一件事是将我的 spritesheet 转换为图形.. 但在那之后我真的找不到任何关于如何将其集成到 actionscript 中的内容。另外，当我将对象转换为图形时，它没有给我分配类名的选项。那么有人可以给我一个很好的分解这些图形对象的目的是什么吗？我应该如何进行精灵移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:48:49.380

忽略有关精灵表的信息。这些被用作一种完全不同的图形渲染方法，我不打算在这里介绍；用于更高级、高性能的应用程序和游戏。

当您说图形时，我假设您的意思是您创建了一些已转换为图形的图形，如下所示：

![在此处输入图像描述](../Images/5a08e544d13c3ad17e53106c989b942f.png)

这些类型的对象纯粹用于时间线动画。你想在这里使用的是 type `MovieClip`。当您使用这种类型时，您将能够像您提到的那样给对象一个类名：

![在此处输入图像描述](../Images/95cec9e2cf492230d8baee41d91e7eaf.png)

完成此操作后，您将能够像这样在 ActionScript 中引用该库符号：

```
var gr:MyGraphic = new MyGraphic();
addChild(gr); 
```

# knockout.js - 淘汰可观察数组 + 选择框

> ID：15016024
> 
> 赞同：2
> 
> 时间：2013-02-22T02:47:40.807
> 
> 标签：knockout.js, drop-down-menu, ko.observablearray

我正在尝试在带有可观察数组的选择框上设置选项。我可以获得要填充的选项，但是该数组显示为一个选项，并且现在我查看它也没有任何价值。

这是下面的[小提琴](http://jsfiddle.net/TQZRY/1/)和代码：

```
var Model = function (properties) {
    this.AvailableLenders = ko.observableArray();

    this.ModifyLenders = function (newProperties) {
        var lenders = [],
            count = 0;

        ko.utils.arrayForEach(newProperties || properties, function (item) {
            var lender = item.Lender;

            if (lender) {
                if (lenders.indexOf(lender) == -1) {
                    lenders[count] = lender;

                    count++;
                }
            }
        });

        this.AvailableLenders.removeAll();

        return this.AvailableLenders.push(lenders.sort());
    };

    this.ModifyLenders();
};

ko.applyBindings(new Model([{Lender: "ASB"}, {Lender: "ANZ"}])); 
```

HTML：

```
<select multiple="multiple" name="Lender" id="Lender" data-bind="options: AvailableLenders, optionsCaption: 'Please select a lender'"></select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:28:19.013

我发现了问题。

**问题是您将 Lender 数组推送到 AvailableLenders 数组的单个索引中**

```
var Model = function (properties) {
this.AvailableLenders = ko.observableArray();

this.ModifyLenders = function (newProperties) {
    var lenders = [],
        count = 0;

    ko.utils.arrayForEach(newProperties || properties, function (item) {
        var lender = item.Lender;

        if (lender) {
            if (lenders.indexOf(lender) == -1) {
                lenders[count] = lender;

                count++;
            }
        }
    });

    this.AvailableLenders.removeAll();

    console.log("lenders ", lenders)
    console.log("lenders.sort() ", lenders.sort()) 
```

**我在下面做了更改。现在你可以理解为什么会这样了**

**在你的小提琴中添加这两行并检查发生了什么**

```
 this.AvailableLenders.push(lenders[0]);
    this.AvailableLenders.push(lenders[1]);
    return this.AvailableLenders.push(lenders.sort());
   };

  this.ModifyLenders();
  };

 ko.applyBindings(new Model([{
  Lender: "ASB"
 }, {
  Lender: "ANZ"
 }])); 
```

**将其标记为答案**

# python - 如何从 gensim 打印 LDA 主题模型？Python

> ID：15016025
> 
> 赞同：27
> 
> 时间：2013-02-22T02:47:42.070
> 
> 标签：python, nlp, lda, topic-modeling, gensim

使用`gensim`我能够从 LSA 中的一组文档中提取主题，但是如何访问从 LDA 模型生成的主题？

打印`lda.print_topics(10)`代码时出现以下错误，因为`print_topics()`返回 a `NoneType`：

```
Traceback (most recent call last):
  File "/home/alvas/workspace/XLINGTOP/xlingtop.py", line 93, in <module>
    for top in lda.print_topics(2):
TypeError: 'NoneType' object is not iterable 
```

编码：

```
from gensim import corpora, models, similarities
from gensim.models import hdpmodel, ldamodel
from itertools import izip

documents = ["Human machine interface for lab abc computer applications",
              "A survey of user opinion of computer system response time",
              "The EPS user interface management system",
              "System and human system engineering testing of EPS",
              "Relation of user perceived response time to error measurement",
              "The generation of random binary unordered trees",
              "The intersection graph of paths in trees",
              "Graph minors IV Widths of trees and well quasi ordering",
              "Graph minors A survey"]

# remove common words and tokenize
stoplist = set('for a of the and to in'.split())
texts = [[word for word in document.lower().split() if word not in stoplist]
         for document in documents]

# remove words that appear only once
all_tokens = sum(texts, [])
tokens_once = set(word for word in set(all_tokens) if all_tokens.count(word) == 1)
texts = [[word for word in text if word not in tokens_once]
         for text in texts]

dictionary = corpora.Dictionary(texts)
corpus = [dictionary.doc2bow(text) for text in texts]

# I can print out the topics for LSA
lsi = models.LsiModel(corpus_tfidf, id2word=dictionary, num_topics=2)
corpus_lsi = lsi[corpus]

for l,t in izip(corpus_lsi,corpus):
  print l,"#",t
print
for top in lsi.print_topics(2):
  print top

# I can print out the documents and which is the most probable topics for each doc.
lda = ldamodel.LdaModel(corpus, id2word=dictionary, num_topics=50)
corpus_lda = lda[corpus]

for l,t in izip(corpus_lda,corpus):
  print l,"#",t
print

# But I am unable to print out the topics, how should i do it?
for top in lda.print_topics(10):
  print top 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T03:00:39.590

经过一番折腾，似乎`print_topics(numoftopics)`有`ldamodel`一些错误。所以我的解决方法是使用`print_topic(topicid)`：

```
>>> print lda.print_topics()
None
>>> for i in range(0, lda.num_topics-1):
>>>  print lda.print_topic(i)
0.083*response + 0.083*interface + 0.083*time + 0.083*human + 0.083*user + 0.083*survey + 0.083*computer + 0.083*eps + 0.083*trees + 0.083*system
... 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-29T09:04:56.953

我认为 show_topics 的语法随着时间的推移发生了变化：

```
show_topics(num_topics=10, num_words=10, log=False, formatted=True) 
```

对于 num_topics 个主题，返回 num_words 个最重要的词（每个主题 10 个词，默认情况下）。

主题以列表形式返回——如果格式化为 True，则返回字符串列表，如果为 False，则返回（概率，单词）2 元组列表。

如果 log 为 True，也将此结果输出到 log。

与 LSA 不同，LDA 中的主题之间没有自然顺序。因此，返回的所有主题的 num_topics <= self.num_topics 子集是任意的，并且可能在两次 LDA 训练运行之间发生变化。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-22T22:29:43.233

我认为将主题视为单词列表总是更有帮助。以下代码片段有助于实现该目标。我假设您已经有一个名为`lda_model`.

```
for index, topic in lda_model.show_topics(formatted=False, num_words= 30):
    print('Topic: {} \nWords: {}'.format(idx, [w[0] for w in topic])) 
```

在上面的代码中，我决定显示属于每个主题的前 30 个单词。为简单起见，我展示了我得到的第一个主题。

```
Topic: 0 
Words: ['associate', 'incident', 'time', 'task', 'pain', 'amcare', 'work', 'ppe', 'train', 'proper', 'report', 'standard', 'pmv', 'level', 'perform', 'wear', 'date', 'factor', 'overtime', 'location', 'area', 'yes', 'new', 'treatment', 'start', 'stretch', 'assign', 'condition', 'participate', 'environmental']
Topic: 1 
Words: ['work', 'associate', 'cage', 'aid', 'shift', 'leave', 'area', 'eye', 'incident', 'aider', 'hit', 'pit', 'manager', 'return', 'start', 'continue', 'pick', 'call', 'come', 'right', 'take', 'report', 'lead', 'break', 'paramedic', 'receive', 'get', 'inform', 'room', 'head'] 
```

我不太喜欢上述主题的外观，因此我通常将代码修改为如下所示：

```
for idx, topic in lda_model.show_topics(formatted=False, num_words= 30):
    print('Topic: {} \nWords: {}'.format(idx, '|'.join([w[0] for w in topic]))) 
```

...并且输出（显示的前 2 个主题）将如下所示。

```
Topic: 0 
Words: associate|incident|time|task|pain|amcare|work|ppe|train|proper|report|standard|pmv|level|perform|wear|date|factor|overtime|location|area|yes|new|treatment|start|stretch|assign|condition|participate|environmental
Topic: 1 
Words: work|associate|cage|aid|shift|leave|area|eye|incident|aider|hit|pit|manager|return|start|continue|pick|call|come|right|take|report|lead|break|paramedic|receive|get|inform|room|head 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-04T08:58:12.523

您是否使用任何日志记录？`print_topics`如文档中所述打印到日志[文件](http://radimrehurek.com/gensim/tut2.html#transforming-vectors)。

正如@mac389 所说，`lda.show_topics()`这是打印到屏幕的方法。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-28T04:07:15.987

使用 Gensim 清理它自己的主题格式。

```
from gensim.parsing.preprocessing import preprocess_string, strip_punctuation,
strip_numeric

lda_topics = lda.show_topics(num_words=5)

topics = []
filters = [lambda x: x.lower(), strip_punctuation, strip_numeric]

for topic in lda_topics:
    print(topic)
    topics.append(preprocess_string(topic[1], filters))

print(topics) 
```

输出 ：

```
(0, '0.020*"business" + 0.018*"data" + 0.012*"experience" + 0.010*"learning" + 0.008*"analytics"')
(1, '0.027*"data" + 0.020*"experience" + 0.013*"business" + 0.010*"role" + 0.009*"science"')
(2, '0.026*"data" + 0.016*"experience" + 0.012*"learning" + 0.011*"machine" + 0.009*"business"')
(3, '0.028*"data" + 0.015*"analytics" + 0.015*"experience" + 0.008*"business" + 0.008*"skills"')
(4, '0.014*"data" + 0.009*"learning" + 0.009*"machine" + 0.009*"business" + 0.008*"experience"')

[
  ['business', 'data', 'experience', 'learning', 'analytics'], 
  ['data', 'experience', 'business', 'role', 'science'], 
  ['data', 'experience', 'learning', 'machine', 'business'], 
  ['data', 'analytics', 'experience', 'business', 'skills'], 
  ['data', 'learning', 'machine', 'business', 'experience']
] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-07T21:45:23.030

这是打印主题的示例代码：

```
def ExtractTopics(filename, numTopics=5):
    # filename is a pickle file where I have lists of lists containing bag of words
    texts = pickle.load(open(filename, "rb"))

    # generate dictionary
    dict = corpora.Dictionary(texts)

    # remove words with low freq.  3 is an arbitrary number I have picked here
    low_occerance_ids = [tokenid for tokenid, docfreq in dict.dfs.iteritems() if docfreq == 3]
    dict.filter_tokens(low_occerance_ids)
    dict.compactify()
    corpus = [dict.doc2bow(t) for t in texts]
    # Generate LDA Model
    lda = models.ldamodel.LdaModel(corpus, num_topics=numTopics)
    i = 0
    # We print the topics
    for topic in lda.show_topics(num_topics=numTopics, formatted=False, topn=20):
        i = i + 1
        print "Topic #" + str(i) + ":",
        for p, id in topic:
            print dict[int(id)],

        print "" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-08-01T09:42:23.977

您可以使用：

```
for i in  lda_model.show_topics():
    print i[0], i[1] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-29T21:33:02.187

最近，在使用 Python 3 和 Gensim 2.3.0 时遇到了类似的问题。`print_topics()`并`show_topics()`没有给出任何错误，但也没有打印任何东西。结果是`show_topics()`返回一个列表。所以一个人可以简单地做：

```
topic_list = show_topics()
print(topic_list) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-06-14T22:18:53.667

您还可以将每个主题的热门单词导出到 csv 文件。`topn`控制每个主题下要导出的单词数。

```
import pandas as pd

top_words_per_topic = []
for t in range(lda_model.num_topics):
    top_words_per_topic.extend([(t, ) + x for x in lda_model.show_topic(t, topn = 5)])

pd.DataFrame(top_words_per_topic, columns=['Topic', 'Word', 'P']).to_csv("top_words.csv") 
```

CSV 文件具有以下格式

```
Topic Word  P  
0     w1    0.004437  
0     w2    0.003553  
0     w3    0.002953  
0     w4    0.002866  
0     w5    0.008813  
1     w6    0.003393  
1     w7    0.003289  
1     w8    0.003197 
... 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-14T06:18:27.383

```
****This code works fine but I want to know the topic name instead of Topic: 0 and Topic:1, How do i know which topic this word comes in**?** 

for index, topic in lda_model.show_topics(formatted=False, num_words= 30):
        print('Topic: {} \nWords: {}'.format(idx, [w[0] for w in topic]))

Topic: 0 
Words: ['associate', 'incident', 'time', 'task', 'pain', 'amcare', 'work', 'ppe', 'train', 'proper', 'report', 'standard', 'pmv', 'level', 'perform', 'wear', 'date', 'factor', 'overtime', 'location', 'area', 'yes', 'new', 'treatment', 'start', 'stretch', 'assign', 'condition', 'participate', 'environmental']
Topic: 1 
Words: ['work', 'associate', 'cage', 'aid', 'shift', 'leave', 'area', 'eye', 'incident', 'aider', 'hit', 'pit', 'manager', 'return', 'start', 'continue', 'pick', 'call', 'come', 'right', 'take', 'report', 'lead', 'break', 'paramedic', 'receive', 'get', 'inform', 'room', 'head'] 
```

# css - 我正在学习 CSS，我无法理解这个元素选择器

> ID：15016027
> 
> 赞同：2
> 
> 时间：2013-02-21T21:22:29.977
> 
> 标签：css, html-table

在一个示例中，我发现了以下 CSS 元素：

```
#calendar table{
  border: 5px solid black;
  border-collapse: collapse;
  width: 100%;
} 
```

我用这张表测试了它： `<table id="calendar">`

如果我只使用`table`或`#calendar`作为选择器，则样式将以相同的方式应用于表格。如果我同时使用它们，似乎该属性被忽略了。据我了解，此选择器应将样式应用于带有日历 ID 的表格。

原作者的意图是什么？为什么它不起作用？为什么原作者将一个标签类型与一个ID结合起来，因为id是唯一的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T21:30:46.950

`#calendar table`应应用于 ID 为“日历”的容器内的表格：`<div id=calendar><table></table></div>`

`table#calendar`应应用于 id 为“日历”的表：`<table id=calendar></table>`

`#calendar, table`应该应用于一个表或一个 id 为“日历”的容器：`<table></table>`或`<div id=calendar></div>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:31:12.500

它不起作用，因为此选择器 ( `#calendar table`) 表示您希望将样式应用于表内的表，并使用`#calendar`as id。

您尝试将 css 样式应用于此元素`<table id=calendar><table></table></table>`，我认为它不存在。

# fonts - 字体渲染 Safari 6

> ID：15016032
> 
> 赞同：1
> 
> 时间：2013-02-21T13:23:46.867
> 
> 标签：fonts, macos

我在[此站点](http://kevinchevallier.com/mandrake/)上使用 DINNextLTPro-Medium 字体，并注意到 Safari 6 和 Chrome (mac) 与世界其他地方（Safari 5 mac/win、Chrome win、Firefox win、Opera win.. .)。

以下是带有 Safari 6 的 Mac 上发生的情况：

![在此处输入图像描述](../Images/d0f3ac82763ff60eb6c850b94222f527.png)

在 Safari 5 上获胜：

![在此处输入图像描述](../Images/3073b7b42ce7f2c8c7ddf0c140dfa569.png)

这是我的 css 文件中的字体调用：

```
@import url("//hello.myfonts.net/count/259bc7");
@font-face {
    font-family: 'DINNextLTPro-Medium';
    src:    url('fonts/259BC7_0_0.eot');
    src:    url('fonts/259BC7_0_0.eot?#iefix') format('embedded-opentype'),
            url('fonts/259BC7_0_0.woff') format('woff'),
            url('fonts/259BC7_0_0.ttf') format('truetype')
}

body,input,button,textarea  {
    font-family: DINNextLTPro-Medium, Helvetica, Arial, sans-serif; border:none;
    font-size: 16px; line-height: 24px;
    font-weight: normal;
    font-style: normal; } 
```

这一切都来自 myfonts，它与我习惯的 fontsquirrel 声明非常相似，它以工作得很好而闻名。

问题是，有人对此有所了解吗？我知道很难在不同的浏览器上获得相同的渲染，但在这里，它看起来非常大胆。

编辑#1：这是否是由从 Vimeo（flash）加载的视频引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:32:11.510

您的@font-face 看起来不错，看不出它在版本 5 中不显示的任何原因。但是，通过谷歌搜索自定义字体 Safari 5 很快就会发现很多人在这个版本的 Safari 上遇到了渲染问题。

奇怪的是，很多人报告此问题是由 Adob​​e Flash 引起的，一种复制方法来查看这是否是问题是在页面加载之前字体是否快速呈现？由于人们仅在页面完全加载后才报告它，因此页面上的快速刷新应该能够复制以查看这是否是问题。

结帐：[https ://discussions.apple.com/thread/2458648?start=0&tstart=0](https://discussions.apple.com/thread/2458648?start=0&tstart=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:07:38.323

根据我的经验，我使用的是 Safari 6 + iMac & IE 10 + Windows 7，这主要是由于 Mac 和 Windows 中使用的不同字体渲染技术造成的。我不确定您是否曾经使用过 Mac，或者是否曾经注意到 Mac 和 Windows 之间的不同字体渲染。Mac 中的字符看起来更平滑且有点模糊，而在 Windows 中它们看起来很清晰。

除此之外，您可以尝试在 Windows 中调整 ClearType（控制面板/外观和个性化/显示/调整 ClearType 文本）和 Mac 中的字体平滑（设置/常规）。您也可以使用终端来调整字体的渲染程度。

```
defaults -currentHost write -globalDomain AppleFontSmoothing -int 2 
```

-int 1 比 -int 2 轻

有关差异的更多信息，请阅读这篇[~文章~](http://damieng.com/blog/2007/06/13/font-rendering-philosophies-of-windows-and-mac-os-x)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:06:18.983

似乎我在多次搜索后通过 css 找到了修复：

`html {-webkit-font-smoothing: antialiased}`

# xml - 如何使用 PowerShell 创建新的 System.Xml.Linq.XElement

> ID：15016037
> 
> 赞同：2
> 
> 时间：2013-02-22T02:48:42.123
> 
> 标签：xml, powershell, system.xml

**我想使用System.Xml.Linq**对象以编程方式创建 XML DOM 。我宁愿**不**解析字符串或从磁盘加载文件来创建 DOM。在 C# 中，这很容易，但在 PowerShell 中尝试这样做似乎是不可能的。

**选项1**：不起作用

```
$xlinq = [Reflection.Assembly]::Load("System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
$el = new-Object System.Xml.Linq.XElement "foo" 
```

这给出了以下错误：

```
new-Object : Cannot convert argument "0", with value: "foo",
 for "XElement" to type "System.Xml.Linq.XElement": "Cannot convert value "foo" to
 type "System.Xml.Linq.XElement". Error: "Data at the root level is invalid. 
 Line 1, position 1."" 
```

**选项2：**不起作用

```
$xlinq = [Reflection.Assembly]::Load("System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
$xname = New-Object System.Xml.Linq.XName "foo"
$el = new-Object System.Xml.Linq.XElement $xname 
```

它给出了这个错误：

```
New-Object : Constructor not found. Cannot find an appropriate constructor for type System.Xml.Linq.XName. 
```

根据 MSDN（[http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx)）“XName 不包含任何公共构造函数。相反，此类提供从 String 的隐式转换允许您创建 XName。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T07:13:00.377

```
"XName does not contain any public constructors. Instead, this class provides an implicit conversion from String that allows you to create an XName." 
```

基于此，您可以`String`转换为`XName`：

```
$xname = [System.Xml.Linq.XName]"foo"

$xname.GetType()

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     True     XName                                    System.Object 
```

然后：

```
$el = new-Object System.Xml.Linq.XElement $xname
$el

FirstAttribute :
HasAttributes  : False
HasElements    : False
IsEmpty        : True
LastAttribute  :
Name           : foo
NodeType       : Element
Value          :
FirstNode      :
LastNode       :
NextNode       :
PreviousNode   :
BaseUri        :
Document       :
Parent         :
LineNumber     : 0
LinePosition   : 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-14T21:32:28.733

这也应该有效：

```
[System.Xml.Linq.XElement]::Parse("<foo/>") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T23:21:16.910

我注意到你做错的一件事是 [System.Xml.Linq.XElement] 有一些自定义实例，所以删除 New-Object

```
$el = [System.Xml.Linq.XElement]::new ([System.Xml.Linq.XName]"foo") 
```

此命名空间中的所有内容都是在 powershell 中没有 New-Object 的情况下创建的。

# java - 独立 Jython：导入错误 (Apache-POI)

> ID：15016039
> 
> 赞同：5
> 
> 时间：2013-02-22T02:49:09.417
> 
> 标签：java, apache-poi, jython

当我尝试将 Jython 与 Apache-POI 一起使用时，Jython 独立 jar 引发了 ImportError 异常。

您将在下面找到我如何调用我的 Jython 脚本：

```
java -cp C:\jAutoMailerScript\lib\poi-3.9-20121203.jar -jar jython.jar main.py 
```

错误：

*回溯（最近一次通话最后）：*

*文件“main.py”，第 32 行，在*

*从 org.apache.poi.hssf.usermodel 导入 **

*ImportError：没有名为 apache 的模块*

这是第 32 行的代码：

```
from org.apache.poi.hssf.usermodel import * 
```

为了使用 Java 的第三方应用程序，Jython 是否有任何限制？

提前致谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T07:34:15.657

您不能同时使用`-cp`和`-jar`。该`-jar`选项会覆盖任何其他类路径设置。请参阅[http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)。

使用`python.path`系统属性应该可以工作：

```
java -Dpython.path=C:\jAutoMailerScript\lib\poi-3.9-20121203.jar -jar jython.jar main.py 
```

这是一个替代命令：

```
java -cp C:\jAutoMailerScript\lib\poi-3.9-20121203.jar;jython.jar org.python.util.jython main.py 
```

然而，事实证明这些命令都不适用于[独立的 Jython](http://wiki.python.org/jython/InstallationInstructions#standalone-mode)。`ImportError`正如问题中所说，您会得到一个。有一个似乎相关的旧开放错误：http: [//bugs.jython.org/issue1422](http://bugs.jython.org/issue1422)（它说问题存在于 Solaris，但据我所知，它也适用于其他平台）。

使用[已安装的 Jython](http://wiki.python.org/jython/InstallationInstructions#basic-install)并且该`jython`命令可以正常工作：

```
jython -Dpython.path=C:\jAutoMailerScript\lib\poi-3.9-20121203.jar main.py 
```

请注意，独立的 jython.jar 包含标准库 Python 模块（在`Lib`文件夹中）。这些模块不包含在您随安装的 Jython 获得的 jython.jar 中。

我希望这个答案有所帮助，即使它可能无法完全解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T15:12:27.637

我一直在尝试重现您的问题，但在独立 Jython 的 2.5.3 版本中遇到了同样的问题。还尝试使用 POI 3.7；还是一样的交易。我还尝试了 Arshad 提出的 sys.path.append 建议。这里发生了一些奇怪的事情（使用不同的库进行测试 - 这次是barcode4j）：

```
c:\development\local\lib\jython-sa-2.5.3>java -jar jython-standalone-2.5.3.jar
Jython 2.5.3 (2.5:c56500f08d34+, Aug 13 2012, 14:54:35)
[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)] on java1.7.0_10
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path
['', 'C:\\development\\local\\lib\\jython-sa-2.5.3\\Lib', 'C:\\development\\local\\lib\\jython-sa-2.5.3\\jython-standalone-2.5.3.jar\\Lib', '__classpath__', '__pyclasspath__/']
>>> sys.path.append('C:\development\local\lib\barcode4j-2.0\build\barcode4j.jar')
>>> sys.path
['', 'C:\\development\\local\\lib\\jython-sa-2.5.3\\Lib', 'C:\\development\\local\\lib\\jython-sa-2.5.3\\jython-standalone-2.5.3.jar\\Lib', '__classpath__', '__pyclasspath__/', 'C:\\development\\local\\lib\x08arcode4j-2.0\x08uild\x08arcode4j.jar']
>>> 
```

看看路径是如何因为 '\' 定界符而被打乱的？

（也尝试了 python.path 建议，但它给出了与您报告的相同的错误。）

可能是您遇到了[这个报告的问题](http://bugs.jython.org/issue1778514)或类似/相关的问题吗？它似乎与场景（独立版本）和你我使用的版本相匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-29T22:33:47.100

使用 commons-lang3-3.1.jar 等的 jython 2.5.4-rc1 独立版也有同样的问题。我必须在独立模式下使用它，所以这非常令人沮丧！:-(

编辑：这个人想通了！[为什么 Jython 拒绝找到我的 Java 包？](https://stackoverflow.com/questions/1681849/why-does-jython-refuse-to-find-my-java-package)

您必须添加以下标志才能使 Jython 独立运行！

```
java -Dpython.cachedir.skip=false -Dpython.cachedir=/tmp {...} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T16:45:23.567

您可以尝试像这样将 jar 附加到您的系统路径

```
sys.path.append('C:\jAutoMailerScript\lib\poi-3.9-20121203.jar') 
```

然后尝试运行相同的脚本。虽然使用 os 模块来获取路径会更好。我不确定如何在 Windows 操作系统上的 jython 中处理斜线。

# ruby-on-rails - FactoryGirl after_create 方法不保存

> ID：15016045
> 
> 赞同：5
> 
> 时间：2013-02-22T02:50:14.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec, factory-bot

我有一个简单的情境设置，以便学习使用 FactoryGirl 进行测试。一家*银行*有许多交易。每次创建交易时，都应从银行总金额中减去交易金额。

这是代码：

```
# Bank.rb - Has many transactions
class Bank < ActiveRecord::Base
  has_many :transactions
end

# Transaction.rb - Belongs to a bank and should decrement the bank's total when created.
class Transaction < ActiveRecord::Base
  belongs_to :bank
  after_create :decrement_bank_amount

  def decrement_bank_amount
    bank.decrement!(:amount, amount) if bank
  end
end

# factories.rb - Create default factories for testing. This is FactoryGirl 4 syntax
FactoryGirl.define do
  factory :bank do
    sequence(:name) { |n| 'Bank ' + n.to_s }
  end

  factory :transaction do
    sequence(:title) { |n| 'Payment ' + n.to_s }
    bank
  end
end

# Transaction_spec.rb - Creates a bank and a transaction.
require 'spec_helper'

describe Transaction do
  describe ".create" do
    context "when a bank is set" do
      it "decreases the bank's amount" do
        bank = FactoryGirl.create(:bank, :amount => 1000) do |b|
          b.transactions.create(:amount => 250)
        end

        bank.amount.to_i.should eq 750
      end
    end
  end
end 
```

测试不断失败，银行金额不断返回*1000*而不是预期的*750*。我难住了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T03:04:02.377

此测试失败，因为`bank`是从数据库中获取并存储的。`after_create`回调修改了数据库中的记录，但其中的对象没有`bank`看到，因此没有更新。

在检查金额之前，您需要调用`reload`该对象：

```
bank.reload
bank.amount.to_i.should == 750 
```

# javascript - 在浏览器选项卡关闭时发送 GET 请求

> ID：15016057
> 
> 赞同：1
> 
> 时间：2013-02-22T02:51:54.880
> 
> 标签：javascript, jquery

当用户关闭浏览器选项卡以破坏他的会话时，我可以向注销 URL 发送 GET 请求吗？

编辑：
这实际上是一个保活页面。用户应保持此页面打开。它以 TTL 刷新以保持会话处于活动状态。然而，一些用户关闭了 keepalive 页面并恢复工作。是的，它不可扩展。所以我有20分钟的TTL。我无法减少 TTL，因为它会增加服务器的负载。如果他们关闭页面，我希望他们退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:56:37.210

我认为[这篇文章](https://stackoverflow.com/questions/10311341/confirmation-before-closing-of-tab-browser/)包含您需要的信息。

不过，您需要对其进行一些修改，因此它可以满足您的需要（发送注销请求）。

# android - 为 facebook FQL 使用 Android Asynctask

> ID：15016064
> 
> 赞同：0
> 
> 时间：2013-02-22T02:52:19.897
> 
> 标签：android, facebook, android-asynctask, facebook-fql

我只是坚持如何在 Android 上使用 AsyncTask 进行 FQL 调用。我想知道是否有人可以提供帮助。

我想将一个字符串传递给 doInBackground() ，其中该字符串是我称之为消息的 FQL 查询。我想让 doInBackground() 方法执行返回 Response 对象的实际调用。

如果无法返回 Response 对象，则对响应进行进一步处理以将其转换为 JSONArray 是另一种选择。我问这个的原因是因为我不想在主线程上运行它。

下面是我想放入 AsyncTask 的 doInBackground() 方法中的代码，其中消息变量是 fql 查询字符串。

```
 Bundle params = new Bundle();
        params.putString("q", message);
        Session session = Session.getActiveSession();
        Request request = new Request(session,
                "fql",
                params,
                HttpMethod.GET,
                new Request.Callback() {

                    @Override
                    public void onCompleted(Response response) {
                        // TODO Auto-generated method stub
                        Log.i(TAG, "VideoPlayerResult: " + response.toString());    //Here it gets printed out
                        //WANT TO DO RESPONSE OR FURTHER PROCESSING HERE
                    }

        });

        Request.executeBatchAsync(request); 
```

# azure - 在 Windows azure 上共享文件夹

> ID：15016065
> 
> 赞同：1
> 
> 时间：2013-02-22T02:52:34.033
> 
> 标签：azure

我最近开了一个 Windows Azure 帐户，并设置了一个 Azure 虚拟机。我想在虚拟机中共享几个文件夹，并在我的电脑上本地访问这些文件夹。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:54:45.727

您可以在 VM 中启用 FTP 服务器功能。我曾经[在我的博客上](http://nicoploner.blogspot.de/2010/12/ftp-server-on-windows-azure-from.html)写过一本手册——你可以将它改编为在 Azure VM 上运行的当前操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:58:17.277

又快又脏？安装 Skydrive 客户端，并在安装过程中选择“使这台 PC 上的文件在我的其他设备上可供我使用”。

您还可以设置某种 RDP 解决方案，但以上是最快的。

# c# - 使用 List 复制 SQL Join

> ID：15016071
> 
> 赞同：0
> 
> 时间：2013-02-22T02:53:30.640
> 
> 标签：c#, generics, inner-join

是否可以使用复制您的 SQL 连接`List<T>`？我以某种方式远离 DataTable 和 DataSet 的使用，并尝试使用 List 来复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:09:56.403

绝对地。AFAIK，您可以将任何 LINQ 运算符（包括`join`）用于内存数据，例如`List`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:18:58.033

使用 LINQ，您*几乎*可以复制您用 SQL 编写的内容。:)

像这样的东西：

```
List<T> foo = ...;
List<U> bar = ...;

var query = from f in foo
            join b in bar on f.x = b.x
            select new { f, b };

foreach (var q in query) { ... } 
```

# java - 不需要的静态变量

> ID：15016072
> 
> 赞同：3
> 
> 时间：2013-02-22T02:53:30.663
> 
> 标签：java, eclipse, static

对于专家来说是一个非常简单的问题，但对于像我这样的初学者来说，这只是令人困惑。我以为我了解静态，但显然我不了解。下面是整个类，它说我需要将测试设为静态。但我不想。我能做些什么来解决这个问题，为什么它首先会发生？谢谢！

```
public class SubstringTest
{
    private String test;

    public static void main(String[] args)
    {
        test = "Penguin";
        System.out.println(test);
        System.out.println(test.substring(3));

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T02:55:21.037

`main`是静态的。`test`不是。

如果您不想制作静态，则必须先`test`创建一个*实例*。`SubstringTest`

```
SubstringTest st = new SubstringTest(); // create an instance
st.test = "test"; // this works
System.out.println(st.test); // also works 
```

如果`test`是静态的，你可以这样做

```
SubstringTest.test = "test"; 
```

或者，如果您正在编写的代码在类中`SubstringTest` **并且** `test`是静态的：

```
test = "test"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T02:55:12.550

静态方法不能访问非静态/实例变量，因为静态方法永远不会与任何实例相关联。静态方法不能直接调用非静态变量。但是静态方法可以通过声明实例并使用它们来访问非静态变量。

```
public class SubstringTest
{
private String test; // make it private static String test;

public static void main(String[] args)
{   // SubstringTest t = new SubstringTest(); Or change here.
    // t.test ="Penguin";
    test = "Penguin";
    System.out.println(test);
    System.out.println(test.substring(3));

}

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T02:56:51.147

您**不能**从静态方法访问实例变量。

因为静态方法是在类实例上调用的，而不是在类的对象上调用的。这意味着，静态方法无法访问实例变量，因为它们仅在对象中实例化

# ruby - 如何在我的 Ruby 控制台实用程序中清除终端？

> ID：15016075
> 
> 赞同：1
> 
> 时间：2013-02-22T02:53:49.900
> 
> 标签：ruby, shell

我正在尝试用 Ruby 编写一个小控制台脚本，它将为我运行我的测试。我基于Peter Cooper 的[Rake 任务](https://gist.github.com/peterc/113226)。

它可以工作，但如果它在每次运行之前清除控制台会很好。

有人可以告诉我如何让它做到这一点吗？

这是我到目前为止所拥有的：

```
require 'find'
files = {}

session_count = 0

puts "Watching #{File.expand_path(File.dirname(__FILE__))}."

loop do
  changed = false
  Find.find(File.dirname(__FILE__)) do |file|
    next unless file =~ /\.rb$/
    ctime = File.ctime(file).to_i

    if ctime != files[file]
      files[file] = ctime
      changed = true
    end
  end

  if changed

    command = 'ruby -Itest test/**/*_test.rb'

    puts '---------------------------------------------------------------------------------------------------------'
    puts "[#{session_count}] #### Running:\n      #{command}"
    puts '- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -'

    puts `#{command}`

    puts '---------------------------------------------------------------------------------------------------------'
    puts "[#{session_count}] #### Done"
    puts '---------------------------------------------------------------------------------------------------------'

    session_count += 1

  end

  sleep 1
end 
```

我在 Mac OS 10.7.5 上并使用 Zsh 4.3.11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:09:16.293

你可以这样做：

```
 if changed
    system('clear') 
... 
```

# javascript - Meteor observeChanges() 在应该调用一次时调用了两次

> ID：15016081
> 
> 赞同：2
> 
> 时间：2013-02-22T02:55:01.440
> 
> 标签：javascript, meteor

最新的流星的 observeChanges 游标方法似乎被调用了两次，我不确定为什么。

在仅限客户端的文件中，有以下代码：

```
Meteor.startup(function () {
//TODO BROKEN
    CodeFiles.find({_id: Session.get('currentFile')}).observeChanges({
        changed: function(id, fields) {
            console.log("Codefile changed");
            console.log(fields);
        }
    });
}); 
```

在我的浏览器中导致以下结果，

```
Codefile changed client.js:165
Object {edits: Object}
 client.js:166
XHR finished loading: "http://localhost:3000/sockjs/991/bm7f2oa8/xhr_send". sockjs-0.3.4.js:821
XHR finished loading: "http://localhost:3000/sockjs/991/bm7f2oa8/xhr". sockjs-0.3.4.js:821
Codefile changed client.js:165
Object {} 
```

如您所见，observeChanges 方法被调用了两次，一次使用正确的编辑对象，包括正确的数据。第二次使用空白对象。这不是一个大问题，因为我可以检查一个空对象并进行补偿，但我宁愿解决根本问题。

完整代码开源并可在此处查看： [Github 提交链接](https://github.com/joeljfischer/meteor-collabmirror/tree/c07814863e19cdd252f9410ccc15a73b34656e18 "Github 提交链接")

如果您运行代码以在 javascript 控制台中查看问题，请记下具体的提交号。在以后的提交中，我只是在进行未定义的检查，但我希望看到根本问题得到解决，因为发送无用的数据是一个问题。

# php - PHP，计算自添加以来的时间

> ID：15016087
> 
> 赞同：0
> 
> 时间：2013-02-22T02:55:44.497
> 
> 标签：php, mysql, database

我有这个函数可以计算自将一行添加到数据库以来经过的时间：

```
function added_on($time){
    $now = time();
    $time = $now - $time; 

    $blocks = array (
        31536000 => 'year',
        2592000 => 'month',
        604800 => 'week',
        86400 => 'day',
        3600 => 'hour',
        60 => 'minute',
        1 => 'second'
    );

    foreach ($blocks as $unit => $size) {
        if ($time < $unit) 
            continue;

        $nrOfUnits = floor($time / $unit);
        return $nrOfUnits.' '.$size.(($nrOfUnits>1)?'s':'');
    }

} 
```

这样做的问题是不准确，即有大约 7 小时的误差。在当前时间调用时，它返回如下：7 小时前添加。函数调用如下：

```
$posted_on = strtotime($row['created_at']);
echo 'added '.added_on($posted_on).' ago'; 
```

`$row['created_at']`MySQL日期类型在哪里

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:13:26.593

乍一看，我猜测不同的时区。在纯 MySql 中完成相同任务的另一种方法如下：

```
select time_to_sec(timediff(now(), created_at)) as seconds_ago from `table_name` 
```

为了帮助您进行更多调试，您可以使用以下（[文档](http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html)）检查和设置 mysql 服务器的时区：

```
-- Check the global and session time_zone settings
select @@global.time_zone, @@session.time_zone;

-- Set the time zone to GMT -5 hours (EST):
set SESSION time_zone = '-5:00'; 
```

# mysql - 在codeigniter中，除了**affected_rows()**之外，有什么不同的方法测试数据库的更新过程吗？

> ID：15016089
> 
> 赞同：0
> 
> 时间：2013-02-22T02:56:35.740
> 
> 标签：mysql, codeigniter, mysqli

我需要一些关于测试更新过程的帮助。我知道有**affected_rows()**函数来显示成功更新。但是当列值与以前的列相同时，我想通过一些准备好的 codeigniter 或 mysqli 函数返回 TRUE 或显示成功消息。（如果有）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:03:23.077

如果即使列值相同也想返回 true，请始终在模型函数中返回 true，因此您不必在您的情况下使用affected_rows()。

# http - 提供没有文件扩展名的可下载文件？

> ID：15016092
> 
> 赞同：0
> 
> 时间：2013-02-22T02:56:56.823
> 
> 标签：http, http-headers, attachment, file-extension

我正在使用 Rails 向用户提供文件，如下所示：

```
def show
  headers['Content-Disposition'] = "attachment; filename=\"SIGNATURE\""
  headers['Content-Type'] = "text/plain"
  render :text => 'some text file content'
end 
```

我的浏览器（OS X 上的 Chrome）在下载时重命名`SIGNATURE`为。`SIGNATURE.txt`

我尝试了几种方法，例如设置`Content-Type: application/unknown`和放置`.`after `SIGNATURE`。

如何确保浏览器不为文件名附加扩展名？

这不是一个特定的 Rails 问题——它很可能是我需要的 HTTP 标头响应设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:06:47.483

尝试将内容类型设置为`application/octet-stream`.

# textbox - 如何删除点击时出现在 Windows Phone 中文本框下方的底部填充？

> ID：15016100
> 
> 赞同：0
> 
> 时间：2013-02-22T02:57:40.690
> 
> 标签：textbox, windows-phone-8, windows-phone, padding

我正在尝试在 Windows Phone 8 中实现聊天视图。当用户点击视图底部的 TextBox 时，视图会随着键盘的出现垂直移动，但视图底部会出现额外的填充量。我在其他应用程序中也看到了这种情况。

这是我的应用程序：

![在此处输入图像描述](../Images/86df13969bf0dc4db3d5a065b084bf22.png)

这是一个等效的应用程序（Whatsapp），它已经清楚地解决了这个问题。

![在此处输入图像描述](../Images/d2d40b68c74b5227850f1692622b5995.png)

有人对如何以不会破坏我观点的方式纠正此问题有任何想法吗？我尝试在 Focused/Unfocused 时手动修改填充没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:31:04.520

您始终可以尝试为底部边距提供负值。例如给 -40px 看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:45:24.767

如果您使用的是网格，请将高度设置为文本框所在的“自动”。

设置 InputScope="默认"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T21:49:47.140

好消息！我已经设法解决这个问题。下面的代码完全阻止页面向上移动，然后在文本框的底部添加一个边距以将其放置在键盘上方。低于 417 的值似乎对我很有效，但您可以将其更改为您喜欢的任何值。使用此方法还可以阻止其他内容（例如对话）被推离屏幕，因为它在键盘处于活动状态时可以完全滚动。

```
private void TextBox_GotFocus_1(object sender, RoutedEventArgs e)
    {
        var rootFrame = Application.Current.RootVisual as PhoneApplicationFrame;
        rootFrame.RenderTransform = new CompositeTransform() { TranslateY = +0 };
        TextInput2.Margin = new Thickness(12, 0, 12, 417);
    }

private void TextBox_LostFocus_1(object sender, RoutedEventArgs e)
    {
        var rootFrame = Application.Current.RootVisual as PhoneApplicationFrame;
        rootFrame.RenderTransform = new CompositeTransform() { TranslateY = +0 };
        TextInput2.Margin = new Thickness(12, 0, 12, 12);
    } 
```

# d3.js - 在 d3 中如何获得两点之间的值？

> ID：15016104
> 
> 赞同：0
> 
> 时间：2013-02-22T02:58:05.183
> 
> 标签：d3.js

如果我在 d3 中有一个折线图，我怎样才能到达直线中的任何给定点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:03:38.477

使用线性插值计算 2 个给定点 a 和 b 之间的中间点。D3 具有 d3.interpolate API 方法。

# javascript - Fancybox 不适用于简单链接

> ID：15016112
> 
> 赞同：0
> 
> 时间：2013-02-22T02:59:27.947
> 
> 标签：javascript, jquery, fancybox

请开发人员，我一遍又一遍地做了所有事情，似乎无法找出为什么fancybox插件拒绝工作。我认为它下面的 javascript 假设会触发插件。

```
<script type="text/javascript">
$(document).ready(function() {

    /* This is basic - uses default settings */

    $("a#contactus").fancybox();

    /* Using custom settings */

    $("a#inline").fancybox({
        'hideOnContentClick': true
    });

    /* Apply fancybox to multiple items */

    $("a.group").fancybox({
        'transitionIn'  :   'elastic',
        'transitionOut' :   'elastic',
        'speedIn'       :   600, 
        'speedOut'      :   200, 
        'overlayShow'   :   false
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:03:25.400

打开您的控制台 (F12) 并注意到错误？

Fancybox 似乎使用`$.browser`，它在 jQuery 1.9 中被删除，这是一个错误！

还有，`$("a#contactus").fancybox();`是个错误！没有这样的元素，但是您确实有一个具有该 ID 的 div 吗？

# python - 真的，真的从 Python 中的循环列表中删除一个项目

> ID：15016114
> 
> 赞同：0
> 
> 时间：2013-02-22T02:59:51.733
> 
> 标签：python, list

我想要什么：我希望列表 q 只出现 3 次。当它出现时，系统会提示您选择列表项之一。每次选择一个示例时，我都希望它消失并且无法再次选择 - 我什至不希望显示选择它的选项。So, when example 1 is selected, it then displays the list with examples 2 and 3 available. 然后，假设接下来选择示例 3 - 列表应显示，之后只有示例 2 可用。相反，它显示 1 和 2 都可用，即使 1 之前已删除。

所以问题是该项目在删除时并没有从列表中永久删除，并且在下一次打印时又回来了，这是我不想要的。

```
for x in range(0,3):
    q = ['example 1', 'example 2', 'example 3']
    select = raw_input("> ")
    if select == "1":
        del q[0]
        print q
    if select == "2":
        del q[1]
        print q
    if select == "3":
        del q[2]
        print q 
```

似乎有很多关于从 Python 中的列表中删除内容的问题，但我一直在寻找答案好几天了，还没有找到适合我的特殊情况的任何东西。对于任何愚蠢，我提前道歉，我现在才学习编程一个月。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T03:05:43.093

您当前代码的行为方式是因为 list 'q' 每次都被初始化。那么你删除列表的方式也是错误的。

您的复制/删除语义是指 Python 中的深层复制概念，此处不适用。

你想在 Python 中使用字典类型。

```
def Foo():
    q = {1:'example 1', 2:'example 2', 3:'example 3'};
    for x in range(0,3):
        select = raw_input("> ")
        if select == "1":
            del q[1]
            print q
        if select == "2":
            del q[2]
            print q
        if select == "3":
            del q[3]
            print q 
```

更简洁

```
def foo():
    q = {1:'example 1', 2:'example 2', 3:'example 3'};
    for x in range(0,3):
        select = raw_input("> ")
        del q[int(select)]
        print q 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:19:24.493

你在这里使用 del 有什么原因吗？这似乎太小了，无需担心显式删除对象。您只需将它们从列表中删除：

```
q = ['example 1', 'example 2', 'example 3']
while len(q)>0:
    try:
        select = int(raw_input("> "))
        print q.pop(select-1)
    except (ValueError, IndexError):
        print 'please enter an integer between 1 and 3' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:23:15.063

尝试这个：

```
def menu():
    q = {1: 'example 1', 2: 'example 2', 3: 'example 3'}
    for _ in range(3):
        print '\n'.join('{} - {}'.format(*item) for item in sorted(q.items()))
        try:
            print q.pop(int(raw_input('> ')), "That's not a valid option")
        except ValueError:
            print "That's not a valid option"
    print "No more menu options left!" 
```

# haskell - wikibooks 中的 Haskell 状态示例：按当前 Haskell 修复？

> ID：15016115
> 
> 赞同：2
> 
> 时间：2013-02-22T03:00:07.417
> 
> 标签：haskell, state, monads

# 原来的问题

Haskell 的最新版本（> 7.4.2？）带有一个 mtl 包，它本身不再提供 State 构造函数，而是提供了一个 state 函数。

这会在此处的 wikibooks 页面中弄乱 State 的示例：[http ://en.wikibooks.org/wiki/Haskell/Understanding_monads/State](http://en.wikibooks.org/wiki/Haskell/Understanding_monads/State)

有人可以展示如何修改标题“介绍状态”之后的示例吗？这就是rollDie 和rollDice 的小函数。

页面前面有一个注释框，靠近标题“状态单子的定义”，它一般描述了要做什么，但对我来说太模糊了。

另外，我不太清楚导入和包是如何工作的，因此对这个示例至关重要的一个可能相关的事情可能是指定需要哪些导入，因为它们也可能已经改变。

谢谢！

# 源代码

```
------- Adding code for ghci01.hs-------

-- http://en.wikibooks.org/wiki/Haskell/Understanding_monads/State
-- Introducing State heading and below

import Control.Monad
import System.Random

type GeneratorState = State StdGen

rollDie :: GeneratorState Int
rollDie = do generator <- get
             let (value, newGenerator) = randomR (1,6) generator
             put newGenerator
             return value

-- Test rollDie
-- evalState rollDie (mkStdGen 0)

rollDice :: GeneratorState (Int, Int)
rollDice = liftM2 (,) rollDie rollDie

-- Test rollDice
-- evalState rollDice (mkStdGen 666)

------- In GHCi --------
ghci> :l dice01.hs
[1 of 1] Compiling Main             ( dice01.hs, interpreted )
dice01.hs:7:23: Not in scope: type constructor or class `State'
dice01.hs:10:27: Not in scope: `get'
dice01.hs:12:14: Not in scope: `put'
Failed, modules loaded: none. 
```

# 附录

对于在这里偶然发现的其他人：

这个问题的主题围绕着无效的示例代码，以及上面引用的维基书籍页面上的注释框中的警告。该框告诉 MTL 版本 > 2.0.0.0，由于 Control.Monad.State 的更改，某些示例代码将无法工作。

我的测试涉及 Haskell Platform 2012.4.0.0，其中包括 GHC 7.4.2，以及基于 mtl.cabal 文件的 MTL，我后来发现它是 1.1.1.1。因此，注释的警告不应该适用，但示例代码仍然不起作用。此处答案推荐的更改（将导入 Control.Monad 更改为 Control.Monad.State）确实解决了问题。但很明显，这解决了与早期更改有关的问题，而不是注释中引用的 MTL 2.x。

从那以后，我查看了 GHC 7.6.2 的源代码，但我根本找不到 MTL 库。相反，与状态相关的文件位于 library/transformers/Control/Monad/Trans/State 中。然后我走了一堆令人困惑的弯路，包括目前没有使用晚于 7.4.2 的 GHC 的 Haskell 平台的问题（即：没有 7.6.2）。

然后我找到了指向这个stackoverflow问答的MTL文档（[http://www.haskell.org/haskellwiki/Monad_Transformer_Library）：mtl，transformers，monads-fd，monadLib，and](http://www.haskell.org/haskellwiki/Monad_Transformer_Library) [the paradox of selection](https://stackoverflow.com/questions/2769487/mtl-transformers-monads-fd-monadlib-and-the-paradox-of-choice) ……这可以解释很多，至少在2-3年前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T04:19:11.357

上面的代码只有一个问题

```
Control.Monad ===> Control.Monad.State 
```

唯一真正让你感到变化的是当你有类似的东西时

```
foo :: State Int Int
foo = State $ \a -> (a, a) -- This is an error 
```

但修复它很容易：

```
foo :: State Int Int
foo = state $ \a -> (a, a) 
```

类型构造函数`State`还在，只是数据构造函数被隐藏了`state`。这有点令人困惑，因为它们都被命名为同一个东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T04:16:50.963

`State`代码使用类型同义词编译得很好。你只需要

```
import Control.Monad.State 
```

# mysql - MySQL Query 使用子查询两次

> ID：15016118
> 
> 赞同：1
> 
> 时间：2013-02-22T03:00:42.343
> 
> 标签：mysql

我有这个查询

```
SELECT itemID, locationParentID, locationID, categoryParentID, categoryID, itemTitle, itemDetails, itemAttributes, itemPictures, itemFeatured, itemSpotlight, itemAdded 
FROM items 
WHERE locationID NOT IN
    (SELECT locationID 
    FROM sites_locations 
    WHERE siteID != 2) AND items.siteID IN('1,2') AND itemStatus = '1' 
    AND itemAdded > '1356048000' 
```

它工作正常但是当我执行这个查询时它失败了

```
SELECT itemID, locationParentID, locationID, categoryParentID, categoryID, 
itemTitle, itemDetails, itemAttributes, itemPictures, itemFeatured, itemSpotlight, itemAdded FROM items 
WHERE locationID NOT IN
    (SELECT locationID 
     FROM sites_locations WHERE siteID != 2) 
     AND categoryID NOT IN (SELECT categoryID FROM sites_categories 
     WHERE siteID != 2) AND items.siteID IN('1,2') AND itemStatus = '1' 
     AND itemAdded > '1356048000' 
```

这里的区别是我添加了子句

```
AND categoryID NOT IN(SELECT categoryID FROM sites_categories 
WHERE siteID != ".$cfg['site']['siteID'].") 
```

任何想法为什么这不起作用？

甚至更好的是加入查询来帮助优化它。

sites_categories 的表结构，数据在 ![在此处输入图像描述](../Images/80b1db1401b9b751fddc844cf49cd4c8.png)

项目的表结构，数据在 ![在此处输入图像描述](../Images/6e91b15f4b7598a3265d760d92ddd353.png)

sites_locations 的表结构 ![在此处输入图像描述](../Images/a30dc0c85dee8f8bf189548696699851.png)

位置的表结构，数据在 ![在此处输入图像描述](../Images/b98e9a67839e85819400da2b09026366.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:50:28.383

试试这个

```
SELECT i.itemID, i.locationParentID, i.locationID, i.categoryParentID, i.categoryID, 
i.itemTitle, i.itemDetails, i.itemAttributes, i.itemPictures, i.itemFeatured, i.itemSpotlight, i.itemAdded 
FROM    items i,  sites_locations sl, sites_categories sc  
WHERE i.locationID = sl.locationID 
AND i.categoryID = sc.categoryID   
AND i.siteID = 1 AND i.itemStatus = '1' 
AND i.itemAdded > '1356048000' 
```

它可能有一些错误或与列名相关的错误请纠正这些错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:25:42.410

你可以把它变成这样的连接：

```
SELECT i.itemID, i.locationParentID, i.locationID, i.categoryParentID, i.categoryID, 
       i.itemTitle, i.itemDetails, i.itemAttributes, i.itemPictures, i.itemFeatured,
       i.itemSpotlight, i.itemAdded
FROM items i left outer join
     sites_locations sl
     on i.locationID = sl.locationId and sl.siteId <> 2 left outer join
     sites_categories sc
     on i.categoryID = sc.categoryId and sc.siteId <> 2
WHERE sl.locationID is NULL and sc.categoryId is NULL and
      i.siteID IN (1, 2) AND i.itemStatus = 1 AND i.itemAdded > 1356048000 
```

这也可能具有更好的性能。

注意：我没有测试过这个 SQL，所以它可能有语法错误。特别是，您可能需要在某些列名之前添加别名（最好在列名之前始终使用别名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:54:27.913

解决了

```
SELECT itemID, locationParentID, locationID, categoryParentID, categoryID, itemTitle, itemDetails, itemAttributes, itemPictures, itemFeatured, itemSpotlight, itemAdded FROM items WHERE items.siteID IN('1,2') AND items.locationID = (SELECT locationID FROM sites_locations sl WHERE sl.locationID = items.locationID AND siteID = '2') AND items.categoryID = (SELECT categoryID FROM sites_categories sc WHERE sc.categoryID = items.categoryID AND siteID = '2') AND itemStatus = '1' AND itemAdded > '1356048000' ORDER BY itemID DESC LIMIT 15 
```

# apache - 安装成功但无法在我的 Windows 7 系统上启动 apache 2.4

> ID：15016119
> 
> 赞同：27
> 
> 时间：2013-02-22T03:00:58.270
> 
> 标签：apache, service, windows-7, installation

我试图在我的 Windows 7 系统上安装和运行 apache 2.4 我去了 apache 2.4 bin 目录并运行以下命令： 注意：我以管理员身份打开了 cmd 窗口。C:\Apache24\bin>httpd.exe -k 安装

它的输出如下：

```
Installing the Apache2.4 service
The Apache2.4 service is successfully installed.
Testing httpd.conf....
Errors reported here must be corrected before the service can be started.
(OS 10013)An attempt was made to access a socket in a way forbidden by its acces
s permissions.  : AH00072: make_sock: could not bind to address [::]:80
(OS 10013)An attempt was made to access a socket in a way forbidden by its acces
s permissions.  : AH00072: make_sock: could not bind to address 0.0.0.0:80
AH00451: no listening sockets available, shutting down
AH00015: Unable to open log 
```

所以它安装了 apache 2.4 作为服务，但它无法启动。似乎正在使用 localhost 端口 80。这就是**“[::]:80”**的意思吗？

然后我停止了我一直运行的 apache 2.0 服务和 mysql 服务，希望停止其中一个服务可以释放 localhost 端口 80。

我还运行 netstat -o 以查看是否正在使用端口 80。不是。

但是，然后我发现一个进程正在使用上面的套接字，它是一个正在侦听上面的套接字的进程

```
 TCP    [::]:80                User-PC:0              LISTENING       4 
```

然后我运行任务列表，发现系统正在使用 pid 4。4 在 pid 列下

```
System                           4 Services                   0        544 K 
```

最后，由于尝试启动服务失败，我收到了一个错误，该错误记录在 Windows 系统事件中。

```
Log Name:      System
Source:        Service Control Manager
Date:          2/21/2013 1:58:03 PM
Event ID:      7024
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      User-PC
Description:
The Apache2.4 service terminated with service-specific error Incorrect function.

Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="Service Control Manager" Guid="{555908d1-a6d7-4695-8e1e-26931d2012f4}" EventSourceName="Service Control Manager" />
    <EventID Qualifiers="49152">7024</EventID>
    <Version>0</Version>
    <Level>2</Level>
    <Task>0</Task>
    <Opcode>0</Opcode>
    <Keywords>0x8080000000000000</Keywords>
    <TimeCreated SystemTime="2013-02-21T18:58:03.723988900Z" />
    <EventRecordID>87756</EventRecordID>
    <Correlation />
    <Execution ProcessID="560" ThreadID="7596" />
    <Channel>System</Channel>
    <Computer>User-PC</Computer>
    <Security />
  </System>
  <EventData>
    <Data Name="param1">Apache2.4</Data>
    <Data Name="param2">%%1</Data>
  </EventData>
</Event> 
```

尝试开始时的错误表明，由于缺乏访问权限，make-sock 无法绑定到在我看来类似于 localhost 端口 80 的套接字。例如，

```
 (OS 10013)An attempt was made to access a socket in a way forbidden by its acces
    s permissions.  : AH00072: make_sock: could not bind to address [::]:80 
```

谁能告诉我做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T19:59:19.030

很抱歉这个问题。为了解决我的问题，我只是告诉 apache 2.4 在 httpd.conf 中监听不同的端口。由于 System 使用的是监听端口 80 的 pid 4，我不想进一步探索这个问题。

我将以下内容放入 httpd.conf。听 127.0.0.1:122

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-03-24T06:03:47.977

最有可能的罪魁祸首是 Microsoft Internet Information Server。您可以从 Windows 7/Vista 上的命令行停止该服务：

净止损是/y

或 XP：

净停止 iisadmin /y

阅读此 [http://www.sitepoint.com/unblock-port-80-on-windows-run-apache/](http://www.sitepoint.com/unblock-port-80-on-windows-run-apache/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-31T03:57:36.410

win7升级到win10后，我也遇到了同样的问题。然后我检查 services.msc 并发现“**万维网发布服务**”默认自动运行。所以我禁用了它，并再次运行 Apache 服务。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-04T11:18:27.397

```
Microsoft HTTPAPI 可能使用端口 80

尝试停止以下服务：
  Web 部署代理服务
  SQL Server 报告服务
  SQL Server VSS 编写器

```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-16T11:49:54.037

我终于解决了这个问题，这是因为某些系统（如Skype）和系统进程占用该端口80，您可以使用netstat -ao检查端口80

请找到以下步骤

1.  安装 Apache HTTP 后，使用 cmd 转到 bin 文件夹

2.  使用 httpd.exe -k install 将其安装为服务，即使您看到错误也没关系

3.  现在确保根据您的操作系统安装了服务（即使没有启动）

4.  重启系统，你会发现Apache服务会第一个占用80端口，

恭喜问题解决了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T05:58:36.857

如果您使用的是 windows 操作系统并且认为 skype 不是嫌疑人，那么您可能需要检查任务管理器并检查“显示所有用户的进程”并确保没有 httpd.exe 条目。否则，结束其进程。这解决了我的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-25T08:36:14.057

所以，这就是我发布两个（或更多）帖子的原因。

启动服务时我遇到了同样的问题（无法打开日志）。

我认为这是因为我试图将 htdocs 放在 VeraCrypt 加密容器中，这很荒谬，因为我已经安装了这样的包含内容，并且我使用了一个连接来不影响路径。

我读到的原因可能是内存不足：经过一些测试，我得出了下一个结论。

如果它是一项服务，Windows 不会将页面发送到虚拟内存以释放足够的内存，对于它正在执行的应用程序，我有超过 200GiB 的页面文件准备好在 4GiB 64 位 Windows 10 中用作虚拟内存。

我的解决方案：

1.  运行一个免费的实用程序来释放内存（在我的测试中为 512MiB）
2.  启动服务后立即启动，没有错误

真正原因：

*   我使用的是使用 1/2 物理空闲内存 (1.5GiB) 的虚拟机

希望这对其他人有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-01T20:55:32.653

我也面临同样的问题，然后我尝试在每次更改后重新启动我的系统，它对我有用：

1.  在 cmd 提示符下（运行管理员）使用以下命令卸载 Apache2.4 `httpd -k uninstall`：.
2.  重新启动系统。
3.  使用以下命令打开 cmd 提示符（运行管理员）： `httpd -k install`.
4.  然后`httpd -k install`。

希望你觉得有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-19T07:54:45.940

就我而言，这是由于 Apache 正在侦听的 IP 地址。以前我将它设置为 192.168.10.6，最近 Apache 服务没有运行。我注意到由于我的笔记本电脑wifi最近发生了变化，新的IP也不同了。将 wifi IP 修复为笔记本电脑以前的 IP 后，Apache 服务再次运行，没有任何错误。

此外，如果您不想更改 wifi IP，请删除/注释 httpd.conf 文件中的硬编码 IP 以解决冲突。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-04T16:41:54.113

你可以解决它

```
sudo nano /etc/apache2/ports.conf 
```

> 并更改为听 8080

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2015-03-29T12:03:55.247

这可能是因为物理 RAM 不足。

检查文档中的最低系统要求，并尽可能关闭不必要的程序。

# java - Apache ambari 组件？

> ID：15016120
> 
> 赞同：-1
> 
> 时间：2013-02-22T03:01:01.430
> 
> 标签：java

我刚开始接触hadooop。我正在使用 apche ambari 来管理我的集群。我想知道用于 ambari 的编程语言和工具 (Java) 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:25:11.590

以下是使用的语言和工具：

## 语言：

Java - 用于实现 ambari 服务器和网络服务

Java 脚本： - 用于 ambari 服务器 ui

Python - 用于 ambari 代理

Shell 脚本：用于配置服务

## 工具 ：

Ganglia ：用于收集 cpu、网络使用等矩阵

Puppet：用于启动和停止 hadoop 服务

Nagios：用于在任何服务关闭时发送警报

# wordpress - Wordpress Livesite 到本地主机

> ID：15016121
> 
> 赞同：-2
> 
> 时间：2013-02-22T03:01:09.227
> 
> 标签：wordpress

Wordpress Livesite 到本地主机？谁能指出我正确的方向？我想将一个 wordpress 网站带到 localhost。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:22:35.120

这是将 WordPress 实时站点迁移到本地的方法。

1.  使用您喜欢的工具设置本地 Web 和数据库服务器，例如 XAMPP、MAMP 等
2.  使用此[搜索和替换工具](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)将所有活动域记录实例替换为本地域（例如替换`http://example.com`为`http://localhost`）
3.  在实时站点中导出 WordPress 数据库（您现在应该有 .sql 文件转储）
4.  再次运行搜索和替换工具，恢复在步骤 2 中所做的更改（反转替换）
5.  将实时站点中的所有 WordPress 源下载到您的本地 Web 服务器 Web 根目录
6.  在本地使用您最喜欢的数据库工具（例如 phpMyAdmin），创建一个模式并导入您在第 3 步中创建的数据库转储。
7.  在本地浏览您的克隆站点。享受。

此方法已多次用于 WordPress 站点的部署和案例。绝对有效！

# arrays - Char ** 函数在函数之外不能正常工作

> ID：15016122
> 
> 赞同：0
> 
> 时间：2013-02-22T03:01:17.360
> 
> 标签：arrays, string, char, strtok

所以我创建了一个名为 myargv 的 char** 变量，它应该像一个在每个索引处存储字符串的数组。我有一个函数可以将 char** 返回给 myargv，当我从内部打印所有内容时，该函数似乎工作正常，但是当我尝试从 main 打印出 myargv 中的内容时，它不再工作了.. .. 谁能帮我？

```
char **findArgs(char *line)
{
int i = 0;
char **temp, *tokTemp;
char **myargv;

tokTemp = strtok(line, " ");

myargv = malloc(sizeof(*myargv));

while (tokTemp != NULL)
{
if (strcmp(tokTemp, ">") == 0 || strcmp(tokTemp, "<") == 0 || strcmp(tokTemp, ">>") == 0)
{
    break;
}
else
{
    myargv[i] = malloc(strlen(tokTemp) + 1);
    //myargv[i] = malloc(sizeof(char)*strlen(tokTemp));
    strcpy(myargv[i], tokTemp);
    //printf("myargv[%d] = %s \n", i, myargv[i]);

    temp = realloc(myargv, (i+2)*sizeof(*myargv));    
    if (temp != NULL)
    {
        myargv = temp;
    }
    tokTemp = strtok(NULL, " ");
    i++;
}
}
myargv[i] = NULL;
//printf("myargv[0] = %s\n", myargv[0]);
return myargv;
}

int main(int argc, char *argv[], char *env[])
{
int cmdInt, pid, status, i = 0, ioNumber = 0;
char input[64], lineBUFFER[64], lineBUFFER2[64], lineBUFFER3[64], lineBUFFER4[64], homePath[64], fileName[64], cmdPathFINAL[64];
char *cmd;
char **myargv, **cmdPath; 
int myFile;

while(1)
{

 printf("command: ");
 gets(input);

strcpy(lineBUFFER, input);
strcpy(lineBUFFER2, input);
strcpy(lineBUFFER3, input);  
strcpy(lineBUFFER4, input);  

cmd = strtok(lineBUFFER3, " ");
cmdInt = findCommand(lineBUFFER2);

ioNumber = ioCheck(lineBUFFER4, fileName);
//printf("ioCheck = %d \n", ioNumber);
//printf("Filename: %s \n", fileName);

myargv = findArgs(lineBUFFER);
//printf("myargv[0] = %s\n", myargv[0]);

findHome(env, homePath);
//printf("Home path = %s\n", homePath);

switch(cmdInt)
      { 
          case 0 : 

            if (myargv[1] == NULL)
    {
        chdir(homePath);
    }
    else
    {
        //printf("1st argument: %s, 2nd argument: %s, 3rd argument: %s \n", myargv[1], myargv[2], myargv[3]);
        chdir(myargv[1]);
    }

              break;
          case 1 :

              exit(1);   

              break;
          default :

            pid = fork();
    if (pid == 0)
    {
    //printf("Parent %d waits for child %d to die. \n", getpid(), pid);
    pid = wait(&status);
    printf("dead child = %d, how = %04x \n", pid, status);
    exit(100);
    }
    else
    {
        ioNumber = ioCheck(lineBUFFER4, fileName);
            //printf("ioCheck = %d \n", ioNumber);
            //printf("Filename: %s \n", fileName);
        cmdPath = getPath2(env);
            //printf("cmdPath[0] = %s\n", cmdPath[0]);

            findPath(cmd, cmdPath, cmdPathFINAL);
            printf("Command Path = %s\n", cmdPathFINAL);

        if (ioNumber == 1)
        {
            close(0);
            myFile = open(fileName, O_RDONLY);
        }   
        else if (ioNumber == 2)
        {
            close(1);
            myFile = open(fileName, O_WRONLY|O_CREAT, 0644); 
        }
        else if (ioNumber == 3)
        {
            close(1);
            myFile = open(fileName, O_WRONLY|O_APPEND);
        }

        execve(cmdPathFINAL, myargv, env);
        //printf("child %d dies by exit () \n", getpid());
        exit(100);
    }

              break;
      }
}

if (ioNumber == 1 || ioNumber == 2 || ioNumber == 3)
{
close(myFile);
}   

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:37:30.767

以下适用于 Window 和 SuSE linux 10.4 x86_64 内核 2.6.16。解析器有两个版本：getArgs 和 getArgs2。没有对代码进行彻底的审查，但希望它会对您有所帮助。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

int getArgs(const char *line, char *args[], int argc)
{
    int len, i = 0;
    const char* delims = " ";
    char *ltok = strdup(line);
    char *tok = strtok(ltok, delims);

    for (; tok != NULL; i++) {

        if (strchr("><|", *tok) != NULL) /* not sure why this test is needed for CLI */
            break;

        if (args != NULL && i < argc) {
            args[i] = strdup(tok);
        }

        tok = strtok(NULL, delims);
    }

    free(ltok);

    return i;
}

int getArgs2(const char *line, char **args, int argc)
{
    int len, i = 0;
    const char *p, *q;
    const char *delims = " ";

    p = line;
    while (strchr(delims, *p) != NULL && *p != '\0')
        p++;

    q = p;
    while (strchr(delims, *q) == NULL && *q != '\0')
        q++;

     for (; q > p; i++) {

        if (strchr("><|", *p) != NULL) /* not sure why this test is needed for CLI */
            break;

        len = q-p;

        if (args != NULL && i < argc) {
            args[i] = (char *)malloc(len + 1);
            strncpy(args[i], p, len)[len] = '\0';
        }

        p = q;
        while (strchr(delims, *p) != NULL && *p != '\0')
            p++;

        q = p;
        while (strchr(delims, *q) == NULL && *q != '\0')
            q++;

    }

    return i;
}

int main(int argc, char *argv[])
{
    char line[256], *q;
    char **args;
    int count, n;

    for(;;) {

        printf("command: ");
        if (fgets(line, sizeof(line)/sizeof(line[0]), stdin) == NULL)
            break;

        q = line;
        while (isspace(*q))
            q++;

        if (*q == '\0')
            break;

        while (*q != '\0' && *q != '\n' && *q != '\r')
            q++;

        *q = '\0';

        for(count = 0, q = line; *q != '\0'; q++)
            if (*q == ' ')
                count++;

        printf("Input command: %d character(s), %d space(s) for \"%s\"\n", strlen(line), count, line);

        count = getArgs(line, NULL, 0);

        if (count > 0) {
            args = (char **)malloc(sizeof(char *)*count);
            count = getArgs(line, args, count);
        } else {
            args = NULL;
        }

        printf("Parsed %d arg(s) from line\n", count);
        printf("--------------------------------------\n");

        for (n = 0; n < count; n++) {
            printf("%d: %s\n", n+1, args[n]);
            free(args[n]);
        }

        free(args);

    }

    return 0;

} 
```

# java - 当另一个接收焦点时清除 JFormattedTextField

> ID：15016126
> 
> 赞同：0
> 
> 时间：2013-02-22T03:02:12.047
> 
> 标签：java, swing, jformattedtextfield

我有一个包含 2 个 JFormattedTextFields、2 个 JComboBoxes、2 个 JLabels 和 1 个 JButton 的程序。当我在一个 JFormattedTextField 中输入任何文本，然后单击前面提到的任何控件时，我输入文本的 JFormattedTextField 将被清除。这是为什么？

我的代码：

```
 import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.event.*;
import javax.swing.text.*;

import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeEvent;

import java.text.*;
/*'Current' refers to the Current XP/Level controls
 *'Desired' refers to the desired XP/Level controls*/
public class RSXPCalc
{
    //Variables to use in multiple controls
    static private String[] choices = {"Level", "XP"};

    /*Global controls*/
    //Current XP/Level Controls
    static private JFormattedTextField currentBox = new JFormattedTextField(createFormatter("#########"));
    static private JLabel currentLabel = new JLabel("Value according to above :"); 
    static private JComboBox<String> currentChoice = new JComboBox<String>(choices);

    //Desired XP/Level Controls
    static private JFormattedTextField desiredBox = new JFormattedTextField(createFormatter("#########"));
    static private JLabel desiredLabel = new JLabel("Value according to above :"); 
    static private JComboBox<String> desiredChoice = new JComboBox<String>(choices);

    //Other controls
    static private JButton calc = new JButton("Calculate XP");  //Button
    static private JLabel CXPL = new JLabel("");                //Current XP Label

    //Vairiables used in calculation
    static private double CXP, DXP, CLevel, DLevel;
    static String temp;

    public static void main(String[] args) 

    {
        //Creating the main window
        JFrame main = new JFrame("Test Frame");

        //Configuring the frame
        main.setSize(400,200);                                  //Size
        main.setLayout(null);                                   //Allows for free-placement on a coordinate grid of objects
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);    //Exitcode
        main.setResizable(false);                               //making it a fixed size

        //Configuring the 'current' controls
        currentBox.setBounds(165,43,70,30);     //Setting the (x,y) location and size of the current level/XP textbox
        currentLabel.setBounds(10,43,155,30);   //Setting the (x,y) location and size of the current level/XP label
        currentChoice.setBounds(10,10,225,30);  //Setting the (x,y) location and size of the current level/XP combobox

        //Configuring the 'desired' controls
        desiredBox.setBounds(165,109,70,30);    //Setting the (x,y) location and size of the desired level/XP textbox
        desiredLabel.setBounds(10,109,155,30);  //Setting the (x,y) location and size of the desired level/XP label
        desiredChoice.setBounds(10,76,225,30);  //Setting the (x,y) location and size of the desired level/XP combobox

        //Configuring the button
        calc.setBounds(245, 10, 142, 62);
        //Placing the CurrentXP Label
        CXPL.setBounds(245, 65, 142, 62);

        //Adding the controls to the window and making the window visible\
        //'Current' Controls
        main.add(currentBox);
        main.add(currentLabel);
        main.add(currentChoice);
        //Desired Controls
        main.add(desiredBox);
        main.add(desiredLabel);
        main.add(desiredChoice);

        //Other controls
        main.add(calc); //Button
        main.add(CXPL); //CurrentXP label

        main.setVisible(true);

    }

    //Format method. Taken from oracle.com
    static protected MaskFormatter createFormatter(String s) 
    {
       MaskFormatter formatter = null;
        try {
            formatter = new MaskFormatter(s);
        } catch (java.text.ParseException exc) {
            System.err.println("formatter is bad: " + exc.getMessage());
            System.exit(-1);
        }
        return formatter;
    }
} 
```

# mysql - 如何使数据库更新，创建原子，并在更新不完整的情况下回滚？

> ID：15016127
> 
> 赞同：0
> 
> 时间：2013-02-22T03:02:19.210
> 
> 标签：mysql

我是 MySQL 新手。我想执行这些操作：

1.  在表中插入一条记录。
2.  如果上面的 INSERT 成功，则创建一个表。

我如何确保这两件事像单个 DB 语句一样发生。我的意思是，我不希望 INSERT 发生，然后 CREATE 由于断电、互联网连接问题等任何原因而不会发生。

如果 CREATE 不完整，我希望回滚 INSERT 命令。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:15:23.467

您需要将 INSERT 和 CREATE 命令打包在一个事务块中，该事务块以 START TRANSACTION 开头，如果两个命令都成功则以 COMMIT 结尾，或者如果其中一个命令失败则以 ROLLBACK 结尾。

# javascript - 如何通过javascript发布zk url

> ID：15016129
> 
> 赞同：1
> 
> 时间：2013-02-22T03:02:35.637
> 
> 标签：javascript, zk, zul

我正在使用带有 ZK 框架的 JavaScript。在某些情况下，我想在 ZK 中从 JavaScript 发布 URL。如何从 JavaScript 调用 ZUL 文件？

有没有办法在 ZK 中使用 JavaScript 发布 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T02:42:07.733

假设您有一个 content.zul 并且您想通过 ajax 在 javascript 中获取它，这可以通过在 zul 页面中使用 jquery 内置的 zk 或在纯 html 中使用 jquery 来完成。

祖尔样本：

```
<zk>
    <script><![CDATA[
        function loadContent () {
            jq.ajax({
                url: "content.zul",
                type: "post",
                // callback handler that will be called on success
                success: function(response, textStatus, jqXHR){
                    jq('$content').html(response);
                }
            });
        }
    ]]></script>
    <div id="content"
        onCreate='Clients.evalJavaScript("loadContent();");' />
</zk> 
```

html示例：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
            window.onload = function () {
                $.ajax({
                    url: "content.zul",
                    type: "post",
                    // callback handler that will be called on success
                    success: function(response, textStatus, jqXHR){
                        $('#content').html(response);
                    }
                });
            }
        </script>
    </head>
    <body>
        <div id="content"></div>
    </body>
</html> 
```

# android - Mono for android - 设备上的调试问题

> ID：15016131
> 
> 赞同：1
> 
> 时间：2013-02-22T03:02:41.737
> 
> 标签：android, debugging, mono, xamarin.android

在尝试在真实设备上调试我的应用程序时，我遇到了一个问题：触发断点后，等待大约 6 秒（无论我是单步执行代码还是什么都不做），程序将终止。输出窗口显示：

```
02-22 10:31:42.599 I/mono (32532)：堆栈跟踪：
02-22 10:31:42.599 I/单声道 (32532):
程序“Mono”以代码 255 (0xff) 退出。

```

我尝试在两个不同的设备（ASUS Padfone 和 HUAWEI C8812，均为 Android 4.0.4）上调试，结果相同。
看起来设备终止了程序，因为它没有在限定时间内响应。但它当然不会响应！我正在逐步执行我的代码！

顺便说一句，在模拟器上调试很好（但是 SLOOOOW ！！而且经常崩溃）

我的 monodroid 版本是 4.4.55，我在 Windows 7（64 位）下使用带有 SP1 的 Visual Studio 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:23:25.537

我想我找到了问题，这里有一些代码，简单的代码，真的：

```
class OwnerDrawView : View
{
    PointF m_screenPosition;

    public OwnerDrawView(Context context)
      : base(context)
    {
      this.Touch += new EventHandler<TouchEventArgs>(OwnerDrawView_Touch);
      this.SetWillNotDraw(false);
    }

    protected override void OnDraw(Canvas canvas)
    {
      Core.Instance.OnDraw(canvas);
      base.OnDraw(canvas);
    }

    void OwnerDrawView_Touch(object sender, View.TouchEventArgs e)
    {
      m_screenPosition = new PointF(e.Event.GetX(), e.Event.GetY());
      switch (e.Event.Action) {
        case MotionEventActions.Down:
            Core.Instance.OnTouchDown(m_screenPosition);
            break;
        case MotionEventActions.Move:
            Core.Instance.OnTouchMove(m_screenPosition);
            break;
        case MotionEventActions.Up:
            Core.Instance.OnTouchUp(m_screenPosition);
            break;
      }
    }
} 
```

不要介意“Core”类，它在这里并不重要（虽然听起来很^_^）
要重现这个错误，只需将断点放在这一行：

```
Core.Instance.OnTouchDown(m_screenPosition); 
```

在设备上运行程序，触摸屏幕，等待几秒钟，BOOM！
但是如果断点被放置在“Core.Instance.OnTouchUp(m_screenPosition)”行上，那就太惊喜了！一切安好！！我勒个去！！

我的整个程序在一个线程上运行，所以它不是多线程相关的东西。我确实有一个计时器，但该计时器仅在“OwnerDrawView”类上调用 PostInvalidate（是的！我正在使用 Canvas 构建游戏！）

这可能是 monodroid 中的一个错误，但如果有人在重现此错误时遇到问题，请忽略我（我总是一个不幸的人......）

# java - JTabel 单个单元格文本对齐

> ID：15016139
> 
> 赞同：1
> 
> 时间：2013-02-22T03:04:07.423
> 
> 标签：java, swing, jtable, alignment, tablecellrenderer

基本上我有一个`JTable`，这`JTabel`将在一个单元格中有一个产品，然后在它正下方的单元格中显示成本。

产品名称应左对齐。产品成本应向右对齐。

我实际上并不关心每行中其他单元格的对齐方式。

所以我需要设置单个单元格或单个行的对齐方式。我找到了设置表格对齐的方法，以及设置列对齐的方法，但从来没有找到行/单个单元格。

**sscce**：

```
public class Main extends JFrame{
    public static void main(String args[]){
        new Main();
    }
    public Main(){
        super("Demo");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setExtendedState(MAXIMIZED_BOTH);
        setVisible(true);
        setLayout(new BorderLayout());
        TableModel dataModel = new AbstractTableModel() {
             Object rows[] = new Object[50];
             public int getColumnCount(){return 1;}
             public int getRowCount(){return rows.length;}
             public Object getValueAt(int row, int col){ 
                 return rows[row];
             }
             public boolean isCellEditable(int row, int col){
                 return false; 
             }
             public void setValueAt(Object value, int row, int col) {
                 rows[row] = value;
                 fireTableCellUpdated(row,0);
             }
         };

        JTable receipt = new JTable(dataModel);
        receipt.setBorder(BorderFactory.createEtchedBorder());
        receipt.setShowGrid(false);
        add(receipt,BorderLayout.CENTER);
        for(int i = 0; i < 10; i+=2){
            receipt.setValueAt("ProductNameHere",i,0);
            receipt.setValueAt("Cost",i+1,0);
        }
        validate();
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:24:05.417

的[默认渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)是`Number`右对齐标签。在这个[例子](https://stackoverflow.com/a/4553842/230513)中，不需要特殊的渲染器来右对齐`INT_COL`，它被标记`Index`并具有类型`Integer.class`。

![图片](../Images/404986d4b8b49a5f8e28556bbdba2932.png)

如果这没有帮助，请编辑您的问题以包含显示您当前方法和数据类型的[sscce 。](http://sscce.org/)`cost`

附录：或者，覆盖，如此[处](https://stackoverflow.com/a/6852973/230513)`prepareRender()`所示。

![图片](../Images/9ef7ef1584f26ba84e5c65a6ea16932e.png)

```
JTable receipt = new JTable(dataModel) {
    @Override
    public Component prepareRenderer(TableCellRenderer renderer, int row, int col) {
        JLabel c = (JLabel) super.prepareRenderer(renderer, row, col);
        if (row % 2 == 0) {
            c.setHorizontalAlignment(JLabel.LEFT);
        } else {
            c.setHorizontalAlignment(JLabel.RIGHT);

        }
        return c;
    }
}; 
```

SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.EventQueue;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableModel;

public class Main extends JFrame {

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Main();
            }
        });
    }

    public Main() {
        super("Demo");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TableModel dataModel = new AbstractTableModel() {
            Object rows[] = new Object[10];

            @Override
            public int getColumnCount() {
                return 1;
            }

            @Override
            public int getRowCount() {
                return rows.length;
            }

            @Override
            public Object getValueAt(int row, int col) {
                return rows[row];
            }

            @Override
            public boolean isCellEditable(int row, int col) {
                return false;
            }

            @Override
            public void setValueAt(Object value, int row, int col) {
                rows[row] = value;
                fireTableCellUpdated(row, 0);
            }
        };

        JTable receipt = new JTable(dataModel) {
            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int col) {
                JLabel c = (JLabel) super.prepareRenderer(renderer, row, col);
                if (row % 2 == 0) {
                    c.setHorizontalAlignment(JLabel.LEFT);
                } else {
                    c.setHorizontalAlignment(JLabel.RIGHT);

                }
                return c;
            }
        };
        receipt.setBorder(BorderFactory.createEtchedBorder());
        receipt.setShowGrid(false);
        add(receipt, BorderLayout.CENTER);
        for (int i = 0; i < 10; i += 2) {
            receipt.setValueAt("ProductNameHere", i, 0);
            receipt.setValueAt(Integer.valueOf(i + 1), i + 1, 0);
        }
        pack();
        setLocationByPlatform(true);
        setVisible(true);
    }
} 
```

# asp.net-mvc - 从 ASP.Net MVC 视图与部分视图生成的已编译 WebViewPage 派生类存在哪些差异？

> ID：15016141
> 
> 赞同：0
> 
> 时间：2013-02-22T03:04:21.103
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我了解在 ASP.Net MVC 中，剃须刀视图被编译为派生自 System.Web.Mvc.WebViewPage 类或其通用版本的 C# 类。例如，如果我在一个名为“Home”的控制器上有一个名为“Index”的视图，那么 Razor 解析器将构建一个看起来像这样的 C# 类：

```
public class _Page_Views_Home_Index_cshtml : System.Web.Mvc.WebViewPage
{
    public  _Page_Views_Home_Index_cshtml() 
    {  }

    public override void Execute() 
    {
        ...code that combines the razor C# code with the markup
    }
} 
```

我想知道从剃刀局部视图生成的 C# 类。尤其是：

1.  从局部视图生成的 C# 类是否也继承自 WebViewPage？

2.  视图和局部视图之间生成的 C# 类有什么区别吗？

3.  您能否通过检查生成的 C# 类来判断它是从视图还是从局部视图生成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:27:48.860

使用 ASP.NET MVC 和 Razor，“完整”视图和“部分”视图的生成代码之间完全没有区别。事实上，在 MVC 的 Razor 视图引擎中（或者在带有 Razor 的 ASP.NET 网页中，就这点而言）甚至不存在这样的概念。

唯一的小区别（在 MVC 中不存在）是在带有 Razor 的 ASP.NET 网页中，以下划线开头的文件不能直接提供服务。例如，像 ~/_page.cshtml 这样的文件不能由 Web 请求直接运行，而像 ~/page.cshtml 这样的文件可以。但即使是这种差异也不在于编译的代码——它在于 ASP.NET 网页的路由系统拒绝提供以下划线开头的文件。

# javascript - 向下滚动时弹出颜色框（inview）

> ID：15016143
> 
> 赞同：0
> 
> 时间：2013-02-22T03:04:32.160
> 
> 标签：javascript, jquery, jquery-plugins, colorbox

很抱歉这个基本问题，但我有一个我正在尝试建立的页面。它使用 inview，它在到达某个 div 时触发 Javascript 事件。

我要触发的特定事件是打开颜色框弹出窗口。我可以看到您如何在加载时打开颜色框，但由于我对 javascript 有点陌生，我很难让 inview 触发它。我试过搜索，但没有找到任何地方。

我已经把它放在了 JSBin 上。这是链接：http: [//jsbin.com/idizop/6/edit](http://jsbin.com/idizop/6/edit)

首先十分感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:22:37.050

也许是这样的：

```
 $('p.inview').bind('inview', function (event, visible) {
    if (visible) 
    { 
      $.colorbox(
        {inline:true, href:"#inline_content"}
      );
    } else {
      $(this).text('nothing');
    }
  }); 
```

# php - 我的代码对 SQL 注入安全吗？简单会话登录

> ID：15016144
> 
> 赞同：-2
> 
> 时间：2013-02-22T03:04:42.473
> 
> 标签：php, mysql

这是我第一个使用 SESSIONS 的登录系统。只是想知道，SQL 注入是否安全？

```
<?php
$username = $_POST['username'];
$password = $_POST['password'];

if(isset($username, $password)) {
    if(get_magic_quotes_gpc()) {
        $ousername = stripslashes($username);
        $uusername = mysql_real_escape_string(stripslashes($username));
        $opassword = stripslashes($_POST['password']);
    } else {
        $uusername = mysql_real_escape_string($username);
        $opassword = $password;
    }   
    $req = mysql_query('select password,id from users where username="'.$uusername.'"');
    $dn = mysql_fetch_array($req);

    if($dn['password']==$opassword and mysql_num_rows($req)>0)
    {
        $form = false;
        $_SESSION['username'] = $_POST['username'];
        $_SESSION['userid'] = $dn['id'];        

    echo 'Logged in m8';
    } else {
        $form = true;
        $message = 'The username or password is incorrect.';
    }
} else {
    $form = true;
}
if($form)
{ 
if(isset($message)) {
    echo '<div class="message">'.$message.'</div>';
}           
?> 
```

我之前在我的高分脚本上遇到过 SQL 注入，所以我想知道我的简单会话登录脚本是否有，我 40% 有一个。通常是什么导致 SQL 注入？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:10:25.080

尽管您的代码还可以，但您的保护*想法*是错误的
mysql_real_escape_string 不能防止注入。它确实**格式化字符串。** 只要您的字符串格式正确，它们就是安全的。

当您尝试使用相同的函数来格式化非字符串（例如数字）时，问题就开始了。
它变得完全没用，并且您的 SQL 易受攻击。

因此，您可以保留当前代码，但在将来，只要您需要使用另一个查询部分 - 您将需要以不同的方式对其进行格式化。这是一组完整的规则：[在 PHP 中，当向数据库提交字符串时，我应该使用 htmlspecialchars() 处理非法字符还是使用正则表达式？](https://stackoverflow.com/questions/2993027/in-php-when-submitting-strings-to-the-database-should-i-take-care-of-illegal-cha/2995163#2995163)

当然**不要逃避密码**！如果我有这样的密码`wef5623'sdf`- 它永远不会让我进入！

顺便说一句，我不知道你为什么只为一个值使用这么多变量 - $_POST['username'], $username, $uusername, $ousername - 这是什么？

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-22T03:34:18.650

我会改变 `$opassword = $password;`

至

```
 $opassword = mysql_real_escape_string($password); 
```

sql注入也可以通过密码字段完成。

# api - 将 140k 对象导入 Parse.com

> ID：15016159
> 
> 赞同：2
> 
> 时间：2013-02-22T03:06:16.460
> 
> 标签：api, rest, parse-platform

我正在尝试用 140k 个对象填充 Parse 中的数据类。因为我有 GeoPoints，所以无法通过 Web 界面导入。他们建议的 REST API 不允许您通过一次 API 调用创建多个对象。所以，看起来我将进行 140k API 调用。

现在，我有一个包含 140k 行格式正确的 JSON 的文件，等待导入 Parse。

我已经尝试在我的网络服务器上使用 PHP 中的 curl 来执行此操作。在脚本停止运行之前，我导入了 5-10k 个对象。我尝试将其添加到 PHP 文件中-

```
ignore_user_abort(true);
set_time_limit(0); 
```

但这没有用。所以我想也许我会在 Javascript 中有更多的控制权，在崩溃之前再次导入 5-10k 个对象。我每 50 个对象添加一个超时暂停，但它仍然崩溃。我尝试在进行下一个 API 调用之前等待成功响应，或者同时运行它们，但这并没有什么不同。

无论如何，我的问题是如何最有效地进行 140k REST API 调用，而不会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:19:06.663

您可以使用 Parse 的 JSON 导入器（而不是 CSV）导入地理点。有关详细信息，请参阅[导入数据](https://parse.com/docs/data#data-import)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:38:55.343

即使您可以使用 JSON 导入器导入复杂的布局，该导入器在处理大文件时也会遇到一些问题

您可以在一次调用中创建多个对象。使用`/1/batch`，请参见下面的示例用法；

```
{
    "requests": [{
        "method": "POST",
        "path": "/1/classes/YOURCLASS",
        "body": {
            "your": "parameters",
            "live": "here"
        }
    }, {
        "method": "POST",
        "path": "/1/classes/YOURCLASS",
        "body": {
            "second": "request",
            "parameters": "here"
        }
    }]
} 
```

我已经成功地导入了大约 10k 行，没有任何问题，我确实通过终端运行了它，但是使用了 PHP 和 cURL，这是 cURL 调用以供参考；

```
$headers = array(
    'X-Parse-Application-Id: APPID',
    'X-Parse-REST-API-Key: RESTKEY',
    'Content-type: application/json'
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.parse.com/1/batch');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_POSTFIELDS, $json);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$ret = curl_exec($ch); 
```

`CURLOPT_RETURNTRANSFER`如果您对一切顺利与否不感兴趣，则没有必要，也就是“一劳永逸”。

祝你好运！

# opengl - 是否可以在 libgdx 中获得固定 Z 的 X 和 Y 坐标的边界

> ID：15016162
> 
> 赞同：0
> 
> 时间：2013-02-22T03:06:41.557
> 
> 标签：opengl, 3d, libgdx

我知道可以通过调用 pointInFrustum(Vector3 point) 函数来使用 PerspectiveCamera 的截锥体成员来判断一个点（x，y，z）是否在截锥体中。现在如果 z 坐标固定为某个值，我可以得到直接可见的 x 和 y 轴的边界吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T05:12:38.270

Frustum包含构成近平面和远平面的 8 个点 ( [)](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/Camera.java)`planePoints`：

```
/** eight points making up the near and far clipping "rectangles". order is counter clockwise, starting at bottom left **/
public final Vector3[] planePoints 
```

这些点在`Camera.update`被调用时更新。为了安全起见，在执行以下操作之前只需调用一次：

1.  计算一个参数`t`（in `[0,1]`），指定 POI 与远平面相距近平面的距离。
2.  `t`允许沿轴线性插入平截头体的*顶面*（不确定如何调用它） 。`z`

* * *

*顺便说一句，`frustum`在 libgdx 的`Camera`类中，实际上应该被称为`viewvolume`，因为正交投影不会跨越空间中的截锥体。*

# linux - 如何在 CentOS 上设置域名服务器？

> ID：15016165
> 
> 赞同：0
> 
> 时间：2013-02-22T03:07:03.463
> 
> 标签：linux, dns, centos, domain-name, nameservers

我部署了一个站点并尝试登录，例如在**www.website.com**上，但是当我转到**website.com时没有登录信息**

如何使两个域相同？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:13:44.707

您不需要域名服务器来完成此操作，您只需使用 .htaccess 文件即可。

在文件中，放入以下行：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

它的作用是查看用户输入的 URL，如果它没有以它开头，`www.`那么它会将其添加到 URL 并重定向。所以进入**website.com**，会重定向到**www.website.com**。

# extjs - 为什么我在 extjs 中通过 ID 找到它后不能在选项卡上调用 add()？

> ID：15016166
> 
> 赞同：0
> 
> 时间：2013-02-22T03:07:05.050
> 
> 标签：extjs

为什么在 extjs 中通过 ID 查找后不能在选项卡上调用“添加”？

```
var tabPanel = new Ext.TabPanel({
    id:'maintabs',
    activeTab:0,
    layoutOnTabChange:true,
    deferredRender:false
 });
 var tab = {
   title:'testing',
   html:'testing'
 } 

 I can see in my chrome console that tabPanel here has the method "add", and I can add this tab to the tab panel... 
```

但是，当我像这样在视口中定义我的选项卡时......

```
initComponent: function(){
    Ext.apply(this, {
        layout: {
          type: 'fit'
        },
          items: [
          {
            xtype: 'tabpanel',
            id:'maintabs',
            layoutOnTabChange:true,
            deferredRender:false,
            activeTab: 0, // index or id
            items:[... 
```

但是，考虑以下因素：

```
Ext.get('maintabs').add(tab);
TypeError: Object [object Object] has no method 'add' 
```

这里给出了什么？为什么没有“添加”方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:16:49.733

`get`和之间有区别`getCmp`。`get()`返回一个 DOM 元素的包装器。`getCmp()`返回一个 Ext.Component（或子类）。

# php - PHP 使用变量设置 SESSION 变量名称

> ID：15016168
> 
> 赞同：1
> 
> 时间：2013-02-22T03:07:10.200
> 
> 标签：php, session, variables, names

我想将 $_SESSION 变量的名称设置为另一个变量的值。例如

```
$var = "123";
$_SESSION['$var'] = "yes";

echo $_SESSION['123'];  // Would like to echo "yes"
echo $_SESSION['$var'];  // Would also like to echo "yes" 
```

我执行了一个 vardump($_SESSION) 并且会话变量实际上设置为“$_SESSION[$var]”。我怎样才能达到我需要的结果？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T03:08:08.380

抛弃单引号。它们使 PHP 将 $ 解析为文字美元符号，而不是变量名的开头。

```
$_SESSION['$var'] = "yes"; 
```

应该：

```
$_SESSION[$var] = "yes"; 
```

# rest - 如何通过 REST API 从 Dropbox 获取未缩短的链接

> ID：15016170
> 
> 赞同：0
> 
> 时间：2013-02-22T03:07:23.520
> 
> 标签：rest, oauth, dropbox

我有我的应用程序的所有令牌和机密，但我不明白如何将它们包含在 URL (URI？) 中，以便在我的 Dropbox 中获得指向文件夹或文件的非缩短共享链接（即，不缩写为“ [http://db.tt/](http://db.tt/) ....”，而是完整的 URL）

我需要在通话中包含哪些令牌/密钥/秘密，以及如何包含？

我想使用`curl`例如：

`curl --stderr /dev/null https://api.dropbox.com/1/shares/<root>/<path>`等等 ...

在这之后应该有类似的东西`?oauth_consumer_key=xxxxxxxx&.....`，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:23:05.633

在四处挖掘之后，我想通了......对于其他可能想要快速回答的人：

`curl --header 'Authorization: OAuth oauth_version=1.0, oauth_signature_method=PLAINTEXT, oauth_consumer_key=[app_key], oauth_token=[access_token], oauth_signature=[app_secret]&[access_token_secret]' 'https://api.dropbox.com/1/shares/[root]/[path]?short_url=false'`

`[root]`是“沙盒”或“保管箱”（受限访问或完全访问，具体取决于应用程序）

# javascript - 关闭现有的 dhtml iframe 并打开新的 xhtml iframe

> ID：15016171
> 
> 赞同：1
> 
> 时间：2013-02-22T03:07:43.013
> 
> 标签：javascript, asp.net, iframe, dhtml

我正在使用下面的代码创建一个 dhtml iframe。现在我想用新的 url 重新加载这个 iframe（或）关闭当前的 iframe 并用新的 url 打开新的 iframe。如果可能的话，请帮我解决这个问题。

```
var cust_id = document.getElementById("<%= hf_cust_id.ClientID %>").value;
var packagewindow = dhtmlwindow.open("googlebox", "iframe", "oldpage.aspx?id=Y&cust_id=" + cust_id + "", "Add More Packages", "width=1000px,height=500px,left=150px,top=75px,resize=0,scrolling=1", "recal") 
```

我想将旧的 url 页面重新加载到新的 url 页面（或）自动关闭现有的 iframe 并加载新的 iframe。

# batch-file - 编写批处理文件以在文件出现后将其删除？

> ID：15016172
> 
> 赞同：0
> 
> 时间：2013-02-22T03:07:48.433
> 
> 标签：batch-file, file-io

我想写一个批处理文件来删除每周重新启动系统后出现的文件。这是在该文件出现的 cctv 系统上，并且一旦该文件出现就不允许系统运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:25:37.623

首先需要在这个问题中声明几件事才能真正完成这项工作。假设您使用的是 Windows 2000+，并且不需要管理权限来删除罪魁祸首文件，那么您所要做的就是打开记事本并键入以下内容：

无需管理权限

```
@echo off
if exist "insert culprit file's path" del "insert culprit file's path" 
```

需要提升的批处理/cmd 提示符（删除文件的管理权限）

```
@echo off
CLS 
ECHO.
ECHO =============================
ECHO Running Admin shell
ECHO =============================

:checkPrivileges 
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges ) 

:getPrivileges 
if '%1'=='ELEV' (shift & goto gotPrivileges)  
ECHO. 
ECHO **************************************
ECHO Invoking UAC for Privilege Escalation 
ECHO **************************************

setlocal DisableDelayedExpansion
set "batchPath=%~0"
setlocal EnableDelayedExpansion
ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
"%temp%\OEgetPrivileges.vbs" 
exit /B 

:gotPrivileges 
::::::::::::::::::::::::::::
:START
::::::::::::::::::::::::::::
setlocal & pushd
if exist "insert culprit file's path" del "insert culprit file's path" 
```

无论您需要哪一个，将代码放入记事本中，然后将文件另存为 your.bat，并且不要忘记转到显示选择文件类型并选择所有文件的位置。

# java - 哨兵控制循环以及如何打印出多个字符串。初学者java编程

> ID：15016173
> 
> 赞同：1
> 
> 时间：2013-02-22T03:07:48.637
> 
> 标签：java, string, while-loop, sentinel

我有这个代码，它根据用户输入的里氏刻度值确定地震时的免赔额和支出。这是我的代码目前的样子。

```
import java.util.Scanner;

public class RichterScaleDamage
{
  public static void main(String[] args)
  {
  Scanner userInput = new Scanner(System.in);
  String name = "";
  char answer = 'Y';
  double homeValue = 0;
  double richterScale = 0;
  double payout = 0;
  double deductible = 0;
  String coverage = "";

  System.out.printf("\nPlease enter your name:  ");
  name = userInput.nextLine();

  while(Character.toUpperCase(answer) == 'Y')
  {
    System.out.printf("\nPlease enter the insured value of your home:  ");
    homeValue = userInput.nextDouble();
    userInput.nextLine();

    System.out.printf("\nRichter Scale   Description of Effect"
                 +"\n      8.0       Most structures fall"
                 +"\n      7.0       Many buildings destroyed"
                 +"\n      6.0       Many buildings considerably damaged, some collapse"
                 +"\n      4.5       Damage to poorly constructed buildings"
                 +"\n      3.5       Felt by many people, no destruction"
                 +"\n       0        Generally not felt by people\n\n");

System.out.printf("\nPlease enter the Richter scale value for the earthquake:  ");
richterScale = userInput.nextDouble();
userInput.nextLine();

if(richterScale < 0)
{
  System.out.printf("\nInvalid! Cannot enter negative values");
}
System.out.printf("\n\nEnter \'Y\' to continue with another calculation or \'N\' to exit:  ");
answer = userInput.nextLine().charAt(0);

  }

   if(richterScale >= 8)
  {
    String message = "Most structures fall";
    payout = homeValue * .85;
    deductible = homeValue * .15;
    coverage += String.format("\n%-50s %6s$%,20.2f"
                         +"\nDeductable%47s %,20.2f"
                         +"\n%46sTOTAL %4s $%,20.2f\n",
                          message, " ", payout, " ", deductible, " ", " ", payout + deductible);

    System.out.printf("%s", coverage);
  }
  if(richterScale < 8 && richterScale >= 7)
  {
    String message = "Many buildings destroyed";
    payout = homeValue * .75;
    deductible = homeValue * .25;
    coverage += String.format("\n%-50s %6s$%,20.2f"
                         +"\nDeductable%47s %,20.2f"
                         +"\n%46sTOTAL %4s $%,20.2f\n",
                          message, " ", payout, " ", deductible, " ", " ", payout + deductible);

    System.out.printf("%s", coverage);
  }
  if(richterScale < 7 && richterScale >= 6)
  {
    String message = "Damage to poorly constructed buildings";
    payout = homeValue * .75;
    deductible = homeValue * .25;
    coverage += String.format("\n%-50s %6s$%,20.2f"
                         +"\nDeductable%47s %,20.2f"
                         +"\n%46sTOTAL %4s $%,20.2f\n",
                          message, " ", payout, " ", deductible, " ", " ", payout + deductible);
    System.out.printf("%s", coverage);
  }

  if(richterScale < 6 && richterScale >= 4.5)
  {
    String message = "Many buildings considerably damaged, some collapse";
    payout = homeValue * .65;
    deductible = homeValue * .35;
    coverage += String.format("\n%-50s %6s$%,20.2f"
                         +"\nDeductable%47s %,20.2f"
                         +"\n%46sTOTAL %4s $%,20.2f\n",
                          message, " ", payout, " ", deductible, " ", " ", payout + deductible);
    System.out.printf("%s", coverage);
  }

  if(richterScale < 4.5 && richterScale >= 3.5)
  {
    String message = "Felt by many people, no destruction";
    payout = homeValue * .55;
    deductible = homeValue * .45;
    coverage += String.format("\n%-50s %6s$%,20.2f"
                         +"\nDeductable%47s %,20.2f"
                         +"\n%46sTOTAL %4s $%,20.2f\n",
                          message, " ", payout, " ", deductible, " ", " ", payout + deductible);
    System.out.printf("%s", coverage);
  }

  if(richterScale < 3.5 && richterScale >= 0)
  {
    String message = "Generally not felt by people";
    payout = homeValue * .0;
    deductible = homeValue * .25;
    coverage += String.format("\n%-50s %6s$%,20.2f"
                         +"\nDeductable%47s %,20.2f"
                         +"\n%46sTOTAL %4s $%,20.2f\n",
                          message, " ", payout, " ", deductible, " ", " ", payout + deductible);
    System.out.printf("%s", coverage);
  }

  }
} 
```

我还有一些代码要填写，如果这太多了，我很抱歉，我对这个网站很陌生。如果用户输入 Y，他们可以输入另一个房屋的另一个值，以及该房屋遭受的损坏程度。现在，我的输出只显示输入的最新值，而不是预先显示所有其他值。我已经通读了我的书，对于如何让我的输出显示的不仅仅是最后一个用户条目，我感到非常困惑。这是一个输出示例！

```
请输入您的姓名：姓名

请输入您家的保险价值：1000000

效果的里氏标度描述
      8.0 大多数建筑物倒塌
      7.0 许多建筑物被毁
      6.0 许多建筑物严重受损，有些倒塌
      4.5 对结构不良的建筑物的损坏
      3.5 多人感受，无破坏
       0 一般人感觉不到

请输入地震的里氏标度值：5

输入“Y”继续另一个计算或“N”退出：y

请输入您家的保险价值：349999

效果的里氏标度描述
      8.0 大多数建筑物倒塌
      7.0 许多建筑物被毁
      6.0 许多建筑物严重受损，有些倒塌
      4.5 对结构不良的建筑物的损坏
      3.5 多人感受，无破坏
       0 一般人感觉不到

请输入地震的里氏标度值：6

输入“Y”继续另一个计算或“N”退出：n

对结构不良的建筑物造成的损害 $262,499.25
免赔额 87,499.75
                                              总计 349,999.00 美元

```

我希望最后一部分显示与用户输入信息一样多。抱歉，如果我不知道使这更有意义所需的术语。我正在上我的第一个编程课程，而且只有 1 个月的学习时间。任何帮助解决这个问题将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:07:22.443

我认为您想将 while 循环的右括号移动到您的条件之后，并且仅在循环终止后打印结果：

```
import java.util.Scanner;

public class RichterScaleDamage {

    public static void main(String[] args) {
        Scanner userInput = new Scanner(System.in);
        String name = "";
        char answer = 'Y';
        double homeValue = 0;
        double richterScale = 0;
        double payout = 0;
        double deductible = 0;
        String coverage = "";

        System.out.printf("\nPlease enter your name:  ");
        name = userInput.nextLine();

        while (Character.toUpperCase(answer) == 'Y') {
            System.out.printf("\nPlease enter the insured value of your home:  ");
            homeValue = userInput.nextDouble();
            userInput.nextLine();

            System.out.printf("\nRichter Scale   Description of Effect"
                    + "\n      8.0       Most structures fall"
                    + "\n      7.0       Many buildings destroyed"
                    + "\n      6.0       Many buildings considerably damaged, some collapse"
                    + "\n      4.5       Damage to poorly constructed buildings"
                    + "\n      3.5       Felt by many people, no destruction"
                    + "\n       0        Generally not felt by people\n\n");

            System.out.printf("\nPlease enter the Richter scale value for the earthquake:  ");
            richterScale = userInput.nextDouble();
            userInput.nextLine();

            if (richterScale < 0) {
                System.out.printf("\nInvalid! Cannot enter negative values");
            }
            System.out.printf("\n\nEnter \'Y\' to continue with another calculation or \'N\' to exit:  ");
            answer = userInput.nextLine().charAt(0);

            if (richterScale >= 8) {
                String message = "Most structures fall";
                payout = homeValue * .85;
                deductible = homeValue * .15;
                coverage += String.format("\n%-50s %6s$%,20.2f"
                        + "\nDeductable%47s %,20.2f"
                        + "\n%46sTOTAL %4s $%,20.2f\n",
                        message, " ", payout, " ", deductible, " ", " ", payout + deductible);

            }
            if (richterScale < 8 && richterScale >= 7) {
                String message = "Many buildings destroyed";
                payout = homeValue * .75;
                deductible = homeValue * .25;
                coverage += String.format("\n%-50s %6s$%,20.2f"
                        + "\nDeductable%47s %,20.2f"
                        + "\n%46sTOTAL %4s $%,20.2f\n",
                        message, " ", payout, " ", deductible, " ", " ", payout + deductible);

            }
            if (richterScale < 7 && richterScale >= 6) {
                String message = "Damage to poorly constructed buildings";
                payout = homeValue * .75;
                deductible = homeValue * .25;
                coverage += String.format("\n%-50s %6s$%,20.2f"
                        + "\nDeductable%47s %,20.2f"
                        + "\n%46sTOTAL %4s $%,20.2f\n",
                        message, " ", payout, " ", deductible, " ", " ", payout + deductible);
            }

            if (richterScale < 6 && richterScale >= 4.5) {
                String message = "Many buildings considerably damaged, some collapse";
                payout = homeValue * .65;
                deductible = homeValue * .35;
                coverage += String.format("\n%-50s %6s$%,20.2f"
                        + "\nDeductable%47s %,20.2f"
                        + "\n%46sTOTAL %4s $%,20.2f\n",
                        message, " ", payout, " ", deductible, " ", " ", payout + deductible);
            }

            if (richterScale < 4.5 && richterScale >= 3.5) {
                String message = "Felt by many people, no destruction";
                payout = homeValue * .55;
                deductible = homeValue * .45;
                coverage += String.format("\n%-50s %6s$%,20.2f"
                        + "\nDeductable%47s %,20.2f"
                        + "\n%46sTOTAL %4s $%,20.2f\n",
                        message, " ", payout, " ", deductible, " ", " ", payout + deductible);
            }

            if (richterScale < 3.5 && richterScale >= 0) {
                String message = "Generally not felt by people";
                payout = homeValue * .0;
                deductible = homeValue * .25;
                coverage += String.format("\n%-50s %6s$%,20.2f"
                        + "\nDeductable%47s %,20.2f"
                        + "\n%46sTOTAL %4s $%,20.2f\n",
                        message, " ", payout, " ", deductible, " ", " ", payout + deductible);
            }

        }
        System.out.printf("%s", coverage);
    }
} 
```

# node.js - nGinx 反向代理前 node.js 问题

> ID：15016174
> 
> 赞同：2
> 
> 时间：2013-02-22T03:07:49.530
> 
> 标签：node.js, nginx, reverse-proxy

我正在尝试设置一个反向代理以指向将在 127.0.0.1:1337 上运行的 node.js 服务器（目前）。服务器也在运行 php 和 mysql，如果这是我有的工作的话。

尝试重新加载配置文件时收到此输出

nginx: [emerg] /etc/nginx/sites-enabled/default:79 中的无效 URL 前缀 nginx: 配置文件 /etc/nginx/nginx.conf

这是我正在使用的配置：

```
upstream backend {
server 127.0.0.1:1337;
}

server {
    listen   80; ## listen for ipv4; this line is default and implied
listen   [::]:80 default ipv6only=on; ## listen for ipv6

root /home/developer/www;
index index.html index.htm index.php;

# Make site accessible from http://localhost/
server_name localhost;

location / {
    # First attempt to serve request as file, then
    # as directory, then fall back to index.html
    try_files $uri $uri/ /index.html;
    # Uncomment to enable naxsi on this location
    # include /etc/nginx/naxsi.rules
}

location /doc/ {
    alias /usr/share/doc/;
    autoindex on;
    allow 127.0.0.1;
    deny all;
}

# Only for nginx-naxsi : process denied requests
#location /RequestDenied {
    # For example, return an error code
    #return 418;
#}

#error_page 404 /404.html;

# redirect server error pages to the static page /50x.html
#
#error_page 500 502 503 504 /50x.html;
#location = /50x.html {
#   root /usr/share/nginx/www;
#}

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
#
location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
#   # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
#
#   # With php5-cgi alone:
    fastcgi_pass 127.0.0.1:9000;
#   # With php5-fpm:
#   fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
}

   location / {
proxy_pass 127.0.0.1:1337;
    } 
```

我错过了什么？感谢您阅读我的帖子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:40:10.783

> proxy_pass 127.0.0.1:1337;

这是不正确的值`proxy_pass`。请阅读文档： http: [//nginx.org/r/proxy_pass](http://nginx.org/r/proxy_pass)

# c# - 按字符将文本分组到具有十六进制格式的 Unicode 代码点的字符字典中

> ID：15016175
> 
> 赞同：0
> 
> 时间：2013-02-22T03:08:05.100
> 
> 标签：c#

我正在尝试按字符将文本分组到字典中并返回每个字符的 Unicode 代码点。我正在使用以下代码

```
private Dictionary< Char, int> GetChars(string input)
    {

        return input.GroupBy(ch => ch)
                    .ToDictionary(g => g.Key, g => (int) g.Key);
    } 
```

此代码以十进制格式返回字符的 Unicode 代码点，但我希望它以十六进制格式。请问有什么帮助吗？

编辑：

示例：输入 A 输出 65

不应该是 41 吗？

正确的解决方案

```
 private Dictionary< Char, string> GetChars(string input)
    {

        return input.GroupBy(ch => ch)
                    .ToDictionary(g => g.Key, g => ((int) g.Key).ToString("x"));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:02:30.710

`A`有 65 作为十进制代码，`a`有 97 作为十进制代码。此外，该`A`字符具有 41 作为十六进制代码和`101`八进制代码。看看[这里](http://www.asciitable.com/)。

您可能希望向您的方法添加第二个参数并根据您的上下文调用它：

```
class Program
{
    enum LetterConversion
    {
        ToLower,
        ToUpper,
        None
    }

    private static Dictionary<Char, int> 
        GetChars(string input, LetterConversion conversion)
    {
        switch (conversion)
        {
            case LetterConversion.ToLower:
                input = input.ToLower();
                break;
            case LetterConversion.ToUpper:
                input = input.ToUpper();
                break;
        }
        return input.GroupBy(ch => ch)
        .ToDictionary(g => g.Key, g => 
            int.Parse(String.Format("{0:X}", (int)g.Key)));

    }

    static void Main(string[] args)
    {
        // the values will be 97, 98, 99
        var d1 = GetChars("abcA", LetterConversion.ToLower);

        // the values will be 65, 66, 67
        var d2 = GetChars("abcA", LetterConversion.ToUpper);

        // the values will be 97, 98, 99, 65
        var d3 = GetChars("abcA", LetterConversion.None);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:33:03.840

```
Int i = 64;
string hex = i.ToString("X"); 
```

# java - JFileChooser.showSaveDialog：所有文件变灰

> ID：15016176
> 
> 赞同：6
> 
> 时间：2013-02-22T03:08:06.630
> 
> 标签：java, swing, jfilechooser

我正在尝试使用`JFileChooser`来获取文件以进行加载和保存。出现的对话框`openFileDialog()`工作正常，但是当我使用该`saveFileDialog()`方法时，对话框窗口的所有文件名都是灰色的。有或没有 a 都会发生这种情况`FileFilter`（我的示例包括一个以更好地显示我所看到的内容）。

这是一个最小的程序来说明：

```
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.filechooser.FileNameExtensionFilter;

public class Temp extends JFrame {
    public static void main(String[] args){
    JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JFileChooser chooser = new JFileChooser();
        FileNameExtensionFilter filter = new FileNameExtensionFilter("Text File", "txt");
        chooser.setFileFilter(filter);

        frame.setVisible(true);
        chooser.showOpenDialog(null);
        chooser.showSaveDialog(null);
    }
} 
```

这是我在“打开”对话框中看到的内容： [打开对话框](https://i.stack.imgur.com/NrpzW.png "打开对话框")

![](../Images/e6398254f4ccd9f7e5e5384c41b84814.png)

这是我在“保存”对话框中看到的内容： [保存对话框](https://i.stack.imgur.com/q31zX.png "保存对话框")

![](../Images/9337778c1576b6d7c84e3be59335f1bb.png)

尽管显示为灰色，但保存对话框中的所有文件都是可选的。

如果重要的话，我在 Mac/Mountain Lion 和 Java 7 上。

这是预期的行为吗？有没有办法改变这个？

（编辑：根据 MadProgrammer + 垃圾神下面的评论，这似乎与其他（本机）Mac 应用程序的外观和感觉一致）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:44:44.383

> 我正在寻找`.txt`在保存对话框中以“正常”颜色显示的文件。

这由`FileChooserUI`特定于特定外观和感觉的委托控制，例如`AquaFileChooserUI`在 Mac OS X 上。您可以使用不同的 L&F，（费力地）编写自己的`FileChooserUI`，或开发自定义[*文件浏览器 GUI*](https://codereview.stackexchange.com/questions/4446/file-browser-gui/4447#4447)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-19T20:37:41.350

我最终做的是使用：

```
JFileChooser chooser = new JFileChooser(...);
chooser.showDialog(myFrame, "Save"); 
```

我的保存对话框看起来像一个保存对话框，`FileFilter`只有未通过测试的文件才会变灰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:17:17.420

嗯...我认为，以您的方式显示对话框并不是最好的方式

```
chooser.showOpenDialog(null);
        chooser.showSaveDialog(null); 
```

我认为这可能会产生冲突。您为什么不尝试使用 JFrame 来帮助您呢？尝试使用这段代码，只是为了知道问题是否是saveDialog。Myabe 然后您可以根据您的编程要求对其进行调整。

```
JFrame parentFrame = new JFrame();

JFileChooser fileChooser = new JFileChooser();
fileChooser.setDialogTitle("Specify a file to save");    

int userSelection = fileChooser.showSaveDialog(parentFrame);

if (userSelection == JFileChooser.APPROVE_OPTION) {
    File fileToSave = fileChooser.getSelectedFile();
    System.out.println("Save as file: " + fileToSave.getAbsolutePath());
} 
```

事实上，您可以尝试使用 setLookAndFeel，我记得我在使用 Macbook Pro 时遇到了这个问题。

# notifications - NotificationCompat.Builder 和 startForeground

> ID：15016180
> 
> 赞同：4
> 
> 时间：2013-02-22T03:08:38.963
> 
> 标签：notifications, intentservice

这有效：需要带有 NotificationCompat.Builder 的 IntentService 提供与 NotificationManager.notify() .setContentIntent(pendingIntent) 一起使用的通知。发送通知时，通知出现在通知中并且是持久的（在用户单击它之前一直保持活动状态，此时它会启动 .setContentIntent 中指定的活动）。好的！什么不起作用：我希望该服务像电话服务一样长期存在，因此似乎建议使用 startForeground()。但是，当我包含它时，关联的通知确实会出现在托盘中，但它不是 PERSISTENT 并且在 IntentService 结束时消失（与上面不同）。（关联的通知也使用 .setContentIntent 并启动另一个 Activity。） 有什么想法吗？服务在检测到某个（罕见的）“事件”之前不会死亡，这一点至关重要。在用户点击它之前通知保持活跃也很重要！
这是简化的代码（后一种情况）：谢谢！

```
 public class SService extends IntentService {
public SService() {
    super("SService");                          
}
@Override
protected void onHandleIntent(Intent sIntent) {

  //Notification construction:
    Notification notif;
    Context context = this;

    NotificationManager mNotificationManager = 
            (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    Intent bIntent = new Intent(context, BarNotifActivity.class);       
    PendingIntent pbIntent = PendingIntent.getActivity(context, 0, bIntent,0);
    Notification barNotif;

    NotificationCompat.Builder bBuilder =
            new NotificationCompat.Builder(this)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle(getString(R.string.bar_title))
                .setContentText(getString(R.string.bar_text))
                //.setAutoCancel(true)
                .setOngoing(true)
                .setContentIntent(pbIntent);
    barNotif = bBuilder.build();
    this.startForeground(1, barNotif);

    long[] vibration = {0, 300, 1000, 300, 1000, 300, 1000, 300, 1000};
    Intent mIntent = new Intent(context, NotifReceiverActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(context, 0, mIntent,0);

    NotificationCompat.Builder mBuilder =
        new NotificationCompat.Builder(context)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle(getString(R.string.alert_text))
            .setContentText(getString(R.string.alert_text))
            .setTicker("**Notification Arrived!**")
            .setVibrate(vibration)
            //.setAutoCancel(true)
            .setOngoing(true)
            .setContentIntent(pIntent);
    notif = mBuilder.build();
    notif.flags |= Notification.FLAG_AUTO_CANCEL;
    notif.flags |= Notification.FLAG_INSISTENT;  

    try {
        Thread.sleep(7000);                         //Pause 7 sec.
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    mNotificationManager.notify(1, notif);
} 
```

}

# c - 未知输入数的动态内存分配（没有 realloc）

> ID：15016185
> 
> 赞同：1
> 
> 时间：2013-02-22T03:09:09.093
> 
> 标签：c

所以我正在编写一个程序，它从标准输入中接收任意数量的整数，我需要为输入动态分配足够的空间。

这对我来说不是问题，除了两个原因：1）你没有指定会有多少输入，所以我不能只使用 calloc 和输入的数量而不已经阅读它们并计数。2) 我不能使用 realloc 来增加数组的大小。

有没有办法计算输入中有多少整数，然后再次读取它们并将它们放入数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:12:48.970

首先，为什么不能使用`realloc()`？

如果你真的不能，考虑创建一个整数链接列表，其中定义了列表元素，如下所示：

```
typedef struct tNumber
{
  int Number;
  struct tNumber* Next;
} tNumber; 
```

> 有没有办法计算输入中有多少整数，然后再次读取它们并将它们放入数组中？

没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:12:18.177

使用[链表](http://en.wikipedia.org/wiki/Linked_list)。您可以根据需要分配新空间，而无需移动现有数据。

> 有没有办法计算输入中有多少整数，然后再次读取它们并将它们放入数组中？

我能想到的唯一方法是`tmpfile()`按照您的计数复制到 a 中，然后再复制`rewind()`文件并再次读取。

# jquery - IE浏览器：调整iframe高度时权限被拒绝

> ID：15016186
> 
> 赞同：2
> 
> 时间：2013-02-22T03:09:09.500
> 
> 标签：jquery, internet-explorer, iframe

当页面加载成功时，我想调整 iframe 的高度。

这是我的代码：

```
//Parent domain: www.test.com
//Iframe contents domain: test.com
var currentdomain = document.domain; //currentdomain == "www.test.com"
currentdomain = "test.com";
var subWebHeight = $("#iframePage").contents().find("body").height();
$("#iframePage").height(subWebHeight + 30); 
```

这些代码在 chrome 和 firefox 中运行良好，但是当我在 IE 浏览器上运行脚本时，执行“$("#iframePage").contents()”时总是抛出“Permission denied”。

很奇怪，我可以在 IE 控制台中成功运行脚本 "$("#iframePage").contents()"。

顺便说一句，有没有办法禁用 IE 浏览器的安全性？一些配置，如 chrome 上的“--disable-web-security”，我可以访问具有不同域的 iframe 的内容。这仅用于开发，不用于生产。

任何人都可以帮忙吗？谢谢

# python - Pandas：将描述性 Dict() 附加到层次索引（即 CountryCode 和 CountryName）

> ID：15016187
> 
> 赞同：1
> 
> 时间：2013-02-22T03:09:10.417
> 
> 标签：python, pandas

是否有将描述性版本附加到索引列？

例如，我使用 ISO3 CountryCode 从不同的数据源“AUS”-> 澳大利亚等进行合并。这对于合并不同的数据源非常方便，但是当我想打印数据时，我想要描述版本（即澳大利亚）。我正在想象一个附加到“CountryCode”的索引列的字典（其中 CountryCode 是键，CountryName 是值）和一个将打印值而不是用于数据操作的键的标志。

生成我自己的 Dictionary() 的最佳解决方案，然后在打印或绘制图表时合并国家名称？这没关系，除了在数据框对象中携带所有数据集信息会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:42:37.093

我认为最简单的解决方案将其拆分为 DataFrame 中的两列，一列用于 country_code 和 country_name（您可以将它们命名为其他名称）。

*当您打印或绘制图表时，您可以选择使用哪一列。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:43:41.123

index 选项有一个 format 方法，可以让你以函数的形式应用格式化程序：

```
In [1]: df = DataFrame([1,2], index=['AUS','CAN']); df
Out[1]:
     0
AUS  1
CAN  2

In [2]: d = {'AUS':'Australia', 'CAN':'Canada'}

In [3]: df.index.format(formatter = lambda x: d.get(x, x))
Out[3]: ['Australia', 'Canada'] 
```

不过，我不确定您将如何实际使用它。

# javascript - 仅当通过提交按钮在表单中提交数据时启用对话框

> ID：15016190
> 
> 赞同：0
> 
> 时间：2013-02-22T03:09:39.877
> 
> 标签：javascript, jquery, cakephp

我正在尝试使用下一个按钮保存数据。输入表单后，当我单击下一个按钮时，会打开一个弹出对话框，询问“您是否要提交您的数据？”

所以为此我做了什么

在提交按钮我有这个代码：

```
 <?php echo $this->Form->submit('Next', array('class' => 'btn btn-primary','id'=>'movesubmitbtn'));?> 
```

它的 Cakephhp 提交按钮

这是我的javascript代码：

```
 <script type="text/javascript" charset="utf-8">
         $(document).ready(function() {
         // Interrupt the submit function
    $('#movesubmitbtn').click(function(){
        if(confirm('This is your final submission of the data. Do you want to continue?')) { 
            return true;
        }
        else { 
            return false;
        }
    });
           movesubmitbtn
          });

        </script> 
```

请帮帮我，如何添加禁用属性，以便仅在数据存在时才能获得弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:58:05.420

使用 jQuery；

```
$('form').on('change', function(){
    // this will be triggered with every 'change' inside the form
    // e.g. Every time the user modifies a input
    // check if all (required) inputs contain a value
    if('' == $('#inputA').val() || '' == $('#inputB').val()){
        $('#movesubmitbtn').disabled = true;
    } else {
        $('#movesubmitbtn').disabled = false;
    }
}); 
```

还可以考虑将您正在使用的代码放在表单的“提交”事件上，而不是放在按钮的“点击”上。如果用户在文本字段中按下“输入”键，这将阻止提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:57:00.457

尝试这个：

```
 <button id="submitBtn" type="submit" disabled="disabled">Submit</button>
    <textarea id="textBox" rows="10" onblur="if(this.value == ''){document.getElementById('submitBtn').disabled = true;} else {document.getElementById('submitBtn').disabled = false;}"></textarea> 
```

或更简单：

```
<button id="submitBtn" type="submit" disabled="disabled">Submit</button>
    <textarea id="textBox" rows="10" onblur="document.getElementById('submitBtn').disabled = (this.value == '');"></textarea> 
```

# android - 仅将应用程序限制为平板电脑

> ID：15016194
> 
> 赞同：0
> 
> 时间：2013-02-22T03:09:59.093
> 
> 标签：android

我在用，

```
<supports-screens
        android:largeScreens="true"
        android:normalScreens="false"
        android:requiresSmallestWidthDp="600"
        android:smallScreens="false"
        android:xlargeScreens="true" /> 
```

我比较关心 android:requiresSmallestWidthDp="600"

我的应用程序是否出现在 Nexus 7 平板电脑上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:52:26.667

找出答案的最佳方法是在实际设备上或在 Eclipse AVD 中对其进行测试。

医生说...

> > 为了使设备被认为与您的应用程序兼容，设备的 minimumWidth 必须等于或大于此值。（通常，您为此提供的值是您的布局支持的“最小宽度”，无论屏幕的当前方向如何。）
> > 
> > 例如，典型的手机屏幕最小宽度为 320dp，**7 英寸平板电脑的最小宽度为 600dp**，10 英寸平板电脑的最小宽度为 720dp。这些值通常是最小宽度，因为它们是屏幕可用空间的最短尺寸。

如上所述，`600dp`我认为 7" 平板电脑的最小宽度是这样的，但黄金法则是在 Eclipse Android 虚拟设备和实际设备中测试它。

设置一个 AVD`Nexus 7 (7.27", 800 x 1280:tvdpi)`作为设备，看看它是如何运行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:35:39.270

在 AndroidManifest.xml 中添加 support-screens 标签后，我可以在发布者网站中选择 Nexus7 并取消选中所有其他设备。

# c++ - 标准::地图 与向量的向量

> ID：15016197
> 
> 赞同：0
> 
> 时间：2013-02-22T03:10:16.623
> 
> 标签：c++, map, containers, stdvector

我需要一个容器来根据两个属性（源（int）和目标（int））存储一个值（int），即当源向目标发送某些东西时，我需要将它作为一个元素存储在容器中。源由唯一的 int ID（从 0-M 的整数）标识，其中 M 在几十到几百之间，目标 (0-N) 也是如此。容器将通过另一个函数的迭代来更新。

我一直在使用`vector(vector(int))`这意味着按源（目的地（值））的顺序。后续过程需要检查此容器，以查看特定源和特定目的地是否存在元素 - 它需要区分空的“空间”和填充的“空间”。容器有可能非常稀疏。

要存储的值可以是 0，所以我没有成功尝试找出空间是否为空，因为我似乎无法执行 container[M][N].empty() 之类的操作。

我没有使用地图的经验，但我看到另一篇[文章](https://stackoverflow.com/questions/9006230/check-to-see-if-vector-index-is-empty)建议地图可能有用，并且 an`std::map<int, int>`似乎类似于`vector<vector<int>>`.

总结一下：

1.  有没有办法检查向量“空间”的特定向量是否为空（因为我无法将其与 0 进行比较）
2.  是否有`std::map<int, int>`更好的用途，我该如何使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:28:08.797

> 我需要一个容器来根据源（int）和目标（int）两个属性存储一个值（int）

```
std::map<std::pair<int, int>, int> 
```

> 后续过程需要检查此容器，以查看特定源和特定目的地是否存在元素 - 它需要区分空的“空间”和填充的“空间”。

```
std::map::find 
```

[http://www.cplusplus.com/reference/map/map/find/](http://www.cplusplus.com/reference/map/map/find/)

> 容器有可能非常稀疏。

使用 std::map。容器的“正确”选择取决于您需要如何查找内容以及需要如何插入/删除内容。如果您想快速找到东西，请使用地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T03:18:43.833

首先，假设您想要一个等效的结构 `vector<vector<int>>`

你会想要

```
std::map<int,std::vector<int>> 
```

因为对于映射中的每个键，只有一个唯一值。

如果您的源以 0...N 的顺序非常紧密地索引，将进行大量查找，并且很少删除，您应该使用向量的向量。

如果您的源具有不严格遵循顺序的任意 ID，或者如果您要进行大量插入/删除，您应该使用`map<int,vector<int>>`- 通常由二叉树实现。

要检查向量的大小，请使用

```
myvec.size() 
```

要检查映射中是否存在键，请使用

```
mymap.count(ID) //this will return 0 or 1 (we cannot have more than 1 value to a key) 
```

我使用地图已经有一段时间了，尽管我离专家还很远，但它们对我来说非常方便用于存储和修改数据之间的连接。

PS如果只有一个目的地匹配一个来源，你可以继续

```
map<int,int> 
```

只需在读取之前使用 count() 方法查看键是否存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:32:38.400

如果您想继续使用向量但想添加检查项目是否包含有效值，请查看[`boost::optional`](http://www.boost.org/doc/libs/1_47_0/libs/optional/doc/html/index.html). 现在的类型是`std::vector<std::vector<boost::optional<int>>>`.

您也可以使用映射，但映射的键必须是两个 ID 而不是一个。

```
std::map<std::pair<int,int>,int> 
```

编辑：实现应该足以在地图中使用`std::pair`的比较运算符，请参阅[http://en.cppreference.com/w/cpp/utility/pair/operator_cmp](http://en.cppreference.com/w/cpp/utility/pair/operator_cmp)。`operator<`

# java - 切换活动并将字符串作为额外内容发送到另一个活动

> ID：15016198
> 
> 赞同：1
> 
> 时间：2013-02-22T03:10:29.833
> 
> 标签：java, android, string, android-intent, android-activity

我有一个`TabLayoutObjectActivity`显示 2 个具有不同活动（`TabActivity1`& `TabActivity2`）的选项卡。

我有另一个活动叫做`ObjectActivity`. 它包含一个数组，如果单击它，我希望应用程序更改为`TabLayoutObjectActivity`（首先显示`TabActivity1`）并从单击的数组中发送一个字符串`TabActivity1`。

我尝试了一些代码，但是在单击其中一个数组列表后，应用程序总是想强制关闭。

```
 Intent i = null;
        i = new Intent(this, TabLayoutObjekActivity.class);

        Intent ii = null;
        ii = new Intent(this, TabActivity1.class);
        ii.putExtra("name", String.valueOf(menuArray[position].toString()));

        startActivity(i);
        startActivity(ii); 
```

请给我你的意见如何做到这一点。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:15:37.033

参考[这个](http://developer.android.com/training/basics/firstapp/starting-activity.html)。它详细解释了如何解决您的问题。onclick 即使你可以处理这个问题。

# git - 新产品变体的 Git 分支

> ID：15016201
> 
> 赞同：0
> 
> 时间：2013-02-22T03:11:28.073
> 
> 标签：git, version-control

我正在使用 git 来管理我正在处理的存储库。

`master`分支是“主要”项目。但是，我也在研究与主产品相似但又不相同的并行产品。它生活在一个名为`newproject`.

两者的代码库非常相似，但`newproject`更加精简，并且有一些核心变化。然而，大量的装饰材料，如 CSS、javascript 等，在两个分支之间是相同的。

另一方面，我已经删除了`newproject`分支中仍然存在于`master`.

我不想将这些项目重新合并在一起，就像分支的典型情况一样，您创建一个分支以添加功能或修复错误然后合并回`master`——这些分支将永久独立存在。

但是，我仍然想从仍然存在重叠/共享文件的地方`master`获得任何修复。`newproject`

如果我只是这样做

```
$ git checkout newbranch
$ git pull origin master 
```

我得到了一大堆冲突，因为所有已删除的文件都显示为冲突，因为它们仍然存在于`master`.

有没有办法处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:28:19.140

git 子模块实现的效果正是您想要的：多个项目所依赖的公共代码主体，并修复了所有依赖项目之间共享的公共代码。子模块通过分离共享代码的历史来实现效果，但这只是机制——一旦你看到它，你就会明白它是自然正确的解决方案。

子模块命令本身的存在是为了跟踪一些挑剔的内务细节（通常，您可以`rm -rf *`在存储库中并且不会丢失任何已提交的状态，但嵌套存储库并非如此，因此该命令通常会提升子模块 .git 目录；类似的东西），但是子模块本身只不过是一个具有自己历史的嵌套存储库。如果你 cd 进入它，git 命令甚至不知道它是任何东西的子模块，因为它们不必关心：作为子模块只是 repo 的使用方式，而不是 repo 本身固有的任何东西。

```
 git init projectA
  cd projectA
  touch A            # now there's a file at the projectA root,
                     # but the projectA repo doesn't know about it
  echo 'this content is in file "A" at the projectA root'> A
  git add A          # content recorded, the index points to it
  git commit -m'A'   # now projectA repo has a permanent record of the indexed state

  git init projectInner  # now there's an entire repo at the projectA root,
                         # but the projectA repo doesn't know about it 
  cd projectInner
  echo "Inner content" > Inner   # a file at the inner repo, no repo knows about it
  git add Inner                  # content recorded, the inner repo's index records it
  git commit -mInner             # the inner repo has a permanent record

  cd ..
  git add projectInner   # now the projectA repo knows about the inner, the content is recorded ...
  git commit -mInner     # and now the projectA repo has a permanent record 
```

`git add`实际的 repo 意味着记录它的当前状态，就像添加文件或目录一样，但是文件的记录状态是它的全部内容，而目录的记录状态是它所有（跟踪或un-ignored) 内容，repo 的记录状态只是其 HEAD 提交的 SHA——其他所有内容都已记录在该 repo 本身中。

这里的有效负载是 git 子模块只是一个嵌套的 repo，事实证明嵌套 repo 可能是一个非常有用的东西。与 git 的其余部分一样，子模块命令实际上做的事情非常简单，所有明显的复杂性都在于在它非常有用的所有不同情况下实现最方便的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:18:48.193

分支后，您将能够`git rebase master`在新项目分支上执行一个操作，将其分离点向上移动到`HEAD`主分支。这将做的是从所做的更改顶部的分离点重新应用所有差异（这将非常容易并且可能没有重大冲突，如果有的话，因为大多数文件不再在`newproject`分支中）`newbranch`到主分支。由于`newproject`提交包括删除这些文件和其他更改，所以一切都应该顺利进行（希望不会有太多冲突）。查看此处链接的事实上的 git 书下列出的变基[信息。](http://git-scm.com/book/en/Git-Branching-Rebasing)

# php - 我应该在会话 cookie 名称中包含下划线吗？

> ID：15016204
> 
> 赞同：5
> 
> 时间：2013-02-22T03:11:35.420
> 
> 标签：php, laravel, laravel-4, laravel-3

我很好奇自从版本 3 以来是否有人在使用 Laravel 时遇到问题，当 cookie 名称中有下划线时，在各种版本的 IE 中设置 cookie。

我的项目（基于 CI 构建的电子商务网站）遇到了这个问题。修复了删除 cookie 名称中的下划线的问题。

虽然我目前正在将项目移植到 Laravel，但我只想检查是否也应该从会话 cookie 中删除下划线。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T03:24:59.247

我绝对建议从你的 cookie 名称中删除任何下划线，过去我已经被这个问题抓住了几次，而且很容易把你的头发拉出来试图弄清楚到底发生了什么事情下划线小鬼

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:27:58.250

最好在 cookie 名称中使用句点而不是下划线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T06:11:34.817

基本上你不需要下划线 - 所以只需删除它。当您可以通过删除它来实现零风险时，为什么会有风险：）

# php - PHPUnit什么都不做，没有输出

> ID：15016208
> 
> 赞同：1
> 
> 时间：2013-02-22T03:12:18.290
> 
> 标签：php, unit-testing, phpunit

我已经编写了一些测试用例，并想用 PHPUnit 进行尝试。但是，它不起作用。如果我运行`phpunit CategoryTest`它输出：

```
PHPUnit 3.7.14 by Sebastian Bergmann. 
```

如果我这样做`phpunit --log-json error.log CategoryTest`，error.log 文件将显示：

```
{"event":"suiteStart","suite":"CategoryTest","tests":5}  
{"event":"testStart","suite":"CategoryTest","test":"CategoryTest::test__construct"} 
```

因此，它发现文件中有 5 个测试，开始执行第一个测试，并且无缘无故停止。是否有任何日志可以找到它无法继续执行的原因？此外，如果我在其他文件上运行测试，例如`phpunit --log-json error.log UserTest`，shell 不会显示任何输出，error.log 文件也不会显示。

我尝试重新安装它，正如其他类似问题之一中所建议的那样，但它没有做任何事情。

有什么想法可以解决吗？

```
require_once '../Category.class.php';
require_once '../../db_connect.php';
require_once 'PHPUnit/Framework/TestCase.php';

class CategoryTest extends PHPUnit_Framework_TestCase {

private $Category;

protected function setUp() {

    parent::setUp ();
    $this->Category = new Category(0, $mdb2);

}

protected function tearDown() {
    $this->Category = null;
    parent::tearDown ();
}

public function __construct() {

}

public function test__construct() {

    $this->markTestIncomplete ( "__construct test not implemented" );

    $cat = $this->Category->__construct(0, $mdb2);

    $this->assertInstanceOf('Category', $cat);
}

public function testReturnID() {

    $this->markTestIncomplete ( "returnID test not implemented" );

    $id = $this->Category->returnID();

    $this->assertEquals(0, $id);

}
  ...
} 
```

变量`$mdb2`来自 db_connect.php 文件。

**我想到了。问题是我包含了一个类外部的变量。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:27:10.227

您不应该在您的 TestCase 中覆盖 __construct() 方法。构造函数为测试设置了模拟生成器和其他一些强制性的东西，所以如果你覆盖构造函数，你会得到很多奇怪的行为和不需要的副作用。setUp() 方法是您应该用来初始化测试的特殊方法。

# mfc - mfc 将图像加载到图像列表中以进行树控制

> ID：15016209
> 
> 赞同：-1
> 
> 时间：2013-02-22T03:12:20.583
> 
> 标签：mfc, loadimage, cbitmap

请帮忙！我尝试通过图标、hbitmap 和 cbitmap 将图像加载到图像列表（我正在使用基于 mfc 对话框的应用程序）。但是图像不会显示出来。但是当我在一个空的 sdi mfc 应用程序上重新创建图像时，我设法查看了图像。

```
m_TreeInspCtrl.DeleteAllItems();

CImageList imgl_Tree;
imgl_Tree.Create(16, 16, ILC_COLOR32, 1, 1);

/*
HBITMAP hBmp = (HBITMAP)::LoadImage(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDB_TREE_PASS), IMAGE_BITMAP, 0, 0, LR_LOADMAP3DCOLORS);
*/

imgl_Tree.Add(AfxGetApp()->LoadIcon(IDI_ICON_PASS));

/*
CBitmap m_TreePass;
//m_TreePass.Attach(hBmp);
m_TreePass.LoadBitmap(IDB_TREE_PASS);
imgl_Tree.Add(&m_TreePass, RGB(255,0,255)); 
*/

m_TreeInspCtrl.SetImageList (&imgl_Tree, TVSIL_NORMAL); 

CString s_Root = "Inspection Sequence";
HTREEITEM h_Root = m_TreeInspCtrl.InsertItem(s_Root, 0, 0, TVI_ROOT);
m_TreeInspCtrl.SetItemColor(h_Root, RGB(0, 150, 0)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:40:03.080

您必须创建一个在对话框存在期间有效的 CImageList。您在代码中创建的只是临时在堆栈上，它会在初始化函数返回时被销毁。我建议您将其创建为对话框类的成员变量。

# tinymce - 如何防止 tinyMCE 的粘贴事件？

> ID：15016210
> 
> 赞同：2
> 
> 时间：2013-02-22T03:12:26.697
> 
> 标签：tinymce, paste

如果编辑器当前内容的长度加上要粘贴的单词长度超过指定的限制，我需要阻止tinyMCE的粘贴事件。我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:54:12.183

我错了。我不需要阻止或禁用 tinyMCE 中的粘贴来执行此操作。我使用了他们的**粘贴**插件并在粘贴之前修改了内容。

```
function(pl, o) {
      ...

      if(len > limit) {
           o.content = '';
      } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T17:23:53.517

我认为最好使用[paste_preprocess](https://www.tinymce.com/docs/plugins/paste/#paste_preprocess)函数。

这是一个老问题，但其他人可能会偶然发现这个问题。

# php - 如何使用 Group By 组合这两个 MySQL 查询

> ID：15016214
> 
> 赞同：0
> 
> 时间：2013-02-22T03:13:14.100
> 
> 标签：php, mysql, sql, database-design

我有这张表，我用来通过**station_id**进行分组来查询。

```
+------------------+---------------+------+-----+---------+-------+
| Field            | Type          | Null | Key | Default | Extra |
+------------------+---------------+------+-----+---------+-------+
| id               | varchar(50)   | NO   | PRI | NULL    |       |
| station_id       | tinyint(3)    | NO   |     | NULL    |       |
| game_type_id     | smallint(1)   | NO   | MUL | NULL    |       |
| price            | decimal(10,2) | YES  |     | 0.00    |       |
| date_created     | datetime      | YES  | MUL | NULL    |       |
| bet_no1          | tinyint(2)    | YES  |     | 0       |       |
| bet_no2          | tinyint(2)    | YES  |     | 0       |       |
+------------------+---------------+------+-----+---------+-------+ 
```

这是我使用**GROUP BY station_id在表上显示它的查询**

```
SELECT station_id,
COUNT(*) as bet_counts,
FORMAT(SUM(price),2) as gross
FROM bets 
WHERE bet_void=0 
AND date_created >= '2013-02-12 00:00:00' 
AND date_created < '2013-02-23 00:00:00' 
GROUP BY station_id 
```

查询会给我。

```
+------------+------------+-------+
| station_id | bet_counts | gross |
+------------+------------+-------+
|          1 |         14 | 16.00 |
|          2 |          5 | 5.00  |
|          7 |         11 | 11.00 |
+------------+------------+-------+ 
```

但是我还有另一个查询，它计算每个 station_id 中的每个特定赌注**（****game_type_id**）。我通常在循环语句中查询这个。

 **```
SELECT COUNT(*) as count
FROM bets
WHERE game_type_id = 1
AND station_id = {station_id from first query}
AND date_created >= '2013-02-12 00:00:00'
AND date_created < '2013-02-23 00:00:00' 
```

我的问题是，我怎样才能在一个查询中进行此操作，并且仍然使用**GROUP BY station_id**并获得每个**game_type_id**的投注计数？像这样的结果。

```
+------------+------------+-------+-------------------------+-------------------------+
| station_id | bet_counts | gross | count_of_game_type_id_1 | count_of_game_type_id_2 |
+------------+------------+-------+-------------------------+-------------------------+
|          1 |         14 | 16.00 |                      10 |                       4 |
|          2 |          5 | 5.00  |                       3 |                       2 |
|          7 |         11 | 11.00 |                      11 |                       0 |
+------------+------------+-------+-------------------------+-------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:17:28.937

您可以通过将结果连接在一起来做到这一点。但是，这两个查询中的逻辑非常相似，因此您可以将它们组合成一个聚合查询：

```
SELECT station_id,sum(case when bet_void = 0 then 1 else 0 end) as bet_counts,
       FORMAT(SUM(case when bet_void = 0 then price else 0 end),2) as gross,
       sum(case when game_type_id = 1 then 1 else 0 end) as count
FROM bets b
where date_created >= '2013-02-12 00:00:00' AND date_created < '2013-02-23 00:00:00'
GROUP BY station_id 
```**

# jira - 在 JIRA 中，如何创建排除重复项的问题过滤器？

> ID：15016219
> 
> 赞同：0
> 
> 时间：2013-02-22T03:14:02.027
> 
> 标签：jira, jql

我有一个 JIRA 问题过滤器，其中列出了一组符合我的标准的问题。其中一些具有重复类型的链接。我想从我的查询中排除那些重复的问题。

从逻辑上讲，我正在寻找类似的东西： `... AND ! hasLinks('duplicates')`

我相信这个功能在[JQL Tricks Plugin](http://www.j-tricks.com/jql-tricks-plugin.html)中，但是这个插件非常昂贵。

有没有办法用 JQL 原生地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T10:58:48.957

假设问题的状态为 Closed 且分辨率为 Duplicate，请尝试使用此过滤器：

```
 ... and (resolution is empty or resolution != Duplicate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:21:23.820

试试这个： [https ://confluence.atlassian.com/display/JIRA050/Advanced+Searching#AdvancedSearching-CONTAINS:~](https://confluence.atlassian.com/display/JIRA050/Advanced+Searching#AdvancedSearching-CONTAINS:~)

“~”运算符用于搜索指定字段的值与指定值匹配的问题

# c# - 执行随机 SQL 查询并将结果放入 datagridview

> ID：15016222
> 
> 赞同：2
> 
> 时间：2013-02-22T03:14:33.943
> 
> 标签：c#, mysql

我正在使用 C# 和 MySQL

到目前为止，我已经尝试使用 DataSet 和 MySqlDataAdapter 成功执行 SELECT、INSERT、DELETE 命令并在 datagridview 中显示结果。

但现在我想**1.执行一个随机查询**（无论用户在文本框中键入什么并按执行按钮），以及**2.在 datagridview** 中显示结果**。

归档该任务需要哪些步骤？

（我试图搜索但只返回那些人们使用特定命令（如 SELECT）的结果，我的情况不同，查询是由用户随机输入的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:45:01.060

以下是将查询结果绑定到 gridview 的示例代码片段：

```
DataSet objDataSet = new DataSet();
SqlConnection objConn = new SqlConnection();

SqlCommand objComm = new SqlCommand("SELECT COUNT(*) FROM table", objConn);

SqlDataAdapter objDataAdapter = new SqlDataAdapter(objComm);

if (objConn.State == ConnectionState.Closed)
{
    objConn.Open();
}

objDataAdapter.Fill(objDataSet, strTable);

dataGridView1.DataSource = objDataSet; 
```

# oracle - 表空间详细信息

> ID：15016223
> 
> 赞同：1
> 
> 时间：2013-02-22T03:15:05.723
> 
> 标签：oracle, database-administration

我有兴趣在我的数据库中查找有关表空间的某些信息，但我不太确定从哪里开始。我被要求找到以下信息：

在报告中总结如下：列出所有表空间，包括表空间名称、所有者、类型和表空间使用的总字节数，列出使用情况统计信息、空闲字节和碎片

**我在网上环顾四周，发现了这个：**

```
select tablespace_name from dba_tablespaces
select tablespace_name from user_tablespaces 
```

这就是我目前所拥有的一切，但我不知道从那里去哪里。有人可以指导我完成我应该做些什么来收集所需的信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:10:09.050

这些我可以帮忙...

*   名称：dba_tablespaces.Tablespace_Name
*   类型（永久、临时、撤消）：dba_tablespaces.Contents
*   大小：表空间的总和 DBA_Data_Files.Bytes
*   空闲字节：表空间的总和 DBA_Free_Space.Bytes
*   使用的总字节数：大小 - 空闲字节
*   片段：你是说片段吗？如果是这样，计算表空间的 DBA_Segments 行

...但不是所有者；不知道如何找到它。

这是一个获取名称、类型、大小、已使用、空闲和段的查询：

```
WITH
  ts AS (
    SELECT Tablespace_Name, SUM(Bytes/1024) AS TotSize
    FROM DBA_Data_Files
    GROUP BY Tablespace_Name),
  tx AS (SELECT Tablespace_Name, COUNT(*) AS Segments
    FROM DBA_Segments
    GROUP BY Tablespace_Name),
  tf AS (SELECT Tablespace_Name, SUM(Bytes/1024) AS TotFree
    FROM DBA_Free_Space
    GROUP BY Tablespace_Name)
SELECT
  Tablespace_Name,
  DBA_Tablespaces.Contents,
  ts.TotSize,
  ts.TotSize - tf.TotFree AS TotUsed,
  tf.TotFree,
  tx.Segments
FROM DBA_Tablespaces
INNER JOIN ts USING (Tablespace_Name)
INNER JOIN tx USING (Tablespace_Name)
INNER JOIN tf USING (Tablespace_Name)
ORDER BY Tablespace_Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T10:21:11.503

您可以使用以下查询：

查询TS( `TABLESPACE`)信息

**`Dba_tablespaces`**

```
SQL>SELECT TABLESPACE_NAME,EXTENT_MANAGEMENT,

2         ALLOCATION_TYPE,CONTENTS,

3         SEGMENT_SPACE_MANAGEMENT

4         FROM DBA_TABLESPACES;

TABLESPACE_NAME EXTENT_MAN ALLOCATIO CONTENTS  SEGMEN

————— ———- ——— ——–  ——

SYSTEM      DICTIONARY   USER       PERMANENT MANUAL

UNDOTBS     LOCAL        SYSTEM    UNDO      MANUAL

TEMP        LOCAL        SYSTEM    TEMPORARY MANUAL

TOOL        LOCAL        SYSTEM    PERMANENT MANUAL

USERS       LOCAL        SYSTEM    PERMANENT MANUAL

APP_DATA    DICTIONARY   USER      PERMANENT MANUAL

APP_INDEX   LOCAL        SYSTEM    PERMANENT AUTO 
```

**ii.`DBA_FREE_SPACE`**

```
SQL>SELECT TABLESPACE_NAME,SUM(BYTES)FREE_SPACE

2 FROM DBA_FREE_SPACE

3 GROUP BY TABLESPACE_NAME;

TABLESPACE_NAME  FREE_SPACE

————————— ———

APP_DATA                      10481664

APP_INDEX                    10223616

SYSTEM                            88281088

UNDOTBS                         208338944

USERS                                24051712 
```

**iii. `DBA_EXTENTS`,`USER_EXTENTS`** – 显示有关范围、范围大小、关联段和表空间的信息。

**`DBA_DATA_FILES`**– 显示属于表空间的数据文件

**`DBA_TEMP_FILES`**– 显示属于本地管理的临时管理表空间的临时文件。

**iv.`DBA_USERS`**

```
SQL>SELECT DEFAULT_TABLESPACE,TEMPORARY_TABLESPACE

2 FROM DBA_USERS

3 WHERE USERNAME = ‘HR’;

DEFAULT_TABLESPACE  TEMPORARY_TABLESPACE

——————————- ——————–

EXAMPLE                                TEMP 
```

在此处阅读有关 oracle 表空间和 oracle 表空间管理的所有信息：http: [//www.techienawa.com/logical-structure/oracle-tablespace/](http://www.techienawa.com/logical-structure/tablespace-oracle/)
[http://www.techienawa.com/logical-structure/tablespace-oracle/](http://www.techienawa.com/logical-structure/oracle-tablespace/)

# python - 用python读写

> ID：15016226
> 
> 赞同：0
> 
> 时间：2013-02-22T03:15:40.757
> 
> 标签：python

我对编码很陌生，我正在试图弄清楚如何解决这个问题：找到所有以 # 开头的标题和第 7 列中包含“PASS”一词的行，并将它们打印到 new.vcf。Pass 可能会出现在其他列中，但在第 7 列中时，它将单独出现并且全部大写。这些文件是制表符分隔的。我已经完成了问题的第一部分，但不知道如何从第 7 列中提取“PASS”。这是我到目前为止的总代码。

```
#!/usr/bin/env python
myfile= open("temp.vcf","r")
outfile= open("new.vcf","w")            
for data in myfile: 
    data = data.strip("\t")
    if data[0] == "#":
        outfile.write(data +"\n")
myfile.close()
outfile.close()

myfile=open("temp.vcf","r") 
outfile=open("new.vcf","a")

data=myfile.readline()
while data == "PASS":
    outfile.write(data+"/t")
    data=myfile.readline()  

myfile.close()
outfile.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:22:55.907

你有没有试过改变你的线路，

```
while data == "PASS": 
```

至

```
while data.find("PASS") >= 0 : 
```

它在字符串上使用 find() 方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:25:42.817

用分隔符分割你的行并检查索引 6 是否为“PASS”

```
line = "#   a   b   c   d   e   PASS    f"

columns = line.split("   ")

print columns[6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:28:19.990

首先，您不需要打开和关闭文件两次。您应该同时执行这两个操作。其次，要读取特定列中的数据，您需要将每一行分成这些列。`str.split`是你的朋友。

```
#!/usr/bin/env python
myfile= open("temp.vcf","r")
outfile= open("new.vcf","w")            
for data in myfile:
    if data[0] == "#":
        outfile.write(data + "\n")
        continue
    columns = data.split("\t")
    if columns[6] == "PASS":
        outfile.write(data + "\n")
myfile.close()
outfile.close() 
```

# python - 有没有办法检查给定的字符串，当使用 eval() 运行时，是否可以在 python 解释器中运行？

> ID：15016227
> 
> 赞同：0
> 
> 时间：2013-02-22T03:15:54.220
> 
> 标签：python, optimization, artificial-intelligence, eval, interpreter

我有一个字符串列表，我想可能有一种方法可以让父程序在使用 eval() 而不是停止程序时判断其中一个子程序是否在 python 解释器中成功编译。如果有任何方法可以在不停止脚本的情况下进行判断，那将是一个巨大的帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:18:58.170

您可能会发现“编译”功能很有用：

[http://docs.python.org/2/library/functions.html#compile](http://docs.python.org/2/library/functions.html#compile)

# linux - 如何检测我的网络摄像头支持哪种像素格式？

> ID：15016229
> 
> 赞同：2
> 
> 时间：2013-02-22T03:16:14.930
> 
> 标签：linux, debian, linux-device-driver, v4l2

我正在编写一个从我的网络摄像头捕获视频的 C 应用程序。我无法确定我的网络摄像头能够处理哪种像素格式。

**lsusb：**

> 总线 002 设备 003：ID 1e4e:0100 Cubeternet 网络摄像头

**dmesg**

```
[ 1064.735472] usb 2-1.4: new high speed USB device using ehci_hcd and address 4
[ 1064.837577] usb 2-1.4: New USB device found, idVendor=1e4e, idProduct=0100
[ 1064.837583] usb 2-1.4: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[ 1064.837587] usb 2-1.4: Product: USB2.0 Camera
[ 1064.837589] usb 2-1.4: Manufacturer: Etron Technologies
[ 1064.837715] usb 2-1.4: configuration #1 chosen from 1 choice
[ 1064.838484] uvcvideo: Found UVC 1.00 device USB2.0 Camera (1e4e:0100)
[ 1064.843070] uvcvideo: UVC non compliance - GET_DEF(PROBE) not supported. Enabling workaround.
[ 1064.844229] input: USB2.0 Camera as /devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.4/2-1.4:1.0/input/input7 
```

我能够确定图像大小“640x480”，但不能确定像素格式：我试过了

> YUV420 RGB565 RGB32

没有成功。任何帮助请。我正在使用 Debian 最新版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-20T17:23:56.223

由于它是 UVC 视频，请在此处查找 wiki：

[http://www.wikiwand.com/en/USB_video_device_class](http://www.wikiwand.com/en/USB_video_device_class)

你会看到 UVC 支持

未压缩的 YUV 格式 YUY2、NV12。

实际上，YUY2 也称为 YUYV，即 YUV 4:2:2。

您可以在此处找到到 RGB 的转换：

[https://bitbucket.org/neuralassembly/simplewebcam/src/a940256eda0d/jni/ImageProc.h](https://bitbucket.org/neuralassembly/simplewebcam/src/a940256eda0d/jni/ImageProc.h)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-12T13:13:59.140

您可以使用：

```
v4l2-ctl --list-formats 
```

那应该为您提供支持的像素格式

此外，您还可以使用：

```
v4l2-ctl --list-formats-ext 
```

这应该为您提供支持的像素格式分辨率。

# vb.net - 如何设置 TextBox.TextAlign = MiddleLeft？

> ID：15016230
> 
> 赞同：2
> 
> 时间：2013-02-22T03:16:15.360
> 
> 标签：vb.net, winforms, textbox

[`Label.TextAlign`](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.textalign.aspx)是[ContentAlignment](http://msdn.microsoft.com/en-us/library/system.drawing.contentalignment.aspx)类型。它允许开发人员选择垂直和水平对齐的任意组合。

[`TextBox.TextAlign`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.textalign.aspx)是[Horizo​​ntalAlignment](http://msdn.microsoft.com/en-us/library/system.windows.forms.horizontalalignment.aspx)类型的。它只允许*Left*、*Center*和*Right*。

我想模仿`ContentAlignment = MiddleLeft`TextBox 的行为。

基本上，我正在尝试创建一个自定义`MsgBox`对话框（`MessageBox.Show`对于非 VB 开发人员）。微软`MsgBox`似乎`Label.TextAlign = MiddleLeft`通过 windows API 自动设置。我需要它是一个`TextBox`（不是标签），因为用户应该能够选择文本并部分或全部复制到剪贴板。

到目前为止，我想出了这个解决方案：

1.  有一个 TableLayoutPanel，它的一个单元格将包含上面的 TextBox。
2.  设置`Anchor = Left,Right`。这将使其保持水平拉伸。
3.  `MeasureText`就在显​​示之前（例如：Form_Load），然后调整`TextBox.Height`.

    ```
    Dim size As SizeF = TextBox1.CreateGraphics.MeasureString(
                        TextBox1.Text, TextBox1.Font, TextBox1.Width)
    TextBox1.Height = size.Height 
    ```

这是它如何工作的图片（演示项目，还不是自定义 MsgBox）：

![在此处输入图像描述](../Images/77aaf75a228974d4c113c4dcb279be2a.png)

这似乎是一种相当肮脏的方法，对调整大小和文本更改没有弹性。当然，可以相应地处理这些事件，但这会增加整体混乱。

**问题：有更清洁的方法吗？**我正在寻找任何可能有助于实现上述行为的东西 - 它不一定必须是`TextBox`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:38:56.670

如果您将 WPF ElementHost 添加到表单中。然后像这样创建一个带有 TextBox 的 WPF UserControl：

```
<UserControl x:Class="UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="113" d:DesignWidth="234" BorderThickness="2" BorderBrush="Black">

    <TextBox x:Name="TextBox1" BorderThickness="0" IsReadOnly="True" Background="{x:Null}" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">Hello World</TextBox>
</UserControl> 
```

然后在您的代码中，您可以像这样设置值：

```
Me.UserControl11.TextBox1.Text = "Some Text Value Here" 
```

当然，这假设您可以使用 WPF，但从好的方面来说，您可以使用所有 Xaml 样式功能。

# android - aSmack 即服务

> ID：15016231
> 
> 赞同：5
> 
> 时间：2013-02-22T03:16:15.537
> 
> 标签：android, service, xmpp, asmack

基本上我有一个运行整个项目的主类。该代码运行良好，尽管一旦应用程序不聚焦，它就会变为非活动状态。我想知道我将如何使它成为一项服务。一个会在启动时启动的。

该应用程序将成为通知的单向消息系统。IE

桌面客户端 -> Openfire 服务器 -> Android XMPP 服务 -> 存储 (DB) -> 用于显示的 Android GUI

正如我所说，代码正在运行（连接、登录、接收），但不是服务。

我可以使用 BEEM 源，但它过于特色和交错。我追求的是轻量级服务。

编码：

```
public class MainActivity extends Activity {

  public static final String HOST = "fire.example.com";
  public static final int PORT = 5222;
  public static final String SERVICE = "example.com";
  public static final String USERNAME = "metest@fire.example.com";
  public static final String PASSWORD = "mepass";

  private XMPPConnection connection;
  private ArrayList<String> messages = new ArrayList<String>();
  private Handler mHandler = new Handler();
  private ListView listview;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listview = (ListView) this.findViewById(R.id.listMessages);
    setListAdapter();

    connect();
  }

  /**
   * Called by Settings dialog when a connection is establised with 
   * the XMPP server
   */
  public void setConnection(XMPPConnection connection) {
    this.connection = connection;
    if (connection != null) {
      // Add a packet listener to get messages sent to us
      PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
      connection.addPacketListener(new PacketListener() {
        @Override
        public void processPacket(Packet packet) {
          Message message = (Message) packet;
          if (message.getBody() != null) {
            String fromName = StringUtils.parseBareAddress(message.getFrom());
            Log.i("XMPPChatActivity ", " Text Recieved " + message.getBody() + " from " +  fromName);

            messages.add(message.getBody());

            mHandler.post(new Runnable() {
              public void run() {
                setListAdapter();
              }
            });
          }
        }

      }, filter);
    }
  }
  @TargetApi(Build.VERSION_CODES.HONEYCOMB)
@SuppressLint("NewApi")

  private void setListAdapter() {
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.listitem, messages);
    listview.setAdapter(adapter);
  }

  @Override
  protected void onDestroy() {
    super.onDestroy();
    try {
      connection.disconnect();
    } catch (Exception e) {

    }
  }

  public void connect() {

    final ProgressDialog dialog = ProgressDialog.show(this, "Connecting...", "Please wait...", false);
    Thread t = new Thread(new Runnable() {
      @Override
      public void run() {
        // Create a connection
       ConnectionConfiguration connConfig = new ConnectionConfiguration(HOST, PORT, SERVICE);
       XMPPConnection connection = new XMPPConnection(connConfig);
         try {
           connection.connect();
           Log.i("XMPPChatActivity",  "[SettingsDialog] Connected to "+connection.getHost());
         } catch (XMPPException ex) {
             Log.e("XMPPChatActivity",  "[SettingsDialog] Failed to connect to "+ connection.getHost());
             Log.e("XMPPChatActivity", ex.toString());
             setConnection(null);
         }
          try {
            connection.login(USERNAME, PASSWORD);
            Log.i("XMPPChatActivity",  "Logged in as" + connection.getUser());

            // Set the status to available
            Presence presence = new Presence(Presence.Type.available);
            connection.sendPacket(presence);
            setConnection(connection);

            Roster roster = connection.getRoster();
            Collection<RosterEntry> entries = roster.getEntries();
            for (RosterEntry entry : entries) {

              Log.d("XMPPChatActivity",  "--------------------------------------");
              Log.d("XMPPChatActivity", "RosterEntry " + entry);
              Log.d("XMPPChatActivity", "User: " + entry.getUser());
              Log.d("XMPPChatActivity", "Name: " + entry.getName());
              Log.d("XMPPChatActivity", "Status: " + entry.getStatus());
              Log.d("XMPPChatActivity", "Type: " + entry.getType());
              Presence entryPresence = roster.getPresence(entry.getUser());

              Log.d("XMPPChatActivity", "Presence Status: "+ entryPresence.getStatus());
              Log.d("XMPPChatActivity", "Presence Type: " + entryPresence.getType());

              Presence.Type type = entryPresence.getType();
              if (type == Presence.Type.available)
                Log.d("XMPPChatActivity", "Presence AVIALABLE");
                Log.d("XMPPChatActivity", "Presence : " + entryPresence);
              }
              } catch (XMPPException ex) {
                Log.e("XMPPChatActivity", "Failed to log in as "+  USERNAME);
                Log.e("XMPPChatActivity", ex.toString());
                setConnection(null);
              }
              dialog.dismiss();
           }
      });
    t.start();
    dialog.show();
  }
} 
```

所以基本上，我如何使它成为一项服务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-17T18:02:57.297

我想给定链接上的这个例子会给你一个让它成为服务的想法。[http://android.codeandmagic.org/small-test-of-asmack-xmpp-client-library/](http://android.codeandmagic.org/small-test-of-asmack-xmpp-client-library/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T23:53:15.830

您需要使用 Android[服务框架。](http://developer.android.com/guide/components/services.html)

您可以查看[GTalk SMS](https://code.google.com/p/gtalksms/)源，因为它们使用服务并且是开源的。（主要服务是他们用来处理连接等的服务）虽然它也很复杂。

我强烈建议您查看在 Android 中使用服务的基础知识。

请记住，服务不会创建新线程，一切仍然在 UI 线程上完成，因此如果您想在后台执行长时间运行的任务，那么您还需要实现 asynctask 或 executor 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-25T11:12:29.870

老问题，但无论如何我都会回答。
您需要创建一个服务，启动它并将您的 aSmack 连接代码放在服务中，而不是任何活动中。即使应用程序不在前台，该服务也会保留连接。我在我的一个客户的应用程序中使用这种方法，效果很好。

此外，请确保在服务中使用 Handler 或 AsyncTask 在另一个非 UI 线程中创建套接字连接。Android 无论如何都不允许您在 UI 线程中创建连接。

# jquery - jQuery 缓解 Wordpress 导航

> ID：15016232
> 
> 赞同：0
> 
> 时间：2013-02-22T03:16:18.673
> 
> 标签：jquery, wordpress, navigation, easing

我正在尝试在我的 Wordpress 模板中建立 jQuery 缓动，这样我可能会对页面下方的 div id 有一些很酷的滚动效果。我在使用纯 HTML 之前已经这样做了，但是对于如何使用 Wordpress 的导航功能来建立它，我有点困惑。这是我过去使用的代码。非常感谢任何有关我如何对其进行改造的帮助。

```
<script src="../js/jquery.min.js"></script>
<script>
function goToByScroll(id){ 
    jQuery('html,body').animate({scrollTop: jQuery("#"+id).offset().top},900); 
    return false; 
} 
```

```
*/Function/*
<script>function goToByScroll(id){ $('html,body').animate({scrollTop: $("#"+id).offset().top},900); return false; }</script>

*/Nav Link/*
<li><a onclick="goToByScroll('div1')" href="javascript:void(0)" href="#">Link 1</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:55:29.040

*   Wordpress 将 jQuery 置于禁用 $() 函数的无冲突模式。除非您在 jQuery 中禁用无冲突模式，否则您将不得不使用 jQuery() 而不是 $()。

*   Wordpress 还默认为您包含 jQuery，无需您自己包含它们。

这是您的代码的外观：（注意：您应该永远不会再遇到这个问题 - 现在您知道 Wordpress 默认没有 $() 函数。

```
<script>
    function goToByScroll(id){ 
        jQuery('html,body').animate({scrollTop: jQuery("#"+id).offset().top},900); 
        return false; 
    }
</script> 
```

或者

```
<script>
    function goToByScroll(id){ 
        jQuery(document).ready(function($){
            $('html,body').animate({scrollTop: $("#"+id).offset().top},900); 
            return false; 
        });
    }
</script> 
```

部分取自：[https ://stackoverflow.com/a/3744901/1270996](https://stackoverflow.com/a/3744901/1270996)

# jquery - Angular JS：临时禁用指令提供的动画，因此在页面加载时它不会动画？

> ID：15016233
> 
> 赞同：2
> 
> 时间：2013-02-22T03:16:22.317
> 
> 标签：jquery, animation, angularjs, directive

作为标题，请看这个小提琴：

[http://jsfiddle.net/goodwill/ezNuj/](http://jsfiddle.net/goodwill/ezNuj/)

我添加了一个带有以下代码的指令：

```
myApp.directive('ngFadeIn', function() {
  return function(scope, element, attr) {
    if (element.is('tr, tbody')) {
      element.find('td').effect("highlight", {}, 500);
    } else {
      element.effect("highlight", {}, 500);
    }
    return scope.destroy = function(complete) {
      return element.fadeOut(500, function() {
        if (complete) {
          return complete.apply(scope);
        }
      });
    };
  };
}); 
```

我遇到的问题是第一次加载页面时，因为我已经在 ng-repeat 元素中应用了该指令，所以在第一次加载页面时所有项目都具有高亮效果（闪烁一次）。我怎样才能在没有太多技巧的情况下跳过这个效果（理想情况下，一切都在指令内完成）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:04:03.267

有趣的是，我不确定是否有一个简单、干净的解决方案。似乎 ngRepeatDirective 的构建不关心中继器是第一次运行还是只是将新项目添加到列表中。因此，它不会让您根据具体情况采取不同的行动。AngularUI 的 ui-animate 指令似乎也不能解决这个问题，所以我不确定这在不诉诸讨厌的超时的情况下现在是否可行。

您可以做的是修改 ngRepeatDirective 以检查类似`ng-repeat-finished`属性的内容，并在转发器完成后执行。然后添加逻辑以避免第一个中继器上的动画应该是微不足道的。

顺便说一句，你不应该用 ng 前缀来命名你的指令，因为这是 Angular 内部使用的。您应该为您的应用程序提供自己的前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:10:06.780

[我会查看刚刚在1.1.14 版本](http://code.angularjs.org/1.1.4/)中发布的 Angular 内置动画。这是一篇关于新功能的精彩文章：[AngularJS 中的动画](http://www.yearofmoo.com/2013/04/animation-in-angularjs.html)。特别是我会查看“有条件地启用/禁用动画”部分。从他们的网站：

JS：

```
//turn on the animation
$scope.myAnimation = { enter: 'cool-enter', leave: 'cool-leave' };

//change the animation
$scope.myAnimation = { enter: 'uncool-enter', leave: 'uncool-leave' };

//remove the animation
$scope.myAnimation = null; 
```

HTML：

```
<div data-some-directive data-ng-animate="myAnimation"></div> 
```

再次注意，这需要当前不稳定版本的 angular js 1.1.14

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:20:13.590

如果我们可以确定页面第一次完成渲染的时间，那么我们可以在服务或 rootScope 上设置一些属性，您的指令可以注入这些属性，从而检查该属性以确定是否应用动画。

不幸的是，似乎没有办法确定页面何时完成渲染。请参阅[AngularJS - How to query the DOM when directive rendering is complete](https://stackoverflow.com/questions/14235669/angularjs-how-to-query-the-dom-when-directive-rendering-is-complete)，它解决了同样的问题。

我能想到的唯一解决方法是创建另一个指令（在页面上使用一次），它会使用 $timeout 来简单地延迟 1 秒左右，然后执行我上面提到的操作：在服务或 rootScope 上设置一些属性。您的 fadeIn 指令将 $watch 该属性/变量，并且当值更改时，它可以设置一些允许或阻止动画的本地属性/布尔值/标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T14:28:43.037

我在使用 angular 1.4.9 时遇到了同样的问题。我不希望第一次发生 ng-repeat 动画。我发现完成这项工作的唯一方法是在 ng-repeat 父级上有一个自定义指令并在短时间内禁用动画：

```
(function (){
  'use strict';

  angular
    .module('directives')
    .directive('disableLoadingAnimation', disableLoadingAnimation);

  function disableLoadingAnimation($animate, $timeout) {
    var directive = {
      link: link,
      restrict: 'A'
    };
    return directive;

    function link(scope, element) {
      $animate.enabled(element, false);
      $timeout(function (){
        $animate.enabled(element, true);
      }, 1000);
    }
  }
})(); 
```

HTML

```
<table disable-loading-animation>
   <tr ng-repeat="line in lines">...</tr>
</table> 
```

我不喜欢我必须设置 1000 毫秒延迟的事实，但这是迄今为止我发现的更清洁的方式。

# jquery - 如何根据依赖值删除元素（div）

> ID：15016235
> 
> 赞同：2
> 
> 时间：2013-02-22T03:16:44.390
> 
> 标签：jquery

**jsFiddle：http:** [//jsfiddle.net/fH3Sc/](http://jsfiddle.net/fH3Sc/)

使用给定的 HTML（不修改它），如何`special-text`根据父或相邻 div 的内容/属性删除每个 div 的最后一个实例？

```
$(".special-text").slice(0, -1).remove(); 
```

这将保留`special-text`页面上 div 的最后一个实例。

我想保留每个`special-text`div 的 LAST UNIQUE 实例。如果将更多 div 添加到小提琴中，理想情况下它应该只显示每个`special-text`div 的 LAST UNIQUE 实例。

**目标输出：http:** [//jsfiddle.net/JdbTx/](http://jsfiddle.net/JdbTx/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:41:23.053

遍历不同的文本字符串并将相应的元素存储在包含数组的哈希中。然后只需删除每个数组中的非最后一个元素。

```
var texts = {};
$(".special-text").each(function() {
    var text = $(this).text();
    if(!texts.hasOwnProperty(text)) {
       texts[text] = [];
    }
    texts[text].push(this);
});

$.each(texts, function(text, elements) {
    $(elements).not(":last").remove();
}); 
```

[jsFiddle](http://jsfiddle.net/fH3Sc/5/)演示

或者[另一种方式](http://jsfiddle.net/fH3Sc/8/)，基于 Jan 的回答，它在一次运行中完成：

```
var keepers = {};
$.fn.reverse = [].reverse;
$(".special-text").reverse().filter(function() {
    var text = $(this).text(), include = keepers[text] === true;
    keepers[text] = true;
    return include;
}).remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:33:41.117

你可以试试

```
var obj = {};
$('.special-text').each(function(i, v){
    obj[$(v).text()] = true;
});

$.each(obj, function(i, v){
    $('.special-text:contains(' + i + ')').not(':last').remove()
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/fH3Sc/3/)

步骤 1 识别所有唯一`special-text`值，然后我们遍历列表并删除除最后一个匹配特殊文本的项目之外的所有值。

更新：我会推荐[Jan Dvorak 的答案，](https://stackoverflow.com/questions/15016235/how-to-remove-element-div-based-on-dependent-value/15016368#answer-15016405)因为我有一些问题，如评论中所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T03:38:10.133

这里没有特定的 CSS 选择器，但您可以手动执行此操作：

```
var keepers = {};

$(".special-text").each(function(){
    keepers[$(this).text()]=this
}).each(function(){
  if(keepers[$(this).text()]!=this){
    $(this).remove()
  }
}) 
```

小提琴：http: [//jsfiddle.net/honnza/fH3Sc/4/](http://jsfiddle.net/honnza/fH3Sc/4/)

逻辑如下：

1）收集我们想要保留的所有帖子，每个内容最多一个，覆盖旧条目（意味着只有每个帖子的最后一个实例才能保留在列表中）

2）删除所有未留在该列表中的条目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T03:30:46.953

这两行重现了您在第二小提琴中所拥有的内容。

```
$(".name:contains('Jessie')").slice(0, 2).next('.special-text').remove();
$(".name:contains('Meowth')").first().next('.special-text').remove(); 
```

由于名称并不唯一`Jessie`，`Meowth`因此很难给出简明的答案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-22T03:28:37.447

```
$(".post > .name:contains('Jessie')").nextAll(".special-text").remove(); 
```

[在此处查看演示](http://jsfiddle.net/fH3Sc/1/)

# html - 两个方向的盒子方向？

> ID：15016236
> 
> 赞同：1
> 
> 时间：2013-02-22T03:16:49.673
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:53:20.203

You're actually looking at the wrong specification. The 2009 specification is being phased out in favor of the CR draft from Sept. 2012\. To make a 3x3 grid with flexbox, you need to enable wrapping. The property from the 2009 draft for that was called `box-lines`, but the last remaining browser that follows that spec (Firefox) never implemented it.

[http://jsfiddle.net/aUSWE/1/](http://jsfiddle.net/aUSWE/1/) (prefixes not included)

```
#container {
    display: flex;
    flex-flow: row wrap;
    width: 300px;
    height: 300px;
    border: 1px solid black;
    resize: both;
    overflow:auto;
}
#container > div {
    flex: 1 1 33%;
    border: 1px solid black;
    box-sizing: border-box;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:30:10.883

[http://www.w3.org/TR/2011/WD-css3-flexbox-20110322/#flex-order](http://www.w3.org/TR/2011/WD-css3-flexbox-20110322/#flex-order)

It seems to me like the w3 standard for flexbox explicitly requires them to be either horizontal (LR/RL) or vertical (TB/BT), so I don't believe you can explicitly call for a 3x3 grid. As noted in the comments, the simplest solution seems to be three vertical flexbox divs with 3 horizontal flexbox divs inside of them (or the inverse). Unnecessary divs, indeed, but what else is CSS about? :)

You might look into grid-layout ([http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407/](http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407/) ) since that seems like it's the grid cousin of flexbox. (Of course, that would be if you're designing solely for IE 10... [http://caniuse.com/css-grid](http://caniuse.com/css-grid) )

# c# - 从 C# 将数据发布到 PHP

> ID：15016240
> 
> 赞同：1
> 
> 时间：2013-02-22T03:17:33.520
> 
> 标签：c#, php, post

嗨，我一直在尝试从我的 C# 代码将数据发布到 PHP webservice（第 3 方）。PHP web 服务说它需要一个参数`c`（缺少参数`c`是我得到的错误）。我正在使用 JSON 发送数据，但我不明白如何提供参数。如果有人能对此有所了解，那就太好了。以下是我的代码：

```
DropYa d = new DropYa();
List<DropYaUser> d1 = new List<DropYaUser>();
DropYaUser ds = new DropYaUser();
ds.action = "create";
ds.groupid = 10;
ds.name = "Test";
ds.manager_key = "test";
d1.Add(ds);

WebRequest request = WebRequest.Create(" http://dev.dropya.net/api/Group.php");
// Set the Method property of the request to POST.
request.Method = "POST";
// Create POST data and convert it to a byte array.
JavaScriptSerializer ser = new JavaScriptSerializer();//typeof(DropYaUser));

string postData = ser.Serialize(ds);
byte[] byteArray = Encoding.UTF8.GetBytes(postData);
// Set the ContentType property of the WebRequest.
request.ContentType = "application/json";

// Set the ContentLength property of the WebRequest.
request.ContentLength = byteArray.Length;
// Get the request stream.

Stream dataStream = request.GetRequestStream();
// Write the data to the request stream.
dataStream.Write(byteArray, 0, byteArray.Length);
// Close the Stream object.
dataStream.Close();
Console.Write("Wrote");
Console.Read();
// Get the response.
WebResponse response = request.GetResponse();
// Display the status.
Console.WriteLine(((HttpWebResponse)response).StatusDescription);
// Get the stream containing content returned by the server.
Console.Read();

dataStream = response.GetResponseStream();
Console.Read();
// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader(dataStream);
// Read the content.
string responseFromServer = reader.ReadToEnd();
// Display the content.
Console.WriteLine(responseFromServer);
// Clean up the streams.
reader.Close();
dataStream.Close();
Console.Read();
response.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:37:16.453

任何发布请求都将作为数据流读取。已发布表单的字段名称和值将以“c=ABC&d=123”之类的形式出现在流中，其中“c”和“d”是表单字段。当然，您可以在没有任何表单字段名称的情况下发布，但在这种情况下，它需要“c”。您想要做的是在您发布的数据前面加上“c=”。也许像这样修改您的 GetBytes 行：

```
byte[] byteArray = Encoding.UTF8.GetBytes("c=" + postData); 
```

# vb.net - 如何在 vb.net 中放置另一行字符串（仍然在一个短语中）？

> ID：15016241
> 
> 赞同：0
> 
> 时间：2013-02-22T03:17:48.920
> 
> 标签：vb.net, string, query-string, concatenation

我想把我的绳子剪成几行。我怎么能那样做？这是我要剪切的代码行（但它们仍在字符串中）。

```
sql = "INSERT INTO tblClientInfo (genClientID, fullName, address, comaker, colateral, atmPIN, principal, "
                & "interest, principalInWords, terms, interestPerMonth, principalperMonth, totalPayment, interestPercentage, "
                & " interestBal, principalBal, theDate, totalBal)" 
```

此代码返回错误。连接或切割长字符串的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:20:06.037

您需要通过为要继续的每一行加上一个空格后跟一个下划线来指示该行继续到下一行，如下所示：

```
sql = "INSERT INTO tblClientInfo (genClientID, fullName, address, comaker, colateral, atmPIN, principal, " _
  & "interest, principalInWords, terms, interestPerMonth, principalperMonth, totalPayment, interestPercentage, " _
  & " interestBal, principalBal, theDate, totalBal)" 
```

附加参考：http: [//msdn.microsoft.com/en-us/library/aa711641%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa711641%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:24:27.507

我喜欢`String.Concat()`，因为你不需要换行下划线，也不需要和号。只是看起来更干净。

```
sql = String.Concat( 
    "INSERT INTO tblClientInfo (genClientID, fullName, address, comaker, colateral, atmPIN, principal, ",
    "interest, principalInWords, terms, interestPerMonth, principalperMonth, totalPayment, interestPercentage, ",
    "interestBal, principalBal, theDate, totalBal)" ) 
```

# java - 在 Java 中，如何在不生成 String 对象的情况下从 HttpServletRequest 标头中提取密码？

> ID：15016250
> 
> 赞同：16
> 
> 时间：2013-02-22T03:18:59.533
> 
> 标签：java, security, servlets, passwords, http-headers

用于处理敏感数据（== 密码）的常见 Java 安全指南建议不要使用 String 对象来存储数据，而是使用字节或字符数组。我正在尝试在 HttpServlet 处理程序中应用此指南。特别是，我使用了一种类似基本身份验证的方法，其中凭据在标头中传递（这是一个 GET 请求，所以没有正文）。

我遇到的问题是，在不生成 String 对象的情况下似乎无法访问标头数据，这违反了从一开始的指导方针。我已经非常彻底地搜索了一个解决方案，但没有找到任何相关的讨论。有人对这个问题有任何见解吗？

注意：这是通过 HTTPS 进行的，因此这里不存在连接安全问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T03:48:32.290

简单的答案是您无法以字符串以外的任何其他形式获取参数。至少，不使用标准的 servlet API。但是有几个可能的“退出”。

1.  如果您准备变得非常丑陋，您实际上可以打破 String 对象的抽象，并覆盖并覆盖字符。（如果你准备好打破规则，字符串实际上是可变的。这是少数几种情况之一，这可能是合理的。）

2.  在你的 web 容器的实现中可能有一个非标准的 API 扩展（比如）`HttpServletRequest`来执行此操作。如果没有，您可以获取源代码并添加一个。（假设您使用的是开源 Web 容器。）

* * *

话虽如此，IMO 对 Java 安全性的“无条件”方法是被误导的，或者至少在它所实现的方面被高估了。

“无字符串”方法可以防止某些东西可能会在您的应用程序的地址空间中搜寻，找到看起来像字符串的东西，并嗅出可能的密码。理论上，这可以通过以下方式完成：

*   一种破坏 JVM 执行模型并查看原始内存的 hack，
*   附加一个 Java 调试器并遍历可访问的对象，
*   使用“/dev/mem”或类似的从外部读取进程内存，
*   访问硬盘驱动器上程序交换映像的剩余部分，或
*   不知何故导致它核心转储并读取转储。

然而，除了第一个之外，所有这些都要求坏人已经破坏了系统的安全性。如果坏人这样做了，还有其他（可能更简单）的方法可以从您的程序中窃取密码……“无字符串”方法无法阻止。

如果您担心利用 Java 安全漏洞读取原始内存的黑客攻击，那么该漏洞可能会以其他方式使用；例如，注入代码以改变代码处理密码的方式。

因此，总而言之，“无条件”可以防止非常困难的黑客攻击，或者防止您的安全性*已经被*破坏的情况。IMO，不值得付出努力……除非您*需要*实施军事级安全性。

# symfony - knp 分页器仅适用于数组

> ID：15016252
> 
> 赞同：2
> 
> 时间：2013-02-22T03:19:10.207
> 
> 标签：symfony, doctrine, paginator, knppaginator

我在 Symfony 2 中使用 Knp Paginator Bundle。

尝试将 Doctrine 查询传递给分页器时，我不断收到以下错误：

```
Fatal error: Call to a member function toArray() on a non-object in /var/www/adwind/vendor/knplabs/knp-components/src/Knp/Component/Pager/Event/Subscriber/Paginate/Doctrine/ORM/QuerySubscriber.php on line 67 Call Stack: 0.0000 635448 1\. {main}() /var/www/adwind/web/app_dev.php:0 0.0166 6042728 2\. Symfony\Component\HttpKernel\Kernel->handle() /var/www/adwind/web/app_dev.php:25 0.2128 10057152 3\. Symfony\Bundle\FrameworkBundle\HttpKernel->handle() /var/www/adwind/app/bootstrap.php.cache:617 0.2129 10058808 4\. Symfony\Component\HttpKernel\HttpKernel->handle() /var/www/adwind/app/bootstrap.php.cache:1566 0.2129 10058808 5\. Symfony\Component\HttpKernel\HttpKernel->handleRaw() /var/www/adwind/app/bootstrap.php.cache:1390 2.1839 21851024 6\. call_user_func_array() /var/www/adwind/app/bootstrap.php.cache:1426 2.1840 21851640 7\. Adwind\BannerBundle\Controller\BannerController->listAction() /var/www/adwind/app/bootstrap.php.cache:1426 2.2085 22257080 8\. Knp\Component\Pager\Paginator->paginate() /var/www/adwind/src/Adwind/BannerBundle/Controller/BannerController.php:76 2.2173 22401584 9\. Symfony\Component\HttpKernel\Debug\ContainerAwareTraceableEventDispatcher->dispatch() /var/www/adwind/vendor/knplabs/knp-components/src/Knp/Component/Pager/Paginator.php:97 2.2173 22403912 10\. Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher->dispatch() /var/www/adwind/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Debug/ContainerAwareTraceableEventDispatcher.php:78 2.2175 22406864 11\. Symfony\Component\EventDispatcher\EventDispatcher->dispatch() /var/www/adwind/app/cache/dev/classes.php:5072 2.2176 22410128 12\. Symfony\Component\HttpKernel\Debug\ContainerAwareTraceableEventDispatcher->doDispatch() /var/www/adwind/app/cache/dev/classes.php:4854 2.2254 22490968 13\. call_user_func() /var/www/adwind/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Debug/ContainerAwareTraceableEventDispatcher.php:139 2.2254 22491024 14\. Knp\Component\Pager\Event\Subscriber\Paginate\Doctrine\ORM\QuerySubscriber->items() /var/www/adwind/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Debug/ContainerAwareTraceableEventDispatcher.php:139 
```

我正在使用 github 自述文件中的示例：

```
$em    = $this->get('doctrine.orm.entity_manager');
$dql   = "SELECT a FROM AdwindBannerBundle:Banner a";
$query = $em->createQuery($dql);
$pagination = $this->get('knp_paginator')->paginate($query,$page,10); 
```

如果我传递结果数组而不是查询本身，一切正常。IE ：

```
$query = $em->createQuery($dql)->getResult(); 
```

但据我了解，您应该能够传递查询本身，甚至是查询生成器。我也想象这样我得到了所有的结果，而不仅仅是一页。

ps：我正在使用分页器包的 dev-master 版本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:33:20.467

尝试在 composer.json 中使用特殊版本的 knp-сomponents

“knplabs/knp 组件”：“1.2.1”，

我认为当前版本有一个错误

至少现在它对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T08:09:25.433

这对我有用：

```
$em = $this->getDoctrine()->getEntityManager();
$query = $em->createQueryBuilder();

$query->select(array('b'))
        ->from('MyMainBundle:Customer', 'b')
        ->orderBy('b.updated_at', 'desc');

$paginator = $this->get('knp_paginator');
$requests = $paginator->paginate($query, 
                                $this->get('request')->query->get('page', 1), 5); 
```

目前分页器可以分页：

*   大批
*   教义\ORM\查询
*   教义\ORM\QueryBuilder
*   教义\ODM\MongoDB\查询\查询
*   教义\ODM\MongoDB\Query\Builder
*   Doctrine\Common\Collection\ArrayCollection - 任何学说关系集合，包括
*   ModelCriteria - 推进 ORM 查询
*   Solarium_Client 和 Solarium_Query_Select 作为元素的数组

# lwjgl - 将我的游戏编译成可执行 Jar 时，游戏无法运行

> ID：15016253
> 
> 赞同：0
> 
> 时间：2013-02-22T03:19:12.690
> 
> 标签：lwjgl, executable-jar, slick2d

我使用 Slick 2D 和 LWJGL 创建了一个小游戏。在 Eclipse 中测试程序时，一切正常。一旦我尝试运行导出的 jar，我就会在终端中收到以下消息：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)
at java.lang.Runtime.loadLibrary0(Runtime.java:845)
at java.lang.System.loadLibrary(System.java:1084)
at org.lwjgl.Sys$1.run(Sys.java:73)
at java.security.AccessController.doPrivileged(Native Method)
at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
at org.lwjgl.Sys.loadLibrary(Sys.java:95)
at org.lwjgl.Sys.<clinit>(Sys.java:112)
at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
at org.newdawn.slick.AppGameContainer$1.run(AppGameContainer.java:39)
at java.security.AccessController.doPrivileged(Native Method)
at org.newdawn.slick.AppGameContainer.<clinit>(AppGameContainer.java:36) 
```

我真的不知道该怎么办。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:22:39.603

使用[JarSplice](http://ninjacave.com/jarsplice) :)

您只需向它展示在哪里可以找到本机文件、LWJGL 和 Slick JAR，以及您使用 eclipse 创建的 JAR。

# c++ - 无法从 QQmlPropertyMap 的子类中的 QML 调用 slot 或 Q_INVOKABLE

> ID：15016258
> 
> 赞同：8
> 
> 时间：2013-02-22T03:19:46.727
> 
> 标签：c++, qt, qml, qt5, qtcore

我正在尝试试驾`QQmlPropertyMap`课程。如果我可以对它进行子类化，它似乎可以很好地满足我的需求。[这里](http://doc-snapshot.qt-project.org/5.0/qtqml/qqmlpropertymap.html)的文档甚至提供了一些关于如何对其进行子类化的基本说明。所述文档还表明该类派生自`QObject`.

对于它的价值，我在 Qt 5.0.0 上使用 QtCreator 2.6.1 和 QtQuick 2.0。

我的 main.qml：

```
import QtQuick 2.0

Rectangle {
    width: 360
    height: 360
    Text {
        text: owner.field
        anchors.centerIn: parent
    }
    MouseArea {
        anchors.fill: parent
        onClicked: {
            owner.testFunc();
        }
    }
} 
```

我的 main.cpp：

```
#include <QtGui/QGuiApplication>
#include "qtquick2applicationviewer.h"
#include "TestMap.h"
#include <QQmlContext>

int main(int argc, char *argv[])
{
    TestMap* map = new TestMap();
    QGuiApplication app(argc, argv);
    QtQuick2ApplicationViewer viewer;
    QQmlContext* ctxt = viewer.rootContext();
    ctxt->setContextProperty("owner", map);
    viewer.setMainQmlFile(QStringLiteral("qml/TestMap/main.qml"));
    viewer.showExpanded();
    return app.exec();
} 
```

我的TestMap.h

```
#ifndef TESTMAP_H
#define TESTMAP_H

#include <QObject>
#include <QQmlPropertyMap>
#include <QDebug>

class TestMap: public QQmlPropertyMap  // QObject
{
    Q_OBJECT

public:
    TestMap(QObject* parent = 0): QQmlPropertyMap(this, parent)  // QObject(parent)
    {
        insert("field", "value");   // Comment this out
    }
    TestMap(const TestMap& value) { }
    virtual ~TestMap() {}

public slots:
    void testFunc()
    {
        qDebug() << "Success!";
    }
};

Q_DECLARE_METATYPE(TestMap)
#endif 
```

当我运行时，我得到一个窗口，上面写着“价值”，正如我所期望的那样。但是当我点击窗口时，我得到一个控制台输出说

```
TypeError: Property 'testFunc' of object TestMap(0xaaa0b8) is not a function 
```

我一直在寻找类似的问题，但所有搜索结果都是关于忘记包含`Q_OBJECT`宏的人。这一定是我在代码中做错了什么，因为如果我进行了 TestMap 文件注释中指示的所有更改（并将 main.cpp 和 main.qml 保持原样），我会收到`qDebug`我期望的消息.

我不确定我是否应该`Q_DECLARE_METATYPE`这样做（我认为 2-arg protected 构造函数应该为我做这件事），但无论如何它都不起作用。

为了记录，我唯一需要改变才能让它工作的是：

1) 源自`QObject`而不是`QQmlPropertyMap`。

2）将构造函数更改为：

```
TestMap(QObject* parent = 0): QObject(parent) {} 
```

就是这样。由于它在我不更改 main.cpp、main.qml 或插槽本身的任何内容时有效，因此我必须得出结论，这些都没有问题。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T14:32:10.123

现在在 Qt 5.1.0 及更高版本中已修复此问题。有关详细信息，请参阅以下 codereview url：

[https://codereview.qt-project.org/#change,57418](https://codereview.qt-project.org/#change,57418)

# android - 如何制作清单 可打包？

> ID：15016259
> 
> 赞同：6
> 
> 时间：2013-02-22T03:19:48.587
> 
> 标签：android, list, enums, bundle, parcelable

我正在尝试使我的课程可打包，但它里面有一个枚举列表。

我已经在这里看到了如何使用单个枚举来做到这[一点](http://idlesun.blogspot.com.br/2012/12/android-parcelable-example-1-boolean.html)......

我怎么能这样做？

谢谢！;)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T12:31:40.380

好的，我只是使用之前引用的链接中的信息解决了这个问题。

这就是我所做的：

```
public enum Improvement {ENUM1, ENUM2, etc}

public void writeToParcel(Parcel dest, int flags) {
    ...
    List<String> improvementStrings = new ArrayList<String>();
    for (Improvement improvement : improvements) {
        improvementStrings.add(improvement.name());
    }
    dest.writeList(improvementStrings);
}

public void readFromParcel(Parcel in) {
    ...
    List<String> improvementStrings = new ArrayList<String>();
    in.readList(improvementStrings, null);
    for (String improvementString : improvementStrings) {
        improvements.add(Improvement.valueOf(improvementString));
    }
} 
```

# ios - iCloud 是否会将 Documents 目录中的所有文件上传到云服务器？

> ID：15016260
> 
> 赞同：0
> 
> 时间：2013-02-22T03:19:50.153
> 
> 标签：ios, file, icloud, universal, uidocument

我的印象是 iCloud 只适用于 UIDocument 文件。其他类型呢？

此外，如果我的用户的文件被上传到云中，如果我的应用程序是通用的，他可以在他的所有设备上使用这些文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:00:46.983

根据 Apple 的[文件系统编程指南](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)，

> 以以下两种方式之一处理支持文件——应用程序下载或生成并可以根据需要重新创建的文件：
> 
> 1.  在 iOS 5.0 及更早版本中，将支持文件放在 /Library/Caches 目录中，以防止它们被备份
> 2.  在 iOS 5.0.1 及更高版本中，将支持文件放在 /Library/Application Support 目录中，并对它们应用 com.apple.MobileBackup 扩展属性。此属性可防止将文件备份到 iTunes 或 iCloud。如果您有大量支持文件，您可以将它们存储在自定义子目录中，并将扩展属性仅应用于该目录。

iCloud 也会备份库下的内容。

回答是的，当然，如果用户的文件被上传到云端，那么如果应用程序是通用的，那么他可以在他的所有设备上使用这些文件，因为 iCloud 旨在成为粘合你的 iPhone、iPad 和 Mac 的无形魔法（如果你使用一个） 一起。

# php - 仅根据需要在 PHP 数组中添加项目

> ID：15016262
> 
> 赞同：3
> 
> 时间：2013-02-22T03:20:14.087
> 
> 标签：php, loops

我有一些代码想要放入我的网站，并在`<body>`使用位于设计之外的“天赋”（div）后立即提供了一个空间。这是代码：

```
//Add Flair Containers as needed
if($flairs>0){
  echo "<!--Flair Graphics (if needed)-->\n";
    while($fQty = --$flairs+1){ //-- subracts 1, +1 accounts for 1 being 0
       $flair = array($flair1, $flair2, $flair3);
        foreach($flair as $flairCode){
          echo "<div id=\"flair-".$fQty++."\">".$flairCode."</div>\n";
        };
    };
}; 
```

它可以正确打印，其中内容 = $flair1、$flair2 等等。

```
<div id="flair-1">Content1</div>
<div id="flair-2">Content2</div>
<div id="flair-3">Content3</div> 
```

但如果 $flair2/$flair3 为空，它仍然会打印一个 div。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:27:06.607

在您的`foreach`循环中，您可以检查该值是否是，如果是[`empty`](http://php.net/manual/en/function.empty.php)，则[`continue`](http://php.net/manual/en/control-structures.continue.php)（即跳过）到下一个值。

像这样：

```
if($flairs>0){
  echo "<!--Flair Graphics (if needed)-->\n";
    while($fQty = --$flairs+1){ //-- subracts 1, +1 accounts for 1 being 0
       $flair = array($flair1, $flair2, $flair3);
        foreach($flair as $flairCode){
          if (empty($flairCode)) continue;
          echo "<div id=\"flair-".$fQty++."\">".$flairCode."</div>\n";
        };
    };
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:27:56.380

我怀疑您可以简单地`if($flairCode)`添加到您的回声语句之前。这将使您的内部循环：

```
foreach($flair as $flairCode){
    if($flairCode) echo "<div id=\"flair-".$fQty++."\">".$flairCode."</div>\n";
}; 
```

需要注意的几点：

*   由于`$flair`数组总是相同的，所以在循环之外构造它（这也可以让你只评估一次条件。
*   使用`$fQty++`不足以保证唯一的 ID，特别是因为每次它达到`while`该值时都会重置。我建议`$fQty`不应该成为`while`条件的一部分，而只是作为一个独立的计票。
*   停止使用双引号。他们很慢。

# animation - 动画和精灵表生成软件

> ID：15016266
> 
> 赞同：0
> 
> 时间：2013-02-22T03:20:57.153
> 
> 标签：animation, sprite

有没有制作精灵动画和制作精灵表的软件？对于每一帧来说，使用 Photoshop 的图层非常烦人......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:22:52.813

确实有，Sprite Animation Sowtware 允许您使用静态纹理创建动画并将其保存为 sprite sheet 或 .gif 动画。请参阅[http://spritetools.com/中的详细信息](http://spritetools.com/)

# javascript - 如何在 Windows 和 Linux 上使用 Javascript 获取 MAC 地址？

> ID：15016268
> 
> 赞同：2
> 
> 时间：2013-02-22T03:21:32.933
> 
> 标签：javascript, mac-address

如何使用 Javascript 获取 PC 的 MAC 地址？

它*应该*可以在 Windows 和 Linux 上运行。

我认为它应该是这样的：

```
macs.getMacAddress();
            var macadd = document.macaddressapplet.getMacAddress(); 
```

# ios - iAd 覆盖 phonegap 中的应用内容？

> ID：15016269
> 
> 赞同：1
> 
> 时间：2013-02-22T03:21:46.717
> 
> 标签：ios, objective-c, cordova, iad

我有这个`webViewDidFinishLoad`：

```
- (void)setupAdBanner {
    adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    CGRect adFrame = adView.frame;
    if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait
       || [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown) {
        adView.currentContentSizeIdentifier =
        ADBannerContentSizeIdentifierPortrait;
        adFrame.origin.y = self.view.frame.size.height-adView.frame.size.height;
    } else {
        adView.currentContentSizeIdentifier =
        ADBannerContentSizeIdentifierLandscape;
        adFrame.size.width = adView.frame.size.width;
        adFrame.origin.y = self.view.frame.size.height-adView.frame.size.height;
    }
    adView.frame = adFrame;

    [self.view addSubview:adView];
} 
```

这与我的 phonegap 应用程序中的 HTML 内容重叠。如何调整我的 webview 框架大小以适应广告横幅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:13:57.333

我有这个确切的问题。我在这里写了关于我的解决方案的博客[http://hawkinbj.wordpress.com/2013/04/16/implement-iad-banner-ads-without-covering-uiwebview-in-phonegap/](http://hawkinbj.wordpress.com/2013/04/16/implement-iad-banner-ads-without-covering-uiwebview-in-phonegap/)

您需要实现 ADBannerViewDelegateProtocolReference。在 MainViewController.h 中：

```
@interface MainViewController : CDVViewController <ADBannerViewDelegate> 
{
    ADBannerView *adView;
}
@end 
```

其余步骤在 MainViewController.m 中。

在 webViewDidFinishLoad 中：

```
adView.delegate = self; 
```

添加这两个方法：

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner 
{
    CGRect resizedWebView = [super webView].frame;
    resizedWebView.size.height = adView.frame.origin.y;
    [super webView].frame = resizedWebView;
    [self.view bringSubviewToFront:adView];
    adView.hidden = NO;
} 

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    CGRect resizedWebView = [super webView].frame;
    resizedWebView.size.height = self.view.frame.size.height;
    [super webView].frame = resizedWebView;
    adView.hidden = YES;
} 
```

神奇的是 `[self.view bringSubviewToFront:adView];`

# extjs - 如何使用 console.log 记录商店或模型的内容

> ID：15016271
> 
> 赞同：2
> 
> 时间：2013-02-22T03:22:25.050
> 
> 标签：extjs, extjs4, extjs4.1

我正在使用 ExtJS 4.1.3。我有以下语句在控制台上记录商店的内容（Firebug/Chrome）

```
console.log('Stored Record : ' + grid.getStore().getProxy().getReader().rawData); 
```

我得到输出

```
Stored Record : [object Object] 
```

内容在网格上正确显示。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:34:42.123

问题是您`'Stored Record : '`使用加号将文本与对象连接起来`+`，这使得萤火虫尝试将对象转换为字符串。

当 firebug 将对象转换为字符串时，它看起来像`[object Object]`. 相反，您应该只打印对象本身：

```
console.log(grid.getStore().getProxy().getReader().rawData); 
```

如果要在加载后打印商店中的所有记录，这会更好：

```
grid.getStore().each(function(record) {
    console.log(record);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:21:10.247

尝试

```
console.log('Stored Record : ' , grid.getStore().getProxy().getReader().rawData); 
```

参考：[Outputting_text_to_the_console](https://developer.mozilla.org/en-US/docs/DOM/console#Outputting_text_to_the_console)

# ios - Google Maps iOS 对CalloutAccessoryView 的替换？

> ID：15016272
> 
> 赞同：3
> 
> 时间：2013-02-22T03:22:28.527
> 
> 标签：ios, google-maps, google-maps-sdk-ios

只是想知道`rightCalloutAccessoryView`Google Maps SDK 中的（下面的蓝色按钮）替换是什么？或者我需要制作一个自定义视图......

![苹果地图标注](../Images/7d4c6dc954e8202614fc8a46dfe13518.png)

**编辑：**

有没有比`GMSMapViewDelegate`'s 更好的选择：

`- (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(id<GMSMarker>)marker;`?

（对于用户来说，您可以点击信息窗口并不明显......）

**编辑 2**

这个*Plane Finder - Live Flight Status Tracker*似乎使用 iOS SDK 的默认标注：http: [//bit.ly/PFinder](http://bit.ly/PFinder)。你是怎样做的？

![飞机查找器 - 实时航班状态跟踪器](../Images/189591f61744149b06027c2c531cc824.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:12:19.040

找到了！:)

有关示例项目，请参见[https://github.com/ryanmaxwell/GoogleMapsCalloutView :)](https://github.com/ryanmaxwell/GoogleMapsCalloutView)

![在此处输入图像描述](../Images/6860793cacfd1ba68b516dece9d3efee.png)

# list - 包含haskell中列表成员的第二个元素的列表

> ID：15016277
> 
> 赞同：2
> 
> 时间：2013-02-22T03:22:40.160
> 
> 标签：list, haskell

我正在尝试解决前一年的一个旧的中期问题，但我在这个问题上遇到了很多麻烦。

使用列表推导，实现一个具有以下类型的函数：

```
collectSecond :: [[Int]] -> [Int] 
```

这样 (collectSecond xs) 返回一个列表，其中包含 xs 的列表成员的第二个元素，长度小于 2 的列表成员除外。例如：

```
collectSecond [[1,2,3], [4], [], [5,6]] ~> [2,6]
collectSecond [[1], [], [2]] ~> []
collectSecond [] ~> [] 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:48:26.830

您可以在列表推导中使用模式匹配来获取第二个元素，如下所示：

```
collectSecond xs = [x2 |  x1:x2:rest <-  xs] 
```

这里 x2 匹配 xs 包含的每个列表的第二个元素（如果有）。

```
Prelude> collectSecond [[1,2,3], [4], [], [5,6]]
[2,6] 
```

如果没有第二个元素，则不会将任何元素添加到该子列表的列表中。例如，参见上面示例中的 [4] 和 []。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:41:18.350

使用基本递归实现也很简单：

```
collectSecond ((x0:x1:_):ys) = x1:(collectSecond ys)
collectSecond (_:ys)         = collectSecond ys
collectSecond []             = [] 
```

（这里我们单独处理每个元素，如果有第二个元素，则将其添加到我们正在创建的列表中，如果没有第二个元素则跳过它）

你也可以使用[`concatMap`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aconcatMap)：

```
collectSecond xs = concatMap seconds xs
    where seconds (x0:x1:_) = [x1]
          seconds _         = [] 
```

# python - 压缩 Datetime 代码，Hook Appindicator3 菜单调用 + 相对图标路径，代码审查

> ID：15016278
> 
> 赞同：0
> 
> 时间：2013-02-22T03:22:49.760
> 
> 标签：python, datetime, gtk

![Q1 所需的图像](../Images/337a947a612b05ba98bcbe988c4a0e6c.png)

你好，

我是这个新手（请像我这样回答）。修复我的（第二个）问题后，所有代码都应该可以轻松运行。它实际上在我的机器上运行良好，但可能还不是你的。我试图在任何地方为您发表评论，以使某人更容易阅读。这在 Ubuntu 12.10 机器上运行，但您不需要运行 Linux 来解决我的问题！

已解决 1\. 代码审查：当您浏览代码时，我将不胜感激任何有关如何以更好、更合适的方式浓缩或做事的意见。我剩下的问题实际上只是我已经知道应该解决的问题。但是，如果您在我的编码风格等中发现了其他东西，*请*坦率地说。为所有好的评论点赞。

已解决：2.相对图标路径：在以下位置：

```
/home/mh00h/workspace/issindicator/src/International_Space_Station_clip_art.svg 
```

这是与此脚本相同的文件夹的绝对路径。我不希望这样，我希望这个脚本可以在任何人的机器上运行。我试过这些：

```
$HOME/workspace...
(nothing in front) International_Space_Station_clip_art.svg
./International_Space_Station_clip_art.svg 
```

但那些没有用。上面的图片是我正在尝试使用的（是的，我知道我列出了 SVG 而不是 png，imgur 限制）。[这](http://developer.ubuntu.com/api/ubuntu-12.04/python/AppIndicator3-0.1.html "这里")是文档。它谈到了“图标主题路径”......也许会以某种方式做到这一点？或者也许有一个标准目录，所有程序员都应该存储图标？

**3\. 集中我的日期时间功能**：真的，我很幸运能够让它工作。我的方式是迂回，但据我所知，它有效。我非常有信心有更好的方法来解决这个烂摊子！你会在脚本的底部找到一堆日期时间的东西。

已解决：4\. Appindicator3 Hook：我希望 GTK 仅在调用菜单时刷新，而不是每秒运行一次。这部分回答[here](https://stackoverflow.com/questions/14983279/update-gtk-menuitem-countdown-each-second-and-periodic-function-call "这里")，但我真的不明白如何实现“实现”。（希望这是问这个问题的正确地方吗？）

***谢谢！***

```
#!/usr/bin/env python
import json, urllib2, time, math, datetime, os, webbrowser
from dateutil import tz

#indicator
from gi.repository import Gtk, GObject
from gi.repository import AppIndicator3 as appindicator

class indicator():
    def __init__(self):

        #######Set this to "False" if IssIndicator should hide it's icon during normal runtime (default = True)
        self.isiconhidden = True
        #

        #create indicator
        self.ind = appindicator.Indicator.new (
                        "issindicator",
                        "/home/mh00h/workspace/issindicator/src/International_Space_Station_clip_art.svg",
                        #"indicator-messages",
                        appindicator.IndicatorCategory.APPLICATION_STATUS)
        if self.isiconhidden == True:
            self.ind.set_status (appindicator.IndicatorStatus.PASSIVE)
        else:
            self.ind.set_status (appindicator.IndicatorStatus.ACTIVE)

        #this is used to keep track of the gtk refresh period
        self.refreshvalue = False

        #dropdown menu
        #current pass menu items
        self.menu = Gtk.Menu()
        self.curpass = Gtk.MenuItem("not refreshed")
        self.curpass.connect("activate", self.checkiss)
        self.menu.append(self.curpass)

        self.curpassdur = Gtk.MenuItem(" ")
        self.menu.append(self.curpassdur)

        self.curpassrise = Gtk.MenuItem(" ")
        self.menu.append(self.curpassrise)

        self.curpassset = Gtk.MenuItem(" ")
        self.menu.append(self.curpassset)

        self.sep1 = Gtk.SeparatorMenuItem()
        self.menu.append(self.sep1)

        #future pass items
        self.futpass = Gtk.MenuItem(" ")
        self.futpass.connect("activate", self.onurl)
        self.menu.append(self.futpass)

        self.sep2 = Gtk.SeparatorMenuItem()
        self.menu.append(self.sep2)

        #Options items

        self.aboutmenu = Gtk.MenuItem("About")
        self.aboutmenu.connect("activate", self.onabout)
        self.menu.append(self.aboutmenu)

        self.quit = Gtk.MenuItem("Quit")
        self.quit.connect("activate", self.quitnow)
        self.menu.append(self.quit)

        self.curpass.show()
        self.sep1.show()
        self.futpass.show()
        self.sep2.show()
        self.aboutmenu.show()
        self.quit.show()
        self.ind.set_menu(self.menu)

        #get iss data at first run
        self.updatecache()
        self.checkiss()

        Gtk.main()

    #functions
    def hideicon(self, w=None):
        self.ind.set_status (appindicator.IndicatorStatus.PASSIVE)

    def showicon(self, w=None):
        self.ind.set_status (appindicator.IndicatorStatus.ACTIVE)

    def quitnow(self, w=None):
        Gtk.main_quit()

    #open browser for more tracking info
    def onurl(self, w=None):
        webbrowser.open("http://www.n2yo.com/passes/")

    def onabout(self,widget):
        widget.set_sensitive(False)
        ad=Gtk.AboutDialog()
        ad.set_name("aboutdialog")
        ad.set_version("0.1")
        ad.set_copyright('Copyrignt (c) 2013 mh00h')
        ad.set_comments('Indicating ISS Zarya')
        ad.set_license(''+
        'This program is free software: you can redistribute it and/or modify it\n'+
        'under the terms of the GNU General Public License as published by the\n'+
        'Free Software Foundation, either version 3 of the License, or (at your option)\n'+
        'any later version.\n\n'+
        'This program is distributed in the hope that it will be useful, but\n'+
        'WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n'+
        'or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n'+
        'more details.\n\n'+
        'You should have received a copy of the GNU General Public License along with\n'+
        'this program.  If not, see <http://www.gnu.org/licenses/>.')
        ad.set_website('https://launchpad.net/~mh00h/+archive/issindicator')
        ad.set_website_label('ISSIndicator Homepage')
        ad.set_authors(['mh00h <abcd@abcd.com'])
        ad.run()
        ad.destroy()
        widget.set_sensitive(True)

    #how often to run checkiss
    def setrefresh(self, r):
        #this clause is required to keep script from hanging
        if r != self.refreshvalue:
            self.refreshvalue = r
            try:
                self.reftime = GObject.source_remove(True)
            except:
                pass        
            try:
                self.reftime = GObject.timeout_add(r, self.checkiss)
            except:
                pass

    #
    def updatecache(self, w=None):
        #this will show in the menu until the update process completes
        self.passingstatus = 'not updated yet'
        #get ISS data from api
        self.ip = urllib2.urlopen("http://api.exip.org/?call=ip").read()
        self.geoip = json.load(urllib2.urlopen("http://freegeoip.net/json/"+self.ip))
        self.data = json.load(urllib2.urlopen("http://api.open-notify.org/iss/?lat="+str(self.geoip["latitude"])+"&lon="+str(self.geoip["longitude"])+"&alt=280&n=47"))
        self.data = {"message": "success", "request": {"latitude": 45.0, "passes": 3, "altitude": 280, "longitude": -81.0, "datetime": 1361502063}, 
                 "response": [{"duration": 542, "risetime": time.time()+10}, {"duration": 642, "risetime": 1361560774}, {"duration": 593, "risetime": 1361566621}]}

    def checkiss(self, w=None):
        #so as to not overload api servers, this runs as a separate process
        #this updates the timers
        self.n = 0
        self.passingstatus = "ISS Zarya is below the horizon"

        #check if we've gone through cached iss passings and update api if needed
        try:
            #ignore errors in case internet is not accessible
            #have a buffer of 5 passes remaining before updating cache
            #at 2 passes left, stop the program to prevent the rest of the program from throwing codes
            if time.time() > self.data['response'][len(self.data['response'])-5]['risetime']:
                self.updatecache
        except:
            if time.time() > self.data['response'][len(self.data['response'])-2]['risetime']:
                os.system("notify-send 'ISS Indicator tried multiple times to update its satellite cache but has run out of its cached track.' 'This may be due to a bad internet connection. The application will now quit.'")
                Gtk.main_quit()

        #get current time
        current_utc = datetime.datetime.utcnow()
        current_utc = current_utc.replace(tzinfo=tz.gettz('UTC'))

        #iterate over all iss passes
        for k in self.data['response']:
            duration = self.data['response'][self.n]['duration']
            risetime = self.data['response'][self.n]['risetime']
            settime = risetime + duration

            #if this iteration matches with the current time, do...
            if risetime <= time.time() <= settime:
                #make the countdown values for the current pass tick
                #rise time calculations and date conversions to string format
                currisetime_utc = datetime.datetime.utcfromtimestamp(self.data['response'][self.n]['risetime'])
                currisetime_utc = currisetime_utc.replace(tzinfo=tz.gettz('UTC'))
                currisetime_tz = currisetime_utc.astimezone(tz.tzlocal())
                currisetime_tzstr = str("%02d" % (currisetime_tz.hour))+':'+str("%02d" % (currisetime_tz.minute))+':'+str("%02d" % (currisetime_tz.second))
                #set time calculations and durations
                cursettime_utc = datetime.datetime.utcfromtimestamp(self.data['response'][self.n]['risetime']+self.data['response'][self.n]['duration'])
                cursettime_utc = cursettime_utc.replace(tzinfo=tz.gettz('UTC'))
                cursettime_tz = cursettime_utc.astimezone(tz.tzlocal())
                curremainingtimeleft = cursettime_utc - current_utc
                curduration = cursettime_utc - currisetime_utc

                z= curremainingtimeleft.seconds
                zhours = z/60/60
                zminutes = z/60-zhours*60
                zseconds = z-zhours*60*60-zminutes*60
                curremainingtimeleftstr = str(zhours)+':'+str("%02d" % (zminutes))+':'+str("%02d" % (zseconds))

                z= curduration.seconds
                zhours = z/60/60
                zminutes = z/60-zhours*60
                zseconds = z-zhours*60*60-zminutes*60
                curdurationstr = str(zhours)+':'+str("%02d" % (zminutes))+':'+str("%02d" % (zseconds))

                cursettime_tzstr = str("%02d" % (cursettime_tz.hour))+':'+str("%02d" % (cursettime_tz.minute))+':'+str("%02d" % (cursettime_tz.second))

                #since the ISS is presently overhead, show the icon and update GTK menuitems to show timers on the ISS pass
                self.showicon()
                self.passingstatus = "ISS Zarya is above the horizon!"
                self.curpass.get_child().set_text(self.passingstatus)
                self.curpassdur.get_child().set_text("Duration: "+curdurationstr+" ("+curremainingtimeleftstr+" remaining)")
                self.curpassdur.show()
                self.curpassrise.get_child().set_text("Rise time: "+currisetime_tzstr)
                self.curpassrise.show()
                self.curpassset.get_child().set_text("Set time: "+cursettime_tzstr)
                self.curpassset.show()
                break
            else:
                #if this iteration of ISS passes does not match with current time, then increase self.n
                self.n += 1

        #regardless of results show the next pass time
        #if the ISS is overhead, use the next dictionary key for data 
        if self.n != len(self.data['response']):
            nextrisetime_utc = datetime.datetime.utcfromtimestamp(self.data['response'][self.n+1]['risetime'])
        else:
            #if the ISS is not overhead, use the first key in the dictionary
            nextrisetime_utc = datetime.datetime.utcfromtimestamp(self.data['response'][0]['risetime'])
        #calculate the next rise time and make timers
        nextrisetime_utc = nextrisetime_utc.replace(tzinfo=tz.gettz('UTC'))
        nextrisetime_tz = nextrisetime_utc.astimezone(tz.tzlocal())
        remainingtimeleft = nextrisetime_utc - current_utc
        z= remainingtimeleft.seconds
        zhours = z/60/60
        zminutes = z/60-zhours*60
        zseconds = z-zhours*60*60-zminutes*60
        remainingtimeleftstr = str(zhours)+':'+str("%02d" % (zminutes))+':'+str("%02d" % (zseconds))
        nextrisetime_tzstr = str("%02d" % (nextrisetime_tz.hour))+':'+str("%02d" % (nextrisetime_tz.minute))+':'+str("%02d" % (nextrisetime_tz.second))

        #update GTK menuitem
        self.futpass.get_child().set_text("Next Pass: "+nextrisetime_tzstr+" ("+remainingtimeleftstr+")")

        #if the ISS is not above the horizon, refresh GTK only once its time for the icon to be visible 
        if self.passingstatus != "ISS Zarya is above the horizon!":
            self.setrefresh(remainingtimeleft.seconds*1000+100)
            #self.setrefresh(1000)
            self.curpass.get_child().set_text(self.passingstatus)
            self.curpassdur.hide()
            self.curpassrise.hide()
            self.curpassset.hide()
            if self.isiconhidden == True:
                self.hideicon()
        else:
            #otherwise, refresh once a second to show the timers ticking in the menu
            #test if the menu is active instead of always running like in this example
            ####MISSING CODE HERE#####  DONT KNOW HOW TO DO IT, SO JUST SETTING TO 1 SEC
            self.setrefresh(1000)

        #for when setrefresh calls this function
        return True

if __name__ == '__main__':
    issindicator = indicator() 
```

# matrix-multiplication - 如何在C中读取具有给定维度的矩阵

> ID：15016287
> 
> 赞同：0
> 
> 时间：2013-02-22T03:23:26.610
> 
> 标签：matrix-multiplication

我到处寻找，我无法完全弄清楚这一点。你如何读入 C 一个已经给定维度的矩阵？矩阵位于这样布局的 .dat 文件中。

2 4

1 2 3 4

9 8 7 6

显然 2 对应于行，4 对应于列，但我不知道如何应用它。我只需要找到一种方法将这个 dat 文件放入我的程序中，所以假设我只需要读取和打印它们（我已经想出了如何进行矩阵乘法部分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:33:49.307

由于给出了矩阵维度并假设您拥有数据文件 data.dat。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{ 
FILE* file=fopen("data.dat","r");
int x,y;
fscanf(file,"%d %d",&x,&y);
//Read the matrix dimensions
int **A=(int**)malloc(sizeof(int*)*x);
for(int i=0;i<x;i++)
{
 for(int j=0;j<y;j++)
 { 
   A[i]=(int*)malloc(sizeof(int)*y);
 }
}
//allocate the memory
for(int i=0;i<x;i++)
 { 
 for(int j=0;j<y;j++)
 {
   fscanf(file,"%d",&A[i][j]); 
 } 
}
//read the integers skipping whitespaces
for(int i=0;i<x;i++)
{
        free(A[i]);
}
//free the memory we allocated
free(A);
fclose(file)
//close files
return 0; 
} 
```

fscanf 首先读取作为维度的前 2 个字符，然后 malloc 动态数组。fscanf 然后扫描所有其他整数，跳过所有空格。在我们释放我们动态分配的内存并关闭文件之后。

使用标志 -std=c99 编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:36:42.927

像这样的东西：你需要这个标题

```
#include <stdio.h> 
```

这是 main.cpp 代码——但我不确定 fscanf 函数——但它的工作方式与通常的 scanf 完全一样。所以：

```
FILE *f;
int ch[8];
f=fopen("a.dat","r"); 
for (int i=0;i<2;i++){
for (int j=0;j<2;j++){
fscanf(ch[i][j]);
}
}
fclose(f); 
```

# ruby-on-rails - 初始化 Ruby 模块

> ID：15016288
> 
> 赞同：2
> 
> 时间：2013-02-22T03:23:26.290
> 
> 标签：ruby-on-rails, ruby

尝试学习 Ruby 及以下是我创建的一个模块，用于测试 IO Ruby 功能。当我运行以下测试时：

```
 subject{TestGem.new}    

    it 'should be_a Module' do
      subject.is_a Module
    end 

    it 'creates a config file' do
      subject.init_config
      File.open("program.config", "r") { |io| io.readline }.should eq "default_file.txt"    
    end 
```

我得到这个错误：

```
 Failure/Error: subject{TestGem.new}
 NoMethodError:
   undefined method `new' for TestGem:Module 
```

这是我正在测试的模块。任何帮助/建议将不胜感激:)

```
$LOAD_PATH.unshift File.expand_path("../test_gem", __FILE__)

require 'version'
require 'hello'

module TestGem

  @default_file_name
  @supported_types

  def initialize
    default_file_name = 'default_file.txt'
    supported_types = ['txt', 'pdf']
  end  

  puts "module TestGem defined"

  def self.init_config
    File.open('program.config', "w") do |f|
      f.write(yaml(@default_file_name))
      f.write(yaml(@supported_types))  
    end
  end  

  class MyFile

    def self.first(filename)
        File.open(filename, "r") {|f| f.readline}
    end

    def self.last(filename)
        File.open(filename, "r")[-1]
    end 
  end

  class MyError < StandardError
    puts "Standard Error"
  end   
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:32:48.183

简短回答：您不能实例化模块对象

```
module A
end

class B
end

B.methods - A.methods #=> [:new, :superclass, :allocate] 
```

要测试一个模块，您可以将它包含在这样的对象中

```
 object = Object.new
  object.extend(TestGem) 
```

或者，如果您的模块依赖于某些类行为，您可以创建一些示例类。

# c# - 将一个点向另一个点移动一定距离

> ID：15016296
> 
> 赞同：2
> 
> 时间：2013-02-22T03:24:37.820
> 
> 标签：c#, .net

如果我不能很好地解释标题，我很抱歉。

我已经进行了研究，但找不到有关此主题的任何答案。

```
Point Start;
Point End;
float Distance; 
```

这就是我需要帮助的地方，我需要将点**Start**移向点**End**，只有**距离**很长。

因此，假设**Start**位于**(0, 0)**，**End**位于**(11, 17)**，并且**Distance**为**2.5**。

斜率为**17/11**又名**17 超过 11**。但是两点之间的距离是多少？假设两点之间的距离是20f。我想将点**Start**移向点**End**，**距离**为**2.5f**。

所以最后，点**Start**和点**End**之间的距离将是**17.5** (20-2.5)。

但是，正如我之前提到的，我在互联网或这些论坛上找不到任何关于此的信息。*如何获得两点之间的距离（不是斜率）？以及如何将点沿距离移动一定距离？*

希望我能解释一下自己。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-07T16:45:48.553

很抱歉回答了一个旧问题，但所选答案并不完全正确。

```
yDiff = Math.Abs(Start.Y - End.Y);
xDiff = Math.Abs(Start.X - End.X);
distance = Math.Sqrt(yDiff * yDiff + xDiff * xDiff) 
```

请注意两个 xDiff 之间的乘法 * 运算符，而不是 + 号。

如果您使用 + 号而不是 * 号，则 X 距离看起来会比实际短。我花了一段时间才找到这个错误，我一直在寻找错误的地方一段时间...... -.-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:34:23.720

使用直角三角形关系：

```
c*c = a*a + b*b 
```

其中 c 是最长边（斜边）所以：

```
yDiff = Math.Abs(Start.Y - End.Y);
xDiff = Math.Abs(Start.X - End.X);
distance = Math.Sqrt(yDiff *yDiff + xDiff*xDiff) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T03:43:02.393

你有一个点，斜率，距离：

您可以使用以下公式获取坐标：

```
Y = m(d/(1+m^2)^(1/2) + x) - mx + y, x=0,y=0, d= 2.5, m=17/11 
```

然后你可以通过求解以下方程得到 X。

```
Y=17/11(X) 
```

# php - 你如何检查某些东西是否存储在 PHP 数组中？

> ID：15016301
> 
> 赞同：0
> 
> 时间：2013-02-22T03:25:34.507
> 
> 标签：php, search, multidimensional-array

我有一种感觉，这个问题之前一定在这个网站上被问过，但对于我的生活，我找不到确切的等价物。

我想检查多维中是否存在特定值`PHP array`。例如：

```
Array ( 
    [0] => 
    Array ( 
        [id] => 1 
        [publishDate] => 2013-02-22 01:51:39 
        [visible] => 1 
    ) 
    [1] => 
    Array ( 
        [id] => 4 
        [publishDate] => 2013-02-22 02:49:58 
        [visible] => 1 
    ) 
    [2] => 
    Array ( 
        [id] => 7 
        [publishDate] => 2013-02-22 02:50:21 
        [visible] => 1 
    ) 
) 
```

键下是否存在“1” `id`？（它存在于`publishDate`键和`visible`键中，但我不想检查这些字段。）

所以基本上“1”、“4”和“7”会返回 TRUE。而其他一切都会返回 FALSE。

这一定是可能的，但似乎并没有给我我需要的东西`array_search`。`array_key_exists`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:31:08.107

老实说（imo），您最好的选择可能是编写自己的函数。

```
function visibleID($array, $id)
{
    foreach ($array as $entry)
    {
        if ($entry['id'] === $id)
            return true;
    }

    return false;
} 
```

我敢肯定，如果您愿意，您是否可以编写一个更通用的函数（即，将“可见性”键作为 func arg 传递），但这取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:36:35.560

您可以编写更通用的函数来检查键值对通过扩展上述函数：

```
function visibleID($array, $id)
{
    foreach ($array as $entry)
    {
        if( is_array($entry) ) {
        array_map('visibleID',$entry); //-------------call back function 
        } else {
            if ($entry['id'] === $id)
             return true;
       }
    }

     return false;
} 
```

//-------------此函数适用于任何维度的数组，即使是数组（同质和异质）

# c++ - 使用 atof 将字符串转换为双精度时的访问冲突

> ID：15016302
> 
> 赞同：0
> 
> 时间：2013-02-22T03:25:36.570
> 
> 标签：c++, access-violation

我使用 atof 将字符串转换为双精度。该程序从 csv 文件中逐个字符串地读取，直到达到 eof。仅在特定字符串存在访问冲突问题，而之前的那些字符串没有任何问题。可能是什么问题呢？错误是 TestOpenCV_CameraCalibration.exe 中 0x778515de 处的未处理异常：0xC0000005：访问冲突读取位置 0x406e64b1。它发生在 atof。该程序附在下面

```
 while (!myReadFile.eof()) 
       {
           //myReadFile>>cstr;
           getline ( myReadFile, cstr, ',' );
           //removedString = RemoveChars(cstr, removedchar);
           const char * c = cstr.c_str();
           //cout << k << "\n";
           if(k == 1200)
               k = k;
           temp[j++][k] = atof(c);
           if(i < 3)
           {
               if((j = j % 2) == 0) 
                   k++;
           }
           else
           {
               if((j = j % 3) == 0) 
                   k++;
           }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:44:17.500

考虑使用[strtod](http://www.cplusplus.com/reference/cstdlib/strtod/)

将值读入双精度

将 endptr 与您的 char ptr 进行比较。如果它们相同，请不要增加您的计数器。

# buddypress - 如何编辑buddypress发送的激活用户的注册邮件

> ID：15016305
> 
> 赞同：0
> 
> 时间：2013-02-22T03:25:45.990
> 
> 标签：buddypress, activation

当用户在我的网站上注册时，我收到此消息，这是发送给用户的内容的摘录，并且电子邮件标题消息不完整。查看用户注册时发送的内容

电子邮件主题 = "[WWW 站点] 激活 \http://1/"

电子邮件正文如下所示

"感谢您的注册！要完成您的帐户和博客的激活，请点击以下链接：

[http://www.com/activate/?key=8b9c059db8ae9a5b](http://www.com/activate/?key=8b9c059db8ae9a5b)

激活后，您可以在此处访问您的博客：

\http://1/

所以我想编辑的是这些不完整的消息。

感谢您的预期回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:45:00.797

您已经完成了 Wordpress 中使用的过滤方法，因为您无法直接从文件中更改电子邮件文本或主题，因为电子邮件来自 Buddypress 核心文件，因此您可以使用过滤方法。

请将以下代码放入您的主题 functions.php 文件中。

1.) 更改激活电子邮件的主题，代码如下：

```
function change_activation_subject($subject) {
    return __( "Change Activate Your Account Subject", 'buddypress' );
}
add_filter('bp_core_activation_signup_user_notification_subject', 'change_activation_subject'); 
```

2.) 更改激活电子邮件的电子邮件正文，代码如下：

```
function change_activation_email_body($message) {
        return __( "Change Activate Email body", 'buddypress' );
    }
    add_filter('bp_core_activation_signup_user_notification_subject', 'change_activation_email_body'); 
```

# android - Android SkImageDecoder::Factory 返回 null

> ID：15016306
> 
> 赞同：1
> 
> 时间：2013-02-22T03:25:47.467
> 
> 标签：android, bitmap

我从服务器下载图像并将其保存在 SD 卡中。

当我尝试使用我的代码获取相同的内容时，它给出了一个错误`SkImageDecoder:: Factory returned null`

请帮我...

我读取文件的代码如下：

```
try{
    extStorageDirectory = Environment.getExternalStorageState().toString(); 
    extStorageDirectory = Environment.getExternalStorageDirectory().toString();     
    extStorageDirectory = extStorageDirectory + "/egnuri/456.png";  
    // egnuri is directory name. and 456.png is imagename.

    Bitmap loadimage = BitmapFactory.decodeFile(extStorageDirectory);
    imView.setImageBitmap(loadimage);
}catch(Exception e){
    e.printStackTrace();
} 
```

# twitter - 当时在扭动同一个身体

> ID：15016308
> 
> 赞同：0
> 
> 时间：2013-02-22T03:25:59.870
> 
> 标签：twitter

我在使用 Twitter API 时遇到了问题，我想知道我什么时候可以使用 Twitter API 再次发布它或直接在 Twitter 上 twit。

例子。

我推特身体=早安！#早安 5分钟前

我 twtted 身体 = 早上好！＃早上好

错误代码 403，twitter 响应你已经 titted 这个。

希望你在这里帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:51:38.540

您不能将同一条推文两次发布到 twitter 看到[这个](https://dev.twitter.com/discussions/3714)和[这个](http://blog.tweetsmarter.com/twitter-tips/should-you-ever-repeat-the-same-tweets/)

您需要以某种方式更改推文以避免垃圾邮件检测。

# jquery - jquery将照片加载到div然后淡入淡出

> ID：15016311
> 
> 赞同：0
> 
> 时间：2013-02-22T03:26:14.680
> 
> 标签：jquery, prop

我正在尝试创建一个画廊，我正在尝试将图像加载到一个 div 中，当它完成加载时让它淡化它，尽管它不是很有效。如果我删除 display:none 图像确实加载到 div 中，则它是 fadeIn 函数无法正常工作。我能得到的任何帮助都会很棒，谢谢。

这是js：

```
function fadeIn(obj) {
    $(obj).fadeIn(1000);
}

$('.enlarge').click(function() {
    var jthis = this; // save the reference to the $('.enlarge') that was clicked
    var id = $(this).find(".enlarged_txt").attr('id');
    $('#full_image').animate({
        height: "100%"
    }, 300, function() {

    if ( $(jthis).hasClass("v") ) {   
        $('#preload').prop('src', 'http://www.klossal.com/klossviolins/instruments/violins/full/' + id + '.jpg');

     fadeIn('#' + id);
     }
});
}); 
```

这是带有按钮的容器：

```
<div class="enlarge bv">
    <img class="enlarged_unselected" src="http://www.klossal.com/klossviolins/elements/fullscreen_unselected.png"/>
    <img class="enlarged_selected" src="http://www.klossal.com/klossviolins/elements/fullscreen_selected.png"/>
     <div id="ESaitory_408" class="enlarged_txt">Enlarge Image</div>
</div> 
```

这是我要装入的容器：

```
<div id="full_image">
    <img id="preload" onload="fadeIn(this)" src="#" style="display:none;"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:58:47.697

您需要检查`complete`img 属性，因为如果图像已经加载，则不会触发 onload。我用自己的方法对你的代码感觉不好：

HTML

```
<button id="enlarge" data-target="big" data-src="http://placehold.it/400x250">Click to enlarge</button>
<button id="shrink" data-src="http://placehold.it/350x150" data-target="small">Click, to shrink down</button>
<div id='show'>
    <div id="big" class="images"><img/></div>
    <div id="small" class="images"><img src="http://placehold.it/350x150"/></div>
</div> 
```

JS

```
$('button').click(function () {
    var $this = $(this);
    var target = $this.data('target');
    var src = $this.data('src');

    var image = $('#' + target + '.images img');
    image.one('load', show_parent_hide_siblings);
    image.attr('src', src);
    if (image.get(0).complete) {  //TAKE A LOOK HERE!
        image.trigger('load');
    }
});

function show_parent_hide_siblings(image) {
    var $this = $(this);
    $this.parent().fadeIn(1000);
    $this.parent().siblings().fadeOut(1000);
} 
```

[演示](http://jsfiddle.net/oceog/4wjY9/)

# django - 从视图发送 html 到 django 模板

> ID：15016316
> 
> 赞同：0
> 
> 时间：2013-02-22T03:26:52.420
> 
> 标签：django

我是 django 的新手，所以我可能会以错误的方式处理这个问题（我很确定我是）。

试图让网页在表格中显示来自 postgresql 数据库的数据，该表格显示服务器列表的状态。

这是模板的一部分

```
<div class"row"=""><div class="span3" style="background-color:lightyellow; margin-left:20px">
<table class="table table-bordered table-condensed">
        <thead>
          <tr>
            <th>Server</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
        {{ res }}
        </tbody>
      </table>
</div></div> 
```

在我看来，我有这个，

```
message = []
for res in data:
    message.append("          <tr>")
    message.append("            <td>" + str(res).split("'")[1] + "</td>")
    if str(res).split("'")[3] == 'No':
        message.append("            <td><FONT COLOR=\"008200\">Available</FONT> </td>")
    else:
        message.append("            <td><FONT COLOR=\"FF0000\">Down</FONT> </td>")
    message.append("          </tr>")

return render_to_response('health.html', {'res':message}, context_instance=RequestContext(request)) 
```

如果我打印它而不是执行附加，我会得到我期望的结果 HTML。

就目前而言，我没有在该表格的网页上显示任何内容。

我不希望它一定会呈现列表，但会认为即使格式不正确也应该出现在表格中。

这个 HTML 处理应该在模板而不是视图中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:39:02.500

是的，通常最好在模板中进行所有 HTML 处理。这样，您可以将数据库访问逻辑与显示逻辑分开，从而减少耦合。这也意味着您可以轻松地重复使用模板。

所以你应该使用视图函数来获取适当的对象并将它们作为变量传递给模板。

尽管如此，你还是走在了正确的轨道上。为了让您的 {{res}} 变量正确显示，我认为您需要将模板更改为。

```
<tbody>
    {% for message in res %}
    {{ message }}
    {% endfor %}
</tbody> 
```

这应该遍历`res`您传递给模板的变量中的元素。

# ruby - Ruby - 用于格式化表示剩余时间的字符串的正则表达式

> ID：15016318
> 
> 赞同：0
> 
> 时间：2013-02-22T03:27:11.043
> 
> 标签：ruby, regex

我有各种字符串表示从数据馈送中剩余的时间。格式如下所示：

*   13:35
*   01:36
*   00:34

我想使用正则表达式将格式更改为：

*   13:35 --> 13:35（按原样正常）
*   01:36 --> 1:36（删除前导 0）
*   00:34 --> 0:34（删除第一个前导 0）

目前，我正在这样做：

```
time_left.gsub(/\A0+/, '') 
```

完成前两种目标格式，但未完成第三种，这会导致：

:34（应该是 0:34）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:31:05.670

您的正则表达式`/\A0+/`删除*了所有*前导 0，但听起来您只想删除第一个。你只是想要`/\A0/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:37:49.977

正则表达式不是最好的选择。我会追求这个，......呃，这个：

```
puts %w[
  13:35
  01:36
  00:34
].map { |s|
  "%0d:%0d" % s.split(':').map(&:to_i)
} 
```

哪个输出：

```
13:35
1:36
0:34

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:30:59.683

只需取出表示 1 或更多的 +。因此，如果它有两个零，它将需要两个零。

```
time_left.gsub(/\A0/, '') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T05:27:59.200

如果每个时间都在一个单独的字符串中，并且您将正则表达式单独应用于它们，那么，您不应该使用`gsub`：

```
time_left.sub(/\A0/, "") 
```

如果是所有时间都在一个字符串中的情况，那么您不能使用`\A`.

```
time_left.gsub(/(?!<\d)0/, "") 
```

第二个也将删除冒号后的零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:57:10.637

如何使用负前瞻：

```
/\A0+(?!:)/ 
```

（在 Perl 中测试）

# c++ - 在什么情况下 C++ 头文件不能传递？

> ID：15016322
> 
> 赞同：0
> 
> 时间：2013-02-22T03:28:08.623
> 
> 标签：c++, header-files

我刚刚遇到#include 标头的情况，我遇到编译错误，需要我#include 已包含在原始标头中的标头。

标头包含以下内容：

```
#pragma once

#include <atlbase.h>
#include <atlcom.h>

#include "itestobj.h"

extern "C" ITestObj* WINAPI GetTestObj(); 
```

然后，当我针对除上述标头之外的 C++ 文件中包含`atlbase.h`和解决的问题进行编码时，我会得到一堆与 ATL 相关的编译错误。`atlcom.h`

为什么没有像通常情况下那样包含这些标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:33:04.413

这些标题中至少有一个很可能包含您在帖子中显示的文件。因为`#pramga once`告诉你的编译器只包含一次，它会停止并且你不会得到所有的声明。

# doctrine-orm - 学说 2 中的删除操作

> ID：15016324
> 
> 赞同：0
> 
> 时间：2013-02-22T03:28:14.607
> 
> 标签：doctrine-orm, doctrine

例如，我有像用户、项目、图像这样的实体。用户有很多项目。项目有很多图像。

我应该选择哪个删除选项， cascade={'remove'} 或 onDelete=Cascade ？

我也有关于 Image 的生命周期回调。我知道上述级联选项之间的区别。我想知道我是否在删除用户对象时使用了 onDelete=cascade 选项，是否会调用像 PostRemove() 这样的生命周期回调？

这是我的实体：

```
//User.php
class User {
   /**
    * @ORM\OneToMany(targetEntity="Item", mappedBy="user", onDelete="CASCADE")
    */
    private $items;
}

//Item.php
class Item {
   /**
   * @var User
   *
   * @ORM\ManyToOne(targetEntity="User", inversedBy="items")
   * @ORM\JoinColumns({
   *   @ORM\JoinColumn(name="user_id", referencedColumnName="id")
   * })
   */
   private $user;
   /**
    * @ORM\OneToMany(targetEntity="ItemImage", mappedBy="item",onDelete="CASCADE")
    */
   protected $images;

}

//ItemImage.php
class ItemImage {
   /* Setters and getter **/
   /**
   * @var Items
   *
   * @ORM\ManyToOne(targetEntity="Item", inversedBy="images")
   * @ORM\JoinColumns({
   *   @ORM\JoinColumn(name="item_id", referencedColumnName="id")
   * })
   */
   private $item;
   /**
   * @ORM\PostRemove()
   */
    public function removeUpload() {
       unlink($this->getUploadDir() . '/' . $this->imageName);
    }
 } 
```

我的问题是当用户被删除时，与用户相关的所有项目和与项目相关的图像都会被删除吗？我还希望在删除用户时调用 Image 实体的 PostRemove() 回调？对于这种情况，我应该使用哪个选项，onDelete="cascade" 或 cascade={'remove'}？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:01:24.573

`onDelete='CASCADE'`将添加一个 SQL 级别`ON DELETE CASCADE`。所以是的，图像将从表中删除。这是非常有效的，因为数据库处理删除。

调用监听`cascade={'remove'}`器是必要的。这使得 Doctrine 获取对象的图表，速度较慢。

可以同时指定这两个选项。在这种情况下，Doctrine 将按照上一段中的描述进行操作，但`DELETE`不是来自 Doctrine 的 s 也会正确级联；在这种情况下显然不会调用任何侦听器。

我倾向于`cascade={'remove'}`仅在这种情况下指定以避免意外`DELETE`的 s 而不调用侦听器（如果没有未引用文件的清理任务）。

详细信息可以在[Doctrine 文档](http://docs.doctrine-project.org/en/latest/reference/working-with-objects.html#removing-entities)中找到。

# ruby-on-rails - 从不同视图更新模型的 RESTful 方式

> ID：15016325
> 
> 赞同：0
> 
> 时间：2013-02-22T03:28:17.143
> 
> 标签：ruby-on-rails

我的应用程序有一个用户模型。

在`home#index`视图中，我为当前用户提供了一个表单来更新他们的电子邮件地址，使用`form_for`.

现在，如果我的应用程序要保持 RESTful，据我了解，Haml`app/views/home/index.html.haml`应该类似于：

```
- form_for current_user, :url =>  { :action => "update", :controller => "user" } do |f|
    = f.text_field :email
    = f.submit "Update email address" 
```

我的问题如下：`home#index`在更新后让用户模型重定向到视图的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:34:56.690

你可以给`redirect`你`format.html`的`controller def update`，比如

```
format.html { redirect to :back } 
```

这将重定向到之前发送请求的页面。

这是最简单的方法..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:54:40.353

在这种情况下，我实际上恢复到使用[资源丰富的路线](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)......更清洁。

感谢其他建议。

# haskell - 具有不同结果的类似 Haskell 列表推导

> ID：15016338
> 
> 赞同：7
> 
> 时间：2013-02-22T03:30:17.290
> 
> 标签：haskell, list-comprehension

我不明白为什么这两个相似的列表推导会给出不同的结果：

```
Prelude> let t2s n= [ 1/(2*i) | i <- [1,3..n]]
Prelude> t2s 0
[0.5]
Prelude> let t2s n= [   (2*i) | i <- [1,3..n]]
Prelude> t2s 0
[] 
```

我希望两者都返回`[]`论点`0`。我一定是错过了什么愚蠢的东西？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T03:56:39.420

首先，我将您的第一个名称更改`t2s`为`t1s`，以便我可以将它们同时加载到 ghci 中。查看它们每个的推断类型：

```
[ts.hs:2:1-33] *Main> :t t1s
t1s :: (Enum t, Fractional t) => t -> [t]
[ts.hs:2:1-33] *Main> :t t2s
t2s :: (Enum t, Num t) => t -> [t]
[ts.hs:2:1-33] *Main> 
```

请注意，`t1s`接受一个`Fractional`参数，而`t2s`接受一个`Num`. 这意味着在 中`t1s 0`，`0`被推断为`Double`。另一方面，解释器推断`0`为 a `Integer`in `t2s 0`。由于用于参数的类型不同，因此行为可能会以非常令人惊讶的方式不同。特别是，您应该确保`Integral`在枚举列表时仅使用类型，如`[1,3..n]`.

要解决此问题，您只需为这两个函数提供显式类型签名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T04:15:26.400

这与以下事实有关

```
enumFromThenTo 1.0 3.0 0.0 
```

评估为`[1.0]`。Floats的规范`enumFromThenTo`可以在[http://www.haskell.org/onlinereport/haskell2010/haskellch6.html](http://www.haskell.org/onlinereport/haskell2010/haskellch6.html)的第 6.3.4 节中找到。

# haskell - Haskell：计算“在一个单子中”——是什么意思？

> ID：15016339
> 
> 赞同：14
> 
> 时间：2013-02-22T03:30:21.550
> 
> 标签：haskell, monads, computation

在阅读有关 monad 的文章时，我不断看到诸如“Xyz monad 中的计算”之类的短语。计算“在”某个单子中意味着什么？

我认为我对 monad 的含义有相当的了解：允许计算产生通常是某种预期类型的​​输出，但可以替代或附加地传达一些其他信息，例如错误状态、日志信息、状态等，以及允许将此类计算链接起来。

但我不明白如何将计算称为“在”单子中。这只是指产生一元结果的函数吗？

**示例：（**搜索“计算”）

*   [http://www.haskell.org/tutorial/monads.html](http://www.haskell.org/tutorial/monads.html)
*   [http://www.haskell.org/haskellwiki/All_About_Monads](http://www.haskell.org/haskellwiki/All_About_Monads)
*   [http://ertes.de/articles/monads.html](http://ertes.de/articles/monads.html)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T04:52:17.643

> 这只是指产生一元结果的函数吗？

是的，简而言之。

* * *

总而言之，这是因为`Monad`允许您将值*注入*其中（通过`return`），但一旦进入`Monad`它们就会卡住。您必须使用某些功能，例如`evalWriter`或`runCont`比`Monad`将值“输出”更严格。

不仅如此，`Monad`（实际上，它的合作伙伴，`Applicative`）是拥有“容器”并允许在其中进行计算的本质。这就是`(>>=)`让您能够在“内部”进行有趣计算的能力`Monad`。

因此，诸如`Monad m => m a -> (a -> m b) -> m b`让您在`Monad`. 像`Monad m => a -> m a`让你注入到`Monad`. 像这样的函数`m a -> a`可以让你“逃脱”，`Monad`除非它们通常不存在（仅在特定情况下）。因此，为了对话，我们喜欢讨论具有结果类型的函数，例如`Monad m => m a`“在 monad 内部”。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-22T15:04:18.383

通常，“单子中的计算”不仅意味着返回单子结果的函数，还意味着在`do`块内使用的此类函数，或作为 的第二个参数的一部分`(>>=)`，或其他任何等效的东西。区别与您在评论中所说的有关：

> “计算”发生在 func f 中，在从输入 monad 中提取 val 之后，在结果被包装为 monad 之前。我看不出计算本身是如何“在”单子中的。它似乎明显地“脱离”了单子。

这不是一个*糟糕*的思考方式——事实上，`do`符号鼓励它，因为它是一种方便的看待事物的方式——但它确实会导致一种略微误导的直觉。没有任何东西可以从单子中“提取”出来。要了解原因，请忘记-- 它是一种支持符号`(>>=)`的复合操作。`do`monad 更基本的定义是三个正交函数：

```
fmap :: (a -> b) -> (m a -> m b)
return :: a -> m a
join :: m (m a) -> m a 
```

...`m`单子在哪里。

现在考虑如何`(>>=)`用这些来实现：从类型`m a`和的参数开始`a -> m b`，你唯一的选择是使用`fmap`来获取类型的东西`m (m b)`，之后你可以使用`join`扁平化嵌套的“层”来获取只是`m b`。

换句话说，没有任何东西被从 monad 中“取出”——相反，将计算视为*更深入*monad，连续的步骤被折叠成 monad 的单层。

请注意，从这个角度来看，monad 定律也简单得多——基本上，他们说，`join`只要保留嵌套顺序（一种关联性）并且引入的 monad 层`return`什么都不做（的标识值`join`）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T07:46:40.737

通常，当以“类似集合”的单子为例时，单子的东西更容易掌握。想象一下，您计算两点的距离：

```
data Point = Point Double Double

distance :: Point -> Point -> Double
distance p1 p2 = undefined 
```

现在你可能有一定的背景。例如，其中一个点可能是“非法的”，因为它超出了某些范围（例如在屏幕上）。因此，您将现有的计算包装在`Maybe`monad 中：

```
distance :: Maybe Point -> Maybe Point -> Maybe Double
distance p1 p2 = undefined 
```

您具有完全相同的计算，但具有可能“无结果”（编码为`Nothing`）的附加功能。

或者您有两组“可能”点，并且需要它们的相互距离（例如，稍后使用最短连接）。那么 list monad 就是你的“上下文”：

```
distance :: [Point] -> [Point] -> [Double]
distance p1 p2 = undefined 
```

或者这些点是由用户输入的，这使得计算“不确定”（从某种意义上说，你依赖于外部世界中的事物，这可能会改变），那么`IO`monad 就是你的朋友：

```
distance :: IO Point -> IO Point -> IO Double
distance p1 p2 = undefined 
```

计算始终保持不变，但恰好发生在某个“上下文”中，这增加了一些有用的方面（失败、多值、不确定性）。您甚至可以组合这些上下文（monad 转换器）。

您可以编写一个统一上述定义的定义，并适用于*任何*monad：

```
 distance :: Monad m => m Point -> m Point -> m Double
 distance p1 p2 = do
     Point x1 y1 <- p1
     Point x2 y2 <- p2
     return $ sqrt ((x1-x2)^2 + (y1-y2)^2) 
```

这证明了我们的计算确实**独立**于实际的 monad，这导致了“x 在 (-side) y monad 中计算”的公式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T11:51:42.643

查看您提供的链接，“计算”的常见用法似乎与单个单子值有关。摘录：

简单介绍——这里我们在 SM monad 中运行计算，但计算是 monadic 值：

```
-- run a computation in the SM monad
runSM                   :: S -> SM a -> (a,S) 
```

所有关于 monads -*先前的计算*是指序列中的 monadic 值：

> >> 函数是一个便利运算符，用于绑定不需要序列中先前计算的输入的一元计算

理解 monads - 这里的第一个*计算*可以参考例如`getLine`一个 monadic 值：

> （绑定）给出了在另一个计算中使用计算结果的内在想法，而不需要运行计算的概念。

所以打个比方，如果我说`i = 4 + 2`，那`i`是价值`6`，但它同样是一个计算，即计算`4 + 2`。似乎链接的页面在这个意义上使用*计算*- 计算作为单子值 - 至少在某些时候，在这种情况下，使用给定单子中的“计算”表达式是有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T03:50:59.830

考虑`IO`单子。类型值`IO a`是对大量（通常是无限）行为的描述，其中行为是一系列 IO 事件（读取、写入等）。这样的值称为“计算”；在这种情况下，它是`IO`monad 中的计算。

# ios - 在 ARC 下将代表设置为零？

> ID：15016348
> 
> 赞同：14
> 
> 时间：2013-02-22T03:31:13.223
> 
> 标签：ios, delegates, automatic-ref-counting

我正在使用 ARC 编写 iOS 应用程序并针对 iOS 5+。

假设我编写了一个具有委托属性的自定义视图对象。在声明委托属性时，我将其设为弱引用以避免保留循环，这样当实际委托对象（控制器）被销毁时，我的自定义视图也将被销毁，如下所示：

```
@interface MyCustomView : UIView

@property (nonatomic, weak) id<MyCustomViewDelegate> delegate;

@end 
```

一切都很好。

好的，现在我正在编写控制器对象，它引用了两个视图对象：我的自定义视图和 Apple 提供的 UIKit 视图，它们都声明了委托属性，控制器是两个视图的委托。也许它看起来像这样：

```
@interface MyViewController : UIViewController <MyCustomViewDelegate, UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, strong) MyCustomView *customView;
@property (nonatomic, strong) UITableView *tableView;

@end

@implementation MyViewController

- (void)viewDidLoad
{
    self.customView.delegate = self;
    self.tableView.dataSource = self;
    self.tableView.delegate = self;
}

@end 
```

我的问题是：我是否需要重写 dealloc 以将一个或两个代表设置为零？

我的意思是，据我了解，UIKit 视图的委托属性（在本例中`tableView`为 ）实际上并未声明为弱引用，而是`__unsafe_unretained`引用，以向后兼容非 ARC 版本的 iOS。所以也许我需要写

```
- (void)dealloc
{
    _tableView.dataSource = nil;
    _tableView.delegate = nil;
} 
```

现在，如果我必须重写 dealloc，我仍然不必设置`_customView.delegate = nil`，对吗？因为那被（我）声明为弱引用，所以它应该在销毁时自动设置为 nil `MyViewController`。

但另一方面，我不针对非 ARC 版本的 iOS，也不打算这样做。所以也许我根本不需要覆盖 dealloc？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-22T04:06:22.783

将非弱委托设置为 nil 通常是一个好主意，除非您*知道*不必这样做。对于`UITableView`和`UIScrollView`，我在以前的 iOS 版本上经历了以下步骤的崩溃（它可能有助于在启用僵尸的情况下运行）：

1.  滚动真的很快。
2.  按完成或后退按钮或其他任何关闭 VC。

这似乎是因为滚动动画保留了对视图的引用，因此视图比 VC 寿命更长。它在发送滚动事件时崩溃。

在关闭包含一段时间的请求正在加载的 VC 后，我还看到崩溃`UIWebView`，其中仅将委托设置为 nil 是不够的（我认为解决方法是调用`[webView loadRequest:nil]`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T03:41:57.987

如果对 say 的唯一**强**引用`tableView`是您的唯一`MyViewController`控制器，则无需手动设置`UITableViewDelegate`或`UITableViewDataSource`to `nil`。

原因是一旦`dealloc`你的方法`MyViewController`被调用，tableview 也将与控制器一起被销毁（也就是说，再一次，只要对它的唯一引用是你唯一的控制器`MyViewController`类）。

如果您对此 tableview 有其他强引用，例如其他控制器，则 tableview 可能存在的时间比`MyViewController`类长。在这种情况下，***有***必要在 dealloc 方法中设置`UITableViewDelegate`and `UITableViewDataSource`，因为正如您所提到的，这些属性不是弱引用，不会自动设置为。`nil``MyViewController``nil`

但是，根据我的经验，这种情况非常罕见。

大多数时候，我并不担心将这些设置为`nil`诚实，但这是一种防御性编程实践。

另见这篇文章：

[在 dealloc 方法中，需要或不需要任何委托到 nil](https://stackoverflow.com/questions/7632278/in-dealloc-method-set-any-delegate-to-nil-is-needed-or-not-needed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:37:58.547

您想要显式设置`delegate`and`dataSource`的唯一原因`nil`是如果 the`customView`或 the`tableView`可以在视图控制器中存活。将它们设置为`nil`将防止`delegate`或`dataSource`引用已释放的对象。

如果`customView`and`tableView`将与视图控制器一起被释放，则无需将`delegate`and清零`dataSource`。

# python - 滚动视图中的 Kivy 背景

> ID：15016350
> 
> 赞同：0
> 
> 时间：2013-02-22T03:31:29.390
> 
> 标签：python, kivy

*测试应用程序摘要：*我正在编写一个带有可滚动视图（名为`Scroller`）的 Kivy 应用程序，其中包含许多要查看的字段（名为`Field`）。这些单独的字段有时真的很难区分，所以我决定为每个字段使用交替的背景颜色来帮助区分彼此。我的测试应用程序使用 20 个单独的字段，每个字段在深灰色和深灰色之间交替。

*测试试验：* 启动应用程序，程序看起来很棒。交替的背景看起来很好。即使我向下滚动应用程序看起来也很好。但是，当我向上滚动应用程序时，应用程序似乎变得很奇怪。文本随应用程序滚动，但背景不滚动。更好的是（讽刺地），文本开始消失在他们的邻居背景中。当我再次向下滚动（通过最远向上滚动点的点）时，问题似乎消失了。

*简要问题描述*： 的`Field`“背景颜色”在向上滚动事件期间弄乱了应用程序。

*旁注：*我还注意到应用程序在滚动太多后变得有点迟钝。我对 Kivy 的绘制周期不是很熟悉，但是 blitting 背景不应该导致过度减速。

*测试应用：*

```
import kivy
kivy.require('1.0.7')

from kivy.app import App
from kivy.uix.gridlayout import GridLayout
from kivy.uix.scrollview import ScrollView
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.graphics import Color, Rectangle

class Main(App):
    def build(self):
        self.root = GridLayout(rows = 1)
        self.root.add_widget(Scroller())
        return self.root

class Scroller(ScrollView):
    def __init__(self):
        ScrollView.__init__(self)
        self.view = GridLayout(cols = 1, size_hint = (1, None))
        self.add_widget(self.view)
        self.view.bind(minimum_height = self.view.setter('height'))

        for i in range(20):
            self.view.add_widget(Field('Test field {}'.format(i),i%2 is 0))

class Field(GridLayout):
    def __init__(self, name, bg):
        assert isinstance(name, str)
        assert isinstance(bg, bool)
        self.bg = bg
        GridLayout.__init__(self,
                            rows = 1,
                            padding = 10,
                            size = (0, 60),
                            size_hint = (1, None))
        self.add_widget(Label(text = name))
        self.add_widget(Button(text = 'Test button',
                               size = (200, 0),
                               size_hint = (None, 1)))
        self.bind(pos = self.change_background)
        self.bind(size = self.change_background)

    def change_background(self, *args):
        with self.canvas.before:
            if self.bg:
                Color(0.2, 0.2, 0.2, mode = 'rgb')
            else:
                Color(0.1, 0.1, 0.1, mode = 'rgb')
            Rectangle(pos = self.pos, size = self.size)

if __name__ in ('__main__', '__android__'):
    app = Main()
    app.run() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T15:39:13.383

```
def change_background(self, *args):
        self.canvas.before.clear()#<- clear previous instructions
        with self.canvas.before:
            if self.bg:
                Color(0.2, 0.2, 0.2, mode = 'rgb')
            else:
                Color(0.1, 0.1, 0.1, mode = 'rgb')
            Rectangle(pos = self.pos, size = self.size) 
```

每次字段的位置/大小发生变化时，您都在向画布添加/堆积指令，而无需清除先前的指令。

您还应该考虑将 kv 用作除一小段以外的任何内容，它最终会为您节省大量时间。您可以像这样使用 kv 转换代码::

```
import kivy
kivy.require('1.0.7')

from kivy.app import App
from kivy.uix.gridlayout import GridLayout
from kivy.uix.scrollview import ScrollView
from kivy.properties import ObjectProperty, BooleanProperty
from kivy.lang import Builder

Builder.load_string('''
<Scroller>
    # root is Scroller here
    # create a new ObjectProperty in kv that holds the ref to Gridlayout
    # so you can access the instance in python code
    view: glayout
    GridLayout:
        id: glayout
        cols: 1
        size_hint: (1, None)
        height: self.minimum_height

<Field>
    canvas.before:
        Color:
            rgba: (0.2, 0.2, 0.2, 1) if self.bg else (0.1, 0.1, 0.1, 1)
        Rectangle:
            # binding properties is done implicitly and instructions aren't
            # piled up while doing that.
            pos: self.pos
            # self here refers to Field as `self` is supposed to refer to the
            # Widget not the drawing instruction
            size: self.size
    rows: 1
    padding: 10
    size: (0, 60)
    size_hint: (1, None)
    Label:
        text: root.name
    Button:
        text: 'test button'
        size: (200, 0)
        size_hint: (None, 1)
''')

class Main(App):

    def build(self):
        self.root = GridLayout(rows = 1)
        self.root.add_widget(Scroller())
        return self.root

class Scroller(ScrollView):
    def __init__(self, **kwargs):
        super(Scroller, self).__init__(**kwargs)
        for i in range(20):
            # access self.view that was set in kv
            self.view.add_widget(
                                Field(
                                    name = 'Test field {}'.format(i),
                                    bg = i%2 is 0))

class Field(GridLayout):

    # use  kivy's Properties so it becomes easier to observe and apply changes
    # as a plus these can also be directly used in kv. As a advantage of using this now
    # you can change name and bg dynamically and the changes should be reflected on
    # screen
    name = ObjectProperty('Test field uninitialized')

    bg = BooleanProperty(False)

if __name__ in ('__main__', '__android__'):
    app = Main()
    app.run() 
```

# tcp - TCP栈验证测试工具

> ID：15016353
> 
> 赞同：3
> 
> 时间：2013-02-22T03:31:51.197
> 
> 标签：tcp, automated-tests

我正在将 TCP 堆栈移植到我们的嵌入式系统。

是否有任何验证测试工具来确保我们的 TCP 堆栈满足 TCP 协议要求？如重排序、重传、拥塞控制等。

使用现成的 TCP 验证新的 TCP 堆栈是一种测试方式，这就是我现在正在做的事情。但是这样一来，每个 TCP 协议的细节都没有被涵盖：例如一些 TCP 片段的重复/丢失/重新排序，不同的 TCP 选项等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:58:11.703

我建议设置两种环境，一种使用您的 TCP 堆栈，另一种使用现成的 TCP 堆栈。收集两个环境中的痕迹并相互比较。

查看这篇论文以获取灵感： [Validation of simulation real world TCP stacks](http://www.wand.net.nz/pubs/218/pdf/wns2.pdf)

# objective-c - 从未归档的数据加载 NSTableView

> ID：15016356
> 
> 赞同：0
> 
> 时间：2013-02-22T03:32:01.440
> 
> 标签：objective-c, xcode, macos, nstableview, nscoding

我正在尝试在我的 OS X 应用程序中保存用户首选项。我有一个 NSTableView，它将其数据存储到我的`.plist`文件中，但是我无法将相同的数据加载回我的 NSTableView。

我的模型对象：

```
#import <Foundation/Foundation.h>

@interface UserKeys : NSObject <NSCoding>

@property (nonatomic, copy) NSString *userKeyName;
@property (nonatomic, copy) NSString *userApi;
@property (nonatomic, copy) NSString *userCode;

@end 
```

及其实施：

```
#import "UserKeys.h"

@implementation UserKeys

- (id)init
{
    self = [super init];
    if (self) {
        //
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super init];
    if (self) {
        self.userKeyName = [aDecoder decodeObjectForKey:@"userKeyName"];
        self.userApi = [aDecoder decodeObjectForKey:@"userApi"];
        self.userCode = [aDecoder decodeObjectForKey:@"userCode"];
    }

    return self;
}

- (void)encodeWithCoder:(NSCoder *)enCoder {
    [enCoder encodeObject:self.userKeyName forKey:@"userKeyName"];
    [enCoder encodeObject:self.userApi forKey:@"userApi"];
    [enCoder encodeObject:self.userCode forKey:@"userCode"];

}

@end 
```

我的首选项视图控制器标题：

```
#import <Cocoa/Cocoa.h>
#import "MASPreferencesViewController.h"
#import "UserKeys.h"

@interface PreferencesApiKeysViewController : NSViewController <MASPreferencesViewController>

@property (strong) NSMutableArray *allKeys;

@end 
```

及其实施：

```
#import "PreferencesApiKeysViewController.h"
#import "UserKeys.h"

@interface PreferencesApiKeysViewController ()

@property (weak) IBOutlet NSTableView *keysTableView;

@end

@implementation PreferencesApiKeysViewController

- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)bundle {
    if ((self = [super initWithNibName:nibName bundle:bundle])) {
        self.allKeys = [NSMutableArray array];
    }
    return self;
}

// delegating....
//

- (void)viewWillAppear {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSData *data = [defaults objectForKey:@"UserKeys"];
    if (data != nil) {
        NSArray *oldArray = [NSKeyedUnarchiver unarchiveObjectWithData:data];
        if (oldArray != nil) {
            self.allKeys = [[NSMutableArray alloc] initWithArray:oldArray];
        } else {
            self.allKeys = [NSMutableArray array];
        }
    }
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    // some code...
    return cellView;
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    return [self.allKeys count];
} 
```

我得到的错误是：

`-[UserKeys count]: unrecognized selector sent to instance 0x100534df0`

当我在 中放置断点时`- (void)viewWillAppear`，我可以看到它`data`有大约 250 个字节，但这`oldArray`似乎是空的。我知道我在这里犯了一些重大错误，`self.allKeys`因此我的表不知道它应该创建多少行，但是在多次尝试获取正确的数据之后，我真的不知道为什么会发生这种情况。

那么，如何正确地取消归档我的数据并将其呈现在 NSTableView 中？
（我使用的是 Xcode 4.6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:08:37.053

这是因为您似乎要取消归档的对象是指向 class 对象的指针`UserKeys`，而不是 NSArray 或其后代的对象。当`-initWithAray:`你的 oldArray 指针指向 时`UserKeys`，它不知道或不在乎它是什么类，它只是向它发送一条`-count`消息，以确定它必须增长到的大小。

# linux - Linux内核中slab内存管理的缓存着色

> ID：15016359
> 
> 赞同：4
> 
> 时间：2013-02-22T03:32:24.047
> 
> 标签：linux, caching, colors, kernel

最近看了关于slab系统的缓存着色，没看懂。为什么缓存着色可以为不同slab中的对象添加各种偏移量可以提高性能？

我最初的猜测是：带有缓存偏移量的slab分配器，尝试将slab的第一个对象放在不同缓存颜色的内存中。如果客户端从这些slab中分配N个对象，它将获得N个具有N种缓存颜色的对象。

我的猜测是否正确，或者有人可以给我更多提示吗？多谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-12T10:12:55.590

我建议阅读“ [Understanding Linux virtual memory](https://www.kernel.org/doc/gorman/pdf/understand.pdf) ”一书——slab 分配器一章。正如它所引用的，

> 平板分配器的最终任务是优化硬件缓存使用。如果在将对象打包到平板后还有剩余空间，则剩余空间用于为平板着色。板着色是一种尝试让不同板中的对象使用缓存中的不同行的方案。通过将对象放置在slab内不同的起始偏移处，对象可能会在CPU缓存中使用不同的行，这有助于确保来自同一slab缓存的对象不太可能相互刷新。

我想这回答了你的疑问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-04T10:40:40.493

我在另一个问题中回答了同样的问题。你可以参考一下。

[https://stackoverflow.com/a/57345687/3762471](https://stackoverflow.com/a/57345687/3762471)

# ios - didSelectRowAtIndexPath:(NSIndexPath *)indexPath 返回错误的索引

> ID：15016364
> 
> 赞同：-1
> 
> 时间：2013-02-22T03:33:15.817
> 
> 标签：ios, objective-c, xcode

我的问题是，当我单击表格视图时，它会返回此错误

```
 2013-02-22 11:22:42.293 Exercise[1570:c07] -[NSIndexPath item]: unrecognized selector sent to instance 0x6e7ddd0 
```

2013-02-22 11:22:42.294 练习[1570:c07] ***

这就是它返回错误索引的地方

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
  NSLog(@"uitable index: %ld",(long)indexPath.item);

DBHelper *dataObj = [appDelegate.dataArray objectAtIndex:indexPath.row];
self.selIndex = indexPath.item;
LblID = dataObj.dataID;
VCFname.text = dataObj.DBFirstName;
VCLname.text = dataObj.DBLastName;
VCMobile.text = dataObj.DBMobile;
VCEmail.text = dataObj.DBEmail;
VCBday.text = dataObj.DBBirthdate;

NSLog(@"dataID:%i dataArrayCount:%i",self.selIndex,appDelegate.dataArray.count); 
```

}

我已将表视图的委托和数据源连接到文件所有者。

编辑：附加信息我试图从我的 sqlite 数据库中获取数据以在我单击 tableview 时显示在文本字段上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:38:24.533

这不是如何`NSIndexPath`工作的。索引路径具有“行”和“部分”属性，您可以使用它们来确定被点击的单元格。[这是 NSIndexPath 的文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:46:14.063

该`item`属性被声明为 In `UICollectionView.h`not in `UITableView.h`。你可以看到[项目](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSIndexPath_UIKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/TP40007175)。在 tableView 中，您应该使用`indexPath.section`

# c# - 从 C# 中的不同项目写入 ConsoleApplication 项目

> ID：15016365
> 
> 赞同：2
> 
> 时间：2013-02-22T03:33:18.543
> 
> 标签：c#, console, console-application

我有一个 WinForms 和一个 ConsoleApplication 项目。我在启动时启动这两个项目，并希望从 WinForms 应用程序将“实时”信息写入控制台应用程序。控制台应用程序非常简单：

```
 static void Main(string[] args)
 {
     while (true)
     {
         // This prevents the console from dying
         Console.ReadKey();
     }
  }

  public static void WriteMessage(string message)
  {
     Console.WriteLine(message);
  } 
```

我`WriteMessage`从 WinForms 应用程序调用该函数，但这不起作用。我在 WriteMessage 方法中放置了一个断点，它被命中了，但控制台屏幕上没有放置任何东西，这让我认为这是因为`main`. 我什至尝试将 while 循环放在不同的线程中，但仍然没有成功。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T03:35:17.787

## 控制台属于*进程*，而不是 Visual Studio 项目

大多数应用程序（包括您的 WinForms 应用程序）都有一个隐藏的控制台。
从 WinForms 进程调用控制台项目`WriteMessage()`仍会写入 WinForms 进程的控制台，这就是为什么您什么都看不到的原因。

相反，您应该删除控制台项目，然后将`Output Type`WinForms 应用程序（在项目属性中）设置为控制台应用程序。
这将使 WinForms 应用程序有一个可见的控制台，这样`Console.WriteLine`就可以了。

# php - 在 PHP 页面中使用 Imagemagick 的 CONVERT

> ID：15016366
> 
> 赞同：0
> 
> 时间：2013-02-22T03:33:35.760
> 
> 标签：php, imagemagick

我正在尝试从目录中提取文件，压缩它们，然后将它们显示在我的网页上。这些文件是从我的数码相机直接上传的（当我通过我的 iPad 旅行时），所以我无法在我的电脑上缩小它们。

无论如何，经过数小时的搜寻，我终生无法让它工作。

```
<?php

echo "<BR><BR>";
$dir = opendir('images/day1/'); 
while ($read = readdir($dir)) 
{

if ($read!='.' && $read!='..') 
{ 
echo $read;
exec( 'convert $read -quality 50 $output' );
echo "<BR>";
echo '<a href="images/day1/'.$read.'" TARGET="_BLANK"><img src="'.$output.'" WIDTH="800"></a>'; 
echo '<BR><BR>';
}

}

closedir($dir); 
?> 
```

欢迎任何和所有建议....我根本无法让转换工作（分配较低的质量然后显示 $output.

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:14:44.227

```
<?php 
$photo="sunflower.jpg"; 

$cmd = "convert $photo -quality 50 JPG:-"; 

header("Content-type: image/jpeg"); 
passthru($cmd, $retval); 
?> 
```

在自己的页面上，只能查看一个图像，或者您可以拥有一个

```
<img src="php_page_containing_above_code.php?photo=sunflower.jpg"> 
```

并有更多的图像。注释掉代码顶部的 $photo 变量，我现在不记得确切的代码并且正在工作，所以无法测试它。我认为你不需要 $photo = $_GET['photo']; 但又不记得了，因为我不使用这种方法。

* * *

**当 OP 说第一部分不起作用时添加的代码示例。**

将此保存为 image.php

```
<?php 
$photo = $_REQUEST['photo'];
$cmd = "convert $photo -quality 50 JPG:-"; 
header("Content-type: image/jpeg"); 
passthru($cmd, $retval); 
?> 
```

将此保存为您想要的任何内容并运行：

```
<?php
// Directory to read images from
$dir = "background/";

// Read the directory and sellect EVERYTHING
$filenames = glob( "$dir*" );

// Start the loop to display the images
foreach ( $filenames as $filename ) {

// Display the images
echo "<img src=\"image.php?photo=".$filename."\" />\n";
}
?> 
```

* * *

替代代码：

文件 1 - 调整图像大小（不要在目录上运行超过一次，否则您的拇指数量会翻倍！）

```
// Read the directory and sellect jpg only
$filenames = glob("$dir*.{jpg,JPG}", GLOB_BRACE);

// Start the loop to resize the images
foreach ( $filenames as $filename ) {

// New name 
$name = explode ( '/', $filename );
$newname = $name[0]."/th_".$name[1];

//Resize and save in the same directory
//exec("convert $filename -resize 400x400 -quality 50 $newname");
} 
```

?>

文件 2 - 显示图像

```
// Read all the image files into an array that start with th_
$filenames = glob("$dir/th_*.{jpg,JPG}", GLOB_BRACE);

// Display the array contents
foreach ( $filenames as $value ){ echo "<img src=\"$value\"><br>"; } 
```

?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:31:22.810

## 1\. 行情

您在此行中使用单引号：

```
exec( 'convert $read -quality 50 $output' ); 
```

这是行不通的，因为变量`$read`并`$output`不会在**单引号**字符串中展开。

您可以使用以下任一解决方案：

```
exec( "convert $read -quality 50 $output" ); // double quote string, expands variables
exec( 'convert ' . $read . ' -quality 50 ' . $output ); // single quoted string with concatenated variables 
```

## 2\. $输出

您`$output`在该`exec()`行中使用，但您从不填充该变量。它应该包含您要`convert`放置转换文件的文件名。

## 3\. 调试

对于调试，您还可以输出您输入的命令`exec()`：

```
$cmd = "convert $read -quality 50 $output";
echo $cmd;
exec($cmd); 
```

# python - Django 类属性吐出 HTML 以显示在模型的管理页面中

> ID：15016367
> 
> 赞同：0
> 
> 时间：2013-02-22T03:33:37.560
> 
> 标签：python, django, django-models, django-forms, django-admin

我有一个会吐出一些 HTML 的类属性：

```
class Task (models.Model):
    def test(self):
        return """<img border="0" alt="" src="/%s/%s/%s" />""" % (UPLOADS_DIR, GRAPH_DIR, "task.svg")

    test.allow_tags = True 
```

如何轻松地将返回的 HTML 输入模型的管理页面？它适用于 list_display() 页面。我试图为其模型页面的 test() 创建一个自定义小部件，但我的小部件未能实际显示图像。我不想通过为此模型制作自定义模板来解决这个问题。基本上，我正在寻找一个自定义表单或小部件，它只将测试吐出的任何 HTML 放入模型的管理页面，而不修改属性的输出。

有什么想法吗？

非常感谢！

时代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:00:17.127

我知道您并不热衷，但我认为覆盖模板将是最好的方法。

小部件与特定字段相关联，但您的`test()`方法不是。再次，django 表单只关心字段——它们是关于将数据发送回服务器——而不是呈现数据——即视图和模板。

通过覆盖模板不应该太麻烦。如果您希望它真正干净，您可以简单地扩展现有模板，然后在底部添加您的字段。查看有关覆盖管理模板的[文档。](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#overriding-admin-templates)覆盖特定模型的特定模板非常简单。

# apache - AIX apache rpm 依赖项

> ID：15016369
> 
> 赞同：0
> 
> 时间：2013-02-22T03:33:48.100
> 
> 标签：apache, unix, rpm, dependency-management, aix

我正在评估 Atlassian 的[Crowd SSO](http://www.atlassian.com/software/crowd/overview)。现在要让 apache 使用 Crowd 进行身份验证，供应商提供了一个[连接器](https://confluence.atlassian.com/display/CROWD/Integrating+Crowd+with+Apache#IntegratingCrowdwithApache-Step3.ChoosingtheCorrectApacheConnectorforyourOperatingSystem)。

## 问题

不幸的是，他们没有为我的操作系统（AIX）提供任何东西。相反，他们提供[带有说明的源代码](https://confluence.atlassian.com/display/CROWD/Installing+the+Crowd+Apache+Connector+on+Other+UNIX-Like+Systems)。现在，此处的示例`yum -y install autoconf automake gcc httpd-devel libcurl-devel libtool libxml2-devel mod_dav_svn subversion-devel`用于下载 AIX (AFAIK) 中没有替代的所需包。

所以我去了[AIX 工具箱](http://www-03.ibm.com/systems/power/software/aix/linux/toolbox/alpha.html)并得到了一些包。其余的，我得到了[Perzl 先生的](http://www.perzl.org/aix/index.php)帮助。并且在安装`rpms`最终得到依赖错误。

## 问题

我去吗

1.  这里给出的解决方案[依赖地狱](http://www.perzl.org/aix/index.php?n=FAQs.FAQs#rpm-dependency-hell)。
2.  [IBM方式](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.install/doc/insgdrf/HT_insgdrf_install_opensrc.htm)
3.  Google 和我对 AIX 的有限接触没有告诉我的其他事情。

我不是`*nix`专家，而是基本用户级别。任何安装实际上都是由管理员完成的。我需要专家的建议，以便尽可能正确有效地进行操作。

* * *

感谢是否有人想重新标记此问题以引起合适人的注意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:50:42.893

自从我在 AIX 和 Linux 上苦苦挣扎并在 Linux 上使用 Crowd Connector 取得成功以来已经有一段时间了。因此，在查看了这两个链接之后，我会说：

IBM 文档仅适用于随其工具箱提供的软件包，如果您将其用于其他用途，您可能会遇到死胡同，因为实用程序可能会拒绝发挥作用。

以 Perzl 先生的方式，您正在一砖一瓦地建造它，这是众所周知的。主要风险是正确的版本可能不可用和/或构建工具之一可能无法工作。在这种情况下，您可能仍然需要调整源代码和/或构建/制作文件才能正确编译，但它最终会起作用。

一旦你有一个编译好的插件并且它适用于特定版本的 Apache，你将不需要很多依赖项，所以你给管理员的部署说明将是最少的。最有可能的是，运行时依赖项将是`mod_dav_svn, curl and libxml`

当你得到它的工作时，请发布更新。

# sql - SQL添加两列（日期时间）

> ID：15016371
> 
> 赞同：0
> 
> 时间：2013-02-22T03:33:49.830
> 
> 标签：sql, sql-server

我有两列包含日期时间，我需要两列以某种方式将它们加在一起。我试过使用 sum 但没有用。我正在使用 sqlserver 2008。

**列**

**loanPeriod** = 项目的贷款期限

**checkOutDate** = 借用物品的时间

我试图实现这个 lastreturndate = (checkoutDate + loanperiod)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:35:54.627

大多数数据库都有 DATEADD() 或 DATEDIFF() 函数或类似函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T03:36:06.400

据推测，这些以天为单位。因此，您可以执行以下操作：

```
select dateadd(day, datediff(day, 0, loanPeriod), checkoutDate) 
```

将贷款期限存储为日期时间很奇怪。如果是这样，那么这个日期看起来就像是 1900 年代早期的某个日期（除非这个时期很长）。以上将其转换为天数，然后将其添加到结帐日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T03:42:17.973

`select dateadd(month, loanperiod, checkoutdate) as lastreturndate`

# php - 计算总评分

> ID：15016373
> 
> 赞同：1
> 
> 时间：2013-02-22T03:34:17.007
> 
> 标签：php, mysql, math, logic

如果我有一系列 10 个对象，评分从 1 到 10。那么我如何计算总体评分？

例如，如果我有一个这样的列表：

```
Entertainment - 8/10
Fun - 9/10
Comedy - 6/10
Dance - 8/10 
```

等等......就像这10个对象。告诉我如何计算 10 的总评分。

```
Overall - ?/10 
```

我的数学很弱。有人告诉我要加总，如果我得到 83 作为答案，那么总评分将为 8.3/10。它是否正确？

我正在为我的 PHP 网站执行此操作。因此，如果有人知道如何为此编写查询，那对我将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:38:31.323

平均总评分，您将得到答案。

如果有 10 项评分标准，那么被告知的那一项将是正确的。

```
SELECT avg(score) FROM tbl 
```

有可用的内置函数参考 [http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:38:42.887

是的，要获得平均值，请将它们加在一起并除以数量。例子：

```
//do a MySQL query instead of this
$result_out_of_10 = array(
    'fun' => 9,
    'comedy' => 6,
    'dance' => 8
);

$total = 0;
$total_results = 0;
foreach( $result_out_of_10 as $result )
{
    $total += $result;
    $total_results++;
}

$final_average_out_of_10 = $total / $total_results;
print "Average rating: $final_average_out_of_10 out of 10."; 
```

**编辑：** Meherzad 有一个更好的方法——使用 MySQL`AVG()`函数——我不知道。改用他的方式（尽管我的方式仍然有效，但代码比必要的多）。

# mysql - 无法通过套接字自制程序连接到本地 MySQL 服务器

> ID：15016376
> 
> 赞同：132
> 
> 时间：2013-02-22T03:34:34.447
> 
> 标签：mysql, homebrew

我最近尝试使用 homebrew ( ) 安装 MySQL，`brew install mysql`当我尝试运行它时，我收到以下错误：

> ERROR 2002 (HY000): 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

没有`/tmp/mysql.sock`也没有`/var/lib/mysql.sock`。

我已经搜索并没有找到任何`mysql.sock`文件。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-08-06T20:47:20.570

当您通过以下方式运行服务器时

> `mysql.server start`

您应该在*/tmp/mysql.sock*中看到套接字。但是，系统似乎期望它在*/var/mysql/mysql.sock*中。要解决此问题，您必须在*/var/mysql*中创建一个符号链接：

> `sudo mkdir /var/mysql`
> 
> `sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock`

这为我解决了。现在我的 phpMyAdmin 可以与*localhost* **和** *127.0.0.1*一起愉快地工作。

归功于[**亨利**](http://www.getsymphony.com/discuss/thread/82299/)

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2019-03-21T19:15:14.393

**警告，这将擦除您的数据库，如果您希望保留它们，请进行备份**

我从另一个 mysql(8.0) 安装中留下了一些目录，这些目录没有被删除。

我通过执行以下操作解决了这个问题：

首先卸载mysql

```
brew uninstall mysql@5.6 
```

删除未删除的文件夹/文件

```
rm -rf /usr/local/var/mysql
rm /usr/local/etc/my.cnf 
```

重新安装mysql并链接它

```
brew install mysql@5.6
brew link --force mysql@5.6 
```

启用并启动服务

```
brew services start mysql@5.6 
```

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2013-04-24T22:13:51.953

看起来你的mysql服务器没有启动。我通常运行停止命令，然后重新启动它：

```
mysqld stop
mysql.server start 
```

同样的错误，这对我有用。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2013-02-22T03:43:08.270

尝试使用“127.0.0.1”而不是“localhost”进行连接。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2016-01-10T19:23:30.500

1.  如果您在运行以下命令时能够看到“mysql已停止”；

    ```
    brew services list 
    ```

2.  如果您能够使用以下命令启动 mysql；

    ```
    mysql server start 
    ```

这表示; mysql可以手动启动，但是在操作系统启动时不会自动启动。将 mysql 添加到服务将解决此问题。为此，您可以运行以下命令；

```
brew services start mysql 
```

之后，您可以重新启动操作系统并尝试连接到 mysql 以查看它是否自动启动。我做了同样的事情并停止收到以下错误；

> ERROR 2002 (HY000): 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

我希望这有帮助。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-10-27T22:10:02.267

该文件`/tmp/mysql.sock`可能是命名管道，因为它位于临时文件夹中。命名管道是永远不会永久存储的特殊文件。

如果我们制作两个程序，并且我们希望一个程序向另一个程序发送消息，我们可以创建一个文本文件。我们让一个程序在文本文件中写入一些内容，而另一个程序读取我们另一个程序所写的内容。管道就是这样，除了它不会将文件写入我们的计算机硬盘之外，IE 也不会永久存储文件（就像我们在创建文件并保存时所做的那样。）

套接字与管道完全相同。不同之处在于套接字通常在网络上使用——在计算机之间。Socket 向另一台计算机发送信息，或从另一台计算机接收信息。Pipes 和 Sockets 都使用一个临时文件来共享，以便它们可以“通信”。

在这种情况下，很难辨别哪个 MySql 正在使用。不过没关系。

该命令`mysql.server start`应该让“服务器”（程序）运行其无限循环，该循环将创建该特殊文件并等待更改（`listen`写入）。

之后，一个常见的问题可能是 MySql 程序没有权限在你的机器上创建文件，所以你可能必须给它 root 权限

```
sudo mysql.server start 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-10-02T19:07:52.630

安装macos mojave后，必须擦除mysql文件夹`/usr/local/var/mysql`，然后重新安装，`brew install mysql`否则与权限相关的事情会到处出现。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-05-23T00:53:11.750

由于我花了很长时间试图解决这个问题，并且在查找此错误时总是返回此页面，所以我将把我的解决方案留在这里，希望有人能节省我失去的时间。尽管就我而言，我使用的是 mariadb 而不是 MySql，但您仍然可以根据您的需要调整此解决方案。

## 我的问题

是一样的，但我的设置有点不同（mariadb而不是mysql）：

用自制软件安装了 mariadb

```
$ brew install mariadb 
```

启动守护进程

```
$ brew services start mariadb 
```

尝试连接并得到上述错误

```
$ mysql -uroot
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

## 我的解决方案

找出哪些`my.cnf`文件被使用`mysql`（如本[评论](https://stackoverflow.com/questions/10757169/location-of-my-cnf-file-on-macos#comment58805600_10757261)中所建议）：

```
$ mysql --verbose --help | grep my.cnf
/usr/local/etc/my.cnf ~/.my.cnf
                        order of preference, my.cnf, $MYSQL_TCP_PORT, 
```

检查 Unix 套接字文件在哪里运行（几乎如此[处](https://mariadb.com/kb/en/library/troubleshooting-connection-issues/)所述）：

```
$ netstat -ln | grep mariadb
.... /usr/local/mariadb/data/mariadb.sock 
```

（你可能想要`grep mysql`代替 mariadb）

添加您找到的套接字文件`~/.my.cnf`（如有必要，创建文件）（假设从上面`~/.my.cnf`运行`mysql --verbose ...`-command 时列出）：

```
[client]
socket = /usr/local/mariadb/data/mariadb.sock 
```

重新启动你的 mariadb：

```
$ brew services restart mariadb 
```

在此之后，我可以运行 mysql 并得到：

```
$ mysql -uroot
ERROR 1698 (28000): Access denied for user 'root'@'localhost' 
```

所以我用超级用户权限运行命令，输入密码后我得到：

```
$ sudo mysql -uroot
MariaDB [(none)]> 
```

* * *

笔记：

1.  我不太确定您必须添加套接字的组，首先我有它 [client-server] 但后来我认为 [client] 应该足够了。所以我改变了它，它仍然有效。

2.  运行时`mariadb_config | grep socket`我得到： `--socket [/tmp/mysql.sock]` 这有点令人困惑，因为它似乎`/usr/local/mariadb/data/mariadb.sock`是实际位置（至少在我的机器上）

3.  我想知道我可以在哪里配置它`/usr/local/mariadb/data/mariadb.sock`，`/tmp/mysql.sock`这样我就可以使用默认设置而不必编辑我的`.my.cnf`（但我现在太累了，无法弄清楚......）

4.  在某些时候，我还做了其他答案中提到的事情，然后再提出这个问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-10-08T09:18:38.947

我遇到了同样的错误，这对我有帮助：

```
$ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents
$launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist
$mysql -uroot
mysql> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-12-02T04:58:10.423

如果“mysqld”正在运行，则您的数据可能已损坏。尝试运行这个：

```
mysqld 
```

阅读数据墙，并检查 mysqld 是否报告数据库已损坏。腐败可能以许多不直观的方式出现：

*   `mysql -uroot`返回“ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)”。
*   `mysql.server start`返回“错误！服务器退出而不更新 PID”。
*   Sequel Pro 和 MySQL Workbench 响应他们无法连接到 localhost 或 127.0.0.1 上的 MySQL。

要恢复您的数据，请打开 my.cnf 并在该部分中添加以下行`[mysqld]`：

```
innodb_force_recovery=1 
```

重启mysqld：

```
$ brew services restart mysql@5.6 
```

现在您可以连接到它，但它处于有限的只读模式。

如果您使用的是 InnoDB，请运行此命令以导出所有数据：

```
$ mysqldump -u root -p --all-databases --add-drop-database --add-drop-table > data-recovery.sql 
```

该文件是在您的 ~ 目录中创建的。这可能需要一些时间。

完成后，`innodb_force_recovery=1`从 my.cnf 中删除，然后以正常模式重新启动 mysql：

```
$ brew services restart mysql@5.6 
```

删除所有数据库。我使用 Sequel Pro 做到了这一点。**这将删除您的所有原始数据。**在执行此操作之前，请确保您的 data-recovery.sql 看起来不错。还要考虑备份`/usr/local/var/mysql`要格外小心。

然后使用以下命令恢复数据库、表和数据：

```
$ mysql -uroot < ~/data-recovery.sql 
```

这可能是一个漫长的导入/恢复过程。完成后，您就可以开始了！

感谢访问[https://severalnines.com/database-blog/my-mysql-database-corrupted-what-do-i-do-now](https://severalnines.com/database-blog/my-mysql-database-corrupted-what-do-i-do-now)获取恢复说明。该链接有关于 MyISAM 恢复的进一步说明。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-09-04T11:21:14.553

只是为了添加这些答案，在我的情况下，我没有本地 mySQL 服务器，它在 docker 容器中运行。所以套接字文件不存在，“mysql”客户端将无法访问。

sock 文件由 mysqld 创建，mysql 使用它与它通信。但是，如果您的 mySql 服务器不在本地运行，则不需要 sock 文件。

通过指定主机名/IP，不需要 sock 文件，例如

```
mysql --host=127.0.0.1 --port=3306 --user=xyz --password=xyz 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-12-27T11:38:08.770

我在我的 Mac 上遇到了同样的问题并通过以下教程解决了它

[https://mariadb.com/resources/blog/installing-mariadb-10116-mac-os-x-homebrew](https://mariadb.com/resources/blog/installing-mariadb-10116-mac-os-x-homebrew)

但不要忘记在继续之前杀死或卸载旧版本。

命令：

```
brew uninstall mariadb

xcode-select --install

ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" - See more at: https://mariadb.com/resources/blog/installing-mariadb-10116-mac-os-x-homebrew#sthash.XQoxRoJp.dpuf

brew doctor

brew update

brew info mariadb

brew install mariadb

mysql_install_db

mysql.server start 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-03-01T19:51:08.597

您需要运行`mysql_install_db`- 最简单的方法是如果您在安装目录中：

```
$ cd /usr/local/Cellar/mysql/<version>/ 
$ mysql_install_db 
```

或者，您可以提供`mysql_install_db`如下`basedir`参数：

```
$ mysql_install_db --basedir="$(brew --prefix mysql)" 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-08-25T08:42:30.870

运行***mysql_secure_installation***并输入我得到的新密码时：

* * *

> 错误：无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

* * *

[我从这个答案](https://stackoverflow.com/questions/15016376/cant-connect-to-local-mysql-server-through-socket-homebrew/50478351#50478351)尝试以下内容时注意到：

> ```
> netstat -ln | grep mysql 
> ```

它没有返回任何东西，我认为这意味着没有 .sock 文件。

因此，我将以下内容添加到***my.cnf***文件中（在***/etc/my.cnf***或在我的情况下是***/usr/local/etc/my.cnf***）。

在下面：

```
[mysqld]
socket=/tmp/mysql.sock 
```

在下面：

```
[client]
socket=/tmp/mysql.sock 
```

这是基于[这篇文章](https://discourse.brew.sh/t/for-homebrew-mysql-installs-how-to-fix-mysql-sock-path/660)。

然后再次停止/启动 mysql 并重试***mysql_secure_installation***最终让我输入新的 root 密码并继续其他设置首选项。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-09-19T13:35:45.213

就我而言，罪魁祸首是在日志文件中找到的：

```
$ tail /usr/local/var/mysql/<hostname>.lan.err
2019-09-19  7:32:21 0 [ERROR] InnoDB: redo log file './ib_logfile0' exists. Creating system tablespace with existing redo log files is not recommended. Please delete all redo log files before creating new system tablespace.
2019-09-19  7:32:21 0 [ERROR] InnoDB: Database creation was aborted with error Generic error. You may need to delete the ibdata1 file before trying to start up again. 
```

所以我重命名`ib_logfile0`以消除错误（`ib_logfile1`之后我必须这样做）。

```
mv /usr/local/var/mysql/ib_logfile0 /usr/local/var/mysql/ib_logfile0_bak
mv /usr/local/var/mysql/ib_logfile1 /usr/local/var/mysql/ib_logfile1_bak
brew services restart mariadb 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-08-05T10:51:38.707

重新启动后我无法连接到本地 mariadb，搜索也将我带到此页面，我想与您分享我的解决方案。

我注意到 /usr/local/etc/ 中的目录 my.cnf.d 丢失了。

这是自制软件的一个已知错误，在那里进行了描述和解决。[https://github.com/Homebrew/homebrew-core/issues/36801](https://github.com/Homebrew/homebrew-core/issues/36801)

快速修复方法：mkdir /usr/local/etc/my.cnf.d

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2022-01-12T02:08:08.207

如果 brew 没有完成“postinstall”，我只需要使用：

```
sudo chown -R $(whoami) /usr/local/* 
```

然后通过以下方式完成安装后：

```
brew postinstall mysql@5.7 
```

下一步只需启动 mysql@5.7 服务。

它在 MacOS Monterey 上对我有用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-19T07:32:04.367

只是为了完成这个线程。因此 MAMP (PRO) 经常被使用

这里的路径是

```
/Applications/MAMP/tmp/mysql/mysql.sock 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-04-12T09:58:23.523

[ **Linux** ]

虽然答案预计仅适用于 MacOS，但在 Linux 中我们可能会面临同样的错误。

我在 Linux 中遇到了同样的问题。我运行了这个命令：

```
sudo /etc/init.d/mysql.server start 
```

我能够运行 MySQL 服务器

参考。[https://gist.github.com/vinodpandey/1a4b5b8228f9a000ca236820185fc3bc](https://gist.github.com/vinodpandey/1a4b5b8228f9a000ca236820185fc3bc)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-07-06T23:14:03.120

这对我有用：

```
brew upgrade mysql 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-04-18T10:57:55.467

我通过初始化数据库然后启动它在系统首选项窗格中手动启动了 mysql。这解决了我的问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-11-29T11:33:51.747

我有同样的问题。在尝试了所有这些方法都没有成功后，我做了以下事情：

```
tail -f the-mysql-or-maria-db-error-file.err 
```

在另一个控制台中：

```
brew services restart mariadb 
```

我看到以下错误：

> “MAC HOMEBREW 崩溃恢复失败。纠正问题（例如，如果是内存不足错误）并重新启动，或者删除 tc 日志并启动 mysqld”

所以我将扩展更改`tc.log`为`tc.log.txt`并重新启动 mariadb

```
brew services restart mariadb 
```

并做了！

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2020-07-23T14:49:31.607

对我来说，我`mariadb`很久以前就安装了，然后安装了`mysql@5.7`.

当我执行`mysql -uroot`时，我收到错误： `ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)`

阅读答案：

*   我卸载了`mariadb`
*   删除了文件夹`/usr/local/var/mysql`
*   运行命令`mysqld --initialize`

然后我能够`mysql -uroot -p`

# java - 将数据从活动传递到不同应用程序中的android中的服务

> ID：15016377
> 
> 赞同：3
> 
> 时间：2013-02-22T03:34:38.643
> 
> 标签：java, android

我知道您可以在传递数据时使用 Intent。我的问题是，我想从我的活动中调用另一个应用程序中的服务。

这是示例场景...

APP1:LoginActivity --> 传递参数给APP2，调用APP2:VerifyLogin --> 结果返回APP1:LoginActivity

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:22:51.233

1）如果你拥有这两个应用程序，最好从APP1本身调用APP2的服务（即在APP1而不是APP2中定义服务）。

但是如果有两个APP之间通信的情况，你可以实施不同的策略来满足它们，如下所示。

2）**利用广播接收器：**

在 APP2 中注册一个广播接收器，并从 APP1 发送带有所需参数的广播消息，并使用广播接收器机制从 APP2 与 APP1 进行相同的通信。

3）利用[Android接口定义语言（AIDL）](http://developer.android.com/guide/components/aidl.html)，

**谷歌文档**说：

> 它允许您定义客户端和服务都同意的编程接口，以便使用进程间通信 (IPC) 相互通信。

我认为这将使您能够通过定义一些通信协议在两个应用程序之间进行通信。

**示例**：这是一个[很好的教程](http://marakana.com/forums/android/examples/48.html)，它将帮助您了解它的实际工作原理。

希望这会给您一些解决问题的提示。

# php - AJAX 和 JSON 与 PDO MySQL

> ID：15016383
> 
> 赞同：0
> 
> 时间：2013-02-22T03:35:34.627
> 
> 标签：php, jquery, mysql, ajax, json

我正在尝试从属性中获取数据，通过 ajax 将其传递到另一个页面，然后插入到 mysql 中。

现在我有一些 div 元素

```
<div data-categories="[{"name":"Gastropub","pluralName":"Gastropubs"},{"name":"Food","pluralName":"Food"}]">
Name
</div> 
```

**分解它**：

```
-----------------------

    [
        {"name":"Gastropub","pluralName":"Gastropubs"},
        {"name":"Food","pluralName":"Food"},
        {"name":"more","pluralName":"more"}
     ]

------------------------ 
```

data-categories 是我插入 json_encoded 数组并将其弹出的位置。当我试图做的是找出使用 ajax 来获得该值的最佳实践

```
var cats = $('div').data('categories');

$.ajax(function(){
 type:"POST",
 url:"other.php",
 data: "data="+cats,
 success:function(data){
    alert("success");
 }
}); 
```

**其他.php**

现在我试图弄清楚如何将每个值分别保存到我的 MySQL 中`other.php`，如果我有一个包含列的表：`name`并且`pluralName`（可能稍后添加更多）在 MySQL 数据中

```
if(isset($_POST['data'])){

   $insert = $dbh->prepare("INSERT INTO cats(name,pluralName) VALUES(?,?)");

} 
```

如何从一组 json 值中获取这些值并将每个值插入到正确的列中？从上面的例子可以看出，我有超过**1** `name`和`pluralName`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:49:43.440

进行 AJAX 调用类似于：

```
var data = $("div").attr("data-categories");
$.ajax({
type: "POST",
url: "other.php",
data: "data="+data,
function(data){
    alert("success");
 }
}); 
```

如果您在 $_POST 数组中获取数据，那么您可以使用：

```
<?php
$str = $_POST['data'];
$data = json_decode($str, true);
//print_r($data);

for($i=0;$i<count($data);$i++) {
     $insert = "INSERT INTO cats(name,pluralName) VALUES('".$data[$i]['name']."','"+$data[$i]['pluralName']+"')";
//Insert in database

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:39:05.317

尝试这个：

**jQuery**

```
var dataStr = $("div").attr("data-categories");
$.ajax({
    type: "POST",
    url: "other.php",
    data: {data:dataStr},
    success:function(data){
        alert("success");
    }
}); 
```

**PHP 代码**

```
<?php
if(isset($_POST['data']))
{
    $data = $_POST['data'];
    $jsonArray= json_decode($data, true);

    for($i=0;$i<count($jsonArray);$i++) {
        $insert = $dbh->prepare("INSERT INTO cats(name,pluralName) VALUES('".$jsonArray[$i]['name']."','"+$jsonArray[$i]['pluralName']+"')");
    }
}
?> 
```

# asp.net-mvc - 在 MVC4 中实现这个视图的顺序或流程是什么

> ID：15016385
> 
> 赞同：0
> 
> 时间：2013-02-22T03:35:44.277
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4

我还在学习MVC4。

想象以下场景：我有三个 dropDownLists 和一个用于内容的大 div。我不知道如何处理按需加载。

流程很简单，页面加载后，在第一个下拉列表中显示数据。当这个有值时，第二个应该按需加载信息（使用从ddl1中选择的值）等等，直到改变ddl3上的值并显示数据。

直到这里我已经检测到两个部分视图。我不确定是否应该创建 5，因为每个 ddl 都必须在一个局部视图中。

另一件事，你会推荐什么来维护`SelectList`，我应该`ViewBag`在viewModel中使用还是维护foreach ddl的集合？

![在此处输入图像描述](../Images/2a25107aa4a09af664a5292e41590683.png)

我只是想知道您是否可以澄清这种情况。我的意思是，给我一个想法，我该如何开始这样做？事实上，我忘了提到这个疑问，但如果我必须使用 AJAX，我不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:12:14.257

几周前我陷入了同样的困境：-

让您的 MVC 调用如下：-

```
 private void LoadDropdown1()
    {
        var _data;//Your logic to get the data
        ViewData["Dropdown1"] = new SelectList(_data, "Dropdown1Id", "Name");
    }
    private void LoadDropdown2(int dropdownParameterId)
    {
        var _data = "";//Use your ID to get the data
        ViewData["Dropdown2"] = new SelectList(_data, "Dropdown2Id", "Name");
    } 
```

你的 .cshtml 是：-

```
@using (Html.BeginForm())
{
    <div>
        <table>
            <tr>
                <td><b>Select a District:</b></td>

                <td>@Html.DropDownListFor(m => m.Dropdown1Id, ViewData["Dropdown1"] as IEnumerable<SelectListItem>, "Select One", new {@id="Dropdown1Id"})</td>
            </tr>
            <tr>
                <td><b>Select:</b></td>

                <td>@Html.DropDownListFor(m => m.Dropdown2Id, ViewData["Dropdown2"] as IEnumerable<SelectListItem>, "Select One")</td>
            </tr>
        </table>
    </div>
} 
```

现在 AJAX 调用最好将数据加载到您的下拉列表中：-

```
$(function () {
    $('select#Dropdown1').change(function () {
        var id = $(this).val();

        $.ajax({
            url: 'Bla Bla',
            type: 'POST',
            data: JSON.stringify({ id: id }),
            dataType: 'json',
            contentType: 'application/json',
            success: function (data) {
                $.each(data, function (key, data) {
                    $('select#Dropdown1').append('<option value="0">Select One</option>');
                    // loop through the LoadDropdown1 and fill the dropdown
                    $.each(data, function (index, item) {
                        $('select#Dropdown1').append(
                            '<option value="' + item.Id + '">'
                            + item.Name +
                            '</option>');
                    });
                });
            }
        });
    });
}); 
```

我想说的是.. 以您喜欢的方式加载您的第一个下拉列表。然后在第一个下拉列表的更改事件中，您可以触发一个 ajax 调用来获取第二个下拉列表的数据......同样......

参考： -[在选择更改事件 - Html.DropDownListFor](https://stackoverflow.com/questions/5783344/on-select-change-event-html-dropdownlistfor)

# python - 在 Python 中使用系列计算 pi

> ID：15016386
> 
> 赞同：0
> 
> 时间：2013-02-22T03:35:45.850
> 
> 标签：python, python-2.7

```
pi/2 = 1 + 1/3 + (1*2) / (3*5) + (1*2*3) / (3*5*7) + ... 
```

好的，让我们再试一次。

我需要编写一个函数，它将最大误差作为 pi 的值的参数，并返回计算出的 pi 值以及到达该点所需的迭代次数。我不能使用递归算法。

到目前为止，我有：

```
def piEuler (x):
    count = 0.0
    approx = 0.0
    approx2 = 1.0
    error = math.pi/2 - approx2
    while error > x:
        count = count + 1
        approx3 = approx + approx2
        error = math.pi/2 - approx3
        #print error
        approx = approx + approx2
        approx2 = approx2 * count/(count + 2)
        #print approx2
    final = math.pi - error
    return final, count 
```

问题是程序返回负值。误差应该收敛到零。我需要能够从 pi 的接受值中减去我的错误，以从系列中获得近似值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:54:21.550

这有效：

```
import math

def piEuler(x):

    halfpi    = math.pi / 2.0
    count     = 0
    approx    = 1.0
    divisor   = 1
    numerator = 1
    while True:
        count     += 1
        numerator *= count
        divisor   *= 2*count + 1
        approx    += float(numerator) / float(divisor)
        error      = halfpi - approx

        if error < x:
            return (math.pi - error), count 
```

基本区别是：

1.  通过将循环的终止条件切换为测试/中断，我可以删除系列第二项的手动计算
2.  小心使用 int 和 float 数据类型（这可能是您的问题）
3.  更好的变量命名导致更容易调试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:06:31.583

看起来你错误地实现了算法。而不是做`pi/2 = 1 + 1/3 + (1*2)/(3*5) + (1*2*3)/(3*5*7) + ...`，它看起来像你的代码在做`pi/2 = 1 + 1/3 + (1*2)/(3*4) + (1*2*3)/(3*4*5) + ...`。

由于分母最终会变小，因此您将总和增加更多，无疑会导致超调并因此产生负误差。

问题出在这一行：

```
approx2 = approx2 * count/(count + 2) 
```

如您所见，何时`count`是偶数，`count + 2`将是偶数。一个简单的解决方法是将其更改为：

```
approx2 = approx2 * count/(2 * count + 1) 
```

这是一个有效的示例算法，但使用术语之间的相对误差而不是绝对误差（不想放弃一切；））：

```
from __future__ import division

def half_pi(max_err=10**-6, max_iter=10000):
    partial_sum = cur_term = 1
    n = 1
    while abs(t) > max_err and n < max_iter:
        cur_term = cur_term * (n / (2 * n + 1))
        partial_sum += cur_term
        n += 1
    return partial_sum, n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:03:09.647

您应该尝试重写例程，以使序列中的最小项（代码中的*approx2*）必须大于错误。

在你最后的错误计算中你也有'math.pi'。它必须是 math.pi/2 吗？

似乎错误的性质也在波动！

# assembly - 在汇编 x86-64 中划分 longfloat 和 int

> ID：15016389
> 
> 赞同：0
> 
> 时间：2013-02-22T03:35:59.147
> 
> 标签：assembly, x86-64, fpu, x87

我有一个程序，只要用户输入 Y（是），我就会循环。然后用户输入 long float 类型的数据。我还有一个计数器，r14，每次输入长浮点数时都会计数。循环结束后，我希望计算平均值。如果我这样做：

```
fld tword [r14] 
```

并显示它，我会得到一个分段错误。我也尝试了很多其他的东西，但它总是给我一个段。尝试分割显示后出现故障。我认为问题在于 r14 是一个 int，我不能像那样将它放入 FPU 堆栈并进行划分。但我想不出另一种方法。

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:57:55.657

FPU 指令从内存或 FPU 寄存器中获取参数，而不是从通用 CPU 寄存器中获取参数。

`fld tword [r14]``tword`从包含在的地址的内存位置获取 a`r14`并将其推送到 FPU 堆栈的顶部。

如果`r14`不指向可以读取 10 字节浮点值的内存位置，则会出现分段错误。

因此，将您的浮点数存储在内存中并使用`fld`.

# c# - 实体框架将更改的数据保存为副本

> ID：15016393
> 
> 赞同：0
> 
> 时间：2013-02-22T03:36:33.937
> 
> 标签：c#, entity-framework-5

我需要将数据更改为原始模型的副本/如果这样不好，这会影响原始数据吗？

```
var val = context.RecordsContent.Find(id);
val.Text = "CHANGED";
var newval = new LocalizedText { Record = val.Record, Text = val.Text, Mask = val.Mask, Type = val.Type, Rev = val.Rev + 1 };
context.RecordsContent.Add(newval); 
```

我需要使用另一个上下文实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:50:16.377

您的代码尚未保留更改；但是，在`SaveChanges`调用之后，它将保存新值`val.Text`以及新`newVal`对象。

如果您不想保留所做的更改，`val`您可以通过创建一个新对象并设置其所有属性来制作副本，这几乎就是您已经在做的事情`newvVal`

# php - 将数组传递给模型？

> ID：15016396
> 
> 赞同：1
> 
> 时间：2013-02-22T03:37:09.783
> 
> 标签：php, mysql, codeigniter, variable-assignment

只是为了澄清这里**的所有答案**都完美无缺！我选择了 Edwins，因为他第一次发布。

```
$this -> load -> model('staff_model');
            $this -> load -> library('encrypt');

            $arrData = array(
                'anum' => $this -> encrypt -> encode($this->input->post('anum')),
                'first' => $this -> input -> post('fname'),
                'last' => $this -> input -> post('lname'),
                'why' => $this -> input -> post('why'),
                'aidyear' => $this -> input -> post('aidyear'),
                'signintime' => NULL,
                'comments' => $this -> input -> post('comments'),
                );

            if ($insert = $this -> staff_model -> session($arrData)) {
                redirect('staff_controller/signin_info');
            } else {
                $this -> studentlogin();
            } 
```

模型 ：

```
function session($arrData) {
    $null = NULL;
    $sql2 = "INSERT INTO session (anum, first, last, why, aidyear, signintime, studentcomments) 
             VALUES (?, ?, ?, ?, ?, ?, ?)";
    $insert = $this -> db -> query($sql2, $arrData);

    return $insert;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:01:27.353

你不能像这样定义数组变量。尝试更改为，

```
$data = array (
                    'encrypted' => $this->encrypt->encode('anum'),
                    'first' => $this->input->post('first'),
                    'last'  => $this->input->post('last'),
                    'aidyear' => $this->input->post('aidyear'),
                    'why' => $this->input->post('why'),
                    'comments' => $this->input->post('comments'),
       ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T05:46:19.267

控制器

```
$this -> load -> model('staff_model');
$this -> load -> library('encrypt');
$this->load->library('form_validation');
$this->load->helper('url');

//validate form input
        $this->form_validation->set_rules('anum', 'Anum', 'required');

        other validation rules
                .....

        if ($this->form_validation->run() == FALSE)
        {
                  redirect('back to previous page through controller');
        }else{

    $data = array (
                    'encrypted' => $this->encrypt->encode('anum'),
                    'first' => $this->input->post('first'),
                    'last'  => $this->input->post('last'),
                    'aidyear' => $this->input->post('aidyear'),
                    'why' => $this->input->post('why'),
                    'comments' => $this->input->post('comments'),
       );

     if ($insert = $this -> staff_model -> session($data)) {
         print_r($insert);
    }
} 
```

模型

```
function session($data) {

        $query= $this->db->insert('session', $data); //insert into session table
            return $query->result();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T06:22:54.027

在您的控制器中使用它：

```
$arrData = array(); 
```

//在这样的数组字段中使用与数据库表相同的名称

```
 $arrData['anum'] = $this->encrypt->encode('anum');
    $arrData['first'] = $this->input->post('first');
    $arrData['last'] = $this->input->post('last');
    $arrData['aidyear'] = $this->input->post('aidyear');
    $arrData['why'] = $this->input->post('why');
    $arrData['studentcomments'] = $this->input->post('comments');

  if ($this -> staff_model -> session($arrData)) {
                redirect('staff_controller/signin_info');
  } 
```

在模型中只需使用

// 不需要写变量名，因为我们已经在数组中使用了相同的字段名

```
function session($arrData)
     {
       if($this->db->insert($arrData))
          return true;
        else
          return false;
      } 
```

# macos - 如何导出点分隔的环境变量

> ID：15016403
> 
> 赞同：9
> 
> 时间：2013-02-22T03:38:06.737
> 
> 标签：macos, bash, unix

执行

```
user@EWD-MacBook-Pro:~$ export property.name=property.value 
```

给我

```
-bash: export: `property.name=property.value': not a valid identifier 
```

是否可以在内部具有带点的系统属性？如果是这样怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T03:55:19.340

正如其他人所说，bash 不允许这样做，因此您必须使用自己喜欢的脚本语言来执行此操作。例如，在 Perl 中：

```
perl -e '$ENV{"property.name"} = "property.value"; system "bash"' 
```

这将启动一个`property.name`设置了环境变量的子shell bash，但是您仍然无法从 bash 访问该环境变量（尽管您的程序将能够看到它）。

**编辑**：@MarkEdgar 评论说[env](http://linux.die.net/man/1/env)命令也可以工作：

```
 env 'property.name=property.value' bash # start a subshell, or
 env 'property.name=property.value' command arg1 arg2 ...   # Run your command 
```

像往常一样，如果您需要保护特殊字符免受 shell 的影响，或者想要在属性名称或值中包含空格，则只需要引号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-19T21:03:44.230

今天下午的大部分时间我都在试图弄清楚如何访问 Jenkins 设置的某些属性（传递作业参数 jenkins 使用带点的属性格式）——这是来自 Adrian 的一个很好的提示，是的，它适用于读取脚本也是。我不知道该怎么做，但后来我尝试了：

```
var=`perl -e 'print $ENV{"property.name"};print "\n";'` 
```

这实际上工作得很好。但是，当然，这在以环境中已设置的属性启动的 shell 中工作，即在 Adrian 的示例中，这可以在从他提供的 perl 示例中调用的 bash 实例开始的脚本中工作。如果这个 perl 片段仅在他的 perl 示例之后直接放在同一个 shell 中，则不会。

至少我今天下午学到了一些东西，所以并不是所有的时间都是浪费。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T03:20:53.793

如果您导出这些属性以运行应用程序，则某些程序可以支持将系统属性设置为选项，并允许 `.`在属性名称中。

在 Java 世界中，大多数工具都支持通过`-D`选项设置系统属性，例如，您可以像这样用点设置系统属性`-Dproperty.name=property.value`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T03:45:27.670

Bash 只允许在变量名中使用 '_' 和字母数字字符。这 '。' 不允许。

[http://tldp.org/LDP/abs/html/gotchas.html](http://tldp.org/LDP/abs/html/gotchas.html)

# java - ICEFaces AJAX 重定向到 404

> ID：15016412
> 
> 赞同：0
> 
> 时间：2013-02-22T03:39:14.733
> 
> 标签：java, jsf, icefaces

编辑：这发生在任何组件 AJAX 调用期间。

我正在使用 ICEFaces 3.2.0 社区和 Spring Security 3.2 构建一个 Web 应用程序，直到几天前，一切都进展顺利。我在页面中有一个 ACE AutoCompleteEntry 组件，它的值附加了一个支持 bean，如下例所示：

```
<ace:autoCompleteEntry id="autoCompleteState"
                   label="State"
                   labelPosition="top"
                   value="#{autoCompleteEntry.selectedText}"
                   rows="10" width="160"
                   filterMatchMode="startsWith">
    <f:selectItems value="#{autoCompleteEntry.states}"/>
</ace:autoCompleteEntry> 
```

附上的backing bean如下：

```
@ManagedBean(name=AutoCompleteEntry.BEAN_NAME)
@SessionScoped

public class AutoCompleteEntry implements Serializable {
    public static final String BEAN_NAME = "autoCompleteEntry";

    public static final String STATE_FILENAME = "State_Names.txt";
    public static final String RESOURCE_PATH = "/resources/selectinputtext/";

    public AutoCompleteEntry() {        
    }

    public List<SelectItem> states;    
    public List<SelectItem> getStates() {
        if(states == null) {
            states = new ArrayList<SelectItem>();
            for(String state : readStateFile()) {
                states.add(new SelectItem(state));
            }
        }
        return states;
    }

    private String selectedText = null;
    public String getSelectedText() {return selectedText;}
    public void setSelectedText(String selectedText) {this.selectedText = selectedText;}

    private static List<String> readStateFile() {
        InputStream fileIn = null;
        BufferedReader in = null;

        try {
            FacesContext fc = FacesContext.getCurrentInstance();
            ExternalContext ec = fc.getExternalContext();
            fileIn = ec.getResourceAsStream(AutoCompleteEntry.RESOURCE_PATH + STATE_FILENAME);

            if(fileIn != null) {
                in = new BufferedReader(new InputStreamReader(fileIn));
                List<String> loadedStates = new ArrayList<String>(53);
                String read;
                while((read = in.readLine()) != null) {
                    loadedStates.add(read);
                }

                return loadedStates;
            }
        }catch (IOException failedRead) {
            failedRead.printStackTrace();
        }finally {
            try {
                if(in != null) {
                    in.close();
                }
            }catch (IOException failedClose) {
                failedClose.printStackTrace();
            }
        }

        List<String> errorReturn = new ArrayList<String>(1);
        errorReturn.add("Error Loading State List");
        return errorReturn;
    }
} 
```

问题是，每次我尝试测试组件而不是显示状态列表时，它都会重定向到我的主页的绝对路径，这会导致 404。在开发人员工具中，我看到以下错误：

```
> Uncaught TypeError: Cannot read property 'value' of undefined
bridge.uncompressed.js.jsf:2701
namespace.onAfterUpdate.viewIDElement bridge.uncompressed.js.jsf:2701
apply bridge.uncompressed.js.jsf:122
(anonymous function) bridge.uncompressed.js.jsf:484
(anonymous function) bridge.uncompressed.js.jsf:363
(anonymous function) bridge.uncompressed.js.jsf:240
broadcast bridge.uncompressed.js.jsf:483
(anonymous function) bridge.uncompressed.js.jsf:1928
sendEvent jsf.js.jsf:1447
AjaxEngine.req.sendRequest jsf.js.jsf:1333
request jsf.js.jsf:1834
fullSubmit bridge.uncompressed.js.jsf:2309
submit bridge.uncompressed.js.jsf:2314
iceSubmit compat.uncompressed.js.jsf:1523
onclick 
```

开发者工具日志显示：

```
> [window] persisted focus for element "autoCompleteState_input"
bridge.uncompressed.js.jsf:1252
[window] full submit to localhost:8181/HHCA_Portal/pages/secure/HHCA.jsf
javax.faces.execute: @all
javax.faces.render: patientRecordsForm
javax.faces.source: autoCompleteState_input
view ID: v33tl98j
event type: unknown bridge.uncompressed.js.jsf:1252
XHR finished loading: "localhost:8181/HHCA_Portal/pages/secure/HHCA.jsf".
jsf.js.jsf:1334
AjaxEngine.req.sendRequest jsf.js.jsf:1334
request jsf.js.jsf:1834
fullSubmit bridge.uncompressed.js.jsf:2309
ice.ace.AjaxRequest ace-jquery.uncompressed.js.jsf:20854
ice.ace.ab ace-jquery.uncompressed.js.jsf:20779
ice.ace.Autocompleter.getUpdatedChoices autocompleteentry.js.jsf:695
ice.ace.Autocompleter.onObserverEvent autocompleteentry.js.jsf:637
(anonymous function) 
```

我花了很多时间来解决这个问题和其他问题，但我已经没有想法了。如果有人有某种帮助，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:15:05.490

如果您使用的是 JSF 2，那么您可以添加自己的异常处理程序，这应该能够捕获 ajax 请求。

```
<factory>
  <exception-handler-factory>
    test.MyExceptionHandlerFactory
  </exception-handler-factory>
</factory> 
```

看这里的例子，

[http://balusc.blogspot.com/2012/03/full-ajax-exception-handler.html](http://balusc.blogspot.com/2012/03/full-ajax-exception-handler.html)

[http://wmarkito.wordpress.com/2012/04/05/adding-global-exception-handling-using-jsf-2-x-exceptionhandler/](http://wmarkito.wordpress.com/2012/04/05/adding-global-exception-handling-using-jsf-2-x-exceptionhandler/)

# c# - 如何在整个 Windows 操作系统中更改光标（图像）

> ID：15016414
> 
> 赞同：10
> 
> 时间：2013-02-22T03:39:23.840
> 
> 标签：c#, .net

我需要在所有窗口中更改光标，而不仅仅是在应用程序中，我试过这个：

```
this.Cursor = Cursors.WaitCursor; 
```

还有这个：

```
System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.WaitCursor; 
```

但它只会更改我的应用程序中的光标。

任何的想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T03:53:20.673

假设您有自己的光标文件（.cur）来应用，您可以破解它。

首先，您必须更改注册表中的默认箭头光标，然后您需要调用一些 P-Invoke 以允许操作系统更新当前系统参数，以便光标实际更改。

像：

```
 private void ChangeCursor(string curFile)
    {
        Registry.SetValue(@"HKEY_CURRENT_USER\Control Panel\Cursors\", "Arrow", curFile);
        SystemParametersInfo(SPI_SETCURSORS, 0, null, SPIF_UPDATEINIFILE | SPIF_SENDCHANGE); 
    }

    const int SPI_SETCURSORS = 0x0057; 
    const int SPIF_UPDATEINIFILE = 0x01; 
    const int SPIF_SENDCHANGE = 0x02; 

    [DllImport("user32.dll", EntryPoint = "SystemParametersInfo")]
    public static extern bool SystemParametersInfo(uint uiAction, uint uiParam, uint? pvParam, uint fWinIni); 
```

用法：

```
 ChangeCursor(@"C:\MyCursor.cur"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T03:47:16.917

# 不修改注册表就无法更改整个操作系统的光标。

您需要修改注册表以更改光标。

请参阅此处以获取教程和`Registry`您需要修改的确切键 - 以编程方式。

[http://www.thebitguru.com/articles/14-Programmatically+Changing+Windows+Mouse+Cursors](http://www.thebitguru.com/articles/14-Programmatically+Changing+Windows+Mouse+Cursors)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T03:47:30.870

```
[DllImport("user32.dll", EntryPoint = "SystemParametersInfo")]
public static extern bool SystemParametersInfo(uint uiAction, uint uiParam, ref uint pvParam, uint fWinIni);

public enum SystemParametersInfoAction : uint
    {
        SPI_GETBEEP = 0x0001,
        SPI_SETBEEP = 0x0002,
        SPI_GETMOUSE = 0x0003,
        SPI_SETMOUSE = 0x0004,
        SPI_GETBORDER = 0x0005,
        SPI_SETBORDER = 0x0006,
        SPI_GETKEYBOARDSPEED = 0x000A,
        SPI_SETKEYBOARDSPEED = 0x000B,
        SPI_LANGDRIVER = 0x000C,
        SPI_ICONHORIZONTALSPACING = 0x000D,
        SPI_GETSCREENSAVETIMEOUT = 0x000E,
        SPI_SETSCREENSAVETIMEOUT = 0x000F,
        SPI_GETSCREENSAVEACTIVE = 0x0010,
        SPI_SETSCREENSAVEACTIVE = 0x0011,
        SPI_GETGRIDGRANULARITY = 0x0012,
        SPI_SETGRIDGRANULARITY = 0x0013,
        SPI_SETDESKWALLPAPER = 0x0014,
        SPI_SETDESKPATTERN = 0x0015,
        SPI_GETKEYBOARDDELAY = 0x0016,
        SPI_SETKEYBOARDDELAY = 0x0017,
        SPI_ICONVERTICALSPACING = 0x0018,
        SPI_GETICONTITLEWRAP = 0x0019,
        SPI_SETICONTITLEWRAP = 0x001A,
        SPI_GETMENUDROPALIGNMENT = 0x001B,
        SPI_SETMENUDROPALIGNMENT = 0x001C,
        SPI_SETDOUBLECLKWIDTH = 0x001D,
        SPI_SETDOUBLECLKHEIGHT = 0x001E,
        SPI_GETICONTITLELOGFONT = 0x001F,
        SPI_SETDOUBLECLICKTIME = 0x0020,
        SPI_SETMOUSEBUTTONSWAP = 0x0021,
        SPI_SETICONTITLELOGFONT = 0x0022,
        SPI_GETFASTTASKSWITCH = 0x0023,
        SPI_SETFASTTASKSWITCH = 0x0024,
        SPI_SETDRAGFULLWINDOWS = 0x0025,
        SPI_GETDRAGFULLWINDOWS = 0x0026,
        SPI_GETNONCLIENTMETRICS = 0x0029,
        SPI_SETNONCLIENTMETRICS = 0x002A,
        SPI_GETMINIMIZEDMETRICS = 0x002B,
        SPI_SETMINIMIZEDMETRICS = 0x002C,
        SPI_GETICONMETRICS = 0x002D,
        SPI_SETICONMETRICS = 0x002E,
        SPI_SETWORKAREA = 0x002F,
        SPI_GETWORKAREA = 0x0030,
        SPI_SETPENWINDOWS = 0x0031,
        SPI_GETHIGHCONTRAST = 0x0042,
        SPI_SETHIGHCONTRAST = 0x0043,
        SPI_GETKEYBOARDPREF = 0x0044,
        SPI_SETKEYBOARDPREF = 0x0045,
        SPI_GETSCREENREADER = 0x0046,
        SPI_SETSCREENREADER = 0x0047,
        SPI_GETANIMATION = 0x0048,
        SPI_SETANIMATION = 0x0049,
        SPI_GETFONTSMOOTHING = 0x004A,
        SPI_SETFONTSMOOTHING = 0x004B,
        SPI_SETDRAGWIDTH = 0x004C,
        SPI_SETDRAGHEIGHT = 0x004D,
        SPI_SETHANDHELD = 0x004E,
        SPI_GETLOWPOWERTIMEOUT = 0x004F,
        SPI_GETPOWEROFFTIMEOUT = 0x0050,
        SPI_SETLOWPOWERTIMEOUT = 0x0051,
        SPI_SETPOWEROFFTIMEOUT = 0x0052,
        SPI_GETLOWPOWERACTIVE = 0x0053,
        SPI_GETPOWEROFFACTIVE = 0x0054,
        SPI_SETLOWPOWERACTIVE = 0x0055,
        SPI_SETPOWEROFFACTIVE = 0x0056,
        SPI_SETCURSORS = 0x0057,
        SPI_SETICONS = 0x0058,
        SPI_GETDEFAULTINPUTLANG = 0x0059,
        SPI_SETDEFAULTINPUTLANG = 0x005A,
        SPI_SETLANGTOGGLE = 0x005B,
        SPI_GETWINDOWSEXTENSION = 0x005C,
        SPI_SETMOUSETRAILS = 0x005D,
        SPI_GETMOUSETRAILS = 0x005E,
        SPI_SETSCREENSAVERRUNNING = 0x0061,
        SPI_SCREENSAVERRUNNING = SPI_SETSCREENSAVERRUNNING,
        SPI_GETFILTERKEYS = 0x0032,
        SPI_SETFILTERKEYS = 0x0033,
        SPI_GETTOGGLEKEYS = 0x0034,
        SPI_SETTOGGLEKEYS = 0x0035,
        SPI_GETMOUSEKEYS = 0x0036,
        SPI_SETMOUSEKEYS = 0x0037,
        SPI_GETSHOWSOUNDS = 0x0038,
        SPI_SETSHOWSOUNDS = 0x0039,
        SPI_GETSTICKYKEYS = 0x003A,
        SPI_SETSTICKYKEYS = 0x003B,
        SPI_GETACCESSTIMEOUT = 0x003C,
        SPI_SETACCESSTIMEOUT = 0x003D,
        SPI_GETSERIALKEYS = 0x003E,
        SPI_SETSERIALKEYS = 0x003F,
        SPI_GETSOUNDSENTRY = 0x0040,
        SPI_SETSOUNDSENTRY = 0x0041,
        SPI_GETSNAPTODEFBUTTON = 0x005F,
        SPI_SETSNAPTODEFBUTTON = 0x0060,
        SPI_GETMOUSEHOVERWIDTH = 0x0062,
        SPI_SETMOUSEHOVERWIDTH = 0x0063,
        SPI_GETMOUSEHOVERHEIGHT = 0x0064,
        SPI_SETMOUSEHOVERHEIGHT = 0x0065,
        SPI_GETMOUSEHOVERTIME = 0x0066,
        SPI_SETMOUSEHOVERTIME = 0x0067,
        SPI_GETWHEELSCROLLLINES = 0x0068,
        SPI_SETWHEELSCROLLLINES = 0x0069,
        SPI_GETMENUSHOWDELAY = 0x006A,
        SPI_SETMENUSHOWDELAY = 0x006B,
        SPI_GETWHEELSCROLLCHARS = 0x006C,
        SPI_SETWHEELSCROLLCHARS = 0x006D,
        SPI_GETSHOWIMEUI = 0x006E,
        SPI_SETSHOWIMEUI = 0x006F,
        SPI_GETMOUSESPEED = 0x0070,
        SPI_SETMOUSESPEED = 0x0071,
        SPI_GETSCREENSAVERRUNNING = 0x0072,
        SPI_GETDESKWALLPAPER = 0x0073,
        SPI_GETAUDIODESCRIPTION = 0x0074,
        SPI_SETAUDIODESCRIPTION = 0x0075,
        SPI_GETSCREENSAVESECURE = 0x0076,
        SPI_SETSCREENSAVESECURE = 0x0077,
        SPI_GETHUNGAPPTIMEOUT = 0x0078,
        SPI_SETHUNGAPPTIMEOUT = 0x0079,
        SPI_GETWAITTOKILLTIMEOUT = 0x007A,
        SPI_SETWAITTOKILLTIMEOUT = 0x007B,
        SPI_GETWAITTOKILLSERVICETIMEOUT = 0x007C,
        SPI_SETWAITTOKILLSERVICETIMEOUT = 0x007D,
        SPI_GETMOUSEDOCKTHRESHOLD = 0x007E,
        SPI_SETMOUSEDOCKTHRESHOLD = 0x007F,
        SPI_GETPENDOCKTHRESHOLD = 0x0080,
        SPI_SETPENDOCKTHRESHOLD = 0x0081,
        SPI_GETWINARRANGING = 0x0082,
        SPI_SETWINARRANGING = 0x0083,
        SPI_GETMOUSEDRAGOUTTHRESHOLD = 0x0084,
        SPI_SETMOUSEDRAGOUTTHRESHOLD = 0x0085,
        SPI_GETPENDRAGOUTTHRESHOLD = 0x0086,
        SPI_SETPENDRAGOUTTHRESHOLD = 0x0087,
        SPI_GETMOUSESIDEMOVETHRESHOLD = 0x0088,
        SPI_SETMOUSESIDEMOVETHRESHOLD = 0x0089,
        SPI_GETPENSIDEMOVETHRESHOLD = 0x008A,
        SPI_SETPENSIDEMOVETHRESHOLD = 0x008B,
        SPI_GETDRAGFROMMAXIMIZE = 0x008C,
        SPI_SETDRAGFROMMAXIMIZE = 0x008D,
        SPI_GETSNAPSIZING = 0x008E,
        SPI_SETSNAPSIZING = 0x008F,
        SPI_GETDOCKMOVING = 0x0090,
        SPI_SETDOCKMOVING = 0x0091,
        SPI_GETACTIVEWINDOWTRACKING = 0x1000,
        SPI_SETACTIVEWINDOWTRACKING = 0x1001,
        SPI_GETMENUANIMATION = 0x1002,
        SPI_SETMENUANIMATION = 0x1003,
        SPI_GETCOMBOBOXANIMATION = 0x1004,
        SPI_SETCOMBOBOXANIMATION = 0x1005,
        SPI_GETLISTBOXSMOOTHSCROLLING = 0x1006,
        SPI_SETLISTBOXSMOOTHSCROLLING = 0x1007,
        SPI_GETGRADIENTCAPTIONS = 0x1008,
        SPI_SETGRADIENTCAPTIONS = 0x1009,
        SPI_GETKEYBOARDCUES = 0x100A,
        SPI_SETKEYBOARDCUES = 0x100B,
        SPI_GETMENUUNDERLINES = SPI_GETKEYBOARDCUES,
        SPI_SETMENUUNDERLINES = SPI_SETKEYBOARDCUES,
        SPI_GETACTIVEWNDTRKZORDER = 0x100C,
        SPI_SETACTIVEWNDTRKZORDER = 0x100D,
        SPI_GETHOTTRACKING = 0x100E,
        SPI_SETHOTTRACKING = 0x100F,
        SPI_GETMENUFADE = 0x1012,
        SPI_SETMENUFADE = 0x1013,
        SPI_GETSELECTIONFADE = 0x1014,
        SPI_SETSELECTIONFADE = 0x1015,
        SPI_GETTOOLTIPANIMATION = 0x1016,
        SPI_SETTOOLTIPANIMATION = 0x1017,
        SPI_GETTOOLTIPFADE = 0x1018,
        SPI_SETTOOLTIPFADE = 0x1019,
        SPI_GETCURSORSHADOW = 0x101A,
        SPI_SETCURSORSHADOW = 0x101B,
        SPI_GETMOUSESONAR = 0x101C,
        SPI_SETMOUSESONAR = 0x101D,
        SPI_GETMOUSECLICKLOCK = 0x101E,
        SPI_SETMOUSECLICKLOCK = 0x101F,
        SPI_GETMOUSEVANISH = 0x1020,
        SPI_SETMOUSEVANISH = 0x1021,
        SPI_GETFLATMENU = 0x1022,
        SPI_SETFLATMENU = 0x1023,
        SPI_GETDROPSHADOW = 0x1024,
        SPI_SETDROPSHADOW = 0x1025,
        SPI_GETBLOCKSENDINPUTRESETS = 0x1026,
        SPI_SETBLOCKSENDINPUTRESETS = 0x1027,
        SPI_GETUIEFFECTS = 0x103E,
        SPI_SETUIEFFECTS = 0x103F,
        SPI_GETDISABLEOVERLAPPEDCONTENT = 0x1040,
        SPI_SETDISABLEOVERLAPPEDCONTENT = 0x1041,
        SPI_GETCLIENTAREAANIMATION = 0x1042,
        SPI_SETCLIENTAREAANIMATION = 0x1043,
        SPI_GETCLEARTYPE = 0x1048,
        SPI_SETCLEARTYPE = 0x1049,
        SPI_GETSPEECHRECOGNITION = 0x104A,
        SPI_SETSPEECHRECOGNITION = 0x104B,
        SPI_GETFOREGROUNDLOCKTIMEOUT = 0x2000,
        SPI_SETFOREGROUNDLOCKTIMEOUT = 0x2001,
        SPI_GETACTIVEWNDTRKTIMEOUT = 0x2002,
        SPI_SETACTIVEWNDTRKTIMEOUT = 0x2003,
        SPI_GETFOREGROUNDFLASHCOUNT = 0x2004,
        SPI_SETFOREGROUNDFLASHCOUNT = 0x2005,
        SPI_GETCARETWIDTH = 0x2006,
        SPI_SETCARETWIDTH = 0x2007,
        SPI_GETMOUSECLICKLOCKTIME = 0x2008,
        SPI_SETMOUSECLICKLOCKTIME = 0x2009,
        SPI_GETFONTSMOOTHINGTYPE = 0x200A,
        SPI_SETFONTSMOOTHINGTYPE = 0x200B,
        SPI_GETFONTSMOOTHINGCONTRAST = 0x200C,
        SPI_SETFONTSMOOTHINGCONTRAST = 0x200D,
        SPI_GETFOCUSBORDERWIDTH = 0x200E,
        SPI_SETFOCUSBORDERWIDTH = 0x200F,
        SPI_GETFOCUSBORDERHEIGHT = 0x2010,
        SPI_SETFOCUSBORDERHEIGHT = 0x2011,
        SPI_GETFONTSMOOTHINGORIENTATION = 0x2012,
        SPI_SETFONTSMOOTHINGORIENTATION = 0x2013,
        SPI_GETMINIMUMHITRADIUS = 0x2014,
        SPI_SETMINIMUMHITRADIUS = 0x2015,
        SPI_GETMESSAGEDURATION = 0x2016,
        SPI_SETMESSAGEDURATION = 0x2017,
    } 
```

# jquery - 如何在没有刷新动画的情况下加载页面？

> ID：15016415
> 
> 赞同：-1
> 
> 时间：2013-02-22T03:39:26.723
> 
> 标签：jquery, css

我能找到的最好的例子是[here](http://mrcthms.com/process)。

网页的标题保持静态，但是当单击菜单项时，下面的容器 div 会动画并发生变化。如果您引用 url，它是一个全新的页面。标题不会刷新，但正文内容会（并动画）。我假设这是使用 jQuery 完成的，但我能找到的唯一资源说使用 #，它确实有效，但我宁愿去一个实际的单独页面。我找不到任何解释这是如何完成的文档，只是在寻找一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:55:40.863

您的问题留下了太多的想象力，无法提供准确的答案。

您可以使用 Ajax 的`XmlHttpRequest`：这将允许您创建自定义页面转换效果。

另一种选择是使用 jQuery。

•这是一个关于制作 jQuery 页面转换[的教程](http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/)

• [jQuery Mobile](http://jquerymobile.com/demos/1.0/docs/pages/page-transitions.html)也支持这个

在您提供更多信息之前，您无法得到比这个更好的答案。

# javascript - 将html字符串写入文档并在IE10中读取其外部html

> ID：15016416
> 
> 赞同：3
> 
> 时间：2013-02-22T03:39:33.437
> 
> 标签：javascript, internet-explorer, dom

我需要将一个 html 字符串写入一个元素，然后从该元素读取生成的外部 html。我需要它在 IE10、最新的 FF、Chrome、Safari、Android、iOS Safari 中工作，但在任何较旧的浏览器中都不需要。在所有非 ie 浏览器中，以下简单方法都有效：

```
var html = WIUI.createElement('html');
html.innerHTML =  htmlString;
console.log(html.outerHTML); 
```

但是在 IE10 中，上述方法以一种不可接受的方式失败。不知何故，html元素有一个与**父文档**匹配的body标签，（不是我给它的html字符串！！！我认为这是浏览器本身的一个疯狂错误）。您可以在此处查看此错误：[https](https://mod.it/iuu_1DcT) ://mod.it/iuu_1DcT ，如果您在 IE10 以外的浏览器中查看该应用程序，则输出正文 onload 函数将匹配输入正文 onload 函数。在 IE10 中，无论输入是什么，它都会将输出 onload 函数设置为 foo()，因为 foo 是父级的 onload 函数。

在 IE10（和所有现代浏览器）中工作的另一种方法是像这样创建和 iframe：

```
var iframe = document.createElement('iframe');
document.body.appendChild(iframe);
var doc = iframe.contentWindow.document;
doc.open();
doc.write(htmlString);
doc.close();
console.log(doc.documentElement.outerHTML); 
```

然而，这有一个不幸的副作用，即写入 iframe 实际上会导致执行我不想要的 html。

根据我的研究，这样的东西应该可以工作（并且在不是 IE 的浏览器中也可以）

```
var doc = document.implementation.createHTMLDocument('temp');
doc.open();
doc.write(htmlString);
doc.close();
console.log(doc.documentElement.outerHTML); 
```

但是在 IE10 中， doc.open 行给出了“未指定的错误”。谁能给我任何线索，或者为什么 IE 与其他浏览器相比如此难以处理此类任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:02:44.387

试试这个伙伴：

```
<html>
  <head>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  </head>
    <body>
    <textarea id="textArea" rows="4" cols="50">
       Empty area
    </textarea>
    <script type="text/javascript">
    jQuery.fn.outerHTML = function(s) {
    return s
        ? this.before(s).remove()
        : jQuery("<p>").append(this.eq(0).clone()).html();
    };

    function doSomething(text) {
       var $wrapper = $('#textArea');
       $wrapper.html('<html><head></head><body><div id="inner">' + text +'</div></body></html>');
       console.log($wrapper.outerHTML());
    }
    doSomething('test');
</script>
</body>
</html> 
```

这将输出：`<textarea id="textArea" rows="4" cols="50">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div id="inner"&gt;test&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</textarea>`到控制台。我**没有**在 IE 10 中测试过它，因为我无权访问它。但它**应该**工作。

归功于为 externalhtml实现[获取选定元素的外部 HTML](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)。

编辑：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:32:21.427

您只需执行以下操作即可在 IE10 中解决此问题：

```
var doc = document.implementation.createHTMLDocument('title');
html = doc.createElement('html');
html.innerHTML =  htmlString;
console.log(html.outerHTML); 
```

由于某种原因，创建一个新文档而不是使用现有文档会导致 IE10 不会损坏正文 onload 属性。

# mysql - 将存储过程的多个结果存储在mysql的一个字段中

> ID：15016417
> 
> 赞同：0
> 
> 时间：2013-02-22T03:39:56.587
> 
> 标签：mysql

```
 CREATE DEFINER=`root`@`localhost` PROCEDURE `SampleProc`()
   BEGIN
           DECLARE X  INT;

           SET X = 1;
           WHILE X  <= 1890 DO
           SET @paperid=(SELECT PaperID FROM scrpd_paper_authors WHERE AuthorID=X);     
       SELECT AuthorID FROM scrpd_paper_authors WHERE PaperID=@paperid
       SET  X = X + 1;
          END WHILE;
   END$$

 DELIMITER ;

mytable                                           scrpd_paper_authrs                            

 ID     co_authors                             PaperID      AuthorId      
 ====   =========                             =========     ========
 1                                                1             1
 2                                                2             2
 3                                                3             3
 4                                                3             4
 5                                                3             5

                         mytable(expected result)

                          ID            co_authors
                         =====          ==========
                           1                 0
                           2                 0
                           3                 4,5
                           4                 3,5
                           5                 3,4 
```

因此，现在 AuthorID 包含多行。我想使用 where 子句将这些行插入表中，但出现此错误：

> “子查询返回多于一行”

例如，如果我在使用 select 时得到结果 1,2,3，我希望它们作为 ID=1 的 1,2,3 存储在 mytable (co_authors) 中。co_authors 是列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:48:45.160

我猜这个查询导致了错误：

```
SET @paperid=(SELECT PaperID FROM scrpd_paper_authors WHERE AuthorID=X); 
```

尝试像这样更改您的查询：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `SampleProc`()
BEGIN
      DECLARE X  INT;

      SET X = 1;
      WHILE X  <= 1890 DO
          INSERT INTO mytable(co_authors)
          SELECT AuthorID FROM scrpd_paper_authors WHERE PaperID in (SELECT PaperID FROM scrpd_paper_authors WHERE AuthorID=X)
          SET  X = X + 1;
      END WHILE;
END$$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:50:32.557

采用

```
DECLARE cur CURSOR FOR select ... 
```

然后迭代`cur`并插入数据

代替

```
SET @paperid=(SELECT ... 
```

# android-arrayadapter - Android：使用 ListFragment 和 ArrayAdapter 实现复选框列表

> ID：15016419
> 
> 赞同：2
> 
> 时间：2013-02-22T03:40:03.370
> 
> 标签：android-arrayadapter, android-listfragment, android-checkbox

我正在将工作应用程序转换为片段。我的复选框列表没有显示标签，我猜是 id。我是 Android/Java 新手，这是我在 Stackoverflow 上的第一篇文章，如果问题很简单或没有遵循正确的协议，我深表歉意。

我的 ListFragment 如下：

```
import java.util.ArrayList;
import java.util.List;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.TextView;

public class DistributionTransFragment extends ListFragment {

protected TextView subheader;
protected Context mContext;
protected DatabaseHandler db;
protected String user_id;
protected String user;
protected String recipients;
protected int number;
protected LayoutInflater inflater;
protected View v;

DistributionArrayAdapter dataAdapter = null;

public DistributionTransFragment(){
    super();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    v = inflater.inflate(R.layout.distribution_fragment, container, false);

    mContext = getActivity().getApplicationContext();

    db = new DatabaseHandler(mContext);

    subheader = (TextView)v.findViewById(R.id.textView2);
    subheader.setText("Spent On?"); 

    displayListView();
    checkButtonClick();

    return v;   
}

private void displayListView() {

    ArrayList<Participant> distributionList = new ArrayList<Participant>();

    Participant participant;

    List<User> users = db.getAllUsers();       

    for (User u : users) {

        user_id = String.valueOf(u.getID());
        user = u.getUser();

        participant = new Participant(user_id, user, false);
        distributionList.add(participant);

    } 

    //create an ArrayAdaptar from the String Array
    dataAdapter = new DistributionArrayAdapter(mContext, R.layout.distributionlist, distributionList);

    setListAdapter(dataAdapter);

}

private class DistributionArrayAdapter extends ArrayAdapter<Participant> {

    private ArrayList<Participant> distributionList;

    public DistributionArrayAdapter(Context context, int textViewResourceId, ArrayList<Participant> distributionList) {
        super(context, textViewResourceId, distributionList);
        this.distributionList = new ArrayList<Participant>();
        this.distributionList.addAll(distributionList);
    }

    private class ViewHolder {

        TextView code;
        CheckBox name;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;
        Log.v("ConvertView", String.valueOf(position));

        if (convertView == null) {

            LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            convertView = inflater.inflate(R.layout.distributionlist, null);
            holder = new ViewHolder();
            holder.code = (TextView) convertView.findViewById(R.id.code);
            holder.name = (CheckBox) convertView.findViewById(R.id.checkBox1);
            convertView.setTag(holder);
            Log.d("HOLDER CODE", (holder.code).toString()); 
            holder.name.setOnClickListener( new View.OnClickListener() {

                public void onClick(View v) {  

                    CheckBox cb = (CheckBox) v ;  
                    Participant participant = (Participant) cb.getTag();  
                    participant.setSelected(cb.isChecked());

                }  
            });  

        } else {

            holder = (ViewHolder) convertView.getTag();
        }

        Participant participant = distributionList.get(position);
        holder.name.setText(participant.getName());
        holder.name.setChecked(participant.isSelected());
        holder.name.setTag(participant);

        return convertView;

    }  

}

private void checkButtonClick() {

    Button myButton = (Button) v.findViewById(R.id.button1);

    myButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            final ArrayList<Participant> distributionList = dataAdapter.distributionList;

            // Do Stuff             

            AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
            builder.setMessage(tempTransaction);
            builder.setCancelable(false);
            builder.setPositiveButton("Commit", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {

                    // Do More Stuff 
                                            Intent intent = new Intent(mContext, Home.class);
                    startActivity(intent);
                }
            });
            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // Do Other Stuff
                    Intent intent = new Intent(mContext, Home.class);
                    startActivity(intent);
                }
            });
            AlertDialog alert = builder.create();
            alert.show();

        }
    });
}

} 
```

我的列表 XML 如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:background="@color/white"
android:padding="15dip" >

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:focusable="false"
    android:focusableInTouchMode="false" />

<TextView
    android:id="@+id/code"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/checkBox1"
    android:layout_alignBottom="@+id/checkBox1"
    android:layout_toRightOf="@+id/checkBox1"
    android:textSize="15sp" />

</RelativeLayout> 
```

我的片段 XML 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="@color/grey"> 

<RelativeLayout
    android:id="@+id/subheader"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/secondheader"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView2"
        style="@style/subheader" />

    <TextView
        android:id="@+id/textView3"
        style="@style/info" />

</RelativeLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/subheader"
    android:layout_above="@+id/footer"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout>

<LinearLayout
    android:id="@id/footer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@color/grey"
    android:layout_alignParentBottom="true" >

    <Button
        android:id="@+id/button1"
        style="@style/button.form"
        android:text="@string/moneyspent" />
</LinearLayout>

</RelativeLayout> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T10:50:34.507

我疯了，所以我想我会发布我的答案，以防其他人有同样的问题。这是我的背景。它应该是：

```
mContext = getActivity(); 
```

# php - 如何不使用直接插件在wordpress中创建广告位？

> ID：15016420
> 
> 赞同：0
> 
> 时间：2013-02-22T03:40:05.743
> 
> 标签：php, wordpress, wordpress-theming, adsense, ads

我刚刚为学生创建了一个新网站，以帮助他们完成最后一年的项目

我已经为此申请了google adsense，然后我将adsense代码添加到了我的网站帖子中，但只有当我发布另一个内容时它才与帖子相关，并且我不想实现插件所以请告诉我如何编辑wordpress 主题，我只想将广告放在顶部（内嵌广告）。

我的[网站](http://www.wantprojects.com)：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:44:28.713

试试这个 - 在代码编辑器中转到 header.php 文件，并在此处插入 adsense 代码，例如在 header 类中或类似这样的东西（通常有注释，以帮助您找到 header 在哪里）

# android - r如何修改此函数以返回图像路径？

> ID：15016423
> 
> 赞同：1
> 
> 时间：2013-02-22T03:40:17.907
> 
> 标签：android, android-gallery

于是我找到了一个提示用户打开设备图库的功能。但是在四处搜索时，我找不到任何可以帮助我修改它以返回图像路径的东西。他们说了一些关于 onActivityResult() 的事情，我把它放在了 void 本身上，然后被拒绝了。对此有什么帮助吗？

```
public void chooser() {
      AlertDialog.Builder myDialog
         = new AlertDialog.Builder(IPAddress.this);

         myDialog.setTitle("Import Menu Images");

         LinearLayout layout = new LinearLayout(IPAddress.this);
         layout.setOrientation(LinearLayout.VERTICAL);
         myDialog.setView(layout);

         myDialog.setPositiveButton("Open Folder", new DialogInterface.OnClickListener() {
             // do something when the button is clicked
             public void onClick(DialogInterface arg0, int arg1) {

                Intent i = new Intent(
                        Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                        startActivityForResult(i, 1);
              }
             });

         myDialog.setNegativeButton("Exit", new DialogInterface.OnClickListener() {
             // do something when the button is clicked
             public void onClick(DialogInterface arg0, int arg1) {
                 arg0.dismiss();
              }
             });

         myDialog.show();
} 
```

我希望它返回所选图像的路径，然后我将使用该路径复制所述文件并将其保存到我在活动的 OnCreate 上创建的目录中。

另外，我似乎无法调试上述功能，因为当我单击“打开文件夹”按钮时，它会给出一个错误提示

`The application Camera(process.com.android.gallery) has stopped unexpectedly. Please try again.`

我已经尝试过多次了。我什至在模拟器中添加了前置摄像头。

该函数在这里调用：

```
 Button menu_image = (Button) findViewById(R.id.menu_image);
    menu_image.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View arg0) {
        chooser();
        }

    }); 
```

因此，如果可能的话，我希望选择器返回一个字符串（？）类型，然后我将其用于文件复制然后重命名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:56:31.553

可以通过以下方式查询默认应用选择器。

```
Button galleryBtn = (Button) view.findViewById(R.id.gallery_btn);
        galleryBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                Intent.createChooser(intent, "Select Picture"), 2);

            }
        }); 
```

您将在活动/片段的 onActivityResult() 中收到所选文件的 URi。

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

        Uri uriString = null;

        if (requestCode == 2 && resultCode == RESULT_OK) {
            Uri uri = data.getData();
            if (uri != null) {

                Cursor cursor = getActivity().getContentResolver()
                        .query(uri,
                                new String[] { android.provider.MediaStore.Images.ImageColumns.DATA },
                                null, null, null);
                cursor.moveToFirst();

                Bitmap bm = BitmapFactory.decodeFile(cursor.getString(0));
                File file = new File(cursor.getString(0));

                uriString = Uri.fromFile(file);

         // do processing with the uri here

                cursor.close();

            }

        }else{
            Log.e("RDT", "Something went wrong.");
            return;
        }
} 
```

# java - Android - 打开跟踪文件时出错：没有这样的文件或目录

> ID：15016424
> 
> 赞同：6
> 
> 时间：2013-02-22T03:40:19.093
> 
> 标签：java, android, nullpointerexception, runtime, android-mediaplayer

我收到了一个奇怪的错误列表，其中一些看似断开连接，但我无法判断，因为我什至无法让我的应用程序加载以进行调试。这是一个非常简单的应用程序，一个单选按钮组中有 3 个单选按钮，每个单选按钮都会触发不同的歌曲播放。

我将首先发布我的清单、我的活动文件和布局，然后发布错误日志。

显现：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.cis298.lab2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity 
            android:label = "@string/app_name"
            android:name = ".LayoutActivity">
            <intent-filter >
                <action android:name = "android.intent.action.MAIN" />

                <category android:name = "android.intent.category.LAUNCHER" />

            </intent-filter>
            ></activity>
    </application>

</manifest> 
```

布局活动：

```
package com.cis298.lab2;

import java.io.IOException;

import com.cis298.lab2.R;

import android.app.Activity;
import android.os.Bundle;
import android.media.MediaPlayer;
import android.widget.RadioGroup;

public class LayoutActivity extends Activity {

    int song;
    MediaPlayer mediaplayer = MediaPlayer.create(this, song);

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);
        try {
            mediaplayer.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        RadioGroup radgrp = (RadioGroup) findViewById(R.id.radiogroup);
        radgrp.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                switch (checkedId){
                case R.id.dance:
                    song = R.raw.redalert;
                    mediaplayer.start();
                    break;
                case R.id.rap:
                    song = R.raw.cannedheat;
                    break;
                case R.id.rock:
                    song = R.raw.movmou8105;
                    break;}
            }
        });
    }
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <RadioGroup
       android:id="@+id/radiogroup"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:layout_alignParentLeft="true"
       android:layout_alignParentTop="true"
       android:orientation="vertical" >

       <RadioButton
           android:id="@+id/rock"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Play Rock" />

       <RadioButton
           android:id="@+id/rap"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Play Rap" 
           android:checked="true"/>

       <RadioButton
           android:id="@+id/dance"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:text="Play Dance"
           android:textAlignment="center" />

   </RadioGroup>

</RelativeLayout> 
```

日志：

> 02-21 20:34:05.044: D/AndroidRuntime(322): 关闭 VM 02-21 20:34:05.044: W/dalvikvm(322): threadid=1: 线程退出但未捕获异常 (group=0x4001d800) 02 -21 20:34:05.094：E/AndroidRuntime(322)：致命异常：主要 02-21 20:34:05.094：E/AndroidRuntime(322)：java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.cis298 .lab2/com.cis298.lab2.LayoutActivity}：java.lang.NullPointerException 02-21 20:34:05.094：E/AndroidRuntime(322)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585) 02- 21 20:34:05.094: E/AndroidRuntime(322): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 02-21 20:34:05.094: E/AndroidRuntime(322): 在 android.app。 ActivityThread.access$2300(ActivityThread.java:125) 02-21 20:34:05.094: E/AndroidRuntime(322):在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 02-21 20:34:05.094: E/AndroidRuntime(322): 在 android.os.Handler.dispatchMessage(Handler.java:99) 02- 21 20:34:05.094: E/AndroidRuntime(322): 在 android.os.Looper.loop(Looper.java:123) 02-21 20:34:05.094: E/AndroidRuntime(322): 在 android.app。 ActivityThread.main(ActivityThread.java:4627) 02-21 20:34:05.094: E/AndroidRuntime(322): at java.lang.reflect.Method.invokeNative(Native Method) 02-21 20:34:05.094: E /AndroidRuntime(322): at java.lang.reflect.Method.invoke(Method.java:521) 02-21 20:34:05.094: E/AndroidRuntime(322): at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:868) 02-21 20:34:05.094: E/AndroidRuntime(322): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 02-21 20: 34:05.094:E/AndroidRuntime(322): 在 dalvik.system.NativeStart.main(Native Method) 02-21 20:34:05.094: E/AndroidRuntime(322): Caused by: java.lang.NullPointerException 02-21 20:34: 05.094: E/AndroidRuntime(322): 在 android.content.ContextWrapper.getResources(ContextWrapper.java:80) 02-21 20:34:05.094: E/AndroidRuntime(322): 在 android.media.MediaPlayer.create(MediaPlayer .java:641) 02-21 20:34:05.094: E/AndroidRuntime(322): at com.cis298.lab2.LayoutActivity.(LayoutActivity.java:15) 02-21 20:34:05.094: E/AndroidRuntime( 322): 在 java.lang.Class.newInstanceImpl(Native Method) 02-21 20:34:05.094: E/AndroidRuntime(322): 在 java.lang.Class.newInstance(Class.java:1429) 02-21 20 :34:05.094: E/AndroidRuntime(322): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 02-21 20:34:05.094: E/AndroidRuntime(322):在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 02-21 20:34:05.094: E/AndroidRuntime(322): ... 11 更多

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:43:31.187

尝试移动 `mediaplayer = MediaPlayer.create(this, song);`到里面`onCreate()`。

由于 Activity 直到 才完全初始化`onCreate()`，这可能是 NPE 的原因。

***但是***，下一个问题是您创建 MediaPlayer 时最初是歌曲当它是实例变量时，`0`int 具有默认值`0`因此，如果移动`MediaPlayer.create`解决*了这个*NPE，下一个错误将是无法找到资源。因此， call`MediaPlayer.create`once`song`会保留一些**有用**的东西。

也许这样的事情会奏效。

```
public class LayoutActivity extends Activity {

  int song;
  MediaPlayer mediaPlayer;

  public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout);

    RadioGroup radgrp = (RadioGroup) findViewById(R.id.radiogroup);
    radgrp.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

      @Override
      public void onCheckedChanged(RadioGroup group, int checkedId) {
        switch (checkedId){
          case R.id.dance:
            song = R.raw.redalert;
            break;
          case R.id.rap:
            song = R.raw.cannedheat;
            break;
          case R.id.rock:
            song = R.raw.movmou8105;
            break;
        }

        mediaplayer = MediaPlayer.create(LayoutActivity.this, song);
        try {
          mediaplayer.prepare();
          mediaplayer.start();
        } catch (IllegalStateException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
        } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
        }
      }
    });
  }
} 
```

如果歌曲没有在其他任何地方使用，您可以将其保留在`onCheckedChanged()`.

# php - 想要部分上传大文件。HTML / PHP

> ID：15016425
> 
> 赞同：1
> 
> 时间：2013-02-22T03:40:25.063
> 
> 标签：php, javascript, html

我想要上传部分文件的 php 脚本。就像一个非常大的文件的前 1 MB。这可以通过常规表单上传在 PHP 中完成吗？就像，它在上传 1mb 后关闭连接......我看过很多上传者（html5/javascript/flash），似乎有些支持“分块”，文件大小限制听起来是我的 1/2想要..但我当然需要知道它只是完整文件的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:44:55.337

如果您愿意使用 javascript，您可以将文件读入客户端上的 blob（这比上传要快得多），删除前 1mb 之后的所有内容，然后通过 ajax 将其发送到 php。从技术上讲，它不是传统的 php 上传表单，但对用户来说似乎是一个。

# ruby-on-rails - 未定义的方法“标题”

> ID：15016430
> 
> 赞同：1
> 
> 时间：2013-02-22T03:41:36.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3

将新指南添加到我的应用程序时，显示操作出现错误。这是因为我更改了显示操作以允许自定义路线...新指南已正确添加到数据库中...

我在guidelines_controller.rb 中的显示动作是

```
def show
    @guideline = Guideline.where(title: params[:title]).first
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @guideline }

    end
  end 
```

模型指南.rb 是

```
attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty 
```

显示视图是

```
<p>Title: <%= link_to @guideline.title, seeguideline_path(@guideline.title) %> </p 
```

错误信息是

控制台说……

```
Started POST "/guidelines" for 127.0.0.1 at 2013-02-22 17:07:29 +1100
Processing by GuidelinesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bQKIkSb4Wzr46FERMbU82Q1qMzd3GrGNq6Nqmr0KNhY=", "guideline"=>{"title"=>"Stackoverflo", "specialty"=>"Dermatology", "hospital"=>"Stack Hospital", "content"=>"www.stackoverflow.com"}, "commit"=>"Create Guideline"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1
   (0.1ms)  begin transaction
  Guideline Exists (0.4ms)  SELECT 1 AS one FROM "guidelines" WHERE (LOWER("guidelines"."hospital") = LOWER('Stack Hospital') AND "guidelines"."title" = 'Stackoverflo') LIMIT 1
  SQL (65.0ms)  INSERT INTO "guidelines" ("content", "created_at", "hospital", "specialty", "subtitle", "title", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["content", "www.stackoverflow.com"], ["created_at", Fri, 22 Feb 2013 06:07:29 UTC +00:00], ["hospital", "Stack Hospital"], ["specialty", "Dermatology"], ["subtitle", nil], ["title", "Stackoverflo"], ["updated_at", Fri, 22 Feb 2013 06:07:29 UTC +00:00], ["user_id", 11]]
  SOLR Request (152.5ms)  [ path=#<RSolr::Client:0x007f9c79f2fc48> parameters={data: <?xml version="1.0" encoding="UTF-8"?><add><doc><field name="id">Guideline 35</field><field name="type">Guideline</field><field name="type">ActiveRecord::Base</field><field name="class_name">Guideline</field><field name="title_text">Stackoverflo</field></doc></add>, headers: {"Content-Type"=>"text/xml"}, method: post, params: {:wt=>:ruby}, query: wt=ruby, path: update, uri: http://localhost:8982/solr/update?wt=ruby, open_timeout: , read_timeout: } ]
   (3.7ms)  commit transaction
Redirected to http://localhost:3000/guidelines/35
  SOLR Request (100.3ms)  [ path=#<RSolr::Client:0x007f9c79f2fc48> parameters={data: <?xml version="1.0" encoding="UTF-8"?><commit/>, headers: {"Content-Type"=>"text/xml"}, method: post, params: {:wt=>:ruby}, query: wt=ruby, path: update, uri: http://localhost:8982/solr/update?wt=ruby, open_timeout: , read_timeout: } ]
Completed 302 Found in 485ms (ActiveRecord: 69.8ms)

Started GET "/guidelines/35" for 127.0.0.1 at 2013-02-22 17:07:30 +1100
Processing by GuidelinesController#show as HTML
  Parameters: {"id"=>"35"}
  Guideline Load (0.2ms)  SELECT "guidelines".* FROM "guidelines" WHERE "guidelines"."id" = ? LIMIT 1  [["id", "35"]]
  Guideline Load (0.2ms)  SELECT "guidelines".* FROM "guidelines" WHERE "guidelines"."title" IS NULL LIMIT 1
  Rendered guidelines/show.html.erb within layouts/application (18.3ms)
Completed 500 Internal Server Error in 83ms

ActionView::Template::Error (undefined method `title' for nil:NilClass):
    6:      
    7:          <div class="guideline span10">
    8:            
    9:          <p>Title: <%= link_to @guideline.title, seeguideline_path(@guideline.title) %> </p>
    10:             <strong> <a href="<%= @guideline.content %>", target = '_blank'>Link to guideline</a> </strong>
    11:             <p>Hospital Name: <%= @guideline.hospital %></p>
    12: 
  app/views/guidelines/show.html.erb:9:in `_app_views_guidelines_show_html_erb__4234346501713687788_70155056040280'
  app/controllers/guidelines_controller.rb:132:in `show' 
```

路线是

```
get '/:title', to: 'guidelines#show', as: :seeguideline 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:48:55.537

您确定您的路线正在通过 :title 参数吗？对于查询的 SQL 请求，您的控制台日志显示什么？我有一种感觉，您的路线并没有通过您认为正在通过的路线...

此外，您还需要处理查询返回为空的情况。让应用程序崩溃可能不是您想要的。

# ajax - 使用knockout和knockout.mapping的多层级联下拉的设计模式是什么？

> ID：15016438
> 
> 赞同：0
> 
> 时间：2013-02-22T03:42:46.107
> 
> 标签：ajax, knockout.js, knockout-mapping-plugin

所以我意识到这个问题看起来有些模糊，但实际上非常具体。

我开始写这个，然后意识到缺乏具体的措辞使它听起来很模糊。所以让我这样说。

我有一个 Order 对象，上面有客户数据。就本例而言，它还有一个汽车订单。

这辆车有一个类别、产品、年份、颜色。为了这个例子，我的订单页面有 4 个下拉菜单，它们一个接一个。类别填充产品填充年份填充颜色。

（我本来打算使用 Make and Model，然后意识到使用“Model”变得令人困惑，哈哈。）

我有几个问题：

1.  我有多层下拉菜单。四个，不只是一个。
2.  我的下拉对象之间没有具体的关联——也就是说，我使用类别中的一个 id 来填充产品，但类别在检索时没有与产品一起提供。这与 KO 在其网站上的购物车示例不同。
3.  我坚持使用上述架构。我需要更改下拉列表，然后发送服务调用以根据所选下拉列表 ID 获取下一个下拉列表。我无法更改服务层以将对象嵌套在一起。
4.  我的订单附带子对象以指示品牌、型号、年份、颜色。但是，由于这些不同，我一直在使用 knockout.mapping 键控数组和自定义绑定处理程序来查找数据对象。谢天谢地，我只需要这样做一次，因为在顶层的对象被替换后，就可以了。

我一直在尝试使用 knockout.mapping 来映射相关对象，特别是考虑到关键的事情。

但是，我完全愿意在淘汰赛中制作对象。

我遇到的问题，这件事真的变成了一场灾难，因为一切都是异步的，除了嵌套在嵌套中的嵌套之外，很难以正确的顺序解决问题。

因此我的问题是——我已经到了完全放弃淘汰赛的地步，这似乎是不对的。感觉就像我非常接近，但它仍然无法正常工作。（通常以错误的顺序加载。）不幸的是，我无法真正发布代码，因为它很大。

问题是，它似乎不应该这么难。感觉就像我错过了淘汰赛和下拉组合的基本设计模式。看看购物车的例子，我开始怀疑多层级联下拉菜单目前在淘汰赛中是不可行的，除非数据全部提前加载。

我真的错过了设计模式吗？如果是这样，请说明。如果没有，请继续说。我想哪个更多的人同意就会被接受。

**更新** 在收到第一条评论后，我意识到我没有对我尝试过的一些解决方案进行太多讨论。

所以，基本上是的，我已经尝试订阅更改事件。我应该强调，这个问题的核心在于我们所有加载这些下拉列表的调用都是网络调用。

发生的问题是更改事件会触发多次 - 一次是在加载下拉列表时，另一次是在值绑定到下拉列表时。至少，这是我的经验。

最终发生的是任何订阅都会触发多次。当它发生时，它会导致负载发生多次。除了我不想多次触发之外，经常会出现下拉菜单加载不正确的问题。我的猜测是，其中一个时间比其他时间“乱七八糟”。

通过各种努力，我得到了类似的结果。它似乎确实将我推向了一些骇人听闻的东西，例如在彼此的回调中嵌套 5 或 6 或 7 个网络调用。似乎必须有更好的方法。

我已经尝试过计算可观察到类似的效果。我曾尝试通过 MVC viewbag 加载一次，等等。每次我尝试某些东西时，我都会被加载奇怪的东西所阻碍，knockout.mapping 插件的行为很奇怪（它显然不会将其键/映射功能添加到现有的淘汰 observables）或只是......其他一些奇怪的问题。

再次，我问，这是淘汰赛根本无法做到的吗？我们的情况是不是太奇特了？还是我错过了一些可以使所有这些工作的方法、函数或对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:00:40.437

淘汰订阅活动将解决您的问题..我认为它并不太复杂..

如果您认为它很复杂，请添加小提琴或代码块。

# linux - 需要帮助将批处理文件转换为 linux shell 脚本

> ID：15016445
> 
> 赞同：1
> 
> 时间：2013-02-22T03:43:36.810
> 
> 标签：linux

我正在将服务器的托管服务提供商从 Windows Server 切换到 Linux Debian，我需要帮助将我的 Run.bat 转换为可执行的 shell 脚本。

Windows 批处理文件：

```
java -cp bin; deps/mail.jar; deps/xstream.jar; deps/xpp3-1.1.4c.jar;
deps/scheduling.jar -server server.Server 
```

当我将它保存为 shell 脚本时，当我“在终端中运行”时它没有正确运行，shell 只是立即打开和关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:57:29.990

在 linux 中，分隔符`:`不是`;`，所以试试这个：

```
$ java -cp bin:deps/mail.jar:deps/xstream.jar:deps/xpp3-1.1.4c.jar:deps/scheduling.jar -server server.Server 
```

复制不带 $ 的命令。$ 用于指示该命令属于 linux shell。

# c# - 从 TFS 移植到 Git

> ID：15016447
> 
> 赞同：0
> 
> 时间：2013-02-22T03:43:40.843
> 
> 标签：c#, .net, visual-studio-2010, git, tortoisegit

我在 TFS 中很受欢迎，但现在我需要移植到 Git。几天后，我遇到了一些问题，需要您的帮助：

*   TFS 定义了 WorkItem，签入将放在这个 WorkItem 中。我很容易在 WorkItem 中获取所有更改的文件以创建部署包。WorkItem 在 TFS 中很棒，因为当我有 2 个同时运行的任务时，我为每个任务创建 2 个 WorkItem，我可以轻松地在我想要的 WorkItem 中签入文件。现在在 Git 上，我找不到这个功能。

*   如何仅归档**选定**提交（1 个或多个提交）中更改的文件。我使用 TortoiseGit 就像一个 GUI 和 Git 源代码控制 Visual Studio 扩展。请帮助我。我不喜欢使用命令行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:47:05.350

Git 是一个版本控制系统，TFS 是版本控制以及许多其他的东西，如任务管理、构建服务器等。

要获得您所追求的功能（如果我理解正确的话），您需要将 git 与 Visual Studio 集成。

幸运的是，微软正在研究可能有所帮助的东西。

[http://www.hanselman.com/blog/GitSupportForVisualStudioGitTFSAndVSPutIntoContext.aspx](http://www.hanselman.com/blog/GitSupportForVisualStudioGitTFSAndVSPutIntoContext.aspx)

另外检查[git-tfs](https://github.com/git-tfs/git-tfs/wiki/Checkintool)命令。似乎其中一些允许您解决工作项

# dalvik - 直接在桌面上执行 Dalvik VM

> ID：15016448
> 
> 赞同：4
> 
> 时间：2013-02-22T03:43:53.287
> 
> 标签：dalvik

当我们在桌面系统上运行其他虚拟机时，是否可以直接在 Dalvik 虚拟机上执行任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:31:08.740

如果我正确理解了您的问题：我正在考虑将`task`问题中提到的 apk （如果是这样，那么以下答案可能对您有所帮助）

如果您将目标连接到主机，则可以使用两种最常见的命令工具：

```
 activity manager (am)  
 package manager (pm) 
```

首先通过命令行安装应用程序`adb install <path_to_apk>`

例如：`adb shell am start -a android.intent.action.MAIN -n com.android.settings/.Settings` 将启动设置。

如果您不知道该包名称或任何活动名称，则从 GUI 启动应用程序，然后使用 logcat 捕获日志，它将向您显示操作、类别、组件。

知道action,category,component使用`am`命令后如上图

请检查此[链接](https://stackoverflow.com/questions/6109234/how-to-runnot-only-install-an-android-application-using-apk-file)

还要检查[文档](http://developer.android.com/tools/help/adb.html#am)

对于 Dalvik 调试器支持，请检查此[链接](http://www.netmite.com/android/mydroid/2.0/dalvik/docs/debugger.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:03:40.900

如果您只想在设备上运行命令行程序，这非常简单。[Android 源代码在dalvik/docs/hello-world.html](http://milk.com/kodebase/dalvik-docs-mirror/docs/hello-world.html) [（原始文档）](https://android.googlesource.com/platform/dalvik/+/master/docs/hello-world.html)中包含描述如何执行此操作的文档，其中包括使用调试器的说明。

这是该页面的示例：

```
% echo 'class Foo {'\
> 'public static void main(String[] args) {'\
> 'System.out.println("Hello, world"); }}' > Foo.java
% javac Foo.java
% dx --dex --output=foo.jar Foo.class
% adb push foo.jar /sdcard
% adb shell dalvikvm -cp /sdcard/foo.jar Foo
Hello, world 
```

# ios - contentsOfDirectoryAtPath：未列出自定义文件扩展名

> ID：15016453
> 
> 赞同：0
> 
> 时间：2013-02-22T03:44:37.783
> 
> 标签：ios, file, customization

例如，在我的项目（iOS）中，我添加了一些文件扩展名（自定义）“.dncx”的文件。自定义文件在 xcode 项目中可见（选中项目到目标的....复选框）。使用以下代码后，我正在打印所有文件的列表。

```
NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:resourcePath error:nil]; 
```

带有 .png、.wav、.plist、.jpg 扩展名的文件都将被打印出来，它们与自定义文件一起存在于同一路径中。

**但是根本没有显示具有自定义扩展名的文件，例如“.dncx”。**

请您指导我，列出自定义的文件扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:05:57.387

这些文件显然不在您认为的目录中。我已经将一些`dncx`文件放入我的包（和`Documents`）中，没有发生任何事件。

典型问题包括：

*   如果您在捆绑包中寻找这些文件，问题是它们是否包含在捆绑包中。如果你打开你的目标设置，选择“Build Phases”选项卡，展开“Copy Bundle Resources”，看看你的dcnx文件是否列在那里；如果没有，请立即单击“复制捆绑资源”列表末尾的“+”按钮将它们添加到那里；

    ![复制捆绑资源](../Images/54ffb68ac9703ab5eac490f8af713481.png)

*   同样，如果您要在包中查找这些文件，请确保它们没有被意外放入包中的另一个文件夹中；

*   如果你想从外部确认你的包或`Documents`文件夹的内容，我会在模拟器上运行应用程序，然后导航到有问题的文件夹（例如“~/Library/Application Support/iPhone Simulator/ ...”，看看是否他们在那里......`chflags nohidden ~/Library`如果您`Library`的文件夹隐藏在Finder中（默认情况下），您可能想去终端并输入）。要查看捆绑包内部，一旦您导航到应用程序本身，`control`单击它（或右键单击）并选择“显示包内容”

# android - Phonegap Android：保存的图片显示为缓存组

> ID：15016456
> 
> 赞同：2
> 
> 时间：2013-02-22T03:44:44.693
> 
> 标签：android, cordova, camera, phonegap-plugins, android-gallery

我使用 Phonegap 和 image-resizer 插件通过以下代码将图像保存到 Android 设备中：

```
try {
  // Obligatory Parameters, throw JSONException if not found
  String filename = params.getString("filename");
  filename = (filename.contains(".")) ? filename : filename + "."+ format;
  String directory = params.getString("directory");
  directory = directory.startsWith("/") ? directory : "/"+ directory;
  int quality = params.getInt("quality");
  OutputStream outStream;
  //store the file locally using the external storage directory
  File file = new File(Environment.getExternalStorageDirectory()
    .toString() + directory, filename);
  try {
    outStream = new FileOutputStream(file);
    if (format.equals(FORMAT_PNG)) {
      bmp.compress(Bitmap.CompressFormat.PNG, quality, outStream);
    } else {
      bmp.compress(Bitmap.CompressFormat.JPEG, quality, outStream);
    }
    outStream.flush();
    outStream.close();
    JSONObject res = new JSONObject();
    res.put("url", "file://" + file.getAbsolutePath());
    result = new PluginResult(Status.OK, res);
    scanPhoto(imageData.substring(8));
  } catch (IOException e) {
      result = new PluginResult(Status.ERROR, e.getMessage());
  }
  } catch (JSONException e) {
    result = new PluginResult(Status.JSON_EXCEPTION, e.getMessage());
  }
} 
```

然后它在图库中可用，调用此函数：

```
private void scanPhoto(String imageFileName) {
  Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
  File f = new File(imageFileName);
  Uri contentUri = Uri.fromFile(f);
  mediaScanIntent.setData(contentUri);
  this.cordova.getActivity().sendBroadcast(mediaScanIntent);
} 
```

更新：但是，当我去画廊时，图像位于称为**缓存**的组中，因此我有 2 组相机和缓存。如何将其更改为应用程序的名称？- 在使用我的应用程序名称的文件夹中添加目录后，现在获得了应用程序名称

# bash - 关于 bash 中的函数的神话或事实

> ID：15016457
> 
> 赞同：-2
> 
> 时间：2013-02-22T03:44:50.110
> 
> 标签：bash

我知道 bash 中的函数就像`goto`'s in `c`，这使得脚本有点慢。这是真的？我应该避免还是拥抱功能？

```
function foo(){
bla..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:35:42.827

如果您使用`bash`脚本并担心函数调用会导致速度下降，那么您做错了。使用编译语言（如`c`）...

出于以下原因，您应该接受函数：

*   **可重用性**。您可以在脚本中多次调用函数。调用函数比复制粘贴 10 行代码来执行任务更容易。如果它也位于一个地方，则更容易编辑任务。
*   **抽象**。当你有了一个函数时，你可以重复使用它而不用关心它是如何工作的。（该功能成为一个“黑匣子”）。

我还发现函数更容易阅读——函数名称应该告诉我函数中的代码做了什么，我可以通过查看函数来获得代码的高级视图，而不是完成该函数的具体步骤。

# java - 从 JSP 页面运行 java 应用程序

> ID：15016461
> 
> 赞同：0
> 
> 时间：2013-02-22T03:45:01.373
> 
> 标签：java, class, jsp, execute

此页面上的问题询问如何从 php 页面运行 java 程序： [Run Java class file from PHP script on a website](https://stackoverflow.com/questions/2128619/run-java-class-file-from-php-script-on-a-website)

我想从 JSP 页面做同样的事情。我不想导入类和调用函数或任何复杂的东西。我想要做的就是运行一个命令，例如：从 JSP 页面中进行 java Test，然后通过 Test 将打印到 System.out 的任何内容保存在 JSP 页面中的变量中。

我该怎么做呢？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:27:36.913

您可以通过以下方式执行此操作`Runtime.exec()`：

```
Process p = Runtime.getRuntime().exec("java Test");
BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
String line = input.readLine();
while (line != null) {
  // process output of the command
  // ...
}
input.close();
// wait for the command complete
p.waitFor();
int ret = p.exitValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:41:00.037

由于您已经运行了一个 JVM，您应该能够通过使用 jar 实例化一个类加载器并反射性地找到 main 方法并调用它来做到这一点。

这是一些可能有用的样板：

```
 // add the classes dir and each file in lib to a List of URLs.
    List urls = new ArrayList();
    urls.add(new File(CLASSES).toURL());
    for (File f : new File(LIB).listFiles()) {
        urls.add(f.toURL());
    }

    // feed your URLs to a URLClassLoader
    ClassLoader classloader =
            new URLClassLoader(
                    urls.toArray(new URL[0]),
                    ClassLoader.getSystemClassLoader().getParent());

    // relative to that classloader, find the main class and main method
    Class mainClass = classloader.loadClass("Test");
    Method main = mainClass.getMethod("main",
            new Class[]{args.getClass()});

    // well-behaved Java packages work relative to the
    // context classloader.  Others don't (like commons-logging)
    Thread.currentThread().setContextClassLoader(classloader);

    // Invoke with arguments
    String[] nextArgs = new String[]{ "hello", "world" }
    main.invoke(null, new Object[] { nextArgs }); 
```

# html - 从 R 中的许多 html 文件创建语料库

> ID：15016462
> 
> 赞同：8
> 
> 时间：2013-02-22T03:45:04.397
> 
> 标签：html, r, xml-parsing, text-mining, corpus

我想为下载的 HTML 文件的集合创建一个语料库，然后在 R 中读取它们以进行未来的文本挖掘。

本质上，这就是我想要做的：

*   从多个 html 文件创建语料库。

我尝试使用 DirSource：

```
library(tm)
a<- DirSource("C:/test")
b<-Corpus(DirSource(a), readerControl=list(language="eng", reader=readPlain)) 
```

但它返回“无效的目录参数”

*   一次从 Corpus 中读取 html 文件。不知道该怎么做。

*   解析它们，将它们转换为纯文本，删除标签。很多人建议使用 XML，但是我没有找到处理多个文件的方法。它们都用于一个文件。

非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T07:38:22.437

这应该这样做。在这里，我的计算机上有一个 HTML 文件文件夹（来自 SO 的随机样本），我用它们制作了一个语料库，然后是一个文档术语矩阵，然后完成了一些琐碎的文本挖掘任务。

```
# get data
setwd("C:/Downloads/html") # this folder has your HTML files 
html <- list.files(pattern="\\.(htm|html)$") # get just .htm and .html files

# load packages
library(tm)
library(RCurl)
library(XML)
# get some code from github to convert HTML to text
writeChar(con="htmlToText.R", (getURL(ssl.verifypeer = FALSE, "https://raw.github.com/tonybreyal/Blog-Reference-Functions/master/R/htmlToText/htmlToText.R")))
source("htmlToText.R")
# convert HTML to text
html2txt <- lapply(html, htmlToText)
# clean out non-ASCII characters
html2txtclean <- sapply(html2txt, function(x) iconv(x, "latin1", "ASCII", sub=""))

# make corpus for text mining
corpus <- Corpus(VectorSource(html2txtclean))

# process text...
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, stripWhitespace, skipWords)
a <- tm_map(a, PlainTextDocument)
a <- tm_map(corpus, FUN = tm_reduce, tmFuns = funcs)
a.dtm1 <- TermDocumentMatrix(a, control = list(wordLengths = c(3,10))) 
newstopwords <- findFreqTerms(a.dtm1, lowfreq=10) # get most frequent words
# remove most frequent words for this corpus
a.dtm2 <- a.dtm1[!(a.dtm1$dimnames$Terms) %in% newstopwords,] 
inspect(a.dtm2)

# carry on with typical things that can now be done, ie. cluster analysis
a.dtm3 <- removeSparseTerms(a.dtm2, sparse=0.7)
a.dtm.df <- as.data.frame(inspect(a.dtm3))
a.dtm.df.scale <- scale(a.dtm.df)
d <- dist(a.dtm.df.scale, method = "euclidean") 
fit <- hclust(d, method="ward")
plot(fit) 
```

![在此处输入图像描述](../Images/e47f78c0170932136ba84ee36ad20e6d.png)

```
# just for fun... 
library(wordcloud)
library(RColorBrewer)

m = as.matrix(t(a.dtm1))
# get word counts in decreasing order
word_freqs = sort(colSums(m), decreasing=TRUE) 
# create a data frame with words and their frequencies
dm = data.frame(word=names(word_freqs), freq=word_freqs)
# plot wordcloud
wordcloud(dm$word, dm$freq, random.order=FALSE, colors=brewer.pal(8, "Dark2")) 
```

![在此处输入图像描述](../Images/08c2a01facf0a705b29e2179a9f342b3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T04:12:57.460

这将纠正错误。

```
 b<-Corpus(a, ## I change DireSource(a) by a
          readerControl=list(language="eng", reader=readPlain)) 
```

但我认为要阅读您的 Html，您需要使用 xml 阅读器。就像是 ：

```
r <- Corpus(DirSource('c:\test'),
             readerControl = list(reader = readXML),spec) 
```

但是您需要提供 spec 参数，这取决于您的文件结构。例如见`readReut21578XML`。这是 xml/html 解析器的一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T11:31:51.813

我发现[boilerpipeR](http://cran.r-project.org/web/packages/boilerpipeR/index.html)包对于仅提取html 页面的“核心”文本特别有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:16:55.540

要将所有 html 文件读入 R 对象，您可以使用

```
# Set variables
folder <- 'C:/test'
extension <- '.htm'

# Get the names of *.html files in the folder
files <- list.files(path=folder, pattern=extension)

# Read all the files into a list
htmls <- lapply(X=files,
                FUN=function(file){
                 .con <- file(description=paste(folder, file, sep='/'))
                 .html <- readLines(.con)
                 close(.con)
                 names(.html)  <- file
                 .html
}) 
```

这会给你一个列表，每个元素都是每个文件的 HTML 内容。

我稍后会在解析它时发布，我很着急。

# java - Java没有为compareTo方法的int自动装箱？

> ID：15016464
> 
> 赞同：5
> 
> 时间：2013-02-22T03:45:21.090
> 
> 标签：java, int, compareto, autoboxing

```
class Test{
    public static void main(String[] args){
        int a = 1;
        int b = 5;

        Integer c = new Integer(1);
        Integer d = 5; //autoboxing at work

        System.out.println(c.compareTo(d));
        System.out.println(a.compareTo(b));
    }
} 
```

为什么不`a.compareTo(b)`编译（`int cannot be dereferenced`）？我知道这`compareTo`需要对象，但我认为自动装箱会在必要时自动生成`int`一个。`Integer`为什么在这种情况下不会发生自动装箱？还有哪些其他情况不会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:58:16.950

从[关于 Autoboxing 的 Oracle 教程中](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)，将发生装箱的两种情况是，当原语是：

*   作为参数传递给需要相应包装类的对象的方法。
*   分配给相应包装类的变量。

在您的示例 ( ) 中评估的表达式`a.compareTo(d)`不属于任何一种情况。

[在自动装箱的 JCP 提案](http://jcp.org/aboutJava/communityprocess/jsr/tiger/autoboxing.html)中有一些有趣的附加信息，描述了赋值转换、方法调用转换和强制转换的机制和规则。

# visual-studio-2012 - Microsoft Reporting 2005 与 Visual Studio 2012 .Net 2.0

> ID：15016471
> 
> 赞同：0
> 
> 时间：2013-02-22T03:45:49.713
> 
> 标签：visual-studio-2012, .net-2.0, reporting-services, microsoft-reporting

在 .Net Framework 2.0 下工作时，如何将 Microsoft 报告 2005 包含在 Visual Studio 2012 中？

# c# - 如何自定义 Lucene.NET 以搜索带有不区分大小写的符号的单词（例如“C#”或“.net”）？

> ID：15016473
> 
> 赞同：6
> 
> 时间：2013-02-22T03:45:54.237
> 
> 标签：c#, .net, lucene, lucene.net

标准分析仪不工作。据我所知，它将这更改为搜索`c`和`net`

会起作用，`WhitespaceAnalyzer`但它区分大小写。

一般规则是搜索应该像谷歌一样工作，所以希望它是一个考虑的配置问题`.net`，`c#`已经存在了一段时间，或者有一个解决方法。

根据下面的建议，我尝试了自定义`WhitespaceAnalyzer`，但是如果关键字用逗号分隔并且没有正确处理无空格，例如

```
java,.net,c#,oracle 
```

搜索不正确时不会返回。

我遇到了`PatternAnalyzer`哪个用于拆分令牌，但无法弄清楚如何在这种情况下使用它。

我正在使用`Lucene.Net 3.0.3`和`.NET 4.0`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T10:56:23.357

`SynonymAnalyzer`编写您自己的自定义分析器类，类似于[Lucene.Net – Custom Synonym Analyzer](http://www.codeproject.com/KB/cs/lucene_custom_analyzer.aspx)。您的覆盖可以通过使用和`TokenStream`流水线化流来解决这个问题。`WhitespaceTokenizer``LowerCaseFilter`

请记住，您的索引器和搜索器需要使用相同的分析器。

**更新：处理多个逗号分隔的关键字**

如果您只需要处理不带空格的逗号分隔关键字进行*搜索*，而不是索引，那么您可以将搜索表达式转换`expr`如下。

```
expr = expr.Replace(',', ' '); 
```

然后传递`expr`给`QueryParser`. 如果您想支持其他分隔符，例如 ';' 你可以这样做：

```
var terms = expr.Split(new char[] { ',', ';'} );
expr = String.Join(" ", terms); 
```

但是您还需要检查不应转换的短语表达式，例如“sybase,c#,.net,oracle”（表达式包括引号“字符）（用户正在寻找完全匹配）：

```
expr = expr.Trim();
if (!(expr.StartsWith("\"") && expr.EndsWith("\"")))
{
    expr = expr.Replace(',', ' ');
} 
```

该表达式可能同时包含一个短语和一些关键字，如下所示：

```
"sybase,c#,.net,oracle" server,c#,.net,sybase 
```

然后您需要解析搜索表达式并将其翻译为：

```
"sybase,c#,.net,oracle" server c# .net sybase 
```

如果您还需要处理不带空格的逗号分隔关键字以进行*索引*，那么您需要解析不带空格的逗号分隔关键字的文本并将它们存储在不同的字段中，例如。`Keywords`（必须与您的自定义分析器相关联）。然后您的搜索处理程序需要像这样转换搜索表达式：

```
server,c#,.net,sybase 
```

对此：

```
Keywords:server Keywords:c# Keywords:.net, Keywords:sybase 
```

或更简单地说：

```
Keywords:(server, c#, .net, sybase) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T03:12:17.630

使用`WhitespacerAnalyzer`并将其与[LowerCaseFilter 链接](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/api/core/org/apache/lucene/analysis/LowerCaseFilter.html)。

在搜索和索引时使用相同的链。通过将所有内容都转换为小写，您实际上使其不区分大小写。

根据您的问题描述，这应该可以工作并且易于实现。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-07T16:36:06.877

对于其他可能也在寻找答案的人

最终的答案是使用该令牌过滤器以及 Whitespacetokenizer、lowercasefilter 等创建自定义 TokenFilter 和自定义分析器，总共大约 30 行代码，我将创建一篇博客文章并在我这样做时在此处发布链接，必须先创建一个博客！

# php - 消除多维数组中的重复值

> ID：15016474
> 
> 赞同：0
> 
> 时间：2013-02-22T03:45:54.390
> 
> 标签：php, arrays, multidimensional-array

我想知道消除数组中重复项的最佳方法是什么？目前我正在通过一个 foreach 循环来实际获取这个数组，有没有办法说，如果`id`已经存在，不要插入到数组中？

```
foreach($categories2Sugg as $Category2Sugg)
{

    $category_stringArray2Sugg[] = array("id"=>$Category2Sugg->id,"name"=>$Category2Sugg->name,"pluralName"=>$Category2Sugg->pluralName,"shortName"=>$Category2Sugg->shortName);      

}

Array
(
    [0] => Array
        (
            [id] => 4bf58dd8d48988d16c941735
            [name] => Burger Joint
            [pluralName] => Burger Joints
            [shortName] => Burgers
        )

    [1] => Array
        (
            [id] => 4bf58dd8d48988d16c941735
            [name] => Burger Joint
            [pluralName] => Burger Joints
            [shortName] => Burgers
        )

    [2] => Array
        (
            [id] => 4bf58dd8d48988d16c941735
            [name] => Burger Joint
            [pluralName] => Burger Joints
            [shortName] => Burgers
        )

    [3] => Array
        (
            [id] => 4bf58dd8d48988d14e941735
            [name] => American Restaurant
            [pluralName] => American Restaurants
            [shortName] => American
        )
) 
```

或者如果这个数组已经存在，做另一个函数可能更容易，只需删除一些值以输出一个新数组？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:53:16.123

尝试[array_unique](http://www.php.net/manual/en/function.array-unique.php) php 函数，这将有所帮助。

也试试

```
$unique = array_map('unserialize', array_unique(array_map('serialize', $array)));

echo "<pre>";
print_r($unique);
echo "</pre>"; 
```

上面的代码经过测试。

**完整的测试代码**

```
<?php
$array = array
(
    '0' => array
    (
        'id' => '4bf58dd8d48988d16c941735',
        'name' => 'Burger Joint',
        'pluralName' => 'Burger Joints',
        'shortName' => 'Burgers'
    ),
    '1' => array
    (
        'id' => '4bf58dd8d48988d16c941735',
        'name' => 'Burger Joint',
        'pluralName' => 'Burger Joints',
        'shortName' => 'Burgers'
    ),
    '2' => array
    (
        'id' => '4bf58dd8d48988d16c941735',
        'name' => 'Burger Joint',
        'pluralName' => 'Burger Joints',
        'shortName' => 'Burgers'
    ),
    '3' => array
    (
        'id' => '4bf58dd8d48988d14e941735',
        'name' => 'American Restaurant',
        'pluralName' => 'American Restaurants',
        'shortName' => 'American'
    )
);

$unique = array_map('unserialize', array_unique(array_map('serialize', $array)));

echo "<pre>";
print_r($unique);
?>
```

干杯。

# php - 提交按钮在 IE/Safari 中不起作用，在 Chrome 中起作用并且信息被传递

> ID：15016475
> 
> 赞同：1
> 
> 时间：2013-02-22T03:46:05.270
> 
> 标签：php, forms, submit

我有一个奇怪的问题一直困扰着我。我有一个自制的内容管理系统，对于大多数 CRUD 操作，通过检查数据库中存在哪些字段，以用户友好的方式输出以编辑内容，然后将该内容提交回数据库。这些操作在 Chrome 中完美运行，但是在 Internet Explorer 和 Safari 中，每当我点击提交按钮时，页面似乎只是在不处理任何信息的情况下刷新。

```
function createInsertForm($table, $formDesc, $carry, $carryUrl, $ext='', $formAppend='')
{
    // init globals
    global $cmsdir;
    global $pluginsdir;
    // put it together
    echo '<script type="text/javascript" src="' . $pluginsdir . 'ckfinder/ckfinder.js"></script><script type="text/javascript" src="' . $pluginsdir . 'ckeditor/ckeditor.js"></script>';
    echo '<form action="' . $_SERVER['PHP_SELF'] . '" method="POST" class="form-horizontal" '.$formAppend.'>';
    createForm($table, 'insert', $formDesc);
    createFormButtons('yes', 'yes');
    if ($_POST['submit'] == 'Submit') {
        insertIntoDb($table, $carry, $carryUrl, $ext);
    }
    echo '</form>';
}

function createFormButtons($submit, $reset)
{
    echo '<div class="form-actions-min">';
    if ($submit == 'yes') {
        echo '<input name="submit" type="submit" id="submit" class="btn btn-success">';
    }
    if ($reset == 'yes') {
        echo '<input name="reset" type="reset" id="reset" class="btn btn-warning btn-space">';
    }
    echo '</div>';
} 
```

页面输出示例：

```
<script type="text/javascript" src="../../neou_cms/plugins/ckfinder/ckfinder.js"></script>
<script type="text/javascript" src="../../neou_cms/plugins/ckeditor/ckeditor.js"></script>
    <form action="/neou_cms/external_forms/testimonial.php" method="POST" class="form-horizontal" >
        <div class="form-desc"></div>
        <h3>Input Fields</h3>
        <div class="control-group">
            <label class="control-label">Name</label>
            <div class="controls">
                <input type="text" name="name" value="" class="input-xlarge" id="tag_name" /></div>
        </div>
        <div class="control-group">
            <label class="control-label">Position</label>
            <div class="controls">
                <input type="text" name="position" value="" class="input-xlarge" id="tag_position" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Company</label>
            <div class="controls">
                <input type="text" name="company" value="" class="input-xlarge" id="tag_company" />
            </div>
        </div>
        <h3>Content Fields</h3>
        <div class="control-group">
            <label class="control-label">Quote</label>
            <div class="controls">
                <textarea name="quote" id="quote" rows="8" style="width:305px;"> </textarea>
            </div>
        </div>
        <input type="hidden" name="id" value="175013988" />
        <div class="form-actions-min"><input name="submit" type="submit" id="submit" class="btn btn-success">
            <input name="reset" type="reset" id="reset" class="btn btn-warning btn-space">
        </div>
    </form>
</div> 
```

我希望我可以更具体并提供更好的概述，但这需要很长时间！有没有人遇到过这样的问题，或者可能从我的简短代码中知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T04:03:34.587

您遇到的问题是您没有`value`为`<input type="submit">`按钮指定 a 。由于您没有指定值，因此用户代理可以自由使用他们选择的任何值作为默认标签。在 Chrome 中，它是“提交”。在 IE 和 Safari 中，它是“提交查询”。

避免这个问题的方法是给你的元素添加一个`value`属性：`input`

```
<input type="submit" id="submit" value="Submit"> 
```

# c++ - 将 char 更改为变量（初学者）

> ID：15016478
> 
> 赞同：0
> 
> 时间：2013-02-22T03:46:37.370
> 
> 标签：c++, arrays, char

我只是想通过将它们更改为变量（c = 2，d = 3）来以某种方式计算数组中字符的总和，在这种情况下它应该是 12 即：（c + c + d + c + d）= (2 + 2 + 3 + 2 + 3)。我怎样才能做到这一点？我需要在这段代码中添加一些东西。

```
#include <iostream>

using namespace std;

const int c = 2;
const int d = 3;

int main()
{
    char s[5] = {'c', 'c', 'd', 'c', 'd'};

    int j = sizeof(s) / sizeof(s[0]);
    int k = 0;
    for (int i = 0; i > j; i++)
        k += s[i];                 // end result should be 12

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:51:14.780

您只需将 char 转换为 int 类型，例如使用函数 charToInt：

```
#include <iostream>

using namespace std;

const int c = 2;
const int d = 3;

int charToInt(char c){
swith (c){
case '1' return 1;
case '2' return 2;
case '3' return 3;
case '4' return 4;
case '5' return 5;
case '6' return 6;
case '7' return 7;
case '8' return 8;
case '9' return 9;
default return 0;
}
}

int main()
{
    char s[5] = {'c', 'c', 'd', 'c', 'd'};

    int j = sizeof(s) / sizeof(s[0]);
    int k = 0;
    for (int i = 0; i > j; i++)
        k += charToInt(s[i]);                 // end result should be 12
cout<<k<<endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T03:54:08.883

无需进行任何转换即可计算 12，（您的程序看起来不需要它们），只需使用简单的`if`语句：

```
#include <iostream>

using namespace std;

const int c = 2;
const int d = 3;

int main()
{
    char s[5] = {'c', 'c', 'd', 'c', 'd'};

    int j = sizeof(s) / sizeof(s[0]);
    int k = 0;
    for (int i = 0; i < j; i++){
        if(s[i]== 'c'){
            k += 2 ;                 // Check if the char is c and add accordingly
        }
        if(s[i]== 'd'){
            k += 3 ;                 // Check if the char is d and add accordingly
        }
    }
    cout << k;
} 
```

你会得到`12`你的输出。

这是直播节目的链接：http: [//ideone.com/Y79WFg](http://ideone.com/Y79WFg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T03:56:02.417

最简单的方法是更改​​一行：

```
k += s[i]-97; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T03:59:07.403

```
/* It should be noted that no ethically-trained software engineer would ever
   consent to write a DestroyBaghdad procedure. 
   Basic professional ethics would instead require him to write a DestroyCity 
   procedure, to which Baghdad could be given as a parameter.   
                 -- Nathaniel S. Borenstein, computer scientist*/
const int c = 2;
const int d = 3;

int getOrdinal(char c)
{
   switch(c){
    case 'c': return c;
    case 'd': return d;
    default: return 0;
   }
}
int main()
{
    char s[5] = {'c', 'c', 'd', 'c', 'd'};

    int j = sizeof(s) / sizeof(s[0]);
    int k = 0;
    for (int i = 0; i < j; i++)
        k += getOrdinal(s[i]);                 // end result should be 12
    cout << k; /*now prints 12*/
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T04:05:05.580

如果我只是正确理解您的问题（我可能不是）...首先，您正在尝试通过字符串引用变量...

"char s[5] = {'c', 'c', 'd', 'c', 'd'};"

那是不可能的，编译器不保留变量名。

尝试以下操作：

```
const int c = 2;
const int d = 3;

int main() {

    const int s[5] = {c, c, d, c, d};

    for (int i = 0 i < (sizeof(s)/sizeof(s[0] ++i)
        k += s[i];                 // end result should be 12

} 
```

此外，如果您试图使变量与字母表中的字母匹配......请执行以下操作：

```
#include <iostream>

int main() {

    char *String = "Hello World";

    for (char Pos = 0; Pos < sizeof(String)/sizeof(String[0]) ++Pos)
        cout << String[Pos]-'a'; // Outputs the char values combined (a-0, b-1, c-2 etc)

} 
```

# ruby-on-rails - 命名空间控制器和嵌套资源

> ID：15016482
> 
> 赞同：1
> 
> 时间：2013-02-22T03:47:09.883
> 
> 标签：ruby-on-rails, architecture, namespace-organisation

*同时使用名称间距和*嵌套资源是一个糟糕的主意吗？

我想要一个管理区域，里面有一堆控制器。该区域的一些资源可以嵌套，例如：

```
resources :suppliers do
  resources :products   
  resources :locations
end 
```

虽然像这样命名空间：

```
 map.namespace :admin do |admin|
  resources :suppliers do
    resources :products 
    resources :locations
  end
 end 
```

在这样的命名空间中使用嵌套是否可能/一个好主意？我应该如何构建事物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:44:25.707

为管理区域命名空间是一个好主意，因为它使这些控制器与您的公共/面向用户的控制器分开。这里最大的胜利是安全性，因为您的管理员操作可能能够执行更多操作，并且可能会绕过某些安全限制，例如删除或限制授权量，具体取决于您希望如何构建管理访问权限。

至于嵌套资源，如果有意义就使用它。如果您从不想访问其父资源上下文之外的嵌套资源之一，那么使用嵌套资源是一个不错的选择。

例如，如果供应商可以访问您的管理界面，并且每个管理员的范围仅限于他们的资源，那么嵌套资源可能会使授权更简单，因为您可以简单地通过该嵌套资源进行查询，并且您的授权是简化为检查他们的帐户是否与该供应商相关联。

```
class Admin::ProductsController < AdminController
  before_filter :load_supplier

  # your actions

  def load_supplier
    # Will trigger a 404 if the supplier does not belong to the admin
    @supplier = current_admin.suppliers.find(params[:supplier_id])
  end
end 
```

当然，这实际上取决于您要完成什么，管理区域的预期受众是什么，他们是否可以完全访问所有内容。如果是这样，他们是否需要访问任何关系范围之外的资源。例如，如果我是管理员并且需要对所有产品进行一些搜索/排序/过滤，而不管供应商如何（或者可能由一个或多个供应商过滤），然后从这些约束中生成 CSV/Excel . 在这种情况下，使用嵌套资源可能会使这变得困难或不可能。

我个人发现嵌套资源在面向用户/公众的控制器中更有意义，并且在管理区域更烦人，但是我总是构建仅限于少数人的管理界面。在这种情况下，我通常会求助于像 ActiveAdmin 这样的 gem，它基本上为您提供每个模型的完整 CRUD，并提供大量自定义选项。

# c++ - 使用数组时的常见陷阱：信任类型不安全的链接

> ID：15016484
> 
> 赞同：1
> 
> 时间：2013-02-22T03:47:29.647
> 
> 标签：c++, c, linker

我正在阅读此链接[如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c/4984228#4984228)，第 5 节。使用数组时的常见陷阱，示例如下：

```
// [numbers.cpp]
int numbers[42] = {1, 2, 3, 4, 5, 6, 7, 8, 9};

// [main.cpp]
extern int* numbers;
int main()
{} 
```

由于 numbers.cpp 中的 'numbers' 是数组的名称，它通常可以衰减为等于' **&numbers[0]** '的指针，我希望 main.cpp 中的 'numbers' 值仍然是 '&numbers[0]' . 但不是！相反，它是“**数字[0]** ”，即“1”。

或者假设我是编译器，在 'numbers.cpp' 中，我看到符号 'numbers' 作为**指向 '1' 的地址**，为什么在 'main.cpp' 中这个相同的符号更改为**值 1 '？**

我明白这就是作者所说的“类型不安全的链接”。但我不知道为什么编译器会这样做，即使编译器只是引发类型不匹配的链接错误对我来说更有意义。

## 注释

我想我的理解是，编译器在下面看到是等效的，以便链接器成功，否则会出现“未解决的外部”错误：

```
// [numbers.cpp]
int tmp[42] = {1, 2, 3, 4, 5, 6, 7, 8, 9}; //{1,..9} starts at global address 0x1234
int *numbers = &tmp[0];                    //numbers == 0x1234

// [main.cpp]
extern int* numbers;                       //numbers == 0x1234
int main()
{} 
```

真实情况：

```
// [numbers.cpp]
int numbers[42] = {1, 2, 3, 4, 5, 6, 7, 8, 9}; //{1,..9} starts at global address 0x1234

// [main.cpp]
extern int* numbers;                       //numbers == numbers[0] == 1
int main()
{} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:19:01.730

以下解释方式是否有帮助：

当`a`是数组时（即当编译器知道的类型`a`是数组类型时），那么语法`a[i]`解释为：返回数组的第i个元素。

另一方面，当`a`是一个指针（指向数组的第一个元素）时，相同的语法 ,`a[i]`被解释为：查找存储在 中的地址`a`，添加对应于 i 个元素的字节数，然后返回存储在那里的值。

在`main.cpp`中，它认为那`numbers`是一个指针^((*))并应用相应的动作。也就是说，它查找*存储在 中的值`numbers`*，将其视为地址，添加一定数量的字节并返回*存储在该地址的值。*

^((*))它这样做是因为`numbers`在那里被声明为指针。编译器不知道它真的是一个数组，因为它是分开`main.cpp`编译的`numbers.cpp`（即它是一个单独的翻译单元）。所以它不会把数组衰减成一个指针——它只是假设它已经是一个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:01:06.617

如果 numbers 是一个数组，例如。numbers[]，那么你不能改变它指向的东西。目标文件会将符号“numbers”映射到实际数组 {1, 2, ...} 但如果 numbers 是指针，例如。*numbers，然后您可以更改它指向的内容，目标文件会将符号“numbers”映射到单个指针值（它本身可能指向数组的开头，但我们不知道）。

数组和指针的作用相似，但不是一回事。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-22T04:02:23.000

在 C++ 中，典型的答案是“使用容器”。对于类似数组的容器， std::vector 通常是您想要的。如果您想要最大的性能，std::valarray 可能是一个更好的选择（当然，性能是如果您像使用它一样使用它，例如与 gslice 一起使用）。

一篇更好的文章是“我什么时候可以在 C++ 中使用 C 样式数组”。答：几乎从不，除非您必须与其他软件交互。

# css - 如何在应用程序中包含谷歌地图

> ID：15016486
> 
> 赞同：0
> 
> 时间：2013-02-22T03:47:49.463
> 
> 标签：css, google-maps, css-frameworks

这个问题是特定于设计的。我有一个应用程序可以在地图上显示所有位置都“正常”。但现在我需要设计超越地图的用户界面（按钮、表单等），这些将位于地图的一侧，但无论出于何种原因，一旦更改了某些 CSS 页面，地图就会显示。

我有点绝望，因为我自己的 CSS 或 bootstrap (2.3.0)、foundation (3.2.5) 都不起作用。地图根本没有显示，在控制台中没有错误。事件在更好的情况下显示地图但图形故障（缩放控件混乱，标记位置错误等）这可能正在发生以及我如何解决这个问题。我必须使用 iframe 吗？还是有更好的解决方案？

我已经阅读了有关`max-width: none`修复的信息，但这并没有解决任何问题。为了澄清我使用的地图不是静态的。

如果尝试使用简单的标记和样式，我可以完美地完成地图工作

### 索引.html

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>My App</title>

        <link rel="stylesheet" href="/css/styles.css" media="all">
    </head>
    <body>
        <div id="map" class="map_canvas"></div>
        <script src="https://maps.googleapis.com/maps/api/js?&v=3.exp&sensor=false"></script>
        <script src="/js/app.js"></script>
    </body>
</html> 
```

### 样式.css

```
html, body, .map_canvas {
    margin: 0;
    padding: 0;
    height: 100%;
} 
```

### 应用程序.js

```
google.maps.event.addDomListener(window, 'load', function() {

    options = {
        zoom: 15,
        center: new google.maps.LatLng(10.472937,-73.262308),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map'), options);    
}); 
```

但显然它不足以构建应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:18:50.063

包含使用 iframe 的解决方案，因为这似乎是地图不受 CSS 其余部分影响的唯一方法

### 索引.html

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>My App</title>    
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
    </head>
    <body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span3"></div>
            <div class="span9">
                <iframe id="map_container" src="/map.html" frameborder="0"></iframe>
            </div>
        </div>
    </div>
    <script src="https://maps.googleapis.com/maps/api/js?&v=3.exp&sensor=false"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="/js/app.js"></script>
    </body>
</html> 
```

### 地图.html

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mapa</title>
    <link rel="stylesheet" href="/css/map-styles.css" media="all">
</head>
<body>
    <div id="map" class="map_canvas"></div>
</body>
</html> 
```

### 地图样式.css

```
html, body, .map_canvas {
    margin: 0;
    padding: 0;
    height: 100%;
} 
```

### 应用程序.js

```
google.maps.event.addDomListener(window, 'load', function() {

    var options = {
            zoom: 15,
            center: new google.maps.LatLng(10.472937,-73.262308),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        },
        $iframe = $('#map_container'),
        map_el = $iframe.contents().find('#map')[0],
        map = new google.maps.Map(map_el, options);

        // Match iframe size to parent
        $iframe.width($iframe.parent().width());
        $iframe.height($iframe.parent().height());
}); 
```

# java - 使用延迟加载恢复 JTree 中的扩展/选择状态

> ID：15016489
> 
> 赞同：6
> 
> 时间：2013-02-22T03:48:08.687
> 
> 标签：java, swing, lazy-loading, jtree, defaulttreemodel

我有一个应用程序，它包含一个带有 DefaultTreeModel 支持的 JTree，用于显示文件层次结构，该层次结构反映了我的服务器上文件系统的一部分（我将其称为我的**客户端应用程序**）。我还有一个服务器应用程序，它提供我的客户端应用程序需要显示的数据（我将其称为我的**服务器应用程序**）。我正在使用“延迟加载子项”方法，因此如果用户对它们感兴趣，我只需将文件加载到我的树中。延迟加载方法：

1.  我覆盖`treeWillExpand(TreeExpansionEvent evt)`
2.  我将选择路径设置为扩展节点的路径。
3.  然后我向服务器发送一条消息，询问该节点的子节点。
4.  当服务器响应时，我得到最后选择的路径组件。
5.  然后我使用`DefaultTreeModel.insertNodeInto()`每个返回的数据文件。
6.  最后我打电话`DefaultTreeModel.nodeStructureChanged()`。

以上工作正常，我对懒惰加载孩子没有任何问题。当新数据上传到服务器时，我的问题出现了，我想更新树以不仅包含新数据，而且还将扩展状态和选定节点设置为更新树之前的状态（以便用户不会因为有新数据要查看而在树上猛拉）。流程如下：

1.  新数据上传到服务器
2.  服务器应用程序存档此数据并使用有关上传文件的信息填充数据库。
3.  服务器应用程序通知客户端应用程序新数据已上传。
4.  客户端应用程序使用保存树的展开状态`JTree.getExpandedDescendants()`
5.  客户端应用程序使用保存树的选择路径`JTree.getSelectionPath()`
6.  客户端应用程序从 DefaultTreeModel 中删除所有节点。
7.  客户端应用程序从根节点开始向服务器请求数据。
8.  `JTree.getExpandedDescendants()`客户端应用程序遍历调用枚举`JTree.expandPath()`中的每个 TreePath返回的树路径枚举。
9.  客户端应用程序设置选定的树路径。

我的问题是，无论我尝试什么，树的 GUI 都不会更新以反映扩展状态。我知道我对 expandPath 的调用正在工作，因为我可以看到客户端发送的数据请求以及每次调用 expandPath 时来自服务器的数据响应。我还在另一个窗口中显示有关当前选定节点的信息，它显示了正确选择的节点。但是，唉，令我失望的是，GUI 只显示了根节点（展开）和它的子节点（未展开），而不是之前的展开状态。

所以我的问题是：**如何恢复 JTree 的扩展状态，以便 GUI 在数据模型更新前后保持不变？**

这些是我尝试过的一些事情：

*   我找到[了一个与我的设置相似的线程](https://stackoverflow.com/questions/6252462/jtree-lazy-load-expand)，他的问题通过覆盖解决了`equals()`，`hashCode()`但这对我不起作用。
*   调用扩展的各种方法，例如：`setExpandsSelectedPaths(true)`, `nodeStructureChanged()`,`JTree.invalidate()`
*   保存扩展状态有许多不同的变化，但是，我不相信扩展状态是不正确的，因为我可以看到正确的数据在客户端应用程序和服务器应用程序之间来回传递。

这是我的SSCCE：

```
package tree.sscce;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import java.awt.BorderLayout;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.JButton;
import java.util.Enumeration;
import javax.swing.BoxLayout;
import javax.swing.event.TreeExpansionEvent;
import javax.swing.event.TreeWillExpandListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.ExpandVetoException;
import javax.swing.tree.MutableTreeNode;
import javax.swing.tree.TreePath;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JTextPane;

public class TreeSSCCE extends JFrame implements TreeWillExpandListener {

private static final long serialVersionUID = -1930472429779070045L;

public static void main(String[] args) 
{
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            TreeSSCCE inst = new TreeSSCCE();
            inst.setLocationRelativeTo(null);
            inst.setVisible(true);
            inst.setDefaultCloseOperation(EXIT_ON_CLOSE);
        }           
    });
}

private DefaultMutableTreeNode rootNode;
private JTree tree;
private DefaultTreeModel treeModel;
private TreePath selectionPathPriorToNewData;
private Enumeration<TreePath> expandedPathsPriorToNewData;
private int treeSize = 5;

public TreeSSCCE() {

    this.setBounds(0, 0, 500, 400);
    JPanel mainPanel = new JPanel();
    getContentPane().add(mainPanel, BorderLayout.CENTER);
    mainPanel.setBounds(0, 0, 500, 400);
    mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));

    JPanel descriptionPanel = new JPanel();
    descriptionPanel.setBounds(0, 0, 500, 200);
    mainPanel.add(descriptionPanel);

    JTextPane textPane = new JTextPane();
    String newLine = System.getProperty("line.separator");
    descriptionPanel.setLayout(new BorderLayout(0, 0));
    textPane.setText("Start by expanding some nodes then click 'Add New Data' and you will notice that the tree state is not retained.");
    descriptionPanel.add(textPane);

    // Initialize The Tree
    tree = new JTree();
    rootNode = new DefaultMutableTreeNode("Root");
    treeModel = new DefaultTreeModel(rootNode);
    tree.addTreeWillExpandListener(this);
    tree.setModel(treeModel);
    tree.setShowsRootHandles(true);
    populateTree(false);

    JScrollPane scrollPane = new JScrollPane(tree);
    mainPanel.add(scrollPane);

    JPanel buttonPanel = new JPanel();
    mainPanel.add(buttonPanel);

    JButton btnAddNewData = new JButton("Add New Data");
    btnAddNewData.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            addNewDataToTree();
        }
    });
    buttonPanel.add(btnAddNewData);

}

private void removeAllTreeNodes()
{

    while(!treeModel.isLeaf(treeModel.getRoot()))
    {
        treeModel.removeNodeFromParent((MutableTreeNode)treeModel.getChild(treeModel.getRoot(),0));
    }
    treeModel = null;
    treeModel = new DefaultTreeModel(rootNode);
    tree.setModel(treeModel);
}

public void restoreExpansionState(Enumeration enumeration)
{
    if (enumeration != null) 
    {
        while (enumeration.hasMoreElements()) 
        {
            TreePath treePath = (TreePath) enumeration.nextElement();
            tree.expandPath(treePath);
            tree.setSelectionPath(treePath);
        }
        tree.setSelectionPath(selectionPathPriorToNewData);
    }
}

protected void addNewDataToTree() 
{
    // save the tree state
    selectionPathPriorToNewData = tree.getSelectionPath();
    expandedPathsPriorToNewData = tree.getExpandedDescendants(new TreePath(tree.getModel().getRoot()));
    removeAllTreeNodes();
    populateTree(true);
    restoreExpansionState(expandedPathsPriorToNewData);
}

private void populateTree(boolean newData)
{
    if(newData)
        treeSize++;
    MyParentNode[] parents = new MyParentNode[treeSize];
    for(int i = 0; i < treeSize; i++)
    {
        parents[i] = new MyParentNode("Parent [" + i + "]");
        treeModel.insertNodeInto(parents[i], rootNode, i);
    }
}

@Override
public void treeWillCollapse(TreeExpansionEvent evt) throws ExpandVetoException {
    // Not used.
}

@Override
public void treeWillExpand(TreeExpansionEvent evt) throws ExpandVetoException 
{
    System.out.println("Tree expanding: " + evt.getPath());
    tree.setExpandsSelectedPaths(true);
    tree.setSelectionPath(evt.getPath());
    // we have already loaded the top-level items below root when we
    // connected so lets just return...
    if(evt.getPath().getLastPathComponent().equals(treeModel.getRoot()))
        return;

    // if this is not root lets figure out what we need to do.
    DefaultMutableTreeNode expandingNode = (DefaultMutableTreeNode) evt.getPath().getLastPathComponent();

    // if this node already has children then we don't want to reload so lets return;
    if(expandingNode.getChildCount() > 0)
        return;     
    // if this node has no children then lets add some
    MyParentNode mpn = new MyParentNode("Parent Under " + expandingNode.toString());
    treeModel.insertNodeInto(mpn, expandingNode, expandingNode.getChildCount());
    for(int i = 0; i < 3; i++)
    {
        treeModel.insertNodeInto(new DefaultMutableTreeNode("Node [" + i + "]"), mpn, i);
    }
}

private class MyParentNode extends DefaultMutableTreeNode
{
    private static final long serialVersionUID = 433317389888990065L;
    private String name = "";

    public MyParentNode(String _name)
    {
        super(_name);
        name = _name;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + getOuterType().hashCode();
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        MyParentNode other = (MyParentNode) obj;
        if (!getOuterType().equals(other.getOuterType()))
            return false;
        if (name == null) {
            if (other.name != null)
                return false;
        } else if (!name.equals(other.name))
            return false;
        return true;
    }

    @Override
    public boolean isLeaf()
    {
        return false;
    }

    private TreeSSCCE getOuterType() {
        return TreeSSCCE.this;
    }       
}

} 
```

提前感谢您提供的任何帮助。

PS这是我的第一个问题，所以如果我问得正确，请告诉我（并且放轻松；））。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T18:22:40.470

我正在使用自定义树模型（扩展 DefaultTreeModel）并在 DBTreeEvent.STRUCTURE_CHANGED 事件中做出反应来处理这个问题。这是我为保留旧状态所做的。不知道会不会对你有帮助。。

```
//NOTE: node is the tree node that caused the tree event
TreePath nodesPath = new TreePath(node.getPath());
TreePath currentSel = myTree.getLeadSelectionPath();
List<TreePath> currOpen  = getCurrExpandedPaths(nodesPath);
super.nodeStructureChanged(node);
reExpandPaths(currOpen);
myTree.setSelectionPath(currentSel);

private List<TreePath> getCurrExpandedPaths(TreePath currPath)
{
    List<TreePath> paths = new ArrayList<TreePath>();
    Enumeration<TreePath> expandEnum = myTree.getExpandedDescendants(currPath);
    if (expandEnum == null)
        return null;

    while (expandEnum.hasMoreElements())
        paths.add(expandEnum.nextElement());

    return paths;
}

private void reExpandPaths(List<TreePath> expPaths)
{
    if(expPaths == null)
        return;
    for(TreePath tp : expPaths)
        myTree.expandPath(tp);
} 
```

# asp.net-mvc - 在 MVC 3 中提交时模型字符串属性为空

> ID：15016490
> 
> 赞同：0
> 
> 时间：2013-02-22T03:48:17.620
> 
> 标签：asp.net-mvc

我的模型看起来像：

```
public class MyViewModel
    {
        public MyViewModel()
        {
            MyClasses = new List<MyClass>();
        }

        public List<MyClass> MyClasses{ get; set; }

        [Required(ErrorMessage = "is required.")]
        public string Prop1{ get; set; }

        [Required(ErrorMessage = "is required.")]
        public int Prop2{ get; set; }
    } 
```

我在岗位上的控制器：

```
[HttpPost]
public ActionResult MyActionOnPost(MyViewModel model)
{
//save to DB
//Prop2 is not null but Prop1 is nulll. why??
} 
```

查看代码：

> @Html.TextBoxFor(m => m.Prop2) @Html.ValidationMessageFor(m => m.Prop2)
> 
> @Html.TextBoxFor(m => m.Prop1) @Html.ValidationMessageFor(m => m.Prop1)

`Prop2`我可以在提交时看到价值，但`Prop1`它是`null`. 任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:40:40.970

[DisplayFormat(ConvertEmptyStringToNull = false)]

这是你的答案。将此添加到代码中的每个字符串中，它将完美运行！

# c# - 验证整数

> ID：15016499
> 
> 赞同：-1
> 
> 时间：2013-02-22T03:49:29.543
> 
> 标签：c#, winforms, textbox

我想要一个整数中的小数点。如果小数点不存在，则显示错误消息。

先生，下面的代码写在用户控件文本框中。用户访问用户控件时给出的最大长度。

以下代码限制用户在最大长度后输入小数点。

请运行代码先生，

```
 public virtual int MaximumLength { get; set; }
    private void txtCurrency_KeyPress(object sender, KeyPressEventArgs e)
    {
        txtCurrency.MaxLength = MaximumLength + 3;
        int dotIndex = txtCurrency.Text.IndexOf('.');
        if (e.KeyChar != (char)Keys.Back)
        {
            if (char.IsDigit(e.KeyChar))
            {
                if (dotIndex != -1 && dotIndex < txtCurrency.SelectionStart && txtCurrency.Text.Substring(dotIndex + 1).Length >= 2)
                {
                    e.Handled = true;
                }
                else if (txtCurrency.Text.Length == MaximumLength)
                {
                    if (e.KeyChar != '.')
                    { e.Handled = true; }
                }
            }
            else
            {
                e.Handled = e.KeyChar != '.' || dotIndex != -1 || txtCurrency.Text.Length == 0 || txtCurrency.SelectionStart + 2 < txtCurrency.Text.Length;
            }
        }`enter code here` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:55:12.657

```
decimal myValue = 12.4m;
int value = 0;

if (myValue - Math.Round(myValue) != 0)
{
throw new Exception("Has a decimal point");
}
else
{
value = (int)myValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:00:26.290

您可以使用正则[表达式](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

```
private void textBox2_Validating(object sender, CancelEventArgs e)
{
    Regex r = new Regex(@"^\d+.\d{0,1}$");
    if (r.IsMatch(textBox2.Text))
    {
        MessageBox.Show("Okay");
    }
    else
    {
        e.Cancel = true;
        MessageBox.Show("Error");
    }
} 
```

**更新：**

```
private void textBox2_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!char.IsControl(e.KeyChar)
        && !char.IsDigit(e.KeyChar)
        && e.KeyChar != '.')
        e.Handled = true;

    if (e.KeyChar == '.'
        && (textBox2).Text.IndexOf('.') > -1) //Allow one decimal point
        e.Handled = true;
} 
```

# java - 如何添加自定义 MIME 类型并覆盖默认扩展模式？

> ID：15016500
> 
> 赞同：40
> 
> 时间：2013-02-22T03:49:40.843
> 
> 标签：java, mime, apache-tika

我正在尝试向 Apache Tika 添加自定义 mime 类型。

我有以下`custom-mimetypes.xml`文件`org.apache.tika.mime`：

```
<?xml version="1.0" encoding="UTF-8"?>
<mime-info>
    <mime-type type="text/stringtemplategroup">
        <glob pattern="*.stg"/>
    </mime-type>
    <mime-type type="text/stringtemplate">
        <glob pattern="*.st"/>
    </mime-type>
</mime-info> 
```

我收到关于 a 的错误`Conflicting extension pattern .st`：

```
Caused by: org.apache.tika.mime.MimeTypeException: Conflicting extension pattern: .st
    at org.apache.tika.mime.MimeTypesReader.startElement(MimeTypesReader.java:166)
    at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source) 
```

**如何覆盖`*.st`扩展的默认条目并让它使用我自己的？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-06-13T22:52:46.613

似乎您[需要添加](https://github.com/apache/nifi/blob/master/nifi-nar-bundles/nifi-standard-bundle/nifi-standard-processors/src/main/resources/org/apache/tika/mime/custom-mimetypes.xml)具有`magic`优先级的标签

```
<mime-type type="text/stringtemplate">
    <magic priority="50">
        <!-- some match pattern -->
        <!-- <match value="[some characters]" type="string" offset="0" /> -->
    </magic>
    <glob pattern="*.st"/>
</mime-type> 
```

# windows - Kerberos 子系统遇到错误

> ID：15016509
> 
> 赞同：0
> 
> 时间：2013-02-22T03:50:31.150
> 
> 标签：windows, vb.net

我有 2 个域控制器，一个主控（windows server 2008）和一个辅助（windows server 2000）。我有小代码来检查用户是否属于一个组。

```
Public Function IsInGroup(ByVal user As String, ByVal group As String) As Boolean

    Using identity As New WindowsIdentity(user)
        Dim principal As New WindowsPrincipal(identity)
        Return principal.IsInRole(group)
    End Using

End Function 
```

如果 Win 2008 正在运行，则该功能可以正常工作。但是如果我们关闭主服务器并且从服务器作为激活的域控制器上升，上面的源代码是错误的

> “针对不支持用户服务的域控制器进行了用户协议请求服务”。

任何人都知道这个问题。你能给我一个解决方案吗？

# java - 如何在 EJB 中找到服务器的 IP 地址

> ID：15016511
> 
> 赞同：1
> 
> 时间：2013-02-22T03:50:33.143
> 
> 标签：java, ip, ejb, weblogic, cluster-computing

我已经在由 2 个托管服务器组成的 weblogic 集群中部署了 EJB 应用程序。我需要跟踪女巫物理服务器正在处理来自远程客户端的每一个请求。所以我需要在 EJB 方法中打印服务器 Ip。请给我建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:10:38.920

这可以帮助您：

```
System.out.println("Server-IP:" +  java.net.InetAddress.getLocalHost().getHostAddress());
System.out.println("Host:" + java.net.InetAddress.getLocalHost()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T07:54:39.733

我们的项目中有一些类似的要求。我们想在已处理 JMS 消息的日志中打印托管服务器实例名称。我们通过以下方式做到了 -

```
System.getProperty("weblogic.Name"); 
```

# c - 在 C 中存储命令行参数的最佳方法

> ID：15016512
> 
> 赞同：2
> 
> 时间：2013-02-22T03:50:38.307
> 
> 标签：c, global-variables, command-line-arguments

在使用基于控制台的程序时，我倾向于使用`getopt()`或`getopt_long`解析命令行参数。然而，大多数时候我最终使用全局变量来存储我可以在所有`*.c`文件中使用的配置参数。

所以我很想知道你使用什么模式，以及什么是全局变量的更好替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:57:12.017

我一般定义一个结构：

```
struct ConfigurationOpts {
    int interval;
    int fullscreen;
    /* ... */
}; 
```

并将指向其他模块实例的指针传递`struct ConfigurationOpts`给其他模块：

```
int main() {
    struct ConfigurationOpts conf;

    /* ... */

    init_submodule1(&conf);
    init_submodule2(&conf);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:58:04.403

1.  封装

    将您全局使用的所有变量放在一个结构中。

2.  保持范围最小如果只有您从 main 调用的函数需要命令行参数，则使用命令行选项传递结构 如果从多个位置调用它，则

    hh ：声明+定义具有命令行选项的全局变量 main.c ：初始化变量 user1.c ：通过 hh 引用变量 user2.c ：通过 hh 引用变量

    *   保持最小寿命

（在这种情况下可能并不真正适用。）使用完后，只需使用选项取消初始化结构。它可能真的在你的程序路径的中间，也可能在最后。有一个变量来判断结构是否已初始化，而不是依赖于函数调用的顺序。（你不相信实习生！:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T03:59:43.020

我使用单个记录来保存所有系统范围的数据，即单例模式。访问是通过一个函数将静态指针（或宏）的值返回给单例记录。这种方法允许用于扩展、持久性、旧版本兼容性等的各种选项。在经历了将系统范围的数据随意放置在分散的全局变量中的程序的痛苦经历后，我采用了它。

# xcode4.5 - 一个解决方案可以在 Xcode 中包含多个项目吗？

> ID：15016516
> 
> 赞同：0
> 
> 时间：2013-02-22T03:51:31.957
> 
> 标签：xcode4.5

在 vb.net 中可以做到。一个解决方案，包含许多项目。

一个项目可以参考另一个。

如果您想创建稍微相似的项目，这很有用。

可以在 Objective-c/xcode 上做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:59:51.697

您可以在 Xcode 中创建一个工作区，然后在该工作区中放置和创建多个项目，这类似于解决方案。

# php - MySQL：曲线撇号'在 WHERE 子句上不返回

> ID：15016517
> 
> 赞同：0
> 
> 时间：2013-02-22T03:51:36.040
> 
> 标签：php, mysqli, prepared-statement

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:03:14.297

That's most likely encoding problem.
Either proper encoding is not set or some of your apostrophes got encoded manually.

Make sure that your table have `utf8` encoding on them
make sure you're calling

```
$db->set_charset('utf8') 
```

after connect.
(after doing that write NEW apostrother to database and try to read it back)

Make sure your code doesn't perform useless encoding like htmlspecialchars or so:

*   select your problematic value from database, then `urlencode()` it
*   read it's counterpart from CSV value and `urlencode()` it
*   compare the results

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:40:04.943

**This solved the problem.**

```
<?php
    function utf8_fopen_read($fileName) { 
        $fc = iconv('windows-1250', 'utf-8', file_get_contents($fileName)); 
        $handle=fopen("php://memory", "rw"); 
        fwrite($handle, $fc); 
        fseek($handle, 0); 
        return $handle; 
    } 
?> 
```

**Demo:**

```
<?php
    ini_set('default_charset','utf-8');
    header('content-type: text/plain');
    $sql = new mysqli('localhost','root','','test');
    $sql->set_charset('utf8');

    $rows = array();

    $fh = utf8_fopen_read("sample.txt"); 
    while (($data = fgetcsv($fh, 1000, ",")) !== false) { 
        foreach ($data as $value) { 
           $rows[] = $value;
        } 
    }       

    foreach($rows as $row){     
        $row  = trim($row);
        $Name = $row;

        print "$Name\r\n";  
    }

    print "-----------------\r\n";

    foreach($rows as $row){     
        $Name  = trim($row);

        $stmt = $sql->prepare("SELECT ID,Name FROM `establishment` WHERE Name=?");
        $stmt->bind_param("s",$Name);
        $stmt->execute() or die($stmt->error);
        $stmt->store_result();
        if($stmt->num_rows==0){
            // do insert query
        }
        else{
            $stmt->bind_result($ID,$Name);
            $stmt->fetch();
            print "$ID:$Name already exist\r\n";
        }
    }
  ?> 
```

**Save as sample.txt (tab-delimiter file):**

```
Adams’ Inn  
Ambassador Inn a
Amberley Suite 
America’s Best Inn
Amber's Inn 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T06:06:20.453

The curved apostrophe is an abomination of Microsoft. This link explains how to convert them back to single quotes as they should be: [http://www.toao.net/48-replacing-smart-quotes-and-em-dashes-in-mysql](http://www.toao.net/48-replacing-smart-quotes-and-em-dashes-in-mysql)

# mysql - Mysql：如果字段有值，则随机排序字段

> ID：15016523
> 
> 赞同：0
> 
> 时间：2013-02-22T03:52:21.817
> 
> 标签：mysql, random, sql-order-by

我想创建这样的查询

> SELECT id, name, type, image FROM table ORDER BY type ASC, image.....

先随机抽取所有A类行，然后随机列出所有B类行和所有C类行。在同一类型中，检查该行是否有图像，然后在没有图像的行上方随机列出有图像的行。
该表有几千行。
任何人有一个好的解决方案？感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:59:36.450

```
ORDER BY type ASC, CASE WHEN image IS NULL THEN 1 ELSE RAND() END ASC 
```

# javascript - javascript中的错误onclick事件

> ID：15016530
> 
> 赞同：1
> 
> 时间：2013-02-22T03:53:32.623
> 
> 标签：javascript

我已经有一段时间了，我似乎无法理解如何解决它，我不知道我做错了什么。

我要做的是，当我点击网站上的链接时，它需要弹出一个计算器，然后当我点击该计算器上的关闭按钮时，它应该再次消失。我究竟做错了什么！？！？（注意：calcButton 是一个链接，buttonOff 是一个按钮）

```
function showCalc()
{
    alert("button was clicked");
    document.getElementById('calculator').style.visibility = "visible";
}

function hideCalc()
{
    alert("off button was clicked");
    document.getElementById('calculator').style.visibility = "hidden";
}

function main() {
    //store top and left values of calculator
    calculator.style.top = getStyle(calculator, "top");
    calculator.style.left = getStyle(calculator, "left");

    document.getElementById('calcButton').onclick = showCalc;
    document.getElementById('buttonOff').onclick = hideCalc;

}

window.onload = main; 
```

* * *

**编辑：**

这是获取样式方法：

```
function getStyle(object,styleName)
{
    if (window.getComputedStyle)
    {
        return document.defaultView.getComputedStyle(object, null).getPropertyValue(styleName);
    }
    else if (object.currentStyle)
    {
        return object.currentStyle[styleName];
    }
} 
```

* * *

**编辑2：**

Calc 按钮（这是一个 href）

```
<a href="" id= "calcButton">Calculator</a> 
```

* * *

另外，我认为有些人不明白问题所在。问题是当我点击它时，计算器变成可见然后几乎瞬间又隐藏起来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:19:51.623

```
<a href="" id= "calcButton">Calculator</a> 
```

这将导致链接实际上重新加载您的页面，因此在您看来，计算器出现然后“立即隐藏”，因为页面已重新加载。

在属性中添加一些东西`href`：

```
<a href="javascript:void();" id= "calcButton">Calculator</a> 
```

[现场演示](http://jsfiddle.net/XztQV/1/)

# java - Android应用程序在按“后退按钮”退出后崩溃

> ID：15016531
> 
> 赞同：3
> 
> 时间：2013-02-22T03:53:39.050
> 
> 标签：java, android, android-widget

作为我的 android 应用程序开发研究的一部分，我通过访问 LED 闪光灯开发了一个简单的 SOS 应用程序。一切正常，LED 以 1/2 秒的间隔闪烁。但是当用户按下手机中的后退按钮时，应用程序会退出，并在 1/2 秒后出现“崩溃/强制关闭”消息。我是 android 开发的菜鸟，我的代码有什么问题？

```
private boolean lOn=true;

    Timer mTimer = new Timer();
    TimerTask mTimerTask = new TimerTask() {
        @Override
        public void run() {

            if(lOn){
                final Parameters p = camera.getParameters();
                Log.i("info", "torch is turn Off!");
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                camera.setParameters(p);
                camera.startPreview();
                lOn=false;
            }
            else {
                final Parameters p = camera.getParameters();
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                camera.setParameters(p);
                camera.stopPreview();
                isLighOn = false;
                lOn=true;
            }

        }
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:58:28.350

可能是因为你没有取消你的计时器..

试试这个

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) 
    {
        if(event.getAction() == KeyEvent.ACTION_DOWN)
        {
            if( keyCode == KeyEvent.KEYCODE_BACK )
            {
                mTimer.cancel();
            }   
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T04:35:52.793

调用`purge();`后调用方法`cancel();`。为什么？调用取消方法时，计时器停止工作。但它没有关闭。我们必须在应用程序关闭之前手动关闭它，就像`db.close();`在 sqlite 中调用一样。试试这个。我认为这仅适用于计时器。我不知道 TimerTask。

```
mTimer.cancel();
mTimer.purge(); 
```

# javascript - 需要帮助创建 jQuery 脚本

> ID：15016532
> 
> 赞同：0
> 
> 时间：2013-02-22T03:53:41.123
> 
> 标签：javascript, html, jquery

我需要帮助创建一个 jQuery 脚本。让我首先解释一下目标，这是一个 Web 应用程序，它在选择基础部件和头部部件后显示自定义工具。这是我为它创建的 html。

```
<div>Base List</div>
<div id="baseSection">
    <ul class="selectable">
        <li id="a">1</li>
        <li id="b">2</li>
        <li id="c">3</li>
        <li id="d">4</li>
    </ul>
</div>

<div>Head List</div>
<div id="headSection">
    <ul class="selectable">
        <li id="1">1</li>
        <li id="2">2</li>
        <li id="3">3</li>
        <li id="4">4</li>
        <li id="5">5</li>
        <li id="6">6</li>
        <li id="7">7</li>
        <li id="8">8</li>
    </ul>
</div>

<!--//This content below will be hidden//-->
<div id="content-1">Custom tool 1</div>
<div id="content-2">Custom tool 2</div>
<div id="content-3">Custom tool 3</div>
<div id="content-4">Custom tool 4</div>
<div id="content-5">Custom tool 5</div>
<div id="content-6">Custom tool 6</div>
<div id="content-7">Custom tool 7</div>
<div id="content-8">Custom tool 8</div>
<div id="content-9">Custom tool 9</div>
<div id="content-10">Custom tool 10</div>
<div id="content-11">Custom tool 11</div>
<div id="content-12">Custom tool 12</div>
<div id="content-13">Custom tool 13</div>
<div id="content-14">Custom tool 14</div>
<div id="content-15">Custom tool 15</div>
<div id="content-16">Custom tool 16</div>
<div id="content-17">Custom tool 17</div>
<div id="content-18">Custom tool 18</div>
<div id="content-19">Custom tool 19</div>
<div id="content-20">Custom tool 20</div>
<div id="content-21">Custom tool 21</div>
<div id="content-22">Custom tool 22</div>
<div id="content-23">Custom tool 23</div>
<div id="content-24">Custom tool 24</div>
<div id="content-25">Custom tool 25</div>
<div id="content-26">Custom tool 26</div>
<div id="content-27">Custom tool 27</div>
<div id="content-28">Custom tool 28</div>
<div id="content-29">Custom tool 29</div>
<div id="content-30">Custom tool 30</div>
<div id="content-31">Custom tool 31</div>
<div id="content-32">Custom tool 32</div>
<!--//This div will not be hidden and will display the result//-->
<div id="displyContent"></div> 
```

我需要脚本将基础的单击 id + 头部的 id 设置为自定义工具。例如，我作为用户选择 base 1 然后我选择 head 4 然后它显示自定义工具 8。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:16:17.410

这是一个 jsfiddle 显示一些我认为可能有帮助的东西。[http://jsfiddle.net/andyzinsser/GSzjb/](http://jsfiddle.net/andyzinsser/GSzjb/)

**主要代码：**

```
var tool_ids = [{tool_id: 1}, {tool_id: 2}, {tool_id: 3}, {tool_id: 4}, {tool_id: 5}, {tool_id: 6}, {tool_id: 7}, {tool_id: 8}, {tool_id: 9}, {tool_id:10}, {tool_id:11}, {tool_id:12}, {tool_id:13}, {tool_id:14}, {tool_id:15}, {tool_id:16}, {tool_id:17}, {tool_id:18}, {tool_id:19}, {tool_id:20}, {tool_id:21}, {tool_id:22}, {tool_id:23}, {tool_id:24}, {tool_id:25}, {tool_id:26}, {tool_id:27}, {tool_id:28}, {tool_id:29}, {tool_id:30}, {tool_id:31}, {tool_id:32}];

// These get set once you click on an number in either the base or head sections
var baseSelection;
var headSelection;

// places the current selections in a div
var updateTool = function() {
    $("#displayContent").html("Base: " + baseSelection + ", " + "Head: " + headSelection);
};

// When you click a number in the base section, save the selection
$('#baseSection').on('click', 'li', function(event) {
    baseSelection = $(this).html();
    updateTool();
});

// When you click a number in the head section, save the selection
$("#headSection").on('click', 'li', function(event) {
    headSelection = $(this).html(); 
    updateTool();
}); 
```

# web-services - 如何在 Spring 中配置 jax-ws 处理程序？

> ID：15016541
> 
> 赞同：2
> 
> 时间：2013-02-22T03:54:35.847
> 
> 标签：web-services, jax-ws

我根据 jax-ws API 与 Spring 集成 jax-ws，但在我的 web 服务项目中遇到异常，这里是 API 站点：http: [//jax-ws-commons.java.net/spring/](http://jax-ws-commons.java.net/spring/)，我有相同的配置 xml在我的项目中，但我得到一个例外如下：

```
 Caused by: org.xml.sax.SAXParseException: cvc-complex-type.3.2.2: Attribute 'handlers'                   is not allowed to appear in element 'ws:service'.
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195) 
```

谁能给我解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:41:45.847

给出的示例是错误的，并且对于模式无效。handlers 不是属性，而是嵌套元素。像这样使用它：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
    xmlns:ws="http://jax-ws.dev.java.net/spring/core"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://jax-ws.dev.java.net/spring/servlet http://jax-ws.dev.java.net/spring/servlet.xsd http://jax-ws.dev.java.net/spring/core http://jax-ws.dev.java.net/spring/core.xsd">

 <wss:binding url="/services/demo">
     <wss:service>
         <ws:service bean="#demoEndpoint">
             <ws:handlers>
                 <ref bean="demoHandler"/>
             </ws:handlers>
         </ws:service>
     </wss:service>
 </wss:binding>
</bean> 
```

# c# - 如何消除 WPF 输出窗口中的绑定“信息” - 无法使用绑定检索值

> ID：15016542
> 
> 赞同：3
> 
> 时间：2013-02-22T03:54:37.727
> 
> 标签：c#, .net, wpf, xaml, data-binding

我正在编写一个 WPF 应用程序，性能有点慢，所以我正在尝试解决它。当我跑步时，我会收到大量这些类型的消息：

```
System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=(0); DataItem=null; target element is 'Control' (Name=''); target property is 'Visibility' (type 'Visibility')
System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=AreRowDetailsFrozen; DataItem=null; target element is 'DataGridDetailsPresenter' (Name=''); target property is 'SelectiveScrollingOrientation' (type 'SelectiveScrollingOrientation')
System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=HeadersVisibility; DataItem=null; target element is 'DataGridRowHeader' (Name=''); target property is 'Visibility' (type 'Visibility')
System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=ValidationErrorTemplate; DataItem=null; target element is 'Control' (Name=''); target property is 'Template' (type 'ControlTemplate') 
```

如果我做一个小示例应用程序：

```
<Window x:Class="bindingerrors.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:bindingerrors="clr-namespace:bindingerrors" Title="MainWindow">
    <Window.Resources>
        <bindingerrors:Thinger x:Key="Thing" />               
    </Window.Resources>
    <StackPanel>
        <DataGrid x:Name="TheGrid" ItemsSource="{Binding Stuff, Source={StaticResource Thing}}" AutoGenerateColumns="False" HeadersVisibility="Column">
            <DataGrid.Columns>
                <DataGridTextColumn Header="!" Binding="{Binding A, FallbackValue=''}" />
                <DataGridTextColumn Header="#" Binding="{Binding I, FallbackValue=''}" />              
                </DataGrid.Columns>
        </DataGrid>
    </StackPanel>
</Window> 
```

以及以下对象定义：

```
public class Thinger
{
    public ObservableCollection<ARow> Stuff { get; private set; }

    public Thinger()
    {
        //Fill up some bogus data
        string letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        int i = 0;
        Stuff = new ObservableCollection<ARow>();
        foreach (var letter in letters)
        {
            Stuff.Add(new ARow(letter.ToString(),i));
            i++;
        }
    }
}

public class ARow
{
    public string A { get; private set; }
    public int I { get; set; }

    public ARow(string a, int i)
    {
        A = a;
        I = i;
    }
} 
```

执行后，我会遇到大量的绑定问题。因为许多 WPF 性能文章声称失败的绑定会严重影响性能，所以我怀疑这可能是我的许多问题的根源。

到底是怎么回事？如何消除这些失败的绑定？我提供的示例尽可能简单，同时仍然是问题的症状，但它应该可以正常工作，不是吗？我正在为 .net 4.0 构建，如果这有什么不同的话。

**编辑：**如果您尝试构建示例代码，可能会抑制错误。在 Visual Studio 选项 -> 调试 -> 输出窗口 -> 数据绑定中，看到它设置在“信息”上。

我[在 WPF 输出窗口中看到了 Getting many Binding "Information"](https://stackoverflow.com/questions/3846823/getting-many-binding-information-in-wpf-output-window)，但没有关于如何处理它的信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:01:36.153

好吧，您可以修复一些问题来消除其中一些错误。

1.  `Stuff`有一个私人二传手，所以你必须 `BindingMode`设置`OneWay`
2.  `A`有一个私人二传手，所以你必须 `BindingMode`设置`OneWay`
3.  `I`有一个不是值的后备`int`值

但是，这些都不符合您发布的错误，而只是一些观察

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T12:06:41.760

查找所有绑定问题将非常耗时，以下解决方案很简单。

只需在应用程序构造函数中输入以下代码行。

```
System.Diagnostics.PresentationTraceSources.DataBindingSource.Switch.Level     =System.Diagnostics.SourceLevels.Critical; 
```

通过在构造函数中添加上述行，调试器将忽略绑定错误并提高性能。

希望这可以帮助。

谢谢，迈克。

# javascript - 即使我链接到文件，我也会收到错误“createjs is not defined”

> ID：15016543
> 
> 赞同：2
> 
> 时间：2013-02-22T03:54:37.700
> 
> 标签：javascript, easeljs, createjs

在这里，我有一个非常简单的脚本。

```
stage = new createjs.Stage("myCanvas");

circle = new createjs.Shape();
circle.graphics.beginFill("red").drawCircle(0,0,40); 
```

还有我的 HTML

```
<!DOCTYPE HTML>

<html>
<head>

<link rel="stylesheet" type="text/css" href="mainStyle.css">
<script src="mainScript.js"></script>
<script src="create.js"></script>

</head>
<body>  

    <canvas id="myCanvas" width=1000 height=500 ></canvas>

</body>
</html> 
```

然而它不起作用。我收到此错误：

> “createjs 未定义”

但在我的 HTML 中，它链接到文件。还有其他可能导致这种情况的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T04:03:17.393

```
<script src="create.js"></script>
<script src="mainScript.js"></script> 
```

您的代码需要在包括之后执行`create.js`- 订单很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T04:36:08.737

您的代码有几个问题。

首先，要直接回答这个问题，您必须先加载构造 createjs 对象的库，然后再加载实例化它的脚本。更改您脑海中的脚本标签的顺序。

其次，您的实例化将在 canvas 元素添加到 DOM 之前执行。要解决此问题，您需要侦听文档的 onload 事件。然后执行你的代码。

第三，要让红色圆圈对象真正显示出来，您需要将它附加到画布上，然后调用阶段更新方法。

前任：

```
window.onload = function(){
    stage = new createjs.Stage("myCanvas");

    circle = new createjs.Shape();
    circle.graphics.beginFill("red").drawCircle(0,0,40);

    stage.addChild(circle);

    stage.update();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T10:17:25.043

对于角度项目，上述答案可能不足以解决问题。我做了什么：

```
myAngularModule.service('preloadservice', function ($rootScope) {

  if (typeof createjs === 'undefined') {
    setTimeout(continueAfterWait, 500);
  } else {
    continueAfterWait();
  }

  var continueAfterWait = function () {
    var queue = new createjs.LoadQueue();
    //...
  } 
} 
```

# mysql - sql 查询 SELECT a.*

> ID：15016544
> 
> 赞同：0
> 
> 时间：2013-02-22T03:55:05.303
> 
> 标签：mysql, gps

我最近发布了这个问题：[getting distance between two points using google gps api with php](https://stackoverflow.com/questions/14995887/getting-distance-between-two-points-using-google-gps-api-with-php)

我收到了很棒的回复，但是我对该人的回复有一些疑问，并且由于我对该网站的低/新状态，我无法发表评论。在回答我的问题时，其他用户发布了此查询**

```
SELECT a.*, 3956 * 2 * ASIN(SQRT( POWER(SIN(($lat - lat) * pi()/180 / 2), 2) + COS($lat * pi()/180) * COS(lat * pi()/180) *
POWER(SIN(($long - longi) * pi()/180 / 2), 2) )) as distance 
FROM table
GROUP BY id HAVING distance <= 500 
ORDER by distance ASC** 
```

我对此查询有一些疑问，希望有人能提供帮助。

1.什么是a.*？我在 sql 方面不是超级先进，但效率很高，从未见过这样的事情。我不知道它是否应该代表我表中的任意字段或实际字段

2.由于我在 php 中执行此操作，因此查询将包含在引号中，这将使此查询语法略有不同。我想知道是否有人知道引号中的查询会是什么样子。

3.此查询中还有“GROUP BY id”。我的表中有一个要查询的 id 字段。这个“id”是否与我表中的 id 字段相关联？

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:13:30.620

您的查询应该是这样的：- `a`是这里的表别名。

```
SELECT a.*, 3956 * 2 * ASIN(SQRT( POWER(SIN(($lat - lat) * pi()/180 / 2), 2) + COS($lat * pi()/180) * COS(lat * pi()/180) *
POWER(SIN(($long - longi) * pi()/180 / 2), 2) )) as distance 
FROM table AS a
GROUP BY id HAVING distance <= 500 
ORDER by distance ASC 
```

或者你可以使用简单的

```
SELECT *, 3956 * 2 * ASIN(SQRT( POWER(SIN(($lat - lat) * pi()/180 / 2), 2) + COS($lat * pi()/180) * COS(lat * pi()/180) *
POWER(SIN(($long - longi) * pi()/180 / 2), 2) )) as distance 
FROM table
GROUP BY id HAVING distance <= 500 
ORDER by distance ASC 
```

# android - 在 url 中传递 HTTP GET 值

> ID：15016550
> 
> 赞同：-1
> 
> 时间：2013-02-22T03:55:54.023
> 
> 标签：android, http-get, android-internet

我正在尝试使用在站点的 URL 中传递的值发送 HTTP GET 请求

[http://somenthing.com/c/chk.php?val=somevalue](http://somenthing.com/c/chk.php?val=somevalue)

我使用了以下代码，但它似乎不起作用

```
HttpResponse response = null;
try {        
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet();
        request.setURI(new URI("http://somenthing.com/c/chk.php?val=somevalue"));
    response = client.execute(request);
    } 
    catch (URISyntaxException e) 
    {        
      e.printStackTrace();
    }
    catch (ClientProtocolException e) 
    {
      e.printStackTrace();
    }
    catch (IOException e) 
    {
      e.printStackTrace();
    }   
    return; 
```

我没有收到任何错误，上面的代码在按下按钮时有效并且我已经使用了权限。

收到 HTTP GET 请求后，后端过程由服务器完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:06:21.433

我的解决方案是：

```
// ---Connects using HTTP GET---
        public static InputStream OpenHttpGETConnection(String url) {
            InputStream inputStream = null;
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpResponse httpResponse = httpclient.execute(new HttpGet(url));
                inputStream = httpResponse.getEntity().getContent();
            } catch (Exception e) {
                Log.d("InputStream", e.getLocalizedMessage());
            }
            return inputStream;
        } 
```

# node.js - Node.js Express Passport Cookie 过期

> ID：15016551
> 
> 赞同：17
> 
> 时间：2013-02-22T03:55:55.233
> 
> 标签：node.js, express, passport.js

我在我的应用程序中使用 Passport 进行身份验证，并且我也在使用 Express。总结一下我的问题：**我的登录功能最初运行良好，但是在*任何*用户的会话超时后，*没有*用户能够登录。**

我正在使用标准的本地策略进行身份验证。

我将根据我的设置包含尽可能简单的示例：

```
//-------------
//Set up authentication with Passport
//-------------
var userModel = require('./models/user')(db);
passport.use(new LocalStrategy(
    function(username, password, done) {
        var errorMessage = 'Incorrect username/password combination.';
        userModel.GetUserByUsername(username, function(err, user) {
            if (err) { return done(err); }
            if (!user) {
              return done(null, false, { message: errorMessage });
            }

            user.validatePassword(password, function(isPasswordCorrect) {
                if (!isPasswordCorrect)
                {
                    return done(null, false, { message: errorMessage });
                }

                //Update with login date
                userModel.UpdateUserWithLogin(username, user.currentLoginTime, function(err){
                    //if we have an error here, we should probably just log it
                    if(err)
                    {
                        console.log(err);
                    }
                });

                return done(null, user);
            });
        });
    }
));

passport.serializeUser(function(user, done) {
  done(null, user);
});

passport.deserializeUser(function(user, done) {
    userModel.GetUserByUsername(user._id, function(err, user) {
            done(err, user);
        });
});

//-------------
//Set up express and configure
//-------------
var sessionStore = new SkinStore(db);
var app = express();

app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.engine('html', consolidate.swig);
    app.set('view engine', 'html');
    swig.init({
        root: '.',
        allowErrors: true, // allows errors to be thrown and caught by express instead of suppressed
        autoescape: false});

    app.use(express.logger('dev'));

    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser("[mysecrethere]"));
    app.use(express.session({   store: sessionStore,
                            cookie: { expires : new Date(Date.now() + 3600000) } //1 Hour
                            }));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(flash());
    app.use(expressValidator);

    app.use(express.static(path.join(__dirname, 'public')));

    //Dynamic helpers
    app.use(require('./helpers/DynamicHelpers'));

    app.use(app.router);
});

app.get('/login', routes.login);
app.post('/login', passport.authenticate('local', {failureRedirect: '/login',
                                               badRequestMessage: "Please enter username and password",
                                               failureFlash: true }),
                                               function(req, res) {
                                                    var targetUrl = req.session.pageAfterLogin;
                                                    delete req.session.pageAfterLogin;
                                                    res.redirect(targetUrl || '/account');
                                                });

app.get('/account', IsAuthenticated, routes.account.show); 
```

和 IsAuthenticated 辅助函数：

```
function IsAuthenticated(req,res,next){
    if(req.isAuthenticated())
    {
        next();
    }
    else
    {
        //save the requested page and then redirected
        req.session.pageAfterLogin = req.url;
        req.flash("error", "You must be logged in first!");
        res.redirect('/login');
    }
} 
```

我可以通过调试发现，在成功验证后（并且在 cookie 过期后），我点击了这个逻辑（从上面）：

```
function(req, res) {
    var targetUrl = req.session.pageAfterLogin;
    delete req.session.pageAfterLogin;
    res.redirect(targetUrl || '/account');
} 
```

我可以看到“req”正确设置了会话，并正确存储了 Passport 信息。然后，重定向发生，**新**请求没有存储会话信息，并且具有全新的会话 ID。我怀疑客户端上没有设置 cookie，而且似乎确实如此，这应该可以解释缺乏一致的会话。

但是，我无法弄清楚**为什么**没有设置新的 cookie。应用程序的配置方式是否有问题表明为什么会发生这种情况？

我应该补充一点，重新启动 Node.js 实例可以解决问题，这在生产中不是可以容忍的。

谢谢。

**更新**：我运行 Fiddler 来查看 HTTP/S 流量发生了什么，我可以看到当它最初工作时，我在浏览器中设置了一个 cookie（我尝试了几个），然后将其传递回服务器后续请求。

当它**不起作用**时，浏览器不会将 cookie 传递给服务器，因此 Node 会发送一个 Set-Cookie 标头，每次都提供一个新的 cookie。到目前为止，我还没有运气确定造成这种情况的原因。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T05:14:33.940

我想通了，虽然我不喜欢这个答案。

tl;博士; - 使用 maxAge 而不是 expires。

* * *

问题的根源在于每个 cookie 上设置的到期日期（由 Express 自动设置）。我注意到设置的每个 cookie 都有相同的到期日期，最终最终成为过去，因此立即到期。

原因就在这里：

```
cookie: { expires : new Date(Date.now() + 3600000) } 
```

新日期仅在服务器启动时创建一次。这导致每次的到期日期都相同。根据原始帖子中的代码，我无法弄清楚为什么它不起作用，但我在网上找到的每个示例都使用完全相同的代码。我通过定义一个创建此日期的函数来验证这一点，并检查它是否仅在服务器启动时被调用。

为了解决这个问题，我定义了 maxAge 而不是“expires”。maxAge 需要几毫秒，而不是日期，并且它似乎正确地设置了所有 cookie 的到期日期。

**我很想听听是否有人可以首先解释为什么会发生这种情况，因为其他人似乎成功地使用了它。有什么想法吗？**

请参阅下面的我的工作代码

```
app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.engine('html', consolidate.swig);
    app.set('view engine', 'html');
    swig.init({
        root: '.',
        allowErrors: true, // allows errors to be thrown and caught by express instead of suppressed
        autoescape: false});

    app.use(express.logger('dev'));

    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser("[mysecrethere]"));
    app.use(express.session({   store: sessionStore,
                            cookie: { maxAge : 3600000 } //1 Hour
                            }));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(flash());
    app.use(expressValidator);

    app.use(express.static(path.join(__dirname, 'public')));

    //Dynamic helpers
    app.use(require('./helpers/DynamicHelpers'));

    app.use(app.router);
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-21T09:27:51.963

将 cookie 名称设置为 value，其中可能是转换为 JSON 的字符串或对象。路径选项默认为“/”。

`res.cookie('rememberme', '1', { expires: new Date(Date.now() + 900000), httpOnly: true });`

maxAge 选项是一个方便的选项，用于设置相对于当前时间的“过期”（以毫秒为单位）。以下与前面的示例等效。

`res.cookie('rememberme', '1', { maxAge: 900000, httpOnly: true })`

还有链接

[http://expressjs.com/api.html#res.cookie](http://expressjs.com/api.html#res.cookie)

# protocol-buffers - 您如何管理协议缓冲区定义文件？

> ID：15016556
> 
> 赞同：2
> 
> 时间：2013-02-22T03:56:23.240
> 
> 标签：protocol-buffers, project-organization

在我的公司，我们已经标准化在消息总线上使用协议缓冲区作为允许服务进行通信的一种方式。

这很好，但是我在试图弄清楚如何构建我想在不同团队之间共享的通用定义文件时遇到了问题。是否有一种普遍接受的方法来使协议缓冲区定义集合在团队之间可用？

此外，所有导入标头都必须引用协议缓冲区编译器执行的目录，这只是生活中的事实吗？坦率地说，这似乎有点傻，因为协议缓冲区允许命名空间定义。或者这只是以 Java 为中心的 Protocol Buffers 起源的产物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:10:24.080

我只能回答部分问题：

此外，所有导入标头都必须引用协议缓冲区编译器执行的目录，这只是生活中的事实吗？

您可以使用**--proto_path=**选项来指定 *.proto 的存在位置 + 所有嵌入的 proto

# c# - 使用动态对象时出现 RuntimeBinderException

> ID：15016561
> 
> 赞同：6
> 
> 时间：2013-02-22T03:56:57.893
> 
> 标签：c#, .net, visual-studio-2010, dynamic

我觉得我在这里遗漏了一些明显的东西，所以请随时向我指出。

我有一个简单的单元测试来说明我的问题：

```
 [Test]
    public void DynamicTest()
    {
        dynamic myDynamic = new ExpandoObject();
        myDynamic.Prop = "abc";
        Assert.AreEqual("abc",myDynamic.Prop);
    } 
```

当我执行单元测试时，它通过了。到现在为止还挺好。

如果我选择调试单元测试（在 Debug -> VS in Exceptions 下勾选所有 CLR 异常），我会看到 RuntimeBinderException：

![在此处输入图像描述](../Images/940de0a763eacdc72b39fa6b353d27ce.png)

它不是致命的，所以我可以按 F5 并继续，测试仍然通过，但这似乎是错误的。我在这里做错了吗？在我们的应用程序的一般使用过程中出现这些异常非常烦人。还是我应该取消选中 RuntimeBinderException 框并忽略它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T04:13:21.907

您将调试器设置为在**抛出**CLR 异常（即第一次机会）而不是**未处理**（即第二次机会）时中断。显然，您可以取消勾选它，它会消失，但如果您只想从您的代码中看到第一次机会异常，那么您可以启用[Just My Code 选项](http://msdn.microsoft.com/en-us/library/h5e30exc%28v=vs.100%29.aspx)。启用“仅我的代码”后，调试器只会在第一次机会异常通过您的代码时中断。这些选项不会影响您的应用程序对用户的行为，只会影响调试器在附加时所做的事情。

# c# - WebApi 控制器给出空值

> ID：15016563
> 
> 赞同：0
> 
> 时间：2013-02-22T03:57:00.600
> 
> 标签：c#, post, asp.net-web-api

好的，这是我的路线

```
 Config.Routes.MapHttpRoute(
            name: "Default",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

还有我的控制器

```
public class GameController : ApiController
{
    internal static ILog Log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);
    [HttpGet,HttpPost]
    public IEnumerable<HostedGame> List()
    {
        return new HostedGame[0];
    }

    [HttpPost]
    public Guid? HostGame(HostedGameRequest request)
    {
        try
        {
            var r = this.Request.Content.ReadAsStringAsync();
            var id = SasManagerHub.NextConnectionId;
            //var hg = request.ToHostedGameSasRequest();
            //GameManager.GetContext().SasManagerHub.Out.Client(id).StartGame(hg);
            //return hg.Id;
            return null;
        }
        catch (Exception e)
        {
            Log.Fatal("HostGame error",e);
            return null;
        }
    }
} 
```

还有我的模特

```
public class HostedGame
{
    public Guid Id { get; set; }

    public string Name { get; set; }

    public string HostUserName { get; set; }

    public string GameName { get; set; }

    public Guid GameId { get; set; }

    public Version GameVersion { get; set; }

    public bool HasPassword { get; set; }
}

public class HostedGameRequest : HostedGame
{
    public string Password { get; set; }
} 
```

和帖子数据

```
{
    "Id":"c883fb55-9adc-4ab8-a46c-614d2874301c",
    "Name":"a",
    "HostUserName":"b",
    "GameName":"c",
    "GameId":"c883fb55-9adc-4ab8-a46c-614d2874301c",
    "GameVersion":"1.1.1.1",
    "HasPassword":"true",
    "Password":"asdf"
} 
```

和网址

`http://localhost:5879/api/game/HostGame/`

好吧，所以由于某种原因，当我把数据扔进去时，它`GameController`会`request`在`null`. 我已经尝试了很多变化，但似乎无法使其工作。

有什么想法我可能在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:59:06.363

确保您在发布请求中传递标头 content-type:application/json。

# smarty - 将 HTML 添加到 skadate 侧边栏

> ID：15016567
> 
> 赞同：1
> 
> 时间：2013-02-22T03:57:29.683
> 
> 标签：smarty

有人可以解释如何在 Skadate 中将一些 html 添加到模板的侧边栏中吗？它使用 smarty 模板，我尝试了很多不同的方法，但都没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:45:34.640

它位于布局 -> 组件 -> Page_Sidebar -> Default.tpl。进行更改后，请务必在管理面板中清除站点缓存。我错过了这一点，这就是为什么我的更改都没有出现的原因。

# git - 在单独目录中的两个修订之间使用 git 签出代码

> ID：15016568
> 
> 赞同：1
> 
> 时间：2013-02-22T03:57:37.670
> 
> 标签：git

我正在尝试将代码从 git repo 签出到我的本地目录。

我只想检查在 2 个修订版之间进行的特定更改量，而不是要检查的整个代码，以便我可以发布对服务器上的代码所做的更改。

就像 svncheckout 一样，您在其中提到修订号，更改被签出，然后您可以在服务器上发布代码。

我尝试了各种方法，但没有找到一种非常有用的方法。我也尝试了 git checkout ，但那是从 repo 中检查整个代码。

如果有人能在这方面帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:40:15.690

听起来您只是想获取两个提交（或一系列提交）之间的差异，然后自动将该差异应用于存储库的不同副本。尝试使用各种补丁命令。您使用 format-patch *-n从最后**n*次提交生成补丁文件。

```
 $ git format-patch -3 
```

这将为最后 3 次提交中的所有更改生成一个补丁文件（基本上是一个编码的差异文件）。然后使用 am 命令应用补丁。

```
 $ git am /path/to/patch-file 
```

我强烈建议在使用补丁命令之前阅读它们。在不使用共享远程的情况下同步存储库可能会导致各种合并冲突，通过修补系统解决它们与解决普通合并问题略有不同。

# plugins - Android 虚拟设备管理器 Serato 错误

> ID：15016569
> 
> 赞同：4
> 
> 时间：2013-02-22T03:57:38.540
> 
> 标签：plugins, android-emulator, avd

我正在关注您的教程“运行您的应用程序”>“在模拟器上运行”。当我转到“Android 虚拟设备管理器”选择我创建的 AVD“My_First_AVD”并点击开始时，我收到以下消息：

为 AVD 'My_First_AVD' 启动模拟器 2013-02-21 22:43:22.504 emulator64-arm [302:80b] 加载 /Library/Audio/Plug-Ins/HAL/SeratoVirtualAudioPlugIn.plugin/Contents/MacOS/SeratoVirtualAudioPlugIn 时出错：dlopen（ /Library/Audio/Plug-Ins/HAL/SeratoVirtualAudioPlugIn.plugin/Contents/MacOS/SeratoVirtualAudioPlugIn, 262)：找不到合适的图像。确实找到了：/Library/Audio/Plug-Ins/HAL/SeratoVirtualAudioPlugIn.plugin/Contents/MacOS/SeratoVirtualAudioPlugIn: mach-o，但架构错误 2013-02-21 22:43:22.506 emulator64-arm[302:80b] 不能在 CFBundle/CFPlugIn 0x100d36560 中找到工厂 834FC054-C1CC-11D6-BD01-00039315CD46 的函数指针 New_SHP_PlugIn（捆绑，未加载）

黑屏出现“Android”，但没有别的（我想“我的第一个应用程序”会出现“Hello World”）我不确定为什么模拟器正在寻找 Serato 插件。

任何帮助，将不胜感激。

在此先感谢，乔恩

# android - 为什么android源码这么大？

> ID：15016570
> 
> 赞同：2
> 
> 时间：2013-02-22T03:57:40.323
> 
> 标签：android, linux, linux-kernel

[初始化构建环境](http://source.android.com/source/initializing.html)的指南说 -

> 注意：源下载大小约为 8.5GB。您将需要超过 30GB 的免费空间来完成单个构建，并且需要高达 100GB（或更多）的空间来完成完整的构建。

我的问题-

1.  据我了解，存储库中不存在供应商特定的应用程序和图形，它基本上包含内核源代码、通用驱动程序和基本工具。那为什么它的尺寸这么大？
2.  为什么我需要 100GB 来构建它？
3.  是否有可能获得压缩的源 tarball？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T21:41:35.143

Ryan Li 通过说明您正在下载所有存储库的历史提供了部分答案。这往往会随着时间的推移而增加，并使所有源的初始下载占用相当大的空间。

构建占用如此多空间的几个原因（无论如何都不是详尽的清单）：

*   有很多来源会生成大量用于构建最终图像的目标文件、库、dex 等。使用 C/C++ 工具链，链接器可以丢弃未在给定可执行文件中使用的目标文件部分。除了目标文件往往包含有关各个部分的大量额外信息这一事实之外，几乎总是意味着添加在一起的目标文件将比您构建的任何可执行文件大。
*   除了目标文件之外，您在输出（中间）目录中还有库和可执行文件本身。
*   除了上述两个之外，您还有生成的文件系统映像。
*   我不是 Java 构建专家，但我猜有中间文件可以访问生成的 .dex 文件。
*   如果您想做一整套构建，您需要将普通用户构建 (~30GB) 乘以至少 3 以及更多（其他包包含在 eng 和 userdebug 构建类型中）。

如果您想要更详细的答案，我建议您下载源代码，进行构建并在其上运行磁盘空间分析器工具（目前没有方便的构建来执行此操作）。

# php - 处理系统函数中带空格的文件名

> ID：15016577
> 
> 赞同：0
> 
> 时间：2013-02-22T03:58:17.213
> 
> 标签：php

我有这段代码来检测文件字符集。

```
$result = exec('file -i ' . $fromFile); 
```

结果将类似于：“perk.csv: text/plain; charset=us-ascii”

一切都很好，直到 $fromFile 保存有空格的文件名。然后它抱怨它无法读取文件。

我的第一个解决方案是用“\”替换任何空格字符。但也许有更好的方法来解决这个问题？我觉得我可能会在这里错过一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:01:05.183

使用[escapeshellarg](http://www.php.net/manual/en/function.escapeshellarg.php "转义shellarg")函数来转义文件名。

您的代码应该是：

```
$result = exec('file -i ' . escapeshellarg($fromFile)); 
```

# asp.net - ASP:PlaceHolder - 找不到生成其内容的代码

> ID：15016578
> 
> 赞同：0
> 
> 时间：2013-02-22T03:58:20.263
> 
> 标签：asp.net

我需要更新一些在 .aspx 页面上呈现的文本。我搜索了源和数据库表、视图和存储过程，但找不到。

生成文本的代码如下所示：

```
<asp:PlaceHolder id="teamMemberTable" runat="server" /> 
```

我搜索并找不到`teamMemberTable`对代码中其他任何地方的任何引用。生成该位的代码是否可能已被编译成二进制并且不再以明文形式存在？

这是一个输出的html示例：

```
<span id="ctl00_rightContent_Repeater1_ctl01_Literal1" class="teamListName">
    Team Number One
</span>
<table>
    <tr>
        <td class="teamListMember">Team Captian</td>
        <td class="teamListPlayer">Jane Doe</td>
        <td class="teamListStatus teamListStatusPaid">Paid</td>
    </tr>
    <tr>
        <td class="teamListMember">Player 2</td>
        <td class="teamListPlayer">John Q. Public</td>
        <td class="teamListStatus teamListStatusNotPaid">Not Paid</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:25:19.203

是的，代码可能位于已编译且不是明文的程序集中。一种选择是运行诸如 .NET Reflector 或 ILSpy 之类的工具并反编译应用程序中的所有程序集并搜索反编译的代码以找到对“teamMemberTable”的任何引用。

另一种可能性是控件被索引而不是名称引用。例如，如果 PlaceHolder 控件在页面中，则可以将其引用为`Page.Controls[5]`，因此您永远不会在源代码中看到该名称。

# java - mouseActionListener 和 mouseClick(MouseEvent e)

> ID：15016580
> 
> 赞同：1
> 
> 时间：2013-02-22T03:58:33.743
> 
> 标签：java, swing, mouseevent, mouselistener, actionevent

出于显而易见的原因，我在游戏中实现了 MouseListener；用户需要能够点击板。

问题不在于单击板本身，而是使用重置按钮`resetBoard`和鼠标侦听器。当我单击按钮时，板会发生变化，但是当单击被释放时，板会再次发生变化。`public void mouseClicked(MouseEvent e)`考虑到我的所有操作都在块下，我找不到任何地方可以解释为什么它在向下单击和释放时都会发生变化。我有空`mouseReleased`的 , `mouseEntered`, `mouseExited`, `mousePressed`.

`mouseClicked`基本上，有人可以帮助我理解为什么当鼠标不为空时，板在鼠标按下和向上（以相同的动作）时都会重置。

哦，我知道我不需要所有这些进口，只是我曾经使用过它们，但我忘了把它们拿出来，因为我对这个当前的问题太着迷了。

抱歉重复...以及其中的所有内容。这是我目前知道如何做到这一点的唯一方法。

谢谢！

```
public class Blox implements ActionListener {

    private final String gameVersion = "Blox - v1.0.2";

    private ImageIcon purpleBlock = new ImageIcon();
    private ImageIcon redBlock = new ImageIcon();
    private ImageIcon blueBlock = new ImageIcon();
    private ImageIcon greenBlock = new ImageIcon();
    private ImageIcon closeImage = new ImageIcon();

    private JButton block1 = new JButton();
    private JButton block2 = new JButton();
    private JButton block3 = new JButton();
    private JButton block4 = new JButton();
    private JButton block5 = new JButton();
    private JButton block6 = new JButton();
    private JButton block7 = new JButton();

    private JButton block8 = new JButton();
    private JButton block9 = new JButton();
    private JButton block10 = new JButton();
    private JButton block11 = new JButton();
    private JButton block12 = new JButton();
    private JButton block13 = new JButton();
    private JButton block14 = new JButton();

    private JButton block15 = new JButton();
    private JButton block16 = new JButton();
    private JButton block17 = new JButton();
    private JButton block18 = new JButton();
    private JButton block19 = new JButton();
    private JButton block20 = new JButton();
    private JButton block21 = new JButton();

    private JButton block22 = new JButton();
    private JButton block23 = new JButton();
    private JButton block24 = new JButton();
    private JButton block25 = new JButton();
    private JButton block26 = new JButton();
    private JButton block27 = new JButton();
    private JButton block28 = new JButton();

    private JButton block29 = new JButton();
    private JButton block30 = new JButton();
    private JButton block31 = new JButton();
    private JButton block32 = new JButton();
    private JButton block33 = new JButton();
    private JButton block34 = new JButton();
    private JButton block35 = new JButton();

    private JButton block36 = new JButton();
    private JButton block37 = new JButton();
    private JButton block38 = new JButton();
    private JButton block39 = new JButton();
    private JButton block40 = new JButton();
    private JButton block41 = new JButton();
    private JButton block42 = new JButton();

    private JButton block43 = new JButton();
    private JButton block44 = new JButton();
    private JButton block45 = new JButton();
    private JButton block46 = new JButton();
    private JButton block47 = new JButton();
    private JButton block48 = new JButton();
    private JButton block49 = new JButton();

    // Error console init
    private JLabel errorMessage = new JLabel();
    private JPanel errorBg = new JPanel();
    private JButton closeError = new JButton();

    // Score/UI Inits
    private JButton resetBoard = new JButton("Reset Board");

    /**
     *  700 x 480 Frame Size
     *  Sets Up and displays initial scene.
     *
     */
    private void game() {

        // Initialize mainFrame
        JFrame mainFrame = new JFrame(gameVersion);
        Dimension minSize = new Dimension(700,480);
        mainFrame.setMinimumSize(minSize);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.setLayout(null);
        mainFrame.setResizable(false);
        try {
            mainFrame.setContentPane(new JLabel(new ImageIcon(
                ImageIO.read(new File("bggrad.jpg")))));
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Setup Block Images
        try {
            purpleBlock.setImage(ImageIO.read(new File("purpleBlock.png")));
            redBlock.setImage(ImageIO.read(new File("redBlock.png")));
            blueBlock.setImage(ImageIO.read(new File("blueBlock.png")));
            greenBlock.setImage(ImageIO.read(new File("greenBlock.png")));
            closeImage.setImage(ImageIO.read(new File("close.jpg")));
        } catch (IOException e) {
            e.printStackTrace();
        }   

        // Sets up error message panel
        // Only displayed if error occurs on ActionListener
        errorMessage.setText("");
        errorMessage.setForeground(Color.black);
        Font newLabelFont = new Font(errorMessage.getFont().getName(),
            Font.BOLD,errorMessage.getFont().getSize());
        errorMessage.setFont(newLabelFont); 
        closeError.setIcon(closeImage); 
        closeError.setBounds(0,0,24,24);
        errorBg.setBounds(0,430,700,30);
        errorBg.setBackground(Color.lightGray);
        errorBg.add(closeError);
        errorBg.add(errorMessage);
        errorBg.setVisible(false);

        // Sets up Score/UI Portions of Screen
        resetBoard.setBounds(60,363,175,25);
        resetBoard.setVisible(true);
        resetBoard.addActionListener(this);

        // Randomize and add Images to each JButton
        gameReset();

        // Add Listeners to each block
        block1.addActionListener(this);
        block2.addActionListener(this);
        block3.addActionListener(this);
        block4.addActionListener(this);
        block5.addActionListener(this);
        block6.addActionListener(this);
        block7.addActionListener(this);

        block8.addActionListener(this);
        block9.addActionListener(this);
        block10.addActionListener(this);
        block11.addActionListener(this);
        block12.addActionListener(this);
        block13.addActionListener(this);
        block14.addActionListener(this);

        block15.addActionListener(this);
        block16.addActionListener(this);
        block17.addActionListener(this);
        block18.addActionListener(this);
        block19.addActionListener(this);
        block20.addActionListener(this);
        block21.addActionListener(this);

        block22.addActionListener(this);
        block23.addActionListener(this);
        block24.addActionListener(this);
        block25.addActionListener(this);
        block26.addActionListener(this);
        block27.addActionListener(this);
        block28.addActionListener(this);

        block29.addActionListener(this);
        block30.addActionListener(this);
        block31.addActionListener(this);
        block32.addActionListener(this);
        block33.addActionListener(this);
        block34.addActionListener(this);
        block35.addActionListener(this);

        block36.addActionListener(this);
        block37.addActionListener(this);
        block38.addActionListener(this);
        block39.addActionListener(this);
        block40.addActionListener(this);
        block41.addActionListener(this);
        block42.addActionListener(this);

        block43.addActionListener(this);
        block44.addActionListener(this);
        block45.addActionListener(this);
        block46.addActionListener(this);
        block47.addActionListener(this);
        block48.addActionListener(this);
        block49.addActionListener(this);

        // Set Block Locations
        block1.setBounds(300,50,50,50);
        block2.setBounds(350,50,50,50);
        block3.setBounds(400,50,50,50);
        block4.setBounds(450,50,50,50);
        block5.setBounds(500,50,50,50);
        block6.setBounds(550,50,50,50);
        block7.setBounds(600,50,50,50);

        block8.setBounds(300,100,50,50);
        block9.setBounds(350,100,50,50);
        block10.setBounds(400,100,50,50);
        block11.setBounds(450,100,50,50);
        block12.setBounds(500,100,50,50);
        block13.setBounds(550,100,50,50);
        block14.setBounds(600,100,50,50);

        block15.setBounds(300,150,50,50);
        block16.setBounds(350,150,50,50);
        block17.setBounds(400,150,50,50);
        block18.setBounds(450,150,50,50);
        block19.setBounds(500,150,50,50);
        block20.setBounds(550,150,50,50);
        block21.setBounds(600,150,50,50);

        block22.setBounds(300,200,50,50);
        block23.setBounds(350,200,50,50);
        block24.setBounds(400,200,50,50);
        block25.setBounds(450,200,50,50);
        block26.setBounds(500,200,50,50);
        block27.setBounds(550,200,50,50);
        block28.setBounds(600,200,50,50);

        block29.setBounds(300,250,50,50);
        block30.setBounds(350,250,50,50);
        block31.setBounds(400,250,50,50);
        block32.setBounds(450,250,50,50);
        block33.setBounds(500,250,50,50);
        block34.setBounds(550,250,50,50);
        block35.setBounds(600,250,50,50);

        block36.setBounds(300,300,50,50);
        block37.setBounds(350,300,50,50);
        block38.setBounds(400,300,50,50);
        block39.setBounds(450,300,50,50);
        block40.setBounds(500,300,50,50);
        block41.setBounds(550,300,50,50);
        block42.setBounds(600,300,50,50);

        block43.setBounds(300,350,50,50);
        block44.setBounds(350,350,50,50);
        block45.setBounds(400,350,50,50);
        block46.setBounds(450,350,50,50);
        block47.setBounds(500,350,50,50);
        block48.setBounds(550,350,50,50);
        block49.setBounds(600,350,50,50);

        // Add blocks to frame
        mainFrame.getContentPane().add(block1);
        mainFrame.getContentPane().add(block2);
        mainFrame.getContentPane().add(block3);
        mainFrame.getContentPane().add(block4);
        mainFrame.getContentPane().add(block5);
        mainFrame.getContentPane().add(block6);
        mainFrame.getContentPane().add(block7);

        mainFrame.getContentPane().add(block8);
        mainFrame.getContentPane().add(block9);
        mainFrame.getContentPane().add(block10);
        mainFrame.getContentPane().add(block11);
        mainFrame.getContentPane().add(block12);
        mainFrame.getContentPane().add(block13);
        mainFrame.getContentPane().add(block14);

        mainFrame.getContentPane().add(block15);
        mainFrame.getContentPane().add(block16);
        mainFrame.getContentPane().add(block17);
        mainFrame.getContentPane().add(block18);
        mainFrame.getContentPane().add(block19);
        mainFrame.getContentPane().add(block20);
        mainFrame.getContentPane().add(block21);

        mainFrame.getContentPane().add(block22);
        mainFrame.getContentPane().add(block23);
        mainFrame.getContentPane().add(block24);
        mainFrame.getContentPane().add(block25);
        mainFrame.getContentPane().add(block26);
        mainFrame.getContentPane().add(block27);
        mainFrame.getContentPane().add(block28);

        mainFrame.getContentPane().add(block29);
        mainFrame.getContentPane().add(block30);
        mainFrame.getContentPane().add(block31);
        mainFrame.getContentPane().add(block32);
        mainFrame.getContentPane().add(block33);
        mainFrame.getContentPane().add(block34);
        mainFrame.getContentPane().add(block35);

        mainFrame.getContentPane().add(block36);
        mainFrame.getContentPane().add(block37);
        mainFrame.getContentPane().add(block38);
        mainFrame.getContentPane().add(block39);
        mainFrame.getContentPane().add(block40);
        mainFrame.getContentPane().add(block41);
        mainFrame.getContentPane().add(block42);

        mainFrame.getContentPane().add(block43);
        mainFrame.getContentPane().add(block44);
        mainFrame.getContentPane().add(block45);
        mainFrame.getContentPane().add(block46);
        mainFrame.getContentPane().add(block47);
        mainFrame.getContentPane().add(block48);
        mainFrame.getContentPane().add(block49);

        mainFrame.getContentPane().add(errorBg);

        mainFrame.getContentPane().add(resetBoard);

        //mainFrame.pack();
        mainFrame.setVisible(true);  
    }

    /**
     *  Checks onClick event for which JButton was clicked
     *  and changes JButton.setIcon() accordingly.
     *
     *  @param  none
     *  @return none 
     *  @see    java.awt.event.*
     *  @see    JButton
     *  @see    setIcon()
     *  @see    getIcon()
     *
     */
    public void actionPerformed(ActionEvent e) {

        if(e.getSource()==resetBoard) {
            System.out.println("Resetting");
            gameReset();
        }

        if(e.getSource()==errorBg || e.getSource()==errorMessage) {
            errorBg.setVisible(false);
        }

        if(e.getSource()==block1) {
            if(block1.getIcon()==purpleBlock) {
                block1.setIcon(blueBlock);
                block2.setIcon(redBlock);
                block8.setIcon(redBlock);
            } else if(block1.getIcon()==blueBlock) {
                block1.setIcon(redBlock);
                block2.setIcon(greenBlock);
                block8.setIcon(greenBlock);
            } else if(block1.getIcon()==redBlock) {
                block1.setIcon(greenBlock);
                block2.setIcon(blueBlock);
                block8.setIcon(blueBlock);
            } else if(block1.getIcon()==greenBlock) {
                block1.setIcon(blueBlock);
                block2.setIcon(redBlock);
                block8.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block2) {
            if(block2.getIcon()==purpleBlock) {
                block2.setIcon(blueBlock);
                block1.setIcon(redBlock);
                block3.setIcon(redBlock);
                block9.setIcon(redBlock);
            } else if(block2.getIcon()==blueBlock) {
                block2.setIcon(redBlock);
                block1.setIcon(greenBlock);
                block3.setIcon(greenBlock);
                block9.setIcon(greenBlock);
            } else if(block2.getIcon()==redBlock) {
                block2.setIcon(greenBlock);
                block1.setIcon(blueBlock);
                block3.setIcon(blueBlock);
                block9.setIcon(blueBlock);
            } else if(block2.getIcon()==greenBlock) {
                block2.setIcon(blueBlock);
                block1.setIcon(redBlock);
                block3.setIcon(redBlock);
                block9.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block3) {
            if(block3.getIcon()==purpleBlock) {
                block3.setIcon(blueBlock);
                block2.setIcon(redBlock);
                block4.setIcon(redBlock);
                block10.setIcon(redBlock);
            } else if(block3.getIcon()==blueBlock) {
                block3.setIcon(redBlock);
                block2.setIcon(greenBlock);
                block4.setIcon(greenBlock);
                block10.setIcon(greenBlock);
            } else if(block3.getIcon()==redBlock) {
                block3.setIcon(greenBlock);
                block2.setIcon(blueBlock);
                block4.setIcon(blueBlock);
                block10.setIcon(blueBlock);
            } else if(block3.getIcon()==greenBlock) {
                block3.setIcon(blueBlock);
                block2.setIcon(redBlock);
                block4.setIcon(redBlock);
                block10.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block4) {
            if(block4.getIcon()==purpleBlock) {
                block4.setIcon(blueBlock);
                block3.setIcon(redBlock);
                block5.setIcon(redBlock);
                block11.setIcon(redBlock);
            } else if(block4.getIcon()==blueBlock) {
                block4.setIcon(redBlock);
                block3.setIcon(greenBlock);
                block5.setIcon(greenBlock);
                block11.setIcon(greenBlock);
            } else if(block4.getIcon()==redBlock) {
                block4.setIcon(greenBlock);
                block3.setIcon(blueBlock);
                block5.setIcon(blueBlock);
                block11.setIcon(blueBlock);
            } else if(block4.getIcon()==greenBlock) {
                block4.setIcon(blueBlock);
                block3.setIcon(redBlock);
                block5.setIcon(redBlock);
                block11.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block5) {
            if(block5.getIcon()==purpleBlock) {
                block5.setIcon(blueBlock);
                block4.setIcon(redBlock);
                block6.setIcon(redBlock);
                block12.setIcon(redBlock);
            } else if(block5.getIcon()==blueBlock) {
                block5.setIcon(redBlock);
                block4.setIcon(greenBlock);
                block6.setIcon(greenBlock);
                block12.setIcon(greenBlock);
            } else if(block5.getIcon()==redBlock) {
                block5.setIcon(greenBlock);
                block4.setIcon(blueBlock);
                block6.setIcon(blueBlock);
                block12.setIcon(blueBlock);
            } else if(block5.getIcon()==greenBlock) {
                block5.setIcon(blueBlock);
                block4.setIcon(redBlock);
                block6.setIcon(redBlock);
                block12.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block5) {
            if(block5.getIcon()==purpleBlock) {
                block5.setIcon(blueBlock);
                block4.setIcon(redBlock);
                block6.setIcon(redBlock);
                block12.setIcon(redBlock);
            } else if(block5.getIcon()==blueBlock) {
                block5.setIcon(redBlock);
                block4.setIcon(greenBlock);
                block6.setIcon(greenBlock);
                block12.setIcon(greenBlock);
            } else if(block5.getIcon()==redBlock) {
                block5.setIcon(greenBlock);
                block4.setIcon(blueBlock);
                block6.setIcon(blueBlock);
                block12.setIcon(blueBlock);
            } else if(block5.getIcon()==greenBlock) {
                block5.setIcon(blueBlock);
                block4.setIcon(redBlock);
                block6.setIcon(redBlock);
                block12.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block6) {
            if(block6.getIcon()==purpleBlock) {
                block6.setIcon(blueBlock);
                block5.setIcon(redBlock);
                block7.setIcon(redBlock);
                block13.setIcon(redBlock);
            } else if(block6.getIcon()==blueBlock) {
                block6.setIcon(redBlock);
                block5.setIcon(greenBlock);
                block7.setIcon(greenBlock);
                block13.setIcon(greenBlock);
            } else if(block6.getIcon()==redBlock) {
                block6.setIcon(greenBlock);
                block5.setIcon(blueBlock);
                block7.setIcon(blueBlock);
                block13.setIcon(blueBlock);
            } else if(block6.getIcon()==greenBlock) {
                block6.setIcon(blueBlock);
                block5.setIcon(redBlock);
                block7.setIcon(redBlock);
                block13.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block7) {
            if(block7.getIcon()==purpleBlock) {
                block7.setIcon(blueBlock);
                block6.setIcon(redBlock);
                block14.setIcon(redBlock);
                //block13.setIcon(redBlock);
            } else if(block7.getIcon()==blueBlock) {
                block7.setIcon(redBlock);
                block6.setIcon(greenBlock);
                block14.setIcon(greenBlock);
                //block13.setIcon(greenBlock);
            } else if(block7.getIcon()==redBlock) {
                block7.setIcon(greenBlock);
                block6.setIcon(purpleBlock);
                block14.setIcon(purpleBlock);
                //block13.setIcon(blueBlock);
            } else if(block7.getIcon()==greenBlock) {
                block7.setIcon(purpleBlock);
                block6.setIcon(blueBlock);
                block14.setIcon(blueBlock);
                //block13.setIcon(redBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block8) {
            if(block8.getIcon()==purpleBlock) {
                block8.setIcon(blueBlock);
                block1.setIcon(redBlock);
                block9.setIcon(redBlock);
                block15.setIcon(redBlock);
            } else if(block8.getIcon()==blueBlock) {
                block8.setIcon(redBlock);
                block1.setIcon(greenBlock);
                block9.setIcon(greenBlock);
                block15.setIcon(greenBlock);
            } else if(block8.getIcon()==redBlock) {
                block8.setIcon(greenBlock);
                block1.setIcon(purpleBlock);
                block9.setIcon(purpleBlock);
                block15.setIcon(purpleBlock);
            } else if(block8.getIcon()==greenBlock) {
                block8.setIcon(purpleBlock);
                block1.setIcon(blueBlock);
                block9.setIcon(blueBlock);
                block15.setIcon(blueBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }

        if(e.getSource()==block9) {
            if(block9.getIcon()==purpleBlock) {
                block9.setIcon(blueBlock);
                block2.setIcon(redBlock);
                block10.setIcon(redBlock);
                block8.setIcon(redBlock);
                block16.setIcon(redBlock);
            } else if(block9.getIcon()==blueBlock) {
                block9.setIcon(redBlock);
                block2.setIcon(greenBlock);
                block10.setIcon(greenBlock);
                block8.setIcon(greenBlock);
                block16.setIcon(greenBlock);
            } else if(block9.getIcon()==redBlock) {
                block9.setIcon(greenBlock);
                block2.setIcon(purpleBlock);
                block10.setIcon(purpleBlock);
                block8.setIcon(purpleBlock);
                block16.setIcon(purpleBlock);
            } else if(block9.getIcon()==greenBlock) {
                block9.setIcon(purpleBlock);
                block2.setIcon(blueBlock);
                block10.setIcon(blueBlock);
                block8.setIcon(blueBlock);
                block16.setIcon(blueBlock);
            } else {
                // Woops! Something went wrong!
                errorBg.setVisible(true);
                errorMessage.setText("Woops! Something went wrong! @" + e.getSource());
            }   
        }
    }

    public void gameReset() {

        // Add Tiles to mainFrame
        block1.setIcon(randomizer());
        block2.setIcon(randomizer());
        block3.setIcon(randomizer());
        block4.setIcon(randomizer());
        block5.setIcon(randomizer());
        block6.setIcon(randomizer());
        block7.setIcon(randomizer());

        block8.setIcon(randomizer());
        block9.setIcon(randomizer());
        block10.setIcon(randomizer());
        block11.setIcon(randomizer());
        block12.setIcon(randomizer());
        block13.setIcon(randomizer());
        block14.setIcon(randomizer());

        block15.setIcon(randomizer());
        block16.setIcon(randomizer());
        block17.setIcon(randomizer());
        block18.setIcon(randomizer());
        block19.setIcon(randomizer());
        block20.setIcon(randomizer());
        block21.setIcon(randomizer());

        block22.setIcon(randomizer());
        block23.setIcon(randomizer());
        block24.setIcon(randomizer());
        block25.setIcon(randomizer());
        block26.setIcon(randomizer());
        block27.setIcon(randomizer());
        block28.setIcon(randomizer());

        block29.setIcon(randomizer());
        block30.setIcon(randomizer());
        block31.setIcon(randomizer());
        block32.setIcon(randomizer());
        block33.setIcon(randomizer());
        block34.setIcon(randomizer());
        block35.setIcon(randomizer());

        block36.setIcon(randomizer());
        block37.setIcon(randomizer());
        block38.setIcon(randomizer());
        block39.setIcon(randomizer());
        block40.setIcon(randomizer());
        block41.setIcon(randomizer());
        block42.setIcon(randomizer());

        block43.setIcon(randomizer());
        block44.setIcon(randomizer());
        block45.setIcon(randomizer());
        block46.setIcon(randomizer());
        block47.setIcon(randomizer());
        block48.setIcon(randomizer());
        block49.setIcon(randomizer());
    }

    public ImageIcon randomizer() {

        Random r = new Random();
        int rNum = r.nextInt(4);

        if(rNum==0) {
            return purpleBlock;
        } else if(rNum==1) {
            return redBlock;
        } else if(rNum==2) {
            return greenBlock;
        } else {
            return blueBlock;
        }
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new Blox().game();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:01:46.150

不要将 MouseListener 与 JButton 一起使用，而应使用 ActionListener。这在[按钮教程](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)中都有很好的说明，我强烈建议您尽快阅读它们。

我在您的代码中看到的一个主要问题可以在这里找到：

```
public ImageIcon randomizer() {

    try {
        purpleBlock.setImage(ImageIO.read(new File("purpleBlock.png")));
        redBlock.setImage(ImageIO.read(new File("redBlock.png")));
        blueBlock.setImage(ImageIO.read(new File("blueBlock.png")));
        greenBlock.setImage(ImageIO.read(new File("greenBlock.png")));
    } catch (IOException e) {
        e.printStackTrace();
    }   

    Random r = new Random();
    int rNum = r.nextInt(4);

    if(rNum==0) {
        return purpleBlock;
    } else if(rNum==1) {
        return redBlock;
    } else if(rNum==2) {
        return greenBlock;
    } else {
        return blueBlock;
    }
} 
```

`randomizer()`每当调用该方法时，您都会从文件中重新读取所有色块图像。没有必要这样做，因为已经使用正确的图像创建了 ImageIcons，但不仅如此，这可能会极大地减慢您的程序速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:08:21.287

使用`ActionListener`for 按钮，而不是`MouseListener`. 此外，当您的变量名称仅以数字后缀不同时，您应该考虑使用数组。您可以显着减少代码行数。您只需要 1 个声明而不是 49 个，并且大多数访问按钮变量的代码部分可以减少到每行 1 行加上一个封闭的 for 循环（1 行加上一个右大括号）。

# c# - 通过其他应用程序的窗口设置 wpf 窗口的所有者，可以吗？

> ID：15016592
> 
> 赞同：1
> 
> 时间：2013-02-22T03:59:50.147
> 
> 标签：c#, .net, wpf, mvvm

我想通过 wpf 制作一个可以覆盖特定 Windows 应用程序的应用程序。这意味着，当我运行我的应用程序并将记事本指定为目标应用程序时。那时，只要记事本应用程序获得焦点，我的应用程序就会接管焦点并阻止用户直接处理记事本。

在同一个应用程序中有 2 个窗口的情况下非常简单（我们可以设置子窗口的所有者和 showdialog）

所以，我想知道是否有可能获取其他应用程序的窗口句柄来为我们的应用程序设置所有者。

感谢您的任何评论或讨论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:05:36.613

在一般意义上，是的 - 这是可能的。但是您必须使用平台 API 来获取不在您的进程中的 Windows 句柄。

这是[Win32 平台 API 中与窗口相关的函数列表](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468919%28v=vs.85%29.aspx)

然后，您可以使您的 WPF 窗口出现在另一个窗口的顶部。但是要知道，根据您的最终目标，这可能不是实现您想要的结果的最佳方式！

# python - 如何解析列表以获取值

> ID：15016599
> 
> 赞同：0
> 
> 时间：2013-02-22T04:00:39.260
> 
> 标签：python

我需要一些关于如何解析列表和打印特定值的想法，假设我想解析dependontext，然后只打印数字“249452”，请提出想法

```
INPUT:-

dependsontext = [{u'isCurrentPatchSet': True, u'revision': u'ad0beef66e5890cde6f0961ed03d8bc7e3defc63', u'ref': u'refs/changes/52/249452/1', u'id': u'Iad0beef66e5890cde6f0961ed03d8bc7e3defc63', u'number': u'249452'}]

OUTPUT:-

249452 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:05:34.457

因为你使用了 python 标签，所以看起来你想要

```
dependsontext[0]['number'] 
```

`dependsontext`是一个单元素的字典列表，因此您可以使用 获取第一个元素`[0]` 然后您可以使用键从该字典中检索一个值，例如`['number']`

不过，您的问题有点不清楚 - 很难判断您使用的是 python 数据结构还是字符串。如果是后者，我建议查看用于 json 解析的 simplejson 模块。

# matlab - MATLAB 多次保存函数的多个输出

> ID：15016601
> 
> 赞同：1
> 
> 时间：2013-02-22T04:00:42.230
> 
> 标签：matlab

`[r, p] = corr(X1,Y1);`在 MATLAB 中，我试图在多个 X 和 Y 上使用此函数后创建内置函数的输出矩阵。然后，我想将所有 r 和 p 合并到它们各自的矩阵 R 和 P 中。例如，如果我只调用一个输出，我可以很容易地做到这一点`corr`：

```
R = [corr(X1,Y1), corr(X2,Y2); (...)
     corr(X3,Y3), corr(X4,Y4)]; 
```

as默认`corr`返回`r`值。有没有办法实现这一目标`p`？下面是我做的很长的路，我只是想知道是否有像上面这样更短更简单的方法。

首先找到每个`r`and `p`：

```
[r1, p1] = corr(X1,Y1);
[r2, p2] = corr(X2,Y2);
[r3, p3] = corr(X3,Y3);
.... 
```

然后将它们组合成矩阵：

```
R = [r1 r2; (...)
     r3 r4; (...)
     ...];
P = [p1 p2; (...)
     p3 p4; (...)
     ...]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:35:57.730

你可以尝试一些类似的东西

```
for i=1:n,
  [R(:,end+1), P(:,end+1)] = corr(X(:,i), Y(:,i));
end 
```

只要确保`R(:,1)`并且`P(:,1)`尺寸正确。分配`R(:,end+1)`and`P(:,end+1)`将自动增长`R`，`P`而无需手动将它们从临时变量中组合起来。

# java - 每次用户在android中使用json数组玩游戏时如何随机化测验中的问题

> ID：15016602
> 
> 赞同：0
> 
> 时间：2013-02-22T04:00:46.070
> 
> 标签：java, javascript, android, json, random

我正在开发一个简单的测验，其中存储了 50 个问题..我的问题是，我无法随机化问题，每次用户玩游戏时都应该随机化，并且只有 10 个问题要显示...请帮助我...我使用这个[在java中洗牌JSON数组的有效方法？](https://stackoverflow.com/questions/5531130/an-efficient-way-to-shuffle-a-json-array-in-java)但它不起作用！！！！非常感谢您的帮助！

```
public class Question1 extends Activity {

Intent menu = null;
BufferedReader bReader = null;
static JSONArray quesList = null;
static int index = 50;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.question10);

    Thread thread = new Thread() {
        public void run() {
            try {
                Thread.sleep(1 * 1000);
                finish();
                loadQuestions();
                Intent intent = new Intent(Question1.this,
                        Question2.class);
                Question1.this.startActivity(intent);
            } catch (Exception e) {
            }
        }
    };
    thread.start();

}

private void loadQuestions() throws Exception {
    try {

        InputStream questions = this.getBaseContext().getResources()
                .openRawResource(R.raw.questions);
        bReader = new BufferedReader(new InputStreamReader(questions));
        StringBuilder quesString = new StringBuilder();
        String aJsonLine = null;
        while ((aJsonLine = bReader.readLine()) != null) {
            quesString.append(aJsonLine);
        }

        Log.d(this.getClass().toString(), quesString.toString());
        JSONObject quesObj = new JSONObject(quesString.toString());
        quesList = quesObj.getJSONArray("Questions");
        Log.d(this.getClass().getName(),
                "Num Questions " + quesList.length());

    } catch (Exception e) {

    } finally {
        try {
            bReader.close();
        } catch (Exception e) {
            Log.e("", e.getMessage().toString(), e.getCause());
        }

    }

}

public static JSONArray shuffleJsonArray (JSONArray quesList) throws JSONException {
    // Implementing Fisher–Yates shuffle
        Random rnd = new Random();
        for (int i = quesList.length() - 1; i >= 0; i--)
        {
          int j = rnd.nextInt(i + 1);
          // Simple swap
          Object object = quesList.get(j);
          quesList.put(j, quesList.get(i));
          quesList.put(i, object);
        }
    return quesList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:25:09.257

您可以启动一个循环，随机生成问题编号并将它们保存在一个数组中，然后使用该数组绑定或显示问题......这将是随机的......

# java - 使用java根据上一行和下一行中的信息删除文件行

> ID：15016606
> 
> 赞同：0
> 
> 时间：2013-02-22T04:01:15.390
> 
> 标签：java

我有看起来像这样的数据。

```
CONTIG  POSITION    INFO
CF1_seqReads_contig_5   117537  .   C   T   222 .   DP=31;VDB=0.0507;AF1=1;AC1=2;DP4=0,0,16,11;MQ=38;FQ=-108    GT:PL:GQ    1/1:255,81,0:99
CF1_seqReads_contig_5   117541  .   A   T   222 .   DP=30;VDB=0.0381;AF1=1;AC1=2;DP4=0,0,16,11;MQ=39;FQ=-108    GT:PL:GQ    1/1:255,81,0:99
CF1_seqReads_contig_9   96299   .   G   T   150 .   DP=44;VDB=0.0330;AF1=1;AC1=2;DP4=0,0,5,20;MQ=31;FQ=-102 GT:PL:GQ    1/1:183,75,0:99
CF1_seqReads_contig_9   96305   .   G   C   88  .   DP=43;VDB=0.0279;AF1=1;AC1=2;DP4=0,0,4,5;MQ=29;FQ=-54   GT:PL:GQ    1/1:121,27,0:51
CF1_seqReads_contig_11  73382   .   G   C   37.2    .   DP=19;VDB=0.0063;AF1=0.5263;AC1=1;DP4=0,1,2,3;MQ=47;FQ=-17.1;PV4=1,0.14,1,0.0015    GT:PL:GQ    0/1:67,0,10:13
CF1_seqReads_contig_11  130161  .   G   T   59.3    .   DP=30;VDB=0.0545;AF1=1;AC1=2;DP4=0,0,2,3;MQ=55;FQ=-42   GT:PL:GQ    1/1:92,15,0:27
CF1_seqReads_contig_16  8578    .   G   A   167 .   DP=34;VDB=0.0187;AF1=1;AC1=2;DP4=0,0,3,19;MQ=29;FQ=-93  GT:PL:GQ    1/1:200,66,0:99
CF1_seqReads_contig_19  169 .   C   T   110 .   DP=37;VDB=0.0545;AF1=0.5336;AC1=1;DP4=0,3,1,9;MQ=36;FQ=-18.1;PV4=1,0.33,1,0.014 GT:PL:GQ    0/1:140,0,9:12
CF1_seqReads_contig_19  190 .   G   T   30.1    .   DP=39;VDB=0.0004;AF1=0.5102;AC1=1;DP4=0,3,6,0;MQ=47;FQ=-13.2;PV4=0.012,1,1,1    GT:PL:GQ    0/1:60,0,14:17
CF1_seqReads_contig_20  229322  .   C   T   222 .   DP=55;VDB=0.0521;AF1=1;AC1=2;DP4=0,0,19,27;MQ=57;FQ=-165    GT:PL:GQ    1/1:255,138,0:99
CF1_seqReads_contig_40  184 .   C   A   36.5    .   DP=23;VDB=0.0014;AF1=1;AC1=2;DP4=1,0,11,0;MQ=29;FQ=-34;PV4=1,0.0039,1,0.29  GT:PL:GQ    1/1:68,7,0:12
CF1_seqReads_contig_40  194 .   C   T   59  .   DP=28;VDB=0.0014;AF1=1;AC1=2;DP4=0,1,17,0;MQ=29;FQ=-62;PV4=0.056,0.44,1,0.3 GT:PL:GQ    1/1:92,35,0:67
CF1_seqReads_contig_40  197 .   C   G   59  .   DP=29;VDB=0.0063;AF1=1;AC1=2;DP4=0,0,11,0;MQ=29;FQ=-60  GT:PL:GQ    1/1:92,33,0:63
CF1_seqReads_contig_49  111973  .   G   A   32.3    .   DP=13;VDB=0.0063;AF1=0.543;AC1=1;DP4=0,1,3,1;MQ=29;FQ=-19;PV4=0.4,0.44,1,0.16   GT:PL:GQ    0/1:62,0,8:11
CF1_seqReads_contig_49  124688  .   G   T   42.1    .   DP=48;VDB=0.0532;AF1=0.5064;AC1=1;DP4=2,0,4,3;MQ=45;FQ=-11.3;PV4=0.5,0.095,1,0.099  GT:PL:GQ    0/1:72,0,16:19
CF1_seqReads_contig_51  3725    .   C   T   39.3    .   DP=24;VDB=0.0381;AF1=1;AC1=2;DP4=0,0,1,4;MQ=29;FQ=-42   GT:PL:GQ    1/1:72,15,0:27
CF1_seqReads_contig_79  24357   .   C   T   80.1    .   DP=36;VDB=0.0435;AF1=1;AC1=2;DP4=0,0,4,3;MQ=34;FQ=-48   GT:PL:GQ    1/1:113,21,0:39
CF1_seqReads_contig_79  24367   .   C   T   65  .   DP=40;VDB=0.0187;AF1=1;AC1=2;DP4=0,0,7,1;MQ=38;FQ=-51   GT:PL:GQ    1/1:98,24,0:45
CF1_seqReads_contig_115 14710   .   C   A   80  .   DP=40;VDB=0.0381;AF1=1;AC1=2;DP4=0,0,1,7;MQ=60;FQ=-51   GT:PL:GQ    1/1:113,24,0:45
CF1_seqReads_contig_167 4920    .   G   T   60  .   DP=19;VDB=0.0085;AF1=0.5008;AC1=1;DP4=1,2,4,2;MQ=41;FQ=-4.12;PV4=0.52,1,0.077,0.23  GT:PL:GQ    0/1:90,0,25:28 
```

我正在尝试从同一 CONTIG 中的其他行中删除属于同一 CONTIG 且 POSITION 小于 30 的行。例如，前两行将被删除，因为它们共享相同的 contig，并且它们的位置（117537 和 117541）相差小于 15。第三行和第四行也是如此。另一方面，将打印第五行和第六行，因为即使它们共享相同的 CONTIG，它们的位置也相差超过 15 (130161-73382>15)。我试图解决这个问题

```
public void getFilteredData(File in){
   String contig = "";
   int position = -1;
   String lastContig = "";
   int lastPosition = -1;
   String nextContig = "";
   int nextPosition = -1;

   while(in.hasNextLine()){
      String curLine = in.nextLine();
      String[] curInfo = curLine.split("\t");

      /*Isolate the snp position*/ 
      contig = curInfo[0];
      position = Integer.parseInt(curInfo[1]);
      if(file.hasNextLine()){
         String nextLine = file.nextLine();
         nextContig = nextLine.split("\t")[0];
         nextPosition = Integer.parseInt(nextLine.split("\t")[1]);
         if(nextContig.equals(contig)){
            if( nextPosition-position<15){
               System.out.println(curLine);
            }
         }
         lastContig = contig;
         lastPosition = position;
      }
   }
} 
```

这段代码没有给我我正在寻找的结果。你能帮我解开这个问题吗？我认为为上一条和下一条信息分配值会有所帮助，但我不知所措。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:24:21.647

只是工作代码，可能会进一步优化。

公共静态 void main(String[] args) 抛出异常 {

```
 BufferedReader reader = new BufferedReader(new FileReader("F:/contig.txt"));
    String currLine;
    String[] array;
    String contig;
    int position;

    String nextLine;
    String[] nextArray;
    String nextContig;
    int nextPosition;

    reader.readLine(); // ignore first line
    while ((currLine = reader.readLine()) != null) {

        array = currLine.split("\\s+");
        contig = array[0];
        position = Integer.parseInt(array[1]);

        nextLine = reader.readLine();
        if (nextLine != null) {
            nextArray = nextLine.split("\\s+");
            nextContig = nextArray[0];
            nextPosition = Integer.parseInt(nextArray[1]);

            if (nextContig.equals(contig)) {
                if (nextPosition - position < 15) {
                    System.out.println(currLine);
                }
            }
        } else {
            break;
        }
    }

    reader.close();
} 
```

# java - 文本到二进制转换和写入文件。请帮忙

> ID：15016608
> 
> 赞同：0
> 
> 时间：2013-02-22T04:01:27.993
> 
> 标签：java, file, binary

我正在尝试将纯文本数据转换为二进制格式，以便它变得不可编辑。数据需要写入文件。如果我在控制台窗口中打印它并且无法读取原始文本，则转换有效。但是，将其写入文件时，会出现相同的原始文本。如何将此二进制数据写入文件，而不对其进行加密，但使其不可读？

该文件稍后需要由另一个接受二进制数据的第三方工具处理。这就是为什么我无法使用自己的算法对其进行加密的原因。

这是我的代码：

```
import java.io.*;
import java.lang.*;
public class convert{
public static void main( String args[] ){
String s= "This is text";
try{
File file= new File("test.php");
file.createNewFile();
FileWriter fw= new FileWriter( file.getName(), true );
BufferedWriter bw= new BufferedWriter( fw );

byte[] b= s.getBytes();
for(int x=0; x<b.length; x++){
byte c=b[x];
bw.write( c );
System.out.println(c);
}

bw.close();
}catch( Exception e ){ e.printStackTrace(); }
}//main
}//class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:17:17.810

纯文本本身就是一种二进制格式，其中每个字节都被解释为一个字符（或其他变体，取决于假定或指定的编码，例如 UTF-8、UTF-16...）。

这意味着如果您将 ASCII 字符作为字节写入文件，它将看起来相同并且任何人都可以读取。事实上，很多二进制文件格式仍然将字符串保存为普通字节，这意味着它们可以在十六进制编辑器中打开时读取，例如这里： ![十六进制编辑器](../Images/bb4c60e2a4880b0ee34d192ffa9fb877.png)

要使其不可读，您需要做的是将其序列化为一些不可读的通用格式。不幸的是，Java 中的普通序列化是可读的，但您可以[在此处](http://www.ibm.com/developerworks/java/library/j-5things1/index.html#N101BB)查看如何隐藏它的建议。您也可以使用 ZIP 或类似的压缩算法。

另一种更老套的方法是将所有字符字节移动某个已知值。这将导致它们变成不同的字符，并且不可读。这可以看作是一个非常基本的[凯撒芯片](http://en.wikipedia.org/wiki/Caesar_cipher)。

但归根结底，重要的是您的目标程序能够读取哪种格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T05:18:38.210

好吧，您可以为此使用 RandomAccessFile。它变得容易。

```
RandomAccessFile raf = new RandomAccessFile(path,permissions); //permissions are r,w,rw. The usual ones.
raf.seek(0); //this will set the pointer to first position.
raf.writeUTF(what ever you want to write to file);

//to read the file use readUTF()
raf.seek(0); //you can read from a part of file using this seek method.
System.out.println(raf.readUTF()); 
```

# ruby-on-rails - Rails 异常声明：where().first_or_create()

> ID：15016612
> 
> 赞同：3
> 
> 时间：2013-02-22T04:01:40.893
> 
> 标签：ruby-on-rails

我正在[使用 Devise](http://railscasts.com/episodes/235-devise-and-omniauth-revised?autoplay=true) railscast 关注 Ryan 的Omniauth。代码的一部分是：

```
class User < ActiveRecord::Base   
  def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_create do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.username = auth.info.nickname
    end
  end
end 
```

我在用 where().first_or_create 挠头。这段代码究竟做了什么？

我的猜测是 where() 语句适用于类 User。但是 Rails 怎么知道它等价于`User.where(:provider => "provider_id passed by auth", :uid => "uid passed by auth")`?

我的猜测是它会产生一个集合，然后如果集合为空，则创建一个新实例`user`并分配新属性。否则选择第一个实例并重新分配属性。

我的猜测正确吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T04:07:33.537

让我们把它分成几部分。

**auth.slice(:provider, :uid)**

auth 是一个包含 :provider 和 :uid 键的哈希。调用 .slice 进行身份验证会返回一个新的哈希，其中只有这些作为键。IE

```
auth = { provider: 'foo', uid: 'bar', some_other_key: 'blah' }
new_hash = auth.slice(:provider, :uid) # { provider: 'foo', uid: 'bar' } 
```

**first_or_create**

相当于`find_or_create_by`。您可以阅读[文档](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-first_or_create)并查看它搜索与传递给的选项匹配的任何记录`where`。如果没有找到记录，它会尝试使用这些选项作为属性创建记录。

通过的块

```
user.provider = auth.provider
user.uid = auth.uid
user.username = auth.info.nickname 
```

实际上只需要最后一行。前两行是多余的，因为它在 where 选项中。

# java - Java：从通过 USB 连接到 PC 的手机读取传入的短信（从 PC 端）

> ID：15016614
> 
> 赞同：0
> 
> 时间：2013-02-22T04:01:45.137
> 
> 标签：java, android, sms

我想拦截来自通过 USB 连接到 PC 的 Android 手机的 SMS 消息。PC端的Java应用程序。

我应该从哪里开始？会是双方的应用程序吗？或者有一些PC端的库吗？

我只找到了诸如 SmsJ 之类的串行端口访问提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T04:30:17.650

背景 ：

当您使用 USB 电缆连接电话时，您的计算机会创建一个虚拟 COMM 端口并为其分配一个新的端口号。您可以在设备管理器列表中查看端口号详细信息。

开发部分：

首先，您可以阅读[Java 的端口阅读示例](http://www.java2s.com/Code/Java/Development-Class/PortReader.htm)。只要研究这个例子，你就可以从你的安卓手机连接和发送短信。它将允许在计算机中触发您的命令，该命令实际上会发送到附加的电话。要向 COMM 端口发送命令，您将需要[AT 命令来发送 SMS](http://www.smssolutions.net/tutorials/gsm/sendsmsat/)。使用 AT 命令，您还可以在手机上阅读短信和执行其他功能。

您还可以通过蓝牙连接手机，它还会分配相同的虚拟 COMM 端口，您也可以执行所有功能。

# java - 检测 jpanel 焦点的变化

> ID：15016616
> 
> 赞同：0
> 
> 时间：2013-02-22T04:01:56.660
> 
> 标签：java, swing, focus, jpanel

我有一个 JTabbedPane。在这个组件上有四个 JPanel。在每个面板上都有一个滚动面板。最后，在每个滚动面板上都有另一个 JPanel。我需要随时跟踪显示这些最终 JPanel 中的哪一个。

所以我创建了一个名为 activePanel 的类变量。对于每个最终的 JPanel，我设置了一个焦点事件方法，以便当面板获得焦点时，相应地设置此变量。例如：

```
private void pnlAdditionFocusGained(java.awt.event.FocusEvent evt) {
        activeTab = "pnlAddition";
        System.out.println(activeTab);
    } 
```

不幸的是，这并没有像我希望的那样工作。有人可以建议我应该做些什么来跟踪这个吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:22:53.273

`JPanel`默认情况下不可聚焦。

相反，您应该跟踪选定的选项卡

查看[如何使用选项卡式窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)了解更多信息

# go - 在 go 中使用静态类型构造函数有什么明显的缺点吗？

> ID：15016617
> 
> 赞同：2
> 
> 时间：2013-02-22T04:01:57.910
> 
> 标签：go

我总是发现 go 中的 package.New() 语法很难使用。

建议是，如果一个包只包含一个类型，则使用 package.New() 创建一个实例；如果存在多种类型，则使用 package.NewBlah()。 [http://golang.org/doc/effective_go.html#package-names](http://golang.org/doc/effective_go.html#package-names)

但是，如果您有一个带有 New() api 的现有包，则这种方法会失败，向包添加新的外部类型会破坏 api，因为您现在必须重命名此 NewFoo()。现在你必须去改变任何使用 New() 的东西，这很烦人。

......我只是对写这篇文章的审美不满：

```
import "other"
import "bar"
import "foo"

o := other.New()  // <-- Weird, what type am I getting? No idea.
x := bar.New()  
y := foo.NewFoo() // <-- Awkward, makes constructor naming look inconsistent   
z := foo.NewBar() 
```

所以，最近我一直在使用这种模式：

```
x := foo.Foo{}.New()   // <-- Immediately obvious I'm getting a Foo
y := foo.Bar{}.New()   // <-- Only an additional 3 characters on NewBar{}
o := other.Foo{}.New() // <-- Consistent across all packages, no breakage on update 
```

模块的定义如下：

```
package foo

type Foo struct {
  x int
}

func (s Foo) New() *Foo {
  // Normal init stuff here
  return &s // <-- Edit: notice the single instance is returned 
}

type Bar struct {
}

func (Bar) New() *Bar {
  return &Bar{} // <-- Edit: Bad, results in double alloc. Not like this. 
} 
```

Godoc 似乎可以很好地使用它，而且对我来说似乎更明显和一致，没有额外的冗长。

所以，问题：**这有什么明显的缺点吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:25:39.010

是的，它有一个缺点。这种方法可能会产生不必要的垃圾——取决于特定 Go 编译器实现的优化有多好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T05:14:36.410

正如您所注意到的，这并不是非常惯用的，如果做得不好，可能会产生过多的垃圾。本质上，您只是为您的对象创建一个 Init 方法。我自己并不使用很多构造函数，我倾向于为我的对象使用有效的零值，并且仅在不成立时才使用构造函数。

在你的情况下，我想我会停止调用 new 方法，而是调用它 Init 或 Setup 以更好地反映它在做什么。这将避免让人们对它在做什么有错误的想法。

编辑：

我应该在这里更详细。调用方法 Init 或 Setup 然后在零值上使用它会更好地反映消费者正在发生的事情。例如

```
f := &foo{}
f.Init() 
```

这避免了过多的垃圾，并为您提供了您所描述的初始化方法。

# android - Android - 谷歌地图获得“空指针异常”

> ID：15016621
> 
> 赞同：1
> 
> 时间：2013-02-22T04:02:26.993
> 
> 标签：android, google-maps, maps

我正在尝试使用 MapsForge 在地图上显示多个图标。我只能在地图上正确的 GPS 位置放置 2 个图标，而不会出现错误。当我尝试添加第三个图标时，应用程序崩溃并且出现空指针异常。此外，该应用程序不会下载瓷砖并给我“MapnikTileDownload：主机未解析：tile.openstreetmap.org:80”。

MapsForgeViewer：

```
public class MapsForgeViewer extends MapActivity implements OnClickListener {

private List<Overlay> mapOverlays;
private Drawable drawable1, drawable2;
private CustomItemizedOverlay itemizedOverlay1, itemizedOverlay2, itemizedOverlay3;
private boolean isDisplayed = false;

private MapView mapView;
    private Button info;
    private Button roster;
    private Button schedule;
    private Button stats;
    private Button exit;

private OverlayItem [] pittIcon = {
        new OverlayItem( new GeoPoint(40.443061,-79.962273), "Pitt", "Panthers")       
    };
private OverlayItem [] cuseIcon = {
        new OverlayItem( new GeoPoint(43.037628,-76.137654), "Cuse", "Orangemen")
};
private OverlayItem [] lvilleIcon = {
        new OverlayItem( new GeoPoint(38.253153,-85.753847), "Louisville", "Cards")
};

    public void setOverlay1(){  
        int pittLength = pittIcon.length;
        // Create if it doesn't exist and display
        mapOverlays = mapView.getOverlays();    
        drawable1 = this.getResources().getDrawable(R.drawable.pittspin); 
        itemizedOverlay1 = new CustomItemizedOverlay(drawable1); 

        for(int i=0; i<pittLength; i++){
            itemizedOverlay1.addOverlay(pittIcon[i]);
        }
        mapOverlays.add(itemizedOverlay1); 
        // Added symbols will be displayed when map is redrawn so force redraw now
        mapView.postInvalidate(); 
    }

    public void setOverlay2(){  
        // Create itemizedOverlay2 if it doesn't exist
        mapOverlays = mapView.getOverlays();    
        drawable2 = this.getResources().getDrawable(R.drawable.louispin);
        itemizedOverlay2 = new CustomItemizedOverlay(drawable2);     
        // Add items
        itemizedOverlay2.addOverlay(lvilleIcon[itemizedOverlay2.size()]);   
        mapOverlays.add(itemizedOverlay2);      
        mapView.postInvalidate();
    }

    public void setOverlay3(){  
        int cuseLength = cuseIcon.length;
        // Create itemizedOverlay2 if it doesn't exist and display all three items
        mapOverlays = mapView.getOverlays();    
        Drawable drawable3 = this.getResources().getDrawable(R.drawable.cusepin); 
        itemizedOverlay3 = new CustomItemizedOverlay(drawable3); 
        // Display all three items at once
        for(int i=0; i<cuseLength; i++){
            itemizedOverlay3.addOverlay(cuseIcon[i]);
        }
        mapOverlays.add(itemizedOverlay3);
        isDisplayed = !isDisplayed;    
        // Added symbols will be displayed when map is redrawn so force redraw now
        mapView.postInvalidate(); 
    }

    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.map_view);

        info = (Button) findViewById(R.id.information);
        roster = (Button) findViewById(R.id.roster);
        schedule = (Button) findViewById(R.id.schedule);
        stats = (Button) findViewById(R.id.stats);
        exit = (Button) findViewById(R.id.exit);
        info.setOnClickListener(this);
        roster.setOnClickListener(this);
        schedule.setOnClickListener(this);
        stats.setOnClickListener(this);
        exit.setOnClickListener(this);
        // end of mapView layout setup

        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setMapViewMode(MapViewMode.MAPNIK_TILE_DOWNLOAD);
        mapView.setBuiltInZoomControls(true);
        mapView.setScaleBar(true);
        mapView.setClickable(true);
        mapView.getController().setZoom(5);
        setCenterlocation();
        // end of mapView setup

        setOverlay1(); 
        setOverlay2();
        //setOverlay3();
    }

public void onClick(View v)
{
    switch (v.getId())
    {
        case (R.id.information):
            Intent intent = new Intent(getApplicationContext(), Information.class);
            startActivity(intent);
            break;

        case (R.id.roster):
            showRoster(v);
            break;

        case (R.id.schedule):
            break;

        case (R.id.stats):
            break;

        // close the app
        case (R.id.exit):
            finish();
            break;
    }
}

public void showRoster(View v) {
    String url = "www.espn.com/roster";
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url));
    startActivity(i);
} 

@Override
// resumes the actions of the application on a pause
protected void onResume()
{
    super.onResume();
}

// perform any cleanup before the activity is destroyed 
@Override
protected void onDestroy() {
    Cleanup();
    super.onDestroy();
}

private void Cleanup()
{    
    System.gc();
    Runtime.getRuntime().gc();  
}

// sets the center of the screen on the map
protected void setCenterlocation()
{
    mapView.getController().setCenter(new GeoPoint(38.00, -100.00));
}
} 
```

这是我尝试添加第三个后的logcat：

```
02-21 22:31:17.031: I/Process(597): Sending signal. PID: 597 SIG: 9
02-21 22:32:47.502: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 865 objects / 62432 bytes in 155ms
02-21 22:33:00.911: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 296 objects / 15424 bytes in 199ms
02-21 22:33:02.051: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 411 objects / 23800 bytes in 95ms
02-21 22:33:02.201: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 102 objects / 4240 bytes in 104ms
02-21 22:33:03.641: D/dalvikvm(633): GC_FOR_MALLOC freed 5686 objects / 1276552 bytes in 142ms
02-21 22:33:04.351: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 4507 objects / 992040 bytes in 126ms
02-21 22:33:05.092: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 510 objects / 25744 bytes in 128ms
02-21 22:33:05.532: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 83 objects / 3840 bytes in 243ms
02-21 22:33:05.732: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 3 objects / 80 bytes in 181ms
02-21 22:33:06.262: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 65 objects / 2504 bytes in 183ms
02-21 22:33:06.554: D/dalvikvm(633): GC_EXTERNAL_ALLOC freed 8 objects / 432 bytes in 289ms
02-21 22:33:26.285: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.291: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.341: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.374: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.393: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.421: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.443: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.451: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.471: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.471: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.491: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.511: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.531: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.541: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.552: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.561: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.572: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.592: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.592: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.611: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.622: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.633: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.641: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.661: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.661: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:33:26.681: D/osm(633): MapnikTileDownload: Host is unresolved: tile.openstreetmap.org:80
02-21 22:48:07.212: D/dalvikvm(667): GC_EXTERNAL_ALLOC freed 892 objects / 63472 bytes in 326ms
02-21 22:48:15.462: D/dalvikvm(667): GC_EXTERNAL_ALLOC freed 297 objects / 15424 bytes in 214ms
02-21 22:48:16.386: D/dalvikvm(667): GC_EXTERNAL_ALLOC freed 412 objects / 23824 bytes in 79ms
02-21 22:48:16.511: D/dalvikvm(667): GC_EXTERNAL_ALLOC freed 102 objects / 4240 bytes in 79ms
02-21 22:48:17.574: D/dalvikvm(667): GC_FOR_MALLOC freed 5685 objects / 1276512 bytes in 104ms
02-21 22:48:18.061: D/dalvikvm(667): GC_EXTERNAL_ALLOC freed 4507 objects / 992144 bytes in 89ms
02-21 22:48:18.441: D/AndroidRuntime(667): Shutting down VM
02-21 22:48:18.441: W/dalvikvm(667): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-21 22:48:18.473: E/AndroidRuntime(667): FATAL EXCEPTION: main
02-21 22:48:18.473: E/AndroidRuntime(667): java.lang.RuntimeException: Unable to start activity ComponentInfo{ashworth.craig/uc.roadmap.MapsForgeViewer}: java.lang.NullPointerException
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.os.Looper.loop(Looper.java:123)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-21 22:48:18.473: E/AndroidRuntime(667):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 22:48:18.473: E/AndroidRuntime(667):  at java.lang.reflect.Method.invoke(Method.java:521)
02-21 22:48:18.473: E/AndroidRuntime(667):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-21 22:48:18.473: E/AndroidRuntime(667):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-21 22:48:18.473: E/AndroidRuntime(667):  at dalvik.system.NativeStart.main(Native Method)
02-21 22:48:18.473: E/AndroidRuntime(667): Caused by: java.lang.NullPointerException
02-21 22:48:18.473: E/AndroidRuntime(667):  at uc.roadmap.MapsForgeViewer.setOverlay3(MapsForgeViewer.java:105)
02-21 22:48:18.473: E/AndroidRuntime(667):  at uc.roadmap.MapsForgeViewer.onCreate(MapsForgeViewer.java:185)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-21 22:48:18.473: E/AndroidRuntime(667):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-21 22:48:18.473: E/AndroidRuntime(667):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:21:32.130

你没有初始化 List mapOverlays

在 setOverlay1 和 setOverlay2

你应该在之前初始化列表`mapOverlays = mapView.getOverlays();`

`mapOverlays = new List<Overlay>();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:37:31.863

> 第 105 行：itemizedOverlay3.removeItem(itemizedOverlay3.size()-1);

此处生成 NPE 的唯一方法是 itemizedOverlay3 为空（因为它是唯一的对象）。考虑一下您的 if-else 语句：您在“if”部分初始化 itemizedOverlay3，但如果改为调用“else”呢？您正在调用 itemizedOverlay3，*但它还没有被初始化*。

所以这是你的问题。在 if-else 语句之外对其进行初始化，使其在任何一种情况下都是有效的对象。（并且也为您的其他方法执行此操作，以避免在其中一个方法中弹出此错误。）

# cocoa - Layer-Backed 视图不再在透明 NSWindow 中打孔

> ID：15016622
> 
> 赞同：2
> 
> 时间：2013-02-22T04:02:27.213
> 
> 标签：cocoa, calayer, nsview, quartz-core

我正在尝试使用 CAShapeLayer 甚至只是 CALayer 在 NSWindow 中制作一个“洞”。

当使用常规的 NSViews 甚至是支持层的视图时，我可以覆盖 drawRect: 使用如下代码：

```
 [spotImage drawInRect:self.bounds fromRect:NSZeroRect operation:NSCompositeXOR fraction:1.0]; 
```

其中 spotImage 是一个具有纯白色内容和一些渐变的 NSImage，并且窗口具有黑色背景和 0.5 alpha。定义此 drawRect 的 NSView 子类具有 clearColor 背景。

最终结果是一个灰色窗口（它是一个透明窗口，其 styleMask 为 NSBorderlessWindowMask，可以在许多示例中找到。

如果我将 NSView 变成支持图层的视图，它会调用 drawRect 方法并且工作正常。

当我把它变成一个图层托管视图，并再次使用相同的结构（NSWindow > contentView > CustomView）时，drawInRect 方法只是绘制图像。它不再通过它打一个洞。

就像当它是层托管层次结构的一部分时，层本身不能再打洞。

这是一些示例代码：

自定义 NSWindow 子类初始化器：

```
- (id)initWithContentRect:(NSRect)contentRect styleMask:(NSUInteger)aStyle backing:(NSBackingStoreType)bufferingType defer:(BOOL)flag {

self = [super initWithContentRect:contentRect styleMask:NSBorderlessWindowMask backing:NSBackingStoreBuffered defer:NO];

if (self) {

   [self setBackgroundColor: [NSColor lightGrayColor]]; //[NSColor clearColor]];

    [self setAlphaValue:0.5];

    [self setOpaque:NO];
    [self setHasShadow: NO];

    [self useOptimizedDrawing:YES];
    [self setIgnoresMouseEvents:YES];
}
return self; 
```

}

我的 applicationDidFinishLaunching 方法中的代码：

```
PPContentView *thisView = [[PPContentView alloc]
                    initWithFrame:CGRectInset([self.window.contentView bounds], 50, 50)];

//[thisView setWantsLayer:YES]; enabling this makes things opaque again

[self.window.contentView addSubview:thisView];

thisView.layer.backgroundColor = [NSColor clearColor].CGColor;

//Create custom content
[thisView setNeedsDisplay:YES]; 
```

}

我的自定义视图的 drawRect 包含：

```
 [[NSImage imageNamed:@"spotFuzzy.png"] drawInRect:self.bounds fromRect:NSZeroRect operation:NSCompositeXOR fraction:1.0]; 
```

# php - Wordpress 主题 - 更改元素太多 if's

> ID：15016623
> 
> 赞同：0
> 
> 时间：2013-02-22T04:02:38.273
> 
> 标签：php, wordpress

我正在 Wordpress 中处理一个非常复杂的主题。这是我第一个没有修改主题的主要 wp 项目。网站的一部分在标题中的视觉元素略有不同，所以我正在这样做

```
<?php if(is_page(537)) { ?><div id="header-right"><?php } ?>
<?php if(!is_page(537)) { ?><div id="media-header-right"><?php } ?> 
```

问题是我到处都有这些陈述中的 10 条。它有效，但我不禁想到有一个更优雅的解决方案可用。

头文件.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<meta name="viewport" content="width=device-width" />
<title>
<?php bloginfo('name'); ?>
<?php if ( is_single() ) { ?>
&raquo; Blog Archive
<?php } ?>
<?php wp_title(); ?>
-
<?php bloginfo('description'); ?>
</title>
<link rel="shortcut icon" href="<?php bloginfo('template_url');?>/images/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo('template_url'); ?>/css/style.css" />
<link rel="pingback" href="<?php bloginfo('pingback_url'); ?>" />
<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_url'); ?>/css/fonts/stylesheet.css" media="all">
<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/css/slider.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/css/slider-theme/default.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/css/jquery.tweet.css" type="text/css" media="screen"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/roll-over.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jquery.tweet.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/gmap-somalia.js"></script>
<?php wp_head(); ?>
</head>

<?php if(!is_page(537)) { ?> <body <?php body_class(); ?>> <?php } ?>
<?php if(is_page(537)) { ?><body class="media-showcase"><?php } ?>

<div class="container">
<!--Start Container -->
<div id="header">
<!--Start Header -->
<div class="logo"> <a href="<?php bloginfo('url'); ?>" title="<?php bloginfo('name')?>"  width="269" height="89" rel="home"><img src="<?php bloginfo('template_url');?>/images/logo.png" width="269" height="89" alt="Global Enrichment Foundation"></a> </div>

<?php if(is_page(537)) { ?><div id="media-header-right"><?php } ?>
<?php if(!is_page(537)) { ?><div id="header-right"><?php } ?>

<!--Start Header Right -->
<?php if(is_page(537)) { ?> <div class="media-donate-buton">
<a href="<?php bloginfo('url');?>/donate" title="Donate">Donate</a> </div> <?php } ?>
<?php if(!is_page(537)) { ?>
<div class="donate-buton"> <a href="<?php bloginfo('url');?>/donate" title="Donate">Donate</a> </div>
<?php } ?>

<?php if(is_page(537)) { ?>
<div class="search">
<form method="get" id="searchform" action="<?php echo esc_url( home_url( '/' ) ); ?>">
<p>
<input type="text" class="field" name="m" id="m" placeholder="Search..." />
<input type="submit" class="submit search" name="submit" id="searchsubmit" value="ok" />
</p>
</form>
</div>
<?php } ?>
<?php if(!is_page(537)) { ?>
<div class="search">
<form method="get" id="searchform" action="<?php echo esc_url( home_url( '/' ) ); ?>">
<p>
<input type="text" class="field" name="s" id="s" placeholder="Search..." />
<input type="submit" class="submit m-search" name="submit" id="searchsubmit" value="ok" />
</p>
</form>
</div>
<?php } ?>

<?php if(is_page(537)) { ?>

<div id="media">
<h3>Archive</h3>
<select id="standard-dropdown" name="standard-dropdown" class="custom-class1 custom-class2" style="width: 148px;">
<option value="0" class="test-class-0" selected="selected">Select a Month</option>
<option value="1" class="test-class-1">January</option>
<option value="2" class="test-class-2">February</option>
<option value="3" class="test-class-3">March</option>
<option value="4" class="test-class-4">April</option>
<option value="5" class="test-class-5">May</option>
<option value="6" class="test-class-6">June</option>
<option value="7" class="test-class-7">July</option>
<option value="8" class="test-class-8">August</option>
<option value="9" class="test-class-9">September</option>
<option value="10" class="test-class-10">October</option>
<option value="11" class="test-class-11">November</option>
<option value="12" class="test-class-12">December</option>
</select>
<select name="empty-dropdown" style="width: 148px;">
<option value="0" class="test-class-0" selected="selected">Select a Year</option>
<option value="1" class="test-class-1">2009</option>
<option value="2" class="test-class-2">2010</option>
<option value="3" class="test-class-3">2012 </option>
<option value="4" disabled="disabled">2013</option>
<option value="5" disabled="disabled">2014</option>
</select>
<ul class="socialicons">
<li class="twitter"><a href="http://twitter.com/AmandaLindhout" title="twitter" target='_blank'>Twitter</a></li>
<li class="facebook"><a href="http://www.facebook.com/AmandaLindhoutPage" title="facebook" target='_blank'>Facebook</a></li>
<li class="vimeo"><a href="http://www.youtube.com/user/globalenrichment" title="you tube" target='_blank'>You Tube</a></li>
</ul>
</div>
</div>
<?php } ?>

<?php if(!is_page(537)) { ?>
<div id="latest-twitts">
<h3>The Latest</h3>
<div id='custom' class="query">&nbsp;</div><!-- twitter via jquery -->
<h3>Stay Updated</h3>
<ul class="socialicons">
<li class="twitter"><a href="http://twitter.com/AmandaLindhout" title="twitter" target='_blank'>Twitter</a></li>
<li class="facebook"><a href="http://www.facebook.com/GlobalEnrichmentFoundation" title="facebook" target='_blank'>Facebook</a></li>
<li class="vimeo"><a href="http://www.youtube.com/user/globalenrichment" title="you tube" target='_blank'>You Tube</a></li>
</ul>
</div>
<?php } ?>

<?php if(!is_page(537)) { ?>
<div id="side_bar"></div>
<?php dynamic_sidebar('Sidebar'); ?>
</div> <?php } ?>
<!--End Header-Right -->
<div class='cssmenu'>
<!--Start Menu -->
<?php wp_nav_menu( array( 'container'=>'', 'menu_id'=>'nav' ,'menu_class' => 'main-menu','theme_location' =>        'main-menu','depth'=> 2 ) ); ?>
</div>
</div>
<!--End Menu -->
</div>
<!--End Header -->
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:17:49.600

添加另一个页面模板或新的头文件。它更干净。

这是一个教程，显示了添加页面模板的最简单方法

[http://wpmu.org/wordpress-custom-page-template/](http://wpmu.org/wordpress-custom-page-template/)

和更多信息

[http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)

而不是拥有

```
<?php get_header(); ?> 
```

在您的新模板中（可能不是完全正确的代码，但您明白了）将您的新标题自定义代码到模板中。

或者，您可以创建另一个头文件并使用您当前在页面模板中只使用一次的 if 语句。

这个例子

```
if(is_page(537)) {
     get new header
 } else {
      get original header
 } 
```

# php - 在php中记录时间和超时

> ID：15016624
> 
> 赞同：0
> 
> 时间：2013-02-22T04:03:04.060
> 
> 标签：php, mysql

> 我正在尝试进行出勤监控，只要将其记录到数据库中，一个人就可以根据自己的意愿进行计时和超时。

```
id   idnumber    datein      timein     dateout     timeout

1     123      2013-02-21   08:00:01   2013-02-21   11:12:45

2     456      2013-02-21   10:15:01   2013-02-21   05:30:01

3     123      2013-02-21   06:58:52   2013-02-21   03:20:16

4     123      2013-02-21   10:05:35   2013-02-21 
```

> 谁能给我一个 php 中的插入/更新代码？
> 
> 我有这个代码，如果不存在则可以插入 idnumber，如果存在则更新。

```
$query = "SELECT * FROM tblattendance WHERE idnumber='".$_POST[idnumber']."'";
$res = mysql_query($query);
list($exist) = mysql_fetch_array($res);

    if (!$exist){
          $query = "INSERT INTO tblattendance SET idnumber='".$_POST['idnumber']."', datein=CURDATE(), timein = CURTIME()";
          $insert_result = mysql_query($query);
    }else{
         $query1 = "UPDATE tblattendance SET dateout=CURDATE(), timeout = CURTIME() WHERE idnumber='".$_POST['idnumber']."' ORDER BY id DESC LIMIT 1 ";
         $insert_result1 = mysql_query($query1);    
    } 
```

> 我想要的是我可以插入相同的 idnumber 而不更新旧记录。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:06:04.707

创建复合 ID 键。这是对两列的唯一约束 - `idnumber`+ 类型，其中类型为例如 0 = in，1 = out。

```
CREATE TABLE foo (
   id INT PRIMARY KEY,
   idnumber INT,
   type TINYINT(1),
   UNIQUE KEY idtype (id, type)
); 
```

# jquery - 删除包含特定文本和元素的 div

> ID：15016627
> 
> 赞同：2
> 
> 时间：2013-02-22T04:03:19.577
> 
> 标签：jquery

```
<div class="block">
    text
</div>
<div class="block">
    text
</div>
<div class="block">
    text <button />
</div> 
```

使用 jQuery，如何删除包含文本和按钮的 div。我不想用`:last`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T04:06:08.267

```
$("div:contains('text')").remove() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T04:09:05.280

我想出了这个：

```
$(".block:contains(text)").filter(function () {
    return $(this).children("button").length > 0;
}).remove(); 
```

首先查找 class`block`包含的元素`"text"`，然后过滤掉具有按钮作为子元素的元素。可能有更好的方法来做到这一点。

见：http: [//jsfiddle.net/6fUfk/](http://jsfiddle.net/6fUfk/)

# google-apps-script - 谷歌脚本我如何 getActiveUser() 的 getGivenName()

> ID：15016628
> 
> 赞同：8
> 
> 时间：2013-02-22T04:03:22.433
> 
> 标签：google-apps-script

域上的每个用户都会启动一个我们为休假权利运行的简单脚本，但我们希望欢迎消息是“Hi First Name”，但是该脚本似乎无法从 getActiveUser() 获取 getGivenName() 作为标准用户。

有办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T02:44:37.973

如评论和[文档](https://developers.google.com/apps-script/service_domain)中所述，UserManager 服务只能由域管理员访问。

这是一个替代方案。域用户可能在他们自己的联系人中拥有自己，那么尽最大努力在其中找到自己怎么样？

```
/**
 * Get current user's name, by accessing their contacts.
 *
 * @returns {String} First name (GivenName) if available,
 *                   else FullName, or login ID (userName)
 *                   if record not found in contacts.
 */
function getOwnName(){
  var email = Session.getEffectiveUser().getEmail();
  var self = ContactsApp.getContact(email);

  // If user has themselves in their contacts, return their name
  if (self) {
    // Prefer given name, if that's available
    var name = self.getGivenName();
    // But we will settle for the full name
    if (!name) name = self.getFullName();
    return name;
  }
  // If they don't have themselves in Contacts, return the bald userName.
  else {
    var userName = Session.getEffectiveUser().getUsername();
    return userName;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-20T02:03:53.457

在 Apps Script 中，我能够使用 About REST API 获取此信息：[https ://developers.google.com/drive/v2/reference/about/get](https://developers.google.com/drive/v2/reference/about/get)

```
var aboutData = DriveApp.About.get();
var userEmail = aboutData["user"]["emailAddress"];
var userDisplayName = aboutData["user"]["displayName"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T04:44:56.873

您可以获取用户名，但首先您必须使用配置 api 创建域用户。您可以通过登录到您的管理员帐户来启用 API，然后选择域设置和用户设置选项卡以选中启用供应 API 的复选框。[在此处](https://developers.google.com/apps-script/class_usermanager)阅读有关它的更多信息

然后你可以使用

```
 user = user.getgivenName() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T03:47:36.353

由于 UserManager 服务仅对域管理员可用，因此您可以以管理员身份发布服务，为用户的给定名称提供服务，并使用`UrlFetchApp`.

## 用户名服务

有关其所依据的背景信息，请参阅[内容服务文档](https://developers.google.com/apps-script/content_service)。

该服务接受一个参数 ，`userName`它用于以*管理员*身份执行查找。

将以下代码粘贴到脚本中，然后[将该脚本部署](https://developers.google.com/apps-script/execution_web_apps#deploying)为 Web 服务。这必须由域管理员完成，因为该服务访问 UserManager 服务，但必须使域中的所有用户都可以访问该脚本。（由于我不是域中的管理员，因此我无法访问 UserManager，因此我包含了一个域用户可调用行进行测试，调用`getOwnName()`我在[第一个答案](https://stackoverflow.com/a/15628478/1677912)中描述的函数。）

*在访问已发布的服务之前，请记住从调试器调用`doGet()`以通过授权。*

```
/**
 * When invoked as a Web Service running as Domain Administrator, 
 * returns the GivenName of the requested user.
 * 
 * @param {String} userName= Should be set to Session.getEffectiveUser().getUsername().
 */
function doGet(request) {
  //return ContentService.createTextOutput(getOwnName()); // for testing by non-admin user

  var userName = request.parameters.userName;
  var givenName = UserManager.getUser(userName).getGivenName();

  return ContentService.createTextOutput(givenName);
} 
```

## 使用 UrlFetch 调用服务

有关如何使用上一节中编写的服务的说明，请参阅[使用外部 API 。](https://developers.google.com/apps-script/external_apis)我将展示如何从另一个脚本访问该服务，但请记住，您也可以从域中的网页执行此操作。

我们将使用`UrlFetchApp.fetch()`让我们的服务将用户的名字作为字符串返回。

该服务被编写为接受一个参数 ，`userName`我们将其附加到 url 中，格式为`userName=<string>`。

建立 URL 后，我们`fetch()`从响应中检索名称。虽然此示例仅返回名称，但您可以选择更改服务以返回完整的“Hello User”字符串。

```
function testService() {
  var domain = "my-google-domain.com";
  var scriptId = "Script ID of service";
  var url = "https://script.google.com/a/macros/"+domain+"/s/"+scriptId+"/exec?"
     + "userName="+Session.getEffectiveUser().getUsername();
  var response = UrlFetchApp.fetch(url);
  var myName = response.getContentText();
  debugger;  // pause in debugger
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-25T20:55:51.323

获取 gmail 帐户显示名称的另一种潜在方法是在 GmailApp 中查找草稿电子邮件，并获取可能具有全名的 From 标头。某些草稿可能在 gmail 中设置为没有显示名称，在这种情况下，发件人标头将只是电子邮件地址，但通常发件人标头采用以下格式： `Firstname Lastname <email@domain.com>`

此代码应该从第一个 gmail 草稿中为您提供上面的字符串：（请注意，如果没有草稿，这可能会引发异常，因此请先检查。）

```
GmailApp.getDrafts()[0].getMessage().getHeader("From") 
```

参考：[https://developers.google.com/apps-script/reference/gmail/gmail-message#getHeader(String)](https://developers.google.com/apps-script/reference/gmail/gmail-message#getHeader(String))

参考：[https ://www.ietf.org/rfc/rfc2822.txt](https://www.ietf.org/rfc/rfc2822.txt)

# json - 如何过滤json中的特殊字符？

> ID：15016629
> 
> 赞同：0
> 
> 时间：2013-02-22T04:03:25.257
> 
> 标签：json

我像这样使用java生成的json：

```
[{"nickname":"abc,def"},{"nickname":"abc'def"},{"nickname":"abc"def"}] 
```

当我执行时`eval()`，它会引发异常。

我想在 json 中保留逗号和引号。

如何处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:07:50.880

你有一个例外，因为你的 json 无效！你是如何产生它的？无论您使用何种语言，构建您的数据结构并调用一个 json 编码函数（例如 PHP 中的 json_encode）来生成有效的 json。

在此特定示例中，您需要转义最后一个字符串中的双引号：

```
 [{"nickname":"abc,def"},{"nickname":"abc'def"},{"nickname":"abc\"def"}] 
```

注意：使用 eval 不安全，需要使用 JSON.parse()！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:06:04.890

您需要通过解析 JSON 来处理这种情况。

### `eval()`不解析 JSON。

您需要调用`JSON.parse()`，它会解析 JSON 并且可以正常工作。

* * *

解决方案的另一部分是生成有效的 JSON。
`"abc"def"`不是有效的 JSON。

您需要更改 Java 代码以使用将生成有效 JSON 的实际 JSON 库（例如 gson 或 jackson）。

# java - Eclipse Runnable Jar 导出未启动

> ID：15016630
> 
> 赞同：0
> 
> 时间：2013-02-22T04:03:31.210
> 
> 标签：java, eclipse, jar, lwjgl, slick2d

我目前正在开发 Java 游戏，并尝试将我的第一个版本导出为可运行的 jar。

由于 Eclipse 有一个工具，所以我尝试使用它。

在尝试了许多不同的方法后，我仍然无法启动游戏。我确保导出为可运行的 jar 并添加了库。

我的怀疑如下：游戏的项目是这样设置的：`src->package->code, Res->images`等等，JRE系统库，最后引用了`libraries->Slick2d`, `lwjgl`, 和`jinput`.

碰巧的是，我找不到让 jar 复制工作区文件夹组织的方法。我相信这就是导致它崩溃的原因；所需文件位于程序的未知路径中。

然后我尝试自己重新组织文件，却被告知 jar 已损坏。

如果有人可以通过告诉我问题可能是什么、如何解决它或任何提示来帮助我，我将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T03:20:15.130

eclipse 附带了将所需 Jar 与主 Jar 一起打包的选项。![在此处输入图像描述](../Images/ab0a7863d891814a051036c4c48e1071.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:17:51.247

使用 JarSplice 将库、您的 jar 和本地人包含在 1 个 jar 中。它不起作用，因为缺少本地人和光滑的罐子。

# windows-phone-7.8 - 如何开发 windows phone 7.8 应用程序？

> ID：15016632
> 
> 赞同：0
> 
> 时间：2013-02-22T04:03:39.787
> 
> 标签：windows-phone-7.8

我将 WP7.8 Sdk 更新到我的计算机（win7），但除了 WP7.8 模拟器，我看不到任何变化，我该如何使用这些新的 WP7.8 API？例如，如何使用 WP7.8 Sdk 创建 Flip Tile？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:40:18.323

WP8 是新的 API。WP7.8 只是一个更好的带有磁贴的 UI，WP7.8 仍然是 WP7.5，这个版本没有新的 API。

# c++ - 操作员删除标准行为

> ID：15016634
> 
> 赞同：1
> 
> 时间：2013-02-22T04:03:59.740
> 
> 标签：c++

我无法理解为 void* == nullptr 调用 operator delete 的标准需要做什么。

像这样的东西：

```
void foo(void* ptr) // ptr == nullptr here
{
    delete ptr;
} 
```

一方面，我们在标准中有以下声明：

**ISO/IEC 14882:2011**

5.3.5 删除[expr.delete]

> 1 ...操作数应具有指向对象类型的指针，或具有指向对象类型指针的单个非显式转换函数（12.3.2）的类类型。结果的类型为 void.78
> 
> 78)**这意味着不能使用 void* 类型的指针删除对象，因为 void 不是对象类型**。

这使得删除 void* 的代码格式不正确。另一方面，我们在 delete 中有另一个关于 nullptr 的声明：

**ISO/IEC 14882:2011**

5.3.5 删除[expr.delete]

> 2 ... 在第一种选择（删除对象）中，**delete 的操作数的值可以是空指针值**，指向由先前的 new 表达式创建的非数组对象的指针，或指向子对象的指针 ( 1.8) 表示此类对象的基类（第 10 条）。如果不是，则行为未定义。在第二种选择（删除数组）中，**delete 的操作数的值可能是空指针值**或前一个数组 new-expression 产生的指针值。79 如果不是，则行为未定义。

在这种情况下需要做什么实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:10:17.960

Null 和`void*`是两个不同的东西：

```
delete static_cast<int*>(nullptr); // deleting null pointer, of int* 
```

*您给定的代码格式错误，但它与指针的值*（可能为 null）无关，而是与指针的*类型*（不能为`void*`）无关。

# jquery - jQuery 列表索引

> ID：15016638
> 
> 赞同：0
> 
> 时间：2013-02-22T04:04:58.587
> 
> 标签：jquery, indexing, html-lists

我有一系列包含列表元素的 div。我正在尝试在 div 内本地返回列表中项目的索引。但它会计算其他 div 中的列表项，我想避免这种情况。

所以目前它返回的索引是（逗号分隔 div）：

0-5、6-7、8-17

我希望它返回：

0-5, 0-1, 0-9

所以我希望索引与每个 div 相关。

[http://jsfiddle.net/K4b8J/1/](http://jsfiddle.net/K4b8J/1/)

JS：

```
var preview = "<div class=\"preview\"><p>Test.</p></div>";
        $(".category_list.grid > ul li").click(function () {
            // calculate how many elements fit per line
            var index = $(".category_list.grid li").index(this);
            alert(index);
        }); 
```

HTML：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js" type="text/javascript"></script>
<div class="category_list grid">
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>
<div class="category_list grid">
    <ul>
        <li></li>
        <li></li>
    </ul>
</div>
<div class="category_list grid">
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div> 
```

CSS：

```
*{padding:0;margin:0}
.preview {clear:both;}
ul {clear:both;}
li {
  width: 5em;
  height: 3em;
  background: black;
    display: inline-block;
    text-align: left;
    margin: 1em;
    color: white;
}
.category_list {margin-bottom:2em; clear:both;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:07:07.157

因此，您只想计算相对于其兄弟元素的元素：

```
var index = $(this).siblings().andSelf().index(this); 
```

[http://jsfiddle.net/mattball/K8Q5D/](http://jsfiddle.net/mattball/K8Q5D/)

如果这还不够光滑：

```
var index = $(this).prevAll().length; 
```

...因为毕竟，一个元素的（从零开始的）索引只是它之前的元素的数量。

[http://jsfiddle.net/mattball/MRPrZ/](http://jsfiddle.net/mattball/MRPrZ/)

# objective-c - 我需要通过按下 UIAlertView 中的按钮来更改我的 NSArray

> ID：15016641
> 
> 赞同：-1
> 
> 时间：2013-02-22T04:05:25.503
> 
> 标签：objective-c, indexing, nsmutablearray, uialertview, ibaction

我以编程方式设置了一个 UITableView，它填充了所有状态的名称。当您单击其中一个单元格时，例如。ALABAMA，将出现一个 UIAlertView 标题是您刚刚单击的状态（ALABAMA）的标题以及与该状态相关的数字，该状态位于另一个 NSMutable 数组中。每个州都有不同的数字与之相关。

这个数字实际上是 UIAlert 中的占位符文本，警报的目的是让您可以在文本字段中输入一个数字，当您点击更改按钮时，占位符文本中的数字（来自 Array ) 将随着用户估算的数字而改变；永久。一切都很好，直到我点击更改，然后我收到一个 SIGABRT 错误，并在输出中显示：

`2013-02-21 20:57:33.750 final[10046:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM replaceObjectAtIndex:withObject:]: object cannot be nil'`

```
- (void)tableView:(UITableView *)tableView 
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UIAlertView *alertView = [[UIAlertView alloc]
                        initWithTitle:[NSString stringWithFormat:@"%@", [states objectAtIndex:indexPath.row]]
                        message:[NSString stringWithFormat:@"%@", [tax objectAtIndex:53]]
                        delegate:self       
                        cancelButtonTitle:@"Cancel"           
                        otherButtonTitles:@"Change", nil];

    UITextField *myTextField =[[UITextField alloc] initWithFrame:CGRectMake(42, 50, 200, 25)];
    CGAffineTransform myTransform =CGAffineTransformMakeTranslation(0, 0);
    [alertView setTransform:myTransform];
    [myTextField setBackgroundColor:[UIColor clearColor]];
    [alertView addSubview:myTextField];
    myTextField.placeholder = [NSString stringWithFormat:@"%@", [tax objectAtIndex:indexPath.row]];
    myTextField.borderStyle = UITextBorderStyleNone;
    myTextField.returnKeyType = UIReturnKeyDone;
    myTextField.textColor = [UIColor grayColor];
    myTextField.keyboardType = UIKeyboardTypeNumbersAndPunctuation;
    myTextField.textAlignment = UITextAlignmentCenter;
    myTextField.delegate = self;

    [alertView show];
    [alertView release];
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1) {

        NSString *theTaxer = [myTextField text];
        [tax replaceObjectAtIndex:1 withObject:theTaxer];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:32:25.583

Shizam 是对的，我想如果你想获得 textview 的引用，只需在创建 alertview 时给 textview 一个标签：myTextField.tag = 111; 然后在 alertView 委托方法中：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == 1) {

    UITextField *textField = [alertView viewWithTag:111];
    NSString *theTaxer = [textField text];
    [tax replaceObjectAtIndex:1 withObject:theTaxer];
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:19:07.820

在调用 alertView:clickedBUttonAtIndex 时`myTextField`不再定义，因为`myTextField`未定义为类 ivar，您只能在创建它的函数中引用它。如果您想`myTextField`在类中的其他地方引用（在 alertView 回调中实例）使其成为 iVar 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T05:03:41.830

尝试这个，

```
- (void)tableView:(UITableView *)tableView 
          didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UIAlertView *alertView = [[UIAlertView alloc]
                    initWithTitle:[NSString stringWithFormat:@"%@", [states objectAtIndex:indexPath.row]]
                    message:[NSString stringWithFormat:@"%@", [tax objectAtIndex:53]]
                    delegate:self       
                    cancelButtonTitle:@"Cancel"           
                    otherButtonTitles:@"Change", nil];
alertView.tag =indexPath.row;

UITextField *myTextField =[[UITextField alloc] initWithFrame:CGRectMake(42, 50, 200, 25)];
[myTextField setTag:99];
CGAffineTransform myTransform =CGAffineTransformMakeTranslation(0, 0);
[alertView setTransform:myTransform];
[myTextField setBackgroundColor:[UIColor clearColor]];
[alertView addSubview:myTextField];
myTextField.placeholder = [NSString stringWithFormat:@"%@", [tax objectAtIndex:indexPath.row]];
myTextField.borderStyle = UITextBorderStyleNone;
myTextField.returnKeyType = UIReturnKeyDone;
myTextField.textColor = [UIColor grayColor];
myTextField.keyboardType = UIKeyboardTypeNumbersAndPunctuation;
myTextField.textAlignment = UITextAlignmentCenter;
myTextField.delegate = self;

[alertView show];
[alertView release];
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == 1) {
  UITextField * myTextField = (UITextField *)[alertView viewWithTag:99];
    NSString *theTaxer = [myTextField text];
    [tax replaceObjectAtIndex:1 withObject:theTaxer];
}
} 
```

# c++ - 使用对 作为地图的关键

> ID：15016646
> 
> 赞同：26
> 
> 时间：2013-02-22T04:05:48.063
> 
> 标签：c++, map, std-pair

基于上一个[问题](https://stackoverflow.com/questions/15016197/stdmapint-int-vs-vector-of-vector)，我正在尝试使用一对整数作为键来创建映射，`map<pair<int, int>, int>`并且我找到了有关如何插入的信息：

```
#include <iostream>
#include <map>

using namespace std;

int main ()
{
map<pair<int, int>, int> mymap;

mymap.insert(make_pair(make_pair(1,2), 3)); //edited
} 
```

但我似乎无法访问该元素！我已经尝试过`cout << mymap[(1,2)] << endl;`，但它显示错误，我找不到有关如何使用密钥访问元素的信息。难道我做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T04:13:02.607

您需要一对作为密钥`cout << mymap[make_pair(1,2)] << endl;`您目前拥有`cout << mymap[(1,2)] << endl;`的不是正确的语法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-22T04:14:05.923

`mymap[make_pair(1,2)]`

或者，在编译器支持下：

`mymap[{1,2}]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-26T06:07:17.630

请找到参考代码：

```
#include<iostream>
#include<map>
using namespace std;

int main()
{

   map<pair<int ,int> ,int > m;
   m.insert({{1, 2}, 100});
   cout << m[{1, 2}];
} 
```

# c# - 在 C# 中分离用户输入的数字

> ID：15016648
> 
> 赞同：0
> 
> 时间：2013-02-22T04:05:51.870
> 
> 标签：c#, console-application

如何在 C# 的控制台应用程序中分隔一组数字，而不是向用户询问每个单独的数字？例如，而不是这样做......

```
 double first, second, third, fourth;

        Console.Write("Please enter first digit: ");
        first = Convert.ToDouble(Console.ReadLine());
        Console.Write("Please enter second digit: ");
        second = Convert.ToDouble(Console.ReadLine());
        Console.Write("Please enter third digit: ");
        third = Convert.ToDouble(Console.ReadLine());
        Console.Write("Please enter fourth digit: ");
        fourth = Convert.ToDouble(Console.ReadLine()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T04:12:01.250

您可以让他们使用某种分隔符（本例中的空格）一次输入所有数字。

```
Console.Write("Please enter a bunch of digits separated by a space: ");
var allDigits = Console.ReadLine().Split(' ');
Double[] digits = allDigits.Select(d => Covert.ToDouble(d)).ToArray(); 
```

如果您的要求仅限于`4 inputs`限制`allDigit`使用`IEnumerable<string>.Take(4)`

```
Console.Write("Please enter a bunch of digits separated by a space: ");
var allDigits = Console.ReadLine().Split(' ').Take(4);
Double[] digits = allDigits.Select(d => Covert.ToDouble(d)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T04:11:18.820

利用`array`，它可以帮助您更快地对变量进行读/写操作

```
 double[] numbers = new double[4];

    for (int i = 0; i < 4; i++)
    {
        Console.WriteLine("Enter {0} of 4 Number : ", i + 1);
        numbers[i] = Convert.ToDouble(Console.ReadLine());
    }

    // numbers[0] = first
    // numbers[1] = second
    // numbers[2] = third
    // numbers[3] = fourth 
```

如果您真的想使用四个变量，那么这可能是最简单的方法：

```
 double first, second, third, fourth;

    for (int i = 1; i <= 4; i++)
    {
        Console.WriteLine("Enter a number : ");
        double input = Convert.ToDouble(Console.ReadLine());
        switch (i)
        {

            case 1:
                first = input;
                break;

            case 2:
                second = input;
                break;

            case 3:
                third = input;
                break;
            case 4:
                fourth = input;
                break;

        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T04:12:14.993

这是一种方法：

```
Console.Write("Please enter numbers, comma-separated: ");
var numbers = Console.ReadLine()
    .Split(',')
    .Select(x => Double.Parse(x.Trim()))
    .ToList(); 
```

`TryParse`尽管在现实生活中的代码中使用并将错误返回给用户可能会更好。

# class - 在不同模块的主干中继承静态方法

> ID：15016649
> 
> 赞同：1
> 
> 时间：2013-02-22T04:05:58.623
> 
> 标签：class, inheritance, backbone.js, coffeescript, static-methods

我正在将backbone.js 用于Web 应用程序。

我有不同的组件视图，它们派生自几个基类。每个视图都有一些用于初始化和创建实例的静态方法。

例如：

```
class Base extends Backbone.View
  @create:(config)->
      *do some processing based on config*
      *generate view parameters*
      viewparams = ....
      return new @(viewparams)
class Derived extends Base
  **some customizations and functions**

**at some point some where**
instanceDerived = Derived.create(*some params*) 
```

这种方法的优点是，可以很自然地重用 create 方法。“@”或“this”是指派生类（构造函数），因此可以轻松创建对象。

当两个类都在同一个模块中时，该代码运行良好。但是，当对象在不同的​​模块中时，create函数内部的“@”或“this”指的是“Base.create”而不是Derived类的构造函数。

我不知道我是否在这里做一些非常规的编码。有人可以请教如何解决/构建这个问题吗？

# javascript - 使用 .css 文件中采用 CSS 属性的 JQuery 创建元素

> ID：15016653
> 
> 赞同：0
> 
> 时间：2013-02-22T04:06:16.300
> 
> 标签：javascript, jquery, css

我的代码如下所示：

* * *

样式.css

```
#div1{
 height: 1280;
 width: 800;
 top: -5000px;
 position: absolute;

}
#div2{
    height: 50%;
    width: 50%;
    top: 25%;
    left: 25%;
    position: absolute;
    display: none;

}
#div3{
    height: 100%;
    width: 100%;
    background: white;
    position: absolute;
    display: none;
}
#ball,
#ball1,
#ball2,
#ball3,
#ball4,
#ball5,
#ball6,
#ball7,
#ball8
{
    height: 100px;
    width: 100px;
    position: absolute;
    display: none;
} 
```

* * *

游戏.js

```
document.addEventListener("deviceready", onDeviceReady, true); 
function onDeviceReady(){
    //jQuery.fx.interval = 120;
    $("#div1").animate({top:'0px'});
    $("#div2").delay(1000).fadeIn(500);
    $("#div2").animate({height:'75%',width:'75%',top:'12.5%',left:'12.5%'});
    $("#div2").delay(1000).animate({left:'20%'},50).animate({left:'2.5%'},50).animate({left:'12.5%'},50);
    $("#div3").delay(2000).fadeIn(500).fadeOut(500);

//#ball turn orbit around the fixed pixel
var angle = 0;     // starting position (degrees)
var angle1 = 45;
var angle2 = 90;
var angle3 = 135;
var angle4 = 180;
var angle5 = 225;
var angle6 = 270;
var angle7 = 315;
var angle8 = 0;

var distance = 250; // distance of b from a
var speed = 300;    // revolution speed in degrees per second
var rate  = 10;    // refresh rate in ms

function f() {

    var t = 450 + (distance * Math.sin(angle * Math.PI/180.0));
    var l = 350 + (distance * Math.cos(angle * Math.PI/180.0));

    var t1 = 450 + (distance * Math.sin(angle1 * Math.PI/180.0));
    var l1 = 350 + (distance * Math.cos(angle1 * Math.PI/180.0));

    var t2 = 450 + (distance * Math.sin(angle2 * Math.PI/180.0));
    var l2 = 350 + (distance * Math.cos(angle2 * Math.PI/180.0));

    var t3 = 450 + (distance * Math.sin(angle3 * Math.PI/180.0));
    var l3 = 350 + (distance * Math.cos(angle3 * Math.PI/180.0));

    var t4 = 450 + (distance * Math.sin(angle4 * Math.PI/180.0));
    var l4 = 350 + (distance * Math.cos(angle4 * Math.PI/180.0));

    var t5 = 450 + (distance * Math.sin(angle5 * Math.PI/180.0));
    var l5 = 350 + (distance * Math.cos(angle5 * Math.PI/180.0));

    var t6 = 450 + (distance * Math.sin(angle6 * Math.PI/180.0));
    var l6 = 350 + (distance * Math.cos(angle6 * Math.PI/180.0));

    var t7 = 450 + (distance * Math.sin(angle7 * Math.PI/180.0));
    var l7 = 350 + (distance * Math.cos(angle7 * Math.PI/180.0));

    var t8 = 450 + (50 * Math.sin(angle8 * Math.PI/180.0));
    var l8 = 350 + (50 * Math.cos(angle8 * Math.PI/180.0));

    $("#ball").css({
        top: t,        
        left: l
    });

    angle += (speed * (rate/1000)) % 360;

    $("#ball1").css({
        top: t1,        
        left: l1
    });

    angle1 += (speed * (rate/1000)) % 360;

    $("#ball2").css({
        top: t2,        
        left: l2
    });

    angle2 += (speed * (rate/1000)) % 360;

    $("#ball3").css({
        top: t3,        
        left: l3
    });

    angle3 += (speed * (rate/1000)) % 360;

    $("#ball4").css({
        top: t4,        
        left: l4
    });

    angle4 += (speed * (rate/1000)) % 360;

    $("#ball5").css({
        top: t5,        
        left: l5
    });

    angle5 += (speed * (rate/1000)) % 360;

    $("#ball6").css({
        top: t6,        
        left: l6
    });

    angle6 += (speed * (rate/1000)) % 360;

    $("#ball7").css({
        top: t7,        
        left: l7
    });

    angle7 += (speed * (rate/1000)) % 360;

    $("#ball8").css({
        top: t8,        
        left: l8
    });

    angle8 += (speed * (rate/1000)) % 360;

}

setInterval(f, rate);

$("#ball").delay(4000).show(100);
$("#ball1").delay(4000).show(100);
$("#ball2").delay(4000).show(100);
$("#ball3").delay(4000).show(100);
$("#ball4").delay(4000).show(100);
$("#ball5").delay(4000).show(100);
$("#ball6").delay(4000).show(100);
$("#ball7").delay(4000).show(100);
$("#ball7").delay(6000).remove();
$("#ball6").delay(6000).remove();
$("#div1").append("<img src='pix/s1.png' id='ball8' />").show(100);

}; 
```

* * *

abc.html

```
<html>
<script src="js/jquery.min.js"></script>
<script src="js/jquery-ui.min.js" type="text/javascript"></script>
<script src="js/android2_1.js" type = "text/javascript"></script>
<script src="js/jquery.gamequery-0.7.0.js" type="text/javascript"></script>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<head>
</head>
<body onload="onDeviceReady()">
<div id="div1">
<img src="pix/bg1.jpg" id="bgpic" style="height: 100%; width: 100%;" />
<img src="pix/item1.png" id="div2" />
<img src="pix/s1.png" id="ball" />
<img src="pix/s1.png" id="ball1" />
<img src="pix/s1.png" id="ball2" />
<img src="pix/s1.png" id="ball3" />
<img src="pix/s1.png" id="ball4" />
<img src="pix/s1.png" id="ball5" />
<img src="pix/s1.png" id="ball6" />
<img src="pix/s1.png" id="ball7" />
</div>
<div id="div3"></div>
</body>
</html> 
```

* * *

但代码似乎不起作用。我确实尝试用谷歌搜索它。我得到的是 .addClass() 这也不起作用。

希望你们能在这方面帮助我。提前致谢。

* * *

伙计们，我的坏。

我发现了我的问题。

而不是这个，

```
$("#div1").append("<img src='pix/s1.png' id='ball8' />").show(100); 
```

我应该写这个

```
$("#div1").append("<img src='pix/s1.png' id='ball8' />");
$("#ball8").show(100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:11:27.357

您将链接包含在`html`而不是`head`标记中。

更改您的 html 文件，如下所示：

```
<html>

<head>
   <!-- All plugin references should be inside head tag -->
   <!-- Added -->
   <link href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" />
   <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
   <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 

   <!-- Your plugins here -->
   <script src="js/jquery.min.js"></script>
   <script src="js/jquery-ui.min.js" type="text/javascript"></script>
   <script src="js/android2_1.js" type = "text/javascript"></script>
   <script src="js/jquery.gamequery-0.7.0.js" type="text/javascript"></script>
   <link href="css/style.css" rel="stylesheet" type="text/css" />

</head>
<body onload="onDeviceReady()">
   <div id="div1">
     <img src="pix/bg1.jpg" id="bgpic" style="height: 100%; width: 100%;" />
     <img src="pix/item1.png" id="div2" />
     <img src="pix/s1.png" id="ball" />
     <img src="pix/s1.png" id="ball1" />
     <img src="pix/s1.png" id="ball2" />
     <img src="pix/s1.png" id="ball3" />
     <img src="pix/s1.png" id="ball4" />
     <img src="pix/s1.png" id="ball5" />
     <img src="pix/s1.png" id="ball6" />
     <img src="pix/s1.png" id="ball7" />
  </div>
  <div id="div3"></div>
</body>
</html> 
```

**更新**

```
setInterval(f, rate);
$("#div1").append("<img src='pix/s1.png' id='ball8' />");
$("#ball").delay(4000).show(100);
$("#ball1").delay(4000).show(100);
$("#ball2").delay(4000).show(100);
$("#ball3").delay(4000).show(100);
$("#ball4").delay(4000).show(100);
$("#ball5").delay(4000).show(100);
$("#ball6").delay(4000).show(100);
$("#ball7").delay(4000).show(100);
$("#ball8").delay(4000).show(100);
$("#ball7").delay(6000).remove();
$("#ball6").delay(6000).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:22:55.643

错误只是新元素没有应用样式吗？正在创建元素，只是样式不正确？

如果是这样，可能是因为您使用的是 ID 而不是类来分配样式。样式表在脚本之前被解释。应用于 id 的样式将被忽略，因为您所定位的元素在解释 CSS 时不存在。如果您将 CSS 选择器从更改`#ball8`为`.ball8`，然后将图像的 id 更改为一个类，它可能会起作用。如果您确实需要该图像具有“ball8” id，那么只需为样式使用不同的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T05:02:03.627

您使用 display none 作为图像。你必须在 jquery 中显示图像。试试这个代码：

游戏.js

```
$('<img />', {
   id:'ball8'
}).appendTo('#div1').attr('src', 'pix/s1.png').show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T05:23:58.383

您可以使用 addClass 轻松完成此操作，但它不起作用，因为您获得的是 Id 而不是类。

试试这个

```
.ball8 { height: 100px;width: 100px; position: absolute; display: none; }

game.js

$("#div1").addClass('ball8'); 
```

并且不要忘记使用以下内容使其可见：

```
$('.ball8').show() 
```

# asp.net-mvc - ASP.NET MVC 站点管理员

> ID：15016658
> 
> 赞同：1
> 
> 时间：2013-02-22T04:06:40.260
> 
> 标签：asp.net-mvc, siteminder

我们有一个受站点管理员保护的站点。我能够从 ASP.Net 网络表单以及经典 ASP 页面中的 Http 标头中提取用户 ID 信息。但是 MVC 中不存在 siteminder http 标头值。似乎站点管理员的安全性正在被绕过。有没有人成功实现了一个带有站点管理员保护的 MVC 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:55:47.793

确保 ISAPI 筛选器的顺序正确。SiteMinder 应该是 IIS 中的第一个（在经典 ASP 和 .NET 之前），我相信 web.config 也需要更改。

[http://support.ca.com/cadocs/0/CA%20SiteMinder%20r12%20SP3-ENU/Bookshelf_Files/HTML/idocs/index.htm?toc.htm?834391.html](http://support.ca.com/cadocs/0/CA%20SiteMinder%20r12%20SP3-ENU/Bookshelf_Files/HTML/idocs/index.htm?toc.htm?834391.html)

[ASP.Net MVC 和站点管理员](https://stackoverflow.com/questions/12867667/asp-net-mvc-and-siteminder)

# html - 如何从 Excel 电子表格生成 div 元素

> ID：15016660
> 
> 赞同：1
> 
> 时间：2013-02-22T04:06:57.260
> 
> 标签：html, excel, file-conversion

从表格或 excel 电子表格到 div 元素的最佳方式是什么？我有一个表，它有几百行，我想在 HTML 文件中表示为 div 元素。成品将如下所示：

```
<div id="COL1" style="display:none;">COL2 blah blah COL3</div> 
```

COL2 和 COL3 之间的文本都是相同的。我可以在转换之前轻松地将其插入我的表格中。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T06:08:58.583

我不确定我是否正确理解了输入，但是如果您想生成一堆`DIV`带有一些重复文本的 s，您可以添加`E1`（假设您的文本`COL1...3`并`blah blah`放在`A:D`从第一行开始的列中）以下公式：

```
="<div id="""&A1&""" style="""&"display:none;"""&">"&B1&" "&C1&" "&D1&"</div>" 
```

将其自动填充到文本值列表中并导出/复制到 HTML 编辑器生成`DIV`的 s。

示例文件：[https ://www.dropbox.com/s/gd52pp2p34flesg/DIVgenerator.xlsx](https://www.dropbox.com/s/gd52pp2p34flesg/DIVgenerator.xlsx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:00:07.617

您需要使用 Javascript/jquery 或任何您熟悉的脚本语言。

第一步是将excel表中的数据放入数组中，然后您可以使用将其附加到html中

```
var i=0;
$.each(array, function () {
$("#DIVID").append(array[i]);
i++;
}); 
```

这将基本上遍历数组 [] 中的每个元素。

# php - 在查询字符串中使用 LIKE 进行 laravel 分页

> ID：15016663
> 
> 赞同：1
> 
> 时间：2013-02-22T04:07:12.647
> 
> 标签：php, laravel

我想在过滤数据后对结果进行分页。所以我使用这个脚本：

$companies = DB::table('user')->where('name', 'LIKE', $term)->paginate($per_page);

但它不起作用并返回错误如下：

```
Unhandled Exception
Message:

Undefined offset: 0

Location:

/var/www/myapps/laravel/view.php(354) : eval()'d code on line 13 
```

你能帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:38:53.827

是的，我现在看到了问题，这实际上不是控制器逻辑的问题，而是视图（错误消息诱使我检查控制器的查询数据库。例如“偏移”）。这里的偏移量是控制器查询 db 后返回的数组偏移量。

只需检查它的长度，然后它就可以正常工作

# php - 使用jquery更改url参数

> ID：15016677
> 
> 赞同：0
> 
> 时间：2013-02-22T04:08:22.317
> 
> 标签：php, jquery

我有这个网址

> /home/tx_besijobs_pi1 **%5Bpointer%5D=1**
> &tx_besijobs_pi1%5Bmode%5D=1&cHash=70b49e9ffb83c0fb8010a7220bf4d833

我需要在下一次单击选项卡时将*指针值更改为“0” 。*

我的 jquery 脚本如下

```
 <script type="text/javascript" src="js/jquery.js"></script>
 <script type="text/javascript" src="js/jquery-ui.js"></script>
 <script type="text/javascript" src="js/jquery.cookies.js"></script>
 <script type="text/javascript">

  var pointer = getUrlVars()["pointer"];

  $(function()
    {
            var cookieName ="stickyTab";

            $( "div.tabbing" ).tabs( {  

                selected: ( $.cookies.get( cookieName ) || 0 ),
                select: function( e, ui )
                    {
                            var id =  $(location).attr("href");
                            $.cookies.set( cookieName, ui.index );
                    }
                } );
    } );

   function getUrlVars()
     {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&");

        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split("=");

            if($.inArray(hash[0], vars)>-1)
            {
                vars[hash[0]]+=","+hash[1];
            }
            else
            {
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
        }

        return vars;
    } 
```

由于 URL 的格式为**tx_besijobs_pi1%5Bpointer%5D=1**。我没有得到指针值。而且我不知道如何将指针值设置为 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:15:36.760

假设如果`tx_besijobs_pi1%5Bpointer%5D=1`是字符串，您需要将值从 1 更改为 0

```
var str = 'tx_besijobs_pi1%5Bpointer%5D=1';
str = str.replace("5Bpointer%5D=1", "5Bpointer%5D=0"); 
```

这只是一个示例，您可以使用这种方法来更新您的字符串，然后从中创建 URL

# jquery - 访问由 jQuery 在 ASp.NET MVC 表单中动态创建的文本框中的值

> ID：15016679
> 
> 赞同：0
> 
> 时间：2013-02-22T04:08:56.713
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我想在我的 MVC 添加/编辑表单中动态添加文本框。

我有一个名为“ `Interests`”的字段，用户应该能够通过单击“ `Add another`”文本框添加他/她喜欢的任意数量的兴趣。

这个，我可以用 JQuery 来做。

我想生成一个字符串，该字符串将具有来自上述字段“ `Interests`”的逗号分隔值。

假设用户添加了三个文本框，其值为*网球、足球和棒球*。我想将这些值组合成逗号分隔的字符串并将它们传递给`Model.Interest`我的用户模型中的字段之一。

有什么简单的方法可以做到这一点..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:31:15.077

它比这简单得多，只需在您的输入中添加一个 name='' 约定，mvc 的绑定器将获取这些值。

您实际上有两种选择... 1\. name="textbox[0].Name" 等等。2\. 创建您自己的 Binder，并根据需要绑定您的输入。你不必重新发明任何东西。

对不起，我花了这么长时间来编辑我的答案，这里是例子：模型：

```
public class Person
{
    public Person()
    {
        InterestList = new List<Interest>();
    }

    public IList<Interest> InterestList { get; set; }
}

public class Interest
{
    public string Name { get; set; }
} 
```

粘合剂：

```
public class InterestListBinder: IModelBinder
{
    public object BindModel(ControllerContext controllerContext, 
        ModelBindingContext bindingContext)
    {
        var person = new Person();
        foreach (var i in controllerContext.RequestContext.HttpContext.Request.Form.AllKeys)
        {
            person.InterestList.Add(new Interest
                {
                    Name = controllerContext.RequestContext.HttpContext.Request.Form[i]
                });
        }
        return person;
    }
} 
```

附加活页夹的 Global.asax

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        ModelBinders.Binders.Add(typeof(Person), new InterestListBinder());
    }
} 
```

控制器：

```
 public class HomeController : Controller
   {
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(Person person)
        {
            return View("Index", person);
        }
    } 
```

现在的观点：

```
@model Data.Services.DataBinders.Person

<div>
    <form action="@Url.Action("Index", "Home")" method="POST">
        @{
            if (Model != null && Model.InterestList.Any())
            {
                foreach (var tb in Model.InterestList)
                {
                    <input type="text" value="@tb.Name"/>
                }
            }
        }
        <input type="button" value="add" id="add" />
        <input type="button" value="remove" id="remove" />
        <input type="submit" value="Submit" />
    </form>
</div> 
```

而生成动态输入的 javascript，您可以输入任何您喜欢的名称：

```
 <script>
    (function ($) {
        var demo = {
            init: function () {
                this.elements = null;
                this.cache();
                this.bindEvents();
                return this;
            },
            cache: function () {
                this.elements = new Array();
            },
            bindEvents: function () {
                $("#add").on("click", this.add);
                $("#remove").on("click", this.remove);
            },
            add: function () {
                var self = demo;
                var $elem = $("<input type='text' \>");
                self.elements.push($elem);
                self.render();
            },
            remove: function () {
                var self = demo;
                $.each(self.elements, function (index, elem) {
                    elem.remove();
                });
                self.elements.splice(0, 1);
                self.render();
            },
            render: function () {
                var self = demo;
                for (var e in self.elements) {
                    self.elements[e].attr("name", "Interest" + e);
                    $("form").append(self.elements[e]);
                }
                console.log(self.elements);
            }
        };
        window.load = demo.init();
    })(jQuery)
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T04:25:35.580

如果您的所有文本框都共享一个类`txtInterestsToGrab`，您可以将它们全部组合成一个逗号分隔的字符串，并将它们发布到一个名为的假设操作方法中。`saveInterests`

```
 var data = $('.txtInterestsToGrab').val().join(',');

    $.ajax({
        type: "POST",
        url: "/Stuff/saveInterests/",
        dataType: 'json',
        traditional: true,
        data: data,
        success: function () {
        }
    }); 
```

如果您决定不使用逗号分隔的字符串，而是使用列表（我**强烈**推荐）

```
 var data = $('.txtInterestsToGrab').val(); 
```

# java - 更改单行 if 语句的 Eclipse 格式

> ID：15016681
> 
> 赞同：9
> 
> 时间：2013-02-22T04:09:18.600
> 
> 标签：java, eclipse

所以当我`shift+ctrl+f`用来重组一个类时，我的单行 if 语句会发生以下情况

`if (true) doThis();`

变成

```
if (true)
    doThis(); 
```

如何使`shift+ctrl+f`自动组织像第一个语句一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T04:15:20.420

经过更多探索后，我似乎可以改变它。

1.  `preferences`在 Eclipse 中打开
2.  扩张`Java`
3.  扩张`Code Style`
4.  点击`Formatter`
5.  点击`Edit`
6.  打开标签`Control Statement`
7.  调整“保持'then'语句在线

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T04:15:06.073

1.  转到窗口 > 首选项 (Windows/Linux) 或 Eclipse > 首选项 (OS X)。
2.  转到 Java > 代码样式 > 格式化程序。
3.  如果您还没有创建自己的代码格式化程序。
4.  转到控制语句。
5.  选中“在一行中保留简单的 'if'”复选框。
6.  点击确定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T04:15:25.723

试试这个 ：

1.  打开你的日食
2.  转到窗口 - 首选项
3.  转到 Java - 代码样式 - 格式化程序
4.  在 Active Profile : Eclipse [built-in] 中选择 Edit
5.  转到控制语句选项卡
6.  检查在同一行保留'then'语句
7.  更改您的个人资料名称
8.  好的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T04:14:21.443

而不是使用`CTRL`+ `SHIFT`+ `f`，您可以尝试使用`CTRL`+ `I`（如在爱尔兰）它实际上并没有重新格式化代码，但确实修复了所有缩进和空格，因此它不会影响一行 if 语句。

# java - 如何在datalist中加载数据

> ID：15016682
> 
> 赞同：0
> 
> 时间：2013-02-22T04:09:18.853
> 
> 标签：java, jsf

我有一个名为 ball 的数据库，它有 ID 和名称。

我使用 CRUD 生成了实体和 jsf 页面

通过添加

```
<h:form>
    <h:dataTable id="btable" value="#{ballController.items}" var="item">
         <h:column>
             <h:outputText value="#{item.id}"/>
         </h:column>
         <h:column>
             <h:outputText value="#{item.bname}"/>
         </h:column>
    </h:dataTable> 
</h:form> 
```

在我的页面上，它显示数据库中的数据列表、ID 和名称。

我尝试调试生成的代码和 ballController.items 调用：

```
public DataModel getItems() {
    if (items == null) {
        items = getPagination().createPageDataModel();
    }
    return items;
} 
```

生成数据表中的数据。

但是没有方法可以重新加载数据。

我尝试创建一个按钮

```
<h:commandButton action="#{ballCOntroller.getItems}" value="test">
      <f:ajax execute="@form" render="btable" />
</h:commandButton> 
```

执行getItems，在测试中重新加载数据表但它不起作用。

我确定我需要创建另一种方法来执行此操作，但我不确定从哪里开始。我需要查询数据库并返回一个列表吗？生成数据表？

*编辑

控制器：

```
@ManagedBean(name = "ballController")
@ViewScoped
public class ballController implements Serializable {

    private ball current;
    private DataModel items = null;
    @EJB
    private ballFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public ballController() {
    }

    public ball getSelected() {
        if (current == null) {
            current = new ball();
            selectedItemIndex = -1;
        }
        return current;
    }

    private ballFacade getFacade() {
        return ejbFacade;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(10) {
                @Override
                public int getItemsCount() {
                    return getFacade().count();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getFacade().findRange(new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {
        recreateModel();
        return "List";
    }

    public String prepareView() {
        current = (ball) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }

    public String prepareCreate() {
        current = new ball();
        selectedItemIndex = -1;
        return "index";
    }

    public String create() {
        try {

            getFacade().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ballCreated"));
            return prepareCreate();
//            return null;
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (ball) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getFacade().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ballUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (ball) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getFacade().remove(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ballDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getFacade().count();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getFacade().findRange(new int[]{selectedItemIndex, selectedItemIndex + 1}).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;

    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), true);
    }

    @FacesConverter(forClass = ball.class)
    public static class ballControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            ballController controller = (ballController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "ballController");
            return controller.ejbFacade.find(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof ball) {
                ball o = (ball) object;
                return getStringKey(o.getId());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + ball.class.getName());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:01:01.060

以下方法对您有用吗？

**JSF 页面**

```
<h:form>
    <h:dataTable id="btable" value="#{ballController.items}" var="item">
         <h:column>
             <h:outputText value="#{item.id}"/>
         </h:column>
         <h:column>
             <h:outputText value="#{item.bname}"/>
         </h:column>
    </h:dataTable>
    <h:commandButton action="#{ballController.retrieveItems}" value="Reload">
        <f:ajax execute="@form" render="btable" />
    </h:commandButton> 
</h:form> 
```

**控制器**

```
private DataModel items;
//Getter and Setter Methods

@PostConstruct
public void init() {
    items = getPagination().createPageDataModel();
}

public void retrieveItems() {
    items = getPagination().createPageDataModel();
} 
```

# java - 如何创建可以采用属性值模式的 LdapUserDetailsMapper？

> ID：15016690
> 
> 赞同：0
> 
> 时间：2013-02-22T04:10:41.100
> 
> 标签：java, spring-security, spring-security-ldap

我创建了一个自定义`LdapUserDetailsMapper`类来将扩展属性映射到一个自定义`UserDetails`类，该类包含诸如`displayName`,之类的额外属性`telephoneNumber`，`department`仅举几例。我设法通过访问属性来填充这些属性`DirContextOperation`，即

```
res.givenName = ctx.getStringAttribute("givenName"); 
```

但是，我不希望对此进行硬编码，并且希望这些属性可配置，这很好，尽管我也想使用 LDAP 表达式来返回由该表达式产生的值，即

```
res.givenName = ctx.getStringAttribute("givenName + ' ' + sn"); 
```

这当然行不通。我可以在任何连接之前手动解析模式并检索组件，但这听起来像是我想象框架已经提供的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:02:05.060

我认为可行的一种可能的解决方案是使用[Spring Expression Language](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html)。实现您自己的[`EvaluationContext`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/expression/EvaluationContext.html)，将`DirContextOperations`实例作为根对象并将属性读取转发到其`getStringAttribute()`方法。这种情况下的表达式不完全是 LDAP 表达式，但我猜 SpEL 更强大，所以它可能会更好。

# c - 添加自身的算法

> ID：15016691
> 
> 赞同：-3
> 
> 时间：2013-02-22T04:10:45.090
> 
> 标签：c, algorithm

哪一行代码可以进行以下推导（使用确切的顺序）：

```
int y[i][j];

y[0][0]=0

y[1][0]=0+4

y[2][0]=0+16
y[2][1]=0+4+16

y[3][0]=0+64
y[3][1]=0+4+64
y[3][2]=0+16+64
y[3][3]=0+4+16+64

y[4][0]=0+256
y[4][1]=0+4+256
y[4][2]=0+16+256
y[4][3]=0+4+16+256
y[4][4]=0+64+256
y[4][5]=0+4+64+256
y[4][6]=0+16+64+256
y[4][7]=0+4+16+64+256

...
..
. 
```

看到图案了吗？它会随着“i”的每次增加而不断增加自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:29:43.250

```
 int z[16], y[5][8];

  int p = 1;
  z[0] = 0;
  y[0][0] = 0;
  for (int k = 0; k < 4; k++){
    for (int n = 0; n < p; n++){
      z[p+n] = p*p + z[n];
      y[k+1][n] = 4*z[p+n];
    }
    p += p;
  } 
```

[键盘](http://codepad.org/aK4x6qwJ)

# c# - GLPK#整数编程

> ID：15016702
> 
> 赞同：2
> 
> 时间：2013-02-22T04:11:48.040
> 
> 标签：c#, optimization, mathematical-optimization

我需要编写一个整数程序。它非常简单，但问题是几乎没有关于如何使用可调用库为 GLPK 编写整数程序的好信息，更不用说为 GLPK# 编写整数程序了。

我的整数程序看起来很像这样：

```
Maximise: X[0] + X[1] + ... + X[n];

s.t.      X[1] + X[5] <= 1;
          X[1] + X[7] <= 1;
          X[2] + X[4] <= 1;
          X[3] + X[9] <= 1;
          ...
          X[i] = {0,1} 
```

我有一堆二进制 X，我想最大化总和。某些 X 排除了某些其他 X。

到目前为止，我所做的只是

```
LPProblem lp = new LPProblem()
{
  ModelClass = MODELCLASS.MIP,
  ObjectiveDirection = OptimisationDirection.MAXIMISE,
  ObjectiveName = "Z"
};

// Stuff goes here, I'm not sure how to represent the model

SOLVERSTATUS status = lp.SolveInteger(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T06:30:12.027

也许你可以使用 GLPK# 以外的东西。如果您是一名学者，您可以免费获得 CPLEX 或 Gurobi。否则，谷歌 OR 工具在过去一年中一直支持 C#。根据[Google OR Tools page](https://code.google.com/p/or-tools/)，它包含 GLPK 和 CBC 的包装器。仅仅因为您可以在两个求解器之间切换，我建议您使用 Google OR Tools。对于您的特定实例，您可能会发现一种求解器比另一种更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:06:14.423

只是一些其他的评论来填补这一点。首先 GLPK 是可以的，但对于大型模型来说速度很慢 - 如果您面临一个大问题（即使这是未来的方式），您可能最好看看其他一些已经提到的求解器。此外，GLPK# 的开发似乎非常安静——我已经将近 2 年没有看到任何更新了。这可能是一件好事（它稳定且有效，所以为什么要更改它）或者它可能是停滞的。

如前所述，Gurobi 和 CPLEX 都是非常强大的快速求解器，并在 C# 中提供了良好的建模 API。如果您可以访问这些内容，那么它们确实值得。SCIP 求解器很好 - 可能是非商业求解器中最好的，但我不确定 C# 接口。

Google OR 工具的另一个潜在优势是强调约束编程——如果您有一组复杂的二元变量和约束，那么 CP 方法可能具有一些优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-09T16:28:40.480

您描述的问题称为“最大集团问题”。创建一个无向图，其顶点标记为 1 到 n。如果您有 x[i] + x[j] <= 1 形式的约束，则在 i 和 j 之间绘制一条边。令 H 为互补图——即当且仅当G 中 i 和 j 之间*没有*边时，您在 i 和 j 之间有一条边。一个 clique 是顶点的子集，每个顶点由一个边缘到 S 的所有其他成员。你的问题是找到一个最大规模的集团。这是一个众所周知的 NP 完全问题。尽管如此，还是有一些非常好的启发式算法（甚至可能还有可用的软件）来解决这个问题。查看以下调查[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.17.5821](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.17.5821)

您给出的 IP 公式不是很严格，因此，除非 n 相当小，即使使用 CPLEX 和 GUROBI 等顶级求解器，您也可能无法使用该公式在合理的时间内解决您的问题。

# ruby-on-rails - 无法在带有操作邮件程序的电子邮件中显示用户名

> ID：15016707
> 
> 赞同：0
> 
> 时间：2013-02-22T04:12:48.823
> 
> 标签：ruby-on-rails, actionmailer

我正在尝试做一些非常简单的事情，即在注册电子邮件上显示用户名。然而，它输出一个空格而不是显示用户。我刚刚设置了 ActionMailer，我所做的一切都很好。

来自注册模板的代码：

```
<%= @user.name %>,

Thank you for registering! 
```

来自 user_mailer.rb 的代码：

```
 def registration_confirmation(user)
    @user = user
    mail(:to => user.email, :subject => "Registered")
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:57:40.893

在尝试这样的事情：

```
mail(:to => "#{user.name}<#{user.email}>", :subject => "Registered") 
```

# iphone - iOS：从超级视图中删除一个视图会导致另一个视图被删除？

> ID：15016716
> 
> 赞同：2
> 
> 时间：2013-02-22T04:14:14.140
> 
> 标签：iphone, ios, objective-c

这是一个非常奇怪的问题。我有 5 个子视图添加到`UIViewController`. 其中一个需要删除，但是当我这样做时，剩余的 4 个子视图之一也会被删除。这需要我使用 addSubview 重新添加它。所讨论的两种观点没有任何关系。

这是一个已知的`iOS SDK`错误吗？它肯定会在 iOS 6.1 的模拟器上运行。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:17:39.017

`single subview`您可以使用以下代码删除。

```
 [subview_Name removeFromSuperview]; 
```

如果要从`all subviews`视图中删除，请使用它。

```
 NSArray *subViewArray = [self.view subviews];
  for (id obj in subViewArray)
  {
   [obj removeFromSuperview];
  } 
```

如果你想删除`all subview of particular class`然后使用它。

```
 NSArray *subViewArray = [self.view subviews];
  for (id obj in subViewArray)
  {
   if([obj isKindOfClass:[classname class]])
      {
          [obj removeFromSuperview];
      }

  } 
```

示例：如果你想上课`remove subview`，那么用这个替换条件。`UIImageView``if`

```
[obj isKindOfClass:[UIImageView class]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T04:29:14.713

**在这里，在您的问题中不要提及您使用哪种方法来删除子视图，所以我给您简单的建议来删除子视图。**

给`Tag`每个`subView`这样的喜欢，

```
self.subView1.tag = 1;
self.subView2.tag = 2;
.
.
.
.
self.subViewN.tag = N; 
```

你可以访问（*删除*）任何`subView`基于它的`Tag`，比如

```
[[self.view viewWithTag:1] removeFromSuperview]; 
```

**这些提示可能对您有所帮助。**

# facebook - 将 HTML 文件放在 Heroku 上供 Facebook 使用

> ID：15016718
> 
> 赞同：0
> 
> 时间：2013-02-22T04:14:17.840
> 
> 标签：facebook, heroku

我正在尝试使用 Heroku 为我的 facebook 应用程序托管一些 html 页面。

问题是我不确定如何将文件放在 Heroku 上，然后获取到要使用的 web html 页面的链接。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:39:28.980

Heroku 旨在托管应用程序，实际上并不是为托管单个静态页面而构建的。可以这样做：Heroku 列出了以下用于创建简单机架站点的内容：[https](https://devcenter.heroku.com/articles/static-sites-ruby) ://devcenter.heroku.com/articles/static-sites-ruby 。

但老实说，我不得不说可能有更好的地方来托管页面，比如在[http://www.wordpress.com](http://www.wordpress.com)上创建一个免费博客并使用它。

# r - 通过将数值列与固定值进行比较来创建类别

> ID：15016723
> 
> 赞同：36
> 
> 时间：2013-02-22T04:14:29.027
> 
> 标签：r, dataframe

考虑`iris`数据：

```
 iris 
        Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
    1            5.1         3.5          1.4         0.2     setosa
    2            4.9         3.0          1.4         0.2     setosa
    3            4.7         3.2          1.3         0.2     setosa
    4            4.6         3.1          1.5         0.2     setosa
    5            5.0         3.6          1.4         0.2     setosa
    6            5.4         3.9          1.7         0.4     setosa
    7            4.6         3.4          1.4         0.3     setosa 
```

`Sepal.Length`我想根据变量中的值与固定限制/截止值的比较来创建一个新列，例如检查值是大于还是小于 5：

`if Sepal.Length >= 5 assign "UP" else assign "DOWN"`到一个新的列“条例”。

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-22T04:22:31.107

尝试

```
iris$Regulation <- ifelse(iris$Sepal.Length >=5, "UP", "DOWN") 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2019-03-13T21:58:52.500

为了更新可能的规范，该包`dplyr`具有`mutate`允许您以矢量化方式在 data.frame 中创建新列的功能：

```
library(dplyr)
iris_new <- iris %>%
    mutate(Regulation = if_else(Sepal.Length >= 5, 'UP', 'DOWN')) 
```

这会创建一个名为的新列`Regulation`，其中包含`'UP'`或`'DOWN'`基于将条件应用于`Sepal.Length`列。

该`case_when`函数（也来自`dplyr`）提供了一种将多个条件链接在一起的易于阅读的方式：

```
iris %>%
    mutate(Regulation = case_when(Sepal.Length >= 5 ~ 'High',
                                  Sepal.Length >= 4.5 ~ 'Mid',
                                  TRUE ~ 'Low')) 
```

这就像`if_else`除了不是 1 个条件返回值为 TRUE 和 FALSE 之外，每一行都有条件（左侧`~`）和返回值（右侧`~`），如果 TRUE 则返回。如果为假，则进入下一个条件。

在这种情况下，行 where`Sepal.Length >= 5`将 return `'High'`，行 where `Sepal.Length < 5`（因为第一个条件必须失败）&`Sepal.Length >= 4.5`将 return `'Mid'`，所有其他行将 return `'Low'`。由于`TRUE`is always `TRUE`，因此它用于提供默认值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-13T22:01:38.890

没有*ifelse*：

```
iris$Regulation <- c("DOWN", "UP")[ (iris$Sepal.Length >= 5) + 1 ] 
```

基准测试，比*ifelse*快约 14 倍：

```
bigX <- runif(10^6, 0, 10)

bench::mark(
  x1 = c("DOWN", "UP")[ (bigX >= 5) + 1 ],
  x2 = ifelse(bigX >=5, "UP", "DOWN"),
  x3 = dplyr::if_else(bigX >= 5, "UP", "DOWN")
)
# # A tibble: 3 x 14
# expression     min    mean  median     max `itr/sec` mem_alloc  n_gc n_itr total_time result memory
# <chr>      <bch:t> <bch:t> <bch:t> <bch:t>     <dbl> <bch:byt> <dbl> <int>   <bch:tm> <list> <list>
# x1          19.1ms  23.9ms  20.5ms  31.6ms     41.9     22.9MB     9    22      525ms <chr ~ <Rpro~
# x2         278.9ms 280.2ms 280.2ms 281.5ms      3.57   118.3MB     4     2      560ms <chr ~ <Rpro~
# x3          47.8ms  64.2ms  54.1ms 138.8ms     15.6     68.7MB    11     8      514ms <chr ~ <Rpro~ 
```

# visual-studio-2012 - 在 Windows Server 2012 上安装 Visual Studio 2012 Ultimate 出现错误

> ID：15016724
> 
> 赞同：1
> 
> 时间：2013-02-22T04:14:31.267
> 
> 标签：visual-studio-2012, installation, sharepoint-2013, windows-server-2012

我正在尝试`Visual Studio 2012 Ultimate`在`Windows Server 2012 Release Candidate Datacenter`.

而 Visual Studio 给了我这个错误。

```
The .Net Framework installed on this machine does not meet the minimum required version: 4.5.50709. 
```

请帮助我，我能做些什么来解决这个问题？
如果我必须更改我应该安装的 Visual Studio 版本。请让我知道我必须使用哪个版本的 Visual Studio。

我也曾尝试授予权限，
`HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\NET FRAMEWORK SETUP\NDP\v4\full\1033` 但它给了我访问被拒绝的错误，尽管我是管理员用户。

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:18:31.227

很可能与以下有关

[http://social.msdn.microsoft.com/Forums/en-US/tfssetup/thread/07cfd620-0599-42dc-bdf8-fe04fb11bff8](http://social.msdn.microsoft.com/Forums/en-US/tfssetup/thread/07cfd620-0599-42dc-bdf8-fe04fb11bff8)

看起来好像您必须安装试用版而不是 RC

[http://technet.microsoft.com/en-us/evalcenter/hh670538.aspx?EP=200072478](http://technet.microsoft.com/en-us/evalcenter/hh670538.aspx?EP=200072478)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T07:34:05.920

为此，您必须授予该文件夹的管理员权限。

您必须创建新组并授予该组管理员权限并将该组分配给该文件夹。

```
HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\NET FRAMEWORK SETUP\NDP\v4 
```

# php - 与PHP中的日期数组相比，如何获得最接近的日期

> ID：15016725
> 
> 赞同：22
> 
> 时间：2013-02-22T04:15:00.087
> 
> 标签：php, date, strtotime

[这篇文章](https://stackoverflow.com/questions/11012891/how-to-get-most-recent-date-from-an-array-of-dates)几乎为我回答了这个问题，但我有一个特定的需求，并没有找到我想要的东西。这完全超出了我的经验。我无法完全理解它，所以我真正需要的是一个正确方向的点。

假设我有一个数组，如下所示：

```
array(5) { 
    [0]=> "2013-02-18 05:14:54" 
    [1]=> "2013-02-12 01:44:03" 
    [2]=> "2013-02-05 16:25:07" 
    [3]=> "2013-01-29 02:00:15" 
    [4]=> "2013-01-27 18:33:45" 
} 
```

我想有一种方法来提供日期（例如“2013-02-04 14:11:16”），并有一个函数确定数组中与此最接近的匹配项（即“2013-02 -05 16:25:07" 在这种情况下）。

我会很感激任何提示。谢谢！:)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-22T05:50:58.653

我可能没有最好的命名约定，但这里有。

我计算日期数组和给定日期之间的间隔。然后我进行排序，以找到“最小”的差异。

```
$dates = array
(
    '0'=> "2013-02-18 05:14:54",
    '1'=> "2013-02-12 01:44:03",
    '2'=> "2013-02-05 16:25:07",
    '3'=> "2013-01-29 02:00:15",
    '4'=> "2013-01-27 18:33:45"
);

function find_closest($array, $date)
{
    //$count = 0;
    foreach($array as $day)
    {
        //$interval[$count] = abs(strtotime($date) - strtotime($day));
        $interval[] = abs(strtotime($date) - strtotime($day));
        //$count++;
    }

    asort($interval);
    $closest = key($interval);

    echo $array[$closest];
}

find_closest($dates, "2013-02-18 05:14:55"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T05:33:08.983

如果我完全理解您的问题，那么这将解决您的问题。

### 测试代码

```
<?php
    $dates = array
    (
        '0' => "2013-02-18 05:14:54",
        '1' => "2013-02-12 01:44:03",
        '2' => "2013-02-05 16:25:07",
        '3' => "2013-01-29 02:00:15",
        '4' => "2013-01-27 18:33:45"
    );

    function closest($dates, $findate)
    {
        $newDates = array();

        foreach($dates as $date)
        {
            $newDates[] = strtotime($date);
        }

        echo "<pre>";
        print_r($newDates);
        echo "</pre>";

        sort($newDates);
        foreach ($newDates as $a)
        {
            if ($a >= strtotime($findate))
                return $a;
        }
        return end($newDates);
    }

    $values = closest($dates, date('2013-02-04 14:11:16'));
    echo date('Y-m-d h:i:s', $values);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-16T13:18:50.997

假设您的数组更大，并且您的日期`2009-10-01`在`2019-10-01`. 现在让我们比较两种方法：`looping-array approach`与 b。`sorting-indexing-array approach`.

```
<?php 

$period = new DatePeriod(
    new DateTime('2009-10-01 00:00:00'),
    new DateInterval('P3D'),
    new DateTime('2019-10-01 00:00:00')
);

foreach($period as $date){ 
    $dates[] = $date->format('Y-m-d'); 
};

$today = '2019-08-18 13:00:15';

function custom_sort($array){
  sort($array);
  return $array;
}

function nearest_date_key($array, $today){
    //push today to the array, sort the array, 
    //find the nearest day value of the sorted array and return key
    array_push($array, $today);
    $sorted_dates = custom_sort($array);
    $find_today_key = array_search($today, $sorted_dates);
    $nearest_date = array_slice($sorted_dates, $find_today_key + 1, 1);
    return array_search($nearest_date[0], $array);
}

function find_closest($array, $today)
{
    //$count = 0;
    foreach($array as $day)
    {
        //$interval[$count] = abs(strtotime($date) - strtotime($day));
        $interval[] = abs(strtotime($today) - strtotime($day));
        //$count++;
    }

    asort($interval);
    $closest = key($interval);
    return $closest;
}

$start = microtime(true);
$result_a = nearest_date_key($dates, $today);
$time_elapsed_secs_a = microtime(true) - $start;

$start = microtime(true);
$result_b = find_closest($dates, $today);
$time_elapsed_secs_b = microtime(true) - $start;
?> 
```

打印结果给出（[http://phptester.net/](http://phptester.net/)）

```
 result  time_elapsed
loop approach (a)           1203    0.00630   
sorting index approach (b)  1203    0.00062 
```

这是一个巨大的时间**收益**。我们除以十的等待时间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:35:19.107

试试这个：

```
$date = array(
    [0]=> "2013-02-18 05:14:54"
    [1]=> "2013-02-12 01:44:03"
    [2]=> "2013-02-05 16:25:07"
    [3]=> "2013-01-29 02:00:15"
    [4]=> "2013-01-27 18:33:45");

$baseDate = date_create('2009-10-11');
$count = count($date);
for($loop=0;$count>$loop;$loop++) {
    $datetime = date_create($date[$loop]);
    $interval = date_diff($baseDate, $datetime);
    $newDate[$interval->format('%s')] = $date[$loop];
}
ksort($newDate);
foreach($newDate as $key=>$value) {
    echo $value;
    break;
} 
```

您的第一个元素将是最接近的匹配日期。

注意：请在使用前进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-25T11:02:25.357

这篇文章帮助我想到了解决类似问题的方法，所以我把它放在这里。

给定一组日期，我需要找到最接近上周日之前或等于的日期。

这是我在不使用任何自定义函数的情况下所做的：

```
$all_dates = [
  '20210328',
  '20210321',
  '20210314',
  '20210307',
];
$last_sunday = date( 'Ymd', strtotime( date( 'Ymd' ) . 'last sunday')); //20210321
$latest_date_index;

foreach( $all_dates as $index => $date ) {
  $date_obj = date_create_from_format( 'Ymd', $date );
  $last_sunday_obj = date_create_from_format( 'Ymd', $last_sunday );

  if ( $date_obj <= $last_sunday_obj ) {
    $latest_date_index = $index;
    break;
  }
}

echo "latest date from array: $all_dates[$latest_date_index]";
echo "array of all past dates from array: " . var_dump(array_slice($all_dates, $latest_date_index)); 
```

# vb.net - 计算列

> ID：15016726
> 
> 赞同：0
> 
> 时间：2013-02-22T04:15:03.070
> 
> 标签：vb.net, winforms, datagridview

我想使用`CellEndEdit`事件执行简单的计算。我有以下代码：

```
Private Sub DataGridView2_CellEndEdit(ByVal sender As Object, e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView2.CellEndEdit

    Dim Total As DataGridView = DirectCast(sender, DataGridView)

    If IsDBNull(Total(0, e.RowIndex).Value) Then Exit Sub

    Total("C3", e.RowIndex).Value = Total("C1", e.RowIndex).Value + Total("C2", e.RowIndex).Value

End Sub 
```

`C1`但是当我在 Column和中输入 20 时`C2`，`C3`显示的是 2020 而不是 40。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:28:21.270

好吧，如果 Type of`Total("C1", e.RowIndex).Value`是字符串，它会将它们连接起来。尝试

```
Total("C3", e.RowIndex).Value = (((cint)Total("C1", e.RowIndex).Value) + ((cint(Total("C2", e.RowIndex).Value)).ToString() 
```

做一个加法。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:36:47.467

当您处理字符串时，+ 运算符被用作连接...尝试；

```
Total("C3", e.RowIndex).Value = CInt(Total("C1", e.RowIndex).Value) + CInt(Total("C2", e.RowIndex)) 
```

# java - 忽略 Axis 客户端的无效证书

> ID：15016734
> 
> 赞同：2
> 
> 时间：2013-02-22T04:15:38.733
> 
> 标签：java, soap, axis

我正在为由供应商控制的 SOAP Web 服务构建客户端。不幸的是，他们的开发服务器有一个我无法验证的不安全（自签名）证书。每次我尝试发出请求时，Apache Axis 都会失败。有没有办法忽略 SSL 验证错误？我显然不想在生产中这样做，但在我的开发环境中会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:03:27.163

尝试禁用证书验证，在发出请求调用之前输入以下代码 -

```
 // Create a trust manager that does not validate certificate chains
    final TrustManager[] trustAllCerts = new TrustManager[]{new X509TrustManager() {
            @Override
            public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                return null;
            }

            @Override
            public void checkClientTrusted(X509Certificate[] certs, String authType) {
            }

            @Override
            public void checkServerTrusted(X509Certificate[] certs, String authType) {
            }
        }
    };

    // Install the all-trusting trust manager
    try {
        SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustAllCerts, null);
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
    } catch (Exception ex) {
        // take action
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:59:53.540

在尝试了多种解决方案后，最终奏效的是安装自定义协议处理程序并将其与特定的相关联`ServiceClient`：

```
private void configureServiceClient(ServiceClient client) {
       SSLContext ctx;
        try {
            KeyStore truststore = KeyStore.getInstance("JKS");
            truststore.load(getClass().getResourceAsStream("/truststore.jks"),
                    "latitude".toCharArray());

            ctx = SSLContext.getInstance("SSL");
            TrustManagerFactory tmf = TrustManagerFactory
                    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
            tmf.init(truststore);
            ctx.init(null, tmf.getTrustManagers(), null);
        } catch (Exception e) {
            logger.error("Exception loading Bold trust store", e);
            throw new RuntimeException(e);
        }

        SSLProtocolSocketFactory sslFactory = new SSLProtocolSocketFactory(ctx);
        Protocol prot = new Protocol("https",
                (ProtocolSocketFactory) sslFactory, 443);
        client.getOptions().setProperty(HTTPConstants.CUSTOM_PROTOCOL_HANDLER,
                prot);
} 
```

这样做的好处是它不需要我为我的应用程序覆盖所有 SSL 连接，如果颁发了新证书，这可能会破坏事情的发展。如果颁发新证书，这个肯定会中断，但这只是一个连接，而不是所有连接。

# youtube-api - 根据 youtube 视频元数据确定源设备的类型

> ID：15016741
> 
> 赞同：0
> 
> 时间：2013-02-22T04:16:21.593
> 
> 标签：youtube-api

我想知道是否有任何方法可以从 youtube 视频元数据中确定拍摄视频所使用的设备类型（一般类别，例如 -> 移动设备、网络摄像头、handycam 等）。

谢谢

JR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:07:42.983

目前无法从 youtube api 检索此信息。

这不是一个很好的解决方案，但根据您要解决的具体问题，您可以尝试在视频标签（甚至描述）中查找“移动”、“网络摄像头”、“手持摄像头”等内容。

# amazon-s3 - Amazon EMR 如何知道作业何时完成？

> ID：15016742
> 
> 赞同：1
> 
> 时间：2013-02-22T04:16:27.667
> 
> 标签：amazon-s3, hive, emr

我正在使用 Amazon Elastic MapReduce Ruby ( [http://aws.amazon.com/developertools/2264](http://aws.amazon.com/developertools/2264) ) 来运行我的蜂巢作业。有没有办法知道工作何时完成？现在我能想到的就是使用“--list --active”继续运行emrclient，但我希望有更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:54:27.013

您也可以从[aws 控制台](http://aws.amazon.com/console)的 EMR 部分了解这一点。

如果您关心的是在您的工作完成后终止集群，那么在启动集群时不要使用该选项`--stay-alive`。或者，您可以有一个脚本来轮询正在运行的集群的当前状态，并在它进入“等待”状态时终止它。

我认为没有其他方法。

# vba - 带有日期的循环的 Excel VBA 脚本

> ID：15016743
> 
> 赞同：4
> 
> 时间：2013-02-22T04:16:45.017
> 
> 标签：vba, date

我正在计算两个给定日期之间的工作时间（上午 8 点到晚上 8 点），不包括周末和公共假期，但我的代码语法不正确。

**样本数据：**

开始日期：17/06/2011 08:00:00 AM

结束日：19/06/2011 08:00:00 PM

```
Sub SLA_Days_Resolved_F()
    Dim x As Integer
    ' Set numrows = number of rows of data.
    NumRows = Range("F2", Range("F2").End(xlDown)).Rows.Count

    Dim total As Integer 'to count the total hours
    Dim st As String 'start date cell
    Dim en As String 'end date cell
    Dim destCell As String
    Dim d As Date ' for the loop

    total = 0

    ' Establish "For" loop to loop "numrows" number of times.
    For x = 2 To NumRows + 1
        st = "G" & CStr(x) 'reference to the cells
        en = "D" & CStr(x)
        'loop from start date to end date
        For d = Date(Range(st)) To Date(Range(en))
            'check if the current date is found is a Public holiday in the range or if a weekend
            If ((Vlookup(d,lookups!$o$3:$p$26,2,false))=1) or (weekend(d))Then
                'minus 8 to remove hours before 8am.
                total = (total + Hour(d) + minutes(d) / 60) - 8
            End If
        Next
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T04:34:09.763

您没有为变量`st`或`en`.

`Date`不是 VBA 中可用的函数。您可能需要使用 DateSerial 函数。这是一个循环日期的简单示例，您应该能够修改它。

```
Sub LoopDates()
Dim d As Date
'Loop the days beteween today and March 1, 2013.
For d = DateSerial(Year(Now), Month(Now), Day(Now)) To DateSerial(2013, 3, 1)

    Debug.Print d  'Prints the "d" value in the immediate window.
Next

End Sub 
```

此外，您不能只将工作表公式放入 VBA。这一行对于 Vlookup 来说绝对是错误的语法，并且`Weekend`不是我所知道的公式（测试它似乎确认它不是工作表或 VBA 中的有效调用。

`If ((Vlookup(d,lookups!$o$3:$p$26,2,false))=1) or (weekend(d))Then`

改写为：

```
If Application.WorksheetFunction.Vlookup(d,Sheets("lookups").Range("$o$3:$p$26"),2,false)=1 _
    or Not Application.WorksheetFunction.Weekday(d) Then 
```

**另一个日期循环示例**，我以我认为更有效的方式对变量进行了标注：

```
Sub Test()

Dim st As Range
Dim x As Integer
Dim stDate As Date
Dim enDate As Date
Dim d As Date
Dim numRows as Long

NumRows = Range("F2", Range("F2").End(xlDown)).Rows.Count

For x = 0 To NumRows-2
'SET YOUR VARIABLES HERE
' This may seem redundant or unnecessary for this case, but it makes structuring nested
' loops easier to work with, and then there are fewer places to make changes, 
' if you need to make changes.

    Set st = Range("G2").Offset(x, 0)
    Set en = Range("D2").Offset(x, 0)
    stDate = DateSerial(Year(st), Month(st), Day(st))
    enDate = DateSerial(Year(en), Month(en), Day(en))

    'Then, loop through the dates as necessary
    For d = stDate To enDate
        Debug.Print d
        'Do your code here.
    Next

Next

End Sub 
```

# copy-paste - 粘贴操作约束的完整列表？

> ID：15016748
> 
> 赞同：0
> 
> 时间：2013-02-22T04:17:00.183
> 
> 标签：copy-paste, paste

我已经编程了很长时间 - 但直到今天我才知道 - 文件夹不能粘贴到自己身上。

我以一种相当不愉快的方式发现了这一点——在我的应用程序中（我们正在开发一个文件浏览应用程序），当我将文件夹粘贴到自身中时——它导致了分段错误（无限递归）。

```
02-22 04:01:35.186: A/libc(786): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 786 (explorermanager) 
```

我的问题是：还有其他我**应该注意的****粘贴限制**并且也适用于大多数平台吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:27:18.880

在 Win32 上，您确实可以将目录复制到自身中。但是，如果它没有放在子目录中，它只会覆盖现有文件。

注意：对于大型目录，此解决方案将花费一些时间。

```
// Make sure to link default lib "Shell32.lib"

#include <Windows.h>
#include <Shellapi.h>

int main() {

    SHFILEOPSTRUCT hFileS = { 0 };

    hFileS.hwnd = NULL;
    hFileS.wFunc = FO_COPY;
    hFileS.fFlags = FOF_SILENT;

    hFileS.pTo = "C:\\DevkitPro\\TEST\0"; // Put into sub-dir TEST
    hFileS.pFrom = "C:\\DevkitPro\\*\0";

    SHFileOperation(&hFileS);

    return 0;

} 
```

希望这会有所帮助（如果您使用的是 Windows）...

在 MSDN 上：

[http://msdn2.microsoft.com/en-us/library/ms647743.aspx](http://msdn2.microsoft.com/en-us/library/ms647743.aspx)**

# sql-server-2008 - SQL 动态透视和分组结果

> ID：15016752
> 
> 赞同：2
> 
> 时间：2013-02-22T04:17:29.837
> 
> 标签：sql-server-2008, tsql, pivot

我有一个如下表设置：

```
客户名称每月资源成本
abc JAN2011 res1 1000
美国广播公司 FEB2011 res1 2000
def JAN2011 res2 1500
def MAR2011 res1 2000
吉 MAR2011 res3 2500
```

我需要一个像下面这样的输出。月份将以 3 个月为间隔动态生成。在这种情况下，有没有办法按 MONTHANDYEAR 以及按客户名分组？

```
资源客户名称 2011 年 1 月 2011 年 2 月 2011 年 3 月   
res1 abc 1000 1000
res1 def 2000
res2 分辨率 1500
res3 吉 2500

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:32:50.960

这就是 PIVOT 运算符的用途：

```
SELECT 
  Resource, ClientName,
  [JAN2011], [FEB2011], [MAR2011]
FROM
  (
  SELECT 
    *  
  FROM tblname
  ) AS SourceTable
PIVOT
  (
  SUM(COST)
  FOR MONTHANDYEAR IN ([JAN2011], [FEB2011], [MAR2011])
  ) AS PivotTable; 
```

由于您的月份是使用 @startDate 作为基准月份动态选择的，因此您可以使用以下动态查询：

```
DECLARE @startDate datetime
SET @startDate = '2011-01-01'

DECLARE @sql varchar(MAX)
SET @sql = 'SELECT
        Resource, ClientName, [' +
          REPLACE(SUBSTRING(CONVERT(varchar, @startDate, 13), 4, 8), ' ', '') + '], [' +
          REPLACE(SUBSTRING(CONVERT(varchar, DATEADD(MONTH, 1, @startDate), 13), 4, 8), ' ', '') + '], [' +
          REPLACE(SUBSTRING(CONVERT(varchar, DATEADD(MONTH, 2, @startDate), 13), 4, 8), ' ', '') + ']
        FROM
          (
          SELECT
            *
          FROM tblName
          ) AS SourceTable
        PIVOT
          (
          SUM(COST)
          FOR MONTHANDYEAR IN (' +
                  QUOTENAME(REPLACE(SUBSTRING(CONVERT(varchar, @startDate, 13), 4, 8), ' ', '')) + ', ' +
                  QUOTENAME(REPLACE(SUBSTRING(CONVERT(varchar, DATEADD(MONTH, 1, @startDate), 13), 4, 8), ' ', '')) + ', ' +
                  QUOTENAME(REPLACE(SUBSTRING(CONVERT(varchar, DATEADD(MONTH, 2, @startDate), 13), 4, 8), ' ', '')) + ')
          ) AS PivotTable'

execute(@sql) 
```

在这里工作[sqlfiddle](http://sqlfiddle.com/#!3/650a8/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:46:39.107

可以使用该`PIVOT`函数完成此数据转换。

如果您知道这些值，则可以对`monthandyear`日期进行硬编码：

```
select resource,
  clientname,
  isnull(jan2011, '') Jan2011,
  isnull(feb2011, '') Feb2011,
  isnull(mar2011, '') Mar2011
from
(
  select clientname, monthandyear, resource, cost
  from yourtable
) src
pivot
(
  sum(cost)
  for monthandyear in (Jan2011, Feb2011, Mar2011)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d3e06/1)。

但如果日期未知，则需要使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colNames AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(monthandyear) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colNames = STUFF((SELECT distinct ', isnull(' + QUOTENAME(monthandyear)+', 0) as '+QUOTENAME(monthandyear)
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT resource, clientname,' + @colNames + ' from 
             (
                select clientname, monthandyear, resource, cost
                from yourtable
            ) x
            pivot 
            (
                sum(cost)
                for monthandyear in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/830f4/6)。

两者的结果是：

```
| RESOURCE | CLIENTNAME | JAN2011 | FEB2011 | MAR2011 |
-------------------------------------------------------
|     res1 |        abc |    1000 |    2000 |       0 |
|     res1 |        def |       0 |       0 |    2000 |
|     res2 |        def |    1500 |       0 |       0 |
|     res3 |        ghi |       0 |       0 |    2500 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:26:36.530

```
SELECT Resource, Clientname
, SUM(CASE WHEN MonthAndYear = 'JAN2011' THEN COST ELSE 0 END) AS JAN2011
, SUM(CASE WHEN MonthAndYear = 'FEB2011' THEN COST ELSE 0 END) AS FEB2011
, SUM(CASE WHEN MonthAndYear = 'MAR2011' THEN COST ELSE 0 END) AS MAR2011
FROM yourtable
GROUP BY Resource, Clientname 
```

您还可以删除`ELSE 0`以返回`NULL`没有数据的资源/客户端名称组合的值

# java - 为银行创建随机存取文件

> ID：15016754
> 
> 赞同：0
> 
> 时间：2013-02-22T04:17:55.617
> 
> 标签：java, io, random-access

我需要以下我知道是错误的部分的帮助：

1.  空格/截断 - 我不知道该怎么做
2.  file.seek - 可能是错误的，因为我没有将间距/截断为 8 个字符。

这是我的代码：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.RandomAccessFile;

public class NationalBank
{
  public static void main(String[] args)  
  {
  InputStreamReader temp = null;
  BufferedReader input = null;
  try
  {
     temp = new InputStreamReader(System.in);
     input = new BufferedReader(temp);
     int acct;
     double amount[] = new double[9999];
     String name[] = new String[9999];
     RandomAccessFile file = new RandomAccessFile("bank.txt", "rw");
     while(true)
     {
        System.out.println("Enter Account Number (0-9999): ");
        acct = Integer.parseInt(input.readLine());
        System.out.println("Enter Last Name: ");
        name[acct] = input.readLine();
        System.out.println("Enter Balance ");
        amount[acct] = Double.parseDouble(input.readLine());
        if(acct >=0 && acct <=9999) {
           file.seek(acct*10);
           file.writeBytes(" "+name[acct]);
           file.writeBytes(" "+amount[acct]);
        }

        System.out.println("Enter More? (y/n)");   
        if (input.readLine().toLowerCase().equals("n"))
           break;
     }
     file.close();
  }
     catch (Exception e)
     {  
     }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:34:47.287

```
/**
 * Convert name from string into 8 bytes truncating and padding with spaces
 * id necessary.
 */
public static byte [] truncateName (String name)
{
    byte [] result = new byte [8];
    for (int i = 0; i < 8; i++)
        result [i] = i < name.length () ? (byte)name.charAt (i) : (byte)' ';
    return result;
}

/**
 * Convert double value into 8 bytes.
 */
public static byte [] packAmount (double amount)
{
    byte [] result = new byte [8];
    long bits = Double.doubleToLongBits (amount);

    for (int i = 0; i < 8; i++)
    {
        result [i] = (byte)(bits & 0xFF);
        bits >>>= 8;
    }

    return result;
}

public static void writeAccountinformation (
    RandomAccessFile file, int account, String name, double amount)
    throws IOException
{
    file.seek (account * 16); // 8 bytes for name and another 8 for amount
    file.write (truncateName (name));
    file.write (packAmount (amount));
}

public static void main(String[] args) throws Exception
{
    RandomAccessFile file = new RandomAccessFile ("bank.txt", "rw");
    try
    {
        BufferedReader reader = new BufferedReader (
            new InputStreamReader (System.in));

        while (true)
        {
            System.out.print ("Enter Account Number (0-9999): ");
            int account = Integer.parseInt (reader.readLine ());
            System.out.print ("Enter Last Name: ");
            String name = reader.readLine ();
            System.out.print ("Enter Balance: ");
            double amount = Double.parseDouble (reader.readLine ());

            writeAccountinformation (file, account, name, amount);

            System.out.println ("Enter More? (y/n)");
            if (reader.readLine ().toLowerCase ().equals ("n"))
                break;
        }
    }
    finally
    {
        file.close();
    }
} 
```

稍后您可以像这样从文件中读取数据：

```
FileInputStream input = new FileInputStream ("bank.txt");
try
{
    byte [] record = new byte [16];
    while (input.read (record) == 16)
    {
        String name = new String (record, 0, 8);
        long bits = 0L;
        for (int i = 15; i >= 8; i--)
        {
            bits <<= 8;
            bits |= record [i] & 0xFF;
        }
        double amount = Double.longBitsToDouble (bits);

        System.out.println("Name: " + name + ", amount: " + amount);
    }
}
finally
{
    input.close ();
} 
```

# hadoop - 在 Hadoop 中处理之前对 reducer 输入迭代器值进行排序

> ID：15016755
> 
> 赞同：6
> 
> 时间：2013-02-22T04:18:11.717
> 
> 标签：hadoop, mapreduce

我有一些输入数据以值类型 Iterator 进入减速器。如何将此值列表排序为升序？

我需要按顺序对它们进行排序，因为它们是时间值，然后在减速器中处理所有内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T07:01:49.450

要使用hadoop的内置功能实现reducer输入值的排序，您可以这样做：

1.Modify map output key - 追加map output key对应的value。发出这个复合key和map中的value。由于hadoop默认使用整个key进行排序，map输出记录会按照（你的旧key+value）排序.

2.虽然在步骤1中进行了排序，但您在过程中已经操作了map输出key。Hadoop默认根据key进行Partitioning和Grouping。

3.由于您修改了原始密钥，因此*您*需要注意修改 Partitioner 和 GroupingComparator 以基于旧密钥工作，即仅复合密钥的第一部分。Partitioner - 决定哪些键值对位于同一个 Reducer 实例中
GroupComparator - 决定哪些键值对在降落到 Reducer 中的键值对转到相同的 reduce 方法调用。

4.最后（很明显）你需要在reducer中提取输入键的第一部分来获取旧键。

如果您需要更多（和更好）的答案，请转到 Hadoop Definitive Guide 3rd Edition -> 第 8 章 -> 排序 -> 二级排序

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T17:02:49.797

您要求的称为二级排序。简而言之-您扩展键以向其添加“值排序键”并使hadoop仅按“真实键”分组，但同时按两者进行排序。
这是关于二级排序的一个很好的解释：http:
[//pkghosh.wordpress.com/2011/04/13/map-reduce-secondary-sort-does-it-all/](http://pkghosh.wordpress.com/2011/04/13/map-reduce-secondary-sort-does-it-all/)

# javascript - 使插件 CJS、AMD 和 script-tag 友好以也准备好 CJS/AMD/script-tag 的最佳实践是什么？

> ID：15016756
> 
> 赞同：0
> 
> 时间：2013-02-22T04:18:17.023
> 
> 标签：javascript, requirejs, amd, commonjs

我正在尝试为几乎可以在任何地方使用的库（MomentJS）编写一个插件。我打算将它与 RequireJS 一起使用，所以它必须是 AMD 友好的，但我也想继续让那些通过浏览器或 Node.js 中的脚本标签加载它的人使用它。

闲逛之后，我把这个拍在了一起：

```
(function() {
    var hasModule = typeof module !== "undefined"  && module.exports;

    var MY_LIB_DEF = function (moment, global) {
        if(typeof moment == "undefined") {
            throw "Can't find moment";
        }

        var MY_LIB = {
            //
            //DEFINE PLUGIN
            //
        };

        if(hasModule) {
            module.exports = LIB
        } else if(global) {
            global.LIB = LIB;
        } else {
            return LIB;
        }
    };

    if(hasModule) {
        moment = require('moment');
    }

    if (typeof define === "function" && define.amd) {
        define(["moment"], MY_LIB_DEF);
    } else {
        MY_LIB_DEF(moment, this);
    }
})(); 
```

MY_LIB_DEF 的底部，我确定是为 CJS 导出、附加到窗口还是为 AMD 返回似乎有点笨拙，就像我选择启动的方式一样（CJS 和脚本加载将共享定义的运行函数。但是传递给它的“全局”永远不会被使用）。

虽然上述方法有效，但我认为这个问题*必须*已经解决。我似乎找不到任何可以效仿的例子。

有人知道更好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:59:22.367

搜索后，我在这里找到了一些[很好的信息](https://stackoverflow.com/questions/13673346/supporting-both-commonjs-and-amd)来帮助解决问题。为了我的目的，仍然不得不稍微按摩一下，但这似乎是解决方案。

```
(function(root, definition) {
    "use strict";
    var moment;

    if (typeof module !== 'undefined' && module.exports) {
        moment = require('moment');
        module.exports = definition(moment);
    } else if (typeof define === 'function' && define.amd){
        define(['moment'], definition);
    } else {
        root['MY_LIB'] = definition(root.moment);
    }
}(this, function(moment) {
    if(typeof moment === "undefined") {
        throw "Can't find moment";
    }
    return {
        foo: function() {
            console.log('bar');
        }
    };
})); 
```

# ruby-on-rails - Activeadmin has_many

> ID：15016757
> 
> 赞同：0
> 
> 时间：2013-02-22T04:18:19.883
> 
> 标签：ruby-on-rails, activeadmin, self-reference

我有一个模型“Window”，它与另一个模型“WindowItems”有 has_many 关系。WindowItems 具有自引用关系（因此它可以具有自身的嵌套子级）。

我有一个像这样的窗口的 activeadmin 资源：

```
show :title => :name do

attributes_table do
  row :name
  row :column_position
  row :window_type
  row :column_count
  row :active
  row :page_position
  row :collapsible
  row :icon_id
  row :created_at
  row :updated_at
end

div :class => "accordion" do
  if window.window_items.count > 0
    panel "Window Items (#{window.window_items.count})" do

      table_for window.window_items do
        column "Name" do |a|
          link_to a.name, admin_window_item_path(a.id)
        end
        column :active
        column :link
        column :icon
        column :window
      end
    end
  end
end # end accordion 
```

结尾

所以现在，这是显示所有窗口项目，但我只希望它显示父窗口项目（关闭子窗口项目）。

如何过滤显示在面板“window items do”块上的记录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:43:06.413

如果您将 parent_id 添加到 WindowItem 模型，我认为您的问题将很容易解决。所有嵌套的子项都会有 parent_id 引用他们的父项，而您的顶级项目将没有 parent_id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:15:05.443

我终于弄明白了。我只是在模型中添加了一个范围，然后引用了该范围。

范围：

```
scope :is_parent, where('parent_window_item_id IS NULL || parent_window_item_id = ""') 
```

在 activeadmin 资源中：

```
table_for window.window_items.is_parent do
....
end 
```

# ruby - 在 Mac 上定位“irbrc”文件

> ID：15016758
> 
> 赞同：8
> 
> 时间：2013-02-22T04:18:20.740
> 
> 标签：ruby

我看到很多很酷的东西可以添加到我的 Ruby 控制台中。例如，一个好的列表是“[我的 .irbrc for console/irb](http://drnicwilliams.com/2006/10/12/my-irbrc-for-consoleirb/) ”。

我用谷歌搜索，但我发现的只是网络博客，上面写着人们将什么宝石添加到他们的 .irbrc 中。没有人说在哪里可以找到它。

我找不到“irbrc”。我打开我的主文件夹，如果我输入 IRB，它会转到 Ruby 控制台，但我找不到这个文件。有人可以帮我找到它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T04:24:40.480

这是一个 irbrc dotfile，所以你需要`ls -a`在你的主目录中找到它。如果它不在那里，只需创建一个 .irbrc 文件。

我的很简单，但这就是我所拥有的：

```
require 'rubygems'
require 'ap'

require 'irb/completion'
ARGV.concat [ "--readline", "--prompt-mode", "simple" ]

module Readline
  module History
    LOG = "#{ENV['HOME']}/.irb-history"

    def self.write_log(line)
      File.open(LOG, 'ab') {|f| f << "#{line}\n"}
    end

    def self.start_session_log
      write_log("\n# session start: #{Time.now}\n\n")
      at_exit { write_log("\n# session stop: #{Time.now}\n") }
    end
  end

  alias :old_readline :readline
  def readline(*args)
    ln = old_readline(*args)
    begin
      History.write_log(ln)
    rescue
    end
    ln
  end
end

IRB::Irb.class_eval do
  def output_value
    ap @context.last_value
  end
end

Readline::History.start_session_log

require 'irb/ext/save-history'
IRB.conf[:SAVE_HISTORY] = 100
IRB.conf[:HISTORY_FILE] = "#{ENV['HOME']}/.irb-save-history"

IRB.conf[:PROMPT_MODE] = :SIMPLE
require 'irb/completion' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T05:00:22.187

如果您无法在您的主目录中找到该文件`.irbrc`，只需在您的主目录中创建它并用一些行填充它，例如：

```
require "irb/completion" 
```

然后，当您启动 irb 时，您的 irb 将自动加载完成模块。

PS：它也适用于 UNIX/Linux 系统。

# deployment - Windows Phone 8 模拟器 - 部署错误

> ID：15016761
> 
> 赞同：6
> 
> 时间：2013-02-22T04:18:51.810
> 
> 标签：deployment, windows-phone-8, hyper-v, windows-phone-8-emulator

我在 Windows 8 中使用 Visual Studio 2012。我已经设置了 Windows Phone 8 sdk，一切正常，直到我对网络设置进行了一些更改。首先我无法通过模拟器连接到互联网。但我设法通过与我的 USB 调制解调器共享物理连接来建立互联网连接。但是现在我在启动之前一直运行良好的模拟器时遇到了问题。当我单独运行模拟器（通过 Hyper-V 管理器）时，一切正常，我可以连接到互联网，但问题是当我从 Visual Studio 2012 启动模拟器时。

![在此处输入图像描述](../Images/652b244cbbef2cf9cc4f5b0bfcc99348.png)

![在此处输入图像描述](../Images/c74e14f820c31a6c8d95b7cbdc1af589.png)

可以在此处找到相关问题 [ [1](https://i.stack.imgur.com/I6DS6.jpg) ]，但答案不是我想要的。有没有办法在不在虚拟机上运行模拟器的情况下解决这个问题？

谢谢

[1](https://i.stack.imgur.com/I6DS6.jpg) [Windows Phone 8 模拟器部署问题与 Internet](https://stackoverflow.com/questions/14319282/windows-phone-8-emulator-deployment-issue-with-internet)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-02T05:03:21.147

当我遇到这种情况时，它是由我的防病毒软件引起的。具体来说，为 Hyper-V 虚拟适配器启用了“AVG 网络过滤器驱动程序”。取消选中此选项为我解决了问题。

[来自其他虚拟化或网络软件和驱动程序的干扰](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681694%28v=vs.105%29.aspx#BKMK_interference)具体概述了应为虚拟适配器检查哪些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T13:32:47.837

有点晚了，但我不得不面对同样的问题并找到了这个解决方案（所有其他解决方案都不适合我）

1.进入网络和共享中心

2.去改变适配器设置

3.转到v以太网（内部以太网端口windows phone emulator内部交换机）

4.右键单击它并启用它（如果已启用，则禁用并再次启用它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:25:40.837

调试器通过 TCP/IP 连接运行，因此如果您更改了 HyperV 网络设置，则可能您已将 VM 与主机隔离，因此它无法打开连接。尝试将连接重置回您更改它以使 Internet 正常工作之前的状态，这应该会重新存储您的调试器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:57:50.653

编辑虚拟机文件夹中的 .VMX 文件

```
vhv.enable = "TRUE"
hypervisor.cpuid.v0 = “FALSE” 
```

并保存它。

# windows-server-2008 - 为什么 Server 2008 的组策略管理中缺少远程桌面服务？

> ID：15016763
> 
> 赞同：1
> 
> 时间：2013-02-22T04:19:05.470
> 
> 标签：windows-server-2008, remote-desktop, rdp, group-policy

我有 SBS 2008 并且我的客户端 PC 无法相互进行 RDP。由于已加入域，这些设置显示为灰色。

没有问题，对吧？进入**组策略管理**，并找到此部分进行更改：

> 计算机配置\策略\管理模板\Windows 组件\远程桌面服务\远程桌面会话主机

除了，射击！Windows 组件\**远程桌面服务**甚至不在列表中！为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:05:00.877

您可以使用“*开始”>“搜索*”“gpedit.msc”找到它，然后转到

```
Computer Configuration > Administrative Templates > 
Windows Components > Terminal Services > Terminal Server > Connections. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T01:48:23.700

它在不同的系统中调用不同的东西。它可以称为终端服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-17T11:49:14.557

右键单击“管理模板”，选择“添加/删除模板...”并验证“系统”模板是否存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T07:47:50.400

右键单击管理模板，选择添加/删除。

删除一个项目（我删除了 inetres）并关闭。

模板重新排列和扩展。此时应列出终端服务。

右键单击管理模板并添加回您删除的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-07T20:26:37.933

我遇到了同样的问题，我发现文章中的解决方案是使用旧机器来编辑 GPO。您必须在 Windows XP 或 Windows 2003 机器上进行尝试。

但是，我在网络上没有任何可用的了。

最后，我删除了我正在使用的策略下的以下文件夹，这些设置不再出现。（该文件夹中有一个 ini 文件，它定义了我们要删除的 3 个设置。）

```
\\domain\sysvol\domain\Policies\GUIDOfPolicy\User\Microsoft\RemoteInstall 
```

要查找 GUIDOfPolicy，请查看 GPMC 中的详细信息。您将看到它作为唯一 ID。

请记住在查找此文件夹时替换您的域名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-11T22:41:51.837

我能够根据我的政策来解决这个问题。

参考这篇文章的说明： https: [//support.microsoft.com/en-us/help/2722241/policy-reporting-tools-indicate-empty-internet-explorer-maintenance-policy-as-winning](https://support.microsoft.com/en-us/help/2722241/policy-reporting-tools-indicate-empty-internet-explorer-maintenance-policy-as-winning)

然后删除这些而不是那里列出的那些：[{3060E8D0-7020-11D2-842D-00C04FA372D4}{3060E8CE-7020-11D2-842D-00C04FA372D4}]

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-11-25T09:56:18.953

如果

*计算机配置 > 管理模板 > Windows 组件 > 终端服务 > 终端服务器*

没有出现在

*gpedit.msc*

然后进入

*%windir%\system32\GroupPolicy*

并重命名

*管理员*

文件夹到

*管理员改名为*.

运行*gpedit.msc*并且应该正确地重新创建*Adm文件夹并且**终端服务器*策略应该是可见的。然后，您可以删除*Adm 重命名的*文件夹。

# google-chrome - 相同的 Twitter Bootstrap 文件在 Chrome 中的不同服务器上呈现不同

> ID：15016769
> 
> 赞同：3
> 
> 时间：2013-02-22T04:19:27.037
> 
> 标签：google-chrome, twitter-bootstrap, webserver

今天在尝试实现 Twitter Bootstrap 框架时遇到了一个有趣的问题，这让我很困惑。我最初试图解决的问题是，当我将浏览器的大小调整到接近响应式模板中的断点时，Chrome 中出现了水平滚动条。

为了解决这个问题，我决定逐字复制启动模板，该模板在 Twitter Bootstrap 网站上正确显示。为了更加一致，我更改了包含的 Bootstrap 资源的相对路径，以直接指向托管在 Github 上的相同文件。

令人难以置信的是，即使使用完全相同的代码，问题仍然存在。[您可以在此处查看损坏版本](http://close.cx/starter.html)的工作示例。只需在最新版本的 Chrome 中水平调整窗口大小，当宽度接近断点时，您会注意到滚动条会出现在底部。凭直觉，我将同一个文件复制到另一台服务器上，然后……[它可以工作](http://dev.iamspencerbrooks.com/starter.html)？！

老实说，我不知道是什么导致 HTML/CSS/JS 在同一浏览器中跨两个不同服务器的行为不同。我能找到的最接近的是开发人员将文件从本地环境传输到远程环境和/或使用 IE 的讨论。任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:45:22.320

我猜 Chrome 被放大了。

# c++ - 编译器错误 LKN2019：处理继承时未解析的外部符号

> ID：15016770
> 
> 赞同：1
> 
> 时间：2013-02-22T04:19:36.107
> 
> 标签：c++, inheritance, linker, compiler-errors

我在 C++ 中有以下文件：

对象.h：

```
class Object{
    public:
        Object(void);
        ~Object(void);

        GLfloat getLeft();
        GLfloat getRight();
        GLfloat getBottom();
        GLfloat getTop();
}; 
```

播放器.h：

```
 class Player : public Object{
    public:
        Player(void);
        ~Player(void);

        GLfloat getLeft();
        GLfloat getRight();
        GLfloat getBottom();
        GLfloat getTop();
}; 
```

平台.h：

```
class Platform : public Object{
public:
    Platform(void);
    ~Platform(void);

    GLfloat getLeft();
    GLfloat getRight();
    GLfloat getBottom();
    GLfloat getTop();
}; 
```

支柱.h：

```
class Pillar : public Object{
public:
    Pillar(void);
    ~Pillar(void);

    GLfloat getLeft();
    GLfloat getRight();
    GLfloat getBottom();
    GLfloat getTop();
}; 
```

碰撞.h：

```
#include "Player.h"
#include "Platform.h"
#include "Pillar.h"

class Collision
{
public:
    Collision(void);
    ~Collision(void);
    bool CollisionDetect(Object* obj1, Object* obj2);
}; 
```

碰撞.cpp：

```
bool Collision::CollisionDetect(Object* obj1, Object* obj2){
    return !(obj2->getLeft() > obj1->getRight()
        || obj2->getRight() < obj1->getLeft()
        || obj2->getTop() > obj1->getBottom()
        || obj2->getBottom() < obj1->getTop());
} 
```

CollisionDetect 将比较 2 个不同的对象是否发生碰撞，为此我需要特定的 x 和 y 值，但是，对象的类型可能会根据不同的情况而有所不同，并且每种类型的对象将有不同的方法来找到它们的 x 和 y 值. 这意味着我不得不在它们的子类中重新定义相关的 get 方法，但是当我运行这段代码时，我最终会遇到错误：

```
1>Collision.obj : error LNK2019: unresolved external symbol "public: float __thiscall Object::getLeft(void)" (?getLeft@Object@@QAEMXZ) referenced in function "public: bool __thiscall Collision::CollisionDetect(class Object *,class Object *)" (?CollisionDetect@Collision@@QAE_NPAVObject@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: float __thiscall Object::getRight(void)" (?getRight@Object@@QAEMXZ) referenced in function "public: bool __thiscall Collision::CollisionDetect(class Object *,class Object *)" (?CollisionDetect@Collision@@QAE_NPAVObject@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: float __thiscall Object::getBottom(void)" (?getBottom@Object@@QAEMXZ) referenced in function "public: bool __thiscall Collision::CollisionDetect(class Object *,class Object *)" (?CollisionDetect@Collision@@QAE_NPAVObject@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: float __thiscall Object::getTop(void)" (?getTop@Object@@QAEMXZ) referenced in function "public: bool __thiscall Collision::CollisionDetect(class Object *,class Object *)" (?CollisionDetect@Collision@@QAE_NPAVObject@@0@Z)
1>C:\Users\Student\Dropbox\Work\Year 2\Graphics 1\Coursework\GraphicsCoursework\Debug\GraphicsCoursework.exe : fatal error LNK1120: 4 unresolved externals 
```

是我的继承问题导致了这种情况，还是其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:31:56.387

将对象类中的 4 个函数完全设为“虚拟”事实上我建议将其设为纯虚拟，

```
class Object{
    public:
        Object(void);
        ~Object(void);

        virtual GLfloat getLeft() = 0;
        virtual GLfloat getRight() = 0;
        virtual GLfloat getBottom() = 0;
        virtual GLfloat getTop() = 0;
}; 
```

这将迫使您覆盖派生类中的这四个函数，并提供定义..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:24:32.657

您的每个类，Derived 和 Base 都需要**定义**这 4 个成员函数。
只有 C++ 中的纯虚函数才允许在没有定义的情况下存在。

另外，派生类中这4个成员函数的重新声明和定义**[隐藏](http://www.parashift.com/c++-faq/hiding-rule.html)**了基类中的函数。从您的用法来看，您似乎想通过**函数覆盖**来使用动态多态性，为此您需要使用关键字`virtual`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:30:18.050

好像你需要`virtual`功能。

```
class Object{
    public:
        Object(void);
        ~Object(void);

        virtual GLfloat getLeft()=0;
        virtual GLfloat getRight()=0;
        virtual GLfloat getBottom()=0;
        virtual GLfloat getTop()=0;
}; 
```

# debugging - Scala ith 顺序统计

> ID：15016774
> 
> 赞同：0
> 
> 时间：2013-02-22T04:20:16.500
> 
> 标签：debugging, scala

我刚开始为我正在学习的算法课程编写代码，而且我仍在大量学习 Scala 的基础知识（并且经常搞砸）。任务是创建一个计算数组的第 i 阶统计量的程序。我的问题是我在下面编写的编译和运行，打印“从值 [Array] 中选择元素“+which+””，然后停止。没有错误消息。我确定下面的代码中有几个错误。为了充分披露，这是一项家庭作业。我很感激任何帮助。

编辑：感谢您的提示，我编辑了一些东西。我现在认为 select 正在查看数组的越来越小的部分，但代码仍然不起作用。现在它在大约 25% 的时间里吐出正确答案，其余时间做同样的事情。

```
object hw3v2 { 

  // 
  // partition 
  // 
  // this is the code that partitions 
  // our array, rearranging it in place 
  // 

  def partition(a: Array[Int], b: Int, c: Int): Int = { 

    val x:Int = a(c) 
    var i:Int = b

    for (j <- b to c-1)
      if (a(j) <= x) {
        i += 1
        a(i) = a(j)
        a(j) = a(i)

      }

    a(i+1) = a(c)
    a(c) = a(i+1)
    i + 1
  }

  def select(a: Array[Int], p: Int, r: Int, i: Int): Int = {

    if (p == r)
      a(0)

    else {
      val q = partition(a, p, r)
      val j = q - p + 1
      if (i <= j)
        select(a, p, q, i)
      else
        select(a, q+1, r, i-j)
    }
  }

  def main(args: Array[String]) {

    val which = args(0).toInt

    val values: Array[Int] = new Array[Int](args.length-1);
    print("Selecting element "+which+" from amongst the values ")
    for (i <- 1 until args.length) {
      print(args(i) + (if (i<args.length-1) {","} else {""}));
      values(i-1) = args(i).toInt;
    }
    println();

    println("==> "+select(values, 0, values.length-1, which))
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:48:15.313

您的退出条件`select`是数组`a`的长度必须小于或等于 1。但是我看不到任何会改变数组长度的东西。因此，递归调用`select`无限循环。我只能猜测：由于您的目标似乎是`select`每次都对不同的 Array 进行操作，因此您必须将修改后的 Array 作为输入传递。因此，我的猜测是`partition`应该返回 an`Int`和 modified `Array`。

## 更新

如果“第 i 个顺序统计”是指数组中的“第 i 个”最小元素，为什么不直接执行以下操作？

```
a.sorted.apply(i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:59:53.350

我恳求你，试着写更多这样的：

```
def partition(a: Array[Int], b: Int, c: Int): Int = {
  val x: Int = a(c)
  var i: Int = b - 1

  for (j <- b to c - 1)
    if (a(j) <= x) {
      i += 1
      val hold = a(i)
      a(i) = a(j)
      a(j) = hold
    }

  a(i + 1) = a(c)
  a(c) = a(i + 1)
  i + 1
}

def select(i: Int, a: Array[Int]): Int =
  if (a.length <= 1)
    a(0)
  else {
    val q = partition(a, 0, a.length - 1)
    if (i <= q)
      select(i, a)
    else
      select(i - q, a)
  }

def main(args: Array[String]) {
  val which = args(0).toInt

  printf("Selecting element %s from amongst the values %s%n".format(which, args.mkString(", ")))

  val values = args map(_.toInt)
  printf("%nb ==> %d%n", select(which, values))
} 
```

据我所知，这相当于您的原始代码。

# c++ - 我们可以在 Mac OS 10.6 上运行 CLang 3.3 和 C 0x lib 吗？

> ID：15016776
> 
> 赞同：2
> 
> 时间：2013-02-22T04:20:46.640
> 
> 标签：c++, macos, c++11, clang

我能够运行 C++11 的基本结构，例如 CLang 3.3 中的自动变量

但是当涉及到 assignment_initialization 时，例如

```
 vector<int> v={1,2}; 
```

我从 CLang++ 得到错误，说我应该包括

```
<initializer_list> 
```

但是当我使用它时，它说找不到“initializer_list”的文件

任何解决方法或任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:21:14.673

对于 C++11 库功能，您需要 libc++，Apple 仅在 10.7 及更高版本中支持。

# java - 你如何适应 JPanel 中的所有元素？

> ID：15016777
> 
> 赞同：0
> 
> 时间：2013-02-22T04:20:56.660
> 
> 标签：java, swing, layout-manager

我有两个列表和三个按钮。该列表具有基本形状的元素。当我选择前“矩形”时，它应该在画布中绘制矩形。现在我已经为第二个列表 Rectangle 实现了。矩形绘制得很完美，但我的列表又被重复了，为什么？以及如何很好地适应它们？. 我在哪里做错了

这是以下代码：

```
package src;

import javax.swing.*;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Rectangle2D;

public class Main implements ActionListener{

    public static void main(String[] args){
        Main gui = new Main();
        gui.go();
    }

    public void go(){
         frame = new JFrame();
         panel = new JPanel();
        String figures[] = {"Rectangle","Rounded Rectangle", "Arc", "Line","Cubic curve"};
         drawing1 = new JList<String>(figures);
         drawing2 = new JList<String>(figures);
         connect_button = new JButton("connect them");

        submit1 = new JButton("Submit figure 1");
        submit2 = new JButton("Submit figure 2");

        connect_button.addActionListener(this);
        submit1.addActionListener(this);
        submit2.addActionListener(this);
        panel.add(drawing2);
        panel.add(drawing1);
        panel.add(connect_button);
        panel.add(submit1);
        panel.add(submit2);

        panel.setLayout(new BoxLayout(panel,BoxLayout.Y_AXIS));
        panel.setBackground(Color.gray);
        frame.getContentPane().add(BorderLayout.NORTH,panel);
        frame.getContentPane().add(BorderLayout.CENTER,draw);
        frame.setSize(5000,400);
        frame.setVisible(true);
    }

    public void actionPerformed(ActionEvent event){
    if(event.getSource()== submit1){

    }
    else if(event.getSource()== submit2){
        type = drawing1.getSelectedValue();
        draw.repaint();

    }
    else if(event.getSource()== connect_button){

    }

    }
    DrawingPanel draw = new DrawingPanel();
    JPanel panel;
    JFrame frame;
    JButton connect_button;
    JButton submit1;
    JButton submit2;
    JList<String> drawing1;
    JList<String> drawing2;
    String type;

    public class DrawingPanel extends JPanel{
        public void paintComponent(Graphics G){

            Graphics2D g2d = (Graphics2D) G;
            if(type=="Rectangle"){
            Rectangle2D r2d = new Rectangle2D.Float(10f, 10f, 130f, 130f);
            g2d.draw(r2d);
            }

        }

    }
} 
```

点击提交图2之前 [http://img152.imageshack.us/img152/4594/capture1ypd.png](http://img152.imageshack.us/img152/4594/capture1ypd.png)

点击提交按钮后 [http://img46.imageshack.us/img46/854/capture2bk.png](http://img46.imageshack.us/img46/854/capture2bk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:29:35.950

您的列表变得重复，因为您自己正在创建两个相似的列表

```
String figures[] = {"Rectangle","Rounded Rectangle", "Arc", "Line","Cubic curve"};
drawing1 = new JList<String>(figures);
drawing2 = new JList<String>(figures); 
```

这里两个列表都通过了相同的`figures`，所以它们肯定是重复的。试着给`String[]`他们每个人不同的东西

希望这可以帮助！

# asp.net-mvc - Ajax 和 MVC 将类对象发布到控制器

> ID：15016783
> 
> 赞同：2
> 
> 时间：2013-02-22T04:21:41.383
> 
> 标签：asp.net-mvc, json, jquery, knockout.js

我的问题：

首先，我有一个搜索表单，用户在其中输入条件并将请求发送到适当的控制器索引操作。用户输入作为我创建的模型类型传入，只是为了保存数据。我将模型返回到视图中，然后在呈现视图之前，我使用 jquery 获取视图模型数据，并且我有一个 knockout.js/ajax 将“数据”发布到一个 jsonresult 操作，其中发生搜索过滤然后我更新使用 json 数据和敲除数据绑定的视图。

我的 jsonresult 操作需要一个用于表排序的字符串 sortByText(works) 和一个 ViewModel。但是当发生 ajax 调用时，我的 jsonresult 操作无法识别数据对象传递的值。

如何将“SearchFormModel”正确传递到 JSONresult 操作中？

AJAX

'self.options.formModel' 保存 Index 操作发送的我的数据；在调试时，我看到它有数据，但在下一步中没有发布到 jsonresult 操作，只有 sortByText。ajax 'data:' 只能识别字符串和 int 吗？

```
 $.ajax({
        type: 'POST',
        url: Url,
        data: { sortByText: selectedText, formModel: self.options.formModel },
        dataType: "json"
      })....etc 
```

控制器

```
 [HttpGet]     
    public ActionResult Index(string sortByText, SearchFormModel formModel)
    {
        var model = new SearchViewModel();
        model.FormModel = formModel;

        return View(model);
    }

    [HttpPost]
    public JsonResult GetData(string sortByText, SearchFormModel formModel)
    {

        //return jsonData
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:04:06.280

使用 ko.toJS(self.options.formModel()) 将 observableArray 转换为 json 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T05:45:50.593

尝试使用：-

```
$.ajax({
    type: 'POST',
    url: Url,
    data: ko.toJSON({ sortByText: selectedText, formModel: self.options.formModel }),
    dataType: "json"
  }) 
```

其次，可能听起来断章取义：-
您的 SearchFormModel 有

```
[JsonObject(MemberSerialization.OptIn)]
public class SearchFormModel 
{

    [JsonProperty("id")]
    public string Id{ get; set; }

} 
```

或者您可以在模型类中包含 sortByText：-

```
[JsonObject(MemberSerialization.OptIn)]
public class SearchFormModel 
{

    [JsonProperty("id")]
    public string Id{ get; set; }
    [JsonProperty("sortByText ")]
    public string SortByText { get; set; }

} 
```

你的 AJAX 会像：-

```
 $.ajax({
    type: 'POST',
    url: Url,
    data: ko.toJSON(self.options.formModel),
    dataType: "json"
  }) 
```

希望我没有走错方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:45:25.857

有时您必须从序列化的 Form 对象中提取数据。我有[一篇关于这个的帖子，](http://blogs.msmvps.com/joelcochran/cors-ajax-and-mvc/)其中包含代码。您正在寻找的部分大约是一半，标题为“POST 数据的问题”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T04:31:56.853

我最终传递了字符串和整数，而不是传递对象不起作用。

# c++ - C++ 错误：不允许类型名称

> ID：15016787
> 
> 赞同：9
> 
> 时间：2013-02-22T04:22:28.033
> 
> 标签：c++

我正在尝试在 Pointer Arguments 中学习我的新课程，并且我想让函数成为高级函数，并且每个人都使用指针 x，但是当我尝试使用指针 page 调用函数时，它显示 Error: Type name is不允许。怎么了？

```
#include <iostream>

int senior(int* x);
int everyoneElse(int* x);

using namespace std;

int main()
{
    int age(0);
    int* pAge(&age);
    cout<<"How old are you?"<<endl;
    cin>>age;
    if(age>59)
        senior(int* pAge);
    else
        everyoneElse(int* pAge);
    return 0;
}

int senior(int* x)
{

return *x;
}

int everyoneElse(int* x)
{

return *x;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T04:24:15.250

```
if(age>59)
    senior(int* pAge);
else
    everyoneElse(int* pAge); 
```

调用函数时不能包含类型名。改成：

```
if(age>59)
    senior(pAge);
else
    everyoneElse(pAge); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T04:23:53.767

```
senior(int* pAge);
else
    everyoneElse(int* pAge); 
```

用。。。来代替

```
senior(pAge);
else
    everyoneElse(pAge); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T04:29:18.137

调用函数时，不必指定传递给函数的参数类型：

```
if(age>59)
    senior(pAge);
else
    everyoneElse(pAge); 
```

参数只能在函数原型和主体函数中按类型指定（像这样：）

```
int senior(int* x)
{

return *x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:28:46.277

你如何调用函数*int Senior(int* x)* 和*int everyoneElse(int* x)* 是错误的调用函数为：**everyoneElse(pAge)**和**int Senior(x)**

见链接 **[http://msdn.microsoft.com/en-us/library/be6ftfba(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/be6ftfba(v=vs.80).aspx)**

# javascript - 从 onClick() 加载完整视图

> ID：15016796
> 
> 赞同：0
> 
> 时间：2013-02-22T04:23:00.977
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4

我不确定如何从 click() 事件加载视图。我不想要部分视图，我需要能够为其提供一个简单的参数：

```
$('#DepartmentsButton').click(function () {
   onDepartmentClick();
});

function onDepartmentClick() {

var self = this;
var selectedId = gridGetSelectedId();

$.ajax({
    url: '/Location/Departments/',
    cache: false,
    type: 'get',
    data: { id: parseInt(selectedId) },
    datatype: 'json',
    success: function (data) {
    },
    error: function (res) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:46:31.817

假设部门是部分视图（强烈推荐）

创建一个 div 来加载你的部分

和JQ：

```
$('#DepartmentsButton').click(function () {
   onDepartmentClick();
});

function onDepartmentClick() {
   $('#divDepartments').load('/Location/Departments/');
}; 
```

* * *

**修订**：用户想要重定向到视图（这实际上意味着重定向到视图的操作（最好有一个——提示提示）

不需要 div

```
$('#DepartmentsButton').click(function () {
   onDepartmentClick();
});

function onDepartmentClick() {
   window.location='/Location/Departments/';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:38:43.220

```
$('#DepartmentsButton').click(function () {
   onDepartmentClick();
}); 
```

什么时候调用这个函数？仅将函数放入代码中并不能使其工作。您需要初始化并调用此函数。

```
$(document).ready( function(){
    $('#DepartmentsButton').click(function () {
       onDepartmentClick();
    });
}); 
```

还有其他几件事是错误的。

您使用参数定义了成功，但它没有做任何事情。该功能本身不存在，同样适用于失败。您仍然需要编写这些函数。

```
success: function (data) {
    //I don't do anything but take up space, put code to execute on data here.
}, 
```

# php - 多维数组，如果数组值存在，则在该值之后创建新数组

> ID：15016807
> 
> 赞同：0
> 
> 时间：2013-02-22T04:24:30.227
> 
> 标签：php, arrays, multidimensional-array

我决定建立一个数组来区分某些值。如果我想在数组中找到某个值，我想使用我搜索过的这个值中的其余数据：

```
Array
(
    [0] => Array
        (
            [id] => 123
            [0] => Array
                (
                    [name] => Burger Joint
                    [pluralName] => Burger Joints
                    [shortName] => Burgers
                )

        )

    [1] => Array
        (
            [id] => 617
            [0] => Array
                (
                    [name] => reeeJoint
                    [pluralName] => reeeJoints
                    [shortName] => reee
                )

        )

    [2] => Array
        (
            [id] => 12355
            [0] => Array
                (
                    [name] => LeftJoint
                    [pluralName] => LeftJoints
                    [shortName] => Left
                )

        )
    [4] => Array
        (
            [id] => 526
            [0] => Array
                (
                    [name] => asdfJoint
                    [pluralName] => asdfJoints
                    [shortName] => asdf
                )

        )
) 
```

我想做某种搜索，如果有一个值`123`，它只会得到一个新数组，其中包含 123 id 数组中的所有内容（在这种情况下是第一个）。

找到这个的最佳做法是什么？

谢谢！

编辑：

根据一些评论，我能够想出一种设置数组的新方法。但是我仍然想知道同样的问题，如果价值存在，用哪种方法来解决：

```
foreach($values as $value)
{
 ...
   $categoriesExtract[$id] = array($category_stringArray2Sugg);
} 
```

给了我这个数组：

```
Array
(
    [123] => Array
        (
            [0] => Array
                (
                    [name] => Burger Joint
                    [pluralName] => Burger Joints
                    [shortName] => Burgers
                )

        )

    [617] => Array
        (
            [0] => Array
                (
                    [name] => reeeJoint
                    [pluralName] => reeeJoints
                    [shortName] => reee
                )

        )

    [12355] => Array
        (
            [0] => Array
                (
                    [name] => LeftJoint
                    [pluralName] => LeftJoints
                    [shortName] => Left
                )

        )
    [526] => Array
        (
            [0] => Array
                (
                    [name] => asdfJoint
                    [pluralName] => asdfJoints
                    [shortName] => asdf
                )

        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:29:02.940

使用此代码。它将在匹配后创建新数组。

```
 $arr = array();
 for($i = 0;$i<count($array);$i++)
 {
     if($array[$i][id] == 123)
     {
          $arr[] = $array[$i][0];
     }
 }
 print_r($arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:30:16.360

为什么不用 id 作为钥匙，然后拔出钥匙呢？

```
$array = Array
(
    [123] => Array
        (
            [name] => Burger Joint
            [pluralName] => Burger Joints
            [shortName] => Burgers
        )

    [617] => Array
        (
            [name] => reeeJoint
            [pluralName] => reeeJoints
            [shortName] => reee
        )
)

$new_array = $array[123]; 
```

您有 2 个 ID 为 123 的项目，这意味着这种情况不起作用，但在您的问题中，您表示您希望返回第一个值。ID 上的加倍是错误，还是可以合法发生的事情，因为这意味着这不是一种合适的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:55:08.293

你可以简单地这样做：

```
$array = array(0 => 
                  array('id' => 123,
                        0 => array('name' => 'Burger Joint',
                                   'pluralName' => 'Burger Joints',
                                   'shortName' => 'Burgers')
                                   )
                );

$new_array =  array();
foreach($array as $value){
   $new_array[$value['id']][] = $value[0];
} 
```

输出将是

```
Array
(
    [123] => Array
        (
            [0] => Array
                (
                    [name] => Burger Joint
                    [pluralName] => Burger Joints
                    [shortName] => Burgers
                )

        )

) 
```

干杯！！！！

在此处查看工作演示[工作演示链接](http://codepad.org/gO7tQz3n)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:57:15.193

试试这个解决方案：在这里更改`$find`数组中的值以搜索 id

```
$array  = Array(Array("id" => 123,0 => Array("name" => "Burger Joint","pluralName" => "Burger Joints","shortName" => "Burgers")),
                Array("id" => 617,0 => Array("name" => "reeeJoint","pluralName" => "reeeJoints","shortName" => "reee")),
                Array("id" => 12355,0 => Array("name" => "LeftJoint","pluralName" => "LeftJoints","shortName" => "Left")),
                Array("id" => 526,0 => Array("name" => "asdfJoint","pluralName" => "asdfJoints","shortName" => "asdf"))
                );
$find   = array(123,526); /// Get all the array with this id

$result = array();
foreach($array as $vals){
    if(in_array($vals['id'],$find)){
        $result[]  = $vals;
    }
}

echo "<pre>";
print_r($result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T05:06:56.290

我想我只是让一些简单的事情变得更复杂......

由于这些建议，我只能通过这样做来获得数组

$数组（123）；=> 这只会让我得到值为 123 的数组...

# web-applications - LiveFyre 订阅帖子

> ID：15016822
> 
> 赞同：0
> 
> 时间：2013-02-22T04:26:13.753
> 
> 标签：web-applications, social-networking, livefyre

我已成功将 livefyre 安装到允许用户发布内容的网站上。我一直在寻找是否可以为会员订阅与他们的帖子相关的评论，即发送电子邮件。

有没有人这样做过？是否可以？你会怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:43:08.060

Livefyre 评论小部件有一个关注按钮，允许拥有 Livefyre 帐户的任何人获取有关该对话中每条新评论的电子邮件通知。当有人在对话中发表评论时，他们也会自动关注对话。

您可以要求您的成员单击关注按钮以就他们自己的内容进行对话。此支持文章包含有关[关注对话的更多信息](http://support.livefyre.com/customer/portal/articles/8144-how-do-i-follow-or-unfollow-a-conversation-)

# android - android上的html5视频-意外的currentTime行为

> ID：15016823
> 
> 赞同：0
> 
> 时间：2013-02-22T04:26:18.770
> 
> 标签：android, html, html5-video

我在 Android 平板电脑上加载的页面上有一个视频元素。有一个带有以下事件侦听器的自定义播放按钮：

```
play_button.addEventListener("click", function () 
   { video.play(); tap_to_play.innerHTML = ''; 
     video.currentTime = offset; 
     console.log(video.currentTime); }, false); 
```

我第一次按下按钮时，它会跳到错误的时间。记录的 currentTime 将为 100，即使视频似乎跳到大约 1400。如果我在播放时再次按下按钮，或者暂停并再次按下按钮，它将转到正确的时间。我怎样才能让它第一次跳到正确的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:26:56.527

您可以使用“可搜索的” [TimeRange](http://www.w3.org/TR/2011/WD-html5-20110113/video.html#dom-media-seekable)对象来确定视频文件是否可以实际搜索到该位置 - 否则它将无法工作。这是一个简单的函数，`true`如果所需时间在范围内，则返回：

```
function isSeekable(video, time) {
  if(video.seekable && video.seekable.length>0) { 
    for(var i=0, l=video.seekable.length; i<l; i++) {
      if(time>video.seekable.start(i) && time<video.seekable.end(i)) 
        return true;
    }
  }
  return false;
} 
```

查看下面的 jsbin 以获取适用于 Android 4.1 的示例。它可能也适用于 3.1，但您将很难找到支持 2.3 或更低版本的解决方案：

[http://jsbin.com/udovax/1/edit](http://jsbin.com/udovax/1/edit)

（我有兴趣找到一个更好的事件来连接它 - 我使用的超时是一个快速而丑陋的黑客）

# haskell - 基于 web 的 haskell 分析器

> ID：15016824
> 
> 赞同：3
> 
> 时间：2013-02-22T04:26:31.387
> 
> 标签：haskell

我隐约记得几个月前在reddit 上看到一个本地托管的基于Web 的haskell 应用程序分析器，即分析器启动一个本地网页并在那里提供haskell 代码的分析信息。这还存在吗？我找不到我最初看到的博客，或者任何地方的实际分析器。我不记得原来的名字了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T05:13:10.243

您可能正在考虑[心电图](http://hackage.haskell.org/package/ekg)包。

是[这篇](http://ocharles.org.uk/blog/posts/2012-12-11-24-day-of-hackage-ekg.html)博文吗？

# c# - 多线程和列表框

> ID：15016825
> 
> 赞同：0
> 
> 时间：2013-02-22T04:26:34.940
> 
> 标签：c#, multithreading

我要做的是获取并删除具有多个线程的列表框中的第一项，尽管我需要防止线程使用相同的项目。

例如：线程 1 和 2 都抓取 1，并尝试删除 1，但在此过程中，两个线程都使用相同的变量，并且 1 和 2 都被删除，因为我使用的是 removeat(0)。

## Ex 列表框

1

2

我将如何管理线程以使它们不使用/删除错误的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:30:56.663

您可以搜索列表中的特定项目并将其删除......

```
 foreach (string item in toRemove)
 {
   listbox.Remove(item);
 } 
```

或者.........

如果要为其分配数据源，则再添加一个 UNIQUE 列，例如主键，并基于该唯一列，您可以从 LISTBOX 中删除项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:37:53.813

您可以将线程锁定在引用（也许是列表？）的整个过程中

1.  查找项目
2.  如果找到，则删除该项目

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:42:18.263

访问列表框项目时使用锁定。使用相同的对象在任何地方进行锁定。

[http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)

# fonts - 设置 JavaFx ComboBox 字体？

> ID：15016826
> 
> 赞同：4
> 
> 时间：2013-02-22T04:26:35.987
> 
> 标签：fonts, combobox, javafx-2

我试图在 JavaFx 上更改 ComboBox 字体，所以我有：

> `ComboBox cbCategoria = new ComboBox();`

我是 javaFx 的新手，所以一些示例代码会很棒 :D，没有 CSS 的方法吗？如果不是，我怎么能用 CSS 做，我还没有学会如何使用 CSS 样式:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T11:40:06.653

我认为没有CSS就没有办法做到这一点。您可以将样式分配给该组件，如下一个示例所示：

```
VBox vbox = new VBox(10);
vbox.setAlignment(Pos.CENTER_LEFT);

ComboBox<String> noStyled = new ComboBox<>();
noStyled.getItems().addAll("One", "Two", "Three");

ComboBox<String> styled = new ComboBox<>();
styled.setPrefWidth(150);
styled.getItems().addAll("One", "Two", "Three");
styled.setStyle("-fx-font: 30px \"Serif\";");

vbox.getChildren().addAll(noStyled, styled);
Scene scene = new Scene(vbox);
stage.setScene(scene);
stage.show(); 
```

或者，您可以将样式表分配给应用程序。在这两种情况下，我建议您阅读oracle 网站中的[教程 CSS 部分和](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)[参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T09:57:38.853

```
VBox vbox = new VBox(10);
vbox.setAlignment(Pos.CENTER_LEFT);

ComboBox<String> noStyled = new ComboBox<>();
noStyled.getItems().addAll("One", "Two", "Three");

ComboBox<String> styled = new ComboBox<>();
styled.setPrefWidth(150);
styled.getItems().addAll("One", "Two", "Three");
styled.setStyle("-fx-font: 30px \"Serif\";");

vbox.getChildren().addAll(noStyled, styled);
Scene scene = new Scene(vbox);
stage.setScene(scene);
stage.show(); 
```

仅供参考。如果你想使用上面的代码设置组合框的大小。你应该像这样尝试

```
styled.setPrefWidth(150);
styled.setMinHeight(30); 
```

代替，

```
 styled.setPrefSize(150,30); 
```

如果你这样设置，你会得到异常。我在这方面遇到了困难。希望它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-29T12:42:21.620

// 我还没有学会如何使用 CSS 样式 :( //

--> 那你可以试试这个

```
ComboBox cbCategoria = new ComboBox();
cbCategoria.getEditor().setFont(Font.font("Verdana", FontWeight.EXTRA_BOLD, 14)); 
```

# python - 在 python pandas 中向数据框添加年龄范围

> ID：15016831
> 
> 赞同：1
> 
> 时间：2013-02-22T04:27:30.180
> 
> 标签：python, numpy, pandas

我是一个新手，并且已经对我的方法有了一些了解，但希望有人能告诉我如何将一列添加到具有基于另一列中的出生日期的年龄范围的数据框中。例如，如果：df.DOB.isbetween(1/1/2007,12/31/2012) 那么 df['ageband']="0to5"

在 excel 中，我为此使用了 vlookup 函数。几个小时以来，我一直在努力寻找解决方案。我至少能够弄清楚如何获得真假标志......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T04:52:11.640

您可以使用[`.apply()`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html)对列中的每个值执行给定的函数。我认为这样的事情应该有效：

```
def get_ageband(value):
    ageband = None
    if value.isbetween(1/1/2007,12/31/2012):
        ageband = "0to5"
    return ageband

df["ageband"] = df.DOB.apply(get_ageband) 
```

# algorithm - 块布局算法

> ID：15016832
> 
> 赞同：12
> 
> 时间：2013-02-22T04:27:34.777
> 
> 标签：algorithm, bin-packing

我正在寻求帮助以改进放置奇怪形状块的算法。我的问题域很奇怪，但我的块最好的类比是俄罗斯方块，除了它们可以有四个以上。这些块仍然仅由直角组成，但它们可以是长而弯曲的，它们可以分支，等等。

我试图在最小的空间中安排多个任意形状的大块（我知道，一个装箱问题），但我目前的解决方案看起来很难看。我基本上是放置一个，然后通过尝试将它们放置在我的网格的原点来强制其余的，然后慢慢地将它们推向不同的方向，直到它们不再碰撞。它并不慢，但它并没有尝试很好地安装部件，因此它们不会浪费整体空间。

我唯一能想到的尝试是按大小对积木进行排序，首先放置最大的，然后将最小的放在最后的任何孔中。但肯定有一些方法会适得其反。

有什么启发式或近似算法可以帮助我吗？

结果如下所示：

![在此处输入图像描述](../Images/7884174d5bf4c2438630502e31be1693.png)

另外，也许我的 gravatar 表明这与洛克人有关……

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T06:58:53.513

这个（polyomino shape-packing）通常似乎是一个不平凡的数学问题，我将向您指出其他一些研究它的人的专业知识。这个人在他的网站上有一堆多米诺骨牌示例，其他人可以在其中提交解决方案。他还拥有 Java 求解器软件：

[http://gp.home.xs4all.nl/Site/Polyomino_Solver.html](http://gp.home.xs4all.nl/Site/Polyomino_Solver.html)。

[http://gp.home.xs4all.nl/PolyominoSolver/downloadsolver.htm](http://gp.home.xs4all.nl/PolyominoSolver/downloadsolver.htm)

Stephen Montgomery-Smith 也为此编写了一些算法，这些算法似乎比上面的更全面（它解决了一些无法解决的问题）最终将它变成了一个 xscreensaver（实时解决并且很酷观看！）。以下屏幕保护程序中的屏幕截图仅显示最多五联骨牌的形状，但它适用于具有通用容器的通用形状。

[http://www.math.missouri.edu/~stephen/software/](http://www.math.missouri.edu/~stephen/software/)

我不确定这些软件中的任何一个是否接近允许孔的多联骨牌的最佳拟合。但这种方式绝对是“可决定的”，因为您当然可以在您的解决方案中插入额外的 1x1 多骨牌，看看它是否能找到适合的特定结果，然后移除 1x1 块以获得结果。

![在此处输入图像描述](../Images/779a2e31ea3304b287c4f0a3db8ef1af.png)

对于您的应用程序，向后工作可能更有效。所有这些算法在每个块中的单元格数量上都具有复杂性。布置块的一个好方法是将它们视为较大单元格中的“细分”，以便块中的 3x3 正方形对应于重新缩放版本中的 1x1 正方形。然后，用空白空间填充块，使它们都包含较大的块，运行算法，并去除多余的空间。这不仅执行起来要快得多，而且还会在您需要的块之间生成空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-30T21:49:21.530

有趣的问题。

定义一个势场，因此每个单元格对其他所有单元格都有引力。另外，对相邻小区之间的刚性关系有严格的限制。可选地附加排斥力，可能基于距离的立方。这样，远处的方块就会相互吸引，直到它们遇到一个阻止它们相互接触的区域。

定义了这样一个场之后，让每个块找到它的局部梯度并平滑地向下滑动就很简单了。

局部最优是可能的。以不同的起始位置重新运行几次。您需要定义一个目标函数，该函数可以对竞争提出的解决方案进行排序。

您还可以暂时在某个随机位置插入一个排斥场，以使块脱离局部最优。

# c# - 如何让我的 VS 扩展显示在扩展管理器中？

> ID：15016834
> 
> 赞同：0
> 
> 时间：2013-02-22T04:27:50.930
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio-extensions

我正在创建我的第一个 Visual Studio 扩展，我想知道如何让我的扩展显示在 Visual Studio 扩展管理器中。

如果你去工具>扩展管理器你会看到我指的是什么。

当您在那里查看扩展程序时，它允许您启用/禁用它，并且它包括对它的描述和缩略图。

我猜我必须修改其中一个文件中的 XML 才能做到这一点。虽然我不确定在哪里或如何。到目前为止，当我调试时，我的扩展并没有显示在那里。即使我创建了一个标准扩展包，它也没有。

扩展必须首先在 Visual Studio 扩展库中吗？我的扩展针对 VS 2005-2012，用 C# 和 vb.net 编写。（扩展项目本身是 C#）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T03:18:56.970

由于您的“扩展”是针对 VS2005，我猜它是一个加载项，而不是一个扩展。扩展仅针对 VS2010 及更高版本。除非你将你的东西重新打包为一个扩展（这需要一些重要的代码编辑），否则没有办法把它弄到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:38:08.220

不确定您在寻找什么...请查看 [Visual Studio Extension](http://www.codeproject.com/Articles/446955/Web-Search-Visual-Studio-Add-in-Search-Google-Yaho)

# gtk - 使用 Mac OSX 找不到包“atk-bridge-2.0”

> ID：15016835
> 
> 赞同：1
> 
> 时间：2013-02-22T04:28:08.863
> 
> 标签：gtk, wireshark

尝试在 Mac OSX 10.7.5 中安装 gtk+-3.7.10 作为 Wireshark 要求。并未能收到错误：

**找不到包“atk-bridge-2.0”**

我在我的 PKG_CONFIG_PATH 中安装并引用了 atk

```
checking for ATK... no
configure: error: Package requirements (atk atk-bridge-2.0) were not met:

No package 'atk-bridge-2.0' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables ATK_CFLAGS
and ATK_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

我使用 **./configure --without-atk-bridge**，但似乎标志不再可用 [http://osdir.com/ml/commits.gnome/2012-06/msg06188.html](http://osdir.com/ml/commits.gnome/2012-06/msg06188.html) 我最终做了这个黑客：

```
if test x$enable_x11_backend = xyes; then
   #ATK_PACKAGES="atk atk-bridge-2.0"
   ATK_PACKAGES="atk"
else
   ATK_PACKAGES="atk"
fi 
```

评论 atk-bridge-2.0，不知道有什么影响。问题：

1.  如何安装 atk-bridge-2.0？
2.  把它留给 Wireshark 可以吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:50:49.997

使用了处理依赖关系的 macosx-setup.sh。

# php - php fread文件函数

> ID：15016837
> 
> 赞同：3
> 
> 时间：2013-02-22T04:28:19.493
> 
> 标签：php, file

我编写了以下代码来两次输出文件的内容。但它只做了一次。这是为什么？

文本文件内容如下：

```
My name is Sam. Sam I am.
My name is Chris and Chris I am.
The brown fox jumped over the fence. 
```

代码如下：

```
<?php
$file = "files/info.txt";
$handle = fopen($file, "rb");
echo fread($handle, filesize($file));
echo fread($handle, filesize($file));
?> 
```

输出：

```
"My name is Sam. Sam I am. My name is Chris and Chris I am. The brown fox jumped over the fence." 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T04:33:05.453

调用 fread() “用完”文件，为了再次 fread() ，您必须使用 rewind($handle) 将读取指针移回文件的开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:46:44.467

对于第一次**fread()**，文件指针移动到文件末尾，因此第二次没有打印任何内容。执行下面的代码，你就知道了。

```
<?php
$file = "info.txt";
$handle = fopen($file, "rb");
echo fread($handle, filesize($file)-10);
print "-----";
echo fread($handle, filesize($file));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:40:18.823

这是因为您已经使用该句柄阅读了全部内容。句柄是指向文档的指针。如果您要像这样只读取文件的第一个字节（比如前 10 个字节）。

```
fread($handle, 10); 
```

然后下次你调用 fread() 时，它会从你离开的地方开始。

在您的示例中，第一次调用 fread() 您使用文件大小，这使您的指针指向文件末尾。下一次你调用 fread，没有什么可以返回，因此你的“回声”回声没有任何返回。

希望这会有所帮助，请查看 php 文档中的 fread() 和其他文件处理函数以在 php.net 获得更多解释

# graph - 寻找关键路径？

> ID：15016843
> 
> 赞同：3
> 
> 时间：2013-02-22T04:28:46.490
> 
> 标签：graph, uml, project-management, activity-diagram

你能告诉我下图的关键路径是什么。是： `a->c->f` 还是`a->d->g` 两者兼而有之

**我使用下表绘制了网络图：**

![在此处输入图像描述](../Images/b8fb65bc81688fece2a9b38ce5262df3.png)

**网络图：** ![在此处输入图像描述](../Images/169c5d46787d26a396f7ef98411a3817.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:40:41.650

假设网络图是正确`a->c->f`的，成本为 6 + 6 + 9 = 21。 `a->d->g`成本为 6 + 7 + 7 = 20。因此`a->c->f`将是最长（因此也是关键）路径。

请注意，我没有考虑原始表格中的任何崩溃持续时间、成本等。人们应该每周工作 40 小时，而不是“崩溃”。:)

# asynccallback - 如何将参数传递给回调函数。

> ID：15016848
> 
> 赞同：0
> 
> 时间：2013-02-22T04:29:27.467
> 
> 标签：asynccallback

这是我的代码。如何在回调函数中获取 for 循环的值。我需要在回调中访问 gradableGBItems[i].Title

```
for(var i=0; i < gradableGBItems.length ; i++)
        {
            //console.log(gradableGBItems[i].isGradable);
            //console.log(gradableGBItems[i].id);
            var resultItem='';

            Title=gradableGBItems[i].title;
            //console.log(Title);
            //console.log(gradableGBItems[i].id);
             gradeBookbRestService.loadGradeBookItemByItemId(token, gradableGBItems[i].id,   function(resultItem) {

                   //Console.log();  //Need to access value

                    if(resultItem.grade != null || resultItem.grade != undefined)
                     {
                         //console.log(resultItem.points);
                        jsonObj.push({id:resultItem.grade.id, comments:resultItem.grade.comments, isVisible:resultItem.grade.isVisible, letterGrade:resultItem.grade.letterGrade,  points: resultItem.grade.points, title: Title } ); 

                        console.log(jsonObj);
                     }

            });

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:57:06.590

您的对象超出了匿名回调的范围。解决此问题的一种可能方法是创建一个回调函数并将其传入：

```
var gradeBookItemCallback = function(gradeableItemTitle, next){
  return function(resultItem){
    //do something with gradeableItemTitle and/or resultItem.
    next(); //call the callback.  You could pass whatever you wanted to here as well. 
  }
}); 
```

它将像这样使用：

```
gradeBookbRestService.loadGradeBookItemByItemId(token, gradableGBItems[i].id, gradeBookItemCallback(Title, callbackFunctionHere)); 
```

# mysql - MySQL 如何将所有 NEW/OLD 触发器数据放入临时表并在过程中使用？

> ID：15016851
> 
> 赞同：0
> 
> 时间：2013-02-22T04:29:42.253
> 
> 标签：mysql, stored-procedures, triggers, procedure, temp-tables

如何将 NEW/OLD 数据放入没有文件名的临时表中。我试过创建触发器，像这样的过程，但它失败了：

```
 CREATE TRIGGER `after_insert` AFTER INSERT
ON `master`
FOR EACH ROW BEGIN
    CREATE TEMPORARY TABLE after_insert_trigger_temp_table ENGINE=MEMORY 
    AS (SELECT NEW.*);
    CALL after_insert_action();
END$$ 

```

```
 CREATE PROCEDURE `after_insert_action`()
BEGIN
    INSERT INTO `slave` (`name`,`detail`)
    SELECT `name`,`detail` FROM after_insert_trigger_temp_table;
END$$ 

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:12:26.623

你看到它说的部分`FOR EACH ROW`......

> 下面的语句`FOR EACH ROW`定义了每次触发器激活时要执行的语句，触发语句**影响的每一行都会发生一次。**-- [http://dev.mysql.com/doc/refman/5.5/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.5/en/trigger-syntax.html) *（强调）*

因此，您建议为使用触发器插入表*中的每一行*`NEW`创建一个新的临时表，以某种方式访问​​所有使用. `*`插入该表，然后调用存储过程，并通过从该临时表中选择两列（大概您知道在原始表中）插入到*不同的表中。*在某些时候，临时表当然需要消失，因为如果您在一个查询或一个会话中向表中插入超过 1 行，那么您正在尝试创建一个与一个同名的临时表已由您的会话拥有。

我从来没有在触发器或文档中遇到过 OLD.* 或 NEW.* 包罗万象，无论如何，除了可能避免输入两个列名或更改的能力之外，您根本不清楚您要完成什么您在不更新此触发器的情况下使用存储过程跟踪的内容。

但是对于触发器，您需要牢记的一个关键设计因素是，它们应该尽可能高效地执行尽可能少的操作，因为如果您不遵守此规则，它们很有可能成为性能问题。

想到了几种替代方法，因为根据问题中的细节临时表没有意义：

选项1：

```
CREATE TRIGGER `after_insert` AFTER INSERT ON `master` FOR EACH ROW 
BEGIN
    INSERT INTO `slave` (`name`,`detail`) VALUES (NEW.`name`,NEW.`detail`);
END $$ 
```

选项 2：

```
CREATE TRIGGER `after_insert` AFTER INSERT ON `master` FOR EACH ROW 
BEGIN
    CALL after_insert_action(NEW.`name`,NEW.`detail`);
END $$

CREATE PROCEDURE `after_insert_action`(in new_name TEXT, in new_detail TEXT)
# you may want to use more appropriate datatypes instead of TEXT
# but this should work as written as long as those columns are no larger than TEXT
BEGIN
    INSERT INTO `slave` (`name`,`detail`) VALUES (new_name, new_detail);
END$$ 
```

# vb.net - 仅限 vb 应用程序中的 XY 坐标

> ID：15016853
> 
> 赞同：0
> 
> 时间：2013-02-22T04:29:44.810
> 
> 标签：vb.net

我正在学习视觉工作室，只是创建随机应用程序。我想知道是否有办法只在 vb 应用程序窗口内而不是在它之外获取鼠标的 x 和 y 坐标？我尝试过这样的事情`TextBox1.Text = MousePosition.X : TextBox2.Text = MousePosition.Y`，但这给了我整个屏幕的 x 和 y。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:34:27.803

在表单中附加[MouseMove](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousemove.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)事件处理程序。

```
Private Sub Form1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles MyBase.MouseMove
   Label1.Text = "X." & e.X & vbCrLf & "Y." & e.Y
End Sub 
```

# javascript - Chrome 扩展将消息传递到后台页面

> ID：15016855
> 
> 赞同：2
> 
> 时间：2013-02-22T04:29:56.457
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

我正在尝试构建一个 Google Chrome 扩展程序，它可以从内容脚本向后台页面发送消息，并根据发送的消息显示警报。

清单.json

```
{
  "manifest_version": 2,

  "name": "fb_rainbow",
  "description": "Change Facebook Themes Colors",
  "version": "1.1",
  "background": {
  "page":"background.html"
  },
  "browser_action": {
        "default_icon": "icon.png",
        "popup":"popup.html"
    },
"permissions": [
    "tabs",
    "http://*/*",
    "https://*/*",
    "notifications",
    "contextMenus",
    "background"
],
"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'",
"web_accessible_resources":["injectin.js"],
  "content_scripts": [
    {
      "matches": ["*://*.facebook.com/*"],
      "js": ["color_change.js"]
    }
  ] 
```

color_change.js（有效并且可以得到警报）

```
chrome.extension.sendMessage( {message:'execute'} , function() { alert('message sent!'); }); 
```

背景.html

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) { 
if(request.message=="execute"){
    alert("message received!");
}else if{
    alert("message not received!");
}
}); 
```

但我没有收到来自后台页面的任何警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:59:06.510

# 代码中的问题

```
if(request.message=="execute"){
    alert("message received!");
}else if{
    alert("message not received!");
} 
```

java脚本中没有`else if{`使用`else {`。

# 工作版本

### 背景.html

```
<html>
<head>
<script src="background.js"></script>
</head>
<body>
</body>
</html> 
```

### 背景.js

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) { 
if(request.message=="execute"){
    alert("message received!");
}else{
    alert("message not received!");
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:58:16.660

js中有***else if***，但应该是***else if()***。所以你省略了***else if()***。在你的情况下，***else***就足够了。

# javascript - 没有导航工具栏的 Window.open

> ID：15016856
> 
> 赞同：-2
> 
> 时间：2013-02-22T04:29:59.837
> 
> 标签：javascript, asp.net, html

我正在使用下面的代码打开一个没有导航工具栏的新弹出窗口。但它是用导航工具栏打开的。请帮我解决我的问题。

```
<script type="text/javascript">
function loadUrl1(newLocation)
{
myRef = window.open('newLocation','mywin',
'left=20,top=20,width=500,height=500,toolbar=0,resizable=0,status=0,location=0,address=0');
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:34:19.283

弹出脚本：

```
<script language="javascript" type="text/javascript">
   function popitup(url) {
        newwindow=window.open(url,'name','height=200,width=150');
        if (window.focus) {newwindow.focus()}
        return false;
    }       
</script> 
```

然后，您通过以下方式链接到它：

```
<a href="popupex.html" onclick="return popitup('popupex.html')">Open popup</a> 
```

这是另一个参考：

[http://www.gtalbot.org/BugzillaSection/Bug195867GDR_WindowOpen.html](http://www.gtalbot.org/BugzillaSection/Bug195867GDR_WindowOpen.html)

# html - 使用 div 的 html 3 行布局

> ID：15016862
> 
> 赞同：0
> 
> 时间：2013-02-22T04:30:33.033
> 
> 标签：html, css, layout, web

我有 3 行页眉、页脚和内容，但我的内容 div 太大，使窗口滚动。如何将内容固定在页眉和页脚之间以及如何更改高度以便不必滚动窗口

我的 index.php

```
<body> 
<div id="container">
    <div id="header">

    </div>
    <div id="content">

    </div>
    <div id="footer">

    </div>
</div>
</body> 
```

我的 CSS

```
 body {
margin:0;
padding:0;
}
div#header{
width:100%;
height:65px;
position:relative;
top:0;
background-color:#F00;
 } 

div#footer{
width:100%;
height:65px;
position:relative;
bottom:0;
background-color:#06F;
}
div#content{
background-color:#9F0;
width:100%;
height:100%;
    } 
```

这是它在顶部的样子：[链接](http://i45.tinypic.com/2u6k955.png)

这是滚动到底部后的样子：[link 2](http://i50.tinypic.com/jqomzp.png)

我希望页眉（红色）、页脚（蓝色）和内容（绿色）的高度为 100%，这样我就不必滚动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:49:43.190

这就是你想要的。

[演示](http://jsfiddle.net/w7R5D/1/)

**在您的代码中，我编辑了-**

```
body {
margin:0;
padding:0;
}
div#header{
width:100%;
height:65px;
position:fixed;
z-index:100;
background-color:#F00;
 } 

div#footer{
width:100%;
height:65px;
position:fixed;
bottom:0;
background-color:#06F;
}
div#content{
background-color:#111;
width:100%;
height:100%;
position:absolute;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T04:47:07.780

您需要告诉 body 也为 100% 高，以便表格可以拉伸到窗口大小，然后将 body 定义为 table，每个 div 定义为一行。

CSS：

```
html,
body {
    display: table;
    height: 100%;
    margin: 0;
    width: 100%;
}

#header,
#footer {
    background: #ff0000;
    display: table-row;
    height: 65px;
}

#content {
    background: #000;
    display: table-row;
    height: 100%;
} 
```

html:

```
<body> 
    <div id="header">&nbsp;</div>
    <div id="content">&nbsp;</div>
    <div id="footer">&nbsp;</div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:35:37.170

使页眉和页脚高度为 10%，内容为 80%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:36:34.220

尝试按如下方式更改您的内容 div：

```
div#content{
background-color:#9F0;
width:100%;
height:80%;
overflow:auto;
} 
```

如果它不起作用，请尝试 height:700px;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-01T18:01:36.140

```
 <html>
    <head>
    <style>
    html,
    body {
       margin:0;
       padding:0;
       height:100%;
    }
    #container {
       min-height:100%;
       position:relative;
    }
    #header {
       background:#ff0;
       padding:10px;
       height:150px;    
    }
    #body {
       padding:10px;
       padding-bottom:260px;   /* Height of the footer */
    }
    #footer {
       position:absolute;
       bottom:0;
       width:100%;
       height:260px;   /* Height of the footer */
       background:#6cf;
    }

    </style>
    <script>

    </script>
    </head>
    <body>
    <div id="container">
       <div id="header"></div>
       <div id="body">
    </div>
       <div id="footer"></div>
    </div>

    </body>
    </html> 
```

此代码支持未固定的内容 div。只有页脚高度必须固定。这是迄今为止我遇到的最好的代码。

# jquery - 移除子元素

> ID：15016867
> 
> 赞同：3
> 
> 时间：2013-02-22T04:31:19.320
> 
> 标签：jquery

如何删除*foo* `label`以及`div`子元素和`br`'s？

```
<label>qux</label>
<label>foo</label><div id="block">text</div><br /><br />
<label>bar</label> 
```

我目前的临时方法：

```
$('label:contains("foo")').next().remove();
$('label:contains("foo")').remove(); 
```

我该如何改进呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-23T18:53:39.743

非常简单：

$(元素).children().remove();

太简单...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-22T05:20:00.130

就`did on what html you posted`在这里。

试试这个：

```
 $('label:contains("foo")').remove(); // <-----------label contains foo removed
 $('#block').remove(); //<---------------------------div with id 'block' removed
 $('label:contains(qux)').nextAll('br').remove(); //<--finally all the br next to first label removed 
```

[**在小提琴上结帐**](http://jsfiddle.net/w25eA/)

甚至更好的`.nextUntil()`：

```
$('label:contains("qux")').nextUntil($('label:contains(bar)'),$('label, br')).remove(); 
```

[**为`.nextUntil()`**](http://jsfiddle.net/w25eA/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T04:36:29.030

使用 .html() 方法并将其设置为 null。

检查[此](https://stackoverflow.com/questions/1309452/how-to-replace-innerhtml-of-a-div-using-jquery)以供参考

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T04:59:57.087

```
if($("label").text()=='foo'){
   $(this).next('div').remove();
   $(this).closest('br').remove(); 

   // I've used next and closest methods to remove..you can try with others..
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T04:37:08.353

我没有看到改善 foo 删除的好方法`<label>`。`div`您可以通过使用在语法上改进对 的删除

```
$('label:contains("foo") + div').remove(); 
```

CSS 相邻兄弟选择器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T04:51:44.247

试试这个：

```
$('label').each(function(){
    var self = $(this);
    if(self.text() == 'foo'){
          self.next('div').remove();
          self.parent().find('br').remove(); //else use two times next() to remove two br tags.
          self.remove();
    }
}); 
```

请在 中提及父元素`.parent()`，如下所示：

```
parent('div')  //if you have a parent container as div. 
```

# c# - 提供一个代理来解析 Autofac 中注册的开放泛型

> ID：15016869
> 
> 赞同：0
> 
> 时间：2013-02-22T04:31:38.127
> 
> 标签：c#, generics, autofac

我有一个这样的界面：

```
ICreator<T> {} 
```

我想要做的是让用户像这样解决依赖关系：

```
var creator = container.Resolve<ICreator<IUser>>(); 
```

诀窍是我希望能够为`ICreator<T>`. 就我而言，我有一个`Creator<T, TConcrete>`带有构造函数的构造函数，该构造函数采用具有泛型的类型，该类型使用`TConcrete`. 按照惯例，我知道`TConcrete`应该给什么类型`T`定义 in `ICreator`，但`RegisterGeneric`似乎它没有给我我需要的东西，它是创建`Creator<,>`实例的委托。

或者也许这在 Autofac 中确实存在而我错过了它？任何见解将不胜感激 - TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:37:10.870

使用`OnActivating`and`ReplaceInstance`是完成我需要的必要钩子：

```
builder.RegisterGeneric(typeof(FakeCreator<>)).As(typeof(ICreator<>)).OnActivating(args =>
    {
        // ...
        args.ReplaceInstance(new Creator<...,...>());
    }); 
```

它并不完美，因为 Autofac 将创建配置的泛型类型的实例，但它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:09:21.720

您可以为具体类型注册特定的创建者。样本：

```
public interface ICreator<T>
{
    void WriteName();
}

public class Creator<T> : ICreator<T>
{
    public void WriteName()
    {
        Console.WriteLine("I'm standard creator: " + typeof(T).FullName);
    }
}

public class CustomIntCreator : ICreator<int>
{
    public void WriteName()
    {
        Console.WriteLine("I'm custom int creator");
    }
}

class Program
{
    static void Main(string[] args)
    {
        ContainerBuilder cb = new ContainerBuilder();
        cb.RegisterGeneric(typeof (Creator<>)).As(typeof (ICreator<>));
        cb.RegisterType<CustomIntCreator>().As<ICreator<int>>();
        var container = cb.Build();

        var intCreator = container.Resolve<ICreator<int>>();            
        var standardCreator = container.Resolve<ICreator<double>>(); 
        intCreator.WriteName(); //writes "I'm custom int creator"
        standardCreator.WriteName(); //writes "I'm standard creator: System.Double"

        Console.ReadLine();
    }
} 
```

# jquery - StopPropogation - 无法禁用父锚标记

> ID：15016870
> 
> 赞同：0
> 
> 时间：2013-02-22T04:31:38.003
> 
> 标签：jquery, click, stoppropagation

我目前正在尝试更改单击时子元素的颜色。父元素链接到另一个页面。我希望 stopPropogation 会起作用，但事实并非如此。以下是我的 jQuery 代码：

```
$('.child').click(function(){

    if($(this).hasClass('pinned')){

        $(this).removeClass('pinned')

    }

    else{

        $(this).addClass('pinned')

    }

}); 

    // disable parent link when pinning

    $('.child').click(function(event){

        event.stopPropagation();

    }); 
```

如果重要的话，锚标签会围绕祖父母。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:35:29.260

```
$('.child').click(function(e) {
    if($(this).hasClass('active')){
        $(this).removeClass('pinned');
    }
    else {
        $(this).addClass('pinned');
    }
    e.stopPropagation();
    return false;
}); 
```

您可以`e.stopPropagation`在相同的功能中使用。

# marklogic - 代表 MarkLogic 目录中所有文档的 ms-excel 兼容 csv 文件

> ID：15016876
> 
> 赞同：4
> 
> 时间：2013-02-22T04:32:34.883
> 
> 标签：marklogic

如何最好地使用Java 客户端制作一个表示 MarkLogic 目录中所有文档的`MS-Excel`兼容文件，并且两者都位于远程。目录中的文档数量约为 15000。`csv``XCC``Tomcat``Marklogic`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:51:42.443

第一部分，获取目录中的所有文档，为我们准备好[避免 XDMP-EXPNTREECACHEFULL 和加载文档](https://stackoverflow.com/questions/14679746/avoiding-xdmp-expntreecachefull-and-loading-document)

```
cts:search(
  collection(),
  cts:directory-query('path/to/documents/', 'infinity')) 
```

正如我在那里的回答中所指出的，如果您需要进一步的限制，您可以`cts:and-query`使用`cts:directory-query`其他`cts:query`条款。

接下来，您需要将每个 XML 文档转换为 CSV。这相当简单，但您必须知道您的 XML 的结构或有某种方式来推断它。对于这个例子，我会说我总是在某个根元素下有简单的子元素`a`, `b`, 。因此查询需要为这些元素生成一个 CSV 标题，然后是 CSV 行。`c``d`

我们可能还想从调用者那里提交目录 URI。如果您使用的是 REST，这将使用`xdmp:get-request-field`，但对于 XCC，它是一个外部值。

```
declare variable $DIRECTORY-URI as xs:string external ;

declare function local:csv($root as element()) as xs:string
{
  string-join(($root/a, $root/b, $root/c, $root/d), ',')
};

'A,B,C,D',
cts:search(
  collection(),
  cts:directory-query($DIRECTORY-URI, 'infinity'))/local:csv(*) 
```

同样，`local:csv`为您的应用程序工作需要一些 XML 知识或某种方式来推断其结构。您可能还需要将一些值放在双引号中。但这种基本结构是解决问题的最有效方法之一。我避免使用任何 XQuery FLWOR 表达式，以便结果可以流式传输。

另一种方法是使用范围索引和[http://docs.marklogic.com/cts:value-tuples](http://docs.marklogic.com/cts:value-tuples)来`cts:query`限制结果，然后将 JSON 转换为 CSV。这将更加有效，因为不会获取任何片段。但这不适用于某些 XML 结构，并且您可能没有为每个 CSV 字段创建范围索引的奢侈。

```
declare variable $DIRECTORY-URI as xs:string external ;

declare function local:csv($ja as json:array) as xs:string
{
  string-join(json:array-values($ja), ',')
};

'A,B,C,D',
local:csv(
  cts:value-tuples(
    (cts:element-reference(xs:QName('a')),
     cts:element-reference(xs:QName('b')),
     cts:element-reference(xs:QName('c')),
     cts:element-reference(xs:QName('d'))),
    (),
    cts:directory-query($DIRECTORY-URI, 'infinity'))) 
```

# string - 在 perl 中使用正则表达式从一个字符串中提取多个相似的模式字符串

> ID：15016882
> 
> 赞同：0
> 
> 时间：2013-02-22T04:33:10.053
> 
> 标签：string, perl, extract

需要您帮助如何在 Perl 中使用 Regex 从一个字符串中提取多个相似字符串

这是源字符串：

> 2 月 16 日星期六 23:56:30 ICT 2013 - wulan321~ sw dadan 抱怨无法访问互联网 HP：三星 Galaxy S3 报价：报价和 VAS 活动类型活动自到期日期剩余更多 **AO_MDS_PDMA_Pre/Post_Data500MB_30D 常规 SOC 2/16/2013 4:19 :29 PM** 0 AO_MDS_PDMA_Pre/Post_Data500MB_30D **AO_MDS_PDMA_Pre/Post_Data1.2GB_30D 常规 SOC 2/16/2013 11:47:05 PM** 0 AO_MDS_PDMA_Pre/Post_Data1.2GB_30D CM：reff gpnblo apn：实习生和用户名：dikosongkan 完成密码

我的输出期望是：

```
AO_MDS_PDMA_Pre/Post_Data500MB_30D 2/16/2013 4:19:29 PM
AO_MDS_PDMA_Pre/Post_Data1.2GB_30D 2/16/2013 11:47:05 PM 
```

我已经用 perl 做了一些工作：

```
if ($string =~ /([Additional.*|A ?O.*])+(AO_.+?)+[\t*?| *?]Regular SOC[\t*?| *?](.+?[A|P] ?M)/) 
{
    print "$2 $3\n";
} 
```

但是输出只捕获了第一个出现的字符串：

```
AO_MDS_PDMA_Pre/Post_Data500MB_30D 2/16/2013 4:19:29 PM 
```

期待大佬指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:26:03.797

尝试循环和`g`标志：

```
while ($string =~ /REGEX-HERE/g) 
{
    print "$2 $3\n";
} 
```

# youtube - 如何在 HTML 上嵌入 youtube 视频的自定义缩略图

> ID：15016891
> 
> 赞同：2
> 
> 时间：2013-02-22T04:34:11.217
> 
> 标签：youtube, embed, video-thumbnails

我正在尝试在我的网站上显示视频的缩略图。我以前试图通过

```
<img src="http://img.youtube.com/vi/uHi0y-pOz80/3.jpg" height="218" width="297" alt="thumbnail"/></a> 
```

我们可以灵活地选择 YouTube 通过提及或在 URL 末尾提供的三个缩略图中的`1.jpg`任何一个`2.jpg`。`3.jpg`但是现在有了 YouTube 上新的自定义缩略图功能，您可以添加另一个缩略图，作为您为视频选择的第四个选项。问题是我无法通过`4.jpg`在 URL 末尾写入如下内容来访问网站中的缩略图：

```
<img src="http://img.youtube.com/vi/uHi0y-pOz80/4.jpg" height="218" width="297" alt="thumbnail"/></a> 
```

有谁知道如何在网站上访问我的自定义缩略图？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-18T15:04:59.547

你从 0 开始数

0.jpg 1.jpg 2.jpg 3.jpg

# c++ - 在 C++ 中传递模板化对象？

> ID：15016894
> 
> 赞同：0
> 
> 时间：2013-02-22T04:34:33.200
> 
> 标签：c++, templates

在我的 C++ 程序中，我有以下代码：

`FileInit(gamefile, master, heap, settings);`

在头文件中：

`template < typename TYPE, typename COMP>`

`void FileInit(std::ifstream &gamefile, std::deque &master, poorman_heap &heap, settings &set);`

其中poorman_heap 在其自己的头文件中定义为：

`template< typename TYPE, typename COMP> template< typename InputIterator> poorman_heap::poorman_heap( InputIterator start, InputIterator end, COMP comp ) {`

但是当我尝试传入一个堆（在第一行）时，我得到了错误：

`undefined reference to `void FileInit(std::basic_ifstream >&, std::deque >&, poorman_heap&, settings&)'`

`collect2: error: ld returned 1 exit status make: *** [notld] Error 1`

如果我不尝试传入堆，一切正常，所以我知道我已经正确链接了文件（这在过去对我来说是个问题），但我不知道如何将模板化对象传递给功能。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:56:24.290

它可以为我链接，但我必须将模板添加到 FileInit。

```
template< typename TYPE, typename COMP>
class poorman_heap{
        template< typename InputIterator>
        poorman_heap( InputIterator start, InputIterator end, COMP comp ) ;
};

template< typename TYPE, typename COMP>
        template< typename InputIterator>
poorman_heap<TYPE, COMP>::poorman_heap( InputIterator start, InputIterator end, COMP comp ) {
}

class settings {};

template < typename TYPE, typename COMP>
void FileInit(std::ifstream &gamefile, std::deque<int> &master, poorman_heap<TYPE,COMP> &heap, settings &set){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:37:59.537

您必须将模板参数提供给poorman_heap。

```
template < typename TYPE, typename COMP>
void FileInit(std::ifstream &gamefile, std::deque &master, poorman_heap<TYPE, COMP> &heap, settings &set); 
```

# r - 在R中绘制双变量高斯

> ID：15016896
> 
> 赞同：4
> 
> 时间：2013-02-22T04:34:40.857
> 
> 标签：r, gaussian

我有两个类，C1 和 C2，它们都由二元高斯描述，均值为 (0,0) 和 (1,3)，协方差为 I 和 2I。C1 和 C2 的先验分别为 0.4 和 0.6。

我必须在 R 中的散点图上绘制 C1 的 10 个点和 C2 的 15 个点，以便以后计算一些分类边界，所以这并不是问题的关键部分，我只需要知道怎么做所以我可以开始了。

我试过在线查找文档，但似乎没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T06:18:44.407

试试这个

```
library('MASS')
sz_1<-10;
sz_2<-15;    df<-rbind(data.frame(mvrnorm(n=sz_1,mu=c(0,0),Sigma=diag(2))),data.frame(mvrnorm(n=sz_2,mu=c(1,3),Sigma=2*diag(2))));
plot(df,xlab="x-value",ylab="y-value",col="purple",main="scatter-plot of mixed gaussians"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T06:29:00.277

```
require(mvtnorm)
l=3
sigma <- matrix(c(l,2,2,2*l), ncol=2)
C2 <- rmvnorm(n=15, mean=c(1,3), sigma=sigma)
C1 <- rmvnorm(n=10, mean=c(0,0), sigma=sigma)

 plot(C1, xlim=range( c(C1[,1],C2[,1]) ) , ylim=range( c(C1[,2],C2[,2]) ) , col="red")
 points(C2,  col="blue") 
```

![在此处输入图像描述](../Images/50ddeda920e0bca20cd14640becdf984.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T06:15:12.927

您在那里找到的 dmnorm 函数将生成您所追求的 2d 高斯，但仍然存在两个单独类的问题。为此，请使用您的先验 0.4 和 0.6。您可以使用 Bernoulli 或 runif()<p 来选择顺序生成的每个点的类。那应该这样做。

# iphone - UITextField 开始编辑时弹出窗口

> ID：15016904
> 
> 赞同：0
> 
> 时间：2013-02-22T04:35:31.853
> 
> 标签：iphone, xcode4.5

当 UItextField 开始编辑必须显示 popover 时，任何人都可以帮助我。

我是这个编程的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:39:35.983

您可以使用其中一种文本字段委托方法在文本字段开始编辑后立即显示您的弹出框

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
 {
   [self showPopOver];
 } 
```

注意：- showPoperOver 是一个自定义方法。

或者

您可以通知观察者进行通知

```
UITextFieldTextDidBeginEditingNotification 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:44:54.997

看到你有一个`UITextField`将代表设置为自我。

```
[textField setDelegate : self]; 
```

然后使用委托

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
 {
   // call the method where u r making ur popover
 } 
```

当您开始在`UITextField`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:48:53.423

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self showPopOverController];
}
- (void)showPopOverController
{
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    _popover = [[UIPopoverController alloc] initWithContentViewController:self.imgPicker];
    [_popover setDelegate:self];
    [_popover presentPopoverFromRect:self.txtField.frame  inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
} 
```

您需要在 .h 文件中声明的位置

```
 UIPopoverController *_popover;
 @property (strong, nonatomic) IBOutlet UITextField *txtField;
 @property (nonatomic, retain) UIImagePickerController *imgPicker; 
```

**这仅适用于 iPad**

# javascript - Javascript代码功能说明

> ID：15016910
> 
> 赞同：-2
> 
> 时间：2013-02-22T04:36:21.753
> 
> 标签：javascript, html

场景是我有一个下拉框，如下所示

```
<td>Select Country:</td>
<td><select id="bcountry" name="bcountry"></select>
<script language="javascript">print_country("bcountry")</script></td> 
```

我的 JavaScript 文件中有一系列国家/地区

```
var country_arr = new Array("Afghanistan", "Albania",....,"n); 
```

现在下面的代码是从html调用这个函数的地方我真的不明白下面的函数是如何工作的

```
 function print_country(country_id)
{
// given the id of the <select> tag as function argument, it inserts <option> tags
var option_str = document.getElementById(country_id);
option_str.length=0;
option_str.options[0] = new Option('Select Country','');
option_str.selectedIndex = 0;
    for (var i=0; i<country_arr.length; i++)
        {
    option_str.options[option_str.length] = new Option(country_arr[i],country_arr[i]);
    }
 } 
```

任何人请逐步向我解释上面的函数 print_country

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:53:00.800

为了讨论，我添加了一些行号：

```
 function print_country(country_id)
 {
      // given the id of the <select> tag as function argument, it inserts <option> tags
  1\.    var option_str = document.getElementById(country_id);
  2\.    option_str.length=0;
  3\.    option_str.options[0] = new Option('Select Country','');
  4\.    option_str.selectedIndex = 0;
  5\.    for (var i=0; i<country_arr.length; i++)
  6\.    {
  7\.         option_str.options[option_str.length] = new Option(country_arr[i],country_arr[i]);
  8\.    }
 } 
```

第 1 行：将文档对象模型 (DOM) 元素加载到变量中`option_str`
第 3 行：创建一个新`Option("label","value")`对象并将其分配给索引零 (0) 处`option_str`的`options`数组。
第 4 行：所选索引设置为零 (0)，这是`options`数组中的第一个元素。
第 5 行：您从零 (0) 循环到长度并每次`country_arr`递增。 第 7 行：创建一个新对象并将其分配给's数组的最后一个位置。该对象包含标签和值的第 th 个元素。`i`
`Option("label","value")``option_str``options``Option``i``country_arr`

希望清除它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:43:12.693

[你的代码](http://jsfiddle.net/wCGat/)：

*   创建一个空的`<select>`下拉列表
*   然后，脚本会根据 id 引用您的下拉列表，由`country_id`
*   该脚本将带有标签“选择国家/地区”的选项（占位符）作为第一个选项，并将空字符串作为值。
*   然后它为数组`<option>`中的每个项目附加一个。`country_arr`它们中的每一个都为其标签和值使用相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:43:47.913

我在您的代码中添加注释。

```
function print_country(country_id) // this is function declaration, have one parameter : country_id
{
    // given the id of the <select> tag as function argument, it inserts <option> tags
    var option_str = document.getElementById(country_id); // Get the element in your html with the id equals to country_id, the element should be a dropdown list
    option_str.length=0 // clear the dropdown list item
    option_str.options[0] = new Option('Select Country',''); // add first item in dropdown list
    option_str.selectedIndex = 0; // set selected item to dropdown list
    for (var i=0; i<country_arr.length; i++) // loop for the array
    {
        option_str.options[option_str.length] = new Option(country_arr[i],country_arr[i]); // create new item in your dropdown list
    }
 } 
```

更多： [Javascript选择](http://www.javascriptkit.com/jsref/select.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:43:59.270

1.  创建 option_str，将其指向 country_id
2.  向其添加标题（“选择国家/地区”）
3.  然后遍历 country_arr 数组，并将每个国家添加到 option_str 控件（即 country_id）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T04:45:12.313

这是函数的分解解释`print_country`。

```
function print_country(country_id)
{ 
```

它表示功能块的开始`print_country`。

```
var option_str = document.getElementById(country_id); 
```

该语句简单地给出了一个由 表示的 DOM 元素`country_id`。

```
option_str.length=0; 
```

的长度`option_str`设置为 0。

```
option_str.options[0] = new Option('Select Country',''); 
```

中的第一项`option_str`被赋予一个`option`带有显示值的 HTML 元素，`Select Country`而实际值是一个空字符串。

```
option_str.selectedIndex = 0; 
```

它将默认值设置为第一个选项值，即“选择国家/地区”。

```
 for (var i=0; i<country_arr.length; i++) 
```

它是`for`对数组的循环`country_arr`。

```
 {
    option_str.options[option_str.length] = new Option(country_arr[i],country_arr[i]); 
```

现在，在第一个循环中， 的长度`option_str`为 1，因为它有一个 element `Select Country`。因此，在 的循环数组上`option_str`分配了 HTML元素。`option``country_arr`

```
 }
 } 
```

希望它澄清。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T04:45:47.107

`country_id`被传递的是您的选择框的 id。此函数检索此语句中的对象：

```
var option_str = document.getElementById(country_id); 
```

长度最初被初始化为 0 并且这里也设置了默认值：

```
option_str.length=0;
option_str.options[0] = new Option('Select Country',''); 
```

通过包含默认选项，长度增加 1。然后在国家的循环选项中设置，直到它到达`country_arr`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T04:46:25.573

在不知道从哪里调用此函数的情况下，该函数正在执行以下操作：

```
 function print_country(country_id)
//function name with the argument "country_id". 
//Wherever this function is being called it is calling it as 
//"print_country('bcountry');
//the "bcountry" in the function call is found in the id of the <select /> tag in the HTML
{
// given the id of the <select> tag as function argument, it inserts <option> tags
var option_str = document.getElementById(country_id);
//"option_str" is now the name of the <select /> object
option_str.length=0;
//setting the option_str length to 0 eliminates the <option /> tags that are normally
//a part of the <select />, essentially clearing the drawing board to avoid duplications
option_str.options[0] = new Option('Select Country','');
//this command creates the first select <option/> giving the user the instruction to Select a country
option_str.selectedIndex = 0;
//now the selected <option />, the one that will appear in the <select> window is the instruction that was just created
    for (var i=0; i<country_arr.length; i++)
        {
    option_str.options[option_str.length] = new Option(country_arr[i],country_arr[i]);
    }
//the "for" loop, above, cycles through the array and for each member of the Array it creates a new <option> for the <select> tag
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-22T05:08:35.003

将选择框 html 对象分配给变量 option_str。

```
var option_str = document.getElementById(country_id); 
```

将选项数设置为 0。（如果我猜 html 中有任何选项）

```
option_str.length=0; 
```

将第一个选项的值设置为“选择国家”

```
option_str.options[0] = new Option('Select Country',''); 
```

将默认选择的选项设置为第一个选项。

```
option_str.selectedIndex = 0; 
```

循环遍历 country_arr 数组。

```
for (var i=0; i<country_arr.length; i++) 
```

以下代码将对 country_arry 中的每个项目执行一次。

在 javascript 中，您可以使用以下语法将任何项目添加到任何索引处的数组中：

```
myArray[index] = item 
```

确保插入发生在数组的末尾。

```
option_str.options[option_str.length] 
```

由于 javascript 中的数组是基于 0 的，并且 length 属性从 1 开始，因此使用 option_str.length 作为索引可确保将其插入到数组的末尾。

插入新选项，其中选项文本是 country_arr 中的当前项目，选项值也是 country_arry 中的当前项目

```
new Option(country_arr[i],country_arr[i]) 
```

# vb.net - VB 如何结束使用按钮运行的批处理文件/cmd 命令？

> ID：15016914
> 
> 赞同：0
> 
> 时间：2013-02-22T04:36:34.360
> 
> 标签：vb.net, cmd

这是我正在使用的代码：

```
Public Class Form1
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
Process.Start("C:\batchfile.bat")
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
End Sub 
```

我想知道如何让 Button1_Click 杀死“batchfile.bat”？批处理文件正在打开一个 CMD 提示符，如果这对任何人都有帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:38:14.423

您需要在表单的字段中启动`Process`返回的实例。`Process.Start()`

然后，您可以调用该`Kill()`方法。

例如：

```
Public Class Form1
    Private mySubTask As Process

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        mySubTask = Process.Start("C:\batchfile.bat")
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        mySubTask.Kill()
    End Sub 
```

如果用户单击开始两次，您将需要弄清楚该怎么做。

# android - 在 Android 中显示图像

> ID：15016919
> 
> 赞同：-1
> 
> 时间：2013-02-22T04:37:22.470
> 
> 标签：android, android-layout

我将`must.jpg`in`drawable-hdpi`文件夹放入并创建了此方法。

```
public void createImageViewOb (){
        File poster = new File ("/BakuMovies/res/drawable-hdpi/must.jpg");
        ImageView poster_view = (ImageView)findViewById(R.drawable.must);
        Bitmap bitmap = BitmapFactory.decodeFile(poster.getAbsolutePath());
        poster_view.setImageBitmap(bitmap);
} 
```

我想通过调用此方法在屏幕上显示图像`mainActivity`

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        createImageViewOb ();
    } 
```

但是当我启动应用程序时它崩溃了。我将不胜感激。

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/imageView1"
        android:layout_marginBottom="77dp"
        android:layout_toRightOf="@+id/textSwitcher1"
        android:text="@string/Albert"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/aboutMeButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_alignTop="@+id/viewFlipper1"
        android:onClick="showAboutMessage"
        android:text="About Me" />

</RelativeLayout> 
```

日志猫：

```
02-22 05:13:29.028: E/Trace(1145): error opening trace file: No such file or directory (2)
02-22 05:13:29.498: D/AndroidRuntime(1145): Shutting down VM
02-22 05:13:29.498: W/dalvikvm(1145): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-22 05:13:29.518: E/AndroidRuntime(1145): FATAL EXCEPTION: main
02-22 05:13:29.518: E/AndroidRuntime(1145): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bakumovies/com.example.bakumovies.MainActivity}: java.lang.NullPointerException
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.os.Looper.loop(Looper.java:137)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at java.lang.reflect.Method.invokeNative(Native Method)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at java.lang.reflect.Method.invoke(Method.java:511)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at dalvik.system.NativeStart.main(Native Method)
02-22 05:13:29.518: E/AndroidRuntime(1145): Caused by: java.lang.NullPointerException
02-22 05:13:29.518: E/AndroidRuntime(1145):     at com.example.bakumovies.MainActivity.createImageViewOb(MainActivity.java:44)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at com.example.bakumovies.MainActivity.onCreate(MainActivity.java:24)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.Activity.performCreate(Activity.java:5008)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-22 05:13:29.518: E/AndroidRuntime(1145):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-22 05:13:29.518: E/AndroidRuntime(1145):     ... 11 more
02-22 05:13:31.449: I/Process(1145): Sending signal. PID: 1145 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:44:26.837

有很多事情你可以避免并且很容易将你想要的图像加载到`ImageView`.

做这样的事情： -

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // New Code
        ImageView poster_view = (ImageView)findViewById(R.id.imageView); //Assuming an ImgView is there in your layout activity_main
        poster_view.setImageResource(R.drawable.must); //Must.jpg present in any of your drawable folders.
    } 
```

***更新：-***要动态插入`ImageView`，请在`onCreate()`.

```
ImageView imageView = new ImageView(this);
LinearLayout.LayoutParams lp = 
    new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 
                    LayoutParams.WRAP_CONTENT);
imageView.setLayoutParams(lp);        
imageView.setImageResource(R.drawable.must);        
yourLinearLayout.addView(imageView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:54:24.577

你使用了可绘制的。您调用 setImageDrawable 方法，然后设置资源 getResources ().getDrawable set id getdrawable 方法，而不是图像将显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:55:23.683

最可能的原因是您的应用程序在尝试解码下面一行中的图像时内存不足

```
Bitmap bitmap = BitmapFactory.decodeFile(poster.getAbsolutePath()); 
```

您尝试加载的此图像的尺寸是多少？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:55:55.387

在您的活动中，您可以调用它来将您的可绘制资源作为可绘制对象并将图像设置如下：

```
 Drawable d = getResources().getDrawable(R.drawable.must);
     ImageView poster_view = (ImageView)findViewById(R.id.imageView));
      poster_view.setBackgroundDrawable(d); 
```

或者

如果你想在 ImageView 中显示你的drawable，你可以这样做：

```
 ImageView poster_view = (ImageView)findViewById(R.id.imageView);
    poster_view.setImageResource(getResources().getDrawable(R.drawable.must)); 
```

或在您的 xml 文件中

```
 <ImageView   
     android:id="@+id/imageView" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/smiley"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T04:43:38.467

尝试这个。

```
public void createImageViewOb (){

        ImageView poster_view = (ImageView)findViewById((R.id.imageView); // imageView is id of your imageView

        poster_view.setImageResource(R.drawable.must);
} 
```

**更新**

`ImageView` 首先，您必须添加`activity_main`布局并将其设置`id`为`android:id="@+id/imageView"`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T04:40:21.343

一个问题是 Android 设备很可能没有名为`/BakuMovies/res/drawable-hdpi`. 这是您的开发环境的目录结构，*不会*直接传输到设备。除此之外，我不能在不知道你想要做什么的情况下给予。

**编辑：**

请注意，您`res`目录中的所有资源都包含在您应用的 .APK 文件中。它们不会作为单独的文件加载到设备中。为了访问 Java 代码中的资源（字符串除外），您需要使用一个[`Resources`](http://developer.android.com/reference/android/content/res/Resources.html)对象。你可以通过调用 [`getResources()`](http://developer.android.com/reference/android/content/Context.html#getResources%28%29)一个`Activity`对象来获得一个。获得`Resources`对象后，调用[`getDrawable()`](http://developer.android.com/reference/android/content/res/Resources.html#getDrawable%28int%29)或[`getDrawableForDensity()`](http://developer.android.com/reference/android/content/res/Resources.html#getDrawableForDensity%28int,%20int%29)获取可绘制资源。

# user-interface - 页面内容是如何一个接一个地加载的？

> ID：15016920
> 
> 赞同：0
> 
> 时间：2013-02-22T04:37:46.140
> 
> 标签：user-interface

在 facebook 页面内容一个接一个地加载。当我向下滚动时，它会加载另一个页面。哪种技术使它成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:41:02.950

这叫做无限滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:45:59.393

更多技术细节如何做到这一点：

*   页面滚动事件触发的 JavaScript 函数
*   功能检查页面是否“足够”滚动以加载更多内容（如果您接近底部）
*   必要时，在后台向服务器发送异步调用以获取更多内容（AJAX）。
*   加载内容后，它会附加到页面底部（或页面元素）

# c# - Javascript asp.net c#多对象传递给Js代码文件

> ID：15016923
> 
> 赞同：0
> 
> 时间：2013-02-22T04:37:51.097
> 
> 标签：c#, javascript, asp.net

我在 html 页面上有代码，它正在工作：

```
document.getElementById('<%=IdOstan.ClientID %>').options.length = 0; 
```

它是函数的一部分。找到对象并运行代码。但是，如果我将代码移动到单独的 js 文件中，则使用以下命令调用该文件：

```
<script src="../../../../Script/AjaxCall.js" type="text/javascript"></script> 
```

然后找不到对象。我的结论是，通过调用 document.getElementById 可以找到同一文件上的对象，但传递给 Js 的对象并非如此，而且看起来很正常。我试图在调用 JS 函数时传递对象，如下所示：

```
<asp:DropDownList ID="IdLand" runat="server" onchange="UpdateOstan(this);" 
     DataTextField="NameLand" DataValueField="IdLand" ViewStateMode="Enabled" 
     AutoPostBack="false">
</asp:DropDownList> 
```

它也有效。但我也需要传递第二个对象，我已经尝试过：

```
onchange="UpdateOstan(this, IdsecondObj);" 
```

失败了，这也是

```
onchange="UpdateOstan(this, document.getElementById('IdSecondObject'));" 
```

不工作。所以请让我知道如何将 html 对象传递给不在同一页面上的 Javascript。 **我根本不想使用 jQuery 文件作为助手。** 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:44:07.570

使用隐藏输入来存储您的 IdOstan.ClientID 的 ID 值，并从您的外部 javascript 中获取 id 名称的值，然后您可以访问该对象。

```
<input id="MyHidden" value="<%=IdOstan.ClientID %>" /> 
```

在外部 JS 文件中。

```
var id = document.getElementById('MyHidden').value;
var IdOstan = document.getElementById(id); 
```

现在 IdOstan 是您正在寻找的对象。

# php - 使用 onclick 运行函数

> ID：15016929
> 
> 赞同：0
> 
> 时间：2013-02-22T04:38:15.210
> 
> 标签：php, javascript, map, onclick

我有一个 PHP 页面，它有 3 个 JavaScript 函数，并使用带有“onclick”的图像映射来更改图像和地图坐标，以便 onclick 运行下一个函数。

到目前为止，我的代码一直运行到最后一个函数的最后一个图像——我理解。我想要实现的是在新坐标中一次单击一个之后调用的函数。

如果每个函数的调用时间有时间限制，则可以 - 但在该时间限制之前，onclick 可以运行下一个函数：

```
 <img src=<?php echo 'image-start.jpg' ?> width="700" height="400" 
    usemap="#start" class="map" style="border-style:none; margin:0" id="imageX" />

    <map id="start" name="start">
    <area shape="poly"  id="A"  class=""  title="Click to Start"  onclick="myFunction_1()" 
        coords=<?php echo '"'; echo $coords_0; echo '"' ; ?>/>
    <area shape="poly"  id="B"  class=""  title="Click to Start"  onclick="myFunction_1()" 
        coords=<?php echo '"'; echo $coords_0; echo '"' ; ?>/>
    </map>

    <script>
    function myFunction_1() {
         document.getElementById("imageX").src=" <?php echo 'image_1.jpg' ?>  " ;

         document.getElementById("A").coords= <?php echo '"'; echo $coords_1_a; echo '"' ; ?> ;
         document.getElementById("A").onclick= myFunction_2() ;

         document.getElementById("B").coords= <?php echo '"'; echo $coords_1_b; echo '"' ; ?> ;
         document.getElementById("B").onclick= myFunction_2() ;
         }

    function myFunction_2() {
         document.getElementById("imageX").src=" <?php echo 'image_2.jpg' ?>  " ;

         document.getElementById("A").coords= <?php echo '"'; echo $coords_2_a; echo '"' ; ?> ;
         document.getElementById("A").onclick= myFunction_3() ;

         document.getElementById("B").coords= <?php echo '"'; echo $coords_2_b; echo '"' ; ?> ;
         document.getElementById("B").onclick= myFunction_3() ;
         }

    function myFunction_3() {
         document.getElementById("imageX").src=" <?php echo 'image_end.jpg' ?>  " ;
         }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:51:24.650

您可以使一个函数在延迟后触发另一个函数`setTimeout()`-- 例如，将以下代码添加到 myFunction_1 将导致 myFunction_2 在 5 秒（5000 毫秒）内运行

```
setTimeout(myFunction_2, 5000) 
```

# android - 如何使用 android adt eclipse 从 android 调用 Rest webService？

> ID：15016931
> 
> 赞同：-1
> 
> 时间：2013-02-22T04:38:41.170
> 
> 标签：android, web-services, rest

如何从 android 调用 web 服务？我是 android 新手，任何人都可以发送一些链接，如何做或任何教程如何从头开始。

我想将 restwebservice 用于 android adt eclipse，并告诉我如何与现有网站一起使用？

**单击按钮后，它必须显示该网站，如何为该网站使用http？但在http中它只显示字符串**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T04:53:07.820

首先将以下内容添加到您的清单中。这是请求访问互联网的权限。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

那么最简单的访问 web 服务的方法是使用与 android 捆绑的[HttpClient ：](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

```
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = httpclient.execute(new HttpGet(URL));
StatusLine statusLine = response.getStatusLine();
if(statusLine.getStatusCode() == HttpStatus.SC_OK){
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    response.getEntity().writeTo(out);
    out.close();
    String responseString = out.toString();
    //Whatever you wanna do with the response
} else{
    //Close the connection.
    response.getEntity().getContent().close();
    throw new IOException(statusLine.getReasonPhrase());
} 
```

# .net - 如何由特定用户打开文件

> ID：15016938
> 
> 赞同：0
> 
> 时间：2013-02-22T04:39:03.423
> 
> 标签：.net

如何使用 .Net 打开具有特定用户的文件。
例子：

```
File.OpenFile(filePath, user) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:51:16.117

从[这个](https://stackoverflow.com/questions/1192631/open-a-shared-file-under-another-user-and-domain)线程：

```
const string file = @"\\machine\test\file.txt";

        using (UserImpersonation2 user = new UserImpersonation2("user", "domain", "password"))
        {
            if (user.ImpersonateValidUser())
            {
                StreamReader reader = new StreamReader(file);
                Console.WriteLine(reader.ReadToEnd());
                reader.Close();
            }
        }

class UserImpersonation2:IDisposable
{
    [DllImport("advapi32.dll")]
    public static extern bool LogonUser(String lpszUserName,
        String lpszDomain,
        String lpszPassword,
        int dwLogonType,
        int dwLogonProvider,
        ref IntPtr phToken);

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    public static extern bool CloseHandle(IntPtr handle);

    WindowsImpersonationContext wic;
    IntPtr tokenHandle;
    string _userName;
    string _domain;
    string _passWord;

    public UserImpersonation2(string userName, string domain, string passWord)
    {
        _userName = userName;
        _domain = domain;
        _passWord = passWord;
    }

    const int LOGON32_PROVIDER_DEFAULT = 0;
    const int LOGON32_LOGON_INTERACTIVE = 2;

    public bool ImpersonateValidUser()
    {
        bool returnValue = LogonUser(_userName, _domain, _passWord,
                LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT,
                ref tokenHandle);

        Console.WriteLine("LogonUser called.");

        if (false == returnValue)
        {
            int ret = Marshal.GetLastWin32Error();
            Console.WriteLine("LogonUser failed with error code : {0}", ret);
            return false;
        }

        Console.WriteLine("Did LogonUser Succeed? " + (returnValue ? "Yes" : "No"));
        Console.WriteLine("Value of Windows NT token: " + tokenHandle);

        // Check the identity.
        Console.WriteLine("Before impersonation: "
            + WindowsIdentity.GetCurrent().Name);
        // Use the token handle returned by LogonUser.
        WindowsIdentity newId = new WindowsIdentity(tokenHandle);
        wic = newId.Impersonate();

        // Check the identity.
        Console.WriteLine("After impersonation: "
            + WindowsIdentity.GetCurrent().Name);
        return true;
    }
    #region IDisposable Members
    public void Dispose()
    {
        if(wic!=null)
            wic.Undo();
        if (tokenHandle != IntPtr.Zero)
            CloseHandle(tokenHandle);

    }
    #endregion
} 
```

# java - SVN 中的 Maven 多模块项目

> ID：15016942
> 
> 赞同：1
> 
> 时间：2013-02-22T04:39:17.333
> 
> 标签：java, svn, maven, maven-3

我在本地系统中创建了一个 Maven 多模块项目。之后，我将其上传到 SVN 存储库。当我使用 Eclipse 从 SVN 签出该项目时，它正在作为单个项目签出。如何将其转换为 Maven 多模块项目？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:38:43.627

安装[m2e](http://eclipse.org/m2e/)和[m2eclipse-subclipse 连接器](https://github.com/markphip/m2eclipse-subclipse)* 然后使用[SCM 的 Checkout Maven 项目](https://docs.sonatype.org/display/M2ECLIPSE/Importing+Maven+projects#ImportingMavenprojects-CheckoutMavenprojectsfromSCM)。

> “文件/导入.../其他/从 SCM 签出 Maven 项目...”

或者，还有一个用于颠覆性的[连接器。](https://docs.sonatype.org/display/M2ECLIPSE/Integration+with+Subversive)

* * *

对于本地文件系统中的项目：

> “文件/导入...”，然后选择“Maven 项目”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:34:54.023

您能否展示更多关于 pom.xml 的信息，这是创建 Multimodule 项目的指南： Multimodule ，因为它应该使用父 pom 来包含多个项目。实际上在我们使用这种方式的项目中，但我仍然建议您将项目分开并将其注入到 pom.xml 中。然后您可以检查我们要使用的 1 个项目。顺便说一句，您可以安装 eclipse maven 插件来简化此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T05:14:43.023

在涉及许多开发人员的大型项目中，检查所有模块并使其保持最新可能会很乏味。特别是如果您只对一两个模块感兴趣。在这种情况下，使用二进制依赖会更舒服。只需检查您要使用 Eclipse 处理的模块以及`run mvn eclipse:eclipse`每个模块（另请参阅[Maven 作为外部工具](http://maven.apache.org/plugins/maven-eclipse-plugin/usage.html)。

# java - 将生成的请求标头从 HttpServletRequestWrapper 传递到下一个 jsp 页面

> ID：15016943
> 
> 赞同：0
> 
> 时间：2013-02-22T04:39:20.650
> 
> 标签：java, jsp, servlets, httprequest

我创建了一个 Servlet 过滤器来模拟一个代理服务器，请求将被传递到该代理服务器，并将返回一个带有附加标头的请求。过滤器只是将 HttpServletRequestWrapper 包装到请求中并添加额外的标头。此过程在服务器门户上执行，用户将从外部系统重定向到该门户。

目前，我可以创建额外的标题；但是，我不知道如何使用我的过滤器将这些标头传递给后续的 jsp 页面。关于如何做到这一点的任何想法？请注意，这只是为了模拟将添加附加标头的服务器。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:20:07.293

将包装好的请求传递给过滤器链：

```
@Override
public void doFilter(ServletRequest request, 
                     ServletResponse response, 
                     FilterChain chain) throws IOException, ServletException {
    HttpServletRequestWrapper wrapper = wrapOriginalRequestToAddHeaders(request);
    chain.doFilter(wrapper, response);
} 
```

# javascript - 如何从 WCF 服务 webHttpBinding 获取 javascript 代理

> ID：15016945
> 
> 赞同：1
> 
> 时间：2013-02-22T04:39:33.897
> 
> 标签：javascript, jquery, .net, json, wcf

我设置了所有端点、绑定和行为，以便使用 json 使用服务，但现在我不知道如何生成 javascript 代理以便通过 Ajax 从我的客户端 javascript JQuery 代码访问。有任何想法吗？

请不要试图建议我在 WCF 和客户端之间使用服务器端方法（例如，使用服务的 asp.net mvc 操作），谢谢。

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="Binding1" />
      </webHttpBinding>
    </bindings>
    <services>
      <service name="IServiceForJQuery">
        <endpoint behaviorConfiguration="Behavior1"
          binding="webHttpBinding" bindingConfiguration="Binding1" name="Endpoint1"
          contract="IServiceForJQuery" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="Behavior1">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T06:59:34.067

Rick Strahl 有一篇关于此的[博客文章](http://weblog.west-wind.com/posts/2009/Sep/15/Making-jQuery-calls-to-WCFASMX-with-a-ServiceProxy-Client)。

他创建了一个脚本代理类，您可以使用它来调用该服务。

# php - Symfony2：无法使用 DoctrineExtensions Mysql Year 函数

> ID：15016947
> 
> 赞同：4
> 
> 时间：2013-02-22T04:39:57.480
> 
> 标签：php, mysql, symfony, doctrine-orm

到目前为止，我在实施 beberlei DoctrineExtensions 方面一直没有成功。我需要 MySQL Year() 函数。错误是：

> 预期的已知函数，得到“年份”

所以我一定错过了什么。什么？

这是我到目前为止所得到的：

扩展安装在`..\vendor\beberlei\lib\DoctrineExtensions`

### app/autoload.php 读取：

```
use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';
$loader->add('DoctrineExtensions', __DIR__.'/../vendor/beberlei/lib/DoctrineExtensions');

// intl
if (!function_exists('intl_get_error_code')) {
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

### 年份函数使用：

```
class ClientRepository extends EntityRepository {

    public function activeStatus($year, $status) {
        $em = $this->getEntityManager();
        $query = $em
                ->createQuery('select max(Year(ct.contact_date)) CY, 
                c.active
                from ManaClientBundle:Contacts ct
                join ManaClientBundle:Client c on ct.cid = c.id
                group by id')
            ->getResult();

        return $em->createQuery("select CY, count(CY) Status from
                $query where CY = $year and active = '$status'")
            ->getResult();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T08:48:32.263

您是否已将 YEAR 函数注册到 Doctrine 配置中？

```
$this->getEntityManager()->getConfiguration()->addCustomDatetimeFunction('YEAR', 'DoctrineExtensions\Query\Mysql\Year'); 
```

# postgresql - 如何在 OS X 上使用 Postgres.app 启用日志记录？

> ID：15016959
> 
> 赞同：13
> 
> 时间：2013-02-22T04:41:21.077
> 
> 标签：postgresql, logging, osx-mountain-lion, psql

奔跑的**山狮**。通过**[Postgres.app](http://postgresapp.com/documentation)**安装 PostgreSQL 。通过 PyCharm 为 Django 使用 postgres。我已经阅读了多篇关于让它工作的 SO 和[博客文章](http://architects.dzone.com/articles/configuring-logging)，但根本没有创建日志。

我的 conf 文件**（数据目录）位于此处：**

```
$ ~/Library/Application\ Support/Postgres/var/postgresql.conf 
```

我的**postgresql.conf 日志设置**如下所示：

```
log_destination = 'stderr'  
logging_collector = on  
log_directory = '~/Library/Logs/Postgres' (I've also tried 'pg_log') 
```

我**试过关闭和打开 Postgres.app**

我也**尝试过重新启动命令行服务器**：

```
$ /Applications/Postgres.app/Contents/MacOS/bin/pg_ctl restart -D ~/Library/Application\ Support/Postgres/var/ 
```

...但这会导致终端挂起`"LOG: autovacuum launcher started"`... 并将**日志打印到控制台**。

[这篇 SO 帖子密切相关](https://stackoverflow.com/questions/11805720/display-postgres-server-logs-output-in-terminal-and-record-to-logs-at-same-time?rq=1)，但我希望 Postgres.app 写入日志文件，而不是打印到控制台。

任何帮助都会很棒，谢谢。

编辑：作为对vyegorov的回应，

```
version = PostgreSQL 9.2.2 
```

在 postgresql.conf 中不存在静默模式

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T08:48:51.473

我让它为我工作。这是我正在使用的设置：

```
log_destination = 'stderr'  
logging_collector = on
log_directory = '/tmp/'
log_filename = 'postgresql-%Y-%m-%d.log' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-04T11:05:24.093

在最新版本上

```
/Users/USERNAME/Library/Containers/com.heroku.postgres/Data/Library/Application Support/Postgres/var/postgresql.conf

psql -U existingdatabase_name_here

then SHOW config_file; 
```

# javascript - jQuery.each 在可用时不依赖 Array.forEach 有什么原因吗？

> ID：15016962
> 
> 赞同：6
> 
> 时间：2013-02-22T04:41:40.093
> 
> 标签：javascript, jquery, underscore.js, ecmascript-5

在深入研究下划线库的源代码时，我发现它`_.each`依赖于`Array.forEach`可用的 ECMAScript 5 API：

```
var each = _.each = _.forEach = function(obj, iterator, context) {
    if (obj == null) return;
    if (nativeForEach && obj.forEach === nativeForEach) {
        obj.forEach(iterator, context);
    } else if (obj.length === +obj.length) {
        for (var i = 0, l = obj.length; i < l; i++) {
            if (iterator.call(context, obj[i], i, obj) === breaker) {
                return;
            }
        }
    } else {
        for (var key in obj) {
            if (_.has(obj, key)) {
                if (iterator.call(context, obj[key], key, obj) === breaker) {
                    return;
                }
            }
        }
    }
}; 
```

我注意到[jQuery.each](http://api.jquery.com/jQuery.each/)（静态方法，而不是 jQuery 包装器的[.each](http://api.jquery.com/each/)方法）只是`for`调用回调函数的传统方法，无论是否`forEach`可用。我错过了有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:36:47.123

这可能是因为两者在实现上不同 - Array.forEach 将数组元素作为第一个参数传递，将索引作为第二个参数传递。jQuery.each 先传索引，再传数组元素。

实际上，最好的讨论来源可能就在堆栈溢出上：

[jQuery.each 实现不同于原生 Array.forEach](https://stackoverflow.com/questions/13095607/jquery-each-implementation-differs-from-native-array-foreach)

他们的猜测是这是一个错误 - 很多网站都实现了 jQuery.each，首先期望索引，他们无法将它们反转。

# asp.net-mvc - .net mvc 分层应用程序与观察者 vs msmq vs web 服务

> ID：15016963
> 
> 赞同：1
> 
> 时间：2013-02-22T04:41:47.413
> 
> 标签：asp.net-mvc, rest, msmq, observer-pattern

背景：MVC 应用每秒有 100 多个事务，需要详细的实时报告。

问题：针对事务数据库进行报告意味着复杂的报告逻辑 + 缓慢的报告加载时间。大型报告会对交易流程产生负面影响。定期将数据拉入非规范化的多维数据集违反了实时报告约束

解决方案：让状态更改同时持久保存到事务数据库和多维数据集，在数据持久保存在多维数据集中时对数据进行反规范化（1-2 分钟延迟是可以的）

困境：每个层、Web、应用程序、事务数据库和多维数据集都是水平扩展的，并且存在于不同地理位置的不同场中。

可能的解决方案：
带多播的 MSMQ - 应用服务器在实体状态更改时发送消息，事务性数据库和多维数据集服务接收消息并持续存在。优点：成熟的解决方案，缺点：需要大量硬件和/或许可来确保高可用性 - 翻译：昂贵。

观察者模式 - 使用 .net WCF（呃..）让应用服务器调用数据库服务器订阅的更改事件（观察）。优点：没有额外的硬件，缺点：WCF。

REST Web 服务 - 使用 .net Web 客户端发布到事务数据库和多维数据集，而不是发送消息或调用事件。优点：实现起来超级简单，缺点：需要在数据库端的某个地方安装 IIS，以便应用服务器发布到。

问题 1：我对可能解决方案的假设是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:18:38.227

经过大量研究，CQRS 非常适合作为解决方案。至于所有移动部件之间的通信，我必须阅读很多关于企业服务总线 (ESB) [http://en.wikipedia.org/wiki/Enterprise_service_bus](http://en.wikipedia.org/wiki/Enterprise_service_bus)的内容。在 .net 世界中，nservicebus 似乎很受欢迎，但不是免费的，公共交通是免费的，但我在构建和运行示例时遇到了麻烦。TT

公共交通背后的一个人对消息传递与 Web 服务的一个很好的概述：http: [//blip.tv/ineta-live/event-driven-architecture-by-chris-patterson-north-dallas-net-ug- on-02-03-2010-3193457](http://blip.tv/ineta-live/event-driven-architecture-by-chris-patterson-north-dallas-net-ug-on-02-03-2010-3193457)

The ESB uses MSMQ to implement the observer pattern. Throw in a little web services a la [cqrs eventstore dispatching to via web service](https://stackoverflow.com/questions/15237025/cqrs-eventstore-dispatching-to-via-web-service) then that means all the resolutions are basically used, but I would leverage open source components.

# mysql - 数据库设计将 2 个表链接到 1 个链接到多个表

> ID：15016964
> 
> 赞同：0
> 
> 时间：2013-02-22T04:41:53.717
> 
> 标签：mysql, database, database-design, composite-key

我目前有**3 个主表** `animal, food and medicine`。

从动物表我得到表：

1.  物种（猫、狗、鸟、鱼……）
2.  尺寸（小，中，大，大...）
3.  年龄（小狗，年轻成人，老......）
4.  颜色（棕色、黑色、灰色……）

我想存储给动物提供的药物和食物的有用数据但是我不知道如何链接这些数据，以下方法是否可以接受或者我应该添加或删除什么？

我的主要问题是复合键的正确性以及在查询中检索数据的方式......

# 动物

```
idAn SEX AGE COMMENT           SPECIES color  HAIR   SIZE
----------------------------------------------------------
1     M   1  without ear         1      1     LONG    1
2     F   2  blue eyed all gray  2      2     short   1 
```

# 物种

```
id name
-------
1  dog
2  cat
3  bird
4  fish
5  reptile
6  mouse  
7  other 
```

# 年龄

```
id name
-------
1 puppy
2 young
3 adult
4 old 
```

# 颜色

```
id  name
--------
1  black
2  gray
3  gold
4  green
5  red
6  brown 
```

# 尺寸

```
id  name
--------
1  small
2  medium
3  large
4  big 
```

# 食物

```
id name      label      
-------------------
1  sardine     so 
2  croquettes  dogchauw   
3  chicken     sirw
4  whiskas     whiskas 
```

# food_Animal

```
idFood  idAnimal   quantity timesPerDay lastFood    LastWater
----------------------------------------------------------------------
2             1    70gr      3        12-12-12   12-12-12  
3             2    80gr      4        12-11-12   12-11-12 
```

和上面类似的药物。

可以做什么或如何在 MySQL 中使用它

我从类似的东西开始

```
CREATE TABLE IF NOT EXISTS ANIMAL(
    idAn    int(3) NOT NULL AUTO_INCREMENT,
    sex     int(2) NOT NULL ,
    age     int(2) NOT NULL ,
    comment varchar(50)  ,                  
        species int(2) NOT NULL , 
    color   int(2) NOT NULL ,
        hair    varchar(50)     ,                   
        size    int(2) NOT NULL ,
    PRIMARY KEY (idAn)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T05:00:56.873

```
/* Create a table with 2 fields, Entity and Name. Primary key is BOTH fields (as we know that Entity->Name will be a unique value) */
CREATE TABLE master_lookup (
  Entity nvarchar(10) not null,
  Name nvarchar(20) not null,
  primary key(Entity, Name)
);

/* Insert some data! */
INSERT INTO master_lookup VALUES 
('Species', 'Dog'),
('Species', 'Cat'), 
('Species', 'Bird'),
('Color', 'Black'),
('Color', 'Brown');

/* Let's have a look... */
SELECT * FROM master_lookup;
 Entity  | Name
----------------
 Species | Dog
 Species | Cat
 Species | Bird
 Color   | Black
 Color   | Brown

/* Et voila. One lookup table, ID numbers need not apply. Let's assume you have a form that will populate the Animal table with a list of species for the user to pick from. The source of the list is easy: */
SELECT Name FROM master_lookup WHERE Entity = 'Species';

/* Your INSERT query into Animal will look like this (let's say they're entering a small brown long-haired dog): */
INSERT INTO Animal ('M', 11, 'a comment', 'Dog', 'Brown', 'Long', 'Small');

/* And now when you SELECT from the animal table... */
SELECT * FROM Animal

idAn SEX AGE COMMENT           SPECIES color  HAIR   SIZE
----------------------------------------------------------
1     M   11  a comment         Dog    Brown  Long   Small

/* Look ma! No joins! Which means your query is much simpler and much faster! Yay! */ 
```

# facebook - 喜欢按钮不会保持“点击”状态

> ID：15016965
> 
> 赞同：0
> 
> 时间：2013-02-22T04:41:55.343
> 
> 标签：facebook, facebook-like, confirm

在大多数情况下，我的博客页面上的 Facebook 赞按钮（例如[http://maxltv.tumblr.com/post/43695254623/management-olympics](http://maxltv.tumblr.com/post/43695254623/management-olympics)）在被点击后会取消点击，之后就不会发布任何内容。看起来按钮一直按下一秒钟，然后又回来，什么也没发生。

几次尝试后，按钮会显示“确认”消息。单击“确认”后，确认弹出窗口中的“发布”按钮的行为方式相同 - 单击后一秒钟内自行取消单击。

这真是令人气愤:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:19:43.493

*   转到[https://developers.facebook.com/tools/lint/](https://developers.facebook.com/tools/lint/)
*   在输入 URL 中，将您的页面 URL 粘贴到喜欢按钮不起作用的位置
*   单击 Lint 按钮。

现在您可以去访问您的页面以尝试“赞”按钮。

如果您有任何疑问，请更新问题或添加评论。

# linux - grep 以特定字符开头的所有字符串实例

> ID：15016970
> 
> 赞同：7
> 
> 时间：2013-02-22T04:42:32.950
> 
> 标签：linux, bash, grep, cat

我想 grep 以字符 'rs' 开头的所有字符串实例（仅来自一个文件）并将完整的字符串传送到一个新文件中。我设法获得了实例的数量，但我不知道如何将它们放入新文件中：

```
grep -c rs < /home/Stephanie/this.txt
698572 
```

文件中的一行示例如下：

```
1203823    forward   efjdhgv   rs124054t8 dhdfhfhs
12045345    back   efjdkkjf   rs12445368 dhdfhfhs 
```

我只想抓取 rs 字符串并将其移动到 ne 文件中。有人可以帮我解决管道问题吗？我阅读了一下，但我发现对我来说并不是特别有帮助。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T12:23:33.060

我建议这样的事情：

```
egrep -o "(\s(rs\S+))" data.txt | cut -d " " -f 2 > newfile.txt 
```

`\s`查找以任何空白字符开头的内容

`(rs\S+)`然后搜索以“rs”开头并后跟任何非空白字符的字符串

结果中仍然有空格，这是我们不想要的，因此我们在将内容写入新文件之前将它们“剪切”掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T05:58:37.513

使用 Perl：

```
 perl -lane 'print $1 while (/\b(rs\w+)/g)' input 
```

或使用`tr`and `grep`：

```
tr '[ \t]' '[\n\n]' < input | grep '^rs' 
```

这里`^`匹配一行的开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T21:53:29.023

超级旧，但想补充一下。@kev grep -c '^rs' 将转储以 rs 开头的所有行的计数，而这些行都没有。

要使用大多数标准二进制文件相对轻松地执行此操作，您可以使用：

```
cat text.file | awk {'print $4'} | grep '^rs' 
```

这将对文件进行分类，提取每行的第四个字段，并且只提取以 rs 开头的行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T06:28:09.780

```
perl -F -lane '$a=$_;for(@F){if(/^rs/){print $a;last}}' your_file 
```

或者

```
perl -lne 'print if(/[\s]rs/ || /^rs/)' your_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T11:36:11.190

使用 Grep 命令：

```
grep -w -o "rs[0-9a-z]*" 
```

# php - MySQL/PHP 如何在 mysql 中插入一行并将下面的所有自动递增字段增加 1

> ID：15016972
> 
> 赞同：0
> 
> 时间：2013-02-22T04:42:37.047
> 
> 标签：php, mysql, auto-increment

说我有一张这样的桌子：

```
身份证|姓名|
----------
1 |弗雷德 |
2 |吉姆 |
3 |特蕾西 |
4 |斯泰西|

```

“id”是自动递增的主索引。

我想在“#2 - jim”下面添加一行。我会称这个新行为“john”。

我怎么能在“jim”下面插入“john”，所以 john 的“id”为 3，而“john”下面的所有名字的 id 都会增加 1？

例如

```
身份证|姓名|
----------
1 |弗雷德 |
2 |吉姆 |
3 |约翰 |
4 |特蕾西|
5 |斯泰西|

```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:50:34.930

此命令将在 jim 之后为每个人的 id 添加 +1。

```
UPDATE your_table SET id=id+1 WHERE id>2; 
```

此命令将在 jim 之后插入一行。

```
INSERT INTO your_table(id,name) VALUES(3,'john'); 
```

It is a very bad idea to change the primary key value. If your table has relationships with other tables, there will be consisitency issue. Let's say it is customer table and there is an order table. The above idea will make trstacy's orders will be connected to tracy and tracy's john, etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:50:58.377

This is not how the autoincrement directive is intended to work. You would need to use UPDATE to change the row 3 to john, UPDATE to change row 4 to tracy, and INSERT to create new row 5 as stacy. This would be awful if you needed to insert a row after row 5 of a 10,000 record table.

You COULD directly change the id value but that is very bad practice.

# c# - 如何处理错误消息：会话状态在此上下文中不可用

> ID：15016973
> 
> 赞同：5
> 
> 时间：2013-02-22T04:42:39.693
> 
> 标签：c#, asp.net

我正在尝试创建一个错误消息页面以在发生异常时显示异常，并且错误消息页面上有一个返回按钮可以返回导致异常的上一页。

这是用于重定向错误页面的代码。

```
protected void btnAssign_Click(object sender, EventArgs e)
{
    try
    {
        SqlDataSource3.Insert();
    }
    catch (Exception ex)
    {
        Session["Exception"] = ex;
        Response.Redirect("~/ErrorMessage.aspx", false);
    } 
} 
```

这是我的 global.asax 文件的代码

```
void Application_Error(object sender, EventArgs e) 
{ 
    // Code that runs when an unhandled error occurs
    Exception ex = Server.GetLastError().InnerException;
    Session["Exception"] = ex;
    Response.Redirect("~/ErrorMessage.aspx");
} 
```

这是errorMessage页面的代码。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            Exception ex = (Exception)Session["Exception"];
            Session.Remove("Exception");
            Literal1.Text = "<p style='color:blue'><b>An unrecoverable error has occurred:</b></p><br /><p style='color:red'>" + ex.Message + "</p>";
        }  
    }
    protected void btnReturn_Click(object sender, EventArgs e)
    {
        Response.Redirect("~/IncidentAssignment.aspx");
    } 
```

当我单击分配按钮时，它会打开 errorMessage 页面并显示异常，但是当我单击返回按钮时，程序崩溃并指向 global.asax 文件并说会话状态在此上下文中不可用，如 blew 所示。 ![在此处输入图像描述](../Images/8483a5a4f3e21683ea542d674f0cc10a.png)

我不明白为什么 session["exception"] 为空。如果有人回答我的问题，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T04:50:01.513

您正在尝试在应用程序错误事件中访问会话状态，可能是您的会话对象未初始化。错误可能会在您的应用程序的其他位置引发，因为它指的是整个应用程序。

这通常发生在您抛出的错误是在您的应用程序初始阶段，因此会话对象没有被初始化。例如。在 Begin_Request 事件中。

您可以在访问会话对象之前进行空检查。

IE

```
if (HttpContext.Current.Session != null) { //do your stuff} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:45:30.680

而不是使用位于您的内部的代码行：

```
protected void btnReturn_Click(object sender, EventArgs e)
{
    Response.Redirect("~/IncidentAssignment.aspx");
} 
```

完全摆脱它，在你的按钮的 HTML 代码中，添加这行代码：

```
PostBackUrl="insert your path here" 
```

因此，它应该会引导您回到您开始的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T08:25:20.923

当您在 web.config 中定义错误页面时，您可以在错误页面中访问异常：

```
HttpContext.Current.AllErrors

<customErrors mode="On" redirectMode="ResponseRewrite" defaultRedirect="~/ErrorPage.aspx">
</customErrors> 
```

# python - 从 python 运行 imagemagick convert（控制台应用程序）

> ID：15016974
> 
> 赞同：2
> 
> 时间：2013-02-22T04:42:41.123
> 
> 标签：python, python-3.x, imagemagick, subprocess, imagemagick-convert

我正在尝试使用 imagemagick 使用此命令对一些字体进行光栅化，该命令在终端上运行良好：

```
convert -size 30x40 xc:white -fill white -fill black -font "fonts\Helvetica Regular.ttf" -pointsize 40 -gravity South -draw "text 0,0 'O'" draw_text.gif 
```

使用 subprocess 运行相同的命令来自动化它不起作用：

```
try:
    cmd= ['convert','-size','30x40','xc:white','-fill','white','-fill','black','-font','fonts\Helvetica Regular.ttf','-pointsize','40','-gravity','South','-draw',"text 0,0 'O'",'draw_text.gif']
    #print(cmd)
    subprocess.check_output(cmd,shell=True,stderr=subprocess.STDOUT)
except CalledProcessError as e:
    print(e)
    print(e.output) 
```

.

```
Command '['convert', '-size', '30x40', 'xc:white-fill', 'white', '-fill', 'black', '-font', 'fonts\\Helvetica Regular.ttf', '-pointsize', '40', '-gravity', 'South', '-draw', "text 0,0 'O'", 'draw_text.gif']' returned non-zero exit status 4
b'Invalid Parameter - 30x40\r\n' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T05:07:09.570

我想通了：原来**windows有自己的`convert.exe`程序在`PATH`**.

以下代码打印`b'C:\\Windows\\System32\\convert.exe\r\n'`：

```
try:
    print(subprocess.check_output(["where",'convert'],stderr=subprocess.STDOUT,shell=True))
except CalledProcessError as e:
    print(e)
    print(e.output) 
```

在终端中运行相同的代码显示 imagemagick 的`convert`阴影 Windows' `convert`：

```
C:\Users\Navin>where convert                                                    
C:\Program Files\ImageMagick-6.8.3-Q16\convert.exe                              
C:\Windows\System32\convert.exe 
```

.

安装 ImageMagick 后我没有重新启动 python，所以它`PATH`仍然指向 Windows 版本。

使用完整路径有效：

```
try:
    cmd= ['C:\Program Files\ImageMagick-6.8.3-Q16\convert','-size','30x40','xc:white','-fill','white','-fill','black','-font','fonts\Helvetica Regular.ttf','-pointsize','40','-gravity','South','-draw',"text 0,0 'P'",'draw_text.gif']
    print(str.join(' ', cmd))
    print('stdout: {}'.format(subprocess.check_output(cmd,shell=True,stderr=subprocess.STDOUT)))
except CalledProcessError as e:
    print(e)
    print(e.output) 
```

# backbone.js - 在同步回调中 访问主干模型

> ID：15016979
> 
> 赞同：0
> 
> 时间：2013-02-22T04:43:25.197
> 
> 标签：backbone.js

我将 a 传递`_model`给我的`ProcessModel`函数，然后在我的 ProcessModel 函数中，它将模型保存到服务器，服务器返回触发`sync`事件。我想要做的是在我的`sync`回调访问中`_model`，因为`CartView`正在从我的`_model`. 我说得有道理吗？

```
var _cartItem  = this.ConvertToSaleItem(item);
_cartItem.on('sync', this.TaxChangeSaveSuccess,  this);
_cartItem.on('error', this.TaxChangeSaveError, this);

_cartItem.url = Global.ServiceUrl + Service.SOP + Method.SALEITEMTAX;
_cartItem.save(); 
```

我的回调：

```
TaxChangeSaveSuccess : function(model, response, options) {
    if(!Global.isBrowserMode) window.plugins.cbNetworkActivity.HideIndicator();
        item.set({
            SalesTaxAmountRate : model.get("SalesTaxAmountRate")
        }); 
    }, 
```

但项目未定义。关于如何做的任何想法？我的视图需要相同的模型来捕获从我的模型（即项目）触发的任何事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:17:01.530

立即想到两个选项：

1.  `item`作为属性存储在您的`this`.
2.  使用匿名函数包装器手动完成。

第一个看起来像这样：

```
this.item = item;
_cartItem.on('sync', this.TaxChangeSaveSuccess,  this);

//...

TaxChangeSaveSuccess : function(model, response, options) {
    if(!Global.isBrowserMode) window.plugins.cbNetworkActivity.HideIndicator();
        this.item.set({
            SalesTaxAmountRate : model.get("SalesTaxAmountRate")
        }); 
```

第二个看起来像这样：

```
_cartItem.on('sync', _(function(model, response, options) {
    this.TaxChangeSaveSuccess(model, response, options, item);
})).bind(this));

//...

TaxChangeSaveSuccess : function(model, response, options, item) {
    // Same stuff you have already 
```

您还可以使用的部分应用程序功能[`_.bind`](http://underscorejs.org/#bind)提供`item`给回调函数。`bind`还有其他设置包装器的方法，我只是在这里简单易懂。

哪一种更适合您取决于您​​的具体情况。

# python - Pandas：使用 pd.Series 对带有索引的 pd.DataFrame 进行排序

> ID：15016980
> 
> 赞同：5
> 
> 时间：2013-02-22T04:43:25.503
> 
> 标签：python, pandas

我正在尝试按以特定顺序排序的另一个系列对 DataFrame（轴 = 0）进行排序。

示例：DataFrame 包含 CountryCodes 的索引：'AUS'、'BWA' ....（按字母顺序排序）系列包含 CountryCodes 列表及其相关的 GDP（按 GDP 排序）

我可以使用 DataFrame.join(Series) 没问题，然后对列 'GDP' 进行排序，然后对 del DF['GDP'] 进行排序，但是有没有办法直接这样做而不加入结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:08:40.180

您可以[`reindex`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.reindex.html)通过（排序）系列的索引：

```
In [1]: df = pd.DataFrame([[1, 2], [3, 4]], index=list('ab'))

In [2]: s = pd.Series([2,1], index=list('ab'))

In [3]: s
Out[3]: 
a    2
b    1

In [4]: s.sort()

In [5]: df.reindex(s.index)
Out[5]: 
   0  1
b  3  4
a  1  2 
```

# error-handling - Parsley.js：错误消息层次结构

> ID：15016993
> 
> 赞同：1
> 
> 时间：2013-02-22T04:44:32.140
> 
> 标签：error-handling, validation, parsley.js

我是 Parsley 的新手，想为我的最终用户提供一个好的用户体验。Parsley 网站上的示例“不是用户体验意识的完美示例”。这让我希望有一个错误消息显示层次结构的好例子。

用户永远不会看到同一字段的多个错误消息；它应该一次只有一个。那么，我该如何实现呢？

我建议根据约束应用于字段的顺序来构建层次结构。

有什么建议或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:17:00.337

我有同样的问题。

1.  查看：[parsleyjs.org/documentation.html#parsleyclasses](http://parsleyjs.org/documentation.html#parsleyclasses) 并使用“更改错误容器”部分中的代码。
2.  将此添加到您的 CSS 中：`.parsley-container{display:none} input:focus+.parsley-container{display:block}`

我为自己做了更多的东西：

```
.parsley-container {
  display: none;
  position: absolute;
  margin: 10px 0 0 0;
  padding: 2px 5px;
  z-index: 2;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  -ms-border-radius: 3px;
  -o-border-radius: 3px;
  border-radius: 3px;
  background: #ffffff;
  border: 1px solid #888888;
}
.parsley-container:after, .parsley-container:before {
  bottom: 100%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none;
}
.parsley-container:after {
  border-color: rgba(255, 255, 255, 0);
  border-bottom-color: #ffffff;
  border-width: 10px;
  left: 50%;
  margin-left: -10px;
}
.parsley-container:before {
  border-color: rgba(136, 136, 136, 0);
  border-bottom-color: #888888;
  border-width: 11px;
  left: 50%;
  margin-left: -11px;
}
input:focus + .parsley-container,
input:active + .parsley-container {
  display: block;
} 
```

很像 Chrome HTML5 验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-24T21:18:34.947

addValidator() 函数接受一个优先级值作为第三个参数。大多数内置验证器的默认值为 30，除了“notblank”为 2、“regexp”为 64、“type-xxx”为 256 和“required”为 512。Parsley 停止验证最高优先级的失败测试(s)。这可以通过`priorityEnabled`设置进行配置。为了一次只获得一个，您可以创建自定义验证器，每个验证器具有不同的优先级：

```
window.Parsley.addValidator('check3', function(val, req) {
    return (val == whatever3(val, req));
// +--- Higher than check2
// v
}, 103).addMessage('en', 'check3', 'Failed check 3');

window.Parsley.addValidator('check2', function(val, req) {
    return (val == whatever2(val, req));
// +--- Higher than check1
// v
}, 102).addMessage('en', 'check2', 'Failed check 2');

window.Parsley.addValidator('check1', function(val, req) {
    return (val == whatever1(val, req));
// +--- Higher than many, lower than "required (512)" and "type-xxx (256)"
// v
}, 101).addMessage('en', 'check1', 'Failed check 1'); 
```

# r - 如何对齐多个ggplot2图并在所有图上添加阴影

> ID：15016995
> 
> 赞同：33
> 
> 时间：2013-02-22T04:44:42.703
> 
> 标签：r, ggplot2

***[请在此处下载数据！](https://www.dropbox.com/s/caftw7aiudzy9y1/SF_Question.csv)***

**目标：**绘制这样的图像：

![这](../Images/c3a7a339fc07591c86c7ba139ec8e8e5.png)

**特点：** 1\. 两种不同的时间序列；2\. 下面板有一个反向的y轴；3\. 两个地块上的阴影。

**可能的解决方案：**
1\. 刻面不合适 - (1) 不能只使一个刻面的 y 轴反转而保持其他刻面不变。(2) 难以一一调整个别方面。
2\. 使用视口使用以下代码排列单个绘图：

```
library(ggplot2)
library(grid)
library(gridExtra)

##Import data
df<- read.csv("D:\\R\\SF_Question.csv")

##Draw individual plots
#the lower panel
p1<- ggplot(df, aes(TIME1, VARIABLE1)) + geom_line() + scale_y_reverse() + labs(x="AGE") + scale_x_continuous(breaks = seq(1000,2000,200), limits = c(1000,2000))
#the upper panel
p2<- ggplot(df, aes(TIME2, V2)) + geom_line() + labs(x=NULL) + scale_x_continuous(breaks = seq(1000,2000,200), limits = c(1000,2000)) + theme(axis.text.x=element_blank())

##For the shadows
#shadow position
rects<- data.frame(x1=c(1100,1800),x2=c(1300,1850),y1=c(0,0),y2=c(100,100))
#make shadows clean (hide axis, ticks, labels, background and grids)
xquiet <- scale_x_continuous("", breaks = NULL)
yquiet <- scale_y_continuous("", breaks = NULL)
bgquiet<- theme(panel.background = element_rect(fill = "transparent", colour = NA))
plotquiet<- theme(plot.background = element_rect(fill = "transparent", colour = NA))
quiet <- list(xquiet, yquiet, bgquiet, plotquiet)
prects<- ggplot(rects,aes(xmin=x1,xmax=x2,ymin=y1,ymax=y2))+ geom_rect(alpha=0.1,fill="blue") + coord_cartesian(xlim = c(1000, 2000)) + quiet

##Arrange plots
pushViewport(viewport(layout = grid.layout(2, 1)))
vplayout <- function(x, y) 
  viewport(layout.pos.row = x, layout.pos.col = y)
#arrange time series
print(p2, vp = vplayout(1, 1))
print(p1, vp = vplayout(2, 1))
#arrange shadows
print(prects, vp=vplayout(1:2,1)) 
```

![这](../Images/ad550ef70f7fe5a248bcdad9bc1a881f.png)

**问题：**

1.  x 轴未正确对齐；
2.  阴影位置错误（因为 x 轴排列不正确）。

谷歌搜索后：

1.  我首先注意到“ggExtra 中的 align.plots()”可以完成这项工作。但是，它已被作者弃用；
2.  然后我尝试了[gglayout 解决方案](https://stackoverflow.com/questions/9198637/top-to-bottom-alignment-of-two-ggpot2-figures)，但没有运气 - 我什至无法安装“尖端”包；
3.  最后，我使用以下代码 尝试了[gtable 解决方案：](https://stackoverflow.com/questions/13656642/r-align-plot-areas-in-ggplot)

    ```
    gp1<- ggplot_gtable(ggplot_build(p1))
    gp2<- ggplot_gtable(ggplot_build(p2))
    gprects<- ggplot_gtable(ggplot_build(prects))
    maxWidth = unit.pmax(gp1$widths[2:3], gp2$widths[2:3], gprects$widths[2:3])
    gp1$widths[2:3] <- maxWidth
    gp2$widths[2:3] <- maxWidth
    gprects$widths[2:3] <- maxWidth
    grid.arrange(gp2, gp1, gprects) 
    ```

![这](../Images/591c0ac1c7a7d39e4fcb5c2f9958e641.png)

现在，上下面板的 x 轴确实对齐了。但影子位置仍然是错误的。更重要的是，我不能在两个时间序列上重叠阴影图。经过几天的尝试，我几乎放弃了......

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-22T08:26:17.327

您也可以仅使用基本绘图功能来实现此特定绘图。

```
#Set alignment for tow plots. Extra zeros are needed to get space for axis at bottom.
layout(matrix(c(0,1,2,0),ncol=1),heights=c(1,3,3,1))

#Set spaces around plot (0 for bottom and top)
par(mar=c(0,5,0,5))

#1\. plot
plot(df$V2~df$TIME2,type="l",xlim=c(1000,2000),axes=F,ylab="")

#Two rectangles - y coordinates are larger to ensure that all space is taken  
rect(1100,-15000,1300,15000,col="red",border="red")
rect(1800,-15000,1850,15000,col="red",border="red")

#plot again the same line (to show line over rectangle)
par(new=TRUE)
plot(df$V2~df$TIME2,type="l",xlim=c(1000,2000),axes=F,ylab="")

#set axis
axis(1,at=seq(800,2200,200),labels=NA)
axis(4,at=seq(-15000,10000,5000),las=2)

#The same for plot 2\. rev() in ylim= ensures reverse axis.
plot(df$VARIABLE1~df$TIME1,type="l",ylim=rev(range(df$VARIABLE1)+c(-0.1,0.1)),xlim=c(1000,2000),axes=F,ylab="")
rect(1100,-15000,1300,15000,col="red",border="red")
rect(1800,-15000,1850,15000,col="red",border="red")
par(new=TRUE)
plot(df$VARIABLE1~df$TIME1,type="l",ylim=rev(range(df$VARIABLE1)+c(-0.1,0.1)),xlim=c(1000,2000),axes=F,ylab="")
axis(1,at=seq(800,2200,200))
axis(2,at=seq(-6.4,-8.4,-0.4),las=2) 
```

![在此处输入图像描述](../Images/e60163731fb8b5b4b34bba11c88d5a93.png)

# 更新 - ggplot2 的解决方案

首先，制作两个包含矩形信息的新数据框。

```
rect1<- data.frame (xmin=1100, xmax=1300, ymin=-Inf, ymax=Inf)
rect2 <- data.frame (xmin=1800, xmax=1850, ymin=-Inf, ymax=Inf) 
```

修改了您的原始绘图代码 - 移动`data`到`aes`inside `geom_line()`，然后添加了两个`geom_rect()`调用。最重要的部分`plot.margin=`在`theme()`. 对于每个图，我将其中一个边距设置为`-1`line（上为`p1`，下为`p2`） - 这将确保该图将加入。所有其他边距应该相同。`p2`也删除了轴刻度。然后将两个图放在一起。

```
library(ggplot2)
library(grid)
library(gridExtra)
p1<- ggplot() + geom_line(data=df, aes(TIME1, VARIABLE1)) + 
  scale_y_reverse() + 
  labs(x="AGE") + 
  scale_x_continuous(breaks = seq(1000,2000,200), limits = c(1000,2000)) + 
   geom_rect(data=rect1,aes(xmin=xmin,xmax=xmax,ymin=ymin,ymax=ymax),alpha=0.1,fill="blue")+
   geom_rect(data=rect2,aes(xmin=xmin,xmax=xmax,ymin=ymin,ymax=ymax),alpha=0.1,fill="blue")+
   theme(plot.margin = unit(c(-1,0.5,0.5,0.5), "lines"))

p2<- ggplot() + geom_line(data=df, aes(TIME2, V2)) + labs(x=NULL) + 
  scale_x_continuous(breaks = seq(1000,2000,200), limits = c(1000,2000)) + 
  scale_y_continuous(limits=c(-14000,10000))+
  geom_rect(data=rect1,aes(xmin=xmin,xmax=xmax,ymin=ymin,ymax=ymax),alpha=0.1,fill="blue")+
  geom_rect(data=rect2,aes(xmin=xmin,xmax=xmax,ymin=ymin,ymax=ymax),alpha=0.1,fill="blue")+
  theme(axis.text.x=element_blank(),
        axis.title.x=element_blank(),
        plot.title=element_blank(),
        axis.ticks.x=element_blank(),
        plot.margin = unit(c(0.5,0.5,-1,0.5), "lines"))

gp1<- ggplot_gtable(ggplot_build(p1))
gp2<- ggplot_gtable(ggplot_build(p2))
maxWidth = unit.pmax(gp1$widths[2:3], gp2$widths[2:3])
gp1$widths[2:3] <- maxWidth
gp2$widths[2:3] <- maxWidth
grid.arrange(gp2, gp1) 
```

![在此处输入图像描述](../Images/09bf587086148d871da4347a4c653cff.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-11T02:25:58.787

这是 Didzis 解决方案的一个变体，它保留了中间的 x 轴，并且原则上允许在顶部图中反转 y 轴（但我没有实现）。结果如下图：

![在此处输入图像描述](../Images/d0fbc25fac2c9443c9650622445cc698.png)

这是代码。它在底部可能看起来有点复杂，但那是因为我试图将它写得尽可能通用。如果愿意在 gtable 中硬编码适当的单元格位置等，则代码可以短得多。此外，不是通过 gtable 切掉图形的各个部分，而是可以修改主题，这样一开始就不会绘制这些部分。这也可能更短。

```
require(cowplot)
data <- read.csv("SF_Question.csv")
# create top plot
p2 <- ggplot(data, aes(x=TIME2, y=V2)) + geom_line() + xlim(1000, 2000) +
  ylab("Variable 2") + theme(axis.text.x = element_blank())
# create bottom plot
p1 <- ggplot(data = data, aes(x=TIME1, y=VARIABLE1)) + geom_line() + 
  xlim(1000, 2000) + ylim(-6.4, -8.4) + xlab("Time") + ylab("Variable 1")
# create plot that will hold the shadows
data.shadows <- data.frame(xmin = c(1100, 1800), xmax = c(1300, 1850), ymin = c(0, 0), ymax = c(1, 1))
p.shadows <- ggplot(data.shadows, aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax)) + 
  geom_rect(fill='blue', alpha='0.5') +
  xlim(1000, 2000) + scale_y_continuous(limits = c(0, 1), expand = c(0, 0))

# now combine everything via gtable
require(gtable)

# Table g2 will be the top table. We chop off everything below the axis-b
g2 <- ggplotGrob(p2)
index <- subset(g2$layout, name == "axis-b") 
names <- g2$layout$name[g2$layout$t<=index$t]
g2 <- gtable_filter(g2, paste(names, sep="", collapse="|"))
# set height of remaining, empty rows to 0
for (i in (index$t+1):length(g2$heights))
{
  g2$heights[[i]] <- unit(0, "cm")
}

# Table g1 will be the bottom table. We chop off everything above the panel
g1 <- ggplotGrob(p1)
index <- subset(g1$layout, name == "panel") 
# need to work with b here instead of t, to prevent deletion of background
names <- g1$layout$name[g1$layout$b>=index$b]
g1 <- gtable_filter(g1, paste(names, sep="", collapse="|"))
# set height of remaining, empty rows to 0
for (i in 1:(index$b-1))
{
  g1$heights[[i]] <- unit(0, "cm")
}

# bind the two plots together
g.main <- rbind(g2, g1, size='first')

# add the grob that holds the shadows
g.shadows <- gtable_filter(ggplotGrob(p.shadows), "panel") # extract the plot panel containing the shadows
index <- subset(g.main$layout, name == "panel") # locate where we want to insert the shadows
# find the extent of the two panels
t <- min(index$t)
b <- max(index$b)
l <- min(index$l)
r <- max(index$r)
# add grob
g.main <- gtable_add_grob(g.main, g.shadows, t, l, b, r)

# plot is completed, show
grid.newpage()
grid.draw(g.main) 
```

我们可以使用此处显示的方法反转顶部 y 轴[。](http://rpubs.com/kohske/dual_axis_in_ggplot2)

# php - 排序php数组画廊目录

> ID：15016996
> 
> 赞同：0
> 
> 时间：2013-02-22T04:44:49.727
> 
> 标签：php, arrays, sorting

我想按数字顺序对目录的内容进行排序。目录的内容是图像。现在图像文件是随机显示的。每次将新图像添加到目录时，它都会随机显示在页面上。请指教！谢谢！

```
<?php

// set image directory
$image_dir = "main";

//Open images directory
$dir = @ dir($image_dir);
?>

<?php

//List files in images directory
while (($file = $dir->read()) !== false)
{
  // remove  dir dots
if ($file !== '.' && $file !== '..') {

// print out images
echo '<img src="'. $image_dir . '/' . $file .'" height="600" alt=""/>';

}
}
$dir->close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:53:03.163

将文件加载到数组中，然后根据需要进行排序

```
$files = array();
while (($file = $dir->read()) !== false)
{
    // remove  dir dots
    if ($file !== '.' && $file !== '..') {
        // add file to array
        $files[] = $file;
    }
}

// sort array - I recommend "natural" sort, but check what other options are available
// http://www.php.net/manual/en/array.sorting.php

natsort($files);

// print out images
foreach($files as $file) {
    echo '<img src="'. $image_dir . '/' . $file .'" height="600" alt=""/>';    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:51:06.447

将其保存在临时数组中，然后对其进行排序

```
while (($tfile = $dir->read()) !== false)$temp_arr[] = $tfile;
sort($temp_arr);
foreach(temp_arr as $file)
{
// remove  dir dots
if ($file !== '.' && $file !== '..') {

// print out images
echo '<img src="'. $image_dir . '/' . $file .'" height="600" alt=""/>';

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:52:24.837

先创建一个数组，排序，然后输出html。

```
<?php

// set image directory
$image_dir = "main";

//Open images directory
$dir = @dir($image_dir);

// create array to hold images
$images = array();

//List files in images directory
while (($file = $dir->read()) !== false)
{
    // remove  dir dots
    if ($file !== '.' && $file !== '..') {

        // add file to image array
        $images[] = $file;

    }
}

// close the directory
$dir->close();

// sort the images by number
sort($images, SORT_NUMERIC); 

// print out images
foreach ($images as $file)
{
    echo '<img src="'. $image_dir . '/' . $file .'" height="600" alt=""/>';
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T04:55:34.147

```
<?php

// set image directory
$image_dir = "main";
$images=array();

//Open images directory
$dir = @ dir($image_dir);
?>

<?php

//List files in images directory
while (($file = $dir->read()) !== false)
{
  // remove  dir dots
if ($file !== '.' && $file !== '..') {

$images[]=$file;

}
}
$dir->close();
sort($images, SORT_NUMERIC);
foreach ($images as $image) {
// print out images
    echo '<img src="'. $image_dir . '/' . $image .'" height="600" alt=""/>';
}

?> 
```

# android - 从具有两个以上联系号码的联系人中仅选择一个号码

> ID：15016999
> 
> 赞同：0
> 
> 时间：2013-02-22T04:44:56.450
> 
> 标签：android

我可以使用以下代码从联系人中检索联系人姓名和号码。我的问题是，当一个联系人有多个号码时，它会以某种方式选择其中一个，这是我不想要的。

***如果一个联系人有多个电话号码，我需要用户能够选择他想要选择的电话号码。***

这是我的代码。

```
private void pickContacts() {
                // TODO Auto-generated method stub
                Intent it = new Intent(Intent.ACTION_PICK,ContactsContract.Contacts.CONTENT_URI);           
                startActivityForResult(it,1);
            } 
```

在 onActivityResult(int requestCode,int resultCode,Intent data)

```
if(requestCode==1){
        Uri contactData = data.getData();
        Cursor c = managedQuery(contactData, null, null, null, null);
        if (c.moveToFirst()) 
        {                       
            String id = c.getString(
                    c.getColumnIndex(ContactsContract.Contacts._ID));
             name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            localEditor.putString("contactName", name);
            tv2.setText(name);      
            int hasPhone=c.getInt(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
            if(hasPhone==1){
                 Cursor pCur = getContentResolver().query(
                         ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                         null, 
                         ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                         new String[]{id}, null);
                                while(pCur.moveToNext()){

                                     number =pCur.getString(pCur.getColumnIndex(
                                            ContactsContract.CommonDataKinds.Phone.NUMBER));
                                //  Toast.makeText(getApplicationContext(), number, Toast.LENGTH_LONG).show();

                                    localEditor.putString("contactNumber", number);

                                tv3.setText(number);

                                }
                                pCur.close();
            }
        }while(c.moveToNext());

        localEditor.commit();
      //  tv2.setText(name);     
     //   tv3.setText(number);
    super.onActivityResult(requestCode, resultCode, data);
} 
```

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:16:45.787

`Cursor`有一个调用的方法`getCount`，它返回游标中的行数。您可以使用它来确定是否有多个数字并列出它们以选择一个。

试试这个...

```
if (c.getInt(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
    Cursor pCur = getContentResolver().query(
        ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
        null, 
        ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
        new String[]{id}, null);
    if(pCur.getCount() > 1) {
        int i=0;
        String[] phoneNum = new String[pCur.getCount()];
        while (pCur.moveToNext()) {
            // store the numbers in an array
            phoneNum[i] = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            i++;
        }
        // list the phoneNum array (perhaps using radiobuttons) & give the choice to select one number      
    } else {
        // do what you are doing now
        // while (pCur.moveToNext()) {
        //}     
    }
    pCur.close();
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-23T10:30:17.413

```
fun pickContact() {
                val intent = Intent(Intent.ACTION_PICK, ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);           
                startActivityForResult(intent, REQUEST_CODE_CONTACT);
            } 
```

使用 启动 android 联系人选择器`ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE`，它将允许用户为每个联系人拍摄单个手机。