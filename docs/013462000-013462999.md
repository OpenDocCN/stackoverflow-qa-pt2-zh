# StackOverflow 问答 13462000-13462999

# c# - 缓入缓出动画公式

> ID：13462001
> 
> 赞同：44
> 
> 时间：2012-11-19T20:51:39.413
> 
> 标签：c#, c++, animation, easing

比如说，如果我正在做一个对象从 X1 坐标到 X2 坐标在 S 步内以相等的时间间隔移动的 Ease-Out 然后[Ease-In 动画](http://www.cartoonsolutions.com/store/catalog/Timing-for-Animation-sp-7.html)。有人可以建议计算这个运动的 X 坐标的公式吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2014-09-08T18:14:40.083

就个人而言，我宁愿使用一个在 [0; 1]并在[0]中输出一个值；1]，这样我们就可以将结果应用于任何类型（2D 矢量，3D 矢量，...）。

## 解决方案 1

对于二次缓入/缓出，曲线根据 的值分为两个不同的函数`t`：

*   当`t`<= 0.5 时：`f(x) = 2 * x * x`x 在 [0;0.5] 中（[图表](https://www.wolframalpha.com/input/?i=plot+2*x%5E2+from+x%3D0+to+0.5)）
*   当`t`> 0.5 时：`f(x) = 2 * x * (1 - x) + 0.5`x 在 [0;0.5] 中（[图表](https://www.wolframalpha.com/input/?i=plot+2*x*%281-x%29%2B0.5+from+x%3D0+to+0.5)）

以下是图表：

[![图 - 第 1 部分](../Images/ac6fea380188cd688eddfb8ad24eb219.png)](https://i.stack.imgur.com/zrFzK.png)
[![图 - 第 2 部分](../Images/4b13da50a34fd28a9f6dc493abf5724b.png)](https://i.stack.imgur.com/R8oWi.png)

由于第二个函数也在[0;0.5]中，但是`t`当我们开始使用它时> 0.5，我们需要减少`t`0.5。

这是结果，在 C 中：

```
float InOutQuadBlend(float t)
{
    if(t <= 0.5f)
        return 2.0f * t * t;
    t -= 0.5f;
    return 2.0f * t * (1.0f - t) + 0.5f;
} 
```

## 解决方案 2（贝塞尔）

另一个有趣的混合曲线是由[Bézier](https://en.wikipedia.org/wiki/B%C3%A9zier_curve)给出的，它的优点是非常优化（如果没有）。这是[Wolfram](https://www.wolframalpha.com/input/?i=plot+t%5E2%283-2t%29+from+t%3D0+to+1)的曲线：

[![贝塞尔曲线](../Images/c93974ac8ea86be4e5807065a54431f9.png)](https://i.stack.imgur.com/CXrvd.png)

这是C代码：

```
float BezierBlend(float t)
{
    return t * t * (3.0f - 2.0f * t);
} 
```

## 解决方案3（参数函数）

@DannyYaroslavski 提出的另一种方法是[这里](https://math.stackexchange.com/questions/121720/ease-in-out-function/121755#121755)提出的简单公式。

它是参数化的，并获得了很好的输入/输出加速和减速。

使用 alpha = 2，您将获得以下功能：

![曲线](../Images/84b3bcf556dff126bc3746fc7ab7a77b.png)

在 C 中翻译如下：

```
float ParametricBlend(float t)
{
    float sqt = t * t;
    return sqt / (2.0f * (sqt - t) + 1.0f);
} 
```

**编辑 1：**从@DannyYaroslavski 添加解决方案 3
**编辑 2：**更好地解释解决方案 1
**编辑 3：**将图表添加到所有解决方案

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-11-19T21:00:17.567

二次缓和：

t = 当前时间
b = 起始值
c = 值变化
d = 持续时间

```
 function (float time, float startValue, float change, float duration) {
     time /= duration / 2;
     if (time < 1)  {
          return change / 2 * time * time + startValue;
     }

     time--;
     return -change / 2 * (time * (time - 2) - 1) + startValue;
 }; 
```

来源： http: [//gizma.com/easing/](http://gizma.com/easing/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-27T10:31:56.067

以上所有解决方案都缺少使用示例。

[在这里](https://javascript.info/js-animation)找到了很好的解决方案：

```
 function animate({timing, draw, duration}) {

  let start = performance.now();

  requestAnimationFrame(function animate(time) {
    // timeFraction goes from 0 to 1
    let timeFraction = (time - start) / duration;
    if (timeFraction > 1) timeFraction = 1;

    // calculate the current animation state
    let progress = timing(timeFraction)

    draw(progress); // draw it

    if (timeFraction < 1) {
      requestAnimationFrame(animate);
    }

  });
} 
```

使用示例：

```
animate({
  duration: 1000,
  timing(timeFraction) { // here you can put other functions
    return timeFraction;
  },
  draw(progress) {
    elem.style.width = progress * 100 + '%';
  }
}); 
```

其他功能：

```
function quad(timeFraction) {
  return Math.pow(timeFraction, 2)
} 
```

更多[在这里](https://javascript.info/js-animation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-22T06:39:48.370

我遇到了同样的问题：想为我的图表设置动画`(Ease in-out)`。

头脑风暴给了我两种方法：

1) 三角函数公式。首先，我写了`y=(sin(x/π*10-π/2)+1)/2`，哪个模拟是`sin^2((5*x)/π)`

```
float TrygoEase (float x) {
    float y=(float)Math.pow(Math.sin(5*x/Math.PI),2);
    return y;
} 
```

2) 两条抛物线。这并不难。我刚用过`y=2*x*x`_`[0;0.5]``y=-2(x-1)^2+1``[0.5;1]`

```
float ParabolEase(float x) {
    float y=2*x*x;
    if(x>0.5f){
        x-=1;
        y=-2*x*x+1;
    }
    return y;
} 
```

用这种方式`x=[0;1]`，什么回报也`y=[0;1]`。

现在您可以比较这些图表：

[![在此处输入图像描述](../Images/67debe4ba2e0cc6e9b51aa09503bf9b5.png)](https://i.stack.imgur.com/S6wgs.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T08:02:07.377

这是一个以曲率量为参数的版本，遵循Creak 链接的[这个通用解决方案](https://math.stackexchange.com/questions/121720/ease-in-out-function/121755#121755)。

```
/*
* applyCurve: apply an S-curve to an input value.
* The highest positive curvature will result in a step from 0 to 1,
* the most negative curvature will result in a constant of 0.5.
*
* progress: the input value between 0 and 1,
* curvature: the amount of curvature between -1 and 1.
*  Negative values curve the other way, 0 applies no curvature.
*/

double applyCurve(double progress, double curvature) {
    assert(progress >= 0.0 && progress <= 1.0);
    assert(curvature >= -1.0 && curvature <= 1.0);

    if (curvature >= 0.0) {
        if (curvature > 0.99999) return progress > 0.5 ? 1.0 : 0.0;

        float exp = 1.0 / (1.0 - curvature); // find s-curve exponent
        return pow(progress, exp) / (pow(progress, exp) + pow(1.0 - progress, exp)); // apply s-curve
    } else {
        if (curvature < -0.99999) return 0.5;

        float exp = 1.0 + curvature; // find s-curve exponent
        return pow(progress, exp) / (pow(progress, exp) + pow(1.0 - progress, exp)); // apply s-curve
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-30T13:06:39.243

此版本允许您使用任何缓入和缓出功能（EaseIn 和 EaseOut）。这两个函数都必须接受一个介于 0 和 1 之间的时间值参数，并返回一个介于 0 和 1 之间的缓动时间值。

```
float EaseInOut(float t)
{
    if (t <= 0.5f)
    {
        return EaseIn(t * 2) * 0.5f;
    }
    else
    {
        t -= 0.5f;
        return (EaseOut(t * 2) * 0.5f) + 0.5f;
    }
} 
```

# python - 在python中分隔克拉A

> ID：13462006
> 
> 赞同：2
> 
> 时间：2012-11-19T20:51:50.960
> 
> 标签：python, hadoop, hadoop-streaming

### 我有表格中的数据：

```
37101000ssd48800^A1420asd938987^A2011-09-10^A18:47:50.000^A99.00^A1^A0^A
37101000sd48801^A44557asd03082^A2011-09-06^A13:24:58.000^A42.01^A1^A0^A 
```

所以首先我从字面上理解并尝试：

```
line = line.split("^A") 
```

并且

```
line = line.split("\\u001") 
```

### 所以，问题是：

如果我这样做，第一种方法适用于我的本地机器：

```
cat input.txt | python mapper.py 
```

它在本地运行良好（input.txt 是上述数据），但在 hadoop 流集群上失败。

有人告诉我应该使用`"\\u001"`分隔符，但这在我的本地机器或集群上也不起作用。

### 对于 hadoop 人：

如果我在本地调试它：

```
cat input.txt | python mapper.py | sort | python reducer.py 
```

这运行得很好，如果我`"^A"`在本地使用分隔符但在集群上运行时出现错误，并且错误代码也不是很有帮助......

关于如何调试它的任何建议？
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:12:12.200

如果原始数据使用 control-A 作为分隔符，并且它只是像`^A`您用来列出数据的任何内容一样打印，您有两种选择：

1.  将您使用列表中的任何数据通过管道传输到使用`split('^A')`.

2.  只需用于`split('\u001')`拆分实际的 control-A 值。

后者几乎总是你真正想要的。这对您不起作用的原因是您编写了`split('\\u001')`，转义了反斜杠，因此您在文字字符串`\u001`上而不是在 control-A 上进行拆分。

如果原始数据实际上有`^A`（一个插入符号后跟一个`A`）作为分隔符，只需使用`split('^A')`.

# ios - MKPinAnnotationView pin颜色

> ID：13462007
> 
> 赞同：3
> 
> 时间：2012-11-19T20:51:57.743
> 
> 标签：ios, mapkit, mkpinannotationview

我无法弄清楚为什么与 MKPointAnnotation 关联（理论上）的 MKPinAnnotationView 没有出现在地图上。事实上，图钉出现了，但它不是应有的紫色......

这是代码：

```
MKPointAnnotation *myPersonalAnnotation= [[MKPointAnnotation alloc]init];
myPersonalAnnotation.title= [appDelegate.theDictionary objectForKey:@"theKey"];
myPersonalAnnotation.coordinate=CLLocationCoordinate2DMake(6.14, 10.7);
MKPinAnnotationView *myPersonalView=[[MKPinAnnotationView alloc] initWithAnnotation:myPersonalAnnotation reuseIdentifier:@"hello"];
myPersonalView.pinColor=MKPinAnnotationColorPurple;
[myMap addAnnotation:myPersonalAnnotation]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:01:27.480

如果你想创建一个不同于默认红色引脚的注释视图，你必须在地图视图的`viewForAnnotation`委托方法中创建并返回它。

`viewForAnnotation`每当需要显示一些注释（内置用户位置或您添加的注释）时，地图将自动调用委托方法。

`myPersonalView`在调用 to 之前删除本地创建的from`addAnnotation`并改为实现该`viewForAnnotation`方法。

例如：

```
//in your current method...
MKPointAnnotation *myPersonalAnnotation= [[MKPointAnnotation alloc]init];
myPersonalAnnotation.title= [appDelegate.theDictionary objectForKey:@"theKey"];
myPersonalAnnotation.coordinate=CLLocationCoordinate2DMake(6.14, 10.7);
[myMap addAnnotation:myPersonalAnnotation];

//...

//add the viewForAnnotation delegate method...
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    //if annotation is the user location, return nil to get default blue-dot...
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    //create purple pin view for all other annotations...
    static NSString *reuseId = @"hello";

    MKPinAnnotationView *myPersonalView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:reuseId];
    if (myPersonalView == nil)
    {
        myPersonalView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseId];
        myPersonalView.pinColor = MKPinAnnotationColorPurple;
        myPersonalView.canShowCallout = YES;
    }
    else
    {
        //if re-using view from another annotation, point view to current annotation...
        myPersonalView.annotation = annotation;
    }

    return myPersonalView;
} 
```

确保`delegate`设置了地图视图的属性，否则不会调用委托方法。
在代码中，使用`myMap.delegate = self;`（例如 in `viewDidLoad`）或在 Interface Builder 中建立连接（如果`myMap`是`IBOutlet`.

# asp.net-mvc - 未找到 w3wp 进程

> ID：13462016
> 
> 赞同：121
> 
> 时间：2012-11-19T20:52:22.587
> 
> 标签：asp.net-mvc, windows, visual-studio-2010, iis, process

我使用 Visual Studio 2010 在我的本地机器上调试一个 asp.net MVC 项目。步骤是：

单击调试并尝试附加进程“w3wp.exe”。但是它不在列表中。

我确定单击“显示所有会话中的进程”。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-11-19T21:01:12.147

w3wp.exe 不会显示在正在运行的进程中，除非确实有 Web 应用程序的实例正在运行。

首先尝试访问您的网页，当它第一次显示时，尝试附加您的调试器。现在应该显示该过程。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2013-11-23T22:47:38.993

您需要单击任务管理器列表底部的显示所有用户的进程。这是我需要做的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-02-27T19:55:21.057

1.  重新启动 IIS
2.  右键单击您的网站>>管理网站>>浏览
3.  返回 Visual Studio 刷新进程列表

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-09-25T03:44:30.047

尝试检查：“显示所有用户的进程”当在左下角的“附加到进程”窗口中有一个复选框“显示所有用户的进程”

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-05-17T09:41:13.360

一个简单的方法，当 w3wp 没有出现在列表中时，打开浏览器并输入 localhost，然后输入。之后 w3wp 出现在列表中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-12-28T14:07:52.597

> 仅仅因为启动了 IIS 应用程序池，可能没有 IIS 工作进程`w3wp`在运行。在收到第一个 Web 请求之前，IIS 不会启动工作进程。

就我而言，我首先启动了应用程序，但仍然找不到`w3wp.exe`. 然后我从 ( `IIS->Worker Process -> Process Id`) 中取出工作进程 ID，然后在详细信息选项卡中按 id 搜索并找到它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-04-12T05:14:13.247

1.  清除解决方案
2.  重建解决方案
3.  `iisreset`通过在命令提示符中编写命令来重置 IIS
4.  转到 IIS 并浏览您的网站
5.  以管理员身份运行 VS
6.  工具 -> 附加到进程 -> 确保选中*“显示所有用户的进程”*复选框
    -> w3wp.exe
7.  附加到 w3wp.exec

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-16T19:28:30.930

GoTo Web Project properties -> Select (Web) on the left sidebar -> GoTo under (Servers) header -> Click to dropdown and select`"Local IIS"`

并申请。然后，当您开始调试时，您将在进程列表中看到 w3wp.exe。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-28T12:57:45.353

如果您使用 Advanced Rest Client 之类的东西来测试路由，请再次调用您的路由，然后刷新进程列表，它将显示

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-09-16T20:19:30.463

我刚刚遇到了这个问题 - 您可能还想仔细检查您的主机设置并确认您实际上指向的是 localhost 而不是生产服务器。

我忘记了我被指向了一个远程服务器，因此，尽管我正在访问该站点，但它不是本地的任何东西，因此 w3wp 没有运行，尽管我表面上能够看到该站点正在运行。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-07-16T14:10:58.310

就我而言，一旦我重建 Web 项目并提高连接超时限制（以秒为单位），它会自动显示在调试/附加到进程列表中并继续工作。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-12-21T06:16:37.087

就我而言，我没有在管理员模式下打开 Visual Studio，这就是 w3wp.exe 没有显示在列表中的原因。

当我在管理员模式下打开 Visual Studio 时，它工作了。

右键单击 Visual Studio -> 在管理员模式下打开。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-03T11:20:31.920

尝试以下步骤：

1.  从解决方案资源管理器创建虚拟路径。

2.  转到 inetmgr 以确认您自己的池已创建。

3.  转到附加进程 (Ctrl+Alt+P) 并显示所有用户的进程。

4.  然后你会看到 w3wp.exe 会在那里。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-10T19:52:31.883

请注意，即使在跳过所有这些障碍之后（使用 Web 浏览器启动实例，以管理员身份启动远程调试会话，确保选中“显示所有用户”等，确保您不在服务器上农场等），您有时可能仍然不走运。

有时远程进程（在我的情况下通常是 WCF 服务）根本不会显示在要附加到的进程列表中，并且对此无能为力。我总是小心翼翼地让我的目标进程易于识别，方法是将其保存在某个应用程序池中。有时你就是无法从这里到达那里。这无疑是微软做过的远程调试最令人沮丧的事情。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-06-27T08:01:32.950

就我而言，问题在于我没有以管理员身份运行 Visual Studio。我的机器在更新后重新启动并重新启动了所有以前运行的进程，但只在非管理员模式下重新启动了 VS。当我以管理员模式重新启动 VS 时，**w3wp.exe**进程再次可用于调试。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-09-30T12:14:59.880

我也想为未来的读者分享我的经验。

请注意，如果您有**Web 服务器集群**配置（用于负载平衡等），该`w3wp`过程可能不会在您期望的同一台机器上启动。

除非您的网站配置为仅在**单个 IIS 实例**上运行，否则该`w3wp`进程可能会在您的 Web 集群内的其他机器之一上运行。

这可能是网络团队/部门的错误配置或预期行为。我没有必要的经验来准确指出它应该如何配置。

在 MSDN 上也找到了相关页面：

[https://msdn.microsoft.com/en-us/library/bb742600.aspx](https://msdn.microsoft.com/en-us/library/bb742600.aspx)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-07-24T18:22:25.683

以管理员身份运行远程调试器。我按照每个建议来解决问题，但直到我以管理员身份运行远程调试器后，我才能够看到 w3wp 进程

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-06-06T12:46:57.667

就我而言，我需要从一个 Visual Studio 连接到从另一个 VS Studio 窗口运行的进程。
接下来是问题：以管理员权限启动了一个 VS。要解决该问题，您应该使用管理员权限启动两个 VS。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-26T07:38:51.740

我的回答肯定会迟到，但也许我的回答会对某人有所帮助。

1.  转到 IIS。
2.  应用程序池。
3.  提前设置。
4.  启用 32 位应用程序。 [![在此处输入图像描述](../Images/eb736f7bf7b3a59da9a223395180fe6b.png)](https://i.stack.imgur.com/82br8.png) 使您的应用程序在**启用 32.bit Application**下运行。

# variables - 如何将 powershell 变量传递给 CMD 命令？

> ID：13462020
> 
> 赞同：0
> 
> 时间：2012-11-19T20:52:44.937
> 
> 标签：variables, powershell, cmd, scheduled-tasks, windows-task-scheduler

我正在尝试通过 powershell 运行以下命令：

```
schtasks /query /s $compname /v /fo csv | ConvertFrom-Csv 
```

$compname 在 powershell 脚本的第一部分设置，但不能像这样传递到命令中。例如，当我尝试传入 $localhost 时，我收到以下错误：

```
ERROR: Invalid syntax. Value expected for '/s'.
Type "SCHTASKS /QUERY /?" for usage. 
```

有没有办法将变量传递给这个命令？我不打算更改为 powershell 的本机方式来访问计划任务（通过 COM 对象）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:49:23.517

试试这个：

```
Invoke-Expression -Command "schtasks /query /s $compname /v /fo csv" | ConvertFrom-Csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:57:38.523

为我工作，在 v2 中测试。如果将变量括在双引号中（例如“$compname”）会有所帮助吗？

```
$compname = 'localhost'
schtasks /query /s $compname /v /fo csv | ConvertFrom-Csv 
```

# python - cx_oracle 错误处理问题

> ID：13462025
> 
> 赞同：0
> 
> 时间：2012-11-19T20:53:09.550
> 
> 标签：python, cx-oracle

我正在尝试在 cx_Oracle 中执行以下查询，但在执行时出现以下错误：

```
 print 'Error.code    =', error.code
AttributeError: 'str' object has no attribute 'code' 
```

代码：

```
try:
    conn.exec("Select * from table1")
except cx_Oracle.DatabaseError, ex:
    error, = ex.args    
    print 'Error Inserting Field Base'
    print 'Error.code    =', error.code
    print 'Error.message =', error.message
    print 'Error.offset  =', error.offset
    conn.rollback() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:49:39.187

我认为这是一种更好的方法。如果没有获得更多详细信息，我不确定您的代码有什么问题，但请尝试一下，我希望这会很有用。

```
In [10]: connstr="%s/%s@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=%s)(PORT=%d))(CONNECT_DATA=(SERVICE_NAME=%s)))" % tuple(db[0:5])
In [11]: try: 
   ....:     conn = cx_Oracle.connect(connstr)
   ....:     query = 'select * from table_name limit 1;'
   ....:     curs = conn.cursor()
   ....:     curs.arraysize=50
   ....:     curs.execute(query)
   ....:     curs.close()
   ....:     conn.close()
   ....: except cx_Oracle.DatabaseError, ex:
   ....:     error, = ex.args
   ....:     print 'Error.code =', error.code
   ....:     print 'Error.message =' , error.message
   ....:     print 'Error.offset =', error.offset
   ....:     conn.rollback()
   ....:     
Error.code = 933
Error.message = ORA-00933: SQL command not properly ended

Error.offset = 31 
```

# ios - 为什么 CGContextSetShadowWithColor 也会改变当前的填充颜色？

> ID：13462028
> 
> 赞同：1
> 
> 时间：2012-11-19T20:53:20.330
> 
> 标签：ios, macos, core-graphics

我正在`-drawRect:`绘制一些自定义视图。通常，我正在绘制一个带有阴影的填充圆角矩形贝塞尔路径。但是，我遇到了一个烦人的问题：当我设置阴影颜色时，填充颜色也变成了相同的颜色！

这是核心图形中的错误还是我在这里遗漏了什么？这是我试图用阴影绘制路径的代码示例。`translucentBlack`和`highlight`是两个不同的`UIColor`对象，但绘制的是一个圆角矩形，其中填充了高光颜色以及高光颜色中的阴影。

```
UIBezierPath* blackTranslucentRoundedRectPath = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(CGRectGetMinX(frame) + 5, CGRectGetMinY(frame) + 5, CGRectGetWidth(frame) - 10, CGRectGetHeight(frame) - 10) cornerRadius: 8];
CGContextSetShadowWithColor(context, highlightOffset, highlightBlurRadius, highlight.CGColor);
[translucentBlack setFill];
[blackTranslucentRoundedRectPath fill]; 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:32:13.650

发生的事情是，您可以通过**半透明**的黑色看到您的突出显示颜色。将 更改`translucentBlack`为任何不透明的颜色（使其 alpha 等于 1.0），您应该没问题。

# c# - 通过服务删除时非法尝试将集合与两个打开的会话错误相关联

> ID：13462030
> 
> 赞同：1
> 
> 时间：2012-11-19T20:53:24.117
> 
> 标签：c#, nhibernate, service, fluent-nhibernate

有几篇与此错误相关的帖子，但我遇到了一些不同的问题。

非常简单的 NHibernate 场景。具有一对多关系的父表和子表。一位家长可以有多个孩子。

我需要删除带有子记录的父记录，因此我将非常基本的代码放在一起，效果很好：

```
var childRecordList = new List<ChildRecord>();

var parentRecord = ParentRecordRepository.Get(parentRecordId);
childRecordList = ChildRecordRepository.GetAll().Where(c=>c.ParentRecord.Id==parentRecord.Id);

foreach(var childRecord in childRecordList)
{
 ChildRecordRepository.Delete(childRecord);
}

ParentRecordRepository.Delete(parentRecord); 
```

作品。删除子记录和父记录。

如果我采用上面的逻辑并将其转换为“服务”方法，`DeleteRecord(ParentRecord parentRecord)`则它开始失败并出现**非法尝试将集合与两个打开的会话相关联**错误`ParentRecordRepository.Delete(parentRecord);`

通过实例化一个服务类然后调用 DeleteRecord 方法来调用服务：

```
var parentRecord = ParentRecordRepository.Get(id);

var recordService = new RecordService();
recordService.DeleteRecord(parentRecord); 
```

想不通为什么。帮助 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:39:59.153

根据您的工作示例，我对您`ParentRepository`为填充其孩子所做的工作有些怀疑。如果您正确设置了级联选项并且映射包括与父对象的子对象定义，那么您不应该单独删除子对象，并且删除父对象将起作用，包括按预期删除子对象。如果我不得不猜测，我会期待看到类似的东西：

```
ChildRecordRepository.GetAll().Where(c=>c.ParentId == Id); 
```

在父调用堆栈中的某个`Repository.Get`位置，父存储库和子存储库使用不同的`Session`实例。

或许提供父子的映射配置，以及父`Get()`方法的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:00:29.077

I tried creating a session by instantiating an instance of the repository and then doing operation on an object pulled from it. Then I would open a new session of the repository within the Service layer and try to delete the object passed from the controller created session with it. That was the problem.

The bottom line is the same session has to used to both get and delete an object.

# ios - iOS：调整所有 UILabel 字体以匹配

> ID：13462032
> 
> 赞同：0
> 
> 时间：2012-11-19T20:53:28.633
> 
> 标签：ios, cocoa-touch, uilabel, autoresize

我有几个用文本填充的 UILabel。

UILabel 中的所有字体都设置为自动收缩。

如果其中一个 UILabel 包含太多文本（并且必须自动调整大小），那么我该如何更改剩余的 UILabel 字体大小以匹配已调整大小的字体？

在我的代码末尾，我使用了以下内容：

```
 if (self.label.font.pointSize < 16){

        labelTwo.font = [UIFont fontWithName:@"Noteworthy-Bold" size:self.label.font.pointSize]; 
```

我的默认字体大小是 16，所以我正在检查字体大小是否已减小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:59:50.827

我现在不在我的 Mac 上，所以我不能为你编写实际的代码，但我可以为你伪造它，这样你就知道该往哪个方向发展了。

```
Create a variable to store the smallest font size.
Foreach for each UILabel in the view.
Get the font size.
Check the font size against the smallest known so far.
    If the font size is smaller than the smallest known, save it.
    Else, disregard.
After all UILabels in view have been checked go back through them, and set the font size to that of the saved value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T11:14:33.440

这就是我实现它的方式

```
CGFloat fontSize = self.label1.font.pointSize;
CGFloat fontSize1 = self.label2.font.pointSize;
CGFloat fontSize2 = self.label3.font.pointSize;
NSArray *numbers = @[[NSNumber numberWithFloat:fontSize],[NSNumber numberWithFloat:fontSize1],[NSNumber numberWithFloat:fontSize2]];
float xmax = -MAXFLOAT;
float xmin = MAXFLOAT;
for (NSNumber *num in numbers) {
    float x = num.floatValue;
    if (x < xmin) xmin = x;
    if (x > xmax) xmax = x;
    NSLog(@"lowest number = %f",xmin); 
```

# php - Windows 版 Chrome 中的新日期失败

> ID：13462036
> 
> 赞同：0
> 
> 时间：2012-11-19T20:53:42.593
> 
> 标签：php, javascript, datetime, timezone

使用 Symfony2.0 和 jQuery，我有一个 Web 应用程序，在某些时候必须在数据库中保存一些日期数据。

它适用于 Mac 版 Safari、Firefox 和 Chrome。它适用于 Internet Explorer、Firefox for Windows。

问题仅适用于 Windows 版 Chrome。

而且我知道问题出在哪里，虽然我不知道如何解决它。

简单：我从 javascript 获取日期：

```
var my_date = new Date(); 
```

在它工作的浏览器中，`my_dates`值：

```
Mon Nov 19 2012 21:47:41 GMT+0100 (CET) 
```

在它不起作用的浏览器中（仅适用于 Windows 的 Chrome），`my_dates`值：

```
Mon Nov 19 2012 21:47:41 GMT+0100 (Hora estándar romance) 
```

然后，在服务器端，php 说：

```
DateTime::__construct(): Failed to parse time string(Mon Nov 19 2012 21:47:41 GMT+0100 (Hora estándar romance)) at position 40(e): Double timezone specification. 
```

因此，一方面，Windows 版 Chrome 正在生成`(Hora estándar romance)`. 另一方面，PHP 有点发现我正在通过两个时区规范。

任何人都知道如何在客户端或服务器端解决这个问题？（或两者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:58:27.583

您可能想要传递的不是`Date`对象，而是类似`my_dates.toTimeString()`或其他转换为更机器可读的东西（比如`my_dates.valueOf()`也许.

# jquery - 使用数据表插件管理列表

> ID：13462040
> 
> 赞同：1
> 
> 时间：2012-11-19T20:53:55.770
> 
> 标签：jquery, asp.net-mvc, jquery-datatables

我正在使用[DataTables](http://datatables.net/)插件对表格进行排序和分页。但是当我尝试在使用分页时提交表单时，插件没有按预期工作（至少对我而言）。

例如：如果总记录为 14，页面大小为 10，当我导航到第 2 页并提交页面时，只有 4 条记录而不是 14 条记录发布到服务器。

我假设插件在不干扰内容的情况下动态执行操作，但事实并非如此，当我导航到其他页面时会重新生成 html 表，从而丢失第 1 页标记/内容。

任何见解表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:59:21.153

我的错误，我错过了文档以及一个可能对其他人也有帮助的线程。

[带有选中复选框的分页。复选框仅适用于当前分页页面。jQuery 数据表](https://stackoverflow.com/questions/6020574/pagination-with-selected-check-boxes-checkboxes-will-only-work-on-current-pagin)

# c# - 无法填充由 svcutil off wsdl 生成的类

> ID：13462041
> 
> 赞同：2
> 
> 时间：2012-11-19T20:53:58.970
> 
> 标签：c#, xml, wcf, serialization

更新：2012 年 11 月 26 日我已经使用 wsdl.exe 而不是 svcutil 更新了我的自动生成的 c# 类，因此我可以在代理类中获取 SOAP 属性（我正在调用 SOAP 服务）。我最初的问题是序列化，但在 markus 的帮助下，我现在可以序列化了。但现在我从服务中得到一个错误：

无效的请求对象：它必须是一个查询请求

当我对其进行硬编码时起作用的xml：

```
<xml version="1.0"?><Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
<Header/><Body>
<QueryRequest xmlns="http://emkt.pjm.com/emkt/xml">
<QueryMarketResults type="Virtual" day="2012-11-16"><All/>
</QueryMarketResults></QueryRequest></Body></Envelope> 
```

它生成的xml是：

```
<?xml version="1.0" encoding="utf-16"?>
<QueryRequest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://emkt.pjm.com/emkt/xml">
  <QueryMarketResults day="2012-11-16" type="Virtual">
    <All />
  </QueryMarketResults>
</QueryRequest> 
```

我缺少信封和身体标签。我尝试如下序列化，但收到错误“生成 XML 文档时出错”。

```
XmlTypeMapping myTypeMapping = (new SoapReflectionImporter().ImportTypeMapping(typeof (QueryRequest)));
XmlSerializer serializer = new XmlSerializer(myTypeMapping); 
```

以下是相关的代理类：（我在 QueryRequest 下面添加了 [XmlRoot] 属性，它确实添加了正确的命名空间）

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=false, Namespace="http://emkt.pjm.com/emkt/xml")]
[XmlRoot(Namespace = "http://emkt.pjm.com/emkt/xml")]
public partial class QueryRequest {

    private object[] itemsField;

    private ItemsChoiceType1[] itemsElementNameField;

    [System.Xml.Serialization.XmlElementAttribute("QueryPortfolios", typeof(QueryPortfoliosType))]
    [System.Xml.Serialization.XmlElementAttribute("QueryVirtualBid", typeof(QueryByAllLocationDayType))]
    [System.Xml.Serialization.XmlChoiceIdentifierAttribute("ItemsElementName")]
    public object[] Items {
        get {
            return this.itemsField;
        }
        set {
            this.itemsField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("ItemsElementName")]
    [System.Xml.Serialization.XmlIgnoreAttribute()]
    public ItemsChoiceType1[] ItemsElementName {
        get {
            return this.itemsElementNameField;
        }
        set {
            this.itemsElementNameField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://emkt.pjm.com/emkt/xml", IncludeInSchema=false)]
public enum ItemsChoiceType1 {
    QueryPortfolios,
    QueryVirtualBid,
} 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:02:08.240

构造函数不会为数组分配任何值，因此它们将为空。

尝试这个：

```
var qr = new QueryRequest
{
    ItemsElementName = new ItemsChoiceType1[] {
        ItemsChoiceType1.QueryMarketResults,
    },
    Items = new object[] {
        new QueryByAllLocationDayTypeType
        {
            ItemElementName = ItemChoiceType3.All,
            Item = new QueryAllType(),
            day = Convert.ToDateTime("2012-11-16"),
            type = MarketQueryTypeType.Virtual,
        },
    },
} 
```

或者，等效地没有对象初始化器：

```
var qmr = new QueryByAllLocationDayTypeType();
qmr.ItemElementName = ItemChoiceType3.All;
qmr.Item = new QueryAllType();
qmr.day = Convert.ToDateTime("2012-11-16");
qmr.type = MarketQueryTypeType.Virtual;

var qr = new QueryRequest();
qr.ItemsElementName = new ItemsChoiceType1[1];
qr.ItemElementName[0] = ItemsChoiceType1.QueryMarketResults;
qr.Items = new object[1];
qr.Items[0] = qmr; 
```

# ios - 是否可以将一系列块代码存储在一个数组中并在需要时执行它？

> ID：13462045
> 
> 赞同：2
> 
> 时间：2012-11-19T20:54:07.373
> 
> 标签：ios, closures, objective-c-blocks

> **可能的重复：**
> [将块存储在数组中](https://stackoverflow.com/questions/7997666/storing-blocks-in-an-array)

我正在编写一个应用程序，有时我想在某些事件发生后根据某些条件运行某些代码。当需要执行此代码时，此代码可能在多个位置访问不在作用域内的函数中的变量。是否可以将这些语句作为块存储在数组中，并在事件发生时一一执行。如果是，我如何访问前一个范围的变量？

我想把它做成一个闭包数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:14:26.880

`Block_copy`当您将块存储在数组中并完成处理时，您可以通过使用块上的函数将块移动到堆中`Block_release`。`Block_copy`会将执行块变量移动到堆中，这样当您继续运行应用程序时，变量不会在堆栈内存中被覆盖。

使用 Block_copy 的示例。你需要先做一个桥接

像这样在标题中为您的块类型定义一个 typedef。此类型示例没有参数。

```
typedef void (^myBlockType)(); 
```

当您想向数组中添加一个块时，您可以像这样复制该块：

```
- (void)addBlock:(void (^)())aBlock
{
        [mutableBlockArray addObject:(__bridge myBlockType)Block_copy((__bridge void *)aBlock)];
} 
```

完成块后，您需要像这样释放它（ARC 不需要）：

```
id finishBlock = [mutableBlockArray objectAtIndex:index]
Block_release((__bridge void *)finishBlock); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:28:21.343

正如@foggzilla 所说，您需要先复制该块，然后才能将其放入 NSMutableArray （或类似的）中。

例如

```
[myArray addObject:[myBlock copy]]; 
```

The copy selector maps straight onto the Block_copy function, so there's no need to use that. AFAIK you don't need to release the block if you're using ARC.

You *must* always copy the block before putting it in a collection.

# objective-c - 自定义 UIView 不显示旁白的可访问性

> ID：13462046
> 
> 赞同：5
> 
> 时间：2012-11-19T20:54:09.243
> 
> 标签：objective-c, ios, cocos2d-iphone, accessibility, uiaccessibility

我正在尝试使用 openGL 视图进行配音，特别是来自 cocos2d 框架。

从Apple Accessibility guide我遵循了这个部分：[使自定义容器视图的内容可访问](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html#//apple_ref/doc/uid/TP40008785-CH102-SW9)

我已经将视图（cocos2d 人的 CCGLView）子类化，它是一个 UIView，以实现非正式的 UIAccessibilityContainer 协议。

**我的子类 UIView 中的 UIAccessibilityContainer 实现：**

```
-(NSArray *)accessibilityElements{
return [self.delegate accessibleElements];
}

-(BOOL)isAccessibilityElement{
return NO;
}
-(NSInteger)accessibilityElementCount{
return [self accessibilityElements].count;
}
-(NSInteger)indexOfAccessibilityElement:(id)element{
return [[self accessibilityElements] indexOfObject:element];
}
-(id)accessibilityElementAtIndex:(NSInteger)index{
return [[self accessibilityElements] objectAtIndex:index];
} 
```

此代码被调用并`-(NSArray *)acessibilityElements`返回 UIAccessibilityElements 数组。但是，当我触摸屏幕时，没有显示语音控制。关于我缺少什么或做错了什么的任何想法？

**其他信息：**

我正在使用情节提要并将 CCGLView 添加到情节提要中的 UIView 中。_director.view 是我子类化的 CCGLView。

```
 // Add the director as a child view controller.
[self addChildViewController:_director];

// Add the director's OpenGL view, and send it to the back of the view hierarchy so we can place UIKit elements on top of it.
[self.view addSubview:_director.view];
[self.view sendSubviewToBack:_director.view]; 
```

有一段时间我怀疑是因为我添加了导致它不显示的子视图，但我也尝试以相同的方式在情节提要中对 UIView 进行子类化，但它也不起作用。

这也是我在数组中创建每个 UIAccessibilityElement 的方式。

```
UIAccessibilityElement *elm = [[UIAccessibilityElement alloc] initWithAccessibilityContainer:view];
    elm.accessibilityFrame = f;
    elm.accessibilityLabel = t.letter;
    elm.isAccessibilityElement = YES;
    elm.accessibilityHint = @"Button";
    elm.accessibilityValue = t.letter;
    elm.accessibilityTraits = UIAccessibilityTraitButton; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:56:10.443

找到一个现在有效的解决方案，以防万一有人遇到这个问题。 `-(id)accessibilityElementAtIndex:(NSInteger)index`正在返回一个正确的`UIAccessibilityElement`，但看起来它没有被任何使用它的 Accessibility API 保留。我制作了一个强大的 NSArray 属性来保存 UIAccessibilityElements，现在它工作正常。

# python - 如何从列表中删除大于python中特定值的随机整数？

> ID：13462058
> 
> 赞同：-2
> 
> 时间：2012-11-19T20:55:19.713
> 
> 标签：python, list, random, integer

我有一个清单：

```
a = [1,3,5,657,78,43,7,2,123, 43, 321, 4531] 
```

我想从此列表中删除 1 个大于 100 的随机整数。如何执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T20:57:37.223

```
In [55]: a
Out[55]: [1, 3, 5, 657, 78, 43, 7, 2, 123, 43, 321]

In [56]: a = [1,3,5,657,78,43,7,2,123, 43, 321, 4531]

In [57]: a.pop(random.choice([i for i,num in enumerate(a) if num>100]))
Out[57]: 4531

In [58]: a
Out[58]: [1, 3, 5, 657, 78, 43, 7, 2, 123, 43, 321] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:07:02.483

首先，获取超过 100 的所有元素的索引列表：

```
dels = [i for i, val in enumerate(a) if val > 100] 
```

现在从该列表中选择一个：

```
index = random.choice(dels) 
```

现在从原始列表中删除该索引：

```
del a[index] 
```

把它们放在一起：

```
>>> a = [1,3,5,657,78,43,7,2,123, 43, 321, 4531]
>>> dels = [i for i, val in enumerate(a) if val > 100]
>>> index = random.choice(dels)
>>> del a[index]
>>> a
[1, 3, 5, 657, 78, 43, 7, 2, 43, 321, 4531] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T20:58:36.787

如果你的列表中有**很多**大于 100 的数字，你可以在列表的开头和结尾之间选择一个索引，如果它大于 100，则将其删除，否则选择另一个。

如果你**没有很多**优于 100 的元素，你应该将优于 100 的元素保存在一个数组中，随机选择其中一个，然后从原始数组中删除它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T20:58:16.913

创建超过 100 的整数的索引列表，随机选择其中一个索引，然后从列表中删除该索引

# arrays - perl逐字符比较两个数组

> ID：13462069
> 
> 赞同：1
> 
> 时间：2012-11-19T20:56:23.223
> 
> 标签：arrays, string, perl, compare, character

我有两个数组：

@Array1 包含 A、B、C、D、E

和

@Array2 包含 L、B、C、F、E

我尝试使用 foreach 遍历数组中的每个元素并说出它是否正确开始，但是在做任何事情时我都会遇到严重的大错误。

该程序与一个 foreach 完美配合，但使用嵌套的一个它会出错：

```
foreach my $var (@Array1){
       print "Letter $var";
        foreach my $var2 (@Array2){
        if($var2 eq $var) {
            print "They are equal";
        } else {
            next;
        }
    }
} 
```

有任何想法吗; 一个错误是：

在 compare.pl 第 192 行，<> 第 2 行的字符串 eq 中使用未初始化的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:11:22.247

我已经运行了它：

```
use strict;
use warnings;

my @Array1=qw/A B C D E/;
my @Array2=qw/L B C F E/;

foreach my $var (@Array1){
       $\=$/;
       print "Letter $var";
        foreach my $var2 (@Array2){
        if($var2 eq $var) {
            print "They are equal";
        } else {
            next;
        }
    }
} 
```

我明白了

```
Letter A
Letter B
They are equal
Letter C
They are equal
Letter D
Letter E
They are equal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:03:01.020

您的错误意味着任一数组中的一个值未定义。由于您没有显示如何为数组分配值，因此无法说明原因。很明显，问题在于您没有显示的代码。

调试问题的方法是使用模块打印数组[`Data::Dumper`](http://search.cpan.org/perldoc?Data%3a%3aDumper)：

```
use Data::Dumper;
print Dumper \@Array1, \@Array2; 
```

然后你应该看到它们包含什么值。

还：

*   完全没有必要使用你的`else { next }`块，因为它是循环的最后一部分。
*   对于较大的数组，打印“它们相等”将是一个非常无用的语句，因为您会得到表明某事物等于其他事物的输出，但您只会知道其中一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T01:11:35.767

您可能还想使用[Array::Utils](http://search.cpan.org/~zmij/Array-Utils-0.5/Utils.pm)的 array_diff(@arr1, @arr2) 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:15:41.560

正如 TLP 所说，数组中的一个值是 undef。您可以将代码更改为类似的内容来解决问题。

```
    foreach 我的 $var (@Array1){
           print "字母 $var \n";
            foreach 我的 $var2 (@Array2){
            #（两者都是 undef（因此它们匹配））或（两者都已定义 AND MATCH）
            if((!defined($var2) && !defined($var)) ||
                 (定义($var2) && 定义($var) && ($var2 eq $var))) {
                print "他们相等\n";
            } 别的 {
                下一个;
            }
        }
    }

```

# php - 如何通过表单提交更新 php 文件中的变量？比如静态密码

> ID：13462072
> 
> 赞同：3
> 
> 时间：2012-11-19T20:56:37.127
> 
> 标签：php, forms, password-protection, change-password

作为 PHP 新手，我进行了大量研究，但找不到这个问题的答案。为了提供一些细节，我有一个使用 PHP 和 Javascript 的小型上传网络应用程序。在我称之为受用户名和密码保护的管理部分中，用户可以访问上传的文件。

此时，我在 php 文件中设置了一个静态用户名和密码，并将它们存储为以下变量。

```
$username = "admin";
$password ="admin"; 
```

登录页面然后读取表单帖子以验证输入的用户名和密码是否与设置的匹配。一旦通过身份验证，它就会设置一个会话令牌。这一切都很好，但我希望人们能够在 admin.php 部分中更改密码。

所以我想在 admin.php 上有一个更改密码表单，当一个人提交它时，然后更新 login.php 文件中的 $password 变量。如何写入现有的 login.php 文件并更新静态变量 $password。

任何帮助将不胜感激！

更新：我当前的 login.php 文件

所以你可以看到用户名和密码是静态设置的，一旦一个人输入登录信息并验证它设置了一个会话变量。我希望 admin.php 页面上的人能够提交表单以更新 $password var。我现在正在阅读此内容[更改管理员密码（需要制作表格）](https://stackoverflow.com/questions/6742976/change-admin-password-need-to-make-form?rq=1)

```
<?php //Password Protected Area
session_start();
if($_GET['action'] == 'logout'){
   unset($_SESSION['currentUser']); 
}

$requestMethod = strtolower($_SERVER['REQUEST_METHOD']);
if($requestMethod == 'post'){
    $username = "admin";
    $password ="admin";
    $postUsername = strip_tags($_POST['username']);
    $postPassword = strip_tags($_POST['password']);
    if(($postUsername == $username) && ($postPassword == $password)){
        $_SESSION['currentUser'] = 'admin';
        header("location: admin.php");
    }else{
        $loginError = true;
    }
}

?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Login</title>

    <?php include_once "assets/includes/loader.php" ?>

</head>
<body>

    <div id="wrapper">

    <div id="upload-text" >
        <h1>Please Login</h1>

         <form action="<?php echo $_SERVER['PHP_SELF'];?>" method="POST" id="loginForm"> 

          <?php if($loginError){?>
            <h2>Login Error:</h2>
            <p>Sorry, your username or password was incorrect.</p>
          <?php } ?>
            <br>
            <label><span>Username:</span> <input type="text" name="username" value="<?php echo $_POST['username'];?>" /></label>
            <br>
            <br>
            <label><span>Password:</span> <input type="password" name="password" /></label>
            <br><br>
            <label><input type="submit" value="Login" /></label>
        </form>     

    </div>

    </div>
    <!-- #upload-wrapper -->

</body>
</html> 
```

更新：

我根据提供的建议工作并让它发挥作用。请参阅下面的更新代码。我创建了一个 config.php 文件并在那里存储了登录信息。使用 login.php 文件的包含我正在调用信息。一旦通过身份验证，admin.php 文件就会有一个表单，它使用和 fwrite 来更新 conif.php 文件。

登录.php

```
$requestMethod = strtolower($_SERVER['REQUEST_METHOD']);
if($requestMethod == 'post'){
    include "assets/includes/config.php";
    $postUsername = strip_tags($_POST['username']);
    $postPassword = strip_tags($_POST['password']);
    if(($postUsername == $username) && ($postPassword == $password)){
        $_SESSION['currentUser'] = 'admin';
        header("location: admin.php");
    }else{
        $loginError = true;
    }
} 
```

管理员.php

```
if(isset($_POST['new_pw']) && trim($_POST['new_pw']) != ""){
    $fp = fopen("assets/includes/config.php", 'w');
    fwrite($fp, '<?php');
    fwrite($fp, ' ');
    fwrite($fp, '$username = "admin";');
    fwrite($fp, '$password = "'.trim($_POST['new_pw']).'";');
    fwrite($fp, ' ');
    fwrite($fp, '?>');
    fclose($fp); 
}
?> 

<form method="post" action="<?php $_SERVER['PHP_SELF'] ?>">
    <input type="text" name="new_pw">
    <input type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:00:24.600

更新答案：

创建一个配置文件并将其放在 Web 根目录后面。内容是：

```
<?php
$username = 'admin';
$password = 'admin; 
```

然后包含嵌套的配置文件并从条件中删除`$username`and`$password`声明`$requestMethod`：

```
<?php //Password Protected Area
    session_start();

    if($_GET['action'] == 'logout'){
       unset($_SESSION['currentUser']); 
    }

    $requestMethod = strtolower($_SERVER['REQUEST_METHOD']);
    if($requestMethod == 'post'){
        include($_SERVER['DOCUMENT_ROOT']."/path-to-nested-config.php");
        $postUsername = strip_tags($_POST['username']);
        $postPassword = strip_tags($_POST['password']);
        if(($postUsername == $username) && ($postPassword == $password)){
            $_SESSION['currentUser'] = 'admin';
            header("location: admin.php");
        }else{
            $loginError = true;
        }
    }
?> 
```

最后，要更新文件，您将使用[fwrite](http://php.net/manual/en/function.fwrite.php)

```
<?php
if(isset($_POST['new_pw']) && trim($_POST['new_pw']) != "")
{
    $fp = fopen($_SERVER['DOCUMENT_ROOT']."/path-to-nested-config.php", 'w');
    fwrite($fp, '<?php');
    fwrite($fp, '$username = "admin"');
    fwrite($fp, '$password = "'.trim($_POST['new_pw']).'");
    fclose($fp); 
}
?> 
```

这假设您在某处有一个表单，它将“new_pw”传递给一个 php 脚本，该脚本写入一个配置文件，并设置了由系统写入的适当权限。

这只是一种方法。我选择这样做是因为配置文件有 3 行代码，因此不需要更高级的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:14:54.403

正如上面提到的人，这是一种非常不受欢迎的方式，但如果你真的必须这样做，那么你应该做的是 1- 读取管理文件

```
$file = file_get_contents('./admin.php', FILE_USE_INCLUDE_PATH); 
```

2-用用户在表单中提供给您的新密码替换当前密码（您将其存储在会话中

```
$file=str_replace($oldPass,$newPass,$file); 
```

如果用户输入匹配的内容，还建议将分配段添加到 $oldPass 和 $newPass 以避免替换代码的其他部分 3- 替换后写入文件

```
$fp=fopen('admin.php','w');
fwrite($fp,$file,strlen($file)); 
```

# ruby - 从行中处理 Ruby 中的文本

> ID：13462075
> 
> 赞同：0
> 
> 时间：2012-11-19T20:56:42.570
> 
> 标签：ruby, csv, loops

我有一个 csv，我想根据另一行 [数字] 的输入来处理行 [报告] 的实例。

```
Report,Number,Name,Date
INC AMT %,12345678,ACME INC,10/30/2012
INC AMT %,12345678,ACME INC,10/31/2012
OUT AMT %,12345678,ACME INC,10/31/2012
# shortened for brevity 
```

我的代码块如下所示：

```
require 'CSV'

module AlertHash
  @alert_hash = {}
  CSV.foreach("alerts.csv") do |row|
    report, number = row
    next if number == "Number"
    @alert_hash[number] = report
  end

  def self.report(number)
  @alert_hash[number]
  end

end

puts "Alert: " + AlertHash.report("12345678")
# OUTPUT => Alert: OUT AMT %
# DESIRED OUTPUT => Alert: INC AMT %, OUT AMT % 
```

我已经能够处理每个数字的最后一个 [report]stack。但是，我想要的输出是捕获给定行 [number] 的**所有**报告。有人可以给我一些关于如何做到这一点的指示吗？也许我以错误的方式处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:39:07.847

这个说法：

```
@alert_hash[number] = report 
```

将覆盖任何给定数字索引的任何先前值，因此您只保留最后一个。这就是为什么你`OUT`只获得价值。如果要收集给定数字的所有行，请使用数组：

```
@alert_hash[number] ||= [] # initialize array if required
@alert_hash[number] << report # add value 
```

然后在您的`report`方法中连接它们：

```
@alert_hash[number].join(", ") 
```

这会给你：

```
Alert: INC AMT %, INC AMT %, OUT AMT % 
```

不确定您实际上想要实现什么，但这解释了您的代码的当前行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:02:14.137

@Thilo，显然评论部分不允许我显示代码修改。如前所述，uniq! 方法从数组中删除任何重复的元素。这正是我一直在寻找的。

```
require 'csv'

module AlertHash
  @alert_hash = {}
  CSV.foreach("../data.csv") do |row|
    report, number = row
    next if number == "Number"
    @alert_hash[number] ||= [] # initialize array if required
    @alert_hash[number] << report # add value
  end

  def self.report(number)
    @alert_hash[number].uniq!.join(", ") # concatenate reports to @alert_hash array
  end
end

puts "Alert: " + AlertHash.report("12345678")
# OUTPUT => Alert: INC AMT %, OUT AMT % 
```

# java - 如何解析名称中带有冒号的 JSON？安卓/Java

> ID：13462076
> 
> 赞同：4
> 
> 时间：2012-11-19T20:56:43.340
> 
> 标签：java, android, json, parsing

例如：`{ "primary:title":"Little Red Riding Hood"}`

由于主要和标题之间的冒号，我的 Java (Android) 解析器总是卡住。我可以轻松解析任何其他内容，我只需要帮助。

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    TextView txtViewParsedValue;

    private JSONObject jsonObject;
    private JSONArray jsonArray;

    String [] titles, links, mediaDescriptions, mediaCredits, descriptions, dcCreators, pubDates, categories;
    String [] permalinks, texts;            // guid
    String [] rels, hrefs;
    String [] urls, media, heights, widths; // media:content

    String strParsedValue = "";

    private String strJSONValue;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        strJSONValue = readRawTextFile(this, R.raw.jsonextract);

        txtViewParsedValue = (TextView) findViewById(R.id.text_view_1);

        try {
            parseJSON();

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void parseJSON() throws JSONException
    {
        txtViewParsedValue.setText("Parse 1");

        jsonObject = new JSONObject(strJSONValue);
        jsonArray = jsonObject.getJSONArray("item");

        titles = new String[jsonArray.length()];
        links = new String[jsonArray.length()];
        permalinks = new String[jsonArray.length()];
        texts = new String[jsonArray.length()];
        mediaDescriptions = new String[jsonArray.length()];
        mediaCredits = new String[jsonArray.length()];
        descriptions = new String[jsonArray.length()];
        dcCreators = new String[jsonArray.length()];
        pubDates = new String[jsonArray.length()];
        categories = new String[jsonArray.length()];

        txtViewParsedValue.setText("Parse 2");

        for (int i=0; i<jsonArray.length(); i++)
        {
            JSONObject object = jsonArray.getJSONObject(i);

            titles[i] = object.getString("title");
            links[i] = object.getString("link");

            JSONObject guidObj = object.getJSONObject("guid");
            permalinks[i] = guidObj.getString("isPermaLink");
            texts[i] = guidObj.getString("text");
            //mediaDescriptions[i] = object.getString("media:description");
            //mediaCredits[i] = object.getString("media:credit");

                // *** THE PARSER FAILS IF THE COMMENTED LINES ARE IMPLEMENTED BECAUSE
                // OF THE : IN BETWEEN THE NAMES ***

            descriptions[i] = object.getString("description");
            //dcCreators[i] = object.getString("dc:creator");
            pubDates[i] = object.getString("pubDate");
            categories[i] = object.getString("category");   
        }

        for (int i=0; i<jsonArray.length(); i++)
        {
            strParsedValue += "\nTitle: " + titles[i];
            strParsedValue += "\nLink: " + links[i];
            strParsedValue += "\nPermalink: " + permalinks[i];
            strParsedValue += "\nText: " + texts[i];
            strParsedValue += "\nMedia Description: " + mediaDescriptions[i];
            strParsedValue += "\nMedia Credit: " + mediaCredits[i];
            strParsedValue += "\nDescription: " + descriptions[i];
            strParsedValue += "\nDC Creator: " + dcCreators[i];
            strParsedValue += "\nPublication Date: " + pubDates[i];
            strParsedValue += "\nCategory: " + categories[i];
            strParsedValue += "\n";
        }

        txtViewParsedValue.setText(strParsedValue);
    }

    public static String readRawTextFile(Context ctx, int resId)
    {
         InputStream inputStream = ctx.getResources().openRawResource(resId);

            InputStreamReader inputreader = new InputStreamReader(inputStream);
            BufferedReader buffreader = new BufferedReader(inputreader);
             String line;
             StringBuilder text = new StringBuilder();

             try {
               while (( line = buffreader.readLine()) != null) {
                   text.append(line);
                   //text.append('\n');
                 }
           } catch (IOException e) {
               return null;
           }
             return text.toString();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:03:13.967

一方面，为了回答您的问题，如果格式正确，JSONObject 和 org.json.* 类解析带有冒号的键是没有问题的。以下单元测试通过，这意味着它能够解析您的示例场景：

```
public void testParsingKeysWithColons() throws JSONException {
    String raw = "{ \"primary:title\":\"Little Red Riding Hood\"}";
    JSONObject obj = new JSONObject(raw);
    String primaryTitle = obj.getString("primary:title");
    assertEquals("Little Red Riding Hood", primaryTitle);
} 
```

另一个建议是，对数据使用字符串数组很笨拙，使用数据结构来表示对象会更好地组织起来。而不是标题、链接、描述的字符串数组；使用具有这些属性的对象并列出对象。例如：

```
public class MyDataStructure {

    public String title;
    public String primaryTitle;
    public String link;
    public String mediaDescription;

    public static class Keys {
        public static String title = "title";
        public static String primaryTitle = "primary:title";
        public static String link = "link";
        public static String mediaDescription = "media:description";
    }

} 
```

然后您可以创建一个“翻译器”类，为您完成所有解析并返回您的对象列表。这更容易使用和跟踪。您永远不必考虑数据未对齐或其中一个阵列中的数据比您预期的更多或更少。如果您的输入数据丢失任何内容或任何 json 格式错误，您也可以更轻松地测试问题所在。

```
public class MyDataStructureTranslator {

    public static List<MyDataStructure> parseJson(String rawJsonData) throws JSONException {

        List<MyDataStructure> list = new ArrayList<MyDataStructure>();
        JSONObject obj = new JSONObject(rawJsonData);
        JSONArray arr = obj.getJSONArray("item");

        for(int i = 0; i < arr.length(); i++) {
            JSONObject current = arr.getJSONObject(i);
            MyDataStructure item = new MyDataStructure();
            item.title = current.getString(MyDataStructure.Keys.title);
            item.primaryTitle = current.getString(MyDataStructure.Keys.primaryTitle);
            item.link = current.getString(MyDataStructure.Keys.link);
            item.mediaDescription = current.getString(MyDataStructure.Keys.mediaDescription);
            list.add(item);
        }

        return list;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T11:02:34.347

由于 Java 标识符不能有冒号，只需指定一个映射到确切 json 名称的 json 属性名称，例如：

```
@JsonProperty("primary:title")
public String primaryTitle; 
```

# c# - 正则表达式提取可变部分

> ID：13462081
> 
> 赞同：2
> 
> 时间：2012-11-19T20:57:08.977
> 
> 标签：c#, regex

我有一个包含这个的字符串：

```
@[User::RootPath]+"Dim_MyPackage10.dtsx"
```

我需要`[User::RootPath]`使用正则表达式提取部分。到目前为止，我有这个正则表达式：

```
[a-zA-Z0-9]*\.dtsx
```

但我不知道如何进一步进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:06:10.357

**对于变量，为什么不使用not set** `[^ ]`来提取*除*集合之外的所有内容来消耗所需的内容？

大`^`括号中的 表示查找**不**匹配的内容，例如它寻找所有不是 a`]`或引号 ( `"`) 的内容。

然后我们可以将实际匹配放在命名的捕获组中`(?<{NameHere}> )`并相应地提取

```
string pattern = @"(?:@\[)(?<Path>[^\]]+)(?:\]\+\"")(?<File>[^\""]+)(?:"")";
// Pattern is (?:@\[)(?<Path>[^\]]+)(?:\]\+\")(?<File>[^\"]+)(?:")
// w/o the "'s escapes for the C# parser

string text = @"@[User::RootPath]+""Dim_MyPackage10.dtsx""";    

var result = Regex.Match(text, pattern);

Console.WriteLine ("Path: {0}{1}File: {2}",
    result.Groups["Path"].Value,
    Environment.NewLine,
    result.Groups["File"].Value
);

/* Outputs
Path: User::RootPath
File: Dim_MyPackage10.dtsx
*/ 
```

`(?: )`是匹配但不捕获，因为我们将它们用作我们模式的事实上的锚点，并且不将它们放入匹配捕获组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:03:26.293

您的正则表达式将匹配任意数量的字母数字字符，后跟`.dtsx`. 在您的示例中，它将匹配`MyPackage10.dtsx`.

如果要匹配`Dim_MyPackage10.dtsx`，则需要在正则表达式中允许的字符列表中添加下划线：`[a-zA-Z0-9]*.dtsx`

如果要匹配`[User::RootPath]`，则需要一个将在最后停止的正则表达式`/`（或`\`，取决于您在路径中使用的斜杠类型）：如下所示：（`.*\/`或`.*\\`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:42:45.840

使用这个正则表达式模式：

```
\[[^[\]]*\] 
```

检查**[这个演示](http://ideone.com/YygMmK)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:52:48.633

从答案和评论 - 以及到目前为止没有人“接受”的事实 - 在我看来，问题/问题并不完全清楚。如果您正在寻找只有 'SomeVariable' 是变量的模式 [User::SomeVariable]，那么您可以尝试：

```
\[User::\w+] 
```

捕捉完整的表达。此外，如果您希望检测该模式，但只需要“SomeVariable”部分，您可以尝试：

```
(?<=\[User::)\w+(?=]) 
```

它使用环视。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T22:06:45.443

这里是兄弟

```
using System;
using System.Text.RegularExpressions;
namespace myapp
{
  class Class1
    {
      static void Main(string[] args)
        {
          String sourcestring = "source string to match with pattern";
          Regex re = new Regex(@"\[\S+\]");
          MatchCollection mc = re.Matches(sourcestring);
          int mIdx=0;
          foreach (Match m in mc)
           {
            for (int gIdx = 0; gIdx < m.Groups.Count; gIdx++)
              {
                Console.WriteLine("[{0}][{1}] = {2}", mIdx, re.GetGroupNames()[gIdx], m.Groups[gIdx].Value);
              }
            mIdx++;
          }
        }
    }
} 
```

# r - 在 RSQLite 中使用日期

> ID：13462086
> 
> 赞同：16
> 
> 时间：2012-11-19T20:57:22.947
> 
> 标签：r

如何使用 RSQLite 编写带有日期的 SQL 查询。下面是一个例子。`dbGetQuery`不返回任何行。

```
require(RSQLite)
require(ggplot2)
data(presidential)
m <- dbDriver("SQLite")
tmpfile <- tempfile('presidential', fileext='.db')
conn <- dbConnect(m, dbname=tmpfile)
dbWriteTable(conn, "presidential", presidential)
dbGetQuery(conn, "SELECT * FROM presidential WHERE Date(start) >= Date('1980-01-01')") 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T21:26:54.810

只是为了说明，这很好用：

```
tmpfile <- tempfile('presidential', fileext='.db')
conn <- dbConnect(m, dbname=tmpfile)
p <- presidential
p$start <- as.character(p$start)
p$end <- as.character(p$end)

dbWriteTable(conn, "presidential", p)
dbGetQuery(conn, "SELECT * FROM presidential WHERE start >= '1980-01-01'") 
```

[您可以在此处](http://www.sqlite.org/datatype3.html)的文档中了解 SQLite 中缺少原生日期类型的信息。我在 SQLite 中使用字符串作为日期已经很长时间了，以至于我实际上完全忘记了这个问题。

是的，我编写了一个小型 R 函数，可以将数据框中的任何 Date 列转换为字符。对于简单的比较，保留它们`YYYY-MM-DD`就足够了，如果我需要做算术，我会在 R 中的事实之后将它们转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-26T04:01:09.590

继@joran 的回答之后，这是一个简单的函数，用于将日期列转换为 data.frame 的字符串。

```
mutate(df, across(where(is.Date), ~ format(.x, "%Y.%m.%d"))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-22T16:47:05.983

我发现使用 R`RSQLite`和`dplyr`SQLite 保持类型一致是最方便的方式。特别是，`extendend_types = TRUE`确保类型`DATE`、`DATETIME`/`TIMESTAMP`和`TIME`的列映射到相应的 R 类（至少在 2.2.8 版本之后`RSQLite`）。

```
library(dplyr)
library(RSQLite)
library(ggplot2)

data(presidential)

mydb <- dbConnect(SQLite(), "presidential.sqlite", extended_types = TRUE)
dbWriteTable(mydb, "presidential", presidential)

tbl(mydb, "presidential") %>% 
  filter(start >= as.Date("1980-01-01")) %>% 
  collect() 
```

您还可以将后一个集合制定为 get 查询：

```
dbGetQuery(mydb, "SELECT * FROM presidential WHERE start >= CAST('1980-01-01' AS DATE)") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-02T14:47:16.570

正如@joran 建议的那样，在 SQLlite 中以文本形式保存日期似乎是目前最好的方法。

我使用@Richard Knight 的方法进行转换，但使用 ISO 格式，在写入数据帧之前将日期更改为字符串：

```
local_df %>% mutate(across(where(lubridate::is.Date), ~ format(.x, "%Y-%m-%d"))) 
```

可以使用 sql 翻译远程操作日期，特别是：

```
remote_df %>% mutate(date_as_number = julianday(date_as_string))
remote_df %>% mutate(date_as_string = date(date_as_number)) 
```

Nb`date`不在`as.Date`第二个中。这是因为`as.Date`将被转换为，`CAST(date_as_number AS DATE)`而我们想要的是使用 SQLLite 的`date()`函数和`julianday()`.

可以自动将远程日期字符串映射回日期，如果您：

```
collect <- function(remote_df, ...) {
  raw = remote_df %>% dplyr::collect(...)
  isoDateString = function(x) return(is.character(x) & all(na.omit(stringr::str_detect(x,"[0-9]{4}-[0-9]{2}-[0-9]{2}"))) & !all(is.na(x)))
  raw = raw %>% mutate(across(where(isoDateString), ~ as.Date(.x, "%Y-%m-%d")))
  maybeJulian = function(x) {return(is.double(x) & all(na.omit(x>2440587.5)) & all(na.omit(x<2488069.5)) & !all(is.na(x)))}
  raw = raw %>% mutate(across(matches(".*(D|d)ate.*") & where(maybeJulian), ~ as.Date(.x-2440587.5, "1970-01-01")))
  return(raw)
} 
```

函数中明显的随机数`maybeJulian`对应于`1970-01-01`和`2100-01-01`

# java - 从用户绘制的图像中裁剪出空白

> ID：13462088
> 
> 赞同：0
> 
> 时间：2012-11-19T20:57:26.323
> 
> 标签：java, android, graphics

我的应用程序的一部分涉及用户绘制图像，这些图像稍后将在 PDF 中串在一起。用户可以自由使用整个屏幕进行绘制。一旦用户完成绘图，我想在将图像添加到 PDF 之前修剪掉所有的空白区域。这是我遇到问题的地方。我想了两种不同的方法来确定可修剪空白的位置，但都显得笨拙。

我的第一个想法是如果事件到目前为止已经超出了盒子的范围，那么有手写笔记录的运动事件。如果有，我会扩大盒子以容纳它。不幸的是，每次发生对性能不利的运动事件时，我都会看到轮询。我不能只看上下事件，因为用户可以画出像字母 V 这样的东西。

然后我想我可以查看所有像素（使用 getPixel()）并查看最高、最低、最右边和最左边的黑色像素在哪里。同样，这似乎是一种非常低效的查找盒子的方法。我确信我可以跳过一些像素来提高性能，但我不能跳过太多。

有做我想做的事的标准方法吗？我什么都没找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:00:15.353

您可以在您的编辑器中记录该像素已被绘制，更新最大和最小 X 和 Y，然后稍后使用它们来裁剪图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:01:07.027

如果用户正在绘图，您是否已经在处理 onTouchEvent 回调以捕获绘图事件？如果是这样，保留 minX、maxX、minY 和 maxY 并根据这些值检查每个记录的绘图事件应该没什么大不了的。

# hadoop - 确保 hadoop 跳过某些输入文件的最有效方法是什么？

> ID：13462089
> 
> 赞同：0
> 
> 时间：2012-11-19T20:57:33.447
> 
> 标签：hadoop

我有一个 hadoop 应用程序 - 取决于参数 - 只需要输入目录中的某些（少数！）输入文件。我现在的问题是：跳过这些文件的最佳位置（阅读：尽可能早）在哪里？现在我定制了一个 RecordReader 来处理这个问题，但我想知道我是否可以更快地跳过这些文件？在我目前的实现中，由于文件不相关，hadoop 仍然有巨大的开销。

也许我应该补充一点，很容易看出我是否需要某个输入文件。如果文件名以参数开头，则需要它。分层构造我的输入目录可能是一种解决方案，但对于我的项目来说不太可能，因为每个文件最终都会在某个目录中孤独。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:01:25.353

我已经成功使用 TextInputFormat 上的 setInputPaths() 方法来指定包含逗号分隔文件名的单个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:26:58.337

我建议您通过在`Path`此处提到的输入 s 上应用适当的模式来过滤输入文件：[https](https://stackoverflow.com/a/13454344/1050422)
://stackoverflow.com/a/13454344/1050422 请注意，此解决方案不考虑子目录。更改它以能够递归地访问基本路径中的所有子目录。

# c# - 我的 DLL 的 4 个副本而不是 1 个？

> ID：13462094
> 
> 赞同：4
> 
> 时间：2012-11-19T20:57:59.167
> 
> 标签：c#, visual-studio-2010, visual-studio, dll

我有 2 个项目的解决方案。

两个项目都需要相同的 4 个 DLL。

我在每个项目中有一个包含 4 个 DLL 的 lib 文件夹。

编译解决方案时，每个 lib 文件夹中的 4 个 DLL 被复制到 bin 文件夹中。

现在，有 4 组相同的 4 个 DLL。

我尝试将 DLLs 放在 bin 目录中，但 Visual Studio 引发了很多错误。

这是它应该如何工作的吗？理想情况下，我只想要一套，最多两套。不知道我应该把我的 DLL 放在哪里来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:06:11.490

是的，这就是它应该如何工作的方式。

[您可以通过将引用上的CopyLocal](http://msdn.microsoft.com/en-us/library/ms169644%28v=vs.80%29.aspx)属性更改为 false 来调整此过程。

在您的启动项目中将其设置为 true，在另一个项目中将其设置为 false。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:05:56.227

在每个项目中，您都会引用它们（右键单击项目并“添加引用”）。在构建您的解决方案或项目后，Visual Studio 应自动将所需的引用 dll 复制到您的`/bin`目录中。

至于多个副本，由于每个项目通常是自主的，每个项目都会有一组引用的 dll，但是如果项目 A 引用项目 B，并且您只使用项目 A（比如说项目 B 是一个类库），那么项目 A 应该只有 6 个 dll。

```
- ProjectA/bin/Debug/projectA.dll
- ProjectA/bin/Debug/projectB.dll
- ProjectA/bin/Debug/shared1.dll
- ProjectA/bin/Debug/shared2.dll
- ProjectA/bin/Debug/shared3.dll
- ProjectA/bin/Debug/shared4.dll 
```

# sql - 比较两个表的数据

> ID：13462099
> 
> 赞同：1
> 
> 时间：2012-11-19T20:58:23.973
> 
> 标签：sql

```
drop table #temp1
drop table #temp2

create table #temp1 (id int identity, A int, B int)
create table #temp2 (id int identity, A int, B int)

insert into #temp1 values (20, 1001)
insert into #temp1 values (20, 1001)
insert into #temp1 values (30, 1001)

insert into #temp2 values (20, 1001) 
```

在 SQL 的帮助下，我需要找出 #temp1 中的第 2 行和第 3 行在 #temp2 中不存在。

如何找出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:16:49.680

您可以使用**[`EXCEPT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)**运算符：

```
SELECT id, a, b
FROM #temp1

EXCEPT

SELECT id, a, b
FROM #temp2 ; 
```

* * *

你必须考虑一些非常严重的事情。该`id`列会自动获取其编号，因此它们对您没有任何价值。在一个真实的例子中，您可能`UNIQUE`在列中有一个约束`(a, b)`或定义为`PRIMARY KEY`. 所以，上面的例子是无效的。在 处只会插入两行`table1`，第一行和第三行。第二个将被拒绝为与第一个相同。

# image - 使用 bwperim 从图像中自动识别未标记的对象

> ID：13462105
> 
> 赞同：0
> 
> 时间：2012-11-19T20:58:37.420
> 
> 标签：image, matlab, image-processing

我想编写一个算法，允许我从 matlab 上的图像中自动识别未标记的对象。所以遇到了一个涉及计算 bwperim 并简单地填充孔的建议，但是我不太明白这是如何工作的。我真的很感激在正确的方向上的一点。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:16:22.253

好吧，对于初学者来说，这里是[bwperim 参考](http://www.mathworks.co.uk/help/images/ref/bwperim.html)。

它似乎返回 ab/w 图像，其中检测到的边界*用白色标记，但它不会说哪个对象是哪个（因为这是一个非常艰难的决定），因为你需要提出一个表示。

正如您可能会在边界线中发现“洞”，“增长”这些线可能是必要的（参见：“侵蚀/扩张”）。然后你可以决定一个被白色像素包围的黑色区域，用白色填充，然后再次使用 erode 清除其他边界；标记完成。

(*) 对象的周长候选对象

# maven - MavenProject：获取可用的类以在我的插件上使用

> ID：13462107
> 
> 赞同：2
> 
> 时间：2012-11-19T20:58:49.767
> 
> 标签：maven, maven-plugin

我正在加载一个 Maven 项目，如此[处](https://stackoverflow.com/questions/4381460/get-mavenproject-from-just-the-pom-xml-pom-parser)所述。我试图弄清楚如何检索源根，以便找出我拥有的 Java 类，以便我的 Mojo 可以使用它们。

我尝试了其中的几种方法，例如 getResources 或 getScriptSources ，但没有运气。任何的想法？

提前致谢！

**编辑：**

我被要求详细说明我正在尝试做的事情，所以这里是：

我正在开发的插件将获取项目中的源代码并从中创建测试用例。除非配置，否则我想为所有类生成测试，为此，我需要以某种方式找出我的源在哪里，以便我可以正确配置。

希望有帮助。

这是[存储库](https://bitbucket.org/javydreamercsw/randoop-maven-plugin)。我计划稍后发布它，但我按要求提供了来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T22:53:36.233

你读过[插件开发者文档](http://maven.apache.org/plugin-developers/index.html)吗？

该页面将链接到[Plugins Cookbook](http://maven.apache.org/plugin-developers/cookbook/index.html)，后者链接到[Mojo Developer Cookbook](http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook)，其中包含[maven 项目或有效的 pom。](http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook#MojoDeveloperCookbook-Themavenprojectortheeffectivepom)并允许您通过以下方式访问*org.apache.maven.project.MavenProject*对象

```
/** @parameter default-value="${project}" */
private org.apache.maven.project.MavenProject mavenProject; 
```

或者通过 Java 5 注释

```
@Component
MavenProject project; 
```

您可以调用*[getCompileSourceRoots()](http://maven.apache.org/ref/3.0.3/maven-core/apidocs/org/apache/maven/project/MavenProject.html)*来获取将用于编译的目录列表。

您还需要阅读有关如何设置包含/排除的更多信息。您可以使用其他插件作为如何执行此操作的示例，例如[maven-compiler-plugin](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html)

如果你想使用注解，确保你的 pom 被配置为[使用注解](http://maven.apache.org/plugin-tools/maven-plugin-plugin/examples/using-annotations.html)并且你也在类级别使用注解是**非常重要的。**混合 javadoc 注释可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:00:37.350

我认为最简单的解决方案是定义一个[mojo 参数](http://maven.apache.org/developers/mojo-api-specification.html)：

```
/**
 * @parameter default-value="${project.build.sourceDirectory}"
 * @required
 */
private File sourceDirectory; 
```

或使用新[的基于注释的定义](http://maven.apache.org/plugin-tools/maven-plugin-tools-annotations/index.html)：

```
@Parameter(required = true, defaultValue="${project.build.sourceDirectory}"}
private File sourceDirectory; 
```

这应该会给你想要的结果。

# javascript - 滚动网页时调整菜单栏按钮的荧光笔

> ID：13462108
> 
> 赞同：2
> 
> 时间：2012-11-19T20:58:55.803
> 
> 标签：javascript, css, menu

看看[https://www.simple.com](https://www.simple.com)网站。查看滚动网页时菜单（和子菜单）的工作方式。

有谁知道它叫什么或知道它是如何工作的？我正在尝试找到可以执行此操作的示例或插件。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:01:42.220

它被称为**固定导航栏**，这是一个很棒的教程

[http://www.fuelyourcreativity.com/how-to-create-a-fixed-navigation-bar-for-your-website/](http://www.fuelyourcreativity.com/how-to-create-a-fixed-navigation-bar-for-your-website/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:05:12.483

使用 jquery scroll() 事件处理程序非常简单。

您可以使用以下代码绑定它

```
$(window).scroll(function () {
//your code goes here
} 
```

[在http://api.jquery.com/scroll/](http://api.jquery.com/scroll/)阅读更多内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:05:17.320

这只是他们与一些 jQuery 一起使用的一个简单的锚标记。这里给你一个简单的例子。

1.  像往常一样创建您的链接`<a href="#blog">Blog</a>`。这将创建一个锚点以移动到您的博客部分。

2.  向您的元素添加一个类，现在它就像：`<a href="#blog" class="scroll">Blog</a>`

3.  接下来，将下面的 jQuery 代码添加到您的页面中。

不要忘记包含 jQuery 库..

```
$(document).ready(function() {

    $(".scroll").click(function(event){     
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:48:17.927

我决定删除这个问题，因为我要找的东西没有答案，而且两年后也没有必要留下一个没有答案的帖子。

# c++ - 当我用 gcc 替换 g++ 时，为什么我的 makefile 失败？

> ID：13462111
> 
> 赞同：0
> 
> 时间：2012-11-19T20:59:04.620
> 
> 标签：c++, gcc, g++, makefile

我在 OS X 中编码这是我的 Makefile：

```
#makefile for stack_5_1
# Yitong Zhou

stack_5 : main.o Stack.o LIFO_Stack.o Peekback_Stack.o
    g++ -o stack_5 main.o Stack.o LIFO_Stack.o Peekback_Stack.o
main.o: main.cpp Stack.h LIFO_Stack.h Peekback_Stack.h
    g++ -c main.cpp
Stack.o: Stack.cpp Stack.h
    g++ -c Stack.cpp
LIFO_Stack.o: LIFO_Stack.cpp LIFO_Stack.h
    g++ -c LIFO_Stack.cpp
Peekback_Stack.o: Peekback_Stack.cpp Peekback_Stack.h
    g++ -c Peekback_Stack.cpp

clean: 
    rm -rf *.o stack_5 
```

错误：

```
.....  // very very long 
Dwarf Exception Unwind Info (__eh_frame) in Stack.o
Dwarf Exception Unwind Info (__eh_frame) in LIFO_Stack.o
Dwarf Exception Unwind Info (__eh_frame) in Peekback_Stack.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [stack_5] Error 1 
```

gcc 和 g++ 有什么区别？为什么我用 gcc 替换 g++ 时编译失败？

顺便说一句，我如何确保我的 makefile 可以在 Cygwin、linux、OS X 和其他环境中正确运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T21:01:57.703

gcc 默认用于编译 C

g++ 默认用于编译 C++

主要区别在于 g++ 透明地添加了选项`-x c++`（使用 C++）和`-lstdc++`（使用 C++ 标准库）。

试试这个 Makefile：

```
stack_5: main.o Stack.o LIFO_Stack.o Peekback_Stack.o

main.o: main.cpp Stack.h LIFO_Stack.h Peekback_Stack.h

Stack.o: Stack.cpp Stack.h

LIFO_Stack.o: LIFO_Stack.cpp LIFO_Stack.h

Peekback_Stack.o: Peekback_Stack.cpp Peekback_Stack.h 
```

make 将根据文件扩展名自动填写合理的规则。

另请查看`-MM`gcc 选项。它将自动生成正确的 make 依赖项（哪些头文件），因此您无需手动维护此列表。make 手册和 gcc 手册中有更多关于如何使用它的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:02:51.113

`gcc`作为链接器，IIRC 不会在标准`c++`库中链接，例如`-lstdc++`. 不确定是否足以确保所有系统上的一切正常，您可能需要使用 autotools 或类似工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:03:10.287

gcc 旨在编译纯 C，而 g++ 接受（兼容）C 和 C++ 代码。

这可能是你错误的原因。

# ruby - 将 Ruby 字符串插入 Sqlite

> ID：13462112
> 
> 赞同：1
> 
> 时间：2012-11-19T20:59:08.363
> 
> 标签：ruby, string, sqlite, insert

我有一个示例字符串“Canon PowerShot 12.1-Megapixel”，当我运行以下代码时，它似乎失败了：

```
db.execute "CREATE TABLE IF NOT EXISTS Products( id INTEGER PRIMARY KEY, stockID INTEGER, Name TEXT )" 

id = 12345
name = "Canon PowerShot 12.1-Megapixel"       

db.execute( "INSERT INTO Products ( stockID, Name ) VALUES ( #{id}, #{name} )" ) 
```

错误代码是：

```
C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/lib/sqlite3/d
atabase.rb:91:in `initialize': near "PowerShot": syntax error
(SQLite3::SQLExcep tion)
        from C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/
lib/sqlite3/database.rb:91:in `new'
        from C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/
lib/sqlite3/database.rb:91:in `prepare'
        from C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.6-x86-mingw32/
lib/sqlite3/database.rb:134:in `execute'
        from E:/Documents/Cowboom/scraping/DBDOTDList.rb:48:in `<main>' 
```

知道为什么这会在“PowerShot”之后死掉吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T21:05:24.840

您正在创建的字符串周围没有引号。所以字符串实际上是这样出来的：

```
"INSERT INTO Products ( stockID, Name ) VALUES ( 12345, Canon PowerShot 12.1-Megapixel )" 
```

如您所见，这是无效的 SQL；它将尝试解释`Canon PowerSho 12.1-Megapixel`为 SQL 语句的一部分，而不是字符串。

您可以尝试通过在变量插值周围加上引号来解决此问题：

```
db.execute( "INSERT INTO Products ( stockID, Name ) VALUES ( #{id}, '#{name}' )" ) 
```

但是，总的来说，这是一个坏主意。如果字符串最终包含 a `'`，那么这将在 SQL 语句中结束该字符串，从而导致错误（或者更糟糕的是，如果攻击者这样做，则会出现[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞；请参阅[此漫画以获取有趣的示例](http://xkcd.com/327/)）。您通常应该避免尝试通过插入或附加字符串来构建 SQL 查询；您可能认为您可以过滤掉或引用错误的字符，但这实际上很难做到。

相反，您应该对传递给 SQL 语句的任何变量数据使用绑定参数：

```
db.execute( "INSERT INTO Products ( stockID, Name ) VALUES ( ?, ? )", [id, name]) 
```

有关更多信息和示例，请参阅[sqlite3-ruby 文档](http://rdoc.info/github/luislavena/sqlite3-ruby)。

# php - Facebook 对 drupal 的评论（所有节点上的评论相同）

> ID：13462116
> 
> 赞同：3
> 
> 时间：2012-11-19T20:59:23.963
> 
> 标签：php, facebook, drupal, drupal-7, drupal-modules

在我的 drupal 网站上，我想使用 facebook 评论。所以我把 JavaScript SDK 代码放在上面`html.tpl.php`：

```
 <div class="fb-comments" data-href="http://mydomain.com" data-num-posts="5" data-width="540"></div>. 
```

在我的模板文件上`node--article.tpl.php`。

所以它显示了节点上的 facebook 评论。但不正常的是：所有文章（节点）中都显示了相同的评论。在文章 A 上发表的评论将显示在文章 B、文章 C 上，依此类推。

为什么会这样？我是否遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:16:54.753

首先获取评论页面的网址：

```
global $base_path;
$node_path = drupal_get_path_alias("node/" . $node->nid); 
```

然后，将`data-href`属性更改为：

```
data-href="http://mydomain.com<?php print $base_path . $node_path; ?>" 
```

希望这行得通……穆罕默德。

# java - 排序 DefaultListModel

> ID：13462118
> 
> 赞同：1
> 
> 时间：2012-11-19T20:59:32.700
> 
> 标签：java, defaultlistmodel

我想对我的进行排序`DefaultListModel`并让它触发内容更改事件，但我坚持使用它，并且不明白如何调用它的 fireContentsChanged 方法。我看到如果我的模型扩展，`AbstractListModel`我可以在排序后直接调用 fireContentsChanged，但是在我使用 DefaultListModel 上课的方式中，我不能调用它的 fireContentsChanged，因为它具有受保护的访问权限。我必须扩展`AbstractListModel` 还是有办法调用`DefaultListModel`fireContentsChanged ？

```
public class DefaultDataModel implements DataModel 
{
  private DefaultListModel<Data> dataModel = new DefaultListModel<>();
  @Override
  public void addElement(Data data) {
    dataModel.addElement(data);
  }
  @Override
  public int getSize() {
    return dataModel.getSize();
  }
  @Override
  public Data getElementAt(int idx) {
    return dataModel.getElementAt(idx);
  }
  @Override
  public void addListDataListener(ListDataListener l) {
    dataModel.addListDataListener(l);
  }
  @Override
  public int indexOf(Data data) {
    return dataModel.indexOf(data);
  }
  @Override
  public List<Data> getAllData() {
    return Collections.list(dataModel.elements());
  }
  @Override
  public void sort() {
    Collections.sort(getAllData());
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:12:30.417

我在排序方法中找到了如何做到这一点，我必须从 dataModel 侦听器列表中调用 contentsChanged 方法。

```
@Override
public void sort() {
    Collections.sort(getAllData());
    ListDataListener[] listeners = dataModel.getListDataListeners();
    for(ListDataListener listener : listener) {
        listener.contentsChanged(dataModel, ListDataEvent.CONTENTS_CHANGED, 0, getSize());
    }
} 
```

# python - PyQt4：窗口在 hide() 和 show() 之后显示在另一个位置

> ID：13462119
> 
> 赞同：6
> 
> 时间：2012-11-19T20:59:33.383
> 
> 标签：python, window, pyqt, positioning

使用 PyQt4，当我隐藏一个窗口并在之后显示它时，它会出现在另一个位置（至少在 Linux 上是这样）。示例代码：

```
#!/usr/bin/python3

from PyQt4.QtGui import *

app = QApplication([])
widget = QWidget()
widget.setLayout(QVBoxLayout())
label = QLabel()
widget.layout().addWidget(label)

def hideShow():
    widget.hide()
    widget.show()

widget.layout().addWidget(QPushButton('Hide/Show', clicked = hideShow))
widget.show()
app.exec_() 
```

窗口消失并出现，但在原始位置的下方和右侧。我认为它被实际小部件周围的窗口管理器框架的大小所取代。

如何将窗口放置在它所在的确切位置？为什么它会移动？它不应该留在原地吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:15:11.873

在 Linux 上，窗口位置可能非常难以预测。请参阅Qt 文档中的[此部分](http://qt-project.org/doc/qt-4.8/application-windows.html#x11-peculiarities)以了解问题的细分。

这个问题可能没有通用的解决方案，但对我来说，在初始设置*之前*`show()`设置几何似乎可行：

```
...
widget.setGeometry(200, 200, 100, 50)
widget.show()
app.exec_() 
```

**更新**

在使用 KDE 窗口管理器进行一些测试后，我可能发现了一个潜在的解决方案。

似乎`show()`立即调用`hide()`并没有给窗口管理器足够的时间来计算正确的窗口位置。所以一个简单的解决方法是在一小段延迟后显式设置几何：

```
from PyQt4.QtGui import *
from PyQt4.QtCore import QTimer

app = QApplication([])
widget = QWidget()
widget.setLayout(QVBoxLayout())
label = QLabel()
widget.layout().addWidget(label)

def hideShow():
    widget.hide()
    QTimer.singleShot(25, showWidget)

def showWidget():
    widget.setGeometry(widget.geometry())
    widget.show()

widget.layout().addWidget(QPushButton('Hide/Show', clicked = hideShow))
widget.show()
app.exec_() 
```

这适用于我使用 KDE-4.8 和 OpenBox，但当然是 YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:39:54.157

我对 xfce 也有类似的问题。也许您可以在隐藏它之前获取位置（或者在显示它时，取决于您想要什么），将它存储起来，然后在它再次显示时使用 setGeometry() 设置它？可能有点hacky..

# c# - 如何获取网络上可用的 SQL Server 列表？

> ID：13462120
> 
> 赞同：2
> 
> 时间：2012-11-19T20:59:41.653
> 
> 标签：c#, asp.net, sql-server

我正在尝试这个，但我不确定如何继续。你能帮我个忙吗？

```
SqlDataSourceEnumerator instance = SqlDataSourceEnumerator.Instance;
DataTable table = instance.GetDataSources();

foreach (var row in table.Rows)
{
     foreach (var column in table.Columns)
     {
          ddlPublisherServer.Items.Add(???);
     }
} 
```

在哪里 ？？？= SQL 服务器名称。

我将如何从表中提取 sql server 名称？

我正在使用 C# 在 ASP .NET 中工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T21:02:38.553

好吧，如果想查看所有可用信息，您可以遍历可用的列：

```
DataTable dt = SqlDataSourceEnumerator.Instance.GetDataSources();
foreach (DataRow dr in dt.Rows)
{
    foreach (DataColumn col in dt.Columns)
    {
        Console.WriteLine("{0,-15}: {1}", col.ColumnName, dr[col]);
    }
    Console.WriteLine();
} 
```

这将显示如下内容：

```
ServerName     : COMPUTER1
InstanceName   : SQLEXPRESS
IsClustered    : No
Version        : 9.00.4035.00 
```

所以，回答你的问题：

```
ddlPublisherServer.Items.Add(row[table.Columns["ServerName"]]); 
```

完整代码：

```
DataTable table = System.Data.Sql.SqlDataSourceEnumerator.Instance.GetDataSources();
foreach (DataRow server in table.Rows)
{
  ddlPublisherServer.Items.Add(server[table.Columns["ServerName"]].ToString());
} 
```

# ruby-on-rails - 响应的 Rspec 测试应该成功失败

> ID：13462123
> 
> 赞同：2
> 
> 时间：2012-11-19T20:59:51.933
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, rspec

我在 rspec 上运行这个测试......

```
it 'get email is successful' do
  get :email
  response.should be_success
  response.should render_template('email') 
```

结尾

控制器代码看起来像这样的地方..

```
def email
  respond_to do |format|
     format.js 
  end
end 
```

在我的终端上，我带着....

```
3) PostsController checking to see if response for post email is successful
 Failure/Error: response.should be_success
   expected success? to return true, got false
 # ./spec/controllers/posts_controller_spec.rb:116:in `block (3 levels) in <top    
(required)>' 
```

我在这里缺少什么来进行测试？它必须是显而易见的。我的视图文件名为`email.js.erb`. 此操作适用于 AJAX 调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:15:39.890

尝试：

```
xhr :get, :email 
```

您的请求似乎没有考虑预期的响应类型。在 Rspec 中，如果您想模拟 AJAX (XHR) 请求，这是执行此操作的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:04:25.520

您的控制器构造为仅针对 JS 请求返回任何内容，并且您在测试中请求 HTML 响应。你应该有

`get :email.js`

在您的规格中。

# jakarta-ee - 如何访问消息驱动 Bean 中的主体？

> ID：13462124
> 
> 赞同：0
> 
> 时间：2012-11-19T20:59:51.430
> 
> 标签：jakarta-ee, jms, jaas, message-driven-bean

在 MDB 的 onMessage 方法中，如何检索发起请求的 JAAS 用户主体的名称？我的应用程序正在使用 Servlet 登录和 jdbcRealm。

我已经考虑将它添加为消息属性，但我宁愿确保它由 JAAS 处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:01:14.290

它是固有处理的，您所要做的就是注入和使用`MessageDrivenContext`：

```
..
@Resource
private MessageDrivenContext mdc;

public void onMessage(Message message) {
    Principal principal = mdc.getCallerPrincipal();
    System.out.println(principal.getName());
    //ALTERNATIVELY, YOU CAN USE A METHOD mdc.isCallerInRole("<role name>");
} 
```

# ruby-on-rails-3 - 带有引导程序的脚手架：主题引发应用程序错误

> ID：13462129
> 
> 赞同：0
> 
> 时间：2012-11-19T21:00:01.560
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, twitter-bootstrap-rails

使用 Rails 生成新项目。

将 twitter-bootstrap-rails 添加到 Gemfile

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.8'
    # Use thin as webserver
    gem 'thin'
    # Mysql
    gem 'mysql2'
    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails',   '~> 3.2.3'
      gem 'coffee-rails', '~> 3.2.1'
      # See https://github.com/sstephenson/execjs#readme for more supported runtimes
      gem 'therubyracer', :platforms => :ruby
      gem "less-rails"
      gem 'uglifier', '>= 1.0.3'
    end
    # Twitter bootstrap baby
    gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
    # json
    gem 'json'
    # jQuery is the win
    gem 'jquery-rails'
    gem 'jquery-ui-rails'
    # Devise for auth goodness
    gem 'devise'
    # Cancan for permission goodness
    gem 'cancan'

    # Fog allows for easy communication with clouds
    gem 'fog'

    group :development, :test do
      # Cannot run as gem and use heroku
      # See: http://stackoverflow.com/questions/6288910/heroku-deployment-gemfile-lock-problem
      # gem 'rb-fsevent', :require => false if RUBY_PLATFORM =~ /darwin/i
      gem 'faker'
      gem 'factory_girl_rails'
      gem 'rspec-rails'
      gem 'shoulda-matchers'
      gem 'capybara'
      gem 'launchy'
      gem 'database_cleaner'
      gem 'guard-rspec'
    end

    # 
    # group :production do
    #   gem 'pg'
    # end 
```

做了一个捆绑安装，一切顺利。

然后我做了

```
 $ rails g bootstrap:install 
```

仍然一切都很好。

接下来，这样做：

```
 $ rails g bootstrap:layout application fixed 
```

还好。

然后我这样做了：

```
 $ rails g bootstrap:themed Posts 
```

得到了这个：

```
 /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize': uninitialized constant Post (NameError)
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:59:in `block in columns'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:69:in `rescue_block'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:58:in `columns'
        from (erb):9:in `template'
        from /Users/jason/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/erb.rb:838:in `eval'
        from /Users/jason/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/erb.rb:838:in `result'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:111:in `block in template'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `call'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `render'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:47:in `identical?'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:73:in `on_conflict_behavior'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/empty_directory.rb:130:in `invoke_with_conflict_check'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:61:in `invoke!'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions.rb:95:in `action'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:26:in `create_file'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:110:in `template'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:97:in `block in generate_erb'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:96:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:96:in `generate_erb'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:92:in `generate_views'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:19:in `copy_views'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `block in invoke_all'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `map'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `invoke_all'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/group.rb:238:in `dispatch'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/generators.rb:171:in `invoke'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/generate.rb:12:in `<top (required)>'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands.rb:29:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
    /Volumes/dev/projects/jason/fuckthis $ rails g bootstrap:themed posts
    /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize': uninitialized constant Post (NameError)
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:59:in `block in columns'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:69:in `rescue_block'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:58:in `columns'
        from (erb):9:in `template'
        from /Users/jason/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/erb.rb:838:in `eval'
        from /Users/jason/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/erb.rb:838:in `result'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:111:in `block in template'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `call'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `render'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:47:in `identical?'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:73:in `on_conflict_behavior'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/empty_directory.rb:130:in `invoke_with_conflict_check'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:61:in `invoke!'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions.rb:95:in `action'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:26:in `create_file'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:110:in `template'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:97:in `block in generate_erb'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:96:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:96:in `generate_erb'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:92:in `generate_views'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:19:in `copy_views'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `block in invoke_all'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `map'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `invoke_all'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/group.rb:238:in `dispatch'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/generators.rb:171:in `invoke'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/generate.rb:12:in `<top (required)>'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands.rb:29:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
    /Volumes/dev/projects/jason/fuckthis $ rails g bootstrap:themed posts -f
    /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize': uninitialized constant Post (NameError)
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.8/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:59:in `block in columns'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:69:in `rescue_block'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:58:in `columns'
        from (erb):9:in `template'
        from /Users/jason/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/erb.rb:838:in `eval'
        from /Users/jason/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/erb.rb:838:in `result'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:111:in `block in template'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `call'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `render'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:47:in `identical?'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:73:in `on_conflict_behavior'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/empty_directory.rb:130:in `invoke_with_conflict_check'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:61:in `invoke!'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions.rb:95:in `action'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/create_file.rb:26:in `create_file'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:110:in `template'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:97:in `block in generate_erb'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:96:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:96:in `generate_erb'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:92:in `generate_views'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:19:in `copy_views'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `block in invoke_all'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `each'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `map'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `invoke_all'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/group.rb:238:in `dispatch'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/generators.rb:171:in `invoke'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/generate.rb:12:in `<top (required)>'
        from /Users/jason/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands.rb:29:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我已经回滚到 twitter-bootstrap-rails 2.1.5 和 2.1.4 无济于事。

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:05:07.553

您需要先创建 Post 脚手架。来自[https://github.com/seyhunak/twitter-bootstrap-rails/blob/master/README.md](https://github.com/seyhunak/twitter-bootstrap-rails/blob/master/README.md)：

```
rails g scaffold Post title:string description:text
rake db:migrate
rails g bootstrap:themed Posts 
```

# magento - 使用直接包文件上传更新 magento 扩展 - 文件已存在

> ID：13462130
> 
> 赞同：4
> 
> 时间：2012-11-19T21:00:05.647
> 
> 标签：magento, updates

我创建了一个模块，导出了扩展名和后记，我使用直接包文件上传安装了它（在新商店中）。扩展按预期工作。

现在，我进行了一些更新，使用另一个发布版本号导出了扩展名，但是当我尝试上传存档（以相同模式）时，我收到一个错误（***“连接错误：包文件无效 [..] ”。 /app/code/local/Smart2Pay/Globalpay/Block/Form/Pay.php'已经存在"*** )

我读到我可以更改一些 downloader\lib\Mage\Connect\Validator.php 文件（[此处](http://www.magentocommerce.com/boards/viewthread/223815/)）以允许文件覆盖，但我想知道是否有任何其他与最佳实践相关的解决方案。我需要此扩展更新才能为所有 magento 用户工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T22:15:10.167

正如 Tim 所说，安装新版 Magento 扩展包的正确方法是首先在 MagentoConnect Manager 中运行卸载选项以删除旧扩展，然后运行安装选项以从较新的包文件中安装。

不幸的是，这是 MagentoConnect 包管理器功能的（糟糕的）设计。

它还值得解释扩展/包所做的任何数据库修改会发生什么。Magento 模块无法指定卸载脚本或指令。这意味着在卸载原始模块/包后，任何数据库更改仍然存在并且没有被删除。当重新安装较新版本的模块时，这应该会触发模块的数据库升级脚本而不是它的安装脚本来运行。

因此，发生的事情的详细分类如下：

1.  当模块最初是从包中安装时，会运行与 config.xml 中模块版本相对应的模块的最新安装脚本，并进行任何必要的数据库更改。

2.  当模块从 MagentoConnect 管理器中卸载时，数据库保持原样，因此模块所做的所有更改仍然存在于数据库中。

3.  当安装了较新版本的模块时，Magento 数据库 core_resource 表会告诉安装程序之前安装了哪个版本的模块。旧版本号和新版本号用于在模块代码中查找适用的数据库升级脚本。如果找到适当的升级脚本，则运行它。

# jquery - 隐藏/显示元素还是附加元素更好？

> ID：13462131
> 
> 赞同：0
> 
> 时间：2012-11-19T21:00:08.390
> 
> 标签：jquery

哪一种是首选方法，为什么？

**方法一：**

```
<p>When I'm clicked, add an image under me.</p>
<img src="/path/to/image.gif" />

$('p').hide(); // OR css display:none
$('p').click(function() {
    $('img').show();
}); 
```

**方法二：**

```
<p>When I'm clicked, add an image under me.</p>

$('p').click(function() {
    $('<img src="/path/to/image.gif" />').appendTo('p');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:01:16.623

*在这种精确的情况下*，第一个解决方案似乎更好，因为它使浏览器能够在用户点击之前很久就开始加载图像。

当您没有那么大的行为差异时，我建议保留解决方案，使您能够拥有最干净和最简单的代码。这将取决于您可以向我们展示的更多代码。

即使在那里，如果第二种解决方案与框架更加一致，或者由于其他原因几乎可以确保您的图像在缓存中，则第二种解决方案可能会更好。

# java - JSF、validateRegex 和 &（和号）

> ID：13462136
> 
> 赞同：2
> 
> 时间：2012-11-19T21:00:23.743
> 
> 标签：java, regex, jsf

我想测试 inputText 字段以查看其内容是否与至少一个 & （与号）以外的任何内容匹配。

当我测试`&`或`\&`或`\\&`在 validateRegex 的模式字段内时，我总是收到此错误：

> javax.faces.view.facelets.FaceletException: Error Parsing /index.xhtml: Error Traced[line: 71] Le nom de l'identité doit immédiatement suivre le caractère "&" dans la référence d'entité。

我得到 500 错误...

我怎样才能逃脱这个角色？

* * *

**更新**

我已经测试过了

```
<p:inputText id="player_name_register" value="#{login.name}">
    <f:validateRegex pattern="[&amp;]{3, 50}" />
</p:inputText> 
```

但是当我用它测试时`&&&&&&`它不起作用。

我也测试过

```
<![CDATA[
    <p:inputText id="player_name_register" value="#{login.name}">
        <f:validateRegex pattern="[&amp;]{3, 50}" />
    </p:inputText>
]]> 
```

但我的 inputText 不再出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T02:18:59.133

Facelets 是一种基于 XML 的视图技术。整个视图必须是语法上有效的 XML。[XML 特殊字符](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)（如`&`,`<`和）`>`需要转义为`&amp;`,`&lt;`并且`&gt;`应该按原样解释。

```
<f:validateRegex pattern="...&amp;..." /> 
```

*（这里，`...`代表你的正则表达式的其余部分）*

CDATA 块不起作用，因为它基本上会转义整个内容，包括 JSF 组件。引用转义的 XML 字符是没有意义的。在被 Facelets XML 解析器解析之后，又`&amp;`变成`&`了。

* * *

**根据您的更新进行更新，其中的空格**导致**`{3, 50}`正则表达式语法错误。去掉它。**

 **```
<p:inputText id="player_name_register" value="#{login.name}">
    <f:validateRegex pattern="[&amp;]{3,50}" />
</p:inputText> 
```

在 JSF 组件周围使用 CDATA 块根本不是正确的解决方案。它会对整个内容进行 XML 转义，从而`&lt;p:inputText&gt;`发出普通的原版而不是组件的 HTML 表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:10:31.893

使用[CDATA](http://www.w3schools.com/xml/xml_cdata.asp)标记转义 & 符号：

```
<![CDATA[
<h:outputText value="Sun & Moon" />
]]> 
```

如果您想在 Javascript 中转义 & 符号、lt (<) 和 gt (>) 符号，请在 Javascript 中添加 CDATA 部分但对其进行注释：

```
<script>
    //<![CDATA[
    funcion lessThan(a, b) {
        return a < b; //no problems in Facelets
    }
    //]]>
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:15:18.907

带引号的字符串检查有帮助吗？`'&amp;'`**

# javascript - Javascript Blob 构造函数在 iPad 上不起作用

> ID：13462138
> 
> 赞同：3
> 
> 时间：2012-11-19T21:00:27.280
> 
> 标签：javascript, ios, ipad, blob

我正在尝试在用户使用我的网站时截取用户屏幕的屏幕截图，然后使用 html2canvas 将其上传到服务器。这适用于我使用 Chrome 和 Firefox 的桌面（屏幕 > html2canvas > imageURL > Unit8Array > Blob > 上传）。

但是，当我在 iPad 上运行代码时，Blob 创建代码会混淆 html2canvas 图像文件的输入。图像从大约 40k 大小无明显原因地缩小到 19 字节。下面是我的代码。

iPad 的输出使用“ *** ”突出显示。

```
var unit8 = new Uint8Array(imageArray);
var imgBlob;

// check length of encoded image
// *** On this iPad, this generates meaningful size eg 41240 ***
if(navigator.userAgent.match(/iPad/i) != null){                     
    alert('length of the Unit8Array: ' + unit8.length);
}

if(typeof Blob !== 'undefined'){
    // detect if Blob object is supported
    // *** The iPad supports Blob object, it even support it's constructor ***
imgBlob = new Blob([unit8], {type: 'image/jpeg'});
} else if(window.BlobBuilder || window.MSBlobBuilder || 
            window.WebKitBlobBuilder || window.MozBlobBuilder) {
    // generating Blob - the old fashion way
    // Not used by iPad
    var blobBuilderObj = new (window.BlobBuilder || window.WebKitBlobBuilder ||
              window.MozBlobBuilder || window.MSBlobBuilder)();
    blobBuilderObj.append(unit8.buffer);
    imgBlob = blobBuilderObj.getBlob('image/jpeg');
} else {
    // Cannot generate Blob
    alert('Error occurred during Blob generation');
    return;
}

// check length of encoded image
// *** On the iPad imgBlob.size = 19 and imgBlob.toString() = [Object Blob] ***
if(navigator.userAgent.match(/iPad/i) != null){
    alert('Before attach 1: length of the encoded message: ' + imgBlob.size + 
        ', Blob content: ' + imgBlob.toString());
} 
```

知道为什么吗？

非常感谢，海

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T11:27:20.977

根据我对[此处](https://stackoverflow.com/questions/14340989/blob-does-not-accept-uint8array-on-ios)评论的研究，您似乎必须传递给 Blob() 构造函数而不是 Uint8Array 对象，但它是缓冲区属性：

新 Blob（[unit8.buffer]，{..}）

至少通过这种方式，我设法创建了可以在 iPhone5 上的 iOS6 上上传的 Blob。

# c# - LINQ lambda 表达式追加 OR 语句

> ID：13462141
> 
> 赞同：4
> 
> 时间：2012-11-19T21:00:34.927
> 
> 标签：c#, linq, c#-3.0

如果我想将 AND 语句附加到我的查询中，我可以这样做：

```
query = query.Where(obj=>obj.Id == id);

if(name.HasValue)
  query = query.Where(obj=>obj.Name == name); 
```

它会给我：

```
query.Where(obj=>obj.Id == id && obj.Name == name) 
```

如何附加将导致的 OR 语句：

```
query.Where(obj=>obj.Id == id || obj.Name == name) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T21:04:30.360

你不能在本地做到这一点。但是，您可以在运行之前使用[PredicateBuilder组合查询，它支持 OR。](http://www.albahari.com/nutshell/predicatebuilder.aspx)

```
var predicate = PredicateBuilder.False<Product>();
predicate = predicate.Or (obj=>obj.Id == id);
if(name.HasValue)  predicate = predicate.Or (obj=>obj.Name == name);

return query.Where(predicate); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:04:25.223

如果我没有遗漏什么，那就简单地说：

```
query.Where(obj=>obj.Id == id || (obj.Name == name && name.HasValue)) 
```

您可能想阅读这个问题（我的问题......）并回答更复杂的场景：
[How to filter IEnumerable based on an entity input parameter](https://stackoverflow.com/q/12404136/601179)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:04:45.147

我只是把它构建成一个单一的条件：

```
if (name.HasValue)
    query = query.Where(obj=>obj.Id == id && obj.Name == name);
else
    query = query.Where(obj=>obj.Id == id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:30:13.410

我会使用 gdoron 的解决方案，但如果对于较大的查询集似乎不切实际，包含集合操作的稍微复杂的解决方案可能会对您有所帮助：

```
var queryById = query.Where(obj => obj.Id == id);
var queryByName = query.Where(obj => obj.Name == name);
query = queryById.Union(queryByName); 
```

如果您的原始查询包含重复项，则会变得更加困难。

另一种方法可能是`Expression`用来制定您的查询。您可以在执行前修改表达式树，这样您就可以向`Where`子树添加更多条件。这是*大量*的工作，而且对于 99.9%（粗略估计 :)）的案例来说，这太过分了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T21:40:47.200

部分问题是您重写了原始查询。您的 OR 操作将等同于：

```
subquery1 = query.Where(obj=>obj.Id == id);
subquery2 = query.Where(obj=>obj.Name == name);
query = subquery1.Concat(subquery2).Distinct(); 
```

如您所见，这也变得非常笨拙，但是如果您要执行此表格，则必须保持原始序列，以便可以处理等式的右侧和左侧，然后您需要确定重复项被删除。

而不是所有这些，我会尝试找到一种方法来使用 lambdas 动态构建该条件语句，例如

我实际上并没有运行它，但是这样的东西应该可以工作。

```
var cond = obj=>obj.Id == id;

...

// need an or
cond = obj=>cond(obj) || obj.Name == name;

query = query.Where(obj=>cond(obj)); 
```

希望这能给你一个想法。

# assembly - 页面边界上的 pdp8 mri 指令

> ID：13462142
> 
> 赞同：4
> 
> 时间：2012-11-19T21:00:35.003
> 
> 标签：assembly, instruction-set

有谁知道 pdp8 硬件（是否因型号而异）如何处理页面边界上的 mri 指令。例如，如果您的指令位于地址 0177，则程序计数器用于读取该指令，则本质上会递增。如果为地址指定当前页，将使用第 0 页、指令的页或第 1 页，即 pc 在读取指令后但未执行完之前所在的页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T19:03:40.513

在[PDP-8 系列计算机的 MACRO-8 Programmers 参考手册](http://bitsavers.informatik.uni-stuttgart.de/pdf/dec/pdp8/software/DEC-08-CMAB-D_MACRO8.pdf)中，标题中提到的*系列*表明多个模型都向程序员提供了一个通用架构。

从[HD-6120 CMOS 高速 12 位微处理器](https://www.grc.com/sn/files/HD6120_Specifications.pdf)开始，PC 在指令开始时递增，但首先复制到 OL（输出锁存器）。这意味着当前页面是指指令的页面。在任何情况下，该参考都是处理器可执行描述的宝贵来源。

Douglas Jones[的数字设备公司 PDP-8 常见问题解答](http://homepage.cs.uiowa.edu/~jones/pdp8/faqs/)解释说，典型的组装商没有提供任何方法来指定“Z”标志的值，而是自动计算了这个值。这强化了指令引用它自己的页面的概念。

# c# - 我可以在 MonoTouch 项目中使用响应式扩展吗？

> ID：13462150
> 
> 赞同：8
> 
> 时间：2012-11-19T21:01:07.450
> 
> 标签：c#, .net, xamarin.ios, system.reactive, xamarin

有一个名为[mono-reactive](https://github.com/atsushieno/mono-reactive)的 Rx 端口，其中包含一个 MonoTouch 项目，但作者[在十天前宣布](https://github.com/atsushieno/mono-reactive/commit/a030a7e2792eb239e1d5afa8645880264f692ff9)他将放弃该项目，转而支持 Microsoft 开源实现：

> 我很高兴地宣布，既然微软已经在 Apache 许可证中开源了 Reactive Extensions，我将不再使用这个代码库。 [http://rx.codeplex.com/](http://rx.codeplex.com/)

MonoDevelop 试图在[Rx master](http://rx.codeplex.com/SourceControl/changeset/view/ef6a42709f49)中打开 Rx.sln 时挂起，并且那里没有 MonoTouch 目标。[MonoTouch 还没有 PCL 支持](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Building_Cross_Platform_Applications/Part_3_-_Setting_Up_A_Xamarin_Cross_Platform_Solution)。

我想知道是否有人已经为 Rx 建立了一个与 MonoTouch 兼容的项目，以及它是否真的可以在生产中使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T11:04:35.483

### 微软处方

我自己建立了一个项目，结合了[Rx 的 codeplex中的](https://rx.codeplex.com)**Core**、**Interfaces**、**Linq**和**PlatformServices**。 你去：

**[https://github.com/stampsy/rx-monotouch](https://github.com/stampsy/rx-monotouch)**

它适用于引用类型，更不用说值类型（见下文）。~~~~[不幸的是，由于错误8329](https://bugzilla.xamarin.com/show_bug.cgi?id=8329)~~~~~~和~~~~[9087](https://bugzilla.xamarin.com/show_bug.cgi?id=9087)~~
~~它无法编译。~~它现在编译得很好。

### 单反应

我还使用了[单反应](https://github.com/atsushieno/mono-reactive)，它对我来说效果很好。虽然微软的实现看起来更简洁可靠，但单反应式更小，更容易在真正需要时修复。

您可以尝试两种方法，看看哪种方法最适合您。
快乐观察！

### 减轻崩溃

使用这两个框架时，我经常遇到设备上的 AOT 限制导致的崩溃。**Xamarin 的 Rolf 告诉我，您通常可以通过不使用值类型**作为 Rx 泛型类型参数来解决大多数 AOT 限制。

例如，`IObservable<bool>`扩展可能会在设备上崩溃`IObservable<long>`，但引用类型应该适用于大多数方法。

在[我的 Rx 版本中，](https://github.com/stampsy/rx-monotouch)我添加`IntervalSafe`了返回的方法`Unit`（我将其更改为引用类型，而不是结构）而不是`long`，因此不会导致整个代码库发生数十次崩溃。

一些 Rx 方法仍然崩溃，但**修复这些崩溃相当容易**。

请参阅Costo 的修复或[`Throttle`我](https://github.com/stampsy/rx-monotouch/commit/e34e12dcf44a71d357cc419c15ff8ee8b79b819c)[的`Buffer`修复](https://github.com/stampsy/rx-monotouch/commit/032faef6a97c4804016d9caf7cdcda3571fe3251)以供参考。
我很乐意合并处理其他 Rx 方法及其重载的拉取请求。

# ruby-on-rails - Ubuntu | 乘客 | Rails - 找不到 rake-0.9.2

> ID：13462155
> 
> 赞同：1
> 
> 时间：2012-11-19T21:01:15.467
> 
> 标签：ruby-on-rails, ubuntu, bundler, passenger, linode

我已经设法将应用程序部署到 Linode 服务器，启动 apache 并进入索引页面。但是，除此之外的所有内容都会引发以下错误：

```
Error message:
Could not find rake-0.9.2 in any of the sources (Bundler::GemNotFound)
Exception class:
PhusionPassenger::UnknownError

0   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/spec_set.rb  90  in `block in materialize'
1   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/spec_set.rb  83  in `map!'
2   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/spec_set.rb  83  in `materialize'
3   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/definition.rb    113 in `specs'
4   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/definition.rb    158 in `specs_for'
5   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/definition.rb    147 in `requested_specs'
6   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/environment.rb   23  in `requested_specs'
7   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb   11  in `setup'
8   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler.rb   116 in `setup'
9   /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/utils.rb    326 in `prepare_app_process'
10  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb 156 in `block in initialize_server'
11  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/utils.rb    563 in `report_app_init_status'
12  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb 154 in `initialize_server'
13  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  204 in `start_synchronously'
14  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  180 in `start'
15  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb 129 in `start'
16  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    253 in `block (2 levels) in spawn_rack_application'
17  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   132 in `lookup_or_add'
18  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    246 in `block in spawn_rack_application'
19  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   82  in `block in synchronize'
20      prelude>    10:in `synchronize'
21  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   79  in `synchronize'
22  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    244 in `spawn_rack_application'
23  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    137 in `spawn_application'
24  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    275 in `handle_spawn_application'
25  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  357 in `server_main_loop'
26  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  206 in `start_synchronously'
27  /usr/local/rvm/gems/ruby-1.9.3-p327/gems/passenger-3.0.18/helper-scripts/passenger-spawn-server 99  in `' 
```

我发现有人在这里遇到了类似的问题，但是我设法按照引用的 url 中的步骤进行操作，但这并没有改变任何东西。

[乘客 + Rails 3.1.1 = 在任何来源中都找不到 rake-0.9.2 (Bundler::GemNotFound)](https://stackoverflow.com/questions/7833020/passenger-rails-3-1-1-could-not-find-rake-0-9-2-in-any-of-the-sources-bundl)

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T21:04:16.963

尝试运行

```
bundle install 
```

这应该安装您的应用程序所需的所有 gem，其中还应该包括 Rake -v 0.9.2

# ruby-on-rails - Rails：有没有办法通过命令行添加关联？

> ID：13462163
> 
> 赞同：3
> 
> 时间：2012-11-19T21:01:50.273
> 
> 标签：ruby-on-rails, command-line, model

在[Rails 文档](http://guides.rubyonrails.org/association_basics.html#the-has_many-association)中，我们找到以下示例：

```
class Physician < ActiveRecord::Base
  has_many :appointments
  has_many :patients, :through => :appointments
end 
```

我只是好奇：是否可以通过命令行使用生成这个`rails generate model`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:05:04.837

不是根据您从中获得的使用信息`rails generate model`。但是，您可以建立`belongs_to`关系：

```
rails generate model photo title:string album:references 
```

给我以下内容`app/models/photo.rb`：

```
class Photo < ActiveRecord::Base
  belongs_to :album
end 
```

# cookies - req.signedCookies 没有在 expressJS 中被读取

> ID：13462164
> 
> 赞同：0
> 
> 时间：2012-11-19T21:01:51.117
> 
> 标签：cookies, express

这是我的设置：

express.js 版本”：“3.0.0rc2”

**`app.js`**

```
...  
app.use(express.cookieParser('secret'));
app.use(express.session({secret: 'secret'}));
app.use(app.router);
... 
```

然后设置签名的cookie和重定向：
`res.cookie('session', cookie_value, {signed: true});` `res.redirect('/else_where');`

然后检索签名的cookie：
`var cookie = req.signedCookies.session;`

```
console.log('get cookie: ' + req.cookies.session);
console.log('get signed cookie: ' + req.signedCookies.session); 
```

问题是 cookie 是`undefined`用于签名的 cookie 并且与`req.cookies.session`.

出于某种原因，我没有完成 cookie 的签名。
不知道发生了什么。
我的顺序排列`app.use()`正确吗？

类似于这个[这个](https://stackoverflow.com/questions/11897965/what-are-signed-cookies-in-connect-expressjs)

**UPDATE_02**
我实现了一个简单`res/req`的签名cookie，如下所示：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.cookieParser('secret'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(expressValidator);
  app.use(express.session());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.get('/', function(req, res) {
  if (!req.signedCookies.cat) {
    res.cookie('cat', 'boo', {signed: true});
    console.log('setting cookie');
    res.writeHead(200, {'Content-Type':'text/plain'});
    return res.end('cookie set');
  }

  res.end('signed cookie: ' + req.signedCookies.cat);
}); 
```

当我使用浏览器点击时，`localhost:3000`我得到了第一个期望的响应`cookie set`。
我检查了浏览器 cookie 并且 cookie 已设置。
当我使用相同的浏览器`localhost:3000`再次点击时，我得到相同的响应“cookie set”。
该请求似乎没有在 cookie 上获取。

所以在另一个文件中，我复制/粘贴了上面的代码并将端口切换到`3080`.
当通过第二个响应时，会产生“签名的 cookie：boo”。

然后，如果我刷新`localhost:3000`响应是`signed cookie: boo`.
为什么会这样？是否有不应该进行的缓存？
任何帮助表示赞赏。

**UPDATE_01**
即使我`req.signedCookies.session`在设置 cookie 后立即执行操作，我也会返回`undefined`。cookie 确实被签名了，因为`.`后面有一个附加的一堆随机字母和数字。它没有被分配给`req.signedCookies`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:43:42.157

浏览器中的cookie是：
`boo.o5SqHrxUOZkyNLdIBqIZrfog6jXYJkP78M99IMbrnDA`

通过更新为 express 3.0.3，cookie 变为： `s:boo.o5SqHrxUOZkyNLdIBqIZrfog6jXYJkP78M99IMbrnDA`

更新后问题已修复。

# c# - 如何从 txtfile 读取然后将信息传递给另一个类 c#

> ID：13462169
> 
> 赞同：0
> 
> 时间：2012-11-19T21:02:19.880
> 
> 标签：c#, file-io

我使用以下代码将数据存储在数组中，然后将其打印出来。

```
Person[] people = {new Person( "Loki", "Lo", "Asgard", 2050),
                              new Person( "Thor", "Th", "Asgard", 2050),
                              new Person( "Iron", "Man", "Il", 4050),
                              new Person( "The", "Hulk", "Green", 1970)}; 
```

现在我想从文本行中读取这些信息并使用相同的数组。如何？

txt文件看起来像这样

```
The Hulk Green 1970
Iron Man Il 4050
Thor Th Asgard 2050
Loki Lo Asgard 2050 
```

我正在考虑将单词存储在字符串数组中，然后对每个单词使用 [0]、[1] 等。但是循环会导致问题，因为我只想使用一个“人”。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:07:15.707

我将添加一个`Person`构造函数，该构造函数采用“行”数据并相应地对其进行解析。

然后你可以这样做：

```
var people = File.ReadLines("yourFile.txt")
                 .Select(line => new Person(line))
                 .ToArray(); 
```

如果您不想要额外的构造函数：

```
var people = File.ReadLines("yourFile.txt")
                 .Select(line => line.Split())
                 .Select(items => new Person(item[0], item[1], item[2], Convert.ToInt32(item[3]))
                 .ToArray(); 
```

您应该注意，这里提供的解决方案都没有良好的异常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:15:29.580

这是一个不使用 Linq 的解决方案

```
Person[] people= new Person[4];
using(var file = System.IO.File.OpenText(_LstFilename))
{
   int j=0;
 while (!file.EndOfStream)
    {
        String line = file.ReadLine();

        // ignore empty lines
        if (line.Length > 0)
        {    

            string[] words = line.Split(' ');
             Person per= new Person(words[0], words[1], words[2], Convert.ToInt32(words[3]));

             people[j]=per;
             j++

        }

} 
```

# android - 在扩展 ImageView 类中获取上下文时无法获取子级

> ID：13462172
> 
> 赞同：0
> 
> 时间：2012-11-19T21:02:33.057
> 
> 标签：android, imageview, children

我有一个扩展 ImageView 类。（扩展 ImageView 的类，而不是布局 ImageView）在我正在开发的应用程序中，我试图使用以下方法从 GridView 获取 Child：

```
MyCustomDefinedImageViewClass someThing =(MyCustomDefinedImageViewClass)gridViewIGetTheChildFrom.getChildAt(some int); 
```

如果我在我的任何接口定义的 void 上调用它，这就是我想要的。

但是我想在调用类时调用它，因此当我得到 Context 时我会调用它，如下所示：

```
public ImageCell (Context context) {
super (context);
MyCustomDefinedImageViewClass upe =(MyCustomDefinedImageViewClass)gridViewIGetTheChildFrom.getChildAt(some int);} 
```

这会导致 NullPointerException 崩溃，并且在我的 logCat 中这是“原因”。

```
11-19 22:00:48.200: E/AndroidRuntime(6252):     at my.package.name.MyCustomDefinedImageViewClass.<init>(MyCustomDefinedImageViewClass.java:57) 
```

为什么我无法获取 GridView 的孩子？我试过用一个没有运气的线程来延迟，调用另一个 void 会导致同样的崩溃。我怎样才能得到孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:39:39.427

空指针实际上表明您的`gridViewIGetTheChildFrom`对象在尝试对其调用方法时为空。

`Log`那`gridViewIGetTheChildFrom`实际上不是空的，然后从那里开始。

虽然我会寻找一种更好的方法来传递你的对象，但通常推荐的方式是通过接口/委托/回调。

# javascript - 在执行脚本之前等待一些加载的图像

> ID：13462173
> 
> 赞同：-1
> 
> 时间：2012-11-19T21:02:35.420
> 
> 标签：javascript

我有一个隐藏的 div 标签，它将用于加载的图像总数：

```
<div id="ImagesLoaded">0</div> 
```

当一个图像页面运行时，它会加载 8 个图像，并且每个图像都会`onload`添加 1 到“ImagesLoaded”。有些图像可能比其他图像大，因此页面加载时间可能会有所不同。当“ImagesLoaded”为 8 时，我想运行一个脚本来调整我的屏幕，这将基于图像的大小和方向。

我想知道的是：如何在后台运行一个脚本，每 100 毫秒检查一次我加载了多少图像？当有 8 张图像时，它应该停止查看数量，并运行另一个脚本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:06:54.203

```
 onLoad = "addOneToImagesLoaded();" 
```

和js：

```
 function addOneToImagesLoaded(){
      current_count = parseInt(getElementById('ImagesLoaded').innerHTML);
      current_count = current_count+1;
      getElementById('ImagesLoaded').innerHTML = current_count.toString();
      if (current_count == 8){
           YOUR LOGIC GOES HERE
      }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:05:43.940

您可以使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

```
var imageInterval = setInterval(checkingFunction, 100);

function checkingFunction()
{
    if (count == 8)
    {
         // do what you want to do
         clearInterval(imageInterval);
    }
} 
```

或者，您可以在 onload 处理程序中调用这样的函数：

```
function imageLoaded()
{
     count++;
     if (count == 8)
     {
         // do what you want to do
     }
} 
```

在这两个示例中，我都使用全局`count`变量而不是 div 元素来存储值。

# php - PHP Paypal IPN，如何检测订阅者是否更改了他们的电子邮件地址

> ID：13462175
> 
> 赞同：0
> 
> 时间：2012-11-19T21:02:44.357
> 
> 标签：php, paypal, paypal-ipn

假设一个人更改了他们的 Paypal 电子邮件地址，同时仍然订阅了我的服务。如何找到用户的新 Paypal 电子邮件地址？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:35:58.003

首先，您可以使用基于令牌的[Permissions API](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_Permissions.pdf)，这样您就不必担心这一点。

如果您想在 API 请求中坚持使用 SUBJECT（我假设您现在正在这样做），您可以让用户输入他们的 PayPal 商家帐户 ID 而不是他们的 PayPal 电子邮件地址，并将其用于 SUBJECT取而代之的是价值。此值永远不会改变，因此如果用户更改他们的电子邮件地址，它不会影响您的解决方案。

否则，您只需要关注您的 API 日志，当它们由于无效凭据而失败时，您可以向该用户发送通知，告知他们需要更新他们在您的应用程序中存档的电子邮件地址。

# objective-c - 记录活动的最佳模式是什么？

> ID：13462176
> 
> 赞同：0
> 
> 时间：2012-11-19T21:02:45.810
> 
> 标签：objective-c, design-patterns, logging

我编写了我的应用程序（obj-c），并创建了一个非常严格的类层次结构。每个班级都对其他班级以及这些班级如何管理他们的数据知之甚少或一无所知。

现在我需要创建一个包含活动完整描述的日志文件，但是因为没有类知道“完整”过程，所以没有类可以写入“完整”日志。

我正在寻找一种设计模式或最佳实践来在类之间共享信息而不共享大量细节。

我希望我的英语是可以理解的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:52:56.977

我认为了解每个班级对他人的了解可能对您来说不是一个好习惯。这样，您的类将变得越来越相互依赖，这与许多设计原则相矛盾并破坏了代码的模块化。

我会为您的日志活动添加另一个模块，让您能够了解所有过程，从而为您提供有关日志记录的能力。这种方法很容易实现，也很简单。此外，您可以查看[Aspect Oriented Architecture](http://en.wikipedia.org/wiki/Aspect-oriented_software_development)和[Aspect-oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，这使您能够分离交叉切割关注点（在您的情况下为日志）。你应该检查[AspectCocoa](http://cocoadev.com/wiki/AspectCocoa)和[AOP-in-Objective-C](https://github.com/moszi/AOP-in-Objective-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:03:13.303

用日志装饰器包装每个类怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:56:50.767

在 Log4Net ( [http://logging.apache.org/log4net/release/features.html](http://logging.apache.org/log4net/release/features.html) )中实现的一些模式

**分层日志架构** 分层日志非常适合基于组件的开发。每个组件都有自己的记录器。在单独测试时，这些记录器的属性可以根据开发人员的需要进行设置。当与其他组件组合时，记录器会继承由组件的集成商确定的属性。可以选择性地提升一个组件上的日志记录优先级，而不会影响其他组件。当您需要来自单个组件的详细跟踪而不用来自其他组件的消息使跟踪文件拥挤时，这很有用。这一切都可以通过配置文件来完成；无需更改代码。

**记录上下文** log4net 可用于以在记录点对开发人员透明的方式收集记录上下文数据。GlobalContext 和 ThreadContext 允许应用程序存储附加到日志消息的上下文数据。例如，在 Web 服务中，一旦调用者通过身份验证，调用者的用户名就可以存储在 ThreadContext 属性中。然后，此属性将作为从同一线程生成的每个后续日志消息的一部分自动记录。

# java - Android在哪里初始化活动数据？

> ID：13462178
> 
> 赞同：0
> 
> 时间：2012-11-19T21:02:52.527
> 
> 标签：java, android

我想在活动开始时进行初始化。

我可以将它放在`onCreate`方法中，但每次`screenOrientation`更改时都会调用它。我可以禁用它`AndroidManifest`，但也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:09:05.623

请阅读[这篇关于活动](http://developer.android.com/training/basics/activity-lifecycle/index.html)的文章，包括[方向变化处理](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)。一般来说[，阅读有关活动生命周期](http://developer.android.com/guide/components/activities.html?q=activity%20lifecycle#Lifecycle)的内容也会对您有所帮助。

# android - 在列表视图中显示图像

> ID：13462180
> 
> 赞同：0
> 
> 时间：2012-11-19T21:02:54.187
> 
> 标签：android, json

如何在列表视图中显示来自 JSON 的图像和字符串文本？

```
// new HashMap
HashMap<String, String> hashMap = new HashMap<String, String>();

String imageName = c.getString("avater");
URL url1 = new URL(imageName);
HttpURLConnection connection = (HttpURLConnection) url1.openConnection();

InputStream is = connection.getInputStream();
Bitmap img = BitmapFactory.decodeStream(is); 

//updating listview with the parsed items
ListAdapter adapter = new SimpleAdapter(
    Inboxtest.this,
    entryList,
    R.layout.inboxlist,
    new String[] { TAG_QUERY, TAG_RESULT, timesent, icon },
    new int[] { R.id.textView1, R.id.textView3, R.id.textView2, R.id.textView4 }
);

setListAdapter(adapter); 
```

我需要将图像放在此列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:40:20.893

您将需要通过 xml 创建一个自定义 listview_row 布局文件。并通过创建一个将解析的 JSON 数据与图像一起绑定到列表的适配器来扩充该自定义行。几天前我回答了一个非常相似的问题，所以我不会在这里重新发布该代码，但我会将您链接到该问题。另外，我发布了一个博客链接，介绍如何创建包含文本、图像和自定义适配器的自定义列表。希望这对人有所帮助。

上一个 SO 问题 [https://stackoverflow.com/a/13186855/949266](https://stackoverflow.com/a/13186855/949266)

在这里找到我的博客文章 [http://jadebyfield.blogspot.com/](http://jadebyfield.blogspot.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:14:33.213

尝试使用[ImageLoader](http://androidimageloader.com/)的延迟加载在 ListView 中显示图像。通过这种方式，您的 UI 将保持响应。

使用包装器来存储图像名称及其 URL。把它放到一个数组列表中，然后在 ListAdapter 中使用这个数组列表。

为具有 textview 和 imageview 的 ListView 创建一行（在 xml 中）。在自定义 ListAdapter 的 getView 中设置图像名称和图像。

试试看。如果你卡住了，我会分享代码。

快乐编码！

# spring - 在 STS 中部署 Spring 应用程序

> ID：13462181
> 
> 赞同：1
> 
> 时间：2012-11-19T21:02:56.980
> 
> 标签：spring

在启动部署在 STS 中的简单 Spring 应用程序期间，我得到：

```
java.lang.ClassNotFoundException: org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader 
```

在我的 context.xml 中，我有：

```
<Loader
loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"
useSystemClassLoaderAsParent="false" /> 
```

我需要将以下罐子放在特定位置吗？我试图将它复制到我的 STS 安装目录中的各种 lib 目录中

```
spring-instrument-3.1.0.RELEASE.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:07:25.987

jar 需要在您的类路径中。将它添加到项目的构建路径应该是让它工作所需的全部内容。

# editor - 如何使粘贴在 Vim 中的其他地方一样工作

> ID：13462183
> 
> 赞同：1
> 
> 时间：2012-11-19T21:03:04.903
> 
> 标签：editor, vim

我使用 Vim 已经有一段时间了。有一件事我仍然不习惯并且永远不会习惯......它在光标*之后复制/粘贴。*它让我发疯，在复制或粘贴任何内容之前，我必须停下来思考一下。

例如，如果我在“hello world”中突出显示了“hello world”，即使“d”没有突出显示，它也会复制“hello world”。和粘贴一样。

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:06:06.787

如果你，比如说，在突出显示`v`时按下，然后移动到并按下它会准确地拉出你所要求的 - <code>hello worl. 你确定你没有将光标推进到？你确定你用吗？我怀疑您要么这样做，要么没有将光标视为突出显示的一部分。`h``l``y``d``y``Y`

# python - 结交 python 和 fortran 朋友

> ID：13462184
> 
> 赞同：5
> 
> 时间：2012-11-19T21:03:06.627
> 
> 标签：python, fortran, f2py

假设我们需要在 python 程序中调用 fortran 函数，该函数返回一些值。我发现以这种方式重写fortran代码：

```
subroutine pow2(in_x, out_x)
      implicit none
      real, intent(in)      :: in_x
!f2py real, intent(in, out) :: out_x
      real, intent(out)     :: out_x
      out_x = in_x ** 2
      return
end 
```

并以这种方式在python中调用它：

```
import modulename
a = 2.0
b = 0.0
b = modulename.pow2(a, b) 
```

给我们工作结果。我可以用其他方式调用fortran函数吗，因为我认为第一种方式有点笨拙？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T21:33:43.790

我认为你只需要稍微改变你的 f2py 函数签名（所以那`out_x`只是`intent(out)`而且`in_x`只是`intent(in)`）：

```
subroutine pow2(in_x, out_x)
  implicit none
  real, intent(in)   :: in_x
  !f2py real, intent(in) :: in_x
  real, intent(out)     :: out_x
  !f2py real, intent(out) :: out_x
  out_x = in_x ** 2
  return
end subroutine pow2 
```

现在编译：

```
f2py -m test -c test.f90 
```

现在运行：

```
>>> import test
>>> test.pow2(3)   #only need to pass intent(in) parameters :-)
9.0
>>> 
```

* * *

请注意，在这种情况下，*无需*特殊注释`f2py`即可正确扫描函数的签名：*`!f2py`*

 *```
!test2.f90
subroutine pow2(in_x, out_x)
  implicit none
  real, intent(in)   :: in_x
  real, intent(out)     :: out_x
  out_x = in_x ** 2
  return
end subroutine pow2 
```

编译：

```
f2py -m test2 -c test2.f90 
```

跑：

```
>>> import test2
>>> test2.pow2(3)   #only need to pass intent(in) parameters :-)
9.0
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T00:37:18.147

避免`intent(inout)`参数的另一个好处是（有一些其他限制）[可以考虑`PURE`](https://stackoverflow.com/questions/9813494/pure-subroutines-in-fortran-compiler-optimization)生成的函数。这与函数式语言采用的无副作用方法有关，并且通过 Fortran 编译器更好的优化和错误检测得到回报，对于自动并行化尤其重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T22:57:49.570

如果您使用的是 IPython，请尝试使用魔法命令，它可以编写

```
%%fortran
subroutine pow2(in_x, out_x)
  implicit none
  real, intent(in)   :: in_x
  real, intent(out)     :: out_x
  out_x = in_x ** 2
  return
end subroutine pow2 
```

然后只需在您的代码中使用此函数（无需额外导入）。*

# objective-c - NSView alignmentRectForFrame：在 OS X 10.6

> ID：13462190
> 
> 赞同：1
> 
> 时间：2012-11-19T21:03:21.457
> 
> 标签：objective-c, macos, cocoa, nspopupbutton

由于 10.7`NSVeiw`有一个新方法，称为[`alignmentRectForFrame:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/alignmentRectForFrame%3a)返回`NSRect`实际内容（不包括边框、阴影、反射......）。

10.6 上是否有替代方法或解决方法？

详细信息：我正在创建一个包含s 作为项目`NSPopUpButton`的列表 ( )。问题是，默认情况下，图像中的图像具有原始大小，但选定的图像（在 中看到）被重新缩放。我希望图像在和.`NSMenu``NSImage``NSMenu``NSPopUpButton``NSMenu``NSPopUpButton`

# php - PHP SQL 连接

> ID：13462194
> 
> 赞同：0
> 
> 时间：2012-11-19T21:03:41.453
> 
> 标签：php, mysql, sql

出于某种原因，我的 SQL 不会连接任何想法？我使用函数连接到 SQl 但遇到了一些麻烦，因为它告诉我 $row_results 没有返回任何数据。

```
function db_connect() {
$db_connect = mysql_connect($db_host, $db_user, $db_pass);
if (!$db_connect)
{
    die('Can not connect: ' . mysql_error());
}
mysql_select_db($db_name, $db_connect);
}

function db_close() {
    mysql_close($db_connect);
}

function db_select($table_name, $table_where) {
    $row_result = mysql_query("SELECT * FROM '$table_name' WHERE email='$table_where'");
    $row_get = mysql_fetch_array($row_result);
    $row_count = mysql_num_rows($row_result);
}

db_connect();

db_select("attachments", "email@email.com");
die($row_get['email']);

db_close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:12:01.723

我可以看到的一个问题是这个功能：

```
function db_select($table_name, $table_where) {
    $row_result = mysql_query("SELECT * FROM '$table_name' WHERE email='$table_where'");
    $row_get = mysql_fetch_array($row_result);
    $row_count = mysql_num_rows($row_result);
} 
```

你不会从中返回任何东西。

您可以从使用例如开始：

```
function db_select($table_name, $table_where) {
    $row_result = mysql_query("SELECT * FROM '$table_name' WHERE email='$table_where'");
    $row_get = mysql_fetch_array($row_result);
    $row_count = mysql_num_rows($row_result);

    return array($row_count, $row_get);
} 
```

你真的需要在 PDO 或 mysql 中切换到带有绑定变量的预处理语句，以避免你现在遇到的 sql 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:07:34.043

改变这个

```
if (!$db_connect)
{
    die('Can\'t connect: ' . mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:10:16.043

尝试这个：

```
$db_config = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
        /* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
} 
```

对于更高版本的 PHP，建议使用改进的 MySQL 库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:11:42.557

在这一行中，表名周围有引号。

```
$row_result = mysql_query("SELECT * FROM '$table_name' WHERE email='$table_where'"); 
```

不要在表名周围加上引号。在选择之后运行`mysql_error()`可能会吐出与此相关的错误。

此外，`mysql_*`正在被弃用。您应该使用`mysqli_*`或 PDO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T21:13:07.113

你的变量有问题。在函数之外`db_select`，变量 $row_get 不存在！如果您想将结果发送到新变量中，则必须像这样使用 return ：

```
function db_select($table_name, $table_where,$connection) {

    $row_result = mysqli_query($connection,"SELECT * FROM $table_name WHERE email='".mysqli_real_escape_string($table_where).'");
    $row_get = mysqli_fetch_array($row_result);
    $row_count = mysqil_num_rows($row_result);
    return array($row_get,$row_count);
}

$var = db_select("attachments", "email@email.com", db_connect());
echo $var[0]['email']; 
```

# php - 如何检查是否给出了所有 url 参数？

> ID：13462200
> 
> 赞同：0
> 
> 时间：2012-11-19T21:04:23.230
> 
> 标签：php, url

我有这个网址：

`localhost/moked/insert_event.php?custnumber=1234&event=E15&port=8088&areanumber=17`

我想检查用户是否已将其更改为例如：

`localhost/moked/insert_event.php?custnumber=1234`

我知道如何检查变量是否为空，但我想知道用户是否取出了参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T21:09:15.640

对单个变量执行此操作非常简单：

```
if (!isset($_GET['event'])) {
    // event is missing
} 
```

大多数人不知道的是，该`isset`命令将采用您愿意提供的尽可能多的参数。您可以一次检查所有必需的参数：

```
if (isset($_GET['custnumber'], $_GET['event'], $_GET['port'], $_GET['areanumber'])) {
    // all parameters are set
} else {
    // some are missing
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:06:33.660

就像是：

```
if( (!isset($_GET['event'])) || (!isset($_GET['port'])) || ... ) {
   //do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:06:45.680

检查是否存在所需的变量：

```
if (!isset($_GET['port'])) {
    // do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T21:08:25.330

试试`isset($_GET['event'])`，，，`isset($_GET['port'])`_`isset($_GET['areanumber'])`

见[isset()](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T21:09:10.177

```
try{
    if(!isset($_GET['custnumber'])){
        throw new Exception('Missing "custnumber" parameter');
    }elseif(!isset($_GET['event'])){
        throw new Exception('Missing "event" parameter');
    }elseif(!isset($_GET['port'])){
        throw new Exception('Missing "port" parameter');
    }elseif(!isset($_GET['areanumber'])){
        throw new Exception('Missing "areanumber" parameter');
    }
}catch(Exception $e){
    echo $e->getMessage();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T21:17:08.560

检查变量列表：

```
$vars=array(
'var1'=>'Var1 Description',
'var2'=>'Var2 Description',
'var3'=>'Var3 Description');
$delim='';
$message='';
foreach($vars as $name=>$description)
{
    if(!isset($_GET[$name]))
    {
        $message.=$delim.$description;
        $delim=', ';
    }
}
if($message!=='')$message='Missing: '.$message; 
```

# c++ - Qt/C++ 中的加密安全伪随机数生成器（跨平台）

> ID：13462203
> 
> 赞同：1
> 
> 时间：2012-11-19T21:04:29.203
> 
> 标签：c++, sql, qt, password-encryption

我正在开发一个管理敏感数据的安全应用程序，所以我需要某种安全登录机制。我正在使用 Qt 库（C++ 版本），到目前为止，当用户从我的应用程序创建帐户时，我找不到提供此 [加密安全伪随机数生成器] 来获取 Salt 的函数。我知道应该如何将密码存储在数据库中，并且似乎在制作新盐时必须使用 CSPRNG。我找了很久，试图找到一种在 Qt 中做到这一点的方法，但我刚刚得出结论，没有办法单独在 Qt 中做到这一点。而是**至少有**一个跨平台的 C++ 方法来做到这一点？我可以包含一个库，但我更喜欢它是 LGPL，所以如果我将来选择开发专有/闭源应用程序，我仍然可以使用相同的方法。一些额外的信息是我现在不太可能使用 SQL（MSSQL Express 服务器），所以我添加了 SQL 标记。如果有帮助的话，我可能也会使用 QSslSocket（用于客户端/服务器之间的加密）。如果您能对此有所启发，我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:57:52.253

如果您*认为*您需要一个加密安全的 PRNG 来生成盐，那么我必须告诉您，您不了解盐是什么以及它如何工作以及为什么工作以及它对哪些类型的攻击有用。

salt 必须*以明文形式存储在*加盐密码的哈希值旁边这一简单事实应该表明，您实际上并不需要用于 salt 的加密安全 PRNG - 或任何 PRNG。坦率地说，您可以拥有一个简单的 64 位数字，每次需要新盐时，您都会将其加一，它与加密安全 PRNG 生成的盐一样安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:11:03.000

OpenSSL 中的加密库具有“实现加密安全伪随机数生成器 (PRNG)”的 [rand函数。](http://www.openssl.org/docs/crypto/rand.html)

OpenSSL 已经存在了 10 多年，并且仍在积极开发中。

这是 OpenSSL[许可证](http://www.openssl.org/source/license.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T21:49:13.513

标准库提供了`<random>`其中包括`std::random_device`，旨在提供对非确定性 RNG 的访问。不能保证提供加密 pRNG，因此您必须检查您关心的平台。

libc++ 默认使用 /dev/urandom，它是 OS X (Yarrow) 和 Linux 上的加密 pRNG（它使用可以耗尽的熵池，您可能希望告诉 random_device 使用“/dev/random”代替） .

libstdc++ IIRC 根据宏使用“/dev/urandom”或者是确定性 pRNG。

从 VS2012 开始的 VC++ 提供了一个非确定性的`std::random_device`. 早期版本是确定性的。

由于某些实现`random_device`是确定性的，您可能希望改用 Boost 的 random_device 实现。在 linux 和 OS X 上它默认使用“/dev/urandom”，在 Windows 上它使用加密服务提供者“MS_DEF_PROV”。

# jquery - JQuery嵌套拖放事件传播

> ID：13462205
> 
> 赞同：0
> 
> 时间：2012-11-19T21:04:32.467
> 
> 标签：jquery, drag-and-drop, droppable

我有两个可放置的嵌套 div。根据内部 div 的内容，通过 accept 属性确定是否允许删除元素。通过这样做，我可以防止内部 droppable 中的重复。

问题是，如果在内部 div 中将 accept 属性设置为 false，则事件会冒泡到父级。父母接受下降，这正是我不想要的。一个复杂的因素是接受函数的参数只包含删除的节点，我没有引用实际的事件对象，所以我无法停止传播:(

所以最大的问题是：如果子接受属性评估为假，我可以阻止事件传播到父可丢弃吗？

编码：

```
$(node).droppable({
    tolerance: "intersect",
    accept: function(nodes) {
                    //if acceptPM evaluates to false the event is bubbled which I don't want
        return acceptPM(nodes);
    },
    greedy: true,
    activeClass: "ui-state-default",
    hoverClass: "ui-state-hover",
    drop: function(event, ui) {
        //do something          
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:46:51.087

解决了。

我解决了事件传播，我删除了接受函数并在 drop 函数中添加了一个检查。如果该项目已经存在，则什么也不做，并且该掉落被还原:)

也许不是最干净的方式，但它有效。

事后看来很简单。。

# javascript - 通过声音幅度为对象设置动画？

> ID：13462206
> 
> 赞同：5
> 
> 时间：2012-11-19T21:04:40.153
> 
> 标签：javascript, flash, web-audio-api

我知道可以通过 Actionscript 为带有声音的对象设置动画。我真的希望也可以使用 JavaScript 为对象设置动画，因为它们非常相似。

也许它可以用 jQuery 或 HTML5 来完成。我只是希望找到一种方法来做到这一点之外的闪存。

**有谁知道这些格式是否可行？**我做了很多研究，似乎找不到任何表格或教程说它可能或不可能。

基本上，我正在尝试实现与我在 Actionscript 中编码的相同效果，但我想使用另一种语言对其进行编码，因此也看不到 Flash 视图。

**这是 Flash 示例：** [http ://beaubird.com/presentation.php](http://beaubird.com/presentation.php)

以下是使用 actionscript 动画幅度的示例：http: [//www.developphp.com/view.php?tid= 22](http://www.developphp.com/view.php?tid=22)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T05:44:22.697

我创建[了一个示例，该示例根据音频振幅更改 svg 圆形元素的半径和颜色](http://jsbin.com/ovesiv/4/edit)。

**这将在 WebKit 浏览器中工作，但没有别的**。据我所知，Webkit 浏览器是唯一接近实现[W3C Web 音频 API 规范的浏览器，但](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)[Mozilla 音频数据 API 文档](https://wiki.mozilla.org/Audio_Data_API#Standardization_Note)似乎表明 Mozilla 已经放弃了该规范并且也将实现 Web 音频 API . 我很高兴地不知道 Internet Explorer 实施（或缺乏）规范的状态。

不幸的是，现在的答案是除了 Flash 之外没有很好的跨浏览器解决方案，但如果你走这条路，你就会被移动设备搞砸了。

这是[完整的、有效的 JSBin 示例](http://jsbin.com/ovesiv/4/edit)。

这是代码：

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>Drums</title>
    </head>
    <body>
        <svg width="200" height="200">
            <circle id="circle" r="10" cx="100" cy="100" />
        </svg>
    </body>
</html> 
```

Javascript：

```
var context = new webkitAudioContext();

// Here's where most of the work happens
function processAudio(e) {
  var buffer = e.inputBuffer.getChannelData(0);
  var out = e.outputBuffer.getChannelData(0);
  var amp = 0;

  // Iterate through buffer to get the max amplitude for this frame
  for (var i = 0; i < buffer.length; i++) {
    var loud = Math.abs(buffer[i]);
    if(loud > amp) {
      amp = loud;
    }
    // write input samples to output unchanged
    out[i] = buffer[i];
  }

  // set the svg circle's radius according to the audio's amplitude
  circle.setAttribute('r',20 + (amp * 15));

  // set the circle's color according to the audio's amplitude
  var color = Math.round(amp * 255);
  color = 'rgb(' + color + ',' + 0 + ',' + color + ')';
  circle.setAttribute('fill',color);
}

window.addEventListener('load',function() {
  var circle = document.getElementById('circle');

  // Add an audio element
  var audio = new Audio();
  audio.src = 'http://www.mhat.com/phatdrumloops/audio/acm/mole_on_the_dole.wav';
  audio.controls = true;
  audio.preload = true;
  document.body.appendChild(audio);

  audio.addEventListener('canplaythrough',function() {
    var node = context.createMediaElementSource(audio);

    // create a node that will handle the animation, but won't alter the audio
    // in any way        
    var processor = context.createJavaScriptNode(2048,1,1);
    processor.onaudioprocess = processAudio;

    // connect the audio element to the node responsible for the animation
    node.connect(processor);

    // connect the "animation" node to the output
    processor.connect(context.destination);

    // play the sound
    audio.play();
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:16:02.873

使用 Javascript 节点来评估幅度会起作用，但出于性能原因并不理想。我建议在 requestAnimationFrame 计时器上使用 RealtimeAnalyser。您可以从[http://updates.html5rocks.com/2012/02/HTML5-audio-and-the-Web-Audio-API-are-BFFs](http://updates.html5rocks.com/2012/02/HTML5-audio-and-the-Web-Audio-API-are-BFFs)的代码开始，只需使用较小的 fftSize (128) 和 RMS价值观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:32:56.210

KievII 库 ( [http://kievii.net](http://kievii.net) ) 针对音频应用程序。也许您可以在那里找到一些有用的东西（例如，您可以为 Wavebox 对象或一系列 ClickBar 对象设置动画）。看看那里的例子：http: [//kievII.net/examples.html](http://kievII.net/examples.html)

# opengl-es - OpenGL draw rectangle outline

> ID：13462209
> 
> 赞同：8
> 
> 时间：2012-11-19T21:04:52.680
> 
> 标签：opengl-es

I am trying to draw a rectangle with 4 lines (left one). But no matter how I draw (strip, loop, plain lines) the result is the right side one - it is missing pixels at the corners.

```
|||||||||||     ||||||||||
|         |    |          |
|         |    |          |
|||||||||||     |||||||||| 
```

Is there a way to get the left hand side result?

EDIT

Can't post code since it depends a lot on the underlying framework, but all draw calls are nothing more than glDrawElements with index buffer pointing to 4 vertices, no alpha tests.

After fiddling with coordinates as suggested arrived at this interesting result (iOS simulator):

![sample](../Images/c7c2a2b1f1a3f86b579b9be03a22f281.png)

Notice only upper left corner is missing pixels for some rectangles... All rectangles are drawn in GL_LINES mode within single draw elements call. No other things are drawn.

EDIT 2

[OpenGL FAQ](http://www.opengl.org/archives/resources/faq/technical/rasterization.htm) question 14.100 states that

> OpenGL doesn't provide a mechanism to cleanly join lines that share common vertices nor to cleanly cap the endpoints.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T21:37:14.373

Shift your coordinate frame a bit so your lines fall on pixel centers:

[![rect](../Images/b1cb0112272262a449eb420f3c771260.png)](https://i.stack.imgur.com/hZWDJ.png)

```
#include <GL/glut.h>

void display()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glOrtho( 0, w, 0, h, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    // important
    glTranslatef( 0.5, 0.5, 0 );

    float offset = 40;
    glColor3ub( 255, 0, 0 );
    glBegin(GL_LINE_LOOP);
    glVertex2f( 0+offset, 0+offset );
    glVertex2f( 0+offset, h-offset );
    glVertex2f( w-offset, h-offset );
    glVertex2f( w-offset, 0+offset );
    glEnd();

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 320,240 );
    glutCreateWindow( "Rect" );
    glutDisplayFunc( display );
    glutMainLoop();
    return 0;
} 
```

# c# - 使用 Nunit 的 Excel 数据源进行单元测试

> ID：13462210
> 
> 赞同：1
> 
> 时间：2012-11-19T21:04:56.290
> 
> 标签：c#, excel, unit-testing, nunit

我需要通过从 C# 中的 excel 数据源导入数据来使用 Nunit 测试一些类，我找不到任何有用的资源来指导我，有什么解决方案吗？在 Nunit 中考虑这个测试

```
[Test]
[TestCase(new[] { -4, -3, -3, -2, -1, 0, 1, 2, 2, 3, 4 }, 
          new []{1, 0, 1, 0,1, 0, 1, 1, 0, 1, 0})]
public void YourTest(int[] given, int[] expected)  
{ 
///some code
} 
```

我会从 excel 中读取数据，如果我有一个 excel 文件，我将给定的值放在第一列，将预期值放在第二列：

```
column1(in Excel)  column2(in Excel)
-4                      1
-3                      0
-3                      1
-2                      0
-1                      1
0                       0
1                       1
2                       1 
2                       0
3                       1
4                       0 
```

我想用 excel 测试的原因是因为我需要在 column1 上应用一些公式，而我的公式结果出现在 column2 上，而且我不喜欢从 excel 复制到我的测试类。

在 MsTest 我们有：

```
[TestMethod]
  [Owner("Name")]
  [TestProperty("TestCategory", "Developer"),
      DataSource("Microsoft.ACE.OLEDB.12.0",
     "Data Source=C:/Sheets/DataSheet.xlsx;Extended Properties=Excel 12.0;",
     "[Sheet1$]",
     DataAccessMethod.Sequential)] 
```

我们在 Nunit 中是否有相同的东西，或者我们需要模拟？我们如何模拟它？在 [Setup] 部分或 [TestMethod]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:29:34.057

使用[EPPlus](http://epplus.codeplex.com/)，您可以轻松读取 excel 文件，如下所示：

```
var ep = new ExcelPackage(new FileInfo("c:\\path-to-excel\\data.xslx"));
ExcelWorksheet ws = ep.Workbook.Worksheets["Sheet1"];

// first row is column name, array indexer goes from 1 
for (int i = 2; i < ws.Dimension.End.Row; i++)
{
  int given = (int)ws.Cells[i, 1].Value;
  int expected = (int)ws.Cells[i, 2].Value;
  YourTest(given, expected);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:24:33.187

如果您的问题是“我如何从 Excel 中读取数据”并且您不关心格式（即您只想要数据），那么您最好的选择可能是 OleDb。它是关于从 Excel 编码数据检索的最快和最简单的方法。

[在这里](http://msdn.microsoft.com/en-us/library/aa288452%28v=vs.71%29.aspx)查看快速教程。它应该为您提供所需的一切。

一旦你知道它是如何工作的，如果你遇到任何麻烦，那么这个网站上有很多答案可以帮助你。

# cuda - 线程和块的限制以及线程和块的执行

> ID：13462215
> 
> 赞同：-1
> 
> 时间：2012-11-19T21:05:11.103
> 
> 标签：cuda

我已经经历了这么少的好的参考指南，但我仍然对线程和块的限制感到困惑。1）基本问题：配置执行中每个网格的块数，这意味着网格将消耗所有SM还是单个SM？

2）实际上，根据计算能力，每个SM可以有8个块，那么为什么有时他们会说，每个维度可以配置65535个块？我明白了，8 个块将并行运行，但是如何配置 65535 个块，它们将如何执行？它们是每个 SM 还是每个网格？

3) 总数 根据计算能力的线程数是 1024/block 和 1536/SM，那么对于每个维度的 2D，最大线程数是多少。我可以同时拥有多少个线程，然后如果我配置了更多，那么顺序有多少？总数应该在 1024 以内？而且我已经实际检查过，有时我配置的线程超过了每个块的限制，然后它也在工作，为什么会这样？3a)案例a：对于GT200，假设有30个SM，每个SM最多可以有8个block，因此得出的结论是总共可以有240个block（考虑所有SM），那么为什么有时会提到65535个block每个维度都可以配置吗？3b）案例b：另外，在我的一个程序中，我的矩阵输入大小为10,000 x 10,000，并且我已经完成了以下配置，-no。每个网格的块数：1 - 没有。每个块的线程数：10,000，它仍在工作，因为没有。每个块的线程数超过了它仍然工作的限制。谁能让我解释它为什么工作？以及以哪种方式执行线程和块？在职的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:18:40.387

1.  是的，与任何内核启动相关的网格都可以使用 GPU 中的任何或所有 SM。这是由 GPU 上的硬件调度逻辑处理的，您不必关心它的细节。GPU 将尝试在可用的 SM 上最好地安排您的块，以最大限度地提高吞吐量。
2.  为 SM 提供数据的队列可以包含处于准备运行的不同阶段的块。每个 SM 8 个块是指 SM 中的 warp 调度程序可以从这 8 个块中的任何一个中选择 warp 随时执行。你可以让更多的块排队，但在它们前面的一些块被淘汰之前，它们不可能主动运行 warp。当然，每个启动的 SM 可以有超过 8 个块。这些只是排队等待运行，因为 SM 变得可用（即，当 SM 上的执行槽随着块退休而被释放）。一旦所有 SM 在执行槽中最多有 8 个块，那么网格中的剩余块是等待这些执行槽释放。
3.  每个网格的线程总数不是一个明确定义的数字。这主要是片上硬件/资源限制的问题，而不是指定或定义的数字。当然，每个块的最大线程数是明确定义的。当然，在一次网格启动中可以处理数亿个线程，甚至可能更多。但是，如果您尝试配置一个具有 65535*65535 个块（2D）的网格，每个块有 1024 个线程（以任何排列方式），您可能会遇到内核启动失败。但是您当然可以在一个维度中获得 65535 个块，而在另一个维度中获得较小的数量（或其他 2 维，对于 3D 网格）。
4.  (3a.) 是的，在 GT200 上，有 30 个 SM。如果每个 SM 可以处理准备执行队列中的 8 个块，那么就是 240 个块。但是我们可以有更多的块在 GPU 的另一个队列中等待运行。他们正在等待执行槽打开。当插槽打开时，它们会从等待队列中出来，并被分配给特定的 SM。因此，一个网格（与内核启动相关的所有块）可以包含超过 240 个块。
5.  (3b.) 如果您尝试启动每个块的线程维度为 10000 的内核，它将失败。我无法解释你的情况，因为你没有提供一个例子，你只是说“它有效”。对不起，它**不起作用**。请提供一个简短的、完整的、可编译的示例，您认为可以演示它，有人会向您展示错误。例如，当您以这种方式启动内核时，您是否在进行错误检查？

# c - Openmp在并行内同步

> ID：13462222
> 
> 赞同：1
> 
> 时间：2012-11-19T21:05:46.297
> 
> 标签：c, multithreading, parallel-processing, synchronization, openmp

我需要做这样的事情

```
#pragma omp parallel{

#pragma omp for
for_1(){

   for_2(){
     do_something();
   }
   #pragma omp barrier //wait for all threads to finish after the inner for

   continue_with_something_else_in parallel();

}

} 
```

编译器告诉我我不能在那里设置障碍。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-29T19:58:16.090

我知道这是一篇旧帖子，但既然我发现了它，其他人也可能......

# 解决方案：

```
#pragma omp parallel
{

#pragma omp for schedule(static)
   for_1() {
      for_2() {
        do_something();
      }
   }
   // note implicit barrier after for construct

#pragma omp for shedule(static)
   for_1() {
      continue_with_something_else_in parallel();
   }

} 
```

# 解释：

OpenMP`for`在“块”中调度循环并将它们分配给线程，这意味着进行`barrier`一次循环迭代将是有问题的，因为*正在等待的同一个线程也*可能被分配了一些其他循环迭代，因此它将等待自己陷入僵局的状态。

但是 OpenMP 标准确实保证，如果您使用`schedule(static)`，单个`parallel`主体中的相同线程被分配相同的循环迭代，并且可以有效地共享内存，这就是我所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:14:07.173

也许这个链接会帮助你：

[http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Fcompiler%2Fref%2Fruompbar.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Fcompiler%2Fref%2Fruompbar.htm)

据我所知：

omp 屏障指令必须出现在块或复合语句中。例如：

```
if (x!=0) {
   #pragma omp barrier    /* valid usage    */
}
if (x!=0)
   #pragma omp barrier    /* invalid usage  */ 
```

# c++ - 整齐地打包依赖于大量本机 DLL 的 C++/CLI DLL

> ID：13462227
> 
> 赞同：0
> 
> 时间：2012-11-19T21:06:09.440
> 
> 标签：c++, .net, interop, c++-cli

我创建了一个依赖于许多本机 DLL 的 C++/CLI DLL。我想要一种将 .NET DLL 与本机 DLL 打包以在其他项目中重用的方法。有没有一种巧妙的方法来做到这一点？

或者只是将所有 DLL 打包为 zip 的问题，当有人想要重用时，他们必须解压缩到新项目可访问的文件夹中，引用 .NET DLL 并使用“始终复制”将本机 DLL 添加到项目中放。

假设我们不能使用静态库代替 DLL 来重建 C++/CLI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:12:40.350

我会尝试以某种方式让您的安装程序在 GAC 中加载您的 .net 程序集，并使用 regasm 加载您的类型库。这将取决于您的 .Net 框架版本

# game-engine - 平面射线相交 C#

> ID：13462232
> 
> 赞同：1
> 
> 时间：2012-11-19T21:06:24.227
> 
> 标签：game-engine, game-physics, raytracing

我有这个平面射线相交的代码：http: [//pastebin.com/2VuPeZ5r](http://pastebin.com/2VuPeZ5r) 我想我计算正确，但如果没有相交，我需要返回 null。我该如何检查？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:53:36.887

“没有交叉点”是什么意思？任何光线都会在某处与平面相交，除了光线完全垂直于平面法线的简并情况。要检测这种情况，请测试`Vector3.Dot(Norm, ray.Dir) == 0`.

如果您想知道交点是在射线原点之前还是之后，请测试`t > 0`.

# recursion - 在 ML 中返回递归函数

> ID：13462234
> 
> 赞同：2
> 
> 时间：2012-11-19T21:06:25.540
> 
> 标签：recursion, sml, ml

如何在 ML 中返回递归函数？

据我所知，不能返回递归匿名函数，只有匿名函数可以用作返回值（如果返回值是函数......）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T22:42:24.687

这会是你想知道的那种例子吗？

```
fun f n =
   let
      fun g k =
         if k = n then [] else k :: g (k-1)
   in
      g
   end 
```

您只能通过命名来进行递归定义，但这不是问题，因为您可以在`let`任何地方编写表达式。

**更新**以更具体地回答评论：

```
fun f g =
   let
      fun h 0 = g 0
        | h i = h (i-1) + g i
   in
      h
   end 
```

（更有效的实现将使`h`尾递归。）

# javascript - 在使用 JS/jQuery 应用“倾斜”变换后，如何获取元素的高度/偏移量？

> ID：13462238
> 
> 赞同：1
> 
> 时间：2012-11-19T21:06:38.050
> 
> 标签：javascript, jquery

很简单，我的问题就是标题：

有没有办法在元素`transform:skew();`应用到元素后获取它的高度？

例如，如果一个元素的高度是 100px 并且顶部偏移量是 500px 预变换，在对其应用倾斜后，高度实际上可能是 150px 并且顶部偏移量实际上可能是 450px，但标准的 height() 和偏移量jQuery 中的 () 方法仍然报告原始值。

有什么解决方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T00:10:03.230

正如上面评论中提到的，高度和宽度的值没有改变，因为它们是基于没有样式的 DOM 元素。但是我注意到 offset() 方法从转换后的元素（Chrome 23 和 Firefox 16 OSX）返回正确的值。

为了给你一个解决方案——对于像倾斜和旋转这样的二维变换，我对变换做了基本的数学运算，下面的函数根据元素变换矩阵返回宽度和高度值。这适用于我尝试的所有 2d 转换、旋转/倾斜和两者的组合（同样，在 Chrome 23 和 Firefox 16 OSX 上）。

```
function getBoundingBox(element){
    // Get the transformation matrix as a string
    var tm = element.css('transform');

    // Transform the string to an array
    var regexp = /-?\d+[\.\d]*/g;
    tm = tm.match(regexp);

    // Get the size of the object and calculate the bounding box
    var h = element.height();
    var w = element.width();
    var th = Math.abs(h * tm[0]) + Math.abs(w * tm[1]);
    var tw = Math.abs(h * tm[2]) + Math.abs(w * tm[3]);

    return {'height':th,'width':tw}
} 
```

[有关边界框和计算的更多信息和解释](https://stackoverflow.com/questions/622140/calculate-bounding-box-coordinates-from-a-rotated-rectangle-picture-inside)

# ios - iOS - 将应用程序与文本文件捆绑在一起

> ID：13462243
> 
> 赞同：4
> 
> 时间：2012-11-19T21:07:05.350
> 
> 标签：ios, cocoa-touch

我有一个 .json 文件，我想将它作为资源与我的应用程序捆绑在一起。我已经阅读了[文件系统编程指南](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)，它说您应该将支持文件放在`<Application_Home>/Library/Application Support`. 那么在构建我的应用程序之前，如何将我的 .json 文件放在这个目录中呢？

我将如何在运行时引用该文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T23:37:14.243

如果您的文件始终是只读的（仅作为应用更新的一部分进行更新），则将该文件添加到您项目中应用的资源中。然后，您只需从应用程序包中读取文件：

```
// assume a filename of file.txt. Update as needed
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"txt"]; 
```

如果您需要在应用程序中提供初始文件但在运行时进行更新，那么您需要像上面一样打包文件，但第一次运行应用程序时，您需要将文件复制到应用程序沙箱中的另一个可写位置。

```
// Get the Application Support directory
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES);
NSString *appSupportDirectory = [paths objectAtIndex:0];

// Create this path in the app sandbox (it doesn't exist by default)
NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager createDirectoryAtPath:appSupportDirectory withIntermediateDirectories:YES attributes:nil error:nil];

// Copy the file from the app bundle to the application support directory
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"txt"];
NSString *newPath = [appSupportDirectory stringByAppendingPathComponent:[filePath lastPathComponent]];
[fileManager copyItemAtPath:filePath toPath:newPath error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:09:08.517

这里有一个很好的解释[http://www.cocoawithlove.com/2010/05/finding-or-creating-application-support.html](http://www.cocoawithlove.com/2010/05/finding-or-creating-application-support.html)

该目录需要在运行时创建，并且文件从您的主包移到那里，然后您可以使用链接中描述的方法访问它们。

# asp.net-mvc-4 - MVC 4 SimpleMembership 使用带有 UserId Guid 的自定义模式

> ID：13462245
> 
> 赞同：3
> 
> 时间：2012-11-19T21:07:07.183
> 
> 标签：asp.net-mvc-4, simplemembership

**SimpleMembership**开箱即用的默认行为是为**UserId**设置一个**int**。

 **有没有一种快速的方法让 SimpleMembership UserId**与 GUID 一起工作**？

如果不能，我可以扩展 SimpleMembership 吗？

解决此问题的最佳方法是什么？

**有没有人使用由 Scott Allen 发起的MemFlex**开源库取得任何成功？

[https://github.com/OdeToCode/Memflex](https://github.com/OdeToCode/Memflex)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:22:14.593

是的，您现在必须使用 int，也许它会在未来的版本中扩展为使用 guid。

您可以查看“aspnetwebstack”-项目的源代码： [https ://aspnetwebstack.codeplex.com/](https://aspnetwebstack.codeplex.com/)

我没有尝试过 MemFlex，但它看起来不错 - 现在我正在使用 SimpleMembership**

# javascript - google.load 正在加载旧版本的 jquery 导致版本控制问题

> ID：13462247
> 
> 赞同：1
> 
> 时间：2012-11-19T21:07:17.807
> 
> 标签：javascript, jquery, version, google-cdn, google.load

我的网页中有这两行代码：

```
 google.load("jquery", "1.7.0");
    google.load("jqueryui", "1.8.16"); 
```

我决定升级到新版本：

```
 google.load("jquery", "1.8.2");
    google.load("jqueryui", "1.9.0"); 
```

现在整个页面都中断了。当我通过查看 Sources 选项卡在 Google Chrome 中进行检查时，我看到文件的旧版本在那里。此外，当我查看控制台是否有错误时，我会收到以下错误：

未捕获的错误：模块：未找到版本为“1.8.2”的“jquery”！

未捕获的 ReferenceError：$ 未定义

未捕获的 ReferenceError：未定义 jQuery

未捕获的类型错误：未定义不是函数

注意：此问题不是特定于浏览器的。另外，我过去已经升级，没有任何问题。这里发生了什么。我该如何解决？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:19:22.090

如果您只使用 google 对象来加载 jQuery，那么您可以直接加载 jQuery 并避免与 google 脚本有关的任何问题

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.min.js" type="text/javascript"></script> 
```

另外，jquery 1.8 不在 Google Loader 中

如果您直接访问[https://www.google.com/jsapi](https://www.google.com/jsapi)，您将在底部看到所有受支持的版本，并且 1.8.1 不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:11:03.360

尝试查看您的`google`变量并确保链接与此处列出的链接相似：

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:03:12.877

@note Google 的 api/library loader api 自首次发布以来显然发生了一些变化。然后，我们能够 .load('jquery', '1.8') 或 .load('jqueryui', '1.9') 并且仍然获得稳定的边缘版本。现在我们似乎无法指定具有任何可靠性的修订/次要版本 - 只有主要版本，例如。'1' 或精确的例如。'1.8.3'。

@see [this page](https://developers.google.com/loader/#DetailedDocumentation)并向下滚动到版本控制以了解详细信息。它详细说明了上述内容并“建议”通过通配符为我们的开发环境请求 api 的“测试版本”，例如。'1.x' 用于促进反馈和早期回归测试。我的两个流行库的测试在这个结构下失败了，虽然该文档需要工作，但这可能仅适用于谷歌（而不是“托管”）库。此外，虽然只请求“1”版本有效，但您只会得到非常过时的版本。

@net 对于托管库，我计划转储 google.load 模式并使用[此处记录的 src="" 方法：](https://developers.google.com/speed/libraries/devguide) . Libs 仍然可以通过标签注入异步加载，或者如果更方便的话，只需在需要之前将标签放入其中。然后，虽然谷歌速度更快，但我仍然会用我自己的副本备份这些文件，以防万一——这是推荐的做法。

# sql - 如何在查询中找到匹配项或查找项？

> ID：13462248
> 
> 赞同：1
> 
> 时间：2012-11-19T21:07:19.000
> 
> 标签：sql, ms-access, lookup

从 Excel 移动到 Access 并遇到一点困难，我希望有人能帮助我。

我有一个充满遭遇数据的表（`Table: EncData`）；该数据的一部分是相遇的日期（`Column: EncDateTime`）。

在我的查询中，我需要有一列显示该日期是*Weekend*、*Weekday*还是*Holiday*。周末和工作日部分对我来说不是问题（很幸运`Format()`）。我正在努力解决如何将遭遇日期与假日查找表 ( `Table: Holidays`) 匹配。

在 Excel 中，我使用了一个公式`Match()`来查看它是否返回假期。如何在 Access 中执行此操作？

```
TABLE: Holidays
ID__________HolidayDate
1           10/8/2012
2           9/3/2012

TABLE: EncData
ID__________EncDateTime__________________More Data
12          10/08/2012 09:15:12 AM       (etc) 
```

在我的查询（显示`EncData`表中的信息）中，我一直在玩 DLookup 没有成功，只是想看看我是否能找到匹配项：

```
DLookup("HolidayDate", "Holidays", "HolidayDate =" & Format([EncDateTime],"mm/dd/yyyy")) 
```

即使这不起作用，我也可以说它也很慢。

对 SQL 知之甚少，但我认为这应该是小菜一碟。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:57:54.043

SQL 中的日期表示为 #year/month/day#，例如。今天的日期是#2012/11/19#，要使 DLookup 工作，您必须使用以下语法：

```
DLookup("HolidayDate", "Holidays", "HolidayDate=" & Format([EncDateTime],"\#yyyy/mm/dd\#")) 
```

要检查今天是否是假期，您可以使用以下命令：

```
DLookup("HolidayDate", "Holidays", "HolidayDate=" & Format(Date(),"\#yyyy/mm/dd\#")) 
```

是的，DLookup 很慢，你不应该在查询中使用它。要检查是否`EncDateTime`是假期，您应该使用以下 SQL 代码加入`EncData`并`Holidays`一起：

```
SELECT EncData.*
FROM EncData INNER JOIN Holidays ON EncData.EncDateTime = Holidays.HolidayDate 
```

这应该返回所有的 EncData 行是假期。它应该，但它可能不会。请注意，EncDateTime 不仅包含日期，还包含时间，因此它与仅包含日期的 HolidayDate 不匹配。这可以代替：

```
SELECT EncData.*
FROM EncData INNER JOIN Holidays ON DateValue(EncData.EncDateTime) = Holidays.HolidayDate 
```

并提取 EncData 中的所有行，而不仅仅是假期？

```
SELECT EncData.*, Holidays.HolidayDate
FROM EncData LEFT JOIN Holidays ON DateValue(EncData.EncDateTime) = Holidays.HolidayDate 
```

请注意，当HolidayDate 包含日期时，仅当那一天是假日时，否则它将为NULL。

这些只是开始的一些基本想法。但是不要忘记您可以使用向导进行查询，这样您就可以随时查看您的 SQL 代码的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:40:54.353

在这里使用[fthiella](https://stackoverflow.com/a/13462999/181902)的代码建议是我最终想出的使用`IIf`语句来确定日期是*假日*、*工作日*还是*周末*。

```
SELECT EncData.*, 
IIf(ISNULL(Holidays.HolidayDate),IIf(Weekday(EncData.EncDateTime) = 1 or Weekday(EncData.EncDateTime) = 7,"Weekend","Weekday"),"Holiday") AS [DayType]
FROM EncData
LEFT JOIN Holidays ON DateValue(EncData.EncDateTime)=Holidays.HolidayDate; 
```

我不确定我是否应该改用`CASE`语句（它们更快吗？）但这暂时有效。谢谢！

# android - Phonegap/Cordova 无法下载到 Android 中的子文件夹

> ID：13462249
> 
> 赞同：3
> 
> 时间：2012-11-19T21:07:25.023
> 
> 标签：android, cordova

我正在使用 Phonegap 2.2.0 在 Eclipse 中构建一个 Android 应用程序

这在 iOS 中有效：

```
var uri = encodeURI(value);
var fileName = uri.substring(uri.lastIndexOf('/')+1);

 window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
        fileSystem.root.getDirectory("dir/subdir", {create: true, exclusive: false}, function(dirEntry){
            dirEntry.getFile(fileName, {create: true, exclusive: false}, function(fileEntry) {
                var localPath = fileEntry.fullPath;
                var fileTransfer = new FileTransfer();
                fileTransfer.download(
                    uri,
                    localPath,
                    function(entry) {
                        console.log("xfg download complete: " + entry.fullPath);
                    },
                    function(error) {
                        console.log("xfg download error source " + error.source);
                        console.log("xfg download error target " + error.target);
                        console.log("xfg upload error code" + error.code);
                    }
                );

            });
        });
    }); 
```

在上述代码的第 4 行，我在“dir/subdir”处获取目录，并且下载工作正常。然而，在 Android 中，fileSystem 获取子目录，但下载失败并显示“找不到文件”。

如果我用“dir”替换“dir/subdir”，它就可以工作。

对此有任何解决方案或巧妙的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T00:31:29.593

您可以通过探测`navigator`对象的`userAgent`属性来识别设备类型：

```
if((navigator.userAgent.match(/Android/i)) == "Android") 
```

如果是 Android 设备，请`dir`使用`dir/subdir`.

请参阅：[在 phonegap 中检测设备类型](https://stackoverflow.com/questions/11077853/phonegap-detect-device-type-in-phonegap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:50:38.023

除非目录已经存在，否则您不能指定子目录。`getDirectory('dir'...`那么创建`getDirectory('subdir'...`

[https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API/DirectoryEntry](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API/DirectoryEntry)：

> 从 DirectoryEntry 到要查找或创建的目录的绝对路径或相对路径。尝试创建其直接父级尚不存在的文件是错误的。

# apk - 我的应用没有安装

> ID：13462253
> 
> 赞同：0
> 
> 时间：2012-11-19T21:07:32.867
> 
> 标签：apk, unsigned

好的，我正在为学校项目制作应用程序。该应用程序可在多个屏幕和平台上的模拟器上运行。问题是，我不太清楚如何将其导出为 apk 但已签名。所以我将它导出为未签名的 apk 并尝试将其安装在我的根 android 设备上。是的，我有一个东西说安装非市场应用程序已检查，所以它应该可以工作。它所做的只是开始安装，然后说应用程序未安装。

关于为什么会发生这种情况的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:05:35.113

这是一些关于最终版本的应用程序签名的文档，这有点麻烦，但会通过它。[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

# c# - PrintDialog 选择的纸张来源

> ID：13462255
> 
> 赞同：1
> 
> 时间：2012-11-19T21:07:41.507
> 
> 标签：c#, .net, crystal-reports, printdialog

`PrintDialog`从类中选择打印选项后，我试图将多个文档直接发送到打印机。

我需要检索选定的纸张来源。不幸的是，我只能找到打印机的所有纸张来源，而不是选定的纸张来源。

这是我的代码示例（缩短版本）：

```
CrystalDecisions.CrystalReports.Engine.ReportDocument document;

//...

PrintDialog pDialog = new PrintDialog();
pDialog.ShowDialog();

document.PrintOptions.PrinterName = pDialog.PrinterSettings.PrinterName;   //OK

//Here I need to set the papersource
//document.PrintOptions.PaperSource = ???

document.printToPrinter(pDialog.PrinterSettings.Copies, false, 0, 0) 
```

我是否使用好对象来做到这一点？

注意：`PageSetupDialog`由于我使用的是 Windows 7，因此不提供打印机选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:31:00.637

我通过 Hans Passant 的评论找到了我的问题的答案。感谢他。

为了`PaperSource`从中获取`PrintDialog`，我必须为它设置一个假`PrintDocument`的。不直接保留纸张来源

。`PrintDialog`相反，它设置`PrintDialog.Document.DefaultPageSettings.PaperSource`.

这是它的样子：

```
CrystalDecisions.CrystalReports.Engine.ReportDocument document;

PrintDialog pDialog = new PrintDialog();
pDialog.Document = new System.Drawing.Printing.PrintDocument();
pDialog.ShowDialog();

document.PrintOptions.PrinterName = pDialog.PrinterSettings.PrinterName;
document.PrintOptions.CustomPaperSource = pDialog.Document.DefaultPageSettings.PaperSource;

document.printToPrinter(pDialog.PrinterSettings.Copies, false, 0, 0); 
```

# objective-c - 全局鼠标事件和全屏应用

> ID：13462256
> 
> 赞同：0
> 
> 时间：2012-11-19T21:07:46.597
> 
> 标签：objective-c, cocoa, mouseevent, fullscreen

在我正在编写的应用程序中，我需要能够在用户移动指针时进行注册。为此，我使用了`NSEvent`类方法`addGlobalMonitorForEventsMatchingMask:handler:`。当程序在桌面上的窗口中运行时，这可以正常工作。但是，当我使应用程序全屏时，通过使用该`NSView` `enterFullScreenMode:withOptions:`方法，不再调用事件处理程序。有人可以解释为什么会这样，我能做些什么来纠正这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:25:58.163

的描述`addGlobalMonitorForEventsMatchingMask:handler:`说它只“接收发布到其他应用程序的事件的副本”。

当您的应用程序占据整个屏幕时，其他应用程序不再“看到”鼠标移动事件。

换句话说，`addLocalMonitorForEventsMatchingMask:handler:`当您的应用程序移动到全屏时，您可能会“转换”为使用。

# css - 电子邮件中的格式或样式字符串

> ID：13462259
> 
> 赞同：0
> 
> 时间：2012-11-19T21:08:00.623
> 
> 标签：css, email, plsql

我有一个从函数返回的字符串，要在正文部分自动作为纯文本电子邮件发送。我怎样才能使一些单词显示**粗体**或更改电子邮件中单词的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:41:52.157

如果电子邮件是纯文本，则无法在文本上创建任何可见样式。

# wpf - wpf 视频或图像数组寻找动画

> ID：13462262
> 
> 赞同：0
> 
> 时间：2012-11-19T21:08:18.170
> 
> 标签：wpf, video, video-codecs

我即将构建一个应用程序，我需要一个高清视频（3072 x 768）在应用程序状态之间向前或向后播放（假 3d），来自 flash/air 我知道它可以为搜索/播放设置动画带有补间动画的洗涤器。

所以想知道如何在 WPF 中的状态之间播放预渲染图像或视频时获得最佳性能。如果有人有这方面的经验，请告诉我。

选项是：1）对状态之间的图像进行某种图像序列（认为这是非常重的性能）。

2）动画搜索/洗涤器（再次关注性能）

3）为每个状态创建 2 部电影（所以我不需要向后搜索动画）是否可以加载电影，这样它们在开始或停止时不会闪烁。

任何输入都表示赞赏： - 此类内容的最佳编解码器等。

干杯

* * *

我选择了图像序列解决方案。下面的链接： [从硬盘驱动器中的图像序列更改 WPF 图像中的图像会使图像变黑并且响应速度降低](https://stackoverflow.com/questions/7429728/changing-image-in-a-wpf-image-from-an-image-sequence-in-the-hard-drive-makes-the)

# javascript - 在 jquery 请求中编辑全局变量

> ID：13462264
> 
> 赞同：1
> 
> 时间：2012-11-19T21:08:22.770
> 
> 标签：javascript, jquery

我正在使用 JQUERY 来解析 XML 文件，同时我正在写入多个数组。现在我最大的麻烦是将数组的结果传递到脚本之外。

```
<script type="text/javascript">
//....
var ProjectList = new Array();

var N = 0;
var ID = [];
var A = [];

$.get("urlaub.xml", function(GetList) {

    $(GetList).find("u").each(function() {

        var $U = $(this);
        ID.push($U.attr("id"));
        $(this).A.push($U.find("A").text());

        N++;

    });

    alert(N); //not 0!        
});

alert(N); //allways 0
// ......​​​    
</script> 
```

所以，我需要找到一种方法来使数组和变量 N 可以从外部访问，但我失败了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:16:48.797

您的代码已经在编辑全局变量，您只是没有等待足够长的时间来使用它们。例如，

```
//....
var ProjectList = [];

var N = 0;
var ID = [];
var A = [];

var getRequest = $.get("urlaub.xml", function(GetList) {

    $(GetList).find("u").each(function() {

        var $U = $(this);
        ID.push($U.attr("id"));
        $(this).A.push($U.find("A").text()); // what is .A? *confused*

        N++;

    });

});

getRequest.done(function(){
    alert(N); //not 0!  
});

alert(N); //always correctly 0 because we haven't received xml yet
// ......​​​ 
```

# jquery - 检查数组中元素的存在

> ID：13462268
> 
> 赞同：0
> 
> 时间：2012-11-19T21:08:31.723
> 
> 标签：jquery

最简单的方法是检查数组中是否存在某些元素？

我有以下代码：

```
 var val = "1";
    var arr = ["1", "2"];
    if($.inArray(val, arr)) {
        console.log("I am in!")
    } else {
        console.log("I am NOT here :( ")
    } 
```

但它打印**"1"** is NOT at **["1", "2"]**数组！请睁开眼睛——这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:09:26.547

返回匹配元素位置的`$.inArray`索引，范围从`0`到`(length - 1)`。所以你应该`>= 0`因为它是第一个元素，它将返回索引为`0`.

```
var val = "1";
var arr = ["1", "2"];
if($.inArray(val, arr) >= 0) {
    console.log("I am in!")
} else {
    console.log("I am NOT here :( ")
} 
```

# php - Opencart 检查安装的 vqmod 版本

> ID：13462270
> 
> 赞同：4
> 
> 时间：2012-11-19T21:08:44.940
> 
> 标签：php, opencart

有什么方法可以检查从 opencart 扩展中安装的 vqmod 的版本吗？

我有太多的用户向我发送支持电子邮件，并且大部分时间是因为他们需要升级 vqmod。我想添加一条警告消息，说明他们需要升级 vqmod。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-23T11:15:18.147

要检查您正在运行的 VQMOD 版本，请打开文件.. /vqmod/vqmod.php 在第 7 行查找... private $_vqversion = '2.3.2';

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:30:01.333

vQmod 的版本号是私有的，仅用于让用户知道版本。我猜你可以加载文件并使用正则表达式来查找版本号。我担心的是你使用的是不兼容的。vQmod 从最新版本向后兼容到 1.0。最简单的答案是在您的扩展上明确说明需要版本 X 或更高版本的 vQmod 才能使您的扩展兼容。我销售了 40 多个模组，其中大部分都以某种方式进行了 vQmod，我的客户没有遇到过这种情况

# jquery - 更改 iframe 中的文本内容

> ID：13462271
> 
> 赞同：2
> 
> 时间：2012-11-19T21:08:51.447
> 
> 标签：jquery, iframe, translate

我有一个工具，它不是我的，它在一个子域中：`app.domain.com`. 这个工具是英文的，这些人不想翻译它。

所以我决定在 iframe 中翻译并使用 jQuery 更改文本（谷歌翻译不起作用），以及在其他子域中`apps.domain.com`。

我该怎么做？我在这个网站上搜索，但我没有得到回应。

这是我的代码，它没有运行：

```
<iframe src="http://app.domain.com" id='inneriframe' scrolling="no"></iframe>

<script>
$(document).ready(function() {
    $("#inneriframe").contents().find('body').text("Clientes");
    $(this).html($(this).html().replace('Password','<span class="stars stars5">* * * * *</span>'));
    $("#inneriframe").contents().text($(this).text().replace('Password','Name:')); 
});
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:33:07.273

当您可以选择修改“工具”时（您没有解释它到底是什么），将两个文档中的[document.domain](https://developer.mozilla.org/en-US/docs/DOM/document.domain)属性设置为`domain.com`.

此外：修改 iframe 的内容`$("#inneriframe").load()`以确保 iframe 内的文档已经加载。

# c# - 在 C# 中设置 DataGrid StringFormat

> ID：13462272
> 
> 赞同：0
> 
> 时间：2012-11-19T21:09:03.847
> 
> 标签：c#, silverlight, xaml

我的日期在 XAML 中有以下数据网格列。我需要将其格式化为“MM/dd/yyyy”格式。

```
<sdk:DataGridTextColumn Width="Auto" Binding="{Binding MyDate, StringFormat='MM/dd/yyyy'}" Header="Date" /> 
```

如何在 C# 中重现字符串格式化部分？我想在代码中向我的 Datagrid 添加新列。

```
DataGridTextColumn textColumn = new DataGridTextColumn();
textColumn.Header = "Date";
textColumn.Binding = new Binding("MyDate");
textColumn.CanUserReorder = true;
//????
this.MyDataGrid.Columns.Add(textColumn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:12:43.577

这样的事情怎么样？

```
var binding = new Binding("MyDate");

binding.StringFormat = "MM/dd/yyyy";
textColumn.Binding = binding; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:13:43.113

关于什么

```
 textColumn.Binding = new Binding("MyDate") {StringFormat = "MM/dd/yyyy"}; 
```

# ruby-on-rails - 在 Ruby 中的 simple_form 输入上进行值等于 true 的计数

> ID：13462277
> 
> 赞同：0
> 
> 时间：2012-11-19T21:09:11.883
> 
> 标签：ruby-on-rails, ruby

我有我的回复表：

```
class CreateReplies < ActiveRecord::Migration
  def change
    create_table :replies do |t|
      t.string :name
      t.text :menu
      t.boolean :rsvp, :default => false

      t.timestamps
    end
  end
end 
```

然后我在我的 _form.html.erb

```
<%= f.collection_radio_buttons :rsvp, [[true, 'Yes'] ,[false, 'No']], :first, :last %> 
```

在我的 index.html.erb

```
<%= Reply.where(rsvp:false).count %> 
```

我对 Ruby 很陌生，所以学得很快，很明显，它没有产生任何结果，这意味着我可能离题了。我希望能够有两种选择。参加/不参加。

然后我想做一个计数来显示那些参加的人的价值。任何帮助将不胜感激。

**更新**

我还没有解决这个问题。在控制台中运行测试会返回错误的值，但是简单的 .count 可以正常工作。我如何在实际复选框上设置真或假一定存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:18:08.483

你要

```
<%= Reply.where(:rsvp => false).count %> 
```

请参阅 - [http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)，第 20 节“计算”

# javascript - 函数的属性没有适当增加？

> ID：13462280
> 
> 赞同：1
> 
> 时间：2012-11-19T21:09:23.383
> 
> 标签：javascript, post-increment

我正在练习一些不同的 JavaScript 技术，即函数属性。这是让我有点摸不着头脑的事情。

```
//property of the q0 function
q0.unique = 0;

function q0() {

return q0.unique++;

}

console.log(q0()); //returns 0 
console.log(q0()); //returns 1
console.log(q0()); //returns 2
console.log(q0()); //returns 3 
```

第一次调用函数不应该返回 1 吗？为什么返回0？q0.unique 已经设置为 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:10:51.437

如果您的代码是：

```
function q0() {

return ++q0.unique;

} 
```

后缀`++`返回当前值*然后*递增。带前缀`++`的则相反。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:11:17.433

后缀增量运算符返回增量之前的值。

```
var a = 0;
var b = a++;
// now a==1 and b==0 
```

回忆它的最好方法是读`a++`为`give the value and then increment`.

如果要在增量后返回值，请使用

```
return ++q0.unique; 
```

[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:11:18.557

您混淆了增量前和增量后。鉴于：

```
var unique = 0; 
```

`var x = unique++`将分配( ) 的*当前*值，而将分配后增量 ( ) 的值。在这两种情况下， 的值毕竟是。`unique``0``var x = ++unique``unique``1``unique``1`

你想要的是：

```
function q0() {
  return ++q0.unique;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T21:12:26.793

有两个增量运算符：

```
var++ // increment  the variable ---after--- the operation.  
++var // increment  the variable ---before-- the operation. 
```

例子：

```
var x = 0;

alert(x++) // 0
alert(x)   // 1
alert(++x) // 2 
```

# django - Django-haystack 表单验证

> ID：13462284
> 
> 赞同：1
> 
> 时间：2012-11-19T21:09:38.293
> 
> 标签：django, django-forms, django-haystack

我在 django-haystack 上构建的应用程序有一个搜索视图。它工作正常。

```
from haystack.forms import SearchForm
from haystack.query import SearchQuerySet
from haystack.views import SearchView

class SearchView(SearchView):
    sqs = SearchQuerySet().filter(lang=get_language())
    template = "search/search.html"
    searchqueryset = sqs
    results_per_page=10
    form_class=SearchForm 
```

我想向此视图添加自定义验证以设置最小输入值。最合适的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:03:48.553

验证是表单行为的一部分，因此您需要创建 SearchForm 的继任者并在其中添加自定义验证。文档中有[示例](http://django-haystack.readthedocs.org/en/latest/views_and_forms.html#creating-your-own-form)。

# objective-c - Xcode显示编译时警告，如果我将它提交到App Store会被拒绝吗？

> ID：13462287
> 
> 赞同：1
> 
> 时间：2012-11-19T21:09:43.607
> 
> 标签：objective-c, xcode, app-store, warnings

Xcode 显示编译时警告；如果我将其提交到 App Store，我的应用会被拒绝吗？

我有一个无法解决的警告，我想知道 Apple 是否可以因此拒绝该应用程序。

警告是：

对 uinavigationcontroller 的开始/结束外观转换的不平衡调用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T21:12:35.727

不，没有证据表明最终`.ipa`文件中编码了警告。

不过，为了自己的安心，最好还是想办法解决这个警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:13:35.743

您的应用不会被拒绝*，因为*它在编译时有警告。苹果不会意识到这一事实。

但是，如果此警告导致您的应用出现崩溃或性能问题，那么它将在此基础上被拒绝。

# delphi - Delphi DFM继承问题

> ID：13462288
> 
> 赞同：-4
> 
> 时间：2012-11-19T21:09:48.057
> 
> 标签：delphi

我没有太多时间，我会努力进入正题。

（这都是设计时，用 alt+F12 2x 刷新 DFM）

通常，我得到这个（我想要的）：

```
object Form1: TForm1
   object Father: TFather
      object Son: TSon
      end
   end
end 
```

当我刷新 dfm 并且 Delphi Reader 运行时......我明白了：

```
object Form1: TForm1
   object Father: TFather
   end
   object Son: TSon
   end
end 
```

儿子为什么要离开父亲？在儿子被创造的那一刻，我将父亲设定为儿子的所有者。

我需要做点别的吗？我也试图覆盖儿子的 GetOwner，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:21:52.790

存储在 dfm 中的信息只是您设计的。嵌套是关于父/子关系，而不是关于所有权。这个 dfm 表明儿子不再是父亲的父母。这可能是由 TSon 中的代码修改了它自己的父级引起的。

# excel-2010 - 按唯一值对两列进行排序

> ID：13462295
> 
> 赞同：0
> 
> 时间：2012-11-19T21:10:25.820
> 
> 标签：excel-2010

我有两列（A 和 B）带有数字。我需要按照 Col A 和 Col B 中的匹配数字进行排序，以便我可以看到它们中的哪些匹配。

A栏--B栏

2333--1222

2445--2333

2500--2400

2501--2445

..ETC

我需要它看起来像这样：

A栏--B栏

xxxx--1222

2333--2333

xxxx--2400

2445--2445

2500--xxxx

2501--xxxx

ETC..

编辑：我将值从 Col B 复制到 Col A 并从最小到最大排序。这与值匹配。现在我需要删除那些没有重复的。想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:39:55.820

取自[这里](http://www.excelforum.com/excel-formulas-and-functions/564176-how-to-match-values-in-one-column-to-values-in-another.html)

在 C 列中使用此公式一直到数据的末尾，然后进行排序。

```
IF(ISNUMBER(MATCH(A2,B:B,0)),A2,"") 
```

# objective-c - 画一个三角形

> ID：13462303
> 
> 赞同：4
> 
> 时间：2012-11-19T21:11:09.667
> 
> 标签：objective-c, ios, ipad, uibezierpath, cgpoint

我试图让用户绘制一个三角形。我得到了起点和终点，并使用公式找到等边三角形的第三个点来创建三角形，但它似乎没有任何想法我怎么能做到这一点？也许使用一个圆圈，但我不知道该怎么做。这是我当前的代码。

```
NSValue *point = [_path objectAtIndex:0];
CGPoint startPoint = point.CGPointValue;

point = [_path lastObject];
CGPoint endPoint = point.CGPointValue;

 CGPoint thirdPoint = CGPointMake(((startPoint.x+endPoint.x)/2), (((startPoint.x-endPoint.x)/2)*(tan(60))+1));
 UIBezierPath *triangle = [UIBezierPath bezierPath];
 [triangle moveToPoint:startPoint];
 [triangle addLineToPoint:endPoint];
 [triangle addLineToPoint:thirdPoint];
 [triangle addLineToPoint:startPoint];
 triangle.lineWidth=size; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T21:33:01.753

这应该可以计算等边三角形的第三个点：

```
CGPoint startPoint = ..., endPoint = ...;

CGFloat angle = M_PI/3; // 60 degrees in radians
// v1 = vector from startPoint to endPoint:
CGPoint v1 = CGPointMake(endPoint.x - startPoint.x, endPoint.y - startPoint.y);
// v2 = v1 rotated by 60 degrees:
CGPoint v2 = CGPointMake(cosf(angle) * v1.x - sinf(angle) * v1.y,
                         sinf(angle) * v1.x + cosf(angle) * v1.y);
// thirdPoint = startPoint + v2:
CGPoint thirdPoint = CGPointMake(startPoint.x + v2.x, startPoint.y + v2.y);

UIBezierPath *triangle = [UIBezierPath bezierPath];
[triangle moveToPoint:startPoint];
[triangle addLineToPoint:endPoint];
[triangle addLineToPoint:thirdPoint];
[triangle closePath];
// ... 
```

# python - 提交用户认证的表单模板

> ID：13462304
> 
> 赞同：0
> 
> 时间：2012-11-19T21:11:14.200
> 
> 标签：python, django, django-forms, django-templates, django-views

我正在使用 Django 创建一个登录。我在`if request.method == 'POST':`. 将表单提交到下面的脚本时，表单会重定向到 else 语句（转到 google）而不是 post 方法。我的模板文件如下。

**Django 脚本：**

```
def signup(request): 
    username = email = password = repassword = ''

    try:
        redirect_to = request.GET.get('next','/')
    except ValueError:
        redirect_to = "/"

    if request.method == 'POST':
        form = SignupForm(request.POST)
        if form.is_valid():
            username = form.cleaned_data['username']
            email = form.cleaned_data['email']
            password = form.cleaned_data['password']
            repassword = form.cleaned_data['repassword']
    else:
        return HttpResponseRedirect('http://www.google.com/')

    return render(request,'signup.html',{'form':form}) 
```

**模板文件：**

```
 {% extends "base.html" %}

{% block title %}Sign Up{% endblock %}

{% block content %}

<br></br>
<div class = "container">
   <form action="/signup/" enctype="multipart/form-data" method="post">
    <br></br>
        <div class="control-group">
            <p>
                USERNAME
            </p>
            <p>
                <input type="text" name = "username" value = "" id ="username"/>
            </p>
        </div>
        <div class="control-group">
            <p>
                EMAIL 
            </p>
            <p>
                <input type="text" name = "email" value = "" id= "email"/>
            </p>
        </div>
        <div class="control-group">
            <p>
                PASSWORD
            </p>
            <p>
                <input type="password" name = "password" value="" id="password"/>
            </p>
        </div>
        <div class="control-group">
            <p>
                RE-ENTER PASSWORD 
            </p>
            <p>
                <input type="password" name = "repassword" value="" id="repassword" />
            </p>
        </div>
        <div class="control-group">
            <input type="submit" class="btn btn-danger btn-primary " value="Sign me Up!"/>
        </div>  
    </form>
</div>

{% endblock content %} 
```

我在这里先向您的帮助表示感谢。

# android - Android 可点击列表视图崩溃

> ID：13462313
> 
> 赞同：0
> 
> 时间：2012-11-19T21:11:44.890
> 
> 标签：android, listview, button, onclicklistener

我试图让 Listview 变得可点击，但如果有任何方法/函数被调用，它会立即崩溃，比如 toast();

```
 listAdapter = new ArrayAdapter<String>(this, R.layout.simplerow, arrayListCarros);  
    mainListView.setAdapter( listAdapter );      
    db.close();

    mainListView.setClickable(true);
    mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
            toast(position);

      }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:19:24.430

```
 mainListView.setClickable(true);
    mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
            Toast.makeText(activityname.this, String.valueOf(position), Toast.LENGTH_SHORT).show();

            Intent intent = new intent(activityName.this,targerActivity.class);
            activityName.this.startActivity(intent);    
  } 
```

# asp.net - Asp.net 上传文件

> ID：13462318
> 
> 赞同：0
> 
> 时间：2012-11-19T21:12:05.827
> 
> 标签：asp.net, file-upload, upload

我有这样的 FileLoad 控制器：

```
 <asp:FileUpload ID="FileUpload1" runat="server" /> 
```

我喜欢做的是在用户选择 gif 图像后将文件上传到服务器上的 /images/logos 文件夹：

```
 string uploadFolder = Server.MapPath("/images/logos/");

     string uploadfile = uploadFolder + "Image1" + ".gif";
     FileUpload1.SaveAs(uploadfile); 
```

当我查看 uploadfile 的值时，它以 C:.... 开头

我相信它应该类似于 /images/logos/Image1.gif ，因为当它完成时，images/logos 文件夹中没有任何内容。请注意，我没有收到任何错误。

我究竟做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:25:06.560

```
Server.MapPath("/images/logos/") // Will map to the wwwroot folder
Server.MapPath("~/images/logos/") // Will map to the application folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:25:15.447

Server.MapPath 根据您提供的相对路径为您提供服务器上的绝对路径。

[http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)

# bash - 如何在此 bash 脚本中使用变量作为变量名

> ID：13462319
> 
> 赞同：1
> 
> 时间：2012-11-19T21:12:07.183
> 
> 标签：bash, variables

我目前正在尝试创建一个包含另一个变量的变量名

```
while [ "$countf" -le 9 ]; do
                    vname=$( echo fcp"$countf" )
                    $vname=$( awk -F, -vs="\$fc$countf" '{for (i=1;i<=NF;i++)if($i~"^"s"$"){print i;exit;}}{print "not found"}' <<< $first_line )
                    countf=$(( countf + 1 ))
            done 
```

虽然当我去执行包含代码的脚本时，会输出以下内容：

```
fcp1=not: command not found 
```

fcp1 是 vname 变量的内容。我已经尝试了几种不同的解决方案，但到目前为止还没有任何工作，如果有人能指出我做错了什么，虽然我真的很感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:17:13.563

尝试这个：

```
eval cat$p2="something" 
```

没有变量名的引号。

# database - 使用实体框架生成 Oracle 主键

> ID：13462320
> 
> 赞同：0
> 
> 时间：2012-11-19T21:12:08.490
> 
> 标签：database, oracle, entity-framework-4, primary-key

> **可能重复：**
> [如何在 Oracle 上使用 AUTO_INCREMENT 创建 id？](https://stackoverflow.com/questions/11296361/how-to-create-id-with-auto-increment-on-oracle)

我正在创建我的第一个应用程序，它使用实体框架来访问 Oracle 数据库中的数据。数据库由 16 个不同的相关表组成。到目前为止，我已经创建了一个原型数据库并使用 Oracle SQL Developer 加载了一些示例数据。应用程序正在成功地从选定的表以及相关表中读取数据。

现在是时候开始从应用程序添加数据了。我们已经就如何做到这一点进行了多次讨论。从我看到的示例中，这个过程看起来很简单，但我确实对主键生成有疑问。

对于大多数（如果不是全部）表，主键将是一个没有任何意义的数字，除了 i 作为关系键的唯一用途。这是因为许多记录中没有保证唯一的特定字段。出现的问题是该密钥是如何生成的。

对于我之前使用过的数据库，有一个可以使用的自动增量字段类型的概念，因此数据库会自动创建键。DBA 通知我，Oracle 没有自动递增字段类型。他告诉我，Oracle 可以使用序列支持密钥生成，但这需要在存储过程中完成。另一方面，我在使用存储过程时遇到了很大的阻力。一般的感觉是，没有关于实体框架的信息表明这是必要的，实体框架应该消除对存储过程的需要。

当我使用实体框架将记录添加到 Oracle 表时，任何人都可以澄清我对主键做了什么（或发生了什么）吗？

# c# - Jquery Ajax Post 删除服务器上的文件 + asp .net mvc + c#

> ID：13462329
> 
> 赞同：1
> 
> 时间：2012-11-19T21:12:32.483
> 
> 标签：c#, asp.net-mvc-3, jquery, post

您好我一直在尝试创建一个链接，该链接删除存储在服务器上的图片并从数据库中删除信息。我希望使用 ajax 发布链接。我已经尝试了一切，但它不起作用。

但是，如果我尝试执行除删除以外的其他操作 - 比如说更新数据库中的字段，它会起作用。

你能告诉我我做错了什么吗？

看法：

```
<div class="uploaded-property-pics clearfix">
    <ul>
        @foreach (var item in Model.PropertyPhotos) {
            <li>
                <img src="@Url.Content("~/PropertyImages/" + item.PropertyId + "/" + "tn_" + item.PhotoLocation + ".png")"/>
                <a href="/Property/DeletePhoto/@item.PropertyPhotosId" class="photo-delete-link">Delete</a>
            </li>
        }
    </ul>
</div> 
```

查询：

```
<script>
    $('.photo-delete-link').click(function (e) {
        $.ajax({
            url: this.href,
            dataType: "text json",
            type: "POST",
            data: {},
            success: function (data, textStatus) { }
        });
        e.preventDefault();
    });
</script> 
```

控制器：

```
 [HttpPost]
    [Authorize]
    public void DeletePhoto(int id)
    {
        var photo = websiteRepository.GetPhotoByPhotoId(id);
        var folder = Server.MapPath("~/PropertyImages/" + photo.PropertyId + "/");

        if (!Directory.Exists(folder))
        {
            var filePath = folder + photo.PhotoLocation + ".png";
            var thumbPath = folder + "tn_" + photo.PhotoLocation + ".png";
            websiteRepository.DeletePhotoFromServer(filePath);
            websiteRepository.DeletePhotoFromServer(thumbPath);
        }

        websiteRepository.DeletePhotoFromDb(photo);
    } 
```

数据访问：

```
 public void DeletePhotoFromDb(PropertyPhotos photo)
    {
        db.PropertyPhotos.Remove(photo);
    }

    public void DeletePhotoFromServer(string filePath) 
    {
        File.Delete(filePath);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:24:05.523

您应该将参数传递给您的控制器方法

```
$.ajax({
            url: this.href,//check this.href in debugger
            dataType: "text json",
            type: "POST",
            data: {Id: Id }, //pass argument here
            success: function (data, textStatus) { }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:20:39.027

这太愚蠢了！

微妙的条件错误：

```
if (Directory.Exists(folder)) // Note the subtle condition difference
        {
            var filePath = folder + photo.PhotoLocation + ".png";
            var thumbPath = folder + "tn_" + photo.PhotoLocation + ".png";
            websiteRepository.DeletePhotoFromServer(filePath);
            websiteRepository.DeletePhotoFromServer(thumbPath);
        } 
```

至于 db 部分，我没有保存数据库：

```
public void DeletePhotoFromDb(PropertyPhotos photo)
    {
        db.PropertyPhotos.Remove(photo);
        db.SaveChanges(); // Missing this line
    } 
```

# apache - 小型网站的 301 最简单方法移至 Wordpress

> ID：13462335
> 
> 赞同：1
> 
> 时间：2012-11-19T21:12:44.900
> 
> 标签：apache, .htaccess, http-status-code-301

**设想**

我正在管理一个已移至基于 Wordpress 的设置的网站，但无法访问 Wordpress 中的所有管理工具（它是外部托管/管理的），但我确实可以访问 htaccess 文件。现在，我需要做两件事：

1.  将旧页面重定向到新的 url 结构。
2.  将所有 www 调用重定向到非 www。

**挑战**

但是，我想通过以下方式完成此操作：

1.  每次调用最少可能的重定向（最好只有 1 个）。
2.  规则重复有限。
3.  有点可读性（不仅仅是一个内联正则表达式处理这一切）。
4.  全部在 htaccess 中单独编辑。

让我很难过的是，当它既是旧网址，又以 www 为前缀时，将重定向保持在最低限度。

我的下一个最大问题是，我想使用重写映射，但似乎你必须从外部加载一些东西，而不是在我更喜欢的 htaccess 文件中定义字典。

**更多细节**

*   我不是使用重写引擎的专家，所以我可能在这里遗漏了一个简单的解决方案。
*   旧网站的结构很简单`/index.php?page=<pageName>`。
*   新网站使用 seo 友好的 url `/a-new-url-example/`。
*   两个例子可能是：
    1.  从`mydomain.com/index.php?page=boots`到`mydomain.com/boots/`
    2.  从`www.mydomain.com/index.php?page=shoes`到`mydomain.com/shiny-shoes/` *（需要某种地图来处理`shoes`-> `shiny-shoes`）*
*   我自己电脑上的当前设置不允许我在本地测试它（与其他项目有很多冲突），所以目前我正在使用[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)测试设置。
*   [htaccess 文件的当前内容](http://pastebin.com/skbzc3g5)（在 pastebin 上，因为代码在这里一直被解释为其他内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:44:01.327

正如您提供的那样，我希望这不会与您在 htaccess 中的现有规则发生冲突。

```
#exceptions first
RewriteCond %{QUERY_STRING} ^page=shoes3$ [NC]
RewriteRule ^index\.php$ /shiny-shoes/? [R=302]

#urls that directly map to the new url scheme
RewriteCond %{QUERY_STRING} ^page=(.*)$ [NC]
RewriteRule ^index\.php$ /%1/? [R=302]

#note the absence of the L flag in the above rules.
# from apache docs: the [R] flag prepends http://thishost[:thisport] to the URI, but then passes this on to the next rule in the ruleset

# no-www (make sure this is the last rule)
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^http://[^/]+/(.*)$ http://%1/$1 [R=302,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:03:52.783

这是一个例子：

**条件：**

.1 具有这些规则的 .htaccess 文件位于根目录中。

.2 GET 值（以下示例中的“值”）未在请求的 URL 中修改。换句话说，请求的 URL 中的“shoes”是相同的，而不是问题中的“shiny-shoes”。这是可能的，但需要在模式中包含一个别名列表，或者每个项目的不同规则。

.3 根目录中的 index.php 脚本必须能够处理所有可能的值并在没有找到匹配项时加载正常页面（如果有）。

```
 RewriteEngine on
    Options +FollowSymLinks

    #Redirect from http://www.mydomain.com to http://mydomain.com
    RewriteCond %{HTTP_HOST} ^www\.mydomain\.com$ [NC]
    RewriteRule ^(.*)$ http://mydomain.com/$1 [R=301,L]

    #mydomain.com/value/ to  mydomain.com/index.php?page=value
    RewriteRule ^(.*)?/$ index.php?page=$1 [L] 
```

要测试此示例，请在根目录的 index.php 中仅包含以下代码：

```
 <?php
    if ( $_GET[ 'page' ] == 'value' ) { // Change "value" accordingly 
      echo "Processing item <br /><br />";
    }
    else {
      echo "Loading normal page<br /><br />";
    }
    ?> 
```

# perl - 这段perl代码是什么意思？

> ID：13462352
> 
> 赞同：3
> 
> 时间：2012-11-19T21:14:16.293
> 
> 标签：perl

我正在处理一个 Perl 脚本。Perl 对我来说很新。有人知道这段代码的作用吗？

```
$pval = sprintf("%0.1e", Statistics::Distributions::uprob($z)); 
```

在哪里 ：

```
my $z= ($all{key} - $mu) / ${sigma}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:20:27.377

`$pval`被分配了一个以科学计数法表示的浮点数形式的格式化字符串。据推测，`uprob`来自统计模块的函数会返回这样一个数字。

`$z`作为参数传递给该函数，它似乎是一个从哈希中的值计算出来的数字，`%all`键`key`为减`$mu`，除以`$sigma`。很简单。

# android - 如何使用 AsyncTask 下载文件？

> ID：13462360
> 
> 赞同：-3
> 
> 时间：2012-11-19T21:14:27.103
> 
> 标签：android, download, android-asynctask

我正在使用此类下载文件：

```
public class DownloadService extends Service {
    String downloadUrl;
    LocalBroadcastManager mLocalBroadcastManager;
    ProgressBar progressBar;
    File sdCard = Environment.getExternalStorageDirectory();
    File dir = new File (sdCard.getAbsolutePath() + "/org.test.download/");
    double fileSize = 0;
    DownloadAsyncTask dat;
    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    public DownloadService(String url,Context c, ProgressBar pBar){
        downloadUrl = url;
        mLocalBroadcastManager = LocalBroadcastManager.getInstance(c);
        progressBar = pBar;
        dat = new DownloadAsyncTask();
        dat.execute(new String[]{downloadUrl});

    }

    private boolean checkDirs(){
        if(!dir.exists()){
            return dir.mkdirs();
        }
        return true;
    }
    public void cancel(){
        dat.cancel(true);
    }
    public class DownloadAsyncTask extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {
                String fileName = downloadUrl.substring(downloadUrl.lastIndexOf("/")+1);
                if(!checkDirs()){
                    return "Making directories failed!";
                }
                try {
                    URL url = new URL(downloadUrl);
                    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
                    urlConnection.setRequestMethod("GET");
                    urlConnection.setDoOutput(true);
                    urlConnection.connect();
                    fileSize = urlConnection.getContentLength();
                    FileOutputStream fos = new FileOutputStream(new File(dir,fileName));
                    InputStream inputStream = urlConnection.getInputStream();
                    byte[] buffer = new byte[500];
                    int bufferLength = 0;
                    int percentage = 0;
                    double downloadedSize = 0;
                    while ( (bufferLength = inputStream.read(buffer)) > 0 ) 
                    {
                        if(isCancelled()){
                            break;
                        }
                        fos.write(buffer, 0, bufferLength);
                        downloadedSize += bufferLength;
                        percentage = (int) ((downloadedSize / fileSize) * 100);
                        publishProgress(percentage);
                    }
                    fos.close();
                    urlConnection.disconnect();
                } catch (Exception e) {
                    Log.e("Download Failed",e.getMessage());
                }
                if(isCancelled()){
                    return "Download cancelled!";
                }
            return "Download complete";
        }
        @Override
        protected void onProgressUpdate(Integer... values){
            super.onProgressUpdate(values[0]);
            if(progressBar != null){
                progressBar.setProgress(values[0]);
            }else{
                Log.w("status", "ProgressBar is null, please supply one!");
            }
        }

        @Override
        protected void onPreExecute(){
            mLocalBroadcastManager.sendBroadcast(new Intent("org.test.download.DOWNLOAD_STARTED"));
        }

        @Override
        protected void onPostExecute(String str){
            mLocalBroadcastManager.sendBroadcast(new Intent("org.test.download.DOWNLOAD_FINISHED"));
        }

        @Override
        protected void onCancelled(){
            mLocalBroadcastManager.sendBroadcast(new Intent("org.test.download.DOWNLOAD_CANCELLED"));
        }

    }

} 
```

我正在使用它，因为在此`DownloadManager`之前显然不会工作`API 9`并且我的目标是`API 7`

我有`ListView`它解析一个 XML 文件并显示可以下载的包。

如何修改此类以接受包含 URL 的字符串数组并一一下载？

或者有什么好的方法可以下载文件列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:16:07.210

研究使用 IntentService。IntentService 中的线程在后台运行，这意味着您不必处理所有混乱的线程处理。

IntentService 完成后会终止其线程，因此您必须保留数据。

要与您的 Activity 进行通信，请使用广播接收器。

# python - Python 2.7 计算具有给定值的字典项的数量

> ID：13462365
> 
> 赞同：25
> 
> 时间：2012-11-19T21:14:46.523
> 
> 标签：python, dictionary

这里的第一个问题，所以我会马上回答：

使用 python 2.7

我有一个项目字典，键是表示为元组的 x,y 坐标： (x,y) 并且所有值都是布尔值。

我试图找出一种快速而干净的方法来计算有多少项目具有给定值。我不需要知道哪些键具有给定值，只知道有多少。

这里有一个类似的帖子： [How many items in a dictionary share the same value in Python](https://stackoverflow.com/questions/2393902/how-many-items-in-a-dictionary-share-the-same-value-in-python)，但是我不需要返回字典，只需要一个整数。

我的第一个想法是迭代项目并测试每个项目，同时保持对每个 True 值或其他内容的计数。我只是想知道，因为我还是 python 新手并且不知道所有的库，是否有更好/更快/更简单的方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-19T21:16:25.857

第一部分主要是为了好玩——我可能不会在我的代码中使用它。

```
sum(d.values()) 
```

将获得`True`值的数量。（当然，您可以通过 获取`False`值的数量`len(d) - sum(d.values())`）。

* * *

稍微更一般地说，您可以执行以下操作：

```
sum(1 for x in d.values() if some_condition(x)) 
```

在这种情况下，`if x`可以很好地代替`if some_condition(x)`并且是大多数人在实际代码中使用的）

**在我在这里发布的三个解决方案中，以上是最惯用的，也是我推荐的一个**

* * *

最后，我想这可以写得更巧妙一点：

```
sum( x == chosen_value for x in d.values() ) 
```

这与我的第一个（有趣的）解决方案相同，因为它依赖于`True + True == 2`. 聪明并不总是更好。我认为大多数人会认为这个版本比上面的版本更晦涩（因此更糟）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-19T21:17:46.477

如果您想要一个可以快速访问以检查计数的数据结构，您可以尝试使用 Counter （正如@mgilson 指出的那样，这依赖于值本身是可散列的）：

```
>>> from collections import Counter
>>> d = {(1, 2): 2, (3, 1): 2, (4, 4): 1, (5, 6): 4}
>>> Counter(d.values())
Counter({2: 2, 1: 1, 4: 1}) 
```

然后，您可以插入一个值并获取它出现的次数：

```
>>> c = Counter(d.values())
>>> c[2]
2
>>> c[4]
1 
```

# winapi - Windows：低级软件渲染到窗口

> ID：13462366
> 
> 赞同：3
> 
> 时间：2012-11-19T21:14:51.690
> 
> 标签：winapi, rendering, blit

我听说过各种渲染到窗口的方法，但这些都涉及使用诸如 GDI+、DirectX、OpenGL 或其他东西之类的东西。

这些库是如何工作的，*它们*如何将像素输入到窗口中？只是出于好奇，原始访问 Window 的图像数据有多难？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:13:27.447

这是一个相当广泛的问题。

绘制图像的各种 Windows 子系统与视频驱动程序接口。或者使用 GDI+ 和视频驱动程序接口的组合。驱动程序的工作方式取决于显卡制造商。

我不知道您所说的“原始访问窗口的图像数据”是什么意思。您可以将窗口的图像捕获到位图中，对其进行处理，然后将其写回窗口的 DC。但要了解 Windows 用于渲染位图的实际位，则需要深入研究未记录的数据结构。您必须知道如何将窗口句柄向下跟踪到在 GDI 子系统中维护的低级数据结构。

# objective-c - 字谜/部分字谜检测算法找到不正确的答案

> ID：13462367
> 
> 赞同：0
> 
> 时间：2012-11-19T21:14:52.833
> 
> 标签：objective-c, while-loop, anagram

我编写了以下方法来确定一个长单词是否包含一个较短的单词，并且我传递字母的顺序似乎会影响结果。

我注意到，如果我喂它`absconds`并且`bassy`它正确报告`NO`，但如果我按字母顺序排列字母并给出它`abcdnoss`，`abssy`它给出`YES`。我不太确定这是为什么 - 任何人都可以发现这个问题吗？

```
- (BOOL) does: (NSString* ) longWord contain: (NSString *) shortWord {
    while([longWord length] > 0 && [shortWord length] > 0) {
        NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString: [shortWord substringToIndex: 1]];
        if ([longWord rangeOfCharacterFromSet: set].location == NSNotFound) {
            return NO;
        }
        longWord = [longWord substringFromIndex: [longWord rangeOfCharacterFromSet: set].location+1];
        shortWord = [shortWord substringFromIndex: 1];  
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:25:43.280

```
 - (BOOL) does: (NSString* ) longWord contain: (NSString *) shortWord 
 {
      return ([longWord rangeOfString:shortWord].location != NSNotFound);   
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:18:59.023

你的算法的问题是这条线不起作用：

```
longWord = [longWord substringFromIndex: [longWord rangeOfCharacterFromSet: set].location+1]; 
```

如果您搜索的第一个字母在长字的末尾，那么长字变成一个空字符串，您跳出循环到 YES。

我会使用不同的算法，像这样。我认为更容易看到发生了什么，因此不太容易出错：

```
- (BOOL) does: (NSString* ) longWord contain: (NSString *) shortWord {
    NSMutableString *longer = [longWord mutableCopy];
    for (int i = 0; i<shortWord.length; i++) {
        NSString *letter = [shortWord substringWithRange:NSMakeRange(i, 1)];
        NSRange letterRange = [longer rangeOfString:letter];
        if (letterRange.location != NSNotFound) {
            [longer deleteCharactersInRange:letterRange];
        }else{
            return NO;
        }
    }
    return YES;
} 
```

# vb.net - 使用 word.interop 寻址表并添加复选框

> ID：13462374
> 
> 赞同：0
> 
> 时间：2012-11-19T21:15:19.190
> 
> 标签：vb.net, word-automation

我一直在使用 excel，但是我在 Word 自动化中遇到了一些问题/问题。我目前想动态格式化一个word文件。下面的代码应该打开一个现有文件并对同一页面上的两个不同表进行更改。

我想知道如何将插入菜单中的复选框动态添加到表格单元格中，或者更改表格单元格中已存在复选框的选中状态。感谢您的任何建议！它现在设置为写入文本值，但这是例如直到弄清楚..

```
 Dim oWord = New Microsoft.Office.Interop.Word.Application
    Dim Dir As String = System.Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)
    oWord.Documents.Open(Dir & "\welcomeletter.docx")
    Dim oDoc = oWord.ActiveDocument

    oWord.Visible = True

    Dim tbl As Word.Table = oDoc.Tables(1)

    tbl.Cell(1, 1).Range.Text = "Checkbox1"
    tbl.Cell(2, 1).Range.Text = "Checkbox2"

    Dim tbl2 As Word.Table = oDoc.Tables(2)

    tbl2.Cell(1, 1).Range.Text = "Checkbox3" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T00:56:30.980

对于那些寻求答案的人来说，对我来说只是使用wingdings字体并在我需要的字段中插入一个复选框：

```
tbl2.Cell(1, 1).Range.Text = chw(253) etc. 
```

我在实际编辑复选框时找不到任何东西。

# c++ - 一个巨大的数字从右数第二个数字

> ID：13462376
> 
> 赞同：2
> 
> 时间：2012-11-19T21:15:30.907
> 
> 标签：c++, modular, digit

现在我实际上阅读了模数运算并设法获得了某个数字的最后一位。好的。但是现在......我如何获得倒数第二位？右边第二个。实际上，我连续几个小时一直在努力寻找一个简单的解决方案，这是迄今为止我能想到的最好的解决方案，但仍然不是。有人可以帮我吗？

这是我到目前为止所拥有的

```
long long powmod(long long n, long long exp)
{
    long long r, result = 1;

    while(exp)
    {
        r = exp % 2;
        exp /= 2;
        if(r == 1) result = result * n % 10;
        n = (n * n) % 10;
    }
    return result;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:18:08.257

将它除以十，四舍五入，然后得到剩下的最后一个数字。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:09:27.463

由于您只要求倒数第二个数字，那么获取最后两位数，然后除以十怎么样？

即，求解 a^n mod 100，然后查看十位数。

# firefox - Firefox 在 window.open 中附加 URL

> ID：13462377
> 
> 赞同：1
> 
> 时间：2012-11-19T21:15:32.370
> 
> 标签：firefox, window.open

我的网络上有一个文件，需要从我的网页访问。

在 IE 中，我只是这样做：

```
window.open(url,name,'height=300,width=550,resizable,menubar,scrollbars=yes'); 
```

它工作，它打开一个小窗口，然后弹出“文件打开”对话框。

在 Firefox 中我也这样做，它会将我的 url 附加到当前页面的 url 并给出 NOT_FOUND 的明显错误。

我传递的网址是

```
\\pipeline\sampleData\testDoc.doc 
```

在 Firefox 中，我得到：

```
http://site.com/FileAccess/\\pipeline\sampleData\testDoc.doc 
```

有任何想法吗？这实际上是我在过去一周遇到的同样问题的第二个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:08:22.217

Your problem is that `\` is not a URL path separator. You want to be using `/pipeline/sampleData/testDoc.doc` or something along those lines, depending on what your site paths look like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:39:33.237

能否在 URL 字段中指定 testDoc 文件的实际地址`window.open()`

```
var url = "file:///C:/pipeline/sampleData/testDoc.doc"; 
```

`C:/pipeline/sampleData/testDoc.doc`文件的实际位置在哪里。

如果它是相对路径，那么..然后指定相对于当前位置的路径。

```
var url = "pipeline/sampleData/testDoc.doc" 
```

这会将 url 附加到当前文件位置。

# javascript - 用javascript设置下拉列表选定的索引？

> ID：13462383
> 
> 赞同：1
> 
> 时间：2012-11-19T21:15:45.720
> 
> 标签：javascript, asp.net, vb.net

我在一个 asp 页面上有 2 个下拉列表。

如果用户更改了第一个下拉列表的选定索引，则设置`DDL2.selectedindex = DDL1.Selectedindex`

除了分别切换 DDL1 和 DDL2 之外，执行相同的逻辑。我让这两个对象都从相同的对象列表中填充（只是为每个对象设置了不同的属性），并且我在查询中有一个 order by 子句以确保数据保持同步。我的问题是如何让这个逻辑在 javascript 中工作？我目前的方法是这样的..

```
Accounts.Attributes.Add("onBlur", Customers.SelectedIndex = Accounts.SelectedIndex)
Customers.Attributes.Add("onBlur", Accounts.SelectedIndex = Customers.SelectedIndex) 
```

此代码不起作用，但演示了我正在拍摄的内容。当第一个选择的 ddl 失去焦点时，填充另一个 ddl（设置选定的索引）。任何帮助都会很棒！

* * *

有人可以看到我在这里做错了什么吗？

```
 $("[id$=ddlStandardAcctNo]").change(function () {

            var acc = $("[id$=ddlStandardAcctNo]");
            var cust = $("[id$=ddlCustomerName]");
            cust.selectedindex = acc.selectedindex;
        }); 
```

它编译但不起作用...... :(这些下拉菜单位于asp gridview中。

* * *

看了之后，我正在尝试这样做..

```
 $("[id$=ddlStandardAcctNo]").blur(function () {

        var acc = document.getElementById('<%=ddlStandardAcctNo.ClientID %>');
        var cust = document.getElementById('<%=ddlCustomerName.ClientID %>');
        cust.selectedindex = acc.selectedindex
    });

    $("[id$=ddlCustomerName]").blur(function () {

        var acc = document.getElementById('<%=ddlStandardAcctNo.ClientID %>');
        var cust = document.getElementById('<%=ddlCustomerName.ClientID %>');
        acc.selectedindex = cust.selectedindex
    }); 
```

问题是我从不使用 document.ready ，因为下拉列表位于网格视图中。当我遇到这样的问题时，我实际上只是在学习 javascript/jquery，所以请随意破解知识鞭子大声笑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:26:17.960

我终于想通了！！！！jquery 先验的解决方案如下

```
 $("[id$=ddlStandardAcctNo]").change(function () {
                        $("[id$=ddlCustomerName]").attr("selectedIndex", this.selectedIndex);
                    });

                    $("[id$=ddlCustomerName]").change(function () {
                        $("[id$=ddlStandardAcctNo]").attr("selectedIndex", this.selectedIndex);
                    }); 
```

# c++ - Boost 1_52 构建 VS2012 失败

> ID：13462388
> 
> 赞同：2
> 
> 时间：2012-11-19T21:15:54.953
> 
> 标签：c++, visual-c++, boost, visual-studio-2012

我正在尝试使用 VS2012 构建 Boost 1_52 库。除了日期时间 dll (boost_date_time-vc110-mt-1_52.dll) 之外，一切都构建良好。

我正在使用 B2.exe 如下所示 b2.exe toolset=msvc-11.0 --build-type=complete stage debug-symbols=on debug-store=database --abbreviate-paths

我试过使用 cxxflags="/Y-" 因为我得到了其他过时的 PDB 错误，这并没有改变任何东西。我试过设置Zm100，同样没有变化。

当它到达 gregorian 部分时，我得到了一些失败，如下所示

common.mkdir bin.v2\libs\date_time\build\msvc-11.0\debug\debug-store-database\threading-multi common.mkdir bin.v2\libs\date_time\build\msvc-11.0\debug\debug-store -database\threading-multi\gregorian compile-c-c++ bin.v2\libs\date_time\build\msvc-11.0\debug\debug-store-database\threading-multi\gregorian\greg_month.obj greg_month.cpp libs\date_time \src\gregorian\greg_month.cpp : 致命错误 C1033: 无法打开程序数据库 'd:\boost\source\boost_1_52_0\gregorian\greg_month.pdb'

```
call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat" x86 >nul 
```

cl /Zm800 -nologo @"bin.v2\libs\date_time\build\msvc-11.0\debug\debug-store-database\threading-multi\gregorian\greg_month.obj.rsp"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:48:15.167

问题是构建试图将`date_time`库的某些目标文件的 .pdb 文件放在不存在的目录中。

您可以通过以下方式解决该问题：

```
md gregorian 
```

在执行构建之前，目录存在。

我还不确定真正的修复是什么，因为增强构建系统对我来说或多或少是一个黑匣子。

# java - Dijkstra算法方法返回空路径

> ID：13462390
> 
> 赞同：2
> 
> 时间：2012-11-19T21:16:02.040
> 
> 标签：java, graph, dijkstra

我试图从维基百科页面上的伪代码中实现 Dijkstra 的算法。在轮询队列后，我设置了一个条件，测试当前节点是否是目标节点，b。如果是这样，那么算法将中断并返回从 a 到 b 的路径。

这个条件总是会得到满足，因为我知道邻接矩阵范围内的所有节点确实存在。该程序旨在模拟伦敦地铁地图的连接。

无论如何，我一直试图弄清楚这一点，但到目前为止它还没有解决。也许有人可以发现问题。哦，`adj`这只是我的图的邻接矩阵。

```
 /**
   Implementation of Dijkstra's Algorithm taken from "Introduction to 
   Algorithms" by Cormen, Leiserson, Rivest and Stein. Third edition.

   d = Array of all distances.
   pi = Previous vertices.
   S = Set of vertices whose final shortest path weights have been
   determined.
   Q = Priority queue of vertices.
**/
public ArrayList<Integer> dijkstra(Integer a, Integer b){
    final double[] d = new double[adj.length];
    int[] pi = new int[adj.length];
    HashSet<Integer> S = new HashSet<Integer>();
    PriorityQueue<Integer> Q = new PriorityQueue<Integer>(d.length, new Comparator<Integer>(){
            public int compare(Integer a, Integer b){
                Double dblA = d[a-1];
                Double dblB = d[b-1];
                return dblA.compareTo(dblB);
            }
        });

    for(int i=0; i<d.length; i++){
        d[i] = Double.POSITIVE_INFINITY;
    }
    d[a] = 0f;
    for(int i=0; i<d.length; i++){
        Q.add(i+1);
    }

    while(Q.size() > 0){
        int u = Q.poll();
        if(u == b){
            System.out.println("jjd");
            ArrayList<Integer> path = new ArrayList<Integer>();
            for(int i=pi.length-1; i>=0; i--){
                path.add(pi[i]);
            }
            return path;
        }
        S.add(u);

        if(d[u] == Double.POSITIVE_INFINITY){
            break;
        }

        for(int v=0; v<adj.length; v++){
            double tmp = d[u] + adj[u][v];
            if(tmp < d[v]){
                d[v] = tmp;
                pi[v] = u;
            }
        }
    }
    return new ArrayList<Integer>();
} 
```

}

编辑：- 在做了一些调试之后，似乎 while 循环的主体只执行了一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:18:54.493

```
 if(d[u] == Double.POSITIVE_INFINITY){
        break;
    }

    for(int v=0; v<adj.length; v++){
        double tmp = d[u] + adj[u][v];
        if(tmp < d[v]){
            d[v] = tmp;
            pi[v] = u;
        }
    } 
```

循环体中值的更改`d`不会重新排列优先级队列，因此除非在弹出初始节点后恰好位于队列顶部的元素是其邻居之一，否则您将`d[u] == Double.POSITIVE_INFINITY`在下一次迭代中拥有并且那就休息吧。

在 Dijkstra 算法中，重要的是当节点的距离发生变化时更新队列。`java.util.PriorityQueue<E>`不提供该功能，因此使用它并非易事，除了在每次更新时删除和重新添加更新的节点外，我认为没有其他方法可以使用它。这当然不是很有效，因为移除是`O(size)`.

可以通过不让所有节点都在队列中来减轻效率低下。星号仅添加初始节点，并在循环中仅插入尚未看到的邻居，删除并重新插入已经在队列中的邻居。这样可以缩短队列，并且平均而言使移除成本更低。

为了实现高效，您需要一个自定义优先级队列，以允许更快（`O(log size)`？）更新优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:03:59.470

如果您在从 System.out.println 运行程序时在控制台中输出“jjd”，您的问题应该是这样的：

```
 if(u == b){
            System.out.println("jjd");
            ArrayList<Integer> path = new ArrayList<Integer>();
            for(int i=pi.length-1; i>=0; i--){
                path.add(pi[i]);
            }
            return path; 
```

当您调用“返回路径”时；您实际上破坏了整个方法并返回“路径”。

# ios - 更新的 iOS 应用程序协议

> ID：13462398
> 
> 赞同：43
> 
> 时间：2012-11-19T21:16:29.337
> 
> 标签：ios, app-store-connect, application-loader

我正在尝试上传我的应用程序，但是当我尝试通过 Application Loader 上传它时出现此错误：

> 合同、税务和银行模块中现在提供了带有更新定价信息的新版 iOS 付费应用程序协议。
> 
> 为了能够继续为 App Store 创建新应用程序和上传二进制文件，您的团队代理必须查看并同意 iOS 付费应用程序协议的更新条款。要访问 iOS 付费应用程序协议，您必须在 developer.apple.com 上的 iOS 开发中心接受最新版本的 iOS 开发者计划协议。

很明显，他们希望我接受新协议，但我在任何地方都找不到。

谁能解释我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-19T21:30:34.240

就我而言，通过[iTunes Connect](http://itunesconnect.apple.com)最容易找到，所以去那里登录。选择“Contracts, Tax, and Banking”。您应该会看到一个合同旁边有一个“请求”按钮。请求该合同。

# java - 覆盖 Hibernate 缓存策略

> ID：13462399
> 
> 赞同：1
> 
> 时间：2012-11-19T21:16:30.850
> 
> 标签：java, hibernate, caching, annotations

我有两个 Java 应用程序**manager**和**server**，它们使用共享库**domain**。Hibernate 映射是通过**域**源中的注释定义的。

我想要完成的是将**服务器**的缓存策略覆盖为某些性能测试的“只读”缓存策略。在[注释文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#xml-overriding)之后，我来到了我尝试的地方：

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings 
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
  version="2.0">
    <entity class="com.example.data.Entity" metadata-complete="false">
       <cache usage="read-only"/>
    </entity> 
    ...
</entity-mappings> 
```

尝试镜像注释标记，将其与这些说明混合。*问题是， entity*没有允许的元素*缓存*，我得到：

 *```
Error parsing XML (line66 : column 108): cvc-complex-type.2.4.a: Invalid content was found starting with element 'cache'. One of '{"http://java.sun.com/xml/ns/persistence/orm":description, "http://java.sun.com/xml/ns/persistence/orm":table, "http://java.sun.com/xml/ns/persistence/orm":secondary-table, "http://java.sun.com/xml/ns/persistence/orm":primary-key-join-column, "http://java.sun.com/xml/ns/persistence/orm":id-class, "http://java.sun.com/xml/ns/persistence/orm":inheritance, "http://java.sun.com/xml/ns/persistence/orm":discriminator-value, "http://java.sun.com/xml/ns/persistence/orm":discriminator-column, "http://java.sun.com/xml/ns/persistence/orm":sequence-generator, "http://java.sun.com/xml/ns/persistence/orm":table-generator, "http://java.sun.com/xml/ns/persistence/orm":named-query, "http://java.sun.com/xml/ns/persistence/orm":named-native-query, "http://java.sun.com/xml/ns/persistence/orm":sql-result-set-mapping, "http://java.sun.com/xml/ns/persistence/orm":exclude-default-listeners, "http://java.sun.com/xml/ns/persistence/orm":exclude-superclass-listeners, "http://java.sun.com/xml/ns/persistence/orm":entity-listeners, "http://java.sun.com/xml/ns/persistence/orm":pre-persist, "http://java.sun.com/xml/ns/persistence/orm":post-persist, "http://java.sun.com/xml/ns/persistence/orm":pre-remove, "http://java.sun.com/xml/ns/persistence/orm":post-remove, "http://java.sun.com/xml/ns/persistence/orm":pre-update, "http://java.sun.com/xml/ns/persistence/orm":post-update, "http://java.sun.com/xml/ns/persistence/orm":post-load, "http://java.sun.com/xml/ns/persistence/orm":attribute-override, "http://java.sun.com/xml/ns/persistence/orm":association-override, "http://java.sun.com/xml/ns/persistence/orm":attributes}' is expected. 
```

当我尝试返回*hibernate-core* XML 标记时，我得到了**<class>**定义不完整的错误，而且我似乎找不到**元数据完整的**模拟。有谁知道我正在尝试做的事情是否可行？如果是这样，我将必须采取哪些步骤？谢谢！*

# android - EditText 最大大小为整数和小数

> ID：13462402
> 
> 赞同：0
> 
> 时间：2012-11-19T21:16:37.860
> 
> 标签：android, regex

我需要设置整数的最大输入（7）和十进制的最大输入（2）。示例：7777777.77，此时我使用正则表达式作为整数，但是如何将输入用户设置为小数？

```
editText.setFilters(new InputFilter[] { new InputFilter.LengthFilter(7) }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:22:04.207

基本的正则表达式模式将是

```
^[0-9]{1,7}([.][0-9]{1,2})?$ 
```

但是，如果您的正则表达式引擎支持负前瞻，并且您想防止不需要的前导零，例如`000123.45`，那么使用模式

```
^(?!0[0-9])[0-9]{1,7}([.][0-9]{1,2})?$ 
```

如果您想允许带小数点且没有小数点的数字，例如`123.`，则将`{1,2}`部分替换为`{0,2}`.

# javascript - Express.js 中的 req.headers.host 返回 127.0.0.1

> ID：13462405
> 
> 赞同：0
> 
> 时间：2012-11-19T21:16:48.377
> 
> 标签：javascript, node.js, nginx, express

我正在尝试让主机在 Express.js 中访问我的网站，我正在使用以下代码

```
app.get('/', function(req,res){
    console.log(req.headers.host)
}); 
```

虽然这段代码返回`127.0.0.1:1000`了正确的端口，但它不是访问它的外部地址，为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:03:57.803

并非每个客户端都有主机名，正如[其他问题](https://stackoverflow.com/questions/4255264/getting-client-hostname-in-node-js)所示，您可以尝试使用以下代码获取客户端 IP 地址：

req.headers['x-forwarded-for'] || req.connection.remoteAddress

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T17:07:55.147

要么您将浏览器直接指向，`http://127.0.0.1:1000`要么您正在使用本地反向代理。在第二种情况下，您的代理必须配置为设置正确的 Host 标头。

# python - PyCuda 中的 cudaBindTextureToArray

> ID：13462407
> 
> 赞同：4
> 
> 时间：2012-11-19T21:16:54.967
> 
> 标签：python, cuda, pycuda

有没有办法使用 PyCuda 将 gpu 上已经存在的数组绑定到纹理？

已经有一个将 CPU 上的数组绑定到纹理，但如果该数组已经在设备上`cuda.bind_array_to_texref(cuda.make_multichannel_2d_array(...), texref)`，我在 PyCuda 中找不到等价物。`cudaBindTextureToArray`例如，做：

```
myArray = [1, 2, 3]
myArray_d = gpu.to_gpu(myArray)  # then performs some computations on  it, and then
cuda.bind_texture_to_array(myArray_d, texref) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T22:12:06.257

如果您想将 GPU 内存中的现有 CUDA 数组绑定到纹理引用，那么`pycuda.driver.TextureReference.set_array()`可能就是您想要的。请注意，PyCUDA 是基于驱动程序 API 构建的，因此您要查找的调用实际上是`cuTexRefSetArray`而不是`cudaBindTextureToArray`.

# css - 引用样式中的类

> ID：13462410
> 
> 赞同：0
> 
> 时间：2012-11-19T21:17:05.737
> 
> 标签：css, focus

我有一个自定义按钮实现为锚。该按钮具有图像和文本。

当按钮有焦点时，我想以不同的方式设置它。具体来说，我想在图像和文本周围画一个虚线矩形。我还想根据另一个类另外设置它的样式。

这是按钮代码：

```
<a id="searchButton" class="button" href="#">
    <span class="icon-search"></span>
    Search
</a> 
```

这是我的问题的CSS代码：

```
button:focus {
/*How do I make a rectangular dotted line around the button text and icon? /*
/* How do I refer to another class that has additional stylings? */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:22:17.613

您有“按钮”，但它应该是“.button”，因为您的标签不是按钮，而是您的类。

```
.button:focus {
  outline: #00FF00 dotted thick;
} 
```

关于这个问题，“我如何引用另一个有额外样式的类？”，我相信你需要一个像 SASS、LESS 或其他动态样式表语言这样的库，因为 CSS 目前不支持这种类型的功能。 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:40:37.317

您可以通过在一个类前面加上一个点 ( `.`) 来引用它，如下所示：

```
.button { /* styles go here */ } 
```

您可以使用`outline: 1px dotted gray;`

```
.button:focus {
     outline: 1px dotted gray;
} 
```

# php - PHP 等效于 Javascript "with" 范围声明

> ID：13462413
> 
> 赞同：4
> 
> 时间：2012-11-19T21:17:17.620
> 
> 标签：php, javascript, with-statement

从 Javascript 移植一些代码我遇到了这种不便。例如：

在 javascript 中，我们可以生成此代码。

```
var a, x, y;
var r = 10;
with (Math) {
  a = PI * r * r;
  x = r * cos(PI);
  y = r * sin(PI / 2);
} 
```

反而

```
a = Math.PI * r * r;
x = r * Math.cos(Math.PI);
y = r * Math.sin(Math.PI / 2); 
```

在这最后一个示例中，在 PHP、IE 中将是相同的行为，在第二个代码示例中，**数学**是多余的。

有人有任何解决方案来清晰优雅的代码吗？

我正在添加以下代码作为新示例：

```
class MyExampleClass {

    function example {

        for($i = 0; $i < count($this->Registers); $i++) {
            $r = "50";
            $r .= $this->ZeroFill($this->numericOnly($this->Registers[$i]->Id)), 15) . $this->ZeroFill($this->numericOnly($this->Registers[$i]->Inscription), 25);
            $r .= $this->ZeroFill($this->Registers[$i]->Model, 2 );
            $r .= $this->PadR($this->alpha($this->Registers[$i]->Date), 10 );
            $this->WriteRecord( $r);
        }
    } 
```

在第三个示例中，我可以在 for 语句中使用 temp $var `$this->Registers[$i]`，但如果所有处理代码都在像 Sanitize 类这样的类中。

```
with (Sanitize) {
  $r .= ZeroFill(numericOnly($tmp), 15); // are much more clear and using OO
} 
```

我想要一种方法来做更短且没有重复的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:57:52.767

您正在寻找的内容更类似于 java 而不是 javascript，在 java 中的`this`资格是可选的，可以省略。javascript 的`with`语句只有一半功能，因为它甚至不适用于赋值。

PHP 没有，您`$this->`每次都必须明确输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:20:50.517

PHP 作用域与 Javascript 非常不同。我想我能想到的最好的方法是扩展一个类并`$this->`在任何地方使用而不是类名 - 你有一个可以与我们分享的用例吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:28:29.893

[pi()](http://php.net/manual/en/function.pi.php) , [cos()](http://php.net/manual/en/function.cos.php) , & [sin()](http://php.net/manual/en/function.sin.php)都是 PHP 中的保留函数

```
<?php
$r = 10;
$a = pi() * $r * $r;
$x = $r * cos(pi());
$y = $r * sin(pi() / 2);
?> 
```

# jsf-2 - 丰富：日历在选择后忽略了星期几的格式模式

> ID：13462414
> 
> 赞同：3
> 
> 时间：2012-11-19T21:17:18.657
> 
> 标签：jsf-2, richfaces, simpledateformat

作为 的一部分，我正在使用具有确定的 datePattern 值的组件，如下所示：

```
<rich:calendar id="effectiveDate" 
value="#{itemBean.effectiveDate}" 
datePattern="EEEE, MM/dd/yyyy" /> 
```

因此，当我加载表单时，来自请求的 itemBean 的现有有效日期会正确显示在文本字段中。

问题：

1.  单击日历图标时，文本字段的内容将消失。因此，如果我没有从日历弹出窗口中选择任何内容，那么文本字段将保持为空。

2.  when the date is selected it is displayed like that (for example):

EEEE，2012 年 11 月 19 日所以工作日显示不正确。

请注意，如果不指定工作日（datePattern 的 EEEE 部分），上述问题均不会发生。

选择后是否有一些特定的方式来显示工作日？

我在 RichFaces 4.2.2 上。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:21:11.643

因为我认为这是一个已知问题`<rich:calendar>`。我对此知之甚少。
不过试试这个，

```
<rich:calendar id="effectiveDate" value="#{itemBean.effectiveDate}" onchanged="formatCalendarString(event, this);" datePattern="EEEE, MM/dd/yyyy" /> 
```

在`<head></head>`标签内放这个。

```
<head>
    <script>
        function formatCalendarString(event, cal) {
            var date = new Date(Date.parse(event.rich.component.getSelectedDate()));
            var weekdays=new Array(7);
            weekdays[0]='Sunday';
            weekdays[1]='Monday';
            weekdays[2]='Tuesday';
            weekdays[3]='Wednesday';
            weekdays[4]='Thursday';
            weekdays[5]='Friday';
            weekdays[6]='Saturday';

            var day = weekdays[date.getDay()];
            if(typeof(day) !== 'undefined') {
              var formattedDate = (day + ', ') + event.rich.component.getSelectedDateString().substring(6);
              cal.value = formattedDate;
            }
        }
    </script>
</head> 
```

# android - Android WebView 平滑滚动

> ID：13462418
> 
> 赞同：10
> 
> 时间：2012-11-19T21:17:48.683
> 
> 标签：android, webview, scroll, smooth-scrolling

我正在尝试以编程方式滚动 webview，但我遇到了一些问题。webView.setScrollY() 没有给我动画 webView.flingScroll() 似乎表现不同，具体取决于页面的长度。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-06-22T08:30:58.560

您可以通过提供 webview 的当前位置来使用[ObjectAnimator滚动，如 API 11+](https://developer.android.com/reference/android/animation/ObjectAnimator.html)

```
ObjectAnimator anim = ObjectAnimator.ofInt(webView, "scrollY", webView.getScrollPositionY(), 0);
anim.setDuration(500).start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T09:15:51.933

您可以使用 webView.scrollTo(x, y) 方法。但是，这将立即滚动。

WebView 没有可用的方法来滚动动画。如果你真的必须这样做，将 WebView 放入 ScrollView 然后你可以使用例如 smoothScrollBy 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-26T02:08:27.943

```
 private final Property<WebView, Integer> WEBVIEW_SCROLL = new Property<WebView, Integer>(Integer.class, "") {
    @Override
    public Integer get(WebView object) {
        return object.getScrollY();
    }

    @Override
    public void set(WebView object, Integer value) {
        object.scrollTo(object.getScrollX(), value);
    }
};
ObjectAnimator.ofInt(mWebView, WEBVIEW_SCROLL, targetY).setDuration(duration).start(); 
```

对我有用~，你可以试试这个~

# android - Android更新服务的正确方法

> ID：13462426
> 
> 赞同：0
> 
> 时间：2012-11-19T21:18:19.113
> 
> 标签：android, android-intent, android-service

我目前正在开发具有 web 服务同步的 Android 应用程序，并且一切运行顺利，但我需要创建一个后台更新服务，用于将数据提取到数据库。过去几天，我一直在寻找如何完成此任务的信息，并找到了许多解决方案，这让我非常困惑。

我正在使用 asyncTask 获取数据，它启动 httpClient 并解析响应并将其保存到数据库中。之后，我发送了启动 Activity 的意图。简单的东西。

我想要一个服务，它会在应用程序未运行时获取数据。当用户启动应用程序时，可能会停止服务。

我设法编写了一个带有线程睡眠的服务类，但这似乎是一个非常糟糕的解决方案。

我发现的另一个解决方案是使用 pendingIntent 和广播接收器。

我不确定发送广播意图是否足够安全。如果有人将他的手机插入调试器，他会看到每一个意图广播，对吗？这意味着他/她可能会弄乱我的应用程序（例如发送广播意图，这将通知应用程序已获取新数据，而实际上并非如此）。

我也不想让我的服务被系统杀死。

有什么简单有效的解决方案吗？我很难找到适合我需要的东西，而且我对自己编写的 Android 编程很陌生。我找到了很多解决方案，但我真的不知道哪个是“正确”的解决方案，哪个是最有效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:26:30.777

您应该使用[AlarmaManager](http://developer.android.com/reference/android/app/AlarmManager.html)来安排定期任务。无需长时间运行的服务。它只是执行计划挂起的意图，并在所有执行完成后完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:55:17.940

为此，您可以使用 Timer：

```
public class ServiceCount extends CountDownTimer
{
    public ServiceCount(long millisInFuture, long countDownInterval)
    {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish()
    {
        // update data
    }

    @Override
    public void onTick(long millisUntilFinished)
    {
        Log.d("timer", "" + millisUntilFinished / 1000);
    }
}

ServiceCount count = new ServiceCount((long) (1 * 60 * 1000), 1000); // 1 minute
count.start(); 
```

# ruby-on-rails - Rails：current_user 和会话说明

> ID：13462427
> 
> 赞同：3
> 
> 时间：2012-11-19T21:18:21.190
> 
> 标签：ruby-on-rails

我目前正在审查会话，并且遇到了我以前使用的非常通用的会话控制器：

```
module SessionsHelper

def sign_in(user)
    self.current_user = user
    cookies[:remember_token] = user.remember_token
end

def sign_out
    self.current_user = nil
    cookies[:remember_token] = nil
end

def signed_in?
    !current_user.nil?
end

def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end

def current_user=(user)
    @current_user = user
end

end 
```

我意识到我在视图中多次使用 current_user 。前任：

```
<% if current_user == @user %>
    <%= current_user.name %>
<% else %>
    This user is not you.
<% end %> 
```

1.  但是，我不明白为什么`current_user`可以像实例变量一样访问。不就是一种方法吗？为什么我可以将其视为相同`@current_user`并从中提取属性，例如`current_user.name`，`current_user.age`等？我认为这仅适用于实例变量。

2.  在第一种和第二种方法中`sign_in(user)`，and指的是什么`sign_out`？`self`这些被认为是类方法对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:30:39.350

1.  `current_user`确实是一个在其中定义的方法`SessionHelper`，恰好返回对其内部实例变量的引用`@current_user`。这种方法通常被称为“阅读器”。因为返回的值是对 的引用`@current_user`，所以您可以使用该值，就好像它是实际的实例变量一样，因此`current_user.name`

2.  在这两个方法的定义中使用`self`是必要的，因为没有它，ruby 将假定您要分配给方法内部调用的新局部变量，而不是调用模块内部已经定义`current_user`的方法。`current_user=()`在这种情况下`self`是指模块本身。

# hibernate - 如何只删除前 100 行？

> ID：13462429
> 
> 赞同：7
> 
> 时间：2012-11-19T21:18:25.227
> 
> 标签：hibernate, hql, limit

我在 DB2 中有 100,000 行要删除。我使用 Hibernate (HQL) 之类的东西 delete from than `query.executeQuery()`。

在 HQL 中是否可以限制要删除的行数？例如：

```
query.setMaxRowTodelete(100); //  this is just an example.
query.executeQuery(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T22:40:34.540

可悲的是，您不能使用 HQL 进行限制，`query.setMaxResults(number)`也不能使用`UPDATE`s 或`DELETE`s。您的选择是：

*   迭代/加载每个对象并将其删除。呸！
*   编写两个单独的 HQL 查询，其中第一个查询的结果被馈送到另一个查询（实际删除）。在您的情况下可能会也可能不会。
*   使用原始 SQL/JDBC。
*   进行两个查询：第一次仅查询具有有限结果集（在您的情况下为 100）的 ID（不加载实际对象）。第二个查询将删除`WHERE someid IN (id1, id2, ..., id100)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T12:49:51.530

不，很遗憾是不可能的。为此，根据您的用例，我会研究它是否值得以下几点之一：1`select`使用`setMaxResults`，然后迭代一个一个地删除`delete`（性能不佳）2 的元素使用`session.createSQLQuery`，创建一个 SQL 和您将能够使用`limit`

# hadoop - Hadoop LongSumReducer

> ID：13462432
> 
> 赞同：1
> 
> 时间：2012-11-19T21:18:53.607
> 
> 标签：hadoop

我正在使用 hadoop "2.0.0-cdh4.1.1" 并尝试将其`LongSumReducer`用于我的 wordCount 程序。

```
job.setReducerClass((new LongSumReducer<Text>()).getClass()); 
```

但是有一个编译错误：

```
setReducerClass(java.lang.Class<? extends org.apache.hadoop.mapreduce.Reducer>) in
org.apache.hadoop.mapreduce.Job cannot be applied to (java.lang.Class<capture#402 of
extends org.apache.hadoop.mapred.lib.LongSumReducer>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:21:25.553

它是实现正确的接口还是为reducer 实现扩展正确的类。异常表示所需的实现方法与使用方法的包差异（新与旧 hadoop api）

# android - 延迟播放的 Android RTSP 流缓冲区大小

> ID：13462437
> 
> 赞同：3
> 
> 时间：2012-11-19T21:19:24.920
> 
> 标签：android, video, ffmpeg, streaming, rtsp

我可以通过 VideoView 组件毫无问题地访问和查看来自 Android 上的 IP 摄像机的 RTSP 流。

现在我需要延迟播放 RTSP 流（即，如果我指定 30 秒延迟，则屏幕上的播放应该比源晚 30 秒，并且延迟需要可变，尽管在播放期间不是可变的，仅在连接点到源头）。

我最初认为这不是问题，因为我可以在连接到相机之前简单地更改 RTSP 缓冲区持续时间，但不幸的是，缓冲区大小似乎已写入固件并且无法在软件中更改。现在我有一种可怕的感觉，我的前进方向将是为 Android 编译一个 FFMpeg 版本，并以某种方式从库中获取流数据，缓冲它然后自己渲染它，我没有使用 FFMpeg 的经验。

我不确定我现在将如何解决这个问题，任何帮助或正确方向的指示将不胜感激。

更新：

抱歉，我忘了提及，RTSP 流是通过 LAN 上的 WiFi 访问的，因此通过 Internet 没有巨大的延迟问题。

# javascript - 谷歌 Chrome 移动版 (Nexus 7) | 表单提交不起作用

> ID：13462444
> 
> 赞同：11
> 
> 时间：2012-11-19T21:20:14.630
> 
> 标签：javascript, jsf-2, twitter-bootstrap, primefaces, composite-component

我在登录我的网站时遇到问题，该问题出现在移动 chrome 浏览器中（但适用于某些手机中提供的 web-kit 浏览器）。我正在努力尝试在平板电脑上进入“开发人员模式”，但我希望其他人已经遇到了这个问题，并且可以在我弄清楚如何实际调试这个问题时指出我正确的方向。

它是一个 JSF2 应用程序（Primefaces over Bootstrap2.2）作为 UI。

我的表单看起来像这样（第二组“onblur”调用是有意查看是否有帮助 - 它没有）：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:composite="http://java.sun.com/jsf/composite" 
>
    <composite:interface>
        <composite:attribute name="user" />
        <composite:attribute name="pass" />
        <composite:attribute name="error" />
        <composite:attribute name="loggedIn" />
        <composite:attribute 
            name="loginAction" 
            method-signature="void actionListener(javax.faces.event.ActionEvent)"
        />
        <composite:attribute 
            name="logoutAction" 
            method-signature="void actionListener(javax.faces.event.ActionEvent)"
        />
    </composite:interface>

    <composite:implementation>
        <script type="text/javascript">
        function copyValue(sourceId, targetId){
            var source = '#{cc.attrs.id}:' + sourceId;
            var target = '#{cc.attrs.id}:' + targetId;

            var sourceEl = document.getElementById(source);
            var targetEl = document.getElementById(target); 

            targetEl.value = sourceEl.value; 
        };
        </script>
        <h:form class="navbar-form pull-right" id="login" prependId="false" rendered="#{not cc.attrs.error and !cc.attrs.loggedIn}">
            <h:panelGroup rendered="#{!cc.attrs.loggedIn}" layout="span">
                <h:inputHidden value="#{cc.attrs.user}" id="userText"/>
                <h:inputHidden value="#{cc.attrs.pass}" id="passValue"/>

                <input 
                    class="span2" 
                    type="text" 
                    placeholder="Username" 
                    id="#{cc.attrs.id}:userText_a"
                >
                </input>
                <input 
                    class="span2" 
                    type="password" 
                    placeholder="Password"
                    id="#{cc.attrs.id}:passValue_a"
                >
                </input>

                <h:commandButton 
                    class="btn" 
                    value="Sign in"
                    onclick="copyValue('userText_a', 'userText'); copyValue('passValue_a', 'passValue');"
                    actionListener="#{cc.attrs.loginAction}"
                />
                <!-- onblur="copyValue('userText_a', 'userText'); copyValue('passValue_a', passValue);" -->
            </h:panelGroup>
        </h:form>

        <h:form class="navbar-form pull-right" id="login_error" prependId="false" rendered="#{cc.attrs.error and !cc.attrs.loggedIn}">
            <h:panelGroup rendered="#{!cc.attrs.loggedIn}" layout="span" styleClass="control-group error" style="display:inline-block;">
                <h:inputHidden value="#{cc.attrs.user}" id="userText_e"/>
                <h:inputHidden value="#{cc.attrs.pass}" id="passValue_e"/>

                <input 
                    class="span2" 
                    type="text" 
                    placeholder="Username" 
                    id="#{cc.attrs.id}:userText_b"
                    onblur="document.getElementById('#{cc.attrs.id}:userText_e').value = this.value;"
                >
                </input>
                <input 
                    class="span2" 
                    type="password" 
                    placeholder="Password"
                    id="#{cc.attrs.id}:passValue_b"
                    onblur="document.getElementById('#{cc.attrs.id}:passValue_e').value = this.value;"
                >
                </input>

                <h:commandButton 
                    class="btn" 
                    value="Sign in"
                    actionListener="#{cc.attrs.loginAction}"
                    onclick="copyValue('userText_b', 'userText_e'); copyValue('passValue_b', 'passValue_e');"
                />
                <br />
                <span style="color:orange;">Login failed: Invalid username or password</span>               
            </h:panelGroup>
        </h:form>

        <h:form class="navbar-form pull-right" rendered="#{cc.attrs.loggedIn}"> 
            <h:panelGroup class="span2" style="display: inline-block;">
                <h:commandLink 
                    value="#{cc.attrs.user} | Sign Out" 
                    class="btn btn-primary"
                    actionListener="#{cc.attrs.logoutAction}"
                />
            </h:panelGroup>
        </h:form>
    </composite:implementation>
</html> 
```

需要说明的是，我可以使用 Chrome/IE8+/Firefox/Opera 和移动设备在桌面上登录我只有 Chrome 的问题（我还没有尝试过 iOS 浏览器）。密码提交不会复制到发布之前隐藏输入的值。

这可能不是最好的设计，我愿意接受建议。`<h:inputText />`拖入组件会使样式复杂化，因为我已经在 Primefaces/Bootstrap 上大量回复并搞砸了布局，因此这是“解决方法” 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:38:21.757

代替

```
 <input 
                class="span2" 
                type="text" 
                placeholder="Username" 
                id="#{cc.attrs.id}:userText_b"
                onblur="document.getElementById('#{cc.attrs.id}:userText_e').value = this.value;"
            >
            </input>
            <input 
                class="span2" 
                type="password" 
                placeholder="Password"
                id="#{cc.attrs.id}:passValue_b"
                onblur="document.getElementById('#{cc.attrs.id}:passValue_e').value = this.value;"
            >
            </input>

            <h:commandButton 
                class="btn" 
                value="Sign in"
                actionListener="#{cc.attrs.loginAction}"
                onclick="copyValue('userText_b', 'userText_e'); copyValue('passValue_b', 'passValue_e');"
            /> 
```

尽量不要在用户名和密码输入中设置 onblur 属性，因为 onBlur 属性在手机中可能会变得棘手。

相反，请尝试在 onClick 事件中执行所有操作。我会在一个函数中做所有事情：

```
 <h:commandButton 
                class="btn" 
                value="Sign in"
                actionListener="#{cc.attrs.loginAction}"
                onclick="submitForm()"
            /> 
```

在函数内部：

```
function submitForm()
{
    var objUserText_e = document.getElementById('#{cc.attrs.id}:userText_e');
    var objUserText_b = document.getElementById('#{cc.attrs.id}:userText_b');

    var passValue_e = document.getElementById('#{cc.attrs.id}:userText_e');
    var passValue_b = document.getElementById('#{cc.attrs.id}:userText_b');

    objUserText_e.value = objUserText_b.value;
    passValue_e.value = passValue_b.value;

    /*
    copyValue('userText_b', 'userText_e'); copyValue('passValue_b', 'passValue_e');
    */

    // remove any return false
    // it will prevent the default event to be triggered (actionListener in this case)

} 
```

我认为这将在移动版本中毫无问题地提交值。

顺便说一句，为什么要复制 _e 变量中的输入值？你不能用原来的 _b 吗？如果我不明白你为什么这样做，有很多重复。

边注：

其他形式的 id "login" 也是如此

在 onClick 事件中，只需执行一项操作。某些浏览器不执行多个操作，因此，插入：

```
 <h:commandButton 
                class="btn" 
                value="Sign in"
                onclick="copyValue('userText_a', 'userText'); copyValue('passValue_a', 'passValue');"
                actionListener="#{cc.attrs.loginAction}"
            /> 
```

做这个：

```
 <h:commandButton 
                class="btn" 
                value="Sign in"
                onclick="submit()"
                actionListener="#{cc.attrs.loginAction}"
            /> 
```

您可以在提交函数中执行 copyValue 的事情：

```
function submit()
{
    copyValue('userText_a', 'userText');
    copyValue('passValue_a', 'passValue');
} 
```

这样，您将获得尽可能多的跨浏览器兼容代码。

再次，尽可能避免使用 copyValue。干杯

# ruby - Cron 作业无法加载 gem

> ID：13462447
> 
> 赞同：13
> 
> 时间：2012-11-19T21:20:29.137
> 
> 标签：ruby, ubuntu, rubygems, cron, cron-task

我有一个 ruby​​ 脚本，它连接到 Amazon S3 存储桶并下载最新的生产备份。我已经测试了脚本（非常简单），它工作正常。

但是，当我将此脚本安排为作为 cron 作业运行时，它在加载 Amazon (aws-s3) gem 时似乎失败了。

我的脚本的前几行如下所示：

```
#!/usr/bin/env ruby
require 'aws/s3' 
```

正如我所说，当我手动运行此脚本时，它工作正常。当我通过计划的 cron 作业运行它时，它在尝试加载 gem 时失败：

> `require': 没有要加载的文件 -- aws/s3 (LoadError)

此脚本的 crontab 如下所示：

```
0 3 * * * ~/Downloader/download.rb > ~/Downloader/output.log 2>&1 
```

我最初认为这可能是因为 cron 以不同的用户身份运行，但是当我在 ruby​​ 脚本的开头执行“whoami”时，它告诉我它以我一直使用的同一用户身份运行。

我还做了一个 bundle init 并将 gem 添加到我的 gemfile 中，但这似乎没有任何影响。

为什么 cron 无法加载 gem？我正在运行 Ubuntu。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-29T20:25:24.770

正如这里提到的[https://coderwall.com/p/vhv8aw](https://coderwall.com/p/vhv8aw)你可以简单地尝试

`rvm cron setup # let RMV do your cron settings`

**确保在运行此命令之前复制 crontab**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-20T14:53:46.603

如果您手动运行它并且它可以工作，那么您可能处于与 cron 执行不同的 shell 环境中。由于您提到您在 Ubuntu 上，因此 cron 作业可能在 /bin/sh 下执行，而您是手动执行的如果您没有更改任何内容，请在 /bin/bash 下运行它们。

您可以调试您的环境问题，也可以更改您的作业在其下运行的 shell。

要调试，有几种方法可以确定您的 cron 作业正在使用什么 shell。它可以定义在

```
/etc/crontab 
```

或者你可以做一个 cron 作业来转储你的 shell 和环境信息，正如这个 SO 答案中所提到的：[如何模拟环境 cron 执行脚本？](https://stackoverflow.com/questions/2135478/how-to-simulate-the-environment-cron-executes-a-script-with)

要切换到该 shell 并查看导致作业失败的实际错误，请执行

```
sudo su
env -i <path to shell> (e.g. /bin/sh) 
```

然后运行你的脚本，你应该看到错误是什么并且能够修复它们（rubygems？）。

选项2是切换shell。您可以随时尝试以下操作：

```
 0 3 * * * /bin/bash -c '~/Downloader/download.rb > ~/Downloader/output.log 2>&1' 
```

强迫你的工作变成 bash。这也可能使事情变得清晰。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-19T23:53:12.907

您还可以显式设置您的 Gem 路径：

`GEM_HOME="/usr/local/rvm/gems/ruby-1.9.2-p290@my-special-gemset"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T21:34:05.957

在非 cron 环境中执行`echo $PATH`，复制路径并将其粘贴到您的 crontab 中，在您的命令之前：

```
echo $PATH
/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin 
```

在 crontab 里面：

```
PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin
0 3 * * * ~/Downloader/download.rb > ~/Downloader/output.log 2>&1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-03T20:58:15.183

在你的 cron 的开头添加这个

```
PATH="/home/user/.rvm/gems/ruby-2.1.4/bin:/home/user/.rvm/gems/ruby-2.1.4@global/bin:/home/user/.rvm/rubies/ruby-2.1.4/bin:/home/user/.rvm/gems/ruby-2.1.4/bin:/home/user/.rvm/gems/ruby-2.1.4@global/bin:/home/user/.rvm/rubies/ruby-2.1.4/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/home/user/.rvm/bin:/usr/local/sbin:/usr/sbin:/home/user/.rvm/bin:/home/user/.local/bin:/home/user/bin"
GEM_HOME='/home/user/.rvm/gems/ruby-2.1.4'
GEM_PATH='/home/user/.rvm/gems/ruby-2.1.4:/home/user/.rvm/gems/ruby-2.1.4@global'
MY_RUBY_HOME='/home/user/.rvm/rubies/ruby-2.1.4'
IRBRC='/home/user/.rvm/rubies/ruby-2.1.4/.irbrc'
RUBY_VERSION='ruby-2.1.4' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-17T16:03:55.700

我已经尝试了上述所有解决方案，但在我尝试之前它们都不起作用；

```
0 12 * * * /bin/bash -l -c 'ruby /Users/simon/Desktop/script.rb' 
```

# database - 如何从另一台计算机访问 CouchDB 服务器？

> ID：13462448
> 
> 赞同：1
> 
> 时间：2012-11-19T21:20:44.203
> 
> 标签：database, python-2.7, couchdb, couchdb-python

我在我的计算机上创建了一个 couchDB，即我使用了 Python 行`server = couchdb.Server('http://localhost:5984')`

我想与另外两个同事共享这个数据库。我怎样才能将其提供给他们？目前，我很乐意给他们完全的管理员权限，直到我能更好地处理这个问题。

我试图阅读*CouchDB: The Definitive Guide*的相关部分，但我仍然不明白。

他们将如何访问它？他们不能只输入我电脑的 IP 地址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:14:28.647

为了避免 NAT 问题，我会使用 Cloudant 或 Iris Couch 等外部服务。您可以针对云中的公共数据库复制本地数据库，并且您的同事可以连接到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:58:11.527

当然可以。

像这样启动你的服务器：

```
server = couchdb.Server('http://192.168.56.1:5984') 
```

其中 IP 地址是您 PC 的 IP 地址。通过`cmd`提示符和`ipconfig`. 然后他们在他们的 python 控制台中输入

```
server = couchdb.Server('http://192.168.56.1:5984') 
```

是的，完全一样。IP 为您和其他所有人识别它。如果您希望他们在浏览器中访问它，那么我想您需要编写该前端。

如果您不在同一个本地网络上，则或多或少同样适用，除​​非您必须将[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)添加到组合中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-10T06:51:55.000

我会免费使用 ngrok ( [https://ngrok.com/](https://ngrok.com/) )，它会将您的本地主机暴露给同事以访问数据库。

once you download and execute, in the command line type ngrok http 192.168.56.1:5984 and they should be able to access it when you provide them the url ngrok returns, which exposes your localhost externally

# batch-file - 将 dos / batch 中的字符串添加到文件名

> ID：13462454
> 
> 赞同：2
> 
> 时间：2012-11-19T21:21:04.330
> 
> 标签：batch-file, dos

对于这个小问题，我在这里或网上都没有找到任何东西，我不知道该怎么做。

假设您在 windows/DOS 下有以下文件： **filename.ext**

您想在同一目录中复制此文件。副本的名称应为： **filename.AA.ext**

如何使用批处理文件 (.bat) 做到这一点？

谢谢您的帮助。

附录：实际上，如果这样的东西适用于任何具有任何扩展名的文件，这就是我正在寻找的目标结果：

复制（星）.（星）（星）.AA.（星）

此外，我很乐意将具有不同扩展名的文件（比如说 1 个 pdf 和 1 个 exe）放在一起，并将它们拖到批处理文件上，以便将它们重命名在同一目录中，其中包含“.AA”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:40:24.497

COPY 命令使用与 RENAME 相同的通配符规则 - 请参阅[Windows RENAME 命令如何解释通配符？](https://superuser.com/q/475874/109090).

不需要批量。您当然可以将命令放在批处理文件中，但这不是必需的。

```
copy filename.ext *.AA.ext 
```

复制多个文件

```
copy *.ext *.AA.ext 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:05:46.947

下面的批处理文件实现了您希望从资源管理器拖放到其中的所有文件的过程。

```
@echo off
:nextFile
   if "%~1" equ "" goto exitLoop
   copy "%~1" "%~DPN1.AA%~X1"
   shift
   goto nextFile
:exitLoop 
```

安东尼奥

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T09:26:39.203

解决了！！

我在安东尼奥的解决方案的帮助下回答了我自己的问题。要在代码中添加路径并在同一目录中获取复制的文件，请完成 Antonio 的代码，如下所示：

```
@echo off
:nextFile
   set filepath=%~dp1
   if "%~1" equ "" goto exitLoop
   copy "%~1" "%filepath%%~N1.AA%~X1"
   shift
   goto nextFile
:exitLoop 
```

现在您可以拖放多个文件，每个文件具有不同的文件扩展名，它们将被复制到同一目录中。

感谢大家的热心帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T21:29:55.637

我会从这样的事情开始：

```
mkdir \tmpdir
copy filename.ext \tmpdir
mov \tmpdir\filename.ext filename.AA.ext 
```

对于适用于多个文件的东西......

```
mkdir \tmpdir
copy *.ext \tmpdir
mov \tmpdir\*.ext *.AA.ext 
```

# javascript - 如何使用 vktemplate 延迟的 jquery / 排队 ajax 请求

> ID：13462455
> 
> 赞同：0
> 
> 时间：2012-11-19T21:21:03.687
> 
> 标签：javascript, jquery, jquery-templates, jquery-deferred

当我尝试使用 jquery deferreds 时，使用[vktemplate并不是很有效。](http://www.eslinstructor.net/vktemplate/)由于 vktemplate 进行了自己的 ajax 调用，因此在 vktemplate 完成其工作及其可选回调之前，deferred 得到解决。我如何设置 vk 以便在这两件事发生之前不会解决承诺？

```
$(document).on('click', '.ajax', function() {
    $.when(ajax1('<p>first</p>'), 
           ajax2('<p>second</p>'), 
           ajax3('<p>third</p>'))
     .then(function(results1, results2, results3) {
        console.log(results1);
        $('.document').append(results1);
        $('.document').append(results2); 
        $('.document').append(results3);         
        alert('all ajax done');
    });
});

function ajax1(data) {

    $.ajax({
        type: 'post',
        url: 'templates/test_template.tmpl',
        data: "data=" + data,
        dataType: 'json',
        success: function (returnedData) {

            $('#resultsDiv').vkTemplate('templates/test_template.tmpl', returnedData, function () {
                //vk callback
                //possibly call my resolve here?
            });
        }
    });
}

function ajax2(data){//more of the same} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:49:06.883

由于 vkTemplate 不返回任何内容，您需要手动创建延迟并使用所需数据在成功回调中解决它。

```
function ajax1(data) {
    var dfd = $.Deferred();

    $.ajax({
        type: 'post',
        url: 'templates/test_template.tmpl',
        data: "data=" + data,
        dataType: 'json',
        success: function (returnedData) {

            $('#resultsDiv').vkTemplate('templates/test_template.tmpl', returnedData, function (el, data, context) {
                dfd.resolveWith(context, [$(el)]);
            });
        }
    });

    return dfd.promise();
} 
```

# r - data.frame 中的元素计数

> ID：13462458
> 
> 赞同：-3
> 
> 时间：2012-11-19T21:21:15.947
> 
> 标签：r, count, group-by

我有数据说明飓风轨迹穿过一系列“大门”。我将如何对其进行编码以输出 GateID，以及每个 GateID 在总数据帧中出现的次数？

```
track_id    day hour    month   year    rate    gate_id pres_inter  vmax_inter
9   10  0   7   1   9.6451E-06  2   97809   23.545
9   10  0   7   1   9.6451E-06  17  100170  13.843
10  3   6   7   1   9.6451E-06  2   96662   31.568
13  22  12  8   1   9.6451E-06  1   94449   48.466
13  22  12  8   1   9.6451E-06  17  96749   30.55
16  13  0   8   1   9.6451E-06  4   98702   19.205
16  13  0   8   1   9.6451E-06  16  98585   18.143
19  27  6   9   1   9.6451E-06  9   98838   20.053

header <- read.table(fname_in, nrows=1)
track <- read.table(fname_in, sep=',', skip=1)
colnames(track) <- c("ID", "day", "month", "year", "hour", "rate", "gate_id", "pres_inter", "vmax_inter") 
```

我想我想计算每个gate_id的出现，也可能输出每个门的最大风（vmax_inter）等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:27:01.407

完全读懂你的想法，因为你没有提供任何具体的内容。但是，如果`GateID`是您的数据框列之一，您可以使用from package获取每个唯一的计数`GateID`以及其他参数。`count``plyr`

```
install.packages("plyr")
library("plyr")
count(mydf, vars = "GateID") 
```

请参阅`?count`安装后了解更多详细信息。

对于您问题的第二部分，请参阅`?aggregate`并考虑公式界面。例如，

```
aggregate(gate_id ~ vmax_inter, data = mydf, FUN = max) 
```

或类似的东西。顺便说一句，您可以将您的两个`read.table`步骤与“read.csv”结合起来

# c# - 如何轻松地为自定义 asp.net Web 窗体控件创建模板？

> ID：13462465
> 
> 赞同：0
> 
> 时间：2012-11-19T21:21:47.303
> 
> 标签：c#, asp.net, webforms

我正在努力做到这一点，因此我们为用户控件提供了一个代码，但不同的站点（很可能是页面）将需要他们自己的 HTML 模板。前端开发人员还需要在没有 dll 推送的情况下修改 html。

以前，我通过创建一个标准的 ascx 来完成此操作，其中包含绑定所有控件的代码。然后，我让前端开发人员制作 ascx 的副本并更改新 ascx 的标记（使定义后面的代码与原始代码完全匹配）。然后有一个设置告诉控件使用哪个实际的 ascx，并且一切都正确连接。

但是，我想知道是否有更好的方法来实现这一点，特别是因为删除一个站点不需要的 asp 控件（如标签）这样简单的事情会导致异常）

在一个理想的世界里，我更喜欢类似于 MVC 或 MVP 类型的系统，但我被困在纯粹的、原始的 webforms 系统中，我需要添加自定义控件。

有没有比创建多个 ascx 共享相同代码更好的方法来实现模板化？

请注意，模板的物理文件是必须的，以便我们可以在源代码管理中跟踪模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:49:40.157

鉴于您的限制，我认为您在共享代码隐藏方面处于正确的轨道上。在您的要求中突出的一件事是能够在不破坏代码隐藏的情况下删除控件。您可以通过在基类（您当前的代码隐藏）和 ascx 之间添加中间代码隐藏来实现此目的。

**基类（您重构的代码隐藏）**

```
Public MustInherit Class BaseUC
Inherits System.Web.UI.UserControl

' Define all page controls here
Public MustOverride Property lblPageTitle As Label

Private Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    ' Check if control has been initialized by inheriting class
    If lblPageTitle IsNot Nothing Then
        lblPageTitle.Text = "Hooray"
    End If

End Sub
End Class 
```

**新的特定于站点的代码**

```
Partial Class controls_Sample
Inherits BaseUC

Public Overrides Property lblPageTitle As System.Web.UI.WebControls.Label
    Get
        Return title
    End Get
    Set(value As System.Web.UI.WebControls.Label)
        title = value
    End Set
End Property
End Class 
```

**站点特定的 ASCX**

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="Sample.ascx.vb" Inherits="controls_Sample" %>

<asp:Label runat="server" ID="title"></asp:Label> 
```

# java - 如何在 IntelliJ 中获取方法调用的返回类型？

> ID：13462470
> 
> 赞同：29
> 
> 时间：2012-11-19T21:21:51.810
> 
> 标签：java, intellij-idea, return-type

通常你会期望将鼠标悬停在一个方法上，它会显示一个返回类型的弹出窗口。

您如何在 intellij Ultimate 中获得这些信息？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-19T21:23:24.117

当光标位于方法声明或调用上时，点击`Ctrl`+ `Q`（或在 Mac 上）。`⌃J`它会显示你想要的弹出窗口。作为奖励：++`Ctrl`将在弹出窗口中显示方法主体。`Shift``I`

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-19T21:23:29.120

您将其悬停并在 Windows 中按住 CTRL 或在 Mac 中按住 CMD

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-30T08:20:20.613

尝试`Ctrl`+`Space`快速定义
另外`Ctrl`+ `Shift`+`P`可能会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T23:22:50.580

`Ctrl+Shift+P`通过突出显示相关的返回表达式（IntelliJ 2020.2.3 CE）来获得额外的奖励

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-25T15:28:57.880

在 intellij 中，转到帮助 > 生产力指南，您将找到一个有用的快捷方式列表，以提高生产力

关于这个问题在mac中按option+command+V可以得到可以选择的名字列表[![在此处输入图像描述](../Images/289f1108702b20f36002a5130448ee47.png)](https://i.stack.imgur.com/UyYDb.jpg)

Mac 中的 Ctrl+J 用于获取文档

轻松查找屏幕截图：-

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-05T12:29:14.330

热键：Ctrl + Shift + P 工具栏：“查看->类型信息”

# sql - 是否可以在 PostgreSQL 的事务中包装 DDL 更改？

> ID：13462475
> 
> 赞同：18
> 
> 时间：2012-11-19T21:22:12.713
> 
> 标签：sql, postgresql, transactions, ddl

我知道在 MySQL ddl 语句中，例如 alter table/create table/etc 会导致隐式事务提交。

当我们迁移到 PostgreSQL 时，是否可以在一个事务中包装多个 DDL 语句？

这将使迁移脚本更加健壮，失败的 DDL 更改将导致一切回滚。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-19T21:33:28.160

DDL 语句由事务覆盖。我在官方文档中找不到相关部分，但提供了一个指向涵盖它的 wiki 的链接。

请记住，事务不会在 postgresql 中自动打开，您必须使用`BEGIN`or启动它们`START TRANSACTION`。

[Postgresql Wiki 关于事务性 DDL](http://wiki.postgresql.org/wiki/Transactional_DDL_in_PostgreSQL%3a_A_Competitive_Analysis)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-19T21:54:00.913

并非每个 Postgres DDL 语句都可以包装在事务中。`DROP DATABASE`像/和其他一些与文件系统相关的语句`DROP TABLESPACE`不能回滚。

还：

> ALTER TYPE ... ADD VALUE（向枚举类型添加新值的形式）不能在事务块内执行。

还有一些语句，如`TRUNCATE`“不是 MVCC 保存”。此类语句所做的更改可能会影响其他查询，即使它们已回滚。

所以 - 阅读你的 postgres 版本的官方手册，看看你的 DDL 是否是事务安全的。

# vb.net - 对非共享成员的引用需要在调用公共子时发生对象引用

> ID：13462479
> 
> 赞同：28
> 
> 时间：2012-11-19T21:22:25.757
> 
> 标签：vb.net, public-method, object-reference

我有一个公共类“General”，其中是一个公共子“updateDynamics”。当我尝试在代码隐藏中为这样的页面引用它时：

```
updateDynamics(get_prospect.dynamicsID) 
```

我收到以下错误：

> 对非共享成员的引用需要对象引用

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-19T21:24:44.910

您要么必须创建方法`Shared`或使用类的实例`General`：

```
Dim gen = New General()
gen.updateDynamics(get_prospect.dynamicsID) 
```

或者

```
General.updateDynamics(get_prospect.dynamicsID)

Public Shared Sub updateDynamics(dynID As Int32)
    ' ... '
End Sub 
```

[**共享(VB.NET)**](http://msdn.microsoft.com/en-us/library/zc2b427x.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T12:05:21.410

转到所需对象的声明并将其标记为共享。

朋友与事件共享 MyGridCustomer 作为 Janus.Windows.GridEX.GridEX

# ruby-on-rails - 为什么我不能在 ruby 的 case 中使用三元运算符？

> ID：13462480
> 
> 赞同：0
> 
> 时间：2012-11-19T21:22:28.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个 case 语句，我正在尝试使用三元运算符进行额外的条件检查。但它出错了。

这是代码示例

```
case url
when partner_x_url then Rails.env.development? ? partner_signup_url : partner_signup_url :protocol => "https"
.
.
.
else regular_signup_url
end 
```

真正奇怪的是，如果使用以下内容，它会起作用

```
case url
when partner_x_url then if Rails.env.development?; partner_signup_url; else partner_signup_url :protocol => "https"; end
.
.
.
else regular_signup
end 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T21:26:02.367

您缺少`?`操作员：

```
when partner_x_url then Rails.env.development? ? partner_signup_url : partner_signup_url :protocol => "https" 
```

一直以问号结尾的方法发生在我身上:)

**编辑**：由于您现在添加了该运算符，我怀疑它与运算符优先级有关。尽量避免在函数参数周围使用括号的问题：

```
when partner_x_url then Rails.env.development? ? partner_signup_url : partner_signup_url(:protocol => "https") 
```

示例：如果没有函数括号，则会出现语法错误：

```
1.9.3p125 :006 > case @foo when true then true ? puts "foo" : puts "bar" end
SyntaxError: (irb):6: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
case @foo when true then true ? puts "foo" : puts "bar" end
                                      ^                                                ^ 
```

使用括号，您不会：

```
1.9.3p125 :007 > case @foo when true then true ? puts("foo") : puts("bar") end
 => nil 
```

# gps - 是否可以在 Arduino 上表示 GPS 时间？

> ID：13462484
> 
> 赞同：0
> 
> 时间：2012-11-19T21:22:53.050
> 
> 标签：gps, arduino

我有一个 ubox GPS 系统，它在发生事件时输出以下信息：

*   wnR - GPS 周数（两个字节）
*   towMsR - 以毫秒为单位的时间（四个字节）
*   towSubMsR - 以纳秒为单位的毫秒分数（四个字节）

看起来以纳秒为单位捕获事件的时间我必须使用所有八个字节。这使它超出了 16 位 Arduino 的范围。

我是否正确地考虑了这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:30:57.070

您可以为 ms 和 ns 使用两个`unsigned long`变量（我认为这些变量不会是负数）参见[参考](http://arduino.cc/en/Reference/UnsignedLong)

# java - Java - 获取字符频率，创建概率，然后生成伪随机字符

> ID：13462486
> 
> 赞同：2
> 
> 时间：2012-11-19T21:22:56.493
> 
> 标签：java, hashtable, markov

我正在使用马尔可夫模型创建一个伪随机文本生成器。基本上，我使用哈希表来存储 k 阶（马尔可夫模型的顺序）的子串列表，然后对于每个子串，我有一个后缀的 TreeMap 及其在整个子串中的频率。

我正在努力生成随机后缀。对于每个子字符串，我都有一个包含所有可能后缀及其频率的 TreeMap。我无法使用它为每个后缀创建概率，然后根据概率生成伪随机后缀。

对此概念以及如何进行此操作的任何帮助表示赞赏。如果您有任何问题或需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:16:21.120

我不确定 a`TreeMap`是否真的是最好的数据结构，但是 . . .

您可以使用[该`Math.random()`方法](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#random%28%29)获取`0.0`（包含）和`1.0`（不包含）之间的随机值。然后，迭代地图的元素，累积它们的频率，直到超过该值。第一个超过这个值的后缀就是你的结果。假设您的地图元素的频率加起来为`1.0`，这将选择与其频率成比例的所有后缀。

例如：

```
public class Demo
{
    private final Map<String, Double> suffixFrequencies =
        new TreeMap<String, Double>();

    private String getRandomSuffix()
    {
        final double value = Math.random();
        double accum = 0.0;
        for(final Map.Entry<String, Double> e : suffixFrequencies.entrySet())
        {
            accum += e.getValue();
            if(accum > value)
                return e.getKey();
        }
        throw new AssertionError(); // or something
    }

    public static void main(final String... args)
    {
        final Demo demo = new Demo();
        demo.suffixFrequencies.put("abc", 0.3);  // value in [0.0, 0.3)
        demo.suffixFrequencies.put("def", 0.2);  // value in [0.3, 0.5)
        demo.suffixFrequencies.put("ghi", 0.5);  // value in [0.5, 1.0)

        // Print "abc" approximately three times, "def" approximately twice,
        // and "ghi" approximately five times:
        for(int i = 0; i < 10; ++i)
            System.out.println(demo.getRandomSuffix());
    }
} 
```

笔记：

*   由于舍入误差，`throw new AssertionError()`可能实际上*会*经常发生，尽管很少发生。所以我建议你用总是选择第一个元素或最后一个元素或其他东西的东西替换该行。
*   如果频率加起来*不是*`getRandomSuffix()`1.0，那么您应该在开头添加一个通道，以确定所有频率的总和。然后，您可以`value`相应地进行缩放。

# asp.net - 在 aspx 中动态命名类

> ID：13462488
> 
> 赞同：0
> 
> 时间：2012-11-19T21:23:16.427
> 
> 标签：asp.net, html

我的目标是创建一系列可点击的按钮，每个按钮都有一个独特的图像。目前，这些图像在 CSS 中存储为类，这显示得很好 - 我可以通过 GImg EGCImg1、GImg EGCImg2 ......等等来调用它们。但是，我想让这个动态化，这样我就可以设置 X 个按钮而不是复制/粘贴代码（我讨厌这样做）。以下是我能找到的唯一“有用”资源，但不幸的是，他们的建议对我不起作用。

[http://forums.asp.net/t/1619813.aspx/1](http://forums.asp.net/t/1619813.aspx/1)

[http://www.codeproject.com/Articles/14033/Dynamic-CSS-Styling-in-ASP-NET-A-Flexible-Approach](http://www.codeproject.com/Articles/14033/Dynamic-CSS-Styling-in-ASP-NET-A-Flexible-Approach)

所以基本上下面的代码，当我手动设置 {0} 时会完美运行。如果我设置此值，它们甚至会正确列出 - 只是所有图像都具有相同的图像。

只有 <% string.Format("GImg EGCImg{0}", i); %> 坏了。

```
<% for (int i = 0; i < 3; i++){ %>
  <li>
     <label class="baseTemplate">
        <b>
           <%=Html.RadioButtonFor(x => x.Input.MailTemplate, i)%>
        </b><span class="<% string.Format("GImg EGCImg{0}", i); %>"><span class="CheckMark"/>
            </span>
      </label>
   </li><% } %> 
```

欢迎任何和所有的建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:39:51.167

你错过了`=`之后`<%`

此外，您还可以执行以下操作：

```
<span class="GImg EGCImg<%= i.ToString() %>"><span class="CheckMark"/></span> 
```

而不是使用 String.Format 方法，只需`i`在类的末尾附加 。开销也少了一点。

就像`=`说`Response.Write`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:28:23.133

一种选择是使用内联 css，因此您可以使用 style="background: red;" 代替 class="classname"。这是无需更改太多代码的最简单方法。您还可以在 head 中生成动态 css，或从外部链接到生成的 css 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T16:58:23.093

您可以使用 Attributes.Add 和 Attributes.Remove

.aspx 文件

```
<span id="YourContainer" runat="server">Report Type</span> 
```

c#代码后面

```
YourContainer.Attributes.Add("class", "active");
YourContainer.Attributes.Remove("class"); 
```

# asp.net-mvc - 反射 + 实体框架更新 MVC 应用程序中的数据

> ID：13462491
> 
> 赞同：0
> 
> 时间：2012-11-19T21:23:24.523
> 
> 标签：asp.net-mvc, entity-framework, reflection

我在页面上有一个复杂的表单，该表单绑定到代表一个相当复杂的实体的 POCO。要求之一是，在模糊时，我更新数据库。

我目前正在通过 ajax 传递属性（作为键）、值和 CampaignId。密钥可能类似于：`Campaign.FanSettings.SocialSharing.FacebookLinkText`.

我正在使用下面的代码，并获得“关闭”。我的最后一个 propertyToSet 是 FacebookLinkText 没有被设置，因为我`object source`的类型是 Entities.Campaign，而我`object value`的只是一个字符串。我知道这些需要是相同的类型，但我不明白该怎么做。两个问题：

1.  如何修改下面的代码才能执行 propertyToSet.SetValue 方法
2.  由于我将它转换为一个对象，我看不到它实际上会如何更新我的实体，所以当我调用 SaveChanges 时，它会适当地更新。我错过了什么？

谢谢！

代码：

```
 public void UpdateCampaign(int id, string key, string value)
    {
        using (var context = new BetaEntities())
        {
            var camp = context.Campaigns.Where(e => e.Id == id).Single();
            SetProperty(camp, key,value);
        }
    }
    public void SetProperty(object source, string property, object value)
    {
        string[] bits = property.Split('.');
        for (int i = 0; i < bits.Length - 1; i++)
        {
            PropertyInfo prop = source.GetType().GetProperty(bits[i]);
            source = prop.GetValue(source, null);
        }
        PropertyInfo propertyToSet = null;
        if (source is IEnumerable)
        {
            foreach (object o in (source as IEnumerable))
            {
                 propertyToSet = o.GetType().GetProperty(bits[bits.Length - 1]);
                 break;
            }
        }
        else
        {
            propertyToSet = source.GetType().GetProperty(bits[bits.Length - 1]);
        }
        propertyToSet.SetValue(source, value, null);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:21:50.580

解决了。

```
public void UpdateCampaign(int id, string key, string value)
    {
        using (var context = new BetaEntities())
        {
            var camp = context.Campaigns.Where(e => e.Id == id).Single();
            SetProperty(camp, key, value);
            context.SaveChanges()
        }
    }
    public void SetProperty(object source, string property, object value)
    {
        string[] bits = property.Split('.');
        for (int i = 0; i < bits.Length - 1; i++)
        {
            PropertyInfo prop = source.GetType().GetProperty(bits[i]);
            source = prop.GetValue(source, null);
        }
        PropertyInfo propertyToSet = null;
        if (source is IEnumerable)
        {
            foreach (object o in (source as IEnumerable))
            {
                 propertyToSet = o.GetType().GetProperty(bits[bits.Length - 1]);
                 propertyToSet.SetValue(o, value,null);
                 break;
            }
        }
        else
        {
            propertyToSet = source.GetType().GetProperty(bits[bits.Length - 1]);
            propertyToSet.SetValue(source, value, null);
        }
    } 
```

# windows-8 - Windows 8 中辅助动态磁贴的问题

> ID：13462494
> 
> 赞同：0
> 
> 时间：2012-11-19T21:23:39.423
> 
> 标签：windows-8

我在使用辅助活动磁贴时遇到问题。我将它固定在我的应用程序中，我希望它让用户进入一个深层链接，他将它固定在哪里。在 App.xaml.cs 文件中，我将其添加到 onlaunched 事件中：

```
if (rootFrame.Content == null)
        {
            // Wenn der Navigationsstapel nicht wiederhergestellt wird, zur ersten Seite navigieren
            // und die neue Seite konfigurieren, indem die erforderlichen Informationen als Navigationsparameter
            // übergeben werden

            if (!string.IsNullOrEmpty(args.Arguments))
            {
                rootFrame.Navigate(typeof(qurandb));//, args.Arguments);
            }
            else
            {
                //  rootFrame.Navigate(typeof(qurandb), args.Arguments);
                rootFrame.Navigate(typeof(GroupedItemsPage), "AllGroups");
            }

        /*    if (!rootFrame.Navigate(typeof(GroupedItemsPage), "AllGroups"))
            {
                throw new Exception("Failed to create initial page");
            } */
        } 
```

我的问题是，这仅在应用程序首次启动时才有效。当我稍后单击辅助磁贴（应用程序是恢复）时，我没有到达我想要的目的地，但到了点，我在暂停应用程序时所在的位置。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:30:33.957

单击辅助磁贴时将调用应用程序的 OnLaunched 事件。您提供的代码假定它只会在`rootFrame.Content`为 null 时被调用，并且如果您的应用程序已经在运行，则不会导航到相应的页面。代码需要处理帧内容不为空的情况。

```
if (rootFrame.Content == null)
{
    ...
} else {
    // Need to handle the case where rootFrame.Content is not null
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:43:07.170

您需要按如下方式处理 OnResuming 事件：

在您的 App.xaml.cs

```
public App() 
{
    //...
    this.Resuming += OnResuming; 
    //...
}

//...

private void OnResuming(object sender, object e) 
{
    //there are no args here to access. So need to figure out some way to decide what page to show
    bool showShowQuranDb = true; //your logic here
    if (shouldShowQuranDb)
    {
        rootFrame.Navigate(typeof(qurandb));
    }
    else
    {
        rootFrame.Navigate(typeof(GroupedItemsPage), "AllGroups");
    }
} 
```

# jsf - 带有获取请求的 JSF CommandLink

> ID：13462497
> 
> 赞同：1
> 
> 时间：2012-11-19T21:24:00.983
> 
> 标签：jsf, commandlink

目前我的 webapp 存在严重问题，因为它在 web 代理 ISA Server 2006 后面有奇怪的行为。我发现问题是因为我使用 h:links 来调用一些页面，而 ISA 从中进行缓存。我将 h:link 更改为 h:commandLink 但缓存是相同的。用萤火虫调试请求我发现：

```
POST currentPage
GET nextPage 
```

第一个是我点击的页面，第二个是我想去的页面。1.我不明白为什么有2个请求？2.我不知道为什么命令正在发送GET请求？

有谁能够帮我.... ？？？？

# vb.net - VB：NET 使用 LINQ 如何在某些 Datatable 列中找到指定字符串的行索引

> ID：13462499
> 
> 赞同：0
> 
> 时间：2012-11-19T21:24:12.277
> 
> 标签：vb.net, linq, datatable

检查某个列中是否存在字符串，我使用类似的东西

```
mydatatable.AsEnumerable().Any(Function(r) r.Field(Of String)("somecolumn") = "somestring") 
```

但我怎样才能找到的行索引`"somestring"`？考虑到它只允许存在一次`mydatatable`，如果它存在不止一次呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:32:29.240

您可以使用通过索引的重载：

```
Dim rows = myDataTable.AsEnumerable().
    Select(Function(r, i) New With {.Row = r, .Index = i}).
    Where(Function(x) x.Row.Field(Of String)("somecolumn") = "somestring")
If rows.Any() Then
    Dim firstIndex As Int32 = rows.First.Index
End If 
```

# excel - 从访问到 excel 导出数组很慢

> ID：13462500
> 
> 赞同：0
> 
> 时间：2012-11-19T21:24:21.383
> 
> 标签：excel, vba, ms-access, export-to-excel

我有一个类似的性能问题，即[从访问 excel 缓慢导出，](https://stackoverflow.com/questions/1542281/slow-exporting-from-access-to-excel)通过设置单个单元格值循环将数据导出到 MS Excel：

```
objSheet.Cells(table_1_row_no + intcounter, table_1_colA_col_no) = table_1_array(intcounter, 0) 
```

但是我的数据来自一个数组，并且需要在将其传输到那里后在 excel 中进行处理，因此我需要在传输数据后使用一个打开的工作表。因此，上述帖子中提到的方法都不是非常合适的。

我有一个从数据库中提取数据的 MS 访问应用程序，在将 vba 中的数据放入 Excel 之前，它会对其进行相当多的处理。因此，要传输的数据是数组而不是记录集。将其返回到记录集以允许使用 .CopyFromRecordset 方法的最简单方法是创建一个临时表和记录集，但除非没有更好的办法，否则这会导致一条相当长的路径下降。

在 Access 取回结果之前，电子表格会进行冗长的计算。我很想把它留在 excel 中，因为这让工程师可以灵活地使用它来根据不同情况进行调整（环境受到控制，因此无需担心未经授权的更改）。因此，仅删除 csv 或 excel 文件而不打开它的选项也不适合。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:31:16.383

我有同样的问题，尝试将您的数据源转换为记录集 如果您使用 EXCEL 2000、2002、2003 或 2007，则使用 CopyFromRecordset

```
'Copy the recordset to excel sheet we  start in cell A1
 sheet1.Cells(1, 1).CopyFromRecordset rst 
```

如果记录集包含 OLE 对象字段或数组数据（例如分层记录集），请注意 CopyFromRecordset 将失败

# objective-c - iOS 应用程序：几个具有共同主题的崩溃：SIGSEGV 和 _sigtramp

> ID：13462505
> 
> 赞同：2
> 
> 时间：2012-11-19T21:24:39.160
> 
> 标签：objective-c, ios, cocoa-touch

作为 obj-c 的新手，我不擅长阅读堆栈跟踪，但我通常可以找出代码中从哪里开始查找。但是，在测试期间，其中一名测试人员始终报告数次随机崩溃。而且我无法确定堆栈跟踪的头部或尾部，因为它们不指向我自己的任何代码。这里有两个：

```
0 WIT Free 0x000a5a92 _mh_execute_header + 338578
1 WIT Free 0x000a677c _mh_execute_header + 341884
2 libsystem_c.dylib 0x355cc7ec _sigtramp + 48
3 WIT Free 0x000fcd02 _mh_execute_header + 695554
4 WIT Free 0x000fd502 _mh_execute_header + 697602
5 WIT Free 0x000fd0a0 _mh_execute_header + 696480
6 WIT Free 0x000fea9c _mh_execute_header + 703132
7 WIT Free 0x000ffa3a _mh_execute_header + 707130
8 Foundation 0x31e1bc28 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 16
9 Foundation 0x31d736d8 -[NSURLConnectionInternalConnection invokeForDelegate:] + 28
10 Foundation 0x31d736a2 -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 198
11 Foundation 0x31d735c4 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 60
12 CFNetwork 0x34c6c7f4 _ZN19URLConnectionClient23_clientDidFinishLoadingEPNS_26ClientConnectionEventQueueE + 192
13 CFNetwork 0x34c614a4 _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl + 424
14 CFNetwork 0x34c61598 _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl + 668
15 CFNetwork 0x34c611a2 _ZN19URLConnectionClient13processEventsEv + 106
16 CFNetwork 0x34c610d8 _ZN17MultiplexerSource7performEv + 156
17 CoreFoundation 0x314b1ad2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
18 CoreFoundation 0x314b129e __CFRunLoopDoSources0 + 214
19 CoreFoundation 0x314b0044 __CFRunLoopRun + 652
20 CoreFoundation 0x314334a4 CFRunLoopRunSpecific + 300
21 CoreFoundation 0x3143336c CFRunLoopRunInMode + 104
22 GraphicsServices 0x334ad438 GSEventRunModal + 136
23 UIKit 0x30b96cd4 UIApplicationMain + 1080
24 WIT Free 0x000558b0 _mh_execute_header + 10416
25 WIT Free 0x00055857 _mh_execute_header + 10327 
```

和：

```
0 WIT Free 0x00067a92 _mh_execute_header + 338578
1 WIT Free 0x0006877c _mh_execute_header + 341884
2 libsystem_c.dylib 0x355cc7ec _sigtramp + 48
3 WIT Free 0x000bfc82 _mh_execute_header + 699522
4 WIT Free 0x000cc34e _mh_execute_header + 750414
5 WIT Free 0x000cd5a0 _mh_execute_header + 755104
6 libdispatch.dylib 0x35cf5c58 _dispatch_call_block_and_release + 12
7 libdispatch.dylib 0x35d00e90 _dispatch_main_queue_callback_4CF$VARIANT$up + 196
8 CoreFoundation 0x314b02ac __CFRunLoopRun + 1268
9 CoreFoundation 0x314334a4 CFRunLoopRunSpecific + 300
10 CoreFoundation 0x3143336c CFRunLoopRunInMode + 104
11 GraphicsServices 0x334ad438 GSEventRunModal + 136
12 UIKit 0x30b96cd4 UIApplicationMain + 1080
13 WIT Free 0x000178b0 _mh_execute_header + 10416
14 WIT Free 0x00017857 _mh_execute_header + 10327 
```

有人可以破译这个并用简单的英语解释我所看到的吗？一些关于为什么会发生这些崩溃的指针也将非常有帮助！

**编辑：更多信息**

*   显然，崩溃几乎总是发生在相当弱的网络连接上。
*   我正在使用带有委托的异步 NSURLConnections
*   我将尝试使用 PLCrashReporter 获取所有线程的堆栈跟踪
*   我正在使用 ARC
*   跟踪的前三行对于每次崩溃都是通用的（十六进制数字除外 - 内存位置？）：

：

```
0 WIT Free 0x000a5a92 _mh_execute_header + 338578
1 WIT Free 0x000a677c _mh_execute_header + 341884
2 libsystem_c.dylib 0x355cc7ec _sigtramp + 48 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:43:12.813

发生的事情是被调用的对象 (NSURLConnection) 正在尝试调用您为其设置的委托，但该委托位于已被丢弃的对象中，因此存在内存访问冲突。

我的猜测是，在某个地方你已经离开了一个视图，它有一个带有委托集的 NSURLConnections 对象，但是你没有正确关闭 NSURLConnection

见[https://stackoverflow.com/a/11232292/451482](https://stackoverflow.com/a/11232292/451482)

# internet-explorer-8 - 视频JS ie8 LOG：错误

> ID：13462508
> 
> 赞同：1
> 
> 时间：2012-11-19T21:24:47.000
> 
> 标签：internet-explorer-8, video.js

我在 ie8 上的视频 js 有点问题。我有一个视频列表。当用户单击其中一个链接时，我会调用 javascript 来获取正确的视频和视频 url（所有绝对 url）。页面加载时预定工作的视频工作正常，但如果我尝试切换到另一个视频，视频播放器就会消失，脚本控制台一遍又一遍地显示字符串“LOG：Error”......基本上崩溃了 ie8。

这是我用来加载视频的代码：

```
 data = $.parseJSON(data);
        mp4_url  = data.mp4_url;
        webm_url = data.webm_url;
        flv_url  = data.flv_url;        
        var submission_id = data.submission_id;

        var video_player = '<video id="video" class="video-js vjs-default-skin" controls preload="none" width="'+player_width+'" height="'+player_height+'" poster="" data-setup="{}"> '
                                     + '<source id="mp4"   src="'+mp4_url+'" type="video/mp4" />'
                                     + '<source id="flash" src="'+flv_url+'" type="video/flv" />'
                                     + '<source id="webm"  src="'+webm_url+'" type="video/webm" />'
                                     + '</video>';
        $('#player').empty();
        $('#player').html(video_player);
        $('#player').fadeIn('slow'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:30:58.433

这里的问题不在于 API 文档。我意识到我需要做什么将视频块放入我的模板中，然后为播放器定义一个变量集，如下所示：

```
 var mplayer = _V_('video'); 
```

然后设置来源：

```
mplayer.src([{ type: "video/mp4", src: mp4_url },{ type: "video/webm", src: webm_url },{ type: "video/flv", src: flv_url }]); 
```

# apache-flex - 可拖动抽屉 Adob e Flex Mobile

> ID：13462511
> 
> 赞同：0
> 
> 时间：2012-11-19T21:25:07.877
> 
> 标签：apache-flex, drag-and-drop

有人可以帮助我创建一个位于我的移动应用程序底部的可拖动抽屉吗？我想让它有一个始终可见的拖动手柄（可以是图像或其他），然后允许您将内容滑入视图并将它们滑回屏幕底部的视图之外。我需要一个开始的方向，一旦我有了它，我应该能够弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:55:25.797

我最初在鼠标向下/移动/向上事件上启动了滑动，但后来将其更改为在扩展坞顶部的句柄图像上的点击效果（当您向上/向下滑动时也会发生），因为我改变了今天下午我还没有机会清理它，但这是开始：

抽屉：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"  maxHeight="125" minHeight="30" height="30"
         xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Script>
        <![CDATA[
            private var dragging:Boolean = false;           

            protected function resize():void{
                var h:int = this.height;
                var i:int = 0;              
                if (h !== 125){
                    for(i=h;i<=125;i++){                        
                        this.height = i;
                    };
                    currentState='up';
                    return;
                }else{
                }

                if(h >= 30){
                    for(i=h;i>=30;i--){                     
                        this.height = i;                        
                    };
                    currentState='down';
                    return;
                }               
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>  
    <s:states>
        <s:State name="down"/>
        <s:State name="up"/>
    </s:states>
    <s:Rect width="100%" height="100%" top="30">
        <s:fill>
            <s:SolidColor color="#333333"/>         
        </s:fill>
    </s:Rect>   
    <s:Image scaleMode="zoom" source.down="@Embed('Images/down.png')" source.up="@Embed('Images/up.png')" mouseDown="resize()"/>
    <s:HGroup width="100%" horizontalAlign="center" verticalAlign="bottom" top="30" gap="30">
        <!--Buttons here-->
    </s:HGroup> 
</s:Group> 
```

# button - TinyMCE：创建自定义颜色拆分按钮

> ID：13462512
> 
> 赞同：1
> 
> 时间：2012-11-19T21:25:09.540
> 
> 标签：button, tinymce, custom-controls, color-picker

我正在尝试在 TinyMCE 中创建一个自定义颜色下拉/拆分按钮。API 似乎可以做到这一点，但我的测试没有成功。我正在尝试使用 createColorSplitButton 方法。这是我的代码：

```
<script type="text/javascript">

tinyMCE.init({ 
    mode : "exact", 
    elements : "content",
theme : "advanced",
theme_advanced_buttons1 : "fontselect,fontsizeselect,custombackground", 
theme_advanced_buttons2 : "", 
theme_advanced_buttons3 : "",

setup : function(ed) {
    ed.controlManager = new tinymce.ControlManager(ed);

    ed.controlManager.createColorSplitButton('custombackground', {
        title : 'Background Color',
        image : 'icon.gif',
        onclick : function() {
            // change iFrame background 
        }
    });
}
}); 

</script>
<textarea id="content" name="content" cols="50" rows="15">This is some content that will be editable with TinyMCE.</textarea> 
```

所以我需要得到它来向工具栏添加一个新的颜色拆分按钮。之后，我需要拆分按钮来实际更改 iFrame 的颜色。任何帮助将不胜感激 ！

编辑：我为任何有兴趣帮助的人创建了一个小提琴：http: [//fiddle.tinymce.com/dwcaab](http://fiddle.tinymce.com/dwcaab)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:05:38.760

我在你的基础上创建了一个 tinymce[小提琴](http://fiddle.tinymce.com/lwcaab/16)。请检查一下并告诉我这是否是您想要的。

# java - 将 JScrollPane 添加到 JSplitPane

> ID：13462513
> 
> 赞同：0
> 
> 时间：2012-11-19T21:25:13.713
> 
> 标签：java, swing, jscrollpane, jsplitpane

在这里遇到一个难题：我需要将图像转换为 JScrollPane。应该很容易，但我有点迷路。

```
JSplitPane pane1;

pane1 = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, 
    new JLabel("hi"), 
    (new JLabel(new ImageIcon(image)))); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:28:44.370

你可以这样做：

```
pane1 = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, new JLabel("hi"),
             (new JScrollPane(new JLabel(new ImageIcon(image))))); 
```

# c# - rx 通过时间戳同步多个事件 observables

> ID：13462515
> 
> 赞同：0
> 
> 时间：2012-11-19T21:25:16.937
> 
> 标签：c#, time, system.reactive

我有几个从不同事件创建的 observables，并使用 sample 方法创建相同时间跨度的样本。问题是它们是在不同时间创建和启动的，所以我得到了等距的时间序列，这些时间序列都发生了变化。我不能强制创建时间，因此我想使用参考时间戳来对齐所有这些 observables。

假设采样间隔为 5 秒，参考时间戳为`01-Jan-1969 00:00:00`

我会得到以下时间序列：

```
19-Nov-2012 08:00:00
19-Nov-2012 08:00:05
19-Nov-2012 08:00:10
.... 
```

问题当然是如何在 RX 中做到这一点。

目标是为情节对齐时间序列形式的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:08:36.883

这是一个例子：

```
public class Program
{
    public static void Main()
    {
    IObservable<long> Sequence1 = Observable.Interval(TimeSpan.FromSeconds(1));
    IObservable<long> Sequence2 = Observable.Interval(TimeSpan.FromSeconds(1));
    //1st subscription
    Sequence1.Timestamp().Buffer(TimeSpan.FromSeconds(5.0)).Subscribe(item1 =>
    Console.WriteLine("Buffer 1: {0} Value: {1}", item1[item1.Count[1].
    Timestamp.ToString("HH:mm:ss"), item1[item1.Count - 1].Value));
    //some delay
    Thread.Sleep(2000);
    //2nd subscription
    Sequence2.Timestamp().Buffer(TimeSpan.FromSeconds(5.0)).Subscribe(item2 =>
    Console.WriteLine("Buffer 2: {0} Value: {1}", item2[item2.Count - 1].
    Timestamp.ToString("HH:mm:ss"), item2[item2.Count - 1].Value));
    Console.ReadLine();
}
} 
```

序列 1 和 2 是不同的数据源，我想对齐它们，以便例如缓冲区在同一时间戳关闭。

# java - 相机旋转

> ID：13462516
> 
> 赞同：1
> 
> 时间：2012-11-19T21:25:17.027
> 
> 标签：java, opengl, jogl

与[我之前的问题](https://stackoverflow.com/questions/13444111/opengl-rotations-and-object-movement)一样，我设法在 opengl 和 jogl 中创建了小太阳系 :) 现在我想旋转相机以从不同角度显示它。
我设法旋转了立方体，但它们的运动平面保持不变。

GL3 gl = drawable.getGL().getGL3();

```
 gl.glClear(GL3.GL_COLOR_BUFFER_BIT | GL3.GL_DEPTH_BUFFER_BIT);
    //Model View Matrix

    //Mat4 mv = new Mat4();
    Mat4 mv = MatrixMath.lookAt(this.eyeX,this.eyeY,this.eyeZ,this.at,this.up);
    mv = mv.mul(MatrixMath.rotationZ(satellite));
    mv.set(2, 2, 0.0f);
    mv.set(2, 3, 0.0f);

    cubeprogram.passUniformMatrix(gl, "model_view", mv);

    gl.glDrawArrays( GL3.GL_TRIANGLES, 0, numVertices );

    angle += 2.0f;
    satellite = angle + 8.0f;
    if (angle > 360.0f)
    angle -= 360.0f;

    float positionX = setMovementX(angle, 0.8f);
    float positionZ = setMovementZ(angle, 0.8f);
   // mv = MatrixMath.lookAt(this.eyeX,this.eyeY,this.eyeZ,this.at,this.up);
    mv = mv.mul(MatrixMath.rotationZ(satellite));
    mv.set(0, 3, positionX);
    mv.set(2, 3, positionZ);
    cubeprogram.passUniformMatrix(gl, "model_view", mv);
    gl.glDrawArrays( GL3.GL_TRIANGLES, 0, numVertices );
    positionX = setMovementX(satellite, 0.2f);
    positionZ = setMovementZ(satellite, 0.2f);
    Mat4 sm = new Mat4( 1.0f,    0.0f,  0.0f,   positionX, 
            0.0f,    1.0f,  0.0f,   0.0f, 
            0.0f,    0.0f,  1.0f,   positionZ, 
            0.0f,    0.0f,  0.0f,   1.0f);
    mv = mv.mul(sm);
    mv = mv.mul(MatrixMath.rotationZ(angle));
    cubeprogram.use(gl);
    cubeprogram.passUniformMatrix(gl, "model_view", mv);
    gl.glDrawArrays( GL3.GL_TRIANGLES, 0, numVertices );
    cubeprogram.setUniformMatrix("projection", projection);` 
```

// 定义

```
public static Mat4 lookAt(Vec4 eye, Vec4 at, Vec4 up) {
    final Vec4 eyeneg = eye.neg();

    final Vec4 n = VectorMath.normalize(eye.sub(at));
    final Vec4 u = VectorMath.normalize(VectorMath.cross(up, n));
    final Vec4 v = VectorMath.normalize(VectorMath.cross(n, u));
    final Vec4 t = new Vec4(0, 0, 0, 1);
    final Mat4 c = new Mat4(u, v, n, t);

    return c.mul(MatrixMath.translate(eyeneg));
}
public static Mat4 lookAt(float x, float y, float z, Vec4 at, Vec4 up) {
    final Vec4 eye = new Vec4(x, y, z, 1.0f);
    return lookAt(eye, at, up);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:58:42.720

检查 jogl 的 pmvMatrix

对于相机：

```
pmvMatrix.glMatrixMode(GLMatrixFunc.GL_PROJECTION);
pmvMatrix.glLoadIdentity();
pmvMatrix.gluPerspective(fov, aspect, zNear, zFar);
pmvMatrix.glMatrixMode(GLMatrixFunc.GL_MODELVIEW);
pmvMatrix.glLoadIdentity();
pmvMatrix.glRotatef(-pitch, 1, 0, 0);
pmvMatrix.glRotatef(-yaw, 0, 1, 0);
pmvMatrix.glRotatef(-roll, 0, 0, 1);
pmvMatrix.glTranslatef(-position.x, -position.y, -position.z);
pmvMatrix.update(); 
```

固定功能：

```
gl.glMatrixMode(GLMatrixFunc.GL_PROJECTION);
gl.glLoadMatrixf(pmvMatrix.glGetPMatrixf());
gl.glMatrixMode(GLMatrixFunc.GL_MODELVIEW);
gl.glLoadMatrixf(pmvMatrix.glGetMvMatrixf()); 
```

着色器：

```
GLUniformData pmvMatrixUniform; 
```

初始化代码...

```
PMVMatrix pmvMatrix = ...;
state.attachObject("pmvMatrix", pmvMatrix);
pmvMatrixUniform = new GLUniformData("pmvMatrix", 4, 4, pmvMatrix.glGetPMvMatrixf());
state.ownUniform(pmvMatrixUniform);
state.uniform(gl, pmvMatrixUniform); 
```

显示代码...

```
state.uniform(gl, pmvMatrixUniform); 
```

# asp.net-mvc-3 - 尝试在视图中显示枚举中的“名称”属性

> ID：13462519
> 
> 赞同：2
> 
> 时间：2012-11-19T21:25:50.337
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我正在尝试检索`[Display]`下面保存在数据库中的任何枚举的文本（即，如果没有，则对应的是“不，谢谢。”）而不必`@if`在我的视图中编写一个块。我想这是不可能的，但我想我会问。

```
public enum MyEnum
{
    [Display(Name = "No thanks.")]
    None,
    [Display(Name = "Yes, send me your 100 Packet.")]
    100Packet,
    [Display(Name = "Yes, send me your 200 Packet.")]
    200Packet
} 
```

现在，我唯一的解决方案是在我看来这样做：

```
@Model.MyEnumRadioButton // displays saved item in DB (i.e., "100Packet")

@if (Model.MyEnumRadioButton == MyEnum.None)
{
    <text>No thanks.</text>
}
.... 
```

并对`enum`. 对于这个小例子来说没什么大不了的，但我有很多不同`enum`的，有些有多达 10 个选择。

例如，我可以做些什么`@Model.MyEnumRadioButton`来让它显示文本？

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:21:00.737

我找到了一个简单的答案来解决我的问题：

[MVC.net 在视图中获取枚举显示名称，而无需在视图中引用枚举类型](https://stackoverflow.com/questions/9328972/mvc-net-get-enum-display-name-in-view-without-having-to-refer-to-enum-type-in-vi)

我所要做的就是`@MyEnum.100Packet.DisplayName()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:28:09.977

看到这篇文章，他正在使用描述属性来实现我相信的你：

[如何使用枚举值的自定义字符串格式设置枚举绑定组合框？](https://stackoverflow.com/questions/796607/how-do-i-override-tostring-in-c-sharp-enums)

# vim - Vim Latex：轻松删除单词/短语周围的命令

> ID：13462522
> 
> 赞同：3
> 
> 时间：2012-11-19T21:25:57.640
> 
> 标签：vim, latex

我正在使用 vim-latex，我正在寻找一种解决方案来删除短语周围的属性/命令。例如

```
\textit{\textbf{Foo}} 
```

将成为

```
\textit{Foo} 
```

不知何故。我找到了“环境”脚本，它对单个标志很有效，但不幸的是无法实现我的目标。

有什么想法和提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:52:29.260

如果你有Tim Pope的[环绕.vim，这可能会](https://github.com/tpope/vim-surround)

```
nmap <silent> dsa ds}dF\ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:55:56.130

你可以做类似的事情

```
F{dF\ds{

F{  "goes back to the last { before the cursor
dF\ "deletes the attribute
ds{ "deletes the {} (needing the surround-plugin 
```

并将其放入像 ds 之类的 new-vim-command 中，否则我也不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T20:35:07.920

如果您使用[vimtex](https://github.com/lervag/vimtex)，则默认映射很简单`dsc`（删除周围命令）。您可以在光标位于命令名称或文本中时发出它。

# javascript - 如果字段为空 - 做一件事情，如果不做其他事情（jQuery vs Field Autocompletion by Browser）

> ID：13462523
> 
> 赞同：3
> 
> 时间：2012-11-19T21:25:58.603
> 
> 标签：javascript, jquery, html, css

我想做简单的事情：
如果输入字段为空 - 不透明度：0.5
如果字段不为空 - 不透明度为 1。

我遇到了一个问题：当浏览器自动完成用户名或密码时 - 没有触发事件。

显然这不起作用：

```
.change() 
```

这也不起作用：

```
//CSS
selector:not(:empty){stuff1}
selector:empty{stuff2} 
```

但我找不到任何其他有效的明确解决方案。

编辑：我知道如何改变不透明度。
我知道如何在 jQuery 中选择空字段或非空字段。
当浏览器完成登录表单时，我不知道如何触发事件。
这可以在页面加载时，但也可以在以后（比如他自己输入用户名，密码自动输入）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:39:24.037

扩展ahren的答案：

```
<script type="text/javascript">
    $(window).load(function(){
        var inputs = $(":input");
        inputs.each(function(i){
           fadeFunction($(this));
           $(this).change(function(){fadeFunction($(this));});
        });

    });

    function fadeFunction(obj){
        if(obj.val().length === 0){
           obj.fadeTo(0,0.5);
        }
    }
</script> 
```

我还没有检查过这个的语法，但它得到了一般的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:27:33.193

```
$(function(){
  if($('#myInput').val().length === 0){
    $('#myInput').fadeTo(0, 0.5);
  }
}); 
```

您可以检查值长度...。这会在文档准备就绪时触发。

任何`change`处理程序都是多余的，因为它们很可能会*输入*值......但我想如果你愿意，你可以将它附加到更改处理程序。您只需要谨慎使用 来定位输入`$(this)`，因此当有人开始输入一个输入时，您不会淡出整个表单。

# c# - C# 动态加载/卸载 DLL Redux（当然使用 AppDomain）

> ID：13462525
> 
> 赞同：6
> 
> 时间：2012-11-19T21:26:03.093
> 
> 标签：c#, .net, dynamic, dll, assemblies

我已经阅读了与 Stack Overflow 上一样多的这个问题的不同版本，以及 3 个不同的谷歌搜索教程的首页上的每个蓝色链接，以及 MSDN（这比执行程序集有点浅） . 我只能将我为使 Tao 工作的努力视为一个好的测试用例，但相信我，我也尝试过简单的字符串返回、双精度、带参数的函数。不管我的问题是什么，都不是道。

基本上我想`testLibraryDomain.CreateInstance()`在 GLPlugin 命名空间中创建一个我的 Draw 类。

```
 if( usePlugin )
        {
                AppDomain testLibraryDomain = AppDomain.CreateDomain( "TestGLDomain2" );

                //What the heck goes here so that I can simply call
                //the default constructor and maybe a function or two?

                AppDomain.Unload( testLibraryDomain );
        }
        Gl.glBegin( Gl.GL_TRIANGLES ); 
```

我知道一个事实：

```
namespace GLPlugin
{
    public class DrawingControl : MarshalByRefObject
    {
        public DrawingControl()
        {
            Gl.glColor3f( 1.0f , 0.0f , 0.0f );

            //this is a test to make sure it passes
            //to the GL Rendering context... success
        }
    }
} 
```

确实改变了笔的颜色。当我给它一个`static void Main( string args[] )`入口点并调用`testLibraryDomain.ExecuteAssembly( thePluginFilePath )` 直接 ExecuteAssembly 是否会起作用时，它就起作用了，因为我不确定 GL 调用是否会使其进入“顶级”AppDomain 的 OpenGL 上下文。它甚至可以让我再次覆盖程序集并更改笔颜色。不幸的是，给它一个可执行的入口点意味着弹出控制台会打断我然后消失。当我在项目中简单地给它一个引用并创建一个常规的`GLPlugin.DrawingTool tool = new GLPlugin.DrawingControl()`，甚至创建一个`someAssembly = Assembly.LoadFrom( thePluginFilePath )`（当然不幸的是，它锁定了程序集，防止替换/重新编译）时，它也可以工作。

当使用我尝试过的各种方法时，我总是得到“给定的程序集名称或其代码库无效”。我保证，它是有效的。我试图加载它的方式不是。

我知道我缺少的一件事是正确的设置`testLibraryDomain.CreateInstance( string assemblyName , string typeName);`

据我所知， assemblyName 参数不是程序集文件的文件路径。它是命名空间，还是只是程序集名称，即：`GLPlugin`？如果是这样，我在哪里引用实际文件？没有 someAppDomain.LoadFrom( someFilename )，但如果有的话会很方便。此外，Type 和字符串 typeName 到底是什么？我不想放在`"Object"`这里，因为不是创建对象实例以外的类型吗？我也试过`CreateInstanceAndUnwrap( ... , ... )`同样缺乏对 AppDomain 的基本了解。通常我可以应付教程并让事情发挥作用，即使我经常不明白“为什么？”......在这里不是这样。通常查找六个不同的教程对我很有帮助......这里不再是这样，而是因为每个人都采用一种基本（或看起来如此）的方法。

所以请ELI5 ...我想从一个单独的AppDomain中的dll加载一个类的实例，也许运行一些函数，然后卸载它。最终将这些函数的列表创建为 List，根据需要删除/更新......我也希望能够将参数传递给它们，但这将是第 2 步。根据 StackOverflow，我必须了解`serializable`哪个我会再推迟一天。（我想您将能够从我的示例中弄清楚我正在尝试做什么。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T21:47:27.523

好的，我们必须澄清一些事情。首先，如果您希望能够在不锁定文件iteslf的情况下将dll加载和卸载到不同的AppDomain，也许您可​​以使用这样的方法：

```
AppDomain apd = AppDomain.CreateDomain("newdomain");
using(var fs = new FileStream("myDll.dll", FileMode.Open))
{
    var bytes = new byte[fs.Length];
    fs.Read(bytes, 0, bytes .Length);
    Assembly loadedAssembly = apd.Load(bytes);
} 
```

这样，您将不会锁定文件，并且您应该能够稍后卸载域，重新编译文件并稍后使用更新的版本加载它。但我不是 100% 确定这是否不会破坏您的应用程序。

那是因为第二件事。如果您将使用`CreateInstanceAndUnwrap`方法，根据 MSDN，您必须在两个 appdomains 中加载程序集 - 一个正在调用，另一个是您从中调用。当您在 AppDomains 中加载了两个不同的 dll 时，这可能会结束。

[包含解包类的程序集必须加载到两个应用程序域中，但它可以加载仅存在于新应用程序域中的其他程序集。](http://msdn.microsoft.com/en-us/library/3c4f1xde.aspx)

我现在不记得了，但是我认为当您调用时，两个应用程序域中的对象创建行为会有所不同`CreateInstanceAndUnwrap`，但我不记得细节了。

对于您的插件架构，您可能需要阅读这篇博文。[关于如何处理动态插件使用 AppDomain 类加载和卸载代码](http://www.devsource.com/c/a/Using-VS/Dynamic-Plugins-Using-the-codeAppDomaincode-Class-to-Load-and-Unload-Code/)

**编辑**

我忘记了这个 AppDomains 是如何工作的，我可能会引入一些混乱。我准备了一个简短的例子，'插件'架构如何工作。它与我之前在博客中描述的非常相似，这是我使用影子复制的示例。如果由于某些原因您不想使用它，可以很容易地更改为使用`AppDomain.Load(byte[] bytes)`

我们有 3 个程序集，第一个是基本插件程序集，它将作为代理工作，并将加载到所有 AppDomains（在我们的例子中 - 在主应用程序域和插件应用程序域中）。

```
namespace PluginBaseLib
{
    //Base class for plugins. It has to be delivered from MarshalByRefObject,
    //cause we will want to get it's proxy in our main domain. 
    public abstract class MyPluginBase : MarshalByRefObject 
    {
        protected MyPluginBase ()
        { }

        public abstract void DrawingControl();
    }

    //Helper class which instance will exist in destination AppDomain, and which 
    //TransparentProxy object will be used in home AppDomain
    public class MyPluginFactory : MarshalByRefObject
    {
        //This method will be executed in destination AppDomain and proxy object
        //will be returned to home AppDomain.
        public MyPluginBase CreatePlugin(string assembly, string typeName)
        {
            Console.WriteLine("Current domain: {0}", AppDomain.CurrentDomain.FriendlyName);
            return (MyPluginBase) Activator.CreateInstance(assembly, typeName).Unwrap();
        }
    }

    //Small helper class which will show how to call method in another AppDomain. 
    //But it can be easly deleted. 
    public class MyPluginsHelper
    {
        public static void LoadMyPlugins()
        {
            Console.WriteLine("----------------------");
            Console.WriteLine("Loading plugins in following app domain: {0}", AppDomain.CurrentDomain.FriendlyName);
            AppDomain.CurrentDomain.Load("SamplePlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null");
            Console.WriteLine("----------------------");
        }
    }
} 
```

在这里，我们将有另一个带有我们的虚拟插件的程序集，称为 SamplePlugin.dll 并存储在“Plugins”文件夹下。它引用了 PluginBaseLib.dll

```
namespace SamplePlugin
{
    public class MySamplePlugin : MyPluginBase
    {
        public MySamplePlugin()
        { }

        public override void DrawingControl()
        {
            var color = Console.ForegroundColor;
            Console.ForegroundColor = ConsoleColor.Green;
            Console.WriteLine("----------------------");
            Console.WriteLine("This was called from app domian {0}", AppDomain.CurrentDomain.FriendlyName );
            Console.WriteLine("I have following assamblies loaded:");
            foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
            {
                Console.WriteLine("\t{0}", assembly.GetName().Name);
            }
            Console.WriteLine("----------------------");
            Console.ForegroundColor = color;
        }
    }
} 
```

最后一个程序集（简单的控制台应用程序）将仅引用 PluginBaseLib.dll 和

```
namespace ConsoleApplication1
{
    //'Default implementation' which doesn't use any plugins. In this sample 
    //it just lists the assemblies loaded in AppDomain and AppDomain name itself.
    public static void DrawControlsDefault()
    {
        Console.WriteLine("----------------------");
        Console.WriteLine("No custom plugin, default app domain {0}", AppDomain.CurrentDomain.FriendlyName);
        Console.WriteLine("I have following assamblies loaded:");
        foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
        {
            Console.WriteLine("\t{0}", assembly.GetName().Name);
        }
        Console.WriteLine("----------------------");
    }

    class Program
    {
        static void Main(string[] args)
        {
            //Showing that we don't have any additional plugins loaded in app domain. 
            DrawControlsDefault();

            var appDir = AppDomain.CurrentDomain.BaseDirectory;
            //We have to create AppDomain setup for shadow copying 
            var appDomainSetup = new AppDomainSetup
                                 {
                                     ApplicationName = "", //with MSDN: If the ApplicationName property is not set, the CachePath property is ignored and the download cache is used. No exception is thrown.
                                     ShadowCopyFiles = "true",//Enabling ShadowCopy - yes, it's string value
                                     ApplicationBase = Path.Combine(appDir,"Plugins"),//Base path for new app domain - our plugins folder
                                     CachePath = "VSSCache"//Path, where we want to have our copied dlls store. 
                                 };
        var apd = AppDomain.CreateDomain("My new app domain", null, appDomainSetup);

        //Loading dlls in new appdomain - when using shadow copying it can be skipped,
        //in CreatePlugin method all required assemblies will be loaded internaly,  
        //Im using this just to show how method can be called in another app domain. 
        //but it has it limits - method cannot return any values and take any parameters.

        //apd.DoCallBack(new CrossAppDomainDelegate(MyPluginsHelper.LoadMyPlugins));

        //We are creating our plugin proxy/factory which will exist in another app domain 
        //and will create for us objects and return their remote 'copies'. 
        var proxy = (MyPluginFactory) apd.CreateInstance("PluginBaseLib", "PluginBaseLib.MyPluginFactory").Unwrap();

        //if we would use here method (MyPluginBase) apd.CreateInstance("SamplePlugin", "SamplePlugin.MySamplePlugin").Unwrap();
        //we would have to load "SamplePlugin.dll" into our app domain. We may not want that, to not waste memory for example
        //with loading endless number of types.
        var instance = proxy.CreatePlugin("SamplePlugin", "SamplePlugin.MySamplePlugin");
        instance.DrawingControl();

        Console.WriteLine("Now we can recompile our SamplePlugin dll, replace it in Plugin directory and load in another AppDomain. Click Enter when you ready");
        Console.ReadKey();

        var apd2 = AppDomain.CreateDomain("My second domain", null, appDomainSetup);
        var proxy2 = (MyPluginFactory)apd2.CreateInstance("PluginBaseLib", "PluginBaseLib.MyPluginFactory").Unwrap();
        var instance2 = proxy2.CreatePlugin("SamplePlugin", "SamplePlugin.MySamplePlugin");
        instance2.DrawingControl();

        //Now we want to prove, that this additional assembly was not loaded to prmiary app domain. 
        DrawControlsDefault();

        //And that we still have the old assembly loaded in previous AppDomain.
        instance.DrawingControl();

        //App domain is unloaded so, we will get exception if we try to call any of this object method.
        AppDomain.Unload(apd);
        try
        {
            instance.DrawingControl();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }

        Console.ReadKey();
    }
} 
```

}

影印似乎很方便。

# ios - 如何退出导航控制器？

> ID：13462527
> 
> 赞同：0
> 
> 时间：2012-11-19T21:26:20.177
> 
> 标签：ios, xcode, uinavigationcontroller, uinavigationbar

我的餐厅故事板布局是这样的：

主视图控制器 > 导航控制器 > 表视图控制器 > 3 个单独的表视图

主视图控制器转到几个不同的视图控制器，所以我需要定期返回它。表视图控制器控制不同菜单的 3 个单独的表视图。在导航控制器中拥有表视图控制器允许后退按钮退出 3 个单独的表视图，但我无法弄清楚如何从表视图控制器获取后退按钮到主视图控制器。

到目前为止，我已经在故事板 GUI 中完成了这一切，所以如果可以在那里对修复进行排序，那对我来说最容易理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T23:10:55.207

如果您不想将导航控制器放在主视图控制器之前，则可以使用“展开转场”。

创建一个 IBAction 方法以在主视图控制器中执行展开转场：

初级VC.h

```
- (IBAction)unwound:(UIStoryboardSegue *)segue; 
```

初级VC.m

```
- (IBAction)unwound:(UIStoryboardSegue *)segue
{
    // No need to do anything here...
} 
```

在第一个 Table View Controller 中，将一个条形按钮项拖到导航项（条形）的左上方。一旦它在那里，按住控制键并从栏按钮向下拖动到场景底部，您将看到一个绿色的退出图标。该`unwound:`方法应显示在列表中...选择该方法。

![放松赛格](../Images/961a84c084b166a0cb85c9317e1b631d.png)

现在您的按钮应该返回到主视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:40:32.487

为什么不将导航控制器作为主视图控制器的一部分？然后，当您按下表视图控制器时，您会在其上获得一个后退按钮。所以它将是导航控制器 -> 主视图控制器 -> 表视图控制器 -> ...

我已经用故事板做到了这一点，因为导航控制器场景首先是，然后与根视图控制器的关系是主视图控制器

# opengl - 在 ubuntu 上安装 Mesa

> ID：13462530
> 
> 赞同：1
> 
> 时间：2012-11-19T21:26:30.740
> 
> 标签：opengl, ubuntu, vtk, mesa

我正在尝试在我的 32 位 linux 机器（AWS 上的 EC2 实例）上安装和使用 VTK。我收到一个错误，我意识到这是因为我的机器上没有安装 openGL/Mesa。所以我使用以下命令安装了 Mesa： sudo apt-get install mesa-common-dev 现在，我不知道 mesa 安装在我的机器上的什么位置。/usr/lib/ 中没有文件夹“mesa”，任何地方都没有 libGl.so。谁能告诉我如何进一步进行？

# c++ - 打印通过标准输入输入的整个字符串

> ID：13462534
> 
> 赞同：1
> 
> 时间：2012-11-19T21:26:42.640
> 
> 标签：c++, string, g++

当输入通过不同的方法给出时，为什么同一个程序给出不同的输出？

方案一：

```
int main(){
    char s[10];
    cout << "Enter a String\n";
    cin >> s;
    cout << "The entered String is\n";
    cout << s << "\n";
    return 0;
} 
```

当我通过命令行“Hello World”输入时，我得到的输出只是*“Hello”*

方案二：

```
int main(){
    char s[] = "Hello World";
    cout << "The entered String is\n";
    cout << s << "\n";
    return 0;
} 
```

在这种情况下，我得到*“Hello World”的输出。*

这两个程序有什么区别？逻辑是一样的吗？通过命令行输入时如何获取整个字符串*“Hello World” ？*有办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:30:24.263

使用[`getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
string s;
getline(cin, s);
cout << "The entered String is\n";
cout << s << "\n"; 
```

您的代码的问题是输入流提取运算符`>>`只能将字符获取到下一个空格（因此，只有一个“单词”）。该`getline()`函数获取整行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:31:13.503

在您的第一个代码片段中，您的数组只有 10 个字符长。输入 hello world 会溢出数组并且发生不可预知的事情。

# twitter-bootstrap - Bootstrap 行容器的中心内容

> ID：13462535
> 
> 赞同：74
> 
> 时间：2012-11-19T21:26:43.627
> 
> 标签：twitter-bootstrap, center

我有下面的代码，我想将外部“行”div的“好”元素居中。我尝试了各种方法，例如 text-align: center （它只是使文本居中而不是内部 DIV 元素。

这是一个[jsfiddle](http://jsfiddle.net/LBtpe/)。这个想法是我得到一页“很好”的瓷砖，然后在 4 左右后它会换行。但如果它小于 4，它们应该出现在页面的中心。

```
<body class="container-fluid">
    <div class="row">
        <div class="well span2">
            <div class="row">
                <div class="span2">
                    Header
                </div>
            </div>
            <div class="row">
                <div class="span2">
                    Sub Header
                </div>
            </div>

        </div>

        <div class="well span2">
            <div class="row">
                <div class="span2">
                    Header
                </div>
            </div>
            <div class="row">
                <div class="span2">
                    Sub Header
                </div>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2017-12-12T01:53:01.227

使用 Bootstrap 4，有一个专门用于此的 css 类。下面将居中行内容：

```
<div class="row justify-content-center">
  ...inner divs and content...
</div> 
```

有关更多信息，请参阅：[https ://v4-alpha.getbootstrap.com/layout/grid/#horizo​​ntal-alignment。](https://v4-alpha.getbootstrap.com/layout/grid/#horizontal-alignment)

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-11-19T22:35:02.777

我通过执行以下操作解决了这个问题：

```
<body class="container-fluid">
    <div class="row">
        <div class="span6" style="float: none; margin: 0 auto;">
           ....
        </div>
    </div>
</body> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-02-10T11:31:26.037

对于 Bootstrap 4，使用以下代码：

```
<div class="mx-auto" style="width: 200px;">
  Centered element
</div> 
```

参考：[https ://getbootstrap.com/docs/4.0/utilities/spacing/#horizo​​ntal-centering](https://getbootstrap.com/docs/4.0/utilities/spacing/#horizontal-centering)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-04-04T13:21:22.627

试试这个，它有效！

```
<div class="row">
    <div class="center">
        <div class="col-xs-12 col-sm-4">
            <p>hi 1!</p>
        </div>
        <div class="col-xs-12 col-sm-4">
            <p>hi 2!</p>
        </div>
        <div class="col-xs-12 col-sm-4">
            <p>hi 3!</p>
        </div>
    </div>
</div> 
```

然后，在 css 中定义文档中中心 div 和中心的宽度：

```
.center {
    margin: 0 auto;
    width: 80%;
} 
```

# c++ - C++逐行读取并输出每一行

> ID：13462537
> 
> 赞同：1
> 
> 时间：2012-11-19T21:26:57.163
> 
> 标签：c++, io

假设我有一个文本文件，该文本文件包含以下内容：

你好，世界
欢迎使用 C++

如何从我的 .txt 文件中逐行打印？例如，这是我的代码的一部分

```
while (getline(input, document))
{
    if (!document.empty())
    {
        if (lineisthere(document)) {
            cout << "The word" << // << "is there" << endl;
        } else {
            cout << "The word" << // << "is not there" << endl;
        }
        line++;
    }
}
input.close(); //closes the input 
```

我希望我的输出看起来像这样：

*Hello Word*这个词是存在
的 但是，*Welcome to C++*这个词不存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:29:08.447

看起来您只想`document`在您指定的地方使用`//`：

```
cout << "The word " << document << " is there" << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:00:32.820

试试这个：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () 
{
  string text;
  ifstream ifs("hello.txt");

    while(!ifs.eof()) 
    {
      getline(ifs,text);
      cout << "" << text << "\n" ;
    }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T13:23:40.237

此代码逐行打印文本文件：

```
 #include<iostream>
#include<fstream>
#include<cstdlib>
#include<iomanip>
using namespace std;
int main()
{
string filename;
ifstream file;
    cout<<"enter file name";
    getline(cin,filename);
     filename.append(".txt");
    file.open(filename.c_str());

    string text;
    while(getline(file,text))
    {
        cout<<text<<endl;
    }
file.close();

    return 0;
} 
```

# android - Monkeyrunner 在设备上并行执行

> ID：13462539
> 
> 赞同：0
> 
> 时间：2012-11-19T21:27:12.900
> 
> 标签：android, python, multithreading, monkeyrunner

我正在尝试使用 monkeyrunner 配置连接到同一台电脑的多个平板电脑。该代码适用于 1 台平板电脑，但当我尝试在多台平板电脑上运行它时，一切都崩溃了。

这是调用 monkeyrunner python 文件的代码。mr1.py 是我要运行的 monkeyrunner 文件。

```
import sys

import util
import threading
import commands
class myThread (threading.Thread):
    def __init__(self, threadID, deviceId,env_path):
        self.threadID = threadID
        self.deviceId = deviceId
        self.path = env_path
        threading.Thread.__init__(self)
    def run(self):
        print "Starting " + self.deviceId
        ret = commands.getstatusoutput(self.path+"monkeyrunner mr1.py "+self.deviceId)
        print ret
        print "Exiting " + self.deviceId

def main():
    connected_devices = util.get_connected_devices()
    count = 0
    path = "/Users/ad/Desktop/android-sdk-macosx/tools/"
    for device in connected_devices:
        thread = myThread(count,device[0],path)
        thread.start()
        count = count + 1

if __name__ == "__main__":
    main() 
```

我遇到了这篇博文，它描述了 monkeyrunner 的比赛条件。我不确定这是否是导致问题的原因。

[http://distributedreasoner.blogspot.com/2011/06/android-monkeyrunner-and-google-adb.html](http://distributedreasoner.blogspot.com/2011/06/android-monkeyrunner-and-google-adb.html)

我还尝试使用上述博客文章中提到的 MAML 库，但我仍然无法让 monkeyrunner 在多个设备上同时执行。这是实际的monkeyrunner代码。

```
import sys
import maml
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

deviceId = sys.argv[1]

# Connects to the current device, returning a MonkeyDevice object
device = MonkeyRunner.waitForConnection(10.0,deviceId)

packagename = "com.android.settings"
classname =    "com.android.settings.DisplaySettings" #SecuritySettings" #".DisplaySettings" 
componentname = packagename + "/" + classname 
device.startActivity(component=componentname) 
maml.click(device,1088,300)
MonkeyRunner.sleep(0.4)
maml.click(device,864,361)
MonkeyRunner.sleep(0.4)
maml.click(device,612,621)
MonkeyRunner.sleep(0.5)
device.press ('KEYCODE_HOME', 'DOWN_AND_UP')

print "Exiting for device !" + deviceId 
```

基于 Commonsware 的问题，我用以下顺序代码替换了线程代码，它似乎工作正常，但显然这不是最理想的情况。

```
for device in connected_devices:
        print device[0]
        ret = commands.getstatusoutput(path+"monkeyrunner mr1.py "+device[0])
        print ret 
```

因为 Android 不允许您以编程方式修改位置/语言设置等，而且我需要配置许多平板电脑来更改设置，所以直接的选择是使用 MonkeyRunner。有几点注意事项，我愿意使用除 monkeyrunner 之外的其他工具来解决这个问题。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:36:36.277

您要更改哪些设置？如果这是唯一的语言，则可以在您的应用程序中完成语言。

```
public void setLocale(Locale locale, Instrumentation inst){
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    inst.getTargetContext().getResources().updateConfiguration(config, inst.getTargetContext().getResources().getDisplayMetrics());
} 
```

你所有的平板电脑 api 级别都是 16+（果冻豆吗？）如果是这样，你可能想看看[http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)

最后，如果您仍想使用 Monkey Runner 进行操作，我建议您将所有设备放在一个线程中，然后将每个设备分别传递给每个线程。

Python 不是我的专长，我无法访问/了解您正在使用的所有库（也许我可以在 java 中为您做到这一点？）但我认为可能更好的方法是：

```
class myThread (threading.Thread):
    def __init__(self, device):
        self.device = device
        threading.Thread.__init__(self)

    def run(self):
        packagename = "com.android.settings"
        classname = "com.android.settings.DisplaySettings"
        componentname = packagename + "/" + classname
        self.device.startActivity(component=componentname)
        maml.click(self.device, 1088, 300)
        MonkeyRunner.sleep(0.4)
        maml.click(self.device, 864, 361)
        MonkeyRunner.sleep(0.4)
        maml.click(self.device, 612, 621)
        MonkeyRunner.sleep(0.5)
        self.device.press('KEYCODE_HOME', 'DOWN_AND_UP')

def main():
    connected_devices = util.get_connected_devices()
    count = 0
    devices = []
    for deviceId in connected_devices:
        devices[count] = MonkeyRunner.waitForConnection(10.0, deviceId[0])
        count = count + 1
    for device in devices:
        thread = myThread(device)
        thread.start()

if __name__ == "__main__":
    main() 
```

基本上区别就像我上面所说的，你按顺序获取所有设备，然后用你按顺序得到的设备调用每个线程。那有意义吗？

# mysql - 具有复合键的外键与自动增量

> ID：13462545
> 
> 赞同：0
> 
> 时间：2012-11-19T21:27:40.140
> 
> 标签：mysql, sql

我有一个数据库，我将在其中存储两个用户之间的对话。我将保存一个对话表和一个消息表。对话表将存储两个用户之间的对话，消息表将存储特定对话中的消息。两个用户之间只有一个对话，例如 MSN messenger 或 Facebook 消息，并且新消息将添加到此对话中。我有两个想法来做到这一点。

第一种方法：

```
conversations(c_id, user1, user2) 
```

c_id 是主键 auto_incremented

```
messages(m_id, c_id, user_from, user_to, content) 
```

m_id 是主键 auto_incremented，c_id 是外键引用会话（c_id）

在第二种方法中，

```
conversations(user1, user2) 
```

(user1, user2) 是复合主键

```
messages(m_id, user_from, user_to, content) 
```

m_id 是主键，(user_from, user_to) 是外键引用会话(user1, user2)

我的问题是其中哪一个更好？第一，第二还是没有？我还没有在我的任何设计中使用复合外键，老实说我不知道​​结果会是什么。

*除了所有这些字段之外，还有读取日期、输入日期等字段。为简洁起见，我将跳过这些。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:22:09.053

Keys/index decision are heavily influenced by how you will query the data. I'm going to ignore insert performance, assuming that your query performance is much more important (which could be wrong assumption, only you know that). Also, based on your column names, I'm assuming message direction is important, as in within the same conversation, sometimes user X is in the messages user_from column, and sometimes is in the user_to column. In your comment to Laurence, you said you will first display a list of conversations that a user has taken part in, and then when they click on one, you will show the list of messages. So we probably aren't looking at a join, but instead a pair of queries since you will only get messages for one conversation at a time.

Query 1 will be a selection on conversations for user X, something like: select * from conversations where user1 = X or user2 = X

At this point, both options are equivalent. Now, the second query gets the messages for a given conversation.

option 1: select * from message where c_id = ? (c_id fetched in first query, and you associated it with each row in your listbox)

option 2: from the listbox click, you now know you want the messages for the conversation between users X and Y:

select * from messages where (user_from = X and user_to = Y) OR (user_from = Y and user_to = X)

If all my assumptions that lead me here are correct, then clearly option 1 is superior, as it's a very fast single valued primary key lookup. Otherwise, do a similar analysis of how you will query the data, which should point to the better solution.

(as an aside, in your messages table, instead of repeating the two users, just have a 0/1 bit column indicating the direction of the conversation, since the conversation table already has an order. e.g. if conversation table has cid 1, user X, user Y, then the messages table for cid 1 can have a bit set to zero when user x is the from user, and a bit set to 1 when user y is the from user)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:26:39.993

我个人的偏好是永远不要有复合 FK——如果具有复合 PK 的表与另一个表之间存在一对多关系，根据经验，我创建一个单列主键（自动递增、连接现有的列或唯一密钥生成的任何方法为您削减它）然后键入它。我认为复合 FK 在可视化两个表之间的关系时太混乱了。

YMMV

# machine-learning - 机器学习的应用

> ID：13462546
> 
> 赞同：8
> 
> 时间：2012-11-19T21:27:40.970
> 
> 标签：machine-learning, data-mining

我在这里看到了一些机器学习问题，所以我想我会发布一个相关问题：假设我有一个随机生成的食物列表，其中包括主菜、甜点和饮料。一个例子是鸡肉、芝士蛋糕、橙汁。用户将从 1-5 的等级对他们个人喜欢这种组合的程度进行排名。达到等级后，会出现另一组随机食物。

我的问题是，我将使用什么机器学习技术/算法来预测用户将从他们之前的所有数据中随机生成的集合中排名什么？从本质上讲，使用他们的意见来预测他们对新食物集的评价。任何可能有帮助的网站/书籍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T00:01:06.590

你已经陈述了一个回归问题，因为你试图预测一个连续的数值。

对于每个数据实例，您可以提取特征并关联一个值 (1-5)。特征可以是用餐期间是否存在一道菜（例如has_cheesecake、has_orange_juice），其中每个特征都是一个布尔值。假设有 N 种可能的菜肴；那么每顿饭都是一个数据实例（也称为特征向量），具有 N 个特征和一个关联值。下面是 N=12 的示例，其中最后（第 13）列是值。

```
0 0 0 1 1 0 0 0 1 0 0 0 5
1 0 0 1 0 1 0 0 0 0 0 0 3
0 0 0 0 0 0 1 1 0 0 0 1 4 
```

然后，您可以将其输入到 Weka 等机器学习程序中，它会为您创建一个回归模型。然后，当您想预测用户对新餐的排名时，您输入一个新向量，其中最后一列未知，如下所示：

```
0 0 1 0 0 0 1 0 0 0 0 1 ? 
```

软件会返回一个值给你，比如 3.9。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:54:31.810

你要问的基本上是[情绪检测](http://en.wikipedia.org/wiki/Sentiment_analysis)，它在预测用户对产品的态度等事情上变得非常流行。这是一篇[开创性的论文](http://www.cs.cornell.edu/home/llee/papers/pang-lee-stars.home.html)，取决于你的学术倾向。

您可以将其视为回归问题，但很多时候人们忽略了类之间存在序数关系的事实。如果您对餐点中的物品没有更多的信息而不是他们的名字，我不确定我是否希望您做得很好。如果可能，您应该寻找课程的特征表示，以提高您预测价值的能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:32:44.700

我会研究运筹学，因为通常它是一个最小化或最大化的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T23:36:45.240

由于您有一个分类列，它是优先级列，您可以尝试决策树。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T14:55:33.137

要选择最佳分类器，您应该估计问题的几个附加特征，例如属性值的大致数量（即，有多少主菜、甜点和饮料可供选择）以及大约有多少训练示例您想在做出预测之前提供吗？并非所有分类器都擅长处理稀疏数据。

如果您有大量训练示例（相对于属性值的数量），那么[决策树分类器](http://en.wikipedia.org/wiki/Decision_tree_learning)是一个不错的起点。决策树的一个好处是学习树的结构是直观的，并提供了对重要属性（和属性组合）的简单解释。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-25T09:43:19.387

有许多算法可以解决您的问题，其中一些可以是[决策树](http://scikit-learn.org/stable/modules/tree.html)、[神经网络](http://scikit-learn.org/dev/modules/neural_networks_supervised.html)或[支持向量机](http://scikit-learn.org/stable/modules/svm.html)。

但是，当您处理用户意见时，在某些情况下，您可能无法在所有产品中获得用户意见（他们可以跳过）。我不知道这是不是你的情况，也许你强迫他们对所有产品进行排名。但是，如果您让用户选择跳过，您最终会得到一些尚未标记的产品。在这种情况下，您可以使用协同过滤。即使在我解释的情况下，这种方法也能预测新用户的估计选择。

[你可以在Ng 的课程](http://www.ml-class.org/course/video/preview_list)中​​找到一个很好的教程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-11T20:00:06.660

如果您想根据用户的相似性（相同的用户相同的食物）创建一个模型，那么创建一个具有协同过滤的模型。（适用于每个用户的矢量） keras、scikit learn 和 pandas 等库非常有用且简单。如果您想编写自己的模型，那么矩阵分解可能会有所帮助。

# ios - MagicalRecord没有保存？

> ID：13462564
> 
> 赞同：0
> 
> 时间：2012-11-19T21:29:14.010
> 
> 标签：ios, magicalrecord

```
// Setup magical record
[MagicalRecord setupCoreDataStack];

NSLog(@"Groups at startup: %d", [Group findAll].count);

[Group createEntity];
[[NSManagedObjectContext defaultContext] save]; 
```

我已将这段代码放在我的 AppDelegate 中。每次启动应用程序时，我都会看到计数为 0。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:50:43.600

根据 MagicalRecord 的 github 页面..

> MagicalRecord 提供了一个后台保存队列，以便在后台从主线程执行保存所有数据。这意味着可能需要使用 MR_saveNestedContexts 而不是典型的 MR_save 方法，以便将更改一直保存到持久存储；

# asp.net - 如何根据下拉/单选按钮验证文本框

> ID：13462566
> 
> 赞同：0
> 
> 时间：2012-11-19T21:29:28.347
> 
> 标签：asp.net, html, visual-studio-2010, validation, drop-down-menu

我正在创建一个带有可选下拉菜单的页面。如果用户没有选择任何内容，则不需要文本框，如果选择，则需要。我怎么做？

（可选下拉）-> 相对 - 母亲/父亲/无

（如果用户选择“母亲或父亲”，则需要文本框）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:42:46.797

对于上述答案，不要忘记将 AutoPostback=True 属性分配给您的下拉列表，否则您将看不到效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:32:23.310

您可以默认禁用您的文本框。

然后当用户从下拉列表中选择时，启用文本框。

作为验证的一部分，您可以检查文本框是否被禁用，如果没有，则验证它。

启用的文本框也可以作为现在需要输入的用户的视觉参考。

它们实际上并不需要相互关联。

# api - 如何在 API Store 上发布服务？

> ID：13462568
> 
> 赞同：0
> 
> 时间：2012-11-19T21:29:36.037
> 
> 标签：api, wsdl, registry, wso2, wso2-am

首先我下载了​​下面的zip文件，

*   WSO2 API 管理器 1.2.0 和
*   WSO2 治理注册表 4.5.2。

我的目标是

1.  创建一个基于 WSDL 和许多 XSD 的服务，然后
2.  在漂亮的 API Store 用户界面上发布此服务。

首先，我通过使用“管理控制台”（`https://localhost:9443/carbon/admin/index.jsp?loginStatus=true`）在“API 管理器”中导入 WSDL 创建了一个服务。然后我没有找到任何直接的方法将其发布为 API，因为我没有找到将生命周期附加到服务的方法，如[产品文档 "Publish Service as API"](http://docs.wso2.org/wiki/display/Governance452/API+Manager)中所述。

我应该怎么做？我是否需要配置“API Manager”以使用[本文](http://wso2.org/library/tutorials/2010/04/sharing-registry-space-across-multiple-product-instances)讨论的“Governance Registry”数据库，还是有更简单的方法？

我只是在玩原型设计，所以如果有简单的解决方案，我会很感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:21:51.200

[您可以从此处](http://docs.wso2.org/wiki/display/Governance452/Managing+Services#ManagingServices-ServiceVersioning)找到如何将生命周期附加到 G-Reg 中创建的服务。在您推广服务直到它进入生产状态后，您可以将该服务发布为 API。然后您可以从 api-publisher 应用程序中查看您创建的 API。

但是请注意，当您尝试从发布者应用程序将创建的 API 状态更改为“已发布”时，如您提到的[文档](http://docs.wso2.org/wiki/display/Governance452/API+Manager)中所述，它包含称为[APIMANAGER-834](https://wso2.org/jira/browse/APIMANAGER-834)的已知错误。我们目前正在努力解决此问题。

# javascript - jQuery 验证插件，IE7 “SCRIPT3: Member not found”

> ID：13462569
> 
> 赞同：15
> 
> 时间：2012-11-19T21:29:40.507
> 
> 标签：javascript, jquery, jquery-validate, internet-explorer-7, compatibility-mode

我有以下内容：

```
<html>
    <head>
    </head>
    <body>
        <div>
            <form method="post">
                <div id="questions">    
                    <label for="question-6">Name of Course:</label>
                    <input type="text" name="name_of_course[response]" value="" id="question-6" class="required">
                    <label class="control-label" for="reporting-year">Reporting Year: </label>
                    <select name="reporting_year" id="reporting-year">
                        <option value="-1" selected="selected">Select option...</option>
                        <option value="4">2013-2014</option>
                        <option value="1">2012-2013</option>
                        <option value="2">2011-2012</option>
                        <option value="3">2010-2011</option>
                    </select>
                </div>
                <input type="submit" name="submit" value="Save Entry" class="btn">
            </form>
        </div>
        <script src="//code.jquery.com/jquery.js"></script>
        <script src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js"></script>
        <script>
            $(function(){
                jQuery.validator.addMethod("notEqual", function(value, element, param) {
                        return this.optional(element) || value !== param;
                        }, "Please select an option");
                $('form').validate({
                    rules:{
                        'reporting_year': {
                            notEqual: "-1"
                        }
                    }
                });
            });
        </script>
    </body>
</html> 
```

每个人最喜欢的浏览器 IE7（确实兼容 IE10）在控制台中报告以下错误：

> SCRIPT3：未找到成员。
> 
> jquery.js，第 2525 行字符 4

当然 IE8 及更高版本工作正常，但我的客户使用的是 IE7。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-09T00:20:30.293

看起来这是 IE10 在兼容模式下的一个错误，因为据报道它在 IE7 中工作。但是这里发布了一些 jquery 解决方法：http: [//bugs.jquery.com/ticket/12577](http://bugs.jquery.com/ticket/12577)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T08:16:01.120

我发现导致问题的是 jquery.validate.js 的第 35 行

```
this.attr('novalidate', 'novalidate'); 
```

注释掉这一行，问题就解决了。您也可以用 ( current browser <= ie7) 包装它，以便仅当 ie7 是浏览器时才明确避免此行。

**更新** 要注释掉仅适用于 ie7 的行，您可以使用以下代码：

```
var ie = (function () {
        var undef,
    v = 3,
    div = document.createElement('div'),
    all = div.getElementsByTagName('i');
        while (
    div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
    all[0]
);
        return v > 4 ? v : undef;
    } ()); 
```

进而：

```
 if (!ie || ie > 7) {
      this.attr('novalidate', 'novalidate');
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-28T05:28:05.030

来自 jQuery 验证的你好问题

[https://github.com/jzaefferer/jquery-validation/issues/845](https://github.com/jzaefferer/jquery-validation/issues/845)

将 jquery Validation 插件的第 33 行更改为：

```
this.attr( "novalidate", "novalidate" ); 
```

到

```
this.prop( "novalidate", "novalidate" ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T20:45:16.323

我打算对 Xaris 的答案添加评论，但想在完整答案中提供一些额外的信息。我将 jQuery.validate.js 中的行更改为：

```
if (!$.browser.msie || $.browser.version > 7) {
    this.attr("novalidate", "novalidate");
} 
```

但是，$.browser 在 1.9 版中从 jQuery 中删除，所以我不得不添加 jQuery Migrate 插件（这是一个官方的 jQuery 插件）。

如果您在 .NET 中使用 nuget 包并使用捆绑功能，请记住您可以手动更新 jQuery.validate.js，但 jQuery.validate.min.js 中仍然存在问题。我不得不删除缩小版本，以便捆绑不会在生产中使用它。编辑 nuget 提供的文件是一种不好的做法，因为我的更改将在更新包时被覆盖，但这是目前解决此问题的最佳方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-26T18:36:14.560

**我的类似问题**

`SCRIPT3: Member not found`由于定义了 X-UA-Compatible，我在 IE11 中遇到了同样的问题：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

**我的解决方案**

就我而言，这些天来，应用程序要求是 IE8+。

因此，要解决此问题，只需删除元标记或将其更改为：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

**OP案例的解决方案（或任何类似问题）**

根据兼容性要求，它可能会使用我使用的相同解决方案。

# c# - 如何模拟 MVC 控制器的一部分

> ID：13462571
> 
> 赞同：0
> 
> 时间：2012-11-19T21:29:47.953
> 
> 标签：c#, asp.net-mvc, unit-testing, moq

我有一个 Mvc3 控制器的模拟（使用 Moq）设置，例如。

```
[TestMethod]
public void Step_One_Post_Should_Redirect_To_Step_Two()
{
    // this test checks that when I submit a type parameter of StepOneModel and
    // the next button was clicked Request["next"] ,  then goto Step Two
} 
```

唯一停止此测试运行的是从控制器调用的 Save 方法，该方法失败，因为在此测试上下文中的 Session 中未正确设置值。真的我想从这个单元测试中省略这个数据库调用。

基本上我如何从控制器操作中欺骗/模拟 Save(model) 调用？

```
[HttpPost]
public ActionResult Index(IStepViewModel step)
{
    // after model is deserialized
    if (!string.IsNullOrEmpty(Request["next"]))
    {
        Save(model)  <-- the bit blocking me
    }

    return View(model)  <-- the bit I want to assert against
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:32:43.350

我建议使用优秀的库[MvcContrib-test helpers](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)

它为您提供了开箱即用的模拟会话。

**一般概念**

> 新的 MVC.Net 框架的主要优点之一是易于测试。虽然这通常是正确的，但在许多领域测试框架变得困难。TestHelper 通过提供一个控制器工厂来提供帮助，该工厂创建具有正确初始化的内部数据成员的控制器。这些包括：
> 
> *   HttpContext
> *   HttpRequest
> *   HttpResponse
> *   **HttpSession** <-----------
> *   形式
> *   临时数据
> *   请求参数
> *   应用路径
> *   路径信息

# java - 从 Java API 启动 AWS 弹性 mapreduce 作业流。我的 Hive 脚本应该去哪里？

> ID：13462572
> 
> 赞同：4
> 
> 时间：2012-11-19T21:29:50.837
> 
> 标签：java, amazon-s3, amazon-web-services, hive, elastic-map-reduce

我一直在使用 Amazon Elastic MapReduce 和 Hive 开发数据处理应用程序。现在我的 Hive 脚本在我 SSH 并使用交互模式作业流运行它们时工作，我正在尝试使用 AWS Java API 创建一个作业流。

使用[http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/calling-emr-with-java-sdk.html](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/calling-emr-with-java-sdk.html)作为我的起点，我创建了一个这样的步骤配置

```
StepConfig runScript = new StepConfig().withName("Prepare Admin")
.withActionOnFailure("TERMINATE_JOB_FLOW")
.withHadoopJarStep(oStepFactory.newRunHiveScriptStep(scriptPath, args)); 
```

我假设/希望 scriptPath 可以是我的 Hive 脚本的 s3 url，例如：s3://bucketName/hive-script。我发现的唯一文档讨论了使用主节点文件系统中的脚本。但是，如果主节点是为此作业流程而启动的实例，我不明白如何将任何脚本（Hive 或其他）放到文件系统上。

当我尝试我的想法时（将 s3 位置传递给 stepFactory 方法），runScript 步骤失败。

我已经通过 AWS 控制台检查了日志。标准输出日志以

2012-11-19 19:28:33 GMT - 错误执行 cmd 错误：/home/hadoop/.versions/hive-0.7.1/bin/hive '-f' 's3://anet-emr/scripts/admin .q''-d rawDataLocation=s3://anet-emr/raw -d year=2010 -d cycle=1'

stderr 日志以

java.lang.NoSuchMethodError: org.apache.commons.cli.CommandLine.getOptionProperties(Ljava/lang/String;)Ljava/util/Properties; 在 org.apache.hadoop.hive.cli.OptionsProcessor.process_stage1(OptionsProcessor.java:115) 在 org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:399) 在 sun.reflect.NativeMethodAccessorImpl.invoke0 （本机方法）在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597 ) 在 org.apache.hadoop.util.ToolRunner 的 org.apache.hadoop.mapred.JobShell.run(JobShell.java:54) 的 org.apache.hadoop.util.RunJar.main(RunJar.java:155)。在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79) 在 org.apache 运行（ToolRunner.java:65）。

控制器日志有

2012-11-19T19:28:27.406Z 信息执行 /usr/lib/jvm/java-6-sun/bin/java -cp /home/hadoop/conf:/usr/lib/jvm/java-6-sun/ lib/tools.jar:/home/hadoop:/home/hadoop/hadoop-0.18-core.jar:/home/hadoop/hadoop-0.18-tools.jar:/home/hadoop/lib/ *:/home/hadoop/ lib/jetty-ext/*-Xmx1000m -Dhadoop.log.dir=/mnt/var/log/hadoop/steps/3 -Dhadoop.log.file=syslog -Dhadoop.home.dir=/home/hadoop -Dhadoop.id.str=hadoop -Dhadoop .root.logger=INFO,DRFA -Djava.io.tmpdir=/mnt/var/lib/hadoop/steps/3/tmp -Djava.library.path=/home/hadoop/lib/native/Linux-i386-32 org.apache.hadoop.mapred.JobShell /mnt/var/lib/hadoop/steps/3/script-runner.jar s3://us-east-1.elasticmapreduce/libs/hive/hive-script --base-路径 s3://us-east-1.elasticmapreduce/libs/hive/ --hive-versions latest --run-hive-script --args -f s3://anet-emr/scripts/admin.q -d rawDataLocation=s3://anet-emr/raw -d year=2010 -d cycle=1 2012-11-19T19:28:34.143Z INFO 执行以 ret val 255 结束 2012-11-19T19:28:34.143Z WARN 步骤因错误的 retval 而失败

问题似乎在于我通过 Amazon 的 API 传递给 Hive 对 Apache CLI 库的调用的参数...我尝试使用“-d arg1=val1 -d arg2=val2”传递单个字符串，我我尝试过“-d,arg1=val1 等..”，并且尝试过各种分割成字符串数组的方法 - 即 {“-d”、“arg1=val1”...}。找不到任何有关执行此操作的正确方法的文档！

任何帮助表示赞赏，谢谢科尔曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T15:39:40.183

嗨，这段代码对我有用：

```
String accessKey = "";
String secretKey = "";
 AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);
   AmazonElasticMapReduceClient emr = new AmazonElasticMapReduceClient(credentials);

   StepFactory stepFactory = new StepFactory();

   StepConfig enabledebugging = new StepConfig()
       .withName("Enable debugging")
       .withActionOnFailure("TERMINATE_JOB_FLOW")
       .withHadoopJarStep(stepFactory.newEnableDebuggingStep());

   StepConfig installHive = new StepConfig()
       .withName("Install Hive")
       .withActionOnFailure("TERMINATE_JOB_FLOW")
       .withHadoopJarStep(stepFactory.newInstallHiveStep());

   StepConfig runScript = new StepConfig()
        .withName("Run Script")
        .withActionOnFailure("TERMINATE_JOB_FLOW")
        .withHadoopJarStep(stepFactory.newRunHiveScriptStep("s3://dummy/dummy.hive"));

   RunJobFlowRequest request = new RunJobFlowRequest()
       .withName("Hive Interactive")
       .withSteps(enabledebugging, installHive, runScript)
       .withLogUri("s3://dummy/")
       .withInstances(new JobFlowInstancesConfig()
           .withHadoopVersion("0.20.205")
           .withInstanceCount(1)
           .withKeepJobFlowAliveWhenNoSteps(false)
           .withMasterInstanceType("m1.small")
           .withSlaveInstanceType("m1.small"));

   RunJobFlowResult result = emr.runJobFlow(request); 
```

希望这可以帮助 ：）

# java - 对混合数据列表进行排序？

> ID：13462574
> 
> 赞同：1
> 
> 时间：2012-11-19T21:29:57.450
> 
> 标签：java, algorithm, list, sorting, collections

我今天有一个面试，我被要求对一个包含字符串和整数的列表进行排序。就像这样

输入：

汽车 巴士 4 -5 苹果 3 -1

输出：

苹果巴士 -5 -1 汽车 3 4

起初我被卡住了，因为我从未见过这样的事情，但我试图做的是创建 2 个子列表，一个包含字符串，另一个包含 int。我这样做了，但时间已经到了，我无法完成.

我也被困在我试图循环遍历列表并检查它的字符串是否比将元素添加到子列表 1 以及它的 int 是否比将元素添加到子列表 2 的部分。我被困在这里，因为我不知道如何检查是否元素是字符串或整数。

如果我在错误的部分或其他地方发布了这个问题，也很抱歉。请随时将此问题移至正确的部分。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:56:27.200

我会使用两个列表，对它们进行排序，但您必须记住原始排序，a`LinkedList<Boolean>`足以完成该任务。

```
public static String sortString(String input) {
    Scanner s = new Scanner(input);

    LinkedList<String> strings = new LinkedList<String>();
    LinkedList<Integer> integers = new LinkedList<Integer>();
    LinkedList<Boolean> types = new LinkedList<Boolean>();

    while(s.hasNext()) {
        String nextToken = s.next();
        try {
            int nextInteger = Integer.parseInt(nextToken);
            integers.add(nextInteger);
            types.add(true);
        } catch(NumberFormatException e) {
            strings.add(nextToken);
            types.add(false);
        }
    }

    Collections.sort(strings);
    Collections.sort(integers);

    StringBuilder builder = new StringBuilder();

    Iterator<Boolean> iter = types.iterator();

    while(iter.hasNext()) {
        boolean currType = iter.next();
        if (currType) {
            builder.append(integers.remove(0));
        } else {
            builder.append(strings.remove(0));
        }
        if (iter.hasNext()) builder.append(" ");
    }

    return builder.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:57:10.947

假设`-1`和`-5`是`int`一个简单的解决方案：

```
public String sortStringWithInts(String input){  
        String[] parts = input.split("\\s");  
        List<String> strings = new ArrayList<String>();  
        List<Integer> ints = new ArrayList<Integer>();  
        for(String part:parts){  
            if(isNumber(part)){                 
                 ints.add(Integer.valueOf(part));               
            }  
            else{  
                strings.add(part);  
            }  
        }  
        Collections.sort(strings);  
        Collections.sort(ints);  
        return createResult(strings, ints, parts);           
    }  

    private String createResult(List<String> strings, List<Integer> ints, String[] parts) {  
        StringBuilder result = new StringBuilder();       
        for(String part:parts){  
            if(isNumber(part)){  
                result.append(ints.remove(0)).append(" ");              
            }  
            else{  
                result.append(strings.remove(0)).append(" ");  
            }  
        }  

        return result.toString();  
    }  

    private boolean isNumber(String part) {  
        try{  
            Integer.valueOf(part);  
            return true;  
        }  
        catch(Exception e){  
            return false;  
        }  
    } 
```

**注意：**输出将是：`apple bus -5 -1 car 3 4`因为`-5 < -1`和不像你的 OP

# javascript - 使用 Firefox 处理事件

> ID：13462577
> 
> 赞同：0
> 
> 时间：2012-11-19T21:30:03.203
> 
> 标签：javascript, events, firefox

> **可能重复：**
> [window.event.srcElement 不适用于 Firefox？](https://stackoverflow.com/questions/3209654/window-event-srcelement-doesnt-work-for-firefox)

我制作了一个可以在 Chrome 上正常工作的网页，但在 Firefox 上却不行。这是代码：

```
function set_email_params(e){
if(!e)
    e=window.Event;   //window.event appeared to be "undefined" so I had to use Event
alert(e.target);        //shows "undefined"
alert(e.target.src);
if(e.target.src.indexOf("unchecked")>-1)
    e.target.src='images/small_radio_checked.png';
else
    e.target.src='images/small_radio_unchecked.png';
} 
```

以下是该函数的调用方式：

```
 <img onclick="set_email_params()" src="images/small_radio_unchecked.png" style="float:left;"/> 
```

此代码在 Chrome 上完美运行。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:40:40.067

您没有`event`在处理程序中传递对象。

```
onclick="set_email_params(event)"
   <!---------------------^^^^^---------> 
```

* * *

在符合标准的浏览器中，事件处理程序最终看起来像这样：

```
function(event) {
    set_email_params(event);
} 
```

在较旧的 IE 中，它看起来更像这样：

```
function() {
    set_email_params(event);
} 
```

所以无论哪种方式，事件对象都会被传递。

# javascript - 用javascript迭代geojson对象

> ID：13462580
> 
> 赞同：2
> 
> 时间：2012-11-19T21:30:12.930
> 
> 标签：javascript, json

我正在研究一个geodjango项目，需要使用javascript迭代来自服务器的geojson响应，这样我就可以将它传递到谷歌地图上。我只需要从 json 迭代返回的坐标“25.92”和“-80,...”。我尝试了各种脚本都没有成功，希望有人能给我一个快速的答案。

```
{ "crs" : null,
  "features" : [ { "geometry" : { "coordinates" : [ 25.924292000000001,
                -80.124313999999998
              ],
            "type" : "Point"
          },
        "id" : 1,
        "properties" : {  },
        "type" : "Feature"
      } ],
  "type" : "FeatureCollection"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:36:55.123

我会做这样的事情：

```
var latLons = obj.features.map(function (o) {
    return {lat: o.geometry.coordinates[0], lon: o.geometry.coordinates[1]};
}); 
```

如果您可以有多个 latLong，这是有道理的。这将给出一个对象数组，其中定义了您所期望的 lat 和 lon。如果你只关心第一个，那就做`latLons[0]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:33:04.560

其中 'obj' 是表示此对象的变量：

像这样访问

```
obj.features[0].geometry.coordinates; 
```

像这样分配

```
var lat = obj.features[0].geometry.coordinates[0],
     lon = obj.features[0].geometry.coordinates[1]; 
```

# knockout.js - 使用映射插件和 KoGrid 淘汰父子延迟加载

> ID：13462581
> 
> 赞同：2
> 
> 时间：2012-11-19T21:30:13.973
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, kogrid

**设置：** 在我的视图模型中，我有一个由 JSON 构建的可观察项目数组（它只有名称和 ID），称为“项目”。我也有一个名为“selecteditem”的选定项目（它具有项目的完整详细信息）的可观察值。当您从“项目”列表中单击一个项目时，它应该填充“selecteditem”，这将通过另一个 JSON 回复用完整的详细信息填充“itemdetails”，允许您编辑它们并保存更改。

**进度：** 单击网格工作正常，如果我单击供应商 14，它会获取正确的供应商 ID 并将其作为 /api/vendor/14 传递给查询字符串。

**问题：** 如何使用第二个 ajax 调用（单击其中一个项目时触发）更新我的视图模型的 selecteditem 部分。

KoGrid HTML：

```
 <div class="gridContainer">
                <div data-bind="koGrid: { 
                    data: items, 
                    autogenerateColumns: false,
                    isMultiSelect: false,
                    displaySelectionCheckbox: false,
                    selectedItem: selecteditem,
                    columnDefs: [
                        { field: 'VendorID', displayName: 'Vendor ID' },
                        { field: 'Name', displayName: 'Vendor Name' }
                    ]}">
                </div>
            </div> 
```

子 HTML（现在只有几个字段用于测试）：

```
 <div data-bind="foreach: itemdetails">
                <span data-bind="text: BusinessContactName"></span><br />
                <span data-bind="text: BusinessContactTitle"></span>
            </div> 
```

Javascript：

```
 <script type="text/javascript">
        $(document).ready(function () {
            var API_URL = "/api/vendor/";

            $.ajax({
                type: 'GET',
                url: API_URL,
                dataType: 'json',
                success: function (data) {
                    /* View Model */
                    window.viewModel = {
                        items: ko.mapping.fromJS(data),
                        selecteditem: ko.observable(),
                        itemdetails: ko.observable()
                    };

                    /* Get Selected Item */
                    window.viewModel.selecteditem.subscribe(function (newValue) {
                        if (newValue) {
                            var param = newValue.VendorID();
                            $.ajax({
                                type: 'GET',
                                url: API_URL + param,
                                dataType: 'json',
                                success: function (data2) {
                                    //What to do here??
                                    window.viewModel.itemdetails = ko.mapping.fromJS(data2);
                                    //This shows the correct value
                                    alert(window.viewModel.itemdetails.BusinessContactName());
                                }
                            });
                        }
                    });

                    ko.applyBindings(viewModel);
                }
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:00:08.083

看起来您的 viewModels itemdetails 的设置不正确。

而不是 window.viewModel.itemdetails = ko.mapping.fromJS(data2);

使用 window.viewModel.itemdetails(ko.mapping.fromJS(data2));

# php - 如何从 google/yahoo 图片搜索等 (html-simple-dom) 获取更多链接

> ID：13462585
> 
> 赞同：1
> 
> 时间：2012-11-19T21:30:34.293
> 
> 标签：php, google-search

我可以得到搜索结果页面的源代码。所以我的问题是关于如何获得更多。对于 google，它只显示我得到的源代码中的前 20 个图像结果，对于 Yahoo，它大约是 50 个。因为在这两种情况下，真实的人都需要向下滚动页面才能看到更多搜索结果。

问题：脚本是否可以为我“向下滚动”以便获得更多结果？

我正在使用的代码：

```
require_once('simple_html_dom.php');
$url = "https://www.google.com/search?tbm=isch&q=cool+image";
$html = file_get_html($url);
foreach($html->find('img') as $element) {

    $image_url = $element->src; 

    echo $image_url, "<br />";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:48:27.647

我会回答我自己的问题。- -|||

谷歌实际上保留了旧版本。要使用该版本，首先搜索一些内容，然后滚动到底部并单击“切换到基本版本”。

现在每页只显示 20 张图片，并且 url 包含页面参数。

因为它每页显示 20 张图片，所以第二页的 url 有参数：

```
start=20 
```

第三页将是

```
start=40 
```

这个参数： sout=1 需要在 url 中告诉 google 你想要基本版本。

总而言之，最简单的带有页码的谷歌图片搜索 url 将是：

```
$url = "https://www.google.com/search?tbm=isch&sout=1&start=" . ($pageNum -1)*20\. "&q="  . $key_word ; 
```

# objective-c - 生成objective-c代码

> ID：13462586
> 
> 赞同：0
> 
> 时间：2012-11-19T21:30:37.233
> 
> 标签：objective-c, xml, parsing, generated-code

我需要根据我的实用程序应用程序（Mac OS X 应用程序）中遵循的一些步骤生成 Objective-c 代码。会触发“生成代码”的东西......

有没有人做过类似的事情？

如果是这样，你会那么好心地指出我正确的开始方向吗？

我希望那里可能有类似 xml 到 Objective-c 解析器的东西，其中 xml 元素和属性可能代表 Objective-c 中的对象和属性，但似乎找不到类似的东西。

谢谢

# python - 围绕未指定的任何字符拆分字符串

> ID：13462587
> 
> 赞同：4
> 
> 时间：2012-11-19T21:30:37.913
> 
> 标签：python, regex, string

我希望能够将一个字符串拆分成一个列表，围绕任何不是数字或点的东西。目前 split 方法只提供了一种对 split 进行肯定匹配的方法，正则表达式是在这种情况下采用的最佳途径吗？

例如，给定字符串`"10.23, 10.13.21; 10.1 10.5 and 10.23.32"` This 应该返回列表`['10.23', '10.13.21', '10.1', '10.5', '10.23.32']`

因此，我相信在这种情况下使用的最佳正则表达式将是...... `[\d\.]+`

这是处理此类案件的最佳方式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T21:33:24.487

如果您正在考虑`re.findall`：您可以使用`re.split`正则表达式的反转版本：

```
In [1]: import re

In [2]: s = "10.23, 10.13.21; 10.1 10.5 and 10.23.32"

In [3]: re.split(r'[^\d\.]+', s)
Out[3]: ['10.23', '10.13.21', '10.1', '10.5', '10.23.32'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:36:21.477

如果您想要正则表达式以外的解决方案，您可以使用`str.translate`并将除空格以外的所有内容翻译`'.0123456789'`成空格并调用`split()`

```
In [69]: mystr
Out[69]: '10.23, 10.13.21; 10.1 10.5 and 10.23.32'

In [70]: mystr.translate(' '*46 + '. ' + '0123456789' + ' '*198).split()
Out[70]: ['10.23', '10.13.21', '10.1', '10.5', '10.23.32'] 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T22:04:38.753

@inspectorG4dget 提出的一种可以说是可读性更好的形式：

```
>>> import string
>>> s = '10.23, 10.13.21; 10.1 10.5 and 10.23.32'
>>> ''.join(c if c in set(string.digits + '.') else ' ' for c in s).split()
['10.23', '10.13.21', '10.1', '10.5', '10.23.32'] 
```

通过这种方式，您可以避免使用正则表达式，这通常是一个好主意，因为您可以很容易地做到这一点。

# coffeescript - 在咖啡脚本中返回命名函数

> ID：13462589
> 
> 赞同：0
> 
> 时间：2012-11-19T21:30:38.710
> 
> 标签：coffeescript

我有以下 javascript：

```
Function.prototype.debounce = function (threshold, execAsap) {

    var func = this, timeout;

    return function debounced () {
       //body
    }
}; 
```

如何在咖啡脚本中返回这样的命名函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:14:46.203

您不能在 Coffeescript 中命名函数。原因在[常见问题解答](https://github.com/jashkenas/coffee-script/wiki/FAQ)中给出- grep 表示“有没有办法命名函数，用于反射和递归？” 如果您确实需要嵌入名称，可以使用反引号嵌入原始 Javascript。

# jquery - 优化 jQuery 动画以获得更好的移动性能？

> ID：13462590
> 
> 赞同：0
> 
> 时间：2012-11-19T21:30:44.113
> 
> 标签：jquery, performance, animation, optimization, mobile

首先，请原谅我可能过度膨胀的 JS 函数。我的脚本中还有一些代码行可能会被删除。也就是说，我仍然习惯于 JS/jQuery，因此欢迎对我的脚本提出任何批评、建议或更正。

也就是说，我已经建立了一个脚本，可以通过摄影师作品集网站中的部分内容制作动画。该脚本似乎在台式计算机上运行良好，但移动性能充其量是笨拙的。所以，我在这里寻求有关如何优化我的脚本或添加一些代码来帮助平滑动画的帮助。

继承人的行动代码：http: [//jsbin.com/icereg/2/edit](http://jsbin.com/icereg/2/edit)

编辑：更新的 JSbin 项目： [http ://jsbin.com/icereg/3/edit](http://jsbin.com/icereg/3/edit)

以下是麻烦的动画功能：

```
// Bounce Top

function bounce_top() {
    $isAnimating = 1;
    $content.animate({top: '+=44'}, 200, 'easeInOutQuart',
        function () {
            $content.animate({top: '-=44'}, 200, 'easeInOutQuart');
            $isAnimating = 0;
        });
} // end bounce_top()

// Bounce Right

function bounce_right() {
    $isAnimating = 1;
    $content.animate({left: '-=44'}, 200, 'easeInOutQuart',
        function () {
            $content.animate({left: '+=44'}, 200, 'easeInOutQuart');
            $isAnimating = 0;
        });
} // end bounce_right()

// Bounce Bottom

function bounce_btm() {
    $isAnimating = 1;
    $content.animate({top: '-=44'}, 200, 'easeInOutQuart',
        function () {
            $content.animate({top: '+=44'}, 200, 'easeInOutQuart');
            $isAnimating = 0;
        });
} // end bounce_btm()

// Bounce Left

function bounce_left() {
    $isAnimating = 1;
    $content.animate({left: '+=44'}, 200, 'easeInOutQuart',
        function () {
            $content.animate({left: '-=44'}, 200, 'easeInOutQuart');
            $isAnimating = 0;
        });
} // end bounce_left()

    // Scroll Content

function scroll_content() {

    $isAnimating = 1;

    if ($curr_section === ($total_section - 1) && ($event_target === 'down' || ($event_target === 'scroll' && $mouse_delta < 0))) {
        // we're at the bottom;  - 1 because of included 0 section; 
        bounce_btm();

    } else if ($curr_section === 0 && ($event_target === 'up' || ($event_target === 'scroll' && $mouse_delta >= 0))) {
        // we're already at the top
        bounce_top();

    } else if ($event_target === 'down' || $event_target === 'up' || $event_target === 'scroll' || $event_target === 'nav') {
        // now either UP or DOWN inputs (mouse wheel, keyboad, nav links)

        $nav_work_links.removeClass('active_nav');
        $('#right_arrow').add('#left_arrow').remove();

        if ($event_target === 'down' || ($event_target === 'scroll' && $mouse_delta < 0)) { // down or scroll down
            $curr_section = $curr_section + 1;
            $vertslidePos = '-=675';

        } else if ($event_target === 'up' || ($event_target === 'scroll' && $mouse_delta >= 0)) { // up or scroll up
            $curr_section = $curr_section - 1;
            $vertslidePos = '+=675';

        } else if ($event_target === 'nav') {
            // now nav click inputs
            $curr_section = $event_target_eq;
            $vertslidePos = '-' + ($curr_section * 675);
        }
        if ($curr_page > 1) {
            $content.animate({marginLeft: 0}, 450, 'easeInOutQuart'); // end .animate() method
        }
        $content.animate({top: $vertslidePos}, 450, 'easeInOutQuart',
            function () {
                if ($('.nav_work_items').eq($curr_section).index() === 0) {
                    $nav_work_links.removeClass('active_nav');
                } else {
                    $('.nav_work_items').eq($curr_section - 1).find('.nav_work_links').addClass('active_nav');
                }
                $('.active_nav').before($left_arrow).after($right_arrow);
                $curr_page = 1;
                window.location.hash = '#work' + $curr_section;
                $isAnimating = 0;
            }); // end .animate() method    

    } else if ($event_target === 'left' || $event_target === 'right') {
        // now either RIGHT or LEFT inputs
        $right_arrow = $('#right_arrow');
        $left_arrow = $('#left_arrow');
        $active_nav = $('.active_nav');
        $total_pages = $('#work' + $curr_section).children('.workcontent').length;

        if ($curr_page === $total_pages && $event_target === 'right') {
            bounce_right();

        } else if ($curr_page === 1 && $event_target === 'left') {
            bounce_left();

        } else {

            if ($event_target === 'right') {
                $curr_page = $curr_page + 1;
                $horzslidePos = '-=600px';

            } else if ($event_target === 'left') {
                $curr_page = $curr_page - 1;
                $horzslidePos = '+=600px';
            }

            $content.animate({marginLeft: $horzslidePos}, 450, 'easeInOutQuart',
                function () {
                    $isAnimating = 0;
                }); // end .animate() method
        }
    }

} // end scroll_content(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T16:56:31.087

我曾经是并且仍然是 JS n00b，然后我的代码过于臃肿。一些简单的整合和重新制定确实有帮助。但是，现在也有这个 JS 插件来帮助平滑 JS 动画：

[速度.js](http://julian.com/research/velocity/)

.....对于那些将来可能登陆这里的人来说，这里有更好的东西：

[GSAP](http://greensock.com/gsap)

# php - 搜索和取消设置 JSON 对象

> ID：13462594
> 
> 赞同：1
> 
> 时间：2012-11-19T21:31:06.440
> 
> 标签：php, json, object, unset

我正在尝试在我的 json 文件中搜索一个 id 并使用 php 删除该对象。

详细说明：我使用 jQuery post 将 id 发布到我的 delete.php 并在我的 delete.php 文件中搜索 id 并取消设置它。但是由于某种原因，如果我取消设置第一个对象，它会在我的 json 中添加一个数字并破坏它（我仍然可以添加更多对象但会破坏第一个对象）。

// delete.php 文件如下所示：

```
if(isset($_POST['deleteData'])){
    $data = $_POST['deleteData'];
    $dataJSON = json_decode(file_get_contents('datas.json'), true);  
    for($i = 0, $dataJSONLength = count($dataJSON); $i < $dataJSONLength; $i++){
      if($dataJSON[$i][data][0][id] == $data){
        unset($dataJSON[$i]);
        echo 'deleted';// needed for callback for feedback
      }
    }
    file_put_contents('datas.json', json_encode($dataJSON));
  } 
```

// add.php 是：

```
if(isset($_POST['addData'])){
  $dataJSON = json_decode(file_get_contents('datas.json'), true);
  $dataJSON[] = $_POST['addData'];
  file_put_contents('datas.json', json_encode($dataJSON));
} 
```

我的 datas.json 文件是相当嵌套的，所以我将发布问题所在：

```
[{"user":[{"browser":[{" // this is what it looks like when I add

{"1":{"user":[{"browser":[{" // this is what happens when I delete the first object. Notice "1" 
```

如果我不删除第一个对象，那么在删除第一个对象之前一切正常。有什么建议么？谢谢。（如果需要，我可以发布整个 json 文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:39:53.640

PHP 将您的数组变成一个对象可能是因为 unset 给您一个关联数组而不是索引数组。[您应该调用 array_splice 而不是 unset ，或者在根据本文](https://stackoverflow.com/questions/369602/how-to-delete-an-element-from-an-array-in-php)中找到的想法取消设置您的值之后调用 array_values 。

```
// your for loop:
for (...) {
    unset($dataJSON[$i]);
    ...
}
// After your for loop with all necessary values removed then call array_values to normalize the array.
$dataJSON = array_values($dataJSON); 
```

# jquery - 在 jQuery ajax 回调函数中访问数组值

> ID：13462595
> 
> 赞同：2
> 
> 时间：2012-11-19T21:31:08.063
> 
> 标签：jquery

这实际上是一个简短的问题，关于获取由 PHP 脚本回显并由 Javascript 接收/处理的数组的值。

问题的开头应该提供足够的信息供某人回答；我的各种失败的实验构成了这个冗长问题的其余部分。

通过 jQuery AJAX 回调接收到一个数组，但我未能成功获取这些值。

这是ajax调用：

```
$.ajax({
    type: "POST",
    url: "ajax/ax_all_ajax_fns.php",
    data: 'request=edit_timecard_entry&staff_id='+staff_id+'&tid='+tid,
    success: function(data){
        alert(data);
    }
} 
```

下面是 ax_all_ajax_fns.php 发出的代码：

```
$staff_id = $_POST['staff_id'];
$t_id = $_POST['tid'];
$rCard = mysql_query("SELECT `staff_id`, `date`, `project_id`, `project_num`, `task_desc`, `hours` FROM `timecards` WHERE `t_id`='$t_id'");
$aCard = mysql_fetch_assoc($rCard);
print_r($aCard);
//  echo $aCard; 
```

当然，我不希望信息 print_r'd，我希望它得到回应。print_r 用于证明 PHP 脚本发出了正确的数据，并在成功函数的 alert() 框中成功回显。因此，正在返回正确的数据，并且（如果格式正确）它是可见的。以这种方式返回的数据在 alert() 弹出窗口中如下所示：

```
Array
(
    [staff_id] => 51
    [date] => 2012-10-18
    [project_id] => 0
    [project_num => 49
    [task_desk] => This is a task
    [hours] => 3.30
) 
```

但是，当我使用 echo 输出 $aCard 数组，然后尝试在 ajax 调用的成功函数中将其分解时，我无法弄清楚如何获取这些值。我的尝试始终返回“未定义”的值。

在成功功能中，代替`alert(data);`，我已经尝试过：

```
var tce_staff_id = data['staff_id'];
alert(tce_staff_id); 
```

和这个：

```
var tce_staff_id = data.staff_id;
alert(tce_staff_id); 
```

我错过了什么？

更新：

感谢 Martin S. 提供有关 json_encode() PHP 指令的信息。我修改了ajax脚本如下：

```
echo json_encode($aCard); 
```

我现在从警报（数据）中得到这个结果；在成功函数中：

```
{"staff_id":"51","date":"2012-10-18","project_id":"0","project_num":"49","task_desc":"This is a task","hours":"3.30"} 
```

但是，以下返回“未定义”：

```
alert(data.staff_id);
alert(data[0].staff_id);
var test = data.staff_id;
alert(test); 
```

谁能看到我错过了什么？上面的所有代码都紧跟在`alert(data)`ajax 函数的成功回调之后。`alert(data)`确实可以工作并显示所需的数据，如上所述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T23:10:05.853

好的，所以 Martin S 有正确的答案。我希望他能留下来获得功劳。他的回答只漏掉了一个元素：

阿贾克斯输出：

```
echo json_encode($aCard); 
```

JAVASCRIPT成功回调函数：

```
var obj = jQuery.parseJSON(data);
alert(obj.date);
alert(obj.staff_id); 
```

瞧！日期和 staff_id 出现在警告框中。

谢谢，马丁，让我走上了正轨。

# java - 列表、原始类型和性能

> ID：13462600
> 
> 赞同：3
> 
> 时间：2012-11-19T21:31:18.693
> 
> 标签：java, arrays, performance, list, autoboxing

我对自动装箱和性能很好奇，因为我在我的应用程序中做了很多对速度敏感的数学运算，所以我进行了一些测试......

```
public static void main(String[] args) {
    // Some initialization so I know it's not involved
    ArrayList<Integer> list = new ArrayList<Integer>();
    list.add(0);
    int[] regArray = new int[1];
    long total = 0;

    // This one uses an array and primitive type
    long start = System.currentTimeMillis();
    for (int i = 0; i < 10000000; i++) {
        regArray[0] = i + 10;
        if (regArray[0] % 1000 == 0) total += regArray[0];
    }
    System.out.println("Runtime in millis: " + (System.currentTimeMillis() - start));
    System.out.println(total);

    // This one autoboxes, but still uses the Object type because it's a list
    total = 0;
    start = System.currentTimeMillis();
    for (int i = 0; i < 10000000; i++) {
        list.set(0, i + 10);
        if (list.get(0) % 1000 == 0) total += list.get(0);
    }
    System.out.println("Runtime in millis: " + (System.currentTimeMillis() - start));
    System.out.println(total);

    // This one doesn't autobox
    total = 0;
    start = System.currentTimeMillis();
    for (int i = 0; i < 10000000; i++) {
        list.set(0, new Integer(i + 10));
        if (list.get(0).intValue() % 1000 == 0) total += list.get(0).intValue();
    }
    System.out.println("Runtime in millis: " + (System.currentTimeMillis() - start));
    System.out.println(total);
} 
```

这是一个示例输出：

```
Runtime in millis: 78
50005000000
Runtime in millis: 250
50005000000
Runtime in millis: 250
50005000000 
```

这似乎表明我应该远离`List<>`数学，速度敏感的应用程序和子类。你同意吗，stackoverflow？

编辑：我的实际用例是我需要存储几百个`int`s 和`float`s ，它们会经常且很大程度上不可预测地变化（我说主要是因为它们会保持在一个狭窄的范围内，但我不知道他们会在那个范围内做什么范围窄），我需要对这些数字进行数学运算时需要毫秒级的响应时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:55:17.083

微基准测试很难！我重写了您的基准以使用[caliper](http://code.google.com/p/caliper/)：

```
import com.google.caliper.Runner;
import com.google.caliper.SimpleBenchmark;

import java.util.ArrayList;

public class ListsBenchmark extends SimpleBenchmark {

    private final ArrayList<Integer> list = new ArrayList<Integer>();
    int[] regArray = new int[1];
    long total;

    @Override
    protected void setUp() throws Exception {
        list.add(0);
        total = 0;
    }

    public long timeArrayAndPrimitiveType(int reps) {
        for (int i = 0; i < reps; i++) {
            regArray[0] = i + 10;
            if (regArray[0] % 1000 == 0)
                total += regArray[0];
        }
        return total;
    }

    public long timeListWithAutoboxing(int reps) {
        for (int i = 0; i < reps; i++) {
            list.set(0, i + 10);
            if (list.get(0) % 1000 == 0)
                total += list.get(0);
        }
        return total;
    }

    public long timeNoAutoboxing(int reps) {
        for (int i = 0; i < reps; i++) {
            list.set(0, new Integer(i + 10));
            if (list.get(0).intValue() % 1000 == 0)
                total += list.get(0).intValue();
        }
        return total;
    }

    public static void main(String[] args) {
        Runner.main(ListsBenchmark.class, new String[]{});
    }

} 
```

我没有修改你的原始代码。我发现的是：

*   阵列快 3 倍左右
*   创建新`Integer`的稍微快一点（！），也许缓存有一些价格，或者它只是我的架构（32 位 Ubuntu，4 核和 3 GiB 内存笔记本电脑）

在图表上（随意运行它！）：

![卡尺](../Images/7639e35d09b9373e26e2fec0c0aa5e4f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:48:14.320

如果您有预定数量的整数，那么将它们存储在一个数组中（假设它们需要存储并且不能流式传输！）通常比 a 快`java.util.ArrayList`，是的。

但是，在许多情况下，您可能有不同的数据大小，因此动态可调整大小的集合变得非常有用 - 替代方法通常是编写您自己的实现`ArrayList`！

幸运的是，有[许多第三方库](https://stackoverflow.com/questions/3307622/java-primitive-collections-library)基于原始类型（int 等）而不是对象（Integer 等）实现 List。你可以看看这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:39:01.997

编写基准是一项艰巨的任务，而您的基准也不是一个好的基准，至少有以下原因：

*   在 main 方法中做所有事情，而不让 Hotspot 进来，JIT 编译你的代码会导致结果错误
*   使用`new Integer()`而不是`Integer.valueOf()`不允许您使用整数缓存
*   值和操作是不现实的。大多数时候，值接近 0，而不是在 10,000,000 范围内

基元和数组通常比对象和集合更快，但是如果不测量您的实际代码，在现实条件下，很难判断使用基元和数组获得的收益是显着还是完全可以忽略不计。大多数情况下，IO 操作会损失性能。

# javascript - 观察 dom 中元素的偏移量，当不同的元素发生变化时？

> ID：13462601
> 
> 赞同：3
> 
> 时间：2012-11-19T21:31:21.093
> 
> 标签：javascript, jquery, html, dom

我正在尝试找到一种方法来监视/观察 DOM 元素上的偏移量/宽度/高度以捕捉任何变化。但是，如果另一个元素移动了被监视的元素或调整了它的大小，我还需要捕捉对元素的任何更改。例如，被监视对象上方的 DOM 元素增长，并占用更多空间，导致被监视元素偏移量移动。

[演示我需要观看/监控的示例](http://bit.ly/Salg1k)

我已经使用计时器实现了它，但是回调/观察者会好得多。

我找到了几种方法来观察特定元素的变化，但这将涉及监视整个 DOM 的变化，这并不理想。

显示如何监视/监视特定项目更改的解决方案将无济于事，因为它们依赖于该特定项目的属性/ CSS 更改。不起作用的示例： [jQuery CSS 属性监控](http://www.west-wind.com/weblog/posts/2008/Sep/12/jQuery-CSS-Property-Monitoring-Plugin-updated) [另一个监视工具](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)

我认为 MutationObserver 可能会工作，但我还没有让它工作。

如果有人有想法，请赐教！

2013 年 10 月 14 日更新：请参阅我自己的答案以获得解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T21:15:32.097

我必须建立自己的图书馆，但忘了用图书馆回答这个问题。

来源[github.com/leifcr/jquery-csswatch](https://github.com/leifcr/jquery-csswatch)和示例：[leifcr.github.io/jquery-csswatch/examples/](http://leifcr.github.io/jquery-csswatch/examples/)

# php - 使 PDO 连接变量可在整个站点访问

> ID：13462606
> 
> 赞同：3
> 
> 时间：2012-11-19T21:31:48.830
> 
> 标签：php, mysql, sql, oop

我开始将所有旧的 mysql_ 函数转换为 PDO 并且在掌握这个概念时遇到了一些麻烦。我希望能够在我的函数页面中访问我的 PDO 连接变量，以便可以根据需要调用它，而无需在每个函数的开头制作连接脚本。我会尽量解释我的设置。

这是我的 init.php 页面，它加载了所有必需的 php 页面。此页面包含在我的每个页面的顶部，但不包含功能页面。

**初始化文件**

```
<?php
session_start();

error_reporting(E_All);

require 'database/connect.php';
require 'functions/users.php';
require 'functions/general.php';
require 'functions/trainer.php';
?> 
```

这是我的连接文件，它打开了我的数据库连接。是的，我也有一个`mysql_connect`开放的，因为在将所有其他功能转换为 PDO 时，我无法禁用所有其他功能。

**连接.php**

```
<?php 

$connect_error = 'Sorry there is a problem with the database connection.';
mysql_connect('Localhost', 'customn7', 'I<3deadlifts!') or die($connect_error);
mysql_select_db('customn7_cm') or die($connect_error) or die($connect_error);
?>

<?php   

//PDO database connect
$config['db'] = array(
    'host'      => 'Localhost',
    'username'  => 'customn7',
    'password'  => '********',
    'dbname'    => 'customn7_cm'
);

try {
$db = new PDO('mysql:host=' .$config['db']['host']. ';dbname=' .$config['db']['dbname'], $config['db']['username'], $config['db']['password']);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->exec("SET CHARACTER SET utf8");
} 

catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
}

?> 
```

这是我`functions/trainer.php`编写函数的地方：

**培训师.php**

```
function exist_client_to_class($cd){
list($user_id, $class_id, $first_name, $last_name, $nickname) = explode('|', $cd);

try{

$stmt = $db->prepare('INSERT INTO clients 
(`user_id`, class_id, first_name, last_name, nickname, date)
VALUES (:user_id, :class_id, :first_name, :last_name, :nickname, CURDATE())
');

$stmt->execute(array(
        ':user_id' => $user_id, 
        ':class_id' => $class_id, 
        ':first_name' => $first_name,
        ':last_name' => $last_name,
        ':nickname' => $nickname)
        );
}

catch(PDOException $e) {
    echo 'Error: ' . $e->getMessage();
}

} 
```

截至目前，我无法`$db`从我的 trainers.php 页面访问我的变量。有人可以帮我弄这个吗？

**更新**

下面是调用该函数的代码：

```
// Post Selected name to current class.
if (isset($_POST['exist_to_class'])){
if (empty($_POST['client_data']) === true){
    $errors [] = 'You much select a client to be added to the class.';
} else {
    if (isset($_POST['client_data']) && !empty($_POST['client_data']));
    foreach ($_POST['client_data'] as $cd){
     exist_client_to_class($db, $cd);
     header('Location: view_class.php?class_id='.$class_id.' ');
    } // foreach $cd
} // else

} //isset 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T21:43:22.693

首先，我强烈建议您不要听任何人告诉您将其设置为全局。

* * *

使用参数将连接对象传递给函数：

```
exist_client_to_class(PDO $pdo, $cd) { //... 
```

这是所谓的依赖注入的简化版本。

更健壮的版本包括将您的函数包装到类中（并从这些类中实例化对象），并将 PDO 对象（或某种工厂对象）传递给该对象的构造函数。然后它将在该对象的所有方法（函数）中“全局”可用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T21:45:22.963

如果可以帮助，请不要使用 global。

当您使用 init.php 文件进行引导时，您可以依赖注入连接。

更改**了 connect.php**

```
<?php 
//PDO database connect
$config['db'] = array(
'host'      => 'Localhost',
'username'  => 'customn7',
'password'  => '********',
'dbname'    => 'customn7_cm'
);

try {
    $db = new PDO('mysql:host=' .$config['db']['host']. ';dbname=' .$config['db']['dbname'], $config['db']['username'], $config['db']['password']);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $db->exec("SET CHARACTER SET utf8");
} catch(PDOException $e) {
    echo 'Sorry there is a problem with the database connection :' . $e->getMessage();
} 
```

**培训师.php**

```
class trainer_model{
    function __construct(PDO $db){
        $this->db = $db;
    }

    function exist_client_to_class($cd){
        list($user_id, $class_id, $first_name, $last_name, $nickname) = explode('|', $cd);

        try{
            $stmt = $db->prepare('INSERT INTO clients
        (`user_id`, class_id, first_name, last_name, nickname, date)
        VALUES (:user_id, :class_id, :first_name, :last_name, :nickname, CURDATE())');

            $stmt->execute(array(
            ':user_id' => $user_id,
            ':class_id' => $class_id,
            ':first_name' => $first_name,
            ':last_name' => $last_name,
            ':nickname' => $nickname)
            );
        }
        catch(PDOException $e) {
            echo 'Error: ' . $e->getMessage();
        }
    }
}

$trainer = new trainer_model($db);
//Then use as an object method
$trainer->exist_client_to_class($cd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T15:36:17.627

您不能使用 inifile 和其中包含静态变量的函数吗？像这样：

```
function pdo_connect() {
  static $pdo;
  $dsn="";
  $opt="";`enter code here`
  $charset = 'utf8';

  if(!isset($pdo)) {
    $config = parse_ini_file(_INIFILE_);
  }

  $dsn = "mysql:host=".$config['db_server'].";dbname=".$config['db_name'].";charset=".$charset;
  $opt = [
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
    PDO::ATTR_EMULATE_PREPARES   => false,
  ];

  $pdo = new PDO($dsn, $config['db_username'], $config['db_password'], $opt);   

  if($pdo === false) { 
    return "PDO connection ERROR:".PHP_EOL.";
  }

  return $pdo;

}//pdo 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-19T21:35:27.143

尝试制作一个全局文件 php，您可以将其要求/包含到所有需要数据库连接的文件中......

然后在你的函数中使用全局 $db

函数exist_client_to_class($cd){

全局$db；

}

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-19T21:59:44.273

您的`trainers.php`脚本实际上确实可以访问`$db`. 例如，如果您添加`var_dump($db)`为 的第一行`trainers.php`，您会看到您可以访问它。

您遇到的问题是其中的功能`trainers.php`无法访问`$db`该功能的范围内。确实有几种方法可以处理这个问题。

最简单（也是最骇人听闻的 IMO）是添加该行

```
global $db; 
```

作为每个函数的第一行，您希望提供对`$db`全局范围内变量的访问。

另一种方法是简单地将 DB 对象作为参数传递给每个需要访问它的函数，如下所示（依赖注入）：

```
function exist_client_to_class($cd, $db){
    // your function logic
} 
```

并像这样调用函数：

```
exist_client_to_class($cd, $db); 
```

如果您围绕您的 PDO 对象构建一个单例类并从中获取 PDO 对象，那么最终（在我看来是最好的）方法可以做到这一点，保证只会创建一个实例。这可能看起来像这样

```
class db {

    protected static $pdo_instance = NULL;

    protected static $dsn = 'mysql:dbname=somedb;host=127.0.0.1'; // your DSN

    protected static $user = 'username';

    protected static $password = 'password';

    protected function __construct() {
        try {
            self::$pdo_instance = new PDO (self::$dsn, self::$user, self::$password);
        } catch (PDOException $e) {
            return 'PDO Connection failed: ' . $e->getMessage();
        }

        return true;
    }

    public static function get_pdo_instance() {
        if (isset(self::$pdo_instance) && self::$pdo_instance instanceof PDO) {
           return self::$pdo_instance;
        } else {
           $result = self::__construct();
           if (true === $result) {
                return self::$pdo_instance;
           } else {
               throw new Exception($result); // or however you want to handle the connection error
           }        
    }
} 
```

要访问，而不是`$db`到处使用，只需执行

```
$db = db::get_pdo_instance(); 
```

在你的职能范围内。

或者你甚至可以直接调用 lile

```
$stmt = db::get_PDO_instance()->prepare('YOUR SQL HERE'); 
```

您甚至可以考虑像这样混合使用单例和依赖注入：

```
function exist_client_to_class($cd, $db){
    // your function logic
}

exist_client_to_class($cd, db::get_PDO_instance()); 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-11-19T21:41:29.887

创建一个单例数据库类：

```
class Database
{
    protected static $instance=false;
    public static function getInstance()
    {
        if(self::$instance===false) self::$instance=new Database();
        return $instance;
    }
    protected function __construct()
    {
        //Connect here
    }
    //Whatever other functions you need
} 
```

使用它：

```
$db=Database::getInstance();
$connection=$db->getConnection();... 
```

# salesforce - 如何在 Salesforce 中进行潜在客户历史报告？

> ID：13462607
> 
> 赞同：2
> 
> 时间：2012-11-19T21:31:56.697
> 
> 标签：salesforce, force.com

我想测量代表打开新潜在客户所需的时间，但无法弄清楚如何使用潜在客户历史对象中日期/时间戳的时间组件运行报告。我可以看到我执行简单的“显示潜在客户历史记录”但不知道如何针对该字段运行报告的时间。

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T00:57:46.513

我不认为你可以轻易地报告这个：/ 不过我很想被证明是错误的。

当你只有一把锤子时，一切看起来都像钉子，嗯？

您可以在报告中获得开业日期，但不是真正的“开业和潜在客户创建之间的秒数”。我已经检查过了，似乎您甚至无法通过创建一个将潜在客户标记为已打开的工作流来作弊。

![样品铅历史报告](../Images/182cc989d421220a5f77bc4a8e4ca691.png)

* * *

如果您可以将类似报告的详细信息导出到 Excel 并在那里构建公式，我会推荐这条路线。如果它真的必须在 Salesforce 中达到 100% - 你曾经使用过 Apex 和 Visualforce 吗？您可以在潜在客户上编写一个触发器，以检测潜在客户的开放并将时间差写入某个自定义字段。

或者，您可以创建一个 VF 页面，将与此类似的代码作为数据源。对于我的数据，它输出

> 用户 005... 平均需要 160917287 秒才能打开 2 个潜在客户。

（我知道这是一个巨大的数字，它们来自 2007 年）。

```
Map<Id, Long> timeCounter = new Map<Id, Long>(); // Counter how much time has passed between lead creation and opening of the record for each lead owner
Map<Id, Integer> leadCounter = new Map<Id, Integer>(); // counter how many were actually opened

for(LeadHistory lh : [SELECT CreatedDate, OldValue, NewValue, Lead.Name, Lead.OwnerId, Lead.CreatedDate
    FROM LeadHistory
    WHERE Field = 'IsUnreadByOwner' AND Lead.isUnreadByOwner = false
    ORDER BY Lead.OwnerId
    LIMIT 1000]){

    Long timeInSeconds = (lh.CreatedDate.getTime() - lh.Lead.CreatedDate.getTime()) / 1000;
    Long totalTimeCount = timeCounter.get(lh.Lead.OwnerId);
    Integer totalLeadCount = leadCounter.get(lh.Lead.OwnerId);
    if(totalTimeCount == null){
        totalTimeCount = timeInSeconds;
        totalLeadCount = 1;
    } else {
        totalTimeCount += timeInSeconds;
        totalLeadCount += 1;
    }
    timeCounter.put(lh.Lead.OwnerId, totalTimeCount);
    leadCounter.put(lh.Lead.OwnerId, totalLeadCount);
}

for(Id userId : timeCounter.keyset()){
    Decimal avg = timeCounter.get(userId) / leadCounter.get(userId);
    System.debug('On average it took ' + avg + ' seconds to for user ' + userId + ' to open ' + leadCounter.get(userId) + ' leads.');
} 
```

# c# - 如何以排序方式显示 int 的数据绑定集合

> ID：13462609
> 
> 赞同：4
> 
> 时间：2012-11-19T21:32:15.387
> 
> 标签：c#, wpf, data-binding, itemscontrol

我有一个非常小的整数集合，我在 custom 中显示`ItemsControl`。我不担心性能，因为集合太小了。我希望这些项目按升序显示，但不知道这样做的最佳方式。我已经成功地使用 a`CollectionViewSource`和 a`SortDescription`对更复杂的对象进行排序，但它似乎需要一个属性名称来排序。我意识到我可以保持底层集合排序或将我的整数包装在引用类型中以使用`SortDescription`，但两者似乎都过分了。我错过了什么吗？

我想做这样的事情`MyCollection`，类型在哪里`ObservableCollection<int>`

```
<Grid.Resources>
    <CollectionViewSource x:Key={sortedView} Source={Binding MyCollection}>
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription Direction="Ascending" PropertyName="???" />
        </CollectionViewSource.SortDescriptions>
    <CollectionViewSource>
<Grid.Resources>

...

<ItemsControl ItemsSource={StaticResource sortedView} /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:39:37.767

只需`.`用作属性名称：

```
<scm:SortDescription Direction="Ascending" PropertyName="." /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:33:48.877

您可以对源集合 ( `MyCollection`) 进行排序，而不是在 XAML 中对其进行排序。

诚然，没有内置的方法来对 进行排序`ObservableCollection<T>`，但实现起来并不难。这是一个 QuickSort 实现，您可以将其用作任何实现的类的扩展方法`IList<T>`：

```
static class QuickSortExtensions
{
    private static void CheckArgumentNull<T>(this T arg, string paramName) where T : class
    {
        if (arg == null)
            throw new ArgumentNullException(paramName);
    }

    public static void CheckArgumentOutOfRange<T>(
        this T value,
        string paramName,
        T min,
        T max)
        where T : IComparable<T>
    {
        if (value.CompareTo(min) < 0 || value.CompareTo(max) > 0)
            throw new ArgumentOutOfRangeException(paramName);
    }

    public static void QuickSort<T>(this IList<T> list)
    {
        Comparison<T> comparison = Comparer<T>.Default.Compare;
        list.QuickSort(comparison);
    }

    public static void QuickSort<T>(
        this IList<T> list,
        IComparer<T> comparer)
    {
        comparer = comparer ?? Comparer<T>.Default;
        list.QuickSort(comparer.Compare);
    }

    public static void QuickSort<T>(
        this IList<T> list,
        Comparison<T> comparison)
    {
        list.CheckArgumentNull("list");
        comparison.CheckArgumentNull("comparison");
        QuickSort(list, 0, list.Count - 1, comparison);
    }

    private static void QuickSort<T>(IList<T> list, int left, int right, Comparison<T> comparison)
    {
        if (right > left)
        {
            int pivot = left;
            QuickSortPartition(list, left, right, ref pivot, comparison);
            QuickSort(list, left, pivot - 1, comparison);
            QuickSort(list, pivot + 1, right, comparison);
        }
    }

    private static void QuickSortPartition<T>(IList<T> list, int left, int right, ref int pivot, Comparison<T> comparison)
    {
        T pivotValue = list[pivot];
        list.Swap(pivot, right);
        int tmpIndex = left;
        for (int i = left; i < right; i++)
        {
            if (comparison(list[i], pivotValue) <= 0)
            {
                list.Swap(i, tmpIndex);
                tmpIndex++;
            }
        }
        list.Swap(tmpIndex, right);
        pivot = tmpIndex;
    }

    private static void Swap<T>(
        this IList<T> list,
        int index1,
        int index2)
    {
        list.CheckArgumentNull("list");
        index1.CheckArgumentOutOfRange("index1", 0, list.Count - 1);
        index1.CheckArgumentOutOfRange("index2", 0, list.Count - 1);

        T tmp = list[index1];
        list[index1] = list[index2];
        list[index2] = tmp;
    }

} 
```

为了防止在排序过程中随着集合项目的移动而刷新视图，您可以使用`DeferRefresh`：

```
var view = CollectionViewSource.GetDefaultView(MyCollection);
using (view.DeferRefresh())
{
    MyCollection.QuickSort();
} 
```

# c# - 如何通过 C# TestFrameworks 使用来自 DI 框架的 AOP？（不适用于被测项目）

> ID：13462612
> 
> 赞同：4
> 
> 时间：2012-11-19T21:32:22.013
> 
> 标签：c#, dependency-injection, nunit, aop, mbunit

我提前为糟糕的标题道歉 - 欢迎提出建议！

我一直在阅读有关 DI 和 AOP 的内容，并且我认为我掌握了基础知识；至少对于添加日志记录的规范示例。

我想将此应用于我们在 NUnit 中创建的测试用例，例如能够为所有测试用例方法和它们调用的任何“辅助方法”自动添加进入/退出日志记录。（而且我不依赖于 NUnit——如果在另一个框架中更容易，请告诉我。）

注意——这与被测对象无关；我想将这些技术应用于测试用例本身。

很清楚如何使用[PostSharp](http://www.sharpcrafters.com/)做到这一点——这是他们的[第一个例子。](http://www.sharpcrafters.com/solutions/logging)但是我不想仅仅为了这个实验将他们的许可处理添加到我们的项目中。

我发现的所有其他关于 AOP for C# 的参考都是基于 IoC 容器实现（如 CastleWindsor、Unity、Spring.Net 等）提供的（动态）拦截器......在这种情况下它们都有一个共同的问题：你需要一个一段设置代码，为要添加拦截器的对象创建代理。（我最初确实认为这段代码也必须创建一个 IoC 容器，但我发现我错了。）

但是我看不到这个设置代码将用于 nUnit 测试用例。

我提出的选项及其问题：

1.  让 testfixture 类构造函数为其自身创建一个代理。由于递归（消费者要求事物，事物试图将代理返回到事物，代理试图创建事物......从阅读[这个 StackOverflow 问题](https://stackoverflow.com/questions/11876008/self-proxying-constructor-with-castle)）
2.  滚动我自己的基于反射的魔法（这对我来说是一项艰巨的任务）
    1.  让构造函数包装 testfixture 类中的所有方法并返回这个“包装”对象（不确定构造函数是否可以这样做）
    2.  在 testfixture 上使用静态构造函数来实现这一点（假设您可以动态地将类的方法包装到位。）
    3.  使用模块 cctor（通过[Einar Egilsson 的 InjectModuleInitializer](http://einaregilsson.com/module-initializers-in-csharp/)）在模块级别做一些事情，并使用日志记录包装所有类中的所有方法。
3.  最简单的：某种用于实例化测试用例的工厂（不是测试的参数），我可以从中使用其中一个 IoC 代理生成器
    1.  对于 nUnit：我能找到的唯一方法是创建一个[自定义 AddIn](http://www.simple-talk.com/content/print.aspx?article=484)。优势 - 可能不会破坏与 ReSharper 的集成。缺点 - 部署到所有开发机器，尤其是在更新 NUnit 时。是否有其他方法可以为 nUnit 执行此操作？
    2.  对于 MbUnit：看起来[它将测试用例视为第一类值](http://bugsquash.blogspot.ca/2012/05/first-class-tests-in-mbunit.html)，这是直截了当的。优点：易于部署给所有开发人员。缺点：测试不会出现在 Resharper 中。旁注：[如何处理 setup 和 teardown](http://bugsquash.blogspot.ca/2012/05/f-dsl-for-mbunit.html)。

我是否遗漏了我的选择和结论中的任何内容？

有没有我错过的更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:20:55.783

面向方面的编程不仅仅是使用动态代理（拦截）或编译后代码编织（PostSharp）。AOP 主要是关于添加横切关注点。使用动态代理是添加横切关注点的一种方式。代码编织是执行此操作的另一种方式。但是，还有另一种更好的 IMO 方式来添加横切关注点。

与其使用动态代理或代码编织，不如让应用程序的设计引领您。当您使用正确的抽象设计应用程序时，使用装饰器添加横切关注点会很容易。[您可以在此处](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[此处](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)找到使用适当抽象设计的系统示例。

这些文章描述了如何使用装饰器定义横切关注点。当您以这种方式设计系统时，您可以将横切关注点的实现与其余代码分开测试。当使用正确的抽象时，这将很容易。

当你这样做时，你不需要在你的单元测试中做任何特别的事情。无需代码编织，无需在测试中运行 DI 容器来为您构建对象。您可以测试您的应用程序逻辑，而不会妨碍任何横切关注点。您可以单独测试每个小部分，并将所有部分放在应用程序的[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-07T11:15:37.277

这是一个使用[Puresharp Framework](https://github.com/Virtuoze/Puresharp)的示例（通过在测试项目上安装[IPuresharp](https://www.nuget.org/packages/IPuresharp/) + [Puresharp nugets。）](https://www.nuget.org/packages/Puresharp/)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Threading.Tasks;
using NUnit.Framework;
using Puresharp;

namespace TEST
{
    /// <summary>
    /// Class to test with NUnit
    /// </summary>
    public class Calculator
    {
        public int Add(int a, int b)
        {
            return a + b;
        }
    }

    /// <summary>
    /// Test class for calculator with a simple test.
    /// </summary>
    [TestFixture]
    public class CalculatorTest
    {
        /// <summary>
        /// Static constructor (class constructor) to attach aspect to test method.
        /// </summary>
        static CalculatorTest()
        {
            //Instantiate my custom aspect.
            var myBasicAspect = new MuCustomAspect();

            //Attach my custom aspect to my custom pointcut
            myBasicAspect.Weave<MyCustomPointcut>();
        }

        [Test]
        public void ShouldAddTwoNumbers()
        {
            var _calculator = new Calculator();
            int _result = _calculator.Add(2, 8);
            Assert.That(_result, Is.EqualTo(10));
        }
    }

    /// <summary>
    /// Pointcut to identify methods group to weave (here test methods of CalculatorTest).
    /// </summary>
    public class MyCustomPointcut : Pointcut
    {
        override public bool Match(MethodBase method)
        {
            return method.DeclaringType == typeof(CalculatorTest) && method.GetCustomAttributes(typeof(TestAttribute), true).Any();
        }
    }

    /// <summary>
    /// Défine an aspect.
    /// </summary>
    public class MuCustomAspect : Aspect
    {
        public override IEnumerable<Advisor> Manage(MethodBase method)
        {
            //Aspect will advice method on boundary using MyCustomAdvice.
            yield return Advice.For(method).Around(() => new MyCustomAdvice());
        }
    }

    /// <summary>
    /// Define an advice.
    /// </summary>
    public class MyCustomAdvice : IAdvice
    {
        public MyCustomAdvice()
        {
        }

        public void Instance<T>(T value)
        {
        }

        public void Argument<T>(ref T value)
        {
        }

        public void Begin()
        {
        }

        public void Await(MethodInfo method, Task task)
        {
        }

        public void Await<T>(MethodInfo method, Task<T> task)
        {
        }

        public void Continue()
        {
        }

        public void Return()
        {
        }

        public void Return<T>(ref T value)
        {
        }

        public void Throw(ref Exception exception)
        {
        }

        public void Throw<T>(ref Exception exception, ref T value)
        {
        }

        public void Dispose()
        {
        }
    }
} 
```

# javascript - WinJS listview itemtemplate 导航到另一个页面

> ID：13462613
> 
> 赞同：0
> 
> 时间：2012-11-19T21:32:23.890
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

我有以下我无法弄清楚的问题。我有一个带有列表视图的 pageControl。该列表有一个项目模板设置，我正在从 js 脚本绑定列表。当我单击该项目以导航到另一个 pageControl 时，我添加了一个事件处理程序。事件启动，但是当我执行 WinJS.Navigation.Navigate 时，第二页没有加载。

**第 1 页 html：**

```
 <div class="mediumListIconTextTemplate" data-win-control="WinJS.Binding.Template">
        <div style="width: 100%; height: 100%;">
            <!-- Displays the "title" field. -->
            <h4 data-win-bind="innerText: name"></h4>

            <!-- Displays the "picture" field. -->
            <img src="#" style="width: 100%; height: 100%;" data-win-bind="alt: name; src: imageDefault" />
        </div>
    </div>

    <div class="collection fragment">
        <header aria-label="Header content" role="banner">
            <button class="win-backbutton" aria-label="Back" disabled type="button"></button>
            <h1 class="titlearea win-type-ellipsis">
                <span class="pagetitle">Welcome to collection </span>
            </h1>
        </header>
        <section aria-label="Main content" role="main">

            <div id="basicListView"
                data-win-control="WinJS.UI.ListView"
                data-win-options="{itemDataSource : Data.items.dataSource, 
                    itemTemplate: select('.mediumListIconTextTemplate'),
                    layout: {type: WinJS.UI.GridLayout, maxRows:1}}">
            </div>

        </section>
    </div> 
```

**第 1 页 JS：**

```
WinJS.UI.Pages.define("/pages/guitarCollection/guitarCollection.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            var list = document.getElementById("basicListView");
            list.itemDataSource = Data.items.dataSource;
            list.addEventListener("iteminvoked", this._itemInvoked);

            WinJS.UI.processAll();
        },

        unload: function () {
            // TODO: Respond to navigations away from this page.
        },

        updateLayout: function (element, viewState, lastViewState) {
            /// <param name="element" domElement="true" />

            // TODO: Respond to changes in viewState.
        },

        _itemInvoked: function (args) {
            var name = Data.items.getAt(args.detail.itemIndex).name;
            WinJS.Navigation.navigate("/pages/page2/page2.html", { name: name});
        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:05:04.197

有一种通用技术应该用于这种类型的导航：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj663505.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj663505.aspx)

1.  创建链接处理函数
2.  拦截 href 的点击事件以使用导航框架，而不是像普通的 href 那样导航。将此添加到您的 home.js

```
 linkClickEventHandler: function (eventInfo) {
            eventInfo.preventDefault();
            var link = eventInfo.target;
            WinJS.Navigation.navigate(link.href);
        } 

```

然后在您的就绪事件中添加以下代码：

```
 // This function is called whenever a user navigates to this page. It
 // populates the page elements with the app's data.
 ready: function (element, options) {
    WinJS.Utilities.query("a").listen("click", this.linkClickEventHandler, false);
    ..
    .. 

```

href 点击将被拦截并使用导航框架 - 这假设您在 default.js 中有一个导航控件，否则此导航将无法按预期工作（因为导航控件挂钩到这些事件中）所以请确保您的默认值.html 你有一个导航控件，例如：

```
 <div id="contenthost" data-win-control="Application.PageControlNavigator" data-win-options="{home: '/pages/home/home.html'}" ></div> 

```

# jquery - SVG Html 代码到 SVG 图像

> ID：13462615
> 
> 赞同：1
> 
> 时间：2012-11-19T21:32:40.613
> 
> 标签：jquery, html, svg, inkscape

我的新问题包括以下内容：我对 svg 不太了解，我刚刚下载了 inkscape，目的是将 html+javascript svg 代码 [我知道这听起来很奇怪，但我有一个 svg 地图] 到 svg 图像。

为了更清楚：我在 svg 代码中有我的国家的地区地图，我需要做一些修改以在地区内添加首都。

我怎样才能做到这一点？

这是我用过[的地图。](http://ctrl-d.ro/wp-content/uploads/2011/10/index.html)

PS：我提到我发布的链接与我无关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T00:29:23.537

只需在 Chrome 中打开 Web Inspector（或在 Firefox 中打开 Firebug）并选择 SVG，复制它，将其粘贴到文本编辑器中并使用 SVG 扩展名（例如 map.svg）保存。然后在 Inkscape 中打开它。![在此处输入图像描述](../Images/582ff1c683509ca9f8915f4f78107345.png)

# c# - 如何正确使用 Foreach 循环来处理数据库中的行？

> ID：13462619
> 
> 赞同：0
> 
> 时间：2012-11-19T21:32:48.517
> 
> 标签：c#, sql-server-ce

好的，所以我尝试遍历我放置在这个 foreach 循环中的一些方法：

```
foreach (DataGridViewRow row in gv.Rows)
                {

                } 
```

现在我的数据库有 19 行，所以我希望它循环的次数与我的行数一样多。但是当我逐步调试时，.Rows 的值为 38，这意味着无论出于何种原因它正在读取 38 行。我在这里想念什么？为什么行号是 38 而不是 19？如果有帮助，我还将 SQL CE 与 Windows 窗体应用程序一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:33:28.697

这`foreach`是正确的，不会对`gv.Rows`. 问题出在其他地方，可能与您的查询有关。`foreach`自动从索引 0 循环到结构的末尾（假设您不使用`break`过早退出循环）。

鉴于 38/2 = 19 我会说你很可能将每一行添加两次。

# sql - 这个关系代数正确吗？

> ID：13462623
> 
> 赞同：0
> 
> 时间：2012-11-19T21:32:57.597
> 
> 标签：sql, relational-algebra

我明天有一个数据库测试，希望有人可以为我确认这个答案。假设我有一个这样的模式：

```
branch (branch_name, branch_city, assets)
customer (customer_name, customer_street, customer_city)
account (account_number, branch_name, balance)
loan (loan_number, branch_name, amount)
depositor (customer_name, account_number)
borrower (customer_name, loan_number) 
```

我很好奇的问题是：“找出所有贷款超过 5000 英镑但没有账户余额超过 500 英镑的客户的姓名。”

原始代码：

```
π customer_name
  (σ amount > 5,000 ^ balance < 500 
    (borrower ⋈ loan ⋈ depositor ⋈ account)) 
```

编辑：看过 Erwin Smout 的建议后，我将代码修改为以下内容：

```
π customer_name
  (σ amount > 5,000 (borrower ⋈ loan))
-
π customer_name
  (σ balance < 500 (depositor ⋈ account)) 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:50:07.143

不，这是不正确的。短语“但 [没有] 帐户 ...”表示您应该在某处使用关系差异运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:51:39.400

我只会回答我自己的问题，因为我现在知道它是正确的。感谢所有帮助过的人：

```
π customer_name (σ amount > 5,000 (borrower ⋈ loan))    
-
π customer_name (σ balance < 500 (depositor ⋈ account)) 
```

# android - 在示例项目中，R.java 无法解析为变量

> ID：13462626
> 
> 赞同：1
> 
> 时间：2012-11-19T21:33:03.857
> 
> 标签：android, eclipse

我只是尝试在 Eclipse 的项目工作区中导入一个示例项目，但甚至没有触及代码，它给出了大量的错误，所有这些错误都表明 R.java 无法转换为变量。但是文件 R.java 根本不存在于树结构中，我不知道它去了哪里。现在，当我创建一个新的 Android 项目时，它也会在该新项目中再次出现相同的错误。我经常遇到这个问题，这对我来说是一个很大的障碍..

谁能告诉问题的原因和解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:48:48.107

一些背景知识：R.java 是从您的项目资源中自动生成的。当您向项目添加布局或可绘制资源之类的内容时，Android SDK 将为您编译并为其分配资源 ID，而 R.java 类保存这些 ID。

有时，在导入示例项目时，Eclipse 无法（或需要很长时间）根据资源生成 R 类，同时您会看到这是一个错误。如果您尝试使用自动导入修复程序 (Ctrl+Shift+O) 修复错误，问题会变得更糟，因为 Eclipse 会添加`import android.R`到您的文件中，这是*不正确*的（如果您在任何文件中发现它，请删除它） .

这种情况下的解决方案通常是清理项目（Project | Clean）并重新构建它，它应该可以正常工作。

但是请注意，如果您看到多条错误消息，则可能隐藏了问题的真正原因——例如，如果您的某个资源文件的 XML 中存在语法错误，这可能会阻止 SDK 生成资源，这反过来又阻止它生成 R.java。因此，请仔细检查以查看是否没有关于 XML、drawable 等上的解析错误的错误消息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:38:42.543

也许您忘记将相关库添加到您的项目中？

要转到 Screen1 和 2 ，请从包资源管理器中右键单击您的项目，然后转到属性。

查看问题窗口 screen3，窗口 -> 显示视图 -> 问题

屏幕一

![屏幕一](../Images/5e93c8b82f3cb7731beb1ba7873472a9.png)

屏幕 2

![屏幕 2](../Images/31c5ab8679426581f2928ecd6c54a5fd.png)

屏幕 3

![屏幕](../Images/a72eb76ce68ff5f1810b777e4bfc8466.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T17:48:37.787

更改文件`target=android-X`中的`project.properties`，替换`X`为示例项目所在的api级别。例如，如果您从 `sdk-path\samples\android-17`dir 导入示例项目，则将其替换为`target=android-17`然后重新构建项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:40:17.250

通常是未正确安装 Android SDK 的标志。经常发生在我身上，我必须重新指向 SDK 并包含适当的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T21:38:00.990

确保您的源文件不包含像...这样的导入

```
import android.R; 
```

此外，请检查您的 XML 文件是否正确，因为您的 XML（res 文件夹下的布局等）中的错误可能会导致此问题。

另一个原因可能是您重命名包但未在 AndroidManifest.xml 文件中更新包名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T21:43:15.837

也许您在资源（res 文件夹）中有错误。如果资源中没有错误，请尝试 Project -> Clean。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-15T01:36:22.733

Whelp，在研究了这个地狱之后，似乎没有任何工作。然后，在墙上论坛的某个洞中，我找到了一个简单而有效的解决方案。确保 Eclipse 指向正确的 SDK 目录。我不知道我是怎么做到的，但我安装了 2 个 SDK，我正在使用的那个看起来不错，但我有 eclipse 指向一个随机的。

在 elcipse 中更新 SDK 的路径后，R.java 文件开始正确编译。这是没有任何人建议的基本检查。如果您遇到此问题，请花 15 秒时间仔细检查。可以为您节省 3 个小时的 Eclipse 故障排除时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-12T22:19:07.613

我刚刚在我的电脑上测试了这个，我得到了它的工作。现在，此解决方案不适用于所有样本。它适用于名为 ApiDemo 的项目，但不适用于 MapsDemo。您遇到此问题的原因是因为您没有采取正确的步骤。如果您按照您的说法导入，那么您将遇到这种问题。

这是导致此错误的*错误方法：*

在项目资源管理器中 - 导入 - 现有项目到工作区

如果你这样做，那么是的.. 你的 R.java 文件将不会被创建。

这是*正确*的做法：

点击新建 - 项目 - 选择“Android示例项目” - 现在您可以选择您选择的构建目标 - 选择您想要的项目并点击完成。

在运行此项目之前，您必须首先执行以下操作：在 Eclipse 中 - 转到项目 - 并单击“清理”。

现在您将能够运行该项目。

# php - 根据类别和关键字过滤搜索

> ID：13462629
> 
> 赞同：0
> 
> 时间：2012-11-19T21:33:07.430
> 
> 标签：php, mysql, phpmyadmin

我正在尝试基于类别和关键字（使用 like 或 regexp）获取搜索结果，但问题是，我的查询还返回基于关键字的其他类别结果。

```
SELECT * FROM (`listings`)
LEFT JOIN `listing_categories` ON `listings`.`ls_id` = `listing_categories`.`ls_id`
LEFT JOIN `listings_categories` ON `listing_categories`.`lc_id` = `listings_categories`.`lc_id`
LEFT JOIN `users` ON `users`.`id` = `listings`.`ls_user_id`
WHERE `listings`.`ls_status` =  1
AND listings_categories.lc_id = 17
OR listings_categories.lc_parent = 17
AND listings.ls_keywords LIKE '%Test Broken Functionality%'
OR listings.ls_keywords LIKE '%Test%'
OR listings.ls_keywords LIKE '%Broken%'
OR listings.ls_keywords LIKE '%Functionality%'
GROUP BY `listings`.`ls_id`
ORDER BY MATCH(listings.ls_keywords) AGAINST('Test Broken Functionality') DESC 
```

类别 ID 17 在数据库中实际上没有任何条目或帖子，但我的查询返回使用来自其他类别的结果...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:36:59.270

`(listings_categories.lc_id = 17 OR listings_categories.lc_parent = 17)`注意括号，几乎就像and周围的 IF 语句一样`ls_keywords LIKE ...`。这迫使必须满足两个条件，而不是您拥有的多个条件：

```
SELECT * FROM (`listings`)
LEFT JOIN `listing_categories` 
    ON `listings`.`ls_id` = `listing_categories`.`ls_id`
LEFT JOIN `listings_categories` 
    ON `listing_categories`.`lc_id` = `listings_categories`.`lc_id`
LEFT JOIN `users` 
    ON `users`.`id` = `listings`.`ls_user_id`
WHERE `listings`.`ls_status` =  1
    AND (listings_categories.lc_id = 17 OR listings_categories.lc_parent = 17)
    AND (listings.ls_keywords LIKE '%Test Broken Functionality%'
        OR listings.ls_keywords LIKE '%Test%'
        OR listings.ls_keywords LIKE '%Broken%'
        OR listings.ls_keywords LIKE '%Functionality%')
GROUP BY `listings`.`ls_id`
ORDER BY MATCH(listings.ls_keywords) AGAINST('Test Broken Functionality') DESC 
```

# java - 使用 Google Protocol Buffer JAR 文件构建 Java 应用程序

> ID：13462630
> 
> 赞同：0
> 
> 时间：2012-11-19T21:33:13.513
> 
> 标签：java, protocol-buffers, javac

我有一个看起来像这样的 myprotofile.proto 文件

```
 package PBPackage;
 message SomeMessage {
    required double someItem = 1;
 } 
```

我像这样构建它（我在linux上）

```
 JAVADIR=../../MyJarFile.jar
 protoc -I=. --java_out=${JAVADIR} myprotofile.proto 
```

我的 Java 程序 Program.java 看起来像这样

```
 import PBPackage.SomeMessage;
 public class Program {
      public static void main( String[] args ){
           System.out.println( "this is my program" );
      }
  } 
```

我尝试像这样构建 Program.java

```
 javac -cp .:MyJarFile.jar Program.java 
```

但我总是得到这个错误：

```
 Program.java:1 error cannot find symbol
 import PBPackage.SomeMessage;
                 ^
 symbol:           class SomeMessage
 location:         package PBPackage 
```

我究竟做错了什么？

最后，请不要告诉我使用一些过于复杂的构建系统，如 ant 或 maven。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:03:29.173

很可能您的 JAR 文件在与您预期不同的包中包含此类。

您可以在 protobuf 定义文件中使用两个选项来为生成的代码显式指定包名和类名：

```
option java_package = "com.example.tutorial";
option java_outer_classname = "AddressBookProtos"; 
```

请查看[本教程](https://developers.google.com/protocol-buffers/docs/javatutorial)以获取更多信息。

# python - 列表中的匹配项 - Python

> ID：13462637
> 
> 赞同：1
> 
> 时间：2012-11-19T21:33:39.377
> 
> 标签：python

所以我知道如何匹配两个列表中的项目，但我很好奇的是如何链接两个匹配项。例如，我有一个基于浏览器的应用程序并使用 Jinja2 作为我的模板语言。

我的程序会提取一个包含相应 XML 文件的 PDF 文件列表。（文件命名类似，即 foo.xml 包含 foo.pdf 的数据） PDF 文件列表显示在页面上，当用户从 PDF 列表中单击文件名时，该文件的 XML数据（如果还存在）将显示在一个小弹出窗口中。

所以，我想我的问题是，我如何连接这些点并指定要显示的正确 xml 文件，因为`col_list[0]`并不总是相同的文件？

以下是我创建 pdf 文件列表的代码：

```
 col_list = '<li class="ui-widget-content">'.join('%s</li>' % (os.path.splitext(filename)[0])
                     for filename in listfiles
                     if filename.endswith('.pdf')
                     ) 
```

谢谢！

**编辑：**

我将举一个不同的例子，希望不那么混乱。

列表“A”是一个不断变化的 PDF 文件列表（foo.pdf、bar.pdf 等）。
列表“B”是一个不断变化的 XML 文件列表，其名称与列表“A”相同（foo.xml , bar.xml 等）

我在两个列表上循环，并为每个列表创建变量。如果这些列表相同，我可以简单地调用`list_b[0]`来获取第一个文件的 xml 数据，这也将是第一个 PDF。但是，由于某些 PDF 还没有 XML 文件，因此列表的顺序不匹配。假设`list_b[0]` is`foo.xml`和`list_a[3]`is当列表的顺序不断变化时`foo.pdf`，我如何告诉 Python 我想要 XML 数据？ 对困惑感到抱歉。`foo.pdf`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:42:28.493

如果我理解正确：您想为 XML 文件名使用一组，然后查找它们：

```
pdfs = ['a.pdf', 'b.pdf', 'c.pdf', 'd.pdf']
xmls = ['a.xml', 'd.xml', 'b.xml']

xml_set = set(xmls)

result = []
for pdf in pdfs:
    xml = pdf.replace('.pdf', '.xml')
    if xml in xml_set:
        result.append('Matched %s to %s' % (pdf, xml))
    else:
        result.append("%s doesn't have a corresponding XML file" % (pdf,))

print result 
```

# php - 使用开放图 api 在 Facebook 朋友的墙上发布限制

> ID：13462638
> 
> 赞同：3
> 
> 时间：2012-11-19T21:33:39.100
> 
> 标签：php, facebook-graph-api

我正在使用开放图形 api（PHP sdk）构建一个应用程序。我通过这个循环在我朋友的墙上发布：

```
// Where $ids is my array of friends ids
foreach($ids as $id) {
    $facebook->api('/'.$id.'/feed', 'post', array(
        'message' => 'my message',
        'link' => 'my link',
        'picture' => 'my picture')
    );
} 
```

我知道在 Facebook 使用动态限制之前，我们可以在应用程序“洞察力”中找到。今天似乎已弃用。所以我想知道我的东西是否有限制？我可以无限制地循环 1000 个条目吗？我找不到有关此的任何信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:38:56.113

[我不敢告诉你，自从https://developers.facebook.com/roadmap/#february-2013](https://developers.facebook.com/roadmap/#february-2013)以来，这将不再有效

但是有一种解决方法，为了获得类似的结果，您可以在帖子上**标记**您的朋友，这样它仍然会显示在他们的新闻提要中。

使用标签执行此操作的应用程序示例是：

[http://sharetheweight.com.au/fbShareApp.php](http://sharetheweight.com.au/fbShareApp.php)

这将标记您的朋友，并将出现在 Facebook 上*，*并且只会出现在您选择的用户的新闻提要中，因为它会创建一个仅对该组启用隐私的用户组

# ios - 一个笔尖中两个视图的错误旋转

> ID：13462639
> 
> 赞同：0
> 
> 时间：2012-11-19T21:33:39.007
> 
> 标签：ios, subview, nib

希望有人可以让我直截了当。我有一个带有一个 ViewController 和一个带有两个视图的 nib 的实用程序应用程序。第一个视图用于自定义转录，第二个视图只有一个 TexView 供用户使用系统键盘记笔记。我有一个 IBAction 方法，它执行 setView:noteView 来显示我的第二个视图。然而，当 noteView 被设置时，它看起来是颠倒的。该应用程序确实允许正常的 Portait 和旋转视图，没有风景，但我不确定为什么视图会颠倒加载？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:39:58.027

不确定问题是什么，但解决我的问题的最简单方法是创建一个故事板，并将视图从我的原始笔尖复制到故事板。我还没有使用故事板，也没有意识到它是多么容易。Apple 文档中的 ViewTransitions 示例代码中有一些非常酷的转换，并说明了如何设置单个控制器 - 多视图应用程序。

# java - Spring Security 和异步执行

> ID：13462642
> 
> 赞同：2
> 
> 时间：2012-11-19T21:33:50.620
> 
> 标签：java, spring, asynchronous, spring-security

我最近发现自己遇到了 Lukasz[在这里](https://stackoverflow.com/questions/5246428/spring-security-and-async)描述的同样问题。虽然这个问题的答案被证明是有帮助的并最终帮助我解决了我的问题，但我希望有人可能知道为什么`ThreadPoolTaskExecutor`不能正确处理`MODE_INHERITABLETHREADLOCAL`？这个问题是孤立的`ThreadPoolTaskExecutor`吗？

谢谢！瑞安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:31:17.097

好的，根据spring源码论坛的[这篇帖子](http://forum.springsource.org/showthread.php?80370-SecurityContextHolder-propagation-problem-with-thread-pools)，子线程中的值只有在创建线程时才从父线程设置。如果您有一个线程池供重用，则不会再次设置该值，除非您更改它。

我从帖子中引用

> 您似乎希望使用调用线程（调用执行程序）的上下文而不是创建线程的上下文。这与使用继承的线程本地不同，所以这不是要走的路。您最好自己明确设置上下文，或者自定义执行器实现来这样做。

# django - 美味的反向关系

> ID：13462644
> 
> 赞同：7
> 
> 时间：2012-11-19T21:34:05.460
> 
> 标签：django, tastypie

我试图让我的 api 给我与美味派的反向关系数据。

我有两个模型，DocumentContainer 和 DocumentEvent，它们的关系如下：

DocumentContainer 有很多 DocumentEvents

这是我的代码：

```
class DocumentContainerResource(ModelResource):
    pod_events = fields.ToManyField('portal.api.resources.DocumentEventResource', 'pod_events')
    class Meta:
        queryset = DocumentContainer.objects.all()
        resource_name = 'pod'
        authorization = Authorization()
        allowed_methods = ['get']

    def dehydrate_doc(self, bundle):
        return bundle.data['doc'] or ''

class DocumentEventResource(ModelResource):

    pod = fields.ForeignKey(DocumentContainerResource, 'pod')
    class Meta:
        queryset = DocumentEvent.objects.all()
        resource_name = 'pod_event'
        allowed_methods = ['get'] 
```

当我点击我的 api url 时，我收到以下错误：

```
DocumentContainer' object has no attribute 'pod_events 
```

任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T22:50:51.030

我在这里写了一篇关于这个的博客文章：http: [//djangoandlove.blogspot.com/2012/11/tastypie-following-reverse-relationship.html](http://djangoandlove.blogspot.com/2012/11/tastypie-following-reverse-relationship.html)。

这是基本公式：

# API.py

```
class [top]Resource(ModelResource):
    [bottom]s = fields.ToManyField([bottom]Resource, '[bottom]s', full=True, null=True)
    class Meta:
        queryset = [top].objects.all()

class [bottom]Resource(ModelResource):
    class Meta:
        queryset = [bottom].objects.all() 
```

# 模型.py

```
class [top](models.Model):
    pass

class [bottom](models.Model):
    [top] = models.ForeignKey([top],related_name="[bottom]s") 
```

这个需要

1.  在这种情况下，从孩子到父母的 models.ForeignKey 关系
2.  使用相关名称
3.  使用related_name 作为属性的顶级资源定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T00:43:06.977

更改您的线路`class DocumentContainerResource(...)`，从

```
pod_events = fields.ToManyField('portal.api.resources.DocumentEventResource', 
                                'pod_events') 
```

至

```
pod_events = fields.ToManyField('portal.api.resources.DocumentEventResource', 
                                'pod_event_set') 
```

在这种情况下，后缀`pod_event`应该是`_set`，但根据具体情况，后缀可能是以下之一：

*   `_set`
*   `_s`
*   （无后缀）

如果每个事件最多只能关联一个容器，还可以考虑更改：

```
pod = fields.ForeignKey(DocumentContainerResource, 'pod') 
```

至：

```
pod = fields.ToOneField(DocumentContainerResource, 'pod') 
```

# ios - UIView drawRect 未在自动旋转时调用

> ID：13462646
> 
> 赞同：0
> 
> 时间：2012-11-19T21:34:08.097
> 
> 标签：ios, uiview, core-graphics, autorotate

我有一个添加到视图控制器视图的自定义视图

```
[self.view addSubview:myView]; 
```

在我添加的视图中：

```
self.autoresizingMask = self.superview.autoresizingMask; 
```

但是自动旋转时没有调用我视图的 DrawRect 方法...为什么？我需要改变视图的边界，这样我就可以在自动旋转时重绘它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:39:33.580

self.superview.autoresizingMask 的值是多少？这可能就是为什么什么都没有改变的原因。将自动调整掩码显式设置为您希望它执行的操作，或者如果这不能提供足够的控制，请使用 ViewController 的 willAnimationRotationToInterfaceOrientation 方法显式设置子视图的框架或在子视图上触发 setNeedsDisplay:。

# c# - 如何在 DLL 上使用 app.config 而不是 exe

> ID：13462647
> 
> 赞同：2
> 
> 时间：2012-11-19T21:34:12.590
> 
> 标签：c#, .net, c, .net-4.0

这是我的第一个问题[允许使用 .NET 2.0 构建的 C# 应用程序在 .NET 4.0/4.5 上运行](https://stackoverflow.com/questions/13461185/allow-c-sharp-application-built-with-net-2-0-to-run-on-net-4-0-4-5)的姐妹问题。为了便于理解，我稍微简化了我的情况。其实我们的案例有点特殊。

基本上，我们为我们的 MSI 安装程序编写了一个 C# DLL（让我们调用`E.dll`）。由于我们的 MSI 安装程序使用的是旧版本的 windows 安装程序，它不能直接使用 C# DLL，只能使用 C 类型的 DLL，因此我们使用一个名为[DLLExporter](http://www.codeproject.com/Articles/37675/Simple-Method-of-DLL-Export-without-C-CLI)的开源库来生成 C 导出函数入口端口。它`E.dll`是用 .NET 2.0 (VS2005) 构建的。

正如我的第一个问题所述，我们无法在仅安装 .NET 4.0 或更高版本的机器上运行安装程序。经过这个优秀论坛的一些努力和帮助，我想我开始理解这个问题了，这里是最终的应用程序配置文件：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v2.0.50727"/>    
  <supportedRuntime version="v4.0"/>        
</startup> 
```

由于那些 C 导出函数入口点，最终的 C# dll 被认为是混合模式程序集，因此我需要在 .NET 4.0 上将 useLegacyV2RuntimeActivationPolicy 设置为“true”。

但是有一个问题，配置必须在 exe 上，而不是在 DLL 上。我通过使用动态加载`E.dll`我们的 MSI 之类的测试工具 exe 确认了这一点。让我们将测试工具 exe 称为`T.exe`. 因此，通过`E.dll.config`上述内容将无济于事。我们需要`T.exe.config`文件。但是对于我们的 MSI 安装程序，它是 msiexe.exe，它位于，`C:\windows\system32`我们无法将一个名为`msiexe.exe.config`system32 的文件放入（我刚刚测试过它，它不起作用，我仍然需要弄清楚我应该拥有哪个 exe 应用程序.config 文件）。不管是哪个exe，都是一团糟。我无法通过在 .NET 4.0 (VS2010) 中构建 DLL 来解决这个问题，因为我需要配置文件将 useLegacyV2RuntimeActivationPolicy 设置为“true”。

知道如何将 app.config 放在 DLL 上而不是 exe 上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:08:04.203

我的建议是使用蹦床 .EXE 在进程外生成 .NET DLL。

msiexec.exe.config 不起作用，因为 msiexec.exe 具有嵌入式清单。

# scala - 将“类”类型作为参数提供给 Scala 中的方法

> ID：13462650
> 
> 赞同：3
> 
> 时间：2012-11-19T21:34:30.950
> 
> 标签：scala

我正在通过用它重写我的一些 Java 代码来探索 Scala。在其中一种 Java 方法中，我需要将类类型作为参数传递：

```
public void setType(Class<T> type) 
```

在 Java 中，我可以这样做：

```
someobj.setType( MyClass.class ) 
```

但在 Scala 中，我似乎无法调用“MyClass.class”。我想知道如何在 Scala 中传递参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T21:35:45.443

你在追求`classOf[MyClass]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:58:40.883

```
scala> case class MyClass()
defined class MyClass

scala> def setType[T](t:Class[T]) = println(t)
setType: [T](t: Class[T])Unit

scala> setType(classOf[MyClass])
class $line23.$read$$iw$$iw$MyClass 
```

Philippe 正确地指出，OP 需要从 Scala 调用 Java 方法。在这种情况下，需要有关 java 类的更多信息来确定意图，但如下所示：

爪哇：

```
public class JavaClass<T> {
    public void setType(Class<T> type) {
        System.out.println(type);
    }
} 
```

斯卡拉：

```
class MyClass()
object classtest {
  val someobj = new JavaClass[MyClass]     //> someobj  : JavaClass[MyClass] = JavaClass@6d4c1103     
  someobj.setType(classOf[MyClass])               //> class MyClass
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-03T04:54:55.270

如果您只需要传递类类型并将其用于建模数据或/创建新实例，还有另一种方法可以做到这一点。

```
def doSomeThing[T](id: UUID, time: Date): List[T] = {
// do anything with T, it's a reference to class definition not an instance
  List(T(id, time), T(id, new Date(time.getTime + 900 * 1000))
}
case class SomeClassA(id: UUID, time: Date)
case class SomeClassB(id: UUID, time: Date)
class NonCaseClass(p1: UUID, p2: Date)

doSomeThing[SomeClassA]()
doSomeThing[SomeClassB]()
doSomeThing[NonCaseClass]() 
```

我让这段代码有点复杂，这里是包装器唯一的例子：

```
def doSomeThing[T]() = {
// do anything with T, it's a reference to class definition not an instance
}
case class SomeClassA(id: UUID, time: Date)

doSomeThing[SomeClassA]() 
```

# css - 使用 div 进行 CSS 定位

> ID：13462651
> 
> 赞同：1
> 
> 时间：2012-11-19T21:34:32.637
> 
> 标签：css

有人能告诉我为什么体育运动一直处于领先地位吗？

娱乐圈到底应该在哪里？

基本上，我试图将所有三个主题放在同一个地方

显示的原因：None是因为JQuery正在做相应的显示

```
 #topBar {
        position: relative;
        top: 0px;
        left: 0px;
        height: 100px;
        width: 100%;
        margin: 0 auto;
        text-align: center;
        background-color: #000000;
        color: #ffffff;
        text-align: left;
    }
    #topBar span {
        position: absolute;
        bottom: 0;
    }
    #topBar a {
        color: #ffffff;
        text-decoration: none;
    }
    #Sport {
        position: absolute;
        display: none;
        top: 500px;
    }
    #Entertainment {
        position: absolute;
        display: none;
        top: 500px;
    }
    #Military {
        position: absolute;
        display: none;
        top: 500px;
    }

HTML:

<!DOCTYPE html>

<head> <meta charset="utf-8" /> 
<title>Matthew Jameson | Virtual Reality</title>  
<link rel="stylesheet" href="VR3.css" type="text/css" />
<script src="jquery.js"></script>
</head>

<html lang="en" >
    <head>
        <meta charset="utf-8" />
         <script src="http://code.jquery.com/jquery-latest.js"></script>
        <title></title>
    </head>
    <body>
        <header>

        </header>

<Div id = "topBar">
<span>
<a id='slink' class='trigger' href='#Sports'>Sports</a>
<a id='elink' class='trigger'  href='#Entertainment'>Entertainment</a >
<a id='mlink' class='trigger' href='#Military'>Military</a>

<span>
</div>

<Div id = "main">
</div>
<div id='Sports' class='slink triggered'>
<iframe width="280" height="158" src="http://www.youtube.com/embed/RPPJ5JHwO4A?rel=0" frameborder="0" allowfullscreen></iframe>
<iframe width="280" height="158" src="http://www.youtube.com/embed/oMLarxR-q08?rel=0" frameborder="0" allowfullscreen></iframe>

</div>

<Div id = "Entertainment" class='elink triggered'>
<iframe width="280" height="158" src="http://www.youtube.com/embed/7vcGqha6xJ0?rel=0" frameborder="0" allowfullscreen></iframe>
<iframe width="280" height="158" src="http://www.youtube.com/embed/La-WRhYeMCw?rel=0" frameborder="0" allowfullscreen></iframe>

</div>

<Div id = "Military" class='mlink triggered'>
<iframe width="280" height="158" src="http://www.youtube.com/embed/6p7FM-mBsNk?rel=0" frameborder="0" allowfullscreen></iframe>
<iframe width="280" height="158" src="http://www.youtube.com/embed/g1afRyN5_MQ?rel=0" frameborder="0" allowfullscreen></iframe>

</div>
<script>

$('.trigger').on('click',function(){
    $('.triggered').slideUp(500);
    var x = $(this).attr('id');
    $('.' + x ).slideDown(500);
});

</script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:56:21.163

这是因为在您的 CSS 中您的选择器是`#Sport`，但在您的 HTML 中是`#Sports`. 匹配名称，你应该很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:38:48.693

使用 Z-index ，值越大，元素的优先级越高，它会显示在顶部。

# html - 具有 100% 屏幕的 iFrame

> ID：13462653
> 
> 赞同：0
> 
> 时间：2012-11-19T21:34:45.583
> 
> 标签：html, iframe

我只是想制作一个 iFrame 来显示一个网站。我拥有的当前 iframe 代码实际上可以工作，但我想让 iframe 在高度和宽度上显示 100%。当前代码显示网站 100% 高度，但不显示宽度，所以有人可以帮我解决这个问题吗？

这是确切的页面，因此您可以看到我在说什么： [http ://dnatecservices.com/wp-demo/Untitled-2.html](http://dnatecservices.com/wp-demo/Untitled-2.html)

请查看页面源代码以查看我的 html。由于某种原因，我无法在此处发布代码。

那么有人可以为我提供一个 HTML 以 100% 显示这个 iframe 的高度和宽度吗？我希望网站 100% 显示在用户的屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:38:37.043

您的 CSS 代码显示：

```
#container {
  width: 1000px;
  min-height: 550px;
  position: relative;
} 
```

删除此处的宽度，它将显示 100% 宽度的 iframe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:45:57.527

删除宽度后：1000px；从“容器”DIV 中，您需要从 iframe 中删除边框：

```
#iframe {
height: 100%;
width: 100%;
display: block;
border: 0px;
} 
```

# java - 扫描器类和 InputMismatchException

> ID：13462654
> 
> 赞同：1
> 
> 时间：2012-11-19T21:34:59.223
> 
> 标签：java, exception, java.util.scanner

```
while (!s.hasNextDouble())
{
System.out.println("not a value" );
    s.nextDouble();

}

sum = min = max = next = s.nextDouble();    

for (loop follows to decide min and max and average) 
```

为什么我在线程“main”java.util.InputMismatchException 中得到一个扫描仪异常，当我运行它时。我查看了 API，我认为我做得对。如果不将 s.nextDouble() 放在 System.out 之后，则循环运行良好，但只要键入 s.nextDouble(); 程序崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:38:55.863

您正在尝试阅读一段`Double`时间，而您没有阅读。尝试：

```
while (!s.hasNextDouble())
{
    System.out.println("not a value" );
    s.next();
}
min = max = etc = s.nextDouble(); 
```

# sql - 您如何将结果转化为视图？

> ID：13462658
> 
> 赞同：1
> 
> 时间：2012-11-19T21:35:27.177
> 
> 标签：sql, sql-server-2008, view

我可以让它在 SQL Server Management Studio 中以交互方式工作，但需要在视图中显示这些结果。我对 T-SQL 有点陌生。有没有一种简单的方法可以把它放在一个表中（而不是一个视图）并让它每天早上按计划运行？

```
Declare @Tempresults TABLE
(
 ID varchar(100),
 MinLine varchar(100),
 MaxLine varchar(100)
)

INSERT INTO @Tempresults (ID, MinLine, MaxLine)
Select PACK_ID, Min(LINE) as MinLine, MAX(Line) as MaxLine 
from DESC 
group by PACK_ID

Declare @Tempresults2 TABLE
(
 ID2 varchar(100),
    MinLine2 varchar(100),
    MaxLine2 varchar(100),
 FirstEntry varchar(500)
)

INSERT INTO @Tempresults2 (ID2, MinLine2, MaxLine2, FirstEntry)
select ID, MinLine, MaxLine, PACK_DESC as FirstEntry
 from @Tempresults b, DESC a
 where b.ID = a.PACK_ID and b.MinLine = a.line

Declare @Tempresults3 TABLE
(
 ID3 varchar(100),
 MinLine3 varchar(100),
 MaxLine3 varchar(100),
 LastEntry varchar(500)
)

INSERT INTO @Tempresults3 (ID3, MinLine3, MaxLine3, LastEntry)
select ID, MinLine, MaxLine, PACK_DESC as LastEntry
 from @Tempresults b, DESC a
 where b.ID = a.PACK_ID and b.MaxLine = a.line

select a.id2 as ID, b.lastentry as MaxDesc, a.firstentry as MinDesc 
from @Tempresults2 a, @Tempresults3 b
Where a.ID2 = b.ID3
group by ID2, FirstEntry, LastEntry 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:51:13.173

这行得通吗？

```
SELECT 
    a.id2 AS ID, 
    MaxDesc, 
    MinDesc 
FROM 
    (
    SELECT 
        PACK_ID AS ID, 
        MinLine, 
        MaxLine, 
        d.PACK_DESC AS MaxDesc, 
        a.PACK_DESC AS MinDesc 
    FROM 
        (
        SELECT 
            PACK_ID, 
            MIN(LINE) AS MinLine, 
            MAX(Line) AS MaxLine 
        FROM 
            DESC 
        GROUP BY 
            PACK_ID
        ) b INNER JOIN
    DESC a ON 
        b.ID = a.PACK_ID AND 
        b.MinLine = a.line INNER JOIN
    DESC d ON
        b.ID = d.PACK_ID  AND
        b.MaxLine = d.line
    )
GROUP BY 
    ID2, FirstEntry, LastEntry 
```

# android - 刷新 ListView 的方法

> ID：13462660
> 
> 赞同：0
> 
> 时间：2012-11-19T21:35:38.753
> 
> 标签：android, listview, android-intent, android-activity, refresh

我有一个带有 ListView 的 Android 应用程序。每一行都是由 SQLIte 查询结果动态生成的。当用户点击一个项目时，应用程序应该使用该项目的“内容”刷新列表，由另一个 SQLite 查询生成，依此类推。我试图“刷新”创建新意图并将其发送到同一活动的活动。活动名称为 ShopActivity

```
ListView list_content = ((ListView)findViewById(R.id.listforshop));
list_content.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              

            // ID and text of selected item
            long selected_id = id;
            String selected_name = (String) ((TextView) view.findViewById(R.id.element)).getText();

            // New intent
            Intent intent = getIntent();
            intent.setClassName(ShopActivity.this, ShopActivity.class.getName());

            // Passing data and refreshing activity
            intent.putExtra("id", selected_id);
            intent.putExtra("name", selected_name);
            intent.putExtra("type", "");
            startActivity(intent);
        }       
}); 
```

通过这种方式，LogCat 向我显示了很多关于 Bundle 的警告。似乎应用程序无法启动活动。

还有另一种“刷新” ListView 的方法吗？这个实现正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:42:31.293

```
// New intent
Intent intent = getIntent();
intent.setClassName(ShopActivity.this, ShopActivity.class.getName()); 
```

这不会创建新的 Intent，而是重用现有的 Intent……当您恢复此 Activity 时，像这样重用 Intent 会引发很多警告和异常。为了创建一个新的 Intent 你需要使用关键字`new`。

但是您并不需要重新加载整个 Activity，只需获取一个新的 Cursor 并使用它`CursorAdapter#swapCursor()`来刷新您的 ListView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:44:45.110

尝试刷新时，`ListView`您应该考虑使用`notifyDataSetChanged()`适配器。这个方法告诉你的适配器所提供的数据已经改变并且它应该更新列表视图。

因此，您应该将新数据添加到您的适配器，然后调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:47:52.683

听起来您正在查看详细信息，请不要使用相同的活动来查看它们。添加一个新`ShopDetailActivity`的并在点击时将用户定向到那里，这样用户就可以按返回以转到原始列表（加上获得漂亮的过渡动画）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T23:13:51.867

处理列表和详细信息的另一种方法是使用片段。这样做的好处是在大屏设备上，可以同时看到列表和细节。

使用一个 Activity 来显示列表和详细信息是很麻烦的。至少，使用两个活动。

# cosmos - 检查用户是否查看过某些内容

> ID：13462666
> 
> 赞同：-4
> 
> 时间：2012-11-19T21:35:55.477
> 
> 标签：cosmos

[编辑] 删除它，因为它不值得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:58:24.133

确切的字段类型会根据您使用的数据库而有所不同，但这是一般技术：

您需要一个具有唯一 ID 的 users 表：

```
CREATE TABLE users (
    user_id       INTEGER      PRIMARY KEY,
    email         VARCHAR(50)  NULL,
    password      VARCHAR(32)  NULL
); 
```

以及您的新闻项目的表格：

```
CREATE TABLE articles (
    article_id    INTEGER      PRIMARY KEY,
    title         VARCHAR(50)  NULL,
    pubdate       DATETIMESTAMP,
    body          blob or whatever your database supports
); 
```

最后是一个表格，指示哪些用户阅读了哪些文章：

```
CREATE TABLE users_articles (
    article_id    INTEGER,
    user_id       INTEGER,
    read_date     DATETIMESTAMP
); 
```

根据您使用的查询以及您的数据库如何选择优化这些查询，该`users_articles`表可能应该由 索引。`article_id`

现在，要获取过去 7 天内 user_id 999 尚未阅读的所有文章，您的查询将如下所示：

```
SELECT a.title, a.pubdate, a.body
FROM articles a
WHERE a.pubdate > date_sub(NOW(), INTERVAL "7 days")
AND NOT EXISTS (
    SELECT * 
    FROM users_articles ua
    WHERE ua.article_id = a.article_id
        AND ua.user_id = 999
) 
```

当然，这个查询的其他形式也是可能的。并且间隔语法会因一个数据库而异。但这就是它的要点。

每当用户阅读一篇文章时，您可以使用 user_id 和 article_id 以及当前时间戳插入/更新 users_articles 表。作为副作用，这还为您提供有关用户最近阅读的文章的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:48:16.483

我建议创建一个新表，您可以在其中保存文章和用户之间的关系。该表将如下所示：

新闻ID | 用户名 | 知识产权 | 日期 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:48:21.183

你有一个用户表。你有一个新闻表。

你只需要像 user_has_read 表这样的东西......

```
id
time
user_id
news_id 
```

这样，当用户第一次查看某些内容以将他们与新闻项目联系起来时，您可以向此表添加一个条目。然后在此表中查找他们的 user_id 以查看他们以前是否来过这里。

您现在还可以有一个“最近查看”部分，其中包含指向他们最近阅读的 10 篇内容的链接，以便于导航。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-19T21:40:35.290

您可以有一个布尔标志来确定是否读取了某些内容。当用户获得您希望他/她阅读的任何内容时，您可以转到数据库并将该标志设置为 true，表明该记录已被特定用户看到。

# iphone - 选择使用后如何停止相机电影播放器 停止播放捕获的视频？

> ID：13462667
> 
> 赞同：1
> 
> 时间：2012-11-19T21:35:54.137
> 
> 标签：iphone, ipad, mpmovieplayercontroller

嗨，这是我想要做的：

1.  开放式摄像头
2.  捕捉新视频
3.  用它
4.  创建一个 MPMoviePlayerController 以获取所选视频的缩略图和持续时间。

如果我在相机中捕获新视频后不播放新视频，上述所有步骤都可以正常工作，但是一旦我在相机电影播放器​​中播放视频，并且在播放视频时，我点击“使用”按钮，它会使我的应用程序在我尝试创建 MPMoviePlayerController 以获取所选视频的缩略图和持续时间的区域崩溃。我相信您不能运行超过 1 个电影播放器​​实例。

有人知道如何解决这个问题吗？

# batch-file - 如何使用批处理运行 python 脚本，然后在多个文件上运行该 python 脚本

> ID：13462671
> 
> 赞同：0
> 
> 时间：2012-11-19T21:36:05.907
> 
> 标签：batch-file

我想知道如何将 BATCH 文件配置为首先运行 python 脚本：example.py （进行查找和替换），然后在根文件夹中的子文件夹中的多个文件上运行脚本。

此外，应删除子文件夹中编辑/更改的文件并与新更改的文件一起保存。

您的帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:14:33.613

你可以从这样的事情开始：

```
for /r [[drive:]path] %a in (*.txt) do example.py "%a" 
```

这`example.py`对每个`.txt`文件执行，从 开始`[[drive:]path]`，并递归子目录`/r`。如果您省略*drive:path*它将从当前目录开始搜索，例如

```
for /r %a in (*.html) do example.py "%a"
for /r C:\ %a in (*.html) do example.py "%a" 
```

第一个示例针对当前目录下的每个文件执行，第二个`example.py`示例针对.`*.html``example.py``.html``C:\`

也可以删除更改的文件，但我们需要更多信息。也许你只需要这个？

```
for /r %a in (*.txt) do example.py "%a" temp.tmp & copy temp.tmp "%a" 
```

请记住，如果您在命令提示符下启动此命令，这将起作用。如果要在批处理文件 ( `.cmd`, `.bat`) 中使用它，则必须使用`%%a`而不是`%a`.

# java - PHP 或 Java 确认用户是否有权访问网络驱动器上的特定文件夹

> ID：13462674
> 
> 赞同：0
> 
> 时间：2012-11-19T21:36:25.080
> 
> 标签：java, php, directory

当用户访问内部网络网站上的特定页面时，我需要检查他们的用户是否有权访问非常特定的网络文件夹。我需要像 is_readable() 一样运行的东西，但从用户系统的角度来看，而不是从服务器的角度来看。

基本上，如果您具有访问特殊文件夹的网络权限，则该站点是可访问的。如果不是，您将被拒绝访问。这是避免用户登录系统的一种快速而肮脏的方法。它搭载了网络安全性，但实际上并未与之集成。

我不介意在 PHP 或 Java 中这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:46:37.703

我认为这可以用[jcifs](http://jcifs.samba.org/)来完成，但您可能需要用户的密码。

是windows oder unix文件系统吗？

对于 Windows，您可以调用`cacls c:\path`并解析用户名的输出。但这有点丑陋。

# sql-server - 加速 SSIS 包（插入和更新）

> ID：13462681
> 
> 赞同：4
> 
> 时间：2012-11-19T21:36:45.233
> 
> 标签：sql-server, ssis, performance

此处由 Twitter 上的#sqlhelp 引用（已**解决 - 请参阅帖子末尾的解决方案**）。

我正在尝试加速插入 2900 万行新数据的 SSIS 包，然后用 2 个附加列更新这些行。到目前为止，包会遍历包含文件的文件夹，将平面文件插入数据库，然后执行更新并归档文件。 *添加（感谢@billinkc）：SSIS 顺序是 Foreach 循环、数据流、执行 SQL 任务、文件任务。*

**不需要很长时间：**循环、文件移动和截断表格（阶段）。 **需要很长时间：**插入数据，运行下面的语句：

```
UPDATE dbo.Stage
SET Number = REPLACE(Number,',','')
## Heading ##
-- Creates temp table for State and Date
CREATE TABLE #Ref (Path VARCHAR(255))
INSERT INTO #Ref VALUES(?)

-- Variables for insert
DECLARE @state AS VARCHAR(2)
DECLARE @date AS VARCHAR(12)

SET @state = (SELECT SUBSTRING(RIGHT([Path], CHARINDEX('\', REVERSE([Path]))-1),12,2) FROM #Ref)
SET @date = (SELECT SUBSTRING(RIGHT([Path], CHARINDEX('\', REVERSE([Path]))-1),1,10) FROM #Ref)

SELECT @state
SELECT @date

-- Inserts the values into main table
INSERT INTO dbo.MainTable (Phone,State,Date)
SELECT d.Number, @state, @date
FROM Stage d

-- Clears the Reference and Stage table
DROP TABLE #Ref
TRUNCATE TABLE Stage 
```

请注意，我已经尝试在插入和最大插入提交大小上增加每批次的行数，但都没有影响包速度。

**解决并补充：**

对于那些对数字感兴趣的人：OP 打包时间为 11.75 分钟；使用威廉的技术（见下文），它下降到 9.5 分钟。当然，有 2900 万行且在较慢的服务器上，这是可以预料的，但希望这能向您展示其有效性背后的实际数据。关键是在数据流任务上保持尽可能多的进程，因为更新数据（在数据流之后）消耗了大量时间。

希望这可以帮助其他有类似问题的人。

**更新二：**我添加了一个 IF 语句，将它从 9 分钟减少到 4 分钟。执行 SQL 任务的最终代码：

```
-- Creates temp table for State and Date
CREATE TABLE #Ref (Path VARCHAR(255))
INSERT INTO #Ref VALUES(?)

DECLARE @state AS VARCHAR(2)
DECLARE @date AS VARCHAR(12)
DECLARE @validdate datetime

SET @state = (SELECT SUBSTRING(RIGHT([Path], CHARINDEX('\', REVERSE([Path]))-1),12,2) FROM #Ref)
SET @date = (SELECT SUBSTRING(RIGHT([Path], CHARINDEX('\', REVERSE([Path]))-1),1,10) FROM #Ref)
SET @validdate = DATEADD(DD,-30,getdate())

IF @date < @validdate
BEGIN
    TRUNCATE TABLE dbo.Stage
    TRUNCATE TABLE #Ref
END
ELSE
BEGIN
-- Inserts new values
INSERT INTO dbo.MainTable (Number,State,Date)
SELECT d.Number, @state, @date
FROM Stage d

-- Clears the Reference and Stage table after the insert
DROP TABLE #Ref
TRUNCATE TABLE Stage
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T22:00:43.817

据我了解，您正在从平面文件中读取 ~ 29,000,000 行并将它们写入暂存表，然后运行一个 sql 脚本更新（读取/写入）暂存表中相同的 29,000,000 行，然后移动这 29,000,000 条记录（读取从登台然后写入 nat) 到决赛桌。

难道你不能从你的平面文件中读取，使用 SSIS 转换来清理你的数据并添加你的两个额外的列，然后直接写入最终表。然后，您只会对每个不同的数据集处理一次，而不是您的进程执行的三个（如果将读取和写入视为不同，则为六个）次？

我会更改您的数据流以在流程中转换所需的项目并直接写入我的最终表格。

**编辑**

从您问题中的 SQL 看来，您正在通过从 PHONE 字段中删除逗号来转换数据，然后从当前处理的文件所在的文件路径的特定部分检索状态和日期，然后存储这三个数据点进入 NAT 表。这些事情可以通过数据流中的派生列转换来完成。

对于 State 和 Date 列，设置两个名为 State 和 Date 的新变量。在变量定义中使用表达式将它们设置为正确的值（就像您在 SQL 中所做的那样）。当 Path 变量更新时（我假设在您的循环中）。State 和 Date 变量也将更新。

在派生列转换中，将状态变量拖到表达式字段中并创建一个名为状态的新列。

重复日期。

对于 PHONE 列，在派生列转换中创建如下表达式：

替换（[电话]，“，”，“”）

将派生列字段设置为替换“电话”

对于您的输出，为您的 NAT 表创建一个目标，并将数据流中的 Phone、State 和 Date 列链接到 NAT 表中的相应列。

如果您的输入中有其他列，您可以选择不从源中引入它们，因为您似乎只对原始数据中的电话列进行操作。

**/编辑**

# python - 如何使用 Python Facebook 图形 API

> ID：13462682
> 
> 赞同：0
> 
> 时间：2012-11-19T21:36:52.587
> 
> 标签：python, facebook, facebook-graph-api

你们中的任何人都可以解释如何准确地使用 Facebook Graph API 吗？这对我来说绝对没有意义。我知道我必须有一个 api 密钥和一个秘密的应用程序密钥，我有这些。我只需要知道使用 Python 从 graph.facebook.com 获取数据的基础知识。任何地方都没有消息来源，它杀死了我。简而言之，我如何才能打开一个传递了某些参数的 url，它实际上将数据返回给我？

非常感谢贾斯汀

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T21:41:43.043

Github 中有一个用于 Python-Facebook 集成的库：[https ://github.com/pythonforfacebook/facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)

基本用法

```
graph = facebook.GraphAPI(oauth_access_token)
profile = graph.get_object("me")
friends = graph.get_connections("me", "friends")
graph.put_object("me", "feed", message="I am writing on my wall!") 
```

# .net - 当用户在表单外部单击时，如何关闭表单（ShowDialog）？

> ID：13462685
> 
> 赞同：0
> 
> 时间：2012-11-19T21:36:57.223
> 
> 标签：.net, winforms, mouseevent

我有一个表单，它包含一个 TreeView。当鼠标在表单外被点击时，我怎样才能得到消息（所以我可以关闭它）？我尝试了 CaptureMouse 但这阻止了鼠标在树内工作。当我在表单外单击时，我没有收到 MouseDown 消息。

我不能对 WM_NCACTIVATE 使用 WndProc 检查，因为我是从 Excel 插件内部显示的，并且如果单击在 Excel 上，Excel 会以某种方式阻止发送此消息。

[How do I ...](https://stackoverflow.com/questions/298491/how-do-i-close-a-form-when-a-user-clicks-outside-the-forms-window)中的其他解决方案不起作用。我尝试过，其他人也尝试过评论 - 但它们不起作用（包括标记为答案的答案）。

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:11:21.810

这只是一个供您测试的示例，因为我没有任何 excel 插件代码可以使用。

我的想法是使用计时器来检查您的任何表单控件是否具有焦点。如果没有焦点，则关闭表单。

首先在您的表单中声明一个 Timer，将其间隔设置为 1 秒（或更短）并添加此代码

```
private void timer1_Tick(object sender, EventArgs e)
{
    if (this.Focused == true) return;
    if (AnyFocused(this) == false)
    {
        this.timer1.Stop();
        this.Close();
        // Application.Exit(); -- not recommended but...
    }
}

private bool AnyFocused(Control c)
{
    if (c.Focused == true) return true;
    foreach (Control x in c.Controls)
    {
        if (x.Focused == true) return true;
        if (x.Controls != null && x.Controls.Count > 0)
            return AnyFocused(x);
    }
    return false;
} 
```

我用一个简单的 winform 应用程序做了一个小测试，它可以工作，但你的情况（Excel 插件）可能会有很大不同。让我知道。

# c# - Javascript 等效于 .NET 的 DateTime.Parse

> ID：13462687
> 
> 赞同：10
> 
> 时间：2012-11-19T21:37:02.587
> 
> 标签：c#, javascript, jquery, asp.net-mvc, asp.net-mvc-3

我正在尝试构建一个验证器，该验证器将与 .NET 的 DefaultModelBinder 一起使用，使用 DateTime.Parse 将字符串从表单发布转换为 DateTime。我不想等到某个日期发布到服务器后才意识到这是一个糟糕的日期。

目前 jquery.validate 使用以下代码来验证日期字段：

```
// http://docs.jquery.com/Plugins/Validation/Methods/date
date: function(value, element) {
    return this.optional(element) || !/Invalid|NaN/.test(new Date(value));
} 
```

然而，由于 Javascript 糟糕的日期解析器，这：

> 275481/69/100089

将评估为**有效**，截至 275760 年 9 月 12 日。

另一方面，这是：

> 11-19-2013

将评估为**无效**。

当然，我知道 C# 的 DateTime.Parse() 考虑了文化（本地化）和闰年之类的东西，我可以假设一个固定的（美国）文化，并在客户端上允许“02-29-2013”并在服务器上将其踢出（理想情况下不是，但这是可以接受的）。

但我不敢相信有人没有组合一个更好的日期验证器来使用 C# 的 DateTime.Parse() 逻辑。

也许有人有，我只是还没找到——这就是我在这里发帖的原因。

而且我知道我有几种方法可以解决这个问题——从非常简单（不太准确）到非常复杂（更准确），但我希望有人已经走上了这条路并找到了最佳点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T22:07:58.403

[Datejs](http://www.datejs.com/)对我来说似乎很健壮。它的[解析](http://code.google.com/p/datejs/wiki/APIDocumentation#parse)功能支持超过 150 种文化：

```
Date.parse("February 20th 1973") 
```

如果您需要解析在当前文化中无效的日期字符串，您可以使用[parseExact](http://code.google.com/p/datejs/wiki/APIDocumentation#parseExact)函数：

```
// The Date of 15-Oct-2004
Date.parseExact("10/15/2004", ["M/d/yyyy", "MMMM d, yyyy"]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:56:19.590

老实说，您最好的选择是执行 AJAX 命中，并要求您的 ASP.net 网络服务器解析字符串并返回 Javascript 日期。

Javascript 库很容易与不同的语言环境混淆，例如：

```
GET /ParseDate.ashx?dateStaring=06/01/34 4:53:05 غ.و&locale=ar-SA 
```

这变得非常复杂，因为：

```
"6/1/34" = November 19, 2012 
```

.NET 框架（以 Windows 为后盾）支持许多不同的语言环境。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:55:14.483

您是否考虑过让客户端 1) 使用自己的库来验证日期和 2) 将日期解析并重新格式化为C# 友好格式？

这将允许您使用[DateJS](http://code.google.com/p/datejs/)获得非常灵活的日期输入前端，更容易处理客户端文化，并让您的服务器端处理固定格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:48:45.560

您是否尝试过将字符串传递给构造函数？

[这是来自https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)的示例

```
var birthday = new Date("December 17, 1995 03:24:00"); 
```

# c# - 日志记录操作 WP7 + WCF 服务

> ID：13462688
> 
> 赞同：0
> 
> 时间：2012-11-19T21:37:07.720
> 
> 标签：c#, wcf, windows-phone-7

我正在开发一个使用 WCF 连接数据库的 WP7 应用程序。我正在考虑如何执行日志记录。用户数据和密码在数据库中。我需要一种简单、不复杂的方法来做到这一点。我经历了很多教程，示例等，但没有帮助。谁能指导我如何登录？我意识到我没有这样做，也不知道如何执行这样的操作。

我的想法是写这样的东西，但我认为这不是执行此操作的好方法：这是在 WCF 服务端

```
 public bool LogIn(string userId, string passwd)
    {
        Boolean prompt = false;
        /*User user = new User();
        user.userId = userId;
        user.passwd = passwd;
        return user;*/
        ProgDBEntities context = new ProgDBEntities();
        var userEntity = (from p in context.UserEntity
                          where p.UserID == userId && p.Passwd == passwd
                          select p);
        if (userEntity != null)
        {
            prompt = true;

        }
        else
        {
            prompt = false;
            throw new Exception("No User in Database");
        }
        return prompt;

    } 
```

在 WP7 客户端我有文本框、密码框和登录按钮

编辑：所以我决定把这段代码留在 WCF 服务上。现在的问题是，当我使用 WCFTestClient 对其进行测试时，它总是返回 true ......我认为这个语句有问题

```
 if (userEntity != null) 
```

# c - 基本 C 指针和函数

> ID：13462689
> 
> 赞同：2
> 
> 时间：2012-11-19T21:37:14.130
> 
> 标签：c, function, pointers, function-pointers

我试图弄清楚函数声明的含义：

```
int *f(); 
```

和

```
int (*g)(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T21:38:57.247

```
int *f(); 
```

上面的行是一个函数的声明，`f`它具有未指定数量的参数并返回一个`int *`.

```
int (*g)(); 
```

上一行是一个指向函数的指针的声明，`g`该函数具有未指定数量的参数并返回一个`int`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T21:41:49.727

作为此处其他正确答案的补充，我想我会提到这[`cdecl(1)`](http://linux.die.net/man/1/cdecl)是一个用于破译这些声明的方便工具：

```
$ cdecl
Type `help' or `?' for help
cdecl> explain int *f();
declare f as function returning pointer to int
cdecl> explain int (*g)();
declare g as pointer to function returning int 
```

`cdecl`可能已经安装在您的机器上，或者您可以通过[http://cdecl.org](http://cdecl.org)上的便捷 Web 界面使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T21:38:34.103

`f`是一个函数，返回`int*`并且`g`是一个指向函数返回的指针`int`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T22:07:10.470

诸如函数调用之类的后缀运算符的`()`优先级高于诸如 之类的一元运算符`*`，因此

```
T *f(); 
```

读作

```
 f     -- f
   f()   -- is a function (() binds before *)
  *f()   -- returning a pointer
T *f();  -- to T (for some type T) 
```

如果你想强制`*`绑定 before `()`，你必须明确地用括号分组，所以

```
T (*g)(); 
```

读作

```
 g     -- g
  (*g)    -- is a pointer
  (*g)()  -- to a function
T (*g)(); -- returning T. 
```

数组的规则类似：`T *a[N]`是指向的指针的数组`T`，而`T (*p)[N]`是指向 的数组的指针`T`。

# android - 通过窗口标志打开/关闭屏幕

> ID：13462691
> 
> 赞同：0
> 
> 时间：2012-11-19T21:37:27.377
> 
> 标签：android

当手机处于睡眠状态时，我想要一个动画活动（很像手机铃声动画）。

我已经阅读了很多关于使用 WindowManager 标志打开屏幕的帖子，所以我所做的就是将这段代码添加到我的活动的 onCreate() 函数中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(
         WindowManager.LayoutParams.FLAG_FULLSCREEN |
         WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | 
         WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON,

         WindowManager.LayoutParams.FLAG_FULLSCREEN |
         WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
         WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
    );

    setContentView(R.layout.act_image_activity);
    startAnimation();
} 
```

我的问题是：

*   动画以小的延迟开始；当屏幕打开时，我可以看到键盘保护（或禁用键盘保护时的主屏幕），然后我的活动开始。
*   调用我的活动的完成（）方法后，手机不会立即进入睡眠状态，而是重新启动睡眠计时器。

有人可以告诉我如何让我的动画活动在屏幕打开后立即显示，并在完成后立即关闭屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:51:09.297

但是这个接收器到你的清单

```
<receiver android:name="IntentReceiver" >
<intent-filter>
     <action android:name="android.intent.action.SCREEN_ON" ></action>
     <action android:name="android.intent.action.SCREEN_OFF" ></action>
</intent-filter>
</receiver>

 public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       this.requestWindowFeature(Window.FEATURE_NO_TITLE);
       setContentView(R.layout.activity_main);

       registerReceiver(new BroadcastReceiver() {                           
       public void onReceive(Context arg0, Intent arg1) {
            Log.v("tag", "screen on");
            // You can catch  screen on here and start your animation
         }
       }, new IntentFilter(Intent.ACTION_SCREEN_ON));

       registerReceiver(new BroadcastReceiver() {
       public void onReceive(Context arg0, Intent arg1) {
            Log.v("tag", "screen off");
            // You can catch  screen off here and start your animation
          }
        }, new IntentFilter(Intent.ACTION_SCREEN_OFF));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:54:44.743

至于最初的延迟和看到键盘保护的一部分，我认为没有办法防止这种情况发生。[但是，您可以通过调用PowerManager.goToSleep](http://developer.android.com/reference/android/os/PowerManager.html#goToSleep%28long%29)来强制关闭屏幕。

# mule - 在 Mule 线程以外的线程上调用通过组件绑定创建的代理

> ID：13462696
> 
> 赞同：1
> 
> 时间：2012-11-19T21:37:46.150
> 
> 标签：mule

应用程序可以调用通过非Mule 线程（即应用​​程序创建的线程）上的组件绑定创建的代理吗？我正在尝试这样做，但我在 org.mule.DefaultMuleEvent:268 上得到了 NullPointerException。

在 Mule EE 3.3.0 上

谢谢。

更新：

**骡代码**

```
<mule ...>
    <vm:endpoint path="entryPoint" name="entryPoint" />

    <flow name="entryPoint.Flow">
        <inbound-endpoint ref="entryPoint" exchange-pattern="request-response" />
        <component class="foo.Component">
            <binding interface="foo.Interface" method="echo">
            <vm:outbound-endpoint path="foo.Interface.echo" exchange-pattern="request-response" />
        </binding>
        </component>
    </flow>

    <flow name="foo.Interface.echo">
        <vm:inbound-endpoint path="foo.Interface.echo" exchange-pattern="request-response" />
        <logger level="INFO" />
    </flow>

</mule> 
```

**Java 组件**

```
package foo;

import static java.util.concurrent.Executors.newSingleThreadExecutor;

import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;

public class Component {

    private Interface i;

    public String foo(final String input) {
        return callInterfaceOnAWorkerThreadWith(input);
    }

    public void setInterface(final Interface i) {
        this.i = i;
    }

    private String callInterfaceOnAWorkerThreadWith(final String input) {
        ExecutorService executorService = newSingleThreadExecutor();
        Future<String> future = executorService.submit(new Callable<String>() {

            @Override
            public String call() throws Exception {
                return i.echo(input);
            }

        });
        executorService.shutdown();
        try {
            executorService.awaitTermination(60, TimeUnit.SECONDS);
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }

        try {
            return future.get();
        } catch (InterruptedException | ExecutionException e) {
            throw new RuntimeException(e);
        }

    }

} 
```

**Java 接口**

```
package foo;

public interface Interface {

    String echo(String input);

} 
```

**执行 mule 应用程序的测试夹具**

```
package foo;

import static org.junit.Assert.assertEquals;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.runners.MockitoJUnitRunner;
import org.mule.api.MuleException;
import org.mule.api.MuleMessage;
import org.mule.api.client.MuleClient;
import org.mule.tck.junit4.FunctionalTestCase;

@RunWith(MockitoJUnitRunner.class)
public class ATest extends FunctionalTestCase {

    @Test
    public void echo() {
        final MuleClient client = muleContext.getClient();
        MuleMessage reply = send(client, "entryPoint", "a string");
        assertEquals("a string", reply.getPayload());
    }

    @Override
    protected String getConfigResources() {
        return "app/componentbindingonanotherthread.xml";
    }

    private MuleMessage send(final MuleClient client, final String url, final Object payload) {
        try {
            return client.send(url, payload, null, RECEIVE_TIMEOUT);
        } catch (final MuleException e) {
            throw new RuntimeException(e);
        }
    }

} 
```

执行上面的代码会在日志中显示以下异常：

```
Root Exception stack trace:
java.lang.NullPointerException
    at org.mule.DefaultMuleEvent.<init>(DefaultMuleEvent.java:268)
    at org.mule.component.BindingInvocationHandler.invoke(BindingInvocationHandler.java:96)
    at $Proxy14.echo(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:47:43.893

问题归结为 Mule通过 using`BindingInvocationHandler`查找电流，这是-bound。换句话说，由于您在另一个线程中执行绑定，所以 Mule 上下文会丢失，并且您会遇到上述失败。`MuleEvent``RequestContext.getEvent()``ThreadLocal`

使用 Mule 的工人管理器（您可以从 MuleContext 获得），这将是使用您自己的更好的设计`ExecutorService`，但仍然无法解决问题，因为依赖`BindingInvocationHandler`于（已弃用！）`RequestContext.getEvent()`构造。

我认为您需要重新考虑您的设计，因为当您真正研究它时，IMO 没有多大意义。在另一个线程上执行绑定不会给您带来任何好处，因为它`entryPoint`是请求-响应，因此入站线程被从池中调动。在绑定完成之前，该线程保持阻塞状态，无论绑定本身是由该线程还是由另一个线程执行。

如果出于我无法理解的原因，您确实需要在另一个线程中执行绑定，则将绑定移动到另一个流中并使用[`request-reply`消息处理器](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-RequestReply)调用它。

这里的教训是：Mule 已经拥有丰富的线程模型，最好使用它提供的线程结构（`request-reply`、、 VM 队列）在其中发挥作用`async`，`one-way`而不是编写自己的代码。

# jquery - 点击时计算元素

> ID：13462700
> 
> 赞同：0
> 
> 时间：2012-11-19T21:38:01.210
> 
> 标签：jquery, class, click

这是我的jQuery代码：

```
$(document).on('click', '.filter_author_wrapper', function(event) {

            var filter_author_wrapper_selected = $('.f_a_w_selected');
            var selected_authors_num = filter_author_wrapper_selected.length;

            if ($(this).hasClass('f_a_w_selected')) {
                $(this).removeClass('f_a_w_selected')
                    .queue(function() {
                        var filter_authors_selected = $('#filter_authors_selected');
                        filter_authors_selected.html(selected_authors_num + ' /');
                        $(this).dequeue();                      
                    });
            } else {
                $(this).addClass('f_a_w_selected')
                    .queue(function() {
                        var filter_authors_selected = $('#filter_authors_selected');
                        filter_authors_selected.html(selected_authors_num + ' /');
                        $(this).dequeue();                      
                    });
            }

        }); 
```

每次我点击一个元素`.f_a_w_selected`类都会被应用，或者如果它已经被应用就被删除，并计算有多少元素有这个类。

上面的代码计算了在点击之前具有特定类的元素。如何一键应用此类并使用此类计算元素？

我希望这是可以理解的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:42:55.873

好吧...对不起，但是您的代码有点冗长，所以让我重写它...

```
$(document).on('click', '.filter_author_wrapper', function(event) {
  $(this).toggleClass('f_a_w_selected');
  var num = $('.f_a_w_selected').length;
  $('#filter_authors_selected').html(num + ' /');
}); 
```

此外，`document`可能不是与您的最近的祖先`.filter_author_wrapper`，因此为了从委托事件中获得更好的性能，请***在初始化时将您的处理程序附加到 DOM 中最近的父元素***

# ffmpeg - 多媒体框架的差异

> ID：13462702
> 
> 赞同：2
> 
> 时间：2012-11-19T21:38:17.260
> 
> 标签：ffmpeg, gstreamer, vlc, phonon, libvlc

我最近一直在研究为我的应用程序添加音频和视频功能的不同**多媒体框架**。

我一直在研究**phonon、gstreamer、ffmpeg、libvlc/vlc**。

但是，我找不到一个很好的资源来回答我的一些一般问题。

*   这些可以互换吗？
*   他们在同一级别上工作吗？
*   您是否有任何使用过的经验，并且可以就您为什么选择其中一个提供反馈？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:16:50.853

> 这些可以互换吗？

一般不会。Phonon 是一个封装了实际多媒体框架的高级 API，它允许您更改后端，但另一方面限制了您可以做的事情。

> 他们在同一级别上工作吗？

不。你提到的有些是高级别的，有些是低级的。

> 您是否有任何使用过的经验，并且可以就您为什么选择其中一个提供反馈？

你真的应该说出你想做什么。然后人们可以建议什么框架可能是合适的。gstreamer 等较低级别的框架涵盖了相当多的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:15:19.467

有一个适用于 Windows 和 OS/X 的“GStreamer SDK”可以让你在这些平台上轻松入门（在 Linux 上，你只需安装发行版的 -dev 包）。SDK 附带 snappy，这是一个使用 clutter 的小型媒体播放器，但您当然可以使用其他一些工具包或 API 轻松构建自己的播放器。

# objective-c - for循环中的objective c内存管理

> ID：13462703
> 
> 赞同：1
> 
> 时间：2012-11-19T21:38:20.057
> 
> 标签：objective-c, ios, xcode, memory-management

我想执行一个看起来像这样的 for 循环：

```
 for (id object in [[MyClass methodReturningSet] allObjects]) {
      //do something
} 
```

该 methodReturningSet 看起来像这样：

```
- (NSSet *)methodReturningSet {
         MyObject *object1 = [[MyObject alloc] initWithCustomInfo:info1] autorelease];
         MyObject *object2 = [[MyObject alloc] initWithCustomInfo:info2] autorelease];
         MyObject *object3 = [[MyObject alloc] initWithCustomInfo:info3] autorelease];
         MyObject *object4 = [[MyObject alloc] initWithCustomInfo:info4] autorelease];

         return [NSSet setWithObjects: object1, object2, object3, object4, nil];
} 
```

我的问题是，这在内存管理方面是否安全？

我目前的理解是，在运行循环完成后，“对象”将被发送一条释放消息。

我的第一个问题是，整个 for 循环是否在一个运行循环中执行？

我的第二个问题是，是否通过自动释放池向对象发送释放消息是否重要，因为我们循环的数组拥有对其包含的所有对象的强引用？

希望这很清楚。. . 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:44:20.823

> 我的第一个问题是，整个 for 循环是否在一个运行循环中执行？

是的。

> 我的第二个问题是，是否通过自动释放池向对象发送释放消息是否重要，因为我们循环的数组拥有对其包含的所有对象的强引用？

将[`NSSet`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html)保留您传递给它的对象。将对象添加到其中后，如果不再需要它们，可以释放自己的引用。这可以是在将它们添加到集合后的正常释放调用（见下文），也可以是自动释放调用，就像你做的那样。当您释放 时`NSSet`，它还将释放（在本例中为释放）它的所有对象。

您可以使用正常的发布消息来喜欢这样：

```
- (NSSet *)methodReturningSet {
     MyObject *object1 = [[MyObject alloc] initWithCustomInfo:info1];
     MyObject *object2 = [[MyObject alloc] initWithCustomInfo:info2];
     MyObject *object3 = [[MyObject alloc] initWithCustomInfo:info3];
     MyObject *object4 = [[MyObject alloc] initWithCustomInfo:info4];

     NSSet *set = [NSSet setWithObjects: object1, object2, object3, object4, nil];

     [object1 release];
     [object2 release];
     [object3 release];
     [object4 release];

    return set;
} 
```

**话虽如此，请考虑使用[自动引用计数 (ARC)](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:51:03.167

> 我的第一个问题是，整个 for 循环是否在一个运行循环中执行？

是的。

> 我的第二个问题是，是否通过自动释放池向对象发送释放消息是否重要，因为我们循环的数组拥有对其包含的所有对象的强引用？

显式使用`autorelease`或释放​​对象不会有任何区别，因为正如您所说，它们也被`NSSet`对象保留；`for`因此它将在循环的整个持续时间内存在，并在释放`NSSet`通过返回的自动释放时`methodReturningSet`被释放。

如果您不自动释放它并在循环之外显式释放它，您可能会明显改善一些事情`NSSet`（但这只会在您离开循环后不立即返回时产生影响）。

# zurb-foundation - .png IE 中的基础轨道滑块问题

> ID：13462710
> 
> 赞同：0
> 
> 时间：2012-11-19T21:38:48.260
> 
> 标签：zurb-foundation

每当轨道滑块完成加载时，png 图像和文本似乎具有黑色背景而不是透明...

我尝试通过设置背景和颜色属性来使用 !important 标签，但无济于事。附图片。任何帮助表示赞赏！

![在此处输入图像描述](../Images/25c78d531f0a08b4c3d1b7d94126149b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:28:35.513

在你的 orbit.css 中改变这个

```
#featured { 
    background: #000 url('orbit/loading.gif') no-repeat center center;
} 
```

对此

```
#featured { 
    background: rgba(0,0,0,0) url('orbit/loading.gif') no-repeat center center; 
} 
```

# apache - fcgi 扩展 apache

> ID：13462711
> 
> 赞同：1
> 
> 时间：2012-11-19T21:38:49.157
> 
> 标签：apache, ubuntu, fastcgi

我最近一直在玩 fastcgi，但在忽略扩展名的同时访问 *.fcgi 文件时遇到问题。在 ubuntu + apache2 + libapache2-mod-php5 中，无需将扩展名放入 url 即可访问 php 文件。我查看了我的可用站点文件夹，并设置了 +Multiviews。我查看了 php5.conf 并类似地配置了我的 fastcgi.conf，但我没有得到相同的结果。有没有人有在没有扩展的情况下访问 fastcgi 的经验，或者有没有人知道 apache 是如何做到的。

# c# - 为什么 Observable.Generate() 会抛出 System.StackOverflowException？

> ID：13462713
> 
> 赞同：10
> 
> 时间：2012-11-19T21:38:49.953
> 
> 标签：c#, .net, system.reactive, scheduler

我正在编写一个 C# (.NET 4.5) 应用程序，用于聚合基于时间的事件以进行报告。为了使我的查询逻辑可重用于实时和历史数据，我使用了 Reactive Extensions (2.0) 及其`IScheduler`基础设施（`HistoricalScheduler`和朋友）。

例如，假设我们创建了一个事件列表（按时间顺序排序，但它们可能重合！），其唯一的有效负载是它们的时间戳，并且想知道它们在固定持续时间的缓冲区中的分布：

```
const int num = 100000;
const int dist = 10;

var events = new List<DateTimeOffset>();
var curr = DateTimeOffset.Now;
var gap = new Random();

var time = new HistoricalScheduler(curr);

for (int i = 0; i < num; i++)
{
    events.Add(curr);
    curr += TimeSpan.FromMilliseconds(gap.Next(dist));
}

var stream = Observable.Generate<int, DateTimeOffset>(
    0,
    s => s < events.Count,
    s => s + 1,
    s => events[s],
    s => events[s],
    time);

stream.Buffer(TimeSpan.FromMilliseconds(num), time)
    .Subscribe(l => Console.WriteLine(time.Now + ": " + l.Count));

time.AdvanceBy(TimeSpan.FromMilliseconds(num * dist)); 
```

运行此代码会产生`System.StackOverflowException`以下堆栈跟踪（一直是最后 3 行）：

```
mscorlib.dll!System.Threading.Interlocked.Exchange<System.IDisposable>(ref System.IDisposable location1, System.IDisposable value) + 0x3d bytes    
System.Reactive.Core.dll!System.Reactive.Disposables.SingleAssignmentDisposable.Dispose() + 0x37 bytes    
System.Reactive.Core.dll!System.Reactive.Concurrency.ScheduledItem<System.DateTimeOffset>.Cancel() + 0x23 bytes    
...
System.Reactive.Core.dll!System.Reactive.Disposables.AnonymousDisposable.Dispose() + 0x4d bytes    
System.Reactive.Core.dll!System.Reactive.Disposables.SingleAssignmentDisposable.Dispose() + 0x4f bytes    
System.Reactive.Core.dll!System.Reactive.Concurrency.ScheduledItem<System.DateTimeOffset>.Cancel() + 0x23 bytes    
... 
```

好的，问题似乎来自我`Observable.Generate()`对 的使用，具体取决于列表大小（`num`）并且无论调度程序的选择如何。

我究竟做错了什么？`IObservable`或者更一般地说，从`IEnumerable`提供自己时间戳的事件中创建事件的首选方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T21:54:50.493

（更新 - 意识到我没有提供替代方案：见答案底部）

问题在于如何`Observable.Generate`工作 - 它用于根据参数展开[核心递归](http://en.wikipedia.org/wiki/Corecursion)（认为递归由内而外）生成器；如果这些参数最终生成了一个*非常*嵌套的 corecursive 生成​​器，那么你会炸毁你的堆栈。

从这一点开始，~~我推测了很多（我面前没有 Rx 源）~~（见下文），但我敢打赌你的定义最终会扩展为：

```
initial_state =>
generate_next(initial_state) => 
generate_next(generate_next(initial_state)) => 
generate_next(generate_next(generate_next(initial_state))) =>
generate_next(generate_next(generate_next(generate_next(initial_state)))) => ... 
```

一直持续到你的调用堆栈变得足够大而溢出。比如说，一个方法签名 + 你的 int 计数器，每次递归调用大约需要 8-16 个字节（更多取决于状态机生成器的实现方式），所以 60,000 听起来是正确的（最大 1M / 16 ~ 62500深度）

编辑：提取源代码-确认：生成的“运行”方法如下所示-注意嵌套调用`Generate`：

```
protected override IDisposable Run(
    IObserver<TResult> observer, 
    IDisposable cancel, 
    Action<IDisposable> setSink)
{
    if (this._timeSelectorA != null)
    {
        Generate<TState, TResult>.α α = 
                new Generate<TState, TResult>.α(
                     (Generate<TState, TResult>) this, 
                     observer, 
                     cancel);
        setSink(α);
        return α.Run();
    }
    if (this._timeSelectorR != null)
    {
        Generate<TState, TResult>.δ δ = 
               new Generate<TState, TResult>.δ(
                   (Generate<TState, TResult>) this, 
                   observer, 
                   cancel);
        setSink(δ);
        return δ.Run();
    }
    Generate<TState, TResult>._ _ = 
             new Generate<TState, TResult>._(
                  (Generate<TState, TResult>) this, 
                  observer, 
                  cancel);
    setSink(_);
    return _.Run();
} 
```

编辑： Derp，没有提供任何替代方案......这是一个可能有效的方案：

（编辑：固定`Enumerable.Range`，所以流大小不会乘以`chunkSize`）

```
const int num = 160000;
const int dist = 10;

var events = new List<DateTimeOffset>();
var curr = DateTimeOffset.Now;
var gap = new Random();
var time = new HistoricalScheduler(curr);

for (int i = 0; i < num; i++)
{
    events.Add(curr);
    curr += TimeSpan.FromMilliseconds(gap.Next(dist));
}

    // Size too big? Fine, we'll chunk it up!
const int chunkSize = 10000;
var numberOfChunks = events.Count / chunkSize;

    // Generate a whole mess of streams based on start/end indices
var streams = 
    from chunkIndex in Enumerable.Range(0, (int)Math.Ceiling((double)events.Count / chunkSize) - 1)
    let startIdx = chunkIndex * chunkSize
    let endIdx = Math.Min(events.Count, startIdx + chunkSize)
    select Observable.Generate<int, DateTimeOffset>(
        startIdx,
        s => s < endIdx,
        s => s + 1,
        s => events[s],
        s => events[s],
        time);

    // E pluribus streamum
var stream = Observable.Concat(streams);

stream.Buffer(TimeSpan.FromMilliseconds(num), time)
    .Subscribe(l => Console.WriteLine(time.Now + ": " + l.Count));

time.AdvanceBy(TimeSpan.FromMilliseconds(num * dist)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T21:13:17.310

好的，我采用了一种不同的工厂方法，它不需要 lamdba 表达式作为状态转换，现在我不再看到任何堆栈溢出。我还不确定这是否可以作为我问题的正确答案，但它有效，我想我会在这里分享：

```
var stream = Observable.Create<DateTimeOffset>(o =>
    {
        foreach (var e in events)
        {
            time.Schedule(e, () => o.OnNext(e));
        }

        time.Schedule(events[events.Count - 1], () => o.OnCompleted());

        return Disposable.Empty;
    }); 
```

在（！）返回订阅之前手动安排事件对我来说似乎很尴尬，但在这种情况下，它可以在 lambda 表达式中完成。

如果这种方法有任何问题，请纠正我。此外，我仍然很高兴听到`System.Reactive`我的原始代码违反了哪些隐含假设。

（哦，天哪，我应该早点检查一下：使用 RX v1.0，原来的`Observable.Generate()`确实似乎工作！）

# java - 通过 TCP 套接字发送对象 - ClassNotFoundException

> ID：13462721
> 
> 赞同：1
> 
> 时间：2012-11-19T21:39:08.830
> 
> 标签：java, sockets, classnotfoundexception

我有两个简单的应用程序：客户端和服务器。客户端加密（简单 AES）自定义对象并通过 TCP 套接字将其作为字节发送到服务器。服务器解密这些字节并调用重新创建此对象的方法，如下所示：

```
private static Object getObjectFromBytes(byte[] credentials) throws IOException,      ClassNotFoundException{

    ByteArrayInputStream bis = new ByteArrayInputStream(credentials);
    ObjectInput in = null;
    Object credentialsObj = null;

    try {

        in = new ObjectInputStream(bis);
        credentialsObj = in.readObject(); 

    } finally {
      bis.close();
      in.close();
    }
    return credentialsObj;
} 
```

在客户端，当我加密这个对象时，它的类型是`mds.hm5.client.ITU_Credentials`. 在服务器端，当我解密它并转换回对象时，它应该是`mds.hm5.tokenservice.ITU_Credentials`. 相反，我得到以下异常：

```
java.lang.ClassNotFoundException: mds.hm5.client.ITU_Credentials 
```

**他正在通过旧的类路径寻找这个对象。为什么会发生，我应该如何解决？**

*附加信息：*

这是我在客户端将此对象转换为字节数组的方法：

```
private static byte[] getBytesFromObject(Object credentials) throws IOException{

    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutput out = null;
    byte[] newBytes = null;

    try {

      out = new ObjectOutputStream(bos);   
      out.writeObject(credentials);
      newBytes = bos.toByteArray();

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
      out.close();
      bos.close();
    }
    return newBytes;
} 
```

我使用泛型类型的原因`Object`是因为我将使用这些方法来转换/加密/解密多种类型。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:55:37.757

> 在客户端，当我加密这个对象时，它的类型是 mds.hm5.client.ITU_Credentials。

这就是序列化流中的内容。

> 在服务器端，当我解密它并转换回对象时，它应该是 mds.hm5.tokenservice.ITU_Credentials。

不，不应该。它应该和你序列化它时一样[除非你已经采取了某些神奇的步骤，显然你没有。没有这些魔法步骤，就没有魔法，也没有任何联系`mds.hm5.client.ITU_Credentials`] `mds.hm5.tokenservice.ITU_Credentials`。您有两个具有相同名称和不同包的不同类，每个位置都有一个。他们不一样。

> 他正在通过旧的类路径寻找这个对象。

您对 CLASSPATH 和包名称感到困惑。他们不是一回事。*它通过它的实际包名*来寻找这个对象。它还能做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:45:07.233

对象输出流不会序列化类本身，而只会序列化其状态（字段值）。接收器需要它的类路径上的类文件。

也可以转班。您必须找到（或编写）一个可以从您的连接加载类的类加载器。如果你有你的类文件的 URL，那么你可以使用 URLClassloader。然后您不必将该类添加到您的类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:43:31.767

您的客户端需要在其类路径中包含定义对象的 .class 文件。您正在做的是序列化/反序列化实例，而不是类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-28T00:37:06.187

迟了，但将来可能对某人有用：我想发送一个对象**消息**，其包是客户端的*实体*，但在服务器端，这个**消息**类没有嵌套在*实体*包中，所以抛出了这个异常. 这可能很愚蠢，但我花了很多时间来弄清楚这一点。

# linux - 使用 VideoCapture 来自网络摄像头的 50% 错误图片

> ID：13462723
> 
> 赞同：1
> 
> 时间：2012-11-19T21:39:13.467
> 
> 标签：linux, opencv, webcam, capture, v4l

我想使用 openCV 从 Logitech C300 网络摄像头获取单帧。当我使用下面的代码时。图像已保存，但在大约 50% 的情况下，它们包含错误（[参见图像](http://s1.directupload.net/images/121119/nl7ggood.jpg)）。

我现在已经搜索了几个小时，但由于我不知道是什么原因造成的，我不确定哪个关键字可能有助于搜索。对我来说，看起来好像在摄像头仍在更新帧时读取了来自网络摄像头的图像（但这只是一个猜测）。我测试了 uvccapture，它使用标准选项会产生相同的问题（但不太常见），但在使用 -m 选项时可以正常工作。根据手册页，它是“将捕获模式切换为 YUYV 捕获”。

所以我的问题是，有没有办法在 openCV 中使用这种模式？我想避免直接使用 v4l2。

```
VideoCapture cap(0);
if(!cap.isOpened())
cout << "Opening video device failed" << endl;
cap.set(CV_CAP_PROP_FRAME_WIDTH, 1280);
cap.set(CV_CAP_PROP_FRAME_HEIGHT, 1024);
Mat frame;
for(int i = 0; i<50; i++)

{
    stringstream str;
    str << "/home/ubuntu/image" << i<< ".jpg";
    cap >> frame;
    imwrite(str.str(), frame);
    cout << i << endl;
}

return 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:42:32.227

您是否尝试过不设置框架的宽度和高度？

如有必要，您也可以稍后重新缩放图像，默认情况下，您将从 VideoCapture 获得最大分辨率。

是的，也尝试在每一帧之前等待：

```
cv::waitKey(30); // it waits only for 30ms, that could be your fps on the webcam. 
```

编辑：

看看[卡尔菲利普的回答](https://stackoverflow.com/a/7795254/1705967)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:43:26.363

[我在这里](https://groups.google.com/forum/?fromgroups=#!topic/beagleboard/m2InXS9AhzY)找到了另一个线程，它指出openCV如何捕获帧的实现可能是罪魁祸首：

> OpenCV 调用 video-4-linux (v4l2) 以从相机请求 RGB 帧。我的相机提供 JPEG 压缩图像，v4l2 使用非常慢的软件解码器解压缩。

我正在使用 BeagleBoard，在使用（方便的）openCV 功能时，我遇到了上述问题。我尝试了线程中链接的程序 Martin Fox，它直接使用 v4l2 从网络摄像头获取 YUV 帧。现在可以毫无问题地获得高达 1280x1024 像素的图片 网络摄像头传感器的分辨率是多少。

# c++ - 如何使用 Tokenization 即 strtok() 函数比较两个字符串？

> ID：13462725
> 
> 赞同：1
> 
> 时间：2012-11-19T21:39:21.997
> 
> 标签：c++

我知道如何使用 strtok() 函数标记字符串。现在我将数据保存在链表中。如果我使用 cin.ignore 从用户那里获取输入，我将如何将输入的单词与我喜欢的列表中的数据进行比较。PS：概念是开发一个搜索引擎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:51:44.330

1.  不要使用 strtok。
2.  不要使用链表。
3.  cin.ignore 不会让你从用户那里得到输入。
4.  把你的话放在一个`std::set`（或 unordered_set）中，然后用`your_set.find`.

顺便说一句，我怀疑这对搜索引擎会有多大好处，除了（可能）用于停止列表 - 确定当前单词是否是您想要忽略的单词。例如，建立一个“a”、“an”、“the”等不值得索引的列表，当你索引某些东西时，检查它是否在最后一个（如果是，显然忽略它） .

# magento - 在 Magento 中编辑模板布局

> ID：13462729
> 
> 赞同：2
> 
> 时间：2012-11-19T21:39:36.777
> 
> 标签：magento

我正在尝试编辑基于 Magento 的网站主页的右侧边栏。当我编辑主页部分中的`Layout Update XML`字段时`Custom design`，我看到以下代码：

```
<reference name="right">
  <action method="unsetChild"><name>catalog.compare.sidebar</name></action>
  <action method="unsetChild"><name>right.newsletter</name></action>
  <action method="unsetChild"><name>cart_sidebar</name></action>
  <block type="catalog/product_new" name="home.catalog.product.new" alias="product_new" template="catalog/product/new.phtml" after="cms_page"/>
</reference> 
```

但我找不到块标记中指定的布局在哪里。当我删除整个代码时，侧边栏仍在显示，但比较侧边栏 Widet 位于侧边栏的其余部分之上。

我是 Magento 的新手，有点迷茫。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:45:55.707

用这个

```
<remove name="catalog.compare.sidebar"/> 
```

在`default`

像这样

```
<default>
  <reference name="right">
      <remove name="catalog.compare.sidebar"/>
   </reference>

</default> 
```

它会起作用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:10:21.580

完成的最佳方法是在主题布局部分下创建 local.xml 文件并粘贴此代码。因此，您无需搜索所有文件。

```
<layout version="0.1.0">
    <default>
        <!-- remove compare sidebar -->
        <remove name="catalog.compare.sidebar"/>
    </default>
</layout> 
```

# sql - SQL：从多个表中选择并排序

> ID：13462733
> 
> 赞同：0
> 
> 时间：2012-11-19T21:39:44.093
> 
> 标签：sql

在过去的一个小时里，我一直在努力解决这个问题。

我需要查看哪些员工在部门 10 和 30 工作，以及他们工作的地点。有一个员工表，其中列出了员工姓名和部门编号，还有一个部门表，其中列出了位置和部门编号。

这是我尝试过的：

```
SELECT Departments.Location, Departments.DeptNo, Employees.Ename
FROM DEPARTMENTS, EMPLOYEES
WHERE Employees.DeptNo IN (10, 30)
Order BY Location ASC; 
```

结果很糟糕，例如，当我输入的数据没有反映这一点时，它会列出多个城市的员工。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:41:58.387

问题是您正在生成[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。`JOIN`您现有的查询在两个表之间没有任何条件。您需要`JOIN`以下表格：

```
SELECT d.Location, d.DeptNo, e.Ename
FROM DEPARTMENTS d
INNER JOIN EMPLOYEES e
    on d.deptno = e.deptno
WHERE e.DeptNo IN (10, 30)
Order BY Location ASC; 
```

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5e266/1)

内部加入结果：

```
| LOCATION | DEPTNO | ENAME |
-----------------------------
|     Loc2 |     10 |  emp2 |
|     Loc2 |     10 |  emp3 |
|     Loc3 |     30 |  emp6 |
|     Loc3 |     30 |  emp4 |
|     Loc3 |     30 |  emp5 | 
```

不使用`JOIN`语法的笛卡尔查询将产生如下结果（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/5e266/4)）：

```
| LOCATION | DEPTNO | ENAME |
-----------------------------
|     Loc1 |      1 |  emp6 |
|     Loc1 |      1 |  emp4 |
|     Loc1 |      1 |  emp2 |
|     Loc1 |      1 |  emp5 |
|     Loc1 |      1 |  emp3 |
|     Loc2 |     10 |  emp3 |
|     Loc2 |     10 |  emp6 |
|     Loc2 |     10 |  emp4 |
|     Loc2 |     10 |  emp2 |
|     Loc2 |     10 |  emp5 |
|     Loc3 |     30 |  emp3 |
|     Loc3 |     30 |  emp6 |
|     Loc3 |     30 |  emp4 |
|     Loc3 |     30 |  emp2 |
|     Loc3 |     30 |  emp5 | 
```

如果你想在你的 then 之间使用逗号，则**必须**在子句中包含连接条件，`WHERE`这将产生与版本相同的结果`INNER JOIN`：

```
select d.Location, d.DeptNo, e.ename
from departments d, employees e
WHERE e.DeptNo IN (10, 30)
   and d.deptno = e.deptno
Order BY Location ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:41:58.463

试试这个：

```
SELECT Departments.Location, Departments.DeptNo, Employees.Ename
FROM DEPARTMENTS JOIN EMPLOYEES ON (Departments.DeptNo = Employees.DeptNo)
WHERE Employees.DeptNo IN (10, 30)
Order BY Location ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:42:58.613

您没有将表与主要外来连接，因此您得到了笛卡尔结果：

```
SELECT Departments.Location, Departments.DeptNo, Employees.Ename
FROM DEPARTMENTS, EMPLOYEES
WHERE Employees.DeptNo IN (10, 30)
AND   Employees.DeptNo = DEPARTMENTS.DeptNo -- <-------
Order BY Location ASC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:44:26.597

现在有点毫无意义，但评论很有趣：

原始要求

```
Select
  Count(*)
From
  Employees e
Where
  e.DeptNo In (10, 30) 
```

明确要求

```
Select
  *
From
  Employees e
Where
  e.DeptNo In (10, 30) 
```

很好，您了解了有关联接的一些知识，但您似乎仍然不需要他们来回答这个问题？只是现在你会说你也需要他们的位置？该死的我和我的精神能力。就像不复制另一个答案一样。（请不要在现实中使用它）

```
Select
  (select
     d.location 
   from
     departments d 
   where
     d.deptno = e.deptno
  ) as Department,
  e.*
From
  Employees e
Where
  e.DeptNo In (10, 30) 
```

看看还是没有加入！（并不真地）

[http://sqlfiddle.com/#!2/5e266/7](http://sqlfiddle.com/#!2/5e266/7)

# javascript - 在 knout.js 中遍历 observablearray 时，如何检索 foreach 的 ko.computed 运行总和

> ID：13462742
> 
> 赞同：1
> 
> 时间：2012-11-19T21:39:57.347
> 
> 标签：javascript, foreach, knockout.js

我在淘汰视图模型中有一个 ProjectPeriod 项目列表作为 observableArray，其中包括每个时期的月数。我想显示 foreach 中每一行的结束日期。目前，我在 viewModel 中使用 ko.computed 值，但我无法遍历每个项目直到显示的项目。如何循环并将仅显示到 foreach 中当前项目的值相加？

目前我有以下 HTML：

```
<table>
    <tr class="tableHeader">
        <th>Period</th>
        <th>Number of Months</th>
        <th>End of Period</th>
    </tr>
    <tbody data-bind="foreach: ProjectPeriod">
        <tr>
            <td><input data-bind="value: ProjectYearText" /></td>
            <td><input data-bind="value: PeriodMonths" /></td>
            <td data-bind="text: endDate"></td>
        </tr>
    </tbody>
</table> 
```

和以下视图模型：

```
function ProjectPeriod(projectYearId, projectYearText, periodMonths, viewModel) {
    var self = this;
        self.ProjectYearId = projectYearId;
        self.ProjectYearText = ko.observable(projectYearText);
        self.PeriodMonths = ko.observable(periodMonths);
        self.viewModel = viewModel;

        self.endDate = ko.computed(function () {
            var startDate = hfProjectDates.Get("ProjectStartDate");

            // Calculate the number of months from the beginning to the current period.
            var monthCount = 0;
            ko.utils.arrayForEach(self.viewModel.ProjectPeriods(), function (projectPeriod) {
                if (projectPeriod.ProjectYearId < self.ProjectYearId)
                    monthCount += projectPeriod.PeriodMonths;
                });

            var endDate = moment(startDate).add('M', monthCount);
            return endDate ? endDate.format("M/DD/YYYY") : "None";
        });
    }

    function ProjectPeriodViewModel() {
        // Data
        var self = this;

        self.ProjectPeriods = ko.observableArray([
            new ProjectPeriod(1, "1st Year", 12, ProjectPeriodViewModel),
            new ProjectPeriod(2, "2nd Year", 12, ProjectPeriodViewModel),
            new ProjectPeriod(3, "3rd Year", 12, ProjectPeriodViewModel)
        ]);

    } 
```

我真的才刚刚开始使用 Knockout，所以我预计我处理这个问题的方式会有很多问题。但具体来说，我需要显示运行结束日期。

**更新：**根据 Matt;s 的反馈，我已经更新为在 ProjectPeriod 中包含 observable，但我遇到了从 viewModel 获取引用并遍历数组的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:43:48.130

有几种方法可以解决这个问题，我可能会做的是将计算属性移动到`ProjectPeriod`对象本身并给出对`ProjectPeriod`parent 的引用`ProjectPeriodViewModel`，这样，`ProjectPeriod`将能够访问`ProjectPeriods`并向后计数所有它之前的时期（给每个时期一个索引属性以使其更简单可能是一个想法）。

# c# - UserControl 不是已知元素

> ID：13462751
> 
> 赞同：2
> 
> 时间：2012-11-19T21:40:28.803
> 
> 标签：c#, asp.net, visual-studio-2008, user-controls, web-user-controls

我刚刚在用户控件项目中添加了一个新的 UserControl。我只是使用默认生成的代码，没有任何编辑。当我尝试将 UserControl 放在单独项目的测试页面上时，智能感知会显示我的程序集中的所有用户控件，除了我刚刚添加的那个。如果我输入用户控件的名称，它会说它不是已知元素。我试过以所有不同的顺序重新启动 VS、清理和重建。如何让 VS 识别用户控件？

ascx:

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs" Inherits="CustomControls2.WebUserControl1" %> 
```

ascx.cs

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

namespace CustomControls2
{
    public partial class WebUserControl1 : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

测试页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TestPage2.aspx.cs" Inherits="TestDriver.TestPage2" %>
<%@ Register Assembly="CustomControls2" Namespace="CustomControls2" TagPrefix="Test" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <Test:WebUserControl1 id="asdf" runat="server" />
    </div>
    </form>
</body>
</html> 
```

# node.js - cookie node.js 快递

> ID：13462756
> 
> 赞同：2
> 
> 时间：2012-11-19T21:40:50.320
> 
> 标签：node.js, cookies, express

我正在尝试将 cookie 与 express 一起使用，但我找不到它是如何工作的

```
app.get('/test', function(req, res){
    req.signedCookies.test = "aa";
    console.log(req.signedCookies.test)
    res.send(req.signedCookies.test);
}) 
```

我有一个

但是如果我在之后尝试 /test2 url

```
app.get('/test', function(req, res){
    console.log(req.signedCookies.test)
    res.send("test");
}) 
```

我有未定义

我的浏览器中也没有测试 cookie

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T21:47:17.927

如果要发送 cookie，则必须在响应 ( `res`) 中设置它们。更改*请求*( `req`) 中的值不会执行任何操作。

```
res.cookie('test', 'aa', { signed: true }); 
```

请参阅[`res.cookie`文档](http://expressjs.com/api.html#res.cookie)。

# ruby-on-rails - 在部署之前将 Gemfile.lock 检入版本控制时出现 RVM Capistrano 错误

> ID：13462757
> 
> 赞同：2
> 
> 时间：2012-11-19T21:40:57.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, rvm-capistrano

当我尝试在我的登台机器上使用 Capistrano 进行部署时，我收到以下错误

该错误与 Gemfile.lock 的版本控制有关

```
 ** [out :: 192.168.1.14] The --deployment flag requires a Gemfile.lock. Please make sure you have checked your Gemfile.lock into version control before deploying. 
```

我用来部署的命令如下：

```
cap deploy -S stage=staging 
```

然后，当我执行此命令时，出现以下错误。

错误跟踪的上下文

```
 [192.168.1.14] executing command
 ** [192.168.1.14 :: out] Error reading response length from authentication socket.
 ** [192.168.1.14 :: out] Error reading response length from authentication socket.
 ** [192.168.1.14 :: out] HEAD is now at 09c5581 Adding RVM-capistrano to the Gemfile
    command finished in 5615ms
    copying the cached version to /home/teenscrio/releases/20121119211914
  * executing "cp -RPp /home/teenscrio/shared/cached-copy /home/teenscrio/releases/20121119211914 && (echo 09c5581d51877dea7284870c48103900624f667c > /home/teenscrio/releases/20121119211914/REVISION)"
    servers: ["192.168.1.14"]
    [192.168.1.14] executing command
    command finished in 453ms
  * executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * executing `bundle:install'
  * executing "cd /home/teenscrio/releases/20121119211914 && bundle install --gemfile /home/teenscrio/releases/20121119211914/Gemfile --path /home/teenscrio/shared/bundle --deployment --quiet --without development test"
    servers: ["192.168.1.14"]
    [192.168.1.14] executing command
 ** [out :: 192.168.1.14] The --deployment flag requires a Gemfile.lock. Please make sure you have checked your Gemfile.lock into version control before deploying.
    command finished in 626ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/teenscrio/releases/20121119211914; true"
    servers: ["192.168.1.14"]
    [192.168.1.14] executing command
    command finished in 402ms
failed: "rvm_path=$HOME/.rvm/ /usr/local/rvm/bin/rvm-shell '1.8.7' -c 'cd /home/teenscrio/releases/20121119211914 && bundle install --gemfile /home/teenscrio/releases/20121119211914/Gemfile --path /home/teenscrio/shared/bundle --deployment --quiet --without development test'" on 192.168.1.14 
```

我使用 bundle install 的 Gemfile

```
source 'http://rubygems.org'

gem 'rails', '3.0.6'
gem 'rake', '0.8.7'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql' #Development in windows
# Necesitamos una versión de mysql2 inferior a la 0.3 para poder trabajar con
# la última versión de REE (1.8.7-2012.02) y con Rails 3.0.x
gem 'mysql2', '< 0.3'

gem 'mongrel'
gem 'jquery-rails', '>= 0.2.7' #Replace Prototype with JQuery
gem 'active_scaffold_vho' #Used in typical CRUD interfaces
gem 'inherited_resources', '~> 1.2.1' #Used for more complex views such the home page
gem 'has_scope', '~> 0.5.0' #Used in the positions controller
gem 'json_pure' #Used to parse events
gem 'formtastic', '~> 1.2.3' #Used in forms
gem 'devise', '~> 1.3.4' #Authentication
gem 'recaptcha', :require => 'recaptcha/rails' #Captcha for register

gem 'uuidtools', '~> 2.1.2'

gem 'rvm-capistrano'
gem 'capistrano', '~> 2.6.0' #Deployments

gem 'cgi_multipart_eof_fix'
gem 'fastthread'

gem 'mongoid', "~> 2.0" #Mongoid
gem 'bson_ext', "~> 1.3" #Mongoid

gem 'redis', "~> 2.2.0"
gem 'resque'
gem 'resque-scheduler'

gem 'SystemTimer', "~> 1.2.3" #recomended by mongoid and redis

gem 'ar_mailer_rails3' #Mailer system
gem 'lazy_high_charts', "~> 1.1.1" #Dashboard charts

gem 'rails-breadcrumbs', "~> 1.0.0"

gem 'curb' #Used to send commands to terminals

gem 'geonames', "~> 0.2.2" #Used to 

gem 'activemerchant'

gem 'savon', "~> 0.9.7"

gem 'rack-ssl'
gem 'state_machine'

gem "http_accept_language", '~> 1.0.2'

gem 'recurly', '~> 2.1.0'
gem 'newrelic_rpm'

end 
```

我从 config/deploy.rb 执行的 Capistrano 脚本

```
require "bundler/capistrano"

#$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
require 'rvm/capistrano'
set :rvm_ruby_string, '1.8.7'

set :rvm_bin_path, "/usr/local/rvm/bin"

set :application, "teenscrio"
set :deploy_to, "/home/teenscrio/"

set :stage, "staging" unless variables[:stage]

case stage
when "staging"

    #set :rvm_ruby_string, '/home/teenscrio/.rvm/gems/ruby-1.8.7-p371'
    #set :rvm_type, :user  # Don't use system-wide RVM

    #set :bundle_cmd, '/usr/local/rvm/bin/bundle'

    set :cgi_files_user, "apache"
    set :cgi_files_group, "apache"

    set :restart_rails_file_user, "teenscrio"
    set :restart_rails_file_group, "development"

    default_run_options[:pty] = true
    ssh_options[:forward_agent] = true

    set :scm, "git"
    set :user, "teenscrio"  # The server's user for deploys
    set :scm_username, Capistrano::CLI.ui.ask('Introduce el usuario de git:')
    set :scm_passphrase, Capistrano::CLI.ui.ask('Introduce el password de git:')
    set :scm_verbose, true
    set :branch, "master"
    set :use_sudo, true
    set :deploy_via, :remote_cache

    set :teenscrio1, '192.168.1.14' #Teenscrio 1
    set :teenscrio2, '192.168.1.14' #Teenscrio 2

    set :frontend_machine, teenscrio2
    #FUTUROS FRONTALES DEFINIR ASI
    #set :frontend_machine2, *********
    #set :frontend_machine3, *********
    set :directory_server_machine, teenscrio1
    set :server_machine, teenscrio1

    set :repository,  "git@bitbucket.org:repo.git"  # Your clone URL
    set :local_repository, "git@bitbucket.org:repo.git"  # Your clone URL
    set :tracker_path, "tracker/url"
    set :config_file_sufix, "prd"

    role :web, server_machine
    role :app, server_machine
    role :db,  server_machine, :primary => true
    role :engine, server_machine
    role :dispatcher,  frontend_machine , directory_server_machine #FUTUROS FRONTALES AÑADIR AL ARRAY: frontend_machine, frontend_machine2, frontend_machine3, directory_server_machine
    role :listener, frontend_machine #FUTUROS FRONTALES AÑADIR AL ARRAY: frontend_machine , frontend_machine2 , frontend_machine3]
    role :directory_server, directory_server_machine

    role :directory_server_machine, directory_server_machine
    role :frontend_machine, frontend_machine
    role :server_machine, server_machine

when "production"
    set :cgi_files_user, "apache"
    set :cgi_files_group, "apache"

    set :restart_rails_file_user, "teenscrio"
    set :restart_rails_file_group, "development"

    set :user, 'teenscrio'
    set :use_sudo, true
    set :scm, :subversion

    set :deploy_via, 'export'
    default_run_options[:pty] = true
    set :usuario, Capistrano::CLI.ui.ask('Introduce el usuario de svn:')
    ssh_options[:keys] = [File.join(ENV["HOME"], ".ssh", usuario)]
    set :password, Capistrano::CLI.password_prompt('Introduce la password del usuario teenscrio de producción:')
    set :teenscrio1, '192.168.2.2' #Teenscrio 1
    set :teenscrio2, '192.168.2.3' #Teenscrio 2

    set :frontend_machine, teenscrio2
    #FUTUROS FRONTALES DEFINIR ASI
    #set :frontend_machine2, *********
    #set :frontend_machine3, *********
    set :directory_server_machine, teenscrio1
    set :server_machine, teenscrio1

    set :repository,  "svn+ssh://repo/trunk"
    set :local_repository, "svn+ssh://repo/trunk"
    set :tracker_path, "url/tracker"
    set :config_file_sufix, "prd"

    role :web, server_machine
    role :app, server_machine
    role :db,  server_machine, :primary => true
    role :engine, server_machine
    role :dispatcher,  frontend_machine , directory_server_machine #FUTUROS FRONTALES AÑADIR AL ARRAY: frontend_machine, frontend_machine2, frontend_machine3, directory_server_machine
    role :listener, frontend_machine #FUTUROS FRONTALES AÑADIR AL ARRAY: frontend_machine , frontend_machine2 , frontend_machine3]
    role :directory_server, directory_server_machine

    role :directory_server_machine, directory_server_machine
    role :frontend_machine, frontend_machine
    role :server_machine, server_machine

else
  raise "unsupported staging environment: #{stage}"
end

namespace :webapp do
  web_previous_release = "#{previous_release}/webapp"
  web_release_path = "#{release_path}/webapp"
  web_shared_path = "#{shared_path}/webapp"

  namespace :bundler do
    task :symlink_vendor_rollback, :roles => :app do
      p "********************** BUNDLER:SYMLINK_ROLLBACK ******************************"
      run("ln -sf #{web_previous_release}/Gemfile #{web_shared_path}/Gemfile")
      run("cd #{web_previous_release} && bundle install --path vendor  --without=test development")
    end
    task :symlink_vendor, :roles => :app do
      p "********************** BUNDLER:SYMLINK ******************************"
      shared_gems = File.join(web_shared_path, 'vendor/ruby')
      release_gems = "#{web_release_path}/vendor/ruby"
#      run("mkdir -p #{release_gems}")
      run("mkdir -p #{shared_gems} && ln -sfn #{shared_gems} #{release_gems}")
      run("ln -sf #{current_path}/Gemfile #{shared_path}/Gemfile") #Uncoment this if there is bug in following symlinks when running bundle install
    end

    task :run_bundle_install, :roles => :app do
      p "********************** BUNDLER:BUNDLE INSTALL ******************************"
      run("cd #{web_release_path} && bundle install --binstubs --path vendor --without=test development")
    end

    task :new_release, :roles => :app do
      bundler.symlink_vendor
      bundler.run_bundle_install
    end
  end

  namespace :other do
    task :rename_samples, :roles => :app do
      p "********************** OTHER:RENAME SAMPLES ******************************"
      run("cd #{web_release_path}/config &&
        mv database.yml.sample database.yml &&
        mv mongoid.yml.sample mongoid.yml &&
        mv resque.yml.sample resque.yml &&        
        mv resque_schedule.yml.sample resque_schedule.yml &&
        mv redis.yml.sample redis.yml")
      run("cd #{web_release_path}/script/config &&
        mv resqueRedis.conf.sample resqueRedis.conf")
    end

    task :symlink, :roles => :app do
      p "********************** OTHER:SYMLINK ******************************"
      run("ln -sfn #{web_shared_path}/videos #{web_release_path}/public/videos")
      run("ln -sfn #{shared_path}/agent #{web_release_path}/public/agent")
      run("ln -sfn #{shared_path}/paquetes #{web_release_path}/public/paquetes")
    end

  end

  namespace :ar_mailer do
    task :start, :roles => :app do
      begin
      p "********************** AR_MAILER:START ******************************"
      run("cd #{web_release_path} &&
           export PATH=/opt/ruby/bin:$PATH &&
           export BUNDLE_GEMFILE=#{web_release_path}/Gemfile &&
           ./bin/ar_sendmail_rails3 -e #{stage} -d -p #{shared_path}/pids/ar_mailer.pid")
      rescue
      end
    end

    task :stop, :roles => :app do
    p "********************** AR_MAILER:STOP ******************************"
      begin
        run(" kill -2 `cat #{shared_path}/pids/ar_mailer.pid`")
      rescue
      end
    end
  end

  namespace :resque do

    namespace :web do
      task :start, :roles => :app do
        p "********************** RESQUE:WEB:START ******************************"
        run("cd #{web_release_path} &&
             export PATH=/opt/ruby/bin:$PATH &&
             export BUNDLE_GEMFILE=#{web_release_path}/Gemfile &&
             ./bin/resque-web #{web_release_path}/script/config/resque_web.rb --pid-file #{shared_path}/pids/resque_web.pid ")
      end

      task :stop, :roles => :app do
        begin
          p "********************** RESQUE:WEB:STOP ******************************"
          run("kill -9 `cat #{shared_path}/pids/resque_web.pid`")
        rescue
          p "WARNING: Unable to kill resque web, it may wasn't running"
        end
      end

    end

    namespace :worker do
      task :start, :roles => :app do
        p "********************** RESQUE:WORKER:START ******************************"
        run("cd #{web_release_path} &&
             export PATH=/opt/ruby/bin:$PATH &&
             export BUNDLE_GEMFILE=#{web_release_path}/Gemfile &&
             nohup ./bin/rake environment resque:work QUEUE=* RAILS_ENV=#{stage} VERBOSE=1 PIDFILE=#{shared_path}/pids/resque_worker.pid &")
      end

      task :stop, :roles => :app do
        begin
          p "********************** RESQUE:WORKER:STOP ******************************"
          run("kill -9 `cat #{shared_path}/pids/resque_worker.pid`")
        rescue
          p "WARNING: Unable to kill resque worker, it may wasn't running"
        end
      end

    end

    namespace :scheduler do
      task :start, :roles => :app do
        p "********************** RESQUE:SCHEDULER:START ******************************"
        run("cd #{web_release_path} &&
             export PATH=/opt/ruby/bin:$PATH &&
             export BUNDLE_GEMFILE=#{web_release_path}/Gemfile &&
             nohup ./bin/rake resque:scheduler RAILS_ENV=#{stage} VERBOSE=1 PIDFILE=#{shared_path}/pids/resque_scheduler.pid &")
      end

      task :stop, :roles => :app do
        begin
          p "********************** RESQUE:SCHEDULER:STOP ******************************"
          run("kill -9 `cat #{shared_path}/pids/resque_scheduler.pid`")
        rescue
          p "WARNING: Unable to kill resque scheduler, it may wasn't running"
        end        
      end

    end

    namespace :redis do
      task :start, :roles => :app do
        p "********************** RESQUE:REDIS:START ******************************"
        run("cd #{web_release_path}/script && chmod 755 startResqueRedis.sh")
        run("cd #{web_release_path}/script &&
             nohup ./startResqueRedis.sh &")
      end
    end

    task :stop, :roles => :app do
      web.stop
      scheduler.stop
      worker.stop
    end

    task :start, :roles => :app do
      redis.start
#      scheduler.start
#      worker.start
#      web.start
    end

  end

end

namespace :servers do

  server_queues_path = "#{shared_path}/server/queues"

   namespace :directory_server do
    directory_server_previous_release = "#{previous_release}/server/directory_server"
    directory_server_release_path = "#{release_path}/server/directory_server"
    directory_server_shared_path = "#{shared_path}/server/directory_server"

    task :stop, :roles => :directory_server  do 
      p "********************** directory_server STOP ******************************"
      run("cd #{directory_server_release_path}/scripts && chmod 755 stopDirectoryServer.sh")
      run("cd #{directory_server_release_path}/scripts && ./stopDirectoryServer.sh")
    end

    task :rename_samples, :roles => :directory_server  do
      p "********************** directory_server RENAME SAMPLES ******************************"
      run("cd #{directory_server_release_path}/config &&
        mv config.properties.#{config_file_sufix}.sample config.properties &&
        mv log4j.properties.#{config_file_sufix}.sample log4j.properties")
    end

    task :symlinks, :roles => :directory_server  do
      p "********************** directory_server SYMLINKS ******************************"
      run("ln -sfn #{server_queues_path} #{directory_server_release_path}/scripts/queue")
    end

    task :start, :roles => :directory_server,:shell => "/bin/bash"  do
      p "********************** :directory_server START ******************************"
      run "cd #{directory_server_release_path}/scripts && nohup ./startDirectoryServer.sh #{stage}", :pty => true
      #run("cd #{engine_release_path}/scripts && nohup touch paquito.txt > foo.out 2>&1 &", :pty => true)
    end

    task :compile, :roles => :directory_server  do
      p "********************** :directory_server COMPILE ******************************"
      run("cd #{directory_server_release_path}/scripts && ./installDirectoryServer.sh")
    end

    task :new_release, :roles => :directory_server  do
      directory_server.stop
      directory_server.symlinks
      directory_server.rename_samples
      directory_server.compile
    end

  end

  namespace :engine do
    engine_previous_release = "#{previous_release}/server/engine"
    engine_release_path = "#{release_path}/server/engine"
    engine_shared_path = "#{shared_path}/server/engine"

    task :stop, :roles => :engine  do 
      p "********************** ENGINE: STOP ******************************"
      run("cd #{engine_release_path}/scripts && chmod 755 stopEngine.sh")
      run("cd #{engine_release_path}/scripts && ./stopEngine.sh")
    end

    task :rename_samples, :roles => :engine  do
      p "********************** ENGINE: RENAME SAMPLES ******************************"
      run("cd #{engine_release_path}/config &&
        mv config.properties.#{config_file_sufix}.sample config.properties &&
        mv log4j.properties.#{config_file_sufix}.sample log4j.properties")
    end

    task :symlinks, :roles => :engine  do
      p "********************** ENGINE: SYMLINKS ******************************"
      run("ln -sfn #{server_queues_path} #{engine_release_path}/scripts/queue")
    end

    task :start, :roles => :engine,:shell => "/bin/bash"  do
      p "********************** ENGINE: START ******************************"
      run "cd #{engine_release_path}/scripts && nohup ./startEngine.sh #{stage}", :pty => true
      #run("cd #{engine_release_path}/scripts && nohup touch paquito.txt > foo.out 2>&1 &", :pty => true)
    end

    task :compile, :roles => :engine  do
      p "********************** ENGINE: COMPILE ******************************"
      run("cd #{engine_release_path}/scripts && ./installEngine.sh")
    end

    task :new_release, :roles => :engine  do
      engine.stop
      engine.symlinks
      engine.rename_samples
      engine.compile
    end

  end

  namespace :dispatcher do
    dispatcher_previous_release = "#{previous_release}/server/dispatcher"
    dispatcher_release_path = "#{release_path}/server/dispatcher"
    dispatcher_shared_path = "#{shared_path}/server/dispatcher"

    task :stop, :roles => [:dispatcher] do
      p "********************** DISPATCHER: STOP ******************************"
      run("cd #{dispatcher_release_path}/scripts && chmod 755 stopDispatcher.sh")
      run("cd #{dispatcher_release_path}/scripts && ./stopDispatcher.sh")
    end

    task :start, :roles => [:dispatcher] do
      p "********************** DISPATCHER: START ******************************"      
      run("cd #{dispatcher_release_path}/scripts && nohup ./startDispatcher.sh #{stage}", :pty => true)
    end

    task :symlinks, :roles => [:dispatcher] do
      p "********************** DISPATCHER: SYMLINKS ******************************"
      run("ln -sfn #{server_queues_path} #{dispatcher_release_path}/scripts/queue")
    end

    task :rename_samples, :roles => [:dispatcher] do
      p "********************** DISPATCHER: RENAME SAMPLES ******************************"
      run("cd #{dispatcher_release_path}/config &&
        mv config.properties.#{config_file_sufix}.sample config.properties &&
        mv log4j.properties.#{config_file_sufix}.sample log4j.properties")
    end

    task :compile, :roles => [:dispatcher] do
      p "********************** DISPATCHER: COMPILE ******************************"
      run("cd #{dispatcher_release_path}/scripts && ./installDispatcher.sh")
    end

    task :restart, :roles => [:dispatcher] do

    end

    task :new_release, :roles => [:dispatcher] do
      dispatcher.stop
      dispatcher.symlinks
      dispatcher.rename_samples
      dispatcher.compile
    end

  end

  namespace :frontend do
    frontend_previous_release = "#{previous_release}/server/frontend"
    frontend_release_path = "#{release_path}/server/frontend"
    frontend_shared_path = "#{shared_path}/server/frontend"

    task :symlinks, :roles => :listener do
      p "********************** FRONTEND: SYMLINKS ******************************"
      run("ln -sfn #{server_queues_path} #{frontend_release_path}/scripts/queue")
    end

    task :rename_samples, :roles => :listener do
      p "********************** FRONTEND: RENAME SAMPLES ******************************"
      run("cd #{frontend_release_path}/config &&
        mv config.properties.#{config_file_sufix}.sample config.properties &&
        mv log4j.properties.#{config_file_sufix}.sample log4j.properties")
    end

    task :compile, :roles => :listener do
      p "********************** FRONTEND: COMPILE ******************************"
      run "cd #{frontend_release_path}/scripts && #{try_sudo} ./installFrontEnd.sh #{tracker_path}"
    end

    task :change_permissions, :roles => :listener do
      p "********************** FRONTEND: CHANGE PERMISSIONS ******************************"
      run "#{try_sudo} chown #{cgi_files_user}:#{cgi_files_group} #{tracker_path}/tracker.cgi && #{try_sudo} chmod 755 #{tracker_path}/tracker.cgi"
      run "#{try_sudo} chown #{cgi_files_user}:#{cgi_files_group} #{tracker_path}/commandServer.cgi && #{try_sudo} chmod 755 #{tracker_path}/commandServer.cgi"
    end

    task :new_release, :roles => :listener do
      frontend.symlinks
      frontend.rename_samples
      frontend.compile
      frontend.change_permissions      
    end
  end

  namespace :monit do
    task :stop, :roles => [:frontend_machine,:directory_server_machine,:server_machine] do
      p "********************** MONIT: STOP ******************************"
      run "#{try_sudo} /etc/init.d/monit stop"
    end

    task :start, :roles => [:frontend_machine,:directory_server_machine,:server_machine] do
      p "********************** MONIT: START ******************************"
      run "sleep 60"
      run "#{try_sudo} /etc/init.d/monit start"
    end

  end

  task :restart, :roles => [:frontend_machine,:directory_server_machine,:server_machine] do #En cada subtarea filtra por roles
    dispatcher.start
    engine.start    
    directory_server.start
  end

end

#AFTER SETUP
#after 'deploy:setup', 'webapp:setup'
#after 'deploy:setup', 'servers:engine:setup'
#after 'deploy:setup', 'servers:dispatcher:setup'
#after 'deploy:setup', 'servers:frontend:setup'

#AFTER UPDATE CODE
after 'deploy:update_code', 'servers:monit:stop'
after 'deploy:update_code', 'webapp:resque:stop' #Monit is supossed to restart resque
after 'deploy:update_code', 'webapp:bundler:new_release'
after 'deploy:update_code', 'webapp:other:rename_samples'
after 'deploy:update_code', 'webapp:other:symlink'
#after 'deploy:update_code', 'webapp:ar_mailer:stop'

after 'deploy:update_code', 'servers:frontend:new_release'
after 'deploy:update_code', 'servers:dispatcher:new_release'
after 'deploy:update_code', 'servers:directory_server:new_release'
after 'deploy:update_code', 'servers:engine:new_release'
#after 'deploy:update_code', 'webapp:ar_mailer:start'
after 'deploy',             'servers:restart'
after 'deploy',             'webapp:resque:redis:start'
after 'deploy',             'servers:monit:start'

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:
 namespace :deploy do
   task :start do  end
   task :stop do  end
   task :restart, :roles => :app, :except => { :no_release => true } do
     run "#{try_sudo} touch #{File.join(current_path,'webapp/tmp','restart.txt')}"
     run "#{try_sudo} chown #{restart_rails_file_user}:#{restart_rails_file_group} #{File.join(current_path,'webapp/tmp','restart.txt')}"
   end
 end 
```

我需要做什么来部署代码？如何解决 Gemfile.lock 错误？

# php - 在 PHP 中使用名称空间解析 SOAP 响应

> ID：13462761
> 
> 赞同：3
> 
> 时间：2012-11-19T21:41:34.617
> 
> 标签：php, soap, xml-parsing, simplexml, xml-namespaces

任何建议如何解析此 SOAP 响应并获取 的`name`值`report_type`？请注意，有两个名称实例；一个下一个`report_type`下`severity`。

这是 SOAP 响应

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <ns1:getIRResponse xmlns:ns1="http://ws.icontent.idefense.com/V3/2">
         <ns1:return xsi:type="ns1:IRResponse" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <ns1:report_type>
               <ns1:id>0</ns1:id>
               <ns1:name>Original Vulnerability</ns1:name>
            </ns1:report_type>
            <ns1:severity>
                <ns1:id>0</ns1:id>
                <ns1:name>HIGH</ns1:name>
            </ns1:severity>
         </ns:return>
      </ns1:getIRResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

这是我正在使用的 PHP 代码：

```
<?php        
    $xml = simplexml_load_string($response);    
    $xml->registerXPathNamespace('ns1', 'http://ws.icontent.idefense.com/V3/2');

    foreach ($xml->xpath('//ns1:report_type/name') as $item)
    {
        echo 'Name: '.$item,'<br>';               
    } 
?> 
```

PHP 代码不回显任何内容。当我使用`($xml->xpath('//ns1:name') as $item)`它时，它会返回两个名称（原始漏洞和高）。

我知道我错过了一些愚蠢的东西。你能帮忙吗？先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T22:03:03.610

首先，我已经更正了这个元素

```
</ns:return> 
```

并将其更改为

```
</ns1:return> 
```

通过在两个 xpath 段中复制命名空间前缀，我似乎得到了你想要的结果

```
$xml = simplexml_load_string($response);    
$xml->registerXPathNamespace('ns1','http://ws.icontent.idefense.com/V3/2');
foreach ($xml->xpath('//ns1:report_type/ns1:name') as $item)
{
  echo 'Name: '.$item,'<br>';
} 
```

输出

```
Name: Original Vulnerability 
```

# shell - 合并 awk 表达式

> ID：13462762
> 
> 赞同：0
> 
> 时间：2012-11-19T21:41:37.093
> 
> 标签：shell, awk

如何将这两个表达式组合成一个以在 awk 脚本文件中使用？

```
awk '/select name="op_sys"/,/select>/' build/input.xhtml > build/output.xhtml
awk '/value="/,/">/' build/output.xhtml 
```

**编辑：** 我想将 awk 文件中的表达式转换为：

```
#!/usr/bin/awk -f
{
   ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:47:10.780

我认为合并两个范围表达式会很危险。例如，如果第二个范围出现在第一个范围之外（或部分重叠）怎么办？我会简单地使用管道：

```
< build/input.xhtml awk '/select name="op_sys"/,/select>/' | awk '/value="/,/">/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:30:24.913

`awk`不允许地址范围容易嵌套。您可以使用标志来做到这一点，但使用起来要简单得多`sed`：

```
sed -n '/pat1/,/pat2/ { /pat3/,/pat4/p }' 
```

将仅在and内打印`pat3`and `pat4`（包括）之间的行。请注意，像这样的嵌套范围与将输出传递到第二次调用的行为并不完全相同，因为重叠的处理方式将有所不同。`pat1``pat2`

# iphone - 将所有对象属性放入 NSDictionary 或 NSArray

> ID：13462763
> 
> 赞同：2
> 
> 时间：2012-11-19T21:41:40.797
> 
> 标签：iphone, objective-c, ios, properties, nsdictionary

有没有办法自动返回一个类中所有（公共）属性的 NSDictionary？您可以假设所有属性都是属性列表，并且我不想只交出指向类本身的指针。任何现有的魔法可以解决这个问题吗？

我知道我可以懒惰地实例化一个 NSDictionary 并用 getter 中的属性手动填充它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T22:03:59.457

使用Objective-C 运行时中的`class_copyPropertyList`和函数很容易获得声明的属性数组。`property_getName`这是一个这样的实现：

```
- (NSArray *)properties
{
    NSMutableArray *propList = [NSMutableArray array];
    unsigned int numProps = 0;
    unsigned int i = 0;

    objc_property_t *props = class_copyPropertyList([TestClass class], &numProps);
    for (i = 0; i < numProps; i++) {
        NSString *prop = [NSString stringWithUTF8String:property_getName(props[i])];
        [propList addObject:prop];
    }

    return [[propList copy] autorelease];
} 
```

您可以将此作为方法添加到`NSObject`. 这是一个可以编译的[完整代码清单来演示这一点。](https://gist.github.com/4114351)

我不确定您是如何使用 的`NSDictionary`，只是因为我不确定您期望键值对是什么。

# javascript - $(.class) 仅针对该类名的第一个标签执行

> ID：13462773
> 
> 赞同：0
> 
> 时间：2012-11-19T21:42:28.567
> 
> 标签：javascript, jquery, loops, classname

我正在尝试创建一个 javascript 函数，该函数遍历网页并查找类名的所有标签`"option"`并隐藏与下面显示的每个 if 语句中的文本匹配的标签。

在下面的示例中，我尝试使用 jquery 来获取类，但它只获取具有该名称的第一个类，而不是该名称的所有类。

我也尝试过使用`var element = document.getElementsByClassName('option');`它来查看是否可行，但是当我遍历元素列表并将它们的显示更改为无时，更改没有显示出来。

**什么是遍历类列表并仅更新某些元素的 css 的更好方法？**

任何帮助表示赞赏。谢谢。

```
$(document).ready(function(){

if($('.option').html() == "C.&nbsp;"){
    $('.option').css('display','none');
}
if($('.option').html() == "D.&nbsp;"){
    $('.option').css('display','none');
}
if($('.option').html() == "E.&nbsp;"){
    $('.option').css('display','none');
}
if($('.option').html() == "F.&nbsp;"){
    $('.option').css('display','none');
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:48:50.577

如果我明白你想要什么，这应该有效：

```
$(document).ready(function(){
    $('.option').each( function(i,e) {
        var current = $(e).html();
        if (current == "C" || current == "D" || 
            current == "E" || current == "F") {
           $(e).hide();
        }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:49:28.367

使用 .each 函数

```
$('.option').each(function(index) {
    if($(this).html == "E")
       $(this).hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:50:50.260

你不会只得到一个元素，你只是简单地操作`$('.option')`调用返回的 jQuery 对象中的“第一个”元素。您需要的是 jQuery 的[**.each()**](http://api.jquery.com/jQuery.each/)函数，以便遍历 jQuery 调用返回的所有元素。此外，长 if 语句可以缩短，但我假设您知道这一点并有其他目的。无论如何，一旦 .each 被调用，您就可以使用回调函数在每个元素通过时对其进行操作。这很像一个 for 循环。下例中的参数`i`表示迭代对象时元素的索引值。它是基于 0 的，换句话说，要通过的第三个选项元素会将参数设置`i`为`2`

试试这个&&祝你好运：

```
$(function() {
    $(".option").each(function(i) {
        var txt = $(this).text();
        if (txt == "C." || txt == "D." || txt == "E." || txt == "F.")
            $(this).hide();
    });
}) 
```

> 可供调查的备用链接

*   [**.html()**](http://api.jquery.com/html/)
    *   使用此方法获取或设置`innerHtml`元素的
*   [**.val()**](http://api.jquery.com/val/)
    *   使用此方法获取或设置元素的值
        *   主要是 HTML 标签`select`, `input`, &&`textarea`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T21:51:13.993

`$('.option').html()`只会得到`innerHTML`第一个元素的。如果要查看所有这些，则需要使用`$.each`.

```
$('.option').each(function(){
    if($.inArray($(this).html(), ['C', 'D', 'E', 'F']) !== -1){
        $(this).hide();
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T21:58:04.577

我看到你正在使用 jQuery。当你用 $('.option') 这样的 jQuery 函数包装某个类时，你会得到一个元素集，这意味着它将包含包装在特殊 jQuery 类中的所有这些元素，这些类为你提供很多功能

迭代槽元素集的最佳方法是使用 jquery .each() 函数，[http:](http://api.jquery.com/jQuery.each/) //api.jquery.com/jQuery.each/ 它将回调函数应用于每个元素。像这样的东西：

```
$(document).ready(function(){
    $('.option').each(function() {
        //Here you can access coresponding element to each iteration with this kyeword
        // you can wrap it again like this $(this) and get all of jQuery functionality on that object again
        $(this).hide();
    });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T21:47:38.033

试试这个：

```
$(document).ready(function(){
  $('.option:contains("C.")').hide();
  $('.option:contains("D.")').hide();
  $('.option:contains("E.")').hide();
  $('.option:contains("F.")').hide();
}); 
```

JQuery 选择器查找包含文本“C.”`'.option:contains("C.")'`的类的所有标记，并且该函数隐藏该集合中的每个元素。`option``.hide()`

[http://jsfiddle.net/b3hVw/](http://jsfiddle.net/b3hVw/)

或者，在单个语句中：

```
$(document).ready(function(){
    $('.option').filter(function() {
        var html = $(this).html();
        return html === "C." || html === "D." || html === "E." || html === "F.";
    }).hide();
}); 
```

`$('.option')`找到该类的所有元素`option`。调用过滤该`.filter(function() { ... })`列表，只列出过滤器函数返回 true 的那些，然后调用`.hide()`隐藏这些元素。

[http://jsfiddle.net/H7Lu8/](http://jsfiddle.net/H7Lu8/)

# perl - 使用模块 PerlMagick 进行 dmake 测试的测试失败（Image::Magick）

> ID：13462775
> 
> 赞同：2
> 
> 时间：2012-11-19T21:42:41.630
> 
> 标签：perl, testing, module, installation, strawberry-perl

我首先在通过 Makefile.pl 安装 perlMagick 模块（也称为 Image::Magick）时遇到问题。

它说我没有安装所需的二进制文件，但是这里的一个人指出这是 Makefile 的问题，它没有在其位置上查找二进制文件。修复该问题后，我对 Makefile 没有任何问题，除了“将从 'C:\Program Files\ImageMagick-6.8.0-Q16\CORE_RL_magick_.dll' 创建 'libMagickCore.a'”之后，执行 dmake（我'正在使用 64 位的草莓 Perl）没有问题，我尝试执行 dmake 测试，这给了我这个输出： [http ://www.textswell.com/read,4233986902330](http://www.textswell.com/read,4233986902330)

在每一行之后，它都会弹出一个错误窗口，说明 perl.exe 已停止工作。

我将不胜感激，我已经在这里呆了 3 天了

# c# - 在 ASP.Net 中具有固定标题的 JQuery 可滚动 GridView

> ID：13462777
> 
> 赞同：1
> 
> 时间：2012-11-19T21:42:45.833
> 
> 标签：c#, jquery, asp.net

我正在尝试在我的页面中使用可滚动的 GridView，但问题是标题和字段或单元格内容未对齐。换句话说，我的单元格或字段未与标题对齐；它们稍微向右移动。在我应用 JQuery Scrollable 函数之前，一切都已完美对齐，现在我不知道如何解决这个问题。有人可以帮忙吗？谢谢这是我的代码

```
<script src="../Scripts/jquery-1.8.1.min.js" type="text/javascript"></script>
<script src="../Scripts/ScrollableGridViewPlugin_ASP.NetAJAXmin.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#<%=GV_Detail.ClientID %>').Scrollable({
            ScrollHeight: 300,
            IsInUpdatePanel: true
        });
    });
</script>

</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
<div>
<asp:UpdatePanel ID="up" runat="server">
    <ContentTemplate>
    <asp:GridView ID="GV_Detail" runat="server" 
        AllowSorting="True" AutoGenerateColumns="False" BackColor="White" 
        BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="3" 
        DataSourceID="GV_Detail_DS">
        <Columns>
                <asp:BoundField DataField="ContactName" HeaderText="Contact Name" />
                <asp:BoundField DataField="City" HeaderText="City" />
                <asp:BoundField DataField="Country" HeaderText="Country" />
                </Columns> 
        <FooterStyle BackColor="White" ForeColor="#000066" />
        <HeaderStyle BackColor="#006699" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
        <RowStyle ForeColor="#000066" />
        <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
        <SortedAscendingCellStyle BackColor="#F1F1F1" />
        <SortedAscendingHeaderStyle BackColor="#007DBB" />
        <SortedDescendingCellStyle BackColor="#CAC9C9" />
        <SortedDescendingHeaderStyle BackColor="#00547E" />
    </asp:GridView>
    <asp:SqlDataSource ID="GV_Detail_DS" runat="server" 
        ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" 
        SelectCommand="SELECT contactname, city, country from my table">
    </asp:SqlDataSource>

     </ContentTemplate>
</asp:UpdatePanel>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:46:37.100

也许你可以试试我的解决方案。我正在测试所有单元格对齐。

[带有 jQ​​uery 的 GridViewScroll](http://gridviewscroll.aspcity.idv.tw/)

![在此处输入图像描述](../Images/d58c66683e891dd8fd85997782b99437.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T05:51:47.730

要将网格与标题对齐，请删除单元格填充，然后尝试一下。

或者，您可以使用上面的插件。它在大多数情况下都有效，但在某些情况下会导致双重回发。

# c++ - 私人继承或遏制

> ID：13462779
> 
> 赞同：-1
> 
> 时间：2012-11-19T21:42:51.820
> 
> 标签：c++, inheritance, containment

我有一个带有几个公共方法的基类，并且想派生一个只继承某些函数的子类，所以我使用私有继承派生了子类。此外，我多次遇到（包括 C++ 入门加）私有继承几乎与包含完全一样。现在我有一个问题，我想使用 Base 中定义的函数在派生类中可用。

除了基类所需的那些，派生类没有任何私有成员。我不确定如何为派生类定义公共方法“func”，如代码所示。

```
class Base
{
private:
    double *p;
public:
    Base(int m, int n);
    void fun(const Base & obj1, const Base & obj2)
};

class Derived : private Base
{
public:
    Derived(int n) : Base(1,n) {}
    void fun(const Derived & obj1,const Base & obj2)
    {
    /* The function fun in derived class works almost exactly 
       like fun in Base class but I don't know how to call 
       Base.Fun(...). Also all the data needed to perform 
       operations in this function is a part of the private 
       member of the base class which the Derived member can't 
       access.
    */
    }
} 
```

如果我要使用遏制，我可以定义如下：

```
class Derived
{
private:
    Base P;
public:
    void fun(const Derived & obj1,const Base & obj2)
    {
        Base :: P.func(obj1.P,obj2);
    }
 }; 
```

这让我想知道在这里包含是否比私有继承更合适。另一方面，我不确定这两种实现是否正确。所以我正在寻找可能的方法来做到这一点。

请注意，我没有在上面的代码中显示复制构造函数、赋值和运算符以及其他一些方法，但我知道它们的要求。这些代码只是为了显示私有继承和包含的基本目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:48:52.547

如果 Derived 的 fun 方法只能通过直接访问 Base 的私有成员来实现，那么无论继承还是包含都不允许 Derived 访问这些方法。使用继承，成员要么需要受保护（或公共），要么需要添加受保护（或公共）的 getter/setter 方法。使用组合需要公共 getter/setter 方法来避免将这些数据成员公开。

在 Derived 的 fun 方法中：

```
Base::fun(obj1, obj2) 
```

将调用 Base 类的 fun 方法。

# matlab - 每次迭代不同元素大小的元胞数组或矩阵

> ID：13462782
> 
> 赞同：2
> 
> 时间：2012-11-19T21:43:11.007
> 
> 标签：matlab, matrix, cell-array

没有代码只是视觉上：

```
Iteration i              result j1                  result j2
     1                   10 15 20 15 25                2 
     2                   5                             8
     .                   . . .                         .
     .                   . . . . . .                   .
     i           j1 with length(x), x=0:100        j2 with length == 1 
```

编辑以获得更好的表示：

```
 [10 15 20 15 25]          [1]                (i=1)
                [5]                       [2]                (i=2)
Matrix(i) = [   [. . . . . . . ]          [3]          ]
                [..]                      [.]
                [j1 = size (x)]     [j2 size 1 * 1]          (i=100)

so Matrix dimension is: i (rows) * 2 (columns) 

(p.e for i = 1, j1 with size(x) column 1 on row 1, j1 size (1) column 2 on row 1) 
```

我想将每个迭代结果保存到一个矩阵中，以便使用它们进行比较。这可以用矩阵完成还是用单元格数组更好，请写一个例子供参考。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:02:02.983

编辑：滚动到分析进行比较。（这使得单元实现获胜。）

* * *

您可以使用具有`i`行和 101 列的矩阵（前 100 列中的 j1 的值，`NaN`必要时用 s (*) 填充，然后是 j2 的值），因此您可以进行简单的比较，因为它是一个明确的表示. 也就是说，使用 101 列可以确保 j1 不以 NaN 结尾。

(*){NaN 或 0，取决于哪个更方便}

您还可以做 102 列，其中第一列给出 j1 的*长度*，然后是 j1 的值，然后是 NaN，然后​​是 j2 的值。
说`j1=[3 1 10 5]`，，`j2=2`那么对应的行是`[4 3 1 10 5 NaN ... NaN 2]`。

这种矩阵方法的好处是

*   由于 Matlab 非常擅长处理固定大小的矩阵，因此它应该比单元格更快（行数不是太多）。
*   此外，基本操作（如比较）更容易编程。（您只需要比较两个向量，您可以在同一行上进行多次比较。）

矩阵方法的倒退是

*   你不能轻易地追加到 j1 （好吧，当你做 102 列方法时会更容易一些），
*   j1 的大小是有限制的。（在本例中为 100。）

总而言之，单元通常速度较慢，编程时间可能更长，但更灵活。
我希望这能为您指明正确的方向。

编辑：

使用 2 个矩阵的第三种方法：

```
j1results = zeros( n_iterations, maxlen_j1 );
j2results = zeros( n_iterations, 1); 
```

然后计算如下：

```
[j1results(k,:), j2results(k)] = compute(k); 
```

其中，compute 是一个返回两个不同值的函数。

* * *

简介：

```
function [J1,J2] = compute(k)
    J1 = zeros(1,100); %this is necessary
    % some dummy assignments
    len = randi(100,1);
    J1(1:len) = k*ones(1,len);
    J2 = k;
end

function res = compute_cell(k) % for the cell-solution
    res = cell(1,2);
    len = randi(100,1);
    res{1} = k*ones(1,len);
    res{2} = k;
end

n=100000;

tic;
J12 = cell(n,2);
for i=1:n
    J12{i}=temp_cell(i);
end
toc

tic;
J1 = zeros(n,100);
J2 = zeros(n,1);
for i=1:n
    [J1(i,:), J2(i)] = temp(i);
end
toc 
```

结果：

```
Elapsed time is 2.437634 seconds.
Elapsed time is 2.741491 seconds. 
```

`len`（也用 的分布进行了剖析`UNI[50,100]`，其中分配不必要的内存空间的矩阵实现的缺点将不那么显着，图片保持不变。）

**底线**：令人惊讶的是，分析表明**单元实现**在各个方面都优于矩阵实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T23:50:05.130

我会选择一个`cell`数组来实现更简洁、更直观的实现，并且约束更少。

```
nIterations = 500;
J = cell(nIterations, 2);
for i=1:nIterations
    length_x = randi(100); % random size of J1
    J{i,1} = randi(100, length_x, 1); % J1
    J{i,2} = randi(i); % J2
end 
```

此外，您还可以获得一些额外的好处，例如：

*   **沿元胞数组和在元胞数组内**访问元素****

     **J{10, 1}; J{10, 2};** 
***   **在每个元素内追加/修改**而不改变整体结构

    J{10, 1} = [J{10, 1}; 0]

    *   **追加**到数组（添加迭代），就像在普通数组中一样

    J{end+1, 1} = 1; J{结束, 2} = 1

    *   **使用在每个条目（向量）中**应用函数**`cellfun`**

     **length_J = cellfun(@length, J); % 得到 J1 的数量/长度
    mean_J = cellfun(@mean, J); % 得到 J1 的平均值**** 

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T13:40:51.570

从您的图形表示中可以看出，您需要一个**没有规则模式的**`2xN_Rows` *结构*（实际上其中存在某种*随机性*），因此您必须以*支持*这种不规则性的方式存储数据。因此，正如其他人所说，s 是自然解决方案。****`cell`****

 ****据我所知，您需要在矩阵中插入的元素虽然是随机的，但彼此独立，因此您仍然可以有效地进行*矢量化*。

您有`2`彼此独立的随机贡献：

1.  结构第一列中的元素数量是随机的**。**

2.  结构中的**元素**是随机的；

让我们分别考虑这些贡献：

1.  你有`N_Rows`，具有可变数量的元素。假设`N_El`在最坏的情况下存在（即`N_El`每行条目数量的上限）。让我们生成每行的元素数

    ```
     elem_N = randi(`N_El` , [N_Rows 1]); 
    ```

2.  您必须生成完全`sum(elem_N)`随机数（对于第 2 点），这些随机数将在根据`elem_N`.

这是我建议的最终代码

```
N_ROW = 20;
N_EL = 10;    
MAX_int = 20; %maximum random integer in each row

elem_N = randi(N_EL,[N_ROW , 1]);         % elements per line stochasticity
elements = randi(MAX_int, [1 sum(elem)]); % elements value stochasticity

     %cutoff points of the vector "elements" among the rows of the structure
cutoffs = mat2cell(...
     [[1 ; cumsum(elem_N(1:end-1))] cumsum(elem_)]... 
     ,ones(N_ROW,1),[2]);

    %result:
res = [cellfun(@(idx) elements( idx(1):idx(2) ) , cutoffs , 'UniformOutput', false ) ,...
     num2cell( randi(MAX_int,[1 N_ROW])')]; 
```

结果

```
 res = 

[1x9  double]    [20]
[1x3  double]    [12]
[1x5  double]    [ 7]
[1x8  double]    [20]
[1x11 double]    [18]
[1x7  double]    [ 4]
[1x11 double]    [ 1]
[1x4  double]    [15]
[1x5  double]    [18] 
```

在哪里

```
 res{1,1}

ans =

    15    13     2     3    20    10     1     2     3

res{2,1}

 ans =

 3    18    10 
```

等等...********

# jquery - jquery库中的“不允许从字符串生成代码”

> ID：13462786
> 
> 赞同：2
> 
> 时间：2012-11-19T21:43:23.130
> 
> 标签：jquery, content-security-policy

我正在尝试修改我的网络软件以使用内容安全策略。当我没有它编译时，一切运行良好。当我包含 CSP 标头时，Chrome 会在两个地方标记错误（使用 Chrome 开发人员工具）：

*   每个 ASPX 或 HTML 文件的第一行中出现“拒绝执行内联脚本，因为它违反了内容安全策略...”错误 - 即使没有内联 JavaScript！
*   “此上下文不允许从字符串生成代码”错误 - 这在 jquery-1.8.3.min.js 文件中有所说明，但似乎源自我编写的一些 JQuery，我在其中迭代来自 a 的数据用于在页面上生成项目的 Web 服务。

所以，有两个问题：为什么我总是被告知每个文件都是违规的，即使它只是一个纯静态 HTML 文件？

其次，内容安全真的意味着我在使用 JQuery 生成 html 时不能使用字符串——即使它位于专用的 .js 文件中？我查看了整个网络上的信息，但这个特定问题确实没有得到解决。那么......这里的规则是什么？

我真正想要的是防止 A) 内联 JavaScript 和 B) 加载外部 JS 文件。

任何帮助将不胜感激！

**更新**：当我将 JQuery/JQueryUI 升级到 1.8.2 / 1.9.1 时，字符串错误消失了。我之前使用的版本只有一个月大，所以这似乎是 JQuery 的最新改进。虽然我也一直在进行其他更改，但我不能*确定*这是 JQuery，但如果可以的话，使用更新的 JQuery 是有意义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:19:19.137

默认情况下，内容安全策略块`eval`和`eval`类似结构（`new Function`、、`setTimeout([STRING], ...)`等）；它们可能与内联脚本一样危险。如果您想允许`eval`，您需要将白名单**`'unsafe-eval'`**列为可接受的脚本来源。这可能看起来像：

```
Content-Security-Policy: script-src 'self' 'unsafe-eval' https://script.com 
```

该规范的相关部分是[http://www.w3.org/TR/CSP/#script-src](http://www.w3.org/TR/CSP/#script-src)。[http://www.html5rocks.com/en/tutorials/security/content-security-policy/#eval-too](http://www.html5rocks.com/en/tutorials/security/content-security-policy/#eval-too)也可能有帮助。

关于错误消息，我建议使用 Canary。在过去一两个月中，我们显着改进了错误消息；希望您在不久的将来在 Stable 中有更好的调试体验。如果您在 Canary 中仍然遇到错误，无法为您提供足够的信息来调试问题，请提交错误 ( [http://new.crbug.com/](http://new.crbug.com/) ) 并在此处发布 ID。我会确保有人看着它。

我很高兴听到您正在试验 CSP！

# javascript - 是否可以在javascript中按关键字相关性过滤和排列列表？

> ID：13462788
> 
> 赞同：0
> 
> 时间：2012-11-19T21:43:29.667
> 
> 标签：javascript, jquery, html

假设我有一个包含多个类（关键字）的项目列表，例如

```
<ul>
<li class="domestic tail feline">Cat</li>
<li class="wild tail canine">Wolf</li>
<li class="domestic tail canine">Dog</li>
<li class="wings beak domestic">Parrot</li>
<li class="wild tail feline">Lion</li>
</ul> 
```

然后在上一页中，用户从选择框中选择 3 个特征并单击下一步。使用 localstorage 保存关键字，您如何使用 javascript 或 jQuery，然后按最匹配关键字的顺序显示列表？

因此，如果我输入了国内、猫科动物和翅膀，列表中的第一项将是 Cat，然后是 Parrot，然后是 Dog、Lion 和 Wolf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:29:18.317

不使用 jQuery，您必须将这些单词及其关键字放入一个数组中。

然后循环遍历它们，将它们与 3 个选定的单词进行比较，给它们一个值/分数。

然后，您必须根据它们的分数对这些单词进行排序。这是一个关于对 javascript 数组进行排序的链接： [How to sort an associative array by its values in Javascript?](https://stackoverflow.com/questions/5199901/how-to-sort-an-associative-array-by-its-values-in-javascript)

使用该有序数组，您可以循环遍历它以创建列表项并使用“innerHTML”属性将它们动态写入 div。

我会像这样设置一个数组（有几种方法可以解决这个问题）：

```
var listItems = new Array();
function listItem(displayWord){
    this.word = displayWord;
    this.keywords = new Array();
    this.matches = 0;
}

listItems['cat'] = new listItem('cat');
listItems['cat'].keywords.push('domestic');
listItems['cat'].keywords.push('tail');
listItems['cat'].keywords.push('feline');

for (x in listItems) {
    for (var c = 1; c < listItems[x].keywords.length; c++) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:03:59.410

```
var $ul = ..., // the list element
    keywords = ["domestic", "feline", "wings"]; // get that list from an input,
                                                // localstorage or whereever
$ul.children().sort(function(a, b) {
    var score = 0,
        $a = $(a),
        $b = $(b);
    for (var i=0; i<keywords.length; i++)
        score += $a.hasClass(keywords[i]) - $b.hasClass(keywords[i]);
        // if only a has the keyword, it adds 1, if only b has it 1 is substracted,
        // and if they both have if or not the score does not change.
    return score;
}).appendTo($ul); // re-append in the right order 
```

这是一个对 jQuery 选择进行排序的简单示例，如果您为每个元素分配匹配关键字的分数并仅比较这些数字，则可以提高性能。

# iphone - 将代码从本地文件保存更改为 NSUserDefaults

> ID：13462791
> 
> 赞同：1
> 
> 时间：2012-11-19T21:43:41.020
> 
> 标签：iphone, objective-c, xcode

我有这段代码调用并保存函数 ViewLeft 或 ViewRight。当您重新启动应用程序时，所选视图被加载。

```
#import "ViewController.h"
#import "ViewLeft.h"
#import "ViewRight.h"

@implementation ViewController

-(IBAction)submitL:(id)sender {
    str = @"L";
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *localloc = [documentsDirectory stringByAppendingPathComponent:@"/localinfo.plist"];
    NSMutableArray *local = [[NSMutableArray alloc] initWithContentsOfFile:localloc];
    if(!local) {
        local = [[NSMutableArray alloc] init];
    } else {
        local = [[NSMutableArray alloc] initWithArray:local];
    };
    [local addObject:str];
    if(![local writeToFile:localloc atomically:NO]) {
        NSLog(@"f1");
    };
    ViewLeft *view = [[ViewLeft alloc] initWithNibName:@"ViewLeft" bundle:nil];
    [self presentViewController:view animated:NO completion:nil];
}

-(IBAction)submitR:(id)sender {
    str = @"R";
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *localloc = [documentsDirectory stringByAppendingPathComponent:@"/localinfo.plist"];
    NSMutableArray *local = [[NSMutableArray alloc] initWithContentsOfFile:localloc];
    if(!local) {
        local = [[NSMutableArray alloc] init];
    } else {
        local = [[NSMutableArray alloc] initWithArray:local];
    };
    [local addObject:str];
    if(![local writeToFile:localloc atomically:NO]) {
        NSLog(@"f2");
    };
    ViewRight *view = [[ViewRight alloc] initWithNibName:@"ViewRight" bundle:nil];
    [self presentViewController:view animated:NO completion:nil];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if (! [defaults objectForKey:@"firstRun"]) {
    [defaults setObject:[NSDate date] forKey:@"firstRun"];
} 
```

这是 AppDelegate.m 中用于选择适当视图控制器的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *localloc = [documentsDirectory stringByAppendingPathComponent:@"/localinfo.plist"];
    NSMutableArray *local = [[NSMutableArray alloc] initWithContentsOfFile:localloc];
    if(!local) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        self.window.rootViewController = self.viewController;
    } else {
        local = [[NSMutableArray alloc] initWithArray:local];
        if([[local objectAtIndex:0] isEqualToString:@"L"]){
            self.ViewLeft = [[ViewLeft alloc] initWithNibName:@"ViewLeft" bundle:nil];
            self.window.rootViewController = [[ViewLeft alloc] initWithNibName:@"ViewLeft" bundle:nil];
        }
        if([[local objectAtIndex:0] isEqualToString:@"R"]){
            self.ViewRight = [[ViewRight alloc] initWithNibName:@"ViewRight" bundle:nil];
            self.window.rootViewController = [[ViewRight alloc] initWithNibName:@"ViewRight" bundle:nil];
        }
    };

    [self.window makeKeyAndVisible];

    return YES;
} 
```

有人能告诉我使用函数 NSUserDefault 会是什么代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:40:06.683

`NSUserDefaults`是一个简单的键值存储。无需太高级，您可以这样使用它：

```
-(IBAction)submitR:(id)sender {
    [self saveSubmission:@"R"];
    ViewRight *view = [[ViewRight alloc] initWithNibName:@"ViewRight" bundle:nil];
    [self presentViewController:view animated:NO completion:nil];
}

-(IBAction)submitL:(id)sender {
    [self saveSubmission:@"L"];
    ViewLeft *view = [[ViewLeft alloc] initWithNibName:@"ViewLeft" bundle:nil];
    [self presentViewController:view animated:NO completion:nil];
}

-(void)saveSubmission:(NSString*)submission { 
    NSUserDefaults* standardDefaults = [NSUserDefaults standardUserDefaults];

    [standardDefaults setObject:submission forKey:@"leftRightSubmission"];

    // Not always needed, this flushes changes to disk asap. Can be costly
    [standardDefaults synchronize];
} 
```

在您的应用委托中：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

NSUserDefaults* standardDefaults = [NSUserDefaults standardUserDefaults];

NSString* lastSubmission = [standardDefaults objectForKey:@"leftRightSubmission"];
if(!lastSubmission) {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
} 
else {
    if([lastSubmission] isEqualToString:@"L"]){
        self.ViewLeft = [[ViewLeft alloc] initWithNibName:@"ViewLeft" bundle:nil];
        self.window.rootViewController = [[ViewLeft alloc] initWithNibName:@"ViewLeft" bundle:nil];
    }
    if([lastSubmission isEqualToString:@"R"]){
        self.ViewRight = [[ViewRight alloc] initWithNibName:@"ViewRight" bundle:nil];
        self.window.rootViewController = [[ViewRight alloc] initWithNibName:@"ViewRight" bundle:nil];
    }
};

[self.window makeKeyAndVisible];

return YES; 
```

# objective-c - UISplitView 的奇怪错误 - 视口缩放到 iPhone 大小？

> ID：13462792
> 
> 赞同：1
> 
> 时间：2012-11-19T21:43:42.563
> 
> 标签：objective-c, ios, ipad, uisplitviewcontroller

我是第一次使用 Objective-C，并且在给我的应用程序中有一个奇怪的错误。以下图片展示了我遇到的问题：

![旋转画面正常显示](../Images/a2ac78cb44a6b26d3d11aecf17847ee1.png)

此屏幕在用户旋转 iPad 时显示。这个是正常的。顶部的控件 (<) 允许用户隐藏左侧的子视图。隐藏子视图后，深蓝色部分应扩大以填满屏幕。在我使用该应用程序之前，这很有效。现在，这正在发生：

![隐藏拆分视图时的错误](../Images/631ad76931a5c0520bb4421656557f8c.png)

我还没有找到任何东西来解释为什么会发生这种情况。有任何想法吗？

```
- (void)viewDidLoad {

    [super viewDidLoad];

    [self addGestureRecognizers];

    // initialize the "<" button...

    toggleButton = [[UIBarButtonItem alloc] initWithTitle:[PanoUtils leftIndicator] style:UIBarButtonItemStylePlain target:self action:@selector(toggleScreen)];
    // the annotate button...

    annotateButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"Pencil.png"] style:UIBarButtonItemStylePlain target:self action:@selector(annotateTapped)];
    // the done button for annotations...

    doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneAnnotateTapped)];
    // a flexible spacer...

    nameFieldSpacerButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    // the accelerometer button...

    alignButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"gyro.png"] style:UIBarButtonItemStylePlain target:self action:@selector(align:)];
    // and the search button.

    searchButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"Search.png"] style:UIBarButtonItemStylePlain target:self action:@selector(searchButtonTouched:)];

    // customize the align button after the user selects it.

    UIImage *buttonImage = [UIImage imageNamed:@"gyroSelected.png"];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    [button setImage:buttonImage forState:UIControlStateNormal];

    button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

    [button addTarget:self action:@selector(align:) forControlEvents:UIControlEventTouchUpInside];

    alignSelButton = [[UIBarButtonItem alloc] initWithCustomView:button];

    NSMutableArray *itemsArray = [toolBar.items mutableCopy];

    [itemsArray addObject:searchButton];

    [itemsArray addObject:annotateButton];

    [itemsArray addObject:alignButton];

    [toolBar setItems:itemsArray animated:NO];

    [itemsArray release];

    [self adjustToggleButton];

} 
```

# ruby - 没有从 to_s 得到正确的输出

> ID：13462794
> 
> 赞同：2
> 
> 时间：2012-11-19T21:43:49.193
> 
> 标签：ruby, arrays, hash, tostring, ruby-1.9

Peter Cooper 的关于多态性的开始 Ruby 中的一个示例涉及该`to_s`方法。他举了这个例子：

```
puts 1000.to_s
puts [1, 2, 3].to_s
puts ({ :name => 'Fred', :age => 10 }).to_s 
```

并将其显示为输出：

```
1000
123
age10nameFred 
```

但我得到的输出是：

```
1000
[1, 2, 3]
{:name=>"Fred", :age=>10} 
```

有谁知道为什么会这样？红宝石有变化，还是我做错了什么？或者没有足够的信息可以告诉？我怎样才能找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:46:50.173

这些示例使用 ruby​​ 1.8.7 工作，它有点过时了。Ruby 1.9.3（当前版本）更改了`to_s`数组和哈希的实现。

编辑：见[Ruby 1.9 Array.to_s 表现不同？](https://stackoverflow.com/questions/3960392/ruby-1-9-array-to-s-behaves-differently)

# javascript - 确定哪个广告向 /eyeblaster/addineyev2.html 发出了请求

> ID：13462795
> 
> 赞同：19
> 
> 时间：2012-11-19T21:44:05.577
> 
> 标签：javascript, iframe, web, frame, ads

我有一个使用两个大型在线广告“Remnant”提供商的大型网站。这些提供商会定期启动和停止在我们网站上运行的广告活动。

来自其中一个提供商的广告之一错误地请求：

/eyeblaster/addineyev2.html

我已经确定，当网站上的广告通过 iframe 提供时，某些网站使用了所请求的文件。该文件理论上会绕过跨域限制，以便广告提供商可以使用 iframe 中的 javascript 调整 iframe 的大小。

我通过偶然发现此支持文档确定了该文件的这种用途：

[http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1085693](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1085693)

我的问题是我们的网站不使用 iframe 来投放广告，因此转到“/eyeblaster/addineyev2.html” URI 的请求会导致 404 错误，并且是不必要的。由于错误来自大型供应商提供的 CMS，因此错误会在我们的 Google Analytics 跟踪代码上呈现。这导致我们的明显网页浏览量膨胀。

浏览量膨胀可能非常严重，因为 404 错误页面也包含广告。该 404 页面也可能加载错误广告，从而导致广告的递归循环加载完全相同的“/eyeblaster/addineyev2.html”404 页面。

到目前为止，我还无法看到广告通过 Firebug 或类似的开发人员工具直接向该 URL 发出请求。然而，这个不存在的页面的流量是巨大的，所以违规广告肯定仍在混合中。问题是我无法确定哪个广告被破坏了，所以我无法告诉我们的剩余供应商将其删除。两家供应商都假装不知道这个问题。

我无法删除 404 错误页面上的 Google 跟踪代码，但我可以向页面添加额外的 JavaScript。

有什么方法可以通过在尝试在 iframe 中请求该页面时导致的 404 错误中添加一些 javascript 来识别导致请求“/eyeblaster/addineyev2.html”的广告？

本质上几乎是一个“框架破坏者”脚本，它不是破坏框架，而是提供有关 iframe 元素附近的 HTML 节点的信息？我认为这是有可能的，但目前我还没有看到一条明确的道路。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T14:42:36.543

我找到了我自己的答案，我将在这里分享它，因为另一个 Web 开发人员正在徒劳地试图确定一个广告对他们做同样的事情。

有问题的数字广告带有指向“/eyeblaster/addineyev2.html”的 iframe。它）。

```
if(top != self) {
    $.post("/ad_diagnose/log.php", {
        a: $('#ad-div-one', top.document).html(),
        b: $('#ad-div-two', top.document).html(),
        c: $('#ad-div-three', top.document).html(),
        d: $('#ad-div-four', top.document).html(),
        e: $('#ad-div-five', top.document).html(),
    });
} 
```

此 JavaScript 使用 JQuery（我们的 CMS 提供程序无论如何都包含在每个页面上）。它检查错误页面是否存在于 iframe（顶部！= self）中，然后它为父页面上应包含广告的每个 html 元素获取原始 html。

该数据被包装到一个对象中，并发布到一个简单的 php 脚本，该脚本会将发布到它的每个值的日志写入一个文件。

最后，我收到了一个日志文件，很可能有违规广告代码在其中。我能够对文件进行快速 grep，并发现了带有指向“/eyeblaster/addineyev2.html”的 iframe 的广告

我希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T18:55:28.517

为避免不必要的跟踪，您应该在 上放置一个虚拟的空文件`/eyeblaster/addineyev2.html`，或者，如果您使用`nginx`类似的操作

```
server {
  ...

  location = /eyeblaster/addineyeV2.html { echo ""; }
} 
```

或更好

```
server {
  ...

  location = /eyeblaster/addineyeV2.html { return 404 "404 - page not found";}
} 
```

如果您没有静态主机并且无法配置代理服务器，您可以通过 javascript 在 404 页面跟踪中设置条件

```
if (document.URL.indexOf('/eyeblaster/addineyeV2.html') == -1) {
   doAnalyticsTracking();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T18:28:56.487

似乎有更多的出版商遇到了这个问题。我也做。按照 Tals 的说明，当我故意将 iframe 指向 404 页面时，我能够记录信息，但由于它随机出现而无法捕捉到这个问题，而且我无法检查脚本为什么没有捕捉到它。

如何添加 /eyeblaster/addineyev2.html 并从此文件中记录？

通过简单的网络搜索，我能够确定脚本的所有者。它来自[http://www.mediamind.com/](http://www.mediamind.com/) 但在 Google AdSense 中禁用“mediamind”并不能解决问题，所以我请求他们的支持将文件发送给我。

我将测试脚本，如果 404 调用越来越低。也许我还会使用脚本来检查正在加载的内容并确定将其关闭的 exect 广告 url。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T01:02:07.473

只是想我会分享这也发生在我们的 Ozzu 网站上。当我们的一些成员抱怨时，我第一次意识到这个问题，但我没有看得太深，因为我最初认为这是一个孤立的例子。

在过去的一个月里，我还注意到我在服务器上的错误日志文件高于正常情况，将 /usr 分区的使用率提高到了 82% 左右。直到今天，我才开始将两个和两个放在一起，因为我终于开始查看错误，看来这不是这种令人眼花缭乱的广告的孤立实例。有成千上万的用户访问我们的网站，然后因此被重定向到我们网站上的 404 页面。以下是我们日志文件中的一个错误示例，似乎许多网络都在使用 Media Mind 的这款 eyeblaster 软件：

```
[Thu Dec 13 16:36:51 2012] [error] [client 123.123.123.123] File does not exist: /public_html/eyeblaster, referer: http://lax1.ib.adnxs.com/if?enc=AAAAAAAAAAAAAAAAAAAAAAAAAGC4Hvs_AAAAAAAAAAAAAAAAAAAAAMqchzp-qp9L_vlliXOoLV2gdMpQAAAAAEMUDABGAQAAQAEAAAIAAADXo0AA-FcCAAAAAQBVU0QAVVNEAKAAWAIAeAAAYk4AAgMCAQUAAIIA5BXJnQAAAAA.&cnd=%21QxtEWwidpzIQ18eCAhgAIPivCTAEOIDwBUABSMACUMOoMFgAYL4FaABwKngAgAH6AYgBAJABAZgBAaABAqgBALABALkBAAAAAAAAAADBAQAAAAAAAAAAyQEgEFk1j_LCP9kBAAAAAAAA8D_gAQA.&udj=uf%28%27a%27%2C+15986%2C+1355445408%29%3Buf%28%27c%27%2C+824221%2C+1355445408%29%3Buf%28%27r%27%2C+4236247%2C+1355445408%29%3B&ccd=%21mgWjMAidpzIQ18eCAhj4rwkgAQ..&vpid=18&referrer=http%3A%2F%2Fwww.ozzu.com%2F&dlo=1
[Thu Dec 13 16:36:56 2012] [error] [client 123.123.123.123] File does not exist: /public_html/eyeblaster 
```

我刚刚也联系了 Media Mind 公司，看看他们是否有任何进一步的意见。我们日志中的错误至少来自一些广告服务器，例如：

```
lax1.ib.adnxs.com
showads.pubmatic.com
ad.yieldmanager.com 
```

所以我的印象是许多媒体公司都在使用这款 Eye Blaster 软件。我更多地研究了 Eye Blaster 应该做的事情，它是一种技术，可以同步页面上的大量广告，就好像它们是一个大广告一样。例如，动画将在一个广告中开始并在另一个广告中结束。无论如何，它一定很受欢迎，因为许多广告公司似乎都在使用它，因此我可能不得不禁用很多广告商。

我认为解决问题的最佳方法是让 Media Mind 解决它，但我不确定。

无论如何只是想分享我的经验，这个问题似乎正在影响许多网站。

# c# - 使用 DownloadStringCompletedEventArgs 获取 html 数据

> ID：13462796
> 
> 赞同：0
> 
> 时间：2012-11-19T21:44:08.653
> 
> 标签：c#, silverlight, webclient

我想从网站获取一些数据，但我的代码无法获取 url。因为如果状态总是假的，我的名为“weather1”的文本框总是显示“ece”。当我将文本框的值设为**e.Result**而不是“ece”时，它会显示“ **DownloadStringCompletedEventArgs** ”。

并且没有错误或警告。

我应该怎么办？代码有什么问题？

```
public void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (!e.Cancelled && e.Error == null)
        {
           string res = Convert.ToString(e.Result);
            HtmlDocument doc = new HtmlDocument();
            doc.LoadHtml(res);
            var table = doc.DocumentNode.SelectSingleNode("//table[@class='tbl_sond']");
            var degree = table.SelectSingleNode("//td[@class='renkMax']");
            var date = table.SelectSingleNode("//td[@class='sond_zaman']");

        }
        else weather1.Text = "ece";

    }
    public void getWeatherInfo() {
        string url  = "http://www.mgm.gov.tr/tahmin/il-ve-ilceler.aspx?m=ISTANBUL";

        WebClient webclient = new WebClient();
        webclient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);

        Uri uri = new Uri(url);
        webclient.DownloadStringAsync(uri);

    } 
```

# sql - 如果没有显示记录，如何显示零或日期值

> ID：13462797
> 
> 赞同：0
> 
> 时间：2012-11-19T21:44:14.377
> 
> 标签：sql, tsql

我有一个联合所有查询。但在我的结果集中，我有 2 条 P1 记录和 3 条 P2 记录。即使没有值，我仍想显示 3 个 P3 记录。

请在下面查看我的代码

```
SELECT 'P1'     AS Priority,
       Count(*) Total,
       CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
       + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2)
FROM   dbo.mg_rpt_calls
WHERE  priority = 'P1'
       AND CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
           + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2) BETWEEN
               CONVERT(VARCHAR(5), Datepart(yyyy, Getdate()))
               + RIGHT(
               '00'+ CONVERT(VARCHAR(5), Datepart(mm, Getdate())-2), 2)AND
               CONVERT(
               VARCHAR(5), Datepart(yyyy, Getdate()))
               +
               RIGHT
               ('00'+ CONVERT(VARCHAR(5), Datepart(mm, Getdate())), 2)
GROUP  BY CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
          + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2)
UNION ALL
SELECT 'P2'     AS Priority,
       Count(*) Total,
       CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
       + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2)
FROM   dbo.mg_rpt_calls
WHERE  priority = 'P2'
       AND CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
           + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2) BETWEEN
               CONVERT(VARCHAR(5), Datepart(yyyy, Getdate()))
               + RIGHT(
               '00'+ CONVERT(VARCHAR(5), Datepart(mm, Getdate())-2), 2)AND
               CONVERT(
               VARCHAR(5), Datepart(yyyy, Getdate()))
               +
               RIGHT
               ('00'+ CONVERT(VARCHAR(5), Datepart(mm, Getdate())), 2)
GROUP  BY CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
          + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2)
ORDER  BY CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
          + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2) 
```

我的结果集如下

```
Priority Total (No column name)
P2       9     201209
P2       15    201210
P1       1     201210
P1       1     201211
P2       5     201211 
```

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:40:37.603

我认为您想在较低级别使用 group by，例如：

```
SELECT Priority, Count(*) Total,
       CONVERT(VARCHAR(5), Datepart(yyyy, logdate)) + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2)
FROM   dbo.mg_rpt_calls
WHERE  CONVERT(VARCHAR(5), Datepart(yyyy, logdate))
           + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2) BETWEEN
               CONVERT(VARCHAR(5), Datepart(yyyy, Getdate()))
               + RIGHT(
               '00'+ CONVERT(VARCHAR(5), Datepart(mm, Getdate())-2), 2)AND
               CONVERT(VARCHAR(5), Datepart(yyyy, Getdate())) +
               RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, Getdate())), 2)
group by Priority, CONVERT(VARCHAR(5), Datepart(yyyy, logdate)) + RIGHT('00'+ CONVERT(VARCHAR(5), Datepart(mm, logdate)), 2) 
```

您可以选择包含另一个`where`子句或`having`具有`priority in ('P1', 'P2', 'P3')`.

# javascript - 如何从 googlemap 中删除折线？

> ID：13462800
> 
> 赞同：0
> 
> 时间：2012-11-19T21:44:31.893
> 
> 标签：javascript, google-maps, polyline

我有一个项目，我使用从数据库中查询的坐标在 googlemaps 上绘制折线。这些坐标显示了汽车的每日路线。当我查询另一天的路线时，它与前一天的路线发生冲突。我试图删除前一个或只是将其映射设置为 null 或将其可见属性设置为 false。但没有一个奏效。还有其他方法吗？这是我的代码：

```
drawPath = function () {
    $.ajax({
        type:'POST',
        dataType:'json',
        data:'cmd=getPath&id='+<?php echo $this->input->get('id'); ?>+'&date='+$("#time").val(),
        url: 'index.php/ajax_controller',
        success: function(data) {
            var pathLatLng,nextLatLng;
            var line;
            var gBas=0;
            var dBas=0;
            for (var i = 0; i < data.length-1; i++) {
                var lat1=data[i].LAT1.substring(0,2)+"."+data[i].LAT1.substring(2);
                var lng1=data[i].LNG1.substring(1,3)+"."+data[i].LNG1.substring(3);
                pathLatLng = new google.maps.LatLng(lat1,lng1);
                lat1=data[i+1].LAT1.substring(0,2)+"."+data[i+1].LAT1.substring(2);
                lng1=data[i+1].LNG1.substring(1,3)+"."+data[i+1].LNG1.substring(3);
                nextLatLng = new google.maps.LatLng(lat1,lng1);
                var color="#1BE09E";
                var opacity={opacity: 0.50};

                var path=[pathLatLng,nextLatLng];
                var polyLineOpt={
                    path: path,
                    strokeColor: color,
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                    geodesic: true,
                    map: map
                }
                line = new google.maps.Polyline(polyLineOpt);
            }
        },
        error:function(){
        }
    });
} 
```

如您所见，我使用 AJAX 查询坐标。我还尝试使用 line 作为全局变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:00:08.907

当您删除保存创建的折线的变量时，它应该可以工作，因此删除线。但是因为您在 for 循环中创建了许多折线，所以您需要在某处备份所有对象，很可能也是数组或对象。然后，您可以在一个循环中将它们全部删除。

# vb.net - 如何使用 OrganizationService 在 Dynamics CRM 中搜索特定记录？

> ID：13462801
> 
> 赞同：0
> 
> 时间：2012-11-19T21:44:39.620
> 
> 标签：vb.net, dynamics-crm, dynamics-crm-2011

如果我知道记录的 accountId，我可以执行以下操作：

```
 Dim cols As New ColumnSet(New String() {"name",
                                         "address1_postalcode",
                                         "lastusedincampaign"})
 Dim retrievedAccount As Account = _orgService.Retrieve("account", _accountId, cols).ToEntity(Of Account)() 
```

但是如果我不知道 accountId 而是想根据其他因素搜索记录怎么办？比如说，返回所有以“John”为名字的记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:54:43.237

您必须使用带有 QueryExpression 的 RetrieveMultiple 方法。

有关一些示例，请参见此[链接](http://msdn.microsoft.com/en-us/library/gg328300.aspx)

您还可以使用 Linq to CRM 或 Fetch XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T23:14:05.860

您可以按照此处的说明使用 QueryExpression：

[http://msdn.microsoft.com/en-us/library/gg328300.aspx](http://msdn.microsoft.com/en-us/library/gg328300.aspx)。

您可以为 QueryExpression 编写自己的 ConditionExpression 或 FetchXml。

对于更复杂的查询，我喜欢使用 FetchXml。您可以先进行高级查找，然后下载生成的 FetchXml，或使用任意数量的在线工具（如 Fetch Xml Builder）先生成它。

希望有帮助。

# pandas - 带有假日日历的 Pandas 中的 DateOffset

> ID：13462802
> 
> 赞同：7
> 
> 时间：2012-11-19T21:44:44.123
> 
> 标签：pandas

Pandas 目前允许您将工作日添加到给定日期`datetime.today() + 3*BDay()`。我想扩展工作日的概念，以排除给定的假期和周末的 DateIndex。是否可以将 DateIndex 合并到偏移量中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-21T16:16:16.510

CustomBusinessDay 类现已合并到即将发布的 0.12 版本的 Pandas 中，您可以在其中执行以下操作：

```
>>> from pandas.tseries.offsets import CustomBusinessDay
>>> 
>>> # As an interesting example, let's look at Egypt where
>>> # a Friday-Saturday weekend is observed.
>>> weekmask_egypt = 'Sun Mon Tue Wed Thu'
>>> 
>>> # They also observe International Workers' Day so let's
>>> # add that as a holiday for a couple of years
>>> holidays = ['2012-05-01', datetime(2013, 5, 1), np.datetime64('2014-05-01')]
>>> 
>>> bday_egypt = CustomBusinessDay(holidays=holidays, weekmask=weekmask_egypt)
>>> dt = datetime(2013, 4, 30)
>>> print dt + 2 * bday_egypt
2013-05-05 00:00:00
>>> 
>>> dts = date_range(dt, periods=5, freq=bday_egypt).to_series()
>>> print dts
2013-04-30   2013-04-30 00:00:00
2013-05-02   2013-05-02 00:00:00
2013-05-05   2013-05-05 00:00:00
2013-05-06   2013-05-06 00:00:00
2013-05-07   2013-05-07 00:00:00
Freq: C, dtype: datetime64[ns]
>>> 
>>> print Series(dts.weekday, dts).map(Series('Mon Tue Wed Thu Fri Sat Sun'.split()))
2013-04-30    Tue
2013-05-02    Thu
2013-05-05    Sun
2013-05-06    Mon
2013-05-07    Tue
dtype: object 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:15:25.400

目前我认为您需要创建一个自定义子类。您需要覆盖`apply`和`onOffset`方法以考虑您的假期日历。

不过，我们最终应该在业务 X 频率中添加一个可选的假日日历参数。我做了一个github问题来跟踪它：[https ://github.com/pydata/pandas/issues/2301](https://github.com/pydata/pandas/issues/2301)

# c++ - 对原点附近的实数进行四舍五入会导致旋转伪影

> ID：13462807
> 
> 赞同：0
> 
> 时间：2012-11-19T21:44:53.480
> 
> 标签：c++, rotation, rounding

我最近注意到我的旋转算法输出中有异常伪影。我使用将来自目标矩阵的高密度点投影到源图像上的实现来计算来自源像素的贡献的相对比率。这些值被缓存以允许通过展开的循环进行非常快速的旋转。

问题是由舍入行为引起的，最好从一维采样策略的上下文中说明这一点：

如果中心为 0.0 并在任一方向平移 0.9，则四舍五入时仍为 0

```
short(+0.9) == 0
short(-0.9) == 0 
```

但是，如果中心为 1.0 并在任一方向平移 0.9，则

```
short(+0.1) == 0
short(+1.9) == 1 
```

与原点 1 个单位距离内的任何点在四舍五入时都归于原点。这会导致对源图像中靠近轴原点的点进行过采样。解决方案是在执行舍入操作时将浮点坐标深度转换为正空间，然后将其转换回原点。

我的问题：有没有办法在不转化为正空间的情况下避免这种舍入错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T22:20:39.383

看来您只需要使用该`floor`功能：

```
(short)floor(0.9) = 0
(short)floor(-0.9) = -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:37:24.557

所以显而易见的答案是使用该`floor`功能。这是一个很好的答案，它将解决您的问题。

它确实给您留下了`(1.0/3.0)*3.0 != 3.0`IEEE 浮点数学中的问题。事实上，`static_cast<short>(floor((1.0/3.0)*3.0)) == 2`.

You probably want to add an epsilon to your values before calling `floor`. And you probably don't want to use C-style casts, because there is about one legitimate reason to use a C-style cast (google `"do not use C-style casts"` to find out more), and that one is quirky.

So you want something like this:

```
short smart_round( double d, double epsilon=0.00001 ) {
  short retval = static_cast<short>(floor( d + epsilon ) );
  return retval;
} 
```

which incorporates an `epsilon`, does a `static_cast`, and uses `floor` to otherwise round down (instead of the default C/C++ behavior of "round towards zero").

# gcc - 使用 Cmake 进行混合语言 C++、C 和 Fortran 编译

> ID：13462808
> 
> 赞同：4
> 
> 时间：2012-11-19T21:44:53.800
> 
> 标签：gcc, g++, cmake, gfortran

使用`g++`,`gcc`和`gfortran`在 GNU/Linux 上，我编写了一个简单的脚本来编译和链接许多用 C++、C 和 Fortran 编写的源代码文件。以下是脚本的完整内容。该脚本已经过测试，运行良好。

```
g++ -c test-Q.cpp -I./boost/boost_1_52_0/ -g
 gcc -c paul2.c -g
 gcc -c paul2_L1.c -g
 gcc -c paul6.c -g
 gcc -c paul6_L1.c -g 
 gcc -c fit_slope.c -g
 gfortran -c getqpf.F -g
 g++ -o test-Q test-Q.o paul2.o paul2_L1.o paul6.o paul6_L1.o fit_slope.o getqpf.o -g -lgfortran 
```

为了使其更具跨平台性，我想使用 Cmake 重新编写脚本。我该如何处理混合语言编译？

下面列出的以下测试脚本不起作用，只会选择性地编译一些文件。

是否有可能更适合这种类型的编译的另一个跨平台构建过程？

```
cmake_minimum_required (VERSION 2.6)
project (q-test)

include_directories(/media/RESEARCH/SAS2-version2/test-Q/boost/boost_1_52_0)

add_executable( q-test
test-Q.cpp
paul2.c
paul2_L1.c 
paul6.c 
paul6_L1.c 
fit_slope.c
getqpf.F
) # end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T22:09:38.530

您需要为项目启用 Fortran，如下所示：

项目（q-test C CXX Fortran）

此外，您可能希望使用 find_package(Boost) 而不是硬编码包含路径。

# itunes - Songkick 如何导入您的 iTunes 数据？

> ID：13462811
> 
> 赞同：1
> 
> 时间：2012-11-19T21:45:08.130
> 
> 标签：itunes, ituneslibrary

今天我找到了 Songkick.com，它提供了扫描你的 iTunes 资料库的可能性，他们是怎么做到的？我试着用谷歌搜索，但我找不到苹果的 API，你知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:52:14.913

Songkick 在对文件系统具有只读访问权限的 Web 浏览器中加载一个 java 小程序。它指的是 iTunes 库文件，例如在 mac 上`/Users/username/Music/iTunes/iTunes Library.xml`读取所有曲目及其元数据。

由于 iTunes 不能用作 Web 服务，因此它没有 API。

# javascript - Javascript clearInterval 正在加速计时器而不是暂停它

> ID：13462813
> 
> 赞同：0
> 
> 时间：2012-11-19T21:45:17.793
> 
> 标签：javascript, jquery, coldfusion, setinterval, clearinterval

我正在开发一个 ColdFusion 应用程序，它需要一个可以启动、暂停和清除的计时器。我的问题是，虽然它在 IE9、Firefox、Opera、Chrome 和 Safari 中运行良好，但在 IE8 中无法运行（这是我用户群的很大一部分）。问题是，当我单击并尝试停止计时器时，它并没有停止计时器，而是加快了速度。它只在 IE8 中执行（其他浏览器工作正常）。

-- 时钟代码 --

```
function check_timer() {
    if($('#timer').hasClass('start')) {
        $('#timer').val("Stop Timer");
        timer = setInterval ( "increaseCounter()", 1000 );
        $('#timer').removeClass('start')
    }
    else {
        if(typeof timer != "undefined") {
            clearInterval(timer); 
        }

        $('#timer').val("Start Timer");
        $('#timer').addClass('start')
    }
}

function increaseCounter() {
    var secVal;
    var minVal;
    secVal = parseInt($('#counterSec').html(),10) 
    minVal = parseInt($('#counterMin').html(),10)
    if(secVal != 59) {
        secVal = secVal + 1;
        if(secVal < 10) {
            secVal = secVal.toString();
            secVal = "0" + secVal;
        }
        $('#counterSec').html(secVal);
    }
    else {
        if(minVal != 59){
            minVal = minVal + 1;
            if(minVal < 10) {
                minVal = minVal.toString();
                minVal = "0" + minVal;
            }
            $('#counterMin').html(minVal); 
        }
        else {
            $('#counterHour').html((parseInt($('#counterHour').html(),10)+1));
            $('#counterMin').html("00");
        }
        $('#counterSec').html("00");
    }
} 
```

-- DIV 包含时钟 --

```
<div class="supportClock" style="width:150px; border-radius:20px;" align="center">
            <span id="addZeroHour"></span>
            <span id="counterHour">00</span>
            :<span id="addZeroMin"></span>
            <span id="counterMin">00</span>
            :<span id="addZeroSec"></span>
            <span id="counterSec">00</span>
        </div> 
```

-- 激活时钟的按钮 --

```
<input type="button" id="timer" class="start" value="Start Timer" onclick="check_timer()"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:57:52.457

将此添加到脚本的顶部（在函数之外）：

```
var timer; 
```

否则你永远不会遇到这个分支：

```
if(typeof timer != "undefined") 
```

原因：有一个 ID 为“timer”的元素，你可以`timer`不经建议的修改直接使用它，timer 永远不会是“undefined”类型

或者简单地为超时变量使用另一个名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:15:27.797

看看这里：http: [//jsfiddle.net/qEATW/3/](http://jsfiddle.net/qEATW/3/)

> 1.  即使您将间隔设置为例如一秒，调用之间也不一定是一秒。
> 2.  对于超时和间隔，始终传入函数，而不是字符串：`setInterval(increaseCounter, 1000)`
> 3.  没有理由从 DOM 中解析值。这样做是非常低效的。如果您改为使用日期差异，您可以简单地存储一个变量（开始时间），并获取自该时间以来的小时/分钟/秒。您可以随时更新视图，并且它始终是准确的。
> 4.  我个人更喜欢“递归”超时而不是间隔。对于间隔，当您希望间隔停止时，您总是需要采取额外的步骤来清除间隔。您可以通过几种不同的方式停止超时循环，并且往往更容易理解正在发生的事情。超时还允许我们灵活地更改调用之间的时间（此处不相关）。
> 5.  内联（在 HTML 元素上）绑定事件处理程序被认为是一种不好的做法。如果您已经在使用 jQuery，那真的没有任何借口，因为 jQuery 让这个过程变得非常简单。
> 6.  我摆脱了您拥有的“addZero”跨度。我不确定你对它们做了什么，但它们不是必需的，只会使标记变得混乱。

HTML：

```
<div class="supportClock" style="width:150px; border-radius:20px;" align="center">
    <span id="counterHour">00</span>
    : <span id="counterMin">00</span>
    : <span id="counterSec">00</span>
</div>
<input type="button" id="timer" class="start" value="Start Timer"> 
```

JS：

```
(function(){
    var clock = $(".supportClock"),
        hr = $("#counterHour"),
        min = $("#counterMin"),
        sec = $("#counterSec"),       
        running = false,
        startTime,
        timeout;

    function updateClock(){
        var time = (new Date()) - startTime,
            hrs = Math.floor(time / 1000 / 60 / 60),
            mins = Math.floor(time / 1000 / 60 - hrs * 60),
            secs = Math.floor(time / 1000 - mins * 60 - hrs * 60 * 60);

        hr.text(hrs > 9 ? hrs : '0' + hrs);
        min.text(mins > 9 ? mins: '0' + mins);
        sec.text(secs > 9 ? secs : '0' + secs);

        timeout = setTimeout(updateClock, 1000/2);
    }

    $("#timer").click(function(){
        if (!running){
            running = true;
            this.value = "Stop Timer";
            startTime = new Date();
            updateClock();
        }
        else{
            running = false;
            this.value = "Start Timer";
            clearTimeout(timeout);
        }
    });
})(); 
```

# html - 表格的 HTML5 样板问题

> ID：13462814
> 
> 赞同：1
> 
> 时间：2012-11-19T21:45:19.467
> 
> 标签：html, jsp, html-table, boilerplate

我尝试将爱尔兰的 html5boilerplate 添加到页面，但现在我看到我的表 tr 之间的所有这些额外空间。没有控制页面的 CSS。它只是jsp代码和html。基本上，在页面需要处于标准模式的地方添加了代码。所有其他页面都有小的、可管理的差异。但这是一个使用表格布局的旧页面。我尝试过

```
 <pre>
     <style>
      table{display:block}
      tr{margin:0;padding:0}
    </style>
   </pre> 
```

删除边距无济于事。

当我将它添加到头部时，我在 chrome 和 ff 中看到了奇怪的效果：

```
 <pre>
    <!DOCTYPE html>
    <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
    <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
    <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    </pre> 
```

如果没有简单的解决方法，我想添加头部将不得不等到页面重做。

# regex - 正则表达式匹配任何不以大写字母开头的单词

> ID：13462815
> 
> 赞同：2
> 
> 时间：2012-11-19T21:45:20.723
> 
> 标签：regex, word

我需要一个正则表达式来匹配标题中的描述。

仅作为背景，我需要能够在支持正则表达式的文本处理器（notepad++，libreoffice writer）中处理文本，以便所有以小写开头的单词都消失（替换为空）。剩余的单词将被进一步处理以成为文本的标签。

非常感谢

更新：如果可能的话，这应该适用于 unicode 字符，而不仅仅是 ASCII。只有几个字符需要考虑，主要是î,ș

更新 2 \W\l(\w*) 将替换以小写开头的任何单词 [[:punct:]] 将清除剩余的附加标点符号

这适用于记事本++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:01:52.570

如果它们以较低的大写开头，此代码将替换所有单词：

```
string resultString = null;
try {
    resultString = Regex.Replace(subjectString, @"^([a-z]{1})(\w*)", "", RegexOptions.Singleline | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace);
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:56:02.593

您没有指定您正在使用哪种正则表达式，但假设是最常见的，应该这样做：

```
/b[a-z]+ 
```

# ruby-on-rails - 重复出现 Heroku PG Active Record 错误，“列不存在”

> ID：13462818
> 
> 赞同：0
> 
> 时间：2012-11-19T21:45:31.533
> 
> 标签：ruby-on-rails, activerecord, heroku, where, pg

所以，这是我在这个项目的工作过程中第三次收到这个错误几个月前我发布了一个关于这个 [ActiveRecord::StatementInvalid (PG::Error: ERROR: column does not exist](https://stackoverflow.com/questions/11944279/activerecordstatementinvalid-pgerror-error-column-does-not-exist)

Heroku 日志

```
2012-11-19T05:04:20+00:00 app[web.1]: Processing by MainController#home as HTML
2012-11-19T05:04:20+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-11-19T05:04:20+00:00 app[web.1]: 
2012-11-19T05:04:20+00:00 app[web.1]: LINE 1: SELECT "apartments".* FROM "apartments"  WHERE (Bed = 0)
2012-11-19T05:04:20+00:00 app[web.1]:                                                         ^
2012-11-19T05:04:20+00:00 app[web.1]:   app/controllers/main_controller.rb:6:in `home'
2012-11-19T05:04:20+00:00 app[web.1]: : SELECT "apartments".* FROM "apartments"  WHERE (Bed = 0)):
2012-11-19T05:04:20+00:00 app[web.1]: 
2012-11-19T05:04:20+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:  column "bed" does not exist 
```

控制器代码

```
def home
  @apartments = Apartment.all
  @studio = Apartment.where(:Bed => 0).all
  @oneBdr = Apartment.where(:Bed => 1).all
  @twoBdr = Apartment.where(:Bed => 2).all
  @threeBdr = Apartment.where(:Bed => 3).all
  @fourPlusBdr = Apartment.where("Bed >= 4").all
end 
```

基本上，我能够通过从 find 切换到 where 然后第二次从 where 返回到 find 来修复它。我永远无法理解它为什么起作用，但它确实起作用了，所以我最终忘记了它，直到我再次开始收到错误。现在，无论我在哪里/查找搜索之间交换，我仍然会遇到同样的错误。任何帮助都将受到高度欢迎，我对这个问题的原因可能是什么有点迷茫。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:56:41.833

您是否通过一个添加列迁移创建了床列？如果是的话试试这个

[http://blog.blazingcloud.net/2010/12/02/heroku-migration-fails-to-update-attributes-reset_column_information/](http://blog.blazingcloud.net/2010/12/02/heroku-migration-fails-to-update-attributes-reset_column_information/)

# c# - ViewState 会话何时清除？

> ID：13462827
> 
> 赞同：4
> 
> 时间：2012-11-19T21:46:42.220
> 
> 标签：c#, asp.net, visual-studio-2010, viewstate, session-state

我知道 SessionState 在会话结束时被清除 - 通常在 20 分钟不活动后。我的问题是 ViewState 会话何时终止？还是它永远不会死？有什么办法可以清除吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T21:49:55.203

Viewstate 只要在页面上就会持续存在 - 它与 HTML 一起输出；检查渲染页面的源代码，您将在隐藏字段中看到大量文本。

就像是：

```
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUJNTIyODQ4NzI..... 
```

一旦页面消失，它就消失了。

您可以通过调用清除它

```
ViewState.Clear() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:51:57.543

Old ViewState，就像[老兵](http://www.youtube.com/watch?v=CdoQhEqzAb4)一样，永远不会消亡，只会逐渐消失……

它存储在 HTML 页面的隐藏字段中，并在浏览器的缓存中保持活动状态。

# php - PHP将帖子写入文件不起作用

> ID：13462829
> 
> 赞同：0
> 
> 时间：2012-11-19T21:46:54.780
> 
> 标签：php, post, fwrite

我正在尝试获得一个简单的表单，它将使用 php 写入文件。但是我遇到了一个错误，每当我尝试写入通过帖子获得的值时，它都会将“0”写入文件而不是值。

我有如下表格：

```
<form method="post" action="test.php">
<input type="text" name="user" />
<input type="submit" value="submit"/>
</form> 
```

test.php 通过以下方式从表单中获取用户：

```
$user = $_POST['user']; 
```

我可以很好地显示`$user`在页面上，并且我也可以使用 fine 将字符串写入文件`fwrite`。但每当我`fwrite($file,$user)`写的唯一的东西是一个`0`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:50:44.487

您是否在 fwrite 中缺少文件句柄，而不是文件

```
$user = $_POST['user'];
$fh = fopen("file.txt","a");
fwrite($fh,($user."\r\n")); // add newline for next time
fclose($fh); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:52:42.363

您也可以简单地将 file_put_contents 与 FILE_APPEND 标志一起使用：

```
<?php 
if($_SERVER['REQUEST_METHOD']=='POST'){
    if(!empty($_POST['user'])){
        file_put_contents('file.txt',trim($_POST['user'])."\n",FILE_APPEND);
    }
}
?> 
```

# asp.net - Sitefinity 样式表覆盖 5.2

> ID：13462831
> 
> 赞同：1
> 
> 时间：2012-11-19T21:47:07.333
> 
> 标签：asp.net, asp.net-mvc, razor, sitefinity

我需要为我们创建的母版页上的所有元素删除 Sitefinity 的开箱即用样式。我倾注了大量文件，但它们都让我想要更多、更清洁、更简单的方式来实现这一目标。CSS 覆盖看起来很庞大，从配置文件中删除它会破坏我的业务用户在 CMS 中工作和快速更新的能力。此外，我已经在用户控制级别尝试了自定义小部件覆盖，但仍然不喜欢结果。

那么，如何做到这一点，保持干净的代码，并使业务用户更容易使用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:31:41.847

Sean 是对的 - 如果您不使用默认主题，Sitefinity 不会将样式添加到您的模板中。

[鉴于您在sitefinity.com](http://www.sitefinity.com/devnet/forums/designing-styling/overriding-all-radcontrol-styling-globally-)上的论坛主题，您不会因为 Sitefinity 而遇到麻烦，而是因为使用了默认的 RadControls。

如果您用自定义解决方案替换它们，不仅不会添加样式，而且 html 标记本身也会更清晰。

例如，您可以使用 Marketplace 导航控件之一或将[KendoUI](http://demos.kendoui.com/web/menu/index.html)与站点地图数据源结合使用，这将为您提供如下内容：

```
<ul id="sitepanelnav" class="sitepanelnav k-group" data-role="treeview" >
...
<li class="k-item">
 <div class="k-mid">
  <span class="k-in">
   <a href="/page2.aspx">linktext</a>
  </span>
 </div>
</li>
...
</ul> 
```

但是如果你真的很喜欢干净的标记和干净的样式，你可以使用 API 来渲染一个 100% 干净的*ul/li*并从那里得到 100% 的控制。

如果您仍然打算使用 RadControls，请从[Stylebuilder](http://stylebuilder.telerik.com/)开始以直观地构建您的设计基础，然后手动调整/集成和优化生成的 .css 文件。

您作为皮肤输入的名称是您应该在小部件选项中添加为“设计师皮肤”的名称。

简而言之：是的，它可以完成，但它需要一些编码或一些造型工作，你喜欢哪一个当然取决于你。

# javafx-2 - javafx html 编辑器

> ID：13462834
> 
> 赞同：4
> 
> 时间：2012-11-19T21:47:19.443
> 
> 标签：javafx-2, javafx, fxml

实际上我正在寻找与此线程非常相似的东西：

[如何隐藏 HTMLEditor 的控件？](https://stackoverflow.com/questions/10075841/how-to-hide-the-controls-of-htmleditor)

所以基本上我尝试向 javafx html 编辑器添加一个自定义按钮，但不同之处在于它是通过 FXML 实现的。

**所以我的问题是：**

当通过 FXML 实现时，是否有“解决方法”将自定义按钮添加到 html 编辑器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-06T08:04:37.927

示例解决方案是：

```
htmlEditor.setVisible(false);
    Platform.runLater(new Runnable() {

        @Override
        public void run() {
            Node[] nodes = htmlEditor.lookupAll(".tool-bar").toArray(new Node[0]);
            for (Node node : nodes) {
                node.setVisible(false);
                node.setManaged(false);
            }
            htmlEditor.setVisible(true);
        }

    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-25T09:07:23.397

我已经修改了 javaFX9 的 @jewelsea 答案。

我还添加了一些自定义来移动工具栏。主要思想是通过css选择器获取所有组件，然后修改或隐藏它们。阅读 HTMLEditorSkin 类以获取 CSS 类名称，例如对齐按钮的“.html-editor-align-center”。

```
import java.util.Iterator;
import java.util.List;
import java.util.Set;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.regex.Pattern;

import javafx.application.Application;
import javafx.application.Platform;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Node;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.ComboBox;
import javafx.scene.control.MenuButton;
import javafx.scene.control.MenuItem;
import javafx.scene.control.RadioMenuItem;
import javafx.scene.control.ToolBar;
import javafx.scene.effect.DropShadow;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.GridPane;
import javafx.scene.web.HTMLEditor;
import javafx.stage.Stage;

public class HTMLEditorCustomizationSample2 extends Application {
    // limits the fonts a user can select from in the html editor.
    private static final ObservableList<String> limitedFonts = FXCollections.observableArrayList("Arial",
            "Times New Roman", "Courier New", "Comic Sans MS");
    private HTMLEditor htmlEditor;

    public static void main(String[] args) {
        launch(args);
    }

    @SuppressWarnings("unchecked")
    @Override
    public void start(Stage stage) {
        htmlEditor = new HTMLEditor();
        stage.setScene(new Scene(htmlEditor));
        stage.show();

        customizeEditor(htmlEditor);

    }

    private void customizeEditor(HTMLEditor htmlEditor) {
        // hide controls we don't need.
        Node seperator = htmlEditor.lookup(".separator");
        seperator.setVisible(false);
        seperator.setManaged(false);
        hideByClass(htmlEditor, ".separator");
        hideByClass(htmlEditor, ".html-editor-cut", ".html-editor-copy", ".html-editor-paste", ".html-editor-strike",
                ".html-editor-hr");
        hideByClass(htmlEditor, ".html-editor-align-left"
                , ".html-editor-align-center"
                , ".html-editor-align-right"
                , ".html-editor-align-justify", ".html-editor-outdent"
                , ".html-editor-indent", ".html-editor-bullets"
                , ".html-editor-numbers");
        // Move the toolbars
        Node top= htmlEditor.lookup(".top-toolbar");
        GridPane.setConstraints(top,1,0,1,1);
        Node bottom= htmlEditor.lookup(".bottom-toolbar");
        GridPane.setConstraints(bottom,0,0,1,1);
        Node web= htmlEditor.lookup("WebView");
        GridPane.setConstraints(web,0,1,2,1); 

        // modify font selections.
        int i = 0;
        Set<Node> fonts = htmlEditor.lookupAll(".font-menu-button");
        Iterator<Node> fontsIterator = fonts.iterator();
        fontsIterator.next();
        ComboBox<String> formatComboBox = (ComboBox<String>) fontsIterator.next();

        formatComboBox.itemsProperty().addListener((obs, old, value) -> {
            if (value.size() != limitedFonts.size()) {// should loop on array for equality
                Platform.runLater(() -> {
                    value.clear();
                    // stop.set(true);
                    value.addAll(limitedFonts);
                    formatComboBox.setValue(limitedFonts.get(0));
                });

            }
        });

        // add a custom button to the top toolbar.
        Node node = htmlEditor.lookup(".top-toolbar");
        if (node instanceof ToolBar) {
            ToolBar bar = (ToolBar) node;
            ImageView graphic = new ImageView(
                    new Image("http://bluebuddies.com/gallery/title/jpg/Smurf_Fun_100x100.jpg", 16  , 16, true, true));
            graphic.setEffect(new DropShadow());
            Button smurfButton = new Button("", graphic);
            bar.getItems().add(smurfButton);
            smurfButton.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent arg0) {
                    htmlEditor.setHtmlText("<font face='Comic Sans MS' color='blue'>Smurfs are having fun :-)</font>");
                }
            });
        }
    }

    private void hideByClass(HTMLEditor htmlEditor, String... selectors) {
        for (String selector : selectors) {
            Set<Node> nodes = htmlEditor.lookupAll(selector);
            for (Node node : nodes) {
                node.setVisible(false);
                node.setManaged(false);
            }
        }
    }

    @Override
    public void stop() throws Exception {

        super.stop();
        System.out.println(htmlEditor.getHtmlText());
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T08:40:00.120

Here is some [sample code](https://gist.github.com/2514709) which customizes the HTMLEditor and adds a custom button to it. The sample code does not use fxml but really it's very similar if fxml is used. You could define the HTMLEditor in fxml and inject it into your `Controller` using the standard `@FXML` annotation. Once you have a reference to the editor, customize it in Java code using an appropriate variation of the sample code. For the added button, just create it in Java rather than fxml and it will be simpler.

# javascript - 视频js ie9一页上有多个网址

> ID：13462837
> 
> 赞同：0
> 
> 时间：2012-11-19T21:47:29.380
> 
> 标签：javascript, internet-explorer-9, video.js

我有一个像这样的视频网址对象：

```
 var urls = new Object();

  urls['cail_ivt'] = {'mp4_url': http://link_to_.mp4', 'webm_url': 'http://link_to_.webm', 'flv_url': 'http://link_to_.flv' };

  urls['cail_ty'] = {'mp4_url': 'http://link_to_.mp4', 'webm_url': 'http://link_to_.webm', 'flv_url': 'http://link_to_.flv' };

  urls['cail_1'] = {'mp4_url':       'http://link_to_.mp4', 'webm_url': 'http://link_to_.webm', 'flv_url': 'http://link_to_.flv' };

  urls['cail_2'] = {'mp4_url': 'http://link_to_.mp4', 'webm_url': 'http://link_to_.webm', 'flv_url': 'http://link_to_.flv' };

  urls['cail_3'] = {'mp4_url': 'http://link_to_.mp4', 'webm_url': 'http://link_to_.webm', 'flv_url': 'http://link_to_.flv' };

_V_.options.flash.swf = 'http://static_server/video-js.swf'; 
```

我有一堆锚标签，它们的 id 是 urls 对象的关键：

然后我写了一个小 js 来绑定这些锚点击，并将适当的视频加载到播放器 div 中并显示它。它从不显示，也不播放。这似乎只发生在 ie9 中。

```
 $('ul a.play_button').click(function() {

    var campaign_id = $(this).attr('id');

    var mp4_url  = urls[campaign_id].mp4_url;
    var webm_url = urls[campaign_id].webm_url;
    var flv_url  = urls[campaign_id].flv_url;   

    var video_player = '<video id="video" class="video-js vjs-default-skin" controls preload="none" width="640" height="360" poster="" data-setup="{}"> '
                                   + '<source id="mp4"   src="'+mp4_url+'" type="video/mp4" />'
                                   + '<source id="flash" src="'+flv_url+'" type="video/flv" />'
                                   + '<source id="webm"  src="'+webm_url+'" type="video/webm" />'
                                   + '</video>';
    $('#player').empty();
    $('#player').html(video_player);                                
}); 
```

不确定这是否是在播放器中处理多个视频的最佳方式，但这是我想出的。非常感谢讨论和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:34:34.327

类似于我与 videojs 的其他问题。我必须为播放器声明一个变量集：

```
 var mplayer = _V_('video'); 
```

当我在同一页面上加载其他视频时，我只需暂停播放器，将其倒回到视频的开头并设置新的视频源：

```
 mplayer.pause();
 mplayer.currentTime(0);
 mplayer.src([{ type: "video/mp4", src: mp4_url },{ type: "video/webm", src: webm_url },{ type: "video/flv", src: flv_url }]); 
```

# ajax - Symbian 的PhoneGap 应用程序| “应用程序关闭：WidgetUi KERN-EXEC 3”

> ID：13462842
> 
> 赞同：1
> 
> 时间：2012-11-19T21:47:41.637
> 
> 标签：ajax, cordova, symbian, nokia-wrt, jquery-1.8

我为 symbian 开发 phonegap 应用程序（我从[这里](https://github.com/phonegap/phonegap-symbian.wrt/tree/a779600377f17511f2ff94beb0ab9e8a357860e1)得到的 symbian 的cordova ）

当我的应用程序开始执行`ajax`请求 3-5 秒后，我收到错误：

![在此处输入图像描述](../Images/bcfcf9bba37e52570758ef75677a46b4.png)

也许有人面临这个问题？

* * *

更新1：

我发出跨域ajax请求`jquery mobile 1.8.1`

```
$.ajax({
    type: 'GET',
    url: "http://example.org/some/path",
    dataType: "json",
    mimeType: "application/json",
    headers: { "TOKEN": "%SOME_TOKEN%" }

 }).done(function (data) {
     // success processing
 }).fail(function (xhr, textStatus) {
     // fail processing
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:27:14.107

这可能就像您在创建 AJAX`"`的`url`行中缺少这一事实一样简单，但我怀疑事实并非如此。我猜这是一个复制错字。此错误消息意味着您遇到了一个未捕获的异常，导致您的应用程序关闭。

其他人报告说用于移动设备的 JQuery 存在错误，并且某些 HTTP 响应状态存在问题。我建议完全绕过它，并发出您自己的 AJAX 请求，作为一种解决方法（互联网上有很多示例；我想要`alert`响应状态，这样您就可以看到您得到了什么）。如果可行，您可以调查是否其他版本的 JQuery 也有同样的错误。

没有 JQuery 的示例 AJAX：

```
<script type="text/javascript">
var xmlhttp = new XMLHttpRequest();

xmlhttp.onreadystatechange = function()
{
  if (xmlhttp.readyState == 4)
  {
    // do stuff with xmlhttp.responseText;
  }
}
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:16:13.030

KERN-EXEC 3 是由于引用了错误的指针或堆栈空间不足。可能是后者，但不能说。有什么方法可以提供调用堆栈？

# java - Db4o 数据连接错误

> ID：13462843
> 
> 赞同：0
> 
> 时间：2012-11-19T21:47:43.763
> 
> 标签：java, db4o

我想使用 db4o，我正在 youtube.com 教程中学习这个。不幸的是，我无法在我的代码中找到错误。我想知道为什么我会出现错误？我添加了所有重要的库。

![在此处输入图像描述](../Images/a30bae2312575a95b009e810d5b7a538.png)

代码重要类：

```
package data;

import com.db4o.*;
import com.db4o.config.EmbeddedConfiguration;

public class DataConnection {
private static DataConnection INSTANCE =null;
private final String PATH = "test.db4o";
private static ObjectContainer db;

private DataConnection(){}  

private synchronized static void createInstance(){
    if (INSTANCE ==null){
        INSTANCE = new DataConnection();
        INSTANCE.performConnection();
    }}
public void performConnection() {
    EmbeddedConfiguration config = Db4oEmbedded.newConfiguration();
    db = Db4oEmbedded.openFile(config, PATH);
}

public static ObjectContainer getInstance() {
    if(INSTANCE == null) createInstance();
    return db;
}

public static void closeConnection() {
    try{
        db.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

这是本教程（重要的事情 5:44）： [http ://www.youtube.com/watch?v=dcNfkED53to](http://www.youtube.com/watch?v=dcNfkED53to)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:39:12.267

尝试更换

```
new DataConnection.getInstance() 
```

和

```
DataConnection.getInstance() 
```

该关键字`new`仅在创建新对象时使用。在这里，您正在调用静态方法。

# ios - 像 iPhone facebook 应用程序一样的可拖动 ViewController

> ID：13462844
> 
> 赞同：1
> 
> 时间：2012-11-19T21:47:45.927
> 
> 标签：ios, draggable, uipangesturerecognizer

我想知道如何实现一个可拖动的视图控制器，例如在 Facebook 应用程序中，用户可以从屏幕的最左侧拖动到右侧，视图控制器将跟随，在下面显示另一个视图。我不是要抄袭这种设计，我只是觉得它是一种非常有趣的显示额外信息的方式，我想了解更多关于可拖动界面的信息。

现在我对 UIPanGestureRecognizers 有点熟悉，但我想这要复杂得多？

我从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:11:53.793

我用这个非常好运：

[ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)

我当时（比如一个月前）对所有选项进行了研究，这与 facebook 最相似，因为您可以拖动屏幕上的任意位置来移动它。这也支持两个方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:07:13.037

您可以在这里找到解决方案：[如何移动 UIViewController？](https://stackoverflow.com/questions/8968877/how-to-move-an-uiviewcontroller)

在该示例中，您可以通过滑动导航栏来拖动视图控制器

在该示例中，FronViewController viewDidLoad 方法包含代码：

```
UIPanGestureRecognizer *navigationBarPanGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self.navigationController.parentViewController action:@selector(revealGesture:)];
[self.navigationController.navigationBar addGestureRecognizer:navigationBarPanGestureRecognizer]; 
```

ZUUIRevealController 包含处理识别器的方法：

```
- (void)revealGesture:(UIPanGestureRecognizer *)recognizer 
```

# javascript - 在 div 中使用 onclick 函数来显示/隐藏另一个 div

> ID：13462849
> 
> 赞同：0
> 
> 时间：2012-11-19T21:47:55.777
> 
> 标签：javascript, jquery

我以前做过，但是由于某种原因，这次它不起作用，而且我已经盯着它看了很长时间，以至于我几乎可以保证我永远找不到问题...

我有这段 HTML，它创建了一个表单。

```
<div class="paymentForm">               

    <span class="pgHeading" style="margin: 30px 0;">Payment Information</span>
    <div class="inputRedTemplate paymentType inputRoundedTop" onclick="javascript:displayPaymentFields()">
        <div class="label">Credit Card</div>
    </div>

    <div class="inputRedTemplate paymentType">
        <div class="label">Cash</div>
    </div>

    <div class="inputRedTemplate paymentType inputRoundedBottom" onclick="">
        <div class="label">Check</div>
    </div>

    <div id="cashPaymentBlock">
        <span>For cash payments, bills higher than $20 will not be accepted.</span>
    </div>

    <div id="ccPaymentBlock">
        <span class="ccDisclaimer" style="margin: 30px 0;">
           Your credit card transaction will be processed by your store location and you must
           present your credit card to the driver at the time the store delivers your order for a
           credit imprint and your signature.
        </span>

        <input id="card_name" name="cardName" class="inputRedTemplate inputFullWidth" placeholder="Cardholder Name" />
        <input id="card_number" name="cardNumber" class="inputRedTemplate inputFullWidth" placeholder="Card Number" onkeypress="return checkNumbers(event,this)" />
        <div class="error" id="err_msg" style="display: none;">Numbers only!</div>

        <input id="card_type" name="cardType" class="inputRedTemplate inputFullWidth inputRoundedBottom" placeholder="Credit Card Type" />
        <input id="card_expire_month" name="cardExpireMonth" class="inputRedTemplate gcNumber" placeholder="2 Digit Expiration Month" />
        <input id="card_expire_year" name="cardExpireYear" class="inputRedTemplate gcPin" placeholder="4 Digit Year" />
        <input id="card_zip" name="cardZip" class="inputRedTemplate inputFullWidth inputRoundedBottom" placeholder="Billing ZIP Code" />
    </div>
    <div class="btnRedTemplate btnFullWidth checkoutBtn floatLeft" style="margin-top:30px;" onclick="" title="Submit Button" />Submit</div>
</div> 
```

我有以下脚本：

```
<script>
    $(document).ready( function () {
        hideAllPaymentBlocks();
    })

    function hideAllPaymentBlocks() {
      $('#cashPaymentBlock').hide();
      $('#ccPaymentBlock').hide();
      // add line for checks, too
    }    

    function displayPaymentFields() {
        $('ccPaymentBlock').show();  
    }

</script> 
```

该`hideAllPaymentBlocks`函数在 ready 函数中正确运行，但`displayPaymentFields`在单击 Credit Card div 时似乎没有运行。没有错误；它只是没有做任何事情。谁能指出我正确的方向？正如我所说，我已经盯着这个有一段时间了，我确信这很容易解决，但我无法让我的大脑正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:51:36.097

你忘记了哈希`$('#ccPaymentBlock').show();`

# javascript - 从 JavaScript 正确设置全局变量

> ID：13462850
> 
> 赞同：0
> 
> 时间：2012-11-19T21:47:57.100
> 
> 标签：javascript, global-variables

我有简单的代码：

```
<script type="text/javascript">

var dataFromBrowser;
var dataForStore = [];

var callServerOwnerId = { 
  callback:callbackFunction, 
  arg: dataFromBrowser 
};
// call to DWR function - from Java
AssetScreener.getEntityOwnerIds(callServerOwnerId);

function callbackFunction(dataFromServer, arg1) {
 // yes, I see what I need
 alert(dataFromServer);
 return dataForStore[0] = dataFromServer[0];

}

console.log(dataForStore); 
```

问题是我需要从我的数据中检索数据`callbackFunction`并将数据设置为`dataForStore`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:51:26.810

在 javascript 中设置全局变量就像省略 var 关键字一样简单。

例如：

```
 var someVar = 5

 function foo(){
      someVar = someVar + 1;
 } 
```

会产生 undefined while

```
 someVar = 5;

 function foo(){

      someVar = someVar+1;
 } 
```

将产生 6。请注意，一般来说（当然有例外），如果您使用全局变量，那么您做错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:50:45.133

去掉 dataForStore 之前的 var ，它就会变成一个全局变量。

# linux - 如何挂载在不同磁盘上创建的 zfs 池

> ID：13462859
> 
> 赞同：1
> 
> 时间：2012-11-19T21:48:34.643
> 
> 标签：linux, zfs

我升级了我的内核并且驱动程序号发生了变化，所以我丢失了我的 zfs 磁盘（这是一个测试系统）。

所以我想知道如何恢复它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:48:34.643

```
root@kkron-desktop:/# zpool list
NAME   SIZE  ALLOC   FREE    CAP  DEDUP  HEALTH  ALTROOT
zmt       -      -      -      -      -  FAULTED  -
zmt1      -      -      -      -      -  FAULTED  -
zmt0      -      -      -      -      -  FAULTED  -
root@kkron-desktop:/# zpool import zmt0
root@kkron-desktop:/# zpool list
NAME   SIZE  ALLOC   FREE    CAP  DEDUP  HEALTH  ALTROOT
zmt       -      -      -      -      -  FAULTED  -
zmt0   476G   443G  33.3G    93%  1.15x  ONLINE  -
zmt1      -      -      -      -      -  FAULTED  -

root@kkron-desktop:/# ls /zmt0
cache  kkron  PortableApps

root@kkron-desktop:/# zpool export zmt
root@kkron-desktop:/# zpool export zmt1
root@kkron-desktop:/# zpool import zmt
root@kkron-desktop:/# zpool import zmt1 
```

# java - Proxool java.lang.NoClassDefFoundError

> ID：13462861
> 
> 赞同：0
> 
> 时间：2012-11-19T21:48:42.000
> 
> 标签：java, jdbc, glassfish, connection-pooling, proxool

我刚开始使用 Proxool（JDBC 连接池管理器）。我下载了在以下链接中找到的 jar：http: [//proxool.sourceforge.net/download.html](http://proxool.sourceforge.net/download.html)。之后，我只是将 jar 位置添加到 netbeans 7.0.1 中的 ClassPath 中，构建项目，重新启动我的服务器（即 Glassfish），然后尝试配置它，如本示例所示：

[https://java2s.com/Open-Source/Java/Database-JDBC-Connection-Pool/proxool/org/logicalcobwebs/proxool/ProxoolDataSourceTest.java.htm](https://java2s.com/Open-Source/Java/Database-JDBC-Connection-Pool/proxool/org/logicalcobwebs/proxool/ProxoolDataSourceTest.java.htm)

我刚刚调整了示例（参数）以修复到我的应用程序中，并且下面的以下代码崩溃了。它显示了错误`java.lang.NoClassDefFoundError: Could not initialize class org.logicalcobwebs.proxool.ProxoolDataSource`。

我不明白为什么，因为我刚刚导入了整个包。我不知道从哪里开始。

这是我的代码：

```
import org.logicalcobwebs.proxool.*;
import org.logicalcobwebs.*;

/* Error Here ----> */ ProxoolDataSource dataSource = new ProxoolDataSource();
        dataSource.setAlias("flpool");
        dataSource.setDriver("com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource");
        dataSource.setDriverUrl("jdbc:mysql://localhost:3306/superdb");
        dataSource.setUser("db");
        dataSource.setPassword("password");
        dataSource.setMaximumActiveTime(100);
        dataSource.setMinimumConnectionCount(8);
        dataSource.setMaximumConnectionCount(25);
        Hashtable env = new Hashtable();
        env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.rmi.registry.RegistryContextFactory");
        env.put(Context.PROVIDER_URL, "rmi://localhost:1099");
        Context context = new InitialContext(env);
        context.createSubcontext("jdbc");
        context.bind(jndiName,dataSource);
        context.close();          

    DataSource ds = (DataSource) context.lookup(jndiName);

    ProxoolFacade.removeConnectionPool("flpool");   

    context.close(); 
```

如果有人有任何想法会感谢您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:50:46.457

我猜你缺少一个[Apache Commons Logging](http://projects.apache.org/projects/commons_logging.html) JAR。

讯息

```
无法初始化类 org.logicalcobwebs.proxool.ProxoolDataSource

```

表示命名类的静态初始化失败。

我下载了Proxool的源码，这个类中唯一的静态初始化就是下面这行：

```
private static final Log LOG = LogFactory.getLog(ProxoolDataSource.class); 
```

尝试将 Commons Logging JAR 添加到您的项目并重新启动服务器。

# python - pymongo+更新抛出 $pull

> ID：13462863
> 
> 赞同：3
> 
> 时间：2012-11-19T21:48:46.323
> 
> 标签：python, mongodb, pymongo

我有一个 mongo 文件：

```
{ "_id" : 0, "name" : "Vasya", "fav" : [ { "type" : "t1", "weight" : 1.4163 }, { "type" : "t2", "weight" : 11.7772 }, { "type" : "t2", "weight" : 6.4615 }, { "type" : "homework", "score" : 35.8742 } ] } 
```

对于删除数组“fav”中的最低元素，我使用以下 Python 代码：

```
db.people.update({"fav":{"type":"t2", "weight":lowest}}, {"$pull":{"fav"{"type":"t2", "weight":lowest}}}) 
```

其中变量`lowest`是 6.4615 和 35.8742 之间的最小值。

问题是这段代码什么都不做。没有错误，并且值不会从数组中删除。但是如果我在 mongo shell 中编写相同的代码，结果是肯定的。

不幸的是，我在 pymongo 和 mongo 的经验不是很好。因此，如果有人知道问题所在，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:01:30.177

该语法在 Mongo shell 和 pymongo 中对我来说很好，因此怀疑问题是浮点数的精度。

我不知道你是如何推导/计算的`lowest`，但你可能想考虑标准化小数点后的最大有效位数，或者甚至有一个函数可以将你的浮点数标准化为相同的精度，当你最初保存时文档以及您以后查询或更新它们时。

Mongo 和 Python 都不认为 6.676176060654615 等于 6.67617606065 这解释了为什么您的更新没有效果。

# asp.net-mvc-3 - 打开 Telerik 窗口

> ID：13462871
> 
> 赞同：0
> 
> 时间：2012-11-19T21:49:17.167
> 
> 标签：asp.net-mvc-3, jquery, telerik, asp.net-ajax

我希望你能帮助我解决一个难题。在我在下面问我的问题之前，我要写一堆代码:)

**在我的页面上单击某些内容时：**

```
<input type='button' value='1' name='derp1' onclick='OpenTelerikWindow(1)' />
<br/>
<input type='button' value='2' name='derp2' onclick='OpenTelerikWindow(2)' /> 
```

**我用 Jquery 打开 Telerik 窗口：**

```
function OpenTelerikWindow(arg) {
var url = '/Controller/Derp/';
$.ajax({
    type: "GET",
    url: url,
    dataType: "html",
    data: { id: arg }
    success: function (data) {
        $('#PaymentWindow').data("tWindow").content(data);
        $('#PaymentWindow').data("tWindow").center().open().refresh();
    }
  });
} 
```

**我的控制器 ActionResult：**

```
public ActionResult Derp(int id)
{
    SomeModel someModel = _GetModel(id);
    return PartialView("Derp", someModel)
} 
```

**然后我的 Telerik Window 的内容是这样的：**

```
@SomeModel
<div id="theDerpina">
    <div>
        //Some Stuff
        @using (Ajax.BeginForm("Derpina1", "Controller", new { id = SomeModel.id }, new AjaxOptions
            {
                HttpMethod = "POST",
                UpdateTargetId = "theDerpina",
                InsertionMode = InsertionMode.Replace
            }, new { id = "feedback-form" }))
        {
            //Some Stuff
            <button type="submit" > Submit</button>
            <br/>
            <button type="button" > CloseWindow </button>
        }
    </div>
    <div>
        //More Stuff
        @using (Ajax.BeginForm("Derpina2", "Controller", new { id = SomeModel.id }, new AjaxOptions
            {
                HttpMethod = "POST",
                UpdateTargetId = "theDerpina",
                InsertionMode = InsertionMode.Replace
            }, new { id = "feedback-form" }))
        {
            //Different Stuff
            <button type="submit" > Submit</button>
            <br/>
            <button type="button" > CloseWindow </button>
        }
    </div>
</div> 
```

**我的另外两个控制器动作：**

```
public ActionResult Derpina1(int id)
{
    SomeModel someModel = _GetModel(id);
    if(ModelState.IsValid)
    {
        //DoStuff
        return View("SomeOtherView");
    }
    else
    {
        return PartialView("Derp", someModel);
    }
}

public ActionResult Derpina2(int id)
{
    SomeModel someModel = _GetModel(id);
    if(ModelState.IsValid)
    {
        //DoDifferentStuff
        return View("SomeOtherView");
    }
    else
    {
        return PartialView("Derp", someModel);
    }
} 
```

当我打开一次窗口时，一切正常。但是，如果我要打开窗口，关闭它，然后再次打开它，就会发生奇怪的事情。例如，假设我单击了 Derpina1 的提交按钮，我将收到两个对该特定控制器操作的调用。如果我在 Firebug 中监控控制台，我会看到对控制器操作的两个单独调用。如果我再次关闭窗口，再次打开它，然后再次提交，同样的事情会发生，我的控制器操作现在将收到 4 次对我的控制器操作的调用。

也许你们可以指出正确的方向。我是否应该以不同的方式打开 Telerik 窗口，如果发生这种情况，我是否应该使用不同的方法返回 ModelError？（因为如果我收到 ModelError，我将面临同样的行为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:54:34.280

**I managed to find out the solution after googling a while. All I did was creating a Window on the fly from within the script, and then destroying it after I have used it, like so:**

```
function OpenTelerikWindow(arg) {
var url = '/Controller/Derp/';
$.ajax({
    type: "GET",
    url: url,
    dataType: "html",
    data: { id: arg }
    success: function (data) {
        var paymentWindow = $("<div id='PaymentWindow'></div>").tWindow({
            title: "Payment",
            contentUrl: '',
            html: data,
            modal: true,
            resizable: false,
            draggable: true,
            width: 500,
            height: 640,
            onClose: function (e) {
                e.preventDefault();
                paymentWindow.data('tWindow').destroy();
            }
        });
        paymentWindow.data('tWindow').center().open();
    }
  });
} 
```

# mysql - 使用两个密钥检索尽可能多的数据，其中一个已损坏

> ID：13462872
> 
> 赞同：0
> 
> 时间：2012-11-19T21:49:17.913
> 
> 标签：mysql, sql

我正在尝试从另一个表（all_info）向一个表（some_data）添加一列；最初，id_a 和 id_b 将是足够的外键，我将使用它们来唯一标识表 all_info 中的值，以将其带到表 some_data。但是，在某些地方， some_data 中的*某些*id_b 已损坏。因此，我想向 some_data 添加一列，当 id_a 和 id_b 完全匹配时，它仍然使用 all_info 中的值，或者，如果 id_a 和 id_b 上不存在完全匹配但该特定 id_a 只有一个条目all_info，我们假设这就是我们想要的（并替换 some_data 中损坏的 id_b）

所以，给定两张表，

```
some_data        all_info
id_a | id_b      id_a | id_b | val
------------     --------------------
 1   | a          1   | a    | v_i
 2   | b          2   | c    | v_x
 3   | c          2   | b    | v_ii
 4   | d          3   | d    | v_iv
                  3   | e    | v_v
                  4   | f    | v_vi 
```

我想获得：

```
id_a | id_b | val
------------------
 1   | a    | v_i
 2   | b    | v_ii
 3   | c    | NULL
 4   | f    | v_vi 
```

到目前为止，我已经想到了两种方法，其中一种是初步的：

```
SELECT sd.*, ai.val
FROM some_data sd
LEFT OUTER JOIN all_info ai
ON sd.id_a = ai.id_a
  AND (sd.id_b = ai.id_b OR COUNT(*) = 1) 
```

当然，这本身是行不通的（也没有实现我替换坏 id_b 的次要目标），但是尝试使用 COUNT() 函数进行各种分组和选择，我找不到任何 SQL 认为可以运行的内容和。我还想尝试使用 SET 命令填充该列，但再次找不到使其工作的方法。

作为旁注，查看数据似乎 all_info 至少有一行与 id_a 和 id_b 上的 some_data 匹配。此外，当 id_a 和 id_b 匹配时，考虑到 id_b 的复杂性，可以安全地假设匹配是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:17:06.433

您的选择将是这样的：

```
SELECT sd.id_a, sd.id_b, 
       CASE WHEN ai.id_a IS NULL THEN ai2.val ELSE ai.val END as val

FROM   some_data sd

       LEFT JOIN all_info ai
       ON ad.id_a = ai.id_a AND ad_id_b = ai.id_b

       LEFT JOIN 
       (SELECT id_a, MIN(id_b) id_b, MIN(val) val
        FROM   all_info
        GROUP BY id_a
        HAVING COUNT(*) = 1
       ) ai2 ON sd.id_a = ai.id_a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:10:42.873

你可以运行它来修复你的数据：

```
UPDATE some_data sd

       JOIN 
       (SELECT id_a, MIN(id_b) id_b
        FROM   all_info
        GROUP BY id_a
        HAVING COUNT(*) = 1
       ) ai ON sd.id_a = ai.id_a AND sd.id_b <> ai.id_b

SET    ad.id_b = ai.id_b 
```

# jasper-reports - 在使用 SOAP 调用存储计划报告时添加时区

> ID：13462879
> 
> 赞同：2
> 
> 时间：2012-11-19T21:49:47.737
> 
> 标签：jasper-reports, ireport, jasperserver

我在设置/存储报告作业的时区时遇到问题。

我想用*iReport*设计器实现我可以做的事情（*工具*->*选项*->*编译和执行*-> 设置报告时区），然后正确显示所有日期和时间。

我知道作业触发器有一个 xml 时区属性，但这仅影响（当然）计划日期。

目前，*JasperReports Server*仅使用两种 cookie：时区和区域设置。

这是您可能必须设置的东西吗？但是怎么做？

# c++ - 将许多图像保存到矢量，但它们不显示

> ID：13462881
> 
> 赞同：1
> 
> 时间：2012-11-19T21:49:57.660
> 
> 标签：c++, image-processing, opencv

我使用`FindFirstFile`并`FindNextFile`从`<windows.h>`库中将文件夹的所有图像加载到矢量中。这将所有图像保存到向量中`images`，但是当我想对向量执行任何操作（例如只是想显示它们）时，它会产生意外操作并迫使我中断代码的运行。

这是我的代码：

```
int _tmain(int argc, _TCHAR* argv[])
{

WIN32_FIND_DATA FindFileData;
HANDLE hFind;

vector<Mat> images;

hFind = FindFirstFile("C:\\test\\*", &FindFileData);
if (hFind != INVALID_HANDLE_VALUE)
{

    do {

        images.push_back(imread(FindFileData.cFileName , 0)); 

        } while( FindNextFile(hFind,&FindFileData));
}

//int vectorsize = (sizeof(images)/sizeof(Mat));

namedWindow("meh" , CV_WINDOW_AUTOSIZE);
    imshow("meh" , images[3]);
    waitKey(0);

/*for(int x = 1; x < 8; x++)
{
    namedWindow("meh" , CV_WINDOW_AUTOSIZE);
    imshow("meh" , images[x]);
    waitKey(0);
}*/

/*vector<Mat>::iterator it;

for (it = images.begin(); it != images.end() ; it++) {
    imshow("myWin", (*it));
    waitKey(0);
}*/

FindClose(hFind);
return 0;
} 
```

可以看出，我尝试使用迭代器处理向量，但它在`imshow`.

然后我曾经`sizeof`在向量中查找总元素但失败了（作为向量大小参数返回`0`）

然后我从向量中选择了一个随机图像并尝试显示它，但在`imshow`.

`EDIT:`我不想测试文件夹包含 8 个图像，但循环运行 10 次。这是因为目录中的第一个和第二个文件是`.`和`..`（这在打印名称时显示`cout`）这可能是导致中断的原因吗？如果是这样，我该如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:02:23.197

我认为您应该`!m.empty()`检查一下您推回的图像是否正确加载。

对于 EDIT 部分：您可以在“C:\test\*.jpg”上找到文件。那将跳过“。” 和“..”（和其他非图像的东西）也是。

（我认为多个扩展名还有一个 Microsoft 语法“C:\test\*.jpg;C:\test\*.png”，但我不确定。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T00:30:23.853

好吧，我整理好了。问题在于`FindFileData.cFileName`它只返回文件名而不是文件的完整路径，这`imread`需要。

我通过使用`strcat`文件夹的路径并将其与找到的文件名连接起来解决了这个问题。

`images.push_back(imread((strcat(loc,FindFileData.cFileName)) , 0));`

当然，每次都需要清除字符串 loc，因为它不适用于下一个循环。

# php - 错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。WampServer

> ID：13462885
> 
> 赞同：5
> 
> 时间：2012-11-19T21:50:10.013
> 
> 标签：php, wampserver

这个问题非常奇怪和随机。

我正在处理一个包含 4096 个字符的文件，但只有在该文件中有 4096 个字符时出现此错误。我可以忍受这个，因为如果我只是输入一个空格或更改文件的行尾，一切都会正常工作，但我想知道为什么会发生这种情况，为什么我只有 4096 个字符并且只在那个页面中出现这个错误?

更改 MTU 对我不起作用：http: [//maxqubit.wordpress.com/2012/07/04/error-101-neterr_connection_reset-the-connection-was-reset/](http://maxqubit.wordpress.com/2012/07/04/error-101-neterr_connection_reset-the-connection-was-reset/)

额外信息：

*   Apache/2.2.21 (Win7 64) PHP/5.3.10

*   该文件包含在另一个文件中，并且该文件包含在另一个文件中，依此类推。

*   脚本（.js）有几个包含。

*   该页面类似于 localhost/mypage/some.php?var=hello&varr=wazaaa

*   文件结尾是 ANSI 中的“Dos/Windows”。

*   它不适用于任何资源管理器。

*   它不适用于网络中的任何电脑。

*   防火墙被禁用。

抱歉，没有更准确的额外信息，我不知道是什么问题 xD 和......对不起我的英语>__<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:38:21.840

听起来像这个 PHP 错误：[60758](https://bugs.php.net/bug.php?id=60758)

PHP 5.3.11 看起来包含了对这个错误的修复。

# java - 无法在 ubuntu 系统上安装 rJava

> ID：13462890
> 
> 赞同：32
> 
> 时间：2012-11-19T21:50:33.337
> 
> 标签：java, r, ubuntu, rjava

我看过一些与此相关的帖子......但我看到的所有建议的解决方案似乎都不起作用......我在 EC2 实例中运行 R 并运行以下命令来尝试安装 rJava 但无济于事...任何帮助将不胜感激。

```
 > install.packages("rJava")
 Installing package(s) into ‘/home/ubuntu/R/library’
 (as ‘lib’ is unspecified)
 trying URL 'http://cran.stat.nus.edu.sg/src/contrib/rJava_0.9-3.tar.gz'
 Content type 'application/x-gzip' length 537153 bytes (524 Kb)
 opened URL
 ==================================================
 downloaded 524 Kb

* installing *source* package ‘rJava’ ...
** package ‘rJava’ successfully unpacked and MD5 sums checked
checking for gcc... gcc -std=gnu99
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -std=gnu99 accepts -g... yes
checking for gcc -std=gnu99 option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -std=gnu99 -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for string.h... (cached) yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking for unistd.h... (cached) yes
checking for an ANSI C-conforming const... yes
checking whether time.h and sys/time.h may both be included... yes
configure: checking whether gcc -std=gnu99 supports static inline...
yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking whether sigsetjmp is declared... yes
checking whether siglongjmp is declared... yes
checking Java support in R... present:
interpreter : '/usr/bin/java'
archiver    : ''
compiler    : ''
header prep.: ''
cpp flags   : ''
java libs   : '-L/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server -L/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64 -L/usr/lib/jvm/java-6-openjdk-amd64/jre/../lib/amd64 -L/usr/java/packages/lib/amd64 -L/usr/lib/x86_64-linux-gnu/jni -L/lib/x86_64-linux-gnu -L/usr/lib/x86_64-linux-gnu -L/usr/lib/jni -L/lib -L/usr/lib -ljvm'
configure: error: Java Development Kit (JDK) is missing or not registered in R
Make sure R is configured with full Java support (including JDK). Run
R CMD javareconf
as root to add Java support to R.

If you don't have root privileges, run
R CMD javareconf -e
to set all Java-related variables and then install rJava.

ERROR: configuration failed for package ‘rJava’
* removing ‘/home/ubuntu/R/library/rJava’
Warning in install.packages :
  installation of package ‘rJava’ had non-zero exit status

The downloaded source packages are in
    ‘/tmp/RtmpaEiskU/downloaded_packages’
> system("sudo R CMD javareconf")
Java interpreter : /usr/bin/java
Java version     : 1.6.0_24
Java home path   : /usr/lib/jvm/java-6-openjdk-amd64/jre
Java compiler    : not present
Java headers gen.: 
Java archive tool: 
Java library path: $(JAVA_HOME)/lib/amd64/server:$(JAVA_HOME)/lib/amd64:$(JAVA_HOME)/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib
JNI linker flags : -L$(JAVA_HOME)/lib/amd64/server -L$(JAVA_HOME)/lib/amd64 -L$(JAVA_HOME)/../lib/amd64 -L/usr/java/packages/lib/amd64 -L/usr/lib/x86_64-linux-gnu/jni -L/lib/x86_64-linux-gnu -L/usr/lib/x86_64-linux-gnu -L/usr/lib/jni -L/lib -L/usr/lib -ljvm
JNI cpp flags    : 

Updating Java configuration in /etc/R
Done.

> install.packages("rJava")
[same as before, just skipping to the error parts...]
 java libs   : '-L/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server -L/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64 -L/usr/lib/jvm/java-6-openjdk-amd64/jre/../lib/amd64 -L/usr/java/packages/lib/amd64 -L/usr/lib/x86_64-linux-gnu/jni -L/lib/x86_64-linux-gnu -L/usr/lib/x86_64-linux-gnu -L/usr/lib/jni -L/lib -L/usr/lib -ljvm'
configure: error: Java Development Kit (JDK) is missing or not registered in R
Make sure R is configured with full Java support (including JDK). Run
R CMD javareconf
as root to add Java support to R.

If you don't have root privileges, run
R CMD javareconf -e
to set all Java-related variables and then install rJava.

ERROR: configuration failed for package ‘rJava’
* removing ‘/home/ubuntu/R/library/rJava’
Warning in install.packages :
  installation of package ‘rJava’ had non-zero exit status

The downloaded source packages are in
    ‘/tmp/RtmpaEiskU/downloaded_packages’
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C            LC_COLLATE=C        
 [5] LC_MONETARY=C        LC_MESSAGES=C        LC_PAPER=C           LC_NAME=C           
 [9] LC_ADDRESS=C         LC_TELEPHONE=C       LC_MEASUREMENT=C     LC_IDENTIFICATION=C 

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-19T22:14:53.803

在 Ubuntu 上获取 rJava 的最简单方法是从存储库安装它，而不是尝试直接从 CRAN 安装它。从命令行这应该可以解决问题

```
sudo apt-get install r-cran-rjava 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-03T10:18:15.223

我目前面临同样的问题，但解决方案似乎不再有效。跑步

```
sudo apt-get install r-cran-rjava 
```

给我

```
The following packages have unmet dependencies:
 r-cran-rjava : Depends: r-api-3.4 
```

我使用的是 Linux Mint Tessa 19.1 并且我使用的是 R 版本 3.6.1 (2019-07-05)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-27T14:19:31.983

我有

```
The following packages have unmet dependencies:
 r-cran-rjava : Depends: r-api-3.4 
```

我解决了

```
sudo apt-get update
sudo apt-get install default-jre
sudo apt-get install default-jdk 
```

和

```
sudo apt-get install r-cran-rjava 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T13:56:59.873

这对我有用（Linux Mint “Ulyana”）

在终端：

```
sudo -i
R CMD javareconf 
```

然后在 RStudio 中：

```
install.packages("rJava", dependencies = TRUE) 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-08-22T12:25:11.100

```
sudo apt-get install r-cran-rjava 
```

没有在 R Studio 中工作，所以我不得不使用终端，但后来对我来说工作得很好。

# html - XSL 抓取文件列表并从特定元素编译定义列表

> ID：13462898
> 
> 赞同：0
> 
> 时间：2012-11-19T21:51:05.250
> 
> 标签：html, xslt, xpath, dita

我有一组文件，其中包含要编译成单个列表的定义。文件列表存储在一个 XML 文件中，如下所示（这是输入文件）：

```
 <report>
 <incident>
 <file>Balance_fields_selected.htm</file>
 </incident>
 <incident>
 <file>Cd_fields.htm</file>
 </incident>
 </report> 
```

一个元素指定的每个文件都`<file>`包含一系列`<p class='Term'>`我需要编译成单个列表的元素。其中每一个后面都是需要分组的任意数量的其他元素（我正在尝试使用键）：

```
 <html><body>
 <p class="Term">
<a name="Accrued_Bonus_Interest" id="Accrued_Bonus_Interest"></a>Accrued (Bonus Interest)</p>
<p>Bonus Interest Accrued Cycle-to-Date. &#160;Amount of bonus interest that has accrued on the time deposit.</p>
<p>Pages: &#160;View CD Detail.</p>
<p class="Term">
<a name="Accrued_OID" id="Accrued_OID"></a>Accrued (Original Issue Discount)</p>
<p>Original Issue Discount Interest Accrued Year-to-Date. &#160;OID interest accrued in the current year.</p>
<p>Pages: &#160;View CD Detail.</p> 
 </body></html> 
```

期望的结果类似于：

```
 <topic>
 <title>Arbitrary title</title>
 <body>
 <dl>
 <dlentry id="Accrued_Bonus_Interest">
 <dt>Accrued (Bonus Interest)</dt>
 <dd><p>Bonus Interest Accrued Cycle-to-Date. &#160;Amount of bonus interest that has accrued on the time deposit.</p>
 <p>Pages: View CD Detail</p></dd></dlentry>
 <dlentry id="Accrued_OID">
 <dt>Accrued (Original Issue Amount)</dt>
 <dd><p>Original Issue Discount Interest Accrued Year-to-Date. &#160;OID interest accrued in the current year.</p>
 <p>Pages: View CD Detail</p></dd>
 </dl>
 </body>
 </topic> 
```

我有一个样式表已经完成了大部分工作——当谈到正确使用键时，我似乎只是（再次）迷失了方向。以下样式表：

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:strip-space elements="*" />

<xsl:key name="kFollowing" match="*[not(p[@class='Term'])]" 
    use="generate-id(preceding::p[@class='Term'][1])"/>

<xsl:template match="/">
    <![CDATA[ 
    <!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">  ]]>
    <topic id="data_dictionary">
        <title>IBS Insight Data Dictionary</title>
        <body>
    <dl>
        <xsl:for-each select="/report/incident/file">
            <xsl:for-each select="document(.)/descendant::p[@class='Term']">
                <xsl:variable name="vFollowing" select="key('kFollowing', generate-id())"/> 
                <xsl:element name="dlentry">
                    <xsl:attribute name="id">
                        <xsl:value-of select="child::a/@id"/>
                    </xsl:attribute>
                    <dt><xsl:value-of select="."/></dt>
                    <dd><xsl:value-of select="$vFollowing"/>
                        <xsl:for-each select="following::*[$vFollowing]">
                            <xsl:apply-templates select="."/>
                        </xsl:for-each>
                    </dd>
                </xsl:element>
            </xsl:for-each>
      </xsl:for-each>                
    </dl></body></topic>
</xsl:template>

</xsl:stylesheet> 
```

正确抓取输入文件中定义的文件，并生成`dl`具有正确`dlentry`id 和`dt`元素的文件。问题是我对键的混淆实现是组装`dd`元素的方式。我的示例 xml 在这里并不明显，但正在发生的事情是每个`<p class='Term'>`都在抓取所有后续的 contnet 来填充它`<dd>`，如下所示：

```
 <topic>
 <title>Arbitrary title</title>
 <body>
 <dl>
 <dlentry id="Accrued_Bonus_Interest">
 <dt>Accrued (Bonus Interest)</dt>
 <dd>Bonus Interest Accrued Cycle-to-Date. &#160;Amount of bonus interest that has accrued on the time deposit. Pages: View CD DetailAccrued (Original Issue Amount)Original Issue Discount Interest Accrued Year-to-Date. &#160;OID interest accrued in the current year.Pages: View CD Detail</dd></dlentry>
 <dlentry id="Accrued_OID">
 <dt>Accrued (Original Issue Amount)</dt>
 <dd><p>Original Issue Discount Interest Accrued Year-to-Date. &#160;OID interest accrued in the current year.</p>
 <p>Pages: View CD Detail</p></dd>
 </dl>
 </body>
 </topic> 
```

每个文件中的最后一项都正确呈现，但这只是因为没有更多的后续节点要处理。关于我的代码的某些内容是与键匹配的节点太多。

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:42:06.557

我会稍微更改键定义：

```
<xsl:key name="kFollowing"
    match="*[not(self::p[@class='Term'])][preceding-sibling::p[@class='Term']" 
    use="generate-id(preceding-sibling::p[@class='Term'][1])"/> 
```

这匹配任何本身不是 a`<p class="Term">`但在树中与这样的元素处于同一级别的元素，并按它们最近的前面“术语”对它们进行分组。如果您想允许紧随其后的内容`<p class="Term">`只是文本节点（即不在任何元素内）的情况，那么您需要

```
<xsl:key name="kFollowing"
    match="node()[not(self::p[@class='Term'])][preceding-sibling::p[@class='Term']" 
    use="generate-id(preceding-sibling::p[@class='Term'][1])"/> 
```

然后您可以将内部 for-each 简化为

```
 <xsl:for-each select="document(.)/descendant::p[@class='Term']">
            <dlentry id="{a/@id}">
                <dt><xsl:value-of select="."/></dt>
                <dd><xsl:copy-of select="key('kFollowing', generate-id())"/></dd>
            </dlentry>
        </xsl:for-each> 
```

# debugging - 调试器关于 Step Over + Breakpoints 的行为

> ID：13462904
> 
> 赞同：0
> 
> 时间：2012-11-19T21:51:21.680
> 
> 标签：debugging

（我正在编写调试器。但我的疑问也是从调试器用户的角度来看的）

许多语言（GDB、Eclipse）的许多调试器都实现了一个 STEP_OVER 命令，该命令允许一次执行一条语句；与 STEP_INTO 的不同之处在于它不执行堆栈（即调用函数）中的降级，这通常是一件好事。

```
 10  : y = f1(x);
 11  : z = y + 1; 
```

现在，假设我越过了上面的第 10 行，但是在函数内部遇到了一个断点`f1`（可能在调用堆栈深处有好几层）。目前尚不清楚当我恢复时会发生什么：调试器是否应该在第 11 行暂停（有效地“完成单步执行”命令）？还是应该忘记它？我相信大多数（全部？）调试器都是后者。这是标准/预期的行为吗？我自己发现这有点令人沮丧。有没有办法（在某些调试器中）从内部断点恢复执行到外部跨步语句？或者有什么方法可以跳过忽略断点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:05:58.680

WinDbg 是后者，我相信这是标准行为。如果您担心在单步执行命令期间出现不同的断点，您始终可以在第 11 行手动设置断点并继续运行，直到第 11 行被命中。或者，您可以暂时禁用其他断点，但请注意调试器仍可能因其他原因（例如引发异常）而中断，具体取决于其配置。

# android - 移动用相机拍摄的图像留下断开的链接 Unitl SD 卡重新安装

> ID：13462906
> 
> 赞同：0
> 
> 时间：2012-11-19T21:51:21.730
> 
> 标签：android, android-sdcard, android-camera-intent

我有一个应用程序，我可以在其中使用设备的相机拍照。我想做的是在不分配 EXTRA_OUTPUT 的情况下启动 ACTION_IMAGE_CAPTURE 意图，然后使用 file.renameTo 将在默认位置创建的文件移动到我自己的自定义位置。我的代码是这样的：

```
/* Start camera activity without EXTRA_OUTPUT */
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, _REQUESTCODE_ATTACH_CAMERA);

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        switch(requestCode) {
            case _REQUESTCODE_ATTACH_CAMERA:
                /* Get path to most recently added image */
                final String[] imageColumns = { MediaStore.Images.Media._ID, MediaStore.Images.Media.DATA };
                final String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
                Cursor imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns, null, null, imageOrderBy);
                String fullPath = "";
                if(imageCursor.moveToFirst()){
                    fullPath = imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media.DATA));
                    imageCursor.close();
                }

                File f = Environment.getExternalStorageDirectory();
                f = new File(f.getAbsolutePath() + File.separator + "DCIM" + File.separator + MY_APP_NAME;
                if(!f.exists()) {
                    f.mkdirs();
                }

                /* Create new file based on name of most recently created image */
                File oldFile = new File(fullPath);
                String newPath = f.getAbsolutePath() + File.separator + oldFile.getName() ;

                /* Move file with renameTo */
                oldFile.renameTo(new File(newPath));

                break;
            ...
        }
    }
} 
```

所有这些工作都很好，但是发生了一件奇怪的事情。在我的应用程序中，我有另一个按钮，允许从手机的图库中选择现有图像。该代码如下所示：

```
Intent galleryIntent = new Intent(Intent.ACTION_GET_CONTENT);
galleryIntent.setType("image/*");
activity.startActivityForResult(galleryIntent, _REQUESTCODE_ATTACH_GALLERY); 
```

这也有效，但如果我使用上面发布的代码用相机拍照，然后尝试从图库中选择另一张图片，图库中将出现空白的“断开链接”类型的项目，其中不包含任何内容且无法选择. 这些似乎与使用 renameTo 拍摄和移动的照片相对应；如果我在 onActivityResult 中输入代码以将文件名发布到 LogCat，则记录的名称与它对应的先前移动文件的名称相同。尝试创建 File 对象或以任何方式访问该文件名，会导致 null 对象并强制关闭。

奇怪的是，Eclipse DDMS 中没有这些“断开的链接”文件的证据，如果我使用根浏览器，手机本身也没有证据，如果我重新安装 SD 卡，它们就会消失。

我在用相机拍摄图像后移动图像的全部原因是为了避免用不必要的图像填满手机的图库存储空间。虽然这些空的“断开链接”类型的文件似乎没有占用任何存储空间，但对于试图浏览其图库的最终用户来说，它们仍然非常烦人。有没有人对这里发生的事情或如何解决这个问题有任何想法？

**编辑：** 这是一张显示画廊外观的照片，其中显示了“断开的链接”类型的图像。使用我的应用程序拍摄的每张照片都会出现其中一张，如果我重新安装 SD 卡，它们都会消失。 ![屏幕截图显示](../Images/66b93ad9c914df959193fe5d9c6e9662.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:58:41.407

部分感谢[这个 SO 线程](https://stackoverflow.com/questions/10925196/deleting-files-via-a-contentresolver-as-opposed-to-deleting-them-via-file-del)，我发现了一个解决方案。实际上，它会以这种方式运行是有道理的，因为为媒体内容保留了一个表格，因此在不告诉表格的情况下删除某些内容肯定会创建“断开链接”类型的场景。

最终的解决方案是使用 contentResolver.delete 在内容解析器中删除对文件的引用，但我发现有两种不同的方法可以工作。

```
/* Moving with renameTo */
//Use the same exact code as I had before (shortened for brevity) to move the file
oldFile.renameTo(newFile);
//Get URI from contentResolver using file Id from cursor
Uri oldUri = ContentUris.withAppendedId(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media._ID)));
//Delete old file
getContentResolver().delete(oldUri, null, null); 
```

以这种方式获取 URI 是必要的，因为它需要对 contentResolver 中的图像的引用，而不是其在存储中位置的路径。这种方式可能会让某些人觉得很脏，因为您正在移动一个文件，然后对该文件调用一个删除函数，以便欺骗内容解析器删除指向该文件的链接。如果您愿意，您可以不使用 renameTo 来执行此操作，这样对 delete(...) 的调用实际上会删除图像。

```
/* Moving with streams */
//Get streams
InputStream in = new FileInputStream(oldFile);
OutputStream out = new FileOutputStream(newFile);
byte[] buffer = new byte[1024];
int bytesRead = 0;
//Read old file into new file
while((bytesRead = in.read(buffer)) > 0) {
    out.write(buffer, 0, bytesRead);
}

//Get URI from contentResolver using file Id from cursor
Uri oldUri = ContentUris.withAppendedId(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media._ID)));
//Delete old file
getContentResolver().delete(oldUri, null, null); 
```

无论哪种方式，对 contentResolver.delete 的调用都是相同的，我只是想指出，如果图像已经被删除，它仍然可以工作。

在此期间，我发现了一个我什至没有意识到我有的问题的解决方案，我也会在这里发布，以防将来有同样问题的人遇到这个问题。为了使图像在新位置的设备库中保持可选状态，您需要让媒体扫描仪知道已经进行了更改。我发现有两种方法可以做到这一点：

```
/* This is the only way that I know of to handle multiple new files at once. I 
   really would use this sparingly, however, since it will rescan the entire 
   SD Card. Not only could this take a long time if the user has a lot of files 
   on their card, it will also show a notification so it is not exactly a 
   transparent operation. */
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory())));

/* You *could* do multiple files with this by passing in the path for each one 
   in the array of Strings, however an instance of this will get called for each 
   one rather than it doing them all at once. Likewise, your onScanCompleted 
   (if you choose to include one) will get called once for each file in the list. 
   So really, while this is much better for a small number of files, if you plan 
   on scanning a very large amount then the full rescan above would probably be 
   a better option. */
MediaScannerConnection.scanFile(context, new String[]{ newFilePathAsString }, null, 
    new MediaScannerConnection.OnScanCompletedListener() { 
        public void onScanCompleted(String path, Uri uri) {
            //This executes when scanning is completed
        }
    }
); 
```

# php - 带参数的下一个/上一个分页查询 php mysql 带参数

> ID：13462907
> 
> 赞同：0
> 
> 时间：2012-11-19T21:51:22.707
> 
> 标签：php, mysql

我有以下问题：这是我的表的结构![在此处输入图像描述](../Images/dd8d0fc6678dab496842d1f9cb1671f0.png)

![在此处输入图像描述](../Images/ba876538865db1352a832257aa9f4b64.png)

这是我的代码：

```
 $SQL_NEXT_PROJECT_ID ="SELECT id  FROM projects WHERE id < '".$id_project."' and project_types_id='".$project_type_id."' ORDER BY id DESC LIMIT 1";
            $conn->query($SQL_NEXT_PROJECT_ID);
            foreach ($conn->query($SQL_NEXT_PROJECT_ID) as $rowProjectNext) {
                $next_project_id = $rowProjectNext['id'];
            }

            $SQL_PREVIOUS_PROJECT_ID ="SELECT id  FROM projects WHERE id > '".$id_project."' and project_types_id='".$project_type_id."' ORDER BY id ASC LIMIT 1";
            $conn->query($SQL_PREVIOUS_PROJECT_ID);
            foreach ($conn->query($SQL_PREVIOUS_PROJECT_ID) as $rowProjectPrevious) {
                $previous_project_id = $rowProjectPrevious['id'];
            } 
```

问题是我需要使用“图像”表中的附加条件进行查询，我必须评估主字段 = '1'，我一直在尝试使用内部连接但它似乎不起作用，在这里我附上我一直在尝试的查询

```
$SQL_NEXT_PROJECT_ID ="SELECT projects.id  FROM projects INNER JOIN images WHERE projects.id > '".$id_project."' and project_types_id='1' and main='1' ORDER BY projects.id DESC LIMIT 1"; 
```

基本上我需要做的是根据项目的当前 id ($id_project) 创建下一个/上一个指向特定类型项目 (project_types_id) 的链接，同时考虑到项目应该有一个具有主字段的图像这一事实等于“1”

希望我能很好地解释自己...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:10:56.040

好吧，你什么都没有加入……你需要一个`ON`条款。

```
SELECT pr.id  FROM projects pr 
INNER JOIN images img ON (pr.id = img.projects_id AND img.main = 1)
WHERE pr.id > ? 
AND pr.project_types_id = 1 
ORDER BY pr.id DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:45:00.880

最后我这样做了

```
$_nextPrevious = array();

            $SQL_SEARCH_VALUES="SELECT images.projects_id AS projectId FROM projects INNER JOIN images ON ( projects.id = images.projects_id ) AND project_types_id =  '".$project_type_id."' AND images.main =  '1' LIMIT 0 , 30";
            $conn->query($SQL_SEARCH_VALUES);
            foreach($conn->query($SQL_SEARCH_VALUES) as $rowNextPrevious) {
                $value = $rowNextPrevious['projectId'];                    
                array_push($_nextPrevious, $value);
            }

            $currentValue = array_search($id_project, $_nextPrevious);

            $next = $currentValue + 1;

            $previous = $currentValue - 1;

            $next_project_id = $_nextPrevious[$next];

            $previous_project_id = $_nextPrevious[$previous];

            return array($project_name,$project_description,$project_path, $_images, $next_project_id, $previous_project_id); 
```

使用数组而不是两次搜索...

# php - 损坏的文件下载 PHP

> ID：13462910
> 
> 赞同：-4
> 
> 时间：2012-11-19T21:51:37.917
> 
> 标签：php

> **可能重复：**
> [下载的php总是损坏](https://stackoverflow.com/questions/13461417/download-php-is-always-damaged)

在我的代码中，我可以下载一个文件，但它主要会导致文件损坏等。我真的被卡住了，有人知道如何改进我的代码。我的图像/文档存储在“课程”文件夹中

他们下载并且有一个“png”图像可以完美下载，但是上传类似的PNG文件会导致文件损坏。

```
 $cool = $_GET['id'];

   $sql = "SELECT id, type, name, size FROM upload WHERE id='$cool'";

 $result = mysql_query($sql, $db);
 $data = mysql_result($result, 0, "id");
 $name = mysql_result($result, 0, "name");
  $size = mysql_result($result, 0, "size");
  $type = mysql_result($result, 0, "type");

 header("Content-type: $type");
 header("Content-length: $size");
  header("Content-Disposition: attachment; filename=$name");
  header("Content-Description: PHP Generated Data");
 header('Content-Transfer-Encoding: binary');
  header('Expires: 0');
  header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
 header('Pragma: public');
ob_clean();
flush();
readfile($name);
exit(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T21:55:07.940

1.  阅读 SQL 注入和/或迁移到 PDO 或 MySQLi。由于这个原因，标准的 MySQL 函数已被弃用。

2.  此错误可能来自大量可能的问题。您正在从数据库中提取文件名和大小 - 它们真的匹配吗？您确定该文件甚至存在吗？（您没有检查 - 因此，它的输出可能只是一条错误消息，告诉您文件不存在）如果您使用记事本打开损坏的下载，您会得到什么？您可能会在其中发现 PHP 错误。

在原始问题被编辑之前，我不会更精确。

# apache - 从 domain1 重定向到 domain2 并保留在地址栏中 domain1

> ID：13462912
> 
> 赞同：0
> 
> 时间：2012-11-19T21:51:50.277
> 
> 标签：apache, redirect

无论如何要重定向`domain1`到`domain2`并保留在地址栏中`domain1`？如果这是可能的，请给我一些提示。

从我的测试来看，这对`.htaccess`我没有帮助，也许有一种方法可以从 Apache VirtualHost 做到这一点，但直到现在我才知道怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:53:51.317

如果您在注册商工具栏中使用域转发，则可以完成此操作。

例如：如果您有 site1.com，并且您使用域转发重定向并选择不显示新站点地址的选项（至少有一个用于 godaddy），那么当它重定向到 site2.com 时，它仍然会显示 site1.com在地址栏中。

但是需要考虑的是，如果您转到新页面 (site2.com/newpage.php)，它仍会在地址栏中显示 site1.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:54:09.163

不是 HTTP 重定向，因为它只是要求浏览器获取新的 URL。不过，您可以从 domain1 加载 domain2 的内容。

# sql - sql select语句查找某个时间段内的重复预订

> ID：13462916
> 
> 赞同：2
> 
> 时间：2012-11-19T21:52:20.590
> 
> 标签：sql, stored-procedures

我必须对表中的这些列进行一些分析： `Id, UserName, DateFrom, DateTo`. 我必须找出用户在同一时间段内有多个条目。我想知道是否有一种方法可以在单个 Select 语句中执行此操作？.....否则我想不出比存储过程更好的方法...有人可以帮助我提供一些想法和提示。

```
Id----------UserId-------------DateFrom------------DateTo
1-----------Tim123-------------------- 11/19/2012 08:00---11/19/2012 11:00
2-----------Tim123-------------------- 11/19/2012 10:00---11/19/2012 11:00
3-----------Tim123-------------------- 11/19/2012 12:00---11/19/2012 17:00
1-----------John123--------------------11/19/2012 08:00---11/19/2012 11:00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T22:16:22.170

```
sqlite> insert into user_data values(1, "john", "12-nov-12", "25-nov-12");
sqlite> insert into user_data values(2, "john", "24-nov-12", "25-dec-12");
sqlite> insert into user_data values(3, "jack", "12-nov-12", "25-nov-12");
sqlite> insert into user_data values(4, "jack", "26-nov-12", "30-nov-12");

sqlite> select distinct ud1.userid 
        from user_data ud1, user_data ud2
        where ud1.userid = ud2.userid 
              and ud1.datefrom <= ud2.dateto and ud2.datefrom <= ud1.dateto
              and ud1.id < ud2.id;
john 
```

这个想法是

*   如果周期 A 在周期 B 结束之前开始
*   期间 A 在期间 B 开始后结束

然后有重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:57:59.613

```
select * 
from mytable t1
join mytable t2 
    on t1.UserName = t2.username
    and t1.DateFrom <= t2.DateTo -- this is how to check for any overlap
    and t1.DateTo >= t2.DateFrom -- this is how to check for any overlap
    and t1.id < t2.id -- don't join to self, which would otherwise match 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T21:58:11.407

您可以使用嵌套查询和 COUNT 来跟踪出现次数

```
 SELECT t1.id, t1.UserName, t1.DateFrom, t1.DateTo
 FROM your_table_name t1
 WHERE (SELECT COUNT(*) 
 FROM your_table_name t2 
 WHERE t1.DateFrom=t2.DateFrom 
 AND t1.DateTo = t2.DateTo)>1 
```

# javascript - SimpleModal：窗口调整大小导致滚动条和重绘模式内容

> ID：13462924
> 
> 赞同：1
> 
> 时间：2012-11-19T21:52:50.133
> 
> 标签：javascript, callback, resize, simplemodal

我有一个模态，在它第一次加载时看起来像我想要的那样。要在我使用的 onShow 回调中设置大小和位置：

```
$j('.discount-msg').click(function () {
    event.preventDefault();

    modalWindow = $j('#crosssell-modal').modal({
        containerId: "cross-sell-container",
        autoResize: true,
        //maxWidth: 698,
        onShow: function (dialog) {
            dialog.container.css({"height":"auto","width":"auto"})
            this.setPosition();

            $j("#closeCrossSellModal", dialog.data).click(function () {
                $j.modal.close();
            });
        }
    });
}); 
```

当用户通过模式调整内容宽度的大小来调整浏览器窗口的大小时，它会换行并创建一个滚动条。

是否有 onResize 回调或从模式函数外部触发事件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:09:28.063

我想我已经想通了。

在 CSS 中，如果我放了一个`width: auto`, 并且`height: auto !important`这会像我期望的那样工作。我真的不喜欢使用`!important`，但我猜这就是它的用途。

# javascript - 如何使用客户端 JavaScript 测试员工是否通过 VPN 连接

> ID：13462925
> 
> 赞同：1
> 
> 时间：2012-11-19T21:52:53.113
> 
> 标签：javascript, cross-domain, jsonp, mockjax

有些员工将访问外部站点以查看指向内部托管站点的链接。我们只希望链接显示他们是否已将 VPN 接入网络。

如何使用 JavaScript 测试外部不在线的东西的可用性。

我曾尝试使用 .JS 文件，但它可以被缓存并且在它真的不可用时似乎可用。与图像相同。

也许 JSONP 与 MockJax 以避免跨站点脚本错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:58:42.483

在 Intranet 站点上制作一个 JS 文件，该文件将嵌入链接或将它们从 更改`display: none`为`display: block`（或任何显示）。在页面本身上，只需创建对该脚本的引用并将当前日期时间附加到末尾以避免从服务器缓存。

测试用例（假设您设置了 localhost，但您可以将其更改为任何 Intranet 位置）： [转到此处](http://jsfiddle.net/emosaurusrex/spppR/)，不会显示文本。在下面设置一个名为 test.js 的文件，`localhost`其中包含内容

```
$(function(){
    $('#test').show();
}); 
```

刷新页面，它将显示 DIV 的内容。

# android - AdMob 的测试设备 ID 是什么类型的哈希？

> ID：13462928
> 
> 赞同：3
> 
> 时间：2012-11-19T21:53:22.807
> 
> 标签：android, hash, admob

AdMob 的测试设备 ID 哈希是什么？我有设备编号。但不是散列，我会散列这个数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T22:24:32.387

It uses an md5 hash, but it may also have a SALT.

The best way to get the hashed device ID is to check the logcat output when you make an Ad Request on a device. You'll get a message to the effect of:

```
To get test ads on this device, call adRequest.addTestDevice("0123456789ABCDEF"); 
```

That string is your hashed device ID that you can add to your app.

It is **NOT RECOMMENDED** to try to craft this hashed device ID yourself. If you get the device's ID and hash it to get test ads, but forget to remove that code when you release your app, all of your users will get test ads and you'll make no money. The current mechanism is intended to try and prevent you from making this mistake.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T07:10:42.333

使用 md5 获取哈希 id 这是一个过程

```
public static final String md5(final String s) {
    try {
        // Create MD5 Hash
        MessageDigest digest = java.security.MessageDigest
                .getInstance("MD5");
        digest.update(s.getBytes());
        byte messageDigest[] = digest.digest();

        // Create Hex String
        StringBuffer hexString = new StringBuffer();
        for (int i = 0; i < messageDigest.length; i++) {
            String h = Integer.toHexString(0xFF & messageDigest[i]);
            while (h.length() < 2)
                h = "0" + h;
            hexString.append(h);
        }
        return hexString.toString();

    } catch (NoSuchAlgorithmException e) {
        Logger.logStackTrace(TAG,e);
    }
    return "";
} 
```

获取哈希 id 的另一种方法是安装 [Admob 测试设备 id](https://play.google.com/store/apps/details?id=ngcaothu.tools.admobtestdevice)应用程序

# php - 在句号和逗号后自动添加空格，同时避免使用数字

> ID：13462929
> 
> 赞同：3
> 
> 时间：2012-11-19T21:53:25.670
> 
> 标签：php, regex, preg-replace

这是我在人们写以下内容时用来清理句子的当前正则表达式：

> 你好，我是安德烈斯，对吧？

它将自动转换为：

> 你好。我是安德烈斯，对吧？

当字符串中有数字时，问题就出现了。例子：

> 我有 40.381,32 美元。

...将转换为：

> 我有 40、381、32 美元。

我当前的代码：

```
echo preg_replace( '/[!?,.](?![!?,.\s])/', '$0 ', 'Hello my friend.There should be a space after sentence periods and commas, but that should not apply to 40.381,32 numbers.'); 
```

问题：如何避免在**,.** 字符在数字之间？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:55:07.000

使用正则表达式模式

```
(?<!\d)[.,!?](?!\d) 
```

或者

```
(?<!\d)[.,!?](?![.,!?\d]) 
```

# php - PHP - 从一行中提取两个值

> ID：13462931
> 
> 赞同：2
> 
> 时间：2012-11-19T21:53:27.300
> 
> 标签：php, regex, html-parsing, preg-match

我是正则表达式的初学者，并且正在我无法安装任何东西的服务器上工作（使用 DOM 方法是否需要安装任何东西？）。

我有一个问题，我目前的知识无法解决。我想从专辑 id 和图像 url 下面的行中提取。字符串（文件）中有更多的行和其他 url 元素，但我需要的专辑 id 和图像 url 都在类似于下面的字符串中：

```
<a href="http://www.mydomain.com/galeria/thumbnails.php?album=774" target="_blank"><img alt="/" src="http://img255.imageshack.us/img00/000/000001.png" height="133" width="113"></a> 
```

所以在这种情况下我想得到'774'和'http://img255.imageshack.us/img00/000/000001.png'

我见过多个仅从字符串中提取 url 或一个其他元素的示例，但我确实需要将它们保存在一起并将它们存储在数据库的一个记录中。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T22:12:42.743

由于您是新手，我将解释您可以使用 PHP 的 HTML 解析器[`DOMDocument`](http://php.net/domdocument)来提取您需要的内容。您不应该**使用**正则表达式，因为它们在解析 HTML 时天生就容易出错，并且很容易导致许多误报。

首先，假设您有 HTML：

```
$html = '<a href="http://www.mydomain.com/galeria/thumbnails.php?album=774" target="_blank"><img alt="/" src="http://img255.imageshack.us/img00/000/000001.png" height="133" width="113"></a>'; 
```

现在，我们将它加载到 DOMDocument 中：

```
$doc = new DOMDocument;
$doc->loadHTML( $html); 
```

现在，我们已经加载了 HTML，是时候找到我们需要的元素了。假设您可以`<a>`在文档中遇到其他标签，因此我们希望找到那些`<a>`具有直接`<img>`标签作为子标签的标签。然后，检查以确保我们有正确的节点，我们需要确保我们提取正确的信息。所以，让我们开始吧：

```
$results = array();

// Loop over all of the <a> tags in the document
foreach( $doc->getElementsByTagName( 'a') as $a) {
    // If there are no children, continue on
    if( !$a->hasChildNodes()) continue;

    // Find the child <img> tag, if it exists
    foreach( $a->childNodes as $child) {
         if( $child->nodeType == XML_ELEMENT_NODE && $child->tagName == 'img') { 
             // Now we have the <a> tag in $a and the <img> tag in $child
             // Get the information we need:
             parse_str( parse_url( $a->getAttribute('href'), PHP_URL_QUERY), $a_params);
             $results[] = array( $a_params['album'], $child->getAttribute('src'));              
         }
    }
} 
```

A`print_r( $results);`现在[给我们留下](http://3v4l.org/2e2m4#v512)：

```
Array
(
    [0] => Array
        (
            [0] => 774
            [1] => http://img255.imageshack.us/img00/000/000001.png
        )

) 
```

请注意，这省略了基本的错误检查。您可以添加的一件事是在内部`foreach`循环中，您可以检查以确保成功解析了's属性中的`album`参数，如下所示：`<a>``href`

```
if( isset( $a_params['album'])) {
    $results[] = array( $a_params['album'], $child->getAttribute('src'));        
} 
```

我在其中使用的每个函数都可以在[PHP 文档](http://php.net/manual)中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T22:02:30.287

如果您已经将其缩小到这一行，那么您可以使用如下的正则表达式：

```
$matches = array();
preg_match('@.+album=(\d+).+src="([^"]+)@', $yourHtmlLineHere, $matches); 
```

现在如果你

```
echo $matches[1];
echo " ";
echo $matches[2]; 
```

您将获得以下信息：

774 [http://img255.imageshack.us/img00/000/000001.png](http://img255.imageshack.us/img00/000/000001.png)

# maven - 从 pom.xml 调用 src/test 下的 java 类

> ID：13462934
> 
> 赞同：0
> 
> 时间：2012-11-19T21:53:33.660
> 
> 标签：maven, maven-3, maven-plugin, pom.xml

我知道我们可以使用 exec 插件从 maven 调用 java 类，并在 mainClass 标记中指定类。但是，这似乎仅在 java 类位于 src/main/java 下时才有效。不幸的是，我的 mainClass 在 src/test/java 下。有没有办法可以调用这个正在测试的类。PS。我确实尝试了“classpathScope”，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:57:38.110

根据定义，测试类仅在测试期间使用，绝不是最终包/JAR 的一部分。因此，您不能将它们用作`Main-Class`.

如果你真的想要，你可以在打包之前但在阶段之后复制（使用）编译的`antrun-plugin`类`Main`。`target/test-classes``target/classes``test-compile`

# bash - 为什么我不能将此 awk 语句的输出保存到变量中

> ID：13462936
> 
> 赞同：0
> 
> 时间：2012-11-19T21:53:36.543
> 
> 标签：bash, variables, awk

我目前正在尝试创建一个包含另一个变量的变量名

```
while [ "$countf" -le 9 ]; do
    vname=$( echo fcp"$countf" )
    $vname=$( awk -F, -vs="\$fc$countf" '{for (i=1;i<=NF;i++)if($i~"^"s"$"){print i;exit;}}{print "not found"}' <<< $first_line )
    countf=$(( countf + 1 ))
done 
```

虽然当我去执行包含代码的脚本时，会输出以下内容：

```
fcp1=not: command not found 
```

fcp1 是 vname 变量的内容。我已经尝试了几种不同的解决方案，但到目前为止还没有任何工作，如果有人能指出我做错了什么，虽然我真的很感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T21:55:29.293

你犯了一个错误，而不是

```
$vname=$(... ) 
```

你应该使用：

```
vname=$(... ) 
```

您不能`$`像这样在分配的左侧使用。

`declare`如果要进行*间接变量引用*，则可以使用一种解决方法：

```
$ x=var
$ declare $x=test
$ echo $var
test 
```

**笔记**

如本主题讨论中所述，请勿`eval`用于执行此操作。`eval`是*邪恶*的常见拼写错误。见[http://mywiki.wooledge.org/BashFAQ/048](http://mywiki.wooledge.org/BashFAQ/048)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:23:54.083

如果要从以下部分构建变量名，则需要使用 eval ：

```
$ cat tst.sh
countf=0
while (( $countf <= 2 ))
do
    vname="fcp${countf}"
    eval $vname="\$(date)"

    countf=$(( countf + 1 ))
    sleep 1
done

echo "$fcp0"
echo "$fcp1"
echo "$fcp2"

$ ./tst.sh
Mon Nov 19 21:22:05 CST 2012
Mon Nov 19 21:22:06 CST 2012
Mon Nov 19 21:22:08 CST 2012 
```

但你应该认真考虑一个数组：

```
$ cat tst.sh
countf=0
while (( $countf <= 2 ))
do
    fcpArr[$countf]="$(date)"

    countf=$(( countf + 1 ))
    sleep 1
done

echo "${fcpArr[0]}"
echo "${fcpArr[1]}"
echo "${fcpArr[2]}"

$ ./tst.sh
Mon Nov 19 21:22:48 CST 2012
Mon Nov 19 21:22:50 CST 2012
Mon Nov 19 21:22:51 CST 2012 
```

# c++ - 如何检查一个数组是否等于任何其他数组 C++？

> ID：13462938
> 
> 赞同：-1
> 
> 时间：2012-11-19T21:53:37.550
> 
> 标签：c++, linux, arrays, kubuntu

我正在尝试用 C++ 制作一个骰子程序。在那个程序中，我有一个名为“bool_if”的函数（不要问我为什么以我的方式命名一些东西，我为我制作了这个程序并且我不想更改变量/函数名称）。我希望 bool_if() 检查数组rolled_die[] 中的任何元素是否相同。抱歉，如果这没有意义，这里是源代码（我在部分源代码中评论了我想要的）：

```
#include <cstdlib> 
#include <ctime>
#include <iostream>
#include <unistd.h>
#include <fstream>

using namespace std;

void clear()
{
  cout<<"\033[2J\033[1;1H";
}

bool rolled_die[5];

void dice() {
  if (die[0] == die[1] || die[0] == die[2] || die[0] == die[3] || die[0] == die[4] || die[0] == die[5]) {
    rolled_die[0] = true
  }
  else if (die[1] == die[2] || die[1] == die[3] || die[1] == die[4] || die[1] == die[5]) {
    rolled_die[1] = true
  }
  else if (die[2] == die[3] || die[2] == die[4] || die[2] == die[5]) {
    rolled_die[2] = true
  }
  else if (die[3] == die[4] || die[3] == die[5]) {
    rolled_die[3] = true
  }
  else if (die[4] == die[5]) {
    rolled_die[4] = true
  }
}

int finished_score = 0

void bool_if {
  if (rolled_die[0] == true || rolled_die[1] == true || rolled_die[2] == true || rolled_die[3] == true || rolled_die[4] == true) {
    finished_score++;
  }
  /* In this part, I need to check if rolled_die[0] is equal to rolled_die[1], or rolled_die[2], etc all the way up to rolled_die[5]. */

int main()
{
  srand(time(0));

  int die[6] = { (rand()%6)+1,(rand()%6)+1, (rand()%6)+1, (rand()%6)+1, (rand()%6)+1, (rand()%6)+1 };
  int bet;

  ifstream a_file ("Score.txt");
  if ( !a_file.is_open() ) {
    clear();
    cout<<"Score file could not be loaded.  Maybe file doesn't exist?\n";
    return 0;
  }

  int score;
  a_file>> score;

  clear();
  cout<<"How much would you like to bet?\nRemember, you only have $"<< score <<"!\nEnter your bet: ";
  cin>> bet;

  if ( bet > score ) {
    clear();
    cout<<"You bet more money then you have!\n";
    return 0;
  }

  clear();
  cout<<"Rolling...\n";
  usleep(0.1 * 1000000);
  cout<<"First die: " << die[0] <<"\n";
  usleep(1.3 * 1000000);
  cout<<"Second die: " << die[1] <<"\n";
  usleep(0.3 * 1000000);
  cout<<"Third die: " << die[2] <<"\n";
  usleep(2 * 1000000);
  cout<<"Fourth die: " << die[3] <<"\n";
  usleep(0.3 *1000000);
  cout<<"Fifth die: " << die[4] <<"\n";
  usleep(1.2 * 1000000);
  cout<<"Sixth die: " << die[5] <<"\n";
  cout<<"\n\nPress enter to see how you fared.";
  cin.get();
  clear();

  return 0;
} 
```

另外请告诉函数 dice() 不起作用。我希望 dice() 检查任何对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:59:09.670

```
int die[6] = { (rand()%6)+1,(rand()%6)+1, (rand()%6)+1, (rand()%6)+1, (rand()%6)+1, (rand()%6)+1 }; 
```

**将其替换为：**

```
int die[6] = {1, 2, 3, 4, 5, 6};
std::random_shuffle(die, die+6); 
```

* * *

下面的代码对我来说运行得很好：http: [//ideone.com/F4Eefj](http://ideone.com/F4Eefj)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:59:15.073

您可以通过使用`for`循环大大简化此代码。例如，这会将数组的每个索引与该索引之后的每个索引进行比较（这似乎是您手动执行的操作）：

```
#include <iostream>

int main(int argc, char** argv) {
    int die[] = { 4, 5, 6, 4, 5, 3 };
    const size_t LENGTH = 6;

    for(size_t i = 0; i < LENGTH; ++i) {
       for(size_t j = i + 1; j < LENGTH; ++j) {
           if(die[i] == die[j]) {
               std::cout << "Found a pair at (" << i << ", " << j << ")" << std::endl;
           }
       }
    }

    return 0;
} 
```

您的`dice()`函数似乎可以做到这一点，但您没有在任何地方调用它。

# sql-server - 使用 TFS Deployer 和 SqlPackage 部署数据库

> ID：13462943
> 
> 赞同：1
> 
> 时间：2012-11-19T21:54:01.987
> 
> 标签：sql-server, powershell, deployment, tfs

我正在尝试制作用于`SqlPackage`通过[TFS Deployer](http://tfsdeployer.codeplex.com/)服务部署数据库的 PowerShell 脚本。如果脚本直接从命令行执行，则脚本正在工作，但当 TFS Deployer 尝试执行它时它会失败，这两种情况都使用相同的用户帐户。

该服务在测试模式 ( `TfsDeployer -d`) 下作为控制台应用程序运行，但在作为 Windows 服务运行时也会失败。

这是日志文件（`SqlPackage`PowerShell 脚本中捕获的输出和异常捕获）：

```
11/18/2012 17:51:49 | Publishing to database 'databaseName' on server 'machineName'.
11/18/2012 17:51:56 | An error occurred while the batch was being executed.
11/18/2012 17:51:56 | System.Management.Automation.RemoteException: *** Could not deploy package. 
```

这些是我能够收集到的唯一信息。捕获的异常中不存在错误代码 (HRESULT)。

PowerShell 脚本如下所示：

```
try{
    $cmd = Join-Path (Get-Item "Env:ProgramFiles(x86)").Value "Microsoft SQL Server\110\DAC\bin\SqlPackage.exe"
    $src = Join-Path $source "db.dacpac"
    $cfg = Join-Path $source "db.publish.xml"

    &$cmd /Action:Publish /SourceFile:$src /Profile:$cfg 2>&1 | ForEach-Object -Process {
        Write-Log $_
    }
}
catch [Exception] {
    Write-Log $_.Exception.ToString()
    if($_.Exception.HResult) {
        Write-Log "Code: $($_.Exception.HResult.ToString('X'))"
    }
} 
```

# c++ - 带有通配符的 ifstream

> ID：13462946
> 
> 赞同：3
> 
> 时间：2012-11-19T21:54:09.450
> 
> 标签：c++, file, ifstream

ifstream 是否支持以下内容：

```
ifstream myfile;
myfile.open("/home/Desktop/*.txt*"); 
```

我正在尝试做类似的操作，但我无法打开文件。如果我这样做，`vim /home/Desktop/*.txt`我会打开唯一一个名为 help.txt1 的文件，但由于某种原因无法使用 ifstream 打开它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:57:08.633

最简洁的答案是不”。长答案是“不，它没有”。

PS看`glob`函数获取文件列表，并一一处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:00:16.413

`ifstream`不支持通配符。您必须使用`DIR`或类似的方式获取所有文件，然后将所有带有 .txt 的内容放在列表或数组中，然后循环调用`fopen`每个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:58:14.890

匹配文件名通配符的功能称为[“globbing”](https://en.wikipedia.org/wiki/Glob_%28programming%29)。您需要使用[`glob(3)`](http://linux.die.net/man/3/glob)获取文件列表，然后依次打开每个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:59:16.667

这是因为 shell 解释了您键入的命令`vim /home/Desktop/*.txt`。它查找与模式匹配的文件，并将它们的列表传递给`vim`可执行文件的命令参数。

要在 Unix 上从 C++ 做类似的事情，请查看该[`glob`](http://pubs.opengroup.org/onlinepubs/009695399/functions/glob.html)函数。

# ios - iOS UITapGestureRecognizer 多次点击

> ID：13462949
> 
> 赞同：0
> 
> 时间：2012-11-19T21:54:25.143
> 
> 标签：ios, uigesturerecognizer

我有一个 UITapGestureRecognizer 添加到我的 UITextView。我已将 numberOfTapsRequired 设置为 1，但我确实需要将其设为 ANY。aField 是一个 UITextView。我需要任意数量的水龙头来调用选择器。有什么办法可以做到这一点？

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(stateFieldSelected)];
singleTap.numberOfTapsRequired = 1;
[aField addGestureRecognizer:singleTap]; 
```

目的是，当他们点击状态字段时，我会启动一个 UIPickerView，但如果他们双击或三次点击状态字段，它将拉起键盘。我可以添加许多手势识别器，但必须这样做似乎很蹩脚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:37:46.840

在视图上使用多个手势识别器没有任何问题。但是，如果您担心除了双击操作之外还会调用两次单击操作，您可以指定单击识别器需要双击识别器失败：

```
UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(someOtherMethod)];
[doubleTap setNumberOfTapsRequired:2];
[aField addGestureRecognizer:doubleTap];

UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(stateFieldSelected)];
[singleTap setNumberOfTapsRequired:1];
[singleTap requireGestureRecognizerToFail:doubleTap];
[aField addGestureRecognizer:singleTap]; 
```

# mongodb - 当连接到网络时 Mongodb 使用我的网卡地址？

> ID：13462950
> 
> 赞同：0
> 
> 时间：2012-11-19T21:54:28.577
> 
> 标签：mongodb, grails

我有一个连接到 MongoDB 实例的 Grails 应用程序。在我的 Datasource.groovy 中，我声明了以下内容：

```
grails {
    mongo {
        host = "localhost"
        port = 27017
        databaseName = "mmib-mongo"
    }
} 
```

Mongo 已安装并且可以正常启动。

问题是当我连接到网络时，使用 grails run-app 会记录以下异常：

包装 Grails 应用程序..... | 运行 Grails 应用程序

配置 Spring Security Core ... ... 完成 Spring Security Core 配置

配置Spring Security LDAP ... ... 配置完Spring Security LDAP | 错误 2012-11-19 15:42:16,428 [localhost-startStop-1] 错误 context.GrailsContextLoader - 执行引导程序时出错：创建名为“mongoDatastore”的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 org.springframework.dao.DataAccessResourceFailureException: can't call something : MBP-C02J91TWDKQ5.local/192.168.0.131:27017/mmib-mongo; 嵌套异常是 com.mongodb.MongoException$Network: can't call something : MBP-C02J91TWDKQ5.local/192.168.0.131:27017/mmib-mongo 消息：创建名为 'mongoDatastore' 的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 org.springframework.dao.DataAccessResourceFailureException: can't call something : MBP-C02J91TWDKQ5.***192.168.0.131:27017** /mmib-mongo* *; 嵌套异常是 com.mongodb.MongoException$Network: can't call something : MBP-C02J91TWDKQ5.local/192.168.0.131:27017/mmib-mongo

任何线索为什么当我连接到网络时，Grails/Mongo 想要使用该 IP 地址而不是 localhost，我在 /etc/hosts 中验证是 127.0.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:31:17.310

Homebrew 告诉 MongoDB 只监听 127.0.0.1，而不是你的公共接口或“.local”主机名：

[https://github.com/mxcl/homebrew/blob/master/Library/Formula/mongodb.rb#L95](https://github.com/mxcl/homebrew/blob/master/Library/Formula/mongodb.rb#L95)

尝试从 mongod.conf 的本地副本中删除 bind_ip 行并简单地使用防火墙保护端口 27017，或者更改 mongod.conf 中的“bind_ip”条目。

# php - Symfony2 和 FOS_RestBundle：尽管请求的 Content-Type 不同，如何让主体侦听器始终解码 json 内容？

> ID：13462951
> 
> 赞同：1
> 
> 时间：2012-11-19T21:54:32.410
> 
> 标签：php, symfony, fosrestbundle

我正在构建一个 web 服务，我打算只提供一个 json 接口。

为此，我想让用户与我的 API 交互尽可能容易。在理想的世界中，消费者发送 Content-Type 标头为“application/json”的请求，但是我希望我的 API 接受 json 编码的请求，而不考虑 Content-Type 标头。

我正在使用 Symfony2 和 FOS_RESTBundle 并设置了一个主体侦听器和格式侦听器以及到我的控制器的路由，该路由应该强制格式为应用程序 json。

如果我发送 Content-Type 为“application/json”的请求，则正文已正确解码。在下面的示例中，任何其他 Content-Type 标头结果都是 $data 的空值。$type 总是 json （由于路由中的 _format ）。

我哪里错了？

```
// config.yaml 
fos_rest:
view:
    view_response_listener: false
    failed_validation: HTTP_BAD_REQUEST
    default_engine: php
    formats:
        text: false
        xml: false
        html: false
        json: true
format_listener:
    default_priorities: ['application/json']
    fallback_format: json
    prefer_extension: true
body_listener:
    decoders:
        json: fos_rest.decoder.json 
```

和 -

```
// Routing.yaml

_api_contact_request_create:
  pattern: /api/merchant/{merchantId}/customer-contact-request
  defaults: { _controller: AcmeApiBundle:CustomerContact:Create, _format: json}
  type: rest
  requirements: 
     _method: POST 
```

最后 -

```
 // Extract from Controller
    public function CreateAction($merchantId) {

        $data = $this->getRequest()->request->get('data');

        $type = $this->getRequest()->getRequestFormat();

        var_dump($type, $data);die; 
```

# java - Google Drive SDK 异常

> ID：13462952
> 
> 赞同：3
> 
> 时间：2012-11-19T21:54:34.970
> 
> 标签：java, android, google-api, google-drive-api

我正在尝试运行以下代码（主要取自[Stephen Wylie](https://plus.google.com/u/0/114042449736049687152/posts)）：

```
package com.googledrive.googledriveapp;
// For Google Drive / Play Services
// Version 1.1 - Added new comments & removed dead code
// Stephen Wylie - 10/20/2012
import java.io.IOException;
import java.util.ArrayList;

import android.accounts.Account;
import android.accounts.AccountManager;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

import com.google.android.gms.auth.GoogleAuthException;
import com.google.android.gms.auth.GoogleAuthUtil;
import com.google.android.gms.auth.UserRecoverableAuthException;
import com.google.android.gms.common.AccountPicker;
import com.google.api.client.auth.oauth2.BearerToken;
import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.extensions.android2.AndroidHttp;
import com.google.api.client.googleapis.extensions.android2.auth.GoogleAccountManager;
import com.google.api.client.http.HttpRequestFactory;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.json.JsonHttpRequest;
import com.google.api.client.http.json.JsonHttpRequestInitializer;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.Drive.Apps.List;
import com.google.api.services.drive.Drive.Files;
import com.google.api.services.drive.DriveRequest;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File;
import com.google.api.services.drive.model.FileList;

public class MainActivity extends Activity {
    private static final int CHOOSE_ACCOUNT=0;
    private static String accountName;
    private static int REQUEST_TOKEN=0;
    private Button btn_drive;
    private Context ctx = this;
    private Activity a = this;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        // set up the GUI layout
        setContentView(R.layout.activity_main);
        // set the variables to access the GUI controls
        btn_drive = (Button) findViewById(R.id.btn_drive);
            btn_drive.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                chooseAccount();
            }
            });
    }

    public void chooseAccount() {
        Intent intent = AccountPicker.newChooseAccountIntent(null, null, new String[]{"com.google"}, false, null, null, null, null);
        startActivityForResult(intent, CHOOSE_ACCOUNT);
    }

    // Fetch the access token asynchronously.
    void getAndUseAuthTokenInAsyncTask(Account account) {
        AsyncTask<Account, String, String> task = new AsyncTask<Account, String, String>() {
            ProgressDialog progressDlg;
            AsyncTask<Account, String, String> me = this;

            @Override
            protected void onPreExecute() {
                progressDlg = new ProgressDialog(ctx, ProgressDialog.STYLE_SPINNER);
                progressDlg.setMax(100);
                progressDlg.setTitle("Validating...");
                progressDlg.setMessage("Verifying the login data you entered...\n\nThis action will time out after 10 seconds.");
                progressDlg.setCancelable(false);
                progressDlg.setIndeterminate(false);
                progressDlg.setOnCancelListener(new android.content.DialogInterface.OnCancelListener() {
                    public void onCancel(DialogInterface d) {
                        progressDlg.dismiss();
                        me.cancel(true);
                    }
                });
                progressDlg.show();
            }

            @Override
            protected String doInBackground(Account... params) {
                return getAccessToken(params[0]);
            }

            @Override
            protected void onPostExecute(String s) {
                if (s == null) {
                    // Wait for the extra intent
                } else {
                    accountName = s;
                    getDriveFiles();
                }
                progressDlg.dismiss();
            }
        };
        task.execute(account);
    }

    /**
     * Fetches the token from a particular Google account chosen by the user.  DO NOT RUN THIS DIRECTLY.  It must be run asynchronously inside an AsyncTask.
     * @param activity
     * @param account
     * @return
     */
    private String getAccessToken(Account account) {
        try {
            return GoogleAuthUtil.getToken(ctx, account.name, "oauth2:" + DriveScopes.DRIVE);  // IMPORTANT: DriveScopes must be changed depending on what level of access you want
        } catch (UserRecoverableAuthException e) {
            // Start the Approval Screen intent, if not run from an Activity, add the Intent.FLAG_ACTIVITY_NEW_TASK flag.
            a.startActivityForResult(e.getIntent(), REQUEST_TOKEN);
            e.printStackTrace();
            return null;
        } catch (GoogleAuthException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    private Drive getDriveService() {
        HttpTransport ht = AndroidHttp.newCompatibleTransport();             // Makes a transport compatible with both Android 2.2- and 2.3+
        JacksonFactory jf = new JacksonFactory();                            // You need a JSON parser to help you out with the API response
        Credential credential = new Credential(BearerToken.authorizationHeaderAccessMethod()).setAccessToken(accountName);
        HttpRequestFactory rf = ht.createRequestFactory(credential);
        Drive.Builder b = new Drive.Builder(ht, jf, null);
        b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {

            @Override
            public void initialize(JsonHttpRequest request) throws IOException {
                DriveRequest driveRequest = (DriveRequest) request;
                driveRequest.setPrettyPrint(true);
                driveRequest.setOauthToken(accountName);
            }
        });
        return b.build();
    }

    /**
     * Obtains a list of all files on the signed-in user's Google Drive account.
     */
    private void getDriveFiles() {
        Drive service = getDriveService();
        Log.d("SiteTrack", "FUNCTION getDriveFiles()");
        Files.List request;
        try {
            request = service.files().list(); // .setQ("mimeType=\"text/plain\"");
        } catch (IOException e) {

            e.printStackTrace();
            return;
        }
        do {
            FileList files;
            try {
                System.out.println("got here");
                Log.d("SiteTrack", request.toString());
                **files = request.execute();**
            } catch (IOException e) {
                e.printStackTrace();
                Log.d("SiteTrack", "Exception");
                return;
            }
            ArrayList<File> fileList = (ArrayList<File>) files.getItems();
            Log.d("SiteTrack", "Files found: " + files.getItems().size());
            for (File f : fileList) {
                String fileId = f.getId();
                String title = f.getTitle();
                Log.d("SiteTrack", "File " + fileId + ": " + title);
            }
            request.setPageToken(files.getNextPageToken());
        } while (request.getPageToken() != null && request.getPageToken().length() >= 0);
    }

    protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
        if (requestCode == CHOOSE_ACCOUNT && resultCode == RESULT_OK) {
            accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            GoogleAccountManager gam = new GoogleAccountManager(this);
            getAndUseAuthTokenInAsyncTask(gam.getAccountByName(accountName));
            Log.d("SiteTrack", "CHOOSE_ACCOUNT");
        } else if (requestCode == REQUEST_TOKEN && resultCode == RESULT_OK) {
            accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            Log.d("SiteTrack", "REQUEST_TOKEN");
        }
    }   
} 
```

但是，我得到以下异常：

```
11-19 16:35:27.758: W/System.err(23287): com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
11-19 16:35:27.758: W/System.err(23287): {
11-19 16:35:27.758: W/System.err(23287):   "code" : 403,
11-19 16:35:27.758: W/System.err(23287):   "errors" : [ {
11-19 16:35:27.758: W/System.err(23287):     "domain" : "usageLimits",
11-19 16:35:27.762: W/System.err(23287):     "message" : "Access Not Configured",
11-19 16:35:27.762: W/System.err(23287):     "reason" : "accessNotConfigured"
11-19 16:35:27.762: W/System.err(23287):   } ],
11-19 16:35:27.762: W/System.err(23287):   "message" : "Access Not Configured"
11-19 16:35:27.762: W/System.err(23287): }
11-19 16:35:27.762: W/System.err(23287):    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:237)
11-19 16:35:27.762: W/System.err(23287):    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
11-19 16:35:27.762: W/System.err(23287):    at com.google.api.services.drive.Drive$Files$List.execute(Drive.java:1071)
11-19 16:35:27.762: W/System.err(23287):    at com.googledrive.googledriveapp.MainActivity.getDriveFiles(MainActivity.java:173)
11-19 16:35:27.762: W/System.err(23287):    at com.googledrive.googledriveapp.MainActivity.access$3(MainActivity.java:156)
11-19 16:35:27.762: W/System.err(23287):    at com.googledrive.googledriveapp.MainActivity$2.onPostExecute(MainActivity.java:104)
11-19 16:35:27.765: W/System.err(23287):    at com.googledrive.googledriveapp.MainActivity$2.onPostExecute(MainActivity.java:1)
11-19 16:35:27.765: W/System.err(23287):    at android.os.AsyncTask.finish(AsyncTask.java:417)
11-19 16:35:27.765: W/System.err(23287):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
11-19 16:35:27.765: W/System.err(23287):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
11-19 16:35:27.765: W/System.err(23287):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 16:35:27.765: W/System.err(23287):    at android.os.Looper.loop(Looper.java:123)
11-19 16:35:27.765: W/System.err(23287):    at android.app.ActivityThread.main(ActivityThread.java:4627)
11-19 16:35:27.765: W/System.err(23287):    at java.lang.reflect.Method.invokeNative(Native Method)
11-19 16:35:27.769: W/System.err(23287):    at java.lang.reflect.Method.invoke(Method.java:521)
11-19 16:35:27.769: W/System.err(23287):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-19 16:35:27.769: W/System.err(23287):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-19 16:35:27.769: W/System.err(23287):    at dalvik.system.NativeStart.main(Native Method) 
```

这可以追溯到`files = request.execute();`我上面的代码中的行（我用星号标记了它）。我在我的 Google API 控制台中启用了 Drive SDK 和 Drive API。以下是我的 Drive SDK 设置的一些快照： ![在此处输入图像描述](../Images/ea7eaf945750563d4c0703cabe4b8a35.png) ![在此处输入图像描述](../Images/ccdc4b0903b9c1600782968a318024c9.png) 对于未显示的客户端 ID 部分，我只是从 API 访问部分粘贴了“已安装应用程序的客户端 ID”（我还尝试了“驱动器 SDK 的客户端 ID” ）。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T16:59:26.563

已编辑：抱歉，我刚刚意识到我们可以使用 debug.keystore 在调试模式下对 apk 进行签名。所以，最重要的是在您的 Google API 控制台中插入正确的 SHA1 密钥。（使用 Stephen Wylie 在他的 Google+ 帖子中提到的 JRE7 工具生成）

另请参阅 (developer.android.com/tools/publishing/app-signing.html#debugmode) 获取密钥库密码

经过反复试验，我终于能够在我的谷歌驱动器中列出文件虽然我不确定这是否是最正确的答案，但至少我现在能够列出文件

首先，请参考 Stephen Wylie 更新的 Google+ 帖子 [https://plus.google.com/u/0/114042449736049687152/posts/CD3L8zcJg5Z](https://plus.google.com/u/0/114042449736049687152/posts/CD3L8zcJg5Z)

使用 JRE7 工具使用您的 .keystore 生成 SHA1 密钥

我正在使用我在我的 google play 商店中使用的 .keystore 文件（如果您没有任何密钥库，您可以转到您的项目，单击导出，然后它会要求您创建一个 .keystore 文件）

使用生成的 SHA1 密钥，转到您的 Google API 控制台（最好从头开始，删除当前项目并开始一个新项目）

-启用驱动器 API

-启用驱动 SDK

- 转到 API 访问

- 创建客户 ID

- 此处重要，选择已安装的应用程序和 Android

-同样重要的是，输入您生成的 SHA1 密钥

- 输入您在 Eclipse 项目中使用的正确包名称 (com.example.xxx)

- 转到 Drive SDK 选项卡 - 上传图标

-重要，从 API 访问选项卡中输入您的 CLIENT ID（已安装应用程序的客户端 ID）

- 插入 Stephen Wylie 帖子中提到的 3 个作用域，[/userinfo.email, /userinfo.profile, /auth/drive]

- 插入一个 URL

-勾选多个文件支持

再次确保代码中的包名称与插入 Google API 控制台的包名称相同

最后，在eclipse中，使用刚才创建的.keystore文件导出你的项目

将导出的APK文件放入手机，安装试试。

检查您的 LogCat 以显示您的 Google Drive 中列出的文件

我已经成功地使用了这种方式。

已编辑：如果您使用 debug.keystore 生成了 SHA1 密钥，则可以跳过“导出”部分。只需调试您的应用程序就可以了。Eclipse 将自动使用 debug.keystore 对 apk 进行签名。

编辑：下次您的代码准备好时，您需要使用您的真实 .keystore 生成一个新的 SHA1 密钥，然后输入到 Google API 控制台。

编辑2：确保您的清单包括这些

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />
<uses-permission android:name="android.permission.MANAGE_ACCOUNTS" /> 
```

![我用过的罐子](../Images/6982170eb44b36b11c90e32e573df17a.png) ![进口](../Images/94139a78e62fff9c21040b185a995016.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T17:25:44.013

我也遇到了这个问题，很快意识到我在“Google API 控制台>服务”下启用了错误的“服务”。在启用“Drive API”而不是“Drive SDK”后尝试您的应用程序。

步骤：
1) 转到[https://code.google.com/apis/console](https://code.google.com/apis/console)
2) 从下拉列表中选择正确的应用程序/项目
3) 转到“服务”
4) 切换“打开”“Drive API”

# visual-studio-2012 - RC2102：字符串文字太长

> ID：13462955
> 
> 赞同：11
> 
> 时间：2012-11-19T21:54:57.917
> 
> 标签：visual-studio-2012, glew

我正在尝试在 VS2012 中编译 GLEW，但资源文件无法编译并且我得到“错误 RC2102：字符串文字太长”。谁能解释这个错误是如何/为什么发生的，以及是否有任何方法可以在不缩短字符串的情况下修复它。（字符串包含版权/许可信息）。这是有问题的 .rc 文件之一：

```
VS_VERSION_INFO VERSIONINFO 
FILEVERSION 1, 9, 0, 0
PRODUCTVERSION 1, 9, 0, 0
FILEFLAGSMASK VS_FFI_FILEFLAGSMASK
#ifdef _DEBUG
FILEFLAGS VS_FF_DEBUG
#else
FILEFLAGS 0x0L
#endif
FILEOS VOS__WINDOWS32
FILETYPE VFT_APP
FILESUBTYPE VFT2_UNKNOWN
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904b0"
        BEGIN
            VALUE "Comments", "The OpenGL Extension Wrangler Library\r\nCopyright (C) 2002-2008, Milan Ikits <milan ikits[]ieee org>\r\nCopyright (C) 2002-2008, Marcelo E. Magallon <mmagallo[]debian org>\r\nCopyright (C) 2002, Lev Povalahev\r\nAll rights reserved.\r\n \r\nRedistribution and use in source and binary forms, with or without \r\nmodification, are permitted provided that the following conditions are met:\r\n\r\n* Redistributions of source code must retain the above copyright notice, \r\n  this list of conditions and the following disclaimer.\r\n* Redistributions in binary form must reproduce the above copyright notice, \r\n  this list of conditions and the following disclaimer in the documentation \r\n  and/or other materials provided with the distribution.\r\n* The name of the author may be used to endorse or promote products \r\n  derived from this software without specific prior written permission.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' \r\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE \r\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\nARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE \r\nLIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR \r\nCONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF \r\nSUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\nINTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\nCONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\nARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF\r\nTHE POSSIBILITY OF SUCH DAMAGE.\r\n\r\nLicense Applicability. Except to the extent portions of this file are\r\nmade subject to an alternative license as permitted in the SGI Free\r\nSoftware License B, Version 1.1 (the 'License'), the contents of this\r\nfile are subject only to the provisions of the License. You may not use\r\nthis file except in compliance with the License. You may obtain a copy\r\nof the License at Silicon Graphics, Inc., attn: Legal Services, 1600\r\nAmphitheatre Parkway, Mountain View, CA 94043-1351, or at:\r\n\r\nhttp://oss.sgi.com/projects/FreeB\r\n\r\nNote that, as provided in the License, the Software is distributed on an\r\n'AS IS' basis, with ALL EXPRESS AND IMPLIED WARRANTIES AND CONDITIONS\r\nDISCLAIMED, INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES AND\r\nCONDITIONS OF MERCHANTABILITY, SATISFACTORY QUALITY, FITNESS FOR A\r\nPARTICULAR PURPOSE, AND NON-INFRINGEMENT.\r\n\r\nOriginal Code. The Original Code is: OpenGL Sample Implementation,\r\nVersion 1.2.1, released January 26, 2000, developed by Silicon Graphics,\r\nInc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.\r\nCopyright in any portions created by third parties is as indicated\r\nelsewhere herein. All Rights Reserved.\r\n\r\nAdditional Notice Provisions: This software was created using the\r\nOpenGL(R) version 1.2.1 Sample Implementation published by SGI, but has\r\nnot been independently verified as being compliant with the OpenGL(R)\r\nversion 1.2.1 Specification.\0"
            VALUE "CompanyName", "\0"
            VALUE "FileDescription", "Utility for listing pixelformat capabilities\0"
            VALUE "FileVersion", "1,9,0,0\0"
            VALUE "InternalName", "visualinfo\0"
            VALUE "LegalCopyright", "© 2002-2008 Milan Ikits & Marcelo Magallon\0"
            VALUE "LegalTrademarks", "\0"
            VALUE "OriginalFilename", FILENAME "\0"
            VALUE "PrivateBuild", "\0"
            VALUE "ProductName", "The OpenGL Extension Wrangler Library\0"
            VALUE "ProductVersion", "1,9,0,0\0"
            VALUE "SpecialBuild", "\0"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x409, 1200
    END
END 
```

评论行显然很长，我想我可以删除其中的一些，但我想知道是否有更好的解决方案。

[编辑]

这是这些特定资源文件的一个已知问题，它确实让我想知道为什么这会在 VS2010 中毫无问题地工作，MS 是否减少了字符串文字的最大大小？头脑一片混乱。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-01T11:40:46.710

VS2013 RC 中仍然存在该问题（2010 也适用于我）。为了使它工作，我只是在中间拆分字符串一次：

```
VALUE "Comments", "The OpenGL [...] All Rights Reserved.\r\n\r\n"
                  "Permission is [...]" 
```

# jsf-1.2 - 检测值变化 在一个里面

> ID：13462963
> 
> 赞同：0
> 
> 时间：2012-11-19T21:55:18.043
> 
> 标签：jsf-1.2, jspx

有一个这样的表：

```
<h:panelGroup rendered="#{ImportFromCSVFile.step2Visible}">
    <div style="width: 100%; overflow: auto; max-height: 400px;">
        <tr:table id="step2ColumnMappings" var="columnMappingEntry" rows="0" rowBandingInterval="1" value="#{ImportFromCSVFile.columnMappings}">
            <tr:column>
                <tr:outputLabel value="#{columnMappingEntry.columnIndex}"/>
            </tr:column>
            <tr:column>
                <tr:outputLabel value="#{columnMappingEntry.columnValue}"/>
            </tr:column>
            <tr:column>
                <h:selectOneMenu value="#{columnMappingEntry.columnType}" validator="#{ImportFromCSVFile.validateColumnType}" onchange="submit()" valueChangeListener="#{ImportFromCSVFile.columnMappingChanged}">
                    <f:selectItems value="#{ImportFromCSVFile.columnsToBeMapped}" />
                </h:selectOneMenu>
            </tr:column>
        </tr:table>
    </div>
</h:panelGroup> 
```

它（正确地）呈现为具有三列的表格：前两列中的文本和最后一列中的下拉列表。下拉菜单也根据模型中的值正确初始化。

我需要做的是能够在任何下拉列表中的值发生变化时运行一些逻辑。正如您在代码中看到的那样，我正在考虑使用`valueChangeListener`on `selectOneMenu`，但它没有被调用。现在唯一想到的是在提交表单时使用 POST 参数，这不是最佳选择。

你知道我如何才能`valueChangeListener`在这种情况下工作吗？JSF 1.2。我可能遗漏了一个明显或已知的解决方案，但不幸的是，我以前使用 JSF 的经验非常少，并且没有定期使用它。

非常感谢您！

`xmlns:h="http://java.sun.com/jsf/html"` `xmlns:tr="http://myfaces.apache.org/trinidad"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:02:37.403

像您在代码片段中提到的方式那样调用 javascript 函数将不会提交您的表单。调用

> 价值变化

侦听器，您需要向支持 bean 提交一个请求，该 bean 将检查您的应用程序级逻辑。您可以尝试删除

> 点击

属性，并且请在您放置了一个消息时留言

> 验证器

. 有时会发生这种情况，即当验证未成功并且您没有为其附加相应的消息或通知时，将不会执行所需的操作。因此，即使您的逻辑可能是编写的，但他的 JSF 生命周期在

> 验证阶段

并且您的剩余操作不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:37:31.097

最简单的做法是使用[<tr:selectOneChoice](http://myfaces.apache.org/trinidad/trinidad-api/tagdoc/tr_selectOneChoice.html "<tr:selectOneChoice")而不是 <h:selectOneChoice。以同样的方式使用它的*valueChangeListener*。但是，您不能像这样通过 Javascript 提交表单，因为它不知道 JSF 生命周期（不发布正确的内容，并且您的代码不应该与该级别的 JSF 内部交互）。如果您设置`<tr:selectOneChoice autoSubmit="true"...`这将导致在调用您的值更改侦听器的下拉菜单值更改时发生帖子。

# c# - 在矩形内居中绘制文本

> ID：13462966
> 
> 赞同：1
> 
> 时间：2012-11-19T21:55:36.277
> 
> 标签：c#, winforms, gdi+

我有代码，类似于以下内容：

```
string myText = "This is a test";
Font myFont = new Font("Arial", 10);
Rectangle rect = new Rectangle(10,10,100,100);
Graphics g = e.Graphics;
g.DrawString(myText, myFont, rect.X, rect.Y); 
```

虽然这可行，但我想做的是让文本在矩形的尺寸内垂直和水平居中。另外，如果可能的话，如果文本太大而不能放在一行上，我想换行。如何在 C#/GDI+ 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:02:28.060

我会使用其中一个需要~~你必须检查文本长度~~[`DrawString`](http://msdn.microsoft.com/en-us/library/21kdfbzs%28v=vs.100%29.aspx)的重载，以 ~~确保它适合并自己包装。~~进一步看它有一个 NoWrap 标志，暗示默认是换行：[`StringFormat`](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat%28v=vs.100%29.aspx) ~~[`MeasureString`](http://msdn.microsoft.com/en-us/library/6xe5hazb%28v=vs.100%29.aspx)~~[`StringFormatFlags`](http://msdn.microsoft.com/en-us/library/system.drawing.stringformatflags%28v=vs.100%29.aspx)

从最后一个链接：

> 禁用矩形内格式化时行之间的文本换行。当传递一个点而不是一个矩形时，或者当指定的矩形的线长为零时，这个标志是隐含的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:01:55.813

简单，未经研究的方法：

自动换行将你的字符串分解成更小的子字符串。IE

```
"this is"
"a test" 
```

您可以使用该`String.Split()`方法将字符串拆分为单词，然后将单词附加在一起，直到您的字符串达到某个阈值。然后制作一个新字符串。

至于居中，您可以用空格填充各个字符串。对于垂直居中，您可以在字符串的开头添加一些换行符。

我将把涉及的算术留给你。它不应该那么难。

# forms - 具有多个输入字段的 Symfony 表单类型

> ID：13462968
> 
> 赞同：3
> 
> 时间：2012-11-19T21:55:43.533
> 
> 标签：forms, symfony-2.1, custom-field-type

使用 Symfony 2.1，我如何创建一个包含多个输入字段的表单类型？所以在表单生成器中我想添加一个自定义表单类型：

```
$builder->add('test','my_fieldtype') 
```

然后，如果我在模板中这样做：

```
{{ form_row(form.test) }} 
```

我希望它显示具有标签和 2 或 3 个输入字段的行。我想像日期类型的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T22:05:59.437

您将需要创建一个[自定义字段类型](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)。实现它的最佳方法是查看[DateTimeType](https://github.com/symfony/Form/blob/master/Extension/Core/Type/DateTimeType.php)的代码。

请记住还要创建适当的 Twig 表单模板。

# actionscript-3 - 转到另一个帧上的另一个 flvplayback 时，如何从舞台上完全删除一个 flvplayback？

> ID：13462973
> 
> 赞同：3
> 
> 时间：2012-11-19T21:56:13.020
> 
> 标签：actionscript-3, flash, flvplayback

我正在尝试使用 flash 5.5 AS3 创建一个 EXE 投影仪，其中我有一些视频 (FLV) 要显示（它们的位置就在同一目录中的 exe 文件旁边）-每个都加载在不同的帧中，并且所有这些视频还应该有一个全屏选项。这些是人们想要全屏观看的原创视频。这对于体验来说是必不可少的...

我目前遇到的问题（在修复了转到其他视频后没有停止的声音之后）很难描述，但我会非常努力。

好的，所以当我点击视频上的全屏按钮并全屏观看时，我最终会想要退出全屏，所以我点击底部的相同图标退出全屏（或ESC按钮，它是同），然后单击导航按钮转到 SECOND FLV 的帧观看其他视频。在全屏观看第二个视频然后退出全屏后，flash 将我带到第一个视频的帧，这是一个大问题。此外，现在将我带回第二个视频帧的按钮不起作用。就像闪光灯卡住了一样。

我使用组件菜单中的组件 --> FLVPlayback 2.5（我不太了解 AS3 编程），并在组件参数中修复了它的属性。

此外，我认为以下任何一项都不是导致该错误的原因，但我使用这 3 个脚本在从一帧（使用 FLV 播放）导航到

另一个 FLV 播放的帧：

```
MyFLV.stop();

SoundMixer.stopAll();

MyFLV.addEventListener(Event.REMOVED_FROM_STAGE,xyz);
function xyz(e:Event):void{
MyFLV.stop();
} 
```

我在网上找到了这些，人们为我描述的声音错误寻求帮助。

第三个脚本假设在转到另一帧之前从舞台上删除 FLVplayback，但它仅在未进入全屏时有效。我需要一些能够从舞台上完全删除前一个视频的东西，因此在退出第二个观看的视频后，flash 不会将我带到由于某种原因仍在其内存中的视频。我的项目中有大约 30 个视频，在导航到下一帧以打开新的 FLVPlayback 之前，我需要从舞台上删除每个视频。

我尝试将链接添加到我针对该问题制作的演示中，以便您查看它，但它触发了“哎呀，出了点问题”错误，可能是反垃圾邮件机制......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:35:15.553

我建议只使用一帧和一个 flvplayback 实例。否则，您必须处理奇怪的错误，例如您遇到的错误（通常是由放错位置或忘记的代码引起的）。当然，只使用一帧需要使用更多的代码，但是随着硬修复的数量看起来你正在为错误做，你最终可能会使用更少的代码。

别担心，我会带你经历一切！

使用代码的原因（而不是多帧）：

1.  更容易跟踪：
    *   了解所有代码的位置，以便轻松找到并解决任何问题。
2.  更轻松地进行更改
    *   您想切换现有视频吗？编辑文件引用，您就完成了。
    *   想要添加视频？无需再将新的 flvplayback 实例拖到新框架上，只需添加一些非常简单的代码和一个按钮，就完成了。
3.  更多定制

    * * *

使用多个帧（和多个 flvplayback 实例）的原因：

1.  更容易在视觉上放置
    *   有些人发现当他们有一个可以在舞台上直观地放置的实际电影剪辑时会更容易
2.  更少的代码

    * * *

开始了：

```
//import flv library
import fl.video.*; 
```

这允许您使用 ActionScript 来操作 flv 播放器

```
//video playback code-----------------------//
var myVideo:FLVPlayback = new FLVPlayback(); 
```

这将创建一个名为 myVideo 的 FLVPlayback 实例（从现在开始在代码中引用为 myVideo）

下一部分展示了 flv 播放器的许多可定制功能。没有必要包括它们。

```
//places the video player on stage at x,y
myVideo.x = 115;
myVideo.y = -10;
//uses SkinOverPlayFullscreen.swf for controls
myVideo.skin = "SkinOverPlayFullscreen.swf";
//color of controls
myVideo.skinBackgroundColor = 0x333333;
//hide controls and time it takes controls to fade and reappear (milliseconds)
myVideo.skinAutoHide=true;
myVideo.skinFadeTime=300;
//add the player to the stage
addChild(myVideo); 
```

现在是重要的部分。我制作了按钮并将它们添加到舞台上。我给每个按钮一个不同的实例名称（box1_btn、box2_btn 和 box3_btn）。当有人点击一个按钮时，就会发生一个“事件”。

```
//button listener code-------------------------//

//when button 1 is clicked throw button 1 event
box1_btn.addEventListener(MouseEvent.CLICK, clicked1);
//when button 2 is clicked throw button 2 event
box2_btn.addEventListener(MouseEvent.CLICK, clicked2);
//when button 3 is clicked throw button 3 event
box3_btn.addEventListener(MouseEvent.CLICK, clicked3);

//play different videos for different buttons---------//

//when button 1 event is thrown
function clicked1($e:MouseEvent):void
{
    //play video 1.flv
    myVideo.source = "1.flv";

}

//when button 2 event is thrown
function clicked2($e:MouseEvent):void
{
    //play video 2.flv
    myVideo.source = "2.flv";

}

//when button 3 event is thrown
function clicked3($e:MouseEvent):void
{
    //play video 3.flv
    myVideo.source = "3.flv";

} 
```

此代码不会有任何声音继续播放，因为两个视频不能在播放器的一个实例中同时播放。当您退出全屏时，它也不会有任何混乱，因为视频只有一帧可以返回。

您可能会遇到的一些问题：

它根本不起作用：

*   通过从组件菜单（窗口>>组件或 ctrl+F7）将实例添加到舞台，然后将其从舞台中删除（它仍应出现在库中），确保您已将 FLVPlayback 实例添加到库中。

我想要的播放按钮没有出现：

*   这里有一个关于如何使用 As3 操作 FLVPlayback 的很好的解释：

    [http://www.republicofcode.com/tutorials/flash/as3flvplayback/](http://www.republicofcode.com/tutorials/flash/as3flvplayback/)

    找到“将皮肤应用于 FLVPlayback 组件”部分并按照它使用 adobe 播放皮肤。如果您想制作自己独特的皮肤，我建议您打开并编辑其中一个预制皮肤。我在

    `C:\Program Files (x86)\Adobe\Adobe Flash CS6\Common\Configuration\FLVPlayback Skins\FLA\ActionScript 3.0`

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T09:33:16.857

```
flvPlayBack.stop();
removeChild(flvPlayBack); 
```

停止声音并移除播放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T08:45:24.003

下面是最简单的卸载方法`FLVPlayback`

```
removeChild(MyFLV); 
```

这对我来说可以

# jquery - 重置自执行的 JavaScript 函数

> ID：13462976
> 
> 赞同：0
> 
> 时间：2012-11-19T21:56:23.950
> 
> 标签：jquery, function, loops, kill

我有一个循环的简单函数。我想杀死它，然后根据用户操作重新执行它。不知道最好的方法是什么。

这是我所拥有的：

```
function loopor(){

    $slider.next();

    setTimeout(loopor, 3000);
} 
```

这就是我需要做的：

```
$('#thing').click(function(event){

    event.preventDefault();

    var thing = $(this);

    /* help here */
    magicKillLooporFunction();
    /* end help*/

    thing.animate({
        height: '100%'
    }, function({
        loopor();
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:58:53.307

```
var myTimeout;
function loopor(){
    clearTimeout(myTimeout);  //Add this so multiple clicks don't create multiple timeouts
    $slider.next();
    myTimeout = setTimeout(loopor, 3000);
} 
```

然后在其他代码中

```
$('#thing').click(function(event){
    event.preventDefault();
    var thing = $(this);
    clearTimeout(mytimeout);
    thing.animate({
    height: '100%'
    }, function({
        loopor();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:00:37.020

这是最简单的解决方案：

```
(function($) {
     var $slider, //Assign value
         timeout;
     function loopor() {
          $slider.next();
          timeout = setTimeout(loopor, 3000);
     }
     $('#thing').click(function(event){

          event.preventDefault();

          var thing = $(this);

          /* help here */
          clearTimeout(timeout);
          /* end help*/

          thing.animate({
              height: '100%'
          }, function({
              loopor();
          });
     });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:59:11.750

添加一个布尔值：

```
if(keeprunning) setTimeout(loopor, 3000); 
```

# asp.net-mvc-3 - 选择元素客户端验证仅在发布后出现

> ID：13462977
> 
> 赞同：0
> 
> 时间：2012-11-19T21:56:24.600
> 
> 标签：asp.net-mvc-3, validation, client-side-validation

我正在尝试对 select 元素使用客户端验证，但在表单最初加载时它不起作用。

这是我的模型中的属性（这实际上是在我的模型中的一个类中）：

```
[Required(ErrorMessage="Please select an application type.")]
public override string Application
{
    get
    {
        return base.Application;
    }
    set
    {
        base.Application = value;
    }
} 
```

这是视图的一部分

```
<div class="field_title">
    Application Type
</div>
<div class="field_validation">
    @Html.ValidationMessageFor(model => model.CreatePromocode.Application)
</div>
<div class="form_field">
    @Html.DropDownListFor(model => model.CreatePromocode.Application,
        SharedLibrary.Entities.DropDownLists.PromocodeApplicationOptions,
        "Select an application type...")
</div> 
```

这是下拉列表项代码，我这样做是为了在其他应用程序上使用它，只需在一个地方而不是几个地方进行更改

```
public class DropDownLists
{        
    public static List<SelectListItem> PromocodeApplicationOptions
    {
        get
        {
            return new List<SelectListItem>()
            {
                new SelectListItem() { 
                    Text="Earlybird Registration", Value="Earlybird"},
                new SelectListItem() { 
                    Text="Standard Registration", Value="Standard"},
                new SelectListItem() { 
                    Text="Monday Registration", Value="Monday"},
                new SelectListItem() { 
                    Text="Tuesday Registration", Value="Tuesday"},
                new SelectListItem() { 
                    Text="Wednesday Registration", Value="Wednesday"},
                new SelectListItem() { 
                    Text="Multiple Tickets", Value="TicketMany"},
                new SelectListItem() { 
                    Text="Single Ticket",Value="TicketSingle"}
            };
        }
    }
} 
```

我遇到的问题是，当用户第一次到达页面时，下拉列表没有任何客户端验证属性。看起来像这样

```
<select id="CreatePromocode_Application" name="CreatePromocode.Application"> 
```

但是，一旦发布了表单，并且由于尚未选择应用程序类型而导致 ModelState 无效，客户端验证就会出现在下拉列表中并且可以正常工作。

```
<select data-val="true" 
    data-val-required="Please select an application type." 
    id="CreatePromocode_Application"
    name="CreatePromocode.Application" 
    class="valid"> 
```

如何从一开始就进行客户端验证？我宁愿不必手动添加必需的属性和错误消息，因为它有点违背使用数据注释的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:13:03.560

确保您正在初始化视图模型的 CreatePromoCode 属性，就像在此示例的默认构造函数中一样：

```
public class YourViewModel
{
    public YourViewModel()
    {
        CreatePromoCode = new CreatePromoCode();
    }

    public BaseCreatePromoCode CreatePromoCode { get; set; }

}

public class BaseCreatePromoCode
{
    public virtual string Application { get; set; }

}

public class CreatePromoCode : BaseCreatePromoCode
{
    [Required]
    public override string Application { get; set; }
} 
```

HtmlHelper 将使用视图模型的 CreatePromoCode 属性的运行时类型，以获取其属性的元数据并设置客户端验证的数据属性。（因此，即使只在派生类上实际设置了 Required 属性，验证也将起作用。）

当初始发布后出现错误时，MVC 绑定器已创建视图模型和 CreatePromoCode 对象的实例。如果您再次渲染要显示的错误视图，因为对象已被初始化，数据属性将被设置并且客户端验证开始工作。

# linux - Grep - 返回行号和文件名

> ID：13462979
> 
> 赞同：1
> 
> 时间：2012-11-19T21:56:38.150
> 
> 标签：linux, bash, shell, unix

我在一个目录中有许多日志文件。我正在尝试编写一个脚本来搜索所有日志文件中的字符串并回显文件的名称和找到该字符串的行号。

我想我可能不得不使用 2 个 grep - 将一个的输出通过管道传输到另一个，因为 -l 选项只返回文件名，而没有关于行号的信息。任何有关我如何成功实现这一目标的见解都将不胜感激。

非常感谢，

亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:59:59.233

```
$ grep -Hn root /etc/passwd
/etc/passwd:1:root:x:0:0:root:/root:/bin/bash 
```

结合`-H`并`-n`做你所期望的。

如果您想在不使用字符串的情况下回显所需的信息：

```
$ grep -Hn root /etc/passwd | cut -d: -f1,2
/etc/passwd:1 
```

或使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
$ awk -F: '/root/{print "file=" ARGV[1] "\nline=" NR}' /etc/passwd
file=/etc/passwd
line=1 
```

如果你想创建`shell`变量：

```
$ awk -F: '/root/{print "file=" ARGV[1] "\nline=" NR}' /etc/passwd | bash
$ echo $line
1
$ echo $file
/etc/passwd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:58:51.627

使用`-H`. 如果您使用的 grep 没有`-H`，请指定两个文件名。例如：

```
grep -n pattern file /dev/null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T22:12:08.233

我的 grep 版本不断从匹配的行返回文本，我不确定你是否在后面......你也可以将输出通过管道传递给一个`awk`命令，让它只打印文件名和行号

`grep -Hn "text" . | awk -F: '{print $1 ":" $2}'`

# wpf - 在绘图时停止 InkCanvas 调整大小

> ID：13462980
> 
> 赞同：4
> 
> 时间：2012-11-19T21:56:38.967
> 
> 标签：wpf, resize, inkcanvas

在我的应用程序中，我`InkCanva`在背景中有一个带有图像的 s。当我`InkCanvas`在底部或左侧边缘绘制时，会`InkCanvas`更改大小以适合草图，这会扰乱背景中图像的渲染。`InkCanvas`当笔划超出其当前大小时，如何停止调整大小？

当前 XAML：

```
<InkCanvas x:Name="DrawingArea"
           Width="Auto"
           Height="Auto"
           ClipToBounds="True"
           Background="{x:Null}" /> 
```

*   背景在代码隐藏中设置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T00:23:52.030

在没有指定特定大小的情况下，我发现将`MaxWidth`and绑定`MaxHeight`到父元素的 and 可以防止在`ActualWidth`元素之外扩展。`ActualHeight``InkCanvas`

```
<Grid x:Name="LayoutRoot">
    <InkCanvas x:Name="DrawingArea"
               MaxWidth="{Binding ActualWidth, ElementName=LayoutRoot}"
               MaxHeight="{Binding ActualHeight, ElementName=LayoutRoot}"
               Background="{x:Null}" />
    ...
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:11:53.490

您可以硬编码宽度而不是使用自动： Width = "200" Height = "200"

# ajax - 寻找一种更简单的方法来将 ajax POST 数据保存到 django 模型并避免硬编码进行保存？

> ID：13462989
> 
> 赞同：1
> 
> 时间：2012-11-19T21:57:24.047
> 
> 标签：ajax, django, models, save

我一直在从事一个需要大量用户输入和处理的 django 项目，并且厌倦了在视图中硬编码数据以便将其保存到我的模型中，如下所示。

```
mymodel = TheModel.objects.get(id=model.id)
mymodel.name = request.POST.get('name')
mymodel.zip  = request.POST.get('zip')
...
mymodel.save() 
```

除了我上面使用的两个模型属性之外，有时最多需要保存 25 个。

我正在使用 ajax 序列化表单并将它们发送到保存它们的视图。我正在寻找最干净的方法来解决这个问题。代码越少越好，如果有一种方法可以显着缩短我现在拥有的代码行数，我愿意重新格式化我的模型。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:13:19.817

你可能想看看[`ModelForms`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:30:45.863

此方法将起作用，尽管您必须小心同时添加模型字段/ ajax 参数才能使其起作用

鉴于：

表格1

```
<form method="post">
  <input name="parameter1" />
  <input name="parameter2" />
  <input name="parameter3" />
</form> 
```

编写 javascript 代码，使通过网络传输的数据看起来像这样的 JSON（表单序列化可能不起作用）

```
{ parameter1 : "some data", "parameter2" : "some data", parameter3 : "some data" } 
```

然后，你有一个看起来像这样的 django 模型

```
class MyModel(models.Model):
    parameter1 = models.StringField()
    parameter2 = models.StringField()
    parameter3 = models.StringField() 
```

您可以使用如下代码保存/更新：

参数 = dict(request.POST)

```
m = MyModel.objects.create(**params) 
```

或者

```
m = MyModel.objects.get(id=ID)
m.update(force_update=False,**params) 
```

如果您的参数未对齐，则代码将失败。

# database-design - 分析和评价用户，并根据条件对搜索结果进行排名

> ID：13462994
> 
> 赞同：0
> 
> 时间：2012-11-19T21:57:41.817
> 
> 标签：database-design, data-mining, keyword, analysis, data-analysis

我不确定这是否应该发布在这里（因为它是一个与编程相关的问题）或数学（因为它可能是统计的），或者即使它是一个有效的问题。如果您认为我在错误的网站上发布，请告诉我！

对于我最后一年的项目，我正在开发一个在线投资组合网站，用户可以在其中创建一个帐户，输入他们的技能，对每项技能进行评分（从（例如）1-bad 5-ok-excellent），他们的工作经历、相关经验、工作实例和联系方式。这被拒绝了，理由是它太简单了。

为了加强项目，我提出了雇主视角，允许雇主智能地搜索潜在员工，其中每个结果（用户）根据他们和他们的技能是否符合标准进行排名。

由于我自己的一个小问题，我不再能够改变我的项目，只能按照我的提议去做。

编辑以使我的问题更清楚

假设我有以下两个用户：

> 用户 1：“PHP”，技能等级 10（优秀）和“jQuery”，技能等级 6（ok）
> 用户 2：“PHP”，技能等级 5（ok），“jQuery”技能等级9（优秀）。

假设雇主搜索“PHP”，有没有我可以研究的工具、理论或技术，可以让我根据给定标准的所有相关用户技能开发排名算法？
在上面的示例中，用户 1 将排在用户 2 之前，因为他们的 PHP 技能水平更高。但如果搜索“PHP, jQuery”，则用户 2 将排名第一，因为它们与搜索更相关。

我希望这能更好地解释我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:48:24.793

这**还不是数据挖掘**。

您所说的是*排名*，因为它在**信息检索**中无处不在。

但是，您似乎最*不确定*的是要使用哪个相似性函数。好吧，这取决于您，没有任何工具可以为您回答这个问题。他们只会给你更多你以前没有想到的选择。最简单的是曼哈顿距离——即总结每个给定标准的差异。

我希望这对您的顾问来说仍然“太容易”。您应该能够将请求编译为单个 SQL 查询（字面意思是：计算分数总和，按总和排序），并让数据库轻松地以良好的性能回答您。毕竟，您不会处理数十亿份简历。对不起。

# c# - 获取集合中某个属性的最大值或序列为空时返回零

> ID：13462995
> 
> 赞同：0
> 
> 时间：2012-11-19T21:57:49.903
> 
> 标签：c#, linq

为什么 GetOrders() 不返回任何元素我得到一个 InvalidOperationException 序列中没有元素。

```
 int maxNumber = GetOrders().Max(o => o.Number); 
```

我该如何解决这个问题，所以我得到整数默认值，当序列为空时为 0，否则我想要最大值是序列不为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:01:23.883

不使用 Linq，你可以做一些简单的事情，比如

```
var myOrders = GetOrders();
int maxNumber = myOrders.Any() ? myOrders.Max(o => o.Number) : 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T22:04:54.120

您可以使用以下重载[`Enumerable.DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb355419.aspx)：

```
int maxNumber = GetOrders().DefaultIfEmpty(new Order { Number = 0 }).Max(o => o.Number); 
```

如果你只是想选择`int`值，这种方法更简单：

```
int maxNumber = GetOrders().Select(o => o.Number).DefaultIfEmpty(0).Max(o => o); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T22:06:42.553

或者：

```
int maxNumber = GetOrders().Max( o => (int?) o.Number ) ?? 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T22:06:30.480

您可以使用聚合扩展方法。

```
var max = elements2.Aggregate(0, (m, o) => Math.Max(m, o.Number)); 
```