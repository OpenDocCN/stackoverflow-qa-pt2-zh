# StackOverflow 问答 15746000-15746999

# java - 无法从滚动视图中删除 admob

> ID：15746005
> 
> 赞同：1
> 
> 时间：2013-04-01T15:11:30.347
> 
> 标签：java, android, scrollview, admob

我有这个项目，我把 admob 放在上面，但广告必须始终位于屏幕底部，当您上下滚动页面时，广告必须保持在同一个位置。

由于广告有自己的小滚动视图布局，似乎我在某处做错了什么？我在下面放了一个屏幕截图以及布局的代码

**编辑了 homexml 代码但有错误**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ScrollView
        android:id="@+id/ScrlView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="20dp"
        android:layout_weight="1">

      <ScrollView
          android:id="@+id/ScrlView"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_above="@+id/MainActivity"
          android:layout_marginBottom="20dp" >

  <LinearLayout
      android:id="@+id/layoutForScroll"
      android:layout_width="match_parent"
      android:layout_height="100dp"
      android:orientation="vertical" >

     <TextView
         android:id="@+id/header"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="23dp"
         android:gravity="center"
         android:text="Welcome To Ride Count!"
         android:textAppearance="?android:attr/textAppearanceLarge"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

        <RelativeLayout
            android:id="@+id/layoutTextViews_one"
            android:layout_width="280dp"
            android:layout_height="100dp"
            android:layout_gravity="center"
            android:layout_marginTop="10dp"
            android:background="@drawable/smallbox1" >

     <TextView
         android:id="@+id/txtCountLabel_one"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:layout_marginTop="24dp"
         android:gravity="center"
         android:text="Rides Ridden:"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

    <TextView android:textStyle="bold" android:gravity="center" android:text="0000" android:layout_height="wrap_content"
      android:layout_width="match_parent" android:id="@+id/sum"
       android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000"  android:layout_marginTop="45dp"></TextView>

   </RelativeLayout>

        <TextView
            android:id="@+id/txtFact"
            android:layout_width="280dp"
            android:layout_height="180dp"
            android:layout_gravity="center"
            android:layout_marginTop="23dp"
            android:background="@drawable/factbox"
            android:gravity="center"
            android:text="Tap For Fact"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000"
            android:textStyle="bold" />

   </LinearLayout>

 </ScrollView>

     <LinearLayout
        android:id="@+id/MainActivity"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_marginTop="0dp"
        android:layout_weight="2">
    </LinearLayout>

    <com.google.ads.AdView
        xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/ad"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        googleads:adSize="SMART_BANNER"
        googleads:adUnitId="@string/admob_id" />

</LinearLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/28xWS.jpg)

广告暴民布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ad_catalog_layout"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <TextView android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/banner_bottom" />
    <TextView android:id="@+id/status"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="1"
        android:text="" />

    <com.google.ads.AdView
        xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        googleads:adSize="IAB_MRECT"
        googleads:adUnitId="@string/admob_id" />

</LinearLayout> 
```

主页 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/backgroundtowers"
    android:orientation="vertical"
    android:scrollbars="vertical"
    android:weightSum="1" >

    <ScrollView
        android:id="@+id/ScrlView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/MainActivity"
        android:layout_marginBottom="20dp" >

        <LinearLayout
            android:id="@+id/layoutForScroll"
            android:layout_width="match_parent"
            android:layout_height="100dp"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/header"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="23dp"
                android:gravity="center"
                android:text="Welcome To Ride Count"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#1E90FF"
                android:textStyle="bold" >
            </TextView>

            <RelativeLayout
                android:id="@+id/layoutTextViews_one"
                android:layout_width="280dp"
                android:layout_height="100dp"
                android:layout_gravity="center"
                android:layout_marginTop="10dp"
                android:background="@drawable/smallbox1" >

                <TextView
                    android:id="@+id/txtCountLabel_one"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginTop="24dp"
                    android:gravity="center"
                    android:text="Rides Ridden:"
                    android:textColor="#1E90FF"
                    android:textStyle="bold" >
                </TextView>

                <TextView
                    android:id="@+id/sum"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="45dp"
                    android:gravity="center"
                    android:text="0000"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textColor="#000000"
                    android:textStyle="bold" >
                </TextView>
            </RelativeLayout>

            <TextView
                android:id="@+id/txtFact"
                android:layout_width="280dp"
                android:layout_height="180dp"
                android:layout_gravity="center"
                android:layout_marginTop="23dp"
                android:background="@drawable/factbox"
                android:gravity="center"
                android:text="Tap For Fact"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#000000"
                android:textStyle="bold" />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:id="@+id/MainActivity"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_marginTop="0dp" >
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:32:34.170

更改广告的`layout_height`and `layout_width`to`wrap_content`以查看是否将其删除。您可能还想尝试使用`SMART_BANNER`选项`asSize`自动调整大小。

该`SMART_BANNER`选项是在 AdMob 6.0 版中添加的。看看[https://developers.google.com/mobile-ads-sdk/docs/admob/smart-banners](https://developers.google.com/mobile-ads-sdk/docs/admob/smart-banners)。使用起来更容易。

```
<com.google.ads.AdView
    xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/ad"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    googleads:adSize="SMART_BANNER"
    googleads:adUnitId="@string/admob_id" /> 
```

我会使用 a `LinearLayout`，因为在这种情况下它更容易一些，但`RelativeLayout`如果你喜欢它们，你仍然可以使用 a 。我们的想法是将 XML 放入`AdView`XML 中，并用于`layout_weight`布局的其余部分来填充视图。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ScrollView
        android:id="@+id/ScrlView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="20dp"
        android:layout_weight="1">
       <!-- ... -->
    </ScrollView>

    <com.google.ads.AdView
        xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/ad"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        googleads:adSize="SMART_BANNER"
        googleads:adUnitId="@string/admob_id" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:26:44.547

ScrollView 和您的 AdView 需要在您的 RelativeLayout 中是对等的。我已经以这种方式实现了你想要的。

```
RelativeLayout
    ScrollView
        LinearLayout
    AdView 
```

# servlets - Servlet - 文件位置

> ID：15746006
> 
> 赞同：1
> 
> 时间：2013-04-01T15:11:30.617
> 
> 标签：servlets, location

我正在使用 Eclipse (Dynamic Web Project) 中的 servlet。我在 Web 内容文件夹中放置了一些图像文件，并带有一个子文件夹 pics。现在有像 pic1.jpg 等图像。

```
 BufferedInputStream bin = new BufferedInputStream(new FileInputStream(new File(location))); 
```

为了检索这些文件，我应该提供什么位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:50:07.017

试试这个

```
ServletContext ctx=getServletContext();
InputStream in = ctx.getResourceAsStream("/pics/pic1.jpg"); 
```

`getResourceAsStream()`要求您从`"/"`代表 Web 应用程序根目录的 a 开始。

# node.js - Socket.IO 在运行时定义命名空间

> ID：15746007
> 
> 赞同：1
> 
> 时间：2013-04-01T15:11:36.707
> 
> 标签：node.js, socket.io

在 socket.IO 中，有两种方式分别向用户发送消息：房间和命名空间。在我的项目中，我需要它们两个 - 命名空间来划分不同应用程序的用户和每个命名空间的房间，用于私人消息和其他特定内容。

直接在运行时创建房间非常容易。但是有可能对命名空间做同样的事情吗？我想做这样的事情：

```
 io.of(*someFunctionToCreateNameSpaceInRuntime*) 
 .on('connection', function (socket) {
     socket.emit(***);
 }); 
```

有非常相似的[问题](https://stackoverflow.com/questions/10004616/has-anyone-successfully-implemented-a-dynamic-namespace-in-node-socket-io)，但 id 现在不起作用。是否可以在连接事件触发之前发送带有参数的*命名空间名称并将其存储在某处？*

感谢您的任何建议。

# postgresql - 消息队列和数据库插入

> ID：15746008
> 
> 赞同：2
> 
> 时间：2013-04-01T15:11:37.487
> 
> 标签：postgresql, message-queue, amazon-sqs

我是消息队列的新手，对它们的功能和用途很感兴趣。我对如何使用它有一个想法，但想知道它是否是这个工具的最佳用途。我有一个应用程序可以拾取和读取电子表格，将数据业务对象转换为数据库存储。我的应用程序需要读取并能够更新数十万条记录，但我遇到了保存这些对象和批量插入数据库的性能问题。

使用消息队列有两个不同的应用程序（一个用于读取电子表格，一个用于存储记录）是否是对消息队列的正确利用？显然，我需要在我的代码中进行一些优化，这将是我的第一步，但想听听那些使用过消息队列的人的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:34:02.817

这不是对队列的不当使用，但是很难判断在您的场景中添加消息队列是否会对您提到的性能问题产生任何影响。我们需要更多信息。

您是否将一条消息添加到队列以告诉进程转换电子表格，并在数据准备好加载时添加第二条消息？或者您是否正在考虑为每个数据记录添加消息？（这可能会很快变得昂贵，并且可能不会提高性能）。

# javascript - jquery 表单验证器未正确显示阿拉伯字母

> ID：15746014
> 
> 赞同：0
> 
> 时间：2013-04-01T15:11:56.520
> 
> 标签：javascript, jquery, validation, arabic

我正在尝试使用 jQuery 表单验证，并且我希望验证文本是阿拉伯语。

问题是，当我在 .js 文件中更改该短语时，它会显示正方形而不是阿拉伯字母。

这是我的 js 文件：

```
$(document).ready(function(){
    // Place ID's of all required fields here.
    required = ["name", "email", "country", "message"];
    // If using an ID other than #email or #error then replace it here
    email = $("#email");
    errornotice = $("#error");
    // The text to show up within a field when it is incorrect
    emptyerror = "Please fill out this field.";
    emailerror = "Please enter a valid e-mail."; 
```

所以我想将最后两行“请填写...”和“请输入...”更改为阿拉伯语。

我已经尝试将此代码：添加`charset=UTF-8`到头部，但仍然无法正常工作。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T22:17:30.807

这也发生在我身上。

然后我意识到我的编辑器使用了另一种编码......

因此，只需将编辑器上的编码更改为 utf-8。

# c# - mono mac osx csharp win 形成 gdi 字体异常但未使用任何 MS 字体

> ID：15746015
> 
> 赞同：0
> 
> 时间：2013-04-01T15:11:58.630
> 
> 标签：c#, macos, mono, winforms-interop

我们正在尝试在我们重写的 Mac OSX 上运行 C# Win Form 应用程序。在以前的版本中，所有与 win form 相关的东西都可以正常工作，但现在我们在 Mac 上得到了：

```
Unhandled Exception:
System.TypeInitializationException: An exception was thrown by the type initializer for System.Windows.Forms.WindowsFormsSynchronizationContext ---> System.TypeInitializationException: An exception was thrown by the type initializer for System.Windows.Forms.ThemeEngine ---> System.ArgumentException: The requested FontFamily could not be found [GDI+ status: FontFamilyNotFound]
  at System.Drawing.GDIPlus.CheckStatus (Status status) [0x00000] in <filename unknown>:0 
  at System.Drawing.FontFamily..ctor (GenericFontFamilies genericFamily) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Drawing.FontFamily:.ctor (System.Drawing.Text.GenericFontFamilies)
  at System.Drawing.FontFamily.get_GenericSansSerif () [0x00000] in <filename unknown>:0 
  at System.Drawing.Font.CreateFont (System.String familyName, Single emSize, FontStyle style, GraphicsUnit unit, Byte charSet, Boolean isVertical) [0x00000] in <filename unknown>:0 
  at System.Drawing.Font..ctor (System.String familyName, Single emSize, FontStyle style, GraphicsUnit unit, Byte gdiCharSet, Boolean gdiVerticalFont) [0x00000] in <filename unknown>:0 
  at System.Drawing.Font..ctor (System.String familyName, Single emSize, System.String systemName) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Drawing.Font:.ctor (string,single,string)
  at System.Drawing.SystemFonts.get_DefaultFont () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Theme..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ThemeWin32Classic..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ThemeVisualStyles..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ThemeEngine..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Windows.Forms.SystemInformation.get_MenuAccessKeysUnderlined () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control..ctor () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Windows.Forms.Control:.ctor ()
  at System.Windows.Forms.WindowsFormsSynchronizationContext..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Windows.Forms.Control..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ScrollableControl..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ContainerControl..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Form..ctor () [0x00000] in <filename unknown>:0 
  at NewWorldStudio.StartupForm..ctor () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) NewWorldStudio.StartupForm:.ctor ()
  at NewWorldStudio.Program.Main () [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: An exception was thrown by the type initializer for System.Windows.Forms.WindowsFormsSynchronizationContext ---> System.TypeInitializationException: An exception was thrown by the type initializer for System.Windows.Forms.ThemeEngine ---> System.ArgumentException: The requested FontFamily could not be found [GDI+ status: FontFamilyNotFound]
  at System.Drawing.GDIPlus.CheckStatus (Status status) [0x00000] in <filename unknown>:0 
  at System.Drawing.FontFamily..ctor (GenericFontFamilies genericFamily) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Drawing.FontFamily:.ctor (System.Drawing.Text.GenericFontFamilies)
  at System.Drawing.FontFamily.get_GenericSansSerif () [0x00000] in <filename unknown>:0 
  at System.Drawing.Font.CreateFont (System.String familyName, Single emSize, FontStyle style, GraphicsUnit unit, Byte charSet, Boolean isVertical) [0x00000] in <filename unknown>:0 
  at System.Drawing.Font..ctor (System.String familyName, Single emSize, FontStyle style, GraphicsUnit unit, Byte gdiCharSet, Boolean gdiVerticalFont) [0x00000] in <filename unknown>:0 
  at System.Drawing.Font..ctor (System.String familyName, Single emSize, System.String systemName) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Drawing.Font:.ctor (string,single,string)
  at System.Drawing.SystemFonts.get_DefaultFont () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Theme..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ThemeWin32Classic..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ThemeVisualStyles..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ThemeEngine..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Windows.Forms.SystemInformation.get_MenuAccessKeysUnderlined () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Control..ctor () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Windows.Forms.Control:.ctor ()
  at System.Windows.Forms.WindowsFormsSynchronizationContext..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Windows.Forms.Control..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ScrollableControl..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.ContainerControl..ctor () [0x00000] in <filename unknown>:0 
  at System.Windows.Forms.Form..ctor () [0x00000] in <filename unknown>:0 
  at NewWorldStudio.StartupForm..ctor () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) NewWorldStudio.StartupForm:.ctor ()
  at NewWorldStudio.Program.Main () [0x00000] in <filename unknown>:0 
```

在 Google 上很难找到解决方案。根据堆栈跟踪中的 get_GenericSansSerif 方法，它似乎与 GDI+ 和 Sans Serif 字体有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:20:52.363

可能是由于 Mono 设置不当造成的。尝试再次安装并检查您是否在 OS X 上安装了 X11。

# java - StringBuffer 何时将字符串添加到字符串池中？

> ID：15746018
> 
> 赞同：0
> 
> 时间：2013-04-01T15:12:10.240
> 
> 标签：java, stringbuffer

当我用 定义`StringBuffer`变量时`new`，该字符串不会添加到字符串池中，对吗？

现在，当我定义另一个`StringBuffer`但不使用 时`new`，我将其定义为`StrPrev.append("XXX")`突然之间。（或者我的大学老师这么说）。这是为什么？是什么让这个字符串突然变成了一个字符串池字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:33:08.903

> 当我用 new 定义一个 StringBuffer 变量时，这个字符串不会添加到字符串池中，对吧？

创建 a`StringBuffer`根本不会创建 a `String`。

> 现在，当我定义另一个 StringBuffer 但不使用 new 时，我突然将其定义为 StrPrev.append("XXX") 。

这完全是困惑：

*   当你打电话时，`strBuff.append("XXX")`你不是在定义一个新的`StringBuffer`. 您正在更新引用的现有`StringBuffer`内容。`strBuff`具体来说，您正在将额外的字符添加到缓冲区的末尾。

*   你只有在你打电话`String`的时候才会得到一个新的。`StringBuffer``strBuff.toString()`

*   仅在调用 时将 a 添加到`String`字符串池中。如果池中还没有相等的字符串，那只会将字符串添加到池中。`intern()``String`

*   表示文字的 String 对象`"XXX"`是字符串池的成员。但这种情况发生在加载类时（即字符串被添加到池中），而不是在您执行`append`调用时。

（如果您的老师告诉您 StringBuffer 将字符串放入 Java 字符串池中，他/她就错了。但是，鉴于您的描述相当混乱，我怀疑您*实际上*听错了或误解了您的老师真正所说的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:18:30.347

"XXX" in`StrPrev.append("XXX")`是在类加载时（包含代码的类的类加载时）被实习的字符串文字。

“XXX”不是由`StringBuffer`.

从[JLS 第 3.10.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> 此外，字符串字面量总是引用 String 类的同一个实例。这是因为字符串文字 - 或者更一般地说，作为常量表达式的值的字符串（第 15.28 节） - 是“内部的”，以便共享唯一的实例

从[JLS 第 12.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)：

> 加载包含字符串文字（第 3.10.5 节）的类或接口可能会创建一个新的字符串对象来表示该文字。（如果先前已实习过相同的字符串（第 3.10.5 节），则可能不会发生这种情况。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:13:40.060

其实你的老师指的是`XXX`。转到 StringPool 因为所有用 java 程序编写的字符串文字在执行时都转到 StringPool ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T15:25:59.773

`buf.append("XXX")`然后是 buf.toString()，然后将其返回`string`到池中。池就位后，只会[分配](http://divnull.com/lward/writing/stringpool.html)`StringBuffer`一个对象。

# xaml - VisualStateManager 焦点状态在焦点后保持

> ID：15746021
> 
> 赞同：1
> 
> 时间：2013-04-01T15:12:15.397
> 
> 标签：xaml, winrt-xaml, visualstatemanager

我有一个文本框的 WinRT 应用程序控件模板。当控件处于焦点时，我希望背景变为灰色。下面的代码执行此操作，但是当控件失去焦点时，灰色背景仍然存在。当控件失去焦点时，如何使背景恢复正常？

```
<ControlTemplate x:Key="GreyFocusTextBox" TargetType="TextBox">
    <Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="PointerOver" />
                <VisualState x:Name="Pressed" />
                <VisualState x:Name="Disabled" />
            </VisualStateGroup>
            <VisualStateGroup x:Name="FocusedStates">
                <VisualState x:Name="Focused">
                    <Storyboard>
                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement" />
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Unfocused" />
                <VisualState x:Name="PointerFocused" />
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Border x:Name="BackgroundElement" Background="Gray" Grid.ColumnSpan="2" Margin="{TemplateBinding BorderThickness}" Opacity="0" />
        <Border x:Name="BorderElement" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Grid.ColumnSpan="2"/>
        <ScrollViewer x:Name="ContentElement" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Margin="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled"/>
    </Grid>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:40:10.773

似乎文本框没有进入未聚焦状态，所以我只是重命名`Unfocused`并`Normal`删除了`Storyboard`它并且它起作用了。下面的代码对我有用。

```
<ControlTemplate x:Key="GreyFocusTextBox" TargetType="TextBox">
    <Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="FocusedStates">
                <VisualState x:Name="Focused">
                    <Storyboard>
                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement" />
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Normal"/>
                <VisualState x:Name="PointerFocused" />
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Border x:Name="BackgroundElement" Background="Gray" Grid.ColumnSpan="2" Margin="{TemplateBinding BorderThickness}" Opacity="0" />
        <Border x:Name="BorderElement" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Grid.ColumnSpan="2"/>
        <ScrollViewer x:Name="ContentElement" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Margin="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled"/>
    </Grid>
</ControlTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:19:19.160

```
 <VisualStateGroup x:Name="FocusedStates">
            <VisualState x:Name="Focused">
                <Storyboard>
                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement" />
                </Storyboard>
            </VisualState>
            <VisualState x:Name="Unfocused">
                <Storyboard>
                    <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement" />
                </Storyboard>
            </VisualState>
            <VisualState x:Name="PointerFocused" />
        </VisualStateGroup> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T15:24:38.240

你应该改变状态 Unfocused

# c# - 使用 MonoTouch 和 CoreGraphics 渲染自定义字体

> ID：15746024
> 
> 赞同：0
> 
> 时间：2013-04-01T15:12:26.257
> 
> 标签：c#, xamarin.ios, core-graphics

我需要能够在 CGContext 中绘制自定义字体，但是当我更改选择字体的方式时，不会显示字体。

```
//Works
    protected void DrawCenteredTextAtPoint(CGContext context, float centerX, float y, string text, int textHeight)
    {
        context.SelectFont("Helvetica-Bold", textHeight, CGTextEncoding.MacRoman);
        context.SetTextDrawingMode(CGTextDrawingMode.Invisible);
        context.ShowTextAtPoint(centerX, y, text, text.Length);
        context.SetTextDrawingMode(CGTextDrawingMode.Fill);
        context.ShowTextAtPoint(centerX - (context.TextPosition.X - centerX)/2, y, text, text.Length);
    }

//Does not work
protected void DrawCenteredTextAtPoint(CGContext context, float centerX, float y, string text, int textHeight)
{
    var fontPath = NSBundle.MainBundle.PathForResource("COOPBL", "ttf", "fonts", "");
    var provider = new CGDataProvider(fontPath);
    var font = CGFont.CreateFromProvider(provider);
    context.SetFont(font);
    context.SetTextDrawingMode(CGTextDrawingMode.Invisible);
    context.ShowTextAtPoint(centerX, y, text, text.Length);
    context.SetTextDrawingMode(CGTextDrawingMode.Fill);
    context.ShowTextAtPoint(centerX - (context.TextPosition.X - centerX)/2, y, text, text.Length);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:01:09.467

这样可行：

```
 protected void DrawCenteredTextAtPoint(CGContext context, float centerX, float y, string text, int textHeight)
    {
        //          var fontPath = NSBundle.MainBundle.PathForResource("COOPBL", "ttf", "fonts", "");
        //          var provider = new CGDataProvider(fontPath);
        //          var font = CGFont.CreateFromProvider(provider);

        //context.SelectFont("Helvetica-Bold", textHeight, CGTextEncoding.MacRoman);
        //var cgFont = CGFont.CreateWithFontName("Cooper Black");
        //context.SetFont(cgFont);

        context.SelectFont("Cooper Black", textHeight, CGTextEncoding.MacRoman);

        context.SetTextDrawingMode(CGTextDrawingMode.Invisible);
        context.ShowTextAtPoint(centerX, y, text, text.Length);
        context.SetTextDrawingMode(CGTextDrawingMode.Fill);
        context.ShowTextAtPoint(centerX - (context.TextPosition.X - centerX)/2, y, text, text.Length);
    } 
```

我如何使用它

```
...

public class CustomView: UIView
{
    public CustomView ()
    {
    }

    public override void Draw (System.Drawing.RectangleF rect)
    {
        base.Draw (rect);

        var context = UIGraphics.GetCurrentContext();
        DrawCenteredTextAtPoint(UIGraphics.GetCurrentContext(), 50, 10, "adsasdasd", 20);
    }

...

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        v = new CustomView();
        v.BackgroundColor = UIColor.Red;
        View.AddSubview(v);
        v.Frame = new RectangleF(0, 100, 320, 100);

... 
```

`Cooper Black`字体看起来如何：

![在此处输入图像描述](https://i.stack.imgur.com/p2jJR.png)

请注意，您应该正确地将字体添加到项目中：

*   将字体文件引用添加到 cproj-file；
*   将字体文件标记`Content`为`Build Action`;
*   [添加对Info.plist 文件](http://fastchicken.co.nz/uploads/2012/09/info-plist-settings.png)的字体文件引用。

注： http: [//fastchicken.co.nz/2012/09/07/using-fonts-in-a-monotouch-app/](http://fastchicken.co.nz/2012/09/07/using-fonts-in-a-monotouch-app/)。

# javascript - 调用服务器端方法的 Javascript 函数不起作用

> ID：15746025
> 
> 赞同：0
> 
> 时间：2013-04-01T15:12:28.543
> 
> 标签：javascript, asp.net, ascx

我正在尝试通过 javascript 函数在 ascx 页面中调用服务器端方法。此方法在 aspx 页面中有效。它似乎没有调用 javascript 函数，但隐藏按钮确实调用了服务器端方法。

```
<div runat="server">
<script type="text/javascript">

     function WebDatePicker_DayChange(sender, eventArgs)
     {
        document.getElementById("HiddenField3").value = eventArgs.get_value();
        var btn = document.getElementById("Button2");
        btn.click();
    }
 </script></div>

<ig:WebDatePicker runat="server" ID="WebDatePicker1" DropDownCalendarID="webMonthCalendar" DisplayModeFormat="MM/dd/yyyy" EditModeFormat="MM/dd/yyyy" EditMode="CalendarOnly" Nullable="False" AlwaysInEditMode="False" HorizontalAlign ="Center" >                
                    <ClientSideEvents  ValueChanged="WebDatePicker_DayChange" ></ClientSideEvents>             
                </ig:WebDatePicker>

                 <ig:WebMonthCalendar runat="server" ID="webMonthCalendar" Culture="en-us" FooterContent="Today: {0:d}"
                    EnableWeekNumbers="false"
                    ChangeMonthToDateClicked="true" 
                    EnableMonthDropDown="True"  
                    EnableYearDropDown="True">
                </ig:WebMonthCalendar>     
                <input type="button" id="Button2" style="display:none" runat="server"  onserverclick="WebDatePicker_DayChange" />
                <asp:HiddenField ID="HiddenField3" runat="server" Value=""  /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:31:22.630

要触发该方法，您需要运行以下 JavaScript 代码：

```
__doPostBack('Button2','') 
```

替换`btn.click();`为上面的代码。

这是一个 Asp.Net 生成的方法[[docs]](http://wiki.asp.net/page.aspx/1082/)

# c++ - 对实例的二维数组进行分组

> ID：15746026
> 
> 赞同：0
> 
> 时间：2013-04-01T15:12:35.007
> 
> 标签：c++, optimization, 2d-games

我对此有一个可行的解决方案，尽管我相信必须有一个更好的实现。简而言之，问题是这样的：

我正在开发一个 connect>=3，宝石风格的益智游戏。当“板”的状态发生变化时，我将所有部分分组，以便如果它们水平或垂直“连接”，它们共享一个 ID。这就是我目前的做法：

[伪]

```
for all( array object* )
{
    if !in_a_group() check_neighbours( this )
}

void check_neighbours( ID )
{
    if ( check_is_same_type( left ) )
    { 
        if !in_a_group() this.ID = ID ; check_neighbours( ID )
        else if( in_a_group ) change_IDs(this.ID, ID ) 
    }
    same for right ...
    up ...
    down ...     
} 
```

那是我所做的一个非常肮脏的伪版本。我递归调用 check_neighbours，将第一个分支的 ID 向前传递（我使用这个指针作为 ID，而不是生成一个）。

如果我发现一个连接的具有不同 ID 的片段，我会用新 ID 覆盖具有该 ID 的所有片段（我在这里有一个 ASSERT 因为它实际上不应该发生。到目前为止还没有进行大量测试）

除非该作品没有 ID，否则我不会在原始分支检查_neighbours。

这工作得很好，虽然我的伪可能缺少一些小逻辑。我的问题是它有可能使用许多分支（这可能是我正在处理的硬件的问题）。我已经在这个问题上工作了很长时间，以至于我看不到另一个解决方案。有没有感觉到你错过了一些非常明显的东西？

我也是stackoverflow的新手，对编程相当陌生，任何关于礼仪等的建议都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:27:11.787

> 你会如何建议避免递归？

据我了解，您的算法基本上是一个带有小扭曲的“洪水填充”。

无论如何，为了避免递归，您需要分配数组来存储未处理项目的坐标并使用队列或先进先出。因为您知道网格的尺寸（并且因为它是宝石风格的（？）游戏，所以您应该能够在几乎任何地方预先分配它。

任何洪水填充类型递归算法的伪代码。

```
struct Coord{
    int x, y;
}

typedef std::queue<Coord> CoordQueue;

bool validCoord(Coord coord){
    return (coord.x >= 0) && (coord.y >= 0) 
        && (coord.x < boardSizeX) && (coord.y < boardSizeY);
}

bool mustProcessCoord(Coord coord);

void processAll(){
     CoordQueue coordQueue;
     Coord startPoint = Coord(0, 0);
     coordQueue.pushBack(startPoint);

     while (!coordQueue.empty()){
         const Coord &curCoord = coordQueue.front();
         //do something with current coordinates.
         processCoord(curCoord);

         const int numOffsets = 4;
         const int offsets[numOffsets][2] = {{-1, 0}, {0, -1}, {1, 0}, {0, 1}};
         for (int offsetIndex = 0; offsetIndex < numOffsets; offsetIndex++){
              Coord neighborCoord = Coord(curCoord.x + offsets[offsetIndex][0],
                    curCoord.y + offsets[offsetIndex][1]); 
              if (!isValidCoord(neighborCoord) || !mustProcessCoord(neighborCoord))
                  continue;
              coordQueue.push_back(neighborCoord);
         }

         coordQueue.pop_front();
     }
} 
```

看 ？没有递归，只是一个循环。几乎任何递归函数都可以展开成类似的东西。

如果您的底层平台受到限制并且您没有 std::queue，请改用数组（实现为数组的环形缓冲区可以像 fifo 队列一样工作）。因为你知道板子的大小，你可以预先计算数组的大小。其余的应该很容易。

# javascript - 即使在使用 done() 函数之后，LinkedIn 按钮也会出现延迟？

> ID：15746030
> 
> 赞同：1
> 
> 时间：2013-04-01T15:12:39.867
> 
> 标签：javascript, jquery, wordpress, linkedin, social

在我看来，LinkedIn 按钮与其他按钮相比总是表现出一种奇怪的态度。

这次的问题是幻影出现的延迟，即使在使用了 done() 函数之后：

```
 function CreateNewsocial(str)
    {
            $(".dd_outer").fadeOut("slow");

                CreateNewLikeButton(str);

            $.when(CreateNewTweetButton(str),CreateNewPlus1Button(str),CreateNewLinkedinButton(str),CreateNewSuButton(str)).done(function(){

                      $(".dd_outer").fadeIn('slow');
                       });

    } 
```

在哪里：

*   dd_outer 是社交按钮的包装 div。
*   `CreateNewLikeButton()`, `CreateNewTweetButton()`, `CreateNewPlus1Button()` `CreateNewLinkedinButton()`和 `CreateNewSuButton()`是通过 Ajax 加载另一个 Wordpress 帖子时动态更新社交按钮的函数。`str`是传递的参数，包含post的ID。

一切正常，除了 LinkedIn 按钮。为方便起见，CreateNewLinkedinButton() 代码为：

```
function CreateNewLinkedinButton(str)
        {

            var elem3 = $(document.createElement("script"));
            elem3.attr("type","IN/Share");
            elem3.attr("data-url","http://website/Arra2issia/"+str+"/");    
            elem3.attr("data-counter", "top");

             $("#linkedin").empty().append(elem3);

return $.getScript("http://platform.linkedin.com/in.js?async=true", function() {
    IN.init();
  });
        } 
```

和 HTML 是：

```
<div id="linkedin"><script type="IN/Share" data-url="<?php the_permalink();?>" data-counter="top"></script></div> 
```

我已经发布过：[不要显示社交按钮（通过 jquery 加载），直到它们都完全加载](https://stackoverflow.com/questions/15733586/do-not-show-social-buttons-loaded-via-jquery-till-they-all-are-completely-load)并获得对除 LinkedIn 之外的所有社交按钮都有效的帮助。

提前感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:31:44.980

我不知道如何表达：但问题自己解决了，没有改变任何东西。

也许这是LinkedIn的问题。

# knockout.js - 混合 Typescript、Knockout、Amplify 和 RequireJs 时的“this”关键字

> ID：15746031
> 
> 赞同：1
> 
> 时间：2013-04-01T15:12:41.227
> 
> 标签：knockout.js, this, typescript, amplifyjs

我有一个 mvc 应用程序，我在其中使用 TypeScript 编写客户端代码，并使用了几个著名的 javascript 库，包括 knockout、amplifyjs 和 requirejs。我遇到了一种情况，即预期的行为不是发生的。

```
export class OrganizationOverviewViewModel{

    openedAssessments = ko.observableArray();
    availableSurveys = ko.observableArray();

    organizationAgentId = ko.observable();
    organizationName = ko.observable();

    selectedSurvey = ko.observable();

    public addSurvey() {
        if (this.selectedSurvey() === undefined) {
            mh.MessageHub.showError("Please Select a Survey", "what");
        }
        else {
            // we can do the post.
            // get the selected survey
            var surveyId = this.selectedSurvey();
            // call the server to add the survey

            amplify.request("addSurveyToOrganization", {
                "surveyId": surveyId,
                "organizationAgentId": this.organizationAgentId()
            },
            function (data) {
                var context = ko.contextFor($('#mainContent')[0]).$data;
                context.openedAssessments.push({ surveyId: data.SurveyId, SurveyName: data.SurveyName, NumberOfResponses: data.ResponseCount });
                context.availableSurveys.remove(function (item) { return item.SurveyId == surveyId; });
            });
        }
    } 
```

}

问题出在 addSurvey() 中。在放大请求中，我希望“this”关键字仍指向该类的实例。相反，它指向整个窗口。我有一个解决方法，即使用敲除从 DOM 中获取上下文，但这似乎不是一个好主意。

有没有更好的方法来使用打字稿来处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T03:25:22.893

在 Typescript 中，“this”关键字遵循 javascript 语义，而不是像 C# 这样的 OO 语言的语义......（现在？）

“this”正确指向对象的唯一地方是通过构造函数。所以你需要这样写：

```
export class OrganizationOverviewViewModel{

    public addSurvey;

    constructor() {
        this.addSurvey = () => {
           // you can safely use 'this' in here
           ...
        }
    }
    :
} 
```

**编辑：**新版本（0.9.1）允许您将“this”用于 lambda 字段初始值设定项（**NOT 函数**）。因此，您可以使用以下内容转换为上面的代码。

```
export class OrganizationOverviewViewModel{

    public addSurvey = () => {
        // you can safely use 'this' in a field initializer
    }

    public badSurvey_dont_use_this() {
        // 'this' is probably not the 'this' you're looking for
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:31:31.267

看看[TypeScript 和 Knockout 绑定到“this”问题 - 需要 lambda 函数吗？](https://stackoverflow.com/questions/13277537/typescript-and-knockout-binding-to-this-issue-lambda-function-needed/13285438#13285438)- 它与雷提到的方法相同，这似乎是正确的

# ios - iOS：向 GameCenter 好友发送礼物

> ID：15746032
> 
> 赞同：1
> 
> 时间：2013-04-01T15:12:44.483
> 
> 标签：ios, messaging, game-center

一些 iOS 应用程序具有向 Game Center 好友发送礼物（在游戏对象/收藏品中）的功能。这是只能使用 Game Center 实现的功能，还是需要自定义在线后端？

回合制比赛可以用于此功能吗？打开与朋友的回合制比赛，在消息中编码礼物对象的定义并在朋友收到后立即关闭比赛？

或者这种方法有问题吗？

# c++ - 如何测试行情数据解析程序

> ID：15746033
> 
> 赞同：0
> 
> 时间：2013-04-01T15:12:46.920
> 
> 标签：c++, performance, fix-protocol

我正在开发一个程序来接收和解析来自交易所的市场数据。在开发过程中测试我的程序的最佳方法是什么？数据是通过多播套接字发送的，但在“完全”测试程序的正确性和性能之前，我无法访问套接字。

目前我想出的测试方法： 1.使用交易所提供的TCP恢复通道（交易所不建议，因为它不是TEST） 2.保存一些二进制格式的数据，然后在本地建立一个组播测试通道模拟实际环境

有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:47:35.427

在您连接到交易所之前，您无法真正测试“性能” - 大多数交易所提供开发连接（有些会为此服务收费） 通常流量水平并不接近生产，但它是测试您的程序的良好环境。我会与您的客户经理核实，以了解如何访问测试环境。

您可以使用预设数据*验证*您的解析器，但其中的任何性能数字实际上都是微基准数字 - 因此需要*大量*盐分。

# ios - 移动动画后uiview不接受触摸

> ID：15746035
> 
> 赞同：0
> 
> 时间：2013-04-01T15:12:54.327
> 
> 标签：ios, objective-c, uiview

我在 UIviewController 边界下方有一个 uiview 位置，我正在从下到上动画它的外观（如操作表）

```
- (IBAction)Button:(id)sender {

   [UIView beginAnimations:nil context:NULL];
   [_pickerView setFrame:CGRectMake(0.0f, self.view.frame.size.height - _pickerView.frame.size.height , 0.0f, 0.0f)];
   [UIView commitAnimations];   
} 
```

在 uiview 出现后没有用户与 view 交互的问题
我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:18:44.520

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.6f];
[_pickerView setFrame:CGRectMake(@"As U Want")];
    [UIView commitAnimations];
} 
```

`[UIView setAnimationDuration:0.6f];`这条线非常重要:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:35:43.260

`frame`你的没有`view`宽度或高度。很可能您的组件仍在出现，因为您的视图没有“剪辑子视图”。

你的代码：

```
[_pickerView setFrame:CGRectMake(0.0f, self.view.frame.size.height - _pickerView.frame.size.height , 0.0f, 0.0f)];
//  0.0f, 0.0f <-- width and height. 
```

结果是，您可以看到元素，但不能与它们交互。当我认为我已经完成了这项工作时，我设置了视图的背景颜色，这样我就可以直观地看到框架。

# c# - 如何防止直接访问 ASP.NET MVC 中的图像？

> ID：15746039
> 
> 赞同：0
> 
> 时间：2013-04-01T15:13:11.203
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我需要和这个人一样的东西：

[http://forums.asp.net/t/1507682.aspx](http://forums.asp.net/t/1507682.aspx)

问题是他标记为正确的答案对我不起作用。我正在使用即将迁移到 MVC4 和 Windows Server 2012 的 ASP.NET MVC3。由于安全问题，我想防止直接访问某些图像。我现在担心的不是图像窃取保护，我阅读了几篇关于如何做到这一点的文章。

如果链接在我的页面上是这样的

```
<img src="/Content/Images/img1.jpg" /> 
```

应该显示图像，但如果直接访问则不会显示：

```
http://mywebsite.com/Content/Images/img1.jpg 
```

由于我们正在谈论图像和访问它的几个人，因此考虑性能问题的解决方案将是我要走的路。

关于如何实施的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:16:10.703

编写一个从磁盘/数据库读取图像并渲染它的 Action 方法。在该操作方法中，您可以检查用户是否被授权并返回适当的图像或“未授权”图像。

```
public class ProductController : Controller
{
  public ActionResult Photo(string id)
  {
   // TO DO:  get image using the unique id passed and render it
  }
} 
```

您可以使用此操作方法的路径作为您的图像路径。

```
<img src="@Url.Action("Photo","Product")/someUniqueIDOfPhotoFromYourDB" /> 
```

与直接从磁盘提供图像相比，这种方法会对性能产生轻微影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T15:26:27.187

您可能想在 MVC 之外思考并[在 IIS 本身中处理热链接](http://www.it-notebook.org/iis/article/prevent_hotlinking_url_rewrite.htm)。IIS 有工具（referer (sic) 标头）来确定图像请求是否似乎来自您的站点内部。

# apache - 在 MAMP 的根目录上添加 .htaccess 文件时出现 500 内部服务器错误

> ID：15746040
> 
> 赞同：0
> 
> 时间：2013-04-01T15:13:12.180
> 
> 标签：apache, .htaccess, localhost, mamp

当我在 MAMP 上将 .htaccess 文件添加到我网站的根目录时，我收到 500 内部服务器错误。我设置了一个虚拟主机，因此可以通过该站点访问该站点，`site.dev`并且我的文件位于`/Users/Dan/Websites/site`. 我的当前目录上方没有任何 .htaccess 文件。起初，我认为这是我的文件内部发生的事情，但我删除了除了注释行之外的所有内容，并且错误仍然存​​在。当我有一个空白文件时，错误就消失了。

**更新：这是错误日志**

```
[Mon Apr 01 11:17:18 2013] [alert] [client 127.0.0.1] /Users/Dan/Websites/site/.htaccess: Invalid command '\xff\xfe#', perhaps misspelled or defined by a module not included in the server configuration 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:25:03.937

`\xff\xfe`是 UTF-16 的[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte-order_mark)。这没有什么问题，但 Apache 似乎根本不支持 BOM。因此，您需要使用不同的编码来保存 .htaccess 文件，可以是单字节编码，也可以是*不带*BOM 的 UTF-8。

# python - 将 matplotlib 图表保存为 .tiff 时保留下标和上标

> ID：15746042
> 
> 赞同：2
> 
> 时间：2013-04-01T15:13:25.200
> 
> 标签：python, matplotlib, tiff

我发现了如何使用如下`$`符号在我的图表标签中创建子和上标：

```
ax.set_ylabel('$kgCO_2e/m^2$') 
```

这适用于创建图表，但是当我将其保存为 .tiff 并尝试将其插入 Word 文档时，它会丢失格式。有没有一种方法可以保留格式？

[第 1877 期](https://github.com/matplotlib/matplotlib/issues/1877)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:37:00.683

这是`matplotlib` [问题 #1877](https://github.com/matplotlib/matplotlib/issues/1877)中的错误。

# java - 为什么我可以使用在我的项目中下载的源代码或 jar？

> ID：15746043
> 
> 赞同：1
> 
> 时间：2013-04-01T15:13:26.420
> 
> 标签：java, maven, jdeveloper

我现在正在尝试使用 Maven 和 JDeveloper 一个星期，但我总是遇到同样的问题。我可以下载并安装扩展并创建新的 Maven 项目。当我打包或编译它们时，我可以看到源代码正在下载并添加到我的本地存储库中，但它们没有添加到我的 .jar 中，除非我在项目中手动将它们添加为 lib，否则我无法在我的项目中使用它们。

如果我尝试将文件夹（下载的 jars 所在的位置）作为 lib 文件夹添加到项目中，它们只会添加为 jar 并且我无法使用它们。

还有其他方法可以从 JDeveloper 更新我的依赖项吗？我怎样才能将它们正确地集成到我的项目中以便我可以使用它们？是否有更新的动手实践可以解决我的问题？我究竟做错了什么？是否有模板项目可以下载？我希望我能很好地解释我的问题......

# entity-framework - 一对多，具有来自同一类的两个属性

> ID：15746044
> 
> 赞同：0
> 
> 时间：2013-04-01T15:13:31.243
> 
> 标签：entity-framework, entity-framework-5

我有以下类，我真的很想在 EF 中正确映射：

```
internal class Wallet : EntityFrameworkEntity
{
    public Wallet()
    {
        this.Requests = new List<FinancialRequest>();
    }

    public string Name { get; set; }
    public string Description { get; set; }
    public decimal CurrentBalance { get; set; }
    public decimal BlockedBalance { get; set; }

    public virtual ICollection<Paper> Papers { get; set; }

    public virtual ICollection<FinancialRequest> Requests { get; set; }

    public virtual User Manager { get; set; }

}

internal class Request : EntityFrameworkEntity
{
    public Int64 UserId { get; set; }
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
    public RequestStatus Status { get; set; }

    public virtual User User { get; set; }
}

internal class FinancialRequest : Request
{
    public DateTime ValidUntil { get; set; }
    public FinancialRequestType RequestType { get; set; }
    public int Quantity { get; set; }
    public bool UseMarketValue { get; set; }
    public decimal? Value { get; set; }

    public virtual Wallet Source { get; set; }
    public virtual Wallet Destination { get; set; }
    public virtual Team Team { get; set; }
} 
```

我使用的是 Code First，所以这是我映射这些类的方法：

```
 modelBuilder.Entity<Wallet>()
                    .HasMany(x => x.Requests)
                    .WithOptional();

        modelBuilder.Entity<Wallet>()
                    .HasMany(x => x.Papers)
                    .WithOptional(x => x.Owner)
                    .Map(configuration => configuration.MapKey("OwnerId"));

        modelBuilder.Entity<Wallet>()
                    .HasMany(x => x.Requests)
                    .WithOptional();

        modelBuilder.Entity<Request>().ToTable("Requests");
        modelBuilder.Entity<FinancialRequest>().ToTable("FinancialRequests");

        modelBuilder.Entity<FinancialRequest>()
                    .HasRequired(x => x.Team)
                    .WithOptional()
                    .Map(configuration => configuration.MapKey("TeamId"));

        modelBuilder.Entity<FinancialRequest>()
                    .HasOptional(x => x.Destination)
                    .WithOptionalDependent()
                    .Map(configuration => configuration.MapKey("DestinationWalletId"));

        modelBuilder.Entity<FinancialRequest>()
                    .HasRequired(x => x.Source)
                    .WithRequiredDependent()
                    .Map(configuration => configuration.MapKey("SourceWalletId")); 
```

如果我按照现在的方式保留此映射，我的数据库架构将如下所示：

![错误的数据库架构](https://i.stack.imgur.com/2tyJZ.png)

如果你仔细看，你会发现有一个名为“Wallet_Id”的列，它不应该存在。此列仅存在，因为 Wallet 类具有“Requests”集合。如果我从列中删除集合就会消失，但我需要这个集合！它代表了类之间的重要关系。我不需要的是错误生成的数据库中的第三列。

有谁知道我该如何避免这种情况？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:00:06.873

导致冗余外键列的问题`Wallet_Id`是 EF 不知道`Wallet.Requests`集合是否是`FinancialRequest.Source`or的反向导航属性`FinancialRequest.Destination`。因为它无法在两个 EF 假定`Wallet.Requests`根本没有反向导航属性之间做出决定。结果是与第三个 FK 的第三个冗余一对多关系。

基本上你有三个选择：

*   删除`Wallet.Requests`集合，第三个关系将消失（正如您已经注意到的）。但你不希望那样。

*   明确告诉 EF 是否`Wallet.Requests`具有`Source` **或** `Destination`作为反向导航属性：

    ```
    // Remove the modelBuilder.Entity<Wallet>().HasMany(x => x.Requests) mapping

    modelBuilder.Entity<FinancialRequest>()
                .HasOptional(x => x.Destination)
                .WithMany(x => x.Requests)
                .Map(config => config.MapKey("DestinationWalletId"));

    modelBuilder.Entity<FinancialRequest>()
                .HasRequired(x => x.Source)
                .WithMany()
                .Map(config => config.MapKey("SourceWalletId")); 
    ```

    在两者之一中使用`WithMany(x => x.Requests)`（`Destination`在示例中，它也可以是`Source`），但**不能在两者中使用**。

*   引入第二个集合`Wallet`并将这两个集合分别映射到`Source`和`Destination`：

    ```
    internal class Wallet : EntityFrameworkEntity
    {
        public Wallet()
        {
            this.SourceRequests = new List<FinancialRequest>();
            this.DestinationRequests = new List<FinancialRequest>();
        }

        // ...

        public virtual ICollection<FinancialRequest> SourceRequests { get; set; }
        public virtual ICollection<FinancialRequest> DestinationRequests { get; set; }
    } 
    ```

    映射：

    ```
    // Remove the modelBuilder.Entity<Wallet>().HasMany(x => x.Requests) mapping

    modelBuilder.Entity<FinancialRequest>()
                .HasOptional(x => x.Destination)
                .WithMany(x => x.DestinationRequests)
                .Map(config => config.MapKey("DestinationWalletId"));

    modelBuilder.Entity<FinancialRequest>()
                .HasRequired(x => x.Source)
                .WithMany(x => x.SourceRequests)
                .Map(config => config.MapKey("SourceWalletId")); 
    ```

顺便说一句：不应该*两者都* `Source`需要`Destination`吗？如果是，您可以替换`HasOptional`by，`HasRequired`但您必须附加`WillCascadeOnDelete(false)`到两个映射中的至少一个，以避免多个级联删除路径异常。

# php - 正确的 SQL 到 Laravel ORM

> ID：15746047
> 
> 赞同：2
> 
> 时间：2013-04-01T15:13:40.637
> 
> 标签：php, laravel

我是 Laravel 的新手，我有一个适当的 SQL 语句（适用于 PHPMyAdmin 和 Navicat），我可以得到结果。我想要做的是，我想在 Laravel 中使用这些语句而不使用 DB::raw();。

任何帮助将不胜感激。

```
 Select 
        rmm.message,
        count(rmm.message) as number, 
        receivedTime as time

    FROM
           rcs rcs, rmm rmm
    WHERE
          rmm.smsCid =  rcs.smsCid AND  rmm.receivedTime LIKE '%2013-04-01%' AND length('rmm.message') > '3'

    GROUP BY(rmm.message) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:24:06.573

或者，您可以使用[Fluent Query Builder](http://laravel.com/docs/database/fluent#where)。这是我的尝试，当然没有检查，因为我手头没有你的数据结构。希望足以让你开始：

```
DB::table('rcs') // SELECT FROM rcs
    ->join('rmm', 'rmm.smsCid', '=', 'rcs.smsCid') // Simple INNER join
    ->where('rmm.receivedTime', 'LIKE', '%2013-04-01%')
    ->where(DB::raw('LENGTH(rmm.message)'), '>', 3)
    ->get(array(DB::raw('COUNT(rmm.message)'), 'rmm.message', 'receivedTime')); // Get only the columns you want 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:18:12.943

您可以使用它[`DB::query()`](http://laravel.com/docs/database/raw)来运行您的查询。[这将调用活动数据库连接](http://laravel.com/api/source-class-Laravel.Database.Connection.html#169)上的查询方法。

# html - 居中对齐 ul 元素

> ID：15746048
> 
> 赞同：3
> 
> 时间：2013-04-01T15:13:41.160
> 
> 标签：html, css

我正在尝试将 aa ul 元素相对于其上方的标题居中对齐。ul 元素包含一个联系信息列表（电子邮件、Twitter、rss 等）。这是我到目前为止所拥有的：

![未对齐](https://i.stack.imgur.com/wl8AO.png)

这是通过以下代码实现的

**html**

```
<html>
<head>
    <meta charset="utf-8" />
    <title>Jing Xue - Portfolio</title>
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link href='http://fonts.googleapis.com/css?family=Delius+Swash+Caps' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Playfair+Display+SC:700' rel='stylesheet' type='text/css'>
</head>
<body>

<div class="header">
    <div class="wrapper">
    <h1>Portfolio of...</h1>    
    <h2>Jing Xue</h2>
    <ul class="intouch">
        <li class="twitter"><a href="">Twitter</a></li>
        <li class="rss"><a href="">RSS</a></li>
        <li class="email"><a href="">Email</a></li>
    </ul>
    </div>
</div>
</body> 
```

**css**

```
body {
    background-color: rgb(255,255,255);
    color: rgb(59,67,68);
    margin: 0;
    padding: 0;
    font: 1em "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Verdana, Tahoma, sans-serif;
}

h1, h2, h3 {
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.wrapper {
    width: 940px;
    margin: 0 auto 0 auto;
}

/* header ------------------------------------------------------------------ */

.header {
    text-align: center;
    padding: 40px 0 0 0;
    margin-bottom: 40px;
}

.header h1, .header h2 {
     margin: 0;
}

.header h1 {
    font-family: 'Delius Swash Caps', cursive;
    font-size: 250%;
    color: rgb(200,50,50);
}

.header h2 {
    font-family: 'Playfair Display SC', serif;
    font-size: 450%;
    color: rgb(59,67,68);
}

.intouch {
    list-style: none;
    margin: 0 auto;
    padding: 0;
    width: 0;
}

.intouch li a:link, .intouch li a:visited {
  padding: 0.5em 0 0.5em 40px;
  display: block;
  font-weight: bold;
  background-repeat: no-repeat;
  background-image: url(../img/sprite-roll.png);
  text-decoration: none;
  color: rgb(136,136,136);
}

.intouch li.twitter a:link, .intouch li.twitter a:visited {
  background-position: 0 6px;
}

.intouch li.twitter a:hover {
  background-position: 0 -90px;
  color: rgb(105,210,231);
}

.intouch li.rss a:link, .intouch li.rss a:visited {
  background-position: 0 -30px;
}

.intouch li.email a:link, .intouch li.email a:visited {
  background-position: 0 -60px;
}

.intouch li.twitter a:hover {
  background-position: 0 -90px;
  color: rgb(105,210,231);
}

.intouch li.rss a:hover {
  background-position: 0 -126px;
  color: rgb(243,134,48);
}

.intouch li.email a:hover {
  background-position: 0 -156px;
  color: rgb(56,55,54);
} 
```

如您所见， .intouch ul 类没有相对于其上方的标题居中对齐。

我可以通过添加`margin-left: 425px;`到 .intouch 类来实现中心对齐。产生这个：

![对齐](https://i.stack.imgur.com/VjmYC.png)

我想知道的是，有没有更好的方法来实现这种中心对齐，而不仅仅是添加左边距（我必须根据 li 中文本的长度进行更改？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:49:31.357

继@Sparky 评论“没有宽度，您无法自动居中某物”。我在 .intouch 中添加了一个宽度：

```
.intouch {
   list-style: none;
   margin: 0 auto;
   padding: 0;
  width: 110px;
} 
```

这完美地集中对齐了 .intouch。随着 .intouch 内容的变化，宽度属性将被重新调整，保持元素居中。

# ado.net - ADO.NET 不同的数据库

> ID：15746050
> 
> 赞同：1
> 
> 时间：2013-04-01T15:13:47.997
> 
> 标签：ado.net

> 程序员需要的是一种以标准、一致和强大的方式概括不同数据系统的方法。在 .NET 应用程序开发领域，Microsoft ADO.NET 满足了这一需求。使用 ADO.NET 的程序员不必担心与不同数据库系统相关的细节，而是专注于数据内容本身。
> 
> *来自“ADO.NET 4 Step by Step”一书*

一直在思考下一个结构。

ADO.NET 可以分为两部分：

**1\. 经典 ADO.NET**（DataSets、DataTables 等）。在经典变体中，有不同的 DB 连接提供程序，每个都将 DB 内部数据转换为 .NET。例如，MS SQL Server 以一种方式保存数据，而 Oracle 以另一种方式保存数据。所以我们可以通过改变提供者来改变数据库。

似乎是灵丹妙药，但所有 ADO.NET 语句都是硬编码的。

对于 MS SQL 前 10 个选择语句是`SELECT TOP 10 ROWS FROM TABLE`，对于 Oracle `SELECT ROWS FROM TABELE WHERE ROWNUM <= 10`。**似乎更改数据库和提供程序无济于事，不是吗？**

**2\. 实体框架。**该框架具有内部独立的语言语句，这些语句被转换为选定的 DB 语句，看起来就像真正的神奇药丸：

LINQ -> 内部 EF 语句 -> MS SQL DB，

LINQ -> 内部 EF 语句 -> Oracle DB。

那么在经典 ADO.NET 中是否可以简单地更改数据库并几乎独立于数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:09:22.783

> 那么在经典 ADO.NET 中是否可以简单地更改数据库并几乎独立于数据库？

当然可以，但要做到这一点，我们必须揭穿这一说法。

> 似乎是灵丹妙药，但所有 ADO.NET 语句都是硬编码的。

这不是 ADO.NET 的副产品 - 这是您的体系结构的副产品。您在错误的位置构建 SQL 语句。您需要具体的、提供者特定的模型，这些模型能够构建在提供者之间不同的语句。这并不像听起来那么糟糕——大多数语句可以利用反射自动生成——这只是特殊情况。

例如，假设我有一个这样的模型：

```
public class Employee
{
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime DateOfBirth { get; set; }
} 
```

假设我想从中生成一个`SELECT`声明。好吧，我首先需要几个属性来告诉我 PK 是什么属性，数据字段是什么属性：

```
[AttributeUsage(AttributeTargets.Property, Inherited = false, AllowMultiple = false)]
internal sealed class DataFieldAttribute : Attribute
{
    public DataFieldAttribute()
    {
    }
}

[AttributeUsage(AttributeTargets.Property, Inherited = false, AllowMultiple = false)]
sealed class PrimaryKeyAttribute : Attribute
{
    public PrimaryKeyAttribute()
    {
    }
} 
```

现在我需要装饰那个类：

```
public class Employee
{
    [PrimaryKey]
    public int ID { get; set; }
    [DataField]
    public string Name { get; set; }
    [DataField]
    public DateTime DateOfBirth { get; set; }
} 
```

现在我只需要一个简单的过程来创建一个`SELECT`语句，所以首先让我们构建一个基础数据模型类：

```
public abstract class DataModelBase
{
    protected string _primaryKeyField;
    protected List<string> _props = new List<string>();

    public DataModelBase()
    {
        PropertyInfo pkProp = this.GetType().GetProperties().Where(p => p.GetCustomAttributes(typeof(PrimaryKeyAttribute), false).Length > 0).FirstOrDefault();
        if (pkProp != null)
        {
            _primaryKeyField = pkProp.Name;
        }

        foreach (PropertyInfo prop in this.GetType().GetProperties().Where(p => p.GetCustomAttributes(typeof(DataFieldAttribute), false).Length > 0))
        {
            _props.Add(prop.Name);
        }
    }

    public virtual string TableName { get { return this.GetType().Name; } }

    public virtual string InsertStatement
    {
        get
        {
            return string.Format("INSERT INTO [{0}] ({1}) VALUES ({2})",
                this.TableName,
                GetDelimitedSafeFieldList(", "),
                GetDelimitedSafeParamList(", "));
        }
    }

    public virtual string UpdateStatement
    {
        get
        {
            return string.Format("UPDATE [{0}] SET {1} WHERE [{2}] = @{2}",
                this.TableName,
                GetDelimitedSafeSetList(", "),
                _primaryKeyField);
        }
    }

    public virtual string DeleteStatement
    {
        get
        {
            return string.Format("DELETE [{0}] WHERE [{1}] = @{1}",
                this.TableName,
                _primaryKeyField);
        }
    }

    public virtual string SelectStatement
    {
        get
        {
            return string.Format("SELECT [{0}], {1} FROM [{2}]",
                _primaryKeyField,
                GetDelimitedSafeFieldList(", "),
                this.TableName);
        }
    }

    protected string GetDelimitedSafeParamList(string delimiter)
    {
        return string.Join(delimiter, _props.Select(k => string.Format("@{0}", k)));
    }

    protected string GetDelimitedSafeFieldList(string delimiter)
    {
        return string.Join(delimiter, _props.Select(k => string.Format("[{0}]", k)));
    }

    protected string GetDelimitedSafeSetList(string delimiter)
    {
        return string.Join(delimiter, _props.Select(k => string.Format("[{0}] = @{0}", k)));
    }
} 
```

现在让我们继承该数据模型：

```
public class Employee : DataModelBase 
```

并且繁荣，现在我可以在需要时随时获取这些语句，并且这些语句现在适用于任何具体的提供者。

然后我将使用[Dapper 来获取数据](http://code.google.com/p/dapper-dot-net/)，因为它`IDbConnection`像您需要的那样利用接口**，**而且速度非常快 - 就这样 - 一个独立于提供商的解决方案，`Employee`如果需要，可以轻松扩展以构建 Oracle 版本。

> 该框架具有内部独立的语言语句，可转换为选定的 DB 语句，看起来像真正的神奇药丸

当然，它可能看起来像一颗神奇的药丸，但在很多方面它确实是一种诅咒。您没有灵活性（至少这并不容易）来构建针对您的需求进行优化的语句以支持高事务和容量数据库。你真是受制于这里的主人。.NET Entity Framework 为您构建了这些语句，我什至无法计算 StackOverflow 上有多少关于如何更改利用 .NET Entity Framework 的 LINQ 语句生成的 SQL 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T12:01:31.877

正盯着玩这个。我知道这是一个旧帖子。感谢上面的例子，这里几乎没有修改。还有很多工作要做

```
using System.Collections.Generic;
using System.Reflection;
using Dapper;
using System.Linq;
using AppAttributes;
using System.ComponentModel.DataAnnotations;
using System;

public abstract class DataModelBase
{
  protected string _primaryKeyField;
  protected List<string> _props = new List<string>();
  protected List<BuildClass> _class = new List<BuildClass>();

public DataModelBase()
{
    PropertyInfo pkProp = this.GetType().GetProperties().Where(p => p.GetCustomAttributes(typeof(KeyAttribute), false).Length > 0).FirstOrDefault();
    if (pkProp != null)
    {
        _primaryKeyField = pkProp.Name;
    }

    foreach (PropertyInfo prop in this.GetType().GetProperties().Where(p => p.GetCustomAttributes(typeof(DataFieldAttribute), false).Length > 0))
    {
        _props.Add(prop.Name);
    }

    foreach(PropertyInfo prop in this.GetType().GetProperties())
    {
        if(prop.GetCustomAttributes<ExcludeAttribute>().Count<ExcludeAttribute>() > 0) continue;
        MaxLengthAttribute maxLength = prop.GetCustomAttribute<MaxLengthAttribute>();
        MinLengthAttribute minLength = prop.GetCustomAttribute< MinLengthAttribute>();
        StringLengthAttribute stringLength = prop.GetCustomAttribute< StringLengthAttribute>();
        RequiredAttribute required = prop.GetCustomAttribute<RequiredAttribute>();
        RangeAttribute range = prop.GetCustomAttribute<RangeAttribute>();
        DataTypeAttribute dataType = prop.GetCustomAttribute<DataTypeAttribute>();
        KeyAttribute key = prop.GetCustomAttribute<KeyAttribute>();

        var kyk = prop.PropertyType;
        //var sss = kyk.FullName.;

        var cl = new BuildClass
        {
            Name = prop.Name,
            MaxLength = maxLength != null
            ? (int?)maxLength.Length
            : stringLength != null
                ? (int?)stringLength.MaximumLength : null,
            MinLength = minLength != null
            ? (int?)minLength.Length
            : stringLength != null
                ? (int?)stringLength.MinimumLength : null,
            PrimaryKey = key != null ? true : false,
            Type = prop.PropertyType.Name.ToString()
        };
        _class.Add(cl);
    }
}

[Exclude]
public virtual string TableName { get { return this.GetType().Name; } }

[Exclude]
public virtual string InsertStatement
{
    get {
        return string.Format("INSERT INTO [{0}] ({1}) VALUES ({2})",
            this.TableName,
            GetDelimitedSafeFieldList(", "),
            GetDelimitedSafeParamList(", "));
    }
}

[Exclude]
public virtual string UpdateStatement
{
    get {
        return string.Format("UPDATE [{0}] SET {1} WHERE [{2}] = @{2}",
            this.TableName,
            GetDelimitedSafeSetList(", "),
            _primaryKeyField);
    }
}

[Exclude]
public virtual string DeleteStatement
{
    get {
        return string.Format("DELETE [{0}] WHERE [{1}] = @{1}",
            this.TableName,
            _primaryKeyField);
    }
}

[Exclude]
public virtual string SelectStatement
{
    get {
        return string.Format("SELECT [{0}], {1} FROM [{2}]",
            _primaryKeyField,
            GetDelimitedSafeFieldList(", "),
            this.TableName);
    }
}

[Exclude]
public virtual string CreateStatement
{
    get {
        return "CREATE TABLE " + TableName+" (" + GetDelimetedCreateParamList(",") 
            + ", CONSTRAINT PK_"
            + _class.Where(c=>c.PrimaryKey).FirstOrDefault().Name 
            + " PRIMARY KEY(" 
            + string.Join(",", _class.Where(c=>c.PrimaryKey).Select(c=>c.Name)) + ") )";
    }
}

protected string GetDelimetedCreateParamList(string delimeter)
{
    return string.Join(delimeter, _class.Select(k => string.Format(" {0} {1} ({2}) {3}" + Environment.NewLine,
        k.Name,
        GetSqlType(k.Type),
        k.MaxLength,
        k.NotNull == true || k.PrimaryKey == true ? "NOT NULL " : ""
        //k.PrimaryKey == true ? "PRIMARY KEY" : ""

        ).Replace("()", "")) 
        );
}

protected string GetSqlType(string type)
{
    switch(type.ToUpper())
    {
        case "INT16":
            return "smallint";
        case "INT16?":
            return "smallint";
        case "INT32":
            return "int";
        case "INT32?":
            return "int";
        case "INT64":
            return "bigint";
        case "INT64?":
            return "bigint";
        case "STRING":
            return "NVARCHAR";
        case "XML":
            return "Xml";
        case "BYTE":
            return "binary";
        case "BYTE?":
            return "binary";
        case "BYTE[]":
            return "varbinary";
        case "GUID":
            return "uniqueidentifier";
        case "GUID?":
            return "uniqueidentifier";
        case "TIMESPAN":
            return "time";
        case "TIMESPAN?":
            return "time";
        case "DECIMAL":
            return "money";
        case "DECIMAL?":
            return "money";
        case "bool":
            return "bit";
        case "bool?":
            return "but";
        case "DateTime":
            return "datetime";
        case "datetime?":
            return "datetime";
        case "double":
            return "float";
        case "double?":
            return "float";
        case "char[]":
            return "nchar";

    }
    return "UNKNOWN";
}

private string CreateField(BuildClass column)
{
    return " " + column.Name + " " + column.Type + " (" + column.MaxLength + ") ";
}

protected string GetDelimitedSafeParamList(string delimiter)
{
    return string.Join(delimiter, _props.Select(k => string.Format("@{0}", k)));
}

protected string GetDelimitedSafeFieldList(string delimiter)
{
    return string.Join(delimiter, _props.Select(k => string.Format("[{0}]", k)));
}

protected string GetDelimitedSafeSetList(string delimiter)
{
    return string.Join(delimiter, _props.Select(k => string.Format("[{0}] = @{0}", k)));
} 
```

}

```
public class BuildClass
{
   public string Name { get; set; }
   public string Type { get; set; }
   public bool PrimaryKey { get; set; }
   //public bool ForeignKey { get; set; }
   public int? MinLength { get; set; }
   public int? MaxLength { get; set; }
   public bool NotNull { get; set; } = false; 
```

}

# ruby-on-rails - Ruby on Rails：如何在多个条件和多个表上使用 find？

> ID：15746053
> 
> 赞同：0
> 
> 时间：2013-04-01T15:13:49.503
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个产品模型和一个类别模型。产品 has_many_and_belongs_to 类别，反之亦然。现在我想使用 Product.find 来搜索 Product.name 和 Product.categories。我尝试了这样的事情，但没有奏效：

```
Product.find(:all, :conditions => ['name LIKE ? or categories LIKE ?', '%#{keyword}%'] 
```

基本上，我正在尝试获取名称为“汽车”或类别为“汽车”的产品的结果。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:24:23.793

```
Product.joins(:categories).where('products.name LIKE ? or categories.name LIKE ?', "%#{keyword}") 
```

如果您使用 rails > 3，我认为这样的事情可以帮助您

# .net - 使用 MVVM 在 WPF 中打印 - 从视图中显示 PrintDialog，但使用 ViewModel 打印

> ID：15746058
> 
> 赞同：0
> 
> 时间：2013-04-01T15:13:57.753
> 
> 标签：.net, wpf, mvvm, printing

首先，看一下[这个问答](https://stackoverflow.com/questions/3875789/print-wpf-visuals-with-mvvm-pattern)。在答案中提供的代码中，没有调用`PrintDialog.Showdialog()`，所以这个例子是使用对话框对象来快速打印一些东西。

但是，它`PrintDialog`本身是一个视图，而要打印的视觉对象是一个视图，所以我认为所有这些都应该放在视图中。视图的数据在 ViewModel 中，要打印的视图应该由视图构建，然后发送到打印机（就像视图将视觉效果发送到屏幕一样）。这是以这种方式思考 MVVM 的正确方法吗？

我正在考虑从视图中向用户显示 PrintDialog，然后将对话框传递到视图模型中进行打印，但这似乎打破了 MVVM 背后的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:32:28.487

首先，版主通常会关闭开放式的讨论，像这样的问题。你应该缩小你的问题，以便可以明确回答。

其次，任何时候你将一些明显面向“视图”的东西传递到你的视图模型中，你就违反了关注点分离。此外，视图模型中任何可能阻止单元测试完成执行的活动都应该是您正在破坏 MVVM 的直接危险信号。在这种情况下，显示并等待输入或处于模态状态的打印对话框将导致单元测试超时或挂起。

解决方案是传递一个服务类，它执行打印网格、显示对话框以及完成工作所需的任何工作。在 MVVM 中，我们大多数人使用依赖注入 (DI) 来执行此操作（我使用 MEF）。您将创建另一个具有相同接口的服务以供您的测试使用，该服务不会阻止执行。在这种情况下，该服务是一个视图层服务，并且不应依赖于视图模型。viewmodel 唯一知道的是它有一个服务接口可以调用，而服务唯一知道的 viewmodel 是它为此交互实现的接口（除非您可以通过它在服务上设置所有需要的数据）自己的界面）。

当您认为您可能对 OOAD 采取了错误的方法时，有关进一步的参考，请参阅[SOLID（面向对象设计）](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。它不是确定的，但它是极好的指导。

# javascript - html-erb 文件中的 javascript 问题

> ID：15746060
> 
> 赞同：1
> 
> 时间：2013-04-01T15:14:04.570
> 
> 标签：javascript, html, ruby-on-rails, erb

我想了解为什么我的 erb 文件中的这个 javascript 不起作用

```
<%= javascript_tag do %>
    var tmp= "<%=j  render :partial  => "layouts/alert_error_message", :object=>@campaign %>";
<% end  %> 
```

我收到这条消息

```
compile error
/var/www/gitorious/app/views/campaigns/new.html.erb:32: syntax error, unexpected ')'
...r.concat(( javascript_tag do ).to_s); @output_buffer.concat ...
/var/www/gitorious/app/views/campaigns/new.html.erb:38: syntax error, unexpected kENSURE, expecting ')' 
```

当我改用`<% javascript_tag do %>`时，渲染方法得到了正确处理，但 tmp 变量未在我的 javascript 中设置（`console.log(tmp)`返回`undefined`）

编辑：我用渲染方法包装了`escape_javascript`它并且它有效，但我仍然不明白为什么它只在我使用时才有效`<% javascript_tag do %>`。不应该与它一起工作`<%= javascript_tag do %>`吗？

# restsharp - 为什么 RestSharp 在反序列化布尔响应时会抛出错误？

> ID：15746061
> 
> 赞同：5
> 
> 时间：2013-04-01T15:14:05.537
> 
> 标签：restsharp

当我像这样在 RestSharp 中提出请求时：

```
var response = client.Execute<bool>(request); 
```

我收到以下错误：

```
"Unable to cast object of type 'System.Boolean' to type 'System.Collections.Generic.IDictionary`2[System.String,System.Object]'." 
```

这是完整的 HTTP 响应，每个 Fiddler：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/json; charset=utf-8
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Mon, 01 Apr 2013 15:09:14 GMT
Content-Length: 5

false 
```

似乎所有的反应都符合犹太教规，那又是什么呢？

另外，如果我通过返回一个简单的值而不是一个对象来对我的 WebAPI 控制器做一些愚蠢的事情并且可以解决我的问题，请随时提出建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T18:29:44.560

RestSharp 只会反序列化有效的 json。`false`不是有效的 json（根据 RFC-4627）。服务器至少需要返回如下内容：

```
{ "foo": false } 
```

你需要一个像下面这样的类来反序列化：

```
public class BooleanResponse
{
    public bool Foo { get; set; }
} 
```

# iphone - 使用 tableviews 显示数组中的数据并获取错误消息“发送到已释放实例的消息”

> ID：15746062
> 
> 赞同：0
> 
> 时间：2013-04-01T15:14:18.147
> 
> 标签：iphone, ios, objective-c, json

我是 iOS 编程新手，在尝试运行我的代码时遇到了这个错误。

```
[UIView _forgetDependentConstraint:]: message sent to deallocated instance 0xe65a0f0 
```

我的项目中有两个视图。第一个视图用于`JSONserialization`填充`tableView`项目。我使用该方法`didSelectRowAtIndexPath`将相应的对象发送到下一个视图。

这些项目在第一个视图中显示得很好，到目前为止一切都很好。但是，当我在其中选择一个项目后尝试加载第二个视图时，`tableView`它会崩溃并返回上面写的错误。

`viewDidLoad`当我在in上设置断点时`spelControllerView.m`，`kategorier`会得到 3 个对象，但是当它尝试对数组进行计数时`kategorier`，会抛出上面的错误消息。

这是我的代码：

`ViewController.m`第一个视图`didSelectRowAtIndexPath`：

```
SpelControllerView *spelControllerView = [[SpelControllerView alloc] initWithNibName:@"SpelControllerView" bundle:nil];    
spelControllerView.title = [[jsonSnippet objectAtIndex:indexPath.row] objectForKey:@"CategoryName"];
spelControllerView.kategorier = [[jsonSnippet objectAtIndex:indexPath.row] objectForKey:@"Games"];
[self.navigationController pushViewController:spelControllerView animated:YES]; 
```

第二视图`SpelViewController.m`

```
 - (void)viewDidLoad{
[super viewDidLoad];
kategorier = [[NSMutableArray alloc] init];
tableViewControl.dataSource = self;
tableViewControl.delegate = self;}
    - (int)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;}

    - (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
return [kategorier count];}

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{static NSString *cellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

cell.textLabel.text = [[kategorier objectAtIndex:indexPath.row] objectForKey:@"Games"];
return cell;} 
```

`SpelControllerView.h`：

```
 @interface SpelControllerView : UIViewController <UITableViewDelegate, UITableViewDataSource> {

UITableView *tableViewControl;
NSMutableArray *kategorier;}
    @property (nonatomic, retain) NSMutableArray *kategorier; 
```

谢谢你的帮助！

更新：

这是我的 Json 文件。

```
 [
      {
        "CategoryName": "Arcade",
        "Games": [
          {
            "GameName": "Arcade game 1"
          },
          {
            "GameName": "Arcade game 2"
          },
          {
            "GameName": "Arcade game 3"
          }
        ], 
      },
      {
        "CategoryName": "FPS ",
        "Games": [
          {
            "GameName": "FPS game 1"
          },
          {
            "GameName": "FPS game 2"
          }
        ],

      },
      {
        "CategoryName": "Strategy",
        "Games": [
          {
            "GameName": "Strategy game 1"
          },
          {
            "GameName": "Strategy game 2"
          }
        ],

      },
      {
        "CategoryName": "C64",
        "Games": [
          {
            "GameName": "C64 game 1"
          },
          {
            "GameName": "C64 game 2"
          }
        ],

      }
    ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:07:03.717

从 SpelViewController 中的 viewDidLoad 中删除以下行：

```
kategorier = [[NSMutableArray alloc] init]; 
```

从第一个 viewController 获取 JSON 数据后，您不应重新初始化 kategorier。

# c# - ASP.NET Web API Help Page Link to a Class Library

> ID：15746066
> 
> 赞同：0
> 
> 时间：2013-04-01T15:14:41.197
> 
> 标签：c#, asp.net-web-api

I have a Web API project (4.5) that has all the DTO objects stored in a separate project for simplicity. I was wondering if there is anyway to link from the [Web API help page](http://www.nuget.org/packages/microsoft.aspnet.webapi.helppage) to these class libraries so that my end users can not only see what they need to send but so that they can see the XML comments on those objects specifying what each property of the object does/means.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:24:10.287

我想您在谈论“WCF Web API 测试客户端”，

AFAIK 它使用 Microsoft 提供的 Microsoft.AspNet.WebApi.WebHost.dll。源不可用，但如果它没有被混淆，你可以在 ILSPY 之后更改它。

除此之外你不能装饰它，通常你只是从 global.asax 重定向页面。

另一种选择：也许你应该自己写。但是你会在属性读取和反射方面做很多工作:) 也许你应该在 CodePlex 和 git 中开始一个项目。

# jquery - 向这个脚本添加淡入淡出？

> ID：15746074
> 
> 赞同：0
> 
> 时间：2013-04-01T15:15:15.020
> 
> 标签：jquery

我如何在这个脚本中添加淡入淡出和淡入淡出？因此，当您按 arrowr 或 arrowl 时，文本将淡出并淡入

当我尝试这样做时，它不会正常工作。

```
var all = $('.img').addClass("passiv");

var i = -1;

$('#arrowl').click(function() {
    ctrlKunder( i = !i ? all.length - 1 : --i );
});
$('#arrowr').click(function() {
    ctrlKunder( i = ++i % all.length );
}).click();

function ctrlKunder(ele) {
    all.removeClass("active").addClass("passiv");
    all.eq(ele).removeClass("passiv").addClass("active");
} 
```

[http://jsfiddle.net/6sMSG/](http://jsfiddle.net/6sMSG/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:21:18.150

不用类来显示和隐藏，直接处理即可：

```
function ctrlKunder(ele) {
    all.fadeOut(1000);
    all.eq(ele).delay(1000).fadeIn(1000);
} 
```

[http://jsfiddle.net/6sMSG/2/](http://jsfiddle.net/6sMSG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:23:03.140

你可以用这个替换函数 ctrlKunder()

```
function ctrlKunder(ele) {
  all.hide().fadeOut();
  all.eq(ele).fadeIn();
} 
```

# android - DownloadListener 不下载图片？

> ID：15746077
> 
> 赞同：1
> 
> 时间：2013-04-01T15:15:29.873
> 
> 标签：android, download, android-webview, listener

在我的 Android 应用程序中，我使用的是带有 downloadListener 的 WebView。我想访问一个 Intranet 站点，当单击一个链接时，使用 mimetype 信息决定如何处理该文件。

问题在于引用图像文件（png、jpg 等）的链接。他们没有触发侦听器，而是在新页面中自动显示文件，跳过侦听器。

我怎样才能改变这种行为？

我的代码没什么特别的...

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    webview = (WebView)findViewById(R.id.webview);
    webview.setWebViewClient(new MiWebClient());
    webview.setDownloadListener(oyenteDescarga);

    //...other onCreate stuff... nothing relevant
}

DownloadListener oyenteDescarga = new DownloadListener()
{
    @Override
    public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) 
    {
      //...I want to use mimetype here, but this listener is not triggered when I click an image, an example:
      Toast.makeText(getBaseContext(), "URL:" + url, Toast.LENGTH_SHORT).show(); //it doesn't show when i click a link referencing an image
    }
}; 
```

MiWebClient 是一个扩展 WebViewClient 的类

```
public class MiWebClient extends WebViewClient
{
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) 
    {
        view.loadUrl(url);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:44:41.650

根据[文档](http://developer.android.com/reference/android/webkit/WebView.html#setDownloadListener%28android.webkit.DownloadListener%29)：

> 注册渲染引擎无法处理内容时要使用的接口，应改为下载。这将替换当前的处理程序。

由于图像可以由渲染引擎处理，因此它不会下载它，因此不会调用下载管理器。

# html - 如何验证此 html？

> ID：15746078
> 
> 赞同：0
> 
> 时间：2013-04-01T15:15:33.670
> 
> 标签：html, validation

我为一家公司设计了一个网站，一切都很好。我决定我不妨验证整个事情，所以我一直在粉碎错误。但是，我遇到了这个我似乎无法弄清楚的问题。
这是错误

```
Line 86, Column 106: Bad value 105px for attribute height on element img: Expected a digit but saw p instead.

Line 86, Column 106: Bad value 216px for attribute width on element img: Expected a digit but saw p instead. 
```

这是行

```
<p class="centeredImage"><img src="images/logo.png" height="105px" width="216px" alt="ATS Logo"><img src="images/header1.png" alt="ATS Header"></p> 
```

我正在使用 centeredImage 的 p 类将两个图像明显居中在 div 中。我认为删除两个“p”标签会解决它，但它仍然给我同样的错误。实际高度和宽度属性似乎有问题。

有人能告诉我这里发生了什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T15:16:55.613

和属性`width`与`height`CSS 无关。他们只是期待一个数字。

链接：[http ://www.w3.org/wiki/HTML/Elements/img](http://www.w3.org/wiki/HTML/Elements/img)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:21:34.010

Height 和 with 默认以**px**表示，将“ **px** ”添加到值会导致验证错误。你应该这样写你的标签：

```
<img src="images/logo.png" height="105" width="216" alt="ATS Logo"> 
```

高度和宽度被解释为像素。如果您需要宽度或高度作为空间的百分比，则需要在数字后添加“％”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:18:09.430

高度和宽度属性不需要“px”存在[http://www.w3schools.com/tags/att_td_height.asp](http://www.w3schools.com/tags/att_td_height.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T15:18:55.557

你用过

```
height="105px" width="216px" 
```

而它应该是

```
height="105" width="216" 
```

不要在那里使用 px ..

# php - PHP MS-SQL 2008 Characters Proplem

> ID：15746088
> 
> 赞同：0
> 
> 时间：2013-04-01T15:16:17.100
> 
> 标签：php

while i am querying from mssql server 2008 with php codes, Turkish characters are not supported. I made the default character set to UTF8 but still it doesn't work. Your kind help will be higly appreciated. Regards,

We have problem with turkish characters as follows: ığüşiöç IĞÜŞİÖÇ

# c# - Troubleshooting HTTPClient asynchronous POST and reading results

> ID：15746090
> 
> 赞同：1
> 
> 时间：2013-04-01T15:16:19.733
> 
> 标签：c#, post, asynchronous, httpwebrequest, webclient

I have a problem post string to form and read. Problem is they get away but need to do so sophisticated and it was very fast. Absolutely perfect multithreaded or asynchronous. Thank you very for your help. This is my code.

```
private static void AsyncDown()
    {
        const string url = "http://whois.sk-nic.sk/index.jsp";
        const string req = "PREM-0001";
        var client = new HttpClient();

        var pairs = new List<KeyValuePair<string, string>>
        {
            new KeyValuePair<string, string>("text", "PREM-0001")
        };

        FormUrlEncodedContent content = new FormUrlEncodedContent(pairs);

        HttpResponseMessage response = client.PostAsync("http://whois.sk-nic.sk/index.jsp", content).Result;

        if (response.IsSuccessStatusCode)
        {

            HttpContent stream = response.Content;
            Task<string> data = stream.ReadAsStringAsync();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T22:04:37.267

也许该站点自上次发布以来已更改，但现在请求参数名称是 whois 而不是文本。如果一年前也是这种情况，那就是它不起作用的原因。

今天网站也响应get，即[http://whois.sk-nic.sk/index.jsp?whois=PREM-0001](http://whois.sk-nic.sk/index.jsp?whois=PREM-0001)

带get的完整代码：

```
private async Task<string> Get(string code)
{
    using (var client = new HttpClient())
    {
        var requestUri = String.Format("http://whois.sk-nic.sk/index.jsp?whois={0}", code);

        var data = await client.GetStringAsync(requestUri);

        return data;
    }
} 
```

带帖子的完整代码：

```
private async Task<string> Post()
{
    using (var client = new HttpClient())
    {
        var postData = new KeyValuePair<string, string>[]
        {
            new KeyValuePair<string, string>("whois", "PREM-0001"),
        };

        var content = new FormUrlEncodedContent(postData);

        var response = await client.PostAsync("http://whois.sk-nic.sk/index.jsp", content);

        if (!response.IsSuccessStatusCode)
        {
            var message = String.Format("Server returned HTTP error {0}: {1}.", (int)response.StatusCode, response.ReasonPhrase);
            throw new InvalidOperationException(message);
        }

        var data = await response.Content.ReadAsStringAsync();

        return data;
    }
} 
```

或者可以使用解析器，因为我猜提取返回的值是最终目标：

```
private void HtmlAgilityPack(string code)
{
    var requestUri = String.Format("http://whois.sk-nic.sk/index.jsp?whois={0}", code);

    var request = new HtmlWeb();

    var htmlDocument = request.Load(requestUri);

    var name = htmlDocument.DocumentNode.SelectSingleNode("/html/body/table[1]/tr[5]/td/table/tr[2]/td[2]").InnerText.Trim();
    var organizations = htmlDocument.DocumentNode.SelectSingleNode("/html/body/table[1]/tr[5]/td/table/tr[3]/td[2]").InnerText.Trim();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:26:50.313

在黑暗中粗略地刺探你的问题是什么，我猜你在阅读你的电话回复时遇到了麻烦。

当内容发布到服务器时，

```
HttpResponseMessage response 
    = client.PostAsync("http://whois.sk-nic.sk/index.jsp", content).Result;

    if (response.IsSuccessStatusCode)
    {

        HttpContent stream = response.Content;
        Task<string> data = stream.ReadAsStringAsync();
    } 
```

它是异步执行的，因此即使结果（很可能）还不可用，代码也会继续执行。因此，检查`response.IsSuccessStatusCode`不会给您预期的行为。

**通过添加await**关键字将您的调用更改为如下所示：

```
HttpResponseMessage response 
    = await client.PostAsync("http://whois.sk-nic.sk/index.jsp", content); 
```

然后，将流的读取更改为也使用 await：

```
 if (response.IsSuccessStatusCode)
    {
        var data = await response.Content.ReadAsStringAsync();
    } 
```

编辑：混淆了一些等待对象并更正了代码清单。

编辑 2：这是我用来从给定 URL 成功下载 HTML 页面的完整 LINQPad 脚本。

```
var client = new HttpClient();

var pairs = new List<KeyValuePair<string, string>>
{
    new KeyValuePair<string, string>("text", "PREM-0001")
};

FormUrlEncodedContent content = new FormUrlEncodedContent(pairs);
HttpResponseMessage response = await client.PostAsync("http://whois.sk-nic.sk/index.jsp", content);

if (response.IsSuccessStatusCode)
{
    var data = await response.Content.ReadAsStringAsync();
    //data.Dump(); //uncomment previous if using LINQPad
} 
```

# android - 如何在 4.2 之前的 Android 版本上处理 RTL 语言？

> ID：15746091
> 
> 赞同：28
> 
> 时间：2013-04-01T15:16:21.553
> 
> 标签：android, android-webview, textview, hebrew, right-to-left

## 背景

TextView 总是遇到 RTL（从右到左）语言的问题。由于我只知道如何阅读希伯来语（除了英语），我将谈谈它的问题：

*   文本对齐（我不是在谈论重力）。作为一种 RTL 语言，希伯来语将单词从右到左排列（与英语相反）。

    为了演示它有多烦人，想象一下，而不是显示“Hello world”。你通常会得到 ".Hello world" 。如果您将它放在一个句子中，这可以很容易地解决，但是当有多个标点符号时就更难了。

*   元音位置。希伯来语不需要元音来阅读文本，但有时没有它们很难阅读（尤其是圣经）。对于元音，希伯来语有所谓的“NIKUD”，实际上就像字母中的点。Android 中的问题是它们通常被放置在错误的位置。

    为了演示它有多烦人，想象一下，而不是显示“Hello world”。你通常会得到 ".eHlol owrld" 。即使您尝试修复它（将元音始终放在当前字符后一个字符），字母中的位置也不正确（想象“Hello”中的“e”会像“H”一样，因为例子） 。

仅在 4.2 版（阅读[此处](http://developer.android.com/about/versions/jelly-bean.html)，在“Native RTL support”下），Google 已修复所有与希伯来语相关的问题（或至少看起来如此）。

## 问题

希伯来语的问题导致每个以色列运营商和每个定制 ROM 制造商都有自己的解决方案来解决不同的问题，这使得在 4.2 之前的设备上处理 RTL 文本几乎是不可能的。

如果文本同时包含希伯来语和英语字母，事情会变得更加令人沮丧。

## 我试过的

我已经阅读了许多谈论这些问题的网站，并且我尝试了许多解决方案的变体，但没有一个解决了所有设备上的问题：

*   有人建议将字符 '\u200F'（或 '\u202D'）放在文本的结尾/开头/两者。

*   有些人建议使用[Html.fromHtml()](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)方法并在那里放一些特别的东西。

*   有些人甚至建议改用 WebView （并且可能使用[WebSettings.setDefaultTextEncodingName()](http://developer.android.com/reference/android/webkit/WebSettings.html#setDefaultTextEncodingName%28java.lang.String%29)）。

## 问题

这个问题有明确的解决方案吗？

我认为最好的事情是因为 Android 4.2 解决了这个问题，而且 Android 是开源的，我们应该将它的 TextView 导入我们可以使用的库中，但谷歌还没有提供这样的库。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T19:51:35.707

可悲的是，我不认为有一个好的解决方案（“好”的意思是“完成工作并且随时可用”）。对于我们自己的支持希伯来语的 Android 应用程序，我们使用了我们多年来开发的自定义渲染机制。渲染机制无所不能：专有字体；双向 (bidi) 分析；字形放置；换行分析；文本流；等等。尝试使用原生 Android 文本处理功能（尤其是 4.2 之前）的一些问题是：

1.  真的很垃圾的字体。[但是，您可以将DejaVu](http://dejavu-fonts.org/wiki/Main_Page)之类的第三方字体打包，效果还不错。正确的字体可以为 nekudot 和 te'amim ¹的定位创造奇迹，如果你需要的话。[（我同意你关于正确指向位置的重要性；阅读带有错位nekudot](http://en.wikipedia.org/wiki/CAPTCHA)的希伯来语文本就像阅读满屏的验证码。）

2.  越野车比迪烟分析。更糟糕的是，对于不同版本的 Android，这些错误似乎有所不同。修改文本以包含策略性放置的双向格式代码（RTL 标记；LTR 标记等）可以克服许多这些错误（请参阅[此处](http://www.w3.org/International/questions/qa-bidi-controls)的讨论，这不是特定于 Android 的）。然而，这样做很麻烦，而且由于 Android 版本之间的不一致，很难提前预测框架需要什么帮助。

3.  对从右到左的问题没有（或考虑不周）框架级别的意识。例如，祝滚动条显示在希伯来文 TextView 的左侧。对于我们的应用程序，我们必须构建一个完整的滚动条系统才能让它按照我们的意愿工作。（好想 Android 是开源的！）

4.  换行和断字分析不佳。我们测试的至少一个早期版本的 Android 认为每个 nikud 标记都是一个单词边界。当涉及换行时，系统通常不知道如何处理希伯来语标点符号，如 maqaf、gershayim 或 sof pasuk。

5.  系统无法将一些较新的 Unicode 字符（如 HOLAM HASER FOR VAV-U+05BA-Unicode 5.0 的新字符）识别为希伯来语脚本。

我的建议是，除非你准备自己构建一个从上到下的文本处理系统，否则你放弃在 4.2 之前版本的 Android 上的高质量文本显示，特别是如果你需要支持 nekudot 和 te'amim . 另外，计划使用我在上面前两点中提到的技术。

¹圣经的音符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T22:37:35.103

截至 2013 年 8 月，Android 已发布可能适合您需求的双向格式化程序的 API 文档。这包含在 Android Support v4 库中，我认为它应该在 Android 4.2 之前的版本中运行。

参考：http: [//developer.android.com/reference/android/support/v4/text/BidiFormatter.html](http://developer.android.com/reference/android/support/v4/text/BidiFormatter.html)

# c# - MediaElement 播放列表不起作用

> ID：15746093
> 
> 赞同：1
> 
> 时间：2013-04-01T15:16:46.020
> 
> 标签：c#, wpf, text-to-speech

我正在尝试为 Windows Phone 做一个 TTS 应用程序，但我有一个小问题。我制作了一个函数来调用 Google TTS 服务并在 MediaElement 上播放它，效果很好。

这就是我写的函数

```
 public void Say(string phrase)
    {
        mediaElement1.Source = new Uri("http://translate.google.com/translate_tts?tl=en&q=" + phrase, UriKind.Absolute));
        mediaElement1.Play();
    } 
```

但是如果我多次调用该函数，例如，在 for 循环中，它只会说循环的最后一项。例如

```
for (int i = 0; i < 10; i++)
{
  Say(Convert.ToString(i));
} 
```

然后它只是说'九'，不，'1,2,3,4，......'

我试图做一个单词的“播放列表”，该功能将播放。这是我的代码。

```
 bool first = true;
    List<Uri> uriTask = new List<Uri>();
    public void Say(string phrase)
    {
        uriTask.Add(new Uri("http://translate.google.com/translate_tts?tl=es&q=" + phrase, UriKind.Absolute));
        if (mediaElement1.CurrentState != MediaElementState.Playing)
        {
            if (first)
            {
                CHECK();
                first = false;
            }
            else
            {
                mediaElement1.MediaEnded += delegate
                {
                    mediaElement1.Position = TimeSpan.Zero;
                    CHECK();
                };

            }
        }
    }

    private void CHECK()
    {
        if (uriTask.Count > 0)
        {
            mediaElement1.Source = uriTask[0];
            mediaElement1.Play();
            uriTask.RemoveAt(0);
        }
    } 
```

谢谢。问候

# socket.io - Socket.IO flashsocket 安全沙箱错误

> ID：15746094
> 
> 赞同：0
> 
> 时间：2013-04-01T15:16:50.927
> 
> 标签：socket.io, cross-domain-policy, flashsocket

在过去的几天里，我一直在玩 node.js 和 socket.io。在我的本地机器上一切正常（windows 使用 iss 作为网络服务器），但是在将它上传到我的远程服务器（ubuntu 机器）时，出现安全错误。

```
[trace] Warning: Failed to load policy file from http://localhost:8000/crossdomain.xml
[trace] *** Security Sandbox Violation ***
[trace] Connection to http://localhost:8000/socket.io/1/ halted - not permitted from http://****/virtualcinema/VirtualCinema.swf
[trace] Error #2044: Unhandled securityError:. text=Error #2048: Security sandbox violation: http://****/virtualcinema/VirtualCinema.swf cannot load data from http://localhost:8000/socket.io/1/. 
```

它出错的 AS3 代码是：

```
Security.loadPolicyFile("xmlsocket://localhost:10843");
socket = new FlashSocket("localhost:8000"); 
```

策略文件在端口 10843 上正确提供，我可以在浏览器中的 http:// *** *:10843/ 处接收到策略文件。为什么它试图在端口 8000 上加载策略文件。该警告没有出现在我的本地构建中。

socket.io 代码：

```
socket = io.listen(8000);

socket.configure(function() 
{
    socket.set("transports", ["flashsocket"]);
    socket.set("log level", 2);

}); 
```

我很困惑为什么当我在本地机器上测试它而不是在远程机器上测试它时它得到了很好的解决。任何帮助将非常感激 ：）

我正在使用的 crossdomain.xml：

```
<cross-domain-policy>
    <allow-access-from domain="*" to-ports="*"/>
</cross-domain-policy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:30:04.803

固定的。我将其从指向 localhost 更改为我的服务器 externalIP。

我以前试过这个，但不幸的是服务器已经缓存了我的 swf 文件，我没有意识到它是固定的。

```
Security.loadPolicyFile("xmlsocket://****.com:10843");
socket = new FlashSocket("****.com:8000"); 
```

# javascript - Volusion 中的页面特定 CSS 与 Javascript

> ID：15746096
> 
> 赞同：1
> 
> 时间：2013-04-01T15:16:56.807
> 
> 标签：javascript, css, overriding, volusion

在 Volusion 平台上进行设计的新手，在调查了支持表单上的帮助主题后卡住了。我需要在除我的 default.asp 主页之外的所有页面上覆盖 CSS 样式。我正在尝试使用 javascript 来执行此操作，但它似乎不起作用。

这是该站点的演示：http: [//v1330583.ovjk2w9aumkd.demo19.volusion.com/default.asp](http://v1330583.ovjk2w9aumkd.demo19.volusion.com/default.asp)

我正在尝试从以下 Javascript 开始修改我的[#content 规则](http://v1330583.ovjk2w9aumkd.demo19.volusion.com/v/vspfiles/templates/240/css/Template.css)：

```
<script type="text/javascript"> 
//<![CDATA[

  if (location.pathname == "/ProductDetails.asp") || 
  location.pathname.indexOf("-p/") != -1 || 
  location.pathname.indexOf("_p/") != -1)
  var onHomepage = true;

if(!onHomepage)
document.writeln("\n<style type='text/css'>content {
padding: 20px background-color: #fff}</style>\n\n"); 
//]]> </script> 
```

谁能告诉我

1.  我应该在哪里插入这段代码。
2.  如果有更好的方法来做到这一点。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T00:50:48.820

在没有 Javascript 的 Volusion 中有一种更简单的方法可以做到这一点。如果您登录仪表板，请转到“设计->文件编辑器”，然后单击模板 HTML 文件（它将位于“模板文件”标题下，您将位于您网站的主模板文件中。

在`<body>`标签之间，您只需添加一个 id 为“if_not_homepage”的 div，如果不在 default.asp 页面上，站点将只读取此 div 的内容。例如：

```
<div id="if_not_homepage">
    <style type="text/css">
        #content{
            padding:20px;
            background-color:#fff;
        }
    </style>
</div> 
```

或者你可以在这个 div 中完全调用一个单独的样式表（例如）：

```
<div id="if_not_homepage">
    <link rel="stylesheet" href="/v/vspfiles/templates/YOUR_TEMPLATE/css/inner_style.css" />
</div> 
```

如果您将样式表放在目录“/v/vspfiles/templates/YOUR_TEMPLATE/css/”中，您也可以在 Volusion 仪表板的文件编辑器中编辑样式表（就像您的其他样式表一样）。

或者，有一个 id 为“if_homepage”的 div，仅当用户位于 default.asp（与“if_not_homepage”相反）时才可读取。

在一个完全独立的注释中，在上面的代码中，您在 CSS 中的“内容”上缺少类 (.) 或 id (#) 选择器，因此这也可能与它有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:26:17.753

而不是样式标签，我认为您最好直接使用 jQuery 设置样式（如果加载了 DOM）或将链接标签写到单独的样式表中。

# c# - 在 EF 4.4.0 中获取键名（没有“ObjectContext”）

> ID：15746099
> 
> 赞同：0
> 
> 时间：2013-04-01T15:17:11.037
> 
> 标签：c#, entity-framework, entity-framework-4

如何在 EF 4.4 中获取键名？

我找到了一个这样的样本：

```
var set = ((IObjectContextAdapter)context).ObjectContext.CreateObjectSet<TEntity>();
var entitySet = set.EntitySet;
return entitySet.ElementType.KeyMembers.Select(k => k.Name); 
```

我在运行网站时得到了这个：CS0012：“System.Data.Objects.ObjectContext”类型是在未引用的程序集中定义的。您必须添加对程序集“System.Data.Entity，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。

我使用 .NET 4，以下是我的 web.config：

```
 <section name="entityFramework" 
      type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, 
      EntityFramework, Version=4.4.0.0, Culture=neutral, 
      PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

我花了一天，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:18:41.600

最后，我通过重新安装 EF 来修复它。我使用了 NUGET 包管理器并卸载了 EF 并再次添加了 EF 5。

# javascript - 如果与布尔值的绑定没有正确评估，则淘汰赛

> ID：15746101
> 
> 赞同：3
> 
> 时间：2013-04-01T15:17:14.677
> 
> 标签：javascript, mvvm, knockout.js, knockout-2.0

我的视图中有以下内容，使用跨度显示只读视图和输入显示编辑视图。

```
<span data-bind="{ ifnot:IsEditing, text:SystemName }"></span>
<input type="text" id="SystemName" data-bind="{ if:IsEditing, value:SystemName }" /> 
```

IsEditing observable 的评估结果为假。我正在返回具有以下层次结构的 JSON。

```
Project
   .
   .
   Systems (collection)
     SystemName 
```

我正在通过 JQuery 加载值，使用以下内容创建可观察模型：

```
$.ajax({
    type: "get",
    url: "..",
    success: function (d) {
        var pList = [];

        for (var p = 0, plen = d.Data.length; p < plen; p++) {
            var proj = d.Data[p];
            var systems = proj.Systems;
            var sList = [];

            proj = ko.mapping.fromJS(proj);

            for (var s = 0, slen = systems.length; s < slen; s++) {
                sList.push(ko.mapping.fromJS(systems[s]));
            }

            proj.Systems = ko.observableArray(sList);

            pList.push(proj);
        }

        window["model"].projects(pList);
    },
    error: function (e) {
        debugger;
        alert("An error occurred");
    }
}); 
```

加载时，每当加载模型并评估此表达式时，两个元素都会始终显示，而不是显示跨度并隐藏输入。当我将其更改为可见绑定时，仅显示跨度。当 IsEditing 评估为 false 时，为什么输入显示带有 if 绑定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:09:52.573

如果您`IsEditing`是可观察的，则`if`绑定应正确评估它。

然而，`if`绑定应该应用于“类似容器”的元素，例如可以有子元素的元素。

该[文档](http://knockoutjs.com/documentation/if-binding.html)有点令人困惑，并讨论了*包含的标记*：

> 然而，if 绑定在物理上添加或删除DOM 中*包含的标记*，

因为`input`不能有子元素，`if`所以不能从`input`. 您需要将您的包装`input`成 a`div`并在那里应用，`if`或者您可以使用无容器绑定语法：

```
<!-- ko if: IsEditing -->
    <input type="text" id="SystemName" data-bind="{ value: SystemName }" />
<!-- /ko --> 
```

演示[JSFiddle。](http://jsfiddle.net/by6T8/)

# java - 如何集成 AJAX 和 Java EE servlet 3 异步响应

> ID：15746104
> 
> 赞同：0
> 
> 时间：2013-04-01T15:17:24.537
> 
> 标签：java, ajax, servlet-3.0

我正在考虑如何让 AJAX 使用 servlet 3 异步响应。在请求-响应同步处理模型中，当响应返回时，XmlHttpRequest的回调可以得到响应文本；但是如何在另一个线程中处理响应并返回一些消息，当请求结束时 XHR 会得到什么？它还能得到响应体吗？我尝试了一个简单的代码来测试它，似乎没有得到响应；

我可以理解，当AJAX请求返回时，响应中没有任何内容，它会在另一个服务器线程中延迟，所以回调什么都没有。

但是我想知道有没有什么方法可以让 AJAX 得到正确的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:49:08.870

恐怕我之前犯了一个错误，我忘记在异步处理完成后调用 asycContext.complete() 。调用 complete() 后，ajax 得到响应。但是，如果处理持续时间超过超时设置，如下所示，将出现一个异常，说 asynccontext 处于非法状态，并且客户端什么也得不到：

```
 final AsyncContext ac = request.startAsync();

   ac.setTimeout(1000);

    Executors.newSingleThreadExecutor().execute(new Runnable(){

        @Override
        public void run() {
            PrintWriter pw;
            try {
                Thread.sleep(2000);
                pw = ac.getResponse().getWriter();
                pw.write("Hello, World!");
                ac.complete();
            } catch (IOException e) {
                e.printStackTrace();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }); 
```

所以我猜这里的关键是：1.处理完成后调用完成；2.设置合适的超时时间；

# javascript - 奇怪的阵列镜像问题

> ID：15746109
> 
> 赞同：-1
> 
> 时间：2013-04-01T15:17:56.760
> 
> 标签：javascript, jquery, arrays

我有两个数组，它们都由来自发布请求的数据填充。

这样做的目的是，当对“实时”数组进行更改时，将它们与“原始”数组进行比较，以便可以发现更改。

这是我的帖子：

```
$('#dialogs').load('views/Products/managePicsDialog.php', function(){
        var imageArray = [];
        var originalImageArray = [];
        $('#managePicsDialog').modal();
        productId = 1;
        $.post(ROOT+'products/fetch-thumbnails', 'pid='+productId, function(data){
            imageArray = originalImageArray = data;
            nextPriority = imageArray.length+1;
            renderImageList(imageArray);
        }, 'json')
... 
```

最初我认为这会很好，`data`进入`imageArray`and `originalImageArray`.

在我的代码`originalImageArray`中根本没有被触及，只会`imageArray`被操纵和改变。

现在在比较数组时，似乎 originalImageArray 在每次更改时都会复制 imageArray，我不明白为什么：

```
function saveChanges(imageArray, originalImageArray)
{
    $.each(originalImageArray, function(i, obj){
        $.each(obj, function(i2, v){
            if(imageArray[i][i2] != v)
            {
                alert('changed') // Never happens
            }
        })
    })
} 
```

如果我“警告每个”两个数组，则值清楚地显示为相互复制，即使在我的代码中没有任何地方指出，`originalImageArray = imageArray`除了在我的`$.post`方法中，该方法仅在打开对话框时调用一次。

谁能帮我解决这个问题？

* * *

数组的内容是对象。

* * *

这是帮助澄清的完整代码：

```
$('#productGrid').on('click', '#managePics', function(e){ // When managepics option is clicked
    e.preventDefault(); // Don't go to the hyperlink...
    closeMenu(); // Close the popup menu...
    $('#dialogs').load('views/Products/managePicsDialog.php', function(){
        var imageArray = [];
        var originalImageArray = [];
        $('#managePicsDialog').modal();
        productId = 1;
        $.post(ROOT+'products/fetch-thumbnails', 'pid='+productId, function(data){
            imageArray = data;
            originalImageArray = data.slice(0);
            nextPriority = imageArray.length+1;
            renderImageList(imageArray);
        }, 'json')

        $('#fileUpload').fileupload({
            url: ROOT+'UploadHandler',
            process: [
            {
                maxFileSize: 2000000000 
            }
            ],
            progressInterval: 50,
            add: function(e, data)
            {
                data.submit();
            },
            progressall: function (e, data) {
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .bar').css('width', progress + '%').html(progress+'%');
            },
            done: function(e, data)
            {
                n = $.parseJSON(data.result)
                pushed = {
                    "id": "0",
                    "priority": nextPriority,
                    "thumb": n.files[0].thumbnail_url,
                    "deleted": 0
                }
                imageArray.push(pushed);

                renderImageList(imageArray);
            }
        });
        $('#thumbnails').on('click', 'button.delete', function(e){
            $(this).closest('.span8').fadeOut('fast', function(){
                $(this).detach();
            });
            idx = $(this).closest('.span8').data('index');
            deleteImage(imageArray, idx)
        })
        $('#managePicsDialog').on('click', '.move-down:not(.disabled)', function(){
            idx = $(this).closest('.span8').data('index');
            if(imageArray[idx+1])
            {
                temp = imageArray[idx+1];
                imageArray[idx+1] = imageArray[idx];
            } else {
                temp = imageArray[0];
                imageArray[0] = imageArray[idx];
            }
            imageArray[idx] = temp;
            renderImageList(imageArray)
        })
        $('#managePicsDialog').on('click', '.move-up:not(.disabled)', function(){
            idx = $(this).closest('.span8').data('index');
            if(imageArray[idx-1])
            {
                temp = imageArray[idx-1];
                imageArray[idx-1] = imageArray[idx];
            } else {
                temp = imageArray[imageArray.length-1];
                imageArray[imageArray.length-1] = imageArray[idx];
            }
            imageArray[idx] = temp;
            renderImageList(imageArray)
        })
        $('#cancelChanges').click(cancelChanges)
        $('#saveChanges').click(function(){
            saveChanges(imageArray, originalImageArray)
        })
    })// Close dialog

})

function saveChanges(imageArray, originalImageArray)
{
   // commitChanges(imageArray)

    $.each(originalImageArray, function(i, obj){
        $.each(obj, function(i2, v){
            alert(i2+' => '+v)
        })
    })
    $.each(imageArray, function(i, obj){
        $.each(obj, function(i2, v){
            alert(i2+' => '+v)
        })
    })

    $.each(originalImageArray, function(i, obj){
        $.each(obj, function(i2, v){
            if(imageArray[i][i2] != v)
            {
                alert('changed')
            }
        })
    })
}
function deleteImage(imageArray, index)
{
    if(imageArray[index].id == 0) // If is a new image we just remove it from array.
    {
        imageArray.splice(index, 1);
    } else { // If existing image we mark it for deletion.
        imageArray[index].deleted = 1;   
    }

    renderImageList(imageArray);
}

function renderImageList(imageArray)
{
    var thumbHTML = '';
    $.each(imageArray, function(i, v){
        if(v.deleted == 0)
        {
            thumbHTML += '<div class="span8 well" data-index="'+i+'">';
            thumbHTML += '<div class="span2">';
            thumbHTML += '<img src="images/'+v.thumb+'" height="" width="" class="last-added">';
            thumbHTML += '</div>';
            thumbHTML += '<div class="span4">';
            thumbHTML += '</div>';
            thumbHTML += '<div class="span1">';
            thumbHTML += '<button class="btn btn-info btn-100 move-up">Move up</button>';
            thumbHTML += '<button class="btn btn-info btn-100 move-down">Move down</button>';
            thumbHTML += '<button class="btn btn-danger btn-100 delete">Remove</button>';
            thumbHTML += '</div>';
            thumbHTML += '</div>';
        }
    })
    $('#thumbnails').html(thumbHTML);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:20:06.100

您需要克隆它，这样它们就不会共享相同的引用

```
imageArray = data;
originalImageArray = data.slice(0); 
```

# c# - 查找 NewArrayExpression 的大小

> ID：15746123
> 
> 赞同：2
> 
> 时间：2013-04-01T15:18:31.860
> 
> 标签：c#, reflection, expression-trees

尝试使用以下内容解析表达式树时：

```
private static XElement Parse(NewArrayExpression newArray)
{
    IEnumerable<XElement> items = newArray.Expressions
        .Select(item => new XElement(ExpressionTag.NewArrayItem, Parse((dynamic)item)));

    return new XElement(ExpressionTag.NewArrayNode, items);
} 
```

我发现传入`new Int32[5]`会产生与该属性相同的信息`new Int32[] { 5 }`，因为该`NewArrayExpression.Expressions`属性只是用我想象的应该是构造参数填充的。问题是无法判断参数何时是*length*或者它是否是实际*item*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:22:27.470

来自[MSDN](http://msdn.microsoft.com/en-sg/library/system.linq.expressions.newarrayexpression.expressions.aspx)：

`NewArrayExpression.Expressions`财产

> 如果 NodeType 属性的值为 NewArrayBounds，则获取数组的边界；如果 NodeType 属性的值为 NewArrayInit，则获取用于初始化新数组元素的值。

从本质上讲，属性上的分支`NodeType`将帮助您消除歧义。

# c++ - Qt 信号发射的段错误

> ID：15746125
> 
> 赞同：0
> 
> 时间：2013-04-01T15:18:37.170
> 
> 标签：c++, qt, segmentation-fault, signals

我有以下功能，在发射时会出现段错误。只知道以下内容，有哪些可能导致此段错误的条件？

**功能**

```
MyClass::EmitSignal() {
    QString param = SomeObject->GetHelloWorld();
    qDebug () << "param: " << param;
    emit SomeSignal (param);
    qDebug () << "Emitted SomeSignal";
} 
```

**信号原型**

```
signals:
    void SomeSignal (const QString& someString); 
```

**输出**

```
param: HelloWorld
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:56:57.853

我犯了一个愚蠢的错误——周末有人连接到我的信号，当我更改 QString 的格式时，他们的代码出现了段错误。我应该检查新的插槽。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T15:28:12.697

如果 SomeObject 等于 null 或无效，你肯定会得到一个段错误

# stackmob - stackmob 是否支持在其后端进行全文搜索？

> ID：15746129
> 
> 赞同：1
> 
> 时间：2013-04-01T15:18:47.730
> 
> 标签：stackmob

想在 StackMob 上构建一些东西，但找不到信息。关于是否有任何支持进行全文搜索，按文本搜索和按距离排序等，。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:25:03.897

我们目前不支持全文搜索，但我们正在内部考虑。我们目前没有明确的答案，如果/何时我们会拥有它，但如果我们实现它，我们将一如既往地提供关于如何使用它的良好文档。

我们的所有功能都可以通过 OAuth 1/2 安全 REST API 访问，该 API 记录在此处：[https](https://developer.stackmob.com/sdks/rest/api) ://developer.stackmob.com/sdks/rest/api 。

我们还有关于官方支持的 SDK（Javascript、IOS 和 Android）的文档。

我希望这能回答你的问题。

# php - 在整个脚本的不同时间将变量从 php 发送回 AS3？

> ID：15746130
> 
> 赞同：0
> 
> 时间：2013-04-01T15:18:47.817
> 
> 标签：php, actionscript-3, communication

吉日

我在 php 脚本末尾使用一些 JSON 将状态更新发送回 AS3：

```
$send = array("error"=>"", "x"=>5);
$sendThis = json_encode($send);     
print $sendThis;    
exit(); 
```

没有错误意味着是的，5 意味着它已经完成。它工作正常，但我想知道是否有办法在同一脚本的某些阶段发回 1、2、3 和 4？

我试过了

```
$send = array("error"=>"", "x"=>1);
$sendThis = json_encode($send);     
print $sendThis; 
```

进一步向上脚本，但 php 将其保存到最后，并同时将两个 $send 数组发送回来，导致 AS3 端出现问题。

我还尝试在 print 语句后使用 flush 和 ob_flush，结果相同。

还有什么我可以编写代码来告诉 php 在脚本中途发回一些东西吗？

谢谢参观

# opengl-es - 变化是一个像素吗？

> ID：15746134
> 
> 赞同：1
> 
> 时间：2013-04-01T15:19:01.660
> 
> 标签：opengl-es, glsl

我正在为 Open GL ES 应用程序编写 Fragment 着色器，我试图澄清 Pixel 和 Varying 之间的区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:38:13.443

OpenGL ES 中的`varying`类型包含一个可选的、用户定义的从顶点着色器到片段着色器的输出（例如，如果使用逐像素光照，则为表面法线）。它用于计算`gl_FragColor`片段着色器中的最终片段颜色 ( )。虽然可以从顶点着色器（例如，如果使用逐顶点光照）作为`varying`类型输出最终颜色，但这不是标准，取决于您所需的着色器行为。

A`pixel`只是图像或屏幕的最小测量单位。OpenGL ES 管道生成`fragments`（原始数据），然后根据其可见性、深度、模板、颜色等将其转换（或不转换）为像素。

# php - 使用 PHP 缓存 MySQL 查询结果的最简单方法？

> ID：15746138
> 
> 赞同：12
> 
> 时间：2013-04-01T15:19:10.750
> 
> 标签：php, mysql, caching

每次有人登陆我的页面`list.php?id=xxxxx`时，它都会请求一些 MySQL 查询来返回：

```
$ids = array(..,..,..); // not big array - not longer then 50 number records
$thumbs = array(..,..,..); // not big array - not longer then 50 text records
$artdesc = "some text not very long"; // text field 
```

因为我从中进行查询的数据库非常大，所以我想将此结果缓存 24 小时，可能是一个文件，例如：`xxxxx.php`在 /cache/ 目录中，这样我可以在`include("xxxxx.php")`它存在时使用它。（或txt文件！？，或任何其他方式）

因为有非常简单的数据，我相信只需要几行PHP就可以完成，不需要使用memcached或其他专业对象。

因为我的 PHP 非常有限，有人可以为这个任务放置 PHP 主线（或代码）吗？

我真的会非常感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T15:24:03.577

缓存 PHP 数组非常简单：

```
file_put_contents($path, '<?php return '.var_export($my_array,true).';?>'); 
```

然后你可以把它读回来：

```
if (file_exists($path)) $my_array = include($path); 
```

您可能还想[查看 ADOdb](http://phplens.com/lens/adodb/docs-adodb.htm#caching)，它在内部提供缓存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T17:40:15.343

尝试使用序列化；

假设您在两个数组中获取数据，`$array1`并且`$array2`. 现在您要做的就是将这些数组存储在文件中。将字符串（问题中的第三个变量）存储到文件很容易，但是要存储数组，您必须首先将其转换为字符串。

```
$string_of_array1 = serialize( $array1 );
$string_of_array2 = serialize( $array2 ); 
```

下一个问题是缓存文件的命名，以便您可以轻松检查相关数组是否已在缓存中可用。最好的方法是创建 mysql 查询的 MD5 哈希并将其用作缓存文件名。

```
$cache_dir = '/path/cache/';

$query1 = 'SELECT many , fields FROM first_table INNER JOIN another_table ...';
$cache1_filename = md5( $query1 );

if( file_exists( $cache_dir . $cache1_filename ) )
{
    if( filemtime( $cache_dir . $cache1_filename ) > ( time( ) - 60 * 60 * 24 ) )
    {
        $array1 = unserialize( file_get_contents( $cache_dir . $cache1_filename ) );
    }
}

if( !isset( $array1 ) )
{
    $array1 = run_mysql_query( $query1 );
    file_put_contents( serialize( $array1 ) );
} 
```

对应该存储在单独文件中的另一个数组重复上述操作，并将第二个查询的 MD5 用作第二个缓存文件的名称。

最后，您必须决定您的缓存应该保持有效多长时间。对于同一个查询，你的 mysql 表中可能有更改记录，这可能会使你的文件系统缓存过时。因此，您不能仅仅依靠唯一的文件名来进行唯一的查询。

**重要的：**

*   必须删除旧的缓存文件。您可能必须编写一个例程来检查目录中的所有文件并删除早于 n 秒的文件。
*   将缓存目录保留在 webroot 之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:26:42.167

只需使用 $_GET['id'] 的名称和要缓存的内容的内容编写一个新文件，每次检查该文件是否存在，否则创建一个。像这样的东西：

```
$id = $_GET['id']

if (file_exists('/a/dir/' . $id)) {
  $data = file_get_contents('/a/dir/' . $id);
} else {
  //do mysql query, set data to result
  $handle = fopen('/a/dir/' . $id, 'w+');
  fwrite($handle, $data);
  fclose($handle);
} 
```

# performance - 高效查询分区主PostgreSQL表

> ID：15746143
> 
> 赞同：0
> 
> 时间：2013-04-01T15:19:26.143
> 
> 标签：performance, postgresql, partitioning

我说的是[这个功能](http://www.postgresql.org/docs/9.2/static/ddl-partitioning.html)。

我有主表：

```
logstore=# \d history_log
                                   Table "public.history_log"
  Column   |           Type           |                       
-----------+--------------------------+-----------------------------------------------------------
 id        | bigint                   | NOT NULL DEFAULT nextval('history_log__id_seq'::regclass)
 tstamp    | timestamp with time zone | NOT NULL DEFAULT now()
 session   | character varying(40)    |
 action    | smallint                 | NOT NULL
 userid    | integer                  |
 urlid     | integer                  |
Indices:
    "history_log__id_pkey" PRIMARY KEY, btree (id)
Triggers:
    insert_history_log_trigger BEFORE INSERT ON history_log FOR EACH ROW EXECUTE PROCEDURE history_log_insert_trigger() 
```

以及一组由 tstamp 列分区的子表：

```
logstore=# \d history_log_201304
                               Table "public.history_log_201304"
  Column   |           Type           |                       
-----------+--------------------------+-----------------------------------------------------------
 id        | bigint                   | NOT NULL DEFAULT nextval('history_log__id_seq'::regclass)
 tstamp    | timestamp with time zone | NOT NULL DEFAULT now()
 session   | character varying(40)    |
 action    | smallint                 | NOT NULL
 userid    | integer                  |
 urlid     | integer                  |
Indices:
    "history_log_201304_pkey" PRIMARY KEY, btree (id)
    "history_log_201304_tstamp" btree (tstamp)
    "history_log_201304_userid" btree (userid)
Constraints:
    "history_log_201304_tstamp_check" CHECK (tstamp >= '2013-04-01 00:00:00+04'::timestamp with time zone AND tstamp < '2013-05-01 00:00:00+04'::timestamp with time zone)
Inherits: history_log 
```

那么我的问题是什么 - 当我直接在子表上执行 WHERE 条件受 tstamp 约束的查询时 - 它工作得非常快。

```
logstore=# EXPLAIN SELECT userid FROM history_log_201304 WHERE tstamp >= (current_date - interval '3 days')::date::timestamptz AND tstamp < current_date::timestamptz AND action = 13;
                                                       QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------
 Index Scan using history_log_201304_tstamp on history_log_201304  (cost=0.01..8.37 rows=1 width=4)
   Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
   Filter: (action = 13) 
```

但是当我尝试在主表上做同样的事情时 - 它进入 Seq Scan：

```
logstore=# EXPLAIN SELECT userid FROM history_log WHERE tstamp >= (current_date - interval '3 days')::date::timestamptz AND tstamp < current_date::timestamptz AND action = 13;
                                                                    QUERY PLAN

------------------------------------------------------------------------------------------------------------------------------------
---------------
 Result  (cost=0.00..253099.82 rows=1353838 width=4)
   ->  Append  (cost=0.00..253099.82 rows=1353838 width=4)
         ->  Seq Scan on history_log  (cost=0.00..0.00 rows=1 width=4)
               Filter: ((action = 13) AND (tstamp < ('now'::cstring)::date) AND (tstamp >= ((('now'::cstring)::date - '3 days'::inte
rval))::date))
         ->  Index Scan using history_log_201203_tstamp on history_log_201203 history_log  (cost=0.01..9.67 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201204_tstamp on history_log_201204 history_log  (cost=0.01..9.85 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201205_tstamp on history_log_201205 history_log  (cost=0.01..10.39 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201206_tstamp on history_log_201206 history_log  (cost=0.01..10.32 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201207_tstamp on history_log_201207 history_log  (cost=0.01..10.09 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201208_tstamp on history_log_201208 history_log  (cost=0.01..10.35 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201209_tstamp on history_log_201209 history_log  (cost=0.01..10.53 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201210_tstamp on history_log_201210 history_log  (cost=0.01..11.83 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201211_tstamp on history_log_201211 history_log  (cost=0.01..11.87 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201212_tstamp on history_log_201212 history_log  (cost=0.01..12.40 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201301_tstamp on history_log_201301 history_log  (cost=0.01..12.35 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201302_tstamp on history_log_201302 history_log  (cost=0.01..12.35 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201303_tstamp on history_log_201303 history_log  (cost=0.01..252959.45 rows=1353824 width=
4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13)
         ->  Index Scan using history_log_201304_tstamp on history_log_201304 history_log  (cost=0.01..8.37 rows=1 width=4)
               Index Cond: ((tstamp >= ((('now'::cstring)::date - '3 days'::interval))::date) AND (tstamp < ('now'::cstring)::date))
               Filter: (action = 13) 
```

这里发生了什么事？为什么对主表的查询不那么快？

我已经`constraint_exclusion`设置为`on`.

**编辑**：我偶然找到了解决方案，为了便于阅读，我把它写在这里。

直到今天我有错误的约束——我的`tstamp`专栏是`timestamp WITH time zone`类型的，约束是建立在`timestamp WITHOUT time zone`. 我修复了这个问题，修复了我的查询以进行类型转换 - 但对主表的查询仍然需要几分钟而不是几秒钟。那是我最后的选择，所以我去了 SO。在谈话过程中，我去了数据库`EXPLAIN ANALYZE`并向所有子表发出了一些实际数字 - 之后对主表的查询变得很快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:21:55.627

查询应该一样快。*seq 扫描仅*在主表上执行，在给定正确配置的分区表的情况下，该表根本不应该包含*任何行*。

考虑使用`EXPLAIN ANALYZE`，这样您就可以确切地看到查询需要多长时间。两者之间的差异应该可以忽略不计。

* * *

实际问题似乎是在不会返回任何结果的子表上执行查询。想必您的问题归结为：为什么`CHECK`无法满足约束的子表仍在搜索中？

[pgsql-bugs 邮件列表上](http://www.postgresql.org/message-id/Pine.LNX.4.33.0206031236310.12984-100000@ron)有一个关于这个问题的线程。您的`tstamp`专栏是`timestamp with time zone`. 检查不能用作您的`WHERE`子句中的表达式是一个`date`值，而不是时间戳。考虑使用`CURRENT_TIMESTAMP`而不是`CURRENT_DATE`. `tstamp`如果您需要从午夜开始查询，请保留您当前的查询，但将强制转换添加到该列所具有的完全相同的类型( `::timestamp with time zone`)。

# java - 在新行上拆分数组

> ID：15746157
> 
> 赞同：1
> 
> 时间：2013-04-01T15:20:37.177
> 
> 标签：java

我通过标准输入提交以下输入：

4 2

30个

30 两个

15 三

25 四

我的代码是：

```
public static void main(String[] args) throws IOException {

        BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
        String submittedString;
        System.out.flush();
        submittedString = stdin.readLine();

        zipfpuzzle mySolver = new zipfpuzzle();
        mySolver.getTopSongs(submittedString);

    } 
```

哪个电话：

```
//Bringing it all together
    public String getTopSongs(String myString) {

        setUp(myString);
        calculateQuality();
        qualitySort();
        return titleSort();

    } 
```

哪个电话

```
public void setUp(String myString) {

    String tempString = myString;

    //Creating array where each element is a line
    String[] lineExplode = tempString.split("\\n+");

    //Setting up numSongsAlbum and songsToSelect
    String[] firstLine = lineExplode[0].split(" ");
    numSongsAlbum = Integer.parseInt(firstLine[0]);
    songsToSelect = Integer.parseInt(firstLine[1]);

    System.out.println(lineExplode.length);
//etc
} 
```

但是，由于某种原因 lineExplode.length 返回值 1 ...有什么建议吗？

亲切的问候，达里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:21:38.390

```
String[] lineExplode = tempString.split("\\n+"); 
```

String#split 的参数是一个包含正则表达式的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:33:06.620

您的`String#split`正则表达式将在带有换行符的字符串上工作。

```
String[] lineExplode = tempString.split("\n"); 
```

问题是您`tempString`没有这些字符，因此数组的大小是`1`.

为什么不把 readLine 放在一个循环中并将字符串添加到 ArrayList

```
String submittedString;
while (!(submittedString= stdin.readLine()).equals("")) {
   myArrayList.add(submittedString);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:27:46.800

您应该使用“\\n”字符以换行符分隔，但请检查并非所有操作系统都使用相同的分隔符（[http://en.wikipedia.org/wiki/Newline](http://en.wikipedia.org/wiki/Newline)）

**为了解决这个问题，系统属性line.separator**非常有用，它包含运行应用程序的当前操作系统的当前分隔符。

你应该使用：

```
String[] lineExplode = tempString.split("\\\\n"); 
```

使用 \n 作为分隔符

或者：

```
String lineSeparator = System.getProperty("line.separator");
String[] lineExplode = tempString.split(lineSeparator); 
```

使用当前操作系统分隔符

或者：

```
String lineSeparator = System.getProperty("line.separator");
String[] lineExplode = tempString.split(lineSeparator + "+"); 
```

使用当前操作系统分隔符并需要一项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T15:26:01.083

最好以这种方式使用这种拆分：

```
String[] lineExplode = 
       tempString.split(Pattern.quote(System.getProperty("line.separator")) + '+'); 
```

为了保持这种拆分在新线**平台上独立**。

**更新：**查看您发布的代码后，很明显 OP 仅在此行中读取一行（直到 \n）：

```
 submittedString = stdin.readLine(); 
```

并且没有循环从输入中读取更多行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T15:26:15.297

您确定该文件使用的是 UNIX 样式的行尾 (\n) 吗？对于跨平台拆分，请使用：

```
String[] lineExplode = tempString.split("[\\n\\r]+"); 
```

# desire2learn - 什么是 CourseCompletions 以及它们是何时创建的？

> ID：15746159
> 
> 赞同：0
> 
> 时间：2013-04-01T15:20:40.960
> 
> 标签：desire2learn

我在 API 文档中看到了获取“CourseCompletion”对象的条目。但是看不到这些是如何输入到学习环境中的。你能解释一下这些物体是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:05:23.673

`CourseCompletion`记录本质上是元数据类型的注释，您可以将其附加到用户/课程提供组合，以记录用户在某某日期“完成”课程。课程完成记录还可以带有一个过期日期，用于“完成”变得过时或不再相关时。D2L 客户不会大量使用这些功能，也不会通过 Web UI 公开这些功能。

我不相信后端服务中围绕这些记录的创建或修改有任何自动化（例如，系统中没有创建课程完成记录的事件：客户需要当它想要一个存在时手动创建这样的记录）。

# css - 如何使用页面高度的百分比设置 HTML 元素的边距？

> ID：15746161
> 
> 赞同：5
> 
> 时间：2013-04-01T15:20:45.160
> 
> 标签：css, height

我有一个 div，我想将其放置在页面开头下方 10% 的位置。如果我使用这个 CSS 规则：

```
#div-block{
   margin-top: 10%;
} 
```

div 的计算边距顶部约为 192 像素（我的屏幕分辨率为 1920 x 1080），因此我测试的所有浏览器都使用页面的宽度（而不是高度）来计算值。

我怎样才能让他们仅使用 CSS 使用高度（假设为 1080 像素）进行计算？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T15:24:09.363

使用宽度来计算百分比是正确的行为。您不能根据高度的百分比设置边距。

一种可能性是`position: absolute; top 10%`在元素上设置，或使用 JavaScript。

[http://jsfiddle.net/g8Re6/](http://jsfiddle.net/g8Re6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T15:22:25.467

百分比取自包含 的元素`div`。您可以改为使用 javascript 或 jQuery 来设置 div 的高度与页面高度成比例。

```
$(window).height();   // returns height of browser viewport

$(document).height(); // returns height of HTML document 
```

所以你会做

```
var documentHeight = $(document).height();
var percentageHeight = documentHeight * .1;

$("#div-block").height(percentageHeight ); 
```

# html - 如何在 NetBeans 7.2 IDE 中跳过引号？

> ID：15746167
> 
> 赞同：1
> 
> 时间：2013-04-01T15:21:10.973
> 
> 标签：html, netbeans

我有一个非常简单的问题：当我在 NetBeans 7.2 IDE 中完成输入后，如何跳过自动插入的引号？例如，当我在引号中输入我想要输入的内容并且我的光标在这里（光标由管道表示）时：

```
 <div class="foo|" 
```

如何在引号之前跳过引号而不必将我的小指伸展到结束键或右箭头键？

尽管这听起来很愚蠢，但请允许我表达我对这个问题的诚意。它大大降低了我的打字速度，并导致我不断分心。我知道在 Eclipse 中这是通过 tab 键完成的，但这在 NetBeans 中不起作用。我可能已经花了大约一个小时的时间来寻找这个非常基本的问题的答案，现在我转向 SO。

感谢 SO 上的每个人 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:56:59.787

您可以只输入第二个引号 - netbeans 会计算出您的意思并跳过它插入的引号。如果您是自然打字，这可能是最简单的方法。

# php - 带有图标类的 HTML mailto 函数

> ID：15746168
> 
> 赞同：0
> 
> 时间：2013-04-01T15:21:15.620
> 
> 标签：php, javascript, html, mailto

我正在制作一个邮件图标，它可以发送存储在数组中的不同内容的电子邮件。问题是，内容是使用循环隔离的：

```
foreach ($table as $data) {
echo '<a id="email-content" href="mailto:?body='.$data->content.'"><i class="icon-envelope" ></i></a>';
echo "<div class='search-tmp-div' style='display:none;'><pre class='search'>$data->content</pre></div>";
} 
```

我想知道是否有人可以使用该功能而无需多次打印信封图标。我希望它只打印一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:29:35.660

```
$count = 0;
foreach ($table as $data) {
echo "<a id="email-content" href="mailto:?body='.$data->content.'">";
if($count == 0){ echo '<i class="icon-envelope"></i>';}
echo "</a><div class='search-tmp-div' style='display:none;'><pre class='search'>$data->content</pre></div>";
$count++;
} 
```

这只是添加了一个最初值为 的计数器，因此在第一个循环上`0`打印（其中）。`<i class...></i>``$count == 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:25:08.917

是的，有很多，替代方法的一个例子是：

1.  创建图标按钮
2.  创建一个 html 表
3.  在每一行中，放置一个带有复选框或单选框的列（用于选择）
4.  单击图标按钮后，您将获得选定的行并发送请求的电子邮件

## 编辑：

您需要的一个示例是：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
        $(document).ready(function () {
            $("#btn").click(function () {
                selector = "content-"+$("input[type=radio]:checked").val();
                location.href = "mailto:?body="+$("#"+selector).text();
            });
        });
</script>
<?php

$table = array( array( "id" => 1, "content"=>"content 1") , array( "id" => 2, "content"=>"content 2"), array( "id" => 3, "content"=>"content 3"), array( "id" => 4, "content"=>"content 4") );

echo '<img id="btn" src="http://cdn1.iconfinder.com/data/icons/Primo_Icons/PNG/128x128/email_send.png" width="40px" style="cursor:pointer;" />';
foreach ($table as $data) {
    echo "<div class='search-tmp-div' style='display:block;'>";
    echo "<input type=\"radio\" name=\"content\" value=\"{$data['id']}\">";
    echo "<pre class='search' id=\"content-{$data['id']}\">{$data['content']}</pre></div>";
} 
```

# c# - XNA 中的 FPS 风格相机目标计算

> ID：15746173
> 
> 赞同：3
> 
> 时间：2013-04-01T15:21:35.590
> 
> 标签：c#, windows-phone-7, math, xna, 3dcamera

我需要的是根据相机位置、Y 旋转和 Z 旋转来计算我的lookat 3d 矢量在哪里，我会假设任何大于 0 的数字都足以让相机的距离可以看到。

这是我用来控制相机并计算视图和投影矩阵等的静态类。

涉及职位和轮换的班级成员：

```
public static Vector3 Position { get; set; } //Publicly available for use outside the class
public static Vector3 Rotation { get; set; }
private static Vector3 camPos = new Vector3(0.0f, 200.0f, 300.0f); //However we work with these for manipulation of values
private static Vector3 camTarget = new Vector3(0, 0, -1200.0f);

private static float rotY = 0, rotZ = 0; //I believe that these are the correct axis following the right hand catasian coordinate system 
```

我的相机的更新功能：

```
public static void Update()        
{
    //Controls here

    //Update Position here
    Position = camPos;            

    //Update camTarget based on Position, rotY and rotZ <- Need help with this bit

    //After calculating camTarget update Rotation
    Rotation = camTarget;

    UpdateMatrices();
} 
```

UpdateMatrices() 处理所有其他事情并按应有的方式工作，但在这里它只是以防万一您想看到它：

```
public static void UpdateMatrices()
{
    Matrix rotationMatrix = Matrix.CreateRotationX(MathHelper.ToRadians(90));
    Vector3 transformedReference = Vector3.Transform(Vector3.Forward, rotationMatrix);

    View = Matrix.CreateLookAt(Position, Rotation, Vector3.Forward);
    Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, aspectRatio, nearClip, farClip);
    World = Matrix.Identity;

    CamBoundingFrustrum = new BoundingFrustum(View * Projection);
} 
```

有人愿意分享这个秘密吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:43:55.623

与其使用 ，不如从旋转矩阵`Vector3.Forward`中提取`.Forward`和`.Up`向量：

```
 public void UpdateMatrices()
    {
        /// assumes Rotation is a Vector3 containing rotation around each axis expressed in radians
        Matrix rotationMatrix = Matrix.CreateFromYawPitchRoll(Rotation.Y, Rotation.X, Rotation.Z);
        /// View = Matrix.CreateLookAt(Position, Rotation, Vector3.Forward);

        View = Matrix.CreateLookAt(Position, Position + rotationMatrix.Forward, rotationMatrix.Up);
        Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, aspectRatio, nearClip, farClip);

        /// World matrix needs to match your translation and rotation used above
        /// XNA expects matrices to be concatenated in SRT (scale, rotation, then translate) order:
        World = rotationMatrix * Matrix.CreateTranslation(Position);

        CamBoundingFrustrum = new BoundingFrustum(View * Projection);
    } 
```

请注意，您必须将相机的平移（通过您存储的向量，或从相机的世界矩阵`.Translation`属性）添加到`RotationMatrix.Forward`以获得真实目标。

矩阵`.Forward`、`.Backward`、`.Left`、`.Right`、`.Up`和属性与旋转矩阵变换`.Down`的等效属性相同。`Vector3`所以，`RotationMatrix.Forward`指向你正在看的方向，与那个方向`.Up`正交，等等。

如果您只使用`Vector3.Forward`，则不会得到转换后的向量，并且可能会发生奇怪的事情。

其他注意事项：

1.  不要让一切都是静态的。在此期间创建相机类的实例`Game.Initialize()`并将其添加为属性。`static`应该谨慎使用——它会导致各种有趣的线程问题，让你发疯。
2.  我还建议切换到四元数而不是偏航/滚动/俯仰（如果您还没有的话），因为它可以避免万向节锁定，但这是一个不同的话题。

# jquery - 使用 jQuery 选择上一个 div

> ID：15746178
> 
> 赞同：-1
> 
> 时间：2013-04-01T15:21:44.697
> 
> 标签：jquery, html

对于下面的代码示例，在选中 courseID 复选框时，我需要选中或取消选中 courseGroup 复选框。td 根据更高层的另一个查询在页面上重复。

我尝试使用：

```
$('.checkedCourse').click(function() {
  if ($(this).closest("td").find('.checkGroup').prop('checked') == true && this.checked == false)
  $(this).closest("td").find('.checkGroup').prop('checked', false); ... 
```

但它会取消选中页面上的所有 courseGroup 复选框，而不仅仅是该组的复选框。

我也尝试过`$(this).parents('div:eq(0)')`，但我不知道如何回到多个`prev()`div。

```
<td colspan="7">
    <cfoutput query="courseData">
        <div name="div1">
            <input type="checkbox" name="courseGroup" class="checkGroup">
            <div class="courseBreak"></div>
            <div class="courseLine">
                <div class="courseSection">#courseSections#</div>
                <div class="courseTitle">#courseTitle#</div>
                <div>
                    <input type="checkbox" class="checkedCourse" name="courseID" id="courseID" value="#courseId#">
                </div>
            </div>
        </div>
    </cfoutput>
</td> 
```

这是呈现的 HTML： ![呈现的 HTML](https://i.stack.imgur.com/9JYyV.jpg)

当我取消选中该组中的课程时，我需要取消选中粗体组（例如 AMBI 12-13 Sum）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:30:55.233

由于您的复选框在相同的范围内`td`，因此您无法使用它来查找匹配的复选框。但是，您可以使用`div`这是一个共同的父级。

```
$(this).closest(".courseLine").closest("div").find('.checkGroup') 
```

我建议在该外部放置一个类，`div`以避免 2 次调用`closest`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:27:11.377

你可以这样做：

```
if ($(this).closest(".courseLine").prevAll('.checkGroup:first').prop('checked') == true && this.checked == false)
   $(this).closest(".courseLine").prevAll('.checkGroup:first').prop('checked', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:33:11.410

确保您的 ID 是唯一的，然后尝试以下操作：

```
$('.checkedCourse').click(function () {
    $(this).closest('div[name=div1]').find('.checkGroup').prop('checked', !$(this).is(':checked'));
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/n46u7/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:17:24.713

感谢大家，您告诉我的组合有效！

```
if ($(this).closest('div[name=courseGrouping]').find('.checkGroup').prop('checked') == true && this.checked == false)
                $(this).closest('div[name=courseGrouping]').find('.checkGroup').prop('checked', false); 
```

现在我只需要弄清楚如何在下面的表单上检查所有内容时检查顶部的复选框，我确定我只需要循环或其他东西。

# javascript - Highcharts - 散点图：如何将点击信息发送到函数，并将点击信息作为参数

> ID：15746181
> 
> 赞同：0
> 
> 时间：2013-04-01T15:21:51.587
> 
> 标签：javascript, jquery, highcharts, scatter-plot, highslide

我有一个 highcharts 散点图，我想添加一些自定义功能。对于 highcharts 中的项目的每次单击（单击过滤器、数据点和关闭按钮），我想将有关单击的项目的信息发送到我在下面包含的函数“s”。任何人都可以帮助我使用正确的代码来执行此操作吗？或者是否有可能？

这是我的函数 S，我已经编写了它，以便它接受变量 str0 到 str6 并将其作为 URL 变量发送到 s.php 以供进一步处理。

```
 <script type="text/javascript">
function s(str0,str,str2,str3,str4,str5,str6)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    }
  }
xmlhttp.open("GET","/s.php?o="+str0+"&q="+str+"&r="+str2+"&s="+str3+"&t="+str4+"&u="+str5+"&v="str6,true);
xmlhttp.send();
}
</script> 
```

例如，当有人单击数据点时，我想启动该函数，并包括 x 坐标、y 坐标、系列名称、股票代码、“信息”，也许还有字符串“数据点”作为参数。

对于过滤器，我想包含过滤器的名称，以及一个显示“过滤器”的字符串。

对于关闭按钮，与单击数据点的参数相同，但字符串会显示“关闭”而不是“数据点”。

这是完整的代码。

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>
<!-- Additional files for the Highslide popup effect -->
<script type="text/javascript" src="http://www.highcharts.com/highslide/highslide-full.min.js"></script>
<script type="text/javascript" src="http://www.highcharts.com/highslide/highslide.config.js" charset="utf-8"></script>
<link rel="stylesheet" type="text/css" href="style.css" />

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
$(function () {
        $('#container').highcharts({
            chart: {
                type: 'scatter',
                zoomType: 'xy'
            },
            title: {
                text: 'Q1 Eanings and Outlook Forecast'
            },
            subtitle: {
                text: 'site.com proprietary professional'
            },
            xAxis: {
                title: {
                    enabled: false,
                    text: 'Future Outlook'
                },
                labels:{formatter: function() {}  },
                startOnTick: true,
                endOnTick: true,
                showLastLabel: true
            },
            yAxis: {
                title: {
                    enabled:false,
                    text: 'Current Quarter'
                },
                    labels: {
        formatter: function() {
            //return this.value + ' ';
        }
    },

            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                backgroundColor: '#FFFFFF',
                borderWidth: 1
            },
            plotOptions: {
                scatter: {
                    marker: {
                        radius: 5,
                        states: {
                            hover: {
                                enabled: true,
                                lineColor: 'rgb(100,100,100)'
                            }
                        }
                    },
                    states: {
                        hover: {
                            marker: {
                                enabled: true
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<b>{series.name}:</b><br>',
                        pointFormat: '{point.hover}<br><br><b>Current Q: </b>{point.y}/100<br><b>Outlook: </b>{point.x}/100<br><br><div style="text-align:center;">(click for more detail)</div>'
                    },

    cursor: 'pointer',
            point: {
                events: {
                        click: function() {
                            hs.htmlExpand(null, {
                                pageOrigin: {
                                    x: this.pageX,
                                    y: this.pageY
                                },
                                headingText: this.ticker,
                                maincontentText: '<b>Detail:</b> ' + this.info,
                                width: 200
                            });
                        }
                }
            }

                }
            },

                    series: [{
                    name: 'Weak Guidance',color: 'red',data: [
            {x: 40,y:10,ticker:'KORS',info: 's', hover:'<br>br><a href="">read more</a>'},
            {x: 20,y:50,ticker:'LULU',info:'D.<br><a href="">read more</a>'},
            {x:0,y:0,ticker:'ZNGA'},
            {x:4,y:10,ticker:'JCP'},
            {x:6,y:25,ticker:'DECK'}
            ]},

            {name:'Strong Guidance',color:'green',data:[
        {x:60,y:60,ticker:'lulu'},
        {x:100,y:100,ticker:'GPS'},
        {x:70,y:66,ticker:'FB'}
        ]},

        {name:'Inline Company Performance',color:'darkgrey',data:[
        {x:50,y:50,ticker:'GIII'},
        {x:53,y:43,ticker:'BNNY'}

        ]}]

        });
    });

        </script>
            <script type="text/javascript">
function s(str0,str,str2,str3,str4,str5,str6)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    }
  }
xmlhttp.open("GET","/s.php?o="+str0+"&q="+str+"&r="+str2+"&s="+str3+"&t="+str4+"&u="+str5+"&v="str6,true);
xmlhttp.send();
}
</script>
    </head>
    <body>
<script src="../../js/highcharts.js"></script>
<script src="../../js/modules/exporting.js"></script>
<div id="container" style="width: 900px; height: 400px; margin: 0 auto; float:left;"></div>

    </body>
</html> 
```

我尝试做的一件事是......

```
 events: {
            click: function(x,y,str2,str3,str4,str5,str6) {
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    }
  }
xmlhttp.open("GET","/s.php?o="+x+"&q="+y+"&r="+str2+"&s="+str3+"&t="+str4+"&u="+str5+"&v="+str6,true);
xmlhttp.send();
            }
        } 
```

但我不知道如何获取我需要对应于str0、str...str6等的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:51:15.180

首先，我永远不会创建像`S`. 如果您发现自己使用类似的参数创建函数，`arg1, arg2, arg3, arg4`那么您的设计就有问题。忽略一秒钟并回答您的问题。

* * *

Highcharts 允许您为`click`绘图上的许多不同组件设置事件处理程序。您在 plotOptions 中为该特定组件设置这些处理程序。例如，如果你想处理[散点图](http://api.highcharts.com/highcharts#plotOptions.scatter.point.events.click)上的点击事件，你可以像这样设置一个处理程序：

```
 plotOptions: {
        series: {
            point: {
                events: {
                    click: function() {
                        // look at the variable this
                    }
                }
            }
        }
    }, 
```

变量内部`function()`是`this`被点击的项目。在散点图的情况下，它是点对象。在这个函数中，你可以自由地调用你的`s`函数，传递你想要从`this`.

接下来，如果您将关闭按钮创建为 highcharts 上下文按钮，您将在该[组件](http://api.highcharts.com/highcharts#exporting.buttons.contextButton.onclick)上设置一个单击处理程序。对于该处理程序，`this`是图表对象。

使用这种方法，您可以为您关心的每个组件创建一个单击处理程序。从这些处理程序中，您称您为`s`函数。

# git - 那么...如何将文件推送到存储库中？

> ID：15746185
> 
> 赞同：0
> 
> 时间：2013-04-01T15:22:00.283
> 
> 标签：git, github

我有 github 存储库，我已经正确设置了用户设置，我已经生成了 ssh 密钥。我想做的就是将文件夹中的文件推送到这个存储库中。就一次。

很抱歉在这里发布这个问题，但我只是厌倦了花费数小时，与合并错误作斗争，自动推送一些旧文件`git push origin master`等等......

是的，现在在使用“git push origin master”之后，我会自动从以前的 git 存储库中推送所有具有相同名称的文件。

我用过`git reset --hard HEAD`，又做了一切，清空状态，添加，提交，推送——它仍然添加了这些旧文件。

**到底是怎么回事？**:P

编辑：

`git clean -d -x -n`也不起作用

`git reset --hard`- 同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:12:57.397

我假设你在 github 上有一个 git repos 并想向它添加一个目录

1）克隆现有的空仓库

```
git clone 'git@github.com:username/Project.git' 
```

2) cd 进入新目录和 mkdir 一个新目录即 abc1

3）将文件复制到新目录

4）添加新文件和新目录

```
git add "abc1" 
```

5）将新文件和新目录提交到本地git副本

```
git commit -a -m "added abc1 just for fun" 
```

6）将更改推送回遥控器

```
git push 
```

7）检查一切是否正常，在一个完全不同的目录中再次 git clone

希望这可以帮助！如果这不是您需要做的，请在您的问题中添加更多细节，然后会有比我更专业的人来回答！

# sql - 函数计算正确的年份周数

> ID：15746192
> 
> 赞同：1
> 
> 时间：2013-04-01T15:22:23.193
> 
> 标签：sql, sql-server-2008, tsql, week-number

我正在寻找赋予我权利的功能`week-number`。

一年的第一天应该总是在第 1 周。一年的第一个星期六属于第一周。

换句话说：[这就是](https://stackoverflow.com/a/14858473/1216680)我要找的东西，但不是 in `PostgreSQL`，而是 in `sql-server`。

我真的很想使用稍后调用的函数来做到这一点。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:32:29.447

在 SQL Server 中不需要自定义函数；只需使用内置[`DATEPART`函数](http://msdn.microsoft.com/en-us/library/ms174420.aspx)with `week`作为第一个参数：

```
-- first day
select datepart(week, '2013-01-01'); 
```

输出：1

```
-- first Saturday
select datepart(week, '2013-01-05'); 
```

输出：1

```
-- first Sunday
select datepart(week, '2013-01-06'); 
```

输出：2

```
-- today
select datepart(week, '2013-04-01'); 
```

输出：14

这是一个现场演示：[http ://www.sqlfiddle.com/#!3/d41d8/11802](http://www.sqlfiddle.com/#!3/d41d8/11802)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:40:34.660

选择 datepart(week, getdate()) 作为 CurrentWeekofYear

# javascript - 如何测试哪个是滚动的 HTML 或 Body

> ID：15746194
> 
> 赞同：0
> 
> 时间：2013-04-01T15:22:27.030
> 
> 标签：javascript, jquery, scrolltop

我尝试使用自己的方式替换滚动，但是有什么方法可以测试哪个元素（HTML 或 BODY）能够使用 javascript（jQuery）在浏览器上滚动？

我尝试在 DOM 检查器上查看两者，它们都具有 scrollTop 属性，但只有一个能够更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:39:51.187

如果我说对了，您想检查 body 或 html 是否滚动。这不会为你做这项工作：

```
$(window)
.on('scroll', 'html', function() {
    htmlScroll();
})
.on('scroll', 'body', function() {
    bodyScroll();
}) 
```

# c++ - 它是什么： int (*z())[5];

> ID：15746197
> 
> 赞同：1
> 
> 时间：2013-04-01T15:22:29.113
> 
> 标签：c++, arrays, pointers, function-pointers

```
int (*z())[5]; 
```

这是什么？如果我把它作为全局声明放在 main 之前，它会编译。我认为 z() 将是一个指针（**"z()"**）所以尝试了：

```
int itab[5]={0,1,2,3,4};
((z())[0])[0]=itab; 
```

这给出了错误：

> 错误：从 'int*' 到 'int' 的无效转换</p>

所以我想啊哈，所以我很接近并尝试了：`((z())[0])[0]=*itab;` 它编译但给出了链接器未解析的符号错误：

> g++ -o dist/Debug/GNU-Linux-x86/cppappl_example4 build/Debug/GNU-Linux-x86/main.o build/Debug/GNU-Linux-x86/main.o：在函数`main': /NetBeansProjects/cppappl_example4/main.cpp:242: undefined reference to`z()'

所以我的问题是：这个声明正确吗？如果是，那么它是什么，如何使用它？

* * *

编辑：答案中给出的链接确实有很大帮助：

[大卫安德森的螺旋法则](http://c-faq.com/decl/spiral.anderson.html)

[和 cdecl.org](http://cdecl.org/)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T15:24:16.443

```
int (*z())[5]; 
```

这是一个`z()`返回指向 5 int 数组的指针的函数`int (*)[5]`。

```
((z())[0])[0]=itab; 
```

左侧调用函数（之前声明）并产生一个`int (*)[5]`（调用它`x`），你用它取消引用`x[0]`（转换为`*(x+0)`，有效地`*x`）产生一个 5 int 数组（调用它`y`）你再次用 取消引用`y[0]`，产生一个*左值*引用到第一个元素，因此 a `int&`.

右手边是一个5 int 类型数组的*左值*。这将衰减为指向 int 的指针`int*`，因此仅检查您拥有的类型：`int & = int *`，这是无效的。

如果将`[0]`加到右侧，这会导致取消引用并产生一个*左值*，该左值引用 中的第一个元素`itab`，该元素的类型为`int`，现在表达式是有意义的（类型明智），因为它是`int & = int`。

现在的问题是您没有在`z`任何地方定义该函数，因此链接器会抱怨。

> 这个声明正确吗？如果是，那么它是什么，如何使用它？

这是正确的，是否需要是另一回事。可能的定义`z`是：

```
typedef int int5[5]; // simplify syntax later on
int5* z() {
  static int array[5] = {}; 
  return &array;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:24:24.287

它是一个函数，它返回一个指向由 5 组成的数组的指针`ints`。

# c# - 生成可预测的随机数 C#

> ID：15746198
> 
> 赞同：1
> 
> 时间：2013-04-01T15:22:35.980
> 
> 标签：c#, .net

我想要生成随机数 - 除了给定相同的种子，它们应该总是相同的。怎么可能做到这一点？

例如，给定种子“我喜欢海龟”，无论何时/多少次调用它，它都应该生成一个数字，例如 1234。我需要这个用于安全应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:23:46.197

这正是伪随机数生成器 (PRNG) 的工作原理。当以相同的方式播种时，它们会产生相同的伪随机数序列。

看看[`Random`](http://msdn.microsoft.com/en-gb/library/ctssatww.aspx)类的构造函数的文档：

> 为不同的 Random 对象提供相同的种子值会导致每个实例产生相同的随机数序列。

请注意，根据您在问题中的示例，PRNG 使用数字种子而不是字符串。如果您需要加密安全的 PRNG，那么您将需要使用除 之外的类`Random`，尽管关于种子的相同原则也适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:25:06.193

如果您提供相同的种子，Random 类将生成相同的数字序列[。](http://msdn.microsoft.com/en-us/library/system.random.aspx)

如果您只想从给定字符串返回可预测的数字，请使用[hash](https://stackoverflow.com/questions/622900/c-sharp-hashes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:33:59.073

如果您正在做安全工作，那么使用图书馆确实会为您提供更好的服务，但是如果您绝对必须自己做...

看起来您更愿意计算哈希码。

[这是一些关于从字符串生成 MD5 哈希码的信息](http://www.etechplanet.com/blog/generate-md5-hash-code-from-a-string-using-c.aspx)

这是该页面上的代码示例

```
public static  string CalculateMD5Hash(string strInput)
{
  MD5 md5 = System.Security.Cryptography.MD5.Create();
  byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(strInput);
  byte[] hash = md5.ComputeHash(inputBytes);            

  StringBuilder sb = new StringBuilder();           
  for (int i = 0; i < hash.Length; i++)           
  {               
    sb.Append(hash[i].ToString("x2")); 
  }         
  return sb.ToString();       
} 
```

# event-handling - 无法实例化类型 EventHandler

> ID：15746200
> 
> 赞同：1
> 
> 时间：2013-04-01T15:22:50.877
> 
> 标签：event-handling, instantiation

```
if (savedInstanceState != null)                 
    mHandler = new EventHandler(Main.this, mFileMag, savedInstanceState.getString("location"));

else
    mHandler = new EventHandler(Main.this, mFileMag); 
```

错误是

> 无法实例化类型 EventHandler

我该如何解决这个错误？

# jquery-ui - Three.js 的 GUI 系统

> ID：15746202
> 
> 赞同：7
> 
> 时间：2013-04-01T15:22:59.330
> 
> 标签：jquery-ui, three.js

将表单、按钮、复选框等 GUI 控件“附加”到 three.js 场景中的对象的好方法是什么？

即，我想展示一个 3D 模型，让用户单击并选择该模型中的东西，然后看到一个弹出菜单，该菜单将他引导到允许他设置其属性、执行其他操作等的表单。

（如果我使用 JMonkeyEngine，一个粗略的等价物可能是[Nifty GUI 。）](http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:nifty_gui)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T19:23:57.837

我将 jQuery UI 组件与 Three.js raycaster 一起使用。

在我的 HTML 中：

```
<div id="main-canvas">
    <div id="interface">
        markup for your various modals, etc...
    </div>
</div> 
```

[我在这里](http://mrdoob.github.io/three.js/examples/canvas_interactive_cubes.html)使用 Doob 先生的光线投射示例来处理画布上的点击。如果射线击中一个对象，我会触发 jQuery UI 组件的代码片段。例如，当用户单击行星球体对象时，触发打开模式。在模式中，您可以触发 WebGL 画布中发生的事情。

由于我的应用程序占据了整个窗口，我不得不做一些 CSS 来确保嵌套的界面 div 不会导致任何滚动条。

```
body {
    background-color: black;
    margin: 0px;
}

div#interface {
    position:absolute;
    width: 100%;
} 
```

这对我来说非常有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T16:03:12.927

dat.GUI 是 Three.js 用户中用于此类事情的流行库：[http](http://code.google.com/p/dat-gui/) ://code.google.com/p/dat-gui/它甚至包含在 Three.js 发行版中，位于 /examples/js/libs/ 下

这是它的一个使用示例：http: [//jabtunes.com/labs/3d/dof/webgl_postprocessing_dof2.html](http://jabtunes.com/labs/3d/dof/webgl_postprocessing_dof2.html)

我发现的唯一问题是，如果您对内置控件不满意，则很难创建自定义控件/小部件。它仍然很不错。

对于用鼠标选择/激活对象，有很多信息，只需谷歌“three.js Picking”之类的。

# javascript - 如何用 Flotr2 饼图中的值替换百分比？

> ID：15746210
> 
> 赞同：-1
> 
> 时间：2013-04-01T15:23:30.277
> 
> 标签：javascript, flotr, flotr2

在他们的网站上，他们有一个如何绘制饼图的[示例。](http://humblesoftware.com/flotr2/#!basic-pie)但它显示数据的百分比而不是实际值。

我试过弄乱 pie 对象上的格式化程序实例，但无济于事。那么如何显示值而不是百分比呢？更广泛地说，如何自定义 Flotr2 图表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T17:14:40.537

这是显示切片值的饼图格式化程序的示例：

```
pie : {
  show : true, 
  explode : 6,
  labelFormatter : function (pie, slice) {
    return slice;
  }
} 
```

[http://jsfiddle.net/cesutherland/vd5gt/4/](http://jsfiddle.net/cesutherland/vd5gt/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T03:54:41.713

标签格式化程序在 flotr2 中不起作用，它只返回 pie 和 slice，但您可以引用如下数据：

```
var data = [ { data: [[ 'abc', 3 ]], color: '#FFF' }, 
             { data: [[ 'xyz', 9 ]], color: '#000' } ];

    pie : { show : true, 
            labelFormatter : function (pie, slice) { 
                if (slice < 5) return '';
                else return data[0][0] + ' ' + slice + '%'; },
   other : properties
          } 
```

只有一个标签会显示 ('xyz')，因为它超过了阈值。

# selenium - phpunit 硒使用

> ID：15746217
> 
> 赞同：3
> 
> 时间：2013-04-01T15:24:01.010
> 
> 标签：selenium, phpunit, selenium-webdriver, selenium-rc

我的问题是关于 phpunit+selenium 的使用。
这个联合的标准用法是

```
class BlaBlaTest extends PHPUnit_Extensions_SeleniumTestCase
{... } 
```

或者

```
class BlaBlaTest extends PHPUnit_Extensions_Selenium2TestCase  
{...} 
```

第一个 ( `PHPUnit_Extensions_SeleniumTestCase`) 使用起来不太方便（例如，没有`$this->elements('xpath')`)。
Second( `PHPUnit_Extensions_Selenium2TestCase`) 的功能也有限（例如，没有`waitForPageToLoad()` or之类的功能`clickAndWait()`，并且使用类似的东西`$this->timeouts()->implicitWait(10000)`在我看来完全是胡说八道）。

是否可以使用函数式

```
PHPUnit_Extensions_SeleniumTestCase + PHPUnit_Extensions_Selenium2TestCase 
```

在一个测试班？也许 smb 知道 phpunit+selenium 的好替代品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-18T13:36:34.203

受 Dan 的启发，我写了这个供使用`PHPUnit_Extensions_Selenium2TestCase`，它似乎工作正常：

```
/** 
 * @param string $id - DOM id
 * @param int $wait - maximum (in seconds)
 * @retrn element|false - false on time-out
 */ 
protected function waitForId($id, $wait=30) { 
  for ($i=0; $i <= $wait; $i++) { 
    try{ 
      $x = $this->byId($id); 
      return $x; 
    } 
    catch (Exception $e) { 
      sleep(1); 
    } 
  } 
  return false; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T11:56:38.720

很抱歉让这个问题复活，但我希望能为任何偶然发现这个问题的人消除一些困惑。

你是说你想要从有变通方法的地方获得功能*并*`RC`结合`WebDriver`起来，但我不推荐它。首先，您需要了解[这两个框架之间的区别](https://stackoverflow.com/questions/11535950/difference-between-selenium-rc-and-webdriver)。

 *我的简要定义...

*   **Selenium RC** ( `PHPUnit_Extensions_SeleniumTestCase`) 是面向脚本的。我的意思是它会以你期望页面响应的方式运行你的测试。这通常需要更明确的命令，例如`waitForPageToLoad()`您在等待元素出现和/或页面加载时提到的命令。
*   **Selenium WebDriver** ( `PHPUnit_Extensions_Selenium2TestCase`) 使用更原生的方法。它切断了“中间人”并通过您选择的浏览器驱动程序运行您的测试。使用该`waitForPageToLoad()`示例，您无需在代码中打开页面的任何位置显式放置它，因为 WebDriver 已经知道页面何时加载，并且将在页面加载请求完成时恢复测试。

如果您需要在 WebDriver 中定义一个隐式超时，您只需将其放在`setUp()`将在您的测试类中扩展的基本 Selenium 类中的方法中；

```
class BaseSelenium extends PHPUnit_Extensions_Selenium2TestCase {

     protected function setUp() {

           // Whatever else needs to be in here like setting
           // the host url and port etc.

           $this->setSeleniumServerRequestsTimeout( 100 ); // <- seconds
     }
} 
```

这将愉快地跨越您的所有测试，并且每当页面加载时间超过加载时间时都会超时。

虽然我个人更喜欢`WebDriver`（`RC`主要是因为它快得多！）但可用的方法之间存在很大差异。每当我最近将很多`RC`测试转换为时遇到困难，`WebDriver` [我总是首先转向这个](https://github.com/giorgiosironi/phpunit-selenium/blob/master/Tests/Selenium2TestCaseTest.php)。它对几乎所有情况都有很好的参考。

我希望这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:17:29.327

对于在 Selenium2 中不可用的诸如 waitForPageToLoad() 和 clickAndWait() 之类的函数，您可以通过使用 try catch 块以及隐式等待和显式休眠来重现这些函数。

因此，对于像 clickAndWait() 这样的函数，您可以定义您正在等待的元素，然后在设定的秒数内检查该元素是否存在。如果元素不存在，try catch 块将阻止错误传播。如果元素确实存在，您可以继续。如果元素在设定的时间后不存在，则冒泡错误。

我建议使用 Selenium2，然后复制您认为框架中缺少的任何功能。

例子：

```
def wait_for_present(element, retry = 10, seconds = 2)
  for i in 0...retry
    return true if element.present?
    sleep(seconds)
  end
  return false
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-21T14:45:27.593

您可以尝试使用特征来扩展两个不同的类[http://php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php)

```
 class PHPUnit_Extensions_SeleniumTestCase{
       ...
    } 
```

将 PHPUnit_Extensions_Selenium2TestCase 类更改为特征：

```
 trait PHPUnit_Extensions_Selenium2TestCase {
       ...
    }

    class blabla extends PHPUnit_Extensions_SeleniumTestCase {
        use PHPUnit_Extensions_Selenium2TestCase;

        your tests here..
    } 
```*

# php - 是否可以暴力破解幸运票？

> ID：15746222
> 
> 赞同：0
> 
> 时间：2013-04-01T15:24:09.260
> 
> 标签：php, arrays

我有一个问题需要计算“幸运票”的数量，其中每张票有 6 个数字，而“幸运”票的前 3 个数字的总和等于后 3 个数字的总和。我知道这个问题可以通过使用一些代数公式来解决，但不幸的是我不知道代数，所以我想通过蛮力解决它 - 制作 2 个数组，将它们相加并像这样相互比较：

```
<?php

$intitial_number = 999999;
$A = array();
$B = array();

for(;$intitial_number > 0; $intitial_number--) {

$string = (string)$intitial_number;

    $len = strlen($string);

    for($i = 0; $i < 3; $i++) {
        $A[] = $string[$i];

    }

    for($i = 3; $i < 6; $i++) {
        $B[] = $string[$i];

    }

    if (array_sum($A) == array_sum($B)) echo 'Ok';

}
?> 
```

当我尝试运行它时，我得到：

> 好的
> 致命错误：第 26 行的 /Applications/MAMP/htdocs/Exersize/LuckyTicket.php 中超过了 30 秒的最大执行时间

我的错误是什么？甚至有可能像这样解决它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:33:28.807

在 php.ini 中添加或编辑这一行

> > max_execution_time = 0

或者只需在 LuckyTicket.php 文件的顶部添加以下行：

> > ini_set('max_execution_time', 0);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:34:56.267

你只需要数一数吗？1, 2, 3, 4, ..., 999 中的数字之和是三角形数：

我在javascript中这样做只是因为:)

```
for (i=0; i<1000; i++) {
    a[Math.floor(i/100)+(Math.floor(i/10)%10)+i%10] ++;
}

[1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 63, 69, 73, 75, 75, 73, 69, 63, 55, 45, 36, 28, 21, 15, 10, 6, 3, 1]

Then you just square the numbers to get the total:

1*1 + 3*3 + ... 

s = 0;
for (i=0; i<28; i++) { s += a[i]*a[i] }

= 55252. 
```

整洁的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:43:04.213

干得好。

```
$tickets = array();

for($intitial_number = 0; $intitial_number < 1000000; $intitial_number++) {

    $int = str_pad($intitial_number, 6, '0', STR_PAD_LEFT);
    $split = str_split($int);   

    if(($split[0] + $split[1] + $split[2]) == ($split[3] + $split[4] + $split[5])){
        $tickets[] = $int;
    }
}

print_r($tickets); // List ticket Numbers
echo count($tickets); // Number of lucky tickets. 
```

# algorithm - 8皇后问题算法的一些疑惑

> ID：15746226
> 
> 赞同：-2
> 
> 时间：2013-04-01T15:24:14.060
> 
> 标签：algorithm, theory, n-queens

我正在研究8皇后问题，我认为以下算法可以解决这个问题（但似乎不正确）

我的算法在 8X8 棋盘上以这种方式工作：

1.  一开始在棋盘的随机位置放一个皇后
2.  将当前女王的水平线、垂直线和两条对角线上的所有位置标记为无法使用。
3.  将另一个皇后放在棋盘上仍然空闲的任何位置
4.  重复这个过程（从第 2 点开始），直到板上有可用的位置

我已经在纸上尝试过这个解决方案，但通常我只能放置 7 个皇后而不是皇后......

所以我认为这个解决方案能够放置一些不能互相吃掉的皇后，但它不能确保，如果我使用 nXn 板，我总是可以放置 8 个皇后......

这是真的吗？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:29:30.250

为您的算法添加回溯。如果放置第 7 个皇后会导致没有第 8 个皇后的位置，那么这对第 7 个皇后来说是一个糟糕的位置。所以删除它并为它选择一个不同的位置。如果你的第 7 个皇后的位置用完了，这意味着第 6 个皇后的位置不好，等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T16:55:31.207

**@miorel**关于回溯是完全正确的。只是为了好玩，我尝试使用简单的递归算法在 C/C++ 中解决这种蛮力，并进行了一个简单的优化：

我们知道，对于任何给定的问题大小 N，每个皇后都将位于单独的列中。所以我们甚至不尝试其他列。所以想法是这样的：

*   每个皇后都有自己的列，因此皇后 1 进入第 1 列，皇后 2 进入第 2 列，以此类推。
*   所以真正的目标是为每个皇后挑选一行。从第一个皇后开始，让我们依次尝试每一行。我们通过在可能的行中放置一个皇后来做到这一点，然后进行递归调用以放置第二个、第三个和第四个皇后。
*   在检查放置是否兼容时，我们只需要检查 a) 同一行是否有皇后 b) 是否有对角线皇后。

    ```
    #include <stdlib.h>
    #include <stdio.h>

    int solveQueens(int queenIndex, int sz, int * positions) {
        for (int i=0; i<sz; i++) {
            int valid = 1;
            for (int j=0; j<queenIndex; j++) {
                int diff = queenIndex-j;
                if ( 
                        (positions[j]==i)
                    ||  (positions[j]+diff == i) 
                    ||  (positions[j]-diff == i)
                ) {
                    valid = 0;
                    break;
                }
            }

            if (valid) {
                positions[queenIndex]=i;
                if (queenIndex < sz-1) {
                    // Recursive call
                    int res = solveQueens(queenIndex+1, sz, positions);
                    if (res) 
                        return 1;
                } else {
                    return 1;
                }
            }
        }
        return 0;
    }

    void printQueens(int sz, int * positions) {
        for (int i=0; i<sz; i++) {
            printf("%c%d ", (char)(i+(int)'A'), positions[i]+1);
        }   
    }

    void queens(int sz) {
        int * positions = (int *)malloc(sizeof(int)*sz);
        if (solveQueens(0, sz, positions)) {
            printQueens(sz, positions);
        } else {
            printf("No solutions found\n");
        }
        free(positions);
    }

    int main() {
        queens(24);
        return 0;
    } 
    ```

我确信这不是最佳算法，但它在 24 板大小的板上工作时间不到 1 秒。

# vb.net - VB确定字符串中的值

> ID：15746229
> 
> 赞同：0
> 
> 时间：2013-04-01T15:24:21.080
> 
> 标签：vb.net, validation

我正在寻求有关我的程序的帮助。我有一个用户输入 6 位数字；其中输入必须是字母数字。我已经完成了`TryParse`数字的方法，但我正在寻找字符串是否包含 alpha 的验证。

我知道您必须使用`ASC`，但不确定如何制定范围说`Asc((Chr(65) <= Chr(90)))`（AZ 之间）和说（如果我的输入包含 6 个字符内的任何这些值，则返回 true。我不断得到重载解决方案和希望知道如何正确编码，以便变量准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:26:42.140

这是使用正则表达式的好地方

```
Dim input = ...
If Regex.IsMatch(input, "^\w+$") AndAlso input.Length = 6 Then
  ' It's a match
Else
  ' It's not a match
End If 
```

这将匹配任何仅由长度等于的字母组成的字符串`6`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:26:49.330

您可以遍历每个`char`并检查它是否是字母。如果是这样，请将标志设置为 true。

```
Dim containsAlpha Boolean = False
For i As Integer = 0 To input.Length - 1
    If Char.IsLetter(input(i)) Then
        containsAlpha = True
        Exit For
    End If
Next 
```

[Char.IsLetter](http://msdn.microsoft.com/en-us/library/yyxz6h5w.aspx)将匹配 Unicode 字母，因此不仅仅是拉丁语 AZ（可能是也可能不是您真正想要的）。

# f# - 为什么延续避免stackoverflow？

> ID：15746230
> 
> 赞同：12
> 
> 时间：2013-04-01T15:24:23.527
> 
> 标签：f#, tail-recursion, continuation-passing

我一直在尝试理解延续/CPS，并且从我能收集到的内容中，它建立了一个延迟的计算，一旦我们到达列表的末尾，我们就会调用最终的计算。

我不明白的是，当 CPS 看起来类似于根据示例 1 中的幼稚方法构建嵌套函数时，为什么 CPS 会阻止 stackoverflow。对不起，很长的帖子，但试图展示这个想法（以及可能出错的地方）基本：

所以：

```
let list1 = [1;2;3] 
```

**示例 1：“天真的方法”**

```
let rec sumList = function
    |[] -> 0
    |h::t -> h + sumList t 
```

因此，当它运行时，它会迭代地导致：

1.  `1 + sumList [2;3]`
2.  `1 + (2 + sumList [3])`
3.  `1 + (2 + (3 + 0))`

所以嵌套（和溢出问题）可以通过尾递归来克服——运行一个累加器，即

**“示例 2：尾递归”**

```
let sumListACC lst =
    let rec loop l acc =
        match l with
        |[] -> acc
        |h::t -> loop t (h + acc)
    loop lst 0 
```

IE，

1.  `sumList[2;3] (1+0)`
2.  `sumList[3] (2+1)`
3.  `sumList[] (3+3)`

因此，因为累加器在每一步都被评估，所以没有嵌套，我们避免了爆栈。清除！

接下来是 CPS，我知道当我们已经有一个累加器但函数不是尾递归时，例如使用 Foldback，这是必需的。尽管在上面的示例中不需要，但将 CPS 应用于此问题会给出：

**“示例 3：CPS”**

```
let sumListCPS lst =
    let rec loop l cont =
        match l with
        |[] -> cont 0
        |h::t -> loop t (fun x -> cont( h + x))
    loop lst (fun x -> x) 
```

据我了解，迭代地这可以写成：

1.  `loop[2;3] (fun x -> cont (1+x))`
2.  `loop[3] (fun x ->cont (1+x) -> cont(2+x))`
3.  `loop[] (fun x -> cont (1+x) -> cont(2+x) -> cont (3+x)`

然后从右边依次减少，最后一个`x = 0` 即：

*   `cont(1+x)-> cont(2+x) -> cont (3+0)`
*   `cont(1+x)-> cont(2+x) -> 3`
*   `cont(1+x) -> cont (2+3)`
*   ...
*   `cont (1+5) -> 6`

我想这类似于：

```
cont(1+cont(2+cont(3+0)))    
(1+(2+(3+0))) 
```

对原始帖子的更正 - 意识到它是从右侧评估的，例如替换为上述示例`cont(h +x)`的`cont(h+2*x)`产量`17`，与：`(1+2*(2+2*(3+2*0)))`

即，正是我们在示例 1 中开始的地方，基于此，因为我们仍然需要跟踪我们来自哪里，为什么使用它可以防止示例 1 遭受的溢出问题？

我知道它没有，我哪里出错了？

我已经阅读了以下帖子（多次），但上述困惑仍然存在。

[http://www.markhneedham.com/blog/2009/06/22/f-continuation-passing-style/](http://www.markhneedham.com/blog/2009/06/22/f-continuation-passing-style/)

[http://codebetter.com/matthewpodwysocki/2008/08/13/recursing-on-recursion-continuation-passing/](http://codebetter.com/matthewpodwysocki/2008/08/13/recursing-on-recursion-continuation-passing/)

[http://lorgonblog.wordpress.com/2008/04/05/catamorphisms-part-one/](http://lorgonblog.wordpress.com/2008/04/05/catamorphisms-part-one/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-01T15:52:47.023

发生的事情很简单。

.NET（和其他平台，但我们现在正在讨论 F#）将信息存储在两个位置：堆栈（用于值类型、用于指向对象的指针以及用于跟踪函数调用）和堆（用于对象）。

在常规的非尾递归中，您可以跟踪堆栈中的进度（很明显）。在 CPS 中，您可以跟踪 lambda 函数（在堆上！）中的进度，并且尾递归优化可确保堆栈不受任何跟踪。

由于堆明显大于堆栈，因此（在某些情况下）最好通过 CPS 将跟踪从堆栈移动到堆。

# mysql - 同一个 MySQL 表的双向复制

> ID：15746234
> 
> 赞同：7
> 
> 时间：2013-04-01T15:24:33.867
> 
> 标签：mysql, replication

AppA 从`dbA.tableA`. AppB 从`dbB.tableA`. tableA 定义在这些数据库中是相同的。首先`dbB.tableA`是从复制而来`dbA.tableA`（假设两者都有 5 行）。

`row6`由 AppA 创建（例如主键 6）`row7`由 AppB 创建（例如主键 7）。我想`row7`被复制到`dbA.tableA`和`row6`到`dbB.tableA`

1.  这甚至可以设置双向复制，以便AppA，AppB在任何时间点查看相同的数据。

2.  如果主键是自增的，是否有可能保持数据的完整性，或者是否有可能在主键上发生冲突。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T20:15:12.783

是的，主-主复制在 mysql 中得到了很好的支持，所以你可以做你想做的事。

您将希望 dbA 和 dbB 具有不同的 auto_increment_offsets，并将 auto_increment_increment 设置为大于默认值 1。看

[http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html](http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html)

总之，您将了解到您需要添加到各自的 my.cnf 文件中，例如：

分贝：

```
[mysqld]
server-id = 1
auto_increment_increment = 10
auto_increment_offset = 1 
```

分贝：

```
[mysqld]
server-id = 2
auto_increment_increment = 10
auto_increment_offset = 2 
```

那么当服务器 A 插入值时，它将使用 1、11、21、31 之类的值作为其主键值。服务器 B 将使用 2、12、22、32 等。这样它们就不会发生冲突。

显然，您可以为您的 auto_increment_increment 使用较低的值，例如 2，但根据您以后希望如何扩展集群，您可能需要给自己一些空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:55:04.517

**这个答案假设您在同一个 mysqld 上运行两个数据库/模式。如果您在不同的 mysqlds 上运行，请参阅 Hexist 的回答**

当然有可能发生冲突：谁说 id 7 不是在 dbA 中创建的，而在复制发生之前，在 dbB 中创建了一个不同的 id 7？特别是在使用自动增量时

您可以尝试多种方法，其中包括：

*   ~~如果您的 id 是有符号整数，则最大值为 2147483647。在 dbB 中尝试将初始自动增量设置为 1073741824（将其设置为最大值的一半）。这样，在 dbB 中创建的所有 id 都位于更高的 id 区域中，并且不太可能发生冲突。~~
*   尝试使用 guid 而不是自动递增 id（[我应该如何在 MySQL 表中存储 GUID？](https://stackoverflow.com/questions/412341/how-should-i-store-guid-in-mysql-tables)）

如果 dbA 和 dbB 都在同一个 mysql 服务器上，您可以通过按计划运行这些查询或使用触发器（在插入时）简单地实现“复制”

```
Insert into dbA.tableA values (select b.* from dbB.tableA b left join dbA.tableA a on b.id = a.id where a.id is null)
Insert into dbB.tableA values (select a.* from dbA.tableA a left join dbB.tableA b on a.id = b.id where b.id is null) 
```

**编辑**：对不起，您不能使用自动增量。自动增量将始终基于已经存在的最高 id。所以你不能强制一台机器上的自动增量在它获得更高的 id 后保持低电平。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T20:56:52.993

我建议将存储/检索控制权交给 AppC，它可以同时访问`dbA`和`dbB`. AppC 也会创建主键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:11:15.917

假设您在同一个 mysqld 实例上运行两个数据库，我将添加我*可怜的人的复制*：

```
create view dbB.tableA as select * from dbA.tableA; 
```

这本身就是 MySQL 的*穷人的同义词*，但在实践中它的效果非常好，包括插入、更新和删除操作。

基本上，这意味着取消两个副本中的一个并用另一个副本的同义词替换它。这是否符合您的需求，只有您自己知道。

# sed - 如何使用 sed 从我的 html 中提取两个字段

> ID：15746235
> 
> 赞同：0
> 
> 时间：2013-04-01T15:24:34.870
> 
> 标签：sed

我想要两个匹配项：Campus 和 Mode，但以下代码仅获取 Campus：

```
sed -n 's/.*<th colspan="7">Campus:\(.*\)<br \/> Mode:\(.*\)<\/th><\/tr>.*/\1/p' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:42:02.203

由于您的替换字符串仅包含`\1`反向引用，因此它只会打印第一个匹配的组，即来自`Campus:\(.*\)`. 尝试将替换字符串更改`\1 \2`为包含两者...

# php - php包含wamp

> ID：15746238
> 
> 赞同：0
> 
> 时间：2013-04-01T15:24:39.920
> 
> 标签：php, include, wamp

我正在本地 wamp 堆栈上开发一个站点。我创建了一个别名来查看该站点，所以我去`localhost/eee/`查看它。理想情况下，我想去，`www.eee.lo`但自从升级到 win8 后，我无法让它工作。

所以这就是问题所在，我正在为网站制作模块，所以我不必更改所有代码等......而且当我迁移到在线时，我不想四处更改所有 url服务器，所以我正在创建一个名为`_control.php`它的文件；

```
$_SITELOC = "localhost/eee/"; 
```

然后每次我想包含一个文件时，我都会去；

```
include "$_SITELOC/scripts/inc/_header.php"; 
```

但这不起作用，我无法弄清楚为什么好像我`echo`是它而不是`include`它，然后我把它打印出来的东西放到它进入正确文件的 url 中。但是它会在包含时引发错误，它会给出两个警告；

```
Warning: include(localhost/eee/scripts/inc/_header.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory in C:\Users\Chris\Documents\EEE\Website\Site\index.php on line 3

Warning: include() [<a href='function.include'>function.include</a>]: Failed opening 'localhost/eee/scripts/inc/_header.php' for inclusion (include_path='.;C:\php\pear') in C:\Users\Chris\Documents\EEE\Website\Site\index.php on line 3 
```

我在某处读到它可能与包含路径有关，所以我尝试了；

```
set_include_path(get_include_path() . PATH_SEPARATOR . $_SITELOC."/scripts/inc/"); 
```

但这也不起作用，现在我不知道该去哪里。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:43:58.030

`localhost/eee/`是您可以在网络浏览器中使用的公共地址。这个公共地址应该写成`http://localhost/eee/`. 当您移至 Web 服务器时，您将获得公共地址`http://www.eee.lo/`。

包含文件时，您必须使用文件路径。例如，如果您`D:\`在 Windows 上有 www（或 httpd，等等）目录，那么您的包含路径应​​该以`D:\www\eee\`.

所以，基本上你必须使用两个变量来保持路径。

```
$_SITELOC = "http://localhost/eee/"; //For all URLs used in your HTML document.
$_INCPATH = "D:\www\eee\\";  //For all internal file includes. 
```

在实践中，您将需要这两个，并且最好将网站地址和内部路径保留在主脚本之外，因为当上传到远程服务器时，不仅您的公共地址会发生变化，而且您还必须处理完全不同的内部（包含）路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:40:25.690

您的想法基本上很好，定义应用程序的一个（根）路径并包含基于它的文件，但不幸的是您做得不太正确。你基本上有两种方法可以做到这一点。
一种方法（我个人觉得更好）是在文件系统中包含本地文件，您可以在其中定义根路径，即

```
define ('ROOT', 'your/document/root/path');
// and then include the files
include ROOT . '/' . '/scripts/inc/_header.php'; 
```

另一种方法是包含一个网络资源，你正在尝试做什么，但你忘记指定你想要使用的方案（协议），即

```
define ('ROOT', 'http://localhost/eee');
// and then include the files
include ROOT . '/' . '/scripts/inc/_header.php'; 
```

[有关更多信息，请参阅文档中`include`](http://php.net/manual/en/function.include.php)提供的示例
**注意：**如果要包含 php 文件的源，即具有函数定义的文件等，请使用第一种方法。包括文件，使用第二种方法将只包括该文件产生的输出。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T15:38:37.417

如果您是一个 URL，当您想要包含脚本的*源*`include()`时，您将（可能）包含脚本执行的*输出*。似乎您实际上想要包含在本地文件系统路径中。

# python - 在辅助函数中调用函数，或调用在较大函数中定义的函数

> ID：15746239
> 
> 赞同：0
> 
> 时间：2013-04-01T15:24:42.960
> 
> 标签：python, list, function, python-2.7

我正在尝试使用 python 创建一个小型查找程序，该程序将显示理论投资组合的所有当前价格，然后提供基本刷新您的投资组合的选项，或查找您选择的新报价。

我可以让程序中的一切正常工作，我遇到的问题是定义的函数。

如果您查看 run_price1()，您会注意到它与 run_price() 相同；但是 run_price() 位于更新函数中。

如果我将其从更新功能中取出，更新功能将不起作用。如果我没有在更新功能之外的某个地方也列出它，那么以后的用户输入将不起作用。

问题：我正在寻找一种方法来调用在另一个函数中定义的函数，或者一种在辅助函数中使用先前定义的函数的方法。

我的代码：

```
import mechanize

from bs4 import BeautifulSoup

def run_price1():

    myBrowser = mechanize.Browser()
    htmlPage=myBrowser.open(web_address)
    htmlText=htmlPage.get_data()
    mySoup = BeautifulSoup(htmlText)

    myTags = mySoup.find_all("span", id=tag_id)

    myPrice = myTags[0].string

    print"The current price of, {} is: {}".format(ticker.upper(), myPrice)

def update():

    my_stocks = ["aapl","goog","sne","msft","spy","trgt","petm","fslr","fb","f","t"]

    counter = 0

    while counter < len(my_stocks):

        web_address = "http://finance.yahoo.com/q?s={}".format(my_stocks[counter])
        ticker = my_stocks[counter]
        #'yfs_l84_yhoo' - that 1(one) is really a lowercase "L"
        tag_id = "yfs_l84_{}".format(ticker.lower())
        def run_price():

            myBrowser = mechanize.Browser()
            htmlPage=myBrowser.open(web_address)
            htmlText=htmlPage.get_data()
            mySoup = BeautifulSoup(htmlText)

            myTags = mySoup.find_all("span", id=tag_id)
            myPrice = myTags[0].string
            print"The current price of, {} is: {}".format(ticker.upper(), myPrice)

        run_price()

        counter=counter+1

update()        

ticker = ""

while ticker != "end":

    ticker = raw_input("Type 'update', to rerun portfolio, 'end' to stop program, or a lowercase ticker to see price: ")
    web_address = "http://finance.yahoo.com/q?s={}".format(ticker.lower())
    tag_id = "yfs_l84_{}".format(ticker.lower())

    if ticker == "end":
        print"Good Bye"

    elif ticker == "update":
        update()

    else:
        run_price1() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:30:56.180

您可以简单地`run_price1()`从`update()`函数调用，现在调用`run_price`.

在模块顶部定义的函数在模块中是全局的，因此其他函数可以简单地通过名称引用并调用它们。

您的函数需要的任何值*都*需要作为参数传入：

```
def run_price1(web_address, tag_id):
    # ...

def update():
    my_stocks = ["aapl","goog","sne","msft","spy","trgt","petm","fslr","fb","f","t"]

    counter = 0

    while counter < len(my_stocks):

        web_address = "http://finance.yahoo.com/q?s={}".format(my_stocks[counter])
        ticker = my_stocks[counter]
        #'yfs_l84_yhoo' - that 1(one) is really a lowercase "L"
        tag_id = "yfs_l84_{}".format(ticker.lower())

        run_price1(web_address, tag_id)

        counter=counter+1 
```

# html - helvetica 字体在 wkhtmltopdf 中不起作用

> ID：15746240
> 
> 赞同：28
> 
> 时间：2013-04-01T15:24:53.920
> 
> 标签：html, css, wkhtmltopdf

我在创建 pdf 时一直在尝试使用 Helvetica 字体，但字体没有反映在 pdf 中。

我做了一些谷歌并找到了一些解决方案，但没有一个是可行的。

***尝试解决方案 1***

我在这里发现了类似的东西： [字体问题](http://code.google.com/p/wkhtmltopdf/issues/detail?id=167&q=helvetica.)

尝试了那里提到的最后一个解决方案

> 解决方法是在您的 css 中**定义 @font-face**并将 src 链接到可通过 wkhtmltopdf 访问的外部主机

但解决方案不起作用。

***尝试解决方案 2*** 我也尝试使用 google font api，但结果仍然不可行。 [黑体字](https://stackoverflow.com/questions/8698539/helvetica-neue-and-helvetica-font)

这是一个示例 [自定义字体示例](https://stackoverflow.com/questions/15746240/helvetica-font-not-working-in-wkhtmltopdf)

***尝试过的解决方案 3*** 我尝试使用 css 属性 @page。但这也行不通。

可行解决方案的方法是什么。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-07-14T18:57:07.267

解决`wkhtmltopdf`字体问题的最简单方法是对字体进行 Base64 编码（[您可以使用此工具](http://www.opinionatedgeek.com/dotnet/tools/base64encode/)）并将其包含在您的 CSS 中：

```
@font-face {
    font-family: 'Helvetica';
    src: url(data:font/truetype;charset=utf-8;base64,AAEAAAATAQA...
} 
```

这适用于所有字体（包括 Google 字体），并保证跨不同机器和操作系统的跨平台兼容性。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-13T09:42:47.427

对我来说，从谷歌字体加载字体不起作用。对我来说，将 base64ed 二进制文件放入 CSS 文件似乎有点多（韩文类型为几兆字节）。我建议安装您需要在机器上使用的字体。对于 Ubuntu，您可以简单地从 Google Fonts 下载字体文件并将文件复制到`$HOME/.fonts`目录并`fc-cache`在命令行中运行命令以重建字体列表。

```
$ mkdir ~/.fonts
$ copy your-font-file.ttf ~/.fonts/
$ fc-cache -fv 
```

对于 Rails 应用程序，您可以符号链接

```
$ ln -s /your/app/root/assets/fonts ~/.fonts 
```

然后您将能够列出所有可用的字体。

```
$ fc-list
Nimbus Sans L:style=Regular Italic
URW Palladio L:style=Roman
Century Schoolbook L:style=Bold Italic
Nimbus Sans L:style=Bold
URW Chancery L:style=Medium Italic
Nimbus Roman No9 L:style=Regular
Century Schoolbook L:style=Bold
Century Schoolbook L:style=Italic
Nimbus Sans L:style=Regular
.... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-30T21:34:26.620

为了加入战斗，`wkhtmltopdf 0.12.1 (with patched qt)`在 linux 上使用这对我有用：

```
@font-face {
    font-family: dejaSansMono;
    src: url('file:///usr/share/fonts/dejavu/DejaVuSansMono.ttf');
} 
```

即，指定`.ttf`. 简单地命名一个字体系列，任何字体系列，即使在浏览器中也不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-23T17:18:14.810

为 linux (x64) 用户扩展 baxangs 答案：您将 ttf 字体文件安装在 /usr/share/fonts/font-folder/font-name

然后在你的css文件中使用fc-list中列出的字体名，你不需要使用@font-face，只需在你的css中使用字体名

例如 Verdana.ttf======

从本地机器复制到服务器到 /usr/share/fonts/Verdana/Verdana.ttf

fc-list 获取字体名称（很可能是 Verdana）

然后在你的 css P{ font-family: 'Verdana'} 中使用

就是这样！我花了一段时间才把它修好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-16T17:25:05.153

我对谷歌的 PT Sans 也有同样的问题。对我有用的是以下过程：

1.  从谷歌下载 PT Sans 并通过[fontsquirrel](http://www.fontsquirrel.com/tools/webfont-generator) 生成器运行它
2.  将@font-face（我只使用ttf）放在css中（在我的情况下是在php文件的html头中）

**请注意**，我没有使用 base64，它按预期工作。

希望能帮助到你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-21T21:04:56.017

要通过**wkhtmltopdf将****HTML 转换为 PDF** ，请尽量避免使用 woff 字体。使用带有 base64 编码的 Google Web 字体的 trutype 格式。

 **最近我尝试使用来自 Google Web Fonts 的 Google Web 字体。但在浏览器中它显示正确，但在将 HTML 转换为 PDF 后不显示。

然后在最后从网上搜索了很多之后，我找到了将字体编码为**base64**编码格式的工具，并且还获得了**@font-face 的**CSS 。**

# ruby-on-rails - Rails - 从另一个对象的控制器将 db 字段设置为 null

> ID：15746248
> 
> 赞同：0
> 
> 时间：2013-04-01T15:25:10.413
> 
> 标签：ruby-on-rails

我试图在断开连接的方法中将机柜的设备属性设置为空。cabinets_controller 调用`@cabinet.devices.destroy(@device)`并且工作正常。在我这样做之前，我想设置`@device.row_id = nil`and `@device.position = nil`。它们在设备模型中都是 Fixnum 和 attr_accesible。当我调用此方法时，它们不会在数据库中被更改。有没有一种方法可以调用`@device`来实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:50:39.670

我猜您正在尝试断开@cabinet 和@device 之间的连接，而没有完全删除@device。如果您已经确定 @device 属于 @cabinet，则执行以下操作可能更直接：

```
@device.row_id = nil
@device.position = nil
@device.cabinet_id = nil
@device.save! 
```

基本上你需要调用 .save 或 .save！在将其他字段设置为 nil 后在 @device 上；当您使用它时，您也可以这样设置cabinet_id。

# php - 创建会话时将 mysql_result 转换为 mysqli

> ID：15746249
> 
> 赞同：0
> 
> 时间：2013-04-01T15:25:15.597
> 
> 标签：php, mysql, mysqli

我正在尝试将 mysql 脚本转换为 mysqli 并碰壁。我正在尝试将 mysql_result 转换为 mysqli 但是不确定如何执行此操作，下面是我的代码

```
$_SESSION['num_user'] = mysql_result(mysqli_query($GLOBALS["___mysqli_ston"], "SELECT COUNT(*) FROM `members` WHERE mem_emailactivated = 1"), 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:34:29.817

尽管很奇怪，但似乎没有一种方法可以在没有准备/执行的情况下进行获取。

```
$stmt = mysqli_prepare($GLOBALS['___mysqli_ston'], "SELECT COUNT(*) AS count ...");
mysqli_stmt_execute($stmt);
mysqli_stmt_bind_result($stmt, $count);
mysqli_stmt_fetch($stmt);
$_SESSION['num_user'] = $count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:27:47.583

你在这里把事情搞混了。您不会`mysql_result`使用`mysqli`. 您将改为使用`mysqli`遍历返回的数组，然后将此数组存储在`$_SESSION`.

```
$result = $mysqli->query("call getUsers()");
if($result){
     // Cycle through results
    while ($row = $result->fetch_object()){
        $user_arr[] = $row;
    }

    $result->close();
}

$_SESSION['num_user'] = $user_arr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:31:29.157

使用[SafeMysql](https://github.com/colshrapnel/safemysql)：

```
$sql = "SELECT COUNT(*) FROM `members` WHERE mem_emailactivated = 1";
$_SESSION['num_user'] = $db->getOne($sql); 
```

# jquery - 使用基于数组的图像填充表格

> ID：15746252
> 
> 赞同：0
> 
> 时间：2013-04-01T15:25:31.870
> 
> 标签：jquery, html, arrays, html-table

我正在尝试通过用书籍封面图像替换库存图像来填充现有的图像表。我有一个 ISBN 编号数组，我想将其连接到获取每个图像的 URL，然后将它们显示在表格中。

该表如下所示（4 行，5 列）：

```
<center><table id="booktable" width="850" border="0" cellpadding="0" cellspacing="6"><tbody align="center">
    <!-- Row 1 -->
    <!-- "http://i.imgur.com/vaFKJ.png" -->
        <tr><td><img src="http://i.imgur.com/vaFKJ.png" width="170" height="230" title="date"></td>
        <td><img src="http://i.imgur.com/vaFKJ.png" width="170" height="230" title="date"></td>
        <td><img src="http://i.imgur.com/vaFKJ.png" width="170" height="230" title="date"></td>
        <td><img src="http://i.imgur.com/vaFKJ.png" width="170" height="230" title="date"></td>
        <td><img src="http://i.imgur.com/vaFKJ.png" width="170" height="230" title="date"></td></tr> 
```

在这里，我定义了我的 ISBN 编号数组。我想用包含 20 个 ISBN 编号的 URL 替换所有 20 个图像标签中的 URL。

```
<script src="jquery-1.9.1.min.js">
        var isbns = ["0525953485", "1439102767", "0307588386", "0316097519", "0307273571", "0399161775", "0399160752", "0765323974", "0770437850", "0553801473", "1414319703", "0399158820", "0062231707", "0441020011", "0345523504", "0765325950", "1451647034", "0812993802", "0312591837", "039915812X"];
        for(var i=0; i<isbns.length; i++) {
            .html("<img src='http://covers.openlibrary.org/b/isbn/'+ isbns[i] + '-M.jpg' width="170" height="230" title="date">"
            }    
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:28:44.980

它应该是

```
<script src="jquery-1.9.1.min.js"></script>
<script>
    $(function(){
        var isbns = ["0525953485", "1439102767", "0307588386", "0316097519", "0307273571", "0399161775", "0399160752", "0765323974", "0770437850", "0553801473", "1414319703", "0399158820", "0062231707", "0441020011", "0345523504", "0765325950", "1451647034", "0812993802", "0312591837", "039915812X"];

        $.each(isbns, function(i, v){
            $('<img src="http://covers.openlibrary.org/b/isbn/'+ v + '-M.jpg" width="170" height="230" title="date">').appendTo('body')
        });
    });
</script> 
```

# javascript - 如何在 http post 上执行 .load()？

> ID：15746253
> 
> 赞同：0
> 
> 时间：2013-04-01T15:25:33.020
> 
> 标签：javascript, jquery, html, ajax

在我的应用程序中，我有一段代码可以“捕捉”锚点上的所有点击，并将其加载到我的页面中：

```
$("a").live("click", function () {
    var src = $(this).attr("href");
    if ($(this).attr("target") === "_blank")
        return true;
    $("#myPage").load(src + " #myPage");
    return false;
}); 
```

现在这适用于所有锚标签。我怎样才能让我的所有 POST 请求（发送表单数据）都像这样？

编辑：正如凯文所说，我尝试使用 .post，但它对我不起作用，我做错了什么？这是代码：

```
$("form").post("submit", function () {
    var src = $(this).attr("action");
    $("#myPage").load(src + " #myPage");
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:58:09.427

使用表单提交事件处理表单 POST 情况

```
$(document).on('submit', 'form', function(){
    var $this = $(this);

    $.ajax({
        url: $this.attr('action'),
        type: 'POST',
        data: $this.serialize()
    }).done(function(responseText){
        $("#myPage").html(responseText)
    });

    return false;
}) 
```

由于您使用的是 jquery 1.9，因此您可能必须将`a`处理程序重写为

```
$(document).on("click", 'a', function () {
    var src = $(this).attr("href");
    if ($(this).attr("target") === "_blank")
        return true;
    $("#myPage").load(src + " #myPage");
    return false;
}); 
```

# c# - Exchange 2003 与 C# smtpclient

> ID：15746255
> 
> 赞同：1
> 
> 时间：2013-04-01T15:25:39.777
> 
> 标签：c#, smtp, exchange-server-2003

我目前正在尝试使用 SmtpClient 通过 Exchange 2003 发送电子邮件。使用下面的代码它不会发送电子邮件，但它不会引发异常，我认为这意味着它正在与 Exchange 服务器建立连接，因为。同样对于服务器设置，我尝试了 mail.server.com 以及 IP 地址，但它仍然没有抛出异常。

```
 public static void emailTest()
    {
        string fromEmail = @"me@me.com";
        string ToEmail = @"me@me.com";          
        string body = "C Stuck Batches"; 
        string subject = "C Stuck Batches"; 

        try
        {
            SmtpClient MyMail = new SmtpClient("x.x.x.x");
            MyMail.DeliveryMethod = SmtpDeliveryMethod.Network;
            MyMail.UseDefaultCredentials = false;
            MyMail.Credentials = new NetworkCredential(@"domain\user", "password"); 

            MyMail.Send(fromEmail, ToEmail, subject, body);
            MessageBox.Show("Sent", "SENT", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
        }
        catch (Exception ex)
        {
            MessageBox.Show("Exception", "Exception", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
        } 
    } 
```

我已经阅读了其他几个问题，但据我所知，大多数其他问题都遇到了某种异常或超时。由于这看起来好像它连接了我不确定问题是什么。如果无法访问服务器会抛出异常吗？如果我将不同的 IP 扔到服务器中，它将引发异常。

此外，我已经尝试了服务器的 IP 和 mail.xx.com，它都不会抛出异常，但是如果我输入任何其他地址，它将失败。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:31:50.950

您的 Exchange 服务器是否设置为从您的 IP 地址中继邮件？如果不是，则邮件可能会被“静默”丢弃而不会引发异常（客户端连接正确，是后端丢弃了电子邮件）

[此链接](http://forums.kayako.com/threads/how-to-setup-windows-2003-and-exchange-2003-smtp-relaying.12411/)提供有关如何在 Exchange 2003 上配置中继的更多信息（我假设“eSupport”在此示例中等同于您的应用程序，即运行您的代码的机器的 IP）。

> 登录到 Exchange 2003 服务器（在我上面的示例中为 192.168.5.25）并启动 Exchange 系统管理器。
> 
> 展开组织名称对象，然后展开服务器节点。展开要控制邮件中继的服务器的 server_name 对象，然后展开 Protocols 节点。
> 
> 展开 SMTP 节点，右键单击要控制邮件中继的虚拟 SMTP 服务器，然后单击“属性”
> 
> 单击中继。
> 
> 在“中继限制”对话框中，有几个选项可用。默认情况下启用“仅以下列表”选项；此选项下方的列表为空。
> 
> 单击添加。输入运行 eSupport 的服务器的 IP 地址（在我上面的示例中为 192.168.5.80）。
> 
> 在“中继限制”对话框中，单击“确定”。
> 
> 单击“应用”，然后在“默认 SMTP 虚拟服务器属性”对话框中单击“确定”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:50:12.880

我遇到的问题是，即使是域管理员也无权访问 SMTP 中继。我必须确保用户在 SMTP 中继中经过身份验证。不管验证用户与使用的电子邮件地址是否相同，该用户都没有访问权限。一旦更正，它就可以毫无问题地发送。

# javascript - 你如何跟踪和可视化 JavaScript Promises？

> ID：15746256
> 
> 赞同：8
> 
> 时间：2013-04-01T15:25:40.247
> 
> 标签：javascript, jquery, testing, promise

在编写一个相当大的 JavaScript 模块，其中包含大量的异步操作，所有这些操作都处理 Promise，调试和遵循 Promise 的流程/状态变得非常困难。

是否有任何工具或框架用于检测测试或模块代码，以让他了解我系统中所有 Promise 的流程？如果它很重要，我正在使用 jQuery 承诺。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:07:33.910

在我的脑海中，并受到@MrLeap 向 发送消息的想法的刺激，`console`通过您自己设计的“适配器”创建 Deferreds 怎么样。

例如（胚胎和未经测试）：

```
var debugMode = true;

function DeferredAdapter(name) {
    var dfrd = $.Deferred();
    if(debugMode) {
        dfrd.notify = function() {
            console.log(name + ': notify');
            if (arguments[0] && typeof arguments[0] == "string")
                console.log(arguments[0]);
        };
        //similar for resolve
        //similar for reject
    }
    return dfrd;
} 
```

这样（当你让它工作时），你可以在调试时做额外的事情，使用一种简单的机制来关闭生产代码中的额外内容，而无需执行所有代码清除`console.log()`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:42:30.100

这会增加相当多的开发开销，但如果您使用 node 作为后端，您可以使用[vows.js](http://vowsjs.org)实现非常强大的异步单元测试。如果您想为自己添加更多工作，如果您正在使用某种其他类型的服务器技术，您可以使用 vows 创建所有响应的模拟版本，并将其用于测试和报告。使用 node.js 模拟服务器还可以让您执行强大的企业^^ 操作，例如模拟某些请求而无法查看前端对其响应的优雅程度。

我希望我有一个比这更好的答案；`console.log`并且`console.dir`是你最好的朋友。把你的回调塞满它们，这样你就可以知道事情发生需要多长时间，以及它们发生的顺序。

# iphone - 如何以编程方式创建 iOS 应用程序视图

> ID：15746257
> 
> 赞同：0
> 
> 时间：2013-04-01T15:25:46.760
> 
> 标签：iphone, ios, objective-c, uiview, uiviewcontroller

我正在编写一个应用程序而不使用故事板/xib 来创建视图，并且不确定放置我的视图设置代码的最佳位置。我尝试了几种不同的方法，但我不确定将视图设置代码与控制器代码分开的最佳方法。

到目前为止我尝试过的方法是：

1.  将我所有的视图设置代码（创建和定位按钮/标签）等放在控制器`viewDidLoad`方法中。我很确定这是一种不好的做事方式，因为您最终会在控制器中使用大量代码。

2.  在方法内部子类`UIView`化和设置界面元素`initWithFrame`。然后，我要么将此视图添加到我的视图控制器视图之上。

    ```
    _customView = [[CustomView alloc] initWithFrame:self.view.frame];
    _customView.customLabel.text = @"Foo";
    [self.view addSubView:_customView] 
    ```

或者我将控制器视图分配为我的`customView`.

```
_customView = [[CustomView alloc] initWithFrame:self.view.frame];
self.view = _customView;
_customView.customLabel.text = @"Foo"; 
```

在尽量让这个问题保持非主观的同时，是否有以编程方式创建 iOS 界面的最佳实践？这些方法中的任何一种都是保持视图代码和控制器代码分离和可重用的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:47:36.173

如果您只需要使用该视图一次，请将代码留在`viewDidLoad`方法中。也许您可以移动在控制器中以特定方法创建视图所需的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // other code here...
    [self createView];
} 
```

此外，如果您的视图将是控制器的视图，您还可以考虑覆盖`loadView`方法并将代码放在那里。`view`来自苹果文档。

> 您可以覆盖此方法以手动创建视图。如果您选择这样做，请将视图层次结构的根视图分配给视图属性。

如果您需要多次实例化您的视图，我将继承 a`UIView`并使用委托模式与您的控制器进行通信。

如果您选择这种方法，则需要覆盖`layoutSubviews`方法以在您的视图中排列子项。

一个明显的例子可以在[How To Make a Custom UIView in iOS 5: A 5 Star Rating View](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view)中找到。

# java - -source 1.3 不支持泛型

> ID：15746264
> 
> 赞同：3
> 
> 时间：2013-04-01T15:26:01.710
> 
> 标签：java, gwt, maven

我在 Maven 打包时遇到问题。在这段代码中：

```
public class LoginDialog extends Dialog {

    private final TextField<String> customer;
                          ^here
    private final TextField<String> login1;
    private final TextField<String> password1;
    private final MainController controller= new MainController();
    private String customerId;
    private String login;
    private String password; 
```

我有一个错误，如：

```
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure
...src/main/java/com/messagedna/web/client/widget/LoginDialog.java:[19,27] error: generics are not supported in -source 1.3 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T15:31:14.727

Java 1.5 中添加了泛型。您的 maven 正在为 java 1.3 编译。

这可以通过以下两种方式之一来解决。

删除泛型，以便您可以针对 < 1.5 进行编译

更改 maven 配置以编译更新版本的 java。您应该能够在您的 pom 中编辑您的编译器插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin> 
```

这告诉 maven 为 1.5 编译

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T15:31:33.970

您需要告诉 maven 编译器插件您的代码使用的是最新的 java 版本。例如，如果您使用的是 java 7，请执行以下操作：

```
<plugins>
   <plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-compiler-plugin</artifactId>
     <configuration>
       <source>1.7</source>
       <target>1.7</target>
     </configuration>
   </plugin>
</plugins> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:29:29.343

使用 编译代码时`-source 1.3`，编译器不支持断言、泛型或 JDK 1.3 之后引入的其他语言特性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-23T06:58:53.113

Android studio：它通过在文件 app build.gradle 中添加以下几行来修复

`compileOptions { sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 }`

注意：使用最新的java版本，这里我使用的是java 8

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T15:28:02.363

您要么需要更改设置，以便将源设置为 1.5+，要么从代码中删除泛型：

```
private final TextField customer; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T15:32:42.147

泛型只是作为 Java 5 中的一项功能引入的，因此在使用 3 进行编译时，将不允许使用泛型。如果您想了解有关泛型的更多信息，请查看[此处](http://docs.oracle.com/javase/tutorial/extra/generics/intro.html)。因此，您需要使用 5 或更高版本进行编译，或者停止使用泛型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-26T14:10:39.497

如果您没有使用 maven 并在 Intellij 编辑器中遇到类似问题，可能值得检查项目设置。即使您定义了正确的 JDK，更改“项目语言级别”并且可以配置 5 起。

# c++ - C++ 中的声明点

> ID：15746271
> 
> 赞同：33
> 
> 时间：2013-04-01T15:26:28.280
> 
> 标签：c++

`101`当我将以前的分配`x`给新的时，为什么没有输出`x`？

```
int x = 101;
{
    int x = x;
    std::cout << x << std::endl;
} 
```

输出（垃圾）：

> 422634

我以为第二个`x`会被初始化，`101` 但它没有被初始化。

注意：这种情况下的解决方案是，`int x = ::x`但问题是它*为什么*会发生。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-01T15:26:28.280

## *申报点*

> 名称的声明点紧接在其完整声明符之后和初始化器之前... [C++ 标准 § 3.3.2/1]

当编译器对声明器足够了解时，它会完成声明。

上面的代码等于下面的代码：

```
int x = 101;
{
  int x;
  x = x; <------------------// Self assignment, assigns an indeterminate value.
  std::cout << x << std::endl;
} 
```

因为，inner 的声明在`x`之前完成`=`（赋值）

```
int x = x; <--// Now, we have the new `x` which hides the older one, 
     ^        // so it assigns itself to itself
     |
     +---// Point of declaration,
         // here compiler knows everything to declare `x`.
         // then declares it. 
```

另一方面，当我们声明复杂对象时，声明的点就更远了。所以，行为是不同的。

例如，下面的代码是可以的

```
const int i = 2;
{
  int i[i];
         ^
         |
         +----// Point of declaration
              // compiler has to reach to "]"
              // therefore before declaring `i` as an array
              // there is just one `i`, the `i` of `const int i=2`
} 
```

在上面的代码中，编译器必须知道数组的实际大小才能完成声明，所以声明点是`]`. 因此，`i`内部`[i]`是外部`i`，因为尚未完成`i`of的声明。因此，它声明了一个包含元素 ( )`int i[...`的数组。`2``int i[2];`

此外，此示例显示了枚举数的声明点

```
const int x = 12;
{
  enum { x = x };
               ^
               |
               +---// Point of declaration
                   // compiler has to reach to "}" then
                   // there is just one `x`, the `x` of `const int x=12`

} 
```

枚举器用`x`常量 的值初始化`x`，即`12`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-01T15:39:00.780

还有另一种方法。

```
#include <iostream>
int x = 101;
int main()
{
  int x = ::x;
  std::cout << x << std::endl;
  std::cin.get();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:29:27.163

变量作用域前面的 x 会被覆盖。诠释 x = x; 这一项有两个过程。一：int x;(定义变量x并分配内存并指定初始值：x = 0); 这一刻，前面的 x 将被隐藏。二：x = x;(没有找到x的值);

# google-maps - 找不到用户位置：

> ID：15746276
> 
> 赞同：0
> 
> 时间：2013-04-01T15:26:41.313
> 
> 标签：google-maps, android-maps-v2

我想我已经使用 Google Maps API v2 完成了所有操作，但没有显示位置，相机也没有改变它的位置。

地图正常加载，但仅停留在 0,0 位置，并且从不移动。

在设备中，我看到 GPS 信号只是在寻找位置，并且我已经在外面进行了测试。

这是我的代码：MainActivity.java：

```
 public class MainActivity extends FragmentActivity implements LocationSource,LocationListener, OnMapClickListener, OnMyLocationChangeListener
    {

         final int RQS_GooglePlayServices = 1;
         private GoogleMap myMap;
         private LocationManager lm;
         public Location myLocation;
         public TipoBusca busca;
         private enum TipoBusca {BUSCA_PARADA, BUSCA_LOCALIZACAO_INICIAL, BUSCA_LOCALIZACAO, BUSCA_ENDERECO, BUSCA_DRAG};
         public String tipoRequest;
         private Criteria myCriteria;
         public TextView textView;
         public OnMyLocationChangeListener locationListener;

         @Override
         protected void onCreate(Bundle savedInstanceState)
         {
                 super.onCreate(savedInstanceState);
                 setContentView(R.layout.activity_main);
                     //Define textView wich will receive test messages
                 textView = (TextView) findViewById(R.id.textView1);

                 // Getting Google Play availability status
                     int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

                    // Showing status
                    if(status!=ConnectionResult.SUCCESS)
                    { // Google Play Services are not available
                        int requestCode = 10;
                        Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
                        dialog.show();
                    }
                    else
                    {
                              //Defining fragment for map
                          FragmentManager myFragmentManager = getSupportFragmentManager();
                  SupportMapFragment mySupportMapFragment = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
                  myMap = mySupportMapFragment.getMap();
                  myMap.setMyLocationEnabled(true);
                  myMap.setIndoorEnabled(true);
                  myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
                  myMap.setLocationSource(this);
                  //myMap.setOnMyLocationChangeListener(this);
                  myMap.setOnMyLocationChangeListener((OnMyLocationChangeListener) locationListener);

                  myCriteria = new Criteria();
                  myCriteria.setAccuracy(Criteria.ACCURACY_FINE);

                  lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);             
                  //lm.requestLocationUpdates(0, 50.0f, myCriteria, this, null);
                  lm.requestLocationUpdates(250, 1, myCriteria, this, null);

                  textView.setText("Localizando usuário...");
                  myLocation = myMap.getMyLocation();
                      }
           }

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

@Override
public void activate(OnLocationChangedListener listener) {
    // TODO Auto-generated method stub

}

@Override
public void deactivate() {
    // TODO Auto-generated method stub

}

@Override
public void onMapClick(LatLng point) {
    // TODO Auto-generated method stub
    myMap.animateCamera(CameraUpdateFactory.newLatLng(point));
}

@Override
public void onMyLocationChange(Location location) {
    // TODO Auto-generated method stub
    Log.i("onMyLocationChanged", "my location changed");
    LatLng latlng= new LatLng(location.getLatitude(), location.getLongitude());
    myMap.moveCamera(CameraUpdateFactory.newLatLng(latlng));
    myMap.animateCamera(CameraUpdateFactory.zoomTo(15));
    textView.setText("Latitude:" +  location.getLatitude()  + ", Longitude:" + location.getLongitude() );
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    Log.i("onLocationChanged", "location changed");
}
} 
```

显现：

```
 <?xml version="1.0" encoding="utf-8"?>
      <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="myPackage"
android:versionCode="1"
android:versionName="1.0" >
          <!-- Setting Permissions -->
          <permission 
    android:name="myPackage.permission.MAPS_RECEIVE" android:protectionLevel="signature"></permission>
          <uses-permission android:name="myPackage.permission.MAPS_RECEIVE"/>
          <!-- Setting versions requirements -->
          <uses-sdk 
                  android:minSdkVersion="8" 
                  android:targetSdkVersion="17" />

          <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
          <uses-permission android:name="android.permission.INTERNET"/>
          <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
          <!-- External storage for caching. -->
          <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
          <!-- My Location -->
          <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
          <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
          <!-- Maps API needs OpenGL ES 2.0\. -->
          <uses-feature 
                      android:glEsVersion="0x00020000" 
                      android:required="true"/>

          <!-- setting icon for application -->
          <application android:allowBackup="true" android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar" >

              <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="myApiKey_Code_Inserted_here"/>

              <activity android:name="myPackage.MainActivity" >
                  <intent-filter>
                      <action android:name="android.intent.action.MAIN" />

                      <category android:name="android.intent.category.LAUNCHER" />
                  </intent-filter>
              </activity>
          </application>

      </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:04:21.457

如果您要完成的是让相机在用户（我的位置点）更改位置时自动更新，那么您*只*需要以下内容：

1.  实施`OnMyLocationChangeListener`
2.  `myMap.setMyLocationEnabled(true)`（启用具有内置位置提供程序的 my-location 层）
3.  `myMap.setOnMyLocationChangeListener(this)`（注册以在“我的位置”点更改位置时接收更新）
4.  在您的回调方法`onMyLocationChange(Location location)`中相应地更新相机。

您已经拥有所有这些的代码，但我看到您已在步骤 3 中评论了该行，这可能是您看不到相机更新的原因。

您不需要实现`LocationSource`and `LocationListener`（因为 my-location 图层有自己的位置提供程序），并且`OnMapClickListener`仅当您想要响应用户点击地图上的某个点时才需要。

# c# - 如何替换“？” 从?word1 word2? 使用正则表达式

> ID：15746284
> 
> 赞同：0
> 
> 时间：2013-04-01T15:27:05.537
> 
> 标签：c#, regex

我们正在从某人制作的错误导出中导入一些文本，其中充满了问号字符，而双引号曾经是双引号。

我可以用正则表达式替换`?`吗`"`？例子：

```
?foo? => "foo"
?foo bar? => "foo bar"
foo? => foo? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:36:44.653

您可以使用正则表达式`\?(.*)\?`来匹配`?`标记之间的内容。

但是如果你这样做，在示例中`a ?b? ?c? d`它会导致`a "b? ?c" d`因为它匹配最长的 substring `?b? ?c?`。

要解决这个问题，您需要对正则表达式使用惰性匹配`\?(.*?)\?`，这将导致`a "b" "c" d`.

如果不能像中那样有两个问号`a ?? b`，那么应该是`\?(.+?)\?`。所以：

```
Regex.Replace(text, @"\?(.+?)\?", "\"$1\""); 
```

意思是“在第一组中被识别的`$1`任何东西”，即被识别的任何东西`.+?`。

**编辑：**更快的选择是：

```
Regex.Replace(text, @"\?([^\?]+)\?", "\"$1\""); 
```

`[^\?]`意思是“除了`\?`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:35:16.573

你的正则表达式应该是`/^\?([^?]+)\?$/`：[http ://refiddle.com/gmw](http://refiddle.com/gmw)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:42:39.430

正则表达式

```
/\?\b(.+?)\b\?/g 
```

[应该这样做 - 匹配单词边界](http://www.regular-expressions.info/wordboundaries.html)旁边的所有问号（[需要转义](http://www.regular-expressions.info/characters.html)） ，并且不要[贪婪](http://www.regular-expressions.info/repeat.html#greedy)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T15:31:47.550

尝试

```
s/\?(.*)\?/$1 
```

它抓住了“？”之间的字符。

# c# - 从文件c#读取结构

> ID：15746285
> 
> 赞同：0
> 
> 时间：2013-04-01T15:27:06.807
> 
> 标签：c#, arrays, string-split

我正在尝试以某种方式读取文本文件的结构。文本文件是一种用户友好的配置文件。

文件的当前结构（必要时可以更改结构）：

```
info1=exampleinfo
info2=exampleinfo2
info3="example","example2","example3"
info4="example","example2","example3" 
```

获得前两行并没有真正的困难，但后两行更难。我需要将两者都放在我可以使用的两个单独的字符串数组中。我可以使用拆分字符串，但问题在于 info4 数组中的值可以包含逗号（这是所有用户输入）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:40:38.603

您在编写解析器时遇到问题的原因是您没有从文件格式的良好定义开始。与其问如果有逗号应该如何解析它，不如决定如何用逗号正确编码值。然后解析很简单。

如果此文件是由无法使用复杂格式（如 json）信任的非技术用户编写的，请考虑以下格式：

```
info1=exampleinfo
info2=exampleinfo2
info3=example
    example2
    example3
info4=example
    example2
    example3 
```

也就是说，不要乱用引号和逗号。用户非常了解换行符和空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:33:37.397

我 100% 赞成 @DavidHeffernan 的解决方案，JSON 会很棒。和@ScottMermelstein 的构建输出的程序的解决方案——如果可能的话，这可能是你最好的选择，即使用户愿意，也不允许用户犯错误。

但是，如果您需要它们来构建文本文件，并且您正在与无法信任的用户一起使用有效的 JSON，因为它是一种挑剔的格式，也许可以尝试一个不会被用户使用的分隔符, 来分隔值。

例如，管道总是好的，因为实际上没有人使用它们：

```
info1=exampleinfo
info2=exampleinfo2
info3=example|example2|example3
info4=example|exam,ple2|example3 
```

您只需要一条规则，说明他们的数据不能包含管道。用户很可能会对此感到满意。

# delphi - 需要在windows中解析HMONITOR --> deviceName（或deviceName --> HMONITOR）

> ID：15746286
> 
> 赞同：6
> 
> 时间：2013-04-01T15:27:08.773
> 
> 标签：delphi, winapi, windows-7, delphi-7

**编辑**- 见最后更新

这是针对 Delphi 7.0 Build 4.453

**概括**

我需要能够从作为 HMONITOR 的 TMonitor 对象（TScreen 组件中的 Monitors 数组中的一个元素）获取 Handle 属性，并将其转换为您将在调用[EnumDisplaySettings 时](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162611%28v=vs.85%29.aspx)用作 lpszDeviceName 参数的字符串。

（我的最终目标是通过将解析的 lpszDeviceName 传递给对 EnumDisplaySettings 的调用，从给定的 HMONITOR 值中获取设备设置列表）。

**详细资料**

如上所述，Screen.Monitors[x].Handle 属性是 HMONITOR 类型，通常用于传递给[GetMonitorInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144901%28v=vs.85%29.aspx)函数，该函数返回几何信息，但没有 lpszDeviceName。（注意：有一个[TMonitorInfoEx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145066%28v=vs.85%29.aspx)结构，它有一个 szDevice 字段，但它似乎没有在我的系统上填写，即使我将 cbSize 字段设置为适当的大小）。

**或者**，如果我可以使用 szDeviceName 来获得等效的 HMONITOR 值，我可以将其插入以下函数，该函数将在比较中使用它（我在下面的代码中插入了对名为**hMonitorFromDeviceName**的虚构函数的调用）来指示如何它会被使用。

```
function GetMonitorDeviceName(hmon : HMONITOR) : string;
var
  DispDev : TDisplayDevice;
  deviceName : string;
  nDeviceIndex : integer;
begin
  Result := '';

  FillChar(DispDev, sizeof(DispDev),0);
  DispDev.cb := sizeof(DispDev);

  nDeviceIndex := 0;
  while (EnumDisplayDevices(nil, nDeviceIndex, DispDev, 0)) do
  begin

     if ( hMonitorFromDeviceName(DispDev.DeviceString) = hmon ) then
     begin
        Result := StrPas(DispDev.DeviceString);
        exit;
     end;

     inc(nDeviceIndex);

  end;
end; 
```

**更新**

感谢 David Heffernan，我已经测试了他的解决方案，下面是一个示例函数，用于从给定句柄中获取监视器名称：

```
function GetMonitorName(hmon : HMONITOR) : string;
type
  TMonitorInfoEx = record
    cbSize: DWORD;
    rcMonitor: TRect;
    rcWork: TRect;
    dwFlags: DWORD;
    szDevice: array[0..CCHDEVICENAME - 1] of AnsiChar;
end;
var
  DispDev : TDisplayDevice;
  deviceName : string;
   monInfo : TMonitorInfoEx;
begin
  Result := '';

  monInfo.cbSize := sizeof(monInfo);
  if GetMonitorInfo(hmon,@monInfo) then
  begin

    DispDev.cb := sizeof(DispDev);
     EnumDisplayDevices(@monInfo.szDevice, 0, DispDev, 0);
     Result := StrPas(DispDev.DeviceString);

  end;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T15:38:24.353

我想你一定是打错了`GetMonitorInfo`。这段代码：

```
{$APPTYPE CONSOLE}

uses
  SysUtils, MultiMon, Windows, Forms;

var
  i: Integer;
  MonitorInfo: TMonitorInfoEx;
begin
  MonitorInfo.cbSize := SizeOf(MonitorInfo);
  for i := 0 to Screen.MonitorCount-1 do
  begin
    if not GetMonitorInfo(Screen.Monitors[i].Handle, @MonitorInfo) then
      RaiseLastOSError;
    Writeln(MonitorInfo.szDevice);
  end;
  Readln;
end. 
```

在我的机器上产生这个输出：

```
\\.\DISPLAY1
\\.\DISPLAY2

```

我怀疑您的调用以`GetMonitorInfo`某种方式失败，也许您没有检查返回值是否有错误。

* * *

搜索 QualityCentral 后，我怀​​疑您已成为旧版本 Delphi 中已知错误的受害者：[QC#3239](http://qc.embarcadero.com/wc/qcmain.aspx?d=3239)。据报道，这是在 Delphi 2006 版本 10.0.2124.6661 中修复的。

* * *

您的评论证实了这一诊断。要解决这个问题，您需要一个新的`TMonitorInfoEx`定义。这是一个适用于您的 pre-Unicode Delphi 的方法：

```
type
  TMonitorInfoEx = record
    cbSize: DWORD;
    rcMonitor: TRect;
    rcWork: TRect;
    dwFlags: DWORD;
    szDevice: array[0..CCHDEVICENAME - 1] of AnsiChar;
  end; 
```

如果您将其添加到上面的代码中（当然是在声明变量之前），那么我相信它会解决您的问题。

* * *

有趣的是，即使在 XE3 中，这些结构也没有被正确翻译：[QC#114460](http://qc.embarcadero.com/wc/qcmain.aspx?d=114460)。诚然，这个错误是相当良性的，因为它只影响`PMonitorInfoExA`and `TMonitorInfoExA`，但在试图解决这个问题的问题时，这个错误让我发现了！

# wordpress - wordpress 在新旧主题之间切换

> ID：15746289
> 
> 赞同：0
> 
> 时间：2013-04-01T15:27:13.667
> 
> 标签：wordpress, themes, wordpress-theming

我刚刚完成了一个自定义主题并激活了它。但是 - 它不断在旧主题和我的新主题之间来回切换 - 似乎是随机的。我在开发新主题时使用了**主题试驾**——这有什么影响吗？

当我确实显示新主题时，我可以在网站上导航 - 但是当我选择“主页”链接时，我总是会在索引页面上再次显示旧主题。

关于可能导致问题的任何想法？我已经多次清空所有缓存但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:44:17.377

通过使用总缓存插件并禁用与缓存相关的所有内容来解决..有点粗糙，但它成功了！

# python - 通过用户交互使用 hashlib 进行散列

> ID：15746291
> 
> 赞同：1
> 
> 时间：2013-04-01T15:27:26.340
> 
> 标签：python, hashlib

我正在尝试通过用户交互创建一个散列函数。这个想法是用户选择他/她想要的哈希值（即 md5、sha1 等），其余的由程序完成。

我的代码：

```
hashstring = "hashlib" + finalHash

    filePath = open(chosenFile, 'rb')

    data = filePath.read(8192)

    if not data:
        return

    hashstring.update(data) # The line that causes error

    return hashstring.hexdigest() 
```

`finalHash`来自包含（假设选择 md5）的字典，`'.md5()'`因此来自的字符串`hashstring`is `'hashlib.md5()`。

我收到错误：`AttributeError: 'str' object has no attribute 'update'`，错误指出我很明显：`hashstring`是一个字符串（正如我声明的那样），我的问题是：我如何转换或以其他方式使其按预期可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:32:26.107

你可以使用[`getattr`](http://docs.python.org/3/library/functions.html#getattr)：

```
import hashlib
chosenFile = '/etc/passwd'
finalHash = input('Which hash function?') # raw_input in Python 2
assert finalHash in ['md5', 'sha1'] # Optional
h = getattr(hashlib, finalHash)
h.update(open(chosenFile, 'rb').read())
print(h.hexdigest()) 
```

请注意，输入不得包含点或括号。如果你想允许用户输入`md5()`，你必须先去掉括号。

# c# - Moq 和 Equals() 的组合使 MS 测试框架崩溃

> ID：15746292
> 
> 赞同：5
> 
> 时间：2013-04-01T15:27:29.900
> 
> 标签：c#, unit-testing, moq

我有我认为应该是一个非常简单的测试用例，但是每次我运行它时 QTAgent32 都会死掉。在调试模式下运行测试用例显示`System.StackOverflowException`在“未知模块”中被抛出。我已将其缩小到表现出这种行为的最基本的实现（.NET 4 和 VS 2010 Ultimate）：

```
[TestClass]
public class StackOverflow
{
    [TestMethod]
    public void CreateStackOverflow()
    {
        var mockMyType1 = new Mock<MyType>();
        mockMyType1.Setup(m => m.Equals(mockMyType1.Object)).Returns(true);

        var mockMyType2 = new Mock<MyType>();

        // Real test is for a filtering routine and the Assert is using
        // Contains(), but it uses Equals() internally so it has the same problem
        Assert.IsTrue(mockMyType1.Object.Equals(mockMyType1.Object)); // returns true
        Assert.IsFalse(mockMyType1.Object.Equals(mockMyType2.Object)); // explodes
    }
}

public class MyType
{
    public virtual bool IsActive { get; set; }
    public override bool Equals(object obj)
    {
        return false;  // Not the real implementation but irrelevant to this issue
    }
} 
```

我觉得我错过了一些关于关闭或起订量的重要信息，但这似乎应该可行。我尝试过的事情，试图理解这个问题，但只会让我更加困惑：

*   我尝试将 Equals() 设置替换为，`mockMyType.Setup(m => m.Equals(m)).Returns(true);`但这会导致 Moq 抛出 NotSupportedException
*   如果我让 CallBase 为真而不是设置 Equals()，一切正常
*   最后，如果 MyType 类没有覆盖 Equals()，那么一切正常。

谁能指出我可能发生的事情的方向？我完全不知所措。

编辑：我相信我有几个选择来完成这项工作（包括下面 Lanorkin 的回复），但我真的很想知道为什么会这样。我做错了什么，或者我应该提交 Moq 或 Visual Studio 中的错误吗？

更新：我最终选择了下面的 Denys 解决方案版本[并向 Moq 提交错误报告](http://code.google.com/p/moq/issues/detail?id=362)。我的设置现在看起来像：

```
mockMyType1.Setup(m => m.Equals(It.Is<MyType>(x => ReferenceEquals(x, mockMyType1.Object)))).Returns(true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:13:29.123

是的，模拟 Equals(object) 使其失败（使用 Reflector/dotPeek 查看更多）：

![最小起订量堆栈溢出](https://i.stack.imgur.com/IdyGv.png)

好消息 - 很容易解决。只需将 Equals 重载添加到`MyType`类，从而模拟`Equals(MyType)`而不是`Equals(object)`：

```
 public virtual bool Equals(MyType obj)
    {
        return Equals((object)obj);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:15:17.407

我认为问题在于你这样做：

```
mockMyType.Setup(m => m.Equals(mockMyType.Object)).Returns(true); 
```

仅针对同一对象的参数进行模拟。如果您使用任何其他参数，它将无法匹配。

请尝试这样做：

```
mockMyType.Setup(m => m.Equals(It.IsAny<MyType>())).Returns(true); 
```

但是，您应该得到一个关于意外方法调用的不同异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T06:38:48.273

这个问题从昨天开始就一直困扰着我，终于找到了答案。您必须在 setup 方法中使用一个函数，并且它应该断言模拟对象的真正相等性。我的意思是`ReferenceEquals`。所以我修改了你的`GetMockMyTypes`代码。当然它不能用作参考，但到目前为止意图很明确：

```
public static class MyTypeHelper
{
   public static IList<MyType> GetMockMyTypes()
   {
      var myTypes = new List<MyType>();

      var myMock1 = new Mock<MyType>().Object;
      Mock.Get(myMock1)
          .Setup(m => m.Equals(It.Is<MyType>(x => ReferenceEquals(x, myMock1))))
          .Returns(true);
      Mock.Get(myMock1).Setup(m => m.IsActive).Returns(false);
      myTypes.Add(myMock1);

      var myMock2 = new Mock<MyType>().Object;
      Mock.Get(myMock2)
          .Setup(m => m.Equals(It.Is<MyType>(x => ReferenceEquals(x, myMock2))))
          .Returns(true);
      Mock.Get(myMock2).Setup(m => m.IsActive).Returns(true);
      myTypes.Add(myMock2);

      return myTypes;
   }
} 
```

# sql - 删除“NOT IN”子句并优化查询

> ID：15746293
> 
> 赞同：2
> 
> 时间：2013-04-01T15:27:30.107
> 
> 标签：sql, sql-server, tsql, query-optimization, sql-insert

我们有一个`group`和`user permission`表如下：

```
Group (group_id,name)
01 | G1
02 | G2
03 | G3
04 | G4 
```

* * *

```
UserPermission (userid,group_id,active)
User1 | 01 | 1
User1 | 02 | 1
User2 | 01 | 1
User2 | 02 | 1
User2 | 03 | 1
User2 | 04 | 1
..
UserN | xx | 1 
```

* * *

每个*User都拥有一个**Group*的权限。
但是 UserPermission 表中缺少某些用户的某些权限。

*问题是为表中存在的所有用户插入那些缺少的组权限条目 `UserPermission`。*

所以我想出的查询是（粗略的）

```
 insert into UserPermission 
         select distinct userid, '03', 1 from UserPermission  
         where userid not in (
               select userid from UserPermission where group_id = '03'
         ) 
```

这是因为`Group 03`..
其他组的用户缺少插入权限。

有没有更好的方法来编写上述查询。如何优化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:30:47.250

在我的解决方案中，我从表`Group`和`UserPermission`（*仅唯一用户 ID*）中获取笛卡尔积。然后将两个表的乘积连接到表上`UserPermission`，`LEFT JOIN`前提是它在两列上匹配：`Group_ID`和`userID`。任何不满足条件的记录都将`NULL`在 的列上具有值`UserPermission`。而这些值就是`UserPermission`表中的缺失值。

这也**将为所有用户填充所有缺失的权限**。

```
INSERT INTO UserPermission(userID, group_ID, active)
SELECT  b.userID, a.Group_ID, 1
FROM    [Group] a
        CROSS JOIN (SELECT DISTINCT userID FROM UserPermission) b
        LEFT JOIN UserPermission c
            ON a.Group_ID = c.Group_ID AND
                b.userID = c.UserID
WHERE   c.Group_ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/a8755/1)

* * *

但是如果你只想插入特定`Group_ID`的，那么你需要额外的条件。

```
INSERT INTO UserPermission(userID, group_ID, active)
SELECT  b.userID, a.Group_ID, 1
FROM    [Group] a
        CROSS JOIN (SELECT DISTINCT userID FROM UserPermission) b
        LEFT JOIN UserPermission c
            ON a.Group_ID = c.Group_ID AND
                b.userID = c.UserID
WHERE   c.Group_ID IS NULL AND
        a.Group_ID = 3
        -- or change it to IN clause
        -- if you have more Group_ID to include
        -- a.Group_ID IN (3,4) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d0752/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:33:24.273

不存在通常比不存在更好。

```
insert into UserPermission
select disinct userid, '03', 1
from UserPermission
where not exists 
(select *
from UserPermission
where group_id = '03') 
```

另一种方法是使用“in”而不是“not in”

```
insert into UserPermission
select disinct userid, '03', 1
from UserPermission
where user_id in 
(select user_id from UserPermission
except 
select user_id from UserPermission
where group_id = '03') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:45:30.370

这是一种方法：

```
 with toinsert as (
    select userid, '03' as UserPermission
    from UserPermission up
    group by userId
    having sum9case when userPermission = '03' then 1 else 0 end) = 0
 )
 insert into UpserPermission
    select userid, UserPermission
    from toinsert; 
```

我已将插入列表分解为 CTE。您也可以将其作为子查询执行：

```
insert into UserPermission
    select userid, '03'
    from UserPermission
    group by userid
    having sum(case when userpermission = '03' then 1 else 0 end) = 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T17:42:21.280

另一种可能的解决方案是使用新的 MERGE 语句。根据我的经验，MERGE 表现非常出色。

```
merge UserPermission target
using (
    -- Assuming u.userid and g.group_id are unique in their tables
    select u.userid, g.group_id
    from [User] u
    cross join [Group] g
) source on source.userid = target.userid and source.group_id = target.group_id
when not matched then
    insert (userid, group_id, active)
    values (source.userid, source.group_id, 1); 
```

# linux - 仅在 Linux 上通过命令行将 xlsx 转换为文本 CSV

> ID：15746295
> 
> 赞同：3
> 
> 时间：2013-04-01T15:27:36.027
> 
> 标签：linux, excel, bash, csv, libreoffice

简单的问题：

目前是否可以从命令行调用 LibreOffice 来打开 *.xlsx 并将其转换/保存为 *.csv？

或者，如果这是不可能的，那么通过命令行执行此操作的当前最佳方法是什么（需要通过脚本调用）？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T17:30:00.030

这是命令：

```
localc --headless  --convert-to csv:"Text - txt - csv (StarCalc)" *.xlsx 
```

以上会将所有转换后的文件保存在当前目录（您将运行命令的目录）中。所有转换后的文件都将其文件扩展名更改为 csv。

另一种方法是使用`unoconv`我没有使用过的方法。

# javascript - 在表单中使用 Font Awesome

> ID：15746296
> 
> 赞同：0
> 
> 时间：2013-04-01T15:27:36.997
> 
> 标签：javascript, html, css, font-awesome

我正在尝试在我正在创建的表单中使用 Font Awesome。该表格基本上是一个多项选择测验，其中将有一个问题，然后是带有单选按钮的可能正确答案。

我想在测验中加入 Font Awesome 而不是单选按钮。（[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)）我想使用 font awesome 集合中的 icon-circle 和 icon-circle-blank ，所以当用户单击答案时，JavaScript 会将图标更改为“图标圈”而不是“图标圈空白”。

有没有人对如何做到这一点有任何想法和/或最佳实践？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T17:07:18.030

可以通过隐藏选项本身并使用标签显示更改的框来完成。这是我使用的 HTML：

```
<input type="radio" id="opt_yes" checked name="test" value="yes">
<label class="icon-" for="opt_yes"> Yes</label><br />
<input type="radio" id="opt_no" name="test" value="no">
<label class="icon-" for="opt_no"> No</label> 
```

...这是我的 CSS（请注意，我在标签上使用了“icon-”类来为它们提供所有 Font Awesome 图标共有的支持样式）：

```
[type=radio] {
    display: none;
}
[type=radio] + label:before {
    content: "\f10c";
}
[type=radio]:checked + label:before {
    content: "\f111";
} 
```

jsFiddle 演示[在这里](http://jsfiddle.net/fTdRS/5/)。

（基于[这个问题](https://stackoverflow.com/questions/279421/can-you-style-an-html-radio-button-to-look-like-a-checkbox)的解决方案）

# visual-studio-2012 - Window Phone 8 Emulator 未从 Visual Studio 启动

> ID：15746297
> 
> 赞同：1
> 
> 时间：2013-04-01T15:27:39.823
> 
> 标签：visual-studio-2012, windows-phone-8

我刚刚安装了 WP8 SDK，但是当我尝试加载从 Visual Studio 创建的项目时，它只会启动 XDE 并显示：

> Window Phone 操作系统正在启动

但大约 4 分钟后，它关闭了。

但是，当我手动启动模拟器时，它启动得非常好。知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:37:27.857

当您升级系统（Windows 更新）并修改网络配置中的驱动程序时，就会发生这种情况。只需使用 WP8 SDK 安装盘的修复功能即可。

# datetime - 具有特定日期/时间范围的 PowerShell 脚本

> ID：15746306
> 
> 赞同：2
> 
> 时间：2013-04-01T15:28:03.007
> 
> 标签：datetime, powershell, exchange-server

我正在尝试为 Exchange 2010 运行 powershell 脚本，以从特定日期/时间范围中提取信息。

**示例：**显示周一至周五上午 6 点至晚上 11 点时间范围内收到的电子邮件数量

```
get-messagetrackinglog -resultsize unlimited -Recipient TEST@TEST.COM -Server EXCHANGE -Start "3/4/2013 6:00:00 AM" -End "3/6/2013 23:00:00 PM" | select messageid -unique | measure 
```

但我想让日期范围不那么静态。所以如果我每周周五晚上 11 点运行脚本，我怎么能让它在过去 5 天里做这个查询。

我正在尝试添加，`(get-date).adddays(-5)`但我无法弄清楚如何添加它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:05:55.750

试试这个

```
for($i=-4,$i -lt 0,$i++){
    $start = (get-date -hour 6).adddays($i);
    $end = (get-date -hour 23).adddays($i);
    Write-host $start.DayoftheWeek  (get-messagetrackinglog -resultsize unlimited -Recipient TEST@TEST.COM -Server EXCHANGE -Start $start -End $end | select messageid -unique | measure).count 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:47:15.187

get-messagetrackinglog cmdlet 只为 -start 和 -end 使用一个参数，因此您不能在单个命令中指定它。

您可以从早上 6 点到晚上 11 点对消息跟踪日志运行 5 个单独的查询，每个查询在不同的日期将这些结果汇总在一起，或者您可以对从第一天早上 6 点到最后一天晚上 11 点的所有日志进行一次查询，然后过滤在过渡时期的晚上 11 点到早上 6 点之间加上时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:11:11.847

只是试图回答关于过去日期和时间的部分，并假设您在晚上 11 点运行此程序，但想回到早上 6 点（17 小时差异）......也许使用类似的东西：

```
$past=(Get-Date).adddays(-5).addhours(-17) 
```

然后尝试

```
-start $past -end (get-date) 
```

# windows-phone-7 - 如何在 Windows Phone 8 中播放一次警报音频？

> ID：15746319
> 
> 赞同：1
> 
> 时间：2013-04-01T15:29:28.763
> 
> 标签：windows-phone-7, notifications, windows-phone-8, windows-phone

当我尝试使用警报从我的应用程序中启动语音时，它没有在确定的时间内运行，我遇到了一个问题。

音频仍然运行不止一次，因为我只希望它运行一次。但它会继续运行，直到用户停止它，这不适合我的应用程序行为。

那么，有没有办法让报警音频文件在这段时间内只运行一次呢？如果没有，有没有其他方法可以代替警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T04:42:44.043

警报被编程为永远重复。除非您更改音频文件中的某些内容，否则您不能。

# .net - 如何监控 MVC4 中的异步/等待死锁？

> ID：15746322
> 
> 赞同：4
> 
> 时间：2013-04-01T15:29:30.860
> 
> 标签：.net, multithreading, asynchronous, monitoring, async-await

在阅读[了异步编程的最佳实践](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)之后， 我决定测试 MVC4 中的死锁行为。从 Intranet 模板创建网站后，我修改了 Index 操作，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.Web;
using System.Web.Mvc;

namespace AsyncAwait.MVC4.Controllers
{
    public class HomeController : Controller
    {
        private static async Task DelayAsync()
        {
            await Task.Delay(1000);
        }

        // This method causes a deadlock when called in a GUI or ASP.NET context.
        public static void Test()
        {
            // Start the delay.
            var delayTask = DelayAsync();
            // Wait for the delay to complete.
            delayTask.Wait();
        }

        public ActionResult Index()
        {
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

            Test();

            return View();
        }
    }
} 
```

对 Index 的调用按我的预期挂起，但我也希望在某个时候抛出异常。但是，永远不会抛出异常，所有请求都会挂起。

我查看了所有可用的性能计数器，但无法弄清楚如何识别死锁。如果我要使用使用 async/await 的现有网站，我该如何设置对潜在死锁的监控？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:57:32.747

如果您希望您的任务在可预测的时间范围内完成，那么您可以使用超时。

`Task.Wait`有几个采用超时值的重载。

例如，如果你的任务不应该超过 5 秒，你可以做这样的事情。

```
var delayTask = DelayAsync();

// Will be true if DelayAsync() completes within 5 seconds, otherwise false.
bool callCompleted = delayTask.Wait(TimeSpan.FromSeconds(5));

if (!callCompleted)
{
    throw new TimeoutException("Task not completed within expected time.");
} 
```

# c# - 未设置为对象的实例，但我正在分配给它

> ID：15746326
> 
> 赞同：1
> 
> 时间：2013-04-01T15:29:48.513
> 
> 标签：c#, .net, windows-8, windows-runtime, windows-store-apps

我正在尝试将`TextBox`我的 XAML 页面上的内容打印到打印机。

我在这条线上遇到了一个例外：

`PrintingRoot.Children.Add(firstPage);`

对于上面的行，它说“对象引用未设置为对象的实例。”。*但*我不确定为什么，因为我正在向它添加一个页面。

该行所在的方法是：

```
 public void PreparetPrintContent()
    {
        if (firstPage == null)
        {
            firstPage = new MainPage();
        }

        PrintingRoot.Children.Add(firstPage);
        PrintingRoot.InvalidateMeasure();
        PrintingRoot.UpdateLayout();
    } 
```

我究竟做错了什么？我怎样才能把我的 TextBox 的内容打印到打印机上？

我使用了我在[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a6296590-21bc-4e1f-a61f-7cf2352f1e1e上找到的代码](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a6296590-21bc-4e1f-a61f-7cf2352f1e1e)

* * *

完整代码：

```
private async void Print_Click_1(object sender, RoutedEventArgs e)
        {
            MainPage pg = FindVisualParent<MainPage>(this);
            IList<Frame> fl = FindVisualChildList<Frame>(pg);
            //TextBox to = FindVisualChild<TextBox>(fl[0], "textContent");
            TextBox tp = FindVisualChild<TextBox>(firstPage, "textContent");
            //tp.Text = to.Text;
            // Don't act when in snapped mode
            if (ApplicationView.Value != ApplicationViewState.Snapped)
            {
                await Windows.Graphics.Printing.PrintManager.ShowPrintUIAsync();
            }
        }

        private static IList<childItemType> FindVisualChildList<childItemType>(DependencyObject obj) where childItemType : DependencyObject
        {
            IList<childItemType> list;
            list = new List<childItemType>();
            FindVisualChildList<childItemType>(obj, list);
            return list;
        }
        private static void FindVisualChildList<childItemType>(DependencyObject obj, IList<childItemType> list) where childItemType : DependencyObject
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(obj, i);
                if (child != null && child is childItemType)
                    list.Add((childItemType)child);
                else
                    FindVisualChildList<childItemType>(child, list);
            }
            return;
        }
        private static childItemType FindVisualChild<childItemType>(DependencyObject obj, string name) where childItemType : FrameworkElement
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(obj, i);
                if (child is childItemType && ((FrameworkElement)child).Name == name)
                    return (childItemType)child;
                else
                {
                    childItemType childOfChild = FindVisualChild<childItemType>(child, name);
                    if (childOfChild != null)
                        return childOfChild;
                }
            }
            return null;
        }
        private static parentItemType FindVisualParent<parentItemType>(DependencyObject o) where parentItemType : FrameworkElement
        {
            if (o == null)
                return null;
            if ((o is parentItemType))
                return o as parentItemType;
            return FindVisualParent<parentItemType>(VisualTreeHelper.GetParent(o));
        }

        public void PreparetPrintContent()
        {
            if (firstPage == null)
            {
                firstPage = new MainPage();
            }

            PrintingRoot.Children.Add(firstPage);
            PrintingRoot.InvalidateMeasure();
            PrintingRoot.UpdateLayout();
        }

        private async void InvokePrintButtonClick(object sender, RoutedEventArgs e)
        {
            MainPage pg = FindVisualParent<MainPage>(this);
            IList<Frame> fl = FindVisualChildList<Frame>(pg);
            TextBox to = FindVisualChild<TextBox>(fl[2], "textContent");
            TextBox tp = FindVisualChild<TextBox>(firstPage, "textContent");
            tp.Text = to.Text;
            // Don't act when in snapped mode
            if (ApplicationView.Value != ApplicationViewState.Snapped)
            {
                await Windows.Graphics.Printing.PrintManager.ShowPrintUIAsync();
            }
        }

        #region Application Content Size Constants given in percents ( normalized )

        /// <summary>
        /// The percent of app's margin width, content is set at 85% (0.85) of the area's width
        /// </summary>
        protected const double ApplicationContentMarginLeft = 0.075;

        /// <summary>
        /// The percent of app's margin height, content is set at 94% (0.94) of tha area's height
        /// </summary>
        protected const double ApplicationContentMarginTop = 0.03;

        #endregion

        /// <summary>
        /// A pointer back to the main page which is used to gain access to the input and output frames and their content. 
        /// </summary>
        protected MainPage rootPage = null;

        /// <summary>
        /// PrintDocument is used to prepare the pages for printing. 
        /// Prepare the pages to print in the handlers for the Paginate, GetPreviewPage, and AddPages events.
        /// </summary>
        protected PrintDocument printDocument = null;

        /// <summary>
        /// Marker interface for document source
        /// </summary>
        protected IPrintDocumentSource printDocumentSource = null;

        /// <summary>
        /// A list of UIElements used to store the print preview pages.  This gives easy access
        /// to any desired preview page.
        /// </summary>
        internal List<UIElement> printPreviewPages = null;

        /// <summary>
        /// First page in the printing-content series
        /// From this "virtual sized" paged content is split(text is flowing) to "printing pages"
        /// </summary>
        protected FrameworkElement firstPage;

        /// <summary>
        /// Factory method for every scenario that will create/generate print content specific to each scenario
        /// For scenarios 1-5: it will create the first page from which content will flow
        /// Scenario 6 uses a different approach
        /// </summary>
        //protected virtual void PreparetPrintContent() {}

        public void BasePrintPage()
        {
            printPreviewPages = new List<UIElement>();
        }

        /// <summary>
        ///  Printing root property on each input page.
        /// </summary>
        protected virtual Canvas PrintingRoot
        {
            get
            {
                return FindName("printingRoot") as Canvas;
            }
        }

        /// <summary>
        /// This is the event handler for PrintManager.PrintTaskRequested.
        /// </summary>
        /// <param name="sender">PrintManager</param>
        /// <param name="e">PrintTaskRequestedEventArgs </param>
        protected virtual void PrintTaskRequested(PrintManager sender, PrintTaskRequestedEventArgs e)
        {
            PrintTask printTask = null;
            printTask = e.Request.CreatePrintTask("C# Printing SDK Sample", sourceRequested =>
                {
                    // Print Task event handler is invoked when the print job is completed.
                    printTask.Completed += async (s, args) =>
                    {
                        // Notify the user when the print operation fails.
                        if (args.Completion == PrintTaskCompletion.Failed)
                        {
                            await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
                            {
                                //rootPage.NotifyUser("Failed to print.", NotifyType.ErrorMessage);
                            });
                        }
                    };

                    sourceRequested.SetSource(printDocumentSource);
                });
        } 

        /// <summary>
        /// This function registers the app for printing with Windows and sets up the necessary event handlers for the print process.
        /// </summary>
        protected void RegisterForPrinting()
        {
            // Create the PrintDocument.
            printDocument = new PrintDocument();

            // Save the DocumentSource.
            printDocumentSource = printDocument.DocumentSource;

            // Add an event handler which creates preview pages.
            printDocument.Paginate += CreatePrintPreviewPages;

            // Add an event handler which provides a specified preview page.
            printDocument.GetPreviewPage += GetPrintPreviewPage;

            // Add an event handler which provides all final print pages.
            printDocument.AddPages += AddPrintPages;

            // Create a PrintManager and add a handler for printing initialization.
            PrintManager printMan = PrintManager.GetForCurrentView();
            printMan.PrintTaskRequested += PrintTaskRequested;

            // Initialize print content for this scenario
            PreparetPrintContent();
        }

        /// <summary>
        /// This function unregisters the app for printing with Windows.
        /// </summary>
        protected virtual void UnregisterForPrinting()
        {
            if (printDocument == null)
                return;

            printDocument.Paginate -= CreatePrintPreviewPages;
            printDocument.GetPreviewPage -= GetPrintPreviewPage;
            printDocument.AddPages -= AddPrintPages;

            // Remove the handler for printing initialization.
            PrintManager printMan = PrintManager.GetForCurrentView();
            printMan.PrintTaskRequested -= PrintTaskRequested;

            PrintingRoot.Children.Clear();
        }

        protected event EventHandler pagesCreated;

        /// <summary>
        /// This is the event handler for PrintDocument.Paginate. It creates print preview pages for the app.
        /// </summary>
        /// <param name="sender">PrintDocument</param>
        /// <param name="e">Paginate Event Arguments</param>
        protected virtual void CreatePrintPreviewPages(object sender, PaginateEventArgs e)
        {
            // Clear the cache of preview pages 
            printPreviewPages.Clear();

            // Clear the printing root of preview pages
            PrintingRoot.Children.Clear();

            // This variable keeps track of the last RichTextBlockOverflow element that was added to a page which will be printed
            RichTextBlockOverflow lastRTBOOnPage;

            // Get the PrintTaskOptions
            PrintTaskOptions printingOptions = ((PrintTaskOptions)e.PrintTaskOptions);

            // Get the page description to deterimine how big the page is
            PrintPageDescription pageDescription = printingOptions.GetPageDescription(0);

            // We know there is at least one page to be printed. passing null as the first parameter to
            // AddOnePrintPreviewPage tells the function to add the first page.
            lastRTBOOnPage = AddOnePrintPreviewPage(null, pageDescription);

            // We know there are more pages to be added as long as the last RichTextBoxOverflow added to a print preview
            // page has extra content
            while (lastRTBOOnPage.HasOverflowContent && lastRTBOOnPage.Visibility == Windows.UI.Xaml.Visibility.Visible)
            {
                lastRTBOOnPage = AddOnePrintPreviewPage(lastRTBOOnPage, pageDescription);
            }

            if (pagesCreated != null)
            {
                pagesCreated.Invoke(printPreviewPages, null);
            }

            PrintDocument printDoc = (PrintDocument)sender;

            // Report the number of preview pages created
            printDoc.SetPreviewPageCount(printPreviewPages.Count, PreviewPageCountType.Intermediate);
        }

        /// <summary>
        /// This is the event handler for PrintDocument.GetPrintPreviewPage. It provides a specific print preview page,
        /// in the form of an UIElement, to an instance of PrintDocument. PrintDocument subsequently converts the UIElement
        /// into a page that the Windows print system can deal with.
        /// </summary>
        /// <param name="sender">PrintDocument</param>
        /// <param name="e">Arguments containing the preview requested page</param>
        protected virtual void GetPrintPreviewPage(object sender, GetPreviewPageEventArgs e)
        {
            PrintDocument printDoc = (PrintDocument)sender;

            printDoc.SetPreviewPage(e.PageNumber, printPreviewPages[e.PageNumber - 1]);
        }

        /// <summary>
        /// This is the event handler for PrintDocument.AddPages. It provides all pages to be printed, in the form of
        /// UIElements, to an instance of PrintDocument. PrintDocument subsequently converts the UIElements
        /// into a pages that the Windows print system can deal with.
        /// </summary>
        /// <param name="sender">PrintDocument</param>
        /// <param name="e">Add page event arguments containing a print task options reference</param>
        protected virtual void AddPrintPages(object sender, AddPagesEventArgs e)
        {
            // Loop over all of the preview pages and add each one to  add each page to be printied
            for (int i = 0; i < printPreviewPages.Count; i++)
            {
                // We should have all pages ready at this point...
                printDocument.AddPage(printPreviewPages[i]);
            }

            PrintDocument printDoc = (PrintDocument)sender;

            // Indicate that all of the print pages have been provided
            printDoc.AddPagesComplete();
        }

        /// <summary>
        /// This function creates and adds one print preview page to the internal cache of print preview
        /// pages stored in printPreviewPages.
        /// </summary>
        /// <param name="lastRTBOAdded">Last RichTextBlockOverflow element added in the current content</param>
        /// <param name="printPageDescription">Printer's page description</param>
        protected virtual RichTextBlockOverflow AddOnePrintPreviewPage(RichTextBlockOverflow lastRTBOAdded, PrintPageDescription printPageDescription)
        {
            // XAML element that is used to represent to "printing page"
            FrameworkElement page;

            // The link container for text overflowing in this page
            RichTextBlockOverflow textLink;

            // Check if this is the first page ( no previous RichTextBlockOverflow)
            if (lastRTBOAdded == null)
            {
                // If this is the first page add the specific scenario content
                page = firstPage;
            }
            else
            {
                // Flow content (text) from previous pages
                page = new ContinuationPage(lastRTBOAdded);
            }

            // Set "paper" width
            page.Width = printPageDescription.PageSize.Width;
            page.Height = printPageDescription.PageSize.Height;

            Grid printableArea = (Grid)page.FindName("printableArea");

            // Get the margins size
            // If the ImageableRect is smaller than the app provided margins use the ImageableRect
            double marginWidth = Math.Max(printPageDescription.PageSize.Width - printPageDescription.ImageableRect.Width, printPageDescription.PageSize.Width * ApplicationContentMarginLeft * 2);
            double marginHeight = Math.Max(printPageDescription.PageSize.Height - printPageDescription.ImageableRect.Height, printPageDescription.PageSize.Height * ApplicationContentMarginTop * 2);

            // Set-up "printable area" on the "paper"
            printableArea.Width = firstPage.Width - marginWidth;
            printableArea.Height = firstPage.Height - marginHeight;

            // Add the (newley created) page to the printing root which is part of the visual tree and force it to go
            // through layout so that the linked containers correctly distribute the content inside them.            
            PrintingRoot.Children.Add(page);
            //PrintingRoot.InvalidateMeasure();
            PrintingRoot.UpdateLayout();

            // Find the last text container and see if the content is overflowing
            textLink = (RichTextBlockOverflow)page.FindName("continuationPageLinkedContainer");

            // Check if this is the last page
            if (!textLink.HasOverflowContent && textLink.Visibility == Windows.UI.Xaml.Visibility.Visible)
            {
                StackPanel footer = (StackPanel)page.FindName("footer");
                footer.Visibility = Windows.UI.Xaml.Visibility.Visible;
            }

            // Add the page to the page preview collection
            printPreviewPages.Add(page);

            return textLink;
        }

        #region Navigation

        #endregion 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:32:20.100

可能不是`firstPage`那为空的。还要检查`PrintingRoot`and`Children`元素。很可能，`Children`还没有更新，所以试图`Add()`抛出这个异常。

# ruby-on-rails - 运行 rails 服务器时出错

> ID：15746333
> 
> 赞同：0
> 
> 时间：2013-04-01T15:30:05.407
> 
> 标签：ruby-on-rails, ruby

当我运行该应用程序时，我收到此错误：

```
/usr/lib64/ruby/gems/1.8/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from /usr/lib64/ruby/gems/1.8/gems/execjs-1.4.0/lib/execjs.rb:5
    from /usr/lib64/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
    from /usr/lib64/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1
    from /usr/lib64/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
    from /usr/lib64/ruby/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1
    from /usr/lib64/ruby/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
    from /usr/lib64/ruby/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1
    from /usr/lib64/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:41:54.977

查看[错误消息中的 URL](https://github.com/sstephenson/execjs)，并将列出的 javascript 运行时 gem 之一添加到您的 Gemfile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:31:41.647

我明白了，我必须安装 execjs gem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:42:19.103

```
gem 'execjs'
gem 'therubyracer' 
```

把它放在你的 Gemfile 上。

# javascript - 数组引用与值语义

> ID：15746334
> 
> 赞同：4
> 
> 时间：2013-04-01T15:30:06.390
> 
> 标签：javascript, arrays, reference, key

任何提供数组（列表、向量、元组等）的编程语言都必须决定它们是否具有引用或值语义，通常/显而易见的选择是可变数组的引用语义和不可变数组的值语义。

提供可变数组的 JavaScript 似乎选择了引用语义，例如给定

```
var a = [1, 2, 3]
var b = [1, 2, 3] 
```

然后`a != b`，正如预期的那样，因为尽管它们具有相同的内容，但它们是不同的数组。

但是，当您将它们用作对象中的键时，图片会发生变化；如果您设置`obj[a]`为一个值，则`obj[b]`获得相同的值。此外，如果您更改数组的内容，这仍然是正确的；至少当我在 Rhino 中测试它时，它的行为就好像解释器在每次查找时递归地比较提供和存储的键数组的全部内容，并检查如果其中一个数组被创建时会发生的无限循环指向自己。

这是所有实现中的预期/指定行为吗？

它是否也适用于用作键的对象？

有没有办法获得其他行为，即使用数组作为具有引用语义的键来查找值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T15:32:48.570

当数组用作属性名称时，它们被转换为字符串：

```
[1,2,3].toString() == '1,2,3' 
```

一旦转换为字符串值，具有相同内容的数组将映射到相同的属性。

要回答您的最后一个问题，您不能使用对象来引用属性名称（键），从而只有相同的对象映射到相同的属性（1:1 映射）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T15:33:22.593

`obj[a]`并将 在数组上`obj[b]`运行该`toString`函数并为两者产生相同的结果。它不会尝试将数组用作键。

```
var a = [1,2,3];

var x = {};

x[a] = "test";

var i;
for(i in x)
{
   alert(i);  //"1,2,3"
} 
```

[jsFiddle 示例](http://jsfiddle.net/884eb/)

# scripting - Adobe .jsx 脚本可以包含其他脚本文件吗？

> ID：15746335
> 
> 赞同：6
> 
> 时间：2013-04-01T15:30:12.667
> 
> 标签：scripting, adobe, adobe-illustrator, extendscript

我们正在编写一堆 .jsx 脚本，在每个脚本中我都必须模拟一些函数，以便我可以使用 Array.map() 和 String.trim() 之类的东西，但我不想包含该代码在每个脚本的顶部。

有没有办法在 .jsx 脚本文件中“包含”其他 .jsx 脚本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-13T22:30:00.003

或者您可以简单地在脚本顶部使用`#include`和预处理器指令。[您可以在Adob​​e 的“JavaScript 工具指南”](http://www.adobe.com/devnet/photoshop/scripting.html)`#includepath`中找到详细说明。

例如，如果要包含`scripts/helper.jsx`在`.jsx`文件中：

```
#include "scripts/helpers.jsx"
// the rest of your code below ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-31T00:50:00.640

把这个留给像我这样正在寻找这个的人。在 Adob​​e Illustrator CC 2015 中，我无法开始`#include`工作，但可以`@include`。例如：

# 外部文件：foo.jsx

```
function alertTheWordNo(){
  alert('NO');
} 
```

# 脚本文件：bar.jsx

```
//@include 'foo.jsx';
alertTheWordNo(); 
```

免责声明：我找不到任何相关文档，但已使用 Adob​​e Illustrator CC 2015 对其进行了测试，并且可以正常工作。

希望这可以帮助某人。如果有人有任何问题，就问吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T01:30:57.130

我们现在正在使用`$`Illustrator 中提供的帮助器和`$.evalFile()`方法。将路径传递给它，它将评估文件并返回结果。

我创建了一个小助手，我可以在我的 .jsx 脚本的顶部包含（当然是缩小的），所以我可以这样做`Libraries.include("my-other-script")`，在我的例子中，我的`adobe_scripts`根文件夹中的一个文件，在一个名为 .jsx 的目录中`lib`。

```
// indexOf polyfill from https://gist.github.com/atk/1034425
[].indexOf||(Array.prototype.indexOf=function(a,b,c){for(c=this.length,b=(c+~~b)%c;b<c&&(!(b in this)||this[b]!==a);b++);return b^c?b:-1;});

var Libraries = (function (libPath) {    
    return {
        include: function (path) {
            if (!path.match(/\.jsx$/i)) { 
                path = path + ".jsx"; 
            }
            return $.evalFile(libPath + path);
        }
    };
})($.fileName.split("/").splice(0, $.fileName.split("/").indexOf("adobe_scripts") + 1).join("/") + "/lib/"); 
```

我包括的缩小版：

```
/**
 * Libraries.include(path) -- path must be relative to adobe_scripts/lib/
 * See: https://gist.github.com/jasonrhodes/5286526
 */
[].indexOf||(Array.prototype.indexOf=function(a,b,c){for(c=this.length,b=(c+~~b)%c;b<c&&(!(b in this)||this[b]!==a);b++);return b^c?b:-1;});var Libraries=function(a){return{include:function(b){return b.match(/\.jsx$/i)||(b+=".jsx"),$.evalFile(a+b)}}}($.fileName.split("/").splice(0,$.fileName.split("/").indexOf("adobe_scripts")+1).join("/")+"/lib/"); 
```

请参阅此处的要点：[https ://gist.github.com/jasonrhodes/5286526](https://gist.github.com/jasonrhodes/5286526)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-14T20:02:24.810

只是想在 Ike10 的答案中添加注释。无证是慷慨的——这是我在 20 多年的代码编写中遇到的最糟糕的“文档”。在我看来，您还必须在主 JSX 文件加载/评估外部文件之前将 CEFCommandLine 参数添加到 manifest.xml 文件中：

```
<Resources>
    <MainPath>./whatever.html</MainPath>
    <ScriptPath>./jsx/whatever.jsx</ScriptPath>
    <CEFCommandLine>
        <Parameter>--allow-file-access</Parameter>
        <Parameter>--allow-file-access-from-files</Parameter>
    </CEFCommandLine>
</Resources> 
```

# git - GitLab：无法将代码推送到服务器？

> ID：15746336
> 
> 赞同：7
> 
> 时间：2013-04-01T15:30:14.343
> 
> 标签：git, ssh, gitlab

我已经在 Ubuntu 服务器上安装了 GitLab。一切似乎都很好，除了我无法向/从服务器推送/拉取/克隆。

当我推送时，我收到一般错误消息：

```
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我已经尝试了数小时的谷歌搜索，但我似乎无法找到问题所在。

```
sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production 
```

运行良好，全线OK！

我可以通过 SSH 访问 git@adress.adress 我得到：

```
PTY allocation request failed on channel 0
Welcome to GitLab, Anonymous! 
```

当我做：

```
ssh git@adress.adress "ls /location/of/git/dir" 
```

我得到：

```
Not allowed command 
```

该网站正在运行，当我在该网站上创建一个存储库时，它出现在 /home/git/repository/

但我仍然无法推动它。

**我遵循了本指南：**

[https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md)

和本指南让它在 apache 上运行：

[http://shanetully.com/2012/08/running-gitlab-from-a-subdirectory-on-apache/](http://shanetully.com/2012/08/running-gitlab-from-a-subdirectory-on-apache/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T17:23:56.207

经过数小时的调试后，我终于弄明白了，我不知何故知道配置存在一个简单的问题。

由于第二个指南提到了如何使用相对 url 在 apache 上设置 gitlab，因此您实际上必须在 gitlab 中进行更多配置。我取消了关于相对 url:s unicorn.rb 的注释，并在 gitlab-shell/config 中添加了我的整个 URL（带有子目录）。

前：

```
 http://web-adress.com/ 
```

后：

```
 http://web-adress.com/subdomain/ 
```

现在效果很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-27T15:57:18.210

您可以使用下面的命令对其进行测试。当你登录时，它应该说你的名字。

ssh -T git@myserver.com

欢迎来到 GitLab，Christian Hammer！

如果它说“欢迎来到 GitLab，匿名！” gitlab 不承认你是 gitlab 的用户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-27T15:38:09.407

我不知道你是否已经解决了这个问题，但我发现如果我用我在 gitlab 中使用的电子邮件地址生成一个密钥，这个过程就可以工作。我采取的步骤：

```
ssh-keygen -t rsa -C "#email address#" 
```

使用提供的电子邮件创建新的 ssh 密钥。

生成公钥/私钥 RSA 密钥对。

接下来只需使用下面的代码转储您的公钥并添加到 GitLab SSH 密钥

```
cat ~/.ssh/#key name#.pub

ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6eNtGpNGwstc....* 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-19T17:38:59.727

为了更准确地了解已接受的答案（“Joakim Engstrom”的“4 月 6 日 17:23 回答”和“7 月 21 日 10:07 编辑”）：

您很可能处于更新 Gitlab 以适应您自己的上下文路径的情况（即从`http://localhost/<my_context_path>`和 not访问它`http://localhost`）。

在这个的操作方法中，没有提到还要修改这个 gitlab-shell 配置文件：

```
// logout any Gitlab open session, stop your Gitlab service, and your possible third-party webserver first  
$ sudo service apache2 stop  
$ sudo service gitlab stop  

// perform the modification that fixes it, if you indeed configured Gitlab to be accessed with a custom context path  
$ sudo -u git -H nano ~git/gitlab-shell/config.yml  

# Url to gitlab instance. Used for api calls. Should end with a slash.
-gitlab_url: "http://localhost/"
+gitlab_url: "http://localhost/<my_context_path>/"

// restart services  
$ sudo service gitlab start  
$ sudo service apache2 start  

// Try to push again from your particular Gitlab user local repository, to the Gitlab remote repository    
$ cd <path_to_my_local_repository>  
$ sudo -u <OS_username_that_owns_the_local_repository> -H git push -u origin master  
Counting objects: 3202, done.  
Delta compression using up to 2 threads.  
Compressing objects: 100% (3115/3115), done.  
Writing objects: 100% (3202/3202), 11.56 MiB | 5.34 MiB/s, done.  
Total 3202 (delta 609), reused 0 (delta 0)  
To `git@<my_FQDN>:<my_Gitlab_user_or_group_name>/<my_gitlab_project_ID>.git`  
  * [new branch]      master -> master  
Branch master set up to track remote branch master from origin.  
$ 
```

关于“类似于 stackoverflow.com/questions/13071234/… – Paul Verest 7 月 18 日 6:20”（[无法推送到新的 gitlab 安装](https://stackoverflow.com/questions/13071234/cant-push-to-new-gitlab-install)）：
不，这不是本页主题中的同一个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-09T17:37:21.383

在我的情况下，原因是 nginx 强制重定向到 https。通过运行检查 git 用户是否可以使用 gitlab-api

```
sudo -u git -H /home/git/gitlab-shell/bin/check 
```

在服务器上。在我的情况下，输出是

```
Check GitLab API access: FAILED. code: 301 
```

我不得不`gitlab_url`改变`/home/git/gitlab-shell/config.yml``https://<domain>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-22T01:51:31.577

对我来说，这是因为我在 /etc/ssh/sshd_config AllowUsers git 中限制了谁可以 ssh 进入我的服务器

# java - java中的变形图像与java.awt.Graphics2D

> ID：15746337
> 
> 赞同：2
> 
> 时间：2013-04-01T15:30:29.053
> 
> 标签：java, image, swing, graphics, java-2d

我有这样的图像：

![原始图像](https://i.stack.imgur.com/5qNK2.png)

我需要将其变形为这样的图像：

![变形图像](https://i.stack.imgur.com/UuJHQ.png)

我尝试使用很多代码来制作它，但我没有解决它。这是我的最后一次尝试，但最终图像看起来不太好

```
import java.awt.*;
import java.awt.geom.AffineTransform;
import java.awt.image.AffineTransformOp;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

class MyPanel2 extends JPanel {

    private final static double DEG_TO_RAD = Math.PI / 360;

    private BufferedImage imageA;
    private BufferedImage imageB;

    static String IMG_URL1 = "img/upg.png";

    public MyPanel2() {

        try {
            imageA = ImageIO.read(new File(IMG_URL1));
        } catch (IOException e) {
            System.err.println("Couldn't find input file. ");
            System.exit(1);
        }

        double rotationRequired = Math.toRadians(90);
        double locationX = imageA.getWidth() / 2;
        double locationY = imageA.getHeight() / 2;
        AffineTransform tx = AffineTransform.getRotateInstance(rotationRequired, locationX, locationY);
        AffineTransformOp op = new AffineTransformOp(tx, AffineTransformOp.TYPE_BILINEAR);

        BufferedImage pom_2 = imageA;
        imageA = new BufferedImage(imageA.getWidth(), imageA.getHeight(), BufferedImage.TYPE_INT_ARGB);

        Graphics2D g2 = imageA.createGraphics();
        g2.setStroke(new BasicStroke(5));
        g2.setColor(Color.BLACK);

        g2.drawImage(op.filter(pom_2, null),10,10, null);

        BufferedImage pom = new BufferedImage(imageA.getWidth()*2, imageA.getHeight(), BufferedImage.TYPE_INT_ARGB);
        Graphics2D g3 = pom.createGraphics();
        g3.setColor(Color.white);
        g3.drawImage(imageA, imageA.getWidth()/5, 0, null);
        imageA = pom;

        imageB = new BufferedImage(imageA.getWidth(), imageA.getWidth(), BufferedImage.TYPE_INT_ARGB);
        // pruchod obrazkem pixel po pixelu
        for (int i = imageB.getWidth(); i > 0; i--) {
            for (int j = imageB.getHeight(); j > 0; j--) {
                int r = (int) (Math.sqrt(i * i + j *j));
                int fi = (int) (Math.atan2(j, i) / DEG_TO_RAD);

                if (r < pom.getWidth() && fi < pom.getHeight()) {
                    imageB.setRGB(i, j, pom.getRGB(r, fi));
                }
            }
        }

        this.setPreferredSize(new Dimension(800, 600));

        imageA = pom_2;
    }

    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D)g;

        g2.drawImage(imageA,0,0, null);

        double rotationRequired = Math.toRadians(-135);
        double locationX = imageB.getWidth() / 2;
        double locationY = imageB.getHeight() / 2;
        AffineTransform tx = AffineTransform.getRotateInstance(rotationRequired, locationX, locationY);
        AffineTransformOp op = new AffineTransformOp(tx, AffineTransformOp.TYPE_BILINEAR);

        g2.drawImage(op.filter(imageB, null), 0, -imageB.getHeight()/2, null);
    }
} 
```

使用此代码看起来像这样的最终图像： ![最终图像](https://i.stack.imgur.com/Z6E4E.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:54:52.493

我发布我的解决方案。也许它并不优雅，但它有效：

![我的结果](https://i.stack.imgur.com/r5v3C.png)

```
class MyPanel2 extends JPanel {

    private BufferedImage imageA;
    private BufferedImage imageB;
    private double k = 3.0;

    String IMG_URL1 = "img/upg.png";

    public MyPanel2() {

        try {
            imageA = ImageIO.read(new File(IMG_URL1));
        } catch (IOException e) {
            System.err.println("Couldn't find input file. ");
            System.exit(1);
        }

        double radius = k*imageA.getHeight();
        int xC = (int)radius, yC = (int)radius; 
        imageB = new BufferedImage(xC*2,yC, BufferedImage.TYPE_INT_ARGB);

        double r, i, j;
        for(int y = 0; y < imageB.getHeight(); y++) {
            for (int x = 0; x < imageB.getWidth(); x++) {
                r = Math.sqrt((xC-x)*(xC-x)+(yC-y)*(yC-y));
                i = (radius-r);
                j = (-k*imageA.getWidth()/2*(xC-x))/r + imageA.getWidth()/2;
                if (i>=0 && i < imageA.getHeight() && j>=0 && j < imageA.getWidth()) {
                    imageB.setRGB(x, y, imageA.getRGB((int)j, (int)i));
                }
            }
        }
        this.setPreferredSize(new Dimension(800, 600));
    }

    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D)g;
        g2.drawImage(imageA, 0, 0, null);
        g2.drawImage(imageB, -imageA.getWidth(), 0, null);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:28:32.383

你走对了，因为你得到了极坐标到直角坐标的变换。您只需缩放/平移源图像和生成的图像（或等效地，只需转换相对坐标）。

直观地说，在您生成的图像中，fi 的跨度太大，例如 PI/2，而在您想要的图像中，角度跨度非常小（您看到曲率小得多吗？）

希望这可以帮助。

# php - 在另一个函数中定义局部变量

> ID：15746340
> 
> 赞同：2
> 
> 时间：2013-04-01T15:30:43.023
> 
> 标签：php, object, functional-programming

我一直在研究PHP 中的[魔术常数](http://php.net/manual/en/language.constants.predefined.php)和[反射](http://www.php.net/manual/en/reflection.examples.php)，看看是否有可能：

```
function one() {

  setVars();

  // $node would be in scope
  print_r($node);

}

function setVars() {
  return $node = '2';
} 
```

这是一个经典的编程概念吗？反射似乎是最接近的东西。基本上，我只想在不同的范围（调用 setVars() 函数的函数的范围/上下文）中定义变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:33:25.630

对于多个变量，请尝试将它们存储在一个数组中并返回该数组。

```
function one() {

  $nodeArray = setVars();
  print_r($nodeArray );

}

function setVars() {
  $nodeArray[] = 1;
  $nodeArray[] = 1;
  $nodeArray[] = 1;
  return $nodeArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:40:56.907

看看extract()。

```
function one() {

  $vars = setVars();
  extract($vars);

  // $node1 would be in scope
  print_r($node1);

}

function setVars() {
  $node1 = '1';
  $node2 = '2';
  return compact('node1','node2');
} 
```

应该说，虽然这是可能的，但它通常会导致糟糕的架构和问题。

# javascript - 从具有许多数据点的 CSV 文件加载 HighCharts

> ID：15746347
> 
> 赞同：0
> 
> 时间：2013-04-01T15:30:57.130
> 
> 标签：javascript, jquery, highcharts

经过大量搜索并想将头撞在桌子上之后，我在stackoverflow上发布了我的第一个问题。

我有一个 ASP.NET Web 应用程序，它在服务器端生成一些数据并在服务器上创建一个 CSV 文件。

我正在使用 HighCharts 生成图表。一切都很好，但是，根据用户运行的日期范围，可能会有一些数据点或许多数据点。

当有很多数据点时，问题就出现了。看看 X 轴，你就会明白我的意思。无论如何要“分组”这些不显示X轴上的每一个点的地方？

日期是随机间隔的。

我用我的客户端代码和 JavaScript 变量中的 CSV 文件的内容创建了一个 JSFiddle。

这是我的代码：

```
function parseDate(dateStr) {
    var matches = dateStr.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})/)
    return Date.UTC(matches[3], matches[1]-1, matches[2]);
}

var csv = 'Chart,3/4/2007,3/24/2007,4/13/2007,4/25/2007,9/19/2007,9/28/2007,11/5/2007,1/7/2008,1/14/2008,1/21/2008,1/27/2008,2/3/2008,2/10/2008,2/17/2008,2/24/2008,3/2/2008,3/23/2008,3/30/2008,4/5/2008,4/21/2008,5/3/2008,5/10/2008,5/17/2008,5/24/2008,5/31/2008,6/8/2008,6/15/2008,6/29/2008,7/4/2008,7/18/2008,7/25/2008,8/1/2008,8/8/2008,9/17/2010,11/25/2010,8/16/2012,1/17/2013,1/27/2013\nDates,180.00,175.50,167.00,166.50,170.00,171.50,174.00,163.00,162.50,164.00,166.50,166.50,167.50,170.00,170.00,171.00,169.00,166.50,166.00,166.50,162.00,160.00,160.50,162.50,164.00,164.00,165.00,165.50,166.00,169.00,171.00,170.00,171.00,165.00,165.00,189.00,177.00,175.50';

var options = {
        chart: {
            renderTo: 'chart',
            defaultSeriesType: 'line'
        },
        title: {
            text: 'Test Chart'
        },
        xAxis: {
           type: 'datetime',
            categories: []
        },
        yAxis: {
            title: {
                text: 'Pounds'
            }
        },
        series: []
    };
    // Split the lines
        var lines = csv.split('\n');
        $.each(lines, function(lineNo, line) {
            var items = line.split(',');
            if (lineNo == 0) {
                $.each(items, function(itemNo, item) {
                    if (itemNo > 0) options.xAxis.categories.push(parseDate(item));
                });
            }
            else {
                var series = { 
                    data: []
                };
                $.each(items, function(itemNo, item) {
                    if (itemNo == 0) {
                        series.name = item;
                    } else {
                        series.data.push(parseFloat(item));
                    }
                });
                options.series.push(series);
            }
        });

        var chart = new Highcharts.Chart(options); 
```

这是 JSFiddle 的链接：

[http://jsfiddle.net/Q2hyF/6/](http://jsfiddle.net/Q2hyF/6/)

提前致谢，

罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:04:32.890

查看 HighStocks 及其 DataGrouping 功能：

[http://www.highcharts.com/stock/demo/data-grouping](http://www.highcharts.com/stock/demo/data-grouping)

它可以处理比 HighCharts 大得多的数据集。但是，也有一些缺点，因为最新的 HighCharts 功能并不总是立即出现在 HighStocks 中。如果您想测试它，通常只需要对语法进行微小的更改即可使用 HighStocks。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T18:30:27.433

我最终得到了这个工作并且从未发布答案......这是答案。

仔细看看：

**series.data.push([parseDate(points[0]), parseFloat(points[1])]);**

在下面的代码中......

```
function parseDate(dateStr) {
    var matches = dateStr.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})/)
    return Date.UTC(matches[3], matches[1] - 1, matches[2]);
}

var csv = 'Chart,11/1/2013|6,11/2/2013|4,11/3/2013|6,11/4/2013|3,11/5/2013|5,11/6/2013|5,11/7/2013|5,11/8/2013|6,11/9/2013|4,11/10/2013|13,11/11/2013|12,11/12/2013|3,11/13/2013|5,11/14/2013|7,11/15/2013|9,11/16/2013|0,11/17/2013|2,11/18/2013|3,11/19/2013|2,11/20/2013|16,11/21/2013|6,11/22/2013|9,11/23/2013|9,11/24/2013|20,11/25/2013|10,11/26/2013|10,11/27/2013|4,11/28/2013|9,11/29/2013|7,11/30/2013|7';

var options = {
    chart: {
        renderTo: 'chart',
        type: 'line'
    },
    title: {
        text: 'Sales'
    },
    xAxis: {
        type: 'datetime'
    },
    series: []
};

var lines = csv.split('\n');
    $.each(lines, function (lineNo, line) {
        var items = line.split(',');
        var series = {
            data: []
        };
        $.each(items, function (itemNo, item) {
            if (itemNo == 0) {
                series.name = item;
            } else {
                var points = item.split('|');
                series.data.push([parseDate(points[0]), parseFloat(points[1])]);
            }
        });
        options.series.push(series);
    });
    var chart = new Highcharts.Chart(options); 
```

[http://jsfiddle.net/rswilley601/gtsLatyr/](http://jsfiddle.net/rswilley601/gtsLatyr/)

# .net - 是否可以在 VS2012 中将实体框架设计器与 SQLite 一起使用？

> ID：15746349
> 
> 赞同：2
> 
> 时间：2013-04-01T15:31:05.093
> 
> 标签：.net, entity-framework, sqlite, visual-studio-2012

我环顾四周，看到说明它应该是可能的并且现在应该随时可用的[条目。](https://stackoverflow.com/questions/14111505/vs-2012-sqlite-design-time)我已经下载了许多不同的版本（他们的网站包含大量的版本） - 都无济于事。我找不到一个明确的声明，设计师是否存在，以及它是否会下载它所包含的内容。

那么，是否存在适用于 Visual Studio 2012 的 SQLite 实体框架设计器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T08:43:23.873

它确实存在。从这里下载：

[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

记得选择 32 位安装包，上面写着：“此安装包能够安装 Visual Studio 2012 的设计时组件。”。

# breeze - 用微风检索记录

> ID：15746361
> 
> 赞同：1
> 
> 时间：2013-04-01T15:31:35.907
> 
> 标签：breeze

我用 asp.net mvc + 微风开发了一个应用程序。

到目前为止，我检索了一个特定的记录（基于 id），如下所示：

```
var getTransportById = function (transportId, transportObservable) {
       return manager.fetchEntityByKey('Transport', transportId, true)
               .then(fetchSucceeded)
               .fail(queryFailed);
}

function fetchSucceeded(data) {
   var s = data.entity;
   return ...
} 
```

现在我需要检索相同的记录，但需要“扩展”名为*sender*的属性，该属性链接到另一个实体（表）。我没有找到通过**fetchEntityByKey**来“扩展”一个属性的方法，所以我使用了这样的查询：

```
var getTransportById = function (transportId, transportObservable) {
    var query = EntityQuery.from('Transports')
                           .where('id', 'eq', transportId)
                           .expand('Sender')
                           .orderBy(orderBy.transport);

    return manager.executeQuery(query)
        .then(fetchSucceeded)
        .fail(queryFailed);
}

function fetchSucceeded(data) {
    var s = data.results[0];
    return ...
} 
```

**我的问题：**这是继续的好方法吗？还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:11:12.907

您可以从 EntityKey 创建查询，然后展开所需的任何属性。像这样的东西：

```
var entityKey = new EntityKey("Transport", transportId);
// expand whichever nav props you want here. 
var query = EntityQuery.fromEntityKey(entityKey).expand("Sender").orderBy(...);
return entityManager.executeQuery(query).then( {
  ...
}); 
```

# ruby-on-rails - after_create :foo vs after_commit :bar, :on => :create

> ID：15746362
> 
> 赞同：52
> 
> 时间：2013-04-01T15:31:38.207
> 
> 标签：ruby-on-rails

有什么区别：

`after_create :after_create`和`after_commit :after_commit_on_create, :on => :create`

这些可以互换使用吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-01T23:53:57.087

它们不可互换。关键区别在于回调何时运行。在 的情况下`after_create`，这将始终在`save`(or `create`) 的调用返回之前。

Rails 将每个事务包装`save`在事务中，并且在该事务中运行之前/之后的创建回调（这样做的结果是，如果在 after_create 中引发异常，则保存将被回滚）。使用`after_commit`，您的代码在提交最外层事务之后才会运行。这可能是创建的事务轨道或由您创建的一个（例如，如果您想在单个事务中进行多项更改）。

在`after_save/create`运行时，您的保存仍然可以回滚并且（默认情况下）对其他数据库连接（例如，sidekiq 等后台任务）不可见。这两者的某种组合通常是使用`after_commit`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-23T07:26:47.653

这两者在关联方面有一个主要区别。一旦对给定对象触发插入查询，并且在对象关联的插入查询之前，就会调用 after_create。这意味着关联对象的值可以直接在 after_create 回调中更改，而无需更新查询。

```
class Post < ActiveRecord::Base
  has_one :post_body
  after_create :change_post_body

  def change_post_body
    self.post_body.content = "haha"
    #No need to save
  end 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T13:39:06.157

**导轨 5**

您`after_create_commit :method_name`只能在创建时调用此回调。

**警告**

在同一个模型中同时使用`after_create_commit`和`after_update_commit`只允许最后定义的回调生效，并会覆盖所有其他回调。

来源：[https ://guides.rubyonrails.org/active_record_callbacks.html](https://guides.rubyonrails.org/active_record_callbacks.html)

# excel - VBA If Then 或语句

> ID：15746368
> 
> 赞同：0
> 
> 时间：2013-04-01T15:31:56.263
> 
> 标签：excel, vba, macos

VBA初学者在这里。我试图在 VBA 2003 中做一个非常简单的 if/then 语句，但我遇到了这个问题。我的代码如下：

```
Dim var as Integer
If var = 1 or 2 Then
    'Do stuff
Else
    MsgBox ("error") 
```

我一直遇到 or 语句的问题。如果我将其更改为 var = 1，则代码运行顺利；如果我将其重写为

```
If var = 1 or var = 2 
```

然后它工作正常。但正如我想扩展它一样，能够以更有凝聚力的方式编写它会很棒。我错过了什么？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:33:43.947

如果你想要更简洁的代码，你可以使用一个`case`表达式来代替：

```
select case var 
    case 1, 2
        'Do stuff
    case else
        MsgBox ("error")
end select 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:33:32.353

你需要把它写成：

```
If var = 1 or var = 2 
```

因为`or`连接两个条件，而不是构成同一条件一部分的两个值。

# r - R 和大数据分析

> ID：15746369
> 
> 赞同：3
> 
> 时间：2013-04-01T15:31:56.287
> 
> 标签：r, big-o, bigdata

我正在寻找一些关于使用 R 分析大数据的建议——即进入 TB 的数据。

通常，我认为最好对数据进行预处理并仅加载用户需要的信息以执行分析。但是，如果说需要聚合来自大型数据集（例如 200 GB）的信息，我认为首先将数据存储在列数据库而不是面向行的 DBMS 中会更有效。其次，对于 CPU 密集型数据分析，使用 RHadoop / RHIPE 拥有一些分布式计算能力可能是值得的。此外，如果有多个企业用户，实现这些的最佳方法是什么……（比如说 10 位同时研究大型数据集的研究人员）

我在网上找到了一些资源，例如 R 索引、mmap 包，可以在 R 中进行高效计算，但希望从那些实际工作并在企业级实现这些的人那里获得一些反馈。

提前感谢您的建议，

问候。

# java - SpringMVC 自定义集合编辑器不向 Jsp 返回数据

> ID：15746371
> 
> 赞同：2
> 
> 时间：2013-04-01T15:32:00.170
> 
> 标签：java, jquery, spring, spring-mvc

我在春季绑定了一个多选列表，该项目没有从 DAO 获取其数据，数据是从另一个选择选项列表中添加的。用户单击一个按钮，然后使用 jquery 将数据发送到多选选项列表。

当表单发布时，该项目不会发生数据绑定，因为它是一种复杂的数据类型，所以我注册了一个 CustomEditor 并将其附加到 @initbinder。

**已编辑** 我已经更新了**CollectionEditor**现在将公民列表返回到视图的代码，但是我无法获取列表中的数据来填充选择选项。我正在尝试将元素添加到列表中，但是当从服务器返回时，jsp 仍然选择保持为空。

下面是代码：

**自定义集合编辑器**

```
@InitBinder("crime")    
    protected void initBinder(WebDataBinder binder, HttpServletRequest request, ServletRequestDataBinder victimbinder){
     victimbinder.registerCustomEditor(List.class, "victims", new CustomCollectionEditor(List.class){
         protected Object convertElement(Object element){

             Citizens victims = new Citizens();

             String ssNumber = "";

             if (element instanceof String){
                ssNumber = (String) element;

             }                      

             logger.debug("element is ;" +element);

             try {

                int socialSecurityNumber = Integer.parseInt(ssNumber);
                victims = citizenManager.getCitizen(socialSecurityNumber);

            } catch (NumberFormatException e) {                     
                logger.error(e.getMessage());
            } catch (Exception e) {
                logger.error(e.getMessage());
            }

             return victims;        
         }

    }); 
```

**从控制器中的DAO填充的jsp**

这包含数据填充表单 DAO 类，当单击按钮时，它会从列表中获取数据，并将其附加到绑定到 POJO 的另一个列表

```
<label>Victims List</label><buttonid="addVictimBtn">/button>
<form:select path="" id="dbvictims" title="Victims Of Crime" class="victimLst">
<form:options items="${dbvictims.dbvictimList}" itemValue="socialSecurityNumber" itemLabel="name"/>
</form:select> 
```

**绑定到 POJO 的 Jsp 选择项**

```
<label>Victims In Crime</label><button id="removeVictimBtn">-</button> 
<form:select path="victims" id="victims" title="Victims Of Crime"  multiple="multiple" class="victimLst">
<form:options items="${victimList}" itemValue="socialSecurityNumber" itemLabel="name"/>
</form:select><form:errors path="victims" class="errors" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:13:00.500

这个问题的解决方案非常简单，所有的工作都已经在**CustomCollectionEditor**中完成了。这在绑定上述复杂数据类型时很重要。可能还有其他方法可以做到这一点，但是我发现这是一种非常干净和简单的方法。

return 语句非常重要，因为它绑定到视图中元素的 item 属性。**CustomCollectionEditor**返回一个对象列表（*受害者*） 使用**DAO**从数据库中获取对象。这很重要，因为帖子只发送选择值而不是标签，因此我们重建列表并重新发送到视图。

我省略的部分是将列表对象从控制器传递回视图。

**控制器**

```
@RequestMapping(value="save.htm", method = RequestMethod.POST)
    public ModelAndView handleSave(@Valid @ModelAttribute Crime crime, 
    BindingResult result,
    ModelMap m,
    Model model) throws Exception {

    if(result.hasErrors()){
           model.addAttribute("victimList",crime.getVictims());

    return new ModelAndView("*Your View*");
............... 
```

# css - Iframe 内高度为 100% 的 DIV 导致滚动条被切断

> ID：15746372
> 
> 赞同：1
> 
> 时间：2013-04-01T15:32:09.503
> 
> 标签：css, html, scrollbar

我在 iFrame 中的 div 有问题，我查看了这个网站上的十几个帖子都无济于事。基本上，iframe 的内容有一个滚动条，而 iframe 将其切断。

正如本网站上的帖子所建议的那样，我已将 html 和 body 的高度设置为某个绝对值（170 像素），因为孩子们使用 height:100%，但这不起作用。我也尝试将孩子的高度设置为 170px，但这也不起作用。唯一可行的是将 iframe 设置为某个数字 > 230 像素。但是，我希望 iframe 高度保持在 170 像素。

**一般来说，我正在寻找一种方法来拥有两个视口，一个不滚动的标题部分和一个在 iframe 内滚动的内容部分。内容应显示 1 个垂直滚动条以滚动内容部分。**

我的代码包含在下面，我正在使用 iframe。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
    <iframe src="/html/scrolling2.html" scrolling="no" style="height:170px"/>
</body>
</html>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
html, body {
  position:absolute;
  top:0;
  left:0;
  border:0;
  margin:0;
  padding:0;
  height:inherit;
  min-height:inherit;
}

.parent_div {
    height:100%;
    min-height:100%;
    padding:0px;
    margin:0px;
    border:0px
}

.wrapper_div {
  margin: 0;
  padding:0px 0px 0px 3px;
  width:100%;
  height:100%;
  min-height:100%;
}

.wrapper #title_table .titleHeader_row th.coltitle_cell {
  border: 1px solid #a7cbe3;
  border-left: none;
  font: bold 11px;
  min-height: 35px;
  margin: 0;
  padding: 0;
  position: relative;
}

.record_div {
  margin:0px;
  width:100%;
  height:100%; /*need this to take up remaining height not occupied by title_table*/
  overflow:auto;
}
</style>
</head>
<body>
<div class="parent_div" id="listing">
  <DIV class="wrapper_div" >
    <TABLE id="title_table" >
      <TR >
        <TH class="coltitle_cell">123
        </TH>
        <TH class="coltitle_cell">123<br/>123
        </TH>
        <TH class="coltitle_cell">123<br/>123<br/>123
        </TH>
        <TH class="coltitle_cell">123<br/>123<br/>123
        </TH>
        <TH class="coltitle_cell">123<br/>123
        </TH>
        <TH class="coltitle_cell">123<br/>123
        </TH>
        <TH class="coltitle_cell">123<br/>123
        </TH>
        <TH class="coltitle_cell">123<br/>123
        </TH>
                <TH class="coltitle_cell">123<br/>123
        </TH>
        </TR>
        </TABLE>
  <DIV class="record_div"  id="coldata_div" >
    <TABLE class="record_table" id="coldata_table">
      <TR>
        <TD class="dummy_cell"></TD>
        <TH >123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        </TR>
              <TR>
        <TD ></TD>
        <TH >123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        </TR>
                      <TR>
        <TD ></TD>
        <TH >123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        </TR>
                              <TR>
        <TD ></TD>
        <TH >123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        </TR>
                              <TR>
        <TD ></TD>
        <TH >123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        <TH >123<br/>123
        </TH>
        </TR>
        </TABLE>
</div>
</DIV>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:13:55.800

我想我在你的 CSS 评论中看到了你想要做的问题：

> ```
>  /*need this to take up remaining height not occupied by title_table*/ 
> ```

问题是浏览器并不真正理解*剩余空间*的概念。相反，您必须告诉它有多少可用空间和/或要使用多少。

尝试使用以下样式将标题表包装在 div 中：

```
#title_wrapper {
    height:20%;
    overflow:hidden;
} 
```

然后在第二部分使用这种样式来占用“剩余”空间：

```
.record_div {
  height:80%;
  overflow:auto;
} 
```

# node.js - 使用 node.js 在 arangoDB 中创建文档

> ID：15746376
> 
> 赞同：4
> 
> 时间：2013-04-01T15:32:18.890
> 
> 标签：node.js, arangodb

传递 json 文档进行创建的正确方法是什么？

我的示例工作正常，如下所示：/* 在集合中创建一个新文档 */

```
db.document.create({a:"test"},function(err,ret){
if(err) console.log("error(%s): ", err,ret);
else console.log(util.inspect(ret));
}); 
```

但是我如何将 json 作为参数传递，因为这不起作用？

```
var json = '{a:"test"}';

db.document.create(json,function(err,ret){
if(err) console.log("error(%s): ", err,ret);
else console.log(util.inspect(ret)); 
```

});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:19:25.070

查看上面 Kaerus 存储库中的“创建”函数，创建函数是：

```
"create": function() {
  var collection = db.name, data = {}, options = "", callback, i = 0;
  if(typeof arguments[i] === "boolean"){ 
    if(arguments[i++] === true)
      options = "&createCollection=true";
  } 
  if(typeof arguments[i] === "string") collection = arguments[i++];
  if(typeof arguments[i] === "object") data = arguments[i++];
  if(typeof arguments[i] === "function") callback = arguments[i++];
  return X.post(xpath+collection+options,data,callback);
}, 
```

因此，您要么需要将其作为 JavaScript 对象传递，即调用

```
JSON.parse('{"a":"test"}') 
```

将 JSON 表示转换为 JavaScript 对象或修补 Kaerus 客户端以允许行中的对象或字符串

```
if(typeof arguments[i] === "object") data = arguments[i++]; 
```

（这可能会导致可选参数出现问题）。

注意：无论如何，重要的是“json”包含有效的 JSON 表示。

```
{ a: "Test" } 
```

无效，

```
{ "a": "Test" } 
```

是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:24:51.160

看看这个单元测试：[https ://github.com/kaerus/arango-client/blob/master/test/api/document.js](https://github.com/kaerus/arango-client/blob/master/test/api/document.js)

尝试

```
 var json = {"a":"test"}; 
```

# php - html/php：在推文链接 url 中包含哈希值

> ID：15746386
> 
> 赞同：0
> 
> 时间：2013-04-01T15:32:38.680
> 
> 标签：php, html, wordpress, twitter

所以我在 wordpress 中建立了通常的 CMS 网站，一切都很好，没有问题。我正在使用自定义帖子类型，但这次不是每个帖子都将您带到一个新页面，而是设置了一个充满缩略图的砌体网格布局，单击其中一个缩略图会将相关内容附加到一个清除 div （在每一行之后）并将一个 hashchange 函数附加到 url （这样你就可以从另一个页面导航到它。
但是，这是我的问题所在，因为 url 有散列，而且我每个帖子都有一个推文按钮因此用户可以通过 twitter 等方式共享它，当它将 url 附加到推文时，它会删除散列后的所有内容，这在这种情况下没有用。

我的帖子 url 示例：`www.example.com/post-type/#post_01`
HTML / PHP 代码：

```
<a href="https://twitter.com/share?url=<?php echo home_url(); ?>/post-type/#<?php echo strtolower(str_replace(' ', '_', get_the_title())); ?>&text=TWEET TEXT GOES HERE" target="_blank">Tweet</a> 
```

这应该将帖子网址附加到推文中，如下所示：`www.example.com/post-type/#post_01` 但哈希和它后面的所有内容（包括推文文本）都被删除了。
反正有这个吗？从而允许您在 url 中发布关于带有哈希值的链接的推文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:37:45.020

如果您对 URL 进行编码，它会起作用吗？

```
<a href="https://twitter.com/share?url=<?=
  urlencode(
    home_url().
    '/post-type/#'.
    strtolower(str_replace(' ', '_', get_the_title()))
  )
?>&text=TWEET TEXT GOES HERE" target="_blank">Tweet</a> 
```

（为了便于阅读，留白）

# heroku - 使用asset_sync gem 推送到Heroku 应用程序时同步.less 文件时出错？

> ID：15746387
> 
> 赞同：0
> 
> 时间：2013-04-01T15:32:40.333
> 
> 标签：heroku, amazon-s3, ruby-on-rails-3.2, less, assets

我有一个 Rails 3.2.12 应用程序，我试图使用 Amazon S3 存储桶和我的 Heroku 应用程序的asset_sync gem 同步我的资产。我查看了整个 github 问题跟踪器和此处的 SO，但无法找到答案。所以这是我的问题：

是否可以使用asset_sync gem 同步.less 文件？

在我推送到 Heroku 之后，我在日志中看到了这个错误：

> ```
> Running: rake assets:precompile
>    rake aborted!
>    variable @inputHeight is undefined
>    (in /tmp/build_tejom7tf9zq9/app/assets/stylesheets/utils-and-mixins.less) 
> ```

为了配置我的应用程序，我从[asset_sync github页面](https://github.com/rumblelabs/asset_sync)关注了wiki，并设置了我的ENV变量，我使用了内置初始化程序。

以下是我的 production.rb 文件中的修改，以适应 assets_sync 要求：

```
 # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  config.assets.precompile += [ '*.css' ]

  # Serving Assets From S3 on Heroku
  config.action_controller.asset_host = "//s3.amazonaws.com/test"

  # store assets in a 'folder' instead of bucket root
  config.assets.prefix = "/production/assets"

end 
```

任何建议将不胜感激。谢谢

编辑1：

我什至尝试在命令行中单独运行：

```
heroku run rake assets:precompile --app <yourapp> 
```

但它没有帮助，它抛出了同样的错误。

编辑2：

我想这就是你要求的：

```
....
gem 'less-rails', '~> 2.3.2'

gem 'twitter-bootstrap-rails', '2.2.6'

# Gems used only for assets and not required in production environments by default.
group :assets do
  gem 'sass-rails', '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'therubyracer', '~> 0.11.4', platforms: :ruby
  gem 'asset_sync'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:48:50.580

通过在我的 production.rb 中写入我想包含到我的 S3 存储桶中的特定 .css 文件名，设法使其工作：

```
 # Enable serving of images, stylesheets, and JavaScripts from an asset server
  config.action_controller.asset_host = "//s3.amazonaws.com/test"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  config.assets.precompile += %w( public.css users.css admin.css ) 
```

# activemq - 如何访问.net中的activemq统计插件

> ID：15746391
> 
> 赞同：1
> 
> 时间：2013-04-01T15:33:01.080
> 
> 标签：activemq, nms

我正在尝试在 c#中访问 activemq 统计信息[http://activemq.apache.org/statisticsplugin.html](http://activemq.apache.org/statisticsplugin.html)

这就是我到目前为止所拥有的。我无法得到消费者的回复。我可以在监控网站的队列中增加计数。

```
public class Statistics 
{
    private readonly string queueName = string.Empty;
    private readonly string queueToMonitor = string.Empty; 
    private readonly IConnectionFactory connectionFactory;
    private readonly IConnection connection;
    private readonly ISession session;
    private readonly IMessageProducer producer;
    private readonly ActiveMQQueue queue;

    public Statistics(string qName, string brokerUri, string queueToMon)
    {
        this.queueName = qName;
        this.queueToMonitor = "ActiveMQ.Statistics.Destination." + queueToMon; 
        this.connectionFactory = new ConnectionFactory(brokerUri);
        this.connection = connectionFactory.CreateConnection();
        this.connection.Start();
        this.session = connection.CreateSession();

        queue = new ActiveMQQueue(qName);
        producer = session.CreateProducer(queue);

    }

    public void GetStats()
    {
        try
        {
            var statusQueue = session.CreateTemporaryQueue();
            var consumer = session.CreateConsumer(statusQueue);
            ActiveMQQueue query = new ActiveMQQueue(queueToMonitor);

            var msg = session.CreateMessage();
            msg.NMSReplyTo = statusQueue;
            producer.Send(queue, msg);

            var reply = (ActiveMQMapMessage)consumer.Receive();

            if (reply != null)
            {
                var test = reply.Content.ToString(); 
            }
         }
        catch (Exception e)
        {
            var t = e.Message + " " + e.StackTrace;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:25:13.403

您将消息发送到错误的队列。您需要将消息发送到**ActiveMQ.Statistics.Destination.QueueToMonitor**目的地。我重新编写了您的 GetStats() 函数以表明它有效。关键的变化是生产者将消息发送到哪个目的地。

```
public void GetStats()
{
    try
    {
        IDestination statusQueue = session.CreateTemporaryQueue();
        IMessageConsumer consumer = session.CreateConsumer(statusQueue);
        IDestination query = session.GetQueue(queueToMonitor);
        IMessage msg = session.CreateMessage();
        IMessageProducer producer = session.CreateProducer(query);

        msg.NMSReplyTo = statusQueue;
        producer.Send(msg);

        IMapMessage reply = (IMapMessage) consumer.Receive();

        if(reply != null)
        {
            IPrimitiveMap statsMap = reply.Body;

            foreach(string statKey in statsMap.Keys)
            {
                Console.WriteLine("{0} = {1}", statKey, statsMap[statKey]);
            }
        }
    }
    catch(Exception e)
    {
        var t = e.Message + " " + e.StackTrace;
    }
} 
```

# java - 使用番石榴将地图转换为对象？

> ID：15746392
> 
> 赞同：1
> 
> 时间：2013-04-01T15:33:04.433
> 
> 标签：java, object, map, guava

使用 Guava，是否可以将 Map 转换为包含 Map 的键和值的对象的集合或列表？例如给出类似的东西

```
class MyEntry {
    public String key;
    public String value;
}

Map<String,String> theMap = new Map<String,String>(); 
```

我在番石榴中缺少这样的东西/没有找到它：

```
Set<MyEntry> myEntries = Maps.transform(theMap, transformFunction<<Map<String,String>, MyEntry>); 
```

显然手动执行此操作并不难，但我仍然想知道我是否错过了一些东西，而 Guava 真的不支持这样的事情吗？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:05:29.967

你可以用番石榴做的最接近的事情是

```
Collection<MyEntry> myEntries = Collections2.transform(map.entrySet(), function); 
```

这只是 的 上的正常转换`entrySet`，`map`并且`function`具有类型`Function<Map.Entry<String, String>, MyEntry>`。

Guava 不能提供`Sets.transform`多种原因——它不能保证函数是单射的，它没有函数的逆函数等等。如果你需要 a `Set`，那么你最好只做手动循环。

# ios - 调用导航堆栈中的协议方法

> ID：15746395
> 
> 赞同：1
> 
> 时间：2013-04-01T15:33:09.120
> 
> 标签：ios, delegates, protocols

我声明了一个协议方法，以便被它的委托调用。这是相关代码：

协议被声明的视图：

***类别视图控制器.h***

```
@class  CategoryViewController;
@protocol CategoryViewControllerDelegate<NSObject>
-(void)loadProductsList:(id)sender;

@end

@interface CategoryViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>
{

    id delegate;

}

@property(nonatomic, strong)id <CategoryViewControllerDelegate>delegate; 
```

***类别视图控制器.m***

```
@implementation CategoryViewController

@synthesize delegate;

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
            CategoryViewController *catView = [[CategoryViewController alloc] initWithNibName:@"CategoryViewController" bundle:nil];
            [self.navigationController pushViewController:catView animated:YES];

            if([self.delegate respondsToSelector:@selector(loadProductsList:)]){
                [self.delegate loadProductsList:[arrayCategory objectAtIndex:indexPath.row]];
            }
    } 
```

委托视图被调用`MainViewController`，在viewDidLoad的方法中`MainViewController`，我将委托设置为self：

```
-(void)viewDidLoad{
    //Use a property of CategoryViewController to set the delegate

    self.categoryController.delegate = self;
}

-(void)loadProductsList:(id)sender{
//Logic

} 
```

让我向您解释一下，`CategoryViewController`它是由 a 管理的，`UINavigationController`所以当单击一个单元格时，我会创建一个新实例`CategoryViewController`并将其推送到导航堆栈。然后我调用协议方法：

```
if([self.delegate respondsToSelector:@selector(loadProductsList:)]){
  [self.delegate loadProductsList:[arrayCategory objectAtIndex:indexPath.row]];
    } 
```

`CategoryViewController`问题是，当当前视图为 0 索引时，委托仅对根视图有效。然后委托为空，因此`loadProductsList:`当我尝试从堆栈视图索引 1、2 等调用它时无法触发协​​议方法。当我返回索引 0（导航堆栈中的根视图）时，委托对象再次有效我可以调用协议方法。

**我的问题是：**

为什么我在创建新实例`CategoryViewController`并将其推送到导航堆栈后无法触发协​​议方法？为什么委托对象会为空呢？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:56:43.087

您仅为 CategoryViewController 类中的一个（第一个）设置委托。

每次选择一行时，您都在创建一个新的 CategoryViewController 类，其委托为 nil，因为您尚未设置它。

编辑，

我在这里看到两个选项。

a) 您可以将 MainController 设为单例，因此您可以从代码中的任何位置访问它。然后您就可以在 didSelectRowAtIndexPath 中将其设置为委托。

b) 你可以反复通过委托

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        CategoryViewController *catView = [[CategoryViewController alloc] initWithNibName:@"CategoryViewController" bundle:nil];
        [self.navigationController pushViewController:catView animated:YES];

        catView.delegate = self.delegate;

        if([self.delegate respondsToSelector:@selector(loadProductsList:)]){
            [self.delegate loadProductsList:[arrayCategory objectAtIndex:indexPath.row]];
        }
} 
```

# zend-framework - Zend 将复选框添加到多复选框

> ID：15746403
> 
> 赞同：1
> 
> 时间：2013-04-01T15:33:31.763
> 
> 标签：zend-framework

我正在寻找相当于

```
 $element->addMultiOption('value', 'text'); 
```

这适用于多选下拉菜单。

我似乎无法计算出等价于多个复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:04:53.857

尝试这样的事情：

```
$multichekboxElement = new Zend_Form_Element_MultiCheckbox("name_for_your_multicheckbox");
$multicheckboxElement->addMultiOption(1,'text-1');
$multicheckboxElement->addMultiOption(2,'text-2');
$multicheckboxElement->addMultiOption(3,'text-3');
$multicheckboxElement->addMultiOption(4,'text-4'); 
```

然后，您只需像往常一样将 *"multicheckboxElement" 变量添加到您的表单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:00:41.613

他们之间没有区别

```
 $element->addMultiOption('value', 'text'); 
```

对于 multiCheckbox 元素和 multiselect 元素。错误是在其他地方引起的

# c++ - Firebreath NPAPI 插件如何记录

> ID：15746407
> 
> 赞同：4
> 
> 时间：2013-04-01T15:33:38.767
> 
> 标签：c++, npapi, firebreath, browser-plugin, log4cplus

**如何使用**C++ 中使用 FireBreath 构建的 NPAPI 插件输出日志消息。
该日志应该在开发和测试期间和/或在调试版本中可用。

* * *

**修改**：

FireBreath 的记录方式是使用[Log4cplus](http://www.firebreath.org/display/documentation/Logging)，我已尝试尽可能接近这些说明。
我附加`add_firebreath_library(log4cplus)`到“PluginConfig.cmake”的底部。

[我还不能创建一个可以在 Windows 8 上读取的日志](https://stackoverflow.com/questions/10168202/fblog-trace-no-logging-to-logfile-fblog-info-logging-ok-what-is-the-di)文件。我浏览了其他资源，例如：

到目前为止，我所有的日志记录尝试如下：

```
#include "logging.h"
...
FBLOG_INFO("my function name", "and some text"); 
```

**可选调试级别**：

我不确定是否必须覆盖`getLogLevel()`，因为我对默认级别感到满意，并且如果我确实覆盖它，`INFO`我不确定将它放在*哪里：*

```
FB::Log::LogLevel getLogLevel(){
    return FB::Log::LogLevel_Trace; // Now Trace and above is logged.
} 
```

**日志文件路径**：

我也不确定在 Windows 中写入日志文件的正确路径。我试过了：

```
- outMethods.push_back(std::make_pair(FB::Log::LogMethod_File, "C:/logs/XXXX/yyyy.log"));
- outMethods.push_back(std::make_pair(FB::Log::LogMethod_File, "C:\logs\XXXX\yyyy.log"));
- outMethods.push_back(std::make_pair(FB::Log::LogMethod_File, "/logs/XXXX/yyyy.log"));
etc. 
```

**准备脚本错误**：

在“PluginConfig.cmake”中启用[Log4cplus](http://www.firebreath.org/display/documentation/Logging)`add_firebreath_library(log4cplus)`后，我`prep`在 Windows 上的脚本中出现一些“未找到”错误，但脚本似乎成功完成，并且我的插件构建没有错误，所以我选择到目前为止忽略这些错误。但是，他们在这里：

*注意：部分路径替换为“XXXXX”。*

```
Z:\XXXXX\firebreath>firebreath-dev\prep2010.cmd projects fbbuildwin
A subdirectory or file fbbuildwin already exists.
Using projects in: "Z:\XXXXX\firebreath\projects"
Generating build files in: "Z:\XXXXX\firebreath\fbbuildwin"
NOTE: The build files in "Z:\XXXXX\firebreath\fbbuildwin" should *NEVER* be modified directly.
When needed, make project changes in cmake files and re-run this script.
  Project-specific cmake files are found in [plugin dir]\CMakeLists.txt and
  [plugin dir]\Win\projectDef.cmake.
Note that parameters for cmake should be enclosed in double quotes, e.g. "-DVERBOSE=1"
CMAKE parameters:
Z:\XXXXX\firebreath\fbbuildwin>cmake -G "Visual Studio 10" -DFB_PROJECTS_DIR="Z:\dmanpearl On My Mac\pixelmonks\LaasTech\firebreath\projects"  "Z:\XXXXX\firebreath\firebreath-dev"
-- Balanced size/speed optimization project dir: Z:/XXXXX/firebreath/projects
-- Looking for include file pthread.h
-- Looking for include file pthread.h - not found
-- Found Threads: TRUE
-- Threads:
-- Looking for include file dlfcn.h
-- Looking for include file dlfcn.h - not found
-- Looking for include file errno.h
-- Looking for include file errno.h - found
-- Looking for include file iconv.h
-- Looking for include file iconv.h - not found
-- Looking for include file limits.h
-- Looking for include file limits.h - found
-- Looking for include file sys/types.h
-- Looking for include file sys/types.h - found
-- Looking for include file sys/socket.h
-- Looking for include file sys/socket.h - not found
-- Looking for include file sys/syscall.h
-- Looking for include file sys/syscall.h - not found
-- Looking for include file sys/time.h
-- Looking for include file sys/time.h - not found
-- Looking for include file sys/timeb.h
-- Looking for include file sys/timeb.h - found
-- Looking for include file sys/stat.h
-- Looking for include file sys/stat.h - found
-- Looking for include file sys/file.h
-- Looking for include file sys/file.h - not found
-- Looking for include file syslog.h
-- Looking for include file syslog.h - not found
-- Looking for include file arpa/inet.h
-- Looking for include file arpa/inet.h - not found
-- Looking for include file netinet/in.h
-- Looking for include file netinet/in.h - not found
-- Looking for include file netinet/tcp.h
-- Looking for include file netinet/tcp.h - not found
-- Looking for include file netdb.h
-- Looking for include file netdb.h - not found
-- Looking for include file unistd.h
-- Looking for include file unistd.h - not found
-- Looking for include file fcntl.h
-- Looking for include file fcntl.h - found
-- Looking for include file stdio.h
-- Looking for include file stdio.h - found
-- Looking for include file stdarg.h
-- Looking for include file stdarg.h - found
-- Looking for include file stdlib.h
-- Looking for include file stdlib.h - found
-- Looking for include file time.h
-- Looking for include file time.h - found
-- Looking for include file wchar.h
-- Looking for include file wchar.h - found
-- Looking for include file inttypes.h
-- Looking for include file inttypes.h - not found
-- Looking for include file memory.h
-- Looking for include file memory.h - found
-- Looking for include file stdint.h
-- Looking for include file stdint.h - found
-- Looking for include file strings.h
-- Looking for include file strings.h - not found
-- Looking for include file string.h
-- Looking for include file string.h - found
-- Looking for 5 include files stdlib.h, ..., float.h
-- Looking for 5 include files stdlib.h, ..., float.h - found
-- Looking for gmtime_r
-- Looking for gmtime_r - not found
-- Looking for localtime_r
-- Looking for localtime_r - not found
-- Looking for gettimeofday
-- Looking for gettimeofday - not found
-- Looking for getpid
-- Looking for getpid - found
-- Looking for ftime
-- Looking for ftime - found
-- Looking for stat
-- Looking for stat - found
-- Looking for lstat
-- Looking for lstat - not found
-- Looking for fcntl
-- Looking for fcntl - not found
-- Looking for lockf
-- Looking for lockf - not found
-- Looking for flock
-- Looking for flock - not found
-- Looking for htons
-- Looking for htons - not found
-- Looking for ntohs
-- Looking for ntohs - not found
-- Looking for htonl
-- Looking for htonl - not found
-- Looking for ntohl
-- Looking for ntohl - not found
-- Looking for vsnprintf
-- Looking for vsnprintf - found
-- Looking for _vsnprintf
-- Looking for _vsnprintf - found
-- Looking for vsprintf_s
-- Looking for vsprintf_s - found
-- Looking for vswprintf_s
-- Looking for vswprintf_s - found
-- Looking for vfprintf_s
-- Looking for vfprintf_s - found
-- Looking for vfwprintf_s
-- Looking for vfwprintf_s - found
-- Looking for _vsnprintf_s
-- Looking for _vsnprintf_s - found
-- Looking for _vsnwprintf_s
-- Looking for _vsnwprintf_s - found
-- Looking for mbstowcs
-- Looking for mbstowcs - found
-- Looking for wcstombs
-- Looking for wcstombs - found
-- Looking for ENAMETOOLONG
-- Looking for ENAMETOOLONG - found
-- Looking for SYS_gettid
-- Looking for SYS_gettid - not found
-- Looking for __FUNCTION__
-- Looking for __FUNCTION__ - found
-- Looking for __PRETTY_FUNCTION__
-- Looking for __PRETTY_FUNCTION__ - not found
-- Looking for __func__
-- Looking for __func__ - not found
-- Performing Test LOG4CPLUS_HAVE___SYNC_ADD_AND_FETCH
-- Performing Test LOG4CPLUS_HAVE___SYNC_ADD_AND_FETCH - Failed
-- Performing Test LOG4CPLUS_HAVE___SYNC_SUB_AND_FETCH
-- Performing Test LOG4CPLUS_HAVE___SYNC_SUB_AND_FETCH - Failed
-- Performing Test LOG4CPLUS_HAVE_GNU_VARIADIC_MACROS
-- Performing Test LOG4CPLUS_HAVE_GNU_VARIADIC_MACROS - Failed
-- Performing Test LOG4CPLUS_HAVE_C99_VARIADIC_MACROS
-- Performing Test LOG4CPLUS_HAVE_C99_VARIADIC_MACROS - Success
-- Looking for clock_gettime
-- Looking for clock_gettime - not found
-- Looking for clock_nanosleep
-- Looking for clock_nanosleep - not found
-- Looking for nanosleep
-- Looking for nanosleep - not found
-- Looking for gethostbyname_r
-- Looking for gethostbyname_r - not found
-- Looking for getaddrinfo
-- Looking for getaddrinfo - not found
-- Performing Test HAVE_ATTRIBUTE_VISIBILITY
-- Performing Test HAVE_ATTRIBUTE_VISIBILITY - Failed
-- Performing Test HAVE_DECLSPEC_DLLEXPORT
-- Performing Test HAVE_DECLSPEC_DLLEXPORT - Success
-- Performing Test HAVE_CXX11_THREAD_LOCAL
-- Performing Test HAVE_CXX11_THREAD_LOCAL - Failed
-- Performing Test HAVE_GCC_THREAD_EXTENSION
-- Performing Test HAVE_GCC_THREAD_EXTENSION - Failed
-- Performing Test HAVE_DECLSPEC_THREAD
-- Performing Test HAVE_DECLSPEC_THREAD - Success
-- Performing Test LOG4CPLUS_HAVE_CXX11_ATOMICS
-- Performing Test LOG4CPLUS_HAVE_CXX11_ATOMICS - Failed
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of socklen_t
-- Check size of socklen_t - failed
Adding library log4cplus
Generating plugin configuration files in Z:/XXXXX/firebreath/fbbuildwin/projects/LaasTech/gen
-- Configuring done
-- Generating done
-- Build files have been written to: Z:/XXXXX/firebreath/fbbuildwin 
```

* * *

**我的环境**：

我目前正在 Mac 和 Windows（Mountain Lion 和 Windows 8）上构建我的插件。

我正在以下浏览器中进行测试：

1.  Mac：Safari 和 Chrome。
2.  Windows：IE 10 和 Chrome。

FWIW：我用于开发的 Win 安装在 Mac VMWare Fusion v5.0 Guest 中。

**摘要**：

请帮助我使用可访问的日志文件让 Log4cplus 在我的插件中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T03:37:52.383

看起来您走在正确的轨道上，但您错过了一个非常重要的部分——您不能写入 C:\logs，因为只有管理员才有权限这样做。

至于“未找到”“错误”，那些不是错误......只是状态消息。这是构建 log4cplus 的一部分，它正在查看您的平台支持什么。你可以放心地忽略这些。

如果您查看[提示和技巧](http://www.firebreath.org/x/gwAh)页面，您会发现一些[有用的示例](http://www.firebreath.org/x/gwAh#TipsandTricks-Findingasafeplaceforfile-basedlogging)。

我所指的主要内容来自[我一段时间前创建的一个要点](https://gist.github.com/taxilian/1289031)；您需要 add_boost_library(filesystem) 但您可以使用此代码找到一个有效位置来放置您的日志。该代码当前检测日志路径（将在 %AppData%\LocalLow\CompanyName\logs 中此代码）存在并且仅在存在时才写入日志。它还使用时间戳和进程 ID 来确保插件实例的唯一性。

```
#include <boost/filesystem.hpp>
#include "SystemHelpers.h"
using namespace boost::filesystem;

/// ...

void getLoggingMethods( FB::Log::LogMethodList& outMethods )
{
    path appDataPath = FB::System::getLocalAppDataPath("CompanyName");

    path logDirPath = appDataPath / "logs";
    if (exists(logDirPath) && is_directory(logDirPath)) {
        std::stringstream ss;
        time_t seconds = time(NULL);
        boost::thread::id threadId = boost::this_thread::get_id();
        ss << seconds << "_" << threadId << ".log";

        path logPath = logDirPath / ss.str();

        fprintf(stderr, "logging to %s", logPath.string().c_str());
        outMethods.push_back(std::make_pair(FB::Log::LogMethod_File, logPath.string()));
    }
#ifndef NDEBUG
    outMethods.push_back(std::make_pair(FB::Log::LogMethod_Console, std::string()));
#endif
}

// ... 
```

# python - 是否有能够计算 3D 网格对偶的 python 库？

> ID：15746412
> 
> 赞同：3
> 
> 时间：2013-04-01T15:33:51.317
> 
> 标签：python, graph, mesh, graph-tool

我查看了 python-graph 和 boost 图形库的 python 绑定，但没有发现任何与网格双重化相关的内容（对偶的顶点是原始图的面，并通过对偶中的边连接如果它们在原始图中共享一条边）。在我开始重新发明这个轮子之前，有没有我可能忽略的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T08:46:28.830

可能有，但实现起来很简单。为此，需要找到使用它的三角形的边。有了这些信息，就可以在三角形之间建立联系。

简单的python实现，三角形（或多边形）是顶点索引列表，边是有序的顶点索引对：

```
from collections import defaultdict
from itertools import combinations
triangles = [(1,2,3), (2,3,4), (1,3,5), (3,4,5), (5,6,7), (4,5,6)]
# For each edge set triangles containing that edge
edge2trias = defaultdict(list)  # edge (v1,v2) -> list of triangles
for t_ind, ps in enumerate(triangles):
    for edge in zip(ps, ps[1:]+ps[:1]):
        edge2trias[tuple(sorted(edge))].append(t_ind)
# For each edge, set pair(s) of neighbouring triangles
tria2neigh = defaultdict(list)  # triangle index -> list of neighbouring triangles
for edge, trias in edge2trias.iteritems():
    for t1, t2 in combinations(trias, 2):
        tria2neigh[t1].append(t2)
        tria2neigh[t2].append(t1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T06:33:41.447

并回答自己的问题 -[图形工具的折线图功能](http://projects.skewed.de/graph-tool/doc/generation.html) 计算图形的对偶。

# excel - Excel Sum 和 Group By 就地？

> ID：15746419
> 
> 赞同：0
> 
> 时间：2013-04-01T15:34:13.100
> 
> 标签：excel, sum, excel-2007, vba

基本上我很想使用数据透视表，但它不能正确显示。

说我有

```
 +---------+---+-----+
    |    A    | B |  C  |
  +-+---------+---+-----+
  |1|   Date  |Qty|Title|
  +-+---------+---+-----+
  |2|4/01/2013|10 |Foo  |
  +-+---------+---+-----+
  |3|4/01/2013|20 |Foo  |
  +-+---------+---+-----+
  |4|4/01/2013|5  |Bar  |
  +-+---------+---+-----+
  |5|4/01/2013|5  |Test1|
  +-+---------+---+-----+
  |6|4/01/2013|15 |Test2|
  +-+---------+---+-----+ 
```

我需要实现：

```
 +---------+---+-----+
    |    A    | B |  C  |
  +-+---------+---+-----+
  |1|   Date  |Qty|Title|
  +-+---------+---+-----+
  |2|4/01/2013|30 |Foo  |
  +-+---------+---+-----+
  |3|4/01/2013|5  |Bar  |
  +-+---------+---+-----+
  |4|4/01/2013|5  |Test1|
  +-+---------+---+-----+
  |5|4/01/2013|15 |Test2|
  +-+---------+---+-----+ 
```

数据透视表的问题是我似乎无法解决它想要看起来像这样的事实：

```
 +---------+---+-----+
    |    A    | B |  C  |
  +-+---------+---+-----+
  |1|   Date  |Qty|Title|
  +-+---------+---+-----+
  |2|4/01/2013|30 |Foo  |
  +-+---------+---+-----+
  |3|         |5  |Bar  |
  +-+---------+---+-----+
  |4|         |   |Test1|
  +-+---------+---+-----+
  |5|         |15 |Test2|
  +-+---------+---+-----+ 
```

而且因为这是被导入到脚本中，我无法控制，由于各种原因使用每一行，我需要所有行都包含所有信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:44:56.827

Pivot设置中应该有一个选项`Repeat Item labels`

从 Excel 2010 （我没有 2007，不能确定它也在那里）

![在此处输入图像描述](https://i.stack.imgur.com/I1JnR.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:53:53.003

我想出了这个

```
 Sub Sum_And_Group()

    For Each Title In Range("C2:C20")
        If Title <> 0 Then
            Do While Title.Offset(1, 0) = Title
                Title.Offset(0, -1) = Title.Offset(0, -1) + Title.Offset(1, -1)
                Title.Offset(1, 0).EntireRow.Delete
            Loop
        End If
    Next

    End Sub 
```

它有效，但似乎不安全和肮脏。有人有更好的吗？

# java - 在 NoInitialContextException 发生之前检查 InitialContext 是否存在

> ID：15746423
> 
> 赞同：0
> 
> 时间：2013-04-01T15:34:20.063
> 
> 标签：java, hibernate, servlets

我是`javax.naming.NoInitialContextException`从 Hibernate 的`SessionFactory.buildSessionFactory()`方法中得到的。这是因为我试图在容器之外运行一个测试用例。
我有代码可以引用在`applicationContext.xml`. 问题是我不知道在哪里实现本地数据源代码。
我不能把它放在里面，`catch(NoInitialContextException)`因为 SessionFactory 类在代码中很深，并且根据应用程序设计，抛出所有异常而不是捕获它们。 无论如何在点击该方法之前
找出是否存在？`InitialContext``buildSessionFactory`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:03:51.380

也许您可以在 上执行查找`InitialContext`以检查是否有`SessionFactory`，如下所述：http: [//docs.jboss.org/jbossas/getting_started/v4/html/hibernate.html](http://docs.jboss.org/jbossas/getting_started/v4/html/hibernate.html)

```
try {
    InitialContext ctx = new InitialContext();
    ctx.lookup("java:/hibernate/SessionFactory");
catch (NamingException e) {
    //here you can assume that buildSessionFactory won't work
    ...
} 
```

# linux - 创建按状态排序的进程列表

> ID：15746428
> 
> 赞同：0
> 
> 时间：2013-04-01T15:34:28.680
> 
> 标签：linux, bash, ps

我需要创建一个 shell 脚本来按状态类型列出进程。输出必须类似于：

进程运行：

[过程]

进程休眠：

[过程]

ETC

*我这样做了，但是ps aux |*不起作用 *awk '$8 ~ PROCESS'*：

```
for PROCESS in `ps -v | awk 'NR!=1 {print $2}' | sort -u`; do
   echo "Procesos como $PROCESS:"
   ps aux | awk '$8 ~ PROCESS'
done 
```

导致该脚本输出所有进程，而不是按进程过滤。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:39:34.247

一个简单的解决方案是使用`ps`and `sort`：

```
ps u | sort -rk 8 
```

`-r`反转排序（使列表标题保持在上方），并`-k 8`选择第 8 个字段 ( `STAT`)。

`head`然后，您可以使用任何形式选择处于特定状态的进程`awk`，并打印出您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:41:30.597

您还可以在非交互模式下使用 top（ -S 选项按状态显示和排序）：

```
top -b -n 1 -S 
```

# objective-c - 我的唯一代码的线程安全性如何？

> ID：15746431
> 
> 赞同：5
> 
> 时间：2013-04-01T15:34:41.060
> 
> 标签：objective-c, macos, cocoa, thread-safety

我有一个小的值类，我创建了很多实例。通常具有相同的值。此类用作一种标识符，因此主要用途是将此类的实例相互比较（通过`isEqual:`）。

为了节省一些内存和比较时间，我只在 a 中保留唯一实例`NSHashTable`并使用指针比较而不是`isEqual:`.

所以我指定的初始化程序如下所示：

```
- initWithStuff: (NSString *)stuff;
{
    self = [super init];
    if (!self) return nil;

    // ... (actual initialisation code omitted)

   hash = UniquingHashTable();

   static OSSpinLock spinlock = OS_SPINLOCK_INIT;
   OSSpinLockLock( &spinlock );

   id member = [hash member: self];
   if (member) self = member;
   else [hash addObject: self];

   OSSpinLockUnlock( &spinlock );

   return self;
} 
```

`UniquingHashTable()`如果它尚不存在，则返回全局`NSHashTable`或通过创建它。`[NSHashTable weakObjectsHashTable]`这`weakObjectsHashTable`是重要的一点 - 它存储指向对象的弱指针，一旦没有对该对象的其他强引用，这些对象就会自动被删除。初始化是线程安全的，这要归功于`dispatch_once`.

这很好用，峰值内存使用率显着降低，我所有的测试用例仍然通过。但我不太确定是否可以依靠指针比较来测试是否相等。*是否存在我同时获得两个不同实例的情况或竞争条件（因此指针不同）但它们仍然比较相等`isEqual:`？*

### 澄清我有/想要什么：

给定

```
MyClass *a = [[MyClass alloc] initWithStuff: stringA];
MyClass *b = [[MyClass alloc] initWithStuff: stringB]; 
```

我们总是有

```
[a isEqual: b] == [stringA isEqual: stringB]; 
```

新代码不会改变这一点。

我想要实现的是

```
[a isEqual: b] == (a == b) 
```

这样我就可以用`isEqual:`更快的指针比较替换 。（是的，我测量了这个，这将很重要）。

对于单线程代码，或者如果我使用的是 a`NSMutableSet`而不是弱的，`NSHashTable`这总是可行的。我只是不确定是否有任何竞争条件，以便我可以有这样的情况

```
[a isEqual: b] && (a != b) 
```

是真的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:00:23.890

该代码应该没问题，但我建议进行一些可能的更改。这些基于假设/观察，可能适用也可能不适用。

如果可能，将唯一的代码移动到类 [factory] ​​方法中，并且在 的值上是唯一的`stuff`。这可能是伪代码，但它似乎`stuff`是初始化状态的唯一来源。无论如何，这样做会在冲突 [缓存] 情况下保存通过`alloc`/ 。`dealloc`

假设没有其他用途`UniquingHashTable()`，将that =初始化程序的`static`声明移动到您的（或工厂）方法中。它使代码更清晰且不那么脆弱（因为没有什么可以在外部与哈希表混为一谈）。`dispatch_once()``initWithStuff:`

在缓存查找代码中使用串行 GCD 队列进行序列化；队列真的很便宜，而且通常不必越过用户->内核障碍来排队和执行一个块。

哈希表将使用`hash`和的组合`isEqual:`来准确确定对象相等性（实际上是一个实现细节......因为弱哈希表使用对象个性，`isEqual:`将用作确定相等性的最终决定）。因此，哈希冲突应该不是问题。如果要确保具有*不同*地址的两个对象不相等，请`isEqual:`相应地实现（其中两个相等的对象*必须*具有相同的哈希，两个不相等的对象*可能*具有相同的哈希值）。

* * *

通常首先测试指针相等性的实现，`isEqual:`并且只有在失败时，它才会进入测试内部状态所需的兔子洞以确保相等。

如果你有一个 custom `isEqual:`，它也应该这样做。

在冲突情况下，您的代码（如最初实现的那样）已经产生了 a `malloc`and `free`（via `+alloc`and ）的开销。`-dealloc`与几次调用相比，这将是一个看似巨大的开销`isEqual:`（假设您的哈希表不是非常重的碰撞）。

您如何测量`isEqual:`与指针比较的开销？

# python - 为什么修改数组的副本会影响原始？

> ID：15746434
> 
> 赞同：4
> 
> 时间：2013-04-01T15:34:46.280
> 
> 标签：python, list

大家好，如果这是一个菜鸟问题，我很抱歉，但我使用的是 python，我有一个问题，我复制了一个数组，但是当我修改副本时，它会影响原始文件。我想将边界矩阵的线性偏移添加到一组坐标：

```
boundaries = [[5.818, 0.0, 0.0], [0.0, 5.818, 0.0], [0.0, 0.0, 5.818]]

xyzCoord = [[0.0, 0.0, 0.0], [2.909, 2.909, 0.0], ...

extraX=[]
for i in range(0,len(xyzCoord)):
    toAdd=[]
    toAdd=xyzCoord[i]
    toAdd[0]=toAdd[0]+boundaries[0][0]

print xyzCoord 
```

我期望的输出是 xyzCoord 不应该受到影响，因为我制作了一个副本（toAdd）然后修改它。奇怪的是，这个循环确实影响了我的 xyzCoord：

输出是：

```
[[5.818, 0.0, 0.0], [0.0, 5.818, 0.0], [0.0, 0.0, 5.818]]

[[0.0, 0.0, 0.0], [2.909, 2.909, 0.0], ...

[[5.818, 0.0, 0.0], [8.727, 2.909, 0.0], ... 
```

* * *

编辑：就上下文而言，我的想法是我最终想用转置的值制作一个单独的列表，然后最终创建一个插入列表，但这部分阻碍了我。即我理想地想创建： [[0.0, 0.0, 0.0], [5.818, 0.0, 0.0], [2.909, 0.0, 0.0], [8.727, 2.909, 0.0]...] 然后做一个更大的循环对于 Y 和 Z。这样我可以在 XY 和 Z 中传播一些坐标以及任意次数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T15:42:19.200

这是关于 Python 最令人惊讶的事情之一 -`=`运算符从不复制任何东西！它只是将新名称附加到现有对象。

如果要制作列表的副本，可以使用列表的切片；切片操作员*确实*制作了一份副本。

```
toAdd=xyzCoord[i][:] 
```

您还可以使用`copy`或`deepcopy`从[`copy`模块](http://docs.python.org/2/library/copy.html)中复制一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:36:28.640

`toAdd`不是重复的。以下使`toAdd`引用相同的子列表`xyzCoord[i]`：

```
toAdd = xyzCoord[i] 
```

当您更改 的元素时`toAdd`， 的相应元素`xyzCoord[i]`也会更改。

代替上面的，写：

```
toAdd = xyzCoord[i][:] 
```

这将制作一个（浅）副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:38:22.763

因为您使用数组数组（列表列表），所以内部列表是一个对象，所以您只复制内部对象的引用而不是复制值。

# java - 增加睡眠/等待时间直到需要

> ID：15746442
> 
> 赞同：0
> 
> 时间：2013-04-01T15:35:43.543
> 
> 标签：java, multithreading, events, wait, synchronized

我在多线程方面不是很好，这可能是一个基本问题。但我一直无法找到答案。

**场景：** 假设我有一个被某些东西触发的事件监听器。每次触发事件时，我都想启动一个大约需要 3 秒才能执行的新线程。

**问题：** 问题是事件可以在一秒钟内多次触发，我不想一次启动多个线程。

**要求：** 我如何安排一个线程让我们说在事件发生后 1000 毫秒。如果事件继续触发，我想继续延迟线程的预定时间。这样我的线程在最后一次触发事件的 1000 毫秒后执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:38:38.793

事件侦听器在启动时创建并启动一个新的私有线程。该线程包含要执行的任务列表，并按顺序一次执行一个任务。每次偶数侦听器接收到一个新事件时，它都会创建一个新任务，并将其添加到私有线程中的任务列表中。

编辑：Eugene 建议使用线程池，如果您有大量工作要做，每项任务占用大量时间，这对您来说可能是有益的。看看 Java API 中的线程池，如下所示：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:02:48.197

我会使用`ScheduledExecutorService`- 安排任务在一秒钟内发生，如果已经安排了一项任务，请取消它并安排一个新的任务在一秒钟内发生

这样，您的任务将在最后一次触发事件后一秒钟执行。

```
private class Task implements Runnable {

    @Override
    public void run() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
}
private final ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();
private Future<?> scheduledTaskHandle;

private class Listener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        if (scheduledTaskHandle != null && !scheduledTaskHandle.isDone()) {
            scheduledTaskHandle.cancel(false);
        }
        scheduledTaskHandle = executorService.schedule(new Task(), 1, TimeUnit.SECONDS);
    }
} 
```

这`Task`是一个`Runnable`可以进行长时间运行的操作。这`Listener`是你的听众课。

在该`Listener.actionPerformed`方法中，我们首先使用 来检查一个任务是否已经被调度`Future`，如果是我们就取消它。我们不需要担心竞争风险，如果任务在调用`isDone`和调用之间完成，`cancel`那么什么都不会发生。

如果任务在`Listener`触发时正在运行，则该任务将完成，因为该`cancel`方法是用 调用的`false`。另一个任务将被安排在侦听器触发后一秒或当前正在运行的任务完成后运行（因为我们只使用一个线程，不能运行多个任务）。

然后`Listener`将安排任务的新执行在一秒钟内发生。

# api - 转换规格

> ID：15746445
> 
> 赞同：0
> 
> 时间：2013-04-01T15:35:44.263
> 
> 标签：api, facebook-graph-api, facebook-like, facebook-javascript-sdk

如果要使用，您在转换规范中为 URL 对象 ID 输入什么：{'action.type':'link_click', 'post.object':'URL_OBJECT_ID'}

在示例中它说： [{"action.type":"like", "page":[133445987]}]

但我不知道他们从哪里得到一页又一页的数字，或者如果我将人们引导到我的网站，我会输入什么。我想跟踪人们何时点击链接并访问该网站。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:32:12.243

我认为您将 pageID 放在该字段中-据说我正在尝试使用以下代码做类似的事情：

[{"action.type":["link_click"],"post":[xxxx1419],"post.wall":[xxxxx0152]}] 广告有效，但它不经常显示（即我设置每日预算为 10 美元，但每天只花费 1-2 美元。

# php - 如何使用 Joomla 作为服务器配置跨域资源共享 (CORS)？

> ID：15746447
> 
> 赞同：1
> 
> 时间：2013-04-01T15:35:57.010
> 
> 标签：php, javascript, joomla, angularjs, cors

我正在编写一个嵌入在[Joomla](http://www.joomla.org)上运行的网站中的网络应用程序。在客户端，我使用的是 AngularJS。Angular 的`$resource`对象遵循跨域资源共享的模式——即它创建了一个`OPTIONS`在发出任何请求之前先发出`GET`请求。

在 Joomla 中，我有一个`task`控制器接收客户端的请求，在 Joomla 中执行一些身份验证逻辑，然后用数据进行响应。如果我提出一个简单的`GET`请求，它会做出适当的响应。但是，我不知道如何让 Joomla 在收到`OPTIONS`请求时给出适当的“OK”响应。

**是否有特定于 Joomla 的方法来实现这一点？**如果没有，如何`OPTIONS`使用纯 PHP 来应对？我的搜索是空白。

（如果有什么不同，这最终将是一个同源请求。在我们的开发过程中它只是跨域的。但是，我相信 Angular`OPTIONS`无论如何都会发出请求。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T22:04:13.453

这是如何使 CORS 工作的示例：

假设您在此页面 origin.com/test.php 上，并且此页面上的 JavaScript 向 target.com 发出请求。

要发起跨域请求，浏览器会发送带有 Origin HTTP 标头的请求。此标头的值是为该页面提供服务的域 (origin.com)。所以在这种情况下，它将是：

来源： http: [//origin.com](http://origin.com)

如果 target.com 支持 CORS，则需要在响应中使用 Access-Control-Allow-Origin HTTP 标头进行回复。标头的值指示允许哪些源站点。

访问控制允许来源： http: [//origin.com](http://origin.com)

为了允许来自所有域的访问，target.com 需要发送 HTTP 标头：

访问控制允许来源：*

欲了解更多信息：[http ://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

# javascript - 通过javascript为jsf中commandlink标签的target属性设置条件

> ID：15746448
> 
> 赞同：0
> 
> 时间：2013-04-01T15:36:14.187
> 
> 标签：javascript, jsf

我想通过javascript为jsf中commandlink的target属性设置条件。

只有当条件为真时，只有目标属性才会起作用，否则不会。

或者我们可以通过 javascript 传递 commandlink 的 target 属性的值。

这是我的代码：

```
<script language=javascript >
function open_win()
{

var selecttype = document.getElementById("frmList:Export").value;
var datetype1 = document.getElementById("frmList:fld_Date").value;

   if (selecttype == "PDF" && datetype1 != false)
return target = "_blank";
else 
return target = "_self"  
  }
 </script>

 <h:commandLink  target = "" onclick = "open_win()" style="border: none;"     
    actionListener="#{report.yes}">
    <h:graphicImage   
    style="border: none;" value="#{User.imageBasePath}/btn_yes.gif" />
  </h:commandLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:57:50.803

JSF 将 commandLink 呈现为 HTML`<a>`标记，可以在 Javascript 中进行修改。是的，您可以通过以下方式在 Javascript 中传递目标属性，

```
document.getElementById("frmList:reportLink").target = "_blank"; 
```

和

```
 <h:commandLink id="reportLink" onclick = "open_win()" style="border: none;" 
                    actionListener="#{report.yes}"> 
```

更好的方法是在你的 commandLink 中添加这个逻辑，

```
<h:commandLink  target = "#{(export=='PDF' and fld_Date)?'_blank':'_self'}"
                style="border: none;" actionListener="#{report.yes}">
    <h:graphicImage style="border: none;" 
                value="#{User.imageBasePath}/btn_yes.gif" />
  </h:commandLink> 
```

# php - 我需要我所有的 html 表行来汇总到数据库

> ID：15746449
> 
> 赞同：0
> 
> 时间：2013-04-01T15:36:16.233
> 
> 标签：php, sql

当我提交时，我想提交所有行。目前只有一行正在提交。这就是我发布到数据库的方式：

```
<?php
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "pro_forms_in_form")) {
  $insertSQL = sprintf("INSERT INTO ho_add_stock_proforma (supplier, inv_no, `day`, `month`, `year`, product_name, descrpt, qty, cost, hawker, wholesale, retail, total) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)",
  GetSQLValueString($_POST['supplier'], "text"),
  GetSQLValueString($_POST['inv_no'], "int"),
  GetSQLValueString($_POST['day'], "int"),
  GetSQLValueString($_POST['month'], "int"),
  GetSQLValueString($_POST['year'], "int"),
  GetSQLValueString($_POST['product_name'], "text"),
  GetSQLValueString($_POST['descrpt'], "text"),
  GetSQLValueString($_POST['qty'], "text"),
  GetSQLValueString($_POST['cost'], "text"),
  GetSQLValueString($_POST['hawker'], "text"),
  GetSQLValueString($_POST['wholesale'], "text"),
  GetSQLValueString($_POST['retail'], "text"),
  GetSQLValueString($_POST['total'], "text"));
  mysql_select_db($database_universal, $universal);
  $Result1 = mysql_query($insertSQL, $universal) or die(mysql_error());
}

mysql_select_db($database_universal, $universal);
$query_Creditors = "SELECT company_name FROM ho_add_creditors";
$Creditors = mysql_query($query_Creditors, $universal) or die(mysql_error());
$row_Creditors = mysql_fetch_assoc($Creditors);
$totalRows_Creditors = mysql_num_rows($Creditors);

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<!-- and this part help with adding more table rows -->

<script type="text/javascript">
function addRow(ho_add_stock_proforma) {            
  var table = document.getElementById(ho_add_stock_proforma);            
  var rowCount = table.rows.length;           
  var row = table.insertRow(rowCount);            
  var colCount = table.rows[0].cells.length;            
  for(var i=0; i<colCount; i++) {                 
    var newcell = row.insertCell(i);                 
    newcell.innerHTML = table.rows[0].cells[i].innerHTML;                
    //alert(newcell.childNodes);                
    switch(newcell.childNodes[0].type) {                    
      case "text":                            
        newcell.childNodes[0].value = "";                           
        break;                    
      case "checkbox":                            
        newcell.childNodes[0].checked = false;                           
        break;                   
      case "select-one":                            
        newcell.childNodes[0].selectedIndex = 0;                           
        break;               
    }           
  }       
}        
function deleteRow(ho_add_stock_proforma) {           
  try {            
    var table = document.getElementById(ho_add_stock_proforma);           
    var rowCount = table.rows.length;             
    for(var i=0; i<rowCount; i++) {               
      var row = table.rows[i];               
      var chkbox = row.cells[0].childNodes[0];               
      if(null != chkbox && true == chkbox.checked) {                   
        if(rowCount <= 1) {                       
          alert("Cannot delete all the rows.");                       
          break;                   
        }                    
        table.deleteRow(i);                    
        rowCount--;                   
        i--;               
      }              
    }            
  }catch(e) 
  {               
    alert(e);           
  } 
  getValues();
}        

</script>
</head>
<body>

  <div id="wrap">
  <form action="<?php echo $editFormAction; ?>" method="POST" name="pro_forms_in_form">

    <!-- and this is my html table -->

    <table width="666" border="0" cellpadding="2" cellspacing="2" class="table" id="ho_add_stock_proforma" name="ho_add_stock_proforma">
    <tr>
      <td><input type="checkbox" name="chk" style="width:40px" /></td>

      <td width="122" scope="col">Product Name<input name="product_name" type="text" class="table_fields" id="product_name" /></td>
      <td width="122" scope="col">Description<input name="descrpt" type="text" class="table_fields" id="description" /></td>
      <td width="62" scope="col">Qty<input name="qty" type="text" class="qty" id="qty" onkeyup="getValues()" /></td>
      <td width="62" scope="col">Cost per Piece<input name="cost" type="text" class="price" id="cost" onkeyup="getValues()"/></td>
      <td width="62" scope="col">hawker<input name="hawker" type="text" class="price" id="hawker" /></td>
      <td width="62" scope="col">Wholesale<input name="wholesale" type="text" class="price" id="wholesale" /></td>
      <td width="62" scope="col">Retail<input name="retail" type="text" class="price" id="retail" /></td>
      <td width="349" scope="col">Total<input name="total" type="text" class="price" id="total" onKeyUp="getValues()" /></td>
      <td width="5">  <input name="button" type="button" value="Add" onclick="addRow('ho_add_stock_proforma')" style="width:40px"/></td>
      <td><input name="button"   type="button" value="Delete" onclick="deleteRow('ho_add_stock_proforma')" style="width:40px"/></td>
    </tr>
  </table>

  <input name="submit" type="submit" class="button_submit" value="Submit Form" id="submit" />

  <input type="hidden" name="MM_insert" value="pro_forms_in_form" />
  </form>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:47:33.373

您正在通过 Javascript 向 HTML 表添加行，然后使用 PHP 添加/更新数据库中的行，对吗？

新的 HTML 表行仅存在于浏览器中（您通过 Javascript 在客户端创建它们）：在服务器上运行的 PHP 不知道它们存在，因此它无法在数据库中插入/更新它们。

您将需要在服务器端生成 HTML 表的新行并重新加载浏览器页面，否则如果您在客户端生成新行，则需要在每个 POST 中手动包含新行。

# javascript - window.onload 函数在 Mozilla Firefox 上不起作用

> ID：15746450
> 
> 赞同：14
> 
> 时间：2013-04-01T15:36:18.530
> 
> 标签：javascript, jquery, firefox, onload, mozilla

我正在为网页使用加载屏幕，并使用 window.onload 函数。

除了在 Mozilla Firefox 浏览器中，一切都很好。当我们第一次使用 ctrl+F5 组合访问或刷新页面时，加载屏幕永远不会消失。如果我们只用 F5 刷新页面，那么它可以工作。

我使用下面的代码

```
$(window).load(function(e) {
    $("#body-mask").fadeOut(1000,function(){
        $(this).remove();
    });
}); 
```

我也尝试了下面的代码，但没有任何改变。

```
window.onload = function () {
   $("#body-mask").fadeOut(1000,function(){
       $(this).remove();
   });
} 
```

为什么会这样？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T21:31:15.587

该问题是由另一个 jquery 后台插件引起的，该插件位于 $(document).ready() 中

我将它移到 $(window).load() 函数中，现在它可以完美运行了。

我还移动了另一个函数来调整页面加载时的图像大小。当它在 $(document).ready() 块内时，如果加载时间太长，有时它会出现故障，但现在它也很好用。

```
function resizeImages(){
    //Some Code
}

$(window).load(function(){
    $("#body-mask").fadeOut(1000,function(){
        $(this).remove();
    });

    $.vegas({
        src: backURL , fade:0
    });

    resizeImages();
});

$(document).ready(function(){
    //Some Other code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-04T11:50:20.230

在脚本标签中输入错误的类型属性时，我遇到了同样的问题：

```
<script type="text/javascript"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:41:29.033

试试这个：

```
$(document).ready(function(e) {
    $("#body-mask").fadeOut(1000,function(){
        $(this).remove();
    });
}); 
```

阅读`load`并了解`ready` `functions difference` [$(window).load 和 $(document).ready 之间的区别是什么？](https://stackoverflow.com/questions/5182016/what-is-the-difference-between-window-load-and-document-ready)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T15:41:04.483

您必须在初始化时调用函数，例如：

```
window.onload = init(); 
```

换句话说，将您的代码修改为：

```
window.onload = function () {
$("#body-mask").fadeOut(1000,function(){
    $(this).remove();
});
}();// Added 
```

将以下代码复制到文件中，然后用firefox打开它

```
<script>
window.onload = function () {
alert('saeed')
}();
</script> 
```

# c++ - 在 C++ 中实现 Matlab Interp2d

> ID：15746451
> 
> 赞同：-2
> 
> 时间：2013-04-01T15:36:23.080
> 
> 标签：c++, matlab, interpolation

任何人都知道如何使用 C++ 在 matlab 中实现函数 interp2d 吗？或者我们可以将matlab函数链接到c++中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:29:32.597

OpenCV ( [http://www.opencv.org](http://www.opencv.org) ) 是一个重量级的依赖项，但如果您打算在 c++ 中进行图像处理，它可能是您想要的工具。 `remap()`是提供 MATLAB 功能的 OpenCV 函数`interp2d`。

或者，如果您对双线性插值感到满意，并且不关心性能，请自己编写。简单的实现很容易编写。另一方面，让它跑得更快是非常困难的，所以如果你关心性能，请使用 OpenCV。

# linux - 使用 qt 最小化应用程序

> ID：15746453
> 
> 赞同：0
> 
> 时间：2013-04-01T15:36:32.930
> 
> 标签：linux, qt, minimize

我（在 Linux 下的 Qt5 中）创建了一个小型 QMainWindow 应用程序。

我注意到当我点击最小化按钮时，我再也看不到我的应用程序了。换句话说，我在酒吧里看不到它！？

我尝试过使用 doky、cairo-dock 和本地 Mint 酒吧，但……没有任何效果！）

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:15:11.607

这是在 Qt Creator 的调试模式下运行它吗？也许您必须部署它并在 Qt Creator 之外运行它才能在停靠/任务栏上获得自己的按钮。

如果没有，您可能有一个应该报告给 qt 的错误。

# php - 回显逗号分隔列表的 PHP 表单

> ID：15746454
> 
> 赞同：-5
> 
> 时间：2013-04-01T15:36:34.143
> 
> 标签：php, forms, comma

我试图有一个用户可以选择具有特定值的多个复选框的表单。然后，服务器端将接受用户输入并用逗号分隔列表回显一个句子。

```
<input type="checkbox" name="apples" value="apples"/> 
<input type="checkbox" name="oranges" value="oranges"/>
<input type="checkbox" name="bananas" value="bananas"/>
<input type="checkbox" name="pears" value="pears"/> 
```

输出将是“我喜欢吃苹果”。或“我喜欢吃苹果和香蕉。” 或“我喜欢吃苹果、香蕉和梨。” 或者如果没有选中任何框，则什么都没有。

```
<?php $apples = (isset($_POST['apples']) ? $_POST['apples'] : ''); ?>
<?php $oranges = (isset($_POST['oranges']) ? $_POST['oranges'] : ''); ?>
<?php $bananas = (isset($_POST['bananas']) ? $_POST['bananas'] : ''); ?>
<?php $pears = (isset($_POST['pears']) ? $_POST['pears'] : ''); ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:47:00.900

我会为复选框使用相同的名称（作为数组）：

```
<input type="checkbox" name="fruit[]" value="apples"/> 
<input type="checkbox" name="fruit[]" value="oranges"/>
<input type="checkbox" name="fruit[]" value="bananas"/>
<input type="checkbox" name="fruit[]" value="pears"/> 
```

然后使用以下内容：

```
$fruit = $_POST['fruit'];

if (!isset($fruit[2]))
{
  echo implode(' and ', $fruit);
}

else
{

  array_push($fruit, 'and ' . array_pop($fruit));

  echo implode(', ', $fruit);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:55:42.460

怎么样：

```
<?php
$fruit = array();
if(isset($_POST['apples']) $fruit[] = 'apples';
if(isset($_POST['oranges']) $fruit[] = 'oranges';
if(isset($_POST['bananas']) $fruit[] = 'bananas';
if(isset($_POST['pears']) $fruit[] = 'pears';
if( count( $fruit ) <= 0 ) {
} else if( count( $fruit ) == 1 ) {
    echo "I like to eat " . $fruit[0] . ".\n";
} else {
    $lastFruit = array_pop( $fruit );
    echo "I like to eat " . implode( ",", $fruit ) . " and $lastFruit.\n";
}
?> 
```

# hadoop - 从 Hadoop 复制到本地机器

> ID：15746458
> 
> 赞同：-1
> 
> 时间：2013-04-01T15:36:46.857
> 
> 标签：hadoop, avro

我可以 ssh 到我们的盒子，`hadoop fs -ls /theFolder` 然后浏览文件等。但这也是我所知道的 :) 我的目标是将其中一个文件（它们是 Avro）复制到我的本地主文件夹中。

怎么能做到这一点？我还发现了一个`get`命令，但也不知道如何起诉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:13:13.427

首先，使用`hadoop fs -get /theFolder`将它复制到您在盒子上通过 ssh 进入的当前目录。

然后你可以使用`scp`或我的偏好`rsync`在你的盒子和你的本地系统之间复制文件，就像这样。这是我在使用,`rsync`后`-get`仍然在同一目录中的使用方式：

`rsync -av ./theFolder username@yourlocalmachine:/home/username`

这将从`theFolder`您盒子上的本地 fs 复制到您机器 fs 上的主文件夹中。确保`username`在这两种情况下都替换为您的实际用户名，以及`yourlocalmachine`您机器的主机名或 IP 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:09:59.377

使用 hadoop `get`，您可以将文件从 HDFS 复制到您机器的文件系统。`get` [在此处](http://hadoop.apache.org/docs/r0.18.1/hdfs_shell.html#get)阅读有关使用的更多信息。

然后，使用`scp`（这类似于使用 ssh）您可以将这些文件复制到本地系统。`scp` [在此处](http://infohost.nmt.edu/tcc/help/xfer/scp.html)阅读有关使用的更多信息。

# google-chrome-extension - 窗口标题不会出现在 chrome 打包应用程序中（Windows 7）

> ID：15746461
> 
> 赞同：9
> 
> 时间：2013-04-01T15:36:56.670
> 
> 标签：google-chrome-extension, google-chrome-app

我正在创建一个 chrome 窗口，其中`CreateWindowOptions`参数中的 'frame' 选项设置为 'chrome'。

使用 Linux 时，窗口标题会出现在框架中，但是在 Windows 上使用打包应用程序时，标题不会出现。这可以在随附的屏幕截图中看到。

![Linux 截图](https://i.stack.imgur.com/ipB6B.png) ![窗口截图](https://i.stack.imgur.com/rO6g9.png)

**更新**

从这个 Chromium Bug 可以看出，这方面已经取得了一些进展

[https://code.google.com/p/chromium/issues/detail?id=225916](https://code.google.com/p/chromium/issues/detail?id=225916)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:35:33.187

我们目前不在 Window 的标题栏中显示标题。我们正在考虑是否改变这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:09:29.380

这是预期的行为。如果要显示标题，则应使用自定义框架（`{frame: 'none'}`在窗口创建选项中）。

# bash - 如何使用 bash 只清空驱动器的一部分？

> ID：15746463
> 
> 赞同：0
> 
> 时间：2013-04-01T15:36:59.590
> 
> 标签：bash, terminal

我的公司不得不将大量硬盘从一种程序更改为另一种程序。我们编写了一个脚本，将整个驱动器清空，然后将程序+操作系统写入驱动器。（不要问为什么要这样，只要知道它就是这样。）我的问题是有些驱动器很小，只有60-80GB，但有些是150+，这需要相当大的多少时间。

这些驱动器上的程序大小不一，我只想指定需要在终端内消隐的驱动器部分。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:59:04.520

根据您的评论，听起来您只想以空白驱动器结束，但某些驱动器一开始大部分都是空白的，因此您只想将写入的部分归零。问题是，除非您检查，否则您无法保证写入哪些部分，如果您正在检查，您也可以在这样做时覆盖。无论如何，`dd`如果您设置足够大的块大小，则速度很快：

```
`dd if=/dev/zero of=/dev/hda bs=100M` 
```

您可以尝试调整`bs`，直到它适合您正在寻找的性能：

[http://en.wikipedia.org/wiki/Dd_(Unix)#Block_size](http://en.wikipedia.org/wiki/Dd_(Unix)#Block_size)

**- - 编辑 - -**

同一个 wiki 页面指出：

> 该`bs=4k`选项使 dd 一次读取和写入 4 KB。这使得在任何相对现代的系统上整个过程都更快。

# c - 创建 int 函数，该函数在发生错误时无法返回有效的 int 值

> ID：15746464
> 
> 赞同：1
> 
> 时间：2013-04-01T15:37:00.373
> 
> 标签：c, function, error-handling, struct, return-value

我正在尝试创建一个函数将返回位于结构中的值。我的问题是试图弄清楚我可以通过函数返回什么`theInfo = NULL`？

以下是我到目前为止创建的内容。这可能吗？

```
int getTime(struct * theInfo){  
  if(theInfo != NULL){
      return theInfo->waitTime;
  }
  else{
    printf("getTime Patron is nonexistent\n");
    return(thePatron);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:40:45.080

您需要返回两条信息 - 号码，以及该号码是否有效的指示。一种方法是更改​​函数的签名以指示它是否返回任何内容，如果返回，则将该值粘贴到变量中。这是一个如何做到这一点的例子：

```
// This function returns 1 or 0.
// 1 indicates success; 0 indicates failure
// If your compiler is up to C99 standard, use "bool" instead of "int" below
int getTime(struct * theInfo, int *result) {
    if(theInfo != NULL){
        *result = theInfo->waitTime;
        return 1;
    } else{
        // result stays unchanged
        return 0;
    }
} 
```

现在您可以像这样使用这个新功能：

```
int res;
if (getTime(&myInfo, &res)) {
    printf("getTime returned %d\n", res);
} else {
    printf("getTime Patron is nonexistent\n");
} 
```

当您不需要返回完整的数字范围时，可以使用不太通用的替代方法。例如，如果您的函数返回的有效时间始终为正数，您可以采用使用负数来指示存在错误的约定。这种方法也是有效的，但它更多地依赖于约定，因此您的代码的读者需要查看您的函数文档以了解发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:41:27.913

您可以传递一个指针并返回一个指示成功的布尔值：

```
bool getTime(MyStruct* info, int* time) {  
    if (info) {
        *time = info->waitTime;
        return true;
    }
    *time = 0;
    return false;
} 
```

然后在某个地方你会打电话：

```
int time;
if (!getTime(info, &time)) {
    // TODO: retrieval of time failed
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T15:43:04.760

刚回来`-1`。我确信等待时间总是积极的。

所以返回 -1 如果它是 NULL 然后检查`-1`

```
else{
    printf("getTime Patron is nonexistent\n");
    return -1;
  }

void someFunc() {
//...
   int wtime = getTime(astruct);
   if (wtime == -1)
       // error

//...
} 
```

# c++ - 使用 cppUnit 的开源项目？

> ID：15746466
> 
> 赞同：2
> 
> 时间：2013-04-01T15:37:13.267
> 
> 标签：c++, c, cppunit

我想知道是否有一些开源项目（我更喜欢 C 项目）使用 cppUnit 进行单元测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:59:56.200

[Xnor midi](https://github.com/x37v/xnormidi)、[tada](https://github.com/quantumelixir/tada)和[nkbase](https://github.com/akashkgarg/nkbase)使用 CppUnit。我相信[gnuradio](http://gnuradio.org/)也使用 CppUnit。在 github 上快速搜索很长的路要走。

# php - 如何组合表中两列的两个值。

> ID：15746469
> 
> 赞同：1
> 
> 时间：2013-04-01T15:37:26.170
> 
> 标签：php, mysql, sql

有没有办法从如下表中选择数据？

```
SELECT * FROM profile WHERE fname+" "+lname LIKE '%$name%' 
```

例如：

```
fname = "Lady"
lname = "Gaga"
$name = "lady g" is match 
```

就像 facebook 搜索引擎一样，当我输入全名时，它会显示结果，即使全名包含非中断空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:39:37.913

肯定有 - 你可以使用 mysql`CONCAT()`功能 -

```
SELECT * FROM profile WHERE CONCAT(fname," ",lname) LIKE '%$name%' 
```

该`CONCAT()`函数可以接受许多参数，引用的字符串作为它们的文字值，并且字段名称从被查询的表中评估为它们的值。因此`fname`，并且`lname`必须是数据库中字段的实际名称。

[有关更深入的文档，](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)请参见此处

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:38:51.493

是的，使用[**CONCAT()**](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)函数，如下所示：

```
SELECT * FROM profile WHERE CONCAT(fname,' ',lname) LIKE '%$name%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:39:04.827

在 MySQL 中，您需要使用`CONCAT()`或`CONCAT_WS()`连接两个对象。

```
SELECT * FROM profile WHERE CONCAT(fname, ' ', lname) LIKE '%$name%' 
```

或者

```
SELECT * FROM profile WHERE CONCAT_WS(' ', fname, lname) LIKE '%$name%' 
```

*   [康卡特](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)
*   [CONCAT_WS](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T15:39:11.903

您将使用该`CONCAT`功能。请记住，这可能会导致性能不佳，因为它不会正确使用索引。

`SELECT * FROM profile WHERE CONCAT(fname," ",lname) LIKE '%$name%'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T15:39:15.170

您可以使用[`CONCAT_WS`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)：

```
SELECT * FROM profile WHERE CONCAT_WS(' ', fname, lname) LIKE '%' . $name . '%' 
```

当然要记住转义输入（或使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)）。

# .htaccess - htaccess 如何添加文件扩展

> ID：15746472
> 
> 赞同：0
> 
> 时间：2013-04-01T15:37:27.380
> 
> 标签：.htaccess, mod-rewrite

我见过五月女巫会打电话来

www.page.com/name

为了得到这个，我的事情，我必须改变 .htaccess 但我不知道怎么做？

调用这个： www.page.com/name 喊给 www.page.com/name.html （名称喊是一个变量名）

我在这里能得到任何帮助吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:59:29.610

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# To externally redirect /dir/foo.html to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.html [NC]
RewriteRule ^ %1 [R=301,L]

## To internally forward /dir/foo to /dir/foo.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*?)/?$ $1.html [L] 
```

# multithreading - JavaFX：如何绑定两个值？

> ID：15746474
> 
> 赞同：5
> 
> 时间：2013-04-01T15:37:32.657
> 
> 标签：multithreading, binding, javafx-2, bind, task

我是这里的新人:)

我有一个关于 JavaFX 绑定的小问题。我创建了作为时钟工作的 Task 并返回必须在特殊标签（**label_Time**）中设置的值。此标签显示玩家在测验中的答案还剩多少秒。

问题是如何使用计时器任务自动更改标签中的值？我试图以这种方式将计时器任务（**秒**）中的值链接到 label_Time 值......

```
label_Time.textProperty().bind(timer.getSeconds()); 
```

...但它不起作用。有什么办法可以做这件事吗？

**提前感谢您的回答！**:)

* * *

**Controller类中的初始化方法：**

```
public void initialize(URL url, ResourceBundle rb) {

        Timer2 timer = new Timer2();
        label_Time.textProperty().bind(timer.getSeconds());
        new Thread(timer).start();  
} 
```

**任务类“Timer2”：**

```
public class Timer2 extends Task{

    private static final int SLEEP_TIME = 1000;
    private static int sec;
    private StringProperty seconds;

    public Timer2(){
        Timer2.sec = 180;
        this.seconds = new SimpleStringProperty("180");
    }

    @Override protected StringProperty call() throws Exception {

        int iterations;

        for (iterations = 0; iterations < 1000; iterations++) {
            if (isCancelled()) {
                updateMessage("Cancelled");
                break;
            }

            System.out.println("TIK! " + sec);
            seconds.setValue(String.valueOf(sec));
            System.out.println("TAK! " + seconds.getValue());

            // From the counter we subtract one second
            sec--;

            //Block the thread for a short time, but be sure
            //to check the InterruptedException for cancellation
            try {
                Thread.sleep(10);
            } catch (InterruptedException interrupted) {
                if (isCancelled()) {
                    updateMessage("Cancelled");
                    break;
                }
            }
        }
        return seconds;
    }

    public StringProperty getSeconds(){
        return this.seconds;
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T00:34:21.730

**为什么您的应用无法运行**

发生的情况是您在它自己的线程上运行任务，在任务中设置 seconds 属性，然后绑定触发标签文本的立即更新，同时仍在任务线程上。

这违反了JavaFX 线程处理的[规则：](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)

> 应用程序必须在 JavaFX 应用程序线程上将节点附加到场景，并修改已附加到场景的节点。

这就是您最初发布的程序不起作用的原因。

* * *

**如何修复它**

要修改您的原始程序以使其正常工作，请将属性的修改包装在[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html)构造内的任务中：

```
 Platform.runLater(new Runnable() {
    @Override public void run() {
      System.out.println("TIK! " + sec);
      seconds.setValue(String.valueOf(sec));
      System.out.println("TAK! " + seconds.getValue());
    }
  }); 
```

这可确保当您写出属性时，您已经在 J​​avaFX 应用程序线程上，因此当绑定标签文本的后续更改触发时，该更改也将发生在 JavaFX 应用程序线程上。

* * *

**关于属性命名约定**

正如 Matthew 指出的那样，该程序确实不符合 JavaFX bean 约定。遵守这些约定既有助于使程序更易于理解，也有助于利用[PropertyValueFactory](http://docs.oracle.com/javafx/2/api/javafx/scene/control/cell/PropertyValueFactory.html)等反映属性方法名称的东西，以允许表格和列表单元格在基础属性更新时自动更新它们的值。但是，对于您的示例，不遵循 JavaFX bean 约定并不能解释程序为什么不起作用。

* * *

**替代解决方案**

这是倒计时绑定问题的替代解决方案，它使用 JavaFX[动画框架](http://docs.oracle.com/javafx/2/api/javafx/animation/package-summary.html)而不是[并发框架](http://docs.oracle.com/javafx/2/api/javafx/concurrent/package-summary.html)。我更喜欢这个，因为它将所有内容都保留在 JavaFX 应用程序线程上，您无需担心难以理解和调试的并发问题。

![倒数](https://i.stack.imgur.com/gIW9J.png)

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.beans.*;
import javafx.beans.binding.Bindings;
import javafx.beans.property.*;
import javafx.event.*;
import javafx.geometry.Pos;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.util.Duration;

public class CountdownTimer extends Application {
  @Override public void start(final Stage stage) throws Exception {
    final CountDown      countdown       = new CountDown(10);
    final CountDownLabel countdownLabel  = new CountDownLabel(countdown);

    final Button         countdownButton = new Button("  Start  ");
    countdownButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        countdownButton.setText("Restart");
        countdown.start();
      }
    });

    VBox layout = new VBox(10);
    layout.getChildren().addAll(countdownLabel, countdownButton);
    layout.setAlignment(Pos.BASELINE_RIGHT);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 20; -fx-font-size: 20;");

    stage.setScene(new Scene(layout));
    stage.show();
  }

  public static void main(String[] args) throws Exception {
    launch(args);
  }
}

class CountDownLabel extends Label {
  public CountDownLabel(final CountDown countdown) {
    textProperty().bind(Bindings.format("%3d", countdown.timeLeftProperty()));
  }
}

class CountDown {
  private final ReadOnlyIntegerWrapper timeLeft;
  private final ReadOnlyDoubleWrapper  timeLeftDouble;
  private final Timeline               timeline;

  public ReadOnlyIntegerProperty timeLeftProperty() {
    return timeLeft.getReadOnlyProperty();
  }

  public CountDown(final int time) {
    timeLeft       = new ReadOnlyIntegerWrapper(time);
    timeLeftDouble = new ReadOnlyDoubleWrapper(time);

    timeline = new Timeline(
      new KeyFrame(
        Duration.ZERO,          
        new KeyValue(timeLeftDouble, time)
      ),
      new KeyFrame(
        Duration.seconds(time), 
        new KeyValue(timeLeftDouble, 0)
      )
    );

    timeLeftDouble.addListener(new InvalidationListener() {
      @Override public void invalidated(Observable o) {
        timeLeft.set((int) Math.ceil(timeLeftDouble.get()));
      }
    });
  }

  public void start() {
    timeline.playFromStart();
  }
} 
```

* * *

**更新有关任务执行策略的其他问题**

> 是否可以运行多个包含`Platform.runLater(new Runnable())`方法的任务？

是的，您可以使用多个任务。每个任务可以是相同类型或不同类型。

您可以创建单个线程并按顺序运行线程上的每个任务，也可以创建多个线程并并行运行任务。

为了管理多个任务，您可以创建一个监督[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)。有时使用[Service](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)来管理多个任务和[Executors](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)框架来管理多个线程是合适的。

有一个协调方法的示例：`Task`通过`Service`单个[服务在每个任务中创建多个并行任务](https://forums.oracle.com/forums/thread.jspa?messageID=10810601)。`Executors`

在每个任务中，您可以不`runlater`拨打电话、拨打单次`runlater`电话或多次`runlater`拨打电话。

所以有很大的灵活性。

> 或者也许我应该创建一个只从其他任务中获取数据并更新 UI 的一般任务？

是的，如果复杂性需要，您可以使用这样的协调任务方法。在[Render 300 charts off screen and save them to files](https://gist.github.com/jewelsea/5072743)中有一个这种方法的例子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T18:07:04.287

您的“Timer2”类不符合 JavaFX bean 约定：

```
public String getSeconds();
public void setSeconds(String seconds);
public StringProperty secondsProperty(); 
```

# haskell - 成员函数不适用于浮点数

> ID：15746479
> 
> 赞同：6
> 
> 时间：2013-04-01T15:37:47.210
> 
> 标签：haskell, floating-point, monads

在[这个](https://stackoverflow.com/a/6399798/124538)答案中，以下代码的评估如下：

```
> let x = fromList  [0, -1, 0/0, -5, -6, -3] :: Set Float

> member 0 x
True

> let x' = insert (0/0) x

> member 0 x'
False 
```

作者指出发生这种情况是因为`Eq`和`Ord`浮点实例不遵守单子定律。`Eq`和`Ord`浮点实例如何打破单子定律，为什么会导致上述行为？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T15:45:52.853

违反的不是单子定律，而是`Eq`关于`Ord`.

定义等价关系的`Eq`按需定律，`(==)`

```
forall x. x == x
forall x y. x == y <=> y == x
forall x y z. x == y && y == z => x == z 
```

并且合同`Ord`是`<`定义总排序的，

```
forall x. not (x < x)
forall x y. (x < y) || (x == y) || (y < x)
forall x y. not (x < y && y < x) 
```

浮点类型违反了这些定律，因为 NaN（NaN = Not a Number）与它们自身比较不相等，

```
0/0 /= 0/0 
```

以及任何涉及 NaN 的比较`<`, , ... 返回。`<=``False`

因此，当树中存在应该排序的 NaN 时，在搜索元素时与 NaN 进行比较可能会将递归搜索发送到错误的子树。

# mysql - IF 语句按 Doctrine 2 查询 Symfony 2 的子句顺序排列

> ID：15746482
> 
> 赞同：4
> 
> 时间：2013-04-01T15:38:08.930
> 
> 标签：mysql, symfony, doctrine

我正在尝试创建一个显示所有评论的博客，并且用户将能够在回复之前发布的评论时发表评论，然后在 sql 查询中进行排序，这样它们就会显示出来，以便我不断收到错误。

```
SELECT c.userid, c.comment, c.reply, u.username, c.createdat, c.image, c.username as
ComUser FROM Bundle:Comments c LEFT JOIN Bundle:Users u WITH c.userid = u.id
WHERE c.articleid = 1 ORDER BY (CASE WHEN (c.parentid = 0) THEN c.id ELSE c.parentid END) 
c.createdat ASC 
```

给出错误：[语法错误]第 0 行，第 515 列：错误：预期的字符串结尾，得到 'CASE'

甚至尝试过正常的方式

```
ORDER BY IF(c.parentid = 0, c.id, c.parentid), c.createdat ASC 
```

给出错误：[语法错误]第 0 行，第 515 列：错误：预期的字符串结尾，得到 '('

当我在正常的 sql 代码（不是教义）中使用正常的 ORDERY BY IF() 时，它工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T15:42:02.123

看起来你只是有一个错字。您的整体语法是正确的。

```
ORDER BY CASE WHEN (c.parentid = 0) THEN c.id ELSE .parentid END c.createdat ASC 
```

应该

```
ORDER BY CASE WHEN (c.parentid = 0) THEN c.id ELSE c.parentid END, c.createdat ASC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:30:29.407

真棒！！！感谢您的帮助，我刚刚得到它！

我的解决方案：

```
SELECT c.userid, c.comment, c.reply, u.username, c.createdat, c.image, c.username as
ComUser, (CASE WHEN (c.parentid = 0) THEN c.id ELSE c.parentid END) as OrderByComm
FROM Bundle:Comments c LEFT JOIN Bundle:Users u WITH c.userid = u.id
WHERE c.articleid = 1 ORDER BY OrderByComm, c.createdat ASC 
```

我在选择部分通过计算进行了排序。

# msbuild - 使用 msbuild 构建 x64 c# 项目会导致 32 位目标

> ID：15746483
> 
> 赞同：7
> 
> 时间：2013-04-01T15:38:11.820
> 
> 标签：msbuild

我正在使用 Visual Studio 2010 构建具有 x86 和 x64 目标的 ac# 项目。当我使用 IDE 构建时，我得到了 x64 和 x86 目标的正确结果。

当我在命令行上使用 msbuild 时，我得到的一切都是在 x86 中构建的，即使我在命令行上指定了 x64。

在我从 .Net 4.0 升级到 .Net 4.5 之前，我没有这个问题。

使用 .Net 4.0，即使我在命令行上指定了 x86，我也能够获得我的 x64 目标。

我在 .Net 4.0 环境中进行了构建，然后在 .Net 4.5 环境中进行了另一个构建，并将输出通过管道传输到日志文件中。我注意到日志文件中存在一些差异，但我认为这是导致我的问题的原因：

在 .Net 4.0 中，我在日志文件中看到这一行：

/参考：C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.CSharp\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.CSharp.dll

在 .Net 4.5 中，我在日志文件中看到这一行：/r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\Microsoft.CSharp.dll"

有任何想法吗？它接缝 .Net 4.5 使用的是 x86 特定路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T03:34:45.150

如果您的解决方案的 x64 配置配置为将项目构建为 AnyCPU，则可能会发生这种情况。.Net 4.5 中的一个新配置选项[Prefer 32 bit](http://blogs.microsoft.co.il/blogs/sasha/archive/2012/04/04/what-anycpu-really-means-as-of-net-4-5-and-visual-studio-11.aspx)使带有 Prefer32bit 标志的可执行文件在 64 位机器上作为 32 位进程启动。由于 Prefer32bit 标志在 MSBuild 目标中是默认的，您将看到您描述的行为，即从 .Net 4.0 升级到 .Net 4.5 将使您的 AnyCPU 项目从 64 位切换到 32 位。

要为 x64 构建项目（不是解决方案），请在命令行上指定它：

```
msbuild project.csproj /p:Platform=x64 
```

请注意，命令行适用于 .csproj，而不适用于 .sln。

或者，在配置管理器中验证您的解决方案配置，并确保它构建为 x64。

# ember.js - EmberJS 确定事务何时成功提交

> ID：15746494
> 
> 赞同：3
> 
> 时间：2013-04-01T15:38:45.770
> 
> 标签：ember.js, ember-data

我正在将 EmberJS 与 Ember Data（修订版 11）一起使用，并在事务成功完成后尝试转换到另一条路线。问题是这个页面允许编辑模型以及在该模型上的 hasMany 集合中添加和删除项目。

我目前拥有的如下：

```
myModel.one "didUpdate", this, ->
    @transitionTo "anotherRoute", myModel

myModel.transaction.commit() 
```

仅当 myModel 已更改而不是其中任何一个 hasMany 子项也已更改时，它才会转换。

我真的在寻找一种方法：

*   当 myModel 的所有 hasMany 子项已成功保存时运行 didUpdate 事件
*   当所有模型都成功持久化后，挂钩到事务的回调。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:36:54.203

我也遇到过这个问题。我目前的解决方案是观察交易状态：

```
observer = (target, path) =>
  if target.get(path) is 'saved'
    target.removeObserver path, null, observer
    @doSomething()

@get('content').addObserver 'stateManager.currentState.name', null, observer
@get('content.transaction').commit() 
```

didUpdate 不起作用的事实可能是一个错误。如果我直接在模型上定义回调，它会被调用。

# action - HTML FORM - 在 onsubmit="" 之前出现表单 action=""

> ID：15746495
> 
> 赞同：2
> 
> 时间：2013-04-01T15:38:47.020
> 
> 标签：action, forms, onsubmit

我有一个弹出表单，在提交时它会自行关闭并刷新父屏幕。它使用 action="x.php" 来传输会话数据。我的问题是 onsubmit="js()" 的形式发生在 action="x.php" 之前，因此在窗口关闭之前不会发送数据。如何切换这些执行的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:43:02.857

使用 jQuery AJAX 提交表单并在成功回调中执行您的 onsubmit 代码。

```
$("#formID").submit(function() {
    /*
    Do client side validation before you submit the form with AJAX
    */
    var formData = $("#formID").serialize();
    $.ajax({  
      type: "POST",  
      url: "x.php",  
      data: formData,  
      success: function() {  
        /*
        The actions you want to perform
        window.close(); // etc etc
        */
      }  
    });
    return false; // stop default form submit because we're using ajax
}); 
```

# c# - C# 中的 KeyEventArgs

> ID：15746499
> 
> 赞同：0
> 
> 时间：2013-04-01T15:39:00.073
> 
> 标签：c#, event-handling

我对如何捕捉按下哪个键有疑问。这是我的代码，但我不知道按下了什么键。我正在使用 KeyEventArgs 声明新变量，然后进行比较。

```
 private void textBox2_TextChanged(object sender, EventArgs e)
    {
        KeyEventArgs k = null;
        if (e is KeyEventArgs)
        {
            k = (KeyEventArgs)e;
        }

        if (k.KeyCode == Keys.Enter)
        {
            // do something here
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:40:20.063

`TextChanged`不会给你`KeyEventArgs`。你想要`KeyUp`，`KeyDown`或者`KeyPress`相反。`KeyPress`而是给你`KeyPressEventArgs`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T15:46:00.493

您需要添加：

```
 [component_name].KeyDown += new System.Windows.Forms.KeyEventHandler(this.Key_Pressed_Method); 
```

进入表单的构造函数。然后，您可以在 Key_Pressed_Method() 方法中定义要执行的操作。

# c# - Magento API 的调用方法期望的 XML 请求负载

> ID：15746505
> 
> 赞同：2
> 
> 时间：2013-04-01T15:39:08.183
> 
> 标签：c#, magento, xml-rpc

我用 C# 编写了一个通用的 XML RPC 框架。我现在用它来调用 Magento API。

我首先调用了该`login`方法并获得了一个有效的会话 ID。但我不确定调用该`call`方法的方式是什么，因为到目前为止我看到的所有示例都是客户端使用 SOAP 代理从 Java 或 PHP 调用它。

这些代理调用的语法表明方法签名必须是这样的：

```
proxy.call ( stringSessionId, stringMethodYouWantToCall, 
                           new object[] { param1, param2, ... } ); 
```

`call`我指的方法在哪里。`stringMethodYouWantToCall`是 Magento 框架的`call`方法将调用的一些 PHP 端方法。

问题是，当我这样做时，我会遇到各种各样的错误。但如果我谈到这些，我会离题。

**我的问题确实是：您能否向我提供调用方法期望的示例 xml-rpc 有效负载。我将从那里建造它。**

**目前，Java 应用程序调用 Magento API **。**我可以使用 Fiddler 查看它发送到 Magento 的 HTTP 流量/请求正​​文，但我不知道如何配置 Tomcat 以将其流量发送到 Fiddler。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T04:58:43.057

我不确定编写自己的 XML RPC 实现是否是一件好事，因为我确信那里有功能齐全的 C# 库可以为您解决问题。但如果这是一些学术或爱好项目，那么无论如何你应该看看这个通用 XML RPC 客户端[https://github.com/zendframework/zf2/blob/master/library/Zend/XmlRpc/Client。 .php](https://github.com/zendframework/zf2/blob/master/library/Zend/XmlRpc/Client.php) _ 对于特定用例，请查看此处用于 SOAP 客户端的 __call 方法[https://github.com/zendframework/zf2/blob/master/library/Zend/Soap/Client.php](https://github.com/zendframework/zf2/blob/master/library/Zend/Soap/Client.php)

只是为了确定您是否朝着正确的方向前进，检查他们如何实现整个 SOAP 客户端将是一个很好的参考。

也请看看这里可能对你有帮助吗？[哪个 C# SOAP 客户端库最容易使用？](https://stackoverflow.com/questions/963794/which-c-sharp-soap-client-library-is-easiest-to-use)**

# c# - MVC4 验证 DataAnnotations 不工作（不验证）

> ID：15746508
> 
> 赞同：0
> 
> 时间：2013-04-01T15:39:15.290
> 
> 标签：c#, asp.net-mvc, validation, data-annotations

我有一个非常复杂的模型和一个视图（如下）。我只有一个字段为必填项（Key Active Mg）。当我标记它`[Required(ErrorMessage="Key Active Mg is required")]`并`@Html.ValidationMessageFor`为该字段设置时，我的应用程序将不让我输入任何内容并单击保存。当然`Model.IsValid`会回来`false`。它不会返回并用红色勾勒出该字段，表明它是必需的。有谁知道为什么？

我的模型：

```
 public class RawValues
    {
        [Key]
        public int Pk { get; set; }

        public int? FillerFk { get; set; }
        [Display(Name = "Filler")]
        [ForeignKey("FillerFk")]
        public virtual Filler Filler { get; set; }

        public int? CapsuleFk { get; set; }
        [Display(Name = "Capsule")]
        [ForeignKey("CapsuleFk")]
        public virtual Capsule Capsule { get; set; }

        public int? KeyActiveFk { get; set; }
        [Display(Name = "Key Active")]
        [ForeignKey("KeyActiveFk")]
        public virtual KeyActive KeyActive { get; set; }

        [Display(Name="API #1")]
        public int? Active1 { get; set; }

        [Display(Name = "API #2")]
        public int? Active2 { get; set; }

        [Display(Name = "API #3")]
        public int? Active3 { get; set; }

        [Display(Name = "API #4")]
        public int? Active4 { get; set; }

        [Display(Name = "API #5")]
        public int? Active5 { get; set; }

        [Display(Name = "Key Active Mg")]
        [Required(ErrorMessage="Key Active Mg is required.")]
        public int KeyActiveMg { get; set; }

        [Display(Name = "E4M")]
        public bool E4M { get; set; }

        [Display(Name = "K100M")]
        public bool K100M { get; set; }

        public int TimeReleaseFillerFk { get; set; }
        public int NumberCapsules { get; set; }

        public string CreatedBy { get; set; }
        public DateTime CreatedDate { get; set; }
    } 
```

我的观点：

```
@model CapWorx.QuikCap.Models.RawValues

@* This partial view defines form fields that will appear when creating and editing entities *@

<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Capsule, new { @class = "ui-input-text" })
    @Html.DropDownListFor(m => m.Capsule.Pk, new SelectList(ViewBag.Capsules, "Pk", "Name", "Pk"))
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Active1)
    @Html.EditorFor(model => model.Active1)
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Active2)
    @Html.EditorFor(model => model.Active2)
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Active3)
    @Html.EditorFor(model => model.Active3)
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Active4)
    @Html.EditorFor(model => model.Active4)
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Active5)
    @Html.EditorFor(model => model.Active5)
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.KeyActive, new { @class = "ui-input-text" })
    @Html.DropDownListFor(m => m.KeyActive.Pk, new SelectList(ViewBag.KeyActives, "Pk", "Name", "Pk"))
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.KeyActiveMg)
    @Html.EditorFor(model => model.KeyActiveMg)
    @Html.ValidationMessageFor(model => model.KeyActiveMg)
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.E4M)
    @Html.DropDownListFor(x => x.E4M,
                              new[] { 
                                    new SelectListItem() { Text = "Off", Value = "False", Selected = true }, 
                                    new SelectListItem() { Text = "On", Value = "True" } },
                              new { data_role = "slider" })
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.K100M)
    @Html.DropDownListFor(x => x.K100M,
                              new[] { 
                                    new SelectListItem() { Text = "Off", Value = "False", Selected = true }, 
                                    new SelectListItem() { Text = "On", Value = "True" } },
                              new { data_role = "slider" })
</div>
<div data-role="fieldcontain">
    @Html.LabelFor(model => model.Filler, new { @class = "ui-input-text" })
    @Html.DropDownListFor(m => m.Filler.Pk, new SelectList(ViewBag.Fillers, "Pk", "Name", "Pk"))
    @Html.ValidationMessage("FillerName", "Filler is required")
</div> 
```

我的控制器：

```
[HttpPost]
        public ActionResult Create(RawValues rawvalues)
        {
            rawvalues.CreatedBy = User.Identity.Name;
            rawvalues.CreatedDate = DateTime.Now;
            rawvalues.TimeReleaseFillerFk = Helpers.OperationContext.GetTimeReleaseFillerFk(rawvalues.E4M, rawvalues.K100M);

            rawvalues.CapsuleFk = rawvalues.Capsule.Pk;
            rawvalues.FillerFk = rawvalues.Filler.Pk;
            rawvalues.KeyActiveFk = rawvalues.KeyActive.Pk;

            rawvalues.Filler = Helpers.OperationContext.GetFiller(rawvalues.Filler.Pk);
            rawvalues.Capsule = Helpers.OperationContext.GetCapsule(rawvalues.Capsule.Pk);
            rawvalues.KeyActive = Helpers.OperationContext.GetKeyActive(rawvalues.KeyActive.Pk);

            rawvalues.NumberCapsules = 100;

            var errors = ModelState.Values.SelectMany(v => v.Errors);

            if (ModelState.IsValid) {
                rawvaluesRepository.InsertOrUpdate(rawvalues);
                rawvaluesRepository.Save();
                List<Results> results = Helpers.OperationContext.CallCalculate(rawvalues);
                return View("Results", results);
            } else {
                ViewBag.Error = "Model State was not valid.";
                return View("Error");
            }
        } 
```

我的截图：

![在此处输入图像描述](https://i.stack.imgur.com/SueFP.jpg)

**更新**

我已将控制器代码更新为以下内容：

```
 if (ModelState.IsValid) {
        rawvaluesRepository.InsertOrUpdate(rawvalues);
        rawvaluesRepository.Save();
        List<Results> results = Helpers.OperationContext.CallCalculate(rawvalues);
        return View("Results", results);
    } else {
        ViewBag.Capsules = Helpers.OperationContext.GetCapsules();
        ViewBag.Fillers = Helpers.OperationContext.GetFillers();
        ViewBag.KeyActives = Helpers.OperationContext.GetKeyActives();
        return View();
    } 
```

这解决了我的问题。我需要返回相同的视图以在屏幕上显示错误。使用 DataAnnotations Validation，表单实际上确实命中了 Create 的 HttpPost 方法，如果有错误（验证错误）ModelState.IsValid 将返回 false，在这种情况下我需要返回相同的视图。请看下面的截图！

![在此处输入图像描述](https://i.stack.imgur.com/Pzbzj.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:50:03.750

看起来你正在返回另一个视图（***错误***）如果`ModelState.IsValid`是`false`。您应该将发布的视图模型返回到相同的创建视图。

```
public ActionResult Create(RawValues model)
{
  if(ModelState.IsValid)
  {
     //everything is good. Lets save and redirect
  }
  return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:48:29.927

我的猜测是您不包括“jquery.unobtrusive-ajax.min.js”和/或“jquery.validate.unobtrusive.min.js”。我相信这些是解释 DataAnnotations 添加的元数据并提供您正在寻找的验证方法所必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T15:52:32.427

当您的模型无效时，您实际上并没有返回它并带有验证错误。然后，你这样做：

```
@Html.ValidationMessageFor(model => model.KeyActiveMg) 
```

但没有任何验证消息。您返回了一个带有空白模型的全新视图。相反，您应该将无效模型返回到视图，如下所示：

```
return View(rawvalues); 
```

**更新**

您的控制器应如下所示：

```
public ActionResult Create()
{
    return View(new RawValues());
}

[HttpPost]
public ActionResult Create(RawValues model)
{
    if (ModelState.IsValid)
    {
        // Do stuff
    }
    else
    {
        return View(model);
    }
} 
```

你的观点似乎很好，所以它应该从这里开始。

如果您在谈论客户端验证，则需要引用必要的 JS 文件。它们应该已经在您的 Bundle 配置中进行了预配置。您只需要添加到您的视图中：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")
@Scripts.Render("~/bundles/jqueryval") 
```

只是为了确保，位于`App_Start`文件夹中的 BundleConfig 类应该有这些：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
            "~/Scripts/jquery-{version}.js"));

bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
            "~/Scripts/jquery-ui-{version}.js"));

bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            "~/Scripts/jquery.unobtrusive*",
            "~/Scripts/jquery.validate*")); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T16:06:24.727

我想你需要这个

```
[HttpPost]
public ActionResultCreate(RawValues model)
{
 ....

 if (!ModelState.IsValid)
 {
    ModelState.AddModelError("KeyActiveMg", "KeyActiveMg field is required");
    var model = new GetModel();
    return View("Results", model);
 }  

    rawvaluesRepository.InsertOrUpdate(rawvalues);
    rawvaluesRepository.Save();
    List<Results> results = Helpers.OperationContext.CallCalculate(rawvalues);
    return View("Results", results);
} 
```

# html - 焦点上的输入文本区域删除橙色边框？

> ID：15746509
> 
> 赞同：1
> 
> 时间：2013-04-01T15:39:27.273
> 
> 标签：html, css, input

我已经尝试了我能想到的一切来删除它。如何在焦点边框上删除这个疯狂的 Firefox？当我单击输入区域时，它将以橙色边框突出显示。

这是我的 CSS

```
.noFocus:focus {
outline: none !important;
border: none !important;
-moz-appearance:none;
} 
```

和

```
textarea:focus, input:focus{
    outline: none;
    border: none !important;
-moz-appearance:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:42:57.280

`!important`在和之间留一个空格`;`，如下所示：

```
outline: none !important ; 
```

这可能是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:03:46.067

这适用于您遇到的问题-

```
input, select, textarea, button {
    -moz-box-shadow:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:15:00.977

试试这个希望这有效：

```
input:invalid {outline: none;
    border: none !important;
-moz-appearance:none;} 
```

# python - 在 OS X 10.8（64 位）上运行 wxPython 2.9

> ID：15746518
> 
> 赞同：1
> 
> 时间：2013-04-01T15:39:59.657
> 
> 标签：python, wxpython, osx-mountain-lion, pdb, winpdb

我有 EPD 7.3 并通过 Enthought 存储库安装了 wxPython 2.9。我尝试运行需要 wxPython 的 winPDB，并收到以下消息：

```
This program needs access to the screen.
Please run with a Framework build of python, and only when you are
logged in on the main display of your Mac. 
```

我在 Mac 上看到过来自 wxPython 的类似消息，但我还没有找到解决方案。有人知道这个消息吗？而且，有没有人让 WinPDB 在 OS X 10.8 w/wxPython 2.9 上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T00:16:24.223

当用于运行 wxPython 脚本的 Python 不是完整的框架构建时，将出现此错误消息。OSX 要求获得屏幕完全访问权限的应用程序从应用程序包运行或者是框架的一部分。

现在通常所有的 Python 都是框架构建，无需再担心这一点，但是在一种情况下它仍然是一个问题，那就是使用 virtualenv 或类似工具。由于 virtualenv 的构造方式，那里的 Python 有点失去了与它所来自的框架的联系，因此使用它直接触发了该安全机制，并且 wx 代码无法获得对屏幕的完全访问权限。如果您在 virtualenv 中遇到问题，那么我在这里写了一个解决方法：[http ://wiki.wxpython.org/wxPythonVirtualenvOnMac](http://wiki.wxpython.org/wxPythonVirtualenvOnMac)

嗯......我刚刚用 EPD 仔细检查了这一点，我发现他们提供的“python”可执行文件不是 Python.app 二进制文件的前端，就像在普通框架构建中一样，但更像是一个普通的 unixy Python。由于我现在在 Enthought，我会询问责任方这是一个错误还是有意为之，但与此同时，您可以通过更改正在执行的 Python 来解决这个问题。例如，您可以在指向 Python.app 二进制文件的 bash shell 中创建一个“pythonw”别名，如下所示：

```
alias pythonw=/Library/Frameworks/EPD64.framework/Versions/7.3/Resources/Python.app/Contents/MacOS/Python 
```

然后，您应该能够使用 pythonw 而不是 python 来运行 WinPDB 或其他 wxPython 应用程序。

# c++ - 模板参数名称作为基类

> ID：15746519
> 
> 赞同：3
> 
> 时间：2013-04-01T15:40:04.923
> 
> 标签：c++, templates

我有以下类型：

```
typedef unsigned int uint32;

typedef void* ptr;

struct memory_options {};

struct memory_provider {};

template <typename options>
struct memory_track {};

template <typename options>
struct no_memory_track : public memory_track<options> {};

template<typename options>
struct defrag_memory_track : public memory_track<options> {};

template<typename options>
struct full_memory_track : public memory_track<options> {};

template <typename options, typename prov, typename track>
struct memory_algorithm : public track < options > {};

int main()
{
} 
```

此类型用于定义自定义内存管理器。

问题是该类`memory_algorithm`将从另一个类继承，该类将始终采用`template parameter`代表`memory_options`类，我称之为`options`。基类可能是它的部分特化`memory_track`或子类，因此在`memory_algorithm`我传递了 2 个模板参数中，一个代表类名 - 即`track`- 另一个代表`memory_options`类 - 即`options`- 现在每当我尝试使用示例测试编译代码时使用 GCC 和 Visual C++ 2008 的单元我得到了错误：

对于视觉 C++：

> 在 '<' 之前缺少 ','
> 
> 请参阅对正在编译的类模板实例化“memory_algorithm”的引用

对于海湾合作委员会：

> 错误：“<”标记之前的预期模板名称
> 
> 错误：在“<”标记之前应为“{”
> 
> 错误：“<”标记之前的预期不合格 ID

有什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:42:00.053

如果我正确理解您的问题，您可能需要制作`track`模板*模板参数*，而不是常规类型参数：

```
template <typename options, typename prov, template<typename> class track> 
//                                         ^^^^^^^^^^^^^^^^^^^^^^^^
struct memory_algorithm : public track < options > {}; 
```

# jax-rs - RESTful Web 应用程序中的身份验证和授权设计

> ID：15746523
> 
> 赞同：1
> 
> 时间：2013-04-01T15:40:17.390
> 
> 标签：jax-rs, restful-authentication, restful-architecture, web-application-design

我有一个使用 RESTful 服务 (JAX-RS) 构建的 Web 应用程序。有 REST 调用和带有 js 文件的简单 JSP 来处理数据。

现在我想在服务中实现身份验证和授权。我之前所做的是实现简单的过滤器，并在每个服务中检查 @HttpRequestContext 是否会话具有用户对象。既然我想公开服务说，外部 webapp，我将不得不硬编码系统，因为没有标准。

我觉得这不是好的设计。是否有解决这个常见问题的设计模式？

# c# - 在现有查询中插入 Linq 查询部分

> ID：15746524
> 
> 赞同：3
> 
> 时间：2013-04-01T15:40:18.577
> 
> 标签：c#, .net, linq, abstract-syntax-tree

具有以下存储变量的变量`IQueryable`：

```
var mainQuery = session
    .Query<Employee>()
    .Select(e => new
    {
        e.Name,
        e.Address
    }); 
```

以及一个将 IQueryable 作为参数的方法。

```
public DataTable GetData(IQueryable query)
{
    ...
} 
```

我怎样才能在里面写代码`GetData()`，`OrderBy()`在`Select()`?

的最终值`query`应该看起来像是使用以下 Linq 表达式构建的：

```
var query = session
    .Query<Employee>()
    .OrderBy(e => e.Age)
    .Select(e => new
    {
        e.Name,
        e.Address
    }); 
```

这是必需的，因为如果我添加`OrderBy()`之后，`Select()`我将只能按匿名类型的成员（姓名、地址）进行排序。`OrderBy()`如果员工也有和年龄，我在放置后无法排序`Select()`。谢谢你的帮助！

**更新：**

`GetData`不知道查询的结构，只是它以 . 结尾`Select`。而且它必须具有准确的签名`public DataTable GetData(IQueryable query)`——没有额外的参数。

它需要什么来修改方法内的现有查询并`OrderBy`在`Select`.

当有正确答案时，我将接受并投票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:49:38.073

为什么不只是`select()`在调用之后应用`GetData()`？

```
var mainQuery = session.Query<Employee>();

this.GetData(mainQuery);

mainQuery.OrderBy(x => x.Age)
         .Select(x => new
                 {
                     x.Name,
                     x.Address
                 }); 
```

Linq 表达式树是不可变的（[来源](http://msdn.microsoft.com/en-us/library/bb546136.aspx)）。您必须分部分创建树的副本才能对其进行修改。

**更新：**请记住，您的模式试图将数据访问与表示分离（或者至少它是这样读取的）。订购是一个演示问题。您可能有多个客户端想要使用 GetData 来获取数据，但每个客户端都可能希望对数据进行不同的排序。无论如何，您的原始查询是在调用 GetData 之后投影的，因此使用投影进行排序是有意义的。

现在，如果您真的想在方法内部排序而不更改其合同，则必须遍历 linq 查询的表达式树并从头开始重建它，将排序注入正确的位置。表达式树是**不可变**的，不能就地修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:52:43.730

考虑创建`ViewModel`or `DTO`for`Employee`而不是传递匿名对象。但无论如何，您可以在排序后`selector`传入并应用它`GetData``Employee`

```
var mainQuery = session.Query<Employee>();

GetData(mainQuery, e => new { e.Name, e.Address });

//object is used because you create anonymous objects and pass them around
public DataTable GetData(IQueryable query, 
                         Expression<Func<Employee, object>> selector)
{
    return query.OrderBy(e => e.Age)
                .Select(selector)
                //...
} 
```

# c# - Visual Studio 在添加任何引用或安装和更新任何包（加载类型库/DLL）时出错

> ID：15746529
> 
> 赞同：0
> 
> 时间：2013-04-01T15:40:27.437
> 
> 标签：c#, asp.net-mvc, visual-studio, t4mvc

视觉工作室 2012 RTM

我有一个 MVC 网站项目，我在添加一些引用时遇到了一些问题；

编辑：

**我的 Visual Studio 有一些问题** [（更多信息在 stackoverflow 中）](https://i.stack.imgur.com/P576J.jpg)

*   我无法添加对我的项目的任何引用（即使在新解决方案和新项目中）

*   我无法安装任何包（通过“包管理器控制台”或管理 NuGet 包）

*   我无法更新任何包（通过“包管理器控制台”或管理 NuGet 包）

例如，如果我更新我的一个包，这将失败，安装说明如下：

> 正在尝试解决依赖项“T4MVCExtensions (≥ 3.5.2)”。
> 
> **成功安装 'T4MVCExtensions 3.5.2'**。安装成功
> 
> 'T4MVC 3.5.2'。在项目“MyWebSite”中将“T4MVC”从版本“2.10.3”更新为“3.5.2”。
> 
> **已从 MyWebSite成功删除“T4MVC 2.10.3”**。
> 
> **加载类型库/DLL 时出错**。（来自 HRESULT 的异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)）
> 
> **已成功卸载**
> 
> **'T4MVCExtensions 3.5.2'。安装失败。**
> 
> 滚回来...
> 
> **未能添加对 'T4MVCExtensions' 的引用**。

………………………………………………………………………………………………………………………………………………………………………………………………………… ![在此处输入图像描述](https://i.stack.imgur.com/QtrJc.jpg)_ …………………………………………………………………………………………………………………………

**编辑：** 或者如果我添加任何参考：

.....................![在此处输入图像描述](https://i.stack.imgur.com/o8ku3.jpg)

**编辑：** 当“进程监视器”软件打开时，我确实再次更新了软件包，这张图片是它的日志的一部分，带有以下过滤器：

*   选定的活动：**注册表**
*   进程名称**是 devenv.exe**
*   路径**包括 TypeLib**
*   结果**排除成功**

（为了更好地查看下图，请右键单击它并选择“查看图像”）

![在此处输入图像描述](https://i.stack.imgur.com/MmC7M.jpg)

**键：** HKCU\Software\Classes\TypeLib{80CC9F66-E7D8-4DDD-85B6-D9E6CD0E93E2}\8.0

**数据：** C:\Program Files (x86)\Common Files\Microsoft Shared\MSEnv\dte80a.olb

![在此处输入图像描述](https://i.stack.imgur.com/P576J.jpg)

...它是文件>>

![在此处输入图像描述](https://i.stack.imgur.com/mPy1w.jpg)

怎么了？

# ruby-on-rails - 如何在模型的所有实例之间共享一些值

> ID：15746532
> 
> 赞同：0
> 
> 时间：2013-04-01T15:40:37.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想存储一些在模型的所有实例之间共享的值（设置）。做这个的最好方式是什么？

编辑：这些值需要通过表单进行编辑，因此硬编码不起作用。

谢谢！

# python - Scrapy 警告已禁用 HttpCacheMiddleware

> ID：15746537
> 
> 赞同：1
> 
> 时间：2013-04-01T15:40:47.840
> 
> 标签：python, cron, scrapy

运行 scrapy 时收到此警告：

```
 [scrapy] WARNING: Disabled HttpCacheMiddleware: Unable to find scrapy.cfg file to infer project data dir 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:34:16.750

你的`scrapy.cfg`文件在哪里？你是从命令行运行的吗？如果是这样，您应该从与`scrapy.cfg`.

你的项目目录是什么样的。它应该看起来像：

```
.
├── dirbot
│   ├── __init__.py
│   ├── items.py
│   ├── pipelines.py
│   ├── settings.py
│   └── spiders
│       ├── dmoz.py
│       └── __init__.py
├── README.rst
└── scrapy.cfg 
```

**更新**

如果您正在使用`cron`，请尽量不要（意思是不要）使用`root`用户。您可以将 PATH 信息直接添加到 crontab 中：[如何让 CRON 调用正确的 PATH](https://stackoverflow.com/questions/2388087/how-to-get-cron-to-call-in-the-correct-paths#answer-2409369)

```
PATH=/usr/local/sbin:...:/absolute/path/to/my/scrapy/project 
```

# sql - 将表中的值插入两个单独的表（Postgresql）

> ID：15746539
> 
> 赞同：0
> 
> 时间：2013-04-01T15:40:48.300
> 
> 标签：sql, postgresql

我正在尝试通过插入临时表中的值以及另一个表中的单个值来填充表。

我有 SQL 来将我的临时表中的值插入到我的真实表中，除了一个列，并且该列是另一个表的外键。让我举一些例子sql。

```
INSERT INTO location(value1,value2,value3,foreign_key_value)
SELECT tmpValue1
       ,tmpValue2
       ,tmpValue3
       ,(foreign_key_value from a different table needs to be here)
FROM tmp_location 
```

如果在我的 tmp 表中找到了 foreign_key_value，我可以进行连接，但这不是我需要从中获取信息的地方。我想知道是否有任何方法可以从我的表中引用我的 Select 语句中外键指向的列值。或者，如果有更好的方法来做到这一点。

如果您需要更多信息或澄清，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:52:59.420

```
insert into location(value1,value2,value3,foreign_key_value)
select tmpvalue1
       ,tmpvalue2
       ,tmpvalue3
       ,(select id from merchant where the_value = l.the_value)
from
    tmp_location l 
```

# android - 使用 java.lang.OutOfMemoryError 加载资源 onCreate

> ID：15746540
> 
> 赞同：0
> 
> 时间：2013-04-01T15:40:54.823
> 
> 标签：android, exception, out-of-memory, android-resources, android-drawable

我正在添加一些资源 onCreate，它在 Android 2.2 到 2.3.x 上运行良好，但在 4.0+ 上崩溃是代码片段

**我已将所有资源都放在 drawable-mdpi 中，这可能是问题吗？**

```
private List<Drawable> drawables;
private void getDrawablesList() {

    drawables = new ArrayList<Drawable>();
    for(int i=0; i<26; i++)
        drawables.add(getResources().getDrawable(Utility.getImageIDofGalleryAlphabets(i)));

}
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);

    getDrawablesList();
    setupUI();
} 
```

我在 getDrawablesList 以下行中遇到异常

```
drawables.add(getResources().getDrawable(Utility.getImageIDofGalleryAlphabets(i))); 
```

以下是崩溃日志：

```
FATAL EXCEPTION: main
java.lang.OutOfMemoryError
    at android.graphics.Bitmap.nativeCreate(Native Method)
    at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
    at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
    at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
    at android.content.res.Resources.loadDrawable(Resources.java:1937)
    at android.content.res.Resources.getDrawable(Resources.java:664)
    at com.rdx.gallery.GalleryDemoActivity.getDrawablesList(GalleryDemoActivity.java:180)
    at com.rdx.gallery.GalleryDemoActivity.onCreate(GalleryDemoActivity.java:65)
    at android.app.Activity.performCreate(Activity.java:4635)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2031)
    at android.app.ActivityThread.access$600(ActivityThread.java:126)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1166)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4486)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
04-01 08:31:28.894: I/Process(11767): Sending signal. PID: 11767 SIG: 9
04-01 08:31:28.894: E/AndroidRuntime(11767): Handle UnCaght exceptions. KILLING PID: 11767 
```

我知道我开始加载 26 个资源。26 张图片的总大小 = 2.57 MB，我认为这不是太大..

出了什么问题？请分享你的看法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:05:43.380

虽然对您来说可能只有 250 万，但 Android 会根据您设备的像素密度和显示尺寸来扩展您的资源。一旦加载并准备好使用，它可能会更多。此外，某些设备只是没有大量内存。您在某些设备上可能只有 16M，并且您正在与 Android 以及可能在后台运行的任何其他应用程序共享该空间。我的猜测是，您的 4.0 设备在 Android 上使用的内存比 2.x 设备多，而且您之前的内存不足。

如果您真的需要所有这些图像，也许您可​​以构建一个解决方案，仅加载当时需要的内容，并释放不需要的内容。屁股疼，但这些设备的内存非常有限

# c# - 使用 ASP.NET (C#) 在 JS 数组中拆分和保存数据

> ID：15746541
> 
> 赞同：1
> 
> 时间：2013-04-01T15:40:55.247
> 
> 标签：c#, javascript, jquery, asp.net

我有这段代码：

（我想获取标签并将它们插入到将写入 HTML 页面的 JS 数组中，但我无法正确获取标签，您能告诉我有什么问题吗，或者帮我这样做，我已经搜索了很多解决方案，但没有一个在这里工作，标签用逗号分隔）

**ASP.NET**

```
private void Play(List<string> arraySrc, List<string> arrayTitle, List<string> arrayImage, List<string> arrayTags)
        {
            ...
            string[] tags = arrayTags.ToArray();
            string[] split;
            foreach (string item in tags)
            {
                if (item.IndexOf(',') != -1)
                {
                    split = item.Split(',');
                    foreach (string s in split)
                    {
                        ClientScript.RegisterArrayDeclaration("arrayTags", String.Concat("\"<span class=label>", s, "</span>\" "));
                    }
                }
                ClientScript.RegisterArrayDeclaration("arrayTags", String.Concat("\"<span class=label>", item, "</span>\" "));
            }
         } 
```

**JS**

```
function playList () {
    disabled();
    $("#img").attr("src", "image/no-music.png");
    for (var i = 0; i < arraySrc.length; i++) {
        $("#tab1 ul").append("<li>" + (i + 1) + ". <a href='javascript:loadMusic(\"" + arraySrc[i] + "\", \"" + arrayTitle[i] + "\", \"" + arrayImage[i] + "\", \"" + arrayTags[i] + "\"); selected(" + i + ");'>" + arrayTitle[i] + "</a></li>");
    };
}
function loadMusic (musica, title, image, tags) {
    enabled();
    var audio = $("#player");      

    $("#tags").empty();

    $("#tags").append(tags);

    $("#player").attr("src", musica);
    $("#title").text(title);
    $("#img").attr("src", image);
    $("#tags span").addClass("label-info");
    /****************/
    audio[0].pause();
    audio[0].load(); //suspends and restores all audio element
    audio[0].play();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:58:12.517

你做错了。

首先，您要在循环中声明一个 javascript 数组对象，这意味着您要多次声明一个具有相同名称的数组。避免这种情况。

其次，您应该将逗号分隔的字符串值分配给要初始化的数组。

所以基本上，你通过这样的服务器端在javascript中声明一个数组。

```
ClientScript.RegisterArrayDeclaration("arrayName","1,2,3,4");
or
ClientScript.RegisterArrayDeclaration("arrayName","\"One\",\"Two\",\"Three\""); 
```

因此，概念是，在循环内为您的数组创建值（以逗号分隔的字符串），然后在循环之后，使用此创建的值注册一个数组。

因此这样做：

```
private void Play(List<string> arraySrc, List<string> arrayTitle, 
                   List<string> arrayImage, List<string> arrayTags)
{
    ...
    string[] tags = arrayTags.ToArray();
    string[] split;
    string aT="arrayTags";
    string aV=string.empty;
    foreach (string item in tags)
    {
      if (item.IndexOf(',') != -1)
      {
         split = item.Split(',');
         foreach (string s in split)
         {
            aV +="\""+ String.Concat("<span class=label>", s, "</span>"))+"\",";
         }
      }
    }
    aV = aV.SubString(0,av.Length-2);//drop the last trailing comma
    ClientScript.RegisterArrayDeclaration(aT,aV);
} 
```

我没有测试过，注意字符串连接，但你应该这样做。

# unix - 对负值排序

> ID：15746542
> 
> 赞同：1
> 
> 时间：2013-04-01T15:40:55.893
> 
> 标签：unix, sorting, negative-number

我在按降序排序我的句子值时遇到问题：
我在 unix 中输入了这个命令：

```
sort fileInput -t"(" -k2r >fileSort 
```

这是输入文件：

```
comité de conciliation de décision du parlement européen et du (0.00098379)
les amendements CARD CARD CARD CARD CARD CARD et CARD (-0.00025165)
la protection des consommateurs sur la proposition de directive du (0.00077120) 
```

这是输出文件：

```
comité de conciliation de décision du parlement européen et du (0.00098379)
les amendements CARD CARD CARD CARD CARD CARD et CARD (-0.00025165)
la protection des consommateurs sur la proposition de directive du (0.00077120) 
```

该文件没有很好地排序有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:48:16.703

像这样为数字排序添加`-n`和选项：`-g`

```
sort -t"(" -ngk2r 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-25T13:52:33.270

使用 -rk2 而不是 -k2r，即

```
sort fileInput -t"(" -k2r >fileSort 
```

# iphone - 高级动画

> ID：15746546
> 
> 赞同：1
> 
> 时间：2013-04-01T15:41:11.613
> 
> 标签：iphone, objective-c, cocos2d-iphone

制作高级动画的最佳方法是什么？我知道有帧动画（有一堆图像并显示它们以使其看起来像动画一样）我遇到了这个问题。我有一些非常高分辨率的图像，还有相当多的图像，而 iPhone 似乎跟不上动画的速度。（它像不时跳帧一样抽搐）什么是最好的工具超级复杂的动画，像动画一样的视频？我环顾四周，找不到答案，也许我只是没有输入正确的术语。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:48:44.257

尝试从数组制作动画

```
yourImageView.animationImages=arrayOfImages;
yourImageView.animationDuration=5.0;
yourImageView.animationRepeatCount=1;

[yourImageView startAnimating]; 
```

然后将延迟设置为 5

```
[self performSelector:@selector(yourMethod) withObject:nil afterDelay:5.0]; 
```

# ruby-on-rails - 是什么导致 ActionMailer 错误：未定义的局部变量或方法“jp2CharContext”？

> ID：15746549
> 
> 赞同：0
> 
> 时间：2013-04-01T15:41:16.473
> 
> 标签：ruby-on-rails, character-encoding, actionmailer, nameerror

尝试对传入电子邮件进行字符检测时，有时`NameError`会抛出以下错误消息：

```
undefined local variable or method `jp2CharContext' for #<CharDet::SJISContextAnalysis:0x2abb2b2a8bc0> 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:41:16.473

rchardet 1.3 中存在一个已在 1.3.1 中修复的错误。

`lib/rchardet/jpcntx.rb`指的是`jp2CharContext`，但由于`jp2CharContext`是在模块级别定义的，因此它需要有一个大写的名称才能在范围内。

在 1.3.1 中，该变量已从 重命名`jp2CharContext`为`JP2_CHAR_CONTEXT`。

另请参阅：[rchardet RubyDoc 页面](http://rubydoc.info/gems/rchardet/1.3.1/frames)

# php - 如何拉入文本并将一组字符添加到该用户文本的末尾？

> ID：15746554
> 
> 赞同：-3
> 
> 时间：2013-04-01T15:41:29.583
> 
> 标签：php, regex, preg-replace, preg-match

例子：

```
if: $text="youtube.com/video" 
```

我想在该文本的末尾添加类似“示例”的内容。

进行中：

```
youtube.com/videoexample 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:42:14.587

有什么问题

```
$text .= "example"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:14:53.110

可能您正在寻找类似 ih php 的内容：

```
<?php
if( $text == "youtube.com/video" )
{
    $text = $text . 'example';
}
?> 
```

`.`是连接其操作数字符串的连接运算符。

# php - 文件太大，我的 php 程序无法输入

> ID：15746556
> 
> 赞同：3
> 
> 时间：2013-04-01T15:41:32.320
> 
> 标签：php, file, file-io

我想从 txt 文件中获取输入，但该文件包含 1.6 GB 的数据。所以当我将数据加载到我的变量中时它崩溃了如何在我的 php 程序中获取它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:44:42.070

您可以每行处理它：

```
$handle = fopen("file.txt", "r") or die("Couldn't get handle");
if ($handle) {
    while (!feof($handle)) {
        $buffer = fgets($handle, 4096);
        // Process here..
    }
    fclose($handle);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:45:57.180

```
$file = fopen($filename);
while ($line = fgets($file)) {
    // do stuff
}
fclose($file); 
```

# python - 如何在 python 中发送带有请求的“多部分/相关”？

> ID：15746558
> 
> 赞同：13
> 
> 时间：2013-04-01T15:41:51.943
> 
> 标签：python, mime, multipart, python-requests

我正在尝试使用 Python 中的请求发送多部分/相关消息。该脚本看起来很简单，除了 requests 似乎只允许发送 multipart/form-data 消息，尽管他们的文档没有明确说明这种或另一种方式。

我的用例是发送带有附件的肥皂。我可以提供一个字典，其中包含两个文件，其内容是测试肥皂消息，以及我要发送的测试文档。第一个包含带有所有说明的肥皂消息，第二个是实际文档。

但是，如果我没有指定 headers 值，则在使用 files 选项时，请求似乎只使用 multipart/form-data。但是，如果我指定标头以尝试指定不同的多部分类型，请求似乎不会添加到 mime 边界信息中。

```
url = 'http://10.10.10.90:8020/foo'
headers = {'content-type': 'multipart/related'}
files = {'submission': open('submission_set.xml', 'rb'), 'document': open('document.txt', 'rb')}
response = requests.post(url, data=data, headers=headers)
print response.text 
```

有没有办法使用请求来完成这项工作？或者还有其他我应该看的工具吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-02T12:03:09.237

您必须自己创建 MIME 编码。您可以使用该[`email.mime`](http://docs.python.org/2/library/email.mime.html)软件包执行此操作：

```
import requests
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

related = MIMEMultipart('related')

submission = MIMEText('text', 'xml', 'utf8')
submission.set_payload(open('submission_set.xml', 'rb').read())
related.attach(submission)

document = MIMEText('text', 'plain')
document.set_payload(open('document.txt', 'rb').read())
related.attach(document)

body = related.as_string().split('\n\n', 1)[1]
headers = dict(related.items())

r = requests.post(url, data=body, headers=headers) 
```

我假设 XML 文件使用 UTF-8，您可能还想为`document`条目设置一个字符集。

`requests`只知道如何创建`multipart/form-data`帖子正文；不`multipart/related` 常用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-12-06T20:25:09.883

我正在使用`requests`Google Drive API“分段”上传。

该`email.mime`解决方案不适用于 Google 的 API，因此我深入研究了`requests`源代码以了解它是如何实现`multipart/form-data`主体的。

`requests`使用`urllib3.filepost.encode_multipart_formdata()`帮助器，它可以被包装以提供`multipart/related`：

```
from urllib3.filepost import encode_multipart_formdata, choose_boundary

def encode_multipart_related(fields, boundary=None):
    if boundary is None:
        boundary = choose_boundary()

    body, _ = encode_multipart_formdata(fields, boundary)
    content_type = str('multipart/related; boundary=%s' % boundary)

    return body, content_type 
```

现在我们可以`encode_multipart_related()`用来创建一个`(body, content_type)`符合 Google 要求的元组：

```
import json
from urllib3.fields import RequestField

def encode_media_related(metadata, media, media_content_type):
    rf1 = RequestField(
        name='placeholder',
        data=json.dumps(metadata),
        headers={'Content-Type': 'application/json; charset=UTF-8'},
    )
    rf2 = RequestField(
        name='placeholder2',
        data=media,
        headers={'Content-Type': media_content_type},
    )
    return encode_multipart_related([rf1, rf2]) 
```

这是一个完整的示例，它使用我们`encode_media_related()`的库将 hello world 文件上传到 Google Drive `google_auth`。

```
from google.oauth2 import service_account
import google.auth.transport.requests

credentials = service_account.Credentials.from_service_account_file(
    PATH_TO_SERVICE_FILE,
    scopes=['https://www.googleapis.com/auth/drive.file'],
)
session = google.auth.transport.requests.AuthorizedSession(credentials)

metadata = {
    'mimeType': 'application/vnd.google-apps.document',
    'name': 'Test Upload',
}
body, content_type = encode_media_related(
    metadata,
    '<html><body><p>Hello World!</body></html>',
    'text/html; charset=UTF-8',
)
resp = session.post(
    'https://www.googleapis.com/upload/drive/v3/files',
    data=body,
    params={'uploadType': 'multipart'},
    headers={'Content-Type': content_type},
)

print 'Uploaded to file with id: %s' % resp.json()['id'] 
```

# objective-c - iOS Facebook SDK - 如何过滤页面的特定类别？

> ID：15746566
> 
> 赞同：1
> 
> 时间：2013-04-01T15:42:16.383
> 
> 标签：objective-c, facebook-graph-api

我尝试查找特定类别的用户页面，例如“服装”或“作者”。我唯一的方法是从 Graph API Explorer 查询整个“我/喜欢”，例如 [http://developers.facebook.com/tools/explorer?method=GET&path=me%2Flikes](http://developers.facebook.com/tools/explorer?method=GET&path=me%2Flikes)然后尝试按“类别”过滤.

但是如果用户的页面超过 100 个并且需要对其进行分类，结果可能会很大。我尝试查找 FQL，但根据 FQL 表架构，它没有提供过滤它的方法，因为“类型”不是可索引的值。结果： http: [//developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/?fql=SELECT%20name%2C%20about%2C%20description%20FROM%20page%20WHERE%20type%20%3D%20) ?fql=SELECT%20name%2C%20about%2C%20description%20FROM%20page%20WHERE%20type%20%3D%20 'PUBLIC%20FIGURE'

参考文档：http: [//developers.facebook.com/docs/reference/fql/page](http://developers.facebook.com/docs/reference/fql/page)

有什么建议或想法吗？

# svn - SVN 维护开发、质量保证和生产分支

> ID：15746569
> 
> 赞同：1
> 
> 时间：2013-04-01T15:42:21.977
> 
> 标签：svn, tortoisesvn, branching-and-merging

我和我的团队在工作中开发了一个项目管理系统，我们有标题中描述的三个环境。我们开始遇到一个问题，我们需要将小的代码修复推送到生产中，但是我们一直在为我们正在引入的新团队进行开发。我们显然不希望新团队的未经测试的代码进入并挑选出微小的变化是一种痛苦。

我知道我们需要沿着分支线做一些事情，并且我已经阅读了 tortoise 的常见问题解答，我很确定我理解它。

我的问题是，在我们的生产服务器上，我们是否能够从某个已提交的包含小代码修复的分支进行更新？

**编辑**：在我们所有的服务器（Dev、QA、Prod）上，我们检查了存储库，因此更容易推送更新。如果我在本地副本上创建一个分支，然后将其合并到主干中，那么我是否可以将该分支合并到生产的本地副本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:32:47.623

好吧，理论上，使用“每个功能分支”工作流程，没有什么会阻止你

*   在 repo 中有单独的 DEV|QA|PROD 分支（或使用主干作为 DEV，少一个分支）
*   为任务创建单独的分支（fe FEAT_X）
*   将 FEAT_X 合并到*任意*数量的目标分支中（不要合并到某些分支中）并稍后从合并到的分支中更新服务器的WC

但：

**谨防！**您可能（在*某些情况下）成为*[跨分支合并](https://stackoverflow.com/questions/15221544/svn-merge-tree-conflict-wierd)中奇怪的合并错误的受害者

# javascript - 为什么我没有以编程方式为 span 生成边框底部

> ID：15746571
> 
> 赞同：1
> 
> 时间：2013-04-01T15:42:34.043
> 
> 标签：javascript, jquery, css

对于“缩进”类的 s，我希望`<span>`底部边框是缩进水平的乘数倍，而 #808080 或黑色用于交替缩进深度。

我尝试执行此操作的代码是：

```
if (maximum_parenthesis_count > SPAGHETTI.maximum_underline_so_far)
{
    for(var outer = SPAGHETTI.maximum_underline_so_far; outer <= maximum_parenthesis_count; ++outer)
    {
        var identifier = '';
        for(var inner = 0; inner < outer; ++inner)
        {
            if (identifier)
            {
                identifier += ' span.indent';
            }
            else
            {
                identifier = 'span.indent';
            }
        }
        console.log('jQuery');
        console.log(identifier);
        console.log(outer + 'px solid black;');
        jQuery(identifier).css('border-bottom', outer + 'px solid black;');
    }
    SPAGHETTI.maximum_underline_so_far = maximum_parenthesis_count;
} 
```

Chrome 中的 console.log 语句似乎我应该得到我想要的，模数交替音调：

```
jQuery spaghetti.js:134
span.indent spaghetti.js:135
1px纯黑色；spaghetti.js:136
jQuery spaghetti.js:134
span.indent span.indent spaghetti.js:135
2px纯黑色；

```

但是，嵌套跨度的底部没有显示任何边框，我想知道我是否已经取消了`jQuery.css()`通话。我可以在静态样式表中获得最多 n 行的结果，但我的目的是为生成的缩进级别提供更深、更厚的边框。

当我使用 Chrome 的检查器时，它识别（例如）两个级别的嵌套 span.indent，但右侧的 CSS 规则列表不显示任何指示底部边框的内容。console.log 语句似乎表明代码已被执行，但`jQuery(identifier).css('border-bottom', outer + 'px solid black;');`似乎无影无踪。

我怎样才能修改它，以便在这个例子中，外部`span.indent`有一个 1px 纯黑色底边框，而内部`span.indent`有一个 2px 纯黑色底边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:53:43.907

尝试这个

```
if (maximum_parenthesis_count > SPAGHETTI.maximum_underline_so_far)
{
    for(var outer = SPAGHETTI.maximum_underline_so_far; outer <= maximum_parenthesis_count; ++outer)
    {
        var identifier = 'span.indent';
        console.log('jQuery');
        console.log(identifier);
        console.log(outer + 'px solid black');
        jQuery(identifier).css('border-bottom', outer + 'px solid black');
        // jQuery automatically matches all identifiers like span.indent
    }
    SPAGHETTI.maximum_underline_so_far = maximum_parenthesis_count;
} 
```

**检查**您的页面`span.indent element`是否**有**.

要检查这一点，您可以使用此代码

```
alert(jQuery('span.indent').length); 
```

在里面`if condition`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:51:23.447

工作示例：http: [//jsfiddle.net/hVbtz/7/](http://jsfiddle.net/hVbtz/7/)

```
var outer = 1;
var borderString = outer +  'px solid black';
$("#one").css("border-bottom", borderString); 
```

您不需要`;`在 css 调用中

# html - img 获得超大窗户

> ID：15746575
> 
> 赞同：1
> 
> 时间：2013-04-01T15:42:38.043
> 
> 标签：html, image, css

请看看这个[jsfiddle](http://jsfiddle.net/jkkhh/)

```
<!DOCTYPE html>
<html lang='en'>
<head> 
    <style>
        body { height: 100%; margin: 0; padding: 0;}
        div { height: 100%; width: 100%; position: absolute; top: 0px; left: 0px; background: black;}
        img { height: 100%;}
    </style>
</head>

<body>
    <div><img src='https://upload.wikimedia.org/wikipedia/commons/8/85/Smiley.svg'></div>
</body>
</html> 
```

即使将 和 都设置为 100% 的高度，底部仍然几乎没有多余的空间导致滚动条。有谁知道是什么导致了这个空间？

我只想知道行为。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:48:39.373

该`img`标签是一个内联标签，您看到的额外空间是由于这个原因。添加`display:block`到图像的样式。

# xcode - 不小心删除了xcodeproj文件，怎么办？

> ID：15746577
> 
> 赞同：0
> 
> 时间：2013-04-01T15:42:41.883
> 
> 标签：xcode

正如标题所述，我不小心删除了我的 xcodeproj 文件。我基本上是在尽一切可能阻止 xcode 将我的项目的缓存版本加载到我的设备上。

我能做些什么？我显然不能再在 XCode 中打开我的项目，我该如何重建这个文件？

# mysql - 根据我的情况选择某行

> ID：15746579
> 
> 赞同：0
> 
> 时间：2013-04-01T15:42:45.043
> 
> 标签：mysql

我有下表：

```
| 编号 | 产品编号 | 价格 | 集团 |
| 1 | 123123 | 100 | 1 |
| 2 | 123123 | 200 | d845f |
| 3 | 91123 | 150 | 1 |
| 4 | 2131238 | 100 | 1 |
| 4 | 5678689 | 250 | 1 |

```

所以我想选择 group 所在的所有价格`IN (1, 'd845f')`。对于其中一些只有一行输出，例如

```
| 3 | 91123 | 150 | 1 |

```

但对于某些人来说，有两行：

```
| 1 | 123123 | 100 | 1 |
| 2 | 123123 | 200 | d845f |

```

我用类似的东西进行选择

```
SELECT * FROM table WHERE `group` IN (1, 'd845f') 

```

where`1`和`d845f`是我在 PHP 中指定的设置参数。
所以总是有一行`group = 1`，但可以选择第二行，就像上面的例子一样，`'d845f'`我的 IN 选项中的 group 。
因此，当我有两行时，我希望 MySQL 只显示其中之一：带有`'d845f'`.
那么我该怎么做呢？
我想获得所有带有`group = 1`参数的产品，但是当`group = 'd845f'`我只想获得一行时： with `group = 'd845f'`。
我也想在没有嵌套 SELECT 的情况下这样做（允许加入）。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:00:54.923

如果我正确理解了您的问题，您需要检查 product_id 中是否有一个包含 d845f 的组，如果有，请使用它而不是 1 的组。

这应该有效：

```
SELECT T.*
FROM TableName T
  JOIN (
    SELECT Product_Id, 
      MAX(IF(`GROUP`='d845f','d845f','1')) whichGroup
    FROM TableName T
    WHERE   `GROUP` IN ('1','d845f')
    GROUP BY Product_ID
    ) T2 ON 
      T.Product_Id = T2.Product_Id AND T.`GROUP` = T2.whichGroup 
```

使用检查来查看该特定产品是否存在记录`MAX`。`IF`然后将这些结果加入原始表中。

[SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/d0466/7)（借用以前的海报）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:45:15.813

这个问题叫做`Relational Division`.

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  product_ID
            FROM    tableName
            WHERE   `GROUP` IN ('1','d845f')
            GROUP   BY product_ID
            HAVING  COUNT(DISTINCT `GROUP`) = 2
        ) b ON a.product_ID = b.product_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d0466/1)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

输出

```
╔════╦════════════╦═══════╦═══════╗
║ ID ║ PRODUCT_ID ║ PRICE ║ GROUP ║
╠════╬════════════╬═══════╬═══════╣
║  1 ║     123123 ║   100 ║ 1     ║
║  2 ║     123123 ║   200 ║ d845f ║
╚════╩════════════╩═══════╩═══════╝ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T15:44:46.133

您可以使用带有 LIMIT 的 CASE 语句

```
SELECT group, product_id, price, id
FROM table 
WHERE group IN (1, 'd845f')
ORDER BY CASE WHEN group = 'd845f' THEN 0 ELSE 1 END
LIMIT 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T16:45:41.950

这是一个简单的

```
SELECT
  a.id,
  a.product_id,
  a.price,
  a.`group`
FROM
  tablename a
  LEFT JOIN tablename b ON ( a.product_id = b.product_id
                       AND a.`group` <> b.`group` )
WHERE
  b.`group` IS NULL 
  OR length(a.`group`) > length(b.`group`) 
```

**注意：**我没有添加组存在的条件，`d845f`因为我怀疑可能有 2 条相同的记录`product_id`具有不同的组。查询获取组中最大的行值

# button - 未定义的 innerHTML（尝试刷新时）

> ID：15746580
> 
> 赞同：0
> 
> 时间：2013-04-01T15:42:54.247
> 
> 标签：button, undefined, innerhtml, random-access, partial-page-refresh

大家好，我正在尝试制作一个随机生成器，但我不想刷新整个页面以获取新字符串，所以我认为也许**innerHTML**可能是我的解决方案。不幸的是，当我单击**按钮时，它给了我一个“****未定义**”的结果。我不知道该怎么做。提前致谢。

 **```
<span id="generator" style="font-size: 20px; font-weight: bold;">
<script language="javascript" type="text/javascript">

Words1 = new Array("blablabla1","blablabla2")
Words2 = new Array("blablabla3","blablabla4")
var random = document.write('- ' +
Words1[Math.floor((Math.random() * 100000) % Words1.length)] +
' ' +
Words2[Math.floor((Math.random() * 100000) % Words2.length)] +
'.\n' );

function refresh(){ 
    document.getElementById('generator').innerHTML = random;
}
</script>
</span>

<input type='button' onclick='refresh()' value='refresh'/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:49:27.980

您正在使用 span 标签包装 javascript 代码。应该是这样的，把代码放在de函数里面：

```
 <span id="generator" style="font-size: 20px; font-weight: bold;"></span>
    <script language="javascript" type="text/javascript">

    function refresh(){ 
  Words1 = new Array("blablabla1","blablabla2")
    Words2 = new Array("blablabla3","blablabla4")

    var random = document.write('- ' +
    Words1[Math.floor((Math.random() * 100000) % Words1.length)] +' ' + Words2[Math.floor((Math.random() * 100000) % Words2.length)] +'.\n' );
        document.getElementById('generator').innerHTML = random;
    }
    </script>

    <input type='button' onclick='refresh()' value='refresh'/> 
```**

# jquery - 带有数据主题 b 的 webapp 中的透明标头

> ID：15746581
> 
> 赞同：0
> 
> 时间：2013-04-01T15:42:56.370
> 
> 标签：jquery, jquery-mobile

我的*jQuery Mobile 1.3.0*应用程序在 Safari Mobile 中完美运行。但是，当它通过 iOS 6 上的主屏幕作为 web 应用程序运行时，我得到了一个烦人的透明标题，而不是我要求的数据主题 b：

```
<div data-role="page" id="test" data-add-back-btn="false">

        <div class="app-logo">
        <a data-direction="reverse" href="#index"><img src="/img/logo.png" /></a>
    </div>
    <div data-role="header" data-theme="b">
        <a data-rel="back" data-direction="reverse" class="ui-btn-left" data-icon="arrow-l">Back</a>
        <h1>Test</h1>
        <a href="#index" data-icon="home" data-direction="reverse" class="ui-btn-right jqm-home">Home</a>
    </div>

    <div data-role="content" data-theme="c">
    <ul id="test-menu" data-role="listview" data-inset="false" data-filter="false">
        <li><a href="#test1">Test 1</a></li><li><a href="#test2">Test 2</a></li>    </ul>
    </div>

        <div data-role="footer" data-theme="b" class="ui-bar">
        <div style="text-align: center;">
        <a href="http://google.ca" data-role="button" data-icon="grid">Full Site</a>
        </div>
    </div>
</div> 
```

我附上了两个屏幕截图。一个应用程序通过主屏幕作为 web 应用程序运行，但显示不正确，一个在 Safari Mobile 中运行，显示正确，因此您可以看到行为。请注意，为了匿名，我已将实际文本涂白。有没有人遇到过这样的事情？这是一个主要的烦恼。

同样，这是 JQuery Mobile 1.3.0。在早期版本中没有出现。

![作为 web 应用程序运行](https://i.stack.imgur.com/E8ckX.png)

![在 Safari 中运行](https://i.stack.imgur.com/7VWBj.png)

# python - 如何读取 pdb 文件并使用 python 执行基于 FFT 的对接？

> ID：15746590
> 
> 赞同：0
> 
> 时间：2013-04-01T15:43:20.247
> 
> 标签：python, numpy, fft, dft

假设我有两个 PDB 文件（其中一个如下）

```
ATOM      1  N   MET A   1      66.104  56.583 -35.505  
ATOM      2  CA  MET A   1      66.953  57.259 -36.531  
ATOM      3  C   MET A   1      67.370  56.262 -37.627  
ATOM      4  O   MET A   1      67.105  55.079 -37.531  
ATOM      5  CB  MET A   1      68.227  57.852 -35.867  
ATOM      6  CG  MET A   1      67.848  58.995 -34.899  
ATOM      7  SD  MET A   1      66.880  58.593 -33.421  
....      .  ..  ... .   .      ......  ......  ......
....      .  ..  ... .   .      ......  ......  ...... 
```

可以使用以下脚本在 python 中读取此文件。

```
import sys
x=[];y=[];z=[]
res=[]
Nr=0
for fn in sys.argv[1:]:
   f=open(fn,'r')
   while 1:
      line=f.readline()
      if not line: break
      if line[0:6]=='ATOM  ' :
         rx=float(line[30:38]);ry=float(line[38:46]);rz=float(line[46:54])
         if line[21]=='A' :
            x.append(rx); y.append(ry); z.append(rz)
            Nr=Nr+1
            res.append(line[17:20])
   for i in range(1,Nr-1):
      print fn, i, res[i], x[i], y[i], z[i]
f.close 
```

现在我想生成`N*N*N`维度网格并旋转和平移网格上的分子。旋转和平移可以通过使用 FFT（快速傅里叶变换）来完成。

我试着写如下

```
import numpy as np
import fftw as fft

class Grid3D(object):

   def __init__(self, grid_dimension):
      x = y = z = grid_dimension
      self.grid = np.zeros([x, y, z], dtype=float) 
```

这一切实际上是为了使用 3d 网格和 FFT 对两个分子进行对接。我想知道如何进一步或更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:53:25.603

第一个问题的答案，**“如何读取 pdb 文件”**

如果你想最终得到一个 numpy 数组，你可以使用`numpy.genfromtxt`它非常好，并且比循环阅读更容易实现和使用。它对文件间距等也更加健壮。

```
import numpy as np
data = np.genfromtxt('filename.txt',
        names = 'ATOM,index,res,MET,A,count,x,y,z',
        dtype=['S4',int,'S2','S3','S1',int,float,float,float]) 
```

现在`data`是一个 numpy “结构化数组”，可以按如下方式轻松访问：

```
In [13]: data
Out[13]: 
array([('ATOM', 1, 'N', 'MET', 'A', 1, 66.104, 56.583, -35.505),
       ('ATOM', 2, 'CA', 'MET', 'A', 1, 66.953, 57.259, -36.531),
       ('ATOM', 3, 'C', 'MET', 'A', 1, 67.37, 56.262, -37.627),
       ('ATOM', 4, 'O', 'MET', 'A', 1, 67.105, 55.079, -37.531),
       ('ATOM', 5, 'CB', 'MET', 'A', 1, 68.227, 57.852, -35.867),
       ('ATOM', 6, 'CG', 'MET', 'A', 1, 67.848, 58.995, -34.899),
       ('ATOM', 7, 'SD', 'MET', 'A', 1, 66.88, 58.593, -33.421)], 
      dtype=[('ATOM', 'S4'), ('index', '<i8'), ('el', 'S2'), ('MET', 'S3'), ('A', 'S1'), ('count', '<i8'), ('x', '<f8'), ('y', '<f8'), ('z', '<f8')])

In [14]: data['x']
Out[14]: array([ 66.104,  66.953,  67.37 ,  67.105,  68.227,  67.848,  66.88 ])

In [15]: data['y']
Out[15]: array([ 56.583,  57.259,  56.262,  55.079,  57.852,  58.995,  58.593])

In [16]: data['index']
Out[16]: array([1, 2, 3, 4, 5, 6, 7])

In [17]: data[3]
Out[17]: ('ATOM', 4, 'O', 'MET', 'A', 1, 67.105, 55.079, -37.531) 
```

# spring - 如何在bean方法中获取标头值

> ID：15746599
> 
> 赞同：3
> 
> 时间：2013-04-01T15:43:50.950
> 
> 标签：spring, spring-integration

我有自定义 bean，我在 spring 集成流程中使用它。它具有将 hashmap 作为参数的方法，其值是动态设置的。我正在尝试从有效负载标头字段（iploc）中设置值，但我无法做到这一点。我尝试了一些拼写组合，但它不起作用。任何指针？

```
<int:transformer id="ws.transformer"
    input-channel="ws.transformer.in" output-channel="ws.transformer.out">
    <bean class="com.my.Mybean">
        <property name="map">
            <map>
                <entry key="user">
                    <value>"admin"</value>
                </entry>
                <entry key="location">
                    <value>"headers['iploc']"</value>
                </entry>            
            </map>
        </property>
    </bean>
</int:transformer> 
```

我也可以在服务激活器中设置值，但我正在尝试是否在 SI 配置本身中实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-25T20:49:41.100

Spring Integration Transformer 可以消耗整个`Message`（有效负载和标头），因此没有必要通过属性传递标头值，因为转换器已经可以访问所有消息标头。

您的转换器 bean 定义应该只包含这些不是来自`Message`被转换的属性：

```
<int:transformer id="ws.transformer" input-channel="ws.transformer.in" output-channel="ws.transformer.out">
  <bean class="com.my.MyTransformer">
    <property name="user" value="admin"/>                    
  </bean>
</int:transformer> 
```

还有你的变压器方法：

```
@Transformer
OutgoingPayload transform(IncomingPayload payload, @Header("iploc") String iplocHeader) {
    return doTransform(...);
} 
```

或者只是消费整个消息：

```
Message<OutgoingPayload> transform(Message<IncomingPayload> message) {
  final String ipLocHeaderValue = message.getHeaders.get("iploc", String.class);
  return doTransform(...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:17:23.310

The bean defined within a transformer like that will be instantiated at startup time, not each time a message is received. The normal way to handle a requirement like this is to have a stateless bean with a method that accepts the header value upon each invocation.

# javascript - 我应该在哪里存储网络服务的密码？

> ID：15746601
> 
> 赞同：1
> 
> 时间：2013-04-01T15:43:52.327
> 
> 标签：javascript, passwords, client-side

我正在开发一个静态网站，它可以访问一些使用基本 HTTP 身份验证的数据的 Web 服务。我想向用户询问一次凭据，然后在静态站点的多个页面中使用这些凭据。

我试图找出以合理的安全性存储密码的位置。Cookie 和本地存储本质上是不安全的，即使我加密了数据（密钥仍然在 Javascript 代码中）。会话变量（即[sessvars](http://www.thomasfrank.se/sessionvars.html)）似乎更糟。

我真的很想避免为此使用服务器，因为我不需要服务器来处理其他任何事情。

我唯一能想到的是将整个站点构建为单个 HTML 页面并将密码存储在封闭变量中。即使它足够安全（我对此表示怀疑），它仍然需要用户在每次访问页面时输入密码，因此并不理想。

有任何想法吗？

# mysql - MySQL：按日期间隔进行级联过滤

> ID：15746602
> 
> 赞同：0
> 
> 时间：2013-04-01T15:43:55.123
> 
> 标签：mysql, dateinterval

任何人都可以帮助我进行此类查询。

我有：

*   `posts`桌子
*   `comments`桌子

它们通过`comments.post_id = posts.post_id`列链接。

我用户可以按过去的评论过滤帖子：

*   1小时
*   24小时
*   2天等。

如果用户选择显示过去 1 小时的帖子，但在此期间没有帖子，我们需要逐步进行：

为过去选择帖子`1 hour`，如果为空 - 为过去`24 hours`，如果为空 - 为过去`2 days`，如果为空 - 自成立以来（无任何条件）。

谁能帮我建立这样的查询？

**UPD**

“按评论过滤帖子”是指按评论数排序。

所以实际上目标是请求*“显示按过去 XXX 小时内留下的评论数排序的帖子”*。

如果选择“过去一小时”，但过去 1 小时内没有留下评论的帖子，我们需要获取过去 24 小时内留下评论的帖子（按评论数排序）等等。

> **表结构**
> 
> 帖子：
> 
> *   post_id
> *   标题
> *   内容
> *   添加日期
> 
> 评论
> 
> *   comment_id
> *   内容
> *   post_id
> *   添加日期

所以链接是`posts.post_id = comments.post_id`。

当用户查看过去一小时内评论最多的帖子时，我希望得到下一个结果：

```
 posts.post_id | comments_count | posts.date_added | group
---------------+----------------+------------------+----------------
           156 |              8 |       2013-04-02 | hour
           154 |              3 |       2013-04-02 | hour
           129 |              1 |       2013-03-10 | 24 hours
           13  |             14 |       2013-02-18 | 48 hours
           138 |              6 |       2013-03-29 | week
           137 |              4 |       2013-03-29 | week
           161 |             21 |       2013-04-11 | month
           6   |              2 |       2013-01-24 | year
           103 |              8 |       2013-03-02 | since inception 
```

结果排序：

1.  列表顶部是在过去一小时内发表评论的 2 个帖子，并按评论数排序。
2.  接下来，我们放置在过去一天已发表评论的帖子。
3.  下一个 — 2 天内评论的帖子
4.  上周发表评论的帖子，再次按评论数排序
5.  过去一个月
6.  在过去的一年
7.  在这个列表的最后，我们需要放置评论超过一年的文章，它们也应该按评论数排序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:57:38.413

计算每个组的最新评论。然后使用它来选择您想要的组。您可以使用子查询进行此计算：

```
select p.* c.*
from posts p join
     comments c
     on p.post_id = posts.post_id join
     (select post_id, max(postdate) as postdate
      from comments
      group by post_id
     ) cmax
     on cmax.post_id = p.post_id
where (case when timestampdiff(minute, now(), cmax.timestamp) <= 60
            then timestampdiff(minute, now(), c.timestamp) <= 60
            when  timestampdiff(minute, now(), cmax.timestamp) <= 60*24
            then timestampdiff(minute, now(), c.timestamp) <= 60*24
            . . .
      ) 
```

时间比较的语法取决于值是存储为时间戳还是日期时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:12:57.663

如果您想要过去一小时的前 5 个帖子，假设您的 date_added 字段是时间戳，您可以使用：

```
SELECT   post_id,
         count(comment_id) as comments_count,
         posts.date_added, 'hour' as grouptime
FROM     posts
INNER JOIN comments
ON       posts.post_id = comments.post_id
WHERE    TIMESTAMPDIFF(HOUR, comments.date_added, NOW()) = 0
GROUP BY posts.post_id
ORDER BY count(comment_id) DESC
LIMIT 5 
```

如果您想要所有这些，只需删除 LIMIT。过去 24 小时：

```
SELECT   post_id,
         count(comment_id) as comments_count,
         posts.date_added, '24 hours' as grouptime
FROM     posts
INNER JOIN comments
ON       posts.post_id = comments.post_id
WHERE    TIMESTAMPDIFF(HOUR, comments.date_added, NOW()) < 24
GROUP BY posts.post_id
ORDER BY count(comment_id) DESC
LIMIT 5 
```

等等不同的时间段。

如果您想一次性获得所有这些，请在这些查询之间使用 UNION。

# database - NOSQL GetByKey 和订单

> ID：15746606
> 
> 赞同：1
> 
> 时间：2013-04-01T15:44:11.610
> 
> 标签：database, performance, nosql, berkeley-db

现在我的架构是基于 Berkeley DB 的，但是性能不好，集群也不容易。

我正在寻找一个 NOSQL 数据库来存储可聚类的键/值数据，并且在获取下一个键排序和按键获取方面具有最佳性能。

RAM 或持久性存储对我来说没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T14:40:53.107

检查此问题以获取提示：[分层、有序、键值存储？](https://stackoverflow.com/questions/7450684/hierarchical-ordered-key-value-store)

此外，还有一个 Google 项目看起来很有希望：[https](https://code.google.com/p/leveldb/) ://code.google.com/p/leveldb/ - 我没有使用它，我只是发现它正在寻找类似的 NoSQL DB 引擎。

# php - Apache 2.4.3 和 PHP 5.4.7 上的 PHP 语法错误（foreach 模板语法）

> ID：15746609
> 
> 赞同：3
> 
> 时间：2013-04-01T15:44:19.377
> 
> 标签：php, apache, syntax, syntax-error

因此，我目前有一个在 Apache 2.2 和 PHP 5.3.18 上实时运行的站点，它按预期运行。我刚刚建立了一个新的开发环境，并决定启动 Apache 2.4 和 PHP 5.4.7 来试用它们（功能版本不应该破坏我的假设）。

无论如何，现在在我的生产服务器上执行良好的以下代码正在输出以下错误：

```
PHP Parse error:  syntax error, unexpected 'endforeach' (T_ENDFOREACH) in C:\xampp\htdocs\mysite\application\views\header_subnav.php on line 17 
```

有什么新的东西我错过了，或者配置不好还是什么？

代码：

```
<nav class="header_subnav">
                <div class="subnav_item_wrapper">
                    <a href="<?php echo URL::site(); ?>">Home</a>&nbsp;&#8594;&nbsp;
                </div>
                <?php $i = 0; ?>
                <?php foreach($subnav as $subnav_text => $subnav_uri): ?>
                        <?php if($i === count($subnav) - 1): ?>
                            <div class="subnav_item_wrapper">   
                                <?php echo $subnav_text; ?>
                            </div>
                            <?php break; ?>
                        <? endif; ?>
                        <div class="subnav_item_wrapper">
                            <a href="<?php echo URL::site($lang.'/'.$subnav_uri); ?>"><?php echo $subnav_text; ?></a><?php if($i !== count($subnav) - 1) echo '&nbsp;&#8594;&nbsp;'; ?>
                        </div>
                    <?php $i++; ?>
                <!-- LINE 17 -->
                <?php endforeach; ?>
            </nav> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:45:55.137

您的 endif 上的短标签：

```
<? endif; ?> 
```

应该

```
<?php endif; ?> 
```

# core-plot - Coreplot：轴标签固定位置

> ID：15746619
> 
> 赞同：0
> 
> 时间：2013-04-01T15:45:02.063
> 
> 标签：core-plot

我正在尝试以多种方式自定义 Coreplot 图，接下来我想做的是将 X 轴标签（也是自定义的标签）放在图的底部，独立于 X 轴'位置（无论是向上还是向下滚动）。

为了清楚起见，它类似于给标签一个类似 50.0 的偏移值。但是 offset 不是我要寻找的属性，因为它固定了相对于 X 轴的标签位置。

有什么办法可以做到这一点？或者我是否必须`axisLabels`在图表底部手动跳过属性和位置和图层或其他内容？

编辑：好的，我设法在底部放置了一个轴`CPTConstraints`。但它不在最底层。如果绘图点位于这些级别上，则绘图线与标签重叠。我厌倦了图表的填充，但当然，它移动了整个图表，因此问题仍然存在。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:47:32.690

制作第二个 x 轴。让第一个画出轴线、刻度线等，正常但没有标签。标记第二个并将所有线条样式属性设置为`nil`，使其不绘制任何线条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:55:07.573

事实证明，除了图表之外， 的`plotAreaFrame`属性`CPTGrpah`也有填充。如果您提供的填充`plotAreaFrame`比 的填充多`graph`，则绘图将在较小的框架中绘制，而图形区域的其余部分将供您添加所需的内容（即第二个轴）。

非常感谢@Eric，他试图尽快回答每一个 CorePlot 问题。

CorePlot 确实比我想象的有很多定制。

# axapta - 如何获得汇率？

> ID：15746620
> 
> 赞同：0
> 
> 时间：2013-04-01T15:45:06.973
> 
> 标签：axapta

我有一个使用 SalesLine 表的查询，我需要获取汇率。我在 CUSTTRANS 和 CUSTINVOICEJOUR 表中看到了汇率，但我看不到如何加入这些表。

任何人都可以帮助我进行 sql 连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:35:54.270

汇率可能比使用交叉货币三角测量等简单联接要复杂一些，但数据包含在 AX 2009 的表格中`ExchRates`。`Currency`

# mysql - 客户端的 WAMP MYSQL 或 MYSQL 服务？

> ID：15746622
> 
> 赞同：1
> 
> 时间：2013-04-01T15:45:15.820
> 
> 标签：mysql, .net, database, wamp

我们设计了一个使用 .NET 框架的应用程序。有一个客户端应用程序和一个服务器应用程序。客户端应用程序、网页、android/iphone 应用程序使用 WCF 服务从服务器获取数据。

我的问题是，用户可以在应用程序上设置的一些数据正在保存在服务器上，但一旦应用程序重新启动，就不能反映在客户端，我们设计应用程序的方式是客户端的每一个变化都会反映在服务器端，这样做是为了使它成为一个基于云的应用程序。

客户端的某些设置更改或值输入在服务器上成功更新，但没有反映在使用直接 MYSQL 服务的客户端计算机上。但是，使用 WAMP 作为 MYSQL 服务绝对没有问题，即使用 WAMP 服务器的客户端可以看到所做的更改。我们尝试过匹配版本，也尝试过独立 MYSQL 的新旧版本。防火墙设置似乎都很好。由于我们更喜欢在我们的客户机器上安装独立的 MYSQL over WAMP，如果您能对可能的问题有所了解，那就太好了。MYSQL 的初始配置和 WAMP MYSQL 的默认配置有什么区别。

因此，如果在这方面有任何特别要注意或调整的事情，那将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:49:04.313

我认为您的问题不会得到一个很好的答案，因为术语“WAMP”不是指特定的包，而是指任何包含 Windows 版本的 Apache、MySQL 和 PHP（有时是 Perl）的包PHP 的或除 PHP 之外的）。请参阅此链接以获取一些可用软件包的列表：

[http://en.wikipedia.org/wiki/Comparison_of_WAMPs](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)

这些包带有不同的 MySQL 标准配置。由于您没有说明您使用的是哪个 WAMP 包（和版本），因此无法知道它们的标准配置与普通 MySQL 安装有何不同（其中版本也很重要）

您是否尝试过`diff`在相应的配置文件上运行 a ？

# c# - c# Crystal Reports 调用

> ID：15746625
> 
> 赞同：-2
> 
> 时间：2013-04-01T15:45:21.410
> 
> 标签：c#, sql

我到处看了看，进行了大量研究，测试了许多不同的人的代码，但在尝试打开向报告发送两个参数的水晶报告时仍然遇到同样的问题。

每次打开它都会打开空白。我在查看器上点击刷新，它会询问参数并打开就好了。

我的代码在下面列出。我在最后期限。如果有人能看到这个并帮助我，我将不胜感激。经过数小时的研究，我迷失了方向。

```
 ReportDocument cryRpt = new ReportDocument();
        cryRpt.Load(@"C:\reports\myReport.rpt");
        cryRpt.SetDatabaseLogon("", "", "MyServer", "MyDB");
        ConnectionInfo c = new ConnectionInfo();
        c.ServerName = "MyServer";
        c.IntegratedSecurity = true;
        c.DatabaseName = "MyDB";

        CrystalDecisions.CrystalReports.Engine.Tables CrTables = cryRpt.Database.Tables;

        foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
        {
            CrystalDecisions.Shared.TableLogOnInfo crtableLogoninfo = CrTable.LogOnInfo;
            crtableLogoninfo.ConnectionInfo = c;
            CrTable.ApplyLogOnInfo(crtableLogoninfo);
        }

        cryRpt.SetParameterValue("@parmBeginDate", "01-01-2010");
        cryRpt.SetParameterValue("@parmEndDate", "03-30-2013");
        crystalReportViewer1.ReportSource = cryRpt;
        crystalReportViewer1.Refresh();
        crystalReportViewer1.Show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:45:11.777

如果您的报告有一个或多个子报告，就会发生这种情况。尝试重构将报告连接设置为方法。然后，您可以枚举子报表集合并为每个子报表设置连接信息。我也更喜欢直接设置**ConnectionInfo**对象。

```
foreach (ReportDocument subReport in report.Subreports)
{
    SetDatabaseConnectionInformation(subReport);
}

private void SetDatabaseConnectionInformation(ReportDocument report)
{
    ConnectionInfo connectionInfo = new ConnectionInfo();
    connectionInfo.AllowCustomConnection = true;
    connectionInfo.Type = ConnectionInfoType.SQL;
    connectionInfo.ServerName = MyServer;
    connectionInfo.IntegratedSecurity = (true or false);
    connectionInfo.UserID = MyUserName;
    connectionInfo.Password = MyPassword;
    foreach (Table table in report.Database.Tables)
    {
        TableLogOnInfo tableLogOnInfo = table.LogOnInfo;
        tableLogOnInfo.ConnectionInfo = connectionInfo;
        table.ApplyLogOnInfo(tableLogOnInfo);
    }
} 
```

此外，如果您有多个数据源，则需要设置**InternalConnectionInfo**类来单独设置不同数据源的连接信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:34:08.950

答案是在我将报告加载到 Crystalreportviewer 之后声明我的参数。然后刷新。之后效果很好。感谢您的帮助。

# ajax4jsf - a4j 支持：重新渲染在 IE10 中不起作用

> ID：15746627
> 
> 赞同：0
> 
> 时间：2013-04-01T15:45:35.320
> 
> 标签：ajax4jsf

我们在项目中使用 JSF 和 a4j。我们有如下代码。但是，reRender 在 IE 10 浏览器中不起作用。使用 IE 10 浏览器访问应用程序时，无法呈现 id 为“designDirectorId”的 div。有人可以帮忙吗？

```
<a4j:support event="onchange" ajaxSingle="true" immediate="true" actionListener="{applicationRequestHandler.regionChangeListner}"
reRender="designDirectorId" /> 
```

在此先感谢，文卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:40:15.400

我们完全有同样的问题。在 IE10 中打开兼容性视图时，一切又正常了。

现在，我们将通过在 html 的 de head 中添加 meta 标签来解决这个问题。

# .net - 命名空间“System.Environment”的替代方案？

> ID：15746628
> 
> 赞同：-1
> 
> 时间：2013-04-01T15:45:37.410
> 
> 标签：.net, vb.net

大家好，我在 VB.NET 中制作了一个程序，我使用了 4.5 中的 System.Environment 命名空间女巫，我在哪里找到了该命名空间的替代方案？我使用命名空间来“（GetFolderPath（SpecialFolder.ApplicationData）”谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:59:18.787

需要明确的是，`Environment`是命名空间中的一个类`System`。它本身不是命名空间。[Environment.GetFolderPath](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)方法从框架的1.1 版本开始就已经存在，因此除非您一直以回到 1.0 框架为目标，否则您不需要替代方法。如果是这种情况，我怀疑 API 调用将是您的最佳选择。如果是这样，请查看[SHGetFolderPath](http://pinvoke.net/default.aspx/shell32/SHGetFolderPath.html)函数。

# r - 在条 (geom_bar) 上水平居中误差条 (geom_errorbar)

> ID：15746631
> 
> 赞同：4
> 
> 时间：2013-04-01T15:45:45.053
> 
> 标签：r, ggplot2

如何将误差线定位在适当颜色条的中心？

```
df1 <- data.frame(
  supp = c("OJ","OJ","OJ","VC","VC","VC"),
  dose = c(0.5,1,2,0.5,1,2),
  len = c(13.23,22.7,26.06,7.98,16.77,26.14),
  se = c(1.41,1.27,0.84,0.87,0.8,1.52)
)

df1$dose <- factor(df1$dose)
ggplot(df1, aes(x=dose, y=len, fill=supp)) +      
geom_bar(stat="identity", position=position_dodge()) +  
scale_fill_manual(name = "", values = c("deepskyblue1", "green")) +
geom_errorbar(data = df1[1:3,], aes(ymin=len-se, ymax=len+se), width=.4, colour=c("deepskyblue1"), position=position_dodge(.9)) +
geom_errorbar(data = df1[4:6,], aes(ymin=len-se, ymax=len+se), width=.4, colour=c("green"), position=position_dodge(.9)) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T16:17:36.873

由于误差线的数据位于相同的数据框中，因此您不需要在其中提供参数`data=`，`geom_errorbar()`也不需要调用`geom_errorbar()`两次。

您应该提供 in`geom_errorbar()` `ymin`和in 的`ymax`值，in也`aes()`将确保误差条根据值着色。要获得与条形相同的颜色，请添加相同的颜色名称。通过参数，您可以在条形中心获得误差条。`color=supp``aes()``supp``scale_color_manual()``position=position_dodge(0.9)`

```
ggplot(df1, aes(x=dose, y=len, fill=supp)) +      
  geom_bar(stat="identity", position=position_dodge()) +  
  scale_fill_manual(name = "", values = c("deepskyblue1", "green")) +
  geom_errorbar(aes(ymin=len-se, ymax=len+se,color=supp), width=.4,
       position=position_dodge(.9))+
  scale_color_manual(name = "", values = c("deepskyblue1", "green")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/kiBRq.png)

# css - 如何让一张表格填满整个手机屏幕？

> ID：15746642
> 
> 赞同：0
> 
> 时间：2013-04-01T15:46:45.120
> 
> 标签：css, html, mobile, ibm-mobilefirst

我在**移动应用程序上使****表格**填满整个**屏幕**时遇到问题（目前，我仅在 Android 上实现它）。该页面仅包含此表，该表显然仅采用其内容的大小。我尝试在应用程序的几乎每个部分都使用并放置一个，但它不起作用。一个细节：**BODY**的 100% 是**功能性**的：背景颜色应用于整个屏幕；但我需要整个**TABLE**来拉伸。**`html, body { min-height: 100%}``height= 100%`**

 ******编辑：我正在使用 Eclipse，我使用 IBM Worklight Framework。

EDIT2：宽度正在工作。填充高度是问题。

EDIT3：欧文提供给我的视口设置有点令人困惑。它没有改变任何东西，但我觉得我不应该将它粘贴到我做的地方（主页.html）。代码 ：`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:03:50.637

此处示例：http: [//cssdesk.com/qEL2L](http://cssdesk.com/qEL2L)

```
html, body {
 height: 100%;
 padding:0;
 margin: 0;
}

table {
  height:100%;
  width:100%;
  background: red;} 
```

HTML：

```
<table>
  <tbody>
    <tr>
      <td>Test</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:51:42.943

将表格的宽度和高度设置为 100% 怎​​么样？表{宽度：100%；高度：100%}。******

# c# - 在 C# 中创建 html div

> ID：15746644
> 
> 赞同：0
> 
> 时间：2013-04-01T15:47:01.110
> 
> 标签：c#, asp.net, memory, html

我正在使用以下代码在 c# 中创建一个 html div

```
System.Web.UI.HtmlControls.HtmlGenericControl dynDiv =
        new System.Web.UI.HtmlControls.HtmlGenericControl("DIV");
            dynDiv.ID = "dynDivCode";
            dynDiv.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Gray");
            dynDiv.Style.Add(HtmlTextWriterStyle.Height, "20px");
            dynDiv.Style.Add(HtmlTextWriterStyle.Width, "300px");
            dynDiv.InnerHtml = "I was created using Code Behind";

            this.Controls.Add(dynDiv); 
```

但这并没有做任何事情，事实上它在最后一行给出了一个错误，即 dynDiv 不是一个有效的参数。我想在这里使用div来模拟缓存行和单词在缓存中的放置。请告诉我怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:51:02.233

您可以将 html 嵌入到文字控件中。

```
this.Controls.Add(new LiteralControl("<div style='color: gray; height: 20px; width: 300px;'>I was created using Code Behind</div>")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:49:28.900

使用**文字控制**

**HTML** （示例）

```
<asp:Panel ID="panel" runat="server"> </asp:Panel> 
```

**C＃**

//并根据需要创建样式

```
panel.Controls.Add(new LiteralControl("<div style='color: gray; height: 20px; width: 300px;'>I was created using Code Behind</div>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T16:13:54.000

我按照**Diogo Severiano**说的做了，而且效果很好。

在我的情况下，我需要将控件添加到 div 并且我不能使用文字控件，因为智能感知标记：“**控件不能添加到文字控件**”。

如果是这样，就照他的做。

`Label lblParaname = new Label(); lblParaname.Text = Record.Parameter_Name + ": "; lblParaname.ID = "lbl" + Record.Parameter_Name; lblParaname.EnableViewState = true; lblParaname.Attributes.Add("cssclass", "grid_3 alpha omega"); Panel pLblContainer = new Panel(); pLblContainer.CssClass = "grid_3"; pLblContainer.Controls.Add(lblParaname); pSubsPar.Controls.Add(pLblContainer);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:44:30.497

也许这会有所帮助： [在 Windows 窗体中将面板添加到 SplitContainer](https://stackoverflow.com/questions/10452600/adding-panels-to-splitcontainer-in-windows-forms)

```
 Panel panel = new Panel();
    Label lbl = new Label();
    public Form1()
    {
        InitializeComponent(); 
        panel.BackColor = Color.Gray;
        panel.Height = 20;
        panel.Width = 300;
        lbl.Text = "I was created using Code Behind";
        panel.Controls.Add(lbl);

        dynDiv.Panel1.Controls.Add(panel);
    } 
```

因为你说这就是你想要的

# stream - 计划中的流式练习

> ID：15746649
> 
> 赞同：-2
> 
> 时间：2013-04-01T15:47:25.377
> 
> 标签：stream, scheme

有一个答案如下。编写一个名为 avg3 的 Scheme 过程，它接受一个数字流，并生成一个数字流，其中包含输入流的三元组元素的平均值。例如，表达式 (avg2 s1to9) 产生流 2、5、8（s1to9 是从 1 到 9 的数字流）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:17:56.780

这*显然*是一项功课，如果您尝试自己解决问题，那将是一个更好的主意。我会给你一些提示，填空：

```
(define (avg2 stream)
  (if <???>            ; if the stream is null
      <???>            ; then return the null stream
      (stream-cons     ; else cons 
       (/ (+ <???>     ; add first element in stream
             <???>     ; with second
             <???>)    ; with third
          3)           ; and divide the addition by 3
       (avg2 <???>)))) ; advance the recursion, to the next 3 elements 
```

# wso2 - WSO2 修改正在运行的进程

> ID：15746658
> 
> 赞同：0
> 
> 时间：2013-04-01T15:47:53.843
> 
> 标签：wso2, business-process-management, wso2carbon

有没有办法在运行时（运行中）更改 WSO2 中的进程/组件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:05:20.783

I believe you are referring to altering java processes on fly. Unfortunately there is no such a way to achieve this.

If you can post ypur exact use case we might able to provide you a more fair feed back.

Thank You, Dharshana.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:53:16.557

您是指工件的热更新还是 WSO2 组件的更新？

# r - 在小数点前隐藏零

> ID：15746660
> 
> 赞同：1
> 
> 时间：2013-04-01T15:48:05.410
> 
> 标签：r

用R + Sweave写一篇文章，我希望隐藏小数点前的零以获得相关结果。例如，对于 的分数`0.85`，我希望将其显示为`.85`。或者如果分数是负数，例如`-0.85`，它应该显示为`-.85`。

现在我正在以一种非常丑陋的方式来做这件事，`substr(0.85, 2, 4)`用于正值和`paste("-", substr(-0.85, 3, 5), sep="")`负值。我做了一些功课，检查了基本包中的`format()`和等功能`formatC`，但似乎没有一个能满足我的需求。

所以我想知道是否有更简单的方法来隐藏 R 中小数点前的零？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:56:42.687

我会使用正则表达式：

```
sub('^(-)?0[.]', '\\1.', c(0.85, -0.85))
## [1] ".85"  "-.85" 
```

# asp.net-mvc-3 - MVC3 C# TextArea/CkEditor 验证问题

> ID：15746661
> 
> 赞同：1
> 
> 时间：2013-04-01T15:48:07.973
> 
> 标签：asp.net-mvc-3, validation, textarea, ckeditor

我有一个 MVC3 C# .Net Web 应用程序。我们正在使用 ckEditor 库来增强我们应用程序中的 TextAreas。使用标准 TextArea 时，Validation 会正确运行。但是，在增强的 TextAreas（实现 ckEditor）中，提交页面时，Validation 会触发错误。即使 TextArea 中存在数据，也需要“描述”。第二次单击提交后，表单提交正常。

域类属性：

```
[Display(Name = "Description")]
[Required(ErrorMessage = "Description is required.")]
public virtual string Description { get; set; } 
```

HTML：

```
 <td style="border: 0;text-align:left " >
        @Html.TextAreaFor(model => model.Description,
            new
            {
                rows = 5,
                cols = 100,
                @class = "celltext2 save-alert"
            })
            @Html.ValidationMessageFor(model => model.Description)
    </td> 
```

我认为应用 ckEditor 属性会以某种方式搞砸它。想法？`

让我再澄清一点。我们有一个 .js 文件来查询控件，然后进行 ckEditor 初始化。当我删除`$(this).ckeditor({})`它工作正常。

JS 文件：

```
$('textarea').each(function () {

    $(this).ckeditor({});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:04:41.487

我认为它比这更简单一些。CKE 创建了一个 iframe，它用于代替实际的 textarea，并且您确实需要在提交之前使用 CKEditor 中的数据更新 textarea 的内容。但是，我建议您在提交时而不是在模糊时执行此操作。我建议为相关的 DOM 元素设置一个 id，但你明白了。

```
// Replace textarea(s)
$('textarea').each(function () {
    $(this).ckeditor({});
});

// Bind on submit event to update the text
$('form').submit(function() {
    // Upate textarea value with the ckeditor data
    $('textarea').val(CKEDITOR.instances.ValueCKE.getData());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:12:44.310

像这样的东西可能会起作用：

```
$('textarea').each(function () {
    var textarea = $(this);
    $(this).ckeditor({}).on('blur', function() {
        textarea.html( $(this).html() );
    });
}); 
```

编辑（我从未使用过 jQuery 适配器，经过一小节课后我发现它可以工作，上面的模糊永远不会触发并且 $(this).html() 未定义）：

```
$('textarea').each(function () {
    var textarea = $(this);
    textarea.ckeditor(function () {
        textarea.ckeditorGet().on('blur', function () {
            textarea.html( this.getData() );
        });
    });
}); 
```

# c# - 用于实体的 linq 隐藏模型中的列

> ID：15746665
> 
> 赞同：1
> 
> 时间：2013-04-01T15:48:17.377
> 
> 标签：c#, sql-server, linq

我正在使用 linq 实体从 SQL 服务器读取和更新数据。该数据库是动态 NAV 数据库，每次有人更改数据库中的列时，我的应用程序都需要重新编译。

是否可以从 linq 中为实体忽略或隐藏数据库中的列，并且仍然可以使更新正常工作？假设一个表中有 100 列，而我只使用 10 列，当我更新一个值时——我希望剩余的 90 个值保留在行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:00:39.140

您可以告诉添加新列的人

1.  为较新的列允许 null
2.  或者添加一个默认约束，以便为较新的行自动添加一个好的默认值

这些中的任何一个都将允许 linq 正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:00:25.557

最好的方法是在您的数据库中创建一个自定义视图。如果您希望能够从该视图插入/更新/删除，您可以在视图上创建适当的触发器。Linq 将像对待任何其他表一样对待视图。

# jquery - 在图像上绘制对象并拖动图像

> ID：15746666
> 
> 赞同：2
> 
> 时间：2013-04-01T15:48:23.087
> 
> 标签：jquery, html, canvas, html5-canvas

我有一个像小地图的图像。我想做类似1\. 像[http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-an-image-tutorial/)
一样 拖动它 2\. 绘制一些对象（例如：线条，点）在图像上（图像拖动时附加图像的对象） 我尝试做一些事情，例如使用[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-label-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-label-tutorial/)等。但是当我拖动图像时它没有附加图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:54:04.953

您必须跟踪画布上的 mousedown 和 mouseup 事件。

*   在 mousedown 上获取鼠标坐标，使它们相对于画布，测试它们是否在您在画布上绘制的图像内（框内点）。
*   如果鼠标在图像内：在 mouseup 时，根据 mousedown 坐标和 mouseup 坐标之间的增量在画布上重绘图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:20:06.413

我看到您正在查看 KineticJS 示例。

这是一个如何在 KineticJS 中制作地图以及点和线的示例。使用这个库可能更容易上手，而不是单独学习在画布中拖动的复杂性。

在此示例代码中，请务必将 URL 放入您的地图，而不是 img1.src="yourMap.jpg"。

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {margin: 0px;padding: 0px;}
      canvas{border:1px solid red;}
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.0.min.js"></script>
    <script>

      var stage = new Kinetic.Stage({
        container: 'container',
        width: 500,
        height: 500
      });
      var layer = new Kinetic.Layer();

      var img1=new Image();
      img1.onload=function(){
          createDragMap();
      }
      img1.src="yourMap.jpg";

      function createDragMap(){

            var map = new Kinetic.Shape({
              drawFunc: function(canvas) {
                var context = canvas.getContext();

                // draw the map and a border around the map
                context.drawImage(img1,0,0);
                context.beginPath();
                context.rect(0,0,img1.width,img1.height);
                context.stroke(this);

                // add your points to the map here
                // for example...
                context.rect(23,67, 4,4);          
                context.rect(153,87, 4,4); 
                context.moveTo(23,67);
                context.lineTo(153,87);         

                // fill and stroke must be done last!
                canvas.fillStroke(this);
              },
              width: img1.width,
              height: img1.height,
              stroke:"blue",
              strokeWidth: 2,
              draggable:true
            });
            layer.add(map);
            stage.add(layer);
      }
    </script>
  </body>
</html> 
```

# javascript - 动态写在html页面上

> ID：15746672
> 
> 赞同：-1
> 
> 时间：2013-04-01T15:48:41.617
> 
> 标签：javascript

这是我用来在我的 html 页面上动态发布一行的代码，问题是当我刷新它时页面变空，我希望该行永久地写在页面上

```
 <html>
    <br><br>post a question <br>
    <br><br><textarea id="t"></textarea><br>
    <br><br><button id='a'>Post</button>
    <div id='updateDiv'></div>

    <script language= "javascript">
    function displayDate()
    {
    var comment = document.getElementById("t").value;
    var newParagraph = document.createElement('p');
    newParagraph.textContent = comment;
    document.getElementById("updateDiv").appendChild(newParagraph);
    document.getElementById("t").value = "";
    }

    document.getElementById("a").onclick = displayDate;
    </script>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:50:54.187

当您刷新页面时，它会向服务器发出整个页面的新请求。这意味着它会获得一个全新的标记副本，然后再次执行该脚本并添加一个空段落。无法更改浏览器刷新的这种行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:01:52.010

您要么需要使用服务器端语言来存储值，要么使用 localstorage 之类的东西。

使用本地存储的示例

```
(function() {

    var outDiv = document.getElementById("updateDiv");

    function displayDate () {
        var comment = document.getElementById("t").value;
        var newParagraph = document.createElement('p');
        newParagraph.textContent = comment;
        outDiv.appendChild(newParagraph);
        localStorage.setItem("data", outDiv.innerHTML);
        document.getElementById("t").value = "";
    }

    document.getElementById("a").onclick = displayDate;
    var str = localStorage.getItem("data");
    if (str) {
        outDiv.innerHTML = str;
    }

})(); 
```

[JSFiddle](http://jsfiddle.net/LDZPA/)

请记住，使用 localstorage 意味着它仅适用于该浏览器上的该用户。如果您希望更多人看到它，则需要使用服务器端解决方案。

# python - 如何编写 Python 模块/包？

> ID：15746675
> 
> 赞同：409
> 
> 时间：2013-04-01T15:48:53.197
> 
> 标签：python, python-2.7, python-module

我一直在为工作中的简单任务制作 Python 脚本，从来没有真正费心将它们打包以供其他人使用。现在，我被分配为 REST API 制作 Python 包装器。我完全不知道如何开始，我需要帮助。

**是）我有的：**

（只是想尽可能具体）我已经准备好[virtualenv](http://www.pythonforbeginners.com/basics/how-to-use-python-virtualenv/)，它也在[github](https://github.com/yowmamasita/pyfirefly)中，python 的 .gitignore 文件也在那里，另外还有用于与 REST API 交互的[请求库](https://requests.readthedocs.io/)。就是这样。

这是当前目录树

```
.
├── bin
│   └── /the usual stuff/
├── include
│   └── /the usual stuff/
├── lib
│   └── python2.7
│       └── /the usual stuff/
├── local
│   └── /the usual stuff/
└── README.md

27 directories, 280 files 
```

我什至不知道把 .py 文件放在哪里，如果我做过的话。

**我想做的事：**

使用“pip install ...”制作一个可安装的python模块

如果可能的话，我想要一个关于编写 Python 模块的一般一步一步的过程。

* * *

## 回答 #1

> 赞同：449
> 
> 时间：2013-04-01T16:24:12.950

模块是包含 Python 定义和语句的文件。文件名是带后缀的模块名`.py`

create`hello.py`然后编写以下函数作为其内容：

```
def helloworld():
   print "hello" 
```

然后你可以导入`hello`：

```
>>> import hello
>>> hello.helloworld()
'hello'
>>> 
```

要对许多`.py`文件进行分组，请将它们放在一个文件夹中。任何带有 an 的文件夹`__init__.py`都被 python 视为一个模块，您可以将它们称为包

```
|-HelloModule
  |_ __init__.py
  |_ hellomodule.py 
```

您可以按照通常的方式在模块上使用 import 语句。

有关详细信息，请参阅[6.4。包](http://docs.python.org/dev/tutorial/modules.html#packages)。

* * *

## 回答 #2

> 赞同：258
> 
> 时间：2015-11-18T01:05:55.800

**Python 3 - 2015 年 11 月 18 日更新**

*发现接受的答案很有用，但希望根据我自己的经验扩展几点以造福他人。*

**模块：**模块是包含 Python 定义和语句的文件。文件名是后缀.py的模块名。

**模块示例**：假设我们在当前目录中有一个 python 脚本，这里我称之为*mymodule.py*

文件*mymodule.py*包含以下代码：

```
def myfunc():
    print("Hello!") 
```

如果我们从当前目录运行 python3 解释器，我们可以通过以下不同的方式导入和运行函数*myfunc*（您通常只需选择以下方式之一）：

```
>>> import mymodule
>>> mymodule.myfunc()
Hello!
>>> from mymodule import myfunc
>>> myfunc()
Hello!
>>> from mymodule import *
>>> myfunc()
Hello! 
```

好的，这很容易。

现在假设您需要将此模块放入其自己的专用文件夹中以提供模块命名空间，而不是仅从当前工作目录临时运行它。这是值得解释**包**的概念的地方。

**包**：包是一种使用“带点的模块名称”来构建 Python 模块名称空间的方法。例如，模块名称 AB 指定了一个名为 A 的包中的一个名为 B 的子模块。就像使用模块使不同模块的作者不必担心彼此的全局变量名称一样，使用点分模块名称可以节省作者多模块包，如 NumPy 或 Python Imaging Library，不必担心彼此的模块名称。

**包示例**：现在假设我们有以下文件夹和文件。这里，**mymodule.py**和之前一样，**__init__.py**是一个空文件：

```
.
└── mypackage
    ├── __init__.py
    └── mymodule.py 
```

需要 __init__.py 文件才能使 Python 将目录视为包含包。有关详细信息，请参阅稍后提供的模块文档链接。

**我们当前的工作目录比名为mypackage**的普通文件夹高一级

 **```
$ ls
mypackage 
```

如果我们现在运行 python3 解释器，我们可以通过以下不同方式导入并运行包含所需函数*myfunc的模块***mymodule.py**（您通常只需选择以下方式之一）：

 *```
>>> import mypackage
>>> from mypackage import mymodule
>>> mymodule.myfunc()
Hello!
>>> import mypackage.mymodule
>>> mypackage.mymodule.myfunc()
Hello!
>>> from mypackage import mymodule
>>> mymodule.myfunc()
Hello!
>>> from mypackage.mymodule import myfunc
>>> myfunc()
Hello!
>>> from mypackage.mymodule import *
>>> myfunc()
Hello! 
```

假设 Python 3，有很好的文档：[模块](https://docs.python.org/3/tutorial/modules.html)

关于包和模块的命名约定，PEP-0008 中给出了一般指南 - 请参阅[包和模块名称](https://www.python.org/dev/peps/pep-0008/#package-and-module-names)

模块应该有简短的全小写名称。如果提高可读性，可以在模块名称中使用下划线。Python 包也应该有简短的全小写名称，尽管不鼓励使用下划线。

* * *

## 回答 #3

> 赞同：223
> 
> 时间：2017-11-15T01:57:40.440

由于还没有人讨论过OP的这个问题：

> **我想做的事：**
> 
> 使用“pip install ...”制作一个可安装的python模块

`setuptools`这是一个绝对最小的示例，显示了使用和准备和上传包到 PyPI 的基本步骤`twine`。

**这绝不是[至少阅读教程](https://packaging.python.org/tutorials/distributing-packages/)的替代品，它比这个非常基本的示例所涵盖的内容要多得多。**

这里的其他答案已经涵盖了创建包本身，因此让我们假设我们已经涵盖了该步骤并且我们的项目结构如下：

```
.
└── hellostackoverflow/
    ├── __init__.py
    └── hellostackoverflow.py 
```

为了`setuptools`用于打包，我们需要添加一个文件`setup.py`，该文件进入我们项目的根文件夹：

```
.
├── setup.py
└── hellostackoverflow/
    ├── __init__.py
    └── hellostackoverflow.py 
```

至少，我们为我们的包指定元数据，我们`setup.py`看起来像这样：

```
from setuptools import setup

setup(
    name='hellostackoverflow',
    version='0.0.1',
    description='a pip-installable package example',
    license='MIT',
    packages=['hellostackoverflow'],
    author='Benjamin Gerfelder',
    author_email='benjamin.gerfelder@gmail.com',
    keywords=['example'],
    url='https://github.com/bgse/hellostackoverflow'
) 
```

由于我们已经设置`license='MIT'`，我们在我们的项目中包含一个副本`LICENCE.txt`，以及 reStructuredText 中的自述文件`README.rst`：

```
.
├── LICENCE.txt
├── README.rst
├── setup.py
└── hellostackoverflow/
    ├── __init__.py
    └── hellostackoverflow.py 
```

至此，我们准备开始使用 打包`setuptools`，如果我们还没有安装它，我们可以安装它`pip`：

```
pip install setuptools 
```

为了做到这一点并`source distribution`在我们的项目根文件夹中创建一个，我们`setup.py`从命令行调用我们的，指定我们想要的`sdist`：

```
python setup.py sdist 
```

这将创建我们的分发包和 egg-info，并产生一个像这样的文件夹结构，我们的包位于`dist`：

```
.
├── dist/
├── hellostackoverflow.egg-info/
├── LICENCE.txt
├── README.rst
├── setup.py
└── hellostackoverflow/
    ├── __init__.py
    └── hellostackoverflow.py 
```

此时，我们有一个可以使用 安装的包`pip`，所以从我们的项目根目录（假设您具有本示例中的所有命名）：

```
pip install ./dist/hellostackoverflow-0.0.1.tar.gz 
```

如果一切顺利，我们现在可以打开一个 Python 解释器，我会在项目目录之外的某个地方说，以避免任何混淆，并尝试使用我们闪亮的新包：

```
Python 3.5.2 (default, Sep 14 2017, 22:51:06) 
[GCC 5.4.0 20160609] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from hellostackoverflow import hellostackoverflow
>>> hellostackoverflow.greeting()
'Hello Stack Overflow!' 
```

现在我们已经确认包安装和工作，我们可以将它上传到 PyPI。

由于我们不想用我们的实验污染实时存储库，我们为[测试存储库](https://test.pypi.org/)创建一个帐户，并`twine`为上传过程安装：

```
pip install twine 
```

现在我们快到了，创建帐户后，我们只需告诉`twine`上传我们的包，它会询问我们的凭据并将我们的包上传到指定的存储库：

```
twine upload --repository-url https://test.pypi.org/legacy/ dist/* 
```

我们现在可以在 PyPI 测试存储库上登录我们的帐户，并惊叹于我们新上传的包一段时间，然后使用以下命令获取它`pip`：

```
pip install --index-url https://test.pypi.org/simple/ hellostackoverflow 
```

正如我们所看到的，基本过程并不是很复杂。正如我之前所说，它的内容远不止于此，因此请继续[阅读本教程](https://packaging.python.org/tutorials/distributing-packages/)以获得更深入的解释。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-01-15T11:54:54.203

一旦你定义了你选择的命令，你可以简单地将保存的文件拖放到 python 程序文件中的 Lib 文件夹中。

```
>>> import mymodule 
>>> mymodule.myfunc() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-05T09:17:55.053

创建一个名为“hello.py”的文件

如果您使用的是 Python 2.x

```
def func():
    print "Hello" 
```

如果您使用的是 Python 3.x

```
def func():
    print("Hello") 
```

运行文件。然后，您可以尝试以下操作：

```
>>> import hello
>>> hello.func()
Hello 
```

如果你想有点难，你可以使用以下：

如果您使用的是 Python 2.x

```
def say(text):
    print text 
```

如果您使用的是 Python 3.x

```
def say(text):
    print(text) 
```

看到定义旁边括号中的那个了吗？这很重要。它是您可以在定义中使用的那个。

文本 - 当您希望程序说出您想要的内容时，您可以使用它。根据它的名字，它是文本。我希望你知道文本是什么意思。它的意思是“单词”或“句子”。

运行文件。然后，如果您使用的是 Python 3.x，则可以尝试以下操作：

```
>>> import hello
>>> hello.say("hi")
hi
>>> from hello import say
>>> say("test")
test 
```

对于 Python 2.x - 我猜 Python 3 也一样？不知道。如果我在 Python 2.x 上犯了错误，请纠正我（我知道 Python 2，但我使用的是 Python 3）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-22T16:52:29.417

模块是包含 Python 定义和语句的文件。文件名是后缀为.py的模块名

创建一个名为 hello.py 的文件，其内容为以下函数：

```
def helloworld():
   print "hello" 
```

那么你就可以

```
import hello
hello.helloworld() 
```

要将许多 .py 文件分组，请将它们放在一个文件夹中。任何带有**init** .py 的文件夹都被 python 视为一个模块，您可以将它们称为包。

|-HelloModule |_**初始化**.py |_ hellomodule.py***

# java - 在春季使用 AOP 进行日志记录？

> ID：15746676
> 
> 赞同：20
> 
> 时间：2013-04-01T15:48:54.657
> 
> 标签：java, spring, spring-mvc, log4j, aspectj

我是办公室里的新手。所以对我没有指导。

我需要`AOP`使用`log4j`.

`AOP`我已经在基本`spring MVC`示例中实现了日志记录？

`AOP`也没有使用不记录的小样本`aspectJ`（刚刚制作`Sysout`）？

不知道怎么整合？

有人可以给我一个启动想法吗？

好的答案绝对值得赞赏...

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-01T16:21:42.747

Spring 让我们使用 AOP 变得非常容易。这是一个简单的日志记录示例：

```
@Aspect
public class MyLogger {

    private Logger log = Logger.getLogger(getClass());

    @After("execution(* com.example.web.HomeController.*(..))")
    public void log(JoinPoint point) {
        log.info(point.getSignature().getName() + " called...");
    }
} 
```

然后只需配置您的 applicationContext.xml （或等效）：

```
 <aop:aspectj-autoproxy>
        <aop:include name="myLogger"/>
    </aop:aspectj-autoproxy>

    <bean id="myLogger" class="com.example.aspect.MyLogger"/> 
```

您会注意到我`@After`在方法上方指定的 MyLogger 类。这称为建议，它基本上指定此“日志”方法将在相关方法**之后**调用。其他选项包括`@Before, @Around, @AfterThrowing`.

该表达式`"execution(* com.example.web.HomeController.*(..))"`称为切入点表达式并指定我们的目标（在本例中为 HomeController 类的所有方法）。

PS`aop`命名空间 ( `xmlns:aop="http://www.springframework.org/schema/aop"`) 和模式位置（取决于版本）需要添加到您的 applicationContext.xml 顶部。这是我的设置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:25:01.803

您需要执行几个步骤来集成 Aspectj：

1.  [安装 AspectJ](https://web.archive.org/web/20131012065443/http://www.cs.utep.edu/cheon/cs3360/project/proj1/installing-aspectj.txt)
2.  将您的 aop.xml 添加到项目中的 META-INF\aop.xml
3.  在项目类路径中添加 aspectjrt-xx0.jar 和 aspectjweaver-xx0.jar
4.  将 -javaagent:/path to aspectj installation/aspectjweaver-1.7.0.jar 添加到服务器的 JVM。

这是一个示例 aop.xml：

```
<aspectj>
 <aspects>
  <aspect name="test.MySimpleLoggerAspect" />
 </aspects>
 <weaver>
  <include within="test.myproject.*" />
 </weaver>     
</aspectj> 
```

如果您已经在使用 Spring，那么最好使用 Spring 来简化您的设置。

# android - 使用自定义光标适配器在 autocompletetextview 建议中加载图像

> ID：15746677
> 
> 赞同：1
> 
> 时间：2013-04-01T15:48:58.427
> 
> 标签：android

我正在开发一个需要自动完成文本视图来在下拉视图中建议联系人的应用程序。我正在使用自定义光标适配器。我的一个下拉项目的布局在左侧有 imageview（用于显示联系人的图像（如果可用），否则为默认图像）。我使用 Asynctask 从联系人中加载图像。在我的 bindView 方法中，我有以下代码片段从异步任务中加载图像。

```
contactImage = new conactImage(viewHolder, cursor);
contactImage.execute(new String[] {userId}); 
```

在 Asynctask 的 onPostExecute 方法中，我设置了图像位图。

```
mViewHolder.cImage.setImageBitmap(imageResultBitmap); 
```

mViewHolder 是在前一个片段中作为参数传递的视图持有者。

我面临的问题是糟糕的用户体验。假设我在 autocompletetextview 中输入了两个字符。图像在一秒钟内出现。当我滚动时，除非我再等待 2 3 秒以加载正确的图像，否则图像不会改变。当我快速滚动时，由于图像位图的随机变化，视图会闪烁很多。我知道这是一个视图回收的事情，但这很烦人。请提出任何其他可能的方法来做同样的事情。

![在此处输入图像描述](https://i.stack.imgur.com/Edc8J.png) 滚动时

![在此处输入图像描述](https://i.stack.imgur.com/3zYwV.png)

谢谢！

# python - Python 的 rdb 调试断点处不存在局部变量（在 celery 任务中）

> ID：15746679
> 
> 赞同：3
> 
> 时间：2013-04-01T15:49:04.933
> 
> 标签：python, celery, remote-debugging, pdb

我正在尝试[调试 celery 任务](http://docs.celeryproject.org/en/latest/tutorials/debugging.html)，但是当我 telnet 时参数和局部变量不存在：

```
from celery import Celery
from celery.contrib import rdb

celery = Celery('tasks', broker="redis://localhost:6379/0")

@celery.task
def add(x, y):
  someVar = 3
  rdb.set_trace() 
```

在不同的终端：

`telnet 127.0.0.1 6902`（或任何端口号）

`x`，`y`并且`someVar`都会产生一个名称错误，例如：`NameError: name 'x' is not defined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:51:29.053

要检查您是否在当前堆栈帧中，请使用`u`and `d`（上下）上下移动（[http://docs.python.org/2/library/pdb.html#debugger-commands](http://docs.python.org/2/library/pdb.html#debugger-commands)）

你可以看到你所在的文件（它写在 pdb 提示符中）。根据我的经验，通常你必须上去一两次才能找到正确的文件

# mysql - 使用 TOP 将 SQL Server 转换为 MySQL 内部连接错误

> ID：15746680
> 
> 赞同：0
> 
> 时间：2013-04-01T15:49:07.287
> 
> 标签：mysql, sql-server

我在以下内容中收到错误“SELECT top (20) L.load_Number”：

```
INSERT INTO Last_20_Loads 
SELECT        top (20) L.load_Number, count(b.Bales_Per_Hour) AS COUNT_Bales_Per_Hour, sum(b.Bales_Per_Hour) AS SUM_Bales_Per_Hour
FROM Loads AS L INNER JOIN
    Bales AS B ON L.Load_Number = B.Load_Number 
where (status = 7)
GROUP BY l.load_Number
ORDER BY l.load_Number DESC; 
```

为什么我会出错。怎么修？

谢谢，

杰瑞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:51:03.687

MySQL 使用 LIMIT 而不是 TOP。您还应该在 INSERT 语句中指定列名

```
INSERT INTO Last_20_Loads (load_number, countbales, sumbales)
SELECT L.load_Number, count(b.Bales_Per_Hour) AS COUNT_Bales_Per_Hour, sum(b.Bales_Per_Hour) AS SUM_Bales_Per_Hour
FROM Loads AS L INNER JOIN
Bales AS B ON L.Load_Number = B.Load_Number 
where (status = 7)
GROUP BY l.load_Number
ORDER BY l.load_Number DESC
LIMIT 20; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:50:22.970

的等价`TOP`物`LIMIT`在 mysql 中。

```
INSERT INTO Last_20_Loads 
SELECT  L.load_Number, 
        count(b.Bales_Per_Hour) AS COUNT_Bales_Per_Hour, 
        sum(b.Bales_Per_Hour) AS SUM_Bales_Per_Hour
FROM    Loads AS L 
        INNER JOIN Bales AS B 
            ON L.Load_Number = B.Load_Number 
where   (status = 7)
GROUP   BY l.load_Number
ORDER   BY l.load_Number DESC
LIMIT   20; 
```

# android - 在 Ubuntu 12.04 上启动 DDMS 时出现意外错误

> ID：15746686
> 
> 赞同：0
> 
> 时间：2013-04-01T15:49:23.150
> 
> 标签：android, ubuntu-12.04, ddms

在 Ubuntu 12.04 中首次启动 DDMS 时出现以下错误

![在此处输入图像描述](https://i.stack.imgur.com/rBl0T.png)

将以下行添加到 ~/.bashrc

```
export PATH=${PATH}:~/android-sdk-linux/tools
export PATH=${PATH}:~/android-sdk-linux/platform-tools 
```

请帮助我在 Ubuntu 12.04 上使用 DDMS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:22:56.493

你有没有尝试以下

如果您在开发机器上运行 64 位发行版，则需要使用 apt-get: 安装 ia32-libs 包：

使用以下命令打开您的终端和 wonlaod

```
 apt-get install ia32-libs 
```

[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)

# linux - 按修改时间排序文件（包括所有子目录中的文件）

> ID：15746687
> 
> 赞同：2
> 
> 时间：2013-04-01T15:49:27.027
> 
> 标签：linux, file, list

在 Linux 终端上，我有没有办法列出父目录或以下任意数量的子目录级别中的所有文件，所有文件都按整个文件列表中的修改时间排序？

`ls -Rlt`还不够，因为它按每个子目录的文件的修改时间排序..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:18:34.437

这会做你想做的

```
find . -type f -printf '%TY%Tm%Td%TH%TM%TS %p\n'|sort 
```

样本输出：

```
20130312134959.5090000000 ./servlets/servlet/target/reporting_app.servlets.servlet/WEB-INF/lib/java-foundation-1.1.20.jar
20130312134959.7580000000 ./servlets/servlet/target/reporting_app.servlets.servlet/WEB-INF/lib/log4j-rolling-appender-1.2.15.jar
20130312134959.8050000000 ./servlets/servlet/target/reporting_app.servlets.servlet/WEB-INF/lib/commons-logging-1.1.1.jar
20130312134959.9140000000 ./servlets/servlet/target/reporting_app.servlets.servlet/WEB-INF/lib/commons-digester-1.8.1.jar
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:00:07.443

像这样使用怎么`find`样：

```
find /my/dir/to/scan -type f -exec ls -lt --time-style=+"%F-%T" {} ";" | sort -k 6 
```

由于 final 的原因，这可能需要一些时间才能返回`| sort`。

如果您通过添加/删除选项来更改格式，`ls`您可能需要调整排序列，目前是`6`日期。

# java - 使用斯坦福命名实体识别器时如何包含多个分类器？

> ID：15746695
> 
> 赞同：2
> 
> 时间：2013-04-01T15:49:45.637
> 
> 标签：java, stanford-nlp, named-entity-recognition

我运行以下命令来启动 NER 服务器

```
java -mx1000m -cp stanford-ner.jar edu.stanford.nlp.ie.NERServer -loadClassifier ner-model.ser.gz -port 8081 -outputFormat inlineXML 
```

在这里，我使用了我手动创建的分类器（ner-model.ser.gz）。我想使用默认分类器`english.muc.7class.distsim.crf.ser.gz`（由他们提供）和我创建的分类器

我尝试了以下命令

```
java -mx1000m -cp stanford-ner.jar edu.stanford.nlp.ie.NERServer -loadClassifier classifiers/english.muc.7class.distsim.crf.ser.gz ner-model.ser.gz -port 8081 -outputFormat inlineXML 
```

但它没有用。请帮忙，因为我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T16:58:37.927

不幸的是，目前NERServer代码只支持加载一个分类器，所以这里没有不写代码的解决方案。像斯坦福 CoreNLP 那样，允许 NERServer 加载多个分类器并不是什么大的变化。了解 Java 的人可以做到这一点，或者我们可能会在未来的某个版本中做到这一点，但没有具体的时间表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T17:13:18.537

您可以尝试在两个存档文件之间添加 ,

```
java -mx1000m -cp stanford-ner.jar edu.stanford.nlp.ie.NERServer -loadClassifier classifiers/english.muc.7class.distsim.crf.ser.gz,ner-model.ser.gz -port 8081 -outputFormat inlineXML 
```

# javascript - 如何在jquery中通过dom引擎检测页面滚动

> ID：15746699
> 
> 赞同：1
> 
> 时间：2013-04-01T15:50:19.970
> 
> 标签：javascript, jquery, scroll

使用 jQuery 的`scroll()`功能，您可以检测*任何滚动事件*，无论它是由用户（即鼠标滚动、拖动滚动条）还是 DOM 引擎（添加或删除元素）创建的。如何区分 DOM 引擎触发的滚动事件。

[这个 jsfiddle](http://jsfiddle.net/Gd9a2/2/)清楚地表明了我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:24:05.170

有很多方法可以处理这个问题，但我不知道有哪一种是非常正式的。

一种简单的方法是在以编程方式启动滚动（例如设置类）时设置一个切换，并在完成后将其删除。我已经[分叉了你的小提琴](http://jsfiddle.net/nate/wHF8r/1/)来展示它是如何工作的。

```
$("#scrollable")
    .addClass('programatically-scrolling')
    .scrollTo({
        top: $("#scrollable").prop("scrollHeight") - $("#scrollable").innerHeight(),
        left: 0
    }, 1000, {
        axis: 'y',

        // Add a function to remove the toggle when the animation is complete
        onAfter: function () {
            $(this).removeClass('programatically-scrolling');
        }
    });

$("#scrollable").scroll(function (event) {

    // This will be true when your $.scrollTo animation is going
    // and false when you trigger the scroll with your mouse
    console.log($(this).hasClass('programatically-scrolling'));
}); 
```

还有其他方法可以解决这个问题，其他人也[问过同样的问题](https://stackoverflow.com/questions/7178863/how-to-distinguish-scrolling-by-mouse-from-scrolling-programmatically-in-javascr)。制作一个[jQuery 特殊事件](http://benalman.com/news/2010/03/jquery-special-events/)可能是最有趣的，但我概述的解决方案可能是最简单的。

# asp.net - 无法编译基本的 monodevelop/xamarin 项目 - “已经有参考”错误

> ID：15746701
> 
> 赞同：1
> 
> 时间：2013-04-01T15:50:25.677
> 
> 标签：asp.net, monodevelop, xamarin

我完全无法理解这一点。已经去monodevelop并下载了xamarin studio并将其更新到4.0.3

即使是一个简单的项目，我也无法获得干净的编译。c# 或 vb.net。

“新”>“解决方案”>“asp.net”>“c#”>“web api”

“建造”

17 个错误。“找不到类型或命名空间名称‘对象’”。“找不到类型或命名空间‘EventArgs’”。等等。

如果我使用 vb，我会收到与项目中已经存在对程序集“系统”的引用相关的错误（我没有添加任何其他引用）。如果我删除了项目自动添加的所有 4 个文件，那么我会得到一个干净的编译，但是如果我然后添加一个 Web 服务文件，那么我会收到错误消息，提示找不到“webmethod”（缺少 system.web.services 并不奇怪！）

我不明白为什么新安装的程序和默认项目无法编译。顺便说一句，Windows 7 x64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:24:19.733

我同意 - 新安装的程序和默认项目这样做很奇怪。

对我来说，解决方案是添加`using System;`有问题的 *.cs 文件（Default.aspx.cs 适合我，因为我删除了自动生成的 Global.asax 和 Global.asax.cs 文件）。

# c# - 使用 C# 和 Access 更新查询的奇怪行为

> ID：15746707
> 
> 赞同：-2
> 
> 时间：2013-04-01T15:50:50.590
> 
> 标签：c#, sql, ms-access

我面临一个奇怪的问题，当我尝试运行以下代码来更新访问数据库中的记录时。

```
string updateQuery = "UPDATE Employee SET Employee_name = @name, Employee_desig = @designation, Employee_salary = @salary, Employee_phone = @phone, Employee_mobile = @mobile, Employee_email = @email, Employee_status = @status WHERE (((Employee_id)=@empId));";

dbCmd.CommandText = updateQuery;

dbCmd.Parameters.AddWithValue("@designation", designation);
dbCmd.Parameters.AddWithValue("@email", email);
dbCmd.Parameters.AddWithValue("@mobile", mobile);
dbCmd.Parameters.AddWithValue("@name", name);
dbCmd.Parameters.AddWithValue("@phone", phone);
dbCmd.Parameters.AddWithValue("@salary", salary);
dbCmd.Parameters.AddWithValue("@status", status);
dbCmd.Parameters.AddWithValue("@empId", employeeId);

dbCmd.ExecuteNonQuery(); 
```

`ExecuteNonQuery()`返回 1。但是当我签入数据库时​​，输入会在不同的列中更新。

![截图访问数据库](https://i.stack.imgur.com/4eCk2.jpg)

输入值为

```
designation="Manager"
email="e"
mobile="2"
name="n"
phone="1"
salary=10.0
status="Active"
employeeId=3 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:08:27.517

在 ACE OLEDB 的上下文中，参数名称被忽略，并且必须按照它们在 SQL 语句中出现的顺序来定义参数。

# android - 使用 Android SDK 仅获取一次电池电量

> ID：15746709
> 
> 赞同：33
> 
> 时间：2013-04-01T15:50:58.750
> 
> 标签：android, batterylevel

我在网上搜索并找不到我的问题的答案。我的问题是只获取一次电池电量信息，例如。调用函数`getBatteryLevel()`。只有使用 实现的解决方案`BroadcastReceiver`，但据我所知，每次电池电量变化事件都会调用它。请告诉我如何才能只获得一次该信息？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-01T16:04:48.353

[`Intent.ACTION_BATTERY_CHANGED`](http://developer.android.com/reference/android/content/Intent.html#ACTION_BATTERY_CHANGED)广播就是所谓的“粘性广播” 。因为这是粘性的，所以您可以使用 null 接收器注册广播，它只会在您调用时获得一次**电池**`registerReceiver`电量。

在不接收更新的情况下获取电池电量的函数如下所示：

```
public float getBatteryLevel() {
    Intent batteryIntent = registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
    int level = batteryIntent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
    int scale = batteryIntent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

    // Error checking that probably isn't needed but I added just in case.
    if(level == -1 || scale == -1) {
        return 50.0f;
    }

    return ((float)level / (float)scale) * 100.0f; 
} 
```

可以从此粘性广播中提取更多数据。使用返回的`batteryIntent`，您可以访问[`BatteryManager`](http://developer.android.com/reference/android/os/BatteryManager.html)课程中概述的其他附加功能。

# c# - 如何获取 C# 图表的缩放事件

> ID：15746714
> 
> 赞同：3
> 
> 时间：2013-04-01T15:51:20.190
> 
> 标签：c#, winforms, events, charts, zooming

我有一个图表（win-forms 视觉工作室附带的标准图表），我已经设置了放大。每次缩放此图表时，我都想运行一个函数，但是我找不到缩放时触发的事件。我查看了事件列表，我认为唯一可行的是“AxisViewChanged”，但是这是在许多更改时触发的，我不知道如何仅找出缩放更改。我错过了一些缩放事件吗？还是这不存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:35:39.743

你可以做这样的事情

```
 double oldSelStart = -1;
    double oldSelEnd = -1;
    private void chart1_AxisViewChanged(object sender, ViewEventArgs e)
    {
        double newSelStart = chart1.ChartAreas["Default"].CursorX.SelectionStart;
        double newSelEnd = chart1.ChartAreas["Default"].CursorX.SelectionEnd;
        const double TOLERANCE = 0.1;

        if (Math.Abs(oldSelEnd - newSelEnd) > TOLERANCE || Math.Abs(newSelStart - oldSelStart) > TOLERANCE)
        {
            oldSelStart = newSelStart;
            oldSelEnd = newSelEnd;

            //Zoom has actually changed do your stuff
        }
    } 
```

基本上，您会记住旧的缩放范围并自己处理 AxisViewChanged 并确定缩放是否实际发生了变化

# c# - 以管理员身份运行新进程并读取标准输出

> ID：15746716
> 
> 赞同：14
> 
> 时间：2013-04-01T15:51:27.190
> 
> 标签：c#

我想允许用户在我的非管理员程序中以管理员身份运行命令行实用程序，并让我的程序获取输出。该实用程序是第三方的，但与我的程序一起分发。

我可以[重定向程序的输出，](https://stackoverflow.com/questions/206323/how-to-execute-command-line-in-c-get-std-out-results)也可以[以管理员身份运行程序，](https://stackoverflow.com/questions/133379/elevating-process-privilege-programatically)但不能同时执行这两项操作。

目前我唯一可以开始工作的是使用 cmd.exe 将输出重定向到文件，例如：

```
using System.Windows.Forms;
using System.Diagnostics;
using System.IO;
using System.Reflection;

string appDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
string utilityPath = Path.Combine(appDirectory, "tools", "utility.exe");
string tempFile = Path.GetTempFileName();

Process p = new Process();
// hide the command window
p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
p.StartInfo.FileName = "cmd.exe";
// run the tool, redirect the output to the temp file and then close.
p.StartInfo.Arguments = " /C \"\"" + utilityPath + "\" > \"" + tempFile + "\"\"";
p.StartInfo.Verb = "runas"; // run as administrator
p.Start();
p.WaitForExit();

// get the output, delete the file and show the output to the user
string output = File.ReadAllText(tempFile);
File.Delete(tempFile);
MessageBox.Show(output); 
```

这有两个问题：1）它使用临时文件和 2）UAC 用于 cmd.exe 而不是实用程序.exe。肯定有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:01:30.063

不要通过 new`cmd`执行，而是尝试直接执行该实用程序。而不是重定向到文件，而是重定向标准输出以从您的程序中读取它。为了以管理员身份运行，您需要使用管理员用户名和密码（取自[此处](https://stackoverflow.com/a/4144445/1096117)）。您需要将方法设置为`unsafe`：

```
unsafe public static void Main(string[] args){
    Process p = new Process();
    p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
    // set admin user and password
    p.StartInfo.UserName = "adminusername";
    char[] chArray = "adminpassword".ToCharArray();
    System.Security.SecureString str;
    fixed (char* chRef = chArray) {
        str = new System.Security.SecureString(chRef, chArray.Length);
    }
    p.StartInfo.Password = str;
    // run and redirect as usual
    p.StartInfo.FileName = utilityPath;
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.RedirectStandardOutput = true;
    p.Start();
    string output = p.StandardOutput.ReadToEnd();
    Console.WriteLine(output);
    p.WaitForExit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T12:23:17.753

[这](http://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide)很神奇，虽然我没有测试过。

它是用 C++ 编写的，但是可以很容易地创建一个包装 API，以便使用`DllImport`.

# mysql - 使用正确的 MYSQL JOIN

> ID：15746717
> 
> 赞同：1
> 
> 时间：2013-04-01T15:51:27.253
> 
> 标签：mysql, sql

我正在尝试从匹配表中获取所有数据，以及当前注册的每种类型的玩家，无论是否有经验。

**游戏玩家**

```
(PK)Gamer_Id
Gamer_firstName,
Gamer_lastName,
Gamer experience(Y/N) 
```

**Gamer_matches**

```
(PK)FK GamerId,
(PK)FK MatchId,
Gamer_score 
```

**匹配**

```
(PK)Match_Id,
ExperiencedGamers_needed,
InExperiencedGamers_needed 
```

我已经和许多其他人一起尝试过这个查询，但它不起作用，它是一个糟糕的连接吗？

```
SELECT M.MatchId,M.ExperiencedGamers_needed,M.InExperiencedGamers_needed,
(SELECT COUNT(GM.GamerId) 
FROM Gamers G, Gamers_matches GM
WHERE G.GamerId = GM.GamerId
AND G.experience = "Y"
AND GM.MatchId = M.MatchId 
GROUP BY GM.MatchId)AS ExpertsSignedUp,

(SELECT COUNT(GM.GamerId)
FROM Gamers G, Gamers_matches GM
WHERE G.GamerId = GM.GamerId
AND G.experience = "N"
AND GM.MatchId = M.MatchId
GROUP BY GM.MatchId) AS NovicesSignedUp

FROM MATCHES M 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:21:15.760

您编写的内容称为*相关子查询*，它强制 SQL 为从 Matches 中提取的每一行重新执行子查询。它可以工作，但效率很低。在一些复杂的查询中，它可能是必要的，但在这种情况下不是。

我会这样解决这个查询：

```
SELECT M.MatchId, M.ExperiencedGamers_needed,M.InExperiencedGamers_needed,
  SUM(G.experience = 'Y') AS ExpertsSignedUp,
  SUM(G.experience = 'N') AS NovicesSignedUp
FROM MATCHES M
LEFT OUTER JOIN (Gamer_matches GM
    INNER JOIN Gamers G ON G.GamerId = GM.GamerId)
  ON M.MatchId = GM.MatchId
GROUP BY M.MatchId; 
```

由于末尾的 GROUP BY，这里每个 Match 只输出一行。

没有要多次重新执行的子查询，它只是将匹配项连接到其他表中的相应行一次。但是我会使用外连接，以防比赛中任何一种类型的玩家都没有注册。

然后，我不使用 COUNT()，而是使用 MySQL 的技巧，并在 SUM() 函数中使用带有布尔表达式的 SUM()。MySQL 中的布尔表达式总是返回 0 或 1。它们的 SUM() 与表达式返回 true 的 COUNT() 相同。这样，我只需扫描一次 Gamers 表就可以得到专家和新手的“计数”。

* * *

PS MySQL 以非标准方式从布尔表达式返回 0 或 1。标准 ANSI SQL 不支持这一点，许多其他品牌的 RDBMS 也不支持。标准情况下，布尔表达式返回一个布尔值，而不是整数。

但是，如果您需要编写标准 SQL 以实现可移植性，则可以使用更详细的表达式：

```
SUM(CASE G.experience WHEN 'Y' THEN 1 WHEN 'N' THEN 0 END) AS ExpertsSignedUp 
```

# visual-studio-2010 - 新安装前要卸载的 MSI

> ID：15746721
> 
> 赞同：2
> 
> 时间：2013-04-01T15:51:39.053
> 
> 标签：visual-studio-2010, installation, windows-installer, uninstallation

我想在现有安装上重新安装。是否可以将 MSI 配置为自动卸载现有（无论版本）然后安装“新”版本。我希望能够在安装之前卸载，但我似乎不知道如何卸载。任何/所有帮助将不胜感激。

我已经完成了以下所有这些步骤，但仍然觉得产品没有被卸载，而是文件被覆盖了。

1.  将删除以前的安装设置为 True
2.  将检测新版本设置为 True
3.  您应该将安装程序的版本更改为更高的版本，它会要求您更改产品代码，请选择“是”。不要更改您的升级代码，让它保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:24:55.540

是的，您需要在操作之前安排操作的[重大升级](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369786%28v=vs.85%29.aspx)。这将导致旧软件包在新软件包开始安装之前被删除（您仍将通过新的 MSI UI）。`RemoveExistingProducts``InstallInitialize`

# sql - DateDiff 还是函数？

> ID：15746722
> 
> 赞同：1
> 
> 时间：2013-04-01T15:51:39.710
> 
> 标签：sql, sql-server, tsql

我的问题是它们都住在同一张桌子上。我如何能够从他们那里获得经过验证的日期差异？我的最终目标是获得从顶部到底部所需的平均天数。以及转化率。

```
select *  from contactworkflow where contactworkflow.contactkey = contactworkflow.contactkey
       AND   (    contactworkflow.wfstagekey = 2
                AND contactworkflow.wftaskkey = 74) 
```

两者都有不同的 wfdate，我需要获得差异。我打算做一个datefiff，但不知道怎么写。

```
select *  from contactworkflow where contactworkflow.contactkey = contactworkflow.contactkey
   AND   (    contactworkflow.wfstagekey = 4
            AND contactworkflow.wftaskkey = 49) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:08:27.113

对于 datediff 部分：

```
declare @date1 datetime, @date2 datetime

select @date1 = wfdate
from contactworkflow
where contactworkflow.contactkey = contactworkflow.contactkey
AND contactworkflow.wfstagekey = 2
AND contactworkflow.wftaskkey = 74

select @date2 = wfdate
from contactworkflow
where contactworkflow.contactkey = contactworkflow.contactkey
AND contactworkflow.wfstagekey = 4
AND contactworkflow.wftaskkey = 49

-- dd means difference in days
select datediff(dd, @date1, @date2) 
```

# performance - 寻找组合的功能优化 - 内存不足问题+速度

> ID：15746724
> 
> 赞同：2
> 
> 时间：2013-04-01T15:51:52.633
> 
> 标签：performance, r, memory, out-of-memory

下面是一个函数，它创建将 x 的元素分成 n 组的所有可能组合（所有组具有相同数量的元素）

功能：

```
perm.groups <- function(x,n){
    nx <- length(x)
    ning <- nx/n

    group1 <- 
      rbind(
        matrix(rep(x[1],choose(nx-1,ning-1)),nrow=1),
        combn(x[-1],ning-1)
      )
    ng <- ncol(group1)

    if(n > 2){
      out <- vector('list',ng)

      for(i in seq_len(ng)){
        other <- perm.groups(setdiff(x,group1[,i]),n=n-1)
        out[[i]] <- lapply(seq_along(other),
                       function(j) cbind(group1[,i],other[[j]])
                    )
      }
    out <- unlist(out,recursive=FALSE)
    } else {
      other <- lapply(seq_len(ng),function(i) 
                  matrix(setdiff(x,group1[,i]),ncol=1)
                )
      out <- lapply(seq_len(ng),
                    function(i) cbind(group1[,i],other[[i]])
              )
    }
    out    
} 
```

伪代码（解释）

```
nb = number of groups
ning = number of elements in every group
if(nb == 2)
   1\. take first element, and add it to every possible 
       combination of ning-1 elements of x[-1] 
   2\. make the difference for each group defined in step 1 and x 
       to get the related second group
   3\. combine the groups from step 2 with the related groups from step 1

if(nb > 2)
   1\. take first element, and add it to every possible 
       combination of ning-1 elements of x[-1] 
   2\. to define the other groups belonging to the first groups obtained like this, 
       apply the algorithm on the other elements of x, but for nb-1 groups
   3\. combine all possible other groups from step 2 
       with the related first groups from step 1 
```

这个函数（和伪代码）最初是由 Joris Meys 在上一篇文章中创建的： [Find all possible ways to split a list of elements into a given number of groups of the same size](https://stackoverflow.com/questions/14753987/find-all-possible-ways-to-split-a-list-of-elements-into-a-a-given-number-of-grou)

有没有办法创建一个返回给定数量的随机可能组合的函数？这样的函数将采用第三个参数，即 percent.possibilities 或 number.possiblities 固定函数返回的随机不同组合的数量。

就像是：

> new.perm.groups(x=1:12,n=3,number.possiblities=50)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:08:33.943

根据@JackManey 的建议，您可以使用等概率的方式对一个排列组进行采样

```
sample.perm.group <- function(ning, ngrp)
{
    if( ngrp==1 ) return(seq_len(ning))

    g1 <- 1+sample(ning*ngrp-1, size=ning-1)

    g1 <- c(1, g1[order(g1)])

    remaining <- seq_len(ning*ngrp)[-g1]

    cbind(g1, matrix(remaining[sample.perm.group(ning, ngrp-1)], nrow=ning), deparse.level=0)
} 
```

其中`ning`是每组的元素数，`ngrp`是组数。

它返回索引，因此如果您有任意向量，您可以将其用作排列：

```
> ind <- sample.perm.group(3,3)
> ind
     [,1] [,2] [,3]
[1,]    1    2    5
[2,]    3    7    6
[3,]    4    8    9
> LETTERS[1:9][ind]
[1] "A" "C" "D" "B" "G" "H" "E" "F" "I" 
```

要生成大小为 N 的排列样本，您有两种选择： 如果您允许重复，即带有替换的样本，您所要做的就是运行前面的函数 N 次。OTOH，如果您的样本要在没有替换的情况下进行，那么您可以使用拒绝机制：

```
sample.perm.groups <- function(ning, ngrp, N)
{
    result <- list(sample.perm.group(ning, ngrp))

    for( i in seq_len(N-1) )
    {
        repeat
        {
            y <- sample.perm.group(ning, ngrp)

            if( all(vapply(result, function(x)any(x!=y), logical(1))) ) break
        }

        result[[i+1]] <- y
    }

    result
} 
```

这显然是一种等概率抽样设计，而且不太可能是低效的，因为可能组合的数量通常远大于 N。

# php - 正则表达式错误 preg_replace_callback() ：未知修饰符“。” 在

> ID：15746727
> 
> 赞同：2
> 
> 时间：2013-04-01T15:52:00.503
> 
> 标签：php, regex, preg-replace, preg-match, preg-replace-callback

我得到以下字符串：

```
last_name, first_name
bjorge, philip
kardashian, [kghim]
mer#$##Code:menu:51587daa7030e##$#cury some more
data #$##Code:menu:515r4387daa7dsf030e##$#, freddie 
```

我试图用函数替换中间的代码：'codeParser' 正则表达式是：

```
$PC_File = preg_replace_callback("(?=\#\$\#\#).*?(?<=\#\#\$\#)", 'codeParser', $PC_File); 
```

但收到此错误：

```
PHP Warning:  preg_replace_callback() : Unknown modifier '.' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T15:54:01.050

您需要将正则表达式包装在[delimiters](http://php.net/manual/en/regexp.reference.delimiters.php)中。它现在正在考虑`()`成为分隔符，并且`.`作为修饰符（这当然是无效的）。

```
"/(?=#\\$##).*?(?<=##\\$#)/" 
```

（我也很确定`#`不需要转义，除非您将它们用作分隔符）

编辑：您需要`\\`正确转义`$`双引号。

# c# - C# PrintDocument 打印空白页。为什么？

> ID：15746729
> 
> 赞同：4
> 
> 时间：2013-04-01T15:52:05.903
> 
> 标签：c#

我有以下图片框，我用条形码填充然后尝试打印。

这是代码：

```
private void button1_Click(object sender, EventArgs e)
{

    printDocument1.OriginAtMargins = true;
    printDocument1.DocumentName = "TEST IMAGE PRINTING";

    printDialog1.Document = printDocument1;
    printDialog1.ShowDialog();
    printDocument1.Print();

}

private void printDocument1_PrintPage_1(object sender, PrintPageEventArgs e)
{
    System.Drawing.Graphics formGraphics = System.Drawing.Graphics.FromImage(picpdf417.Image);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:55:51.660

您需要实际绘制图像：

```
private void printDocument1_PrintPage_1(object sender, PrintPageEventArgs e)
{
  e.Graphics.DrawImage(picpdf417.Image, Point.Empty);
} 
```

# mysql - 在mysql中声明表类型的输出参数

> ID：15746731
> 
> 赞同：1
> 
> 时间：2013-04-01T15:52:10.710
> 
> 标签：mysql, stored-procedures

我知道mysql函数/过程可以返回表，但我想知道是否可以声明表类型的*输出参数？*还是仅限于 mysql 原始类型？

# uisplitviewcontroller - 无法将项目添加到 UIToolbar

> ID：15746732
> 
> 赞同：0
> 
> 时间：2013-04-01T15:52:13.227
> 
> 标签：uisplitviewcontroller, uibarbuttonitem, uitoolbar

我正在开发一个带有拆分视图控制器的应用程序。master 是标签栏控制器的子类，是拆分视图控制器的委托。该部分似乎工作正常，并且确实将正确的信息推送到详细信息方面——除了拆分视图控制器生成的条形按钮项。

我有一个 UIToolbar，它在 Xcode 中被拖到项目中唯一的细节视图控制器上。我使用 ctrl-drag 在 Xcode 中为公共 API 设置了一个出口。

在公共 API 中还声明了一个 UIBarButtonItem *splitViewBarButtonItem，声明​​为弱的、非原子的。

这是该项目的设置器：

```
-(void)setSplitViewBarButtonItem:(UIBarButtonItem *)barButtonItem
{
   NSLog(@"%@ setSplitViewBarButtonItem to %@ (%@)",self,barButtonItem,barButtonItem.title);
   //UIToolbar *toolbar = [self toolbar];
   UIToolbar *toolbar = self.toolbar;
   NSLog(@"toolbar[0] before adding the barButtonItem is %@",toolbar.items[0]);
   NSMutableArray *toolbarItems = [toolbar.items mutableCopy];
   if (_splitViewBarButtonItem)
   {
      NSLog(@"Removing _splitViewBarButtonItem from toolbarItems");
      [toolbarItems removeObject:_splitViewBarButtonItem];
      NSLog(@"toolbarItems[0] is %@",toolbarItems[0]);
   }
   if (barButtonItem)
   {
      NSLog(@"#####");
      NSLog(@"Now adding %@ to toolbarItems",[barButtonItem description]);
      [toolbarItems insertObject:barButtonItem atIndex:0];
      NSLog(@"toolbarItems[0] is %@",[toolbarItems[0] description]);
      NSLog(@"#####");
   }
   self.toolbar.items = [toolbarItems copy];
   NSLog(@"self.toolbar.items[0] is %@",self.toolbar.items[0]);
   _splitViewBarButtonItem = barButtonItem;
} 
```

第一次通过时，它的行为符合预期：

```
2013-04-01 10:33:46.270 SPoT[10389:907] <IViewController: 0x1e066430> setSplitViewBarButtonItem to <UIBarButtonItem: 0x1cd65490> (Text appearing on the button)
2013-04-01 10:33:46.272 SPoT[10389:907] toolbar[0] before adding the barButtonItem is <UIBarButtonItem: 0x1cd65400>
2013-04-01 10:33:46.275 SPoT[10389:907] #####
2013-04-01 10:33:46.277 SPoT[10389:907] Now adding <UIBarButtonItem: 0x1cd65490> to toolbarItems
2013-04-01 10:33:46.278 SPoT[10389:907] toolbarItems[0] is <UIBarButtonItem: 0x1cd65490>
2013-04-01 10:33:46.280 SPoT[10389:907] #####
2013-04-01 10:33:46.288 SPoT[10389:907] self.toolbar.items[0] is <UIBarButtonItem: 0x1cd65490> 
```

但是，如果我使用按钮激活主控，从而使按钮消失并使用主控用新数据刷新详细信息屏幕，则不会传输按钮。我已经将问题追溯到此方法，其中显示按钮可用但未更新。这是第二次运行的调试器输出：

```
2013-04-01 10:33:53.491 SPoT[10389:907] <IViewController: 0x1e09fad0> setSplitViewBarButtonItem to <UIBarButtonItem: 0x1cd65490> (Text appearing on the button)
2013-04-01 10:33:53.492 SPoT[10389:907] toolbar[0] before adding the barButtonItem is (null)
2013-04-01 10:33:53.493 SPoT[10389:907] #####
2013-04-01 10:33:53.494 SPoT[10389:907] Now adding <UIBarButtonItem: 0x1cd65490> to toolbarItems
2013-04-01 10:33:53.495 SPoT[10389:907] toolbarItems[0] is (null)
2013-04-01 10:33:53.496 SPoT[10389:907] #####
2013-04-01 10:33:53.497 SPoT[10389:907] self.toolbar.items[0] is (null) 
```

请注意，调试器跟踪状态为“现在添加”，因此该项目可用。那么为什么不添加呢？

编辑：现在我在想，由于“添加 barButtonItem 之前的工具栏 [0] 是（null）”，因此生成新细节控制器的对象 id 的 segue 还没有完全创建该对象，具体来说，工具栏属性没有还不存在。我想我必须弄清楚如何在稍后的过程中添加条形按钮项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:14:58.237

不确定这是最好的解决方案，但我认为条形按钮项未添加到标题的原因是标题尚未添加到 segue 提供的新细节 VC 对象中。我通过将以下行添加到详细信息 VC 的 viewDidLayoutSubviews 方法解决了这个问题：

```
self.splitViewBarButtonItem = self.splitViewBarButtonItem; 
```

这会再次调用 setter，但这次是在标题栏存在之后。

# windows-phone-7 - XNA 每 10 秒加速一次对象

> ID：15746738
> 
> 赞同：0
> 
> 时间：2013-04-01T15:52:48.120
> 
> 标签：windows-phone-7, xna

我试图找出一种方法让物体每 10 秒增加一次速度。增加是名义上的，例如 0.1。我正在努力寻找解决方案`gameTime.Seconds`，`gameTime.TotalSeconds`但还没有确定。

我的游戏是基于 WP7/WP8

有谁知道我该怎么做？

**编辑：**

我刚刚试过这个：

`if (gameTime.TotalSeconds % 30 == 0) { Speed += SpeedAcceleration; }`

但它始终属于 if 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:11:58.767

像这样的东西应该工作

```
int timeSnapshot = 0;
if(gameTime.ElapsedGameTime.TotalSeconds - timeSnapshot >= 10){
Speed += SpeedAcceleration;
timeSnapshot = gameTime.ElapsedGameTime.TotalSeconds;} 
```

# uiview - iOS6：使用 tabViewBar 将值从一个视图传输到另一个视图

> ID：15746739
> 
> 赞同：1
> 
> 时间：2013-04-01T15:52:48.587
> 
> 标签：uiview, ios6, uitabbar

我在 iOS6 中开发了一个使用 tabBarNavigation 的应用程序。Tab1 是主视图。Tab2 的视图包含应该影响数据在主视图 (Tab1) 中的显示方式的选项。

问题是：如何将值从 view2 传输到主视图？即使我对两个视图都使用相同的 viewController，它也不起作用。当我在 view2 中设置 BOOL 时，主视图中的 BOOL 没有改变......可能是因为控制器类有两个不同的实例:-)

那么，如何在 iOS 6 中做到这一点？

谢谢。

# asp.net - 视图状态和动态创建的用户控件 - 第一次回发清除控件内容

> ID：15746740
> 
> 赞同：2
> 
> 时间：2013-04-01T15:52:49.647
> 
> 标签：asp.net, user-controls, updatepanel, postback

我希望你无限的知识可以帮助我解决这个问题，我找不到任何类似的问题来得到答案。

**概述如果代码是 tl;dr 或反之亦然**
我有一系列用户控件，每个都是一个输入表单，提交时会生成一封电子邮件并将其在内部发送到任何相关位置。所有表格都出现在同一页面上，结构如下。

我有一个更新面板 - 在更新面板中有一个多视图，其中一个视图包含所有电子邮件表单的用户控件。这个控件，EmailForms.ascx - 本质上是一个 1 行，2 个单元格的表格，左侧单元格中有一个树视图，右侧单元格中有一个占位符。树视图中每个叶节点的值包含要加载到占位符中的子电子邮件表单用户控件的 URL。加载控件时，URL 存储在会话状态中，`Page_Init`如果子电子邮件表单需要回发，则重新加载。

每个单独的电子邮件表单都有自己的提交按钮，并`ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(btn_Submit)`在`Page_Init`函数中调用。如果任何表单有其他需要引起回发的元素，它们就会以这种方式注册。

**问题**
一切都几乎完美运行 - 我的问题特别是在我更改显示哪个子电子邮件表单*后*的第一次回发，当用户填写表单并点击提交时，所有输入区域都被清除，所有验证器都显示为 false 和不生成电子邮件。每次后续回发都会正常工作，直到再次将子电子邮件表单更改为另一个表单。要加载的第一个电子邮件表单不会遇到此问题。

谁能建议导致这种行为的原因以及我如何防止它？这可能是在尝试提交先前加载的表单的视图状态中的值吗？

**默认.aspx**

```
<body>
  <form id="MainForm" runat="server">
        <asp:ScriptManager ID="NavigatorScriptManager" runat="server" EnablePartialRendering="true">
        </asp:ScriptManager>
        <!-- irrelevant stuff omitted -->
        <asp:UpdatePanel ID="upd_Pan1" runat="server" >
            <ContentTemplate>
            <asp:MultiView ID="multi_MainRealContent" runat="server" ActiveViewIndex="0" >
                    <!-- Other views are fine -->
                    <asp:View runat="server" ID="View4">
                        <asp:Panel runat="server" ID="Panel5" CssClass="ViewContainer LeftAlignment">
                            <UsrCtrl:EmailForms ID="Sp_Emails" runat="server" width="95%" />
                        </asp:Panel>
                    </asp:View>

            </asp:MultiView>
            </ContentTemplate>
        </asp:UpdatePanel>

    </form>
</body> 
```

**电子邮件表单.ascx**

```
<asp:Table runat="server" ID="tbl_ToolSelect" Width="100%" CellSpacing="0" CssClass="LayoutTable EmailFormsTable">
    <asp:TableRow ID="TableRow1" runat="server">
        <asp:TableCell ID="TableCell1" runat="server" Width="300px">
            <asp:TreeView runat="server" ID="tree_EmailForms" 
              DataSourceID="xml_EmailForms"
              ExpandDepth="0" ShowLines="false"
              NodeIndent="10" NodeWrap="True" PopulateNodesFromClient="false"
              ShowExpandCollapse="True" >
        <DataBindings>
          <asp:TreeNodeBinding DataMember="Pillar" TextField="id" SelectAction="None" PopulateOnDemand="False" />
          <asp:TreeNodeBinding DataMember="Group" TextField="id" SelectAction="None" PopulateOnDemand="False" />
          <asp:TreeNodeBinding DataMember="Form" TextField="id" ValueField="url" SelectAction="Select" PopulateOnDemand="False" />
        </DataBindings>
      </asp:TreeView>
        </asp:TableCell>
        <asp:TableCell ID="TableCell2" runat="server" >
            <asp:PlaceHolder runat="server" ID="Ctrl_Placeholder"></asp:PlaceHolder>
        </asp:TableCell>
    </asp:TableRow>
</asp:Table>

<asp:XmlDataSource ID="xml_EmailForms" runat="server" DataFile="EmailFormHeirarchy.xml" XPath="ROOT/*"></asp:XmlDataSource> 
```

**电子邮件表单.ascx.vb**

```
Protected Sub Page_Init(sender As Object, e As System.EventArgs) Handles Me.Init

    If (Not Session Is Nothing) AndAlso (Not Session("LastControl") Is Nothing) Then 'ONLY if we have selected an email form previously
      'reload the UserControl
      Dim ctrl As UserControl = LoadControl(Session("LastControl"))
      Ctrl_Placeholder.Controls.Add(ctrl)
    End If

  End Sub

  Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(tree_EmailForms)
    Page.ClientScript.RegisterClientScriptBlock(Me.GetType, "EmailFormsCSS", "<link href='EmailForms/EmailForms.css' rel='stylesheet' type='text/css' />")
  End Sub

  Protected Sub tree_EmailForms_SelectedNodeChanged(sender As Object, e As System.EventArgs) Handles tree_EmailForms.SelectedNodeChanged

    Try
      Ctrl_Placeholder.Controls.Clear()

      Dim ctrl As UserControl = LoadControl(tree_EmailForms.SelectedNode.Value)
      Ctrl_Placeholder.Controls.Add(ctrl)

      Session("LastControl") = tree_EmailForms.SelectedNode.Value

    Catch ex As System.Exception
      //Occasional viewstate errors if there has been a long time between postbacks
      SharedFunctions.LogError(Me.Page, ex.Message, ex.StackTrace)
    End Try

  End Sub 
```

**GenericChildEmailForm.ascx**

```
<div class="descriptionArea">
  <h2 class="centered">FORM HEADING</h2>
  <p>FORM DESCRIPTION</p>
</div>

<div runat="server" id="inputArea" class="inputArea">
  <asp:Table ID="inputTable" runat="server" CssClass="inputTable">

    <asp:TableRow>
      <asp:TableHeaderCell CssClass="LeftColumn">
        <asp:Label runat="server" Text="FIELD HEADING"></asp:Label>
        <asp:RequiredFieldValidator runat="server" ID="val_req_ID" ControlToValidate="ID" Display="Dynamic" EnableClientScript="true" ErrorMessage="MESSAGE"> *</asp:RequiredFieldValidator>
      </asp:TableHeaderCell>
      <asp:TableCell CssClass="RightColumn">
        <asp:Textbox runat="server" id="ID" width="98%"></asp:textbox>
      </asp:TableCell>
    </asp:TableRow>

    <!-- repeat the above table row as required -->

    <asp:TableRow>
      <asp:TableCell ID="cell_HR" ColumnSpan="2">
      <div style="width:98%"><hr /></div>
      </asp:TableCell>
    </asp:TableRow>

    <asp:TableRow>
      <asp:TableCell ID="cell_Submit" ColumnSpan="2">
        <asp:Button runat="server" ID="btn_Submit" Text="Submit" Width="98%" Height="30px" CausesValidation="true" />
      </asp:TableCell>
    </asp:TableRow>
  </asp:Table>
</div>

<div runat="server" id="errorArea" class="errorArea">
  <asp:ValidationSummary runat="server" ID="val_Sumamry" DisplayMode="BulletList" ShowMessageBox="true" ShowSummary="false" />
</div>

<div runat="server" id="outputArea" class="confirmationArea">
</div> 
```

**GenericChildEmailForm.ascx.vb**

```
Protected Sub Page_Init(sender As Object, e As System.EventArgs) Handles Me.Init
  ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(btn_Submit)
End Sub

Protected Sub btn_Submit_Click(sender As Object, e As System.EventArgs) Handles btn_Submit.Click

    //this function iterates over the input table and extracts the value fields of whatever controls appear in the cells. <hr> and submit rows excluded.
  Dim emailBody As String = SharedFunctions.PrepareEmailBody(inputTable, Me.Page) 

  SharedFunctions.Send_Email("toAddress", "fromAddress", "displayName", "subject", emailBody)

  outputArea.InnerHtml = "<h3>Email Sent</h3><p>A copy for your notes...</p><hr />" & emailBody

  LogUsage() //in local database

  SharedFunctions.ClearForm(FindControl("inputArea"))

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:00:10.247

这是通过根据子控件的文件路径在创建和重新加载时为每个控件分配一个 ID 来解决的。
如果不这样做，我假设无论加载哪个控件，自动生成的 ID 都是相同的，并且视图状态是第一次后续回发时的问题，因为存储的控件状态与页面上的控件不匹配。

# mysql - mysql插入不能用select进入outfile？

> ID：15746743
> 
> 赞同：0
> 
> 时间：2013-04-01T15:52:57.560
> 
> 标签：mysql, insert

```
mysql> insert into helpme set user=(select 0x616361 into outfile 'c://windows//temp//test.ini');
Database changed

mysql> select * from helpme;
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+
| user                                                                                                                                                                                                                                    | id    |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+
| a                                                                                                                                                                                                                                       |     1 |                                                                                                                                                                                                                                  | 37833 |
| aca                                                                                                                                                                                                                                     | 37834 |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------+
2 rows in set 
```

为什么用户是aca？找不到文件（c://windows//temp//test.ini）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T09:40:29.020

# iphone - 处理一个空的 UITableView。打印友好消息

> ID：15746745
> 
> 赞同：142
> 
> 时间：2013-04-01T15:52:59.837
> 
> 标签：iphone, ios, uitableview, uiview

我有一个 UITableView，在某些情况下它是空的是合法的。因此，与其显示应用程序的背景图像，我更愿意在屏幕上打印一条友好的消息，例如：

> 此列表现在为空

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2013-07-02T22:20:36.167

UITableView 的 backgroundView 属性是你的朋友。

在您应该确定表是否为空的`viewDidLoad`地方或任何地方，`reloadData`并使用包含 UILabel 的 UIView 更新 UITableView 的 backgroundView 属性，或者将其设置为 nil。就是这样。

当然可以让 UITableView 的数据源执行双重任务并返回一个特殊的“列表为空”单元格，这让我觉得很杂乱。突然`numberOfRowsInSection:(NSInteger)section`必须计算其他部分的行数，以确保它们也是空的。您还需要创建一个包含空消息的特殊单元格。另外不要忘记您可能需要更改单元格的高度以容纳空消息。这一切都是可行的，但它似乎是创可贴之上的创可贴。

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2017-07-18T04:16:39.380

与 Jhonston 的回答相同，但我更喜欢它作为扩展：

```
import UIKit

extension UITableView {

    func setEmptyMessage(_ message: String) {
        let messageLabel = UILabel(frame: CGRect(x: 0, y: 0, width: self.bounds.size.width, height: self.bounds.size.height))
        messageLabel.text = message
        messageLabel.textColor = .black
        messageLabel.numberOfLines = 0
        messageLabel.textAlignment = .center
        messageLabel.font = UIFont(name: "TrebuchetMS", size: 15)
        messageLabel.sizeToFit()

        self.backgroundView = messageLabel
        self.separatorStyle = .none
    }

    func restore() {
        self.backgroundView = nil
        self.separatorStyle = .singleLine
    }
} 
```

用法：

```
override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    if things.count == 0 {
        self.tableView.setEmptyMessage("My Message")
    } else {
        self.tableView.restore()
    }

    return things.count
} 
```

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2016-06-05T14:13:45.077

根据此处的答案，这是我制作的快速课程，您可以在`UITableViewController`.

```
import Foundation
import UIKit

class TableViewHelper {

    class func EmptyMessage(message:String, viewController:UITableViewController) {
        let rect = CGRect(origin: CGPoint(x: 0,y :0), size: CGSize(width: self.view.bounds.size.width, height: self.view.bounds.size.height))
        let messageLabel = UILabel(frame: rect)
        messageLabel.text = message
        messageLabel.textColor = UIColor.blackColor()
        messageLabel.numberOfLines = 0;
        messageLabel.textAlignment = .Center;
        messageLabel.font = UIFont(name: "TrebuchetMS", size: 15)
        messageLabel.sizeToFit()

        viewController.tableView.backgroundView = messageLabel;
        viewController.tableView.separatorStyle = .None;
    }
} 
```

在你的`UITableViewController`你可以打电话给`numberOfSectionsInTableView(tableView: UITableView) -> Int`

```
override func numberOfSectionsInTableView(tableView: UITableView) -> Int {
    if projects.count > 0 {
        return 1
    } else {
        TableViewHelper.EmptyMessage("You don't have any projects yet.\nYou can create up to 10.", viewController: self)
        return 0
    }
} 
```

[![在此处输入图像描述](https://i.stack.imgur.com/wpbHj.png)](https://i.stack.imgur.com/wpbHj.png)

在[http://www.appcoda.com/pull-to-refresh-uitableview-empty/的帮助下](http://www.appcoda.com/pull-to-refresh-uitableview-empty/)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-06-05T14:30:03.330

我推荐以下库：[DZNEmptyDataSet](https://github.com/dzenbot/DZNEmptyDataSet)

将它添加到项目中的最简单方法是将它与 Cocoopods 一起使用，如下所示：`pod 'DZNEmptyDataSet'`

在您的 TableViewController 中添加以下导入语句 (Swift)：

```
import DZNEmptyDataSet 
```

然后确保你的类符合`DNZEmptyDataSetSource`and`DZNEmptyDataSetDelegate`像这样：

```
class MyTableViewController: UITableViewController, DZNEmptyDataSetSource, DZNEmptyDataSetDelegate 
```

在您`viewDidLoad`添加以下代码行：

```
tableView.emptyDataSetSource = self
tableView.emptyDataSetDelegate = self
tableView.tableFooterView = UIView() 
```

现在你需要做的就是显示空状态：

```
//Add title for empty dataset
func titleForEmptyDataSet(scrollView: UIScrollView!) -> NSAttributedString! {
    let str = "Welcome"
    let attrs = [NSFontAttributeName: UIFont.preferredFontForTextStyle(UIFontTextStyleHeadline)]
    return NSAttributedString(string: str, attributes: attrs)
}

//Add description/subtitle on empty dataset
func descriptionForEmptyDataSet(scrollView: UIScrollView!) -> NSAttributedString! {
    let str = "Tap the button below to add your first grokkleglob."
    let attrs = [NSFontAttributeName: UIFont.preferredFontForTextStyle(UIFontTextStyleBody)]
    return NSAttributedString(string: str, attributes: attrs)
}

//Add your image
func imageForEmptyDataSet(scrollView: UIScrollView!) -> UIImage! {
    return UIImage(named: "MYIMAGE")
}

//Add your button 
func buttonTitleForEmptyDataSet(scrollView: UIScrollView!, forState state: UIControlState) -> NSAttributedString! {
    let str = "Add Grokkleglob"
    let attrs = [NSFontAttributeName: UIFont.preferredFontForTextStyle(UIFontTextStyleCallout)]
    return NSAttributedString(string: str, attributes: attrs)
}

//Add action for button
func emptyDataSetDidTapButton(scrollView: UIScrollView!) {
    let ac = UIAlertController(title: "Button tapped!", message: nil, preferredStyle: .Alert)
    ac.addAction(UIAlertAction(title: "Hurray", style: .Default, handler: nil))
    presentViewController(ac, animated: true, completion: nil)
} 
```

这些方法不是强制性的，也可以只显示没有按钮的空状态等。

**对于斯威夫特 4**

```
// MARK: - Deal with the empty data set
// Add title for empty dataset
func title(forEmptyDataSet _: UIScrollView!) -> NSAttributedString! {
    let str = "Welcome"
    let attrs = [NSAttributedStringKey.font: UIFont.preferredFont(forTextStyle: UIFontTextStyle.headline)]
    return NSAttributedString(string: str, attributes: attrs)
}

// Add description/subtitle on empty dataset
func description(forEmptyDataSet _: UIScrollView!) -> NSAttributedString! {
    let str = "Tap the button below to add your first grokkleglob."
    let attrs = [NSAttributedStringKey.font: UIFont.preferredFont(forTextStyle: UIFontTextStyle.body)]
    return NSAttributedString(string: str, attributes: attrs)
}

// Add your image
func image(forEmptyDataSet _: UIScrollView!) -> UIImage! {
    return UIImage(named: "MYIMAGE")
}

// Add your button
func buttonTitle(forEmptyDataSet _: UIScrollView!, for _: UIControlState) -> NSAttributedString! {
    let str = "Add Grokkleglob"
    let attrs = [NSAttributedStringKey.font: UIFont.preferredFont(forTextStyle: UIFontTextStyle.callout), NSAttributedStringKey.foregroundColor: UIColor.white]
    return NSAttributedString(string: str, attributes: attrs)
}

// Add action for button
func emptyDataSetDidTapButton(_: UIScrollView!) {
    let ac = UIAlertController(title: "Button tapped!", message: nil, preferredStyle: .alert)
    ac.addAction(UIAlertAction(title: "Hurray", style: .default, handler: nil))
    present(ac, animated: true, completion: nil)
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-04-01T15:57:09.573

一种方法是修改您的数据源以`1`在行数为零时返回，并在该方法中生成一个特殊用途的单元格（可能具有不同的单元格标识符）`tableView:cellForRowAtIndexPath:`。

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSInteger actualNumberOfRows = <calculate the actual number of rows>;
    return (actualNumberOfRows  == 0) ? 1 : actualNumberOfRows;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSInteger actualNumberOfRows = <calculate the actual number of rows>;
    if (actualNumberOfRows == 0) {
        // Produce a special cell with the "list is now empty" message
    }
    // Produce the correct cell the usual way
    ...
} 
```

如果您需要维护多个表视图控制器，这可能会变得有些复杂，因为有人最终会忘记插入零检查。更好的方法是创建一个单独的实现，该`UITableViewDataSource`实现总是返回带有可配置消息的单行（我们称之为`EmptyTableViewDataSource`）。当表视图控制器管理的数据发生变化时，管理变化的代码会检查数据是否为空。如果它不为空，请将您的表视图控制器设置为其常规数据源；否则，将其设置为`EmptyTableViewDataSource`已配置适当消息的实例。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-02-03T11:40:11.813

我一直在为此使用 titleForFooterInSection 消息。我不知道这是否是次优的，但它有效。

```
-(NSString*)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section   {

    NSString *message = @"";
    NSInteger numberOfRowsInSection = [self tableView:self.tableView numberOfRowsInSection:section ];

    if (numberOfRowsInSection == 0) {
        message = @"This list is now empty";
    }

    return message;
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-04-18T00:14:59.527

我只能建议在单元格之后将 UITextView 拖放到 TableView 中。与 ViewController 建立连接并在适当的时候隐藏/显示它（例如，每当表重新加载时）。

[![在此处输入图像描述](https://i.stack.imgur.com/YCA2Q.png)](https://i.stack.imgur.com/YCA2Q.png)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-12-08T13:52:22.823

因此，为了更安全的解决方案：

```
extension UITableView {
func setEmptyMessage(_ message: String) {
    guard self.numberOfRows() == 0 else {
        return
    }
    let messageLabel = UILabel(frame: CGRect(x: 0, y: 0, width: self.bounds.size.width, height: self.bounds.size.height))
    messageLabel.text = message
    messageLabel.textColor = .black
    messageLabel.numberOfLines = 0;
    messageLabel.textAlignment = .center;
    messageLabel.font = UIFont.systemFont(ofSize: 14.0, weight: UIFontWeightMedium)
    messageLabel.sizeToFit()

    self.backgroundView = messageLabel;
    self.separatorStyle = .none;
}

func restore() {
    self.backgroundView = nil
    self.separatorStyle = .singleLine
}

public func numberOfRows() -> Int {
    var section = 0
    var rowCount = 0
    while section < numberOfSections {
        rowCount += numberOfRows(inSection: section)
        section += 1
    }
    return rowCount
  }
} 
```

以及`UICollectionView`：

```
extension UICollectionView {
func setEmptyMessage(_ message: String) {
    guard self.numberOfItems() == 0 else {
        return
    }

    let messageLabel = UILabel(frame: CGRect(x: 0, y: 0, width: self.bounds.size.width, height: self.bounds.size.height))
    messageLabel.text = message
    messageLabel.textColor = .black
    messageLabel.numberOfLines = 0;
    messageLabel.textAlignment = .center;
    messageLabel.font = UIFont.systemFont(ofSize: 18.0, weight: UIFontWeightSemibold)
    messageLabel.sizeToFit()
    self.backgroundView = messageLabel;
}

func restore() {
    self.backgroundView = nil
}

public func numberOfItems() -> Int {
    var section = 0
    var itemsCount = 0
    while section < self.numberOfSections {
        itemsCount += numberOfItems(inSection: section)
        section += 1
    }
    return itemsCount
  }
} 
```

更通用的解决方案：

```
 protocol EmptyMessageViewType {
      mutating func setEmptyMessage(_ message: String)
      mutating func restore()
    }

    protocol ListViewType: EmptyMessageViewType where Self: UIView {
      var backgroundView: UIView? { get set }
    }

    extension UITableView: ListViewType {}
    extension UICollectionView: ListViewType {}

    extension ListViewType {
      mutating func setEmptyMessage(_ message: String) {
        let messageLabel = UILabel(frame: CGRect(x: 0,
                                                 y: 0,
                                                 width: self.bounds.size.width,
                                                 height: self.bounds.size.height))
        messageLabel.text = message
        messageLabel.textColor = .black
        messageLabel.numberOfLines = 0
        messageLabel.textAlignment = .center
        messageLabel.font = UIFont(name: "TrebuchetMS", size: 16)
        messageLabel.sizeToFit()

        backgroundView = messageLabel
    }

     mutating func restore() {
        backgroundView = nil
     }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-09-06T19:49:03.933

使用 backgroundView 很好，但它不像在 Mail.app 中那样很好地滚动。

我做了类似于[xtravar](https://stackoverflow.com/a/22444746/4113940)所做的事情。

我在`tableViewController`. [![等级制度](https://i.stack.imgur.com/o2myj.png)](https://i.stack.imgur.com/o2myj.png)

然后我在中使用了以下代码`tableView:numberOfRowsInSection:`：

```
if someArray.count == 0 {
    // Show Empty State View
    self.tableView.addSubview(self.emptyStateView)
    self.emptyStateView.center = self.view.center
    self.emptyStateView.center.y -= 60 // rough calculation here
    self.tableView.separatorColor = UIColor.clear
} else if self.emptyStateView.superview != nil {
    // Empty State View is currently visible, but shouldn't
    self.emptyStateView.removeFromSuperview()
    self.tableView.separatorColor = nil
}

return someArray.count 
```

基本上我添加了`emptyStateView`作为`tableView`对象的子视图。由于分隔符会与视图重叠，我将它们的颜色设置为`clearColor`. 要返回默认分隔符颜色，您只需将其设置为`nil`.

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-01-12T16:10:33.793

根据[Apple](https://developer.apple.com/library/content/featuredarticles/ViewControllerPGforiPhoneOS/ImplementingaContainerViewController.html#//apple_ref/doc/uid/TP40007457-CH11-SW1)的说法，使用 Container View Controller 是正确的方法。

我将所有空状态视图放在单独的故事板中。每个都在它自己的 UIViewController 子类下。我直接在他们的根视图下添加内容。如果需要任何操作/按钮，您现在已经有了一个控制器来处理它。
然后只需从该 Storyboard 实例化所需的视图控制器，将其添加为子视图控制器并将容器视图添加到 tableView 的层次结构（子视图）。您的空状态视图也将是可滚动的，这感觉很好，并允许您实现拉动刷新。

[阅读](https://developer.apple.com/library/content/featuredarticles/ViewControllerPGforiPhoneOS/ImplementingaContainerViewController.html#//apple_ref/doc/uid/TP40007457-CH11-SW1)*“将子视图控制器添加到您的内容”一*章以获取有关如何实现的帮助。

只要确保将子视图框架设置为 `(0, 0, tableView.frame.width, tableView.frame.height)`，事物就会正确居中和对齐。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-09-06T18:31:07.597

这是最好和最简单的解决方案。

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 60)];
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 60)];
label.text = @"This list is empty";
label.center = self.view.center;
label.textAlignment = NSTextAlignmentCenter;
[view addSubview:label];

self.tableView.backgroundView = view; 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-08-15T14:46:00.423

**多个数据集和部分**有一个特定的用例，其中每个部分都需要一个空状态。

您可以使用此问题的多个答案中提到的建议 - 提供自定义的空状态单元格。

我将尝试以编程方式更详细地引导您完成所有步骤，希望这会有所帮助。这是我们可以预期的结果：

[![在此处输入图像描述](https://i.stack.imgur.com/3tGYg.png)](https://i.stack.imgur.com/3tGYg.png)

为简单起见，我们将使用 2 个数据集（2 个部分），它们将是静态的。

我还将假设您的 tableView 逻辑的其余部分可以与数据集、tabvleView 单元格和部分正常工作。

**Swift 5**，让我们这样做：

**1、创建自定义空状态UITableViewCell类：**

```
class EmptyTableViewCell: UITableViewCell {

    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)
        setupView()
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    let label: UILabel = {
        let label = UILabel()
        label.translatesAutoresizingMaskIntoConstraints = false
        label.text = "Empty State Message"
        label.font = .systemFont(ofSize: 16)
        label.textColor = .gray
        label.textAlignment = .left
        label.numberOfLines = 1
        return label
    }()

    private func setupView(){
        contentView.addSubviews(label)
        let layoutGuide = contentView.layoutMarginsGuide
        NSLayoutConstraint.activate([
            label.leadingAnchor.constraint(equalTo: layoutGuide.leadingAnchor),
            label.topAnchor.constraint(equalTo: layoutGuide.topAnchor),
            label.bottomAnchor.constraint(equalTo: layoutGuide.bottomAnchor),
            label.trailingAnchor.constraint(equalTo: layoutGuide.trailingAnchor),
            label.heightAnchor.constraint(equalToConstant: 50)
        ])
    }
} 
```

**2\. 将以下内容添加到您的 UITableViewController 类以注册您的空单元格：**

```
class TableViewController: UITableViewController {
    ...
    let emptyCellReuseIdentifier = "emptyCellReuseIdentifier"
    ...
    override func viewDidLoad(){
        ...
        tableView.register(EmptyTableViewCell.self, forCellReuseIdentifier: emptyCellReuseIdentifier)
        ...
    }
} 
```

**3\. 现在让我们强调上面提到的一些假设：**

```
class TableViewController: UITableViewController {
    // 2 Data Sets
    var firstDataSet: [String] = []
    var secondDataSet: [String] = []

    // Sections array
    let sections: [SectionHeader] = [
        .init(id: 0, title: "First Section"),
        .init(id: 1, title: "Second Section")
    ]
    ...
    // MARK: - Table view data source
    override func numberOfSections(in tableView: UITableView) -> Int {
        sections.count
    }
    override func tableView(_ tableView: UITableView, titleForHeaderInSection section: Int) -> String? {
        return sections[section].title
    }
        ...
    }

struct SectionHeader {
    let id: Int
    let title: String
} 
```

**4\. 现在让我们在我们的数据源中添加一些自定义逻辑来处理我们部分中的空行。如果数据集为空，我们将返回 1 行：**

```
class TableViewController: UITableViewController {
    ...
    // MARK: - Table view data source
    ...
    override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        switch section{
        case 0:
            let numberOfRows = firstDataSet.isEmpty ? 1 : firstDataSet.count
            return numberOfRows          
        case 1:
            let numberOfRows = secondDataSet.isEmpty ? 1 : secondDataSet.count
            return numberOfRows   
        default:
            return 0
        }
    }
    ...
} 
```

**5\. 最后，最重要的“cellForRowAt indexPath”：**

```
class TableViewController: UITableViewController {
    ...
    // MARK: - Table view data source
    ...
    override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {

        // Handle Empty Rows State
        switch indexPath.section {
        case 0:
            if firstDataSet.isEmpty {
                if let cell = tableView.dequeueReusableCell(withIdentifier: emptyCellReuseIdentifier) as? EmptyTableViewCell {
                    cell.label.text = "First Data Set Is Empty"
                    return cell
                }
            }
        case 1:
            if secondDataSet.isEmpty {
                if let cell = tableView.dequeueReusableCell(withIdentifier: emptyCellReuseIdentifier) as? EmptyTableViewCell {
                    cell.label.text = "Second Data Set Is Empty"
                    return cell
                }
            }
        default:
            break
        }

        // Handle Existing Data Sets
        if let cell = tableView.dequeueReusableCell(withIdentifier: cellReuseIdentifier, for: indexPath) as? TableViewCell {
            switch indexPath.section {
            case 0:
                ...
            case 1:
                ...
            default:
                break
            }
            return cell
        }

        return UITableViewCell()
    }
    ...
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-03-16T23:53:32.070

首先，其他流行方法的问题。

**背景视图**

如果您要使用将其设置为 UILabel 的简单情况，背景视图不会很好地居中。

**用于显示消息的单元格、页眉或页脚**

这会干扰您的功能代码并引入奇怪的边缘情况。如果你想完美地集中你的信息，那会增加另一个层次的复杂性。

**滚动你自己的表格视图控制器**

您失去了内置功能，例如 refreshControl，并重新发明了轮子。坚持使用 UITableViewController 以获得最佳的可维护结果。

**添加 UITableViewController 作为子视图控制器**

我有一种感觉，您最终会在 iOS 7+ 中遇到 contentInset 问题 - 再加上为什么要让事情复杂化？

**我的解决方案**

我想出的最佳解决方案（当然，这并不理想）是制作一个特殊的视图，它可以位于滚动视图的顶部并采取相应的行动。这显然在 iOS 7 中变得复杂，带有 contentInset 疯狂，但它是可行的。

您需要注意的事项：

*   表格分隔符在 reloadData 期间的某个时候被带到前面 - 你需要防止这种情况
*   contentInset/contentOffset - 在你的特殊视图上观察这些键
*   键盘 - 如果您不希望键盘妨碍您，那就另当别论了
*   自动布局 - 您不能依赖帧更改来定位您的视图

一旦你在一个 UIView 子类中弄清楚了这一点，你就可以将它用于一切——加载微调器、禁用视图、显示错误消息等。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-03-09T12:14:30.957

您可以将其添加到您的 Base 类中。

```
var messageLabel = UILabel()

func showNoDataMessage(msg: String) {
    let rect = CGRect(origin: CGPoint(x: 0, y :self.view.center.y), size: CGSize(width: self.view.bounds.width - 16, height: 50.0))
    messageLabel = UILabel(frame: rect)
    messageLabel.center = self.view.center
    messageLabel.text = msg
    messageLabel.numberOfLines = 0
    messageLabel.textColor = Colors.grayText
    messageLabel.textAlignment = .center;
    messageLabel.font = UIFont(name: "Lato-Regular", size: 17)
    self.view.addSubview(messageLabel)
    self.view.bringSubviewToFront(messageLabel)
} 
```

在从 api 获取数据的类中显示它。

```
func populateData(dataSource : [PRNJobDataSource]){
    self.dataSource = dataSource
    self.tblView.reloadData()
    if self.dataSource.count == 0 {self.showNoDataMessage(msg: "No data found.")}
} 
```

像这样隐藏它。

```
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    if self.dataSource.count > 0 {self.hideNoDataMessage()}
    return dataSource.count
}

func hideNoDataMessage(){
    messageLabel.removeFromSuperview()
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-09-29T15:59:38.460

在情节提要中选择您的 tableviewController 场景

[![在此处输入图像描述](https://i.stack.imgur.com/XEVxD.png)](https://i.stack.imgur.com/XEVxD.png)

拖放 UIView 添加标签与您的消息（例如：无数据）

[![在此处输入图像描述](https://i.stack.imgur.com/zSeSD.png)](https://i.stack.imgur.com/zSeSD.png)

在 TableViewController 上创建 UIView 的出口（例如 yournoDataView）。

并在 viewDidLoad

self.tableView.backgroundView = yourNoDataView

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-06-22T08:28:28.480

显示空列表的消息，无论是**UITableView**还是**UICollectionView**。

```
extension UIScrollView {
    func showEmptyListMessage(_ message:String) {
        let rect = CGRect(origin: CGPoint(x: 0,y :0), size: CGSize(width: self.bounds.size.width, height: self.bounds.size.height))
        let messageLabel = UILabel(frame: rect)
        messageLabel.text = message
        messageLabel.textColor = .black
        messageLabel.numberOfLines = 0
        messageLabel.textAlignment = .center
        messageLabel.font = UIFont.systemFont(ofSize: 15)
        messageLabel.sizeToFit()

        if let `self` = self as? UITableView {
            self.backgroundView = messageLabel
            self.separatorStyle = .none
        } else if let `self` = self as? UICollectionView {
            self.backgroundView = messageLabel
        }
    }
} 
```

**用途：**

```
if cellsViewModels.count == 0 {
    self.tableView.showEmptyListMessage("No Product In List!")
} 
```

**或者：**

```
if cellsViewModels.count == 0 {
    self.collectionView?.showEmptyListMessage("No Product In List!")
} 
```

**请记住：** 不要忘记删除消息标签，以防刷新后会出现数据。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-08-16T11:34:57.667

最简单快捷的方法是将标签拖到 tableView 下的侧面板上。为 label 和 tableView 创建一个 outlet 并添加 if 语句以根据需要隐藏和显示 label 和 table。或者，您可以将 tableView.tableFooterView = UIView(frame: CGRect.zero) this 添加到 viewDidLoad() 以使空表感觉如果表和背景视图具有相同的颜色，则它是隐藏的。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-05-02T10:43:51.510

使用 Swift 4.2

```
 func numberOfSections(in tableView: UITableView) -> Int
{
    var numOfSections: Int = 0
    if self.medArray.count > 0
    {
        tableView.separatorStyle = .singleLine
        numOfSections            = 1
        tableView.backgroundView = nil
    }
    else
    {
        let noDataLabel: UILabel  = UILabel(frame: CGRect(x: 0, y: 0, width: tableView.bounds.size.width, height: tableView.bounds.size.height))
        noDataLabel.text          = "No  Medicine available.Press + to add New Pills "
        noDataLabel.textColor     = UIColor.black
        noDataLabel.textAlignment = .center
        tableView.backgroundView  = noDataLabel
        tableView.separatorStyle  = .none
    }
    return numOfSections
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-01-12T12:24:10.487

**Swift 版本，但更好更简单的形式。**3.0**

我希望它能达到你的目的......

在你的 UITableViewController 中。

```
override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    if searchController.isActive && searchController.searchBar.text != "" {
        if filteredContacts.count > 0 {
            self.tableView.backgroundView = .none;
            return filteredContacts.count
        } else {
            Helper.EmptyMessage(message: ConstantMap.NO_CONTACT_FOUND, viewController: self)
            return 0
        }
    } else {
        if contacts.count > 0 {
            self.tableView.backgroundView = .none;
            return contacts.count
        } else {
            Helper.EmptyMessage(message: ConstantMap.NO_CONTACT_FOUND, viewController: self)
            return 0
        }
    }
} 
```

**具有功能的助手类：**

```
 /* Description: This function generate alert dialog for empty message by passing message and
           associated viewcontroller for that function
           - Parameters:
            - message: message that require for  empty alert message
            - viewController: selected viewcontroller at that time
         */
        static func EmptyMessage(message:String, viewController:UITableViewController) {
            let messageLabel = UILabel(frame: CGRect(x: 0, y: 0, width: viewController.view.bounds.size.width, height: viewController.view.bounds.size.height))
            messageLabel.text = message
            let bubbleColor = UIColor(red: CGFloat(57)/255, green: CGFloat(81)/255, blue: CGFloat(104)/255, alpha :1)

            messageLabel.textColor = bubbleColor
            messageLabel.numberOfLines = 0;
            messageLabel.textAlignment = .center;
            messageLabel.font = UIFont(name: "TrebuchetMS", size: 18)
            messageLabel.sizeToFit()

            viewController.tableView.backgroundView = messageLabel;
            viewController.tableView.separatorStyle = .none;
        } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-07-05T07:37:40.663

可能不是最好的解决方案，但我只是在表格底部放了一个标签，如果行 = 0，那么我给它分配了一些文本。非常简单，只需几行代码即可实现您想要做的事情。

我的表中有两个部分（工作和学校）

```
 func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {

    if (jobs.count == 0 && schools.count == 0) {
        emptyLbl.text = "No jobs or schools"
    } else {
        emptyLbl.text = ""
    } 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-08-25T13:52:58.267

我做了一些更改，这样我们就不需要手动检查计数，我还为标签添加了约束，这样无论消息有多大都不会出错，如下所示：

```
extension UITableView {

    fileprivate func configureLabelLayout(_ messageLabel: UILabel) {
        messageLabel.translatesAutoresizingMaskIntoConstraints = false
        let labelTop: CGFloat = CGFloat(UIDevice.current.userInterfaceIdiom == .pad ? 25:15)
        messageLabel.topAnchor.constraint(equalTo: backgroundView?.topAnchor ?? NSLayoutAnchor(), constant: labelTop).isActive = true
        messageLabel.widthAnchor.constraint(equalTo: backgroundView?.widthAnchor ?? NSLayoutAnchor(), constant: -20).isActive = true
        messageLabel.centerXAnchor.constraint(equalTo: backgroundView?.centerXAnchor ?? NSLayoutAnchor(), constant: 0).isActive = true
    }

    fileprivate func configureLabel(_ message: String) {
        let messageLabel = UILabel(frame: CGRect(x: 0, y: 0, width: self.bounds.size.width, height: self.bounds.size.height))
        messageLabel.textColor = .black
        messageLabel.numberOfLines = 0
        messageLabel.textAlignment = .center
        let fontSize = CGFloat(UIDevice.current.userInterfaceIdiom == .pad ? 25:15)
        let font: UIFont = UIFont(name: "MyriadPro-Regular", size: fontSize) ?? UIFont()
        messageLabel.font = font
        messageLabel.text = message
        self.backgroundView = UIView()
        self.backgroundView?.addSubview(messageLabel)
        configureLabelLayout(messageLabel)
        self.separatorStyle = .none
    }

    func setEmptyMessage(_ message: String, _ isEmpty: Bool) {
        if isEmpty { // instead of making the check in every TableView DataSource in the project
            configureLabel(message)
        }
        else {
            restore()
        }

    }

    func restore() {
        self.backgroundView = nil
        self.separatorStyle = .singleLine
    }
} 
```

**用法**

```
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        let message: String = "The list is empty."
        ticketsTableView.setEmptyMessage(message, tickets.isEmpty)
        return self.tickets.count
    } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-03-09T12:03:11.193

或者，您可以使用一些可定制的轻量级库

[SwiftEmptyState](https://github.com/EnesKaraosman/SwiftEmptyState)

# mysql - MySQL 计算百分比

> ID：15746749
> 
> 赞同：33
> 
> 时间：2013-04-01T15:53:32.387
> 
> 标签：mysql, percentage

我有一个包含 4 个项目的 MySQL 数据库：（`id`数字）`group_name`、、、`employees`和`surveys`。

在我`SELECT`的工作中，我需要根据“调查”中的人数来计算参加调查的“员工”的百分比。

这是我现在的声明：

```
SELECT
  group_name,
  employees,
  surveys,
  COUNT( surveys ) AS test1, 
  ((COUNT( * ) / ( SELECT COUNT( * ) FROM a_test)) * 100 ) AS percentage
FROM
  a_test
GROUP BY
  employees 
```

这是目前的表格：

```
INSERT INTO a_test (id, group_name, employees, surveys) VALUES
(1, 'Awesome Group A', '100', '0'),
(2, 'Awesome Group B', '200', '190'),
(3, 'Awesome Group C', '300', '290'); 
```

我很想计算参加调查`employees`的人数百分比`surveys`。即如上面的数据所示，`Awesome Group A`将是 0% 和`Awesome Group B`95%。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-01T16:05:44.650

试试这个

```
 SELECT group_name, employees, surveys, COUNT( surveys ) AS test1, 
        concat(round(( surveys/employees * 100 ),2),'%') AS percentage
    FROM a_test
    GROUP BY employees 
```

[**在这里演示**](http://www.sqlfiddle.com/#!2/c0761/5)

# informix - 存储过程异常错误码的限制

> ID：15746756
> 
> 赞同：2
> 
> 时间：2013-04-01T15:54:17.590
> 
> 标签：informix

我有一个使用“SYSTEM”命令调用java jar 的存储过程。此 jar 使用“exit(errorCode)”命令返回异常错误代码。如果错误代码低于 256，我可以在存储过程中找到正确的错误代码（在 smallint 变量中）。否则，返回随机错误代码。是否有任何限制导致这种行为？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:39:11.043

SYSTEM 语句的返回状态受 Unix O/S 限制为 0..255 范围内的值。您不能返回该范围之外的状态；和系列系统调用`exit()`仅`wait()`处理 8 位值。

# c# - 如何从 c# 中的 xaml 中的 x:name 获取值

> ID：15746762
> 
> 赞同：0
> 
> 时间：2013-04-01T15:54:54.163
> 
> 标签：c#, xaml, windows-8

作为我的问题，我想在 c# 中以编程方式从 x:name 中获取价值......我正在使用 c#/xaml 的 Metro 应用程序中工作。

```
 <Border x:Name="border1"  BorderBrush="Black">
        <Image Width="95" Height="95" />
    </Border> 
```

有没有办法在 c# 中获得“border1”？

# c# - 用于处理 MySQL 的带有队列的线程

> ID：15746765
> 
> 赞同：1
> 
> 时间：2013-04-01T15:54:59.453
> 
> 标签：c#, mysql, multithreading, background, queue

现在我在一个类中有很多 INSERT/UPDATE/DELETE/SELECT 方法。它们都共享一个 Connection、一个 DataReader 和一个 Command。但是在从数据库下载数据或上传数据时，它们会冻结 UI。在本地网络上没问题，但由于它使用外部服务器作为数据库，它有时会冻结。所以我想在另一个线程上创建所有 MySQL 类。

我需要类似 DoThisInAnotherThread(mysql.UpdateTable) 的东西。但是必须有某种队列，因为所有方法都使用相同的 Connection 和相同的 DataReader。并且让每一种方法来建立自己的连接看起来都不是最好的解决方案。

我正在寻找最好和最简单的解决方案。任务队列之类的东西，将由另一个线程检查并执行，但它不会为空。

我试过BackgroundWorker，但没有队列。我听说了一些关于启动自己的线程的事情，但我没有看到方法，如何让它运行并等待任务。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:55:13.043

您可能需要：

*   实现一个表示 sql 查询结果的类，比如`SQLResult`，它将进一步专门用于每种类型的查询。
*   专业化`Task<SQLResult>`（[文档](http://msdn.microsoft.com/en-us/library/dd321424%28VS.100%29.aspx)）：该类提供查询任务完成状态所需的 API。
*   使用`TaskScheduler`（[文档](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler%28v=vs.100%29.aspx)），它携带您正在寻找的排队语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:38:02.347

您可以使用工作队列，它将在单个线程上执行所有工作。在那里您可以保持单个 sql 连接，并且同步将很简单，因为所有命令都是按顺序执行的。

查看下面的示例 WorkQueue 实现（注意它缺少异常处理）：

```
using System;
using System.Threading;
using System.Threading.Tasks;
using System.Collections.Concurrent;

class App
{
  static void Main()
  {
    var q = new WorkQueue();
    q.Execute(() => Console.WriteLine("A"));
    q.Execute(() => Console.WriteLine("B"));
    Task<int> t = q.Execute(() => 33);

    Console.WriteLine(t.Result);
    q.Dispose();
  }

}

public class WorkQueue : IDisposable
{
  private readonly Thread thread;
  private readonly BlockingCollection<Action> queue;
  public WorkQueue()
  {
    this.queue = new BlockingCollection<Action>();
    this.thread = new Thread(DoWork);
    this.thread.Start();
  }

  public Task<T> Execute<T>(Func<T> f)
  {
    if (this.queue.IsCompleted) return null;
    var source = new TaskCompletionSource<T>();
    Execute(() => source.SetResult(f()));
    return source.Task;
  }

  public void Execute(Action f)
  {
    if (this.queue.IsCompleted) return;
    this.queue.Add(f);
  }

  public void Dispose()
  {
    this.queue.CompleteAdding();
    this.thread.Join();
  }

  private void DoWork()
  {
    foreach (var action in this.queue.GetConsumingEnumerable())
    {
      action();
    }
  }
} 
```

# handsontable - handsontable.com 如何将输入值记录到 mysql

> ID：15746769
> 
> 赞同：0
> 
> 时间：2013-04-01T15:55:09.720
> 
> 标签：handsontable

例如这里[http://warpech.github.com/jquery-handsontable/demo/handsontable.html](http://warpech.github.com/jquery-handsontable/demo/handsontable.html)

有一些教程（例子）如何将输入的数据记录到mysql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T00:15:40.773

该库已经提供了 save.php 脚本的示例： [https ://github.com/warpech/jquery-handsontable/blob/master/demo/php/save.php](https://github.com/warpech/jquery-handsontable/blob/master/demo/php/save.php)

所以你只需要为你自己的目的编辑它——在 PDO 驱动程序中将 SqLite 更改为 MySQL。

对于客户端脚本，您可以查看：[http](http://handsontable.com/demo/ajax.html) ://handsontable.com/demo/ajax.html 您有一个如何将数据发送到 PHP 服务器的示例。

# css - Impress.js Cube - 改变过渡的方向

> ID：15746770
> 
> 赞同：0
> 
> 时间：2013-04-01T15:55:09.850
> 
> 标签：css, impress.js

我在 impress.js 中制作了一个立方体作为我的第一个练习项目，除了从面 3 到 4 的过渡外，它工作正常。面 1、2、3、4 都平行于 Z 轴，从顶部看时以逆时针方向放置. 从 1 -> 2, 2 -> 3 （逆时针，从顶部）过渡是可以的，但从 3->4 过渡是顺时针的，即它移回 2 然后 1 然后 4。任何改变它的方法使它从3 -> 4 直接？

这是我的代码：

HTML

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset = "utf-8">
    <title>Cube using Impress.js</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body class="impress-not-supported">

    <div class="fallback-message">
            <!-- Message here -->
    </div>

    <div id="impress">

        <div id="face-1" class="step" data-z="350">
            This is face 1
        </div>

        <div id="face-2" class="step" data-x="350" data-rotate-y="90">
            This is face 2
        </div>

        <div id="face-3" class="step"data-z="-350" data-rotate-y="180">
            This is face 3
        </div>

        <div id="face-4" class="step" data-x="-350" data-rotate-y="-90">
            This is face 4
        </div>

        <div id="face-5" class="step" data-y="-350" data-rotate-x="90">
            This is face 5
        </div>

        <div id="face-6" class="step" data-y="350" data-rotate-x="-90">
            This is face 6
        </div>
    </div>

    <script src="impress.js"></script>
    <script>impress().init();</script>
</body>
</html> 
```

CSS

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

body {
    font: normal 70px/70px sans-serif;
    background: -webkit-radial-gradient(rgb(240, 240, 240), rgb(190, 190, 190));
}

b, strong { font-weight: bold }
i, em { font-style: italic }

.fallback-message {
    font-family: sans-serif;
    line-height: 1.3;

    width: 780px;
    padding: 10px 10px 0;
    margin: 20px auto;

    border: 1px solid #E4C652;
    border-radius: 10px;
    background: #EEDC94;
}

.fallback-message p {
    margin-bottom: 10px;
}

.impress-supported .fallback-message {
    display: none;
}

.step {
    -webkit-box-sizing: border-box;
    -webkit-backface-visibility: hidden;
    width: 700px;
    height: 700px;
    border: 1px solid black;
    text-align: center;
    padding: 25px;
    opacity: .3;
}

.step.active{ opacity: 1; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T11:41:05.733

每一步都应尽可能接近下一步。不是从 180 到 -90，而是转到 270（即使那是一样的）。

这段代码应该做你想做的事：

```
<div id="impress">

    <div id="face-1" class="step" data-z="350">
        This is face 1
    </div>

    <div id="face-2" class="step" data-x="350" data-rotate-y="90">
        This is face 2
    </div>

    <div id="face-3" class="step"data-z="-350" data-rotate-y="180">
        This is face 3
    </div>

    <div id="face-4" class="step" data-x="-350" data-rotate-y="270">
        This is face 4
    </div>

    <div id="face-5" class="step" data-y="-350" data-rotate-x="90" data-rotate-y="360">
        This is face 5
    </div>

    <div id="face-6" class="step" data-y="350" data-rotate-x="270" data-rotate-y="360">
        This is face 6
    </div>

</div> 
```

# jquery-mobile - jQuery Mobile Column Toggle 和 Knockoutjs 绑定表不能一起工作

> ID：15746771
> 
> 赞同：0
> 
> 时间：2013-04-01T15:55:11.830
> 
> 标签：jquery-mobile, knockout.js

我有一个表格，其中填充了基于淘汰模型的数据。我希望能够使用 jQuery mobile 的新列切换功能，但它不能与从淘汰模型填充的行正常工作。

如果有人能启发我，我不知道我怎么能让它发挥作用。

这是问题的一个jsfiddle，如果您注释掉

```
ko.applyBindings(viewModel); 
```

该表应该按预期工作，但应用绑定并且列行永远不会消失。

[http://jsfiddle.net/DyUHA/2/](http://jsfiddle.net/DyUHA/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:55:40.843

在 jQM 发布补丁之前，我采取了以下措施：

[http://jsfiddle.net/DyUHA/4/](http://jsfiddle.net/DyUHA/4/)

```
$('.holder table')
.attr('data-mode', 'columntoggle')
.attr('data-role', 'table')
.table(); 
```

这对我来说非常有效，因为我的数据只是通过 ajax 加载并且从未更改过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:58:58.580

看来这不是淘汰赛特有的问题，而是切换列表小部件本身的问题：[https ://forum.jquery.com/topic/jqm-1-3-0-dynamic-column-toggle-table](https://forum.jquery.com/topic/jqm-1-3-0-dynamic-column-toggle-table)

# android - 在地图标记 InfoWindow 中使用 LazyAdapters ImageLoader 类

> ID：15746774
> 
> 赞同：2
> 
> 时间：2013-04-01T15:55:19.423
> 
> 标签：android, google-maps

我的项目使用流行的 LazyAdapter 和 listview 来获取滚动时的远程图像并将它们缓存在 sdcard 上以供以后使用。

在应用程序的另一个“屏幕”中，我正在显示地图片段，我想在 Google 地图视图的 CustomInfoWindow 中显示相关图像。这个想法是在必要时从服务器获取图像，如果之前已经下载了图像（通过触摸标记的列表），那么它从 sdcard 获取它。

要将 ImageLoader 与 ListView 一起使用，请将 imageview 与远程 url（在适配器 getView() 中）一起传递给 ImageLoader，如下所示：

```
imageLoader.DisplayImage("http://urltomarkerpic.com" + pic
                    + ".jpg", ((ImageView) view.findViewById(R.id.badge))); 
```

我尝试在我的自定义信息窗口类（实现 InfoWindowAdapter）的 render() 方法中使用它，它确实有效，但是图像仅在每个标记的第二次按下时加载，第一次按下仅显示默认 jpg（如指定在 xml 中）。一旦我再次触摸标记，它就会从 sdcard 加载图像（我已经用 logcat 确认了这一点）。

采用这种方法似乎很直观，在查看了 LadyAdapters 代码后，我认为这会起作用。有没有其他人尝试过这样做并让它工作？或者任何人都可以建议在 InfoWindow 中重用 ImageLoader 的替代方法（这将真正节省我的带宽），从而 mapview 和 listview 都可以利用延迟加载机制并将图像下载保持在最低限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T22:10:46.717

我不知道您是否仍然需要答案，但无论如何.. 我遇到了同样的问题，这是因为当您通过适配器初始化时传递给信息窗口的视图不是实际的实时视图，而是渲染的图像它，因此在显示时无法更新其内容。

在我的情况下，和你一样，图像在第二次单击时加载，但最终（有点）通过添加标记单击侦听器并在标记单击事件上调用 showInfoWindow() 方法来解决它：

```
map.setOnMarkerClickListener(new OnMarkerClickListener() {
    @Override
    public boolean onMarkerClick(Marker marker) {
        marker.showInfoWindow();
        return false;
    }
} 
```

这将再次加载 InfoWindow 并在加载后刷新图像，而不关闭它（或者至少速度如此之快以至于看起来不像）。我很确定这不是完美的方法，但是无法使用我找到的任何其他解决方案，并且在尝试了几次之后，它的效果足以满足我的需要。

如果有人知道实现这一目标的更好方法，很高兴听到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T10:12:20.060

您不能直接使用图像加载器库，因为[如文档中所述，返回的 View is not live](https://developers.google.com/maps/documentation/android/marker#info_windows)。如果您正在使用的库在下载完成时有回调并且位图可用而不会阻塞，您可以尝试将其与强制再次显示信息窗口集成。

您可以在我的回答中按照以下简单步骤操作：[Maps V2 InfoWindow 中的动态内容](https://stackoverflow.com/questions/15503266/dynamic-contents-in-maps-v2-infowindow/15512984#15512984)。

# c# - 使用 C# 使用 Quiz Web 服务

> ID：15746775
> 
> 赞同：1
> 
> 时间：2013-04-01T15:55:23.290
> 
> 标签：c#, web-services, loops, unity3d

我目前正在 Unity 3D 中使用 C# 制作测验 Web 服务。我对 C# 比较陌生。

我遇到了一个我自己似乎无法解决的问题。我能够一次从数据库中检索所有问题和可能的答案。我的问题是我无法将它们分开并一次显示一个问题和一组答案。我不知道该怎么做！

这是我调用 Web 服务的方法：

```
public void retrieveQuizObject(){

    QuizService service = new QuizService();

    quizModel q = new quizModel();

    quizModel[] quizArray = new quizModel[3];

    List<quizModel> quizList = new List<quizModel>();

    //consuming web service
    object[] qArray = quizList.ToArray();
    qArray = service.playQuiz();

    foreach(object element in qArray)
        {
        quizArray[n] = (quizModel)element;
        Debug.Log ("Array Size: " + quizArray.Length);
        Debug.Log ("Questions: " + quizArray[n].question);//just checking to see questions returned
        }
  } 
```

这是 Web 服务 SQL：

```
"SELECT * from quiz ORDER BY RAND() LIMIT 3" 
```

测验表具有以下列：QuizId、问题、答案 A、答案 B、答案 C、答案 D。答案 A 始终是正确答案。我打算以后洗牌！

使用 GUI 界面，我想一次显示每个问题和四个可能的答案，而不是一次显示所有答案（比如谁想成为百万富翁）。当用户选择他们的选项时，应该会出现一个新问题。我尝试了许多循环变体，并尝试仅在按下 GUI 按钮但无法弄清楚时迭代循环。

我应该如何处理这个？我应该使用哪个循环以及如何暂停它？

我非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:01:46.743

我不确定上面的代码是否是您以伪形式的目标，或者您是否确实让服务/客户端正常工作，如果没有，似乎您需要先设置一个框架，然后再了解表格设计和游戏机制的细节.

我会开始围绕 Web API 构建一个框架，如果您遵循一些好的教程，它们会非常简单。

[http://www.asp.net/web-api](http://www.asp.net/web-api)

然后对于持久性，如果您使用 SQL，则可以使用实体框架，或者 NoSQL 解决方案可能更有意义，例如 Redis：

[http://www.d80.co.uk/post/2011/05/12/Redis-Tutorial-with-ServiceStackRedis.aspx](http://www.d80.co.uk/post/2011/05/12/Redis-Tutorial-with-ServiceStackRedis.aspx)

一旦你暴露了你的端点，你将使用 WWW 在 Unity3D 中使用它

以下是我用来将游戏对象实例化为数据包的方法，它在完成后会自行处理，您传入一个接收字符串的回调函数，以便您可以异步处理您的响应。

```
class CoroutineServiceAsync : IServiceAsync

{

    public void SendRequest(string url, Action<string> callback, string data)

    {

        Debug.Log("Sending service call with data: " + data);

        GameObject obj = new GameObject("ServiceCall: " + data);

        CoRoutineRequest packet = obj.AddComponent<CoRoutineRequest>();

        packet.SendRequest(url, callback, data);

    }

}

class CoRoutineRequest : MonoBehaviour

{

    void Start()

    {

        DontDestroyOnLoad(gameObject);

    }

    public void SendRequest(string url, Action<string> callback, string data)

    {

        StartCoroutine(StartSendRequest(url, callback, data));

    }

    IEnumerator StartSendRequest(string url, Action<string> callback, string data)

    {

        WWW www = new WWW(url + "/" + data);

        yield return www;

        if (callback != null)

            callback(www.text);

        Destroy(gameObject);

    }

} 
```

在玩家回答或开始后，您会得到一个问答行。如果您不希望一次全部弹出答案选项，那么当您循环/迭代答案选项时，您会遇到延迟。

我认为您需要的唯一循环是显示答案选项，其余的是基于玩家输入的事件驱动（当他们选择答案时）以及当问题和答案行数据包与您的回调一起出现时（这将触发数据显示在您的 GUI 中）。

根据您想要的安全之王，您可能想要处理一些逻辑服务器端，因此需要管理会话。我会从简单的开始并假设玩家玩得很好。

希望我正确理解了这个问题，并提供了一些帮助。

# c# - 将 datagridveiw 数据插入 sql 数据库。“解析查询时出错”

> ID：15746780
> 
> 赞同：0
> 
> 时间：2013-04-01T15:55:45.787
> 
> 标签：c#, sql, database, datagridview, insert

已编辑！：

我正在编写一个具有将excel文件加载到datagridview中的功能的程序。Excel 文件包含十列的产品列表。至于现在它工作正常。文件加载正常。但是在这个加载之后，程序应该用来自 datagridview 的数据填充 SQL Server CE 数据库。因此，下次我打开此表单时，应使用数据库中的数据填充 datagridview。（此excel加载功能是在我公司发生变化时更新产品列表）。

我在将此数据插入数据库时​​遇到问题。

我有一个错误：

> 解析查询时出错。[Token line number = 1, Token line offset = 67, Token in error = Taq]

DNA 是 Excel 文件单元格中的一个单词（第 1 行第 3 列（“ITEM”）。单元格的全部内容是 AB-AB-0192/A Taq DNA 聚合酶（许可）。我认为问题与空间有关在 TAQ 之前。我测试过：当我删除那里的空间时，问题信息从 Taq 更改为 DNA。那么我该如何避免这种情况呢？excel 文件中的所有列都设置为文本，SQL Server CE 数据库列是类型`nvarchar`。

编辑！

好吧，伙计们，你让我走上了正确的道路:)

这有效：

```
string strQuery = @"INSERT INTO TabelaProdukty VALUES (@VD, @ItemCode, @Item, @Qty, @Ppcur, @StandardPrice, @CeMarked, @Description, @Description2, @Edma)";
        sqlconnection.Open();
        using (System.Data.SqlServerCe.SqlCeCommand comm = new System.Data.SqlServerCe.SqlCeCommand(strQuery, sqlconnection))
        {
          comm.Parameters.Add("@VD", SqlDbType.NVarChar);
          comm.Parameters.Add("@ItemCode", SqlDbType.NVarChar);
          comm.Parameters.Add("@Item", SqlDbType.NVarChar);
          comm.Parameters.Add("@Qty", SqlDbType.NVarChar);
          comm.Parameters.Add("@Ppcur", SqlDbType.NVarChar);
          comm.Parameters.Add("@StandardPrice", SqlDbType.NVarChar);
          comm.Parameters.Add("@CeMarked", SqlDbType.NVarChar);
          comm.Parameters.Add("@Description", SqlDbType.NVarChar);
          comm.Parameters.Add("@Description2", SqlDbType.NVarChar);
          comm.Parameters.Add("@Edma", SqlDbType.NVarChar);

          for (int i = 0; i < dataGridView1.Rows.Count; i++)
          {

            comm.Parameters["@VD"].Value =  dataGridView1.Rows[i].Cells["VD"].Value;
            comm.Parameters["@ItemCode"].Value = dataGridView1.Rows[i].Cells["ItemCode"].Value;
            comm.Parameters["@Item"].Value = dataGridView1.Rows[i].Cells["ITEM"].Value;
            comm.Parameters["@Qty"].Value = dataGridView1.Rows[i].Cells["QUANTITY"].Value;
            comm.Parameters["@Ppcur"].Value = dataGridView1.Rows[i].Cells["PPCUR"].Value;
            comm.Parameters["@StandardPrice"].Value = dataGridView1.Rows[i].Cells["STANDARD_SELL_PRICE"].Value;
            comm.Parameters["@CeMarked"].Value = dataGridView1.Rows[i].Cells["CE-MARKED"].Value;
            comm.Parameters["@Description"].Value =  dataGridView1.Rows[i].Cells["ITEM_DESCRIPTION"].Value;
            comm.Parameters["@Description2"].Value = dataGridView1.Rows[i].Cells["ITEM_DESCRIPTION2"].Value;
            comm.Parameters["@Edma"].Value = dataGridView1.Rows[i].Cells["EDMA"].Value;

            comm.ExecuteNonQuery();

          }
          sqlconnection.Close(); 
```

数据库充满了正确的数据，当我重新启动程序时，数据库已经被填满。现在我只需要在添加新内容之前清除数据库。

一个问题。获取消息：从一种数据类型转换为另一种数据类型时数据被截断。[函数名称（如果知道）= ]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:18:09.140

```
 SqlCeCommand cmd = new SqlCeCommand();
                cmd.CommandText =  "your insert statemnt (@param1.@param2,@param3) " ;

 cmd.Connection = this.sqlConnection1; //initialize your connection on page load 
                this.sqlConnection1.Open();

                  // add params 
                cmd.Parameters.Add("@param1", SqlDbType.VarChar).Value = your_control.Text; 
                cmd.Parameters.Add("@param2", SqlDbType.VarChar).Value = your_control.Text; 
                cmd.Parameters.Add("@param3", SqlDbType.VarChar).Value = your_control.Text; 

 cmd.ExecuteNonQuery();

this.sqlConnection1.Close(); 
```

然后，您所要做的就是在声明它们之后将值从数据集中拉出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:18:41.343

尝试这样的事情 -在您的 ADO.NET 查询中使用**参数！**并将所有一次性物品如`SqlCeConnection`和`SqlCeCommand`放入`using(...) { .... }`块中，以确保它们得到妥善处理：

```
private void button1_Click(object sender, EventArgs e) // wczytanie excela 
{
    OpenFileDialog openFileDialog1 = new OpenFileDialog();

    var dialogResult = openFileDialog1.ShowDialog();
    string sWybranyPlik;

    if (dialogResult  == DialogResult.OK)
    {
      sWybranyPlik = openFileDialog1.FileName;

      try
      {
         using(OleDbConnection ExcelConnection = new OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0;Data Source='" + sWybranyPlik + "';Extended Properties=Excel 8.0;"))
         {
         OleDbDataAdapter OleDBAdapter = new OleDbDataAdapter("select * from [Tabelle1$]", ExcelConnection);

         OleDBAdapter.Fill(DtSet.Tables[0]);
         dataGridView1.DataSource = DtSet.Tables[0];

             -- recommendation: always explicitly *specify* the columns of the table
             -- that you're inserting into
         string strQuery = @"INSERT INTO TabelaProdukty(col1, col2, col3,....., colN)
                     VALUES (@VD, @ItemCode, @Item, @Qty, @Ppcur, @StandardPrice, @CeMarked, @Description, @Description2, @Edma)";

                 using(sqlconnection = new SqlCeConnection("Data Source = C:\\Users\\user\\Documents\\Visual Studio 2010\\Projects\\BMGRP\\Oferty BMGRP\\Oferty BMGRP\\bin\\Debug\\BazaDanych.sdf"))
         using(SqlCeCommand comm = new SqlCeCommand(strQuery, sqlconnection))
         {
             comm.Parameters.AddWithValue("@VD", dataGridView1.Rows[i].Cells["VD"].Value);
             comm.Parameters.AddWithValue("@ItemCode", dataGridView1.Rows[i].Cells["ItemCode"].Value);
             comm.Parameters.AddWithValue("@Item", dataGridView1.Rows[i].Cells["ITEM"].Value);
             comm.Parameters.AddWithValue("@Qty", dataGridView1.Rows[i].Cells["QUANTITY"].Value);
             comm.Parameters.AddWithValue("@Ppcur", dataGridView1.Rows[i].Cells["PPCUR"].Value);
             comm.Parameters.AddWithValue("@StandardPrice", dataGridView1.Rows[i].Cells["STANDARD_SELL_PRICE"].Value);
             comm.Parameters.AddWithValue("@CeMarked", dataGridView1.Rows[i].Cells["CE-MARKED"].Value);
             comm.Parameters.AddWithValue("@Description", dataGridView1.Rows[i].Cells["ITEM_DESCRIPTION"].Value);
             comm.Parameters.AddWithValue("@Description2", dataGridView1.Rows[i].Cells["ITEM_DESCRIPTION2"].Value);
             comm.Parameters.AddWithValue("@Edma", dataGridView1.Rows[i].Cells["EDMA"].Value);

             sqlconnection.Open();
             comm.ExecuteNonQuery();
             sqlconnection.Close();
         }

         ExcelConnection.Close();
          }      
      }
      catch (Exception ex)
      {
        MessageBox.Show(ex.ToString());
      }
    } 
```

# ruby-on-rails - 如何确定数组是否保存在rails中？

> ID：15746781
> 
> 赞同：0
> 
> 时间：2013-04-01T15:55:50.027
> 
> 标签：ruby-on-rails, ruby, arrays, seed

在我的种子.rb

```
 puts 'DEFAULT Categories'
  categories = Category.create([{name:'cat1'},{name:'cat2'}, {name: 'cat3'} ])
  if categories.save
    puts "categories saved"
  else
    puts "categories save failed"
  end 
```

我使用它来设置默认类别，但问题是我无法`if categories.save`查看是否所有类别项目都已保存，因此 seed.rb 是否已通过所以，我如何查看数组是否已保存？（所有元素）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:57:10.527

使用`create!`而不是`create`. 如果保存失败，它将引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:17:15.433

```
if categories.all?(&:save)
  puts "categories saved"
else
  [...]
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:44:47.923

`.create`正在创建记录。因此，当您到达 if 语句时，什么也没有发生，因为在创建过程中保存已经发生。

将您的更改`.create`为 a `.new`，您将能够检查保存是否成功：

```
puts 'DEFAULT Categories'
categories = Category.new([{name:'cat1'},{name:'cat2'}, {name: 'cat3'} ])  
if categories.save  
  puts "categories saved"  
else  
  puts "categories save failed"  
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:16:28.330

```
if categories.all.each(&:persisted?)
  puts "categories saved"
else
  [...]
end 
```

# c++ - C++、mingw 和 clock_gettime 无法编译

> ID：15746783
> 
> 赞同：6
> 
> 时间：2013-04-01T15:56:07.230
> 
> 标签：c++, time, timer, mingw

我在使用 minGW 的 g++.exe 编译一些 Linux C++ 代码时遇到了很大的困难。具体来说，它无法理解这段代码：

```
 struct timespec now;
  clock_gettime(CLOCK_REALTIME,&now); 
```

我添加了必要的头文件

```
 #include <ctime> 
```

编译错误是：

```
error: aggregate 'special_time2()::timespec now' has incomplete type and cannot be defined
error: 'CLOCK_REALTIME' was not declared in this scope
error: 'clock_gettime' was not declared in this scope 
```

有人知道为什么会发生这种情况并知道潜在的解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T16:08:48.233

`clock_gettime`不是标准的 C 或 C++ 函数，因此不能保证它在非 POSIX 系统上可用。

如果您正在编写现代 C++，那么您可以使用该`std::chrono`库进行高精度计时。

如果您坚持使用 2011 年之前的库，那么您唯一的选择是`time()`，它通常只有一秒的精度，或者任何特定于平台的替代方案可用。不幸的是，我对 MinGW 的了解还不够，无法帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:07:17.190

**更新**：我刚刚用 MinGW 尝试了以下方法，但没有成功。正如另一个答案所说，POSIX 函数不一定在 Windows 下可用。这个答案不能解决 OP 的问题，但它可能对其他系统的用户有用。

`clock_gettime`由 POSIX 定义，而不是由语言标准定义。

我的系统（Ubuntu）上的手册页说：

```
Feature Test Macro Requirements for glibc (see feature_test_macros(7)):

   clock_getres(), clock_gettime(), clock_settime():
          _POSIX_C_SOURCE >= 199309L 
```

尝试添加

```
#define _POSIX_C_SOURCE 199309L 
```

之前`#include <ctime>`

# python - Kombu 以非阻塞方式

> ID：15746786
> 
> 赞同：6
> 
> 时间：2013-04-01T15:56:16.913
> 
> 标签：python, tornado, kombu

我正在寻找一种在 tornado-sockjs 和 Django 应用程序服务器之间使用 kombu 作为 MQ 适配器的方法。我做了类似的事情：

```
class BrokerClient(ConsumerMixin):
    clients = []

    def __init__(self):
        self.connection = BrokerConnection(settings.BROKER_URL)
        self.io_loop = ioloop.IOLoop.instance()
        self.queue = sockjs_queue
        self._handle_loop()

    @staticmethod
    def instance():
        if not hasattr(BrokerClient, '_instance'):
            BrokerClient._instance = BrokerClient()
        return BrokerClient._instance

    def add_client(self, client):
        self.clients.append(client)

    def remove_client(self, client):
        self.clients.remove(client)

    def _handle_loop(self):
        try:
            if self.restart_limit.can_consume(1):
                for _ in self.consume(limit=5):
                    pass
        except self.connection.connection_errors:
            print ('Connection to broker lost. '
             'Trying to re-establish the connection...')
        self.io_loop.add_timeout(datetime.timedelta(0.0001), self._handle_loop)

    def get_consumers(self, Consumer, channel):
        return [Consumer([self.queue, ], callbacks=[self.process_task])]

    def process_task(self, body, message):
        for client in self.clients:
            if hasattr(body, 'users') and client.user.pk in body.users:
                client.send(body)
        message.ack() 
```

但是龙卷风在 _handle_loop 执行时被阻止（如预期的那样）。

有什么办法可以防止这种情况发生吗？

我知道 Tornado 的 Pika 库适配器，但我想使用 kombu，因为它已经在项目中使用并且具有灵活的传输。

更新：

将 _handle_loop 更改为生成器函数

```
def drain_events(self, callback):
    with self.Consumer() as (connection, channel, consumers):
        with self.extra_context(connection, channel):
            try:
                connection.drain_events(timeout=1)
            except:
                pass
    callback(None)

@tornado.gen.engine
def _handle_loop(self):
    response = yield tornado.gen.Task(self.drain_events)
    self.io_loop.add_timeout(datetime.timedelta(0.0001), self._handle_loop) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:37:06.010

最后我找到了 RabbitMQ 后端的正确解决方案：

```
class BrokerClient(object):
    clients = []

    @staticmethod
    def instance():
        if not hasattr(BrokerClient, '_instance'):
            BrokerClient._instance = BrokerClient()
        return BrokerClient._instance

    def __init__(self):
        self.connection = BrokerConnection(settings.BROKER_URL)
        self.consumer = Consumer(self.connection.channel(), [queue, ], callbacks=[self.process_task])
        self.consumer.consume()
        io_loop = tornado.ioloop.IOLoop.instance()
        for sock, handler in self.connection.eventmap.items():
            def drain_nowait(fd, events):
                handler()
            io_loop.add_handler(sock.fileno(), drain_nowait, l.READ | l.ERROR)

    def process_task(self, body, message):
        #something
        message.ack()

    def add_client(self, client):
        self.clients.append(client)

    def remove_client(self, client):
        self.clients.remove(client) 
```

对于其他后端，您可以使用问题中发布的解决方案

注意：不适用于 librabbitmq

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-01T00:45:58.073

我也有类似的需要，以非阻塞方式在 Kombu/RabbitMQ 和 ZeroMQ 之间切换。解决方案是使用 Gevent 对套接字库进行猴子补丁，这样 Kombu 也将变得非阻塞。我的“主”线程运行了 Kombu drain_events 回调，在另一个 gevent 线程中，我有一个循环从 ZeroMQ 套接字接收消息。工作得很好。

这也不适用于 librabbitmq，因为它在 C 中执行不受 Gevent 影响的自己的套接字内容。

# search - Adobe Business Catalyst 搜索过滤

> ID：15746792
> 
> 赞同：0
> 
> 时间：2013-04-01T15:56:45.730
> 
> 标签：search, business-catalyst

我有一个商业催化剂产品，并且有财产。颜色，尺寸，价格。我可以在搜索结果页面上过滤它吗？喜欢我要搜索：iphone 5, red 请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:57:20.473

您可以使用 javascript 实现搜索过滤。

在搜索启动之前，所有产品都是不可见的。如果用户选择某个参数属性（例如红色），javascript 会在所有产品中执行搜索，并使那些响应搜索条件的产品可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T21:01:50.777

您可以使用 BC 系统中提供的标准搜索来搜索您的产品，只需确保您的产品具有关键字以便系统可以找到它，或者您可以使用搜索过滤器。

首先尝试：

**站点管理器>站点搜索并创建一个搜索表单来搜索产品或目录>确保您的产品包含关键字。**

第二次尝试（更多推荐！）：转到**站点管理器>页面模板>创建或编辑模板>使用模块小部件>电子商务>产品>产品搜索表，导航到您的模板**

如果您不喜欢该外观，请转到代码视图并删除表格或 BC 代码并按照您的方式设置样式。

第二个已经过测试，它是一个非常强大的搜索非常快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T03:39:02.783

BC 有一个通过 URL 的价格过滤器。

例子：

```
mysite.com/catalogue?Filter=Price&PriceFrom=0&PriceTo=200 
```

# sql-server-2008 - SQL - 合并日期重叠的行中的数据

> ID：15746793
> 
> 赞同：2
> 
> 时间：2013-04-01T15:56:51.630
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有一个表（JobsLogged），其中包含以下字段和一些示例数据：

```
JobID    Profile    LogDate               CloseDate
======   ========   ===================   ===================
1112     Network    2013-03-05 15:55:00   2013-03-05 16:25:00
1113     Server     2013-03-05 16:00:00   2013-03-06 08:25:00
1114     Server     2013-03-05 16:05:00   2013-03-06 08:30:00
1115     Network    2013-03-05 17:00:00   2013-03-06 09:30:00
1116     Software   2013-03-06 09:00:00   2013-03-07 14:30:00
1117     Network    2013-03-06 10:00:00   2013-03-06 12:00:00
1118     Network    2013-03-06 11:00:00   2013-03-06 12:30:00
1119     Network    2013-03-06 11:30:00   2013-03-06 12:00:00 
```

我需要创建一个报告来计算表中每个配置文件的停机时间。我在 SQL 中创建了一个函数，它获取记录的每个作业的 LogDate 和 CloseDate，并将它们与另一个存储一年中每一天的“潜在正常运行时间”的表进行比较（银行假日、周末等不包括在停机时间计算）。该函数以分钟为单位返回总停机时间并且工作正常。

我遇到的问题是，如果特定配置文件中一个呼叫的 Logdate 和/或 CloseDate 介于上一个呼叫的 LogDate 和 CloseDate 之间，则计算的停机时间将重复，例如：

```
LogDate                CloseDate              Downtime
====================   ====================   ==============
2013-03-06 10:00:00    2013-03-06 12:00:00    120 minutes
2013-03-06 11:00:00    2013-03-06 12:30:00    90 minutes
2013-03-06 11:30:00    2013-03-06 12:00:00    30 minutes
                                              --------------
                                              240 minutes 
```

实际上，由于呼叫的重叠时间，停机时间为 150 分钟。我需要按 Profile 对数据进行分组（这很容易），然后合并每个 Profile 组中的行，其中有日期重叠的记录。重叠调用中最早的 LogDate 将成为该组的 LogDate，而该组中最晚的 CloseDate 将成为该组的 CloseDate。

我已经搜索了该站点，[这个答案](https://stackoverflow.com/questions/6174451/merge-date-rows-if-episodes-are-in-direct-succession-or-overlapping)非常接近我想要实现的目标，但是 LEAD 功能似乎直到 2012 版本才在 SQL Server 中实现，而且我相当缺乏经验并且缺乏查找知识一个合适的解决方法。

我已经设置了一个[SQL Fiddle](http://sqlfiddle.com/#!3/2a654/2)，它创建了我正在使用的精简版本。SELECT 语句将在一个过程中使用，该过程将被传递到 SSRS 2008 以运行报告。最终，我希望我的数据以与下面类似的格式显示，但我不知道如何对重叠数据进行分组以实现这一点。

```
Profile    LogDate               CloseDate             Downtime    JobID
========   ===================   ===================   =========   ======
Network    2013-03-05 15:55:00   2013-03-05 16:25:00   30          1112
           -------------------   -------------------   ---------   ------
           2013-03-05 17:00:00   2013-03-06 09:30:00   150         1115
           -------------------   -------------------   ---------   ------
           2013-03-06 10:00:00   2013-03-06 12:30:00   150         1117
                                                                   1118
                                                                   1119
--------   -------------------   -------------------   ---------   ------
Server     2013-03-05 16:00:00   2013-03-06 08:30:00   150         1113
                                                                   1114
--------   -------------------   -------------------   ---------   ------
Software   2013-03-06 09:00:00   2013-03-07 14:30:00   930         1116 
```

感谢您花时间阅读本文。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T13:41:22.657

In case anyone is having trouble with this type of issue in future, I solved my problem by using a cursor to loop through the records and group together any that overlapped. The results of this were stored in a temporary table while the cursor ran, before running the SELECT statement against the temporary table. An iteration of what I did can be found on my modified [SQL Fiddle](http://sqlfiddle.com/#!3/2a654/69).

Once I had imported this data into SSRS I used a sub-report to return the JobIDs relating to each group of records, thus achieving the result I demonstrated in my question.

I hope this can be of use to others who are having the same problems that I was having.

# c# - 线程过早停止

> ID：15746799
> 
> 赞同：1
> 
> 时间：2013-04-01T15:57:22.183
> 
> 标签：c#, multithreading

不知何故，我的线程过早停止，而它应该一直处于活动状态，直到状态变为 4，或者线程通过`.Abort()`.

目前这是我开始我的线程的方式：

```
var thread = new Thread(() =>
{
   var t = Thread.CurrentThread;
   var cDown = new cDownloader(textBox1, textBox3.Text, this, 10);
   updateThreads(t.ThreadState + ": " + t.Name, t);
 });
 thread.Start(); 
```

该线程在 cDownloader 类中执行几个函数：

1.  构造函数 cDownloader()，它设置了几个变量。
2.  构造函数触发 initLoad()，它启动一个计时器，并向它添加一个事件。
3.  计时器滴答事件使用 HtmlAgilityPack 扫描网站，以查找具有类 fileThumb 的链接。
4.  对于每个链接，该事件都会创建一个下载文件的新线程。

不知何故，该线程似乎激活了一切，甚至下载了文件，然后自行关闭，同时仍在运行计时器，这很奇怪，因此由于找不到当前线程而导致错误。

我没有`.Abort()`在当前线程上调用方法。

所以我的问题是：为什么我的线程过早停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:59:36.070

该线程将在您传递给它的委托中运行代码。一旦完成，线程将终止。除非`updateThreads`包含循环，否则线程将在委托中的最后一个方法调用完成后终止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T15:59:41.467

部分问题是以下行

```
Name = this.textBox1.Text; 
```

UI 不能从后台线程访问，会抛出异常。因此，在`cDownloader`创建类并随后杀死线程之后，这条线被抛出。您需要将 UI 访问移出后台线程或将访问适当地编组回 UI 线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T16:03:11.713

看起来线程内的任何东西实际上都没有阻塞。您可以使用退出标志，如下所示：

```
var exitRequested = false;

new Thread(
() => {
  var t = Thread.CurrentThread;
  var cDown = ...
  Name = textBox1.Text;
  updateThread(...);
  while(!exitRequested)
  {
    /// keep this thread from locking up a CPU core
    t.Sleep(10);
  }

}
).Start(); 
```

并且，稍后当您希望线程退出时（当应用程序关闭时，`exit`单击按钮等）

```
exitRequested=true; 
```

循环是防止线程提前退出所必需的。否则，当它到达 lambda 末尾时，它会像任何其他方法一样返回。

另请注意，`Thread.ThreadState`线程内的检查通常会返回`ThreadState.Running`，因为要执行线程方法中的任何代码，线程必须正在运行。`ThreadState`在该上下文之外很有用。

# java - Java Tetris - 遍历双数组

> ID：15746805
> 
> 赞同：1
> 
> 时间：2013-04-01T15:57:52.517
> 
> 标签：java, swing

我正在构建俄罗斯方块，并尝试实现一种方法，该方法迭代网格 [][] 并检查每行的每一列，从底部开始，向上工作（认为如果我开始检查会更快从底部开始，因为这是需要清除大多数行的地方）。

我对此的理解是-为每一行创建一个双循环，检查该行中的所有列是否已满（不为空）。如果是，我将实现一个 clear （这实际上是设置当前行 = 上面的行）。现在，我只是想输出“完整”。

我的`System.out.println(grid[row][col] + ", " + row + ", " + col);`检查正确地显示它从底行开始，然后迭代每一列......但`if (grid[row][col] != null) {`检查似乎并没有停留在该行......

```
public void checkBottomFull() {
int columnsFilled = 0;
    //loops through rows only after each column has finished
    for(int row = grid.length-2; row > 0; row--) {
        //loops through all columns per row, then row decrements
        for(int col = 0; col < grid[row].length; col++) {
            System.out.println(grid[row][col] + ", " + row + ", " + col);       
            if (grid[row][col] != null) {
                columnsFilled++;
                if (columnsFilled == grid.length-1) {
                    System.out.println("full");     
                }
            }
        }
    }
} 
```

有什么想法吗？

* * *

**编辑**

```
public void checkBottomFull() {
    for(int row = grid.length-1; row >= 0; row--) {
        //loops through columns of each individual row
        if (isFull(row)) {
            System.out.println("full");
            clearRow(row);      
        }
    }
}

public boolean isFull(int row) {
    for (int col = 0; col < grid[row].length-1; col++) {
         if(grid[row][col] == null) {
             System.out.println(grid[row][col] + "... " + row + ", " + col);
             return false;
         }
    }   
    return true;
}

public void clearRow(int row) {
    for (int col = 0; col < grid[row].length-1; col++) {
        System.out.println("clearing...");
        grid[row][col] = grid[row-1][col];
    }
} 
```

`System.out.println(grid[row][col] + "... " + row + ", " + col);`输出：为什么列不递增？

```
null... 9, 0
null... 8, 0
null... 7, 0
null... 6, 0
null... 5, 0
null... 4, 0
null... 3, 0
null... 2, 0
null... 1, 0
null... 0, 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:09:27.100

这里有几个问题：

1.  您应该`int columnsFilled = 0`在外部 for 循环内移动，因为它只是对当前行的检查。就像现在一样，在您通过第一行后，计数将不正确。
2.  您正在检查`if (columnsFilled == grid.length-1)`实际上应该是什么时候`if (columnsFilled == grid[row].length-1)`。您的检查将填充的列数与行数进行比较，而不是与给定行中的列数进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:12:01.550

您可能会考虑添加一个类似于

```
public boolean isFullRow(Tile[][] grid, int row)
{
    for(int i=0; i<grid[row].length; i++)
    {
        if(grid[row][i] == null){ return false; }
    }
    return true;
} 
```

这将有助于调试您的代码，并使其（稍微但不明显）更快。

然后你的`checkButtomFull()`功能可能看起来像

```
public void checkBottomFull() {
    //loops through rows only after each column has finished
    for(int row = grid.length-2; row > 0; row--) {
        if(isFullRow(grid, row)){
            // Do something if full row
        }
    }
} 
```

最后，作为一个小问题，我的猜测是

```
for(int row = grid.length-2; row > 0; row--) 
```

可以/应该写成

```
for(int row = grid.length-1; row >= 0; row--) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:28:28.160

您发布的代码中有一些逻辑错误，附加的代码修复了它们，但没有为您实现一切。

```
public class SampleClass {

static String[][] grid = new String[4][10];

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    loadGrid();
    checkBottomFull();
}
public static void checkBottomFull() {
    int columnsFilled = 0;
    //loops through rows only after each column has finished
    for(int row = grid.length-1; row >= 0; row--) {//needed 'greater than or equal to'
        columnsFilled=0; //need to reinitialize this before every iteration
        for(int col = 0; col <= grid[row].length-1; col++) { //needed 'less than or equal to'
           System.out.println(row + ", " + col+", "+grid[row][col]);       
            if (grid[row][col] != null) {
                columnsFilled++;
            }
        }
        System.out.println("columns that have a character" + columnsFilled);
        System.out.println("Needs to be "+grid[row].length+" to remove row");
        if (columnsFilled == grid[row].length) {
            System.out.println("full");   //this is where you should remove a row  
        }
    }
}

private static void loadGrid() {
    grid[0] = new String[] {"X","X","X","X","X","X","X","X","X","X"};
    grid[1] = new String[] {"X","X",null,"X","X","X",null,"X","X","X"};
    grid[2] = new String[] {"X","X","X",null,"X","X",null,"X","X","X"};
    grid[3] = new String[] {"X","X",null,"X","X","X",null,"X","X","X"};
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:09:40.987

```
public static void checkBottomFull() {

    //loops through rows only after each column has finished
    for(int row = grid.length-1; row >= 0; row--) {
        //loops through all columns per row, then row decrements
        int columnsFilled = 0;
        for(int col = 0; col < grid[row].length; col++) {
            System.out.println(grid[row][col] + ", " + row + ", " + col);       
            if (grid[row][col] != null && ++columnsFilled == grid[row].length) {
                System.out.println("full");     
            }
        }
    }
} 
```

# javascript - 尝试将类添加到动态选择器

> ID：15746809
> 
> 赞同：1
> 
> 时间：2013-04-01T15:58:04.200
> 
> 标签：javascript, jquery

在我正在处理的页面中，每个列表项都有一个属性 data-number，其值为`<li>`列表中的数字。

列表项对应于幻灯片，我正在尝试将类应用于与`.current`当前正在查看的幻灯片对应的列表项。

当前正在查看的幻灯片可以通过该函数获取`.getIndex()`，然后我必须使用当前类的该数字的数据属性来设置 li 的样式。

我试图用以下方法做到这一点，但它不起作用：

```
$('li[data-number="'+k.getIndex();+'"]').addClass('current'); 
```

知道我做错了什么或如何实现我想要的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:01:23.527

也许是因为你的分号后的`getIndex`功能。尝试删除它，看看如何：

```
$('li[data-number="'+k.getIndex();+'"]').addClass('current');
---------------------------------^here----------------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:00:22.277

首先确保选择器正常工作。在 firebug 或 chrome 开发人员工具中运行它，以确保您选择了正确的元素。

编辑：就此而言，请确保 k 指向正确的元素并且已定义。检查您的控制台是否有错误。

编辑2：你不需要“;”

# android - 保护被“剪切和粘贴”的数据

> ID：15746811
> 
> 赞同：0
> 
> 时间：2013-04-01T15:58:10.563
> 
> 标签：android

任何人都知道您是否可以阻止 Android 上的剪切/粘贴功能？或者更好的是，你可以限制数据剪切只粘贴到你自己App的其他地方吗？

我想限制私人数据被“剪切”出我的应用程序，并“粘贴”到不受信任的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T11:29:29.413

在这个so [question](https://stackoverflow.com/questions/6275299/how-to-disable-copy-paste-from-to-edittext)中有一个讨论和建议。但通常这些涉及拦截应用程序内编辑文本的长按/上下文菜单事件。

# jetty - 如何将我的 Web 应用程序作为根应用程序部署到 jetty9？

> ID：15746814
> 
> 赞同：9
> 
> 时间：2013-04-01T15:58:17.287
> 
> 标签：jetty

当我使用 jetty6 时，我使用以下内容：

```
<Configure class="org.mortbay.jetty.webapp.WebAppContext">

  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <!-- Required minimal context configuration :                        -->
  <!--  + contextPath                                                  -->
  <!--  + war OR resourceBase                                          -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <Set name="contextPath">/</Set>
  <Set name="resourceBase"><SystemProperty name="jetty.home" default="."/>/webapps/myapp</Set>

</Configure> 
```

此文件位于文件夹上下文中，名为 myapp.xml

但是切换到jetty 9，首先没有“contexts”这样的文件夹，我把myapp.xml和test.xml一样放入webapps，重新启动jetty并导航到`http://localhost:8080`，页面保持默认，而不是我的应用程序。

任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T16:11:30.607

在 Jetty 6 中，如果您有

```
${jetty.home}/contexts/myapp.xml 
```

使用 Jetty 9.0，将其移至

```
${jetty.home}/webapps/myapp.xml 
```

使用 Jetty 9.1+，将其移至

```
${jetty.base}/webapps/myapp.xml 
```

确保展开的 webapp 目录与您的 xml 文件同名，以防止重复部署。

您还需要更改 Jetty 9 的上下文 XML 文件。

```
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN"
          "http://www.eclipse.org/jetty/configure_9_0.dtd">
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
  <Set name="contextPath">/</Set>
  <Set name="war"><Property name="jetty.home" default="." />/webapps/myapp</Set>
</Configure> 
```

或者，只需命名您展开的 webapp 目录

```
${jetty.home}/webapps/ROOT 
```

找到的文档：

[http://www.eclipse.org/jetty/documentation/current/configuring-deployment.html](http://www.eclipse.org/jetty/documentation/current/configuring-deployment.html)

*为 Jetty 9.1 更新*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T05:29:31.870

您可以使用特别命名的`/root`or `root.war`。请参阅[此链接](http://www.eclipse.org/jetty/documentation/9.1.3.v20140225/automatic-webapp-deployment.html)。

# rest - 使用 REST 代理的简单模型/存储问题。

> ID：15746817
> 
> 赞同：0
> 
> 时间：2013-04-01T15:58:56.563
> 
> 标签：rest, sencha-touch-2

我有一个用于 REST 接口的非常简单的模型/存储/代理。我遇到的问题是，当我加载存储（通过 GET）时，存储似乎将新记录放在内部 toCreate 列表中——所以当我调用同步（）时，它会尝试发布它刚刚吸收的记录. 我知道我在做一些愚蠢的事情，但我已经尽可能地简化了这一点，但没有运气......

模型

```
Ext.define('sld.model.Org', {
extend: 'Ext.data.Model',

   config: {
        clientIdProperty: '_id',
        fields: [
            { name: '_id',                  type: 'string' },
            { name: 'name',                 type: 'string' },
            { name: 'type',                 type: 'string' },
            { name: 'version',              type: 'string' }
        ]
    }
}); 
```

和商店/代理：

```
Ext.define('sld.store.Orgs', {
    extend  : 'Ext.data.Store',

    config: {
        model: 'sld.model.Org',
        storeId: 'orgs',

        proxy: {
            type: 'rest',
            url: 'http://127.0.0.1:3003/orgs',
            useDefaultXhrHeader:false,
            enablePagingParams: false,
            limitParam: false,

            reader: {
                type: 'json',
                rootProperty: 'orgs'
            }
        }
    }
}); 
```

顺便说一句，我也在使用 Basic Auth 执行此操作——我认为这不会影响事情，但以防万一，我将包括以下内容：

```
 setAuthString: function (username, password) {
         authString = 'Basic ' + base64_encode (username + ':' + password);
    },

    setAuthHeader: function(proxy) {
        var header = proxy.getHeaders();
        header.Authorization = authString;
        proxy.setHeaders(header);
    } 
```

因此，当进行加载并在完成后立即调用 sync() 时，我返回添加了 8 个对象并且第一个 POST 显示在我的服务器端（由于我还没有实现它而失败）。

```
orgsStore.load (function(records, operation, success) {
        if (success) {
            console.log('loaded orgs count = ' + records.length);
            console.log ('does it need a sync?');
            var obj = orgsStore.sync();
            console.log ('sync returned added ' + obj.added.length + ' and updated ' + obj.updated.length);
        } else {
            console.log ('failed to load orgs!');
        }
    }, this); 
```

任何关于在哪里追逐这个的想法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:54:52.883

对于后代，如果其他人遇到这个问题 - 问题原来是我使用'clientIdProperty'来识别记录的唯一ID而不是使用'idProperty'。后者是我想要识别属性的唯一 ID。文档参考在[这里](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Model)。

Sencha Touch 论坛上的[答案：](http://www.sencha.com/forum/showthread.php?260182-Store-after-load-has-new-entires-in-toCreate)

# r - 使用 cbind 会导致对数值变量的错误解释

> ID：15746823
> 
> 赞同：1
> 
> 时间：2013-04-01T15:59:09.067
> 
> 标签：r

当我构建以下data.frame时：

```
cntrydata<-as.data.frame(cbind(c('BE', 'BG', 'CH', 'CY', 'CZ', 'DE', 'DK', 'EE', 
             'ES', 'FI', 'FR', 'GB', 'GR', 'HR', 'HU', 'IE', 
             'IL', 'LT', 'NL', 'NO', 'PL', 'PT', 'RU', 'SE', 
             'SI', 'SK', 'UA'),c('C', 'P', 'C', 'P', 'P', 'C', 
             'C', 'C', 'C', 'C', 'C', 'C', 'P', 'P', 'P', 'C',
             'P', 'P', 'C', 'C', 'P', 'C', 'P', 'C', 'P', 'P', 'P'),
              c(7.1, 3.6, 8.7, 6.3, 4.6, 7.9, 9.3, 6.5, 
                6.1, 9.1, 6.8, 7.6, 3.5, 4.1, 4.7, 8, 6.1, 5, 8.8,
                8.6, 5.3, 6, 2.1, 9.2, 6.4, 4.3, 2.4)))
colnames(cntrydata)<-c('cntry','mode','CPI') 
```

CPI 变量属于`class(factor)`，而我需要它是数字才能使以下函数起作用：

```
boxplot(CPI~mode, data=cntrydata) 
```

我尝试了以下方法：

```
as.numeric(levels(cntrydata$CPI))[cntrydata$CPI] 
```

正如有关[如何在不丢失信息的情况下将因子转换为整数\数字的建议？](https://stackoverflow.com/questions/3418128/how-to-convert-a-factor-to-an-integer-numeric-without-a-loss-of-information)

但它仍然是阶级因素。任何想法如何达到我的目标？

此外，但不太重要的是，我正在研究如何将`colnames`参数包含在数据构造命令中（而不是之后，就像我最终所做的那样）。但找不到如何以及在哪里放置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:03:44.280

以下将进行转换：

```
cntrydata$CPI <- as.numeric(as.character(cntrydata$CPI)) 
```

如果您要按如下方式构建数据框，则不会遇到问题，并且还会获得列名：

```
> cntrydata <- data.frame(cntry=c('BE', 'BG', 'CH', 'CY', 'CZ', 'DE', 'DK', 'EE', 
+              'ES', 'FI', 'FR', 'GB', 'GR', 'HR', 'HU', 'IE', 
+              'IL', 'LT', 'NL', 'NO', 'PL', 'PT', 'RU', 'SE', 
+              'SI', 'SK', 'UA'), mode=c('C', 'P', 'C', 'P', 'P', 'C', 
+              'C', 'C', 'C', 'C', 'C', 'C', 'P', 'P', 'P', 'C',
+              'P', 'P', 'C', 'C', 'P', 'C', 'P', 'C', 'P', 'P', 'P'),
+               CPI=c(7.1, 3.6, 8.7, 6.3, 4.6, 7.9, 9.3, 6.5, 
+                 6.1, 9.1, 6.8, 7.6, 3.5, 4.1, 4.7, 8, 6.1, 5, 8.8,
+                 8.6, 5.3, 6, 2.1, 9.2, 6.4, 4.3, 2.4)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:06:19.167

您的主要问题是您创建`data.frame`. 不要使用`cbind`和`as.data.frame`。试试这个：

```
cntrydata <- data.frame( cntry = c('BE', 'BG', 'CH', 'CY', 'CZ', 'DE', 'DK', 'EE', 
         'ES', 'FI', 'FR', 'GB', 'GR', 'HR', 'HU', 'IE', 
         'IL', 'LT', 'NL', 'NO', 'PL', 'PT', 'RU', 'SE', 
         'SI', 'SK', 'UA'), mode = c('C', 'P', 'C', 'P', 'P', 'C', 
         'C', 'C', 'C', 'C', 'C', 'C', 'P', 'P', 'P', 'C',
         'P', 'P', 'C', 'C', 'P', 'C', 'P', 'C', 'P', 'P', 'P'),
          CPI = c(7.1, 3.6, 8.7, 6.3, 4.6, 7.9, 9.3, 6.5, 
            6.1, 9.1, 6.8, 7.6, 3.5, 4.1, 4.7, 8, 6.1, 5, 8.8,
            8.6, 5.3, 6, 2.1, 9.2, 6.4, 4.3, 2.4))

sapply(cntrydata, class)
#     cntry      mode       CPI 
#  "factor"  "factor" "numeric" 
```

这是因为，当您使用 时`cbind`，它的至少一个参数必须是 a`data.frame`才能使您的数据成为`data.frame`。如果不是，结果将是`matrix`. 在 a 中`matrix`，所有数据都应该属于同一类。并且由于您的数据的一列或多列是`character`类型，因此数字列也被强制转换为`character`数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:04:08.187

你需要先`as.character()` 使用`as.numeric`

原因是`factor`s 实际上是带有键值标签的整数。
如果您简单地使用`as.numeric(someFactor)`，您将获得等效的密钥。
你想要等价的值，你可以通过`as.character`.
但是你希望你的最终结果是数字的，因此你把它包装在一起：

```
 as.numeric(as.character(someFactor)) 
```

比较：

```
 > as.numeric(cntrydata$CPI)
  [1] 17  4 22 13  7 19 26 15 12 24 16 18  3  5  8 20 12  9 23 21 10 11  1 25 14  6  2

 > as.numeric(as.character(cntrydata$CPI))
  [1] 7.1 3.6 8.7 6.3 4.6 7.9 9.3 6.5 6.1 9.1 6.8 7.6 3.5 4.1 4.7 8.0 6.1 5.0 8.8 8.6
 [21] 5.3 6.0 2.1 9.2 6.4 4.3 2.4 
```

# php - 我的数组值在嵌套的 foreach 循环中被覆盖

> ID：15746824
> 
> 赞同：-5
> 
> 时间：2013-04-01T15:59:09.677
> 
> 标签：php

我有以下代码：

```
foreach ($model_name as $md) {
    foreach ($years as $y) {
        $model_w_year[$y] = $md;
    } 
} 
```

这显然不起作用。它输出的数组如下所示：

```
Array
(
    [1994] => Maxima
    [1995-1998] => Maxima
) 
```

我希望它看起来像这样：

```
Array
(
    [1994] => Sentra
    [1995-1998] => Maxima
) 
```

Model_name 是上一页的 $_SESSION['model_name'] ，years 是表单数组

```
echo "<form action='engine.php' method='post'>";
for ($i = 0; $i < count($model_name); $i++) {
   echo "Enter year or year range for: ", $model_name[$i], 
       " <input type='text' name='years[]'></input><br />";
} 
```

这是我拥有的所有数组结构：

```
Model make: 
Nissan
model name: 
Array
(
    [0] => Sentra
    [1] => Maxima
)

Number of models:  
2
Number of years: 
Array
(
    [0] => 1994
    [1] => 1995-1998
)

Model with Year: 
Array
(
    [1994] => Maxima
    [1995-1998] => Maxima
) 
```

答：是的，我希望年份是关键，模型是价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:05:32.500

`$model_name`如果您试图以某种方式从and`$years`数组中获取某些键值分组，那么您的循环结构似乎没有意义。因为对于每个型号名称，您将遍历每个可用年份并将值设置为当前型号名称。因此，无论您的阵列中的最后一个型号名称是什么，最终都会为所有型号年份设置。

根据您的问题，模型名称数组和年份数组中的匹配值看起来将具有相同的数字索引。所以，你可能会使用类似的东西`array_combine()`来合并这些值

```
$merged_array = array_combine($years, $model_name); 
```

这将`$years`用作数组键和`$model_name`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:26:54.840

Mike Brant 的回答解释了为什么你的代码不能按照你想要的方式工作。如果我理解正确，您有两个数组，`$model_name`并且，用户为第 i:th 模型输入的年份`$years`在哪里。`$years[$i]`也就是说，数组看起来像这样

```
Array (
  [???] => Sentra
  [???] => Maxima
) 
```

还有这个

```
Array (
  [0] => 1994
  [1] => 1995-1998
) 
```

在这种情况下，我认为这段代码应该可以解决问题：

```
$i = 0;
foreach ($model_name as $md) {
  $model_w_year[$years[$i]] = $md;
  $i++;
} 
```

它不是很漂亮，但我认为它应该工作。

# xaml - XAML canvas.top 有效，但 canvas.bottom 在视觉工作室（chrome）中不起作用

> ID：15746825
> 
> 赞同：0
> 
> 时间：2013-04-01T15:59:16.643
> 
> 标签：xaml, canvas, visual-studio-2012

我目前正在学习 XAML，但遇到了一个烦人的问题。当我在文件的边框上使用 canvas.top... 时，它可以工作（在 Visual Studio 中通过 chrome 运行，我将使用 js 添加一些交互性）但是当我使用 canvas.bottom 时，什么也没有发生（只是一个白屏）。我究竟做错了什么？

使用顶部+图片的代码：http: [//oi47.tinypic.com/1zxm9td.jpg](http://oi47.tinypic.com/1zxm9td.jpg) , [http://pastebin.com/XqLeiK7j](http://pastebin.com/XqLeiK7j)

使用底部的代码：

```
<Border Background="#FF0093DD" BorderThickness="1" Canvas.Bottom="50" 
        Canvas.Left="80" Height="25" Width="200">
   <TextBlock VerticalAlignment="center" TextAlignment="center" 
              FontSize="10" Foreground="White">N° of correct responses</TextBlock>
</Border> 
```

如果我使用另一个名为 kaxaml 的软件，.bottom 选项有效，但我真的很想知道为什么它在 Visual Studio 2012 中不起作用

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:47:26.110

[WPF](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas_attachedproperties.aspx)支持 Canvas.Bottom 属性，但[Windows 应用商店](http://msdn.microsoft.com/en-us/library/windows/apps/br209267.aspx)或[Silverlight](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas_attachedproperties%28v=vs.95%29.aspx)应用程序不支持。

# c++ - c - 如何在资源管理器中打开选定的文件

> ID：15746834
> 
> 赞同：1
> 
> 时间：2013-04-01T15:59:40.347
> 
> 标签：c++, c, windows, visual-c++, cmd

就像在 google chrome 中一样，当您下载某些内容时，您可以单击“在资源管理器中打开”或其他内容，它将打开 exlplorer，并突出显示该文件。我将编写一个程序（可能是 ac cmd 程序），在给定位置搜索文件，然后我希望能够直接从程序中单击并打开文件。你有什么方法可以推荐我吗？它不必是 c 甚至是 cmd 程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:25:58.197

要打开文件夹**并选择文件夹中的一个或多个项目**，该`SHOpenFolderAndSelectItems`功能就是您要查找的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:01:53.103

如果您下载的文件路径是`downloadFilePath`

然后

```
Process.Start(downloadFilePath) 
```

会做正确的事。基于文件扩展名的打开动词路径，它应该启动文件扩展名的默认应用程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:26:13.497

我对 c++ 了解不多，但是 VB 和 youtube 对我有很大帮助:)

谢谢克里斯的链接！

```
ShellExecute(handle, "find", <fully_qualified_path_to_folder>, NULL, NULL, 0); 
```

也感谢其他人的链接！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:02:08.047

您可以使用`CreateProcess()`WinAPI 中的函数。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)

例子：

```
#include <iostream>
#include <Windows.h>

using namespace std;

int wmain()
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );
    //open C:\Windows in Explorer
        CreateProcess
        (
        TEXT("c:\\WINDOWS\\system32\\explorer.exe"),
        " C:\\Windows",NULL,NULL,FALSE,
        CREATE_NEW_CONSOLE,
        NULL,NULL,
        &si,
        &pi
        );
        return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T16:08:01.603

你没有提到你正在使用什么框架，所以我会给你我使用的 Qt 选项。这将适用于 Windows 或 Qt 支持的任何操作系统。我在使用 Visual Studio 构建的 Qt 应用程序中使用它。

```
QDesktopServices::openUrl(QUrl::fromLocalFile("myfile.xls"));
QDesktopServices::openUrl(QUrl::fromLocalFile("myfile.doc"));
QDesktopServices::openUrl(QUrl::fromLocalFile("myfile.txt"));

```

文档在这里[QDesktopServices::OpenUrl](http://qt-project.org/doc/qt-4.8/qdesktopservices.html#openUrl) [QUrl::fromLocalFile](http://qt-project.org/doc/qt-4.8/qurl.html#fromLocalFile)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T17:24:49.040

`system()`做事方式：

```
#include <stdlib.h>

int main() {
    system("explorer /select,C:\\Windows\\notepad.exe");
    return 0;
} 
```

[explorer.exe](http://support.microsoft.com/kb/130510)的完整选项列表

# radio-button - 如何避免单选按钮上的多项选择？

> ID：15746836
> 
> 赞同：3
> 
> 时间：2013-04-01T16:00:00.477
> 
> 标签：radio-button, salesforce

如何避免单选按钮上的多项选择，我使用了 apex:repeat 并且重复值绑定到控制器的包装类，但是当我选择单选按钮时，它允许多项选择。

下面是我的代码。

```
<apex:repeat value="{!availableSlosts}" var="as" id="eventlistId">
                        <tr>
                            <td><apex:selectRadio value="{!as.selectedEvent}">
                                     <apex:selectOptions value="{!as.lstRadioValue}"/>
                                </apex:selectRadio> 
                            </td> 
                            <td>{!as.availDate}</td>

                        </tr>
                    </apex:repeat> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:11:46.133

> {!as.availDate}
> 
> ```
>  </tr>
>                 </apex:repeat> 
> ```

应该像

```
<apex:selectRadio value="{!as.selectedEvent}">

<apex:repeat value="{!availableSlosts}" var="as" id="eventlistId">
                        <tr>
                            <td>
                                     <apex:selectOptions value="{!as.lstRadioValue}"/>

                            </td> 
                            <td>{!as.availDate}</td>

                        </tr>
                    </apex:repeat>

</apex:selectRadio> 
```

但在这种情况下，我不知道您将为 selectRadio 标签的值属性添加什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:13:50.510

单选按钮本质上表现出一种选择的唯一行为。但是你可以通过 HTML 和 js 做到这一点。[代码示例在这里](http://www.eltoro.it/ArticleViewer?id=a07A000000NPRidIAH)

# ruby - Rails 3 应用程序模板，如何模板品牌和布局

> ID：15746841
> 
> 赞同：0
> 
> 时间：2013-04-01T16:00:15.447
> 
> 标签：ruby, rubygems, ruby-on-rails-3.2

我正在尝试构建自己的模板，以供我们的编码人员想要为我们的公司生态系统创建新应用程序时使用。我使用了这里的大杂烩信息：

[http://everydayrails.com/2011/02/28/rails-3-application-templates.html](http://everydayrails.com/2011/02/28/rails-3-application-templates.html)

和

[http://edgeguides.rubyonrails.org/rails_application_templates.html](http://edgeguides.rubyonrails.org/rails_application_templates.html)

并且似乎创建了一个不错的模板文件，我仍在修补它，但应该设置数据库、设计和其他一些 gem（并自动将其放入 git）。它使用以下命令运行：

```
rails new ournewapp -m ourbrand.rb 
```

所以它使用 .rb 文件中的内容来设置正确的 gem，数据库推送到 git rake install 等。我只是不确定这是否是正确的方法以及如何扩展它以自动复制品牌，例如：logos ，css，利用两者的布局等。

理想情况下，这样的运行将是这样的：

```
%> rails new OurCompanysNewApp
'Would you like to use active directory? Yes
'Would you like to add in Companies Branding? Yes
' WOuld you like to use twitter boot strap?  No
' WOuld you like... etc. etc.
' Add this to github?  yes
' Set up standard capistrano? yes
   creating your app!!!!
create  README.rdoc
create  Rakefile
create  config.ru
create  .gitignore
create  Gemfile
create  app
create  app/assets/images/rails.png
create  app/assets/javascripts/application.js
create  app/assets/stylesheets/application.css
create  app/controllers/application_controller.rb
create  app/helpers/application_helper.rb
create  app/views/layouts/application.html.erb
create  app/mailers/.gitkeep
create  app/models/.gitkeep
create  config
create  config/routes.rb 
```

那么这`Application Template`是要走的路还是有其他更优选的方法来执行上述操作（根据用户在创建时是否选择它以及是否回答了品牌问题，请复制适当的布局/css/ html.erb 文件来支持）？如果这是首选方法，那么我很接近，只是不确定如何为品牌设置进行 layout/css/hmlt.erb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:16:53.590

`Rails Application Templates`是解决给定问题的正确方法。

您可能想查看[http://xyzpub.com/en/ruby-on-rails/3.2/templates.html](http://xyzpub.com/en/ruby-on-rails/3.2/templates.html)以获取自定义控制器和模型模板。A`Rails Application Template`是新应用程序的良好开端，但在该应用程序中，您需要自定义模型和控制器模板以节省开发过程中的时间。

# asp.net-mvc - ASP MVC3添加数据库中不存在的主键

> ID：15746842
> 
> 赞同：0
> 
> 时间：2013-04-01T16:00:17.907
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, entity-framework, edmx

我正在尝试将名为 的表添加`AgentId`到我的 ASP MVC 站点。此表没有主键，但它确实使用外键将其映射到另一个表，`BankMasterList`. `AgentId`一个代理可能与多家银行合作，因此代理 ID 通常会在表格中出现不止一次。

但是，每次我尝试这样做时，Visual Studio 都会将表的第一列`AgentId`（列名恰好与表同名：）分类`AgentId`为主键。

如果我删除主键指定并点击保存/构建，Visual Studio 然后继续删除文本模板转换工具包文件中包含的每个`.cs`模型。`.tt`显然，在此之后项目爆炸了，因为所有控制器现在都使用无效的命名空间。

任何人都可以就发生的事情提供任何建议或解释吗？

这是该`AgentId`表的 SQL Server Management Studio 的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/7PKnh.png)

这是`.edmx`Visual Studio 项目文件中描述的表格：

![在此处输入图像描述](https://i.stack.imgur.com/VTUgb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:42:04.683

如果 EDMX 设计器在表上找不到实际的主键，它将选择表中**所有不可为空的列作为“替代”主键。**

但是，“真实”表（不仅仅是临时表，例如批量加载）应该**始终**有一个主键！如果两者`AgentID`都`ID`不能单独用作主键，我会尝试看看两者（`AgentID, ID`）的组合是否可以成为您的主键；如果这也不起作用，那么我建议添加一个单独的代理列 ( `INT IDENTITY`) 作为主键。您应该始终能够唯一且可靠地识别任何表的每一行。

# javascript - html页面上的表单POST方法

> ID：15746843
> 
> 赞同：0
> 
> 时间：2013-04-01T16:00:22.063
> 
> 标签：javascript, python, html, ajax, google-app-engine

我正在尝试在谷歌应用引擎的 html 页面中使用 Form post 方法或 ajax post 方法，但似乎没有任何反应。

```
class Email(webapp2.RequestHandler):   
    def post(self):
        '''
        Post method to handle Email requests.
        '''
        print self.request
        self.response.write(self.request)

app = webapp2.WSGIApplication([('/', MainPage),("/email",Email)],
                              debug=True)

<form method="post" action="http://localhost:8080/email" >
<p>
    <label for="byour_name">Your name</label><input type="text" name="byour_name" value="" id="byour_name">
</p>
<p>
    <label for="byour_email_address">Your email address</label><input type="text" name="byour_email_address" value="" id="byour_email_address">
</p>
<p>
    What's on your mind?<br>
    <textarea name="Message" rows="10" cols="25">
    </textarea>
</p>
<p>
    <input type="submit" value="Send it!">
</p> 
```

可以对此有所帮助吗？我还尝试使用wireshark检查网络活动，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:50:47.497

我发现了我的问题。我必须删除我之前使用的下面提到的行

```
$("form").bind("submit",function(event){
                                    event.preventDefault(); 
```

一旦我删除它。有效..

# c# - 如何确定属性是从基类继承还是在派生中声明？

> ID：15746854
> 
> 赞同：22
> 
> 时间：2013-04-01T16:00:55.580
> 
> 标签：c#, reflection

我有一个派生自抽象类的类。获取派生类的类型我想找出哪些属性是从抽象类继承的，哪些是在派生类中声明的。

```
public abstract class BaseMsClass
{
    public string CommonParam { get; set; }
}

public class MsClass : BaseMsClass
{
    public string Id { get; set; }
    public string Name { get; set; }

    public MsClass()
    { }
}

var msClass = new MsClass
{
    Id = "1122",
    Name = "Some name",
    CommonParam = "param of the base class"
}; 
```

所以，我想快速发现 CommonParam 是一个继承参数，而 Id、Name 是在 MsClass 中声明的参数。有什么建议么？

尝试使用仅声明的标志返回空的 PropertyInfo 数组

```
Type type = msClass.GetType();
type.GetProperties(System.Reflection.BindingFlags.DeclaredOnly)

-->{System.Reflection.PropertyInfo[0]} 
```

但是，GetProperties() 返回继承层次结构的所有属性。

```
type.GetProperties()

-->{System.Reflection.PropertyInfo[3]}
-->[0]: {System.String Id}
-->[1]: {System.String Name}
-->[2]: {System.String CommonParam} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-01T16:03:12.027

您可以指定获取在派生类中定义的属性。如果随后调用基类，则可以获取基类中定义的属性。[`Type.GetProperties`](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)`(`[`BindingFlags.DeclaredOnly`](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)`)``GetProperties`

* * *

为了从您的类中获取公共属性，您可以执行以下操作：

```
var classType = typeof(MsClass);
var classProps = classType.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.Public);
var inheritedProps = classType.BaseType.GetProperties(BindingFlags.Public | BindingFlags.Instance); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-01T16:07:55.797

您可以根据`DeclaringType`以下情况进行检查：

```
var pros = typeof(MsClass).GetProperties()
                          .Where(p => p.DeclaringType == typeof(MsClass)); 
```

要从基类获取属性，您可以类似地调用：

```
var pros = typeof(MsClass).GetProperties()
                          .Where(p => p.DeclaringType == typeof(BaseMsClass)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T16:13:17.007

这可能会有所帮助：

```
Type type = typeof(MsClass);

Type baseType = type.BaseType;

var baseProperties = 
     type.GetProperties()
          .Where(input => baseType.GetProperties()
                                   .Any(i => i.Name == input.Name)).ToList(); 
```

# android - 如何使用 Titanium SDK 3.x 在 Android 中隐藏标签栏？

> ID：15746857
> 
> 赞同：2
> 
> 时间：2013-04-01T16:01:06.957
> 
> 标签：android, android-layout, titanium, titanium-mobile

我想在我的 Android 应用程序中**隐藏或显示我的选项卡栏。**我正在使用 Titanium SDK 3.x。任何建议或帮助表示赞赏。

可以使用 .XML 文件，例如**“选项卡样式或主题”**

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:51:57.613

```
var tabGroup = Titanium.UI.createTabGroup({
    backgroundImage: 'NewTabBackground.png',
    navBarHidden: true

});

Ti.App.customTabGroupDashBoard = tabGroup;

var tab1 = Titanium.UI.createTab({    
    title: 'Title One',
    window: win1
});

var tab2 = Titanium.UI.createTab({    
    title: 'Title Two',
    window: win2
});

tabGroup.addTab(tab1);
tabGroup.addTab(tab2);

// open tab group
return tabGroup; 
```

使用它`Ti.App.customTabGroupDashBoard`可以在任何地方全局访问您的 tabGroup。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-01T16:05:13.180

这是您用来显示标签栏的窗口上的一个属性。Titanium.UI.Window 上有一个名为 tabBarHidden 的属性，您可以将其设置为 true。请参阅： [http ://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window)

# iphone - 绘图的动画淡出

> ID：15746861
> 
> 赞同：0
> 
> 时间：2013-04-01T16:01:21.607
> 
> 标签：iphone, ios, objective-c, animation

我有一个用户可以绘制的视图。我想要的是，用户绘制的笔画必须按照绘制的顺序慢慢淡出。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:35:05.090

对于您要问的内容，您可以简单地将笔画添加为子视图，然后使用交叉淡入淡出过渡。

```
[drawingView addSubView:strokeView];
[UIView transitionWithView:strokeView duration:0.2f options:UIViewAnimationOptionTransitionCrossDissolve animations:NULL completion:NULL]; 
```

对于这样的事情（显示正在完成的绘图），我会亲自捕捉触摸点和时间偏移，以以抽屉的速度为每个点的绘图设置动画。更多的代码，但一种风格的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:31:01.883

J您可以尝试插入 a`AnimationFadeOut`并为其设置持续时间。这是一个代码片段。让我知道这是否对您有帮助。

```
-(void)fadeOut:(UIView*)viewToDissolve withDuration:(NSTimeInterval)duration   andWait:(NSTimeInterval)wait
 {
    [UIView beginAnimations: @"Fade Out" context:nil];

    // wait for time before begin
    [UIView setAnimationDelay:wait];

    // druation of animation
    [UIView setAnimationDuration:duration];
    viewToDissolve.alpha = 0.0;
    [UIView commitAnimations];
  } 
```

您可以使用您的操作来淡出，而不是使用 uiview。

# ios - IBM Worklight ApplicationCenter 的 Apple 开发人员 ID

> ID：15746865
> 
> 赞同：1
> 
> 时间：2013-04-01T16:01:35.877
> 
> 标签：ios, ibm-mobilefirst

我是否仍需要 Apple Developer ID 才能使用 IBM Worklight Application Center 在 iOS 设备上部署应用程序？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:49:49.867

我建议您同时获得 Apple Developer ( [https://developer.apple.com/programs/ios](https://developer.apple.com/programs/ios) ) 和 iOS Developer Enterprise ( [https://developer.apple.com/programs/ios/enterprise](https://developer.apple.com/programs/ios/enterprise) ) 帐户。这些是 Apple 的单独帐户。第一个将在开发和测试期间为您提供支持，后者允许您签署应用程序供公司员工内部使用。

与大多数开发工具相比，这些许可证的成本非常低，您只需按照他们希望的方式使用 Apple 的系统即可节省大量时间。

Worklight 的 Application Center 提供了很好的工具来管理您的内部应用程序的分发，但它们必须使用 Apple 帐户正确签名，否则您将无法将它们部署到 iOS 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:20:09.393

答案是肯定的。任何 iOS 应用程序都要求您是注册的 Apple 开发人员，并让您设置 iOS 开发所需的一切。这不会改变并脱离 Worklight 的控制。熟悉 iOS 开发。

# c - 大写从文件中读取的字母

> ID：15746866
> 
> 赞同：0
> 
> 时间：2013-04-01T16:01:38.057
> 
> 标签：c

我正在尝试从文件中选择某些字符，将它们大写，然后显示输出。我在选择字符时遇到了一些麻烦：

```
int i;
char c;
char currentChar;
char previousChar = ' ';

inp = fopen("junk.txt", "r");
if(inp == NULL){
    printf("Error opening file, quitting... \n");
    return 1;
}

c = fgetc(inp);
 while(c != EOF){
     if(isalpha(c)){
      putchar(toupper(c));
    c = fgetc(inp); 
```

是的，这是家庭作业。我不是在寻找答案，我只是想了解我做错了什么。它不需要使用字符串或数组。该程序应该读取文件的内容，将每个单词的第一个字母大写，然后打印结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:12:11.830

从 cplusplus.com 的[toupper()](http://www.cplusplus.com/reference/cctype/toupper/)页面：

> **int toupper ( int c );**
> 
> 将小写字母转换为大写 如果 c 是小写字母并且具有等效的大写字母，则将 c 转换为其等效的大写字母。如果不可能进行这样的转换，则返回的值是 c 不变。

所以不需要检查`if(isalpha(c))`你想要大写的字符

你的代码可能看起来像这样

```
char previousChar = ' ';
while((c = fgetc(inp)) != EOF){
   if(!isalpha(previousChar))
       putchar(toupper(c));
   else
       putchar(c);
   previousChar = c;
} 
```

根据alk remark：如果您的文档包含类似的单词，`peer2peer`那么它将`Peer2Peer`与之前的代码一起显示。如果要显示`Peer2peer`，则必须以这种方式更改支票：

```
char previousChar = ' ';
while((c = fgetc(inp)) != EOF){
   if(previousChar==' ' || previousChar=='\n' || previousChar=='\r' ||
      previousChar=='\t' || previousChar=='\v')
       putchar(toupper(c));
   else
       putchar(c);
   previousChar = c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:28:17.677

关于常见单词分隔符的各种可能性，我提出了这种方法：

```
#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>

int main(void)
{
  int result = EXIT_SUCCESS; /* be optimistic! :-) */

  int charCurrent = '\0'
  int charPrevious = ' ';

  while (EOF != (charCurrent = fgetc(stdin)) || (EOF == charPrevious))
  {
    if (isspace(charPrevious))
    {
      charCurrent = toupper(charCurrent);
    }

    charPrevious = fputc(charCurrent, stdout);
  }

  if ((EOF == charCurrent) && !feof(stdin))
  {
    result = EXIT_FAILURE;
    fprintf(stderr, "error getting\n");
  }

  if (EOF == charPrevious)
  {
    result = EXIT_FAILURE;
    fprintf(stderr, "error putting\n");
  }

  return result;
} 
```

然后调用程序：

```
$ ./capitaliser <infile.txt >outfile.txt 
```

# asp.net - ASP.NET 网站管理工具未打开

> ID：15746867
> 
> 赞同：0
> 
> 时间：2013-04-01T16:01:46.257
> 
> 标签：asp.net, sql-server, vb.net, administration

当尝试使用 VB.NET 的登录控件并单击“管理网站”时，T 网站管理工具未打开。

我正在使用 VS 2012 Professional 和 SQL-Server Express 2012

知道为什么会这样吗？

网络配置

```
 <?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>

  <connectionStrings>
    <add name="ConnStringDb1" connectionString="Data Source=localhost;Initial Catalog=master_db;Integrated Security=True;" providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.5"/>
    <httpRuntime targetFramework="4.5"/>
  </system.web>

<appSettings>
  <add key="ValidationSettings:UnobtrusiveValidationMode" value="None"/>
</appSettings>
</configuration> 
```

尝试在浏览器中手动输入链接：

```
http://localhost:64309/asp.netwebadminfiles/error.aspx 
```

在网页上给我这个错误：

```
An error was encountered. Please return to the previous page and try again. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:03:48.990

问题是用于项目的默认浏览器。

它似乎在 Firefox 中不起作用，但在 IE 中尝试时，它工作正常。

# android - android sdk 管理器和 avd 管理器图标未显示在我的 Eclipse 中

> ID：15746877
> 
> 赞同：4
> 
> 时间：2013-04-01T16:02:22.427
> 
> 标签：android

![在此处输入图像描述](https://i.stack.imgur.com/qYMG6.png)

尝试重新安装 ADT 插件，但未显示 Android SDK 和 AVD 管理器。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-07T14:01:53.433

在 Eclipse 上：使用菜单导航-

1.  窗户
2.  自定义透视
3.  命令组可用性选项卡
4.  在复选框上，android SDK 和 AVD 管理器选中它
5.  点击确定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:13:00.753

我在 JavaEE 透视图中，将其更改为 Java 透视图。现在显示 AVD 管理器和 SDK 管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:13:45.473

点击蓝色大按钮

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

不要从 Eclipse 本身设置 Android 开发环境。这很麻烦。下载一个 Eclipse 版本，Google 已经为您完成了所有正确的配置。

# iphone - iOS - 解析后保存xml数据

> ID：15746878
> 
> 赞同：0
> 
> 时间：2013-04-01T16:02:26.973
> 
> 标签：iphone, ios, xml, xml-serialization, nskeyedarchiver

这个问题可以是重复的。但我无法为我的问题找到正确的答案。

我从服务器下载了以下 xml 文件。

```
<INCIDENTTYPES>
    <INCIDENT FORMNAME="first" TEXT="First incident">
        <TYPE>Type1</TYPE>
        <TYPE>Type2</TYPE>
        <TYPE>Type3 Tag</TYPE>
        <TYPE>Type4 Tag</TYPE>
        <LOCATION>Council</LOCATION>
        <LOCATION>Domestic</LOCATION>
        <LOCATION>Commercial</LOCATION>
    </INCIDENT>
    <INCIDENT FORMNAME="second" TEXT="Second incident">
        <TYPE>Second type</TYPE>
        <TYPE>Second/first type</TYPE>
        <TYPE>Second3</TYPE>
        <LOCATION>Council</LOCATION>
        <LOCATION>Domestic</LOCATION>
        <LOCATION>Commercial</LOCATION>
    </INCIDENT>
</INCIDENTTYPES> 
```

我正在使用 RaptureXML 来解析 xml 文件，解析可以如下完成。

```
RXMLElement *rootXML = [RXMLElement elementFromXMLData:self.connectionData];            
    [rootXML iterate:@"INCIDENT" usingBlock: ^(RXMLElement *incidents) {

        if([[incidents attribute:@"FORMNAME"] isEqualToString:@"first"]){
            NSArray *listArray = [NSArray array];
            listArray = [incidents children:@"TYPE"];

            IncidentData *iData = [[IncidentData alloc] init];
            [iData.type setValue:listArray forKey:@"type"];

            NSData *data = [NSKeyedArchiver archivedDataWithRootObject:iData];
            [self.userDefault setObject:data forKey:@"firstObject"];
        }
    } 
```

IncidentData 类如下。

```
 #import "IncidentData.h"

    @implementation IncidentData

    - (id)initWithCoder:(NSCoder *)aDecoder{
        if (self = [super init]) {
//self.type is an array
            self.type = [aDecoder decodeObjectForKey:@"type"];

        }
        return self;
    }

    - (void)encodeWithCoder:(NSCoder *)aCoder{
        [aCoder encodeObject:self.type forKey:@"type"];
    }

    @end 
```

我正在尝试按以下方式加载数据。

```
NSData *dd = [self.userDefault objectForKey:@"firstObject"];

IncidentData *items = (IncidentData *)[NSKeyedUnarchiver unarchiveObjectWithData:dd];
NSArray *typeArray = [items.type objectAtIndex:0];
NSLog(@"Incident type : %@", typeArray); 
```

但 typeArray 为空。

**摘要**：我正在尝试解析远程 xml 文件并将值保存到磁盘上并使用应用程序的后期阶段。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:47:13.027

RaptureXML、RXMLElement 可能不支持 NSCoding。
尝试用：
`listArray = [incidents children:@"TYPE"];`
替换：
`listArray = [[incidents children:@"TYPE"] valueForKeyPath:@"text"];`

# r - 使用 R 时如何杀死通过 system() 启动的进程？

> ID：15746882
> 
> 赞同：0
> 
> 时间：2013-04-01T16:02:55.143
> 
> 标签：r, system

我正在使用`system()`R 中的函数运行另一个程序。我正在为另一个程序提供命令行功能。当我对参数进行错误编码时，我会收到一条错误消息，指出我无法删除关联的文件，因为它仍然由我在调用中`system()`调用的程序控制。

除了重新启动我目前正在做的 R 之外，有没有办法手动杀死这些类型的进程？

一个例子是这样的：

```
system("python myFile.py") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:21:47.920

在 Windows 上，您可以使用`TASKKILL`命令来终止进程。

例如

```
TASKKILL /IM python* 
```

# php - 使用 html2pdf 使用 php 和 mvc 模式生成报告

> ID：15746885
> 
> 赞同：0
> 
> 时间：2013-04-01T16:03:07.570
> 
> 标签：php, model-view-controller, pdf-generation, fpdf

我已经设置了一个以某种方式使用前端控制器的应用程序。我遇到了一个名为**html2pdf**的库。该库将 html 转换为 pdf。

像这样：

```
<?php
    $content = "
     <page>
      <h1>Exemple d'utilisation</h1>
      <br>
      Ceci est un <b>exemple d'utilisation</b>
      de <a href='http://html2pdf.fr/'>HTML2PDF</a>.<br>
     </page>";

   require_once(dirname(__FILE__).'/html2pdf/html2pdf.class.php');
   $html2pdf = new HTML2PDF('P','A4','fr');
   $html2pdf->WriteHTML($content);
   $html2pdf->Output('exemple.pdf');
?> 
```

如您所见，该库可以将该 html 转换为 pdf。它甚至可以读取 html 文件并将其转换为 pdf。

好的，这是我的控制器的设置。

```
class TestController extends Controller {
    private $template;

    public function __construct(View $view = null) {
        parent::__construct($view);
        $this->template = 'test'; // replace this
    }

    public function index() {
        $this->view->data['someinfo'] = 'information about me';
        $this->view->render($this->template);
    }
} 
```

我的想法是，不要将模板渲染出来，而是将`$someinfo`变量替换为，`information about me`因为我使用了`extract`php.ini 的功能。

我可以只替换变量，然后将输出保存为 html，这样我就可以使用 html2pdf 将其转换为 pdf？

是否已经实施了这一点？还是有更有效的解决方案，而不是创建和转换 html 文件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:15:05.757

在 ZendFramework MVC 中，您可能会在控制器中执行以下操作：

```
function toPdfAction()  { 
   // I need a different layout 
   $this->getHelper('layout')->setLayout('pdf-layout'); 
   $this->_helper->layout->disableLayout(); 

   // we need to do renderering ourselves.   
   $this->getHelper('viewRenderer')->setNoRender(); 

   /* @var $layout Zend_Layout */ 
   $layout = $this->_helper->layout->getLayoutInstance(); 
   $layout->assign('content', $this->view->render('mycontroller/myaction.tpl')); 

   $output = $layout->render(); 

   // now we still need to ensure that the rendering is not sent to the browser 
   $this->getResponse()->clearBody(); 

   // now do something with $ouput like convert it to PDF and stream it back
} 
```

但是，答案是针对特定于 MVC 实现的。如果您不使用 Zend，那可能对您不起作用。您使用的是什么 MVC 框架？

# vb.net - 为什么停不下来？

> ID：15746886
> 
> 赞同：1
> 
> 时间：2013-04-01T16:03:08.230
> 
> 标签：vb.net

我正在尝试制作一个视图机器人。仅供娱乐/个人使用。问题是我正在尝试使它一次只能打开 20 个窗口。由于某种原因它不会工作。我还希望它在关闭它生成的进程并进入循环之前等待 2000 毫秒。我有 co1unt 作为整数。有人帮忙吗？

```
Dim Co1unt As Integer = 0
Public Sub Refreshlist()
    Dim p As Process, co1unt As Integer, MyProgram As String = "iexplore"
    For Each p In Process.GetProcesses
        If p.ProcessName = MyProgram Then
            co1unt = co1unt + 1
            TextBox1.Text = co1unt
        End If
    Next
End Sub

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Refreshlist()
    Do
        Refreshlist()
        If Co1unt < 20 Then
            Dim webAddress As String = ""
            Dim p1 As Process = Process.Start(webAddress)
            System.Threading.Thread.Sleep(2000)
            p1.Kill()
        End If
    Loop

End Sub 
```

# php - 使用 imagemagick 将图像的左上角放置在特定像素上

> ID：15746887
> 
> 赞同：1
> 
> 时间：2013-04-01T16:03:09.963
> 
> 标签：php, imagemagick, imagemagick-convert

我有一个 NxN 大小的图像和一个 MxM 的图像，N>M。我想将第二个放在第一个之上，但我想在特定像素上进行，例如（10,15）

我安装了 imagemagick 并开始使用它 cli（计划稍后尝试使用 php），但我找不到可以用于此目的的东西，或者是否可以通过组合一些命令。

所以我的问题：

1.  使用 imagemagick 可以实现这样的事情吗？
2.  如果是，我如何在命令行 imagemagick 中实现它？
3.  如果是的话，我怎么能用 php 中的 imagemagick 来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:42:11.967

扩展我的评论，我认为 php gd 很适合这个。PHP gd 更好地集成到 php 中并且在我看来效果更好。我用它来做很多事情（最明显的是调整缩略图的大小）。您的问题似乎与在图像上放置水印非常相似，即一个图像放置在另一个图像之上，并将其导出为单个光栅图像。这是创建此水印的快速示例：

[http://www.sitepoint.com/watermark-images-php/](http://www.sitepoint.com/watermark-images-php/)

此示例将其直接导出到浏览器，但可以轻松修改以将图像本地保存到文件系统。享受！

# .net - 在 PropertyGrid 中修改结构属性

> ID：15746897
> 
> 赞同：6
> 
> 时间：2013-04-01T16:03:32.687
> 
> 标签：.net, winforms, propertygrid

为什么`SomeClass.ClassField.StructField`属性在 a 中没有变化`propertyGrid`？看来，实例更改后`propertyGrid`不会调用。但是相同的代码可以很好地与而不是.`SomeClass.ClassField.set``SomeStruct``Point``SomeStruct`

```
[TypeConverter(typeof(ExpandableObjectConverter))]
public struct SomeStruct
{
    private int structField;

    public int StructField
    {
        get
        {
            return structField;
        }
        set
        {
            structField = value;
        }
    }

    public override string ToString()
    {
        return "StructField: " + StructField;
    }
}

[TypeConverter(typeof(ExpandableObjectConverter))]
public sealed class SomeClass
{
    public SomeStruct ClassField
    {
        get;
        set;
    }
}

...

var someClass = new SomeClass
{
    ClassField = new SomeStruct
    {
        StructField = 42
    }
};
propertyGrid.SelectedObject = someClass; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T07:36:59.533

您需要一个特殊的 TypeConverter 来覆盖[TypeConverter.GetCreateInstanceSupported](http://msdn.microsoft.com/en-us/library/wd3a73dd.aspx)因为否则按值复制/装箱魔术会在属性网格处理所有这一切的方式背后发生。

这是一种适用于大多数值类型的方法。你这样声明它：

```
[TypeConverter(typeof(ValueTypeTypeConverter<SomeStruct>))]
public struct SomeStruct
{
    public int StructField { get; set; }
}

public class ValueTypeTypeConverter<T> : ExpandableObjectConverter where T : struct
{
    public override bool GetCreateInstanceSupported(ITypeDescriptorContext context)
    {
        return true;
    }

    public override object CreateInstance(ITypeDescriptorContext context, IDictionary propertyValues)
    {
        if (propertyValues == null)
            throw new ArgumentNullException("propertyValues");

        T ret = default(T);
        object boxed = ret;
        foreach (DictionaryEntry entry in propertyValues)
        {
            PropertyInfo pi = ret.GetType().GetProperty(entry.Key.ToString());
            if (pi != null && pi.CanWrite)
            {
                pi.SetValue(boxed, Convert.ChangeType(entry.Value, pi.PropertyType), null);
            }
        }
        return (T)boxed;
    }
} 
```

请注意，它不支持纯字段结构，仅支持具有属性的结构，但 ExpandableObjectConverter 也不支持这些，它需要更多代码才能做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-03T02:09:52.410

我调整了 Simon Mourier 的答案，以避免 ValueTypeTypeConverter 成为泛型的需要：

```
public class ValueTypeTypeConverter : System.ComponentModel.ExpandableObjectConverter
{
    public override bool GetCreateInstanceSupported(System.ComponentModel.ITypeDescriptorContext context)
    {
        return true;
    }

    public override object CreateInstance(System.ComponentModel.ITypeDescriptorContext context, System.Collections.IDictionary propertyValues)
    {
        if (propertyValues == null)
            throw new ArgumentNullException("propertyValues");

        object boxed = Activator.CreateInstance(context.PropertyDescriptor.PropertyType);
        foreach (System.Collections.DictionaryEntry entry in propertyValues)
        {
            System.Reflection.PropertyInfo pi = context.PropertyDescriptor.PropertyType.GetProperty(entry.Key.ToString());
            if ((pi != null) && (pi.CanWrite))
            {
                pi.SetValue(boxed, Convert.ChangeType(entry.Value, pi.PropertyType), null);
            }
        }
        return boxed;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-22T12:03:09.047

就我而言，通用参数在编译时是未知的（插件的选项结构）。您可以使用以下方法获取当前值的副本`context.PropertyDescriptor.GetValue(context.Instance);`：

```
 public override object CreateInstance(ITypeDescriptorContext context, IDictionary propertyValues)
  {
     if (propertyValues == null)
        throw new ArgumentNullException("propertyValues");

     object boxed = context.PropertyDescriptor.GetValue(context.Instance);
     foreach (DictionaryEntry entry in propertyValues)
     {
        PropertyInfo pi = boxed.GetType().GetProperty(entry.Key.ToString());
        if (pi != null && pi.CanWrite)
           pi.SetValue(boxed, Convert.ChangeType(entry.Value, pi.PropertyType), null);
     }
     return boxed;
  } 
```

# ruby-on-rails - Rails STI 建立关系

> ID：15746903
> 
> 赞同：0
> 
> 时间：2013-04-01T16:03:51.607
> 
> 标签：ruby-on-rails, sti

我正在使用 STI（正确，我保证！）作为对象的一个​​关系：

```
class Walrus < ActiveRecord::Base
  has_one :bubbles
end

class Bubbles < ActiveRecord::Base
  belongs_to :walrus
  before_save :set_origin

  private

  def set_origin
    self.type = walrus.state ? "Bubbles::#{walrus.state}" : 'Bubbles'
  end
end

class Bubbles::OfMind < Bubbles
  def tango
  end
end 
```

现在，如果我建立一个新关系，则该类设置不正确：

```
harold = Walrus.new(state: 'OfMind')
harold.build_bubbles.save!
harold.bubbles
  # => returns instance of Bubbles, not Bubbles::OfMind
harold.bubbles.tango
  # NoMethodError 
```

Bubbles 对象不能神奇地变成 Bubbles::OfMind，但在关系类型正确之前，不存在正确的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:44:58.283

在处理 STI 之前，请注意违反约定的模型名称和关联。我知道您选择这些类名是为了演示，但是由于您正在运行和测试此代码，因此出现异常行为也就不足为奇了。

模型类名称应该是**单一**且合理的。将超类更改为`Bubble`，将子类更改为引用气泡变体的东西，例如`BigBubble`。

`has_one`关联也必须使用**单数**模型名称：`has_one :bubble`.

注意：当 Rails 遇到命名空间模型时，它期望相应的控制器和视图文件也被命名空间，嵌套目录和所有。一会就乱了。*除非绝对*必要，否则最好避免命名空间。

* * *

生成器方法是对 STI 的滥用。构建器方法**尝试实例化超类**并手动为其分配类型。这与 Rails 对 STI 类的内置管理相冲突，因此不支持它。

**STI 超类是不应该被实例化**的抽象类。使用 STI 时，您只能与子类交互。超类的所有方法都暴露在子类中，因此没有理由接触超类对象……除非修改`type`违反 Rails 约定的属性。如果您绝对必须操作超类，则不应使用 STI。

正确完成后，您应该直接使用手动关联创建子类对象：

```
harold = Walrus.create!
BigBubble.create!(:walrus_id => harold.id)

harold.bubble
  # => returns instance of BigBubble

harold.bubble.tango
  # => true 
```

虽然不如构建器方法优雅，但这种方法是正确的并且有效。那些试图解决命名空间 STI 关联问题 ( [ahem...](http://simple10.com/rails-3-sti/) ) 的博客正试图强制执行不适合 STI 开始的行为。正确使用 STI 涉及采用设计准则，“*不要与超类混淆*”。

# java - Websphere App Server - DCSV0002W - 迁移问题

> ID：15746912
> 
> 赞同：0
> 
> 时间：2013-04-01T16:04:35.273
> 
> 标签：java, websphere, application-server

迁移到 HA 环境后我遇到了一些问题，Sysout 日志显示以下问题

> [3/31/13 11:15:17:096 CLT] 00000004 QueueTHandler W DCSV0002W：成员 lnxq030Cell01\lnxq060Node01\ibra01 处的 DCS 堆栈 DefaultCoreGroup：发生了意外的内部编程状态。内部详细信息：“无法打开 Async QueueT，因为 DCS 从 AddressResolver 获得了空成员地址”{Method=QueueTHandler.openQTonIpPort(), PtpRmmNode=PtpRmmNode|lnxq030Cell01\ibra01\riesgoCred01|null|2, TopicName=[B@29442944} . 例外是。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-12T16:33:49.813

我最近遇到了这个问题，最后我发现问题出在我的错误： `manageProfile.bat -create ... -hostName xxx` 我们不应该使用参数 -hostName，默认该命令将使用完整的限定主机名。
正确的命令应该是： `manageProfile.bat -create ... -dmgrHost xxx`

# android - 没有先前 USB 配对的网络上的 Adb

> ID：15746917
> 
> 赞同：6
> 
> 时间：2013-04-01T16:04:45.860
> 
> 标签：android, adb

我有一个 android 4.2.2 需要 ADB 连接来匹配批准的指纹。

问题是设备需要第一次使用 USB 电缆配对，在我的情况下这将是一个问题。

我的开发环境在 VirtualBox 中运行，我之前已经放弃尝试让 USB 工作，而是通过网络使用 ADB。

Android SDK Platform-tools 是最新的 1601。

我有什么方法可以手动将虚拟机中的密钥添加到我的设备中？

我的主机上有一个可用的 Android SDK，如果可以用来解决这个问题，我可以访问我的设备。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T16:39:41.777

此解决方案需要设备上的 root。

在开发机器上，从`$HOME/.android/adbkey.pub`.

```
QAAAAJk..................QA= @myhost 
```

并将其附加到`/data/misc/adb/adb_keys`您的 android 设备上。adb_keys 每行包含一个密钥，因此如果您之前已配对任何其他机器，它们将显示在此处。

重启设备。

# excel - 非数值数据的时间图

> ID：15746918
> 
> 赞同：0
> 
> 时间：2013-04-01T16:04:47.663
> 
> 标签：excel, graph, excel-2007

我试图在 Excel 2007 中绘制散点图，时间沿 x 轴，文本值沿 y 轴。由于我可以为 y 轴构建数值，另一种可能的查看方法是将沿 y 轴的标签更改为文本（而不是它们的默认数值）。

我的实际数据集如下所示：

```
start, end, flag, value
1:00am, 2:30am, 0, A
2:30am, 7:00am, 3, D
7:00am, 12:30pm, 2, C
12:30pm, 4:00pm, 7, H 
```

一般来说，如果我要绘制这个，我会把它翻译成这样的：

```
time, flag, value
1:00am, 0, A
2:30am, 0, A
2:30am, 3, D
7:00am, 3, D
7:00am, 2, C
12:30pm, 2, C
12:30pm, 7, H
4:00pm, 7, H 
```

然后我将构建一个散点图，其中时间列作为 x 轴，标志列作为 y 轴。但是，我更希望值列在 y 轴上提供标签。

我似乎找不到在 Excel 中执行此操作的方法。

我错过了什么还是我应该研究其他工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T23:39:26.403

这是我可以管理的关闭，当然严重依赖[Jon Peltier](http://peltiertech.com/WordPress/text-labels-on-vertical-axis-in-excel-column-chart/)：

![SO15746918 示例](https://i.stack.imgur.com/MCNXV.gif)

我怀疑它是否足够好，所以我不会用太多细节来混淆这个“答案”。即使是这种糟糕的产品也非常繁琐，所以如果可以接受的质量甚至更高，我认为大多数人可能不会认为值得付出努力。

该图表是可见的散点图和仅轴可见的条形图的组合，数据首先按字母顺序排序。数据是成对的，因此字母的重复）和甘特型条形图（显示持续时间，而不仅仅是开始和结束）将使为垂直轴添加文本标签变得更加容易和整洁。

# java - 导入 com.sun.javadoc，与 Eclipse 和 Ant 一起使用

> ID：15746922
> 
> 赞同：1
> 
> 时间：2013-04-01T16:04:59.610
> 
> 标签：java, eclipse, ant

我正在使用一个名为 RapidMiner 的开源项目，我需要能够使用 com.sun.javadoc 以便我可以使用 Ant 构建文件编译插件。我找到了一个线程，解释说我需要包含来自 JDK 的 .jar，并给出了一些关于如何执行此操作的简单说明（[参见此处](https://stackoverflow.com/questions/4797079/how-to-import-com-sun-javadoc-in-eclipse)）。

它似乎在基本层面上起作用。我现在可以使用 com.sun.javadoc 并让它与内容辅助一起工作。所以我的印象是 Eclipse 至少可以看到它。

问题是 Ant 拒绝看到它。我确保当我运行 build.xml 时它使用正确的 JRE（在我的特定情况下称为 jre7JDK）。但是每次我运行构建时都会出现这个错误（第二个错误是重要的）：

```
build.common:
 [echo] RapidMiner: Compile with Java from dir: C:\Program Files\Java\jre7
 [echo] RapidMiner: using Java version: 1.7.0_17
[javac] Compiling 12 source files to C:\Users\jcarr14\Eclipse\Workspace\RapidMiner_Unuk\build
[javac] C:\Users\jcarr14\Eclipse\Workspace\RapidMiner_Unuk\src\com\rapidminer\doc\AbstractOperatorDocGenerator.java:40: warning: [deprecation] com.rapidminer.operator.condition.InnerOperatorCondition in com.rapidminer.operator.condition has been deprecated
[javac] import com.rapidminer.operator.condition.InnerOperatorCondition;
[javac]                                         ^
[javac] C:\Users\jcarr14\Eclipse\Workspace\RapidMiner_Unuk\src\com\rapidminer\doc\AbstractOperatorDocGenerator.java:49: package com.sun.javadoc does not exist
[javac] import com.sun.javadoc.ClassDoc; 
```

还列出了数千个错误，但它们都归结为同一件事，Ant 没有以我需要包含的 JDK 的 .jars 的方式进行编译。如何让 Ant 看到那些 .jars？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:28:30.903

事实证明，答案非常直截了当。我所做的只是将 Eclipse 中的 Ant 构建指向实际的 JDK 本身（在另一个我似乎找不到的线程中提到过......）。我通过创建一个指向 JDK 根文件夹的新环境范围的 JRE 来做到这一点。然后，当我使用 build.xml 时，我会使用“Run As...”，然后使用 Ant Build，然后我会转到 JRE 选项卡并选择 JDK 支持的 JRE。从那以后它工作得很好。

我仍然不太确定为什么在我的自定义 JRE 中包含 JDK jar 不起作用，但是你去吧。

更新：找到了它被“暗示”的帖子。虽然当我现在阅读它时，它似乎很简单（就像它在你开始工作后经常发生的那样）：[就在这里](https://stackoverflow.com/questions/7697044/ant-and-eclipse?rq=1)。

# c++ - 不合格的 id 错误和井字棋板不工作

> ID：15746923
> 
> 赞同：0
> 
> 时间：2013-04-01T16:05:00.453
> 
> 标签：c++, compiler-errors

我正在尝试编写 C++ 井字游戏。但是我不断收到两个错误。1.在while循环之后我的两个if状态中的每一个之前，我收到错误“'if'之前的unqualified-id”。我不确定为什么。2\. 当我运行程序时，它自动说无效移动，它不会用 x 或 o 替换板上的空间。请帮忙，这是我的代码：

```
/*
Sophia Ali
   Template for TicTacToe.cpp (CS-509 Assignment 5)
can't get program to store x and o in the board
*/

#include<iostream>
#include <cstdlib>
using namespace std;

/*
   Game status enumeration
*/
enum Status { WIN, DRAW, CONTINUE, QUIT };

/*
   Function prototypes
*/
// showBoard: Show current state of board
void showBoard( const char board[], int boardSize );
// checkGameState: Returns WIN or CONTINUE
Status checkGameState( const char board[] );
int getHumanSquare( const char board[] );
int getComputerSquare( const char board[] );
// checkBadSquare: Checks to see if a chosen square is already taken; returns
//                 true if already taken; used by getHumanSquare and
//                 getComputerSquare functions above.
bool checkBadSquare( const char board[], int squareNum );
int getrandint( int min, int max );

int main()
{
    char board[] = "123456789";   // 10 element char board
    const int boardSize = 10;
    Status gameState = CONTINUE;
    int gametype, squareChoice, turnNum = 0;
    char currentSymbol;           // 'o' or 'x'

    cout << "\n This is a Tic Tac Toe program. Choose the type of game: "
         << "\n (1) human o vs. human x    (2) human o vs. dumb computer x"
         << "\n\n -> ";
    cin  >> gametype;

    /* Show the current state of Tic Tac Toe board. */
    cout << gameState;
    cout << "\n\n";

    /*
       Main game loop
    */
    while ( gameState == 2 )
    {
        /* Increment turnNum by 1\. */
        turnNum++;

        /* If turnNum equal to 10
              Set gameState to DRAW.
              Break out of while loop. */
        if ( turnNum == 10 )
        {
            gameState = DRAW;
            break;
        }
        /* If we are on an odd-numbered turn
              Print "It's o's turn."
              Set currentSymbol to 'o'.
              Call getHumanSquare function to get squareChoice.*/
        if ( turnNum%2 != 0)
        {
            cout << "It's o's turn.";
            currentSymbol = 'o';
            cout << "\n\n";

            getHumanSquare(board);
            showBoard( board, boardSize );
        }

        /* Else (we are on an even-numbered turn)
            Print "It's x's turn."
            Set currentSymbol to 'x'. */
        else
        {
            cout << "It's x's turn.";
            currentSymbol = 'x';
            cout << "\n\n";
            showBoard( board, boardSize );

        }

        /*   If the gametype is 1 (human vs. human)
              Call getHumanSquare function to get squareChoice.*/
        if ( gametype == 1 )
        {
            getHumanSquare(board);
        }

        /* Else (gametype is 2 (human vs. computer))
           Call getComputerSquare function to get squareChoice. */
        else
        {
            getComputerSquare(board);
        }

        /* If squareChoice is -1 (human player quit)
              Set gameState to QUIT.*/
        if ( squareChoice == -1 )
        {
            gameState = QUIT;
        }

        /* Else
           Insert currentSymbol into board at (squareChoice - 1).
           Show the current state of the Tic Tac Toe board.
           Call checkGameState function to determine the gameState. */
        if (squareChoice >= 0 && squareChoice <= 8 && board[squareChoice-1] == '0' + squareChoice)
        {
            board[squareChoice-1] = currentSymbol;
        }
        else
        {
            cout <<"Invalid move";
            turnNum--;
            cout << "\n\n";
        }
        checkGameState(board);
    }
    return 0;
}/* end while*/

/* If gameState is WIN
      print "Player " currentSymbol " is the winner." */

if ( gameState == WIN)
    cout << "Player" << currentsymbol << "is the winner.";

/* If gameState is DRAW
      print "It's a draw." */
if ( gameState = DRAW )
cout <<"It's a draw.";

/////////////////////////////////////////////////////////////////////

void showBoard( const char board [], int size )
{
    cout << endl;

    for ( int i = 0; i < size ; i++ )
    {
        cout << board[ i ] << " ";
        if ( ( i + 1 ) % 3 == 0 )
            cout << endl;
    }

    cout << endl;
}

/////////////////////////////////////////////////////////////////////

Status checkGameState( const char board[] )
{
    // Board       Array
    //
    // 1 2 3       0 1 2
    // 4 5 6  -->  3 4 5
    // 7 8 9       6 7 8
    //
    // Diagonal winners
    if ( board[ 0 ] == board[ 4 ] && board[ 0 ] == board[ 8 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 4 ] && board[ 4 ] == board[ 6 ] )
        return WIN;
    // Horizontal winners
    else if ( board[ 0 ] == board[ 1 ] && board[ 1 ] == board[ 2 ] )
        return WIN;
    else if ( board[ 3 ] == board[ 4 ] && board[ 4 ] == board[ 5 ] )
        return WIN;
    else if ( board[ 6 ] == board[ 7 ] && board[ 7 ] == board[ 8 ] )
        return WIN;
    // Vertical winners
    else if ( board[ 0 ] == board[ 3 ] && board[ 3 ] == board[ 6 ] )
        return WIN;
    else if ( board[ 1 ] == board[ 4 ] && board[ 4 ] == board[ 7 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 5 ] && board[ 5 ] == board[ 8 ] )
        return WIN;
    else
        // No one has won yet
        return CONTINUE;
}

/////////////////////////////////////////////////////////////////////

int getHumanSquare( const char board[] )
{
    int squareNum;

    cout << "\n Input the number of an empty square: (-1 to quit) ";
    cin  >> squareNum;

    while ( checkBadSquare( board, squareNum ) == true )
    {
        cout << "\n Bad input. Choose another square: ";
        cin >> squareNum;
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

int getComputerSquare( const char board[] )
{
    int squareNum;

    squareNum = getrandint( 1, 9 );

    while ( checkBadSquare( board, squareNum ) == true )
    {
        squareNum = getrandint( 1, 9 );
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

bool checkBadSquare( const char board[], int squareNum )
{
    int realSquareNum = squareNum - 1; // count from 0

    if ( squareNum == -1 )
        return false;  // Let quit code pass as a valid square
    else if ( squareNum > 9 )
        return true;   // Square numbers out of range are invalid
    else if ( board[ realSquareNum ] == 'o' || board[ realSquareNum ] == 'x' )
        return true;   // Already taken squares are invalid
    else
        return false;  // Valid square number
}

/////////////////////////////////////////////////////////////////////

int getrandint( int min, int max )
{

    int scale, shift;
    scale = max - min + 1;
    shift = min;
    return rand() % scale + shift;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:06:31.263

您在这里的第一条评论是不正确的。

```
 }
    return 0;

}/* end while*/

/* If gameState is WIN
      print "Player " currentSymbol " is the winner." */

if ( gameState == WIN)
    cout << "Player" << currentsymbol << "is the winner."; 
```

你所说`/* end while */`的实际上是结束`main()`。您在`}`上面看到的是循环的*真正*结束。`while`

该错误告诉您您正在编写函数之外的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:32:59.980

**语法问题**

```
if ( gameState == WIN)
cout << "Player" << currentSymbol << "is the winner.";

/* If gameState is DRAW
print "It's a draw." */
if ( gameState = DRAW )
cout <<"It's a draw."; 
```

应该在 main..（我认为）现在它在全球范围内。

* * *

**逻辑问题**

用你的代码可能就行了

```
if (squareChoice >= 0 && squareChoice <= 8 && board[squareChoice-1] == '0' + squareChoice) 
```

这需要适当的括号。你是什​​么意思

```
&& board[squareChoice-1] == '0' + squareChoice 
```

请发表评论。

# spring - HTTP 状态 405 - 提交时不支持请求方法“POST”

> ID：15746924
> 
> 赞同：0
> 
> 时间：2013-04-01T16:05:01.523
> 
> 标签：spring, spring-mvc, spring-security

我正在尝试获取此页面添加到我的请求参数值

春季安全：

```
 <security:http pattern="/users/reset*" security="none" /> 
```

形式：

```
 <div class="input_form" style="margin:0 auto;width:500px;padding:14px;">
        <sf:form action="${contextPath}users/resetpassword" method="POST">
            <label>User Name</label> <input type="text" name="username">
            <label>Email Address</label> <input type="text" name="email">
            <button type="submit">Reset Password</button> <br/>
        </sf:form>
    </div>

@RequestMapping(value = "resetPassword", method = RequestMethod.POST)
public ModelAndView resetPassword(@RequestParam("email") String email,
        @RequestParam("username") String username) {
    logger.info("Enter email reset password");
    logger.info("user name:" + username);
    logger.info("email address:" + email);
    return null;
} 
```

现在，当我尝试提交表单时，我收到此警告 405 Request method 'Post' not supported on submit 错误：

```
WARN : org.springframework.web.servlet.PageNotFound - Request method 'POST' not supported 
```

# javascript - 如何访问 iframe 元素

> ID：15746929
> 
> 赞同：0
> 
> 时间：2013-04-01T16:05:19.670
> 
> 标签：javascript

我有以下 html 和 javascript。如果我单击模拟事件，我希望 HandleEvents 函数将文本发布到“子”页面 html 中。因此，我实际上是在尝试从父级锁定子网页内的 html 元素。

我怎么做？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript">

function _bindEvent(el, eventName, eventHandler) {
        if (el.addEventListener){
           el.addEventListener(eventName, eventHandler, false); 
        } else if (el.attachEvent){
           el.attachEvent('on'+eventName, eventHandler);
        }
}

function doconfigure() {
   var ifrm = document.getElementById('ifrm');
   if(ifrm) {
      ifrm.src="configure.html";
   }
}

function doevents() {
   var ifrm = document.getElementById('ifrm');
   if(ifrm) {
      ifrm.src="show_events.html";
   }
}

function dooutbound() {
       var ifrm = document.getElementById('ifrm');
       if(ifrm) {
          ifrm.src="outbound.html";
       }
}

function HandleEvents(data) {

    //post data to show_events.html page
    var ifrm = document.getElementById('ifrm');
    if(ifrm) {
        ifrm.src="show_events.html";
    }

    //post to events field
    var elem = top.frames['display'].document.getElementById('event');
    if(elem) {
        elem.innerHTML = data;
    }
}

</script>

<title></title>

</head>
<body>
<fieldset>
<legend>Select</legend>
<input type="button" value="Configure" onclick="doconfigure();">
<input type="button" value="Events" onclick="doevents();">
<input type="button" value="Outbound" onclick="dooutbound();">
<input type="button" value="simulate event" onclick="HandleEvents('my event');">
<br />
</fieldset>
<iframe src="configure.html" name="display" id="ifrm" height="700" width="800">
  <p>Your browser does not support iframes.</p>
</iframe>

</body>
</html> 
```

然后是 show_events.html 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title></title>
</head>
<body>
  <p>Events:</p>
  <p id="event"></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:14:33.710

除非 IFRAME 与父脚本共享相同的来源（出于 CSRF 保护目的），否则您将无法执行此操作。如果满足了这个要求，那就万事大吉了。

强烈建议使用 jQuery，因为事情很快就会变得非常非常混乱。

您可以使用以下方法访问 IFRAME 的 DOM：

**jQuery（小提琴：http: [//jsfiddle.net/ZYxVA/](http://jsfiddle.net/ZYxVA/)）**

```
var myIFRAME = $("iframe#test");
var myContent = $("html",myIFRAME.contents()); 
```

**本机（小提琴：http: [//jsfiddle.net/L8Cek/](http://jsfiddle.net/L8Cek/)）**

```
var myIFRAME = document.getElementById("test");
var mC = myIFRAME.contentDocument,
   mCbody = mC.getElementsByTagName("body")[0];
var docE = document.createElement("div");
docE.innerHTML = "this is a test";
mCbody.appendChild(docE); 
```

正如您现在可能知道的那样，强烈推荐使用 jQuery，因为您的代码会变得*非常*复杂，否则会*很快*。快速的失败是， $("iframe").contents() 允许您获取`contentDocument`. 从那里，您可以通过将其作为第二个参数传递来对该 DOM 运行查询。

除此之外，在 iframe 完全加载之前，您也无法执行任何操作。您可以通过在其上绑定 onLoad 事件来收听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:14:39.570

您需要等待 iframe 完全加载后才能访问 iframe 中的元素。

**基本思路：**

```
function HandleEvents (data) {

    var myIframe = document.getElementById('ifrm');
    myIframe.onload = function() {
        var innerDoc = myIframe.contentDocument || myIframe.contentWindow.document;
        var myElement = innerDoc.getElementById('event');
        myElement.innerHTML = data;
    };
    myIframe.src = 'show_events.html';

} 
```

# android - 在 webview android 中播放 youtube 视频时如何提示用户在浏览器或应用程序之间进行选择

> ID：15746932
> 
> 赞同：0
> 
> 时间：2013-04-01T16:05:27.670
> 
> 标签：android, android-webview

我使用 Web-view 在 android 中创建了一个简单的浏览器。我有一个文本编辑和一个开始按钮。当我进入 YouTube 时，我可以很好地播放视频，但是当我将设备侧向转动时，视频停止并要求再次播放，然后它不会再播放或任何其他视频。当点击视频播放时，有没有办法提示用户在浏览器或 YouTube 应用程序之间进行选择？还有没有办法让android意识到我​​的应用程序是一个网络浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:17:11.130

```
startActivity(Intent.createChooser( shareIntent, title )); 
```

其中 shareIntent 是您要启动的意图（显示视频的意图）。它将创建一个包含所有可以处理该意图的应用程序的选择器。

要让 android 意识到你是一个网络浏览器，你需要设置一个意图过滤器，表明你可以查看 HTML mime 类型。

# loops - Ada - 除以一个浮点数并循环它直到它达到零

> ID：15746936
> 
> 赞同：2
> 
> 时间：2013-04-01T16:05:39.463
> 
> 标签：loops, ada

我需要帮助解决这个简单的迭代问题。我正在尝试划分...

```
vhdl
number : Float := 55.0;

loop 
  number := number / 3.0;
  Put (number);
  exit when number <= 0.0;
end loop; 
```

我希望它在第一个 0.0.0 时退出。

我一直在无限循环

```
18.3   6.1   2.0   0.7   0.2   0.1   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   
0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   
0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   
0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   
0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   
0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   
0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:26:54.073

第一个打印的 0.0 不是零，它是一个相当大的浮点数，四舍五入到小数点后一位。

无论你除以多少次，如果你的算术是准确的，你永远不会以这种方式得到零，所以你会写一个无限循环。

现在，Ada 中的算术并不是真的那么准确，但对于这个特定的例子，它显然是以产生相同效果的方式四舍五入的。或者，正如西蒙所说，你没有等待足够长的时间。它不可靠；机会是，`Long_Float`或者

```
type Big_Float is digits 18; 
package Big_Float_IO is new Float_IO(Num => Big_Float);
use Big_Float_IO;

number : Big_Float := 55.0; 
```

可能会给出不同的结果。

编辑：在任何采用符合标准的除法指令的 IEEE P754 浮点运算的系统上，它最终都会退出，除非您选择了特定的可选舍入模式。但这仍然不是编程的好方法！

如果您的目标与您描述的完全一样，请更正式地重新声明：在第一个数字处退出，表示 0.0 舍入到小数点后一位。

这意味着，任何数字 < 0.05。

所以将循环终止重写为

```
exit when number < 0.05; 
```

而且要快乐。

否则，你真正想要做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:28:07.387

您发布的代码无法编译；没有标准操作在左边`&`接受 a ，在右边接受 a ，然后返回 a 。`String``Float``String`

就是说，我想你可能没有等太久：对我来说，它在 99 行后停止，

```
...
number=  8.40779E-45
number=  2.80260E-45
number=  1.40130E-45
number=  0.00000E+00 
```

我想知道为什么你的比较是`<=`？怎么可能`number`变成负数？

# jquery - 菜单选项切换？

> ID：15746940
> 
> 赞同：0
> 
> 时间：2013-04-01T16:05:44.997
> 
> 标签：jquery, menu

第一个帖子，第一个问题。

我是 jQuery 初学者，所以请耐心等待。我有一个有 3 个选项的菜单。我需要代码来切换它们 - 当一个选项处于活动/激活状态时，另一个选项处于非活动/停用状态（停用时，运行相应的 *_deactivate() 函数）。为了有一个整洁的菜单，我创建了输入/输出动画。我检查了一些帖子，但无法将解决方案应用于我的问题。

菜单代码：

```
// Menu button "A Empresa" mouse events ├───────────────────────────────────────────────────────────────────┤

  $('#aEmpresa').on('mouseenter', function(){
    $(this).css({'cursor':'pointer'});
    $("#aEmpresa p").animate({'color':'#EF7F1A'}, 150);
    $("#aEmpresa_underline").animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
  });

  $('#aEmpresa').on('mouseleave', function(){
    $("#aEmpresa p").animate({'color':'#C5C6C6'}, 150);
    $("#aEmpresa_underline").stop(true).animate({'background-position-x':'0px', 'background-position-y':'0px'}, 150);
  });

  $('#aEmpresa').on('click', function(){
    $("#aEmpresa p").animate({'color':'#000000'}, 150);
    $("#aEmpresa p").css({'font-weight':'bold'}, 150);
    $('#aEmpresa_underline').animate({'background-position-x':'0px', 'background-position-y':'-22px'}, 150);
    $(this).unbind('mouseenter mouseleave');
    $(this).css({'cursor':'default'});
  });

  function aEmpresa_deactivate(){
    $('#aEmpresa_underline').animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
    $("#aEmpresa p").animate({'color':'#EF7F1A'}, 150,
      function(){
        $('#aEmpresa_underline').animate({'background-position-x':'0px', 'background-position-y':'-22px'}, 150);
        $("#aEmpresa p").animate({'color':'#C5C6C6'}, 150);
        $("#aEmpresa p").css({'font-weight':'normal'}, 150,
          function(){
            $('#aEmpresa').on();
            $(this).css({'cursor':'pointer'});
          }
        );
      }
    );
  }

// Menu button "A Nossa Arte" mouse events ├────────────────────────────────────────────────────────────────┤

  $('#aNossaArte').on('mouseenter', function(){
    $(this).css({'cursor':'pointer'});
    $("#aNossaArte p").animate({'color':'#EF7F1A'}, 150);
    $("#aNossaArte_underline").animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
  });

  $('#aNossaArte').on('mouseleave', function(){
    $("#aNossaArte p").animate({'color':'#C5C6C6'}, 150);
    $("#aNossaArte_underline").stop(true).animate({'background-position-x':'0px', 'background-position-y':'0px'}, 150);
  });

  $('#aNossaArte').on('click', function(){
    $("#aNossaArte p").animate({'color':'#000000'}, 150);
    $("#aNossaArte p").css({'font-weight':'bold'}, 150);
    $('#aNossaArte_underline').animate({'background-position-x':'0px', 'background-position-y':'-22px'}, 150);
    $(this).unbind('mouseenter mouseleave');
    $(this).css({'cursor':'default'});
  });

  function aNossaArte_deactivate(){
    $('#aNossaArte_underline').animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
    $("#aNossaArte p").animate({'color':'#EF7F1A'}, 150,
      function(){
        $('#aEmpresa_underline').animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
        $("#aNossaArte p").animate({'color':'#C5C6C6'}, 150);
        $("#aNossaArte p").css({'font-weight':'normal'}, 150,
          function(){
            $('#aNossaArte').on();
            $(this).css({'cursor':'pointer'});
          }
        );
      }
    );
  }

// Menu button "Contactos" mouse events ├───────────────────────────────────────────────────────────────────┤

  $('#contactos').on('mouseenter', function(){
    $(this).css({'cursor':'pointer'});
    $("#contactos p").animate({'color':'#EF7F1A'}, 150);
    $("#contactos_underline").animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
  });

  $('#contactos').on('mouseleave', function(){
    $("#contactos p").animate({'color':'#C5C6C6'}, 150);
    $("#contactos_underline").stop(true).animate({'background-position-x':'0px', 'background-position-y':'0px'}, 150);
  });

  $('#contactos').on('click', function(){
    $("#contactos p").animate({'color':'#000000'}, 150);
    $("#contactos p").css({'font-weight':'bold'}, 150);
    $('#contactos_underline').animate({'background-position-x':'0px', 'background-position-y':'-22px'}, 150);
    $(this).unbind('mouseenter mouseleave');
    $(this).css({'cursor':'default'});
  });

  function contactos_deactivate(){
    $('#contactos_underline').animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
    $('#contactos p').animate({'color':'#EF7F1A'}, 150,
      function(){
        $('#aEmpresa_underline').animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
        $("#contactos p").animate({'color':'#C5C6C6'}, 150);
        $("#contactos p").css({'font-weight':'normal'}, 150,
          function(){
            $('#contactos').on();
            $(this).css({'cursor':'pointer'});
          }
        );
      }
    );
  }

// Running menu for the first time - aEmpresa ├─────────────────────────────────────────────────────────────┤
function aEmpresa_runFirstTime(){
  $('#aEmpresa_underline').animate({'background-position-x':'0px', 'background-position-y':'-10px'}, 150);
  $("#aEmpresa p").animate({'color':'#EF7F1A'}, 150,
    function(){
      $('#aEmpresa_underline').animate({'background-position-x':'0px', 'background-position-y':'-22px'}, 150);
      $("#aEmpresa p").animate({'color':'#000000'}, 150);
      $("#aEmpresa p").css({'font-weight':'bold'}, 150,
        function(){
          $('#aEmpresa').off();
          $(this).css({'cursor':'default'});
        }
      );
    }
  );
}

// Running first time
aEmpresa_runFirstTime(); 
```

[小提琴](http://jsfiddle.net/ec4XA/)

佩德罗

PS 第一次运行时，第一个选项会自动激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:58:19.190

您应该尝试使用 jQuery 强大的选择器和链接，而不是为每个菜单项使用单独的函数。

下面是一些修改后的代码，用于`addClass`指定`removeClass`活动菜单项：

```
$('#menu').on('mouseenter', '> div:not(.active)', function () {
    var $this = $(this);
    $this.find('p').animate({
        'color': '#EF7F1A'
    }, 150).find('+ .menuUnderline').animate({
        'background-position-x': '0px',
        'background-position-y': '-10px'
    }, 150);
}).on('mouseleave', '> div:not(.active)', function () {
    var $this = $(this);
    $this.find('p').animate({
        'color': '#C5C6C6'
    }, 150).find('+ .menuUnderline').stop(true).animate({
        'background-position-x': '0px',
        'background-position-y': '0px'
    }, 150);
}).on('click', '> div:not(.active)', function () {
    // deactivate currently active
    $('#menu > div.active').removeClass('active').animate({
        'background-position-x': '0px',
        'background-position-y': '-10px'
    }, 150).find('p').animate({
        'color': '#C5C6C6'
    }, 150).siblings('.menuUnderline').animate({
        'background-position-x': '0px',
        'background-position-y': '0px'
    }, 150);

    // activate clicked item
    $(this).addClass('active').find('p').animate({
        'color': '#000000'
    }, 150).find('+ .menuUnderline').animate({
        'background-position-x': '0px',
        'background-position-y': '-22px'
    }, 150);
});

(function ($) {
    $('#menu + div').click();
})(jQuery); 
```

在你的 CSS 中再添加一条规则也稍微简化了 jQuery：

```
#menu > div.active { cursor: default; font-weight: bold; } 
```

这是小提琴：http: [//jsfiddle.net/zBuZT/](http://jsfiddle.net/zBuZT/)

（请注意，第一个菜单项的单击事件将在页面加载时触发，而不是在 jsfiddle iframe 的上下文中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:22:51.360

尝试使用`jquery data()`.

`pseudocode:`

```
if first time
{
    initialize first menu option to selected
    change `data-clicked` attribute to `true`
}

if menu_item is clicked
{
    for each item from menu
    {
        check `data-clicked` attribute
        if(true) then set to false
        else set to true
    }
} 
```

您也可以使用简单的 css 类，但`data`属性更优雅，但这只是偏好问题。

如果你愿意，你也可以`data`像这样按属性值进行选择：

```
$("[data-clicked='true']"); 
```

但是我更喜欢：

```
$(item).data("hidden") === true; 
```

[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

# iphone - 设置变量后更改 UIPageViewController 的 viewControllerAfterViewController 方法的值？

> ID：15746951
> 
> 赞同：0
> 
> 时间：2013-04-01T16:06:25.310
> 
> 标签：iphone, ios, objective-c, uipageviewcontroller

我有一个按预期工作的 UIPageViewController，它在每个页面上都有我的子视图控制器，一切都很好。在其中一个页面上，我想要它，以便当该子视图控制器上的布尔值设置为 YES 时，它允许用户滑动到下一页。如果没有，我希望他们在设置布尔值之前无法继续前进（尽管他们应该可以自由地向后移动）。

我在 viewControllerAfterViewController 方法中设置了这些值，但只有在子视图控制器加载到 UIPageViewController 时才会调用它。当用户尝试滑动时，我想要这样做的方式再次设置，但是有没有一种方法可以在不完全覆盖手势识别器的情况下做到这一点？

这就是该函数当前具有的功能，最初我检查了子视图控制器的布尔值，但它最终没有用，因为它从未被调用过。变量 viewControllers 是一个包含我所有控制器的 NSArray。

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    if ([viewControllers containsObject:viewController]) {
        NSInteger index = [viewControllers indexOfObject:viewController];
        if (index < [viewControllers count] - 1) {
            return [viewControllers objectAtIndex:(index + 1)];
        }
    }
    return nil;
} 
```

# gruntjs - 带有模板的 Grunt usemin

> ID：15746952
> 
> 赞同：7
> 
> 时间：2013-04-01T16:06:27.243
> 
> 标签：gruntjs, yeoman

给定以下目录结构：

```
– Gruntfile.js
– app
    |– index.php
    |– js
    |– css
    |– templates
         |– template.php
– dist 
```

如何配置 grunt usemin 以更新模板文件中相对于使用模板的 index.php 的样式和脚本的引用？

目前的任务是这样的：

```
useminPrepare: {
    html: '<%= yeoman.app %>/templates/template.php',
    options: {
        dest: '<%= yeoman.dist %>'
    }
},
usemin: {
    html: ['<%= yeoman.dist %>/{,*/}*.php'],
    css: ['<%= yeoman.dist %>/css/*.css'],
    options: {
        dirs: ['<%= yeoman.dist %>']
    }
} 
```

模板内部的块如下所示：

```
<!-- build:js js/main.js -->
    <script src="js/script1.js"></script>
    <script src="js/script2.js"></script>
<!-- endbuild --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:26:35.853

好的，我发现了：解决方案是使用备用搜索路径选项：

```
<!-- build:<type>(alternate search path) <path> -->
... HTML Markup, list of script / link tags.
<!-- endbuild --> 
```

构建块现在看起来像这样：

```
<!-- build:js(app) js/main.js -->
    <script src="js/script1.js"></script>
    <script src="js/script2.js"></script>
<!-- endbuild --> 
```

而usemin任务配置如下：

```
usemin: {
    html: '<%= yeoman.dist %>/templates/template.php',
    css: ['<%= yeoman.dist %>/css/*.css'],
    options: {
        dirs: ['<%= yeoman.dist %>']
    }
} 
```

# python - 文件对象中的rb和r+b模式有什么区别

> ID：15746954
> 
> 赞同：60
> 
> 时间：2013-04-01T16:06:47.840
> 
> 标签：python, file, file-io, pickle

我在 Python 中使用 pickle 模块并尝试不同的文件 IO 模式：

```
# works on windows.. "rb"
with open(pickle_f, 'rb') as fhand:
        obj = pickle.load(fhand)

# works on linux.. "r"
with open(pickle_f, 'r') as fhand:
        obj = pickle.load(fhand)

# works on both "r+b"
with open(pickle_f, 'r+b') as fhand:
        obj = pickle.load(fhand) 
```

我从未在任何地方读过“r+b”模式，但在[文档](http://docs.python.org/2/tutorial/inputoutput.html)中发现了它的提及。

`EOFError`如果我使用`"rb"`模式，我会在 Linux 上使用，如果使用，我会在 Windows上`"r"`使用。我只是试`"r+b"`了一下模式，它在两者上都有效。

什么`"r+b"`模式？“rb”和“r+b”有什么区别？为什么当其他人不工作时它会起作用？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-01T16:08:19.487

`r+`用于读取和写入模式。`b`用于二进制。 `r+b`模式是以读或写模式打开二进制文件。[你可以在这里](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)
阅读更多。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-01T16:08:52.710

`r`打开阅读，而`r+`打开阅读和写作。`b`用于二进制。

这在[文档](http://docs.python.org/2/library/functions.html#open)中有详细说明：

> 最常用的模式值是`'r'`读取、`'w'`写入（如果文件已经存在则截断文件）和`'a'`追加（在某些 Unix 系统上，这意味着所有写入都附加到文件末尾，而不管当前查找位置如何） ）。如果省略模式，则默认为`'r'`. 默认是使用文本模式，它可以`'\n'`在写入和读取时将字符转换为特定于平台的表示。因此，在打开二进制文件时，应附加`'b'`到模式值以二进制模式打开文件，这将提高可移植性。（即使在不区别对待二进制文件和文本文件的系统上，附加`'b'`也很有用，它用作文档。）有关 mode 的更多可能值，请参见下文。
> 
> Modes `'r+'`，`'w+'`然后`'a+'`打开文件进行更新（注意会`'w+'`截断文件）。`'b'`在区分二进制文件和文本文件的系统上，附加到模式以二进制模式打开文件；在没有这种区别的系统上，添加`'b'`没有效果。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-01T16:08:47.723

我的理解是`r+`为读取和写入添加打开（就像`w+`，尽管正如评论中指出的那样，会截断文件）。只是以`b`二进制模式打开它，这应该不太了解行分隔符之类的东西（至少在 C++ 中）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-12T11:02:53.173

> 在 Windows 上，附加到模式的 'b' 以二进制模式打开文件，因此还有 'rb'、'wb' 和 'r+b' 等模式。Windows 上的 Python 区分了文本文件和二进制文件；读取或写入数据时，文本文件中的行尾字符会自动稍作更改。这种对文件数据的幕后修改适用于 ASCII 文本文件，但它会破坏 JPEG 或 EXE 文件中的二进制数据。在读写此类文件时要非常小心使用二进制模式。在 Unix 上，将“b”附加到模式并没有什么坏处，因此您可以独立于平台使用它来处理所有二进制文件。

来源：[读写文件](https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)

# css - Rails App 上的管理员是否有一个很好的与引导程序兼容的 CSS？

> ID：15746956
> 
> 赞同：2
> 
> 时间：2013-04-01T16:06:50.997
> 
> 标签：css, ruby-on-rails, admin

我正在使用 Rails 3.2.x 开发一个商业网站。使用引导程序。该应用程序是 Intranet 样式的，您可能会将其视为管理页面。所以不需要花哨的设计。

Bootstrap 非常适合作为基础。但我想在设计方面为它增添趣味。我检查了 Active Admin，但它具有很多功能。我想要的只是设计主题。

你对我有什么建议吗？

谢谢你。

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:10:03.540

看看这个：[https ://wrapbootstrap.com/](https://wrapbootstrap.com/)

这里有一些免费的主题：[http ://bootswatch.com/](http://bootswatch.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T03:19:12.583

[Jarvis 主题](https://wrapbootstrap.com/theme/jarvis-smart-admin-template-WB09MR0M6)- 比其他模板便宜，而且使用更少

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:13:29.960

[AdminPlus](http://themeforest.net/item/adminplus-premium-bootstrap-admin-template-/4075896) - 高级引导管理模板

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-22T11:05:22.550

我会使用[rails_admin](https://github.com/sferik/rails_admin) + [softwarebrothers_theme](https://github.com/SoftwareBrothers/rails_admin_softwarebrothers_theme)

# mongodb - ElasticSearch 索引和对其他文档的引用

> ID：15746957
> 
> 赞同：0
> 
> 时间：2013-04-01T16:06:56.933
> 
> 标签：mongodb, elasticsearch

我有一个 ElasticSearch 实例，通过[richardwilly98使用 River 索引 MongoDB 数据库](https://github.com/richardwilly98/elasticsearch-river-mongodb)

有两种类型的文档被索引：

*   引用用户的文档
*   代表用户的文件

当这些对象被添加到 mongodb 时，richardwilly98 的[河流](https://github.com/richardwilly98/elasticsearch-river-mongodb)会生成如下内容：

*   文档={'用户'：{“$id”：“5159a004c87126641f4f9530”}}
*   user_document = {'_id':"5159a004c87126641f4f9530",'用户名':'bob'}

如果我搜索“bob”，我希望返回任何引用 bob 文档的文档。目前这不会发生，因为用户名字段无论如何都与引用文档无关。

是否有可能做到这一点？ElasticSearch 有对象引用吗？

谢谢 - 如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:37:30.677

如果每个文档不超过一个用户，您可以将文档索引为用户的[子](http://www.elasticsearch.org/guide/reference/mapping/parent-field/)级。然后您可以使用[has_parent](http://www.elasticsearch.org/guide/reference/query-dsl/has-parent-filter/)过滤器执行搜索。但是，如果一个文档可以属于多个用户，则必须分两步执行搜索。首先，您必须找到用户，然后发出另一个搜索来查找文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:24:53.107

Elasticsearch 支持父字段 [1]。MongoDB River 支持自定义映射 [2]，因此现在可以使用 _parent。

1.  [http://www.elasticsearch.org/guide/reference/mapping/parent-field/](http://www.elasticsearch.org/guide/reference/mapping/parent-field/)
2.  [https://github.com/richardwilly98/elasticsearch-river-mongodb/issues/64](https://github.com/richardwilly98/elasticsearch-river-mongodb/issues/64)

# c# - 使用鼠标拖动边缘使 Thumb 控件变大

> ID：15746966
> 
> 赞同：16
> 
> 时间：2013-04-01T16:08:10.113
> 
> 标签：c#, wpf, wpf-controls

我需要一个可以使用鼠标调整大小的拇指控件。当用户将鼠标悬停在其中一个端点上时，应显示大小光标，当用户单击并拖动控件的末尾时，它将重新调整大小。

怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T07:14:36.883

这是我前段时间做的一个，它允许`Move`and `Resize`，但你可以删除`Move`逻辑，它应该可以正常工作（风格仍然有点混乱，但效果很好）

它基于，`ContentControl`因此您可以在 a 上添加任何`Element`内部和移动/调整大小`Canvas`，它使用 3 `Adorners`，一个用于调整大小，一个用于移动，一个用于显示信息（当前大小）

如果您想测试/使用/修改/改进，这是一个完整的工作示例：)

代码：

```
namespace WpfApplication21
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }

    public class ResizeThumb : Thumb
    {
        public ResizeThumb()
        {
            DragDelta += new DragDeltaEventHandler(this.ResizeThumb_DragDelta);
        }

        private void ResizeThumb_DragDelta(object sender, DragDeltaEventArgs e)
        {
            Control designerItem = this.DataContext as Control;

            if (designerItem != null)
            {
                double deltaVertical, deltaHorizontal;

                switch (VerticalAlignment)
                {
                    case VerticalAlignment.Bottom:
                        deltaVertical = Math.Min(-e.VerticalChange, designerItem.ActualHeight - designerItem.MinHeight);
                        designerItem.Height -= deltaVertical;
                        break;
                    case VerticalAlignment.Top:
                        deltaVertical = Math.Min(e.VerticalChange, designerItem.ActualHeight - designerItem.MinHeight);
                        Canvas.SetTop(designerItem, Canvas.GetTop(designerItem) + deltaVertical);
                        designerItem.Height -= deltaVertical;
                        break;
                    default:
                        break;
                }

                switch (HorizontalAlignment)
                {
                    case HorizontalAlignment.Left:
                        deltaHorizontal = Math.Min(e.HorizontalChange, designerItem.ActualWidth - designerItem.MinWidth);
                        Canvas.SetLeft(designerItem, Canvas.GetLeft(designerItem) + deltaHorizontal);
                        designerItem.Width -= deltaHorizontal;
                        break;
                    case HorizontalAlignment.Right:
                        deltaHorizontal = Math.Min(-e.HorizontalChange, designerItem.ActualWidth - designerItem.MinWidth);
                        designerItem.Width -= deltaHorizontal;
                        break;
                    default:
                        break;
                }
            }

            e.Handled = true;
        }
    }

    public class MoveThumb : Thumb
    {
        public MoveThumb()
        {
            DragDelta += new DragDeltaEventHandler(this.MoveThumb_DragDelta);
        }

        private void MoveThumb_DragDelta(object sender, DragDeltaEventArgs e)
        {
            Control designerItem = this.DataContext as Control;

            if (designerItem != null)
            {
                double left = Canvas.GetLeft(designerItem);
                double top = Canvas.GetTop(designerItem);

                Canvas.SetLeft(designerItem, left + e.HorizontalChange);
                Canvas.SetTop(designerItem, top + e.VerticalChange);
            }
        }
    }

    public class SizeAdorner : Adorner
    {
        private Control chrome;
        private VisualCollection visuals;
        private ContentControl designerItem;

        protected override int VisualChildrenCount
        {
            get
            {
                return this.visuals.Count;
            }
        }

        public SizeAdorner(ContentControl designerItem)
            : base(designerItem)
        {
            this.SnapsToDevicePixels = true;
            this.designerItem = designerItem;
            this.chrome = new Control();
            this.chrome.DataContext = designerItem;
            this.visuals = new VisualCollection(this);
            this.visuals.Add(this.chrome);
        }

        protected override Visual GetVisualChild(int index)
        {
            return this.visuals[index];
        }

        protected override Size ArrangeOverride(Size arrangeBounds)
        {
            this.chrome.Arrange(new Rect(new Point(0.0, 0.0), arrangeBounds));
            return arrangeBounds;
        }
    }
} 
```

xml:

```
<Window x:Class="WpfApplication21.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication21"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>

        <Style TargetType="{x:Type ContentControl}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ContentControl}">
                        <Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                            <local:MoveThumb Cursor="SizeAll">
                                <local:MoveThumb.Style>
                                    <Style TargetType="{x:Type local:MoveThumb}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type local:MoveThumb}">
                                                    <Rectangle Fill="Transparent" />
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </local:MoveThumb.Style>
                            </local:MoveThumb>
                            <Control x:Name="resizer">
                                <Control.Style>
                                    <Style TargetType="{x:Type Control}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type Control}">
                                                    <Grid>
                                                        <Grid Opacity="0" Margin="-3">
                                                            <local:ResizeThumb Height="3" Cursor="SizeNS" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
                                                            <local:ResizeThumb Width="3" Cursor="SizeWE" VerticalAlignment="Stretch" HorizontalAlignment="Left"/>
                                                            <local:ResizeThumb Width="3" Cursor="SizeWE" VerticalAlignment="Stretch" HorizontalAlignment="Right"/>
                                                            <local:ResizeThumb Height="3" Cursor="SizeNS" VerticalAlignment="Bottom" HorizontalAlignment="Stretch"/>
                                                            <local:ResizeThumb Width="7" Height="7" Margin="-2" Cursor="SizeNWSE" VerticalAlignment="Top" HorizontalAlignment="Left"/>
                                                            <local:ResizeThumb Width="7" Height="7" Margin="-2" Cursor="SizeNESW" VerticalAlignment="Top" HorizontalAlignment="Right"/>
                                                            <local:ResizeThumb Width="7" Height="7" Margin="-2" Cursor="SizeNESW" VerticalAlignment="Bottom" HorizontalAlignment="Left"/>
                                                            <local:ResizeThumb Width="7" Height="7" Margin="-2" Cursor="SizeNWSE" VerticalAlignment="Bottom" HorizontalAlignment="Right"/>
                                                        </Grid>
                                                        <Grid IsHitTestVisible="False" Opacity="1" Margin="-3">
                                                            <Grid.Resources>
                                                                <Style TargetType="{x:Type Ellipse}">
                                                                    <Setter Property="SnapsToDevicePixels" Value="true" />
                                                                    <Setter Property="Stroke" Value="#FFC8C8C8" />
                                                                    <Setter Property="StrokeThickness" Value=".5" />
                                                                    <Setter Property="Width" Value="7" />
                                                                    <Setter Property="Height" Value="7" />
                                                                    <Setter Property="Margin" Value="-2" />
                                                                    <Setter Property="Fill" Value="Silver" />
                                                                </Style>
                                                            </Grid.Resources>
                                                            <Rectangle SnapsToDevicePixels="True" StrokeThickness="1" Margin="1" Stroke="Black"  StrokeDashArray="4 4"/>
                                                            <Ellipse  HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                                            <Ellipse  HorizontalAlignment="Right" VerticalAlignment="Top"/>
                                                            <Ellipse HorizontalAlignment="Left" VerticalAlignment="Bottom"/>
                                                            <Ellipse  HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                                        </Grid>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Control.Style>
                            </Control>
                            <Grid x:Name="sizeInfo" SnapsToDevicePixels="True">
                                <Path Stroke="Red" StrokeThickness="1" Height="10" VerticalAlignment="Bottom" Margin="-2,0,-2,-15" Stretch="Fill" Data="M0,0 0,10 M 0,5 100,5 M 100,0 100,10"/>
                                <TextBlock Text="{Binding Width}" Background="White" Padding="3,0,3,0" Foreground="Red" Margin="0,0,0,-18" HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
                                <Path Stroke="Red" StrokeThickness="1" Width="10" HorizontalAlignment="Right" Margin="0,-2,-15,-2" Stretch="Fill" Data="M5,0 5,100 M 0,0 10,0 M 0,100 10,100"/>
                                <TextBlock Text="{Binding Height}" Background="White" Foreground="Red" Padding="3,0,3,0" Margin="0,0,-18,0" HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.LayoutTransform>
                                        <RotateTransform Angle="90" CenterX="1" CenterY="0.5"/>
                                    </TextBlock.LayoutTransform>
                                </TextBlock>
                            </Grid>
                            <ContentPresenter Content="{TemplateBinding Content}"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger  Property="IsMouseOver" Value="True">
                                <Setter TargetName="sizeInfo" Property="Visibility" Value="Visible" />
                            </Trigger>
                            <Trigger  Property="IsMouseOver" Value="False">
                                <Setter TargetName="sizeInfo" Property="Visibility" Value="Hidden" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Canvas>
        <ContentControl Width="183" Height="110"  Canvas.Left="166" Canvas.Top="50" />
    </Canvas>
</Window> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/eGVfW.png) ![在此处输入图像描述](https://i.stack.imgur.com/oZyTu.png)

里面有内容（按钮）

![在此处输入图像描述](https://i.stack.imgur.com/a0VCl.png)

**抱歉，使用 SnipTool 时光标不显示**

# c# - 如何使用 RichTextBox 打开带有获取目录路径 db 的窗口资源管理器？

> ID：15746967
> 
> 赞同：3
> 
> 时间：2013-04-01T16:08:11.770
> 
> 标签：c#, ms-access

访问 2003 和 VS 2010 C#

**更新这个软件是为 Windows XP 构建的**

**我担心的是更新 7 - 谢谢**

我创建了一种方法，用户可以在富文本框中插入路径目录的命令参数并将其保存在数据库中。我想创建一个超链接，用户可以在 RichTextBox 中单击该链接，在外部打开 Windows 资源管理器以定位文件所在的位置。我不知道它在我给你的描述中叫什么，但最接近我正在寻找的东西是[here](https://stackoverflow.com/questions/15157930/link-to-files-path-with-spaces-in-richtextbox)和[here](http://www.pcreview.co.uk/forums/open-windows-explorer-server-path-t2900075.html)但我不太确定这是否是我正在寻找的？如果有人可以帮助我，我将不胜感激，在此先感谢。

这是我的 btnOpen_Click 方法...

```
OpenFileDialog openFileDialog1 = new OpenFileDialog();
        openFileDialog1.InitialDirectory = "C:\\";
        openFileDialog1.Filter = "Word 97-2003 Document(*.doc)|*.doc|All files(*.*)|*.*";

        if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            openFileDialog1.FilterIndex = 0;
            openFileDialog1.RestoreDirectory = true;
            richTextBox1.Text = Path.GetDirectoryName(openFileDialog1.FileName); 
        }

        try
        {
            string filePath;
            filePath = Path.GetDirectoryName(openFileDialog1.FileName); //Path.GetDirectoryName(openFileDialog1.FileName) openFileDialog1.FileName
            richTextBox1.Text = filePath;
        }

        catch (Exception ex)
        {
            MessageBox.Show("Error: : " + ex.Message);
        } 
```

这是我的插入方法...

```
 private void btnInsert_Click(object sender, EventArgs e)
    {
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "INSERT INTO Table1 File) Values(@File)
        cmd.Parameters.AddWithValue("@File", richTextBox1.Text);
        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery();
        myCon.Close();
   } 
```

File 是 Access 2003 中保存目录的数据字段。顺便说一句，文件数据字段的数据类型为超链接。

**从本网站**更新 2第二次尝试，**[此处](https://stackoverflow.com/questions/7283417/c-system-diagnostics-process-startexplorer-exe-select-filepath-can)符合但未打开 Windows 资源管理器**

 **```
 private void richTextBox1_LinkClicked(object sender, LinkClickedEventArgs e)
    {
        string FilePath = @"C:\myFolder\myFolder";
        System.Diagnostics.Process.Start("Explorer.exe", @"/select,""" + FilePath + "\"");
     } 
```

**更新 3** 第三次尝试 这是我的尝试： 目的是当我单击路径时，在 Richtextbox 中，Windows 资源管理器应该打开它没有打开。实际上什么也没发生，也没有错误

我确实想指出文件可以使用插入命令参数保存在不同的文件夹中，但使用相同的驱动器。所以例如..

C:\我的文件夹\我的文件夹1

C:\我的文件夹\我的文件夹2

```
 private void richTextBox1_LinkClicked(object sender, LinkClickedEventArgs e)
    {
       string FilePath = @"C:\\myFolder\\myFolder";
       System.Diagnostics.Process.Start("Explorer.exe", @"/select," + FilePath + e.LinkText);
       // 1*
    }

    private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        richTextBox1.LinkClicked += new System.Windows.Forms.LinkClickedEventHandler             
        (richTextBox1_LinkClicked);

    } 
```

// 1* - 如果我将richTextBox1_LinkClicked 代码放在richTextBox1_TextChanged 中，它会在我使用导航按钮时自动打开Windows 资源管理器。

所以我的问题是当路径目录保存在Access 2003数据库中时，当我在richTextBox中选择路径目录时，如何使用richtextbox打开Windows资源管理器？

**当我使用我不想这样做的导航按钮时，使用此“我的文档”打开**更新 4 ..****

 **```
private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        string FilePath = @"C\\Windows";
        System.Diagnostics.ProcessStartInfo exploreTest = new System.Diagnostics.ProcessStartInfo();
        exploreTest.FileName = "Explorer.exe";
        exploreTest.Arguments = FilePath;
        System.Diagnostics.Process.Start(exploreTest);
    }

    private void richTextBox1_LinkClicked(object sender, LinkClickedEventArgs e, string path)
    {
       System.Diagnostics.Process.Start(e.LinkText);
    } 
```

* * *

**更新 5**

这样它就可以工作，但如上所述，它会自动打开带有导航按钮的路径目录。我不希望这种情况发生。我想单击富文本框中的链接以打开 Windows 资源管理器。我正在使用家里的代码并[在这里](http://www.homeandlearn.co.uk/csharp/csharp_s12p7.html)学习导航。richTextBox1_LinkClicked 事件不起作用。

```
 private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        string FilePath = @"C:\MyFolder\myFolder";
        System.Diagnostics.Process.Start("Explorer.exe", @"/select,""" + FilePath + "\"");
    }

   private void richTextBox1_LinkClicked(object sender, LinkClickedEventArgs e)
    {
        System.Diagnostics.Process.Start(e.LinkText);

    } 
```

**更新 6** 使用导航按钮时打开 Windows 资源管理器的原因是 richTextBox1_TextChanged 中的一段代码。如果我在richTextBox1_MouseClick 方法中使用那段代码，那么资源管理器将打开。

* * *

**更新 7** 我正在使用导航按钮，从主页和学习网站。我创建了一个富文本框来打开默认的窗口资源管理器路径目录。我试图通过使用选择查询来进一步扩展，其中 id 是等，所以当 Windows 资源管理器在外部打开时可以根据表 ID 打开不同的路径目录吗？

例如有两个 doc 文件，Test.doc 和 Test.doc...

ID = 1 的路径目录如 = myFolder\myFolder\Test.doc

ID = 2 的路径目录如 = myFolder\myFolder2\Test2.doc

有没有可能做这样的事情..

```
private void richTextBox1_MouseClick(object sender, MouseEventArgs e)
{
  OleDbCommand cmd = new OleDbCommand();
  cmd.CommandType = CommandType.Text;
  cmd.CommandText = @"SELECT File FROM Table1 WHERE ID = @ID";
  cmd.Parameters.AddWithValue("@ID", txtID.Text);
  string FilePath = cmd.CommandText;
  // FilePath = @"C:\\myFolder\myFolder";
  System.Diagnostics.Process.Start("Explorer.exe", @"/select," + FilePath);
  cmd.Connection = myCon;
  myCon.Open();
  cmd.ExecuteNonQuery();
  myCon.Close(); 
```

}

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:14:32.460

**您在Update 7**上已接近您想要的。

这是更正后的函数：

```
private void richTextBox1_MouseClick(object sender, MouseEventArgs e)
{
    Object returnValue;

    using (OleDbCommand cmd = new OleDbCommand())
    {
        cmd.Connection = myCon;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = @"SELECT TOP 1 File FROM Table1 WHERE ID = @ID";
        cmd.Parameters.AddWithValue("@ID", txtID.Text);

        myCon.Open();
        returnValue = cmd.ExecuteScalar();
        myCon.Close();
    }

    if ((returnValue == null) || (returnValue == DBNull.Value))
    {
        // null was returned, meaning the ID wasn't found, or the "File" field has no value
        // handle the error appropriately...
    }
    else
    {
        // FilePath = @"C:\\myFolder\myFolder";
        String FilePath = returnValue.ToString();

        if (Directory.Exists(FilePath))
        {
            System.Diagnostics.Process.Start("Explorer.exe", @"/select," + FilePath);
        }
        else
        {
            // FilePath doesn't exist!
            // handle the error appropriately...
        }
    }
} 
```

* * *

**重要的位**

*   `cmd.CommandText`是 SQL 查询命令。
*   `cmd.ExecuteNonQuery()`将简单地执行 SQL 查询，但**完全丢弃**任何结果。
    *   您真正想要使用的是**仅****`cmd.ExecuteScalar()`**返回第一行的第一列（在您的情况下，您只关心第一行和第一列）。

 *** * *

**更新**

1.  如我的示例中使用的那样，使用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)语句；它会负责清理`OleDbCommand`对象（尤其是在出现异常的情况下）。

2.  使用完整性检查（if 语句、空值检查等）：我已经更新了上面的答案以反映这一点。

3.  您想通过仅检索*第一*条记录（使用）来提高性能（尽管过早地`TOP 1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:24:02.003

我想我明白了你的要求，它是如何在选择特定文件的情况下启动资源管理器。我不认为你可以用 URI 来做，所以你必须启动一个资源管理器进程。还有一些其他问题得到了答案，应该对您有所帮助。

[在资源管理器中打开文件夹并选择文件](https://stackoverflow.com/questions/334630/open-folder-and-select-the-file)

[打开资源管理器窗口并选择指定文件](https://stackoverflow.com/questions/3887364/opening-an-explorer-window-with-designated-file-selected)

[实施“打开包含文件夹”并突出显示文件](https://stackoverflow.com/questions/2829501/implement-open-containing-folder-and-highlight-file)

不过，总结是您需要启动“explorer.exe /select,full-path-to-file”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:58:38.997

为了使用`LinkClicked()`处理程序，富文本框中的链接必须是格式正确的超链接，例如

`file://C:/Windows`

并且富文本框控件的属性必须`.DetectUrls`设置为`True`. 如果是这种情况，那么富文本控件框中的链接应该看起来像一个 Web 链接（通常是蓝色并带有下划线），并且您可以在单击它时打开一个资源管理器窗口，只需使用以下代码

```
 private void richTextBox1_LinkClicked(object sender, LinkClickedEventArgs e)
    {
        System.Diagnostics.Process.Start(e.LinkText);
    } 
```******

# java - 如何将多行文本添加到行未知的 JButton？（动态）

> ID：15746970
> 
> 赞同：3
> 
> 时间：2013-04-01T16:08:16.010
> 
> 标签：java, html, swing, jbutton, multiline

你如何在`JButton`多行上制作文本？我读过大多数使用 HTML，但是当它是动态的并且您不知道线条的大小或线条是什么时会发生什么？

现在我的按钮上的文本只是以`...` 而不是换行结束。

大多数其他方法假定您知道字符串并且是硬编码的，因此您不能即时执行此操作。

编辑：我创建了一个方法，将为按钮动态执行此操作

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T16:09:34.227

您至少需要知道每行是如何分隔的。例如，如果行用换行符分隔，您可以这样做：

```
String twoLines = "Two\nLines";
JButton b = 
    new JButton("<html>" + twoLines.replaceAll("\\n", "<br>") + "</html>"); 
```

# perl - 如何从 perl 脚本访问 StackExchange API 验证方法？

> ID：15746972
> 
> 赞同：5
> 
> 时间：2013-04-01T16:08:24.667
> 
> 标签：perl, mechanize, stackexchange-api

我正在使用 WWW::Mechanize。对于不需要身份验证的方法，我会像获取任何其他 url 一样获取它们，然后使用 perl JSON 模块解析出我想要的任何数据：

```
my $response = $mech->get('http://api.stackexchange.com/1.1/questions?fromdate=' . $lasthour)
my $q = from_json($response->content()) 
```

我过去曾使用 Mechanize 登录网站，但 Oauth 的内容令人困惑，并且[为使用 API 提供的文档](http://api.stackexchange.com/docs/authentication)表明它适用于 Web 应用程序（需要向 StackExchange 注册？）。

特别是，我对[通知方法](http://api.stackexchange.com/docs/me-notifications)很感兴趣，尽管我希望正确的代码允许访问任何需要身份验证的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:23:51.403

你看过[Net::StackExchange2](https://metacpan.org/module/Net%3a%3aStackExchange2)吗？

```
#for methods that require auth.
my $se = Net::StackExchange2->new(
    {
        site=>"stackoverflow",
        access_token => '<THE ACCESS TOKEN>' ,
        key => '<YOUR APP KEY>'
    }
); 
```

它使用 LWP::UserAgent。即使您不想直接使用 Net::StackExchange2 模块，您也很有可能找到一些可以借鉴的好示例代码。

# java - 当我们指定路径时，在 ant 文件中使用 **/*

> ID：15746981
> 
> 赞同：0
> 
> 时间：2013-04-01T16:09:09.223
> 
> 标签：java, ant

从 Eclipse 生成的 Ant 代码段

我想知道 * */*在路径中的含义/意义为什么他们不能只有 *.java 如果他们想排除 java 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:12:12.407

这`**`是“目录的任何嵌套深度（任何名称）”的简写。

`*`是“任何文件（或目录）”的简写

the是“以”`.java`结尾的简写`.java`

因此，回顾一下`**/*.java`当前目录树任何深度的任何文件，以`.java`.

# c - 如何使用 write 系统调用将 int 写入文件并完全按照写入的方式读取它们？

> ID：15746983
> 
> 赞同：6
> 
> 时间：2013-04-01T16:09:15.490
> 
> 标签：c, unix, file-io, system-calls, printf

如何使用 UNIX 的 write 系统调用将 int、float 或其他类型写入文件？我想这样做而不使用任何 lib 函数，如`fprintf`or `fwrite`。

我想使用文件描述符而不是`FILE*`.

再次打开后，必须完全按照写入的方式读取文件，而无需知道要读取的大小。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T16:24:10.577

这很简单（请注意，`stdio.h`仅包含在`printf`; 没有它的读/写工作）：

```
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>

int main()
{
    // Open file with write permission (create if doesn't exist).
    int fd = open("float.txt", O_CREAT | O_WRONLY);
    float val = 1.5f;
    if (fd != -1) {
        write(fd, &val, sizeof(val));
        close(fd);
    }

    // Test read.
    fd = open("float.txt", O_RDONLY);
    float new_val;
    if (fd != -1) {
        read(fd, &new_val, sizeof(new_val));
        printf("new_val = %f\n", new_val);
        close(fd);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T16:24:26.390

```
int foo;

write (fd, &foo, sizeof foo); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T14:20:28.217

正如评论中确定的那样，问题更多是将数字转换为十进制数字而不是使用`write`调用。

要编写人类可读的 int 或 float，您必须将其转换为数字，然后写入该数字的字符。对于浮点数，如果内部表示使用与数字（例如十进制）不同的基数（例如二进制），那么这需要大量工作才能正确完成。我建议使用现有的开源代码或有关该主题的科学论文。

将 a转换`int`为十进制数字的代码相当简单：

```
#include <stdlib.h> //  For size_t.

/*  IntToString converts the int x to a decimal numeral, which is written to s.
    No terminal null character is written.  The number of characters written is
    returned.  s MUST point to space with enough room for the numeral,
    including a leading '-' if x is negative.
*/
size_t IntToString(char *s, int x)
{
    //  Set pointer to current position.
    char *p = s;

    //  Set t to absolute value of x.
    unsigned t = x;
    if (x < 0) t = -t;

    //  Write digits.
    do
    {
        *p++ = '0' + t % 10;
        t /= 10;
    } while (t);

    //  If x is negative, write sign.
    if (x < 0)
        *p++ = '-';

    //  Remember the return value, the number of characters written.
    size_t r = p-s;

    //  Since we wrote the characters in reverse order, reverse them.
    while (s < --p)
    {
        char t = *s;
        *s++ = *p;
        *p = t;
    }

    return r;
}

#include <stdio.h>  //  For printf.

//  Demonstrate IntToString.
static void Demonstrate(int x)
{
    char buf[100];
    size_t n = IntToString(buf, x);
    printf("IntToString(%d) = %.*s.\n", x, (int) n, buf);
}

#include <limits.h> //  For INT_MIN and INT_MAX.

int main(void)
{
    Demonstrate(0);
    Demonstrate(1);
    Demonstrate(9);
    Demonstrate(10);
    Demonstrate(INT_MAX-1);
    Demonstrate(INT_MAX);
    Demonstrate(-1);
    Demonstrate(-9);
    Demonstrate(-10);
    Demonstrate(INT_MIN+1);
    Demonstrate(INT_MIN);

    return 0;
} 
```

# java - 如何在 JAVA 中最大化运行 JFrame？

> ID：15746984
> 
> 赞同：14
> 
> 时间：2013-04-01T16:09:16.240
> 
> 标签：java, swing, jframe

我是 JAVA 的新手。

我需要运行一个以`MainFrame`最大化模式命名的 JFrame。

我该怎么做？

```
public class MainFrame extends javax.swing.JFrame {

/**
 * Creates new form MainFrame
 */
public MainFrame() {
    initComponents();
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-01T16:13:39.063

你应该使用[`JFrame.setExtendedState`](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setExtendedState%28int%29)：

```
public MainFrame() {
    initComponents();
    setExtendedState(java.awt.Frame.MAXIMIZED_BOTH);
} 
```

# youtube - 为什么从 youtube get_video_info 获取的链接无法下载？

> ID：15746987
> 
> 赞同：2
> 
> 时间：2013-04-01T16:09:31.877
> 
> 标签：youtube, youtube-api, youtube-dl

我使用从“ [http://www.youtube.com/get_video_info?&video_id=xx](http://www.youtube.com/get_video_info?&video_id=xx) ”获得的链接使用浏览器进行测试，看看它是否能够下载。

从原始链接中删除一些参数后，有些有效，但有些仍然无效。我在这里读了一些帖子，但大多数都已经很老了。从那以后发生了很多变化。我想知道最近是否有人在做这个。

我需要这个的目的是因为我的 youtube 视图程序需要显示质量更好的视频。

这是链接不起作用：

[http://r17---sn-tt17rn7e.c.youtube.com/videoplayback?fexp=902529%2C932000%2C906383%2C902000%2C919512%2C929903%2C931202%2C900821%2C900823%2C931203%2C931401%2C908529%2C919373%2C930803% 2C906836%2C920201%2C929602%2C930101%2C930603%2C900824%2C910223&ipbits=8&expire=1364854787&sver=3&mt=1364829200&newshard=yes&id=26c94a41dba396f5&key=yt1&upn=GrcnDUPfreQ&cp=U0hVSVhQUl9NUUNONV9QSlZIOm9BbnVkMTJzOXE5&sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Csource% 2Cupn%2Cexpire&ip=173.248.214.165&itag=34&ms=au&source=youtube&mv=m&signature=9593596F58B377FAA4C8F5A4516C7F53CE473340.507CA2EA250CEED2E2B2377FD70EE1A0478EE322&=video/](http://r17---sn-tt17rn7e.c.youtube.com/videoplayback?fexp=902529%2C932000%2C906383%2C902000%2C919512%2C929903%2C931202%2C900821%2C900823%2C931203%2C931401%2C908529%2C919373%2C930803%2C906836%2C920201%2C929602%2C930101%2C930603%2C900824%2C910223&ipbits=8&expire=1364854787&sver=3&mt=1364829200&newshard=yes&id=26c94a41dba396f5&key=yt1&upn=GrcnDUPfreQ&cp=U0hVSVhQUl9NUUNONV9QSlZIOm9BbnVkMTJzOXE5&sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Csource%2Cupn%2Cexpire&ip=173.248.214.165&itag=34&ms=au&source=youtube&mv=m&signature=9593596F58B377FAA4C8F5A4516C7F53CE473340.507CA2EA250CEED2E2B2377FD70EE1A0478EE322&type=video/mp4) mp 编解码器="avc1.42001E, mp4a.40.2"&itag=18&

它有什么问题？我删除了 fallback_path 并将 sig 替换为签名。工作链接适用于 webm。这是针对 h264 的。两者具有相同类型的参数。

这正在起作用。 [http://r17---sn-tt17rn7e.c.youtube.com/videoplayback?fexp=909708%2C912514%2C930802%2C932400%2C916624%2C931009%2C932000%2C906383%2C902000%2C919512%2C929903%2C931202%2C900821%2C900823% 2C931203%2C931401%2C908529%2C930807%2C919373%2C906836%2C920201%2C929602%2C930101%2C930603%2C900824%2C910223&ms=au&itag=44&mt=1364825784&ipbits=8&cp=U0hVSVhQT19NUUNONV9QSlNCOlp5ZGoyMXJ3emlq&ip=173.248.214.165&upn=ohH0s8EjPyo&newshard=yes&source=youtube&ratebypass=yes&mv=m&sparams=cp %2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&id=26c94a41dba396f5&expire=1364851187&key=yt1&sver=3&signature=798EED35782B846D2B0EA190A17E837A0DBA18EA.AD56BCF6365AAD974C18F09F352F9422084C50AC&type=video/webm](http://r17---sn-tt17rn7e.c.youtube.com/videoplayback?fexp=909708%2C912514%2C930802%2C932400%2C916624%2C931009%2C932000%2C906383%2C902000%2C919512%2C929903%2C931202%2C900821%2C900823%2C931203%2C931401%2C908529%2C930807%2C919373%2C906836%2C920201%2C929602%2C930101%2C930603%2C900824%2C910223&ms=au&itag=44&mt=1364825784&ipbits=8&cp=U0hVSVhQT19NUUNONV9QSlNCOlp5ZGoyMXJ3emlq&ip=173.248.214.165&upn=ohH0s8EjPyo&newshard=yes&source=youtube&ratebypass=yes&mv=m&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&id=26c94a41dba396f5&expire=1364851187&key=yt1&sver=3&signature=798EED35782B846D2B0EA190A17E837A0DBA18EA.AD56BCF6365AAD974C18F09F352F9422084C50AC&type=video/webm) ; 编解码器="vp8.0, vorbis"&

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T16:18:18.503

这不是与 YouTube 交互的受支持方法。您需要使用一种官方的[YouTube 播放器机制](https://developers.google.com/youtube/getting_started#player_apis)来显示 YouTube 视频。

如果您还有其他问题，请熟悉[YouTube API 服务条款。](https://developers.google.com/youtube/terms)

# ruby-on-rails-3 - rails 3 resque-scheduler 没有队列被注册

> ID：15746990
> 
> 赞同：3
> 
> 时间：2013-04-01T16:09:35.977
> 
> 标签：ruby-on-rails-3, redis, rake, resque

我目前正在尝试为我的 rails 3 应用程序设置 resque-scheduler。在我的简单测试应用程序中，我试图在设置后 10 秒使我的用户模型中的令牌过期。

在调用来设置令牌的 TokenController 的 create 方法中，我用来`Resque.enqueue_in(10.seconds, ExpireToken, :user_id => @user.id)`将新作业排入队列。ExpireToken 类如下所示：

```
class ExpireToken
  @queue = :token

  def self.perform(user_id)
    user = User.find(user_id)

    if not user.nil?
      user.update_attribute(:authentication_token, nil)
    else
      raise
    end
  end
end 
```

在启动 resque 服务器、rails 服务器并使用 rake resque:work QUEUE=* 启动工作人员后，我看到在 resque 管理界面中注册了 0 个队列，其中 1 个空闲工作人员。结果，我没有看到任何工作，因为没有队列。

在我的 redis 服务器中，我确实看到了一些这样的活动：

```
[1691] 02 Apr 00:07:51 - DB 0: 2 keys (0 volatile) in 4 slots HT.
[1691] 02 Apr 00:07:51 - 3 clients connected (0 slaves), 948880 bytes in use 
```

如何注册`token`队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:16:32.140

事实证明，在处理完第一个作业之前，队列不会显示在 resque 管理界面中。为了在我的情况下在 resque-scheduler 中发生这种情况，我必须执行以下操作：

1) 启动 rails 服务器（在我的一个控制器方法中触发 Resque.enqueue_in 方法。

2）启动redis服务器开始接受workers和jobs。

3) 启动 resque 调度程序，该调度程序将拉动延迟的作业（重要！）

4）启动将处理进来的工作的resque worker。

5）享受在界面中看到工作被吞噬！

# r - clusplot R中的椭圆颜色

> ID：15746991
> 
> 赞同：0
> 
> 时间：2013-04-01T16:09:37.413
> 
> 标签：r

我正在使用 clusplot 绘制使用 kmeans 的 PC，但棘手的部分是，我希望椭圆由不同的变量（不是用于数据点的 f$cluster）进行颜色编码。这是我给出的命令，但这里有些东西不起作用！

```
 clusplot(f[,1:3],f$cluster,cex=0.8,color=TRUE,shade=TRUE, 
     labels=5,
     col.clus=unique(f$groupnum),
     lines=0,main="testing") 
```

我的 f 是一个有 33 列的数据框。PC1 到 PC30，然后是 cluster、groupnum 和 groupttl。$cluster 代码用于聚类，但我正在尝试使用 $groupnum 进行颜色编码，并可能使用 $groupttl 来标记椭圆。

一件重要的事情是：$cluster 和 $groupnum 都可以有不同的#groups（即）我只有 5 个集群，但有 6 个唯一的 groupnum 值要为椭圆着色。因此，通常情况下，要着色的椭圆会多于实际的簇数。

谢谢保罗和舒亚。这是我的数据框

```
 structure(list(PC1 = c(8.2545, 1.0159, -1.5319, -1.7703, 1.6903, 
-1.7378, -2.1898, -2.8501, 1.0669, -0.8577, 6.3985, 2.6495, 2.6374, 
0.2395, 8.6415, -0.0638, -2.739, -0.7897, 0.3137, -3.0958, 2.9457, 
-4.1256, -2.6289, -2.9377, -0.6272, -2.7296, 1.2871, -1.6917, 
-0.1118, 11.1845, 2.6486, -3.4377, -0.5581, -3.217, -2.5425, 
-1.419, -0.9338, -0.8993, -3.119, -3.5188, 1.6804, -0.4142, -2.3187, 
-0.1962, -1.3428, 5.1539, 10.3632, -0.9815, -2.7796, 0.0708), 
    PC2 = c(-1.6021, -5.4785, 3.3933, 3.6795, -3.0405, 5.3614, 
    -2.895, 2.2553, -2.648, -0.451, -1.3402, -2.6696, -4.3236, 
    0.0659, -0.4115, 4.0168, 0.034, -0.2273, -0.5867, 0.8339, 
    -0.2328, 1.5119, 5.183, -0.7078, 0.5813, 2.8371, 0.8223, 
    -1.2817, 0.0378, -3.297, -1.0233, 0.5048, -1.9093, -5.5851, 
    -0.8716, -2.135, -4.2768, 1.567, -0.1263, 2.4107, -1.3151, 
    1.6173, -0.3908, 3.7365, -1.3812, -2.1328, -0.05, 0.849, 
    1.9369, -4.7095), PC3 = c(1.4114, -2.0719, -1.927, -0.417, 
    -2.2733, -1.8481, -2.807, 0.8132, -2.6583, -0.5894, 1.4173, 
    2.9953, 0.2831, -1.0971, 2.7126, -3.8635, -0.5739, 2.5493, 
    1.3207, 2.3459, 4.5259, 1.6239, -0.1763, 1.929, 1.5237, 1.7709, 
    2.1231, -1.5679, 2.9978, -1.0623, 6.3311, 3.2371, -0.0466, 
    -3.2293, 0.3979, -3.4121, -1.6269, 0.8722, -0.2534, 2.3849, 
    -1.6068, -0.8486, 0.9351, -1.8844, 2.8963, 0.4948, 1.3549, 
    0.522, 2.3628, -2.2726), cluster = c(5L, 2L, 1L, 1L, 2L, 
    1L, 2L, 4L, 2L, 3L, 5L, 3L, 2L, 3L, 5L, 1L, 4L, 3L, 3L, 4L, 
    3L, 4L, 1L, 4L, 3L, 4L, 3L, 2L, 3L, 5L, 3L, 4L, 2L, 2L, 4L, 
    2L, 2L, 3L, 4L, 4L, 2L, 1L, 4L, 1L, 3L, 5L, 5L, 3L, 4L, 2L
    ), groupnum = c(8L, 9L, 2L, 2L, 4L, 2L, 4L, 10L, 4L, 6L, 
    8L, 8L, 9L, 2L, 8L, 2L, 9L, 6L, 6L, 10L, 8L, 10L, 10L, 10L, 
    2L, 10L, 6L, 4L, 6L, 8L, 8L, 6L, 9L, 9L, 10L, 4L, 9L, 6L, 
    9L, 10L, 4L, 2L, 9L, 2L, 2L, 4L, 8L, 6L, 6L, 9L), groupttl = c("MN", 
    "GC", "GMS", "GMS", "MP", "GMS", "MP", "MS", "MP", "BC", 
    "MN", "MN", "GC", "GMS", "MN", "GMS", "GC", "BC", "BC", "MS", 
    "MN", "MS", "MS", "MS", "GMS", "MS", "BC", "MP", "BC", "MN", 
    "MN", "BC", "GC", "GC", "MS", "MP", "GC", "BC", "GC", "MS", 
    "MP", "GMS", "GC", "GMS", "GMS", "MP", "MN", "BC", "BC", 
    "GC")), .Names = c("PC1", "PC2", "PC3", "cluster", "groupnum", 
"groupttl"), row.names = c(NA, 50L), class = "data.frame") 
```

我期待在这方面的一些帮助！

谢谢 SP

# jquery - 加载内容后没有页面刷新的html元素问题

> ID：15746993
> 
> 赞同：0
> 
> 时间：2013-04-01T16:09:41.633
> 
> 标签：jquery, html, css, jquery-mobile

我有一个动态加载信息的页面。内容加载，但问题是包含内容（content_container）的 div 会导致页面大小增加（这是预期的），但会导致页脚、页眉和 content_type_container 无法修复。如果在加载内容后调整 html 元素，我希望它。

这是html：

```
<div id="content_container">

            </div>      

            <div id="content_type_container" style="display:none;">
                <div  class="content_type">
                    Content Type 1
                    <input type="hidden" value="1" class="content_type_value"/>
                </div>
                <div  class="content_type">
                    Content Type 2
                    <input type="hidden" value="2" class="content_type_value"/>
                </div>

            </div> 
```

这是jQuery：

```
$(document).ready(function() {

    $(".content_type").click(function() {
        var content_type = $(this).find(".content_type_value").val();   
        content_type = $.trim(content_type);
            if(content_type)
            {
                $.ajax({
                    url: "content_type_ajax.php",
                    data: "content_type="+content_type,
                    success: function(msg) {
                    $("#content_container").html(msg);
                    $("#content_container").click(); /* adding this reset the header and footer divs to the new height of the content container. fixing the issue */                            
                }
                });
            }   
        });

        $("#content_type_nav").click(function() {
            $("#content_type_container").slideToggle("fast");

        });
        $(".content_type").click(function() {
            $("#content_type_container").slideToggle("fast");

        });
}); 
```

和CSS：

```
#content_container{
    display:block;

}

#content_type_container{
    position:fixed;
    display:block;
    bottom:0px;
    width:100%;
    z-index:1000;

}

.content_type{
    display:block;
    width:100%;
    text-align:center;

}

.content_type:hover{
    background:blue;
    color:white;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:30:54.590

请尝试**位置：相对**；而不是固定的

如果您使用滚动条寻找固定高度，则为#content_type_container 提供固定高度和溢出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:14:15.987

如果您对 css 元素设置重要，那么它应该可以按您的意愿工作

```
#content_type_container{
    position:fixed !important;
    display:block;
    bottom:0px;
    width:100%;
    z-index:1000;
} 
```