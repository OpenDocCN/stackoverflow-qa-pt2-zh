# StackOverflow 问答 14602000-14602999

# c# - nHibernate QueryOver 中的 GROUP BY 和 HAVING 子句

> ID：14602005
> 
> 赞同：8
> 
> 时间：2013-01-30T10:40:33.273
> 
> 标签：c#, nhibernate, queryover

我正在尝试用我不太熟悉的 nHibernate QueryOver 语言编写这个特定的 sql 查询：

```
SELECT MessageThreadId FROM MessageThreadAccesses
WHERE ProfileId IN (arr)
GROUP BY MessageThreadId
HAVING COUNT(MessageThreadId) = arr.Count 
```

其中 arr 是我作为参数传递的整数数组（用户 ID），MessageThreadAccess 实体如下所示：

```
public virtual MessageThread MessageThread { get; set; }
public virtual Profile Profile { get; set; }
.... 
```

在阅读了多个堆栈溢出线程并进行了实验之后，我的查询已经走到了这一步（尝试获取 MessageThread 对象 - 它应该始终只有一个或没有），但它仍然不起作用，我不确定还有什么可以尝试. 查询似乎总是返回 MessageThreadAccess 对象，但在读取它的 MessageThread 属性时，它始终为 NULL。

```
var access = Session.QueryOver<MessageThreadAccess>()
    .WhereRestrictionOn(x => x.Profile).IsIn(participants.ToArray())
    .Select(Projections.ProjectionList()
        .Add(Projections.Group<MessageThreadAccess>(x => x.MessageThread))
    )
    .Where(
        Restrictions.Eq(Projections.Count<MessageThreadAccess>(x => x.MessageThread.Id), participants.Count)
    )
    .TransformUsing(Transformers.AliasToBean<MessageThreadAccess>())
    .SingleOrDefault();

return Session.QueryOver<MessageThread>()
    .Where(x => x.Id == access.MessageThread.Id)
    .SingleOrDefault(); 
```

有人可以指出我正确的方向，或者解释我做错了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:20:13.497

我想您可以尝试使用 DTO 来存储结果，而不是尝试将结果放入 MessageThreadAccess 中，当它不是一个（没有配置文件）时。

也许你可以试试：

```
public class MessageThreadCountDTO
{
    public MessageThread Thread { get; set; }
    public int Nb { get; set; }
} 
```

然后

```
var profiles = new int[] { 1,2,3,4 };

MessageThreadCountDTO mtcDto = null;

var myResult = 
  _laSession.QueryOver<MessageThreadAccess>()
     .WhereRestrictionOn(x => x.Profile.Id).IsIn(profiles)
     .SelectList(list =>
         list.SelectGroup(x => x.MessageThread).WithAlias(() => mtcDto.Thread).
         SelectCount(x => x.MessageThread).WithAlias(() => mtcDto.Nb)
         )
     .Where(Restrictions.Eq(Projections.Count<MessageThreadAccess>(x => x.MessageThread), profiles.Count()))
     .TransformUsing(Transformers.AliasToBean<MessageThreadCountDTO>())
     .List<MessageThreadCountDTO>().FirstOrDefault(); 
```

profile 将是 Profile[]，而不是 int[]，然后是以下行：

```
.WhereRestrictionOn(x => x.Profile.Id).IsIn(profiles) 
```

应该 ：

```
.WhereRestrictionOn(x => x.Profile).IsIn(profiles) 
```

希望这会有所帮助

# android - 修改android中webview的默认进度

> ID：14602007
> 
> 赞同：1
> 
> 时间：2013-01-30T10:40:43.453
> 
> 标签：android, webview

![在此处输入图像描述](../Images/8b4252653905be4f69d2f955a59c7c93.png)

如何修改 webview 的进度条或如何在顶部 webview 上创建自定义进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:00:01.607

要实现自定义进度条，您需要一个 Runnable 线程和一个消息处理程序，它们将不断更新您的进度条。

检查下面的片段： -

获取您的进度条，然后开始新的**线程**

```
myProgressBar=(ProgressBar)findViewById(R.id.progressbar);
new Thread(myThread).start(); 
```

**新线程**：-

```
private Runnable myThread = new Runnable(){

@Override
public void run() {
while (myProgress<100){
try{
myHandle.sendMessage(myHandle.obtainMessage());
Thread.sleep(1000);
}
catch(Throwable t){
}
}
}
} 
```

从上面的 try 块发送的消息将在下面的**Handler的****handleMessage**方法中处理：-

 **```
Handler myHandle = new Handler(){

@Override
public void handleMessage(Message msg) {
myProgress++;
myProgressBar.setProgress(myProgress);
}
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:25:33.843

那是用于自定义进度条。如果您需要使用**Webview**，那么我认为这应该可以帮助您。

WebView 有几个自定义点，您可以在其中添加自己的行为。他们是：

*   创建和设置**WebChromeClient**子类。当发生可能影响浏览器 UI 的事情时调用此类，例如，在此处发送进度更新和 JavaScript 警报。

*   创建和设置**WebViewClient**子类。当发生影响内容呈现的事情时（例如，错误或表单提交）将调用它。您还可以在此处拦截 URL 加载（通过 **shouldOverrideUrlLoading** ()）。

    ```
    // To display the progress in the activity title bar, like the
    // browser app does.
    getWindow().requestFeature(Window.FEATURE_PROGRESS);

    webview.getSettings().setJavaScriptEnabled(true); // javascript if needed.

    final Activity activity = this;
    webview.setWebChromeClient(new WebChromeClient() {
       public void onProgressChanged(WebView view, int progress) {
         // The progress meter will automatically disappear when we reach 100%
         activity.setProgress(progress * 1000);
       }
     });

     webview.setWebViewClient(new WebViewClient() {
       public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Toast.makeText(activity, "Page Load Error! " + description, Toast.LENGTH_SHORT).show();
       }
     });

     webview.loadUrl("http://www.stackoverflow.com"); 
    ```

请参考[this](http://developer.android.com/reference/android/webkit/WebView.html)和this[以](http://developer.android.com/guide/webapps/webview.html)获得更清晰的信息。**

# python - 提交表单时出错

> ID：14602024
> 
> 赞同：0
> 
> 时间：2013-01-30T10:41:27.220
> 
> 标签：python, python-2.7, django-forms, django-1.4, django-sessions

> **可能重复：**
> [在表单提交时更新条目而不是保存新条目](https://stackoverflow.com/questions/14603968/updating-an-entry-on-form-submit-instead-of-saving-new-entry)

我正在编辑表单并提交它，但它没有得到更新，而是存储在另一个条目中。

```
def searchinventory2(request, id = None):
    print "sssssssssss", id

    if id is not None:
        task = Inventory.objects.get(id = id)
    else:
           pass     
    if request.method == 'POST': # If the form has been submitted...
        print "dfdf"
        form = Inventory_List(request.POST, request.FILES, instance=task)
        print "hhhhhhhhhhhhh"
        if form.is_valid():
            print "ksjhjksfh"    
            form.save()
            return task(request, 'Task #%s created successfully.' % (task.id))
    else:
        print "in else"
        form = Inventory_List(instance = task)
    return render_to_response("smartlogis/inventoryedit.html", {'form':form,}) 
```

我收到此错误：

`local variable 'task' referenced before assignment`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:49:26.780

`task`*仅*当`is`is not时才初始化`None`，因此如果您调用`searchinventory2(request)`，则任务未初始化。

您应该执行以下操作：

```
if id is not None:
    task = Inventory.objects.get(id = id)
else:
    task = something that can be then used 
```

# java - 休眠搜索。如何从索引中排除实体？

> ID：14602029
> 
> 赞同：1
> 
> 时间：2013-01-30T10:41:54.363
> 
> 标签：java, hibernate, interceptor, hibernate-search

我是休眠搜索的新手，我需要将它与我的应用程序数据库一起使用。我有几个索引实体类，我想根据它们的状态从索引中排除一些实体。在我的情况下，我想用 template == null 排除对象我找到[了这个功能](http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html_single/#example-search-mapping-indexinginterceptor-blog) 并实现了它，但是这个拦截器不起作用\调用

这就是我所拥有的

```
public class WorkDocumentInterceptor implements EntityIndexingInterceptor<WorkDocument> {

@Override
public IndexingOverride onAdd(WorkDocument workDocument) {
    System.out.println("on ADD workDocument = " + workDocument.getId());
    if (workDocument.getTemplate() == null) {
        System.out.println("SKIP DOCUMENT " + workDocument.getId() + ":" + workDocument.getTitle());
        return IndexingOverride.SKIP;
    }
    return IndexingOverride.APPLY_DEFAULT;
}

@Override
public IndexingOverride onUpdate(WorkDocument workDocument) {
    if (workDocument.getTemplate() == null) {
        return IndexingOverride.REMOVE;
    }
    return IndexingOverride.UPDATE;
}

@Override
public IndexingOverride onDelete(WorkDocument workDocument) {
    return IndexingOverride.APPLY_DEFAULT;
}

@Override
public IndexingOverride onCollectionUpdate(WorkDocument workDocument) {
    return onUpdate(workDocument);
} 
```

}

实体类

```
@Entity
@Table(name = "work_document")
@Indexed(interceptor = WorkDocumentInterceptor.class)
public class WorkDocument implements Serializable {

    @Id
    @Basic(optional = false)
    @Column(name = "id")
    private Long id;

    Template template;
    ...  
} 
```

当索引运行时，我什至看不到这个输出，似乎拦截器没有调用

```
System.out.println("on ADD workDocument = " + workDocument.getId()); 
```

要重建索引，我称之为

```
 em.createIndexer(clazz)
                    .purgeAllOnStart(true)
                    .optimizeAfterPurge(true)
                    .optimizeOnFinish(true)
                    .batchSizeToLoadObjects(25)
                    .cacheMode(CacheMode.IGNORE)
                    .threadsToLoadObjects(5)
                    .threadsForIndexWriter(3)
                    .threadsForSubsequentFetching(20)
                    .startAndWait(); 
```

为什么它不起作用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:39:06.810

我花了半天时间寻找解决方案。

只需将休眠搜索版本从**4.1.1**更改为**4.2.0**

拦截器按预期工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:42:06.093

条件索引的初始版本现在可以与质量索引器一起使用。这在 Hibernate Search 4.2.0.Final 中得到了解决。该问题在[https://hibernate.onjira.com/browse/HSEARCH-1190下进行跟踪](https://hibernate.onjira.com/browse/HSEARCH-1190)

# logging - 当我向 exeption.Data 添加一些其他数据时，Enterprise Library 5 异常块不会将日志写入数据库

> ID：14602030
> 
> 赞同：0
> 
> 时间：2013-01-30T10:41:56.313
> 
> 标签：logging, exception-handling, app-config, enterprise-library

我正在使用 Enterprise library 5 来管理异常处理和日志记录。我在异常处理设置的默认策略中为所有异常设置了 2 个处理程序，第一个在 DB 中记录异常，第二个 Wrap 处理程序并抛出新异常。我写了这段代码来测试记录异常：

```
public void Save(OrderHeader orderHeader)
{
....    
                try
                {
                    throw new Exception("Test");
                }
                catch (Exception e)
                {
                    Dictionary<object, object> parameters = new Dictionary<object, object>();
                    //e.Data["Order"] =  orderHeader.OrderId;
                    //e.Data["Customer"] =  orderHeader.Customer;
                    ExceptionManager exManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
                    if (exManager.HandleException(e, "Policy"))
                    {
                        throw;
                    }
                }

} 
```

我想将其他信息保存到记录的数据中，例如 orderHeader.OrderId、orderHeader.Customer。所以我将我的文本格式化程序模板更改为（添加扩展属性）：

```
Message: {message}{newline}
Category: {category}{newline}
Priority: {priority}{newline}
EventId: {eventid}{newline}
Severity: {severity}{newline}
Title:{title}{newline}
Machine: {localMachine}{newline}
App Domain: {localAppDomain}{newline}
ProcessId: {localProcessId}{newline}
Process Name: {localProcessName}{newline}
Thread Name: {threadName}{newline}
Win32 ThreadId:{win32ThreadId}{newline}
Extended Properties: {dictionary({key} - {value}{newline})} 
```

使用这些代码和模板，一切正常，异常记录到数据库中（我还没有编写任何代码来写入额外的数据），但是当我取消注释我的代码的两行注释时，没有任何东西保存到数据库中！不起作用的代码是：

```
public void Save(OrderHeader orderHeader)
    {
    ....    
                    try
                    {
                        throw new Exception("Test");
                    }
                    catch (Exception e)
                    {
                        Dictionary<object, object> parameters = new Dictionary<object, object>();
                        e.Data["Order"] =  orderHeader.OrderId;
                        e.Data["Customer"] =  orderHeader.Customer;
                        ExceptionManager exManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
                        if (exManager.HandleException(e, "Policy"))
                        {
                            throw;
                        }
                    }
    } 
```

这也是我的 app.config：

```
 <?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
    <section name="exceptionHandling" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration.ExceptionHandlingSettings, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
  </configSections>
  <loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
    <listeners>
      <add name="Event Log Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        source="Enterprise Library Logging" formatter="Text Formatter"
        log="" machineName="." traceOutputOptions="None" />
      <add name="Rolling Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        fileName="rolling.log" formatter="Text Formatter" rollFileExistsBehavior="Increment"
        rollInterval="Day" />
      <add name="Rolling Flat File Trace Listener for All Events" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        fileName="LogAllEvents.log" formatter="Text Formatter" rollInterval="Day" />
      <add name="Database Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.Database.FormattedDatabaseTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Database.Configuration.FormattedDatabaseTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        databaseInstanceName="LoggingDB" writeLogStoredProcName="WriteLog"
        addCategoryStoredProcName="AddCategory" formatter="Text Formatter with Extended properties" />
    </listeners>
    <formatters>
      <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
        name="Text Formatter" />
      <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        template="Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
        name="Text Formatter with Extended properties" />
    </formatters>
    <logFilters>
      <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Filters.LogEnabledFilter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        enabled="true" name="Logging Enabled Filter" />
    </logFilters>
    <categorySources>
      <add switchValue="All" name="General">
        <listeners>
          <add name="Rolling Flat File Trace Listener" />
        </listeners>
      </add>
      <add switchValue="All" name="Exceptions">
        <listeners>
          <add name="Database Trace Listener" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events">
        <listeners>
          <add name="Rolling Flat File Trace Listener for All Events" />
        </listeners>
      </allEvents>
      <notProcessed switchValue="All" name="Unprocessed Category">
        <listeners>
          <add name="Rolling Flat File Trace Listener for All Events" />
        </listeners>
      </notProcessed>
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="Rolling Flat File Trace Listener for All Events" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration>
  <exceptionHandling>
    <exceptionPolicies>
      <add name="Policy">
        <exceptionTypes>
          <add name="All Exceptions" type="System.Exception, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            postHandlingAction="ThrowNewException">
            <exceptionHandlers>
              <add name="Logging Exception Handler" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.LoggingExceptionHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                logCategory="Exceptions" eventId="100" severity="Error" title="Enterprise Library Exception Handling"
                formatterType="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.TextExceptionFormatter, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling"
                priority="0" />
              <add name="Wrap Handler" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.WrapHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                exceptionMessage="!در برنامه رخ داد {handlingInstanceID} خطاي"
                wrapExceptionType="System.Exception, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
            </exceptionHandlers>
          </add>
        </exceptionTypes>
      </add>
    </exceptionPolicies>
  </exceptionHandling>
  <dataConfiguration defaultDatabase="LoggingDB" />
  <connectionStrings>
    <add name="ERPContext" connectionString="Data Source=ASPS51;Initial Catalog=L4;Persist Security Info=True;User ID=sa_l4;password=1234;application name = LEVEL4"
      providerName="System.Data.SqlClient" />
    <add name="LoggingDB" connectionString="Data Source=ASPS51;Initial Catalog=Logging;Persist Security Info=True;User ID=sa_l4;password=1234;application name = LEVEL4"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <startup>
    <!--<supportedRuntime version="v4.4" sku=".NETFramework,Version=v4.4"/> -->
  </startup>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="EnvDTE" publicKeyToken="B03F5F7F11D50A3A" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-8.0.0.0" newVersion="8.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:24:10.113

正如[Tuzo](https://stackoverflow.com/users/114664/tuzo)在评论中所说：“如果扩展属性中的任何项目值为 null，那么它将失败”，我的扩展属性值之一为 null。我检查了 null 的值，然后将日志记录保存到 DB。

# jquery - 根据放入可排序列表的元素数量更改 div 的类

> ID：14602031
> 
> 赞同：1
> 
> 时间：2013-01-30T10:41:57.497
> 
> 标签：jquery, draggable, jquery-ui-sortable, content-length

这就是我想要实现的目标 - 我在一个可排序列表 ( `#sortable2`) 中有七个列表项，我将它们拖放到一个空的可排序列表 ( `#sortable1`) 中。

我想计算新的可排序列表 ( `#sortable1`) 中的元素数量，并显示一个警报，告诉用户当前的项目数量。我希望这也可以在删除项目时起作用。

这是我的 HTML：

```
 <ul id="sortable2" class="dropfalse">
       <li id="1">Section 1</li>
       <li id="2">Section 2</li>
       <li id="3">Section 3</li>
       <li id="4">Section 4</li>
       <li id="5">Section 5</li>
       <li id="6">Section 6</li>
       <li id="7">Section 7</li>
    </ul>

    <ul id="sortable1" class="droptrue">

</ul> 
```

和 jQuery：

```
 $("#sortable1 li").each(function() {
        var elem = $(this);

        // I have just added one example here (if two added) for brevity

        if (elem.children("li").length = 2) {
            alert('There are two elements');
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:44:27.570

你需要`drop`在 droppable 的事件上运行它 - 假设 jQueryUI droppable，这样的事情会起作用：

```
$('#sortable1').droppable({
    drop: function(event, ui) {
        var liCount = $("#sortable1 li").length;
        // do something with liCount...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:45:13.287

2个主要问题是：

在计算元素数量时使用赋值而不是方程

计算 li 元素的子元素而不是 ul 元素的正确代码：

```
$("#sortable1").each(function() {
        var elem = $(this);

        // I have just added one example here (if two added) for brevity

        if (elem.children("li").length == 2) {
            alert('There are two elements');
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:59:01.173

您应该使用`receive`和`remove`事件 - 如[可排序 API](http://api.jqueryui.com/sortable/)中所述。

[这是 jsfiddle 中的一个工作示例](http://jsfiddle.net/jfrej/gn5cE/)和示例代码：

```
function addRemoveHandler(event, ui) {
    alert("Number of items in sortable1: " + $(this).find("li").length);
}

$( "#sortable2" ).sortable({
    connectWith: "ul"
});
$( "#sortable1" ).sortable({
    connectWith: "ul",
    receive: addRemoveHandler,
    remove: addRemoveHandler
}); 
```

# mysql - SQL：如何选择变量值？

> ID：14602035
> 
> 赞同：0
> 
> 时间：2013-01-30T10:42:10.083
> 
> 标签：mysql

我有一个查询

```
INSERT INTO ... SET ....; 
SET @last_id = LAST_INSERT_ID();
INSERT INTO ... SET .... ,item_id = @last_id;
INSERT INTO ... SET .... ,item_id = @last_id; 
```

我想输出到变量的结果值。例如：

```
SELECT @last_id as ID; 
```

**询问：**

```
INSERT INTO `targets` SET `name` = '123';
SET @target_id = LAST_INSERT_ID();
SELECT @target_id as id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:44:05.967

这不是一个查询，而是一组查询。
只需按顺序一一运行。

# wcf - Microsoft.Samples.GZipEncoder 与 [WebGet(ResponseFormat=WebMessageFormat.Json]？

> ID：14602036
> 
> 赞同：1
> 
> 时间：2013-01-30T10:42:14.363
> 
> 标签：wcf, gzip, webhttpbinding

在[这个问题](https://stackoverflow.com/questions/6601136/how-to-do-compression-in-a-restful-wcf-service-returning-json)和[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/8c3eafae-b6a1-441f-85ef-90721d941a1a)的帮助下，我设法让 WebHttpBinding 与压缩一起工作（通过复制粘贴代码）。当将浏览器指向我的服务方法时，它会下载一个文件，我可以将其重命名为 .zip 并解压缩，因此压缩部分可以工作。但我不能使用 Json 代替 XML。当我将 webget 属性添加到方法时，我只得到“[Fiddler] ReadResponse() failed: The server did not return a response for this request。”

甚至没有调用 GZipMessageEncoder.WriteMessage 。为了让它与 Json 一起工作，我需要改变什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:35:00.783

从 MSDN 上的帖子中，您还需要覆盖`MessageEncoder.IsContentTypeSupported`以确保 gzip 编码器也接受 JSON。

下面的代码具有该代码的修改版本。我还添加了一个消息检查器来添加一个`Content-Encoding`标题，这将允许浏览器按原样理解数据。

```
public class StackOverflow_14602036
{
    [DataContract]
    public class MyDC
    {
        [DataMember]
        public string str;
        [DataMember]
        public int[] intArray;

        public static MyDC CreateLargeInstance(int size)
        {
            Random rndGen = new Random(1);
            StringBuilder sb = new StringBuilder();
            MyDC result = new MyDC();
            for (int i = 0; i < size; i++)
            {
                sb.Append((char)rndGen.Next('a', 'z'));
            }

            result.str = sb.ToString();
            result.intArray = new int[size];
            for (int i = 0; i < size; i++)
            {
                result.intArray[i] = rndGen.Next();
            }

            return result;
        }
    }
    [ServiceContract]
    public interface ITest
    {
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        MyDC GetLargeData(int size);
    }
    public class Service : ITest
    {
        public MyDC GetLargeData(int size)
        {
            return MyDC.CreateLargeInstance(size);
        }
    }

    #region Gzip Encoder Sample
    //This class is used to create the custom encoder (GZipMessageEncoder)
    internal class GZipMessageEncoderFactory : MessageEncoderFactory
    {
        MessageEncoder encoder;

        //The GZip encoder wraps an inner encoder
        //We require a factory to be passed in that will create this inner encoder
        public GZipMessageEncoderFactory(MessageEncoderFactory messageEncoderFactory)
        {
            if (messageEncoderFactory == null)
                throw new ArgumentNullException("messageEncoderFactory", "A valid message encoder factory must be passed to the GZipEncoder");
            encoder = new GZipMessageEncoder(messageEncoderFactory.Encoder);

        }

        //The service framework uses this property to obtain an encoder from this encoder factory
        public override MessageEncoder Encoder
        {
            get { return encoder; }
        }

        public override MessageVersion MessageVersion
        {
            get { return encoder.MessageVersion; }
        }

        //This is the actual GZip encoder
        class GZipMessageEncoder : MessageEncoder
        {
            static string GZipContentType = "application/x-gzip";

            //This implementation wraps an inner encoder that actually converts a WCF Message
            //into textual XML, binary XML or some other format. This implementation then compresses the results.
            //The opposite happens when reading messages.
            //This member stores this inner encoder.
            MessageEncoder innerEncoder;

            //We require an inner encoder to be supplied (see comment above)
            internal GZipMessageEncoder(MessageEncoder messageEncoder)
                : base()
            {
                if (messageEncoder == null)
                    throw new ArgumentNullException("messageEncoder", "A valid message encoder must be passed to the GZipEncoder");
                innerEncoder = messageEncoder;
            }

            //public override string CharSet
            //{
            //    get { return ""; }
            //}

            public override string ContentType
            {
                get { return GZipContentType; }
            }

            public override string MediaType
            {
                get { return GZipContentType; }
            }

            //SOAP version to use - we delegate to the inner encoder for this
            public override MessageVersion MessageVersion
            {
                get { return innerEncoder.MessageVersion; }
            }

            public override bool IsContentTypeSupported(string contentType)
            {
                return this.innerEncoder.IsContentTypeSupported(contentType);
            }

            //Helper method to compress an array of bytes
            static ArraySegment<byte> CompressBuffer(ArraySegment<byte> buffer, BufferManager bufferManager, int messageOffset)
            {
                MemoryStream memoryStream = new MemoryStream();
                memoryStream.Write(buffer.Array, 0, messageOffset);

                using (GZipStream gzStream = new GZipStream(memoryStream, CompressionMode.Compress, true))
                {
                    gzStream.Write(buffer.Array, messageOffset, buffer.Count);
                }

                byte[] compressedBytes = memoryStream.ToArray();
                byte[] bufferedBytes = bufferManager.TakeBuffer(compressedBytes.Length);

                Array.Copy(compressedBytes, 0, bufferedBytes, 0, compressedBytes.Length);

                bufferManager.ReturnBuffer(buffer.Array);
                ArraySegment<byte> byteArray = new ArraySegment<byte>(bufferedBytes, messageOffset, compressedBytes.Length - messageOffset);

                return byteArray;
            }

            //Helper method to decompress an array of bytes
            static ArraySegment<byte> DecompressBuffer(ArraySegment<byte> buffer, BufferManager bufferManager)
            {
                MemoryStream memoryStream = new MemoryStream(buffer.Array, buffer.Offset, buffer.Count - buffer.Offset);
                MemoryStream decompressedStream = new MemoryStream();
                int totalRead = 0;
                int blockSize = 1024;
                byte[] tempBuffer = bufferManager.TakeBuffer(blockSize);
                using (GZipStream gzStream = new GZipStream(memoryStream, CompressionMode.Decompress))
                {
                    while (true)
                    {
                        int bytesRead = gzStream.Read(tempBuffer, 0, blockSize);
                        if (bytesRead == 0)
                            break;
                        decompressedStream.Write(tempBuffer, 0, bytesRead);
                        totalRead += bytesRead;
                    }
                }
                bufferManager.ReturnBuffer(tempBuffer);

                byte[] decompressedBytes = decompressedStream.ToArray();
                byte[] bufferManagerBuffer = bufferManager.TakeBuffer(decompressedBytes.Length + buffer.Offset);
                Array.Copy(buffer.Array, 0, bufferManagerBuffer, 0, buffer.Offset);
                Array.Copy(decompressedBytes, 0, bufferManagerBuffer, buffer.Offset, decompressedBytes.Length);

                ArraySegment<byte> byteArray = new ArraySegment<byte>(bufferManagerBuffer, buffer.Offset, decompressedBytes.Length);
                bufferManager.ReturnBuffer(buffer.Array);

                return byteArray;
            }

            //One of the two main entry points into the encoder. Called by WCF to decode a buffered byte array into a Message.
            public override Message ReadMessage(ArraySegment<byte> buffer, BufferManager bufferManager, string contentType)
            {
                //Decompress the buffer
                ArraySegment<byte> decompressedBuffer = DecompressBuffer(buffer, bufferManager);
                //Use the inner encoder to decode the decompressed buffer
                Message returnMessage = innerEncoder.ReadMessage(decompressedBuffer, bufferManager);
                returnMessage.Properties.Encoder = this;
                return returnMessage;
            }

            //One of the two main entry points into the encoder. Called by WCF to encode a Message into a buffered byte array.
            public override ArraySegment<byte> WriteMessage(Message message, int maxMessageSize, BufferManager bufferManager, int messageOffset)
            {
                //Use the inner encoder to encode a Message into a buffered byte array
                ArraySegment<byte> buffer = innerEncoder.WriteMessage(message, maxMessageSize, bufferManager, messageOffset);
                //Compress the resulting byte array
                return CompressBuffer(buffer, bufferManager, messageOffset);
            }

            public override Message ReadMessage(System.IO.Stream stream, int maxSizeOfHeaders, string contentType)
            {
                GZipStream gzStream = new GZipStream(stream, CompressionMode.Decompress, true);
                return innerEncoder.ReadMessage(gzStream, maxSizeOfHeaders);
            }

            public override void WriteMessage(Message message, System.IO.Stream stream)
            {
                using (GZipStream gzStream = new GZipStream(stream, CompressionMode.Compress, true))
                {
                    innerEncoder.WriteMessage(message, gzStream);
                }

                // innerEncoder.WriteMessage(message, gzStream) depends on that it can flush data by flushing 
                // the stream passed in, but the implementation of GZipStream.Flush will not flush underlying
                // stream, so we need to flush here.
                stream.Flush();
            }
        }
    }
    // This is constants for GZip message encoding policy.
    static class GZipMessageEncodingPolicyConstants
    {
        public const string GZipEncodingName = "GZipEncoding";
        public const string GZipEncodingNamespace = "http://schemas.microsoft.com/ws/06/2004/mspolicy/netgzip1";
        public const string GZipEncodingPrefix = "gzip";
    }

    //This is the binding element that, when plugged into a custom binding, will enable the GZip encoder
    public sealed class GZipMessageEncodingBindingElement
                        : MessageEncodingBindingElement //BindingElement
                        , IPolicyExportExtension
    {

        //We will use an inner binding element to store information required for the inner encoder
        MessageEncodingBindingElement innerBindingElement;

        //By default, use the default text encoder as the inner encoder
        public GZipMessageEncodingBindingElement()
            : this(new TextMessageEncodingBindingElement()) { }

        public GZipMessageEncodingBindingElement(MessageEncodingBindingElement messageEncoderBindingElement)
        {
            this.innerBindingElement = messageEncoderBindingElement;
        }

        public MessageEncodingBindingElement InnerMessageEncodingBindingElement
        {
            get { return innerBindingElement; }
            set { innerBindingElement = value; }
        }

        //Main entry point into the encoder binding element. Called by WCF to get the factory that will create the
        //message encoder
        public override MessageEncoderFactory CreateMessageEncoderFactory()
        {
            return new GZipMessageEncoderFactory(innerBindingElement.CreateMessageEncoderFactory());
        }

        public override MessageVersion MessageVersion
        {
            get { return innerBindingElement.MessageVersion; }
            set { innerBindingElement.MessageVersion = value; }
        }

        public override BindingElement Clone()
        {
            return new GZipMessageEncodingBindingElement(this.innerBindingElement);
        }

        public override T GetProperty<T>(BindingContext context)
        {
            if (typeof(T) == typeof(XmlDictionaryReaderQuotas))
            {
                return innerBindingElement.GetProperty<T>(context);
            }
            else
            {
                return base.GetProperty<T>(context);
            }
        }

        public override IChannelFactory<TChannel> BuildChannelFactory<TChannel>(BindingContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");

            context.BindingParameters.Add(this);
            return context.BuildInnerChannelFactory<TChannel>();
        }

        public override IChannelListener<TChannel> BuildChannelListener<TChannel>(BindingContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");

            context.BindingParameters.Add(this);
            return context.BuildInnerChannelListener<TChannel>();
        }

        public override bool CanBuildChannelListener<TChannel>(BindingContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");

            context.BindingParameters.Add(this);
            return context.CanBuildInnerChannelListener<TChannel>();
        }

        void IPolicyExportExtension.ExportPolicy(MetadataExporter exporter, PolicyConversionContext policyContext)
        {
            if (policyContext == null)
            {
                throw new ArgumentNullException("policyContext");
            }
            XmlDocument document = new XmlDocument();
            policyContext.GetBindingAssertions().Add(document.CreateElement(
                GZipMessageEncodingPolicyConstants.GZipEncodingPrefix,
                GZipMessageEncodingPolicyConstants.GZipEncodingName,
                GZipMessageEncodingPolicyConstants.GZipEncodingNamespace));
        }
    }
    #endregion

    static Binding GetBinding()
    {
        CustomBinding custom = new CustomBinding(new WebHttpBinding());
        for (int i = 0; i < custom.Elements.Count; i++)
        {
            if (custom.Elements[i] is WebMessageEncodingBindingElement)
            {
                WebMessageEncodingBindingElement webBE = (WebMessageEncodingBindingElement)custom.Elements[i];
                custom.Elements[i] = new GZipMessageEncodingBindingElement(webBE);
                break;
            }
        }

        return custom;
    }

    class MyContentEncodingBehavior : IEndpointBehavior, IDispatchMessageInspector
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            endpointDispatcher.DispatchRuntime.MessageInspectors.Add(this);
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }

        public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
        {
            return null;
        }

        public void BeforeSendReply(ref Message reply, object correlationState)
        {
            HttpResponseMessageProperty resp = (HttpResponseMessageProperty)reply.Properties[HttpResponseMessageProperty.Name];
            resp.Headers[HttpResponseHeader.ContentEncoding] = "gzip";
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        var endpoint = host.AddServiceEndpoint(typeof(ITest), GetBinding(), "");
        endpoint.Behaviors.Add(new WebHttpBehavior());
        endpoint.Behaviors.Add(new MyContentEncodingBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(baseAddress + "/GetLargeData?size=1000");
        HttpWebResponse resp;
        try
        {
            resp = (HttpWebResponse)req.GetResponse();
        }
        catch (WebException ex)
        {
            resp = (HttpWebResponse)ex.Response;
        }

        Console.WriteLine("HTTP/{0} {1} {2}", resp.ProtocolVersion, (int)resp.StatusCode, resp.StatusDescription);
        foreach (var header in resp.Headers.AllKeys)
        {
            Console.WriteLine("{0}: {1}", header, resp.Headers[header]);
        }

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# rest - 如何在 OPTIONS 动词中指定可用的 GET 参数？

> ID：14602040
> 
> 赞同：0
> 
> 时间：2013-01-30T10:42:25.550
> 
> 标签：rest

在 REST Web 服务中，可以说明哪些动词可以用于指定资源。我可以返回任何标头，指定 GET 一个可以传递参数，例如，'name'，以便客户知道他可以制作：GET /resource?name=foo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:04:50.013

如果您愿意，您可以制作新的标头，但它们不会非常符合协议的设计。首先，重要的是要理解“/bar”标识一个资源，而“/bar?name=foo”标识一个*不同的资源*，而不是带参数的同一个资源。我知道这与许多流行的 Web 框架的设计背道而驰，但它对于理解如何正确使用协议至关重要。

基于此，OPTIONS 方法应该返回有关已识别资源的信息，这意味着`OPTIONS /bar`应该返回有关资源通信选项的响应`/bar`，而不是`/bar?name={name}`资源集。另请注意，OPTIONS 没有为有效负载指定格式；唯一可互操作的交换是通过众所周知的标头，例如 Allow。

`/bar`资源表示包含有关资源的信息的正确方法`/bar?name=foo`是通过链接（或表单，其中一些是构造链接的方法），或者在从 检索的有效负载（如果媒体类型支持它）中`GET /bar`，或者在响应标头（越来越多地通过[Link 标头](https://www.rfc-editor.org/rfc/rfc5988)）。查看[URI 模板](https://www.rfc-editor.org/rfc/rfc6570)以替代 HTML 表单。

# jquery - 无法一次又一次地打开 JqueryUI 对话框

> ID：14602046
> 
> 赞同：1
> 
> 时间：2013-01-30T10:42:29.167
> 
> 标签：jquery, jquery-ui

这是jqueryUI

```
$(function() {
$( "#dialog" ).dialog({
autoOpen: false,modal: true,
show: {
effect: "bounce",
duration: 1000
},
hide: {
effect: "fade",
duration: 1000
},
open: function ()
            {
                $(this).load('password.php');
            },
        height: 400,
            width: 400,
            title: 'Dynamically Loaded Page',           
});
$( "#opener" ).click(function() {
$( "#dialog" ).dialog( "open" );
});
}); 
```

html

```
<a href="#" id="opener">Open Dialog</a>
<div class="dialog" id="dialog" title="Basic dialog"></div> 
```

这项工作应该是，如果password.php 只包含文本。但是当password.php包含mysql查询时，不能一次又一次地打开对话框？控制台窗口中没有错误，但除了按 F5 / 刷新页面外，无法再次打开对话框。什么问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:49:51.847

添加关闭事件处理程序。

```
$( "#dialog" ).dialog({
// your previous code as it is 
 ,close: function( event, ui ) {$( "#dialog" ).dialog( "destroy" );}      
}); 
```

# oracle - Oracle 11g：游标在过程中的生命周期。我必须关闭打开的游标吗？

> ID：14602049
> 
> 赞同：3
> 
> 时间：2013-01-30T10:42:33.923
> 
> 标签：oracle, plsql, oracle11g, cursor

在 Oracle 11g 中，当 PL/SQL 上下文整理函数/过程自动关闭打开的游标时。为什么在网络用户打开和关闭光标的许多示例中？

这是向后兼容吗？

REF-CURSOR 呢？离开程序也关闭它们？

如果游标应该总是关闭，那么处理异常呢？在`EXCEPTION`块中我必须检查所有游标`ISOPEN`然后关闭它们吗？

基本脚本演示自动关闭功能：

```
DECLARE
  PROCEDURE TEST IS
    CURSOR CUR_CLIENTS IS SELECT DUMMY CL_ID FROM DUAL;
    TYPE RT_CLIENTS IS TABLE OF CUR_CLIENTS%ROWTYPE;
    LT_CLIENTS RT_CLIENTS;
  BEGIN
    IF CUR_CLIENTS%ISOPEN THEN
      DBMS_OUTPUT.PUT_LINE('CLOSING CURSOR');
      CLOSE CUR_CLIENTS;
    END IF;
    OPEN CUR_CLIENTS;
    LOOP
      FETCH CUR_CLIENTS BULK COLLECT INTO LT_CLIENTS LIMIT 1000;
      EXIT WHEN LT_CLIENTS.COUNT = 0;
      FOR I IN 1..LT_CLIENTS.COUNT LOOP
        DBMS_OUTPUT.PUT_LINE(LT_CLIENTS(I).CL_ID);
      END LOOP;
    END LOOP;
  END TEST;
BEGIN
  DBMS_OUTPUT.PUT_LINE('--------------------');
  TEST;
  DBMS_OUTPUT.PUT_LINE('--------------------');
  TEST;
  DBMS_OUTPUT.PUT_LINE('--------------------');
  TEST;
  DBMS_OUTPUT.PUT_LINE('--------------------');
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:58:40.773

在您的脚本中，您做错了，因为您正在检查光标是否打开，如果它已经打开，您将关闭它，然后再次重新打开。如果光标已经打开，则**不要关闭它**，只需使用它。

在 plsql 中， **在内部块中打开的游标显然没有被隐式关闭。如果它们被关闭，我就不会超过打开游标的最大数量。**

* * *

在我的经验中：

```
SQL> DECLARE    
  2     CURSOR last99 IS SELECT * FROM dual;    
  3  BEGIN
  4    DECLARE    
  5       CURSOR test01 IS SELECT * FROM dual;
  6       CURSOR test02 IS SELECT * FROM dual;    
  7       CURSOR test03 IS SELECT * FROM dual;    
............................    
............................    
 51       CURSOR test47 IS SELECT * FROM dual;    
 52       CURSOR test48 IS SELECT * FROM dual;    
 53    BEGIN    
 54       OPEN test01;    
 55       OPEN test02;    
 56       OPEN test03;   

 ..............    
...............   

 99       OPEN test46;    
100       OPEN test47;  
101       OPEN test48;    
102    END;    
104    --This last OPEN will cause an error     
105    --from too many cursors.    
106    OPEN last99;    
107  END;    
108  /    
DECLARE    
*    
ERROR at line 1:    
ORA-01000: maximum open cursors exceeded    
ORA-06512: at line 2    
ORA-06512: at line 106 
```

**您也可以在异常**块中关闭光标。

# android - 安卓：搜索视图

> ID：14602050
> 
> 赞同：0
> 
> 时间：2013-01-30T10:42:34.420
> 
> 标签：android

这就是我在 xml 文件中的内容

```
 <SearchView
        android:id="@+id/searchView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:iconifiedByDefault="false">
    </SearchView> 
```

这是它在设备上的外观

![在此处输入图像描述](../Images/6e05c140b32ce07f51cde864b9487d8d.png)

但我希望这个想法看起来像这样：

![在此处输入图像描述](../Images/dfc9a0391f00bd45776dda23fb94407c.png)

怎么做 ？这可能与 searchView 或者我应该在里面使用带有图像的 EditText 吗？

PS：Searchview不在操作栏中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:00:55.430

我认为您必须更改**android:id="@+id/search_plate"的背景**

[更改 searchview 小部件的背景可绘制对象](https://stackoverflow.com/questions/11085308/changing-the-background-drawable-of-the-searchview-widget)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T16:42:56.243

此行为由 setIconifiedByDefault 方法（[http://developer.android.com/reference/android/widget/SearchView.html#setIconifiedByDefault(boolean)](http://developer.android.com/reference/android/widget/SearchView.html#setIconifiedByDefault(boolean))）更改。如果在设置 SearchView 时调用该方法，如下所示，图标将位于TextView**之外：**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.mymenu, menu);

    SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
    // ...
    searchView.setIconifiedByDefault(false); // the icon will be outside the search view
} 
```

因此，要获得所需的行为，请不要调用 setIconifiedByDefault （根据文档，这与使用 true 参数调用它相同）

# svn - 将其他分支从分支分支到主干的分支安全合并吗？

> ID：14602051
> 
> 赞同：0
> 
> 时间：2013-01-30T10:42:51.957
> 
> 标签：svn, svn-merge

我们有一个标准的布局

```
tags
branches
trunk 
```

但是主干中没有代码。树干从未被使用过。取而代之的是，所有工作都在一个分支中完成，一旦该分支被认为已完成，就会创建一个新分支。从现在开始，所有可发布的代码都将驻留在主干中，因为这是我们所有其他项目的设置方式，也是我们在构建安装包时让 TeamCity 获取和构建所有最新的可发布项目的方式。

在分支下存在一个 1.0 分支和一个从 1.0 分支分支的*foo*分支。

```
branches
 |- 1.0
     |- foo 
```

*foo*目前正在开发中，1.0 包含最新发布的代码。我的想法是将 1.0 与主干合并，然后，当*foo*完成后，将其与主干合并。这会带来任何问题，因为它基于 1.0，哪个主干也将是，并且主干可能包含*foo*中不存在的其他更改？

另外，什么时候可以认为删除 1.0 分支是安全的？在 1.0 被合并到主干之后还是在*foo*也被合并之后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:01:01.990

1.  你必须修复你的工作流程和头脑——它们坏了

    *   如果您从**foo 的某个祖先**创建了主干的 HEAD ，则主干不能包含（以后）更改，这些更改在 foo 中不存在（如果**所有**开发都发生在 foo 中）。
    *   您*尝试使用*1.0/foo 作为主干和主干作为标签
2.  只有当 foo 也将被废弃时，您才能删除`svn rm`废弃的分支 (1.0) - Subversion 存储库是**基于路径的**- 您不能删除 1.0 但保持 foo 不变

# ruby - 使用访问器省略 `self`

> ID：14602052
> 
> 赞同：1
> 
> 时间：2013-01-30T10:42:52.023
> 
> 标签：ruby, self, accessor

通过访问器方法访问实例变量时，表达式和有什么`attribute`区别？比如说，我们定义了一个访问器：`self.attribute``attribute`

```
def post
  @post
end 
```

我们可以打电话

```
self.post 
```

或者干脆

```
post 
```

添加有什么特别之处`self`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:45:21.830

当可能存在隐藏方法调用的本地 var 时，情况会有所不同。Using`self`允许我们指定我们想要的方法，而不是本地 var。看一个例子：

```
class Foo
  def post
    @post
  end

  def post= (content)
    @post = content
  end 

  def test
    #difference 1 
    p post # >> nil

    @post = 10
    p post # >> 10

    post = 42
    p post # >> 42
    p self.post # >> 10

    #difference 2
    # assign to @post, note that you can put space between "self.post" and "="
    self.post = 12 

    #otherwise it means assigning to a local variable called post.
    post = 12
  end
end

Foo.new.test 
```

# javascript - WindowsXP中有效文件名的正则表达式

> ID：14602053
> 
> 赞同：1
> 
> 时间：2013-01-30T10:42:53.143
> 
> 标签：javascript, regex

我有一个文本字符串，它成为保存出来的文件名的一部分。我需要删除任何非法字符（即非字母数字，仅基于拉丁语的字符）

这是我到目前为止所拥有的：

想通了，regex-fu 水平恢复正常！

```
function isValidFilename(fname)
{ 
  var rexp = new RegExp(/[^a-zA-Z0-9]/gim)
  return fname.replace(rexp, "")
}

var v = "my$filename"
alert(v + "\nis valid???\n\n" + isValidFilename(v))

v = "myfilename"
alert(v + "\nis valid???\n\n" + isValidFilename(v)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:47:25.093

在另一个问题中发现了这一点：

```
/^[0-9a-zA-Z\^\&\'\@\{\}\[\]\,\$\=\!\-\#\(\)\.\%\+\~\_ ]+$/ 
```

取自：[用于验证文件名的 Javascript 正则表达式](https://stackoverflow.com/questions/11100821/javascript-regex-for-validating-filenames)

也许你可以用这个来得到你想要的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:51:29.257

您应该针对有效字符进行验证，而不是删除无效字符

[] 组内的 ^ 将否定该组。

您可以使用替换为 /[^A-Za-z0-9.-]/ 来消除所有不属于该组的字符

# xpages - #{javascript:viewScope.something} 在 context.redirectToPage(...) 之后不会更新

> ID：14602055
> 
> 赞同：0
> 
> 时间：2013-01-30T10:42:54.873
> 
> 标签：xpages, xpages-ssjs

不久前，我问[了这个问题](https://stackoverflow.com/questions/14379519/xpages-execute-context-redirecttopage-after-client-side-function)，这是关于在 csjs 引起的完全刷新后更新属性包。我用一个指向 context.redirectToPage 的 URL 参数解决了这个问题。

现在我有一个带有基于 jquery 的jqGrid 的[xPage](http://www.trirand.com/jqgridwiki/doku.php)，它从 viewScope 接收带有 JSON 数据的字符串，并将该数据显示在表中。当我在网格中编辑记录并点击“提交”时，网格会发布一个名为“oper”的参数，其中包含“edit”、“add”等值，为此我检查页面的 beforePageLoad 事件然后执行我的托管 bean 的保存方法。在此之后，我用新的 JSON 字符串更新 viewScope 变量，并以上述方式进行完全刷新，这在以前是有效的。

```
<xp:this.beforePageLoad><![CDATA[#{javascript:
    if (bccUser.isAdmin() && param.containsKey('oper') && param.get('oper').toString().length>0) {
        bccGridDataHandler.saveGridDoc('RequestDummy','PersonRequestsDummy',param);
    }
    viewScope.put('jsonString',bccView.getViewColumnValue('PersonRequestsDummyJson',1));    
    print('jsonString in viewScope: '+viewScope.get('jsonString'));
    if (bccUser.isAdmin() && param.containsKey('oper') && param.get('oper').toString().length>0) {
        var url = context.getUrl().toSiteRelativeString(context);
        if (url.indexOf('?')!=-1) {
            url += "&doRefresh=true";
        } else {
            url += "?doRefresh=true";
        }
        print("redirecting to: "+url);
        context.redirectToPage(url);
}}]]> 
```

在服务器控制台中，我可以从第一个打印语句中看到正确、更新的 JSON 字符串，因此保存方法成功，并且我的 viewScope 中有最新数据。但是，网格不显示更新的数据，我的 test-div 也不显示

`<xp:text value="#{javascript:viewScope.get('jsonString')}" />`

在更新 viewScope 后，我还尝试对网格和 div 进行部分刷新，但同样的情况发生了。手动刷新页面后一切正常。那么，这里发生了什么？我只想将一个简单的字符串传递给控件。我是否又误会了 xPages-Lifecycle 和事件的顺序？

提前致谢。问候，莎拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:52:45.260

我认为您正在失去`viewScope`. `redirectToPage`尝试使用`requestScope`or `sessionScope`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:09:31.297

感谢所有建议，我尝试了所有建议，但不幸的是没有运气。最有趣的是，当我将客户端警报语句放入 onClientLoad 事件时，它只会在我进入页面时触发一次，但不会在任何 context.redirect 或 .reload 命令之后触发。毕竟我通过以下方式解决了这个问题：

我从 beforePageLoad 事件中删除了重定向命令，并将以下参数添加到 jqGrid 的提交函数中（[请参阅此处的文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing)）：

```
afterSubmit: function(response, postdata) {window.location.href=window.location.href;return [true,'',''];} 
```

这对我有用（在此之后还会再次触发 onClientLoad），但我仍然想知道为什么从服务器端引起的页面刷新与客户端刷新不一样，或者无法模仿客户端刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:59:50.280

我不确定 beforePageLoad 事件是否正确，您是否考虑过在 beforeRenderResponse 中生成 JSON？

# asp.net - 在为请求提供服务之前找出控制器的名称和操作

> ID：14602059
> 
> 赞同：2
> 
> 时间：2013-01-30T10:43:02.583
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing

我想在 ControllerName 和 Action 被解析之后，但在请求被服务之前，即在它到达适当的操作之前，*拦截*进入我的 MVC 应用程序的每个请求。

我想到了两种方法：

1）我可以写一个`HttpModule`来拦截每个传入`HttpRequest`的，读取`HttpContext.Request.AbsoluteUrl`（或一些这样的）属性，*然后假设我配置的路由永远不会改变*（这是我想避免的假设，否则我会走这条路） ，并推断正在调用的控制器和操作的名称。

但是，我正在寻找一种更可靠的方法。因此下面的（2）。

2）我假设MVC在实例化正确的控制器之前已经为我做了一次或另一次。我想知道它在哪里这样做，以便我可以重新使用它的工作。在什么时候我可以获取此信息，拦截请求并在它到达操作之前对其进行处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:47:59.400

您可以创建一个[`global action filter`](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcglobalanddynamicactionfilters_topic2.aspx)可以访问控制器和操作的位置：

```
public class MyGlobalActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        string controller = filterContext.RouteData.GetRequiredString("controller");
        string action = filterContext.RouteData.GetRequiredString("action");
        // do something with those variables ...
    }
} 
```

该`OnActionExecuting`方法将在每个控制器操作运行之前被调用，您将能够从 RouteData 中检索您正在寻找的信息。

然后只需在您的中注册您的全局操作过滤器`Application_Start`：

```
GlobalFilters.Filters.Add(new MyGlobalActionFilter()); 
```

# mysql - MySQL多列索引和OR语句

> ID：14602060
> 
> 赞同：1
> 
> 时间：2013-01-30T10:43:10.503
> 
> 标签：mysql, indexing, multiple-columns

我发现了一篇关于 MySQL 中索引的[有趣的 SitePoint 文章](http://www.sitepoint.com/optimizing-mysql-application/)

上面的文章谈到了“AND”语句，其中“SELECT”就像

```
SELECT peopleid 
FROM people 
WHERE firstname='Mike' 
    AND lastname='Sullivan' 
    AND age=17 
```

可以利用多列索引，例如

```
ALTER TABLE people 
    ADD INDEX fname_lname_age (firstname,lastname,age); 
```

但是在我的 Web 应用程序中，我经常有一个文本字段输入，用户可以在其中输入名字或姓氏的一部分，从而产生如下查询：

```
SELECT peopleid 
FROM people 
WHERE ((firstname LIKE '%$parameter%') 
        OR (lastname LIKE '%$parameter%')) 
    AND age=17 
```

那么，在这种情况下，多列索引是否也能提高性能？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:13:55.910

[MySQL](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)官方手册中有专门针对此的一章。

但你真正应该了解的是[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/explain.html). 把它放在你的查询前面，如下所示：

```
EXPLAIN SELECT peopleid 
FROM people 
WHERE ((firstname LIKE '%$parameter%') 
        OR (lastname LIKE '%$parameter%')) 
    AND age=17 
```

您可以查看是否使用了索引。

# java - Java String split 删除了空值

> ID：14602062
> 
> 赞同：349
> 
> 时间：2013-01-30T10:43:11.740
> 
> 标签：java, string, split

我正在尝试使用分隔符拆分值。但我发现了令人惊讶的结果

```
String data = "5|6|7||8|9||";
String[] split = data.split("\\|");
System.out.println(split.length); 
```

我期望得到 8 个值。**[5,6,7,EMPTY,8,9,EMPTY,EMPTY]** 但我只得到 6 个值。

任何想法以及如何解决。无论 EMPTY 值来自任何地方，它都应该在数组中。

* * *

## 回答 #1

> 赞同：589
> 
> 时间：2013-01-30T10:44:28.183

`split(delimiter)`默认情况下从结果数组中删除尾随的空字符串。要关闭此机制，我们需要使用重载版本的`split(delimiter, limit)`with`limit`设置为负值，例如

```
String[] split = data.split("\\|", -1); 
```

更多细节：
`split(regex)`内部返回结果，您可以在此方法`split(regex, 0)`的[文档](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-)中找到（强调我的）

> 该`limit`参数控制应用模式的次数，因此会影响结果数组的长度。
> 
> 如果限制`n`大于*零*，则该模式将最多应用 n - 1 次，数组的长度将不大于 n，并且数组的最后一个条目将包含最后一个匹配分隔符之外的所有输入。
> 
> 如果**为非正数**`n`，则该模式将被应用尽可能多的次数，并且该数组可以具有任意长度。
> 
>  **如果`n`为零，则该模式将被应用尽可能多的次数，数组可以有任意长度，并且**尾随的****空字符串将被丢弃**。**

 ****例外**：

值得一提的是，*只有当这种空字符串是由拆分机制创建时*，删除尾随空字符串才有意义。因此，`"".split(anything)`由于我们无法`""`进一步拆分，我们将获得结果`[""]`数组。
发生这种情况是因为此处没有发生拆分，因此`""`尽管为空且尾随代表*原始*字符串，而不是由拆分过程*创建的空字符串。*

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-30T10:47:32.300

从以下文档[`String.split(String regex)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)：

> 此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数拆分方法一样。**因此，尾随的空字符串不包含在结果数组中。**

因此，您将不得不使用[`String.split(String regex, int limit)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)带有负值的两个参数版本：

```
String[] split = data.split("\\|",-1); 
```

文件：

> 如果限制 n 大于零，则该模式将最多应用 n - 1 次，数组的长度将不大于 n，并且数组的最后一个条目将包含最后一个匹配分隔符之外的所有输入。**如果 n 为非正数，则该模式将尽可能多地应用，并且数组可以具有任意长度。如果 n 为零，则该模式将被应用尽可能多的次数，数组可以有任意长度，并且尾随的空字符串将被丢弃。**

这不会遗漏任何空元素，包括尾随元素。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-06-09T05:48:24.193

`String[] split = data.split("\\|",-1);`

这并不是一直以来的实际要求。上面的缺点如下图所示：

```
Scenerio 1:
When all data are present:
    String data = "5|6|7||8|9|10|";
    String[] split = data.split("\\|");
    String[] splt = data.split("\\|",-1);
    System.out.println(split.length); //output: 7
    System.out.println(splt.length); //output: 8 
```

当数据丢失时：

```
Scenerio 2: Data Missing
    String data = "5|6|7||8|||";
    String[] split = data.split("\\|");
    String[] splt = data.split("\\|",-1);
    System.out.println(split.length); //output: 5
    System.out.println(splt.length); //output: 8 
```

实际要求是长度应为 7，尽管缺少数据。因为在某些情况下，例如当我需要插入数据库或其他内容时。我们可以通过使用以下方法来实现这一点。

```
 String data = "5|6|7||8|||";
    String[] split = data.split("\\|");
    String[] splt = data.replaceAll("\\|$","").split("\\|",-1);
    System.out.println(split.length); //output: 5
    System.out.println(splt.length); //output:7 
```

我在这里所做的是，我正在删除“|” 管道在最后，然后拆分字符串。如果你有 "," 作为分隔符，那么你需要在 replaceAll 中添加 ",$"。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-30T10:44:36.537

来自[**String.split() API 文档**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)：

> 围绕给定正则表达式的匹配拆分此字符串。此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数拆分方法一样。因此，尾随的空字符串不包含在结果数组中。

重载[**String.split(regex, int)**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)更适合您的情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-16T05:26:10.593

您可能有多个分隔符，包括空格字符、逗号、分号等。使用 []+ 将它们放在可重复的组中，例如：

```
 String[] tokens = "a , b,  ,c; ;d,      ".split( "[,; \t\n\r]+" ); 
```

你将有 4 个标记——a、b、c、d

在应用此拆分之前，需要删除源字符串中的前导分隔符。

作为对问题的回答：

```
String data = "5|6|7||8|9||";
String[] split = data.split("[\\| \t\n\r]+"); 
```

添加空格以防万一您将它们作为分隔符与 |**

# tcl - 如何将tcl字符串视为十六进制数字并将其转换为二进制？

> ID：14602065
> 
> 赞同：2
> 
> 时间：2013-01-30T10:43:16.423
> 
> 标签：tcl

我在变量中设置了一个 tcl 字符串。我想把它当作一个十六进制来转换成它的二进制。任何人都可以帮助我实现这一目标。

这是我正在做的事情：

```
$ /usr/bin/tclsh8.5
% set a a1a2a3a4a5a6
a1a2a3a4a5a6
% set b [ string range $a 0 3 ]
a1a2 
```

现在我希望变量“b”的 a1a2 值应被视为 0xa1a2，以便我可以将其转换为二进制。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:00:16.753

如果您使用的是 Tcl 8.6，那么`binary decode hex`是最好的选择：

```
binary decode hex $b 
```

如果您使用的是旧版本的 Tcl，那么您必须使用`binary format`H 格式说明符：

```
binary format H* $b 
```

您可以将生成的字节数组写入文件或通过套接字等发送，但如果要将其显示为文本，我建议先将其转换为字符串：

```
encoding convertfrom utf-8 [binary format H* $b] 
```

# mysql - MySQL：获取连接中的计数值，否则

> ID：14602068
> 
> 赞同：0
> 
> 时间：2013-01-30T10:43:23.520
> 
> 标签：mysql, sql

在我的应用程序中，我想显示我所有的朋友以及发出和收到的支票

```
Table Transaction                 Table Friends
----------------------------      -----------------------------
id  given_id   rev_id   amt        id  who_id  whom_id  who_name
-----------------------------     -------------------------------
 1    2          1       1k         1     1       2       sss
 2    2          3       1k         2     3       2       fff
 3\.   3          2       2k         3     4       1       eee
 4    1          2       2k         4     2       1       iii
-----------------------------      ------------------------------

Result whom_id=2 name=iii  -> Friends (sss,fff) 
                            => sss gives totally 1 cheque and 
                               sss receives totally 1 cheque and
                               fff gives 1 cheque and
                               fff receives 1 cheque and 
```

这个我试过了。。

```
SELECT 
p.who_id, 
p.who_name, 
COUNT( r1.give_id ) , 
COUNT( r1.rec_id ) 

FROM 
friends p 
LEFT JOIN Transaction r1 

ON p.who_id = r1.give_id OR p.who_id = r1.rec_id 

WHERE 
p.whom_id = 1 

GROUP BY p.who_id 
```

请给我最好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:58:42.313

您可以将 HAVING 与 group by 一起使用，而不是

```
WHERE p.whom_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:09:22.387

你可以这样做

```
SELECT
  f.who_name,
  count(t.given_id)    GivenTotal,
  count(lt.rev_id) as RecievedTotal
from friends as f
  left join transaction as t
    on t.given_id = f.who_id
  left join transaction as lt
    on lt.rev_id   = f.who_id    
where f.whom_id = 2
group by t.given_id 
```

[演示](http://sqlfiddle.com/#!2/fe578/1)

输出

```
who_name | GivenTotal | RecievedTotal 
----------------------------------
sss      |  1         |     1 
fff      |  1         |     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:01:59.267

有两种方法可以做到这一点，都涉及在`Transactions`桌子上加入两次。

您可以使用子查询：

```
SELECT f.who_id,
  f.who_name,
  t1.TotalGiven,
  t2.TotalRev
FROM friends f
LEFT JOIN
(
  select count(t.given_id) TotalGiven, t.given_id
  from Transactions t
  group by t.given_id
) t1
  ON f.who_id = t1.given_id 
LEFT JOIN
(
  select count(t.rev_id) TotalRev, t.rev_id
  from Transactions t
  group by t.rev_id
) t2
  ON f.who_id = t2.rev_id 
where f.whom_id = 2; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/f88eb/16)。

或者您可以只使用没有子查询的连接：

```
select f.who_id,
  f.who_name,
  count(t1.given_id) TotalGiven,
  count(t2.rev_id) TotalRev
FROM friends f
LEFT JOIN Transactions t1
  ON f.who_id = t1.given_id 
LEFT JOIN Transactions t2
  ON f.who_id = t2.rev_id 
where f.whom_id = 2
group by f.who_id,  f.who_name 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/f88eb/15)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:41:32.510

最后我得到了答案，

```
SELECT 
p.who_id, p.who_name, COUNT( r1.give_id ) , COUNT( r2.rec_id ) 

FROM 
friends p 
LEFT JOIN Transaction r1  ON p.who_id = r1.give_id 
LEFT JOIN Transaction r2  on p.who_id = r2.rec_id
WHERE 
p.whom_id = 1 

GROUP BY p.who_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:48:45.093

尝试这个，

```
select
  id,
  count(given_id) as given,
  count(rev_id) as reveive
from Friends
GROUP BY id; 
```

如果你想要两个金额之间的差异，试试这个

```
select
  id,
  count(given_id) as given,
  count(rev_id) as reveive,
  given-receive as diff
from Friends
GROUP BY id; 
```

# ruby - 为什么我不能使“OpenSSL with Ruby”和“命令行 OpenSSL”可互操作？

> ID：14602069
> 
> 赞同：5
> 
> 时间：2013-01-30T10:43:27.510
> 
> 标签：ruby, openssl, base64, encryption

在尝试设置一个可互操作的加密系统时，我在一个轻量级的“概念验证”中遇到了一个奇怪的情况。

我用 Ruby 编写了以下代码：

*   从我的文件系统上的虚拟文本文件创建加密文件
*   解密加密文件
*   与原始文件比较并检查它们是否相同

这是代码：

```
require 'openssl'
require 'base64'

# Read the dummy file
data = File.read("test.txt")

# Create an encrypter
cipher = OpenSSL::Cipher::AES.new(256, :CBC)
cipher.encrypt
key = "somethingreallyreallycomplicated"
cipher.key = key

# Encrypt and save to a file
encrypted = cipher.update(data) + cipher.final
open "encrypted.txt", "w" do |io| io.write Base64.encode64(encrypted) end

# Create a decrypter
decipher = OpenSSL::Cipher::AES.new(256, :CBC)
decipher.decrypt
decipher.key = key

# Decrypt and save to a file
encrypted_data = Base64.decode64(File.read("encrypted.txt"))
plain = decipher.update(encrypted_data) + decipher.final
open "decrypted.txt", "w" do |io| io.write plain end

# Compare original message and decrypted message
puts data == plain #=> true 
```

一切正常，此脚本输出“true”

然后我尝试使用 openssl 命令行通过以下命令解密我的文件：

```
openssl aes-256-cbc -d -a -in encrypted.txt -k somethingreallyreallycomplicated 
```

但我得到了：`bad magic number`

怎么来的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T11:57:42.463

您需要在命令行上使用`-K`（大写）和`-iv`选项将 key 和 IV 明确指定为十六进制数字字符串。如果使用`-k`（小写），OpenSSL 将使用密钥派生函数从密码中派生密钥和 IV。当 OpenSSL 派生密钥时，它还将使用与您期望的普通块 CBC 不兼容的“盐渍”密文格式。

请注意，在您的 Ruby 代码中，您直接使用 ASCII 字符串的前 256 位（32 个字节）作为密钥，这对于存在安全问题的实际应用程序几乎肯定不是您想要的。您应该使用（随机生成的）二进制密钥，或使用密钥派生函数（如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)、[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)或[scrypt](http://en.wikipedia.org/wiki/Scrypt) ）从密码中派生密钥。

# java - PrimeFaces：在 Javascript 中获取当前列排序顺序

> ID：14602071
> 
> 赞同：3
> 
> 时间：2013-01-30T10:43:32.587
> 
> 标签：java, javascript, jsf, primefaces, datatable

我目前正在尝试在用户重新排序时获取 PrimeFaces 数据表中列的当前顺序。由于服务器端事件不提供任何参数，因此我决定使用 JavaScript 处理程序来执行此操作。

```
function onColumnReorder(glossary) {
    var sortedColumnNames = ...
} 
```

“词汇表”是我的数据表小部件变量。问题是：我现在如何按当前顺序检索列名？请注意，我不是在谈论表格数据排序，而只是在谈论列在表格中出现的当前顺序（从左到右）——这当然可能会改变，因为“draggableColumns”设置为 true。

感谢您的任何建议和问候帕斯卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:24:46.220

首先定义`colReorder`AJAX 事件`datatable`：

```
<p:ajax event="colReorder" listener="#{myBean.onColReorder}"/> 
```

在`onColReorder`方法中，使用方法通过 id 查找您的数据表[`UIViewRoot#findComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html#findComponent%28java.lang.String%29)。找到您的[`DataTable`](http://www.primefaces.org/docs/api/3.4/org/primefaces/component/datatable/DataTable.html)对象后，这很容易。使用[`getColumns()`](http://www.primefaces.org/docs/api/3.4/org/primefaces/component/datatable/DataTable.html#getColumns%28%29)方法获取列的列表`onColReorder()`：

```
FacesContext fc = FacesContext.getCurrentInstance();
DataTable myDatatable = (DataTable) fc.getViewRoot().findComponent("your_datatable");
List<UIColumn> columns = myDatatable.getColumns(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:26:37.003

```
var th =$(myTableWidgetVar.jqId).find('.ui-state-active'); 
```

用 id 返回你`myTableId:myColumnId`，所以你知道哪一列启用了排序。

您现在可以阅读三角形组件：

th.find('.ui-sortable-column-icon');

并检查它定义了哪个类：

*   `'ui-icon-triangle-1-n'`用于升序排序

*   `'ui-icon-triangle-1-s'`用于降序排序

如果您使用`LazyDataModel`.

# android - 样式通知 InboxStyle

> ID：14602072
> 
> 赞同：31
> 
> 时间：2013-01-30T10:43:34.457
> 
> 标签：android, notifications

我尝试实现一个可扩展的通知，并为此使用了[InboxStyle](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.InboxStyle.html)。

基于[文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#BigNotify)中的以下图像：

![收件箱式通知](../Images/0bf4619ed2c0d8d6036249203eb4ccdf.png)

应该可以设置文本样式。在这种情况下，将“Google Play”加粗。

InboxStyle 只有`addLine()`在我可以传递 CharSequence 的地方。我尝试`Html.fromHtml()`并使用了一些 html 格式，但我无法成功。

```
NotificationCompat.InboxStyle inboxStyle = new NotificationCompat.InboxStyle();
inboxStyle.setBigContentTitle("title");
inboxStyle.setSummaryText("summarytext");
// fetch push messages
synchronized (mPushMessages) {
    HashMap<String, PushMessage> messages = mPushMessages.get(key);
    if (messages != null) {
        for (Entry<String, PushMessage> msg : messages.entrySet()) {
            inboxStyle.addLine(Html.fromHtml("at least <b>one word</b> should be bold!");
        }
        builder.setStyle(inboxStyle);
        builder.setNumber(messages.size());
    }
} 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-02-09T16:03:51.820

你不需要使用`fromHtml`. 我过去遇到过问题`fromHtml`（当您显示的内容来自用户时，代码注入可能会导致丑陋的事情）。此外，我不喜欢将格式元素放入其中`strings.xml`（如果您使用服务进行翻译，它们可能会搞砸您的 HTML 标签）。

该`addLine`方法与大多数在通知（`setTicker`、`setContentInfo`、`setContentTitle`等）中设置文本的方法一样，都将 a`CharSequence`作为参数。

所以你可以通过一个`Spannable`. 假设您想要“**粗体**和*斜体*。”，您可以这样格式化（当然不要硬编码位置）：

```
Spannable sb = new SpannableString("Bold this and italic that.");
sb.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), 0, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
sb.setSpan(new StyleSpan(android.graphics.Typeface.ITALIC), 14, 20, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
inboxStyle.addLine(sb); 
```

现在，如果您需要使用本地化字符串动态构建字符串，例如“今天是**[DAY]**，早上好！”，请将带有占位符的字符串放入`strings.xml`：

```
<string name="notification_line_format">Today is %1$s, good morning!</string> 
```

然后这样格式化：

```
String today = "Sunday";
String lineFormat = context.getString(R.string.notification_line_format);
int lineParamStartPos = lineFormat.indexOf("%1$s");
if (lineParamStartPos < 0) {
  throw new InvalidParameterException("Something's wrong with your string! LINT could have caught that.");
}
String lineFormatted = context.getString(R.string.notification_line_format, today);

Spannable sb = new SpannableString(lineFormatted);
sb.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), lineParamStartPos, lineParamStartPos + today.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
inboxStyle.addLine(sb); 
```

你会得到“今天是**星期天**，早上好！”，据我所知，它适用于所有版本的 Android。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T13:07:57.720

你的代码在我的带有 Android 4.1.1 的三星 S3 上运行起来就像一个魅力。你用的是什么安卓版本？

```
import android.app.Activity;
import android.app.NotificationManager;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.NotificationCompat;
import android.text.Html;
import android.view.Menu;

public class MainActivity extends Activity {

    private final int ID = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                this).setSmallIcon(R.drawable.ic_launcher);
        NotificationCompat.InboxStyle inboxStyle = new NotificationCompat.InboxStyle();
        inboxStyle.addLine(Html
                .fromHtml("<i>italic</i> <b>bold</b> text works"));
        mBuilder.setStyle(inboxStyle);
        mBuilder.setNumber(1);

        NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        mNotificationManager.notify(ID, mBuilder.build());
    }

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-25T12:35:21.983

我为此制作了辅助方法：

```
private final StyleSpan mBoldSpan = new StyleSpan(Typeface.BOLD);

private SpannableString makeNotificationLine(String title, String text) {
    final SpannableString spannableString;
    if (title != null && title.length() > 0) {
        spannableString = new SpannableString(String.format("%s  %s", title, text));
        spannableString.setSpan(mBoldSpan, 0, title.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    } else {
        spannableString = new SpannableString(text);
    }
    return spannableString;
} 
```

像这样使用：

```
inboxStyle.addLine(makeNotificationLine("UserXYZ", "How are you?")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-26T18:37:45.807

这是最简单的解决方案

*它不使用`InboxStyle`，因为在我的情况下我不需要它*

* * *

```
CharSequence boldUsernameMessage = Html.fromHtml("<b>@" + username +"</b> " + message);

NotificationCompat.Builder builder = new NotificationCompat.Builder(getApplicationContext())
    .setContentText(boldUsernameMessage)
    .setStyle(new NotificationCompat.BigTextStyle().bigText(boldUsernameMessage)) // Makes it expandable to show the message
    .build(); 
```

**结果**

[![在此处输入图像描述](../Images/83e957e9459b7c6b763e05368c1fb1a8.png)](https://i.stack.imgur.com/M5bLU.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-14T20:00:02.043

对于粗体文本，您应该使用`<strong>`标签。您的代码没有任何问题。换成. `<b>`_`<strong>`

编辑：您应该将代码更改为：

```
NotificationCompat.InboxStyle inboxStyle = new NotificationCompat.InboxStyle();
inboxStyle.setBigContentTitle("title");
inboxStyle.setSummaryText("summarytext");
// fetch push messages
synchronized (mPushMessages) {
    HashMap<String, PushMessage> messages = mPushMessages.get(key);
    if (messages != null) {
        for (Entry<String, PushMessage> msg : messages.entrySet()) {
            inboxStyle.addLine(Html.fromHtml("at least <strong>one word</strong> should be bold!");
        }
        builder.setStyle(inboxStyle);
        builder.setNumber(messages.size());
    }
} 
```

# android - 带有 DialogFragments 的向导：为什么需要两次单击后退按钮才能从 Backstack 中弹出 Dialog？

> ID：14602084
> 
> 赞同：1
> 
> 时间：2013-01-30T10:44:22.033
> 
> 标签：android, back-button, android-dialogfragment, back-stack

我想将一系列 DialogFragments 显示为向导。我用以下代码展示第一个：

```
DialogFragment newFragment = ConnectDialog.newInstance(Type.SELECT_EVENT);
newFragment.show(getFragmentManager(), "connect"); 
```

要从第一个对话框切换到第二个对话框，我使用以下代码：

```
FragmentTransaction transaction = getFragmentManager().beginTransaction();
DialogFragment newFragment = ConnectDialog.newInstance(Type.SELECT_ACTION);
transaction.remove(ConnectDialog.this);
transaction.add(newFragment, ConnectDialog.this.getTag());
transaction.addToBackStack(null);
transaction.commit(); 
```

`OnClickListener`这段代码在`ConnectDialog`一个子类中调用`DialogFragment`。

当显示第二个对话框时，必须单击两次硬件后退按钮才能看到第一个对话框。我希望，在单击一个后退按钮后再次显示第一个对话框！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-28T13:02:43.080

不知道为什么，我遇到了同样的情况，我通过替换`dialog.dismiss()`来解决这个问题`fragmentManager.popBackStack();`

# c# - 通过单击获取对象 c# Windows 8

> ID：14602086
> 
> 赞同：1
> 
> 时间：2013-01-30T10:44:22.993
> 
> 标签：c#, object, windows-8, microsoft-metro

对不起，我是 C# 的新手，我到处找，即使看起来很容易也找不到。我想通过单击来获取对象，但我不知道该怎么做。

xaml 中的一个简单按钮：

```
<TextBlock 
         Text="{Binding ProjectName}"
         VerticalAlignment="Center" Tapped="On_Tapped_Project"/> 
```

我使用一个简单的功能：

```
 private void On_Tapped_Project(object sender, TappedRoutedEventArgs e)
    {
        this.Frame.Navigate(typeof(NoteFolders), MyProjects[3]);
    } 
```

但我想有具体的项目，如`MyProjects[x] x=(click Project)`.

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:49:06.827

试试这个

```
var element = (sender as FrameworkElement);
  if (element != null)
  {
    var project = element.DataContext as Project;
    if (project != null)
    {
      //Implementation
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:48:39.503

您需要将事件 OriginalSource 转换为您的类型（例如项目）：

```
this.Frame.Navigate(typeof(NoteFolders), (Project) e.OriginalSource); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:48:48.360

您可以将项目 ID 存储在控件的标记属性中

```
<TextBlock 
    Text="{Binding ProjectName}" Tag="{Binding ProjectID}"
    VerticalAlignment="Center" Tapped="On_Tapped_Project"/> 
```

您可以通过访问标签属性来恢复它

```
private void On_Tapped_Project(object sender, TappedRoutedEventArgs e)
{
    var projectID = ((TextBlock)sender).Tag as int;
    Frame.Navigate(typeof(NoteFolders), MyProjects[projectID]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T17:59:57.023

```
private void On_Tapped_Project(object sender, TappedRoutedEventArgs e)
{
    var projectID = ((TextBlock)sender).Tag as int;
    Frame.Navigate(typeof(NoteFolders), MyProjects[projectID]);
} 
```

是一种方法，但更推荐这样做：

```
private void On_Tapped_Project(object sender, TappedRoutedEventArgs e)
{
    var projectID = (sender as TextBlock).Tag as int;
    Frame.Navigate(typeof(NoteFolders), MyProjects[projectID]);
} 
```

“sender as ElementType”是正确的方法来转换发件人，其他方法可能会导致小问题，总是做最好的代码，永远不要想为什么会出错。

# javascript - 在javascript中居中整页背景图像

> ID：14602090
> 
> 赞同：-2
> 
> 时间：2013-01-30T10:44:28.653
> 
> 标签：javascript, jquery

我正在使用此链接中的代码[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

```
 <script>
        $(function() {   

              var theWindow        = $(window),
                  $bg              = $("#bg"),
                  aspectRatio      = $bg.width() / $bg.height();

              function resizeBg() {

                if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
                    $bg
                      .removeClass()
                      .addClass('bgheight');

                } else {
                    $bg
                      .removeClass()
                      .addClass('bgwidth');
                }

                $bg.style.marginTop = (-theWindow.height() / 2) + 'px';
                $bg.style.marginLeft = (-theWindow.width() / 2) + 'px';

              }

              theWindow.resize(function() {
                resizeBg();
              }).trigger("resize");

            });
    </script>
    <style>
    #bg { position: fixed; top: 0; left: 0; z-index:-2;}
    .bgwidth { width: 100%; }
    .bgheight { height: 100%; }
    </style>
    <body>
       <div id="caseStudies">
            <img src="images/caseStudy01.jpg" alt="Case Study 1" id="bg">
        </div>
</body> 
```

但我想将背景图像居中。我已经尝试使用以下代码：

```
$bg.style.marginTop = (-theWindow.height() / 2) + 'px';
$bg.style.marginLeft = (-theWindow.width() / 2) + 'px'; 
```

这是行不通的。我是否引用了正确的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:51:32.340

我认为你应该试试这个：

```
 $bg.style.marginTop = ($bg.height()/2-theWindow.height() / 2) + 'px';
    $bg.style.marginLeft = ($bg.width()/2-theWindow.width() / 2) + 'px'; 
```

# unity3d - 在 iOS 6.1 中，当使用 storeKit 插件时，crash

> ID：14602091
> 
> 赞同：1
> 
> 时间：2013-01-30T10:44:35.603
> 
> 标签：unity3d

在`iOS 6.1`中，当我使用`storeKit plugin`时，当网络不可用或其他严重情况发生时，我会崩溃。

这是堆栈：

```
 StoreKitManager request : didFailWithError : UnitySendMessage strlen 
```

我想在`iOS 6.1`，`strlen`论据是`nil`。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:33:35.127

我对 prime31 插件有同样的问题。

您需要更新您的 StoreKit 插件 - prime31 修复了它。（prime 在 2013 年 1 月 30 日写道：“-仅适用于 iOS 6.1 的解决方法，即 Apple 在没有互联网连接时偶尔会发送空错误对象”）

# sql - 检查 SQL Server 中的 URL 语法有效性

> ID：14602099
> 
> 赞同：0
> 
> 时间：2013-01-30T10:45:03.367
> 
> 标签：sql, sql-server

SQL Server (2005+) 查询/过程中是否有办法检查 URL 在语法上是否正确？我不想在 SQL Server 中使用该 URL 做任何与网络相关的事情，但我只需要从语法方面知道它是否有效。

PS：我知道有一些方法可以嵌入 CLR 库，因此可以使用 .net 方法进行此类验证，但我想在不使用这些外部内容的情况下对其进行检查。

# jquery - jquery 文件上传 - 有多个 upload_dir

> ID：14602100
> 
> 赞同：0
> 
> 时间：2013-01-30T10:45:04.903
> 
> 标签：jquery, file-upload, directory, laravel

我正在使用 Jquery 文件上传插件，特别是这个： [http ://bundles.laravel.com/bundle/jUpload](http://bundles.laravel.com/bundle/jUpload)

我希望能够为不同的网页设置不同的upload_dir。这可能吗？如果是这样，如何根据不同的网页要求设置upload_dir？

它目前在 settings.php 中设置，尽管这些值在插件之间共享（这肯定是目的）。

```
upload_dir = '/users/folder1/files.txt'; //web page 1
upload_dir = '/users/folder2/files.txt'; //web page 2 
```

关于使上述成为可能的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:27:33.343

我已设法解决此问题，如下所示：

1) 为每个网页创建一个单独的 main.js 文件，例如 main.js、main.js 2) 创建一个单独的设置文件（尽管这不是严格要求） 3) 在从设置中获取值后在我的路由中运行时文件中，我将页面特定的“upload_dir”添加到 $options 数组中，就在实例化 UploadHandler 之前。

就是这样:)

# java - 如何使用用户密码以编程方式打开 PDF

> ID：14602102
> 
> 赞同：0
> 
> 时间：2013-01-30T10:45:06.400
> 
> 标签：java, pdf, jasper-reports, password-protection

这与我的[另一个问题有关](https://stackoverflow.com/questions/14581578/how-to-disable-function-keys-in-a-pdf-displayed-in-a-jsp-using-object-and-henc)......希望这个问题有解决方案。

要求是在浏览器中显示受密码保护的 PDF，但以编程方式传递用户密码。我使用 Jasper 创建 PDF 并设置用户密码如下：
exporter.setParameter(JRPdfExporterParameter.USER_PASSWORD, userPassword);

一旦创建 PDF，它就必须显示在屏幕上。在浏览器中显示时，不应提示用户输入密码，因此密码应由应用程序提供。但是，如果用户下载 PDF 然后尝试打开它，则应提示他输入密码.
[编辑]：我正在寻找一种不涉及许可工具的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-14T17:33:43.647

您可以使用 PDF.JS 库打开受密码保护的 PDF。

```
PDFJS.getDocument({ url: pdf_url, password: pdf_password }).then(function(pdf_doc) {
    // success
}).catch(function(error) {
    // incorrect password

    // error is an object having 3 properties : name, message & code
}); 
```

我已经写了一篇关于它的博客文章，还包含一个演示。这是链接：[http ://usefulangle.com/post/22/pdfjs-tutorial-2-viewing-a-password-protected-pdf](http://usefulangle.com/post/22/pdfjs-tutorial-2-viewing-a-password-protected-pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:24:46.767

您可以查看 PDF.js，这是一个基于开源客户端的 PDF 渲染器，它也支持加密的 PDF。 [http://mozilla.github.com/pdf.js/](http://mozilla.github.com/pdf.js/)

这意味着您必须将密码放在javascript中的某个位置，因此您必须伪装它，但它应该可以解决问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:32:57.040

我不确定这是否可行。在浏览器上，pdf 由插件（通常是 Adob​​e Reader 插件）打开。除了 Adob​​e Reader 之外，还有其他品牌。Chrome 有它自己的插件。

在浏览器上，当它检测到任何 PDF 文件时——渲染插件会接管——这是特定于浏览器的。你几乎没有任何控制权。

简单的替代方法是在网页中显示相同的内容 - 如果内容敏感，可能是模式窗口，并提供下载受密码保护的 pdf 文件的链接

我的2c

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-12T06:08:57.177

您可以使用 mozilla 的 pdf.js 来呈现受密码保护的 PDF。下面的 url 将提示输入密码，直到给出正确的密码。pdf 的密码是“test”。

[http://learnnewhere.unaux.com/pdfViewer/passwordviewer.html](http://learnnewhere.unaux.com/pdfViewer/passwordviewer.html)

这是提示密码的示例代码

```
pdfJs.onPassword = function (updatePassword, reason) { 
      if (reason === 1) { // need a password
            var new_password= prompt('Please enter a password:');
            updatePassword(new_password);
        } else { // Invalid password
            var new_password= prompt('Invalid! Please enter a password:');
            updatePassword(new_password);
        }
   }; 
```

如果您想在密码尝试不成功时关闭密码提示，您可以删除 else 部分（// 无效密码）。

您可以从这里获取完整代码[https://github.com/learnnewhere/simpleChatApp/tree/master/pdfViewer](https://github.com/learnnewhere/simpleChatApp/tree/master/pdfViewer)

# php - 在mysql中存储数组数据

> ID：14602106
> 
> 赞同：0
> 
> 时间：2013-01-30T10:45:16.503
> 
> 标签：php, mysql

我是 PHP 和 MySQL 的新手，希望能得到您的帮助。我有一个表，它根据用户选择的选项数量生成几行。我想在用户按下提交按钮后将内容存储在数据库表中。由于我不知道用户将选择多少选项以及将生成多少行，所以我不知道如何编写将其存储在我的数据库表中的 SQL 代码。

这是生成表格的代码

```
for($x=0;$x<$N; $x++) {

        echo nl2br("<td><textarea name=art[] rows=10 cols=30></textarea></td><td><textarea name=science[] rows=10 cols=30></textarea></td></textarea></td><td><textarea name=method[] rows=10 cols=30></textarea></td><td><textarea name=criteria[] rows=10 cols=30></textarea></td></tr>"); 
} 
```

从表中获取数据

```
for($i = 0; $i <$N; $i++){
    $data[] = array(($art[$i]), ($science[$i]), ($method[$i]), ($criteria[$i]));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:04:07.723

您可以合并（内爆）所有值并存储到表中。在检索时拆分（爆炸）值。

```
Store : 
$optionsVal = implode(",", $data);

Retrieve :
$data = explode(",", $optionsVal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:48:56.637

我会规范这个设计，并有一个 USER 和 OPTION 表，它们之间存在一对多的关系。以这种方式进行选择的行数与您的行数一样多。您可以稍后查询以查看有多少 USER 行选择了 OPTION X。

# c# - 如何让这个神经网络训练函数更快

> ID：14602108
> 
> 赞同：1
> 
> 时间：2013-01-30T10:45:22.740
> 
> 标签：c#, multithreading, neural-network

变量输入是一个锯齿状数组，即 90 x 600。

理想也是 90 x 1 的锯齿状阵列

```
BeginTraining()
{
    FeedforwardNetwork network = new FeedforwardNetwork();
    network.AddLayer(new FeedforwardLayer(600));
    network.AddLayer(new FeedforwardLayer(1000));
    network.AddLayer(new FeedforwardLayer(90));
    network.Reset();

    // train the neural network
    Train train = new  HeatonResearchNeural.Feedforward.Train.Backpropagation.Backpropagation(network, input, ideal,
                0.7, 0.9);

    int epoch = 1;

    do
    {
        lblNoEpochs.Text= epoch.ToString();
        lblNoEpochs.Update();
        train.Iteration();
        lblPcError.Text = train.Error.ToString();
        lblPcError.Update();
        epoch++;
    } while((epoch < 5000) && (train.Error > 0.001));

        // test the neural network
        for (int i = 0; i < input.Length; i++)
        {
            //testing code
        } 
```

每个 epoch 至少需要 5 分钟。

如何减少这个时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:08:01.190

好吧，在我看来，你可以：

1.  [运行分析器](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)
2.  找出什么是慢的
3.  优化

根据需要重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:11:11.557

我认为真正的问题是 - do/while 是否可以并行。

只要我知道训练波相互依赖，那么下一个取决于前一个的结果。因此订购是绝对必须的。

所以我认为答案是 - 这不能更快。

# jquery - 2 jquery datepickers：限制日期范围

> ID：14602109
> 
> 赞同：1
> 
> 时间：2013-01-30T10:45:25.597
> 
> 标签：jquery, datepicker, jquery-ui-datepicker

谁能告诉我如何根据另一个选择器的选择来限制任一选择器的日期范围。例如，我有一个 DateFrom 和一个 DateTo 选择器。我如何确保日期范围之间始终存在 5 天的差距？

```
 $( "#from" ).datepicker({
                dateFormat: 'd-M-y',
                defaultDate: null,
                changeMonth: true,
                minDate: 0,
                numberOfMonths: 1,
                onClose: function( selectedDate ) {
                    $( "#to" ).datepicker( "option", "minDate", selectedDate );
                }
            });
            //jquery date picker configuration
            $( "#to" ).datepicker({
                dateFormat: 'd-M-y',
                defaultDate: null,
                changeMonth: true,
                minDate: 0,
                numberOfMonths: 1,
                onClose: function( selectedDate ) {
                    $( "#from" ).datepicker( "option", "maxDate", selectedDate );
                }
            }); 
```

我的两个 jquery datepicker 选项都像上面那样。在 Onclose 函数上，我尝试添加“+ 5”，但这似乎不起作用。如果有人能帮助我感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T16:14:50.557

尝试更改此行：

```
$( "#to" ).datepicker( "option", "minDate", selectedDate ); 
```

对此：

```
$( "#to" ).datepicker( "option", "minDate", +5, selectedDate ); 
```

它解决了我遇到的类似问题

# eclipse-plugin - 从工作区开始跟踪更改

> ID：14602112
> 
> 赞同：0
> 
> 时间：2013-01-30T10:45:28.010
> 
> 标签：eclipse-plugin

我有一个 Eclipse 插件。我需要跟踪从插件或插件外部更改/创建的文件。我在插件的激活器中添加了资源更改监听器。但这只会在插件被调用后跟踪更改。同时，如果从其他菜单进行了任何更改，我将无法跟踪它们。有什么方法可以处理在激活我的插件之前发生的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:42:54.103

Eclipse 没有监听器，您可以在插件初始化之前添加它来跟踪更改。您可以添加一个 IStartup 扩展来尽早注册您的资源更改侦听器，但这些被认为是邪恶的（这类似于在 Windows 上的 Startup 文件夹中放置一些东西，除非您知道要使用它，否则为什么要启动某些东西？）。

但是，听起来您可以使用 IResource API 并通过保留插件可以控制的文件的索引（可能使用校验和）来解决此问题。我会在你的插件启动时添加一个系统作业来索引文件并将你的模型与磁盘上的内容进行协调。

另一个想法是，如果有问题的资源将进入存储库，您可能能够捎带团队提供者。

# jquery - 更改 img 的 src 和 fadin 在 FF 中效果不佳

> ID：14602113
> 
> 赞同：0
> 
> 时间：2013-01-30T10:45:29.823
> 
> 标签：jquery, firefox, fade

我做了一些代码淡出图像，更改`src`属性，然后`fadeIn()`是新图像。这在 Chrome 中可以正常工作，但在 FireFox 中不行。

这是jQuery代码：

```
var myInterval=setInterval(function(){myChanging()},5000);

function myChanging () {
    var newUrl = urlBaseBackground + currentIndex + ".jpg";
    var image = jQuery('#bckimg');
    image.fadeOut(1000, function () {
                    image.attr('src', newUrl);
                    image.fadeIn(1000);
                });
    currentIndex ++;
    if (currentIndex > totalCountBackgroundImages-1)
        currentIndex = 0;
} 
```

在身体里 ：

```
 <img id="bckimg" 
      style="position:fixed;width:100%;height:100%;left:0px;top:0px;z-index:-1;" 
      src="/back/0.jpg" /> 
```

FF 在显示时改变图像，而不是在淡入和淡出之间。我在部件之前尝试了 setTimeout ，`'.attr("src"...'`但它也没有工作。

任何线索任何人？

编辑：忘了提到我在启动淡入淡出之前使用另一个功能加载所有图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:27:11.963

我认为你应该采取连锁行动：

```
image.fadeOut(1000).attr('src', newUrl).fadeIn(1000); 
```

或者试试[promise()](http://api.jquery.com/promise/)函数：

```
 image.fadeOut(1000);
 image.promise().done(function()
 {
    $(this).attr('src', newUrl).fadeIn(1000);
 }); 
```

# rest - 将数组作为查询参数发送到休息 WS (nullpointerException)

> ID：14602117
> 
> 赞同：1
> 
> 时间：2013-01-30T10:45:45.737
> 
> 标签：rest, playframework-2.0

我需要*在 playframework 2 中调用一个 rest web 服务，*并且我需要发送一个**查询参数**，它是一个**数组**。在常规的 html 中，我会像这样发送它：

```
GET http://host.com?a=1&a=2&a=3 
```

但是当我尝试使用 playframework 2 WS api 执行此操作时，我会执行以下操作：

```
Map<String,String[]> paramMap = new HashMap<String, String[]>();
paramMap.put("a",new String[]{"value1","value2"});

WS.WSRequestHolder holder = WS.url("http://host.com");

Set<String> keys = paramMap.keySet();
for (int i = 0; i < paramMap.get(key).length; i++)
{
    holder.setQueryParameter(key, paramMap.get(key)[i]);
} 
```

第一次*setQueryParamater()*到达时，一切都很完美，但第二次我得到**NullPointerException**并且*paramMap.get(key)[i]*不为空。这可能吗？有什么解决方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:04:59.320

在常规 html 中，您*需要*像这样发送它：

```
GET http://host.com?a=1&a=2&a=3 
```

使用 & 来分隔查询字符串中的参数，而不是逗号 (,)

编辑：抱歉忘记输入：就像你试图在循环中做的那样，你不应该有同名的字段。您应该将其更改为：

```
http://host.com?a1=value1&a2=value2 
```

我不知道这是否会导致您面临 NullPointerException。但即使我不建议你改变你的实现来为每个字段保留一个值（键，值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:41:22.567

好的，这似乎是 play-framework 中的一个错误，但在 2.1 版本中解决了。

[https://play.lighthouseapp.com/projects/82401/tickets/360-bug-in-wsjava-setqueryparameter-leads-to-npe-when-adding-a-query-parameter-twice](https://play.lighthouseapp.com/projects/82401/tickets/360-bug-in-wsjava-setqueryparameter-leads-to-npe-when-adding-a-query-parameter-twice)

# opencv - OpenCV 中 minEnclosureCircle 的意外结果

> ID：14602124
> 
> 赞同：4
> 
> 时间：2013-01-30T10:46:17.747
> 
> 标签：opencv, computer-vision, geometry, minimum

我最近使用了 OpenCV (2.4.2) 的 minEnclosureCircle 函数，因为我需要测量一团点的直径。

过了一会儿，我意识到结果不正确，所以我决定编写一个小程序来计算一组非常小的点的直径。

我针对以下功能测试了该功能：

*   1个单点
*   连续 2 - 4 个点
*   仅由4个角点组成的不同大小的正方形

在下表中，您可以看到我的测试结果：

```
Note         Diameter           Center                                         Points
1x1             2.000       (1.0, 1.0)                                       [[1, 1]]
2x1             2.000       (1.0, 1.5)                               [[1, 1], [1, 2]]
3x1             2.060       (1.0, 2.0)                       [[1, 1], [1, 2], [1, 3]]
4x1             3.090       (1.0, 2.5)               [[1, 1], [1, 2], [1, 3], [1, 4]]
2x2             2.000       (1.5, 1.5)               [[1, 1], [1, 2], [2, 1], [2, 2]]
3x3             2.913       (2.0, 2.0)               [[1, 1], [1, 3], [3, 1], [3, 3]]
4x4             4.370       (2.5, 2.5)               [[1, 1], [1, 4], [4, 1], [4, 4]]
6x6             7.283       (3.5, 3.5)               [[1, 1], [1, 6], [6, 1], [6, 6]]
8x8            10.196       (4.5, 4.5)               [[1, 1], [1, 8], [8, 1], [8, 8]]
9x9            11.653       (5.0, 5.0)               [[1, 1], [1, 9], [9, 1], [9, 9]]
16x16          21.850       (8.5, 8.5)           [[1, 1], [1, 16], [16, 1], [16, 16]]
10x10          13.110       (5.5, 5.5)           [[1, 1], [1, 10], [10, 1], [10, 10]]
100x100       144.207     (50.5, 50.5)       [[1, 1], [1, 100], [100, 1], [100, 100]]
1000x1000    1455.183   (500.5, 500.5)   [[1, 1], [1, 1000], [1000, 1], [1000, 1000]] 
```

我已经看到该函数不会返回小于 1 的半径，所以我得到的最小直径是 2.0。

除此之外，该函数总是返回比我预期更大的半径。例如，10x10 正方形的半径约为 12.726 而不是 13.110。误差随着正方形的大小而增加：对于 1000x1000 的正方形，我希望是 1412.5 而不是 1455。

实际上，我意识到相对误差始终在 3% 左右。

我该如何解释这种奇怪的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-06T13:36:48.913

我相信，子函数中有一个因子 1.03 是错误的`icvFindEnslosingCicle4pts_32f`——它乘以半径，但不再除以。[我在http://code.opencv.org/issues/3362](http://code.opencv.org/issues/3362)打开了一个带有简单修复的错误报告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:37:09.460

为了完整起见，有几种算法实现可以解决*最小包围球*问题。

*   对于 2D 和 3D，[Gärtner 的实现](http://www.inf.ethz.ch/personal/gaertner/miniball.html)（也在此问题的另一个答案中提到）可能是最快的。

*   对于更高的维度（比如高达 10,000），请查看[https://github.com/hbf/miniball](https://github.com/hbf/miniball)，这是 Gärtner、Kutz 和 Fischer 的算法实现（注意：我是其中的一员） -作者）。

*   对于非常非常高的维度，*核心集*（近似）算法会更快。

**注意：**如果您正在寻找一种算法来计算 spheres 的最小封闭球体*，您将在*[Computational Geometry Algorithms Library (CGAL)](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Bounding_volumes/Chapter_main.html)中找到 C++ 实现。（您不需要使用所有 CGAL；只需提取所需的头文件和源文件。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:27:32.260

[我尝试使用另一个名为Miniball](http://www.inf.ethz.ch/personal/gaertner/miniball.html)的库来解决同样的问题。

使用 Miniball 获得的结果是正确的。在这一点上，我猜测中使用的算法 `minEnclosingCircle`包含一些错误。

# php - AFNetworking multipartFormRequestWithMethod 适用于模拟器，但不适用于设备

> ID：14602139
> 
> 赞同：1
> 
> 时间：2013-01-30T10:46:51.840
> 
> 标签：php, ios, web-services, afnetworking

我尝试使用 AFNetworking 框架将图像数据发布到我的 Web 服务。使用模拟器运行我的应用程序时，一切都很好，但是当我在 iPad 上运行应用程序时，Web 服务没有收到任何图像数据（$_FILES 返回 nil）。这可能是 AFNetworking 中的错误吗？

客户端代码：

```
- (NSMutableURLRequest *)POSTRequestForImage:(NSString *)imagePath ForPrepfile:(NSString *)objectId 
{
    NSData *imageData = UIImagePNGRepresentation([UIImage imageWithContentsOfFile:imagePath]);
    NSURL *url = [[NSURL alloc] initFileURLWithPath:[imagePath stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    if (imageData == nil) {
        NSLog(@"no data");
    }
    NSString *imageName = [imagePath lastPathComponent];
    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:imageName, @"filename", objectId, @"objectId", nil];
    NSLog(@"imagename: %@", imageName);

    NSMutableURLRequest *request = [self multipartFormRequestWithMethod:@"POST" path:@"images" parameters:parameters constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData:imageData name:@"image" fileName:imageName mimeType:@"image/png"];
    }];
    NSLog(@"picture request fileurl: %@", url);
    return request;
} 
```

使用 SLIM 框架的 PHP 脚本：

```
$app->post('/images', function () use ($app) {
    $pa = new PrepAppDB();
    $out = $app->request()->post();

    // file upload
    $fileName = $_FILES['image']['name'];
    $tmpName  = $_FILES['image']['tmp_name'];
    $fileSize = $_FILES['image']['size'];
    $fileType = $_FILES['image']['type'];

if(move_uploaded_file($tmpName, $fileName))
   {
    $result = $pa->updateRow('image', $out);
    header("Content-Type: application/json");
    echo json_encode($result);
   } else {
     sendResponse(400, 'fail');
   }

}); 
```

我很感激任何帮助！

- - - - - - - - - - - - -编辑 - - - - - - - - - - - - --------

我测试了是否`$_FILES`为空，但事实并非如此。通过 iPad 发送图片时，我通过“$_FILES['image']['name']”获取文件名，但其他变量为空。我还测试了附加到我的请求中的图像数据，`appendPartWithFileData:`它似乎也可以。我真的没有头绪……没人能帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:25:09.083

愚蠢的我......问题是iPad上的图像尺寸太大，所以服务器不接受它;-)

# javascript - 正则表达式匹配天小时分钟

> ID：14602140
> 
> 赞同：-4
> 
> 时间：2013-01-30T10:47:00.030
> 
> 标签：javascript, regex

*我有一个代表持续时间的字符串。* 它可以像以下之一：

> **10d12h59m**
> 
> **10d12h**
> 
> **10天**
> 
> **12小时**
> 
> **70**

“d”前面的数字代表天，“h”前面的数字代表小时，“m”前面的数字代表分钟，如果它只是数字，则表示分钟。

我想要一个匹配该字符串的 javascript 正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:08:11.167

如果您只想检查它是否匹配：`/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/`

例子：

```
"10d12h59m".match(/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/); // Array ["10d12h59m"]
"10d12h".match(/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/); // Array ["10d12h"]
"10d".match(/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/); // Array ["10d"]
"12h".match(/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/); // Array ["12h"]
"70".match(/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/); //Array ["70"]

"foobar".match(/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/); // null
"10d50m".match(/^(?:\d+d(?:\d+h(?:\d+m)?)|\d+[dh]?)$/); // null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:49:31.183

试试这个：

```
/(\d\d[dhm]?){1,3}/ 
```

这将匹配您的所有示例。

这个怎么运作：

```
# \d\d   - Match 2 digits
# [dhm]? - followed by a optional d, h, or m.
# {1,3}  - and make sure there's 1, 2 or 3 of the previous. 
```

如果您还想传递一位数或 99 以上的数字，请使用此正则表达式：

```
/(\d+[dhm]?){1,3}/
//  ^ Note the added +, instead of \d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:53:12.983

使用这个正则表达式`(\d+[dmh]?)+`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:53:32.087

试试这个：

```
/(\d+d)?(\d+h)?(\d+m?)?/ 
```

在每个匹配的组上，您都可以轻松申请`parseInt(…, 10)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:59:58.547

要将字符串解析为小时、天和分钟：

```
function parseDuration(s) {
  var m = /(?:(\d+)d)?(?:(\d+)h)?(?:(\d+)m?)?/.exec(s);
  return {
    days: parseInt(m[1], 10) || 0,
    hours: parseInt(m[2], 10) || 0,
    minutes: parseInt(m[3], 10) || 0
  };
} 
```

演示：http: [//jsfiddle.net/Guffa/9hj5F/](http://jsfiddle.net/Guffa/9hj5F/)

### 编辑：

要验证字符串，您可以使用具有三种不同变体（dhm、dh 和 d 都可以是相同变体，带有可选部分）的模式进行基本验证，例如：`^(\d+d(\dh(\d+m)?)?|\d+h|\d+m?)$`.

如果您还想限制这些值，例如，您可以使用`[0-5]?\d`而不是`\d+`将值限制为 0 到 59，或者`[0-5]\d`需要两位数，即 00-59。

# php - 将两个正则表达式合二为一

> ID：14602141
> 
> 赞同：0
> 
> 时间：2013-01-30T10:47:01.350
> 
> 标签：php, regex

我想将两个正则表达式合二为一。

```
$exp1 =/<area.*?href="([^"]*)".*?[^>]*>/s;
$exp2=/<a.*?href="([^"]*)".*?[^>]*>/s'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:49:47.853

首先，在接触这些表达式之前，我会认真考虑使用适当的 HTML 解析器。

也就是说，你所追求的可能是这样的：

```
/<(?:a|area).*?href="([^"]*)".*?[^>]*>/s 
```

该表达式是和`(?:a|area)`之间的交替；它被包裹在里面以对交替进行分组*并将*其视为非捕获子模式。`a``area``(?: ... )`

 *另见：[子模式](http://www.php.net/manual/en/regexp.reference.subpatterns.php)，[交替](http://www.php.net/manual/en/regexp.reference.alternation.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:49:43.467

我认为应该这样做：

```
$exp =/<(?:area|a).*?href="([^"]*)".*?[^>]*>/s; 
```

顺便说一句，尝试[使用 regex 解析 [X]HTML](https://stackoverflow.com/a/1732454/1048572)是个坏主意。*

# ios - 如何监控 iOS 磁盘空间变化？

> ID：14602142
> 
> 赞同：-2
> 
> 时间：2013-01-30T10:47:01.357
> 
> 标签：ios, notifications, filesystems

我希望我的应用程序知道磁盘可用空间何时更改并更新我的视图。系统有通知吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T12:55:33.967

有点跑题了……但感觉有必要写这个。

## 为什么有关磁盘空间更改的通知不好？

想想看。有多个问题使得知道“可用”或“使用”空间成为相当强烈的临时/时间点快照，因此更适合被*查询*而不是被*通知*。

文件系统（和/或数据库）是“磁盘”（我们称“存储设备”，在本文中称为“磁盘”）之上的抽象层。这尤其意味着，假设如下：

*   已用磁盘空间等于（甚至接近）所有文件大小的总和
*   可用磁盘空间可以完全分配给新创建的文件，或者现有文件可以按该数量增长
*   文件的大小变化（增长或截断）将反映在可用/已用磁盘空间的相等变化中
*   可用磁盘空间是一个准确/确切可知的数量
*   总磁盘空间不变

不*正确*。

这是因为文件系统可以自由地实现以下技术：

1.  压缩 - 使已用空间小于文件大小的总和，并使确切的可用空间不可知，因为无法预测未来要写入的数据的压缩率
2.  重复数据删除 - 类似效果（在已用/可用磁盘空间上）
3.  快照 - 使文件系统保留“已删除”的数据，因此即使您认为您释放了文件以前使用的空间，磁盘空间也不会“释放”
4.  稀疏文件 - 旧技术，可以称之为“零压缩”，即如果写入的所有内容都是零，则不分配磁盘空间
5.  空间预留——文件系统可以留出一定数量的空间供特权应用程序/用户使用，和/或仅通过特定接口使用
6.  在线文件系统大小调整 - 可能会增加/减少文件系统可用的磁盘总量
7.  实时碎片整理 - 可能合并使用的空间
8.  块重新分配 - 对于闪存设备，可能会导致擦除块级别的合并，并允许闪存 FTL 释放空间
9.  日志滚动 - 可能会根据日志中的事务类型释放或增加使用量
10.  ……还有什么。

此外，虽然文件大小是字节精确的，但磁盘分配以更大的数量（块/扇区/条带/...）进行管理。

因此，文件系统可以向应用程序世界呈现完全静态的（从哪些文件和目录可见以及它们包含什么的角度）视图，同时例如运行在线重复数据删除/压缩/碎片整理/...作业作为后台活动“将在存储和/或 CPU 能力允许的情况下不断更改“磁盘空间使用”统计信息。

现代文件系统（例如，许多在基于闪存的存储上运行）通常实现上述技术的重要子集，因此，如果它们实现一个接口，将*通知*“可分配磁盘空间”的每次更改，而不是仅报告可能无意义的数据，但由于它们的“正常”操作可能会引发大量此类通知，因此也会导致显着的性能损失。

**尔格：**

*不要期望得到通知*。轮询此信息 -以合理的时间间隔*明确查询。*不要让 CPU 受限，尤其是在移动设备上，并期望“令人惊讶”的结果，即没有任何明显用户操作的更改以及用户操作发生的更改。对检索到的数据持保留态度，不要从中得出太多结论。那是适合您的现代文件系统...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:05:51.407

不，系统没有发布任何通知。

但幸运的是，您可以自己监控剩余可用空间的大小，并在发现变化时做一些事情。

查看[如何检测 iPhone/iPad 设备上的总可用/空闲磁盘空间？](https://stackoverflow.com/questions/5712527/how-to-detect-total-available-free-disk-space-on-the-iphone-ipad-device)看看如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:57:28.740

您可以在此处参考此链接[如何检测 iPhone/iPad 设备上的总可用/可用磁盘空间？](https://stackoverflow.com/questions/5712527/how-to-detect-total-available-free-disk-space-on-the-iphone-ipad-device)

你可以试试这个。

```
-(unsigned)getFreeDiskspacePrivate {
    NSDictionary *atDict = [[NSFileManager defaultManager] attributesOfFileSystemForPath:@"/" error:NULL];
    unsigned freeSpace = [[atDict objectForKey:NSFileSystemFreeSize] unsignedIntValue];
    NSLog(@"%s - Free Diskspace: %u bytes - %u MiB", __PRETTY_FUNCTION__, freeSpace, (freeSpace/1024)/1024);

    return freeSpace;
} 
```

这也是

```
-(uint64_t)getFreeDiskspace {
    uint64_t totalSpace = 0.0f;
    uint64_t totalFreeSpace = 0.0f;
    NSError *error = nil;  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

    if (dictionary) {  
        NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
        NSNumber *freeFileSystemSizeInBytes = [dictionary objectForKey:NSFileSystemFreeSize];
        totalSpace = [fileSystemSizeInBytes floatValue];
        totalFreeSpace = [freeFileSystemSizeInBytes floatValue];
        NSLog(@"Memory Capacity of %llu MiB with %llu MiB Free memory available.", ((totalSpace/1024ll)/1024ll), ((totalFreeSpace/1024ll)/1024ll));
    } else {  
        NSLog(@"Error Obtaining System Memory Info: Domain = %@, Code = %@", [error domain], [error code]);  
    }  

    return totalFreeSpace;
} 
```

# jquery - JQuery 将类添加到 li 元素

> ID：14602148
> 
> 赞同：1
> 
> 时间：2013-01-30T10:47:10.270
> 
> 标签：jquery, html-lists

下面是我的代码

```
function getName(selectName, selectedValue) {
    var partices = $('#dk_container_'+selectName);
    var selectlbl = partices.find('.dk_label');
    var ul = partices.find('.dk_options_inner');

    $('li').each(function () {
        if ($('a', this).text() == selectedValue) {
            $(this).addClass('dk_option_current');
            selectlbl.html(selectedValue);
        }
        else {
            $(this).attr('class', '');
        }
    });
} 
```

问题是`$(this).addClass('dk_option_current');`。此特定行旨在在满足 if 条件`dk_option_current`的元素中插入一个类。`li`这`selectlbl.html(selectedValue);`条线工作正常。但是我想添加的类根本没有相应地添加。如有不妥请指出。

HTML

```
 <a class="dk_toggle" style="width: 300px;">
    <span class="dk_label"></span>
    </a>
    <div class="dk_options">
    <ul class="dk_options_inner">
    <ul class="dk_options_inner">
<li class="">
<a data-dk-dropdown-value=""> </a>
</li>
<li class="">
<a data-dk-dropdown-value="val1">Text1</a>
</li>
<li class="">
<a data-dk-dropdown-value="val2">Text2</a>
</li>
<li class="">
<a data-dk-dropdown-value="val3">Text3</a>
</li>
    </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:49:44.280

尝试这个：

```
function getName(selectName, selectedValue)
{
var partices = $('#dk_container_'+selectName);
 var selectlbl=partices.find('.dk_label');
 var ul=partices.find('.dk_options_inner');
 $('li').each(function () {
    var elem = $(this);
    if($('a',this).text()== selectedValue){

      elem.addClass('dk_option_current');
      selectlbl.html(selectedValue);
    }
    else{
      elem.attr('class','');
   }
 });
} 
```

# svn - 识别使用 SVNKit 执行合并的修订

> ID：14602161
> 
> 赞同：2
> 
> 时间：2013-01-30T10:47:46.233
> 
> 标签：svn, svnkit

使用 SVNKit 我可以浏览 SVN 分支的修订历史。我想确定在哪些修订中执行了合并。

我查看了 org.tmatesoft.svn.core.SVNLogEntry 文档，但找不到任何内容。是否有任何其他 API 可以在这里使用？

以下是我用来获取修订的代码片段

```
SVNRepositoryrepository = SVNRepositoryFactory.create(svnURL);
Collection<SVNLogEntry> entries = repository.log(new String[] { "" }, null, startRevision, endRevision, true, false); 
```

这给了我开始和结束修订之间的所有修订，现在我如何确定上述哪些修订是执行合并的修订。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:00:09.840

我试图弄清楚同样的事情。这是我到目前为止发现的内容： [SVNDiffClient.doGetMergedMergeInfo()](http://svnkit.com/javadoc/org/tmatesoft/svn/core/wc/SVNDiffClient.html#doGetMergedMergeInfo%28org.tmatesoft.svn.core.SVNURL,%20org.tmatesoft.svn.core.wc.SVNRevision%29)将路径和修订作为参数，并为您指定的修订之前的路径上发生的任何合并返回合并信息。在找出哪些修订是合并方面，您可以按顺序对每个修订进行尝试，并查看合并信息的显示位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:27:18.093

[SVNLogEntry.hasChildren()](http://svnkit.com/javadoc/org/tmatesoft/svn/core/SVNLogEntry.html#hasChildren%28%29)为我工作。可能需要更改使用 repository.log API 的方式来获取此 API 所需的附加信息以提供正确的结果。

# c# - WPF .NET3.5 C# 句柄对象问题

> ID：14602162
> 
> 赞同：0
> 
> 时间：2013-01-30T10:47:46.700
> 
> 标签：c#, .net, wpf, memory-leaks, wpf-controls

我的应用程序 WPF C#.NET 3.5 VS2008 在一台客户机器上遇到了一些问题。我的 App 在不同的 Windows 机器（XP、Vista 32/64、Win7 32/64）上安装了近 1000 次，到目前为止没有问题。

Win7 32 PC 上似乎只有一个有问题。

取决于当前活动的任务管理器概述：

1 - 活动：*程序已启动*

[http://i.stack.imgur.com/jA6j7.gif](http://i.stack.imgur.com/jA6j7.gif)（见图）

2 - 活动：*简单点击菜单项、按钮等*

[http://i.stack.imgur.com/e0erH.gif](http://i.stack.imgur.com/e0erH.gif)（见图）

*对象 USER*和*对象 GDI*运行到 10'000 并且应用程序抛出以下异常：

```
System.ComponentModel.Win32Exception The current process has used all of its system allowance of handles for Window Manager objects 

à MS.Win32.UnsafeNativeMethods.CreateWindowEx(Int32 dwExStyle, String lpszClassName, String lpszWindowName, Int32 style, Int32 x, Int32 y, Int32 width, Int32 height, HandleRef hWndParent, HandleRef hMenu, HandleRef hInst, Object pvParam)
   à MS.Win32.HwndWrapper..ctor(Int32 classStyle, Int32 style, Int32 exStyle, Int32 x, Int32 y, Int32 width, Int32 height, String name, IntPtr parent, HwndWrapperHook[] hooks)
   à System.Windows.Interop.HwndSource.Initialize(HwndSourceParameters parameters)
   à System.Windows.Interop.HwndSource..ctor(HwndSourceParameters parameters)
   à System.Windows.Window.SetTaskbarStatus()
   à System.Windows.Window.CreateAllStyle()
   à System.Windows.Window.CreateSourceWindowImpl()
   à System.Windows.Window.SafeCreateWindow()
   à System.Windows.Window.ShowHelper(Object booleanBox)
   à System.Windows.Window.Show()
   à System.Windows.Window.ShowDialog()
   à WPFControls.WPFMessageBox.Show(String title, String message, String details, WPFMessageBoxButtons buttonOption, WPFMessageBoxImage image)
   à MyApp.Prolog.Application_DispatcherUnhandledException(Object sender, DispatcherUnhandledExceptionEventArgs e)
   à System.Windows.Threading.Dispatcher.CatchException(Exception e)
   à System.Windows.Threading.Dispatcher.CatchExceptionStatic(Object source, Exception e)
   à System.Windows.Threading.ExceptionWrapper.CatchException(Object source, Exception e, Delegate catchHandler)
   à System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   à System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   à System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Boolean isSingleParameter)
   à System.Windows.Threading.Dispatcher.Invoke(DispatcherPriority priority, Delegate method, Object arg)
   à MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   à MS.Win32.UnsafeNativeMethods.SetWindowPos(HandleRef hWnd, HandleRef hWndInsertAfter, Int32 x, Int32 y, Int32 cx, Int32 cy, Int32 flags)
   à System.Windows.Window.SetupInitialState(Double requestedTop, Double requestedLeft, Double requestedWidth, Double requestedHeight)
   à System.Windows.Window.CreateSourceWindowImpl()
   à System.Windows.Window.SafeCreateWindow()
   à System.Windows.Window.ShowHelper(Object booleanBox)
   à System.Windows.Window.Show()
   à System.Windows.Window.ShowDialog()
   à WPFControls.WPFMessageBox.Show(String title, String message, String details, WPFMessageBoxButtons buttonOption, WPFMessageBoxImage image)
   à MyApp.Prolog.Application_DispatcherUnhandledException(Object sender, DispatcherUnhandledExceptionEventArgs e)
   à System.Windows.Threading.Dispatcher.CatchException(Exception e)
   à System.Windows.Threading.Dispatcher.CatchExceptionStatic(Object source, Exception e)
   à System.Windows.Threading.ExceptionWrapper.CatchException(Object source, Exception e, Delegate catchHandler)
   à System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   à System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)
   à System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Boolean isSingleParameter)
   à System.Windows.Threading.Dispatcher.Invoke(DispatcherPriority priority, Delegate method, Object arg)
   à MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   à MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   à System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   à System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   à System.Windows.Window.ShowHelper(Object booleanBox)
   à System.Windows.Window.Show()
   à System.Windows.Window.ShowDialog()
   à MyApp.Prolog.Prolog_Startup(Object sender, StartupEventArgs e) 0 0 0 
```

请问有人可以帮忙吗？

* * *

**更新 - 编辑**

我们的客户确实设置了一个新的干净（如他所说）Win 7 64 OS，但问题仍然存在。使用 WPF 应用程序似乎无法正常工作。

我还尝试在客户机器上使用 John Smith 的这篇文章 (msdn.microsoft.com/de-de/magazine/dd419663.aspx) 的 MVVM 演示应用程序。

当我尝试单击菜单项、按钮或在下拉列表中选择某些内容时，MVVM 演示应用程序也会崩溃。在文本字段中输入文本是可以的，但单击并选择确实会停止 MVVM 演示应用程序，并显示应用程序无法运行的错误。

这是我的应用程序的事件日志

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
    - <System>
        <Provider Name="Application Error" />
        <EventID Qualifiers="0">1000</EventID>
        <Level>2</Level>
        <Task>100</Task>
        <Keywords>0x80000000000000</Keywords>
        <TimeCreated SystemTime="2013-02-07T11:04:13.000000000Z" />
        <EventRecordID>2243</EventRecordID>
        <Channel>Application</Channel>
        <Computer>RSSec.Machine.local</Computer>
        <Security />
    </System>
    - <EventData>
        <Data>MyApp.exe</Data>
        <Data>2.0.16.0</Data>
        <Data>51136bd8</Data>
        <Data>unknown</Data>
        <Data>0.0.0.0</Data>
        <Data>00000000</Data>
        <Data>c000041d</Data>
        <Data>74494f0d</Data>
        <Data>ecc</Data>
        <Data>01ce0522d9d3bc67</Data>
        <Data>C:\Program Files (x86)\MyApp\MyApp.exe</Data>
        <Data>unknown</Data>
        <Data>1ad6d91f-7116-11e2-87c7-10604b689bfe</Data>
    </EventData>
</Event> 
```

有人可以再帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:36:16.297

从堆栈跟踪中可以看出，您的代码中至少存在一个问题。您已经为 Dispatcher.UnhandledException 事件编写了事件处理程序，并使用消息框显示了异常。如果此消息框已显示，您不要确保**避免这样做。**从跟踪中多次出现 MyApp.Prolog.Application_DispatcherUnhandledException() 可见。

所以这里有一些可能性，用户正在查看充满*一万个*消息框的屏幕。之后，当 Windows 拒绝允许您的程序再创建时，它拔掉了插头。

您还不知道真正的异常是什么样的。但它很可能是一些粗俗的东西，当调度程序循环运行时，它会一遍又一遍地抛出。您需要改进未处理的异常处理以获得崩溃的真正原因。 添加一个 bool 标志，指示显示消息框，并在 UnhandledException 再次触发并将标志设置为 true 时终止程序*。*并记录异常，这样您就可以找出引发了什么，而无需用户回读消息框所说的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:04:53.160

每个 Windows 平台都有一些句柄限制。较旧的有时甚至低至〜16000。较旧的甚至在屏幕上每 1 个控件（文本框、按钮）消耗 1 个句柄。较旧的有时甚至没有检查有时只打开一半窗口时出现的奇怪行为的限制。但是在任何地方，任何地方，它总是两件事之一：您的应用程序过于贪婪，只是因为错误UI 设计（只需尝试在 WinForms 中显示一个没有虚拟化的中继器，其中包含 100'000 行和一个按钮/文本编辑器！），或者您的应用程序通过正确地不释放 UI/IO/etc 项目而泄露了句柄。或者您尝试一次打开数百万个文件，但这很明显而且不太可能。

无论如何，异常说句柄到窗口管理器，所以它是关于 UI 的。

诊断哪些句柄泄漏的最快方法可能是从 MSDN 获取 ProcessExplorer 或从 SourceForge 获取 ProcessHacker2 之类的程序，并尝试检查崩溃前发生的情况。

上述应用程序不仅允许您查看任何应用程序当前打开了哪些句柄（在这里您可以了解挂起的 I/O、互斥锁等），还可以检查当前的 Window 层次结构（在那里您**可能会**了解哪些窗口/controls 没有被释放，或者哪些是不必要地创建的）。我说也许吧，因为它是非常特定于应用程序的。在某些情况下，使用 Proceshacker，您会确切地看到您的“添加评论”窗口在 10000 个实例中打开，但在其他情况下，您只会听到“一个窗口”的 10000 个句柄挂起，这并不能告诉您太多。

当然，这才刚刚开始。然后你必须找到并解决原因。但至少这是一个开始，你会知道在哪里进一步寻找。

# spring - 没有 servlet 不能自动启动 webapp

> ID：14602163
> 
> 赞同：0
> 
> 时间：2013-01-30T10:47:48.063
> 
> 标签：spring, apache, tomcat, servlets

我在 Apache Tomcat (7.0.x) 中部署了一个简单的 webapp，它使用 ContextLoaderListener 而不是 Servlet 进行引导。我希望这个 webapp 不会在 Tomcat 服务器本身启动时自动启动，而是仅通过 Tomcat 管理器手动启动/停止。我在网上看到的示例显示了如何使用以下 web.xml 中的 servlet 代码轻松完成此操作：

```
<servlet><load-on-startup>0</load-on-startup></servlet> 
```

但是在使用 ContextLoaderListener 时没有可用的示例。这可能吗？或者我是否需要包含一个 servlet 以便将 webapp 配置为在 Tomcat 服务器本身启动时不自动启动？

提前谢谢，PM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:23:25.997

我认为您无法在 web.xml 中执行此操作。`load-on-startup`用于告诉 webapp 在 webapp 启动时启动一个 servlet。一个 webapp 通常由多个 servlet 组成。

如果你想确保 webapp 在启动时没有加载，而是使用 Tomcat 管理器来启动它，我建议你`deployOnStartup="false"`在`<Host>`容器中设置，在`settings.xml`. 有关详细信息，请参阅 Tomcat 7 文档页面：

[http://tomcat.apache.org/tomcat-7.0-doc/config/host.html](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:59:29.223

您应该阅读最近关于 Tomcat 用户列表的讨论，我相信它可以回答您的确切问题： http: [//markmail.org/message/5hp3dohwj3vncg4c](http://markmail.org/message/5hp3dohwj3vncg4c)

最重要的是，您只能在启动时启动 Manager webapp，但对于重启后发生的情况有一些限制。Mark Thomas 的回复是最有用的。

# android - 如何缓存来自服务器的音频、视频和图像并保存在内存中？

> ID：14602166
> 
> 赞同：1
> 
> 时间：2013-01-30T10:48:09.130
> 
> 标签：android

我正在开发平板电脑应用程序。我的要求是从服务器下载音频、视频和图像（大约 20-30 MB 数据）并存储在内存中。所以下次用户不需要再次下载数据。

我找到了一些库，可以下载图像并将其保存在缓存中。有谁知道一些库可以下载所有格式的文件并保存在内存中。这也将处理内存问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T06:54:06.150

[https://github.com/JakeWharton/DiskLruCache](https://github.com/JakeWharton/DiskLruCache) “在文件系统上使用有限空间的缓存。值是字节序列，可作为流或文件访问”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T15:45:36.507

[AndroidVideoCache](https://github.com/danikula/AndroidVideoCache)允许同时流式传输和缓存视频。

# sql-server - SSDT 部署后脚本（使用 JQuery 转储数据） - 禁用变量替换

> ID：14602167
> 
> 赞同：1
> 
> 时间：2013-01-30T10:48:11.557
> 
> 标签：sql-server, visual-studio, sqlcmd, sql-server-data-tools

在我的 SSDT 项目中，我有一个部署后脚本，其中包含一个脚本文件。

:r .\Data\Data.Content.sql

文件 Data.Content.sql 是数据库的转储（插入语句），它包含类似 'var $sameHeightDivs = $(''.product-tile-region'');' 的内容。该数据库包含 JQuery 脚本。所以我收到以下错误：

*SQL72008：未定义变量文档。* 或 *72006：致命脚本错误：解析 '$('' 时遇到不正确的语法*

我发现您可以使用参数 -x 禁用“禁用变量替换”。

但是有没有办法在某个地方定义这个？（部署后脚本？项目设置？）

或者还有其他方法可以解决这个问题吗？

仅供参考：创建转储我使用 Microsoft.SqlServer.Management.Smo.Scripter。

亲切的问候，

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:24:34.793

我在[SQL Server Data Tools 论坛](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/7a28372a-6ffe-435a-b7e2-e8ae799d4b47)上发布了同样的问题，有人提出了解决方法。

脚本生成后，我搜索并替换 $ char。

```
function SearchAndReplace($file) {
    (Get-Content $file) | 
    Foreach-Object {$_ -replace "\$\(", "' + CHAR(36) + '("} | 
    Set-Content $file
} 
```

我包括了 '(' 以确保限制范围（到 JQuery 选择器）。

# c++ - 如何保留数组绑定值并在函数声明中使用它们？

> ID：14602168
> 
> 赞同：0
> 
> 时间：2013-01-30T10:48:12.130
> 
> 标签：c++

假设我使用 main() 从文件中读取并占用一个二维数组`int arr[S1][S2]`，其中`S1`和`S2`由文件确定。如果我想将此数组传递给一个函数，我怎样才能将多维数组编写为具有正确边界`S1`和的函数参数`S2`？

```
int some_function(int arr_copy[S1][S2], ...);

int main()
{
/* read file and occupy arr[S1][S2] */
} 
```

显然上述是一个问题，因为`S1`和`S2`是未定义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:42:16.190

显而易见的解决方案是编写一个基于 Matrix 的类 `std::vector`，并使用它。然后，您将声明该函数以获取（可能`const`）对矩阵的引用，并完成它。它比任何替代品都容易得多，而且更安全。

如果你真的坚持在 中使用 C 风格的数组`main`，那么你可以将函数定义为模板：

```
template <size_t S1, size_t S2>
int
some_function( int const (&array)[S1][S2], ...) ... 
```

编译器将根据您传递的数组的声明`S1`确定实际值。`S2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:51:58.667

如果您必须传递一个数组，那么该函数应该接受一个`int*`和两个参数作为边界。最好为数组使用容器类，通过引用（或常量引用）传递。

编辑：对于所有这些，请按照 James 对模板的建议进行操作。:-)

# ruby-on-rails - 如何将多张图片直接上传到 1 条记录到 s3？

> ID：14602170
> 
> 赞同：0
> 
> 时间：2013-01-30T10:48:16.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, image-uploading, jquery-file-upload

我有一个`Product`模型，对于创建的每条记录，我想要与该记录关联的多个图像（比如 3-10）。每个图像应该有多种尺寸（比如 3 种不同的尺寸）。

我检查了 Carrierwave 并且有效 - 但仅适用于 1 张图像（或者更确切地说，我无法弄清楚如何为 1 条记录获取多张图像）。

我还查看了 jQuery File Upload，这似乎允许轻松上传多个文件，但最终归结为每个上传都与 1 条记录相关联。所以，是的，你可以拖放文件，但如果你拖动 5 个文件，你就创建了 5 条记录。

理想情况下，我希望能够获得相同的 jQuery-File-Upload 功能（在客户端完成处理，在上传过程中显示进度条，如果可能的话拖放等），但只允许所有一次上传的图像，将分配给 1 条记录。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:47:49.230

您可以将序列化参数存储在数据库中，因此您将所有图像存储在 1 列中。但是更好的解决方案是创建属于您的父模型和您的父模型的新模型 has_many :new_model

# php - 如何使用 capistrano 部署 LAMP 应用程序？

> ID：14602171
> 
> 赞同：0
> 
> 时间：2013-01-30T10:48:29.803
> 
> 标签：php, capistrano

我是 LAMP 和 capistrano 的新手，我完全不知道如何开始使用 capistrano 部署 LAMP 应用程序。我可以找到解决方案 Rails App 和 git，但这不适用于我使用 php 和 svn 的情况。执行部署设置命令时出现以下错误：(Errno::ECONNREFUSED: Connection denied - connect(2))。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:08:09.167

我能够解决这个问题。这是由于SSH帐户。我使用以下命令“sudo apt-get install openssh-server”来解决它。

# sql - SQL在where子句问题中将字符串转换为日期时间

> ID：14602177
> 
> 赞同：0
> 
> 时间：2013-01-30T10:48:49.060
> 
> 标签：sql, where

我正在尝试从 wordpress 数据库中检索数据。我在查询中找不到语法错误，有人可以帮我解决这个问题吗？

它是列出特定的前 10 个帖子，`post_type`并将其`Events_Date`字段转换为日期时间。

这是我的查询：

```
SELECT wp_posts.*, wp_postmeta.* 
FROM ritmica_wp.wp_posts, ritmica_wp.wp_postmeta
WHERE convert(datetime, wp_postmeta.meta_value, 120) > GetDate() 
IN
    (SELECT wp_posts.*, wp_postmeta.* FROM ritmica_wp.wp_posts, ritmica_wp.wp_postmeta 
    WHERE wp_posts.post_type = 'event' 
    AND wp_postmeta.meta_key = 'Events_Date' )

ORDER BY wp_postmeta.meta_value ASC LIMIT 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:00:35.807

我没有看到子查询的意义。你不能这样做：

```
SELECT TOP 10
    wp_posts.*, wp_postmeta.* 
FROM
    ritmica_wp.wp_posts, ritmica_wp.wp_postmeta
WHERE
    convert(datetime, wp_postmeta.meta_value, 120) > GetDate() 
    AND wp_posts.post_type = 'event' 
    AND wp_postmeta.meta_key = 'Events_Date'
ORDER BY
    wp_postmeta.meta_value ASC 
```

**（对于 SQL Server）**

# ruby-on-rails - 如何使用设计实现具有不同模块的用户类型？

> ID：14602179
> 
> 赞同：1
> 
> 时间：2013-01-30T10:48:55.767
> 
> 标签：ruby-on-rails, devise, user-management, devise-invitable

我想使用设计来管理我的用户，我的意图是拥有一个`AgencyUser`模型和一个`NormalUser`模型。它们都有一些共同的属性/关系，但也有一些特殊的属性/关系。对我来说最显着的区别是我希望允许`NormalUser`注册`registerable`模块并且`AgencyUser`应该只能通过[devise_invitable](https://github.com/scambra/devise_invitable)模块注册。他们都应该能够从同一个登录表单登录。

你有什么策略或建议我怎么能得到这样的行为？

谢谢！

# xml - java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration 修改 XML 后

> ID：14602180
> 
> 赞同：2
> 
> 时间：2013-01-30T10:48:55.240
> 
> 标签：xml, eclipse, hibernate, exception

我的项目一直在工作，直到我尝试将字符编码设置为 UTF-8。我将该`<property name="hibernate.connection.characterEncoding">utf8</property>`行添加到我的`hibernate.cfg.xml`. 现在重新启动计算机后，我收到了这个奇怪的错误：

```
java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    at dal.hibernate.HibernateUtil.<clinit>(HibernateUtil.java:15)
    at dal.hibernate.HibernateDAOFactory.getSession(HibernateDAOFactory.java:25)
    at dal.hibernate.HibernateUserDAO.authenticate(HibernateUserDAO.java:23)
    at controller.servlet.LogIn.doPost(LogIn.java:63)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.hibernate.cfg.Configuration
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 22 more 
```

堆栈中的前四个类是我的类。

我看到`new Configuration();`调用导致错误，但我在 WEB-INF/lib 中有必要的 JAR-s：

*   antlr-2.7.7.jar
*   dom4j-1.6.1.jar
*   hibernate-commons-annotations-4.0.1.Final.jar
*   hibernate-core-4.1.9.Final.jar
*   hibernate-jpa-2.0-api-1.0.1.Final.jar
*   javassist-3.17.1-GA.jar
*   jboss-logging-3.1.0.GA.jar
*   jboss-transaction-api_1.1_spec-1.0.0.Final.jar
*   mysql-connector-java-5.1.18-bin.jar

这是配置 XML：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost/web_projekt</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">******</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="hibernate.connection.characterEncoding">utf8</property>
        <property name="show_sql">true</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="hibernate.hbm2ddl.auto">update</property>

        <!-- Mapping files -->
        <mapping resource="core/bean/tables.hbm.xml"/>
    </session-factory>
</hibernate-configuration> 
```

你知道有什么问题吗？

# sql - verifyonly 错误信息

> ID：14602183
> 
> 赞同：0
> 
> 时间：2013-01-30T10:49:01.363
> 
> 标签：sql, sql-server

我使用以下 sql 语句

```
RESTORE VERIFYONLY FROM DISK = 'F:\testBackup\test_2013-01-18.BAK'
GO 
```

这样做时出现此错误：

```
Attempting to restore this backup may encounter storage space problems. Subsequent messages will provide details.
The path specified by "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\test.mdf" 
is not in a valid directory.
Directory lookup for the file "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\test_log.ldf" 
failed with the operating system error 3(failed to retrieve text for this error. Reason: 15100).
Msg 3189, Level 16, State 1, Line 1
Damage to the backup set was detected.
Msg 3013, Level 16, State 1, Line 1
VERIFY DATABASE is terminating abnormally. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:00:23.123

尝试使用这个：

```
RESTORE VERIFYONLY
   FROM DISK = 'F:\testBackup\test_2013-01-18.BAK'
   WITH NORECOVERY, 
      MOVE 'test_Data'  
          TO '<YourPath>\test.mdf', 
      MOVE 'test_Log' 
          TO '<YourPath>\test_log.ldf'; 
```

您可以查看[MSDN 网站](http://msdn.microsoft.com/en-us/library/ms188902.aspx)以获取更多建议。

# c# - 分块下载文件（Windows Phone）

> ID：14602186
> 
> 赞同：6
> 
> 时间：2013-01-30T10:49:16.783
> 
> 标签：c#, windows-phone-7, download, chunking

在我的应用程序中，我可以从网上下载一些媒体文件。通常我使用*WebClient.OpenReadCompleted*方法来下载、解密并将文件保存到 IsolatedStorage。它运作良好，看起来像这样：

```
 private void downloadedSong_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e, SomeOtherValues someOtherValues) // delegate, uses additional values
        {
            // Some preparations

                try
                {
                   if (e.Result != null)
                   {
                    using (isolatedStorageFile = IsolatedStorageFile.GetUserStoreForApplication())
                    {
                        // working with the gained stream, decryption
                        // saving the decrypted file to isolatedStorage
                        isolatedStorageFileStream = new IsolatedStorageFileStream("SomeFileNameHere", FileMode.OpenOrCreate, isolatedStorageFile);
                        // and use it for MediaElement
                        mediaElement.SetSource(isolatedStorageFileStream);
                        mediaElement.Position = new TimeSpan(0);
                        mediaElement.MediaOpened += new RoutedEventHandler(mediaFile_MediaOpened);

                        // and some other work
                     }
                    }
                 }
                 catch(Exception ex) 
                 {
                  // try/catch stuff
                 }
           } 
```

但经过一番调查，我发现对于大文件（对我来说超过 100 MB），我在下载此文件时遇到*OutOfMemory*异常。我想那是因为 WebClient.OpenReadCompleted 将整个流加载到 RAM 中并阻塞......而且我需要更多内存来解密这个流。

经过另一次调查，我发现如何在 OpenReadCompleted 事件后将此文件保存到独立存储（或解密然后保存在我的情况下）后将大文件分成块，但这只会帮助解决部分问题......主要问题是**如何在下载过程中防止电话阻塞**。**有没有办法分块下载大文件？**然后我可以使用找到的解决方案通过解密过程。（我仍然需要找到一种方法将如此大的文件加载到 mediaElement 中，但这将是另一个问题）

* * *

回答：

```
 private WebHeaderCollection headers;
 private int iterator = 0;
 private int delta = 1048576;
 private string savedFile = "testFile.mp3";

 // some preparations
 // Start downloading first piece

using (IsolatedStorageFile isolatedStorageFile = IsolatedStorageFile.GetUserStoreForApplication())
                    {
                        if (isolatedStorageFile.FileExists(savedFile))
                            isolatedStorageFile.DeleteFile(savedFile);
                    }

                    headers = new WebHeaderCollection();
                    headers[HttpRequestHeader.Range] = "bytes=" + iterator.ToString() + '-' + (iterator + delta).ToString();
                    webClientReadCompleted = new WebClient();
                    webClientReadCompleted.Headers = headers;
                    webClientReadCompleted.OpenReadCompleted += downloadedSong_OpenReadCompleted;
                    webClientReadCompleted.OpenReadAsync(new Uri(song.Link));
                    // song.Link was given earlier

private void downloadedSong_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
        {
            try
            {
                if (e.Cancelled == false)
                {
                    if (e.Result != null)
                    {
                        ((WebClient)sender).OpenReadCompleted -= downloadedSong_OpenReadCompleted;

                        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                        {
                            using (IsolatedStorageFileStream fileStream = new IsolatedStorageFileStream(savedFile, FileMode.Append, FileAccess.Write, myIsolatedStorage))
                            {
                                int mediaFileLength = (int)e.Result.Length;
                                byte[] byteFile = new byte[mediaFileLength];
                                e.Result.Read(byteFile, 0, byteFile.Length);
                                fileStream.Write(byteFile, 0, byteFile.Length); 

                                // If there's something left, download it recursively
                                if (byteFile.Length > delta)
                                {
                                    iterator = iterator + delta + 1;

                                    headers = new WebHeaderCollection();
                                    headers[HttpRequestHeader.Range] = "bytes=" + iterator.ToString() + '-' + (iterator + delta).ToString();
                                    webClientReadCompleted.Headers = headers;
                                    webClientReadCompleted.OpenReadCompleted += downloadedSong_OpenReadCompleted;
                                    webClientReadCompleted.OpenReadAsync(new Uri(song.Link));
                                }
                            }
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:49:40.403

要分块下载文件，您需要发出多个请求。每个块一个。
不幸的是，不能说“给我这个文件并以 X 大小的块返回它”；

假设服务器支持它，您可以使用 HTTP`Range`标头指定服务器应返回文件的哪些字节以响应请求。
然后，您发出多个请求以获取文件，然后将它们全部重新组合到设备上。您可能会发现，在获得并验证了前一个块后，进行顺序调用并开始下一个调用是最简单的。

这种方法可以在用户返回应用程序时轻松恢复下载。您只需查看之前下载了多少，然后获取下一个块。

我编写了一个应用程序，它以 64K 块下载电影（最大 2.6GB），然后使用[`MediaPlayerLauncher`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394004%28v=vs.105%29.aspx). 通过`MediaElement`应该也可以播放，但我尚未验证。您可以通过将大文件直接加载到独立存储中（通过独立存储资源管理器或类似方法）来测试这一点，并检查以这种方式播放的内存影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T21:53:34.603

**已确认：**您可以使用`BackgroundTransferRequest`下载多 GB 文件，但您必须设置`TransferPreferences`为`None`强制在连接到外部电源和连接到 Wi-Fi 时进行下载，否则`BackgroundTransferRequest`将失败。

* * *

我想知道是否可以使用 BackgroundTransferRequest 轻松下载大文件并让手机担心实现细节？该文档似乎表明可以下载超过 100 MB 的文件，并且“范围”动词保留供其自己使用，因此如果可以在幕后，它可能会自动使用它。

从有关超过 100 MB 文件的文档中：

> 对于大于 100 MB 的文件，您必须将传输的 TransferPreferences 属性设置为无，否则传输将失败。如果您不知道传输的大小并且可能超出此限制，则应将值设置为无，这意味着只有在手机连接到外部电源并有 Wi-Fi 时才会进行传输联系。

从有关使用“范围”动词的文档中：

> BackgroundTransferRequest 对象的 Headers 属性用于设置传输请求的 HTTP 标头。以下标头保留供系统使用，不能由调用应用程序使用。当使用 Add(BackgroundTransferRequest) 方法对传输请求进行排队时，将以下标头之一添加到 Headers 集合将导致抛出 NotSupportedException：
> 
> *   If-Modified-Since
> *   如果无匹配
> *   如果范围
> *   **范围**
> *   除非-修改-自

这是文档： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955%28v=vs.105%29.aspx)

# java - 如何使用拆分函数（）拆分此字符串

> ID：14602194
> 
> 赞同：1
> 
> 时间：2013-01-30T10:49:45.343
> 
> 标签：java, android

我有一个字符串“2013-1-31 08:25 PM”

我想从空间中分离出来：

我可以在空格后拆分它变成“2013-1-31 08”和“25 PM”

现在我想要“2013-1-31”和“08”

我无法在新字符串中获取 08 中的值，但我得到了“2013-1-31”

```
String view_datee = view_date.getText().toString();

               String[] separated = view_datee.split(":");
               String first =separated[0];
               String second=separated[1]; 

               String[] newSeperated = first.split(" ");
               String third = newSeperated[0]; 
               String four=   newSeperated[1];

               Log.i("first",first);
               Log.i("second",second);

               Log.i("third", third);
               Log.i("four", four); 
```

我不知道如何获得四个值意味着 08 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:57:11.987

这是一个使用日期/日历的示例（它使用桌面 java，但很容易转置）：

```
public static void main(String args[]) throws Exception {
    String data = "2013-1-31 08:25 PM";
    DateFormat fmt = new SimpleDateFormat("yyyy-MM-dd hh:mm a");
    Calendar cal = Calendar.getInstance();
    cal.setTime(fmt.parse(data));
    //2013-1-31
    System.out.println(new SimpleDateFormat("yyyy-M-dd").format(cal.getTime()));
    //20
    System.out.println(cal.get(Calendar.HOUR_OF_DAY));
    //08
    System.out.println(new SimpleDateFormat("hh").format(cal.getTime()));
} 
```

请注意，`08:25 PM`您`20:05`可以根据需要获得 08 或 20。我在我的例子中展示了两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:54:57.127

试试这个，

```
public static void main(String[] args) {
        String str = "2013-1-31 08:25 PM";
        System.out.println("[Date:"+str.split(" ")[0]+"][Hours:"+str.split(":")[0].split(" ")[1]+"]");
    } 
```

输出，

```
run:
[Date:2013-1-31][Hours:08]
BUILD SUCCESSFUL (total time: 1 second) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:56:41.133

来自官方[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String))，`split`将 RegExp 作为参数。

因此，您不能`" "`用作`split`参数。

相反，您应该使用`"\s"`空格分隔字符串。

然后，您的代码将是：

```
 String[] separated = view_datee.split(":");
           String first =separated[0];
           String second=separated[1]; 

           String[] newSeperated = first.split("\\s");
           String third = newSeperated[0]; 
           String four=   newSeperated[1];

           Log.i("first",first);
           Log.i("second",second);

           Log.i("third", third);
           Log.i("four", four); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:58:49.800

你确定字符串以 PM 或 AM 结尾那么你可以这样做

```
String s= "2013-1-31 08:25 PM";

        String newStr=s.substring(s.indexOf(" ")+1,s.lastIndexOf(" "));
        System.out.println(newStr);
        String result[]=newStr.split(":");
        System.out.println(result[0]);
        System.out.println(result[1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:59:30.267

检查下面的代码，它工作正常

```
String date = "2013-1-31 08:25 PM";
    String[] split = date.split(":");
    System.out.println(split[0]+"date:::"  + split[1] );
    String[] Datesplit = split[0].split(" ");
    System.out.println(Datesplit[0]+"date splited:::"  + Datesplit[1] ); 
```

下面的输出

```
2013-1-31 08date:::25 PM
2013-1-31date splited:::08 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:09:35.040

我已经检查了您的代码及其正常工作。这是我发布的任何我输入和执行的内容：

```
 String teststr = "2013-1-31 08:25 PM";
    System.out.println("teststr: " + teststr);
    String[] separated = teststr.split(":");
    String first = separated[0];
    String second = separated[1];
    String[] newSeperated = first.split(" ");
    String third = newSeperated[0];
    String four = newSeperated[1];
    System.out.println("first : "+first);
    System.out.println("second : "+second);
    System.out.println("third : "+third);
    System.out.println("fourth : "+four); 
```

它给了我以下输出： teststr: 2013-1-31 08:25 PM first : 2013-1-31 08 second : 25 PM 第三 : 2013-1-31 第四 : 08

# objective-c - 即使在允许用户编辑文本后也禁用 UITextView 中的剪切和复制

> ID：14602207
> 
> 赞同：0
> 
> 时间：2013-01-30T10:50:25.750
> 
> 标签：objective-c, cocoa-touch, uitextview

> **可能重复：**
> [如何在 UITextView 中禁用复制、剪切、选择、全选](https://stackoverflow.com/questions/1426731/how-disable-copy-cut-select-select-all-in-uitextview)

我有一个`UITextView`可以编辑的。我有另一个“复制”按钮，所以我想禁用文本视图的内置“复制”和“剪切”功能。在文本视图内双击时，这些显示为黑色迷你弹出框。有没有办法只阻止这两个选项，仍然让用户编辑文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:53:14.843

覆盖`canPerformAction:withSender:`方法以返回`NO`您不想允许的操作：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
    {
        if (action == @selector(paste:))
            return NO;
        if (action == @selector(select:))   
            return NO;   
        if (action == @selector(selectAll:))   
            return NO;  
        return [super canPerformAction:action withSender:sender];
    } 
```

**另一种方式**

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    UIMenuController *menuController = [UIMenuController sharedMenuController];
    if (menuController) {
        [UIMenuController sharedMenuController].menuVisible = NO;
    }
    return NO;
} 
```

还要检查[这个链接](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T10:51:56.137

子类化`UITextView`和覆盖`canBecomeFirstResponder`：

```
- (BOOL)canBecomeFirstResponder
{
    return NO;
} 
```

希望这可以帮助你..

# android - 我在哪里可以获得一个 JAR 来导入 libcore.io？

> ID：14602209
> 
> 赞同：9
> 
> 时间：2013-01-30T10:50:43.630
> 
> 标签：android, exception-handling, import, jar

我想`GaiException`在我的应用程序中处理一个。调试器告诉我，它位于 libcore.io 包中，但导入它会产生错误。我想我需要在我的项目中添加一个额外的 JAR 才能正确解析这种类型。我一直在我的 android sdk 文件夹中挖掘了一下，但似乎没有找到任何类似的东西。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-14T23:48:27.020

如果您使用的是 android studio，您可以将此行添加到您的 gradle 构建中（在依赖项下）。

```
compile 'org.robovm:robovm-rt:+' 
```

如果使用 Eclipse，检查这个[Maven 链接](http://grepcode.com/file/repo1.maven.org/maven2/org.robovm/robovm-rt/0.0.9/libcore/io/GaiException.java)并添加它是合适的。

# android - 创建 ListView 时出错

> ID：14602211
> 
> 赞同：3
> 
> 时间：2013-01-30T10:50:52.457
> 
> 标签：android, android-listview

我在创建 ListView 时遇到错误，这是错误：

```
01-30 18:42:42.177: E/AndroidRuntime(396): FATAL EXCEPTION: main
01-30 18:42:42.177: E/AndroidRuntime(396): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.databasetest/com.example.databasetest.ViewData}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.os.Looper.loop(Looper.java:123)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-30 18:42:42.177: E/AndroidRuntime(396):  at java.lang.reflect.Method.invokeNative(Native Method)
01-30 18:42:42.177: E/AndroidRuntime(396):  at java.lang.reflect.Method.invoke(Method.java:521)
01-30 18:42:42.177: E/AndroidRuntime(396):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-30 18:42:42.177: E/AndroidRuntime(396):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-30 18:42:42.177: E/AndroidRuntime(396):  at dalvik.system.NativeStart.main(Native Method)
01-30 18:42:42.177: E/AndroidRuntime(396): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.ListActivity.onContentChanged(ListActivity.java:245)
01-30 18:42:42.177: E/AndroidRuntime(396):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.Activity.setContentView(Activity.java:1647)
01-30 18:42:42.177: E/AndroidRuntime(396):  at com.example.databasetest.ViewData.onCreate(ViewData.java:19)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-30 18:42:42.177: E/AndroidRuntime(396):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-30 18:42:42.177: E/AndroidRuntime(396):  ... 11 more 
```

我不知道为什么模拟器要寻找 android:R.id.list

这是我在将使用 listView 的 Activity 上的代码

```
package com.example.databasetest;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.widget.ListView;

public class ViewData extends ListActivity {

    private DBHandler dbHelper;
    private SimpleCursorAdapter dataAdapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_data);

        displayListView();

    }
    private void displayListView() {

        Cursor cursor = dbHelper.getData();
        String[] columns = new String[] {
                DBHandler.COL_NAME,
                DBHandler.COL_ADDRESS,
                DBHandler.COL_PHONE,
                DBHandler.COL_EMAIL
        };
        int[] to = new int[] { 
                R.id.name,
                R.id.address,
                R.id.phone,
                R.id.email,
        };
        dataAdapter = new SimpleCursorAdapter(this, R.layout.country_info, 
                cursor, 
                columns, 
                to,
                0);

        ListView listView = (ListView) findViewById(R.id.listView1);
        // Assign adapter to ListView
        listView.setAdapter(dataAdapter);
    }
} 
```

这是我将用于 listView view_data.xml 的两个 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tv"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

最后是 country_info.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="6dip" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Name: "
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:text="Address: "
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView2"
        android:layout_below="@+id/textView2"
        android:text="Phone: "
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView3"
        android:layout_below="@+id/textView3"
        android:text="Email: "
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_toRightOf="@+id/textView3"
        android:text="Test" />

    <TextView
        android:id="@+id/address"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView4"
        android:layout_alignBottom="@+id/textView4"
        android:layout_alignLeft="@+id/continent"
        android:text="Test" />

    <TextView
        android:id="@+id/phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView3"
        android:layout_toRightOf="@+id/textView3"
        android:text="Test" />

    <TextView
        android:id="@+id/email"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView2"
        android:layout_alignLeft="@+id/name"
        android:text="Test" />

</RelativeLayout> 
```

我希望你能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:55:47.350

```
public class ViewData extends Activity 
```

**将 listactivity**更改为**activity**。

将您的课程创建**为活动** ，因为**列表活动**始终**使用内置列表**而不是您的自定义列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:24:51.810

把这个：

```
ListView listview = (ListView) findViewById(android.R.id.list); 
```

并在 XML

```
<ListView
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"/> 
```

# javascript - 在启用 dropkick 的表单上启用/禁用提交按钮？

> ID：14602215
> 
> 赞同：0
> 
> 时间：2013-01-30T10:50:56.123
> 
> 标签：javascript, jquery, validation, jquery-dropkick

我有一个使用 jQuery 的[Dropkick](http://jamielottering.github.com/DropKick/)样式的表单， 但是一旦表单获得样式，我就无法启用/禁用提交按钮。JS 验证在没有 Dropkick 的情况下按预期工作。

的HTML：

```
<form method="get" id="dropkickform" action="">
    <select id="min" class="list">
        <option selected="selected" value="">Selection 1</option>
        <option value="1">100</option>
        <option value="2">200</option>
    </select>

    <select id="max" class="list">
        <option selected="selected" value="">Selection 2</option>
        <option value="1">500</option>
        <option value="2">600</option>
    </select>

    <input type="submit" value="Submit"/>
</form> 
```

JS：

```
$('.list').dropkick();

$(document).ready(function () {
    $form = $('#dropkickform');
    $form.find(':input[type="submit"]').prop('disabled', true);
    $form.find(':input').change(function () {
        var disable = false;
        $form.find(':input').not('[type="submit"]').each(function (i, el) {
            if ($.trim(el.value) === '') {
                disable = true;
            }
        });
        $form.find(':input[type="submit"]').prop('disabled', disable);
    });
}); 
```

[http://jsfiddle.net/L3FCV/](http://jsfiddle.net/L3FCV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:25:18.217

从我可以看到，一旦您应用 dropkick，它就不会`select`在幕后更新 s，因此您的验证将因此无法工作（`select`s 始终选择初始选项，请查看 firebug/chrome web 检查器以查看它）。

我已经能够接近[http://jsfiddle.net/Qguh5/](http://jsfiddle.net/Qguh5/)但它有时会中断。

我用了：

```
$('.list').dropkick({
    change: function(value, label){
        var disable = true;

        $('.dk_option_current > a').each(function(){
            if($(this).data('dk-dropdown-value')){
                disable = false;
            } else {
                disable = true;
            }
        });

        $form.find(':input[type="submit"]').prop('disabled',disable);
    }
}); 
```

该`change`事件在 dropkick 页面上被提及。

如果您想要自定义外观的表单，我建议您尝试一下[http://uniformjs.com 。](http://uniformjs.com)它可能不如 dropkick 漂亮，但在您的场景中使用起来要容易得多。

# java - 为什么Java不允许通过实例方法隐藏静态方法？

> ID：14602220
> 
> 赞同：11
> 
> 时间：2013-01-30T10:51:14.450
> 
> 标签：java, inheritance

如[http://docs.oracle.com/javase/tutorial/java/IandI/override.html](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)所示，Java 确实允许

1.  通过实例方法覆盖实例方法和
2.  通过静态方法隐藏静态方法

我的问题是为什么 Java 不允许*通过实例方法隐藏静态超类方法*。这可以这样做：

```
class Base {
    static void foo () {}
}

class Derived extends Base {
    void foo () {}
    void access () {
        foo ();
        Base.foo ();
    }
} 
```

我没有看到上述方法有任何特别的问题——它只是和静态的（允许的）隐藏一样“混乱/复杂”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T10:55:13.320

我怀疑这是为了避免与处理基类混淆。事实上，我想设计师并没有看到这应该表现的明显方式。

```
class Base {
    static void foo () {}
}

class Derived extends Base {
    void foo () {} // say this compiled
}

Base b = new Derived()
b.foo(); // should the static or the virtual method be called? 
```

b.foo() 应该调用 Base.foo() 还是应该调用 Derived.foo()？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T10:58:45.977

**简单的答案**：那将是一团糟。

**具体答案**：在这种情况下该怎么称呼`Derived.foo()`？`Base.foo()`不能被调用，因为它是隐藏的（根据你），`Derived.foo()`不能被调用，因为它不是静态的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:57:28.973

因为，一个像香蕉，另一个是苹果。

解释：

*   读取类结构时创建静态方法
*   方法是在创建类的对象时创建的。

例子：

```
Foo.bar(); 
```

是不同的东西

```
new Foo().bar(); 
```

猜猜叫哪一个？

```
Foo f = new Foo();
f.bar(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T11:25:51.413

另一个要补充的是： 1\. 静态方法属于类级别。所以你不能覆盖派生类中的方法。很简单，它被称为隐藏。:) 2.实例方法属于对象，所以对象被覆盖。所以我们可以在派生类中重写。

以上其他评论给出了一个很好的例子，看看它..

问候普尼斯

# wordpress - 在根文件夹上使用 WordPress 时，索引上的正在构建页面

> ID：14602227
> 
> 赞同：0
> 
> 时间：2013-01-30T10:51:36.537
> 
> 标签：wordpress, .htaccess, redirect

是否有可能拥有一个静态（非 Wordpress）html 页面，用户在浏览我的域时会看到该页面。

同时，我希望能够在我的 WordPress 网站上继续进行更改并查看结果。因此，浏览到[http://www.mydomain.com/index.php](http://www.mydomain.com/index.php)会调出我的 WordPress 网站，但[http://www.mydomain.com](http://www.mydomain.com)会调出静态 HTML“建设中”页面。

我知道它们是为此的插件，但是是否可以通过 htacess 或某事来做到这一点。比如 301 重定向。

如果是这样，我如何将其写入我的 htaccess 文件？

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase //
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:48:36.840

解决此问题的一种方法是仅向管理员显示网站。您的解决方案不适用于子页面，因此来自直接链接的人仍会看到您的网站。

```
add_action( 'template_redirect', function() {
    if( !current_user_can( 'manage_options' ) ) {
        include( get_template_directory() . '/static_html.html' );
        exit;
    }
}); 
```

如果您将上述内容放在functions.php 中，它将阻止非管理员查看任何使用该主题的页面。但是，作为管理员，您将完全畅通无阻。

（'manage_options' 是默认情况下只有管理员才能拥有的功能。如果您弄乱了这些功能，您可以选择另一个管理员专有功能或明确检查角色，请查看[http://docs.appthemes.com/教程/wordpress-check-user-role-function/](http://docs.appthemes.com/tutorials/wordpress-check-user-role-function/) )

# git - 用于多个项目的 Gollum wiki

> ID：14602228
> 
> 赞同：4
> 
> 时间：2013-01-30T10:51:38.033
> 
> 标签：git, wiki, web-farm, gollum-wiki

我喜欢[Gollum](https://github.com/github/gollum) for wiki，但一个实例似乎只能处理单个存储库。

是否有一些类似的项目可以处理多个 repos，或者是一个开箱即用的解决方案来维护多个 Gollum 项目实例？

*维护*我的意思是：创建存储库，列出所有存储库，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:52:03.883

我刚刚创建了两个不同的 wiki：

```
gollum --page-file-dir wiki1 my_repos 
```

（Control-c 停止运行咕噜）

```
gollum --page-file-dir wiki2 my_repos 
```

我`home.mediawiki`为每个文件创建了一个文件作为主页。所以他们占据了两个不同的命名空间。

要同时编辑这些，我想我会学会为 gollum 的第二个实例使用不同的端口，或者只是通过我的文本编辑器将注释提交到一个目录或另一个（wiki1 或 wiki2），这可能是什么反正我会做。

由于 wiki1 和 wiki2 是具有 GUI 界面的计算机上的目录，因此我只需使用 Finder/Windows Explorer/whatever 来维护它们的列表。

这能满足你的需求吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T05:56:10.203

嗯，有[big-gollum](https://github.com/oponder/big-gollum)，但它看起来并不特别活跃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-21T06:25:05.017

所以我决定通过桌面快捷方式来做到这一点。可执行命令如下：

```
bash -c "bport='$(jot -r 1 10000 20000)'; gollum /path/to/wiki --port $bport & chromium-browser http://localhost:$bport ; wait $(pgrep 'chromium-browser localhost:$bport') && kill $(pgrep -f 'gollum /path/to/wiki') &" 
```

这会伪随机化绑定 gollum 的端口，然后应用该端口访问 wiki。一旦 chromium 关闭，等待状态跳转以使用 pgrep 杀死 gollum 进程以获取其 pid。因此，通过桌面打开的每个 wiki 的每个 gollum 实例都会有所不同，并且 gollum 可以与其他 gollum 一起使用，而不会那么闷闷不乐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-09T10:46:53.203

GitHub 过去使用 Gollum 来托管与每个 repo 关联的 wiki（可选）。因此，他们必须有一个解决这个问题的方法。他们的代号似乎是**Smeagol**。他们的解决方案不公开。

然而，也有一些具有相同目标的开源项目 - 也称为 Smeagol。根据我自己的搜索，值得注意的是（截至 2020 年年中）：

1.  [https://github.com/cloudogu/smeagol（Java](https://github.com/cloudogu/smeagol) ，保留所有权利）
2.  [https://github.com/schnatterer/smeagol-galore](https://github.com/schnatterer/smeagol-galore) (Java, MIT, 基于cloudogu的实现)
3.  [https://github.com/journeyman-cc/smeagol](https://github.com/journeyman-cc/smeagol) (Clojure, GPLv2)

我还没有对它们进行测试，但第二个选项（*smeagol-galore*）听起来是个不错的解决方案。

# css - CSS font-size：你使用什么样的单位有关系吗？

> ID：14602229
> 
> 赞同：2
> 
> 时间：2013-01-30T10:51:38.980
> 
> 标签：css, font-size

显然，点 (pt) 不应该在网络上使用，只能在印刷媒体中使用。如果您想要网站的像素完美表示，则应使用像素 (px)。百分比 (%) 和 ems (em) 的作用几乎相同，如果您希望网站在缩放等时具有可扩展性，则应使用它们。

五分钟前，我写了这几行代码，并在 Chrome、Firefox、Safari、IE 和 iPhone 5 上进行了测试。

```
<html>
<p style="font-size:16px;">Dette er en test</p>
<p style="font-size:100%;">Dette er en test</p>
<p style="font-size:1em;">Dette er en test</p>
<p style="font-size:12pt;">Dette er en test</p>
</html> 
```

发生的事情是，当我放大和缩小时，所有段落的大小都保持不变。那么你使用什么样的单位真的很重要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:56:23.110

好吧，我找到了一篇很棒的文章：[http ://alistapart.com/article/howtosizetextincss](http://alistapart.com/article/howtosizetextincss)

他的结论：

> 我们的任务是找到一种调整文本大小的方法，让设计师能够准确控制排版，同时不牺牲用户调整阅读环境的能力。我们在常见的浏览器上测试了各种单元。以 em 为单位调整文本大小和行高，并在正文中指定百分比（以及 Safari 2 的一个可选警告），可在当今常用的所有浏览器中提供准确、可调整大小的文本。这是一种您可以放入工具包中的技术，并将其用作在 CSS 中调整文本大小的最佳实践，以满足设计人员和读者的需求。
> 
> 使用 Ems 可能会很棘手，尤其是在深度嵌套元素时，因为很难跟踪数学。但是，很好地注释您的样式表并从正文向内设置元素样式可以使事情更容易理解。这个更复杂的示例及其随附的样式表演示了如何使用主体作为起点来调整嵌套元素的大小。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:05:53.370

不同的单位在不同的情况下有用。要知道何时使用哪个单元，您必须知道它们的作用。[这在 MDN 中得到了](https://developer.mozilla.org/en-US/docs/CSS/length#Units)很好的解释，或者如果您更喜欢[W3 规范中的说明](http://www.w3.org/TR/css3-values/#lengths)（对于 %，请参见下文）。

这是 MDN 对您提到的单位类型的引用：

> **em**
> 这个单位表示计算出来的元素的字体大小。如果在 font-size 属性本身上使用，它表示元素的继承字体大小。
> 
> **px**
> 相对于查看设备。对于屏幕显示，通常是显示器的一个设备像素（点）。对于打印机和超高分辨率屏幕，一个 CSS 像素意味着多个设备像素，因此每英寸的像素数保持在 96 左右。
> 
> **pt**
> 一点（即 1/72 英寸）。

百分比是奇数，有[自己的 MDN 页面](https://developer.mozilla.org/en-US/docs/CSS/percentage)。

> 许多长度属性使用百分比，例如宽度、边距和填充。百分比也可以在 font-size 中看到，其中文本的大小与其父级的大小直接相关。

[或者W3 规范中](http://www.w3.org/TR/css3-values/#percentages)它自己的小节：

> 百分比值总是相对于另一个值，例如长度。每个允许百分比的属性还定义了百分比所指的值。该值可以是同一元素的另一个属性的值、祖先元素的属性或格式化上下文的值（例如，包含块的宽度）。当为根元素的属性设置百分比值并将百分比定义为引用某个属性的继承值时，结果值是百分比乘以该属性的初始值。

所以“是的”，你选择哪个很重要，它们在不同的情况下都会产生*不同*的效果（不管它们通常也会导致*相同*的结果）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:57:30.237

em 单位是网络上最新和即将推出的字体大小标准，但在实践中，百分比单位似乎为用户提供了更加一致和易于访问的显示。

当客户端设置发生变化时，百分比文本会以合理的速度缩放，让您保持可读性、可访问性和视觉设计。

所以我建议你使用百分比。

**[在这里](http://pxtoem.com/)**你可以看看转换，希望它有所帮助。

# android - 排队蓝牙连接请求并同时接受

> ID：14602235
> 
> 赞同：0
> 
> 时间：2013-01-30T10:52:00.897
> 
> 标签：android, bluetooth, bluetooth-sco

在我的 Android 应用程序中，我可以接受从 BT 设备（SPP 配置文件）发送的连接请求。那些 BT 设备定期发送连接请求，应用程序接受它。但现在我的问题是，我可以与多个设备配对，但想定期与配对设备通信。所以我想在这方面进行澄清。如果应用程序与一台设备通信，同时另一台设备发送连接请求，那么我可以使用 BluetoothServerSocket 通过我的应用程序接受此连接请求吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:01:33.853

蓝牙服务器最多可以为 7 个不同的蓝牙客户端提供服务，您需要在单独的线程中创建蓝牙服务器套接字，并且每次客户端连接时，将该客户端发送到新线程，然后返回侦听状态。您可以使用以下伪代码

```
BluetoothServerSocket serverSocket =  BluetoothAdapter.listenUsingRfcommWithServiceRecord();
while(running){
    BluetoothSocket client = serverSocket.accept(); //blocks untel a client is connected
    sendClientToHisThread(client);
}

private void sendClientToHisThread(final BluetoothSocket socket){
     Thread thread = new Thread(new Runnable(){
@Override
public void run(){
   // communicate with client
      socket.close();
 }
});
    thread.start();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:03:02.323

我认为您可以遵循[BluetoothChat](http://developer.android.com/tools/samples/index.html)示例中的行，让线程监听传入连接，但在您的情况下，当连接建立时，您不会关闭服务器套接字。

# wpf - ControlTemplate 不再找到资源

> ID：14602237
> 
> 赞同：3
> 
> 时间：2013-01-30T10:52:17.807
> 
> 标签：wpf, user-controls, controltemplate, resourcedictionary

我首先创建了一个`UserControl`.
在 xaml 中，我可以引用`StaticResource`主应用程序资源中的 s。

然后我将它重构`UserControl`为 a`Control`并通过[Themes/Generic.xaml](https://stackoverflow.com/a/1232333/1163)
应用 a （`ControlTemplate`我需要[这个](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/ea0006d0-d4a8-43b7-94d8-ebf071ae4a40)）。

但是这样`StaticResource`就不再找到 s （`XamlParseException`在运行时抛出 an ）。

*我也*可以在 Genericl.xaml 文件中合并`ResourceDictionaries`包含`StaticResource`我需要的内容，但由于[性能问题](https://stackoverflow.com/a/6871760/1163)，我想避免这种情况

 **这种行为背后的机制是什么？**

# delphi - TStringList.SaveToFile 的等效“流”代码是什么？哪个更适合大量数据？

> ID：14602238
> 
> 赞同：1
> 
> 时间：2013-01-30T10:52:22.333
> 
> 标签：delphi, tstringlist, filestreams

以下控制台应用程序利用 TStringList.SaveToFile 将多行写入文本文件：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils,
  System.Classes;
var
  i: Integer;
  a,b,c: Single;
  myString : String;
  myStringList : TStringList;
begin
  try
    Randomize;
    myStringList := TStringList.Create; 
    for i := 0 to 1000000 do
    begin
      a := Random;
      b := Random;
      c := Random;
      myString := FloatToStr(a) + Char(9) + FloatToStr(b) + Char(9) + FloatToStr(c);
      myStringList.Add(myString);
    end;
    myStringList.SaveToFile('Output.txt');
    myStringList.Free;
    WriteLn('Done');
    Sleep(10000);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

编写一个包含 1000001 行的 >50MB 文件大约需要 3 秒，而且似乎工作正常。但是，许多人提倡在此类过程中使用流。与 TStringList.SaveToFile 相比，流等效项是什么以及使用它的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:21:08.917

直接写入流可能会更快。或者它可能不会。我建议您尝试一下，并为这两个选项计时。写入流如下所示：

```
for i := 0 to 1000000 do
begin
  a := Random;
  b := Random;
  c := Random;
  myString := FloatToStr(a) + Char(9) + FloatToStr(b) + Char(9) + 
    FloatToStr(c) + sLineBreak;
  Stream.WriteBuffer(myString[1], Length(myString)*SizeOf(myString[1]));
end; 
```

为了希望这个版本很快，您需要使用缓冲流。试试这个：[缓冲文件（用于更快的磁盘访问）](https://stackoverflow.com/questions/5639531/buffered-files-for-faster-disk-access/5639712#5639712)。

上面的代码将在现代 Delphi 上输出 UTF-16 文本。如果要输出 ANSI 文本，只需声明`myString`为`AnsiString`.

我会让你做计时，但我猜这个变体的性能类似于字符串列表。我怀疑时间都花在了调用`Random`and`FloatToStr`上。我希望使用字符串列表保存的文件已经非常快了。

将速度放在一边，这种方法还有另一个好处。在字符串列表方法中，根据问题中的代码，文本文件的全部内容都存储在内存中。当您保存文件时，会在保存过程中制作另一个副本。因此，您将在内存中拥有整个文件的两个副本。

相反，当直接保存到流时，唯一的内存要求是流类使用的任何缓冲区。对于根据问题的 50MB 文件，这两种方法都可能没有真正的问题。对于更大的文件，如果您尝试将整个文件保存在内存中，您将遇到内存不足错误。

* * *

不过就个人而言，我会考虑使用该`TStreamWriter`课程。这个有用的类将写入数据（文本、值等）的关注点与推送到流的关注点分开。您的代码将变为：

```
Writer := TStreamWriter.Create(Stream);//use whatever stream you like
try
  for i := 0 to 1000000 do
  begin
    a := Random;
    b := Random;
    c := Random;
    Writer.WriteLine(FloatToStr(a) + Char(9) + FloatToStr(b) + Char(9) +
      FloatToStr(c));
  end;
finally
  Writer.Free;
end; 
```

使用`TStreamWriter`1KB 缓冲区实现缓冲，因此您可以使用`TFileStream`并期望获得合理的性能。

* * *

我建议您选择导致最易读代码的技术。如果性能成为问题，您可以稍后对其进行优化。我个人的偏好是`TStreamWriter`. 这提供了非常干净和可读的代码，同时也很好地将内容生成与流式分离。性能也完全合理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:17:40.277

基于的`TFileStream`解决方案如下所示，但有一些要点：

*   `TFileStream`代码比较慢。没有缓冲，`TFileStream`一次写入 20 个字节到文件是无效的。`TStringList`缓冲RAM中的所有内容并一次保存所有内容。这是最佳的，但它使用了大量的 RAM。
*   在`TStringList`基于 - 的变体中，50% 的时间花在 上`Random`，正如预期的那样。
*   为了使`TFileStream`解决方案变得更有效，您需要滚动缓冲方案，以便每次都将合理的数量写入磁盘（例如：4Kb）

代码：

```
program Project9;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils,
  Classes,
  DateUtils;
var
  i: Integer;
  a,b,c: Single;
  myString : AnsiString;
  StartTime: TDateTime;
  F: TFileStream;
begin
  try
    Randomize;
    StartTime := Now;
    F := TFileStream.Create('Output.txt', fmCreate);
    try
      for i := 0 to 1000000 do
      begin
        a := Random;
        b := Random;
        c := Random;
        myString := FloatToStr(a) + Char(9) + FloatToStr(b) + Char(9) + FloatToStr(c);
        myString := AnsiString(Format('%f'#9'%f'#9'%f'#13#10, [a, b, c]));
        F.WriteBuffer(myString[1], Length(myString));
      end;
    finally F.Free;
    end;
    WriteLn('Done. ', SecondOf(Now-StartTime), ':', MilliSecondOf(Now-StartTime));
    ReadLn;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

# facebook - 未接收位置字段的实时更新

> ID：14602241
> 
> 赞同：1
> 
> 时间：2013-01-30T10:52:31.133
> 
> 标签：facebook, real-time-updates

`picture`我正在接收and`first_name`但不是`location`and的实时更新`about_me`（在 FQL 中，但`bio`在 Graph API 中命名）。

[向https://graph.facebook.com/MY_APP_ID/subscriptions](https://graph.facebook.com/MY_APP_ID/subscriptions)发送 GET 时

我收到 ：

```
{
 "data": [
    {
      "object": "user", 
      "callback_url": "http://msocialn.dyndns.org:8000/facebook/subscriptions/callback/", 
      "fields": [
        "about_me", 
        "current_location", 
        "first_name", 
        "last_name", 
        "location", 
        "picture"
      ], 
      "active": true
    }
  ]
} 
```

为了测试这一点，我更改了我的 Facebook 个人资料中的位置字段（当前城市）（文档湖并没有真正指定`location`它是关于什么的）。它不工作。但它在更改我的个人资料图片时效果很好。

关于如何解决这个问题的任何想法？

# python - 在此脚本中更改日志级别

> ID：14602242
> 
> 赞同：0
> 
> 时间：2013-01-30T10:52:41.143
> 
> 标签：python, logging, serversocket

我正在使用此来源的脚本。我[想](http://code.activestate.com/recipes/577025-loggingwebmonitor-a-central-logging-server-and-mon/)将 Web 服务器显示的日志级别更改为仅显示`ERROR`日志。在第 371 行中，我进行了更改

`'rootLogger.setLevel(logging.ERROR)'`

但我仍然在网页中有调试和信息消息。有人可以看看并告诉我我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:00:52.297

如果您查看第 136 行，它会显示所有内容都会被记录，并且您应该在客户端设置级别。

也许您应该在客户端代码中设置级别，如代码块下方所示。

# jquery - Fancybox 画廊的第一张图片没有显示标题

> ID：14602255
> 
> 赞同：0
> 
> 时间：2013-01-30T10:53:18.897
> 
> 标签：jquery, fancybox, expressionengine

我在这个网站上工作：[页面](http://agnesleppa.fi)

有些画廊是用fancybox制作的。现在这件事在第一个画廊图像上，图像标题没有出现，但在所有其他人身上都显示得很好。我不明白为什么他们没有出现在第一张图片中。

有谁知道为什么会这样？

这是花式框标记：

```
<a class="fancybox" rel="{title}" href="{made_url}" title="{cell_title}">
  <div class="details">
    <div class="center_wrapp">
      <h4>{title}</h4>
    </div>
  </div>    
</a>
<div class="hidden">
  <a class="fancybox" href="{made_url}" rel="{title}" href="{made_url}" title="{cell_title}">                                   
    {cell_title}
  </a>
</div> 
```

图库图像都在隐藏的 div 中。第一个图像是从隐藏 div 外的 a 标签加载的。但它仍然应该显示标题，因为标记完全相同？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:28:29.813

您站点上的脚本删除标签 A 的标题并在链接上显示标签 H4：用户悬停链接并单击，此时脚本删除标题，但 fancybox 生成视图库。

# android - 将字符串转换为日期

> ID：14602258
> 
> 赞同：0
> 
> 时间：2013-01-30T10:53:25.440
> 
> 标签：android, date, simpledateformat

我已经尝试了两个多小时将字符串转换为日期。我不明白我做错了什么？

这是我收到的字符串日期=“星期四，2013 年 1 月 31 日 10:48:58 GMT”

这是我的代码：

```
try {
                SimpleDateFormat sdf = new SimpleDateFormat("EEE, dd MMM yy hh:mm:ss");
                sdf.setTimeZone(TimeZone.getTimeZone("GMT"));
                Date d = new Date();
                d = sdf.parse(expire);
                long timestamp = d.getTime();
                return timestamp;
            } catch (ParseException e) {
                e.printStackTrace();
            } 
```

我总是遇到一个例外，我想我的简单日期格式是错误的。任何可以提供帮助。

我的日志猫：

```
01-30 11:41:03.453: W/System.err(8577): java.text.ParseException: Unparseable date: "Thu, 31 Jan 2013 10:48:58 GMT" (at offset 0)
01-30 11:41:03.453: W/System.err(8577):     at java.text.DateFormat.parse(DateFormat.java:626)
01-30 11:41:03.453: W/System.err(8577):     at fr.haploid.lrucachelibrary.ImageFetcher.getTimestamp(ImageFetcher.java:305)
01-30 11:41:03.453: W/System.err(8577):     at fr.haploid.lrucacheprotoptvo.activities.ImageGridActivity$ImageAdapter.getView(ImageGridActivity.java:152)
01-30 11:41:03.453: W/System.err(8577):     at android.widget.AbsListView.obtainView(AbsListView.java:2255)
01-30 11:41:03.453: W/System.err(8577):     at android.widget.GridView.onMeasure(GridView.java:1030)
01-30 11:41:03.453: W/System.err(8577):     at android.view.View.measure(View.java:15172)
01-30 11:41:03.453: W/System.err(8577):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-30 11:41:03.457: W/System.err(8577):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
01-30 11:41:03.457: W/System.err(8577):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
01-30 11:41:03.457: W/System.err(8577):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-30 11:41:03.457: W/System.err(8577):     at android.view.View.measure(View.java:15172)
01-30 11:41:03.457: W/System.err(8577):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-30 11:41:03.457: W/System.err(8577):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-30 11:41:03.457: W/System.err(8577):     at android.view.View.measure(View.java:15172)
01-30 11:41:03.457: W/System.err(8577):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
01-30 11:41:03.457: W/System.err(8577):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
01-30 11:41:03.461: W/System.err(8577):     at android.view.View.measure(View.java:15172)
01-30 11:41:03.461: W/System.err(8577):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
01-30 11:41:03.461: W/System.err(8577):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-30 11:41:03.461: W/System.err(8577):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
01-30 11:41:03.461: W/System.err(8577):     at android.view.View.measure(View.java:15172)
01-30 11:41:03.461: W/System.err(8577):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
01-30 11:41:03.464: W/System.err(8577):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
01-30 11:41:03.464: W/System.err(8577):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
01-30 11:41:03.464: W/System.err(8577):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
01-30 11:41:03.464: W/System.err(8577):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
01-30 11:41:03.464: W/System.err(8577):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
01-30 11:41:03.464: W/System.err(8577):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
01-30 11:41:03.464: W/System.err(8577):     at android.view.Choreographer.doFrame(Choreographer.java:525)
01-30 11:41:03.464: W/System.err(8577):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
01-30 11:41:03.464: W/System.err(8577):     at android.os.Handler.handleCallback(Handler.java:615)
01-30 11:41:03.464: W/System.err(8577):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-30 11:41:03.464: W/System.err(8577):     at android.os.Looper.loop(Looper.java:137)
01-30 11:41:03.468: W/System.err(8577):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-30 11:41:03.468: W/System.err(8577):     at java.lang.reflect.Method.invokeNative(Native Method)
01-30 11:41:03.468: W/System.err(8577):     at java.lang.reflect.Method.invoke(Method.java:511)
01-30 11:41:03.468: W/System.err(8577):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-30 11:41:03.468: W/System.err(8577):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-30 11:41:03.468: W/System.err(8577):     at dalvik.system.NativeStart.main(Native Method) 
```

编辑：这是我的新代码，我仍然有例外：

```
try {
                SimpleDateFormat sdf = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z");
                Date d = new Date();
                d = sdf.parse(expire);
                Log.i("ImageFetcher","d ="+d.getDay());
                long timestamp = d.getTime();
                return timestamp;
            } catch (ParseException e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:02:42.447

使用此代码它将帮助您

```
private String getFormatedTime(String someDate)  {
    try {
        SimpleDateFormat sdf = new SimpleDateFormat("EEE, dd MMM yy hh:mm:ss");
        Date date = sdf.parse(someDate);            
        sdf.applyPattern("h:mm a");
        String formatedDate = sdf.format(date);
        return formatedDate;            
    } catch (Exception e) {
        // TODO: handle exception
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:55:44.393

我认为您缺少 yy 和 Z。

所以你需要

SimpleDateFormat sdf = new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss Z");

由于下一行代码，您可能不需要 Z，但您肯定需要 4 y。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:56:45.010

尝试如下：

从**字符串**到**日期**

```
String dtStart = "2010-10-15T09:27:37Z";  
SimpleDateFormat  format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");  
try {  
    Date date = format.parse(dtStart);  
    System.out.println(date);  
} catch (ParseException e) {  
    // TODO Auto-generated catch block  
    e.printStackTrace();  
} 
```

从**日期**到**字符串**..

```
SimpleDateFormat  dateformat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");  
try {  
  Date date = new Date();  
 String datetime = dateFormat.format(date);
 System.out.println("Current Date Time : " + datetime); 
} catch (ParseException e) {  
    // TODO Auto-generated catch block  
    e.printStackTrace();  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:11:16.357

试试这个代码：

```
 Calendar c = Calendar.getInstance();
  SimpleDateFormat df = new SimpleDateFormat("EEE, dd MMM yy hh:mm:ss");

    String Todtime = df.format(c.getTime());
    System.out.println("Time: "+Todtime);
    try {
        Date convertedDate = df.parse(Todtime);
        System.out.println("Time: "+convertedDate);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T11:00:28.520

尝试 ：

```
 DateFormat df = new SimpleDateFormat("EEE, dd MMM yy hh:mm:ss");

        try {
            Date today = df.parse("Thu, 31 Jan 2013 10:48:58 GMT");
            System.out.println("Converted Date = " + df.format(today));
        } catch (ParseException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:03:32.447

在 SimpleDateFormat 构造函数中更改您的模式 - 使用 yyyy，而不是 yy。

# cakephp - CakePHP 在每个文件中都有一个变量

> ID：14602261
> 
> 赞同：0
> 
> 时间：2013-01-30T10:53:31.640
> 
> 标签：cakephp, cakephp-2.1

我想`$bURL`在我的 CakePHP 安装的每个视图/控制器/元素/布局上都有一个可用的变量。

设置这样一个变量的最佳位置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:57:22.237

[引导程序.php](http://book.cakephp.org/2.0/en/development/configuration.html#bootstrapping-cakephp)

> 该文件非常适合许多常见的引导任务：
> 
> *   定义便利功能。
> *   **注册全局常量。**
> *   ...

# mouseevent - 从 NSScrollView 获取鼠标位置

> ID：14602264
> 
> 赞同：1
> 
> 时间：2013-01-30T10:53:36.617
> 
> 标签：mouseevent, nsscrollview, nswindowcontroller

我已经添加了我的对象`NSScrollView`的内容视图。`NSWindow`现在我需要知道鼠标在滚动视图上的位置。

我尝试了以下方法。但是没有给出正确的位置。

```
- (void)mouseDown:(NSEvent *)theEvent{
    NSPoint eventLocation = [theEvent locationInWindow];
    NSPoint locationInScroll = [inputScrollView convertPoint:eventLocation toView:nil];
//Both gives the wrong location. 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T19:00:36.817

代码是正确的，假设`inputScrollView`是文档视图和它`NSScrollView`本身。另一个潜在问题可能是如果您在其中一个视图中更改坐标系的方向？

# capistrano - capistrano 符号链接权限被拒绝

> ID：14602270
> 
> 赞同：2
> 
> 时间：2013-01-30T10:54:09.173
> 
> 标签：capistrano, symlink, permission-denied

我正在使用 cap deploy 部署到登台。cap deploy:setup 创建了发布和共享文件夹。

这是 deploy.rb 代码。

```
set :stages, %w(staging production)
set :default_stage, "staging"
set :stage_dir, "capistrano"
require 'capistrano/ext/multistage'

set :application, "application"
set :repository,  "git@github.com:owner/#{application}.git"
set :scm, :git

set :local_user, ENV['USER'] || ENV['USERNAME'] || "unknown"
set :user, "server_owner"

set :deploy_via, :copy

set :use_sudo, false
set :copy_remote_dir, "/home/#{user}/tmp/capistrano"

namespace :deploy do
  desc "Change Permissions" 
  task :change_permissions, :except => { :no_release => true } do
    run "find #{current_path}/ -type d -exec chmod 755 {} \\;"
    run "find #{current_path}/ -type f -exec chmod 644 {} \\;"
  end

  desc "Create symlinks for shared items"
  task :update_shared_symlinks, :except => { :no_release => true} do
     < ln -s command to create the links>
  end
end

before "deploy:finalize_update", "deploy:update_shared_symlinks" 
```

这是暂存代码

```
role :app, "ipaddress"

set :branch, "staging"

set :deploy_to, "/home/#{user}/_#{application}_beta/" 
```

使用 cap deploy 进行部署时，出现以下错误

ln：创建符号链接`/home/narayan/_instaprint_beta/releases/20130130102815/'：权限被拒绝

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:47:33.300

两件事情：

1.  立即使用`chmod`而不是`find`and `exec`，如下所示：`chmod 755 #{current_path}`

2.  检查`server_owner`用户是否有权限`current_path`。如果没有，那么`sudo`像这样使用：`sudo "chmod 755 #{current_path}"`

# java - Java Web 服务 - 接受 XML 输入

> ID：14602272
> 
> 赞同：1
> 
> 时间：2013-01-30T10:54:23.853
> 
> 标签：java, xml, jakarta-ee

我在使用 Java Web 服务时遇到问题，因为我无法接受来自表单（由另一组开发）的 XML 输入。

在我不确定我是否正确设置之前没有使用过这样的服务，目前我想要它做的就是连接，所以方法是空的。

```
package com.what.service;

import java.io.File;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;
import javax.swing.text.*;

@WebService

public class HouseGetForm {

    @WebMethod
    public String getRooms(String rooms) { 
        return "Number of Rooms: " + rooms;
    }

    @WebMethod
    public String getHouseType(String house) {
        return "House Type " + house;
    }

    @WebMethod
    public String getKitchenAppliances(String appliance) {
        return "Appliances " + appliance;
    } 
```

我也有我的“服务器”课程，几乎是直接从教程中获得的。

```
package com.what.service;

import javax.xml.ws.Endpoint;

public class Server {

    public static void main(String[] args) {

        Endpoint.publish("http://localhost:9898/HouseGetForm", new HouseGetForm());

        System.out.println("House Get form Initailised.");

        System.out.println("Server Started...");

    }

} 
```

你看，我不太确定整个过程是如何运作的，所以我在黑暗中磕磕绊绊。提交表单时，XML 是如何传递的？作为一个完整的文档，然后我必须在 Web 服务上找到各个字段值？如果是这样，这是如何完成的？

我真的需要用外行的术语知道如何在 Java Web 服务中获取 XML 输入（即表单数据），然后在 Java Web 服务方法中对其进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:08:50.487

> 在我不确定我是否正确设置之前没有使用过这样的服务，目前我想要它做的就是连接，所以方法是空的。

我建议您为此阅读 REST jersey 库教程。请阅读这篇文章[REST](http://www.vogella.com/articles/REST/article.html)

* * *

所以基本上发生的事情是您的表单通过 HTTP 而不是 HTML 文件提交 XML 文件。如果您想通过 Web 服务客户端 (REST) 接收 XML 数据。你必须声明一个方法

> 消耗

XML 数据。例如

```
@WebMethod
@Consumes("application/xml")
@Produces("application/xml")
public String test(String xmlData){
  System.out.println(xmlData); //reads xml data
  returns "<?xml version="1.0" encoding="ISO-8859-1"?><note>Hello!</note>"; //this will display the legit XML file on to browser instead of HTML document
} 
```

[浏览器上显示的合法 xml 文件示例](http://www.w3schools.com/xml/note.xml)

**此外，您可以使用名为JAXB**的强大库来获取此 xmlData 并立即转换为 JavaBean 对象。还让我向您展示总体情况（我想这就是您要问的）

这是一个WebMethod。如果您的客户想要使用您的 Web 服务，这就是他们将要调用的东西。

```
@WebMethod
@Consumes("application/xml")
@Produces("application/xml")
public String test(Person person){
  System.out.println(person.getFirstName()); //reads xml data
  returns "<?xml version="1.0" encoding="ISO-8859-1"?><note>Hello!</note>"; //this will display the legit XML file on to browser instead of HTML document
} 
```

这是从客户端发送的人员的 XML 数据示例

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Person>
   <firstName>Temp</firstName>
   <lastName>Nick</lastName>
</Person> 
```

当此文件到达方法 test(Person person); 使用 JAXB，此 XML 数据转换为下面的 Person 对象

```
 @XmlRootElement
    public class Person {
      private String firstName;
      private String lastName;

      public String getFirstName(){
        return fristName;
      }
      @XmlElement
      public void setFirstName(String firstName) {
         this.firstName = firstName;
      }

     //another getter and setter for lastName

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:00:56.397

表单数据作为编码的 HTTP 交付。

我打赌你的 XML 是通过 HTTP POST 来的。您可以通过启动您的应用程序、在 Chrome 等浏览器中打开页面并打开 Wireshark 来查看在线发送的内容。

一旦了解了这一点，您就会意识到必须从 HTTP 请求中提取 XML 并将其序列化为 Java 对象。有些人喜欢 JAXB 来做这样的事情。

# matlab - MatLab 在 RICHTEXT.RichtextCtrl.1 使用 drag n dop

> ID：14602278
> 
> 赞同：1
> 
> 时间：2013-01-30T10:54:56.470
> 
> 标签：matlab, activex

我尝试在使用 MS ActiveX RICHTEXT.RichtextCtrl.1 的 MatLab 应用程序中使用拖放。

只要我将所有代码都放在示例图中，一切都可以正常工作。为方便起见，我想使用该指南。我刚刚实现了如下必要的代码。当我尝试将文件拖到 ActiveX 时，它将由 ActiveX 本身处理，例如，文件将显示为 ActiveX 的附件。我的函数没有被调用。

有没有人有解决这个问题的想法？

```
function iTecLogfile_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to iTecLogfile (see VARARGIN)

% Choose default command line output for iTecLogfile
handles.output = hObject;
%handles.activex1.registerevent({'KeyUp', @richtextKeyUp});
handles.activex1.registerevent({'OLEDragDrop', @richtextOLEDragDrop});
set(handles.activex1,'OLEDropMode','rtfOLEDropManual');

% Update handles structure
guidata(hObject, handles);
data = struct();
setappdata(handles.figure1,'data',data); 
```

# javascript - 显示循环 jquery中的标签

> ID：14602281
> 
> 赞同：1
> 
> 时间：2013-01-30T10:55:00.003
> 
> 标签：javascript, jquery, html

我有很多 div 标签。我试图一次只显示一个标签 10 秒。

即在显示div1时，必须隐藏div2,div3..divn，10秒后显示div2 10秒，隐藏其他div标签，以此类推。它是一种循环方式。

请帮忙。

在此处查看示例 html：

```
<html>

<head>
......
.......
</head>

<body>

<div id="div1">
........
......

</div>

<div id="div2">
........
......

</div>
..
..

<div id="divn">
........
......

</div>
</body>

</html> 
```

问候， abk

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:58:15.113

这应该工作：http: [//jsfiddle.net/Z5uMV/](http://jsfiddle.net/Z5uMV/)

```
var current = 1;
function cycle() {
    $('#div' + current).fadeOut(function() {
        current++;
        if(current > 10) current = 1;
        $('#div' + current).fadeIn(function() {
            setTimeout(cycle, 10000);
        }
    });
}

cycle(); // start it 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:58:14.620

您可以使用[setInterval](http://www.w3schools.com/js/js_timing.asp)

**[现场演示](http://jsfiddle.net/rajaadil/CcVwW/)**

```
var myVar=setInterval(function(){myTimer()},1000);
var index=1;
totalDivs = $('[id^=div]').length;
 $('[id^=div]').hide();
function myTimer()
{
     $('[id^=div]').hide();
     $('#div'+ index++).show(); 
     if(index >  totalDivs)
       index = 0;
} 
```

# android - JellyBean 上的向上导航坏了？

> ID：14602283
> 
> 赞同：31
> 
> 时间：2013-01-30T10:55:03.997
> 
> 标签：android, android-support-library

源代码可在此处获得：[https](https://github.com/novemberox/NavigationTest) ://github.com/novemberox/NavigationTest此示例的修改版本：http: [//developer.android.com/training/implementing-navigation/ancestral.html](http://developer.android.com/training/implementing-navigation/ancestral.html)

我有三个活动：

*   `Main Activity`只是应用程序的主要入口
*   `Category Activity`它是 Detail Activity 的父级
*   `Detail Activity`

`Main Activity`有打开的按钮`Category Activity`和`Detail Activity`。 `Category Activty`只有一个按钮可以打开`Detail Activity`。最后`Detail Activity`显示一些文本并有向上按钮模拟点击 ActionBar 向上。

我的“点击”路径是：

*   打开主要活动
*   打开详细活动
*   点击“向上按钮”
*   应出现类别活动
*   后退单击将我们移动到状态已恢复的主活动

这是预期的流程，它在 Jelly Bean 之前的每个 Android 上都运行良好（在 Galaxy Nexus 4.1.1 和模拟器 4.2 Google exp 包上测试）。它甚至适用于 ICS。我正在使用支持库和类，如 NavUtils 和 TaskStackBuilder，就像我在开始时指出的示例一样。

在 JB 上，当我单击“向上按钮”时，它会返回到 Main Activity，状态已正确恢复。我查看了支持库的源代码，发现该`NavUtils.navigateUpTo`方法调用了本地 JB 代码，例如`Activity#navigateUpTo`. 我都试过了`NavUtils#navigateUpTo()`，`NavUtils.navigateUpFromSameTask()`结果同样不满意。

你有什么建议要怎么做才能有这个好的流程吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-09T23:19:49.377

首先，如果您的目标设备高达 API 17 (Android 4.2)，`targetSdkVersion`请在清单中将 设置为 17。这不会破坏对旧设备的支持，它只会让新设备正常工作。当然，这并不能解决您的问题——这样做很好。

## 你应该使用什么？

我假设您的代码基于[此页面](http://developer.android.com/training/implementing-navigation/ancestral.html)上的祖先导航示例。您已经使用了第二个示例：

```
Intent upIntent = new Intent(this, MyParentActivity.class);
if (NavUtils.shouldUpRecreateTask(this, upIntent)) {
    // This activity is not part of the application's task, so create a new task
    // with a synthesized back stack.
    TaskStackBuilder.from(this)
        .addNextIntent(new Intent(this, MyGreatGrandParentActivity.class))
        .addNextIntent(new Intent(this, MyGrandParentActivity.class))
        .addNextIntent(upIntent)
        .startActivities();
    finish();
 } else {
     // This activity is part of the application's task, so simply
     // navigate up to the hierarchical parent activity.
     NavUtils.navigateUpTo(this, upIntent);
 } 
```

但是，对于您想要的行为，您需要替换`NavUtils.navigateUpTo`为：

```
upIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(upIntent);
finish(); 
```

## 为什么它适用于 ICS 及更早版本？

通常，支持库试图**近似于**后来的 API 中引入的行为。在 的情况下`NavUtils`，支持库试图近似 API 16（又名 Android 4.1）中引入的行为。对于 API 16 之前的平台，[NavUtils](https://android.googlesource.com/platform/frameworks/support/+/57ff0548ba991652576d81adaaa8baf4c028de39/v4/java/android/support/v4/app/NavUtils.java)使用：

```
@Override
public void navigateUpTo(Activity activity, Intent upIntent) {
    upIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    activity.startActivity(upIntent);
    activity.finish();
} 
```

这会在后台堆栈中查找 中指定的活动实例`upInent`。如果它找到一个，它会清除它的所有内容并恢复它。否则它只会启动活动。

在 API 16+ 更高版本的平台上，支持库将事情交给`Activity`API 中的本机调用。根据文档：

> public boolean navigateUpTo (Intent upIntent)
> 
> 从这个活动导航到 upIntent 指定的活动，在流程中完成这个活动。如果 upIntent 指示的活动已经存在于任务的历史中，则该活动以及历史堆栈中指示的活动之前的所有其他活动都将完成。
> 
> **如果指示的活动没有出现在历史堆栈中，这将完成此任务中的每个活动，直到到达该任务的根活动**，从而产生“应用内主页”行为。这在具有复杂导航层次结构的应用程序中很有用，当一个 Activity 可以通过不通过规范父 Activity 的路径到达时。

`upIntent`由此，如果它不在后台堆栈中，它是否会启动指定的活动尚不清楚。阅读[源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/Activity.java#L4965)也无助于澄清事情。但是，从您的应用程序显示的行为来看，它似乎**没有**尝试启动该`upIntent`活动。

无论哪种实现是对还是错，最终结果都是您想要的`FLAG_ACTIVITY_CLEAR_TOP`行为，而不是原生 API 16 行为。不幸的是，这意味着您将不得不复制支持库的近似值。

## 哪个是对的？

免责声明：我不为 Google 工作，所以这是我的最佳猜测。

我的猜测是 API 16+ 的行为是预期的行为；它是一个内置的实现，可以访问 Android 内部，并且可以做一些通过 API 不可能完成的事情。在 API 16 之前，我认为除了使用意图标志之外，不可能以这种方式展开回栈。因此，该`FLAG_ACTIVITY_CLEAR_TOP`标志**最接近**API 16 之前的平台可用的 API 16 行为。

不幸的是，结果是在本机实现和支持库实现之间违反了您的场景中[的最小惊讶原则。](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)这让我怀疑这是否是对 API 的意外使用。即，我想知道Android是否希望您遍历活动的完整导航路径，而不是直接跳转到它。

## 以防万一

只是为了避免一种可能的误解，有人可能会期望`shouldUpRecreateTask`神奇地确定父级不在后台堆栈中，并使用`TaskStackBuilder`.

但是，`shouldUpRecreateTask`基本上确定您的活动是由您的应用程序直接启动（在这种情况下它返回`false`），还是它是从另一个应用程序启动的（在这种情况下它返回`true`）。从这[本书](http://books.google.ca/books?id=6aGS01sC33gC&pg=PA660&lpg=PA660&dq=android+shoulduprecreatetask&source=bl&ots=gdWuFMWdp2&sig=M9m-AZ6fUt4MK8t1vs21sFSo72g&hl=en&sa=X&ei=cMMWUf73IuiKiAKp9YEg&ved=0CEUQ6AEwAzgK#v=onepage&q=android%20shoulduprecreatetask&f=false)中，支持库检查意图的“动作”是否不是`ACTION_MAIN`（我不完全理解），而在 API 16 平台上，它会根据任务关联性执行此检查。尽管如此，在这个应用程序的情况下，事情的结果是`shouldUpRecreateTask`返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-13T13:58:23.333

在阅读了@cyfur01 的回答后，我想出了一个非常简单的解决方案来解决这个问题。

在您的 Activity 中覆盖此方法（或者理想情况下在某些 BaseActivity 中为所有子类修复它），它应该按预期工作：

```
@Override
public boolean navigateUpTo(Intent upIntent) {
    boolean result = super.navigateUpTo(upIntent);
    if (!result) {
        TaskStackBuilder.create(this)
            .addNextIntentWithParentStack(upIntent)
            .startActivities();
    }
    return result;
} 
```

它将所有工作留给 Android 实现，然后只检查返回值`navigateUpTo(upIntent)`是*指找不到指定活动的实例并且该活动正常完成*`false`时的返回值。当我们想要手动创建和启动父活动时，情况正是如此。另请注意，我们不必在这里调用，因为它是由 super 方法调用的。*`finish()`*

# highcharts - 样条图不与面积图重叠（Highcharts 框架）

> ID：14602284
> 
> 赞同：0
> 
> 时间：2013-01-30T10:55:04.923
> 
> 标签：highcharts

我的目标是制作一个仅在顶部“边框”加粗的区域范围图表，并在悬停时添加其他标记。我试图只使用一个区域范围图来实现，但我认为区域范围图表是不可能的（线宽适用于底部和顶部边框，我根本无法显示标记......）。我决定继续使用与区域范围图的顶部边界完全重叠的额外样条图。我在这里提供了工作示例：

在 jsfiddle 中检查：/ZvZDZ

正如您在图表顶部看到的那样，样条图并不完全重叠区域范围图，尽管数据是相同的。

1.  有没有办法解决这个问题，所以这两个图会重叠
2.  也许有一种方法可以只使用没有样条图的区域范围图？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:40:34.360

我认为你应该使用或：

*   线系列和面积范围
*   样条系列和面积样条范围

只需混合 spline 和 arearange 即可提供您可以看到的示例。不幸的是，仅使用一个 arearange 系列是不可能的 - 标记被禁用。

示例：http: [//jsfiddle.net/ZvZDZ/2/](http://jsfiddle.net/ZvZDZ/2/)

代码：

```
 series: [{
                        type: 'areasplinerange',
                        name: 'areasplinerange',
                        data: areaData,
                        marker: {
                            enabled: true
                        }
                    }, {
                        type: 'spline',
                        name: 'spline',
                        data: splineData
                    }] 
```

# c# - 当 formborderstyle 设置为 FixedSingle 时，表单无法在 MDIParent 中正确显示

> ID：14602288
> 
> 赞同：0
> 
> 时间：2013-01-30T10:55:13.967
> 
> 标签：c#, vb.net, visual-studio-2010

我正在使用 VB.NET (Visual Studio 2010)

我已将 formborderstyle 设置为 FixedSingle 并从代码中最大化表单

```
With Form1
   .MdiParent = MdiParent1
   .BackColor = FormColor
   .WindowState = FormWindowState.Maximized
   .Show()
End With 
```

当我在 Windows Xp 中测试它时，一切都很好但是在 Windows 7 中，窗体的角落隐藏在 MDIParent 中，所以窗体的 Menustrip 和 StatusStrip 没有正确显示。

如果用户在 Windows 7 中最小化和最大化表单，那么一切都很好。

我怎么解决这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:01:15.163

您可以使用**[ClientSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.clientsize%28v=VS.90%29.aspx)**属性，这将避免不同操作系统上的不同大小

# css - 居中的 div 网页布局

> ID：14602290
> 
> 赞同：0
> 
> 时间：2013-01-30T10:55:19.213
> 
> 标签：css, html

我没有太多的 HTML/CSS 经验，但我试图获得一个简单的布局，其中我有一个居中的 div 作为页面容器。我已经尝试查找其他示例，但我无法弄清楚为什么我的不起作用（标题出现但左对齐，我希望它居中）：

html:

```
<!DOCTYPE html>
<html>
<head>
  <title>title</title>
  <script type="text/javascript" src="script.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div id="container">
    <div id="header"></div>
  </div>
</body>
</html> 
```

CSS：

```
body {
    background: #fff;
    font-family: Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
    text-align: center;
}

#container {
    background: #bbb;
    width: 800px;
    margin: 0, auto;
}

#header, #footer {
    background: #333;
    height: 40px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:58:20.737

```
margin: 0, auto; 
```

应该

```
margin: 0 auto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:59:06.387

删除逗号`margin`：

```
margin: 0 auto; 
```

代替

```
margin: 0, auto; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:59:14.500

你有一个 , 之间`margin:0`，`auto;`这是一个**无效**的CSS 术语

```
margin: 0, auto; 
```

需要是

```
margin: 0 auto; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:04:49.817

[检查这个演示](http://jsfiddle.net/Sriganesh/k9RAh/)

```
body {
    background: #fff;
    font-family: Helvetica, Arial, sans-serif;
    width: 100%; /* You need to mention the width here (Good way)*/
    padding: 0;
    text-align: center;
}

#container {
    background: #bbb;
    width: 800px;
    margin: 0 auto;  /* You are doing wrong here (margin: 0, auto;) */
}

#header, #footer {
    background: #333;
    height: 40px;
} 
```

`margin: 0 auto;`（有效）而不是`margin: 0, auto;`（无效）

# emacs - dired：如何获得真正人类可读的输出（find-ls-option）

> ID：14602291
> 
> 赞同：3
> 
> 时间：2013-01-30T10:55:24.143
> 
> 标签：emacs, dired

我正在寻找`M-x find-dired`/的人类可读输出`M-x find-gred-dired`。我尝试使用以下内容：

```
(setq find-ls-option '("-print0 | xargs -0 ls -alhd" . "-alhd")) 
```

但是，由于`-h`，找到的输出不再正确对齐，因此不是真正的人类可读（参见下面的屏幕截图 [dired+]）。是否有一个（不太侵入性的）解决方案？

![在此处输入图像描述](../Images/8ec661711cd0a57407c62bb5a765abff.png)

正如artscan 指出的那样，`-i`是一种选择。然后我发现了这个“反例”：

![在此处输入图像描述](../Images/64b8c7a20e121d295c03de4094085535.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:51:49.863

我玩了一下。缩进突然很好，除了文件大小以字节为单位的文件（所以没有单位）。然后我想知道“第二组”选项`find-ls-option`是关于什么的。虽然`C-h v find-ls-option`没有以明确的方式解释它（恕我直言），但我发现只需将第二组选项留空即可提供正确的缩进：

```
(setq find-ls-option '("-print0 | xargs -0 ls -alhd" . "")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:01:57.060

编辑：问题出在正则表达式中。您必须修补功能`find-dired-filter`：

```
diff -u -L /usr/share/emacs/24.2/lisp/find-dired.el.gz -L \#\<buffer\ find-dired.el.gz\> /tmp/jka-com8644f_j /tmp/buffer-content-86445Tw
--- /usr/share/emacs/24.2/lisp/find-dired.el.gz
+++ #<buffer find-dired.el.gz>
@@ -289,7 +289,7 @@
            (l-opt (and (consp find-ls-option)
                (string-match "l" (cdr find-ls-option))))
            (ls-regexp (concat "^ +[^ \t\r\n]+\\( +[^ \t\r\n]+\\) +"
-                      "[^ \t\r\n]+ +[^ \t\r\n]+\\( +[0-9]+\\)")))
+                      "[^ \t\r\n]+ +[^ \t\r\n]+\\( +[0-9,.]+\\)")))
        (goto-char beg)
        (insert string)
        (goto-char beg) 
```

# android - AudioCache：堆大小溢出！req Sixe: xxxx, 最大尺寸: yyyy

> ID：14602293
> 
> 赞同：4
> 
> 时间：2013-01-30T10:55:27.493
> 
> 标签：android

我知道这与以下许多 stackoverflow 问题已经重复 [声音剪辑的堆大小溢出问题](https://stackoverflow.com/questions/2308850/heap-size-overflow-issues-with-sound-clips)

[AudioCache 堆大小溢出问题请求大小：1053184，最大大小：1048576](https://stackoverflow.com/questions/9124026/audiocache-heap-size-overflow-issue-req-size-1053184-max-size-1048576)

[Android SoundPool 堆限制](https://stackoverflow.com/questions/6296361/android-soundpool-heap-limits)

还有更多这样的，但我发现没有一个答案能真正解决我的问题。我正在编写一个世界构建游戏，我有大约 20 MB（将来肯定会增加），我已经将其压缩为 .ogg 格式。我需要准备好播放所有这些音效。如果我在需要时单独尝试加载它们，则会出现明显的延迟。所以我不得不在游戏开始时加载它们，但是这个初始加载的缺点会吃掉所有的堆，并且 logcat 充满了这些红色的错误行

> E/AudioCache(1070)：堆大小溢出！请求大小：1050624，最大大小：1048576

我想很多人可能已经在他们的应用程序/游戏中尝试过这种方式，谁能解释一下你们是如何管理的

# c# - wpf中边界控制的奇怪行为

> ID：14602294
> 
> 赞同：1
> 
> 时间：2013-01-30T10:55:30.933
> 
> 标签：c#, wpf, wpf-controls

我在 中添加了以下代码`usercontrol`，因此我可以看到边框`usercontrol`本身。但问题是当我将它添加`usercontrol`到`ManinWindow.xaml`边框时，只显示了标签。可能是什么问题？

```
<Border BorderBrush="Red" CornerRadius="10">            
  <Label  Content="Take Up"></Label>          
</Border> 
```

您的解决方案将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:03:50.887

您可能需要 BorderThickness 属性；

```
<Border BorderThickness="2" BorderBrush="Red" CornerRadius="10">            
  <Label  Content="Take Up"></Label>          
</Border> 
```

例如

# android - 尝试将条目添加到 SQLite 表时出错

> ID：14602297
> 
> 赞同：-2
> 
> 时间：2013-01-30T10:55:37.627
> 
> 标签：android, sqlite, android-sqlite

这是我尝试添加条目时遇到的错误：

```
android.database.sqlite.SQLiteExeption:near "TABLELocation":syntax error(code1):,while compiling: CREATE TABLELocation(idInteger PRIMARY KEY AUTOINCREMENT, nameTEXT NOT NULL, detailTEXT NOT NULL 
```

创建表的查询是：

```
db.execSQL("CREATE TABLE" + DBTable +
    "("+ key_rowID + "INTEGER PRIMARY KEY AUTOINCREMENT," +
    key_name + "TEXT NOT NULL," + key_detail + "TEXT NOT NULL);"); 
```

哪里`DBTable = "table_name"`。如何解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:03:39.633

你错过了一个空间：试试`db.execSQL("CREATE TABLE " + DBTable + ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:05:42.747

我相信你忘记了变量和后面的文本之间的空格。你能试试这个查询吗？

```
CREATE TABLE " + DBTable + "("+ key_rowID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + key_name + " TEXT NOT NULL, " + key_detail + " TEXT NOT NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:02:54.620

问题是缺少空格！`"CREATE TABLE" + DBTable`结果`TABLELocation`。

检查完整的字符串，那里有多个缺失的空格。

# ios - 带有自定义过渡的 presentViewController

> ID：14602298
> 
> 赞同：3
> 
> 时间：2013-01-30T10:55:38.250
> 
> 标签：ios, uiviewcontroller, modal-dialog, transitions

我想展示一个模态 UIViewController，它具有与工具包可用的不同的转换。确切地说，与从底部滑动（UIModalTransitionStyleCoverVertical）相比，我想要一个倒置动画，present = 从顶部滑入，dismiss = 从顶部滑出。

我不认为 UIModalTransitionStyleCoverVertical 有一个简单的倒置选项，所以我想我需要自己做一个。

我也没有使用 segue/storyboard，不确定这是否会有所不同。

我找到了一些解决方案，它们建议简单地为新的 viewcontroller 视图设置动画并使用 presentViewController 并将动画选项设置为 NO。不幸的是，我遇到的问题是背景立即变黑，即使我定义了具有清晰背景且不透明的新视图控制器视图。

知道如何解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:08:35.987

我解决了截屏并将其用作模态视图控制器的背景的不透明背景问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T11:20:02.843

1.  使用 CATransition 应用您的自定义动画。

2.  将`modalPresentationStyle`显示的视图控制器的属性设置为 UIModalPresentationCustom（适用于 iOS 7 或更高版本）。另请参阅 UIModalPresentationOverCurrentContext iOS8 或 UIModalPresentationCurrentContext。

对于我的情况，我想要相同的动画样式，但我只需要为 iOS 8 使用 UIModalPresentationOverCurrentContext。

# php - 使用 php 在 PDF 中嵌入视频/flash

> ID：14602299
> 
> 赞同：7
> 
> 时间：2013-01-30T10:55:40.623
> 
> 标签：php, pdf, video, pdf-generation, video-embedding

是否可以动态`video(any format)/ flash`嵌入`PDF`使用**php**？

我找到了这个[**Link**](https://stackoverflow.com/questions/1889371/sample-pdf-with-embedded-flash-video?rq=1)，但没有用。
我也用谷歌搜索，但没有找到满意的答案来回答我的问题

是否可能（在 php 库的帮助下）？
如果是，在 PDF 中嵌入视频的副作用是什么？

请帮助我进入正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:45:16.683

您应该考虑到每个用户都可能不会使用 Adob​​e。前 - 我个人使用 foxit 阅读器，然后当用户没有得到他们被告知的内容时，这将是一场噩梦。所以最好采用其他方式，您可能会在电子邮件或其他内容中嵌入视频。

# php - 在类别中搜索分页codeigniter

> ID：14602314
> 
> 赞同：0
> 
> 时间：2013-01-30T10:56:33.547
> 
> 标签：php, codeigniter, search, pagination, categories

我想在我的应用程序的日历类别中找到一个词，我设法在日历类别之外的搜索中找到一个词，我想问一下我的问题的正确代码是什么？

我的模型是这样的

```
function SearchResult($perPage, $uri, $judul) {
    $this->db->select('*');
    $this->db->where("IDKategori", $id);
    $this->db->from('kalender');
    if (!empty($judul)) {
        $this->db->like('judul', $judul);
    }
    $this->db->order_by('tanggalMulai', 'DESC');
    $getData = $this->db->get('', $perPage, $uri);

    if ($getData->num_rows() > 0)
        return $getData->result_array();
    else
        return null;
} 
```

我的控制器是这样的

```
function pencarian_kategori($id) {
    if (isset($_POST['submit'])) {
        $data['judul'] = $this->input->post('judul');
        $this->session->set_userdata('sess_judul', $data['judul']);
    } else {
        $data['judul'] = $this->session->userdata('sess_judul');
    }
    $this->db->like('judul', $data['judul']);
    $this->db->where("IDKategori", $id);
    $this->db->from('kalender');

    $idk = $_POST[IDKategori];
    $pagination['base_url'] = base_url() . 'index.php/admin/kalenderkategori/pencarian_kategori/' . $this->uri->segment(4) . '/';
    $pagination['total_rows'] = $this->db->count_all_results();
    $pagination['full_tag_open'] = "<p><div class=\"pagination\">";
    $pagination['full_tag_close'] = "</div></p>";
    $pagination['cur_tag_open'] = "<span class=\"current\">";
    $pagination['cur_tag_close'] = "</span>";
    $pagination['num_tag_open'] = "<span class=\"disabled\">";
    $pagination['num_tag_close'] = "</span>";
    $pagination['first_link'] = 'Awal';
    $pagination['last_link'] = 'Akhir';
    $pagination['next_link'] = 'Selanjutnya';
    $pagination['prev_link'] = 'Sebelumnya';
    $pagination['per_page'] = "10";
    $pagination['uri_segment'] = 5;
    $this->pagination->initialize($pagination);
    $data['ListKalenderPencarian'] = $this->MKalender->SearchResult($pagination['per_page'], $this->uri->segment(5, 0), $data['judul']);

    $data['title'] = "Hasil Pencarian Agenda Pimpinan";
    $data['main'] = 'admin/kalender/kalender_pencarian';
    $this->load->vars($data);
    $this->load->view('layout/dashboard');
} 
```

和我在 kalender_pencarian 中的看法是这样的

```
<form id="form_pencarian" name="form_pencarian" method="post" action="<?= base_url(); ?>index.php/admin/kalenderkategori/pencarian_kategori/<?= $this->uri->segment(4); ?>">
Pencarian Agenda Kegiatan =
<input name="judul" type="text" id="judul" size="30" maxlength="255" class="inputbox" value="<?= $judul; ?>"/>
&nbsp;&nbsp;
<input name="submit" type="submit" id="submit" value="Cari" class="button"/>
&nbsp; <strong>( Berdasarkan Judul )</strong></form><br />

<?php function DateToIndo($date) { $kategoriIndo = array("Jan", "Feb", "Mar",
    "Apr", "Mei", "Jun",
    "Jul", "Agus", "Sep",
    "Okt", "Nov", "Des");
$tahun = substr($date, 0, 4);
$kategori = substr($date, 5, 2);
$tgl = substr($date, 8, 2);
$jam = substr($date, 11, 8);
$result = $tgl . " " . $kategoriIndo[(int) $kategori - 1] . " " . $tahun . " " . $jam;
return($result); }  if ($this->session->flashdata('message')) {
echo "<div class='message'>" . $this->session->flashdata('message') . "</div>"; } if (count($ListKalenderPencarian)) { echo "<table border='1' cellspacing='0' cellpadding='3' width='100%'>\n";
echo "<tr valign='top'>\n";
echo "
        <th><div align='center'>Kegiatan</th>
        <th><div align='center'>Waktu Mulai</th>
        <th><div align='center'>Waktu Akhir</th>
        <th><div align='center'>Pilihan</th>\n";
echo "</tr>\n";
foreach ($ListKalenderPencarian as $key => $list) {
    echo "<tr valign='top'>\n";
    echo "<td>" . $list['judul'] . "&nbsp;</td>\n";
    echo "<td>" . DateToIndo($list['TanggalMulai']) . "&nbsp;</td>\n";
    echo "<td>" . DateToIndo($list['TanggalAkhir']) . "&nbsp;</td>\n";
    echo "<td nowrap><div align='center'>"; ?>
<a href ="<?= base_url(); ?>index.php/admin/kalender/ubah_lagi/<?= $list['IDKalender']; ?>/<?= $this->uri->segment(4); ?>">Ubah</a> |
    <a href ="<?= base_url(); ?>index.php/admin/kalender/hapus_lagi/<?= $list['IDKalender']; ?>/<?= $this->uri->segment(4); ?>">Hapus</a>
<?php echo "</td>\n"; echo "</tr>\n"; } echo "</table>"; } 
echo '<div class="pagination">' . $this->pagination->create_links() . '</div>' ?> 
```

# php - 为什么在 php 页面中添加这个 html 片段可以工作，但会禁用其他 Wordpress 功能？

> ID：14602315
> 
> 赞同：0
> 
> 时间：2013-01-30T10:56:38.100
> 
> 标签：php, wordpress

在我的 WP 主题的 index.php（其他主题有 home.php）的顶部附近有一段代码。它看起来像这样：

```
<?php } ?>
<div class="postwrap">
<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?> 
```

因此，为了在我网站的主页上插入幻灯片和新闻代码，我对其进行了更改，并将其转换为：

```
<?php } ?>
<div class="postwrap">

<script type="text/javascript" src="http://www.domain.org/wp-content/themes
/flexibility3/js/richhtmlticker.js">
</script>

<style type="text/css">
.tickerstyle{width:200px; height:243px; border:1px solid black; background:#adcbff; 
padding:8px; overflow:hidden; margin-left:0px; font-size:12px; font-weight:bold;}
.messagediv{display: none;background:#d7e2f7;}
</style>

<table>
<tr>
<td style="vertical-align:top">
<div id="myhtmlticker" class="tickerstyle">
<strong>What's News?</strong><br />
<div class="messagediv">
<strong><a href="http://www.domain.org/medicaid-medicare/">Medicaid, Medicare Being 
Slashed</a></strong><br /><br />
Medicaid and Medicare are two governmental programs that provide medical 
and health-related services to specific groups of people in the United States.  But 
they're in danger of the impending spending cuts. Read more ... 
</div>
</div>
</td>
<td style="vertical-align:top">
<?php if ( function_exists( 'meteor_slideshow' ) ) { meteor_slideshow(); } ?>
</td>
</tr>
<tr>
<td colspan="2">
<h2>More News &amp; Issues:</h2>
</td>
</tr>
</table>

    <?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); ?> 
```

等等......然后博客摘录显示在下面。自动收报机和幻灯片运行良好。但是由于某种原因，这搞砸了一个插件——一个应该浮动在页面侧面的联系人插件。

现在，联系人插件适用于我博客上的所有其他页面或帖子，但在主页上，它“卡在”我的右侧边栏中，您无法输入任何值（电子邮件、姓名、主题、消息等） . 所以我认为这不是插件的问题，而是我放在该页面中的 html 标记。

有谁知道为什么输入 html 代码可能会搞砸那个插件——但只是为了主页？如果是这样，您可以就如何纠正此问题提供任何指导，我们将不胜感激！

**编辑：**

我错误地认为是导致此问题的 html 标记。我相信这个问题是由我从一个单独的博客域中导入帖子引起的。但是当我对它进行 2011 或 2012 年时，一切正常。但主题没有支持。所以我想我必须在另一个线程中重新表述我的问题，或者自己弄清楚。所以我要求版主关闭这个帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:30:02.157

也许是 CSS 交易？带有 z-index 或绝对位置的幻灯片位于 constact 表单的顶部？你可以用 Firebug、Developer Tools、Dragonfly 来检查它……无论你的浏览器为 CSS 调试提供了什么……

# jquery - jQuery旋转跨浏览器问题

> ID：14602317
> 
> 赞同：0
> 
> 时间：2013-01-30T10:56:37.787
> 
> 标签：jquery, rotation

我正在尝试旋转我的 div，但它只适用于 Firefox。我怎样才能解决这个问题

```
 $(this).animate({
    rotate: '+=90deg',
    '-webkit-transform': '+=90deg',
    '-ms-transform': '+=90deg',
    '-o-transform': '+=90deg',
    '-moz-transform': '+=90deg'

    }, 300); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:00:07.293

您可以使用[Sandpaper](http://www.useragentman.com/blog/2010/03/09/cross-browser-css-transforms-even-in-ie/)，并使用此 CSS 规则：

```
-sand-transform: rotate(90deg); 
```

它支持所有浏览器——甚至是 IE。

# abap - 06215 sap 错误 bapi_po_create1 净价为“0.14”？

> ID：14602322
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:56:49.347
> 
> 标签：abap, bapi

在 bapi_po_create1 我不能发送净价为 0.14。当它大于 1（例如 14.98）时，它返回销售订单号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:34:18.877

[http://scn.sap.com/thread/1462485](http://scn.sap.com/thread/1462485)

这是答案，找到了。

谢谢

# visual-studio-2010 - 2010年打开VS 2012创建的MVC4 EF5项目

> ID：14602328
> 
> 赞同：1
> 
> 时间：2013-01-30T10:57:18.543
> 
> 标签：visual-studio-2010, entity-framework, enums, visual-studio-2012, compatibility

我在 VS 2012 的快速版中创建了一个项目，它是 MVC4，使用 EF5 Model First 和枚举。现在尝试在 VS 2010 中运行相同的项目时出现此错误。

**[错误 1 ​​错误 5：命名空间“ http://schemas.microsoft.com/ado/2008/09/edm](http://schemas.microsoft.com/ado/2008/09/edm) ”中的元素“架构”在命名空间“ [http://schemas.microsoft.com](http://schemas.microsoft.com/ado/2008/09/edm) ”中具有无效的子元素“EnumType” [/ado/2008/09/edm](http://schemas.microsoft.com/ado/2008/09/edm) '。[预期的可能元素列表：命名空间“ http://schemas.microsoft.com/ado/2008/09/edm](http://schemas.microsoft.com/ado/2008/09/edm) ”中的“Using、Association、ComplexType、EntityType、Function、EntityContainer”以及命名空间“##”中的任何元素其他'。**

看来VS2010不支持枚举？但是我检查了正在使用的EF版本，它仍然是v5......所以我很困惑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:03:58.163

当您使用 vs 2010 定位 .NET 4.0 时，实体框架将引用 4.4。

> 当您将 EntityFramework 5.0 安装到面向 .NET Framework 4.0 的项目中时，4.4 来自 EntityFramework.dll 的程序集版本。这只是运行时加载和绑定到程序集的一种副作用，绝不反映产品的版本。

有关更多信息检查[**没有实体框架 4.4 这样的东西**](http://brice-lambson.blogspot.com/2012/10/unicorn-myths-debunked-entity-framework.html)

**兼容性**

> 某些功能仅在编写面向 .NET 4.5 的应用程序时可用。这包括枚举支持、空间数据类型、表值函数和性能改进。如果您的目标是 .NET 4.0，您仍然可以获得所有错误修复和其他小的改进。

有关更多信息，请查看兼容性部分下的[**EF5 版本。**](http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx)

我希望这对你有帮助。

# asp.net-mvc - 数据具有特殊符号时的 URL 路由问题

> ID：14602336
> 
> 赞同：0
> 
> 时间：2013-01-30T10:57:50.447
> 
> 标签：asp.net-mvc, extjs

我开发了一个 ASP.NET MVC 应用程序。我有一个名为 EmployeeController 的控制器，它有一个名为 GetEmployeeByName 的方法。GetEmployeeByName() 将字符串类型的名称作为参数。

所以当我发送这样的请求时，我会取回数据：someDomain:9999/Employee/GetEmployeeByName/Roger Federer

但如果名称包含“&”（你和我），我会收到“400 Bad Request”作为来自服务器的响应。

someDomain:9999/Employee/GetEmployeeByName/you%20&%20me

即使我对其进行编码，也不会得到回复 someDomain:9999/Employee/GetEmployeeByName/you%20&%20me

**对此类（具有特殊字符的数据）数据进行编码的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:59:16.287

> 对此类（具有特殊字符的数据）数据进行编码的正确方法是什么？

正确的方法是使用查询字符串参数，而不是将这些内容作为 uri 部分的一部分。阅读[`following blog post`](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)Scott Hansleman 的文章。我只会引用楼主的结论：

> 在为在请求路径中获得疯狂的东西所做的所有努力之后，值得一提的是，简单地将值保留为查询字符串的一部分（还记得本文开头的 WAY 吗？）更容易、更清洁、更灵活，而且更多安全的。

正如您在博客文章中看到的那样，有一些技巧可以让它工作并绕过 IIS 处理，但我不建议您冒险使用它。只需将此名称放在查询字符串中即可。

# android - 使用 SimpleCursorAdapter 得到 IllegalArgumentException

> ID：14602337
> 
> 赞同：0
> 
> 时间：2013-01-30T10:57:55.040
> 
> 标签：android, android-sqlite, android-adapter

我有一个 SQLite 数据库，我想在 listView 中显示数据，我尝试使用`SimpleCursorAdapter`：

```
contactAdapter = new SimpleCursorAdapter(this, R.layout.contact_row, cursor, 
                                         new String[] { MyDb.ACCOUNT_NAME },
                                         new int[] { R.id.contactNameTv }); 
```

在这条线上，我得到了一个

> IllegalArgumentException：列“_id”不存在。

好吧，谢谢 JVM，我只是不知道该怎么办，因为我什至不使用`_id`列，而且这个语句也是错误的，因为我导出了数据库并用 sqlite 数据库打开器打开，我可以看到`_id`列数据库，所以它确实存在。

有人可以告诉我这个错误应该什么时候出现，它想告诉我什么？

编辑：

njzk2 指出我是对的，我的光标中的“_id”列没有被查询到 func。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:00:20.627

[由于 java.lang.IllegalArgumentException，应用程序在启动时崩溃：列“_id”不存在](https://stackoverflow.com/questions/4974816/app-crashes-on-startup-due-to-java-lang-illegalargumentexception-column-id-d)

请参阅上面具有相同问题的示例可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T15:51:47.713

# 解决方案

您应该在创建表时添加“_id”字段。

```
 //example 

   "CREATE TABLE TABLE_NAME (_id INTEGER PRIMARY KEY AUTOINCREMENT,field1 TEXT, field2 TEXT, etc TEXT)"; 
```

游标必须包含名为“_id”的列，否则此类将不起作用。此外，如果合并的游标在其“_id”列中具有重叠值，则将 {@link android.database.MergeCursor} 与此类一起使用将不起作用。

# 警告！！

SimpleCursorAdapter 此构造函数在 API 级别 11 中已弃用。不鼓励使用此选项，因为它会导致在应用程序的 UI 线程上执行游标查询，从而可能导致响应速度不佳甚至应用程序无响应错误。作为替代方案，将 LoaderManager 与 CursorLoader 一起使用。

[http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)

另一种方法是使用 CursorAdapter 和 CursorLoader。

当您使用数据库时，CursorAdapter 非常有用，例如，如果您想直接从数据库中显示 ListView、GridView 或 RecyclerView 中的数据列表。

CursorLoader 在后台运行异步查询！

[http://developer.android.com/reference/android/content/CursorLoader.html](http://developer.android.com/reference/android/content/CursorLoader.html)

希望对你有帮助！！

干杯。

# instantiation - Ada 中的编译器放弃了通用类型的包的实例化

> ID：14602338
> 
> 赞同：0
> 
> 时间：2013-01-30T10:57:55.763
> 
> 标签：instantiation, ada

好的，所以我尝试运行调用包 dirforinv.adb 的代码：

```
WITH  Text_IO;
WITH  Ada.Numerics.Generic_Real_Arrays;
WITH  Ada.Numerics.Generic_Elementary_functions;
WITH  Ada.Strings.Fixed;
WITH  dirforinv;
PROCEDURE  levfordir  IS

J : CONSTANT  Integer := 100;

TYPE  Real  IS DIGITS  13;

PACKAGE  Real_IO  IS NEW  Text_IO.Float_IO   (Real);
PACKAGE  Int_IO   IS NEW  Text_IO.Integer_IO (Integer);

TYPE  Gen_arr  IS ARRAY (INTEGER RANGE <>, INTEGER RANGE <>)  OF  Real;
TYPE  var_array  IS ARRAY (INTEGER RANGE <>)  OF  Real;

PACKAGE  Real_arrays  IS NEW Ada.numerics.Generic_Real_Arrays (Real);
USE      Real_arrays;
PACKAGE  sdirect      IS NEW dirforinv (var_array, Gen_arr);
PACKAGE  Math         IS NEW Ada.numerics.Generic_Elementary_functions (Real);
USE      Math; 
```

但我收到以下错误。

```
 PACKAGE  sdirect      IS NEW dirforinv (var_array, Gen_arr);
                                             |
    >>> expect float type in instantiation of "Real"
    >>> instantiation abandoned 
```

我不明白这一点，因为 dirforinv 需要 5 个数组，1 个 var_array 和 4 个 Gen_arr。dirforinv 的 .ads 如下。

```
WITH Profiles,
   Profiles.Inputs,
   Profiles.Conversion,
   Profiles.Provide_Grids,
   Profiles.Multipolar,
   Profiles.Unno_Solver,
   Profiles.Outputs,
   Text_IO, Ada.Numerics.Generic_Elementary_Functions;
USE Profiles;

GENERIC
  TYPE Real  IS DIGITS <>;
  TYPE Gen_arr  IS ARRAY (INTEGER RANGE <>, INTEGER RANGE <>) OF REAL;
  TYPE var_array  IS ARRAY (INTEGER RANGE <>)  OF  REAL;

PACKAGE dirforinv IS

 PROCEDURE direct (Variables                 : IN  var_array;
                   StoI, StoQ, StoU, StoV    : OUT Gen_arr );

END dirforinv; 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T11:32:57.413

`dirforinv`（顺便说一句，可怕的名字）的声明是

```
GENERIC
  TYPE Real  IS DIGITS <>;
  TYPE Gen_arr  IS ARRAY (INTEGER RANGE <>, INTEGER RANGE <>) OF REAL;
  TYPE var_array  IS ARRAY (INTEGER RANGE <>)  OF  REAL;

PACKAGE dirforinv IS 
```

它具有三个通用形式参数；您尝试的实例化是

```
PACKAGE  sdirect      IS NEW dirforinv (var_array, Gen_arr); 
```

它只有两个。

# xamarin.ios - 带有 Monotouch 的 DTCoreText

> ID：14602340
> 
> 赞同：1
> 
> 时间：2013-01-30T10:57:59.993
> 
> 标签：xamarin.ios, xamarin

是否可以在 MonoTouch 中使用 DTCoreText 或者是否有一个本地库可以执行 DTCoreText 的功能？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:07:41.727

这看起来很有希望：[https](https://github.com/Cocoanetics/DTCoreText) ://github.com/Cocoanetics/DTCoreText （但我自己没有使用过）。

然后，您只需[创建一个 MonoTouch 绑定](http://docs.xamarin.com/ios/Guides/Advanced_Topics/Binding_Objective-C_Libraries)即可从 MonoTouch 使用它。

# java - 将 XLS 转换为 PDF 的 Web 服务

> ID：14602342
> 
> 赞同：1
> 
> 时间：2013-01-30T10:58:04.640
> 
> 标签：java, tomcat, pdf-generation, jodconverter

我正在开发一个生成 XLS 文件作为输出的 Java 小程序。在让用户查看、下载和打印文档之前，我需要将其转换为 PDF（甚至更好的 PDF/A），因为我需要它不可修改。

我尝试编写一个解决方案，它可以工作。我在我的小程序中下载并捆绑了 JODConverter 2，以便输出 XLS 成为 JODConverter 输入文件，一切正常。问题是这个组件的大小：几乎 2mb。由于我的小程序已经是 3mb，我也不想将 JODConverter 捆绑在其中......

我在文档中读到它也可以作为 Web 服务工作：我创建一个 POST 请求，将其发送到服务并获取文件，所有这些都无需下载一个 kb 的 JODConverter。听起来不错，但我无法让它工作。

下面是我写的代码：

```
public class Main
{
    public static void main(String[] args) throws Exception
    {
        doPost(new URL("http://localhost:8090/pdfconverter/service"), "C:\\Documents and Settings\\Administrator\\Desktop\\Gestione oneri\\calcolo oneri XP.xls");
    }

    private static void doPost(URL url, String binaryFile)
    {
        try
        {
            File binFile = new File(binaryFile);
            URLConnection conn = url.openConnection();
            conn.addRequestProperty("Content-Type", "multipart/form-datastrong text");
            conn.addRequestProperty("Accept", "application/pdf");
            conn.setDoOutput(true);
            DataOutputStream wr = new DataOutputStream(conn.getOutputStream());
            FileInputStream input = new FileInputStream(binFile);
            byte[] buffer = new byte[1024];
            for(int length = 0; (length = input.read(buffer)) > 0;)
            {
                wr.write(buffer, 0, length);
            }
            wr.flush(); // Important! Output cannot be closed. Close of writer will close output as well.
            // Get the response and write it to a file.
            File file = new File("C:\\Documents and Settings\\Administrator\\Desktop\\Gestione oneri\\calcolo oneri XP2.pdf");
            FileOutputStream wrFile = new FileOutputStream(file);
            DataInputStream dataInput = new DataInputStream(conn.getInputStream());
            buffer = new byte[1024];
            for(int length = 0; (length = dataInput.read(buffer)) > 0;)
            {
                wrFile.write(buffer, 0, length);
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

我下载了一个开箱即用的包含 JODConverter Web 服务的 WAR，并将其放入我的 tomcat\webapps\pdfconverter，创建了启动 OpenOffice 服务的脚本

```
soffice -headless -accept=\"socket,host=127.0.0.1,port=8100;urp;\" -nofirststartwizard 
```

但这是我的堆栈跟踪：

```
java.io.IOException: Server returned HTTP response code: 500 for URL: http://localhost:8090/pdfconverter/service
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at main.Main.doPost(Main.java:128)
at main.Main.main(Main.java:25) 
```

其中 Main.java:128 是该行

```
DataInputStream dataInput = new DataInputStream(conn.getInputStream()); 
```

Tomcat 日志显示： 访问日志：

```
127.0.0.1 - - [30/Jan/2013:11:45:24 +0100] "POST /pdfconverter/service HTTP/1.1" 500 4426 
```

[将内容类型从 text/plain 更改为 multipart/form-data 后编辑] 标准日志：

```
Grave: Servlet.service() for servlet [DocumentConverterServiceServlet] in context with path [/pdfconverter] threw exception
java.lang.IllegalArgumentException: unsupported input mime-type: multipart/form-data
at com.artofsolving.jodconverter.web.DocumentConverterServiceServlet.doPost(DocumentConverterServiceServlet.java:69)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我认为POST有问题，因为在转换过程中发生了异常，但我似乎找不到问题：发布的代码是各种试验和错误的最后一个版本，所以可能在此之前我使用正确的 POST 代码并搞砸了其他东西......任何建议都值得赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:17:33.250

起初，您使用as发送`.xls`文件，但遇到异常，表示由于某些错误（可能您的 JODConverter 2 试图将文件转换为文件）而无法解析您的文档。`Mime-Type``text/plain``.xls``.txt`

这是第一个例外。现在你得到了不受支持的异常`multipart/form-data`。这`Mime-Type`从不代表文档，如果您想将另一个文档中的一个文档更改为 .pdf，您必须提供有效的`Mime-Type`定义。

对于`.xls`文件，这个有效`Mime-Type`的是`application/vnd.ms-excel`. 您可以在此处找到其他类型：[xls 的 mime-types](https://stackoverflow.com/questions/974079/setting-mime-type-for-excel-document)。

此更改应允许您将请求发送到 JODConverter

# java - 如何使用 JavaScript/ExtJs 下载文件？

> ID：14602347
> 
> 赞同：-1
> 
> 时间：2013-01-30T10:58:16.413
> 
> 标签：java, javascript, extjs

在 jsp 中，我从 BD 获取文件并希望在客户端下载它：

```
<%
String num = request.getParameter("param");
Statement sta = null;
sta = conn.createStatement();
String fileName="";
String sql=("SELECT files,filename FROM filestock WHERE num =(SELECT filestock_id FROM parcels_temp WHERE num="+num+")");
ResultSet rs=sta.executeQuery(sql);
while(rs.next()){
    byte[] file = rs.getBytes("files");
    fileName=rs.getString("filename");
}
FileOutputStream fs = new FileOutputStream(new File(fileName));
BufferedOutputStream bs = new BufferedOutputStream(fs);
bs.write(file);
bs.close();
fs.close();
rs.close();
ps.close();
%> 
```

我将PDF文件。所以我有一些问题：
1\. 我将如何处理文件以将其发送到 JavaScript。
2\. 我可以使用 ExtJs 3.4 或 JavaScript 保存这个文件吗？

**更新**

现在我尝试将文件从服务器发送到客户端：

```
<%
String num = request.getParameter("param");
Statement sta = null;
sta = conn.createStatement();
String fileName="";
byte[] file=null;
int bufferSize = 8192;
String sql=("SELECT files,filename FROM filestock WHERE num =(SELECT filestock_id FROM parcels_temp WHERE num="+num+")");
ResultSet rs=sta.executeQuery(sql);
while(rs.next()){
    file = rs.getBytes("files");
    fileName=rs.getString("filename");
}
File dFile=new File(fileName);
InputStream in1 = request.getInputStream();
int read;
while ((read = in1.read(file, 0, bufferSize)) != -1) {
    out.write(file, 0, read);
}
sta.close();
rs.close();
conn.close();
%> 
```

但得到错误：

```
The method write(char[], int, int) in the type Writer is not applicable for the arguments (byte[], int, int) 
```

那么该怎么做呢？

**更新2**

使用此代码我没有收到任何错误，但在萤火虫中我看到服务器没有发送给客户端：

```
<%
String num = request.getParameter("param");
Statement sta = null;
sta = conn.createStatement();
String fileName="";
byte[] file=null;
int bufferSize = 8192;
String sql=("SELECT files,filename FROM filestock WHERE num =(SELECT filestock_id FROM parcels_temp WHERE num="+num+")");
ResultSet rs=sta.executeQuery(sql);
while(rs.next()){
    file = rs.getBytes("files");
    fileName=rs.getString("filename");
}
//File dFile=new File(fileName);
FileOutputStream fout = fout = new FileOutputStream(fileName);
//BufferedInputStream in1 = new BufferedInputStream(fout);
InputStream in1 = request.getInputStream();
int read;
while ((read = in1.read(file, 0, bufferSize)) != -1) {
    fout.write(file, 0, read);
}
sta.close();
rs.close();
conn.close();
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:18:27.323

You have simply to create a Download URL with a `Content-Disposition` Header.

Now the bad/good news (It depends on the point of view). You can not store a file through JavaScript onto a users-filesystem (expect the new [File-API](http://www.html5rocks.com/de/tutorials/file/filesystem/)). But this will sandbox your filesystem. So you can't make the browser store that file onto a certain path.

# c# - ASP.NET 如何将隐藏字段和具有可见性属性的文本框呈现为假？

> ID：14602348
> 
> 赞同：4
> 
> 时间：2013-01-30T10:58:16.167
> 
> 标签：c#, asp.net, rendering

```
<asp:HiddenField ID="HiddenField1" runat="server" />
<asp:TextBox ID="Textbox1" runat="server" Visible = "false"></asp:TextBox> 
```

ASP.Net 将如何呈现`asp:HiddenField`并将`asp:TextBox`可见性属性设置为 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:00:38.343

在你的上下文中 html

```
<asp:HiddenField ID="HiddenField1" runat="server" />
<asp:TextBox ID="Textbox1" runat="server" Visible = "false"></asp:TextBox> 
```

`text-box`不会在浏览器上呈现。
但是`hidden field`会被渲染。

您从服务器端代码设置的控件可见性不会在浏览器上呈现。
你想使用使用`css` `display:none`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:02:17.960

它将渲染两者相同

```
<input id="_controlId" type="hidden" value="" name="_controlId"> 
```

您可以在浏览器中打开您的页面并查看页面源代码。

如果您希望服务器根本不呈现您的控件，请将它们放入`PlaceHolder`并设置属性`Visible = "false"`

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server" Visible = "false">
    <asp:TextBox ID="Textbox1" runat="server" ></asp:TextBox>
</asp:PlaceHolder> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:03:16.690

你可以自己找出来。运行您的 .aspx 页面并单击页面上的查看源代码。

隐藏字段将包含在标记中，但您将无法在页面上直观地看到它。

TextBox 设置为从服务器端不可见。除非您将 Visible 属性更改为 true，否则它根本不会出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:09:59.483

术语“渲染”是指 ASP.NET 为 .aspx 页面创建 HTML 的行为，当您将 Visible = false 设置为控件时，它不会被渲染。这意味着没有发送到页面的该控件的 HTML 表示。仅设置样式。

您可以将样式设置为 display: none 来自服务器端代码，如下所示：

```
FromDate.Style.Add(HtmlTextWriterStyle.Display, "none") 
```

这样，元素仍然存在供 JavaScript 操作。

# c# - 如何将重载的方法组作为单个参数传递？

> ID：14602350
> 
> 赞同：0
> 
> 时间：2013-01-30T10:58:23.330
> 
> 标签：c#

我知道我可以通过这样的方法：

```
Class A:
public void foo(Action<Class, Class, Class> bar)
{
    Class a;
    Class b;
    Class c;
    bar(a, b, c);
}
Class B:
public main()
{
    foo(bar);
}
protected void bar(Class a, Class b, Class c); 
```

但我希望它更有条件：

```
Class A:
public void foo(bar) {
    Class a;
    Class b;
    Class c;
    Class d;
    if(condition A)
        bar(a, b, c);
    else
        bar(a, b, c, d);
}
Class B:
public main()
{
    foo(bar);
}
protected void bar(Class a, Class b, Class c);
protected void bar(Class a, Class b, Class c, Class d); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:01:38.877

没有办法传递方法组（一组同名但具有不同签名的方法），除了按名称作为字符串，然后使用反射。任何`Delegate`//表示必须是单个方法`Expression`。`MethodInfo`

所以：你不能。

* * *

建议：

```
interface IBar {
    void bar(Class a, Class b, Class c);
    void bar(Class a, Class b, Class c, Class d);
}
class YourType : IBar {
    void IBar.bar(Class a, Class b, Class c) {...}
    void IBar.bar(Class a, Class b, Class c, Class d) {...}
    ...
    public main()
    {
        foo(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:14:06.210

您可以以`bar`不同的方式命名这两个函数，拥有两个重载`foo`函数并将条件从`foo`移至`main`。

```
 protected void bar1(int a, int b, int c)
    {
        Console.WriteLine("a={0}, b={1}, c={2}", a, b, c);
    }

    protected void bar2(int a, int b, int c, int d)
    {
        Console.WriteLine("a={0}, b={1}, c={2}, d={3}", a, b, c, d);
    }

    public void foo(Action<int, int, int> bar)
    {
        int a = 1;
        int b = 2;
        int c = 3;
        bar1(a, b, c);
    }

    public void foo(Action<int, int, int, int> bar)
    {
        int a = 1;
        int b = 2;
        int c = 3;
        int d = 4;
        bar2(a, b, c, d);
    }

    public void main()
    {
        if (condition)
            foo(bar1);
        else
            foo(bar2);
    } 
```

# c - C 另一个 Memory/Seg fault 错误

> ID：14602354
> 
> 赞同：-4
> 
> 时间：2013-01-30T10:58:44.903
> 
> 标签：c, linux, memory

[编辑：] 我现在删除了很多代码。我已将其简化为一个更直接的问题。

可以吗，传递这个变量...

```
char Record_Info[file_length + 1]; 
```

到另一个函数，像这样：

```
listdir(tempdesc, 0, sockid, Record_Info); 
```

它使用此标头：

```
int listdir(char *dirname, int lvl, int sockid, char Record_Info[]) 
```

而 listdir() 可以多次调用它自己？

.

*** 原始问题 ***

我想知道是否有另一双眼睛可以看看这个。它正在工作，但我添加了更多代码（可能更多`sprintf`，靠近底部），现在`Segmentation fault`发生了。

该程序正确地创建/发送网页，但是当它从`send_recordings_list()`函数返回到`parsing_request()`函数时崩溃。我认为没有必要了解它如何格式化文件中的数据，但无论如何我都包含了这一点。

在大多数情况下，我使用的是静态变量，当我尝试做`free()`任何事情时，它会导致另一个 seg 错误或 gcc lib 错误。另外我不确定在函数（）之间传递变量是否会导致问题？

另外值得一提的是，一个不同的函数（这里没有显示）发出一个大约 4MB 的网页，我可以多次调用它并且它不会崩溃。我`// ******`在一些可能感兴趣的行中放置了一些？

哦，是的，我还没有做太多标准错误处理......（我稍后会做），所以假设它是真空中的球形鸡。

.

所以它开始于`parsing_request()`

去`send_recordings_list()`

去`listdir()`。（这多次调用它自己）

回到`send_recordings_list()`

. （这里的段错误）

回到`parsing_request()`

.

我希望有些人会去'啊，我明白你做了什么`fool`......'

嵌入式 Linux 2.6.27、GCC 4.2.4、32MB 内存

```
void parsing_request(int sockid, char *buff)
{
  char *res_line=malloc(MAXLINE), path[MAXLINE], *line;
  // Cut code
  if (strcmp(line, "/recordings_body.htm") == 0)
  {
    send_recordings_list (sockid);      // ****** IT GOES HERE 1st ******
    return;
  }
  free (res_line);
  return;
}

int send_recordings_list(int sockid)
{
    int  hnd;
    int  hnd2;
    char tempdesc[MAX_PATH_LENGTH];

    // Copy all of the data <1 MiB   (Slow reading)
    int file_length = lseek (hnd2, 0, SEEK_END);
    char Record_Info[file_length + 1];      // ******
    lseek (hnd2, 0, SEEK_SET);
    read (hnd2, Record_Info, file_length);
    close (hnd2);

    // Cut out code

    del_file_cnt = 0;
    sprintf (tempdesc, "%s/Recordings", TOPPY_DIR);
    listdir(tempdesc, 0, sockid, Record_Info);        // ***** Major 2nd call here
    return 0;
}

int listdir(char *dirname, int lvl, int sockid, char Record_Info[])
{

    int i;
    DIR* d_fh;
    struct dirent* entry;
    char longest_name[4096];
    char tempdesc[4096], morespace[128];
    int  row_col;
    char chan_name[128], alt_name[128], desc[500], category[128], rec_time[14], start_time[14], end_time[14];
    char trim_file_name[128], trim_file_name2[128], trim_alt_name[128], file_links[1535];
    char logo[128];
    int  length, u_score, dot;
    char *looky_pos1, *looky_pos2;
    int  is_match;

    struct tm tm_rec, tm_start, tm_end;
    time_t tim_rec, tim_start, tim_end;

    // Cut out code

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:23:36.730

对不起，这是一个无可救药的烂摊子。了解如何使用 valgrind 和 gdb 等 Linux 工具。仔细检查您请求的内存是否最终在使用完毕后被释放*一次*。检查您是否没有将指向局部变量的指针传递到函数之外。检查您的字符串是否足够长以容纳预期的数据（或作为您目前不存在的错误处理的一部分进行检查）。

一个非常有效的调试策略是泰迪熊顾问：找一只泰迪熊，一步一步地向它解释你的问题。只有当这没有帮助时，才需要一个真正的人。[它之所以有效，是因为整理你的理解来解释它会迫使你真正思考它。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:25:44.740

快速查看您的代码后，您有两个选择：

1.  学习如何处理错误、如何管理资源以及如何避免全局变量
2.  使用为你做的编程语言

两者都需要很长时间，但使用第二种方法，你会更有效率。

我建议尝试用 Python 实现上述内容，只是为了感受一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:43:49.063

回答您最近的帖子，询问您是否可以将字符值传递给函数...我不明白您要做什么。在函数原型中，您有最后一个参数作为 char variable_name[]，您是否要传入一个数组？如果是这样，为什么不使用指针？

所以原型会喜欢：

```
int listdir(char *dirname, int lvl, int sockid, char* Record_Info); 
```

无论您是否愿意，通过引用传递总是会给您更多的控制权。您是否尝试传入数组的特定元素？

# configuration - Play 1.2.5 的本地 application.conf？

> ID：14602358
> 
> 赞同：5
> 
> 时间：2013-01-30T10:58:53.857
> 
> 标签：configuration, local, playframework-1.x

是否可以在 Play 1.2.5 中使用本地 application.conf？我们的问题是不同的开发人员有一些不同的设置，我们不想保存到版本控制中。

找到的替代品：

*   只需修改 application.conf
    *   必须小心不要将更改提交到 VCS
*   环境：每个开发人员自己的环境：%john, %mary（保存到 VCS）
    *   好的替代方案，即使我们不想将它们保存到版本控制中
    *   我们确实在开发过程中时不时地改变了这些 -> 会导致不必要的改变
*   @include : 附加配置文件的 application.conf 选项
    *   [播放 1.2.5 文档](http://www.playframework.org/documentation/1.2.5/main#conf "播放 1.2.5 文档")：*这是一个尚未正常工作的实验性功能。*:(

还有什么？

特别是，有没有办法告诉 Play 使用自定义文件名（如“conf/application.conf.local”而不是默认的“conf/application.conf”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T15:39:36.257

您可以附加：

```
%my_play_id.@include.application.conf=my_application.conf 
```

在 application.conf 的末尾。每个开发人员或环境一行。您可以覆盖 my_application.conf 中的某些属性，并且不需要将 %my_play_id 附加到已更改的属性中。例如，如果您有三个开发人员：

```
%developer1.@include.application.conf=developer1_conf.conf
%developer2.@include.application.conf=developer2_conf.conf
%developer3.@include.application.conf=developer3_conf.conf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:21:27.410

我看过剧！1.2.5的源代码，但找不到任何提示Play！将能够拿起文件以外的任何东西`conf/application.conf`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:08:30.240

我刚刚遇到了可以提供帮助的 Play 1.x 模块[externalconfig](http://www.playframework.org/modules/externalconfig "外部配置")。似乎为我们的目的工作。另外，这有助于将生产密码等远离 VCS。

请注意，此模块仅适用于 Play 的 Java 代码 - 在 Python 中实现的 Play 模块（例如[migrate](http://www.playframework.org/modules/migrate)）将不知道外部配置。其他依赖于`onConfigurationRead()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T19:01:45.690

`@include`已经为我们的设置工作，我们在 play 1.2.5 上导入不同的环境配置。

如果您的团队很小，请让每个开发人员检查他们自己的配置，每个配置都有自己的前缀用户密钥：

```
%[user-key].[property]=[value] 
```

然后每个开发人员都必须更改启动游戏

`play run --%[user-key]`而不是简单地`play run`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T15:07:44.107

我们所做的是为具有推荐配置（而不是实际的 application.conf）的 VCS 创建一个 application.template 配置。

这样，每个开发人员都有责任创建自己的 application.conf 并改进 VCS 中的模板。

这样就不会有人搞乱部署配置和其他开发人员的配置。

如果您想对部署配置进行版本控制，只需将其添加到您的 VCS 的标记版本中

# java - 复制目录 - 制定进度

> ID：14602360
> 
> 赞同：0
> 
> 时间：2013-01-30T10:58:57.240
> 
> 标签：java, android, backup

我有一个例程，我已经使用了一段时间来将目录从 SD 卡复制到插入的 USB 驱动器。它可以工作，但由于可以有 3000 张照片，我相信你会觉得它有点慢。所以我正在尝试实现某种更新进度条。

这是我的复制代码；

```
public void copyDirectory(File sourceLocation , File targetLocation)
            throws IOException {

        Log.e("Backup", "Starting backup");
        if (sourceLocation.isDirectory()) {
            if (!targetLocation.exists() && !targetLocation.mkdirs()) {

                throw new IOException("Cannot create dir " + targetLocation.getAbsolutePath());

            }

            String[] children = sourceLocation.list();
            for (int i=0; i<children.length; i++) {
                copyDirectory(new File(sourceLocation, children[i]),

                        new File(targetLocation, children[i]));

            }
        } else {

            Log.e("Backup", "Creating backup directory");
            File directory = targetLocation.getParentFile();
            if (directory != null && !directory.exists() && !directory.mkdirs()) {
                throw new IOException("Cannot create dir " + directory.getAbsolutePath());
            }

            InputStream in = new FileInputStream(sourceLocation);
            OutputStream out = new FileOutputStream(targetLocation);

            byte[] buf = new byte[1024];
            int len;
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
            in.close();
            out.close();
            Log.e("Backup", "Finished");

        }

    } 
```

我假设我需要在开始之前检查目录有多大，所以我添加了：

```
 public static int CountFilesInDirectory(String location) {
        File f = new File(location);
        int count = 0;
        for (File file : f.listFiles()) {
                if (file.isFile()) {
                        count++;
                }
        }

        return count; 

} 
```

但我想，我无法弄清楚如何将 A 和 B 放在一起。我不知道如何在正确的位置增加更新。- 我可能走错了路！任何提示真的将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:07:27.877

[http://labs.makemachine.net/2010/05/android-asynctask-example/](http://labs.makemachine.net/2010/05/android-asynctask-example/)

请参阅上面的链接异步任务加载概念将对您有所帮助

# c# - 记录异常

> ID：14602368
> 
> 赞同：1
> 
> 时间：2013-01-30T10:59:32.877
> 
> 标签：c#, logging

我建立了一个对象来计算和记录错误。我在计时器过去后写日志。我不知道每个日志周期会发生多少错误，所以我将 List _lastReadErrors 设置为最多 5 个错误。在完整实施中，我想记录更多错误。日志记录对象应该使用尽可能少的内存。如果我在列表中放 30 个字符串，会有很大的不同吗？

```
public static class Monitor
{
    private static object _syncRoot = new object();

    private static DateTime _monitorStart;

    private static Timer _logTimer;

    private static int _readErrorsAbsolute;

    private static List<string> _lastReadErrors;

    public Monitor()
    {
        _monitorStart = DateTime.Now;
        _logTimer = new Timer();

        _readErrorsAbsolute = 0;

        _readErrors = new List<string>();

        _logTimer.Elapsed += writeLog;
        _logTimer.Interval = 3600000;
        _logTimer.AutoReset = true;
        _logTimer.Enabled = true;
    }

    public DateTime MonitorStart
    {
        get { return _monitorStart; }
    }

    public int ReadErrorsAbsolute
    {
        get { return _readErrorsAbsolute; }
    }

    public void ReadError(Exception ex)
    {
        Interlocked.Increment(ref _readErrorsAbsolute);

        lock (_syncRoot)
        {
            if (_lastReadErrors.Count > 4) _lastReadErrors.RemoveAt(0);
            _lastReadErrors.Add(ex.StackTrace);
        }
    }

    private void writeLog(Object sender, ElapsedEventArgs e)
    {
        string logString = buildLogString();

        // write the logstring into a memorystream

        _monitorStart = DateTime.Now;

        _readErrorsAbsolute = 0;

        lock (_syncRoot)
        {    
             _readErrors = new List<string>();
        }
    }

    private string buildLogString()
    {
        StringBuilder sb = new StringBuilder();

        sb.Append("Date: " + _monitorStart.ToString() + " Errors: " + _readErrorsAbsolute.ToString() + Environment.NewLine);

        lock (_syncRoot)
        {
            foreach (string error in _lastReadErrors)
            {
                sb.Append(error + Environment.NewLine);
            }
        }

        return sb.ToString();
    }
} 
```

# sql - 如何覆盖informix sql中“load from”语句中的匹配键

> ID：14602369
> 
> 赞同：2
> 
> 时间：2013-01-30T10:59:41.950
> 
> 标签：sql, informix, insert-update

我有一个表（in informix），它存储两列：empId 和状态（Y/N）。还有一些其他脚本在运行时会根据特定条件更新这些员工 ID 的状态。手头的任务是，用户提供包含员工 ID 的文件的路径。我有一个脚本，然后查看该文件并执行“从 user_supplied_file 加载插入到 employeeStatusTable”。此文件中提到的所有employeeID 都将插入此表中，状态为“N”。真正的问题是用户提供的文件可能包含一个已存在于表中的employeeId，其状态已更新为“Y”（通过其他脚本或作业）。在这种情况下，应该覆盖现有条目。简而言之，表中的条目应为“empId”、“N”。

有没有办法实现这一点？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:32:41.090

据我所知，LOAD 语句仅限于与 INSERT 语句一起使用。我很确定有很多方法可以做到这一点，我会建议两种方法：

在这两种情况下，仅支持 >= 11.50 的数据库版本，并且具有某些限制，例如：

*   仅当两个表具有 1 对 1 关系时，合并才有效
*   外部表仅限于数据库服务器文件系统，不会访问客户端计算机上的任何内容

## 建议 1

加载到临时表中，然后使用[MERGE](http://publib.boulder.ibm.com/infocenter/idshelp/v115/topic/com.ibm.sqls.doc/ids_sqs_2030.htm)语句。

```
create temp table tp01 ( cols.... ) with no log ; 
load from xyz.txt insert into tp01 ; 
merge into destTable as A
  using tp01 as B 
  ON A.empID = B.empID
  WHEN MATCHED THEN UPDATE SET status = 'N'
  WHEN NOT MATCHED THEN INSERT (empid, status) values ( b.empid, 'N');
drop table tp01; 
```

## 建议 2

为您的 TXT 文件创建一个[外部表](http://publib.boulder.ibm.com/infocenter/idshelp/v115/topic/com.ibm.sqls.doc/ids_sqs_2053.htm)，然后在需要时使用此表使用 MERGE 或 UPDATE。

```
create external table ex01 .... using ( datafile('file:/tmp/your.txt'), delimited ...);
merge into destTable as A
  using ex01 as B 
  ON A.empID = B.empID
  WHEN MATCHED THEN UPDATE SET status = 'N'
  WHEN NOT MATCHED THEN INSERT (empid, status) values ( b.empid, 'N'); 
```

# php - PHP - 在地图中调用函数后的奇怪行为

> ID：14602373
> 
> 赞同：3
> 
> 时间：2013-01-30T10:59:50.637
> 
> 标签：php, firefox, localhost, anonymous

调用此 PHP 脚本时，浏览器的反应非常奇怪。

```
<?php
    $map = array(
        'a' => function(){
                print_r('a');
            },

        'b' => function(){
                print_r('b');
            }
    );  
    $map($_GET['v']);
?> 
```

我已经注意到那里有一个错误。调用的语法是错误的，应该是这样的：

```
$map[$_GET['v']](); 
```

问题是浏览器对这个错误的反应不是应该的。

运行此脚本的结果是“连接已重置”消息。服务器已启动并正常运行，因为其他 PHP 文件（以及更正错误后的这个文件）运行良好。

但真正让我困惑的是浏览器的导航栏是做什么的。当我输入网址时

```
localhost/cerdo.php?v=a 
```

栏的内容变为

```
www.localhost.com/cerdo.php?v=a 
```

www.localhost.com 部分似乎只发生在 Firefox 中。我已经在 Chromium 上尝试过，尽管显示了类似的消息（“未收到数据”），但 URL 保持不变。

怎么了？这有道理吗？PHP不应该报告语法错误吗？为什么 Firefox 会重定向到 www.localhost.com？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:31:40.553

**PHP不应该报告语法错误吗？**

不。如果 PHP 没有报告`$map($_GET['v']);`语法错误是因为它期望代码在语法上有效。所以它最终会执行一些你没想到的非常奇怪的东西。这会导致您的浏览器重定向到某个无法解释的位置。

这里的关键是了解`$map($_GET['v']);`实际含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:00:15.403

重定向与您的代码没有任何关系。您的环境设置如何，例如您是否使用 Xampp 等？在这种情况下，请确保您的 Web 根目录中有任何 index.php 或 .htaccess 或任何其他包含重定向脚本的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:20:34.927

如果这不是您第一次使用开发环境，请忽略这一点：

我认为您的问题是：操作系统无法识别域名（并且操作系统对其进行了扩展）。在 Windows 下，您可以在此处找到“主机”文件：

"%SYSTEMROOT%\System32\drivers\etc\"

将此行添加到文件末尾：

127.0.0.1 本地主机

（也许您应该重新启动计算机。）它应该可以解决您的问题

# asp.net - asp.net 中的 Gridview 控件

> ID：14602374
> 
> 赞同：0
> 
> 时间：2013-01-30T10:59:50.783
> 
> 标签：asp.net, gridview

我有一个`GridView` 列名`itemname`,`category`和`date`. 此外，我还有、`add`、`update`和`edit`按钮。如果我单击该按钮，将更改为另一种颜色（禁用）。`cancel``delete``delete``selectedrow``Gridview`

我再次转到`selectedrow`显示禁用模式和其他行显示正常的同一页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:07:04.620

是的，我在我的项目中做到了这一点

我正在给你一些关于如何做到这一点的方法。如果要删除任何行数据，则必须存储一些值，例如当我删除行的任何数据时，我将其值设置为 7，然后在网格行命令上，我发现该状态是否为 7，然后我更改该行的颜色.. 以及如何你会这样做，这是代码。

`gridview`您在放置记录状态（如已删除）的位置放置了一个标签

```
<asp:TemplateField HeaderText="Status" HeaderStyle-HorizontalAlign="Left">
      <ItemTemplate>
 <asp:Label ID="lblStatus" runat="server" Text='<%#Eval("StatusID") %>'></asp:Label>
      </ItemTemplate>
 </asp:TemplateField> 

protected void GridView1_OnRowDataBound(object sender, GridViewRowEventArgs e)
    {
      Label myLabel = (Label)e.Row.FindControl("lblStatus");
      string value = myLabel.Text;

      if (value == "7")

         {
           e.Row.BackColor = Color.Red;
         }
   } 
```

# apache-flex - Gradlefx 编译失败，依赖 as3commons-logging

> ID：14602375
> 
> 赞同：1
> 
> 时间：2013-01-30T10:59:51.727
> 
> 标签：apache-flex, gradle, gradlefx

我为 Flex swc 项目创建了一个 gradle 构建文件，该文件在 intellij IDEA 中成功编译。

我的项目包含依赖项

```
internal group: 'org.as3commons', name: 'as3commons-logging', version: '2.7', ext: 'swc' 
```

编译失败，出现如下错误

```
....\lib\as3commons-logging-2.7.swc(org.as3commons.logging.integration:SLF4ASIntegration)

  Error: Type was not found or was not a compile-time constant: [com.furusystems.logging.slf4as.bindings]::ILogBinding. 
```

我看到日志库确实包含对来自其他库的接口的引用，但是在 IDE 中它以某种方式通过了编译甚至可以工作。

我应该设置哪个 gradlefx 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:28:43.927

解决了！我将依赖配置从“内部”更改为“合并”！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:34:43.857

酷 :) 此外，我们有一个 GradleFx 支持论坛，您可以在这里找到：http: [//support.gradlefx.org/home](http://support.gradlefx.org/home)

# php - 如何构建自动循环 PHP - SQl

> ID：14602377
> 
> 赞同：0
> 
> 时间：2013-01-30T10:59:59.953
> 
> 标签：php, sql

我有 2 张桌子：

```
1\. Team
id  group_head  initial_team
id : for id table (auto increment)
Group Head : employee id to add group head
initial team : initial team for this team

2\. Team Sub
id  team_id     employee_id     parent  parent_id
id : id for table (auto increment)
team_id : id of the Team_table
employee_id : employee id
parent : value 0 if they child from team_sub, value 1 if they child from team
parent_id : if parent value 1 the parent id is id team, if parent value 0 the parent is id team sub 
```

我的问题：如何知道团队（组长）的孩子总数？或者如何知道id team的底层孩子？如果我删除 id team 孩子也会被删除..

例子 ：

```
id team : 1

data from team_ sub :
status parent: 1 parent_id : 1 (id this data is 1)
status parent: 0 parent_id : 1 (id this data is 2)
status parent: 0 parent_id : 2 (id this data is 3)
status parent: 0 parent_id : 3 (id this data is 4)
status parent: 0 parent_id : 4 (id this data is 5) 

id team : 2

data from team_ sub :
status parent: 1 parent_id : 2 (id this data is 6)
status parent: 0 parent_id : 6 (id this data is 7)
status parent: 0 parent_id : 7 (id this data is 8)
status parent: 0 parent_id : 8 (id this data is 9)
status parent: 0 parent_id : 9 (id this data is 10) 
```

![图片上的示例](../Images/6daf1aaa420c7f585aea7210a9354f5c.png)

其中父状态为 1，parent_id 为 id team..
父状态为 0，parent_id 为 id team_sub..

这是图像上的关系数据， ![在此处输入图像描述](../Images/dc6c2f1907fd53c458d353e96e253c2a.png)
如果我的英语不好，抱歉...

id team_sub 10 是 id team 2 的孩子，id team_sub 5 是 id team 1 的孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:48:23.013

现在无法检查，但如果我理解正确的话应该是这样的：

```
SELECT * FROM Team_Sub WHERE (parent_id = 0) 
```

它选择技术上属于 parent_id =1 的每个条目，也就是 sub_team 的一部分

如果您只想要一些具有此条件的条目：

```
SELECT COUNT(*) FROM Team_Sub WHERE (parent_id = 0) 
```

例子：

```
//Count all entries in Team_ID 1:

SELECT COUNT(*) FROM Team_Sub WHERE (parent_id = 1) 

//Select all entrys in Team_ID 2:

SELECT * FROM Team_Sub WHERE (parent_id = 2) 

//Count all Entries that do belong to an Team_ID:

SELECT COUNT(*) FROM Team_Sub WHERE NOT (parent_id = 0) 

//Select all Entries that do belong to an Team_ID:

SELECT * FROM Team_Sub WHERE NOT (parent_id = 0) 
```

我会推荐以下结构：

```
status parent: 1 parent_id : 2 (id this data is 6)
status parent: 0 parent_id : 2 (id this data is 7)
status parent: 0 parent_id : 2 (id this data is 8)
status parent: 0 parent_id : 2 (id this data is 9)
status parent: 0 parent_id : 2 (id this data is 10) 
```

这样，您可以通过“parent_id”确定团队，并通过“父”确定团队负责人。

所以在上面的例子中：

```
id 6 is Head of Team 2
id 7 is Subordinate of Team 2
id 8 is Subordinate of Team 2
id 9 is Subordinate of Team 2
id 10 is Subordinate of Team 2 
```

通过这个你可以通过简单地确定“parent_id”和“parent”来查询你想要的任何条目

例如：

```
//Just Heads of any Team:
SELECT * FROM Team_Sub WHERE (parent = 1)

//Just Head of a specific team:
SELECT * FROM Team_Sub WHERE (parent = 1) AND (parent_id="team id")

//Just Subordinates of any Team:
SELECT * FROM Team_Sub WHERE (parent = 0)

//Just Subordinates of a specific team:
SELECT * FROM Team_Sub WHERE (parent = 0) AND (parent_id="team id")

//Just Anybody of a specific team:
SELECT * FROM Team_Sub WHERE (parent_id="team id") 
```

***仅供参考：如果对值名称还没有任何依赖关系，id建议将“parent”重命名为“head_of_team”，将“parent_id”重命名为“team_id”***

# javascript - 如何过滤 jQuery DataTables 中的列？

> ID：14602378
> 
> 赞同：0
> 
> 时间：2013-01-30T11:00:00.190
> 
> 标签：javascript, jquery, dom, datatables, filtering

按如下方式过滤 DataTables 中的行：

```
$.fn.dataTableExt.afnFiltering.push(
    function( oSettings, aData, iDataIndex ) {
        if ( aData[3] == 'ru' )
        {
            return true;
        }
        return false;
    }
); 
```

这里是如何过滤列？例如我有专栏（ [http://jsfiddle.net/JLvWu/](http://jsfiddle.net/JLvWu/) ）：

```
Date   |      City1      |      City2      |      City3        |
       | Revenue | Costs | Revenue | Costs | Revenue | Costs   | 
```

如何使当您按城市过滤时，只有一个城市被选中，而所有其他列都消失了？例如，如果用户在城市过滤器 City1 中选择，则表必须更改如下：

```
Date   |      City1      |
       | Revenue | Costs | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:59:34.247

有数据表文档，显示如何动态隐藏/显示列： [http ://www.datatables.net/examples/api/show_hide.html](http://www.datatables.net/examples/api/show_hide.html)

# c# - ASP.Net 中的 WebGL？

> ID：14602383
> 
> 赞同：0
> 
> 时间：2013-01-30T11:00:09.983
> 
> 标签：c#, asp.net, vb.net, browser, webgl

我有一个关于在 ASP.NET 内部实现的 WebGL（使用 javascript）的问题。我目前正在做一个项目，我希望能够使用 WebGL 来加载模型，但在 ASP.Net 内部具有执行其他任务的功能。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:02:24.183

我建议使用[THREE.js](https://github.com/mrdoob/three.js)库。它非常稳固，拥有良好的充满活力的社区，但还有很多事情要做，imo。

你可以在这里找到好的策略点：[Learning Three.js](http://learningthreejs.com/blog/2011/12/20/boilerplate-for-three-js/)

设置怎么样`ASP.NET`，您可以使用任何您想要或感觉舒适的设置：WebForms 或 MVC。最后你需要的是

*   HTML 数据渲染（WebForms.MVC、node.js...）
*   与`WebGL`( `three.js`)一起使用的 javascript
*   *json*请求*推送*和*拉取*数据（通常是块，因为`3D`模型往往很大并且容易溢出可用的*json*数据限制，所以你需要将它分成小块）

# iphone - 如何使用我的应用程序锁定 iPhone 设备？

> ID：14602391
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:00:36.537
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我正在开发一个带有密码锁定选项（pic1）的应用程序。当我输入正确的密码时，它会进入应用程序。当我输入错误的密码时，它会执行一些其他操作（图 2）。 ![在此处输入图像描述](../Images/1e01dbc7b0dafaae943d4e480e512ef6.png) 一段时间后应用程序进入睡眠状态，当应用程序进入活动状态时，我们必须再次输入密码。

在这里我的要求是我想在解锁设备后打开“密码锁定屏幕”（pic1.，由我创建），（pic3.，这是 Iphone 中的默认锁定选项）。除非我输入正确的密码，否则“密码屏幕”应该贴在窗口上。尽管我单击了iphone的按钮，但它不应移动到任何其他屏幕（图4，带有一组应用程序图标的屏幕）。

这个要求正在消磨我的时间，如果您已经完成，我不介意发布示例代码或教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:12:37.870

您不能使用未越狱的 iPhone 执行此操作。一个应用程序不能禁止用户切换到另一个应用程序（并且它不能修改另一个应用程序）

当然也适用于跳板（pic​​4）

# sql-server-2008 - 调试存储过程但没有返回值

> ID：14602392
> 
> 赞同：0
> 
> 时间：2013-01-30T11:00:37.193
> 
> 标签：sql-server-2008, stored-procedures

我的应用程序根据我的用例要求调用存储过程。存储过程将记录插入到由主键和外键约束相关的两个表中。

这意味着表中必须存在于`PatientNumber`表中。`Visit``Patient`

当我调试此过程时，设置初始值后不显示任何值。

我是新手，请帮忙。

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[Add_Patient_Visit]
AS
BEGIN TRANSACTION
    SET NOCOUNT ON; 

    declare @Visit_Number Varchar(50)
    declare @Prescription_Number Varchar(50)
    declare @Visit_Date Datetime = GETDate()

    set @Visit_Number = '25684956555'
    set @Visit_Date = GETDATE()
    set @Prescription_Number = '653214658'

    INSERT INTO Visits(Visit_Number, Visit_Date, Patient_Number)
    VALUES(@Visit_Number, @Visit_Date, @Patient_Number)

    IF @@ERROR <> 0
    BEGIN 
        ROLLBACK
        RETURN
    END

    declare @Patient_Number Varchar(50)
    declare @FirstName Varchar(50)
    declare @LastName Varchar(50)
    declare @Trible Varchar(50)
    declare @Gender Varchar(5)
    declare @Date_Of_Birth Datetime

    INSERT INTO Patient(Patient_Number, FirstName, LastName, Tribe, Gender, Date_Of_Birth)
    VALUES (@Patient_Number, @FirstName, @LastName, @Trible, @Gender, @Date_Of_Birth)

   IF @@ERROR <> 0
   BEGIN
       ROLLBACK
       RETURN
   END

   COMMIT
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:45:25.047

上述程序有误。您在声明之前使用@Patient_Number，同时插入表“访问”。在开始时声明它，例如：

```
declare @Patient_Number Varchar(50)
declare @Visit_Number Varchar(50)
declare @Prescription_Number Varchar(50)
declare @Visit_Date Datetime = GETDate()
set @Visit_Number = '25684956555'
set @Visit_Date=GETDATE()
set @Prescription_Number='653214658'

Insert into Visits(Visit_Number,Visit_Date,Patient_Number)
Values(@Visit_Number,@Visit_Date,@Patient_Number)
IF @@ERROR <> 0
BEGIN 
ROLLBACK
RETURN
END

declare @FirstName Varchar(50)
declare @LastName Varchar(50)
declare @Trible Varchar(50)
declare @Gender Varchar(5)
declare @Date_Of_Birth Datetime

INSERT INTO Patient(Patient_Number,FirstName,LastName,Tribe,Gender,Date_Of_Birth)
VALUES (@Patient_Number,@FirstName,@LastName,@Trible,@Gender,@Date_Of_Birth)
IF @@ERROR <> 0
BEGIN
ROLLBACK
RETURN

END
COMMIT 
```

# c# - 如何通过单击执行多个方法？

> ID：14602397
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:00:43.163
> 
> 标签：c#, button, browser

我想自动执行许多只点击第一个按钮的按钮，所以我在每个按钮中都使用了：

```
webBrowser1.DocumentCompleted +=
    new WebBrowserDocumentCompletedEventHandler(Button2_Click); 
```

但是程序崩溃了。我如何才能一个一个地开始执行几个方法（每个方法必须等到前一个结束）？

为了简化，我的第一个方法必须加载一个网页，第二个必须填写页面中存在的字段。当我分别执行这两个方法时一切顺利，但是如果我在一个按钮中执行两个方法 Method1 (); 方法2（）；它给了我一个错误 HtmlElement = webBrowser1.Document.GetElementById txtbox ("txtbox1"); 它没有找到元素，所以可能是页面尚未下载，所以我将每个方法放在一个按钮中，并添加到第一个按钮，行 webBrowser1.DocumentCompleted + = new WebBrowserDocumentCompletedEventHandler (Button2_Click); 所以当webbrowser下载页面时，按钮会执行第二个，但还是一样的错误：找不到txtbox1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:04:37.147

像这样将方法调用放入侦听器的方法 Button2_Click 的简单方法

```
 {
method1();
    method2();
    method3();
    method4();
} 
```

# c++ - 从头文件中分解C++源代码

> ID：14602399
> 
> 赞同：0
> 
> 时间：2013-01-30T11:00:48.257
> 
> 标签：c++, c++builder, visual-c++

> **可能重复：**
> [用于将实现与 .h 文件中的标头分开的脚本](https://stackoverflow.com/questions/5329469/script-for-separating-implementation-from-headers-in-a-h-file)

我有一个包含源代码的大头文件，如下所示：

```
class test_class_t 
{
public:
    test_proc()
    {
        // source code
    }
} 
```

有没有一个工具可以从头文件中分解 c++ 源代码并给我两个像这样的文件：

//标题：

```
class test_class_t 
{
public:
    void test_proc();
} 
```

// 资源：

```
void test_class_t::test_proc()
{
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:10:21.337

请注意，类本身中定义的成员函数是内联的，如果您将它们移动到单独编译的文件中会发生变化。像您要求的那样进行更改可能不仅仅是将函数“移出”，而是将类拆分为可见接口和隐藏实现。如果工具可以自动执行此操作，我确实会感到*非常惊讶。*

# emacs - dired: Mx find-dired: 禁用历史记录？

> ID：14602400
> 
> 赞同：3
> 
> 时间：2013-01-30T11:00:49.433
> 
> 标签：emacs, dired

我设置`(setq find-args "-iname ")`这样`M-x find-dired`给我......“运行查找（带参数）：-iname”作为默认值。然而，它似乎记得它的历史。有没有办法禁用历史记录并始终从默认参数“-iname”开始？我试图修改`find-args-history`但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:22:09.943

`marius/find-dired`您必须每次都使用该功能，而不是`find-dired`，如[answer](https://stackoverflow.com/a/14593263/1937596)所示。例如设置这样的东西`(global-set-key (kbd "C-x g") 'marius/find-dired)`。`(setq find-args "-iname ...")`每次调用之前都会调用`find-grep`。

编辑：不重命名：

```
(setq find-args '("-iname '**'" . 10))
(defadvice find-dired (after eab-find-dired activate)
  (setq find-args '("-iname '**'" . 10))) 
```

停用：

```
(ad-remove-advice 'find-dired 'after 'eab-find-dired)
(ad-deactivate 'find-dired) 
```

EDIT2：我们`after-advice`在这里使用，请参阅评论。

# sql - 每月最后一天的 SQL Server While 循环

> ID：14602402
> 
> 赞同：4
> 
> 时间：2013-01-30T11:00:49.613
> 
> 标签：sql, sql-server

## 我想要每个月的最后一天，所以我写了这样的查询

```
declare @date datetime set @date='31-jan-2012' 
while @date<='31-Dec-2012' 
  Begin 
    print @date 
    set @date= DATEADD(M,1,@date)
  End 
```

## 但我得到了像

```
Jan 31 2012 12:00AM
Feb 29 2012 12:00AM
Mar 29 2012 12:00AM
Apr 29 2012 12:00AM
May 29 2012 12:00AM
Jun 29 2012 12:00AM
Jul 29 2012 12:00AM
Aug 29 2012 12:00AM
Sep 29 2012 12:00AM
Oct 29 2012 12:00AM
Nov 29 2012 12:00AM
Dec 29 2012 12:00AM 
```

**请帮我**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:08:10.643

你可能会更好： -

```
declare @date datetime;
declare @lastDay datetime;

-- Start on the first day of the next month
-- This'll ensure that your month add doesn't throw 
-- weird results
set @date='01-Feb-2012'
while @date<='01-Jan-2013'

Begin
    -- Get last day of previous month
    set @lastDay = DATEADD(DAY, -1, @date)

    -- print that
    print @lastDay

    -- increment @date to move one month into the future.
    set @date= DATEADD(month,1,@date)
End 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:40:30.730

您没有指定正在使用的 SQL Server 版本。

如果您在`SQL Server 2012`，您可以使用该[`EOMONTH()`](http://msdn.microsoft.com/en-us/library/hh213020%28v=SQL.110%29.aspx)功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:07:42.640

大家都说了这么多之后，更新来了：

```
Declare @FromDate   DateTime
;

Select  @FromDate   =   Convert(DateTime, '2012-1-1')
;

With    CTE (
    Level
,   FirstDayOfMonth
,   Value
)   As  (
    Select  1       As  Level
    ,   @FromDate
    ,   DateAdd(Day, -1, DateAdd(Month, 1, @FromDate))
Union   All
    Select  Level
    +   1
    ,   FirstDayOfMonth
,   DateAdd(Day, -1, DateAdd(Month, Level + 1, FirstDayOfMonth))
        From    CTE
        Where   Level   <   12
)   Select  Value
        From    CTE
        Order   By  Value 
```

这是一个`CTE`（通用表表达式）。第一个值应该是第二个月的第一天，加上 -1 天后它将是一月的最后一天。当然，它会给你结果。

我所做的只是使用**DateAdd(Day, -1, [下个月的第一天])**，就这么简单！

只是为了好玩，这样，我确实从二月的第一天开始，让引擎检测到一月的最后一天！:D 也许明年在另一个桑迪的表亲风暴地球改变了它的方式之后，一月不再是 31 天了！所以你的代码将工作......

谢谢大家让我更新这个答案。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T11:15:16.130

或者你可以试试：

```
Declare @Month Integer
Set @Month = 1
While @Month <= 12
Begin
  Print DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+@Month,0))
  Set @Month = @Month+1
End 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T11:07:23.423

使用以下功能可以通过此查询来实现您想要的：-

```
DECLARE @StartDate DATETIME SET @StartDate = '2012-01-31'
DECLARE @EndDate DATETIME SET @EndDate = '2012-12-31'

SELECT DISTINCT dbo.F_TABLE_DATE.END_OF_MONTH_DATE FROM dbo.F_TABLE_DATE(@StartDate, @EndDate) 
```

这是我多年前发现的一个日期函数，至今仍在使用，它包含与您可能想要的日​​期有关的所有内容。

```
create function [dbo].[F_TABLE_DATE]
(
    @FIRST_DATE     datetime,
    @LAST_DATE      datetime
)

returns  @DATE table 
(
[DATE_ID]               [int]       not null 
    primary key clustered,
[DATE]                  [datetime]  not null ,
[NEXT_DAY_DATE]             [datetime]  not null ,
[YEAR]                  [smallint]  not null ,
[YEAR_QUARTER]              [int]   not null ,
[YEAR_MONTH]                [int]       not null ,
[YEAR_DAY_OF_YEAR]          [int]       not null ,
[QUARTER]               [tinyint]   not null ,
[MONTH]                 [tinyint]   not null ,
[DAY_OF_YEAR]               [smallint]  not null ,
[DAY_OF_MONTH]              [smallint]  not null ,
[DAY_OF_WEEK]               [tinyint]   not null ,

[YEAR_NAME]             [varchar] (4)   not null ,
[YEAR_QUARTER_NAME]         [varchar] (7)   not null ,
[YEAR_MONTH_NAME]           [varchar] (8)   not null ,
[YEAR_MONTH_NAME_LONG]          [varchar] (14)  not null ,
[QUARTER_NAME]              [varchar] (2)   not null ,
[MONTH_NAME]                [varchar] (3)   not null ,
[MONTH_NAME_LONG]           [varchar] (9)   not null ,
[WEEKDAY_NAME]              [varchar] (3)   not null ,
[WEEKDAY_NAME_LONG]         [varchar] (9)   not null ,

[START_OF_YEAR_DATE]            [datetime]  not null ,
[END_OF_YEAR_DATE]          [datetime]  not null ,
[START_OF_QUARTER_DATE]         [datetime]  not null ,
[END_OF_QUARTER_DATE]           [datetime]  not null ,
[START_OF_MONTH_DATE]           [datetime]  not null ,
[END_OF_MONTH_DATE]         [datetime]  not null ,

[START_OF_WEEK_STARTING_SUN_DATE]   [datetime]  not null ,
[END_OF_WEEK_STARTING_SUN_DATE]     [datetime]  not null ,
[START_OF_WEEK_STARTING_MON_DATE]   [datetime]  not null ,
[END_OF_WEEK_STARTING_MON_DATE]     [datetime]  not null ,
[START_OF_WEEK_STARTING_TUE_DATE]   [datetime]  not null ,
[END_OF_WEEK_STARTING_TUE_DATE]     [datetime]  not null ,
[START_OF_WEEK_STARTING_WED_DATE]   [datetime]  not null ,
[END_OF_WEEK_STARTING_WED_DATE]     [datetime]  not null ,
[START_OF_WEEK_STARTING_THU_DATE]   [datetime]  not null ,
[END_OF_WEEK_STARTING_THU_DATE]     [datetime]  not null ,
[START_OF_WEEK_STARTING_FRI_DATE]   [datetime]  not null ,
[END_OF_WEEK_STARTING_FRI_DATE]     [datetime]  not null ,
[START_OF_WEEK_STARTING_SAT_DATE]   [datetime]  not null ,
[END_OF_WEEK_STARTING_SAT_DATE]     [datetime]  not null ,

[QUARTER_SEQ_NO]            [int]       not null ,
[MONTH_SEQ_NO]              [int]       not null ,

[WEEK_STARTING_SUN_SEQ_NO]      [int]       not null ,
[WEEK_STARTING_MON_SEQ_NO]      [int]       not null ,
[WEEK_STARTING_TUE_SEQ_NO]      [int]       not null ,
[WEEK_STARTING_WED_SEQ_NO]      [int]       not null ,
[WEEK_STARTING_THU_SEQ_NO]      [int]       not null ,
[WEEK_STARTING_FRI_SEQ_NO]      [int]       not null ,
[WEEK_STARTING_SAT_SEQ_NO]      [int]       not null ,

[JULIAN_DATE]               [int]       not null ,
[MODIFIED_JULIAN_DATE]          [int]       not null ,

[ISO_DATE]              [varchar](10)   not null ,
[ISO_YEAR_WEEK_NO]          [int]       not null ,
[ISO_WEEK_NO]               [smallint]  not null ,
[ISO_DAY_OF_WEEK]           [tinyint]   not null ,
[ISO_YEAR_WEEK_NAME]            [varchar](8)    not null ,
[ISO_YEAR_WEEK_DAY_OF_WEEK_NAME]    [varchar](10)   not null ,

[DATE_FORMAT_YYYY_MM_DD]        [varchar](10)   not null ,
[DATE_FORMAT_YYYY_M_D]          [varchar](10)   not null ,
[DATE_FORMAT_MM_DD_YYYY]        [varchar](10)   not null ,
[DATE_FORMAT_M_D_YYYY]          [varchar](10)   not null ,
[DATE_FORMAT_MMM_D_YYYY]        [varchar](12)   not null ,
[DATE_FORMAT_MMMMMMMMM_D_YYYY]      [varchar](18)   not null ,
[DATE_FORMAT_MM_DD_YY]          [varchar](8)    not null ,
[DATE_FORMAT_M_D_YY]            [varchar](8)    not null 
) 
as
begin
declare @cr         varchar(2)
select @cr          = char(13)+Char(10)
declare @ErrorMessage       varchar(400)
declare @START_DATE     datetime
declare @END_DATE       datetime
declare @LOW_DATE   datetime

declare @start_no   int
declare @end_no int

-- Verify @FIRST_DATE is not null 
if @FIRST_DATE is null
    begin
    select @ErrorMessage =
        '@FIRST_DATE cannot be null'
    goto Error_Exit
    end

-- Verify @LAST_DATE is not null 
if @LAST_DATE is null
    begin
    select @ErrorMessage =
        '@LAST_DATE cannot be null'
    goto Error_Exit
    end

-- Verify @FIRST_DATE is not before 1754-01-01
IF  @FIRST_DATE < '17540101'    begin
    select @ErrorMessage =
        '@FIRST_DATE cannot before 1754-01-01'+
        ', @FIRST_DATE = '+
        isnull(convert(varchar(40),@FIRST_DATE,121),'NULL')
    goto Error_Exit
    end

-- Verify @LAST_DATE is not after 9997-12-31
IF  @LAST_DATE > '99971231' begin
    select @ErrorMessage =
        '@LAST_DATE cannot be after 9997-12-31'+
        ', @LAST_DATE = '+
        isnull(convert(varchar(40),@LAST_DATE,121),'NULL')
    goto Error_Exit
    end

-- Verify @FIRST_DATE is not after @LAST_DATE
if @FIRST_DATE > @LAST_DATE
    begin
    select @ErrorMessage =
        '@FIRST_DATE cannot be after @LAST_DATE'+
        ', @FIRST_DATE = '+
        isnull(convert(varchar(40),@FIRST_DATE,121),'NULL')+
        ', @LAST_DATE = '+
        isnull(convert(varchar(40),@LAST_DATE,121),'NULL')
    goto Error_Exit
    end

-- Set @START_DATE = @FIRST_DATE at midnight
select @START_DATE  = dateadd(dd,datediff(dd,0,@FIRST_DATE),0)
-- Set @END_DATE = @LAST_DATE at midnight
select @END_DATE    = dateadd(dd,datediff(dd,0,@LAST_DATE),0)
-- Set @LOW_DATE = earliest possible SQL Server datetime
select @LOW_DATE    = convert(datetime,'17530101')

-- Find the number of day from 1753-01-01 to @START_DATE and @END_DATE
select  @start_no   = datediff(dd,@LOW_DATE,@START_DATE) ,
    @end_no = datediff(dd,@LOW_DATE,@END_DATE)

-- Declare number tables
declare @num1 table (NUMBER int not null primary key clustered)
declare @num2 table (NUMBER int not null primary key clustered)
declare @num3 table (NUMBER int not null primary key clustered)

-- Declare table of ISO Week ranges
declare @ISO_WEEK table
(
[ISO_WEEK_YEAR]         int     not null
    primary key clustered,
[ISO_WEEK_YEAR_START_DATE]  datetime    not null,
[ISO_WEEK_YEAR_END_DATE]    Datetime    not null
)

-- Find rows needed in number tables
declare @rows_needed        int
declare @rows_needed_root   int
select  @rows_needed        = @end_no - @start_no + 1
select  @rows_needed        =
        case
        when @rows_needed < 10
        then 10
        else @rows_needed
        end
select  @rows_needed_root   = convert(int,ceiling(sqrt(@rows_needed)))

-- Load number 0 to 16
insert into @num1 (NUMBER)
select NUMBER = 0 union all select  1 union all select  2 union all
select          3 union all select  4 union all select  5 union all
select          6 union all select  7 union all select  8 union all
select          9 union all select 10 union all select 11 union all
select         12 union all select 13 union all select 14 union all
select         15
order by
    1
-- Load table with numbers zero thru square root of the number of rows needed +1
insert into @num2 (NUMBER)
select
    NUMBER = a.NUMBER+(16*b.NUMBER)+(256*c.NUMBER)
from
    @num1 a cross join @num1 b cross join @num1 c
where
    a.NUMBER+(16*b.NUMBER)+(256*c.NUMBER) <
    @rows_needed_root
order by
    1

-- Load table with the number of rows needed for the date range
insert into @num3 (NUMBER)
select
    NUMBER = a.NUMBER+(@rows_needed_root*b.NUMBER)
from
    @num2 a
    cross join
    @num2 b
where
    a.NUMBER+(@rows_needed_root*b.NUMBER) < @rows_needed
order by
    1

declare @iso_start_year int
declare @iso_end_year   int

select  @iso_start_year = datepart(year,dateadd(year,-1,@start_date))
select  @iso_end_year   = datepart(year,dateadd(year,1,@end_date))

-- Load table with start and end dates for ISO week years
insert into @ISO_WEEK
    (
    [ISO_WEEK_YEAR],
    [ISO_WEEK_YEAR_START_DATE],
    [ISO_WEEK_YEAR_END_DATE]
    )
select
    [ISO_WEEK_YEAR] = a.NUMBER,
    [0ISO_WEEK_YEAR_START_DATE] =
        dateadd(dd,(datediff(dd,@LOW_DATE,
        dateadd(day,3,dateadd(year,a.[NUMBER]-1900,0))
        )/7)*7,@LOW_DATE),
    [ISO_WEEK_YEAR_END_DATE]    =
        dateadd(dd,-1,dateadd(dd,(datediff(dd,@LOW_DATE,
        dateadd(day,3,dateadd(year,a.[NUMBER]+1-1900,0))
        )/7)*7,@LOW_DATE))
from
    (
    select
        NUMBER = NUMBER+@iso_start_year
    from
        @num3
    where
        NUMBER+@iso_start_year <= @iso_end_year
    ) a
order by
    a.NUMBER

-- Load Date table
insert into @DATE
select
    [DATE_ID]           = a.[DATE_ID] ,
    [DATE]              = a.[DATE] ,

    [NEXT_DAY_DATE]         =
        dateadd(day,1,a.[DATE]) ,

    [YEAR]          =
        datepart(year,a.[DATE]) ,
    [YEAR_QUARTER]      =
        (10*datepart(year,a.[DATE]))+datepart(quarter,a.[DATE]) ,

    [YEAR_MONTH]        =
        (100*datepart(year,a.[DATE]))+datepart(month,a.[DATE]) ,
    [YEAR_DAY_OF_YEAR]      =
        (1000*datepart(year,a.[DATE]))+
        datediff(dd,dateadd(yy,datediff(yy,0,a.[DATE]),0),a.[DATE])+1 ,
    [QUARTER]       =
        datepart(quarter,a.[DATE]) ,
    [MONTH]     =
        datepart(month,a.[DATE]) ,
    [DAY_OF_YEAR]           =
        datediff(dd,dateadd(yy,datediff(yy,0,a.[DATE]),0),a.[DATE])+1 ,
    [DAY_OF_MONTH]          =
        datepart(day,a.[DATE]) ,
    [DAY_OF_WEEK]       =
        -- Sunday = 1, Monday = 2, ,,,Saturday = 7
        (datediff(dd,'17530107',a.[DATE])%7)+1  ,
    [YEAR_NAME]     =
        datename(year,a.[DATE]) ,
    [YEAR_QUARTER_NAME] =
        datename(year,a.[DATE])+' Q'+datename(quarter,a.[DATE]) ,
    [YEAR_MONTH_NAME]   =
        datename(year,a.[DATE])+' '+left(datename(month,a.[DATE]),3) ,
    [YEAR_MONTH_NAME_LONG]  =
        datename(year,a.[DATE])+' '+datename(month,a.[DATE]) ,
    [QUARTER_NAME]      =
        'Q'+datename(quarter,a.[DATE]) ,
    [MONTH_NAME]        =
        left(datename(month,a.[DATE]),3) ,
    [MONTH_NAME_LONG]   =
        datename(month,a.[DATE]) ,
    [WEEKDAY_NAME]      =
        left(datename(weekday,a.[DATE]),3) ,
    [WEEKDAY_NAME_LONG] =
        datename(weekday,a.[DATE]),

    [START_OF_YEAR_DATE]    =
        dateadd(year,datediff(year,0,a.[DATE]),0) ,
    [END_OF_YEAR_DATE]  =
        dateadd(day,-1,dateadd(year,datediff(year,0,a.[DATE])+1,0)) ,

    [START_OF_QUARTER_DATE] =
        dateadd(quarter,datediff(quarter,0,a.[DATE]),0) ,
    [END_OF_QUARTER_DATE]   =
        dateadd(day,-1,dateadd(quarter,datediff(quarter,0,a.[DATE])+1,0)) ,

    [START_OF_MONTH_DATE]   =
        dateadd(month,datediff(month,0,a.[DATE]),0) ,
    [END_OF_MONTH_DATE] =
        dateadd(day,-1,dateadd(month,datediff(month,0,a.[DATE])+1,0)),

    [START_OF_WEEK_STARTING_SUN_DATE]   =
        dateadd(dd,(datediff(dd,'17530107',a.[DATE])/7)*7,'17530107'),
    [END_OF_WEEK_STARTING_SUN_DATE]     =
        dateadd(dd,((datediff(dd,'17530107',a.[DATE])/7)*7)+6,'17530107'),

    [START_OF_WEEK_STARTING_MON_DATE]   =
        dateadd(dd,(datediff(dd,'17530101',a.[DATE])/7)*7,'17530101'),
    [END_OF_WEEK_STARTING_MON_DATE]     =
        dateadd(dd,((datediff(dd,'17530101',a.[DATE])/7)*7)+6,'17530101'),

    [START_OF_WEEK_STARTING_TUE_DATE]   =
        dateadd(dd,(datediff(dd,'17530102',a.[DATE])/7)*7,'17530102'),
    [END_OF_WEEK_STARTING_TUE_DATE]     =
        dateadd(dd,((datediff(dd,'17530102',a.[DATE])/7)*7)+6,'17530102'),

    [START_OF_WEEK_STARTING_WED_DATE]   =
        dateadd(dd,(datediff(dd,'17530103',a.[DATE])/7)*7,'17530103'),
    [END_OF_WEEK_STARTING_WED_DATE]     =
        dateadd(dd,((datediff(dd,'17530103',a.[DATE])/7)*7)+6,'17530103'),

    [START_OF_WEEK_STARTING_THU_DATE]   =
        dateadd(dd,(datediff(dd,'17530104',a.[DATE])/7)*7,'17530104'),
    [END_OF_WEEK_STARTING_THU_DATE]     =
        dateadd(dd,((datediff(dd,'17530104',a.[DATE])/7)*7)+6,'17530104'),

    [START_OF_WEEK_STARTING_FRI_DATE]   =
        dateadd(dd,(datediff(dd,'17530105',a.[DATE])/7)*7,'17530105'),
    [END_OF_WEEK_STARTING_FRI_DATE]     =
        dateadd(dd,((datediff(dd,'17530105',a.[DATE])/7)*7)+6,'17530105'),

    [START_OF_WEEK_STARTING_SAT_DATE]   =
        dateadd(dd,(datediff(dd,'17530106',a.[DATE])/7)*7,'17530106'),
    [END_OF_WEEK_STARTING_SAT_DATE]     =
        dateadd(dd,((datediff(dd,'17530106',a.[DATE])/7)*7)+6,'17530106'),

    [QUARTER_SEQ_NO]            = 
        datediff(quarter,@LOW_DATE,a.[DATE]),
    [MONTH_SEQ_NO]              =
        datediff(month,@LOW_DATE,a.[DATE]),

    [WEEK_STARTING_SUN_SEQ_NO]      =
        datediff(day,'17530107',a.[DATE])/7,
    [WEEK_STARTING_MON_SEQ_NO]      =
        datediff(day,'17530101',a.[DATE])/7,
    [WEEK_STARTING_TUE_SEQ_NO]      =
        datediff(day,'17530102',a.[DATE])/7,
    [WEEK_STARTING_WED_SEQ_NO]      =
        datediff(day,'17530103',a.[DATE])/7,
    [WEEK_STARTING_THU_SEQ_NO]      =
        datediff(day,'17530104',a.[DATE])/7,
    [WEEK_STARTING_FRI_SEQ_NO]      =
        datediff(day,'17530105',a.[DATE])/7,
    [WEEK_STARTING_SAT_SEQ_NO]      =
        datediff(day,'17530106',a.[DATE])/7,

    [JULIAN_DATE]           =
        datediff(day,@LOW_DATE,a.[DATE])+2361331,
    [MODIFIED_JULIAN_DATE]      =
        datediff(day,'18581117',a.[DATE]),
--/*

    [ISO_DATE]      =
        replace(convert(char(10),a.[DATE],111),'/','-') ,

    [ISO_YEAR_WEEK_NO]      =
        (100*b.[ISO_WEEK_YEAR])+
        (datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1 ,

    [ISO_WEEK_NO]       =
        (datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1 ,

    [ISO_DAY_OF_WEEK]       =
        -- Sunday = 1, Monday = 2, ,,,Saturday = 7
        (datediff(dd,@LOW_DATE,a.[DATE])%7)+1  ,

    [ISO_YEAR_WEEK_NAME]        =
        convert(varchar(4),b.[ISO_WEEK_YEAR])+'-W'+
        right('00'+convert(varchar(2),(datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1),2) ,

    [ISO_YEAR_WEEK_DAY_OF_WEEK_NAME]        =
        convert(varchar(4),b.[ISO_WEEK_YEAR])+'-W'+
        right('00'+convert(varchar(2),(datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1),2) +
        '-'+convert(varchar(1),(datediff(dd,@LOW_DATE,a.[DATE])%7)+1) ,
--*/
    [DATE_FORMAT_YYYY_MM_DD]        =
        convert(char(10),a.[DATE],111) ,
    [DATE_FORMAT_YYYY_M_D]      = 
        convert(varchar(10),
        convert(varchar(4),year(a.[DATE]))+'/'+
        convert(varchar(2),day(a.[DATE]))+'/'+
        convert(varchar(2),month(a.[DATE]))),
    [DATE_FORMAT_MM_DD_YYYY]        = 
        convert(char(10),a.[DATE],101) ,
    [DATE_FORMAT_M_D_YYYY]      = 
        convert(varchar(10),
        convert(varchar(2),month(a.[DATE]))+'/'+
        convert(varchar(2),day(a.[DATE]))+'/'+
        convert(varchar(4),year(a.[DATE]))),
    [DATE_FORMAT_MMM_D_YYYY]        = 
        convert(varchar(12),
        left(datename(month,a.[DATE]),3)+' '+
        convert(varchar(2),day(a.[DATE]))+', '+
        convert(varchar(4),year(a.[DATE]))),
    [DATE_FORMAT_MMMMMMMMM_D_YYYY]  = 
        convert(varchar(18),
        datename(month,a.[DATE])+' '+
        convert(varchar(2),day(a.[DATE]))+', '+
        convert(varchar(4),year(a.[DATE]))),
    [DATE_FORMAT_MM_DD_YY]      =
        convert(char(8),a.[DATE],1) ,
    [DATE_FORMAT_M_D_YY]        = 
        convert(varchar(8),
        convert(varchar(2),month(a.[DATE]))+'/'+
        convert(varchar(2),day(a.[DATE]))+'/'+
        right(convert(varchar(4),year(a.[DATE])),2))
from
    (
    -- Derived table is all dates needed for date range
    select  top 100 percent
        [DATE_ID]   = aa.[NUMBER],
        [DATE]      =
            dateadd(dd,aa.[NUMBER],@LOW_DATE)
    from
        (
        select
            NUMBER = NUMBER+@start_no 
        from
            @num3
        where
            NUMBER+@start_no <= @end_no
        ) aa
    order by
        aa.[NUMBER]
    ) a
    join
    -- Match each date to the proper ISO week year
    @ISO_WEEK b
    on a.[DATE] between 
        b.[ISO_WEEK_YEAR_START_DATE] and 
        b.[ISO_WEEK_YEAR_END_DATE]
order by
    a.[DATE_ID]

return

Error_Exit:

-- Return a pesudo error message by trying to
-- convert an error message string to an int.
-- This method is used because the error displays
-- the string it was trying to convert, and so the
-- calling application sees a formatted error message.

declare @error int

set @error = convert(int,@cr+@cr+
'*******************************************************************'+@cr+
'* Error in function F_TABLE_DATE:'+@cr+'* '+
isnull(@ErrorMessage,'Unknown Error')+@cr+
'*******************************************************************'+@cr+@cr)

return

end

GO 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:09:20.563

尝试：

```
with cte as
(select convert(date, '2012-01-31', 102) lastdate
 union all
 select dateadd(d,-1,dateadd(m,1,(dateadd(d,1,lastdate))))
 from cte where lastdate < '2012-12-31')
select * from cte 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T10:34:30.103

如果你有一个数字表（*），它只是：

```
select DATEADD(month,n,'20120131') from Numbers where n between 0 and all 
```

基本上，`DATEADD(month,...`如有必要，将自动将其结果的日期部分剪辑到该月的最后一天。因此，如果您总是将月份添加到 31 日的日期，它将产生所需的结果。

* * *

(*) 如果不这样做，只需在查询前添加 CTE：

```
;with Numbers (n) as (
    select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all
    select 6 union all select 7 union all select 8 union all select 9 union all select 10 union all select 11
)
select DATEADD(month,n,'20120131') from Numbers 
```

# nginx - 将子域重定向到新 URL，同时保留子域

> ID：14602408
> 
> 赞同：1
> 
> 时间：2013-01-30T11:01:00.440
> 
> 标签：nginx

我想将流量从一个域永久重定向到另一个域。

现在虽然我知道这很简单，但我希望子域部分（通配符）在我将它们重定向到的新域上相同（如果有意义的话）

什么样的配置会起作用..或者甚至可能吗？

例子：

```
server {
    server_name *.olddomain.com;
    rewrite ^(.*) http://*.newdomain.com$1 permanent;
} 
```

我觉得放一个通配符是行不通的，所以任何建议都值得赞赏！

# c# - 公司的企业 SSO 实施

> ID：14602409
> 
> 赞同：0
> 
> 时间：2013-01-30T11:01:00.500
> 
> 标签：c#, security, authentication, single-sign-on

我一直在尝试了解企业环境中的 SSO，以及最适合我公司问题的解决方案。

我们有几个应用程序（主要在 .net 中，但在 java 中）在我们的域上运行.. a.mydomain.com、b.mydomain.com 等...

我的问题在于试图弄清楚如何实现单点登录，因为据我所知，OpenID 和 OpenAuth 之类的东西用于 facebook、twitter、基于 SSO 的链接，即基于消费者的 SSO。

我们想要一个内部 SSO 系统设置，但我找不到很多关于如何执行此操作以及使用哪些协议/框架/服务器的企业示例。

谁能告诉我如何以及是否应该将 OpenID/OpenAuth 用于这种情况，以及优缺点是什么？

另外，基于令牌的 SSO 会是一个好主意吗？考虑到所有应用程序都将位于同一个域中（已设置 SSL）。

最后，基于 cookie 的 SSO 怎么样，这是个好主意吗？

谢谢尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:14:57.417

正如您提到的，您的所有应用程序都在同一个域中，并且您正在寻找内部 SSO 解决方案，我建议您使用基于 cookie 的 SSO 服务。仅仅是因为

*   实施起来会更容易。只需检查 cookie 并授予用户对应用程序的访问权限。
*   您的不同应用程序之间没有 XML 消息交换（无需设计架构）
*   您不需要聘请任何 Web 服务专家。（只要您的开发人员知道如何处理 cookie）
*   最终这将取决于您的**可扩展性要求**。

更新：

可扩展性：

*   将来，您可能会在不同的地理位置扩展您的用户群。
*   您的不同应用程序可能有不同的服务器，并且用户数据库可能变得分布式。
*   在这种情况下，您将必须维护一个身份存储库以将身份验证作为服务提供。（这是您提到的身份验证框架所做的）

饼干：

*   饼干处理不是火箭科学。浏览器会在 HTTP 请求中自动将 cookie 发送到您的服务器，您只需阅读它即可。
*   在用户登录时创建cookie。将域属性设置为您的根域，以便其他子域可以访问它。
*   当用户尝试登录应用程序时检查 cookie。如果存在 cookie，则表示用户已经登录。
*   用户注销时不要忘记删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:24:22.627

Active Directory 联合服务 ( [http://msdn.microsoft.com/en-us/library/bb897402.aspx](http://msdn.microsoft.com/en-us/library/bb897402.aspx) ) 是一种企业解决方案。我不建议编写自己的代币发行者，因为其中涉及很多风险、安全性和性能。

# ios - UIImageView 可变图像大小

> ID：14602410
> 
> 赞同：2
> 
> 时间：2013-01-30T11:01:01.157
> 
> 标签：ios, image, uiimageview, uiimage

首先，我试图从远程 url 延迟加载图像，到目前为止我所做的如下， - 我创建了自定义 UITableViewCell ，其中包含 UIImageView 和使用 XIB 的其他标签，并将其映射到我的自定义 UITableViewCell 类。- 我在我的 UITableView 中使用自定义表格单元格 - 自定义单元格内的 UIImageView，根据 Apple 的 tableview 延迟加载图像教程加载远程图像 - 最初 ImageView 显示加载图像，一旦加载图像，加载的图像就会得到在 ImageView 内更新，或者如果失败，则不会显示任何图像

这里的问题是，远程图像的大小是可变的，假设图像小于 ImageView 框架，图像会拉伸并显示为模糊，但是一旦我们滚动或选择行，它就会重新调整为实际大小并且看起来很好. 同时，如果图像大于 ImageView 框架，它会正确地适合框架内，但如果我们滚动或选择行，它占据的大小大于框架并隐藏行中的其他元素

我搜索了几个小时，我得到的只是将内容模式设置为 UIViewContentModeScaleToFit 并将 clipsToBounds 设置为“是”，我在 XIB 和代码中都进行了这些更改，但它没有改变任何东西。有人可以指出我做错了什么或如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:16:16.400

随心所欲地抓取图像

```
UIImage *customImage = [UIImage imageWithContentsOfFile:theImagePath]; 
```

然后使用以下命令检查图像的大小：

```
NSLog(@"the customImage width is %f and height is %f ",customImage.size.width,customImage.size.height); 
```

然后修改您放置它的框架的宽度和高度，以便将它们设置为原始图像的相等部分（同时仍然适合必要的边界）

```
float newWidth =  customImage.size.width *.4;
float newHeight = customImage.size.height *.4;
ImageButton.frame = CGRectMake(x coord, y coord, newWidth, newHeight); 
```

如有必要，您还可以进行方面适合/填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:12:15.277

我只是重新调整了图像的大小，如果图像的宽度和高度大于框架大小并在其上显示调整大小的图像，并且图像尺寸小于我显示的框架。

# ruby-on-rails - 红宝石中的时间转换

> ID：14602412
> 
> 赞同：0
> 
> 时间：2013-01-30T11:01:12.670
> 
> 标签：ruby-on-rails

我有以下数据

```
pubdate=10 hours ago +0000 
pudate=Yesterday +0000 
```

`pubdate=1 min ago +0000` 我想像这样转换这种格式

```
Wed Jan 30 10:00:00 +0000 2013 
```

请有人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:26:09.983

您可以使用[`strftime`](http://apidock.com/rails/ActiveSupport/TimeWithZone/strftime)日期、日期时间对象转换为您想要的任何格式

```
1.9.3p327 :006 > date = Date.today
 => Wed, 30 Jan 2013 
1.9.3p327 :007 > time = Time.now
 => 2013-01-30 17:00:30 +0530 
1.9.3p327 :008 > date.strftime("%a %b %d %H:%M:%S %z %Y")
 => "Wed Jan 30 00:00:00 +0000 2013" 
1.9.3p327 :009 > time.strftime("%a %b %d %H:%M:%S %z %Y")
 => "Wed Jan 30 17:00:30 +0530 2013" 
```

# java - 从安全的远程存储库下载依赖项

> ID：14602414
> 
> 赞同：0
> 
> 时间：2013-01-30T11:01:14.463
> 
> 标签：java, maven

我正在尝试从需要身份验证的远程存储库下载依赖项。有没有办法在我的 pom 配置中提供凭据？谢谢

```
<repositories>
    <repository>
        <id>alfresco-private</id>
        <url>https://artifacts.alfresco.com/nexus/content/groups/private</url>
    </repository>
</repositories> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:59:17.403

不，这不是因为 POM 是一个“公共工件”，您可以与您的开发团队共享它，因此它不应该包含密码。

> “用于下载和部署的存储库由 POM 的存储库和分发管理元素定义。但是，某些设置（例如用户名和密码）不应与 pom.xml 一起分发。此类信息应存在于构建服务器中settings.xml。”

在这里阅读：[http ://maven.apache.org/settings.html](http://maven.apache.org/settings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:19:13.197

要详细说明@Cisco 的答案，您可以在自己的本地放置类似的内容`settings.xml`：

```
<servers>
    <server>
        <id>alfresco-private</id>
        <username>H-H</username>
        <password>H-HsPassword</password>
    </server>
    ... 
```

# javascript - jsrender中如何使用逻辑运算符

> ID：14602416
> 
> 赞同：0
> 
> 时间：2013-01-30T11:01:16.773
> 
> 标签：javascript, jsrender

我有

```
{{if name && secondName}}
{{=name}}/{{=secondName}}
{{/if}} 
```

但这不起作用。我发现错误

> 未捕获的语法错误：意外的令牌 &&

那我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:52:09.810

看起来您使用的是过期版本的 JsRender。语法是`{{:name}}`, 并且`&&`在当前版本中应该可以正常工作。

# macos - Java 7 是否仅在 x64 位 MAC OS X 上运行？

> ID：14602420
> 
> 赞同：3
> 
> 时间：2013-01-30T11:01:25.727
> 
> 标签：macos, deployment, javafx, java-7, executable-jar

我想在 Windows、Linux 和 Mac 上提供独立的应用程序包，所以我已经在所有三个平台上构建了我的 JavaFX 应用程序。我将允许我的用户从我的应用程序的下载网页下载这些本机捆绑包，但我对 MAC 用户感到困惑，因为对于 Linux 和 Windows，JDK/JRE 7 有两个下载选项

1.  对于 x86
2.  对于 x64。

但是对于 MAC，我们只有 x64 的选项。

Java 下载[页面](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)显示 Java/Jre 不适用于 32 位 MAC OSX 来运行 JavaFX 应用程序。这是否意味着 JavaFX 只能在 x64 位 MAC OSX 上运行？

如果是这样，那么我的问题已经解决，因为在 x64 MAC OSX 上运行自定义 build.xml 脚本后，我已经将我的 Javafx 应用程序捆绑为“自包含应用程序包”，但如果不是这样，用户可以还在 x86 MAC OSX 上运行 JavaFX 应用程序，但在这种情况下，我的 Mac 的“自包含应用程序包”将无法在 x86 MAC OSX 上运行。

所以我打算提供一个额外的 zip 文件，其中包含应用程序（没有 jre 的副本）或一个普通的自我可执行 jar。但我有点担心重新升级 - 我需要将什么与自可执行 JAR 捆绑到该 zip 文件中，因此必须满足要求才能在以下条件下运行我的 JavaFX 应用程序？

条件是： -

1.  如果用户有 x86 MAC OSX。
2.  如果 java 已经安装在用户的系统上。而且他不想从我们的下载页面下载“自包含应用程序包”。
3.  下载量大。

那么如果用户有 x86 MAC OSX 或者他已经在他的系统上安装了 java 或者他不想从下载页面下载“自包含应用程序包”由于下载量大，那么以下两个选项中的哪一个？

选项是 -

1.  APP（没有 JRE 的内置副本）
2.  或者只是一个自我可执行的 jar。

我不确定 Mac OS X 10.7.3 (Lion) 或更高版本是否可以在 x86 系统上运行。因此，如果使用 #1 选项，用户在使用 x86 系统时可能会遇到问题。然后他可能需要更改 info plist 文件并替换 JavaAplicationStub。

在#2 选项的情况下，我认为更好，因为用户只需要下载 JRE 并且 JAR 应该使用“java -jar”命令运行。

如果 JavaFX 应用程序可以在 x86 位 MAC OS X 上运行，请建议哪个选项更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:11:06.270

> Java 7 是否仅在 x64 位 MAC OS X 上运行？

Oracle Java 7 for OS X 仅适用于 64 位架构，没有 32 位版本的软件。

# ocaml - ocaml hashtbl 删除函数

> ID：14602422
> 
> 赞同：0
> 
> 时间：2013-01-30T11:01:35.697
> 
> 标签：ocaml

Hashtbl 删除如何恢复以前的绑定。

```
Hashtbl.add t key1  
Hashtbl.remove t key1  
Hashtbl.remove t key1  => This should do anything but not restore the key1 ! 
```

无论如何，我怎么能删除某些东西以确保并且如果它在之前被删除，那么应该遵循适当的流程？

[val remove : ('a, 'b) t -> 'a -> unit Hashtbl.remove tbl x 删除 tbl 中 x 的当前绑定，如果存在则恢复之前的绑定。如果 x 未绑定在 tbl 中，则它什么也不做。](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Hashtbl.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T12:28:16.250

有两种合法的使用模式`Hashtbl`：总是使用`Hashtbl.replace`，这确保每个键在表中只有一个绑定，或者使用表作为多重映射（每个键指向值列表）`Hasthbl.add`，`Hashtbl.find`和`Hashtbl.find_all`。

请确保您了解您感兴趣的使用模式。如果您不想保留旧绑定，则将多个绑定添加到同一个键是没有意义的（这可能会导致性能问题、内存泄漏和堆栈溢出）；在这种情况下，您应该使用`Hashtbl.replace`而不是`Hashtbl.add`，并且`Hashtbl.remove`会完全按照您的期望进行。

如果您将哈希表用作多重映射，并且想要一个删除键的所有绑定的函数，您可以自己实现它（代码未经测试）：

```
let rec remove_all tbl key =
  if Hashtbl.mem tbl key then begin
    Hashtbl.remove tbl key;
    remove_all tbl key
  end 
```

编辑：我刚刚明白阅读您的（难以理解）问题的另一种方式是“我怎样才能确保表中有一个要删除的键，而不是在`remove`被调用时默默地什么都不做？”。cago 为此提供了一个代码片段，本质上您可以`Hashtbl.mem`在假设绑定应该存在时使用它来检查绑定是否存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:38:50.357

如果您使用`Hashtbl.replace`而不是，`Hashtbl.add`您将替换`t`. 所以这个功能`Hashtbl.remove`不会恢复任何东西。

您还可以编写自己的删除函数：

```
let remove tbl key =
   if Hashtbl.mem tbl key then Hashtbl.remove tbl key
   else raise Nothing_to_remove_in_the_hashtbl

Hashtbl.replace t key1 value;;
remove t key1;;
remove t key1;;  (* raise Nothing_to_remove_in_the_hashtbl *) 
```

# objective-c - 为什么我不能用项目填充我的控制器？

> ID：14602425
> 
> 赞同：1
> 
> 时间：2013-01-30T11:01:44.300
> 
> 标签：objective-c

我正在使用 ItemController 来提供要在 tableview 中使用的项目列表。我似乎无法填充控制器，我不知道为什么。

这是控制器类的代码：

**。H**

```
#import <Foundation/Foundation.h>

@class Item;

@interface ItemController : NSObject

@property (nonatomic, copy) NSMutableArray *items;

- (NSUInteger)countOfList;
- (Item*)objectInListAtIndex:(NSUInteger)theIndex;
- (void)addItem:(Item *)item;

@end 
```

**.m**

```
#import "ItemController.h"
#import "Item.h"

@interface ItemController ()
@end

@implementation ItemController

- (NSUInteger)countOfList {
    return [self.items count];
}
- (Item *)objectInListAtIndex:(NSUInteger)theIndex {
    return [self.items objectAtIndex:theIndex];
}

- (void)addItem:(Item *)item {
    [self.items addObject:item];
}

@end 
```

**项目.m**

```
@implementation Item

-(id)initWithName:(NSString *)name{
    self = [super init];
    if (self) {
        _name = name;
        return self;
    }
    return nil;
}

@end 
```

我正在使用以下代码来填充列表：

```
ItemController* controller = [[ItemController alloc] init];
for (NSString* key in raw_data) {
    NSLog(key); // This outputs the keys fine
    [controller addItem:[[Item alloc] initWithName:key]];
}
NSLog([NSString stringWithFormat:@"%d",[controller countOfList]]); // Always 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:11:00.887

您需要在 init 方法中初始化数组。

```
- (id)init {
    self = [super init];
    if (self) {
        self.items = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:49:27.720

您需要初始化您的变量`items`。在您的 init 方法中，调用`self.items = [NSMutableArray new];`并将您的数组属性从 更改`copy`为`retain`。

我也相信你的课`ItemController`应该是善良的`UIViewController`而不是善良的`NSObject`。

`@interface ItemController : UIViewController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:06:05.900

您不会在`_items`任何地方初始化实例变量，所以它总是`nil`. 任何调用的整数返回方法的结果都`nil`将为 0，因此您会看到计数为 0。

# javascript - 如何在 Webstorm 中创建源文件夹？

> ID：14602437
> 
> 赞同：0
> 
> 时间：2013-01-30T11:02:29.390
> 
> 标签：javascript, webstorm

基本上我的问题是我有：

> c:\blah\blah\myApp\webapp\some_javascript.js
> 
> c:\blah\blah\common-js\webapp\some_common_javascript.js

我希望**some_javascript**访问**some_common_javascript**，但是因为 Webstorm 使用绝对路径，所以与**myApp**和**common-js**发生冲突。

我想要一个将 \webapp\ 识别为两者的源文件夹的项目！

我的具体例子是：

(1) 我调试/运行：

C:/developer/eclipse/workspaces/ilean/supportagentCockpit/src/main/webapp/index.html

(2) 我得到这些错误：

> ```
> ReferenceError: Page is not defined   C:/developer/eclipse/workspaces/ilean/supportagentCockpit/src/main/webapp/js/ilean/page/PermissionPage.js:1
> ReferenceError: Page is not defined   C:/developer/eclipse/workspaces/ilean/supportagentCockpit/src/main/webapp/js/ilean/page/DevicesPage.js:1
> ReferenceError: Page is not defined   C:/developer/eclipse/workspaces/ilean/supportagentCockpit/src/main/webapp/js/ilean/page/LogFilesPage.js:1 
> ```

(3) 此时的错误与我的 index.html 有关：

```
<script src="js/ilean/page/PermissionPage.js"></script>
<script src="js/ilean/page/DevicesPage.js"></script>
<script src="js/ilean/page/LogFilesPage.js"></script> 
```

(4) 虽然该页面也已导入我的索引中..

```
<script src="js/toolkit/Page.js"></script> 
```

(5) 在文件系统上是住在这里：

> C:\developer\eclipse\workspaces\ilean\iLeanWUITemplate\src\main\webapp\js\toolkit\Page.js

而我的其他东西住在这里：

> C:/developer/eclipse/workspaces/ilean/supportagentCockpit/src/main/webapp/js/ilean/page/*

(6) 所以基本上，如果你将 src/main 下的所有内容都视为在同一个项目/模块中，它会起作用，但是因为一个在**iLeanWUITemplate**目录中，另一个在**supportagentCockpit**目录中，他们看不到对方。

在 Eclipse 中我得到了它的工作，因为它们都在同一个容器中运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:09:58.533

打开文件 > 设置。在左侧选择“项目设置”标题下的“目录”。在右侧窗格中，您应该只`myApp/webapp`在“添加内容根”按钮下看到您的目录：

![在此处输入图像描述](../Images/1bc0d6f74517f86f5db3cd54fc0770a8.png)

单击按钮并将`common-js/webapp`目录添加为新的内容根目录。

# sockets - 在 ZeroMQ 中获取 TCP 地址信息

> ID：14602442
> 
> 赞同：11
> 
> 时间：2013-01-30T11:02:59.820
> 
> 标签：sockets, zeromq, service-discovery, jzmq

我想使用 ZeroMQ（java 绑定，jzmq）将客户端连接到服务器，但我非常需要 TCP 信息，例如客户端请求的 TCP/IP 地址！问题是，为了能够在网络中宣布服务，我需要获取请求的 TCP 地址才能将客户端重定向到该服务。在这种情况下，代理是一个中央“服务注册中心”。但是，在双方都有 ZeroMQ 服务时，我看不到检索该信息的选项。

我现在要做的是使用标准套接字与代理建立一个虚拟连接，在建立连接后，我获取用于此连接的 IP 地址并再次关闭连接。检索到的 IP 地址现在正用于使用随机端口上的 ZeroMQ 套接字对其进行绑定。

我认为这个解决方案是有史以来最丑陋的解决方案，所以：这个问题的更好解决方案是什么？

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T11:11:30.963

0MQ 不提供对等点的地址，原因有很多。它也不是很有用，因为您真正想要的是接收连接的端点，而不是建立连接的地址。

我通常做的，它足够优雅，是将服务绑定到一个临时端口，获取一个完整的连接端点（“tcp://ipaddress:port”）并以某种方式发送该字符串，要么广播给对等方，要么中央注册表等以及我的服务名称。然后，想要重新连接的对等方可以获取服务名称，查找我的端点，然后连接回我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-02T06:03:17.410

在 ZMQ 4.x 中，您可以获得字符串属性“Peer-Address”或“Identity”属性。[http://api.zeromq.org/4-2:zmq-msg-gets](http://api.zeromq.org/4-2:zmq-msg-gets)

身份在 connect() 之前在另一个对等方中设置。[http://api.zeromq.org/4-2:zmq-setsockopt#toc20](http://api.zeromq.org/4-2:zmq-setsockopt#toc20)

例如，

```
const char *identityString = "identity";
zmq::context_t context(1);
zmq::socket_t socket(context, ZMQ_REQ);
socket.setsockopt(ZMQ_IDENTITY, identityString, strlen(identityString));
socket.connect("tcp://127.0.0.1:5555"); 
```

然后是另一边：

```
while(1)
{
    zmq::message_t request;
    if (socket.recv(&request, ZMQ_NOBLOCK))
    {
        const char* identity = request.gets("Identity");
        const char* peerAddress = request.gets("Peer-Address");
        printf("Received from %s %s\n", peerAddress, identity);
        break;
    }
} 
```

我正在使用 CppZmq 顺便说一句，您应该能够轻松找到相关调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-01T11:13:59.213

深入研究`libzmq`代码，我发现该库将接收到它的文件描述符附加到每个消息实例。

这对我有用

```
 int sockfd = zmq_msg_get(&msg, ZMQ_SRCFD);

    sockaddr_in addr;
    socklen_t asize = sizeof(addr);
    getpeername(sockfd, (sockaddr*)&addr, &asize);

    std::cout << inet_ntoa(addr.sin_addr) << ":" << addr.sin_port << std::endl; 
```

请注意，FD 可以并且将被其他连接重用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-23T16:28:44.453

我正在使用 CZMQ 绑定使用 api 的 4.2.1 版本，我找到了适合我的案例的解决方案 (ZMQ_STREAM)。它通过在连接之前设置一个 id 来工作。

相关的套接字选项是“ZMQ_CONNECT_RID”。

[ZMQ api 通过 zmq_setsockopt()](http://api.zeromq.org/4-2:zmq-setsockopt)

[CZMQ api 通过 zsock_set_connect_rid()](http://czmq.zeromq.org/czmq4-0:zsock)

一些带有经过编辑的 ips 的代码。

```
const char endpoint1[] = "tcp://1.2.3.4:12345"
const char endpoint2[] = "tcp://5.6.7.8:12345"

zsock_t *stream = zsock_new(ZMQ_STREAM);
zsock_set_connect_rid(stream, endpoint1);
zsock_connect(stream, endpoint1);
zsock_set_connect_rid(stream, endpoint2);
zsock_connect(stream, endpoint2); 
```

然后，如果有连接，我会收到这两条消息。第一帧是 id，第二帧在 ZMQ_STREAM 套接字的连接/断开时为空。

[留言1]

```
[019] tcp://1.2.3.4:12345
[000] 
```

[留言2]

```
[019] tcp://5.6.7.8:12345
[000] 
```

另一种选择是使用[zmq_socket_monitor()](http://api.zeromq.org/4-2:zmq-socket-monitor)或[czmq zmonitor](http://czmq.zeromq.org/czmq4-0:zmonitor)。这是我的第一个解决方案之一，但我正在寻找更轻的东西。我能够以这种方式获取端点，而无需直接在套接字上设置 id。

zmonitor zactor 使订阅套接字事件成为可能，然后它发送一条包含 3 帧的消息：

```
[009] CONNECTED
[002] 14
[021] tcp://127.0.0.1:33445 
```

# ios - 通过 iPhone 应用程序打开 App Store

> ID：14602444
> 
> 赞同：0
> 
> 时间：2013-01-30T11:03:05.983
> 
> 标签：ios, objective-c

有什么方法可以`Apple AppStore`用我的 iPhone 应用程序打开吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:06:24.400

是的，您可以使用：

如果你有你的应用程序`URL`然后。

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:
@"itms-apps://YourApplicationLink"]];`

否则你可以`URL`用这个创建。 [链接制作者](http://itunes.apple.com/linkmaker)

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:07:42.977

请查看此苹果 QA 链接[https://developer.apple.com/library/ios/#qa/qa1633/_index.html](https://developer.apple.com/library/ios/#qa/qa1633/_index.html)

由...提供

```
 Company Name

    http://itunes.com/apps/<companyname>

    for example, http://itunes.com/apps/smule

    Application Name

    http://itunes.com/apps/<applicationname>

    for example, http://itunes.com/apps/ocarina

    Application by Company

    http://itunes.com/apps/<companyname>/<applicationname>

    for example, http://itunes.com/apps/smule/ocarina 
```

**从 iPhone 应用程序启动 App Store**

[https://developer.apple.com/library/ios/#qa/qa2008/qa1629.html](https://developer.apple.com/library/ios/#qa/qa2008/qa1629.html)

![在此处输入图像描述](../Images/bd4e91448622bd0efb746a8a7738476c.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:11:03.367

在 iOS6 中有新的**SKStoreProductViewController** [http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011852](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011852)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:08:16.587

使用`itms-apps:`or `itms-appss:`URL 方案。

# joomla - 在 Joomla CMS 上更改图像的最佳扩展是什么？

> ID：14602450
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:03:33.377
> 
> 标签：joomla, joomla-extensions

我有一个特定的要求，即有一个人名列表和一个照片容器。因此，当我单击特定用户的名称时，他的照片将出现在该容器中。

是否有任何特定的扩展名，以便管理员可以使用他们的图像管理所有人名？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:21:42.997

如果您指的是 Avatar 并使用 Joomla 2.5+，那么我建议您使用[Community Builder](http://extensions.joomla.org/extensions/clients-a-communities/communities/210)。我知道这是一个相当大的系统，但是它极大地扩展了用户配置文件，并且将来可能会派上用场。

如果您使用的是 Joomla 1.5，那么您总是可以使用[DAvatar](http://extensions.joomla.org/extensions/social-web/social-presence/profiles/8028)，它只是一个插件。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:54:41.003

您也可以使用 Community Builder，但它的扩展非常大且功能强大，我认为您有兴趣只显示用户图像。如果您有 Joomla 2.5，那么 Profile Picture 插件将最适合您的情况。这是链接检查一下。[http://extensions.joomla.org/extensions/clients-a-communities/user-management/19702](http://extensions.joomla.org/extensions/clients-a-communities/user-management/19702)。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:59:46.690

社区建设者只是为了获得图像而矫枉过正。以下是一些选项，具体取决于这些选项的更新频率以及您是否要允许用户自己更新这些选项。

当然，您始终可以为每个团队成员创建一个类别和一篇文章，然后使用链接和 url 将图像加载到标准位置（覆盖 + 使用模板中的 css 来执行此操作）。使用 ACL 管理谁可以更改此设置并决定是否允许用户进行管理。

使用联系人组件中的图像字段，将同一类别的所有团队成员联系起来。将生物等放入杂项信息中。只有管​​理员可以管理它，因为它只在后端进行编辑。

如果您希望用户能够自己管理，请为 com_user 使用配置文件插件。

# java - 对 JVM CPU 峰值进行故障排除

> ID：14602451
> 
> 赞同：5
> 
> 时间：2013-01-30T11:03:37.097
> 
> 标签：java, jvm, cpu-usage, tcserver

我们的一个应用程序服务器出现了一个有趣（尽管相当严重）的问题：在某个时间点，运行我们的 Web 应用程序的 JVM 的 CPU 使用率开始上升并持续上升，直到应用程序最终减速到爬行。修复它的唯一方法是重新启动应用程序服务器软件。

*   应用服务器：Spring tc Server（因为服务器托管在别处，目前不知道具体版本）
*   应用程序：相对标准的 Spring 3 Web 应用程序（尽管我们确实使用了一个 in-JVM EHCache）

这给我带来了一个简单的问题；我们能做些什么来解决这个问题？

我考虑过使用 VisualVM（或其他一些 JVM 监控工具），但他们能做的最好的事情——在这种特殊情况下——给我一个线程转储，它仍然不会告诉我是什么占用了所有的 CPU 时间（除非我我错过了一些东西）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:10:21.200

你需要弄清楚它在做什么？此问题的一个常见原因是可用内存不足。如果这不是原因，则需要 CPU 分析器。VisualVM 随 JDK 一起免费提供，并且可以为您做这两件事。

> 只有你不能一直分析应用程序

`jstack`发生这种情况时，您可以通过每隔几秒钟调用多次来进行临时分析。您可以使用`diff`堆栈跟踪来帮助您找到可能很忙且消耗 CPU 的线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T11:18:12.463

如果正在执行 Full GC，则 CPU 消耗线程基本上是卡住或占用的线程或 GC 活动。

如果您在基于 unix 的环境中，则执行以下将预览 JVM 线程的利用率。（PID 是 jvm 的进程 ID）。

```
prstat -L -p <PID> 
```

随后可以进行线程转储（kill -3），然后可以将 prstat 和线程转储关联起来以查找哪些线程正在使用高 CPU。

线程转储中的 nid 对应于 prstat 输出中 LWPID 的 HEX 值。

```
Eg: LWPID = java/75 corresponds to nid = 0X4B 
```

一旦在线程转储中找到消耗 CPU 的线程，就可以使用指向应该开始调查的位置的指针。

此外，运行探查器，例如：Jprofiler 将很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-07T17:54:13.787

CPU 使用率高的原因之一可能是因为正在执行 Full GC。您可以在这里查看[http://www.cubrid.org/blog/dev-platform/how-to-monitor-java-garbage-collection/](http://www.cubrid.org/blog/dev-platform/how-to-monitor-java-garbage-collection/)以了解如何在 jvm 中监控 GC。

如果没有 GC 活动，当您的 CPU 使用率超过某个阈值时，您需要每隔几秒 (5-10) 多次使用 jstack 进行线程转储。您可以通过后台进程来实现这一点，该进程使用 Unix top 命令监控运行 jvm 的进程的 CPU 使用率。

一旦线程转储可用，您可以通过 VisualVM 或 Samurai 等分析器运行它们，这将帮助您缩小到根本原因

# android - Android：从 url 下载大图像文件（最大 2 mb）

> ID：14602457
> 
> 赞同：2
> 
> 时间：2013-01-30T11:03:49.253
> 
> 标签：android

我想从 url 下载大图像文件，但是当我尝试解码输入流时，它抛出了内存错误。图像文件大小约为 2mb。

如何下载大图像文件并在图像视图中显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:12:43.027

查看此 [使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

```
try {
        URL url = new URL("image download url");
        URLConnection connection = url.openConnection();
        connection.connect();
        // this will be useful so that you can show a typical 0-100% progress bar
        int fileLength = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/image_name.extension");

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            // publishing the progress....                
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
    }
    return null; 
```

最好将它与 Asynctask 或线程一起使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:08:27.757

使用这个类它工作正常。

```
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.Collections;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.Map;
import java.util.WeakHashMap;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import android.graphics.drawable.Drawable;
import android.os.Handler;
import android.os.Message;
import android.widget.ImageView;

public class DrawableBackgroundDownloader {    

private final Map<String, Drawable> mCache = new HashMap<String, Drawable>();   
private final LinkedList <Drawable> mChacheController = new LinkedList <Drawable> ();
private ExecutorService mThreadPool;  
private final Map<ImageView, String> mImageViews = Collections.synchronizedMap(new WeakHashMap<ImageView, String>());  
public static int MAX_CACHE_SIZE = 80; 
public int THREAD_POOL_SIZE = 3;

/**
 * Constructor
 */
public DrawableBackgroundDownloader() {  
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);  
}  

/*
 * Clears all instance data and stops running threads
*/ 
public void Reset() {
    ExecutorService oldThreadPool = mThreadPool;
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);
    oldThreadPool.shutdownNow();

    mChacheController.clear();
    mCache.clear();
    mImageViews.clear();
}  

public void loadDrawable(final String url, final ImageView imageView,Drawable placeholder) {  
    if(!mImageViews.containsKey(url))
        mImageViews.put(imageView, url);  
    Drawable drawable = getDrawableFromCache(url);  

    // check in UI thread, so no concurrency issues  
    if (drawable != null) {  
        //Log.d(null, "Item loaded from mCache: " + url);  
        imageView.setImageDrawable(drawable);  
    } else {  
        imageView.setImageDrawable(placeholder);  
        queueJob(url, imageView, placeholder);  
    }  
} 

public Drawable getDrawableFromCache(String url) {  
    if (mCache.containsKey(url)) {  
        return mCache.get(url);  
    }  

    return null;  
}

private synchronized void putDrawableInCache(String url,Drawable drawable) {  
    int chacheControllerSize = mChacheController.size();
    if (chacheControllerSize > MAX_CACHE_SIZE) 
        mChacheController.subList(0, MAX_CACHE_SIZE/2).clear();

    mChacheController.addLast(drawable);
    mCache.put(url, drawable);

}  

private void queueJob(final String url, final ImageView imageView,final Drawable placeholder) {  
    /* Create handler in UI thread.  */
    final Handler handler = new Handler() {  
        @Override  
        public void handleMessage(Message msg) {  
            String tag = mImageViews.get(imageView);  
            if (tag != null && tag.equals(url)) {
                if (imageView.isShown())
                    if (msg.obj != null) {
                        imageView.setImageDrawable((Drawable) msg.obj);  
                    } else {  
                        imageView.setImageDrawable(placeholder);  
                        //Log.d(null, "fail " + url);  
                    } 
            }  
        }  
    };  

    mThreadPool.submit(new Runnable() {  
        public void run() {  
            final Drawable bmp = downloadDrawable(url);
            // if the view is not visible anymore, the image will be ready for next time in cache
            if (imageView.isShown())
            {
                Message message = Message.obtain();  
                message.obj = bmp;
                //Log.d(null, "Item downloaded: " + url);  

                handler.sendMessage(message);
            }
        }  
    });  
}  

private Drawable downloadDrawable(String url) {  
    try {  
        InputStream is = getInputStream(url);

        Drawable drawable = Drawable.createFromStream(is, url);
        putDrawableInCache(url,drawable);  
        return drawable;  

    } catch (MalformedURLException e) {  
        e.printStackTrace();  
    } catch (IOException e) {  
        e.printStackTrace();  
    }  

    return null;  
}  

private InputStream getInputStream(String urlString) throws MalformedURLException, IOException {
    URL url = new URL(urlString);
    URLConnection connection;
    connection = url.openConnection();
    connection.setUseCaches(true); 
    connection.connect();
    InputStream response = connection.getInputStream();

    return response;
}
} 
```

示例如何使用：

```
DrawableBackgroundDownloader drawableDownloader = new DrawableBackgroundDownloader(); //as a field in your class
ImageView iView // ImageView to assign the drawable
Drawable drawable // The drawable that will show during the image is loading.
drawableDownloader.loadDrawable("htttp://asd.com/img.jpg", iView,drawable); 
```

哟可以编辑调整大小：

```
 mThreadPool.submit(new Runnable() {  
            public void run() {  
                final Drawable bmp = downloadDrawable(url);
                // if the view is not visible anymore, the image will be ready for next time in cache
                if (imageView.isShown())
                {
                    Message message = Message.obtain();  
                    message.obj = bmp;
                    //Log.d(null, "Item downloaded: " + url);  

                    handler.sendMessage(message);
                }
            }  
        });  
    } 
```

Resize：[在 Android 中调整 Drawable 的大小](https://stackoverflow.com/questions/7021578/resize-drawable-in-android)

# php - Mysqli Prepared Statements 和 Transactions 多次插入

> ID：14602459
> 
> 赞同：0
> 
> 时间：2013-01-30T11:03:52.650
> 
> 标签：php, mysqli

这篇文章只是为了澄清我的代码是否有效编写。我需要多个表才能在一个函数中插入值。由于这些值将通过用户提交，因此我使用了 Prepared statements 以防止任何 SQL 注入（在函数之前也有效地清理了 set 变量）

```
public function the_name($var1, $var2)
{
  $mysqli->autocommit(FALSE);
  $stmt_one = $mysqli->prepare("Insert into TABLE SET $var1 = ?, $var2 = ? ");
  $stmt_two = $mysqli->prepare("Insert into TABLE SET $var1 = ?, $var2 = ? ");
  $stmt_one->bind_param('is',$var1,$var2);
  $stmt_two->bind_param('is',$var1,$var2);
  $stmt_one->execute();
  $stmt_two->execute();
  $mysqli->commit();
  $stmt_one->close();
  $stmt_two->close();
} 
```

该函数工作正常，但这是将多个值插入两个不同表的最佳方法吗？该函数似乎冗长......任何澄清如果这实际上是使用事务编写准备好的语句的正确方法。

更新：该功能用于在用户向其他用户提交帖子时创建通知。从而允许将帖子插入到帖子表中并将通知插入到通知表中。

# android - 重置特定偏好 Android

> ID：14602462
> 
> 赞同：3
> 
> 时间：2013-01-30T11:03:57.877
> 
> 标签：android, preferences

我有许多首选项，我想将它们重置为我的首选项 xml 文件中指定的默认值。

我不想重置我的所有偏好 - 只是一些选择的。

我试过了：

```
key=getResources().getString(R.string.myPref);
sharedPreferences.edit().remove(key).commit(); 
```

这将清除首选项。但是，当我的程序然后尝试选择偏好时

```
String myPref = sharedPreferences.getString(key, ""); 
```

它只返回空字符串。

如何从 XML 文件中获取值？

谢谢

添加我一直在调试的更完整的代码示例：

```
//Get preferences
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(activity);

//Get preference key
key=getResources().getString(R.string.myPref);

//Get preference value
String myPref = sharedPreferences.getString(key, ""); // Returns a value that has been entered by a user

//Clear preference
sharedPreferences.edit().remove(key).commit();

//Reset preferences to default values - without overwritting all
PreferenceManager.setDefaultValues(currentContext, preferences, false);

//Get preference value again
String myPref = sharedPreferences.getString(key, ""); // Returns an empty string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:06:31.623

Try `PreferenceManager.setDefaultValues(this, R.xml.preferences, false);` This is save as last parameter 确保用户更改的条目不会被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:07:20.997

> getDefaultSharedPreferences(Context).setDefaultValues(this, R.xml.preference, true);

请务必将最后一个参数*readAgain*设置为**true**。

这将强制重新读取默认值。如果为 false，则仅当过去从未调用过此方法（或者默认值共享首选项文件中的 KEY_HAS_SET_DEFAULT_VALUES 为 false）时，此方法才设置默认值。要尝试绕过此检查再次设置默认值，请将 readAgain 设置为 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T11:48:35.127

我意识到这个问题有点老了，但希望[这个答案](https://stackoverflow.com/a/7603665/956975)可以帮助未来的观众。它真的帮助了我。

> 引用答案：

尝试调用首选项本身的设置器，而不是自己更新它：

例如[`EditTextPreference.setText()`](http://developer.android.com/reference/android/preference/EditTextPreference.html#setText%28java.lang.String%29)。所以偏好本身也会更新它自己的价值。如果您自己进行更新，则首选项将不会获取新值，因为它甚至不知道持久值已更改。

如果您有 PreferenceFragment，您可以使用[`PreferenceFragment.findPreference()`](http://developer.android.com/reference/android/preference/PreferenceFragment.html#findPreference(java.lang.CharSequence)).

如果您有 PreferenceActivity，您可以使用[`PreferenceActivity.findPreference()`](http://developer.android.com/reference/android/preference/PreferenceFragment.html#findPreference(java.lang.CharSequence)).

您使用在设置 XML 文件中分配的首选项键调用它，并获得相应首选项的实例。然后将其转换为`CheckBoxPreference`,`EditTextPreference`等（您在 XML 文件中设置的类型）。

* * *

**我的个人适应：**

注意：我在 PreferenceFragment 扩展类中使用它，因此`this.getActivity()`.

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this.getActivity());
preferences.edit().remove(getResources().getString(R.string.pref_username)).apply();
EditTextPreference usernamePref = (EditTextPreference) findPreference(getString(R.string.pref_username));
usernamePref.setText(""); 
```

希望能帮助到你！

# iphone - 警告 typedef 'ElementType' 的重新定义是 C11 功能

> ID：14602463
> 
> 赞同：1
> 
> 时间：2013-01-30T11:03:59.440
> 
> 标签：iphone, ipad

我收到了这个警告`Redefinition of typedef 'ElementType' is a C11 feature`

```
typedef NSString* ElementType;

extern NSString* const Element_Type_Exit;
extern NSString* const Element_Type_NOTExit;
extern NSString* const Element_Type_Enter; 
```

如何修复警告！我正在寻找我的应用程序警告免费！任何人都可以建议我解决此警告。

@提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:04:16.613

您的代码中必须有另一个 ElementType 的 typedef。因此，您在此处重新定义它的编译器警告。

# jquery - jQuery“取消绑定”回到“绑定”不起作用

> ID：14602475
> 
> 赞同：0
> 
> 时间：2013-01-30T11:04:57.403
> 
> 标签：jquery, bind, unbind

当我单击一个元素时，我想取消绑定“mouseenter”和“mouseleave”事件，这可以正常工作，但是如果单击另一个元素，我想将它们重新绑定 - 这不起作用。

有什么帮助吗？

这是代码：

```
<script type="text/javascript">
  $(document).ready(function(){
        $("#shape1 img").click(function(){
          $("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").unbind('mouseenter mouseleave');
    });

     $("#close").click(function(){
        $("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").bind('mouseenter mouseleave');
     });
 });
</script> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:08:56.443

因为您需要分配回调以在事件发生时执行。

尝试 ：

```
<script type="text/javascript">
  $(document).ready(function(){
        var myFunctionMouseEnter = function(){
           alert('Hey');
        };
        var myFunctionMouseleave = function(){
           alert('Hey');
        };

        $("#shape1 img").click(function(){
          $("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").off('mouseenter mouseleave');
        });

        $("#close").click(function(){
            $("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").on('mouseenter',myFunctionMouseEnter )
                                                                               .on('mouseleave',myFunctionMouseleave );
        });
 });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:09:18.483

bind 只会为当前存在的项目绑定事件处理程序。

来自文档[Bind()](http://api.jquery.com/bind/)

> 处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于调用 .bind() 的位置

使用 On 方法。

```
$("#shape1 img").click(function(){
          $("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").off('mouseenter');
        });

        $("#close").click(function(){
            $("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").on('mouseenter',myFunction1);
            $("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").on('mouseleave',myFunction2);
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:07:38.627

该[`.bind()`](http://api.jquery.com/bind/)函数希望您在触发这些事件时传递一个要执行的函数。

```
$("#shape1 img,#shape2 img, #shape3 img, #shape4 img, #shape5 img").bind('mouseenter mouseleave', function(event) {
    // do something here when the mouseenter or mouseleave events are triggered
}); 
```

当您调用`.unbind()`事件处理程序时，它会被完全删除，并且 jQuery 不会记住它是什么。您不能简单地调用`.bind()`来撤消它并让它知道它应该执行哪些代码来响应这些事件。

此外，根据您的 jQuery 版本（1.7+），您应该使用[`.on()`](http://api.jquery.com/on/)and[`.off()`](http://api.jquery.com/off/)函数来添加和删除事件处理程序。

# javascript - div中的随机图像背景

> ID：14602482
> 
> 赞同：3
> 
> 时间：2013-01-30T11:05:25.727
> 
> 标签：javascript, css, html, random

我有一个“容器”DIV，可以缩放以适应 100% 的窗口，我想将随机图像加载到 DIV 中。我有一个适用于 html 背景的工作脚本，但我不能让它在 DIV 上工作。

任何建议？

这是原始脚本：

```
<script type="text/javascript">
    var imgCount = 3;
    var dir = 'images/';
    var randomCount = Math.round(Math.random() * (imgCount - 1)) + 1;
    var images = new Array
            images[1] = "bg-01.jpg",
            images[2] = "bg-02.jpg",
            images[3] = "bg-03.jpg",
    document.body.style.backgroundImage = "url(" + dir + images[randomCount] + ")"; </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:15:09.110

应该没有问题。只需找到该 div，例如使用 document.getElementById() 并为其应用背景图像：

```
<div id="divID"></div>
<script type="text/javascript">
    var imgCount = 3;
        var dir = 'images/';
        var randomCount = Math.round(Math.random() * (imgCount - 1)) + 1;
        var images = new Array
                images[1] = "bg-01.jpg",
                images[2] = "bg-02.jpg",
                images[3] = "bg-03.jpg",
        document.getElementById("divID").style.backgroundImage = "url(" + dir + images[randomCount] + ")"; 
   </script> 
```

但请注意，上面的脚本块必须在您需要更新的 div 之后。否则，在脚本执行时 div 将在 DOM 中不可用并且`document.getElementById`什么也找不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:08:39.623

`document.body.style.backgroundImage`将背景设置为`<body>`

您可以通过执行以下操作轻松强制它为您选择的 div 执行此操作：

```
document.getElementById('divID').style.backgroundImage = "url(" + dir + images[randomCount] + ")"; 
```

# inno-setup - 如何在设置初始化期间静默呼叫并解析响应（）

> ID：14602483
> 
> 赞同：2
> 
> 时间：2013-01-30T11:05:35.037
> 
> 标签：inno-setup

在 SETUP INIT 过程中，如何静默进行 HTML GET 调用（www.me.com/verify?id）并通过脚本静默解析纯文本响应？

是否有 API 调用，或者我需要实现 3rd 方 DLL 或类似的？

# ftdi - 使用 FTDI 设备 FT4232H 将初始状态设置为引脚上的输入

> ID：14602484
> 
> 赞同：0
> 
> 时间：2013-01-30T11:05:40.113
> 
> 标签：ftdi

我正在使用来自 FTDI 的名为 FT4232H 的 USB 设备，我想在 EEPROM 上进行写入，以确保在启动时将某些引脚设置为输入。我正在使用 D2XX 驱动程序（[此处](http://www.ftdichip.com/Support/Documents/ProgramGuides/D2XX_Programmer%27s_Guide%28FT_000071%29.pdf)为 pdf ）。在这里，我在第 106 页发现有一个名为 FT_EEPROM_4232H 的结构。这可以用来确保在开始时将引脚设置为输入还是完全错误的？有四个 UCHAR 变量，称为 A-、B-、C- 和 DDriverType。有谁知道这些应该用来做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:55:57.877

我意识到这个问题现在已经有 3 个月了，但我相信 FTx232H 系列芯片上的引脚只有在`SetOutput`发出 MPSSE 命令后才会被设置为 GPIO。

EEPROM 配置用于定义驱动强度、压摆率、引脚是否为施密特输入以及 4 个端口中的每个端口的设置（类似于 FT245 系列的异步 FIFO、串行端口 (FT232) 等） .

如果其他人可以反驳这一点，我也很想知道！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T02:44:01.850

我刚刚将我的 FT232H 板插入我的 PC 并运行 FTDI FT_Prog，看来您无法在启动时控制 GPIO 模式输入/输出。FTDI FT_Prog UI 中没有任何内容允许为 GPIO 引脚设置模式并将其设置为输入。

我确实以编程方式将我的 FT232H 板设置为具有 8 个 GPIOS 的 SPI 设备，但这是在芯片启动后完成的。

[FT232H 实验视频](https://www.youtube.com/watch?v=8i8_EFs_j0I)

我也曾经问过 FTDI 是否支持 FT232RL 的类似问题，它默认为 UART，我问是否有办法将芯片配置为以同步位撞击模式启动并将 GPIO 设置为输出。答案是否定的。

FT232RL 将始终作为 UART 启动，然后通过软件我可以激活同步位敲击模式，并设置我的 GPIO 的模式。

我想 FT232H、FT2232H 和 FT4232H 是一样的。

# python - 在 Python 中加入 2 个不同大小的列表

> ID：14602485
> 
> 赞同：2
> 
> 时间：2013-01-30T11:05:40.247
> 
> 标签：python

尝试使用 2 个不同大小的列表时出现“索引列表超出范围”错误。

例子：

```
ListA = [None, None, None, None, None]
ListB = ['A', None, 'B']

for x, y in enumerate(ListA):
    if ListB[x]:
        ListA[x]=ListB[x] 
```

这样做会得到“list of index out of range”错误，因为 ListB[3] 和 ListB[4] 不存在：
我希望加入 ListA 和 ListB 来让 ListA 看起来像这样：

```
ListA = ['A', None, 'B', None, None] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T11:09:41.560

使用[itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)

```
from itertools import izip_longest
ListA = [b or a for a, b in izip_longest(ListA,ListB)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:38:49.453

最快的解决方案是使用切片分配

```
>>> ListA = [None, None, None, None, None]
>>> ListB = ['A', None, 'B']
>>> ListA[:len(ListB)] = ListB
>>> ListA
['A', None, 'B', None, None] 
```

* * *

**定时**

```
>>> def merge_AO(ListA, ListB):
    return [ i[1] for i in map(None,ListA,ListB)]

>>> def merge_ke(ListA, ListB):
    for x in range(len(ListB)): #till end of b
        ListA[x]=ListB[x]
    return ListA

>>> def merge_JK(ListA, ListB):
    ListA = [b or a for a, b in izip_longest(ListA,ListB)]
    return ListA

>>> def merge_AB(ListA, ListB):
    ListA[:len(ListB)] = ListB
    return ListA

>>> funcs = ["merge_{}".format(e) for e in ["AO","ke","JK","AB"]]
>>> _setup = "from __main__ import izip_longest, ListA, ListB, {}"
>>> tit = [(timeit.Timer(stmt=f + "(ListA, ListB)", setup = _setup.format(f)), f) for f in funcs]
>>> for t, foo in tit:
    "{} took {} secs".format(t.timeit(100000), foo)

'0.259869612113 took merge_AO secs'
'0.115819095634 took merge_ke secs'
'0.204675467452 took merge_JK secs'
'0.0318886645255 took merge_AB secs' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T11:23:25.027

试试这个：

```
>>> [i[1] for i in map(None,ListA,ListB)]
['A', None, 'B', None, None] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T11:21:03.223

试试这个：

```
ListA = [None, None, None, None, None]
ListB = ['A', None, 'B']

for x in range(len(ListB)): #till end of b
    ListA[x]=ListB[x] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T12:02:21.840

使用 MAP 避免列表索引超出范围错误

```
for iterator,tup in enumerate(map(None,ListA,ListB)):
    if tup[1]:
        ListA[iterator] = tup[1] 
```

这将解决问题。

# c# - 使用 log4net 设置 XmlConfigurator 通用日志记录

> ID：14602488
> 
> 赞同：2
> 
> 时间：2013-01-30T11:05:47.750
> 
> 标签：c#, log4net, error-logging, xmlconfigurator

我一直在考虑为我工作的公司创建一个通用日志库，基于[Daniel Cazzulino 的博客](http://blogs.clariusconsulting.net/kzu/tracer-the-unified-dead-simple-api-for-all-logging-frameworks-in-existence/)。所以我们可以在没有太多干扰的情况下将一个换成另一个。

我希望使用的第一个库是`log4net`，但我无法确定您将如何或在何处设置对`XmlConfigurator`.

我曾尝试在正在记录的项目上添加一个程序集，这违背了我感觉的练习对象，但这似乎没有任何作用。

我尝试将其添加为 log4net 日志库的程序集，但这似乎不起作用。

我也尝试过从`log4net.Config.XmlConfigurator.Configure();`该`TraceManager.Get`方法调用，但所有日志选项（IsDebugEnabled、IsWarnEnabled、...）都被禁用。

```
public partial class TracerManager : ITracerManager
{
    /// <summary>
    /// Gets a tracer instance with the specified name.
    /// </summary>
    public ITracer Get(string name)
    {
        log4net.Config.XmlConfigurator.Configure();
        var logger = LogManager.GetLogger(name);
        return new Log4NetAdapter(logger);
    }
    /// The rest
} 
```

我需要做其他事情吗？应用程序配置是否需要在日志库中？

**[编辑 1]**

觉得很傻......

我已添加`[assembly: XmlConfigurator(Watch = true)]`到我的 Logging.Log4Net 库，但我没有在我的应用程序中实例化 TracerManager 我正在执行的测试... ID-10Tango 问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T09:37:22.207

我已经添加`[assembly: XmlConfigurator(Watch = true)]`到我的`Logging.Log4Net`库中，但我没有在我正在执行的测试中在我的应用程序中实例化 TracerManager ......

ID-10探戈问题

# css - 如何将类数组添加到 div？

> ID：14602489
> 
> 赞同：1
> 
> 时间：2013-01-30T11:05:48.110
> 
> 标签：css

我有一个网站，我应该让某些 div 透明。我不想用透明标签复制我的 div。我想归档这样的东西。

```
.wrapper { --div properties-- }
.transparent { --transparency properties --} 
```

我想像这样设置类属性。

```
<div class="wrapper . transparent"></div> 
```

所以这个 div 将从包装样式中获取所有属性，然后应用透明背景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:08:04.477

使用[类选择器](http://www.htmldog.com/guides/cssintermediate/classid/)而不是 ID 选择器：

```
.wrapper { --div properties-- }
.transparent { --transparency properties --} 
```

并在 HTML 标记中用一个空格分隔您的类名：

```
<div class="wrapper transparent"></div> 
```

# php - 重复的 jquery ajax 调用

> ID：14602490
> 
> 赞同：0
> 
> 时间：2013-01-30T11:05:49.343
> 
> 标签：php, javascript

我有多个复选框供用户选择，并且基于选定的复选框，我需要进行 jquery ajax 调用。为此，我使用 FOR 循环遍历选定元素数组并为每个复选框发送 ajax 请求。每个请求需要 5-10 分钟以上。在当前情况下，它同时调用所有 ajax 请求。

我只想在完成较早的 ajax 请求后才调用下一个 ajax 调用。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:10:37.433

您可以进行递归调用。

```
function sendAjax(id) {
        var checkbox = $('input[type=checkbox]:eq('+id+')','#formid');
        if(checkbox == undefined)
             return;
        $.ajax({
            type: 'POST',
            dataType: "json",
            url: 'url',
            data: { },
            success: function (data) {
                  sendAjax(id+1);
            },
            error: function (data) {
                alert(data.responseText);
            }
        });
    }
    sendAjax(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:09:55.583

这有点违背 ajax 的全部观点。第一个“a”通常被认为是“异步”的意思，但是你想让请求同步（async = false 我相信jQuery）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:07:31.527

在您的方法中迭代，`readyStateChange`而不是在 for 循环中。

```
 ...
    array_index++;
    var data = selected_elements[array_index];
    if (data) {
        send_ajax_request(data);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T07:22:32.220

使用递归调用，直到上一个ajax请求没有完成，下一个请求才能被处理。所以递归调用可以解决这些ajax请求的问题。

```
var queue_element = ["a","b","c","d","e","f","g"];
var execute_queue = function(i){    
  $.ajax( {    
    url: queue_element[i],
    success: function({
    i++;    // going to next queue entry

    // check if it exists
      if (queue_element[i] != undefined){
        execute_queue(i);
      }
    }
  }); // end of $.ajax( {...

}; // end of execute_queue() {...

var index = 0;

execute_queue(index); // go! 
```

# php - 在 PayPal IPN 中处理 subscr_failed

> ID：14602494
> 
> 赞同：0
> 
> 时间：2013-01-30T11:05:52.773
> 
> 标签：php, paypal, paypal-sandbox, paypal-ipn

希望有人能帮忙！当用户订阅付款被拒绝/失败时，我无法看到此代码用于更新数据库中的一行。

```
$payer_email_ipn =$_POST['payer_email'];
// failed subscription payment
if ($_POST['txn_type'] == 'subscr_failed') {
    $sql = "UPDATE ipn_testing SET account_status='0' WHERE email='$payer_email_ipn'";
    if (!mysql_query($sql)) {
        error_log(mysql_error());
        exit(0);
    }
    mail('amdin@mydomain.co.uk','IPN Notification: Subscription failed','Subscription failed for '.$payer_email_ipn);
    exit(0);
} 
```

我猜这类似于我在他们付款时将 account_status 设置为 1 的代码，这很好用！但这无论出于何种原因都行不通！:(（支付成功代码如下）

```
$sql = "UPDATE ipn_testing SET account_status='1' WHERE email='$payer_email_ipn'";    
if (!mysql_query($sql)) {
    error_log(mysql_error());
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:52:15.623

您确定要输入该代码块吗？目测你有什么是有道理的，所以我会在 // failed 评论之后放置一个错误日志，以查看 $_POST['txn_type'] 的值是什么。

# android - 在 ubuntu 中为 android 配置 sphinxbase 或 pocketsphinx

> ID：14602497
> 
> 赞同：0
> 
> 时间：2013-01-30T11:06:01.163
> 
> 标签：android, ubuntu

我需要为我的 android 应用程序实现语音到文本的离线功能，我发现我试图在 ubuntu 中安装库 sphinxbase 但出了点问题并且发生了错误。我已经下载了 sphinxbase 和 pockectsphinx 的包并放在同一个目录中，正如文件所说，我在这条消息发生后成功运行了 ./autogen.sh 文件，在 make 命令之后运行 make 命令编译包，出现了一些错误

```
libtool: install: /usr/bin/install -c .libs/libsphinxbase.a /usr/local/lib/libsphinxbase.a
libtool: install: chmod 644 /usr/local/lib/libsphinxbase.a
libtool: install: ranlib /usr/local/lib/libsphinxbase.a/bin/bash: /home/speech: No such file or directory
make[4]: *** [install-libLTLIBRARIES] Error 127
make[4]: Leaving directory `/home/speech to text/Untitled Folder/sphinxbase/src/libsphinxbase'
make[3]: *** [install-am] Error 2
make[3]: Leaving directory `/home/speech to text/Untitled Folder/sphinxbase/src/libsphinxbase'
make[2]: *** [install-recursive] Error 1
make[2]: Leaving directory `/home/speech to text/Untitled Folder/sphinxbase/src/libsphinxbase'
make[1]: *** [install-recursive] Error 1
make[1]: Leaving directory `/home/speech to text/Untitled Folder/sphinxbase/src'
make: *** [install-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:50:51.140

去掉目录名中的空格。
尝试将**"speech to text" 重命名为 "speechtotext"**。

# android - 以编程方式创建布局首选项

> ID：14602504
> 
> 赞同：7
> 
> 时间：2013-01-30T11:06:36.440
> 
> 标签：android, layout, android-preferences, preferenceactivity

我需要有关偏好的帮助。我需要以编程方式创建它们。我有这个偏好屏幕：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceCategory android:title="About" >
        <Preference android:title="Software Version" android:summary="1.3.554" android:key="software"/>
        <Preference android:title="User" android:summary="jnovkovic@itekako.com" android:key="email"/>
        <Preference android:title="Terms and conditions" />
    </PreferenceCategory>
    <PreferenceScreen android:key="log_out" android:layout="@layout/preference_log_out"/>

</PreferenceScreen> 
```

我这样做了：

```
PreferenceScreen root = getPreferenceManager().createPreferenceScreen(this);
PreferenceCategory about = new PreferenceCategory(this);
        about.setTitle("About");
        root.addPreference(about);

        Preference software = new Preference(this);
        software.setTitle("Software Version");
        software.setKey("software");
        software.setSummary("1.3.554");
        about.addPreference(software);

        Preference user = new Preference(this);
        user.setTitle("User");
        user.setKey("user");
        user.setSummary(preferences.getString("user_email", ""));
        about.addPreference(user);

        Preference terms_and_conditions = new Preference(this);
        terms_and_conditions.setTitle("Terms and conditions");
        terms_and_conditions.setKey("terms_and_conditions");
        about.addPreference(terms_and_conditions);

        RelativeLayout layout = new RelativeLayout(this);
        layout.setId(1100);
        AbsListView.LayoutParams p = new AbsListView.LayoutParams(AbsListView.LayoutParams.MATCH_PARENT, AbsListView.LayoutParams.WRAP_CONTENT);
        layout.setLayoutParams(p);

        TextView log_out_text = new TextView(this);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
        log_out_text.setTextSize(TypedValue.COMPLEX_UNIT_SP, 18);
        log_out_text.setTypeface(null, Typeface.BOLD);
        log_out_text.setGravity(Gravity.CENTER);
        log_out_text.setTextColor(Color.parseColor("#FFFFFF"));
        log_out_text.setBackgroundDrawable(log_out_drawable);
        log_out_text.setLayoutParams(params);
        layout.addView(log_out_text);

        Preference log_out = new Preference(this);
        log_out.setLayoutResource(1100);
        root.addPreference(log_out);

        setPreferenceScreen(root); 
```

问题出在上面的第三行......有人可以帮助我吗？？？？

错误是：

```
01-30 10:56:16.886: E/AndroidRuntime(3420): FATAL EXCEPTION: main
01-30 10:56:16.886: E/AndroidRuntime(3420): android.content.res.Resources$NotFoundException: Resource ID #0x44c
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.content.res.Resources.getValue(Resources.java:892)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1869)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.content.res.Resources.getLayout(Resources.java:731)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.preference.Preference.onCreateView(Preference.java:412)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.preference.Preference.getView(Preference.java:389)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.preference.PreferenceGroupAdapter.getView(PreferenceGroupAdapter.java:221)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.AbsListView.obtainView(AbsListView.java:1554)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.ListView.makeAndAddView(ListView.java:1793)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.ListView.fillDown(ListView.java:718)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.ListView.fillFromTop(ListView.java:775)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.ListView.layoutChildren(ListView.java:1646)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.AbsListView.onLayout(AbsListView.java:1384)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.view.View.layout(View.java:7228)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.view.View.layout(View.java:7228)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.view.View.layout(View.java:7228)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.view.View.layout(View.java:7228)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1145)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.os.Looper.loop(Looper.java:130)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at android.app.ActivityThread.main(ActivityThread.java:3687)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at java.lang.reflect.Method.invokeNative(Native Method)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at java.lang.reflect.Method.invoke(Method.java:507)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-30 10:56:16.886: E/AndroidRuntime(3420):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T11:53:52.747

您正在尝试做的事情：*以编程方式创建资源*。你不能这样做。Android 资源是在编译过程中创建的。（基本上 xml 文件由 SDK 处理/编译，这就是创建资源的方式）。

您可以尝试的是：

*   创建自定义`public class MyPreference extends Preference`
*   覆盖`onCreateView(ViewGroup parent)`以返回您需要的布局。

并像这样使用这个类：

```
 Preference log_out = new MyPreference(this);
    root.addPreference(log_out); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-11T06:24:52.117

这是一个简短的示例（假设您正在扩展 PreferenceActivity）：

```
 public void onCreate(Bundle savedInstanceState)
  {
  super.onCreate(savedInstanceState);
  PreferenceScreen screen = getPreferenceManager().createPreferenceScreen(this);

  PreferenceCategory category = new PreferenceCategory(this);
  category.setTitle("category name");

  screen.addPreference(category);

  CheckBoxPreference checkBoxPref = new CheckBoxPreference(this);
  checkBoxPref.setTitle("title");
  checkBoxPref.setSummary("summary");
  checkBoxPref.setChecked(true);

  category.addPreference(checkBoxPref);
  setPreferenceScreen(screen);
  } 
```

# ios - 核心绘图：沿 x 轴平移和缩放两个绘图空间并自动缩放两个 y 轴

> ID：14602505
> 
> 赞同：2
> 
> 时间：2013-01-30T11:06:37.287
> 
> 标签：ios, objective-c, cocoa-touch, core-plot

我有一个带有两个线图的核心图（图 1 使用`y`LHS 上的 - 轴，图 2 使用`y2`RHS 上的 - 轴）和两个绘图空间（`lhsPlotSpace`和`rhsPlotSpace`）。

对于初始绘图设置，我使用`scaleToFitPlots`自动缩放两个绘图，它按预期工作：

```
[lhsPlotSpace scaleToFitPlots:lhsPlots];
[rhsPlotSpace scaleToFitPlots:rhsPlots]; 
```

情节看起来类似于下面的屏幕截图。

为了显示更多细节，我希望允许用户水平平移和水平缩放，只要在左右两侧显示更多数据（平移和缩放应该仅由用户驱动`x`）。

-axis`y`和`y2`-axis 应根据平移和缩放后可见的范围自动缩放。

你能帮我解决这个问题吗？我尝试使用委托

根据我在 Core Plot 论坛和 StackOverFlow 上找到的代码示例，我尝试使用委托方法执行此操作`plotSpace:willChangePlotRangeTo:forCoordinate`

```
- (CPTPlotRange *)plotSpace:(CPTPlotSpace *)space 
willChangePlotRangeTo:(CPTPlotRange *)newRange 
forCoordinate:(CPTCoordinate)coordinate
{
if (coordinate == CPTCoordinateY) {
   newRange = ((CPTXYPlotSpace*)space).yRange;

return newRange     
} 
```

但除了获得非常基本的缩放之外，我还没有找到与我的问题更接近的解决方案。

能否请您指出要使用哪些代表方法、如何限制滚动以及如何以及在何处设置新的`y`-scale 因子在平移和缩放之后？

非常感谢！

![在此处输入图像描述](../Images/f3e0d8e07b51598b7e088eee5e3bec60.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:00:54.153

将`globalYRange`每个绘图空间的 设置为对应`yRange`的，以防止在 y 方向上缩放和滚动。

`-scaleToFitPlots:`在计算新范围时使用给定图的所有图数据。如果您想`yRange`根据可见数据缩放绘图空间，您必须自己在绘图空间委托中执行此操作。委托方法是一个不错的`-plotSpace:willChangePlotRangeTo:forCoordinate:`选择。

# join - Datomic - 在没有引用的实体之间连接

> ID：14602506
> 
> 赞同：3
> 
> 时间：2013-01-30T11:06:38.703
> 
> 标签：join, clojure, datomic

我的问题是 - 有没有办法在 Dataomic 中连接两个在模式中没有引用的实体，而无需编写两个嵌套迭代器（手动连接）。

在[Datomic Doco 中](http://docs.datomic.com/)，他们给出了[一个指定两个参数的查询示例](http://docs.datomic.com/tutorial.html)。

```
[:find ?n ?u
 :where
 [?c :community/name ?n]
 [?c :community/url ?u]] 
```

他们称之为“连接”——因为底层结构是一个键值数据库——所以即使是同一实体的属性也需要“连接”在一起。

然后，他们给出了两个具有引用的实体之间的连接示例（假设引用在此处未显示的架构中定义）：

```
[:find ?c_name
 :where
 [?c :community/name ?c_name]
 [?c :community/neighborhood ?n]
 [?n :neighborhood/district ?d]
 [?d :district/region :region/ne]] 
```

我的问题是 - 如果没有架构中的引用，是否可以进行上述查询？还是我必须求助于编写迭代器并搜索结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:23:24.037

在 :where 子句中多次出现的任何变量都会被隐式连接。

因此，您可以询问属于社区和社区的名称

```
(def results (q '[:find ?name :where [_ :neighborhood/name ?name] 
                                     [_ :district/name ?name]] 
                 (db conn))) 
```

这是你要求的吗？（在这个例子中，id 被忽略了）

# php - 从数组中删除重复值

> ID：14602507
> 
> 赞同：-5
> 
> 时间：2013-01-30T11:06:39.833
> 
> 标签：php

> **可能重复：**
> [如何从 PHP 中的多维数组中删除重复值](https://stackoverflow.com/questions/307674/how-to-remove-duplicate-values-from-a-multi-dimensional-array-in-php)

我想知道如何从以下内容中删除重复的数组值

```
大批 （
   [0] => 数组 ( )
   [1] => 数组 (
      [0] => 7
      [1] => 8
   )
   [2] => 数组 (
      [0] => 7
   )
   [3] => 数组 (
      [0] => 8
   )
)
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:32:25.120

使用`array_unique`PHP 函数。

```
array_unique($variable); 
```

# java - Jar 文件在 Web 服务器上不起作用

> ID：14602509
> 
> 赞同：0
> 
> 时间：2013-01-30T11:06:52.920
> 
> 标签：java, php, jar, webserver, exec

我有一个使用控制台在我的 Mac 上运行良好的 Jar 文件：

```
 MacBook-Pro-Pavel:PDFparser pavelpigalev$ java -jar PDFparser.jar
 Usage: java PDFparser <input-pdf> -p1 <password> -c1 -i0 -s1
    -p1 : PDF password
    -c1 : write JSON to console
    -i0 : don't extract images
    -s1 : take page screenshots [WARNING: currently in beta]
 MacBook-Pro-Pavel:PDFparser pavelpigalev$ java -jar PDFparser.jar f5.pdf
 MacBook-Pro-Pavel:PDFparser pavelpigalev$ 
```

它创建一个文件夹并在该文件夹中放置我需要的图像。

但是，如果我在 Web 服务器上使用它（也使用控制台），它会给我这个错误：

```
 [root@somesite.com pdfparser]$ ls
ffive.pdf  lib  PDFparser.jar  README.TXT
[root@somesite.com pdfparser]$ java -jar "PDFparser.jar"
Usage: java PDFparser <input-pdf> -p1 <password> -c1 -i0 -s1
    -p1 : PDF password
    -c1 : write JSON to console
    -i0 : don't extract images
    -s1 : take page screenshots [WARNING: currently in beta]
[root@somesite.com pdfparser]$ java -jar "PDFparser.jar" ffive.pdf
Exception in thread "main" java.lang.ClassNotFoundException: javax.vecmath.Vector2d not found in gnu.gcj.runtime.SystemClassLoader{urls=[file:PDFparser.jar], parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
   at java.net.URLClassLoader.findClass(libgcj.so.10)
   at java.lang.ClassLoader.loadClass(libgcj.so.10)
   at java.lang.ClassLoader.loadClass(libgcj.so.10)
   at java.lang.reflect.Field.getType(libgcj.so.10)
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.excludeField(ReflectiveTypeAdapterFactory.java:56)
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:111)
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
   at com.google.gson.Gson.getAdapter(Gson.java:353)
   at com.google.gson.internal.bind.CollectionTypeAdapterFactory.create(CollectionTypeAdapterFactory.java:52)
   at com.google.gson.Gson.getAdapter(Gson.java:353)
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.<init>(ReflectiveTypeAdapterFactory.java:82)
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)
   at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
   at com.google.gson.Gson.getAdapter(Gson.java:353)
   at com.google.gson.Gson.toJson(Gson.java:578)
   at com.google.gson.Gson.toJson(Gson.java:565)
   at com.google.gson.Gson.toJson(Gson.java:520)
   at com.google.gson.Gson.toJson(Gson.java:500)
   at pdfparser.PDFparser.main(PDFparser.java:163) 
```

我没有制作这个 Jar 文件，我对 Java 不太了解。我使用 PHP，我真的需要这个程序在服务器上运行良好。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:08:13.477

将 vechmath`.jar`放在你的类路径中

或者 - 将您的支持添加`.jar`到类路径中

`export CLASSPATH=$CLASSPATH:/path/to/vecmath.jar`

或者 - 在运行时供应

```
java -cp vecmath-xxx.jar -jar Yourjar.jar 
```

[类路径](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)的重要性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:13:40.320

您使用的 JVM 与您的 macbook 中的不同。您正在使用 GNU JVM，如`not found in gnu.gcj.runtime.SystemClassLoader`

尝试`java -version`确认，然后更改您的 JVM

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:10:24.143

尝试在您的 Mac 上找到 vecmath-1.3.1.jar 文件并将其放在与 PDFparser.jar 所在的目录相同的目录中。尝试运行。如果没有成功，则尝试如下运行：

```
 java -cp vecmath-1.3.1.jar -jar "PDFparser.jar" 
```

# c# - 如何实现通用控件验证？

> ID：14602511
> 
> 赞同：0
> 
> 时间：2013-01-30T11:06:57.353
> 
> 标签：c#, wpf, mvvm, idataerrorinfo

我最近一直在尝试养成在我正在从事的项目中使用 MVVM 设计模式的习惯，目的是解耦应用程序中的各种模块并使其适合单元测试。

我已经转向输入验证。我在我的 ViewModel 中实现 IDataErrorInfo ......这似乎对 TextBox 工作得很好。

**我目前正在尝试研究如何在绑定到自定义对象的 ObservableCollection 的 ListBox 控件上实现 IDataErrorInfo。问题是每一行（ListBoxItem）都直接更新模型，所以我在 ViewModel 中的 IDataErrorInfo 实现被绕过了。**所以我看到它的方式我可以做两件事之一 -

1) 创建一个辅助 ViewModel（代表 ListBoxItems），我用它来填充 Observable Collection 并在其上实现 IDataErrorInfo。

2) 在我的模型上实现 IDataErrorInfo。但是，由于 ViewModel 主要用于中继来自我的模型的引用，因此我可能会考虑将所有 IDataErrorInfo 实现移动到我的模型类以保持一致性......

你会怎么办？

另外...关于创建可重用验证方法的任何建议，我可以轻松地将其应用于任何类型的控件？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:10:37.377

> 你会怎么办？

当然，第一个选项 - 为列表项创建辅助视图模型。你不应该`IDataErrorInfo`在你的模型中实现，因为这是特定于 UI 的功能。

> 可重用的验证方法，我可以轻松地将其应用于任何类型的控件

你误解了MVVM。`IDataErrorInfo`用于视图模型验证，而不是*控件*验证。

# jquery-ui-datepicker - 日期选择器应仅显示下个月的日期。将当前月份的日期限制为不可选择

> ID：14602515
> 
> 赞同：0
> 
> 时间：2013-01-30T11:07:11.650
> 
> 标签：jquery-ui-datepicker

我有以下要求：日期选择器应显示从下个月开始的日期。

例如，如果当前月份是 1 月，那么它应该显示从 2 月的第一天开始的日期，如果是 2 月，它应该显示从 3 月 1 日开始的日期。在所有情况下，当前月份日期都应该是不可选择或隐藏的。

请帮助我如何实现此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:11:02.587

jQuery 日期选择器开箱即用地支持此功能。

[http://jqueryui.com/datepicker/#min-max](http://jqueryui.com/datepicker/#min-max)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:18:31.167

Here is what you need to do:

```
$(document).ready(function() {
    $("#dateThis").datepicker({minDate: "+1M"});
}); 
```

Working [fiddle](http://jsfiddle.net/RXpCT/).

# iphone - MKPlacemark 类的实例 0x1d58be70 被释放

> ID：14602516
> 
> 赞同：0
> 
> 时间：2013-01-30T11:07:15.920
> 
> 标签：iphone, ios, ios6-maps

当我尝试使用 MKPlacemark 使用此代码在 mapview 上添加注释时：

```
for(int i = 0; i < [array count]; i++){
        UsersModel *model = [array objectAtIndex:i];

        CLLocationCoordinate2D newCoordinate;
        newCoordinate.latitude = model.coordinate.latitude;
        newCoordinate.longitude = model.coordinate.longitude;

        NSLog(@"%f",model.coordinate.latitude);
        NSLog(@"%f",model.coordinate.longitude);

        //mPlaceMark = [[MKPlacemark alloc] initWithCoordinate:newCoordinate addressDictionary:nil];

        MKPlacemark *placeMark = [[MKPlacemark alloc] initWithCoordinate:newCoordinate addressDictionary:nil];

        //[self.mapView addAnnotation:mPlaceMark];
        [self.mapView addAnnotation:placeMark];
        //[placeMark retain];
        NSLog(@"%@", self.mPlaceMark);
    } 
```

然后它在我的控制台上给出了一个错误：

```
An instance 0x1d58be70 of class MKPlacemark was deallocated while key value observers were still registered with it. Observation info was leaked, and may even become mistakenly attached to some other object. Set a breakpoint on NSKVODeallocateBreak to stop here in the debugger. Here's the current observation info:
<NSKeyValueObservationInfo 0x1d53de10> (
<NSKeyValueObservance 0x1d58af30: Observer: 0x1d576690, Key path: coordinate, Options: <New: NO, Old: NO, Prior: YES> Context: 0x0, Property: 0x1d58af90>
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:38:50.653

看起来，你忘了删除一些观察者。尝试在您的类`dealloc`方法中使用此代码。

```
 for (id <MKAnnotation> annotation in self.mapView.annotations)
 {
      [[self.mapView viewForAnnotation:annotation] removeObserver:self]; // NOTE: remove ALL observer!
 } 
```

您还应该记住`nil`您的地图委托：

```
 self.mapView.delegate = nil; 
```

# java - Java中的正则表达式。意外行为

> ID：14602518
> 
> 赞同：1
> 
> 时间：2013-01-30T11:07:20.530
> 
> 标签：java, regex, parsing, matcher

我试图主要匹配数字，但取决于表达式后面的单词，我需要有所作为。

我匹配每个没有后跟温度术语（如°C）或时间规范的数字。我的正则表达式如下所示：

```
(((\d+?)(\s*)(\-)(\s*))?(\d+)(\s*))++(?!minuten|Minuten|min|Min|Stunden|stunden|std|Std|°C| °C) 
```

这是一个例子： [http ://regexr.com?33jeg](http://regexr.com?33jeg)

虽然这种行为是我所期望的，但 Java 会执行以下操作：索引是匹配 4 的对应组

```
0: "4 "1: "4 "2: "0 - "3: "0"4: " "5: "-"6: " "7: "4"8: " "9: "°C" 
```

您需要知道我将每个字符串都单独匹配。所以 5 的比赛看起来像这样：

```
0: "5 "1: "5 "2: "null"3: "null"4: "null"5: "null"6: "null"7: "5"8: " "9: "null" 
```

这就是我喜欢其他比赛的方式。这种不愉快的行为仅在匹配之前的字符串中某处出现“-”时

我的 Java 代码如下：

```
public static void adaptPortionDetails(EList<Step> steps, double multiplicator){

    String portionMatcher = "(((\\d+?)(\\s*)(\\-)(\\s*))?(\\d+)(\\s*))++(?!°C|Grad|minuten|Minuten|min|Min|Stunden|stunden|std|Std)";

    for (int i = 0; i < steps.size(); i++) {
        Matcher matcher = Pattern.compile(portionMatcher).matcher(
                steps.get(i).getDescription());
        StringBuffer sb = new StringBuffer();
        while (matcher.find()) {
            printGroups(matcher);
            String newValue1Str;
            if (matcher.group(3) == null){
                newValue1Str = "";
                System.out.println("test");
            }else{
                double newValue1 = Integer.parseInt(matcher.group(3)) * multiplicator;
                newValue1Str = Fraction.getFraction(newValue1).toProperString();
            }
            double newValue2 = Integer.parseInt(matcher.group(7)) * multiplicator;
            String newValue2Str = Fraction.getFraction(newValue2).toProperString();

            matcher.appendReplacement(sb, newValue1Str + "$4$5$6" + newValue2Str + "$8");
        }
        matcher.appendTail(sb);
        steps.get(i).setDescription(sb.toString());
    }
} 
```

希望你能告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:25:41.343

这似乎是 Java 实现中的一个错误（或功能？）。当必须从下一个索引重做匹配时，似乎不会重置捕获组的捕获文本。

该测试揭示了 Java 正则表达式引擎和 PHP 的 PCRE 之间的行为差​​异。

*   正则表达式：`(\d+(-\d+)?){1}+(?!x)`
*   输入：`34 34-43x 78 90`
*   Java 结果：3 个匹配项 ( `34`, `78`, `90`)。第二场比赛的第二个捕获组是`-43`。第 2 个捕获组在第 1 场和第 3 场比赛中没有捕获任何东西。
*   [PHP 结果](http://www.regex101.com/r/zB9oK3)：同样是 3 个匹配项，但第二个捕获组没有捕获所有匹配项。对于 PHP 的 PCRE 实现，当必须重做匹配时，捕获组的捕获文本将被重置。

这是在 JRE 6 Update 37 和 JRE 7 Update 11 上测试的。

同样的结果，只是为了证明在必须重做匹配时捕获的文本不会被重置：

*   正则表达式：`a(\d+(-\d+)?){1}+(?!x)`
*   输入：`a34 a34-43x a78 a90`
*   [PHP结果](http://www.regex101.com/r/zH7gL1)

**关于你的正则表达式的一些评论**

我认为`++`应该是`{1}+`，因为您似乎想一次修改一个数字或一个数字范围，同时使匹配具有所有格以丢弃不需要的数字。

**解决方法**

第一个组（最外面的捕获组）捕获所有内容（一个数字或一个数字范围），当找到匹配项时将始终被覆盖。因此，您可以依赖它。您可以检查组1中是否存在a `-`（使用`contains`方法）。如果有，那么您可以判断捕获组 2 包含当前匹配中捕获的文本，并且您可以使用捕获的文本。如果没有，那么您可以忽略捕获组 2 及其嵌套捕获组中的所有捕获文本。

# winforms - winform中Datalist的替代品

> ID：14602525
> 
> 赞同：0
> 
> 时间：2013-01-30T11:07:39.997
> 
> 标签：winforms

我正在为我的项目使用窗口应用程序，但我遇到了一些问题。我想在窗口应用程序中替代数据列表来显示数据。

# html - 背景图像在平板电脑上没有延伸到全宽

> ID：14602531
> 
> 赞同：2
> 
> 时间：2013-01-30T11:07:52.983
> 
> 标签：html, css, responsive-design

![在此处输入图像描述](../Images/a166943f0b2fa47aeb48d0b3b997abc7.png)我正在尝试响应式设计。

链接在这里：[http ://truewizard.com.au/buildzone/v2/](http://truewizard.com.au/buildzone/v2/)

我附上了来自我的关系的问题图片。

我认为这可能与这行代码有关：

```
 <meta name="viewport" 
  content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /> 
```

有任何想法吗？

CSS：正文，html {填充：0px；边距：0px；高度：100%；}

```
 body {
            background:#0f0f0f;
            font-family: "Calibri", Georgia, sans-serif;
            font-size:14px;
            line-height:30px;
            color:#bdbdbd;
            }

            a {
            text-decoration:none;

            }

            /* Clearfix */

            .clearfix:after {
                content: ".";
                display: block;
                clear: both;
                visibility: hidden;
                line-height: 0;
                height: 0;
            }

            .clearfix {
                display: inline-block;
            }

            html[xmlns] .clearfix {
                display: block;
            }

            * html .clearfix {
                height: 1%;
            }

            /*Header*/

            #title_bar #logo {
            float: left;
            }

            #title_bar #phone-number {
            float: right;
            }

            #banner {
            background:url(images/banner.jpg) no-repeat;
            }

            #banner .container {
            position:relative;
            }

            .learn_more {
            font-size:18px;
            display:inline-block;
            padding-right:15px;
            background:url(images/learn_more_arrow.png) no-repeat right center;
            }

            .learn_more a {
            color:#63d1ff;
            }

            /*service Tabs*/

            .tab_body {
            position:relative;
            }

            .tab_body img {
            margin:0 auto;
            display:block;
            position:relative;
            top:25%;
            }

            /*Main Wrap*/

            #main_wrap {
            padding-top:40px;
            }

            #quote_form {
            width:385px;
            height:409px;
            background:url(images/quote_form.jpg) no-repeat;
            padding:90px 40px 0 30px;
            }

            #quote_form input {
            width:276px;
            height:27px;
            background:#1f1e1e;
            border:1px solid #282828;
            color:#bdbdbd;
            }

            #quote_form textarea {
            background:#1f1e1e;
            border:1px solid #282828;
            width:272px;
            height:200px;
            }

            #quote_form #quote_form_submit {
            color:#bdbdbd;
            background:#3c3c3c;
            cursor:pointer;
            }

            #quote_form fieldset {
            border:0;
            }

            #quote_form td {
            padding:2px 0 2px 0;
            }

            #quote_form .quote_form_label {
            padding-right:20px;
            }

            .highlight_text {
            color:#25aae1;
            font-size:18px;
            }

            #main_wrap .highlight_text {
            margin:0;
            }

            h3 {
            color:#fff;
            margin:0;
            padding:0;
            font-size:14px;
            }

            .tab_title {
            text-align:center;
            height:37px;
            padding-top:5px;
            }

            #testomonials_box {
            height:433px;
            clear:both;
            }

            #testomonials_bg {
            height:331px;
            background:url(images/testomonials_box.jpg);
            }

            #clients_say {
            height:62px;
            padding-top:40px;
            }

            /*slideshow*/

            #slides {
            position:relative;
            height:331px;
            }

            .slides_container {     
            height:273px;

            }

            .slides_container div {     
            display:block;

            }

            .testomonial_text {

            margin-top:40px;
            text-align:center;
            }

            .testomonial_text p {
            text-align:right;
            padding-right:50px;
            }

            .pagination {
            margin:0;
            padding:0;
            height:11px;
            overflow:hidden;
            width:84px;
            margin:0 auto;
            }

            .pagination li {
            float:left;
            padding:0 5px 0 5px;
            list-style:none;
            }

            .pagination li a {
            background:url(images/pagination.png) no-repeat;
            width:11px;
            height:11px;
            display:block;
            padding-top:15px;
            }

            /*footer*/

            #footer {
            background:url(images/footer_bg.gif) repeat-x;
            height:400px;
            }

            @media screen and (min-width: 960px) {

                    #banner {
                    height:613px;
                    }

                    #refreshing_approach {
                    margin:50px auto 10px auto;
                    }

                    #desc {
                    color:#fff;
                    font-size:18px;
                    width:640px;
                    padding-left:60px;
                    }

                    .container {
                    width:960px;
                    margin:0 auto;
                    }

                    #title_bar {
                    height:67px;
                    background:#1f1f1f;
                    }

                    #service_tabs {
                    height:200px;
                    position:absolute;
                    /*top:413px;*/
                    top:413px;
                    }

                    #web_design_tab {
                    width:210px;
                    height:200px;
                    margin-right:40px;
                    float:left;
                    }

                    #web_design_tab img{

                    }

                    #print_design_tab {
                    width:210px;
                    height:200px;
                    margin-right:40px;
                    float:left;
                    }

                    #ecommerce_tab {
                    width:210px;
                    height:200px;
                    margin-right:40px;
                    float:left;
                    }

                    #internet_marketing_tab {
                    width:210px;
                    height:200px;
                    float:left;
                    }

                    .tab_title {
                    width:210px;
                    background:#1f1f1f;
                    }

                    .tab_body {
                    height:158px;
                    width:210px;
                    background:#2f2e2e;
                    }

                    #left_box {
                    float:left;
                    width:460px;
                    }

                    #right_box {
                    float:right;
                    width:460px;
                    padding:10px 0 30px 0;
                    }

                    .testomonial_text {
                    width:960px;
                    font-size:40px;
                    line-height:50px;
                    }

            }

            @media screen and (min-width: 760px) and (max-width:959px) {

                    #banner {
                    height:960px;
                    width:100%;
                    }

                    #refreshing_approach {
                    margin:80px auto 10px auto;
                    max-width:100%;
                    }

                    #desc {
                    color:#fff;
                    font-size:18px;
                    width:640px;
                    padding-left:60px;
                    }

                    .container {
                    width:760px;
                    margin:0 auto;
                    }

                    #title_bar {
                    height:67px;
                    background:#1f1f1f;
                    }

                    #service_tabs {
                    height:547px;
                    position:absolute;
                    top:500px;
                    width:680px;
                    margin:0 auto;
                    padding:0 40px 0 40px;
                    }

                    #web_design_tab {
                    width:320px;
                    height:200px;
                    margin-right:40px;
                    float:left;
                    margin-bottom:40px;
                    }

                    #print_design_tab {
                    width:320px;
                    height:200px;
                    margin-right:0px;
                    float:left;
                    }

                    #ecommerce_tab {
                    width:320px;
                    height:200px;
                    margin-right:40px;
                    float:left;
                    margin-bottom:40px;
                    }

                    #internet_marketing_tab {
                    width:320px;
                    height:200px;
                    margin-right:0px;
                    float:left;
                    }

                    .tab_title {

                    width:320px;
                    background:#1f1f1f;
                    }

                    .tab_body {
                    height:158px;
                    width:320px;
                    background:#2f2e2e;
                    }

                    #left_box {
                    padding:0 40px 0 40px;
                    }

                    #right_box {
                    padding:0 40px 0 40px;
                    }

                    #quote_form {
                    margin:50px auto;
                    }

                    .testomonial_text {
                    width:760px;
                    font-size:35px;
                    line-height:35px;
                    }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:18:26.300

If you want to stretch it use background-size:100% 100%. If it's not proportional with the original image then use one of the sizes on 'auto' - background-image:100% auto;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T23:33:29.543

我知道您不是要求修复 javascript，但这是我制作的一个示例，可满足您的需求：

[在这里提琴](http://jsfiddle.net/Dq7VR/)

```
$(document).ready(function () {
    $('html').css({
        "background-size": $(window).width() + "px" + " " + $(window).height() + "px"
    });
    $('html').show();
});

$(window).resize(function () {
    $('html').css({
        "background-size": $(window).width() + "px" + " " + $(window).height() + "px"
    });
}); 
```

它在加载时抓取屏幕大小并调整大小并调整背景以适应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:25:12.870

背景图像太小而无法适应屏幕，您需要更大的图像来重复背景图像，例如：

```
background: url(images/banner.jpg) repeat; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:20:08.793

好的，背景图像在一个 div 上，而不是在 body 上，并且有一个固定的高度。考虑在#banner 上使用 width: 100% 和/或显示（块，或内联浮动）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T06:13:31.677

您是否已经尝试过使用响应式解决方案，例如 AnyStretch：[https](https://github.com/danmillar/jquery-anystretch) ://github.com/danmillar/jquery-anystretch ？

发生此问题是因为设备试图保持纵横比。

# c# - 使用 redemption.dll 将 eml 导入 pst 后 不维护 eml 的电子邮件正文格式。

> ID：14602535
> 
> 赞同：0
> 
> 时间：2013-01-30T11:08:09.327
> 
> 标签：c#, outlook-redemption

我有赎回问题，或者可能是其他问题。我有 eml 文件，它的正文格式正确。但是，如果我将该 eml 导入 pst 或 msg，则该邮件的格式是输出文件中的更改。添加了一些新的额外行，或者一些字体发生了变化，文本的颜色也发生了变化。它扰乱了整个身体的格式。请给我解决方案，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:41:52.210

可以更具体一点吗？你的代码是什么？这是否发生在任何 EML 文件或只是一些？您可以将有问题的 EML 发送到 dimastr dot com 的 dmitry 吗？

# intellij-idea - 如何用intellij idea调试maven目标？

> ID：14602540
> 
> 赞同：116
> 
> 时间：2013-01-30T11:08:23.077
> 
> 标签：intellij-idea

你能用 Intellij IDEA 调试一个 maven 目标吗？我知道我可以右键单击并运行*Debug*。但是，maven 插件没有出现在我的*外部库*列表中，所以我无法进入代码并设置断点。因此，*Debug会像**Run*一样不停地运行目标。

我正在使用 OS X 10.8 和 IDEA 12.0.2。

**编辑：目标**

我已经为[https://github.com/searls/jasmine-maven-plugin](https://github.com/searls/jasmine-maven-plugin)编写了自定义 specRunner - 但是，$specs$ 保持为空。所以我尝试查看实际加载了哪些文件。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-02-13T12:33:22.140

弄清楚了：

1.  从命令行，使用`mvnDebug`而不是运行 maven 目标`mvn`。例如`mvnDebug clean`
2.  在intelliJ中打开要调试的maven插件的源码并设置断点
3.  在 IDEA 中，添加一个`Remote JVM Debug`配置。
    1.  在 Settings 下，设置 Transport: Socket, Debugger Mode: Attach, Host: localhost, Port: 8000 (mvnDebug的默认端口)。
4.  在调试模式下运行配置。它应该连接到等待的 mvnDebug jvm。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-03-03T17:28:04.987

好简单。我正在使用 Intellj Idea 15.0.4

1.  在 Maven 插件中设置断点
2.  在标签“Maven 项目”中，转到项目女巫正在使用您的 Maven 插件。
3.  在“插件”中找到您的插件并在目标上右键单击并调试

这是一个屏幕截图：

[![截屏](../Images/bdee2ca163e77db7d9a918332903b648.png)](https://i.stack.imgur.com/7EqG6.png)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-06-14T14:07:12.127

老问题，但我也有同样的需求，我花了一段时间才让它发挥作用。希望可以帮助某人。

对于测试调试使用：

```
mvn <goal> -Dmaven.surefire.debug 
```

或者

```
mvn <goal> -Dmaven.failsafe.debug 
```

当执行停止并侦听地址 5005（默认）的套接字时，您将运行配置的远程调试器。

如何配置它：

运行 -> 编辑配置 -> 远程传输：socket 调试器模式：附加端口：5005（默认）

-> 保存。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-05-14T12:59:29.127

仅在 IntelliJ 中调试 maven 目标的最简单方法是创建一个常规 maven 目标，并在运行器选项卡中传递这些 VM 选项：

```
-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000 
```

其中 8000 是用于远程调试的端口号。

[![Maven目标配置](../Images/f24fe027321a70efc84628df545512a4.png)](https://i.stack.imgur.com/fogDP.png)

然后使用端口 8000 创建新的远程配置。运行 maven 目标后运行此配置。

[![远程调试配置](../Images/8ee21121bfec2dbeddae2db841b0ac0c.png)](https://i.stack.imgur.com/7BmK2.png)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-01-05T12:50:18.950

我认为最简单的解决方案是临时添加 maven 插件作为依赖项。完成此操作后，IntelliJ 将像对待任何其他依赖项一样处理它，您可以按通常的方式设置断点。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-06T09:13:51.663

要么你可以参考[上面的答案](https://stackoverflow.com/a/14853683/3589749)或者只是将此插件添加到 pom.xml

```
 <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
            <jvmArguments>
            -Xdebug - 
            Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000
            </jvmArguments>
            </configuration>
        </plugin> 
```

`mvn`并使用而不是运行 maven 目标`mvnDebug`。例如`mvn spring-boot:run`

在 IDEA 中，添加一个远程配置。在 Settings 下，设置 Transport: Socket, Debugger Mode: Attach, Host: localhost, Port: 8000 (mvnDebug的默认端口)。

每当您想调试代码时，在 IDEA 中作为 Debug 运行。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-01-15T20:21:32.110

无需设置`Java Remote Debugger`或类似的东西。[正如官方文档](https://www.jetbrains.com/help/idea/work-with-maven-goals.html#debug_goal)中所解释的那样，现在它实际上只是一个`right click`->目标。`debug``Maven`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-02-08T11:37:57.803

由于您正在使用 Intellij，因此那里已经有一个内置调试器，您不必一定使用命令行工具 mvnDebug。查看本教程：[如何在 Intellij IDEA 中调试 Maven 应用程序](http://hippieitgeek.blogspot.se/2014/02/how-to-debug-maven-applications-in.html)。

本教程使用 Maven Exec 插件，让您无需使用命令行或`MvnDebug`. 想在这里分享它可能是有价值的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-02-03T07:26:28.703

@Peter Szanto 的回答对我有用，但我不喜欢弄乱我的源代码。

我不能让这些`MvnDebug`方式奏效。

所以我尝试了另一种方式，**将插件源添加为 IDEA 模块**。

这是详细步骤：

1.  将插件源克隆为独立项目。

2.  在您的项目中，转到`File -> New -> Module from Exist Sources`并添加您在步骤 1 中克隆的插件项目。

3.  现在您可以打开插件源代码并设置一些断点。

4.  以调试模式运行您的 Maven 目标，它应该在断点处停止。

# java - Spring+Jboss El Resolver JSF2，目标不可达，标识符“用户”解析为空

> ID：14602543
> 
> 赞同：2
> 
> 时间：2013-01-30T11:08:29.780
> 
> 标签：java, spring, jsf-2, jboss, xhtml

我有一个运行 spring 3 和带有 primefaces 的 JSF2 的旧 Jboss 服务器（4.2.3）。我可以让我的第一个 login.xhtml 使用 jsf 组件正确呈现，但是当我尝试执行任何按钮单击时，我得到这个“目标无法访问，标识符'用户'解析为 null”。

在我的 xhtml 文件中，我对我的用户 bean 进行了一些调用，例如：

```
<h:inputText id="username" value="#{user.username}" style="width: 175px;" /></td> 
```

我的 bean 用 @Component 和 @Scope("request") 注释。

我查看了其他几个堆栈溢出帖子，但找不到对我有帮助的帖子。

在我的网络 xml 中，我有：

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/spring/spring.xml</param-value>
</context-param>
<listener>
<listener-class>
org.springframework.web.context.request.RequestContextListener
</listener-class>
</listener>
<listener>
<listener-class>
org.springframework.web.context.ContextLoaderListener
</listener-class>
</listener> 
```

在我的spring xml中，我有：

```
<context:annotation-config />
<context:component-scan base-package="org.my.package" /> 
```

在我的 faces-config.xml 中我添加了：

```
<el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver> 
```

我还尝试添加 beans.xml，因为我已经读到在某些情况下可能需要这样做。但现在我运气不好，所以我求助于你。有谁知道我该如何解决我的问题？

# php - 如何获得长期的 Facebook 会话？

> ID：14602544
> 
> 赞同：3
> 
> 时间：2013-01-30T11:08:34.650
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

从去年开始，我一直在开发 Facebook 应用程序。在 Facebook 2012 年 12 月更改之前，它运行良好。但现在我遇到了 Facebook 会话的问题。我已经用新的 SDK 替换了旧的 SDK，[它](http://en.wikipedia.org/wiki/Software_development_kit)[的写法是](https://github.com/kingkarki/facebook-php-sdk/commit/ca9472b3312dab3fdcfbffb4e45eb091f582dcb7)：

> 避免尝试重复使用已用过的授权码

因此，当使用授权代码时，用户会话将从我的站点到期。（之后我得到授权错误）。

用户每 5-6 分钟从我的应用程序中注销一次，因此我必须再次将用户重定向到 loginurl 并刷新页面，这对我的网站不利，因为我在所有链接上都使用了[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)调用。

我也看到了一些应用程序在 12 月更改后运行良好。（例如，Wrapp.com）。Wrapp.com 在验证码到期后不会重定向用户。而且我也可以在登录 10 分钟后使用 Wrapp.com 在 Facebook 上发帖而无需重定向。Wrapp.com 如何处理身份验证？解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:35:03.937

避免使用 PHP SDK 使 Ajax 和 Iframe 页面的会话过期。

* * *

经过大量研究和测试，在 iframe 或 Ajax 页面中使用 PHP SDK “3.2.2” 加载画布或页面选项卡，如果调用的页面加载超过一次，将清除应用程序的会话。

**例子：**

您的页面选项卡在其自身包含的 PHP SDK 中加载一个 iframe，并且您的用户与 iframe 交互。第二个页面加载时的 iframe 将清除当前的应用程序会话。

**解决方案：**

从应用程序中的 Ajax 和 iframe 页面中删除 PHP SDK 并改用[cURL](http://en.wikipedia.org/wiki/CURL)。

如果您的应用程序中的 iframe 页面需要用户身份验证信息，建议在用户登陆页面选项卡/画布时创建 cookie 或会话或上传用户身份验证。在需要用户查看或交互的地方使用此切换内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:36:23.867

你有两种方法：

1.  *[您可以使用删除 offline_access 权限](https://developers.facebook.com/roadmap/offline-access-removal/)*中描述的场景 4 技巧来扩展用户访问令牌。

2.  就我而言，我将我的应用程序设置为桌面，所以我有一个 90 天后过期的令牌：

![在此处输入图像描述](../Images/7f6e13680e63477a4fe74b8962c6b153.png)

# c# - 要列出的 SQL 查询结果 映射

> ID：14602547
> 
> 赞同：1
> 
> 时间：2013-01-30T11:08:42.917
> 
> 标签：c#, visual-studio-2008, .net-3.5

在我的数据库中，我有 2 个表：

```
id   | name |  city  | street
-------------------------------
   1 | John | London | Street1
   2 | Will | London | Street1
   3 | Adam | LA     | Street1

id   | uid | phone
------------------
   1 |    1| 12345
   2 |    1| 23456
   3 |    2| 16505
   4 |    3| 65909
   5 |    3| 68902
   6 |    3| 15905 
```

我需要选择该数据并存储到列表中（或字典，因为用户 ID 是唯一的）

我的使用类如下所示：

```
public class User
{
    //lock
    private static readonly object userLock = new object();

    public int      Id        { get; set; }
    public string   Name      { get; set; }
    public string   City      { get; set; }
    public string   Street    { get; set; }

    public List<string> Phones { get; private set; }

    public User()
    {
        Phones = new List<string>();
    }

    public void AddPhone(string phone)
    {
        lock (userLock)
        {
            Phones.Add(phone);
        }
    }
} 
```

想法是将这些用户信息加载到应用程序中，添加/删除/修改手机并保存更改/删除/添加的那些。

我在这里找到了解决方案的想法：[https](https://stackoverflow.com/a/11687743/965722) ://stackoverflow.com/a/11687743/965722 ，但我想这是做一个查询来获取用户列表，然后对于每个用户我需要单独的查询来获取他的手机。

我应该如何加载？
我可以只用一个查询吗？
我应该如何填充我的结果集合？
我应该使用列表还是字典？然后我可以`Id`从 User 类中删除并将其作为字典中的键。

我正在使用 .NET 3.5 并希望避免使用实体框架或 ORM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:39:11.357

创建一个电话类并相应地更改用户属性：

```
public class Phone
{
    public int Id { get; set; }
    public int UserId { get; set; }
    public string Number { get; set; }
}

public class User
{
    // (etc)
    public List<Phone> Phones { get; set; }
    // (etc)        
} 
```

制作一个电话存储库：

```
public class PhoneRepository
{
    public List<Phone> LoadPhonesFromId(IEnumerable<int> ids)
    {
       // write a query with the ids
       // SELECT * FROM Phones WHERE id IN (@id1, @id2, ...)
       // execute the query
       // convert the results to Phones and put them in a List<Phone>
       // return the list
    }
    public List<Phone> LoadPhonesFromUserId(IEnumerable<int> userIds)
    {
       // write a query with the userIds
       // SELECT * FROM Phones WHERE userId IN (@userId1, @userId2, ...)
       // execute the query
       // convert the results to Phones and put them in a List<Phone>
       // return the list
    }
} 
```

和一个用户存储库：

```
public class UserRepository
{
    public List<User> LoadUsersFromUserIds(IEnumerable<int> userIds)
    {
       // write a query with the userIds
       // SELECT * FROM User WHERE id IN (@id1, @id2, ...)
       // execute the query
       // convert the results to Users and put them in a List<User>
       // return the list
    }

    public void IncludePhones(IEnumerable<User> users)
    {            
        var phones = PhoneRepository.LoadPhonesFromUserId
            (users.Select(x => x.Id));

        for each(var user in users)
        {
            user.Phones = phones
                .Where(x => x.UserId == user.Id)
                .ToList();
        }
    }
} 
```

您可以通过例如自定义过滤器参数（而不是各种过滤器的不同函数）和属性设置器来极大地扩展和改进此模式，以确保 user 和 user.Phones 始终引用相同的 userID，但这是排序超出了你的问题范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:24:59.647

如果您可以升级到 .net 4，请查看[ObjectContext.Translate](http://msdn.microsoft.com/en-us/library/dd466384.aspx) - 您可以在没有“真实”实体模型的情况下使用它，一个空的未子类化的 objectcontext 就足够了，即使它们不是实体，也会映射对象。此解决方案没有第三方依赖项，但与可用的开源库相比，它有点慢且不够灵活。

如果 .net 4.0 不是一个选项，或者您想要更多功能和性能，您可能需要查看第三方库：

*   [Dapper](http://code.google.com/p/dapper-dot-net/)可以很好地展开普通 POCO，并具有很好的参数化查询。也非常快。最新版本是 .net 4.0，但也有 3.5 版本。
*   [PetaPoco](http://www.toptensoftware.com/petapoco/)另一个简单的 POCO 解包器，.net 3.5
*   [ServiceStack.OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)这个我不太了解。

每个项目还列出了一些其他竞争对手；我相信您可以在其中找到一个合适的选择，允许您使用易于参数化的查询编写普通 sql，并将结果自动解包到普通对象中。性能开销几乎为零；所以这个解决方案（恕我直言）总是比原始数据阅读器更可取；在日常使用中要容易得多。

# php - 在php中从同一个表运行两个查询

> ID：14602552
> 
> 赞同：0
> 
> 时间：2013-01-30T11:08:52.180
> 
> 标签：php, mysql, arrays

我想在页面顶部的一个表格中显示团队成员列表及其信息，然后根据各自行上一个单元格内的值将它们分成团队。

“成员”表如下所示：

```
+------+------------------------+------------------+
| name | interests              | email            |
+------+------------------------+------------------+
| John | Golf, Hockey, Baseball | John@example.com |
| Fred | Hockey                 | Fred@example.com |
+------+------------------------+------------------+ 
```

这是我的代码的简化版本：

```
$result = mysql_query("SELECT * FROM members");
while($row = mysql_fetch_array($result)){ 
echo "$row['name'] . $row['interests'] . $row['email']"
}

while($row = mysql_fetch_array($result)){
$sport = array($row['interests']);
if (in_array("Golf", $sport)) {
echo "$row['name'] . $row['email']"
}
if (in_array("Hockey", $sport)) {
echo "$row['name'] . $row['email']"
}
if (in_array("Baseball", $sport)) {
echo "$row['name'] . $row['email']"
} 
```

如何让页面看起来像这样？：

## *所有成员*

姓名：约翰
兴趣：高尔夫、曲棍球、棒球
电子邮件：john@example.com

姓名：弗雷德
兴趣：曲棍球
电子邮件：fred@example.com

## 团队

***高尔夫球手：***
约翰 - john@example.com

***曲棍球运动员：***
约翰 - john@example.com
弗雷德 - fred@example.com

***棒球运动员：***
约翰 - john@example.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:25:44.900

这是未经测试的，但您可以尝试做一些事情，例如查询所有成员以获得兴趣，然后使用 foreach 循环遍历每个具有该兴趣的成员。

```
$result = mysql_query("SELECT * FROM members");
while($row = mysql_fetch_array($result)){ 

$interests =  $row['interests'];

foreach($interests as $interest){
     echo $interest." Players";

      $result = mysql_query("SELECT * FROM members WHERE interests='$interest'");

       while($row = mysql_fetch_array($result)){ 
         $sport = array($row['interests']);
          if (in_array($interest, $sport)) {
             echo "$row['name'] . $row['email']"
          }
       }

   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:28:46.627

```
// Fetch data
$db = new mysqli( 'localhost', 'root', '', 'test' );
$query = "SELECT * FROM members";
$result = $db->query( $query );

// Pre-create sorted arrays
$members = array();
$teams = array();
while ( $row = mysqli_fetch_row( $result ) ) {
    $members[] = $row;
    $tm = explode( ',', $row[1] );
    foreach( $tm as $game ) {
        $teams[trim($game)][] = $row[0] . ' - ' . $row[2];
    }
};

// Echo the result
echo '<h2>All members</h2>';
foreach( $members as $member ) {
    echo 'Name: '.$member[0].'<br/>';
    echo 'Interests: '.$member[1].'<br/>';
    echo 'E-mail: '.$member[2].'<br/><br/>';
}

echo '<h2>Teams</h2>';
foreach( $teams as $sport => $team ) {
    echo '<b>'.$sport.'</b></br>';
    foreach( $team as $player ) {
        echo $player . '</br>';
    }
    echo '<br />';
} 
```

结果：

```
All members
Name: John
Interests: Golf, Hockey, Baseball
E-mail: John@example.com

Name: Fred
Interests: Hockey
E-mail: Fred@example.com

Teams
Golf
John - John@example.com

Hockey
John - John@example.com
Fred - Fred@example.com

Baseball
John - John@example.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:29:01.860

```
<?php

$result = mysql_query("SELECT * FROM members");
while($row = mysql_fetch_array($result)){
    $members[] = $row; //bulid members array
    $member_teams = explode(',',$row['interests']); //get array of interests for row
    foreach ($member_teams as $team) { //cast name and emial to team list
       $teams[$team]['title'] = $team;
       $teams[$team]['members'][] = array('name'=>$row['name'],'email'=>$row['email']);
    }    
}

//bulid members list
if (!empty($members)) {
    echo 'All Members<br />';

    foreach ($members as $member) {
        echo 'Name: '. $member['name'];
        echo '<br /> Interests:'. $member['interests'];
        echo '<br /> Email: '. $member['email'];
    }

    echo '<hr>';
    echo '<br />Teams<br />';

    foreach ($teams as $team) {
        echo '<br />'.$team['title'];
        foreach ($team['members'] as $member) { //bulid list of team members
            echo '<br />'.$member['name']. ' - ' . $member['email'];
        }
    }

    // these are lists so i preffer <ul><li>
    // but <br /> is no problem for me

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:29:02.480

此代码显示所有成员和团队

```
 $result = mysql_query("SELECT * FROM members");
 $members=array();
 while($row = mysql_fetch_array($result)){ 
     $members[]=$row;
 }
 echo "All Members:<br>\n";
 foreach($members as $row){
    echo "Name: ".$row['name'] ."<br>Interests: ". $row['interests']."<br>Email:". $row['email']."<br>\n";
 }
 echo "Teams:<br>\n";
 echo "Hockey Players:<br>\n";
 foreach($members as $row){
    if($row['interests']=="Hockey"){
        echo $row['name'] ."-". $row['email']."<br>\n";        
    }
 }
 echo "Golfers Players:<br>\n";
 foreach($members as $row){
    if($row['interests']=="Golfers"){
        echo $row['name'] ."-". $row['email']."<br>\n";        
    }
 }
 echo "Baseball Players:<br>\n";
 foreach($members as $row){
    if($row['interests']=="Baseball"){
        echo $row['name'] ."-". $row['email']."<br>\n";        
    }
 } 
```

# javascript - 访问位于已定义记录之外的 ExtJS 存储中的 XML 元素

> ID：14602555
> 
> 赞同：0
> 
> 时间：2013-01-30T11:08:59.190
> 
> 标签：javascript, extjs, extjs4

在 ExtJS 4 中，我有一个定义如下的 XML 存储：

```
Ext.define('AC.store.GameWins',
{
    extend : 'Ext.data.Store',
    model : 'AC.model.GameWins',
    autoLoad : true,

    proxy :
   {
        type : 'ajax',
        api :
        {
            read : 'data/gamewins.xml'
        },
        reader :
        {
            type : 'xml',
            root : 'GameWins',
            record : 'Game',
            successProperty : 'success'
        }
    }
}); 
```

和一个如下所示的 XML 文件：

```
<GameWins>  
    <LastUpdated>2013-01-30 10:18:34</LastUpdated>
    <Game ID="1" Name="GameName">
        <WinDate>...</WinDate>
        <WinAmount>...</WinAmount>
    </Game>
    <Game ID="1" Name="GameName">
        <WinDate>...</WinDate>
        <WinAmount>...</WinAmount>
    </Game>
</GameWins> 
```

使用 XTemplate 在数据视图中访问游戏元素很容易。

但是，我在访问 LastUpdated 时遇到问题。这不是商店中定义的“记录”的一部分。我怎样才能访问这个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:37:16.270

来自响应的原始数据存储在阅读器中（在本例中为 responseXML）：

`var xml = store.getProxy().getReader().rawData;`

# objective-c - 在objective-c中检测for（）循环的真正结束

> ID：14602556
> 
> 赞同：0
> 
> 时间：2013-01-30T11:09:09.330
> 
> 标签：objective-c, parsing, loops, for-loop

我将在我的应用程序中显示一种 UIActivityIndi​​catorView，同时在 for () 循环中解析多个 JSON 对象。我想不出我必须在哪里放置 [UIActivityIndi​​catorView startAnimating] 和 [UIActivityIndi​​catorView stopAnimating] 以显示解析的真正结束（在完整的 for () 循环的末尾）。这是简化的代码：

```
- (void)parseMethod {

// other stuff

        for (int i=0; i < [arrayJSON count]; i++) {

            NSURL *url = [NSURL URLWithString:
                          [NSString stringWithFormat:
                           @"http://WWW.REMOTESERVERWITHJSONSOURCE.NET/%@",[arrayJSON objectAtIndex:i]]];

            NSURLRequest *request = [NSURLRequest requestWithURL:url];
            AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

                NSMutableDictionary *arrayMain = [JSON objectForKey:@"main"];
                NSMutableDictionary *arrayMain2 = [JSON objectForKey:@"main2"];
                [arrayA1 addObject:[arrayMain valueForKey:@"A1"]];
                [arrayA2 addObject:[arrayWind valueForKey:@"A2"]];

                // HERE FINISH PARSING AFJSONREQUESTOPERATION
                // IF I PUT HERE [UIActivityIndicatorView stopAnimating] IT SHOWS AT THE END OF FIRST for () LOOP

                [table reloadData];
                [table scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES]
            }
                                                                            failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                                            NSLog(@"%@", [error userInfo]);
                                                                        }];
            [operation start];
            // HERE START PARSING AFJSONREQUESTOPERATION
            [UIActivityIndicatorView startAnimating] 
        }

    // HERE FINISH THE for () LOOP ??
    // IF I PUT HERE [UIActivityIndicatorView stopAnimating] IT SHOWS AGAIN AT THE END OF FIRST for () LOOP

} 

    // HERE FINISH THE parseMethod ??
    // IF I PUT HERE [UIActivityIndicatorView stopAnimating] IT SHOWS AGAIN AT THE END OF FIRST for () LOOP

    } 
```

如您所见，我找不到放置 [UIActivityIndi​​catorView stopAnimating] 的真正位置，因为它在第一个解析结束时停止（第一个 for () 循环）：所以，有一种方法可以等待完成for () 循环在整个循环之后调用 [UIActivityIndi​​catorView stopAnimating] （或其他方法）？谢谢！

**替代方案** 也许解析太快以至于我看不到 UIActivityIndi​​catorView 出现和加载？在这种情况下，我必须在哪里放置一种计时器（或睡眠（无符号整数））等待几秒钟才能消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:27:45.123

您的问题是您在循环中发出的请求是异步的，因此您的循环不会等待它们完成，它只是快速连续触发每个请求，并且一旦执行了加载数组的代码块数据被接收。

您可以在块中使用一个计数器，每次块完成时都会增加一个计数器，然后一旦计数器与您匹配，您`[arrayJSON count]`就知道何时停止动画。只记得使用`__block`存储

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/Blocks/Articles/bxVariables.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/Blocks/Articles/bxVariables.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:26:30.533

解决方案是

1.  简化代码，以便清楚地知道那里正在做什么（事先声明块）

2.  计算有多少请求正在运行，只有在所有请求都完成后才执行全局操作。

```
typedef void (^AFJSONSuccessBlock) (NSURLRequest *request, NSHTTPURLResponse *response, id JSON);
typedef void (^AFJSONFailureBlock) (NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON); 
```

```
[UIActivityIndicatorView startAnimating];

__block int numRequests = [arrayJSON count];

AFJSONSuccessBlock onSuccess = ^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {   
    [...]

    numRequests--;

    if (numRequests == 0) {
        [UIActivityIndicatorView stopAnimating];
    }
};

AFJSONFailureBlock onFailure = ^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    [...]

    numRequests--;

    if (numRequests == 0) {
        [UIActivityIndicatorView stopAnimating];
    }
};

for (NSString* jsonPath in arrayJSON) {
    NSString* absolutePath = [NSString stringWithFormat:@"http://WWW.REMOTESERVERWITHJSONSOURCE.NET/%@", jsonPath];
    NSURL *url = [NSURL URLWithString:absolutePath];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation;
    operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                success:onSuccess
                                                                failure:onFailure];
    [operation start];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:13:34.957

我通常会说，如果您无法确定循环在代码中的结束位置，则表明您的代码很复杂。你的 for 循环在我认为的 else 语句之前结束。要找出答案，您只需单击起始括号，XCode（如果您正在使用的话）将突出显示代码块......

# highcharts - 更改“导出”选项的位置

> ID：14602557
> 
> 赞同：8
> 
> 时间：2013-01-30T11:09:11.480
> 
> 标签：highcharts, positioning

我想更改“导出”按钮的位置。目前它们位于右上角，因此隐藏了较长标题的部分。我想改变它，但在参考文献中看不到它的参数。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T16:39:41.787

样式按钮有很多选项，您只需查看参考即可。

使用`exporting`，您可以直接设置按钮样式，例如：

```
exporting: {
    buttons: {
        exportButton: {
            align: 'left',
            x: 40
        }
    }
} 
```

[**演示**](http://jsfiddle.net/fXHB5/8457/)

使用`navigation`您可以设置所有按钮的样式：

```
navigation: {
    buttonOptions: {
        align: 'center'
    }
} 
```

[**演示**](http://jsfiddle.net/fXHB5/4/)

*参考*：

*   [http://api.highcharts.com/highstock#exporting.buttons.exportButton](http://api.highcharts.com/highstock#exporting.buttons.exportButton)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-19T21:56:44.113

里卡多的回答几乎是正确的。我相信自从他回答以来语法已经改变。

[导出按钮文档](http://api.highcharts.com/highstock#exporting.buttons.contextButton)

```
 exporting: {
        buttons: {
            contextButton: {
                align: 'left',
                x: 0,
                y: 380,
                verticalAlign: 'top'
            }
        }
    }, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-26T02:53:59.707

这对我有用：

```
exporting: {
  buttons: {
    contextButton: {
      align: 'center',
      x: 50
    }
  }
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:18:53.477

您可以使用 x/y 或对齐参数：[ExportButton Align](http://api.highcharts.com/highcharts#exporting.buttons.exportButton.align)

# c++ - 不要修改程序，打印一些值作为输出 - 不寻常的（？）作业

> ID：14602558
> 
> 赞同：0
> 
> 时间：2013-01-30T11:09:17.283
> 
> 标签：c++

我对不寻常的作业有疑问：

> 不要修改 main 函数，但要更改它作为输出打印的程序：
> 
> *   周一
> *   是第一天
> *   一周中的

这是给定的代码：

```
int main()
{
  cout << "is the first day\n";
} 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:21:31.663

毫无疑问，他对您的演示感兴趣的是一个全局对象（在同一个翻译单元中定义）将在进入 main 之前构建，并在 main 退出后销毁。

请注意，当构建这样一个全局对象时，`std::cout`可能还不存在（当它被销毁时，`std::cout`可能不再存在），因此您所做的任何打印都必须通过 C 函数，如`printf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:58:23.133

至少有几种方法可以做到这一点。

*   您可以替换 的含义`cout`。
*   你可以让事情发生在`main`被调用之前和之后。

重新定义`cout`：

```
#include <iostream>

class MyCout {};

void operator<<(MyCout& myCout, const char* message) {
    std::cout << "Monday\n";
    std::cout << message;
    std::cout << "of the week\n";
}

MyCout cout;

int main()
{
    cout << "is the first day\n";
} 
```

为了使事情发生在 main 之前和之后，您可以创建一个静态对象。它们的构造函数在 main 之前调用，然后是析构函数：

```
#include <iostream>

class PrintExtras {
public:
    PrintExtras() {
        std::cout << "Monday\n";
    }
    ~PrintExtras() {
        std::cout << "of the week\n";
    }
};

PrintExtras printExtras;

using std::cout;

int main()
{
    cout << "is the first day\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:18:56.363

What about this?

```
#include <iostream>
#include <cstdlib>

using namespace std;

struct Foo
{
    Foo()
    {
        cout << "Monday\nis the first day\nof the week\n";
        exit(0);
    }
} X;

int main()
{
    cout << "is the first day\n";
} 
```

**Update** Ok, you may use name 'cout' in main func like some object not from iostream:

```
#include <iostream>
#include <string>

class Foo
{
    public:
        void operator <<( const std::string & s )
        {
            std::cout << "Monday\n" << s << "of the week";
        }
} cout;

int main()
{
    cout << "is the first day\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T11:15:17.713

似乎是一个糟糕的家庭作业问题。我看不到在不修改主方法的情况下无法打印其他输出 - 除非您创建了另一个主方法来覆盖它？！提供的代码也是错误的 - 它应该返回 0，因为 main 应该返回一个整数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T11:36:47.740

另一个残酷的想法，只是为了好玩：

```
#include <iostream>

using namespace std;

#define main real_main
int main()
{
    cout << "is the first day\n";
}
#undef main

int main()
{
    cout << "Monday\n";
    int res = real_main();
    cout << "of the week\n";
    return res;
} 
```

另一个不依赖预处理器 foo 的版本是使用全局静态对象构造和销毁。这是安全的，因为显然标准保证`std::cout`（和朋友）在所有用户代码之前/之后被初始化和销毁​​：

```
#include <iostream>
using namespace std;

struct Homework
{
    Homework()
    {
        cout << "Monday\n";
    }
    ~Homework()
    {
        cout << "of the week\n";
    }
} hw;

int main()
{
    cout << "is the first day\n";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:14:19.377

我认为您应该为输出流设置一个运算符重载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T11:15:47.420

想想进入 main 之前或退出 main 之后发生的事情。

*   在程序的早期，您通常会进行初始化，最后会进行相应的初始化。
*   这些东西的 C++ 习语是什么？
*   你如何让这些发生在 main() 的外部？
*   您对在命名空间范围内定义的对象了解多少？

如果您了解这些事情，这实际上取决于您在课程中所处的位置。

**替代方案**： main 中使用的对象仅`std::cout`当您将该名称带入全局命名空间时。::std 以外的命名空间中的对象也可以使用该名称。

# javascript - 使用 jquery 制作 3d 效果

> ID：14602565
> 
> 赞同：3
> 
> 时间：2013-01-30T11:09:38.737
> 
> 标签：javascript, jquery, html, css, 3d

当我在网上冲浪时，我看到了这个：[http](http://www.enter-the-void.co.uk/#/menu) : //www.enter-the-void.co.uk/#/menu 你知道用 jquery / html5 做这个吗？

先感谢您。

**编辑 ：**

最后我认为最好的方法是使用这种方法：

*   每个示例创建一个高度为 100% 且宽度为 1200 像素的容器 div
*   在这个容器上创建并修复许多小 div
*   使用 jQuery 获取鼠标位置并将容器 div 向右或向左移动
*   当容器移动时，在小 div 上添加带有 CSS 3D 变换的“透视”样式

你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:14:19.020

在我的脑海中，[Three.js](https://github.com/mrdoob/three.js)可以帮助你。它是一个用于渲染 3D 对象的 javascript 库。我猜这些物体本身不会太难。一堆带有自定义纹理的平面。不过，相机可能更难完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:24:08.857

显然，有几种创造性的方法可以解决这个问题。但是，截至目前，没有浏览器原生支持 3d 渲染。但是，webkit、opera 和 Mozilla 确实支持**2d 渲染**

这意味着仅通过**javascript 和 css 就**可以创建 3d 的外观。但除了已经提到的（WebGL、three.js 库、画布技巧）之外，没有浏览器支持 3d 渲染。

阅读我一年前的博客文章：[使用 CSS3 和 Javascript 进行简单的“3D”渲染](http://cliffbarnes.com/index.php/post/10/Simple+%273D%27+Rendering+With+CSS3+and+Javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:13:27.240

你可以使用 Webgl 或 canvas 来制作这个效果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T23:53:23.617

就像 rory mccrossan 在评论中所说的那样。

检查 jquery 视差，这正是在 void 站点上发生的情况。

将你的 div 放在不同的视差层上，看看神奇的发生 ;-)

[http://stephband.info/jparallax/](http://stephband.info/jparallax/)

[https://github.com/IanLunn/jQuery-Parallax](https://github.com/IanLunn/jQuery-Parallax)

[http://www.sequencejs.com/themes/sliding-horizo​​ntal-parallax/](http://www.sequencejs.com/themes/sliding-horizontal-parallax/)

# iphone - 更改 UI 表视图特定行的颜色

> ID：14602575
> 
> 赞同：-2
> 
> 时间：2013-01-30T11:10:13.943
> 
> 标签：iphone, objective-c

如果将任何新行添加到 UITableView，我想动态更改颜色。如果选择任何行一次，则更改该行的颜色。**我怎样才能完成这个任务..？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:15:19.637

你可以这样做，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    //First you get the cell you want to change
    UITableViewCell* theCell = [tableView cellForRowAtIndexPath:indexPath];

    //Then you change the properties (label, text, color etc..) in your case, the background color
    theCell.contentView.backgroundColor=[UIColor redColor];

    //Deselect the cell so you can see the color change

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:15:54.370

`UITableView`每次需要更改行的颜色时，您都会重新加载。在您的`cellForRowAtIndexPath`函数中，您将设置一个开关盒：

```
switch(indexpath.row)
{
    case 1:
          //set the cell background color.
    .
    .
    .
    default :
          // color u want by default
} 
```

如果要更改用户选择的特定行的颜色。然后你必须在`didSelectRowAtIndexPath`委托方法中保存行号。并`cellForRowAtIndexPath`更改该特定行的背景颜色。

```
if(indexpath.row == selectedRow)
{
   //set this color
}
else
{
   //set another color
} 
```

# c# - 如何在编码的 UI 测试中处理更改控件 ID

> ID：14602583
> 
> 赞同：3
> 
> 时间：2013-01-30T11:10:37.097
> 
> 标签：c#, visual-studio-2010, automation, ui-automation, coded-ui-tests

基本上我正在使用 Visual Studio CODE UI 对基于 Windows 的应用程序进行 UI 自动化测试，当布局更改或在 GUI 中添加一些新控件时出现问题，并且控件的控件 ID 发生更改。正如我们所见从屏幕截图中可以看出，CODE UI builder 重新记录了一个典型的层次结构：-

**主窗口 -> 具有控件 ID 属性的窗口 -> 实际控件。**

所以这是我与这个层次结构和控制 ID 有关的问题？

1) 这些**控件 ID 是如何生成的？**

> a) 我知道生成这些控件 ID 号的逻辑取决于 GUI 中控件的深度，但我无法找到任何一致的生成方式，例如在图像中两个按钮**connect 和 help**似乎在同一级别的 GUI 中，但它们的控件 ID 仍然如此不同**1 和 5013**。
> 
> b) 这些控件 ID 是由测试环境中使用的编码 UI 构建器生成的，还是产品开发方面的一些逻辑或生成它们的代码本身

2）有没有办法**跳过这个带有控件ID的中间层窗口**并成功地进行录制和播放。（在我的例子中，我们可以访问所有控件的逻辑名称，这些控件本身在本质上是唯一的，我们很好摆脱这些控制ID）

3）**另外，我们是否可以采用混合方法**，其中几乎所有控件都有两层，但对于某些特殊情况下三层，其中不可能仅使用逻辑名称或标签，并且我们明确要求控件 ID

4）最后但并非最不重要的一点是，据我所知**，这种类型的可访问性实现有多少可以在测试环境**中完成在测试环境中使用各种工具（如 CODE UI）进行测试。但是对于大型产品，我认为这不是一个好方法，因为它给开发方面带来了额外的负担，就像在需要交付给客户的产品中添加额外的不必要的代码（仅用于测试目的）。

**为了清楚我的问题，请参阅下面的图片作为参考。**

第一张图片显示**远程桌面 GUI**

第 2 显示**计算机：**由 CODED UI 记录的控件属性

第 3 显示了 CODED UI 记录的**连接按钮属性**

4th 显示了 CODED UI 记录的**帮助按钮属性**

![远程桌面](../Images/1ef5c61cb3284022aa7b0c0a40316c33.png) ![计算机：](../Images/cca727466b11dc8c3798441c4824263b.png) ![连接按钮](../Images/7fd2ee82b9c2e2391cf2c4b75b57efe6.png) ![帮助按钮](../Images/30a5f6d13564d1364282c7525159123f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T07:16:14.060

我现在才开始使用 CodedUI，但我之前使用不同的产品并使用相同的技术（MSUIA 等）做了很多 UI 自动化。所以这也应该适用于此。

每个控件都有几个属性，比如 name 和 automationid 来命名最重要的。如果您正在自动化您自己的 UI（您自己编码/构建它），您应该始终尝试为每个控件提供唯一的自动化 ID，这将使您在自动化时的生活变得更加轻松。名称通常是一个不好的选择，因为当您拥有不同语言版本的程序时，它会经常更改。

由于在这种情况下您没有来源并且无法影响它报告的值，因此您必须使用给定的内容。尽管如此，即使 CodedUI 记录器会选择它认为合适的任何属性，您也可以通过更改找到的每个元素的 UIMap.uitest 自己更改搜索条件：

![VS 编辑搜索属性框](../Images/3e1344f02d55ec6f05097c1f25a48fe1.png)

这可能需要一些时间来适应。特别是对于元素具有相似属性的更复杂的 UI，也适用于动态 UI 等。

顺便说一句，我之前直接使用的产品与 AutomationElements 一起使用，在这里您可以选择并做您想做的事——即使维护和启动成本很高。（好的，所以它通常非常耗时 - 并且总是比使用任何现成的解决方案（如 VS Coded UI）更耗时。）

一个更简单的解决方案是简单地通过坐标（相对于一些已知的控件，如主窗口或选项卡组），这也将在 99% 的时间里工作，让你更快地达到你的目标。

好的，回答你的具体问题

1）如果我认为是这样，它们是在运行时生成的，并且真的不依赖它们

2）当进入较低级别（如 AutomationElement）时，您可以搜索整棵树。尽管如此，这通常也会使搜索变得相当慢 - 如果你自己得到整棵树并遍历它，速度不会快多少

3）你可以混合任何你想要的东西。实际上，您甚至可以将句柄转换为 AutomationElements 到 Controls（至少对于大多数标准控件而言）。因此，您可以使用任何技术（例如 Win32 SDK）来遍历树。实际上，所有技术中的所有 GUI 树都是相似的——尽管不一样。很少有人编码似乎遵守任何标准.. 至少这是我的经验。

4）使用各种技术、坐标（实际上，我什至使用了屏幕截图）等，您几乎可以实现所有目标。不过这需要很多很多时间。在开发过程中正确掌握基础知识并考虑 UI 测试开发人员的反馈可以极大地帮助加快以后的测试。最简单的例子：应用程序是否在屏幕上绘制“一切正常”，或者是否有一个可以访问的控件具有“一切正常”的名称属性 - 第二种解决方案对于自动化人员来说会好得多。

另外，对于比较复杂的UI，如果你是在企业环境，有钱又想花很多时间在UI测试上，我推荐Ranorex、SilkRunner之类的产品。我使用 Ranorex Eval 工作了几天，并且（在习惯了它之后）可以导航非常难以事先导航的 UI。

# sbt - SBT - 无法在 Windows 7 上保存文件

> ID：14602600
> 
> 赞同：1
> 
> 时间：2013-01-30T11:11:16.563
> 
> 标签：sbt

我正在使用 sbt 运行一个 lift web 应用程序。在我运行以下命令`container:start`并修改任何 css 文件并保存它们后，我会收到`"The file is opened in another program"`. 我检查了进程，SBT 保持文件打开。当我退出 SBT 时，我可以保存文件。我不知道为什么会这样。我错过了任何设置吗？我使用 SBT 下载页面中的 MSI 安装程序来安装 SBT。我尝试使用不同的编辑器，但同样的问题仍然存在。SBT有问题吗？

# javascript - 对包含多个表格的页面进行分页

> ID：14602603
> 
> 赞同：0
> 
> 时间：2013-01-30T11:11:28.547
> 
> 标签：javascript, jquery, html, pagination

我有一个 JSP 页面，该页面将填充动态创建的表，其中的数据是从数据库中填充的。

这个页面看起来像这样

```
<div id="VehicleWrap">
   <form id="bookvehicle" method="post" action="bookvehicle">
       <table>
           <tr>
              <td class="label"><label id="lbodytype" for="transmission">Body Type</label></td>
              <td class="field"><input id="bodytype" name="bodytype" type="text" value="<%= vehicle.getBodyType()%>" maxlength="50" readonly/></td>
              <td class="status"></td>
           </tr>
           <tr>
              <td class="label"><label id="ltransmission" for="transmission">Transmission</label></td>
              <td class="field"><input id="transmission" name="transmission" type="text" value="<%= vehicle.getTransmission()%>" maxlength="50" readonly/></td>
              <td class="status"></td>
           </tr>
       </table>

       <table>
           <tr>
              <td class="label"><label id="lbodytype" for="transmission">Body Type</label></td>
              <td class="field"><input id="bodytype" name="bodytype" type="text" value="<%= vehicle.getBodyType()%>" maxlength="50" readonly/></td>
              <td class="status"></td>
           </tr>
           <tr>
              <td class="label"><label id="ltransmission" for="transmission">Transmission</label></td>
              <td class="field"><input id="transmission" name="transmission" type="text" value="<%= vehicle.getTransmission()%>" maxlength="50" readonly/></td>
              <td class="status"></td>
           </tr>
       </table>

       <table>
           <tr>
              <td class="label"><label id="lbodytype" for="transmission">Body Type</label></td>
              <td class="field"><input id="bodytype" name="bodytype" type="text" value="<%= vehicle.getBodyType()%>" maxlength="50" readonly/></td>
              <td class="status"></td>
           </tr>
           <tr>
              <td class="label"><label id="ltransmission" for="transmission">Transmission</label></td>
              <td class="field"><input id="transmission" name="transmission" type="text" value="<%= vehicle.getTransmission()%>" maxlength="50" readonly/></td>
              <td class="status"></td>
           </tr>
       </table>
   </form>
</div> 
```

正如您在上面看到的，我将在表单和 div 中列出表格。但是我不能将表格组成一个长表格并使用许多表格分页插件之一。

我将如何对此进行分页，例如，一个分页页面只有 5 个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:12:42.040

Flexipage 是一个[jQuery](http://www.jquery.com)插件，用于对任何 HTML 内容进行分页。灵感来自[Quick Paginate](http://projects.allmarkedup.com/jquery_quick_paginate/)插件。

### 用法

要使用 flexipage 插件，请在文档的标签中包含 jQuery 和 jquery.flexipage：

```
<script src="javascripts/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="javascripts/jquery.flexipage.js" type="text/javascript"></script> 
```

然后像这样写一些HTML：

```
<div>
  <ul class="fp-example">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    ...
    <li>Item 22</li>
    <li>Item 23</li>
    <li>Item 24</li>
    <li>Item 25</li>
  </ul>
</div> 
```

并开始flexipage

```
$('.fp-example').flexipage(); 
```

* * *

另外，请参阅以下资源：

*   [10个jQuery分页插件](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)
*   [为内容创建现代 jQuery 分页](http://www.script-tutorials.com/creating-modern-jquery-pagination-for-content/)
*   [使用 JQuery 对 HTML 内容进行分页](https://stackoverflow.com/questions/11081716/pagination-of-html-content-using-jquery)
*   [轻松分页](http://cssglobe.com/post/9801/easy-paginate-jquery-plugin-for-pagination)
*   [j分页](http://tympanus.net/codrops/2009/11/17/jpaginate-a-fancy-jquery-pagination-plugin/)
*   [甜蜜的页面](http://tutorialzine.com/2010/05/sweet-pages-a-jquery-pagination-solution/)

# wpf - 如何根据我的子视图模型的类型切换 Telerik 功能区视图元素？

> ID：14602606
> 
> 赞同：1
> 
> 时间：2013-01-30T11:11:41.743
> 
> 标签：wpf, mvvm, telerik

我正在为我的 WPF 应用程序使用 MVVM 模式。如果控制我的应用程序主窗口布局的“主”视图模型，我有一个 ChildViewModel 属性。这包含一个可以根据用户正在做的事情切换的视图模型。当他们选择菜单项时，子视图模型会切换，屏幕的主要区域（它是 Outlook 样式）也会相应地切换。

我用这样的 ContentControl 和 DataTemplate 来做到这一点：（我在这里只显示一个可嵌入的视图以保持简短）。

```
<ContentControl Grid.Row="1" Grid.Column="1" Margin="3"
                Content="{Binding ChildViewModel}">
    <ContentControl.Resources>
        <DataTemplate DataType="{x:Type vm:VersionsViewModel}">
            <Embeddable:VersionsView />
        </DataTemplate>
    </ContentControl.Resources>
</ContentControl> 
```

我还想使用 Telerik RadRibbonView 控件在我的主窗口中添加一个功能区。我希望它有一些始终可见的固定选项卡和按钮。此外，我想根据子视图模型的类型添加和删除整个选项卡以及现有选项卡中的按钮。我希望以与上面完成内容控制的方式类似的方式在视图中完成此操作。

这可能吗？我已经尝试了很多东西，但到目前为止一无所获。我知道我可以通过创建一个巨大的“超级功能区”和绑定可见性属性来做到这一点，但这似乎很笨拙。我也可以有多个功能区，每个功能区都包含公共控件，但这会导致维护问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:58:01.643

最后我选择了“超级丝带”方法，因为我找不到其他方法。

# java - 使用 Joda-Time 获取给定日期和时区的 UTC 偏移量

> ID：14602610
> 
> 赞同：17
> 
> 时间：2013-01-30T11:11:58.000
> 
> 标签：java, timezone, jodatime, utc

我有格式为 20Jan2013、08Aug2012 等的日期，它们有自己的特定时区。例如，2013 年 1 月 20 日的时区 ID 可能是澳大利亚/墨尔本，而 08Aug2012 的时区 ID 可能是欧洲/伦敦。我想要做的是，根据这些时区和日期，计算给定日期该时区的 UTC 偏移量。到目前为止，我已经想出了这个：

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("ZZ");
DateTimeFormatter dtf1 = DateTimeFormat.forPattern("ddMMMYYYY");

DateTimeZone zone = DateTimeZone.forID("Australia/Melbourne");  

DateTime thisDate = dtf1.parseDateTime("30Jul2013");                                            
System.out.println("\nZone: " + thisDate.withZone(zone)); 
```

这给了我输出：

```
Zone: 2013-07-30T00:00:00.000+10:00 
```

这是正确的，但我想从中提取 UTC 偏移量，在本例中为 +10:00。我一直在寻找方法来做到这一点，但找不到任何东西。有什么办法可以做到这一点吗？我看到的唯一选择是将输出转换为字符串并使用子字符串方法获取 UTC 偏移量。

上面的代码确实考虑了 DST（夏令时）。例如，如果我有： DateTime thisDate = dtf1.parseDateTime("30Jan2013");

输出将是：2013-01-30T00:00:00.000+11:00

（结束时 +11:00 而不是 +10:00）

所以基本上我需要做的就是找到一种从 2013-07-30T00:00:00.000+11:00 中提取 +11:00 的方法。请帮忙！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-01-29T02:11:55.160

## 获取时区名称和小时偏移量的简单方法

```
public static String getCurrentTimeZoneOffset() {
    DateTimeZone tz = DateTimeZone.getDefault();
    Long instant = DateTime.now().getMillis();

    String name = tz.getName(instant);

    long offsetInMilliseconds = tz.getOffset(instant);
    long hours = TimeUnit.MILLISECONDS.toHours( offsetInMilliseconds );
    String offset = Long.toString( hours );

    return name + " (" + offset + " Hours)";
    // Example: "Mountain Standard Time (-7 Hours)"
} 
```

### 几个警告：

*   `DateTimeZone`这从**JodaTime**获取默认值。您可以对其进行修改以接受传递给该方法的特定 DateTimeZone。
*   这会以“**山地标准时间（-7 小时）** ”之类的格式返回它，但您可以很容易地按照您认为合适的格式对其进行格式化。

希望有帮助。

J.P

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-09T20:11:58.903

为了让 Joda 给出正确的偏移量，您必须提供一个日期时间瞬间。没有日期时间瞬间，就不可能计算偏移量，因为我们有不同的偏移量（夏令时）。这就是我将如何使用 Joda 以 + HH:mm 格式获取偏移量：

```
 int offsetInMillis = DateTimeZone.forID(zoneId).getOffset(new DateTime().getMillis());
    String offset = String.format("%02d:%02d", Math.abs(offsetInMillis / 3600000),
            Math.abs((offsetInMillis / 60000) % 60));
    offset = (offsetInMillis >= 0 ? "+" : "-") + offset; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T11:18:44.193

If you just need the timezone offset, use `DateTimeZone.forID()` to get the time zone and then `tz.getOffset(instant)` to get the offset to UTC in milliseconds.

It may look odd that you need an instant to calculate the offset to UTC but this is necessary to take Daylight Savings into account as well as changes in the timezone. Yes, countries change their timezones once in a while:

> [Why does timezone data change?](http://www.oracle.com/technetwork/java/javase/dst-faq-138158.html#change)
> 
> Timezone settings are adopted locally, and there is no world timezone authority.

**EDIT** This gives you the correct result:

```
 DateTimeFormatter dtf1 = DateTimeFormat.forPattern("ddMMMYYYY");

    DateTimeZone zone = DateTimeZone.forID("Australia/Melbourne");  

    DateTime thisDate = dtf1.parseDateTime("30Jul2013").withZone(zone);                                            
    assertEquals( 10 * CommonConstants.MILLISECONDS_PER_HOUR,
        zone.getOffset( thisDate ) ); 
```

thisDate.get

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-11T21:55:06.533

Java 8[引入了更好的日期和时间处理](http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html)，以解决该语言先前在该领域的一些限制。我的一些项目已经开始使用它而不是 Joda。

使用 java.time 包：

```
 ZonedDateTime dateTime = LocalDate.of(2013 , 1 , 20).atStartOfDay( ZoneId.of("Australia/Melbourne"));
    ZoneOffset zo = dateTime.getOffset();
    int offset = zo.getTotalSeconds();

    long hours = TimeUnit.SECONDS.toHours(offset);
    long minutes = TimeUnit.SECONDS.toMinutes(offset % 3600); 
```

小时变量设置为 11，分钟设置为 0。

它还计算部分小时时区的分钟偏移量，例如加拿大东部的纽芬兰和拉布拉多：

```
ZonedDateTime dateTime = LocalDate.of(2013, 1, 20).atStartOfDay( ZoneId.of("Canada/Newfoundland")); 
```

在这种情况下，偏移量是`-03:30`（比 UTC 晚三个半小时）、 -3`hours`和`minutes`-30。

对于字符串表示形式，而不是整数小时和分钟数，请使用 ZoneOffset 的 toString() 方法。所以对于上面的例子，使用：

```
String offsetString = zo.toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T14:53:33.037

当您知道偏移量和时间戳时，为了获得当前时间，您可以使用

```
 public static String formatMonthDayMinuteByGivenUtcOffset(long timestamp, int offset) {
        return JODA_FORMATTER.print(createDateTime(timestamp, offset));
    } 
```

# vb.net - 屏蔽以接受正小数

> ID：14602614
> 
> 赞同：0
> 
> 时间：2013-01-30T11:12:24.783
> 
> 标签：vb.net, winforms, textbox

我有一个`textBox`，我希望它只接受`0.00`和之间的正小数`20.00`，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:55:30.043

如果我理解你的问题。

```
 Private Sub TextBox1_KeyPress(sender As System.Object, e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
        If Not Char.IsControl(e.KeyChar) AndAlso Not Char.IsDigit(e.KeyChar) AndAlso e.KeyChar <> "."c Then
            e.Handled = True
        End If

        'for ne decimal point
        If (e.KeyChar = "."c AndAlso (TextBox1).Text.IndexOf("."c) > -1) Then
            e.Handled = True
        End If
    End Sub

    Private Sub TextBox1_Validating(sender As System.Object, e As System.ComponentModel.CancelEventArgs) Handles TextBox1.Validating
        If Decimal.Parse(TextBox1.Text) >= 0 AndAlso Decimal.Parse(TextBox1.Text) <= 20 Then
            'if positive decimals between 0.00 and 20.00
            'Do stuff
        Else
            'if not positive decimals between 0.00 and 20.00
            e.Cancel = True
        End If
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:18:17.880

If you need to make sure as the user is typing that only decimals are entered then apply an on key up event to it using javascript which checks the contents of the textbox, deleting any offending characters if any are present.

If you just need to check on submit, then do it within the code called on submit of the form.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T07:33:40.870

```
 Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As  System.EventArgs) Handles TextBox1.TextChanged

    Dim myRegex As New Regex("^[0-9]*\.?[0-9]{0,2}$")
    If myRegex.IsMatch(TextBox1.Text.Trim) = False Then
        MsgBox("Invalid characters found")
        Exit Sub
    Else
        If CDec(TextBox1.Text.Trim) < 0 OrElse CDec(TextBox1.Text.Trim) > 20 Then
            MsgBox("Enter value between 0.00 and 20.00")
            Exit Sub
        End If
    End If

    End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:34:06.147

您可以`TextBox`像这样使用验证器

```
<asp:RangeValidator ID="range" runat="server" 
    ControlToValidate="text1" 
    MinimumValue="0" MaximumValue="20.99" Type="double" /> 
```

请查看这篇关于[compareValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.aspx)、 [rangeValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.rangevalidator.aspx)、[regularExpressionValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)的文章了解更多详情

祝你好运

# java - 花式盒画廊只是链接到 HTML 窗口中的图像

> ID：14602616
> 
> 赞同：0
> 
> 时间：2013-01-30T11:12:32.680
> 
> 标签：java, jquery, servlets, fancybox, image-gallery

> **可能重复：**
> [jQuery Fancybox 无法识别元素](https://stackoverflow.com/questions/14511090/jquery-fancybox-not-recognizing-element)

我有一个精美的盒子图像库，它是由数据库内的图像动态生成的。我使用了一个 servlet，它从数据库中获取图像，并按照花式盒网站上的示例在 src 中链接到它们。但是我似乎无法让它工作当我单击图像的缩略图时，它只是链接到一个单独的页面，其中包含图像，而不是弹出图像库。

当我将链接放入我的 servlet 时，如下所示：

```
<a class="fancybox" rel="gallery<%= h.getHomeID()%>" href="http://localhost:8080/Website/Image?id=<%= h.getHomeID()%>" title="Photo">
    <img src="Image?id=<%= h.getHomeID()%>" alt="" height="197px" width="315px"/>
</a> 
```

这会导致图像显示在浏览器窗口中

使用花式框页面中已经提供的链接，图像库似乎可以工作。

```
<a class="fancybox" rel="gallery<%= h.getHomeID()%>" href="http://farm9.staticflickr.com/8490/8215600456_de252d155d_b.jpg" title="Photo">
    <img src="Image?id=<%= h.getHomeID()%>" alt="" height="197px" width="315px"/>
</a> 
```

有谁知道为什么会发生这种情况？如果需要我可以发布我的 servlet 代码，如果这会被认为是一个问题？

# c# - 为什么我在 Asp.Net Framewok 线程池中找不到指定的线程

> ID：14602618
> 
> 赞同：0
> 
> 时间：2013-01-30T11:12:39.590
> 
> 标签：c#, .net, multithreading, threadpool

全部

我正在编写一个小代码，用于在计算机进程中按线程 id 搜索线程。

我所有的代码如下所示，请帮忙查看。:)

```
 using System.Diagnostics;

    public class NKDiagnostics
    {
        private Process[] m_arrSysProcesses;

        private void Init()
        {
            m_arrSysProcesses = Process.GetProcesses(".");
        }
        public static ProcessThread[] GetProcessThreads(int nProcID)
        {
            try
            {
                Process proc = Process.GetProcessById(nProcID);
                ProcessThread[] threads = new ProcessThread[proc.Threads.Count];
                proc.Threads.CopyTo(threads, 0);
                return threads;
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                return null;
            }
        }
    } 
```

在另一个类中，我分配了一个线程来执行我的名为`DoNothing`

```
 ThreadPool.QueueUserWorkItem((t) => Utility.DoNothing((TimeSpan)t), 
TimeSpan.FromMinutes(1)); 
```

功能`DoNothing`代码是

```
public class Utility
    {
        public static void DoNothing(TimeSpan timeout, TextBox txtThreadId)
        {
            TimeoutHelper helper = new TimeoutHelper(timeout);
            while (true)
            {
                Thread.Sleep(1000 * 5);
                if (helper.RemainingTime() <= TimeSpan.Zero)
                {
                    MessageBox.Show("This thread's work is finished.");
                    break;
                }
                else
                {

                    if (Thread.CurrentThread.IsThreadPoolThread)
                    {
                        MessageBox.show( Thread.CurrentThread.ManagedThreadId.ToString());
                    }

                }
            }
        }
} 
```

我的问题是`Thread.CurrentThread.ManagedThreadId`节目10，我在所有过程中都搜索了它。但是没找到。

```
ProcessThread[] m_Threads = NKDiagnostics.GetProcessThreads(processId);
for (int i = 0; i < m_Threads.Length; i++)
            {

                if (m_Threads[i].Id.Equals(10))
                {
                    MessageBox.Show("Found it.");
                }
} 
```

我错过了什么吗？为什么我找不到这个线程？请帮助我。谢谢。

**更新**

我对这段代码做一些实验的最初想法是试图找到一种方法来获取托管线程的状态。显然，我在这里发布的方式并没有成功。所以我的问题是如何知道具有指定线程 ID 的托管线程的状态？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:22:41.317

`Thread.ManagedThreadId`并且`ProcessThread.Id`没有可比性。第一个由 .NET 运行时分配，而第二个是操作系统分配给每个线程的本机线程句柄的值。

也[无法将一个映射到另一个](http://msdn.microsoft.com/en-us/library/74169f59.aspx)：

> 操作系统 ThreadId 与托管线程没有固定关系，因为非托管主机可以控制托管线程和非托管线程之间的关系。具体来说，复杂的主机可以使用 Fiber API 针对同一个操作系统线程调度许多托管线程，或者在不同操作系统线程之间移动托管线程。

因此，您的代码无法按原样工作。

顺便说一句，这里可能存在竞争条件：

```
ProcessThread[] threads = new ProcessThread[proc.Threads.Count];
proc.Threads.CopyTo(threads, 0); 
```

有可能`proc.Threads`在数组初始化之后但在`CopyTo`执行之前进行修改。为了避免这种竞争条件`proc.Threads`只评估一次，例如：

```
var threads = proc.Threads.ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:24:15.963

进程线程是非*托管*线程；a`Thread.CurrentThread`是*托管*线程；虽然两者是相关的，但不能保证两者之间存在 1:1 映射，也不能保证托管线程与同一个非托管线程保持关联。

`ManagedThreadId`如果您与非托管线程进行比较，我建议不要查看。

# objective-c - 将 NSString 与整数连接 - ARC 错误

> ID：14602623
> 
> 赞同：0
> 
> 时间：2013-01-30T11:12:53.913
> 
> 标签：objective-c, cocoa, xcode4.5

我正在努力连接 NSStrings 和 int。单独来看，下面的代码效果很好。它返回“这是一个带有 int 10 的测试字符串”

```
int myInt =10;

NSString *newstring =
[NSString stringWithFormat: @"This is a test string with an int %i", myInt];

NSLog(@"%@", newstring); 
```

但是，当我将以下代码放入我的项目时，我收到一个错误：弧不允许将 int 隐式转换为 NSString。”

```
[_mycrop setTempLeft: (@"left value %i is %i", count, [_mycrop leftValue])]; 
```

有人可以建议我哪里出错了吗？尽管我传入了 2 个变量，但在我看来，两者本质上是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:14:52.763

“孤立”的代码与第二个代码非常不同。

您也必须[`stringWithFormat:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringWithFormat_)在第二个示例中使用。

```
[_mycrop setTempLeft:[NSString stringWithFormat:@"left value %i is %i", count, [_mycrop leftValue]]]; 
```

或者有两行但更容易理解：

```
NSString *tempLeft = [NSString stringWithFormat:@"left value %i is %i", count, [_mycrop leftValue]];
[_mycrop setTempLeft:tempLeft]; 
```

一些文档：[Apple String Programming Guide - Formatting String Objects](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html)

# php - 使用 CodeIgniter 从 PHP 中的数据库表中选择记录并传递给视图

> ID：14602625
> 
> 赞同：0
> 
> 时间：2013-01-30T11:13:01.173
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter 在 PHP 中进行查询，以从数据库中获取我想要的数据。为了能够获取特定列的所有值，我将其存储到一个数组中并将其传递到一个视图中。但我只能为一栏做到这一点。

这是我的代码：

```
$query = $this->db->query('SELECT name, description FROM module');

$result = $query->result_array();

foreach ($result as $key => $rowdata) { 
    $resultdata['values'][$key] = $rowdata['name'];    
}

$this->load->view('myview', $resultdata); 
```

在这种情况下，我可以从模块表中获取所有名称。但我的问题是，我也想获取模块表中的所有描述，但我不知道如何实现它并能够将它传递到视图中。希望有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:29:19.447

您没有使用 MVC 模式！

首先，您应该在模型中编写查询！

然后像这样将它加载到您的控制器中

```
$this->load->model('ModelName'); 
```

然后调用函数来检索数据

```
$data = $this->modelname->functionToRetreiveData(); 
```

然后用foreach遍历数据

```
$dataToView = array();
foreach($data as $key=>$row)
{
   $dataToView['something'][$key]['value'] = $row->name_of_column;
} 
```

并将数组传递给视图 $this->load->view('someview',$dataToView);

然后在视图中

```
foreach($value as $val):
<p><?php echo $val['name']?><p>
endforeach 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:21:01.600

您好，您将在控制器中循环两次，然后在视图中打印它，检查一下

**//在控制器中**

```
 $query = $this->db->query('SELECT name,description FROM module');

    $resultdata['results'] = $query->result_array();

    $this->load->view('myview',$resultdata); 
```

**我的视图.php**

```
foreach($results as $result)
{
    echo $result['name'],' ',$result['description'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:28:24.747

```
$query = $this->db->query('SELECT name,description FROM module');

$result = $query->result_array();

foreach($result as $rowdata){    
  $resultdata['values'][] = $rowdata;    
}

$this->load->view('myview',$resultdata); 
```

在视图中尝试：

```
print_r($values); 
```

你可能会有：

```
$result[0]['name'],  $result[0]['description'] ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T11:51:02.293

```
$this->load->database();

$this->db->select('employee');

$query = $this->db->get();

return $query;

foreach ($query as $row) {
    print $row->'Name';
    .
    .
    .
    print $row->'Address';
} 
```

# wpf - WPF Datagrid 事件 DataTriggers 与 EventTriggers

> ID：14602626
> 
> 赞同：2
> 
> 时间：2013-01-30T11:13:15.440
> 
> 标签：wpf, binding, datagrid, datatrigger, eventtrigger

相对简单的问题，我正在努力寻找一个很好的优雅解决方案。我有一个网格，其中有一列显示每 n 秒更新一次的值。我希望在值更改时显示动画，并根据数字是负数还是正数以不同颜色闪烁单元格。找到了一大堆几乎可以满足我需求的方法，但没有一个完全符合我的需求。

*   使用 EventTrigger，我可以在每次发生更新时使单元格闪烁。下面使用一个比较简单的动画。但是我无法使动画使用的颜色有条件，因为情节提要冻结了 UI 元素，所以我不能在情节提要中使用绑定来定义颜色。

    ```
     <EventTrigger RoutedEvent="Binding.TargetUpdated">
                <BeginStoryboard HandoffBehavior="Compose" Name="GreenCell">
                    <Storyboard TargetProperty="(TextBlock.Background).(SolidColorBrush.Color)">
                        <ColorAnimation Duration="0:0:1.50" From="Green" To="Transparent" AutoReverse="False"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger> 
    ```

*   使用 DataTrigger，我可以通过创建一个将更新转换为此值以及该值是否为负的转换器来使单元格颜色成为条件，然后将数据触发器绑定到该值并在该值更改时设置背景颜色。但是，如果数字已经是负数，并且仍然是负数（但发生了变化），则不会触发触发器。

    ```
     <DataTrigger Binding="{Binding Value, Converter={StaticResource cellBackGroundConverter}}" Value="True">
                <DataTrigger.EnterActions>
                    <BeginStoryboard HandoffBehavior="Compose" Name="GreenCell">
                        <Storyboard TargetProperty="(TextBlock.Background).(SolidColorBrush.Color)">
                            <ColorAnimation Duration="0:0:1.50" From="Green" To="Transparent" AutoReverse="False"/>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding Value, Converter={StaticResource cellBackGroundConverter}}" Value="False">
                <DataTrigger.EnterActions>
                    <BeginStoryboard HandoffBehavior="Compose" Name="RedCell">
                        <Storyboard TargetProperty="(TextBlock.Background).(SolidColorBrush.Color)">
                            <ColorAnimation Duration="0:0:1.50" From="Red" To="Transparent" AutoReverse="False"/>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger> 
    ```

我需要的似乎是一个事件触发器，以捕获每个更新并使用数据触发器的条件方面播放动画。

当然，我在这里遗漏了一些简单的东西，希望有人能直截了当！

非常感谢

马特

# vb.net - SQL 存储过程 VB.Net

> ID：14602627
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:13:20.143
> 
> 标签：vb.net, sql-server-2008, tsql, parameters

我有一个存储过程，在 SQLServer 上运行时需要 1 秒才能运行，但在我的 VB.Net 代码中需要将近 20 秒。需要很长时间才能上线：

```
Adapter.Fill(ds,"TimeTable") 
```

我做错了什么让它花这么长时间吗？

我的代码片段如下：

```
 SQLConn = New SqlConnection(SQLDConnString)
    cmd = New SqlCommand("SPNAME", SQLConn)
    cmd.CommandType = CommandType.StoredProcedure
    SQLConn.Open()
    cmd.Parameters.AddWithValue("@p1", p1)
    cmd.Parameters.AddWithValue("@p2", p2)
    cmd.Parameters.AddWithValue("@p3", p3)
    cmd.Parameters.AddWithValue("@p4", p4)
    adapter.SelectCommand = cmd
    adapter.Fill(ds, "TimeTable")
    DataGridView1.DataSource = ds.Tables("TimeTable")
    SQLConn.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:02:55.397

如果您的列和行高度/宽度的 datagridview 属性设置为自动，则可能需要很长时间才能完成该过程。我曾经发生过这种情况，其中存储过程花费了异常大量的时间，最终成为导致它停止的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:00:20.997

我似乎通过在我的 SP 中声明局部变量然后将我的参数分配给这些变量来解决这个问题。

与参数嗅探有关。

# php - 在 pagodabox 应用程序中创建目录

> ID：14602628
> 
> 赞同：0
> 
> 时间：2013-01-30T11:13:21.307
> 
> 标签：php, codeigniter

我在 codeigniter 中创建了一个 pagodabox 应用程序，在这个应用程序中我使用上传文件夹来存储图像，现在我需要创建一个名为“thumb”的子文件夹来保存上传图像的缩略图。我的问题是服务器上没有创建目录。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T13:16:47.067

可能您需要 Pagodabox 可写存储： [https ://pagodabox.com/features/shared-writable-storage](https://pagodabox.com/features/shared-writable-storage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:51:51.373

据我所知， pagodabox 使用 git 进行源代码控制，对吧？如果是这样，为什么不在本地 repo 上创建新目录并提交/推送呢？那应该可以正常工作。此外，宝塔盒的挂钩文件也应该可以帮助您设置目录写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:59:06.983

Git 会忽略空目录（实际上通常会忽略文件夹）。在本地 repo 中创建目录，并在其中创建一个文件。您可以稍后删除此文件或将其添加到 .gitignore 中。

# jquery - 滚动期间的 jQuery 粘性导航中心

> ID：14602629
> 
> 赞同：0
> 
> 时间：2013-01-30T11:13:25.140
> 
> 标签：jquery, css

如何在滚动期间设置导航的宽度。导航在滚动期间适合 100% 的宽度。如果我将宽度设置为 500px，而不是其 left:0 定位。在左侧，我无法将导航设置为自动居中。

[http://jsfiddle.net/aY8a7/](http://jsfiddle.net/aY8a7/)

```
$(function() {

    var sticky_navigation_offset_top = $('#sticky_navigation').offset().top;

    var sticky_navigation = function(){
        var scroll_top = $(window).scrollTop(); // our current vertical position from the top

        if (scroll_top > sticky_navigation_offset_top) {
            $('#sticky_navigation').css({ 'position': 'fixed', 'top':0, 'left':0 });
        } else {
            $('#navigation_menu').css({ 'position': 'relative' });
        }  
    };

    sticky_navigation();

    $(window).scroll(function() {
         sticky_navigation();
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:32:52.490

试试这个：http: [//jsfiddle.net/aY8a7/1/](http://jsfiddle.net/aY8a7/1/)

```
$(function() {

    var sticky_navigation_offset_top = $('#sticky_navigation').offset().top;

    var sticky_navigation = function(){
        var scroll_top = $(window).scrollTop(); // our current vertical position from the top
        var $ul = $('#sticky_navigation ul').width()+'px';

        if (scroll_top > sticky_navigation_offset_top) {
            $('#sticky_navigation').css({ 'position': 'fixed', 'top':0, 'left':0 });
            $('#sticky_navigation ul').css({'width':$ul, 'display':'block', 'text-align':'center'});
        } else {
            $('#navigation_menu').css({ 'position': 'relative' });
        }  
    };

    sticky_navigation();

    $(window).scroll(function() {
         sticky_navigation();
    });

}); 
```

# sql - 从另一个表的列更新一列

> ID：14602634
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:13:54.407
> 
> 标签：sql, sql-update

嗨，我想用其他表的列更新一列，做出一些决定这是我的代码

```
update STOCKS 
    set SE_QTY_L2 = (   

      select SE_QTY_L2  

      from STOCKS  
      join 
      VITEM on VITEM.Code= STOCKS.SE_ITEM_CODE 
      and SE_UNIT = VITEM.[First Unit] and VITEM.[Max Level] = 3  

      )   from STOCKS    
      join 
      VITEM on VITEM.Code= STOCKS.SE_ITEM_CODE 
      and SE_UNIT = VITEM.[First Unit] and VITEM.[Max Level] = 3 
```

当我运行此查询时，会引发以下错误：

**错误**

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:32:21.493

运行时的输出是什么；

```
SELECT Code, [First Unit], [Max Level]
FROM Vitem
WHERE [Max Level] = 3
HAVING COUNT(*) > 1 
```

如果您有不止一行，那么这意味着您将为您的 UPDATE 条件返回多个匹配项，这就是您的子查询爆炸的原因。您需要从源表中寻找唯一的行组合。

# iphone - SQLite Manager - 将表复制到另一个 .sqlite 数据库

> ID：14602635
> 
> 赞同：2
> 
> 时间：2013-01-30T11:13:55.633
> 
> 标签：iphone, ios, sqlite, sqlitemanager

使用 SQLite 数据库开发我的第一个 iOS 应用程序。在项目中，我有 2 个数据库，其中第一个数据库只有一个表，另一个作为主数据库。我想通过将表从第一个数据库复制到第二个数据库，将这些数据库合并为一个（第二个）。第一个数据库表包含超过 32K 条记录。所以，我想用数据复制整个表。

**我想使用 firefox 的 SQLManager AddOn 来实现这一点。**

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:48:23.210

您可以使用一个命令行简单地执行此操作，而不是 SQLManager：

```
$ echo '.dump tablename' | sqlite3 sourcedb | sqlite3 destdb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:05:47.213

在 sqlite manager 中将所需的表格内容导出到 Excel 表中，然后将 excel 文件导入目标数据库中。

您可以在 sqlite manager 本身中看到导入和导出的控件。我希望这可以帮助你，因为我使用它。

# jquery - ARIA 和数据有什么区别-*

> ID：14602638
> 
> 赞同：16
> 
> 时间：2013-01-30T11:14:00.657
> 
> 标签：jquery, html, css, jquery-mobile

为了给 HTML 标签添加更多含义，我使用了**data - ***。实际上我已经从 jquery mobile 学到了这种方法。但最近我遇到了**WAI-ARIA**。它似乎与**data - ***几乎相似。谁能解释一下，这些有何不同以及它们的浏览器依赖性？

**有用的链接**

关于[WAI-ARIA](https://stackoverflow.com/questions/3474099/what-is-html5-aria)

关于[数据-*](http://html5doctor.com/html5-custom-data-attributes/)

> **更新：**最后..他们都是不同的。他们有一些多么相似的语法。这让我很困惑。我正在接受@Gajotres 的回答。并看到这个[你管视频](http://www.youtube.com/watch?feature=player_embedded&v=jiA9RJBwXvw) 为 ARIA 直播。将此视频与@Gajotres 的答案相匹配。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T11:43:09.293

## data-* 属性

W3C HTML5 工作草案指出：

> “自定义数据属性是无命名空间中的属性，其名称以字符串“data-”开头，连字符后至少有一个字符...”

这些自定义数据属性允许您创建属性以与在您自己的站点上运行的脚本共享数据。它们不会被通用软件使用或收获。您可以指定的自定义数据属性数量不受限制。根据 caniuse.com 的说法，“所有浏览器都可以使用 data-* 属性并使用 getAttribute 访问它们。”

由于良好的支持，已经有很多自定义数据属性的例子。如果您有 Dreamweaver CS5.5，则可以创建一个 jQuery Mobile (JQM) 应用程序。jQuery Mobile 广泛使用自定义数据属性来识别元素、主题和许多其他事物的角色。这是一个 JQM 页面的示例：

```
<div data-role="page" id="page" data-theme="b"> 
    <div data-role="header"> 
        <h1>Header</h1> 
    </div> 
    <div data-role="content">Content</div> 
    <div data-role="footer"> 
        <h4>Footer</h4> 
    </div> 
</div> 
```

## 角色和 aria-* 属性

如果您努力使具有各种不同浏览习惯和身体残疾的用户可以访问您的网站，您可能会认识到角色和 aria-* 属性。WAI-ARIA（可访问的富 Internet 应用程序）是一种提供定义动态 Web 内容和应用程序的方法的方法，以便残障人士能够识别并成功与之交互。这是通过定义文档或应用程序结构的角色，或通过定义小部件角色、关系、状态或属性的 aria-* 属性来完成的。

规范中建议使用 ARIA，以使 HTML5 应用程序更易于访问。使用语义 HTML5 元素时，应设置其对应的角色。基本结构可能如下所示：

```
<header id="banner" role="banner"> 
    ... 
</header> 
<nav role="navigation"> 
   ... 
</nav> 
<article id="post" role="main"> 
   ... 
</article> 
<footer role="contentinfo"> 
    ... 
</footer> 
```

还有许多 aria-* 属性使您的内容更易于导航和理解。像 aria-labelledby、aria-level、aria- describeby 和 aria-orientation 这样的东西都会让你的内容更容易识别。您可以在 ARIA 状态和属性页面上阅读有关它的更多信息。

## 结论：

坚持使用 data-* 属性。他们目前得到更好的支持。并且应该用作旧类型自定义属性的替代品。还创建了 data-* 属性作为数据持有者，同时创建了 ARIA 和 ROLE 属性以提高可读性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T11:32:24.807

它们之间没有任何共同点，除了它们是 HTML 属性。

ARIA 属性在规范中定义，应该被相关软件观察到，例如浏览器和辅助软件。

`data-`属性是一种专门为页面范围或站点范围使用而指定的机制，用于任何所需的目的，没有对它们的一般定义。也就是说，它们是“私人使用”的，基本上用于客户端脚本（可能还有样式，也可以用于特定于站点的搜索引擎和创作工具）。`data-foo`只要您（或站点管理员）保持其使用一致并且拥有自己使用此类属性的内部文档，您站点中的属性将永远不会与规范中定义的任何属性或其他任何属性发生冲突。

# .htaccess - 某些 IE9 用户无法使用某些凭据使用 htpasswd 登录

> ID：14602639
> 
> 赞同：2
> 
> 时间：2013-01-30T11:14:01.763
> 
> 标签：.htaccess, internet-explorer-9, .htpasswd

## **某些**IE9 用户无法登录到受 htpasswd 保护的文件夹

我有正常的 htaccess/htpasswd 保护文件夹。一些 IE9 用户发现一组凭据（用户/密码）不起作用，而其他组凭据则很好。

*   只影响IE9和?IE8。Firefox、Chrome 等都可以使用在 IE 中不起作用的凭据。
*   在 7 个 IE9 用户中，4 个无法使用这些凭据登录，3 个可以。
*   用户名和密码均仅由字母和数字（12 和 7）组成。
*   IE9 的相同版本号出现在 can/can't 组中。
*   缓存被排除在外，因为测试组中有 6 个是首次用户。
*   直接访问文件而不是文件夹没有帮助。
*   .htpasswd 格式已尝试作为 crypt 和 MD5，没有区别。
*   有问题的页面设置为无缓存，过期时间已过去。
*   无法登录到文件夹 A 的同一用户可以登录到文件夹 B（使用不同的凭据）。
*   无法使用凭据 A 登录的同一用户可以使用凭据 B（均为 MD5）登录。
*   该组凭据在 .htpasswd 文件中的位置似乎没有任何区别。
*   失败的凭据也会在不同的文件夹上失败（对于相同的 IE9 用户）。

我完全被难住了。我唯一能想到的是，非工作凭证中的字母/数字组合以某种方式导致......什么？为什么只在 IE9（也可能是 IE8）中？

我真的需要找到一个原因，而不仅仅是一个解决方案（更改这些特定的凭据），因为我们在这个站点上的各种文件夹中有几十个用户/密码组合，其中任何一个都可能受到这个问题的影响。

* * *

**编辑**：还检查了以下内容（因为 IE8/win7 有与这些相关的错误）

*   检查“记住密码”没有区别
*   粘贴与输入密码没有区别

我目前正在调查是否区分大小写、包含数字或产生的实际 MD5 哈希（包含特殊字符等）是否有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:51:06.027

使用 curl 和 charles 我们能够确定所有其他浏览器都在发送：

授权：基本[大长序列后跟]=

和 IE9，失败时发送：

授权：基本【大长序列后跟】g

第一个解码为用户名：密码

IE9 解码为 username:password[加一个空格]

尽管用户从密码输入框中清除了空格，但 IE9 似乎有时会在编码之前错误地将空格附加到密码。

# android - 如何长时间或连续播放gif图像

> ID：14602642
> 
> 赞同：0
> 
> 时间：2013-01-30T11:14:07.330
> 
> 标签：android, multithreading, canvas, timertask

如何在画布上连续播放 gif 图像。我正在使用表面视图。当应用程序加载时，该 gif 图像仅运行一次，然后自动停止。连续运行 gif 的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:30:37.570

您可以使用[gif 拆分器](http://www.xoyosoft.com/gs/)，然后可以使用[Drawable Animation](http://developer.android.com/guide/topics/graphics/drawable-animation.html)。您还可以设置动画的持续时间或连续播放。

# visual-studio-2010 - 为我的 WIinForm 应用程序创建 MSP 升级补丁不会更新我的 exe。

> ID：14602646
> 
> 赞同：0
> 
> 时间：2013-01-30T11:14:17.127
> 
> 标签：visual-studio-2010, deployment, .net-3.5, windows-installer, msp

我有在 .NET 3.5 上运行的 winForm 应用程序。我正在使用 VS 2010，我的启动项目“WinFormUI”引用了其他库。

我使用称为目标安装程序的 VS 2010（保留 .NET 3.5）创建了 MSI 安装程序并安装了应用程序。添加/删除程序确认安装初始版本 1.0.0。安装程序属性 RemovePreviousVersion=True。

现在我通过添加 MessageBox("This is updated project") 更改我的启动项目“WinFormUI”，并将我的启动项目 winFormUi.exe 的程序集版本从 1.0.0.0 更改为 1.0.0.1。

创建了第二个升级的 MSI，并将安装程序的版本从 1.0.0 更改为 1.0.1，但保持“产品代码”相同。

[按照http://www.codeproject.com/install/dotnetpatching.asp](http://www.codeproject.com/install/dotnetpatching.asp)和 [http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/7dda2e5f-70df-47d5-a62d-100a2bfd0394](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/7dda2e5f-70df-47d5-a62d-100a2bfd0394)的步骤 .

我有 Windows SDK V7.1，其中包含 MsiMsp.exe 5.0 版和 Ocra 5.0 版。

我的 PCP 文件有以下数据。

ImageFamilies 表：家庭-> fam1

MsiPatchSequence 表：PatchFamily -> fam1；序列 -> 1.0.0

属性表：MinimumRequiredVersion -> 200 和其他列

TargetImages 表：IgnoreMissingSrcFiles -> 0 和其他列

UpgradedImages 表：Family -> fam1 和其他列

使用 MsiMsp.exe 生成 MSP 并使用 msiexec /p 运行。

它运行安装程序（补丁）。升级后添加/删除程序确认升级版本 1.0.1 但问题是我的更改在我运行我的 exe 时没有反映。即，我已经修改为显示一个 MessageBox（“这是更新的项目”）。

难道我做错了什么 ？需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:12:03.093

补丁基本上包含两种设置之间的差异。为了覆盖文件，必须找到差异。它以文件的日期和大小开头。这个标准可能还不够，那是版本控制和签名有用的时刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:57:12.077

当我通过 VS2010 中的“程序集信息”对话框更改升级项目中的启动项目 WinFormUI.exe 的“文件版本”时，问题解决了。我猜当目标 exe 的文件版本与升级后的 exe 相同（尽管两者的程序集版本、内容和文件大小与前面描述的不同）或 REINSTALLMODE=dmus 应该在这种情况下工作时，补丁升级没有任何作用。

# html - 带有渐变背景和顶部中心箭头的工具提示/语音气泡

> ID：14602659
> 
> 赞同：1
> 
> 时间：2013-01-30T11:14:54.570
> 
> 标签：html, css, css-shapes

我有这个形状：

![在此处输入图像描述](../Images/56fdb910903818a8ab76d0f6980a5e7b.png)

我想知道是否可以使用 CSS3 创建它。

[这是我到目前为止所拥有的（点击小提琴）](http://jsfiddle.net/sjccN/3/)：

**HTML：**

```
<div id="cafeDialog" role="dialog" class="cafeDialog caspSearch" style="">
    <div data-title="Search" role="main">
        <div>

        </div>
    </div>
</div> 
```

**CSS：**

```
html, body {
    height: 100%;
}
.caspSearch {
    border: 1px solid black;
    background: black;
   background: -moz-linear-gradient(top, rgba(128, 144, 152, 0.9) 0%, rgba(67, 74, 80, 0.91) 8%, rgba(54, 58, 61, 0.96) 91%, rgba(74, 81, 85, 0.9) 100%);
    /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(128, 144, 152, 0.9)), color-stop(8%, rgba(67, 74, 80, 0.91)), color-stop(91%, rgba(54, 58, 61, 0.96)), color-stop(100%, rgba(74, 81, 85, 0.9)));
    /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(128, 144, 152, 0.9) 0%, rgba(67, 74, 80, 0.91) 8%, rgba(54, 58, 61, 0.96) 91%, rgba(74, 81, 85, 0.9) 100%);
    /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(128, 144, 152, 0.9) 0%, rgba(67, 74, 80, 0.91) 8%, rgba(54, 58, 61, 0.96) 91%, rgba(74, 81, 85, 0.9) 100%);
    /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(128, 144, 152, 0.9) 0%, rgba(67, 74, 80, 0.91) 8%, rgba(54, 58, 61, 0.96) 91%, rgba(74, 81, 85, 0.9) 100%);
    /* IE10+ */
    background: linear-gradient(to bottom, rgba(128, 144, 152, 0.9) 0%, rgba(67, 74, 80, 0.91) 8%, rgba(54, 58, 61, 0.96) 91%, rgba(74, 81, 85, 0.9) 100%);
    /* W3C */
    width: 500px;
    height: 300px;
    border-radius: 10px;
    padding: 0 !important;
    position:relative;
    top: 30px;

}
.caspSearch:before {
    content:'';
    width: 0;
    height: 0;
    display: block;
    position: absolute;
    border-bottom: 50px solid white;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
} 
```

我在三角形上苦苦挣扎，因为它需要透明渐变，黑色边框需要包裹它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:33:50.250

这是你想要的？

**CSS**

```
.triangle-isosceles {
    height: 200px;
    width: 300px;
    position:relative;
    padding:15px;
    margin:1em 0 3em;
    color:#000;
    background:#f3961c;
    background:-webkit-gradient(linear, 0 0, 0 100%, from(#f9d835), to(#f3961c));
    background:-moz-linear-gradient(#f9d835, #f3961c);
    background:-o-linear-gradient(#f9d835, #f3961c);
    background:linear-gradient(#f9d835, #f3961c);
    -webkit-border-radius:10px;
    -moz-border-radius:10px;
    border-radius:10px;
}

.triangle-isosceles.top {
    background:-webkit-gradient(linear, 0 0, 0 100%, from(#f3961c), to(#f9d835));
    background:-moz-linear-gradient(#f3961c, #f9d835);
    background:-o-linear-gradient(#f3961c, #f9d835);
    background:linear-gradient(#f3961c, #f9d835);
}

.triangle-isosceles:after {
    content:"";
    position:absolute;
    bottom:-15px; 
    left:50px;
    border-width:15px 15px 0;
    border-style:solid;
    border-color:#f3961c transparent;
    display:block; 
    width:0;
}

.triangle-isosceles.top:after {
    top:-15px;
    right:50px; 
    bottom:auto;
    left:auto;
    border-width:0 15px 15px;
    border-color:#f3961c transparent;
} 
```

**HTML**

```
<p class="triangle-isosceles top">Your content.</p> 
```

**小提琴**

[http://jsfiddle.net/sjccN/4/](http://jsfiddle.net/sjccN/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:21:30.257

我为你做了一个样本......只需将你的阴影等添加到这个和你的集合中:)

[http://jsfiddle.net/BNgTh/](http://jsfiddle.net/BNgTh/)

```
#talkbubble {
   width: 120px;
   height: 80px;
    margin-top:20px;
    margin-left:40px;
   background: red;
   position: relative;
   -moz-border-radius:    10px;
   -webkit-border-radius: 10px;
   border-radius:         10px;
}
#talkbubble:before {
   content:"";
   position: absolute;
   top: -20px;
    left:40%;
   width: 0;
   height: 0;
   border-bottom: 26px solid red;
   border-right: 13px solid transparent;
   border-left: 13px solid transparent;
} 
```

更改 #talkbubble:before 中的顶部值，使其也可以根据需要变小。

# c# - 创建集群所需的 C# 算法

> ID：14602662
> 
> 赞同：1
> 
> 时间：2013-01-30T11:15:02.377
> 
> 标签：c#, linq, graph-algorithm

我有一个通用列表说`List<TransactionInfo>`

`TransactionInfo`类具有三个属性：-

```
public long TransactionId { get; set; }
public string BuyerName { get; set; }  
public string SellerName { get; set; } 
```

如果以下是我列表中的数据：-

```
1 A B   
2 A C
3 A D
4 G H
5 C M
6 D E
7 A F
8 H L
9 L R
10 Y Z 
```

然后我想根据成员之间的事务创建组集群。我想编写应该返回新列表的 LINQ 查询

ClusterInfo 类包含一个属性：-

```
public List<TransactionInfo> Transactions { get; set; } 
```

`List<ClusterInfo>`应包含：-

集群[0]：-

```
1 A B
2 A C
3 A D
5 C M
6 D E
7 A F 
```

集群[1]

```
4 G H
8 H L
9 L R 
```

集群[2]

```
10 Y Z 
```

如何选择这些新列表：- 所有直接或间接买家/卖家都应属于一个集群。

任何人都可以帮助我编写 LINQ 查询来实现这一点。如果不是 LINQ，那么简单的 for 循环解决方案也足够了。

PS :- 从手机上发布这个..所以请原谅格式错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:28:40.407

这是解决方案：

```
static public void Main()
{
    // Example of dataset
    List<TransactionInfo> transactionInfos = new List<TransactionInfo>()
    {
        new TransactionInfo(1, "A", "B"),
        new TransactionInfo(2, "A", "C"),
        new TransactionInfo(3, "A", "D"),
        new TransactionInfo(4, "G", "H"),
        new TransactionInfo(5, "C", "M"),
        new TransactionInfo(6, "D", "E"),
        new TransactionInfo(7, "A", "F"),
        new TransactionInfo(8, "H", "L"),
        new TransactionInfo(9, "L", "R"),
        new TransactionInfo(10, "Y", "Z"),
    };

    // Creates the graph and add the arcs
    UndirectedGraph<string> graph = new UndirectedGraph<string>();
    foreach (TransactionInfo transactionInfo in transactionInfos)
        graph.AddArc(transactionInfo.SellerName, transactionInfo.BuyerName);

    var result = (from clusterByNode in graph.GetConnectedComponents()  // Gets the connected components
                  select (from transactionInfo in transactionInfos  // Gets the transaction infos
                          join node in clusterByNode on transactionInfo.BuyerName equals node  // Joins the transactionInfo with the node in the connected component
                          select transactionInfo).ToList()).ToList();
} 
```

与班级：

```
public class TransactionInfo
{
    public long TransactionId { get; set; }
    public string BuyerName { get; set; }
    public string SellerName { get; set; }

    public TransactionInfo(long transactionId, string buyerName, string sellerName)
    {
        TransactionId = transactionId;
        BuyerName = buyerName;
        SellerName = sellerName;
    }
} 
```

并且，找到连接组件的类：

```
public class UndirectedGraph<T>
{
    private Dictionary<T, HashSet<T>> linkedNodes = new Dictionary<T, HashSet<T>>();

    public void AddNode(T node)
    {
        if (!linkedNodes.ContainsKey(node))
            linkedNodes.Add(node, new HashSet<T>());
    }

    public void AddArc(T node1, T node2)
    {
        if (!linkedNodes.ContainsKey(node1))
            linkedNodes.Add(node1, new HashSet<T>());
        linkedNodes[node1].Add(node2);

        if (!linkedNodes.ContainsKey(node2))
            linkedNodes.Add(node2, new HashSet<T>());
        linkedNodes[node2].Add(node1);
    }

    public IEnumerable<HashSet<T>> GetConnectedComponents()
    {
        HashSet<T> visitedNodes = new HashSet<T>();

        foreach (T nodeToVisit in linkedNodes.Keys)
        {
            if (!visitedNodes.Contains(nodeToVisit))
            {
                HashSet<T> connectedComponent = GetConnectedComponent(nodeToVisit);
                visitedNodes.UnionWith(connectedComponent);
                yield return connectedComponent;
            }
        }
    }
    private HashSet<T> GetConnectedComponent(T from)
    {
        HashSet<T> result = new HashSet<T>();

        Stack<T> nodesToVisit = new Stack<T>();
        nodesToVisit.Push(from);
        result.Add(from);

        while (nodesToVisit.Count != 0)
        {
            T nodeToVisit = nodesToVisit.Pop();

            foreach (T linkedNode in linkedNodes[nodeToVisit])
            {
                if (!result.Contains(linkedNode))
                {
                    nodesToVisit.Push(linkedNode);
                    result.Add(linkedNode);
                }
            }
        }

        return result;
    }
} 
```

# php - PHP时间戳，显示用户今天在线

> ID：14602664
> 
> 赞同：0
> 
> 时间：2013-01-30T11:15:04.843
> 
> 标签：php, mysql, timestamp

我有一个功能可以向我展示今天访问过我网站的用户，MYSQL 数据库中有一个名为“lastvisit”的字段。

我曾经使用 MYSQL 时间戳，但是服务器时间与我的本地时间不同，因此无法正常工作。

我知道在 PHP 中设置时区并将日期和时间作为 VARCHAR 存储在数据库中，例如：

```
date_default_timezone_set('UTC');
$visittime = date('jS M Y H:i A');

//Update timestamp to show latest visit
$sql="UPDATE users SET lastvisit='$visittime' where email ='$email' ";

29th Jan 2013 22:29 
```

如何编写一个 PHP 函数来显示今天在线的用户，以及过去 24 小时内在线的用户数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:20:08.910

`MySQL`如果您假设要计算 distinct ，这将完成这项工作`email`。（***如果您可以使用用户的主键，那就更好了。***）

这将返回昨天和今天在线的用户总数。

```
SELECT  DATE(STR_TO_DATE(lastvisit, '%D %b %Y %H:%i')), 
        COUNT(DISTINCT email)
FROM    users
WHERE   DATE(STR_TO_DATE(lastvisit, '%D %b %Y %H:%i')) BETWEEN CURDATE + INTERVAL -1 DAY AND CURDATE()
GROUP   BY DATE(STR_TO_DATE(lastvisit, '%D %b %Y %H:%i')) 
```

# php - 用我的加法四舍五入 php 数字

> ID：14602667
> 
> 赞同：2
> 
> 时间：2013-01-30T11:15:14.730
> 
> 标签：php, rounding

这是我编写的 php，它与一些 wordpress 功能略有混合。

但是，我希望将所有值四舍五入到小数点后一位，但我无法弄清楚如何做到这一点——下面的 php 非常基础——但我无法计算出小数点的下一步。

```
<?php
$one_decimal_place = number_format(2.10, 1);
// AVERAGE DRINK COSTS 
$li2 = get_field('average_drinks_spenditure_per_night');
$li3 = ($li2 * 28) * 2.1;
$li4 = $li3 * 3;

// HOUSING COSTS 
$li22 = (get_field('average_housing_costs_per_week') * 4 );
$li33 = $li22 * 12;
$li44 = $li33 * 3;

// SHOPPING COSTS 
$li222 = (get_field('average_shopping_trip_price') * 2.25 );
$li333 = $li222 * 12;
$li444 = $li333 * 3;

// TUITION FEES 
$tuitionClass = (get_field('tuition_fees') /28 );
$tuitionTotal = (get_field('tuition_fees') * 3 );

// PHP TCE 
$totalcost2 = $li444 + $tuitionTotal;
$totalcost3 = $li4 + $li44;
$totalcost = $totalcost2 + $totalcost3; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:18:27.393

你试过函数[`round`](http://php.net/manual/en/function.round.php)？？

```
$test = 15.321321321;
echo round($test,1); 
```

结果：15.3；

如果你不想像我朋友说的那样四舍五入，应该尝试使用这个：

```
$test = 15.321321321;
echo round($test,1,PHP_ROUND_HALF_UP); 
```

结果：15.4

# ios - 从 NSObject 调用方法时 UIViewcontroller 中的 EXC_BAD_ACCESS

> ID：14602668
> 
> 赞同：0
> 
> 时间：2013-01-30T11:15:14.707
> 
> 标签：ios, delegates, nsobject

我有一个视图控制器（UserLogin），它调用`NSObject`类（custompop）中的一个方法。该方法返回一个 UIView 对象到`viewController`. `popupAction`在方法中，我添加一个按钮并在按钮单击时调用操作。视图控制器中的`popupAction`调用方法。我设置了所有的委托属性。

这是代码：

```
//**in viewcontroller.h**
#import "custompopup.h"
@interface UserLogin : UIViewController<customPopUpDelegate>
{
custompopup *obj_custompopup;//NSObject Class
}
-(void)handlePopUpAction;

//**in viewcontroller.m**
 - (void)viewDidLoad
{
    [super viewDidLoad];
   obj_custompopup = [[custompopup alloc] init];
  [obj_custompopup setDelegate:self];

 popupview = [[UIView alloc] init];
popupview = [obj_custompopup initwithTitleText:@"Title"  withdelegate:self];
[self.view addSubview:popupview];
}
 -(void)handlePopUpAction
{
  NSLog(@"Inside handlePopUpAction");
}

//**in NSObject.h**
@protocol customPopUpDelegate <NSObject>
-(void)handlePopUpAction;
@end
@interface custompopup : NSObject
{
id<customPopUpDelegate>delegate;
UIButton *First_Btn;
}
@property(retain)id delegate;

 //**in NSObject.m**
@synthesize delegate;
 -(UIView *)initwithTitleText:(NSString *)titleText  withdelegate:(id)del 
//returns uiview   to viewcontroller
{
self.delegate =del;
UIView *customView = [[UIView alloc] init];
customView.frame = CGRectMake(200, 100, 617,367);

First_Btn =[UIButton buttonWithType:UIButtonTypeRoundedRect];
First_Btn.frame=CGRectMake(20, 330,125,45);
 [First_Btn @"title" forState:UIControlStateNormal];
[First_Btn addTarget:self  action:@selector(popUpAction)       forControlEvents:UIControlEventTouchUpInside];
[customView addSubview:First_Btn];

return customView;
}

-(void)popUpAction
{
[[self delegate] handlePopUpAction];
} 
```

问题是编译器成功进入每个方法并在控制台中打印所有内容，直到最后一步。在视图控制器中完成最后一步后，`EXC_BAD_ACCESS`应用程序崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:20:09.980

您的 init 错误.. 没有得到您尝试执行的操作，但您返回 customView ，不保留自我，但您正在使用自我。

# ios - 如何在 XCode 中将图像和文本放在相同的布局中

> ID：14602670
> 
> 赞同：0
> 
> 时间：2013-01-30T11:15:16.527
> 
> 标签：ios, xcode, uiscrollview, uiimageview, uitextview

这是我的第一篇文章。如何将文本和图像添加到应用程序。我只制作了一个基于图像、文本和按钮的应用程序，并且已经为 android 制作了它，如下图所示。我现在正在尝试在 iOS 中执行此操作，但我无法在文本之后放置图像，然后再放置文本。

在 android 中，我能够将多个 ImageView 和 TextViews 放入滚动布局中，但我无法在 Storyboard Xcode 4.5/4.6 中执行此操作。

如果你能给我一些简单的想法来修复在 iPhone 和 iPad 的 Xcode 中重现相同样式的布局，那就太好了。我不熟悉Xcode，所以如果可以轻松解决这个问题，请您帮忙。

我希望能够制作一个包含许多文本行和图像的长滚动页面，正如您可能已经从下图中所理解的那样。

提前致谢

抱歉无法发布图片。可以再试一次或发布网站链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:52:48.633

1.  您需要创建一个 UIScrollView -> init UIScrollView with frame 并将其添加到您的应用程序中，设置滚动视图的内容大小。

2.  为文本创建 UILabel。-> 使用框架和文本初始化 UILabel，将其作为子视图添加到您的滚动视图中。

3.  为图像创建 UIImageView -> 使用框架和图像初始化 UIImageView，作为子视图添加到滚动视图中。

通常，如果您以编程方式进行操作，这就是全部。

一些代码（未经测试）：

```
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, width, height)];

UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 50, 100)];
label1.text = @"label1";
[scrollView addSubview:label1];

UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 100, 300, 500)];
imageView.image = [UIImage imageNamed:@"imagename.png"];
[scrollView addSubview:imageView];

scrollView.contentSize = CGSizeMake(scrollView.frame.size.width, label1.frame.size.height+imageView.frame.size.height);
[self.view addSubview:scrollView]; 
```

ps：如果你想用笔尖做，我可以为你找到一些捕捉。

# java - 应用引擎中无法将静态文件转换为资源文件以使http请求通过身份验证过滤器

> ID：14602673
> 
> 赞同：1
> 
> 时间：2013-01-30T11:15:21.950
> 
> 标签：java, google-app-engine, servlet-filters

我正在尝试对 html 文件的请求通过谷歌应用引擎部署中的过滤器。我的目标是通过将其排除为静态文件并根据以下建议使其成为资源文件来实现此目的：[https ://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/VbPYdkNhW98](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/VbPYdkNhW98)

不幸的是，我没有这样做。所以要么我误解了，这是不可能的，要么我做错了什么。任何人都可以对此有所了解吗？调用`localhost:8888/index.html`或`localhost:8888/app.html`不通过过滤器。

非常感激！

ps：所有`.html`文件都位于`/war/WWW-ROOT/`我的eclipse项目目录下。该过滤器非常适用于`/servlets/firstservlet`. 在这篇文章下方，您可以找到 和 的`web.xml`内容`appengine-web.xml`。

**Web.xml**

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- servlet definition and mapping -->

<servlet>
    <servlet-name>firstservlet</servlet-name>
    <servlet-class>zorgco.FirstServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>firstservlet</servlet-name>
    <url-pattern>/servlets/firstservlet</url-pattern>
</servlet-mapping>

<!-- enforce https -->

<security-constraint>
    <web-resource-collection>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>

<!-- define and enforce authentication filters -->

<filter>
    <filter-name>authorization</filter-name>
    <filter-class>zorgco.AuthorizationFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>authorization</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<static-files>
    <exclude path="/*" />
</static-files>

<resource-files>
    <include path="/*" />
</resource-files>

<!-- Define welcome files -->

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>
</web-app> 
```

**Appengine-web.xml**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<application>Name</application>

<version>1</version>

<threadsafe>true</threadsafe>

<public-root>/WWW-ROOT</public-root>

<system-properties> 
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
</system-properties>

<sessions-enabled>true</sessions-enabled> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:30:12.257

错误地将`static-files`and`resource-files`元素放在 web.xml 而不是 appengine-web.xml 中。移动它们解决了这个问题。

# javascript - 如何使网站看起来像 Windows Office 应用程序？

> ID：14602675
> 
> 赞同：-5
> 
> 时间：2013-01-30T11:15:26.570
> 
> 标签：javascript, html, css, coldfusion

我有一个简单的问题，我的 Google 搜索无法找到合适的答案。我完全了解如何使用 HTML、CSS 和 ColdFusion 设计网站，但它们总是看起来像一个普通的网站，顶部有公共导航栏、侧边栏，然后是一些主要内容。

然而，我也看到一些正在使用的软件看起来与 Windows Office 应用程序完全一样，即使它是通过浏览器交付的。我看到的那些用于 HR 和 CRM 应用程序，这些应用程序托管在云中并由公司通过 Internet 访问。它们的外观和感觉与 Microsoft Outlook 完全一样，具有相同的丰富功能，但实际上是一个网站。

所以我的问题是如何让网站看起来像 Windows 应用程序？你从哪里得到所有漂亮的图标、字体、配色方案、Javascript 来组合一个 Windows '主题'？您必须自己从头开始做所有事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:17:52.880

为此，您可以使用 extjs javascript 库

# java - 老 C++ 程序员，Java 新手，需要 Java 多线程和事件方面的帮助

> ID：14602676
> 
> 赞同：2
> 
> 时间：2013-01-30T11:15:34.803
> 
> 标签：java, multithreading, event-handling, thread-synchronization

我正在将使用串行端口的 C++ 程序（更准确地说是 Borland“组件”）“转换”为 Java。该程序使用一个线程来侦听串行端口，并在接收到给定的“事件字符”之一（它可能是回车、ACK、NACK ......）或当用户定义数量的字符被接收。

在尝试用 Java 转换它时，我学到了一些关于线程的知识，让它半工作。我仍然需要了解如何将事件从侦听线程引发到主线程......然后我了解到 Executors 的存在，这似乎是正确的方法，因为用户可以关闭、重新打开或更改多次使用端口并每次创建一个新线程似乎是一种不好的做法。

因此，在 Java 并发海中挣扎了好几天之前，在“原始”线程上花费了这么多工作之后，我会寻求建议，也许还有一点样本。

我应该使用什么样的对象（我看到有各种类型的执行器）来拥有一个串行侦听器：

*   能够向主线程抛出一个事件以传递接收到的字符数组
*   可以暂停和重新启动（并且可以在暂停时指向不同的输入流......我的意思是我可以在暂停时调用它的一些方法）
*   它会在不需要时被销毁（用户可以选择使用套接字，因此不再需要监听器）

? 我真的不知道其中一些点是否取决于我将选择的对象，所以我将它们全部列出，以避免再次重新做所有事情，因为我不清楚。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:44:48.147

如果您有一些主线程必须从其他线程接收事件（很像服务器套接字），那么一些[阻塞队列](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)可能是一种解决方案。主线程可以`takeLast`在循环中调用 - 这将暂停它，直到任何其他线程调用`putFirst`，为同一队列提供一个值。（[SynchronousQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)将停止提供线程，直到主线程准备好，或者[ArrayBlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html)支持给定大小的队列）。

通过这样的设置，主线程也不能是 GUI 线程。如果您需要从中触摸标签或按钮等界面组件，请使用[invokeAndWait 。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeAndWait)

```
 final BlockingQueue q = new ArrayBlockingQueue(3); 

 new Thread() {
    public void run() {
       while (have_some_messages()) { 
         q.putFirst("Hey!");
       }
    }
 }.start();

 new Thread() {
    public void run() {
       while (also_have_some_messages()) { 
         q.putFirst("Boo!");
       }
    }
 }.start();

 // Main thread will print both Hey and Boo:
 while (must_keep_running()) {
   Object serveIt = q.takeLast();
   System.out.println(serveIt);
 } 
```

如果主线程是 Swing 线程（您说带有 Swing 控件的 JFrame），请在此处添加一个按钮以启动服务线程：

```
Runnable service = new Runnable() {
  public void run() {
    try {
      while (must_keep_running()) {
    Object serveIt = q.takeLast();
    System.out.println(serveIt);
  }
} finally {
// Re-enable the start button when the service thread exits:
  SwingUtilities.invokeLater(new Runnable() {
        public void run() {
          bStart.setEnabled(true);
            }
          });
        };
      }
    };

 JButton bStart = new JButton("Start ..");
 bStart.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
         new Thread(service).start();
         bStart.setEnabled(false);
      }    
    }
 }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T11:21:14.500

我会基于一个可能带有一些静态（[同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)！）访问器的[单例来创建端口监听线程。](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)

在您的情况下，用于在线程之间进行通信的良好接口将是[侦听器/观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)- 它应该足够通用以解决您的问题。

由于您是 Java 初学者，因此提示：从无线程开始，只需使用非阻塞 IO。然后 - 只有在一切正常之后 - 考虑使用多个线程。并且只有在您遇到性能问题时才这样做。

# spring - 从视图中的 postgres 访问 Lob 属性

> ID：14602679
> 
> 赞同：0
> 
> 时间：2013-01-30T11:15:39.630
> 
> 标签：spring, hibernate, postgresql, view, lob

我有一个标准的 Spring Framework (v3.1.2) java (v1.6) 数据库支持 (postgres v9.1) Web 应用程序，它在 Apache Tomcat (v6.0) 上运行。请注意，我使用的是 Hibernate 3.6.10.Final 和 Spring Data JPA 1.2.0.RELEASE。

我有两个数据库实体类——Chapter 和 ChapterText——它们之间是一对一的关系......

```
@Entity @Table(name="chapter")
public class Chapter implements Comparator<Chapter> {

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="CHAPTER_SEQ")
    @SequenceGenerator(name="CHAPTER_SEQ", sequenceName="chapter_seq", allocationSize=1)
    @Column(name="id")
    private Long id;

    @OneToOne(cascade=CascadeType.ALL, optional=false, fetch=FetchType.LAZY, orphanRemoval=true) @PrimaryKeyJoinColumn
    private ChapterText chapterText;

    // other properties plus setters and getters
}

@Entity @Table(name="chapterText")
public class ChapterText {

    @Id
    @GeneratedValue(generator="foreign")
    @GenericGenerator(name="foreign", strategy="foreign", parameters={ @Parameter(name="property", value="parent") })
    @Column(name="id")
    private Long id;

    @OneToOne(mappedBy="chapterText", optional=false)
    private Chapter parent;

    @Column(name="body") @Lob
    private String body;

    // setters and getters
} 
```

现在，由于 ChapterText 包含一个 @Lob 属性，它可能包含大量文本，我已经在 Chapter 类中标记了 chapterText 属性，以便它可以延迟加载。

我已经设置和配置了 OpenEntityManagerInViewFilter，所以我可以向模型添加一个章节实体（名称为“章节”），然后在我的 JSPX 文件中我应该能够做到这一点......

```
${chapter.chapterText.body} 
```

这应该延迟加载 ChapterText 实体并在为调用浏览器生成的 XHTML 页面中包含 body 属性的值。

这是从数据库中显示信息的一种完全标准的方式，我已经使用了多年。然而，这是我第一次不得不在 Postgres 中使用 @Lob 属性。当我这样做时，我会看到以下堆栈跟踪...

```
org.apache.jasper.JasperException: javax.servlet.ServletException: javax.servlet.jsp.JspException: javax.servlet.jsp.JspException: javax.el.ELException: Error reading 'body' on type project.vo.db.ChapterText_$$_javassist_5
.
.
.
javax.servlet.ServletException: javax.servlet.jsp.JspException: javax.servlet.jsp.JspException: javax.el.ELException: Error reading 'body' on type project.vo.db.ChapterText_$$_javassist_5
.
.
.
javax.servlet.jsp.JspException: javax.el.ELException: Error reading 'body' on type project.vo.db.ChapterText_$$_javassist_5
.
.
.
javax.el.ELException: Error reading 'body' on type project.vo.db.ChapterText_$$_javassist_5
.
.
.
org.hibernate.exception.GenericJDBCException: could not load an entity: [project.vo.db.ChapterText#1]
.
.
.
org.postgresql.util.PSQLException: Large Objects may not be used in auto-commit mode. 
```

据我所知，Posgres 需要通过将自动提交设置为 false 的事务来访问要访问的大对象。

烦人的是，我能想到的唯一解决方法是创建一个存储库方法，该方法获取@Lob 属性，用@Transactional 标记它并将值加载到专门为显示目的而创建的bean 中。虽然这确实有效，但似乎有点不雅。

有没有人对替代方法有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:37:04.207

首先，我认为您可能需要重新考虑您的设计。如果文本小于 1GB，并且您不必在其中查找，那么使用文本字段可能比使用 LOB 更好。这样更容易处理和管理。如果数据在每行 1GB 到 2GB 之间，您可能需要使用 a `LOB`due to size。如果您需要能够查询、分块（即按偏移量查找），那么 LOB 是合适的。如果这些都不合适，`TEXT`并且`BYTEA`领域是优选的。请注意，PostgreSQL 会自动将大属性移动到辅助存储中，因此您不会因为拥有大量内联数据而使扫描速度变慢（基本上，任何超过 4kb 的数据都必须移动到辅助存储中）所以如果这是您的问题，那么我不会担心它。TEXT 字段更易于管理，因此它们将是我的首选。同样对于文本数据，除非您进行分块，否则 LOB 的编码会使它们对网络流量的影响比 TEXT 字段更差。

现在，如果这是不可接受的，您可以使用`lo_read()`阅读并在您的视图中`lob`呈现为 a 。`bytea`

# eclipse - 嵌入 groovy：CompilerConfiguration.setScriptBaseClass 不起作用

> ID：14602683
> 
> 赞同：2
> 
> 时间：2013-01-30T11:15:57.640
> 
> 标签：eclipse, groovy

我正在尝试运行为我的嵌入式 groovy 表达式设置基类的基本示例。测试取自[http://groovy.codehaus.org/Embedding+Groovy](http://groovy.codehaus.org/Embedding+Groovy)

```
class ScriptBaseTest {

  @Test
  void extend_groovy_script() {
    def compiler = new CompilerConfiguration()
    compiler.setScriptBaseClass("ScriptBaseTestScript")

    def shell = new GroovyShell(this.class.classLoader, new Binding(), compiler)

    assertEquals shell.evaluate("foo()"), "this is foo"
  }
}

abstract class ScriptBaseTestScript extends Script {
  def foo() {
    "this is foo"
  }
} 
```

如果我将它作为 JUnit 测试运行（在 Eclipse 中），我会得到以下堆栈跟踪：

```
groovy.lang.MissingMethodException: No signature of method: Script1.foo() is applicable for argument types: () values: []
Possible solutions: run(), run(), find(), any(), use([Ljava.lang.Object;), find(groovy.lang.Closure)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:55)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:78)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:137)
    at Script1.run(Script1.groovy:1)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:518)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:556)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:527)
    at groovy.lang.GroovyShell$evaluate.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at ScriptBaseTest.extend_groovy_script(ScriptBaseTest.groovy:13)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

所以这看起来有些不对劲；）有什么技巧可以让它发挥作用吗？

我使用 Groovy Eclipse 插件 2.7.2.xx-RELEASE-20121219-0800-e42 在 Eclipse Juno、Java 1.7 中运行它。Groovy 编译器设置为 2.0.6。

更新：当我在命令行上运行它时工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T15:01:15.793

当我尝试使用 GroovyScriptEngine 时，我遇到了同样的问题。通过初始化

```
 CompilerConfiguration compilerConfiguration = new CompilerConfiguration();
    compilerConfiguration.setScriptBaseClass(DSLScriptBase.class.getName());

    GroovyScriptEngine gse = new GroovyScriptEngine(roots, compilerConfiguration); 
```

没用。未使用自定义脚本基类。

我更改了代码以预先使用编译器配置创建一个`GroovyClassLoader`，并将此类加载器用作父类加载器。这似乎有效。

```
 CompilerConfiguration compilerConfiguration = new CompilerConfiguration();
    compilerConfiguration.setScriptBaseClass(DSLScriptBase.class.getName());
    GroovyClassLoader scriptClassLoader = new GroovyClassLoader(DSLEngine.class.getClassLoader(), compilerConfiguration);

    GroovyScriptEngine gse = new GroovyScriptEngine(roots, scriptClassLoader); 
```

有人（也许是你？）将它发布到[http://groovy-eclipse-plugin.42567.n3.nabble.com/setScriptBaseClass-not-working-inside-eclipse-td4025243.html的 eclipse groovy 插件邮件列表](http://groovy-eclipse-plugin.42567.n3.nabble.com/setScriptBaseClass-not-working-inside-eclipse-td4025243.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:29:02.540

`setScriptBaseClass()`需要完全限定的名称（即`java.lang.String`，而不是 just `String`）。

为了让您的生活更轻松，请使用以下代码：

```
compiler.setScriptBaseClass(ScriptBaseTestScript.class.getName()); 
```

此外，基类不能是`abstract`.

# google-docs-api - 文档编辑器和查看器工具，用于在 webapp 的同一位置查看、编辑和保存文档

> ID：14602685
> 
> 赞同：0
> 
> 时间：2013-01-30T11:16:02.173
> 
> 标签：google-docs-api

在我们的 Web 应用程序产品中，我们想要查看和编辑 word、excel 和 pdf 文件并保存到 Web 应用程序服务器位置。文件列表将在网格中列出相同的文件必须编辑和保存

请帮助我们解决任何问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:00:23.663

我建议你看看 zoho 远程 api 编辑器......虽然它们不能满足你的所有要求，但它们是唯一一个在在线文档编辑器技术中提供这种独特解决方案的人......

请找到以下链接

[https://apihelp.wiki.zoho.com/Remote-API-Overview.html](https://apihelp.wiki.zoho.com/Remote-API-Overview.html)

# jquery - 不是 jQuery 插件脚本中的函数

> ID：14602688
> 
> 赞同：0
> 
> 时间：2013-01-30T11:16:17.143
> 
> 标签：jquery, jquery-ui, jquery-plugins

我在应用程序中嵌入了这个 jquery 代码...我只是不确定为什么会遇到错误

```
$().toggleField() is not a function 
```

在浏览器中。我检查了 jQuery 和 jQueryUI 是否已加载，但我不确定为什么会遇到此类错误。

```
(function ($) {
    $.widget("ui.toggleField", {/*more code*/});
})(jQuery);

$(document).ready(function() {
    $(".data").toggleField();
}); 
```

## 更新

代码几乎是这样的。因为它有更多信息，所以为了清楚起见，我对其进行了编辑

```
(function ($) {
    $.widget("ui.toggleField", {
        options: {
            /*More Options*/
        },
        _create: function () {
           /* More Code */
        },
        expand: function(animate) {
            /* More Code */
        },
        collapse: function(animate) {
            /* More Code */
        }
    });

})(jQuery);

$(document).ready(function() {
    $(".data").toggleField();
}); 
```

..这是某人创建的自定义插件。我只是想将它集成到我的 html 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:25:43.173

您显示的代码运行良好。

看到这个：http: [//jsfiddle.net/qqqJJ/](http://jsfiddle.net/qqqJJ/)

问题似乎出在您的`_create`方法中。

# sorting - Neo4j - Gremlin - 如何对 .groupCount.cap() 返回的结果进行排序

> ID：14602689
> 
> 赞同：1
> 
> 时间：2013-01-30T11:16:27.733
> 
> 标签：sorting, neo4j, gremlin

我有一个问题。这个查询：

```
g.V.filter{it.type == 'user'}.outE.filter{it.label == 'follow'}.outV.groupCount().cap() 
```

返回哈希映射

```
{v[1]=1, v[138]=3, v[140]=3, v[6]=1, v[203]=1, v[619]=7, v[131]=1, v[10]=4, v[192]=1, ...} 
```

如何订购？输出需要为 v[619]=7, v[10]=4,, v[138]=3, v[140]=3, ...

```
g.V.filter{it.type == 'user'}.outE.filter{it.label == 'follow'}.outV.groupCount().cap().sort{-it.value} not working 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:43:46.357

您必须将地图从 cap() 中移出。这是来自 gremlin 终端的示例：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> g.V.in.groupCount.cap().sort{-it.value}
==>{v[1]=3, v[6]=1, v[4]=2}
gremlin> g.V.in.groupCount.cap().next().sort{-it.value}
==>v[1]=3
==>v[4]=2
==>v[6]=1 
```

# sql - 创建特定历史日期表oracle sql

> ID：14602690
> 
> 赞同：2
> 
> 时间：2013-01-30T11:16:35.813
> 
> 标签：sql, oracle, oracle10g, date-arithmetic

我正在尝试为过去一年中的每个月创建一个包含该月第三个星期五的表格。我知道如何一次做一个月，但在返回一系列日期时遇到了麻烦。我尝试使用 for 循环来做到这一点：

```
create table fridays as
begin
 for i in 1..365
   loop
     select next_day(trunc(sysdate - i,'MM')+13,'FRIDAY') third_friday 
  from dual
end loop; 
```

我是否需要有一个数组来将这些值放入或者我在其他地方出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:40:31.357

你的意思是这样的吗？

```
select dt
  from (select dt,
               row_number() over(partition by to_char(dt, 'mm') order by dt) wn
          from (select trunc(sysdate, 'mm') - level dt
                  from dual
                connect by level < 365)
         where to_char(dt, 'd') = 6)
 where wn = 3 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/6718)

* * *

**更新**参考@APC的评论：

如果您不想依赖 NLS_TERRITORY 那么您可以执行以下操作：

```
select dt
  from (select dt,
               row_number() over(partition by to_char(dt, 'mm') order by dt) wn
          from (select trunc(sysdate, 'mm') - level dt
                  from dual
                connect by level < 365)
         where to_char(dt, 'dy', 'nls_date_language=AMERICAN') = 'fri')
 where wn = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:18:24.817

这是一个有点笨拙但最直观的方法：

```
select next_day(
         next_day(
           next_day(
             add_months(date '2000-01-01',rownum-1)-1,
             'THURSDAY'),
           'THURSDAY'),
       'THURSDAY')
from    dual
connect by level <= 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:05:21.517

[对于这些棘手的相对日期问题，一种方便的技术是使用 DBMS_Schedular 日历语法，我在此处](http://oraclesponge.wordpress.com/2010/08/18/generating-lists-of-dates-in-oracle-the-dbms_scheduler-way/)和[此处](http://oraclesponge.wordpress.com/2010/08/20/listing-dbms_scheduler-named-calendar-dates-with-sql/)写过。

DBMS_Scheduler 具有非常全面的日历语法，非常适合复杂的日历规范（一旦您习惯了它），并且 Evaluate_Calendar_String 函数返回在提供的日期之后满足计划规范的下一个时间戳。

这是代码：

```
 create or replace type timestamp_table_type
    is
    table of timestamp;
    /

    create or replace function
     list_of_dates (
       calendar_string varchar2,
       start_date      TIMESTAMP WITH TIME ZONE,
       stop_date       TIMESTAMP WITH TIME ZONE)
    return
      timestamp_table_type
    pipelined
    is
      l_return_date_after TIMESTAMP WITH TIME ZONE := start_date - interval '1' second;
      l_next_run_date     TIMESTAMP WITH TIME ZONE;
    begin
      loop
        DBMS_SCHEDULER.EVALUATE_CALENDAR_STRING(  
          calendar_string   => list_of_dates.calendar_string,
          start_date        => list_of_dates.start_date,
          return_date_after => l_return_date_after,
          next_run_date     => l_next_run_date);
          exit when list_of_dates.l_next_run_date > coalesce(list_of_dates.stop_date,date '9999-12-31');
          pipe row (list_of_dates.l_next_run_date);
          list_of_dates.l_return_date_after    := list_of_dates.l_next_run_date;
     end loop;
    end;
    / 
```

我认为每个月的第三个星期五是：

```
 begin
     dbms_scheduler.create_schedule(
     schedule_name => 'THIRD_THU_OF_EVERY_MONTH',
     repeat_interval => 'FREQ=MONTHLY;BYDAY=5;BYSETPOS=3');
    end;
    /

    select *
    from   table(
      list_of_dates(
        'THIRD_THU_OF_EVERY_MONTH',
        sysdate    ,
        null)); 
```

不幸的是，恐怕我没有方便的 Oracle 系统来测试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:17:53.557

这是另一个：

```
Select Months, Last_Fri, Total_Fridays
    , (CASE WHEN Total_Fridays = 4 THEN Last_Fri-7 ELSE Last_Fri-14 END) third_fri
 From
 (
  Select To_Char(dt,'Month') Months
       , Next_Day(Last_Day(dt),'FRI')-7 Last_Fri
      , Ceil(to_number(to_char(next_day(last_day(dt)-7,'FRI'),'DD'))/7) Total_Fridays
   From 
 (
  Select add_months(trunc(sysdate,'YEAR'),level-1) dt
   From dual
 Connect By Level <= 12
 ))
/

SQL>
MONTHS  LAST_FRI    TOTAL_FRIDAYS   THIRD_FRI
--------------------------------------------------
January     1/25/2013   4   1/18/2013
February    2/22/2013   4   2/15/2013
March       3/29/2013   5   3/15/2013
April       4/26/2013   4   4/19/2013
May         5/31/2013   5   5/17/2013
June        6/28/2013   4   6/21/2013
July        7/26/2013   4   7/19/2013
August      8/30/2013   5   8/16/2013
September   9/27/2013   4   9/20/2013
October     10/25/2013  4   10/18/2013
November    11/29/2013  5   11/15/2013
December    12/27/2013  4   12/20/2013 
```

# java - 在外部 Java GUI 中跟踪事件

> ID：14602692
> 
> 赞同：0
> 
> 时间：2013-01-30T11:16:44.060
> 
> 标签：java, events, accessibility-api

有没有办法从外部 Java 桌面应用程序中检索事件信息和 UI 元素数据？具体来说，我需要记录特定文本框的值何时发生变化并从其他几个输入元素中检索数据。

这是针对客户的概念验证项目（不是恶意软件；-)）。

Java 应用程序已存在，无法添加或重新编译。可以使用 .NET 或 Java 构建“监听”应用程序。我发现了一些关于 Windows 事件挂钩和 Java Accessibility API 的有限信息，但遇到了障碍，主要是因为我缺乏知识。

我不知道这是否容易做到 - 想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:35:06.627

请参阅此链接：

[外部键侦听器](https://stackoverflow.com/questions/14595583/pause-thread-execution-and-resume-based-on-user-input/14595735#14595735)

您可以收听 preionamentos 键，在同一个 API 中，您可以在 monento 中捕获活动窗口标题，以确保应用程序是预期的，从而触发内部事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:24:34.627

我想到的一种解决方案是编写一个包装现有程序的 Java 程序。

假设原始程序分布在单个 .jar 中。然后，您将编写一个 Java 类，使用此 jar 作为依赖项进行编译，使用此 jar 在类路径中运行，并包含一个`main`调用`main`该 jar 函数的函数。

```
public class WrapMyApp {
    public static void main(String[] args) {
        com.myorg.MyApp.main(args);
    }
} 
```

因此，使用这种技术，您可以控制 JVM，并且可以在调用`main`.

您可以使用什么技巧从 GUI 中检索一些信息？好吧，如果你幸运的话，也许你可以尝试通过反射 API 访问 GUI 组件。另一种解决方案是遍历 GUI，从`JFrame`. 这意味着 GUI 布局是预先知道的，并且它是足够静态的。例子 ：

```
 JWindow w = (JWindow) Window.getWindows()[0];
    JPanel p = (JPanel) w.getContentPane().getComponent(2);
    JTextArea t = (JTextArea) p.getComponent(5);
    String s = t.getText(); 
```

您可以使用[SwingExplorer](http://www.swingexplorer.com)之类的工具来探索 GUI 布局，以便发现组件所在的位置。

如果这不起作用，您可以尝试挂钩到 EventQueue，监听关键事件：

```
 Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {

        public void eventDispatched(AWTEvent event) {
            // useful code here
        }
    }, AWTEvent.KEY_EVENT_MASK); 
```

`SwingUtilities.invokeLater()`尝试访问 GUI 组件时，不要忘记将代码包装在, 中。

# android - 第一个android应用程序有问题

> ID：14602693
> 
> 赞同：0
> 
> 时间：2013-01-30T11:16:46.833
> 
> 标签：android

我遵循谷歌上的开发者指南，并尝试创建一个应用程序，目前只有 1 个活动。它没有太多，只有很少的项目，而且这个类的功能几乎是空的，但是当我激活它时它会崩溃。清单是这样的：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.remoteswitch"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.remoteswitch.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我的活动类文件是这样的：

```
package com.example.remoteswitch;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.CheckBox;
import android.widget.SeekBar;
import android.widget.TextView;

public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.remoteswitch.MESSAGE";
    int maxTime = 90;
    CheckBox checkbox = (CheckBox) findViewById(R.id.timerCB);
    SeekBar timebar = (SeekBar)findViewById(R.id.timerTime);
    TextView statText = (TextView)findViewById(R.id.statusText);
    TextView timerText = (TextView)findViewById(R.id.timerText);

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        timebar.setEnabled(false);
        timebar.setMax(maxTime);

    }

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void activateTimer(View view) {
        // Do something in response to button
        //Intent intent = new Intent(this, DisplayMessageActivity.class);

        if (checkbox.isChecked())
            timebar.setEnabled(true);

    }

    public void startBoiler(View view) {
        // Do something in response to button
        //Intent intent = new Intent(this, SecondActivity.class);
        //intent.putExtra(EXTRA_MESSAGE,"Hi");
        //startActivity(intent);
    }
} 
```

我的下一步是添加另一个活动，但我只是想看看它是否基本正常工作.. logcat 是这样的：

```
01-30 11:03:28.477: E/AndroidRuntime(1539): FATAL EXCEPTION: main
01-30 11:03:28.477: E/AndroidRuntime(1539): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.remoteswitch/com.example.remoteswitch.MainActivity}: java.lang.NullPointerException
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.os.Looper.loop(Looper.java:137)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at java.lang.reflect.Method.invokeNative(Native Method)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at java.lang.reflect.Method.invoke(Method.java:511)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at dalvik.system.NativeStart.main(Native Method)
01-30 11:03:28.477: E/AndroidRuntime(1539): Caused by: java.lang.NullPointerException
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.Activity.findViewById(Activity.java:1839)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at com.example.remoteswitch.MainActivity.<init>(MainActivity.java:15)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at java.lang.Class.newInstanceImpl(Native Method)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at java.lang.Class.newInstance(Class.java:1319)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
01-30 11:03:28.477: E/AndroidRuntime(1539):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 
```

谁能帮我找出我的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:19:27.973

```
public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.remoteswitch.MESSAGE";
int maxTime = 90;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    CheckBox checkbox = (CheckBox) findViewById(R.id.timerCB);
    SeekBar timebar = (SeekBar)findViewById(R.id.timerTime);
    TextView statText = (TextView)findViewById(R.id.statusText);
    TextView timerText = (TextView)findViewById(R.id.timerText);
    timebar.setEnabled(false);
    timebar.setMax(maxTime);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:19:29.670

put that lines of code

```
CheckBox checkbox = (CheckBox) findViewById(R.id.timerCB);
SeekBar timebar = (SeekBar)findViewById(R.id.timerTime);
TextView statText = (TextView)findViewById(R.id.statusText);
TextView timerText = (TextView)findViewById(R.id.timerText); 
```

in you onCreate method and after the line

```
setContentView(R.layout.activity_main); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:20:26.080

仅在设置内容视图后尝试使用 findViewById()，即：

```
setContentView(R.layout.activity_main); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:20:27.890

在调用 setContentView(); 之前，您正在投射所有小部件；

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.remoteswitch.MESSAGE";
    int maxTime = 90;
    CheckBox checkbox = (CheckBox) findViewById(R.id.timerCB);
    SeekBar timebar = (SeekBar)findViewById(R.id.timerTime);
    TextView statText = (TextView)findViewById(R.id.statusText);
    TextView timerText = (TextView)findViewById(R.id.timerText);

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        timebar.setEnabled(false);
        timebar.setMax(maxTime);

    } 
```

将您的代码更改为：

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.remoteswitch.MESSAGE";
    int maxTime = 90;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        CheckBox checkbox = (CheckBox) findViewById(R.id.timerCB);
        SeekBar timebar = (SeekBar)findViewById(R.id.timerTime);
        TextView statText = (TextView)findViewById(R.id.statusText);
        TextView timerText = (TextView)findViewById(R.id.timerText);

        timebar.setEnabled(false);
        timebar.setMax(maxTime);

    } 
```

如果不调用`setContentView(R.layout.activity_main);`，`Activity`将无法将您的小部件转换*映射*到您已在其中声明它们的布局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T11:21:04.720

改变

```
 android:name="com.example.remoteswitch.MainActivity" 
```

至

```
 android:name=".MainActivity" 
```

并在 setContentView(...) 之后将这些写入 onCreate

```
 CheckBox checkbox = (CheckBox) findViewById(R.id.timerCB);
 SeekBar timebar = (SeekBar)findViewById(R.id.timerTime);
 TextView statText = (TextView)findViewById(R.id.statusText);
 TextView timerText = (TextView)findViewById(R.id.timerText); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:22:43.393

将 findinf 视图的代码移至 OnCreate：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    timebar = (SeekBar)findViewById(R.id.timerTime);
    timebar.setEnabled(false);
    timebar.setMax(maxTime);

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T11:23:40.757

尝试这个

```
CheckBox checkbox ;
SeekBar timebar ;
TextView statText ;
TextView timerText;

protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

   setContentView(R.layout.activity_main);

   checkbox = (CheckBox) findViewById(R.id.timerCB);
   timebar = (SeekBar)findViewById(R.id.timerTime);
   statText = (TextView)findViewById(R.id.statusText);
   timerText = (TextView)findViewById(R.id.timerText);

   //You can also use this approach , in this case avoid the global declaration of   widgets
   /*
    CheckBox checkbox = (CheckBox) findViewById(R.id.timerCB);
    SeekBar timebar = (SeekBar)findViewById(R.id.timerTime);
    TextView statText = (TextView)findViewById(R.id.statusText);
    TextView timerText = (TextView)findViewById(R.id.timerText);
   */

    timebar.setEnabled(false);
    timebar.setMax(maxTime);

} 
```

您必须首先指定用于活动的布局。然后铸造它的组件

# c# - 如何优化我的 ExecuteInParallel 函数

> ID：14602699
> 
> 赞同：0
> 
> 时间：2013-01-30T11:17:24.880
> 
> 标签：c#, multithreading, task-parallel-library

我已经阅读了很多关于 Parallel .net 4 的内容，我不得不说我有点困惑何时使用它。

这是我的常见场景，我被赋予了将大量 xml 文件迁移到数据库的任务。

我通常必须

1.  阅读 Xml 文件 (100.000) 和更多文件并按数字顺序排列它们（每个文件命名为 1.xml、2.xml 等）。
2.  保存到数据库。

我认为上面是并行编程的完美候选者。

从概念上讲，我想一次处理许多文件。

我目前正在这样做：

```
private ResultEventArgs  progressResults=new ResultEventArgs();

public void ExecuteInParallelTest()
{
    var sw=new Stopwatch();
    sw.Start();
    int index = 0;
    cancelToken = new CancellationTokenSource();
    var parOpts = new ParallelOptions();
    parOpts.CancellationToken = cancelToken.Token;
    parOpts.MaxDegreeOfParallelism = Environment.ProcessorCount;  //It this correct?

    FileInfo[] files = myDirectory.EnumerateFiles("*.xml").ToArray();//Is this faster?
    TotalFiles = files.Count();
    try
    {
        Task t1 = Task.Factory.StartNew(() =>
        {
            try
            {
                Parallel.ForEach(files, parOpts, (file, loopState) =>
                {

                    if (cancelToken.Token.IsCancellationRequested)
                    {
                        cancelToken.Token.ThrowIfCancellationRequested();
                    }

                    index = Interlocked.Increment(ref index);

                    ProcessFile(file,index);

                                progressResults.Status=InProgress                                   

                    OnItemProcessed(TotalFiles,index,etc..);
                });
            }
            catch (OperationCanceledException ex)
            {
                OnOperationCancelled(new progressResults
                    {
                        progressResults.Status=InProgress                               
                        progressResults.TotalCount = TotalFiles;
                        progressResults.FileProcessed= index;
                        //etc..                                  
                    });

            }

            //ContinueWith is used to sync the UI when task completed.
        }, cancelToken.Token).ContinueWith((result) => OnOperationCompleted(new ProcessResultEventArgs
            {
                        progressResults.Status=InProgress
                        progressResults.TotalCount = TotalFiles;
                        progressResults.FileProcessed= index;
                        //etc..
            }), new CancellationTokenSource().Token, TaskContinuationOptions.None, TaskScheduler.FromCurrentSynchronizationContext());
    }
    catch (AggregateException ae)
    {
        //TODO:
    }
   } 
```

我的问题：我正在使用 .net 4.0 使用 Parallel 是加快处理这些文件的最佳/更简单的方法。上面的伪代码是否足够好，或者我错过了重要的东西，锁定等......

最重要的问题是：忘记“ProcessFile”，因为我无法对其进行优化，因为我无法控制是否有优化空间

我是否应该将文件分成块，例如 1-1000 - 1001-2000-2001-3000 会提高性能（你是如何做到的）

非常感谢任何可以帮助我更好地理解如何改进上述代码的回复或链接/代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:18:33.007

您没有收到回复的原因是您的代码非常错误。AsParallel() 对 GetFiles() 没有任何作用，files.Count() 实际上会迭代可枚举，因此不仅您读取文件（或只是目录）两次，而且先执行 Count()，然后再遍历它们将读取文件两次，如果目录被修改，可能会产生不一致的计数。看起来没有必要执行 Task.Factory.StartNew ，因为它是您唯一的任务（在其中产生并行处理）。Parallel.ForEach 会将所有 OperationCancelledException 封装到单个 AggregateException 中，但只有在所有并行线程完成工作后才会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:10:06.493

我留下了代码，因为没有人为我提供合适的答案

# c# - 使非空类可以为空

> ID：14602701
> 
> 赞同：1
> 
> 时间：2013-01-30T11:17:29.213
> 
> 标签：c#, datetime

> **可能重复：**
> [日期时间“空”值](https://stackoverflow.com/questions/221732/datetime-null-value)

C# 中有许多不可为 Null 的内置类。例如，日期时间，有时我想检查我的数据时间对象是否为空，但我不允许。如何将可空性插入到 datetime 类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:18:19.950

> C# 中有许多不可为 Null 的内置类。

它们（`Datetime`）是值[类型的](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)**结构**，而不是类，因此不可为空。

[MSDN - 值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)

> 与引用类型不同，值类型不能包含空值。但是，[可空类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)功能确实允许将值类型分配给空。

您可以使用[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)with`DateTime`使其可以为空。

```
DateTime? dateTimeObject = null; 
```

问号使其可以为空`?`。`DateTime`

> 语法 T? 是 Nullable 的简写，其中 T 是值类型。这两种形式可以互换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T11:25:05.060

简而言之，结构是值类型。值类型必须始终有效（因此必须初始化结构构造函数中的所有成员）并且不能为空。

然而，有一个作弊；

您可以使用`Nullable<T>`, 否则可用于`"T?"`将值类型包装在可以为空的引用中。

用法：

```
DateTime? foo = new DateTime(...);

foo.Value.<datetime member> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T11:18:14.713

使用就足够了`?`，比如

```
DateTime? dt = null; 
```

所以你的*不可*为空的类型变成了[可空的类型](http://msdn.microsoft.com/en-us/library/vstudio/1t3y8s4s.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T11:19:24.183

`?`您可以在类型末尾添加字符：

```
DateTime? date; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T11:27:10.493

当然，您可以通过更改声明使整数、双精度、日期时间等为空。

```
DateTime? dt = null. 
```

但

您需要注意两件事。

1）日期时间？和 DateTime 不是相同的数据类型，因此，如果您执行以下操作：

```
DateTime? date1 = null;
date1 = DateTime.Now;

DateTime date2 = date1; // Wont work. 
```

访问可为空类型的值的正确方法是这样的：

```
DateTime date2 = date1.Value; 
```

2）第二个但是，您需要始终检查是否有值，然后才能使用它。

```
DateTime? date1 = null;
DateTime date2 = date1.Value; 
```

这将抛出一个异常，“可空对象必须有一个值”。

所以并不是添加可空运算符那么简单，每次要使用变量时都需要检查属性“HasValue”：

```
DateTime? date1 = DateTime.Now;
if(date1.HasValue)
{
    DateTime date2 = date1.Value;
} 
```

明智地使用可空值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T11:18:44.423

严格来说，`DateTime`是 a `struct`（即*value-types*），而不是 a `class`（它们是引用类型），这就是它不可为空的原因。`Nullable<DateTime>`, aka`DateTime?` *是可以为*空的，但是。`Nullable<T>`是编译器对它进行了特殊处理，使其在, (via ) 和大多数其他操作（通过所谓的“提升运算符”）`struct`方面的工作方式与您期望的非常相似。`==``!=``.HasValue`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-30T11:18:52.463

`DateTime`是一个`struct`，所以它是[*`value types`*](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)。值类型不能是`null`. 除非您可以使用[*`nullable types`*](http://msdn.microsoft.com/en-us/library/vstudio/1t3y8s4s.aspx)for`DateTime`或其他值类型；

> Nullable 类型是 System.Nullable 结构的实例。可空类型可以表示其基础值类型的正确值范围，**外加一个额外的空值**。

*可空类型*用问号表示`?`。例如;

```
DateTime? date = null; 
```

`DateTime?`顺便说一句，相当于`System.Nullable<DateTime>`。

如果你使用 nullable `DateTime`，你可以检查它是否有值；

```
if(date.HasValue == true) 
```

当然，您可以将它们与等式运算符一起使用，例如`==`and`!=`

# mysql - MySQL #1054 - Unknown column

> ID：14602703
> 
> 赞同：0
> 
> 时间：2013-01-30T11:17:40.913
> 
> 标签：mysql, joomla, mysql-error-1054

I want to execute this SQL query:

```
SELECT * FROM  `wcf1_user` WHERE  `lastActivityTime` < 1343642175 
```

But I receive this error:

```
#1054 - Unknown column '1343642175' in 'where clause' 
```

But this makes absolutely no sense. 1343642175 isn't my column, lastActivityTime is it.

I tried it in phpMyAdmin like this: [phpmyadmin](http://bildupload.sro.at/a/images/phpmyadmin.jpg)

![enter image description here](../Images/6771101541e15e89ad62740403bc951a.png)

The error is the same.

Any ideas?

Here is my full code:

```
$date = strtotime("-1 month");
$db = & JDatabase::getInstance( $option );
$query = $db->getQuery(true);
$query ->select('userID, username, email, lastActivityTime')
       ->from('wcf1_user')
       ->where('lastActivityTime < '.(int) $date);
$db->setQuery($query);
$result=$db->loadObjectList(); 
```

Note: that this is made inside a joomla component

EDIT:

Now it works fine, I haven't done anything to my code. I just restarted my Computer. I don't know what caused this error, but now it's gone.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:38:33.727

您的查询运行良好，也许您提供的代码不完整。

在这里看[**演示**](http://sqlfiddle.com/#!2/b13ab/1)

编辑。

```
 $date=strtotime("-1 month");
   $db = & JDatabase::getInstance( $option );
   $query = $db->getQuery(true); 
   $query ->select('userID, username, email, lastActivityTime');
   $query->from('wcf1_user');
   $query->where('lastActivityTime < '.(int) $date); 
   $db->setQuery($query);
   $result=$db->loadObjectList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:24:34.907

您使用的数字不是数字。它包含奇怪的字符。尝试手动输入数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:23:20.980

尝试使用以下内容：

```
$date = strtotime("-1 month");
$db = JDatabase::getDBO();
$query = $db->getQuery(true);
$query ->select('userID, username, email, lastActivityTime')
       ->from('#__user')
       ->where('lastActivityTime < '.(int) $date);
$db->setQuery($query);
$result=$db->loadObjectList(); 
```

使用 Joomla，表格有一个全局前缀，即`#__`

希望这可以帮助

# android - Adding GridView dynamically

> ID：14602706
> 
> 赞同：0
> 
> 时间：2013-01-30T11:17:53.243
> 
> 标签：android, android-widget

I want to show data in tabular form. But the problem is that the number of tables shown on the activity will be dynamic. Lets say there are 4 users in database, I'll be showing 4 tables each one containing data of one user.

I have tried to programmatically add table to my LinearLayout. But absolutely nothing is shown on the page. Here is the code that I am using for table:

```
TableRow tr = new TableRow( this );
tr.setLayoutParams(newTableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,TableLayout.LayoutParams.WRAP_CONTENT));

/* Create a Button to be the row-content. */
Button b = new Button( this );
b.setText("Dynamic Button");
b.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));

/* Add Button to row. */
tr.addView(b);

/* Add row to TableLayout. */
TableLayout tl = new TableLayout(getActivity());
tl.addView(tr,new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));

LinearLayout linearLayout = (LinearLayout)getActivity().findViewById(R.id.RelativeLayout_schoolAssignments);
linearLayout.addView(tl); 
```

I also considered using GridView. But I couldn't find out a way of programatically adding row to the grid without using GridviewAdapter. I am looking for somthing like this:

```
GridView gv = new GridView( this );
GridRow gr = /* Some code here */;

gv.addRow( gr );

linearLayout.addView( gv ); 
```

Does such a simple way exist?

# mongodb - 我们可以看到在 Collections 组期间形成的查询吗？

> ID：14602709
> 
> 赞同：0
> 
> 时间：2013-01-30T11:18:04.160
> 
> 标签：mongodb

我正在开发一个使用 MongoDB 的现有基于 Java 的应用程序

在其中一堂课中，我看到了一个 mongo db 组，如下所示

```
BasicDBList result = (BasicDBList) coll.group(key, cond, initial, reduce); 
```

其中`key`, `cond`,`initial`是三个不同`BasicDBObject`的 , 而 reduce 是一个字符串形式的函数

我的问题是我们可以看到形成的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:03:31.053

如果你有 MongoDB Java 驱动程序的源代码，你可以看看`com.mongodb.GroupCommand`这个查询是如何构建的，它看起来像这样：

```
 BasicDBObject args  = new BasicDBObject();
    args.put( "ns" , input );
    args.put( "key" , keys );
    args.put( "cond" , condition );
    args.put( "$reduce" , reduce );
    args.put( "initial" , initial );
    if ( finalize != null )
        args.put( "finalize" , finalize );
    return new BasicDBObject( "group" , args ); 
```

这转化为一个组命令（[http://docs.mongodb.org/manual/reference/command/group/](http://docs.mongodb.org/manual/reference/command/group/)），如下所示：

```
{ "group" : { "ns" : "coll" , 
              "key" : {<keys>} , 
              "cond" : {<cond>} , 
              "$reduce" : "<reduce>" , 
              "initial" : { }
            }
} 
```

# ldap - OpenLdap：如何从 spring ldap api 查询别名对象？

> ID：14602710
> 
> 赞同：0
> 
> 时间：2013-01-30T11:18:11.103
> 
> 标签：ldap, openldap, spring-ldap, ldap-query

我正在使用 spring ldap 连接到 OpenLdap。

想知道是否有任何方法可以查询特定基础中存在的所有别名？我尝试了 ldaptemplate.search，但根据提供的过滤器，它只返回基础内的对象，而不是与对象关联的别名。

期待答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:01:12.247

您必须通过您使用的任何 API 关闭别名追踪。那么搜索的结果就是别名对象本身，而不是它们所指的对象。

# javascript - Image is not loaded in IE and firefox?

> ID：14602712
> 
> 赞同：0
> 
> 时间：2013-01-30T11:18:14.413
> 
> 标签：javascript, jquery

I would like to add CAPTCHA source to the div id `captchaImage`. But it is not working in IE and Firefox, but it is work in Chrome. Please help me. Difficulty reading the words? Load another image.

function getNewImage(){document.LogonForm.captcha.value = '';var url = '${startpage.captchaURL}';document.captchaImage.src = url;}

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:25:11.190

就像@Felix Kling 在评论中写的那样，使用`document.getElementById('captchaImage')`是因为 Firefox 不会将元素 ID 公开为文档对象的属性。

# mysql - adding another to column and fill it with values

> ID：14602715
> 
> 赞同：0
> 
> 时间：2013-01-30T11:18:18.037
> 
> 标签：mysql, sqlyog

I have a full working table. it already has data. I need to put another column that will serve as a serial code of each row that was created. the format of the serial code would be user-1, user-2, etc. how do I do that?

# machine-learning - Time series analysis with seasonality. Any such statistical/machine learning java library available?

> ID：14602717
> 
> 赞同：0
> 
> 时间：2013-01-30T11:18:22.053
> 
> 标签：machine-learning, time-series, weka, forecasting, trend

I need a forecasting model that will use time series as well as seasonality. Example, to predict Feb 2013 data, I will use Jan 2013 data and Feb 2012 data.

I was trying to assess TripleExponentialSmoothing and SVM (as used in the Weka forecasting library). However, with limited statistical prowess, I am not sure what(and probably how) to leverage.

I need this as a part of an enterprise Java application. Is there a Java library that I could use?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:01:06.327

看看[Encog](http://www.heatonresearch.com/encog) with Time [Series Predication](http://www.heatonresearch.com/wiki/Workbench_Time-Series_Example)。

一旦你通过 Encog 了解了时间序列预测的概念，使用 weka 和 SVM 将是一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:40:10.960

也许`WEKA`不是这些东西的最佳工具。您可以`R`通过以下`Java`方式使用：http `JRI`: [//stats.math.uni-augsburg.de/JRI/](http://stats.math.uni-augsburg.de/JRI/)

这是一个关于时间序列分析的小而快的教程`R`：[http ://www.simafore.com/blog/bid/105815/Time-series-analysis-using-R-for-cost-forecasting-models-in- 8步](http://www.simafore.com/blog/bid/105815/Time-series-analysis-using-R-for-cost-forecasting-models-in-8-steps)

# wordpress-theming - Wordpress query_posts() orderby => 'title' 不起作用

> ID：14602726
> 
> 赞同：1
> 
> 时间：2013-01-30T11:18:36.780
> 
> 标签：wordpress-theming, wordpress

我在 wordpress 网站的导航列表中订购一些帖子时遇到问题。这是我的（严重缩进）代码：

```
<ul class="tree lvl-0">
        <?php
            $args = array('child_of' => 6);
            $categories = get_categories( $args );
            foreach($categories as $category) {
                echo '<li class="collapsed"><a href="' . get_category_link( $category->term_id ) . '"' . $category->name  . '" ' . '>' . $category->name.'</a>';
                $cat_id= $category->term_id;
                wp_reset_query();
                $args = array(
                    'cat' => $cat_id,
                    'posts_per_page' => 20,
                    'order' => 'ASC',
                    'orderby' => 'title'
                );
                query_posts($args);
                            // start the wordpress loop!
                        ?>
                            <ul class="lvl-1">
                                <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
                        <li><a href="<?php the_permalink();?>"><?php the_title(); ?></a></li>
                                <?php endwhile; endif; ?>
                            </ul>
                        </li>
            <?php wp_reset_query(); } ?>
    </ul> 
```

有问题的部分是

```
$args = array(
    'cat' => $cat_id,
    'posts_per_page' => 20,
    'order' => 'ASC',
    'orderby' => 'title'
);
query_posts($args); 
```

我不太确定它们的顺序，可能是日期。此外，当我按“名称”或其他任何内容订购时，它可以工作。:(

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:12:23.563

请参阅 Hobo 对问题的评论 ^

我的客户也在使用 qTranslate，这是问题的确切原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-11T19:57:29.290

问题是 $args，这样做：

```
$args = array(
    'cat' => $cat_id,
    'posts_per_page' => 20,
    'orderby' => array( 'title' => 'ASC' )
); 
```

您还可以按多个参数排序，例如：

```
$args = array(
    'cat' => $cat_id,
    'posts_per_page' => 20,
    'orderby' => array( 'menu_order' => 'ASC', 'title' => 'ASC', 'post_date' => 'DESC' ),
); 
```

# java - Python and tomcat on the same machine

> ID：14602737
> 
> 赞同：0
> 
> 时间：2013-01-30T11:19:13.103
> 
> 标签：java, python, tomcat7, apache

using sec-web httpd. the python code has api: host/v0/auth/sessions/blablba... the java code has api: host/v0/auth/users/blabla.... there is a conf file on the machine which have the following for the python api:

```
 ProxyPass                    /v0/auth/sessions http://localhost:8098/v0/auth/sessions
 ProxyPassReverse     /v0/auth/sessions http://localhost:8098/v0/auth/sessions 
```

and for the java api:

```
ProxyPass               /   ajp://localhost:8009/
ProxyPassReverse        /   ajp://localhost:8009/ 
```

now: when I'm accessing the python api I'm getting good response, but when trying to access the java api I/m getting '[]' - the status code is 200 but I'm supposed to get a different response.

any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:33:21.587

我有类似的任务，我将以下 apache 配置文件放入 java 应用程序的配置中：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerAdmin "mail@example.com"
    ServerName example.com
    ServerAlias www.example.com`

    ProxyRequests off
    ProxyPreserveHost on

    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    ProxyPass / http://127.0.0.1:8080/
    ProxyPassReverse / http://127.0.0.1:8080/
    <Location />
         Order allow,deny
         Allow from all
    </Location>

</VirtualHost> 
```

请注意[http://example.com:8080/](http://example.com:8080/)打开 java 应用程序。它不是[http://example.com:8080/app/](http://example.com:8080/app/)。Java 应用程序作为 ROOT.jar 放置在 /var/lib/tomcat7/webapps/ 目录的根目录中（对于我的 tomcat）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T11:11:13.320

在我们的服务器中，我们运行 Apache 作为代理服务器，这里是示例，希望对您有所帮助。

```
<IfModule mod_proxy.c>
ProxyRequests On
ProxyVia On

<Proxy http://localhost:8080/service>
        AddDefaultCharset off
        Order allow,deny
        Allow from all
</Proxy>

<Proxy http://localhost:8080/foo>
        AddDefaultCharset off
        Order allow,deny
        Allow from all
</Proxy>

<Location "/service">

    Order deny,allow
    Deny from all

    ProxyPass http://localhost:8080/service
    ProxyPassReverse http://localhost:8080/service
</Location>

<Location "/foo">

    Order deny,allow
    Deny from all

    ProxyPass http://localhost:8080/foo
    ProxyPassReverse http://localhost:8080/foo
</Location>

</IfModule> 
```

# python - Creating of new columns in pandas.DataFrame using apply() function

> ID：14602739
> 
> 赞同：3
> 
> 时间：2013-01-30T11:19:21.850
> 
> 标签：python, pandas

I have a pandas DataFrame like:

```
 A    B  
'2010-01-01'  10  20   
'2010-02-01'  20  30  
'2010-03-01'  30  10 
```

I need to apply some function for every columns and create new columns in this DataFrame with special name.

```
 A   B A1 B1  
'2010-01-01'  10  20 20 40  
'2010-02-01'  20  30 40 60  
'2010-03-01'  30  10 60 20 
```

So I need to make two additional columns with names `A1` and `B2` based on columns `A` and `B` ( like name `A1 = str(A) + str(1)`) by multiplying by two. Is it possible to do this using `DataFrame.apply()` or other construction?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T12:21:44.537

您可以使用`join`来进行组合：

```
>>> import pandas as pd
>>> df = pd.DataFrame({"A": [10,20,30], "B": [20, 30, 10]})
>>> df
    A   B
0  10  20
1  20  30
2  30  10
>>> df * 2
    A   B
0  20  40
1  40  60
2  60  20
>>> df.join(df*2, rsuffix='1')
    A   B  A1  B1
0  10  20  20  40
1  20  30  40  60
2  30  10  60  20 
```

如果你喜欢`df*2`，你可以在哪里替换。`df.apply(your_function)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:19:48.050

我会跳过该`apply`方法，直接定义列。

```
import pandas as pd
df = pd.DataFrame({"A": [10,20,30], "B": [20, 30, 10]})
for col in df.columns:
    df[col+"1"] = df[col] * 2 
```

不如 DSM 的解决方案优雅。但无论出于何种原因，`apply`除非我真的需要它，否则我会避免使用它。

# powershell - powershell中奇怪的日期格式转换

> ID：14602743
> 
> 赞同：1
> 
> 时间：2013-01-30T11:19:33.990
> 
> 标签：powershell

我有一个带有日期字符串的变量

```
> $str
5 november 2012 y. 18:24:13 
```

当我试图从中删除空格时，我得到另一个格式的字符串

```
> $str  -replace " ",""
05.11.201218:24:13 
```

这要怎么解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:27:18.310

您的原始`$str`变量是 DateTime 对象。当您尝试替换它时，它会将其转换为字符串，然后删除空格。前任。

```
PS > $date = [DateTime]::Now

PS > $date

#DateTime object
30\. januar 2013 12:24:09

PS > $date.ToString()
#Converts it to string
30.01.2013 12:24:09

PS > $date -replace " ",""
#Converts it to string and removes spaces
30.01.201312:24:09 
```

如果您想要第一种格式（日期时间格式）没有空格，请尝试：

```
PS > $date.ToString("F").Replace(" ","")
30.januar201312:24:09 
```

有关 DateTime 字符串格式的更多信息，[请访问 MSDN](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)

# maven - Maven项目中的Tomcat部署问题

> ID：14602744
> 
> 赞同：1
> 
> 时间：2013-01-30T11:19:41.123
> 
> 标签：maven, tomcat, maven-3, pom.xml

我一直在尝试创建一个简单的基于 maven web 的项目来对 maven 充满信心。我在 pom.xml 中添加了 tomcat7 插件以将其用作服务器。但是当我开始通过使用将我的war文件部署到tomcat时

> tomcat7：部署

它抛出如下错误，

```
[INFO] Deploying war to http://127.0.0.1:8080/MavenWeb  
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 13.585s
[INFO] Finished at: Wed Jan 30 16:03:06 IST 2013
[INFO] Final Memory: 9M/24M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.0:deploy  (default-cli) on project MavenWeb: Cannot invoke Tomcat manager: Connection to http://127.0.0.1:8080 refused: Connection refused -> [Help 1] 
```

我在 pom.xml 中的插件部分如下。

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
       <url>http://127.0.0.1:8080/manager/html</url>
       <warFile>/home/shebin/Maven Folder/MavenWeb/target/MavenWeb.war</warFile>
   <server>TomcatServer</server>
       <path>/MavenWeb</path>
   <username>tomcat</username>
       <password>tomcat</password>
    </configuration>
</plugin> 
```

.m2/settings.xml 和 /home/shebin/apache-maven-3.0.4/conf/settings.xml

```
<server>
        <id>TomcatServer</id>
        <username>tomcat</username>
        <password>tomcat</password>
</server> 
```

/home/shebin/apache-tomcat-7.0.35/conf/tomcat-users.xml

```
<role rolename="manager-gui"/>
<user username="tomcat" password="tomcat" roles="manager-gui"/> 
```

我已经通过了各种解决方案，但我的方式没有任何效果。我的 Maven 版本是 3.0.4 并使用 tomcat7 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-25T03:28:30.640

maven插件配置中的url应该是`<url>http://127.0.0.1:8080/manager/text</url>`与角色对应的`manager-script`。

另外，值得注意的是，更改`roles`in后`{TOMCAT_HOME}/conf/tomcat-users.xml`，您必须重新启动 tomcat 服务器才能重新加载配置。我知道这是常识，但我的经验告诉我，你们中的一些人可能真的停留在这里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:32:52.687

此错误消息

```
[ERROR] Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.0:deploy  (default-cli) on project MavenWeb: Cannot invoke Tomcat manager: Connection to http://127.0.0.1:8080 refused: Connection refused -> [Help 1] 
```

暗示这是与身份验证相关的。尝试改变这个

```
<role rolename="manager-gui"/>
<user username="tomcat" password="tomcat" roles="manager-gui"/> 
```

到

```
<role rolename="manager-script"/>
<user username="tomcat" password="tomcat" roles="manager-script"/> 
```

来自 maven 插件的访问不会通过基于浏览器的管理客户端进行:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-21T15:10:38.190

我遇到了同样的问题。您需要添加一个额外的角色：manager-jmx。所以你的 tomcat-users.xml 文件应该有。

```
<user username="tomcat" password="tomcat" roles="manager-script, manager-jmx"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-14T12:45:25.857

由于这篇文章中的要点，我也得到了这个工作。我坚持的事情是：POM 文件 - 你需要在路径的开头有一个斜杠（或者它试图将它安装在 /manager/ 下并且失败）：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <url>http://10.54.17.35:8080/manager/text</url>
        <server>LoginForTomcat</server>
        <path>/displayService</path>
    </configuration>
</plugin> 
```

在 ~/.m2/settings.xml 中提供服务器凭据：

```
<servers>
    <server>
        <id>LoginForTomcat</id>
        <username>figgy</username>
        <password>passw0rd</password>
    </server>
</servers> 
```

在tomcat服务器上，需要定义manager-script和manager-jmx：

```
 <role rolename="manager-gui"/>
  <role rolename="manager-script"/>
  <role rolename="manager-jmx"/>
  <user username="figgy" password="passw0rd" roles="manager-gui,manager-script,manager-jmx"/> 
```

在上面的帖子中查看这里的所有内容，发布此内容以澄清事情。

# c# - System.Web.HttpContext.Current.Cache 信息

> ID：14602749
> 
> 赞同：9
> 
> 时间：2013-01-30T11:19:56.923
> 
> 标签：c#, asp.net

我想问一下`System.Web.HttpContext.Current.Cache`是每个用户喜欢`Sessions`还是每个应用程序。在什么情况下使用缓存比较好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T11:23:05.173

[HttpContext.Cache 属性 - MSDN](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)

> 每个应用程序域都有**一个 Cache 类的实例**。因此，Cache 属性返回的 Cache 对象是应用程序域中所有请求的 Cache 对象。

对于你的问题。

> 在什么情况下使用缓存比较好？

将该信息保存在 Cache 中，该信息将由多个用户共享，并且（通常）如果其`readonly`. 例如，将查找值保存在缓存中。你可能会看到：

[在 ASP.NET 网页站点中缓存数据以获得更好的性能](http://www.asp.net/web-pages/tutorials/performance-and-traffic/15-caching-to-improve-the-performance-of-your-website)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:21:54.980

`Application`当您拥有可重复用于多个用户/会话的数据时，最好使用它。

例如，用户 ID 将存储在`Session`. 用户的语言或姓名也可以存储在`Session`.

但是对一组用户或所有用户有用的信息必须存储在`Cache`.

也看看[这个问题](https://stackoverflow.com/questions/428634/advantages-of-cache-vs-session)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T11:41:51.133

只有一个缓存对象`per key`值与`session`用户个人不同。
因为它是一个集合，所以你可以有多个缓存变量。
在 asp.net 中有不同风格的缓存可用。
这是一个msdn链接

[http://msdn.microsoft.com/en-us/library/ms178597%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178597%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:22:40.570

缓存在应用程序的上下文中是全局的。谁存储或访问它们并不重要——只要他们知道如何这样做。例如，它对于保存每个用户可以相同的数据很有用。

# entity-framework - 未实现（HResult 异常：0x8004001 (E_NOTIMPL)）（EF Power Tools Beta 2 + VS 2012））

> ID：14602754
> 
> 赞同：0
> 
> 时间：2013-01-30T11:20:21.040
> 
> 标签：entity-framework

当尝试通过 DbContext 生成实体数据模型时，我收到一个弹出消息：

未实现（来自 HResult 的异常：0x8004001 (E_NOTIMPL)）

对于其他 DbContext 类，不会弹出此消息。

我正在使用 VS 2012 Ultimate 和 Entity Framework Power Tools Beta 2。

关于正在发生的事情的任何建议。

在此先感谢，梅林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:40:03.590

试用[今天发布的 EF Power Tools Beta 3](http://blogs.msdn.com/b/adonet/archive/2013/01/30/ef-power-tools-beta-3-available.aspx)。它包含许多针对此类问题的修复程序。

# javascript - 从不同的文件调用对象中的方法？

> ID：14602756
> 
> 赞同：1
> 
> 时间：2013-01-30T11:20:26.780
> 
> 标签：javascript, object

大家好，大家决定重构我的 javascript 并尝试将我的页面脚本分离到外部 js 文件中。

如果我错了，请纠正我，我还是 javascript 新手，但这是我当前的设置：- 我的外部文件：-

```
exJS = function(){

  this.coolMethod = function(){
        //do cool code here
  }
} 
```

页面脚本：-

```
<script type="text/javascript" src="ex_js.js"></script>
<script>
 exJs = new exJS();
 exJs.coolMethod();
</script> 
```

所以很明显我做错了什么，如何从不同的文件调用对象中的方法？

我也欢迎更好的建议来执行此操作

谢谢

* * *

更新：它不起作用，因为我没有在对象中定义的函数之间放置逗号......愚蠢的错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:25:04.857

您所做的很好（除了关闭严重的第一个脚本元素），但如果您不想要多个 exJS 实例，则可能不需要。

我建议这个小变种：

**外部文件：**

```
var exJS = {
  coolMethod: function(){
        //do cool code here
  }
} 
```

**页面脚本：**

```
<script type="text/javascript" src="ex_js.js"></script>
<script>
 exJs.coolMethod();
</script> 
```

请注意，当您的代码增长并且您想在另一个文件中定义一个新函数时，您可以简单地将这个函数定义为

```
exJS.doSomeOtherThing = function() {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:24:15.460

我会考虑使用命名空间（或者至少 javascripts 尝试使用它们）

这是一个例子，接受的答案显示了如何做到这一点。

[如何在 JavaScript 中声明命名空间？](https://stackoverflow.com/questions/881515/javascript-namespace-declaration)

@dystroy 在他的回答中也有一个例子。

# c++ - std::copy 的分段错误，memcpy 有效

> ID：14602758
> 
> 赞同：2
> 
> 时间：2013-01-30T11:20:29.870
> 
> 标签：c++, copy

我有一个奇怪的情况，使用 std::copy 会导致段错误，而使用 memcpy 似乎可以正常工作。

我正在`PacketHeader`Google 测试函数中创建一个对象。

我已经确认进入对象的数据是有效的，所以我可能很愚蠢并且错过了 std::copy 语法中明显的一些东西。

GCC 版本：4.4.6 20120305 (Red Hat 4.4.6-4) GTest 版本：1.6.0

还与 boost::options 和 libpcap 链接

```
TEST(SetIP, GoodVals)
{

    char errbuf[PCAP_ERRBUF_SIZE];
    pcap_t * handle = pcap_open_offline("./test_files/PCAP_Good.pcap", errbuf);

    pcap_pkthdr * header;
    const unsigned char * pkt_data;

    //Load one packet from the PCAP, doesn't matter what
    pcap_next_ex(handle, &header, &pkt_data);

    PacketHeader p(header);

}

PacketHeader::PacketHeader(const struct pcap_pkthdr * aPacketHeader) : prPacketHeader(NULL)
{
    prPacketHeader = new struct pcap_pkthdr;

    //This doesn't work
    //std::copy(aPacketHeader, aPacketHeader + sizeof(struct pcap_pkthdr), prPacketHeader);

    //This works
    memcpy(prPacketHeader, aPacketHeader, sizeof(struct pcap_pkthdr));

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T11:25:04.013

表达方式

```
aPacketHeader + sizeof(struct pcap_pkthdr) 
```

不符合您的预期。它实际上添加`sizeof(pcap_pkthdr) * sizeof(pcap_pkthdr)`到指针基地址。

请记住，`aPointer + something`与 相同`aPointer[something]`。

要么只添加`1`：

```
aPacketHeader + 1 
```

或类型转换为`char*`：

```
reinterpret_cast<char*>(aPacketHeader) + sizeof(struct pcap_pkthdr) 
```

* * *

显而易见的解决方案当然应该使用简单的结构到结构复制：

```
*prPacketHeader = *aPacketHeader; 
```

# ios - 如何为 UINavigationBar setBackgroundImage: forBarMetrics: 设置动画？

> ID：14602759
> 
> 赞同：9
> 
> 时间：2013-01-30T11:20:34.550
> 
> 标签：ios, objective-c, ios6, uinavigationcontroller

按下某个控制器时，我正在更改导航栏的背景图像。我想动画化这种变化。我可以使用以下代码来做到这一点：

```
[UIView transitionWithView:self.navigationController.navigationBar
                  duration:0.3f
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"now-playing-nav-bar.png"]
                                                 forBarMetrics:UIBarMetricsDefault];
} completion:NULL]; 
```

但是，这会阻止应用到`navigationBarTitle`和`UIBarButtonItem`s 的默认推送动画。

如何让背景更改和推送动画协同工作？

我更喜欢香草的解决方案。

PS：我不能使用`tintColor`，因为背景是有纹理的。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-25T17:18:19.637

**仅在 iOS 6 上测试**

我使用核心动画解决了它：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    CATransition *animation = [CATransition animation];
    animation.duration = 0.3;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    animation.type = kCATransitionFade;

    [self.navigationController.navigationBar.layer addAnimation:animation forKey:nil];

    [UIView animateWithDuration:0.3 animations:^{
        [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"now-playing-nav-bar.png"] forBarMetrics:UIBarMetricsDefault];
    }];
} 
```

做同样的事情`viewWillDisappear:`，你很高兴。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-21T20:41:08.350

**这适用于我在 iOS 9 上：**

```
override func viewWillAppear(animated: Bool) {
    super.viewWillAppear(animated)

    changeNavigationBackground()
}

func changeNavigationBackground() {
    // navigationBar should always exist if the view controller is in a UINavigationController
    guard let navigationBar = navigationController?.navigationBar else { return }

    // the current navigation background
    guard let imageView = navigationBar.subviews.filter({ $0 is UIImageView }).first else { return }
    let image = UIImage(named: "navigation_background")
    let newImageView = UIImageView(image: image)
    newImageView.frame = imageView.frame
    newImageView.alpha = 0.0
    navigationBar.insertSubview(newImageView, belowSubview: imageView)

    transitionCoordinator()?.animateAlongsideTransition({ (context) in
        imageView.alpha = 0.0
        newImageView.alpha = 1.0
    }, completion: { (context) in
        newImageView.removeFromSuperview()
        navigationBar.setBackgroundImage(image, forBarMetrics: .Default)
        imageView.alpha = 1.0
    })
} 
```

如果可能，我会尽量避免使用 Core Animation，所以我只使用了视图并在过渡的同时更改了它们的 alpha 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:04:48.143

没有过渡动画，推送动画是否有效？如果是，可能您需要在更改导航栏图像的块中自己制作推送动画。

# android - 我如何将字符串从主要活动传递到带有警报管理器的广播接收器？

> ID：14602772
> 
> 赞同：1
> 
> 时间：2013-01-30T11:21:23.940
> 
> 标签：android, android-intent

我创建了一个带有警报管理器和广播接收器的应用程序，我想将字符串从主要活动传递到公共类 MyScheduleReceiver 扩展 BroadcastReceiver（我在里面有警报管理器），然后到公共类 MyStartServiceReceiver 扩展 BroadcastReceiver 以将数据传递给静态函数......在主要活动使用共享首选项从编辑框中保存此变量。但我不能在接收器内使用共享首选项。我该怎么做？

```
 public class MyScheduleReceiver extends BroadcastReceiver {
 public void onReceive(Context context, Intent intent) {

  int theHour = intent.getIntExtra("AlarmHour", 0);  
  int theMinute= intent.getIntExtra("AlarmMin", 0); 

AlarmManager service = (AlarmManager) context
    .getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(context, MyStartServiceReceiver.class);
PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
    PendingIntent.FLAG_CANCEL_CURRENT);

i.putExtra("data","1");

Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(System.currentTimeMillis());

cal.set(Calendar.HOUR_OF_DAY, theHour);  // set user selection
cal.set(Calendar.MINUTE, theMinute); 
cal.set(Calendar.SECOND, 0);

service.set(AlarmManager.RTC_WAKEUP,
    cal.getTimeInMillis(), pending);

}

public class MyStartServiceReceiver extends BroadcastReceiver {

public void onReceive(Context context, Intent intent) {

  Intent service = new Intent(context, AlarmService.class);

 context.startService(service);

 String result = intent.getStringExtra("data");

 String msg=result;
 try {

    ArduBtTimer.sendData(msg);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:14:26.340

尝试这个：

```
 where u want to set value:
 i.putExtra("data",yourstring); 
 and for recieve: 
 String value = intent.getStringExtra("data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T21:04:10.860

我认为您应该使用 BroadCastReceiver 发送要保存的信息，然后用 SP 将其保存在那里。

这是从接收者向活动发送信息的示例：

1.  创建一个内部类，该类`BroadcastReceiver`在您想要获取数据的活动中进行扩展：

    ```
    private BroadcastReceiver ReceivefromService = new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent intent)
        {
            //get the data using the keys you entered at the service
            String IncomingSms=intent.getStringExtra("incomingSms");//
            String phoneNumber=intent.getStringExtra("incomingPhoneNumber");

        }
    }; 
    ```

2.  将此添加到`onPause()`：

    ```
    @Override
    protected void onPause() {
        super.onPause();
        try {
            unregisterReceiver(ReceivefromService);
        } catch (IllegalArgumentException e) {
            if (e.getMessage().contains("Receiver not registered")) {
                Log.i("TAG","Tried to unregister the reciver when it's not registered");
            }
            else
            {
                throw e;
            }
        }
    } 
    ```

3.  将此添加到`onResume()`：

    ```
    protected void onResume() {
        super.onResume();
        filter.addAction("android.intent.action.SmsReceiver");
        registerReceiver(ReceivefromService, filter);
        //the first parameter is the name of the inner class we created.
    } 
    ```

4.  在接收器/服务中创建一个意图，像这样开始广播：

    ```
    Intent i = new Intent("android.intent.action.SmsReceiver").putExtra("incomingSms", message);
    i.putExtra("incomingPhoneNumber", phoneNumber);
    context.sendBroadcast(i); 
    ```

希望它会帮助你...

# upgrade - 将 jQuery 1.8.3 迁移到 1.9.0 - 替换已弃用的 .attr()

> ID：14602773
> 
> 赞同：0
> 
> 时间：2013-01-30T11:21:28.897
> 
> 标签：upgrade, jquery-1.9

我正在开发的一个网站是使用 jQuery v1.8.3 构建的。我正在尝试升级到 v1.9.0。使用 jQuery 迁移插件 (v.1.0.0)，我在控制台中收到消息说 .attr() 已弃用。

在 .js 文件中使用了这两行：

```
var branchID = $('select#ddlBranches').attr('value');
$('select#ddlBranches').attr('value', branchID).change(); 
```

它们旨在获取下拉列表中当前选择的值（即记录 ID），并在下拉列表中触发更改事件，将其设置为指示值。

第一行会在控制台中显示此消息：“*不推荐使用基于属性的 jQuery.fn.attr('value')* ”

第二行导致它在控制台中显示：“*不推荐使用基于属性的 jQuery.fn.attr('value', val)* ”

[升级指南](http://jquery.com/upgrade-guide/1.9/)讨论了.attr()，但我没有看到任何地方提到用什么来替换它。

我应该用什么替换 .attr() 来完成相同的功能？

感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:23:49.600

如果要获取/设置`value`，请使用以下[`.val()`](http://api.jquery.com/val/)功能：

```
var branchID = $('select#ddlBranches').val();
$('select#ddlBranches').val(branchID).change(); 
```

# php - 如何替换php中的特殊字符

> ID：14602785
> 
> 赞同：1
> 
> 时间：2013-01-30T11:22:08.877
> 
> 标签：php, cakephp, special-characters, chars, before-save

我有一个代码，我必须替换几个特殊字符：代码如下：

```
#include <iostream>\012#include <stdio.h>\012#include <stdlib.h>\012#include <limits>\012#include <string.h>\012using namespace std;\012\012void inclean(){\012\011std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\\n');\012}\012\012void die(string e){\012\011//cout << e;\012\011exit(1);\012}\012\012typedef struct {\012\011bool zajente;\012\011int rozmiar;\012} pudelko;\012\012int main() {\012\011int i = 12;\012setvbuf(stdout, NULL, _IONBF, 0);\012\011setvbuf(stderr, NULL, _IONBF, 0);\012\011int a;\012\011int lamount=0;\012\011cin >> a;\012\011if(!(a>=1&&a<=1000000)){die("Liczba mo\277e wynosi\346 od 1 do 1000000(10^6)");}\012\011pudelko  *pudelka=new pudelko[a];\012\011memset (pudelka,0,a*sizeof(pudelko));\012\011string b;\012\011inclean();\012\011getline(cin,b);\012\011int bl=b.length();\012\011for(int i=0;i<=bl;i++){\012\011\011char c=b.c_str()[i];\012\011\011if (c>=48&&c<=57){\012\011\011\011pudelka[lamount].rozmiar*=10;\012\011\011\011pudelka[lamount].rozmiar+=(int)c-48;\012\011\011\011pudelka[lamount].zajente=false;\012\011\011} else {\012\011\011\011if(!(pudelka[lamount].rozmiar>=1&&pudelka[lamount].rozmiar<=1000000000)) die("Liczba mo\277e wynosi\346 od 1 do 1000000000(10^9)");\012\011\011\011lamount++;\012\011\011\011if(lamount>=a) break;\012\011\011}\012\011}\012\011int cpa=lamount;\012\011int e=0;\012\011while (true){\012\011\011for(int z=e;z<=cpa;z++)\012\011\011\011if(pudelka[z].rozmiar>pudelka[e].rozmiar&&!pudelka[z].zajente){\012\011\011\011\011pudelka[z].zajente=true;\012\011\011\011\011lamount--; break;\012\011\011\011}\012\011\011if(e>=cpa){ cout << "" << lamount+1; break; }\012\011\011e++;\012\011\011}\012\011exit(0);\012\011return(0);\012}\012 
```

我试图删除 \012 和 \011 是

```
 $this->data['StoredFile']['data'] = str_replace("\012","\n",$this->data['StoredFile']['data']);
 $this->data['StoredFile']['data'] = str_replace("\011","\t",$this->data['StoredFile']['data']); 
```

也用过

```
$this->data['StoredFile']['data'] = stripslashes($this->data['StoredFile']['data']); 
```

wchich 删除了 \0 然后通过 str_replace 我删除了 11 和 12 ...但我注意到 for ex int i = 12; 改为 int i = \n; 我不会发生什么;<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:37:03.713

使用[str_ireplace](http://www.php.net/manual/en/function.str-ireplace.php)。

```
$output = str_ireplace (array('\012','\011'),array("\n","\t"), $string); 
```

[演示](http://codepad.org/rqbI5NNg)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:33:48.740

您可以使用该`chr`函数将 ascii 字符替换为您需要或想要的任何字符/字符串：

```
str_replace(array(chr(012), chr(011)), array("\n","\t"), $string); 
```

AFAIK，这应该可以解决问题，并且应该避免您意外更换任何东西。
请参阅[此处的文档](http://php.net/chr)。

话虽如此，您的输入字符串中可能有更多的 ascii 字符，因此该`iconv`函数可能更适合：

```
echo iconv('ASCII', 'UTF-8//IGNORE', $string); 
```

[文档](http://www.php.net/manual/en/function.iconv.php)。
另一个链接，另一个问题，[也许值得一看](https://stackoverflow.com/questions/4983989/convert-ascii-to-utf-8-encoding)

# jquery - jQuery UI 的自动完成功能不显示

> ID：14602795
> 
> 赞同：0
> 
> 时间：2013-01-30T11:22:53.000
> 
> 标签：jquery, jquery-ui

我总是有 jQuery UI 的问题，所以我现在这样做了。我想使用它的自动完成功能，所以我写了一个返回 JSON 响应的小结果页面，如下所示：

```
[ { "value": "2", "label": "Baldur's Gate" }, { "value": "3", "label": "Baldur's Gate 2" }, ]; 
```

我的JS是：

```
function extractLast(term) {
    //return split( term ).pop();
    var t = term.replace(' ', '%20');
    return t;
}

$('nav#mainMenu input').autocomplete({
    minLength:3,
    source: function(request, response) {
        $.getJSON('/Symfony/web/app_dev.php/search/g/' + extractLast(request['term']), response);
    }
}); 
```

如您所见，它非常基本，我想我忘记了一些非常明显的东西，但我看不出那是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:10:38.323

看起来返回值存在多个问题。它应该是

```
[ { "value": "2", "label": "Baldur\'s Gate" }, { "value": "3", "label": "Baldur\'s Gate 2" } ] 
```

1.  `'`应该用`\'`
2.  `,`第二个对象后有一个，无效
3.  `;`应删除响应末尾的。

`jQuery.ajax`使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)来解析`responseText`. 它是通过[jQuery.js](https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.js)文件`"text json": jQuery.parseJSON`中的转换器配置指定的。

如果您将响应传递给此方法，则会失败

```
jQuery.parseJSON('[ { "value": "2", "label": "Baldur's Gate" }, { "value": "3", "label": "Baldur's Gate 2" }, ];') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:10:08.290

它也可能是自动完成列表 [ ] 末尾的 , 。IE 不喜欢这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:10:45.940

好吧，我终于成功了；）

问题是返回给 jQuery 的数据。我成功地使用`json_encode`了我的数组。这是代码：

```
$results = $search->getResult();
$tab = array();

foreach($results as $result) {
    $tab[] = array('label' => $result->getName(), 'value' => $result->getName(), 'id' => $result->getID());
}

try {
    return new Response(json_encode($tab));

} catch (\Doctrine\Orm\NoResultException $e) {
    return false;
} 
```

# asp.net-mvc - WebAPI 路由 - 完全动态的 url

> ID：14602799
> 
> 赞同：1
> 
> 时间：2013-01-30T11:23:13.733
> 
> 标签：asp.net-mvc, asp.net-web-api

我想定义两条路线。一种是简单的对Web 根目录的get 请求，例如`http://localhost`，第二种是带有一个参数的get 请求，例如`http://localhost/{sport`}。我可以让第一条路线正常工作，但第二条路线不行。我尝试了很多变化。这是其中之一：

```
using System.Collections.Generic;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Routing;

namespace PricingBridge.RestService
{
    public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "aRoute",
                routeTemplate: "{myParam}",
                defaults: new { controller = "My", myParam = UrlParameter.Optional });
        }
    }

    public class MyController : ApiController
    {
        public string Get()
        {
            return "1";
        }

        public string Get(string myParam)
        {
            return "2";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:39:09.563

而不是`UrlParameter.Optional`，使用`RouteParameter.Optional`.

前者是 MVC，后者是 Web API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:47:38.137

原来我使用了错误的课程。我应该在 WebApiConfig 中定义路由，而不是在 RouteConfig 中。

我的要求的解决方案如下（忽略返回值）：

```
 public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
            config.Routes.MapHttpRoute("DefaultApi", "{sport}", new { controller = "bridge", sport = RouteParameter.Optional });
        }
    }

    public class BridgeController : ApiController
    {
        public IEnumerable<RestItem> GetSports()
        {
            return new[] { new RestItem("sport1", "relation") };
        }

        public IEnumerable<RestItem> GetFixtures(string sport)
        {
            return new[] { new RestItem(sport + "/fixture", "relation") };
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:46:22.270

您的路由配置似乎很好。尝试更改`UrlParameter`为`RouteParameter`，当尝试制作自己的控制器选择器进行诊断无济于事时，仅用于拦截以查看控制器在那里调用的内容和 .

```
var config = GlobalConfiguration.Configuration;
config.Services.Replace(typeof(IHttpControllerSelector), new MyControllerSelector(config)) 
```

或与操作选择器[IHttpActionSelector](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)相同。它将让您查看为您的呼叫准确选择了哪些控制器或操作。

# aptana3 - Aptana3-> 禁用自动完成建议

> ID：14602802
> 
> 赞同：1
> 
> 时间：2013-01-30T11:23:22.147
> 
> 标签：aptana3

在 Aptana3 中，我无法禁用自动完成的工具提示。

我怎样才能禁用它？我已禁用 Preferences->PyDev->Editor->Code Completion 中的所有选项，但这仍然发生。

[工具提示（图片）](http://i.stack.imgur.com/9x8G7.png)

[ENTER 后（图片）](http://i.stack.imgur.com/P5tQB.png)

* * *

解释：

当我编写代码时，它会不断显示包含无用内容的框架，这些内容隐藏了我的代码，我应该使用 shift+enter 而不是 enter 来插入新行。

示例：我想写：

```
else
{
} 
```

工具提示向我展示了“else”是什么（我认为经过 14 年的编程我知道这一点），当我按下“ENTER”时，它直接写：

```
else{

} 
```

那是令人讨厌的。我讨厌自动完成，因为：

*   它添加了有时我看不到的内容，这意味着我的代码中有错误。
*   当我更喜欢阅读文档时，它迫使我阅读我正在写的东西。
*   它不关心我的编程风格。我可能会为每个人创建一个新的工作空间，但这很烦人而且很浪费时间。

谢谢你的帮助。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:29:48.680

这种自动完成称为内容辅助。要在 Aptana Studio 3 中禁用它：

1.  在主菜单中选择窗口
2.  转到首选项
3.  选择 Aptana Studio → 内容辅助
4.  查看自动显示内容辅助。您将看到一个下拉菜单
5.  单击下拉菜单并选择关闭而不是默认延迟。

# ruby-on-rails - 我不应该允许production.log？因为它吃太多

> ID：14602805
> 
> 赞同：0
> 
> 时间：2013-01-30T11:23:25.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚发布了我的网络应用程序。

但是我很好奇production.log 的大小。
它将永远增加，并且只需要如此多的磁盘空间。

我该如何处理？

人们通常做什么来维护？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:26:02.090

我希望您的日志框架能够滚动和记录日志，例如您会得到如下日志：

```
server.log
server.log.2013-01-29
server.log.2013-01-28 
```

ETC..

此外，我希望管理员（或其他人）设置一个 cron 作业或类似的作业来删除或压缩（或两者）旧日志。除了长期流量/数据分析之外，您感兴趣的日志最有可能是今天，其次是昨天，也许是最后几周。他们年龄越大，他们可能越没兴趣。

查看[logrotate](http://linuxcommand.org/man_pages/logrotate8.html)，它可以自动执行很多操作。

```
 logrotate  is  designed to ease administration of systems that generate
   large numbers of log files.  It allows automatic rotation, compression,
   removal, and mailing of log files.  Each log file may be handled daily,
   weekly, monthly, or when it grows too large. 
```

当您发布应用程序的新版本时，您可能还想借此机会删除或整理日志，例如，如果新版本创建的日志信息与旧版本完全不同，从而导致更困难或可能不相关的分析。

最后，我会运行一些磁盘空间监控，以便在磁盘空间不足时发出警报。不管上述情况如何，您可能会发现您的应用程序在错误情况下记录过多，或者可能是新版本的记录超出预期。如果您的日志文件填满磁盘，您最不希望的事情是让您的应用程序停止运行（因此，日志通常会发送到不同的磁盘分区 -`/var`也许 - 所以如果填满它不会影响其他进程)

# android - Android：如何检测点击自定义 SearchView 元素

> ID：14602807
> 
> 赞同：33
> 
> 时间：2013-01-30T11:23:29.500
> 
> 标签：android, android-layout, android-searchmanager

我正在创建一个自定义 SearchView，但到目前为止，如果用户单击 searchView 小部件，我还没有找到（单击）事件或侦听器。所以 SearchView 关闭，用户点击搜索图标（哪个监听器？！），SearchView 被打开。见下图。我需要那个事件，因为我想在用户打开 searchView 后更改 UI

![在此处输入图像描述](../Images/38f55b26752a170ea0f2f1464b747b6f.png)

**编辑：** 到目前为止我尝试的是

*   `setOnClickListener`到 SearchView 元素 -> 但只有在 SearchView 打开时才会触发（第二张图片）

*   搜索`SearchView`了 Api，但没有该操作的侦听器（或者我是盲人？）

*   尝试了`onWindowFocusChanged`searchView 的解决方法，但由于 searchView 隐藏在某种 youtube/facebook 侧边栏中，这不起作用

有任何想法吗？我也附上了我的 SearchView 代码，但不要认为代码是错误的。只是还没有听众。顺便说一句：欢迎任何解决方法。但是，如果 SearchView 一开始就关闭，那就太好了！（如上图所示）

```
public class AmplifySearchView extends SearchView implements
        OnQueryTextListener, OnFocusChangeListener,
        OnCloseListener {

    private static final String DEBUG_TAG = "AmplifySeachView";

    private Context context;
    private DataBaseController datasource;
    private StationListView searchResultListView;
    private TextView noResultTextView;

    private Boolean searchStarted = false;

    public AmplifySearchView(Context context) {
        super(context);
        this.context = context;
    }

    public AmplifySearchView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
    }

    public void initSearchView(StationListView view, TextView noResultTextView) {
        this.searchResultListView = view;
        this.searchResultListView.setActivityId(Constants.UI_SEARCH_RESULT_LIST);
        this.noResultTextView = noResultTextView;

        this.setOnQueryTextListener(this);
        this.setOnFocusChangeListener(this);
        this.setOnCloseListener(this);
        this.setOnCloseListener(this);

        setIconifiedByDefault(true);

        datasource = DataBaseController.getInstance(context);

        int id = this.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
        TextView textView = (TextView) findViewById(id);
        textView.setTextColor(Color.WHITE);

        resetSearchInputTextField();
    }

    private void resetSearchInputTextField() {
        setQueryHint(getResources().getString(R.string.search_hint));
    }

    @Override
    public boolean onClose() {
        Log.d(DEBUG_TAG, "onClose()");
        searchResultListView.setVisibility(View.GONE);
        noResultTextView.setVisibility(View.GONE);

        searchStarted = false;

        Intent intent = new Intent(Constants.SEARCH_ENDED);
        intent.addCategory(Constants.UI_AMPLIFY_CATEGORY);
        context.sendBroadcast(intent);

        return false;
    }

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        Log.d(DEBUG_TAG,"onFocusChange()" + hasFocus);

    }

    @Override
    public boolean onQueryTextChange(String newText) {

        //do sth...
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        Log.d(DEBUG_TAG, "onQueryTextSubmit -> " + query);
        return true;
    }

    @Override
    protected void onFocusChanged(boolean gainFocus, int direction,
            Rect previouslyFocusedRect) {
        Log.d(DEBUG_TAG, "onQueryTextSubmit -> " + gainFocus);
        // TODO Auto-generated method stub
        super.onFocusChanged(gainFocus, direction, previouslyFocusedRect);
    }

    @Override
    public void onActionViewCollapsed() {
        Log.d(DEBUG_TAG, "onActionViewCollapsed");
        super.onActionViewCollapsed();
    }

    @Override
    public void onActionViewExpanded() {
        Log.d(DEBUG_TAG, "onActionViewExpanded");
        super.onActionViewExpanded();
    }
} 
```

顺便说一句：焦点更改在这里不起作用，因为 searchview 在开始时是不可见的，然后在 ui 中插入......

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-11T01:45:44.227

这个怎么样？

```
public void setOnSearchClickListener (View.OnClickListener listener) 
```

来自 android 开发者网站的描述说.. 设置一个侦听器以在按下搜索按钮时通知。这仅在默认情况下不可见文本字段时才相关。调用 setIconified(false) 也可以导致此侦听器被通知。

[http://developer.android.com/reference/android/widget/SearchView.html#setOnSearchClickListener(android.view.View.OnClickListener)](http://developer.android.com/reference/android/widget/SearchView.html#setOnSearchClickListener(android.view.View.OnClickListener))

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-08T09:43:52.780

对于文本字段可见使用：

```
SearchView searchView = (SearchView) findViewById(R.id.searchView);
    searchView.setOnSearchClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //your code here
        }
    }); 
```

对于文本字段不可见使用：

```
searchView.setOnCloseListener(new SearchView.OnCloseListener() {
        @Override
        public boolean onClose() {
            //your code here
            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-11T10:08:14.653

```
 public void setOnSearchClickListener (View.OnClickListener listener) 
```

解决了这个问题。实际上我以为我以前一直在使用这个监听器，但`OnSearchClickListener`不是`OnClickListener`在我的 SearchView 中。您必须从外部声明该侦听器，例如

```
 AmplifySearchView sv = (AmplifySearchView) findViewById(...);

 sv.setOnSearchClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d("CLICK","CLICK");

        }
 }); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-26T13:42:58.777

在 Kotlin 中试试这个：

```
 searchView.setOnQueryTextFocusChangeListener { _ , hasFocus ->
        if (hasFocus) {
            // searchView expanded
        } else {
            // searchView not expanded
        }
    } 
```

在 Java 中：

```
searchView.setOnQueryTextFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (hasFocus) {
            // searchView expanded
        } else {
            // searchView not expanded
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T12:28:14.690

这是使用 API 15 编写的。尚未经过测试。详情在底部。

```
public class MySearchView extends SearchView {
    private boolean mHasFocus;
    private OnOpenListener mOnOpenListener;

    public MySearchView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setOnOpenListener(OnOpenListener onOpenListener) {
        mOnOpenListener = onOpenListener;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        boolean onTouchEvent = super.onTouchEvent(event);

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            if (!mHasFocus) {
                mHasFocus = true;

                if (mOnOpenListener != null) {
                    mOnOpenListener.onOpen();
                }
            }

            break;
        }

        return onTouchEvent;
    }

    @Override
    protected void onFocusChanged(boolean gainFocus, int direction, Rect previouslyFocusedRect) {
        super.onFocusChanged(gainFocus, direction, previouslyFocusedRect);

        if (!gainFocus) {
            mHasFocus = false;
        }
    }

    public interface OnOpenListener {
        public void onOpen();
    }
} 
```

你给它一个 OnOpenListener ，当点击 View 时，它会触发事件。当它失去焦点时，它将重置布尔值。我认为它也会触发已经内置的 OnClose。可能有问题的是焦点位；在使用 SearchView 之前我遇到了问题，它不会放弃它的焦点。也许你可以在课堂之外分配视图何时有焦点。如果您想要更多功能，则必须构建自己的功能。

# jquery - jQuery UI Tooltip 小部件留下不需要的标记

> ID：14602811
> 
> 赞同：1
> 
> 时间：2013-01-30T11:23:37.497
> 
> 标签：jquery, jquery-ui, jquery-ui-tooltip

当我以这种方式调用 jQuery UI 的工具提示小部件[http://jsfiddle.net/xvMBU/5/](http://jsfiddle.net/xvMBU/5/)并悬停时，当工具提示隐藏时，并非所有的 html 都从页面中删除 - 这是留下的：

```
<div class="ui-effects-wrapper" style="font-size: 100%; background-color: transparent; border: none; margin: 0px; padding: 0px; width: 64px; height: 42px; float: none; position: absolute; z-index: 9999; top: -11px; left: 0px; bottom: auto; right: auto; background-position: initial initial; background-repeat: initial initial;"></div> 
```

我在 Chrome 和 FF v18.0.1 中尝试了这个。我忘了提到当你快速完成时会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-15T15:43:20.473

一个简单的解决方法：

**[工作示例](http://jsfiddle.net/apaul34208/xvMBU/25/)**

```
$('#myTooltip').tooltip({
    "items": "#myTooltip",
        "tooltipClass": "gr-t-tooltip-balloon",
    content: function () {
        return "dddd";
    },
        "position": {
        "my": "right top",
            "at": "left"
    },
        "show": {
        "effect": "drop",
            "duration": 150,
            "direction": "left"
    },
    close: function (event, ui) {
        $('div.ui-effects-wrapper').remove();  // Add a close function to remove the wrapper.
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:56:48.690

您需要设置`close`为`false`.

```
"close": false, 
```

将您的代码更改为：

```
$('#myTooltip').tooltip({
    "items": "#myTooltip",
    "tooltipClass": "gr-t-tooltip-balloon",
    "close": false,
    content: function () {
        return true;
    },
    "position": {
        "my": "right top",
        "at": "left"
    },
    "show": {
        "effect": "drop",
        "duration": 150,
        "direction": "left"
    }
}); 
```

### 小提琴：http: [//jsfiddle.net/xvMBU/6/](http://jsfiddle.net/xvMBU/6/)

# arrays - 在 VBA 中动态附加一个数组

> ID：14602814
> 
> 赞同：9
> 
> 时间：2013-01-30T11:23:45.777
> 
> 标签：arrays, vba, excel

我想根据各种变量的条件附加一个带有数字的数组。这是我想出的代码：我从一个空数组开始。

```
Sub makeArr()
Dim myArr() As Integer
If box1 = True Then
    ReDim Preserve myArr(LBound(myArr) To UBound(myArr) + 1)
    myArr(UBound(myArr)) = 1
End If

If box2 = True Then
    ReDim Preserve myArr(LBound(myArr) To UBound(myArr) + 1)
    myArr(UBound(myArr)) = 2
End If
End Sub 
```

显然，这是一个示例，因此不是最优雅的放置方式，但它不起作用，因为我似乎无法重新调整数组，因为它最初没有 a`ubound`或 a `lbound`。当我将其调暗时，`myArr(0 to 0)`这也失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T11:46:21.130

`myArr`在第一次使用数组之前，运行这个：

```
ReDim Preserve myArr(0 To 1) 
```

然后当你来到动态`ReDim`语句时，只有`ReDim`在满足某些条件时才使用，例如`If UBound(myArr) > 1 then`等。

```
If box1 = True Then
    If UBound(myArr) > 1 Then
        ReDim Preserve myArr(LBound(myArr) To UBound(myArr) + 1)
    End If
    myArr(UBound(myArr)) = 1
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T17:54:48.890

如果您感兴趣，Olle 的解决方案可以通过更多的制衡来扩展。

在这里查看`InsertElementIntoArray`函数： [http ://www.cpearson.com/excel/VBAArrays.htm](http://www.cpearson.com/excel/VBAArrays.htm)

# java - 如何使用Java PDFBOX api检查PDF格式的复选框

> ID：14602821
> 
> 赞同：4
> 
> 时间：2013-01-30T11:24:33.297
> 
> 标签：java, pdfbox, pdf-form

如何使用Java PDFBOX api检查PDF格式的复选框

最初我尝试使用下面的代码，但在执行复选框字段在 PDF 中不可见之后，但它已被检查..如何避免这种情况或我实施的方式是错误的？谁能帮我吗

```
public void check() throws Exception 
    {
        PDDocument fdeb = null;

         fdeb = PDDocument.load( "C:\\Users\\34\\Desktop\\complaintform.pdf" );
         PDAcroForm form = fdeb.getDocumentCatalog().getAcroForm();
         PDField feld3 = form.getField( "check" );
         feld3.setValue("check");
         fdeb.save("C:\\Users\\34\\Desktop\\complaintform.pdf");
         fdeb.close();

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T12:23:28.337

终于成功了！！！！在 setValue 语句中所做的更改并替换为 ((PDCheckbox) feld3).check();

```
public void check() throws Exception 
    {
        PDDocument fdeb = null;

        fdeb = PDDocument.load( "C:\\Users\\34\\Desktop\\complaintform.pdf" );

         PDAcroForm form = fdeb.getDocumentCatalog().getAcroForm();
         PDField feld3 = form.getField("loan");
         ((PDCheckbox) feld3).check();

         fdeb.save("C:\\Users\\34\\Desktop\\complaintform.pdf");
         fdeb.close();

    } 
```

# android - 获取 facebook 联系人数据

> ID：14602823
> 
> 赞同：0
> 
> 时间：2013-01-30T11:24:36.953
> 
> 标签：android, facebook, facebook-graph-api, android-intent, facebook-android-sdk

我正在开发一个需要获取登录用户数据的android应用程序。我需要 facebook 登录用户详细信息，例如名字、姓氏、电子邮件地址等。我在 google 上做了两种获取用户数据的方法，一种是使用 Json，另一种是使用 GraphUser，任何人都可以解释这两种获取数据的方法有什么区别用户数据 ？在 android 应用程序中使用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:52:47.540

它们都发出相同的底层图形 API 请求来获取数据。GraphUser 为您提供了一个强类型接口来获取 firstName、lastName 等属性，否则您必须自己解析 JSON。

如果您正在制作一个 android 应用程序，我建议您使用[Request.newMyFriendsRequest](https://developers.facebook.com/docs/reference/android/3.0/Request#newMyFriendsRequest%28Session,%20GraphUserListCallback%29)，它会为您提供 GraphUsers 列表。

# java - 在模拟中移动多辆车的有效方法

> ID：14602824
> 
> 赞同：0
> 
> 时间：2013-01-30T11:24:37.350
> 
> 标签：java, multithreading, animation, concurrency, threadpool

所以，我怀疑在下面给出的情况下哪种方式是最优化的：

我有一个车辆在地图上沿道路行驶的模拟。移动它们没问题，它们遵守交通信号灯等。但是我的问题是，移动车辆的最有效方式是什么。现在我每条道路都有一个线程，所以一个线程沿着从南到北的道路移动车辆，另一个用于从西到东的道路等。但它不是非常优化并且非常慢。另外，我发现很难让线程跟踪汽车之间的距离，这样它们就可以放慢速度而不是相互超越。

我是否需要使用包`Executor`中的类有一个线程池`java.util.concurrent`，然后每辆车有一个线程，然后在车辆离开模拟后释放线程？或者这也会让它变慢？

因此，总而言之，如果我没有在上面说清楚，我正在尝试找到一种最佳方式来跟踪当前在模拟（地图）中的车辆。我试图让每条道路都有一个线程让车辆通过，但这不是一个好的解决方案，因为我最终需要车辆有自己的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:28:53.613

我将为整个模拟设置一个线程。锁定开销（CPU 和编码开销）可能大于拥有多个线程的好处。

> 我最终需要车辆有自己的逻辑。

我会有一个方法来调用每个对象，就像`move()`在一个线程中重复调用所有对象一样。每辆车或物体都知道它应该如何移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:50:38.113

最好知道你的模拟实际上做了什么，比如汽车如何决定它们去哪里、多快、什么时候停下等等。无论如何，这似乎是一个由许多汽车、道路、交通信号灯组成的大模型，等等。对于多线程，它必须得到很好的保护（锁定或同步）。您能否根据时间步长将工作拆分为工作，然后并行查看每辆车？似乎在小任务中比在线程中思考更好，因此您可以稍后选择线程数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:01:23.277

使用像[Akka](http://akka.io/)这样的 Actor 模型进行模拟怎么样？Actor 模型用于连续模拟（与离散事件模拟相反）。

# regex - 需要 Qt 正则表达式帮助

> ID：14602825
> 
> 赞同：0
> 
> 时间：2013-01-30T11:24:39.467
> 
> 标签：regex, qt, text, pattern-matching

我正在尝试构建一个正则表达式来从严格格式化的字符串中检索文件类型。格式是沿线

`"Image formats (*.png *.jpg *.bmp)"`

我的第一个理论是搜索以 '*' 然后 '.' 开头的字符串。然后匹配（并捕获）任何字符，直到找到空格或圆括号，例如。

`QRegExp re("\\*\\.(.*)[\\s|\\)]")`

这给了我以下（启用最少）

`"*.png"`和`"png"`

我也尝试过使用 \w （单词字符）但没有占上风。正则表达式引擎使用 perl 语法，反斜杠也需要“转义”，因为 c++ 也处理它们。

问题：

我需要一个正则表达式来从严格格式化的字符串中搜索文件类型，即从上面的字符串中我需要 3 个字符串“png”、“jpg”和“bmp”。

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:40:57.987

```
QString str = "Image formats (*.png *.jpg *.bmp)";
QRegExp re("([*][.](.*))[\\s|\\)]"); // "(\\*\\.(.*))[\\s|\\)]" - also works
re.setMinimal(true);

int pos = 0;
while ((pos = re.indexIn(str, pos)) != -1)
{
    qDebug() << re.cap(1) << re.cap(2);
    pos += re.matchedLength();
} 
```

输出：

```
"*.png" "png"
"*.jpg" "jpg"
"*.bmp" "bmp" 
```

# php - 访问库类变量中的 app.yml 文件

> ID：14602830
> 
> 赞同：0
> 
> 时间：2013-01-30T11:24:56.580
> 
> 标签：php, symfony-1.4

我有一个类，我在其中保留一些常量变量。我想将 app.yml 中的值分配给那里的类变量，但它给出了语法错误。以下是代码片段：

```
class StaticPhotoUrls  
{      
const abc = sfConfig::get("app_myvalue");   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:27:29.523

> “该值必须是常量表达式，而不是（例如）变量、属性、数学运算的结果或函数调用。”

[http://www.php.net/manual/en/language.oop5.constants.php](http://www.php.net/manual/en/language.oop5.constants.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:34:28.880

您不应该`constant`通过函数或与普通值不同的东西来定义 a 。

相反，您应该使用`define()`能够从您的 app.yml 设置值：

```
define('abc', sfConfig::get("app_myvalue")); 
```

但是你想用什么常量呢？

# javascript - 我们如何对 Bootstrap 弹出框中的标题和内容文本进行样式化？

> ID：14602836
> 
> 赞同：0
> 
> 时间：2013-01-30T11:25:08.913
> 
> 标签：javascript, twitter-bootstrap, xhtml, css-frameworks

我们如何对 Bootstrap 弹出框中的标题和内容文本进行样式化？

```
单击以切换弹出框

```

我想在 Popover 标题和内容中有换行符。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:24:02.007

我在这里回答了一个类似的问题：[Contain form within a bootstrap popover?](https://stackoverflow.com/questions/12128425/contain-form-within-a-bootstrap-popover/12128784#12128784)

如果要设置弹出框的样式，请使用一些 css：

```
.popover-title{
   /* insert your styles here */
} 
```

# javascript - 解析合法 JSON 的问题

> ID：14602839
> 
> 赞同：0
> 
> 时间：2013-01-30T11:25:25.373
> 
> 标签：javascript, arrays, json, object, jsonlint

我在解析合法和经过验证的 JSON 对象时遇到问题。

这个运行正常

```
var response = {"tags":"[{\"value\": 2,\"label\": \"Dubstep\"},{\"value\": 3,\"label\": \"BoysIIMen\"},{\"value\": 4,\"label\":\"Sylenth1\"}]"};

var tags = $.parseJSON(response.tags);
console.log(tags); 
```

它在控制台上打印出来`Array[3]`

但是当我运行时，我将值更改`var response`为这个

```
 var response = {"tag":"[{\"id\":2,\"name\":\"Dubstep\",\"description\":\"Dub wob wob\"},{\"id\":3,\"name\":\"BoysIIMen\",\"description\":\"A 1990s Boy Band\"},{\"id\":4,\"name\":\"Sylenth1\",\"description\":\"A VST Plugin for FLStudio \"}]"}; 
```

请注意，这两个值`tags`都`null`在 JSONLint 上进行了验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:28:23.113

在您的第二种情况下，由于您已将“tags”更改为“tag”，您是否按如下方式解析 JSON - 请注意 reponse.tag 中缺少的“s”？

```
var tags = $.parseJSON(response.tag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:27:29.687

您的第二个示例开始：

```
{"tag": 
```

这应该是

```
{"tags": 
```

# android - 在android中开发视频文件浏览器

> ID：14602841
> 
> 赞同：0
> 
> 时间：2013-01-30T11:25:29.130
> 
> 标签：android, file, video, browser

我是 Android 开发的新手。我需要创建视频文件浏览器，视频文件必须显示为缩略图，支持上下滑动。我应该从什么开始？谢谢，等你的意见。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:12:53.400

这是您问题的完整解决方案。

```
 public class EntertainmentActivity extends Activity {

      private static final String MEDIA_PATH = new String( "/mnt/sdcard/VideoFolder");

        static String[] fileList = null;
        GridView gridView;
        static String FILE_PATH = "/mnt/sdcard/VideoFolder/";
        String MiME_TYPE = "video/mp4";

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            updateSongList();
            gridView = (GridView) findViewById(R.id.gridView1);
            File dir = new File(MEDIA_PATH);
            if (dir.exists()) {

            } else {
             dir.mkdirs();
            }
            if (fileList != null) {
                gridView.setAdapter(new ImageAdapter(this, fileList));
            }
            gridView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int position, long arg3) {

                    String videoFilePath = FILE_PATH + fileList[position];
                    System.out.println("******************************videoFilePath****************" + videoFilePath);

                    System.out.println("******************************MiME_TYPE****************"+ MiME_TYPE);
                    Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
                    File newFile = new File(videoFilePath);
                    intent.setDataAndType(Uri.fromFile(newFile), MiME_TYPE);
                    startActivity(intent);

                }
            });

        }

        public void updateSongList() {
            File videoFiles = new File(MEDIA_PATH);
            Log.d("*********Value of videoFiles******", videoFiles.toString());

            if (videoFiles.isDirectory()) {
                fileList = videoFiles.list();
            }
            if (fileList == null) {
                System.out.println("File doesnot exit");
                Toast.makeText(this, "There is no file please add files to "+MEDIA_PATH, Toast.LENGTH_SHORT).show();
            } else {
                System.out.println("fileList****************" + fileList);
                for (int i = 0; i < fileList.length; i++) {
                    Log.e("Video:" + i + " File name", fileList[i]);

                }
            }

        } 
```

GridView 适配器

```
public class ImageAdapter extends BaseAdapter {

    private Context context;

    private final String[] VideoValues;

    public ImageAdapter(Context context, String[] VideoValues) {
        this.context = context;
        this.VideoValues = VideoValues;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        System.out.println("***********IngetView************");
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;

        if (convertView == null) {

            gridView = new View(context);

            // get layout from gridlayout.xml
            gridView = inflater.inflate(R.layout.grid_row, null);

            // set value into textview
            TextView textView = (TextView) gridView
                    .findViewById(R.id.grid_item_label);
            textView.setText(EntertainmentActivity.fileList[position]);
            System.out.println("value of fileList[position]" + EntertainmentActivity.fileList[0]);
            // set image
            ImageView imageThumbnail = (ImageView) gridView
                    .findViewById(R.id.grid_item_image);

            Bitmap bmThumbnail;

            System.out
                    .println(">>>>>>>>>>>>>>>>>>>>>>>>>>>> file path>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"
                            + EntertainmentActivity.fileList[position]);

            bmThumbnail = ThumbnailUtils
                    .createVideoThumbnail(EntertainmentActivity.FILE_PATH + EntertainmentActivity.fileList[position],
                            MediaStore.Video.Thumbnails.MINI_KIND);
            if (bmThumbnail != null) {
                System.out
                        .println(">>>>>>>>>>>>>>>>>>>>>>>>>>>> THUMB NAIL>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");

                imageThumbnail.setImageBitmap(bmThumbnail);
            } else {
                System.out
                        .println(">>>>>>>>>>>>>>>>>>>>>>>>>>>>NO THUMB NAIL>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");

            }

        } else {
            gridView = (View) convertView;
        }

        return gridView;
    }

    public int getCount() {
        // return 0;
        return VideoValues.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

} 
```

main.xml 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ff99cc00" >

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:columnWidth="200dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="4"
        android:padding="10dp"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" >
    </GridView>

</RelativeLayout> 
```

grid_row.xml 行布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="320dp"
    android:layout_height="wrap_content"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="320dp"
        android:layout_height="300dp" />

    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#92d050"
        android:ellipsize="marquee"
        android:gravity="center"
        android:padding="3dp"
        android:singleLine="true"
        android:text="test string"
        android:textColor="@android:color/white" />

</LinearLayout> 
```

AndroidManifest.xml

不要忘记在 AndroidManifest 中添加用户权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# regex - VBA 使用正则表达式将希腊单词作为整个单词进行匹配

> ID：14602843
> 
> 赞同：4
> 
> 时间：2013-01-30T11:25:39.890
> 
> 标签：regex, vba, ms-word

我正在尝试匹配正则表达式模式中的希腊字符。似乎 VBA 在支持 Unicode 方面非常有限，但如果可能的话，我可以使用 ASCII。这是一个示例代码：

```
Sub TestGreekRegEx()
Dim str 
str = "αυτό είναι ένα ελληνικό κείμενο"
Set regEx = CreateObject("vbscript.regexp")
regEx.Pattern = "\b[\xe1-\xfe]+\b"
Set Matches = regEx.Execute(str)
For Each Match In Matches
    MsgBox Match
Next
End Sub 
```

这根本不返回任何匹配项。此外，如果我在 str 的字符中循环，我得到的 ASCII 代码在 \xE1 到 \xFE 的范围内。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:29:24.460

**尝试这个**

```
\b[\u00E1-\u03CE]+\b 
```

顺便说一句，确保处理 UNICODE 字符范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-26T11:03:17.040

撇开希腊 char Unicode 字符范围不谈，您还有另一个问题：`\b`在 ECMAScript 5 标准中，只有 ASCII 匹配边界。

因此，无论希腊词模式对你有用，`[\u00E1-\u03CE]+`或者`[\xE1-\xFE]+`，如果你`\b`在两端添加 s，你将不会得到匹配。

因此，您需要做的是使用组（左侧）和前瞻（右侧）*构建自定义边界。*要提取单词，您需要访问`.Submatches`每个匹配项的属性。

我没有为非 Unicode 文件设置希腊语设置，所以让我想象一下你的单词模式是`[\xE1-\xFE]+`. 然后，您*提取*的正则表达式将如下所示

```
(?:^|[^_0-9\xE1-\xFE])([\xE1-\xFE]+)(?![_0-9\xE1-\xFE]) 
```

有了`[\u00E1-\u03CE]+`图案，它看起来像

```
(?:^|[^_0-9\u00E1-\u03CE])([\u00E1-\u03CE]+)(?![_0-9\u00E1-\u03CE]) 
```

请注意，我在左侧模仿`\b`单词边界（它匹配字符串的开头或任何 char BUT 、数字和字符范围内的字母）和右侧（没有数字，并且在单词匹配模式之后允许您的字符）。请注意，单词匹配模式用括号括起来以将其*捕获*到一个组中。“问题”是非捕获组（）匹配也落在结果中。这就是为什么我们需要访问：`(?:^|[^_0-9\xE1-\xFE])``_``(?![_0-9\xE1-\xFE])``_`*`(?:^|[^_0-9\xE1-\xFE])``.Submatches`*

 *```
Sub TestGreekRegEx()
Dim str 
str = "YOUR_NON_ASCII_STRING_HERE"
Set regEx = CreateObject("vbscript.regexp")
regEx.Pattern = "(?:^|[^_0-9\xE1-\xFE])([\xE1-\xFE]+)(?![_0-9\xE1-\xFE])"
Set Matches = regEx.Execute(str)
For Each Match In Matches
    MsgBox Match.Submatches(0)  ' <--- See here
Next
End Sub 
```*

# java - 如何按条件从数组中获取对象？

> ID：14602844
> 
> 赞同：0
> 
> 时间：2013-01-30T11:25:43.110
> 
> 标签：java, arrays, swing, oop

这是我的实际代码：

```
public TerminalGui[] getTerminalGuis() {
    Components comps[] = this.getComponents();
    int i, j = 0;

    for( i = 0; i < comps.length ; i++ ) {
        if( comps[i] instanceof TerminalGui ) {
            j++;
        }
    }

    TerminalGui terminalGuis[j];
    int k = 0;
    for( Component c : comps ) {
        if( c instanceof TerminalGui ) {
            terminalGuis[k] = c;
            k++;
        }
    }
    return terminalGuis;
} 
```

如何做得更好？我想获取所有作为（接口）`this.getComponents()`实例的对象。`TerminalGui`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:29:43.523

我会这样做：

```
public TerminalGui[] getTerminalGuis() {
    Components comps[] = getComponents();
    List<TerminalGui> list = new ArrayList<TerminalGui>();

    if (comps == null) return null;

    for( Component c : comps ) {
        if( c instanceof TerminalGui ) {
            list.add(c);
        }
    }

    return list.toArray(new TerminalGui[list.size()]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:31:45.957

@NikolayKuznetsov 的答案最好是最少的代码。但在这里你的版本更正了。所以你认识到了可能性。

```
public TerminalGui[] getTerminalGuis() {
    Component[] comps = this.getComponents();
    int j = 0;
    for (int i = 0; i < comps.length; i++) {
        if (comps[i] instanceof TerminalGui) {
            j++;
        }
    }

    TerminalGui[] terminalGuis = new TerminalGui[j];
    int k = 0;
    for (Component c : comps) {
        if (c instanceof TerminalGui) {
            terminalGuis[k] = c;
            k++;
        }
    }
    return terminalGuis;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T11:32:06.377

您可以使用[列表](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

```
public TerminalGui[] getTerminalGuis() {
   Components comps[] = this.getComponents();
   List<TerminalGui> terminals = new ArrayList<TerminalGui>();
   int i;

      for( i = 0; i < comps.length ; ++i ) {
         if( comps[i] instanceof TerminalGui ) {
             terminals.add(comps[i]);
         }
      }
   return terminals.toArray(new TerminalGui[terminals.size()])

} 
```

# unit-testing - 测试复合模式

> ID：14602848
> 
> 赞同：5
> 
> 时间：2013-01-30T11:25:46.140
> 
> 标签：unit-testing, design-patterns, smalltalk, composite

您知道 Smalltalk 中经过良好测试和开源的 Composite 示例吗？

我想回顾一下 Smalltalk 中复合模式的示例实现。任何方言都可以，我对源代码特别感兴趣，包括单元测试用例。[这篇文章](http://plainoldstan.blogspot.com.ar/2008/09/testing-composite-pattern-reusable-test.html)描述了我正在寻找的可以在我的应用程序中重复使用的常见测试片段。

精心设计的实现也很有用，因为我想了解复合测试的结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:55:20.837

复合模式在 Smalltalk 中非常普遍，我怀疑几乎任何大小合理的应用程序都使用这种设计模式的一个或多个用途。我知道的一些包含大量测试的软件包包括：

*   重构引擎：重构引擎包含数十种组合，最突出的是AST的模型。它带有很好的测试集合，并且几乎适用于所有 Smalltalk 方言。

*   Seaside：这个 Web 应用程序框架将请求处理程序、小部件、html 标签、配置等建模为复合对象。同样，它提供了很好的测试集合，并且可以在许多 Smalltalk 平台上使用。

*   Pier：此内容管理系统具有各种组合来对嵌套页面及其内容进行建模。有数百个测试可以验证这些复合结构的构造、破坏和行为。测试是跨类层次结构构建的，许多测试在不同类型的节点上重用。

# matlab - Matlab - 为什么我会收到这个错误

> ID：14602852
> 
> 赞同：0
> 
> 时间：2013-01-30T11:25:53.603
> 
> 标签：matlab, matrix, dimension

我输入了以下内容`matlab`：

```
>> I=imread('23X41.jpg');
>> fun = @(x) sum(x(:).^2)/sum(x(:)).^2; 
>> en= nlfilter(I,[4 4],fun); 
```

而且，出现以下错误？

```
??? Error using ==> plus
Matrix dimensions must agree.

Error in ==> nlfilter at 52
aa = mkconstarray(class(a), padval, size(a)+nhood-1); 
```

为什么会出现此错误，尤其是在图像上滑动`4x4`窗口时`23x41`？为什么这里提到矩阵维度？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:28:32.453

确保您的图像是 2D 而不是 3D 阵列的彩色图像。

# .net - 在 .net 应用程序中禁用连接字符串池

> ID：14602853
> 
> 赞同：2
> 
> 时间：2013-01-30T11:25:54.047
> 
> 标签：.net, sql-server

我想在我的连接字符串中禁用池：我尝试使用`Pooling=false`和`Application Name="Guidish"`. 这里是连接字符串的重要部分：

```
Pooling=False;
MultipleActiveResultSets=True;
Application Name=".Net SqlClient Data Provider67ad035e-c4b4-4382-bdce-e1928cafe5bb" 
```

但没有运气。应用程序仍然使用池中的连接并且不创建新连接。

有任何想法吗？

我想测试一个数据库连接，因此我想每次都创建一个新连接，而不是连接池。

# ios - Objective C >> 有没有办法检查 Selector 返回值？

> ID：14602854
> 
> 赞同：4
> 
> 时间：2013-01-30T11:25:55.680
> 
> 标签：ios, objective-c, selector, return-value

假设我有一个选择器，它可以分配给几种不同的方法——每个方法都有不同的返回值。

有没有办法在调用“performSelector”之前检查选择器所持有的方法的返回值是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T11:37:51.450

> 有没有办法在调用“performSelector”之前检查选择器所持有的方法的返回值是什么？

价值？不，类型？是的。似乎您想要方法的**返回类型**（或者您的问题没有意义）。

```
Method m = class_getInstanceMethod([SomeClass class], @selector(foo:bar:));
char type[128];
method_getReturnType(m, type, sizeof(type)); 
```

然后你可以检查返回的类型字符串在`type`. 例如，`"v"`表示无效（谷歌完整列表）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T11:29:43.950

您可能会为此目的使用 Apple Docs 中推荐的 NSInvocation

这是一些使用 NSInvocation 的示例代码

```
 SEL selector = NSSelectorFromString(@"someSelector");
if ([someInstance respondsToSelector:selector]) {
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:
                                [[someInstance class] instanceMethodSignatureForSelector:selector]];
    [invocation setSelector:selector];
    [invocation setTarget:someInstance];
    [invocation invoke];
    float returnValue;
    [invocation getReturnValue:&returnValue];
    NSLog(@"Returned %f", returnValue);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T13:23:25.300

### 如果该方法没有返回一个对象（它返回一个原始类型），那么使用 NSInvocation 代替。

```
@implementation NSObject(SafePerformSelector)
-(id) performSelectorSafely:(SEL)aSelector;
{
    NSParameterAssert(aSelector != NULL);
    NSParameterAssert([self respondsToSelector:aSelector]);

    NSMethodSignature* methodSig = [self methodSignatureForSelector:aSelector];
    if(methodSig == nil)
        return nil;

    const char* retType = [methodSig methodReturnType];
    if(strcmp(retType, @encode(id)) == 0 || strcmp(retType, @encode(void)) == 0){
        return [self performSelector:aSelector];
    } else {
        NSLog(@"-[%@ performSelector:@selector(%@)] shouldn't be used. The selector doesn't return an object or void", [self class], NSStringFromSelector(aSelector));
        return nil;
    }
}
@end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T11:33:45.803

performSelector：总是返回一个`id`. 返回的实际类型由您调用的方法确定；所以没有办法事先知道。

# java - 使用 Java 在 mongodb 中查找祖先

> ID：14602862
> 
> 赞同：0
> 
> 时间：2013-01-30T11:26:10.317
> 
> 标签：java, mongodb

在 mongo shell 中，我使用以下查询检索元素的祖先（我用祖先数组构建了一个树结构）：

```
db.collection.findOne({_id: "some_unique_id"}).ancestors 
```

Java中的等效代码是什么？

我没有得到正确结果的代码是：

```
BasicDBObject root = new BasicDBObject();
root.put("_id", idObj);
root.put("type", typeObj);

BasicDBObject query = new BasicDBObject("ancestors", root);

DBObject o = locations.findOne(query);
System.out.println(idObj + " - findone => " + o.toString()); 
```

错误在哪里？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:45:17.797

与您的 mongo shell 查询等效的 Java 是：

```
BasicDBObject query = new BasicDBObject("_id", "some_unique_id");
DBObject o = locations.findOne(query);
System.out.println(o.get("ancestors")); 
```

# php - PHP过滤和求和数组值

> ID：14602867
> 
> 赞同：0
> 
> 时间：2013-01-30T11:26:25.047
> 
> 标签：php, arrays

我有一个带有以下数组的 php 脚本（日期、任务、演员、hh:mm）。

```
大批
(
    [0] => 2013-01-29|拍电影|月桂树|07:30
    [1] => 2013-01-29|拍电影|哈代|00:30
    [2] => 2013-01-29|学习PHP|Hardy|07:00
    [3] => 2013-01-29|歌唱签名|基顿|07:30
    [4] => 2013-01-29|拍电影|劳埃德|07:30
    [5] => 2013-01-28|学习PHP|Laurel|07:30
    [6] => 2013-01-28|拍电影|哈代|07:30
    [7] => 2013-01-28|学习PHP|基顿|07:30
    [8] => 2013-01-28|拍电影|劳埃德|07:30
    [9] => 2013-01-27|学习PHP|Laurel|05:30
    [10] => 2013-01-27|拍电影|月桂树|02:30
    [11] => 2013-01-27|学习 PHP|Hardy|07:30
    [12] => 2013-01-27|拍电影|基顿|07:30
    [13] => 2013-01-27|拍电影|劳埃德|07:30
)

```

我想创建一个过滤器，列出任务并总结每个任务的时间值，例如：

学习 PHP（<-selected 选项）

```
2013-01-29 Hardy  07:00
2013-01-28 Laurel 07:30
2013-01-28 Keaton 07:30
2013-01-27 Laurel 05:30
2013-01-27 Hardy  07:30
=======================
TOTAL             35:00 
```

实现这一点的方法是什么？任何建议或后续步骤都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:39:51.340

如果您有一个多维数组，这将更容易过滤。不过，这样的东西适用于当前结构：

```
$task = "Learning PHP";

foreach($arr as $k=>$v) {
    $pieces = explode("|", $v);
    if($pieces[1]==$task) {
        $total += (int) str_replace(':','',$pieces[3]);
        echo $pieces[0] . " " . $pieces[2] . " " . $pieces[3];
    }
}

echo "Total: " . $total; 
```

# php - mysql中的条件查询

> ID：14602873
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:26:45.263
> 
> 标签：php, mysql

我正在创建一个条件搜索，这将取决于大约 9 个参数。现在我只使用 4 并且它已经变得相当大并且维护起来很忙。有人可以建议最好的方法，以便我可以缩短代码行并轻松维护它。下面是我的代码

```
if($min_year=="Select" && $max_year=="") {
        if($makes=='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where  vehicles.manufacturerID=models.manufacturerID and vehicles.modelID=models.modelID 
                    and models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where vehicles.manufacturerID=models.manufacturerID and vehicles.modelID=models.modelID 
                    and models.manufacturerID=manufacturers.manufacturerID");                                   
        } elseif($makes!='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails,vehicles.* from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID  LIMIT $start, $per_page
                    ");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID");           

        } elseif($makes=='All' && $models!='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails,vehicles.* from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID 
                     LIMIT $start, $per_page"); 
            $select_count =  mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID");

        } elseif($makes!='All' && $models!='All Models' && $makes!='select' && $models!='select') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and models.manufacturerID=manufacturers.manufacturerID");          
        } else {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, 
                    manufacturers, vehicles where vehicles.modelID=models.modelID and 
                    models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, vehicles 
                        where vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID");                 
        }
    } elseif($min_year!="Select" && $max_year==""){
        if($makes=='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where  vehicles.manufacturerID=models.manufacturerID and vehicles.year>=$min_year and
                    vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page 
                    ");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where  vehicles.manufacturerID=models.manufacturerID and vehicles.year>=$min_year and
                    vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID");       

        } elseif($makes!='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.year>=$min_year and vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID 
                     LIMIT $start, $per_page");
            $select_count =  mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.year>=$min_year and vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID 
                    ");         

        } elseif($makes=='All' && $models!='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and vehicles.year>=$min_year and
                     models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and vehicles.year>=$min_year and
                     models.manufacturerID=manufacturers.manufacturerID");              
        } else {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails,vehicles.* from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and vehicles.year>=$min_year and models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
            $select_count =  mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and vehicles.year>=$min_year and models.manufacturerID=manufacturers.manufacturerID");         
        }       
    } elseif($min_year=="Select" && $max_year!=""){
        if($makes=='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where  vehicles.manufacturerID=models.manufacturerID and vehicles.year<=$max_year and
                    vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID  LIMIT $start, $per_page
                    ");
            $select_count =  mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where  vehicles.manufacturerID=models.manufacturerID and vehicles.year<=$max_year and
                    vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID");       

        } elseif($makes!='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.year<=$max_year and vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID 
                     LIMIT $start, $per_page"); 
            $select_count =  mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.year<=$max_year and vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID 
                    ");      

        } elseif($makes=='All' && $models!='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and vehicles.year<=$max_year and
                     models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
            $select_count =  mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and vehicles.year<=$max_year and
                     models.manufacturerID=manufacturers.manufacturerID");              
        } else {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and vehicles.year<=$max_year and models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
           $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and vehicles.year<=$max_year and models.manufacturerID=manufacturers.manufacturerID");             
        }       
    } else {
        if($makes=='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where  vehicles.manufacturerID=models.manufacturerID and vehicles.year<=$max_year and vehicles.year>=$min_year
                     and vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page 
                    ");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where  vehicles.manufacturerID=models.manufacturerID and vehicles.year<=$max_year and vehicles.year>=$min_year
                     and vehicles.modelID=models.modelID and models.manufacturerID=manufacturers.manufacturerID");      

        } elseif($makes!='All' && $models=='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.year<=$max_year and vehicles.year>=$min_year and vehicles.modelID=models.modelID 
                    and models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page ");  
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where  models.manufacturerID=$makes and vehicles.manufacturerID=models.manufacturerID and 
                    vehicles.year<=$max_year and vehicles.year>=$min_year and vehicles.modelID=models.modelID 
                    and models.manufacturerID=manufacturers.manufacturerID");       

        } elseif($makes=='All' && $models!='All Models') {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and vehicles.year<=$max_year and vehicles.year>=$min_year and
                     models.manufacturerID=manufacturers.manufacturerID LIMIT $start, $per_page");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where vehicles.modelID=models.modelID and vehicles.year<=$max_year and vehicles.year>=$min_year and
                     models.manufacturerID=manufacturers.manufacturerID");              
        } else {
            $select = mysql_query("select models.modelID, models.manufacturerID, models.modelName, manufacturers.manufacturerID, 
                    manufacturers.manufacturerName, manufacturers.manufacturerDetails, vehicles.* from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and vehicles.year<=$max_year and vehicles.year>=$min_year and models.manufacturerID=manufacturers.manufacturerID 
                      LIMIT $start, $per_page");
            $select_count = mysql_query("select count(vehicles.modelID) as count from models, manufacturers, 
                    vehicles where models.modelID=$models and models.manufacturerID=$makes and vehicles.modelID=models.modelID
                     and vehicles.year<=$max_year and vehicles.year>=$min_year and models.manufacturerID=manufacturers.manufacturerID 
                     ");            
        }       
    } 
```

正如你所看到的，这些循环变得越来越长和复杂。请提出一些建议。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:49:58.860

使您的 sql 更通用，而不是预先构建每个案例。只是一个简单的例子：

```
$strQuery = 'select 
 models.modelID
,models.manufacturerID
,models.modelName
,manufacturers.manufacturerID
,manufacturers.manufacturerName
,manufacturers.manufacturerDetails
,vehicles.*
from 
models
,manufacturers
,vehicles';

$aWhere = array();
if($min_year != "Select")
{
    array_push($aWhere,'vehicles.year >= ' . $min_year);
}
if($makes != 'All')
{
    array_push($aWhere,'models.manufacturerID=' . $makes);
}

if(count($aWhere) > 0)
{
    $strQuery = $strQuery . ' WHERE ';
}
for($i = 0;$i < count($aWhere);$i++)
{
    if($i == 0)
    {
        $strQuery .= $aWhere[$i];
    }
    else
    {
        $strQuery .= ' AND ' . $aWhere[$i];
    }
}

// Append the other things like order by or limit ... 
```

刮

PS：不要忘记转义你的 sql-query 变量！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:32:27.037

你的代码真的已经很复杂了。据我了解，您有 9 个条件来显示不同的查询。

我*假设*，每个条件都会添加一个查询。

现在，您检查条件，然后选择适当的查询。为什么不根据每个条件逐步构建查询？

# spring - 将 Struts 与 Spring 集成

> ID：14602875
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:26:54.817
> 
> 标签：spring, integration, struts-1

我看到一堆关于如何将 Struts 1.3.x 与 Spring 3.0.x 集成的文章，它们都引用了已弃用的类。

什么是正确和最新的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:42:21.030

如果您必须实现 Struts 1.3 和 Spring 3.0，那么不推荐使用的类*是方法。*

Struts 1 已经很老了，没有什么理由让新的 Spring 版本继续支持它。

换句话说，如果你*继续*使用旧的 Struts*和*旧的 Spring，一切都很好。

但是，如果您想继续对 Spring 进行版本控制，您会遇到问题，因为不推荐使用的类/方法在未来的修订版中可能存在也可能不存在。

理想情况下，您会迁移到 Struts 2 或 Spring MVC，但显然这并不总是可行的。

# html - 在内容的左侧和右侧浮动导航元素

> ID：14602876
> 
> 赞同：0
> 
> 时间：2013-01-30T11:26:59.170
> 
> 标签：html, css

我试图在某些内容的两侧浮动两个“导航”元素。当用户向下滚动页面时，这些元素应该保持原位（并且可见）。

示例：（见小于和大于符号）：http: [//jsfiddle.net/dbough/tASs2/](http://jsfiddle.net/dbough/tASs2/)

我尝试使用 position:fixed 将两个元素“修复”到位，但它会导致元素折叠在一起

示例：http: [//jsfiddle.net/dbough/tASs2/1/](http://jsfiddle.net/dbough/tASs2/1/)

寻找如何使这项工作的方向。

HTML

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="main.css">
</head>

<body>
<div id="container">
    <div id="nav">
        <span id="nav_left">&nbsp;&lt;</span> 
        <span id="nav_right">&nbsp;&gt;</span>
    </div>
    <div id="content">
        SOME CONTENT
    </div>
</div>
</body>
</html> 
```

CSS（无固定定位）

```
#container{
    width:100%;
    height:100%;
    margin:auto;
    padding:auto;
    max-width: 400px;
}
#content{
    margin:auto;
    padding:auto;
}
#nav_left, #nav_right{
    max-width: 10px;
    font-size: 200%;
}
#nav_left {
        margin-left:-10%;
}
#nav_right {
    float:right;
    margin-right:-10%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:32:36.190

给`position:absolute`箭头类和`relative`父 div`#container`

```
#nav_left {
        left:0; position:absolute
}
#nav_right {
    right:0; position:absolute
} 
```

**[演示](http://jsfiddle.net/tASs2/2/)**

* * *

**对于固定箭头**

在`relative`div 内使用`fixed`div 并通过以下方式对齐子 div`position:absolute`

**HTML**

```
<div id="nav">
           <div id="wrap"> 
               <div id="nav_left">&lt;&nbsp;</div> <div id="nav_right">&nbsp;&gt;</div>
        </div>
</div> 
```

**CSS**

```
#nav{position:fixed;  
    width:100%; 
    height:40px;
}
#wrap{
    position:relative; 
    width:100%; 
    height:40px;
}
#nav_left {
        left:15%;
    position:absolute
}
#nav_right {
    right:15%;
    position:absolute
} 
```

**[演示 2](http://jsfiddle.net/tASs2/6/)**

**或者**用简单的方法直接`position:fixed`给子 div 并删除外部 div

**HTML**

```
<div id="nav_left">&lt;&nbsp;</div> <div id="nav_right">&nbsp;&gt;</div> 
```

**CSS**

```
#nav_left {
        left:15%;
    position:fixed
}
#nav_right {
    right:15%;
    position:fixed
} 
```

**[演示 3](http://jsfiddle.net/tASs2/7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:40:46.067

使用时，您`position: fixed`也应该使用`top`///属性，而不是使用`bottom`or边距。请参阅有关[position](http://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#positioning-scheme)的 W3C CSS 规范。`right``left``float`

见[http://jsfiddle.net/pqbkN/](http://jsfiddle.net/pqbkN/)

在这种情况下，您应该将箭头更改`span`为：

```
#nav_left {
    /*margin-left:-10%;*/
    left: 2em;
    top: 1em;
}
#nav_right {
    /*float:right;*/
    right: 4em;
    top: 1em;
    /*margin-right:-10%;*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:34:53.380

用于 #nav-right 的固定版本，而不是 margin-right:10% 但 right:10%。

# java - 从浏览器调用 REST Web 服务 URL

> ID：14602877
> 
> 赞同：2
> 
> 时间：2013-01-30T11:27:01.277
> 
> 标签：java, web-services, rest, tomcat, cxf

我已经部署了简单的 REST 接口。假设我的 REST 服务部署在此上下文路径中：

```
http://localhost:8080/Engine/services/Evaluation 
```

然后我像这样调用 URL：

```
http://localhost:8080/Engine/services/Evaluation?_wadl 
```

我可以看到 XML 输出：

```
<application>
    <grammars/>
    <resources base="http://localhost:8080/Engine/services/Evaluation">
        <resource path="/Evaluation/">
            <resource path="initializeEvaluation/{localeCode}">
                <param name="localeCode" style="template" type="xs:string"/>
                <method name="GET">
                    <request>
                        <representation mediaType="application/octet-stream"/>
                    </request>
                    <response>
                        <representation mediaType="application/json"/>
                    </response>
                </method>
            </resource>
        </resource>
    </resources>
</application> 
```

问题是如何从浏览器调用带有 URL 的方法？

我试图输入：

```
http://localhost:8080/Engine/services/Evaluation/initializeEvaluation?localeCode=en-GB 
```

但我有：

```
2013-01-30 11:22:13,477 [http-bio-8080-exec-3] WARN   JAXRSInInterceptor - No root resource matching request path /Engine/services/Evaluation/initializeEvaluation has been found, Relative Path: /initializeEvaluation. Please enable FINE/TRACE log level for more details.
2013-01-30 11:22:13,479 [http-bio-8080-exec-3] WARN   WebApplicationExceptionMapper - javax.ws.rs.NotFoundException 
```

我是 REST 的新手，但据我所知，URL 应该像上面那样。那为什么我会遇到异常？

我的java接口：

```
@Path("/Evaluation/")
@Produces(MediaType.APPLICATION_JSON)
public interface EvaluationService {

    @GET
    @Path("initializeEvaluation/{localeCode}")
    EvaluationStatus initializeEvaluation(ClientType client, @PathParam("localeCode") String localeCode)
            throws EvaluationException;

} 
```

我正在使用 Apache CXF 2.7.0、JDK 1.7、Tomcat 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:01:29.830

这是一个路径参数。因此，我认为 URL 应该是：

```
http://localhost:8080/Engine/services/Evaluation/initializeEvaluation/en-GB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:33:06.507

您的 @Path 注释中缺少 / 。

```
@Path("/initializeEvaluation/{localeCode}") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:32:08.373

使用[RestClient](https://addons.mozilla.org/en-us/firefox/addon/restclient/)插件，它让你的生活更轻松。

# xslt - xslt 2 中 xs:decimal 和 number 有什么区别

> ID：14602878
> 
> 赞同：1
> 
> 时间：2013-01-30T11:27:02.880
> 
> 标签：xslt, xslt-2.0

xslt 2.0`xs:decimal`和in 之间有什么区别？`number`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:00:42.040

在 XSLT 和 XPath 1.0 中只有一种数字类型，即双精度浮点数。XSLT 和 XPath 2.0 具有更丰富的类型系统，取自 W3C XML 模式语言（并部分扩展了该类型系统）。

`xs:decimal`在 XSLT 和 XPath 2.0中既是类型又是[构造函数](http://www.w3.org/TR/xquery-operators/#constructor-functions)，因此您可以在指定序列类型的地方使用它，例如在`as`属性（例如`<xsl:param name="input" as="xs:decimal"/>`）中以及将值转换为`xs:decimal`任何 XPath 表达式中的值，例如`<xsl:variable name="input" select="xs:decimal(//foo)"/>`.

该`[number][2]`函数从 XSLT 和 XPath 1.0 开始存在，并将其参数转换为双精度浮点数，在 XSLT 和 XPath 2.0 类型系统中由类型表示，`xs:double`例如`<xsl:variable name="input" select="number(//foo)"/>`. XPath 和 XSLT 2.0 中还有一个[构造函数`xs:double`](http://www.w3.org/TR/xquery-operators/#constructor-functions)。

# html - Facebook Like Box 集成

> ID：14602880
> 
> 赞同：4
> 
> 时间：2013-01-30T11:27:04.157
> 
> 标签：html, facebook, plugins

我正在为一个网站工作，需要集成一个 Facebook Like Box。

我已经输入了 Facebook ID，然后它会生成一些代码，但[我无法单击 XFBML IFRAME 和 URL Button 来生成代码，只有 HTML5 Button](http://s14.directupload.net/file/d/3151/3ebjckv3_png.htm)。

到目前为止，我有这个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<title>Page Under Construction</title>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">

</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like-box" data-href="http://www.facebook.com/pages/RW-    Fliesen/115860578491339" data-width="292" data-show-faces="false" data-colorscheme="light" data-stream="false" data-header="false"></div>

</body>
</html> 
```

这给了我[这个输出](http://s7.directupload.net/file/d/3151/p57fij5m_png.htm)。

但我需要整个 Like Box。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:48:49.697

在页面[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)如果我们创建类似按钮，我们将获得链接中显示的代码...

如果我们检查源代码（在 mozilla 或 chrome 中），您可以看到 `<a class="uiPillButton" href="#" id="button-xfbml">XFBML</a>`链接 XFBML。

由于 href= # 它不会显示任何其他页面... facebook 可能正在处理该问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:30:45.680

我遇到了同样的问题，脚本src中有错误，`"http:"`丢失了

看看图片：[http ://solarlogos.wordpress.com/2012/08/21/facebook-like-box-bug/](http://solarlogos.wordpress.com/2012/08/21/facebook-like-box-bug/)

# xml - 声明一个 xsl 变量并为其赋值

> ID：14602884
> 
> 赞同：15
> 
> 时间：2013-01-30T11:27:09.483
> 
> 标签：xml, xslt, xpath, apache-cocoon

我正在开发一个使用 apache cocoon 将 XML 转换为 PDF 的应用程序，并且我正在重新设计处理输入 XML 的 XSL。

目前在 XSL 中，我们有这样的代码

```
<xsl:variable name="variable1">
   <xsl:choose>
     <xsl:when test="$testVariable ='1'">
        <xsl:value-of select="'A'"/>
     </xsl:when>
     <xsl:when test="$testVariable ='1'">
        <xsl:value-of select="'B'"/>
     </xsl:when>
   </xsl:choose>
</xsl:variable>

<xsl:variable name="variable2">
   <xsl:choose>
     <xsl:when test="$testVariable ='1'">
        <xsl:value-of select="'X'"/>
     </xsl:when>
     <xsl:when test="$testVariable ='1'">
        <xsl:value-of select="'Y'"/>
     </xsl:when>
   </xsl:choose>
</xsl:variable> 
```

如果我把它改成这个，它会起作用吗？

```
<xsl:variable name="variable1"/>
<xsl:variable name="variable2"/>
<xsl:choose>
   <xsl:when test="$testVariable ='1'">
         <xsl:variable name="variable1" select="'A'">        
         <xsl:variable name="variable2" select="'X'">
   </xsl:when> 
   <xsl:when test="$testVariable ='2'">
         <xsl:variable name="variable1" select="'B'">        
         <xsl:variable name="variable2" select="'Y'">
   </xsl:when> 
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-30T11:38:41.597

不，与许多其他语言不同，XSLT 变量在创建后无法更改其值。但是，您可以使用以下技术避免无关代码：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:variable name="mapping">
    <item key="1" v1="A" v2="B" />
    <item key="2" v1="X" v2="Y" />
  </xsl:variable>
  <xsl:variable name="mappingNode"
                select="document('')//xsl:variable[@name = 'mapping']" />

  <xsl:template match="....">
    <xsl:variable name="testVariable" select="'1'" />

    <xsl:variable name="values" select="$mappingNode/item[@key = $testVariable]" />

    <xsl:variable name="variable1" select="$values/@v1" />
    <xsl:variable name="variable2" select="$values/@v2" />
  </xsl:template>
</xsl:stylesheet> 
```

事实上，一旦你得到了`values`变量，你甚至可能不需要单独`variable1`的和`variable2`变量。你可以使用`$values/@v1`and`$values/@v2`代替。

# text - 批处理文件创建另一个批处理文件，写行时如何忽略命令？

> ID：14602890
> 
> 赞同：5
> 
> 时间：2013-01-30T11:27:18.217
> 
> 标签：text, batch-file, echo, symbols

我正在编写的 Windows 批处理文件有点麻烦。

我需要批处理文件将一些特定的行写入另一个批处理文件，我一直使用的方法是：

```
type NUL > batchfile.bat
ECHO texttobewrittentofile >> batchfile.bat
ECHO texttobewrittentofile >> batchfile.bat
ECHO texttobewrittentofile >> batchfile.bat
...
etc 
```

大多数行都写得很好，但是我的批处理文件写入另一个批处理文件时遇到了一些不同的问题。

我的批处理文件写入另一个批处理文件的代码是：

```
ECHO @echo off >> GenerateEmail.bat
ECHO ECHO Opening Stunnel >> GenerateEmail.bat
ECHO pushd .\stunnel\ >> GenerateEmail.bat
ECHO start "" stunnel.exe stunnel.conf >> GenerateEmail.bat
ECHO popd >> GenerateEmail.bat
ECHO ECHO Determining latest log for use with blat >> GenerateEmail.bat
ECHO pushd O:\Logs\%clientname%\ >> GenerateEmail.bat
ECHO for /f "tokens=*" %%a in ('dir /b /od') do set newest=%%a >> GenerateEmail.bat
ECHO popd >> GenerateEmail.bat
ECHO ECHO Generating email containing contents of latest log >> GenerateEmail.bat
ECHO pushd .\blat307\full\ >> GenerateEmail.bat
ECHO ECHO Y | xcopy "O:\Logs\%clientname%\%newest%" ".\" >> GenerateEmail.bat
ECHO blat.exe "%newest%" -to %clientemail% -cc %gmailemail% -server 127.0.0.1:1099 -subject "Offsite Backup for "%1" "%2" - %clientname%" -sig sig.txt >> GenerateEmail.bat
ECHO DEL .\*.log >> GenerateEmail.bat
ECHO popd >> GenerateEmail.bat
ECHO ECHO Closing Stunnel >> GenerateEmail.bat
ECHO pushd .\stunnel\ >> GenerateEmail.bat
ECHO stunnel.exe -exit >> GenerateEmail.bat
ECHO popd >> GenerateEmail.bat 
```

我没有得到我想要的输出，我遇到了以下问题：

`ECHO Y | xcopy "O:\Logs\%clientname%\%newest%" ".\" >> GenerateEmail.bat`

出来作为

`0 File(s) copied`

在我需要 %% 的任何地方，它都以 % 的形式出现，并且以“blat.exe”开头的行在其他问题中根本没有写入。有没有办法让批处理文件写入文本行而不确认这些行中包含的任何命令或符号？

凯恩。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T12:48:26.597

所有像这样的特殊字符都`^` `&` `|` `<` `>`必须转义为`^^` `^&` `^|` `^<` `^>`或用引号括起来。

每个百分比都必须始终翻倍。例如：

*   `"%1"`变成`"%%1"`
*   `%newest%`变成`%%newest%%`
*   `%%a`变成`%%%%a`

如果在所有 ECHO 语句周围加上括号，则无需清除输出文件并重定向每一行。如果这样做，右括号也必须转义。

```
>GenerateEmail.bat (
  echo Line 1
  echo Line 2
  echo these must be escaped ^^ ^& ^| ^> ^< ^), these not "^ & | > < )"
) 
```

如果您启用了延迟扩展并且您的输出包含`!`或`!`with ，则规则会变得更加复杂`^`。

还有其他方法可以避免必须弄清楚如何转义特殊字符和加倍百分比。

您可以为每行添加前缀`:::`并将 FOR /F 与 FINDSTR 一起使用以获得所需的输出。如果您的输出包含`!`. 下面代码的唯一限制是您的输出行不能以`:`（它可以以空格开头，后跟`:`）开头。

```
(for /f "tokens=* delims=:" %%L in ('findstr /b ::: "%~f0"') do echo %%L) >GenerateEmail.bat
:::echo special chars & | < > don't need to be escaped
:::echo % does not need to be doubled
::: :Label
::: :: Comment and label must be indented with at least one space
:::etc 
```

另一种选择是使用以下技术之一：

*   [将段落的内容回显到文件中而不对段落进行任何修改？](https://stackoverflow.com/q/14548151/1012053)
*   [在 Windows 批处理中打印一个段落](https://stackoverflow.com/q/14559789/1012053)

# tsung - Tsung 不使用 JabberHttpBind

> ID：14602893
> 
> 赞同：2
> 
> 时间：2013-01-30T11:27:29.617
> 
> 标签：tsung

我正在使用 tsung 用 openfire 和 jabberd2 测试 BOSH。我可以用 tsung 测试 openfire。但是对于 jabberd2+JabberHttpBind，身份验证本身不会发生。

任何解决问题的线索或技巧都将非常有帮助。提前致谢。

# php - 将 HTML 格式转换为文本格式

> ID：14602897
> 
> 赞同：0
> 
> 时间：2013-01-30T11:27:51.707
> 
> 标签：php

我确实有一个表格，其中包含一些数据和一个表格。我在单击表格的任何行时绑定此表格，这意味着与相应行相关的数据被填充到来自数据库的表格中，我担心的是，在来自数据库的这些数据中，其中一个字段是“def_text”，它基本上以 HTML 格式存储，但我想以我绑定它的形式以纯文本格式显示它。

```
<form class="form report live " data-table="contractlistTable" id="contractlistForm"  data-bind="foreach:items"  target="_blank" method="post">
            <input type="hidden" name="pid" id="pid" />
            <div class="control-group ">
                <label class="control-label">Title</label>
                <div class="controls">
                        <input type="text" id="title" name="title" required title="required" placeholder="title" data-bind="value:title" />
                        <input type="checkbox" id="active" name="active" class="check" data-bind="checked: active=='true'"  />Active
                </div>
            </div>
            <div class="control-group ">
                <label class="control-label">Default Text</label>
                <textarea id="def_text" name="def_text" class="htmleditor" rows="9" cols="50" style="width: 600px; height: 190px;" data-bind="value:def_text"> </textarea>
            </div>
</form> 
```

这是表格，表格的代码是

```
<table class="table table-hover table-bordered" id="contractlistTable" style="width: 304px;">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Active</th>
                </tr>
            </thead>
            <tbody data-bind="foreach:items" class="bindable" data-model="companycontract">
                 <tr data-bind="attr:{'data-value': id,'data-index':$index}">
                    <td data-bind="text:title"></td>
                    <td>
                        <!-- ko if:active === 'true' -->
                        <span class="badge badge-success"></span>
                        <!-- /ko -->
                        <!-- ko if: active === 'false' -->
                        <span class="badge"></span>
                        <!-- /ko -->
                    </td>
                </tr>
            </tbody>
        </table> 
```

并且为了绑定它，我正在使用 Knockout.js

```
$(function () {
        var myForm = "";
        var formFields;
        $("#contractlistTable tbody tr").live('click', function () {
            var data = [model.companycontract[$(this).attr("data-index")]];
            if (!!formFields) formFields.refill(data);
            else {
                formFields = new DynamicModel(data);
                ko.applyBindings(formFields, document.getElementById("contractlistForm"));
            };

            var id = [$(this).attr("data-value")];

            var kunnr = $('#kunnr').val();
            $('.report').attr("action", 'http://wcidevapps.com/salescentral/pcontract.php?ct=i&knr=' + kunnr + '&cid=' + id);

        });
 }); 
```

所以请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:41:12.977

在您的 php 代码中，您可以使用条形标签来清除 html 标签......检查这个： http: [//php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

像这样使用：

```
$test = '<p>Test</p>, <h1> Big test </h1>';
echo strip_tags($test); 
```

结果：测试，大测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:55:26.883

如果您需要将 HTML 格式转换为纯文本格式，请使用 HTML 编辑器。

```
var wysihtml5Editor222 = $('#iiii').wysihtml5().data("wysihtml5").editor; 
```

在视图中：

```
 <textarea id="iiii" name="iiii" class="htmleditor" rows="9" cols="50" style="width: 600px; height: 190px;""></textarea> 
```

# asp.net-mvc-3 - MVC3：在通过 Html.Editorfor 发布可空 int 时将“Int32 转换为可空”错误

> ID：14602899
> 
> 赞同：0
> 
> 时间：2013-01-30T11:28:00.267
> 
> 标签：asp.net-mvc-3, post, nullable, editorfor, type-conversion

我有具有属性的视图模型（用于过滤）：

```
int? Id {get;set;} 
```

在我看来，我有这样的东西：

```
@Html.EditorFor(m=>m.Id) 
```

当我提交表单时出现错误：

```
Invalid cast from 'System.Int32' to 'System.Nullable`1[[System.Int32, 
mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]'. 
```

我不想那样做：

```
@Html.TextBox("Model.Id", Model.Id.HasValue ? MOdelId.Value : 0) 
```

当我在 Fiddler 中检查时，参数 ID 具有正确的值，但我什至无法调试，因为它没有进入 Action 方法。

你能帮助我吗？

PS对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:23:53.340

为了让调试器到达断点，它应该首先通过模型绑定器。模型绑定器是将 HTTP 请求中的值神奇地绑定到模型的东西。所有解析都将在模型绑定器中进行，如果它在那里失败，您将永远不会在您的操作方法中遇到断点。

在您的视图中尝试以下操作

```
@Html.EditorFor(m=>m.Id, new {name = ‘Id’, id=’Id’}) 
```

或者

```
@Html.TextBoxFor(m=>m.Id) 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:48:48.447

这就是我生成的视图的样子：

```
<input class="text-box single-line" id="Filter_Id" name="Filter.Id" type="text" value=""> 
```

PS：我正在使用许多其他属性（我的日期时间也可以为空）并且只有当我在这个愚蠢的 int 中输入值时才会得到错误？;/

# cuda - GPU 在 Julia 集计算中没有提高性能

> ID：14602900
> 
> 赞同：3
> 
> 时间：2013-01-30T11:28:05.557
> 
> 标签：cuda, gpgpu, gpu

我正在尝试比较 CPU 和 GPU 的性能。我有

*   CPU : Intel® Core™ i5 CPU M 480 @ 2.67GHz × 4
*   显卡：英伟达 GeForce GT 420M

我可以确认 GPU 已配置并与 CUDA 一起正常工作。

我正在实现 Julia 集计算。[http://en.wikipedia.org/wiki/Julia_set](http://en.wikipedia.org/wiki/Julia_set) 基本上对于每个像素，如果坐标在集合中，它将把它涂成红色，否则把它涂成白色。

虽然，我对 CPU 和 GPU 都得到了相同的答案，但我没有得到性能改进，而是使用 GPU 得到了性能损失。

运行时间

*   CPU : 0.052s
*   显卡：0.784s

我知道将数据从设备传输到主机可能需要一些时间。但是，我怎么知道使用 GPU 是否真的有益？

这是相关的GPU代码

```
 #include <stdio.h>
    #include <cuda.h>

    __device__ bool isJulia( float x, float y, float maxX_2, float maxY_2 )
    {
        float z_r = 0.8 * (float) (maxX_2 - x) / maxX_2;
        float z_i = 0.8 * (float) (maxY_2 - y) / maxY_2;

        float c_r = -0.8;
        float c_i = 0.156;
        for( int i=1 ; i<100 ; i++ )
        {
        float tmp_r = z_r*z_r - z_i*z_i + c_r;
        float tmp_i = 2*z_r*z_i + c_i;

        z_r = tmp_r;
        z_i = tmp_i;

        if( sqrt( z_r*z_r + z_i*z_i ) > 1000 )
            return false;
        }
        return true;
    }

    __global__ void kernel( unsigned char * im, int dimx, int dimy )
    {
        //int tid = blockIdx.y*gridDim.x + blockIdx.x;
        int tid = blockIdx.x*blockDim.x + threadIdx.x;
        tid *= 3;
        if( isJulia((float)blockIdx.x, (float)threadIdx.x, (float)dimx/2, (float)dimy/2)==true )
        {
        im[tid] = 255;
        im[tid+1] = 0;
        im[tid+2] = 0;
        }
        else
        {
        im[tid] = 255;
        im[tid+1] = 255;
        im[tid+2] = 255;
        }

    }

    int main()
    {
        int dimx=768, dimy=768;

        //on cpu
        unsigned char * im = (unsigned char*) malloc( 3*dimx*dimy );

        //on GPU
        unsigned char * im_dev;

        //allocate mem on GPU
        cudaMalloc( (void**)&im_dev, 3*dimx*dimy ); 

        //launch kernel. 
**for( int z=0 ; z<10000 ; z++ ) // loop for multiple times computation**
{
        kernel<<<dimx,dimy>>>(im_dev, dimx, dimy);
}

        cudaMemcpy( im, im_dev, 3*dimx*dimy, cudaMemcpyDeviceToHost );

        writePPMImage( im, dimx, dimy, 3, "out_gpu.ppm" ); //assume this writes a ppm file

        free( im );
        cudaFree( im_dev );
    } 
```

这是CPU代码

```
 bool isJulia( float x, float y, float maxX_2, float maxY_2 )
    {
        float z_r = 0.8 * (float) (maxX_2 - x) / maxX_2;
        float z_i = 0.8 * (float) (maxY_2 - y) / maxY_2;

        float c_r = -0.8;
        float c_i = 0.156;
        for( int i=1 ; i<100 ; i++ )
        {
        float tmp_r = z_r*z_r - z_i*z_i + c_r;
        float tmp_i = 2*z_r*z_i + c_i;

        z_r = tmp_r;
        z_i = tmp_i;

        if( sqrt( z_r*z_r + z_i*z_i ) > 1000 )
            return false;
        }
        return true;
    }

    #include <stdlib.h>
    #include <stdio.h>

    int main(void)
    {
      const int dimx = 768, dimy = 768;
      int i, j;

      unsigned char * data = new unsigned char[dimx*dimy*3];

**for( int z=0 ; z<10000 ; z++ ) // loop for multiple times computation**
{
      for (j = 0; j < dimy; ++j)
      {
        for (i = 0; i < dimx; ++i)
        {
          if( isJulia(i,j,dimx/2,dimy/2) == true )
          {
          data[3*j*dimx + 3*i + 0] = (unsigned char)255;  /* red */
          data[3*j*dimx + 3*i + 1] = (unsigned char)0;  /* green */
          data[3*j*dimx + 3*i + 2] = (unsigned char)0;  /* blue */
          }
          else
          {
          data[3*j*dimx + 3*i + 0] = (unsigned char)255;  /* red */
          data[3*j*dimx + 3*i + 1] = (unsigned char)255;  /* green */
          data[3*j*dimx + 3*i + 2] = (unsigned char)255;  /* blue */
          }
        }
      }
}

      writePPMImage( data, dimx, dimy, 3, "out_cpu.ppm" ); //assume this writes a ppm file
      delete [] data

      return 0;
    } 
```

此外，根据@hyde 的建议，我循环了仅计算部分以生成 10,000 张图像。不过，我并不费心写所有这些图像。我正在做的只是计算。

以下是运行时间

*   CPU：超过 10 分钟，代码仍在运行
*   GPU：1m 14.765s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:05:25.100

将评论转为回答：

要得到相关的数字，需要计算不止一张图片，这样执行时间至少是几秒或者几十秒。此外，在结果中包含文件保存时间会增加噪音并隐藏实际的 CPU 与 GPU 差异。

获得真实结果的另一种方法是选择一个 Julia 集，该集具有属于该集的很多点，然后将迭代次数提高到如此之高，以至于只计算一个图像就需要很多秒。然后只有一个计算设置，因此这可能是 GPU/CUDA 最有利的场景。

要测量有多少开销，请将图像大小更改为 1x1 和迭代限制 1，然后计算至少需要几秒钟的足够图像。在这种情况下，GPU 可能会明显变慢。

要获得与您的用例最相关的时间，请选择您真正要使用的图像大小和迭代计数，然后测量图像计数，这两个版本的速度相同。这会给你一个粗略的经验法则来决定你应该在什么时候使用。

实际结果的替代方法，如果您只想获得一张图像：找到单个最坏情况图像的迭代限制，其中 CPU 和 GPU 速度相同。如果这么多或更多的迭代是有利的，请选择 GPU，否则选择 CPU。

# android - 无法将自定义标题应用于上下文菜单（android）

> ID：14602904
> 
> 赞同：1
> 
> 时间：2013-01-30T11:28:25.050
> 
> 标签：android, layout, header, android-contextmenu

嗨，我正在开发小型 android 应用程序。在我的应用程序中，我展示了一个上下文菜单。一切正常，唯一的问题是我无法将标题视图设置为我的上下文菜单。我的代码看起来像

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {

    super.onCreateContextMenu(menu, v, menuInfo);
    LayoutInflater headerInflater = (LayoutInflater) getSherlockActivity()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    ViewGroup header = (ViewGroup) headerInflater.inflate(
            R.layout.context_menu_header, null);

    menu.setHeaderView(header);
    menu.setHeaderTitle("Edit Profile Pic");

    MenuInflater inflater = getActivity().getMenuInflater();
    inflater.inflate(R.menu.menu_camera, menu);
} 
```

和我的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

 <ImageView
        android:id="@+id/context_menu_header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/actionbar" 
        />
</LinearLayout> 
```

它没有将该布局文件作为标题视图......我还阅读了这个[为 ContextMenu 应用自定义标题](https://stackoverflow.com/questions/11205812/applying-a-custom-header-for-contextmenu)

但这对我不起作用..需要帮助谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T06:32:22.200

如果我在设置标题视图后设置标题标题，则不会应用该视图。在 xml 视图本身中插入该设置的标题标题，并在您应用标题视图时设置标题。像以下方式..

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {

super.onCreateContextMenu(menu, v, menuInfo);
LayoutInflater headerInflater = (LayoutInflater) getSherlockActivity()
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

ViewGroup header = (ViewGroup) headerInflater.inflate(
        R.layout.context_menu_header, null);

   // menu.setHeaderView(header);
  TextView title = (TextView) header
                .findViewById(R.id.header_textView);
        title.setText("Edit Profile Pic");
    menu.setHeaderView(header);
//menu.setHeaderTitle("Edit Profile Pic");

MenuInflater inflater = getActivity().getMenuInflater();
inflater.inflate(R.menu.menu_camera, menu);
} 
```

它会正常工作。它与这个问题[Applying a custom header for ContextMenu](https://stackoverflow.com/questions/11205812/applying-a-custom-header-for-contextmenu)相同。

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-28T09:37:59.990

在 Android 8.1 中，ContextMenu 将创建一个 StandardMenuPopup，并且它永远不会为您的自定义标题视图调用 menu.getHeaderView。这意味着 setHeaderView() 未使用。

```
private boolean tryShow() {
    ...
    if (mShowTitle && mMenu.getHeaderTitle() != null) {
            FrameLayout titleItemView =
                    (FrameLayout) LayoutInflater.from(mContext).inflate(
                            com.android.internal.R.layout.popup_menu_header_item_layout,
                            listView,
                            false);
            TextView titleView = (TextView) titleItemView.findViewById(
                    com.android.internal.R.id.title);
            if (titleView != null) {
                titleView.setText(mMenu.getHeaderTitle());
            }
            titleItemView.setEnabled(false);
            listView.addHeaderView(titleItemView, null, false);

            // Update to show the title.
            mPopup.show();
        }
    ...
} 
```

# ruby-on-rails-3 - mongoid“存在”没有按预期工作

> ID：14602905
> 
> 赞同：3
> 
> 时间：2013-01-30T11:28:26.260
> 
> 标签：ruby-on-rails-3, mongoid

您好正在尝试查询并给我奇怪的结果。我正在尝试获取不存在字段的对象列表，其中添加了 where 子句。

第一步 where 子句：

```
ContentMirror.where(source: 'some_source').count 
```

此查询返回 9984 条记录。 `some_source`有一个现场电话`vid_emded_obj`，我知道有些是`nil`例如：

```
ContentMirror.find('50fff286781200986e000ae3')
=> #<ContentMirror _id: 50fff286781200986e000ae3, _type: nil, created_at: 2012-12-15 13:12:22 UTC, updated_at: 2013-01-29 12:10:23 UTC, deleted_at: nil, title: "Introduction to Polynomials", vid_emded_obj: nil, media_type: "video", source: "some_source", thumbnail_url: nil, md5: "459173975a7fb145b3ca8b99e1c2ae78"> 
```

所以我期待如果我这样做，至少 1 的计数会返回：

```
ContentMirror.where(source: 'some_source').exists(vid_emded_obj: false).count
=> 0 
```

想不通为什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:59:18.870

我相信存在检查属性是否存在，如果该属性的值为空，则返回 true。我会去找医生确认:)

编辑：

所以，文档没有提到任何存在（...）。只有一个存在吗？可以应用于标准的方法。

我认为你应该这样做（伪代码，我没有尝试过）

```
ContentMirror.count(vid_embed_obj:nil, source: 'some_source') 
```

或者

```
ContentMirror.where(vid_embed_obj:nil, source: 'some_source').count 
```

或再次

```
ContentMirror.excludes(vid_embed_obj:nil).where(source: 'some_source').count 
```

# oracle - 在 Oracle DB 上运行时是否可以更改查询的并行度？

> ID：14602910
> 
> 赞同：2
> 
> 时间：2013-01-30T11:28:35.470
> 
> 标签：oracle, plsql, toad

我在 Oracle 11gR2 数据库上运行来自 TOAD 的查询。在查询运行时（根据并行度需要 60 到 400 秒），我从 TOAD 的会话浏览器中检查了它的状态，当我第一次查看会话时，我意识到并行度可以在执行过程中改变浏览器似乎查询有16个并行度，当我刷新屏幕时它可能变成8，或2，或1。或者它可能增加到32。

是否有一种机制可以在 Oracle 上运行时更改查询的并行度，或者 TOAD 在显示会话的并行度时是否出现故障？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:19:34.907

可以从 Oracle 数据库请求特定的并行度 (DOP)。例如，您可以在表或索引级别设置固定 DOP：

例如：

```
ALTER TABLES sales PARALLEL 8;
ALTER TABLE customers PARALLEL 4; 
```

在这种情况下，仅访问 sales 表的查询使用请求的 DOP 8，而访问 customers 表的查询请求的 DOP 为 4。同时访问 sales 和 customers 表的查询使用 8 的 DOP 进行处理，并可能分配 16 个并行服务器（生产者或消费者）；无论何时指定不同的 DOP，Oracle 数据库都会使用更高的 DOP。

如果指定了 PARALLEL 子句但未列出并行度，则对象获取默认 DOP。默认并行度使用公式根据系统配置确定 DOP，如下所示：

对于单个实例，

> DOP = PARALLEL_THREADS_PER_CPU x CPU_COUNT

对于 Oracle RAC 配置，

> DOP = PARALLEL_THREADS_PER_CPU x CPU_COUNT x INSTANCE_COUNT

默认情况下，`INSTANCE_COUNT`是集群中的所有节点。但是，如果您使用 Oracle RAC 服务来限制可以执行并行操作的节点数量，那么参与节点的数量就是属于该服务的节点数量。例如，在一个 4 节点 Oracle RAC 集群上，每个节点有 8 个 CPU 内核并且没有 Oracle RAC 服务，`default DOP would be 2 x 8 x 4 = 64`.

默认 DOP 算法**旨在使用最大资源，并假设如果可以使用更多资源，则操作完成得更快。默认并行性针对单用户工作负载**。在多用户环境中，不建议使用默认并行度。

优化器根据语句的资源需求自动确定语句的 DOP。优化器使用执行计划中所有扫描操作（全表扫描、索引快速全扫描等）的成本来确定语句所需的 DOP。

但是，优化器会限制实际的 DOP，以确保并行服务器进程不会使系统不堪重负。此限制由参数设置`PARALLEL_DEGREE_LIMIT.`

为简洁起见，我在这里列出了重要的部分。

Oracle 官方文档中的所有这些以及更多内容 -

[http://docs.oracle.com/cd/E11882_01/server.112/e25523/parallel002.htm#BEICCFIE](http://docs.oracle.com/cd/E11882_01/server.112/e25523/parallel002.htm#BEICCFIE)

这是一个非常有趣的设置，我建议您通过整个过程，因为它非常有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:09:40.060

我认为您在这里看到的是不同程度的并行性，因为查询中的不同操作都有自己的程度。扫描不同的表会涉及到不同的度数，基于连接结果集的合并可能与连接本身有不同的度数。

一个经常被遗忘的问题是 PQ 从属的数量通常是查询并行度的两倍，因为读取表是在表的 DoP 处执行的，但可能需要另一组从属来消耗行（对于聚合，例如）。

# silverlight - Silverlight 多重绑定

> ID：14602915
> 
> 赞同：0
> 
> 时间：2013-01-30T11:28:46.227
> 
> 标签：silverlight, binding, telerik

我有一个关于在 Silverlight 中绑定的问题。我为网格视图数据列做了我的课程：

```
public class NavigateItemID : GridViewDataColumn
{
    public Binding itemID { get; set; }
    public Binding usedType { get; set; }
} 
```

这是我在 xaml 中实现数据列的地方：

```
<ext:NavigateItemID UniqueName="objectName"
                    CellStyle="{Binding Source={StaticResource GridViewCellAlignmentToTop}}"
                    Width="0.3*"
                    Header="{Binding Source={StaticResource locResources}, Path=LabelsWrapper.lblObjectNameW}"
                    TextWrapping="Wrap"
                    IsReadOnly="True"
                    DataMemberBinding="{Binding objectName}"
                    itemID="{Binding itemID}"
                    usedType="{Binding objectType}" /> 
```

我想问我如何获得价值`itemID`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:36:26.817

以这种方式使用，itemID 将始终为空。Binding 类是一个构造，它在 DataContext 列中的属性和目标类型上的依赖属性之间建立关系。

在这种情况下，假设其他所有设置都正确，您必须更改属性的类型才能使 Binding 正常工作。

例如：

```
public class NavigateItemID : GridViewDataColumn
{
    public int itemID
    {
        get { return (int)GetValue(itemIDProperty); }
        set { SetValue(itemIDProperty, value); }
    }

    public static readonly DependencyProperty itemIDProperty =
        DependencyProperty.Register("itemID", typeof(int), typeof(NavigateItemID), new PropertyMetadata(0));

    public object usedType
    {
        get { return (object)GetValue(usedTypeProperty); }
        set { SetValue(usedTypeProperty, value); }
    }

    public static readonly DependencyProperty usedTypeProperty =
        DependencyProperty.Register("usedType", typeof(object), typeof(NavigateItemID), new PropertyMetadata(null));
} 
```

[阅读本文以了解有关数据绑定的更多信息](http://msdn.microsoft.com/en-us/library/cc278072%28v=VS.95%29.aspx)

# jquery - 禁用 jQuery Mobile 加载消息和 AJAX

> ID：14602919
> 
> 赞同：3
> 
> 时间：2013-01-30T11:28:55.603
> 
> 标签：jquery, jquery-mobile

我附加了常规的 jQuery 库，并在 (jquery.mobile-1.2.0.min.js) 之后附加了 jQuery 移动文件。

一旦我附加 jQuery mobile 并刷新页面，我就会得到加载屏幕。

我尝试使用以下方法禁用它：

```
$(document).on("mobileinit", function(){
    $.mobile.ajaxEnabled=false;
    $.mobile.loadingMessage = false;
}); 
```

以及尝试不同的初始化函数：

```
$(document).bind('pageinit'){ 
```

但两者都没有奏效。我仍然只是收到加载消息或完全空白的屏幕。

我真正需要它的唯一功能是滑动事件。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:33:03.010

**在引入jQM** js文件之前必须使用mobileinit，像这样：

```
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script>
    $(document).on("mobileinit", function(){
        $.mobile.ajaxEnabled=false;
        $.mobile.loadingMessage = false;
    });            
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head> 
```

如果您在脚本加载后执行它，它将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-20T07:18:10.193

我使用了 CSS 方法。不是最好的，但工作和快速。

```
<style>
.ui-loader 
{
  display: none !important;
}
</style> 
```

这个问题已经回答了：[jQuery Mobile loading message](https://stackoverflow.com/questions/10397940/jquery-mobile-loading-message)

# php - 如何使用 CodeIgniter 库为 Highcharts 设置 zoomType

> ID：14602926
> 
> 赞同：1
> 
> 时间：2013-01-30T11:29:07.777
> 
> 标签：php, codeigniter, highcharts

我正在使用 CodeIgniter 库（[https://github.com/ronan-gloo/codeigniter-highcharts-library](https://github.com/ronan-gloo/codeigniter-highcharts-library)）来创建 Highcharts。一切正常，但变焦。

我正在尝试像这样设置缩放：

```
$this->highcharts->set_global(array('zoomType' => 'x')) ; 
```

或这个

```
$this->highcharts->set_zoom_type('x'); 
```

但什么都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:16:41.670

我从未使用过 CodeIgniter Highcharts 包装器，但根据它的文档（尤其是此处描述的段落：[https](https://github.com/ronan-gloo/codeigniter-highcharts-library#magic-methods) ://github.com/ronan-gloo/codeigniter-highcharts-library#magic-methods ）我会尝试使用类似的东西

```
$this->highcharts->set_chart(array('zoomType' => 'x')) 
```

它应该产生类似于这样的 JSON：

```
{
    chart: {
        zoomType: 'x'
    }
} 
```

# c++ - 通过被动库提取 gzip

> ID：14602927
> 
> 赞同：3
> 
> 时间：2013-01-30T11:29:13.853
> 
> 标签：c++, gzip, nonblocking

我需要将 C++（在 Linux 上）中的大型 gzip 数据流提取到内存中。我打算使用`libarchive`，但我有一个限制，我**不能**阻止或使用任何类型的同步。

AFAIR 为了使用它必须阻止`libarchive`的*自定义阅读器，直到数据可用。*

所以我希望它有相反的方式。一个库，它具有条目/进度的回调以及手动输入数据的能力。

是否有任何图书馆可以做到这一点，或者修改`libarchive`以相反的方式工作是否更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:59:01.097

如果您需要的只是 gzip 解压缩而不是 tar 提取，那么您可以使用[zlib](http://zlib.net/)。它可能已经在您的系统上作为 zlib.h（也是[文档](http://zlib.net/manual.html)）和 libz.so。

如果您还需要 tar 提取，那么您可以尝试[libtar](http://www.feep.net/libtar/)。

# c# - 在 C# 中减去百分比

> ID：14602930
> 
> 赞同：1
> 
> 时间：2013-01-30T11:29:24.907
> 
> 标签：c#, percentage, subtraction

我正在尝试使用以下方法减去 C# 中的百分比：

```
n = n - (n * 0.25); 
```

但我收到一个错误：

> “不能隐式地'加倍'到'int'。存在显式转换（您是否缺少演员表？）”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:30:44.170

你的价值`n`是一个`int`。

当您乘以`0.25`( 这是 a `double`) 时，结果值是`double`您尝试分配给 a 的 a `int`。

要解决它，您必须指定您知道使用“显式转换”会丢失精度。

```
n = n - (int)(n * 0.25); 
```

做`(Type)value`被称为“投到`value`” `Type`。这正是错误消息建议您执行的操作。

或者，如果您不想保持精度，请不要声明`n`为 an`int`而是声明为`double`. 在这种情况下，您不必强制`n * 0.25`转换为`int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:04:07.530

如果您不想在 int 和 double 类型之间来回切换，您可以使用：

n = (n * 75) / 100

如果您的答案曾经有小数，但它们会丢失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:39:05.257

我想这可能是 n 类型的问题，因为`int`它最不需要是`double`

因此，当您得到`n = n - (n * 0.25)`结果时，结果是双倍的

如果您想将其转换为 int 则**请注意舍入**，因为它并不总是以`.00`

我也认为这会更好`n = n * 0.75`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:31:29.627

您的变量`n`必须是整数，但您的计算结果是双精度数，因为它涉及乘以双精度数 ( `0.25`)。

您可以将结果转换回 int，如下所示：

```
n = (int)(n - (n * 0.25)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T11:31:39.843

我假设那`n`是一个整数类型，比如说`int`，因为你没有给出任何线索。在这种情况下，最简单的解决方案是：

```
n = Convert.ToInt32(n - (n * 0.25)); 
```

或者你可以投射：

```
n = (int)(n - (n * 0.25)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:31:40.330

检查变量“n”的类型。

'n' 应该是双精度类型。

或者

使用显式强制转换转换为 int。

```
int n = (int)(n - (n * 0.25)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T11:33:04.837

你的`n`变量是一个`int`. 当您尝试使用多个 with 时`0.25`，`0.25`是`double`，所以结果将是`double`。您应该手动转换它，因为没有[`Implicit Numeric Conversion`](http://msdn.microsoft.com/en-us/library/y5b434w4.aspx)for `double`to `int`。你必须[`Explicit Numeric Conversion`](http://msdn.microsoft.com/en-us/library/yht2cx7b.aspx)为他们使用。

```
From --> To

double --> sbyte , byte, short, ushort, int, uint, long, ulong, char, float, or decimal 
```

您应该将正确的表达式转换为`int`.

```
int n = 100;
n = (int) (n - (n * 0.25));
Console.WriteLine(n); 
```

这是一个[`DEMO`](http://ideone.com/7h5F8B).

记住；

*   显式数字转换可能会导致精度损失。
*   当您从一个`double`值转换为整数类型时，该值将被截断。如果生成的整数值超出目标值的范围，则结果取决于溢出检查上下文。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-30T11:33:20.373

您必须将结果转换为 int

```
n=(int)(n-(n*0.25)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-30T12:29:18.200

最好的方法是做

```
 n = n - n/4; 
```

如果您希望百分比是 0 到 100 之间的整数，否则您应该通过替换为`n`a来声明。建议的分配不会发生代价高昂的转换。请注意，它是一个整数，因为两个操作数 (和) 都是整数，不会导致提升，因此使用整数除法。`double``int n``double n``n/4``n``4`

**解释**

这是类型提升，`n`乘以 a `double`，`n*0.25`自动提升为 a `double`。原始人只能升职，不能降职。如果一个原语可以保存所有的值而不会导致精度损失，则它`x`的等级高于另一个原语。A可以保存整数的所有值，但例如，整数可以不保存。所以你正在努力提升和降级。有关详细信息，请参阅[MSDN 库](http://msdn.microsoft.com/en-us/library/y5b434w4.aspx)。`y``y``double``0.1`

注意：从 a`double`转换为 an`int`会导致值被截断，即“点”之后的所有小数都将被删除，因此`-2.5`变为`-2`和`1.5`变为`1`。上面使用的整数除法也四舍五入为零，使此分配与您的分配相等。但避免任何昂贵的转换。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-30T11:34:22.170

尝试：

```
n = n - (int)((double)n * 0.25); 
```

注意：通过这样做，您不会在 n 结果中的点后面有数字。

# html - HTML5 应用程序缓存清单 - 没有包罗万象的索引回退

> ID：14602932
> 
> 赞同：1
> 
> 时间：2013-01-30T11:29:27.343
> 
> 标签：html, manifest, fallback, html5-appcache

我正在为我的应用程序提供一个清单，看起来像这样

```
CACHE MANIFEST
#1359542586541

NETWORK:
*
FALLBACK:
/ /index.offline 
```

离线时，它通过在索引路径上返回 index.offline 来正常工作，但是它具有为所有其他资源返回 index.offline 的副作用。即，该`/`模式充当包罗万象的角色。

有没有什么方法可以匹配索引页面而没有其他所有内容，所以***只有***主页使用后备？

这引起的一个烦恼是，每当请求返回 500 状态时，它似乎都会返回 index.offline

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:36:57.223

不，a 中的第一个 URL`FALLBACK`是[前缀匹配](http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#prefix-match)。唯一的方法是始终使用显式索引页面而不是依赖默认文档：

```
FALLBACK:
/index.html /index.offline 
```

去年 2 月在 HTML5 帮助邮件列表上[讨论了 500 错误的行为，](http://lists.whatwg.org/pipermail/help-whatwg.org/2012-February/000979.html)包括规范编辑器的几个回复，[该消息专门讨论了`FALLBACK`部分](http://lists.whatwg.org/pipermail/help-whatwg.org/2012-February/000984.html)。

# javascript - 无限滚动/循环上的内容闪烁/跳转

> ID：14602938
> 
> 赞同：8
> 
> 时间：2013-01-30T11:29:48.020
> 
> 标签：javascript, jquery, html, infinite-scroll

在循环/无限网站上滚动时，我正在寻找帮助/指向正确方向/或闪烁/跳跃的解决方案，这可以在[这个 fiddle](http://jsfiddle.net/djsbaker/j3d8r/1/)中看到。

似乎导致跳跃的原因是：

" `$(window).scrollTop(half_way - child_height);`"，也可能是 Chrome windows scrollTop 错误，但目前所有浏览器都在发生这种情况。

如果我删除“ `- child_height`”，则不再闪烁，但页面不再正确滚动，这可以在[this fiddle](http://jsfiddle.net/djsbaker/x5Tsp/3/)中看到。

此外，在第一个滚动条上，右侧的列向上跳了三个框 - 也是因为 ' `half_way`'，我可以通过给它一个“ `bottom: -600px;`”来修复它

完整代码：

[http://jsfiddle.net/djsbaker/j3d8r/1/](http://jsfiddle.net/djsbaker/j3d8r/1/)

```
var num_children = $('#up-left').children().length;
var child_height = $('#up-left').height() / num_children;
var half_way = num_children * child_height / 2;
$(window).scrollTop(half_way);

function crisscross() {
    $('#up-left').css('bottom', '-' + window.scrollY + 'px');
    $('#down-right').css('bottom', '-' + window.scrollY + 'px');
    var firstLeft = $('#up-left').children().first();
    var lastLeft = $('#up-left').children().last();
    var lastRight = $('#down-right').children().last();
    var firstRight = $('#down-right').children().first();

    if (window.scrollY > half_way ) {

        $(window).scrollTop(half_way - child_height);
        lastRight.appendTo('#up-left');
        firstLeft.prependTo('#down-right');

    } else if (window.scrollY < half_way - child_height) {

        $(window).scrollTop(half_way);
        lastLeft.appendTo('#down-right');
        firstRight.prependTo('#up-left');
    }
}

$(window).scroll(crisscross); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T01:04:37.173

好的 - 这是一个[“工作”版本](http://jsfiddle.net/Danack/cQHEn/4/)- 工作我的意思是它比以前更少闪烁。我以为它没有闪烁，那是在我使用电池供电的时候，但插入电源并且 CPU 速度足够快，可以闪烁。

正如我所提到的，要消除闪烁，您需要克隆对象，操作它们，然后将它们替换到 DOM 中，而不是直接操作 DOM。

我通过获取`<div id="content">`操作它们的内容然后将它们替换到那个 <div> 中来做到这一点。

此外，最好只在 DOM 中查找一次，然后使用对该对象的引用而不是重复搜索。例如

```
var leftSide = $(clone).find('.up-left');
....
lastRight.appendTo(leftSide);
....
 $(leftSide).css('bottom', '-' + window.scrollY + 'px'); 
```

而不是：

```
lastRight.appendTo('#up-left');
$('#up-left').css('bottom', '-' + window.scrollY + 'px'); 
```

搜索 DOM 相对较慢，因此存储引用可以提高性能/减少闪烁。

存储对象还使代码更容易理解（恕我直言），因为您可以很容易地看到您引用的是相同的东西，而不是可能不同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T02:05:54.980

使用 Danack 解决方案，我仍然在 Windows 上的 chrome 中闪烁。对于这个站点，我将控制所有滚动（您已经手动滚动一侧），并为元素提供绝对位置。

或者如果你坚持使用浏览器滚动，可能会使用动画：动画最后一个元素的高度直到 0px 然后使用 appendTo，然后从 0px 动画到正常高度......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:11:26.980

这可能是一个很长的镜头，但是在使用无限滚动时我有同样的闪烁，最终使用了[imagesLoaded](https://github.com/desandro/imagesloaded)。我最终附加了带有淡入的附加图像（现在已加载），并且因为事实而防止它们闪烁他们被装载了。

因此，也许通过使用加载的图像 - 或图像上的回调，您可以解决闪烁问题。虽然它确实降低了速度。我可以想象，如果您想尽快滚动浏览所有内容，这可能不是解决方案。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T23:08:38.513

一个解决方案是不使用本机滚动功能，而是模拟滚动。这可以通过将`overflow`内容设置为“隐藏”以及捕获其上的“鼠标滚轮”事件并在调用它时触发一些操作来完成。[我开始在这里](http://jsbin.com/arekew/2/edit)尝试这个（使用 MooTools 而不是 jQuery，因为我更熟悉它）。它目前只是通过更改第一个元素的 margin-top 在左侧“工作”。

我接下来的步骤是：

*   检查第一个元素的负边距顶部是否大于它的高度，如果是，则将其移动到右侧。
*   右侧最后一个框的逻辑相同，底部边距为负。

This has some downsides, though. Simulating scrolling doesn't feel as natural as the native scrolling functionality and clicking the mousewheel doesn't work. These might be solveable but it would require some more coding to get it to work smoothly. Anyway, in the end you would have a solution without any flickering and with no sticky scrollbar at the side (An idea for a replacement could be a small area on the side that triggers the scrolling on mouseover).

# javascript - 自己定义的输入属性

> ID：14602940
> 
> 赞同：-1
> 
> 时间：2013-01-30T11:29:53.580
> 
> 标签：javascript, jquery, html, input

我有一个 HTML 文件，看起来像这样：

```
 Input 1: <input type="text" required="false" /><br>
    Input 2: <input type="text" required="true" /> *<br>
    Input 3: <input type="text" required="false" /><br>
    Input 4: <input type="text" required="false" /><br>
    Input 5: <input type="text" required="true" /> *<br>
    Input 6: <input type="text" required="false" /><br>
    Input 7: <input type="text" required="true" /> *<br>
    <input type="button" id="subButton" value="Run" /> 
```

这是我的 jQuery 脚本：

```
$(document).ready(function(){
                $("#subButton").click(function(){

                    //Copy START
                    var setError = false;
                    $.each($(":input"), function(e){
                        if(($(this).attr("required") == "true") && (this.value == "")){
                            setError = true;
                        }
                    });
                    if(setError != false) alert("Not all required fields are filled");
                    //Copy END

                });
            }); 
```

如果我将 attr 更改为“类型”，如果我没有填满每个框，它就会起作用。但我想将它与所需的属性一起使用。

任何想法，为什么它不起作用？

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:35:04.060

您`required`以错误的方式使用。如果是 HTML，应该是这样的：

```
<input type="text" required /> 
```

如果是 XHTML，应该是这样的：

```
<input type="text" required="required" /> 
```

您需要使用 jQuery 访问它[`$.prop()`](http://api.jquery.com/prop)：

```
if($("input").prop("required")) { ... } 
```

* * *

否则，您可以自由地以`data-*`这种方式使用属性：

```
data-reqd="yes" 
```

并使用以下方式访问它：

```
if ($(this).data("reqd") == "yes") { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:32:55.227

采用

```
data-required="true/false" 
```

然后

```
if ($(this).data("required")) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:40:52.820

[`required`](http://www.w3.org/TR/html5/forms.html#the-required-attribute)是 s 的官方（不是“自己定义的”）属性`<input>`，它是[布尔值](http://www.w3.org/TR/html5/infrastructure.html#boolean-attribute)-`"false"`是无效值。此外，在此使用 jQuery`attr`会增加一些额外的怪癖，以便您取回 string `"required"`。更好地使用该`required`属性，它真正返回一个布尔值。

```
Input 1: <input type="text" /><br>
Input 2: <input type="text" required /> *<br>
Input 3: <input type="text" /><br>
Input 4: <input type="text" /><br>
Input 5: <input type="text" required="" /> *<br>
Input 6: <input type="text" /><br>
Input 7: <input type="text" required="required" /> *<br>
<input type="button" id="subButton" value="Run" />

<script type="text/javascript">
    $(document).ready(function(){
         $("#subButton").click(function(){
             var setError = false;
             $(":input").each(function(e){
                 if ( this.required && this.value == "" )
                     setError = true;
                 }
             });
             if ( setError )
                 alert("Not all required fields are filled");
         });
     });
</script> 
```

# php - 如何将值从html文本框存储到javascript变量

> ID：14602945
> 
> 赞同：0
> 
> 时间：2013-01-30T11:29:59.693
> 
> 标签：php, javascript, html, mysql

我正在创建一个从数据库中获取值并将值动态存储到表中的表单。我有一个名为 add 的按钮，当用户按下它时会动态添加一行，我有一个隐藏的计数器来计算添加的行。

问题是，当我获取记录时，计数器显示存在的行数，当我添加新行时，它又回到 1。

如果表中有两行，计数器将显示 2，但当我尝试添加新行时，计数器显示 1。

有没有办法将计数器文本中的值设置为 JavaScript 变量并增加它？

这是我的 JavaScript 代码：

```
<script language="javascript" type="text/javascript">
    var jj= 1;
    alert(jj);
    function addRow()
    {
        //alert(jj)
        var tbl = document.getElementById('zimtable');
        var lastRow = tbl.rows.length;
        var iteration = lastRow - 1;
        var row = tbl.insertRow(lastRow);

        var firstCell = row.insertCell(0);
        var el = document.createElement('input');
        el.type = 'text';
        el.name = 'zimname_' + jj;
        el.id = 'zimname_' + jj;
        el.size = 40;
        el.maxlength = 40;
        firstCell.appendChild(el);

        var secondCell = row.insertCell(1);
        var el2 = document.createElement('input');
        el2.type = 'text';
        el2.name = 'zimmob_' + jj;
        el2.id = 'zimmob_' + jj;
        el2.size = 13;
        el2.maxlength = 13;
        secondCell.appendChild(el2);

        // alert(i);
        //$('#hh').val(jj); 
        jj++;
        makhtab.hh.value=jj;

        alert(jj);
    }
</script> 
```

这是我显示表格的 php 代码：

```
<?php

    $zim = mysql_query("SELECT * FROM `makhzim` WHERE makhcode='$newsid' ORDER BY srno")or die(mysl_error());
    $ctrzim = 0;
    while ($zrow = mysql_fetch_array($zim)){
        $ctrzim++;
        print '<script type="text/javascript">';
        print "alert('$i')";
        print '</script>';
        echo "<tr>";
        echo "<td><input name='zimname_$ctrzim' type='text'  size='40' maxlength='20' value=$zrow[name] /></td>";
        echo "<td><input name='zimmob_$ctrzim'  type='text'   size='13' maxlength='20' value=$zrow[mobile] /></td>";
        echo "</tr>";
    }
    echo "</table>";
    echo "<input type=\"button\" value=\"Add\" onclick=\"addRow();\" /><input id=\"hh\" name=\"hh\" type=\"text\" value= '$ctrzim'/>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:07:08.943

在您的 php 代码中，将计数器的值放入隐藏元素

```
<input type = "hidden"  id = "hiddenElementId" value = "your php counter value"/> 
```

在你的 javascript

```
<script>
     var count;
     window.onload=function(){
         count =   =   document.getElementById("hiddenElementId").value;
     };
     function addRow() {
        alert(count);
        ..
        ..
        count++;
      }
<script> 
```

# android - 无法直接在手机上执行应用程序

> ID：14602949
> 
> 赞同：-3
> 
> 时间：2013-01-30T11:30:08.570
> 
> 标签：android, exception, permissions

嗨，我开发了一个应用程序，我试图直接在 android 2.2 手机上运行，​​但出现以下错误。

```
01-30 16:55:10.450: E/AndroidRuntime(16550): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.fluturasymphony.recommendation/org.fluturasymphony.recommendation.ActivityList}: java.lang.SecurityException: ConnectivityService: Neither user 10051 nor current process has android.permission.ACCESS_NETWORK_STATE. 
```

有关完整的[错误日志](http://pastebin.com/g88bm0XM)，请参见此处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:32:07.880

如日志：

> 原因：java.lang.SecurityException：ConnectivityService：用户 10051 和当前进程都没有 android.permission.ACCESS_NETWORK_STATE。

意味着您将需要添加`android.permission.ACCESS_NETWORK_STATE`权限`AndroidManifest.xml`

**编辑 ：**

在清单中添加权限：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android">
        <!-- add permission -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application>
    <!-- Appliction components -->
    <!-- ----- -->
    </application>

    <uses-sdk android:minSdkVersion="1" />

    </manifest> 
```

# ruby - 使用 RVM + unicorn 部署失败

> ID：14602951
> 
> 赞同：0
> 
> 时间：2013-01-30T11:30:16.087
> 
> 标签：ruby, sinatra, rvm, unicorn

我正在尝试使用独角兽设置 Sinatra 应用程序。在遵循[此示例](http://tech.tulentsev.com/2012/03/deploying-with-sinatra-capistrano-unicorn/) 并根据我的需要进行调整后，我收到了此错误：

```
<my_path_name>/vendor/bundle/ruby/1.9.1/gems/kgio-2.8.0/lib/kgio.rb:21:in 'require': cannot load such file -- kgio_ext (LoadError) 
```

我正在使用`rvm 1.18.5`，`ruby 1.9.3p374 (2013-01-15 revision 38858) [x86_64-linux]`最新版本`unicorn 4.5.0`拉`kgio 2.8.0`

操作系统是`Red Hat Enterprise Linux Server release 5.6`. 我也试过了`ruby-1.9.3-p125`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:59:09.310

在这里听起来像一个[类似的问题](https://stackoverflow.com/questions/12510386/cant-launch-rails-app-via-unicorn-due-to-kgio-ext-loaderror)，也许尝试其中一个想法。

gem安装顺利吗？

# ruby - 如何进行机械化多重搜索？

> ID：14602953
> 
> 赞同：0
> 
> 时间：2013-01-30T11:30:21.177
> 
> 标签：ruby, mechanize

我想知道是否可以使用数组进行多个机械化查询？以下代码减去数组适用于单个但不是多个查询。

```
require 'nokogiri'
require 'mechanize'

agent = Mechanize.new

#User Agent masking
agent.user_agent_alias = 'Windows Mozilla'

#Array of keywords to search
search = Array.new

search << 'TAICHI 21'
search << 'S56CA'

#Take our search array, insert it into a query
agent.get("http://www.asus.com/Search/?SearchKey=#{search}")

#This handles the url
File.open("results.txt","w") do |f|
    PP.pp(page.links.find_all{|l| l.text =~ /#{search}/i},f)
end 
```

**第二次尝试**

```
require 'nokogiri'
require 'mechanize'

agent = Mechanize.new

#User Agent masking
agent.user_agent_alias = 'Windows Mozilla'

#Array of keywords to search
search = [ 'S56CA', 'TAICHI 21' ]

#Take our search array, insert it into a query
agent.get("http://www.asus.com/Search/?SearchKey=#{search}")

File.open("results.txt","w") 

#This handles the url
search.each do |f|
    results.txt << PP.pp(page.links.find_all{|l| l.text =~ /#{search}/i},f)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:25:45.933

`S56CA`当您使用[http://www.asus.com/Search/?SearchKey=S56CA](http://www.asus.com/Search/?SearchKey=S56CA)进行搜索时，网站会重定向到[http://www.asus.com/Notebooks_Ultrabooks/S56CA/](http://www.asus.com/Notebooks_Ultrabooks/S56CA/)页面。这与搜索`TAICHI 21`停留在结果页面上时不同。

其中每一个都是不同的行为，因此代码应该以不同的方式处理每种情况。

我修改了您的原始代码以包括机械化日志记录，如下所示：

```
require 'nokogiri'
require 'mechanize'

# Logging 
require 'logger'

mechanize_logger = Logger.new('mechanize.log')
mechanize_logger.level = Logger::INFO

agent = Mechanize.new
agent.log = mechanize_logger

#User Agent masking
agent.user_agent_alias = 'Windows Mozilla'

search_terms = [ 'S56CA', 'TAICHI 21' ]
results_file = File.open( 'results.txt', 'w' )

#Take our search array, insert it into a query
search_terms.each do |search|
  page = agent.get("http://www.asus.com/Search/?SearchKey=#{search}")
  links =  page.links.find_all{ |l| l.text =~ /#{search}/i}
  links.each { |links_text| results_file.write( "#{links_text}\n" ) }
end 
results_file.close 
```

运行此代码时，程序的输出`ASUS TAICHI 21`就是写入`results.txt`.

该`mechanize.log`文件具有以下内容，显示了两次搜索之间的区别：

```
$ more mechanize.log 
I, [2013-01-30T17:49:49.036790 #2142]  INFO -- : Net::HTTP::Get: /Search/?SearchKey=S56CA
I, [2013-01-30T17:49:53.528281 #2142]  INFO -- : status: Net::HTTPFound 1.1 302 Moved Temporarily
I, [2013-01-30T17:49:53.529388 #2142]  INFO -- : follow redirect to: /Notebooks_Ultrabooks/S56CA/
I, [2013-01-30T17:49:53.530106 #2142]  INFO -- : Net::HTTP::Get: /Notebooks_Ultrabooks/S56CA/
I, [2013-01-30T17:49:53.939353 #2142]  INFO -- : status: Net::HTTPOK 1.1 200 OK
I, [2013-01-30T17:49:54.800423 #2142]  INFO -- : Net::HTTP::Get: /Search/?SearchKey=TAICHI%2021
I, [2013-01-30T17:49:55.269454 #2142]  INFO -- : status: Net::HTTPOK 1.1 200 OK 
```

由于搜索页面有 content `Did you mean to search for`，您可以使用它来区分代码中的行为。

# android - 无法从其他类调用方法（android）

> ID：14602959
> 
> 赞同：0
> 
> 时间：2013-01-30T11:30:45.200
> 
> 标签：android

我的主要课程是：

```
package com.myapps.myapp;

import android.os.Bundle; 
//...and all the other imports

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

    //...

    }

    MoneyCalc moneyCalculator = new MoneyCalc();
    moneyCalculator.MoneyCalculate(this);

} 
```

我的第二堂课：

```
package com.myapps.myapp;

public class MoneyCalc{

    public void MoneyCalculate(MainActivity activity){
        TextView textview = (TextView) activity.findViewById(R.id.MoneyResult);
        EditText edittext = (EditText) activity.findViewById(R.id.MoneyInput);
    Spinner spinner = (Spinner) activity.findViewById(R.id.MoneySpinner1);
    Spinner spinner2 = (Spinner) activity.findViewById(R.id.MoneySpinner2);
        //...
        }
} 
```

第二类不是活动，我保留它只是为了有一些方法。单击按钮时调用 MoneyCalc 方法。我无法阅读 MainActivity 中的方法，它说：

```
Multiple markers at this line
    - Syntax error on token(s), misplaced construct(s)
    - Syntax error on token "this", delete this token
    - Syntax error on token "MoneyCalculate", Identifier expected after this 
     token 
```

logcat 错误：

```
01-24 17:13:31.071: E/AndroidRuntime(3662): FATAL EXCEPTION: main
01-24 17:13:31.071: E/AndroidRuntime(3662): java.lang.IllegalStateException: Could not find a method MoneyCalculate(View) in the activity class com.myapps.myapp.MainActivity for onClick handler on view class android.widget.Button with id 'CalculateButton'
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.view.View$1.onClick(View.java:3584)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.view.View.performClick(View.java:4202)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.view.View$PerformClick.run(View.java:17340)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.os.Handler.handleCallback(Handler.java:725)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.os.Looper.loop(Looper.java:137)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at java.lang.reflect.Method.invokeNative(Native Method)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at java.lang.reflect.Method.invoke(Method.java:511)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at dalvik.system.NativeStart.main(Native Method)
01-24 17:13:31.071: E/AndroidRuntime(3662): Caused by: java.lang.NoSuchMethodException: MoneyCalculate [class android.view.View]
01-24 17:13:31.071: E/AndroidRuntime(3662):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at java.lang.Class.getMethod(Class.java:915)
01-24 17:13:31.071: E/AndroidRuntime(3662):     at android.view.View$1.onClick(View.java:3577)
01-24 17:13:31.071: E/AndroidRuntime(3662):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:35:27.070

尝试这个。将您的代码放入 onCreate 并检查..

```
@Override
public void onCreate(Bundle savedInstanceState) {

//...

  MoneyCalc moneyCalculator = new MoneyCalc();
  moneyCalculator.MoneyCalculate(this);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:40:04.070

这应该有效：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

    }

    MoneyCalc moneyCalculator = new MoneyCalc();

    {
        moneyCalculator.MoneyCalculate(this);
    }
} 
```

但我不确定这是你想要的，它不是一种好的编码风格。也许你应该移动 moneyCalculator.MoneyCalculate(this); 到 onCreate 方法或其他已经设置了活动内容的地方。现在它将编译但不会工作）

# sql - java.sql.SQLSyntaxErrorException: ORA-00955: 名称已被现有对象使用

> ID：14602960
> 
> 赞同：3
> 
> 时间：2013-01-30T11:30:51.847
> 
> 标签：sql, oracle, servlets

我正在使用 Oracle 11g R2，我想创建一些用户表。当我运行查询时。它创建了几个表并产生**java.sql.SQLSyntaxErrorException: ORA-00955: name is already used by an existing object**异常。

```
 Connection con=prepareConnection();
    Statement st=con.createStatement();
    StringBuilder sb=new StringBuilder(1024);
    sb.append("create table ").append(uname).append("(MESSAGES CLOB,LINKS VARCHAR2(150),FRIENDS VARCHAR2(50),COMMENTS CLOB,LIKES VARCHAR2(10),UNLIKES VARCHAR2(10),SHARES BLOB,QSTNS CLOB,ANS CLOB,UPDATES BLOB,THEMS VARCHAR2(100),WORDS CLOB,NOTIFICATION CLOB,REQUESTS VARCHAR2(100),TIPS CLOB,TAG VARCHAR2(50))");
    String Query=sb.toString();
    st.executeUpdate(Query);

    Statement st1=con.createStatement();
    StringBuilder sb1=new StringBuilder(1024);
    sb1.append("create table ").append(uname).append("VIALBUM(ALBUMID NUMBER NOT NULL, ALBUMNAME VARCHAR2(225) NOT NULL, CONSTRAINT ").append(uname).append("VIALBUM_PK PRIMARY KEY(ALBUMID)ENABLE)");
    String Query1=sb1.toString();
    st1.executeUpdate(Query1);

    Statement st12=con.createStatement();
    StringBuilder sb12=new StringBuilder(1024);
    sb12.append("CREATE INDEX ").append(uname).append("VIALBUM_INDEX ON ").append(uname).append("VIALBUM(ALBUMNAME)");
    String Query12=sb12.toString();
    st12.executeUpdate(Query12);

    Statement st11=con.createStatement();
    StringBuilder sb11=new StringBuilder(1024);
    sb11.append("create table ").append(uname).append("VIDEO(VIDEOID NUMBER NOT NULL, VIDEONAME VARCHAR2(225) NOT NULL, VIDEOFULL BLOB NOT NULL, VIDEODISC VARCHAR2(225), ALBUMID NUMBER NOT NULL, CONSTRAINT ").append(uname).append("VIDEO_PK PRIMARY KEY(VIDEOID)ENABLE)");
    String Query11=sb11.toString();
    st11.executeUpdate(Query11);

    Statement st13=con.createStatement();
    StringBuilder sb13=new StringBuilder(1024);
    sb13.append("ALTER TABLE ").append(uname).append("VIDEO ADD CONSTRAINT ").append(uname).append("VIDEO_").append(uname).append("VIALBUM_FK1 FOREIGN KEY(ALBUMID)REFERENCES ").append(uname).append("VIALBUM(ALBUMID)ENABLE");
    String Query13=sb13.toString();
    st13.executeUpdate(Query13);

    Statement st14=con.createStatement();
    StringBuilder sb14=new StringBuilder(1024);
    sb14.append("CREATE INDEX ").append(uname).append("VIDEO_INDEX ON ").append(uname).append("VIDEO (VIDEONAME)");
    String Query14=sb14.toString();
    st14.executeUpdate(Query14);

    Statement st2=con.createStatement();
    StringBuilder sb2=new StringBuilder(1024);
    sb2.append("create table ").append(uname).append("ALBUM(ALBUMID NUMBER NOT NULL, ALBUMNAME VARCHAR2(225) NOT NULL, CONSTRAINT ").append(uname).append("ALBUM_PK PRIMARY KEY(ALBUMID)ENABLE)");
    String Query2=sb2.toString();
    st2.executeUpdate(Query2);

    Statement st22=con.createStatement();
    StringBuilder sb22=new StringBuilder(1024);
    sb22.append("CREATE INDEX ").append(uname).append("ALBUM_INDEX ON ").append(uname).append("ALBUM(ALBUMNAME)");
    String Query22=sb22.toString();
    st22.executeUpdate(Query22); 
```

直到上面的语句它才能正确执行。并且剩余的语句没有被执行。它抛出异常。

```
 Statement st21=con.createStatement();
    StringBuilder sb21=new StringBuilder(1024);
    sb21.append("create table ").append(uname).append("IMAGE(IMAGEID NUMBER NOT NULL, IMAGENAME VARCHAR2(225) NOT NULL, IMAGEFULL BLOB NOT NULL, IMAGEDISC VARCHAR2(225), ALBUMID NUMBER NOT NULL, CONSTRAINT ").append(uname).append("IMAGE_PK PRIMARY KEY(IMAGEID)ENABLE)");
    String Query21=sb11.toString();
    st21.executeUpdate(Query21);

    Statement st23=con.createStatement();
    StringBuilder sb23=new StringBuilder(1024);
    sb23.append("ALTER TABLE ").append(uname).append("IMAGE ADD CONSTRAINT ").append(uname).append("IMAGE_").append(uname).append("ALBUM_FK1 FOREIGN KEY(ALBUMID)REFERENCES ").append(uname).append("ALBUM(ALBUMID)ENABLE");
    String Query23=sb23.toString();
    st23.executeUpdate(Query23);

    Statement st24=con.createStatement();
    StringBuilder sb24=new StringBuilder(1024);
    sb24.append("CREATE INDEX ").append(uname).append("IMAGE_INDEX ON ").append(uname).append("IMAGE (IMAGENAME)");
    String Query24=sb24.toString();
    st24.executeUpdate(Query24);

    Statement st3=con.createStatement();
    StringBuilder sb3=new StringBuilder(1024);
    sb3.append("create table ").append(uname).append("MUALBUM(ALBUMID NUMBER NOT NULL, ALBUMNAME VARCHAR2(225) NOT NULL, CONSTRAINT ").append(uname).append("MUALBUM_PK PRIMARY KEY(ALBUMID)ENABLE)");
    String Query3=sb3.toString();
    st3.executeUpdate(Query3);

    Statement st32=con.createStatement();
    StringBuilder sb32=new StringBuilder(1024);
    sb32.append("CREATE INDEX ").append(uname).append("MUALBUM_INDEX ON ").append(uname).append("MUALBUM(ALBUMNAME)");
    String Query32=sb12.toString();
    st32.executeUpdate(Query32);

    Statement st31=con.createStatement();
    StringBuilder sb31=new StringBuilder(1024);
    sb31.append("create table ").append(uname).append("SONG(SONGID NUMBER NOT NULL, SONGNAME VARCHAR2(225) NOT NULL, SONGFULL BLOB NOT NULL, SONGDISC VARCHAR2(225), ALBUMID NUMBER NOT NULL, CONSTRAINT ").append(uname).append("SONG_PK PRIMARY KEY(SONGID)ENABLE)");
    String Query31=sb31.toString();
    st31.executeUpdate(Query31);

    Statement st33=con.createStatement();
    StringBuilder sb33=new StringBuilder(1024);
    sb33.append("ALTER TABLE ").append(uname).append("SONG ADD CONSTRAINT ").append(uname).append("SONG_").append(uname).append("ALBUM_FK1 FOREIGN KEY(ALBUMID)REFERENCES ").append(uname).append("ALBUM(ALBUMID)ENABLE");
    String Query33=sb33.toString();
    st33.executeUpdate(Query33);

    Statement st34=con.createStatement();
    StringBuilder sb34=new StringBuilder(1024);
    sb34.append("CREATE INDEX ").append(uname).append("SONG_INDEX ON ").append(uname).append("SONG (SONGNAME)");
    String Query34=sb34.toString();
    st34.executeUpdate(Query34); 
```

请任何人告诉我这个错误告诉我什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:37:42.580

当您执行此代码`String Query21=sb11.toString();`时，您尝试创建一个已在上面创建的表。

也许这`String Query21=sb21.toString();`可以为您节省一些麻烦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:40:41.513

听起来您正在尝试创建与另一个名称相同的某种对象 - 例如表或约束、字段等。

看起来您已尝试在这里创建同一个表两次：

```
String Query21=sb11.toString(); 
```

# file - 大 (27GB) 文件的更快 grep 函数

> ID：14602963
> 
> 赞同：10
> 
> 时间：2013-01-30T11:31:19.513
> 
> 标签：file, bash, awk, grep

我必须从包含特定字符串的文件（5MB）中 grep 来自大文件（27GB）的相同字符串（和其他信息）。为了加快分析速度，我将 27GB 文件拆分为 1GB 文件，然后应用以下脚本（这里有一些人的帮助）。但是它不是很有效（生成一个 180KB 的文件需要 30 个小时！）。

这是脚本。有没有比 grep 更合适的工具？或者更有效的使用 grep 的方法？

```
#!/bin/bash

NR_CPUS=4
count=0

for z in `echo {a..z}` ;
do
 for x in `echo {a..z}` ;
 do
  for y in `echo {a..z}` ;
  do
   for ids in $(cat input.sam|awk '{print $1}');  
   do 
    grep $ids sample_"$z""$x""$y"|awk '{print $1" "$10" "$11}' >> output.txt &
    let count+=1
                                [[ $((count%NR_CPUS)) -eq 0 ]] && wait
   done
  done #& 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T12:13:22.510

您可以尝试几件事：

1）您正在阅读`input.sam`多次。它只需要在您的第一个循环开始之前读取一次。将 id 保存到一个临时文件中，`grep`.

2) 为您的 grep 命令添加前缀`LC_ALL=C`以使用 C 语言环境而不是 UTF-8。这会加快速度`grep`。

3）使用`fgrep`，因为您正在搜索固定字符串，而不是正则表达式。

4）用于`-f`从`grep`文件中读取模式，而不是使用循环。

5）不要从多个进程写入输出文件，因为您最终可能会遇到行交错和损坏的文件。

进行这些更改后，您的脚本将变为：

```
awk '{print $1}' input.sam > idsFile.txt
for z in {a..z}
do
 for x in {a..z}
 do
  for y in {a..z}
  do
    LC_ALL=C fgrep -f idsFile.txt sample_"$z""$x""$y" | awk '{print $1,$10,$11}'
  done >> output.txt 
```

另外，请查看旨在帮助您并行运行作业的[GNU Parallel 。](http://www.gnu.org/software/parallel/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T11:37:27.817

我最初的想法是你反复产卵`grep`。生成进程非常昂贵（相对而言），我认为您最好使用某种不需要持续创建进程的脚本解决方案（例如 Perl）

例如，对于您要开始的每个内部循环，`cat`并且`awk`（您不需要，`cat`因为`awk`可以读取文件，实际上这个`cat`/`awk`组合不是每次都返回相同的东西吗？）然后`grep`. 然后你等待 4`greps`完成，然后你再四处走动。

如果你必须使用`grep`，你可以使用

```
grep -f filename 
```

指定要在文件名中匹配的模式集，而不是命令行上的单个模式。我怀疑从上面你可以预先生成这样的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:08:29.800

好的，我有一个包含 4 个字符串的测试文件，即 aaaa aaab aaac 等

```
ls -lh test.txt
-rw-r--r-- 1 root pete 1.9G Jan 30 11:55 test.txt
time grep -e aaa -e bbb test.txt
<output>
real    0m19.250s
user    0m8.578s
sys     0m1.254s

time grep --mmap -e aaa -e bbb test.txt
<output>
real    0m18.087s
user    0m8.709s
sys     0m1.198s 
```

因此，使用 mmap 选项可以明显改善具有两种搜索模式的 2 GB 文件，如果您接受 @BrianAgnew 的建议并使用 grep 的单次调用，请尝试 --mmap 选项。

尽管应该注意，如果源文件在搜索过程中发生变化，mmap 可能会有点奇怪。从[人 grep](http://linux.die.net/man/1/grep)

> --mmap
> 
> 如果可能，使用 mmap(2) 系统调用来读取输入，而不是默认的 read(2) 系统调用。在某些情况下， --mmap 会产生更好的性能。但是，如果在运行 grep 时输入文件缩小，或者发生 I/O 错误， --mmap 可能会导致未定义的行为（包括核心转储）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-05T18:15:57.100

使用 GNU Parallel 它看起来像这样：

```
awk '{print $1}' input.sam > idsFile.txt
doit() {
   LC_ALL=C fgrep -f idsFile.txt sample_"$1" | awk '{print $1,$10,$11}'
}
export -f doit
parallel doit {1}{2}{3} ::: {a..z} ::: {a..z} ::: {a..z} > output.txt 
```

如果行的顺序不重要，这会更快一些：

```
parallel --line-buffer doit {1}{2}{3} ::: {a..z} ::: {a..z} ::: {a..z} > output.txt 
```

# android - TabhostcontentFactory 中的空指针异常

> ID：14602965
> 
> 赞同：0
> 
> 时间：2013-01-30T11:31:21.937
> 
> 标签：android, android-tabhost, android-view

**我无法在模拟器中执行给定的代码，它崩溃并给出错误，如下面的日志所示。这是我的活动**

```
import android.app.TabActivity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.TabHost;
import android.widget.TabHost.TabContentFactory;
import android.widget.TabHost.TabSpec;
import android.widget.TextView;

@SuppressWarnings("deprecation")
public class Second extends TabActivity {
    private TabHost mTabHost;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
            mTabHost = (TabHost) findViewById(android.R.id.tabhost);
            setupTab(new TextView(this), "SRK/T");
            setupTab(new TextView(this), "SRK II");
            setupTab(new TextView(this), "HOLLADAY");
            setupTab(new TextView(this), "BINKHORST");
        }
        private void setupTab(final View view, final String tag) {
            View tabview = createTabView(mTabHost.getContext(), tag);
                TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview).setContent(new TabContentFactory() {

                    public View createTabContent(String tag) {
                        // TODO Auto-generated method stub
                        return null;
                    }
                });
            mTabHost.addTab(setContent);
        }

        private static View createTabView(final Context context, final String text) {
            View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
            TextView tv = (TextView) view.findViewById(R.id.tabsText);
            tv.setText(text);
            return view;
        }

} 
```

* * *

**日志文件**

```
 01-30 16:53:07.266: E/AndroidRuntime(382): FATAL EXCEPTION: main
01-30 16:53:07.266: E/AndroidRuntime(382): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Second}: java.lang.NullPointerException
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.os.Looper.loop(Looper.java:123)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-30 16:53:07.266: E/AndroidRuntime(382):  at java.lang.reflect.Method.invokeNative(Native Method)
01-30 16:53:07.266: E/AndroidRuntime(382):  at java.lang.reflect.Method.invoke(Method.java:507)
01-30 16:53:07.266: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-30 16:53:07.266: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-30 16:53:07.266: E/AndroidRuntime(382):  at dalvik.system.NativeStart.main(Native Method)
01-30 16:53:07.266: E/AndroidRuntime(382): Caused by: java.lang.NullPointerException
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.widget.TabHost$FactoryContentStrategy.getContentView(TabHost.java:625)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.widget.TabHost.addTab(TabHost.java:216)
01-30 16:53:07.266: E/AndroidRuntime(382):  at com.example.iolcalci.Second.setupTab(Second.java:35)
01-30 16:53:07.266: E/AndroidRuntime(382):  at com.example.iolcalci.Second.onCreate(Second.java:21)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-30 16:53:07.266: E/AndroidRuntime(382):  ... 11 more
01-30 16:53:09.026: E/InputDispatcher(60): channel '40730f58 com.example.iolcalci/com.example.iolcalci.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
01-30 16:53:09.026: E/InputDispatcher(60): channel '40730f58 com.example.iolcalci/com.example.iolcalci.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

* * *

**我无法找到问题所在。初学者请帮帮我**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:38:51.090

注意错误：

```
01-30 16:53:07.266: E/AndroidRuntime(382): Caused by: java.lang.NullPointerException
01-30 16:53:07.266: E/AndroidRuntime(382):  at android.widget.TabHost$FactoryContentStrategy.getContentView(TabHost.java:625) 
```

然后注意您的代码：

```
.setContent(new TabContentFactory() {
      public View createTabContent(String tag) {
           // TODO Auto-generated method stub
           return null;
      }
} 
```

这`return null`导致了异常。

# android - onEditTextChange 无法获取整数数据

> ID：14602971
> 
> 赞同：0
> 
> 时间：2013-01-30T11:31:37.337
> 
> 标签：android, android-edittext

我有一个具有编辑文本的应用程序。它已经有一个默认值一 (1)。然后用户可以更改为他想要更改为 3 的任何内容。然后他可以从微调器中选择一个食物值。每种食物都有相应的卡路里。

例如，我选择一个含有 8 卡路里的面包，然后在编辑文本 2 中输入。总卡路里应该是 16 卡路里。8 * 2。请看我到目前为止尝试过的内容：

```
 String[] classes = {
    "Cornbread",
    "French Bread",
    "French Toast",
    "French Toast, low fat",
    "Italian Bread",
    "Wheat Bread",
    "Wheat Bread, low calories",
    "Wheat Bread, whole wheat"
    };

String mealname = selected;
String serving = calories.getText().toString();
int i = Integer.parseInt(serving.replaceAll("[\\D]", ""));

String servng = String.valueOf(i);

int amount = Integer.valueOf(etAmount.getText().toString());
int answer  = amount * i;
String strAnswer = String.valueOf(answer);
calories.setText(strAnswer);

SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
String strDate = sdf.format(new Date());

if ( ( mealname.isEmpty() || servng.isEmpty() ) ){

    // call for custom toast
    viewErrorToast();
}public void onItemSelected(AdapterView<?> parent, View arg1, int position,
    long arg3) {
// TODO Auto-generated method stub
selected = parent.getItemAtPosition(position).toString();

switch( position ){
case 0:
    strCalories = "188 calories";
    calories.setText(strCalories);
    break;
case 1:
    strCalories = "185 calories";
    calories.setText(strCalories);
    break;
case 2:
    strCalories = "126 calories";
    calories.setText(strCalories);
    break;
case 3:
    strCalories = "149 calories";
    calories.setText(strCalories);
    break;
case 4:
    strCalories = "81 calories";
    calories.setText(strCalories);
    break;
case 5:
    strCalories = "66 calories";
    calories.setText(strCalories);
    break;
case 6:
    strCalories = "46 calories";
    calories.setText(strCalories);
    break;
case 7:
    strCalories = "89 calories";
    calories.setText(strCalories);
    break;
}

}

private void initControls() {
// TODO Auto-generated method stub

// RadioGroup 
rgMeal = (RadioGroup) findViewById (R.id.rgSelectMeal);

sp = (Spinner) findViewById (R.id.spFoodVegetable);
save = (Button) findViewById (R.id.btFoodVegetableSave);
calories = (Button) findViewById (R.id.btFoodVegetableCalories);
back = (Button) findViewById (R.id.tabs_back);
home = (Button) findViewById (R.id.tabs_home);
tv = (TextView) findViewById (R.id.txtMenuHeader);
etAmount = (EditText) findViewById (R.id.etAmount);
tv.setText(R.string.whitebread);

ArrayAdapter<String> array =
        new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, classes);
sp.setAdapter(array);
sp.setOnItemSelectedListener(this);

back.setOnClickListener(this);
home.setOnClickListener(this);
save.setOnClickListener(this);

} 
```

更新：

问题是，它没有成倍增加。我从按钮中的文本中获取卡路里值，然后将其乘以编辑文本中的用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:46:05.190

一个更好的方法是

```
 String[] classes = {
"Cornbread",
"French Bread",
"French Toast",
"French Toast, low fat",
"Italian Bread",
"Wheat Bread",
"Wheat Bread, low calories",
"Wheat Bread, whole wheat" 
};

//put how much calorie each food item has in this array
int[] calories = {188, 185, 126, 149, 81, 66, 46, 89};

public void onItemSelected(AdapterView<?> parent, View arg1, int position,
long arg3) {
     // TODO Auto-generated method stub
     selected = parent.getItemAtPosition(position).toString();
     int amount = Integer.valueOf(etAmount.getText().toString())
     int total = amount * calories[position];
     strCalories = total + " calories";
     calories.setText(strCalories);

} 
```

# iphone - 像麻雀应用程序一样的多层拆分视图

> ID：14602989
> 
> 赞同：0
> 
> 时间：2013-01-30T11:32:28.503
> 
> 标签：iphone, objective-c, uinavigationcontroller, tableview, uisplitviewcontroller

[之前有人问](https://stackoverflow.com/questions/7775195/splitview-like-facebook-app-on-iphone)过类似的问题，并且有大量用于单层拆分视图的开源示例.. 但我想知道是否有一个类似于 sparrow 电子邮件客户端应用程序的应用程序，您可以在其中拖动/隐藏多个视图[..](https://stackoverflow.com/a/7777624/766570)

![在此处输入图像描述](../Images/ee90c0b28113f7b53ab69e3b2c4c0580.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:42:03.850

你可以检查[这个](https://github.com/gotosleep/JASidePanels)和[这个](https://github.com/pyro2927/JPStackedViewController)

两者都包含您正在寻找并在[github](https://github.com/)上可用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:36:25.940

查看[http://www.cocoacontrols.com](http://www.cocoacontrols.com)。对于这种类型，有很多开箱即用的实现。

搜索：

对于“堆栈”：[1](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=stack)

对于“面板”：[2](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=panel)

对于“幻灯片”：[3](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=slide)

对于“边”：[4](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=side)

# postgresql - 插入默认值

> ID：14602992
> 
> 赞同：18
> 
> 时间：2013-01-30T11:32:46.880
> 
> 标签：postgresql, insert, default, default-value

这两个陈述之间有什么区别吗？：

```
INSERT INTO distributors (did, dname) VALUES (DEFAULT, 'XYZ Widgets'); 
```

和：

```
INSERT INTO distributors (dname) VALUES ('XYZ Widgets'); 
```

我的意思是至少有一个理由在某些特定情况下使用一种或另一种模式，还是完全一样？did 是一个串行列。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T11:35:18.860

这完全一样。无需选择一个而不是另一个。

`default`当您拥有计算机生成的代码时，通常关键字很方便。只使用插入子句中的每一列，并且只`default`在您没有特定列的特定值时使用，这让生活变得更轻松。

除此之外，正如我所说，它是一样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T11:34:07.550

```
INSERT INTO distributors (dname) VALUES ('XYZ Widgets'); 
```

这很好，如果您希望保存其默认值，则无需指定字段，前提是设置了默认值。

# html - 网站上没有水平滚动

> ID：14602997
> 
> 赞同：1
> 
> 时间：2013-01-30T11:32:57.020
> 
> 标签：html, css, image, scroll, scrollbar

我试图在我的网站上放置一个比分辨率更宽的图像，这每次都会创建一个水平滚动条。我知道有人有一个图像比屏幕更宽的网站，但他的网站不会让你滚动。

有谁知道我可以添加以使页面无法水平滚动的代码或对代码的修复？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:39:05.230

```
body {
    overflow-x:hidden;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:36:48.647

添加`overflow-x: hidden`到您的`<html>`标签，或将图像设置为`background-image`，如果图像用于设计目的且没有内容。