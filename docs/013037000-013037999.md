# StackOverflow 问答 13037000-13037999

# excel - 自动化应用程序退出时如何避免 Excel 显示保存对话框

> ID：13037007
> 
> 赞同：4
> 
> 时间：2012-10-23T18:38:59.447
> 
> 标签：excel, delphi, excel-2010, office-automation

我有一个用 Delphi 编写的 excel 自动化应用程序，它可以访问给定的 excel 工作簿并提取应用一些内部逻辑不同的工作表数据。

它在 Excel 2003 和 2007 上运行良好多年。

最近一些用户有 Excel 2010。在这些用户上，当我的应用程序退出时，Excel 会显示一个对话框，要求用户保存未修改的工作表。该消息说明了要以新的 2010 格式保存的公式版本。抱歉，我没有确切的词，因为它不是英语办公包。

我的应用程序如何防止 excel 2010 显示这个烦人且无用的框？

大多数用户都有 Excel 2007，所以我的应用程序需要处理的大多数文件，无论运行我的应用程序的用户的实际 Excel 版本是什么，都是这种格式，并且将来也会如此，所以迁移所有文件不是一种选择。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T19:42:14.953

这是通过自动化打印 Excel 工作表的例程。在遇到不时弹出excel保存对话框的问题后，此例程解决了所有麻烦：

```
procedure PrintExcelReport( Const filename : String;
                                  sheet    : Integer);
{- Sheet is counted from 1 and upwards !! }
Var 
  App : OleVariant;
begin
  App:= CreateOleObject('Excel.Application');
  Try
    App.Visible:= 0;
    App.WorkBooks.Open(ExpandUNCFileName(filename),1);  // Open read only
    Try
      App.ActiveWorkBook.WorkSheets[sheet].Select;
      App.ActiveWorkBook.ActiveSheet.PrintOut; // Prints active sheet
    Finally
      App.ActiveWorkBook.Saved:= 1;
      App.DisplayAlerts:= 0;
      App.ActiveWorkBook.Close(SaveChanges:= 0);
    End;
  Finally
    App.Quit;
    App:= UnAssigned;
  End;
end; 
```

调整它以适合您的应用程序。

# javascript - Javascript 来检查用户是否在文本字段中输入空格

> ID：13037015
> 
> 赞同：3
> 
> 时间：2012-10-23T18:39:26.343
> 
> 标签：javascript, textbox, space, prompt

我想要一个脚本，*如果在文本字段中输入空格，它应该提醒用户*。我认为它需要 javascript。我正在编写一个脚本，我不希望用户在文本字段中输入空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:12:08.347

以下功能有效

```
$returnValue = preg_match('/[^a-z^A-Z^0-9]/', $str, $matches);
if ($returnValue==1) 
{
    alert("spaces & symbols are not allowed");
} 
```

*注意：***它不仅限制了空格，还限制了符号。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:43:12.627

使用`match()`字符串的方法

```
<script type="text/javascript">

function checkForm()

    {
    var textb=document.getElementById("textbox1").value;

        if(textb.match(' ')){
           alert('Spaces not allowed!');
           return false;
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:11:38.607

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready( function() {
$("textarea").keypress( function(e) {
if (e.which==32){
alert("spaces are not allowed");
}
});
});
</script>
<textarea></textarea> 
```

# .net - vbnet 数据表无法检索 us7ascii oracle 数据

> ID：13037019
> 
> 赞同：0
> 
> 时间：2012-10-23T18:39:42.183
> 
> 标签：.net, vb.net, oracle, type-conversion

我们有一个用 vb.net 4.5 编写的应用程序，它使用 ODBC 驱动程序从 Oracle 10g 数据库中检索数据。数据库字符集设置为 us7ascii。我们有包含扩展 ascii 字符的表（例如 ÄÄ 或 ÈÈ ）。当我们尝试使用以下代码检索数据时：

```
 Dim thisCN1 As New System.Data.Odbc.OdbcConnection(connectionString)
        Dim szSql as string="select * from mytable"  
        Dim dt As New DataTable
        Dim dataAdapter As New System.Data.Odbc.OdbcDataAdapter(szSql, thisCN1)
        dataAdapter.Fill(dt) 
```

我们有 ？？字符而不是 ÄÄ 或 ÈÈ 在包含扩展 ascii 字符的列中。在选择查询中，我们有一个 varchar2 类型的列（例如 COLUMN_A ），其中包含扩展的 ascii 字符（例如 ÄÄ 或 ÈÈ ）。当我们检查结果数据表时，我们发现了一个？字符而不是 ÄÄ 或 ÈÈ 。我们认为问题在于从 us7ascii oracle 数据类型转换为 16 位 unicode 的 vbnet system.string。varchar2 oracle 列似乎映射为 system.string 数据列类型。

为了进一步调查，我们尝试使用 ADODB 记录集获取数据。我们使用了以下代码：

```
 Dim rs As New ADODB.Recordset
    Dim cn As New ADODB.Connection
    Dim szSql as string="select * from mytable"  
    cn.ConnectionString = "connectionstring"
    cn.Open()
    rs.CursorLocation = ADODB.CursorLocationEnum.adUseClient
    rs.Open(szSql, cn)
    rs.ActiveConnection = Nothing 
```

在选择查询中，我们有一个 varchar2 类型的列（例如 COLUMN_A ），其中包含扩展的 ascii 字符（例如 ÄÄ 或 ÈÈ ）。当我们检查结果记录集时，我们发现了正确的字符（ ÄÄ 或 ÈÈ ）。

有谁知道如何告诉 vbnet 数据表不要进行任何类型转换？

# asp.net - MVC 4 查询数据库

> ID：13037020
> 
> 赞同：0
> 
> 时间：2012-10-23T18:39:44.410
> 
> 标签：asp.net

我是 ASP.NET MVC 的新手，并且已经完成了本教程： [http ://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-view](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-view)

它很好地解释了 MVC 的工作原理，但我需要使用现有的数据库（SQL Server）来返回表中的所有信息并将其显示在网页上。有谁知道如何完成此操作的教程或示例或我将如何进行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T04:19:27.803

您需要使用**数据库优先**方法。您可以通过在 google 上搜索获得大量教程。

# php - 通过ajax将数组发送到javascript

> ID：13037022
> 
> 赞同：1
> 
> 时间：2012-10-23T18:39:58.873
> 
> 标签：php, javascript, ajax

我正在尝试使用 javascript 将数组从 PHP 发送到 Ajax。我在 PHP 文件“myphp.php”中的数组是 $parts 并且是多维的。

我已经使用了 echo $parts 和 echo json_encode($parts) none 对我有用。$parts 有 2 行 2 列这是 var_dump 的结果：

```
array(4) { [0]=> array(3) { [0]=> string(13) "1350655763.12" [1]=> string(2) "25" [2]=> string(1) " " } [1]=> array(3) { [0]=> string(13) "1350655763.12" [1]=> string(2) "26" [2]=> string(0) "" } [2]=> array(1) { [0]=> string(0) "" } [3]=> array(1) { [0]=> string(0) "" } } 
```

我想将洞数组发送到 Ajax，但只是在网页上显示 $parts[0][0]。当我使用

```
echo $parts 
```

在 myphp.php 文件中：“数组”名称显示在网页上当我使用

```
echo json_encode($parts) 
```

在 myphp.php 文件中：显示数组的所有组件而不是第一个

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <script>
function getXMLHttp()
{
  var xmlHttp

  try
  {
    //Firefox, Opera 8.0+, Safari
    xmlHttp = new XMLHttpRequest();
  }
  catch(e)
  {
    //Internet Explorer
    try
    {
      xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch(e)
    {
      try
      {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
      catch(e)
      {
        alert("Your browser does not support AJAX!")
        return false;
      }
    }
  }
  return xmlHttp;
}

function MakeRequest()
{
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function()
  {
    if(xmlHttp.readyState == 4) 
     { 
      var parts=JSON.parse(xmlHttp.responseText); 
      document.getElementById('ResponseDiv').innerHTML = parts[0][0]; 
     }
  }

  xmlHttp.open("GET", "myphp.php", true); 
  xmlHttp.send(null);
}

result=MakeRequest();

</script>

  </head>
  <body>

    <div id='ResponseDiv'>
      This is a div to hold the response.
    </div>
  </body>
</html> 
```

我应该如何更改这些代码才能在网页上获取 parst[0][0] ？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:43:48.833

您需要在 javascript 上使用[JSON.parse](http://www.json.org/js.html) ，在 php上使用[json_encode 。](http://php.net/manual/en/function.json-encode.php)

PHP：

```
$parts = array();
....
echo (json_encode($parts)); 
```

Javascript：

```
var parts = JSON.parse(xmlHttp.responseText); 
```

或者，在您的 PHP 页面上，您还可以定义`header('Content-type: application/json');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:44:11.290

您应该在使用之前将您的 json 编码数据解析为 javascript。请在此处检查 json

[http://www.json.org/js.html](http://www.json.org/js.html)

请尝试以下代码：

```
result = MakeRequest();
var myObject = eval('(' + result + ')');
alert(myObject[0][0]); 
```

# c - 管道和分叉问题 - 管道中的某些输入未正确清除

> ID：13037024
> 
> 赞同：1
> 
> 时间：2012-10-23T18:40:08.630
> 
> 标签：c, fork, pipe

我有这个代码：

```
 int main ()
{
  int pid, fd[2], i, j;
  char comanda[1000], comm[100][100], *var, *var2, vect[100][100], check[10000];
  if(pipe(fd)<0) // nu creaza pipe-ul
  {
    perror("pipe error");
    exit(1);
  }
  if((pid = fork()) < 0 ) //nu face fork
  {
    perror("fork error");
    exit(1);
  }
  j = 0;
  if(pid){ 
      do {
        if( j > 0) fgets (check , 1000 , stdin); 
        printf("enter command: \n");
        scanf("%[^\t\n]", comanda);
        if(var = strtok(comanda, " "))
        {
          i=0;
          while(var != NULL)
          {
            strcpy(vect[i], var);
            var = strtok(NULL, " ");
            i++;
          }
        }
        else
          strcpy(vect[0], comanda);
        if(strcmp(vect[0], "login") == 0)
        {
            write(fd[1], "login ", 6);
            write(fd[1], vect[1], strlen(vect[1]));
            printf("Sending the child %s \n", vect[1]);
        }
        else if(strcmp(vect[0], "quit") == 0)
        {
          exit(1);
        }
        else
          printf("I got the command %s \n", vect[0]);
        j++;
      } while(1);
      close(fd[0]);
      close(fd[1]);
      wait(NULL);
  }
  else
  {
      do
      {
          char text[1000];
          close(fd[1]); 
          int i=0;
          strcpy(text, "");
          read(fd[0], text, sizeof(text));
          printf("I've read %s \n", text);
          var2 = strtok(text, " ");
          j=0;
          while(var2 != NULL)
          {
            strcpy(comm[j], var2);
            var2 = strtok(NULL, " ");
            j++;
          }
          if( strcmp(comm[0], "login") == 0)
          {
              printf("comm[1] e %d \n", comm[1]);
              if(login(comm[1]))
              {
                printf("OKK! \n");
              }
              else
              {
                printf("Username not in /etc/passwd \n");
              }
          }

          //close(fd[0]);
      } while(1);
  }
  return 0;
} 
```

现在的问题是……在父进程中读取命令时……如果我让他**登录 adam.johnson** ……它会将 adam.johnson 很好地发送到他工作的约翰逊……现在，当它返回父进程时，如果我再次给他**login wa**，它将从父进程读取为**login waam.johnson**（保留 am.johnson 来自 adam.johnson，这很糟糕！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:56:05.997

在孩子中，您没有使用调用`read`(读取的字节数) 的返回值，并且在父母中，您没有发送结束字符串的 nul char。因此，在孩子中，当您发送比最后一个字符串短的字符串时，您正在重用上次读取的缓冲区的一部分。

您可以尝试在父级中发送 nul 字符：

```
write(fd[1], "login ", 6);
write(fd[1], vect[1], strlen(vect[1]) +1); 
```

# c# - 在 VB.NET 或 C# 中，父类的子类与基类的派生类有什么区别？

> ID：13037026
> 
> 赞同：10
> 
> 时间：2012-10-23T18:40:19.497
> 
> 标签：c#, vb.net, parent-child, derived-class

在提出问题*[调用需要在 VB.NET 或](https://stackoverflow.com/questions/13024688)*Stack Overflow 上的 C# 中键入为基类的派生类实例的方法后，我被告知在提出问题时我使用了错误的术语。我在应该使用“base”和“derived”的地方使用了“parent”和“child”。

我一直无法找到对差异的良好描述。

到目前为止，这是我所知道的（或认为我知道的）：

父类包含子类。其中派生类继承自基类。

它们是相似的，因为子（或派生）可以访问父（或基）属性和方法（在允许的情况下）。

它们是不同的，因为您可以以 . 的形式引用子类的属性`Parent.Child.Property`。而你不能用派生类做到这一点。

有什么区别，在什么情况下应该使用一种而不是另一种？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T18:53:42.487

*parent*和*child*是比较抽象的关系。它们用于描述层次结构，因此可用于各种树（或有时 DAG）。
类继承树就是这样一棵树，所以称它们为*父子**树*并没有错。
该术语通常与其他类型的树一起使用，例如嵌套的 GUI 控件、目录结构、...

*base*和*derived*仅用于继承，因此更精确。这个术语是首选，因为它不那么模棱两可。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T18:48:28.310

在这两种情况下都使用父/子。它可用于描述您提到的“包含”关系（`Parent.Child.Property`），也可以表示派生类（也称为[子类](http://en.wikipedia.org/wiki/Subclass_%28computer_science%29#Subclasses_and_superclasses)）。

底线是 - 要了解父/子的含义，您必须了解上下文。

无论如何，这两个概念（继承与封装）之间的区别可以被认为是“is-a”和“has-a”的关系。

*   狗*是*动物（继承）
*   汽车*有*引擎（封装）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T18:44:21.667

当一个类从基类派生时，它被称为**继承**。`You inherit when you want to add functionality to an existing component, or extend the component.`

当一个类被父类引用/包含在父类中时，它被称为**封装**。`You encapsulate when your (usually parent) object 'uses' components.`

从[Ext - 继承与封装](http://www.sencha.com/forum/showthread.php?18478-Ext-Inheritance-Vs-Encapsulation)：

> 什么时候继承，什么时候封装？当您想向现有组件添加功能时，您可以继承。当您的对象“使用”组件时，您封装。如果您的新类“是”Ext 组件，则您继承。如果您的新类“具有”Ext 组件，则进行封装。

[这是一个链接](http://www.developer.com/design/article.php/3525076/Encapsulation-vs-Inheritance.htm)，详细介绍了面向对象编程中的继承和封装，并讨论了哪种概念在哪种情况下更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T18:47:10.867

*OOP 中的*派生明确定义了类型之间的多态关系：**

 *```
public class A{
}

public class AB : A{
} 
```

类`AB`是派生自的类`A`。

*Parent*和*Child*是*抽象*关系的定义，在编程中可以得到不同的形状，例如：

```
public class A{
}

public class ParentA{
    List<A> children = ...
} 
```

通常用于`Graph`相似的关系

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T18:51:05.390

根据您使用父/子的方式，我认为您的意思是嵌套类。

```
class Container
{
    class Nested
    {
    }
} 
```

默认情况下，嵌套类是私有的。这里的目的通常是`Nested`作为`Container`. 例如，`Nested`可以由 Container 中需要返回多个值的方法使用。`Nested`or的一个实例`Container`需要对另一个的引用才能访问其任何非静态成员。

派生类从基类继承

```
class Base
{
}

class Derived : Base
{
} 
```

派生类具有其基类的所有功能，并且可以在可以使用基类的任何地方使用。的实例`Derived`可以访问所有公共和受保护的非静态成员。 `Base`无权访问 的任何成员`Derived`。此外，`Derived`可以覆盖`Base`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T19:19:27.870

避免使用术语父/子我只想提一下，嵌套类有可能拥有自己的包含（“外部”）类作为其基类。我不认为这是人们经常使用的模式，但在语言（C#）中是允许的。

一个例子：

```
class MyClass
{
  // we choose to make the instance constructor private
  MyClass()
  {
  }

  // nested type, private to MyClass, deriving from MyClass
  class InnerMyClass : MyClass
  {
    // ...
  }

  public static MyClass GetMyClassInstance()
  {
    return new InnerMyClass();
  }

  // ...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T18:45:00.487

parent 和 child 与封装的 OO 原则有关，而 base 和derived 与继承原则有关。

由父类封装的子类，只公开子类的公共方法，不能直接访问父类。

`protected`派生类可以访问作为或更高访问修饰符公开的基类的所有属性、方法和成员。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-23T18:46:17.653

“Parent”是“base”的同义词，“child”是“derived”的同义词，但“parent”和“child”并不常见，而且技术性不强（而且在 IMO 中听起来不太好）。另外两个术语是“超类”和“子类”。*

# java - 字符串操作：从java中的字符串中取出数字？

> ID：13037027
> 
> 赞同：0
> 
> 时间：2012-10-23T18:40:20.480
> 
> 标签：java, string, ping

我希望能够从数字等字符串中提取某些内容，在速度和准确性方面执行此操作的最有效方法是什么？

因此，例如，如果我有一个文件：PingFile.txt，其内容只是通过管道输入的服务器的 ping，例如：

```
PING google.com (74.125.224.46): 56 data bytes
64 bytes from 74.125.224.46: icmp_seq=0 ttl=45 time=5.134 ms
64 bytes from 74.125.224.46: icmp_seq=1 ttl=45 time=5.102 ms
64 bytes from 74.125.224.46: icmp_seq=2 ttl=45 time=5.062 ms
64 bytes from 74.125.224.46: icmp_seq=3 ttl=45 time=4.988 ms
64 bytes from 74.125.224.46: icmp_seq=4 ttl=45 time=5.368 ms
64 bytes from 74.125.224.46: icmp_seq=5 ttl=45 time=5.012 ms 
```

如果我只想提取时间值（5.134、5.102、5.062 等），然后解析它们是浮点数或双精度数，而不是它们的字符串。我该怎么做？

谢谢，

欧登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:45:09.793

我认为您可以使用`regex="time=[0-9\\.]+"`来查找字符串`time=5.134`和`time=5.102`

然后做一个子字符串`"time=5.134".substring(5)`来获取数字部分。

下面的代码示例：

```
String timeString = "64 bytes from 74.125.224.46: icmp_seq=0 ttl=45 time=5.134 ms";
Pattern timePattern = Pattern.compile("time=[0-9\\.]+");
Matcher timeMatcher = timePattern.matcher(timeString);
if(timeMatcher.find()){
    String timeS = timeMatcher.group(0);
    System.out.println(timeS);
    String time = timeS.substring(5);
    System.out.println(time);
    double t = Double.parseDouble(time);
    System.out.println(t);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:44:08.827

您可以为每一行执行此操作：

```
String[] tokens = line.split(" ");
String timeString = tokens[tokens.length-2];
float time = Float.parseFloat(timeString); 
```

如果需要，您可以使用 BufferedReader 逐行读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:46:08.353

有很多方法可以做到，比如...

*   使用 Pattern 类，但这对于你想要的可能是非常重量级的
*   使用 Scanner 类，尽管这可能仍然超出您的需要
*   使用 string.split(" ")[6] 和 Float.valueOf()（或 Double.valueOf()）

我敢肯定还有其他方法可以做到这一点。

# javascript - 购物车总价的 Javascript - 良好做法和添加功能

> ID：13037031
> 
> 赞同：0
> 
> 时间：2012-10-23T18:40:37.483
> 
> 标签：javascript, cart

我正在编写一个简单的购物车来处理用户输入，然后再将金额转交给我的支付处理器。我有有效的代码，但我不确定它是否是计算总数的最有效方法。其次，我想在选择三个类别时添加百分比折扣的可能性。我最初有一种方法可以对 IF 语句进行大量检查，但效率低下，并且还有一个未解决的问题。我将如何对我预先存在的代码应用百分比折扣（如果四个项目类别中的三个> 0）？

```
 var subtotal = 0;
  var veu4 = 0;
  var veo4 = 0;
  var vres = 0;
  var vcvl = 0;
  var vedb = 0;

  function update_price(pin) {
  quantity = parseFloat(pin.value);

  var callname = pin.name;

    if (callname == "item1"){
      price = quantity * 50;
      subtotal -= vcvl * 50;
      vcvl = quantity;
    }
    else if (callname == "item2"){
      price = quantity * 50;
      subtotal -= vres * 50;
      vres = quantity;
    }
    else if (callname == "item3"){
      price = quantity * 99;
      subtotal -= veu4 * 99;
      veu4 = quantity;
    }
    else if (callname == "item4"){
      price = quantity * 129;
      subtotal -= veo4 * 129;
      veo4 = quantity;
    }
    else{
      //commented out irrelevant
    }

 subtotal += price;
 passtotal = document.getElementById("ftotal"); 
 total = document.getElementById("ptotal");
 total.innerHTML = subtotal;
 passtotal.value = subtotal;
 passtotal.innerHTML = subtotal;   
} 
```

}

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:12:43.600

有很多方法可以做到这一点，但这会更干燥一些。

```
var items = {
  item1: 50,
  item2: 50,
  item3: 99,
  item4: 129
};

var cart = {};

function update_price(pin) {
  quantity = parseFloat(pin.value);

  var callname = pin.name;

  // Get the total for this item with quantity
  price = quantity * items[callname];

  // Update quantity in cart
  cart[callname] = {quantity: quantity, subtotal: price};  

  passtotal = document.getElementById("ftotal"); 
  total = document.getElementById("ptotal");
  total.innerHTML = price;
  passtotal.value = price;
  passtotal.innerHTML = price;
} 
```

我认为您对总计/小计的概念很奇怪。看起来您的总计/小计将始终等于您上次计算的价格 * 数量。也许您生成的代码是错误的。因此，我的也会略有错误。要修复它，使总数等于购物车中的所有小计。

至于将这些数据传递给您的服务器，您应该传递将要购买的物品和数量。在服务器端，应重新计算小计和总计。我添加了您的购物车变量来帮助解决这个问题。只需序列化这些数据并将其发送到您的服务器处理。 **实际向用户收费时，不要以 ftotal 或 ptotal 的值准确。**

# r - 计算已运行的条件数

> ID：13037034
> 
> 赞同：0
> 
> 时间：2012-10-23T18:40:43.877
> 
> 标签：r

我有一些来自实验的数据，其中每个主题都使用 18 个不同列表中的一个运行。我需要找出每个列表运行了多少次。

data.frame 的结构如下：

```
Subject1    List1    Trial1 stuff  
Subject1    List1    Trial2 stuff  
Subject2    List2    Trial1 stuff  
...
Subject22   List1    Trial1 stuff
Subject22   List1    Trial2 stuff 
```

虽然 List1 显示很多是 data.set，但我只想计算它是否包含新主题。例如，如果以上是在 List1 中运行的所有主题，我会运行 List1 两次。

我已经写了一些能得到我想要的东西，但它使用了循环。我想知道是否有更好的方法来解决这个问题。谢谢。

编辑：这是（基本上）我已经使用的代码：

```
Lists <= matrix(nrow=22,ncol=2)  
for (i in seq(1,22)) { 
    Lists[i,1] <= i  
    Lists[i,2] <= unique(data$List[which(data$subject==i)])  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:43:32.947

你在找桌子吗？

```
> table(c("List1","List1","List2"))

 List1  List2
     2      1 
```

你可以做表（你的第二列）

# c - 我的代码中的链表和分段错误错误

> ID：13037038
> 
> 赞同：0
> 
> 时间：2012-10-23T18:40:54.227
> 
> 标签：c, pointers, linked-list

我的代码如下：它要求用户输入行星名称、距离和描述。然后它将打印出用户输入的任何内容。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

/* planet type */
typedef struct{
  char name[128];
  double dist;
  char description[1024];
} planet_t;

/* my planet_node */
typedef struct planet_node {
  char name[128];
  double dist;
  char description[1024];
  struct planet_node *next;
} planet_node;

/* the print function, not sure if its correct */
void print_planet_list(planet_node *ptr){
  while(ptr != NULL){
    printf("%s %lf %s\n", ptr->name, ptr->dist, ptr->description);
    ptr=ptr->next;
  }
  printf("\n");
}

int main(){
  char buf[64];
  planet_node *head = NULL;
  int quit = 0;

  do {
    printf("Enter planet name (q quits): ");
    scanf("%s",buf);
    if((strcmp(buf,"q")==0)){
      quit = 1;
    }
    else{
      planet_node *new = malloc(sizeof(planet_node));       /* New node */
      strcpy((*new).name, buf);         /* Copy name */
      printf("Enter distance and description: ");
      scanf(" %lf ", new->dist); /* Read a new distance into pluto's */
      gets(new->description);      /* Read a new description */
      new->next = head;        /* Link new node to head */
      head=new;        /* Set the head to the new node */
    }
  } while(!quit);

  printf("Final list of planets:\n");
  print_planet_list(head);

  while(head != NULL){
    planet_node *remove = head;
    head = (*head).next;
    free(remove);
  }
} 
```

我发表评论的地方是我不确定它是否正确的地方，代码符合但给了我一个分段错误。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:48:27.390

`scanf(" %lf ", new->dist);`

这就是你的错误所在。它应该是：

`scanf(" %lf ", &(new->dist));`

额外的 ' ' 也会导致它接受额外的字符。这可以避免

`scanf("%lf", &(new->dist));`

# php - get_the_category() + Wordpress 的问题

> ID：13037040
> 
> 赞同：0
> 
> 时间：2012-10-23T18:41:04.910
> 
> 标签：php, wordpress

WordPress 版本 3.4.2

我很难在 single.php 上打印当前类别名称。（在循环之外）似乎正在进行某种缓存。

我正在尝试做这样的事情：

```
 if the_category() == 'this posts category' {
    echo 'something';
    else do this....etc 
```

我已经尝试了几件事，并且总是以缓存的类别名称结束。无论帖子属于哪个类别。

这是我一直在使用的片段：

```
 // outside loop
    $category = get_the_category();
    echo the_category($category[0]->cat_ID); 
```

唉，它只会打印缓存的类别名称，而不是帖子实际所在的类别。感谢您的帮助。真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:20:01.220

看看[`wp_get_post_categories()`](http://codex.wordpress.org/Function_Reference/wp_get_post_categories)改用。也许是这样的`wp_get_post_categories($post->ID, $args)`？

# sql - 如何使用 Sequel 组合 AND 和 OR？

> ID：13037044
> 
> 赞同：3
> 
> 时间：2012-10-23T18:41:18.327
> 
> 标签：sql, ruby, database, sequel

我想使用 Ruby 的 Sequel 生成如下 SQL 查询：

```
SELECT * FROM Objects WHERE (color = "red" AND shape = "triangle") OR 
                            (color = "blue" AND shape = "square") OR
                            (color = "green" AND shape = "circle") 
```

我想从条件列表中以编程方式构建此查询，以便可以执行以下操作：

```
conditions = [[[:color, "red"], [:shape, "triangle"]],
              [[:color, "blue"], [:shape, "square"]],
              [[:color, "green"], [:shape, "circle"]]]
DB[:Users].where(conditions.sql_or) 
```

它不必遵循那种确切的形式，但我希望能够以编程方式构建条件，因此仅仅能够手动构建这个查询是不够的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:00:57.887

尝试这个：

```
conditions = [ 
               {:color => "red", :shape => "triangle"},
               {:color => "blue", :shape => "square"},
               {:color => "green", :shape => "circle"}
             ]

head, *tail = *conditions

tail.inject(DB[:Users].filter(head)){|mem,obj| mem.or(obj) } 
```

我得到：

```
=> #<Sequel::Postgres::Dataset: "SELECT * FROM \"Users\" WHERE (((\"color\" = 'red') AND (\"shape\" = 'triangle')) OR ((\"color\" = 'blue') AND (\"shape\" = 'square')) OR ((\"color\" = 'green') AND (\"shape\" = 'circle')))"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:54:10.173

我认为这将使用不同的 SQL 查询返回等效结果：

```
DB[:Objects].where('(color, shape) in ?', conditions.sql_value_list).sql
=> "SELECT * FROM `Objects` WHERE ((color, shape) in (('red', 'triangle'), ('blue', 'square'), ('green', 'circle')))" 
```

`sql_value_list`记录在[http://sequel.rubyforge.org/rdoc/classes/Array.html](http://sequel.rubyforge.org/rdoc/classes/Array.html)

否则使用：

```
objects = DB[:Objects].where(conditions[0])
conditions[1 .. -1].each { |c| objects = objects.or(c) } 
```

结果是：

```
SELECT * FROM `Objects` WHERE (((`color` = 'red') AND (`shape` = 'triangle')) OR ((`color` = 'blue') AND (`shape` = 'square')) OR ((`color` = 'green') AND (`shape` = 'circle'))) 
```

* * *

我在看Iain的回答，和我的第二个基本一样，只是更简洁一些；我喜欢它的优雅。

# jquery - 如何使用手动工具滚动 html 页面？

> ID：13037046
> 
> 赞同：-1
> 
> 时间：2012-10-23T18:41:26.783
> 
> 标签：jquery, html, css, jquery-ui

我正在尝试通过单击内容来滚动 html 页面，就像通常使用 pdf 查看器一样，我已经尝试过这个插件[“Jquery Content Drag Scroller”](http://www.stevefenton.co.uk/Content/Jquery-Content-Drag-Scroller/)，但它似乎只能垂直滚动，您还有其他想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:51:15.067

试试这个： [http ://www.smoothdivscroll.com/touchScroller.html](http://www.smoothdivscroll.com/touchScroller.html)

这是你想做的吗？

# macos - Mac OS X 上 jfxrt.jar 的位置

> ID：13037047
> 
> 赞同：3
> 
> 时间：2012-10-23T18:41:30.180
> 
> 标签：macos, javafx-2

我正在尝试编译/运行一些 JavaFX 代码。在我的电脑上，我参考：C:/Program Files/Oracle/JavaFX 2.1 SDK/rt/lib/jfxrt.jar

我的理解是 JavaFX 包含在 Mac OS x 上的 JDK 7 中，但我在以下位置找不到 jfxrt.jar：/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T14:00:23.290

**编辑（2019 年 11 月）**：目前 OpenJDK 不包括 OpenJFX。一些 OpenJDK 提供程序将 OpenJFX 包含在其安装中。其余的，您可以使用 maven 或 gradle 将其包含到您的项目中。

* * *

Java7：`jre/lib/jfxrt.jar`

Java8：`jre/lib/ext/jfxrt.jar`

你可以找到它使用`find $JAVA_HOME -name jfxrt.jar`

* * *

由于 Java9 没有`jfxrt.jar`，它现在是一组模块：

```
./jmods/javafx.base.jmod
./jmods/javafx.media.jmod
./jmods/javafx.swing.jmod
./jmods/javafx.controls.jmod
./jmods/javafx.web.jmod
./jmods/javafx.fxml.jmod
./jmods/javafx.graphics.jmod 
```

# javascript - $routeProvider - 根据 URL 注入控制器依赖项

> ID：13037051
> 
> 赞同：11
> 
> 时间：2012-10-23T18:41:48.323
> 
> 标签：javascript, dependency-injection, angularjs

考虑代码：

```
var app = angular.module("app", [], function($routeProvider) {
  $routeProvider
    .when("/page1", { controller: "MyController" })
    .when("/page2", { controller: "MyController" })
    .when("/page3", { controller: "MyController" });
});

app.factory("StrategyOne", function() {...});
app.factory("StrategyTwo", function() {...});
app.factory("StrategyThree", function() {...});

app.controller("MyController", function(Strategy, $scope) {...}); 
```

根据 URL，我`StrategyOne`希望`StrategyTwo`在`StrategyThree`构造`MyController`. 一个伪代码来说明这个想法：

```
var app = angular.module("app", [], function($routeProvider) {
  $routeProvider
    .when("/page1", { controller: "MyController", Strategy: "StrategyOne" })
    .when("/page2", { controller: "MyController", Strategy: "StrategyTwo" })
    .when("/page3", { controller: "MyController", Strategy: "StrategyThree" });
}); 
```

我可以用AngularJS实现这样的改变吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-23T18:59:11.630

是的！AngularJS 可以`resolve`通过路由定义的属性轻松处理这个问题（更多信息[在这里](http://docs.angularjs.org/api/ng.%24routeProvider)）。

所以，基本上你可以写这样的东西：

```
var app = angular.module("app", [], function($routeProvider) {
  $routeProvider
    .when("/page1", { controller: "MyController", resolve: {Strategy: "StrategyOne"}})
    .when("/page2", { controller: "MyController", resolve: {Strategy: "StrategyTwo"}})
    .when("/page3", { controller: "MyController", resolve: {Strategy: "StrategyThree"}});
}); 
```

将正确的策略注入您的控制器！AngularJS DI 处于最佳状态！

有一个非常好的视频教程处理这些`resolve`主题，您可能会觉得它很有趣：[http ://www.youtube.com/watch?v=P6KITGRQujQ&list=UUKW92i7iQFuNILqQOUOCrFw&index=4&feature=plcp](http://www.youtube.com/watch?v=P6KITGRQujQ&list=UUKW92i7iQFuNILqQOUOCrFw&index=4&feature=plcp)

# android - 如何包装我的移动网站以访问原生移动功能？

> ID：13037055
> 
> 赞同：0
> 
> 时间：2012-10-23T18:41:52.813
> 
> 标签：android, ios, mobile, responsive-design

我想将我的移动网站包装在本机外壳中。这样做的原因是我想：

1.  允许我的用户通过页面上的链接使用该应用拍照（如果他们使用的是封装的原生网站）。
2.  向我的用户发送推送通知

根据我最初的研究，PhoneGap 和 Titanium 都不是为此而设计的。这里最好的策略是什么？如果有任何区别，这是一个企业应用程序而不是公共应用程序。我只针对 Android 和 iOS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T02:11:59.793

So several months later I'm not sure why I thought PhoneGap and Titanium were poor choices, but they both would have worked fine, I'm sure. For a hybrid iOS app I ended up just using `UIWebView` with a native `UITabBar` and implementing some delegate methods on the web view to make it feel native.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:58:32.833

你不是在寻找像罗德这样的东西吗？

[http://docs.rhomobile.com/rhodes/build](http://docs.rhomobile.com/rhodes/build)

# php - phpredis 与 Redis 一起去

> ID：13037061
> 
> 赞同：3
> 
> 时间：2012-10-23T18:42:09.370
> 
> 标签：php, redis, redistogo

我遇到了与此类似的问题：

[使用 PHP 连接到 Redis To Go](https://stackoverflow.com/questions/4918569/connecting-to-redis-to-go-with-php)

基本上，我在redis中有这个uri：

redis://myusername:foopassword@herring.redistogo.com:9998

我正在尝试使用 phpredis 连接到它：

$r->connect("redis://myusername:foopassword@herring.redistogo.com:9998/");

它不工作。在另一个答案中，建议使用 predis，但我只是不想。我应该可以自由使用我想要的任何客户端。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:14:00.577

改用这个：

```
$r = new Redis();
$r->connect("herring.redistogo.com", 9998);
$r->auth("foopassword"); 
```

如果这不起作用，请尝试`$r->auth("myusername:foopassword")`。

[您可以在官方 GitHub 页面](https://github.com/phpredis/phpredis)上找到 phpredis 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:12:38.837

我没有使用redistogo，但也许你可以试试？

$r->connect('herring.redistogo.com', 9998);
$r->auth('我的用户名:foopassword');

# php - 遍历simplexml节点列表对象变量的说明

> ID：13037062
> 
> 赞同：0
> 
> 时间：2012-10-23T18:42:15.873
> 
> 标签：php, xml

我有这个

```
$xml = new SimpleXMLElement($output);
$names = $xml->param->value->array->data; 
```

这是输出

```
SimpleXMLElement Object
(
[value] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [struct] => SimpleXMLElement Object
                    (
                        [member] => SimpleXMLElement Object
                            (
                                [name] => school
                                [value] => SimpleXMLElement Object
                                    (
                                        [struct] => SimpleXMLElement Object
                                            (
                                                [member] => Array
                                                    (
                                                        [0] => SimpleXMLElement Object
                                                            (
                                                                [name] => schoolid
                                                                [value] => SimpleXMLElement Object
                                                                    (
                                                                        [string] => 49961
                                                                    )

                                                            )

                                                        [1] => SimpleXMLElement Object
                                                            (
                                                                [name] => schoolname
                                                                [value] => SimpleXMLElement Object
                                                                    (
                                                                        [string] => Millersville Elementary School
                                                                    )

                                                            ) 
```

我正在尝试获取“学校名称”值

使用

```
for($i=0;$i<count($names);$i++) {
    echo $names[0][$i]->struct->member->value->struct->member[0]->value.'<br>';
} 
```

我也试过 string($names[0]etc.) 没有成功。我想我一开始就用 $names[0][$i] 搞乱了顺序？？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T18:47:48.030

如果您觉得懒惰，可以考虑[**学习 XPath 。**](http://php.net/manual/en/simplexmlelement.xpath.php)如果您不想以永无止境的 -> 的连续性来解决问题，这是解决问题的简单方法:)

**学习 XPath 也是一项投资。**当您处理 XML 时，您需要了解它。*它是 XML 或 DOM 的 SQL*（参见**[DOMXPath](http://php.net/manual/en/class.domxpath.php)**）。

我知道这不是一个真正的答案，但花一些时间，我在这里指出的是值得的，也将解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:10:11.597

这是使用 xpath 获取字段名和值的解决方案

```
$cols = $xml->xpath('//member/value/struct/member/name');
$names = $xml->xpath('//member/value/struct/member/value/*');
for($i=0;$i<count($cols);$i++) {
echo $cols[$i].' = '.$names[$i].'<br>';
} 
```

xpath 对于任何处理 xml 的人来说都是必须的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:53:46.623

结果 $name 是 valuse （对象和数组）的混合。

尝试将 $name 仅转换为对象或仅数组。

您发布的示例不完整，无法尝试查看它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:56:51.787

我最近有一个类似的问题，我最终写了一些东西，将整个结构扁平化为数组中的数组，更易于遍历，但就手头的问题而言，我经常发现 var_dump/print_r 每个阶段都有帮助并建立它按级别。

$names 是一个对象，所以在我看来你想要的参考是：

```
$names->value[0]->struct->member->value->struct->member['value'][1]->value; 
```

编辑：我暂时忽略了循环部分，因为我认为你需要重新评估你的 count()，它似乎需要是 count($names->value)，如果我是学校数组'是正确的，在这种情况下，`$i`将进入第一个`[0]`。

# java - java.lang.OutOfMemoryError 相机应用

> ID：13037065
> 
> 赞同：4
> 
> 时间：2012-10-23T18:42:44.263
> 
> 标签：java, android, camera

我有一个问题/问题，我一直在寻找几个星期，但仍然没有解决方案。此应用程序用于拍摄带有框架的照片。框架是 PNG 格式。

当我启动应用程序时，一切都很好，但是当我单击按钮拍照时，应用程序崩溃了。有时它会给出 OutOfMemoryError，有时会给出 ArrayIndexOutOfBoundsException，所以我几乎尝试了所有方法，但什么也没做。我应该改变drawbles的大小吗？还是我应该设置最终 bmp 的大小？

我很抱歉我的英语因为我是法国人.. 这是代码

```
private class CapturePictureCallback implements PictureCallback {

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {

        Bitmap picBitmap = BitmapFactory.decodeByteArray(data, 10,
                data.length);

        final ViewFlipper flipper = (ViewFlipper) findViewById(R.id.main_flipper);
        View flipperView = flipper.getCurrentView();

        Bitmap flipperBitmap = Bitmap.createBitmap(flipperView.getWidth(), flipperView.getHeight(), Bitmap.Config.ARGB_4444);
        Canvas flipperCanvas = new Canvas(flipperBitmap);
        flipperView.draw(flipperCanvas);
        Bitmap resizedFlipperBitmap = Bitmap.createScaledBitmap(flipperBitmap, 500, 300, true);

        // Insert image on top
        Bitmap overlaidBitmap = overlay(picBitmap, resizedFlipperBitmap);

        picBitmap.recycle();
        resizedFlipperBitmap.recycle();

        // Create file
        save(overlaidBitmap);
        overlaidBitmap.recycle();
        camera.startPreview();
    }

    private Bitmap overlay(Bitmap bmp1, Bitmap bmp2) {
        Bitmap bmOverlay = Bitmap.createBitmap( 0,0, bmp1.getConfig());
        Canvas canvas = new Canvas(bmOverlay);
        canvas.drawBitmap(bmp1, new Matrix(), null);
        canvas.drawBitmap(bmp2, new Matrix(), null);
        return bmOverlay;
    }

    private void save(Bitmap bitmap) {
        File picturesFolder = null;
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ECLAIR_MR1) {
            picturesFolder = new File(
                    Environment.getExternalStorageDirectory(), "Pictures");
        } else {
            picturesFolder = Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
        }

        Date date = new Date(System.currentTimeMillis());
        SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMddHHmm");
        String dateString = sdf.format(date);
        String fileName = "kissthepresident" + dateString + ".jpeg";
        File pictureFile = new File(picturesFolder, fileName);

        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            bitmap.compress(Bitmap.CompressFormat.JPEG, 90, bos);
            bitmap.recycle();

            if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ECLAIR_MR1) {
                ContentValues values = new ContentValues(7);

                values.put(Images.Media.TITLE, fileName);
                values.put(Images.Media.DISPLAY_NAME, fileName);
                values.put(Images.Media.DATE_TAKEN, dateString);
                values.put(Images.Media.MIME_TYPE, "image/jpeg");
                values.put(Images.Media.ORIENTATION, 0);
                values.put(Images.Media.DATA,
                        pictureFile.toString());
                values.put(Images.Media.SIZE, pictureFile.length());

                Uri uri = Uri.fromFile(pictureFile);
                getContentResolver().insert(uri, values);

            } else {
                MediaScannerConnection.scanFile(getApplicationContext(),
                        new String[] { pictureFile.toString() }, null,
                        new MediaScannerConnection.OnScanCompletedListener() {
                    public void onScanCompleted(String path, Uri uri) {
                        Log.i("ExternalStorage", "Scanned " + path + ":");
                        Log.i("ExternalStorage", "-> uri=" + uri);
                    }
                });

            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
@Override
protected void onDestroy() {
    super.onDestroy();

    unbindDrawables(findViewById(R.id.main_layout));
    System.gc();
}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
    }
    if (view instanceof View) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
        ((ViewGroup) view).removeAllViews();
    }
} 
```

这是目录

```
FATAL EXCEPTION: main java.lang.ArrayIndexOutOfBoundsException
at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:403)
at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:418)
at com.kissthepresidents.Main$CapturePictureCallback.onPictureTaken(Main.java:255)
at android.hardware.Camera$EventHandler.handleMessage(Camera.java:529)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3701)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:53:01.400

**问题一：** decodeByteArray(byte[] data, int offset, int length)

```
Bitmap picBitmap = BitmapFactory.decodeByteArray(data, 10,
            data.length); 
```

应该是（我不知道您的 10 偏移量是多少，但您应该更正长度）。

```
Bitmap picBitmap = BitmapFactory.decodeByteArray(data, 10,
            data.length - 10); 
```

# css - 李拥抱浮动图像

> ID：13037068
> 
> 赞同：0
> 
> 时间：2012-10-23T18:42:50.790
> 
> 标签：css, image, floating

我上传了以下页面，以便您更轻松地帮助我： [http](http://www.rebuslondon.com/GEBROCHUREcopy.html) ://www.rebuslondon.com/GEBROCHUREcopy.html 不要使用 Internet Explorer，因为我没有为此优化页面。

如您所见，有 4 张图像，即 3 张橙色和 1 张黄色。橙色的只是嵌入到父元素中，而黄色的则是浮动的，因此当浏览器窗口放大时它会粘在父元素的右边缘。这可以正常工作，但是当窗口变窄时（例如 1024*768），这会在浮动图像下方产生一个间隙。

有没有办法让这个差距消失？我想您了解问题的最佳方式是尝试调整浏览器窗口的大小。您会注意到窗口越窄，间隙就会变得越大。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:59:52.793

问题是您在 li.right 之后的 li 中添加了 clear:both。如果您删除此规则，它会显示正常。

 ~~~~```
#portfolio #container > ul.projFlow li.floated + li {
    clear: both;
} 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:02:30.177

只需从您的 contents.css 行 90 中删除 clear

```
#portfolio #container > ul.projFlow li.floated + li {
clear: both;
} 
```

只需完全删除它就可以了。~~~~

# ssl - 我的软件应该如何处理未来的 SSL 证书？

> ID：13037069
> 
> 赞同：0
> 
> 时间：2012-10-23T18:42:56.543
> 
> 标签：ssl, certificate, future, rfc

我正在开发一个导入 ssl 证书的软件。当过期日期过去时，我的软件会指责此证书无效。但是，假设我有一个不是在 2015 年之前有效的证书，而我们是在 2012 年。我的软件应该报告什么？我应该接受吗？我搜索了很多标准或建议，但一无所获。

我知道这不太可能发生，但我想知道该怎么做。

这似乎很明显，但如果我们在 2012 年，证书在 2011 年之前不是有效的，但由于某种原因，我的机器设置为 1970 年这样的日期。所有 SSL 服务都将停止工作。

所以你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T00:10:57.743

拒绝它。它还无效。发行/签名过程中可能存在错误，但这不是您的问题。证书说它自己还不是有效的，所以它还不是有效的。

# asp.net-mvc-3 - 为什么我不能只向 MVC3 发送休息调用？

> ID：13037072
> 
> 赞同：1
> 
> 时间：2012-10-23T18:43:08.170
> 
> 标签：asp.net-mvc-3, authentication, restsharp

我正在尝试向我的 MVC3 应用程序发送请求，我已经尝试过常规 WebRequest，我正在尝试使用 RestSharp 应用正确的 Authenticator，但它仍然返回登录页面的重定向结果？

我究竟做错了什么？

upd：我应该如何使用 RestSharp 进行表单身份验证？我想这是有可能的——只需要玩弄那个饼干......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:12:31.153

如果您被重定向到登录页面，则必须设置您的 mvc 3 应用程序以进行表单身份验证。表单身份验证将需要与请求一起发送的 cookie。如果您在 RestSharp 中使用基本身份验证器，这将不起作用。我假设您正在使用 MVC 控制器来提供您尝试调用的 REST API。

一种选择是升级到 MVC 4 并使用 ASP.NET Web API 来开发您的 REST API。授权行为在 ASP.NET Web API 中略有不同，因为它将返回 HTTP 401 错误而不是执行重定向。并且您可以自定义 AuthorizationAttribute 以从 HTTP 标头中提取信息以进行基本身份验证和授权。

另一种选择是，如果控制器上的操作不需要身份验证/授权，您可以将 AllowAnonymousAttribute 放在该方法上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:17:39.707

要通过 Forms 身份验证，您必须获取 cookie 并将其粘贴到 RestSharp 的 cookie 容器中。要获取 cookie，您可以使用常规 WebRequest。

```
 private Cookie GetAuthCookie(string user, string pass)
    {
        var http = WebRequest.Create(_baseUrl+"Users/Login") as HttpWebRequest;
        http.AllowAutoRedirect = false;
        http.Method = "POST";
        http.ContentType = "application/x-www-form-urlencoded";
        http.CookieContainer = new CookieContainer();
        var postData = "UserName=" + user + "&Password=" + pass + "&RememberMe=true&RememberMe=false&ReturnUrl=www.google.com";
        byte[] dataBytes = System.Text.Encoding.UTF8.GetBytes(postData);
        http.ContentLength = dataBytes.Length;
        using (var postStream = http.GetRequestStream())
        {
            postStream.Write(dataBytes, 0, dataBytes.Length);
        }
        var httpResponse = http.GetResponse() as HttpWebResponse;
        return httpResponse.Cookies[FormsAuthentication.FormsCookieName];
    } 
```

# c# - 选择是否附加文本时，TextBox ScrollToEnd 出现故障

> ID：13037080
> 
> 赞同：0
> 
> 时间：2012-10-23T18:43:44.670
> 
> 标签：c#, .net-4.0, wpf-controls

我正在制作一个文本框以在添加文本时自动滚动到末尾。但是，当鼠标悬停在文本框上时，我希望选择不滚动文本框。我已经完成了所有这些，但是当用户选择文本并且文本框接收到更新文本的事件时，一切都变得混乱了。

这是我正在使用的：

* * *

```
<TextBox Text="{Binding ConsoleContents, Mode=OneWay}" TextWrapping="Wrap" 
    IsReadOnly="True" ScrollViewer.VerticalScrollBarVisibility="Visible" 
    TextChanged="TextBox_TextChanged" MouseEnter="TextBox_MouseEnterLeave"
    MouseLeave="TextBox_MouseEnterLeave" AllowDrop="False" Focusable="True" 
    IsUndoEnabled="False"></TextBox> 
```

* * *

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox textBox = sender as TextBox;
        if (textBox == null) return;

        // ensure we can scroll
        if (_canScroll)
        {
            textBox.Select(textBox.Text.Length, 0); //This was an attempt to fix the issue
            textBox.ScrollToEnd();
        }
    }

private void TextBox_MouseEnterLeave(object sender, MouseEventArgs e)
    {
        TextBox textBox = sender as TextBox;

        // Don't scroll if the mouse is in the box
        if (e.RoutedEvent.Name == "MouseEnter")
        {
            _canScroll = false;
        }
        else if (e.RoutedEvent.Name == "MouseLeave") 
        {
            _canScroll = true;
        }
    } 
```

为了进一步解释 haywire 的含义，当文本框接收到 propertychanged 事件时，它会设置文本并在鼠标未悬停在其上时向下滚动到末尾。如果鼠标悬停在它上面不会滚动。但是，如果我选择文本并且文本框接收到 propertychanged 事件，则内容会更新，但该框不会向下滚动。这是意料之中的。问题是我的选择然后从光标当前所在的位置转到文本的顶部。如果我从框中删除光标，它会继续正常，但是一旦光标返回，框就会卡在顶部并且无法向下滚动。我认为它可能是光标，所以我尝试将它移到最后，但这没有解决任何问题。

有任何想法吗？！

我一直在扯头发！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:10:12.713

您将需要处理额外的 PropertyChanged 事件。因为文本已更改，所以控件已更新。因为它更新它会重置某些值，例如光标位置和选定的文本等。

您可以尝试暂时保存这些设置`CaretIndex`，例如`SelectionStart`和`SelectionLength`。虽然我没有这方面的经验，所以你必须自己找出你想要保持什么样的价值观。

`_canScroll`当为 TextBox 触发 PropertyChanged 事件时，您也可以应用相同的检查。这使您可以处理文本。但如果鼠标离开文本框，您必须等待新事件才能显示最新文本。

您可能还想研究使用`IsFocused`属性。在我看来，它提供了比 MouseEnter 和 MouseLeave 事件更好的解决方案。但这当然取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:08:55.170

好吧，它花了整个上午，但这里是如何做到的：

```
<TextBox Text="{Binding ConsoleContents, Mode=OneWay}" 
         TextWrapping="Wrap" IsReadOnly="True" ScrollViewer.VerticalScrollBarVisibility="Visible" TextChanged="TextBox_TextChanged" 
         MouseEnter="TextBox_MouseEnterLeave" MouseLeave="TextBox_MouseEnterLeave" SelectionChanged="TextBox_SelectionChanged" AllowDrop="False" Focusable="True" 
         IsUndoEnabled="False"></TextBox> 
```

* * *

```
public partial class ConsoleView : UserControl
{
    private bool _canScroll;

    // saves
    private int _selectionStart;
    private int _selectionLength;
    private string _selectedText;

    public ConsoleView(ConsoleViewModel vm)
    {
        InitializeComponent();
        this.DataContext = vm;

        _canScroll = true;
    }

    private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox textBox = sender as TextBox;
        if (textBox == null) return;

        // ensure we can scroll
        if (_canScroll)
        {
            // set the cursor to the end and scroll down
            textBox.Select(textBox.Text.Length, 0);
            textBox.ScrollToEnd();

            // save these so the box doesn't jump around if the user goes back in
            _selectionLength = textBox.SelectionLength;
            _selectionStart = textBox.SelectionStart;
        }
        else if (!_canScroll)
        {

            // move the cursor to where the mouse is if we're not selecting anything (for if we are selecting something the cursor has already moved to where it needs to be)
            if (string.IsNullOrEmpty(_selectedText))
            //if (textBox.SelectionLength > 0)
            {
                textBox.CaretIndex = textBox.GetCharacterIndexFromPoint(Mouse.GetPosition(textBox), true);
            }
            else
            {
                textBox.Select(_selectionStart, _selectionLength); // restore what was saved
            }

        }
    }

    private void TextBox_MouseEnterLeave(object sender, MouseEventArgs e)
    {
        TextBox textBox = sender as TextBox;
        if (textBox == null) return;

        // Don't scroll if the mouse is in the box
        if (e.RoutedEvent.Name == "MouseEnter")
        {
            _canScroll = false;
        }
        else if (e.RoutedEvent.Name == "MouseLeave")
        {
            _canScroll = true;
        }

    }

    private void TextBox_SelectionChanged(object sender, RoutedEventArgs e)
    {
        TextBox textBox = sender as TextBox;
        if (textBox == null) return;

        // save all of the things
        _selectionLength = textBox.SelectionLength;
        _selectionStart = textBox.SelectionStart;
        _selectedText = textBox.SelectedText; // save the selected text because it gets destroyed on text update before the TexChanged event.

    }

} 
```

# r - R 交互和批处理模式以及 heIp 浏览器

> ID：13037082
> 
> 赞同：3
> 
> 时间：2012-10-23T18:43:52.470
> 
> 标签：r, cran, rapache, rserve

在“批处理模式”下运行 R 时，该`interactive`标志设置为 false，这会阻止任何类型的用户提示，这些提示会在嵌入/批处理设置的上下文中中断进程。看：

```
R -e 'interactive()' 
```

使用时有些保持`Rscript`。[也可以使用交互](http://cran.r-project.org/web/packages/interactivity/index.html)包手动设置该标志。为了测试，我们可以尝试：

```
R -e 'install.packages("anything") 
```

假设尚未设置 CRAN 镜像，`install.packages`则不会显示一些交互式镜像选择器，而是抛出错误并退出。

但是，我注意到`help`or`?`命令仍然有效。例如，下面的命令将显示帮助浏览器，并且在我按 q 之前它不会继续。

```
R -e 'help(lm); 1+2' 
```

但是，将输出发送到文件时，它不会显示交互式提示，而只是将完整的帮助文档转储到输出中：

```
R -e 'help(lm); 1+2' > output.txt 
```

我现在对使用`help`. 为什么即使 R 在批处理模式下运行，您也会获得交互式帮助浏览器？这是 Debian/Ubuntu 前端的功能`R`还是来自 Debian/Ubuntu 前端？由于 R 等待使用输入，在内部调用函数（即 Rserve、RInside、JRI 等）时是否存在`R`变得无响应的风险？`help`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:48:30.840

help 实际上产生了一个新进程，pager，它就像“less”：

```
> help(lm); 1+2
[1]+  Stopped                 R -e 'help(lm); 1+2'
$ ps
  PID TTY          TIME CMD
27735 pts/6    00:00:00 bash
31607 pts/6    00:00:00 R
31615 pts/6    00:00:00 sh
31616 pts/6    00:00:00 pager
31617 pts/6    00:00:00 ps 
```

# android - ActionBarSherlock + Google Maps API，在当前主题中找不到样式“mapViewStyle”

> ID：13037083
> 
> 赞同：0
> 
> 时间：2012-10-23T18:44:01.510
> 
> 标签：android, google-maps, styles, actionbarsherlock

首先，我知道有成千上万的帖子问同样的问题，但是几天后寻找一个有效的答案并尝试一切我仍然遇到同样的问题......

所以让我们暴露我的情况：

我正在使用 ABS + 谷歌地图，所以我的地图视图 xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<com.actionbarsherlock.internal.view.menu.ActionMenuItemView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ViewContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0PGmnrCR70lothfjc_sFGTdFtESQPOksYKQWYpw"    
        android:clickable="true" />

</com.actionbarsherlock.internal.view.menu.ActionMenuItemView> 
```

几天前一切都很好，我可以在应用程序中做我的事情和一切。但是突然间我只是做了一点改动，插入了一个framelayout来在屏幕上显示更多的选项。我试图回去，但不可能......

我真的失恋了，我该怎么办？也许我可以创建一个新项目并粘贴我所有的代码，但不确定它是否会起作用......

有什么建议么？

顺便说一句，我的错误代码是这个

```
Missing styles. Is the correct theme chosen for this layout?
Use the Theme combo box above the layout to choose a different layout, or fix the theme style references.

Failed to find style 'mapViewStyle' in current theme
java.lang.NullPointerException
Exception details are logged in Window > Show View > Error Log 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:08:30.150

我终于解决了问题，屏幕上的错误仍然存​​在，但就像警告一样，当我执行应用程序时也可以正常工作。

我唯一的想法是改变ABS的具体布局并放置一个框架布局。

# java - 跟踪实体的状态变化

> ID：13037087
> 
> 赞同：0
> 
> 时间：2012-10-23T18:44:10.447
> 
> 标签：java, jpa, entity, eclipselink

我需要跟踪使用 MySQL 作为其数据库的 java 实体类的状态变化。我知道 EntityManager 有一种机制来跟踪它所管理的实体的状态变化。我想要的是访问实体状态更改。我希望我的应用程序触发甚至通知另一个应用程序有关实体的新状态。从我目前收集到的信息来看，没有任何 API 可用于检查实体所处的特定生命周期。还是有吗？有没有人有关于如何解决这个问题的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:12:33.520

JPA 定义了**侦听器接口**，您可以实现这些接口以便收到实体**生命周期事件的通知。**

看看这篇文章：[http ://www.objectdb.com/java/jpa/persistence/event](http://www.objectdb.com/java/jpa/persistence/event)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:52:18.827

EclipseLink 提供了一组会话级别的事件 (SessionEventListener)。

我假设您只想在提交更改后通知已提交的更改？为此，您可以使用 postCommitUnitOfWork 事件。事件/uow 包含一个 UnitOfWorkChangeSet，其中包含在事务中所做的更改列表。

# actionscript-3 - “错误#2025 提供的 DisplayObject 必须是调用者的子对象。” 试图删除Child()；

> ID：13037095
> 
> 赞同：0
> 
> 时间：2012-10-23T18:44:27.063
> 
> 标签：actionscript-3, flash, runtime-error, removechild

我正在创建一个简单的 iPhone 游戏（但我所在的课程要求我使用 Flash ......），当我试图从游戏中删除对象时，我遇到了一个重大问题。

该游戏有点像一个动态的浪费时间的泡泡纸游戏，其中有无限的舞台“刷新”。一旦用户弹出所有气泡，就会随机生成更多。（当数组为空时，`setup()`再次调用。）

现在，我通过代码从库中提取了五种不同颜色的气泡图形中的一种，并随机放置在舞台上。但是，我不喜欢重叠，所以我给了每个气泡一个小的方形命中空间，这样当它们随机放置并显着重叠时，它们会自行弹出。出于某种原因，当我试图去除它给我的气泡时

> Error#2025 提供的 DisplayObject 必须是调用者的子对象。

我尝试将 stage 添加到`addChild`and `removeChild`，但我得到了同样的错误。

```
import flash.events.*;
import flash.display.*;

var bubbles:Array = new Array();

var b:BlueBubble = new BlueBubble();
var b2:GreenBubble = new GreenBubble();
var b3:PinkBubble = new PinkBubble();
var b4:PurpleBubble = new PurpleBubble();
var b5:YellowBubble = new YellowBubble();

// values to be tweaked later
var bNum:uint = 1;
var maxSize:uint = 100;
var minSize:uint = 1;
var range:uint = maxSize - minSize;
var tooBig:uint = 100;

function init():void {
setup();
stage.addEventListener(Event.ENTER_FRAME, onEveryFrame);
}

function setup():void {
for (var i:uint=0; i<bNum; i++) {
    // blue
    b.width = Math.ceil(Math.random() * range) + minSize;
    b.height = b.width;
    b.x = Math.random()*(stage.stageWidth - b.width);
    b.y = Math.random()*(stage.stageHeight - b.height);
    bubbles.push(b);
    stage.addChild(b);
    // green
    b2.width = Math.ceil(Math.random() * range) + minSize;
    b2.height = b2.width;
    b2.x = Math.random()*(stage.stageWidth - b2.width);
    b2.y = Math.random()*(stage.stageHeight - b2.height);
    bubbles.push(b2);
    stage.addChild(b2);
    // pink
    b3.width = Math.ceil(Math.random() * range) + minSize;
    b3.height = b3.width;
    b3.x = Math.random()*(stage.stageWidth - b3.width);
    b3.y = Math.random()*(stage.stageHeight - b3.height);
    bubbles.push(b3);
    stage.addChild(b3);
    // purple
    b4.width = Math.ceil(Math.random() * range) + minSize;
    b4.height = b4.width;
    b4.x = Math.random()*(stage.stageWidth - b4.width);
    b4.y = Math.random()*(stage.stageHeight - b4.height);
    bubbles.push(b4);
    stage.addChild(b4);
    // yellow
    b5.width = Math.ceil(Math.random() * range) + minSize;
    b5.height = b5.width;
    b5.x = Math.random()*(stage.stageWidth - b5.width);
    b5.y = Math.random()*(stage.stageHeight - b5.height);
    bubbles.push(b5);
    stage.addChild(b5);

    //add event listeners for bubbles later

}
}
function onEveryFrame(e:Event) {
for (var i:uint=0; i<bubbles.length; i++) {

    bubbles[i].width++;
    bubbles[i].height++;

    if (bubbles[i].height >= tooBig && bubbles[i].width >= tooBig) {
        bubbles[i].height = tooBig;
        bubbles[i].width = tooBig;
    }

    // Blue hit testing
    if (b2.hitGreen.hitTestObject(b.hitBlue)) {
            removeChild(b);
    }
    if (b3.hitPink.hitTestObject(b.hitBlue)) {
            removeChild(b);
    }
    if (b4.hitPurple.hitTestObject(b.hitBlue)) {
            removeChild(b);
    }
    if (b5.hitYellow.hitTestObject(b.hitBlue)) {
            removeChild(b);
    }

    // Other hit testing...

}
}

init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:14:57.940

您正在将`b`, `b2`,`b3`等添加到`stage`, 但将它们从执行此代码的任何对象中删除。尝试改变

```
stage.addChild(b); 
```

至

```
addChild(b); 
```

此外，最好在删除对象之前检查它是否为子对象。尝试改变

```
if (...)
    removeChild(b); 
```

至

```
if (contains(b) && ...)
    removeChild(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:36:34.293

解决此问题的最佳方法是：

```
mc.parent.removeChild(mc); 
```

基本上，需要从您即将被删除的对象所在的任何显示对象调用 removeChild 函数。

# c# - 我应该出于其他原因重用 Microsoft.NET 属性还是应该创建自己的属性？

> ID：13037102
> 
> 赞同：3
> 
> 时间：2012-10-23T18:45:00.417
> 
> 标签：c#, .net, attributes

将 Microsoft.NET 提供的属性用于替代用途是否合适，或者我应该创建自己的属性？

例如，我经常看到人们使用`DescriptionAttribute`for 枚举作为“友好名称”。不过，我的理解是，`DescriptionAttribute`出于这个原因，它是供 IDE 使用的。

另一个例子是使用`DefaultAttribute`to，通过反射，在构造过程中设置属性的所有默认值。

那么，在最佳实践中以通常不打算使用的方式重用属性是否可以接受？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:46:57.733

就个人而言，我不重用属性。我创建自己的自定义。

这可以防止我使用属性，然后在将来有人以我没有预料到的方式使用我的类时出现意外行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:47:04.227

DefaultAttribute 和 DescriptionAttribute 由“propertygrid”控件使用，该控件是 Visual Studio 设计器中使用的控件。也可以在自己的代码中使用这个控件，然后使用这些属性才有意义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:47:34.223

使用 MS 提供的定义，并在它们不符合官方定义时创建您自己的定义。创建自己的代码可能听起来很傻（并不是说创建一个新代码真的很长），但是如果有人来阅读您的代码并且没有阅读标题为“我们对官方属性的替代用途”的 20 页手册，他将所有人都对发生的事情感到困惑。

此外，许多 .NET 类检查这些属性。如果您滥用它们，最终可能会出现非常奇怪的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:53:47.807

微软自己发布的最佳实践在这个主题上没有什么可说的，[DescriptionAttribute MSDN Page](http://msdn.microsoft.com/en-us/library/system.componentmodel.descriptionattribute.aspx)上的代码用法清楚地表明了这个内置属性在某些其他方面的使用。我通常认为为仅与您的项目相关的事物添加额外的含义是非常危险的。这被称为“部落知识”，是与他人合作时产生误解的主要方式之一。

如果您有一个 .NET 框架涵盖的用例，那太棒了——您绝对应该首先使用现有的。但是，如果您不确定，最好简单地创建您自己的。

# c - 其他程序可访问的内存中的编程数据库

> ID：13037104
> 
> 赞同：0
> 
> 时间：2012-10-23T18:45:08.140
> 
> 标签：c, shared-memory, mmap

我目前正在64位Linux平台上用C（程序A）编写网络数据使用监视器。作为数据包嗅探器，没有太多时间将数据写入文件或数据库而不冒丢失数据包的风险。我可以为此目的使用另一个线程，但我认为更清洁的解决方案（如果存在）是从另一个 C 程序或理想情况下是 python cgi 脚本（程序 B）访问存储在内存中的这些数据。这样，数据将按需提供。内存中的数据只能从程序 B 中读取。这可能吗？如果有怎么办？谢谢。

**更新：**

我看到这可以使用 mmap() 将数据存储在内存中，并使用 shmget() 来检索它。我听说有人说 shmget 是旧的。还有哪些其他选择？

要传递的二维数组可以大到 5000x4 int 或 5000x15 char。

[posix_ipc](http://semanchuk.com/philip/posix_ipc/)听起来很有希望作为一种从 python（程序 B）访问共享内存的方式。有谁知道这是否适用于在 C（程序 A）中创建的共享内存？

我下载[了 posix_ipc](http://semanchuk.com/philip/posix_ipc/)，它有一些非常酷的演示。第一个演示了使用共享内存相互通信的两个进程。这两个进程可以是 C 和 python 的任意组合，并且提供了这四个进程中的每一个的源代码。它看起来是处理我正在尝试做的最有效的方法，但我还没有时间玩它。我会在我这样做时报告。

che 下面的建议听起来也行得通，我将把它作为我的 B 计划。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:47:51.277

使用 SQLite，内存模式。这将为您提供数据库提供的所有好处，而不会占用大量空间。

[http://www.sqlite.org/inmemorydb.html](http://www.sqlite.org/inmemorydb.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:07:32.137

[共享内存](http://www.cs.cf.ac.uk/Dave/C/node27.html)听起来像是在两个 C 程序之间执行此操作的最佳方式，尤其是当第二个程序只读取第一个程序写入的统计信息时。

从 Python 获取这个内存可能有点复杂，因为它对于这种语言来说有点低级。最简单的方法可能是让一个 C 程序访问共享内存并以纯文本形式打印信息，然后从 CGI 脚本中调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:45:36.523

关于 posix_ipc：是的，共享内存区域“只是内存”，它们与您访问它们的语言完全无关。

但是，您安排使用该内存的方式可能仅限于“最小公分母”。包含固定长度数据字段的固定长度结构数组将简单易行，文本内容的某些排列也是如此；诸如“具有可变字段和垃圾收集的对象”之类的东西很难在两种语言之间绑定。

作为记录，`mmap`这是访问共享/可共享内存的一种方式；命令`shmget`系列（`shmget`and `shmat`，`shmctl`等等）是另一个。将两者混合起来会很困难，而且不是特别有利。（请注意，该名称`shmget`指的`get`是共享内存区域，并不一定意味着对该内存的只读访问。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:50:47.360

如果您需要简单的键/值内存存储，请尝试使用 memcached [http://memcached.org/](http://memcached.org/)

学习在 Web 应用程序开发中高度使用的技术还有额外的好处

# java - libGDX 不会在安卓上运行

> ID：13037107
> 
> 赞同：1
> 
> 时间：2012-10-23T18:45:17.033
> 
> 标签：java, android, libgdx

我已经按照本教程完成了所有工作：http: [//steigert.blogspot.cz/2012/02/1-libgdx-tutorial-introduction.html](http://steigert.blogspot.cz/2012/02/1-libgdx-tutorial-introduction.html)。一切编译正常，但启动后 android 应用程序崩溃。这是日志猫输出：

```
10-23 18:33:34.128: E/dalvikvm(386): Could not find class 'cz.pohy.tyrian.Tyrian', referenced from method cz.pohy.tyrian_android_tut.MainActivity.onCreate
10-23 18:33:34.128: W/dalvikvm(386): VFY: unable to resolve new-instance 1100 (Lcz/pohy/tyrian/Tyrian;) in Lcz/pohy/tyrian_android_tut/MainActivity;
10-23 18:33:34.128: D/dalvikvm(386): VFY: replacing opcode 0x22 at 0x0004
10-23 18:33:34.168: D/dalvikvm(386): VFY: dead code 0x0006-000c in Lcz/pohy/tyrian_android_tut/MainActivity;.onCreate (Landroid/os/Bundle;)V
10-23 18:33:34.188: D/dalvikvm(386): Trying to load lib /data/data/cz.pohy.tyrian_android_tut/lib/libgdx.so 0x40514fa8
10-23 18:33:34.208: D/dalvikvm(386): Added shared lib /data/data/cz.pohy.tyrian_android_tut/lib/libgdx.so 0x40514fa8
10-23 18:33:34.208: D/dalvikvm(386): No JNI_OnLoad found in /data/data/cz.pohy.tyrian_android_tut/lib/libgdx.so 0x40514fa8, skipping init
10-23 18:33:34.248: D/AndroidRuntime(386): Shutting down VM
10-23 18:33:34.248: W/dalvikvm(386): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-23 18:33:34.268: E/AndroidRuntime(386): FATAL EXCEPTION: main
10-23 18:33:34.268: E/AndroidRuntime(386): java.lang.NoClassDefFoundError: cz.pohy.tyrian.Tyrian
10-23 18:33:34.268: E/AndroidRuntime(386):  at cz.pohy.tyrian_android_tut.MainActivity.onCreate(MainActivity.java:16)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.os.Looper.loop(Looper.java:123)
10-23 18:33:34.268: E/AndroidRuntime(386):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-23 18:33:34.268: E/AndroidRuntime(386):  at java.lang.reflect.Method.invokeNative(Native Method)
10-23 18:33:34.268: E/AndroidRuntime(386):  at java.lang.reflect.Method.invoke(Method.java:507)
10-23 18:33:34.268: E/AndroidRuntime(386):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-23 18:33:34.268: E/AndroidRuntime(386):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-23 18:33:34.268: E/AndroidRuntime(386):  at dalvik.system.NativeStart.main(Native Method)
10-23 18:33:40.878: I/Process(386): Sending signal. PID: 386 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T18:59:58.850

在同一教程的第 10 步中，他提到了 ADT 插件版本 17 的 ClassNotFoundException 错误。有解决问题的说明：

[http://steigert.blogspot.com.br/2012/04/10-libgdx-tutorial-accelerator-and.html](http://steigert.blogspot.com.br/2012/04/10-libgdx-tutorial-accelerator-and.html)

# r - 用累积频率有效地替换数据帧

> ID：13037111
> 
> 赞同：5
> 
> 时间：2012-10-23T18:46:05.407
> 
> 标签：r, hash, dataframe, vectorization, cumulative-frequency

我正在尝试编写一个程序，该程序采用大型数据框并用这些值的累积频率（按升序排序）替换每一列值。例如，如果值的列是：5、8、3、5、4、3、8、5、5、1。那么相对频率和累积频率是：

*   1: rel_freq=0.1, cum_freq = 0.1
*   3: rel_freq=0.2, cum_freq = 0.3
*   4: rel_freq=0.1, cum_freq = 0.4
*   5: rel_freq=0.4, cum_freq = 0.8
*   8: rel_freq=0.2, cum_freq = 1.0

那么原来的列变成：0.8, 1.0, 0.3, 0.8, 0.4, 0.3, 1.0, 0.8, 0.8, 0.1

以下代码正确执行此操作，但可能由于嵌套循环，它的伸缩性很差。知道如何更有效地执行此任务吗？

```
mydata = read.table(.....)

totalcols = ncol(mydata)
totalrows = nrow(mydata)

for (i in 1:totalcols) {
    freqtable = data.frame(table(mydata[,i])/totalrows)  # create freq table
    freqtable$CumSum = cumsum(freqtable$Freq)   # calc cumulative freq

    hashtable = new.env(hash=TRUE)
    nrows = nrow(freqtable)

    # store cum freq in hash
    for (x in 1:nrows) {
        dummy = toString(freqtable$Var1[x])
        hashtable[[dummy]] = freqtable$CumSum[x]
    }

    # replace original data with cum freq
    for (j in 1:totalrows) {
        dummy = toString(mydata[j,i])
        mydata[j,i] = hashtable[[dummy]]
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:02:07.907

`for`这处理没有-loop的单列：

```
R> x <- c(5, 8, 3, 5, 4, 3, 8, 5, 5, 1)
R> y <- cumsum(table(x)/length(x))
R> y[as.character(x)]
  5   8   3   5   4   3   8   5   5   1 
0.8 1.0 0.3 0.8 0.4 0.3 1.0 0.8 0.8 0.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:03:04.970

这是一种方法。使用具有两个变量的数据框，每个变量都包含您的示例数据

```
d <- data.frame(var1 = c(5, 8, 3, 5, 4, 3, 8, 5, 5, 1),
                var2 = c(5, 8, 3, 5, 4, 3, 8, 5, 5, 1)) 
```

使用一个简单的函数

1.  生成由`cumsum()`给出的相对比例的`table(x) / length(x)`，然后
2.  `match()`具有累积和表名称的变量中的观察值，然后
3.  使用 id 匹配从累积总和表中进行选择（并取消命名）

这样的功能是：

```
f <- function(x) {
    tab <- cumsum(table(x) / length(x))
    ind <- match(x, as.numeric(names(tab)))
    unname(tab[ind])
} 
```

在实践中，我们使用`lapply()`并强制到一个数据框：

```
out <- data.frame(lapply(d, f))
out 
```

这使：

```
R> out
   var1 var2
1   0.8  0.8
2   1.0  1.0
3   0.3  0.3
4   0.8  0.8
5   0.4  0.4
6   0.3  0.3
7   1.0  1.0
8   0.8  0.8
9   0.8  0.8
10  0.1  0.1 
```

# java - 尝试提交片段事务时出现 IllegalStateException？

> ID：13037116
> 
> 赞同：1
> 
> 时间：2012-10-23T18:46:19.183
> 
> 标签：java, android, android-fragments

尝试提交片段事务时出现 IllegalStateException。错误是“onSaveInstanceState 后无法执行此操作”。现在我知道我应该等到活动调用 onResumeFragments 后再执行这些事务。崩溃发生在活动被后台处理后，然后当我单击按钮更改片段时恢复。我可以等待 10 秒，它仍然会崩溃。当在主屏幕按下后活动恢复时，旧片段将重新加载并按预期工作。当用户单击将运行以下代码的按钮时会发生崩溃。崩溃发生在 commit() 调用中。知道是什么原因造成的吗？

更改片段的代码：

```
private void changeFragment(MyRoboFragment frag, boolean allowStateLoss) {
    String fragName = frag.getClass().getName();

    if (fragName.equals(currentFragmentName)) return;

    currentFragmentName = fragName;

    FragmentTransaction transaction = fragMan.beginTransaction();
    transaction.replace(R.id.base_fragment, frag);

    if (frag.pushToBackStack) {
        transaction.addToBackStack(null);
    }

    if (allowStateLoss == true) {
        transaction.commitAllowingStateLoss();
    } else {
        transaction.commit();
    }
} 
```

# python - 在 Pika 或 RabbitMQ 中，如何检查当前是否有任何消费者正在消费？

> ID：13037121
> 
> 赞同：11
> 
> 时间：2012-10-23T18:46:31.677
> 
> 标签：python, rabbitmq, pika

我想检查*消费者/工人*是否存在消费我即将发送的*消息。*

如果没有任何*Worker*，我会启动一些工人（消费者和发布者都在一台机器上），然后开始发布*Messages*。

如果有类似的功能`connection.check_if_has_consumers`，我会像这样实现它 -

```
import pika
import workers

# code for publishing to worker queue
connection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))
channel = connection.channel()

# if there are no consumers running (would be nice to have such a function)
if not connection.check_if_has_consumers(queue="worker_queue", exchange=""):
    # start the workers in other processes, using python's `multiprocessing`
    workers.start_workers()

# now, publish with no fear of your queues getting filled up
channel.queue_declare(queue="worker_queue", auto_delete=False, durable=True)
channel.basic_publish(exchange="", routing_key="worker_queue", body="rockin",
                            properties=pika.BasicProperties(delivery_mode=2))
connection.close() 
```

`check_if_has_consumers`但是我在*pika*中找不到任何具有功能的功能。

有没有办法使用*pika*来完成这个？或者，直接与***兔子****交谈*？

 *我不完全确定，但我真的认为*RabbitMQ*会知道订阅不同队列的消费者数量，因为它确实向他们发送*消息*并接受*确认*

我 3 小时前刚开始使用*RabbitMQ* ......欢迎任何帮助......

这是我写的**workers.py**代码，如果有帮助的话....

```
import multiprocessing
import pika

def start_workers(num=3):
    """start workers as non-daemon processes"""
    for i in xrange(num):    
        process = WorkerProcess()
        process.start()

class WorkerProcess(multiprocessing.Process):
    """
    worker process that waits infinitly for task msgs and calls
    the `callback` whenever it gets a msg
    """
    def __init__(self):
        multiprocessing.Process.__init__(self)
        self.stop_working = multiprocessing.Event()

    def run(self):
        """
        worker method, open a channel through a pika connection and
        start consuming
        """
        connection = pika.BlockingConnection(
                              pika.ConnectionParameters(host='localhost')
                     )
        channel = connection.channel()
        channel.queue_declare(queue='worker_queue', auto_delete=False,
                                                    durable=True)

        # don't give work to one worker guy until he's finished
        channel.basic_qos(prefetch_count=1)
        channel.basic_consume(callback, queue='worker_queue')

        # do what `channel.start_consuming()` does but with stopping signal
        while len(channel._consumers) and not self.stop_working.is_set():
            channel.transport.connection.process_data_events()

        channel.stop_consuming()
        connection.close()
        return 0

    def signal_exit(self):
        """exit when finished with current loop"""
        self.stop_working.set()

    def exit(self):
        """exit worker, blocks until worker is finished and dead"""
        self.signal_exit()
        while self.is_alive(): # checking `is_alive()` on zombies kills them
            time.sleep(1)

    def kill(self):
        """kill now! should not use this, might create problems"""
        self.terminate()
        self.join()

def callback(channel, method, properties, body):
    """pika basic consume callback"""
    print 'GOT:', body
    # do some heavy lifting here
    result = save_to_database(body)
    print 'DONE:', result
    channel.basic_ack(delivery_tag=method.delivery_tag) 
```

**编辑：**

我必须继续前进，所以这是我要采取的解决方法，除非出现更好的方法，

所以，*RabbitMQ*有这些[HTTP 管理 api](http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v2_8_7/priv/www/api/index.html)，它们在你打开[管理插件](http://www.rabbitmq.com/management.html)后工作，并且在 HTTP api 页面中间有

> /api/connections - 所有打开的连接的列表。
> 
> /api/connections/name - 单个连接。删除它将关闭连接。

所以，如果我通过不同的连接名称/用户连接我的*工人*和*我**的*产品，我将能够检查*工人连接*是否打开......（工人死亡时可能会出现问题......）

 ***将等待更好的解决方案...

**编辑：**

刚刚在 rabbitmq 文档中找到了这个，但这在 python 中会很麻烦：

```
shobhit@oracle:~$ sudo rabbitmqctl -p vhostname list_queues name consumers
Listing queues ...
worker_queue    0
...done. 
```

所以我可以做类似的事情，

```
subprocess.call("echo password|sudo -S rabbitmqctl -p vhostname list_queues name consumers | grep 'worker_queue'") 
```

hacky ......仍然希望 pika 有一些 python 函数来做到这一点......

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T20:33:40.800

我也只是在调查这个。在阅读了源代码和文档后，我在 channel.py 中发现了以下内容：

```
@property
def consumer_tags(self):
    """Property method that returns a list of currently active consumers

    :rtype: list

    """
    return self._consumers.keys() 
```

我自己的测试是成功的。我在我的频道对象是 self._channel 的地方使用了以下内容：

```
if len(self._channel.consumer_tags) == 0:
        LOGGER.info("Nobody is listening.  I'll come back in a couple of minutes.")
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:59:26.200

实际上，我在寻找其他问题时偶然发现了这一点，但可能对您有所帮助的是 Basic_Publish 函数，其中有一个默认为 False 的参数“Immediate”。

您可以做的一个想法是将立即标志设置为 True，这将要求消费者立即使用它，而不是坐在队列中。如果一个工作人员无法使用该消息，它将返回一个错误，告诉您启动另一个工作人员。

根据系统的吞吐量，这将产生大量额外的工人，或者产生工人来代替死去的工人。对于前一个问题，您可以编写一个类似管理员的系统，通过控制队列简单地跟踪工作人员，您可以在其中告诉类似“Runner”的进程来杀死现在不再需要的工作人员的进程。****

# javascript - javascript 无效函数

> ID：13037126
> 
> 赞同：7
> 
> 时间：2012-10-23T18:47:00.463
> 
> 标签：javascript

> **可能重复：**
> [“javascript:void(0)”是什么意思？](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean)

我想问几个关于`javascript:void(0)`

```
<input type='submit' name='btn' value='submit' onClick='javascript:void(0)' /> 
```

你能解释一下`void(0)`- 它是一个内置功能吗？关键字是否`javascript`表示代码是用javascript编写的？如果您对此有任何奇怪的了解，请与我分享。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T18:50:47.310

**[无效（）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)：**

> 此运算符**允许将**产生副作用的表达式插入需要计算结果为 undefined 的表达式的位置。
> 
> void 运算符通常**仅用于获取未定义的原始值**，通常使用“void(0)”（相当于“void 0”）。在这些情况下，可以使用全局变量 undefined 代替（假设它没有被分配给非默认值）。 **但是请注意，不鼓励使用 javascript: 伪协议而不是其他替代方案，例如不显眼的事件处理程序。**

您可以在此类似线程上阅读更多内容：[“javascript:void(0)”是什么意思？](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean?lq=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T18:50:11.307

void 是用于返回未定义值的运算符，因此浏览器将无法加载新页面。关于 void 运算符需要注意的重要一点是它需要一个值并且不能单独使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T19:06:04.453

`javascript:void(0)` can be considered as "Do nothing". Not sure what was intended to be achieved with it here. If you wanted to prevent form submission on button click, you should have used something like

```
<input type='submit' value='submit' onClick='return false;' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:49:52.447

它定义了一个没有主体的事件处理函数，因此没有任何内容被执行。您最常看到它在`href`属性的上下文中使用。

# java - Struts2 内化

> ID：13037131
> 
> 赞同：0
> 
> 时间：2012-10-23T18:47:18.420
> 
> 标签：java, internationalization, struts2

我正在尝试使用以下代码将我的应用程序内部化：

对于jsp，我有这个：

```
 <table>
    <tr class="trlleno">
      <td>
        <div id="Panel_cliente">
          <s:select label="Selecciona un idioma" name="IdiomaID" id="IdiomaID" 
          headerValue="--Selecciona un idioma--" headerKey="-1" 
          list="#{'1':'Español','2':'English','3':'Deutch','4':'Português','5':'русский','6':'Français'}" value="2"/> 
        </div> 
      </td>
    </tr>

    <td class="trboton" colspan="2" align="center">
      <input type="submit" name="submit" id="submit" value="CAMBIAR IDIOMA" class="divboton"/>
    </td>
  </tr>
</table> 
</form> 
```

在行动中，我有这个：

```
public class CambiarIdiomaAction extends ActionSupport implements ServletRequestAware{

private HttpServletRequest servletRequest;
Map session;

@Override
public String execute() throws Exception {
    session = ActionContext.getContext().getSession();

    int idm=Integer.valueOf(servletRequest.getParameter("IdiomaID"));
     System.out.println(idm);
     //Trying with English
     Locale locale=new Locale("en","EN");
    return "SUCCESS";
}

@Override
public void setServletRequest(HttpServletRequest request) {
    this.servletRequest = request;
}

public HttpServletRequest getServletRequest() {
    return servletRequest;
}
} 
```

当我看到语言是否有变化时，我什么也看不见，没有变化。为什么？。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:53:02.957

如果要更改语言环境，则必须在会话中设置语言环境。

如果将此代码放在一个动作中：

```
ActionContext context = ActionContext.getContext();
context.setLocale(Locale.ENGLISH); 
```

您将应用程序的语言环境更改为英语。

在您的代码中，您什么也没做，您只是设置了一个变量`locale`，而您什么也不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:56:03.423

如果您真的想在操作中更改语言环境，请使用

```
ActionContext.getContext().setLocale(locale) 
```

并将其放入 HTTP 会话中

```
session.put(I18nInterceptor.DEFAULT_SESSION_ATTRIBUTE, locale) 
```

但是 Struts2 具有开箱即用的本地化支持。我建议您阅读 Struts2 [http://struts.apache.org/2.x/docs/localization.html](http://struts.apache.org/2.x/docs/localization.html)中的本地化。

# c# - 在构造函数中验证信息

> ID：13037132
> 
> 赞同：0
> 
> 时间：2012-10-23T18:47:26.157
> 
> 标签：c#, asp.net, visual-studio-2010

这是多么糟糕的实践？我的教授目前要求我这样做，这与我被告知的一切背道而驰。谁能给我举个例子，为什么你不应该以这种方式验证？（在asp网页的get/set方法中使用正则表达式）

更多信息：

这是他希望我们做的代码： 在属性中：

```
public String FName
{
    get
    {
        return _fName;
    }
    set
    {
        if (validateName(value.ToString()))
            _fName = value;
    }
} 
```

我调用的方法：

```
public static bool validateName(String name)
    {
        bool isGood = true;

        Regex regex = new Regex("^[A-Z]");
        if (!regex.IsMatch(name))
            isGood = false;

        return isGood;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:12:10.060

In reply to your update, I'd find that really annoying, for example:

```
var a = new yourObject();
a.FirstName = 123; 
```

What my code doesn't know is that I've failed validation so I haven't changed the first name property at all!

Edit:

Your can also simplify your validation method:

```
public static bool validateName(String name)
{
    Regex regex = new Regex("^[A-Z]");
    return regex.IsMatch(name)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:55:43.300

一般来说，它并不好，正如*验证*一样，也假定*失败*。

所以问题是：

*   您打算如何处理`constructor`代码执行期间的故障。?

*   如果你得到一个例外`constructor`怎么办？之后对象的状态是什么？

这就是为什么一般来说这是一个不好的做法。遵循的好方法是：

1.  构造对象
2.  运行验证

但这些是*指南*，您可以根据自己的方便自由地制动它们。所以为了捍卫你的教授，应该说，他问这个：

1.  或者带给你一些想法
2.  或者教你一些东西

因此，请按照他的方式尝试理解他为什么要求以这种方式编写代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T00:08:56.743

I agree with your instructor.

In general, you should validate a value in any place it is possible to set it prior to "accepting" it. The general rule is that whatever method that attempts to set the value should receive immediate feedback when it attempts to set it.

For your example, I would place the validator inside of the setter of your FName public property, and if your constructor also accepts a FName value, then simply call the FName setter within your constructor to fully encapsulate the behavior of the property, be it validation behavior or any other business rules that the property implements:

```
public class User
{
    public User(string firstName, string lastName)
    {
        FirstName = firstName;
        LastName = lastName;
    }

    private string _firstName;
    public string FirstName
    {
        get { return _firstName; }
        set
        {
            if (!IsValid(value))
                // throw / handle appropriately
            else
                _firstName = value;
        }
    }
} 
```

Also: stay away from abbreviations! Do not use FName; use FirstName.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:04:52.950

这取决于验证的含义，保护子句在构造函数中是很常见的做法，例如

```
if(param1 == null) 
     throw new ArgumentNullException("param1"); 
```

它有助于确保您的对象处于一致的状态以供以后使用（防止您在使用时进行检查）。

您还可以在属性（您的情况似乎是什么）和方法上使用保护子句，以确保您的对象始终处于一致状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T18:59:37.453

构造函数的目的是将值分配给类型的成员。按照惯例，验证不是构造函数的责任。
任何信息的验证都取决于您正在构建的应用程序的业务。如果您正在创建一个模块化应用程序，其中每个组件都用于特定目的，那么最好创建一个单独的类或一组类（取决于应用程序的大小）来执行所有业务验证。必须根据对数据施加的验证规则来调用此类验证。

# jmeter - 如何在 JMeter 中跨多个线程组运行一条记录？

> ID：13037133
> 
> 赞同：3
> 
> 时间：2012-10-23T18:47:26.927
> 
> 标签：jmeter, jmeter-plugins

我的 CSV 文件中有 50 条记录（行），并且有 10 个线程组，它们都相互依赖。

示例（我正在调用线程组 TH）：

```
TH1
|_some request
  |_fetching output value

TH2
|_request(passing TH1 output value here)
  |_fetching output 
```

我想从 CSV 运行第一条记录并从 TH1 连续运行到 TH10，然后从 CSV 中选择第二条记录并连续运行 TH1 到 TH10。

现在我的脚本正在从 CSV 中挑选任何记录，并以线程和请求的有序方式运行。

我还想将每个线程的所有输出值存储在某个地方（csv、txt、任何变量）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:57:28.120

最简单的方法是通过 JMeter 插件的[线程间通信](http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication)。

```
线程组 1 
  CSV 数据集配置
  请求
    // 在 PostProcessor 中获取 outputValue1
    线程间通信后处理器（FIFO Queue=FIRST，Value to put=${outputValue1}）
    // 将 outputValue1 存储在某处
线程组2
  请求
    线程间通信预处理器（FIFO队列=FIRST，变量名=${inputValue2}）
    // 在 PostProcessor 中获取 outputValue2
    线程间通信 PostProcessor (FIFO Queue=SECOND, Value to put=${outputValue2})
    // 将 outputValue2 存储在某处
...
线程组10
  请求
    线程间通信预处理器（FIFO队列=NINE，变量名=${inputValue10}）
    // 将 outputValue10 存储在某处

```

注意 ${inputValueN} 等于 ${outputValueN-1}。

还有[一些其他方法](https://stackoverflow.com/questions/707832/how-do-i-pass-a-variable-from-one-thread-group-to-another-in-jmeter)可以在线程之间传递变量。但我认为这个是最简单的。

# java - 垂直滚动条返回的值与 Java 小程序中的值相反

> ID：13037136
> 
> 赞同：1
> 
> 时间：2012-10-23T18:47:38.950
> 
> 标签：java, scrollbar, awt

我在早期阶段有一个带有 2 个垂直滚动条的 Java 小程序。当一个被改变时，另一个也随之改变，并且它们旁边的标签被更新为滚动条的值。这行得通，但是返回的值从它们应该是翻转的。在滚动条的初始化中，最大值和最小值是正确的值，并正确放置在语句中。当条形图向上拖动到最大值时，最小值将显示在标签中，反之亦然。我不知道我是否初始化了错误，或者计算要显示的值背后的数学是否错误。

请注意，所有使用的数字都是有代表性的，或者是华氏度、开尔文度或兰金度。

```
import java.awt.*;
import java.applet.*;
import java.awt.event.*;
import java.text.DecimalFormat;

public class Exam2 extends Applet implements AdjustmentListener
{
    //variables from the HTML file
    String unit = "K";
    double temp = 0;
    Dimension APPSIZE = this.getSize();

    //variables for temperature
    double curK, curR;
    double fmin = -50.0, fmax = 250.0;
    double minK = (fmin + 459.67) * (5.0/9.0);
    double maxK = (fmax + 459.67) * (5.0/9.0);
    double minR = fmin + 459.67;
    double maxR = fmax + 459.67;
    DecimalFormat df = new DecimalFormat("#0.00");

    //graphics objects
    Scrollbar Kbar = new Scrollbar(Scrollbar.VERTICAL, (int)minK, 10, (int)fmin, (int)fmax);
    Scrollbar Rbar = new Scrollbar(Scrollbar.VERTICAL, (int)minR, 10, (int)fmin, (int)fmax);

    Graphics ColorBar;
    Label KelvinText = new Label("Kelvin");
    Label RankinText = new Label("Rankine");
    Label curK_text = new Label();
    Label curR_text = new Label();
    Label maxK_text = new Label(String.valueOf(df.format(maxK)));
    Label maxR_text = new Label(String.valueOf(df.format(maxR)));
    Label minK_text = new Label(String.valueOf(df.format(minK)));
    Label minR_text = new Label(String.valueOf(df.format(minR)));

    //runtime variables
    boolean running = true;

    public void init()
    {
        Dimension appsize = (APPSIZE);
        double colweight[] = {1,1,1,1,1};//3
        double rowweight[] = {1,1,1,1,1,1,1,1,1,1};//8
        int colwidth[] = {1,1,1,1,1};//3
        int rowheight[] = {1,1,1,1,1,1,1,1,1,1};//8
        GridBagConstraints c = new GridBagConstraints();
        GridBagLayout gbl = new GridBagLayout();
        gbl.rowHeights = rowheight;
        gbl.rowWeights = rowweight;
        gbl.columnWeights = colweight;
        gbl.columnWidths = colwidth;
        c.anchor = GridBagConstraints.CENTER;
        setBounds(0,0,480,640);
        setLayout(new GridLayout(1,5));
        Panel k = new Panel(gbl);
        Panel r = new Panel(gbl);
        Panel drawingpanel = new Panel();

        //add objects
        //Kelvin label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 1;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.KelvinText,c);

        //maxK_text
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 2;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.maxK_text,c);

        //Kbar
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 5;
        c.gridx = 2;
        c.gridy = 3;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.Kbar,c);

        //minK_text
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 8;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.minK_text,c);

        //Rankin label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 1;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.RankinText,c);

        //maxR_text
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 2;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.maxR_text,c);

        //Rbar
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 1;
        c.gridheight = 5;
        c.gridx = 2;
        c.gridy = 3;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.Rbar,c);

        //minR_text
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 8;
        c.fill= GridBagConstraints.VERTICAL;
        gbl.setConstraints(this.minR_text,c);

        //curK_text
        curK_text.setAlignment(Label.RIGHT);
        curK_text.setVisible(true);
        curK_text.setText("0");

        //curR_text
        curR_text.setAlignment(Label.LEFT);
        curR_text.setVisible(true);
        curR_text.setText("0");

        //curR_text
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.gridx = 9;
        c.gridy = 5;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.curR_text,c);

        //add items
        k.add(this.KelvinText);
        k.add(this.maxK_text);
        k.add(this.Kbar);
        k.add(this.minK_text);
        r.add(this.RankinText);
        r.add(this.maxR_text);
        r.add(this.Rbar);
        r.add(this.minR_text);

        //add listeneers
        Kbar.addAdjustmentListener(this);
        Rbar.addAdjustmentListener(this);

        //draw bar
        ColorBar = drawingpanel.getGraphics();

        //add to screen
        add(curK_text);
        add(k);
        add(drawingpanel);
        add(r);
        add(curR_text);
    }

    public void run()
    {       
        //get the unit
        try{unit = getParameter("UNIT", "K");}
        catch(Exception e){e.printStackTrace();}
        //get the temperature 
        try{temp = getParameter("TEMP", 0);}
        catch(Exception e){e.printStackTrace();}

        //make sure temp is initialized
        if (temp == 0)
        {
            if (unit.equalsIgnoreCase("k"))
            {
                temp = minK;
            }
            else
            {
                temp = minR;
            }
        }

        //initial conversion to initialize scrollbars
        if (unit.equalsIgnoreCase("K"))
        {
            curK = temp;
            curR = curK * (9/5);
        }
        else if(unit.equalsIgnoreCase("R"))
        {
            curR = temp;
            curK = curR * (5/9);
        }
        else
        {
            stop();
            System.err.println("An invalid unit was given for UNIT. The applet is now terminated.");
        }

        //set text labels
        curK_text.setText(String.format(df.format(curK)));
        curR_text.setText(String.format(df.format(curR)));

        //set initial values of scrollbars

        Kbar.setValue((int)curK);
        Rbar.setValue((int)curR);
        while (running)
        {

        }
    }   

    public void adjustmentValueChanged(AdjustmentEvent e)
    {
        Object s = e.getSource();
        int newvalue;
        if (s == Rbar)
        {
            newvalue = Rbar.getValue();
            Kbar.setValue(newvalue);
            Rbar.setValue(newvalue);

            curK = (newvalue + 459.67)*(5.0/9.0);
            curR = newvalue + 459.67;   
            curK_text.setText(String.valueOf(curK));
            curR_text.setText(String.valueOf(curR));    
        }
        if (s == Kbar)
        {
            newvalue = Kbar.getValue(); 
            Kbar.setValue(newvalue);
            Rbar.setValue(newvalue);

            curK = (newvalue + 459.67)*(5.0/9.0);
            curR = newvalue + 459.67;   
            curK_text.setText(String.valueOf(df.format(curK)));
            curR_text.setText(String.valueOf(df.format(curR)));
        }
    }   

    public void stop()
    {
        Kbar.removeAdjustmentListener(this);
        Rbar.removeAdjustmentListener(this);
    }   

    //overridden getParamater methods
    private String getParameter(String key, String def)
    {
        String t;
        return (t = getParameter(key))!=null ? t : def;
    }   

    private int getParameter(String key, int def)
    {
        Integer t;
        return (t = Integer.valueOf(getParameter(key)))!= null ? t.intValue() : def;
    }                       
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:00:11.873

主要问题似乎是最小值是顶部，最大值是垂直滚动条的底部。解决此问题的快速方法是简单地更改标签以反映差异

```
curK_text.setText(String.valueOf(minK + maxK- curK));
curR_text.setText(String.valueOf(minR + maxR - curR)); 
```

这仅修复了显示的文本问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:02:39.027

在您的adjustmentValueChanged() 方法中，您需要将输入值“反转”到计算中以说明您的最大值和最小值。

所以，在这一行之后：

```
Rbar.setValue(newvalue); 
```

在“（s == Rbar）”块中，您需要：

```
newvalue = Rbar.getMaximum() + Rbar.getMinimum() - Rbar.getValue(); 
```

在“（s == Kbar）”块中，您需要：

```
newvalue = Kbar.getMaximum() + Kbar.getMinimum() - Kbar.getValue(); 
```

# iphone - 当蜂窝数据和 wi-fi 都关闭时，是否可以获取用户位置？

> ID：13037138
> 
> 赞同：8
> 
> 时间：2012-10-23T18:47:49.103
> 
> 标签：iphone, ios, gps, mkmapview, core-location

我最近在苏格兰带着一部加拿大电话，为了避免漫游费，我在旅途中关闭了我的蜂窝数据。但是，我拍摄的照片仍然有准确的地理标签，这意味着我的相机应用程序仍然可以使用我的位置（即使我在回到家之前实际上无法在地图上看到这些位置）。

我的问题是：在这种情况下，我将如何检索位置数据，因为没有互联网连接，我实际上无法显示地图？而且，只是为了提高我的理解，实际上是如何检索位置的？如果“蜂窝数据”关闭，GPS 是否仍然可用，还是只能使用附近的 Wi-Fi 热点计算位置？最后，如果设备上的蜂窝数据和 wi-fi 均已关闭，是否仍可检索位置（即 GPS 是否仍处于活动状态）？

欢迎提供有关该主题的任何信息 - 我要做的就是处理由存在或缺乏位置服务以及我（如果可能）显示和存储用户位置的应用程序中的互联网连接所造成的所有可能情况。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T18:53:07.510

即使没有 WiFi 或蜂窝网络，具有实际 GPS 硬件的 iOS 设备也可以提供准确的位置数据。

当然，大多数地图应用程序都需要 Internet 连接才能显示地图。但是，如果您有一个带有本地地图数据的地图应用程序，那么即使没有任何互联网连接，您也可以查看带有您所在位置的地图。

在具有实际 GPS 的设备上，定位服务在没有互联网的情况下也能正常工作。将您的位置归零可能需要更长的时间，但它仍然可以正常工作。当然，在没有真正 GPS 的 iOS 设备上，您确实需要蜂窝或 WiFi 信号来获取任何位置数据。

# php - 尝试使用 PHP 将对象的实例读入数据库

> ID：13037143
> 
> 赞同：1
> 
> 时间：2012-10-23T18:47:55.157
> 
> 标签：php, sql, database, forms, dao

嗨，我正在尝试读取我的对象 person 的实例，使用表单获取其个人详细信息，然后将其放入数据库中。我想我的代码设置了这个人，并连接到数据库好，我只是在处理表单信息并将其读入数据库时​​无法正确处理。任何帮助将不胜感激！

我的表格

```
 <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
       <form action="process.php" method="post">
        First Name: <input type="text" name="firstName" />
        Last Name: <input type="text" name="lastName" />
        Age: <input type="text" name="age" />
        <input type="submit" />
       </form>
    </body>
</html> 
```

我尝试处理它的地方

```
 <?php
$i = 0;
$firstName = 'firstName';
$lastName = 'lastName';
$age = 'age';
$person = new person ($i,$firstName, $lastName, $age);
$PersonDAO = new PersonDAO();
$dao->insert($person);
?> 
```

我的道

类 PersonDAO 扩展 Person{ protected $link;

```
public function __construct() {
    $host = "localhost";
    $database = "test";
    $username = "root";
    $password = "";

    $dsn = "mysql:host=$host;dbname=$database";

    $this->link = new PDO($dsn, $username, $password);
    $this->link->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
}
public function __destruct() {
    $this->link = null;
}

public function insert($person){
    if (!isset($person) && $person != null){
        throw new Exception("Person Required");
    }
    $sql = "INSERT INTO person(firstName, lastName, age)"
    . "VALUES (:firstName, :lastName, :age)";

    $params = array(
        'firstName' => $person->getFirstName(),
        'lastName' => $person->getLastName(),
        'age' => $person->getAge(),
    );

    $stmt = $this->link->prepare($sql);
    $status = $this->execute($params);
    if ($status != true){
        $errorInfo = $stmt->errorInfo();
        throw new Exception("Could Not Add Person: " . $errorInfo[2]);
    }

    $id = $this->link->lastInsertId('person');
    $person->setId($id);

    } 
```

} ?>

我的表单很好，但是当我单击提交时，它显示“致命错误：在第 6 行的 /Applications/XAMPP/xamppfiles/htdocs/personProj/process.php 中找不到类 'person'”

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:50:28.713

您可能想尝试：

```
$person = new Person ($i,$firstName, $lastName, $age); 
```

如果该类是用大写字母定义的，那么您也应该用大写字母来调用它。与方法/类调用的情况保持一致总是一个好主意。在许多其他语言（如 Java）中，这是非常严格的（尽管 PHP 在某些情况下可能不遵守此规则）。

# spring - Grails：设置 URL 映射优先级

> ID：13037144
> 
> 赞同：4
> 
> 时间：2012-10-23T18:48:02.287
> 
> 标签：spring, grails, url-mapping

我有时会遇到这样一种情况，即我尝试将 URLMappings 设置为：

```
    /** -> 内容控制器
    /static/$image/$imageNumber -> ResourcesController

```

然后当我访问`/static/image/13`它时，它经常会点击`/**`而不是

```
/静止的/*/*
```

我如何告诉 Spring / Grails 宁愿先尝试匹配另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:49:27.560

~~URL 映射按照它们声明的顺序被命中，所以把你的捕获全部放在`/**`最后。~~

编辑：这个答案在我的脑海里搔痒，我想起了我在邮件列表上[读到的一些东西。](http://grails.1312388.n4.nabble.com/URL-Mapping-question-tp3556768p3565451.html)回到 Grails 1.1 左右，URLMappings 是按照声明的顺序进行评估的。然而，现在，URLMapping 匹配稍微复杂一些。URLMappings 将通过比较通配符的数量、静态标记以及最后的约束数量来尝试返回最佳匹配。您可以[在源代码](https://github.com/grails/grails-core/blob/master/grails-plugin-url-mappings/src/main/groovy/org/codehaus/groovy/grails/web/mapping/RegexUrlMapping.java#L581)中看到这一点。

由于 URL 映射顺序不再重要，它必须是别的东西（尽管我发现按粗略的顺序列出它们更容易阅读它们）。看起来第二个片段实际上应该是一个静态令牌。我会试试`/static/image/$imageNumber`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:45:37.510

事实证明，只要满足以下条件，Grails 就会从更具体到最不具体：

1.  您的 URLMappings 中没有语法错误，并且
2.  有时您需要重新启动 grails 才能使其正确生效。

    ```
    "/other-test/$testname" { // Fired for "/other-test/hi-there/"
        controller="test"
    }

    "/**" { // fired for "/something-else"
        controller="test"
    } 
    ```

# linux - 通过交换机通过以太网将嵌入式系统连接到主机

> ID：13037146
> 
> 赞同：0
> 
> 时间：2012-10-23T18:48:11.133
> 
> 标签：linux, networking, configuration, embedded-linux, ethernet

我有一个带有千兆以太网的 arm 平台，我想将它连接到我的 ubuntu 机器以测试以太网端口。

网络不是我的强项。

因此，我在嵌入式系统上修改了 /etc/network/interfaces：

```
# Configure Loopback
auto lo
iface lo inet loopback

#auto eth0
#iface eth0 inet dhcp

auto eth0
iface eth0 inet static
address 192.168.1.2
netmask 255.255.255.0
gateway 192.168.1.0 
```

在我的 ubuntu 机器上，我设置了（通过网络连接窗口）：

```
IP: 192.168.1.1
netmask: 255.255.255.0
gateway: 192.168.1.0 
```

当我测试连接时，手臂系统上没有识别出连接。

eth0 端口产生以下输出：

```
eth0: link up, 10 Mb/s, half duplex, flow control disabled        
ip: RTNETLINK answers: Invalid argument 
```

ifconfig 显示：

```
# ifconfig                                                                                             
eth0      Link encap:Ethernet  HWaddr 02:50:43:C5:C5:75                                                
          inet addr:192.168.1.2  Bcast:0.0.0.0  Mask:255.255.255.0                                     
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1                                           
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0                                           
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0                                         
          collisions:0 txqueuelen:1000                                                                 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)                                                       
          Interrupt:11                                                                                 

lo        Link encap:Local Loopback                                                                    
          inet addr:127.0.0.1  Mask:255.0.0.0                                                          
          UP LOOPBACK RUNNING  MTU:16436  Metric:1                                                     
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0                                           
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0                                         
          collisions:0 txqueuelen:0                                                                    
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

谁能指出我最可能的明显错误？如果我需要提供更多信息，请告诉我。

编辑：我在嵌入式系统上运行busybox 1.18.5。

编辑2：

```
# route                                                                                                
Kernel IP routing table                                                                                
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface                          
192.168.1.0     *               255.255.255.0   U     0      0        0 eth0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:33:49.877

这是不好的

```
auto eth0
iface eth0 inet static
address 192.168.1.2
netmask 255.255.255.0
gateway 192.168.1.0 
```

192.168.1.0 是您的网络地址。肯定它不能成为你的网关。通常你有这样的配置

```
auto eth0
iface eth0 inet static
address 192.168.1.2
netmask 255.255.255.0
gateway 192.168.1.1
network 192.168.1.0
broadcast 192.168.1.255 
```

其中后两者可以根据地址和网络掩码自动计算，因此不会写入配置文件

# mysql - UNION Query中的部分和和减法（减）

> ID：13037149
> 
> 赞同：2
> 
> 时间：2012-10-23T18:48:17.950
> 
> 标签：mysql, union, subtraction

我现在有两个类似的表（一个用于账单，另一个用于付款），现在我向用户显示来自两者的联合混合数据..

```
Table Bills                             
CustomerId  Amount                      
1           100                        
2           100                        
1           100                        
2           100

Table Payments
CustomerId  Amount
1           100
2           100
1           100 
```

现在我的用户可以看到以下信息

```
From Customer 1
Type    CustomerId   Amount
B       1            100
P       1            -100
B       1            100
P       1            -100
TOTAL 0

From Customer 2
Type    CustomerId   Amount
B       1            100
P       1            -100
B       1            100
Total 100 
```

使用 UNION 语句一切正常

现在我需要在每条记录上显示部分余额，以便用户在查看记录时可以记住 balanca..

像这样……（渴望）

```
From Customer 1
Type    CustomerId   Amount    Partial
B       1            100       100
P       1            -100      0
B       1            100       100
P       1            -100      0 
```

我已经尝试过使用像@Partial := @Partial + Amount 这样的变量，但它似乎首先将第一部分（账单）和其余部分（付款）相加......就像这样......

```
From Customer 1
Type    CustomerId   Amount    Partial
B       1            100       100
P       1            -100      200
B       1            100       200
P       1            -100      100 
```

似乎首先从账单中总结所有内容，然后开始减法......有人知道如何解决吗？

****** *** ** ***** // 更新 // ***** ** *** ********

 **这里原始查询...

（选择 'Bill' 作为 cType 、 b.type、 b.tal 、 'Customer'、 b.number 、 b.date 、 b.subtot、 b.tax、 IF(b.type='CA' 或 b.type= 'CB' 或 b.type='CC' 或 b.type='CX',b.total*-1,b.total) 作为来自账单 b 的总额 b.idcustomer='000140') UNION ALL (SELECT ' Payment' as cType, 'CO' , '1' , '' , c.idcash , c.date , 0 ,0 , -c.amount FROM cash c WHERE c.idcustomer='000140' and ( c.type=' CO' 或 c.type='DM') ) 按日期排序；

这带来了这样的东西

Bill FX 1 客户 9 2011-02-25 0.00 0.00 100.00

付款 CO 1 37 2011-03-04 0.00 0.00 -100.00

Bill FX 1 客户 616 2011-03-23 0.00 0.00 100.00

付款 CO 1 751 2011-04-12 0.00 0.00 -100.00

Bill FX 1 客户 1267 2011-04-27 0.00 0.00 100.00

付款 CO 1 1157 2011-05-10 0.00 0.00 -100.00

Bill FX 1 客户 1974 2011-05-26 0.00 0.00 100.00

付款 CO 1 1654 2011-06-08 0.00 0.00 -100.00

然后当我尝试对patiars求和时...使用以下代码

设置@running_total=0；（选择 'Bill' 作为 cType 、 b.type、 b.tal 、 'Customer'、 b.number 、 b.date 、 b.subtot、 b.tax、 IF(b.type='CA' 或 b.type= 'CB' 或 b.type='CC' 或 b.type='CX',b.total*-1,b.total) 作为总计，（@running_total := @running_total + total）作为 RunningTotal 来自账单 b WHERE b.idcustomer='000140') UNION ALL (SELECT 'Payment' as cType, 'CO' , '1' , '' , c.idcash , c.date , 0 ,0 , -c.amount, (@running_total : = @running_total-c.amount) AS RunningTotal FROM cash c WHERE c.idcustomer='000140' and (c.type='CO' or c.type='DM') ) 按日期排序；

结果...

Bill FX 1 客户 9 2011-02-25 0.00 0.00 100.00 100.00

付款 CO 1 37 2011-03-04 0.00 0.00 -100.00 1905.00

Bill FX 1 客户 616 2011-03-23 0.00 0.00 100.00 200.00

付款 CO 1 751 2011-04-12 0.00 0.00 -100.00 1805.00

Bill FX 1 客户 1267 2011-04-27 0.00 0.00 100.00 300.00

付款 CO 1 1157 2011-05-10 0.00 0.00 -100.00 1705.00

如您所见，似乎首先从账单中求和，然后从付款中开始减去...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:54:13.263

以下是我能想到的在 MySQL 中执行此操作的唯一方法，假设您有一个用于对记录进行排序的时间戳。如果您的数据量适中，这可能会证明效率太低：

```
select t.*,
       ((select sum(amount)
         from bills b
         where b.customerId = t.customerId and
               b.datetime <= t.datetime
        ) -
        (select sum(amount)
         from payments p
         where p.customerid = t.customerid and
               p.datetime <= t.datetime
        )
       ) as balance
from ((select 'B' as type, customerid, amount, datetime from bills b) union all
      (select 'P', customerid, amount, datetime from payments p)
     ) t 
```**

# java - 单个 java 进程的队列/工作线程架构

> ID：13037157
> 
> 赞同：1
> 
> 时间：2012-10-23T18:48:55.983
> 
> 标签：java, multithreading, queue, jms, message-queue

我有以下问题要解决。

我需要编写一个java程序：

1.  从 Web 服务读取 JSON 对象 j1,j2,...,jn。
2.  对每个对象进行一些数字运算以得出 j1',j2',...,jn'
3.  将对象 j1',j2',...,jn' 发送到 Web 服务。

步骤 1、2 和 3 的计算、空间要求可以在任何给定时间变化。

例如：

1.  在第 2 步处理 JSON 对象所需的时间可能会因 JSON 对象的内容而异。
2.  步骤 1 中 Web 服务生成对象的速率可以随时间上升或下降。
3.  步骤 3 中的使用 Web 服务可能会积压。

为了解决上述设计问题，希望实现以下架构：

![在此处输入图像描述](../Images/b6749e4d2448c7b2536668ea6b7d29c5.png)

1.  从外部 web 服务读取 JSON 对象并将它们放在 Q
2.  一个自动调整大小的工作线程池，它使用来自 Q 的 JSON 对象并处理它们。处理它们后，将生成的对象放在第二个 Q
3.  一个自动调整大小的工作线程池，它使用来自第二个 Q 的 JSON 对象以将它们发送到使用 Web 服务。

问题：

> 我很好奇是否有可以用来解决这个问题的框架？

笔记：

1.  我可以使用一系列组件（例如自定义队列、使用并发包的线程池）来解决这个问题——但是我正在寻找一种允许编写此类解决方案的解决方案。
2.  这不会存在于容器内。这将是一个 Java 进程，其入口点是 public static void main(String args[])
3.  但是，如果有适合这种范例的容器，我想了解它。
4.  我可以将其拆分为多个进程，但是我想保持它非常简单并且在一个进程中。

谢谢。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:57:39.693

我不确定你的帖子的最终问题是什么，但你有一个合理的设计理念。我要问你的一个问题是你在什么环境中？您是在 JavaEE 容器中还是只是一个简单的独立应用程序？

如果您在一个容器中，那么让消息驱动 Bean 处理 JMS 队列比拥有一个工作线程池更有意义。

如果在您自己的容器中，您自己管理线程池会更有意义。话虽如此，我还会考虑运行单独的应用程序，将工作从队列中拉出来，这将为您带来更好的扩展架构。如果需要，您可以添加更多机器，让更多工人指向一个队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:54:59.890

尝试使用[Apache camel](https://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel)或[Spring Integration](http://www.springsource.org/spring-integration)来连接。这些是一种集成框架，将简化您与 Web 服务的交互。您需要做的是定义一个从 webservice 1 -> number cruncher -> web service 2 的*路由*。中间需要的路由和转换可以由框架本身处理

您可以将您的 cruncher 实现为骆驼处理器。可以通过[SEDA](http://camel.apache.org/parallel-processing-and-ordering.html)实现并行化你的 cruncher ；Camel[对此模式](http://camel.apache.org/parallel-processing-and-ordering.html)有一个组件。另一个替代方案是[AsyncProcessor](http://camel.apache.org/asynchronous-processing.html)

我想说你首先看看像骆驼这样的框架背后的原则。他们创建的抽象与手头的问题非常相关。

# mysql - 为我的 Rails 应用程序添加数据库索引

> ID：13037159
> 
> 赞同：2
> 
> 时间：2012-10-23T18:49:07.230
> 
> 标签：mysql, ruby-on-rails, ruby, indexing

我正在使用 MySQL，需要为我的表添加一些索引以获得更好的性能。

我的一个常见问题是这样的：

```
arrs = @book.items.where("type = 'A' and status not in ('cancelled','notransportation')").order("item_date, item_time asc") 
```

您如何建议添加有助于此类查询的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:53:23.877

从应用程序的日志中收集正在运行的原始 SQL 查询，然后用于`SELECT EXPLAIN`确定在何处添加索引。

我在 上找到了[本教程](http://schimpf.es/mysql-explain-tutorial/)和[幻灯片](http://www.slideshare.net/phpcodemonkey/mysql-explain-explained)`SELECT EXPLAIN`，应该会有所帮助。祝你好运！

# c++ - 表示可以有子菜单的菜单的数据结构

> ID：13037164
> 
> 赞同：7
> 
> 时间：2012-10-23T18:49:42.883
> 
> 标签：c++

例如我可以有这样的东西，

```
A
B
 ba
 bb
C
 Ca
D 
```

现在我有一个二维数组，但这不是很一般，因为如果我想将最大子级别从 2 扩展到 3，我需要另一个维度。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T18:55:17.947

复合模式在这里是一个合适的应用：

![复合图案](../Images/27bcce7f63abd7640477cd037a7c3985.png)

（来自维基百科：）[http://en.wikipedia.org/wiki/Composite_pattern](http://en.wikipedia.org/wiki/Composite_pattern)

在你的情况下：

*   创建一个名为“Menu”的基类（这对应于上图中的**Component部分）**
*   创建一个名为“MenuItem”的派生类（这对应于上图中的**Leaf部分）**
*   创建一个名为“SubMenu”的派生类（这对应于上图中的**Composite**部分） SubMenu 可以包含更多的菜单 - 可以是更多的 MenuItem 或 SubMenu。

您可以通过使用每个 SubMenu 对象实现一个计数器，根据它们在复合“SubMenu”中的插入顺序来实现所需的菜单元素排序：每次调用时`aSubMenu.add(newMenuItemOrSubMenu)`，`aSubMenu`都应该增加自己的计数器并用排序号标记新项目。（实现的具体细节由您决定，您根本不必使用单独的计数器，只需使用列表或数组）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:05:48.090

也许是这样：

```
class MenuNode
{
public:
    MenuNode(std::string new_label);
    void Add(MenuNode * new_node);
private:
    std::string label;
    std::vector<MenuNode *> children; // changed to vector to preserve order
}; 
```

用法：

```
MenuNode menu("root"),
         file("File"),
         edit("Edit"),
         open("Open..."),
         close("Close"),
         save("Save..."),
         prefs("Preferences"),
         yes_foo("Activate Foo"),
         no_foo("Deactivate Foo");

menu.Add(&file);
menu.Add(&edit);

file.Add(&open);
file.Add(&close);
file.Add(&save);

edit.Add(&prefs);

prefs.Add(&yes_foo);
prefs.Add(&no_foo); 
```

其中代表：

```
Main Menu
  File
    Open...
    Close
    Save...
  Edit
    Preferences
      Activate Foo
      Deactivate Foo 
```

请注意此示例的明显缺陷，即对（可能）临时变量地址的依赖。您将无法在函数中创建它并返回它。

实现的琐碎部分也丢失了，例如，无法遍历示例代码中节点的私有状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T08:21:28.877

sampson-chen 提到的复合设计模式是我为小型开发人员监视器所做的实现的正确方法，让您从菜单结构中选择一些测试方法。

我有一个基类“菜单条目”，从中派生子菜单和叶子（菜单条目）。叶子只是执行某些操作，而子菜单会打开另一个菜单级别。

例如，基类可能与此类似（当您喜欢使用 shared_pointers 时）：

```
 /*************************************************************//*!
 * @brief The base class for all menu entry types (sub menus and sub menu entries/items)
 ******************************************************************/
class MenuEntry : public boost::enable_shared_from_this<MenuEntry>
{

  public:
    virtual ~MenuEntry(){}

/**************************************************************//*!
 * @brief Default implementation to add menu entries; has to be re implemented
 * @param[in] newSubMenuEntry - the new menu entry (another sub menu or leaf)
 **************************************************************/
virtual void add(boost::shared_ptr<MenuEntry> newSubMenuEntry)=0;

/*****************************************************************//*!
 * @brief Default implementation for call to menu entries; always returns false
 * @return false - the function has not been re implemented
 ****************************************************************/
virtual bool call(void)
{
  // the member function has not been re-implemented
  return false;
}

/*****************************************************************************//*!
 * @brief Default implementation, has to be reimplemented
 * @return emptyVector - an empty vector
 *********************************************************************************/
virtual std::vector<boost::shared_ptr<MenuEntry> > getChildren(void)
{
  std::vector<boost::shared_ptr<MenuEntry> > emptyVector;
  return emptyVector;
}

/*******************************************************************************//*!
 * @brief Gives a pointer to the parent of the actual menu entry
 * @return m_parent - pointer to the parent
 ******************************************************************************/
boost::shared_ptr<MenuEntry> parent(void)
{
  return m_parent;
}

/***************************************************************************//*!
 * @brief Default implementation for selecting a menu entry
 * @param[in] desiredMenuEntry - the desired menu entry which shall be selected
 * @return notExisting - a pointer to <b>this</b>
 **********************************************************************************/
virtual boost::shared_ptr<MenuEntry> select(boost::shared_ptr<MenuEntry> desiredMenuEntry)=0;

/**************************************************************************//*!
 * <B>Criticality: C0 \n\n</B>
 * @brief Sets a pointer to the parent of new menu entry
 * @param[in] pointerToParent - pointer to the parent
 ****************************************************************************/
void setParent(boost::shared_ptr<MenuEntry> pointerToParent)
{
  m_parent = pointerToParent;
}

/***************************************************************************//*!
 * @brief Default implementation for destroying children
 *****************************************************************************/
virtual void destroy(void)=0;

  protected:
    /************************************************************************//*!
     * @brief Constructor for a menu entry (sub menu or leaf)
     * @param[in] menuEntryName - the name for the sub menu or leaf
     *************************************************************************/
    MenuEntry(std::string menuEntryName)
    {
      m_menuEntryName = menuEntryName;
    }

}; 
```

在 select 方法中，我通过返回值检查是否有执行某些操作的叶子或子菜单，我必须为此更改指针。

为方便起见，您可以添加在子菜单中找到所有子菜单条目以进行显示的方法，或者使用实际菜单路径等为您构建标题行的方法......另一个想法是扫描菜单树的方法为了避免双重菜单条目asf。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:07:49.143

使用一棵树。无论如何，这最好在树中定义。

其中：rootNode 连接到`A`, `B`, `C`, `D`. `B`连接到`ba`和`bb`。`C`连接到`Ca`。等等

![在此处输入图像描述](../Images/be2a14bc181f56ba1def59ae2096b54d.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-23T22:21:03.157

我在我的[Github上使用 struct 作为详细信息](https://github.com/lcd11001/opencv/tree/ConsoleMenu)

控制台菜单.h

```
typedef int (*MENU_FUNCTION_POINTER)();

typedef struct _MENU MENU;
typedef MENU* MENU_POINTER;

struct _MENU
{
    bool isValid; // C++ can not compare struct is NULL
    string text;
    MENU_FUNCTION_POINTER func;

    bool isOpen;
    MENU_POINTER childMenu;
    MENU_POINTER parent;
};

class ConsoleMenu
{
private:
    static MENU _chapters[];
    static MENU _chapter1[];
    static MENU _chapter2[];
}; 
```

控制台菜单.cpp

```
MENU ConsoleMenu::_chapters[] = {
    {true, "Chapter 1", NULL, false, ConsoleMenu::_chapter1, NULL},
    {true, "Chapter 2", NULL, false, ConsoleMenu::_chapter2, NULL},
    {true, "Chapter 3", NULL, false, NULL, NULL},
    {true, "Chapter 4", NULL, false, NULL, NULL},
    {false, "unused", NULL, false, NULL, NULL}
};

MENU ConsoleMenu::_chapter1[] = {
    {true, "Example 1.1", Example1, false, NULL, ConsoleMenu::_chapters},
    {true, "Example 1.2", Example2, false, NULL, ConsoleMenu::_chapters},
    {false, "unused", NULL, false, NULL, NULL}
};

MENU ConsoleMenu::_chapter2[] = {
    {true, "Example 2.1", NULL, false, NULL, ConsoleMenu::_chapters},
    {true, "Example 2.2", NULL, false, NULL, ConsoleMenu::_chapters},
    {true, "Example 2.3", NULL, false, NULL, ConsoleMenu::_chapters},
    {false, "unused", NULL, false, NULL, NULL}
}; 
```

# c# - 如何删除气球工具提示上的“扳手”按钮？

> ID：13037168
> 
> 赞同：7
> 
> 时间：2012-10-23T18:49:57.157
> 
> 标签：c#, winforms, windows-shell, windows-explorer, notifyicon

我想隐藏气球工具提示上的扳手按钮
有人知道怎么做吗？是否可以禁用/删除正在调用的系统托盘中气球工具提示上关闭按钮旁边的**扳手按钮**`System.Windows.Forms.NotifyIcon`？

![气球工具提示](../Images/e60c29a7283c42765a5b600beb24ad48.png)

请帮助
提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:36:31.343

抱歉，我认为这是不可能的。负责桌面图标和任务栏的资源管理器进程也负责控制通知区域。`NotifyIcon`您可以使用与显示通知图标不同的对象。如果您想查看类似的对象，我建议您使用[DevComponents](http://DevComponents.com)

很抱歉，
我希望这对你有帮助:)

# c# - 尝试在 WebMatrix 中使用 Request.Files

> ID：13037172
> 
> 赞同：1
> 
> 时间：2012-10-23T18:50:12.743
> 
> 标签：c#, file, razor, webmatrix

每个人，

我正在尝试将图像上传到我的网站，并且我已经成功地让它工作，但是，我需要将功能扩展到一张简单的图像之外。我看到的示例使用 WebMatrix 文件助手（文件助手？是吗？哦，它是某种自动绘制 input=type"file" 字段所需的 html 的助手）。我在表单中的代码行：

```
@FileUpload.GetHtml(initialNumberOfFiles:1, allowMoreFilesToBeAdded:false, includeFormTag:false) 
```

我在（IsPost）中的代码行：

```
var UploadedPicture = Request.Files[0];
    if(Path.GetFileName(UploadedPicture.FileName) != String.Empty)
    {
        var ContentType = UploadedPicture.ContentType;
        var ContentLength = UploadedPicture.ContentLength;
        var InputStream = UploadedPicture.InputStream;
        Session["gMugshot"] = new byte[ContentLength];
        InputStream.Read((byte[])Session["gMugshot"], 0, ContentLength);
    }
    else
    {
        Session["gMugshot"] = new byte[0];
    } 
```

之后（IsPost）中的更多代码将其作为二进制数据存储在数据库中，我可以从中获取页面上的图像（我不想将实际图像文件保存在服务器上的文件夹中并使用 GUID等。二进制数据很好，我想占用的空间要少得多）。

我将它设置为通过使用 jQuery 读取手动创建的按钮的点击，然后隐藏和取消隐藏包含由 C# 呈现的图像的 div（从读取数据库中获取它们），从而可以点击滚动浏览图片。抱歉，如果这有点 TMI，只是想彻底，但要细化问题：我对文件上传知之甚少，不知道如何很好地处理上传的数据。我尝试研究这些信息，但没有找到任何与我相关的信息（实际上，我没有找到关于 input type="file" 或 FileUpload 方法的有用信息，真的）。

使用 input type="file" id="pic1id" 会更好吗？有没有我可以使用的东西，例如 Request.Files["pic1id"] 可以从输入元素的 id 获取文件？或者该程序是否只是简单地获取所有上传的文件，将它们放在一个等待被索引调用的逻辑组中，如下所示：“Request.Files [0]”。如果是这样，索引的顺序是什么？在开始处理数据之前，我是否需要使用 Request.Files.Count 来测试已上传的数量？

请注意，我想要单独的输入 type="file" 字段（无论是否由助手绘制）。我不想在一个输入中接受多个文件（主要是因为缺乏知识，例如，我担心我不会知道如何处理数据）。到目前为止，计划是单独的输入 type="file" 字段将在滚动图片时隐藏/取消隐藏的 div 中，因此每张图片（空间）都有自己的输入 type="file" 字段。div 的隐藏和取消隐藏、显示的（一张）图片、从数据库存储和接收二进制数据以及单击图片占位符都非常有用。几乎我只需要知道如何一次处理多个上传的图片，以便存储在他们各自的数据库“图像”字段中。

我需要使用的任何语法示例将不胜感激。

抱歉，有这么多问题，但我根本找不到太多有用的信息。

感谢任何试图提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:40:47.583

好的，为了解决这个问题，我不得不测试和测试，直到最终对我有用。这是我所做的：

首先，我放弃了使用绘制 html 的助手部分，即我取出：

```
@FileUpload.GetHtml(initialNumberOfFiles:1, allowMoreFilesToBeAdded:false, includeFormTag:false) 
```

并添加了一个带有一定id的常规输入type="file"，比如id="pic1"。

接下来，我能够根据 id 获取单个文件 post，这确实是我需要知道如何做的主要事情，它真的就像这样简单：

```
Request.Files["pic1"]; 
```

# javascript - chrome 扩展的内容脚本在谷歌、youtube 页面中不起作用

> ID：13037173
> 
> 赞同：3
> 
> 时间：2012-10-23T18:50:19.197
> 
> 标签：javascript, jquery, google-chrome-extension

我正在尝试创建一个 chrome 扩展。当用户单击我的扩展程序的图标（browserAction）时，内容脚本会在打开的页面（当前选项卡）的正文中附加一个额外的 div。它在除 google 的搜索页面和 youtube 之外的所有网站上都可以正常工作。我没有收到任何错误消息或任何东西。它根本不会给出任何回应。

这是我在**content.js**中的代码：

```
alert('sdsd');
$('body').append("<div id='popup'>My extension name</div>"); 
```

我已将警报用于测试目的。因此，当切换扩展时，它应该显示一条警报消息，然后将 div 附加到正文，理想情况下！但它不会为这 2 个站点。

知道这里可能出了什么问题吗？

**显现**

```
{
    "name": "My first extension",
    "version": "1.0",
    "background": { "scripts": ["background.js"] },
    "content_scripts": [{
            "all_frames": true,
            "css": ["style.css"],
            "matches": ["http://*/*","https://*/*"]
        }],
    "permissions": [ "tabs","http://*/*" ],
    "browser_action": { "name": "test" },
    "manifest_version": 2
} 
```

**背景.js**

```
chrome.browserAction.onClicked.addListener(function(tab){
chrome.tabs.executeScript(null,{file:"jquery.min.js"},function(){
    chrome.tabs.executeScript(null,{file:"content.js"});
}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:54:15.403

在 Youtube 的页面中，$ 被覆盖并且不是 jQuery。它是

```
bound: function ()
{
    return document.getElementById.apply(document, arguments)
} 
```

因此，您的代码会出现`document.getElementById('body')`异常`undefined`。

您应该尝试使用[noConflict()](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)。

**编辑 ：**

你为什么不简单地列出`jQuery.min.js`和你`content.js`的`content_scripts`而不是以编程方式注入它们。这样可以避免冲突。

**编辑 2：**

现在您使用了内容脚本，您应该使用[此处描述的通信](http://developer.chrome.com/extensions/content_scripts.html#host-page-communication)向`background.js`内容脚本发送显示警报的指令。

**编辑 3：**

另一种解决方案是使用编程注入（就像您最初所做的那样）而不使用 jquery，`$('body').append("<div id='popup'>My extension name</div>");`在 vanilla JS 中被翻译为

```
var div = document.createElement('div');
div.id = 'popup';
document.body.appendChild(div);
document.getElementById('popup').innerHTML = "My extension name"​;​ 
```

但它通常更清洁（并且需要更少的权限）以避免编程注入。

# javascript - 允许 textarea 调整大小以从其原始/默认大小缩小（不仅仅是增长）元素

> ID：13037177
> 
> 赞同：7
> 
> 时间：2012-10-23T18:50:31.883
> 
> 标签：javascript, resize, textarea, css

我正在尝试创建一个`textarea`元素，该元素具有以编程方式定义的原始/默认大小，但用户可以在定义的限制内调整其大小，使其既可以增长也可以缩小。

我已经尝试设置文本区域的`resize`、`min-width`、`max-width`和`width`属性，但是到目前为止，这只允许用户*增长*`textarea`元素，而不是缩小*它*。浏览器将允许用户按预期在 and 的范围内而不是在 and 的范围内调整元素的大小`width`和`max-width`大小。`min-width``max-width`

是否有一种简单的方法来指定*默认*大小，该默认大小也不会被视为*最小*大小？

* * *

这是我正在使用的代码：

```
function textAreaWithDefault(size) {
    var ta = document.createElement("textArea");

    ta.style.resize = "both";
    ta.style.minWidth = "100px";
    ta.style.width = size + "px";    // default size
    ta.style.maxWidth = "500px";

    document.body.appendChild(ta);
} 
```

首选纯 css 和/或 javascript 解决方案，但它只需要在 web-kit 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:08:58.163

我会研究 fittext 或类似的脚本： [http ://fittextjs.com/](http://fittextjs.com/)

这正是您所描述的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:56:29.290

尝试设置 min-width 等于 max-width 和 width 为 0

# android - Android修饰键可以回退到一个动作吗？

> ID：13037178
> 
> 赞同：5
> 
> 时间：2012-10-23T18:50:37.750
> 
> 标签：android, android-keypad, android-hardware

我正在开发一个输入设备，该设备有一个按钮，我想在自己按下它时既充当主页按钮，又充当设备上其他按钮的修饰符。

我知道您可以在 kcm 文件中使用其他按钮执行此操作，并且具有以下内容：

```
key ESCAPE {
    base:                               fallback BACK
    alt, meta:                          fallback HOME
    ctrl:                               fallback MENU
} 
```

是否有可能有类似的东西：

```
key CTRL_LEFT {
    base:                               fallback HOME
    {SOMETHING HERE}:                   CTRL_LEFT
} 
```

这样我就可以用另一个按钮按下该按钮，并且它不会回退到 HOME 上？

提前致谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:11:19.150

此功能在系统级别上是不可能的：有关所有可能选项的列表，请参阅 [http://source.android.com/tech/input/key-character-map-files.html](http://source.android.com/tech/input/key-character-map-files.html)。

但是，如果您想在应用程序级别上使用它，您可以按如下方式对其进行编程：

```
import android.view.KeyEvent;

private boolean home = false;

public boolean onKeyDown(int keyCode, KeyEvent event) 
{
   if (event.getScanCode() == 29)        //29 == CTRL_LEFT
     home = true;        //if we release this button, HOME needs to be invoked
   else home = false;    //so CTRL_LEFT was used as a modifier: no need to invoke HOME

   //allow the system to pass key handling to the next listener
   return super.onKeyUp(keyCode, event);
}

public boolean onKeyUp(int keyCode, KeyEvent event)
{
   if (event.getScanCode() == 29 && home == true)
   {
     super.dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HOME));
     return true;        //so we absorb the event
   }
   return super.onKeyUp(keyCode, event);
} 
```

然后，只要此应用程序设置为接收击键（通常是隐私问题，除非您自己编写代码），它就可以处理击键并在需要时发送 HOME 按钮。

如果您决定继续这样做，则必须删除

```
base:                               fallback HOME 
```

从你的代码。

# php - 在第一次请求后授权来自用户的请求

> ID：13037184
> 
> 赞同：0
> 
> 时间：2012-10-23T18:50:54.877
> 
> 标签：php, authentication, uri

我需要制作一个脚本来授权用户浏览网站的某个部分。该用户安装了一个可以进行 url 调用的软件。而已。之后，我知道用户已获得授权。如何让我的浏览器知道用户是否提出了该请求？有办法吗？使用 cookie 或 http 身份验证？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:56:05.277

您需要使用会话。这是一个使用会话和 MySQL 对用户进行身份验证的示例：[http ://www.dreamincode.net/code/snippet1153.htm](http://www.dreamincode.net/code/snippet1153.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:53:41.677

你知道会话吗？例如，您可以使用 PHP 脚本。写所有关于会话的东西在这里解释太多了……但是尝试例如搜索 php 会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:59:04.920

PHP 会话是授权和识别用户的解决方案之一（简单的）。查看本教程：[http](http://www.tizag.com/phpT/phpsessions.php) ://www.tizag.com/phpT/phpsessions.php 。

另一个选项是使用 PHP 进行 HTTP 身份验证。 [http://php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

# c# - 带单引号的拆分方法

> ID：13037189
> 
> 赞同：7
> 
> 时间：2012-10-23T18:51:17.123
> 
> 标签：c#, parsing

我有一个文本文件，其中包含如下内容：

> （名单（名单'雅培'阿什利'J）'8697387888'ajabbott@mail.usi.edu 2.3073320999676614）

我已将文件读入单个字符串数组元素，但我想拆分为单个数组元素，因此它更有用，例如：

> |雅培|Ashley|J|8697387888|ajabott@mail.usi.edu|2.3073320999676614|

但是，我无法弄清楚如何做到这一点。这是我尝试过的，但由于语法原因不起作用。

```
for (int Count = 0; Count < lines.Length; Count++)
{
    Split = lines[Count].Split(''');
} 
```

我正在尝试使用单引号作为分隔符。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T18:52:33.550

尝试使用`\`.

```
 Split = lines[Count].Split('\''); 
```

# c# - 拖放 Outlook 电子邮件并将 lt 解析到 MS SQL 数据库中

> ID：13037193
> 
> 赞同：1
> 
> 时间：2012-10-23T18:51:40.757
> 
> 标签：c#, asp.net, outlook

我正在开发一个 Web 应用程序，它必须允许用户将电子邮件从 Outlook 拖放到类似于拖放上传文件组件的东西中。然后，我的应用程序必须接收电子邮件并将其解析到 MSSQL 数据库中。

我一直在寻找答案并找到了这个线程： [Drag and Drop directly from Outlook to a webform](https://stackoverflow.com/questions/8792929/drag-and-drop-directly-from-outlook-to-a-webform)

该线程有一半没有帮助，因为拖放组件似乎不接受电子邮件。任何人都可以帮助我解决解析问题吗？我正在将 c# asp.net 与 mssql 一起使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:29:49.520

Outlook 和拖放到浏览器的主要问题[是 Outlook 有点懒惰，只提供`text/plain`mimetype 格式](http://codebits.glennjones.net/dragdrop/contenteditable.htm)的拖动数据。

支持从 Outlook 拖放到 ASP.NET 的唯一方法是使用插件（*ActiveX、Silverlight 或 Flash*）。其他替代方法是使用支持本机拖放的胖客户端（*WPF、WinForms 等）或构建允许直接上传到 Web 应用程序或数据存储的 Outlook 插件。*

请参阅[有关从 Outlook 拖放到 Web 表单的相关 SO 帖子](https://stackoverflow.com/q/2200926/175679)。

# php - 贝宝快速结账 API

> ID：13037196
> 
> 赞同：0
> 
> 时间：2012-10-23T18:52:00.220
> 
> 标签：php, api, paypal

我的网站上有一个小型单品购买商店，它使用 PayPal Express Checkout API 来完成付款。除了最后的 API 调用外，我的一切都正常工作`DoExpressCheckoutPayment()`。我尝试了几种不同的方式来实现这一点，但是它们似乎都没有奏效。

这是我的success.php页面，api调用`GetExpressCheckoutDetails()`在顶部进行，然后`DoExpressCheckoutPayment()`应该在底部进行：

```
<script language="Javascript">

    function showFBWindow(s1, s2, s3, s4, s5)
    {
        url = "purchase-thankyou.php?name="+s1+"&email="+s2+"&code="+s3+"&id="+s4+"&token="+s5;
        newwindow=window.open(url,'name');
        if (window.focus) {newwindow.focus();}
    }

</script>

<?php
require_once("PayPal_API.php");

$Token      = $_GET["token"];
$PayerID    = $_GET["PayerID"];

$nvps = array();
$nvps["VERSION"] = "65.1";

// get details of transaction 
$nvps["METHOD"] = "GetExpressCheckoutDetails";
$nvps["TOKEN"] = $Token;
$response = RunAPICall($nvps); // Send the API call to PayPal.

?>

<html>
<head>
<title>Order Processed</title>
</head>
<body bgcolor="#ffffff">
<h1>THANK YOU!</h1>
<p>
<h1>Your order has been processed. Please follow the link below to complete your   payment</h1>
</p>
<p>

<?php
//outputArrayValues($response);
$id         = $_GET['PayerID'];
$token      = $response['TOKEN'];
$checkoutstatus = $response['CHECKOUTSTATUS'];
$timestamp      = $response['TIMESTAMP'];
$correlation_id = $response['CORRELATIONID'];
$acknowledgement    = $response['ACK'];
$version        = $response['VERSION'];
$build      = $response['BUILD'];
$e_mail_id      = $response['EMAIL'];
$payer_id       = $response['PAYERID'];
$payer_status   = $response['PAYERSTATUS'];
$first_name     = $response['FIRSTNAME'];
$last_name      = $response['LASTNAME'];
$cust_name      = $first_name." ".$last_name;
$country_code   = $response['COUNTRYCODE'];
$currency_code  = $response['CURRENCYCODE'];
$amount     = $response['AMT'];
$item_amt       = $response['ITEMAMT'];
$shipping_amt   = $response['SHIPPINGAMT'];
$handling_amt   = $response['HANDLINGAMT'];
$tax_amt        = $response['TAXAMT'];

// complete purchase by sending DoExpressCheckoutPayment
$nvps["METHOD"] = "DoExpressCheckoutPayment";
$nvps["TOKEN"] = $token;
$nvps["PAYMENTACTION"] = "Sale";
$nvps["PAYERID"] = $payer_id;
// Send the API call to PayPal.
$response = RunAPICall($nvps);

?>

<a href="#" 
onclick="showFBWindow('<?php echo $cust_name;?>','<?php echo $e_mail_id;?>','<?php echo     $currency_code; ?>','<?php echo $id;?>', '<?php echo $token;?>')">
   Click to Continue</a>

</body>
</html> 
```

我通过 URL 将客户姓名和电子邮件传递到感谢页面，以将信息保存到我的数据库中。我应该`DoExpressCheckoutPayment()`在感谢页面上打电话吗？

**编辑：**我在`SetExpressCheckout()`URL 调用的末尾添加了“&useraction=commit”，这应该使“继续”按钮更改为“立即付款”，但它仍然没有完成付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:49:28.227

使用“useraction=commmit”并没有消除调用 DoExpressCheckoutPayment() 调用的需要。正如您所注意到的 - 它只会改变体验，但不会缩短 API 调用。更多信息：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECCustomizing](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECCustomizing)

回到你原来的问题 - 不 - 你应该在显示“感谢页面”之前调用 DoExpresscheckout，直到你调用 DoExpresscheckout - 你的资金没有得到保证。

# forms - Symfony2：表单集合的验证不起作用

> ID：13037203
> 
> 赞同：1
> 
> 时间：2012-10-23T18:52:27.717
> 
> 标签：forms, validation, symfony, collections

> **可能重复：**
> [当实体关系/关联时 Symfony2 验证不起作用](https://stackoverflow.com/questions/12908658/symfony2-validation-doesnt-work-when-entity-relationships-associations)

我有一个表单 PageFormType，它只有一个名为“条目”的字段，没有数据类。

```
public function buildForm(FormBuilderInterface $builder, array $options) {

  $builder->add('entries', 'collection', array('type' => new EntryFormType() );
}

public function setDefaultOptions(OptionsResolverInterface $resolver) {
    $resolver->setDefaults(array('data_class' => null  ));
} 
```

表单的设置效果很好，我看到了呈现的 EntryFormTypes 的每个条目和每个字段，但是当验证我的 PageFormType 时，它​​总是有效的。验证单个 EntryFormType 可以，但我喜欢一次验证所有嵌入的表单。这有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:42:59.250

您必须为您的表单分配验证（请参阅：[http](http://symfony.com/doc/current/book/forms.html#adding-validation) ://symfony.com/doc/current/book/forms.html#adding-validation ）。在您的情况下，您可能想要这样的东西，使用[Valid-Constraint](http://symfony.com/doc/current/reference/constraints/Valid.html)：

```
use Symfony\Component\Validator\Constraints\Valid;

...

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $collectionConstraint = new Collection(array(
        'entities' => new Valid(),
    ));

    $resolver->setDefaults(array(
        'validation_constraint' => $collectionConstraint
    ));
} 
```

# java - JavaWS 配置依赖

> ID：13037204
> 
> 赞同：0
> 
> 时间：2012-10-23T18:52:29.447
> 
> 标签：java, web-services, jakarta-ee, maven

任何人都可以帮助我吗？我需要知道 @EndpointConfig 的 Maven 对 JBossAS 7 的依赖名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:05:23.007

干得好：

```
<dependency>
    <groupId>org.jboss.ws.native</groupId>
    <artifactId>jbossws-native-core</artifactId>
    <version>3.2.2.GA</version>
</dependency> 
```

# sql - SQL 根据来自另一列的值的输入列表列出一列的公共值？

> ID：13037205
> 
> 赞同：2
> 
> 时间：2012-10-23T18:52:31.680
> 
> 标签：sql, sql-server, sql-server-2008

我们有一个带有 SQL Server 2008 后端的 ASP.NET 应用程序。我们的 SpecimenEvents 表中有以下设置：

```
EventID SpecimenID EventType
      1 101 一个       
      2 102 安
      3 103 一个
      4 101乙
      5 103 乙
      6 101℃
```

给定一个 SpecimenID 列表作为输入——您将如何编写一个查询以仅将那些 EventType(s) COMMON 返回到输入列表中的所有 SpecimenID？例如：

(101,102,103) 的 SpecimenID 输入列表应返回“A”

(101) 的 SpecimenID 输入列表应返回 'A','B','C'

(101,103) 的 SpecimenID 输入列表应返回 'A', 'B' ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:11:05.063

```
select distinct EventType
from (
    select EventType, count(distinct SpecimenID) as SpecimenCount
    from SpecimenEvents
    where SpecimenID in (101,103)
    group by EventType
    having count(distinct SpecimenID) = 2 -- Make this match the list length
) x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:28:02.213

试试这个代码

```
 declare @1 varchar(10),@2 varchar(10), @3 varchar(10), @sql nvarchar(4000)
set @1='101'
set @2= '103'
set @3= null

set @sql =''
if @1 is not null set @sql = @sql+'
intersect
SELECT [EventType] from SpecimenEvents where [SpecimenID] = ' + @1
if @2 is not null set @sql = @sql+'
intersect
SELECT [EventType] from SpecimenEvents where [SpecimenID] = ' + @2
if @3 is not null set @sql = @sql+'
intersect
SELECT [EventType] from SpecimenEvents where [SpecimenID] = ' + @3
if len(@sql)>13 
begin
set @sql = substring(@sql,14,4000)
execute sp_executesql @sql
end 
```

阿米特·帕特尔

# batch-file - 批处理文件在其他计算机上不起作用

> ID：13037207
> 
> 赞同：1
> 
> 时间：2012-10-23T18:52:38.357
> 
> 标签：batch-file, cmd, echo

我编写了一个批处理文件，它接受用户输入并将其添加到 html，然后输出一个包含组合信息的文本文件以发布到 craigslist。这一切都非常简单，并且在我的计算机上运行良好，但是当我尝试在其他计算机上运行它时，它不会输出文件。我用了

```
(
回声sdfg
回声阿加雷
回声 asgfa
)>%文件名%.txt

```

将其放入文件中。我的电脑是windows XP，我在另一台XP和vista机器上试过，都没有。任何帮助将不胜感激，因为我花了大约 2-3 周的时间在这上面，我不想看到它浪费掉。

我知道出了什么问题，但我仍然有一个问题，其中一个输入是电话号码，销售人员在区号周围加上他的电话号码。现在我的问题是为什么会干扰，我该如何阻止它再次发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:01:44.257

很可能您没有找到正确的位置，或者文件名定义不正确。除非文件名被定义为绝对路径，否则该文件将被创建在相对于当前目录的文件夹中。

添加一些诊断行以帮助您跟踪正在发生的事情。

```
(
  echo sdfg
  echo argare
  echo asgfa
)>%filename%.txt
echo CD=%CD%
echo filename=%filename% 
```

# javascript - 大性能问题/在手机上使用骨干网崩溃

> ID：13037209
> 
> 赞同：0
> 
> 时间：2012-10-23T18:52:55.797
> 
> 标签：javascript, mobile, backbone.js

我们将dailymus.es 服务构建为对移动设备友好，但在手机上访问它时遇到了一系列性能问题。

具体来说，它会在几个“页面”之后崩溃，并且当我们在页面上有很多内容时。

我怀疑我们有太多的事件处理程序和/或内存泄漏。您使用什么方法来消除 Backbone 的这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:33:47.157

我建议您使用**Google Chrome 的 Developers Console**测试您的网站。使用**Profile**选项卡检查堆的状态。

大多数主干模型/视图的泄漏是由于没有将 DOM 事件从视图中分离出来，也没有从模型中分离 (on) 事件。

确保覆盖主干视图的*remove*方法，并确保将 .off() 从设置为 .on() 的所有内容中删除。不要忘记在子视图上调用 remove。

要查找泄漏：

1.  拍摄快照
2.  运行您的代码以创建一个视图，然后将其删除
3.  拍摄另一个快照
4.  比较快照以查找创建但未释放的新对象。

[有关 Google Chrome 堆分析器的更多信息](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T05:22:58.540

Backbone 浪费了大量内存，这对于移动设备来说是最难的事情。有很多技术可以在 DOM 元素上进行对象池化，更新元素而不是重新创建模板，限制加载图像直到最后一分钟，保持任何更新直到绘制周期之前。

如果内存管理得当，移动 Web 可以发挥出色的性能。PrefView 就是一个很好的例子，它可以在 iPad mini 上的长滚动列表上获得 50FPS。[https://github.com/puppybits/BackboneJS-PerfView](https://github.com/puppybits/BackboneJS-PerfView)

# javascript - javascript json-p 跨域请求

> ID：13037210
> 
> 赞同：-1
> 
> 时间：2012-10-23T18:52:56.123
> 
> 标签：javascript, jquery, jsonp, restful-url

你能告诉我这段代码有什么问题吗，我是新手，不知道，我尝试了一切，但我无法从服务器接收数据。

警报说 [object Object]，你知道这是什么意思吗？？：

```
<html>
<head>
<script type="text/javascript" 

src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
var sUrl =  "http://ops.epo.org/2.6.2/rest-

      // LOOP THROUGH EACH FAMILY MEMBER AND DO STUFF!
      alert(mValue)
    });
}
});
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:59:56.277

警报说这`mValue`是一个对象（属于“类” `Object`，即一个普通的 JS 对象），它被字符串化为`alert`它的字符串表示`"[object Object]"`。

改用`console.log(mValue)`并在开发人员控制台中检查元素的属性。

# file - 当另一个exe正在运行时如何运行一个EXE？

> ID：13037211
> 
> 赞同：1
> 
> 时间：2012-10-23T18:52:58.920
> 
> 标签：file, dll, batch-file, exe

启动另一个exe时如何使exe自动运行？

例子 ：

EXE 1 启动并运行

一旦看到 EXE 1 已经启动，EXE 2 就会自动运行。

我在 .bat 文件或 autorun.inf 中使用什么命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:51:34.450

干得好

```
start exe1.exe
:LOOP
tasklist /nh /fi "imagename eq exe1.exe" | find /i "exe1.exe" >nul && start exe2.exe || goto :LOOP 
```

这将开始`exe1.exe`，并且会在运行之前继续查看它是否已经开始`exe2.exe`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:04:11.593

```
@ECHO OFF
START /D "path" myexe1.exe
START /D "path" myexe3.exe 
```

取自[这里](https://stackoverflow.com/questions/221730/bat-file-to-run-a-exe-at-the-command-prompt)。

然后将文件另存为“somename.bat”

**编辑**

由于您的最后评论，这是我[发现的](http://www.instructables.com/answers/Check-if-a-process-is-running-from-a-batch-file/)

```
@echo off
tasklist /nh /fi "imagename eq chrome.exe" | find /i "chrome.exe" >nul && (
    echo Windows Media Player is running
) || (
    echo Chrome is not running
)
pause>nul 
```

我刚刚从链接中复制了代码，谷歌可能会很有帮助。

# visual-c++ - DirectShow ColorConverterDMO 过滤器不接受它宣传的输入格式？

> ID：13037215
> 
> 赞同：1
> 
> 时间：2012-10-23T18:53:07.453
> 
> 标签：visual-c++, filter, directshow, color-space

我正在尝试在我的 DirectShow 过滤器图中使用 ColorConverterDMO 从 UYVY 转换为 RGB32，但它在允许连接到它的输入引脚方面特别不合作。

例如，如果我枚举输入 pin 的媒体类型，然后，对于每个媒体类型，使用该媒体类型调用 pin 的 QueryAccept()，它返回 S_FALSE。这里发生了什么？如何让滤波器允许其输入引脚连接到源滤波器的输出引脚？

这是显示过滤器创建的示例代码，它不愿意接受它所宣传的任何媒体类型。在此代码中，QueryAccept 调用始终返回 S_FALSE。

任何帮助将不胜感激，谢谢！

```
// create filter and put it in the graph
CComPtr<IBaseFilter> colorConvert;
CComPtr<IPin> colorOut, colorIn;
CComPtr<IDMOWrapperFilter> colorConvertIface;

if(FAILED(hr = CoCreateInstance(CLSID_DMOWrapperFilter, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter, (void**)&colorConvert)))
    return hr;

if(FAILED(hr = colorConvert->QueryInterface(IID_IDMOWrapperFilter, (void **)&colorConvertIface)))
    return hr;

if(FAILED(hr = colorConvertIface->Init(CLSID_CColorConvertDMO, DMOCATEGORY_VIDEO_EFFECT)))
    return hr;

if(FAILED(hr = g_pGB->AddFilter(colorConvert, _T("Converter"))))
    return hr;

if(FAILED(hr = colorConvert->FindPin(L"in0",  &colorIn)))
    return hr;

if(FAILED(hr = colorConvert->FindPin(L"out0",  &colorOut)))
    return hr;

// try to get a little info about the frame input source's output pin offering...
CComPtr<IEnumMediaTypes> pMediaTypeEnum;
AM_MEDIA_TYPE *pMediaType;
hr = colorIn->EnumMediaTypes(&pMediaTypeEnum);
int cnt = 1;
while (pMediaTypeEnum->Next(1, &pMediaType, &fetched) == S_OK)
{
    TCHAR str[100];
    _stprintf(str, _T("Input Media Type [%d]:"), cnt++);
    DisplayType(str, pMediaType);

    hr = colorIn->QueryAccept(pMediaType);
    if (hr == S_FALSE)
    {
        //WHY?? You just told me you accepted this type!?!
    }

    DeleteMediaType(pMediaType);
}
pMediaTypeEnum.Release(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:53:59.133

[Color Converter DMO/DSP](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819079%28v=vs.85%29.aspx)不是 DirectShow 组件。[它属于 Windows Media，虽然它可以（可能）通过DMO Wrapper Filter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375519%28v=vs.85%29.aspx)插入 DirectShow 管道，但我怀疑它从来没有经过任何测试的预期场景。

我有另一个 DMO 的示例代码，并通过一定的努力在 DirectShow 中工作：[Using Vista Video Resizer DSP in DirectShow, via DMO Wrapper Filter](http://alax.info/blog/1371)。我的印象是，我过去读到有人设法让 Color Converter DMO 以类似的方式运行，在这种情况下，代码片段可能会有所帮助。

# webharvest - WebHarvest 找不到响应标头

> ID：13037219
> 
> 赞同：1
> 
> 时间：2012-10-23T18:53:27.450
> 
> 标签：webharvest

我正在使用 WebHarvest 从需要登录的站点获取数据。

它的设置是这样的：

第 1 页 = 登录页面

第 2 页 = 登录验证页面

第 3 页 = 统计页面

在第 2 页设置了 cookie。使用 Firebug 监视第 2 页的打开时，我得到以下标题：

```
Connection  Keep-Alive
Content-Type    text/html; charset=UTF-8
Date    Tue, 23 Oct 2012 18:25:12 GMT
Keep-Alive  timeout=15, max=100
Server  Apache/2.0.64 (Win32) JRun/4.0 SVN/1.3.2 DAV/2
Set-Cookie  SESSION=hej123;expires=Thu, 16-Oct-2042 18:25:12 GMT;path=/
Transfer-Encoding   chunked 
```

使用 WebHarvest 调用同一页面时，我只得到这些标题：

```
Date=Tue, 23 Oct 2012 18:31:51 GMT
Server=Apache/2.0.64 (Win32) JRun/4.0 SVN/1.3.2 DAV/2
Transfer-Encoding=chunked
Content-Type=text/html; charset=UTF-8 
```

WebHarvest 似乎找不到三个标头（Set-Cookie、Connection 和 Keep-Alive）。第 1、2 和 3 页是虚拟的，因此没有进行实际验证。cookie 始终在服务器端为第 2 页设置。

这是我目前使用的 WebHarvest 代码：

```
<var-def name="content2">
<html-to-xml>
<http method="post" url="http://myurl.com/page2.cfm">
    <http-param name="Login">sigge</http-param>
    <http-param name="Password">hej123</http-param>
    <http-param name="doLogin">Logga in</http-param>
    <loop item="currField">
        <list>
            <var name="ctxtNewInputs" />
        </list>
        <body>
             <script><![CDATA[
                item = (NvPair) currField.getWrappedObject();
                SetContextVar("itemName", item.name);
                SetContextVar("itemValue", item.value);
            ]]></script>
            <http-param name="${item.name}"><var name="itemValue" /></http-param>
        </body>
    </loop>
     <script><![CDATA[
        String keys="";
        for(int i=0;i<http.headers.length;i++) {
            keys+=(http.headers[i].key + "=" + http.headers[i].value +"\n---\n");
        }
        SetContextVar("myCookie", keys);
    ]]></script>
    <file action="write" path="c:/kaka.txt">
        <var name="myCookie"/>
    </file>        
</http>
</html-to-xml>
</var-def> 
```

编辑：检查时我注意到 cookie 是在 WebHarvest 中设置的，即使无法以编程方式找到 http 标头。是否有可能隐藏了某些响应标头的使用？

有谁知道这个问题的解决方法？

谢谢你和最好的问候， SiggeLund

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T16:38:45.137

将 http 标头值获取到整个配置范围内的用户定义变量的方法如下：

```
<http url="your.url.here" method="GET">
    <!--Any settings you apply for the POST/GET call-->
</http>
<!--Now you've got your http object you are going to get header value from -->
<!--At it simplest the acquisition of value goes like the below-->
<var-def name="fifth_header_val">
      <script return="http.headers[5].value"/>
</var-def> 
```

以上只是提供一个线索。您可以遍历 http.headers 索引并收集特定任务所需的键和值。

# html - 使用 Perl 提取表格内容

> ID：13037220
> 
> 赞同：1
> 
> 时间：2012-10-23T18:53:29.820
> 
> 标签：html, perl

我正在尝试使用 HTML::TableExtract 从 html 文件中提取表格内容。我的问题是我的 html 文件的结构如下：

```
<!DOCTYPE html>
<html>
<body>

    <h4>One row and three columns:</h4>

    <table border="1">
      <tr>
        <td>
        <p> 100 </p></td>
        <td>
        <p> 200 </p></td>
        <td>
        <p> 300 </p></td>
        </tr>
      <tr>
        <td>
        <p> 100 </p></td>
        <td>
        <p> 200 </p></td>
        <td>
        <p> 300 </p></td>
        </tr>
    </table>
</body>
</html> 
```

由于这种结构，我的输出看起来像：

```
 100|

   200|

   300|

   400|

   500|

   600| 
```

而不是我想要的：

```
 100|200|300|
   400|500|600| 
```

你能帮忙吗？这是我的perl代码

```
use strict;
use warnings;
use HTML::TableExtract;

my $te = HTML::TableExtract->new();
$te->parse_file('Table_One.html');

open (DATA2, ">TableOutput.txt")
    or die "Can't open file";

foreach my $ts ($te->tables()) {

    foreach my $row ($ts->rows()) {

        my $Final = join('|', @$row );
    print DATA2 "$Final";
    }
}
close (DATA2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:56:07.057

```
sub trim(_) { my ($s) = @_; $s =~ s/^\s+//; $s =~ s/\s+\z//; $s } 
```

或者在 Perl 5.14+ 中，

```
sub trim(_) { $_[0] =~ s/^\s+//r =~ s/\s+\z//r } 
```

然后使用：

```
my $Final = join '|', map trim, @$row; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:53:01.927

使用 Mojo::DOM

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::DOM;
my $dom = Mojo::DOM->new(<<'END');
<!DOCTYPE html>
<html>
<body>

    <h4>One row and three columns:</h4>

    <table border="1">
      <tr>
        <td>
        <p> 100 </p></td>
        <td>
        <p> 200 </p></td>
        <td>
        <p> 300 </p></td>
        </tr>
      <tr>
        <td>
        <p> 100 </p></td>
        <td>
        <p> 200 </p></td>
        <td>
        <p> 300 </p></td>
        </tr>
    </table>
</body>
END

my $rows = $dom->find('table tr');
$rows->each(sub{ 
  print $_->find('td p')
          ->pluck('text')
          ->join('|') . "|\n"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:59:36.123

尝试这样做：

```
use strict;
use warnings;
use HTML::TableExtract;

my $te = HTML::TableExtract->new();
$te->parse_file('Table_One.html');

open (DATA2, ">TableOutput.txt") or die "Can't open file";
foreach my $ts ($te->tables() )
{
    foreach my $row ($ts->rows() )
    {
        s/(\n|\s)//g for @$row;
        my $Final = join('|', @$row );
        print DATA2 "$Final"; 
    }
}
close (DATA2); 
```

# ruby-on-rails - 在 Rails 项目中放置约束类的位置

> ID：13037223
> 
> 赞同：19
> 
> 时间：2012-10-23T18:53:38.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, naming-conventions, ruby-on-rails-3.2, convention-over-configur

只是对 Rails 的最佳实践感到好奇，我在其中放置了一个自定义约束类，该类用作 config/routes.rb 中的约束。似乎`Rails.root/lib`是所有用户类的去处。这适合这个吗？我应该在里面为约束创建一个目录吗？现在存在 2 个空目录，`assets`并且`tasks`. 有这方面的约定吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T19:00:02.457

`lib/`将是合适的地方。如果你想让它更干净，把它放进去`lib/constraint/authenticated.rb`并像这样定义你的约束

```
module Constraint
  class Authenticated
    def matches?(request)
      # stuff
    end
  end
end 
```

在你的`routes.rb`

```
constraints Constraint::Authenticated.new do
  match 'account' => 'account#index'
end 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-23T16:47:49.943

奇怪的是，该指南没有提及该路径，但**lib/constraints**甚至列在 API 中（[ActionDispatch::Routing::Mapper::Scoping](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-constraints)）：

> 如果路由过于复杂，您可以将此逻辑移出到一个类中。这个类必须`matches?`定义一个方法，如果用户应该有权访问该路由，则返回 true，否则返回 false。
> 
> ```
> class Iphone
>   def self.matches?(request)
>     request.env["HTTP_USER_AGENT"] =~ /iPhone/
>   end
> end 
> ```
> 
> 此代码的预期位置是***lib/constraints***。

# php - Javascript calc函数运行两次的问题

> ID：13037225
> 
> 赞同：1
> 
> 时间：2012-10-23T18:53:40.273
> 
> 标签：php, javascript

我对 Javascript 相当陌生，我通常在大多数事情上使用 php，但我需要为我的网站进行动态计算，但我在弄清楚它时遇到了一些麻烦。我有一个数字表，每行最多 10 个文本输入字段，每列最多 10 个文本输入字段。我编写了一个函数来计算每行输入的数字的总数，并尝试使用相同的函数来计算列，但它没有显示。您能提供的任何帮助都会很棒。我的代码如下。

```
function calcTotal(A,B,C,D,E,F,G,H,I,J,SUM) {

  var one = Number(document.getElementById(A).value);

  var two = Number(document.getElementById(B).value);

  var three = Number(document.getElementById(C).value);

  var four = Number(document.getElementById(D).value);

  var five = Number(document.getElementById(E).value);

  var six = Number(document.getElementById(F).value);

  var seven = Number(document.getElementById(G).value);

  var eight = Number(document.getElementById(H).value);

  var nine = Number(document.getElementById(I).value);

  var ten = Number(document.getElementById(J).value);

  var ans = one + two + three + four + five + six + seven + eight + nine + ten;
  document.getElementById(SUM).innerHTML = ans;

}   

echo '<form name"score" class="form-vertical" action="" method="post">';

                echo "<table class='table table-striped table-bordered table-condensed' align='center'>";   
                echo '<tr> <th style="text-align:center; vertical-align:middle;">Roller</th> <th style="text-align:center; vertical-align:middle;">Frame 1</th> <th style="text-align:center; vertical-align:middle;">Frame 2</th> <th style="text-align:center; vertical-align:middle;">Frame 3</th> <th style="text-align:center; vertical-align:middle;">Frame 4</th> <th style="text-align:center; vertical-align:middle;">Frame 5</th> <th style="text-align:center; vertical-align:middle;">Frame 6</th> <th style="text-align:center; vertical-align:middle;">Frame 7</th> <th style="text-align:center; vertical-align:middle;">Frame 8</th> <th style="text-align:center; vertical-align:middle;">Frame 9</th> <th style="text-align:center; vertical-align:middle;">Frame 10</th><th style="text-align:center; vertical-align:middle;">Total</th></tr>';      
                 $i=1;
                while($row = mysql_fetch_assoc($sroll)) {
                echo '<tr>';
                echo '<td style="text-align:center; vertical-align:middle;">'.$row['name'].'</td>'; 
                    echo '<input type="hidden" name="'.$i.'rname" value="'.$row['name'].'"/>';
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame1" id="'.$i.'f1" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f1\',\'n2f1\',\'nf1\',\'1f1\',\'2f1\',\'3f1\',\'4f1\',\'5f1\',\'6f1\',\'7f1\',\'f1result\')"/></td>';          
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame2" id="'.$i.'f2" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f2\',\'n2f2\',\'nf2\',\'1f2\',\'2f2\',\'3f2\',\'4f2\',\'5f2\',\'6f2\',\'7f2\',\'f2result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame3" id="'.$i.'f3" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f3\',\'n2f3\',\'nf3\',\'1f3\',\'2f3\',\'3f3\',\'4f3\',\'5f3\',\'6f3\',\'7f3\',\'f3result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame4" id="'.$i.'f4" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f4\',\'n2f4\',\'nf4\',\'1f4\',\'2f4\',\'3f4\',\'4f4\',\'5f4\',\'6f4\',\'7f4\',\'f4result\')"/></td>';      
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame5" id="'.$i.'f5" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f5\',\'n2f5\',\'nf5\',\'1f5\',\'2f5\',\'3f5\',\'4f5\',\'5f5\',\'6f5\',\'7f5\',\'f5result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame6" id="'.$i.'f6" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f6\',\'n2f6\',\'nf6\',\'1f6\',\'2f6\',\'3f6\',\'4f6\',\'5f6\',\'6f6\',\'7f6\',\'f6result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame7" id="'.$i.'f7" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f7\',\'n2f7\',\'nf7\',\'1f7\',\'2f7\',\'3f7\',\'4f7\',\'5f7\',\'6f7\',\'7f7\',\'f7result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame8" id="'.$i.'f8" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f8\',\'n2f8\',\'nf8\',\'1f8\',\'2f8\',\'3f8\',\'4f8\',\'5f8\',\'6f8\',\'7f8\',\'f8result\')"/></td>';  
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame9" id="'.$i.'f9" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f9\',\'n2f9\',\'nf9\',\'1f9\',\'2f9\',\'3f9\',\'4f9\',\'5f9\',\'6f9\',\'7f9\',\'f9result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="'.$i.'Frame10" id="'.$i.'f10" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\''.$i.'f1\',\''.$i.'f2\',\''.$i.'f3\',\''.$i.'f4\',\''.$i.'f5\',\''.$i.'f6\',\''.$i.'f7\',\''.$i.'f8\',\''.$i.'f9\',\''.$i.'f10\',\''.$i.'result\'); calcTotal(\'n3f10\',\'n2f10\',\'nf10\',\'1f10\',\'2f10\',\'3f10\',\'4f10\',\'5f10\',\'6f10\',\'7f10\',\'f10result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="'.$i.'result"></div></td>';                    

                echo '</tr>';
                $i++;
                }
                echo '<tr>';
                echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newname" maxlength="30"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame1" id="nf1" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f1\',\'n2f1\',\'nf1\',\'1f1\',\'2f1\',\'3f1\',\'4f1\',\'5f1\',\'6f1\',\'7f1\',\'f1result\')"/></td>'; 
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame2" id="nf2" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f2\',\'n2f2\',\'nf2\',\'1f2\',\'2f2\',\'3f2\',\'4f2\',\'5f2\',\'6f2\',\'7f2\',\'f2result\')"/></td>'; 
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame3" id="nf3" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f3\',\'n2f3\',\'nf3\',\'1f3\',\'2f3\',\'3f3\',\'4f3\',\'5f3\',\'6f3\',\'7f3\',\'f3result\')"/></td>'; 
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame4" id="nf4" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f4\',\'n2f4\',\'nf4\',\'1f4\',\'2f4\',\'3f4\',\'4f4\',\'5f4\',\'6f4\',\'7f4\',\'f4result\')"/></td>';     
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame5" id="nf5" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f5\',\'n2f5\',\'nf5\',\'1f5\',\'2f5\',\'3f5\',\'4f5\',\'5f5\',\'6f5\',\'7f5\',\'f5result\')"/></td>'; 
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame6" id="nf6" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f6\',\'n2f6\',\'nf6\',\'1f6\',\'2f6\',\'3f6\',\'4f6\',\'5f6\',\'6f6\',\'7f6\',\'f6result\')"/></td>';     
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame7" id="nf7" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f7\',\'n2f7\',\'nf7\',\'1f7\',\'2f7\',\'3f7\',\'4f7\',\'5f7\',\'6f7\',\'7f7\',\'f7result\')"/></td>';     
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame8" id="nf8" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f8\',\'n2f8\',\'nf8\',\'1f8\',\'2f8\',\'3f8\',\'4f8\',\'5f8\',\'6f8\',\'7f8\',\'f8result\')"/></td>'; 
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame9" id="nf9" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f9\',\'n2f9\',\'nf9\',\'1f9\',\'2f9\',\'3f9\',\'4f9\',\'5f9\',\'6f9\',\'7f9\',\'f9result\')"/></td>';     
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="newFrame10" id="nf10" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'nf1\',\'nf2\',\'nf3\',\'nf4\',\'nf5\',\'nf6\',\'nf7\',\'nf8\',\'nf9\',\'nf10\',\'nresult\'); calcTotal(\'n3f10\',\'n2f10\',\'nf10\',\'1f10\',\'2f10\',\'3f10\',\'4f10\',\'5f10\',\'6f10\',\'7f10\',\'f10result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="nresult"></div></td>';

                echo '</tr>';
                echo '<tr>';
                echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2name" maxlength="30"/></td>';       
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame1" id="n2f1" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f1\',\'n2f1\',\'nf1\',\'1f1\',\'2f1\',\'3f1\',\'4f1\',\'5f1\',\'6f1\',\'7f1\',\'f1result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame2" id="n2f2" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f2\',\'n2f2\',\'nf2\',\'1f2\',\'2f2\',\'3f2\',\'4f2\',\'5f2\',\'6f2\',\'7f2\',\'f2result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame3" id="n2f3" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f3\',\'n2f3\',\'nf3\',\'1f3\',\'2f3\',\'3f3\',\'4f3\',\'5f3\',\'6f3\',\'7f3\',\'f3result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame4" id="n2f4" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f4\',\'n2f4\',\'nf4\',\'1f4\',\'2f4\',\'3f4\',\'4f4\',\'5f4\',\'6f4\',\'7f4\',\'f4result\')"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame5" id="n2f5" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f5\',\'n2f5\',\'nf5\',\'1f5\',\'2f5\',\'3f5\',\'4f5\',\'5f5\',\'6f5\',\'7f5\',\'f5result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame6" id="n2f6" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f6\',\'n2f6\',\'nf6\',\'1f6\',\'2f6\',\'3f6\',\'4f6\',\'5f6\',\'6f6\',\'7f6\',\'f6result\')"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame7" id="n2f7" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f7\',\'n2f7\',\'nf7\',\'1f7\',\'2f7\',\'3f7\',\'4f7\',\'5f7\',\'6f7\',\'7f7\',\'f7result\')"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame8" id="n2f8" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f8\',\'n2f8\',\'nf8\',\'1f8\',\'2f8\',\'3f8\',\'4f8\',\'5f8\',\'6f8\',\'7f8\',\'f8result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame9" id="n2f9" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f9\',\'n2f9\',\'nf9\',\'1f9\',\'2f9\',\'3f9\',\'4f9\',\'5f9\',\'6f9\',\'7f9\',\'f9result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new2Frame10" id="n2f10" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n2f1\',\'n2f2\',\'n2f3\',\'n2f4\',\'n2f5\',\'n2f6\',\'n2f7\',\'n2f8\',\'n2f9\',\'n2f10\',\'n2result\'); calcTotal(\'n3f10\',\'n2f10\',\'nf10\',\'1f10\',\'2f10\',\'3f10\',\'4f10\',\'5f10\',\'6f10\',\'7f10\',\'f10result\')"/></td>';
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="n2result"></div></td>';

                echo '</tr>';
                echo '<tr>';
                echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3name" maxlength="30"/></td>';       
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame1" id="n3f1" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f1\',\'n2f1\',\'nf1\',\'1f1\',\'2f1\',\'3f1\',\'4f1\',\'5f1\',\'6f1\',\'7f1\',\'f1result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame2" id="n3f2" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f2\',\'n2f2\',\'nf2\',\'1f2\',\'2f2\',\'3f2\',\'4f2\',\'5f2\',\'6f2\',\'7f2\',\'f2result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame3" id="n3f3" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f3\',\'n2f3\',\'nf3\',\'1f3\',\'2f3\',\'3f3\',\'4f3\',\'5f3\',\'6f3\',\'7f3\',\'f3result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame4" id="n3f4" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f4\',\'n2f4\',\'nf4\',\'1f4\',\'2f4\',\'3f4\',\'4f4\',\'5f4\',\'6f4\',\'7f4\',\'f4result\')"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame5" id="n3f5" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f5\',\'n2f5\',\'nf5\',\'1f5\',\'2f5\',\'3f5\',\'4f5\',\'5f5\',\'6f5\',\'7f5\',\'f5result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame6" id="n3f6" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f6\',\'n2f6\',\'nf6\',\'1f6\',\'2f6\',\'3f6\',\'4f6\',\'5f6\',\'6f6\',\'7f6\',\'f6result\')"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame7" id="n3f7" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f7\',\'n2f7\',\'nf7\',\'1f7\',\'2f7\',\'3f7\',\'4f7\',\'5f7\',\'6f7\',\'7f7\',\'f7result\')"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame8" id="n3f8" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f8\',\'n2f8\',\'nf8\',\'1f8\',\'2f8\',\'3f8\',\'4f8\',\'5f8\',\'6f8\',\'7f8\',\'f8result\')"/></td>';    
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame9" id="n3f9" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f9\',\'n2f9\',\'nf9\',\'1f9\',\'2f9\',\'3f9\',\'4f9\',\'5f9\',\'6f9\',\'7f9\',\'f9result\')"/></td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><input class="span12" type="text" name="new3Frame10" id="n3f10" maxlength="2" size="2" onkeypress="validate(event)" onChange="calcTotal(\'n3f1\',\'n3f2\',\'n3f3\',\'n3f4\',\'n3f5\',\'n3f6\',\'n3f7\',\'n3f8\',\'n3f9\',\'n3f10\',\'n3result\'); calcTotal(\'n3f10\',\'n2f10\',\'nf10\',\'1f10\',\'2f10\',\'3f10\',\'4f10\',\'5f10\',\'6f10\',\'7f10\',\'f10result\')"/></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="n3result"></div></td>';

                echo '</tr>';
                echo '<tr>';
                echo '<td style="text-align:center; vertical-align:middle;">Total</td>';        
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f1result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f2result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f3result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f4result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f5result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f6result"></div></td>';       
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f7result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f8result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f9result"></div></td>';   
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="f10result"></div></td>';  
                 echo '<td style="text-align:center; vertical-align:middle;"><div id="totalresult"></div></td>';                    

                echo '</tr>';

                 echo '</table>';
                    echo '<input class="btn btn-primary" type="submit" name="addscore" value="Add Scores with Extras"> ';
                    echo '<input class="btn btn-primary" type="submit" name="addscore2" value="Add Scores without Extras">';
                echo '</form>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:01:30.303

您需要将元素的值解析为整数：

在您的函数中执行此操作：

```
 var one = parseInt(document.getElementById(A).value), 10) || 0;
  var two = parseInt(document.getElementById(B).value, 10) || 0;
  var three = parseInt(document.getElementById(C).value, 10) || 0;
  var four = parseInt(document.getElementById(D).value, 10) || 0;
  var five = parseInt(document.getElementById(E).value, 10) || 0;
  var six = parseInt(document.getElementById(F).value, 10) || 0;
  var seven = parseInt(document.getElementById(G).value, 10) || 0;
  var eight = parseInt(document.getElementById(H).value, 10) || 0;
  var nine = parseInt(document.getElementById(I).value, 10) || 0;
  var ten = parseInt(document.getElementById(J).value, 10) || 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:54:05.290

一位朋友帮助了我，我在下面提出了解决我的问题的代码。感谢大家的帮助。

```
function calcTotal(A,B,C,D,E,F,G,H,I,J,SUM) {

  var one = parseInt(document.getElementById(A) ? document.getElementById(A).value : 0, 10) || 0;    
  var two = parseInt(document.getElementById(B) ? document.getElementById(B).value : 0, 10) || 0;    
  var three = parseInt(document.getElementById(C) ? document.getElementById(C).value : 0, 10) || 0;    
  var four = parseInt(document.getElementById(D) ? document.getElementById(D).value : 0, 10) || 0;    
  var five = parseInt(document.getElementById(E) ? document.getElementById(E).value : 0, 10) || 0;    
  var six = parseInt(document.getElementById(F) ? document.getElementById(F).value : 0, 10) || 0;    
  var seven = parseInt(document.getElementById(G) ? document.getElementById(G).value : 0, 10) || 0;    
  var eight = parseInt(document.getElementById(H) ? document.getElementById(H).value : 0, 10) || 0;    
  var nine = parseInt(document.getElementById(I) ? document.getElementById(I).value : 0, 10) || 0;    
  var ten = parseInt(document.getElementById(J) ? document.getElementById(J).value : 0, 10) || 0; 

  var ans = one + two + three + four + five + six + seven + eight + nine + ten;      
  document.getElementById(SUM).innerHTML = ans;    
} 
```

# cmake - 如何使用 shell 命令的结果初始化 CMake 变量

> ID：13037230
> 
> 赞同：91
> 
> 时间：2012-10-23T18:53:50.583
> 
> 标签：cmake

有没有办法将 CMake 脚本中的变量设置为 shell 命令的输出？`SET(FOO COMMAND "echo bar")`会想到类似的东西

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-10-23T19:26:08.950

你想要[`execute_process`](https://cmake.org/cmake/help/latest/command/execute_process.html)命令。

在您的情况下，在 Windows 上：

```
execute_process(COMMAND CMD /c echo bar OUTPUT_VARIABLE FOO) 
```

或者在 Linux 上，简单地说：

```
execute_process(COMMAND echo bar OUTPUT_VARIABLE FOO) 
```

在这种特殊情况下，CMake 提供了一个跨平台的解决方案。CMake 本身可用于运行可在所有系统上使用的命令，其中之一是`echo`. 为此，应将 CMake 传递给命令行 arg [`-E`](https://cmake.org/cmake/help/latest/manual/cmake.1.html#command-line-tool-mode)。有关此类命令的完整列表，请运行`cmake -E help`

在 CMake 脚本中，CMake 可执行文件由 引用[`${CMAKE_COMMAND}`](https://cmake.org/cmake/help/latest/variable/CMAKE_COMMAND.html)，因此脚本需要执行以下操作：

```
execute_process(COMMAND ${CMAKE_COMMAND} -E echo bar OUTPUT_VARIABLE FOO) 
```

# c# - 在属性更改时重新评估 CanExecute

> ID：13037231
> 
> 赞同：1
> 
> 时间：2012-10-23T18:53:54.797
> 
> 标签：c#, wpf, icommand

我正在尝试在自定义控件（类似于按钮）上实现 ICommandSource。目前，该实现主要是显示在 ICommandSource 的 msdn 页面上以及显示在 ButtonBase 源代码中。

CanExecute 在加载控件时触发，但在任何属性更改时不会触发。传递给常规按钮的相同命令可以正常工作。当应该更改的属性发生更改时， CanExecute 触发并启用按钮。该命令是一个委托命令。

我试过 CommandManager.InvalidateRequerySuggested(); 但这并没有奏效。

有任何想法吗？

这是自定义控件中的实现：

```
private static void OnCommandChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    CollapsibleSplitButton csb = (CollapsibleSplitButton)d;
    csb.OnCommandChanged((ICommand)e.OldValue, (ICommand)e.NewValue);
}

private void OnCommandChanged(ICommand oldCommand, ICommand newCommand)
{
    if (oldCommand != null) UnhookCommand(oldCommand);
    if (newCommand != null) HookCommand(newCommand);
}

private void UnhookCommand(ICommand command)
{
    command.CanExecuteChanged -= OnCanExecuteChanged;
    UpdateCanExecute();
}

private void HookCommand(ICommand command)
{
    command.CanExecuteChanged += OnCanExecuteChanged;
    UpdateCanExecute();
}
private void OnCanExecuteChanged(object sender, EventArgs e)
{
    UpdateCanExecute();
}

private void UpdateCanExecute()
{
    if (Command != null)
        CanExecute = Command.CanExecute(CommandParameter);
    else
        CanExecute = true;
}

protected override bool IsEnabledCore
{
    get { return base.IsEnabledCore && CanExecute; }
} 
```

我设置命令的地方：

```
...
    MyCommand = new DelegatingCommand(DoStuff, CanDoStuff);
...

private bool CanDoStuff()
{
    return (DueDate == null);
}

private void DoStuff() {//do stuff} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:31:24.200

使用`delegate`命令，`CanExecuteChanged`当您认为应该在 UI 上更新时，您必须明确提出。尝试使用此版本的命令`RelayCommand`-

```
public class RelayCommand<T> : ICommand
{
   #region Fields

   readonly Action<T> _execute = null;
   readonly Predicate<T> _canExecute = null;

   #endregion

    #region Constructors

    /// <summary>
    /// Initializes a new instance of <see cref="DelegateCommand{T}"/>.
    /// </summary>
    /// <param name="execute">Delegate to execute when Execute is called on the command.
    ///This can be null to just hook up a CanExecute delegate.</param>
    /// <remarks><seealso cref="CanExecute"/> will always return true.</remarks>
    public RelayCommand(Action<T> execute)
            : this(execute, null)
    {
    }

    /// <summary>
    /// Creates a new command.
    /// </summary>
    /// <param name="execute">The execution logic.</param>
    /// <param name="canExecute">The execution status logic.</param>
    public RelayCommand(Action<T> execute, Predicate<T> canExecute)
    {
       if (execute == null)
          throw new ArgumentNullException("execute");

       _execute = execute;
       _canExecute = canExecute;
    }

    #endregion

    #region ICommand Members

    ///<summary>
    ///Defines the method that determines whether the command can execute in its current 
    ///state.
    ///</summary>
    ///<param name="parameter">Data used by the command.  If the command does not require 
    /// data to be passed, this object can be set to null.</param>
    ///<returns>
    ///true if this command can be executed; otherwise, false.
    ///</returns>
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute((T)parameter);
    }

    ///<summary>
    ///Occurs when changes occur that affect whether or not the command should execute.
    ///</summary>
    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    ///<summary>
    ///Defines the method to be called when the command is invoked.
    ///</summary>
    ///<param name="parameter">Data used by the command. If the command does not require 
    ///data to be passed, this object can be set to <see langword="null" />.</param>
    public void Execute(object parameter)
    {
        _execute((T)parameter);
    }

    #endregion
} 
```

并在您的班级中注册类似`Delegate`的命令-

```
public ICommand TestCommand { get; private set; }
TestCommand = new RelayCommand<object>(CommandMethod, CanExecuteCommand); 
```

**编辑**

试着把`CommandManager.InvalidateRequerySuggested();`你的`CanExecute`-

```
private void OnCanExecuteChanged(object sender, EventArgs e)
{
    CommandManager.InvalidateRequerySuggested();
    UpdateCanExecute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:21:53.697

设法通过将回调包装在 EventHandler 中来解决问题。

```
private EventHandler currentHandler;

private void UnhookCommand(ICommand command)
{
    if (currentHandler != null)
        command.CanExecuteChanged -= currentHandler;
    UpdateCanExecute();
}

private void HookCommand(ICommand command)
{
    if (currentHandler == null) return;

    command.CanExecuteChanged += currentHandler;
    UpdateCanExecute();
} 
```

# google-apps-script - 如何获取在 Google 电子表格中作为函数参数传递的单元格的值？

> ID：13037234
> 
> 赞同：0
> 
> 时间：2012-10-23T18:54:11.223
> 
> 标签：google-apps-script, google-sheets

我需要创建一个函数，它应该有 2 个参数 - 单元格，然后这个函数应该获取那些已定义单元格的**值**并将其用于其他一些函数。这就是我得到的。

```
function getAddress(latitude,longitude) {

  var latitude = latitude.getValue();
  var longitude = longitude.getValue();
  var result = Maps.newGeocoder().reverseGeocode(latitude, longitude);
    var addresses = result.results[0].address_components;
  var resultText = "";

  for (var i = 0; i < addresses.length; i++){
    resultText = resultText + addresses[i].long_name + "\n\r";
  } 
```

问题是，它不起作用。如果我这样做

```
function getAddress() {

  var latitude = 49.841414;
  var longitude = 18.290973;
  var result = Maps.newGeocoder().reverseGeocode(latitude, longitude);
    var addresses = result.results[0].address_components;
  var resultText = "";

  for (var i = 0; i < addresses.length; i++){
    resultText = resultText + addresses[i].long_name + "\n\r";
  } 
```

它就像一个魅力（只是以错误的编码返回值，我的第二个问题是什么）

请问漂亮吗？我与它战斗了 3 个小时，尝试了很多其他的方法，我用谷歌搜索了，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:38:27.240

所以实际上它有效。问题是，谷歌是...... - 我有电子表格的捷克语设置，在捷克语设置中，这 =someFunction(a,b) 不起作用，你必须使用分号 =someFunction(a;b) **AAAARGH :-(**

# uitableview - UITableViewCell 仅在一个部分内选中/取消选中

> ID：13037237
> 
> 赞同：1
> 
> 时间：2012-10-23T18:54:27.823
> 
> 标签：uitableview, nsindexpath

我正在尝试设置我的表格，以便用户可以在每个部分中选择一项。

例如：

```
- Section 0
    - Row 0 √
    - Row 1
- Section 1
    - Row 0
    - Row 1 √
    - Row 2 
```

因此，在上面的示例中，如果用户选择，则应取消选中同一部分中的选中行，并且选中的行将获得复选标记`section 0, row 1`。`row 0`

第 1 部分也是如此，其中任何选定的行都应该得到一个复选标记，然后我想从同一部分中先前选择的行中删除复选标记。

```
- Section 0
    - Row 0
    - Row 1 √
- Section 1
    - Row 0
    - Row 1
    - Row 2 √ 
```

请记住，我不会有预定义的部分或行数，因此代码应该适用于这种情况。这是我目前拥有的，希望这可以让我走上正确的道路。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    MyObject *myObject = [self.fetchedResultsController objectAtIndexPath:indexPath];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    if ([myObject.optionSelected boolValue] == NO) {
        [myObject setOptionSelected:[NSNumber numberWithBool:YES]];
        [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
    } else {
        [myObject setOptionSelected:[NSNumber numberWithBool:NO]];
        [cell setAccessoryType:UITableViewCellAccessoryNone];
    }
    if ([tableView numberOfRowsInSection:indexPath.section] > 1) {
        NSMutableArray *cells = [[NSMutableArray alloc] init];
        for (NSInteger i = 0; i < [tableView numberOfRowsInSection:indexPath.section]; ++i) {
            [cells addObject:[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:indexPath.section]]];
        }
        for (UITableViewCell *deselectCell in cells) {
            if ([self.tableView indexPathForCell:deselectCell] != indexPath && deselectCell != cell) {
                MyObject *tempObject = [self.fetchedResultsController objectAtIndexPath:[self.tableView indexPathForCell:deselectCell]];
                [tempObject setOptionSelected:[NSNumber numberWithBool:NO]];
                [cell setAccessoryType:UITableViewCellAccessoryNone];
            }
        }
    }
} 
```

如您所见，我还在设置对象的选定状态，我希望它保持不变:)

感谢您提前提供任何反馈和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:52:48.573

你的 tableview 应该声明一个可变数组来保存当前选择的路径：

```
NSMutableArray *selectedCellPaths = [[NSMutableArray alloc] init]; 
```

那么你`tableView:didSelectRowAtIndexPath:`应该看起来像这样

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    MyObject *myObject = [self.fetchedResultsController objectAtIndexPath:indexPath];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    if ([myObject.optionSelected boolValue] == NO) {
        [myObject setOptionSelected:[NSNumber numberWithBool:YES]];
        [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
        [selectedCellPaths addObject:indexPath];
    } else {
        [myObject setOptionSelected:[NSNumber numberWithBool:NO]];
        [cell setAccessoryType:UITableViewCellAccessoryNone];
        if ([selectedCellPaths containsObject:indexPath]) {
            [selectedCellPaths removeObject:indexPath];
        }
    }

    // Now we're going to remove all but the cell path that is actually selected.

    NSMutableArray *cellsToRemove = [[NSMutableArray alloc] init];
    for (NSIndexPath *selectedCellIndexPath in selectedCellPaths) {
        if ([selectedCellIndexPath compare:indexPath] != NSOrderedSame && selectedCellIndexPath.section == indexPath.section) {
        // deselect cell at selectedCellPath
            [cellsToRemove addObject:selectedCellIndexPath];
        }
    }
    [selectedCellPaths removeObjectsInArray:cellsToRemove];
} 
```

请注意，我刚刚添加了一条评论，您希望在未选择的单元格路径中取消选择实际单元格。您需要自己填写该代码。

我没有测试过这段代码，只是修改了你在 TextMate 中的内容，但它应该可以工作，除非有微小的变化。

# optimization - Prolog游戏编程板评测

> ID：13037239
> 
> 赞同：1
> 
> 时间：2012-10-23T18:54:42.803
> 
> 标签：optimization, prolog

我在序言中创建了一个游戏（连续 4 个）。我的启发式函数要求我知道棋盘上每个可能的 4 行组合中有多少玩家和对手的筹码。我使用的方法如下（伪代码）：

我有 1 个列表，列出了所有可能的棋盘 (ComboList) = 的形式 ==> `[[A,B,C,D]|Rest]`。我有 1 个第一个玩家 (List1) = 形式 ==> 的所有动作的列表，`[[1],[7],[14]]` 还有 1 个用于对手动作的列表 (List2)。

步骤 1：从 ComboList 中获取第一个组合，2：检查所有 List1 以查看此组合中有多少个，3：检查所有 List2 以查看此组合中有多少个，从 ComboList 移动到下一个组合并重新开始...

这个过程需要太多的运行时间来满足需要。

请有人可以提出更好，更有效的建议！非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T12:35:06.863

下面的代码使用 member/3，它也被称为 nth1/3。看这里：

```
 http://storage.developerzen.com/fourrow.pro.txt 
```

现在可以在 library(lists) 中找到谓词，并且可能具有本机支持或快速实现：

```
 http://www.swi-prolog.org/pldoc/man?predicate=nth1/3 
```

但我想断言一些事实并依靠参数索引可能会让你得到更好的结果。例如，请参见此处：

```
 http://www.mxro.de/applications/four-in-a-row 
```

希望这可以帮助。

再见

# java - OSGi 插件 - MANIFEST.MF 在运行时被覆盖更改

> ID：13037241
> 
> 赞同：0
> 
> 时间：2012-10-23T18:54:51.460
> 
> 标签：java, plugins, osgi, manifest.mf

你们知道是否有某种方法可以在加载插件时以编程方式更改 MANISFEST.MF 设置？如果我可以在 Activator 启动方法上做到这一点，那对我来说将是完美的。

例如：

我有一个plugin1，它依赖于它的MANIFEST.MF到plugin2（Require-Bundle：plugin2;bundle-version =“1.0.0”）>想要做的改变是在之前设置重新导出这种依赖（可见性：=重新导出) 加载插件 1。

任何建议

## 提前致谢

拉斐尔·莫伊塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:06:10.583

您无法更改清单。清单包含解析捆绑包所需的声明性信息，并为它提供一个对必要类型具有可见性的类加载器。您的激活器类由该类加载器加载。你怎么能期望加载类加载器的类改变类加载器可见的类的定义？

为什么不在安装包之前修改清单？

# ruby-on-rails - Rails：为什么我的会话没有被破坏（即使在我重新启动我的 comp 之后！）？

> ID：13037242
> 
> 赞同：1
> 
> 时间：2012-10-23T18:54:58.837
> 
> 标签：ruby-on-rails

我的会议工作得很好，花花公子，然后我

1.  创造了“还记得我吗？” 登录复选框
2.  尝试添加邮件进行注册
3.  创建了一个新用户来查看我的邮件程序是否正常工作

现在，当我尝试注销时，即使我重新启动计算机，它也不会让我注销！我怎么知道我的导航栏有登录条件，所以如果你没有登录，你会看到登录链接。我什至尝试删除 cookie，但每次刷新页面时它都会重新出现。

用户#创建

```
def create
  @user = User.new(params[:user])

  respond_to do |format|
    if @user.save
      UserMailer.registration_confirmation(@user).deliver
      sign_in(@user)
      format.html { redirect_to @user, notice: 'User successfully created.' }
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: 'new' }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

导航栏

```
 <nav class="clearfix">
        <% if !signed_in? %>
            <%= link_to "home", root_url %>
        <% else %>
            <%= link_to "my profile", current_user %>
            <%= link_to "edit profile", edit_user_path(current_user) %>
            <%= link_to "friends", user_friends_path(current_user) %>
        <% end %>

        <div class="rightnav">
        <% if signed_in? %>
            <%= link_to "active users", users_path %>
            <%= link_to "log out", signout_path, method: "delete", :id =>"logoutlink" %>
        <% else %>
            <%= link_to "sign up", new_user_path, :id => "signuplink" %>
            <!-- <a href="#" id="signuplink">Sign Up</a> -->
            <%= link_to "log in", signin_path, :id => "loginlink" %>
            <!-- <a href="#" id="loginlink">Log In</a> -->
        <% end %>
        </div>
    </nav> 
```

会话控制器

```
class SessionsController < ApplicationController

def new
end

def create
    user = User.find_by_email(params[:session][:email])
    if user && (!params[:session][:email].blank?) && user.authenticate(params[:session][:password])
    # if params[:remember_me]
    #   cookies.permanent[:remember_token] = user.remember_token
    # else
    #   cookies[:remember_token] = user.remember_token
    # end
      sign_in user
      redirect_to user_path(user)
    else
      flash.now[:error] = "Invalid email and/or password."
      render 'new'
    end
end

def destroy
    sign_out
    redirect_to root_url
end 
```

结尾

会话助手

```
module SessionsHelper

def sign_in(user)
    self.current_user = user
end

def signed_in?
    !current_user.nil?
end

def sign_out
  self.current_user = nil
  cookies.delete(:remember_token)
end

def current_user=(user)
    @current_user = user
end

def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

结尾

如果您需要任何其他文件，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:59:14.107

我最终想通了。我刚变

`cookies.delete(:remember_token)`

到

`cookies[:remember_token] = nil`

# php - SyntaxHighlighter BBCode PHP

> ID：13037243
> 
> 赞同：1
> 
> 时间：2012-10-23T18:55:06.027
> 
> 标签：php, regex, syntax-highlighting, bbcode

我在创建用于[SyntaxHighlighter的 BBCode 时遇到了一些问题](http://alexgorbatchev.com/SyntaxHighlighter/)

```
function bb_parse_code($str) {
    while (preg_match_all('`\[(code)=?(.*?)\]([\s\S]*)\[/code\]`', $str, $matches)) foreach ($matches[0] as $key => $match) {
        list($tag, $param, $innertext) = array($matches[1][$key], $matches[2][$key], $matches[3][$key]); 
        switch ($tag) {
            case 'code': $replacement = '<pre class="brush: '.$param.'">'.str_replace("    ", " ", str_replace(array("<br>", "<br />"), "\n", $innertext))."</pre>"; break;

        }
        $str = str_replace($match, $replacement, $str);
    }
    return $str;
} 
```

我有bbcode：

```
[b]bold[/b]
[u]underlined[/u]
[code=js]function (lol) {
alert(lol);
}[/code]
[b]bold2[/b]
[code=php]
<? echo 'lol' ?>
[/code] 
```

这会返回： ![BB码](../Images/55967ba4ab1e92c9728ea0f09c5281b1.png)

我知道问题出`([\s\S]*)`在允许任何字符的正则表达式上，但是如何使代码与换行符一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:04:58.823

您应该使用以下模式：

```
`\[(code)=?(.*?)\](.*?)\[/code\]`s 
```

几个变化：

*   切换到`.*?`使[量词惰性](http://www.php.net/manual/en/regexp.reference.repetition.php)。
*   最后的`s`修饰符，这也导致`.`匹配[新行](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)。

# c# - HttpWebRequest 自动发送所需的 HttpRequests

> ID：13037244
> 
> 赞同：2
> 
> 时间：2012-10-23T18:55:07.997
> 
> 标签：c#, httpwebrequest

我正在使用 HTTPWebRequest 来模拟登录网站的 POST 请求。但是当使用 firebug 来跟踪浏览器在登录期间所做的事情时，我发现它在登录后会发出一些 GetRequests。

所以我正在寻找的是如何让我的 POST 请求自动执行 GET 请求？

有人告诉我使用 JS 函数，但我对此一无所知。

```
private static async Task<byte[]> LoginAsync(string username, string password)
{
    var postData = new NameValueCollection();

    var uri = new Uri(string.Format("http://{0}/", ServerName));

    postData.Add("name", username);
    postData.Add("password", password);
    postData.Add("login", ParseLoginId(await GetPage("login.php")));

    return await HttpHandler.UploadValuesTaskAsync(uri, postData);
} 
```

我的 HTTP 处理程序

```
private CookieContainer _mContainer = new CookieContainer();

protected override WebRequest GetWebRequest(Uri address)
{
    var request = base.GetWebRequest(address);
    if (request is HttpWebRequest)
    {
        (request as HttpWebRequest).CookieContainer = _mContainer;
    }
    return request;
}

public void ClearCookies()
{
    _mContainer = new CookieContainer();
} 
```

我正在使用上面的代码发送 POST 请求，但问题是它并不能完全模拟浏览器的操作......所以它不会在登录后自动发送所需的 GET 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:00:28.153

前面的 GET 请求很可能是 Location 标头重定向。

为什么不使用 System.Net.WebClient 类。 [C# 控制台/服务器访问网站](https://stackoverflow.com/questions/9888809/c-sharp-console-server-access-to-web-site) 该链接向您展示了如何扩展 WebClient 以保留 cookie 信息。

# ruby-on-rails - 由于中间件故障，Resque 工作人员无法启动

> ID：13037249
> 
> 赞同：1
> 
> 时间：2012-10-23T18:55:18.647
> 
> 标签：ruby-on-rails, ruby, resque, worker

我在本地和服务器上安装了救援 1.22.0。为了能够捕获 MultiJson::DecodeErrors，我在 application.rb 中添加了以下内容：

```
config.middleware.swap ActionDispatch::ParamsParser, ::MyParamsParser 
```

并将该类添加到我的 lib 文件夹中。在开发模式下，这工作正常，我可以从 DecodeErrors 中拯救出来，我可以使用以下方法启动一个工作人员：

```
QUEUE=* bundle exec rake environment resque:work 
```

在我的服务器上的生产模式下，代码本身也可以正常工作，但是我的上帝进程无法再次启动工人。God启动worker后出现的错误：

```
QUEUE=* /usr/local/rvm/rubies/ruby-1.9.2-p320/bin/ruby /usr/local/rvm/gems/ruby-1.9.2-p320@global/bin/bundle exec rake -f /home/deployer/apps/kassomat/current/Rakefile environment resque:work
rake aborted!
No such middleware to insert before: ActionDispatch::ParamsParser 
```

我试图修补我的 application.rb

```
config.middleware.swap ActionDispatch::ParamsParser, ::MyParamsParser if Object.const_defined?('ActionDispatch') && ActionDispatch.const_defined?('ParamsParser') 
```

但这没有成功。我不明白为什么这在开发中有效但在生产中失败。

任何人都可以帮忙吗？

问候菲利克斯

# iphone - 使用正则表达式在 Xcode 中查找和替换

> ID：13037255
> 
> 赞同：0
> 
> 时间：2012-10-23T18:55:49.467
> 
> 标签：iphone, ios, xcode, cocoa-touch

我想知道，有没有一种方法可以搜索所有包含单词“pPath”的单词，并在 Xcode 中将它们替换为“mutablePath”。例如，在某些情况下可能存在 pPath_0 或 pPath_50，我只想将它们全部替换为“mutablePath”。如果可能的话，我可以为此使用正则表达式吗？

编辑#1：我的意思是用 mutablePath 实际替换整个单词 pPath_50 或（其中包含 pPath 的任何单词）。进行简单的查找和替换只会将单词“pPath”替换为“mutablePath”。

编辑＃2：我发现如果您单击搜索栏旁边的放大镜，然后单击“显示查找选项”，您可以从下拉菜单中选择“正则表达式”并使用它来搜索常规表达。我假设用于此的正则表达式语言对其他事物是通用的，有人知道正则表达式是什么来搜索任何以 pPath 开头的单词吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:38:34.080

我发现您实际上可以在 Xcode 4.3 中的查找和替换中使用正则表达式。只需单击搜索框（或您在文本中输入要搜索的区域）旁边的放大镜。选择“显示查找选项”，然后在“样式”下选择“正则表达式”。我对正则表达式不太熟悉，但我相信它使用的语法类似于许多其他实现它们的模块。例如，我能够使用“pPath_\w*”解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:59:48.417

是 - 转到搜索导航器（左窗格） - 单击“查找”下拉菜单，您将看到替换。

# apache - .htaccess 重定向到 https

> ID：13037266
> 
> 赞同：1
> 
> 时间：2012-10-23T18:56:26.140
> 
> 标签：apache, ssl

> **可能重复：**
> [htaccess，将所有请求重定向到 https://](https://stackoverflow.com/questions/9912655/htaccess-redirect-all-requests-to-https)

我在我的域上安装了 ssl，但仍然所有的 url 都是 http 而不是 https。我使用了一些 mod_rewrite 选项，例如：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

但这也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:59:24.717

尝试这个：

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://yourdomain.com/$1 [R,L] 
```

# php - bcrypt 中加盐的要点

> ID：13037271
> 
> 赞同：4
> 
> 时间：2012-10-23T18:56:33.327
> 
> 标签：php, bcrypt

抱歉，如果这是一个愚蠢的问题，我只想知道：bcrypt 中的盐有什么意义？我的意思是，如果您有以下代码用于从密码创建哈希：

```
function generateSalt() {
$salt = '$2a$13$';
$salt = $salt . '1111111111111111111111';
return $salt;
}

function generateHash($salt, $password) {
$hash = crypt($password, $salt);

return $hash;
}

$salt = generateSalt();

$providedPassword = generateHash($salt, rand(3,29));

echo $providedPassword; 
```

上面的输出例如：

$2a$13$111111111111111111111uDdpsIcwCVOwEyNueskskXkniY5206fW

$2a$13$111111111111111111111udcvrNt9quPukFRl8./jXRzDGfE9lw0W

所以你可以清楚地看到盐在哪里结束，如果有人得到了数据库，盐就没有意义了，因为他们可以删除盐部分并只搜索散列密码。那么，我使用 bcrypt 错了吗？（静态盐只是为了显示它出现在我的散列中的位置），还是有这个原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:11:21.990

[salt](https://en.wikipedia.org/wiki/Salt_%28cryptography%29)背后的想法是，即使两个输入相同，只要每次使用不同的 salt，哈希值也不会相同。

例如，许多用户选择相同的密码。如果您只存储密码的哈希值，数据库将包含许多相同的哈希值 - 因此，如果攻击者只找到一次密码，他就可以轻松地将其用于所有这些用户。但是，如果密码对每个用户使用不同的盐值进行哈希处理，攻击者将不得不破解存储在存储中的每个哈希值。

我不确定您正在使用的代码是什么（那个函数是什么？），但是**只要哈希本身也是使用 salt 计算的**`crypt`，它可以将 salt 值添加到实际哈希值之前。无论如何，您都需要存储原始盐以验证新输入（密码）是否与存储的哈希匹配。但是，只要您在每次哈希使用之间更改盐值，就没有简单的方法来收集有关原始输入的信息。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:02:56.530

对散列进行加盐是一种增强散列以抵御可能允许散列反转为其原始值的攻击的方法，同时散列在主机之间在线发送。在这种情况下，窃听者可以捕获散列，但在不知道盐值的情况下，无论采用何种技术，都永远无法反转散列。**

# database - 比较相似的单词和短语

> ID：13037278
> 
> 赞同：0
> 
> 时间：2012-10-23T18:57:09.230
> 
> 标签：database, algorithm

我在excel中有2个数据库。在数据库 A 中，我有各种公司、城市和慈善机构的名称。数据库 B 也是一样。但是数据库 B 是由客户填写的。因此，我得到了很多随机错误和/或合法名称的变化。

匹配名称的最佳方法是什么？

以下是一些示例差异：

1.  ABC 市可能会显示为 ABC 市公司
2.  ABC Corporation 可能只是作为 ABCcorporation（他们忘记了一个空格）
3.  ABC大学可以简称为Univ of ABC
4.  Canadian Tire 可能会显示为 Canadian Tire Store #503
5.  加拿大轮胎可能像加拿大轮胎一样拼写错误
6.  ABC Corp 可能会显示为 ABC Inc

有没有好的解决方案？我知道这个问题有点远，但如果我能做到这一点，我每年都会为我公司的员工节省数千小时......

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:31:56.723

这是一个非常复杂的问题。查找“主数据管理”和“重复数据删除”。[这篇维基百科文章](http://en.wikipedia.org/wiki/Record_linkage)是一个很好的起点。

这个问题最好分小块解决。我的建议是阅读一些内容并实现一个列出潜在重复项的工具以及一些合并它们的简单方法。这里的关键词是潜力；你不想做错误的合并，误报很可能而且非常有害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:02:57.710

您可以使用正则表达式来过滤这些数据库。

[http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

[http://www.zytrax.com/tech/web/regex.htm](http://www.zytrax.com/tech/web/regex.htm)

您可以根据公司名称的相关部分进行程序模式匹配。例如，如果有人输入 Microsoft Corporation of Redmond，并且您的程序模式与“Microsoft”匹配，那么您将获得成功。

# java - 在黑莓中获取无线电流的元数据时 TCP 超时

> ID：13037279
> 
> 赞同：1
> 
> 时间：2012-10-23T18:57:20.320
> 
> 标签：java, blackberry, timeout

我正在创建一个 Radio 应用程序，它将从各种不同的 URL 流式传输。

现在，在从 url 获取流的同时，我们还想要在即元数据上播放的歌曲的内容。

现在为此，我在 TimerTask 中运行另一个线程，该线程将创建 HTTP 连接，例如每 40 秒后。

在使用 OS 5 及更高版本的模拟器时没有问题，但是当我运行相同的线程进行两到三次迭代时，元数据会始终如一地收到，但之后我们得到 TCP 超时异常，这会停止整个系统和设备甚至丢失互联网连接。

您能否建议任何可以解决问题的替代方案。

我还分享了将从流 URL 获取元数据的代码。

```
class metaData extends Thread {
    public void run() {
        try {
            boolean metaDataCheckBit = false;

            StreamConnection streamConnection = (StreamConnection)Connector.open(url);
            HttpConnection httpConnection = (HttpConnection)streamConnection;
            httpConnection.setRequestProperty("Icy-metadata", "1");
            int httpStatus = httpConnection.getResponseCode();

            if (httpStatus==HttpConnection.HTTP_OK) {
                String mint = httpConnection.getHeaderField("icy-metaint");
                InputStream inputStream = streamConnection.openInputStream();
                int length = Integer.parseInt(mint);
                int b = 0;
                int count = 0;
                while(count++ < length){
                    b = inputStream.read();
                }
                int metalength = ((int)b)*16;

                if (metalength <= 0) return;

                byte buf[] = new byte[metalength];
                inputStream.read(buf,0,buf.length);
                final String metaData = new String(buf);
                final String streamTille = 
                    metaData.substring(14, metaData.indexOf("StreamUrl")-2);
                System.out.println("Stream Title--------"+streamTille);

                UiApplication.getUiApplication().invokeAndWait(new Runnable(){
                    public void run() {
                        try {
                            titleRf.setText(streamTille);
                        } catch (Exception e) {
                            System.out.println("Exception: " + e.toString());
                        }
                    }
                });
            }
        } catch (Exception e){
            System.out.println("Exception in meta data...."+e);
        }
    }
} 
```

# android - 尝试连接 Web 服务时出错

> ID：13037281
> 
> 赞同：0
> 
> 时间：2012-10-23T18:57:22.893
> 
> 标签：android, web-services

我尝试从我的 android 程序连接到我的 C# WebService。

当我通过模拟器连接时，它的工作非常出色。

但是当我通过电话连接时出现错误。

我禁用了防火墙，并从手机的浏览器中看到了网络服务。

我得到的错误：

```
10-23 20:02:14.697: W/System.err(25237): android.os.NetworkOnMainThreadException
10-23 20:02:14.697: W/System.err(25237):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-23 20:02:14.697: W/System.err(25237):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-23 20:02:14.697: W/System.err(25237):    at libcore.io.IoBridge.connectErrno(IoBridge.java:138)
10-23 20:02:14.697: W/System.err(25237):    at libcore.io.IoBridge.connect(IoBridge.java:112)
10-23 20:02:14.697: W/System.err(25237):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-23 20:02:14.702: W/System.err(25237):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-23 20:02:14.702: W/System.err(25237):    at java.net.Socket.connect(Socket.java:842)
10-23 20:02:14.702: W/System.err(25237):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
10-23 20:02:14.702: W/System.err(25237):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-23 20:02:14.702: W/System.err(25237):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
10-23 20:02:14.702: W/System.err(25237):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
10-23 20:02:14.702: W/System.err(25237):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-23 20:02:14.702: W/System.err(25237):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
10-23 20:02:14.707: W/System.err(25237):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
10-23 20:02:14.707: W/System.err(25237):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
10-23 20:02:14.707: W/System.err(25237):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
10-23 20:02:14.707: W/System.err(25237):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
10-23 20:02:14.707: W/System.err(25237):    at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
10-23 20:02:14.707: W/System.err(25237):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:153)
10-23 20:02:14.707: W/System.err(25237):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
10-23 20:02:14.707: W/System.err(25237):    at com.example.eitanws_exmp.WS.HelloWorld(WS.java:198)
10-23 20:02:14.707: W/System.err(25237):    at com.example.eitanws_exmp.MainActivity.GetArray_Click(MainActivity.java:53)
10-23 20:02:14.712: W/System.err(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.712: W/System.err(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.712: W/System.err(25237):    at android.view.View$1.onClick(View.java:3064)
10-23 20:02:14.712: W/System.err(25237):    at android.view.View.performClick(View.java:3591)
10-23 20:02:14.712: W/System.err(25237):    at android.view.View$PerformClick.run(View.java:14263)
10-23 20:02:14.712: W/System.err(25237):    at android.os.Handler.handleCallback(Handler.java:605)
10-23 20:02:14.712: W/System.err(25237):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-23 20:02:14.712: W/System.err(25237):    at android.os.Looper.loop(Looper.java:137)
10-23 20:02:14.717: W/System.err(25237):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-23 20:02:14.717: W/System.err(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.717: W/System.err(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.717: W/System.err(25237):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-23 20:02:14.717: W/System.err(25237):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-23 20:02:14.717: W/System.err(25237):    at dalvik.system.NativeStart.main(Native Method)
10-23 20:02:14.722: W/System.err(25237): android.os.NetworkOnMainThreadException
10-23 20:02:14.727: W/System.err(25237):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-23 20:02:14.727: W/System.err(25237):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-23 20:02:14.727: W/System.err(25237):    at libcore.io.IoBridge.connectErrno(IoBridge.java:138)
10-23 20:02:14.727: W/System.err(25237):    at libcore.io.IoBridge.connect(IoBridge.java:112)
10-23 20:02:14.727: W/System.err(25237):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-23 20:02:14.727: W/System.err(25237):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-23 20:02:14.732: W/System.err(25237):    at java.net.Socket.connect(Socket.java:842)
10-23 20:02:14.732: W/System.err(25237):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
10-23 20:02:14.732: W/System.err(25237):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-23 20:02:14.732: W/System.err(25237):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
10-23 20:02:14.732: W/System.err(25237):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
10-23 20:02:14.732: W/System.err(25237):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-23 20:02:14.737: W/System.err(25237):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
10-23 20:02:14.737: W/System.err(25237):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
10-23 20:02:14.737: W/System.err(25237):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
10-23 20:02:14.737: W/System.err(25237):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
10-23 20:02:14.737: W/System.err(25237):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
10-23 20:02:14.737: W/System.err(25237):    at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
10-23 20:02:14.737: W/System.err(25237):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:153)
10-23 20:02:14.737: W/System.err(25237):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
10-23 20:02:14.737: W/System.err(25237):    at com.example.eitanws_exmp.WS.WebServiceCallExampleGetArray(WS.java:88)
10-23 20:02:14.737: W/System.err(25237):    at com.example.eitanws_exmp.MainActivity.GetArray_Click(MainActivity.java:54)
10-23 20:02:14.742: W/System.err(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.747: W/System.err(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.752: W/System.err(25237):    at android.view.View$1.onClick(View.java:3064)
10-23 20:02:14.752: W/System.err(25237):    at android.view.View.performClick(View.java:3591)
10-23 20:02:14.752: W/System.err(25237):    at android.view.View$PerformClick.run(View.java:14263)
10-23 20:02:14.752: W/System.err(25237):    at android.os.Handler.handleCallback(Handler.java:605)
10-23 20:02:14.752: W/System.err(25237):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-23 20:02:14.752: W/System.err(25237):    at android.os.Looper.loop(Looper.java:137)
10-23 20:02:14.752: W/System.err(25237):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-23 20:02:14.752: W/System.err(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.752: W/System.err(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.752: W/System.err(25237):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-23 20:02:14.752: W/System.err(25237):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-23 20:02:14.757: W/System.err(25237):    at dalvik.system.NativeStart.main(Native Method)
10-23 20:02:14.757: W/System.err(25237): android.os.NetworkOnMainThreadException
10-23 20:02:14.762: W/System.err(25237):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-23 20:02:14.762: W/System.err(25237):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-23 20:02:14.762: W/System.err(25237):    at libcore.io.IoBridge.connectErrno(IoBridge.java:138)
10-23 20:02:14.762: W/System.err(25237):    at libcore.io.IoBridge.connect(IoBridge.java:112)
10-23 20:02:14.762: W/System.err(25237):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-23 20:02:14.762: W/System.err(25237):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-23 20:02:14.762: W/System.err(25237):    at java.net.Socket.connect(Socket.java:842)
10-23 20:02:14.762: W/System.err(25237):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
10-23 20:02:14.762: W/System.err(25237):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-23 20:02:14.762: W/System.err(25237):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
10-23 20:02:14.762: W/System.err(25237):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
10-23 20:02:14.762: W/System.err(25237):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-23 20:02:14.762: W/System.err(25237):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
10-23 20:02:14.767: W/System.err(25237):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
10-23 20:02:14.767: W/System.err(25237):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
10-23 20:02:14.767: W/System.err(25237):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
10-23 20:02:14.767: W/System.err(25237):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
10-23 20:02:14.767: W/System.err(25237):    at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
10-23 20:02:14.767: W/System.err(25237):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:153)
10-23 20:02:14.767: W/System.err(25237):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
10-23 20:02:14.767: W/System.err(25237):    at com.example.eitanws_exmp.WS.WebServiceCallExampleGetArray(WS.java:88)
10-23 20:02:14.767: W/System.err(25237):    at com.example.eitanws_exmp.MainActivity.GetArray_Click(MainActivity.java:56)
10-23 20:02:14.767: W/System.err(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.767: W/System.err(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.767: W/System.err(25237):    at android.view.View$1.onClick(View.java:3064)
10-23 20:02:14.767: W/System.err(25237):    at android.view.View.performClick(View.java:3591)
10-23 20:02:14.767: W/System.err(25237):    at android.view.View$PerformClick.run(View.java:14263)
10-23 20:02:14.772: W/System.err(25237):    at android.os.Handler.handleCallback(Handler.java:605)
10-23 20:02:14.772: W/System.err(25237):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-23 20:02:14.772: W/System.err(25237):    at android.os.Looper.loop(Looper.java:137)
10-23 20:02:14.772: W/System.err(25237):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-23 20:02:14.772: W/System.err(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.772: W/System.err(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.772: W/System.err(25237):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-23 20:02:14.772: W/System.err(25237):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-23 20:02:14.772: W/System.err(25237):    at dalvik.system.NativeStart.main(Native Method)
10-23 20:02:14.772: D/AndroidRuntime(25237): Shutting down VM
10-23 20:02:14.772: W/dalvikvm(25237): threadid=1: thread exiting with uncaught exception (group=0x40c511f8)
10-23 20:02:14.782: E/AndroidRuntime(25237): FATAL EXCEPTION: main
10-23 20:02:14.782: E/AndroidRuntime(25237): java.lang.IllegalStateException: Could not execute method of the activity
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.view.View$1.onClick(View.java:3069)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.view.View.performClick(View.java:3591)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.view.View$PerformClick.run(View.java:14263)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.os.Handler.handleCallback(Handler.java:605)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.os.Looper.loop(Looper.java:137)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at dalvik.system.NativeStart.main(Native Method)
10-23 20:02:14.782: E/AndroidRuntime(25237): Caused by: java.lang.reflect.InvocationTargetException
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at android.view.View$1.onClick(View.java:3064)
10-23 20:02:14.782: E/AndroidRuntime(25237):    ... 11 more
10-23 20:02:14.782: E/AndroidRuntime(25237): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 4, size is 0
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.util.ArrayList.get(ArrayList.java:304)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at com.example.eitanws_exmp.MainActivity.GetArray_Click(MainActivity.java:56)
10-23 20:02:14.782: E/AndroidRuntime(25237):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:24:42.733

```
Caused by: java.lang.IndexOutOfBoundsException: **Invalid index 4, size is 0**
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at java.util.ArrayList.get(ArrayList.java:304)
10-23 20:02:14.782: E/AndroidRuntime(25237):    at com.example.eitanws_exmp.MainActivity.GetArray_Click(**MainActivity.java:56)** 
```

尝试使用数组时，该应用程序似乎超出了范围。看：**无效的索引4，大小为0** 你在应用程序中使用任何数组吗？尝试调试这一行及其周围：**MainActivity.java:56** - 似乎应用程序试图访问一个空数组。

**更新**

关于 NetworkOnMainThreadException

“当应用程序尝试在其主线程上执行网络操作时引发的异常。”

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

你的 SDK 版本是多少？

# asp.net-mvc - 传递 linq 查询以查看

> ID：13037282
> 
> 赞同：6
> 
> 时间：2012-10-23T18:57:23.593
> 
> 标签：asp.net-mvc

我做了一个 linq 查询，我想将它传递给视图，但它给了我这个错误

```
The model item passed into the dictionary is of type 'System.Data.Entity.Infrastructure.DbQuery`1[<>f__AnonymousType4`2[System.String,System.String]]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1 
```

我的视图模型

```
 public class ManageScoreViewModel
     {
         public string fullName { get; set; }
         public string teamName { get; set; }
     } 
```

控制器

```
 public ActionResult Index()
        {
            MyteamViewModel ms = new MyteamViewModel ();
            var vm = (from u in db.Users
                     join tm in db.Team_Members
                     on u.user_id equals tm.user_id
                     join t in db.Teams
                     on tm.team_id equals t.team_id
                     orderby t.name
                     select new { fullName = u.firstName + u.lastName, teamName = t.name });
          //  var vmlist = vm.ToList();

            return View(vm);
        } 
```

视图类型为 IEnumerable

```
@model IEnumerable<CTA2._0.ViewModels.ManageScoreViewModel>
@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.fullName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.teamName)
        </td> 
```

我尝试将查询转换为列表（var vmlist = vm.ToList();）。没用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T19:01:31.507

您的视图是强类型`ManageScoreViewModel`集合，但您的 linq 查询使用投影返回匿名对象。您需要返回一个`ManageScoreViewModel`对象列表。您还可以`ToList()`在 linq 表达式上应用方法

改变

```
select new { fullName = u.firstName + u.lastName, teamName = t.name }); 
```

到

```
select new ManageScoreViewModel { fullName = u.firstName + u.lastName,
                                                  teamName = t.name }).ToList(); 
```

# jquery - jQuery find() 函数当前元素

> ID：13037284
> 
> 赞同：4
> 
> 时间：2012-10-23T18:57:32.007
> 
> 标签：jquery

我正在尝试将字符串从名称属性移动到每个 img 的 src。我正在使用 jQuery 来执行此操作：

```
$("#one").find("img").attr("src",$(this).attr("name"); 
```

现在的问题是 $(this) 不是当前被操纵的元素。那么如何获取 find() 找到的当前元素呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T18:58:33.427

`attr`方法接受一个函数，在这个函数的上下文中，`this`指的是当前元素：

```
$("#one").find("img").attr("src", function(){
    return this.name
}); 
```

# excel - 为 Excel 设置 VBA 宏以通过从多行中获取变量来运行一系列线性方程？

> ID：13037286
> 
> 赞同：1
> 
> 时间：2012-10-23T18:57:46.717
> 
> 标签：excel, vba, equation-solving, equations

我有一组方程，我想重复这些方程，从下一行向下为每个变量所在的每一列取变量。我是初学者，所以我的编码可能不会从头开始：

```
Sub Iteration()

Dim al, ab, ae As Double
Dim as1, as2 As Double 
'etc

as1 = Range("CG7")
as2 = Range("CG8")
aA1 = Range("BQ7")
'etc

intCounter = 0
For intCounter = 1 To 10000

  Let x = ((aN1 * 1000) - (as1 * aA1) + (as2 * aA2)) / (al * fc * ae * ab)

  Let x2 = ((aN12 * 1000) - (as12 * aA12) + (as22 * aA22)) / (al2 * fc2 * ae2 * ab2)

Next

 Sheets("Sheet1").Range("CJ7").Value = x

End Sub 
```

我已经为几个变量完成了此操作，这些变量已设置为相对于每个变量值的范围。然后对于下一行，我不得不重做整个方程并再次为下一行设置变量。有什么方法可以设置变量（可能带有相对单元格引用？），这些变量将跳到下一行中的单元格进行下一次计算？还要考虑有 36 行用于计算和大约 9 个变量！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:06:43.260

如果我理解正确的话，这样的事情怎么样：

```
Sub Iteration()

Dim al, ab, ae As Double
Dim as1, as2 As Double 
'etc

intCounter = 0
For intCounter = 0 To 10000

    as1 = Range("CG7").Offset(intCounter)
    as2 = Range("CG8").Offset(intCounter)
    aA1 = Range("BQ7").Offset(intCounter)
   'etc

  Let x = ((aN1 * 1000) - (as1 * aA1) + (as2 * aA2)) / (al * fc * ae * ab)

  Let x2 = ((aN12 * 1000) - (as12 * aA12) + (as22 * aA22)) / (al2 * fc2 * ae2 * ab2)

Next

 Sheets("Sheet1").Range("CJ7").Value = x

End Sub 
```

# android - 在显示之前在后台加载一个活动

> ID：13037287
> 
> 赞同：9
> 
> 时间：2012-10-23T18:57:59.007
> 
> 标签：android

是否可以在将视图切换到该活动之前在后台加载新活动？

例如，我想要一个斜线屏幕活动，它被调用并显示一个启动屏幕。在显示此初始屏幕时，会加载下一个活动，当它完成加载时（当它的 onCreate() 完成时），初始屏幕活动结束，并显示新活动。

我知道另一种选择是在新活动中显示启动画面，并在删除启动图像之前使用异步任务加载所有数据......但我也坚持这种方法。该活动首先必须加载大量数据，然后必须根据该数据动态添加 GUI 元素。完全加载 GUI 后，我想删除启动画面。问题是我无法从 doInBackground() 触摸 UI 线程。如果我无法从 doInBackground 更新 UI，如何在初始屏幕后面创建我的活动？我知道 onProgressUpdate() 可以访问 UI 线程，但我不知道如何实现它。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:29:07.087

由于您没有代码示例，因此我不确定您正在加载哪种数据以及如何根据数据动态配置 UI，但我会尽可能多地回答。因此，答案可能听起来有点笼统。

首先，定义 2 个布局 xml 文件 - 一个用于启动屏幕，一个用于“主要”活动。所以你最终会得到 /res/layout/splash_screen.xml 和 /res/layout/main.xml

在您的 onCreate() 中，加载 splash_screen 布局：

```
setContentView(R.layout.splash_screen); 
```

在您的异步任务中，您将加载需要执行的任何数据，并将所有这些数据保存在某种数据结构中。例如，我将使用 String 的 LinkedList。

```
private class MyTask extends AsyncTask<Uri, Integer, List<String>> {

    @Override
    protected List<String> doInBackground(Uri... params) {
        List<String> myList = new LinkedList<String>();
        // load up the list with data you are trying to get
        myList.add("foo");
        myList.add("bar");
        // whatever you return here will be passed in as a parameter to the onPostExecute()
        return myList;
    }

    @Override
    protected void onPostExecute(List<String> result) {
        setContentView(R.layout.main2);
        // set layout elements with data that from the result
        TextView myTextView = (TextView) findViewById(R.id.some_label);
        myTextView.setText(result.get(0));
        // or just call some function you defined in your activity instead
    }
} 
```

因此，基本上，有 2 个不同的布局文件并使用 splash_screen 布局，并使用异步任务加载数据并将其保存在您定义的某些数据结构中，并在使用 setContentView 后使用该数据结构在 onPostExecute() 中加载您的 UI 元素() 更改回您的主布局。

特别注意：使用上面的代码，如果您旋转屏幕，它将再次显示启动屏幕并重新加载所有数据。如果您想避免这种情况，您可以使用 onSaveInstanceState() 并在 outBundle 中保存您想要的任何数据，然后在 onCreate 的 savedInstanceState 包中读回该数据并重新加载 UI 元素。如果您想了解有关处理旋转的更多信息，这将需要一个单独的线程（或者您可以只搜索它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:14:55.250

我能想到的解决您的问题的解决方案之一是使用一项活动来显示启动屏幕和您的内容。由于您可以随时调用 setContentView() 方法（不仅在 onCreate() 方法中），只需在单独的 XML 文件中定义您想要的所有视图，并在切换时将相关 id 传递给 setContentView()。

您还可以在视图和启动屏幕中使用一种布局，并隐藏/取消隐藏属性。当您的数据将 setVisibility 加载到您的初始屏幕时，您的根视图仍然不可见。完成加载后 - 以相反的方式进行。

# javascript - 开始一个jQuery函数

> ID：13037288
> 
> 赞同：0
> 
> 时间：2012-10-23T18:58:00.243
> 
> 标签：javascript, jquery

是否可以根据`if`语句在 JQuery 或 Javascript 中重新启动函数？像`return functionname();`PHP 怎么样？

例如

```
function awesomestuff {
   //do stuff;
   //do stuff;
   if(x == 1) { //start function over }
   //do stuff;
   //do stuff;
} 
```

我想这可以通过一个`if/else`语句来完成，但是如果函数变得非常大，它会变得非常混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:59:52.443

为什么不：

```
function awesomestuff() {
   //do stuff;
   //do stuff;
   if(x == 1) { awesomestuff(); }
   //do stuff;
   //do stuff;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T19:00:02.873

我假设您要求进行递归，这可以通过在条件内再次调用函数来完成，

```
//Note you were missing ()
function awesomestuff () {
   //do stuff;
   //do stuff;
   if(x == 1) { 
      //start function over 
      awesomestuff ();
   }
   //do stuff;
   //do stuff;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T19:00:29.057

您也可以使用提供的 PHP 示例在 JS 中返回 functionname()，语法完全相同...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T18:59:45.630

取决于你实际想要做什么——

```
function awesomestuff {
    x = 1;
    while (x==1) {
       //do stuff;
       //do stuff;
    }
    //do stuff;
    //do stuff;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T19:01:12.137

do while 循环呢？

```
function awesomestuff {
   do {
   //do stuff;
   //do stuff;
   while(x == 1);// { //start function over }
   //do stuff;
   //do stuff;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T19:00:56.233

```
function awesomestuff () {
   //do stuff;
   //do stuff;
   if(x == 1) { 
       //start function over
       awesomestuff();

       // do not continue this execution
       // remove this if you still want to do the "do stuff" below
       return;
   }
   //do stuff;
   //do stuff;
} 
```

# c++ - 如何在另一个函数中使用指向来自一个函数的对象的指针？

> ID：13037296
> 
> 赞同：0
> 
> 时间：2012-10-23T18:58:33.963
> 
> 标签：c++, arrays, object-lifetime

我有一个指向我将在一种方法中使用的对象的指针。但我需要在另一种方法中再次使用相同的指针，如何在不声明为全局对象的情况下实现这一点。这是我的动态投标成就的一部分 Shape 是父类， Rectangle 是子类。

```
int main(){
switch (choice){
case 1:
 create();
 break;
case 2:
 process();
 break;
 }
}

create(){
Shape *shape[3];
shape[0]=&objRectangle;
}

process(){
for(int i=0;i<3;i++){
shape->print; // I want to acchieve like this.
} 
```

现在我不能这样做了，形状对象一旦退出创建过程就消失了。请协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:31:46.120

局部变量是在[调用堆栈](http://en.wikipedia.org/wiki/Call_stack#Functions_of_the_call_stack)上创建的。这意味着这些变量总是在函数完成时被销毁。

目前尚不清楚如何检索`Rectangle`对象以及如何处理`Shape`粘贴代码中的对象指针数组。但你可能需要两件事：

1.  您`Rectangle`不能在堆栈上，但必须在堆上分配。
2.  您需要`shape`在要访问它的所有地方访问该阵列。

我建议您创建一个类，该类将包装您的函数并使用和关键字`Shape`动态实例化和删除对象。我相信这是最简单的方法。像这样的东西应该工作：`new``delete`

```
/* interface */

class Example
{
     Shape *shape[3];

     public:

     Example();
     ~Example();

     void create();
     void process();
};

/* implementation */

Example::Example() {}

Example::~Example()
{
    delete shape[0];
}

void Example::create()
{
    shape[0] = new Rectangle();
}

void Example::process()
{
    shape[0]->print();
}

/* main */

int main()
{
    Example example();
    example.create();
    example.process();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:54:26.380

我建议像其他人一样让图书馆为您管理内存。

为了能够使用动态绑定，`std::vector`您应该开始（在您的主要）分配您的向量

```
 std::vector<Shape*> shape(3); 
```

这样做你可以访问你的动态绑定向量条目

```
 shape[0]->process(); 
```

坏事是您仍然必须管理向量条目指向的内存（实际上它们只是 C 指针）。因此，你为什么不考虑做

```
 std::vector< std::tr1::shared_ptr< Shape > > shape(3); 
```

?

这样做，当指向的对象超出范围时，[*智能指针*](http://en.wikipedia.org/wiki/Smart_pointer) `std::tr1::shared_ptr`将为您释放内存 。`Shape`

此外，在此设置中，您应该将 `Shape`-type 对象分配为

```
 shape[0] = std::tr1::shared_ptr< Shape >(new Rectangle); 
```

正确创建您需要的智能指针。

最后，向量`shape`应该通过引用（或`const`引用）传递给使用它的函数。

# magento - 我需要在 magento 1.7 中获取同级类别列表

> ID：13037302
> 
> 赞同：4
> 
> 时间：2012-10-23T18:58:48.137
> 
> 标签：magento, categories, magento-1.7, siblings

到目前为止，我想我正在做这样的事情

```
<?php 
$parentId = $_category->getParentId();
$cats = Mage::getModel('catalog/category')->load($parentId)->getChildred();
$catIds = explode(',',$cats);
?>

<ul>
<?php foreach($catIds as $catId): ?>
    <li>
    <?php
        $category=Mage::getModel('catalog/category')->load($catId)
        echo $category->getName();
    ?>
</li>
<?php endforeach; ?>
</ul> 
```

我试图在子类别中进行横向移动，而不必上一层。

让我知道这是否有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:47:42.760

下面的代码将帮助您加载第二级（子）类别。**您也可以通过Mage::app()->getStore()->getRootCategoryId();**将 $_rootCatId 设置为动态的；.

```
$_rootCatId     = 2;//Root Category
$_rootCategory  = Mage::getModel('catalog/category')->load($_rootCatId);
$_catName       = $_rootCategory->getName();
if($_rootCategory->hasChildren()) 
{
    $_collection = Mage::getResourceModel('catalog/category_collection')
                    ->addAttributeToFilter('is_active', 1)
                    ->addAttributeToSort('position', 'asc')
                    ->joinUrlRewrite()
                    ->addIdFilter($_rootCategory->getChildren())
                    ->load();

    foreach($_collection AS $_sub)
    {
        $_subCat    = Mage::getModel('catalog/category')->load($_sub->getId());

        if($_subCat->hasChildren()) 
        {   
            echo '<li class="leve10 nav-'. $_subCat->getId() .'">';
                echo '<a id="subCatLink">';
                    echo '<span>'. $this->htmlEscape($_subCat->getName()) .'</span>
                    </a>
             </li>';
            echo '<ul id="subCatUl" class="no-display" style="padding:0px 13px;">';
            $__collection = Mage::getResourceModel('catalog/category_collection')
                    ->addAttributeToFilter('is_active', 1)
                    ->addAttributeToSort('position', 'asc')
                    ->joinUrlRewrite()
                    ->addIdFilter($_subCat->getChildren())
                    ->load();

            foreach($__collection AS $__sub)
            {
                $__subCat   = Mage::getModel('catalog/category')->load($__sub->getId());
                echo '<li class="leve20 nav-'. $__subCat->getId() .'">
                        <a href="'. $this->getCategoryUrl($__subCat) .'">
                         <span>'. $this->htmlEscape($__subCat->getName()) .'</span>
                        </a>
                     </li>';
            }
            echo '</ul>';
        }
        else
        {
            echo '<li class="leve10 nav-'. $_subCat->getId() .'">
                <a href="'. $this->getCategoryUrl($_subCat) .'">
                 <span>'. $this->htmlEscape($_subCat->getName()) .'</span>
                </a>
             </li>';
        }
    }
}
else
    echo 'No Categories Found...'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:36:57.787

假设您`$_category`是以下的有效实例`Mage_Catalog_Model_Category`：

```
<?php $_siblings = $_category->getParentCategory()->getChildrenCategories(); ?>
<ul>
    <?php foreach($_siblings as $_sibling): ?>
    <li>
        <?php echo $_sibling->getName(); ?>
    </li>
    <?php endforeach; ?>
</ul> 
```

# android - Android WebView 未提取不同设备上的所有 cookie

> ID：13037305
> 
> 赞同：2
> 
> 时间：2012-10-23T18:59:00.000
> 
> 标签：android, cookies, android-webview, cookiemanager

我正在尝试在登录后从网页中提取 cookie 的值。我正在使用 cookie 帮助程序类，并`android.webkit.CookieManager`在网页完成加载后检索 cookie，即`onPageFinished()`

这一切正常，我可以在我的测试设备 Galaxy S2 (4.0.4)、Galaxy S3 (4.1.1) 和 HTC Explorer (2.3) 上看到 cookie 名称和值。但是，相同的代码在 Sony Xperia (2.3) 上不起作用？

我已经注销了 url 以确保我在正确的页面上工作，出于某种原因，我只从 Xperia 上的站点获得了 3 个 cookie，而我应该得到 7 个（大约）。

下面是我正在运行的代码的简化版本。感谢任何回应。提前致谢！

**WebViewActivity**

```
@Override
public void onPageFinished(WebView view, String url) {
    if(!cookieCreated){
        CookieHelper cookieHelper = new CookieHelper(getApplicationContext());

        if(cookieHelper.processCookie(url)){
            cookieCreated = true;
        }
    }
} 
```

* * *

**饼干助手**

```
public CookieHelper(Context cont){
    this.cookieManager = CookieManager.getInstance();
}

public void processCookie(String url){
    if(manager.getCookie(url).contains("cookie_name_required")){
       Log.d(TAG, "Got cookie");
    }
    else{
       Log.d(TAG, "No cookie");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:41:09.727

```
public static void setCookies(Context context) {
    //gets all cookies from the HttpClient's cookie jar

    List<Cookie> cookies = httpClient.getCookieStore().getCookies();

    if (! cookies.isEmpty()) {

        CookieSyncManager.createInstance(context);
        CookieManager cookieManager = CookieManager.getInstance();
        //sync all the cookies in the httpclient with the webview by generating cookie string

        for (Cookie cookie : cookies) {

            Cookie sessionInfo = cookie;
            String cookieString = sessionInfo.getName() + "=" + sessionInfo.getValue() + "; domain=" + sessionInfo.getDomain();
            cookieManager.setCookie("zoboon.com", cookieString);
            CookieSyncManager.getInstance().sync();
        }

    } else {

        Log.i("httpclient","has no cookies");

    }
} 
```

# c - 并非 for 循环中的所有指令都被执行

> ID：13037311
> 
> 赞同：0
> 
> 时间：2012-10-23T18:59:26.053
> 
> 标签：c, loops, for-loop

给定以下数据，注释了以下第 18 行的代码：

```
1
3 3 1 
```

产量

```
field 1 1
field 1 2
field 1 3
field 2 1
field 2 2
field 2 3
field 3 1
field 3 2
field 3 3 
```

但是，如果我保持原样，它只会每第二步执行一次 scanf(...) 。哪里有问题？

```
#include <stdio.h>

char field[102][102];

main()
{
    int t;
    scanf("%d",&t);
    while (t--)
    {
        int r, c, n, i, j;
        scanf("%d %d %d", &r, &c, &n); // wczytanie liczby wierszy, kolumn, dni
        for (i=1; i<=r; i++) // wiersze
        {
            for (j=1; j<=c; j++) // kolumny
            {
                printf("field %d %d\n", i, j);
                scanf("%c", &field[i][j]); // line 18 here
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:02:50.787

问题是，当您扫描一个字符时，您实际上发送了两个：被扫描的字母，以及下一次读取的“隐藏”'\n'。只需在 scanf 之后使用 getch() 来读取（并丢弃）该换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:29:03.237

因此，您似乎正在尝试手动填充带有字符的二维数组。

`'\n'`正如 BlackBear 所提到的，每次`scanf()`寻找字符输入时，您都会获得一个免费字符。这就是为什么您要“跳过”用户输入的原因。如果您打印正在输入的字符的 ASCII，您可以看到这一点：

```
printf("field %d %d\n", i, j);
scanf("%c", &field[i][j]); // line 18 here 
printf("%d\n", field[i][j]);   // This line will print the values as they're going
                               // into the field array 
```

所以使用这个你可以看到类似的东西：

```
1
2 2 1
field 1 1
10           <-- I didn't enter anything! but there's a ASCII 10 there
field 1 2
h            <-- I entered 'h', which is 
104          <-- ASCII 104 (in dec) 
```

因此，将其与[ASCII 表](http://www.asciitable.com/)进行比较，您可以看到 10 是换行符。

再次使用换行符（每个`scanf()`）可以解决问题：

```
 scanf("%d",&t);
    getchar();
    ...
    scanf("%d %d %d", &r, &c, &n); // wczytanie liczby wierszy, kolumn, dni
    getchar();
    ...
    scanf("%c", &field[i][j]); // line 18 here 
    getchar(); 
```

另外，只是想我会注意到你的变量`n`没有被使用。

# java - 启动摄像头时出现空指针异常

> ID：13037313
> 
> 赞同：1
> 
> 时间：2012-10-23T18:59:32.580
> 
> 标签：java, android

尝试启动此类尝试使用 4.1.2 打开 Galaxy Nexus 上的摄像头 LED 时出现空指针异常：package com.quinny898.doorcontrol;

```
import android.app.*;
import android.content.*;
import android.hardware.*;
import android.os.*;
import android.view.*;
import com.quinny898.gcse.doorcontrol.*;
import java.util.*;

import com.quinny898.gcse.doorcontrol.R;

public class DoorControlDoing extends Activity {
    /** Called when the activity is first created. */

//Create camera and parameter objects
    private Camera mCamera;
    private Camera.Parameters mParameters;
    private boolean mbTorchEnabled = false;

    @Override

    public void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.doing);
        if(mCamera != null){
            mCamera.release();
        }
//... later in a click handler or other location, assuming that the mCamera object has already been instantiated with Camera.open()
    mParameters = mCamera.getParameters();
//Get supported flash modes
    List flashModes = mParameters.getSupportedFlashModes ();
//Make sure that torch mode is supported
//EDIT - wrong and dangerous to check for torch support this way
//if(flashModes != null && flashModes.contains("torch")){
    if(flashModes != null && flashModes.contains(Camera.Parameters.FLASH_MODE_TORCH)){
        if(mbTorchEnabled){
        //Set the flash parameter to off
    mParameters.setFlashMode(Camera.Parameters.FLASH_MODE_OFF);
        }
        else{
//Set the flash parameter to use the torch
mParameters.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);}
//Commit the camera parameters
mCamera.setParameters(mParameters);
mbTorchEnabled = !mbTorchEnabled;
}}

        public void onBackPressed(){
            return;
        }

        public void restart(View view) {
            Intent myIntent = new Intent(DoorControlDoing.this,
                       DoorControlActivity.class); 
                       DoorControlDoing.this.startActivity(myIntent);
        }

        public void exit(View view) {
         Intent intent = new
         Intent(Intent.ACTION_MAIN);
         intent.addCategory(Intent.CATEGORY_HOME);
         intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         startActivity(intent);
        }

} 
```

有任何想法吗？这可能是一些愚蠢的事情，但无论如何......谢谢

# php - MySQL 和 PostgreSQL 引用字段名称之间的 PHP PDO 兼容性

> ID：13037319
> 
> 赞同：2
> 
> 时间：2012-10-23T18:59:39.933
> 
> 标签：php, mysql, postgresql, pdo

我的源代码是：

```
$db = new PDO("mysql:host=" . $host . ";dbname=" . $dbname, $username, $password);
$sth = $resourceLinkID -> prepare("SELECT * FROM `ant_Action`;");
$sth -> execute();
$result = $sth -> fetch(PDO::FETCH_ASSOC);
print_r($result); 
```

^ 这有效！

```
$db = new PDO("pgsql:dbname=" . $dbname . ";user=" . $user . ";password=" . $password . ";host=" . $host);
$sth = $resourceLinkID -> prepare("SELECT * FROM `ant_Action`;");
$sth -> execute();
$result = $sth -> fetch(PDO::FETCH_ASSOC);
print_r($result); 
```

^由于 ` 问题，这不起作用，在 PosgreSQL 中你必须使用 " 在这种情况下 ("ant_Action" **)**

如何使用 PDO 来抽象基于 DB DRIVER 的 ` 或 " 用法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:07:03.753

在任何一种情况下都不需要反引号：`select * from ant_Action;`将起作用。如果您必须使用反勾号，您可能会不走运。

您可以使用`preg_replace()`将查询中的反引号转换为双引号，但这可能容易出错。

**编辑**pozs是对的。不要那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:08:09.367

> 如何使用 PDO 来抽象基于 DB DRIVER 的 ` 或 " 用法？

没办法。PDO 不具备这样的能力。您可以使用框架（Zend 框架的 Zend\Db 对它很有用），或者使用 ISO SQL 语法，您可以（例如，仅使用不带引号的字符命名列）

# java - 如何识别 MySql 数据库中的二进制数据

> ID：13037320
> 
> 赞同：0
> 
> 时间：2012-10-23T18:59:41.383
> 
> 标签：java, mysql, database, database-design, md5

我有一个存储一些数据位置的数据库。为简单起见，让我们制作它

```
Resource
----------
id (PK)
resourceLocation 
```

在我用 Java 编写的应用程序中，我所拥有的只是存储在`resourceLocation`. 仅使用此二进制数据，我需要某种方法来从数据库中获取此记录。

我唯一能想到的就是这样的事情。`Resource`在名为 md5的表中添加一个新列。这将存储位于 resourceLocation 的文件的 MD5。

```
Resource
----------
id (PK)
resourceLocation
md5 
```

然后在我的代码中，当我只有二进制数据时，我可以简单地获取数据的 MD5 并能够在数据库中找到记录。

我对这种方法有几个问题。首先，谁能想到更好的方法来做到这一点。其次，是否有比 MD5 更好的散列算法用于此目的。我担心我最终可能会创建 2 个创建相同 MD5 哈希的文件。如果发生这种情况，我的方法就失败了。

# mysql - 如何在数据库中组织用户凭证？

> ID：13037331
> 
> 赞同：1
> 
> 时间：2012-10-23T19:00:08.103
> 
> 标签：mysql, store, credentials

在 MySQL 数据库中存储用户凭据的最佳方法是什么。我的意思是结构，而不是数据（散列与纯文本）。

我有我们得到的网站

```
Root Admin (1)

Client Admin (1) 
Client Sub-Admins (N)

Employer Admin (N)
Employer Sub-Admins (N) 
```

以上用户在后台登录

```
Users (N) 
```

用户在网站前端登录

N - 表示无限

猜猜我的问题是我应该把所有管理员放在同一张桌子上吗？然而，雇主不像客户管理员那样受信任。

如果我将管理员放在不同的表中，我如何在 PHP 中进行身份验证？从两个表中获取数据并合并到数组中，然后如果用户存在则在数组中查找？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:37:37.773

如果您只拥有一个根/客户端管理员，我建议您简单地`user_id`单独存储它们的值，可能在一个配置文件中，该配置文件很难通过 SQL 注入之类的方式进行修改。否则，以下方案应该允许您相当灵活地将尽可能多的用户分配给尽可能多的组。

```
TABLE users
  user_id INT PK AUTO_INCREMENT
  user_name VARCHAR
  user_password VARCHAR
  ...

TABLE groups
  group_id INT PK AUTO_INCREMENT
  group_name VARCHAR
  [possible permissions declarations, 
    or create a similar group_perms table]
  ...

TABLE user_group_map
  user_id INT PK
  group_id INT PK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:16:05.413

一种方法是将身份验证/用户配置文件数据与其可能的角色数组分开。因此，为您的用户分配角色。地狱，为你的角色分配上下文。在我看来，用户和角色之间存在一对多的关系，其中角色被分配了一个上下文（雇主管理员、客户管理员、一般管理员......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T02:25:39.873

我在这篇文章中描述了一个用户和组权限系统（忽略标题——原来的问题措辞不当）： [Applying column permissions for a table over a trigger](https://stackoverflow.com/questions/11331562/applying-column-permissions-for-a-table-over-a-trigger/11379619#11379619)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T15:01:05.013

我不会仅仅根据我对用户的信任程度来使用多个表来分隔用户。在阅读您的问题和评论后，您必须为根管理员、客户管理员、雇主管理员和普通用户创建单独的表，因为每个组的信任级别不同。当您开始编码时，即使只有两个表，实施/维护也会变得非常难看......

不过，您似乎非常坚定地使用单独的表，如果您选择这样做，您可以使用一些技术“隐藏”它，例如，创建一个视图来合并这些表，在您的 DAO 中使用 SQL 联合，或者阅读每个表并以编程方式合并数据等。同样，当您构建应用程序时，您很可能会遇到此设计的问题。

我宁愿使用单个表，`users`并介绍`roles`它们之间具有多对多关系的概念。在创建用户时，我会将每个用户与一个默认角色关联（例如，用户*root-admin*具有 root-admin 角色*等*）以及他们似乎适合的任何其他角色（例如，用户*cleint-admin*有一个额外的*client-sub-admin*等角色）根据要求，可能存在与用户不直接相关的角色，例如。*客人*、*会员*等

我还将介绍`contexts`具有与角色的可选多对多关系的应用程序的概念，然后最初将角色*root-admin*与应用程序上下文相关联，*这*意味着他/她没有任何限制。将根据业务需求创建额外的上下文（例如，角色*employer-admin*是上下文*hire-employees*的一部分等）

授权时，安全管理器组件可以根据用户及其关联的角色/上下文授予/拒绝访问权限，并在必要时包含附加逻辑（例如，用户被禁用）。

您的下一个问题是您拥有某些用户的额外数据，这些数据不适用于其他用户。为了解决这个问题，我将引入与`profiles`用户表具有可选的一对一关系的表（并非每个用户都有个人资料，例如用户*root-admin*没有）。

架构（草稿）：

```
 __________________                    __________________
|USERS             |                  |ROLES             |
|==================|                  |==================|
|id                |                  |id                |
|username          |  1..*      1..*  |name              |
|password          |  --------------  |description       |
|failedattempts    |                  |...               |
|disabled          |                  |                  |
|...               |                  |                  |
|__________________|                  |__________________|

        | 1                                   | 0..*
        |                                     |
        |                                     |
        |                                     |
        | 0..1                                | 0..*
 __________________                    __________________
|PROFILES          |                  |CONTEXTS          |
|==================|                  |==================|
|id                |                  |id                |
|firstname         |                  |name              |
|lastname          |                  |description       |
|email             |                  |...               |
|dob               |                  |                  |
|...               |                  |                  |
|__________________|                  |__________________| 
```

# php - 使用 OR 列 LIKE 时 mysql 查询失败

> ID：13037332
> 
> 赞同：0
> 
> 时间：2012-10-23T19:00:12.337
> 
> 标签：php, mysql

当我在网页中使用 PHP 下方时，我收到“查询失败”消息，但如果我`OR column2 LIKE '%$searchterm%'`从查询中删除它可以正常工作。我已经尝试过用谷歌搜索这个问题并查看了一个傻瓜手册。数据库表肯定包含 column_2 中的搜索词。

```
/* send this query to MySQL database */
$query = "SELECT * FROM table WHERE column_1 LIKE '%$searchterm%' OR desc LIKE '%$searchterm%'";

/* process query results */
$result = mysqli_query($cxn,$query) or die ("query failed");
$row = mysqli_fetch_assoc($result);

extract($row);

/* create HTML for web broswer to see */
echo "Column 1 value: $column_1<br><br>";
echo "Column 2 value: $column_2<br><br>";
echo "Column 3 value: $column_3<br><br>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:19:40.847

解决方案！查询需要在`OR`语句左侧的对象名称周围加上反引号，而其他对象名称需要直接单引号。

```
$query = "SELECT * FROM `table` WHERE `column_1` LIKE '%$searchterm%' OR 'column_2' LIKE '%$searchterm%'"; 
```

我在使用 phpMyAdmin 将查询转换为 PHP 代码时看到了反引号，但不得不忽略添加反斜杠的部分，如`\'%$searchterm%\'`. 所以翻译工具让我找到了一个解决方案，但我看不出这些反斜杠的原因。

此外，没有`OR`语句的简单查询在没有反引号和最小引号的情况下也能正常工作，但我不明白为什么`OR`会调用反引号规则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T19:24:18.043

你可以试试这个：

```
$query = "SELECT * FROM table WHERE column_1 LIKE '%$searchterm%' UNION SELECT * FROM table WHERE column_2 LIKE '%$searchterm%'"; 
```

# c# - DirectX 和 C# 以及 Windows RT

> ID：13037335
> 
> 赞同：0
> 
> 时间：2012-10-23T19:00:26.293
> 
> 标签：c#, windows-8, directx

我正在构建一个使用 Bing Maps API 和 C# 的应用程序。

它要求我包含 MS Visual C++ 运行时包，以便它可以通过 WACK 测试。

由于 Bing Maps API，我无法使用“任何 CPU 设置”编译应用程序，需要手动为每个 ARM、x64 和 x86 构建包。尝试提交到 Windows 应用商店时，“要求 3.8”和“要求 3.9”的认证失败。

失败的原因主要是和ARM包有关，不知道用C#编码怎么解决？或者我必须用 C++ 编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:00:25.220

请注意将[Bing 地图添加到 Windows 应用商店应用中的步骤](http://msdn.microsoft.com/en-us/library/hh855146.aspx)

> 添加对 Bing Maps SDK for C#、C++ 或 Visual Basic 的引用。
> 
> 将 Visual Studio 中的活动解决方案平台设置为以下选项之一。
> 
> ```
>  C#, Visual Basic: ARM, x86 or x64
>  C++: ARM, Win32 or x64 
> ```
> 
> 如果您使用的是 C# 或 Visual basic，则必须添加对 Microsoft Visual C++ 运行时包的引用

# bellman-ford - 贝尔曼福特算法

> ID：13037341
> 
> 赞同：2
> 
> 时间：2012-10-23T19:00:44.017
> 
> 标签：bellman-ford

据说，“如果从源可以到达负边缘循环，那么算法将返回错误”。

这个“从源头可达”是什么意思？

看下图：

![在此处输入图像描述](../Images/0245e1e22f4ea5352f7fa165fa06c36a.png)

你能给我一些例子，如果存在从源可以到达的负边缘循环，这个算法将返回 false。

注意：我是算法新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:11:19.487

When the algorithm is used to find shortest paths, the existence of negative cycles is a problem, preventing the algorithm from finding a correct answer. However, since it terminates upon finding a negative cycle, the Bellman-Ford algorithm can be used for applications in which this is the target to be sought - for example in cycle-cancelling techniques in network flow analysis.

Please refer this link:- [http://evlm.stuba.sk/~partner2/DBfiles/Optimization/Dynamical%20optimization/Optimization_EN_Ford-Belman_algorithm.pdf](http://evlm.stuba.sk/~partner2/DBfiles/Optimization/Dynamical%20optimization/Optimization_EN_Ford-Belman_algorithm.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:08:23.127

这意味着如果存在一个总权重为负的循环，那么该算法无法给出答案，因为重复遵循该循环会“减少”路径的权重。我在您显示的图表中没有看到任何负重量周期（通过检查），因此在您的情况下，所述限制不应该成为问题。

编辑：“从源可达”意味着负权重循环只有在它是可达的情况下才是一个问题——这意味着存在从指定源到负权重循环中某个节点的路径——从起始节点或源节点。Bellman Ford 找到从一个显着节点到从该节点可到达的所有节点的最短路径。那有意义吗？

# grails - Grails 无法在搜索结果页面中显示状态名称

> ID：13037342
> 
> 赞同：0
> 
> 时间：2012-10-23T19:00:45.300
> 
> 标签：grails

我使用可搜索插件在我的 Grails 应用程序中设置了一个搜索页面。我的搜索工作正常，但我遇到了一个小问题。在我的搜索结果（显示名称和状态）中，状态未显示。

我有两个域：

```
class Person {
    String firstName
    String lastName
    State state
}

class State {
    String name
    String code

    String toString()
        return this.name
    }
} 
```

在我的*search.gsp*视图中，我有以下内容：

```
<g:each var="result" in="${searchResult.results}">

            <div class="searchResult">
                <div class="searchPerson">
                    <g:link controller="person" action="show" id="${result.id}">
                        ${result.lastName}, ${result.firstName}
                    </g:link>
                </div>
                <div class="searchAddress">
                    ${result.state}
                </div>
            </div>

</g:each> 
```

为什么我的州名没有出现？我尝试了以下方法：

*   ${result.state.name}
*   ${result.state.code}
*   ${result.state.toString()}

我确信这个问题很小，但作为 Grails 的新手，我似乎无法弄清楚。我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:00:16.743

找到[这个](http://jan-so.blogspot.com/2009/04/eager-fetching-and-searchable-plugin-in.html)（Grails 中的 Eager fetching and searchable plugin），似乎是导致问题的原因，希望您的问题得到解决。

# python - 在将文件导入 SQL Server 2008 之前，解析具有随机更改顺序的列的文件的最佳方法是什么？

> ID：13037343
> 
> 赞同：1
> 
> 时间：2012-10-23T19:00:51.970
> 
> 标签：python, perl, sql-server-2008, parsing

我有一个文件，其中的列如下所示：

```
Column1,Column2,Column3,Column4,Column5,Column6
1,2,3,4,5,6
1,2,3,4,5,6
1,2,3,4,5,6
1,2,3,4,5,6
1,2,3,4,5,6
1,2,3,4,5,6
Column1,Column3,Column2,Column6,Column5,Column4
1,3,2,6,5,4
1,3,2,6,5,4
1,3,2,6,5,4
Column2,Column3,Column4,Column5,Column6,Column1
2,3,4,5,6,1
2,3,4,5,6,1
2,3,4,5,6,1 
```

列在文件中间随机重新排序，知道顺序的唯一方法是查看数据之前的最后一组标题（Column1、Column2 等）（我还简化了数据以便更容易描绘。在现实生活中，无法区分数据，因为它们都是可以真正进入任何列的大整数值）

显然，在使用 BULK INSERT 时，这对 SQL Server 不是很友好，所以我需要找到一种方法来以与我的 SQL 数据库中表的列顺序相匹配的一致顺序排列所有列。最好的方法是什么？我听说 Python 是要使用的语言，但我从未使用过它。任何语言的任何建议/示例脚本都将受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:09:58.697

python中的解决方案：

我会逐行阅读并寻找标题。当我找到一个标题时，我用它来计算顺序（不知何故）。然后我将这个顺序传递给`itemgetter`它将执行重新排序元素的魔力：

```
from operator import itemgetter
def header_parse(line,order_dict):
    header_info = line.split(',')
    indices = [None] * len(header_info)
    for i,col_name in enumerate(header_info):
        indices[order_dict[col_name]] = i
    return indices

def fix(fname,foutname):
    with open(fname) as f,open(foutname,'w') as fout:
        #Assume first line is a "header" and gives the order to use for the
        #rest of the file
        line = f.readline()
        order_dict = dict((name,i) for i,name in enumerate(line.strip().split(',')))
        reorder_magic = itemgetter(*header_parse(line.strip(),order_dict))
        for line in f:
            if line.startswith('Column'):  #somehow determine if this is a "header"
                reorder_magic = itemgetter(*header_parse(line.strip(),order_dict))
            else:
                fout.write(','.join(reorder_magic(line.strip().split(','))) + '\n')

if __name__ == '__main__':
    import sys
    fix(sys.argv[1],sys.argv[2]) 
```

现在您可以将其称为：

```
python fixscript.py badfile goodfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:03:21.987

这可以通过两个步骤轻松解决：

*   新标头开始时将文件拆分为多个文件
*   使用 csv dict reader 读取每个文件，对键进行排序并以正确的顺序重新输出行

这是一个示例，您可以如何了解它，

```
def is_header(line):
    return line.find('Column') >= 0

def process(lines):  
    headers = None
    for line in lines:
        line = line.strip()
        if is_header(line):
            headers = list(enumerate(line.split(",")))
            headers_map = dict(headers)
            headers.sort(key=lambda (i,v):headers_map[i])
            print ",".join([h for i,h in headers])
            continue

        values = list(enumerate(line.split(",")))
        values.sort(key=lambda (i,v):headers_map[i])
        print ",".join([v for i,v in values])

if __name__ == "__main__":
    import sys
    process(open(sys.argv[1])) 
```

您还可以更改功能`is_header`以在实际情况下正确识别标题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T19:18:11.353

由于您没有提到具体问题，我将假设您在提出算法时遇到问题。

1.  对于每一行，

    1.  将行解析为字段。
    2.  如果是第一个标题行，

        1.  输出标题。
        2.  创建要定位的字段名称映射。

            ```
            %map = map { $fields[$_] => $_ } 0..$#fields; 
            ```

        3.  创建原始位置到新位置的地图。

            ```
            @map = @map{ @fields }; 
            ```

    3.  如果它是第一个以外的标题行，

        1.  将原始位置的地图更新为新位置。

            ```
            @map = @map{ @fields }; 
            ```

    4.  如果不是标题行，

        1.  重新排序字段。

            ```
            @fields[ @map ] = @fields; 
            ```

        2.  输出行。

（片段在 Perl 中。）

# php - 使数据库可扩展

> ID：13037354
> 
> 赞同：1
> 
> 时间：2012-10-23T19:01:35.410
> 
> 标签：php, mysql, caching, scalability

我已经开发一个网站已经有一段时间了，到目前为止一切都很快而且很好，尽管那是一个活跃的用户。我不知道有多少人会在第一周、第一个月或第一年使用我的网站。

我一直在研究缩放意味着什么以及如何实现它，而缓存似乎是其中的重要组成部分。所以我开始寻找缓存我的内容的方法。目前我刚刚在 XAMPP 中开发了网站。我使用 MySQL 作为数据库，使用简单的 PHP 和 MySQLi 来编辑数据。我还使用 OS X Mountain Lion 中的内置系统消息应用程序做一些简单的日志记录。所以我正在考虑使用[Memcache](http://php.net/manual/en/book.memcache.php "内存缓存")进行缓存。

这是一个好方法吗？

我如何测试它才能真正看到差异？

我怎么知道即使有更多用户它也能很好地工作？

有没有好的基准测试应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:20:08.307

有很多方法可以确保数据库能够很好地扩展，但我认为最重要的部分是为表定义适当的索引。*至少*作为外键的字段应该定义一个索引。

例如，如果您有一个大型论坛，您可能有一个如下所示的主题表：

```
topic_id | name
---------+--------------------------------
       1 | "My first topic!"
       2 | "Important topic"
       3 | "I really like to make topics!"
     ... | ...
 7234723 | "We have a lot of topics!" 
```

然后是另一个表格，其中包含主题中的实际帖子：

```
post_id  | user       | topic_id
---------+------------+---------
       1 | "Spammer"  | 1
       2 | "Erfa"     | 2
       3 | "Erfa"     | 1
       4 | "Spammer"  | 1
     ... | ...        | ...
87342352 | "Erfa"     | 457454 
```

当您在应用程序中加载主题时，您希望加载与主题 ID 匹配的所有帖子。在这种情况下，您无法查看所有数据库行，因为实在太多了！幸运的是，您不必做太多事情来确保完成，您只需为字段 topic_id 创建一个索引就可以了。

这是使您的数据库良好扩展的非常基本的事情，但是由于它如此重要，我真的认为应该有人提及它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:10:13.883

获取和使用[jMeter](http://jmeter.apache.org/)。

使用 jMeter，除了确认当前没有任何错误发生外，您还可以测试返回的响应速度以及页面加载方式。这样你就可以模拟大量的负载；在进行调整（例如使用 memcache）时看到实际的性能更新。

# spring - 读取 max-messages-per-poll=10 和 prevent-duplicates=false 的文件

> ID：13037357
> 
> 赞同：1
> 
> 时间：2012-10-23T19:01:42.207
> 
> 标签：spring, integration, spring-integration, inbound, poller

我正在尝试从目录中读取文件。如果文件无法处理，它会留在那里以供稍后尝试。

```
<file:inbound-channel-adapter prevent-duplicates="false" id="fileInput" directory="file:${java.io.dir}/input-data" auto-create-directory="true" filter="compositeFileFilterBean"/>

    <integration:poller id="poller" max-messages-per-poll="10" default="true" >
        <integration:interval-trigger interval="60" time-unit="SECONDS" />
    </integration:poller> 
```

问题是，如果 max-messages-per-poll 设置为 10，那么每次轮询将准确返回 10 条消息，即使只有 1 个文件（即所有 10 条消息都相同）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:08:29.723

是的，这将是这些设置的预期行为。

我不确定你为什么认为这是错误的。

如果目录中存在未被过滤器过滤的文件（例如防止重复的文件），则轮询器将在当前轮询中找到该文件（当 max-messages-per-poll > 1 ) 或在下一次投票中。

要执行您想要的操作，您需要一个自定义过滤器，该过滤器将过滤之前在 60 秒轮询间隔内找到的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-20T16:28:40.650

您可以： 选项 1。在入站通道适配器中将属性“防止重复”设置为 true。如果没有其他过滤器或文件正则表达式，则此属性默认为 true，并且。如果我们使用自定义过滤器，springs 知道我们的自定义过滤器将包含 AcceptOnceFileListFilter，因此它将 prevent-duplicates 设置为 false。

选项 2。使用过滤器 org.springframework.integration.file.filters.AcceptOnceFileListFilter 完成 bean “compositeFileFilterBean”

# visual-studio-2010 - Console.WriteLine 来自 Nuget 包管理器控制台

> ID：13037360
> 
> 赞同：1
> 
> 时间：2012-10-23T19:01:53.613
> 
> 标签：visual-studio-2010, powershell, nuget

如果我在典型的 PS 窗口中键入以下代码，我可以在输出中正确地获得“asdf”：

```
[System.Console]::WriteLine("asdf") 
```

但是，如果我在 NuGet 包管理器控制台中执行此操作，则不会输出任何内容。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:16:36.180

因为 NPM 不是控制台应用程序。它托管在 Visual Studio 中并实现 PowerShell 主机接口以允许 PowerShell 引擎将输出显示到可能的 WPF 窗口。

要在 NPM 中获取输出，请使用：

```
Write-Host "asdf" 
```

或者干脆

```
"asdf" 
```

如果不在 cmdlet 中，您可以执行以下操作：

```
private void WriteHost(string message)
{
    var runspace = Runspace.DefaultRunspace;
    var pipeline = runspace.CreatePipeline("Write-Host '" + message + "'", false);
    pipeline.Invoke();
} 
```

# google-chrome - Google chrome 22.0.1229.94 m 和 GWT 插件

> ID：13037361
> 
> 赞同：1
> 
> 时间：2012-10-23T19:01:54.563
> 
> 标签：google-chrome, gwt, plugins

我只是尝试用 Chrome 22.0.1229.94 m 运行 GWT 插件，但它失败了......说类似

> “无法加载 GWT DMP 插件”

:( 无论如何，Chrome 建议安装[这个](https://chrome.google.com/webstore/detail/gwt-developer-plugin/jpjpnpmbddbjkfaccnmhnkdgjideieim)GWT 插件，但是当我按下“安装”时，安装根本没有开始 :S

*   谷歌浏览器：22.0.1229.94 m
*   总重量：2.3
*   GWT 开发者插件 1.0.11338
*   操作系统：Windows XP Pro SP3

所以我的问题是......为什么谷歌浏览器的 GWT 插件可能会失败以及如何修复它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:49:32.163

该插件的 Windows 版本中显然存在错误。现在应该修复：[https ://groups.google.com/d/msg/google-web-toolkit/4fWzySzpbtQ/BqwEV_FxxUoJ](https://groups.google.com/d/msg/google-web-toolkit/4fWzySzpbtQ/BqwEV_FxxUoJ)

您也可以尝试卸载扩展程序，然后重新安装它（但要等待新版本的到来）。

# c# - 使用c#读取Excel文件中的行

> ID：13037362
> 
> 赞同：1
> 
> 时间：2012-10-23T19:02:02.757
> 
> 标签：c#, .net, excel, unit-testing

我添加了一个 Excel 文件来提供单元测试值。

下面是一个关于我之前在做什么的例子

```
public void test1()
{
    try
    {
        var Service = new Service.ServiceClient();
        var Cid = testContextInstance.DataRow["CId"].ToString();
        var MNumber = testContextInstance.DataRow["MNumber"].ToString();
        var VID = testContextInstance.DataRow["VID"].ToString();
        var isVisit = new Service.ISVisit()
        {
        };

    var first = Service.Medis(isVisit).Cast<Service.ISMedi>().FirstOrDefault();
    // Assert
    Assert.AreEqual("12345678", first.Proc.ProcID);
    } 
```

.我正在使用 excel 表为 untitest 提供值。

![在此处输入图像描述](../Images/ebe3b442f6c5af043940e9cfe196dc13.png)

通过使用上面的示例代码，我可以遍历 excel 中的每一行并将值设置为变量。但要求是不要将 excel 作为数据驱动源附加，也不要使用 Oledb 方式在 Excel 中查询事物。他们说我使用 Microsoft.Office.Interop.Excel；.

任何人都可以帮助我如何更改代码以检索 excel 中的数据，逐行并使用不同的方法将单元格分配给各个变量。??? 这是 ac# Unittest 框架

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:24:02.333

请参阅[http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.excel(v=office.11](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.excel(v=office.11).aspx) ​​).aspx 。

这可能是[C# 的副本：如何访问 Excel 单元格？](https://stackoverflow.com/questions/472959/c-how-to-access-an-excel-cell)，其中有使用互操作的答案中的示例。

**警告**

因为您在同一个问题中提到了 Web 服务和 Office 互操作：

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

有关详细信息，请参阅[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)。

**OOXml**

如果可能，您应该使用[OOXml](https://en.wikipedia.org/wiki/Office_Open_XML)，这是以编程方式处理 Office 文档的推荐方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T07:13:04.650

你为什么不试试 rpa 工具呢？那里要容易得多。这是 G1ANT 的 rpa 工具之一中的代码。

```
addon msoffice version 4.101.0.0
addon core version 4.101.0.0
addon language version 4.103.0.0
excel.open ♥environment⟦USERPROFILE⟧\Desktop\challenge.xlsx
for ♥n from 1 to 10 step 1
excel.getrow ♥n 
dialog  ♥result
end 
```

该机器人会将数据以列表格式存储在“结果”中，您可以将代码复制并粘贴到工作室。

# php - 带问号和冒号的 MySQL 语句

> ID：13037364
> 
> 赞同：1
> 
> 时间：2012-10-23T19:02:08.133
> 
> 标签：php, mysql, pdo

我正在尝试破译 PHP 程序中正在执行 Mysql 查询的特定语句。查询有 ?: 和 ? 在里面。有什么功能？

```
$data = db_get_field("SELECT data FROM ?:order_data WHERE order_id = ?i AND type = 'A'", $order_id); 
```

谢谢你的帮助。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:07:21.997

它们看起来像是准备好的语句的占位符。您提供`?`稍后将提供实际值的位置。考虑 PHP 文档中的这个例子：

```
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (?, ?)");
$stmt->bindParam(1, $name);
$stmt->bindParam(2, $value); 
```

来源： http: [//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

您的特定示例似乎来自[CS-Cart](http://docs.cs-cart.com/database-standards)。例如，根据他们的文档，`?i`强制将传递到该占位符的值转换为整数（这类似于工作方式[`sprintf`](http://www.php.net/manual/en/function.sprintf.php)）。

```
$number = 9;
echo sprintf( "I have %d tasks.", $number );
// Outputs "I have 9 tasks." 
```

在上述情况下，`$number`被视为整数。如果我尝试将字符串传递到该插槽中，我会得到非常不同的结果：

```
$number = "completed";
echo sprintf( "I have %d tasks.", $number );
// Outputs "I have 0 tasks." 
```

请注意我的类型如何不匹配，因此在输出中`0`被替换。`completed`

最重要的是，这些是占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:12:47.713

这些字符`?`是`:`形成参数化查询的标识符。稍后，您将值绑定到变量，引擎执行多个值的查询。这工作得更快，因为查询由服务器编译一次，而不是为每个变量=值集编译它。

# mysql - 原则 2：GROUP BY 字段 DESC 错误

> ID：13037367
> 
> 赞同：1
> 
> 时间：2012-10-23T19:02:18.753
> 
> 标签：mysql, doctrine-orm

当我尝试使用 DQL 语句在 Doctrine 2.1 中执行时：

> SELECT t FROM \Test\TestingBundle\Entity\Testing t **GROUP BY t.date DESC**

Doctrine 2 返回一个异常，指出发现了一个意外的 DESC。这是 MySQL 对**Group by**返回的结果进行排序的最实用的方法之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T09:26:41.630

不幸的是，Doctrine 似乎不支持在 group by 子句中使用 desc。如果存在性能问题并且您不能使用 order by，则考虑使用本机查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T19:10:04.853

I think you missed `order by`:

```
 SELECT t FROM \Test\TestingBundle\Entity\Testing t 
      GROUP BY t.date ORDER BY t.date DESC 
```

# twitter-bootstrap - 没有链接的引导工具提示

> ID：13037368
> 
> 赞同：4
> 
> 时间：2012-10-23T19:02:23.393
> 
> 标签：twitter-bootstrap, tooltip

为了在狭窄的表格单元格中节省空间，我想使用引导工具提示在悬停时显示额外的内容。但是，工具提示在 a 标记中使用 :rel 选项。我不需要链接，只需要它的选项......而且我不希望链接去任何地方。我用过：

```
 link_to display.text, "#", :rel => "tooltip", ...blah..blah
  link_to_function display.text, "#", :rel => ...blah...blah 
```

两者都在一定程度上起作用，但都返回到页面顶部。

使用不是真正的链接来获取其他功能的链接可能是臭代码。有没有创建虚拟链接的rails方式？是否有“批准”的方法来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T20:08:31.297

您可以在锚点以外的其他元素上初始化工具提示。尝试[跨度](https://stackoverflow.com/a/9380598/1684247)或 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T13:06:43.943

我同样需要向元素添加工具提示，但我不希望它成为标签。

我选择使用这样的标签：

```
<span class="glyphicons glyphicons-medicine pharmacy-icon" data-toggle="tooltip" data-placement="right" title="Pharmacy Tooltip"></span> 
```

将显示（当悬停在医学字形图标上时）消息：药房工具提示

如果您想更进一步，您甚至可以根据需要设置工具提示的样式，以下代码块将是您如何更改它的样式：

```
.tooltip {
  filter: drop-shadow(rgba(0, 0, 0, 0.3) 0 2px 5px);
  .tooltip-inner {
    background-color: white;
    color: red;
  }
  .tooltip-arrow {
    border-right-color: white;
  }
} 
```

这会将工具提示的背景颜色和工具提示的箭头更改为白色，带有红色文本和工具提示周围的阴影。

如果您使用引导程序，请确保在将使用工具提示的地方包含以下代码行：

`$('.someClass').tooltip();`

这将确保您使用的是引导工具提示，而不是默认的内置浏览器工具提示

# python - 日历：特定语言环境中的日/月名称

> ID：13037370
> 
> 赞同：23
> 
> 时间：2012-10-23T19:02:28.433
> 
> 标签：python, calendar

我正在使用标准库中的Python[日历模块。](http://docs.python.org/library/calendar.html)基本上我需要一个月中所有日子的列表，如下所示：

```
>>> import calendar
>>> calobject = calendar.monthcalendar(2012, 10)
>>> print calobject
[[1, 2, 3, 4, 5, 6, 7], [8, 9, 10, 11, 12, 13, 14], [15, 16, 17, 18, 19, 20, 21], [22, 23, 24, 25, 26, 27, 28], [29, 30, 31, 0, 0, 0, 0]] 
```

现在我还需要特定语言环境中月份和日期的名称。我没有找到从`calobject`本身获取这些的方法 - 但我能够像这样得到它们：

```
>>> import calendar
>>> calobject = calendar.LocaleTextCalendar(calendar.MONDAY, 'de_DE')
>>> calobject.formatmonth(2012, 10)
'    Oktober 2012\nMo Di Mi Do Fr Sa So\n 1  2  3  4  5  6  7\n 8  9 10 11 12 13 14\n15 16 17 18 19 20 21\n22 23 24 25 26 27 28\n29 30 31\n' 
```

十月`Oktober`的名字也是如此。`de_DE`美好的。信息必须在那里。我想知道我是否可以在普通`calendar`对象而不是`calendar.LocaleTextCalendar`对象上以某种方式访问​​该月份名称。第一个示例（带有列表）确实是我需要的，我不喜欢创建两个日历对象来获取本地化名称的想法。

有人有聪明的主意吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-23T19:31:07.073

哈！找到了一种获取本地化日/月名称的简单方法：

```
>>> import locale
>>> locale.setlocale(locale.LC_ALL, 'de_DE')
'de_DE'
>>> import calendar
>>> calendar.month_name[10]
'Oktober'
>>> calendar.day_name[1]
'Dienstag' 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-23T19:05:37.417

这是来自`calendar`模块的源代码：

```
def formatmonthname(self, theyear, themonth, width, withyear=True):
    with TimeEncoding(self.locale) as encoding:
        s = month_name[themonth]
        if encoding is not None:
            s = s.decode(encoding)
        if withyear:
            s = "%s %r" % (s, theyear)
        return s.center(width) 
```

`TimeEncoding`并且`month_name`可以从`calendar`模块中导入。这给出了以下方法：

```
from calendar import TimeEncoding, month_name

def get_month_name(month_no, locale):
    with TimeEncoding(locale) as encoding:
        s = month_name[month_no]
        if encoding is not None:
            s = s.decode(encoding)
        return s

print get_month_name(3, "nb_NO.UTF-8") 
```

对我来说，不需要解码步骤，只需`month_name[3]`在`TimeEncoding`上下文中打印即可打印“mars”，这是挪威语中“march”的意思。

`day_name`对于工作日，使用and `day_abbr`dicts有类似的方法：

```
from calendar import TimeEncoding, day_name, day_abbr

def get_day_name(day_no, locale, short=False):
    with TimeEncoding(locale) as encoding:
        if short:
            s = day_abbr[day_no]
        else:
            s = day_name[day_no]
        if encoding is not None:
            s = s.decode(encoding)
        return s 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-04T10:55:21.287

这是针对 Python 3 更新的 Lauritz 答案的月份部分：

```
from calendar import month_name, different_locale
def get_month_name(month_no, locale):
    with different_locale(locale):
        return month_name[month_no] 
```

# c# - 使用 EditorFor 允许从 1 到 100 的数字

> ID：13037388
> 
> 赞同：2
> 
> 时间：2012-10-23T19:03:48.857
> 
> 标签：c#, asp.net-mvc-3

我尝试使用以下 RegEx 注释，但没有成功：

```
[RegularExpression(@"([0-9]|[0-9]\d|100)$"] 
```

（[这个](https://stackoverflow.com/a/4806298/457500)答案表明这是一个不好的方法）

我也尝试使用 maskedInput 1.2.2 (jQuery)，但它不接受任何单个数字值

```
jQuery(function ($) {
    $("#MyControl").mask("99"); //also tried "9?9"
}); 
```

是否有可能只接受从 1 到 100 的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T19:04:54.830

看看[`RangeAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:08:52.180

简短的回答是“否”，因为整数 1-100 有无限表示（1、01、001、0001 等，都是数字 1 的有效表示。

您可以将数据输入限制为规范表示（1-9、11-99、100），如下所示：

```
(100|([1-9][0-9])|[1-9] 
```

这应该够了吧。

# r - 在 plm 中落后

> ID：13037389
> 
> 赞同：8
> 
> 时间：2012-10-23T19:03:50.117
> 
> 标签：r, lag, plm

这是一个非常简单的问题，但我一直无法找到明确的答案，所以我想我会问它。我使用`plm`包来处理面板数据。我正在尝试使用该`lag`函数来及时滞后变量 FORWARD（默认是检索上一时期的值，我想要来自 NEXT 的值）。我发现了一些旧文章/问题（大约 2009 年）表明这可以通过`k=-1`用作参数来实现。但是，当我尝试这样做时，我得到一个错误。

示例代码：

```
library(plm)
df<-as.data.frame(matrix(c(1,1,1,2,2,3,20101231,20111231,20121231,20111231,20121231,20121231,50,60,70,120,130,210),nrow=6,ncol=3))
names(df)<-c("individual","date","data")
df$date<-as.Date(as.character(df$date),format="%Y%m%d")
df.plm<-pdata.frame(df,index=c("individual","date")) 
```

滞后：

```
lag(df.plm$data,0)
##returns
1-2010-12-31 1-2011-12-31 1-2012-12-31 2-2011-12-31 2-2012-12-31 3-2012-12-31 
         50           60           70          120          130          210

lag(df.plm$data,1)
##returns
1-2010-12-31 1-2011-12-31 1-2012-12-31 2-2011-12-31 2-2012-12-31 3-2012-12-31 
         NA           50           60           NA          120           NA

lag(df.plm$data,-1)
##returns
Error in rep(1, ak) : invalid 'times' argument 
```

我还读过它`plm.data`已经替换`pdata.frame`了`plm`. 但是，`plm.data`似乎根本不适用于该`lag`功能：

```
df.plm<-plm.data(df,indexes=c("individual","date"))
lag(df.plm$data,1)
##returns
[1]  50  60  70 120 130 210
attr(,"tsp")
[1] 0 5 1 
```

我将不胜感激任何帮助。如果有人对用于滞后的包装有其他建议，我会全力以赴。但是，我确实喜欢它，`plm`因为它会自动处理多个个体之间的滞后并跳过时间序列中的空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-18T22:44:23.323

**EDIT2**：滞后（=领先值）在`plm`CRAN 版本 >= 1.6-4 中实现。函数要么是要么`lead()`（`lag()`后一个负整数作为前导值）。

注意使用相同函数名称的任何其他附加包。可以肯定的是，您可以通过完整的命名空间来引用该函数，例如`plm::lead`.

示例来自`?plm::lead`：

```
# First, create a pdata.frame
data("EmplUK", package = "plm")
Em <- pdata.frame(EmplUK)

# Then extract a series, which becomes additionally a pseries
z <- Em$output
class(z)

# compute negative lags (= leading values)
lag(z, -1)
lead(z, 1) # same as line above
identical(lead(z, 1), lag(z, -1)) # TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-01T21:04:49.503

CRAN 中的 collapse 包具有基于 C++ 的函数`flag`以及相关的滞后/超前运算符`L`和`F`. 它支持滞后/超前的连续序列（正值和负值`n`），以及 plm *pseries*和*pdata.frame*类。性能：比 plm 快 100 倍，比 data.table 快 10 倍（撰写本文时 R 中最快的）。例子：

```
library(collapse)
pwlddev <- plm::pdata.frame(wlddev, index = c("iso3c", "year"))
head(flag(pwlddev$LIFEEX, -1:1))     # A sequence of lags and leads
             F1     --     L1
ABW-1960 66.074 65.662     NA
ABW-1961 66.444 66.074 65.662
ABW-1962 66.787 66.444 66.074
ABW-1963 67.113 66.787 66.444
ABW-1964 67.435 67.113 66.787
ABW-1965 67.762 67.435 67.113

head(L(pwlddev$LIFEEX, -1:1))        # Same as above
head(L(pwlddev, -1:1, cols = 9:12))  # Computing on columns 9 through 12
         iso3c year F1.PCGDP PCGDP L1.PCGDP F1.LIFEEX LIFEEX L1.LIFEEX F1.GINI GINI L1.GINI
ABW-1960   ABW 1960       NA    NA       NA    66.074 65.662        NA      NA   NA      NA
ABW-1961   ABW 1961       NA    NA       NA    66.444 66.074    65.662      NA   NA      NA
ABW-1962   ABW 1962       NA    NA       NA    66.787 66.444    66.074      NA   NA      NA
ABW-1963   ABW 1963       NA    NA       NA    67.113 66.787    66.444      NA   NA      NA
ABW-1964   ABW 1964       NA    NA       NA    67.435 67.113    66.787      NA   NA      NA
ABW-1965   ABW 1965       NA    NA       NA    67.762 67.435    67.113      NA   NA      NA
         F1.ODA ODA L1.ODA
ABW-1960     NA  NA     NA
ABW-1961     NA  NA     NA
ABW-1962     NA  NA     NA
ABW-1963     NA  NA     NA
ABW-1964     NA  NA     NA
ABW-1965     NA  NA     NA

library(microbenchmark)
library(data.table)
microbenchmark(plm_class = flag(pwlddev), 
               ad_hoc = flag(wlddev, g = wlddev$iso3c, t = wlddev$year), 
               data.table = qDT(wlddev)[, shift(.SD), by = iso3c]) 

Unit: microseconds
       expr      min        lq      mean   median         uq      max neval cld
  plm_class  462.313  512.5145  1044.839  551.562   637.6875 15913.17   100  a 
     ad_hoc  443.124  519.6550  1127.363  559.817   701.0545 34174.05   100  a 
 data.table 7477.316 8070.3785 10126.471 8682.184 10397.1115 33575.18   100   b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T19:16:50.740

`plm`我遇到了同样的问题，在任何其他包中都找不到好的解决方案。`ddply`很诱人（例如`s5 = ddply(df, .(country,year), transform, lag=lag(df[, "value-to-lag"], lag=3))`），但我无法让我的滞后列中的 NA 正确排列，而不是一个滞后。

我编写了一个蛮力解决方案，它逐行迭代数据帧并用适当的值填充滞后列。它非常慢（我的 13000x130 数据帧为 437.33 秒，而将其转换为 a`pdata.frame`和 using则为 0.012 秒`lag`），但它为我完成了工作。我想我会在这里分享它，因为我在互联网上的其他地方找不到太多信息。

在下面的函数中：

*   `df`是你的数据框。该函数返回`df`一个包含前向值的新列。
*   `group`是面板数据的分组变量的列名。例如，我有多个国家的纵向数据，我在这里使用了“Country.Name”。
*   `x`是您要从中生成滞后值的列，例如“GDP”
*   `forwardx`是将包含前向滞后的（新）列，例如“GDP.next.year”。
*   `lag`是未来的周期数。例如，如果您的数据是按年获取的，则 using`lag=5`将设置`forwardx`为`x`五年后的值。

.

```
add_forward_lag <- function(df, group, x, forwardx, lag) {
for (i in 1:(nrow(df)-lag)) {
    if (as.character(df[i, group]) == as.character(df[i+lag, group])) {
        # put forward observation in forwardx
        df[i, forwardx] <- df[i+lag, x]
    }
    else {
        # end of group, no forward observation
        df[i, forwardx] <- NA
    }
}
# last elem(s) in forwardx are NA
for (j in ((nrow(df)-lag+1):nrow(df))) {
    df[j, forwardx] <- NA
}
return(df)
} 
```

使用内置`DNase`数据集查看示例输出。这在数据集的上下文中没有意义，但它可以让您看到列的作用。

```
require(DNase)
add_forward_lag(DNase, "Run", "density", "lagged_density",3)

Grouped Data: density ~ conc | Run
     Run    conc    density lagged_density
1     1  0.04882812   0.017  0.124
2     1  0.04882812   0.018  0.206
3     1  0.19531250   0.121  0.215
4     1  0.19531250   0.124  0.377
5     1  0.39062500   0.206  0.374
6     1  0.39062500   0.215  0.614
7     1  0.78125000   0.377  0.609
8     1  0.78125000   0.374  1.019
9     1  1.56250000   0.614  1.001
10    1  1.56250000   0.609  1.334
11    1  3.12500000   1.019  1.364
12    1  3.12500000   1.001  1.730
13    1  6.25000000   1.334  1.710
14    1  6.25000000   1.364     NA
15    1 12.50000000   1.730     NA
16    1 12.50000000   1.710     NA
17    2  0.04882812   0.045  0.123
18    2  0.04882812   0.050  0.225
19    2  0.19531250   0.137  0.207 
```

考虑到这需要多长时间，您可能需要使用不同的方法：向后滞后所有其他变量。

# colorbox - Colorbox：如何向colorbox窗口传递和使用数据？（不是 iframe）

> ID：13037391
> 
> 赞同：0
> 
> 时间：2012-10-23T19:03:51.470
> 
> 标签：colorbox

我认为这很容易，但我找不到答案。我想将一些数据传递给彩盒窗口并使用它们。我确实喜欢打开颜色框：

```
$.colorbox({
    href:my_target, 
    iframe: false,
    open: true,
    width: "830px", 
height: "560px",
    speed: "0", 
    transition: "none", 
    opacity:0.5, 
    escKey: true, 
    overlayClose:true,
    data: {"test":"123456"}}); 
```

颜色框已打开，但我无法访问数据“测试”。

我怎样才能做到这一点？可能吗？

如果这不是正确的方法，那有什么好处呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:15:16.017

记住一般的页面模型；当您**不**使用 ColorBox 的 iframe 选项时，插件和内容只是 DOM 的普通成员。您可以从“内部”引用任何变量，就像使用页面加载的任何 javascript 一样。

您可能会使用 ColorBox 的事件挂钩来运行作用于数据的函数。

# highcharts - 按类别对系列进行排序

> ID：13037392
> 
> 赞同：2
> 
> 时间：2012-10-23T19:04:01.233
> 
> 标签：highcharts

我有一个看起来像这样的图表：http: [//jsfiddle.net/rtGFm/37/](http://jsfiddle.net/rtGFm/37/)

我想有一个“排序”按钮，按每个类别从高到低排序，将每个类别的列按不同的顺序排列。这可能与 HighCharts 吗？

```
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories: [
                'foreclosures',
                'nuisances',
                'distance from city center'
            ]
        },
        yAxis: {
            min: 0,
            title: {
                text: ''
            }
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.x +': '+ this.y +' mm';
            }
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: 'Alger Heights',
            data: [49.9, 71.5, 50]
        }, {
            name: 'Shawmut Hills',
            data: [83.6, 78.8, 67]
        }, {
            name: 'Baxter',
            data: [48.9, 38.8, 100]
        }, {
            name: 'Midtown',
            data: [42.4, 33.2, 80]
        }, {
            type: 'scatter',
            data: [55,60,70],
            marker: {
                symbol: 'square',
                lineColor: '#FFFFFF',
                lineWidth: 1,
                radius: 8
            },
            name: 'Average'
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-21T09:13:21.617

得到它的工作，我相信。诀窍是以正确的顺序将每一列添加为具有相同类型（列）的新系列，重复使用颜色并隐藏图例......

非常hackish，独立排序8个类别的JS代码会很难看，但结果看起来不错。

**编辑：**更新小提琴，我看到类别之间的间距随着系列的增长而增长，看起来并不好。

我的 jsfiddle 在[这里](http://jsfiddle.net/z2agkzt0/2/)

```
$(function () {
    $('#container').highcharts({
            chart: {
            inverted: true
        },
        title: {
            text: 'Series sorted in within categories'
        },
        xAxis: {
            categories: ['January']
        },
        series: [{
            type: 'column',
            name: 'Stockholm',
            data: [{x:0, y:95, color: Highcharts.getOptions().colors[0]}]
        }, {
            type: 'column',
            name: 'Göteborg',
            data: [{x:0, y:80, color: Highcharts.getOptions().colors[1]}]
        }, {
            type: 'column',
            name: 'Göteborg',
            data: [{x: 1, name: 'February', y: 98, color: Highcharts.getOptions().colors[1] // VGR's color
            }],
            showInLegend: false,
            dataLabels: {
                enabled: false
            }
        }, {
            type: 'column',
            name: 'Stockholm',
            data: [{x: 1, name: 'February', y: 80, color: Highcharts.getOptions().colors[0] // VGR's color
            }],
            showInLegend: false,
            dataLabels: {
                enabled: false
            }
        }]
    });
}); 
```

兄弟，延斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-25T23:45:28.373

我有同样的问题:) highcharts 仍然没有为这个问题提供任何解决方案，但它足够灵活，所以你可以无论如何排序 - 只需通过 javascript。

将您的数据放在一个单独的值中：

`var dataMain = [{name:"test1",data:5}, {name:"test1",data:1},{name:"test1",data:2}]`

在系列中，您可以添加一个对数据进行排序的函数：

`series: (function(){ for(var i = 0;i<dataMain.length;i++){ dataMain[i].data = dataMain[i].data.sort(function(a,b){ return a[0] - b[0] ; }) return dataMain; }`

希望我一切都好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T07:41:32.683

我觉得这个是可以的

这可能看起来像一个小工作。

由于我们的列数有限，因此在给定示例中我的意思是 4。

如果我们有对每个系列进行排序的数组，那么我们可以处理它们。

单击按钮时，我们可以使用新的数据集和类别数组更新图表。

可能没有来自 APi 的解决方案。在我看来，这是一种可能的方法。

谢谢，

# python - 从模板中获取密钥

> ID：13037401
> 
> 赞同：14
> 
> 时间：2012-10-23T19:04:33.660
> 
> 标签：python, string-formatting

我想获取字符串模板可能在替换中使用的所有可能关键字参数的列表。

**除了重新，还有其他方法吗？**

我想做这样的事情：

```
text="$one is a $lonely $number."
keys = get_keys(text) 
# keys = ('one', 'lonely', 'number') 
```

我正在编写一个简单的 Mad-lib-like 程序，我想用[string.format](http://docs.python.org/library/stdtypes.html#str.format)或[Template strings](http://docs.python.org/library/string.html#template-strings)执行模板替换。我想编写“故事”并让我的程序生成用户需要生成的所有“关键字”（名词、动词等）的模板文件。我知道我可以用正则表达式做到这一点，但我想知道是否有替代解决方案？我对 string.format 和 string template 的替代品持开放态度。

我认为会有解决方案，但我没有在快速搜索中遇到它。我确实找到了这个问题，[使用 python 反向模板](https://stackoverflow.com/questions/8001537/reverse-template-with-python)，但这并不是我真正想要的。它只是重申这可以通过`re`.

**编辑：**

我应该注意这`$$`是“$”的转义，而不是我想要的令牌。`$$5`应呈现为“$ 5”。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T19:12:27.463

如果可以使用，请考虑使用具有方法`string.format`的内置类：`string.Formatter``parse()`

```
>>> from string import Formatter
>>> [i[1] for i in Formatter().parse('Hello {1} {foo}')  if i[1] is not None]
['1', 'foo'] 
```

有关更多详细信息，请参见[此处](http://docs.python.org/library/string.html#string.Formatter.parse)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-10T17:48:15.723

该类`string.Template`具有用作属性的模式。您可以打印模式以获取匹配组

```
>>> print string.Template.pattern.pattern

    \$(?:
      (?P<escaped>\$) |   # Escape sequence of two delimiters
      (?P<named>[_a-z][_a-z0-9]*)      |   # delimiter and a Python identifier
      {(?P<braced>[_a-z][_a-z0-9]*)}   |   # delimiter and a braced identifier
      (?P<invalid>)              # Other ill-formed delimiter exprs
    ) 
```

对于你的例子，

```
>>> string.Template.pattern.findall("$one is a $lonely $number.")
[('', 'one', '', ''), ('', 'lonely', '', ''), ('', 'number', '', '')] 
```

正如您在上面看到的，如果您`${one}`使用大括号，它将转到结果元组的第三位：

```
>>> string.Template.pattern.findall('${one} is a $lonely $number.')
[('', '', 'one', ''), ('', 'lonely', '', ''), ('', 'number', '', '')] 
```

因此，如果您想获得所有密钥，则必须执行以下操作：

```
>>> [s[1] or s[2] for s in string.Template.pattern.findall('${one} is a $lonely $number.$$') if s[1] or s[2]]
['one', 'lonely', 'number'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T19:33:32.630

您可以使用记录调用的检测字典或 defaultdict 将其渲染一次，然后检查它的要求。

```
from collections import defaultdict
d = defaultdict("bogus")
text%d
keys = d.keys() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:07:08.520

`str.strip()`一起尝试`str.split()`：

```
In [54]: import string

In [55]: text="$one is a $lonely $number."

In [56]: [x.strip(string.punctuation) for x in text.split() if x.startswith("$")]
Out[56]: ['one', 'lonely', 'number'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T19:10:22.750

你可以试试：

```
def get_keys(s):
    tokens = filter(lambda x: x[0] == "$", s.split())
    return map(lambda x: x[1:], tokens) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T19:10:55.727

为什么要避免使用正则表达式？他们为此工作得很好：

```
>>> re.findall(r'\$[a-z]+', "$one is a $lonely $number.")
['$one', '$lonely', '$number'] 
```

对于模板，请查看[re.sub](http://docs.python.org/library/re.html#re.sub)，它可以用回调调用来做几乎你想要的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T19:13:31.083

```
>>> import string
>>> get_keys = lambda s:[el.strip(string.punctuation) 
                         for el in s.split()if el.startswith('$')]
>>> get_keys("$one is a $lonely $number.")
['one', 'lonely', 'number'] 
```

# php - PHP“未定义函数”，即使它实际上在同一个文件中

> ID：13037405
> 
> 赞同：1
> 
> 时间：2012-10-23T19:04:50.803
> 
> 标签：php, function, email, cakephp

我在这个特定的应用程序上使用 CakePHP。通过 在网站上提交博客文章时`add()`，它应该通过 向管理员发送通知电子邮件`pending_email()`，但我收到以下错误：

`Fatal error: Call to undefined function pending_email() in .../app/controllers/blog_posts_controller.php on line 134`

这是代码：

```
function add($blog_id = null) {
    if (!empty($this->data)) {
        switch ($this->params['form']['submit']) {
            case 'draft':
                $this->data['BlogPost']['status_id'] = DRAFT;
                break;
            case 'approval':
                $this->data['BlogPost']['status_id'] = PENDING;
                break;
            case 'publish':
                $this->data['BlogPost']['status_id'] = PUBLISHED;
                break;
        }
        $this->data['BlogPost']['tags'] = $this->__tagCleanup($this->data['BlogPost']['tags']);
        $this->BlogPost->create();
        if ($this->BlogPost->save($this->data)) {
            if ($this->data['BlogPost']['status_id'] == PUBLISHED) {
                $this->__tagUp($this->data['BlogPost']['blog_id'], $this->data['BlogPost']['tags']);
            }

            // Send the e-mail notating that a blog is pending
            pending_email($blog_id);          

            $this->Session->setFlash(__('The blog post has been saved', true));
            $this->redirect(array('action' => 'index', $this->data['BlogPost']['blog_id']));
           } else {
            $this->Session->setFlash(__('The blog post could not be saved. Please, try again.', true));
        }
    }
    // fetch blog_post context
    $this->BlogPost->Blog->recursive = -1;
    $blog = $this->BlogPost->Blog->read(array('id','title'),$blog_id);
    $this->set('blog', $blog);

    $this->data['BlogPost']['user_id'] = $this->user_id;
    if (!is_null($blog_id)) {
        $this->data['BlogPost']['blog_id'] = $blog_id;
    }

}

function pending_email($id) {
        if (!$id) {
            $this->Session->setFlash(__('Invalid blog post', true));
            $this->redirect(array('action' => 'index'));
        }

        $this->BlogPost->contain(array(
            'User' => array('fields' => 'id', 'full_name', 'name', 'last_name'),
            'Tag' => array('fields' => 'name'),
            'BlogPostComment' => array('fields' => array('created', 'content')),
            'BlogPostComment.User' => array('fields' => array('name', 'last_name')),
        ));

        if(($blogPost = $this->BlogPost->read(null, $id)) == NULL){
            $this->Session->setFlash(__('Invalid blog post', true));
            $this->redirect(array('controller'=>'spotlights', 'action' => 'index'));
        }

        $this->set('blogPost', $this->BlogPost->read(null, $id));
        $temp = $this->BlogPost->read(null, $id);
        $this->BlogPost->Blog->recursive = -1;

        //Blog information
        $title = $temp['BlogPost']['title'];
        $author = $temp['User']['full_name'];
        $date_created = $temp['BlogPost']['created'];

        // Properly format the excerpt
        $excerpt = preg_replace("/&#?[a-z0-9]+;/i","", $temp['BlogPost']['content']);

        $content = "<h2>Hello,</h2><p>$author has submitted a new blog post for review. <ul><li><b>Title:</b> $title </li><li><b>Author</b>: $author</li><li><b>Excerpt</b>: \"$excerpt\"</li><li><b>Created on:</b> $date_created</li></ul></p><p>You can log into the dashboard to approve this post.</p>";
        $to = ADMIN_EMAIL;
        $from = SMTP_FROM;
        $subject = "New blog post submitted by $author";
        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
        $headers .= 'From: ' . $from . "\r\n" .
        'Reply-To: ' . $from . "\r\n" .
        'X-Mailer: PHP/' . phpversion();

        //Send the e-mail
        mail($to, $subject, $content, $headers);
} 
```

为了隐私起见，我删掉了一些东西，但不应该涉及这个问题。一如既往，非常感谢任何想法！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T19:07:11.287

由于`pending_email`不是全局函数并且是控制器上的方法，因此您需要这样调用它：

`$this->pending_email($blog_id);`

关键字是`$this`指博客文章控制器类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T19:07:10.927

由于这些方法在您的控制器类中，您应该使用`$this->pending_email()`，而不仅仅是`pending_email()`：

```
$this->pending_email($blog_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:08:25.493

你在一个对象中，你需要用 $this 来引用它。

```
 $this->pending_email($blog_id); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:16:39.620

我想你应该使用：

```
$this->pending_email($blog_id); 
```

它会起作用的。

# java - 在 Android 中查找和暂停播放音频的任务

> ID：13037408
> 
> 赞同：1
> 
> 时间：2012-10-23T19:04:56.303
> 
> 标签：java, android, audio, android-activity, task

我需要确定是否有任何其他活动（如 Pandora）正在打开和运行，并暂停和恢复任务以暂停和恢复音频。

这可能吗？如果是这样，我该怎么做？

我知道如果您拥有正确的权限，就有能力获得正在运行的任务，但我不知道从那里去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:08:13.827

> 这可能吗？

并不真地。如果您的目标是播放一些音频（例如，铃声），请使用音频焦点方法`AudioManager`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:47:30.507

您不能暂停，但*可以*使用另一个音频流。

将[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)与 ALARM 线程一起使用。

# r - 如何获取每个探针的基因本体 (GO) 术语

> ID：13037409
> 
> 赞同：1
> 
> 时间：2012-10-23T19:04:56.080
> 
> 标签：r, ontology, bioconductor

我是 R/BioC 的新手。我正在尝试进行基于 GO 的基因聚类。输入需要是每行中的基因名称和 GO 术语。例子：

```
AP4B1 GO:0005215 GO:0005488 GO:0005515 GO:0005625 GO:0005802 GO:0005905
BCAS2 GO:0005515 GO:0005634 GO:0005681 GO:0008380 GO:0031202 
```

我尝试在 bioconductor 中使用注释：

```
library("rat2302.db") 
library(annotate)
testid<-c("1367462_at","1380262_at", "1392516_a_at", "1396521_at")
goid1 <- rat2302GO[testid] 
```

但我只在单独的行中得到每个 GO 术语：

```
toTable(goid1)

probe_id      go_id Evidence Ontology
1  1367462_at GO:0008152      IEA       BP
2  1367462_at GO:0008152      ISO       BP
3  1367462_at GO:0006508      IMP       BP
4  1367462_at GO:0005886      IEA       CC
5  1367462_at GO:0005737      IEA       CC
6  1380262_at GO:0005575       ND       CC
7  1380262_at GO:0005634      IEA       CC
8  1380262_at GO:0005737      IEA       CC
9  1367462_at GO:0005509      IEA       MF
10 1367462_at GO:0005509      TAS       MF
11 1367462_at GO:0004198      IDA       MF
12 1367462_at GO:0004198      IEA       MF
13 1367462_at GO:0004198      ISO       MF
14 1367462_at GO:0046982      IPI       MF
15 1380262_at GO:0000166      IEA       MF 
```

也许有一种更简单的方法可以获取每个基因的所有 GO 术语。不幸的是，我找不到它。

任何帮助是极大的赞赏。

谢谢R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T12:17:24.023

好的，从您的输入示例中，尚不清楚您希望如何格式化输入。是你提出的一个`data.frame`吗？还是第一个元素是基因名称的两个字符向量？还是您想要一个格式为您的示例的 .txt 文件？

我想最简单的事情就是简单地`split`通过`probe_id`，如下

```
tab <- toTable(goid1)
split(tab$go_id, tab$probe_id) 
```

这给出了输出

```
$`1367462_at`
[1] "GO:0006508" "GO:0005886" "GO:0005737" "GO:0070062" "GO:0005509" "GO:0004198" "GO:0046982"
[8] "GO:0005509" "GO:0004198"

$`1380262_at`
[1] "GO:0005575" "GO:0005634" "GO:0005737" "GO:0015459" "GO:0004674" "GO:0005524" "GO:0015459"
[8] "GO:0015459"

$`1396521_at`
[1] "GO:0008289" 
```

任何状况之下。这是您想要的每个基因/探针集的 GO 术语向量列表。将其操纵成您想要的应该相当容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T01:56:13.997

ncbi 提供了一个名为gene2go 的文件，这可能是你想要的

# c# - 有关内存中强制转换的 C# 引用类型的信息

> ID：13037413
> 
> 赞同：6
> 
> 时间：2012-10-23T19:05:02.047
> 
> 标签：c#, memory, casting, polymorphism, clr

如果我有两个类，`A`并且`B`B 从 A 派生：

```
class A {}
class B : A { } 
```

我可以很高兴地向上`B`转换 to的一个实例`A`。

```
B b = new B();
A a = b; 
```

现在，我可以理解运行时如何确定底层类型是 B，正如[ECMA-335](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)（通用语言基础设施（CLI）分区 I 到 VI）的第 132 页所述

> 实例化类型的对象应携带足够的信息以在运行时恢复其确切类型（包括其泛型参数的类型和数量）。[理由：这是正确实现强制转换和测试实例以及反射功能所必需的

那么，运行时如何知道虽然底层类型是`B`它实际上存储在一个`A`. 我知道我不会看到可用的方法`B`，但如果基础类型是`B`，它如何存储存储位置的类型`A`？

那有意义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T19:11:44.910

对象是 B，CLI 知道它是 B。了解 A 的主要是编译器，然后编译器将*字段*或*本地*声明为 A 类型（或者，在某些情况下，如方法链接，类型是通过方法的返回类型知道的，它被硬标记到**调用者的**IL 中）。所以基本上：调用代码本身就是“我认为这是一个 A”。作业等通常都是可以提前验证的，因此没有出错的风险。如果你试图破解 IL 故意弄错它，运行时会告诉你并拒绝运行该方法。由于这些原因，将已知为 B 的值分配给 A 本地/字段不需要任何类型检查 - 它只是直接分配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T19:12:04.770

对象的实际类型始终与对象本身一起存储在堆上。指向该对象的引用可以是不同的类型，只要该类型可以从实际类型中分配（例如，该类型的基类或实现的接口）。

堆上的每个对象都存储了少量数据——该对象的类型就是其中之一。

# axapta - 以动态形式覆盖方法

> ID：13037416
> 
> 赞同：1
> 
> 时间：2012-10-23T19:05:11.420
> 
> 标签：axapta, x++

有没有办法以动态形式覆盖方法？

我已经从代码创建了一个表单（创建表单、添加数据源等，然后是 FormRun）。问题在于数据源验证。在正常形式（在 AOT 中）我会`return true`在 validateWrite 中使用以防止对表进行正常验证。

我如何仅从代码中实现这一点？（或更准确地说：当我只有上课时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:26:14.850

我认为[FormBuild.addMethod](http://msdn.microsoft.com/en-US/library/aa598821%28v=ax.50%29.aspx)是您正在寻找的。提供`FormBuildDatasource`对象作为`addMethod`方法的第三个参数。

# haskell - 为什么我会因为使用 show 错误而得到 (Show t0) 的 No 实例？

> ID：13037417
> 
> 赞同：3
> 
> 时间：2012-10-23T19:05:14.933
> 
> 标签：haskell

我被困在这个问题上，而且我对 Haskell 很陌生，我试图用以下代码完成第一个欧拉问题：

```
main = putStrLn . show . sum $ [3,6..1000]:[5,10..1000] 
```

这是错误的第一部分：

```
euler/1.hs:1:19:
    No instance for (Show t0) arising from a use of `show'
    The type variable `t0' is ambiguous
    Possible fix: add a type signature that fixes these type variable(s)
    Note: there are several potential instances:
      instance Show Double -- Defined in `GHC.Float'
      instance Show Float -- Defined in `GHC.Float'
      instance (Integral a, Show a) => Show (GHC.Real.Ratio a)
        -- Defined in `GHC.Real'
      ...plus 23 others
    In the first argument of `(.)', namely `show'
    In the second argument of `(.)', namely `show . sum'
    In the expression: putStrLn . show . sum 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:13:53.687

你期望`[3,6..1000]:[5,10..1000]`做什么？`x : xs`将对象准备到对象列表中。这里两个参数都是整数列表。您是否想要`++`（串联）。

需要说的是，无论您期望`:`做什么，您的方法都不正确。如果您想自己弄清楚，我不会对此进行扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T20:40:15.207

不幸的是，您收到的错误消息缺少问题。在 ghci 7.4.2 中加载它会提供更多有用的错误消息：

```
No instance for (Num [t0])
  arising from a use of `sum'
Possible fix: add an instance declaration for (Num [t0])
In the second argument of `(.)', namely `sum'
In the second argument of `(.)', namely `show . sum'
In the expression: putStrLn . show . sum

No instance for (Enum [t0])
  arising from the arithmetic sequence `5, 10 .. 1000'
Possible fix: add an instance declaration for (Enum [t0])
In the second argument of `(:)', namely `[5, 10 .. 1000]'
In the second argument of `($)', namely
  `[3, 6 .. 1000] : [5, 10 .. 1000]'
In the expression:
  putStrLn . show . sum $ [3, 6 .. 1000] : [5, 10 .. 1000] 
```

这似乎暗示问题出在表达式中`[3, 6 .. 1000] : [5, 10 .. 1000]`，实际上是因为 is 的类型`:`并且 `a -> [a] -> [a]`只是`x:xs`将元素添加`x`到 list 的开头`xs`。在`[3, 6 .. 1000] : [5, 10 .. 1000]` 您尝试将`[3, 6 .. 1000]`其作为元素添加到 时`[5, 10 .. 1000]`，但 haskell 中的列表必须包含相同类型的元素（它们是同质的），因此这将不起作用。这是因为`[3, 6 .. 1000]`有 类型`[Int]`的 元素`[5, 10 .. 1000]`有 类型`Int`。

我认为您正在寻找的是`++`具有类型`[a] -> [a] -> [a]`并且`xs ++ ys`是列表`xs`和列表的串联`ys`：

```
ghci> putStrLn . show . sum $ [3,6..1000] ++ [5,10..1000]
267333 
```

# coldfusion - 如何在 ORDER BY 中使用 cfqueryparam 列出与“School of”匹配的标题

> ID：13037418
> 
> 赞同：2
> 
> 时间：2012-10-23T19:05:14.627
> 
> 标签：coldfusion, sql-order-by, cfquery

如何在 ORDER BY 中使用 cfqueryparam 以首先列出与“School of”匹配的标题，然后仅列出其余标题？这是我当前的查询：

```
<cfquery name="getblogs" dbType="query">
   SELECT title, id,description,date_registered,public1,uri
   FROM myquery 
where public1<>0
order by title asc
</cfquery> 
```

我首先使用“学校”标题过滤的语法，然后其余的可以在 ASC 中排序。

**编辑：**如何根据 ID 匹配输出特定标题？我试过这个但得到一个错误。

```
<cfquery name="getschoolblogs" dbType="query">
   SELECT id, title, uri 
   FROM   myquery 
   WHERE  id = 396,378
   ORDER BY title asc
</cfquery> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:21:33.067

s 的一种方式是这样的：

```
<cfquery name="getblogs" dbType="query">
   SELECT title, id,description,date_registered,public1,uri,
   CASE left(title, 9) WHEN 'School of' THEN 1 ELSE 2 END as sortIdx
   FROM myquery 
   where public1<>0
   order by sortIdx, title asc
</cfquery> 
```

你可以对条件做一些更好的变化，这只是我想到的第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:20:02.257

[QoQ](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0e4fd-7ff0.html)非常有限。它们不支持以这种方式更改自然排序顺序所需的运算符或函数。您可以做的是`CASE`在您的数据库查询中使用 a 来创建一个额外的排序列。然后在您的数据库查询或 QoQ 中对其进行排序。

```
 SELECT CASE WHEN title LIKE 'School of %' THEN 1
                 ELSE 2
            END AS TitleSortValue
            , title id,description,date_registered,public1,uri
     FROM   YourTable
     ORDER BY TitleSortValue, Title ASC 
```

此外，您不能`cfqueryparam`在 ORDER BY 子句中使用。cfqueryparam 防止输入被*评估*为 sql。所以它只能用于简单的值，而不是对象（即表或列名）。

> `where id=396,378`

**编辑：**要回答您以后的问题，您只能将单个值与`=`. 用于`IN (...)`过滤多个值：

```
 WHERE ID IN  ( <cfqueryparam value="#listOfIDValues#" 
                      cfsqltype="cf_sql_integer"
                      list="true">
                ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:47:38.413

您不需要返回不需要的列，但要获得相同的结果，只需按顺序使用 case 语句。

```
<cfquery name="getblogs" datasource="dsn">
   SELECT title, id, description, date_registered, public1, uri
   FROM   tbl_blogs
   WHERE  public1<> 0
   ORDER BY CASE left(title, 9) WHEN 'School of' THEN 1 ELSE 2 END,
            title ASC
</cfquery> 
```

这将避免返回您不需要的数据。

# php - 使用带有 levenshtein 的 php 在 MySQL 查询中搜索类似的字符串

> ID：13037421
> 
> 赞同：1
> 
> 时间：2012-10-23T19:05:21.253
> 
> 标签：php, pdo

我正在尝试找出使用`levenshtein()`in的“最佳”选项`PHP`。

当用户将新客户输入数据库时​​，我正在使用 PDO 语句。

我想要做的是在添加新客户之前进行查询搜索，看看该客户是否已经在数据库中，以避免可能的重复条目。我不能使用`MATCH/AGAINST`，因为客户可能在任何时候都输入了不同的内容。

这将根据数据库检查名字....

```
$input1 = $_POST['FIRSTNAME'];

$result = array();
$count=1;
            $find = $dbh->query('SELECT BillingFirstName FROM Customers');

            while ($row = $find->fetch (PDO::FETCH_ASSOC))
                 {
                    $fn = $row['BillingFirstName'];
                    array_push($result, $fn);
                 }

        foreach ($result as $word) {

                    echo $word.'<br>';

                        $shortest = -1;
                        $lev = levenshtein($input1, $word);

                    if ($lev == 0) {

                        $closest = $word;
                        $shortest = 0;
                        break;
                    }

                    if ($lev <= $shortest || $shortest < 0) {

                        $closest  = $word;
                        $shortest = $lev;
                    }

            }

        echo "Input word: $input1\n";
        if ($shortest == 0) {
            echo "Exact match found: $closest\n";
        } else {
            echo "Did you mean: $closest?\n";
        } 
```

我将如何添加其他详细信息，例如姓氏、地址、州、邮编。

我什至可以添加更多，还是需要创建数组并将其与地址的每个部分循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:27:48.227

这将非常慢，特别是如果数据库是任何大小的，你应该使用 MySQL 中的 levenshtein 函数（不是 php）

这是一个很好的：[Levenshtein distance](http://www.artfulsoftware.com/infotree/queries.php#552)

# java - 如何设置与 DVR 的连接并解码数据？

> ID：13037422
> 
> 赞同：9
> 
> 时间：2012-10-23T19:05:28.820
> 
> 标签：java, android

我的系统由一台数字录像机 (dvr) 和两台摄像机组成，它们与 dvr 相连。dvr 也可用作服务器（连接到 LAN）。系统中包含一个 android 应用程序，我在其中放置了有关服务器、端口、用户名和密码的信息（我可以使用服务器软件添加帐户）。该应用程序从摄像机流式传输视频。我还可以通过 http（仅限 IE）连接 dvr，然后显示 activeX 应用程序。

我要做的是编写类似的应用程序，但我遇到了一个问题——如何从 dvr 获取视频流？我不是 Java 专家，并尝试与 dvr 连接，但未成功。

这是我的代码：

```
import java.net.*;
import java.io.*;

public class VideoStream
{

final static int BUFFER_SIZE = 1024000;
public static void main(String[] args) throws Exception 
{
    Authenticator.setDefault(new Authenticator()
    {
        protected  PasswordAuthentication  getPasswordAuthentication()
        {
            System.out.println("Authenticatting...");
            PasswordAuthentication p=new PasswordAuthentication("login", "password".toCharArray());
        return p;       
        }
    });
    Socket s = new Socket();
    String host = "192.168.80.107"; //192.168.80.107
    PrintWriter s_out = null;
    BufferedReader s_in = null;
    BufferedInputStream bufferedInputStream = null;

    try
    {
        s.connect(new InetSocketAddress(host, 34599));
        System.out.println("Is connected? : " + s.isConnected());

        s_out = new PrintWriter(s.getOutputStream(), true);
        s_in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        //bufferedInputStream = new BufferedInputStream(s.getInputStream());
    }
    catch(UnknownHostException e)
    {
        e.printStackTrace();
        System.exit(1);
    }
    catch(Exception e)
    {
        e.printStackTrace();
        System.exit(1);
    }

    byte[] b = new byte[BUFFER_SIZE];
    //bufferedInputStream.read(b);

    int bytesRead = 0;
    System.out.println("Reading... \n");
    while((bytesRead = s_in.read()) > 0)
    {
        System.out.println(s_in.readLine());
    }
    System.out.println("Done");
} 
```

我尝试了不同的端口（TCP 和包含的 android 应用程序）。套接字与服务器连接，但是当我尝试使用 read() 方法时它“挂起”（即使在 while 循环之外）。身份验证器也不起作用。

关于dvr的一些信息：

1.  协议支持：TCP/IP、UDP、SMTP、NTP、DHCP、DDNS
2.  视频压缩：H.264
3.  操作系统：linux

我将非常感谢任何建议。

# python - 如何在没有自我的情况下访问类范围变量？

> ID：13037426
> 
> 赞同：15
> 
> 时间：2012-10-23T19:05:36.530
> 
> 标签：python, class, static, scope

所以我有一个类，我将其用作本地命名空间。我在类中有一些静态函数，但它们无法访问类范围变量。为什么是这样？

```
class Foo:
    foo_string = "I am a foo"

    @staticmethod
    def foo():
        print foo_string 
```

* * *

```
>>> Foo.foo()
  [Stack Trace]
  NameError: global name 'foo_string' is not defined 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T19:07:43.667

Python不会让类变量以这种方式落入作用域，有两种方法可以做到这一点，第一种是使用类方法：

```
@classmethod
def foo(cls):
    print(cls.foo_string) 
```

我认为这是最好的解决方案。

第二种是通过名称访问：

```
@staticmethod
def foo():
    print(Foo.foo_string) 
```

请注意，一般来说，使用类作为命名空间并不是最好的方法，只需使用具有顶级函数的模块，因为这更像你想要的那样。

像这样没有作用域的原因主要是由于 Python 的动态特性，当你在类中插入一个函数时它会如何工作？它必须有条件地添加特殊行为，这将非常难以实现并且可能很脆弱。它还有助于使事情保持显式而不是隐式 - 很清楚什么是类变量而不是局部变量。

# c# - 在 Web 表单中异步调用多个服务器操作

> ID：13037428
> 
> 赞同：1
> 
> 时间：2012-10-23T19:05:57.937
> 
> 标签：c#, asp.net, asynchronous, webforms

我在我的网站上执行了一项操作，要求我检查多个 Web 服务器并汇总结果。目前，这是针对每个 Web 服务器同步完成的`foreach`，这可能会很慢，具体取决于 Web 服务器的响应速度。

我想做的是异步请求每个请求，并在所有结果全部完成时聚合所有结果。

我的问题是 - 使用 ASP.NET Webforms，最好的方法是什么？有什么我应该避免的吗？

每个请求可能需要 2 秒，所以我想同时将它们全部关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:36:39.687

[这听起来像是对“标准”异步 IO](https://stackoverflow.com/search?q=%5Bc%23%5D+asynchronous+IO&submit=search)或“标准”线程 IO的一种很好的照顾。

Where`T`代表`{time1, time2, ..}`，这将做出响应，`O(max(T))`而不是`O(sum(T))`- 假设没有顺序依赖或其他瓶颈。

这可以使用任何一个来完成

**异步 IO** - IO 不会阻塞线程

*   [异步/等待](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)（“即将到来”）
*   或使用“旧”的[BeginX/EndX 异步对](http://msdn.microsoft.com/en-us/library/86wf6409(v=vs.85).aspx)或其他 IAsync 接口

或**同步 IO，但线程化**- IO 确实阻塞了单个线程

*   .NET4 中的 TPL
*   或“旧手动”[线程/池](https://stackoverflow.com/questions/1976073/recommendations-for-executing-net-httpwebrequests-in-parallel-in-asp-net)（链接的帖子具有相同的“要求”）

使用的 .NET 版本和可用于获取外部数据的 API 是决定哪种方法[更]合适的因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:13:28.903

我会使用 jQuery 对服务器进行异步 AJAX 调用。但是，我会使用 ashx 处理程序而不是 WebForm 来处理服务器上的 AJAX 调用并将数据发送回客户端；ashx 处理程序比 WebForms 更轻量级。这是编写 ASHX 处理程序的快速教程http://www.dotnetperls.com/ashx 这对您有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:39:33.377

如果您使用的是 .NET Framework 4，则可以使用 Task 并行库来实现这一点。假设`GetDataFromServer`您必须为不同的服务器调用该方法，您可以执行类似于以下逻辑的一段逻辑来从所有服务器获取数据：

```
var d1 = Task.Factory.StartNew(() => GetDataFromServer("server1"));
var d2 = Task.Factory.StartNew(() => GetDataFromServer("server2"));
var d3 = Task.Factory.StartNew(() => GetDataFromServer("server3"));
var d4 = Task.Factory.StartNew(() => GetDataFromServer("server4"));

TaskCoordinator.WhenAll(new Task[] {d1, d2, d3, d4}); 
```

上述步骤异步调用所有四个方法。它将等待所有这些都完成。每个操作的结果存储在`Result`相应`Task`对象的属性中。因此，您可以使用 d1.Result、d2.Result 等来获取结果，以对从方法调用获得的结果执行逻辑。

# cherrypy - cherrypy.session 不能在 Chrome 上运行，但在 Firefox 上运行

> ID：13037429
> 
> 赞同：0
> 
> 时间：2012-10-23T19:06:03.330
> 
> 标签：cherrypy

我使用 CherryPy（3.2.0 版）运行一个网络，并使用它`cherrypy.session`来存储特定于会话的数据。它与 Firefox 完美配合。但是，我注意到cherrypy.session 在Chrome 上会出现问题。基本上，当浏览后续页面时，看起来会话变量会重置。

我相信我的配置设置正确

```
tools.sessions.on = True
tools.sessions.storage_type = "ram"
tools.sessions.storage_path = "/home/dmitry/test/sessions"
tools.sessions.timeout = 60
tools.sessions.name = "test" 
```

什么会导致这种特定于浏览器的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:03:39.527

我想现在您已经找到了解决方案，但一个可能的原因可能是开发服务器在 localhost 上运行，并且 chrome 拒绝设置 cookie。您必须设置例外以使其正常工作。在谷歌上搜索这个问题会带来一些有希望的结果。

# python - 根据渐变的符号为数据分配颜色（Python）

> ID：13037432
> 
> 赞同：1
> 
> 时间：2012-10-23T19:06:15.127
> 
> 标签：python, numpy, plot, gradient

我有两列数据，x 和 y。y 数据采用下面的三角波形状。如您所见，三角形有 2 个正梯度部分和 1 个负梯度部分。

![y 数据的三角形（幅度不重要）](../Images/ec8e9d6aeb7945e4dd309c0be433bc84.png)

我想写一个程序：

*   查询垂直数组中的当前条目相对于数组中的后续条目是否具有正梯度或负梯度。
*   然后，针对 x 绘制 y 数据，其中具有正梯度的 y 值（及其各自的 x 值）使用一种颜色绘制，而负点使用另一种颜色绘制。

这在 Python 中是如何做到最好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:05:47.613

```
filen = 'filename.txt'
x = loadtxt(fn,unpack=True,usecols=[0]) 
y = loadtxt(fn,unpack=True,usecols=[1])

n = ma.masked_where(gradient(y) < 0, y)
p = ma.masked_where(gradient(y) > 0, y)

pylab.plot(x,n,'r',x,p,'g') 
```

对我有用！

# php - Symfony2 - HTTPS 连接的单独子域

> ID：13037438
> 
> 赞同：4
> 
> 时间：2012-10-23T19:06:59.040
> 
> 标签：php, symfony, acl

如何为安全内容指定不同的子域：即在 security.yml 文件中，我在该`access_control:`部分下有以下内容：

```
- { path: ^/Account/Login, access: isAnonymous(), requires_channel: https } 
```

这对我的开发环境来说很好，因为我有一个自签名的通配符证书。实际上，在我为这个特定网站的生产环境中，我有一个现有的 SSL 证书，我想使用它而不是购买另一个。

所以，假设我的网站是[http://www.somesite.com/](http://www.somesite.com/)并且需要在[https://secure.somesite.com/](https://secure.somesite.com/)访问安全的东西......我如何告诉 Symfony2 去那里呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:19:07.340

希望基于主机名的路由是 Symfony 2.2 中可用的功能。看看这个[Pull Request](https://github.com/symfony/symfony/pull/3378)。

时机成熟时，您将能够[为不同的 URL 强制使用 HTTPS](http://symfony.com/doc/2.0/cookbook/security/force_https.html)（就像您现在所做的那样），并为您的路由添加主机名要求。这两件事结合起来可以让您使用单独的子域进行 HTTPS 连接。

同时，如果你等不及这个功能的到来，你可以试试 这篇[博客文章。](http://jay-team.blogspot.com.es/2011/09/symfony2-routing-requirement-in.html)

希望能帮助到你。

# sql - 如何找到长时间运行的查询？

> ID：13037446
> 
> 赞同：3
> 
> 时间：2012-10-23T19:07:21.827
> 
> 标签：sql, sql-server, ssas, mdx

我们正在使用 SSAS 和 MOLAP。在 SQL 领域，我知道如何查询以获得运行时间最长的查询（请参阅[此 SO 问题](https://stackoverflow.com/q/941763/301816)）。如果我们可以对我们的多维数据集做同样的事情，得到一个长期运行的 MDX 查询列表，那就太好了。这可能吗？这个查询会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:19:11.183

您可以使用 SQL Server Profiler 监控 SSAS 性能。根据[MSDN](http://msdn.microsoft.com/en-us/library/ms174779.aspx)，您可以例如*监控 Analysis Services 实例的性能*并*识别运行缓慢的 MDX 语句*。

以下是一些额外的资源：

*   [在 SSAS 2008 中使用 Profiler 简介](http://www.bidn.com/blogs/adamjorgensen/ssas/463/introduction-to-using-profiler-with-ssas-2008)
*   [我的 SSAS 查询调优快速指南第一部分](https://thomasivarssonmalmo.wordpress.com/2012/01/28/my-quick-guide-to-ssas-query-tuning-part-one/)

# r - 频率计数

> ID：13037449
> 
> 赞同：1
> 
> 时间：2012-10-23T19:07:41.297
> 
> 标签：r

我有这样的情况：
df

```
List      Count 
R472        1   
R472        1   
R472        2 
R472        2       
R845        1   
R845        2   
R845        2
....       ... 
```

我想要以下输出：

df

```
List           freq_of_number1   freq_of_number2 
R472                  2                 2   
R845                  1                 2
.... 
```

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:17:31.943

这是一份工作`aggregate`：

```
d <- read.table(text="List      Count 
R472        1   
R472        1   
R472        2 
R472        2       
R845        1   
R845        2   
R845        2", header=TRUE)

aggregate(Count ~ List, data=d, FUN=table)

#   List Count.1 Count.2
# 1 R472       2       2
# 2 R845       1       2 
```

编辑：

上面的代码适用于您提供的情况，并且由于您已经接受了答案，我认为它也适用于您的较大情况，但是如果任何条目`List`缺少`Count`. 对于更一般的情况：

```
DF <- read.table(text="List      Count 
R472        1   
R472        1   
R472        2 
R472        2       
R845        1   
R845        2   
R845        2
R999        2", header=TRUE)

f <- function(x) {
    absent <- setdiff(unique(DF$Count), x)
    ab.count <- NULL
    if (length(absent) > 0) {
        ab.count <- rep(0, length(absent))
        names(ab.count) <- absent
    } 
    result <- c(table(x), ab.count)
    result[order(names(result))]
}
aggregate(Count ~ List, data=d, FUN=f)

#   List Count.1 Count.2
# 1 R472       2       2
# 2 R845       1       2
# 3 R999       0       1 
```

编辑2：

刚刚看到@JasonMorgan 的回答。去接受那个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T19:28:06.997

`table`功能不行？

```
> with(DF, table(List, Count))
      Count
List   1 2
  R472 2 2
  R845 1 2 
```

更新：根据布兰登的评论，如果您不想使用，这也可以`with`：

```
> table(DF$List, DF$Count) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T19:18:06.853

我认为有一种更有效的方法，但这里有一个想法

```
DF <- read.table(text='List      Count 
R472        1   
R472        1   
R472        2 
R472        2       
R845        1   
R845        2   
R845        2', header=TRUE)

Freq <- lapply(split(DF, DF$Count), function(x) aggregate(.~ List, data=x, table ))
counts <- do.call(cbind, Freq)[, -3]
colnames(counts) <- c('List', 'freq_of_number1', 'freq_of_number2')
counts
List freq_of_number1 freq_of_number2
1 R472               2               2
2 R845               1               2 
```

# php - Kohana 分页和 JavaScript 选项卡

> ID：13037460
> 
> 赞同：1
> 
> 时间：2012-10-23T19:08:23.480
> 
> 标签：php, jquery, kohana

好的，所以基本上我已经使用 Kohana 创建了一个简单的页面，用于使用选项卡显示用户的消息收件箱/发件箱。

我的控制器是这样的：

```
$content                 = View::factory('messages')->bind('user', $user)->bind('received', $received)->bind('sent', $sent)->bind('pager_links', $pager_links);
$user                    = Auth::instance()->get_user();
$message_count           = ORM::factory('message')->where('to_id', '=', $user)->where('read', '=', '0')->count_all();
$pagination              = Pagination::factory(array(
    'total_items' => $message_count,
    'items_per_page' => 10
));
$received                = ORM::factory('messages')->where('messages.to_id', '=', $user)->limit($pagination->items_per_page)->offset($pagination->offset)->find_all();
$sent                    = ORM::factory('messages')->where('messages.user_id', '=', $user)->limit($pagination->items_per_page)->offset($pagination->offset)->find_all();
$pager_links             = $pagination->render();
$this->template->content = $content; 
```

到目前为止，我只在视图中显示收到的消息和分页，它工作正常。但是我想实现一个选项卡容器来在同一页面上显示接收和发送的项目。

我挠头想知道如何在不影响两个选项卡的情况下为每个选项卡使用分页方面。使用现有方法的最佳方向是什么？选择选项卡时，可能会在 URL 中添加一个附加参数...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:41:14.943

基本上，您的问题是您不能`page`同时在两个选项卡的查询字符串中使用，因为显然它会影响两个分页功能。幸运的是，实际上有一个配置打开，允许您`current page`在查询字符串中指定参数的来源。

试试这个...

```
$pagination              = Pagination::factory(array(
    'current_page' => array('source' => 'query_string', 'key' => 'tab1_page'),
    'total_items' => $message_count,
    'items_per_page' => 10
)); 
```

然后，您需要做的就是确保您的分页视图将页码传递给查询字符串中的正确参数，例如`http://mydomain.com/pagewithtabs?tab1_page=2&tab2_page=3`将选项卡 1 放在第 2 页上，将选项卡 2 放在第 3 页上。

希望有帮助！

# python - 手动重新加载龙卷风

> ID：13037462
> 
> 赞同：1
> 
> 时间：2012-10-23T19:08:35.943
> 
> 标签：python, reload, tornado

我不想在调试模式下运行龙卷风或使用`autoreload`，我仍然希望能够通过触发器重新加载服务器，比如请求特定的 url，或者使用计时器或其他东西，

有没有办法手动重新加载龙卷风 httpserver 而不会终止进程并重新启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:12:41.333

我这样做的唯一方法是在 Nginx 代理后面运行它，然后通过 supervisord 重新启动每个正在运行的进程。这有点笨拙，但是一旦你编写了脚本，它实际上并没有那么糟糕，并且应该对用户透明。

刚刚进行了搜索，发现了一个非常相似但措辞更好的答案： [有没有一种方法可以在不重新启动服务器的情况下使用 Tornado/Python 部署新代码？](https://stackoverflow.com/questions/8086885/is-there-a-way-to-deploy-new-code-with-tornado-python-without-restarting-the-ser)

# ruby-on-rails-3 - ActiveAdmin + Mongoid 本地化字段

> ID：13037463
> 
> 赞同：0
> 
> 时间：2012-10-23T19:08:48.120
> 
> 标签：ruby-on-rails-3, internationalization, activeadmin, mongoid3

我在我的 Rails 项目中使用 Mongoid 作为存储和 ActiveAdmin 作为管理后端。我需要支持几种语言。

Native Rails i18n 非常适合静态文本。但我还需要翻译数据库内容。我发现 mongoid 原生支持本地化字段：[http](http://mongoid.org/en/mongoid/docs/documents.html#localized_fields) ://mongoid.org/en/mongoid/docs/documents.html#localized_fields 。

有什么好的方法可以同时使用 ActiveAdmin 和这个很酷的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:15:13.760

我刚刚遇到了同样的问题，并决定为此制作一个宝石：

[https://github.com/rs-pro/activeadmin-mongoid-localize](https://github.com/rs-pro/activeadmin-mongoid-localize)

# sql - if then statement in select query

> ID：13037468
> 
> 赞同：2
> 
> 时间：2012-10-23T19:09:09.937
> 
> 标签：sql, select, if-statement

```
select 
     DISTINCT CONTACT.CONTACT_ID
    , CONTACT.FIRST_NAME
    , CONTACT.LAST_NAME
    , CONTACT_ADDRESS.COMPANY_NAME
    , CONTACT_ADDRESS.ADDRESS_LINE_1
    , CONTACT_ADDRESS.ADDRESS_LINE_2
    , CONTACT_ADDRESS.CITY
    , CONTACT_ADDRESS.STATE_PROVINCE
    , CONTACT_ADDRESS.POSTAL_CODE_1
    , CONTACT_ADDRESS.POSTAL_CODE_2
    , CONTACT_LABEL.CREATED_BY
    , CONTACT_NOTE.CONTACT_NOTE_ID
    , dbms_lob.substr( CONTACT_NOTE.NOTE_TEXT, 4000, 1) as note_text
    , CONTACT_NOTE.NOTE_TYPE
    , rep_profile.terr1
    , ' ' as Territory
from contact 
    INNER JOIN CONTACT_ADDRESS ON CONTACT.CONTACT_ID = CONTACT_ADDRESS.CONTACT_ID
    INNER JOIN CONTACT_LABEL ON CONTACT.CONTACT_ID = CONTACT_LABEL.CONTACT_ID
    INNER JOIN LABEL ON CONTACT_LABEL.LABEL_ID = LABEL.LABEL_ID
    LEFT JOIN CONTACT_NOTE ON CONTACT.CONTACT_ID = CONTACT_NOTE.CONTACT_ID
    left join 
    (
        rep_profile 
        inner join terr_user on rep_profile.terr1 = terr_user.terr
        inner join terr_version on 
            (terr_user.version = terr_version.version
                and TERR_USER.ROLE_ID ='00007' 
                and TERR_VERSION.CURRENT_VERSION ='Y'
            )
    ) on contact.contact_id = rep_profile.contact_id

WHERE 
    LABEL.DESCRIPTION='Holiday Card 2012' 
    AND (   CONTACT_NOTE.NOTE_TYPE='HC12' 
            or CONTACT_NOTE.NOTE_TYPE IS NULL
        ) 
```

I need to put in an if-then-else statement which depends on what the `rep_profile.terr1` field shows.

Pseudo-code:

```
if rep_profile.terr1 = 'W05' then Territory = 'Bob'
else if rep_profile_terr1 = 'W04' then Territory = 'Jack'
...
else Territory = 'N/A' 
```

There are 11 different `rep_profile.terr1`. Would appreciate any help on how to best do this. Many thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:11:13.570

```
case rep_profile.terr1 
    when 'W04' then 'Jack' 
    when 'W05' then 'Bob' 
    else 'N/A'
end as Territory 
```

# ios - Media Queries for Pixel ratio not working

> ID：13037469
> 
> 赞同：2
> 
> 时间：2012-10-23T19:09:18.513
> 
> 标签：ios, css, media, media-queries

im trying to put retina background images in certain elements and im having trouble actually getting these media queries to work. Sublime text wont syntax highlight them either so im pretty sure this stack is broken but i have no idea what to do. Help pelase?

```
@media
only screen and (-webkit-min-device-pixel-ratio: 1.5),
only screen and (   min--moz-device-pixel-ratio: 1.5),
only screen and (   -o-min-device-pixel-ratio: 1.5/1),
only screen and (        min-device-pixel-ratio: 1.5){ 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T09:37:25.787

应该只应用一个像素配给它才能工作。想想看，当 -webkit-min-device-pixel-ratio 为 1.5 时，不会是 -o-min-device-pixel-ratio。我们只有“和”规则。如果所有规则都不是一次为真，则不会应用该条件。

试试这个代码：

```
only screen and ( min-device-pixel-ratio: 1.5 ){ 
} 
```

对于其他规则，每次都单独应用它们。这将导致您的 CSS 代码很长，但它是目前唯一的解决方案。

# c# - LINQ To SQL 线程安全

> ID：13037470
> 
> 赞同：3
> 
> 时间：2012-10-23T19:09:21.490
> 
> 标签：c#, multithreading, linq-to-sql, thread-safety, datacontext

我想问一下以下代码是否是线程安全的： 考虑 Save1 和 Save2 将同时执行。数据上下文的线程安全是否有问题？

```
public class Test1()
{
    private void Save1()
    {        
        using(TestLinqToSQL obj = new TestLinqToSQL())
        {        
             obj.SaveRecord(new Client (){Id = 1, Name = "John Doe");
        }
    }

    private void Save2()
    {        
         using(TestLinqToSQL obj = new TestLinqToSQL())
         {        
             obj.SaveRecord(new Client (){Id = 2, Name = "Mike Tyson");
         }
    }         
}

public class TestLinqToSQL : IDisposable
{
    public void SaveRecord(Client newClient)
    {
        using(ClientDatacontext cont = new ClientDatacontext())
        {
            cont.InsertRecord(newClient);
        }        
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:14:28.790

在这种情况下，不，这不是问题，因为每个线程都会获得一个单独的 DataContext 实例，因为每个方法都会导致创建一个新实例。如果 DataContext 在线程之间共享，您会遇到问题，因为实例方法不是线程安全的，[请参阅 MSDN](http://msdn.microsoft.com/en-gb/library/system.data.linq.datacontext.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:35:04.760

[没有上下文，线程安全并不意味着什么](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx)。您需要更详细地了解您认为可接受和不可接受的内容。在您的特定情况下，因为您对每种方法都有单独的数据上下文，所以您不必担心其中一个插入“在”另一个插入“中间”，或者以其他方式导致其中一个完全失败由于对共享资源的不同步访问（如果数据上下文在线程之间共享，这可能会成为问题）。

但是，插入的顺序是完全不确定的。如果这些操作的顺序很重要，那么它就是“不是线程安全的”。

此外，如果您正在执行包含“事务”的多个操作，它可能是“线程安全”，也可能不是“线程安全”，具体取决于您如何定义线程安全。如果每个方法都插入 5 个项目，您无法确定所有五个插入都是在其他方法的插入之前或之后（除非您明确添加 a`lock`以确保这一点）。

# java - CallableStatement, named paremeters and order of binding

> ID：13037471
> 
> 赞同：1
> 
> 时间：2012-10-23T19:09:32.077
> 
> 标签：java, oracle, jdbc, callable-statement

I'm using a CallableStatement to execute a SQL query with named parameters, and I'm getting different results depending on the order in which I bind the parameters. Here's my full test:

```
public void test() throws SQLException {
    OracleDataSource ds = new OracleDataSource();
    ds.setUser("abcd");
    ds.setPassword("a");
    ds.setURL("jdbc:oracle:thin:@efgh:1521:orcl");
    Connection connection = ds.getConnection();
    CallableStatement stmt = connection.prepareCall("select :a col_a, :b col_b from dual");
    stmt.setObject(":b", "b");
    stmt.setObject(":a", "a");
    ResultSet resultSet = stmt.executeQuery();
    resultSet.next();

    Assert.assertEquals("a", resultSet.getObject("col_a"));
    Assert.assertEquals("b", resultSet.getObject("col_b"));

} 
```

It fails because col_a contains "b", and col_b contains "a". If I switch the two calls to `stmt.setObject` to make them in the order the variables appear in the query, then it works.

I've also tried:

*   using setString/getString instead of setObject/getObject
*   referencing columns by their index (`resultSet.getObject(1)` for col_a and `2` for col_b)
*   combining both: `resultSet.getString(resultSet.findColumn("col_a"))`

Any idea of what I'm doing wrong, or of any other way I could be doing this? I can't do with positioned parameters (with `?`) in PreparedStatement, as I can get different queries with the same parameters in different order.

For instance, I could get those two queries to execute:

*   `select nvl(foo, :a), :b || something from my_table`
*   `select decode(:b, 'b', aaa, ccc), eee || :a from another_table`

The statements have nothing in common except the presence of the variables `:a` and `:b`. But they are not in the same order, which means I cannot replace them with `?` and then use a PreparedStatement with variables binding with `stmt.setObject(1, a); stmt.setObject(2, b);`, because it would work for the first one, but not for the second.

In case it's useful, I'm using ojdbc6-11.2.0.2.0, and the database is also in 11.2.0.2.0.

# json - 将 F# 记录类型序列化为 JSON 在每个属性后包含“@”字符

> ID：13037472
> 
> 赞同：16
> 
> 时间：2012-10-23T19:09:32.153
> 
> 标签：json, f#

DataContractJsonSerializer 为在每个属性名称后包含“@”字符的 F# 记录类型创建 JSON。有谁知道是否可以获得没有此尾随 at 符号的 JSON？

```
{"heart_rate@":20,"latitude@":45.0,"longitude@":108.0,"name@":"Rambo"} 
```

这是我用来输出这个样本的脚本

```
#r "System.Xml"
#r "System.Runtime.Serialization"

open System.Text
open System.Runtime.Serialization.Json
open System.IO

type Update = {
    name: string;
    latitude: decimal;
    longitude: decimal;
    heart_rate: int}

let update = {name = "Rambo"; latitude = 45.0m; longitude = 108.0m; heart_rate = 20}

let serializer = new DataContractJsonSerializer( typeof<Update> )

let stream = new MemoryStream()
let data = serializer.WriteObject(stream, update)
let updateData = stream.ToArray()

let json = (Encoding.UTF8.GetString(updateData))

printfn "%s" json 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T19:36:47.067

它使用编译器生成的支持字段的名称。您可以使用`DataMemberAttribute`来提供您自己的姓名。

```
[<DataContract>]
type Update = {
    [<field: DataMember(Name="name")>]
    name: string;
    [<field: DataMember(Name="latitude")>]
    latitude: decimal;
    [<field: DataMember(Name="longitude")>]
    longitude: decimal;
    [<field: DataMember(Name="heart_rate")>]
    heart_rate: int} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T04:39:35.547

尽管 Daniel 的解决方案可以正常工作，但必须为记录中的每个属性添加属性是相当乏味的。事实证明，Json.NET 开箱即用地生成更具可读性的 JSON。对于我的应用程序，我不需要专门使用 DataContractSerializer，所以 JSON.net 就是这样！

# ruby - to_sql 不适用于 update_attributes 或 .save

> ID：13037475
> 
> 赞同：1
> 
> 时间：2012-10-23T19:09:39.040
> 
> 标签：ruby, ruby-on-rails-3

我正在寻找一种方法来存储在更新或创建操作中生成的 sql 字符串。我试过追加`.to_sql`到末尾，`update_attributes`但它返回一个`TrueClass`错误（或类似的东西）。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:56:13.783

> 简而言之 - 您需要覆盖 ActiveRecord 执行方法。在那里您可以添加任何日志记录逻辑。

```
connection = ActiveRecord::Base.connection
class << connection
  alias :original_exec :execute
  def execute(sql, *name)
    # try to log sql command but ignore any errors that occur in this block
    # we log before executing, in case the execution raises an error
    begin
        file = File.open(RAILS_ROOT + "/log/sql.txt",'a'){|f| f.puts Time.now.to_s+": "+sql}
    rescue Exception => e
      ;
    end
    # execute original statement
    original_exec(sql, *name)
  end
end 
```

学分：

[https://stackoverflow.com/a/1629474/643500](https://stackoverflow.com/a/1629474/643500)

[https://stackoverflow.com/a/1640560/643500](https://stackoverflow.com/a/1640560/643500)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:16:05.610

这些方法都返回一个布尔值。您不能`to_sql`在布尔值上调用。

# eclipse - Eclipse：首选项中没有“验证”窗格

> ID：13037477
> 
> 赞同：0
> 
> 时间：2012-10-23T19:09:48.527
> 
> 标签：eclipse, validation, ide, preferences

[我从http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载了 Eclipse Classic ，我才意识到我没有验证面板。

有没有办法拥有一个？如何 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:01:01.360

我设法通过添加插件`org.eclipse.wst.validation.ui_1.2.204.v201004150700.jar`来解决我的问题。`org.eclipse.wst.validation_1.2.302.v201107140600`

# tfs - TFS 2012 定位源代码控制文件

> ID：13037478
> 
> 赞同：1
> 
> 时间：2012-10-23T19:09:50.483
> 
> 标签：tfs

TFS 2012 安装在服务器上。在这台服务器上有 3 个项目——Dev、QA 和 Prod。有没有办法找到源代码文件在服务器上的位置。因此，能够判断它当前是否在 Dev、QA 或 Prod 项目中。这是通过源代码名称还是通过使用标签并搜索该标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:52:11.020

我会说你作为项目所做的划分不是使用 TFS 的预期方式，它们应该作为同一个项目中的分支。您可能有特定的理由将它们创建为项目（我对为什么感兴趣），但恐怕您不会从那里的标准 TFS 源中获得太多帮助。

您可以`Find in Source Control`在通配符或等效的 tf 命令上使用

```
tf info [wildcard] /recursive 
```

寻找源代码控制路径，但有两个警告：

*   此搜索仅限于每个项目，因此您必须依次搜索每个项目（直到您获得成功）。
*   默认情况下，该命令返回所有源代码控制的对象，甚至是已删除的对象，因此您必须过滤搜索`DeletionID`并`Local path`

可以编写此命令以搜索每个项目文件夹。[这是一个以编程](https://stackoverflow.com/questions/469732/how-to-list-files-of-a-team-project-using-tfs-api)方式进行的相关问答。

# jquery - 从一行中清除值并模拟点击它

> ID：13037483
> 
> 赞同：1
> 
> 时间：2012-10-23T19:10:07.970
> 
> 标签：jquery, click, jquery-events

我正在向表中动态添加一行，之后我需要做两件事：

1.  清除值

2.  模拟单击新创建的链接（链接位于其中一个单元格中）。

这是将行添加到表中的代码（工作正常）：

```
var row = $('.records_table tbody>tr:last').clone(true);
row.insertAfter('.records_table tbody>tr:last'); 
```

我的行 html 代码如下所示：

```
<tr class=​"odd">​
   <td class=​"name">​name_0</td>​
   <td class=​"type">​type_0​&lt;/td>​
   <td class=​"value">​value_0</td>​
   <td class=​"edit">​
       <a href=​"edit" class=​"edit">​edit​&lt;/a>​
   </td>​
</tr>​ 
```

所以，我的第一个问题：如何清除值 name_0、type_0 和 value_0？

现在，第二个问题。我需要模拟单击链接“编辑”以触发链接到选择器“a.edit”的事件（对于加载了其他行中的预先存在的编辑链接，此事件被正确触发页）。我能够将按钮设置为`var editbtn = $("td:last", row)`. 我可以隐藏链接 doing `editbtn.hide()`，但 doing`editbtn.click()`并没有按预期触发事件。

应该获得点击的处理程序是: `$(document).on('click', 'a.edit', function(e) {`，它再次处理其他行中的其他链接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:25:19.223

你可以像这样遍历它

```
var row = $('.records_table tbody>tr:last').clone(true);
row.insertAfter('.records_table tbody>tr:last');
$('.records_table tbody>tr:last') // gets last tr
    .find('td') // gets all td
    .not('.edit') // not the td with class=edit
    .text('') // make all text empty
    .end() // go back to first selector
    .find('a.edit').click(); // find anchor within tr and trigger click 
```

[http://jsfiddle.net/59hyL/1/](http://jsfiddle.net/59hyL/1/)

如果你想点击最后一个 td 而不是锚点..你可以这样做

```
$('button').click(function() {
    var row = $('.records_table tbody>tr:last').clone(true);
    row.insertAfter('.records_table tbody>tr:last');
    $('.records_table tbody>tr:last')
        .find('td')
        .not('.edit')
        .text('');        
    $('tbody td:last').click();
});

$('.records_table').on('click', 'td.edit', function(e) {
    e.preventDefault();
    console.log("anchor number " + $('td.edit').index(this) + 'clicked');
});​ 
```

[http://jsfiddle.net/hEP5q/](http://jsfiddle.net/hEP5q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:43:17.323

我相信这将回答您的两个问题：

HTML：

```
<button id="btn">Add row</button>
<table class="records_table">
    <thead><tr><th>Head</th></tr></thead>
    <tbody><tr><td>*</td></tr></tbody>
</table> 
```

Javascript：

```
//simple function to repeat a string num times
String.prototype.repeat = function( num )
{
    return new Array( num + 1 ).join( this );
}

var i = 2;
var char = '*';

var lastRowSelector = '.records_table tbody tr:last';
//click handler for the cell
$(lastRowSelector + ' td').click(function() {
    alert($(this).text());
});

$('#btn').click(function(){
    var lastRow = $(lastRowSelector);
    //clone the row (note that handler will be cloned as well)
    var newRow = lastRow.clone(true);
    //obtain the only 'td' cell in the row
    var cell = newRow.find('td');
    //clear text of the cell by replacing it with new text. You could call cell.text('') to just clear it
    cell.text(char.repeat(i++));
    //insert the row to the end of the table
    newRow.insertAfter(lastRowSelector);
    //simulate click
    newRow.click();
}); 
```

[http://jsfiddle.net/pr5jr/1/](http://jsfiddle.net/pr5jr/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T19:13:21.540

您可以使用找到最后一个附加行`:last`

```
var row = $('.records_table tbody>tr:last').clone(true);
row.insertAfter('.records_table tbody>tr:last');
// Recently added row..
var recentRow = $('.records_table tbody>tr:last');

recentRow.find('td').each(function(){
    $(this).text('');  // Will clear the values..
}) 
```

# c++ - Range-based loop over an input stream

> ID：13037490
> 
> 赞同：11
> 
> 时间：2012-10-23T19:10:29.173
> 
> 标签：c++, c++11, iterator, inputstream

To iterate over an input stream, we would usually use a `std::istream_iterator` like so:

```
typedef std::istream_iterator<std::string> input_iterator;

std::ifstream file("myfile");
for (input_iterator i(file); i != input_iterator(); i++) {
  // Here, *i denotes each element extracted from the file
} 
```

It'd be nice if we could use the range-based `for` statement to iterate over input streams. However, for objects of class type, range-based `for` requires the object to have `begin()` and `end()` member functions (§6.5.4, bold emphasis added):

> *   if `_RangeT` is an array type, *begin-expr* and *end-expr* are `__range` and `__range + __bound`, respectively, where `__bound` is the array bound. If `_RangeT` is an array of unknown size or an array of incomplete type, the program is ill-formed;
>     
>     
> *   **if `_RangeT` is a class type**, the *unqualified-ids* `begin` and `end` are looked up in the scope of class `_RangeT` as if by class member access lookup (3.4.5), and if either (or both) finds at least one declaration, *begin-expr* and *end-expr* are `__range.begin()` and `__range.end()`, respectively;
>     
>     
> *   otherwise, *begin-expr* and *end-expr* are `begin(__range)` and `end(__range)`, respectively, where `begin` and `end` are looked up with argument-dependent lookup (3.4.2). For the purposes of this name lookup, namespace `std` is an associated namespace.

The input streams don't have these member functions (they are not Containers) and so range-based `for` won't work on them. This makes sense anyway because you would need some way to specify the type to extract (`std::string` in the case above).

But if we know what we want to extract, is it possible to define our own `begin()` and `end()` functions (perhaps specializations or overloads of `std::begin()` and `std::end()`) for input streams such that they would be found by class member access lookup as described above?

It's unclear (at least to me) from §6.5.4 whether the functions will then be looked up with argument-dependent lookup if the previous lookup fails. Another thing to consider is that `std::ios_base` and its derivatives already have a member called `end` which is a flag for seeking.

Here's the intended result:

```
std::ifstream file("myfile");
for (const std::string& str : file) {
  // Here, str denotes each element extracted from the file
} 
```

Or:

```
std::ifstream file("myfile");
for (auto i = begin(file); i != end(file); i++) {
  // Here, *i denotes each element extracted from the file
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T19:32:55.137

一个明显的方法是为您的流使用一个简单的装饰器，提供类型和必要的接口。这是它的样子：

```
template <typename T>
struct irange
{
    irange(std::istream& in): d_in(in) {}
    std::istream& d_in;
};
template <typename T>
std::istream_iterator<T> begin(irange<T> r) {
    return std::istream_iterator<T>(r.d_in);
}
template <typename T>
std::istream_iterator<T> end(irange<T>) {
    return std::istream_iterator<T>();
}

for (auto const& x: irange<std::string>(std::ifstream("file") >> std::skipws)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:15:34.857

是否可以通过依赖参数的查找找到它们并不重要，因为您可以将类和函数的特化放在`std`命名空间中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:26:46.830

这是一种可能的解决方案。可悲的是，它确实需要一个额外的结构：

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <algorithm>
#include <string>

struct S {
  std::istream& is;
  typedef std::istream_iterator<std::string> It;
  S(std::istream& is) : is(is) {}
  It begin() { return It(is); }
  It end() { return It(); }
};

int main () {
  std::ifstream file("myfile");
  for(auto& string : S(file)) {
    std::cout << string << "\n";
  }
} 
```

另一种解决方案是从`std::ifstream`：

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <algorithm>
#include <string>

struct ifstream : std::ifstream {
  // using std::ifstream::ifstream; I wish g++4.7 supported inheriting constructors!
  ifstream(const char* fn) : std::ifstream(fn) {}
  typedef std::istream_iterator<std::string> It;
  It begin() { return It(*this); }
  It end() { return It(); }
};

int main () {
  ifstream file("myfile");
  for(auto& string : file) {
    std::cout << string << "\n";
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T21:44:36.610

我试图追求专业化`std::begin`和`std::end`派生类的想法`std::basic_istream`（我不擅长这个模板元编程业务）：

```
namespace std
{
  template <typename C>
  typename
  std::enable_if<
    std::is_base_of<std::basic_istream<typename C::char_type>, C>::value,
    std::istream_iterator<std::string>>::type
  begin(C& c)
  {
    return {c};
  }

  template <typename C>
  typename
  std::enable_if<
    std::is_base_of<std::basic_istream<typename C::char_type>, C>::value,
    std::istream_iterator<std::string>>::type
  end(C& c)
  {
    return {};
  }
} 
```

实际上，它工作得很好。我没有创建需要的版本，`const C&`因为我认为从 const 流中提取是没有意义的（当我尝试这样做时出现错误）。我也不确定我是否可以让这个动作更友好。所以现在我可以打印出这样的内容`myfile`::

```
std::ifstream file("myfile");
std::copy(begin(file), end(file), std::ostream_iterator<std::string>(std::cout, " ")); 
```

所以这些`begin`和`end`功能按预期工作。但是，当在基于范围的`for`循环中使用时，它会下降。`std::basic_istream`类派生自`std::ios_base`其中已经有一个名为的成员`end`（它是在流中搜索的标志）。一旦基于范围的`for`循环找到这个，它就会放弃，因为它找不到对应的`begin`（更不用说这`end`不是正确的实体）：

> main.cpp:35:33：错误：“std::basic_ifstream”类型的基于范围的“for”表达式有一个“end”成员，但没有“begin”</p>

正如其他人所提到的，在这两种情况下都有效的唯一选择是创建一个包装器对象。不幸的是，该`end`成员`std::ios_base`完全破坏了以一种好的方式实现这一点的任何机会。

# javascript - animate only div instead of whole page when clicking on link in query

> ID：13037492
> 
> 赞同：2
> 
> 时间：2012-10-23T19:10:38.610
> 
> 标签：javascript, jquery, html, css

I developing a site using jQuery, CSS and HTML. The page has on the left side a static menu which should always be shown and a content div. When I press a link in the menu right now, the whole page animates and slides to left revealing the div which the menu element links to using href. I would very much like to modify this so only the content div animates and is replaced. Is this possible?

Regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:30:35.210

是的，这是可能的。没有一些代码，我能给你的就不多了。这是我能得到的通用的：

```
$(".menuLink").click(function() {
    var linkedContent = ...identify the content being moved into view...
    var currentContent = ...identify the content being moved from view...

    var moveOldTo = "-=" + currentContent.width() + "px";
    //assuming your content divs are relatively positioned
    currentContent.animate({ left: moveOldTo }, 1000);

    var moveNewTo = "-=" + linkedContent.width() + "px";
    linkedContent.animate({ left: moveNewTo }, 1000);
}); 
```

# c# - 在应用程序之间集中验证代码

> ID：13037493
> 
> 赞同：2
> 
> 时间：2012-10-23T19:10:47.250
> 
> 标签：c#, asp.net, authentication, active-directory, centralized

对于给定的应用程序，我有一个由 C# 代码隐藏文件支持的 .aspx 登录表单。
在后面的代码中，我使用了以下“本土”方法：

```
private bool AuthenticateUser(String username, String password)
{
    bool validated = false;
    try
    {
        PrincipalContext pc = new PrincipalContext(ContextType.Domain, "domnet.domad.com", "dc=domnet,dc=domad,dc=com");
        IdentityType ADElement;
        UserPrincipal up;

        //Try first with no @DOM.COM - this should work for SamAccountName values:                 
        username = username.ToUpper().Replace("@DOM.COM", "");
        ADElement = IdentityType.SamAccountName;
        up = UserPrincipal.FindByIdentity(pc, ADElement, username);
        validated = pc.ValidateCredentials(username, password, ContextOptions.Negotiate);

        //If SamAccountName fails try UserPrincipalName with @DOM.COM
        if (!validated)
        {
            username = username + "@DOM.COM";
            ADElement = IdentityType.UserPrincipalName;
            up = UserPrincipal.FindByIdentity(pc, ADElement, username);
            validated = pc.ValidateCredentials(username, password, ContextOptions.Negotiate);
        }

        //Put username into session
        if (validated)
        {
            Session["Username"] = username.Replace("@DOM.COM", "");
        }
    }
    catch (Exception) //login failure...
    {
        validated = false;
    }

    return validated;
} 
```

这适用于应用程序，但我还有其他需要身份验证的应用程序。
我真的不想将登录文件复制/粘贴到任何应用程序中。

所以我最基本的问题是我有哪些选择可以在应用程序之间集中验证代码？

将来，我还将关注：
不仅验证用户名/密码，还验证 AD 组成员身份。
一旦用户通过身份验证，应用程序之间就不再有登录屏幕。（单点登录）

在我看来，我不是第一个遇到这个问题的人。
如果可能的话，我更愿意使用开箱即用的解决方案而不是开发自己的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:17:28.230

你可以：

*   在 IIS 中启用 Windows 身份验证并将您的 Web.Config 设置为使用 Window 身份验证[http://weblogs.asp.net/scottgu/archive/2006/07/12/Recipe_3A00_-Enabling-Windows-Authentication-within-an-Intranet-ASP .NET-Web-application.aspx](http://weblogs.asp.net/scottgu/archive/2006/07/12/Recipe_3A00_-Enabling-Windows-Authentication-within-an-Intranet-ASP.NET-Web-application.aspx)
*   设置 ADFS 声明身份验证服务器并让所有应用程序使用基于声明的身份验证[http://blogs.msdn.com/b/alextch/archive/2011/06/27/building-a-test-claims-aware-asp-net -application-and-integrating-it-with-adfs-2-0-security-token-service-sts.aspx](http://blogs.msdn.com/b/alextch/archive/2011/06/27/building-a-test-claims-aware-asp-net-application-and-integrating-it-with-adfs-2-0-security-token-service-sts.aspx)
*   让所有其他应用程序都重定向到一个应用程序以进行身份​​验证，并设置其他应用程序可以读取的加密 cookie 以验证身份验证[在 ASP.NET 中加密 cookie](https://stackoverflow.com/questions/4360839/encrypt-cookies-in-asp-net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:14:44.460

一种方法是创建一个`Core`项目 (.dll/library)，其中包含您希望在应用程序之间共享的公共部分，然后在您的应用程序中引用该项目。

即：假设您有 2 个应用程序：您将创建三个项目，`A`并且. 在项目 A 和 B 中，只需添加对核心库的项目引用。现在您可以从 A 和 B 访问核心中的任何方法。`B``A``B``Core`

这种方法适用于 SVN 和类似的版本控制系统，您会发现它是一种非常灵活的工作方式。困难的部分是确定什么是真正的通用代码并尽可能通用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T15:33:37.287

@Baxter不确定我的答案是否来得有点晚，因为几天前发布了这个问题，但我正在研究在我的 MVC 3 应用程序中实现集中式会话和身份验证管理的相同问题，我相信以下链接将是你很感兴趣：http: [//www.codeproject.com/Articles/246631/ASP-NET-MVC3-Form-Authentication](http://www.codeproject.com/Articles/246631/ASP-NET-MVC3-Form-Authentication)

与上述链接对应的文章的作者将身份验证功能分解为一个单独的 DLL，并使用依赖注入来使用应用程序上下文来利用外部“安全”DLL。我计划使用这种方法来集中安全机制并在 3 个不同的 MVC 3 Web 应用程序中重用它，所以它仍在研究中，并将根据我的发现相应地更新这个答案:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:14:33.490

您可以将此方法重构为一个单独的项目（意味着不同的 dll），并从您要使用此代码的任何 Web 应用程序中引用该项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T19:33:21.160

如果您使用 Windows 身份验证，另一种方法是获取他们的 SID，查询 AD 以获取在 AD 和应用程序的用户表（我们使用电子邮件地址）之间共享的信息，并检查用户表是否有一个条目该电子邮件地址。

这样，通过登录到他们的工作站，他们基本上可以使用这种身份验证方法预先登录到任何应用程序。您只需确保在创建新用户帐户（在应用程序级别）时，您会捕获要检查身份验证的信息（这就是我们使用电子邮件地址的原因 - 每个人都知道他们的公司电子邮件）。

这与 Avada Kedavra 建议的核心库方法非常有效。此方法还允许您让每个应用程序维护自己的用户群（尽管它也可以很好地与中央用户数据库一起使用）。

# php - MySQL数据的基本排名和用php打印结果

> ID：13037495
> 
> 赞同：0
> 
> 时间：2012-10-23T19:10:58.587
> 
> 标签：php, mysql, ranking

我有一个表，我想在其中对其中一列等于我定义的值的行进行排名。

例如，在此表中，我想获取 Col1 = a 的所有行，然后找到 Col3 = Ross 的行的排名（按 Col2 中的分数排名）。

```
Col1 | Col2 | Col3
------------------
a    | 10   | John
a    | 6    | Nick
a    | 8    | Ross
a    | 2    | Tim
a    | 4    | Paul
b    | 9    | John
b    | 3    | Nick
b    | 5    | Ross
b    | 7    | Tim
b    | 1    | Paul 
```

最终我想计算这个：

```
Col1 | Col2 | Col3 | Rank
-------------------------
a    | 10   | John | 1
a    | 8    | Ross | 2
a    | 6    | Nick | 3
a    | 4    | Paul | 4
a    | 2    | Tim  | 5 
```

并打印结果“2”。

我可以用这个查询对表进行排序，但不要；知道如何打印我需要的结果（使用 php）。

```
$query = "SELECT * FROM exampleTable WHERE Col1 = a order by Col2 DESC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:18:27.183

试试这个：

```
"SET @rank=0; SELECT * FROM (SELECT *, @rank:=@rank+1 AS Rank FROM exampleTable WHERE Col1 = 'a' order by Col2 DESC) AS t" 
```

这是一个显示它工作的[测试运行。](http://sqlfiddle.com/#!2/a355b/6)

如果您想查找罗斯的排名，您可以运行`WHERE Col3 = 'Ross'`添加的查询，并且只选择排名列，如此[处所示](http://sqlfiddle.com/#!2/a355b/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:22:24.543

与 pdo

首先创建pdo连接

```
$pdo = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 
       'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, 
          PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION)); 
```

比这样使用

```
$query= $pdo->prepare("SELECT * FROM exampleTable WHERE Col1 = a order by Col2 DESC");

$query->execute();
$article=$query->fetchAll(pdo::FETCH_ASSOC); 
```

如果内存确实比使用循环重要，我使用 fetchAll 而不是循环的原因是它更快

[PDO::fetchAll 与 PDO::fetch 循环](https://stackoverflow.com/questions/2770630/pdofetchall-vs-pdofetch-in-a-loop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T17:00:38.133

要获得结果的排名，可以使用MySQL 8.0 以来的[MySQL RANK() 函数。](https://www.mysqltutorial.org/mysql-window-functions/mysql-rank-function/)

您的查询将如下所示：

```
$query = "SELECT *, RANK() OVER (ORDER BY Col2 DESC) myRank FROM exampleTable WHERE Col1 = 'a'"; 
```

# css - GWT DataGrid -- CSS Border Won't Take Effect

> ID：13037496
> 
> 赞同：1
> 
> 时间：2012-10-23T19:11:02.363
> 
> 标签：css, gwt, border

I'm trying to add a border around my DataGrid GWT element. I've had limited success overriding the default CSS classes defined in the [official GWT DataGrid CSS file](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/cellview/client/DataGrid.css?r=10228 "the official GWT DataGrid.css"). I can successfully override the ".dataGridEvenRow" and ".dataGridOddRow" with border-style and border-top attributes and the border becomes visible around those rows, but when I try overriding the ".dataGridWidget" and add border CSS attributes as displayed in the code below no border appears.

```
.dataGridWidget
{
   border-style:ridge;
   border-width:5px;
   border-color: blue;
} 
```

What can one do to get a blue border around appearing around a DataGrid?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:59:40.147

在尝试让样式直接在 DataGrid 上工作几个小时后，我决定只使用 SimplePanel 包装 DataGrid 并将我的边框直接添加到其中。它看起来与 DataGrid 本身的边框完全一样，并且由于其他 DataGrid 类似乎在没有任何问题的情况下被覆盖（如 dataGridEvenRow 和 dataGridOddRow），因此它是解决问题的无缝创可贴。

# python - 没有十进制模块的python中的十进制精度

> ID：13037500
> 
> 赞同：4
> 
> 时间：2012-10-23T19:11:17.083
> 
> 标签：python, python-3.x

我对 Python 还很陌生，想知道如何在不使用任何小数模块或浮点的情况下控制任何给定数字的小数精度（例如：“%4f”%n）。

示例（编辑）：

输入（2/7）

> 0.28571428571....

输入（1/3）

> 0.33333333333333....

我希望它们达到千位小数点或任何小数点。我正在考虑使用一段时间作为受控循环，但我不确定该怎么做。谢谢

编辑：我不使用十进制模块的原因是我可以概念化这些类型事物背后的算法/逻辑。只是试图真正理解事物背后的逻辑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T19:37:54.163

我们可以使用 a`long`来存储一个高精度的小数，并对其进行算术运算。以下是您将其打印出来的方式：

```
def print_decimal(val, prec):
    intp, fracp = divmod(val, 10**prec)
    print str(intp) + '.' + str(fracp).zfill(prec) 
```

用法：

```
>>> prec = 1000
>>> a = 2 * 10**prec
>>> b = a//7
>>> print_decimal(b, prec)
0.2857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857142857 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T19:18:02.410

如果没有 Decimal 模块（为什么？），假设 Python 3：

```
def divide(num, den, prec):
    a = (num*10**prec) // den
    s = str(a).zfill(prec+1)
    return s[0:-prec] + "." + s[-prec:] 
```

感谢@nneonneo 的聪明`.zfill()`想法！

```
>>> divide(2,7,1000)
'0.28571428571428571428571428571428571428571428571428571428571428571428571428571
42857142857142857142857142857142857142857142857142857142857142857142857142857142
85714285714285714285714285714285714285714285714285714285714285714285714285714285
71428571428571428571428571428571428571428571428571428571428571428571428571428571
42857142857142857142857142857142857142857142857142857142857142857142857142857142
85714285714285714285714285714285714285714285714285714285714285714285714285714285
71428571428571428571428571428571428571428571428571428571428571428571428571428571
42857142857142857142857142857142857142857142857142857142857142857142857142857142
85714285714285714285714285714285714285714285714285714285714285714285714285714285
71428571428571428571428571428571428571428571428571428571428571428571428571428571
42857142857142857142857142857142857142857142857142857142857142857142857142857142
85714285714285714285714285714285714285714285714285714285714285714285714285714285
7142857142857142857142857142857142857142857' 
```

警告：这使用地板除法，所以`divide(2,3,2)`会给你`0.66`而不是`0.67`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T18:45:47.217

虽然其他答案使用非常大的值来处理精度，但这实现了长除法。

```
def divide(num, denom, prec=30, return_remainder=False):
    "long divison"
    remain=lim=0
    digits=[]

    #whole part
    for i in str(num):
        d=0;remain*=10

        remain+=int(i)
        while denom*d<=remain:d+=1
        if denom*d>remain:d-=1

        remain-=denom*d
        digits.append(d)

    #fractional part
    if remain:digits.append('.')
    while remain and lim<prec:
        d=0;remain*=10

        while denom*d<=remain:d+=1
        if denom*d>remain:d-=1

        remain-=denom*d
        digits.append(d)
        lim+=1

    #trim leading zeros        
    while digits[0]==0 and digits[1]!='.':
        digits=digits[1:]

    quotient = ''.join(list(map(str,digits)))

    if return_remainder:
        return (quotient, remain)
    else:
        return quotient 
```

因为它是除法算法，所以每个数字都是正确的，你可以得到余数（不像没有余数的地板除法）。我在这里实现的精度是小数点后的位数。

```
>>> divide(2,7,70)
'0.2857142857142857142857142857142857142857142857142857142857142857142857'
>>> divide(2,7,70,True)
('0.2857142857142857142857142857142857142857142857142857142857142857142857', 1) 
```

# android - Good design methodology for creating standalone html5 pages for android webviews

> ID：13037507
> 
> 赞同：1
> 
> 时间：2012-10-23T19:12:03.003
> 
> 标签：android, html, css, android-webview

I am in process of creating an app which had multiple standalone html5 web pages which have to be displayed in web views. I have currently created a sample dummy page in html5 and css3 which opens up in my android app webview.

The problem is the look and feel does not look as good as it should. Following is a screenshot of what the sample page looks like in the android webview when it opens initially:

[![html5 - webview sample image](../Images/d7570b5a224f0bf3bcb3fa04639048d4.png)](https://i.stack.imgur.com/fxzZn.png)
[(source: [abhisheksabbarwal.com](http://abhisheksabbarwal.com/webview.png))]

The current version is a little zoomed in. The user has the freedom of using the built-in zoom controls. I am currently using the following properties for the webview :

```
mWebView.getSettings().setUseWideViewPort(true);
mWebView.getSettings().setBuiltInZoomControls(true); 
```

How-ever the display doesnot look just right. I am requesting hints/comments/suggestions on how I could make the the view look more decent ? Are there any guidelines that I should follow while creating these pages for webviews or are there any specific webview properties that I need to handle properly ?

I am new to html5 and css3 standards. I want to make my webpages look like professional pages in a webapp. Can someone guide me to make this right ? I have been looking through a lot of information but couldnot figure out exactly what is to be done and ended up creating the above dummy page. I can share more information if requested. Thanks for your time to read this long post. Your advice will definitely help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:21:24.843

如果您想快速启动并运行，请考虑将 Initializr (www.initializr.com) 与 HTML5 样板和引导程序一起使用。那里有大量教程，如果您熟悉 HTML 和 CSS，您可以立即学习。

在 webviews 方面，请确保您将布局设置为填满屏幕：

```
 android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
```

# android - Android robolectric InstantiationException from WebSettings

> ID：13037510
> 
> 赞同：0
> 
> 时间：2012-10-23T19:12:13.517
> 
> 标签：android, testing, intellij-idea, robolectric

I have trouble running some test cases, which broke after I upgraded the api to 4.1 (not sure if it is related, but the error doesn't seem to suggest so)

```
java.lang.RuntimeException: java.lang.InstantiationException
at com.xtremelabs.robolectric.bytecode.RobolectricInternals.newInstanceOf(RobolectricInternals.java:32)
at com.xtremelabs.robolectric.Robolectric.newInstanceOf(Robolectric.java:130)
at com.xtremelabs.robolectric.shadows.ShadowWebView.<init>(ShadowWebView.java:21)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at com.xtremelabs.robolectric.bytecode.ShadowWrangler.shadowFor(ShadowWrangler.java:163)
at com.xtremelabs.robolectric.bytecode.ShadowWrangler$InvocationPlan.prepare(ShadowWrangler.java:311)
at com.xtremelabs.robolectric.bytecode.ShadowWrangler.methodInvoked(ShadowWrangler.java:81)
at com.xtremelabs.robolectric.bytecode.RobolectricInternals.methodInvoked(RobolectricInternals.java:111)
at android.view.View.<init>(View.java)
at android.view.ViewGroup.<init>(ViewGroup.java)
at android.widget.AbsoluteLayout.<init>(AbsoluteLayout.java)
at android.webkit.WebView.<init>(WebView.java) 
```

in the given class of ShadowWebView, There is a line

```
private WebSettings webSettings = Robolectric.newInstanceOf(WebSettings.class); 
```

The above line leads to

```
 Robolectric.java 
```

which then leads to RobolectricInternals.java and executes the following method

```
 public static <T> T newInstanceOf(Class<T> clazz) 
```

the method has the following source code:

```
public static <T> T newInstanceOf(Class<T> clazz) {
    try {
        Constructor<T> defaultConstructor = clazz.getDeclaredConstructor();
        defaultConstructor.setAccessible(true);
        return defaultConstructor.newInstance();
    } catch (InstantiationException e) {
        throw new RuntimeException(e);
    } catch (IllegalAccessException e) {
        throw new RuntimeException(e);
    } catch (NoSuchMethodException e) {
        throw new RuntimeException(e);
    } catch (InvocationTargetException e) {
        throw new RuntimeException(e);
    }
} 
```

the exception thrown (u see in the error log above) is because of this line

```
 defaultConstructor.newInstance(); 
```

i am not sure what is causing this and how to fix this only observation i made was the WebSettings.java from android used to be a non-abstract class, but now it is an abstract class, i thought this was the culprit, but then when i switched to older api such as level 12, (for which websettings.java is not declared abstract), i still have the same error

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T23:24:29.483

您是正确的，Android 已`WebSettings`成为 API 16 中的抽象类。

在 API 16 中，Robolectric 不能再通过以下方式创建 WebSettings 的实例：

```
private WebSettings webSettings = Robolectric.newInstanceOf(WebSettings.class); 
```

因为 WebSettings 是抽象的，即使通过反射也无法实例化。

由于 WebSettings 变得抽象，Robolectric 必须以某种方式提供 WebSettings 的具体实例。所以我创建了这个`android.webkit.TestWebSettings`类，并让 Robolectric 在`ShadowWebView#getSettings`.

至于您的具体问题 - 您切换到 API 12 但仍无法实例化 WebSettings。即使您将项目更改为较低的 API 级别也可能会出现这种情况，因为 Robolectric 本身仍然是针对 android-16.jar 构建的。如果您更改 Robolectric 本身以针对 android-12.jar 构建，您将获得 WebSettings 的实例 - 但没有影子实现，因为 ShadowWebSettings 已从当前版本的 Robolectric 中删除。

解决您的问题的最简单的解决方法可能是将您的项目更新到 API 16，然后直接在您的测试用例中实例化一个 TestWebSettings 对象。所以而不是：

```
private WebSettings webSettings = Robolectric.newInstanceOf(WebSettings.class); 
```

你会写：

```
private WebSettings webSettings = new TestWebSettings(); 
```

您可以在作为 Robolectric 源的一部分的 android.webkit 包中找到 TestWebSettings 类：

```
import android.webkit.TestWebSettings; 
```

# iphone - POST request to website Objective-C

> ID：13037516
> 
> 赞同：2
> 
> 时间：2012-10-23T19:12:35.450
> 
> 标签：iphone, objective-c, post, nsmutableurlrequest

I am trying to send this POST request to the specified website in Objective-C, but know very little about HTML and how to format my request.

The address is: [https://selfservice.mypurdue.purdue.edu/prod/bwckgens.p_proc_term_date](https://selfservice.mypurdue.purdue.edu/prod/bwckgens.p_proc_term_date) if you want to see where I am getting this HTML source code from.

```
 <FORM ACTION="/prod/bwckschd.p_get_crse_unsec" METHOD="POST">
<INPUT TYPE="hidden" NAME="term_in" VALUE="201320">
<INPUT TYPE="hidden" NAME="sel_subj" VALUE="CS">
<INPUT TYPE="hidden" NAME="sel_levl" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_schd" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_coll" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_divs" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_dept" VALUE="dummy">
<INPUT TYPE="hidden" NAME="sel_attr" VALUE="dummy">
   </FORM> 
```

I am trying to send a POST request to the address [https://selfservice.mypurdue.purdue.edu/prod/bwckctlg.p_display_courses](https://selfservice.mypurdue.purdue.edu/prod/bwckctlg.p_display_courses) with the the field "term_in" equal to 201320 and the "sel_subj" field equal to "CS", and the rest being dummy. How would I go about doing this?

This is what I have so far:

```
#import "PCFViewController.h"

@interface PCFViewController ()

@end

NSMutableData *mutData;

@implementation PCFViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)queryServer {
    NSURL *url = [NSURL URLWithString:@"https://selfservice.mypurdue.purdue.edu/prod/bwckschd.p_get_crse_unsec"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:3.0];
    [request setHTTPMethod:@"POST"];
    NSString *args = @"term_in=201320&sel_subj=CS&sel_day=dummy&sel_schd=dummy&sel_insm=dummy&sel_camp=dummy&sel_levl=dummy&sel_sess=dummy&sel_instr=dummy&sel_ptrm=dummy&sel_attr=dummy";
    NSData *requestBody = [args dataUsingEncoding:NSUTF8StringEncoding];
    [request setValue:@"text/html" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:requestBody];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];
    if (connection) {
        mutData = [NSMutableData data];
    }
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
     NSLog(@"Succeeded! Received %d bytes of data",[mutData length]);
    NSString *str = [[NSString alloc] initWithData:mutData encoding:NSUTF8StringEncoding];
    NSLog(@"%@", str);
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"%@\n", error.description);
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [mutData setLength:0];
    NSLog(@"%@\n", response.description);

}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [mutData appendData:data];
}
@end 
```

My console shows me this output:

```
Succeeded! Received 213 bytes of data
2012-10-25 02:25:38.683 Purdue Course Finder[25844:c07] <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>410 Gone</title>
</head><body>
<h1>Gone</h1>
/prod/bwckschd.p_get_crse_unsechas been permanently removed from this server.</p>
</body></html> 
```

Can someone help me figure out why this is not a valid request? If a value is set to dummy, should I not add it to the string? Is the string in an incorrect format with each value being suffixed with a &? Any suggestions? Can someone get me the URL of this POST request so I can modify my code accoringly?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:18:35.777

您需要提供字段及其值作为请求的正文，并设置内容类型：

```
NSString *paramString = [NSString stringWithFormat:@"arg1=%@&arg2=%@", val1, val2];
NSData  *data = [paramString dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody:data];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 
```

然后执行你的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:18:20.973

试试这个格式，

```
[request setValue:@"201320" forHTTPHeaderField:@"term_in"];
[request setValue:@"CS" forHTTPHeaderField:@"sel_subj"];
[request setValue:@"dummy" forHTTPHeaderField:@"sel_levl"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:30:15.953

@试试这段代码

```
NSURL *url = [NSURL URLWithString:@"https://selfservice.mypurdue.purdue.edu/prod/bwckctlg.p_display_courses"];  

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:3.0];

[request setHTTPMethod:@"POST"];

NSString *args = @"term_in=201320,sel_subj=CS,sel_levl=dummy,sel_schd=dummy,sel_coll=dummy"sel_divs=dummy,sel_dept=dummy,sel_attr=dummy";

NSData *requestBody = [args dataUsingEncoding:NSUTF8StringEncoding];

[request setHTTPBody:requestBody];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

使用 NSURLConnectionDelegate 方法处理响应或错误

# facebook-graph-api - comment_count 和 commentsbox_count 的区别

> ID：13037521
> 
> 赞同：2
> 
> 时间：2012-10-23T19:12:51.833
> 
> 标签：facebook-graph-api, comments, facebook-comments

在 API 结果（http://developers.facebook.com/docs/reference/fql/link_stat/）中有两个关于评论的计数：

**comment_count**：用户对共享故事 的评论数**commentsbox_count**：来自此 URL 评论框中的评论数。这仅包括顶级评论，不包括回复

有什么区别？comment_count 是否包括 commentsbox_count？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:52:27.943

它们彼此完全不同。
comment_count 是指在 Facebook 内部对共享故事发表的评论数，而 commentsbox_count 是指通过评论插件在外部网站上发表的评论。
网站可以使用评论插件轻松地在他们的网站上放置评论框，而无需自己实现。可以查询 commentsbox_count 以获取每个 URL 上留下的评论数。

# macos - 终端仿真器如何知道附加了哪些进程？

> ID：13037522
> 
> 赞同：2
> 
> 时间：2012-10-23T19:12:52.933
> 
> 标签：macos, terminal-emulator

OS X Terminal.app 有一个显示“活动进程名称”的选项。它以合理的准确度显示终端内（其中一个）前台进程的名称。例如，在运行时`make`，它会显示构建过程中涉及的各个子进程的名称（`cc`、`collect`、`ld`等）。这究竟是如何工作的？

到目前为止，我的主要假设是它跟踪附加会话中的前台进程组，并选择该进程组中最近启动的进程。但是，我不清楚它使用什么系统调用或服务来实现这一点。

# salesforce - 在 Salesforce 中使用 pagereference 从 url 预填充多选择选项列表

> ID：13037529
> 
> 赞同：0
> 
> 时间：2012-10-23T19:13:32.527
> 
> 标签：salesforce, apex-code

在 salesforce 中，我正在尝试构建一个 url，它将在表单中预填充多选选项列表。基本上，您按下帐户上的新会议按钮，该按钮将重定向到新事件。PageReference 重定向返回一个 PageReference 实例，其 url 包含 preopulation 的参数。但是，多选选项列表仅填充第一个选择。例如：

构建 URL 的字符串：

```
url = 'https://cs11.salesforce.com/00U/e?00NZ0000000LdLp=401%28a%29&00NZ0000000LdLp=401%28k%29'; 
```

多选选项列表的字段 ID 是 00NZ0000000LdLp，在上面的 URL 中重复，因此将所选字段填充为 401(a) 和 401(k)

然后重定向方法返回：

```
return new PageReference( url ); 
```

当我点击 New Meeting 按钮时，只会选择 401(a)。如果只是将该内置 URL 复制并粘贴到地址栏中，则将选择 401(a) 和 401(k)。为什么 PageReference 会删除数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:38:44.670

我认为这可能与页面引用存储 url 参数的方式有关。它将这些参数存储在映射中，这意味着如果您多次重复参数名称，它将被覆盖。它相当于：

mapParams.put('00NZ0000000LdLp','401(a)'); mapParams.put('00NZ0000000LdLp','401(k)');

您最好自己添加 url 参数并执行类似于下面的操作。

PageReference ref = new PageReference(url); ref.getParmeters().put('00NZ0000000LdLp', '401(a)&00NZ0000000LdLp=401(k)');

以上只是一个建议。我不确定 url 转义将如何影响这个想法，但为了回答你原来的问题，我认为在 PageReference 对象中使用地图可能是你只得到一个选定值的原因。

# c++ - C++ 如何从文本文件中删除指定行？

> ID：13037531
> 
> 赞同：0
> 
> 时间：2012-10-23T19:13:56.137
> 
> 标签：c++, text-files, filestream

正如我的标题所述，如何从文本文件中删除指定行。我的程序有一个 HR 用户，他们可以编辑/删除用户信息。我可以写入文件，但是要从特定行中删除，我一无所知。希望有人能给我一个如何做的例子，谢谢！

我的文本文件的一个例子

```
user;pass;1234;John;1111
user1;pass1;2345;May;2222
user2;pass2;3456;Mary;3333
user3;pass3;4567;Andy;4444
hr;hr;5678;Jonathan;5555
admin;admin;6789;Aili;6666
user10;pass10;7890;eggy;9999 
```

因此，当用户输入用户名 user3 时，我想删除文本文件第 4 行中 user3 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:16:46.703

这是一个伪代码，我会让你计算出细节：

```
 1\. read the entire file into a vector
    2\. delete that file
    3\. create and write back the data to the file skipping the line that isn't required. 
```

在循环中使用`std::getline()`从文件中读取一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:18:30.190

*   将文件内容加载到内存中，
*   删除那里的行，
*   并将内容写回文件。

您可以通过在被删除的行之前不加载文件的一部分来稍微优化此过程（尽管您仍然需要扫描它以找到“目标”行），但您将无法做得比没有专门的数据结构。

如果这在性能方面真的很重要，请考虑使用数据库而不是普通文件。

# macos - 使用终端在文本文件中查找和替换。如何转义所有字符？

> ID：13037532
> 
> 赞同：5
> 
> 时间：2012-10-23T19:14:04.583
> 
> 标签：macos, command-line, sed, terminal

我正在尝试使用终端替换文件中的一些 html 代码。

这是我正在使用的命令

```
perl -pi -w -e 's/find/replace/g;' /Volumes/Abc.html 
```

我正在尝试替换

```
<body> 
```

和

```
<body>
<div style="text-align: center;page-break-after:always;padding-top:0%;">
<img src="images/image-001.jpg" id="illustration" alt="illustration" />
<div id="caption" style="text-align:right;font-style:italic;"></div>
</div> 
```

所以我一直在尝试这个，但我不知道如何逃避所有的角色。你能帮我吗？

```
perl -pi -w -e 's/<body>/<body>
<div style="text-align: center;page-break-after:always;padding-top:0%;">
<img src="images/image-001.jpg" id="illustration" alt="illustration" />
<div id="caption" style="text-align:right;font-style:italic;"></div>
</div>
/g;' /Volumes/Abc.html 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:41:21.220

使用另一个分隔符，例如`{}`.

```
perl -pi -w -e 's{<body>}{...}g' /Volumes/Abc.html 
```

# .htaccess - 如何更改.htaccess 以允许访问多个页面

> ID：13037535
> 
> 赞同：1
> 
> 时间：2012-10-23T19:14:11.427
> 
> 标签：.htaccess, subdomain

我为一位朋友接管了一个托管帐户，以便在他的服务器上托管第二个域。一切都很好，除了由设计他的第一个站点的人生成的 .htaccess 文件。

主站点是：ra-pictures.com，托管在根文件夹/

我正在处理的网站是 posthumanmovie.com，它托管在文件夹 /posthuman

这是当前的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    # route non-existant requests to single script
    RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI} !-f
    RewriteRule ^.*$ index.php [QSA,NS]

</IfModule> 
```

当我尝试访问 posthumanmovie.com 时 - 我收到 404 not found 错误。

当我删除 .htaccess 文件时，它可以工作，但他的其他网站 ra-pictures.com 在任何不是索引页面的页面上都有 404 错误。关于如何更改 .htaccess 文件以允许访问两个站点的所有页面的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:25:31.527

添加条件以检查主机名：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{HTTP_HOST} ra-pictures\.com$ [NC]
    # route non-existant requests to single script
    RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI} !-f
    RewriteRule ^.*$ index.php [QSA,NS]

</IfModule> 
```

# regex - 使用 \Q...\E 使正则表达式无效 Perl

> ID：13037537
> 
> 赞同：0
> 
> 时间：2012-10-23T19:14:12.713
> 
> 标签：regex, perl, escaping

下面是我的脚本，它根据注释列表扫描输入文件的每一行。对于每一次出现，我都会从带有注释标签的行中标记该术语。正则表达式在没有 \Q..\E 运算符的情况下完美运行，但如果我不包含 \Q..\EI 则会出现范围错误。所以在下面的情况下，我必须保持替换有效，同时注意范围。希望问题很清楚。

```
 while (<FILE>) {

     chomp $_;

     foreach $word (@array) {

         @cells   = split /\t/, $word;
         $value   = $cells[0];
         $replace = $cells[1];

         chomp $value;
         chomp $replace;
         $_=~s/\Q\b[\w\-]*$value[\w\-]*\b\E)/<$replace>$&<\\$replace>/ig;
     }
     print $_,"\n"; 
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:17:28.023

我的猜测是您`$value`包含正则表达式元字符。这很容易解决；要么`$value = quotemeta $value;`在匹配之前使用并`\Q...\E`完全省略，要么只放置`\Q...\E`周围`$value`：`$_ =~ s/\b[\w\-]*\Q$value\E[\w\-]*\b/.../ig;`

# sass - 指南针文件位置最佳实践

> ID：13037538
> 
> 赞同：0
> 
> 时间：2012-10-23T19:14:19.280
> 
> 标签：sass, compass-sass

刚开始使用 SASS 和 Compass。

我一直在使用一个名为 CodeKit 的 Mac 应用程序来编译和管理我的 Sass 和 Compass。

如果我想在多个项目中使用一组 Sass Partials 并理想地将它们存储在中心位置（例如我的保管箱），这可能吗？

Codekit 有一个非常好的功能，叫做框架，它可以让你做到这一点，但是一旦你开始使用 Compass，它就不起作用了，因为 Compass 本身就是一个框架。

提前感谢您的帮助。

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:26:40.393

创建一个[Compass 扩展](http://compass-style.org/help/tutorials/extensions/)并将其导入您`config.rb`的 s.

# java - JPA 异常：对象：null 不是已知的实体类型

> ID：13037545
> 
> 赞同：1
> 
> 时间：2012-10-23T19:14:51.277
> 
> 标签：java, exception, jpa, persist

嗨，我是 JPA 的新手，当我想保留对象时，我收到以下错误：

```
java.lang.IllegalArgumentException: Object: null is not a known entity type.
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:437)
    at database.TarpineManager.persist(TarpineManager.java:31)
    at gijos.InsertToDB.insertLink(InsertToDB.java:34)
    at gijos.VilpraParser.run(VilpraParser.java:77) 
```

有我的第一个对象类，我想与其他 XLinksMedia 类建立关系，我认为问题出在

```
@OneToMany(mappedBy = "xParserLink", targetEntity = XLinksMedia.class, fetch=FetchType.EAGER, cascade = CascadeType.ALL)
private List<XLinksMedia> fotos; 
```

但我不知道出了什么问题：

```
package database.entity;

import java.io.Serializable;
import java.util.Date;
import java.util.List;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "x_parser_links")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "XParserLinks.findAll", query = "SELECT x FROM XParserLinks x"),
    @NamedQuery(name = "XParserLinks.findByLinkId", query = "SELECT x FROM XParserLinks x WHERE x.linkId = :linkId"),
    @NamedQuery(name = "XParserLinks.findByPageId", query = "SELECT x FROM XParserLinks x WHERE x.pageId = :pageId"),
    @NamedQuery(name = "XParserLinks.findByLink", query = "SELECT x FROM XParserLinks x WHERE x.link = :link"),
    @NamedQuery(name = "XParserLinks.findByLevel", query = "SELECT x FROM XParserLinks x WHERE x.level = :level"),
    @NamedQuery(name = "XParserLinks.findByLinkType", query = "SELECT x FROM XParserLinks x WHERE x.linkType = :linkType"),
    @NamedQuery(name = "XParserLinks.findByCreateDate", query = "SELECT x FROM XParserLinks x WHERE x.createDate = :createDate"),
    @NamedQuery(name = "XParserLinks.findByDelDate", query = "SELECT x FROM XParserLinks x WHERE x.delDate = :delDate")})
public class XParserLinks implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "link_id")
    private Integer linkId;
    @Column(name = "page_id")
    private Integer pageId;
    @Column(name = "link")
    private String link;
    @Column(name = "level")
    private Integer level;
    @Column(name = "link_type")
    private Short linkType;
    @Column(name = "create_date")
    @Temporal(TemporalType.TIMESTAMP)
    private Date createDate;
    @Column(name = "del_date")
    @Temporal(TemporalType.TIMESTAMP)
    private Date delDate;
    @JoinColumn(name = "tev_link_id")
    @OneToOne
    private XParserLinks tevas;   
    @OneToMany(mappedBy = "xParserLink", targetEntity = XLinksMedia.class, fetch=FetchType.EAGER, cascade = CascadeType.ALL)
    private List<XLinksMedia> fotos;

    public XParserLinks() {
    }

    public XParserLinks(Integer linkId) {
        this.linkId = linkId;
    }

    public Integer getLinkId() {
        return linkId;
    }

    public void setLinkId(Integer linkId) {
        this.linkId = linkId;
    }

    public Integer getPageId() {
        return pageId;
    }

    public void setPageId(Integer pageId) {
        this.pageId = pageId;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

    public Integer getLevel() {
        return level;
    }

    public void setLevel(Integer level) {
        this.level = level;
    }

    public Short getLinkType() {
        return linkType;
    }

    public void setLinkType(Short linkType) {
        this.linkType = linkType;
    }

    public Date getCreateDate() {
        return createDate;
    }

    public void setCreateDate(Date createDate) {
        this.createDate = createDate;
    }

    public Date getDelDate() {
        return delDate;
    }

    public void setDelDate(Date delDate) {
        this.delDate = delDate;
    }

    public XParserLinks getTevas() {
        return tevas;
    }

    public void setTevas(XParserLinks tevas) {
        this.tevas = tevas;
    }

    public List<XLinksMedia> getFotos() {
        return fotos;
    }

    public void setFotos(List<XLinksMedia> fotos) {
        this.fotos = fotos;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (linkId != null ? linkId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof XParserLinks)) {
            return false;
        }
        XParserLinks other = (XParserLinks) object;
        if ((this.linkId == null && other.linkId != null) || (this.linkId != null && !this.linkId.equals(other.linkId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "database.entity.XParserLinks[ linkId=" + linkId + " ]";
    }

} 
```

*fotos*对象的第二类

```
package database.entity;

import java.io.Serializable;
import javax.persistence.EmbeddedId;
import javax.persistence.Entity;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "x_links_media")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "XLinksMedia.findAll", query = "SELECT x FROM XLinksMedia x"),
    @NamedQuery(name = "XLinksMedia.findByLinkId", query = "SELECT x FROM XLinksMedia x WHERE x.xLinksMediaPK.linkId = :linkId"),
    @NamedQuery(name = "XLinksMedia.findByImage", query = "SELECT x FROM XLinksMedia x WHERE x.xLinksMediaPK.image = :image")})
public class XLinksMedia implements Serializable {
    private static final long serialVersionUID = 1L;
    @EmbeddedId
    protected XLinksMediaPK xLinksMediaPK;
    @ManyToOne
    @JoinColumn(name = "link_id")
    private XParserLinks xParserLink;

    public XLinksMedia() {
    }

    public XLinksMedia(XLinksMediaPK xLinksMediaPK) {
        this.xLinksMediaPK = xLinksMediaPK;
    }

    public XLinksMedia(int linkId, String image) {
        this.xLinksMediaPK = new XLinksMediaPK(linkId, image);
    }

    public XLinksMediaPK getXLinksMediaPK() {
        return xLinksMediaPK;
    }

    public void setXLinksMediaPK(XLinksMediaPK xLinksMediaPK) {
        this.xLinksMediaPK = xLinksMediaPK;
    }

    public XParserLinks getxParserLink() {
        return xParserLink;
    }

    public void setxParserLink(XParserLinks xParserLink) {
        this.xParserLink = xParserLink;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (xLinksMediaPK != null ? xLinksMediaPK.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof XLinksMedia)) {
            return false;
        }
        XLinksMedia other = (XLinksMedia) object;
        if ((this.xLinksMediaPK == null && other.xLinksMediaPK != null) || (this.xLinksMediaPK != null && !this.xLinksMediaPK.equals(other.xLinksMediaPK))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "database.entity.XLinksMedia[ xLinksMediaPK=" + xLinksMediaPK + " ]";
    }

} 
```

持久化对象是这个方法：

```
 obj= new XParserLinks();
    obj.setCreateDate(new Date());
    obj.setLevel(1);
    obj.setPageId(2);
    obj.setLink(link);
    obj.setLinkType((short) 2);

        TarpineManager.startTransaction();

        TarpineManager.persist(obj);

        System.out.println("NAUJAS LINKAS");
        TarpineManager.commitTransaction(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:35:11.230

只是一个疯狂的猜测：`fotos`您尝试持久命名的实体的实例变量`obj`永远不会设置，因此`null`. 空指针似乎不是一对多关系的合法实体。

# android - 如何通过单击列表视图项获取数据字符串的一部分

> ID：13037546
> 
> 赞同：0
> 
> 时间：2012-10-23T19:14:53.660
> 
> 标签：android, string, listview, trim

我有一个名为 current 的变量，它保存最后点击的列表视图项目数据。该数据的 id 将用于再次查询数据库以查找相似的电影。

current = id=17985, title=the matrix, year=1999 当我只需要实际的 id 号时的问题。我试图使用子字符串来只使用字符串的正确位置。这适用于矩阵，因为它的 id 正好是 5 位数长，但是一旦我尝试点击其 id 中位数较高/较低的电影，它当然会跳闸。

字符串 id = current.substring(4,9).trim().toString(); 不适用于所有电影。

继承人一些代码：

// 搜索方法：这是必要的，因为这是第一次使用的方法，并且设置了变量 current。这也是唯一使用三行获取数据的方法 - id、title 和 year。

```
 protected void search() {
        data = new ArrayList<Map<String, String>>();
        list = new ArrayList<String>();
        EditText searchstring = (EditText) findViewById(R.id.searchstring);
        String query = searchstring.getText().toString().replace(' ', '+');
        String text;

        text = searchquery(query);
        try {
            JSONObject res = new JSONObject(text);

            JSONArray jsonArray = res.getJSONArray("movies");

            for (int i = 0; i < jsonArray.length(); i++) {

                JSONObject jsonObject = jsonArray.getJSONObject(i);
                item = new HashMap<String, String>(2);
                item.put("id",jsonObject.getString("id"));
                item.put("title",jsonObject.getString("title"));
                item.put("year", jsonObject.getString("year"));
                data.add(item);

            }
        } catch (Exception e) {
            e.printStackTrace();
        }                   

        aa = new SimpleAdapter(SearchTab.this, data,
                R.layout.mylistview,
                new String[] {"title", "year"},
                new int[] {R.id.text1,
                R.id.text2});
        ListView lv = (ListView) findViewById(R.id.listView1);
        lv.setAdapter(aa);
        lv.setDividerHeight(5); 

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

                Map<String, String> s = data.get((int) id);
                current = s.toString();
            }});
    } 
```

// 类似的方法：这试图从“当前”字符串中获取的数据构建一个列表。如您所见，我尝试使用 4,9 来仅获得正确的数字，但其他人却失败了。最好的办法是只能获得我似乎做不到的 ID。toast 只是为了查看正在获取的内容，就像系统输出的一样。

```
 protected void similar() {
        data = new ArrayList<Map<String, String>>();
        list = new ArrayList<String>();
        String id = current.substring(4,9).trim().toString();
        Toast.makeText(getApplicationContext(), id, Toast.LENGTH_SHORT).show();
        String text;

        text = similarquery(id);
        try {
            JSONObject res = new JSONObject(text);

            JSONArray jsonArray = res.getJSONArray("movies");

            for (int i = 0; i < jsonArray.length(); i++) {

                JSONObject jsonObject = jsonArray.getJSONObject(i);
                item = new HashMap<String, String>(2);
                item.put("title",jsonObject.getString("title"));
                item.put("year", jsonObject.getString("year"));
                data.add(item);

            }
        } catch (Exception e) {
            e.printStackTrace();
        }                   

        aa = new SimpleAdapter(SearchTab.this, data,
                R.layout.mylistview2,
                new String[] {"title", "year"},
                new int[] {R.id.text1,
                R.id.text2});
        ListView lv = (ListView) findViewById(R.id.listView1);
        lv.setAdapter(aa);
        lv.setDividerHeight(5); 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:36:00.423

如果您想通过子字符串解决它，那么您不应该使用预定义的`.substring(4,9)`. 使用类似的东西：

```
String item = "id=17985, title=the matrix, year=1999";
String id = item.substring(item.indexOf("id=") + 3, item.indexOf(" ", item.indexOf("id=") + 3) - 1);
System.out.println("Your ID is: " + id);
// Works also for "test=asdf, id=17985, title=the matrix, year=1999" 
```

它获取“id=”和下一个“”（空格）之间的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:38:35.147

利用`current.split(",")[0].split("=")[1]`

编辑-当然假设 id 始终是逗号分隔列表中的第一个，并且始终是由 '=' 分隔的名称值对

# web-parts - 需要编辑 WebPartZone 的背景颜色

> ID：13037548
> 
> 赞同：0
> 
> 时间：2012-10-23T19:14:58.867
> 
> 标签：web-parts

我正在尝试将页面上 WebPartZone 的颜色从默认的“白色”更改为透明。我认为使用 CSS 很容易做到这一点，但似乎背景颜色是通过 WebPartZone 内联定义的，我不知道去哪里编辑它。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:18:47.843

没关系。我想出使用 Firebug 将完整的 CSS 路径复制到内容区域并将“背景颜色”设置为透明。像魅力一样工作。

# asp.net - 使用计划任务运行 ASPX 页面问题

> ID：13037550
> 
> 赞同：2
> 
> 时间：2012-10-23T19:14:59.590
> 
> 标签：asp.net, iis, internet-explorer-7, scheduled-tasks, webforms

我有一个计划任务设置为在 IE7 中每 3 分钟运行一次 Scan.aspx。Scan.aspx 依次从 10 个文件中读取数据。这些文件不断更新。文件中的值被插入到数据库中。

偶尔，正在读取的值会被截断或扭曲。例如，如果文件中的值为“Hello World”，那么“Hello W”、“Hel”等随机条目将在数据库中。这些条目上的时间戳看起来完全随机。有时是凌晨 1:00，有时是凌晨 3:30。有些晚上，这根本不会发生。

调试代码时无法重现此问题。所以我知道在**“正常”**情况下，代码可以正确执行。

**更新：**

这是用于读取文本文件的 aspx 代码隐藏（在 Page_Load 中）（这对 10 个文本文件中的每一个都调用）：

```
Dim filename As String = location
   If File.Exists(filename) Then
        Using MyParser As New FileIO.TextFieldParser(filename)
            MyParser.TextFieldType = FileIO.FieldType.Delimited
            MyParser.SetDelimiters("~")
            Dim currentrow As String()
            Dim valueA, valueB As String

            While Not MyParser.EndOfData
                Try
                    currentrow = MyParser.ReadFields()
                    valueA= currentrow(0).ToUpper
                    valueB = currentrow(1).ToUpper
                    //insert values as record into DB if does not exist already
                Catch ex As Exception
                End Try
            End While
        End Using
    End If 
```

任何想法为什么这可能会在一天中多次运行（通过计划任务）时导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:33:49.743

首先在您的 ASP.NET 解决方案中实现 Log4Net 等 Logger，在 Scan.aspx 中实现 Log 方法入口和出口点，以及更新数据库的方法。这有可能提供一些关于正在发生的事情的暗示。您还应该检查系统事件日志以查看是否有任何其他事件与您失败的数据库条目相关联。

ASP.NET 不是这种情况下的最佳选择，尤其是在与 Windows 计划任务配对时；这不是一个健壮的设计。更强大的系统将在 Windows 服务应用程序内的计时器上运行。可以移植用于读取文件和更新到数据库的代码。如果您有权访问服务器并且可以安装 Windows 服务，请确保您也将日志记录添加到 Windows 服务！

确保您阅读了下面的如何调试

1.  [MSDN 上的 Windows 服务应用程序介绍](http://msdn.microsoft.com/en-us/library/d56de412%28v=vs.110%29.aspx)：具有以下链接：
2.  如何：创建 Windows 服务
3.  如何：安装和卸载服务
4.  如何：启动服务
5.  如何：调试 Windows 服务应用程序]
6.  演练：在组件设计器中创建 Windows 服务应用程序
7.  如何：将安装程序添加到您的服务应用程序

关于您对有时在凌晨 1 点和 3.30 点出现的明显随机条目的后续评论：您应该：

1.  当这些发生时，调查站点的 IIS 日志，并找出当时访问（访问）页面的内容。
2.  检查访问您的 aspx 页面的服务器上是否有索引服务。
3.  检查是否安装了防病毒软件并确定这是否正在访问您的 asp 页面或影响 Asp.Net 缓存；这可能会导致编译问题，例如 aspnet 缓存中的 aspnet 页面上的文件锁定；（与 aspnet web 应用程序相反的 aspnet 网站场景）可能会产生奇怪的行为。
4.  查明截断的条目是否与更新文件的时间一致：将您的数据库条目时间戳或记录器时间戳与文件更新时间交叉引用。
5.  更新您的记录器以记录正在读取的文件的全部内容，以验证您没有遇到“垃圾输入 > 垃圾输出”的情况。运行一晚，小心服务器上的磁盘空间。
6.  找出您的 Web 应用程序运行所在的 App-Pool 何时被回收，并将其与您截断条目的时间交叉引用；您只能通过 ASP.NET Health Monitoring 使用 web.config 执行此操作。

您的代码是用“try catch”编写的，它会掩埋错误。如果您不打算对捕获的错误做一些有用的事情，那么不要捕获它。在代码中处理您的边缘情况，而不是尝试捕获。 [请参阅此站点上的这个 try-catch 问题](https://stackoverflow.com/questions/1697216/the-difference-between-try-catch-throw-and-try-catche-throw-e)。

# java - 存储从java中的方法返回的数组

> ID：13037551
> 
> 赞同：0
> 
> 时间：2012-10-23T19:15:02.817
> 
> 标签：java, arrays, google-maps, methods

我想存储从方法返回的二维数组。没有最后一个，我就失去了所有的价值观。

```
public static float[][]  hesap(int toplamSuc)
{       
    float[][] temp;
    temp = new float[toplamSuc][2];
    for (int i = 0; i < toplamSuc; i++) 
    {
        temp = (GGcoder.koordinat(suc[i][4], toplamSuc));
    }
    return temp;
} 
```

这个“temp”数组存储两个值。第一个值是犯罪信息。其次是纬度和经度。我像下面那样做那个任务，但它不起作用。

```
float[][] temp  = new float[toplamSuc][2];
    temp = kokOlusturma.hesap(toplamSuc); 
```

编辑：该函数工作正常，但我无法将数组转移到另一个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:19:36.667

在你的`for`循环中：

```
for (int i = 0; i < toplamSuc; i++) 
{
    temp = (GGcoder.koordinat(suc[i][4], toplamSuc));
} 
```

您`temp`在每次迭代时都在重置。因此，您的`temp`变量将仅具有在 for 循环的最后一次迭代中计算的值。您可能想要：

```
for (int i = 0; i < toplamSuc; i++) 
{
    temp[i] = (GGcoder.koordinat(suc[i][4], toplamSuc));
} 
```

现在你的方法**可能**相当于说：

```
public static float[][]  hesap(int toplamSuc)
{
    float[][] temp = (GGcoder.koordinat(suc[toplamSuc-1][4], toplamSuc));
    return temp;
} 
```

# sql-server - SQL Server：时间序列数据性能

> ID：13037557
> 
> 赞同：7
> 
> 时间：2012-10-23T19:15:39.197
> 
> 标签：sql-server, performance, sql-server-2000, time-series

我有一个包含超过 10 亿行时间序列数据的表，具有出色的插入性能，但（有时）选择性能很差。

表`tblTrendDetails`（PK排序如图）：

```
PK  TrendTime    datetime
PK  CavityId     int
PK  TrendValueId int
    TrendValue   real 
```

该表不断地拉入新数据并清除旧数据，因此插入和删除性能需要保持敏捷。

执行如下查询时，性能很差（30 秒）：

```
SELECT * 
FROM tblTrendDetails
WHERE TrendTime BETWEEN @inMinTime AND @inMaxTime
  AND CavityId = @inCavityId
  AND TrendValueId = @inTrendId 
```

如果我再次执行相同的查询（时间相似，但任何`@inCavityId`or `@inTrendId`），性能非常好（1 秒）。性能计数器显示磁盘访问是第一次运行查询的罪魁祸首。

关于如何在不（显着）对插入或删除性能产生不利影响的情况下提高性能的任何建议？欢迎任何建议（包括完全更改底层数据库）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T21:04:08.233

相同或相似数据的后续查询运行得更快的事实可能是由于 SQL Server[缓存了您的数据](http://www.mssqltips.com/sqlservertip/1360/clearing-cache-for-sql-server-performance-testing/)。也就是说，是否可以加快这个初始查询的速度？

**验证查询计划：**

我的猜测是您的查询应该导致索引搜索而不是索引扫描（或更糟糕的是，表扫描）。请使用`SET SHOWPLAN_TEXT ON;`或类似功能对此进行验证。使用`between`and`=`作为您的查询确实应该[利用聚集索引](https://stackoverflow.com/questions/11787797/should-every-user-table-have-a-clustered-index/11835746#11835746)，尽管[这值得商榷](http://sqlinthewild.co.za/index.php/2011/02/01/is-a-clustered-index-best-for-range-queries/)。

**索引碎片：**

在所有这些插入和删除之后，您的聚集索引（在本例中为主键）可能非常碎片化。我可能会用[`DBCC SHOWCONTIG (tblTrendDetails)`](http://msdn.microsoft.com/en-us/library/aa258803(v=sql.80).aspx).

您可以使用 对表的索引进行碎片整理[`DBCC INDEXDEFRAG (MyDatabase, tblTrendDetails)`](http://msdn.microsoft.com/en-us/library/aa258286(v=sql.80).aspx)。这可能需要一些时间，但可以让表保持可访问性，并且您可以停止操作而不会产生任何令人讨厌的副作用。

您可能需要更进一步并使用[`DBCC DBREINDEX (tblTrendDetails)`](http://msdn.microsoft.com/en-us/library/aa258828(v=sql.80).aspx). 不过，这是一个离线操作，因此您应该只在不需要访问表时才执行此操作。

此处描述了一些差异：[Microsoft SQL Server 2000 索引碎片整理最佳实践](http://technet.microsoft.com/library/Cc966523#EDAA)。

请注意，您的事务日志可能会因对大表进行碎片整理而增长很多，并且可能需要很长时间。

**分区视图：**

如果这些不能解决问题（或者碎片不是问题），您甚至可能希望查看[分区视图](http://msdn.microsoft.com/en-us/library/aa213239(v=sql.80).aspx)，在其中您为各种记录范围创建一堆基础基表，然后将它们全部合并到一个视图中（替换原来的表）。

**更好的东西：**

如果这些选择的性能是真正的业务需求，您也许可以为更好的硬件提供理由：更快的驱动器、更多的内存等。如果您的驱动器速度是原来的两倍，那么这个查询将在一半的时间内运行，是的? 此外，这可能对您不适用，但我只是发现较新版本的 SQL Server 确实更快，具有更多选项并且更好地维护。我很高兴将公司的大部分数据移至 2008R2。但我离题了...

# asp.net-mvc - 将 MVC 应用程序自己的 Web API 用于 Ajax 绑定是一种好习惯吗？

> ID：13037558
> 
> 赞同：1
> 
> 时间：2012-10-23T19:15:45.797
> 
> 标签：asp.net-mvc, asp.net-web-api, kendo-ui

我正在编写一个具有许多 Ajax 小部件的应用程序（准确地说是 Kendo-UI）。在没有标准控制器的情况下拥有所有这些 Ajax 响应开始变得混乱，所以我开始考虑让每个实体都成为自己的控制器。如果我花时间来做这件事，我想我还不如继续做那些作为 WebAPI 的事情，因为我计划在不久的将来做这件事，但是嘿，它已经完成了......

所以我的问题是：使用 MVC 应用程序自己的 Web API 作为 Ajax Widget 提要是一种好习惯，还是有任何理由坚持使用标准控制器？

我见过一些关于性能的争论，但我认为这不适用于这种情况。我相信这更像是一种“控制器调用 WebAPI”的情况，它对性能有明显的影响。但是因为它已经是一个客户端 Ajax 调用，所以无论它进入标准 MVC 控制器还是 WebAPI 控制器都不应该改变任何事情，不是吗？

编辑

有关该项目的其他信息：

*   我正在使用实体框架进行数据访问。
*   我有一个使用 UnitOfWork 的存储库模式。
*   我正在使用正确的 MVC 结构（EF POCO 自动映射到存储库中的 DTO POCO 并由控制器输入视图模型）
*   这是 .NET 4.0 上的 MVC 4 项目
*   有很多数据库关系（特别是对于我目前正在使用的对象）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:21:17.857

我不知道“好的做法”，但肯定不是“坏做法”。无论您是在应用程序中还是在其他应用程序中执行此操作，我都认为没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T04:39:51.047

我认为这是一件好事，但只有当你在 API 中所做的事情对其他应用程序和服务尽可能通用时，才能重用 API。

我编写并继续维护的应用程序都使用与您的应用程序几乎完全相同的堆栈。

我最近重构了其中一个应用程序，以便在我的视图中将 API 用于所有常见的事情，比如我绑定到 Kendo ComboBoxes 的列表等。它是一个相当大的应用程序，它重用了许多相同的列表，例如跨各种实体和视图的状态、优先级、复杂性，因此将它们放在 API 中是有意义的。

我还没有走得那么远。我用这样的东西划清界限：

```
public ActionResult GetAjaxProjectsList([DataSourceRequest]DataSourceRequest request)
    {
        return Json((DataSourceResult)GetProjectsList().ToDataSourceResult(request), JsonRequestBehavior.AllowGet);
    } 
```

这对于 Kendo Grid 想要返回数据的方式非常具体。我连接到此应用程序的其他任何内容都不会以这种格式使用此数据，因此我将其保存在控制器中。

简而言之......我将 API 用于同一个 MVC 应用程序中的常见事物以及我允许其他应用程序或服务（如 Excel）使用的事物。

# performance - 将集合转换为 R 中的列索引的有效方法是什么？

> ID：13037560
> 
> 赞同：2
> 
> 时间：2012-10-23T19:15:47.313
> 
> 标签：performance, algorithm, r, indexing, set

**概述**

给出一个大的（nrows > 5,000,000+）数据框**A**，其中包含字符串行名和不相交集的列表（n = 20,000+）**B**，其中每个集由**A**中的行名组成，创建的最佳方法是什么通过唯一值表示**B**中的集合的向量？

**插图**

以下是说明此问题的示例：

```
# Input
A <- data.frame(d = rep("A", 5e6), row.names = as.character(sample(1:5e6)))
B <- list(c("4655297", "3177816", "3328423"), c("2911946", "2829484"), ...) # Size 20,000+ 
```

期望的结果是：

```
# An index of NA represents that the row is not part of any set in B.
> A[,"index", drop = F]
        d index
4655297 A     1
3328423 A     1
2911946 A     2
2829484 A     2
3871770 A    NA
2702914 A    NA
2581677 A    NA
4106410 A    NA
3755846 A    NA
3177816 A     1 
```

**天真的尝试**

可以使用以下方法来实现类似的效果。

```
n <- 0
A$index <- NA
lapply(B, function(x){
  n <<- n + 1
  A[x, "index"] <<- n
}) 
```

**问题**

然而，由于多次索引 A，这是不合理的慢（几个小时），并且不是非常 R 风格或优雅。

如何以快速有效的方式产生预期的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:37:27.567

这是一个使用 base 的建议，与您当前的方法相比，它并不算太糟糕。

样本数据：

```
A <- data.frame(d   = rep("A", 5e6),
                set = sample(c(NA, 1:20000), 5e6, replace = TRUE),
                row.names = as.character(sample(1:5e6)))
B <- split(rownames(A), A$set) 
```

基础方法：

```
system.time({
A$index <- NA
A[unlist(B), "index"] <- rep(seq_along(B), times = lapply(B, length))
})
#    user  system elapsed 
#   15.30    0.19   15.50 
```

查看：

```
identical(A$set, A$index)
# TRUE 
```

对于任何更快的东西，我想`data.table`都会派上用场。

# php - 如何阻止 mod_rewrite 将链接附加到 url？

> ID：13037561
> 
> 赞同：0
> 
> 时间：2012-10-23T19:15:53.067
> 
> 标签：php, .htaccess, mod-rewrite

我希望答案会如此简单，我想哭，但我似乎无法弄清楚。我是 mod_rewrite 的新手。

我想将我的链接从 domain.com/?p=about 更改为 domain.com/about* */* * （带有斜杠）并且它工作正常，但是每当我转到一个链接时，它都会附加新的链接到网址的背面。例如，我有一个 about 和一个 contact 链接。如果我点击 about，它会导航到 domain.com/about/，然后如果我点击 contact，它会导航到 domain.com/about/contact/，并将继续将链接添加到 URL 的末尾。如果我在 domain.com 并单击一个链接（在这种情况下是关于），它将转到 domain.com/about/ 如果我再单击大约 4 次，我的地址栏将显示“domain.com/ about/about/about/about/about/" 我在下面的一个非常简单的例子中复制了这个，我做错了什么？

.htaccess

```
RewriteEngine On
RewriteRule ([a-zA-Z0-9]+)/$ index.php?p=$1 
```

索引.php

```
<a href="about/">about</a> | <a href="contact/">contact</a><br><br>

<?php
    if(!isset($_GET['p'])) {
        echo "home";
    } else {
        echo $_GET['p'];
    }
?> 
```

谢谢您的帮助！

编辑：如果我使用绝对路径，它可以正常工作，但如果我不是绝对必须这样做，我宁愿不这样做。

编辑2：添加

```
RewriteBase / 
```

断开链接。他们似乎要去 domain.com/about/ 和 .../contact/，但我得到一个 404 - 我假设我使用的规则与我进行链接的方式不兼容，这就是为什么我也包括了 index.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:46:12.430

您正在相对于当前路径在 HTML 中定义所有链接。

您将需要更改您的链接，以便：

```
<a href="about/">about</a> | <a href="contact/">contact</a><br><br> 
```

变为（注意网址上的前导 / ）：

```
<a href="/about/">about</a> | <a href="/contact/">contact</a><br><br> 
```

当您在页面上时，浏览器`site.com/about/us`会将类似的链接`<a href="home/"`解析为`site.com/about/us/home`.

解决方案是更改所有链接、图像、样式表和 javascript，以在 URL 中使用绝对路径，而不是像现在这样的相对路径。

编辑：刚刚注意到您的编辑。你真的应该使用绝对路径，而不是相对路径。如果您想保留相对 URL，则必须`<base href="/" />`在所有页面上使用类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:47:21.063

无论您做什么，单击 a`<a href="about/">about</a>`都会附加`about/`到 URL 的末尾。这就是相对链接的工作方式。

您的选择是，按照明智的顺序：

1.  只需删除该斜杠即可。这就是你的问题的原因：

    ```
    <a href="about">about</a> 
    ```

    `/`相对链接将用您的新值替换路径的最后一部分（在 last 之后）。

2.  添加前面的`../`. 这有点hacky，但它可以让你保留有价值的斜线

    ```
    <a href="../about/">about</a> 
    ```

3.  `/about/about`从to执行 301 重定向`/about`。这将导致地址栏`/about`再次`/about/about`来回切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-01T12:29:49.873

回答可能有点晚了，但是在本`<head>`节中添加这一行就可以了：

```
<base href="/"> or <base href="your-domain-name"> 
```

# java - 如何在 Java 中的 Map 中存储链接到字符串键的 ArrayList

> ID：13037562
> 
> 赞同：0
> 
> 时间：2012-10-23T19:15:53.283
> 
> 标签：java, map, arraylist

我正在读取一个数据文件，该文件每行包含三个字符串数据类型。每行单独读取并存储到名为 temp 的 ArrayList 中。我想获取 temp 的第三个元素并将其用作 Map 中的键，该键将键映射到 Temp 的内容并为每一行执行此操作。我有以下代码，它可以编译，但运行时给我一个空错误，分配给 parsedData。

```
Map<String,ArrayList<String> > parsedData;
    int pos;
    String line;
    StringBuilder buffer = new StringBuilder();
    ArrayList<String> temp;// = new ArrayList<String>();
    try {
        temp = new ArrayList<String>();
        while ((line = inBufR.readLine()) != null){
            buffer.append(line);
            while (buffer.length() != 0){
                pos = buffer.indexOf(delim);
                if (pos != -1){ //Cases where delim is found
                    temp.add( buffer.substring(0,pos).trim() );
                    buffer.delete(0,pos+delim.length()); //Cannibalizing the string
                    while ( (buffer.indexOf(delim)) == 0){
                        buffer.delete(0,delim.length());
                    }
                } else { //Cases where delim is not found
                    temp.add( buffer.substring(0,buffer.length()).trim() );
                    buffer.delete(0,buffer.length()); //clearing the string
                } // else
            }//while (buffer.length() !=0
            parsedData.put(temp.get(keyCol) , temp);        
            temp.clear();
        }//while ((buffer = inBufR.readLine()) !=null)
    } catch (Exception e) {
        System.err.println("ERROR: " + e.getMessage()); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:17:47.087

您尚未将 parsedData 初始化为任何内容。它有`null`参考。当您尝试`put`对空引用执行操作时，您将得到`NullPointerException`.

```
Map<String,ArrayList<String> > parsedData= new HashMap<String, ArrayList<String>>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:18:38.790

你得到的原因是`NullPointerException`因为你从未初始化你的`Map`（**parseData**）。您需要像这样初始化 parseData：

```
Map<String, List<String> > parsedData = new HashMap<String, ArrayList<String>>(); 
```

# c++ - 在哪里实现哈希函数？

> ID：13037565
> 
> 赞同：0
> 
> 时间：2012-10-23T19:15:58.277
> 
> 标签：c++, c++11

我使用一个对象作为一个键`unordered_map`，所以我需要定义一个哈希函数。我的问题是，哈希函数应该在**哪里实现。**我应该把它和类实现放在一起，还是应该在我需要的地方实现它。

更新：如果有所作为，所有这些都基于一个框架

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:29:12.377

如果你预计你需要在很多地方重用它`unordered_map`，把它放在可见的地方，比如在课堂上。

如果您只需要一次性`unordered_map`使用它，请将它放在靠近您使用它的地方。您甚至可以[使用 lambda](https://stackoverflow.com/a/10238658/533120)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:33:02.220

我会把它和类定义放在一起，至少如果你`==`在`unordered_map`. 哈希函数的实现依赖于等式比较的实现，将两者保持在一起有一定的优势，可以减少有人改变哈希函数而不改变的概率`==`。

如果您还为地图定义了一个特殊的相等函数，那么这两个函数应该一起定义，可能靠近它们将用于实例化地图的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:37:58.500

在我看来，如果哈希函数是基本的，如下所示，它应该是类的方法，也应该是内联的。

```
int hashFunction(long x){
    return (int) (x % N);
} 
```

如果它是一个更复杂的散列函数，它应该是这个类的一个方法。因为你需要一个“N”，它对那个类来说是特别的。

# wpf - WPF 不可编辑组合框中的选项卡导航问题

> ID：13037568
> 
> 赞同：2
> 
> 时间：2012-10-23T19:16:04.263
> 
> 标签：wpf, combobox, tabs, navigation

我有一个 WPF 组合框......这是不可编辑的。当我进入此组合框时...我有一个样式设置器 ( `<Setter Property="IsDropDownOpen" Value="True"/>`) 来打开组合框。但是当我再次选项卡时..焦点移动到打开的组合框中的下一个项目....它在那里循环。我无法选择下一个控件。

这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:27:02.677

尝试 ：

```
<Style TargetType="{x:Type ComboBoxItem}">
    <Setter Property="IsTabStop" Value="False"/>
</Style> 
```

或者

使用 KeyboardNavigation ：

[带有自定义控件的WPF选项卡顺序？](https://stackoverflow.com/questions/4727999/wpf-tab-order-with-custom-controls)

不推荐，但工作...

```
 <Grid>
            <ComboBox Grid.Row="1" Margin="0,0,0,0" Name="comboBox1" HorizontalAlignment="Left" Width="120" Height="20"  IsEditable="False" KeyDown="comboBox1_KeyDown"  GotKeyboardFocus="comboBox1_GotKeyboardFocus" >
                <ComboBox.Style>
                    <Style TargetType="{x:Type ComboBox}">
                    <Style.Triggers>
                        <Trigger Property="IsKeyboardFocusWithin" Value="True">
                            <Setter Property="IsDropDownOpen" Value="True" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
                </ComboBox.Style>
                <ComboBoxItem>Male</ComboBoxItem>
                <ComboBoxItem>Female</ComboBoxItem>
                <ComboBoxItem>Unknown</ComboBoxItem>
            </ComboBox>

        </Grid>

    private void comboBox1_KeyDown(object sender, KeyEventArgs e)
    {
        ComboBox cb = sender as ComboBox;
        if (e.Key == Key.Tab && cb.IsDropDownOpen)
        {
            ComboBoxItem item = FocusManager.GetFocusedElement(Window.GetWindow(this)) as ComboBoxItem;
            cb.SelectedItem = item;
            cb.IsDropDownOpen = false;
            e.Handled = true;
        }
    }

   private void comboBox1_GotKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
        {
            ComboBox cb = sender as ComboBox;
            cb.IsDropDownOpen = true;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T11:27:13.033

您可以通过以下代码实现相同的目的：-

```
 private void comboBox1_KeyDown(object sender, KeyEventArgs e)
  {
    if (e.Key == Key.Enter)
        {
            IsDropDownOpen = true;
            e.Handled = true;
        }
  } 
```

现在，当焦点设置在 ComboBox 上时，您需要按 Enter 键打开下拉菜单，您可以使用 down 关键字遍历 ComboBox 项目。要移动到下一个控件，您需要按 Tab。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T10:13:17.403

我有同样的问题，在 XAML 中这样解决：

```
<Style x:Key="RadComboBoxItemStyle" TargetType="telerik:RadComboBoxItem">
        <Setter Property="Focusable"
                Value="False" />
        <Setter Property="IsHitTestVisible"
                Value="True" /> 
```

# php - php：在 curl 请求中发送 cookie

> ID：13037570
> 
> 赞同：1
> 
> 时间：2012-10-23T19:16:19.743
> 
> 标签：php, cookies, curl

我有下面的卷曲代码来获取。

```
<?php  
function get_content($URL){
          $ch = curl_init();
          curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
          curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt'); 
          curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt'); 
          curl_setopt($ch, CURLOPT_URL, $URL);
          $data = curl_exec($ch);
          curl_close($ch);
          return $data;
      }
 echo get_content("http://www.domain.com/cool.php");
?> 
```

我使用了 http 标头，cookie 如下所示

```
xidseq:22
xid:b05f251c-8a72-4c2b-a230-e03b9c5c87b7&&BAYIDSAMFE1C013&343
data:dsfsfssdss 
```

我需要`http://www.domain.com/cool.php`使用一些 cookie 发送 GET 请求。

我如何将 cookie 放入 cookie.txt 中？cookie 是否有任何特定格式..或者只是发布它有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:10:52.273

如果上面的脚本不起作用，请尝试：

```
curl_setopt($ch, CURLOPT_COOKIEFILE, dirname(__FILE__) . '/cookie.txt'); 
curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookie.txt'); /* make sure you provide FULL PATH to cookie files*/ 
```

检查 . 上的文件权限和所有权`dirname(__FILE__) . '/cookie.txt'`。确保文件是可写的。

要将 cookie 放入 cookie.txt 中，您需要访问包含它们的特定网页 -**只有服务器端 cookie 您可以使用 cURL 获取**，javascript cookie 无法通过 cURL 访问，至少不能直接访问。

如果您想为您的 GET 请求手动创建 cookie，请阅读 Netscape cookie 格式或 - 最好的方法，通过 CURLOPT_COOKIEJAR 保存一些“真实网站”cookie 以查看和理解格式。

# sql-server - T-SQL 案例/子查询

> ID：13037575
> 
> 赞同：2
> 
> 时间：2012-10-23T19:16:51.147
> 
> 标签：sql-server, tsql

我在下面有一个 T-SQL 查询，它根据日期返回结果

```
SELECT
    SUM(CASE WHEN date ='2012-10-31' then Amount ELSE 0 END) AS [Amount],
    SUM(CASE WHEN date ='2012-10-31' then Discount1  ELSE 0 END) AS [Discount 1],
    SUM(CASE WHEN date ='2012-10-31' then Discount2  ELSE 0 END) AS [Discount 2]
    SUM(CASE WHEN date ='2012-10-31' then Amount - Discount1 - Discount2 ELSE 0 END) AS   
[Total Amount]
FROM
    Orders 
```

当前结果：

```
Amount   Discount1   Discount2   Total
--------------------------------------  
100.00   5.00        5.00        90.00 
```

我想按月运行和显示/分组。有任何想法吗？

```
 Amount    Discount1  Discount2   Total
                       -------------------------------------------
  October                100.00     5.00        5.00       90.00
  November               100.00    10.00        5.00       85.00
  December               200.00    20.00       10.00      170.00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:29:49.507

如果您需要按月分组，您可以尝试类似以下的操作：

```
select datename(mm, date) month,
  sum(amount) amount,
  sum(discount1) discount1,
  sum(discount2) discount2,
  sum(amount - discount1 - discount2) Total
from orders
group by datename(mm, date) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/160f0/1)

# javascript - 单击并使用 add/removeClass 更改标题的类

> ID：13037579
> 
> 赞同：0
> 
> 时间：2012-10-23T19:16:58.663
> 
> 标签：javascript, jquery, css

我试图让用户在 1-4 个选项之间单击。他们可以选择一个或全部 4 个。

这是[jsfiddle](http://jsfiddle.net/YV8gb/9/)。

```
<a class="selector" href="#"><h2 class="unselected">Option 1</h2></a>
<a class="selector" href="#"><h2 class="unselected">Option 2</h2></a>
<a class="selector" href="#"><h2 class="unselected">Option 3</h2></a>
<a class="selector" href="#"><h2 class="unselected">Option 4</h2></a>

$("a.selector").click(function(){
    $(this).children("h2").removeClass('unselected').addClass('selected');
}); 
```

这是一个简单的，但我无法得到它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:18:47.547

只要将 jQuery 添加到小提琴中，它就可以工作：http: [//jsfiddle.net/CjCM4/](http://jsfiddle.net/CjCM4/)

无需更改代码：

```
$("a").click(function(){
    $(this).children("h2").removeClass('unselected').addClass('selected');
}); 
```

​</p>

（见左侧菜单）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:24:45.153

我只是在 jsfiddle 上更新你的代码

```
/*​$('a.selector').on('click', function(){
   $(this).children("h2").removeClass('unselected').addClass('selected');
});​​​​​​​​​​​​​​​​*/

$('a.selector').on('click', function(){
   $(this).children("h2").toggleClass('selected');
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:23:33.343

你把你的小提琴设置为 Mootools 就像上面有人说的那样，把它切换到 jQuery 会让它工作。

工作示例：

```
http://jsfiddle.net/rbUjx/ 
```

# xml - 如何在样式表中发出 xsi:type 属性？

> ID：13037587
> 
> 赞同：1
> 
> 时间：2012-10-23T19:17:16.203
> 
> 标签：xml, xslt, xsitype

我有一个 XSLT 样式表，它需要发出一个看起来像这样的 XML 片段（为简洁起见，省略了“...”位）：

```
<MyOuterType xmlns:xsi="..." xsi:type="foo:MyInnerType" xmlns:foo="..."/> 
```

样式表如下所示：

```
<xsl:stylesheet xmlns:foo="..." xmlns:xsi="...">
  ...
  <xsl:template match="...">
    <xsl:element name="MyOuterType">
      <xsl:attribute name="xsi:type">foo:MyInnerType</xsl:attribute>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

XSLT 处理器的输出如下所示：

```
<MyOuterType xmlns:xsi="..." xsi:type="foo:MyInnerType"/> 
```

换句话说，它缺少`xmlns:foo`声明。事实上，尽管在样式表中声明了声明，但发出的 XML 中完全没有声明。当我需要反序列化发出的 XML 时，这会搞砸事情。

如何让我`xmlns:foo`出现在发出的 XML 中？处理器实现 XSLT 1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:45:01.490

这取决于您是否知道要静态生成的命名空间，或者它是否基于输入文档中的信息。

如果您静态地知道它，只需使用文字结果元素而不是 xsl:element：

```
<MyOuterType xsi:type="foo:MyInnerType" xmlns:foo="....."/> 
```

如果这是一个动态的决定，那就有点复杂了。XSLT 2.0 有一个 xsl:namespace 指令来生成名称空间，其方式与 xsl:attribute 生成属性的方式非常相似。在 XSLT 1.0 中，诀窍是创建一个包含所需命名空间的元素，然后使用 xsl:copy 复制命名空间节点：

```
<xsl:variable name="dummy">
  <xsl:element name="foo:dummy" namespace="{$param}"/>
</xsl:variable>
<MyOuterType xsi:type="foo:MyInnerType">
  <xsl:copy-of select="exsl:node-set($dummy)/*/namespace::foo"/>
</MyOuterType> 
```

不幸的是，有一两个不完全 XSLT-1.0 处理器没有正确实现命名空间节点，所以要小心。

# java - Java 计算器

> ID：13037589
> 
> 赞同：2
> 
> 时间：2012-10-23T19:17:26.653
> 
> 标签：java, swing, calculator

我需要有关此代码的帮助。结果将进入一个新窗口。我想要的是结果在我输入值的主窗口内。

下面的代码将有一个显示结果的弹出屏幕，而不是在零售价框中显示答案。我知道这可能是一个简单的问题或修复希望有人帮助我修复这段代码，因为我还在学习。

```
package com.retailcalcu;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Retailcalculator  extends JFrame{

  private   JPanel panel;                           // to reference a panel
  private   JLabel wholeSaleMessageLabel;       // to reference a label
  private   JLabel markupMessageLabel;          // to reference a label
  private   JLabel retailPriceLabel;            // to reference a label

  private   JTextField  wholeSalePriceField;    // to reference the Whole Sale Price Field
  private   JTextField  markUpPercentage;       // to reference the Mark Up text field
  private   JTextField  retailPrice;            // to reference the Retail Price Field
  private   JButton calculateButton;            // to reference button
  private   final   int WINDOW_WIDTH = 400;         // Window Width

  private   final int   WINDOW_HEIGHT = 150;            // Window Height

  public static void main(String[] args){
  new Retailcalculator();
  }

    public Retailcalculator(){

        // set window title
   setTitle("Retail Price Calculator");

        // set widow size

        setSize(WINDOW_WIDTH, WINDOW_HEIGHT);

        // tell what to do when the window closes

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      // build the panel and add it to the frame

        buildPanel();

        // add the panel to the frame's content pane

        add(panel);

        // display the window

        setVisible(true);

     }

    private void buildPanel()

    {

        // create a label for the wholesale price

        wholeSaleMessageLabel = new JLabel("Enter Wholesale Price: ");

        // create a text field 15 characters wide

        wholeSalePriceField = new JTextField(15);

        // create a label for the mark up percentage

        markupMessageLabel = new JLabel("Enter Mark Up Percentage: ");

        // create a text field 15 characters wide

        markUpPercentage = new JTextField(15);

        // create a button with the capation "Calculate Retail Price"

        calculateButton = new JButton("Calculate Retail Price");

        // add an action listener to the button

        calculateButton.addActionListener(new CalcButtonListener());

        // create a label for the retail price

        retailPriceLabel = new JLabel("The Retail Price is:  $");

        // create a text field 15 characters wide for the retail price

        retailPrice = new JTextField(15);

        // create a JPanel object and let the panel filed reference it

        panel = new JPanel();

        // add the labels, rext field and button compnenets to the panel

        panel.add(wholeSaleMessageLabel);
        panel.add(wholeSalePriceField);
        panel.add(markupMessageLabel);
        panel.add(markUpPercentage);
        panel.add(calculateButton);
        panel.add(retailPriceLabel);
        panel.add(retailPrice);

    /** calculateButton is an action listener class for the Calculate Button*/

    }

    class CalcButtonListener implements ActionListener{

        // This method executes when the user clicks on the Calculate Button

        public void actionPerformed(ActionEvent e)

        {

            String  wholesaleInput; // to hold user input for wholesale price
            String  markUpInput;        // to hold user input for mark up percentage
            double  retailPrice;        // declare retail price as a double
            double  wholePrice;         // declare wholesale prcie as a double
            double  markUp;             // declare markup percentage as a double

        // get the text entered by the user in the text field box

        wholesaleInput = wholeSalePriceField.getText();

        // convert wholesale text to double

        wholePrice = Double.parseDouble(wholesaleInput);

            // get the text entered by the user in the percentage text field

            markUpInput = markUpPercentage.getText();

            // parse out the markup percentage from the percentage text field
            markUp = Double.parseDouble(markUpInput);

            // do function to calculate retail price( wholesale * markup)

            retailPrice = ((wholePrice * markUp) * .01) + wholePrice;

            // display the results
            JOptionPane.showMessageDialog(null, retailPrice);

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:22:31.210

`retailPrice`内部类中的double 变量`CalcButtonListener`正在[遮蔽](http://en.wikipedia.org/wiki/Variable_shadowing)外部类中的`JTextField`同名变量。

因此，您必须使用：

```
Retailcalculator.this.retailPrice.setText(Double.toString(retailPrice)); 
```

通过将外部类中的命名重`JTextField`命名为您可以避免混淆，只需调用：`retailPrice``retailPriceTextField`

```
retailPriceTextField.setText(Double.toString(retailPrice)); 
```

# android - 正确做法：将 png 目录嵌入到 android 项目并引用其项目

> ID：13037593
> 
> 赞同：0
> 
> 时间：2012-10-23T19:17:35.703
> 
> 标签：android

我所做的是我添加了一个名为 Images 的目录，该目录中充满了 png 文件到 src\（所以所有的图像都在 src\Images 中，然后在这样的代码中引用它：

```
BitmapFactory.decodeFile("Images\\"+i+".png"); 
```

它没有用，如何正确完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:39:14.473

`res/drawable-*/`根据密度将图像添加到 的适当版本，然后在需要它们的地方（例如，在 上）引用它`R.drawable.basename`（对于名为 的图像）。`basename.png``setImageResource()``ImageView`

# c# - 遍历 JSOn 结果

> ID：13037596
> 
> 赞同：0
> 
> 时间：2012-10-23T19:17:48.197
> 
> 标签：c#, ajax, json

我有一个从 ajax 调用的 WebMethod，试图遍历返回的数据。返回的数据是“{ BusinessTypeID = 2 }”。我试图弄清楚如何获得价值2？

```
 //Function called from ajax
[System.Web.Services.WebMethod]
public static string[] GetTerminalBusinessTypes(string terminalID)
{
    DataClassesDataContext db = new DataClassesDataContext();
    List<string> results = new List<string>();

    try
    {

        var terminalBusinessTypes = (from bt in db.BusinessTypes
                                    join obt in db.OxygenateBlenderBusinessTypes on bt.BusinessTypeID equals obt.BusinessTypeID
                                    where obt.OxygenateBlenderID == Convert.ToInt32(terminalID)
                                    select new
                                    {
                                        bt.BusinessTypeID
                                    }).ToList();

        for (int i = 0; i < terminalBusinessTypes.Count(); i++)
        {
            results.Add(terminalBusinessTypes[i].ToString());
        }

    }
    catch (Exception ex)
    {

    }

    return results.ToArray();
} 
```

ajax函数：

```
 function PopulateTerminalBusinessTypes(terminalID) {

        $.ajax({
            type: "POST",
            url: "OxygenateBlenderCertificationApplication.aspx/GetTerminalBusinessTypes",
            data: "{'terminalID':" + terminalID + "}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                var targetValue = data.d;

                var items = $('#cblTerminalBusinessType input:checkbox');

                                    $.each(targetValue, function (key, targetValue) {
                                        alert(data[index].BusinessTypeID);
                                    });
                    }
        })//end ajax

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:34:31.283

当您的 Web 服务返回 json 值时，asp.net 将包装在一个对象中，其中键`d`是您的 json 字符串，值是您的 json 字符串。查看[此链接](http://encosia.com/never-worry-about-asp-net-ajaxs-d-again/)以获取更多信息。

您必须将值字符串解析为 json 对象。使用 jQuery（v1.4.1 或更高版本）：

```
jQuery.parseJSON(targetValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:08:13.530

您可能想尝试从 C# 返回 JSON 字符串：

```
public static **string** GetTerminalBusinessTypes(string terminalID)
...
var oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
string sJSON = oSerializer.Serialize(results);
return sJSON; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:32:39.477

老实说，我看不到您的“索引”是在哪里定义的。

不应该读取警报行

```
$each(targetVale, function(key, item) {
   // on second look, this wont work as you are converting toString()
   alert(targetValue[key].BusinessTypeId)
   // this should
   alert(item)
}); 
```

你也可以抛出一个调试器；警报上方的行并查看正在遍历的值。

# html - 如何使用链接自定义 CSS 设计的按钮（类）?

> ID：13037600
> 
> 赞同：1
> 
> 时间：2012-10-23T19:18:02.643
> 
> 标签：html, css, class, button, hyperlink

我目前在这个问题上不知所措。我正在制作的是一个所见即所得的编辑器（很像我现在使用的那个），问题是顶部的按钮。我已经为他们的布局制作了一个 CSS 类：

```
.test {
    background-color:#d0d0d0;
    color:#000000;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    padding:2px 7px;
    text-decoration: none;
}

.test:hover  {
    padding: 1px 6px;
    background-color:#789dfa;
    border: 1px solid #485ae0;
} 
```

布局工作正常，但我无法找到链接课程的正确方法。以此为例（忽略 JavaScript）：

```
<input type="submit" class="test" value="B" onClick="texta(text,'b','b')" onmouseup="text.focus();"> 
```

问题是任何按钮（`<button>`等`<type="submit>`）都会使原始设计变形，使其具有 3 维外观，并且通常使其看起来更像按钮。

我的问题是，我该如何解决这个问题？我尝试以几种不同的方式链接课程，但它不起作用。

图片：

![按钮结果](../Images/1a18a01e8cd3865487e51ba99328fe79.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:22:15.733

我通常会选择：

html:

```
<div class="test"><a data-js="texta(text,'b','b')" href="http://someOtherLikeActionIfTheresNoJs"></a></div> 
```

CSS：

```
.test {

    [ ... snipped your style ... ]

    position: relative;
}

.test a {
    display: block;
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:48:41.650

稍微调整了你的 CSS

```
.test{
    background-color:#d0d0d0;
    border: 1px solid #f5f5f5;  //<--add this
    color:#000000;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    padding:2px 7px;
    text-decoration: none; 
}
.test:hover  {
    padding: 1px 6px;
    background-color:#789dfa;
    border: 1px solid #485ae0;
}​ 
```

适用于输入或按钮元素这是一个带有结果的[FIDDLE](http://jsfiddle.net/jcurran/a9eNs/1/)。

# svg - inkscape 如何计算“平滑边缘”的控制点坐标？

> ID：13037606
> 
> 赞同：3
> 
> 时间：2012-10-23T19:18:29.957
> 
> 标签：svg, bezier, inkscape

我想知道如果路径上的节点变得“平滑”， Inkscape 使用什么算法（或公式）来计算*控制点。*

也就是说，如果我有一个包含五个节点的路径，其`d`属性为

```
M 115.85065,503.57451
  49.653441,399.52543 
  604.56143,683.48319 
  339.41126,615.97628 
  264.65997,729.11336 
```

我将节点更改为平滑，`d`属性更改为

```
M 115.85065,503.57451 
C                     115.85065,503.57451 24.747417,422.50451
  49.653441,399.52543 192.62243,267.61777 640.56491,558.55577
  604.56143,683.48319 580.13686,768.23328 421.64047,584.07809
  339.41126,615.97628 297.27039,632.32348 264.65997,729.11336
  264.65997,729.11336 
```

显然，Inkscape 计算控制点坐标（在 或之后的行上的倒数第二和最后一个坐标对`C`）。我对 Inkscape 使用的算法很感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T22:10:35.757

我在 Inkscape 的源代码树中找到了相应的代码 `src/ui/tool/node.cpp`，方法`Node::_updateAutoHandles`如下：

```
void Node::_updateAutoHandles()
{

    // Recompute the position of automatic handles.
    // For endnodes, retract both handles. (It's only possible to create an end auto node
    // through the XML editor.)
    if (isEndNode()) {
        _front.retract();
        _back.retract();
        return;
    }

    // Auto nodes automaticaly adjust their handles to give an appearance of smoothness,
    // no matter what their surroundings are.
    Geom::Point vec_next = _next()->position() - position();
    Geom::Point vec_prev = _prev()->position() - position();
    double len_next = vec_next.length(), len_prev = vec_prev.length();
    if (len_next > 0 && len_prev > 0) {
        // "dir" is an unit vector perpendicular to the bisector of the angle created
        // by the previous node, this auto node and the next node.
        Geom::Point dir = Geom::unit_vector((len_prev / len_next) * vec_next - vec_prev);
        // Handle lengths are equal to 1/3 of the distance from the adjacent node.
        _back.setRelativePos(-dir * (len_prev / 3));
        _front.setRelativePos(dir * (len_next / 3));
    } else {
        // If any of the adjacent nodes coincides, retract both handles.
        _front.retract();
        _back.retract();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:12:26.510

我不能 100% 确定这些信息的质量。但至少在*某个*时间点计算*某些*曲线，inkscape 似乎使用了 >>spiro<<。

[http://www.levien.com/spiro/](http://www.levien.com/spiro/)

快速浏览一下这个页面，他提供了一个指向他的博士论文的链接：http: [//www.levien.com/phd/thesis.pdf](http://www.levien.com/phd/thesis.pdf) ，他在其中介绍了理论/算法......

干杯

## 编辑：

我目前正在出于类似目的对此事进行一些调查，所以我偶然发现了... [http://www.w3.org/TR/SVG11/paths.html#PathDataCurveCommands](http://www.w3.org/TR/SVG11/paths.html#PathDataCurveCommands) ... SVG 曲线的规范. 所以曲线，不像圆或弧，是三次或二次贝塞尔曲线......看看维基百科的贝塞尔公式： [http ://en.wikipedia.org/wiki/B-spline#Uniform_quadratic_B-spline](http://en.wikipedia.org/wiki/B-spline#Uniform_quadratic_B-spline)

# javascript - 可以使用非对称加密来保护通过 HTTPS 传输的信用卡信息吗？

> ID：13037610
> 
> 赞同：2
> 
> 时间：2012-10-23T19:18:44.873
> 
> 标签：javascript, security, encryption, https

我不是安全专家。我正在考虑如何在软件系统中实现信用卡存储，其中信用卡交易通过网络接受，但由内部用户手动执行。我们将使用 HTTPS（我相信）这将消除中间人攻击的风险。现在，我想弄清楚我是否可以做到，以便从客户端接收到的数据可以在到达我们的服务器之前进行加密。

这个想法是他们的浏览器将使用非对称密钥对的公共部分加密数据。内部用户将知道私密部分。然后，当需要手动处理费用时，该用户将转到我们提供的 HTTPS 页面。他们将手动输入私钥（不会传输到我们的服务器），加密的信用卡信息将从我们的系统中检索并由浏览器解密。

通过这种方式，我希望我可以阻止我们的任何服务器看到未加密的信用卡信息。我错过了一些众所周知的安全漏洞吗？我读过[这](http://www.matasano.com/articles/javascript-cryptography/)似乎解决了另一种安全漏洞。我还阅读了其他一些 SO 问题，但似乎没有一个能清楚地映射到这个特定的设计。

编辑#1：@Pointy 询问为什么不使用行业标准。主要在线零售商使用的解决方案远比我的问题所保证的复杂和昂贵。主要零售商会自动处理他们的交易，因此通常会努力实现 PCI-DSS 合规性。这不是我要解决的问题。我正在开发自动工具以安全地协助手动交易处理。

编辑#2：@Jason Dean 指出我没有很好地描述管理私钥的计划。这个想法实际上是让我们的员工将其保存在办公桌上的一张纸上。我们主要关心的是远程安全违规。我们的物理站点足够安全，我们不担心有人闯入。我们的想法是让私钥远离任何地方任何机器上的任何持久存储，这样就没有纯粹的电子攻击可能同时获取数据和私钥钥匙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:58:17.693

> 他们将手动输入私钥（不会传输到我们的服务器），加密的信用卡信息将从我们的系统中检索并由浏览器解密。

保持安全并输入（或复制/粘贴）私钥比简单地输入信用卡号更难。我认为这是您计划中一个相当明显的错误。请注意，安全协议很难，并且由于您“不是安全专家”，因此我强烈建议您不要尝试想出一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:06:33.130

有趣的是，您非常关心服务器看到的未加密数据，但是您愿意将所有重要的解密密钥提供给您决定键入（或更具体地复制和粘贴）非对称的任何 8 美元/小时的猴子一整天的钥匙。

您打算将这些密钥存储在哪里，以便您的猴子可以找到它们进行复制/粘贴？为此，它们需要采用明文形式。

毫无疑问，密钥管理是密码学中最难做的事情，您正在谈论通过向不应该需要它的用户提供密钥以及不安全地存储它来违反最佳实践协议。

SSL 已经负责在数据离开客户端之前对其进行加密，然后，当它到达服务器时，您需要在存储之前再次对其进行加密。如果你真的想的话，你可以使用非对称加密。我不会担心在客户端尝试这样做。

我认为你让事情变得比他们需要的更难，而且对你的努力没有任何好处。

# php - jqGrid errorTextFormat 函数

> ID：13037612
> 
> 赞同：1
> 
> 时间：2012-10-23T19:18:50.177
> 
> 标签：php, jquery, codeigniter, jquery-plugins

我正在使用 CodeIgniter 和 JQuery 开发应用程序。我在这里阅读了[关于删除的 jqgrid 错误消息](https://stackoverflow.com/questions/8089061/jqgrid-error-message-on-delete)和这里[来自服务器端异常的 jqGrid 错误消息](https://stackoverflow.com/questions/7816119/jqgrid-error-message-from-server-side-exception)关于这个问题的一些问题，但事实是这对我不起作用。

在我的数据库中，我以索引、检查等形式设置了一些业务规则。当我遇到这些类型的错误时，我需要自定义 jqGrid 返回的“错误状态：'error'。错误代码：500”。我会很感激任何帮助。这是我的 jquery 网格代码。

```
<script type="text/javascript">
    var base_url = 'http://localhost/sp/';
    var site_url = 'http://localhost/sp/index.php';
    var url = '';

        $(document).ready(function() {

           var grid = jQuery("#newapi_1351019084").jqGrid({
                    ajaxGridOptions : {type:"POST"},
                       jsonReader : {
                       root:"data",
                       repeatitems: false
                   },
                   ondblClickRow: function(id){
                       dtgLoadButton1();

                        return;
                       },
                    rowList:[10,20,30],
                    viewrecords: true
                   ,url:'http://localhost/sp/index.php/assigment/getData'
,editurl:'http://localhost/sp/index.php/assigment/setData'
,datatype:'json'
,rowNum:'13'
,width:'800'
,height:'300'
,pager: '#pnewapi_1351019084'
,caption:'Control de asignaciones'
,colModel:[
{name:'username',index:'username',label:'Usuario' ,align:'left',width:300,editable:false,edittype:'text',editrules:{required:true}  }
,{name:'StoreName',index:'StoreName',label:'Tienda' ,align:'center',width:200,editable:false,edittype:'text',editrules:{required:true}  }
,{name:'Users_idUsers',index:'Users_idUsers',label:'Usuario' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:":Select;5:tienda1;6:tienda2;17:tienda3;18:tienda11",size:10},editrules:{edithidden:true,required:true,integer:true}  }
,{name:'Stores_idStores',index:'Stores_idStores',label:'Tienda' ,align:'center',width:100,hidden:true,editable:true,edittype:'select',editoptions:{value:":Select;1:EA001;3:EA003;4:EA005;5:EA006;6:EA007;7:EA008;8:EA009;9:EA010;10:EA011;11:EA012;12:EA013;13:EA015;14:EA017;15:EA018;16:EA019;17:EA020;18:EA021;19:EA022;20:EA002;21:EA000",size:10},editrules:{edithidden:true,required:true,integer:true}  }
,{name:'SurrugateTurn',index:'SurrugateTurn',label:'SurrugateTurn' ,align:'center',width:100,key:true,hidden:true,editable:true,edittype:'select',editoptions:{value:":Select;1:1;3:3;2:2",size:10},editrules:{hidden:true}  }
]               })
              jQuery("#newapi_1351019084")
            .jqGrid('navGrid',
            '#pnewapi_1351019084',
            {view:false,
            edit:'1',
            add:'1',
            del:'1',
            close:true,
            delfunc: null ,
            search:''
        },
        { recreateForm: true, 
        width : 400 ,
        beforeShowForm : function(form) {

         },
        closeAfterEdit:true }, // edit options

        {  recreateForm: true,
        width : 400,
        closeAfterAdd : true,
         beforeSubmit : function(postdata, formid) {
         var mensaje = '';
         var resultado = true;

          return[resultado,mensaje]; 
        }
        }, /*add options*/

        {mtype: 'POST'} /*delete options*/,
        {sopt: ['eq','cn','ge','le' ] ,     
        multipleSearch: false ,
        showOnLoad : false,
        overlay:false,mtype: 'POST'} /*search options*/
        ).navButtonAdd('#pnewapi_1351019084',
                { caption:'', buttonicon:'ui-icon-extlink', onClickButton:dtgOpenExportdata, position: 'last', title:'Export data', cursor: 'pointer'}
                );
;
        });
</script> 
```

最好的问候和感谢您的时间，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:56:42.233

假设服务器返回带有 HTTP 500 响应的用户友好错误消息，您可以简单地这样做：

```
...
{ recreateForm: true, 
    width : 400 ,  //removed the empty beforeShowForm callback
    errorTextFormat:function(data){
      if (data.status == 500) 
        return data.responseText;  // You may need to do some HTML parsing here
    }
    closeAfterEdit:true }, // edit options
... 
```

# design-patterns - 命名标准/约定以及“服务”类应该做什么

> ID：13037615
> 
> 赞同：1
> 
> 时间：2012-10-23T19:18:59.350
> 
> 标签：design-patterns, naming-conventions

你会为一个只执行很小一部分功能的类命名，例如，采用定期付款配置文件并将其标记为“失败”。

命名是否正确`RecurringPaymentProfileMarkAsFailedService`？我知道这只是一个名字，但我想遵守标准/约定。这是“服务”类应该做的，还是不同的设计模式？我正在尝试遵循 SRP 原则，因此，如果我是正确的，那么最终会有很多小班，每个班专门从事一项任务。我想定义一个正确的命名标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:10:59.200

好吧，就其价值而言，从您的描述中听起来您正在使用命令设计模式。

通常当我发现类名太长时，我会使用包或路径层次结构。在这种情况下，它可能类似于：

包：commands.recurringPaymentProfile

类：MarkAsFailed

所以：我使用“命令”而不是“服务”，然后将适用于 recurringPaymentProfile 的那些分组到一个包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:25:00.743

我相信我理解 SRP 的“精神”，但我个人认为它过分地得出结论，因此您必须为可能应该只是 RecurringPaymentProfileService 上的一个方法 (MarkAsFailed) 创建一个单独的类（假设您描述了这个逻辑作为“功能的一小部分”）。

我认为，当你最终为这样长而笨拙的名字而苦苦挣扎时，这通常表明你在代码结构方面的竞争原则之间没有完全达成正确的平衡。

我的指导原则是，服务应尝试遵守 SRP，因为它与处理（返回/作用于）特定业务实体或流程（例如 PaymentProfiles）尽可能完全相关。但我的倾向是，在尝试将服务的内部拆分到第 n 级时，您可能最终会违反一大堆其他原则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T23:15:11.417

虽然我从未见过它严格记录在案，但我通常使用“服务”一词来表示处理某些相关最终用户功能子集的类。

例如，假设我有一个银行账户系统，我可能有以下服务：

```
public class AccountService
{
  public boolean transfer(Account src, Account dest, double amt) // ....

  public Account create(User user, double initAmt) // ...

  public void close(Account account) // ...
} 
```

所以用户可以做的“高级”功能都封装在我的Services中。服务将访问数据库，实例化任何助手，进行计算等它需要的。但就像我说的，这正是我在这个行业中观察到的。

至于 SRP：SRP 并不意味着您需要为每个要执行的功能使用一个全新的类。您不需要一个类将配置文件标记为失败，另一个将其标记为成功，另一个更改配置文件的名称和...

SRP 意味着每个类处理“一件事”，但“一件事”可以是一组密切相关的功能。另一个需要考虑的重要 OO 设计原则是封装。也就是说，一个类应该尽量减少它暴露给客户的东西——只暴露其他人需要的东西。如果您有大量的小类来管理 PaymentProfile 的内部状态，那么您将暴露 PaymentProfile 的所有细节。我给你举个小例子：

假设您的 PaymentProfile 对象有一个布尔值 isSuccess。然后你的类 RecurringPaymentProfileMarkAsFailedService 做这样的事情：

```
 public class RecurringPaymentProfileMarkAsFailedService {
   public void mark(PaymentProfile profile)
   {
     profile.setSuccess(false);
   }
 } 
```

酷 - 一切都很好。现在我们收到一个功能请求，不仅 PaymentProfile 可以具有“成功”和“失败”状态，而且现在我们需要支持“内部错误”，这意味着某些内部系统在更新期间崩溃了。我们不能再使用布尔值，因此我们将布尔值 isSuccess 更改为可以是以下之一的枚举：SUCCESS、FAILURE、ERROR。现在我们必须重构我们的 MarkAsFailedService。

这是一个微不足道的重构 b/c 它只是一个类，但对于复杂的类树，这些重构可以在整个系统中回显。这表明我透露了太多关于我的 PaymentProfile 的实现细节。一个类应该被封装，因此对其实现的更改对其客户端几乎没有影响。

# ms-access - 在 Access vba 中创建表并使用查询结果填充

> ID：13037616
> 
> 赞同：2
> 
> 时间：2012-10-23T19:19:03.080
> 
> 标签：ms-access, vba

我正在开发一个 access 2010 数据库，需要一些帮助。

我正在尝试创建一些 vba 代码来运行查询，然后根据返回的记录创建和填充表。然后，我想根据查询中的值（公司名称）重命名表。

我构建的查询将从我的表中返回不同的值，但我需要为结果中返回的每个公司创建一个单独的表。

任何和所有的建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:41:12.390

您确定为每家公司创建不同的表是个好主意吗？我不建议这样做！

好的，假设您有一个名为 QUERY 的查询，其中包含字段 CompanyName 并包含所有记录。你可以从这样的事情开始：

```
Sub Export_Query()
  Dim rs As Recordset

  Set rs = CurrentDb.OpenRecordset("select distinct CompanyName from QUERY")
  While Not rs.EOF
    On Error Resume Next
    CurrentDb.Execute "DROP TABLE [" & rs("CompanyName") & "]"
    CurrentDb.Execute "SELECT QUERY.* INTO [" & rs("CompanyName") & "] FROM QUERY WHERE CompanyName=""" & rs("CompanyName") & """;"
    On Error GoTo 0
    rs.MoveNext
  Wend

  rs.Close
  Set rs = Nothing
End Sub 
```

这只是一个想法......您应该添加更多错误检查代码，并且您还应该转义公司名称或确保它不包含任何特殊字符。

# sql - PL SQL IF-THEN-ELSE 块

> ID：13037622
> 
> 赞同：0
> 
> 时间：2012-10-23T19:19:39.930
> 
> 标签：sql, oracle, plsql

我有这段代码嵌入到我的 sql 中。出于某种原因，我看到每次我的最后一个 ELSE 块被执行。这是我的代码：

```
 IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_1),
        'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
          UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
              V_DEPT_N    := V_TEMP_DEPT_1;
              V_ADDR_LINE1:= NULL;
      ELSE

      IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_2),
      'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
        UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
            V_DEPT_N    := V_TEMP_DEPT_2;
            V_ADDR_LINE2:= NULL;
                    ELSE

      IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_3),
          'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
            UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
              V_DEPT_N    := V_TEMP_DEPT_3;
              V_ADDR_LINE3:= NULL;
      ELSE

      IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_4),
          'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
            UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
              V_DEPT_N    := V_TEMP_DEPT_4;
              V_ADDR_LINE4:= NULL;
      ELSE
              -- The below line always gets executed.
              V_DEPT_N:= NULL;

      END IF;
        END IF;
          END IF;
            END IF; 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:11:22.203

```
IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_1),
    'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
      UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
          V_DEPT_N    := V_TEMP_DEPT_1;
          V_ADDR_LINE1:= NULL;

  ELSIF REGEXP_LIKE (UPPER(V_TEMP_DEPT_2),
  'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
    UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
        V_DEPT_N    := V_TEMP_DEPT_2;
        V_ADDR_LINE2:= NULL;

  ELSIF REGEXP_LIKE (UPPER(V_TEMP_DEPT_3),
      'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
        UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
          V_DEPT_N    := V_TEMP_DEPT_3;
          V_ADDR_LINE3:= NULL;

  ELSIF REGEXP_LIKE (UPPER(V_TEMP_DEPT_4),
      'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|
        UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN
          V_DEPT_N    := V_TEMP_DEPT_4;
          V_ADDR_LINE4:= NULL;
  ELSE
          -- Now this works!!
          V_DEPT_N:= NULL;

  END IF; 
```

# tcl - 使用期望 SSH 到服务器并执行命令

> ID：13037623
> 
> 赞同：3
> 
> 时间：2012-10-23T19:19:53.533
> 
> 标签：tcl, expect

我想编写一个通用的期望脚本来通过 SSH 登录到系统并执行一些命令。我发现的一个例子如下：

```
#!/usr/bin/expect

set fid [open ./.secret]
set password [read $fid]
close $fid
spawn /usr/bin/ssh root@[lindex $argv 0]
expect {
  -re ".*Are.*.*yes.*no.*" {
    send "yes\n"
    exp_continue
    #look for the password prompt
  }

  "*?assword:*" {
    send $password
    send "\n"
  }
}

send -- "PS1='>'\r"
expect -re ">$" { send "hostname\r" }
expect -re ">$" { send "pwd\r" } 
```

...脚本似乎正确登录，但没有执行最后 2 次发送。想法？

编辑：启用 exp_internal 后，我注意到以下内容：

```
expect: does "" (spawn_id exp4) match glob pattern "*"? yes
expect: set expect_out(0,string) ""
expect: set expect_out(spawn_id) "exp4"
expect: set expect_out(buffer) ""
send: sending "PS1='>'\r" to { exp4 }
Gate keeper glob pattern for '>$' is '>'. Activating booster.

expect: does "" (spawn_id exp4) match regular expression ">$"? Gate ">"? gate=no

expect: does "\r\n" (spawn_id exp4) match regular expression ">$"? Gate ">"? gate=no
Last login: Tue Nov  6 14:13:31 2012 from 1.x.x.x

expect: does "\r\nLast login: Tue Nov  6 14:13:31 2012 from 1.x.x.x\r\r\n" (spawn_id exp4) match regular expression ">$"? Gate ">"? gate=no 
```

我正在尝试发送`PS1='>'\r`，因为我想覆盖提示。我认为我无法预测提示将是什么，因此，我不知道会出现什么模式。从上面看，提示似乎没有改变。你如何解决这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:57:34.827

您的脚本似乎没有任何*明显*错误（尽管使用不同的提示可能会使匹配更容易一些）。这意味着它是微妙的。我建议添加这个：

```
exp_debug 1 
```

到脚本的早期某个地方。它会让 Expect 引擎打印出*更多*关于它正在做什么的信息，这将（可能）帮助你了解哪里出了问题，或者帮助这里的人帮助你……</p>

# javascript - 在网格中显示之前更改数据

> ID：13037626
> 
> 赞同：0
> 
> 时间：2012-10-23T19:20:03.407
> 
> 标签：javascript, jqgrid, encode

我有一个由 JSON 请求填充的 jqGrid，问题是请求以 base64 编码数据返回服务器，我需要在将数据分配给网格之前对其进行解码。

基本上我需要这样的东西：

```
$( "#grid" ).jqGrid( {
    datatype: "json",
    colNames: ["id", "Num", "Name", "Code"],
    colModel: [
        { name: "id", index: "id", width: 30, sortable: true, resizable: false },
        { name: "num", index: "num", width: 150, sortable: true, resizable: false },
        { name: "name", index: "name", width: 250, sortable: true, resizable: false },
        { name: "code", index: "code", width: 150, sortable: true, resizable: false },
    ],
    multiselect: true,
    width: "760",
    height: "100%",
    heightMetric: "%",
    shrinkToFit: false,
    rowNum: 20,
    rowList: [20,30,60],
    pager: "#pager",
    sortname: "id",
    viewrecords: true,
    sortorder: "asc",
    headertitles : true,
    caption: "Loading...",
    beforeProcessing: function(data){
       data = decompress(data); // Like this
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:16:51.887

回调函数`beforeProcessing`是您可以实现所有需要的正确位置。确切的实现取决于服务器返回的数据格式。如果使用`datatype: "json"`，则从服务器返回的数据通常是一个序列化为 JSON 字符串的对象。jqGrid 在内部使用`jQuery.ajax`它自动解码 JSON 字符串并将其转换回对象。所以callback的入`data`参就是服务端返回的对象。`beforeProcessing`如果您不使用 jqGrid 的任何附加`jsonReader`选项，则 jqGrid 等待[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)描述的标准格式的输入数据。所以你只需要填写对象的预期属性`data`（`rows`、、`page`和`total``records`) 基于从服务器返回的输入数据。您没有发布任何从服务器返回的数据的示例，因此我无法为您提供更详细的示例。

# lua - 使用 Lua 在 Corona SDK 上的 Flipboard 效果

> ID：13037627
> 
> 赞同：0
> 
> 时间：2012-10-23T19:20:07.493
> 
> 标签：lua, coronasdk, flipboard

.

大家好你们好，

这不是一个问题，只是在有人对此感兴趣时显示代码。

我使用了 Corona Share Your Code 站点中介绍的 FLIPBOOK 项目，并对其进行了一些更改。（[http://developer.coronalabs.com/code/flipbook-module-realistic-page-curling-effect](http://developer.coronalabs.com/code/flipbook-module-realistic-page-curling-effect)）。

**main.lua 文件：**

```
-----------------------------------------------------------------------------------------
--
-- main.lua
--
-----------------------------------------------------------------------------------------

local Flipbook = require 'flipbook'

local nrPages = 6

local myFirstFlipbook = Flipbook:newFlipbook(nrPages, "mainshadow2.png" )

for x=1,nrPages do

    local grp1 = display.newGroup()
    --grp1:setReferencePoint( display.TopLeftReferencePoint )
    local rct1 = display.newRect( 0, 0, display.contentWidth, display.contentHeight )
    --grp1.isVisible = false
    local txt1 = display.newText("Meu texto "..x.." ...", 2, display.contentHeight - 20, native.systemFont, 16)
    txt1:setTextColor(0, 0, 0)
    local img1 = display.newImageRect( "background"..x..".png",display.contentWidth/5*4,display.contentHeight/5*4 )
    img1.x = display.contentWidth/2
    img1.y = display.contentHeight/2
    grp1:insert(rct1)
    grp1:insert(img1)
    grp1:insert(txt1)

    local grp2 = display.newGroup()
    --grp4:setReferencePoint( display.TopLeftReferencePoint )
    local rct2 = display.newRect( 0, 0, display.contentWidth, display.contentHeight )
    --grp1.isVisible = false
    local txt2 = display.newText("Meu texto "..x.." ...", 2, display.contentHeight - 20, native.systemFont, 16)
    txt2:setTextColor(0, 0, 0)
    local img2 = display.newImageRect( "background"..x..".png",display.contentWidth/5*4,display.contentHeight/5*4 )
    img2.x = display.contentWidth/2
    img2.y = display.contentHeight/2
    grp2:insert(rct2)
    grp2:insert(img2)
    grp2:insert(txt2)

    myFirstFlipbook:addPage( grp1 )
    myFirstFlipbook:addMirror( nrPages, grp2 )

end 
```

**和flipbook.lua 文件：**

```
-----------------------------------------------------------------------------------------
--
-- flipbook.lua
--
-----------------------------------------------------------------------------------------

local Flipbook = {
    mask = graphics.newMask( "mask1.png" ),
    mask2 = graphics.newMask( "mask2.png" ),
    currentPage = 1,
    pages = {},
    backPages = {},
    displayGroup = display.newGroup(),
    control = 2
}
Flipbook.__index = Flipbook

function Flipbook:newFlipbook(nrPages, newBackShadow, newBasicShadow, newCurlShadow) --Create a new flipbook
    local tempFlipbook = setmetatable({},self)

    -- Adds a shadow for where the curled page overlaps itself
    tempFlipbook.backShadow = display.newImage( newBackShadow )
    tempFlipbook.backShadow.isHitTestMasked = false
    tempFlipbook.backShadow.y = display.contentHeight / 2
    tempFlipbook.backShadow.isVisible = false
    tempFlipbook.displayGroup:insert( nrPages + 1, tempFlipbook.backShadow )
    -- Adds event listener
    tempFlipbook.displayGroup:addEventListener( "touch", tempFlipbook )
    ----
    return tempFlipbook
end

function Flipbook:addPage( newPageGroup ) -- Add a new page to your flipbook

    local tempPageImage = newPageGroup
    tempPageImage:setMask( self.mask )
    tempPageImage.maskX = display.contentWidth
    tempPageImage.isHitTestMasked = false
    tempPageImage:setReferencePoint( display.CenterReferencePoint )
    table.insert( self.pages, tempPageImage ) -- Adds new page to pages index
    self.displayGroup:insert( 1, tempPageImage ) -- Adds new page to display group

end

function Flipbook:addMirror( nrPages, newPageGroup )

    local tempPageImageMirror = newPageGroup
    tempPageImageMirror.isVisible = false
    tempPageImageMirror:setMask( self.mask2 )
    tempPageImageMirror:setReferencePoint( display.CenterReferencePoint )
    table.insert( self.backPages, tempPageImageMirror ) -- Adds new page to pages index
    self.displayGroup:insert( nrPages + 1, tempPageImageMirror )

end

function Flipbook:updateCurlEffect( handleX, handleY, originY ) -- Updates the curl effect assets

    local hX = 0
    if (handleX > display.contentWidth) then
        hX = display.contentWidth
    elseif (handleX < 0) then
        hX = 0
    else
        hX = handleX
    end

    local controlX = 0
    if (hX > display.contentWidth / 2) then
        controlX = (( hX - display.contentWidth / 2) / (display.contentWidth / 2))
    else
        controlX = (( display.contentWidth / 2 - hX ) / (display.contentWidth / 2))
    end
    if controlX < 0.0001 then
        controlX = 0.0001
    end
    if controlX > 0.9999 then
        controlX = 0.9999
    end
    --print(alphaX)

    self.pages[self.currentPage].maskX = hX

    if (hX > display.contentWidth / 2) then
        self.backPages[self.currentPage+1].isVisible = false
        self.backPages[self.currentPage]:setMask(self.mask2)
        self.backPages[self.currentPage].isVisible = true
        self.backPages[self.currentPage].xReference = 0
        self.backPages[self.currentPage].x = (display.contentWidth - hX)
        self.backPages[self.currentPage].maskX = display.contentWidth / 2
        self.backPages[self.currentPage].xScale = controlX

        if (self.control > 1) then
            self.backShadow:scale(-1,1)
            self.control = 1
            --self.backShadow.xReference = display.contentWidth / 2
            self.backShadow.x = display.contentWidth + 21
            self.backShadow.maskX = 0
        end
    else
        self.backPages[self.currentPage].isVisible = false
        self.backPages[self.currentPage+1].isVisible = true
        self.backPages[self.currentPage+1]:setMask(self.mask)
        self.backPages[self.currentPage+1]:toFront()
        self.backPages[self.currentPage+1].xReference = 0
        self.backPages[self.currentPage+1].x = hX
        self.backPages[self.currentPage+1].maskX = display.contentWidth / 2
        self.backPages[self.currentPage+1].xScale = controlX

        if (self.control < 2) then
            self.backShadow:scale(-1,1)
            self.control = 2
            --self.backShadow.xReference = display.contentWidth / 2
            self.backShadow.x = -21
            self.backShadow.maskX = 0
        end
    end
    self.backShadow.alpha = controlX
    --self.backShadow.sizeX = display.contentWidth

end

function Flipbook:setAssetsVisible( isVisibleBoolean ) -- Curl effect assets visibility switch box
    if isVisibleBoolean then
        self.backPages[self.currentPage].isVisible = isVisibleBoolean
        self.backShadow.isVisible = isVisibleBoolean
        self.backShadow:toFront()
        self.backPages[self.currentPage]:toFront()
    else
        --for k,v in pairs(self.backPages) do
        for k=1, #self.backPages do
            self.backPages[k].isVisible = isVisibleBoolean
        end
        self.backShadow.isVisible = isVisibleBoolean
    end
end

function Flipbook:touch( event )
    if event.phase == "began" then
        if  event.xStart > 5 * display.contentWidth / 6 and self.currentPage < # self.pages 
            or event.xStart < display.contentWidth / 6 and self.currentPage > 1 then
            if event.xStart < display.contentWidth / 6 then
                self.currentPage = self.currentPage - 1
                self.pages[self.currentPage].isVisible = true
            end
            display.getCurrentStage():setFocus( self.displayGroup )
            self.isFocus = true
            self:setAssetsVisible( true )
        else
            return false
        end
    end
    if self.isFocus then
        self:updateCurlEffect( event.x, event.y, event.yStart )
        if event.phase == "ended" or event.phase == "cancelled" then
            self:updateCurlEffect( display.contentWidth, 0, 0 )
            if math.abs(event.x - event.xStart) > display.contentWidth / 6 then
                if event.xStart > 5 * display.contentWidth / 6 and self.currentPage < # self.pages then
                    self.pages[self.currentPage].isVisible = false
                    self.currentPage = self.currentPage + 1
                end
                self:setAssetsVisible( false )
                display.getCurrentStage():setFocus( nil )
                self.isFocus = nil
            else
                if event.xStart < display.contentWidth / 6 and self.currentPage > 1 then
                    self.pages[self.currentPage].isVisible = false
                    self.currentPage = self.currentPage + 1
                end
                self:setAssetsVisible( false )
                display.getCurrentStage():setFocus( nil )
                self.isFocus = nil
            end
        end
        return true
    end
end

return Flipbook 
```

对于文件 backgroundX.png，我使用了 FLIPBOOK 项目中的文件。

对于 mainshadow2.jpg，我使用了一个 75% alpha 的黑色孔图像，基于 FLIPBOOK 项目的 mainshadow.jpg 大小。

希望能帮助到你。

此致。

亚历山大·弗洛雷斯·德·阿尔梅达

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-23T19:20:07.493

已经回答了。这不是问题，而是社区的代码。

# javascript - AJAX 控件工具包控件编辑器 Javascript 访问

> ID：13037633
> 
> 赞同：0
> 
> 时间：2012-10-23T19:20:19.847
> 
> 标签：javascript, jquery, asp.net

在我的 aspx 中，我有以下代码片段，它正确地呈现了 AjaxToolkit 中的编辑器控件

```
<div>
    <ajaxToolkit:Editor ID="Editor" runat = "server" />
</div> 
```

在 C# 中，访问编辑器的内容很简单：

```
Editor.Content = "some text here" 
```

但是在 JavaScript 中，我不确定如何访问它。到目前为止，我已经尝试过：

```
var st =$find('<%=Editor.ClientID%>').get_content(); 
```

但是 $find 语句返回一个空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:09:03.233

它应该工作。我尝试了以下代码，成功找到了编辑器组件。

```
<asp:ScriptManager runat="server" ID="ScriptManager" EnablePartialRendering="true">
    <Scripts>
        <asp:ScriptReference Path="Scripts/jquery-1.4.1.js" />
    </Scripts>
</asp:ScriptManager>

<div>
    <ajax:Editor runat="server" ID="Editor"></ajax:Editor>
</div>

<script type="text/javascript">
    Sys.Application.add_load(function() {
        Sys.Debug.traceDump($find('<%= Editor.ClientID %>'), "editor");
    });

</script> 
```

因此，尝试在 Sys.Application.add_load 事件处理程序中访问您的编辑器。如果这对您有帮助，那么问题的原因是您尝试在页面完成组件初始化之前找到组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:27:01.797

在玩弄了这个功能之后，我注意到 HTML 看起来像这样：

```
<iframe id = "Some iFrameId">
    #document
    <html>
        <head>...</head>
        <body>The text of the editor</body>
    </html>
 </iframe> 
```

在 ASPX 中，我做了以下事情来让我的生活更轻松一点：

```
<div id ="myDiv" ClientIDMode="Static">
    <ajaxToolkit:Editor ID="Editor" runat = "server" />
</div> 
```

通过这样做，我将问题简化为找到包含在 myDiv 中的 iFrame，其中包含编辑器的 HTML。

在 JS 中做到这一点

```
//get the iFrame
var myIframe = $("#myDiv, iframe") //this returns an array and myIframe[1] is the iFrame, which contains the text.
//get the HTML from the iFrame
var content = myIFrame[1].contentWindow.document.body.innerHTML; 
```

现在内容包含我正在寻找的内容。这有点长，可能有更简单的方法，但在寻找解决方案后，我发现其中大部分是：

做一个 .get_content 或一些函数调用，这对我的情况不起作用。

# java - Java Calendar 不一致的结果

> ID：13037636
> 
> 赞同：5
> 
> 时间：2012-10-23T19:20:28.023
> 
> 标签：java, date, calendar

我已经搜索过这个问题的答案，但似乎找不到。有人能解释一下为什么下面的代码没有给我每个月的 1，而是跳到 31 几个月吗？它用于需要确定下个月日期的报告事件。

```
DateFormat formatter = new SimpleDateFormat("dd-MMM-yy"); 
Calendar cal = Calendar.getInstance( TimeZone
    .getTimeZone( "America/Los_Angeles" ) );
DateFormat formatter = new SimpleDateFormat("dd-MMM-yy"); 
Date date;
try
{
  date = (Date)formatter.parse("01-JUN-12");
  cal.setTime(date);
  //cal.set(2012, 05, 01);

  long now = new Date().getTime();
  int frequency = 1;

  System.out.println("Current calendar time=" + cal.getTime().toString()) ;

  while (cal.getTime().getTime() < now)
  {
      cal.add( Calendar.MONTH, frequency );
      System.out.println("In loop - current calendar time=" + cal.getTime().toString()) ;
  }
}
catch (ParseException e)
{
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

输出是：

```
Current calendar time=Fri Jun 01 00:00:00 EDT 2012

In loop - current calendar time=Sun Jul 01 00:00:00 EDT 2012

In loop - current calendar time=Tue Jul 31 00:00:00 EDT 2012

In loop - current calendar time=Fri Aug 31 00:00:00 EDT 2012

In loop - current calendar time=Mon Oct 01 00:00:00 EDT 2012

In loop - current calendar time=Wed Oct 31 00:00:00 EDT 2012 
```

注意它是如何跳到 31，然后又回到 1。如果我使用 Calendar.set() 代替，输出是正确的：

```
Current calendar time=Fri Jun 01 15:14:26 EDT 2012

In loop - current calendar time=Sun Jul 01 15:14:26 EDT 2012

In loop - current calendar time=Wed Aug 01 15:14:26 EDT 2012

In loop - current calendar time=Sat Sep 01 15:14:26 EDT 2012

In loop - current calendar time=Mon Oct 01 15:14:26 EDT 2012

In loop - current calendar time=Thu Nov 01 15:14:26 EDT 2012 
```

这似乎是 1) 日历 API 的错误，或者 2) 缺乏对日历 API 工作原理的理解。在任何一种情况下，我只想要下个月（同一天），除非某些月份和日期当然有问题。但是上面的场景让我很困惑。这个月的任何其他日子都不会发生这种情况，只有第一天才会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:28:01.690

而不是`cal.add( Calendar.MONTH, frequency );`，试试这个：

```
cal.add(Calendar.MONTH, frequency);
cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T19:35:54.713

这是时区问题。将现有的设置行替换为以下内容，以便日历和格式化程序都使用相同的时区：

```
 TimeZone tz = TimeZone.getTimeZone("America/Los_Angeles");
    formatter.setTimeZone(tz);
    Calendar cal = Calendar.getInstance(tz); 
```

一切正常：

```
Current calendar time=Fri Jun 01 08:00:00 BST 2012
In loop - current calendar time=Sun Jul 01 08:00:00 BST 2012
In loop - current calendar time=Wed Aug 01 08:00:00 BST 2012
In loop - current calendar time=Sat Sep 01 08:00:00 BST 2012
In loop - current calendar time=Mon Oct 01 08:00:00 BST 2012
In loop - current calendar time=Thu Nov 01 07:00:00 GMT 2012 
```

您可能希望将`toString()`呼叫替换为呼叫，`formatter.format()`以便输出也位于正确的时区（如果您在 EDT，它可能看起来不错，但我在英国时区，如您所见）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T19:38:44.073

您正在以系统默认时区打印时间。使用格式化程序显示它。

为格式化程序设置相同的时区：

```
DateFormat formatter = new SimpleDateFormat("dd-MMM-yy");
formatter.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles")); 
```

并用它来显示时间：

```
while (cal.getTime().getTime() < now) { 
    cal.add(Calendar.MONTH, frequency);
    System.out.println("In loop - current calendar time=" + formatter.format(cal.getTime()));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T19:42:43.470

来自 Javadoc[日历](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

add(f, delta) 将 delta 添加到字段 f。这相当于调用 set(f, get(f) + delta) 并进行两次调整：

*   添加规则 1。调用后字段 f 的值减去调用前字段 f 的值是 delta，以字段 f 中发生的任何溢出为模。当字段值超出其范围时会发生溢出，因此，下一个较大的字段会递增或递减，并且字段值会调整回其范围内。

*   增加规则2。如果一个较小的字段期望是不变的，但是由于字段f改变后其最小值或最大值的变化或其他约束，例如时区偏移量变化，它不可能等于它的先前值，然后将其值调整为尽可能接近其预期值。较小的字段表示较小的时间单位。HOUR 是比 DAY_OF_MONTH 小的字段。不对预期不会保持不变的较小字段进行任何调整。日历系统确定哪些字段预计是不变的。

此外，与 set() 不同，add() 强制立即重新计算日历的毫秒数和所有字段。

> Example: Consider a GregorianCalendar originally set to August 31, 1999\. Calling add(Calendar.MONTH, 13) sets the calendar to September 30, 2000\. Add rule 1 sets the MONTH field to September, since adding 13 months to August gives September of the next year. Since DAY_OF_MONTH cannot be 31 in September in a GregorianCalendar, add rule 2 sets the DAY_OF_MONTH to 30, the closest possible value. Although it is a smaller field, DAY_OF_WEEK is not adjusted by rule 2, since it is expected to change when the month changes in a GregorianCalendar.

So in your case considering the time that you have set if calendar API add month to `Jul` then it is possible that it is getting overflown more than a month so it is being adjusted back `Jul` Midnight

# css - CSS 动画和显示 无

> ID：13037637
> 
> 赞同：100
> 
> 时间：2012-10-23T19:20:35.213
> 
> 标签：css, css-transitions, animate.css

我有一个 div 的 CSS 动画，它会在一段时间后滑入。我想要一些 div 来填充滑入的动画 div 的空间，然后它将这些元素推到页面下方。

当我第一次尝试这个时，即使它不可见，滑入的 div 仍然会占用空间。如果我将 div 更改为`display:none`div 根本不会滑入。

我如何让一个 div 在定时进入之前不占用空间（使用 CSS 进行定时。）

我正在使用 Animate.css 制作动画。

代码如下所示：

```
<div id="main-div" class="animated fadeInDownBig"><!-- Content --></div>

<div id="div1"><!-- Content --></div>
<div id="div2"><!-- Content --></div>
<div id="div3"><!-- Content --></div> 
```

正如代码所示，我希望隐藏主 div 并首先显示其他 div。然后我设置了以下延迟：

```
#main-div{
   -moz-animation-delay: 3.5s;
   -webkit-animation-delay: 3.5s;
   -o-animation-delay: 3.5s;
    animation-delay: 3.5s;
} 
```

正是在这一点上，我希望主 div 在进入时将其他 div 向下推。

我该怎么做呢？

注意：我考虑过使用 jQuery 来执行此操作，但我更喜欢使用严格的 CSS，因为它更平滑并且时间控制更好。

***编辑***

我已经尝试过 Duopixel 的建议，但要么我误解了，要么没有正确执行，要么它不起作用。这是代码：

***HTML***

```
<div id="main-div" class="animated fadeInDownBig"><!-- Content --></div> 
```

***CSS***

```
#main-image{
    height: 0;
    overflow: hidden;
   -moz-animation-delay: 3.5s;
   -webkit-animation-delay: 3.5s;
   -o-animation-delay: 3.5s;
    animation-delay: 3.5s;
}
#main-image.fadeInDownBig{
    height: 375px;
} 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-23T19:48:19.880

CSS（或 jQuery，就此而言）不能在`display: none;`和之间设置动画`display: block;`。更糟糕的是：它不能在`height: 0`和之间设置动画`height: auto`。所以你需要对高度进行硬编码（如果你不能对值进行硬编码，那么你需要使用 javascript，但这是一个完全不同的问题）；

```
#main-image{
    height: 0;
    overflow: hidden;
    background: red;
   -prefix-animation: slide 1s ease 3.5s forwards;
}

@-prefix-keyframes slide {
  from {height: 0;}
  to {height: 300px;}
} 
```

你提到你正在使用我不熟悉的 Animate.css，所以这是一个香草 CSS。

你可以在这里看到一个演示：http: [//jsfiddle.net/duopixel/qD5XX/](http://jsfiddle.net/duopixel/qD5XX/)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-07-03T14:55:25.407

已经有一些答案，但这是我的解决方案：

我使用`opacity: 0`和`visibility: hidden`。为了确保`visibility`在动画之前设置，我们必须设置正确的延迟。

我使用[http://lesshat.com](http://lesshat.com)来简化演示，如果没有这个，只需添加浏览器前缀即可。

（例如`-webkit-transition-duration: 0, 200ms;`）

```
.fadeInOut {
    .transition-duration(0, 200ms);
    .transition-property(visibility, opacity);
    .transition-delay(0);

    &.hidden {
        visibility: hidden;
        .opacity(0);
        .transition-duration(200ms, 0);
        .transition-property(opacity, visibility);
        .transition-delay(0, 200ms);
    }
} 
```

因此，只要将类添加`hidden`到元素中，它就会淡出。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-23T19:24:22.050

我有同样的问题，因为一旦`display: x;`在动画中，它就不会动画。

我最终创建了自定义关键帧，首先更改了`display`值，然后更改了其他值。可能会给出更好的解决方案。

或者，而不是使用`display: none;`use`position: absolute; visibility: hidden;`它应该可以工作。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-02-28T11:18:30.803

您可以设法拥有一个纯 CSS 实现`max-height`

```
#main-image{
    max-height: 0;
    overflow: hidden;
    background: red;
   -prefix-animation: slide 1s ease 3.5s forwards;
}

@keyframes slide {
  from {max-height: 0;}
  to {max-height: 500px;}
} 
```

您可能还必须将`padding`,`margin`和设置`border`为 0，或者简单地设置为`padding-top`, `padding-bottom`, `margin-top`and `margin-bottom`。

我在这里更新了 Duopixel 的演示：http: [//jsfiddle.net/qD5XX/231/](http://jsfiddle.net/qD5XX/231/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-30T16:26:09.217

以下将让您在以下情况下为元素设置动画

1.  给它一个显示 - 无
2.  给它一个显示 - 块

**CSS**

```
.MyClass {
       opacity: 0;
       display:none;
       transition: opacity 0.5s linear;
       -webkit-transition: opacity 0.5s linear;
       -moz-transition: opacity 0.5s linear;
       -o-transition: opacity 0.5s linear;
       -ms-transition: opacity 0.5s linear;
 } 
```

**JavaScript**

```
function GetThisHidden(){
    $(".MyClass").css("opacity", "0").on('transitionend webkitTransitionEnd oTransitionEnd otransitionend', HideTheElementAfterAnimation);
}

function GetThisDisplayed(){
    $(".MyClass").css("display", "block").css("opacity", "1").unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend");
}

function HideTheElementAfterAnimation(){
    $(".MyClass").css("display", "none");
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-23T15:09:39.047

当动画高度（从 0 到自动）时，使用`transform: scaleY(0);`是隐藏元素的另一种有用方法，而不是`display: none;`：

```
.section {
  overflow: hidden;
  transition: transform 0.3s ease-out;
  height: auto;
  transform: scaleY(1);
  transform-origin: top;

  &.hidden {
    transform: scaleY(0);
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-10T15:34:26.083

> 我如何让一个 div 在定时进入之前不占用空间（使用 CSS 进行定时。）

这是我对同一问题的解决方案。

此外，我`onclick`在最后一帧加载另一个幻灯片，并且在最后一帧可见之前不能点击它。

基本上我的解决方案是使用 a 保持`div`1 像素高`scale(0.001)`，并在需要时对其进行缩放。如果您不喜欢缩放效果，您可以`opacity`在缩放幻灯片后将其恢复为 1。

```
#Slide_TheEnd {

    -webkit-animation-delay: 240s;
    animation-delay: 240s;

    -moz-animation-timing-function: linear;
    -webkit-animation-timing-function: linear;
    animation-timing-function: linear;

    -moz-animation-duration: 20s;
    -webkit-animation-duration: 20s;
    animation-duration: 20s;

    -moz-animation-name: Slide_TheEnd;
    -webkit-animation-name: Slide_TheEnd;
    animation-name: Slide_TheEnd;

    -moz-animation-iteration-count: 1;
    -webkit-animation-iteration-count: 1;
    animation-iteration-count: 1;

    -moz-animation-direction: normal;
    -webkit-animation-direction: normal;
    animation-direction: normal;

    -moz-animation-fill-mode: forwards;
    -webkit-animation-fill-mode: forwards;
    animation-fill-mode: forwards;

    transform: scale(0.001);
    background: #cf0;
    text-align: center;
    font-size: 10vh;
    opacity: 0;
}

@-moz-keyframes Slide_TheEnd {
    0% { opacity: 0;  transform: scale(0.001); }
    10% { opacity: 1; transform: scale(1); }
    95% { opacity: 1; transform: scale(1); }
    100% { opacity: 0;  transform: scale(0.001); }
} 
```

为了字节，其他关键帧被删除。请忽略奇怪的编码，它是由 php 脚本从数组中选择值并 str_replacing 模板制作的：我懒得为 100 多个 div 幻灯片上的每个专有前缀重新键入所有内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-16T22:48:53.050

```
.hidden {
  visibility: hidden;
  opacity: 0;
  transition: display 0s, opacity 0.5s linear;
} 
```

# xcode - 必须在 Xcode 中编译两次才能看到更改

> ID：13037640
> 
> 赞同：0
> 
> 时间：2012-10-23T19:20:53.707
> 
> 标签：xcode, compilation

在看到更改之前，我必须在 xcode 中构建我的项目两次。这一定是我迄今为止遇到的最烦人的事情。在两个完全不同的项目中，添加 FacebookSDK 和集成后，我所做的更改似乎没有第一次编译。但是，如果我构建两次，则可以在第二次构建时看到更改。任何人都遇到过类似的问题或知道我可以改变什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:23:03.307

make clean 然后构建怎么样？

# rvm - Ruby 不断恢复到旧版本

> ID：13037641
> 
> 赞同：1
> 
> 时间：2012-10-23T19:20:59.433
> 
> 标签：rvm

我在 Ubuntu 上遇到了 RVM 的一些问题。如果这很重要，我的计算机当前设置为使用 Windows 7 进行双启动。我正在尝试运行最新版本的 ruby​​ 1.9.3。每次我关闭终端时，尽管使用 rvm use 1.9.3 --default，它都会恢复到 1.8.7。以下是我正在使用的步骤。

```
michael@michael-Studio-XPS-1640:~$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]
michael@michael-Studio-XPS-1640:~$ rvm use 1.9.3

RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example.

michael@michael-Studio-XPS-1640:~$ /bin/bash --login
michael@michael-Studio-XPS-1640:~$ rvm use 1.9.3 --default
Using /home/michael/.rvm/gems/ruby-1.9.3-p286
michael@michael-Studio-XPS-1640:~$ ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [i686-linux] 
```

关闭并重新打开终端后，我得到以下版本信息。我还添加了 rvm 列表信息。

```
michael@michael-Studio-XPS-1640:~$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]

michael@michael-Studio-XPS-1640:~$ rvm list

rvm rubies

=* ruby-1.9.3-p286 [ i686 ]

# => - current
# =* - current && default
#  * - default 
```

提前谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:32:47.150

您错过了显示的说明：

> 您需要更改终端模拟器首选项以允许登录 shell。有时需要`/bin/bash --login`作为命令使用。请访问[https://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)获取示例。

# android - 如何强制 AutoCompleteTextView 下拉元素将文本包装成三行或更多行？

> ID：13037643
> 
> 赞同：1
> 
> 时间：2012-10-23T19:21:04.080
> 
> 标签：android, autocompletetextview

我无法强制 AutoCompleteTextView 下拉元素将文本换成三行或更多行。

如你看到的：

![选择前的下拉菜单](../Images/82a6720bb579aff43427b028714a254a.png)

![选择后下拉](../Images/d5fa3f96f5134b6527fd3adae546b167.png)

第一个图像（下拉元素）中的文本消失了，但我不会将它换成更多行。

编辑：这是我的下拉项目的 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="?android:attr/dropDownItemStyle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="false"
    android:lines="4"
    android:minLines="4"
    android:textSize="10sp"/> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:15:55.247

解决了！我的布局 dropdown_multiline_item.xml 代码变为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textContainer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:lines="3"
        android:gravity="center_vertical"
        android:padding="5dp"
        android:textColor="#000"
        android:textSize="10sp" />

</LinearLayout> 
```

秘密在于两种方法（进入适配器）：

```
[...]

@Override
public void bindView(View view, Context context, Cursor cursor) {
    final String text = convertToString(cursor);
    ((TextView) view.findViewById(R.id.textContainer)).setText(text);
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final LayoutInflater inflater = LayoutInflater.from(context);
    final View view = inflater.inflate(R.layout.dropdown_multiline_item, parent, false);
    return view;
}

[...] 
```

希望这会对某人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:28:29.427

将 TextView 定义为 XML 布局，其中包含使其看起来正确所需的所有属性（线条、椭圆大小、maxLines、minLines 等）。使用[android:completionHintView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html#attr_android%3acompletionHintView)属性设置下拉菜单以显示您定义的文本视图。

# django - 如何使用 django-allauth 将多个社交身份验证提供者连接到同一个 django 用户？

> ID：13037644
> 
> 赞同：5
> 
> 时间：2012-10-23T19:21:15.257
> 
> 标签：django, django-allauth, socialauth

可以连接到 facebook 和 twitter，但是我如何将普通的 django 用户连接到他的 facebook 和 twitter 网络，以便下次他可以选择通过 3 中的任何 1 登录时，我可以利用来自两者的信息网络。

可以发出信号吗：-

allauth.socialaccount.signals.pre_social_login

用于检查用户是否已经登录，如果是，则将社交帐户连接到 django 帐户，但我无法弄清楚如何在登录视图中实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:23:53.747

事实证明，连接到不同的社交服务提供商非常容易。如果在用户主页（即普通 django 用户使用 django auth 登录后将看到的页面）访问，则用于将用户登录到社交提供商的相同 url 将您的 django 个人资料自动链接到社交应用程序个人资料。

现在我正在研究如何使用 graph api 和 allauth 来获取朋友列表、发布到墙上等

# jquery - 在 HTML 页面中加载 jquery 时出现问题

> ID：13037646
> 
> 赞同：0
> 
> 时间：2012-10-23T19:21:17.837
> 
> 标签：jquery, html

在 html 页面中加载 jquery 脚本时遇到问题。当我调试某些值会变成红色但它们不会。我究竟做错了什么？仅供参考，这是我试图在 Visual Studio 中复制的内容：http: [//jsfiddle.net/jfriend00/GAwrB/](http://jsfiddle.net/jfriend00/GAwrB/)

```
 <html>
<head>
<title></title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
    $(".colorMe td").each(function() {
        var valueInTd = $(this).text();
        if (valueInTd < 3000) {
            $(this).css('background-color', '#F00000');
        }
    });
}); 
```

​​​

```
</head>
<body>
 <table class="colorMe">
<tr><td>2000</td><td>3500</td></tr>
<tr><td>3000</td><td>2500</td></tr>
<tr><td>4000</td><td>4500</td></tr>
</table>​
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:24:53.787

我不确定您要做什么，看起来您正在混合 IIFE（立即调用函数表达式）和常规函数声明。

如果您只是将自己的代码粘贴到 JSFiddle 中，您会看到错误：http: [//jsfiddle.net/f6sH6/](http://jsfiddle.net/f6sH6/)

这是我得到的错误：`Uncaught ReferenceError: rr is not defined`

看起来您试图使问题复杂化。这工作正常：

```
$(function () {
    $(".colorMe td").each(function() {
        var val = parseInt(this.innerHTML, 10);
        if (val < 3000) {
            this.style.backgroundColor = "#F00000";
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:35:51.873

这是另一个例子：

```
http://jsfiddle.net/GAwrB/92/ 
```

我在 jQuery 版本上发现了一个问题。您应该尝试最新版本并使用 onDomReady 而不是 onLoad，它适用于您的示例。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:25:01.400

jQuery 语法略有不同：

```
$(".colorMe td").each(
    var val = parseInt($(this).text(), 10);
    if (val < 3000) {
        $(this).css('background-color','#F00000');
    }
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T19:26:25.250

我可以看到2个问题。1）您的函数声明`rr`在括号内，因此在括号外无法访问，2）`each`您调用的函数使用了不正确的语法。它应该看起来像：

```
$(".colorMe td").each(function() {
    // ... code
}); 
```

# jersey - Guice Jersey ClientConfig MessageBodyWriters 和注入

> ID：13037651
> 
> 赞同：0
> 
> 时间：2012-10-23T19:21:31.737
> 
> 标签：jersey, jax-rs, guice

我试图从客户端的角度让 Guice 注入与 Jersey MessageBodyReader/MessageBodyWriter 一起工作。我已经使用 Guice 正确启动了服务器。我的问题与客户有关。

我将以下内容拼凑在一起，证明了错误：`SEVERE: Missing dependency for constructor public FooExample$FooReader(FooExample$FooUnmarshaller) at parameter index 0`

```
import java.io.IOException;
import java.io.InputStream;
import java.lang.annotation.Annotation;
import java.lang.reflect.Type;

import javax.inject.Inject;
import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.MultivaluedMap;
import javax.ws.rs.core.UriBuilder;
import javax.ws.rs.ext.MessageBodyReader;

import com.google.inject.AbstractModule;
import com.google.inject.Guice;
import com.google.inject.Injector;
import com.google.inject.Provides;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;

class FooExample {
  public static void main(String[] args) {
    Injector i = Guice.createInjector(new FooExample().new FooModule());
    WebResource service = i.getInstance(WebResource.class);

    service.path("bar")
        .accept(MediaType.APPLICATION_XML)
        .put(String.class, "test123");
  }

  public class FooModule extends AbstractModule{
    @Override
    protected void configure() {
      bind(FooUnmarshaller.class).to(SimpleFooUnmarshaller.class);
    }

    @Provides
    public WebResource configuredClient() {
      ClientConfig config = new DefaultClientConfig();
      config.getClasses().add(FooReader.class);
      return Client.create(config).resource(
          UriBuilder.fromUri("http://localhost:8080/foo").build());
    }
  }

  public static class Foo {}

  public static interface FooUnmarshaller {
    public Foo unmarshall(InputStream is);
  }

  public static class SimpleFooUnmarshaller implements FooUnmarshaller {
    @Override
    public Foo unmarshall(InputStream is) {
      return new Foo();
    }
  }

  public static class FooReader implements MessageBodyReader<Foo> {
    private final FooUnmarshaller marshaller;

    @Inject
    public FooReader(FooUnmarshaller marshaller) {
      this.marshaller = marshaller;
    }

    @Override
    public boolean isReadable(
        Class<?> type,
        Type genericType,
        Annotation[] annotations,
        MediaType mediaType) {
      return true;
    }

    @Override
    public Foo readFrom(
        Class<Foo> type,
        Type genericType,
        Annotation[] annotations,
        MediaType mediaType,
        MultivaluedMap<String, String> httpHeaders,
        InputStream entityStream) throws IOException, WebApplicationException {
      return marshaller.unmarshall(entityStream);
    }
  }
} 
```

我在哪里获得控制台输出：

```
Oct 23, 2012 3:17:22 PM com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for constructor public FooExample$FooReader(FooExample$FooUnmarshaller) at parameter index 0
Exception in thread "main" com.google.inject.ProvisionException: Guice provision errors:

1) Error in custom provider, com.sun.jersey.spi.inject.Errors$ErrorMessagesException
  at FooExample$FooModule.configuredClient(FooExample.java:40)
  while locating com.sun.jersey.api.client.WebResource

1 error
  at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:987)
  at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1013)
  at FooExample.main(FooExample.java:25)
Caused by: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
  at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
  at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
  at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
  at com.sun.jersey.api.client.Client.<init>(Client.java:187)
  at com.sun.jersey.api.client.Client.<init>(Client.java:170)
  at com.sun.jersey.api.client.Client.create(Client.java:679)
  at FooExample$FooModule.configuredClient(FooExample.java:42)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:616)
  at com.google.inject.internal.ProviderMethod.get(ProviderMethod.java:104)
  at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
  at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)
  at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)
  at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)
  ... 2 more 
```

我觉得我需要使用`GuiceComponentProviderFactory`，但我似乎找不到任何关于它`IoCComponentProviderFactory`的文档，也找不到`ClientConfig`. 任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:20:27.643

所以我通过猜测和检查解决了我自己的问题。我无法确认这是做事的预期方式，但这是可行的。

这个`Client`类有一个方法：`public static Client create(ClientConfig cc, IoCComponentProviderFactory provider)`我传递了一个方法`GuiceComponentProviderFactory`，事情就解决了。上述代码的工作版本是：

```
import java.io.IOException;
import java.io.InputStream;
import java.lang.annotation.Annotation;
import java.lang.reflect.Type;

import javax.inject.Inject;
import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.MultivaluedMap;
import javax.ws.rs.core.UriBuilder;
import javax.ws.rs.ext.MessageBodyReader;

import com.google.inject.AbstractModule;
import com.google.inject.Guice;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.DefaultClientConfig;
import com.sun.jersey.api.core.DefaultResourceConfig;
import com.sun.jersey.core.spi.component.ioc.IoCComponentProviderFactory;
import com.sun.jersey.guice.spi.container.GuiceComponentProviderFactory;

class FooExample {
  public static void main(String[] args) {
    WebResource service = configuredClient();

    service.path("bar")
        .accept(MediaType.APPLICATION_XML)
        .put(String.class, "test123");
  }

  private static WebResource configuredClient() {
    DefaultClientConfig config = new DefaultClientConfig();
    config.getClasses().add(FooReader.class);
    return Client.create(config, provider()).resource(
        UriBuilder.fromUri("http://localhost:8080/foo").build());
  }

  private static IoCComponentProviderFactory provider() {
    return new GuiceComponentProviderFactory(
        new DefaultResourceConfig(),
        Guice.createInjector(new FooExample().new FooModule()));
  }

  public class FooModule extends AbstractModule {
    @Override
    protected void configure() {
      bind(FooUnmarshaller.class).to(SimpleFooUnmarshaller.class);
    }
  }

  public static class Foo {}

  public static interface FooUnmarshaller {
    public Foo unmarshall(InputStream is);
  }

  public static class SimpleFooUnmarshaller implements FooUnmarshaller {
    @Override
    public Foo unmarshall(InputStream is) {
      return new Foo();
    }
  }

  public static class FooReader implements MessageBodyReader<Foo> {
    private final FooUnmarshaller marshaller;

    @Inject
    public FooReader(FooUnmarshaller marshaller) {
      this.marshaller = marshaller;
    }

    @Override
    public boolean isReadable(
        Class<?> type,
        Type genericType,
        Annotation[] annotations,
        MediaType mediaType) {
      return true;
    }

    @Override
    public Foo readFrom(
        Class<Foo> type,
        Type genericType,
        Annotation[] annotations,
        MediaType mediaType,
        MultivaluedMap<String, String> httpHeaders,
        InputStream entityStream) throws IOException, WebApplicationException {
      return marshaller.unmarshall(entityStream);
    }
  }
} 
```

和输出

```
Oct 23, 2012 5:17:11 PM com.sun.jersey.guice.spi.container.GuiceComponentProviderFactory getComponentProvider
INFO: Binding FooExample$FooReader to GuiceInstantiatedComponentProvider
Exception in thread "main" com.sun.jersey.api.client.UniformInterfaceException: PUT http://localhost:8080/foo/bar returned a response status of 404 Not Found
  at com.sun.jersey.api.client.WebResource.handle(WebResource.java:686)
  at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
  at com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:537)
  at FooExample.main(FooExample.java:28) 
```

意味着 guice 绑定有效！=)

# java - 在Java中减去两个日期

> ID：13037654
> 
> 赞同：31
> 
> 时间：2012-10-23T19:21:44.840
> 
> 标签：java, date

> **可能的重复：**
> [计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

我知道这可能是一个重复的线程。但我试图找出一种方法来计算两个日期之间的差异。从 jquery 中，日期字符串的格式为`'yyyy-mm-dd'`. 我把它读成一个字符串并像这样转换为java Date

```
Date d1 = new SimpleDateFormat("yyyy-M-dd").parse((String) request.getParameter(date1));
Date d2 = new SimpleDateFormat("yyyy-M-dd").parse((String) request.getParameter(date2)); 
```

我想计算这两个日期之间的天数差异。

**注意：**我不能使用需要审查的第三方 API。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-23T19:44:44.807

**编辑 2018-05-28** 我已将示例更改为使用 Java 8 的 Time API：

```
LocalDate d1 = LocalDate.parse("2018-05-26", DateTimeFormatter.ISO_LOCAL_DATE);
LocalDate d2 = LocalDate.parse("2018-05-28", DateTimeFormatter.ISO_LOCAL_DATE);
Duration diff = Duration.between(d1.atStartOfDay(), d2.atStartOfDay());
long diffDays = diff.toDays(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-23T19:42:13.500

假设您被限制使用`Date`，您可以执行以下操作：

`Date diff = new Date(d2.getTime() - d1.getTime());`

在这里，您正在计算自“纪元”以来以毫秒为单位的差异，并在距纪元的偏移处创建一个新的 Date 对象。就像其他人所说的那样：重复问题中的答案可能是更好的选择（如果您没有被束缚`Date`）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-23T19:44:25.153

```
Date d1 = new SimpleDateFormat("yyyy-M-dd").parse((String) request.
            getParameter(date1));
Date d2 = new SimpleDateFormat("yyyy-M-dd").parse((String) request.
            getParameter(date2));

long diff = d2.getTime() - d1.getTime();

System.out.println("Difference between  " + d1 + " and "+ d2+" is "
        + (diff / (1000 * 60 * 60 * 24)) + " days."); 
```

# java - 在 JApplet 中切换 JPanel

> ID：13037655
> 
> 赞同：0
> 
> 时间：2012-10-23T19:21:46.063
> 
> 标签：java, event-handling, jpanel, japplet

这是问题所在。我有一个 JApplet，在 applet 内我有两个 JPanel，panel1 和 panel2。每个面板都有一个显示为“panel1”或“panel2”的标签，每个面板都有一个名为“switch”的按钮。当我运行小程序时，我只希望 panel1 可见。当我单击切换按钮时，我希望 panel1 不可见（或消失），而 panel2 可见。我还想单击 panel2 中的切换按钮以切换回 panel1。谁能帮我这个？

```
public class MyApplet extends JApplet
{
    private Panel1 panel1;
    private Panel2 panel2;

    public void init()
    {
        setLayout(new FlowLayout());

        panel1 = new Panel1();
        panel2 = new Panel2();

        add(panel1);
        //add(panel2);
    }
}

public class Panel1 extends JPanel
{
    private JLabel label;
    private JButton button;

    public Panel1()
    {
        setLayout(new FlowLayout());

        label = new JLabel("Panel1");
        button = new JButton("Switch1");

        add(label);
        add(button);
    }
}

public class Panel2 extends JPanel
{
    private JLabel label;
    private JButton button;

    public Panel2()
    {
        setLayout(new FlowLayout());

        label = new JLabel("Panel2");
        button = new JButton("Switch2");

        add(label);
        add(button);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:26:48.813

向小程序添加“内容”，您希望在其中切换面板和关闭面板。

将此面板布局管理器设置为`CardLayout`

将您的其他面板添加到“内容”窗格

```
content.add(aPanel, "PanelA");
content.add(bPanel, "PanelB"); 
```

使用 CardLayout API 切换面板...

```
cardLayout.show(content, "PanelB"); 
```

阅读[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)了解更多详情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:51:48.233

将它们都添加到小程序中，并在其中一个上设置可见（假）。

为按钮添加侦听器。

侦听器将切换相应面板的 setVisible。

# html - 在网络上使用特殊字符符号时我应该注意什么？

> ID：13037657
> 
> 赞同：3
> 
> 时间：2012-10-23T19:21:56.653
> 
> 标签：html, css, fonts, special-characters, accessibility

在我们的网络应用程序中，我们使用彩色星星 (★ aka `&#9733;`) 来表示评级。因此，前四颗星将是纯色，而最后一颗星将是白色，代表 5 分中的 4 分。像这样：

> ![在此处输入图像描述](../Images/6fe22b1c805ff59f7ea82e0ed1364a32.png)

*   这在可访问性和支持方面引起了哪些担忧？
*   我不能确定用户浏览器中的字体版本是否支持这个字符，有什么方法可以为此提供“优雅降级”？还是覆盖范围足够好以至于这不是问题？
*   这是如何由屏幕阅读器“渲染”的？将评级包装为`<span title="4 out of 5">`提供更多可访问性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T21:14:12.950

标题中的一般问题非常广泛。简单来说，主要关注的是字体问题，可能比较严重，确实没有优雅的退化；如需更长的答案，请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

关于彩色星星的具体问题要简单得多，简短的回答是使用五张图像有充分的理由，每张图像都有不同数量的彩色星星。然后您可以使用有意义的`alt`属性，例如`alt="four stars"`，并且事情会相当可靠地工作。它们应该是内容图像（通过`img`），因为没有办法指定背景图像的替代文本。

考虑到使用BLACK STAR“★”字符的可能性，它的[字体支持](http://www.fileformat.info/info/unicode/char/2605/fontsupport.htm)不是特别差，但也不是很普遍。没有简单的方法可以找出包含某种字体的计算机的百分比。此外，如果字符存在于系统中的某些字体中，则其外观可能会有很大差异。对于这个特定字符，可以预期字形看起来非常相似——但大小不同。

如果您的上下文确实需要使用符号作为*文本字符*，那么您可能需要冒险，但这里符号伴随文本而不是真正包含在文本中，因此可以使用图像。

使用嵌入字体 via`@font-face`是可能的，但在这里听起来有点矫枉过正。

屏幕阅读器对特殊字符的处理差异很大。一般来说，它们的设计目的是阅读某些人类语言的普通文本，并且它们经常无法有意义地说出特殊字符——或者根本无法说出字符的名字。该`title`属性可以被说出，但通常仅作为一个选项，并且用户可能不知道这些选项的存在。

图像会引起一些 HTTP 请求，但这是微不足道的或可忽略的影响。（您可以使用 CSS 精灵，尽管在这样的简单情况下几乎没有用处。）图像通常可以很好地缓存。如果需要，可以缩放它们以匹配文本大小，例如通过`img`以单位设置元素的高度`em`（而不是设置宽度，以便它们被缩放以保持宽度：高度比）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:44:40.317

我认为如果你不想尝试，你应该遵循[Jukkas 的建议](https://stackoverflow.com/a/13039348/1591669)并使用`img`元素。

如果出于某种原因，您想使用 Unicode 星号，则必须尝试使其可访问。根据您的描述，我猜您目前正在执行以下操作：

```
<div class="rating">
  <span>★★★★</span>★
</div>

<!-- CSS: .rating span {color:yellow;} --> 
```

这个例子**没有**标记评级的语义，因此屏幕阅读器和其他用户代理不能“理解”（宣布）它的含义。评分仅由颜色描述 → 这是不可访问的。

一种可能的方式*可能*是使用[`abbr`element](http://www.w3.org/TR/html5/the-abbr-element.html#the-abbr-element)，但是，这个用例可能会将定义延伸得太远（“五颗星真的是评分的缩写吗？”）：

```
<div class="rating">
  <abbr title="rating of 4 out of 5"><span>★★★★</span>★&lt;/abbr>
</div>

<!-- CSS: .rating span {color:yellow;} --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:32:38.307

为了获得最佳的整体兼容性，请使用图像。您知道它会是什么样子，可访问性问题很简单，您无需担心浏览器对各种功能的支持。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T19:26:55.403

您可以使用字体松鼠的@font-face。如果评级永远不会改变，那么如何使用 Photoshop 或类似程序创建图像以用作背景图像？跨度的标题不是一个好标题。如果您稍后更改评级会发生什么，那么您必须更改所有标题属性。我会做一个更笼统的标题，比如“评级”。如果评级对于页面上的内容不是绝对必要的，请考虑使用 JavaScript 来显示评级。这样，您实际上不会更改 HTML，因此应该处理您的安全问题。

# java - 如何在 Wicket 框架中禁用 ajaxfallbacklink 上的右键单击事件？

> ID：13037658
> 
> 赞同：1
> 
> 时间：2012-10-23T19:21:56.180
> 
> 标签：java, javascript, ajax, wicket, right-click

如何在 Wicket 框架 (6) 中禁用 ajaxfallbacklink 上的右键单击事件？如果使用 ajaxfallbacklink，并打开一个新选项卡（因为右键单击鼠标会让我这样做），我会得到一个异常。

（http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/markup/html/AjaxFallbackLink.html）“如果这个链接是使用ajax调用的，则为ajax目标，否则为null "

因此，我想禁用右键单击浏览器菜单，或修复此类链接的异常。我怎样才能在代码方面以一种好的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:56:33.687

Christophs 的回答让我走上了正轨。这是“在使用 ajaxlink（右键单击）打开新选项卡/win 之前，检查目标本身（可能是它的参数）是否为空，并为此采取预防措施。setResponsePage(YOURPAGE) 或其他东西”。Doh;) Chr。应该有这个功劳。

# ios - OpenCV 构建问题，找不到 ext/atomicity.h

> ID：13037659
> 
> 赞同：7
> 
> 时间：2012-10-23T19:21:58.970
> 
> 标签：ios, xcode, opencv

`<ext/atomicity.h>`在构建包含 OpenCV 的项目时，我收到编译器错误抱怨。环境是针对 iOS 的 Xcode 4.5。它为模拟器编译良好，但在为设备构建时失败。这是错误文本：

```
/Users/Nick/projects/ios/opencv2.framework/Headers/core/operations.hpp:65:16: fatal error: 'ext/atomicity.h' file not found
      #include <ext/atomicity.h> 
```

我正在使用 opencv2.framework，构建 cmake，使用[此处](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation)的说明。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T19:21:58.970

默认情况下，XCode 4.5 生成新项目以使用`libc++ (LLVM C++ standard library with C++ 11 support)`. 但是 OpenCV 预计将针对 GNU 构建`libstdc++ (GNU C++ standard library)`。 `<ext/atomicity.h>`显然是 GNU 扩展，不是 LLVM libc++ 标准库的一部分。

在项目的目标设置中，选择`libstdc++ (GNU C++ standard library)`C++ 标准库设置。

atomicity.h 要求很可能会从 opencv 中排除，或者以其他方式以 LLVM libc++ 兼容的方式完成。我没有对此进行探索，但如果有人对如何做到这一点有所了解，我会很感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:53:22.447

我认为情况正好相反。查看构建 opencv2.framework 的 python 脚本的输出，我得到了这个：

> -- C++ 标志（发布）：-stdlib=libc++ -headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden -fPIC -DNDEBUG -O3 [...]

这很可能不是您想要的。因此，您需要使用 libstdc++ 编译框架或使用正确的 lib 编译您的应用程序。据我所知，我在使用 libc++ 构建我的应用程序时遇到了问题，但那可能是我。

# bash - 如何以编程方式将 XYZUpperCamelCase 文件重命名为 xyzLowerCamelCase？

> ID：13037660
> 
> 赞同：1
> 
> 时间：2012-10-23T19:22:00.297
> 
> 标签：bash, file-rename

我有大量需要`svn mv`'d 的文件，我不想全部手动完成。

每个文件名都遵循格式`XYZSomething.txt`or `SomethingElse.txt`, 并应分别重命名为`xyzSomething.txt`and `somethingElse.txt`。

如果我不需要处理缩写前缀，我可以使用类似的东西

```
for f in *; do svn mv $f ${f,}; done 
```

它只小写文件名中的第一个字符。就目前而言，这让我完成了 90% 的工作，所以用手完成它不会太痛苦；但我仍然想知道如何覆盖未来知识的前缀。

那么请告诉我，StackOverflow 的 Bash 大神们，重命名这些文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:34:02.450

这两个例子都可以解决问题：

```
 $ sed -r 's@^([a-Z]+)([A-Z].*)@\L\1\E\2@' <<< XYZSomething
  xyzSomething

  $ sed -r 's@^([a-Z]+)([A-Z].*)@\L\1\E\2@' <<< SomethingElse
  somethingElse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:29:28.057

所以你可以这样做：

```
$ echo ThisIsAFileName | sed 's/^\([A-Z]*\)\(.*\)/\L\1\E\2/'
thisIsAFileName 
```

或者：

```
for f in *; do svn mv $f `echo $f | sed 's/^\([A-Z]*\)\(.*\)/\L\1\E\2/'`; done 
```

sed 中的 \L 将使以下字母小写直到 \E

如果它只是第一个字母，那么你可以这样做：

```
$ echo ThisIsAFileName | sed 's/.*/\l&/'
thisIsAFileName 
```

\l 只会将下一个字母变为小写

但是，XYZFileName 将被重命名为 xyzfileName，只是因为 XYZ 和 F 之间的区别不存在......

希望这可以帮助

# javascript - 扩展 javascript 选项以添加功能

> ID：13037663
> 
> 赞同：0
> 
> 时间：2012-10-23T19:22:07.793
> 
> 标签：javascript, jquery

当“MyFunction”（创建一个元素）完成时，我需要调用“MyOtherFunction”，而 MyFunction 不知道 MyOtherFunction 是什么。

我需要这个的原因是为了扩展一个 jquery 驱动的文件上传用户控件，该控件在多个具有不同功能的地方使用。一个特定的页面显示了它的标题和文件数，当上传完成时，我需要根据显示的文件数（按创建的元素）修改文件数，我想：

```
$(UserControl).on(MyFunction, UploadElem, MyOtherFunction); 
```

但这条路线没有完成任何事情。我最多可以更改用户控件是添加一个函数调用，但不会影响原始用户控件的功能。

我不确定是否因为 MyFunction 不是事件并且不会冒泡，或者是否无法使用定义的函数作为 .on() 的参数是我无法让此代码工作的原因. 有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:24:31.603

我能想到的最简单的方法是*鸭子冲孔*分别*钩住*该方法：

```
var _oldMyFunction = MyFunction;

MyFunction = function() {
    _oldMyFunction.apply( this, arguments );
    MyOtherFunction();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:01:12.270

我设法解决了自己的问题，但上下文对于答案很重要：

```
// Using a Global JavaScript object I created:
GlobalNameSpace.ExtensionFunction = function(oParam1, oParam2, oParam3)
{
   /// <summary>All parameters are optional</summary>

   return; // For instances when it is not being overwritten, simply return
}

//In the Code for the user control:
GlobalNameSpace.UploadControl.UploadComplete(oSender, oArgs)
{
    ///<summary>Handles the Upload process</summary>

    // process the upload
    GlobalNameSpace.ExtensionFunction(oSender, oArgs);
}

//and finally in the code to extend the functionality
GlobalNameSpace.Page.Init
{
    ///<summary>Initializes the page</summary>

    // redefine the extension function
    GlobalNameSpace.ExtensionFunction = function(oSender, oArgs)
    {
      GlobalNameSpace.Page.Function(oSender, oArgs);
    }
} 
```

这使我可以扩展我需要的任何东西，而不会污染我的对象，并且已经存在一些通用的东西可以调用来进行我的更改。此解决方案解决了我需要为我创建的元素创建一个 onCreate 函数来表示我上传的项目以触发标题显示文件数量的问题。很有用

# sql - 有空停止日期的工作意味着什么？

> ID：13037668
> 
> 赞同：6
> 
> 时间：2012-10-23T19:22:18.113
> 
> 标签：sql, sql-server

我使用以下 SQL 列出了所有没有停止日期的作业。我想我可以用它来找到所有活跃的工作。我注意到我在这个表中有许多作业，并且 stop_execution_date 为空。一些相同的作业（相同的 job_id）在此表中重复多次。

```
select job.*, activity.*
from msdb.dbo.sysjobs_view job
inner join msdb.dbo.sysjobactivity activity
on (job.job_id = activity.job_id)
where run_Requested_date is not null and stop_execution_date is null 
```

当我`EXEC msdb.dbo.sp_help_job`在这些作业上运行时，我看到它们当前的执行状态是空闲的。

这些工作代表什么？这是工作没有被正确杀死时的行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T20:30:14.587

每次 SQL 代理启动时，它都会在 syssessions 中添加一个新行，随后运行的任何作业都将在 sysjobactivity 中获取该 session_id。对于具有空停止日期的作业，我的猜测是它们不适用于“当前”会话，这意味着它们在代理停止时仍在运行。

# entity-framework - ADO.Net 实体模型（edmx）与实体框架（v4.0 等）

> ID：13037673
> 
> 赞同：2
> 
> 时间：2012-10-23T19:22:32.473
> 
> 标签：entity-framework, frameworks, ado.net, model, entity

使用 ADO.Net 实体模型和 EF 有什么好处？

我们可以在一个项目中同时使用它们吗？我遇到了一个例子，用户在他的应用程序中同时使用了 edmx 和 ef。我不确定这样做的目的是什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:04:16.223

Edmx 工件（对于模型优先和数据库优先方法以磁盘上的文件形式或由 EF 运行时 - 代码优先方法生成）描述您的模型、数据库以及它们之间的映射。目前 EF 总是需要它来工作。唯一的细微差别是对于 CodeFirst 应用程序（或者，一般来说，使用 DbContext 的应用程序），这个文件是从你的类中动态生成的，你不需要直接处理它，而在你使用 Model First/Database First 的情况下ObjectContext 文件在您的磁盘上，并且（通常）被拆分并嵌入到您的程序集中。

**编辑**

EF6 不再在内部创建和使用工件（至少对于 CSDL 和 SSDL 部分）。但是，您仍然可以使用 EDMX 的形式转储模型`EdmxWriter.WriteEdmx`

# javascript - 颜色框滚动条

> ID：13037674
> 
> 赞同：2
> 
> 时间：2012-10-23T19:22:45.880
> 
> 标签：javascript, jquery, css, colorbox, css-transitions

我有一个在灯箱中打开的图像（Colorbox 是脚本）。当图像打开时，我添加了一个 CSS3 动画。效果很好，但起初灯箱有滚动条，一旦动画完成，滚动条就会消失。

如何防止灯箱显示滚动条？

代码：

```
#start{
  /* Width and Height of the Image */
  width:526px;
  height:450px;
}

<div class="hide">
<div id="start">
 <img src="/Images/designs/start-large.jpg" class="animated rollIn"> 
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-29T15:28:30.203

将颜色框设置设置`scrolling`为`false`禁用内容上的滚动条。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T16:14:37.410

您可以使用`colorbox.resize()`自动计算其大小或使用`overflow hidden`您的内容的父母。
两种方式都有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-09T14:08:49.023

```
#cboxLoadedContent{overflow:hidden !important;} 
```

这对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T19:43:05.063

您可以尝试将`overflow:hidden;`div / img 添加到您的 CSS 样式中。或者试试`overflow:visible;`它是否切断了某些东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-31T08:26:10.230

添加**滚动：false**

```
$.colorbox({
  inline:true, 
  width:'95%',
  scrolling: false // *********
}); 
```

# fwrite - fwrite 与 BMP 文件返回 0 和分段错误

> ID：13037675
> 
> 赞同：0
> 
> 时间：2012-10-23T19:22:50.317
> 
> 标签：fwrite, bmp

我正在尝试读取一个简单的 bmp 文件，然后反转颜色，然后使用 fread 和 fwrite 二进制模式将其保存回文件系统。

所以我做了

```
BMP_Image * img; 
BMP_Header * hdr;

fread(hdr,sizeof(BMP_Header),1, fptr); 

img->width = hdr->width;
img->height = hdr->height;
img->bytes_per_pixel = hdr->bits*BIT_TO_BYTE; 
img->header = *hdr;
img->data_size = hdr->size; 
```

获取 BMP_Header 是结构的标头信息

然后读取图像数据并放入数组

```
fread(data, sizeof(char), img->data_size - 54, fptr); 
```

然后我将图像数据中的每个元素减去 255

```
int i = 0;
for(i = 0;i<img->data_size;i++){
   data[i] = 255 - data[i];
} 
```

现在，当我想将文件写回文件系统时，我无法让它正常工作。我知道你必须 fwrite 2 次。先写头部，再写图像数据。

我到目前为止：

```
 fwrite(header, 1 ,dataSize, fptr_out); 
```

这给了我分段错误和 0 字节 bmp 文件。

这是我的 BMP_Header 和 BMP_image 结构的 typedef

```
typedef unsigned short int uint16_t;
typedef unsigned int uint32_t;
typedef int int32_t;

typedef struct {
    uint16_t type;                      // Magic identifier
    uint32_t size;                      // File size in bytes
    uint16_t reserved1;     // Not used
    uint16_t reserved2;       // Not used
    uint32_t offset;                    // Offset to image data in bytes
    uint32_t header_size;               // Header size in bytes
    int32_t  width;                     // Width of the image
    int32_t  height;                    // Height of image
    uint16_t planes;                    // Number of color planes
    uint16_t bits;                      // Bits per pixel
    uint32_t compression;               // Compression type
    uint32_t imagesize;                 // Image size in bytes
    int32_t  xresolution;               // Pixels per meter
    int32_t  yresolution;               // Pixels per meter
    uint32_t ncolours;                  // Number of colors  
    uint32_t importantcolours;          // Important colors

} BMP_Header;

typedef struct {
    BMP_Header header;
    int data_size;
    int width;
    int height;
    int bytes_per_pixel; // This amount should be equals to number of bits/8
    char *data;
} BMP_Image; 
```

# delphi - 为什么通过 dbExpress 重新连接到 Oracle 数据库会导致访问冲突？

> ID：13037676
> 
> 赞同：3
> 
> 时间：2012-10-23T19:22:51.090
> 
> 标签：delphi, windows-7, oracle11g, dbexpress

我有一个在 Windows 7 上运行的 Delphi 2006 应用程序，它使用 Oracle 11 客户端安装通过 dbExpress 连接到 Oracle 数据库。第一次连接后，我可以查询数据，一切都按预期工作。但是，当我断开连接然后重新连接时，出现以下错误：

```
Exception EAccessViolation in module orageneric11.dll at 00450EB5\. 
Access violation at address 048A0EB5 in module 'orageneric11.dll'.
Read of address 00000038 
```

相同的应用程序在使用 Oracle 10 客户端安装的 Windows XP 上运行良好（不幸的是，我没有使用 XP + Oracle 11 或 Windows 7 + Oracle 10 的测试设置）。

我已将问题减少到以下几点：

```
program OracleReconnectTest; 

{$APPTYPE CONSOLE} 

uses
  SysUtils,
  SqlExpr; 

var
  connection: TSQLConnection;

begin
  connection := TSQLConnection.Create( nil );
  connection.DriverName := 'Oracle';
  connection.LibraryName := 'dbxora30.dll';
  connection.VendorLib := 'oci.dll';
  connection.GetDriverFunc := 'getSQLDriverORACLE';
  connection.LoginPrompt := False;
  connection.Params.Text :=
    'DATABASE=TheDatabase' + #$D#$A +
    'USER_NAME=TheUser' + #$D#$A +
    'PASSWORD=ThePassword' + #$D#$A +
    'DECIMAL SEPARATOR=,'; 

  connection.Connected := True; 

  Writeln( 'Connected once, press ENTER to disconnect and reconnect' );
  Readln; 

  connection.Connected := False;
  connection.Connected := True; // <- access violation on Windows 7 + Oracle 11

  Writeln( 'Reconnected, press ENTER to exit' );
  Readln;
end. 
```

我想这排除了我的应用程序代码的问题。我已经逐步浏览了 Delphi 附带的 dbExpress 代码，但没有遇到任何看起来错误或可以解释这一点的东西。

所以我找不到任何表明这是 dbExpress 或 Oracle 驱动程序中的错误的东西。因此，我不知道是否向 Embarcadero 和/或 Oracle 提交错误。

的版本`orageneric11.dll`是`11.2.0.1`，并且`dbxora30.dll`是版本`10.0.2151.25345`。

因为在并行安装多个客户端版本时出现问题，所以问题机器只有11个客户端。使用 Process Explorer，我已验证仅使用来自 11 个客户端的 DLL。

有没有其他人遇到过这个问题并且可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-17T15:01:03.813

抱歉，我没有可以解决此问题的“又好又甜”的解决方案，但您可以考虑以下一些选项：

a) 在客户端为指定数据库设置 ODBC DSN 后，更改使用的驱动程序并尝试通过 ODBC 访问数据库。可以在此处找到开源驱动程序：[https ://sourceforge.net/projects/open-dbexpress/](https://sourceforge.net/projects/open-dbexpress/)

b) 购买新版本的 Delphi。我知道，这可能是一种真正的痛苦。这会花费金钱和时间（如果涉及到第 3 方组件则更多），但有时使用已有十多年历史的产品并不是最好的主意。此后，德尔福背后的公司和知识产权已多次转型/出售给不同的公司。绝对没有机会获得对这个遗留产品的官方支持。

c）（真的很丑，但可能有机会）：建立一个池机制来防止关闭连接。听起来真的很荒谬，不是吗？

# javascript - 使用 JavaScript 替换“>”文本

> ID：13037680
> 
> 赞同：1
> 
> 时间：2012-10-23T19:23:02.113
> 
> 标签：javascript, text, greasemonkey

我想使用 Greasemonkey 为 Firefox 做一个*Greentext*插件，但没有 jQuery。

这是我所做的：

```
<head>
<script type="text/javascript">
    function highlight() {
        var elm = document.getElementsByClassName("mainWrapper");

        for(i = 0; i < elm.length; i++)
        {
            elm[i].innerHTML.replace(">","pony");
        }
    }

    alert("PONY");
</script>
</head>

<body onload="highlight()">
<div class="mainWrapper"><span class="noob"> > N00b </span>
</div>
</body> 
```

这是该功能的测试版本，我这样做是因为我认为问题出在 Greasemonkey，但它还没有工作。

你能帮助我吗？我不太擅长编程，也不知道如何很好地在 JS 上编写脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:45:23.763

对于这样的事情，您只需要处理页面的文本部分——这样 HTML（和任何附加的 JS）就不会被破坏。

所以（1）不要使用`innerHTML`，（2）代码最好使用一种称为[递归](https://stackoverflow.com/tags/recursion/info)的技术来有效地解析节点。

另请注意，***>***可以编码为`>`or `&gt;`（也可能是一些更罕见的方法）。

这是**一个完整的 Greasemonkey 脚本**，可以进行这种搜索和替换：

```
// ==UserScript==
// @name        _Replace HTML-sensitive text
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @include     http://fiddle.jshell.net/DJLEq/*
// @grant       none
// ==/UserScript==

var targElements    = document.querySelectorAll ("div.mainWrapper");

for (var J = targElements.length - 1;  J >= 0;  --J) {
    repGreaterWithPonies (targElements[J] );
}

function repGreaterWithPonies (node) {
    if (node.nodeType === Node.TEXT_NODE) {
        // YOUR CUSTOM REPLACE GOES HERE.
        node.nodeValue  = node.nodeValue.replace (/>|&gt;/ig, "pony");
    }
    else if (node.nodeType === Node.ELEMENT_NODE) {
        for (var K = 0, numNodes = node.childNodes.length;  K < numNodes;  ++K) {
            repGreaterWithPonies (node.childNodes[K] );
        }
    }
} 
```

安装该脚本，[您可以**在此页面上看到它**：fiddle.jshell.net/DJLEq/...](http://fiddle.jshell.net/DJLEq/2/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:33:26.230

这个问题并不完全清楚，但是查看您的代码，您似乎想要执行以下操作：

```
<head>
  <script type="text/javascript">
   function highlight() {
    var elm = document.getElementsByClassName("mainWrapper");
    for(i = 0; i < elm.length; i++)             
    {                        
      elm[i].innerText = elm[i].innerText.replace(">","pony");          
    }      
   } 
 </script>
</head>
<body onload="highlight()">
<div class="mainWrapper">><span class="noob"> N00b </span> 
</div>
</body>​ 
```

**[例子](http://jsfiddle.net/A8a2u/)**

# asp.net - 在 ASP.NET 网络表单中使用 FormsAuthentication 时如何禁用或启用 cookie？

> ID：13037683
> 
> 赞同：0
> 
> 时间：2012-10-23T19:23:03.387
> 
> 标签：asp.net, jquery, forms-authentication

我需要使用 FormsAuthentication 来验证使用 ajax 的用户的登录，我知道我不能使用 FormsAuthentication.RedirectFromLoginPage("UserName",false) 因为使用 ajax 时没有重定向。
我可以用什么来设置这个用户授权。
尝试使用：

```
FormsAuthentication.SetAuthCookie("UserName", false); 
```

但是这里有 cookie，我不想使用 cookie。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:29:30.980

您可以将表单身份验证的加密/解密/过期方面与请求/响应周期（例如 cookie）分开使用。

例如：您可以将身份验证令牌作为字符串获取，如下所示：

```
// create a ticket for "myusername" which expires in 15 minutes
string authToken = FormsAuthentication.Encrypt(new FormsAuthenticationTicket("myusername", false, 15)); 
```

然后，当使用通过某种自定义方法从用户那里接收它时（您并没有真正指定要使用什么来代替 cookie），您使用[FormsAuthentication.Decrypt](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.decrypt.aspx)来检查它是否有效。请注意，您必须捕获异常**并**检查 null 以检查有效性。

```
// decrypt receivedAuthToken string which was received somehow in your request
FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(receivedAuthToken); 
```

但是你也必须自己管理更新过程：

```
var newTicket = FormsAuthentication.RenewTicketIfOld(authTicket);
var newToken = FormsAuthentication.Encrypt(newTicket) 
```

# makefile - 构建共享库但链接到静态库

> ID：13037684
> 
> 赞同：0
> 
> 时间：2012-10-23T19:23:09.597
> 
> 标签：makefile, shared-libraries, static-libraries, autotools, configure

我有一个 Autogen Makefile.am，我试图用它来为共享库构建测试程序。为了构建我的测试二进制文件，我想继续将共享库构建为目标，但我希望静态链接测试程序。在过去的几个小时里，我一直在尝试制作我的 Makefile.am 来让它做到这一点。

*   我已经尝试显式更改 LDADD 行以使用库的 .a 版本并得到一个未找到文件的错误，即使我可以看到这个库正在构建。

*   我尝试通过 LDFLAGS 将 .libs 目录添加到我的链接路径中，但仍然找不到它。

*   我尝试将我的库源移动到我的测试源列表中，但这不起作用，因为可执行目标文件的构建方式与静态库的不同。

*   我什至尝试为 .a 版本复制一个 lib_LIBRARIES 条目（因此同时存在一个 lib_LTLIBRARIES 和一个 lib_LIBRARIES），并将共享版本的所有 LDFLAGS、SOURCES、dir 和 HEADERS 复制为静态版本的一部分（将*la*替换*为*form _a_SOURCES = _la_SOURCES. 这仍然行不通，因为现在它无法弄清楚要构建什么。

*   我的 configure.ac 文件使用的是默认的 LT_INIT，它应该给我静态库和动态库，正如我所说，即使 libtool 看不到 .a 文件，它也正在构建两者。

请问有谁知道这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:48:26.853

正如@Brett Hale 在他的评论中提到的那样，您应该告诉`Makefile.am`您希望程序是静态链接的。

要实现这一点，您必须附加`-static`到您的`LDFLAGS`.
通过更改`LDFLAGS`来更改特定二进制文件的`binary_LDFLAGS`（其中 binary 是您要构建的二进制文件的名称）。

所以这样的事情应该可以解决问题：

```
binary_LDFLAGS = $(AM_LDFLAGS) -static 
```

# ruby-on-rails - 设计 Rspec 注册控制器测试在更新时失败，就好像它正在尝试确认电子邮件地址一样

> ID：13037685
> 
> 赞同：7
> 
> 时间：2012-10-23T19:23:15.817
> 
> 标签：ruby-on-rails, rspec, devise, controller, registration

我有以下路线：

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks",
                                     :registrations => 'users/registrations',
                                     :sessions => "users/sessions" } 
```

和以下控制器测试（registrations_controller_spec.rb）：

```
require File.dirname(__FILE__) + '/../spec_helper'

describe Users::RegistrationsController do
  include Devise::TestHelpers
  fixtures :all
  render_views

  before(:each) do
    @request.env["devise.mapping"] = Devise.mappings[:user]
  end

  describe "POST 'create'" do

    describe "success" do
      before(:each) do
        @attr = { :email => "user@example.com",
                  :password => "foobar01", :password_confirmation => "foobar01", :display_name => "New User" }
      end

      it "should create a user" do
        lambda do
          post :create, :user => @attr
          response.should redirect_to(root_path)
        end.should change(User, :count).by(1)
      end

    end

  end

  describe "PUT 'update'" do
    before(:each) do
      @user = FactoryGirl.create(:user)
      @user.confirm! # or set a confirmed_at inside the factory. Only necessary if you are using the confirmable module
      sign_in @user
    end

    describe "Success" do

      it "should change the user's display name" do
        @attr = { :email => @user.email, :display_name => "Test", :current_password => @user.password }
        put :update, :id => @user, :user => @attr
        puts @user.errors.messages
        @user.display_name.should == @attr[:display_name]
      end

    end
  end

end 
```

现在，当我运行 rspec spec 我得到（我认为）是奇怪的结果：

“应该创建用户”测试通过。用户数增加了 1。

但是，我的“应该更改用户的显示名称”失败如下：

```
1) Users::RegistrationsController PUT 'update' Success should change the user's display name
     Failure/Error: @user.display_name.should == @attr[:display_name]
       expected: "Test"
            got: "Boyd" (using ==) 
```

奇怪的是我的声明：

```
puts @user.errors.messages 
```

呈现以下消息：

```
{:email=>["was already confirmed, please try signing in"]} 
```

这是怎么回事？用户已登录！Rspec 错误返回“Boyd”的显示名称这一事实证明了这一点。为什么它显示的消息看起来好像与帐户确认有关，而不是更新用户的详细信息？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:20:55.480

这行得通。感谢[holtkampw](https://stackoverflow.com/users/357811/holtkampw)看到我不是！我在那里放了一些额外的代码只是为了仔细检查，一切都很好！

```
it "should change the user's display name" do
  subject.current_user.should_not be_nil
  @attr = { :email => @user.email, :display_name => "Test", :current_password => @user.password }
  puts "Old display name: " + subject.current_user.display_name
  put :update, :id => subject.current_user, :user => @attr
  subject.current_user.reload
  response.should redirect_to(root_path)
  subject.current_user.display_name == @attr[:display_name]
  puts "New display name: " + subject.current_user.display_name
end 
```

# excel - 如何使用宏vb替换excel单元格中的&

> ID：13037686
> 
> 赞同：0
> 
> 时间：2012-10-23T19:23:30.590
> 
> 标签：excel, excel-2010, vba

下面是我的宏功能的一部分。(r,47) 的单元格值可以由用户输入。我想将输入的“&”替换为“&”，后跟“amp;”。（注意：卷积方法“&”后跟“amp;”用作 amp; 在此编辑器中被删除。”）

我尝试了替代，但是当我尝试保存宏时它给出了语法错误。

目前我的宏函数中有这个语句。

```
Print #fnum, "<College><School>" & Cells(r, 47) & "</School></College>" 
```

我尝试了下面的。

```
Print #fnum, "<College><School>" & Cells(r, 47).Substitute('&','&amp;') & "</School></College>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:33:18.553

1.  定义字符串时应该使用双引号。
2.  替补不行。它是一个工作表函数，而不是范围对象的方法。
3.  尝试使用 VBA 替换功能

    `Print #fnum, "<College><School>" & Replace(Cells(r, 47), "&", "&amp") & "</School></College>"`

# php - 我是否必须包含静态类才能使用它

> ID：13037687
> 
> 赞同：1
> 
> 时间：2012-10-23T19:23:32.527
> 
> 标签：php

我对 PHP 有点陌生。我编写了我想使用和调用的静态类，但是当我尝试调用它时，我遇到了致命错误，因为 php 类文件与调用文件不在同一目录中。我必须包含它才能使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:24:58.350

是的。用于`include`包含其他 PHP 文件。即使您的类文件在同一个目录中，您仍然需要包含它（显然，您也可以包含其他目录中的文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:25:05.410

是的。必须包含其他文件中的任何代码。`require()`如果您使用[自动加载器](http://php.net/manual/en/function.spl-autoload.php)，则可以避免显式加载该页面中的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:25:15.297

是的。必须加载该类才能使用它。这适用于实例化它或调用静态函数。使用 require、require_once、include 或 include_once 加载类文件。

# javascript - 基于锚值的动态表单输入

> ID：13037691
> 
> 赞同：0
> 
> 时间：2012-10-23T19:23:38.020
> 
> 标签：javascript, html, dynamic, anchor

我有以下打开单个模态表单的片段：

```
<a class="modalbox" id="foo" href="#inline">Request a Quote</a>
<a class="modalbox" id="bar" href="#inline">Request a Quote</a>
...and so on... 
```

不知何故，我需要在以下 HTML 表单中呈现输入“sub”中的 ID 值，并将 ID 与一些预定文本连接起来，即“我感兴趣...”

```
<form id="contact" name="contact" action="#" method="post">
    <input type="hidden" id="product" name="product" value="">
    <label for="sub">Subject:</label>
    <input type="sub" id="sub" name="sub" class="txt" value="I am interested in '$id'">
    <button id="send">Submit</button> 
```

我已经使用 Javascript 进行验证，使用 AJAX 处理 PHP 脚本。

编辑：这是已经用于填充上面隐藏输入的 Javascript，它运行良好：

```
$('a').click(function(e) {

 $('#product').val($(this).attr('id')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:13:11.013

我建议使用纯 JavaScript，例如：

```
function addTextToInput(from, to, prefix, e) {
    e = e || window.event;
    if (!from || !to) {
        return false;
    }
    else {
        from = from.nodeType == 1 ? from : document.getElementById(from);
        to = to.nodeType == 1 ? to : document.getElementById(to);
        var text = from.id;
        to.value = prefix ? prefix + ' ' + text : text;
    }
}

var as = document.querySelectorAll('a.modalbox');
for (var i = 0, len = as.length; i<len; i++) {
    as[i].onclick = function(e) {
        addTextToInput(this, 'sub', 'I am interested in', e);
    };
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CzBMK/)。

但鉴于您似乎已经在使用 jQuery：

```
$('a.modalbox').click(function(e){
    e.preventDefault();
    $('#sub').val('I am interested in ' + this.id);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CzBMK/2/)。

# ruby-on-rails - Rails 设计 - Facebook + Twitter +

> ID：13037692
> 
> 赞同：5
> 
> 时间：2012-10-23T19:23:40.460
> 
> 标签：ruby-on-rails, facebook, twitter, oauth, devise

我正在考虑将 devise gem 用于我正在开发的新 Rails 应用程序。我对一件事有点困惑。该应用程序将允许用户连接到 FB、Twitter 和可能的其他社交网络（Foursquare 等）。我知道使用 devise + omniauth-facebook 您可以允许用户通过 FB 用户注册到您的网站（或者同样适用于 twitter）。我只是想知道：如果您允许用户通过 FB 用户登录，然后您还想将同一用户连接到他/她的 twitter 帐户，devise 是否支持这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T01:46:11.263

您可以查看本教程，这解释了 Facebook 和 Twitter 的多重身份验证 + Devise 的普通用户注册过程： [http ://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and-devise/](http://www.orhancanceylan.com/rails-twitter-and-facebook-authentications-with-omniauth-and-devise/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T12:10:49.747

您可以使用[这个与所有流行的社交网络集成的示例源代码](https://github.com/mohitjain/social-login-in-rails)，即 Devise + Twitter + Facebook + Linkedin + Google + Github

*免责声明：我写了那个应用程序。如果您遇到任何问题。随时在 stackoverflow 上 ping 我或在 github 上打开一个问题。*

# javascript - jquery $.each 给了我一个没有 hasClass 方法的对象

> ID：13037703
> 
> 赞同：6
> 
> 时间：2012-10-23T19:24:36.310
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T19:26:46.577

Your first hint should be that the object is an `#<HTMLInputElement>` and not a jQuery object. Use `$(elem).hasClass('re');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:26:29.773

`elem` in your code is a DOM Element object, if you want to use jQuery methods you should create a jQuery object first:

```
if ($(elem).hasClass('re')) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:34:26.977

You make the class .re part of your jQuery selector and save the if/then:

```
function required(address)
{
    //object to hold elements not passing validation tests
    var pass = true;
    $('.required.re').each(function(index, elem) {
        console.log(elem);
        var validEmail = validateEmail(address.email);
        if (!validEmail){
            $(this).addClass('nv'); 
        }
    });
} 
```

# doctrine-orm - 为未定义字段插入 NULL 值的学说

> ID：13037704
> 
> 赞同：4
> 
> 时间：2012-10-23T19:24:39.430
> 
> 标签：doctrine-orm

我不知道这是否是一个错误，但我正在使用`Doctrine 2.3.0`，我发现这种`persist/flush`行为很奇怪。我有一个基本表：

```
------------------
|   test         |
------------------
| id   INT | AI  |
| field1 VARCHAR |
| field2 VARCHAR |
----------------- 
```

当我仅通过设置创建条目时`field1`：

```
$test = new Entities\test();
$test->setField1('foo');
$em->persist($test);
$em->flush(); 
```

`Doctrine\DBAL\Logging\EchoSQLLogger`告诉我（通过查看 来确认`DB`）`Doctrine`执行以下查询：

```
INSERT INTO test (field1, field2) VALUES (?, ?)
array(2) {
  [1]=>
  string(3) "foo"
  [2]=>
  NULL
} 
```

如您所见，虽然我没有设置`field2`，`Doctrine`但确实将它放在带有`NULL`值的插入语句中。

我的所有实体都有这种行为，这是有问题的，因为在进行插入时，我`DB`未设置的字段的默认值被覆盖`NULL`。

**这是 Doctrine 的预期默认行为吗，有没有办法关闭它（即排除我没有从`INSERT`语句中设置的字段）？**

我可能应该补充一点，我的实体是通过逆向工程自动生成的，并且其中一个字段的声明如下所示

```
/**
 * @var string $field2
 *                                       // removing nullalble makes no diff.
 * @ORM\Column(name="field2", type="string", length=45, nullable=true)
 */
private $field2;

/**
 * Set field2
 *
 * @param string $field2
 * @return Test
 */
public function setField2($field2)
{
    $this->field2 = $field2;
    return $this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:28:05.257

我想这是默认行为，因为在一个 INSERT 语句中创建完整记录可以被视为合乎逻辑。但我可能弄错了。拥有某种`@ORM\Column(type="boolean", columnDefinition="TINYINT(1) NULL DEFAULT 0")`可以被视为一种黑客攻击，但解决方案。我建议您查看数据库记录插入逻辑。

# javascript - 如何使用 ko.validation.group 函数

> ID：13037713
> 
> 赞同：32
> 
> 时间：2012-10-23T19:24:59.447
> 
> 标签：javascript, jquery, validation, knockout.js

我正在尝试使用 knockout.validation 插件。我创建了一个 exampleViewModel ：

```
function exampleViewModel() {
   this.P1 = ko.observable().extend({ required : true });
   this.P2 = ko.observable().extend({ required : true });
   this.P3 = ko.observable().extend({ required : true });
   this.P4 = ko.observable().extend({ required : true });

   this.errors = ko.validation.group(this);
} 
```

在上面的视图模型中，我为当前对象创建了一个名为 errors 的验证组。现在，如果任何验证规则在 4 个属性中的任何 1 个属性上失败，则此错误属性包含错误消息。

`My question is`，如果我想创建一个只有 4 个属性`(P1, P2, P3)`中的 3 个属性的验证组，我该怎么做？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-24T02:43:53.373

这对我来说效果很好。与其在 上进行分组，不如`this`创建一个代理对象来保存您要验证的属性。

```
this.errors = ko.validation.group({
    P1: this.P1,
    P2: this.P2,
    P3: this.P3
}); 
```

如果您这样做，请考虑使用`validatedObservable`而不是`group`. 您不仅会收到错误消息，而且可以使用该`isValid`属性共同检查所有属性是否有效。

```
this.validationModel = ko.validatedObservable({
    P1: this.P1,
    P2: this.P2,
    P3: this.P3
});

// is the validationModel valid?
this.validationModel.isValid();
// what are the error messages?
this.validationModel.errors(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-02T17:44:24.747

如[文档](https://github.com/Knockout-Contrib/Knockout-Validation/wiki/Validating-Only-Specific-Observables)中所述，仅验证特定 observables 的正确方法是：

```
this.errors = ko.validation.group([this.P1, this.P2, this.P3]); 
```

# xslt - 通过 configSource 链接到 web.config 的部分配置文件可以在 Web 项目中转换吗？

> ID：13037714
> 
> 赞同：8
> 
> 时间：2012-10-23T19:25:00.007
> 
> 标签：xslt, web-config, transform, appsettings, slowcheetah

寻求与 SlowCheetah 合作的任何人的帮助，以在 Web 项目下转换配置文件。我们发现从 web.config 引用的部分配置文件没有被转换。

例如，我们在 web.config 中包含了对部分配置 AppSettings.config 和 ConnectionsString.config 的引用，如下所示：

```
 </system.web>
  <connectionStrings configSource ="ConnectionsString.config"></connectionStrings>
  <appSettings configSource ="AppSettings.config"></appSettings>
</configuration> 
```

然后在 AppSettings.config 中，我们只有 AppSettings 部分，如下所示：

```
<appSettings>
  <add key="LostPasswordBCC" value="knock@timmons.com" />
</appSettings> 
```

最后在转换文件 AppSettings.Debug.config 我们有一些补充：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- For more information on using transformations 
     see the web.config examples at http://go.microsoft.com/fwlink/?LinkId=214134\. -->
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <appSettings >
    <add key="Release" value="Something" xdt:Transform="Insert" />
  </appSettings>
</configuration> 
```

显然，上面只是一个测试来查看转换发生，但我们发现在尝试预览转换时，我们得到的只是一个错误“处理转换时出错”。发布尝试也失败。

如果我们使配置文件完全形成 xml 并且不从 web.config 引用，则转换似乎工作正常 - 但希望在多个项目中共享这些文件。

有谁知道是否有一种解决方法，我们既可以从 web.config 引用部分配置，也可以转换这些部分文件？我们正在处理试图合并的多个 Web 项目中包含大量配置文件的遗留代码，因此需要从 Web 配置链接到单独的共享文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:43:20.647

问题已经解决，在 Sayed 的帮助下，我们确定在努力理解 Web 项目的配置转换过程时，我们损坏了转换配置文件的格式。通过新创建的配置文件，我们能够使用 SlowCheetah 进行转换。

这使我们能够继续解决我们需要解决的真正问题，即希望使用 Visual Studio 2012 的发布配置文件转换 web.config 以外的项目配置。这最初不起作用，但 Sayed 再次帮助我们并提供了一个新的 SlowCheetah 副本，它允许它工作。

以下是带有修复程序的新版 SlowCheetah 的链接：[https ://github.com/sayedihashimi/slow-cheetah/issues/46](https://github.com/sayedihashimi/slow-cheetah/issues/46)

非常感谢您付出的所有时间和耐心。

# css - CSS 类和元素选择

> ID：13037717
> 
> 赞同：-1
> 
> 时间：2012-10-23T19:25:10.460
> 
> 标签：css

有人可以解释两者之间的区别，

```
.class p {..} 
```

相对，

```
p.class {...} 
```

它们是使 CSS 应用于类 .class 和 P 标签的等效方法吗？还是有一些功能差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:26:56.873

`.class p`**是任何具有包含**段落标签的“类”类的东西。

`p.class`是一个带有“类”类的段落标签

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:26:47.043

不同之处在于

*   第一个选择器适用于具有“类”类的元素内的段落
*   第二个选择器适用于具有“类”类的段落

第一个选择器适用于内部 p 这里：

```
<someElement class="class">
     doesn't apply outside p
     <p>apply inside p</p>
</someElement> 
```

第二个选择器适用于此：

```
<p class="class">selector 2</p> 
```

[CSS 选择器参考](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:28:06.087

我建议查看[关于选择器的 w3c 规范](http://www.w3.org/TR/selectors/#selectors)

`.class p`选择具有类的元素的所有段落元素后代`class`

`p.class`选择所有*具有*类的段落元素`class`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T19:28:31.517

第一个 .class p{} 将寻找一个

第二个 p.class{} 将寻找一个

# java - 从提交表单创建动态/深度链接 URL

> ID：13037718
> 
> 赞同：1
> 
> 时间：2012-10-23T19:25:13.750
> 
> 标签：java, forms

我希望创建一个酒店预订表单，它会根据输入表单的信息自动生成一个 URL。

例如，如果有人输入“John”的姓名和日期“12/23/1989”，我需要该表单来生成 URL，例如“fakeurl.com/n=JOHNd=12231989”并自动定向到此链接提交表单时。

使用一些教程（我不太了解 Java），我能够拼凑起来： [http ://codepen.io/JeremyMG/pen/ptaGE](http://codepen.io/JeremyMG/pen/ptaGE)

但是，我不确定如何使字段与变量匹配。

如果有人可以帮助我或发布一个工作示例，那就太好了！多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:29:16.343

```
<form method="GET" action="https://fakeurl.com">
    <input type="text" name="n" value="john" />
    <input type="date" name="d" value="12/23/1989" />
    <input type="submit" value="submit" />
</form> 
```

将 FORM 标记的 METHOD 属性设置为 GET

# .htaccess - 在 htaccess 文件中限制 RewriteRule

> ID：13037721
> 
> 赞同：0
> 
> 时间：2012-10-23T19:25:20.740
> 
> 标签：.htaccess, url-rewriting, rewrite

我有一个基于 .htaccess 文件中的一些规则的[站点](http://netbureau.com.br/)php，以摆脱 url 地址栏中的文件扩展名。基本上它需要`http://netbureau.com.br/en/about.php/`并将其转换为`http://netbureau.com.br/en/about`.

以下是 htaccess 文件中的行：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

当我尝试访问博客的 rss 提要`http://netbureau.com.br/blog/?feed=rss2`以及尝试为博客设置自定义永久链接时，问题就出现了`http://netbureau.com.br/blog`。它被 htaccess 文件搞砸了。

那么有什么方法可以禁止该`/blog`文件夹的 RewriteRule，以便我可以取回我的 rss 链接并在博客中设置自定义永久链接？

我知道它同时与 Wordpress 相关，但感觉它与 htaccess 文件的联系比 Wp 更紧密。

提前致谢。

**编辑＃1**：我已经将wordpress永久链接设置为默认结构，如下所示：`http://netbureau.com.br/blog/?p=123`这使我的rss链接恢复正常。剩下的问题是 Wordpress 给了我自己的重写规则，即：

```
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L] 
```

有没有办法仍然使用第一条规则应用于除 /blo/ 文件夹之外的整个站点并将 WP 规则仅应用于 /blog/ 文件夹？我尝试了不同的组合，但到目前为止没有运气。我只能拥有没有博客的自定义链接或自定义博客链接以及网站页面上的 404 的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:57:35.700

尝试：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/blog/?
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

该`!^/blog/?`表达式不包括任何以`/blog`

# c# - Bing 会将地图的大小调整为坐标数组吗？

> ID：13037724
> 
> 赞同：2
> 
> 时间：2012-10-23T19:25:26.793
> 
> 标签：c#, windows-8, microsoft-metro, bing-maps

我想要做的是将一组坐标传递给 Bing 地图，然后让它显示所有航点/“图钉”，但只显示必要的“区域”。IOW，如果我传入的坐标都包含在卡拉维拉斯县东部，地图应该只显示那个区域，外围航点周围的边距很小。如果，OTOH，我通过一系列航路点，其中一个在瑞士，而其他人在斯威士兰，则地图应该是“缩小”的 - 从斯威士兰到瑞士显示，航路点不多也不少。

同样或因此，我希望地图居中：如果航点阵列位于旧金山和太浩湖，则 Elk Grove（或非常靠近它）应该位于地图的中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:10:06.303

在较旧的 API 中，有一个选项可以从一组点创建一个边界矩形，但这并未添加到控件的 Windows 商店版本中。边界矩形仍然存在，可用于设置地图范围，但您必须手动确定限制。

这可能会在未来的更新中改变，但对我来说，API 对于许多场景来说都感觉有点太轻了，包括你问的那个。

# php - PHP：如何从包含的文件中取消设置所有变量？

> ID：13037726
> 
> 赞同：2
> 
> 时间：2012-10-23T19:25:52.667
> 
> 标签：php, include, unset

PHP：如何从包含的文件中取消设置所有变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:30:30.300

您可能想查看[get_defined_vars()](http://php.net/manual/en/function.get-defined-vars.php)，但使用[命名空间](http://php.net/manual/en/language.namespaces.php)更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:30:07.913

就像是：

```
foreach($GLOBALS as $key => $val) {
    unset($GLOBALS[$key]);
} 
```

我永远不会这样做。正如一些评论者所说，研究命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:33:16.760

你不应该使用全局变量有两个原因

*   意大利面条代码
*   名称冲突

我无法解决其中的意大利面条代码部分，但我可以建议您将所有全局变量移到其自己的类中以避免名称冲突

您可以将它们设置为单个全局对象的静态属性，而不是设置全局变量

```
class Globals {
  public static global1 = 0;
  public static global2 = 2;
} 
```

并在您的代码中使用它们，例如

```
Globals::global1 = 5; 
```

这避免了名称冲突，但我仍然避免它并尝试在不诉诸全局变量的情况下实现我的代码。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-23T19:27:39.383

使用 unset();

前任。未设置（$_POST）；未设置（$_GET）；未设置（$数据）；

# java - Java Android AsyncTask + mysql 连接

> ID：13037730
> 
> 赞同：1
> 
> 时间：2012-10-23T19:26:14.363
> 
> 标签：java, android, mysql, android-asynctask

我有一个问题，我正在尝试使用`AsyncTask`. 我将连接代码放在按钮事件中，但它给了我错误，

这是代码：

```
 package com.example.mysqlconnect;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

  private static final String url = "jdbc:mysql://cool/app";
  private static final String user = "user";
  private static final String pass = "password";

/** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                Connect();
            }
        });
    }

  TextView tv = (TextView)this.findViewById(R.id.textView1);
  private class Connect extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
      String response = "";

      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con = DriverManager.getConnection(url, user, pass);
          // System.out.println("Database connection success"); 

          String result = "Database connection success\n";
          Statement st = con.createStatement();
          ResultSet rs = st.executeQuery("select * from users");
          ResultSetMetaData rsmd = rs.getMetaData();

          while(rs.next()) {
            result += rsmd.getColumnName(1) + ": " + rs.getInt(1) + "\n";
            result += rsmd.getColumnName(2) + ": " + rs.getString(2) + "\n";
            result += rsmd.getColumnName(3) + ": " + rs.getString(3) + "\n";
          }
          tv.setText(result);
      }
      catch(Exception e) {
          e.printStackTrace();
          tv.setText(e.toString());
      }
    return response;   

    }

    @Override
    protected void onPostExecute(String result) {
        tv.setText(result);
    }
  }

  public void Connect() {
    Connect task = new Connect();
      task.execute();

    }
} 
```

我是 AsyncTask 的新手，有人可以帮我找出错误吗？

这是日志猫：

```
 10-23 19:08:41.168: W/dalvikvm(1514): threadid=1: thread exiting with uncaught exception (group=0xb40ca180)
10-23 19:08:41.178: E/AndroidRuntime(1514): FATAL EXCEPTION: main
10-23 19:08:41.178: E/AndroidRuntime(1514): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.mysqlconnect/com.example.mysqlconnect.MainActivity}: java.lang.NullPointerException
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.os.Looper.loop(Looper.java:137)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at java.lang.reflect.Method.invokeNative(Native Method)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at java.lang.reflect.Method.invoke(Method.java:511)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at dalvik.system.NativeStart.main(Native Method)
10-23 19:08:41.178: E/AndroidRuntime(1514): Caused by: java.lang.NullPointerException
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.Activity.findViewById(Activity.java:1794)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at com.example.mysqlconnect.MainActivity.<init>(MainActivity.java:51)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at java.lang.Class.newInstanceImpl(Native Method)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at java.lang.Class.newInstance(Class.java:1319)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
10-23 19:08:41.178: E/AndroidRuntime(1514):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871) 
```

我在创建时删除了第二个，现在我在 logcat 中收到此错误：

```
10-23 19:10:29.129: E/AndroidRuntime(1565): FATAL EXCEPTION: main
10-23 19:10:29.129: E/AndroidRuntime(1565): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.mysqlconnect/com.example.mysqlconnect.MainActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:33:33.993

您的错误是：`TextView tv = (TextView)this.findViewById(R.id.textView1);`因为它是在`onCreate`.

所以这就是你必须做的，`TextView tv;`在上面声明`onCreate`。然后在里面`onCreate`添加`tv = (TextView) findViewById(R.id.textView1);`

并删除以下副本：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main); 
```

# jquery - .slideUp 和 .slideDown 突然停止正常工作

> ID：13037731
> 
> 赞同：2
> 
> 时间：2012-10-23T19:26:18.060
> 
> 标签：jquery, html

我目前负责这个插图网站，该网站有一个图片库，直到最近它都运行良好。它有一个流畅的 slideUp slideDown 动画，每个人都很高兴。然后突然之间，这种平滑不再起作用，图像现在到处乱晃。也许这与最近的 JQuery 更新有关，或者我的代码中可能存在明显错误？

这是此处图片库的 JQuery：

```
(function() {
    var nav = $('.nav div');
    var images = $('.images li');
    var imagebutton = $('.images li:not(:last) > img');
    $('.images li:first-child').slideDown(500);
    nav.click(function() {
        var imageno = nav.index(this);
        images.slideUp(500);
        images.eq(imageno).slideDown(500);
        return false;
    });
    imagebutton.click(function() {
        $(this).parent(images).slideUp(500).next().slideDown(500);
        return false;
    });
})();​ 
```

您可以在此处查看实时示例：

[http://www.gloryillustration.com/tests/nodland.html](http://www.gloryillustration.com/tests/nodland.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:31:22.067

因为`slideUp`and`slideDown`方法是异步的，一旦你调用一个，下一行代码就会被执行……也就是说，一旦你向上滑动，你现在在动画完成之前就向下滑动了。但是，这些方法中的每一个都有一个回调，一旦动画完成就会调用它。尝试类似：

```
$('#el').slideUp(500, function() { $('#el2').slideDown(500); }); 
```

slideUp 中的第二个参数将在 500 毫秒动画后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:48:48.547

如果您重复选择相同的图像，我会延迟并修复跳转。

```
if ($(this).parent() != $(this).next().parent())
{
    $(this).parent(images).slideUp(500).next().delay(500).slideDown(500);
} 
```

# c++ - 构造函数列表中带有多个参数的构造函数不起作用 C++

> ID：13037735
> 
> 赞同：0
> 
> 时间：2012-10-23T19:26:32.347
> 
> 标签：c++, xcode, constructor, g++, initialization

我正在尝试编译具有 B 类成员的 A 类，其中 B 类没有默认构造函数，它唯一的构造函数需要多个参数。很简单，对吧？显然不是...

A类：

```
class SessionMediator
{
 public:
  SessionMediator()
      : map_(16,100,100)
  {}

  Tilemap map_, background_, foreground_;
}; 
```

B类：

```
struct Tile2D;

class Tilemap
{
 public:
  Tilemap(const unsigned int tile_size, const unsigned int width, 
          const unsigned int height)
      : tiles_(NULL), tile_size_(tile_size)
  {
    Resize(width, height);
  }

  inline void Resize(const unsigned int width, const unsigned int height)
  { /* Allocate tiles & assign to width_, height_... */ }

  unsigned int tile_size_, width_, height_;
  Tile2D* tiles_;
}; 
```

我正在像这样实例化 SessionMediator：

```
int main(int argc, char** argv)
{
  SessionMediator session;
  return 0;
} 
```

这是我得到的错误。我在 Mac OS 10.5.8 上的 XCode 中编译，编译器是 g++：

```
session_mediator.h: In constructor 'SessionMediator::SessionMediator()':
session_mediator.h:19: error: no matching function for call to 'Tilemap::Tilemap()'
tilemap.h:31: note: candidates are: Tilemap::Tilemap(unsigned int, unsigned int, unsigned int)
tilemap.h:26: note:                 Tilemap::Tilemap(const Tilemap&)
session_mediator.h:19: error: no matching function for call to 'Tilemap::Tilemap()'
tilemap.h:31: note: candidates are: Tilemap::Tilemap(unsigned int, unsigned int, unsigned int)
tilemap.h:26: note:                 Tilemap::Tilemap(const Tilemap&)

(Duplicate of above here)
Build failed (2 errors) 
```

我写了一个简短的可编译示例做基本相同的事情，试图找出我到底做错了什么，它编译得很好，在 g++ 中没有错误：

```
class A
{
 public:
  A(int x, int y, int z)
      : x_(x), y_(y), z_(z)
  {}  

  int x_, y_, z_; 
};

class B
{
 public:
  B() 
    : m_a(1,2,3)
  {}  

  A m_a;
};

int main(int argc, char **argv)
{
  B test;
  return 0;
} 
```

为什么它在第一个示例中失败？Tilemap 的 3 arg 构造函数（在 Ex#1 中）的调用方式与 A 的 3 arg 构造函数的调用方式（在 Ex#2 中）相同。

在这两个示例中，代码似乎与我几乎相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:37:36.427

当我试图稍微简化我的示例时，我不小心遗漏了两件重要的事情：SessionMediator 类中的其他数据成员。

问题是我有两个额外的 Tilemap 类成员（“background_”和“foreground_”），它们没有像第一个成员“map_”那样在构造函数初始化列表中初始化。

构造函数应更改为：

```
SessionMediator()
    : map_(16,100,100), background_(1,1,1), foreground_(1,1,1)
{} 
```

对于在这个问题上浪费的任何时间，我深表歉意；事实证明，事情要简单得多。希望其他人会看到这个问题并意识到他们所犯的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:10:00.737

尝试放入`map_(16u,100u,100u)`SessionMediator 构造函数调用以使常量无符号。这是现在唯一想到的事情:-)。

这对我来说编译得很好：

```
class Tilemap
{
public:
    Tilemap(const unsigned int tile_size, const unsigned int width, 
        const unsigned int height)
    {
    }
};

class SessionMediator
{
public:
    SessionMediator(): map_(16u,100u,100u){}

    Tilemap map_;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:42:45.167

我唯一能想到的是，如果您使用的是`copy constructor`：

`SessionMediator a = b;`或者`SessionMediator a (b);`

您可能会遇到默认复制构造函数`SessionMediator`会尝试使用默认构造函数的情况，`Tilemap`这会导致您遇到错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T19:30:37.040

好吧，当你这样做时：

```
 Tilemap map_; 
```

您正在调用默认 ctor - 但您没有定义一个，这是错误消息。

额外的：

```
 Tilemap::Tilemap(const Tilemap&) 
```

C++ 生成一个为您提供参考的 ctor。所以有效的匹配是（1）你定义的那个需要 3 个 args 和（2）自动生成的那个需要 const ref。

# dotnetnuke - DNN 5.6 友好网址

> ID：13037737
> 
> 赞同：1
> 
> 时间：2012-10-23T19:26:43.237
> 
> 标签：dotnetnuke

我正在使用 DNN 5.6.3，只需要将一个 url 重定向到一个页面

url 是[http://domain.com/schmooze](http://domain.com/schmooze)，它应该重定向到[http://domain.com/schmooze.aspx](http://domain.com/schmooze.aspx)

我在 HOST 的友好 url 部分找到：。*/闲聊。* 替换为：~/Default.aspx?TabId=258

但我收到 404（未找到）错误 - 我的友好网址错了吗？我是否缺少其他东西-似乎这应该在 url 重写器中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:47:47.320

尝试这个。

打开 DNN 根目录中的 SiteUrls.config 并将其放入：

```
<RewriterRule>
  <LookFor>(.*)/schmooze</LookFor>
  <SendTo>~/schmooze.aspx</SendTo>
</RewriterRule> 
```

您需要确保所有 IIS 请求都映射到 asp.net 进程。为此，请在 web.config 中进行设置。

```
<modules runAllManagedModulesForAllRequests="true"> 
```

此页面上有关 IIS 的更多信息： [http ://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview](http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview)

如果您想通过 DotNetNuke 的 UI 开始执行此操作。我使用来自 iFinity 的 UrlMaster：

[http://store.dotnetnuke.com/home/product-details/ifinity-url-master-26---total-dotnetnuke-url-solution](http://store.dotnetnuke.com/home/product-details/ifinity-url-master-26---total-dotnetnuke-url-solution)

# php - PhP 多维数组将索引连接在一起

> ID：13037741
> 
> 赞同：0
> 
> 时间：2012-10-23T19:26:52.503
> 
> 标签：php

让我首先说我对 php 相当陌生。我正在尝试创建一个多维数组，但是当我查看结果时遇到了一个奇怪的结果。我感觉我使用的语法不正确，但无法在线验证。所以我在这里提出这个问题。

这是我正在尝试做的事情的要点：

```
// Given: $row["foo"] == "Hello" && $row["bar"] == 1

while($row = mysqli_fetch_array($query_result, MYSQLI_ASSOC)){
    $multiArray[$i] = $row["foo"];
    $multiArray[$i]["lorem"] = $row["bar"];
    $i++;   
} 
```

当我去打印时，`$multiArray[$i]`我得到：`1ello`。

正如我所说，我相信错误在于我如何分配这个多维数组的语法。有人可以帮我找到与上面的 php madness 类似的方法（我只能猜测）吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:31:39.677

您不能将数据类型组合在同一个数组值中。

`$multiArray[$i]`只能有一个值类型（字符串、整数或数组），但在您的代码中，您需要同时拥有一个数组和一个字符串！

一个可能的解决方案是（但取决于你的逻辑）：

```
while($row = mysqli_fetch_array($query_result, MYSQLI_ASSOC)){
    $multiArray[$i]["lorem_string"] = $row["foo"];
    $multiArray[$i]["lorem"] = $row["bar"];
    $i++;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:38:01.930

您实际上是首先为 $multiArray[$i] 分配一个字符串“hello”，然后尝试在下一行为其分配一个数组。

相反，您需要将第一个分配给一个数组，然后该数组可以包含字符串或整数或更多数组或其他任何东西

此外，在这种情况下明确地做事也将帮助您了解正在发生的事情。

例如：

```
$i = 0; // explicit initialization of $i
while($row = mysqli_fetch_array($query_result, MYSQLI_ASSOC)){
    $multiArray[$i] = array(); // explicit initialization of array
    $multiArray[$i]["foo"] = $row["foo"];
    $multiArray[$i]["lorem"] = $row["bar"];
    $i++;   
} 
```

然后，如果您想要 "hello"`echo $multiArray[$i]["foo"];`并且想要 1 `echo $multiArray[$i]["lorem"];`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:32:06.980

因为首先您分配`$multiArray[$i] = $row["foo"];`so`$multiArray[$i]`将是一个带有示例值`Hello`的字符串，然后您将字符串的`lorem`索引分配给`$multiArray[$i]["lorem"] = $row["bar"];`. `lorem`评估为`0`，所以输出将 ve`1ello`

**编辑**：新版本的 PHP 也应该产生警告。

# jquery - 在 dataFilter 中捕获 http 代码状态

> ID：13037747
> 
> 赞同：2
> 
> 时间：2012-10-23T19:27:20.587
> 
> 标签：jquery

如何在 dataFilter 中捕获 http 代码状态？有以下代码：

```
$.ajaxSetup ({
    dataFilter: function (data) {
      //need know http status for change data

      return data;
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:36:47.687

您不能使用 dataFilter 执行此操作。从文档：

> **dataFilter(data, type)Function** 用于处理 XMLHttpRequest 的原始响应数据的函数。这是一个过滤响应的预过滤函数。您应该返回经过清理的数据。该函数接受两个参数：从服务器返回的原始数据和“dataType”参数。

另外`ajaxSetup`，您引用的内容用于定义进行 jQuery ajax 调用时的默认 ajax 设置。该代码实际上并没有进行 ajax 调用。

jQuery ajax 方法有一个`statusCode`属性可以满足您的需求。您还可以根据结果状态代码使用`success`和调用哪个。`error`

在文档中阅读所有这些内容：[jQuery.ajax() API](http://api.jquery.com/jQuery.ajax/)

# sql - Crystal Reports 需要按派生日期范围分组

> ID：13037749
> 
> 赞同：5
> 
> 时间：2012-10-23T19:27:30.130
> 
> 标签：sql, plsql, group-by, date-range, crystal-reports-2010

长期倾听者，第一次来电者。我正在使用水晶报表 2010。

如果交易量没有变化，我需要将每日交易信息组合在一起。这是数据的样子。

# 交易# BegDate EndDate 交易量

```
1        1/1/2012    1/2/2012    500
1        1/2/2012    1/3/2012    500
1        1/3/2012    1/4/2012    1000
1        1/4/2012    1/5/2012    750
1        1/5/2012    1/6/2012    750
1        1/6/2012    1/7/2012    500
1        1/7/2012    1/8/2012    500
1        1/8/2012    1/9/2012    500 
```

我需要它看起来像这样。

# 交易# DateRange 交易量

```
1        1/1/2012 - 1/3/2012  500
1        1/3/2012 - 1/4/2012  1000
1        1/4/2012 - 1/6/2012  750
1        1/6/2012 - 1/9/2012  500 
```

我需要按派生日期范围进行分组，但我不确定如何使用 Crystal 来完成此操作。有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T22:08:11.707

```
with w as (
 select 1 id, to_date('1/1/2012', 'mm/dd/yyyy') start_date, to_date('1/2/2012', 'mm/dd/yyyy') end_date, 500 sales_volume from dual
 union all
 select 1, to_date('1/2/2012', 'mm/dd/yyyy'), to_date('1/3/2012', 'mm/dd/yyyy'), 500 from dual
 union all
 select 1, to_date('1/3/2012', 'mm/dd/yyyy'), to_date('1/4/2012', 'mm/dd/yyyy'), 1000 from dual
 union all
 select 1, to_date('1/4/2012', 'mm/dd/yyyy'), to_date('1/5/2012', 'mm/dd/yyyy'), 750 from dual
 union all
 select 1, to_date('1/5/2012', 'mm/dd/yyyy'), to_date('1/6/2012', 'mm/dd/yyyy'), 750 from dual
 union all
 select 1, to_date('1/6/2012', 'mm/dd/yyyy'), to_date('1/7/2012', 'mm/dd/yyyy'), 500 from dual
 union all
 select 1, to_date('1/7/2012', 'mm/dd/yyyy'), to_date('1/8/2012', 'mm/dd/yyyy'), 500 from dual
 union all
 select 1, to_date('1/8/2012', 'mm/dd/yyyy'), to_date('1/9/2012', 'mm/dd/yyyy'), 500 from dual      
 )

,t as (select sales_volume
             ,start_date
             ,end_date 
             ,lag (sales_volume,1) over (order by start_date) prev_sales_volume
       from w
       order by start_date)
,u as (select *
       from t 
       where nvl(prev_sales_volume,-1) != sales_volume
       order by start_date)
select start_date
      ,nvl(lead (start_date,1) over (order by start_date),(select max(end_date) from w))   end_date 
      ,sales_volume
from  u
order by start_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:57:24.550

我会使用“X-2”抑制函数来隐藏每一行中除最后一行之外的所有内容，并使用 Previous() 和 Next() 来查找端点。

按 BegDate 分组；抑制细节和组页脚部分。

在组标题的某处创建一个 {@UpdateCurrentBegDate} 函数

```
WhilePrintingRecords;    
Global DateVar CurrentBegDate;

If PreviousIsNull({table.Volume}) or Previous({table.Volume}) <> {table.Volume}
    Then ( //We found a new range
        CurrentBegDate = {table.BegDate};
     );

""; //Display nothing on screen 
```

还有一个 {@DisplayBegDate} 函数，您当前在其中显示 BegDate

```
EvaluateAfter({@UpdateCurrentBegDate});
Global DateVar CurrentBegDate; 
```

转到 Section Expert 并单击 Suppress 选项旁边的“X-2”（对于组标题部分）。这是那里的公式

```
Not(NextIsNull({table.Volume}) or Next({table.Volume}) <> {table.Volume}) 
```

如果您需要进行总计或其他计算，您可以在 {@UpdateCurrentBegDate} 函数中进行（并且您希望将名称更改为 {@UpdateCurrentValues} 或类似名称）。如果您只想在组更改时更改内容，您还可以创建一个检查 Next() 信息的新函数——使用默认总计函数将包括隐藏值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:29:39.740

这是我能想到的最优雅的解决方案

```
WITH DirectTrades(tradeid, SourceDate, EndDate, Volume, Row, KillRow, Depth) AS 
(
    SELECT  tradeid
            BegDate AS SourceDate, 
            EndDate,
            Volume,
            ROW_NUMBER() over (partition by Table# order by BegDate) AS Row,
            ROW_NUMBER() over (partition by Table# order by BegDate) AS KillRow,
            0 AS Depth
    FROM    Trade
    UNION ALL
    SELECT  t1.Tradeid
            dt.SourceDate, 
            t1.EndDate, 
            t1.Volume, 
            dt.Row, 
            dt.Row + dt.Depth + 1,
            dt.Depth + 1
    FROM    Trade AS t1
            INNER JOIN 
            DirectTrades AS dt ON 
                    t1.BegDate=dt.EndDate AND 
                    t1.Volume=dt.Volume AND
                    t1.tradeid=dt.Tradeid
)

SELECT  dt1.Tradeid
        dt1.SourceDate,
        dt1.EndDate,
        dt1.Volume 
FROM    DirectTrades dt1
        INNER JOIN
        (
        SELECT dt2.Row, 
                MAX(dt2.KillRow) AS KillRow
        FROM    DirectTrades dt2
        WHERE   dt2.Row NOT IN
                (
                SELECT dt3.KillRow
                FROM    DirectTrades dt3
                WHERE   dt3.Depth <> 0  
                )
        GROUP BY    dt2.Row
        ) dt4 ON dt1.Row=dt4.Row AND dt1.KillRow=dt4.KillRow 
ORDER BY SourceDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:04:50.167

```
with w as (
     select 1 id, to_date('1/1/2012', 'mm/dd/yyyy') db, to_date('1/2/2012', 'mm/dd/yyyy') de, 500 s from dual
     union all
     select 1, to_date('1/2/2012', 'mm/dd/yyyy'), to_date('1/3/2012', 'mm/dd/yyyy'), 500 from dual
     union all
     select 1, to_date('1/3/2012', 'mm/dd/yyyy'), to_date('1/4/2012', 'mm/dd/yyyy'), 1000 from dual
     union all
     select 1, to_date('1/4/2012', 'mm/dd/yyyy'), to_date('1/5/2012', 'mm/dd/yyyy'), 750 from dual
     union all
     select 1, to_date('1/5/2012', 'mm/dd/yyyy'), to_date('1/6/2012', 'mm/dd/yyyy'), 750 from dual
     union all
     select 1, to_date('1/6/2012', 'mm/dd/yyyy'), to_date('1/7/2012', 'mm/dd/yyyy'), 500 from dual
     union all
     select 1, to_date('1/7/2012', 'mm/dd/yyyy'), to_date('1/8/2012', 'mm/dd/yyyy'), 500 from dual
     union all
     select 1, to_date('1/8/2012', 'mm/dd/yyyy'), to_date('1/9/2012', 'mm/dd/yyyy'), 510 from dual      
     )

select tmin.db, tmax.de, tmin.s
from
(     
  select 
       row_number() over (order by db) id,
           db,
           s
  from   
  ( 
      select
           db,
           s,
           case 
                  when ps is null
                       then 1
                  when ps != s
                       then row_number() over (order by db) 
               else 0 end num
       from (

           select 
                   (db)
                  , (de)
                  , lag (s,1) over (ORDER BY db) ps                
                  , s

           from w
           ) t
  ) t1
  where num != 0
 ) tmin,

 (select 
     row_number() over (order by db) id,
         de,
         s
from   
(      
    select
           db,
             de,

             s,
             case 
                when ps is null
                     then 1
                when ps != s
                     then row_number() over (order by de desc) 
             else 0 end num
     from (

         select 
                  db
                ,(de)
                , lag (s,1) over (ORDER BY de desc) ps                
                , s                

         from w
         order by db
         ) t
 ) t1
where num != 0) tmax

where tmin.id = tmax.id 
```

# android - 循环中的 TextSwitcher setText 无法正常工作？

> ID：13037752
> 
> 赞同：1
> 
> 时间：2012-10-23T19:27:40.023
> 
> 标签：android

我正在编写一个像数字轮车一样的 Android 应用程序。我使用 TextSwitcher 和一个循环来更改文本。假设循环中的每个数字都会从左向右滑动。但结果并不如预期。只有最后一个数字滑入，似乎没有数字滑出。有人能帮忙吗？这与UI更新有关吗？

这是我的代码。

```
package net.pixelstech.counter;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.Gravity;
import android.view.Menu;
import android.widget.TextSwitcher;
import android.widget.TextView;
import android.widget.ViewSwitcher;
import android.view.View;

public class MainActivity extends Activity implements ViewSwitcher.ViewFactory{
private TextSwitcher mSwitcher;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mSwitcher=(TextSwitcher)findViewById(R.id.count_id);
    mSwitcher.setFactory(this);

    mSwitcher.setInAnimation(this,android.R.anim.slide_in_left);
    mSwitcher.setOutAnimation(this,android.R.anim.slide_out_right);

    GeneralCountAsyncTask cat=new GeneralCountAsyncTask();
    cat.execute();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public View makeView() {
    TextView t = new TextView(this);
    t.setGravity(Gravity.CENTER | Gravity.CENTER_HORIZONTAL);
    t.setTextSize(70);
    t.setTextColor(Color.RED);
    return t;
}

private void startAnimate(final int from,final int to){
    for(int i=from;i<to;++i){
        mSwitcher.setText(String.valueOf(i));   
    }
}

public class GeneralCountAsyncTask extends AsyncTask<Void,String,Void>{
    @Override
    protected Void doInBackground(Void...v){
        while(true){
            try {
                publishProgress("");
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    @Override
    protected void onProgressUpdate(String...values){
        startAnimate(1,3);
    }
}
} 
```

这是我正在使用的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">
<TextSwitcher android:id="@+id/count_id"
    android:layout_width="fill_parent"
    android:layout_height="80dip"
    android:layout_gravity="center"
>
</TextSwitcher> 
```

希望有人可以提供帮助。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-23T20:24:35.020

您是否尝试过将幻灯片右侧动画放在左侧幻灯片之前？我尝试了带有图像和文本切换器的淡入淡出动画，并遇到了类似的问题。

# position - Opencart 标头模块仅显示主页

> ID：13037753
> 
> 赞同：0
> 
> 时间：2012-10-23T19:27:42.647
> 
> 标签：position, opencart

完成此处的所有步骤[opencart 1.5 how to add module in a header](https://stackoverflow.com/questions/7421790/opencart-1-5-how-to-add-module-in-a-header)。

但该位置显示在所有方案中。如何仅在主页上输出位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:13:11.170

尝试将上述教程中的代码包装为：

```
if (!isset($this->request->get['route']) || $this->request->get['route'] == 'common/home') {

   //code here

} 
```

# javascript - 如何使用 jquery/javascript 获取 url 变量？

> ID：13037762
> 
> 赞同：0
> 
> 时间：2012-10-23T19:28:27.400
> 
> 标签：javascript, jquery, cfc

我想从链接中获取 URL 请求变量并将它们传递给 CFC 组件。我已经有可以处理所有事情的工作代码（jQuery、AJAX、CFC），但我只需`#URL.whatever#`要从特定链接中获取。

在 Coldfusion 代码中，我可以轻松地做到这一点，`#URL.whatever#`但不知道如何从客户端获取它。另外，我是否一直在使用 IIS URL 重写是否重要？我目前正在重写`www.website.com/page.cfm?category=cat1`到`www.website.com/page/cat1`.

在这两种情况下，Coldfusion 都可以使用 访问请求变量`#URL.category#`，绝对没有区别。那么如何使用 JavaScript/jQuery 来做到这一点，它不应该很复杂，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:46:58.427

This question提出了一种获取变量的方法，我发现它比Blaise的正则表达式更容易理解。它还 [使用 Dojo 正确地从 URL Get Querystring 中取消编码值](https://stackoverflow.com/questions/7825329/get-querystring-with-dojo/7825382#7825382)

```
function getUrlParams() {

  var paramMap = {};
  if (location.search.length == 0) {
    return paramMap;
  }
  var parts = location.search.substring(1).split("&");

  for (var i = 0; i < parts.length; i ++) {
    var component = parts[i].split("=");
    paramMap [decodeURIComponent(component[0])] = decodeURIComponent(component[1]);
  }
  return paramMap;
}

var params = getUrlParams();
console.log(params.myParam); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:31:34.703

好吧，我们需要更多详细信息来建议如何获取对链接的引用，但这样的事情应该可以工作：

HTML

```
<a id="mylink" href="www.website.com/page.cfm?category=cat1">Website.com</a> 
```

JS

```
var href = document.getElementById( 'mylink' ).href; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:31:40.363

对，您要使用的是解析 window.location.href 变量的函数。

```
var URL_PARAM = getUrlVars()["category"]; 
```

或者，如果您页面的 URL 是 www.website.com/page.cfm?category=cat1&anotherparam=12345

```
var URL_PARAM1 = getUrlVars()["category"];
var URL_PARAM2 = getUrlVars()["anotherparam"]; 
```

我不能确定它会如何处理 URL 重写。

网址变量：

```
function getUrlVars() {
    var vars = {};
    var parts =window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[ decodeURIComponent(key)] = decodeURIComponent(value);
    });
    return vars;
} 
```

# excel - 在 VBA 中更改单元格数据类型？

> ID：13037765
> 
> 赞同：2
> 
> 时间：2012-10-23T19:28:39.167
> 
> 标签：excel, vba, math

我正在用 excel 编写一个应用程序，可以帮助您学习完成平方过程。如果变量是整数，我希望将单元格格式化为数字，如果不是，则格式化为分数。

```
If h = (Int(h)) Then
Range("D1").Select
Selection.NumberFormat = "Number"
Else
Range("D1").Select
Selection.NumberFormat = "?/?"
End If 
```

此代码由于某种原因不起作用，给我以下错误：

> 无法设置 Range 类的 NumberFormat 属性

我还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:35:17.977

尝试：

```
If h = (Int(h)) Then
Range("D1").Select
Selection.NumberFormat = "0"
Else
Range("D1").Select
Selection.NumberFormat = "# ?/?"
End If 
```

但是，如果将整数格式化为分数，它仍将显示为整数（即​​“1”，因为分数仍为“1”）。那么，为什么不将其格式化为分数呢？

# c++ - 如何在不使用 cmath 的情况下返回数字的上限

> ID：13037767
> 
> 赞同：2
> 
> 时间：2012-10-23T19:28:51.953
> 
> 标签：c++

如何在不使用 cmath 的情况下获得 double 类型的两个输入的下限：如果第一个输入为负，这就是它的工作原理，但对于不确定哪里出错的正整数则不起作用？任何见解表示赞赏..谢谢

```
 int main()
{
 floors=floor(n1);
 cout<< " The floor of value 1 is " <<floors<<endl;
 floors=floor(n2);
 cout<<" The floor of value 2 is " <<floors<<endl;

long floor(long f)
{
  if( (f+ 0.5) >= (int(f)-1) )
  return int (f)-1;
  else 
  return int (f);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:37:03.763

将其更改为：

```
long floor(double f)
{
    if( f >= 0.0 ) {
        return int(f);
    } else {
        return ( int(f) - 1 );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:35:34.060

```
double floor(double d)
{
    if(d>0)return static_cast<double(static_cast<int>(d));
    return static_cast<double>(static_cast<int>(d-1));
} 
```

这是实现 floor() 的一种方法。

# jquery - 在 jQuery 验证方法中进行 ajax 调用是不好的做法吗？或者，更好的方法？

> ID：13037774
> 
> 赞同：1
> 
> 时间：2012-10-23T19:29:09.053
> 
> 标签：jquery, asp.net-mvc, jquery-validate

我们的应用程序使用 ASP.NET MVC 3，我想利用创建在客户端和服务器端都有效的自定义验证属性。

用户将在输入字段中输入医师编号。然后使用该值检查输入的医师编号是否实际有效。这需要调用数据库。我的验证方法中有一个 ajax 调用。这可以正常工作，但仅当 async 设置为 false 时。

```
<script type="text/javascript">
    $.validator.setDefaults({
        debug: true,
        onkeyup: false,
        onclick: false,
        focusInvalid: false
    })

    $.validator.addMethod('physician', function (value, element, params) 
    {
        var request = $.ajax({
            type: "POST",
            url: "@Url.Content("~/patient/GetPhysicianById")",
            data: { physicianNumber: value },
            async: false,
            beforeSend: function(xjhr, settings) {                                                                            
                var siblings = $(element).siblings('.physician-response');                    
                //$(siblings[0]).html("<img src=\"/content/images/ajax-loader.gif\" />");            
            }                
        });

        console.log(request);            

        if(request.responseText == "0")
            return false;

        return true;
    });

    $.validator.unobtrusive.adapters.add('physician', ['param1', 'param2'], function (options) {
        options.rules['physician'] = options.params;
        options.messages['physician'] = options.message;
    });

</script> 
```

在表格上，有三种不同的医生输入将触发此方法。每次模糊丢失时，它都会再次运行这些调用。当用户单击保存时也会运行。我不确定这是否真的是正确的方法，或者我应该以单独的方式处理此验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:46:05.807

您可能会查看[`[Remote]`](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)执行此类验证的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:48:53.923

最常见的做法是在服务器上进行比在客户端上更严格的验证。

因此，邮政编码是针对客户端上的正则表达式进行验证的，但会针对来自服务器的邮政编码服务进行检查。或类似的东西。这样做的原因是大多数常见的错误可以在没有服务器往返的情况下修复，但如果你绕过它，最好确保用户没有犯任何需要稍后重新访问的错误。

这是否适合您的情况取决于您自己。

# plugins - joomla 上的 tinymce 编辑器。安装插件

> ID：13037779
> 
> 赞同：1
> 
> 时间：2012-10-23T19:29:16.530
> 
> 标签：plugins, joomla, tinymce

我已经为 Joomla 下载了 tinymce 编辑器的插件。我已将所有文件粘贴到 Joomla 下 tinymce 的插件文件夹中。之后，自述文件声称：

```
Then in the tinymce init function make sure you include the Bold lines.

<script language="javascript" type="text/javascript">
tinyMCE.init({
mode : "textareas",
theme : "advanced",
theme_advanced_toolbar_location : "top",
auto_resize:false,
extended_valid_elements: "textarea[name|class|cols|rows]", 
remove_linebreaks : false, 
width:720,
plugins : 'preview,codehighlighting',
theme_advanced_toolbar_align : "right",
theme_advanced_buttons1_add : " fontselect,fontsizeselect,zoom",
theme_advanced_buttons2_add : "preview,separator,forecolor,backcolor",
theme_advanced_buttons3_add_before : "tablecontrols, codehighlighting"

});
</script> 
```

我需要在哪里粘贴该代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:44:08.790

您提供的网站中的说明写得不好，因此我不太确定您必须在哪里插入该代码在您的问题中。

我个人会使用[Code Highlighter](http://www.codeis.com/codehighlighter) Joomla 扩展。我们在我们的网站上使用了他，它就像一个魅力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:37:57.530

您需要将此类代码放置在存储/读取 tinymce 配置的位置。要找出它在哪里 -[这是一个带有详细解释的教程。](http://joomla.boastworthy.com/how-to/21-configure-the-tinymce-editor-in-joomla.pdf)

# xsd - 如何根据上下文使 XSD 元素成为必需或不需要？

> ID：13037783
> 
> 赞同：4
> 
> 时间：2012-10-23T19:29:40.503
> 
> 标签：xsd, xsd-validation

我们有一个 Person 元素的定义，我们希望根据他们在做什么需要不同的元素。例如，如果他们正在添加一个人，那么需要发送不同的元素而不是更新一个人。在下面的示例中，Person 类型当前是重复的，这当然是错误的。有没有一种在 xsd 中表示它的好方法，以便我们可以重用 Person 类型。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:complexType name="Person">
        <xs:annotation>
            <xs:documentation>This is the definition when changing a person</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="PartyName" type="xs:string" minOccurs="0" maxOccurs="1"/>
            <xs:element name="GenderCode" type="GenderCode_Type" minOccurs="0" maxOccurs="1"/>
            <xs:element name="BirthDate" type="xs:date" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="Person">
        <xs:annotation>
            <xs:documentation>This is the definition when adding a person</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="PartyName" type="xs:string" minOccurs="1" maxOccurs="1"/>
            <xs:element name="GenderCode" type="GenderCode_Type" minOccurs="1" maxOccurs="1"/>
            <xs:element name="BirthDate" type="xs:date" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>   
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T00:23:21.873

为 Person 元素设置两种不同类型的最简单方法是在您想到的两种不同上下文中使用 Person 的本地声明。例如，你可能会说：

```
<xs:element name="Add">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Person" type="AddPerson"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:element name="Update">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Person" type="ChangePerson"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

此示例假定您已将两个复杂类型重新定义为 AddPerson 和 ChangePerson。

如果您还想让这两个复杂类型显式相关，则可以通过从泛型 Person 类型的限制来派生它们。

```
<xs:complexType name="Person">
  <xs:annotation>
    <xs:documentation>This is the generic 
      definition for persons</xs:documentation>
  </xs:annotation>
  <xs:sequence>
    <xs:element name="PartyName" type="xs:string" 
                minOccurs="0" maxOccurs="1"/>
    <xs:element name="GenderCode" type="GenderCode_Type" 
                minOccurs="0" maxOccurs="1"/>
    <xs:element name="BirthDate" type="xs:date" 
                minOccurs="0" maxOccurs="1"/>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="ChangePerson">
  <xs:annotation>
    <xs:documentation>This is the definition 
      when changing a person</xs:documentation>
  </xs:annotation>
  <xs:complexContent>
    <xs:restriction base="Person">
      <xs:sequence>
        <xs:element name="PartyName" type="xs:string" 
                    minOccurs="0" maxOccurs="1"/>
        <xs:element name="GenderCode" type="GenderCode_Type" 
                    minOccurs="0" maxOccurs="1"/>
        <xs:element name="BirthDate" type="xs:date" 
                    minOccurs="0" maxOccurs="1"/>
      </xs:sequence>        
    </xs:restriction>
  </xs:complexContent>
</xs:complexType>

<xs:complexType name="AddPerson">
  <xs:annotation>
    <xs:documentation>This is the definition 
      when adding a person</xs:documentation>
  </xs:annotation>
  <xs:complexContent>
    <xs:restriction base="Person">
      <xs:sequence>
        <xs:element name="PartyName" type="xs:string" 
                    minOccurs="1" maxOccurs="1"/>
        <xs:element name="GenderCode" type="GenderCode_Type" 
                    minOccurs="1" maxOccurs="1"/>
        <xs:element name="BirthDate" type="xs:date" 
                    minOccurs="0" maxOccurs="1"/>
      </xs:sequence>        
    </xs:restriction>
  </xs:complexContent>
</xs:complexType> 
```

在这里，泛型 Person 与 AddPerson 类型相同；我使用一个空洞的限制来定义 AddPerson 只是为了从泛型类型派生两种特定于操作的类型的对称性。

当然，在您的类型之间建立这种明确的关系是否真的有助于您实现目标，当然，部分取决于您的系统对模式类型定义的用途。

# c# - 任务、CodedUI 和剪贴板错误

> ID：13037784
> 
> 赞同：0
> 
> 时间：2012-10-23T19:29:47.183
> 
> 标签：c#, task-parallel-library, clipboard, coded-ui-tests

我正在更新 CodedUI 测试程序。我一直在进行的部分更新是线程化测试，以便我可以在必要时取消测试，而无需终止测试程序。我创建的任务工作正常，直到 CodedUI 测试将数据复制到剪贴板，然后尝试检索该数据，以便将其转储到数据库中。没有任务，这没有问题，但有任务，`Clipboard.GetData(DataFormats.Text)`返回 null。

因为`Keyboard.SendKeys`是在剪贴板请求之前使用的，所以我尝试[了 CodedUI Test: Keyboard.SendKeys not working](https://stackoverflow.com/questions/4014218/codedui-test-keyboard-sendkeys-not-working)看看这是否有帮助，但它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:32:46.327

[从 BackgroundWorker 中的剪贴板上获取数据](https://stackoverflow.com/questions/7635994/getting-data-off-the-clipboard-inside-a-backgroundworker)解决了这个问题。尽管没有引发与 Thread Apartment State 相关的错误，但将其设置为 STA 可以使事情正常进行。

# c# - 在 ASP.NET 中在运行时修改配置

> ID：13037785
> 
> 赞同：0
> 
> 时间：2012-10-23T19:29:47.010
> 
> 标签：c#, asp.net, vb.net, amazon-web-services

我遇到以下问题。我有一个 ASP.NET (VB.NET) 应用程序正在尝试使用 AWS .NET SDK 连接到 Amazon Web 服务，为了做到这一点，用户正在输入他们的访问和密钥。然后我将密钥添加到配置中，如下所示：

```
 Dim config As Configuration = WebConfigurationManager.OpenWebConfiguration("~")
 Dim settings As KeyValueConfigurationCollection = config.AppSettings.Settings
 settings("AWSAccessKey").Value = AmazonAccessKeyText.Text
 settings("AWSSecretKey").Value = AmazonSecretKeyText.Text
 config.Save(ConfigurationSaveMode.Modified)
 ConfigurationManager.RefreshSection("appSettings") 
```

虽然这成功地修改了 web.config 文件，但它仍然在运行时引发异常，说它找不到访问密钥。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:43:08.180

如果我理解正确，您拥有代表客户端连接到 AWS 的 ASP.NET 应用程序，如果是这样，从安全角度来看，在本地存储客户端凭证可能是最好的主意。

你可以

1.  仅在需要时将凭据存储在会话中的内存中，例如 SecureString
2.  使用任何 crypt api 将它们加密存储在磁盘上。

The amazon sdk doesn't need the credentials stored in the app/web.config. If you look at something like **[AWSClientFactory.CreateAmazonS3Client](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/M_Amazon_AWSClientFactory_CreateAmazonS3Client_7.htm)** , you will notice that you can pass them as parameters to this function

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:38:44.183

可能，最好将您收到的密钥保留在 Application 对象中？例如静态。更清晰，更简单，修改web.config时不会导致应用程序的循环

# html - 在 Photoshop 中制作文本框

> ID：13037798
> 
> 赞同：-1
> 
> 时间：2012-10-23T19:30:40.817
> 
> 标签：html, css, dreamweaver, photoshop

所以我一直很难想出一种方法来问这个问题，所以我只会告诉我我做了什么以及我想做什么。

我在 Photoshop 中为带有导航栏和登录字段的网页创建了一个简单的设计。我将需要的图像切片并作为 html 和图像保存到我的站点文件夹中。我打开了dreamweaver 并打开了那个文件。网页看起来很棒，但我无法在文本框中输入文本，因为它们只是图像。所以我的问题是如何让这些文本框图像成为真正的文本框而不丢失它们的设计和字体样式？

我的 Web 编程经验水平：我有 HTML 和 CSS 以及一些 PHP 的编程经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:39:10.240

您可以使用该`backgroung-image`属性，例如： 在您的 html/php 文件中：

```
<div class="box">
contents here
</div> 
```

在您的 css 文件中：

```
.box
{
background-image:url('image.jpg');
font-family: yourFont;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:55:42.000

如果您想要 HTML 字段，人们可以在其中输入内容，那么您需要制作一个表单（类似这样）：

```
<form>
<input type="text" class="someClass" />
</form> 
```

然后，您可以使用您的图像为其添加背景，就像 Kelsar 所写的那样。

```
.box
{
background-image:url('image.jpg');
font-family: yourFont;
} 
```

因此，首先在 HTMl 中构建它，然后使用 CSS 让它看起来更甜美整洁。如果您对 HTML 表单没有任何经验，那么您可以在这里阅读：[http ://www.tizag.com/htmlT/forms.php](http://www.tizag.com/htmlT/forms.php)

祝你好运。我希望它有所帮助。

# mediawiki - 导入维基百科 - 获取不同语言的匹配文章

> ID：13037799
> 
> 赞同：4
> 
> 时间：2012-10-23T19:30:45.700
> 
> 标签：mediawiki, wikipedia

我已经导入`pages-articles.xml`了 2 种语言（英语和马耳他语）的 Wikipedia 数据库转储（版本）。

但是，我需要能够将文章从一种语言链接到另一种语言。我的印象是我必须为此导入其他表。我需要导入哪些表？

提前致谢！

马耳他数据库转储存储库：[http ://dumps.wikimedia.org/mtwiki/20121012/](http://dumps.wikimedia.org/mtwiki/20121012/)

英文数据库转储库：[http ://dumps.wikimedia.org/enwiki/20121001/](http://dumps.wikimedia.org/enwiki/20121001/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:51:29.347

该信息在[表`langlinks`中](http://www.mediawiki.org/wiki/Manual%3aLanglinks_table)，因此您需要下载`langlinks.sql.gz`，这是一个 SQL 转储，而不是 XML。

一个可能的问题是这些链接可能不是对称的，例如`en:A`可能链接到`mt:B`，但`mt:B`链接到`en:C`。您必须决定如何处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:29:01.440

如果我理解正确，您想创建一个英文 wiki 和一个马耳他文 wiki，并让它们相互链接。

为此，您需要将“en”和“mt”的跨语言前缀添加到 interwiki 表中。这是它的描述：

[https://www.mediawiki.org/wiki/Interwiki_link](https://www.mediawiki.org/wiki/Interwiki_link)

您可能应该从文章中删除所有其他语言的链接。否则它们会在很多文章的底部显示为垃圾。

PS：很高兴听到您正在使用马耳他语！我真的很喜欢它 ：）

# iphone - 为什么不调用 locationManager:didUpdateLocations？

> ID：13037802
> 
> 赞同：1
> 
> 时间：2012-10-23T19:30:54.233
> 
> 标签：iphone, ios, gps, core-location, cllocationmanager

这是一些简单的代码：

```
// ViewControllerA.m

-(void) viewDidLoad
{
    [super viewDidLoad];
    self.networkMonitor = [[NetworkMonitor alloc] init];

    ...

    [self.networkMonitor.locationManager startUpdatingLocation];

    ...
} 
```

在网络监视器中：

```
// NetworkMonitor.m

-(id) init
{
    self = [super init];
    if (self != nil) {
        self.locationManager = [[CLLocationManager alloc] init];
        [self.locationManager setDelegate:self];
    }
    return self;
}

...

// this is never called!
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations 
{

    NSLog(@"%s, location manager returned a new location.", __FUNCTION__);

    ...

}

// and neither is this
- (void)locationManager:(CLLocationManager *)manager
   didFailWithError:(NSError *)error
{
    NSLog(@"Error: %@", [error description]);
} 
```

我调用了 startUpdatingLocation，NetworkMonitor 实现了 CLLocationManagerDelegate...为什么我没有接到任何对 didUpdateLocations 的调用？我是否误解了何时应该调用此方法？我假设一旦`startUpdatingLocation`被调用，我应该至少接到一个电话`didUpdateLocations`......我只是想获取用户的当前位置（不使用地图）。任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:52:23.180

你是为 ios6 构建的吗？来自文档：在 iOS 5 和更早版本中，位置管理器调用 locationManager:didUpdateToLocation:fromLocation: 方法。

# c++ - 如何创建静态分配的动态大小的数组？

> ID：13037806
> 
> 赞同：0
> 
> 时间：2012-10-23T19:31:14.560
> 
> 标签：c++, c, memory-management

```
typedef struct DictionaryEntry_s {
    char *key;
    char *value;
} DictionaryEntry;

typedef struct Dictionary_s {
    char *name;
    DictionaryEntry values[0];
} Dictionary;

//How can I do the following:
Dictionary myDictionary[] = { 
    {"synonyms",
        {"good", "cool"},
        {"bad", "evil"},
        {"awesome", "me"},
        {"like", "love"}, //etc....
        {0} //terminator
    },
    {"antonyms",
        {"good", "evil"},
        {"bad", "good"},
        {"awesome", "not me"}, ///...etc
        {0} //terminator
    },
    {0} //terminator
}; 
```

正如您在代码中看到的，我想创建一个静态分配但动态大小的数组。我知道如何遍历数据，只是编译器在声明时出错了。当我在寻找 C 解决方案时，还有 C++ 的奖励积分。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:38:53.327

C 解决方案需要额外的变量来定义内部数组：

```
typedef struct DictionaryEntry_s {
    char *key;
    char *value;
} DictionaryEntry;

typedef struct Dictionary_s {
    char *name;
    DictionaryEntry* values;
} Dictionary;

//How can I do the following:
DictionaryEntry myDictionary0[] = {
        {"good", "cool"},
        {"bad", "evil"},
        {"awesome", "me"},
        {"like", "love"}, //etc....
        {0} //terminator
};
Dictionary myDictionary[] = { 
    {"synonyms", myDictionary0},
    // ...
    {0} //terminator
}; // <-- semicolon was missing here 
```

C++ 解决方案 - 需要`std::vector<>`- 但是它不是`statically`分配的，而是动态的，并且它不需要终止符：

```
struct DictionaryEntry {
    char *key;
    char *value;
};

struct Dictionary {
    char *name;
    std::vector<DictionaryEntry> values;
};

//How can I do the following:
Dictionary myDictionary[] = { 
    {"synonyms",
      {
        {"good", "cool"},
        {"bad", "evil"},
        {"awesome", "me"},
        {"like", "love"}, //etc....
        {0} //terminator
      } 
    },
    //...
    {0} //terminator
}; // <-- semicolon was missing here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:36:54.103

在 C++11 中，您可以使用**初始化列表**。您可以使用采用其中之一的构造函数定义一个`DictionaryArray`类，然后编写

```
DictionaryArray myArray({ /* some list */ }); 
```

# regex - 正则表达式在单词的开头查找 pPath_

> ID：13037807
> 
> 赞同：0
> 
> 时间：2012-10-23T19:31:19.150
> 
> 标签：regex

我一般想知道在它的开头找到包含短语“pPath_”的所有单词的语法是什么。我意识到 pPath_. 查找后面有一个字符的所有单词，但是如何查找任意数量的字符？（我正在使用 xCode 查找和替换）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:33:12.610

对于“单词”的简单定义，

```
pPath_\w* 
```

如果您的引擎不支持`\w`或没有有用的定义，您可以使用字符类。

```
pPath_[a-zA-Z0-9_]* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:26:31.153

如果您只想查找以“pPath_”开头的单词，您可以在开头使用单词边界 (\b)。否则，您将得到任何包含“pPath_”的单词。

```
\bpPath_\w+ 
```

'\w' 是一个单词字符（任何字母、数字或下划线），相当于 [a-zA-Z0-9_]

'+' 匹配一个或多个字符。

# java - 如果方法调用有特定结果，则关闭richfaces popupPanel

> ID：13037809
> 
> 赞同：0
> 
> 时间：2012-10-23T19:31:22.537
> 
> 标签：java, jsf, richfaces, popuppanel

我正在尝试构建一个简单的登录面板。Panel 是一个丰富的：popupPanel。当单击“登录”链接/按钮时，如果登录不成功（由于用户名/密码错误、数据库错误……等等），我希望面板保持打开状态。但是如果登录成功，面板应该关闭。

我最好的尝试看起来像这样，但是无法解析“oncomplete”值

```
<a4j:commandButton value="login" oncomplete="if (#{userController.login()}) #{rich:component('loginPanel')}.hide()"/> 
```

如何从 popupPanel 中获取该行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:07:47.160

您应该使用 action 属性来调用 bean 上的登录方法。loginSuccess 是一个属性，指示登录是否成功。

```
<a4j:commandButton value="login" action="#{userController.login}" oncomplete="if (#{userController.loginSuccess}) #{rich:component('loginPanel')}.hide()"/> 
```

# asp.net - 页面后面代码中的 Sql 调用

> ID：13037812
> 
> 赞同：-1
> 
> 时间：2012-10-23T19:31:34.313
> 
> 标签：asp.net

现在我所有的 sql 调用都发生在 cs 页面中，它的很多代码我的目标是设置一个新类或任何东西（我听说它是​​用 dll 完成的），该类将为我需要的每个场景存储函数. 所以我的问题是如何完成它..假设在一个大型站点中应该如何完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:35:02.217

我建议创建一个类库项目，将您的共享代码移动到这些库中，然后将这些库包含在您的 Web 项目中。

# c# - 与 Microsoft Excel 互操作断开连接而不会导致主机 C# 程序崩溃

> ID：13037817
> 
> 赞同：1
> 
> 时间：2012-10-23T19:31:42.937
> 
> 标签：c#, excel, excel-interop

我有一个 C# 程序，它使用 Excel Interop 创建、编写和保存一个 excel 文件。问题是，如果我在保存并关闭 excel 文件后没有立即退出应用程序，那么 c# 应用程序会出现未处理的异常并崩溃。有没有人找到一种方法来做到这一点，同时能够保持主机 c# 应用程序打开和运行。

这是处理涉及 Excel 互操作的所有内容的代码

```
 class CreateExcelDoc
{
    string newFormString = trialReportForm.newFormString;
   string fileString=trialReportForm.fileString;
   int sheetCount;
   string trialString = trialReportForm.trialString;
   string dateString = trialReportForm.dateString;
   string saveString = trialReportForm.saveSting;
   System.Windows.Forms.Timer excelTimer = new System.Windows.Forms.Timer();
    private Excel.Application app = null;
    private Excel.Workbook workbook = null;
    private Excel.Worksheet worksheet = null;
    private Excel.Range workSheet_range = null;
    public CreateExcelDoc()

    {
        createDoc();
    }

    public void createDoc()
    {

        try
        {
            app = new Excel.Application();
            //app.Visible = false;
            if (startForm.exportOwnerString == "Yes")
            {
                app.Visible = true;
                startForm.exportOwnerString = " ";
            }
            else
            {
                app.Visible = false;
            }
            if (startForm.excelActionFlag=="addNewTrialReport")
            {
                workbook = (Excel.Workbook) app.Workbooks.Add(1);
                //workbook.SaveAs(newFileForm.desktopPath + "\\" + "OB "+trialReportForm.otrClubNameString+" - "+trialReportForm.otrDateString);
                worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                //fileNameString = newFileForm.desktopPath + "\\OB " + trialReportForm.otrClubNameString + " " + trialReportForm.otrDateString;
                workbook.Worksheets[1].Name = trialReportForm.trialReportDate+" Trial "+trialReportForm.trialReportTrialNumber;
            }
            else if (startForm.excelActionFlag == "ownerContacts")
            {
                workbook = (Excel.Workbook)app.Workbooks.Add(1);
                worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                workbook.Worksheets[1].Name = "Owner Contacts";
            }
            else if (startForm.excelActionFlag == "newExcelResults")
            {
                string testFile = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\test";
                workbook = (Excel.Workbook)app.Workbooks.Add(1);

                worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                workbook.Worksheets[1].Name = "Event 1 Results";
                //workbook.SaveAs(testFile, Missing.Value, Missing.Value, Missing.Value, false);
                //workbook.SaveAs(Environment.GetFolderPath(Environment.SpecialFolder.Desktop)+"\\Results", Missing.Value, Missing.Value, Missing.Value, false);

                //workbook.SaveAs(startForm.excelFileLocation, Missing.Value, Missing.Value, Missing.Value, false);

                //fileNameString = registrationForm.regFileLocation + "\\OB " + registrationForm.regClubName + " " + registrationForm.regDateString;
            }
            else if (dogForm.dogRegistrationExcel == "Yes")
            {
                workbook = (Excel.Workbook)app.Workbooks.Add(1);
                workbook.SaveAs(dogForm.filePath, Missing.Value, Missing.Value, Missing.Value, false);

            }
            else if (newFormString == "No")
            {

                //workbook = app.Workbooks.Open(fileString, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                // workbook.Close(true,fileString,Missing.Value);
                workbook = (Excel.Workbook)app.Workbooks.Open(fileString, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            }
            if (newFormString=="Yes"&registrationForm.formString=="OTR")
            {
                //string sheetName = "Trial Report - " + dateString + " " + trialString;
            worksheet = (Excel.Worksheet)workbook.Worksheets[1];
            workbook.Worksheets[1].Name =trialReportForm.otrDateString+" Trial " + trialReportForm.otrTrialString;
            //workbook.Worksheets[1].Name = "Trial Report - " + dateString + " " + trialString;
            //workbook.Worksheets[1].Name = "Hello";
            //Excel.Name name1 = worksheet.Names.Add("Trial Report - " + dateString + " " + trialString, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            //worksheet.Name = "Trial Report - " + dateString + " " + trialString;

            }
            else if (newFormString == "Yes" & registrationForm.formString == "Registration")
            {
                //string sheetName = "Trial Report - " + dateString + " " + trialString;
                worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                workbook.Worksheets[1].Name = "Results: "+registrationForm.selectedEvent;
                //workbook.Worksheets[1].Name = "Trial Report - " + dateString + " " + trialString;
                //workbook.Worksheets[1].Name = "Hello";
                //Excel.Name name1 = worksheet.Names.Add("Trial Report - " + dateString + " " + trialString, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                //worksheet.Name = "Trial Report - " + dateString + " " + trialString;

            }
            else if (startForm.excelActionFlag == "addExistingTrialReport")
            {
                workbook = (Excel.Workbook)app.Workbooks.Open(startForm.excelFileLocation, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
               sheetCount = workbook.Worksheets.Count;
               int sheetCountPlusONe=sheetCount+1;
               worksheet = (Excel.Worksheet)workbook.Worksheets.Add(Missing.Value,workbook.Worksheets[sheetCount],Missing.Value,Missing.Value);
               workbook.Worksheets[sheetCountPlusONe].Name = trialReportForm.trialReportDate + " Trial " + trialReportForm.trialReportTrialNumber;

               //worksheet.Move(Missing.Value, workbook.Worksheets[sheetCount]);

            }
            else if (startForm.excelActionFlag == "existingExcelResults")
            {

                workbook = (Excel.Workbook)app.Workbooks.Open(startForm.excelFileLocation, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                sheetCount = workbook.Worksheets.Count;
                int sheetCountPlusONe = sheetCount + 1;
                worksheet = (Excel.Worksheet)workbook.Worksheets.Add(Missing.Value, workbook.Worksheets[sheetCount], Missing.Value, Missing.Value);
                workbook.Worksheets[sheetCountPlusONe].Name = "Event " + sheetCountPlusONe.ToString() + " Results";

                //worksheet.Move(Missing.Value, workbook.Worksheets[sheetCount]);

            }
            else if (dogForm.dogRegistrationExcel == "Yes")
            {
                worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                workbook.Worksheets[1].Name = dogForm.dogUKCNumber;
            }
        }
        catch (Exception e)
        {
            Console.Write("Error");
        }
         /* if (trialReportForm.saveMe=="Yes")
            {
                workbook.Save();
                workbook.Close();
            }
        */

    }

    public void createHeaders(int row, int col, string htext, string cell1,
    string cell2, int mergeColumns, string b, bool font, int size, string
    fcolor)
    {
        worksheet.Cells[row, col] = htext;
        workSheet_range = worksheet.get_Range(cell1, cell2);
        workSheet_range.Merge(mergeColumns);
        switch (b)
        {
            case "BLUE":
                workSheet_range.Interior.Color = System.Drawing.Color.Red.ToArgb();
                break;
            case "GAINSBORO":
                workSheet_range.Interior.Color =
        System.Drawing.Color.Gainsboro.ToArgb();
                break;
            //case "Turquoise":
               // workSheet_range.Interior.Color =
        //System.Drawing.Color.Turquoise.ToArgb();
                //break;
            case "PeachPuff":
                workSheet_range.Interior.Color =
        System.Drawing.Color.PeachPuff.ToArgb();
                break;
            default:
                //  workSheet_range.Interior.Color = System.Drawing.Color..ToArgb();
                break;
        }

        //workSheet_range.Borders.Color = System.Drawing.Color.Black.ToArgb();
        //workSheet_range.Borders = null;
        workSheet_range.Font.Bold = font;
        workSheet_range.ColumnWidth = size;
        //workSheet_range.HorizontalAlignment = ContentAlignment.BottomCenter;
        if (startForm.excelActionFlag == "existingExcelResults" | startForm.excelActionFlag=="newExcelResults")
        {
            workSheet_range.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignCenter;
        }
        //workSheet_range.Cells.HorizontalAlignment = ContentAlignment.MiddleCenter;
        workSheet_range.Font.Color = System.Drawing.Color.FloralWhite.ToArgb();

    }

    public void addData(int row, int col, string data,
        string cell1, string cell2, string format)
    {
        worksheet.Cells[row, col] = data;
        workSheet_range = worksheet.get_Range(cell1, cell2);
        //workSheet_range.Borders.Color = System.Drawing.Color.Black.ToArgb();
        workSheet_range.NumberFormat = format;
        workSheet_range.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignLeft;

        excelTimer.Tick += new EventHandler(excelTimer_Tick);
        excelTimer.Interval = 6000;
        excelTimer.Start();
    }
    void excelTimer_Tick(object sender, EventArgs e)
    {
        if (startForm.excelActionFlag != "ownerContacts")
        {
            if (startForm.excelActionFlag == "existingExcelResults" | startForm.excelActionFlag == "newExcelResults")
            {
               /* Excel.Range sortRange;
                sortRange = worksheet.get_Range("A14", "K32");
                Excel.Range scoreColumn;
                scoreColumn = worksheet.get_Range("C14", "C32");
                sortRange.Sort(scoreColumn, Excel.XlSortOrder.xlDescending);*/
                Excel.Range valueRange;
                Excel.Range placeRange;
                placeRange = worksheet.get_Range("A14", "A" + (14 + (registrationForm.numberofCompetitors - 1)).ToString());
                valueRange = worksheet.get_Range("A14", "K"+(14+(registrationForm.numberofCompetitors-1)).ToString());
                valueRange.Sort(valueRange.Columns[3, Type.Missing], Excel.XlSortOrder.xlDescending, Type.Missing, Type.Missing, Excel.XlSortOrder.xlAscending, Type.Missing, Excel.XlSortOrder.xlAscending, Excel.XlYesNoGuess.xlGuess, Type.Missing, Type.Missing, Excel.XlSortOrientation.xlSortColumns, Excel.XlSortMethod.xlPinYin, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal);
                placeRange.Sort(placeRange.Columns[1, Type.Missing], Excel.XlSortOrder.xlAscending, Type.Missing, Type.Missing, Excel.XlSortOrder.xlAscending, Type.Missing, Excel.XlSortOrder.xlAscending, Excel.XlYesNoGuess.xlGuess, Type.Missing, Type.Missing, Excel.XlSortOrientation.xlSortColumns, Excel.XlSortMethod.xlPinYin, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal); 
            }
            // workbook.Close(true, Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Results.xls", Missing.Value);
            workbook.Close(true, startForm.excelFileLocation, Missing.Value);
            app.Quit();
            Application.Exit();

            /* workSheet_range = null;
             worksheet = null;
             workbook = null;
             app = null;*/
            //Thread.Sleep(5000);
            // File.Move(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Results.xls", startForm.excelFileLocation);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:44:24.220

提出了包括我在内的几种解决方案[如何正确清理 Excel 互操作对象？](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects-in-c-sharp/1577441#1577441)

您可以选择最服务器（Killing Excel 进程）到更温柔的解决方案（释放 COM 对象）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:46:58.910

我发现使用 excel 保存时，使用 SaveAs 方法会更幸运。例如：

```
 private static Microsoft.Office.Interop.Excel.Application xlApp = null;
            private static Microsoft.Office.Interop.Excel.Workbook xlWb = null;
            private static Microsoft.Office.Interop.Excel.Worksheet xlWs = null;

            //Your code and operations

            xlWb.SaveAs(filePath, XlFileFormat.xlExcel8, Missing.Value, Missing.Value, Missing.Value, Missing.Value, XlSaveAsAccessMode.xlNoChange,
                        Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            xlApp.Quit();

            Marshal.ReleaseComObject(xlWs);
            Marshal.ReleaseComObject(xlWb);
            Marshal.ReleaseComObject(xlApp); 
```

# file - 我们可以附加/发送外部文件以及 SSRS 订阅报告吗？

> ID：13037820
> 
> 赞同：0
> 
> 时间：2012-10-23T19:31:52.767
> 
> 标签：file, reporting-services, external, subscription

我有一个销售报告，我每天使用 SSRS 订阅（通过电子邮件发送）发送给用户。我的经理要求我在此报告中附加一个外部 Word 文档。

因此用户必须接收 a) 销售报告和 b) 外部 Word 文档。

是否可以附加/发送外部文档以及通过电子邮件发送的 SSRS 订阅？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:38:50.080

不是通过 SSRS 订阅，但您可以编写一些东西来呈现销售报告并将这两个文件通过电子邮件发送给用户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:44:40.393

你不能通过订阅来做到这一点。您需要编写自己的程序来呈现报告并将其与其他附件一起附加到电子邮件中。这并不像听起来那么难。MSDN 站点[有一些有用的代码](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render.aspx)，向您展示了如何呈现报告，这将帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T23:10:34.390

伙计们感谢您的回复。我通过使用 ssis 的发送邮件任务解决了这个问题。

第 1 步：我已经创建了要发送到 Windows 文件共享的销售报告订阅。

第 2 步：我已将外部文档放在同一个 Windows 文件共享中。

第 3 步：使用 ssis sendmail 任务附加要发送给收件人的销售报告和外部文档。

效果很好！！:)

# jquery - 检索 href 属性

> ID：13037824
> 
> 赞同：0
> 
> 时间：2012-10-23T19:32:07.477
> 
> 标签：jquery, url, hyperlink, concatenation, href

用户以他想要的方式对列表对象进行排序，然后单击“保存”链接并将订单保存到数据库中（在 url 的帮助下）。在用户更改顺序之前，url 如下所示：**index.php?type=list&action=saveNewListOrder&listId=24**。

当用户更改列表对象的顺序时，下面的函数将运行，并创建与 url 合并的列表对象字符串。

一切正常，除了用户第二次移动列表对象时，检索到的 url 已经包含带有列表对象的字符串（自上次移动以来）。每次用户移动列表对象时，url 都会增长。

在第三步之后，url 可能如下所示：

```
index.php?type=list&action=saveNewListOrder&listId=170&listOrder=772.773.775.774
.776&listOrder=772.775.773.774.776&listOrder=775.773.772.774.776 
```

我曾想过使用子字符串（提取 url 的第一部分）并将 url 放在一个隐藏字段中，该字段每次都检索并且永远不会更改。这两种解决方案都感觉不必要的复杂，必须有更优雅的解决方案。

```
 $('#listElements').sortable({
        update: function(event, ui) {

            var order = '';
            var i = 0;
            $('.listObject li').each(function (e) {
                if (i != 0) {
                    order += '.';
                }
                order += $(this).attr('id');//.push($(this).attr('id'));
                i +=1;
            });

            var url = $('#newOrder').attr("href");

            url += "&listOrder=" + order;

            $('#newOrder').attr('href',url);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:37:27.023

为什么不将列表顺序保存在变量中，直到用户实际点击保存。然后将其附加到网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:19:37.557

您可以在设置 #newOrder 的 href 属性之前丢弃 listOrder 参数并附加新订单

```
var url = $('#newOrder').attr("href");
var arrurl = url.split('&listOrder=');
url = arrurl[0];
url += "&listOrder=" + order;
$('#newOrder').attr('href',url); 
```

# performance - 暴力破解大脑谜题

> ID：13037826
> 
> 赞同：1
> 
> 时间：2012-10-23T19:32:12.500
> 
> 标签：performance, algorithm, puzzle

我收到了来自 lonpos.cc 的大脑拼图作为礼物。我很好奇有多少不同的解决方案，我非常喜欢编写算法和代码，所以我开始编写一个应用程序来蛮力它。

拼图看起来像这样：[http](http://www.lonpos.cc/images/LONPOSdb.jpg) ://www.lonpos.cc/images/LONPOSdb.jpg / [http://cdn100.iofferphoto.com/img/item/191/498/944/u2t6.jpg](http://cdn100.iofferphoto.com/img/item/191/498/944/u2t6.jpg)

这是一个 20x14“点”的板。所有拼图都可以翻转和转动。我编写了一个应用程序，其中每个部分（和拼图）都呈现如下：

```
01010
00100
01110
01110
11111
01010 
```

到目前为止，我的应用程序相当简单。

它采用棋子列表和一块空白板，棋子#0 的弹奏将其向各个方向翻转，并且该棋子尝试将其放置在每个 x 和 y 坐标上。如果它成功放置了一个棋子，它会传递一个新“棋盘”的副本，其中一些棋子被带到递归函数中，并为它们的棋子尝试所有组合。

用伪代码解释：

```
bruteForce(Board base, List pieces) {
    for (Piece in pieces.pop, piece.pop.flip, piece.pop.flip2...) {
        int x,y = 0;
        if canplace(piece, x, y) {
            Board newBoard = base.clone();
            newBoard.placePiece(piece, x, y);
            bruteForce(newBoard, pieces);
        }
        ## increment x until x > width, then y
    }
} 
```

现在，我正在尝试找到更快的方法。到目前为止我想到的事情：

1.  使其并行解决 - 已实现，现在使用 4 个线程。
2.  对碎片进行排序，并且只尝试将适合的碎片放置在我们试图适应的 x,y 空间中。（也就是说，如果我们在最下面一行，并且从我们的位置到底部只有 4 个“点”，请不要尝试高 8 个的点）。
3.  不复制板，而是使用 placePiece 和 removePiece 或类似的东西。
4.  检查“无效”板，也就是如果一块无法触及（完全装箱）。

有人对我如何更快地做到这一点有任何创造性的想法吗？或者有什么方法可以数学计算有多少种不同的组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:42:09.943

我没有看到任何明显的快速做事的方法，但这里有一些提示可能会有所帮助。

首先，如果你忽略凹凸，你有一个 6x4 的网格来填充 1x2 块。每个块有 6 个位置，可以有一个凸起或一个孔。因此，您试图找到块的排列方式，以便在每个边缘处，凸起与孔相匹配。此外，您可以使用此信息更有效地表示片段。

接下来，我建议尝试所有方法将块放置在特定位置，而不是所有地方都可以在任何地方播放特定块。这将减少您走下的错误路线的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:21:18.633

这看起来像[Exact Cover Problem](http://en.wikipedia.org/wiki/Exact_cover)。你基本上想用你给定的部分覆盖板上的所有字段。我可以推荐Donald Knuth 出版的[Dancing Links 。](http://en.wikipedia.org/wiki/Dancing_Links)在[这篇论文中](http://arxiv.org/pdf/cs/0011047v1.pdf)，你找到了一个关于[pentomino 问题](http://en.wikipedia.org/wiki/Pentomino)的清晰示例，它应该可以让你很好地了解它是如何工作的。

您基本上建立了一个系统来跟踪在板上放置特定块的所有可能方式。通过放置一个块，您将覆盖该领域的一组位置。这些位置不能用于放置任何其他块。在您放置另一个块之前，所有可能性都会从问题设置中删除。跳舞链接允许快速回溯和消除可能性。

# java - 用 Java 编写的高质量开源文本转语音 (TTS) 引擎

> ID：13037827
> 
> 赞同：2
> 
> 时间：2012-10-23T19:32:27.867
> 
> 标签：java, text-to-speech

**我正在寻找纯粹**用 Java编写的开源文本转语音 (TTS) 引擎。这不是本机调用或类似调用——只有纯 Java。理想情况下，具有高质量的声音（请参阅下面的质量定义），但只要源可用，质量较低的替代方案也是可以的。

有这样的开源项目吗？

“高质量”是指“人类的声音”、“非机器人”，最终结果与以下两个英语示例大致相当：[示例 1](http://translate.google.com/translate_tts?tl=en&q=This+is+an+example+to+illustrate+the+desired+level+of+quality)、[示例 2](http://tts-api.com/tts.mp3?q=This+is+an+example+to+illustrate+the+desired+level+of+quality)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:28:21.757

我知道的唯一开源 Java TTS 引擎是[MARY](http://mary.dfki.de/)，它来自研究实验室和大学。它已经有一段时间没有活动了，我还没有听到输出的质量。

# php - 在网站的多个选项卡中使用相同的脚本

> ID：13037830
> 
> 赞同：1
> 
> 时间：2012-10-23T19:32:38.303
> 
> 标签：php, javascript

我有一个包含多个选项卡的网页，除了一些细微的差异外，它们基本上都做同样的事情。例如：

```
 <div id="tabs-1">
    <form id="buybackForm">...
    <div id="tabs-2"><!--Video Games-->
            <form id="buybackFormVideoGames">....
    <div id="tabs-3"><!--Movies -->

        <form id="buybackFormMovies"> 
```

等等，每个选项卡都用于获取书籍、视频游戏、电影等的信息。表单是相同的，除了让表单正常工作，我必须更改每个选项卡的 id、书籍标题、videoTitle电影的视频和电影标题。每个选项卡的后端看起来几乎相同，只是表单 ID 发生了变化。

```
 $('#isbn').keydown(function (e) { - for the books
     $('#platform').keydown(function (e) { - video games
    $('#Movieupc').keydown(function (e) { - for movies 
```

所有功能基本相同，只是更改了表单字段的名称。有一个更好的方法吗？是否可以以某种方式使用javascript（可能是GetElementbyId？）所以我不必为每个选项卡写出每个函数？对于每个选项卡，我有大约 6 个不同的功能可以执行以及进行 ajax 调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:33:59.087

您可以使用命名函数

```
function myFunction(){ }

$('#isbn').keydown(myFunction);
$('#platform').keydown(myFunction);
$('#Movieupc').keydown(myFunction); 
```

或者在所有元素上使用一个公共类。

```
$('.myCommonClass').keydown(function (e) { }); 
```

如果它们是动态的，并且您正在使用 jQuery 1.7+，您可以使用我们`on`的 .

```
$(document).on("keydown", ".myCommonClass", function(){} ); 
```

# c - 结构错误中的联合

> ID：13037832
> 
> 赞同：0
> 
> 时间：2012-10-23T19:32:42.283
> 
> 标签：c, struct, unions

我有以下结构：

```
struct type1 {
    struct type2 *node;
    union element {
        struct type3 *e;
        int val;
    };
}; 
```

当初始化一个指向`*f`实例的指针`type1`并执行类似的操作时： `f.element->e`甚至只是`f.element`，我得到：

```
error: request for member ‘element’ in something not a structure or union 
```

我在这里监督什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:42:38.223

`element`是工会的名称，而不是 的成员的名称`type1`。你必须给出`union element`一个名字：

```
struct type1 {
struct type2 *node;
    union element {
        struct type3 *e;
        int val;
    } x;
}; 
```

然后你可以访问它：

```
struct type1 *f;
f->x.e 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T19:38:39.123

如果 f 是一个指针，那么您可以使用 f->element 或 (*f).element 访问“元素”

更新：刚刚看到“元素”是联合名称，而不是结构的成员。你可以试试

```
union element {
    struct type3 *e;
    int val;
} element; 
```

所以最终的结构是这样的：

```
struct type1 {
    struct type2 *node;
    union element {
        struct type3 *e;
        int val;
    } element;
}; 
```

现在您可以像这样通过 type1 *f 访问元素成员：

```
struct type1 *f;

// assign f somewhere

f->element.val; 
```

# jquery - 滚动到活动项目

> ID：13037836
> 
> 赞同：1
> 
> 时间：2012-10-23T19:32:53.217
> 
> 标签：jquery, scrollto, jquery-scrollable

我正在尝试构建一个将 jquery 可滚动工具用于投资组合的站点。我有一个可滚动的列表，链接到显示我们工作示例的不同页面。可滚动列表通过 PHP 包含在每个页面中（我认为这可能更优雅，但我不太适合这样做）。如果显示相关页面，可滚动列表将获得一个`.active`类。`li`然后可滚动列表的可见部分应该跳转到活动列表项，并且可滚动应该从那里开始。

现在我首先尝试通过结合 scrollTo 功能来修复它。但是最后一个`ul`将`li`不会显示（我有 5 个`ul`和 5 个`li`项目）。此外，可滚动开始表现得很奇怪。我有时在可滚动的 div 中看不到列表项。

这是我的代码：

```
 $(document).ready(function(){
// initialize scrollable
$(".scrollable").scrollable({
    mousewheel: true,
    circular: true,
    loop:true
});
$(".scrollable").scrollTo($("li.active"), 800, {axis:"x"} );
    }); 
```

我也用 initialIndex 尝试过，但这也不是很好，也没有很好的滚动效果。

# xpath - 如何使用 RegexBuddy 匹配 xPath？

> ID：13037845
> 
> 赞同：0
> 
> 时间：2012-10-23T19:33:22.687
> 
> 标签：xpath, regexbuddy

表达式`/bookstore/book[1]/title`应该返回`<title lang="eng">Harry Potter</title>`，但我得到“正则表达式不匹配......”

这是我正在测试的 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book>
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
</book>

<book>
  <title lang="eng">Learning XML</title>
  <price>39.95</price>
</book>

</bookstore> 
```

![在此处输入图像描述](../Images/530c957defd318b36e0d04c59b765e81.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:17:06.037

虽然 RB 可以处理 XPath 的正则表达式，但它不处理 XPath 路径。要构建/检查 XPath 路径的选定内容等，您需要 XPath Explorer、带有 Firebug+Firepath 的 Firefox 或类似的东西。

# javascript - asp.net 控件位置不正确

> ID：13037848
> 
> 赞同：0
> 
> 时间：2012-10-23T19:33:31.847
> 
> 标签：javascript, asp.net, css, css-position

我有一个侧边栏 div，我给出了一个固定位置，以便在页面滚动时它始终可见。只是为了让事情变得有趣，侧边栏的位置是由一些 javascript 代码设置的，以处理较低的屏幕分辨率和最终出现​​在错误位置的问题。

这一切都很好，但是似乎 div 上的控件在重新定位时不会移动，因此您无法单击它们。他们出现在正确的位置，他们实际上并没有做任何事情。

我确定我已经在这里阅读了解决方案，但无法找到它。

这是侧边栏的 CSS：

```
.mainsidebar
{
   display:inline-block;
   width:35.5%;
   float:left;   
   padding: 0px 0px;
   margin: 12px 8px 8px 8px;
   min-height: 480px;
   position: fixed;
   font-size: 9pt;
   left: 0px;
   overflow:auto;
   background-color: #4b6c9e;
   border-radius: 8px 8px 8px 8px;
} 
```

以及设置它的位置的javascript：

```
var elementStyle1 = document.getElementById("mainSideBar");
elementStyle1.style.top = "23.2%"; 
```

我尝试用 asp 控件做同样的事情，但没有得到任何结果。

好的，抱歉 - 你可以忽略这个。我认为这是我上面提到的问题，因为我确信我已经阅读了描述类似情况的解决方案。

实际上，问题出在控件的 z-index 上——一旦我将 div 的 z-index 设置为低于控件的 z-index，我就可以点击它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:26:26.583

让我们假设 ASP.NET 服务器控件的 ID 是“mainSideBar”。然后你的javascript代码将是

```
var elementStyle1 = document.getElementById("<%=mainSideBar.ClientID%>"); 
```

# xml - 基于浏览器的 xslt 所见即所得编辑器

> ID：13037851
> 
> 赞同：4
> 
> 时间：2012-10-23T19:33:39.907
> 
> 标签：xml, xslt, editor, wysiwyg, browser-based

我正在尝试找到一个基于浏览器的所见即所得 xslt 编辑器。它需要能够将 xml 文档与 xslt 样式表一起作为源文件 - 允许编辑 xslt 样式表，然后显示生成的 html 输出。

是否存在这样的基于浏览器的工具？在进行 Google 搜索时，我见过一些基于桌面的编辑器，但到目前为止，还没有基于浏览器的编辑器。

任何帮助或建议将不胜感激。

谢谢，汤姆

# scala - scala中的模式匹配，检查数字是否大于

> ID：13037852
> 
> 赞同：5
> 
> 时间：2012-10-23T19:33:39.707
> 
> 标签：scala

> **可能重复：**
> [在 Scala 的模式匹配系统中使用比较运算符](https://stackoverflow.com/questions/1585395/using-comparison-operators-in-scalas-pattern-matching-system)

对于以下方法，我收到一个错误：“'=>' 预期但找到整数文字。”

是否无法检查 x 是否大于另一个数字，或者如果匹配 '> 2'，是否有另一种方法可以返回“大于 2”？

```
 def describe(x: Any) = x match {
    case 5 => "five"
    case > 2 => "greater than 2"
  } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T19:36:31.283

尝试：

```
def describe(x: Any) = x match {
  case 5 => "five"
  case x: Int if (x > 2) => "greater than 2"
} 
```

# php - 何时使用 PDO 准备查询。mysql_real_escape 错误

> ID：13037853
> 
> 赞同：2
> 
> 时间：2012-10-23T19:33:45.293
> 
> 标签：php, mysql, pdo

我一直在制作一个 php 网站，在我的本地机器上开发。对此真的很陌生，所以这是我尝试过的第一件事。当我搬到我的主机时，我收到以下错误：

```
 Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied             for user 'matthew'@'localhost' (using password: NO)  on line 11 
```

我在这里进行了相当多的搜索，我很确定这是因为我需要“准备”我的查询。我不确定的是什么时候准备正确，什么时候不正确。我在下面添加了一些查询以详细解释：

连接到数据库：

```
$hostname = "localhost";
$username = "root";
$password = "root";

try {
    $dbh = new PDO("mysql:host=$hostname;dbname=wmpt", $username, $password);
//echo "Connected to database"; // check for connection
    }
catch(PDOException $e)
    {
    echo $e->getMessage();
    } 
```

这是一个示例查询：

```
$username = mysql_real_escape_string($_POST['run']);

$STH = $dbh->query("SELECT * FROM tblusers WHERE username = '$username' ");
$STH->setFetchMode(PDO::FETCH_ASSOC);  
$result = $STH->fetch(); 
```

我的问题是，如果我使用用户提交的数据查询/插入/更新数据库，我是否只需要“准备”一个查询？

上述查询是不好的做法吗？如果它不包含用户提交的数据怎么办，即我想查询

```
 $STH = $dbh->query("SELECT * FROM tblusers WHERE username LIKE '%hotmail%' "); 
```

这可能是一个不好的例子，但我正在说明开发人员定义的查询。

这是我得到的原因吗，以及如何避免：

```
Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for     user 'matthew'@'localhost' (using password: NO)  on line 11 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:39:49.200

要解决您收到的错误，[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)需要通过`mysql_connect()`. 因为您没有，它正在尝试连接并失败（使用用户名`matthew`，而您的 PDO 正在连接`root`）。此外，您不能（或*不应该*`mysql_real_escape_string()`）混合和匹配`PDO`- 它们是不同的库。

关于“何时”使用准备好的语句，一般的经验法则是只要值没有硬编码。您的示例`LIKE '%hotmail%'`不需要准备，它是硬编码的，永远不会改变（当然，除非您手动更新它）。

如果您有一个查询将接受任何类型的变量，无论是来自`$_POST`or的数据`$_GET`，还是开发人员在查询前 10 行创建的变量，您应该使用准备好的语句（或至少转义它，检查[PDO::报价](http://php.net/manual/en/pdo.quote.php)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T19:44:42.640

如果您使用的是 PDO，则不应使用`mysql_real_escape_string`. PDO 库有一个非常健壮的[SQL 占位符方法](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)，可以做得更好。

```
$STH = $dbh->query("SELECT * FROM tblusers WHERE username = :username");
$STH->bindParam(':username', $username);
$STH->setFetchMode(PDO::FETCH_ASSOC);  
$result = $STH->fetch(); 
```

# jsf-2 - 如何让 PrimeFaces 编辑器扩展到可用空间？

> ID：13037855
> 
> 赞同：2
> 
> 时间：2012-10-23T19:33:57.240
> 
> 标签：jsf-2, primefaces

我已经开始使用 PrimeFaces **p:editor**进行文本输入，而且在大多数情况下，我对它的工作方式相当满意。但是文档指出，它所基于的 CKEditor 没有插入 ThemeRoller 框架，因此组件尺寸不会自动调整。

例如：

```
<h:panelGrid columns="2">

    (stuff)

    <h:outputLabel value="Content:" />
    <p:editor id="editDoc" widgetVar="editorDoc"
                 value="#{editDocument.text}"
                 style="width: 700px"
                                  />

    (more stuff)
</h:panelGrid> 
```

我希望**p:editor**扩展到**h:panelGrid**呈现的表格的宽度。然而，我没有尝试过任何工作。有什么建议么？

更新：

我应该注意到**p:editor**标记不注意**样式**属性。相反，它有一个**宽度**属性和一个**高度**属性，它们的工作方式与 CSS 参数的工作方式不同。例如**width="100%"**是一个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T06:56:07.457

的实际宽度`p:editor`取决于其内部的大小`<div>`。您可以简单地覆盖该默认值：

```
<style type="text/css">
    #editDoc > div {
        width: 99.5% !important;
    }
</style> 
```

也删除 the`style="width: 700px"`并将`p:editor`其附加到 the`h:panelGrid`上。

适用于所有组件的更通用的解决方案`p:editor`是覆盖类的默认`width`属性`.ui-editor`：

```
<style type="text/css">
    .ui-editor {
        width: 99.5% !important;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T08:18:56.877

对于 Primefaces 4，我们必须设置内部的宽度`iframe`：

```
<style type="text/css">
    .ui-editor iframe {
        width:100% !important;
    }
</style> 
```

# sql - 澄清为什么 EXECUTE AS USER/LOGIN 没有返回预期结果？

> ID：13037863
> 
> 赞同：16
> 
> 时间：2012-10-23T19:34:39.113
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, ssms

我正在对数据库运行以下查询：

```
execute as user = 'domain\username'
select * from fn_my_permissions(null, 'DATABASE')
order by subentity_name, permission_name
revert; 
```

但是会抛出以下错误：

`Cannot execute as the database principal because the principal "dev\spadmin" does not exist, this type of principal cannot be impersonated, or you do not have permission.`

用户是数据库的 dbo，当我在 management studio 中打开属性时，我可以看到它与该登录名相关联。`EXECUTE AS LOGIN = 'domain\username'`另一方面，运行确实会返回结果。如果我明确地运行`EXECUTE AS USER = 'dbo'`，我会得到结果。我还有一个不同的数据库，其中相同的场景同时返回`EXECUTE AS USER`和的结果`EXECUTE AS LOGIN`。

在另一个用户的另一种情况下，我跑了`EXECUTE AS LOGIN = 'domain\username'`但没有得到结果，但我确实得到了`EXECUTE AS USER = 'domain\username'`.

这些场景中的两个用户都与`db_owner`作为数据库成员的登录名相关联。

谁能告诉我为什么这些查询没有返回我期望的结果？如果我遗漏任何重要信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T19:55:46.873

问题是，因为 Login`domain\username`是数据库的 dbo，这*也*意味着他们在该数据库中对应的 User 的名称是`dbo`而***不是*** `domain\username`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:50:18.320

跑`ALTER AUTHORIZATION ON DATABASE::[<yourdb>] TO [sa]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T10:31:29.840

对于我编写的存储过程，我遇到了同样的错误。

我发现错误是由我在查询中指定数据库名称的方式引起的

```
SELECT emp_no 
FROM   db_name.employee 
WHERE  emp_no = 1234 
```

`db_name2`从脚本中删除数据库名称后，我正在执行该过程

```
SELECT emp_no 
FROM   employee 
WHERE  emp_no = 1234 
```

它工作得很好。

我认为减少的日志访问权限不允许使用其他数据库或`use db_name`命令。

# php - 计算数据库中的行数？

> ID：13037864
> 
> 赞同：0
> 
> 时间：2012-10-23T19:34:41.640
> 
> 标签：php, mysql

我试过用它来访问数据库：

```
return $db->execute('SELECT `id` FROM `main_games` WHERE `id`=?', array($this->getSubdomain)); 
```

我不确定这是否有效，因为它甚至没有提出任何建议。我已经检查过数据应该存在，但我的函数总是出错。我是否必须执行另一个命令才能返回行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:38:42.380

我不知道你到底想做什么。但是要获取表中的行数，例如`my_table`，您可以在 SQL 中执行此操作：

```
SELECT COUNT(*) FROM my_table 
```

# c - 带有服务器/客户端的 C 指针问题

> ID：13037866
> 
> 赞同：0
> 
> 时间：2012-10-23T19:34:51.970
> 
> 标签：c, pointers, netbeans, tcp, netbeans-7

编写服务器/客户端程序并在使用 Netbeans 构建时遇到这些错误：

```
dbserver.c:195: warning: embedded '\0' in format
dbserver.c:211: warning: passing argument 1 of 'db_lookup' from incompatible pointer type
dbserver.c:213: warning: passing argument 1 of 'db_insert' from incompatible pointer type
dbserver.c:241: warning: passing argument 1 of 'db_delete' from incompatible pointer type
dbserver.c:257: warning: passing argument 1 of 'db_lookup' from incompatible pointer type
dbserver.c:287: warning: embedded '\0' in format 
```

这是有问题的代码：

```
//------------------------------------------------------------------------------
//                            Static Definitions
//------------------------------------------------------------------------------

#define WORD_LENGTH 32 //size of transmission & word length (31 characters + \0)        
#define DICTIONARY_SIZE 100 //size of dictionary word count

//------------------------------------------------------------------------------
//                       Message Structure Definition
//------------------------------------------------------------------------------

typedef struct message 
{
    int msg_type; //message code used to call database functions
    int msg_size; //expected size of message in transit
    char msg[32]; //payload capacity
} message;

//------------------------------------------------------------------------------
//                Server Function & Variable Initialization 
//------------------------------------------------------------------------------

char dictionary[DICTIONARY_SIZE][WORD_LENGTH]; //dictionary structure
int word_count = 0; //dictionary word counter   
int db_initialization(); //create db dictionary
int db_insert(const char *word); //check for word, insert if not found
int db_delete(const char *word); //remove word from dictionary if found
int db_lookup(const char *word); //search dictionary for word
int db_function(int fd); //db function call interface
int errexit(const char *format, ...); //Khalid's error and exit
//establishes socket to listen for connections
int listen_socket_TCP(const char *service, int qlen); 

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//                            Main Function
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

int main(int argc, char *argv[])
{
    char *service = "27792"; //"Magic Port" to listen on
    struct sockaddr_in client_address; //IPv4 client address
    unsigned int client_address_length; //IPv4 client address length
    int master_socket; //TCP socket
    int slave_socket; //TCP socket spawned off of Master

    master_socket = listen_socket_TCP(service, WORD_LENGTH); //build database

//------------------------------------------------------------------------------
//        Dictionary Code Adapted from Material provided by Khalid
//------------------------------------------------------------------------------

    db_initialization(); //initialize the database
    //seed the database
    db_insert("hello"); 
    db_insert("communication");
    db_insert("depaul");
    db_insert("cdm");

    //--------------------------------------------------------------------------
    //                   Test Database Function Operation
    //--------------------------------------------------------------------------
    if (db_lookup("cti"))
        printf("found\n");
    //end if

    else 
    {
        db_insert("cti");
        printf("'cti' has been inserted\n");
    } //end else

    if (db_delete("cdm"))
        printf("'cdm' has been successfully deleted\n");
    //end if

    else
        printf("cannot find 'cdm'.");
    //end else

    //--------------------------------------------------------------------------
    //                Forever Loop to Listen for Connections
    //--------------------------------------------------------------------------
    while (1) 
    {
    client_address_length = sizeof(client_address);
    slave_socket = accept(master_socket, (struct sockaddr *)&client_address, 
                                &client_address_length);

        if (slave_socket < 0) 
        errexit("accept: %s\n", strerror(errno));
        //end if

    printf("Connecting...\n");
    db_function(slave_socket);
    close(slave_socket);
    } //end while

}
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//                              END MAIN FUNCTION
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
//                            Server Function Codes:
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//                       Execute Database Functionality
//------------------------------------------------------------------------------

int db_function(int fd)
{   
    int finished = 0;
    char re[2];
    int x = -1;

    while (!finished) 
    {
    char buf[sizeof(message)];
    int cc;
    struct message *sptr;

        message s;

        cc = recv(fd, buf, sizeof(message), 0);
    printf("Received Bytes: %i\n", cc);

        sptr = (struct message *) buf;

        memcpy(&s, sptr,sizeof(message));

        if (s.msg_size != strlen(s.msg))
        {
        x = -1;
        sprintf(re,"%d \0", x);
        send(fd, re, 2, 0);
        break;
    } //end if

        //----------------------------------------------------------------------
        //           Message Code 1 - Insert Word into Dictionary
        //
        // Return  1: Successfully Inserted Word
        // Return  0: Word Exists in Dictionary Already
        // Return -1: Failed to Add Word to Dictionary
        //----------------------------------------------------------------------

    if (s.msg_type == 1)
        {
        if ((db_lookup(&s.msg)) == 0) //search for preexisting word
            {
            if ((db_insert(&s.msg)) > 0) //insert word into dictionary
                {
            x = 1; //word added successfully
        } //end insert if

                else
                    x = -1;//unsuccessful in adding word

        } //end search and insert if

            else 
        x = 0;

            printf("Adding to dictionary: %s result %i\n", s.msg, x);
    } //end if message type 1

        //----------------------------------------------------------------------
        //           Message Code 2 - Delete Word from Dictionary
        //
        // Return  1: Successfully Deleted Word
        // Return  0: Word does not Exist in Dictionary
        // Return -1: Failed to Delete Word from Dictionary
        //----------------------------------------------------------------------

        if (s.msg_type == 2)
        {
        x = db_delete(&s.msg);
        printf("Deleting from dictionary: %s result %i\n", s.msg, x);
    } //end if message type 2

        //----------------------------------------------------------------------
        //           Message Code 3 - Lookup Word in Dictionary
        //
        // Return  1: Successfully Found Word
        // Return  0: Word not FOund in Dictionary
        // Return -1: Function Failed
        //----------------------------------------------------------------------

    if (s.msg_type == 3)
        {
        x = db_lookup(&s.msg);
        printf("Looking up from dictionary: %s result %i\n", s.msg, x);
    } //end if message type 3

        //----------------------------------------------------------------------
        //           Message Code 4 - Close Connection
        //----------------------------------------------------------------------

        if (s.msg_type == 4)
        {
        x = 1;

            printf("Closing connection: %s result %i\n", s.msg, x);

            break;
    } //end if message type 4

        printf("Words in dictionary: {");

        int c = 0;
        for (c=0; c < word_count; c++)
        {
        printf("%s, ", dictionary[c]);
    }

        printf("}\n");

        sprintf(re,"%d\0", x);

        send(fd, re, 2, 0);
    } // end while(!finished)

    return 0;
} //end db_function
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//                         Database Initialization
//------------------------------------------------------------------------------

int db_initialization()
{
    word_count = 0;
    return 1;
} //end db_initialization
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//                       Insert Word into Dictionary
//------------------------------------------------------------------------------
int db_insert(const char *word)
{
    strcpy(dictionary[word_count], word);
    word_count++;
    return word_count;
} //end db_insert
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//                       Delete Word from Dictionary
//------------------------------------------------------------------------------
int db_delete(const char *word)
{
    int i;
    for (i=0 ; i < word_count ; i++)
    {
    if (strcmp(word, dictionary[i]) == 0) 
        {
        word_count--;

            strcpy(dictionary[i], dictionary[word_count]);

            return 1;
        } //end if

    } //end for

    return 0;
} //end db_delete
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
//                        Lookup Word in Dictionary
//------------------------------------------------------------------------------
int db_lookup(const char *word)
{
    int i;
    for (i=0 ; i<word_count ; i++)
    {
    if (strcmp(word, dictionary[i]) == 0)
        return 1;
    } //end for

    return 0;
} //end db_lookup
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------ 
```

我已经排除了预处理器指令和 listen_socket_TCP 函数（在另一个源文件中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:46:43.073

首先，这些是警告，而不是错误......

无论如何，看起来问题在于您如何传递字符串： `dbserver.c:211: warning: passing argument 1 of 'db_lookup' from incompatible pointer type`

正在`db_lookup()`寻找一个`const char *`例如在这里使用的时候：

```
 if (db_lookup("cti")) 
```

你正在传递它：

```
 if ((db_lookup(&s.msg)) == 0) //search for preexisting word 
```

结构中 char 指针的地址，如果你只是传递它：

```
 if ((db_lookup(s.msg)) == 0) //search for preexisting word 
```

那应该可以解决这种类型的警告。

其次，`\0`从 sprintf 中删除 s 以消除以下两个警告： `warning: embedded '\0' in format`

# facebook-graph-api - Facebook Actionscript API 示例未编译 - 未找到应用程序描述符

> ID：13037867
> 
> 赞同：0
> 
> 时间：2012-10-23T19:34:52.750
> 
> 标签：facebook-graph-api, actionscript, air

尝试运行位于此处 [http://code.google.com/p/facebook-actionscript-api/的一些桌面（AIR）示例](http://code.google.com/p/facebook-actionscript-api/)

无论我尝试什么，都会收到错误消息

```
Process terminated without establishing connection to debugger.

application descriptor not found 
```

但据我所知，我的 bin-debug 文件夹中存在一个正确的描述符文件 (XML)。有人知道发生了什么吗？当与最新的 AIR 3.4 结合使用时，这个问题是否与我正在使用的 Flexsdk (4.6) 有关？

这是我的应用程序描述符文件，没有大部分注释代码

```
<id>MediaUploadDemo</id>

<filename>MediaUploadDemo</filename>

<name>MediaUploadDemo</name>

<version>v1</version>

<initialWindow>

    <content>MediaUploadDemo.swf</content>

</initialWindow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:36:54.713

在这里找到了我的大部分答案

[http://alpha-beta-pruning.blogspot.ca/2011/06/migrating-flex-3-project-to-flex-45.html](http://alpha-beta-pruning.blogspot.ca/2011/06/migrating-flex-3-project-to-flex-45.html)

关键段落 '每个 AIR sdk 往往都有自己的应用程序描述符文件格式，这意味着使用 AIR 2.0 创建的应用程序必须将其描述符文件“迁移”到新的 AIR 2.7 sdk。我的建议是从头开始创建一个针对新 sdk 的新项目，这样我们就可以获取它的描述符文件，将其复制/粘贴到我们的“旧”项目并更改必要的值以适应我们的项目（例如项目名称等）。

# core-data - CoreData：将修改后的托管对象另存为新对象

> ID：13037879
> 
> 赞同：0
> 
> 时间：2012-10-23T19:35:35.947
> 
> 标签：core-data, persistence, nsmanagedobject

我的应用程序允许用户编辑数据，但在保存期间可能会发生两件事：

1.  如果数据名称保持不变，只需将对象保存为编辑版本即可。即他们只是在编辑现有的对象。

2.  但是，如果他们更改了名称，这应该会创建一个新实例并将已编辑的数据恢复为原始数据。

显然，1 是简单的情况，并且工作得很好。但是我对处理 2 的最佳方法感到矛盾。将修改后的 NSManagedObject 保存为数据库中的新行有多好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:12:52.750

没有明显的方法可以“复制” a `NSManagedObject`。最强大的方法是从头开始简单地重新创建所有内容。

确保您将所有更改的属性单独存储（这里我假设它们位于不同的文本字段中，或者它们与现有对象没有变化）。当您的编辑视图控制器被解除时，您可以做出此决定（是否新实例）：

```
if (![nameTextField.text isEqualToString:object.name]) {
   ObjectClass *newObject = [NSEntityDescription 
       insertNewObjectForEntityForName:@"ObjectClass" 
                inManagedObjectContext:self.managedObjectContext];
   newObject.name = nameTextField.text;
   newObject.attribute1 = oldObject.attribute1;
   // or
   newObject.attribute1 = attribute1TextField.text;
   // do this for all attributes
   [self.managedObjectContext save:nil]; 
} 
```

# desire2learn - D2L LMS 中的 SSO 到用户进度页面

> ID：13037886
> 
> 赞同：0
> 
> 时间：2012-10-23T19:36:10.220
> 
> 标签：desire2learn

是否可以直接 SSO 到 D2L LMS 中的用户进度页面。如果我提供课程的组织单位 ID，当前的 SSO 功能可以将我带到主页或课程主页。但是我希望父母直接进入用户进度页面。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:40:29.937

在即将到来的 2012 年秋季版本 (v10.2.0) 中，应该可以 SSO 到用户进度页面；但是，它不能与以前的版本一起正常工作。

# perl - Extract Contents from HTML Table

> ID：13037888
> 
> 赞同：1
> 
> 时间：2012-10-23T19:36:15.133
> 
> 标签：perl, html-table, extract

> **Possible Duplicate:**
> [Extract Table Contents using Perl](https://stackoverflow.com/questions/13037220/extract-table-contents-using-perl)

I am trying to extract table content from a html file using HTML::TableExtract. My problem is my html file is structured in the following way:

* * *

```
!DOCTYPE html>
<html>
<body>

    <h4>One row and three columns:</h4>

    <table border="1">
      <tr>
        <td>
        <p> 100 </p></td>
        <td>
        <p> 200 </p></td>
        <td>
        <p> 300 </p></td>
        </tr>
      <tr>
        <td>
        <p> 100 </p></td>
        <td>
        <p> 200 </p></td>
        <td>
        <p> 300 </p></td>
        </tr>
    </table>
</body> 
```

Because of this structure, my output looks like:

* * *

```
 100|

   200|

   300|

   400|

   500|

   600| 
```

* * *

## Instead of what I want:

```
 100|200|300|
   400|500|600| 
```

* * *

Can you please help? Here is my perl code

```
use strict;
use warnings;
use HTML::TableExtract;

my $te = HTML::TableExtract->new();
$te->parse_file('Table_One.html');

open (DATA2, ">TableOutput.txt")
    or die "Can't open file";

foreach my $ts ($te->tables()) {

    foreach my $row ($ts->rows()) {

        my $Final = join('|', @$row );
    print DATA2 "$Final";
    }
}
close (DATA2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:40:38.940

```
sub trim(_) { my ($s) = @_; $s =~ s/^\s+//; $s =~ s/\s+\z//; $s }

foreach my $ts ($te->tables()) {
    foreach my $row ($ts->rows()) {
        print DATA2 join('|', map trim, @$row), "\n";
    }                                            
}                                                 ^
                                                  |
                                                  | 
```

Or if you really want the trailing "`|`",

```
sub trim(_) { my ($s) = @_; $s =~ s/^\s+//; $s =~ s/\s+\z//; $s }

foreach my $ts ($te->tables()) {
    foreach my $row ($ts->rows()) {
        print DATA2 (map { trim($_).'|' } @$row), "\n";
    }
} 
```

# c++ - 将 n char* 复制到另一个内部

> ID：13037889
> 
> 赞同：4
> 
> 时间：2012-10-23T19:36:15.800
> 
> 标签：c++, copy

我将一个来自 SQL SERVER 列的 UUID 值（通过 Qt Sql 模块）绑定到一个 QUuid 对象中。之后，我必须使用将 char* 作为参数的分配函数将其分配给内部 uuid 对象。

QUuid 将几个 char* 公开为公共成员，所以我必须用几个 char * QUuid 的成员构建一个 16 字节的 char *。

即，复制：

```
char buff0;
char buff1;
char buff2[2];
char buff3[4];
char buff4[8]; 
```

里面

```
char final[16]; 
```

我用 memcpy 来完成这个任务：

```
int accu = 0;    
memcpy(final, &buff0, sizeof(buff0)); 
accu += sizeof(buff1);
memcpy(final+accu, &buff1, sizeof(buff1));
accu += sizeof(buff2);
memcpy(final+accu, buff2, sizeof(buff2));
accu += sizeof(buff3);
memcpy(final+accu, buff3, sizeof(buff3));
accu += sizeof(buff4);
memcpy(final+accu, buff4, sizeof(buff4)); 
```

但我发现这种做事方式并不真正具有可读性和可维护性。我正在寻找一种更优雅的方式来完成这项任务。优雅我的意思是更少的代码行和/或更少的算术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:46:32.223

一种选择是使用联合，以便您可以交替使用任一定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:13:51.513

这是 C++11 STL 版本。

```
char* out = final;
out = std::copy_n(&buff0, 1, out);
out = std::copy_n(&buff1, 1, out);
out = std::copy_n(buff2, 2, out);
out = std::copy_n(buff3, 4, out);
out = std::copy_n(buff4, 8, out); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:49:13.953

使用 x86 程序集

```
;; FASM/NASM syntax
MOV    esi, final
MOVZX  eax, byte [buf0]
MOVZX  ebx, byte [buf1]
MOVZX  ecx, word [buf2]
MOV    edx, dword [buf3] 
MOV    byte [esi], al
MOV    byte [esi+1], bl
MOV    eax, dword [buf4]
MOV    ebx, dword [buf4+4]
MOV    word [esi+2], cx
MOV    dword [esi+4], edx
MOV    dword [esi+8], eax
MOV    dword [esi+12], ebx 
```

或者如何假设buf的所有内存都是线性分配的（没有填充）并且只使用一个memcpy

```
memcpy(final, buf0, 16) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:50:09.813

```
memcpy(&final[0], &buff0, 1);
memcpy(&final[1], &buff1, 1);
memcpy(&final[2], &buff2[0], 2);
memcpy(&final[4], &buff3[0], 4);
memcpy(&final[8], &buff4[0], 8); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T19:57:59.423

首先，下面是一个 C++ 2011 解决方案，它创建了一个静态检查`copy()`函数：它接受`char`s 和 s 的数组`char`作为参数，并且需要`char`添加 s 的数量来填充传递的第一个数组。当然，可以根据需要删除静态检查。原始版本有一些错别字和遗漏。

```
#include <algorithm>
#include <iostream>
#include <iterator>

int constexpr size(char const&) { return 1; }
template <int Size>
int constexpr size(char const(&)[Size]) { return Size; }
template <typename T0, typename... T>
int constexpr size(T0 const& arg0, T const&... args) {
    return size(arg0) + size(args...);
}

char* copy_intern(char* to, char c) { *to = c; return ++to; }
template <int Size>
char* copy_intern(char* to, char const (&array)[Size]) {
    return std::copy(array, array + Size, to);
}

template <typename T0, typename... T>
char* copy_intern(char* to, T0 const& arg0, T const&... args) {
    return copy_intern(copy_intern(to, arg0), args...);
}

template <int Total, typename... T>
void copy(char (&to)[Total], T const&... args)
{
    static_assert(Total == size(args...), "wrong argument size");
    copy_intern(to, args...);
}

int main()
{
    char buff0    = 'a';
    char buff1    = 'b';
    char buff2[2] = { 'c', 'd' };
    char buff3[4] = { 'e', 'f', 'g', 'h' };
    char buff4[8] = { 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p' };
    char final[16];

    copy(final, buff0, buff1, buff2, buff3, buff4);
    *std::copy(final, final + 16,
               std::ostreambuf_iterator<char>(std::cout)) = '\n';
} 
```

请注意，前两个`copy_intern()`函数也可以在 C++ 2003 中使用，以推断参数的类型和大小。也就是说，使用这些功能，可能重命名为认为合适，您可以获得至少自动获取尺寸的东西：

```
 char* tmp = final;
    tmp = copy_intern(tmp, buff0);
    tmp = copy_intern(tmp, buff1);
    tmp = copy_intern(tmp, buff2);
    tmp = copy_intern(tmp, buff3);
    tmp = copy_intern(tmp, buff4); 
```

# java - JBoss 7 缺少 jboss.naming.context.java - 无法运行 EAR

> ID：13037890
> 
> 赞同：0
> 
> 时间：2012-10-23T19:36:18.067
> 
> 标签：java, jboss, ejb

我正在尝试在 jboss 7 上运行耳朵，每次运行耳朵时都会收到此错误：

> "缺少/不可用依赖项的服务" => ["jboss.persistenceunit.\"PROJECTNAME.jar#PROJECTNAMEPU\" 缺少 [ jboss.naming.context.java.PROJECTNAME ]"]

同样在此错误之前，我会为每个会话/实体 bean 获得此反馈；

> INFO [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor]（MSC 服务线程 1-8）部署“PROJECTNAME.ear”的部署单元子部署“PROJECTNAME.war”中名为 SESSIONBEAN 的会话 bean 的 JNDI 绑定如下：

我试着查找它并找出我缺少的东西，有什么建议或帮助吗？

**更新：** 在我的独立.xml 中为 jboss

```
<datasource jndi-name="java:jboss/datasources/PROJECTNAME" enabled="true" use-java-context="true" pool-name="PROJECTNAME" use-ccm="false">
    <connection-url>jdbc:oracle:thin:@SERVER:PORT:support</connection-url>
    <driver>ojdbc14.jar</driver>
    <pool>
        <min-pool-size>10</min-pool-size>
        <max-pool-size>20</max-pool-size>
        <prefill>true</prefill>
    </pool>
    <security>
        <user-name>USERNAME</user-name>
        <password>PASS</password>
    </security>
</datasource>
<xa-datasource jndi-name="java:jboss/datasources/PROJECTNAME" pool-name="PROJECTNAME">
   <driver>ojdbc14.jar</driver>
   <xa-datasource-property name="URL">jdbc:oracle:thin:@SERVER</xa-datasource-property>
   <xa-pool>
        <min-pool-size>10</min-pool-size>
        <max-pool-size>20</max-pool-size>
        <prefill>true</prefill>
   </xa-pool>
   <security>
        <user-name>USERNAME</user-name>
        <password>PASS</password>
   </security>
</xa-datasource>
<drivers>
    <driver name="oracle" module="com.oracle.ojdbc14">
        <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
        <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
    </driver>
</drivers> 
```

我的 persitence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="PROJECTNAMEPU" transaction-type="JTA">
    <jta-data-source>java:jboss/datasources/PROJECTNAME</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:47:03.110

看起来您的 EAR 需要在 JBoss 中配置一些 JNDI 绑定，可能是供 JPA 使用的数据源。Java EE 应用程序可以依赖于容器提供的服务，这些服务通常使用命名服务 (JNDI) 进行查找。

检查您尝试部署的 EAR 随附的部署/安装说明，或向提供该应用程序的人咨询。不幸的是，如果没有更多信息，就不可能提供更多帮助。

# string - 在 Perl 中拆分数字字符串

> ID：13037891
> 
> 赞同：-4
> 
> 时间：2012-10-23T19:36:18.660
> 
> 标签：string, perl, split

我有一个数字字符串：

```
"13245988" 
```

我想在连续数字之前和之后拆分。

预期输出为：

```
1
32
45
988 
```

这是我尝试过的：

```
#!/usr/bin/perl
use strict;
use warnings;

my $a="132459";
my @b=split("",$a);
my $k=0;
my @c=();
for(my $i=0; $i<=@b; $i++) {
    my $j=$b[$i]+1;
    if($b[$i] == $j) {
        $c[$k].=$b[$i];
    } else {
        $k++;
        $c[$k]=$b[$i];
        $k++;
    }
}
foreach my $z (@c) {
    print "$z\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:55:59.850

根据明确的问题进行编辑。像这样的东西应该工作：

```
#!/usr/bin/perl
use strict;
use warnings;

my $a = "13245988";
my @b = split("",$a);

my @c = ();
push @c, shift @b; # Put first number into result.

for my $num (@b) { # Loop through remaining numbers.

    my $last = $c[$#c] % 10; # Get the last digit of the last entry.

    if(( $num <= $last+1) && ($num >= $last-1)) {
        # This number is within 1 of the last one
        $c[$#c] .= $num; # Append this one to it
    } else {
        push @c, $num; # Non-consecutive, add a new entry;
    }
}

foreach my $z (@c) {
    print "$z\n";
} 
```

输出：

```
1
32
45
988 
```

# c++ - 使用 ifstream 的模板函数有什么问题？

> ID：13037906
> 
> 赞同：0
> 
> 时间：2012-10-23T19:37:06.327
> 
> 标签：c++, templates, vector

我正在实现一个模板函数，以逐行将文件和类似文件的实体读取到向量中：

```
#include <iostream>
#include <vector>
#include <iostream>
#include <iterator>
#include <algorithm>
#include <fstream>
using namespace std;
template<typename T> vector<T> readfile(T ref1)
{
    std::vector<T> vec;
    std::istream_iterator<T> is_i;
    std::ifstream file(ref1);
    std::copy(is_i(file), is_i(), std::back_inserter(vec));
    return vec;
} 
```

我希望在 main 中使用以下代码读取文件：

```
int main()
{
    std::string t{"example.txt"};
    std::vector<std::string> a = readfile(t);
    return 0;
} 
```

我收到错误消息：“不匹配调用 '(std::istream_iterator, char, ...

让我知道是否需要提供更多错误消息。很可能我只是把一些简单的事情搞砸了。但我不明白为什么 - 使用教程我得到了这个，我认为这是一个很好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:40:32.977

您显然打算`is_i`变成一种类型，而是声明了一个类型的变量`std_istream_iterator<T>`。你可能打算写：

```
typedef std::istream_iterator<T> is_i; 
```

您可能还应该将模板参数与用于文件名的类型分离，因为模板在其他方面具有相当的限制性：

```
template <typename T>
std::vector<T> readfile(std::string const& name) {
    ...
}

std::vector<int> values = readfile<int>("int-values"); 
```

# jquery - MVC 3 自定义验证

> ID：13037908
> 
> 赞同：0
> 
> 时间：2012-10-23T19:37:09.790
> 
> 标签：jquery, asp.net-mvc

我正在开发一个 MVC 3 应用程序，该应用程序在某些时候需要用户提供一些数据。然后将数据发送到外部 DLL（我不允许更改它）。传输是通过将对象传递给函数来完成的，这样对象就可以成为我的视图模型。

问题是我无权将属性添加到模型中，也没有添加元数据类的权限。

我决定使用使用 JQuery 的自定义验证机制，所以我制作了这样的辅助函数：

```
@helper TextBox(string name, object value = null)
    {
        var val = value ?? "";
    <tr>
        <td class="label">@name :
        </td>
        <td>
            <input type="text" name="@name" id="@name" value="@val" />
        </td>
    </tr>
}

@helper ValidationMessage(string name)
    {<span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="@name"></span>}

@helper TextBoxRequired(string text, string fildName, object value = null, string message = "*")
    {
        var val = value ?? "";
    <tr>
        <td class="label">@text :</td>
        <td>
            <input type="text" name="@fildName" id="@fildName" value="@val" data-val="true" data-val-required="@message" />
            @ValidationMessage(fildName)</td>
    </tr>
} 
```

我已经包含了 jquery-1.8.2、jquery.validate 和 jquery.validate.unobtrusive，但它不起作用。

任何帮助表示赞赏。

编辑：网络配置设置：

```
 <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

我正在使用 Firefox、Chrome 和 IE 进行启用 JavaScript 的测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:49:13.280

我建议您使用视图模型。将不允许更改的域模型保留在其程序集中。然后让您的控制器从视图中获取/传递视图模型。这些视图模型是您专门为给定视图的要求定义的类。然后可以使用您需要的任何验证数据注释来装饰视图模型属性。

然后在您的视图中使用标准和强类型的助手，例如`Html.TextBoxFor`和`Html.ValidationMessageFor`，不要在某些助手中重新发明轮子。

顺便说一句，为了使客户端验证正常工作，您至少需要按此**顺序**提供以下 3 个参考：

1.  `jquery`
2.  `jquery.validate`
3.  `jquery.validate.unobtrusive`

# .net - 如果唯一的网络使用是用于 Windows 商店，是否有必要声明“互联网客户端”功能？

> ID：13037909
> 
> 赞同：1
> 
> 时间：2012-10-23T19:37:19.680
> 
> 标签：.net, client, capability, windows-store

如果windows store 应用程序不访问网络，除了查询windows store 是否已购买功能外，是否需要声明'internet client' 能力？

我想避免声明我不需要的功能。此外，它将删除应用程序引用隐私政策的要求。（因为即使我们收集了数据也无法传输，所以没有多大意义。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:21:08.357

更新：起初我可能误解了你的问题。如果您只使用内置调用来检查功能，则不需要 Internet 客户端功能。据我了解，许可调用是通过底层 API 完成的，而不是通过 Internet 客户端连接。

检查的最简单方法是在发布模式下构建一个新的应用程序包，然后将其安装在您的计算机上并在 Visual Studio 2012 之外运行它。如果它在那里工作，你应该很好。不过，您可能仍然需要一个隐私政策，表明您的应用程序可能偶尔会查询 Microsoft Store 以识别已购买的功能。

下面的原始答案很巧妙，因为它完全有帮助：

彼得是对的。如果不在清单中包含该功能，您的应用将无法进行任何互联网通话。制定基本的隐私政策非常简单。这是一个来自 Microsoft 人员制作的社区扩音器应用程序的示例。

[http://devhammer.net/privacy](http://devhammer.net/privacy)

只需简单地解释您的应用程序需要互联网连接的用途，以及它是否使用任何私人信息。这只是一个非常基本的信任声明，让用户知道为什么您的应用需要在线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:02:46.223

“InternetClient”功能提供通过防火墙对 Internet 和公共网络的出站访问。如果没有该功能，应用程序将无法通过防火墙访问 Store。

# ios - 是否为 iOS 5 记录了用户定义的运行时属性？

> ID：13037912
> 
> 赞同：2
> 
> 时间：2012-10-23T19:37:43.987
> 
> 标签：ios, xcode4, interface-builder

在 Xcode 4 的界面编辑器的 Identity Inspector 中，有一个标题为“用户定义的运行时属性”的部分

![用户定义的运行时属性](../Images/1060b9bf923808ac569717d11d049629.png)

在此处设置值似乎适用于 iOS 5 及更高版本，但我找不到这方面的文档。如果我使用它，我是否会冒着因使用无证行为而被拒绝的风险？是否有我无法找到的 Apple 文档？

# python - 如何在python中用字符串填充矩阵的对角线？

> ID：13037915
> 
> 赞同：1
> 
> 时间：2012-10-23T19:37:57.693
> 
> 标签：python, list, matrix

我正在尝试使用以下代码在 python 中填充空矩阵（列表列表）的对角线：

```
source=['a','b','c']

rows=[]
for x in source:
    rows.append('')
matrix=[]
for x in source:
    matrix.append(rows)

print "before populating", matrix

for x in range (0, len(source)):
    matrix[x][x]=source[x]

print "after populating", matrix 
```

我意识到这不是完成此任务的最有效方法，但这实际上似乎是我遇到的最少的问题。

我得到的输出是这样的：

```
[['a', 'b', 'c'], ['a', 'b', 'c'], ['a', 'b', 'c']] 
```

但我希望的输出是这样的：

```
[['a', '', ''], ['', 'b', ''], ['', '', 'c']] 
```

知道出了什么问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:44:00.907

```
for x in source:
    matrix.append(rows) 
```

**您使用对rows**的引用填充**矩阵**。您可以使用**行**切片来制作副本

 ****```
>> rows = ['a','b','c']
>>> matrix = [rows[:] for _ in range(len(rows))]
>>> matrix
[['a', 'b', 'c'], ['a', 'b', 'c'], ['a', 'b', 'c']]
>>> matrix[1][1]=' '
>>> matrix
[['a', 'b', 'c'], ['a', ' ', 'c'], ['a', 'b', 'c']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:44:08.657

一个简单的列表理解应该做到这一点：

```
In [62]: source=['a','b','c']

In [63]: [[""]*i + [x] + [""]*(len(source)-i-1) for i,x in enumerate(source)]
Out[63]: [['a', '', ''], ['', 'b', ''], ['', '', 'c']]

In [64]: source=['a','b','c','d']

In [65]: [[""]*i + [x] + [""]*(len(source)-i-1) for i,x in enumerate(source)]
Out[65]: [['a', '', '', ''], ['', 'b', '', ''], ['', '', 'c', ''], ['', '', '', 'd']] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:46:33.810

问题在于这段代码：

```
rows=[]
for x in source:
    rows.append('')
matrix=[]
for x in source:
    matrix.append(rows) 
```

您每次都提供相同的**参考。**

```
for x in range (0, len(source)):
    matrix[x][x]=source[x] 
```

这将修改同一个对象。解决方案：使用副本：

```
matrix=[]
for x in source:
    # use a copy.
    matrix.append(rows[:]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T19:47:03.343

您需要为矩阵中的每一行创建一个新的独立元素行。这样做`matrix.append(rows)`只会一次又一次地插入对同一列表实例的引用。

试试`matrix.append(list(rows))`吧。

对于更复杂的情况，该`copy`模块可能会有所帮助。

问题的根本原因在于 Python 只处理对对象实例的引用，它没有像 C 中那样的“变量”概念，因此在进行赋值时不会复制对象。相反，只有一个新的参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T19:49:06.657

```
source=['a','b','c']

matrix = [['' if i!=j else source[i] for i in range(len(source))]
     for j in range(len(source))] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T19:55:05.267

其他人已经解释了您的代码发生了什么，但这是另一种选择......

如果您不介意使用`numpy`然后：

```
import numpy as np
np.diag(['a', 'b', 'c']).tolist()
# [['a', '', ''], ['', 'b', ''], ['', '', 'c']] 
```

And if you're going to be dealing with matrices then it's probably not a bad idea to look at `numpy` or `scipy` anyway...****

# c# - 如何解决 KeyNotFoundException

> ID：13037920
> 
> 赞同：4
> 
> 时间：2012-10-23T19:38:13.407
> 
> 标签：c#, .net, javascriptserializer

我正在使用以下内容将 JSON 字符串反序列化为我自己的类：

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
Dictionary<string, object> x = (Dictionary<string, object>)serializer.DeserializeObject(json);
MyJsonStruct data = serializer.Deserialize<MyJsonStruct>(x["d"].ToString()); 
```

但是一旦`JavaScriptSerializer.Deserialize()`调用该方法，就会抛出异常：

```
A first chance exception of type 'System.Collections.Generic.KeyNotFoundException' occurred in mscorlib.dll
System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key) 
```

有没有办法找出**哪个键**触发了异常？

用于对此类异常进行故障排除的通用技术（或配方）将不胜感激。

**更新：**如果我删除`[d]`，我会收到以下信息：

```
A first chance exception of type 'System.ArgumentException' occurred in System.Web.Extensions.dll
System.ArgumentException: Invalid JSON primitive: System.Collections.Generic.Dictionary.
   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject()
   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)
   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)
   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)
   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input) 
```

但同样，我正在寻找一种通用技术，而不仅仅是解决这个特定实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:40:31.167

在 Deserialize 语句上放置一个断点，然后使用即时窗口键入`x["d"].ToString()`. 这将告诉您评估结果是什么，这将等同于您尝试反序列化的密钥。

如果您在评估时遇到错误，那么您的 x 字典没有“d”作为键，这是您可以检查的另一件事。

编辑：我不认为丹尼尔建议你`["d"]`完全删除。如果你这样做，当它非常清楚地期待一个字符串时，你正在传递反序列化一个字典。这种类型不匹配是导致您看到的新错误的原因。相反，Daniel 建议不要将您拥有的字典包含`"d"`为有效键。它可能会或可能不会，我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:40:15.050

可能它在您`x`访问`d`.

# excel - ExcelVBA 如果 SumA > SumB 或 Sum C 那么“G”如何？

> ID：13037921
> 
> 赞同：0
> 
> 时间：2012-10-23T19:38:16.730
> 
> 标签：excel, vba

我对 excel vba 很陌生，这就是我为满足以下条件而写的

*   sumA 大于 sumB 或 sumC 然后 "G"
*   sumB 大于 sumA 或 sumC 然后 "Y"
*   sumC 大于 sumA 或 sumB 然后 "R"

在 gr,yr,rr 单元格范围内是我将手动输入的数字。

```
Dim gr As Range
Dim yr As Range
Dim rr As Range
Dim gr1 As Long
Dim yr1 As Long
Dim rr1 As Long
Dim overallrisk As Range

Set overallrisk = Sheets("Dashboard").Range("C24")
Set gr = Sheets("Dashboard").Range("C30:C32").Range("C33:C35").Range("D33:D35")
Set yr = Sheets("Dashboard").Range("C27:C29").Range("D30:D32").Range("E33:E35")
Set rr = Sheets("Dashboard").Range("D27:D29").Range("E27:E29").Range("E30:E32")

gr1 = Application.WorksheetFunction.Sum(gr)
yr1 = Application.WorksheetFunction.Sum(yr)
rr1 = Application.WorksheetFunction.Sum(rr)

If gr1 > yr1 Or rr1 Then
    overallrisk = "G"
ElseIf yr1 > gr1 Or rr1 Then
    overallrisk = "Y"
ElseIf rr1 > yr1 Or gr1 Then
    overallrisk = "R"
End If 
```

我没有收到任何错误，所以我认为它会起作用，但是即使我在单元格范围内输入了数字，“overallrisk”单元格仍然是空白的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:43:06.420

我相信问题是你的最后`If`陈述。你有：

```
If gr1 > yr1 Or rr1 Then 
```

我相信你的意思是：

```
If (gr1 > yr1) Or (gr1 > rr1) Then 
```

Excel 在 之后查看您的条件`OR`，并将其作为单独的语句进行评估。你要：

```
If gr1 > yr1 Or gr1 > rr1 Then
    overallrisk = "G" 
ElseIf yr1 > gr1 Or yr1 > rr1 Then     
    overallrisk = "Y" 
ElseIf rr1 > yr1 Or rr1 > gr1 Then     
    overallrisk = "R" 
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:46:56.377

这将清理您的代码，使其更具可读性，并且应该允许它正常工作！

```
Dim gr As Range, yr As Range, rr As Range
Dim gr1 As Long, yr1 As Long, rr1 As Long
Dim overallrisk As Range
Dim wks As Worksheet

Set wks = Sheets("Dashboard")

With wks

    Set overallrisk = .Range("C24")
    Set gr = .Range("C30:C32,C33:C35,D33:D35")
    Set yr = .Range("C27:C29,D30:D32,E33:E35")
    Set rr = .Range("D27:D29,E27:E29,E30:E32")

    gr1 = Application.WorksheetFunction.Sum(gr)
    yr1 = Application.WorksheetFunction.Sum(yr)
    rr1 = Application.WorksheetFunction.Sum(rr)

    If gr1 > yr1 Or gr1 > rr1 Then
        overallrisk.Value = "G"
    ElseIf yr1 > gr1 Or yr1 > rr1 Then
        overallrisk.Value = "Y"
    ElseIf rr1 > yr1 Or rr1 > gr1 Then
        overallrisk.Value = "R"
    End If

End With 
```

# java - 正则表达式“\\d?” 给出不正确的输出

> ID：13037922
> 
> 赞同：3
> 
> 时间：2012-10-23T19:38:20.403
> 
> 标签：java, regex

# 示例代码

```
Pattern p = Pattern.compile("\\d?");
Matcher m = p.matcher("ab34ef");
boolean b = false;
while (m.find())
{
    System.out.print(m.start());// + m.group());
} 
```

# 答案：012456

但是字符串总长度是 6。所以 m.start 如何在输出中给出 6，因为索引
从 0 开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:39:37.223

`\d?`匹配零个或一个字符，因此它也从字符串的最后一个字符开始，作为零宽度匹配。

请注意，您的输出实际上不是由 获得的`\d?`，而是由获得的`\d*`。您应该更改其中一个或另一个以使问题自洽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:43:09.753

`\d?`匹配零或一个数字，它匹配每个数字，但也匹配每个字符边界。

尝试匹配*至少一位*数字：

```
Pattern p = Pattern.compile("\\d+"); 
```

# c - 简单的 Bash-C 通信

> ID：13037934
> 
> 赞同：2
> 
> 时间：2012-10-23T19:39:00.287
> 
> 标签：c, bash, unix, stdout

我正在尝试构建一个响应简单 C 程序的脚本。我猜脚本需要逐行阅读并解析文本，直到找到问题。然后它必须回复相同的标准输出。脚本以无限循环读取，我在命令行上启动它

```
./script.sh & 
```

为了让它在后台运行。然后，在同一个终端中，我启动我的 C 程序，该程序在命令行上输出并在 scanf 处等待。我的问题是，这两个进程看起来好像正在与不同的标准输出进行交互，因为它们无法“看到”彼此。显然我误解了一些东西......有什么帮助吗？

```
#!/bin/bash
for (( ; ; )) do
    while read line; do
        if [ "$line" == ">" ] then
        echo "yes"
        fi
    done
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:46:13.870

使用[expect](http://en.wikipedia.org/wiki/Expect "预计")怎么样？Expect 是一个 Unix 工具，用于以编程方式回复交互式应用程序，对于解决像您这样的问题非常有用。当然，您可以在 bash 脚本中使用它。

您的问题的答案将类似于：

```
#!/bin/bash

expect << EOF
  spawn simple_c_application
  expect ">"
  send "yes\r"
  expect eof
EOF 
```

该脚本将生成您的应用程序，为您检查输出并在输出行*包含***>**时回复**yes**。您还可以在期望模式中使用锚点：字符匹配行的开头和结尾。因此，仅当该行*正好是***>**时才匹配。 ***`^``$``^>$`***

 ******你只需要从你的包管理器中安装 expect，然后像往常一样使用 bash 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:57:16.167

`mkfifo`使用从该套接字文件读取的脚本创建一个套接字文件，而不是从`stdin`. 从你的 C 程序中打开套接字，`open`然后写入这个而不是标准输出。

例子：

在终端中输入这个来创建一个套接字文件。

```
user~$ mkfifo mysocket 
```

将您的脚本更改为：

```
while :
do
    here=$(<mysocket)
    if [ "$here" == ">" ] then
        echo "yes"
    fi
done 
```

在你的 c 文件中

```
char* test = ">\n";
int mysocket = open("/home/user/mysocket","w");
int byteswrite = write(mysocket,(void*)test,2); 
```

先运行脚本，然后再运行程序******

# php - JMSSerializer 问题反序列化一对一的 Doctrine 实体

> ID：13037939
> 
> 赞同：4
> 
> 时间：2012-10-23T19:39:15.043
> 
> 标签：php, doctrine, jmsserializerbundle

我有两个以一对一关系关联的教义实体。我试图反序列化从请求返回的 json 对象，但 JMS 没有设置关联的反面。我已经解决了几个小时没有解决方案。

代码如下。

```
<?php
namespace MyNamspace\Entity;

//Annotations namespaces
use JMS\SerializerBundle\Annotation as JMS;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity(repositoryClass="MyNamspace\Repository\Policy")
 * @ORM\Table(name="policies")
 * @JMS\ExclusionPolicy("all")
 */
class Policy
{
    /**
     * [$id description]
     * @ORM\Id
     * @ORM\GeneratedValue
     * @ORM\Column(type="integer")
     * @JMS\Expose

     * @JMS\AccessType("public_method")
     */
    protected $id;

    /**
     * [$name description]
     * @var string
     * @ORM\Column(type="string", length=360)
     * @JMS\Expose
     * @JMS\AccessType("public_method")
     * @JMS\Type("string")
     */
    protected $name;

    /**
     * [$policydata description]
     *
     * @ORM\OneToOne(targetEntity="PolicyData",mappedBy="policy",cascade={"persist","remove"})
     * @JMS\Type("MyNamspace\Entity\PolicyData")
     * @JMS\AccessType("public_method")
     * @JMS\Expose
     */
    protected $policydata;
    public function setId($id)
    {
        $this->id = $id;
        return $this;
    }

    public function getId()
    {
        return $this->id;
    }

    public function setName($name)
    {
        $this->name = $name;
        return $this;
    }

    public function getName()
    {
        return $this->name;
    }
public function setPolicyData(\MyNamspace\Entity\PolicyData $policydata)
    {
        $this->policydata = $policydata;
        return $this;
    }

    public function getPolicyData(){
        return $this->policydata;
    } 
```

第二个实体在下面；

```
<?php
namespace MyNamspace\Entity;

//Annotations namespaces
use JMS\SerializerBundle\Annotation as JMS;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity(repositoryClass="MyNamspace\Repository\PolicyData")
 * @ORM\Table(name="policies_data")
 * @JMS\ExclusionPolicy("all")
 */
class PolicyData {

    /**
     * [$id description]
     * @ORM\Id
     * @ORM\GeneratedValue
     * @ORM\Column(type="integer")
     * @JMS\Expose

     * @JMS\AccessType("public_method")
     */
    protected $id;

    /**
     * [$effect description]
     * @var integer
     * @ORM\Column(type="integer")
     * @JMS\Expose
     * @JMS\AccessType("public_method")
     * @JMS\Type("integer")
     *
     */

    protected $effect;

    /**
     * @ORM\OneToOne(targetEntity="Policy",inversedBy="policydata")
     * @ORM\JoinColumn(name="policy_id", referencedColumnName="id")
     * @JMS\AccessType("public_method")
     * @JMS\Type("MyNamspace\Entity\Policy")
     * @JMS\Expose
     */
    protected $policy;

    /**
     * [$startdate description]
     * @var datetime
     * @ORM\Column(type="datetime",nullable=true)
     * @JMS\Expose
     * @JMS\AccessType("public_method")
     * @JMS\Type("DateTime")
     *
     */

    protected $startdate;

    public function setId($id)
    {
        $this->id = $id;
        return $this;
    }

    public function getId()
    {
        return $this->id;
    }
    public function getEffect()
    {
        return $this->effect;
    }

    public function setEffect($effect)
    {
        $this->effect = $effect;
        return $this;
    }

    public function setPolicy(\MyNamspace\Entity\Policy $policy)
    {
        $this->policy = $policy;
    }

    public function getPolicy()
    {
        return $this->policy;
    }

    public function getStartDate()
    {
        return $this->startdate;
    }

    public function setStartDate($startdate)
    {
        $this->startdate = $startdate;
        return $this;
    } 
```

我正在使用 Silex，控制器提取代码是；

```
public function connect(Application $app)
    {
        //New controller from the factory
        $controller = $app['controllers_factory'];

        //Create a policy (either empty or complete or maybe halfway between the 2)
        $controller->post('/', function(Request $request) use ($app){

         // Need to intercept the request to format the dates or else JMS will not deserialize
            if($request->isMethod('POST'))
            {
                $jsonData = $request->getContent();
                $dateHandler = new DateHandler();
                $data = $dateHandler->formatDate($jsonData);
            }
            print_r($data);
            $policy = $app['serializer']->deserialize($data, 'Verloc\Entity\Policy', 'json');
print_r($policy); die;
            $policy = $app['service.rights']->addPolicy($policy);

            return new Response(
                $app['serializer']->serialize($policy, 'json'),
                200
                );
        }); 
```

假设被序列化的数据是；

```
{
    "name": "Policy1",
    "policydata": [
        {
            "effect": "1",
            "startdate": "2012-10-21T00:00:00+0100"
        }
    ]
} 
```

序列化后得到的是这个；

```
MyNamspace\Entity\Policy Object
(
    [id:protected] => 
    [name:protected] => Policy1
    [policydata:protected] => MyNamspace\Entity\PolicyData Object
        (
            [id:protected] => 
            [effect:protected] => 
            [policy:protected] => 
            [startdate:protected] => 
        )

) 
```

可以看出，在反序列化主 Policy 对象的同时，PolicyData 对象为空。

# matlab - MATLAB中的数组维度不匹配

> ID：13037942
> 
> 赞同：-4
> 
> 时间：2012-10-23T19:39:30.377
> 
> 标签：matlab

为什么会出现此错误：矩阵`G`的大小为 4x50，而我留下了 2 个维度来接受数组？

> > Beta_Correlations；？？？下标分配尺寸不匹配。

==> Beta_Correlations 中的错误在 28 Correl_betas(j,k,l,:,:)=G;

```
Correl_betas=zeros(50,50,size(rates,1),4);
mats=[1:50]';
L1=-1;

for j=1:51
    L1=L1+1;
    L2=-1;
    for k=1:51
        L2=L2+1;
        for l=1:size(rates,1)

        y2=rates(l,mats2);

        yM=rates(l,:);

     dataList=struct('yM',yM,'mats',mats,'model',@NSS,'mats2',mats2,'y2',y2);
     lambda=[ L1; L2 ];   

    nObs=size(mats,1);
    G= [ones(nObs,1) (1-exp(-mats./lambda(1)))./(mats./lambda(1)) ((1-exp(-mats./lambda(1)))./(mats./lambda(1))-exp(-mats./lambda(1))) ((1-exp(-mats./lambda(2)))./(mats./lambda(2))-exp(-mats./lambda(2)))];

     Correl_betas(j,k,l,:,:)=G;
     check1=Correl_betas(1,1,1,:);
        end

    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:59:06.340

这里有一个不匹配

```
 Correl_betas=zeros(50,50,size(rates,1),4);  %4 par
 Correl_betas(j,k,l,:,:)=G;                  %5 par 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:57:34.400

算了，我明白了，只需要调整数组参数的个数！

# javascript - 将对象推送到已经存在的 javascript 对象

> ID：13037945
> 
> 赞同：-2
> 
> 时间：2012-10-23T19:39:40.937
> 
> 标签：javascript, object, push, add

我使用 nodejs 和 mongodb。

我从以下 mongodb 查询中获取字典 res：

```
Profile.find(search,['_id', 'username'],function(err, res) 
```

打印资源看起来像：

```
[
    {
        "username": "dan",
        "_id": "508179a3753246cd0100000e"
    },
    {
        "username": "mike",
        "_id": "508317353d1b33aa0e000010"
    }
]
} 
```

我想向每个 res[x] 推送另一个键值对：

```
[
    {
        "username": "dan",
        "_id": "508179a3753246cd0100000e",
        "more info": {
            "weight": "80",
            "height": "175"
        }
    },
    {
        "username": "mike",
        "_id": "508317353d1b33aa0e000010"
    },
    "more info": {
        "weight": "80",
        "height": "175"
    }
]
} 
```

我试过了 ：

`var x=0` `dic = []` `while (x<res.length){` `dic[x] = {}` `dic[x]=res[x]` `dic[x]["more info"] = {"wight" : weight, "height" : hight}` `x=x+1` `}` 但它被忽略了，我得到了

```
[
    {
        "username": "dan",
        "_id": "508179a3753246cd0100000e"
    },
    {
        "username": "mike",
        "_id": "508317353d1b33aa0e000010"
    }
]
} 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:49:42.170

请改用 for 循环。

```
for (var x = 0, len = res.length; x < len; ++x) { ... } 
```

您需要先初始化变量`x`( `var x = 0`)，然后在每次执行循环后递增它 (`++x`或`x += 1`)。

**更新：**

哦好的。顺便说一句，您为什么要创建新数组（`dic`）？JavaScript 中的对象是通过引用传递的，所以如果你只修改单个结果（res[0]、res[1]），你会得到相同的结果。

`dic[x] = {}; dic[x] = res[x]`没有意义，因为您创建了一个新对象 ( `{}`)，然后立即用对象`res[x]`指向的对象覆盖它。

尝试这个：

```
 res.forEach(function (item) {
   item['more info'] = { weight: weight, height: height };
 });

 console.log(res); 
```

# ruby-on-rails - 错误 H10：Heroku 上的应用程序错误

> ID：13037950
> 
> 赞同：0
> 
> 时间：2012-10-23T19:39:51.987
> 
> 标签：ruby-on-rails, heroku

我是使用 Rails 和 Heroku 的新手。我尝试将我的应用程序推送到 Heroku，并且推送成功，但由于某种原因，我在 Heroku 站点上收到了应用程序错误：

```
"An error occurred in the application and your page could not be served." 
```

如果有人可以提供帮助，那就太好了。传递有关我的应用程序和环境的一些信息。

在我的 Gem 文件中，我运行了以下数据库：

```
group :development, :test do
gem "sqlite3", "~> 1.3.6"
end

group :production do 
gem 'pg'
end

group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'therubyracer'
gem 'uglifier', '>= 1.0.3'
end 
```

在 Database.yml 中设置了以下数据库：

```
development:
adapter: sqlite3
database: db/development.sqlite3
pool: 5
timeout: 5000

test:
adapter: sqlite3
database: db/test.sqlite3
pool: 5
timeout: 5000

production:
adapter: sqlite3
database: db/production.sqlite3
pool: 5
timeout: 5000 
```

首先我不明白为什么 .yml 文件在生产服务器中仍然显示 Sqlite3？它不应该更改为pgres吗？在 Heroku 日志中，这是显示的关键错误消息：

```
 2012-10-23T19:22:36+00:00 heroku[router]: Error H10 (App crashed) -> GET thawing-dusk-  8202.herokuapp.com/analysis dyno= queue= wait= service= status=503 bytes= 
```

希望有人可以帮助我解决这个问题！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-08T07:08:38.180

您的 Rails 应用程序很可能在从源文件启动时引发异常。

这个异常在开发环境中可能并不明显，因为 Rails 不会在开发或测试中急切地加载文件。但是，当生产环境导致 Rails 应用程序急切地加载所有源文件时，异常会中断应用程序的启动过程，并且应用程序会因 Heroku 日志中缺少堆栈跟踪而崩溃。

要获得信息丰富的堆栈跟踪，请从运行的终端访问 Rails 控制台`heroku run rails c`，假设您的项目包含并配置了 Heroku Toolbelt。这也会在启动时失败，因为您正在访问生产环境，但堆栈跟踪将比 Heroku 日志更广泛。

诊断问题的另一种方法是将开发环境设置为预先加载源文件。

```
# config/environments/development.rb
Rails.application.configure do

  config.eager_load = true

end 
```

最后，这个问题的最佳解决方案是审查你的测试套件，如果有的话，包括验证源文件功能的测试用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T07:17:21.080

check is there any process which takes more than 30 seconds, if yes then your app will crashed with H10 error.

# iphone - ScrollView 中的多个视图

> ID：13037952
> 
> 赞同：0
> 
> 时间：2012-10-23T19:40:04.163
> 
> 标签：iphone, ios, memory-management, uiview, uiscrollview

我正在尝试制作一个调查应用程序。一个滚动视图中有 20 个视图和许多 uitextview。当我尝试这样做时，该应用程序的运行速度非常慢。我认为我无法正确进行内存管理。你能帮我做对吗？非常感谢。这是我的代码：

```
 -(void)textViewBicimle: (UITextView *)textAlani{
[textAlani.layer setBorderColor:[[[UIColor blackColor] colorWithAlphaComponent:1.0] CGColor]];
[textAlani.layer setBorderWidth:1.0];
  }

  - (void) tableCiz:(NSMutableArray *)hucreler sutun:(int)sutunSayisi satir:     (int)satirSayisi{
 int z = 0;
 for (int i =0;i<satirSayisi;i++){
     for(int j=0;j<sutunSayisi&&z<satirSayisi*sutunSayisi;j++,z++){
         [self textViewBicimle:[hucreler objectAtIndex:z]];
         [[hucreler objectAtIndex:z] setFrame:CGRectMake((20+j*100), (20+i*40), 100, 40)];
     }
 }
 }

 -(void)hucreArrayOlustur: (int)sutunSayisi suankiView:(UIView *)soruViewIki satir:(int)satirSayisi{
for (int i = 0; i <sutunSayisi*satirSayisi; i++){
    self.textView = [[UITextView alloc]init];
    self.textView.text = @"dsgfdh";
    [self.hucreArray addObject:self.textView];
    [soruViewIki addSubview:self.textView];
    [self.textView release];
}
}

-(void)viewOlustur{
 for (int i = 0; i <soruAdedi; i++){
self.hucreArray = [[[NSMutableArray alloc]init]autorelease];
if (i == 0){
    self.soruView = [[UIView alloc]initWithFrame:CGRectMake(20, 20, 728, 0)];
    self.soruView.clipsToBounds = YES;
    self.soruView.backgroundColor = [UIColor lightGrayColor];
    [self hucreArrayOlustur:5 suankiView:self.soruView satir:10];
    [self tableCiz:self.hucreArray sutun:5 satir:10];
    CGRect frame = self.soruView.frame;
    CGRect frame2 = [[self.hucreArray objectAtIndex:49] frame];
    frame.size.height =  frame2.origin.y+frame2.size.height+34;
    self.soruView.frame = frame;
    [self.viewArray addObject:self.soruView];
    [scrollView addSubview:self.soruView];
    [self.soruView release];
}
else{
    CGRect frameGecici = [[self.viewArray objectAtIndex:i-1] frame];
    float geciciY = frameGecici.origin.y+frameGecici.size.height+1;
    self.soruView = [[UIView alloc]initWithFrame:CGRectMake(20, geciciY, 728, 0)];
    self.soruView.clipsToBounds = YES;
    self.soruView.backgroundColor = [UIColor lightGrayColor];
    [self hucreArrayOlustur:5 suankiView:self.soruView satir:10];
    [self tableCiz:self.hucreArray sutun:5 satir:10];
    CGRect frame = self.soruView.frame;
    CGRect frame2 = [[self.hucreArray objectAtIndex:49] frame];
    frame.size.height =  frame2.origin.y+frame2.size.height+34;
    self.soruView.frame = frame;
    [self.viewArray addObject:self.soruView];
    [scrollView addSubview:self.soruView];
    [self.soruView release];
}

}
}

- (void)viewDidLoad
{
[super viewDidLoad];
scrollView.contentSize = CGSizeMake(0, 10000);
self.viewArray = [[NSMutableArray alloc]init];
[self viewOlustur];
NSLog(@"%@",self.viewArray);
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
 [super didReceiveMemoryWarning];

 // Dispose of any resources that can be recreated.
}

 - (void)dealloc {
 [self.soruView release];
 [self.textView release];
 [scrollView release];
 [super dealloc];
 }

 - (void)viewDidUnload {
 [self setScrollView:nil];
 [super viewDidUnload];
  }
  @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:52:30.243

[UIScrollView 参考页面](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)中的以下建议可能会有所帮助：

> 管理滚动视图中显示的内容绘制的对象应该平铺内容的子视图，这样视图就不会超过屏幕的大小。当用户在滚动视图中滚动时，此对象应根据需要添加和删除子视图。

因此，如果您的滚动视图中有一个大的调查视图，并且许多问题视图在调查视图中都有多个视图，那么您可以例如消除调查视图并仅在滚动视图的内容视图中布置可见问题.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T23:16:22.180

由于我们正在讨论内存管理，因此我想在这里更正一些事情，只是为了实现最佳内存管理实践。

你不应该使用，

```
self.textView = [[UITextView alloc]init]; 
```

而是将其用作，

```
self.textView = [[[UITextView alloc] init] autorelease]; 
```

并且不要`[self.textView release];`直接在属性上使用。如果你不使用 ARC，你可以在你的 dealloc 方法中加入下面的行，

```
self.textView = nil; 
```

如果您可以将某些变量作为局部变量，则不需要将其用作属性。

代替，

```
self.soruView = [[UIView alloc]initWithFrame:CGRectMake(20, 20, 728, 0)]; 
```

也许您可以将其用作，

```
UIView *soruView = [[UIView alloc] initWithFrame:CGRectMake(20, 20, 728, 0)];
//rest of the code here
[self.scrollView addSubview:soruView];
[soruview release]; 
```

如果您不需要同时使所有视图可见，您可以在用户滚动到该点时添加其余视图。这也应该有助于优化内存使用。

# java - 如何将唯一 ID、ID 组合映射到 Java 中清晰的编号行

> ID：13037956
> 
> 赞同：2
> 
> 时间：2012-10-23T19:40:26.437
> 
> 标签：java, algorithm, loops, recursion, io

我想创建一种非递归的方式来创建类似于 -

```
1
1.1
1.2
1.2.1
1.3
2
2.1  etc etc (these items can be infinitely deep) 
```

我拥有的唯一识别信息是一个两个数字的 ID。第一个 ID 是标识项目的 ID，第二个 ID 标识它属于什么，零始终是文档根。

例如：

```
123,0
456,123
789,123
777, 789
999, 123
888,0
444,888 
```

会被翻译成——

```
1
1.1
1.2
1.2.1
1.3
2
2.1 
```

数据是内联读取的。我不知道它之后发生了什么，只知道它前面发生了什么。我相信这应该很简单，但由于某种原因，我很难想出一个有效的解决方案。注意：项目将始终按顺序排列。例如，在获得项目 1.1 之前，我永远不会获得项目 1.2，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:51:32.507

我的算法是：

*   当你阅读每一对`(x, y)`时，插入`x`一棵树作为`y`
*   要打印，请在树上运行深度优先递归。如果您想在没有递归的情况下执行此操作，则可以改用堆栈实现。

当然，这是一个非常笼统的草图 - 就具体实现而言，有很多选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:35:38.460

如果项目以正确的顺序出现，堆栈就可以了：

```
public class Item {
    private int id;
    private int parentId;

    public Item(int id, int parentId) {
        this.id = id;
        this.parentId = parentId;
    }

    public int getId() { return id; }
    public int getParentId() { return parentId; }
}

public class NumberedItem {
    private Item item;
    private int childCount;
    private String number;

    public NumberedItem(Item item, String number) {
        this.item = item;
        this.childCount = 0;
        this.number = number;
    }

    public Item getItem() { return item; }
    public String getNumber() { return number; }

    /* package */ int incrementChildCount() {
        return ++childCount;
    }
}

public NumberedItemIterator implements Iterable<NumberedItem> {
    private Iterator<Item> items;
    private Stack<NumberedItem> numberStack;

    public NumberedItemIterator(Iterable<Item> itemsIterable) {
        items = itemsIterable.iterator();
        numberStack = new Stack<NumberedItem>();
        numberStack.push(new NumberedItem(null, null));
    }

    public boolean hasNext() {
        return items.hasNext();
    }

    public NumberedItem next() {
        Item current = items.next();
        int parentId = current.getParentId();

        NumberedItem parent = null;
        while (!numberStack.empty()) {
            NumberedItem candidate = numberStack.peek();
            if (candidate.getItem().getId() == parentId) {
                parent = candidate;
                break;
            }
            numberStack.pop();
        }

        if (parent == null) throw new RuntimeException("Inconsistent ordering");

        String number = Integer.toString(parent.incrementChildCount());
        if (parent.getNumber() != null) {
            number = parent.getNumber() + "." + number;
        }

        NumberedItem result = new NumberedItem(current, number);

        numberStack.push(result);

        return result;
    }

    public void remove() {
        throw new UnsupportedOperationException();
    }
} 
```

# powershell - 在 powershell 脚本中捕获批处理文件的输出

> ID：13037963
> 
> 赞同：4
> 
> 时间：2012-10-23T19:40:55.350
> 
> 标签：powershell, powershell-1.0

我需要捕获从 .ps1 文件中运行的 .bat 文件创建的输出。

我是 powershell 脚本的新手，但我知道这不是正确的语法。这最好地说明了我需要发生的事情。

我需要执行 facter.bat 脚本，然后将其输出存储在其中，`$Body`以便以后可以使用该文本。

```
 "C:\Program Files (x86)\Puppet Labs\Puppet\bin\facter.bat" > $Body 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T19:43:33.923

这应该这样做：

$Body = & "C:\Program Files (x86)\Puppet Labs\Puppet\bin\facter.bat"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T17:40:16.127

如果需要直接将输出复制到另一个文件，可以使用以下命令

```
& "C:\Program Files (x86)\Puppet Labs\Puppet\bin\facter.bat" | Out-File -FilePath "<FilePathToWrite>.txt" 
```

# data-binding - JPA：映射复杂数据

> ID：13037964
> 
> 赞同：0
> 
> 时间：2012-10-23T19:41:03.277
> 
> 标签：data-binding, jpa

我有这个模型复杂的数据：

```
@Entity
public class A {
    @id
    public Long id;

    @Column
    public String code;

    @OneToMany
    @JoinTable(name = "A_REF",
    joinColumns = @JoinColumn(name = "ID_A"),
    inverseJoinColumns = @JoinColumn(name = "ID_REF"))
    public Set<AbstractRef> refs;

}

@Entity
@Table("T_REF")
@DiscriminatorColumn(name="type")
public abstract class AbstractRef {
    @id
    public Long id;

    @Column
    public String value;
}

@Entity
@DiscriminatorValue(value="B")
public class B extends AbstractRef {
}

@Entity
@DiscriminatorValue(value="C")
public class C extends AbstractRef{
}

@Entity
@DiscriminatorValue(value="D")
public class D extends AbstractRef {
} 
```

数据库示例：

```
T_A
ID | NAME
1  |  X
2  |  Y

T_REF
ID | VALUE | TYPE | ID_A
1  |  H    |   B  |  1
2  |  I    |   B  |  1
3  |  H    |   B  |  2
4  |  P    |   C  |  1
5  |  O    |   C  |  1
6  |  O    |   C  |  2
7  |  Z    |   D  |  1
8  |  F    |   D  |  1
9  |  M    |   D  |  2 
```

我想通过使用 B、C 和 D 的集合值而不是技术 id 来获得 A(1, X)

```
List<String> values = Arrays.asList(new String[]{"H","I","P","O","Z","F"});
A aWithFunctinnalId = service.getA(values); 
```

就我而言，值的集合（“H”、“I”、“P”、“O”、“Z”、“F”）是我的函数 ID。

我怎么能这样做？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:04:26.297

您应该可以为此使用 JPQL，例如（其中 :size 是数组的大小）

```
Select a from A a where (Select count(r) from a.refs r where r.value in :values) >=:size 
```

# perl - 尝试使用 for 循环读取数组中的元素

> ID：13037965
> 
> 赞同：2
> 
> 时间：2012-10-23T19:41:11.403
> 
> 标签：perl

我正在尝试使用 for 循环从数组中读取元素，但我似乎无法让它正常工作。当我运行程序时，它会打印出一个奇怪的“HASH”，或者什么都不打印。任何人都可以帮忙吗？

```
#!/usr/bin/perl
use strict;

my $he;
my @selections = {"Hamburger","Frankfurter","French Fries","Large Coke","Medium Coke","Small Coke","Onion Rings"};
my @prices = {3.49, 2.19, 1.69, 1.79, 1.59, 1.39, 1.19};

for($he= 0; $he<= 6; $he++)
{
      print "@selections[$he]";
      print "@prices[$he]\n";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:42:44.983

当您放置时`{}`，您明确要求`perl`对 a 进行引用`HASH`。相反，您似乎需要的是使用括号来声明`ARRAY`.

所以 ：

```
#!/usr/bin/perl
use strict; use warnings;

my @selections = (
    "Hamburger",
    "Frankfurter",
    "French Fries",
    "Large Coke",
    "Medium Coke",
    "Small Coke",
    "Onion Rings"
);
my @prices = (3.49, 2.19, 1.69, 1.79, 1.59, 1.39, 1.19);

for(my $he = 0; $he <= 6; $he++)
{
    print "$selections[$he]=$prices[$he]\n";
} 
```

此外，像这样制作数组更有趣且不那么无聊：

```
my @selections = qw/foo bar base/; 
```

但它仅在您没有任何值空间时才有效。

**笔记**

*   `use warnings;`我建议你一直使用
*   不要写`@selections[$he]`但是`$selections[$he]`
*   无需`$he`在整个范围内预先声明，看我在哪里声明
*   更好的方法（取决于您的需要）是使用 a`HASH`而不是两个`ARRAYS`：

像这样 ：

```
#!/usr/bin/perl -l
use strict; use warnings;

my %hash = (
    "Hamburger" => 3.49,
    "Frankfurter" => 2.19,
    "French Fries" => 1.69,
    "Large Coke" => 1.79,
    "Medium Coke" => 1.59,
    "Small Coke" => 1.39,
    "Onion Rings" => 1.19
);

foreach my $key (keys %hash) {
    print $key . "=" . $hash{$key};
} 
```

# windows-8 - 如何在 Windows 8 上启用 16 位应用程序？

> ID：13037968
> 
> 赞同：0
> 
> 时间：2012-10-23T19:41:23.107
> 
> 标签：windows-8, 16-bit

我需要从 Windows 8 上的安装程序中启用 16 位应用程序。我发现 windows a 支持 16 位应用程序，并且可以通过控制面板-> 16 位应用程序支持来启用此支持。我想在系统上自动启用它。我希望有人可能知道是否有注册表项或 api 调用或我可以设置的东西，这样它就可以工作而无需手动配置它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:46:26.400

我不确定是否可以自动执行此操作，但如果禁用此选项，Windows 8 会在您尝试运行 16 位应用程序时自动要求您启用该选项。所以这没什么大不了的。

# php - php中的tmp文件名是如何生成的？

> ID：13037969
> 
> 赞同：4
> 
> 时间：2012-10-23T19:41:38.950
> 
> 标签：php, file-upload, temporary-files

php中的tmp文件名（上传）是如何生成的？它的机理是什么？我可以相信它们总是独一无二的吗？

问题是我想将所有上传的文件复制到一个 const 目录中，我不确定 tmp 名称是否会在我的服务器运行历史记录中再次出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:51:49.153

最终，PHP 生成的临时文件名使用函数[`mkstemp`](http://pubs.opengroup.org/onlinepubs/009695399/functions/mkstemp.html)/[`mktemp`](http://pubs.opengroup.org/onlinepubs/000095399/functions/mktemp.html)保证文件名是唯一的。如果它生成的文件名已经存在，它将尝试多次生成一个不存在的文件名。

在 Windows 上，PHP 使用[`GetTempFileName`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364991%28v=vs.85%29.aspx)相同的保证唯一性。

在任何一种情况下，如果函数不能返回唯一的文件名，它们就会返回错误值，PHP 根本不会向您返回文件名。

# mysql - MySQL按DESC顺序按三列排序

> ID：13037983
> 
> 赞同：2
> 
> 时间：2012-10-23T19:42:47.680
> 
> 标签：mysql, sorting, field

我对 MySQL 比较陌生，我很难尝试按三列对表进行排序。

这是一个存储了数千个视频数据的数据库，我想在我的网站上创建一个标签，列出向用户推荐的视频。

如果可能，最好只对最近添加的最近 100 个视频（记录）进行排序，这些视频（记录）已由“键”列自动递增。

在 100 条有序记录中，我实际上只会从数据库中检索 5 条记录并将它们存储到 PHP 变量中。

我试图让它按如下方式对列进行排序。

```
key DESC
rating_score DESC
view_count DESC 
```

我之前使用了另一个 MySQL 语句，它按有效的两列对视频进行排序。

```
SELECT  `title`, `duration`, `rating_score`, `imageurl`, `player_url` FROM (SELECT * FROM `archived_videos` ORDER BY `key` DESC LIMIT 0,210) AS ttbl ORDER BY `rating_score` DESC 
```

我对上述按三列排序的 MySQL 语句的当前版本和修改版本如下所示。

```
SELECT  `title`, `duration`, `rating_score`, `imageurl`, `player_url` FROM ((SELECT * FROM `archived_videos` ORDER BY `key` DESC LIMIT 0,100) AS ttbl (SELECT * FROM `archived_videos` ORDER BY `view_count` DESC) AS ttbl) ORDER BY `rating_score` DESC LIMIT 0,5 
```

如果精通 MySQL 的人可以看看这个，你将成为救命稻草。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:46:31.003

您实际上可以在单个[`SELECT`](http://dev.mysql.com/doc/refman/5.0/en/select.html)语句中对多个列进行排序，无需使用子查询：

```
SELECT
    title, duration, rating_score, imageurl, player_url
FROM
    archived_videos
ORDER BY
    key DESC,
    rating_score DESC,
    view_count DESC
LIMIT 5 
```

结果/列将按照您列出它们的顺序进行排序。首先，它们`key`将按列排序，然后这些将按 排序`rating_score`，然后是`view_count`- ，每个都保持之前列设置的顺序。

**更新**（最新 100 个中的前 5 个）
我第一次读错了原始问题；如果希望从最新的 100 个视频中选择前​​ 5 个视频，您可以使用单个子查询来获取最新的 100 个，然后使用外部查询来获取前 5 个：

```
SELECT
    title, duration, rating_score, imageurl, player_url
FROM (
    SELECT
        title, duration, rating_score, imageurl, player_url
    FROM
        archived_videos
    ORDER BY
        key DESC
    LIMIT 100
    ) AS top_100
ORDER BY
    rating_score DESC,
    view_count DESC
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:52:58.677

```
SELECT  `title`, `duration`, `rating_score`, `imageurl`, `player_url` 
FROM (
    SELECT * 
    FROM `archived_videos` 
    ORDER BY `key` DESC 
    LIMIT 100
) AS sub 
ORDER BY `rating_score` DESC, `view_count` DESC
LIMIT 5 
```

# grails - 在 grails 应用程序中按下后退按钮时显示带有预填充值的表单

> ID：13037984
> 
> 赞同：1
> 
> 时间：2012-10-23T19:42:54.483
> 
> 标签：grails, gsp

我在 grails 中开发了一个小应用程序，第一页我给出了一个邮政编码，以便按商店搜索附近并选择它，按下一步按钮，在第二页上我输入客户详细信息，然后按下一步按钮以在第三页上显示输入的值保存它。现在，如果用户想通过按返回按钮/链接来编辑他需要返回到同一表单的值，我可以使用重定向到第二页`<b><g:link action="register" controller="customer" params="${[customer:customer]}"/>Test </g:link></b>`但表单字段为空，我该如何填写这些表单字段加上我添加的价值。谁能指导我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:00:37.660

您是否查看过[Grails web Flow](http://grails.org/doc/latest/guide/theWebLayer.html#webflow)文档 - 这正是您正在寻找的。

编辑：

基本上，您需要在服务器端（例如 webflow 或自己滚动）或客户端维护状态。对于客户端 - 您可能需要一些 ajax 功能 - 快速搜索显示以下 jquery 库

*   [http://thecodemine.org/#](http://thecodemine.org/#)
*   [http://luhman.org/blog/2011/08/25/jquery-wizard-controls](http://luhman.org/blog/2011/08/25/jquery-wizard-controls)
*   [http://www.manasinc.com/best-free-jquery-wizard-plugins/](http://www.manasinc.com/best-free-jquery-wizard-plugins/)

无论哪种情况，困难的部分都是“维护状态”，而在服务器端，这可能意味着使用会话变量，这可能很困难，因为您必须担心并发等问题。也许其他人可以借鉴他们对客户端表单向导的经验，我的经验非常有限。

# java - Spring Bean 编译问题

> ID：13037998
> 
> 赞同：0
> 
> 时间：2012-10-23T19:43:39.253
> 
> 标签：java, eclipse, spring

我正在乱搞并尝试一些示例弹簧代码。在这种情况下，我试图创建一个字符串并在另一个 bean 中使用它。另一个 bean 在一个类中设置字符串，然后当我调用该类时，希望它应该打印出消息。但是，我收到一条错误消息。请有人建议这里可能有什么问题吗？

```
public static void main(String[] args) {
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext("MyConfig.xml");

SetterMessage message = (SetterMessage) applicationContext.getBean("setStringFromBean");
System.out.println(message.getMessage()); 
}

public class SetterMessage {

    private String message = null;
    /**
     * Gets message.
     */
    public String getMessage() {
        return message;
    }

    /**
     * Sets message.
     */
    public void setMessage(String message) {
        this.message = message;
    }
}

<bean id="createString" class="java.lang.String">
<constructor-arg value="Hello from a bean"</constructor-arg>
</bean>

<bean id="setStringFromBean" class="SetterMessage">
    <property name="message" ref="createString" />
</bean> 
```

错误是

> 2012 年 10 月 23 日晚上 8:36:58 org.springframework.context.support.AbstractApplicationContext prepareRefresh 信息：刷新 org.springframework.context.support.ClassPathXmlApplicationContext@4447393f：启动日期 [2012 年 10 月 23 日星期二 20:36:58 BST]；上下文层次结构的根 2012 年 10 月 23 日 8:36:58 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions INFO：从类路径资源 [MyConfig.xml] 加载 XML bean 定义 2012 年 10 月 23 日 8:36:58 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons INFO：在 org.springframework.beans.factory.support.DefaultListableBeanFactory@643ae941 中预实例化单例：定义 bean [defaultMessage,constructorBean,setterMessage]；工厂层次结构的根线程“主”org.springframework 中的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:51:46.430

您正在按名称查找 bean，但尚未设置其名称。

尝试：

```
<bean id="setStringFromBean" name="setStringFromBean" class="SetterMessage">
  <property name="message" ref="createString" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:25:29.140

我在 xml 文件中有一个错误的注释标签，因此它没有被正确解析

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-22T19:56:12.117

您需要创建一个构造函数来设置“消息”属性，因为您间接告诉容器在构造函数的帮助下设置“消息”属性。因此，如果不创建构造函数，则无法设置“消息”属性值。只需执行以下操作：

```
public SetterMessage(String message) {
    this.message = message; 
```

}