# StackOverflow 问答 12935000-12935999

# android - 在 Android 中使用 SQLiteDataBase 的 rawQuery 方法

> ID：12935003
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:05:14.830
> 
> 标签：android, database

我正在使用 ContentProvider 从数据库进行转换。现在我想使用 SQLiteDataBase 的 rawQuery() 方法。我该如何使用这种方法。谁能告诉我。提前致谢。我使用的代码：

```
public class ChatProvider extends ContentProvider {

@Override
public boolean onCreate() {
    mOpenHelper = new ChatDatabaseHelper(getContext());
    return true;
}
}

    private static class ChatDatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "quytech.db";
    private static final int DATABASE_VERSION = 6;

    public ChatDatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        if (LogConstants.LOG_DEBUG) {
            infoLog("creating new chat table");
        }

        db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + ChatConstants._ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT,"
                + ChatConstants.DATE + " INTEGER,"
                + ChatConstants.DIRECTION + " INTEGER," + ChatConstants.JID
                + " TEXT," + ChatConstants.MESSAGE + " TEXT,"
                + ChatConstants.DELIVERY_STATUS + " INTEGER,"
                + ChatConstants.SPECIAL_SAVE + " INTEGER,"
                + ChatConstants.USERNAME + " TEXT,"
                + ChatConstants.PACKET_ID + " TEXT);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        infoLog("onUpgrade: from " + oldVersion + " to " + newVersion);
        switch (oldVersion) {
        case 3:
            db.execSQL("UPDATE " + TABLE_NAME + " SET READ=1");
        case 4:
            db.execSQL("ALTER TABLE " + TABLE_NAME + " ADD "
                    + ChatConstants.PACKET_ID + " TEXT");
            break;
        // Sid (31/08/2012)
        // for saving individual messages
        // For fixing bug related to chat messages shown even after change
        // in user name.
        case 5:
            db.execSQL("ALTER TABLE " + TABLE_NAME + " ADD "
                    + ChatConstants.SPECIAL_SAVE + " INTEGER,"
                    + ChatConstants.USERNAME + " TEXT");
            break;
        default:
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:44:36.700

例如这样的事情：

```
private void openAndQueryDatabase() {
    try {

        DataBaseHelper newDB = new DataBaseHelper(this, "quytech.db");

        SQLiteDatabase sdb = newDB.getReadableDatabase();

        Cursor c = sdb.rawQuery("SELECT yourcolumntitle FROM yourtablename ORDER BY name ASC", null);

if (c != null ) {
    if  (c.moveToFirst()) {
        int i = 0;
        do {
            i++;
            String name = c.getString(c.getColumnIndex("yourcolumntitle"));

            results.add(yourcolumntitle);

        }while (c.moveToNext());
    } 

}       

    } catch (SQLiteException se ) {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
    } finally {
        if (newDB != null) 

            newDB.close();
    } 
```

# android - 如何将字符串转换为 Datein android(java)

> ID：12935006
> 
> 赞同：0
> 
> 时间：2012-10-17T13:05:27.560
> 
> 标签：android, string, date, calendar

在我的 android 应用程序中，我从 web 服务中获得了一个字符串，如下所示 -

```
 2012-10-17 22:54:00          or        2012-10-17 08:48:00 
```

我想将此字符串转换为以下字符串-

```
2012-10-17 10:54:00 PM        or        2012-10-17 08:48:00 AM 
```

如何在android中做到这一点。我已经完成了以下操作，但无法得到这样的结果。像 gethours(),getminutes() 这样的日期类方法也被贬低了。如何做到这一点？

我做了什么-

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd");
        try {
            convertedDate = dateFormat.parse(publishtime);
            dateFormat.setLenient(true);

        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        Log.i("", "CREATE Date"+convertedDate);//the resut of log is - CREATE DateMon Jan 16 00:10:00 GMT+05:30 2012

        Log.i("", "HOURS:"+hour);
        if(hour>=12)
            publishtime=publishtime+" PM";
        else
            publishtime=publishtime+" AM"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:10:07.860

```
SimpleDateFormat dfTime_a= new SimpleDateFormat("yyyy-MM-dd h:mm:ss a");
SimpleDateFormat dfTime= new SimpleDateFormat("yyyy-MM-dd h:mm:ss");

public String formatTime(String str)
{
    java.util.Date d = null;

    try {
        d = dfTime.parse(str);
    } catch (java.text.ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    str = dfTime_a.format(d);
    return str;
} 
```

**检查**

formatTime("2012-10-17 22:54:00") 给出 op 为 2012-10-17 10:54:00 pm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:18:04.677

首先，您没有为解析日期设置正确的模式，它应该是

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

要获得转换后的字符串，请使用

```
SimpleDateFormat convertedFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss a");
convertedFormat.format(convertedDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:18:37.263

试试这个

```
 String publishTime="2012-10-17 22:54:00";
    SimpleDateFormat inputTime= new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    SimpleDateFormat outputTime= new SimpleDateFormat("yyyy-MM-dd KK:mm:ss a");
    Date date=inputTime.parse(publishTime);
    publishTime = outputTime.format(d);
    Log.i("", "CREATE Time"+publishTime); 
```

# javascript - 脸书 API 错误

> ID：12935007
> 
> 赞同：1
> 
> 时间：2012-10-17T13:05:35.043
> 
> 标签：javascript, facebook, facebook-graph-api

我有一个发布到页面提要的 html/js/php 应用程序（该页面附加到应用程序）。
使用 chrome 一切正常，但使用 Windows 中的 IE 和 Mac 上的 Safari，我收到以下错误：

```
error: Object
code: 200
message: "(#200) The user has not granted the application the permission to automatically publish feed stories"
type: "OAuthException" 
```

js代码： http: [//pastebin.com/20D8iGG8](http://pastebin.com/20D8iGG8) 登录代码： http: [//pastebin.com/U0y04MA0](http://pastebin.com/U0y04MA0)

用户当然具有正确的权限。

编辑：

摆弄我发现这不是浏览器问题，而是帐户问题，从一个帐户可以正常工作而从另一个帐户不能正常工作，我必须找出导致此问题的设置。

我仔细检查了身份验证对话框的安全设置和登录范围，一切似乎都井井有条，所以它仍然很奇怪。

# php - Symfony 2 从链接中删除 app.php

> ID：12935008
> 
> 赞同：1
> 
> 时间：2012-10-17T13:05:35.840
> 
> 标签：php, symfony, routing, localhost

我使用 symfony 2 并且已经创建了我的应用程序。我将我的重命名`app.php`为`trainingboard.php`. 现在索引操作的 localhost 路由现在是：`http://localhost/trainingboard/web/trainingboard.php/`. 如何`trainingboard.php`从我的链接中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:07:08.077

在您的`web/.htaccess`文件更改中：

```
RewriteRule ^(.*)$ app.php [QSA,L] 
```

至

```
RewriteRule ^(.*)$ trainingboard.php [QSA,L] 
```

# matrix - （顶点着色器，mat4）统一矩阵是否应该在 CPU 上进行预乘？

> ID：12935009
> 
> 赞同：5
> 
> 时间：2012-10-17T13:05:37.857
> 
> 标签：matrix, glsl, vertex-shader

考虑典型的“朴素”顶点着色器：

```
in vec3 aPos;

uniform mat4 uMatCam;
uniform mat4 uMatModelView;
uniform mat4 uMatProj;

void main () {
    gl_Position = uMatProj * uMatCam * uMatModelView * vec4(aPos, 1.0);
} 
```

当然，传统观点会建议“每个顶点乘以三个 mat4，其中两个即使在当前着色器程序中的多个后续 glDrawX() 调用中也是一致的，至少这两个应该在 CPU 端进行预乘，可能甚至三个。”

我想知道现代 GPU 是否已将此用例优化到 CPU 端预乘不再是性能优势的程度。当然，纯粹主义者可能会说“这取决于最终用户的 OpenGL 实现”，但对于这个用例，我们可以放心地假设它将是提供该实现的当前一代支持 OpenGL 4.2 的 nVidia 或 ATI 驱动程序。

根据您的经验，考虑到我们可能会在每个 UseProgram() 过程中“绘制”一百万个左右的顶点——每个 UseProgram() 至少会预乘前两个（透视投影和相机变换矩阵），从而将性能提升到任何**显着**程度？每个 Draw() 调用的所有三个呢？

当然，这都是关于基准测试......但我希望有人拥有我错过的基于当前一代硬件实现的基本见解，这可能表明*“甚至不值得一试，不要浪费你的时间”*或*“无论如何都要这样做，因为您当前没有预乘的着色器将是纯粹的精神错乱”* ......想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T18:14:27.107

> 我想知道现代 GPU 是否已将此用例优化到 CPU 端预乘不再是性能优势的程度。

GPU 在并行操作中工作得最好。“GPU”可以像这样优化三个*顺序*向量/矩阵乘法的唯一方法是，如果着色器编译器检测到它们是统一的，并在您发出绘图调用时自行在某处进行乘法运算，并将结果传递给着色器。

因此，在任何一种情况下，3 个矩阵相乘在着色器中都变为 1。你可以自己做这些乘法，也可以不做。驱动程序可以实现或不实现这种优化。这是可能性的图表：

```
 | GPU optimizes  | GPU doesn't optimize
------------|----------------|---------------------
You send 3  |   Case A       |        Case B
matrices    |                |
---------------------------------------------------
You multiply|   Case C       |        Case D
on the CPU  |                |
------------|----------------|--------------------- 
```

在案例 A 中，您获得的性能比您的代码建议的要好。在情况 B 中，您不会获得更好的性能。

案例 C 和 D 都可以保证为您提供与案例 A 相同的性能。

问题不在于驱动程序是否会实施这种优化。问题是，“这种表现对你有什么价值？” 如果您*想要*那种性能，那么您应该自己做；*这是可靠地*实现该性能的唯一方法。如果你不关心性能......那有什么关系？

简而言之，如果您关心此优化，请自己做。

> 根据您的经验，考虑到我们可能会在每次 UseProgram() 过程中“绘制”一百万个左右的顶点——每个 UseProgram() 将至少预乘前两个（透视投影和相机变换矩阵）将性能提升到任何显着程度？每个 Draw() 调用的所有三个呢？

它可能; 它可能不会。这完全取决于顶点变换如何成为渲染系统的瓶颈。没有在实际渲染环境中做测试是无法知道的。

此外，结合投影和相机矩阵并不是最好的主意，因为这意味着在世界空间而不是相机空间中进行照明。它还使延迟渲染变得更加困难，因为您没有纯投影矩阵来提取值。

# javascript - 像 HTML 表格中的表格单元格一样在 css 中布局 div

> ID：12935011
> 
> 赞同：11
> 
> 时间：2012-10-17T13:05:46.310
> 
> 标签：javascript, jquery, css, html

今天我又一次偶然发现了一个我在 css 布局中一直存在的问题。我想在水平行中有 5 个 div。例如，假设它们的宽度应该是：

*   1：60 像素，
*   2 : 30 %,
*   3：40像素，
*   4：*
*   5 : 100 像素

其中 * 代表“填满剩余空间”。回到过去，这就是我们布置宽度表的方式。如今，由于可访问性的原因，html 表格被禁止用于布局。这只是一个例子。我正在寻找一个通用的解决方案。

有人知道生成器、*轻量级*javascript 解决方案（可以是 jQuery 插件）、教程、书籍或魔术师可以帮助我现在和永远解决这个问题吗？

尽管基于 javascript 的解决方案是可能的，但非脚本解决方案将是首选。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-17T13:11:32.040

你可以用它[`display:table`](http://www.quirksmode.org/css/display.html#table)来创建这个效果，我做了一个快速的[小提琴](http://jsfiddle.net/fa9FJ/)

这使得个人`div`的行为像表格单元格，并且`section`是表格，我使用了一个部分只是为了有更清晰的代码，a`div`也可以。

如果窗口大小太小，您会注意到表格单元格比您指定的要小，这是因为表格的默认行为。为了解决这个问题，只需添加一个最小宽度（与宽度相同的值）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T13:55:40.780

[http://jsfiddle.net/lnplnp/bFrmD/](http://jsfiddle.net/lnplnp/bFrmD/)

```
#div1 {
    width: 60px;
}
#div2 {
    width: 30%;
}
#div3 {
    width: 40px;
}
#div4 {
}
#div5 {
    width: 100px;
}
.layout {
    display:table;
}
.cell {
    display: table-cell;
}​ 
```

```
<html>
    <head>
        <title>DIV LIKE TABLE</title>
    </head>
    <body>
        <div class="layout">
            <div id="div1" class="cell">1</div>
            <div id="div2" class="cell">2</div>
            <div id="div3" class="cell">3</div>
            <div id="div4" class="cell">4</div>
            <div id="div5" class="cell">5</div>
        </div>
    </body>
</html> 
```

交叉你的手指！使用最近的浏览器，您现在就可以做到！

# php - file_get_contents 花费的时间

> ID：12935012
> 
> 赞同：-2
> 
> 时间：2012-10-17T13:05:55.447
> 
> 标签：php, file-get-contents

我在 PHP 中使用`file_exists()`then`file_get_contents()`函数来检查远程图像文件的存在，然后获取它。然后我将`echo()`图像作为 Ajax 响应。

即使图像存在，它有时也可以正常工作，但有时也不能正常工作。所以我的问题是`file_get_contents()`需要一些时间来获取内容吗？如果是这样，我怎样才能`echo()`等到文件被提取。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:29:24.043

你可以这样做：

```
$retrieve = false;
$file = 'my_file.php';
$retrieve = file_get_contents( $file );
if ( $retrieve === true ) {
    echo();
} 
```

由于 PHP 的性质，它必须等到 file_get_contents 完成，所以它是它自己的计时器。

再见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:09:32.497

**Ajax：异步**JavaScript 和 XML的首字母缩写词

当然，获取文件需要时间。Ajax 的全部意义在于它是异步的，不会阻塞编程执行。提取完成后，将执行与成功相关的函数。

# mysql - 如何从mysql中的两个表中查找唯一列

> ID：12935016
> 
> 赞同：0
> 
> 时间：2012-10-17T13:06:09.120
> 
> 标签：mysql

我有两张桌子：站：-1,2,3,4 等...工作：- 2,4,5,6 等...

在这里，我需要一个查询来从站表中获取与工作表比较的唯一名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:28:15.367

```
select distinct colname from Station where colname IN (SELECT colname FROM work) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:07:58.553

```
SELECT field FROM Station WHERE field NOT IN (SELECT field FROM work) 
```

# android - 在有根的 Android 设备上使用 libloc_api 获取原始 NMEA 消息

> ID：12935020
> 
> 赞同：0
> 
> 时间：2012-10-17T13:06:26.467
> 
> 标签：android, android-ndk

我正在尝试使用 android 硬件抽象层来打印来自我手机的 gps 设备（我相信是高通）而不是外部设备的 NMEA 消息。所有使用 Android 本机代码的示例似乎都是针对使用外部 gps 设备的。在 android qemu 的情况下，模拟器指向一个获取模拟 gps 信息的文件描述符，这也不是我想要的。我使用 libloc_api 创建了一个 GpsInterface 实例，但我不确定如何使用回调函数来获取 NMEA 消息。这是我用来获取 gps 接口的一段代码：

```
#include "hardware/gps.h"
#include "hardware/hardware.h" 
#include <stdio.h>
#include <string.h>
#include <stdlib.h>    
static const GpsInterface* sGpsInterface = NULL;

int main() {

    int err = 0;
    size_t gps_size = 0;
    hw_module_t* module;

    err = hw_get_module(GPS_HARDWARE_MODULE_ID, (hw_module_t const**)&module);
    if (err == 0) {
        hw_device_t* device;
        err = module->methods->open(module, GPS_HARDWARE_MODULE_ID, &device);
        struct gps_device_t* gps_device = (struct gps_device_t *)device;
        sGpsInterface = gps_device->get_gps_interface(gps_device);
    }

    if (!sGpsInterface )
        printf("No Interface!\n");
    mod = module->name;
    printf("module name = %s\n", mod); 
```

我必须使用本机代码来获取 GPS，所以我不是在寻找 SDK 答案，除非有一个应用程序可以创建一个设备，我可以从中读取 NMEA 流（例如 /dev/ttyGPS）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:33:01.973

在这个链接上：

[Android : 从 2012 年 1 月 1 日起，显示 GP 日期提前 1 天的三星 Galaxy Tabs 和 Android 2.2 设备](https://stackoverflow.com/questions/8708695/android-samsung-galaxy-tabs-and-android-2-2-devices-showing-gps-date-1-day-adv)

您有解决 GPS 日期问题的方法，可以通过直接阅读 NMEA 消息来解决。看看能不能帮到你。

# java - 如何将 android 应用程序中的变量插入网页文本字段

> ID：12935023
> 
> 赞同：0
> 
> 时间：2012-10-17T13:06:37.397
> 
> 标签：java, android, eclipse, android-sdk-2.3

很长时间以来，我一直在寻找解决此问题的方法。我真的很感激任何代码帮助。编码不是我的强项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:19:34.393

*   您的应用程序可能会将这个变量（我的意思是它的值）发送到**Web 服务**。（它可以调用 Web 服务。）

*   您的 Web 服务可能有一个函数，该函数接受一个参数并将该参数直接写入可以通过您的网页访问**的文件。**

*   您的网页可以打开文件并将其显示在其文本字段中。

# python - Django url重定向问题

> ID：12935030
> 
> 赞同：0
> 
> 时间：2012-10-17T13:06:49.490
> 
> 标签：python, django, http, heroku

我有一个视图（我们称之为`handle_login_redirection`），它处理来自 url 的登录并根据请求重定向到适当的 url。这一直运作良好。

现在，当我使用自定义域并将`r'^$'`模式添加到我的`urlconf`以便顶级域（TLD - www.mysite.com）被重定向到处理登录的同一视图（即 `handle_login_redirection`）时，我可以看到 url 没有被重写即使页面被正确重定向，在浏览器中也是如此。

即使是网站上的其他 url，虽然它们的定向很好，但不要更改为相应的 url 路径，而是在浏览器中显示 TLD。url 模式有什么问题，还是有更好的方法来处理 TLD 重定向？

另请注意，我已部署到 Heroku，并且没有 Nginx、Apache 来配置 url 重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:34:33.043

所以我正在做导致问题的域转发和屏蔽。正确的方法是将`CNAME`入口源设置为从您的子域 (www.mysite.com) 指向 mysite.herokuapp.com（用于 Cedar 堆栈）。还必须为`A records`mysite.com `naked domains`（没有 www）输入条目并将其指向 mysite.herokuapp.com

然后`heroku domains:add <domain>`在域和子域上运行。

帮助[如何将 Heroku 应用程序 DNS 配置到 Godaddy 域？](https://stackoverflow.com/questions/7170664/how-to-configure-heroku-application-dns-to-godaddy-domain)和 [https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

# c# - 如何在 ISP 托管的服务器上实现 Windows 服务

> ID：12935031
> 
> 赞同：3
> 
> 时间：2012-10-17T13:06:48.770
> 
> 标签：c#, asp.net

我正在 asp.net 中进行一项任务，以在特定时间间隔向用户发送通知电子邮件。

但问题是，由于服务器不是私有的，我无法在其上实现 Windows 服务。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T13:09:28.197

没有可靠的方法来实现这一点。如果您无法在主机上安装 Windows 服务，您可以编写一个将发送电子邮件的端点 (`.aspx`或`.ashx`)，然后在其他站点上购买一项服务，该服务将通过向其发送 HTTP 请求定期 ping 该端点。显然，您应该将此端点配置为只能从您购买服务的提供商的 IP 地址访问，否则任何人都可以向端点发送 HTTP 请求并触发可能不受欢迎的过程。

延伸阅读：[`The Dangers of Implementing Recurring Background Tasks In ASP.NET`](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:11:58.643

有几种方法可以让代码在不需要 Windows 服务的时间间隔内执行。

一种选择是使用[`Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)类 - 使用一个[`Insert`](http://msdn.microsoft.com/en-us/library/05kd8d77.aspx)需要 a 的重载`CacheItemRemovedCallback`- 这将在缓存项被删除时调用。您可以使用此回调一次又一次地重新添加缓存项...

不过，您需要做的第一件事是联系托管公司，看看他们是否已经为您提供了某种解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:10:35.430

您可以在服务器上设置计划任务来调用具有所需操作的程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:21:32.080

您始终可以使用 a`System.Timer`并以特定时间间隔创建呼叫。您需要注意的是，这必须运行一次，例如在应用程序启动时，但是如果您有多个池，那么它可能会运行更多次，并且您还需要访问一些数据库来读取您的数据行动。

```
using System.Timers;

var oTimer = new Timer();

    oTimer.Interval = 30000; // 30 second
    oTimer.Elapsed += new ElapsedEventHandler(MyThreadFun);
    oTimer.Start();    

private static void MyThreadFun(object sender, ElapsedEventArgs e)
{
    // inside here you read your query from the database
    // get the next email that must be send, 
    //  you send them, and mark them as send, log the errors and done.
} 
```

为什么我选择系统计时器：http: [//msdn.microsoft.com/en-us/magazine/cc164015.aspx](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

### 更多的话

我在一个更复杂的类中使用它并且它的工作正常。我也提出了哪些观点。

*   发出应用程序停止的信号，等待计时器结束。
*   使用互斥锁和数据库来同步工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T13:21:42.540

最简单的解决方案是利用 global.asax 应用程序事件

在应用程序启动事件中，在全局类中的静态单例变量中创建一个线程（或任务）。

线程/任务/工作项将有一个无限循环 while(true) {...} 里面有你的“类似服务”的代码。

您还需要将 Thread.Sleep(60000) 放入循环中，这样它就不会占用不必要的 CPU 周期。

```
static void FakeService(object obj) {
    while(true) {
        try {
        // - get a list of users to send emails to
        // - check the current time and compare it to the interval to send a new email
        // - send emails
        // - update the last_email_sent time for the users
        } catch (Exception ex) {
            // - log any exceptions
            // - choose to keep the loop (fake service) running or end it (return)
        }
        Thread.Sleep(60000); //run the code in this loop every ~60 seconds
    }
} 
```

**编辑**因为您的任务或多或少是一个简单的计时器作业，所以应用程序池重置或其他错误引起的任何 ACID 类型问题都不会真正适用，因为它可以重新启动并继续运输任何数据损坏。但是您也可以使用该线程来简单地执行对包含您的逻辑的 aspx 或 ashx 的请求。

```
new WebClient().DownloadString("http://localhost/EmailJob.aspx"); 
```

# mysql - 将数字数组传递给存储过程

> ID：12935038
> 
> 赞同：0
> 
> 时间：2012-10-17T13:07:14.237
> 
> 标签：mysql

有没有办法将数字数组传递给存储过程以与 IN 运算符一起使用？我有类似的东西

```
SELECT * FROM table WHERE col IN (1,2,3); 
```

我想`(1,2,3)`作为一个论点传递。这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T13:28:33.893

你可以这样尝试

```
 create procedure test (@input1 integer(2) in,@input2 integer(2) in,@input3 integer(2) in)
  as 
  select * from table where col in (@input1,@input2,@input3); 
```

# python - Django 1.4 模型管理 url 重写管理模型“树状”结构

> ID：12935043
> 
> 赞同：2
> 
> 时间：2012-10-17T13:07:36.790
> 
> 标签：python, django, url, admin

我到处搜索，没有找到任何答案。我正在使用 Django 1.4，我的问题是：我试图在 contrib admin 中实现“树状”模型结构。

假设我们有模型 A 和模型 B，它是模型 A 的子级，在 A 的管理 change_list 网格中，当我单击一个项目时，我应该重定向到模型 B 的 change_list 视图并使用 A 的子级对其进行过滤。

在以前版本的 Django 中，我只是重写了子模型管理 url 并添加了 (?(\d+))。

例如：添加 url ^(.+)/ 已更改为 ^(?< parent_id >(\d+))/(.+)/ 所以在更改视图中我检索了父对象并将其用于所有必需的过滤并发送它在要在面包屑中显示的上下文中。

它之所以有效，是因为在所有管理模板中，我们都有面包屑、添加、删除、历史记录等相关链接，例如，确认删除页面中的取消按钮具有 href='../../' 并单击它会把我从 app/model/parent_id/obj_id/delete 带到 app/model/parent_id

由于 1.4 中的所有模板链接都是使用反向 url 生成的更改，我显然在使用 NoReverseMatch 时遇到了错误。一个临时解决方法是在会话中传递父 ID，以便我可以在所有子管理页面中拥有它（我认为这不是一个好方法，原因有很多）。

底线我正在尝试以一种不会干扰当前模板的方式重写管理 url，以便我可以在 url 中发送父 id（在查询字符串中发送它也不是一个选项）有没有人出去那里做了类似的事情？

# jquery - 创造成长和轻推效果

> ID：12935056
> 
> 赞同：1
> 
> 时间：2012-10-17T13:08:15.750
> 
> 标签：jquery, html, css

我不确定这个问题是否可以，它有点灰色地带。

我想创建一个类似于[在这个示例配置文件中看到的效果](http://www.linkedin.com/profile/sample)

现在我需要一些帮助，我知道所有的 div 都在一个具有固定宽度的容器中，但是当你将鼠标悬停在它们上面时，它们会从主容器 div 中长出来。我注意到它们是相对位置，这解释了如何保持文档的流动，并且 div 可以脱离容器..而它们向左浮动。

我将使用 .animate 来增长 div，并使用 .fadeTo 淡出其他 div ($('.box.).not(this).. 等。

我将在今天晚些时候提供一个代码示例。

我想知道是否有人知道其他 div 是如何被推到一边的，或者是这样做的好方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:29:47.753

使用 CSS 和 JavaScript。在其中一个 div 元素悬停时，根据其他 div 元素相对于鼠标悬停 div 元素的位置，其他元素被赋予一个类 slide-down/slide-up/slide-right/slide-left。例如，当给定类向下滑动时：

```
.slide-down .animate {
top: 10px;
} 
```

为了实现淡入淡出，正在使用这个 css：

```
.slide-down .animate, .slide-up .animate, .slide-right .animate, .slide-left .animate {
filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=40);
opacity: 0.4;
} 
```

我找不到使类更改的 javascript，但使用 javascript 或 jQuery 重新创建应该非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:48:07.743

[http://jsfiddle.net/d8BuH/](http://jsfiddle.net/d8BuH/)

非常简单的例子。我使用边距和浮动而不是基于类的方法。这个你不会有太多的控制，但代码要简单得多。因此，如果您正在寻找一个很酷的简单效果，这可能对您有用。

# php - MongoDB 日期字段不断重置到 1969

> ID：12935060
> 
> 赞同：1
> 
> 时间：2012-10-17T13:08:34.490
> 
> 标签：php, mongodb, date, datetime

我真的很困惑，几天来一直在为此挠头。我有一个 PHP 脚本，它将一些用户配置文件存储在 MongoDB 中。用户可以登录、更改一些字段并注销。当他们登录时，它会记录最后一次登录日期/时间，当您修改某些内容时，它会使用 MongoDate 对象记录最后修改的日期/时间。

它有效..但有时..当然随机出现的内容，特定文档的日期重置为“ `ISODate("1969-12-31T16:00:00-08:00")`”

我的文档存储日期如下：

```
dates: {
    created: ISODate("1969-12-31T16:00:00-08:00"),
    lastlogin: ISODate("1969-12-31T16:00:00-08:00"),
    modified: ISODate("1969-12-31T16:00:00-08:00")
}, 
```

我的 PHP 代码如下所示：

```
$collection->update(array('account.email' => $email), array('$set' => array('dates.lastlogin' => new MongoDate()))); 
```

任何人有任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:48:22.827

`MongoDate()`表示自 1970 年 1 月 1 日以来的秒数（参考：[MongoDate::__construct](http://www.php.net/manual/en/mongodate.construct.php)）。

您看到的日期是将未定义变量或 0（又名[unix epoch](http://en.wikipedia.org/wiki/Unix_time)）的值传递给`MongoDate()`.

通常，此值将在 MongoDB 中保存为：

```
 ISODate("1970-01-01T00:00:00Z") 
```

但是，由于您已将时区设置为，`GMT -8`您会看到日期偏移 8 小时，即：

```
 ISODate("1969-12-31T16:00:00-08:00") 
```

# android - onLocationChanged 永远不会被调用 Emulator

> ID：12935064
> 
> 赞同：2
> 
> 时间：2012-10-17T13:08:54.063
> 
> 标签：android, android-emulator, location

```
package com.ecsmon.android.core;

import static com.ecsmon.android.constants.Constants.log;

import java.io.IOException;
import java.util.List;

import android.annotation.SuppressLint;
import android.content.Context;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

@SuppressLint("NewApi")
public class GPSManager {

    private double currentLatitude = 0d;
    private double currentLongitude = 0d;
    private static Context mCtx;
    private Location lastLocationBestProvider = null;
    private LocationManager mLocationManager;
    private GPSListenerImpl mGPSListener;
    private com.ecsmon.android.core.LocationListener mOutListener;
    private boolean enabled = false;
    private GPSListenerImpl mNETListener;

    public GPSManager(Context ctx, com.ecsmon.android.core.LocationListener locationListener) {
    mCtx = ctx;
    mLocationManager = (LocationManager) ctx.getSystemService(Context.LOCATION_SERVICE);
    mOutListener = locationListener;
    }

    /**
     * Start location updates
     */
    public void start() {
    log("#### Started tracking");
    lastLocationBestProvider = getLastLocationFromBestProvider();
    if (lastLocationBestProvider != null) {
        currentLatitude = lastLocationBestProvider.getLatitude();
        currentLongitude = lastLocationBestProvider.getLongitude();
        log("lat" + currentLatitude + " long " + currentLongitude);
    } else {
        log("last loaction is null");
    }
//  mGPSListener = new GPSListenerImpl("GPS");
    mNETListener = new GPSListenerImpl("NET");

    mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 1, mNETListener);
//  mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 1, mGPSListener);

    }

    private class GPSListenerImpl implements LocationListener {
    private String name = "";
    public GPSListenerImpl(String name) {
        log("listener created" + name);
        this.name = name;
    }

    public void onLocationChanged(Location loc) {
        log("######### LOCATION CHANGED CALLED!!!!!!!!!!!!!!!!! ##############");
        if (loc != null) {
        log("######### location changed " + loc.getAccuracy());
        currentLatitude = loc.getLatitude();
        currentLongitude = loc.getLongitude();
        mOutListener.update(currentLongitude, currentLatitude);
        } else {
        log("location is null");
        }
    }

    public void onProviderDisabled(String provider) {
        log("provider disabled > " + name);
    }

    public void onProviderEnabled(String provider) {
        log("provider enabled > " + name);
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        log("status changed");
    }
    }

    /**
     * Return last location saved in phone or null
     * 
     * @return Location
     */
    public Location getLastLocationFromBestProvider() {
    if (!enabled) {
        return null;
    }
    try {
        LocationManager lm = (LocationManager) mCtx.getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_COARSE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        String strLocationProvider = lm.getBestProvider(criteria, true);
        Location location = lm.getLastKnownLocation(strLocationProvider);
        if (location != null) {
        return location;
        }
        return null;
    } catch (Exception e) {
        log(e.getMessage());
        return null;
    }
    }

    /**
     * Returns human readable address from longitude and latitude
     * 
     * @param latitude
     * @param longitude
     * @return
     */
    public String getAddress(Double latitude, Double longitude) {
    if (!enabled) {
        return null;
    }
    String m = "";
    try {
        if (!Geocoder.isPresent()) {
        return null;
        }
        Geocoder geo = new Geocoder(mCtx);
        List<Address> addresses = geo.getFromLocation(latitude, longitude, 1);
        if (addresses.isEmpty()) {
        return null;
        } else {
        if (addresses.size() > 0) {
            m = addresses.get(0).getFeatureName() + ", " + addresses.get(0).getLocality() + ", "
                + addresses.get(0).getCountryName();
        }
        }
    } catch (IOException ie) {
        log("No connection.");
        return null;
    } catch (Exception e) {
        log("Can't read adress from this cordinates : lat = " + latitude + " long " + longitude); //
        return null;
    }
    return m;
    }

    /**
     * Removes all location updates
     */
    public void stop() {
    try {
        mLocationManager.removeUpdates(mGPSListener);
        mLocationManager.removeUpdates(mNETListener);
    } catch (Exception e) {

    }

    }

} 
```

这是我获取当前位置的主要类，并且永远不会调用 onLocationChanged。我在模拟器上测试，并通过模拟器控制发送模拟经度和纬度。请帮助这让我发疯:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-14T08:20:04.810

斯特凡是对的。你需要做两件事。

1.  授予对模拟位置的访问权限。到目前为止，这需要在 src/debug/AndroidManifest.xml 下的特殊清单文件中指定。创建该 xml 并向其添加此权限：

使用权限 android:name="android.permission.ACCESS_MOCK_LOCATION"

2.  确保您的位置管理器连接到 GPS 提供商而不是网络提供商。该信息可以在这里找到：

[http://developer.android.com/guide/topics/location/strategies.html#MockData](http://developer.android.com/guide/topics/location/strategies.html#MockData)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:12:17.417

您可以使用 更改模拟器的 GPS 位置值`Emulator control`。通过这样做（`onLocationChanged`方法将起作用），您可以在模拟器中测试您的应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:58:37.657

问题出在模拟器上它不起作用，但在真实设备上它在几秒钟内找到了我的位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-13T12:23:52.287

就我而言，问题在于加速度计和磁场传感器的更新频率。只需将“SensorManager.SENSOR_DELAY_FASTEST”或“SensorManager.SENSOR_DELAY_GAME”更改为“SensorManager.SENSOR_DELAY_NORMAL”即可正常工作。奇怪的是，GPS 传感器的频率可以是“SensorManager.SENSOR_DELAY_FASTEST”，没有任何问题。

# android - Android 云消息传递 - 我应该定义自己的 GCMRegistrar.java 类还是重用 Google 的

> ID：12935066
> 
> 赞同：0
> 
> 时间：2012-10-17T13:08:59.550
> 
> 标签：android, google-cloud-messaging

我正在研究 Google 为云消息传递提供的示例。我有这个代码开始：

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);

    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) 
    {
        GCMRegistrar.register(this, "my_id");
    } 
    else 
    {
        //Log.v(TAG, "Already registered");
    } 
```

而且这段代码永远不会上`GCMRegistrar.checkManifest(this);`线。

我得到的例外是

```
Unable to instantiate service com.problemio.GCMIntentService: 
java.lang.InstantiationException: com.problemio.GCMIntentService 
```

我做的一件事是实现我自己的 GCMRegistrar.java 类，我从一个例子中得到。我添加它的原因是当我没有它时，当我尝试使用一些方法时：

GCMRegistrar.setRetryReceiverClassName(myClass); 在 GCMBroadcastReceiver 类中，我收到一个语法错误，即此方法在 GCMRegistrar 类中不可见。

所以我不确定是否应该导入 com.google.android.gcm.GCMRegistrar; 或者我是否应该在本地制作自己的版本。你们有什么建议？

当我在本地拥有它时，我得到异常的原因可能是什么：

无法实例化服务 com.problemio.GCMIntentService：java.lang.InstantiationException：com.problemio.GCMIntentService

ps - 所有测试都是在设备而不是模拟器上完成的。

编辑：

这是最新的例外：

```
java.lang.RuntimeException: Unable to instantiate service com.problemio.GCMIntentService: java.lang.InstantiationException: com.problemio.GCMIntentService
        at android.app.ActivityThread.handleCreateService(ActivityThread.java:2201)
        at android.app.ActivityThread.access$2500(ActivityThread.java:132)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1102)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:150)
        at android.app.ActivityThread.main(ActivityThread.java:4293)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.InstantiationException: com.problemio.GCMIntentService
        at java.lang.Class.newInstanceImpl(Native Method)
        at java.lang.Class.newInstance(Class.java:1409)
        at android.app.ActivityThread.handleCreateService(ActivityThread.java:2198)
        ... 10 more
java.lang.InstantiationException: com.problemio.GCMIntentService
        at java.lang.Class.newInstanceImpl(Native Method)
        at java.lang.Class.newInstance(Class.java:1409)
        at android.app.ActivityThread.handleCreateService(ActivityThread.java:2198)
        at android.app.ActivityThread.access$2500(ActivityThread.java:132)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1102)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:150)
        at android.app.ActivityThread.main(ActivityThread.java:4293)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method) 
```

这是我最新的 GCMIntentService：

```
package com.problemio;

import static com.google.android.gcm.GCMConstants.ERROR_SERVICE_NOT_AVAILABLE;
import static com.google.android.gcm.GCMConstants.EXTRA_ERROR;
import static com.google.android.gcm.GCMConstants.EXTRA_REGISTRATION_ID;
import static com.google.android.gcm.GCMConstants.EXTRA_SPECIAL_MESSAGE;
import static com.google.android.gcm.GCMConstants.EXTRA_TOTAL_DELETED;
import static com.google.android.gcm.GCMConstants.EXTRA_UNREGISTERED;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_LIBRARY_RETRY;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_MESSAGE;
import static com.google.android.gcm.GCMConstants.INTENT_FROM_GCM_REGISTRATION_CALLBACK;
import static com.google.android.gcm.GCMConstants.VALUE_DELETED_MESSAGES;

import java.util.Random;
import java.util.concurrent.TimeUnit;

import com.google.android.gcm.GCMBaseIntentService;

import android.app.AlarmManager;
import android.app.IntentService;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.SystemClock;
import android.util.Log;
import android.widget.Toast;

import utils.GCMConstants;

public abstract class GCMIntentService extends GCMBaseIntentService 
{
    public GCMIntentService() 
    {
            super(ProblemioActivity.SENDER_ID);
    }

    @Override
      protected void onRegistered(Context ctxt, String regId) {
        Log.d(getClass().getSimpleName(), "onRegistered: " + regId);
        Toast.makeText(this, regId, Toast.LENGTH_LONG).show();
      }

      @Override
      protected void onUnregistered(Context ctxt, String regId) {
        Log.d(getClass().getSimpleName(), "onUnregistered: " + regId);
      }

      @Override
      protected void onMessage(Context ctxt, Intent message) {
        Bundle extras=message.getExtras();

        for (String key : extras.keySet()) {
          Log.d(getClass().getSimpleName(),
                String.format("onMessage: %s=%s", key,
                              extras.getString(key)));
        }
      }

      @Override
      protected void onError(Context ctxt, String errorMsg) {
        Log.d(getClass().getSimpleName(), "onError: " + errorMsg);
      }

      @Override
      protected boolean onRecoverableError(Context ctxt, String errorMsg) {
        Log.d(getClass().getSimpleName(), "onRecoverableError: " + errorMsg);

        return(true);
      } 
} 
```

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.problemio"
    android:versionCode="82"
    android:versionName="2.2.82" >

    <supports-screens  android:largeScreens="true"   android:normalScreens="true"  android:smallScreens="true"/> 

    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="16"/>
    <!-- <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="xx"/>  -->

    <uses-permission android:name="android.permission.INTERNET" />

    <!-- Required permission to use in-app billing. -->
    <uses-permission android:name="com.android.vending.BILLING" />

    <permission android:name="com.problemio.permission.C2D_MESSAGE" 
        android:protectionLevel="signature" />
    <uses-permission android:name="com.problemio.permission.C2D_MESSAGE" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" /> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@style/CustomTheme" 
        android:name="MyApplication"
        android:debuggable="true"
                >

        <!--  For Google Cloud Messaging -->
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.problemio" />
          </intent-filter>
        </receiver>   

        <service android:name=".GCMIntentService" />
        <!--  End of Google Cloud Messaging --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:31:40.020

> 我添加它的原因是当我没有它时，当我尝试使用一些方法时，例如： GCMRegistrar.setRetryReceiverClassName(myClass); 在 GCMBroadcastReceiver 类中，我收到一个语法错误，即此方法在 GCMRegistrar 类中不可见。

那是因为没有这样的方法。您不会在 Android 开发人员文档中找到对此类方法的引用。

> 所以我不确定是否应该导入 com.google.android.gcm.GCMRegistrar

是的，不要尝试使用不存在的方法。GCM 客户端库的 JavaDoc 位于：http: [//developer.android.com/guide/google/gcm/client-javadoc/index.html](http://developer.android.com/guide/google/gcm/client-javadoc/index.html)

> 无法实例化服务 com.problemio.GCMIntentService：java.lang.InstantiationException：com.problemio.GCMIntentService

因为里面有一个bug `com.problemio.GCMIntentService`，比如没有公共的零参数构造函数。

这是一个演示 GCM 客户端库使用的示例项目：[https ://github.com/commonsguy/cw-omnibus/tree/master/Push/GCMClient](https://github.com/commonsguy/cw-omnibus/tree/master/Push/GCMClient)

# c# - 未为所有用户安装 Outlook 2010 COM 插件

> ID：12935067
> 
> 赞同：2
> 
> 时间：2012-10-17T13:09:04.057
> 
> 标签：c#, com, outlook, add-in, ribbon

我正在尝试安装使用 Visual Studio 2010 创建的插件，该插件向 Outlook 2010 添加了一个新的功能区按钮。

在将其部署到具有多个用户的机器之前，这一切都很完美。插件只为当前登录的用户安装。

我该怎么做才能为每个人安装它？我已经尝试了这篇文章以及其他网站中的所有说明/链接：[Deploying a Outlook 2007 Addin created from Visual Studio 2010 for All Users](https://stackoverflow.com/questions/8713120/deploying-a-outlook-2007-addin-created-from-visual-studio-2010-for-all-users)

我试图研究将注册表从 HKEY_CURRENT_USER 更改为 HKEY_LOCAL_MACHINE 的建议，但在我的项目中 Visual Studio 的 Current_User 中没有键。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:45:26.780

您正在根据您的操作系统平台将注册表项放入错误的配置单元中（*您将密钥放入 x86 操作系统而不是 x64 操作系统路径*）。下面给出了 x64 机器上所有用户的正确注册表项。请适当更新您的安装程序。

### 所有用户 Hive（x64 操作系统上的 x86 Office）

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\Word\Addins\[add-in ID] 
```

另[请参阅讨论 VSTO 插件不自动出现的相关 SO 帖子](https://stackoverflow.com/a/8606087/175679)。

# cakephp - 使用外键关系构造选择元素

> ID：12935068
> 
> 赞同：1
> 
> 时间：2012-10-17T13:09:23.550
> 
> 标签：cakephp

这是我的简单数据库模式和模型：

```
create table personas --done
(
    id int primary key AUTO_INCREMENT,
    nombre varchar(128),
    apellido varchar(128),
    fecha_de_nacimiento date,
    sexo Bool,
    carnet_de_identidad varchar(64),
    direccion_domicilio varchar(128),
    direccion_oficina varchar(128),
    ciudad varchar(128),
    estado varchar(128),
    pais varchar(128),
    email_principal varchar(512),
    email_secundario varchar(512),
    telefono varchar(64),
    movil varchar(64),
    titulo_profesional varchar(128),
    universidad varchar(128),
    foto_archivada blob,
    curriculum text,
    comentarios text
);

create table coordinadors
(
    id int primary key AUTO_INCREMENT,
    persona_id int,
    FOREIGN KEY (persona_id) REFERENCES personas(id)
);

# My CakePHP models:

class Persona extends AppModel {
    public $hasOne = array('Tutor'); // Some other relationship ommitted for brevity.
}

class Tutor extends AppModel {
    public $belongsTo = 'Persona';
} 
```

我正在尝试创建一个`<select>`仅`persona`包含`coordinadors`. 用简单的英语来说，这将是：`Show me a collection of all the persona choices who are coordinadors.`

这是我到目前为止所拥有的：

```
$coordinadores = $this->Coordinador->find('all');

Output:
array(
(int) 0 => array(
    'Coordinador' => array(
        'id' => '3',
        'persona_id' => '2'
    ),
    'Persona' => array(
        'id' => '2',
        'nombre' => 'Sergioa',
        'apellido' => 'Tapia',
        'fecha_de_nacimiento' => '2012-10-01',
        'sexo' => false,
        'carnet_de_identidad' => '215154',
        'direccion_domicilio' => 'qwerqwerqwer3',
        'direccion_oficina' => 'qwerqwerwqerqwer',
        'ciudad' => 'Sqwerqwerwqerra',
        'estado' => 'Sqwerqwerqwerquz',
        'pais' => 'qwerqwerqwerqwer',
        'email_principal' => 'serqwerqwerqwerm',
        'email_secundario' => 'stqwerwqerqwercom',
        'telefono' => 'qwerqwerqwer',
        'movil' => 'qwerqwerqwer',
        'titulo_profesional' => 'Ing qwerqwerqwer',
        'universidad' => 'qwerqwerqwer',
        'foto_archivada' => null,
        'curriculum' => '<p>oiasdfoiwecwec</p>',
        'comentarios' => '<p>jojqwefijwecwc wecwec</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>wcwecwec</p>'
    )
    )
    ) 
```

如何使用 Persona 对象创建简单`<select>`元素？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T13:25:39.573

你已经完成了艰苦的工作。现在你只需要输出你的结果：

```
echo '<select>';
foreach ($coordinadores as $coordinador) {
    echo '<option value="' . $coordinador['Persona']['id'] . '">';
    echo $coordinador['Persona']['apellido'] . ' ' . $coordinador['Persona']['nombre'];
    echo '</option>';
}
echo '</select>'; 
```

# android - 如何从这种情况下传递变量字符串？

> ID：12935074
> 
> 赞同：0
> 
> 时间：2012-10-17T13:09:38.237
> 
> 标签：android, variables, android-asynctask

我有这三个不同的项目。Project1(isLibrary)、Project2 和 Project3 将 Project1 设置为库。现在，我的问题是我向服务器发送了一个请求，但我无法将字符串从我的 Project2 传递到 Project1。项目 3 也将使用 Project1 并将发送不同的请求。有任何想法吗？

在我的 Project1 中，我有一个 TestAsyncTask 类。

```
public class TestAsyncTask extends AsyncTask<String, Void, String> {

TextView textView1[], textView2[]; 
TextView textView;
private LinearLayout linearLayout;
//It's just a sample, not a valid soap header
String string1 = "http://soapactionheaderline"; //Provides the value for the SOAPAction header line. 
//It's just a sample, not valid server
String string2 = "https://server.com"; //This is the target URL/Server that we will be connecting to.
Context context;
int resultInt;

//Constructor
public TestAsyncTask(Context cContext){
    context = cContext; //Pass Context to constructor
}

//Getter for LinearLayout.
public LinearLayout getLinearLayout(){
    return linearLayout;
}
//Setter for LinearLayout.
public void setLinearLayout(LinearLayout lLinearLayout){
    this.linearLayout = lLinearLayout;
}

//Getter for String.
public String getString(){
    return string2;
}
//Setter for String.
public void setString(String sString){
    this.string2 = sString;
}

@Override
protected String doInBackground(String... aServerConnectionString) {

String resultString = null; 

try {

    // Uses URL and HttpURLConnection for server connection.
    URL uRL = new URL(string2); 
    HttpURLConnection httpURLConnection = (HttpURLConnection) uRL.openConnection(); 
    httpURLConnection.setDoOutput(true); 
    httpURLConnection.setDoInput(true); 
    httpURLConnection.setUseCaches(false); 
    httpURLConnection.setChunkedStreamingMode(0); 

    //.addRequestProperty - Adds the given property to the request SOAPAction header
    httpURLConnection.addRequestProperty("SOAPAction", string1); 
    httpURLConnection.addRequestProperty("Content-Type", "text/xml; charset=utf-8"); 
    httpURLConnection.addRequestProperty("Content-Length", "" + "THIS IS WHERE I NEED TO PASS THE STRING VARIABLE FROM MY Project2".length()); 
    httpURLConnection.setRequestMethod(HttpPost.METHOD_NAME); 

    // Using OutputStream and Writer to send a request to the server.
    OutputStream outputStream = httpURLConnection.getOutputStream(); 
    Writer writer = new OutputStreamWriter(outputStream); 
    writer.write("THIS IS WHERE I NEED TO PASS THE STRING VARIABLE FROM MY Project2"); 
    writer.flush(); 
    writer.close(); 

    // Using InputStream to get the response of the request from the server.
    InputStream inputStream = httpURLConnection.getInputStream(); 
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream)); 
    ByteArrayBuffer byteArrayBuffer = new ByteArrayBuffer(50); 

    int aint = httpURLConnection.getResponseCode(); 

    while ((aint = bufferedReader.read()) != -1) {
        byteArrayBuffer.append(aint); //Read bytes to the Buffer until there is nothing more to read.
    }

    resultString = new String(byteArrayBuffer.toByteArray()); 

    // Use SAXParser(Simple API for XML) to handle the parsing of XML(Response). 
    SAXParserFactory sAXParserFactory = SAXParserFactory.newInstance(); 
    SAXParser sAXParser = sAXParserFactory.newSAXParser(); 
    XMLReader xMLReader = sAXParser.getXMLReader(); 
    // Create handler to handle XML Tags
    TestXMLHandler xMLHandler = new TestXMLHandler(); 
    xMLReader.setContentHandler(xMLHandler); 
    InputSource inputSource = new InputSource(new StringReader(resultString)); 
    xMLReader.parse(inputSource); 

    } catch (Exception exception) {
    resultString = exception.getMessage(); in the created String and display it to UI.
    }
    return resultString; 
}

//This step is the return-value from doInBackground.
protected void onPostExecute(String aReturnValueString) {

    // Create an object/instance of GBData Class and get results from GBXMLHandler. 
    TestGetterSetter data = TestXMLHandler.testdata; 

    int sizeInt = data.getOperatorName().size();

    textView1 = new TextView[sizeInt];  
    textView2 = new TextView[sizeInt]; 

    //The for statement provides a compact way to iterate over a range of values.
    for (resultInt = 0; resultInt < sizeInt; resultInt++) {

    textView1[resultInt] = new TextView(context.getApplicationContext()); 
    textView1[resultInt].setText("OperatorName = " + data.getOperatorName().get(resultInt)); 
    linearLayout.addView(textView1[resultInt]); 

    textView2[resultInt] = new TextView(context.getApplicationContext()); 
    textView2[resultInt].setText("type = " + data.getType().get(resultInt)); 
    linearLayout.addView(textView2[resultInt]);

    }
}
} 
```

在我的 Project2 中，我有扩展活动的 TestActivity1 类，它是 UI

```
public class TestActivity1 extends Activity{

    TestAsyncTask asyncTask = new TestAsyncTask(this);

    //This is just a sample soap
    String requestString = "<soapenv---------------------------------------------------------------->";

    @Override
    public void onCreate(Bundle aBundle) {
        super.onCreate(aBundle);            

        asyncTask.execute(asyncTask.getString());

        LinearLayout linearLayout = asyncTask.getLinearLayout();
        linearLayout = new LinearLayout(this); 
        linearLayout.setOrientation(1); 
        asyncTask.setLinearLayout(linearLayout); 

        // Set the ContentView to layout for display
        setContentView(linearLayout);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:14:05.797

我真的不知道您要在代码中实现什么。无论如何，问题来了，我认为您已经将一个字符串值传递给您的 AsyncTask。您需要做的就是在其**doInBackground**方法中使用它。例如：

```
protected String doInBackground(String... aServerConnectionString) {
   String yourValue = aServerConnectionString[0];

   ...
   ...
   ...

   writer.write(yourValue);  //pass your value to writer

   ...
   ...
   ...
} 
```

PS我相信你的代码不会运行，因为它在某些地方看起来不合逻辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:54:09.860

首先，我认为阅读[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)非常重要，因为您的实现没有正确利用它的设计工作方式。老实说，你给自己带来了更多问题:)

要根据您当前的实现解决您的问题，重要的是您要了解[execute()](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)函数如何与[doInBackground()](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)结合使用。

Execute 接受一个字符串数组作为其参数，因此在 Project2 中您可以执行以下操作：

```
String url = "";
String request = "";
asyncTask.execute(url, request); 
```

然后在您的 ASyncTask 中，doInBackground 方法接收您用于执行方法的参数。当您在类之间传递所需的值时，您的 doInBackground 方法可能如下所示：

```
@Override
protected String doInBackground(String... aServerConnectionString) {
String url, request;

if (aServerConnectionString[0] != null) {
    url = aServerConnectionString[0];
}

if (aServerConnectionString[1] != null) {
    request = aServerConnectionString[1];
} 
```

这样，您的 ASyncTask 可以删除其所有与字符串相关的内容，因为它将依赖 Project2/3 来传递字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:57:36.773

将字符串保存在您的库项目和目标项目中的 strings.xml 中。始终将资源的最高优先级分配给目标项目。因此您可以引用相同的 id 并将凝视发送到服务器而不会出现任何问题

# c++ - 如何将 std::map 输出到二进制文件？

> ID：12935078
> 
> 赞同：1
> 
> 时间：2012-10-17T13:09:56.030
> 
> 标签：c++, file, stl, map, binary

如何`std::map`将 a 输出到二进制文件？

地图声明如下所示。

```
map<string, Account *> accounts;

ofstream os(outFileName.c_str());
os.write(  ); 
```

我需要知道在`write()`函数中添加什么才能让它按照我想要的方式工作。我是否需要`Account`一个接一个地输出这个类，或者我可以安全地将它输出为一个`map`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:17:05.903

由于您将其存储为指针，因此您必须遍历地图，首先存储密钥，然后存储指向的帐户，一个接一个。

这似乎可以用数据库做得更好。特别是如果您需要在多个地方执行此操作。

对对象执行此操作的做法称为序列化。

如果您的 Account 类是所谓的普通旧数据类（即，除了其他普通旧数据类和结构之外，它不包含指针和类或结构），您可以简单地将其内存直接写入文件。在这种情况下，可以接受以下方法：

```
int32_t sizeAccount = sizeof(Account); // this should always be a 32 bit int
for (map<string, Account *>::iterator i = accounts.begin(); i != accounts.end(); ++i)
{
    int32_t sizeStr = i->first.length() + 1; // this should always be a 32 bit int

    os.write(&sizeStr, sizeof(sizeStr)); // 4 byte length of string
    os.write(i->first.c_str(), sizeStr); // null terminated string

    os.write(&sizeAccount, sizeof(sizeAccount)); // 4 byte size of object
    os.write(i->second, sizeAccount);    // object data itself
} 
```

但是，如果您的对象具有任何指针成员，或具有指针成员的类型的任何成员，或任何子类或超类，或具有子类或超类的任何类型成员等，则此方法可能不够，并且可能会产生无意义或明显不正确的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:18:12.230

您想要做的也称为[序列化](http://en.wikipedia.org/wiki/Serialization)

在另一个论坛中[查看此主题，它可能对您有所帮助](http://www.daniweb.com/software-development/cpp/threads/201372/saving-stl-maps-to-file-as-binarypossible)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:15:16.637

您需要将它们一一输出。

二进制写入在任何（内部）包含指针的类上都不能正常工作。这当然包括 std::map、std::string 等。

# c# - 如何打开/关闭代码模块？

> ID：12935084
> 
> 赞同：1
> 
> 时间：2012-10-17T13:10:15.860
> 
> 标签：c#, asp.net-mvc, module, content-management-system, code-reuse

我正在尝试使用单个代码库运行多个站点，并且代码库由以下模块（即类）组成

*   用户模块
*   问答模块
*   常见问题模块

并且每个类都适用于 MVC 模式，即它包括

*   实体类
*   助手类（即静态类）
*   视图（即页面和控件）

假设我有 2 个站点*site1.com*和*site2.com*。我正在尝试实现以下功能

*   site1.com 可以启动并运行用户、问答和常见问题模块
*   site2.com 可以在 Faq 模块关闭时启用用户和问答模块，但如果需要可以打开它，所以我在这里的查询是实现此类功能的最佳方法是什么

我是否引入了一个标志位，我检查每个页面和属于该模块的控件？它更像 CMS，您可以在其中打开/关闭不同的功能。我正在努力解决这个问题，请给我一个例子或指出我是否采取了错误的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:14:56.023

您可能想查看[便携式区域](http://elegantcode.com/2012/04/06/mvc-portable-areas/)。您可以设计代码库，使每个模块都是一个区域，然后在需要时将它们部署到站点中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T07:58:52.670

在查看了一些示例和广泛的研究之后，我得出一个结论，它取决于两种情况：

**场景 1：** 如果只有十个可能的模块被编写一次并且如果需要更新它们需要整个应用程序的整个更新，那么您可以轻松地使用将通过模型传播并被使用的检查用于调整用户界面的视图（例如，通过在 Web 应用程序菜单中显示或不显示适当的链接）。

**场景 2：** 相反，如果有许多开发人员开发的许多模块的情况，并且要求更新整个 Web 应用程序以更新任何此类模块是不可接受的，则查找插件模型，例如[FogBugz](http://www.fogcreek.com/fogbugz/plugins/default.aspx)中使用的一种。

为了做出选择，请考虑以下按重要性排序的元素：

*   *可维护性：*是否可以通过修改 Web 应用程序的通用代码来更改任何模块？

*   *依赖关系：*某些模块是否依赖于其他模块？

*   *性能：*由于我们不知道确切的上下文，因此很难尝试预测每个解决方案的影响。如果你使用重的、设计巧妙的缓存，也许不会有。

*   *整体架构：*如果有理由做一些单一的事情（因为相互依赖），第一个解决方案似乎更合适；如果每个模块都与其他模块严格分开，则情况并非如此。

# android - 视图替换后重复的布局 ID 返回为 -1

> ID：12935085
> 
> 赞同：2
> 
> 时间：2012-10-17T13:10:18.773
> 
> 标签：android, android-fragments, android-view

**短篇小说：** 我有一个布局“layout.xml”，在成功的网络请求后被另一个布局“success.xml”替换。两种布局都有一个为布局`ImageView`提供背景的。这两个背景都需要相同，并且都取决于用户偏好。

**更长的故事：**这一切都发生在web 请求之后`Fragmnet`用`AsyncTask`“success.xml”替换 contentView 。`onPostExecute`这发生如下：

```
View view = getView();
view = null;
view = View.inflate(context, R.layout.success, null); 
```

我试图做的是给两个`ImageView`s 以下`android:id="@+id/background_image"`然后打电话

```
ImageView background = (ImageView)view.findViewById(R.id.background_image);
background.setImageResource(R.drawable.bg1); 
```

此背景设置适用于初始视图（layout.xml），但在尝试更改为“success.xml”时，我得到一个 NullPointException，因为`background`它是 null。

我已经检查过，视图的 id 设置为 -1，而原始视图的`background_image`id 设置为合理且有效的值。

我也试过像这样设置第二个视图的背景ID：，`android:id="@id/background_image"`即没有'+'，但仍然没有运气。

增加的复杂性是它不仅仅是2个布局，而是大约5个我需要这样做，所以回收视图ID真的很方便。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:41:26.453

您用于替换片段视图的代码不会执行您想要的操作，原始视图将保持不变，因为您仅更改对该视图的引用而不是实际对象。

要用新布局替换片段的视图，您可以在基本布局（ ）中使用另一个`ViewGroup`（例如 a ）来包装当前内容（不要忘记给它一个 id）（据我所知，这是基本的布局）。然后，当需要替换布局时，您可以简单地执行以下操作：`FrameLayout``layout.xml``layouts.xml`

```
// remove the current content
((ViewGroup) getView().findViewById(R.id.yourWrapperLayout)).removeAllViews();
// add the new content
View.inflate(context, R.layout.success, ((ViewGroup) getView().findViewById(R.id.yourWrapperLayout))); 
```

`LinearLayout`如果您的所有五个布局都具有相同的根视图类型（例如等），您可以避免添加额外的布局。在这种情况下，您将使用与上面相同的代码，但您将修改其他布局文件以使用`merge`标签。此外，您将在`layout.xml`布局中查找根的 id，您将在其中添加其他文件的内容。

然后你可以有相同的 id，但你必须重新初始化对视图的任何引用（这意味着如果你存储对视图的引用，你将不得不再次搜索视图（就像`Button`片段类中的一个字段） ）。

# java - 在 Spring Webflow 中创建新对象的首选替代方法

> ID：12935090
> 
> 赞同：5
> 
> 时间：2012-10-17T13:10:36.420
> 
> 标签：java, spring-webflow

我目前正在使用`Spring 3.1.2 (webflow version 2.3.1)`并且我再次面临一个更老的问题。问题是通过 Spring webflow 创建一个新对象。所以我想做的是：

`<set name="myBean.foo" value="new Bar()"`

我做了一些研究，发现这是不行的。现在面临同样的问题，我想知道是否有一些我不知道的新设施来解决这个问题，或者是首选的替代方案。过去我为此使用了静态工厂。

除了 Alan J Liu 的回应：每次进行某个转换（或每次进入某个视图）时，都需要启动对象。

PS：[springsource](http://forum.springsource.org/showthread.php?75778-Can-we-create-an-object-in-Spring-Web-Flow-2-expression)在这里没有完全回答我的问题。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:13:06.840

'value' 属性接受 SpEL ( [http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html) )，因此您可以使用 'new' 运算符，只需确保您使用完全限定的类名。最后，默认情况下，新创建的对象在 flow-scope 中，但您可以明确指定所需的范围，这对我有用：

```
<view-state id="searchScreen" view="/WEB-INF/jsp/query.view.jsp">
    <on-entry>
        <set name="flashScope.test" value="new java.util.Date()"/>
    </on-entry>
    <transition on="..." to="...">
        <evaluate expression="..."/>
    </transition>
</view-state> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:18:08.120

您可以使用：

```
<var name="object1" class="my.package.Object" />
<set name="objectHolder.object" value="object1" /> 
```

第一行将通过构造函数创建一个新对象，第二行将其设置为 objectHolder 类中的变量对象（通过 setter）。

或者：

```
<set name="objectHolder.object" value="objectFactory.createObject()" /> 
```

其中： public Object createObject{ return new Object() }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-22T14:26:36.967

我建议为您的对象创建一个 Java 工厂。虽然您可以创建一个对象，例如：

```
<on-entry>
        <set name="flashScope.test" value="new java.util.Date()"/>
</on-entry> 
```

如果您使用您的对象，则重构存在问题。如果您移动/重命名您的对象，您的 XML 将被破坏。而是创建一个工厂，如：

```
@Component("webflowBeanFactory")
public class WebflowBeanFactory {    
    public static YourObject yourObjectBean(Object argument) {
        return new YourObject(argument);
    }
} 
```

然后从 webflow 中调用它，例如：

```
<on-entry>
        <set name="flashScope.yourObject" value="webflowBeanFactory.yourObjectBean(anyVariable)"/>
</on-entry> 
```

# php - 如何处理卡拉奇/巴基斯坦的 .ics 日历文件中的时区

> ID：12935094
> 
> 赞同：1
> 
> 时间：2012-10-17T13:10:42.880
> 
> 标签：php, calendar

> **可能重复：**
> [ICS 时区不起作用](https://stackoverflow.com/questions/7626114/ics-timezone-not-working)

我正在开发我的日历应用程序，我已经手动创建了一个 .ics 文件，还使用 ​​PHP 代码

我还成功地将我的日历与谷歌、outlook 和 iphone 同步。

现在的问题是：如何处理时区我的会议在时区有不同的时间。

```
BEGIN:VTIMEZONE
TZID:UTC
BEGIN:STANDARD
DTSTART:19700101T000000
TZOFFSETFROM:-0400
TZOFFSETTO:+0500
TZNAME:PST
END:STANDARD
END:VTIMEZONE
BEGIN:VTIMEZONE
TZID:Etc/GMT
BEGIN:STANDARD
DTSTART:19700101T000000
TZOFFSETFROM:-0400
TZOFFSETTO:+0500
TZNAME:PST
END:STANDARD
END:VTIMEZONE 
```

我必须为巴基斯坦设置时区组件。

你能告诉我我必须改变什么吗？

# jquery - 如何使用 Jquery 选择识别文本 - 禁止复制内容

> ID：12935096
> 
> 赞同：0
> 
> 时间：2012-10-17T13:10:51.367
> 
> 标签：jquery, asp.net

我有一个网站，我不想让用户复制和粘贴内容，直到他们成为会员。

下面是要求

1.  禁止将特定 div 标签内的内容复制到“匿名用户”并显示她的消息“您将被允许复制您成为本网站成员的内容”
2.  一个用户成为会员并试图复制他/她应该被允许复制内容。

我可以通过添加以下 CSS 来禁用复制

```
.ProtectCopy {
    -moz-user-select:none;
    -webkit-user-select:none;
    user-select:none;
} 
```

我可以使用 Jquery 将此 CSS 标记添加到 div 内容

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $("#<%=MyDivCnt.ClientID%>").find("div").attr("class", "ProtectCopy");       
    });
</script> 
```

**我的问题**

如何确定用户是否从特定的 div 标签中选择了文本？我想显示基于“匿名”或“会员”的消息 - “您将被允许复制您成为本网站成员的人”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:13:56.850

您可以绑定到[select](http://api.jquery.com/select/)事件，这应该可以帮助您完成您的要求。

编辑：这只适用于`<input text="text">`和`<textarea>`元素。请参阅[本文](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)以检测任何地方的选择。

另外，我相信您已经知道了，但就像阻止用户右键单击的代码一样，任何知道自己在做什么的人都可以轻松绕过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:14:10.430

这就是问题所在。如果你把它放在网上......它是公共领域。您无法阻止某人获取该**内容**。

*   我可以查看源代码，然后从那里复制和粘贴。
*   我可以将网页内容保存到我的硬盘上，然后它就永远属于我了。
*   我可以截屏并手动转录数据。

长话短说。您将浪费时间来解决这个问题，因为它不会解决问题。

# python - 如何使用 numpy/scipy/matplotlib 以最小平滑度绘制线（多边形链）

> ID：12935098
> 
> 赞同：10
> 
> 时间：2012-10-17T13:11:00.217
> 
> 标签：python, numpy, matplotlib, scipy, spline

我正在尝试在 matplotlib 中绘制一条线。我正在寻找正确的插值类型。我想要这样的东西

![取自 canvasxpress.org/line.html](../Images/3038cea028efc98d3f72ae7cf877c061.png)

每条线都被平滑。我尝试了scipy和matplotlib的几种组合，例如

```
x_new = np.arange(x, x_length, 1)
tck = interpolate.splrep(x, y, s=3)
y_new = interpolate.splev(x_new, tck, der=0)
ax.plot(x_new, y_new, color+lstyle) 
```

但我得到的最好结果是

![我的结果](../Images/fa2532ecec3548541ab1c65aa91db200.png)

该线代表**一个增加的变量**..所以它是一个错误的表示。我可以搜索什么？

谢谢

编辑：我正在考虑自己实现一个方法，但我不知道它是否已经完成..伪代码如下

```
take x and y
calculate spline for each three points 
x[0], x[1], x[2] ... x[1], x[2], x[3] ... and so on
for each y[n] sums every computation done for it and divide by number of 
computations (i.e. y[1] is computed for triplette x[0..2] and x[1..3] so the 
sum is divided by two (average for each point is taken as its value) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T14:32:32.327

对于那种类型的图，您需要*单调*插值。可以使用 scipy.interpolate 中的[`PchipInterpolator`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.PchipInterpolator.html)类（您可以通过其较短的别名来引用）：`pchip`

```
import numpy as np
from scipy.interpolate import pchip
import matplotlib.pyplot as plt

# Data to be interpolated.
x = np.arange(10.0)
y = np.array([5.0, 10.0, 20.0, 15.0, 13.0, 22.0, 20.0, 15.0, 12.0, 16.0])

# Create the interpolator.
interp = pchip(x, y)

# Dense x for the smooth curve.
xx = np.linspace(0, 9.0, 101)

# Plot it all.
plt.plot(xx, interp(xx))
plt.plot(x, y, 'bo')
plt.ylim(0, 25)
plt.grid(True)
plt.show() 
```

结果：

![在此处输入图像描述](../Images/77a4d744da89fcfdf3567bfb98ef8f90.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:23:28.983

问题不是显示问题。这是一个插值问题。您正在使用样条函数进行插值。选择正确的插值方法很大程度上取决于您拥有的数据类型。你不能期望有一个插值函数在任何情况下都会表现正确（插值无法知道你的函数正在增加）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:06:59.133

你应该看看

scipy.interpolate.LSQUnivariateSpline 并使用 k 参数（样条的度数）

或 scipy.interpolate.UnivariateSpline 并使用 k 和 s 参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T14:28:12.917

重要的是要了解插值不仅仅是可视化的线。它是一个数学模型，表示您认为系统的行为方式（生成您测量的数据的系统）。不同类型的插值表示关于系统的不同假设。

所以，如果你知道你的系统是这样一个变量只能增加，你应该拟合一个适当的模型（即使用适当的插值）。查看您的数据，看起来二次多项式或指数函数可能很合适。黄土（局部回归）拟合也将起作用。您可以使用 numpy.polyfit() 等定制函数，也可以使用 scipy.optimize.curve_fit() 进行通用曲线拟合。如果您对系统有进一步的了解，您应该使用它来选择适合的模型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T14:31:21.233

我环顾四周。你想要的就叫

单调三次插值，

[在这里](http://en.wikipedia.org/wiki/Monotone_cubic_interpolation)查看维基百科。[你在这里](https://math.stackexchange.com/questions/45218/implementation-of-monotone-cubic-interpolation)有关于 mathexchange 的讨论，我在 python 中找到了一个[实现](http://code.google.com/p/pywafo/source/browse/trunk/pywafo/src/wafo/pychip.py?r=152)。让我知道这个是否奏效！

# android - 如何在android首选项中保存启用状态

> ID：12935101
> 
> 赞同：0
> 
> 时间：2012-10-17T13:11:08.077
> 
> 标签：android, sharedpreferences, preferences

您好，我正在编写一个具有两个首选项复选框和首选项列表的 Android 应用程序。当复选框被标记为选中时，首选项列表将启用。我已经设法使用`putBoolean()`方法保存复选框“已检查”状态。

```
getPreferenceManager().getSharedPreferences().edit().putBoolean(key, boolean);
getPreferenceManager().getSharedPreferences().edit().commit(); 
```

但是如何保存该`isEnabled`值，以便在我离开和返回时它不会重置？

以及 putboolean 如何知道设置布尔值的属性是什么？

```
@Override 
public void onPause() { 
    super.onPause(); 
    save(l.isEnabled());
} 

@Override 
public void onResume() { 
    super.onResume(); 
    l.setEnabled(load());
} 

private void save(final boolean b) { 

          //what to put instead of key in order to save the preference list ENABLED sate?? 
          getPreferenceManager().getSharedPreferences().edit().putBoolean(key, b);
    getPreferenceManager().getSharedPreferences().edit().commit();

}

private boolean load(String key) { 
    return getPreferenceManager().getSharedPreferences().getBoolean(key, false);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:21:35.363

启用状态的保存方式与您保存“已检查”状态的方式相同，因为[isEnabled()](http://developer.android.com/reference/android/view/View.html#isEnabled%28%29)返回一个布尔值。

```
SharedPreferences.Editor prefEditor = PreferenceManager.getDefaultSharedPreferences(this).edit();
prefEditor.putBoolean("prefs.preferenceList.enabled", preferenceList.isEnabled());  
prefEditor.commit(); 
```

然后返回您想要使用[setEnabled()](http://developer.android.com/reference/android/view/View.html#setEnabled%28boolean%29)设置复选框的启用状态的状态。在 onCreate 期间，您可以执行类似的操作。

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
preferenceList.setEnabled(prefs.getBoolean("prefs.preferenceList.enabled", false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:07:13.423

```
getPreferenceManager().getSharedPreferences().edit().putBoolean(key, b);
getPreferenceManager().getSharedPreferences().edit().commit(); 
```

您不应再次调用 edit()，因为每次调用 edit 时都会创建一个新的 preferenceEditor 实例。因此，您的 putBoolean 永远不会被提交。

这应该是

```
SharedPreferences.Editor prefs = getPreferenceManager()
                                 .getSharedPreferences()
                                 .edit();
prefs.putBoolean(key,b);
prefs.commit(); 
```

# sql - 首先插入，然后 - 如果确定 - 删除

> ID：12935103
> 
> 赞同：3
> 
> 时间：2012-10-17T13:11:18.597
> 
> 标签：sql, sql-server-2005

此 SQL SERVER 2005 语句首先删除 18 条记录`FIELD1 ASC`，然后将相同的 18 条记录插入到克隆表中：

```
WITH  q AS
        (
        SELECT TOP 18 *
        FROM    pippo
        ORDER BY FIELD1 ASC /* You may want to add ORDER BY here */
        )
DELETE
FROM    q
OUTPUT DELETED.* INTO TableNew 
```

请帮我将前面的语句转换为 first `INSERT`，并且`THEN`-`IF INSERT`已确定 - 删除相同的 18 条记录；我刚刚尝试过，但以下代码给出了错误，

`Msg 102, Level 15, State 1, Line 7 Incorrect syntax near 'INSERTED'.`

```
WITH  q AS
        (
        SELECT TOP 18 *
        FROM    pippo
        ORDER BY ID_OL ASC /* You may want to add ORDER BY here */
        )
insert into tablenew select * from q OUTPUT INSERTED.* INTO TABLENEW 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:13:58.757

```
declare @some_temp_table table (ID_OL int)

WITH  q AS
        (
        SELECT TOP 18 *
        FROM    pippo
        ORDER BY ID_OL ASC /* You may want to add ORDER BY here */
        )
insert into minnie
OUTPUT INSERTED.ID_OL INTO @some_temp_table
select * from q

delete from pippo where ID_OL in (select ID_OL from @some_temp_table) 
```

另一个版本

```
set xact_abort on

declare @filter table (ID_OL int primary key)

insert into @filter (ID_OL)
SELECT TOP 18 ID_OL
FROM pippo
ORDER BY ID_OL ASC

begin transaction

insert into minnie 
select * from pippo where ID_OL in (select ID_OL from @filter)

delete from pippo where ID_OL in (select ID_OL from @filter)

commit transaction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:21:35.020

```
insert into temptable
SELECT TOP 18 * FROM  pippo ORDER BY FIELD1 ASC

if(@@ROWCOUNT = 18)
BEGIN
WITH  q AS
        (
        SELECT TOP 18 *
        FROM    pippo
        ORDER BY ID_OL ASC /* You may want to add ORDER BY here */
        )

delete from q 
END 
```

# hadoop - 为什么分区可以在 hive 表中进行比较？

> ID：12935104
> 
> 赞同：0
> 
> 时间：2012-10-17T13:11:19.263
> 
> 标签：hadoop, hive

我知道我们可以使用“<”或“>”来比较hive表中的分区，甚至pt是字符串的类型，它代表日期。像这样：

```
WHERE page_views.date >= '2008-03-01' AND page_views.date <= '2008-03-31' 
```

Hive 可以用我们想要的正确方式来做到这一点。

我的问题是蜂巢如何做到这一点，为什么它可以通过正确的方式比较日期字符串？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:17:28.113

在 Hive 中，分区是一种实现选择性扫描的方式，因此每个分区都会有一个或多个文件构成它。当您使用分区进行查询时，它会更快，因为 Hive 知道它需要扫描哪些文件，哪些不需要。在您的情况下，Hive 可以理解顺序，即使它是一个字符串，因为您的字段采用“yyyy-MM-dd”格式，如果您使用其他日期格式，例如“MM-dd-”，字典顺序匹配日期顺序yyyy'，它不会工作。

# javascript - jquery自动完成使mCustomScrollbar在选择时滚动到顶部

> ID：12935117
> 
> 赞同：5
> 
> 时间：2012-10-17T13:12:02.803
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我已经在我的后台界面中实现了 mCustomScrollbar 插件。它工作正常。但在我的一种形式中，我有一个需要自动完成的城市字段。

自动完成也可以正常工作。但是，当我从自动完成源数据中选择一个项目时，mCustomScrollbar 插件会自动将我带到滚动内容的顶部，我必须再次单击才能实际选择该项目。

这就是我实现滚动条插件的方式：

```
$('#mainContent').mCustomScrollbar({
        set_height: height,
        scrollInertia: 500,
        scrollEasing: "easeInOutQuad",
        mouseWheel: 20,
        autoDraggerLength: true,
        advanced: {
            updateOnBrowserResize: true,
            updateOnContentResize: false
        }
    }); 
```

这就是我实现自动完成的方式：

```
el.autocomplete({
    source: function (request, response) {
        $.ajax({
            url: activityAutocomplete,
            dataType: "json",
            data: request,
            success: function (data) {
                if (data.length == 0) {
                    data.push({
                        label: "Pas de résultat"
                    });
                }
                response(data);
            }
        });
    },
    //If overflow edge of window, the autocomplete flips to top of input
    position: { collision: "flip" },
    autofocus: true,
    delay: 150,
    minLength: 1,
    select: function (event, ui) {
        //ui.hide();
        //The following code resizes the input by bluring it.
        setTimeout(function () { el.autoGrowInput(); }, 50);

    },
    appendTo: '#autocomplete-tb-city-' + el.parents('.item').attr('id')
}); 
```

我希望你会发现这里有问题，我已经为此工作了 3 天！

编辑：这是生成的自动完成标记。

```
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all"   role="listbox" aria-activedescendant="ui-active-menuitem">
    <li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">Angers</a</li>
    <li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">Amiens</a</li>
</ul> 
```

我必须添加一些可能很重要的东西：即使在右键单击时，它也会让我达到顶峰！

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T13:15:48.163

新版本的自定义`scrollbars`有一个高级选项`autoScrollOnFocus`。

例子：

```
 $($element).find('> .scrollbars').mCustomScrollbar({
            horizontalScroll: false,
            autoDraggerLength: true,
            autoHideScrollbar: true,
            advanced:{
                autoScrollOnFocus: false,
                updateOnContentResize: true,
                updateOnBrowserResize: true
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:19:21.237

我在自动完成方面面临同样的问题。选择任何自动完成项目会将窗口滚动到顶部。

[我在这里](http://manos.malihu.gr/jquery-custom-content-scroller/comment-page-7#comment-13877)看到了你的评论，我认为你得到了解决方案。

使用您在上面的链接中提到的提示，我浏览了 mcustomscrollbar.js 代码，只是注释掉了第 533 和 534 行，是的，它对我有用。

感谢您的提示。干杯！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:19:07.360

可能是与锚相关的问题？生成的自动完成项目的href是什么？如果您可以提供生成的自动完成的 html 标记，那将会很有帮助。

也许尝试添加这个（未测试）......

```
$( [auto-complete suggestions] ).live("click", function(e){
e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-28T05:51:23.890

我遇到了类似的问题。问题出在第一次项目选择上，它专注于自动完成输入元素，所以我所做的只是关注 ajax 成功的自动完成输入元素，它解决了我的问题。

`$('#'+id of input element).focus();`

# javascript - 将我的 JS MIME 类型设置为“text/javascript”

> ID：12935119
> 
> 赞同：12
> 
> 时间：2012-10-17T13:12:07.220
> 
> 标签：javascript, .htaccess, mime-types

根据这个：[Javascript MIME Type](https://stackoverflow.com/questions/4101394/javascript-mime-type)，看来我应该将我的JS作为“文本/javascript”提供服务。当我检查我的浏览器和本地主机（或我的服务器）之间的网络通信时，我的 Web 服务器上托管的 JS 的 MIME 类型是 application/x-javascript。来自 Google CDN（例如 jQuery）的 JS 是 text/javascript。

我想让我的 JS 变成 text/javascript。在我的 .htaccess 中，我尝试添加这个：`AddType text/javascript .js`，但它并没有改变我的 MIME 类型。

建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T03:11:36.560

除非有强制类型的东西，否则该`AddType`指令应该足够了，但您也可以尝试：

```
<Files "*.js">
    ForceType text/javascript
</Files> 
```

更好的解决方案可能是查看您的 vhost/server 配置和所有 apache 配置文件（默认情况下可能包含在您的配置中），`application/x-javascript`以查看其设置方式。最好只更改它而不是 htaccess 文件，因为它可能没有必要的覆盖选项（例如， mod_mime`AddType`和需要**FileInfo**选项）。`ForceType` **`AllowOverride`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T10:47:05.597

您需要更改 apache conf 文件夹中 mimes.types 文件中的设置。改变

```
application/javascript          js 
```

至

```
text/javascript                 js 
```

并重新启动 apache，您应该会看到更改**

# visual-studio-2010 - Crystal Reports 从一条记录创建 6 个页面

> ID：12935121
> 
> 赞同：0
> 
> 时间：2012-10-17T13:12:11.427
> 
> 标签：visual-studio-2010, crystal-reports

我一直在使用水晶报表一段时间，但当前的问题让我不知所措。

该报告具有三个页眉 (a, bc) 和两个详细信息部分 (a, b)，并且还包含详细信息 (a) 的子报告。该报告从vs2008迁移到vs2010，它曾经可以正常工作。

然而，在迁移之后，我注意到即使主报告和子报告返回单个记录，该报告也会生成六 (6) 页。但是，位于页眉 (a) 上的徽标图像仅打印一次。

我已尝试合并某些部分并删除子报告，但问题仍然存在。我还查看了标题相似的问题，但似乎与我的问题无关。我已经验证了页面大小并确认没有部分超过页面大小。

关于如何强制报告正确打印的建议将不胜感激。

![在此处输入图像描述](../Images/9a33b235cfb5570c3fcfdbbbb0213755.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:08:12.810

纠结了一天的问题，终于找到问题所在了。

该报告使用包含两个表的数据集；一个用于公司徽标，另一个用于主要数据。在 VS2008 中，这两个表是链接的，但在升级到 VS2010 后，链接被破坏了。尝试重新建立链接是不可能的，因为表没有出现在 Database Expert... Links 选项卡下。从报表数据库中删除带有徽标的表使报表正确显示。我无法回答的唯一问题是为什么报告要写六页。

在使用相同的表格重新创建新报告后，我得出了这个结论，并且问题再次出现。

# excel - 使用动态数据透视表值的宏

> ID：12935127
> 
> 赞同：0
> 
> 时间：2012-10-17T13:12:23.550
> 
> 标签：excel, vba, pivot-table

我每天都会收到很多数据，其中一列是商店的名称。这些商店分为两个区域，例如北部和南部。所以，我有一个包含storesN 和storesS 的商店名称的超集。每天我都会从这些名字的一个子集中得到报告。我使用数据透视表来显示数据。

我想编写一个宏，它只显示storesN 或storesS 中的数据。如果所有商店每天都报告，我可以编写一个固定的宏。但是每天报告的商店都在变化。那么有没有办法，我可以编写一个宏，它会自动检测存在哪些名称并进行相应调整。

我正在使用 With PivotTables("PivotTable30").PivotFields("Name") .PivotItems("Store1").Visible=False

名称始终是超集的子集。我希望这个问题很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:23:00.553

只需刷新您的数据透视表：

```
ActiveSheet.PivotTables("PivotTable30").PivotCache.Refresh 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-12T12:11:29.360

如果您要删除所有旧行，只需确保在字段设置中关闭“显示没有数据的项目”。然后刷新表。

如果您只替换更新的行，那么最简单的解决方案可能只是添加一个“最后更新”列并将其过滤为“今天”（或者`PivotFilters.add2 Type:=xlDateToday`如果您通过代码构建表）

# mysql - MySQL 服务器的 Master 到 Master 复制期间出错

> ID：12935128
> 
> 赞同：0
> 
> 时间：2012-10-17T13:12:30.093
> 
> 标签：mysql, replication, slave

我已经使用我现有的数据库在 MySQL 服务器 5.2 上设置了 Master to Master Replication。我成功地将我的 Master 1 的数据复制到 Master 2，用户名为 replication。但是当我尝试连接到主控 2 时，我从主控 1 收到错误。这是它们的详细信息：

**大师1：**

mysql> 显示从属状态 \G;

****************************** 1\. 行 ************************ *******

```
 Slave_IO_State: Connecting to master
              Master_Host: 10.34.1.37
              Master_User: replication
              Master_Port: 3306
            Connect_Retry: 10
          Master_Log_File: mysql-bin.000018
      Read_Master_Log_Pos: 107
           Relay_Log_File: XX-XX-01-relay-bin.000002
            Relay_Log_Pos: 4
    Relay_Master_Log_File: mysql-bin.000018
         Slave_IO_Running: Connecting
        Slave_SQL_Running: Yes
          Replicate_Do_DB:
      Replicate_Ignore_DB:
       Replicate_Do_Table:
   Replicate_Ignore_Table:
  Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
               Last_Errno: 0
               Last_Error:
             Skip_Counter: 0
      Exec_Master_Log_Pos: 107
          Relay_Log_Space: 107
          Until_Condition: None
           Until_Log_File:
            Until_Log_Pos: 0
       Master_SSL_Allowed: No
       Master_SSL_CA_File:
       Master_SSL_CA_Path:
          Master_SSL_Cert:
        Master_SSL_Cipher:
           Master_SSL_Key:
    Seconds_Behind_Master: NULL
    Master_SSL_Verify_Server_Cert: No
            Last_IO_Errno: 2003
            Last_IO_Error: error connecting to master 'replication@10.34.1.3
    7:3306' - retry-time: 10  retries: 86400
           Last_SQL_Errno: 0
           Last_SQL_Error:
    Replicate_Ignore_Server_Ids:
         Master_Server_Id: 0
   1 row in set (0.00 sec) 
```

**在大师 2 中：**

mysql> 显示从属状态 \G;

****************************** 1\. 行 ************************ *******

```
 Slave_IO_State: Waiting for master to send event
              Master_Host: 10.5.224.12
              Master_User: replication
              Master_Port: 3306
            Connect_Retry: 60
          Master_Log_File: mysql-bin.000019
      Read_Master_Log_Pos: 107
           Relay_Log_File: xx-xx-xx-relay-bin.000029
            Relay_Log_Pos: 253
    Relay_Master_Log_File: mysql-bin.000019
         Slave_IO_Running: Yes
        Slave_SQL_Running: Yes
          Replicate_Do_DB:
      Replicate_Ignore_DB:
       Replicate_Do_Table:
   Replicate_Ignore_Table:
  Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
               Last_Errno: 0
               Last_Error:
             Skip_Counter: 0
      Exec_Master_Log_Pos: 107
          Relay_Log_Space: 560
          Until_Condition: None
           Until_Log_File:
            Until_Log_Pos: 0
       Master_SSL_Allowed: No
       Master_SSL_CA_File:
       Master_SSL_CA_Path:
          Master_SSL_Cert:
        Master_SSL_Cipher:
           Master_SSL_Key:
    Seconds_Behind_Master: 0
    Master_SSL_Verify_Server_Cert: No
            Last_IO_Errno: 0
            Last_IO_Error:
           Last_SQL_Errno: 0
           Last_SQL_Error:
    Replicate_Ignore_Server_Ids:
         Master_Server_Id: 1
   1 row in set (0.00 sec)

   ERROR:
   No query specified 
```

请帮我。您的解决方案将指导我解决任务。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:31:46.387

确保您可以从 Master 1 DB 的主机连接到 Master 2 的 MySQL 套接字，您可以通过 shell 命令验证您是否能够连接：

```
telnet master-2-ip MYSQLPORT //3306 is the default port for mysql 
```

如果此命令成功（这意味着您没有收到“拒绝连接”），请尝试连接：

```
mysql -u user -p'password' -H host -P port 
```

如果问题不是连接问题，则在 /var/log 下发布您的 mysql 日志可能会有所帮助。

# windows-8 - MSI .NET 框架先决条件

> ID：12935133
> 
> 赞同：1
> 
> 时间：2012-10-17T13:12:46.547
> 
> 标签：windows-8, windows-installer, prerequisites

我有一个 .NET Framework 2.0 先决条件的 MSI 文件。在 Windows 8 中，默认情况下未安装 .NET Framework 2.0，当我运行 .msi 时，它说您需要安装 .NET Framework 2.0。

但是 Windows 8 已经带有支持旧版本的 .NET 框架 4.0 或 4.5，如果我可以说这个 msi 文件也可以在 .NET 框架 4.0 上运行，它确实能够运行 msi 文件。我怎样才能做到这一点？

更准确地说，我如何配置一个 msi 文件以具有最低 .net 框架版本 2.0 但可以在较新版本上运行的先决条件？

我可以为添加以下配置的程序集执行此操作。

```
<configuration> 
  <startup>
   <supportedRuntime version="v2.0.50727" />
   <supportedRuntime version="v3.0" />
   <supportedRuntime version="v3.5" />
   <supportedRuntime version="v4.0" />
  </startup>
</configuration> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:51:18.680

SO问题[如何在WiX中检测.net 3.5？](https://stackoverflow.com/questions/682805/how-can-i-detect-net-3-5-in-wix)似乎回答了这个问题。它还指向[另一篇文章](http://blogs.msdn.com/b/astebner/archive/2008/07/07/8705318.aspx)，在不使用 WiX 时讨论这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:16:44.030

如果您安装 .Net 框架 3.5，那也将提供 2.0。默认只安装 4.5。转到 Windows 功能并打开 .Net framework 3.5。

# firefox - 通过 GWT 应用程序引用时，带有标签的 SVG 图像不会显示在 Firefox 16 中

> ID：12935136
> 
> 赞同：1
> 
> 时间：2012-10-17T13:13:00.307
> 
> 标签：firefox, gwt, svg

我在 Firefox 16 中遇到了这个问题。

我创建了一个带有标签的新`svg`文件（NewImage.svg） ：`<image>`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.0//EN'
          'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'>
<svg xmlns='http://www.w3.org/2000/svg'
 xmlns:xlink='http://www.w3.org/1999/xlink'
 width="224px" height="54px" viewBox="-0.58 -1.162 224 54">
     <image xlink:href='background.svg' width='224' height='54' />
     <image xlink:href='foreground.svg' x='12' y='12' width='32' height='32'/>
</svg> 
```

当我`NewImage.svg`直接在 Firefox 中打开它时，它会完美打开。

`GWT`但是，当我从我的应用程序内部引用这个 svg 文件时，`NewImage.svg`它不会在 Firefox 16 中加载。它确实在 IE 9 中正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:47:10.460

Gecko does not allow SVG loaded inside to load any external resources, for security reasons (basically to prevent images from phoning home when users won't expect them to). So you need to put any resources you want to use into data: URIs

# c# - 测试访问器垃圾收集

> ID：12935138
> 
> 赞同：0
> 
> 时间：2012-10-17T13:13:04.310
> 
> 标签：c#, .net, garbage-collection, coded-ui-tests

再会！

我在 VS2010 中使用 MSTest。为什么在测试执行后访问器没有被垃圾收集？这是我的代码。这很简单。

```
[TestClass]
public class CheckStringsWorkTest
{
  CheckProcess checkProcess = null;
  CheckProcess_Accessor checkProcess_Accessor;

  [TestMethod]
  public void StringShaveTest()
  {
        // MessageBox.Show("Start snapshot 1");

        checkProcess = new CheckProcess();

        checkProcess_Accessor = new CheckProcess_Accessor(new PrivateObject(checkProcess));

        checkProcess.Dispose();
        checkProcess = null;
  }

  [TestCleanup()]
  public void RunAfterAllTests()
  {
     // If uncomment then GC is OK
     //checkProcess_Accessor = null; 

     try
     {
         GC.Collect();
         GC.WaitForPendingFinalizers();
         GC.Collect();
     }
     catch { }

     // MessageBox.Show("Start snapshot 2");
 } 
```

据我了解-访问器使用 PrivateObject 作为包装器来保存实际对象。但是，如果我处理并将对象设置为 null（checkProcess），清除引用，那么对它的唯一引用是来自访问器 - 为什么它不能被收集？它包含实际对象，而不是它的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:20:15.150

您没有将班级中的 checkProcess_Accessor 字段清空，因此它以及它具有链接的所有内容仍然存在并且无法收集。

PrivateObject 显然保留了对它正在传递的 checkProcess 的引用，而 checkProcess_Accessor 必须保留对 PrivateObject 的引用。您仍然可以通过访问器和 PrivateObject 访问 checkProcess（尽管如果所有引用都是私有的，您可能需要使用反射来这样做），因此无法收集对象。

顺便尝试强制垃圾收集是一个非常糟糕的主意，但我相信你有这样做的正当理由。

# visual-studio - 带有 .NET Framework 4 的 Visual Studio 2012

> ID：12935142
> 
> 赞同：1
> 
> 时间：2012-10-17T13:13:22.617
> 
> 标签：visual-studio, .net-4.0, frameworks, visual-studio-2012

如果我仍然在 .NET Framework 4 中编写大部分应用程序，主要是因为我仍然需要支持 WinXP，是否建议升级到 Visual Studio 2012？还是会带来微不足道的好处？

我已经阅读了很多关于 VS2012 与 .NET Framework 4.5 的改进的文章，但是 4.0 呢？

如果我仍在编写大量 .NET 4.0 应用程序/Web 应用程序，有什么真正的理由跳到 VS2012？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:17:40.177

Web 应用程序开发有一些[改进](http://blogs.msdn.com/b/webdev/archive/2012/05/31/new-features-for-web-development-in-visual-studio-2012-rc.aspx)，但它们是否构成“真正的原因”真的取决于你。对于面向 .NET 4 的桌面应用程序，可能没有什么可以证明转换成本的合理性。您可以浏览[更改列表](http://msdn.microsoft.com/en-us/library/bb386063.aspx)以得出自己的结论。

# c# - Firefox 的缓存问题

> ID：12935150
> 
> 赞同：2
> 
> 时间：2012-10-17T13:13:54.653
> 
> 标签：c#, asp.net-mvc, caching, browser-cache

我正在开发一个 ASP.NET/MVC4 应用程序，我不断地获取数据，我的问题与缓存有关。

问题是，当我单击应用程序中的特定链接时，它可以正常工作，但有时它会自动重定向到默认页面的 INDEX 页面。

我浏览了这个问题，发现它是 Mozilla 中的一个问题，它维护每个链接的缓存。但有时会发生一些奇怪的事情，它会自动将特定链接重定向到 INDEX 页面 ( `301 Permanently REMOVED`) 并将其存储在缓存中，这样现在每次我单击该链接时，它总是将我重定向到已缓存的 INDEX 页面。

所以现在我每次遇到这个问题时都必须清除浏览器中的缓存。

如何使其不自动重定向到缓存的 INDEX 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:51:17.750

您应该真正扩展您提到的确切情况，`particular link`因为除非您告诉它，否则它不应该 301 重定向。

还你说`I fetch data continuously`。这对我们意味着什么？为什么知道这一点很重要？解释这是否会更改链接或数据？你是 404ing 旧数据还是什么？这可以解释为什么你 301 回到你的索引。

现在有了您提供的有限信息……如果您想阻止 firefox 缓存您的 url/重定向，只需让您的 url 有一个查询字符串，该查询字符串会更新每个请求。就像使用时间戳一样。

例如：`http://example.com/return-data.asp?timestamp=1350668920`

然后每次你`continuously fetch data`相应地更新页面的链接

例如：`http://example.com/return-data.asp?timestamp=1350669084`

# joomla - Joomla 讨论 - 何时创建插件，何时创建组件？

> ID：12935155
> 
> 赞同：0
> 
> 时间：2012-10-17T13:14:15.220
> 
> 标签：joomla, content-management-system

我一直在学习为 joomla 开发自己的插件和组件！2.5.

在为我的站点开发功能几个月后，我开始意识到，如果我将我创建的一些组件开发为 com_content 或 com_user 的插件，它们可能同样有效。

我的问题是确定是否需要完整组件以及何时可以使用一个或多个插件来提供相同功能的最佳方法是什么。

我现在的感觉是插件是一种更好的方式，因为它们是自包含的。也许我已经回答了我自己的问题，当元素之间的交互更复杂时需要组件，因为插件可以用于非常模块化的功能。

还有人有看法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:44:05.557

组件和插件是完全不同类型的扩展。

组件是将出现在内容区域（例如 VirtueMart）和显示文章的位置的应用程序/系统。将它们视为您计算机的软件。

插件可以用来操作 Joomla 和/或它正在使用的扩展。它们包含与触发事件相关的函数。所以简而言之，它们是为了扩展现有扩展的功能。

因此，请回答您的问题，考虑一下您正在创建什么，以及是否会成为应用程序或扩展功能的东西。

希望这可以帮助

# c# - 页面在回发之前执行功能时的进度条

> ID：12935156
> 
> 赞同：1
> 
> 时间：2012-10-17T13:14:15.180
> 
> 标签：c#, javascript

我不确定这是否可能。我试图在单击 asp 按钮时显示进度条。该按钮将在回发之前执行冗长的数据库操作。我想向用户显示进度条，以便他们知道发生了什么事。

我不确定在单击按钮和完成功能之间是否可以测量时间或进度。

感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:19:26.870

您可以使用`UpdatePanel`和`UpdateProgress`控件来完成任务。[这是一个例子](http://www.codeproject.com/Articles/18238/The-UpdateProgress-Control-of-ASP-NET-AJAX-Extensi)

其他解决方案。首先创建一个 WebService（它将执行所需的任务），在单击按钮时从客户端调用它，同时使用 javascript 或 jquery 显示图像。一旦您从服务获得确认任务已完成隐藏此图像并告诉用户任务已完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:18:58.787

计算数据库操作所花费的时间通常是一项不平凡的任务。

如果关键不是为用户提供准确的时间，而只是通知“正在完成某事”，请考虑使用动画图像（通常称为“ajax loader”）向用户显示数据库操作正在进行中：

![在此处输入图像描述](../Images/541598c4a5817a61a8e0e04657b97115.png)

[您可以在http://ajaxload.info/](http://ajaxload.info/)轻松自定义和下载 ajax 加载器图像

您可以简单地将图像添加为页面中的隐藏元素，并在用户触发数据库操作时显示它。一些详细的思路，请看问题“[提交表单时显示一个ajax加载器图标](https://stackoverflow.com/questions/7065039/display-an-ajax-loader-icon-when-submitting-a-form)”。

# sharepoint-2010 - 以编程方式访问共享点工作流信息

> ID：12935160
> 
> 赞同：0
> 
> 时间：2012-10-17T13:14:30.960
> 
> 标签：sharepoint-2010, workflow

![在此处输入图像描述](../Images/fc6a42e0ddb1169720d01279eeed71b2.png)

我想访问项目的共享点“工作流信息”，以便以编程方式获取“状态”和“上次运行”。谁能告诉我如何从“状态”和“上次运行”这些字段中获取值？

多谢

![在此处输入图像描述](../Images/f46145f0a348b822f623d994b0aca9aa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:07:36.223

您可以访问“工作流程历史”列表中项目的工作流程历史。

从列表中，您可以过滤与特定项目/列表和工作流关联相关的任务。（通过使用 listid、itemid、workflowassociationid）

要获取工作流关联 ID：

```
SPWorkflowAssociation assoc = myList.WorkflowAssociations.GetAssociationByName("MyWFNameInEnglish",System.Globalization.CultureInfo.GetCultureInfo(1033)); 
```

“上次运行”值可以通过获取最新任务的“修改”日期来获得。可以从“事件”字段中解码工作流的状态。[您可以在此处](http://www.spjeff.com/2010/01/29/workflow-history-event-type-numbers-decoded-2/)找到事件值的含义列表

PS：您可以使用[共享点管理器](http://spm.codeplex.com/releases/view/51438)来浏览列表/Web/等的属性。和[U2U CAML 查询生成器](http://www.u2u.be/res/tools/camlquerybuilder.aspx)以更深入地查看列表中的数据

# javascript - 我的 Javascript 类从它们的原型继承属性，但不是函数！为什么是这样？

> ID：12935164
> 
> 赞同：0
> 
> 时间：2012-10-17T13:14:49.983
> 
> 标签：javascript

我在这里有一个基类：

```
function Screen(src) {
this.src = src;
}

Screen.prototype.html = function(collapsed) {
    return $.ajax({
        async : false,
        url : this.src + "?collapsed=" + collapsed,
    }).responseText;
}; 
```

然后我尝试对它进行子类化：

```
function TitleScreen() {
    Screen.call(this, "title.php");
};
TitleScreen.prototype = Object.create(Screen.prototype);
TitleScreen.prototype.constructor = TitleScreen;
TitleScreen.prototype.parent = Screen.prototype; 
```

但是，当我这样做并尝试使用 TitleScreen 对象时，它设置了 src 属性，但未定义 html 函数！我还尝试在构造函数中设置 html 函数，如下所示：

```
function Screen(src) {
    this.src = src;
    this.html = function(collapsed) {
        return $.ajax({
            async : false,
            url : this.src + "?collapsed=" + collapsed,
        }).responseText;
    };
} 
```

但这也没有用。我做错了什么可能导致普通的旧属性起作用但不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:36:44.840

忘记`new`关键字了吗？只有当你创建了构造函数的实例时，对象才会从`prototype`对象继承：

```
var title = new TitleScreen();
"html" in title; // true 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/aftRP/1)

或者您是否有一些您没有向我们展示的附加代码覆盖`TitleScreen.prototype`而不是向其添加属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:05:24.173

我的问题实际上与继承完全无关；它与本地存储有关。

调用 new TitleScreen().html() 实际上确实返回了 HTML，但我将 Screen 对象序列化为 JSON 并将它们放在本地存储中，以便我的应用程序可以记住它的状态。然而，序列化显然没有考虑到这些功能，所以我失去了这些。

为了解决我的问题，当我从本地存储反序列化时，我需要重新构造函数。

# titanium - 调用 Web 服务以获取钛的搜索结果

> ID：12935167
> 
> 赞同：0
> 
> 时间：2012-10-17T13:14:54.457
> 
> 标签：titanium, titanium-mobile

我已经实现了一个添加了 searchBar 的 tableView。当用户开始在搜索栏中输入搜索关键字时，我想调用服务。我知道我可以在将调用该服务的`change`事件侦听器中调用该服务。

我知道，对于搜索栏中的每一次更改，调用服务都是不好的。那么当搜索结果来自服务调用时使用搜索栏的有效方法是什么，或者我们可以做些什么来提高搜索效率。

例如：苹果应用商店的搜索功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:46:42.960

我为我的一个测试项目做了这样的事情。在尝试查找之前，我会检查我的更改事件是否输入了至少 3 个字符。我不知道我为什么选择 3，但过滤我的数据似乎有相当数量的字符。我还会设置一个标志，表明网络请求正在进行中。因此，如果他们输入了 3 个字符，如果没有正在进行的查找，您可以开始搜索。如果有正在进行的网络请求，您可以设置一个等待间隔以继续检查请求是否返回并在返回时启动其他请求。我会发回一些简短的物品清单，对我来说是 25 个，这样我的桌子就显得很快了。

虽然我没有这样做，但您可以跟踪输入字符之间的时间间隔，以确保用户完成输入。为了获得最佳间隔，您需要尝试对普通用户来说是合理的。从典型的非高级用户那里获得一些反馈。

我可以看到一个潜在的问题，即您正在查找，但用户仍在键入。您可能需要跟踪这些字符更新，并可能开始额外搜索更新的字符串。您甚至可以将您当时发送的字符搜索字符串与输入框中的当前字符进行比较，然后选择放弃您已经收到的查找项列表，然后再进行一次搜索。

您可能希望显示您确实收到的项目列表，以便用户知道应用程序正在运行，但立即自动发送另一个查找项目的请求。如果您不时在表格中显示某些内容，用户最终可能会开始敲击键并认为应用程序没有响应。

# php - 限制文本区域的字符

> ID：12935170
> 
> 赞同：0
> 
> 时间：2012-10-17T13:15:04.780
> 
> 标签：php, textarea, character, limit

我有一个选项面板，在这个选项面板中，我有一个 ID 为“mytheme_about_me”的文本区域。

我想限制此文本区域的字符。我找到了很多 jQuery 解决方案，但是因为文本区域与我的 index.php 不在同一个 php 页面中，所以我不能使用 jQuery。所以我想知道如何使用 php 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:17:56.113

您可以使用该`maxlength`属性，现在`textarea`主流浏览器也支持该属性。请注意，浏览器可能会以不同的方式计算换行符（每个换行符为 1 或 2 个字符）。（我想问题是关于客户端检查。服务器端检查应该不是问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:19:25.860

html 方式：只需将 html 添加`maxlenght`到您的 html 输入中，以防止在 20 处添加字符，例如。`<input type="text" name="whatever" maxlength="20">`. 这是不安全的，因为任何用户都可以修改此代码并更改字符限制，不要忘记运行 php 测试。

php 方式：`strlen($yourstring)`用于了解字符串的长度，以便您可以指定限制，不要忘记 php 我的意思是“服务器端脚本”，因此此测试将在您的服务器上执行，防止客户端破解您的代码。

```
if (strlen($yourstring) <= 25)
// Save the input value
else
   echo 'your input is too long (25 characters max)'; 
```

PS：您无法访问您的 jquery.js，因为您需要将它包含在您正在使用的每个 .php 页面中，而不仅仅是 index.php

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:23:33.317

无论如何，你可以用“普通”的javascript来做

```
<script type="text/javascript">
function limit(max) {
    var textarea = document.getElementById('textarea');
    if (textarea.value.length > max) {
        textarea.value = textarea.value.substring(0, max);
    } 
}
</script> 
```

HTML

```
<textarea id="textarea" onkeydown="limit(10);">bla bla</textarea> 
```

`limit()`使用您允许的最大字符数调用

# asp.net-mvc-3 - Url.RouteUrl 返回空

> ID：12935172
> 
> 赞同：5
> 
> 时间：2012-10-17T13:15:09.163
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我正在尝试获取完整的 URL，但`RouteUrl`返回的是空的。

在视图中，我是这样称呼的：

```
alert('@Url.RouteUrl("Api", new { controller = "Parametros", id = "" })'); 
```

这是我的路线配置：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(
        name: "Api",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Usuario",
            action = "Login", id = UrlParameter.Optional }
    );
} 
```

和我的控制器：

```
public class ParametrosController : ApiController
{
    ISistemaService _sistemaService;
    public ParametrosController(Empresa empresa, ISistemaService sistemaService)
    {
        _sistemaService = sistemaService;
    }

    public PagedDataModel<ParametroDTO> Get(
        [FromUri]ParametroFiltro filter, int page, int pageSize)
    {
        int total = 0;
        var list = _sistemaService.Paging(filter, page, pageSize, out total);
        return new PagedDataModel<ParametroDTO>(page, pageSize, total, list);
    }

    public ParametroDTO Get(string codigo)
    {
        return _sistemaService.GetParametroPorCodigo(codigo);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T13:21:30.630

添加`httproute = ""`到`routeValues`：

```
alert('@Url.RouteUrl("Api",
     new { httproute = "", controller = "Parametros", id = "" })'); 
```

# android - 如何将开关盒与 Spinner 一起使用？

> ID：12935174
> 
> 赞同：0
> 
> 时间：2012-10-17T13:15:16.543
> 
> 标签：android, spinner, switch-statement

我试图弄清楚如何使用用户选择的 switch-case base 打印一个值。我可以轻松打印用户在微调器中选择的内容，但我需要相应的值。我希望我只是在我的代码中遗漏了一些小东西。

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;

public class Test extends Activity implements OnClickListener {
    EditText input1;
    Spinner answer;
    Object value;
    int yourInt = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        input1 = (EditText) findViewById (R.id.editText1);
        answer = (Spinner) findViewById (R.id.spinner1);
        ((Button) findViewById (R.id.button1)).setOnClickListener(this);
        answer.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

                value = parent.getItemAtPosition(position);
                switch (position) {
                case 0:
                    yourInt = 1;
                    break;

                case 1:
                    yourInt = 2;
                    break;
                }

            }
            public void onNothingSelected(AdapterView<?> parent) {

            }
        });
    }
    public void onClick (View v) {

        input1.setText(yourInt);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:21:22.723

```
switch (position) {
            case 0:
                yourInt = 1;
                input1.setText(""+yourInt);
                break;

            case 1:
                yourInt = 2;
                input1.setText(""+yourInt);
                break;
            } 
```

# sql - 如何从 cfquery 中检索 SQL 变量？

> ID：12935181
> 
> 赞同：4
> 
> 时间：2012-10-17T13:15:46.270
> 
> 标签：sql, sql-server, tsql, coldfusion

我在我的`cfquery`.

```
SET @rID = ( SELECT TOP 1 roleid
             FROM Roles
             WHERE RoleName = @rName AND appid = @appID
             ORDER BY Created DESC); 
```

是否可以在`@rID`不必`SELECT`第二次运行查询的情况下进行检索？如：

```
<cfset varName = queryName.rID> 
```

以上显然不起作用，但是还有其他方法可以从查询中返回变量吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T13:19:23.183

`@rID`您可以通过ing获得值，`select`而无需再次运行完整查询。

```
<cfquery name="qryRoleID">
    SET @rID = ( SELECT TOP 1 roleid
         FROM Roles
         WHERE RoleName = @rName AND appid = @appID
         ORDER BY Created DESC);
    SELECT @rID AS rID
</cfquery>
<cfdump var="#qryRoleID.rID#"> 
```

# spring - Spring Security 为自定义登录表单执行验证

> ID：12935190
> 
> 赞同：1
> 
> 时间：2012-10-17T13:16:22.157
> 
> 标签：spring, spring-mvc, spring-security

在调用 authenticationManager 进行身份验证之前，我需要对登录表单进行一些验证。已经能够在一篇现有帖子的帮助下实现它 -[如何在 Spring Security 登录表单中进行额外验证？](https://stackoverflow.com/questions/7025614/how-to-make-extra-validation-in-spring-security-login-form/12929497#12929497)

有人可以建议我是遵循正确的方法还是错过了什么？特别是，我不太清楚如何显示错误消息。在过滤器中，我使用验证器对登录字段进行验证，如果出现错误，我会抛出一个异常（它扩展了 AuthenticationException）并封装了 Errors 对象。为异常类提供了一个 getErrors() 方法来检索错误。

由于在任何身份验证异常的情况下，失败处理程序将异常存储在会话中，因此在我的控制器中，我检查存储在会话中的异常，如果存在异常，则使用从我的自定义异常（在检查 AuthenticationException 的运行时实例之后）

以下是我的代码快照 -

登录过滤器类

```
public class UsernamePasswordLoginAuthenticationFilter extends
        UsernamePasswordAuthenticationFilter {

    @Autowired
    private Validator loginValidator;

    /* (non-Javadoc)
     * @see org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#attemptAuthentication(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)
     */
    @Override
    public Authentication attemptAuthentication(HttpServletRequest request,
            HttpServletResponse response) throws AuthenticationException {

        Login login = new Login();
        login.setUserId(request.getParameter("userId"));
        login.setPassword(request.getParameter("password"));
        Errors errors = new BeanPropertyBindingResult(login, "login");
        loginValidator.validate(login, errors);
        if(errors.hasErrors()) {
            throw new LoginAuthenticationValidationException("Authentication Validation Failure", errors);
        }
        return super.attemptAuthentication(request, response);
    }
} 
```

控制器

```
@Controller
public class LoginController {

    @RequestMapping(value="/login", method = RequestMethod.GET)
    public String loginPage(@ModelAttribute("login") Login login, BindingResult result,  HttpServletRequest request) {

        AuthenticationException excp = (AuthenticationException)
                request.getSession().getAttribute(WebAttributes.AUTHENTICATION_EXCEPTION);
        if(excp != null) {
            if (excp instanceof LoginAuthenticationValidationException) {
                LoginAuthenticationValidationException loginExcp = (LoginAuthenticationValidationException) excp;
                result.addAllErrors(loginExcp.getErrors());
            }
        }
        return "login";
    }

    @ModelAttribute
    public void initializeForm(ModelMap map) {
        map.put("login", new Login());
    } 
```

这部分在控制器中检查 Exception 的实例然后取出 Errors 对象，看起来不是一个干净的方法。我不确定这是处理它的唯一方法还是有人以任何其他方式接近它？请提供您的建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T09:34:09.170

```
@RequestMapping(value = "/login", method = RequestMethod.GET)
public ModelAndView signInPage(
    @RequestParam(value = "error", required = false) String error,
    @RequestParam(value = "logout", required = false) String logout) {
        ModelAndView mav = new ModelAndView();
        //Initially when you hit on login url then error and logout both null
        if (error != null) {
            mav.addObject("error", "Invalid username and password!");
        }

        if (logout != null) {
            mav.addObject("msg", "You've been logged out successfully.");
        }
        mav.setViewName("login/login.jsp");
} 
```

现在，如果登录不成功，那么它将再次点击此 url，并在其 url 中附加错误，就像在 spring 安全文件中设置失败 url 一样。Spring 安全文件：`-authentication-failure-url="/login?error=1"` 然后您的 URl 变为`url/login?error=1` Then 自动 signInPage 方法将调用并带有一些错误值。现在错误不为空，您可以设置与 url 对应的任何字符串，我们可以使用以下标签在 jsp 上显示：-

```
<c:if test="${not empty error}">
   <div class="error">${error}</div>
</c:if> 
```

# python - 两个长度不等的列表之间的排列

> ID：12935194
> 
> 赞同：234
> 
> 时间：2012-10-17T13:16:31.877
> 
> 标签：python, list, algorithm, itertools, combinatorics

我在尝试实现的算法时遇到了麻烦。我有两个列表，想从这两个列表中获取特定的组合。

这是一个例子。

```
names = ['a', 'b']
numbers = [1, 2] 
```

在这种情况下，输出将是：

```
[('a', 1), ('b', 2)]
[('b', 1), ('a', 2)] 
```

我的名字可能比数字多，即`len(names) >= len(numbers)`. 这是一个包含 3 个名称和 2 个数字的示例：

```
names = ['a', 'b', 'c']
numbers = [1, 2] 
```

输出：

```
[('a', 1), ('b', 2)]
[('b', 1), ('a', 2)]
[('a', 1), ('c', 2)]
[('c', 1), ('a', 2)]
[('b', 1), ('c', 2)]
[('c', 1), ('b', 2)] 
```

* * *

## 回答 #1

> 赞同：633
> 
> 时间：2015-12-01T23:57:18.187

最简单的方法是使用`itertools.product`：

```
a = ["foo", "melon"]
b = [True, False]
c = list(itertools.product(a, b))
>> [("foo", True), ("foo", False), ("melon", True), ("melon", False)] 
```

* * *

## 回答 #2

> 赞同：209
> 
> 时间：2016-08-21T13:33:40.177

可能比上面最简单的更简单：

```
>>> a = ["foo", "bar"]
>>> b = [1, 2, 3]
>>> [(x,y) for x in a for y in b]  # for a list
[('foo', 1), ('foo', 2), ('foo', 3), ('bar', 1), ('bar', 2), ('bar', 3)]
>>> ((x,y) for x in a for y in b)  # for a generator if you worry about memory or time complexity.
<generator object <genexpr> at 0x1048de850> 
```

没有任何进口

* * *

## 回答 #3

> 赞同：130
> 
> 时间：2012-10-17T13:35:11.927

**注意**：此答案适用于上面提出的具体问题。如果您来自 Google，并且只是在寻找一种在 Python 中获取笛卡尔积的方法，`itertools.product`或者您正在寻找简单的列表理解 - 请参阅其他答案。

* * *

假设`len(list1) >= len(list2)`。然后你似乎想要的是从 list2 中获取所有长度排列`len(list2)`并将`list1`它们与项目匹配。在蟒蛇中：

```
import itertools
list1=['a','b','c']
list2=[1,2]

[list(zip(x,list2)) for x in itertools.permutations(list1,len(list2))] 
```

退货

```
[[('a', 1), ('b', 2)], [('a', 1), ('c', 2)], [('b', 1), ('a', 2)], [('b', 1), ('c', 2)], [('c', 1), ('a', 2)], [('c', 1), ('b', 2)]] 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2016-11-29T21:52:35.463

我正在寻找一个只有唯一组合的列表与自身相乘，它是作为这个函数提供的。

```
import itertools
itertools.combinations(list, n_times) 
```

* * *

[这里作为Python 文档 `itertools`](https://docs.python.org/2/library/itertools.html)的摘录可能会帮助您找到所需的内容。

```
Combinatoric generators:

Iterator                                 | Results
-----------------------------------------+----------------------------------------
product(p, q, ... [repeat=1])            | cartesian product, equivalent to a 
                                         |   nested for-loop
-----------------------------------------+----------------------------------------
permutations(p[, r])                     | r-length tuples, all possible 
                                         |   orderings, no repeated elements
-----------------------------------------+----------------------------------------
combinations(p, r)                       | r-length tuples, in sorted order, no 
                                         |   repeated elements
-----------------------------------------+----------------------------------------
combinations_with_replacement(p, r)      | r-length tuples, in sorted order, 
                                         | with repeated elements
-----------------------------------------+----------------------------------------
product('ABCD', repeat=2)                | AA AB AC AD BA BB BC BD CA CB CC CD DA DB DC DD
permutations('ABCD', 2)                  | AB AC AD BA BC BD CA CB CD DA DB DC
combinations('ABCD', 2)                  | AB AC AD BC BD CD
combinations_with_replacement('ABCD', 2) | AA AB AC AD BB BC BD CC CD DD 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2019-07-24T09:07:20.720

找出大量列表的所有组合的最佳方法是：

```
import itertools
from pprint import pprint

inputdata = [
    ['a', 'b', 'c'],
    ['d'],
    ['e', 'f'],
]
result = list(itertools.product(*inputdata))
pprint(result) 
```

结果将是：

```
[('a', 'd', 'e'),
 ('a', 'd', 'f'),
 ('b', 'd', 'e'),
 ('b', 'd', 'f'),
 ('c', 'd', 'e'),
 ('c', 'd', 'f')] 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-01-10T19:26:39.843

您可能想尝试单行列表理解：

```
>>> [name+number for name in 'ab' for number in '12']
['a1', 'a2', 'b1', 'b2']
>>> [name+number for name in 'abc' for number in '12']
['a1', 'a2', 'b1', 'b2', 'c1', 'c2'] 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2019-07-29T17:50:00.137

或短名单的 KISS 答案：

```
[(i, j) for i in list1 for j in list2] 
```

不如 itertools 性能好，但您使用的是 python，因此性能已经不是您最关心的问题......

我也喜欢所有其他答案！

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-12-19T15:02:10.337

对 interjay 的答案进行了微小的改进，以使结果成为扁平列表。

```
>>> list3 = [zip(x,list2) for x in itertools.permutations(list1,len(list2))]
>>> import itertools
>>> chain = itertools.chain(*list3)
>>> list4 = list(chain)
[('a', 1), ('b', 2), ('a', 1), ('c', 2), ('b', 1), ('a', 2), ('b', 1), ('c', 2), ('c', 1), ('a', 2), ('c', 1), ('b', 2)] 
```

从此[链接参考](https://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-03-11T11:32:14.610

没有`itertools`扁平化列表：

```
[(list1[i], list2[j]) for i in range(len(list1)) for j in range(len(list2))] 
```

或在**Python 2**中：

```
[(list1[i], list2[j]) for i in xrange(len(list1)) for j in xrange(len(list2))] 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-08-05T16:12:51.877

对此的更好答案仅适用于提供的特定长度的列表。

这是一个适用于任何长度输入的版本。它还使算法在组合和排列的数学概念方面变得清晰。

```
from itertools import combinations, permutations
list1 = ['1', '2']
list2 = ['A', 'B', 'C']

num_elements = min(len(list1), len(list2))
list1_combs = list(combinations(list1, num_elements))
list2_perms = list(permutations(list2, num_elements))
result = [
  tuple(zip(perm, comb))
  for comb in list1_combs
  for perm in list2_perms
]

for idx, ((l11, l12), (l21, l22)) in enumerate(result):
  print(f'{idx}: {l11}{l12} {l21}{l22}') 
```

这输出：

```
0: A1 B2
1: A1 C2
2: B1 A2
3: B1 C2
4: C1 A2
5: C1 B2 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-03-11T10:11:41.850

回答“给定两个列表，从每个列表中找到一个项目对的所有可能排列”的问题，并使用基本的 Python 功能（即，没有 itertools），因此，可以很容易地复制到其他编程语言：

```
def rec(a, b, ll, size):
    ret = []
    for i,e in enumerate(a):
        for j,f in enumerate(b):
            l = [e+f]
            new_l = rec(a[i+1:], b[:j]+b[j+1:], ll, size)
            if not new_l:
                ret.append(l)
            for k in new_l:
                l_k = l + k
                ret.append(l_k)
                if len(l_k) == size:
                    ll.append(l_k)
    return ret

a = ['a','b','c']
b = ['1','2']
ll = []
rec(a,b,ll, min(len(a),len(b)))
print(ll) 
```

退货

```
[['a1', 'b2'], ['a1', 'c2'], ['a2', 'b1'], ['a2', 'c1'], ['b1', 'c2'], ['b2', 'c1']] 
```

# java - 存储在数据类中

> ID：12935197
> 
> 赞同：0
> 
> 时间：2012-10-17T13:16:39.867
> 
> 标签：java

如何创建数据模型类？, 数据将存储在一个`ArrayList`. 该数组将存储 4 条数据`[ID,NAME,AGE,Gender]`。数据将从 发送到此类`JTextField`。

我也愿意用vector代替ArrayList。

我试过寻找示例，但似乎找不到任何可以用作参考的东西。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:18:45.427

使用自定义类并实现`Comparable`接口编写您的排序逻辑。将所有数据插入列表。排序`Collections.sort(list)`;

```
class User implements Comparable<User>{
    private String name;
    private long id;
    private Date age;
    private boolean gender;
    @Override
    public int compareTo(User user1) {
        return this.age.compareTo(user1.age);
    }
} 

List<User> users = new ArrayList();
users.add(user);
...
Collections.sort(list); 
```

# java - 在 Java 中，最易读的数组边界检查方法是什么？

> ID：12935199
> 
> 赞同：0
> 
> 时间：2012-10-17T13:16:53.080
> 
> 标签：java, arrays

我有一个不同长度的数组，我想从固定位置读取。如果位置超出范围，我想读取一个空值，而不是抛出。我当然可以做类似的事情

```
if(theArray.length <= colNum){ result = null; }
else{ result = theArray[colNum]; } 
```

但这似乎有点不雅。我希望能够进行单行或简单的函数调用，其行为类似于`theArray[colNum]`除了返回`null`而不是抛出越界异常。有没有类似的东西我忽略了？这是我想太多了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:18:03.057

您可以使用[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#Java)。

这是一个单行：

```
result = ((colNum > theArray.length - 1) || (colNum < 0)) ? null : theArray[colNum]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:22:49.110

取决于您认为更具可读性的内容，但您始终可以使用引发的异常：

```
public String read(String[] array, int index)
{
    try
    {
        return array[index];
    }
    catch(IndexOutOfBoundsException e)
    {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:25:54.283

这取决于，“优雅”对你意味着什么？，有几种方法可以做到这一点，如果你想要短代码，请使用[三元运算符](http://java.about.com/b/2009/06/06/java-term-of-the-week-ternary-operator.htm)：

```
result = theArray.length <= colNum ? null : theArray[colNum]; 
```

此外，您可以进行读取，并尝试/捕获[ArrayIndexOutOfBoundsException](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)：

```
try { 
    result = theArray[colNum];
} catch(ArrayIndexOutOfBoundsException e) { 
    result = null;
} 
```

您可以将两者中的任何一个封装在一个方法中，因此您的调用代码将如下所示：

```
result = readFromArray(theArray); 
```

# c# - 使用 Lambda 进行 XDocument 查询

> ID：12935201
> 
> 赞同：2
> 
> 时间：2012-10-17T13:16:57.140
> 
> 标签：c#, xml, lambda, linq-to-xml

我有如下所示的 XML

```
<NodeName Foo="True" Foobar="False" />
<NodeName Foo="False" Foobar="False" />
<NodeName Foo="True" Foobar="False" /> 
```

我正在查询它以使用以下方法查找 Foo 值为“True”的 NodeName：

```
.Where(node => node.Attribute("Foo").Value = "True"); 
```

但是，属性 Foo 可能不存在，这会导致异常。

问题是如何实现逻辑来检查属性是否存在，然后检查值是否存在？

我尝试了以下方法，但不确定 else 括号中的内容不返回任何内容，因为目前它不会编译，并出现未在所有路径上返回值的错误。

```
.Where(node =>
            {
                if (node.Attribute("Foo") != null)
                {
                    node.Attribute("Foo").Value == "True";
                }
                else { }
            }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T13:19:32.380

> 但是，属性 Foo 可能不存在，这会导致异常。

这是从`XAttribute`（实际上是`XElement`）到 string 和许多其他类型的显式转换派上用场的地方：

```
.Where(node => (string) node.Attribute("Foo") == "True"); 
```

当没有这样的属性时，转换将返回 null。这比两次查找属性要方便得多 - 一次用于存在，一次用于值。

或者，您可以使用转换为`bool?`which*也*将在缺少属性时返回 null，因此您需要使用 null-coalescing 运算符来有效地提供默认值：

```
.Where(node => (bool?) node.Attribute("Foo") ?? false); 
```

编辑：就为什么您的语句-lambda 方法不起作用而言，您没有*任何*返回语句。这会起作用，但显然这不是我推荐的：

```
.Where(node =>
        {
            if (node.Attribute("Foo") != null)
            {
                return node.Attribute("Foo").Value == "True";
            }
            else
            {
                return false;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:20:13.847

lambda 必须返回一个布尔值来确定该节点是否会在结果集中。试试这个：

```
 xml.Where(node => node.Attribute("Foo") != null && node.Attribute("Foo").Value == "True"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T13:20:25.503

就这样做

```
.Where(node => node.Attribute("Foo") == null ? false : node.Attribute("Foo").Value == "True"); 
```

# mysql - Zend MySQL PDO 和远程主机致命错误 SQLSTATE[HY000] [2002]

> ID：12935202
> 
> 赞同：2
> 
> 时间：2012-10-17T13:16:58.060
> 
> 标签：mysql, zend-framework, pdo, remote-access, mysql-error-2002

在我的本地 zend 项目中，当我尝试连接到远程 mysql 服务器时，我遇到了这样的问题。

这里application.ini部分：

```
resources.db.adapter = PDO_MYSQL
resources.db.params.host = www.my-site.com
resources.db.params.port = 3306
resources.db.params.username = root
resources.db.params.password = 123
resources.db.params.dbname = mydb 
```

当我刷新页面时出现这样的错误：

```
Fatal error: in D:\_www\enoiq.lcl\library\Zend\Db\Adapter\Pdo\Abstract.php on line 145 
```

print_r($e->getMessage()); 在出现错误之前显示：

```
SQLSTATE[HY000] [2002] 
```

我的错在哪里？

谢谢！

# java - 从pdf中获取页面并使用itext将其保存到图像文件中

> ID：12935204
> 
> 赞同：4
> 
> 时间：2012-10-17T13:17:04.013
> 
> 标签：java, image, import, itext

有一个pdf文件，我想将第二页作为图像导入并保存为jpeg文件。有可能吗？怎么做？

这是我如何导入页面的代码：

```
Document document = new Document();
File file = File.createTempFile("", "");
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(file));
document.open();

final int backPage = 2;
PdfReader reader = new PdfReader(pdf.getAbsolutePath());
PdfImportedPage importedPage = writer.getImportedPage(reader, backPage);
com.lowagie.text.Image image = com.lowagie.text.Image.getInstance(importedPage); 
```

现在我得到一个`image`实例，但我不知道如何将它写入 jpeg 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:26:04.673

Image.getInstance(importedPage) 不会（正如人们可能假设的那样）将表示的页面呈现为某个位图，而只是创建一个包装对象以使导入的页面更容易添加到另一个 PDF。

iText 不是 PDF 渲染工具，尤其不是旧的 com.lowagie 变体。您可能想查看不同的产品，例如[JPedal](http://sourceforge.net/projects/jpedal/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T13:24:42.333

显然（根据[1T3XT BVBA](http://itext-general.2136553.n4.nabble.com/Extrapolate-Image-from-PDF-Page-td2273489.html)），您只能从 PDF 页面保存 iText 图像，而不是光栅图像。您可以将其存储在任何地方，如果您稍后将其用于将其放入另一个 PDF 页面中......否则，您将不得不使用像 JPedal 这样的工具：

[http://www.idrsolutions.com/convert-pdf-to-images/](http://www.idrsolutions.com/convert-pdf-to-images/)

====================================

编辑：也许 PDFBox 也可以为您做到！：

[http://pdfbox.apache.org/commandlineutilities/PDFToImage.html](http://pdfbox.apache.org/commandlineutilities/PDFToImage.html)

[http://gal-levinsky.blogspot.it/2011/11/convert-pdf-to-image-via-pdfbox.html](http://gal-levinsky.blogspot.it/2011/11/convert-pdf-to-image-via-pdfbox.html)

# java - 索引如何提高 MongoDB 中的查询性能

> ID：12935214
> 
> 赞同：2
> 
> 时间：2012-10-17T13:17:27.733
> 
> 标签：java, mongodb

我需要知道 mongo 中的索引如何提高查询性能。目前我的数据库没有被索引。我怎样才能索引现有的数据库。？另外，我是否需要创建一个仅用于索引的新字段。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:31:30.680

从根本上说，MongoDB 中的索引与其他数据库系统中的索引类似。MongoDB 支持 MongoDB 集合中文档中包含的任何字段或子字段的索引。

[此处](http://docs.mongodb.org/manual/core/indexes/)详细介绍了索引，我强烈建议您阅读此文档。

有关于索引操作、策略和创建选项的部分，以及对各种索引如[复合索引](http://docs.mongodb.org/manual/core/indexes/#index-type-compound)（即多个字段的索引）的详细说明。

需要注意的一点是，默认情况下，创建索引是一个阻塞操作。[创建索引](http://docs.mongodb.org/manual/core/indexes/#index-creation-options)很简单：

```
db.collection.ensureIndex( { zip: 1}) 
```

将返回类似这样的内容，表明索引已正确插入：

```
Inserted 1 record(s) in 7ms 
```

在大量数据集合上构建索引，该操作可能需要很长时间才能完成。为了解决这个问题，后台选项可以让您在索引构建期间继续使用您的 mongod 实例。

[此处](http://docs.mongodb.org/manual/core/indexes/#index-limitations)介绍了 MongoDB 中的索引限制。

# javascript - google.ads.search.Ads() 的回调函数

> ID：12935215
> 
> 赞同：3
> 
> 时间：2012-10-17T13:17:29.787
> 
> 标签：javascript, callback, adsense, google-custom-search

按照[https://developers.google.com/custom-search-ads/docs/implementation-guide](https://developers.google.com/custom-search-ads/docs/implementation-guide)上的文档，我创建了一些代码来检索搜索结果页面上的广告。

此代码假定您在网页上放置了一个容器

```
new google.ads.search.Ads(pageOptions, adblock1, adblock2); 
```

*向可能*包含广告的 iFrame 添加一个 iFrame 。我说可能包含，因为有时 iFrame 保持为空。

问题：现在我需要知道天气容器中是否显示任何广告。我该怎么做呢？

*   调用是异步的，所以我什么时候初始化检查？（谷歌参考没有注明回调函数）
*   如何检查是否显示了广告。因为使用 Javascript 我无法查看 iFrame 内部。

欢迎任何建议！:)

问候，乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T07:40:34.340

可能对您有帮助的回调函数是：

```
'noAdLoadedCallback':
  function(containerName, adsLoaded) {
      if (!adsLoaded) {
          try {
              ---- do something here ---
          }
          catch (e) {}
      }
  } 
```

您可以将其放在每个广告块上。

干杯尼克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-14T22:28:31.060

今天我遇到了同样的问题，根据@Niko Nik 的回复，对我有用的解决方案如下：

```
AppComponent.prototype.prepareAds = function (containerId, nOfAds, query) {
    var csa = window._googCsa || function () {};
    var self_1 = this;
    var pageOptions = {
        'pubId': this.gootleAdClient,
        'adtest': this.googleAdTest,
        'adLoadedCallback': function adLoadedCallback(containerName, adsLoaded) {
            self_1.adsLoaded[containerName] = adsLoaded;
        }
    };
    var adBlock = {
        'container': containerId,
        'width': '100%',
        'number': nOfAds
    };
    if (query) {
        pageOptions['query'] = query;
    }
    this.adsLoaded[containerId] = true;
    csa('ads', pageOptions, adBlock);
} 
```

我发现它`adLoadedCallback`的优点是在有广告和没有广告时调用它（当没有广告时，`adsLoaded`参数为 true 时为 false）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:12:54.390

你总是可以添加一个 MutationObserver 并等待 iframe 被插入，然后检查它的高度。如果它的高度小于 30 像素，则它可能是空的。

我没有在 CSA 代码中看到任何回调，但我看到了两个未记录的广告块选项，`clicktrackUrl`以及`linkTarget`. 一个是点击广告时加载的跟踪像素的 url，另一个类似于 a 标签上的 target 属性。

# c# - 如何在 ASP.NET 中动态拖放和调整组件大小？

> ID：12935219
> 
> 赞同：0
> 
> 时间：2012-10-17T13:17:54.133
> 
> 标签：c#, jquery, asp.net, drag-and-drop

我想拖放带有文本的简单 div，并在我放下它时调整它的大小。我必须使用 jQuery，但我从不使用它。知道我在 Head 内容中有这样的代码：

```
<script src="Scripts/jquery.ui.draggable.js" type="text/javascript"></script> 
<script src="Scripts/jquery.ui.core.js" type="text/javascript"></script> 
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script> 
<script type="text/javascript">
    $(function () {
        $("#d1").draggable();
    });
</script> 
```

还

```
 <div id="d1" style="width:100px; height:100px;"> 
  <p>Move This Div</p>
</div> 
```

起初我想尝试移动这个 div，但不能移动它，我不知道为什么？之后我想尝试将它放在桌子上，并调整它的大小。请你提供一些有用的例子或你自己的例子.谢谢你 PS实际上我应该在桌子上移动 ASP.NET Web 窗体的控件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:23:07.483

你需要先加载 jquery 库，所以代码看起来像这样：

```
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script> 
<script src="Scripts/jquery.ui.core.js" type="text/javascript"></script> 
<script src="Scripts/jquery.ui.draggable.js" type="text/javascript"></script> 

<script type="text/javascript">
    $(function () {
        $("#d1").draggable();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:21:03.703

这是一个小例子：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link rel="Stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/redmond/jquery-ui.css" />
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.22/jquery-ui.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#d1").draggable();
            $("#droppable").droppable({
                drop: function (event, ui) {
                    $(this).width(ui.draggable.width());
                    $(this).height(ui.draggable.height());
                }
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div id="d1" style="width:100px; height:100px; border: solid 1px silver;">  
            <p>Move This Div</p> 
        </div>
        <table border="1">
            <tr>
                <td id="droppable" style="width: 200px; height: 200px;">
                    One
                </td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

# .net - 如何在桌面 .NET 应用程序中存储数据？

> ID：12935227
> 
> 赞同：3
> 
> 时间：2012-10-17T13:18:08.537
> 
> 标签：.net, sql, architecture, ado.net

我想创建一个应用程序来发送新闻通讯。我想把数据库中的所有信息（姓名、地址、消息等）存储在几个表中。但是，我想知道这是否是实际应用程序的完成方式。就我而言，我的计算机上安装了 SQL 服务器，因此我可以在本地连接到它。如果其他人使用该程序，但他的计算机上没有安装服务器怎么办？

我的大学项目需要这些信息。我必须使用 ADO.NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:21:34.833

您可以使用[嵌入式数据库](http://en.wikipedia.org/wiki/Embedded_database)- 这通常是您可以随应用程序分发的基于文件的数据库。

[SQL Server CE](http://en.wikipedia.org/wiki/SQL_Server_Compact)和[Sqlite](http://www.sqlite.org/)是两个流行的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:22:08.117

如果您需要在多个客户端之间共享数据，那么您必须处理中央数据存储的后勤问题。

如果数据可以只保存在本地，那么[System.Data.SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)可能是最佳选择，因为它为您提供了简单的部署（只需复制一个文件）、许多功能和一个 ADO.NET 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:27:59.117

所以你有两层：

*   应用层
*   数据库层

许多用户可以访问该应用程序。因此，或者他们共享应用程序层，或者他们共享数据库层。

Web 应用程序是一种解决问题的方法。app层和db层都是远程的（一般不在同一台服务器上），无论db层在哪里，用户都可以访问app层。

在您的场景中，应用层是桌面应用程序。所以数据库应该是共享的。查看[Azure 基础架构](http://msdn.microsoft.com/en-us/library/windowsazure/ee336239.aspx)。它是一个具有数据库层的 MS 的云基础架构。

对于完整的独立应用程序，请参阅其他帖子中建议的解决方案。但请记住，完整的独立应用程序不会在不同安装之间共享数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T05:41:22.950

[获取SQL Server Express Edition](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)的副本。它应该满足您对本地开发的需求。部署它时，Windows Azure 或单独的专用 SQL Server 实例将是合适的。

# ruby-on-rails - 如何在视图中通过参数 id 查找值？

> ID：12935228
> 
> 赞同：1
> 
> 时间：2012-10-17T13:18:09.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在视图中有一个字段，例如，

```
<%= f.text_field :question_id, class: "cross-reference-question-value"  %> 
```

现在，我尝试使用它`question_id`来匹配同一个表中的另一列，如下所示：

```
<%= text_field :question_id, Question2009.all.map{|an| [an.answer_table]} %> 
```

我可以从该表中获取所有值。但是，我只需要得到匹配的`params`值`question_id`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:21:34.740

改变

```
<%= text_field :question_id, Question2009.all.map{|an| [an.answer_table]} %> 
```

到

```
<%= text_field :question_id, Question2009.where("question_id=?", params[:question_id]).map{|an| [an.answer_table]} %> 
```

# excel - 在五列中查找重复项

> ID：12935229
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:18:11.580
> 
> 标签：excel, excel-2003, vba

我有从 A 到 K 列的数据集，并且想从 A、D、F、J 和 K 列中找到重复的数据行。

我有以下代码：

```
Sub RemoveDupes2()

Dim r As Long, lr As Long
 Application.ScreenUpdating = False
  lr = Cells.Find(What:="*", SearchDirection:=xlPrevious, SearchOrder:=xlByRows).Row
   With Range("L2:L" & lr)
     .Formula = "=ROW()"
      .Value = .Value
   End With
  Range("A2:L" & lr).Sort Key1:=Range("A2"), Order1:=1, Key2:=Range("B2"), Order2:=1
  With Range("M2:M" & lr)
   .FormulaR1C1 = "=RC[-12]&RC[-11]&RC[-6]&RC[-4]&RC[-2]"
   .Value = .Value
    End With
  With Range("N2:N" & lr)
   .FormulaR1C1 = "=COUNTIF(R1C13:RC[-1],RC[-1])"
      .Value = .Value
  End With
    For r = lr To 2 Step -1
     If Cells(r, 14).Value > 2 Then
        Rows(r).Delete
     ElseIf Cells(r, 14).Value = 2 Then
      Cells(r - 1, 1).Resize(, 7).Font.Bold = True
      Rows(r).Delete
     End If
    Next r
    lr = Cells.Find(What:="*", SearchDirection:=xlPrevious, SearchOrder:=xlByRows).Row
      Range("A2:L" & lr).Sort Key1:=Range("L2"), Order1:=1
     Range("L2:N" & lr).ClearContents
      Application.ScreenUpdating = True
      End Sub 
```

该代码当前删除了整个数据集，我不确定为什么这样做，因为我是 VBA 的新手。

[https://www.dropbox.com/s/otgkk1igcd2995t/duplicates.xlsx](https://www.dropbox.com/s/otgkk1igcd2995t/duplicates.xlsx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T20:36:34.577

在您的第一个`With`，请尝试更改：

```
.FormulaR1C1 = "=RC[-12]&RC[-11]&RC[-6]&RC[-4]&RC[-2]" 
```

至

```
.FormulaR1C1 = "=RC[-12]&RC[-9]&RC[-7]&RC[-3]&RC[-2]" 
```

然而，很可能存在一个单独的问题，因为即使上面的代码未更改也不会删除整个数据集（对我来说，使用 Excel 2007）。

# python - 使用 mlab 在 mayavi 中用文本注释许多点

> ID：12935231
> 
> 赞同：6
> 
> 时间：2012-10-17T13:18:17.407
> 
> 标签：python, data-visualization, mayavi

我正在尝试使用 mayavi.mlab 注释使用 points3d() 函数绘制的点。每个点都与一个标签相关联，我想使用 text3d() 函数在这些点旁边绘制该标签。绘制点很快，但是 mlab.text3d() 函数似乎不接受坐标数组，所以我必须遍历点并单独绘制文本，这非常慢：

```
 for i in xrange(0, self.n_labels):
            self.mlab_data.append(
                mlab.points3d( pX[self.labels == self.u_labels[i], 0],
                               pX[self.labels == self.u_labels[i], 1],
                               pX[self.labels == self.u_labels[i], 2],
                               color=self.colours[i],
                               opacity=1,
                               scale_mode="none",
                               scale_factor=sf ) )

            idcs, = np.where(self.labels == self.u_labels[i])
            for n in idcs.flatten():
                mlab.text3d( pX[n, 0],
                             pX[n, 1],
                             pX[n, 2],
                             "%d" % self.u_labels[i],
                             color=self.colours[i],
                             opacity=1,
                             scale=sf ) 
```

有什么想法可以加快速度吗？另外，是否可以添加图例（例如在 matplotlib 中），我在文档中找不到任何内容。

谢谢，

帕特里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T00:21:00.990

每次绘制点或文本时，上面的操作方式都会渲染场景。这很慢。您可以禁用场景渲染，进行绘图，然后通过**figure.scene.disable_render = True/False**渲染场景：

```
 import scipy
    from mayavi import mlab

    X = 100 * scipy.rand(100, 3)
    figure = mlab.figure('myfig')
    figure.scene.disable_render = True # Super duper trick
    mlab.points3d(X[:,0], X[:,1], X[:,2], scale_factor=0.4)
    for i, x in enumerate(X):
        mlab.text3d(x[0], x[1], x[2], str(i), scale=(2, 2, 2))
    figure.scene.disable_render = False # Super duper trick 
```

我在 morphic Viewer [https://github.com/duanemalcolm/morphic/blob/master/morphic/viewer.py的 Figure 类中使用了这个技巧和其他技巧](https://github.com/duanemalcolm/morphic/blob/master/morphic/viewer.py)

代码中的另一个好技巧是重用现有对象，即，如果您已经绘制了文本，则不要重新绘制它们，只需更新它们的位置和文本属性。这意味着保存 mlab 对象。你可以在 morphic.Viewer 中看到我是如何做到这一点的。

# javascript - jQuery Masonry 没有重新加载？

> ID：12935234
> 
> 赞同：1
> 
> 时间：2012-10-17T13:18:27.800
> 
> 标签：javascript, jquery, plugins, jquery-masonry

由于某种原因，砌体插件无法在我的一个调用中重新加载，这是代码：

```
 jQuery(document).ready(function(){

jQuery(".pics-hidden").hide();

jQuery('#menu1').click(function() {
      jQuery('#thumb07').removeClass('.pics').addClass('.pics-hidden').removeClass('#thumb07').fadeOut(400);
      jQuery('#projectimages').masonry('reload');
       });

jQuery('.pics').click(function() {
      jQuery('#div'+jQuery(this).attr('rarget')).addClass('pics').removeClass('#div'+jQuery(this).attr('rarget')).delay(600).fadeIn(400);
      jQuery('#projectimages').masonry('reload');
       });

jQuery('.close').click(function() {
      jQuery('#div'+jQuery(this).attr('larget')).removeClass('pics').addClass('.pics-hidden').removeClass('#div'+jQuery(this).attr('larget')).fadeOut(200);
      jQuery('#projectimages').masonry('reload'); 
      return false;      
});
}); 
```

底部的 2 个调用工作正常并成功重新加载砌体，但“#menu1”单击功能无法重新加载砌体插件，这可能很明显，但我似乎无法弄清楚它是什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:23:16.687

... .removeClass('#thumb07')...？

```
jQuery('#thumb07').removeClass('.pics').addClass('.pics-hidden').removeClass('#thumb07').fadeOut(400); 
```

# windows-runtime - 如何在 WinRT 中读取除 UFT8 或 UTF16 之外的其他编码的文本文件？

> ID：12935238
> 
> 赞同：4
> 
> 时间：2012-10-17T13:18:45.790
> 
> 标签：windows-runtime, winrt-xaml, windows-store-apps

如果我使用 FileIO.ReadTextAsync、ReadLinesAsync 或 DataReader 读取文本文件，我只能为编码指定 UnicodeEncoding 枚举的成员。由于某种原因，这仅包括 Utf8、Utf16BE 和 Utf16LE。那么如何读取具有另一种编码的文本文件（例如 Windows-1252 甚至常规 Unicode（所有字符都有 2 个字节））？

如果 Windows 应用商店应用程序与桌面应用程序共享文本文件或从 Internet 读取文本文件，这可能很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:27:17.073

汉斯的评论实际上回答了我的问题。Windows-1252 示例：

```
string filePath = ...
StorageFile file = await StorageFile.GetFileFromPathAsync(filePath);
IBuffer buffer = await FileIO.ReadBufferAsync(file);
byte[] fileData = buffer.ToArray();
Encoding encoding = Encoding.GetEncoding("Windows-1252");
string text = encoding.GetString(fileData, 0, fileData.Length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T09:54:25.343

@JürgenBayer`buffer.ToArray()`不适合我。

所以，而不是写：

```
string text = await FileIO.ReadTextAsync(file); 
```

我写：

```
IBuffer buffer = await FileIO.ReadBufferAsync(file);
byte[] fileData;
CryptographicBuffer.CopyToByteArray(buffer, out fileData);
Encoding encoding = Encoding.GetEncoding("Windows-1252");
string text = encoding.GetString(fileData, 0, fileData.Length); 
```

# python - python - 使用 __func__ 调用实例方法

> ID：12935241
> 
> 赞同：28
> 
> 时间：2012-10-17T13:18:58.457
> 
> 标签：python

我是 python 新手，我不太了解`__func__`python 2.7 中的内容。

我知道当我定义这样的类时：

```
class Foo:
    def f(self, arg):
        print arg 
```

我可以使用或者`Foo().f('a')`调用`Foo.f(Foo(), 'a')`这个方法。但是，我不能通过`Foo.f(Foo, 'a')`. 但我偶然发现我可以使用`Foo.f.__func__(Foo, 'a')`甚至`Foo.f.__func__(1, 'a')`得到相同的结果。

我打印出`Foo.f`、`Foo().f`和的值`Foo.f.__func__`，它们都是不同的。但是，我只有一段代码在定义中。谁能帮助解释上面的代码实际上是如何工作的，尤其是`__func__`? 我现在真的很困惑。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-17T13:24:03.983

当您访问`Foo.f`或返回*方法*`Foo().f`时；在第一种情况下它是未绑定的，在第二种情况下是绑定的。python方法本质上是一个函数的包装器，该函数还包含对其作为方法的类的引用。绑定时，它还保存对实例的引用。

 *当你*调用*一个方法时，它会对传入的第一个参数进行类型检查，以确保它是一个实例（它必须是被引用类的实例，或者该类的子类）。当方法被绑定时，它会在你自己提供的未绑定方法上提供第一个参数。

正是这个方法对象具有`__func__`属性，它只是对包装函数的引用。通过访问底层函数而不是调用方法，您可以删除类型检查，并且您可以传入任何您想要的作为第一个参数。函数不关心它们的参数类型，但方法关心。

请注意，在 Python 3 中，这已经改变；`Foo.f`只返回函数，而不是未绑定的方法。`Foo().f`返回一个仍然绑定的方法，但是没有办法再创建一个未绑定的方法。

在底层，每个函数对象都有一个[`__get__`方法](http://docs.python.org/reference/datamodel.html#object.__get__)，这就是返回方法对象的内容：

```
>>> class Foo(object):
...     def f(self): pass
... 
>>> Foo.f
<unbound method Foo.f>
>>> Foo().f
<bound method Foo.f of <__main__.Foo object at 0x11046bc10>>
>>> Foo.__dict__['f']
<function f at 0x110450230>
>>> Foo.f.__func__
<function f at 0x110450230>
>>> Foo.f.__func__.__get__(Foo(), Foo)
<bound method Foo.f of <__main__.Foo object at 0x11046bc50>>
>>> Foo.f.__func__.__get__(None, Foo)
<unbound method Foo.f> 
```

这不是最有效的代码路径，因此，Python 3.7 添加了一个新的`LOAD_METHOD`-操作码对`CALL_METHOD`来精确地替换当前的`LOAD_ATTRIBUTE`-`CALL_FUNCTION`操作码对，以避免每次都创建一个新的方法对象。这种优化转换了`instance.foo()`from `type(instance).__dict__['foo'].__get__(instance, type(instance))()`with的执行路径`type(instance).__dict__['foo'](instance)`，因此“手动”将实例直接传递给函数对象。这在现有微基准测试上节省了大约 20% 的时间。*

# msmq - MessageQueue.GetPrivateQueuesByMachine 上的访问被拒绝

> ID：12935242
> 
> 赞同：1
> 
> 时间：2012-10-17T13:19:02.327
> 
> 标签：msmq

我正在尝试获取远程机器上可用队列的列表。该机器是工作组模式下的 Win2003R2，运行代码的客户端机器是使用相同工作组名称的 Windows 8 机器。运行以下代码时出现异常：

```
var messages = MessageQueue.GetPrivateQueuesByMachine("Win2003SRV"); 
```

错误信息是：

```
base {System.Runtime.InteropServices.ExternalException}: {"Access to Message Queuing system is denied."}
Message: "Access to Message Queuing system is denied."
MessageQueueErrorCode: AccessDenied 
```

我很确定它与 Windows 2003 上的权限有关，但找不到太多。该代码适用于另一个 Win Server 2008（但处于工作组模式）并且也适用于本地 MSMQ。根据[MSDN page](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.getprivatequeuesbymachine.aspx)，工作组模式支持此功能，那么有什么问题？

**解决了：**

我的问题原来是我的客户端机器上没有安装 MSMQ！链接上的帮助为我指明了正确的方向，所以我所要做的就是在客户端机器上安装 MSMQ。如果您查看 GetPrivateQueuesByMachine 的实现，本机调用可能会抛出 DllNotFoundException 并且正是该异常转换为该特定消息，因此它应该给您提示什么是错误的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:19:24.947

作为/曾经是 msmq MVP 的 John Breakwell 有一些帖子可能会有所帮助。问题似乎是因为 GetPrivateQueuesByMachine() 方法在后台使用 RPC 在不同机器上的队列管理器之间进行通信。

[http://blogs.msdn.com/b/johnbreakwell/archive/2010/03/24/understanding-how-msmq-security-blocks-rpc-traffic.aspx](http://blogs.msdn.com/b/johnbreakwell/archive/2010/03/24/understanding-how-msmq-security-blocks-rpc-traffic.aspx)

# haskell - Haskell 中的泛型序列化

> ID：12935246
> 
> 赞同：6
> 
> 时间：2012-10-17T13:19:09.317
> 
> 标签：haskell, serialization, deserialization

当我尝试反序列化对象时出现此错误。

```
Amy64.hs: GetException "too few bytes\nFrom:\tdemandInput\n\n" 
```

输出文件已创建，如下所示：

```
00000000  1f 8b 08 00 00 00 00 00  04 03 63 60 00 03 56 a7  |..........c`..V.|
00000010  d2 f4 e2 4a 00 be b2 38  41 0d 00 00 00           |...J...8A....| 
```

我怀疑我错误地使用了新的泛型。这是我的代码。顺便说一句，如果我删除第 9、22 和 23 行，我会得到相同的结果。如果我删除 gzip/ungzip 的东西，我会得到相同的结果。

```
{-# LANGUAGE DeriveGeneric #-}

import Data.Conduit (runResourceT, ($$), (=$))
import Data.Conduit.Binary (sinkFile, sourceFile)
import Data.Conduit.Cereal (sinkGet, sourcePut)
import Data.Conduit.Zlib (gzip, ungzip)
import qualified Data.Serialize as DS (Serialize, get, put)
import GHC.Generics (Generic)
import Data.Serialize.Derive (derivePut, deriveGet) -- line 9

readBug :: FilePath -> IO (Either String Bug)
readBug f = 
  runResourceT $ sourceFile f $$ ungzip =$ sinkGet (DS.get)

writeBug :: FilePath -> Bug -> IO ()
writeBug f t = 
  runResourceT $ sourcePut (DS.put t) $$ gzip =$ sinkFile f

data Bug = Bug String deriving (Show, Generic)

instance DS.Serialize Bug where
  put = derivePut -- line 22
  get = deriveGet -- line 23

main = do
  let a = Bug "Bugsy"
  writeBug "x.dat" a
  (Right b) <- readBug "x.dat" :: IO (Either String Bug)
  print b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:49:31.557

事实证明，我的错误与泛型本身无关。函数上的错误类型签名`readBug`导致它尝试读取 an`Either String Bug`而不仅仅是`Bug`.

```
{-# LANGUAGE DeriveGeneric #-}

import Data.Conduit (runResourceT, ($$), (=$))
import Data.Conduit.Binary (sinkFile, sourceFile)
import Data.Conduit.Cereal (sinkGet, sourcePut)
import Data.Conduit.Zlib (gzip, ungzip)
import qualified Data.Serialize as DS (Serialize, get, put)
import GHC.Generics (Generic)
import Data.Serialize.Derive (derivePut, deriveGet) -- line 9

readBug :: FilePath -> IO Bug
readBug f = 
  runResourceT $ sourceFile f $$ ungzip =$ sinkGet DS.get

writeBug :: FilePath -> Bug -> IO ()
writeBug f t = 
  runResourceT $ sourcePut (DS.put t) $$ gzip =$ sinkFile f

data Bug = Bug String deriving (Show, Generic)

instance DS.Serialize Bug where
  put = derivePut -- line 22
  get = deriveGet -- line 23

main :: IO ()
main = do
  let a = Bug "Bugsy"
  writeBug "x.dat" a
  b <- readBug "x.dat" :: IO Bug
  print b 
```

# c++ - 尝试使用 MFC 对象时出现访问冲突

> ID：12935247
> 
> 赞同：0
> 
> 时间：2012-10-17T13:19:08.727
> 
> 标签：c++, mfc, access-violation

我正在使用使用 FPS 计数器的 Kinect 进行 MFC 项目。这是一个静态文本。我希望这个 FPS 计数器可以通过一种方法来编辑，该方法也负责制作 kinect 图像。因此，我主要将 HWND 传递给我的 kinect 对象，如下所示：

```
kinect->initialize(this->GetSafeHwnd()); 
```

在我的 kinect 对象中，这个东西被保存了：

```
this->hwnd = hWnd; 
```

然后这段代码初始化我要使用的静态文本：

```
CStatic * MFC_ecFPSCOLOR;
MFC_ecFPSCOLOR = (CStatic *) GetDlgItem(hWnd, TC_FPSCOLOR); 
```

然后我想使用它：

```
MFC_ecFPSCOLOR->SetWindowTextW(L"TEST"); 
```

这里出了问题：

```
Unhandled exception at 0x54431C19 (mfc110ud.dll) in KinectMain.exe: 0xC0000005: Access violation reading location 0x0031004C. 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:26:53.250

你使用了错误的版本`GetDlgItem`，它返回一个句柄而不是一个`CWnd*`. 演员向你隐瞒错误。

# java - 当前时间/日期代码错误

> ID：12935248
> 
> 赞同：0
> 
> 时间：2012-10-17T13:19:12.223
> 
> 标签：java, hibernate

我如何获得当前时间，因为此代码给出（时间-->Thu Jan 01 05:56:27 ACT 1970）？

```
DateFormat timeFormat = new SimpleDateFormat("HH:mm:ss.SS"); 
         Date time = new Date(); 
         String currentTime=timeFormat.format(time);
         time=timeFormat.parse(currentTime);
         System.out.println("Time-->"+time);
         salesOrder.setOrderTime(time); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:23:16.297

类`java.util.Date`不适合仅存储时间（小时、分钟、秒、毫秒）。类`Date`是一个时间戳，它包含自 01-01-1970, 00:00:00 GMT 以来的毫秒数。

而是使用[Joda Time](http://joda-time.sourceforge.net/)库中的这个`LocalTime`。

注意：您在代码中所做的是首先将`Date`对象格式化为 a `String`，然后再次将其解析回 a `Date`，丢弃日、月、年部分。您最终得到的是一个`Date`对象，该对象设置为自 01-01-1970, 00:00:00 GMT 以来的小时数、分钟数、秒数和毫秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:29:15.817

您的格式仅包含小时、分钟和秒。只给定一个没有日期组件的时间，`DateFormat.parse()`不填写当前日期；它回退到系统的纪元“时间零”，即 1970 年 1 月 1 日。如果您想要一个可以转换回 Date 对象的日期字符串，您还需要包括年月日作为小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:31:50.490

```
use DateFormat timeFormat = new SimpleDateFormat(); 
```

代替

```
DateFormat timeFormat = new SimpleDateFormat("HH:MM:ss:SS"); 
```

问题在于格式。你没有提供日期，年份外野手，这就是它这样做的原因。或者您可以使用正确的格式：

```
DateFormat timeFormat = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z"); 
```

编辑：

试试这个：

```
 Calendar c = Calendar.getInstance(); 
  c.setTime(time);
  System.out.println(c.get(Calendar.YEAR)+ "  "+c.get(Calendar.MONTH)+ " "+ c.get(Calendar.DAY_OF_MONTH)); 
```

其中`time`设置的`Calendar object`是未使用 simpleDateFormat 解析/格式化的时间。从`calendar object`中，您可以获取单个月、日、年并以您喜欢的方式使用它，或者您可以直接调用`c.getTime()`获取`Date object`.

# html - 如何制作类似于 Microsoft Windows 网站上的菜单？

> ID：12935260
> 
> 赞同：0
> 
> 时间：2012-10-17T13:19:34.717
> 
> 标签：html, drupal, css, menu

我有一个问题想问你是否可以帮助我。我想要一个类似于 windows.microsoft.com 网站（[http://awesomescreenshot.com/098jgh494](http://awesomescreenshot.com/098jgh494)）但在 Drupal 网站上的菜单。几乎是两个水平条，只有在单击父级时才会显示较低的水平条。

我尝试了几种解决方案，但无济于事。

如果你能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:16:16.150

只需在后端设置具有 2 个菜单级别的菜单。然后通过块或面板使用 menu_block 模块。

仅查看级别 1 时，这将导致以下 HTML：

查看 2 级菜单时的以下内容：

最后，只需使用 CSS 设置样式即可。

# java - DataInputStream 、 GZIPInputStream 和 InputStream 的区别

> ID：12935277
> 
> 赞同：0
> 
> 时间：2012-10-17T13:20:42.890
> 
> 标签：java, io, gzipinputstream

我知道，

`GZIPInputStream extends InflaterInputStream extends FilterInputStream extends InputStream`和

```
DataInputStream extends FilterInputStream extends InputStream 
```

我想知道关注之间的区别..

```
InputStream mIstr1 = new DataInputStream(new GZIPInputStream(mUConn.getInputStream()));
InputStream mIstr2 = new GZIPInputStream(mUConn.getInputStream());
InputStream mIstr3 = new DataInputStream(mUConn.getInputStream());
InputStream mIstr4 = mUConn.getInputStream(); 
```

`mUConn`是一个`HttpURLConnection`。

我的担忧是

*   什么情况下我们必须在 DataInputStream 中获取 InputStream 作为 GZIPInputStream？
*   什么情况下我们必须将 InputStream 获取为 GZIPInputStream？
*   什么情况下我们必须将 InputStream 作为 DataInputStream？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:23:40.447

它们确实是完全不同的类，文档应​​该很好地描述每个类的用途。

您想使用`DataInputStream`涉及以有据可查的方式从流中读取原始类型和字符串的方法吗？如果是，则用于`DataInputStream`包装原始流；否则不要。

您的原始流是否包含使用 gzip 算法压缩的数据？如果是这样，请使用`GZIPInputStream`; 否则不要。我不*希望*来自的输入流`HttpURLConnection`呈现 gzip 压缩的数据；我希望 HTTP 库会根据标头执行适当的膨胀，但它们可能在这里“愚蠢”。（如果是这种情况，您可能希望找到替代库。）

# jquery - 使用数据库值填充 html 表列

> ID：12935281
> 
> 赞同：0
> 
> 时间：2012-10-17T13:20:59.883
> 
> 标签：jquery, html

我需要从从数据库中获取的数据中填充表。我怎样才能在脚本部分中使用它。需要建议或解决方案

```
 <table border="0" style="margin-left:2%; margin-top:2%; ">
            <tr>
            <td align="left">ProductCode</td><td id="productcode"> </td>
            </tr>
            <tr>
            <td>Materialcontent</td><td id="materialcontent"></td>
            </tr>
            <tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:27:14.377

阅读[这个（jQuery 数据表）](http://britseyeview.com/software/dtgs/)，然后阅读这个（[通过 AJAX 填充）](http://britseyeview.com/software/dtgs/poptable.html)。

# html - 排版的“真实”基线

> ID：12935283
> 
> 赞同：1
> 
> 时间：2012-10-17T13:21:02.430
> 
> 标签：html, css, typography, baseline, vertical-rhythm

网页设计中的行高和印刷（InDesign 等）中的行高是不一​​样的。结果接近：

*   在网络[http://jsfiddle.net/Y9M28/4/](http://jsfiddle.net/Y9M28/4/)（在 webkit 中更好）
*   在打印[http://jsfiddle.net/Y9M28/3/](http://jsfiddle.net/Y9M28/3/)

我尝试了很多技巧，但正如您在我的打印示例中看到的那样，由于多行，最后一段的边距很差。现代浏览器是否可以做得更好？我知道[http://baselinecss.com/](http://baselinecss.com/)但这有很多相对位置和顶部调整不是很灵活。

最后一个解决方案是在许多单行中为单独的多行块添加 javascript（但要重）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:41:25.867

`vertical-align`仅适用于**内联**元素和**表格单元格**。`<p>`是**块**元素。`vertical-align`的默认值为`baseline`。

知道这一点，您的实验可能会取得更大的成功。祝你好运！

[这是一篇很棒的文章，可以解释`vertical-align`。](http://css-tricks.com/what-is-vertical-align/)

[这是 Mozilla 文档](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)

# php - 从 url 中删除 php 并强制使用斜杠

> ID：12935286
> 
> 赞同：1
> 
> 时间：2012-10-17T13:21:07.063
> 
> 标签：php, mod-rewrite, file-extension

我以前问过这个问题，并使用了一些我不理解的代码，现在它都崩溃了。希望我能比以前更准确地表达我的意图。我正在尝试学习正则表达式，但我似乎无法将学到的知识应用于 mod-rewrite 技术。

我的网站有很多`.php`以不同文件夹深度结尾的网址。我希望所有的网址都不管子`site.net/folder/folder/filename/`文件夹的数量。

我的问题是我的一些表单使用 POST 和 GET 请求。因此，当用户单击上传以上传文件时，我通常将表单的操作部分设置为`.php`文件，例如，`site.net/folder/script/upload.php`或者通常在重定向到页面`site.net/folder/folder/scripts/upload.php`之前处理文件的上传。`xyz`

当 .php 网址被清除时，我也无法找到上传脚本。可以构建 mod-rewrite 规则以在不妨碍我的“worker”脚本（upload.php、processcontactinfo.php 等）的情况下获取 php 扩展吗？编辑

这是我的脚本到目前为止的样子。

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^POST\ /([^.\ ]+\.)+php(\?[^\ ]*)?\ HTTP
RewriteCond %{THE_REQUEST} ^GET\ /([^.\ ]+\.)+php(\?[^\ ]*)?\ HTTP
RewriteRule ^(.+)\.php$ http://www.site.net/$1 [R=301,L]
RewriteRule ^([^/]+/)*index/?$ http://www.site.net/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ http://www.site.net/$1 [R=301,L]
RewriteCond $1 !^([^.]+\.)+([a-z0-9]+)$ [NC]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*[^/])$ /$1.php [L]
RewriteRule (.*)/$ $1.php [L] 
```

我尝试了不同的变体，但就像我说的那样，我不擅长阅读或创建正则表达式。因此，这充其量只是反复试验。这允许我通过 site.net/folder/filename/ 访问文件文件，但它不会将请求从 site/folder/filename.php 更改为 site.net/folder/filename/。同样在这一点上找不到各种脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:29:59.803

我希望这段代码对你有帮助。您必须在 .htaccess 文件中编写此代码。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:55:02.343

> 我需要它将文件视为 php 文件但不显示扩展名

然后你需要使用这个：

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{THE_REQUESTI} ^(GET|POST|HEAD)\ /(.+)\.php($|\?|\ )
RewriteRule ^ /%2 [L,R=301] 
```

你原来的规则很接近，除了条件总是ANDed在一起，所以前两个条件不可能同时为真。此外，条件仅适用于紧随其后的`RewriteRule`，因此您的第二个**每次**`RewriteRule`都适用。

 **至于你的其他规则：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ http://www.site.net/$1 [R=301,L] 
```

这可能会导致问题，因为 mod_dir*完全相反*，您最终可能会出现重定向循环。请注意，由于存在[严重的信息泄露安全问题，mod_dir 包含尾部斜杠。](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash). 因此，如果您想使用上述规则，请包括：

```
DirectorySlash Off 
```

关闭 mod_dir 将浏览器重定向到*带有斜杠*的 URL 。至于最后一点，您再次遇到了尝试将 a`RewriteCond`应用于多个`RewriteRule`'s 的问题。这两个条件都只适用于`RewriteRule ^(.*[^/])$ /$1.php [L]`，最后一条规则完全没有条件应用。但是，如果看起来您正在尝试这样做：

```
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /$1.php [L]

RewriteCond %{REQUEST_URI} ^/(.*)/$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1.php [L] 
```**

# node.js - 在所有页面上始终与 node.js 聊天

> ID：12935287
> 
> 赞同：0
> 
> 时间：2012-10-17T13:21:11.897
> 
> 标签：node.js, chat

我正在php网站中使用node.js（使用zf）建立一个人对人的聊天我想知道facebook（例如）是如何做到的，即使在从页面导航到页面时也总是让footbar可见。我首先认为他们在任何地方都使用了 ajax，因此页面永远不会真正重新加载，但它似乎不是因为您可以使用浏览器后退/前进按钮进行导航（而且我在浏览器开发人员工具中没有看到任何 ajax 调用）。所以，我的第二个想法是，所有 facebook 都是用一种 node.js 替代品构建的，所以一切都适用于 js 套接字？

知道如何做一个类似的系统，让我的聊天窗口即使在浏览我的网站时也始终可见？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:48:35.070

我很确定当您在 Facebook 中导航时它们不会加载实际页面，但它是所有 JavaScript 导航，可在较新的浏览器中使用，并记录在[http://html5doctor.com/history-api/](http://html5doctor.com/history-api/)或[https://developer。 mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。这就是为什么您会获得这种“流畅”的体验，并且即使您从一个页面到另一个页面，前后移动，聊天也会保留在屏幕上。

# internet-explorer - Internet Explorer 和 Angular JS

> ID：12935289
> 
> 赞同：2
> 
> 时间：2012-10-17T13:21:15.580
> 
> 标签：internet-explorer, angularjs

目前在 Internet Explorer 和 Angular js 方面存在问题。

如下所示的 html 在 Chrome 和 Firefox 中呈现良好，但是 ng-view 标记中的任何内容都不会在 IE 中呈现。

```
<html xmlns:ng="http://angularjs.org">
<html lang="en" ng-app="poc">
<head>
<meta charset="utf-8">
<title>poc</title>
<link rel="stylesheet" href="css/app.css"/>
<link rel="stylesheet" href="css/bootstrap.css"/>
<script src="lib/angular/angular.js"></script>
<script src="js/app.js"></script>
<script src="js/services.js"></script>
<script src="js/controllers.js"></script>
<script src="js/filters.js"></script>
<script src="js/directives.js"></script>
<script src="cordova-2.1.0.js"></script>
<script src="js/jquery.min.js"></script>
</head>
<body>
<div ng-view>
</div>
</body>
</html> 
```

我试图注入的部分如下所示：

```
<section>
<h1>Proof of Concept</h1>
<ul>
<li><a href="#/phonegap">Try Phonegap Features</a></li>
<li><a href="#/observations">Test Websocket Requests</a></li>
<li><a href="#/persondetails">Test Person Details Requests</a></li>
</ul>
<section> 
```

下面的代码显示了我们正在使用的路由实现：

```
'use strict';

angular.module('poc', ['pocFilters', 'pocServices']).
config(['$routeProvider', function($routeProvider){
$routeProvider.
    when('/poc', {templateUrl: 'partials/poc.html',   controller: PocCtrl}).

    when('/observations', {templateUrl: 'partials/observations.html', 
    controller: ObservationsCtrl}).

    when('/phonegap', {templateUrl: 'partials/phonegap.html',
    controller: PhonegapCtrl}).

    when('/persondetails', {templateUrl: 'partials/persondetails.html',
    controller: PersondetailsCtrl}).

    otherwise({redirectTo: '/poc'});
}]); 
```

任何人对可能导致 IE 出现问题的原因有任何想法吗？

谢谢，

帕特里克

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T22:50:13.130

First you should look at angularjs doc on [IE](http://docs.angularjs.org/guide/ie). I wrote an IE Shiv for [angular-ui](http://angular-ui.github.com/) which frees you from doing this and when you create element style directives (which ng-view, ng-include etc are), you can instruct shiv of which of your angular modules have these directives.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T11:53:45.140

添加`id="ng-app"`到您正在使用**ng-app**指令的标签中。在您的情况下，标签是`<html>`. 因此，您的 html 标记应如下所示，以使应用程序在 IE 中呈现。

`<html lang="en" ng-app="poc" id="ng-app">`

代替

`<html lang="en" ng-app="poc">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-03T14:20:45.750

Angular 1.2 **RC1**不能很好地与**IE 11**配合使用：路由时存在 CORS 问题。结果是视图未呈现（因为未获取其内容）

如果您怀疑这是问题所在 - 打开控制台 (F12)。你可以在那里看到异常。

这已在 Angular 1.2 **RC3**中解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T17:26:35.433

HTML5 元素需要一个 shim（特别是 section 标签），当你只需要一个时，你有两个 html 标签，你真的应该声明一个 doctype，你还需要在 html 标签中添加 id="ng-app" IE7 工作。

要填充元素，请为每个元素创建一个带有`document.createElement();`语句的脚本（文件或只是一个标签） - 在您的情况下`document.createElement('section')`。

那应该让你正确。

# jenkins - 将 yslow 与 Jenkins 和 phantomjs 一起使用

> ID：12935290
> 
> 赞同：0
> 
> 时间：2012-10-17T13:21:15.417
> 
> 标签：jenkins, phantomjs, yslow

我正在尝试使用 phantomjs 和 jenkins 访问 yslow。 [https://github.com/marcelduran/yslow/wiki/PhantomJS](https://github.com/marcelduran/yslow/wiki/PhantomJS)

我在这样做时提到了这个网址。

在那我可以看到一些带有 TAP 插件的詹金斯的截图，但我不知道如何在这样的 UI 中获得结果。

当我从命令提示符执行以下命令“phantomjs /tmp/yslow.js -i Grade -threshold“B”-f junit [http://in.news.yahoo.com](http://in.news.yahoo.com) > yslow.xml”时，它显示格式控制台中的文本，我正在生成 yslow.xml 文件。

当我在命令提示符下执行此命令“phantomjs /tmp/yslow.js -i Grade -threshold”B”-f Tap“some url”> yslow.tap”时，我正在生成 yslow.tap 文件。

你能解释一下如何从前端的詹金斯那里得到这样的结果吗？这个问题可能很愚蠢。但请回答这个问题。我是这个环境的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:00:43.107

它在 Jenkins [TAP 插件](https://wiki.jenkins-ci.org/display/JENKINS/TAP+Plugin)wiki 页面中有描述：

1.  从 Jenkins 插件管理器安装 Jenkins TAP 插件。
2.  选中发布 TAP 并为您的测试结果配置模式的选项。
3.  执行构建并分析结果。

# ruby-on-rails-3.1 - 生成 10 个 UUID 记录并将其保存在 rails 数据库中

> ID：12935296
> 
> 赞同：0
> 
> 时间：2012-10-17T13:21:29.950
> 
> 标签：ruby-on-rails-3.1

我需要创建一定数量的 UUId 记录（基于下拉列表的选择）并将它们保存在数据库中。现在我只生成一个唯一的 id。可以通过这种方式在模型中完成吗？还是我需要为此编写一个帮助文件？

```
def generate_unique_token=(value)
  self.secret = Base64.encode64(UUIDTools::UUID.random_create)[0..8]
end 
```

我的控制器：

```
def create
  @secretcode = Secretcode.new(params[:secretcode])
  @user = User.new(params[:user])
  @secretcode.user_id = @user
  @secretcode.generate_unique_token = params[:secretcode][:secret]

  if @secretcode.valid?
    @secretcode.save
    redirect_to secretcodes_path
  else
    render 'new'
  end
end 
```

我的查看页面

```
<%= form_for(@secretcode) do |f| %>
  <%= f.select(:secret, options_for_select([['1',1], ['10',10], ['20',20],['50',50]['100',100]])) %>
  <%= render 'layouts/error' %>
  <%=f.label :secret%>
  <%= f.hidden_field :user %>
  <%=f.submit :generate %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:58:19.367

是的，应该这样做:)

助手应该有返回数据的方法，这些数据只能在视图中使用（html 内容等）。在这里，您正在生成一个令牌，该令牌将保存在模型的该字段中。你应该保持原样

# jquery - JQuery隐藏特定表中的列

> ID：12935298
> 
> 赞同：2
> 
> 时间：2012-10-17T13:21:33.223
> 
> 标签：jquery, asp.net, html-table

我阅读了一篇关于如何使用 JQuery 隐藏列的文章。这让我使用下面的代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#<%= btnHideColumn.ClientID %>').click(function () {
            $('td:nth-child(1)').hide();
        });
    });
</script> 
```

虽然这行得通，但我最终会在这个 AJAX Accordion Pane 下有两个表。如何定位某个表并根据需要隐藏该列？

我的表是在后面的代码中生成的。所以不确定哪些属性需要事先填写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:29:12.377

您还应该在单元格选择器中指定表格，例如：

```
$('table:eq(0) td:nth-child(1)').hide(); // table:eq(0) selects first table 
```

或者

```
$('table#list td:nth-child(1)').hide(); // table#list selects table with id="list" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:31:06.367

这里有2个场景：

1.  如果您希望在 2 个表上具有完全相同的行为，则为它们提供相同的类，然后`this`在 click 函数中使用该词：

    ```
    <table class="data">....

    <script type="text/javascript">
    $(document).ready(function () {
        $('.data').click(function () {
            $(this).find('td:nth-child(1)').hide();
        });
    }); 
    ```

2.  如果您需要不同的行为，请给每个人一个不同的 id 并为每个人绑定一个不同的点击事件。

# virtualization - 应用显示虚拟化

> ID：12935308
> 
> 赞同：0
> 
> 时间：2012-10-17T13:21:44.787
> 
> 标签：virtualization

我正在寻找一种支持远程显示托管在 Windows 服务器上的单个应用程序的技术。据我所知，大多数虚拟化解决方案（来自 VMWare、Citrix 等）仅支持整个桌面的远程显示（即会话虚拟化）。这种配置有什么解决方案吗？我希望能够在服务器上托管 Windows 应用程序的多个实例，并允许多个用户同时访问其特定实例的显示，而无需运行多个虚拟化操作系统的开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:20:38.123

应用程序显示虚拟化是一个广义的术语，描述可以使应用程序具有可移植性、兼容性和可管理性，允许多个应用程序在同一系统上运行的软件。本质上没有安装虚拟化应用程序，但它执行起来就像是一样。许多虚拟化显示应用程序仅适用于整个桌面。这在许多情况下很有用。但是，在某些情况下，您作为系统操作员可能只想允许外部用户访问某些应用程序。如果您的目标是在服务器上托管 Windows 应用程序的多个实例并允许多个用户同时访问其特定实例的显示，而无需运行多个虚拟化操作系统的开销，那么您可以使用一些选项。最简单的方法之一是创建服务器集群。

当您希望通过运行相同的代码或协同工作以提供单一服务的不同代码来运行同一应用程序的多个实例时，集群是理想的选择。在任何一种情况下，每个客户端都只能看到应用程序的一个部分。您可以选择克隆或分区应用程序并创建多个实例。有些程序可以为您自动执行此操作。例如 Solarwinds 的 SAM（服务器和应用程序监视器）和戴尔服务器监控。这些解决方案往往很昂贵，但对于需要能够动态创建这些实例的大型公司来说，这可能是一个很大的好处。

戴尔：[http ://www1.euro.dell.com/content/topics/global.aspx/sitelets/solutions/management/server_monitor?c=eu&l=en](http://www1.euro.dell.com/content/topics/global.aspx/sitelets/solutions/management/server_monitor?c=eu&l=en)

山姆： http: [//www.solarwinds.com/server-application-monitor.aspx](http://www.solarwinds.com/server-application-monitor.aspx)

# tsql - 反透视 T-sql 查询

> ID：12935311
> 
> 赞同：0
> 
> 时间：2012-10-17T13:21:53.053
> 
> 标签：tsql, pivot, unpivot

以下是我的查询结果

```
Year_Month.........cat1_per......cat2_per........cat3_per......cat4_per
2004_06...............0.892..........0.778............0.467..........0.871
2005_10...............0.790..........0.629............0.581..........0.978 
```

但我希望我的查询输出为

```
Category...........2004_06..............2005_10
cat1_per.............0.892..................0.790
cat2_per.............0.778..................0.629
cat3_per.............0.467..................0.581
cat4_per.............0.871..................0.978 
```

最好的方法是什么？任何帮助表示赞赏。我尝试了 Unpivot，但无法获得所需的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:27:46.117

您没有指定 RDBMS，但由于您将其标记为[tsql](/questions/tagged/tsql "显示标记为“tsql”的问题")，我猜是 sql-server。这实际上是一个`UNPIVOT`，然后是一个`PIVOT`。如果您知道需要转换的值，则可以通过静态版本对它们进行硬编码：

```
select *
from
(
  select year_month, value, category
  from table1
  unpivot
  (
    value
    for category in (cat1_per, cat2_per, cat3_per, cat4_per)
  ) un
) x
pivot
(
  max(value)
  for year_month in ([2004_06], [2005_10])
)p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c93d6/8)

如果您有未知数量的值要转换，那么您可以使用动态 sql 数据透视表：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('Table1') and
               C.name like 'cat%per'
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(t.year_month)
                    from Table1 t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select year_month, value, category
        from table1
        unpivot
        (
          value
          for category in ('+ @colsunpivot +')
        ) un
      ) x
      pivot
      (
        max(value)
        for year_month in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c93d6/9)

两者都会产生相同的结果：

```
| CATEGORY | 2004_06 | 2005_10 |
--------------------------------
| cat1_per |   0.892 |    0.79 |
| cat2_per |   0.778 |   0.629 |
| cat3_per |   0.467 |   0.581 |
| cat4_per |   0.871 |   0.978 | 
```

如果由于某种原因，您没有`UNPIVOT`and`PIVOT`函数，那么您可以使用`UNION ALL`to unpivot 的组合，然后使用`CASE`语句和聚合函数来复制它：

```
select category,
  max(case when year_month = '2004_06' then value end) [2004_06],
  max(case when year_month = '2005_10' then value end) [2005_10]
from
(
  select year_month, cat1_per value, 'cat1_per' category
  from table1
  union all
  select year_month, cat2_per value, 'cat2_per' category
  from table1
  union all
  select year_month, cat3_per value, 'cat3_per' category
  from table1
  union all
  select year_month, cat4_per value, 'cat4_per' category
  from table1
) un
group by category 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/de708/3)

# ios - Xamarin 无法编译为本机代码

> ID：12935313
> 
> 赞同：4
> 
> 时间：2012-10-17T13:21:56.920
> 
> 标签：ios, xamarin.ios, ios-simulator, xamarin, good-dynamics

我正在尝试在 Xamarin 中使用 Good Dynamics SDK，我不太了解 Objective-C，所以我在这里有点迷失。这是一个概念验证的尝试，我不确定这是否真的可行。

我已将 GD 文件添加为 GD.framework 目录中的 GD.a 并尝试实现 API 绑定并复制示例 XCode 项目中的应用程序启动逻辑。

即使 Mono Develop 以红色显示 ApiDefinition 中的所有内容，我还是设法构建了它。

构建时这是错误日志的一部分 [完整版本在这里](http://pastebin.com/ZdZ0DBsr)

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc  -Wl,-no_pie -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=6.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk  /var/folders/1t/cbdvyj0x4n35m7674l7wvyjc0000gn/T/tmp6df5493a.tmp/main.x86.o -o /var/folders/1t/cbdvyj0x4n35m7674l7wvyjc0000gn/T/tmp6df5493a.tmp/GDTest -framework CFNetwork -framework Foundation -framework GameKit -framework MapKit -framework MediaPlayer -framework MessageUI -framework OpenGLES -framework StoreKit -framework UIKit -framework AddressBookUI -framework SystemConfiguration -framework AddressBook -framework AudioToolbox -framework AVFoundation -framework QuartzCore -framework CoreGraphics -framework CoreLocation -framework MobileCoreServices -framework Security -framework CoreData -framework ExternalAccessory -weak_framework AssetsLibrary -weak_framework Accounts -weak_framework CoreBluetooth -weak_framework CoreTelephony -weak_framework EventKit -weak_framework EventKitUI -weak_framework CoreMotion -weak_framework GLKit -weak_framework iAd -weak_framework NewsstandKit -weak_framework Social -weak_framework Twitter -weak_framework PassKit -weak_framework CoreImage -weak_framework CoreText -weak_framework ImageIO -weak_framework CoreMedia -weak_framework CoreMIDI -weak_framework CoreVideo -weak_framework AdSupport -weak_framework QuickLook -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -liconv -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -u _catch_exception_raise  -force_load /var/folders/1t/cbdvyj0x4n35m7674l7wvyjc0000gn/T/tmp6df5493a.tmp/GD.a
    Undefined symbols for architecture i386:
      "std::basic_istream<char, std::char_traits<char> >::gcount() const", referenced from:
          GT::AES::decode(std::basic_istream<char, std::char_traits<char> >&, std::basic_ostream<char, std::char_traits<char> >&, unsigned int&, bool)in GD.a(gtaes.o)
          GT::AES::encode(std::basic_istream<char, std::char_traits<char> >&, std::basic_ostream<char, std::char_traits<char> >&, unsigned int&, bool)in GD.a(gtaes.o)
      "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::find_first_of(char const*, unsigned long, unsigned long) const", referenced from:
          -[GDSetPasswordViewController checkPasswordStrength:] in GD.a(GDSetPasswordViewController.o)
          GD::EacpCReq::EacpCReq(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, GT::Dbb&)in GD.a(GDEacpCommands.o)
          GD::RawSocket::connect()    in GD.a(GDRawSocket.o)
      "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::copy(char*, unsigned long, unsigned long) const", referenced from:
          GD::Socket::toString() constin GD.a(GDSocket.o)
      "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::data() const", referenced from:
          -[GTContainerDH setRemotePublic521:] in GD.a(GTContainerCrypto.o)
          -[GTContainerDH initWithP521] in GD.a(GTContainerCrypto.o)
          -[NSData(GTContainerEncryption) GTEncryptedDataUsingDerivedKey:] in GD.a(GTContainerCrypto.o)
          -[NSData(GTContainerEncryption) GTDecryptedDataUsingDerivedKey:] in GD.a(GTContainerCrypto.o)
          -[GTEncryptedFile streamDidReceiveData:] in GD.a(GTEncryptedFile.o)
          +[NSData(Base64) dataFromBase64String:] in GD.a(NSData+Base64.o)
          +[GTJsonCommandProcessor parseNSData:] in GD.a(GTICCJsonCommandProcessor.o)
          ... 
```

这持续了很长时间，并以错误结束

```
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status

error MT5202: Native linking failed. Please review the build log. 
```

现在我有点卡住了。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:00:45.310

该`ld`消息告诉您`.a`静态库文件不包含 i386 的代码。该架构是允许您在 iOS 模拟器上运行代码所必需的。

也许GD包为`.a`不同的架构提供了不同的。在这种情况下，您可以使用该`lipo`工具构建一个包含多个架构的**胖库。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T14:25:20.783

我需要将 -cxx 添加到 iPhone 构建选项中的“其他 mtouch 参数”中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T21:20:53.320

这是一个老问题，但经过数小时后，我们在此处详细编写了将 Good Dynamics 与 Xamarin.iOS 结合使用的完整解决方案……需要大约 5 种不同的解决方法。

[http://blog.westmonroepartners.com/using-good-dynamics-sdk-v1-8-x-with-xamarin-ios/](http://blog.westmonroepartners.com/using-good-dynamics-sdk-v1-8-x-with-xamarin-ios/)

# c# - windows mobile phone 6中按下电源键时如何检测和防止屏幕锁定？

> ID：12935320
> 
> 赞同：0
> 
> 时间：2012-10-17T13:22:18.830
> 
> 标签：c#, windows-mobile, windows-mobile-6

在我的 windows mobile phone 6 应用程序中，我想检测电源按钮按下事件并防止它锁定我的手机屏幕。windows mobile phone 6可以吗？有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:52:29.203

捕获电源按钮可能无法满足您的需要。虽然有一个带有 VK_OFF 的键盘消息，但它大多不暴露给应用程序。您可以尝试使用键盘挂钩（请参阅我的网站）来捕获 VK_OFF，但我担心您将无法捕获 VK_OFF。大多数情况下，电源按钮是硬链接到主板和/或特殊 DLL 的东西。

当您说要保留电源按钮以锁定手机时，可能还有另一种解决方案，如果调用应用程序或操作系统使用 VK_LOCK。

如果您可以发布设备注册表和文件系统的快照（通过 SK Tools 查找 SSNAP），则提供建议会更容易。

问候

约瑟夫

# cairo - 为什么在将一个来源绘制到另一个来源时，我会得到错误的颜色

> ID：12935322
> 
> 赞同：1
> 
> 时间：2012-10-17T13:22:32.417
> 
> 标签：cairo, pycairo

当我尝试以下操作时，我希望这两个图像是相同的，但它们不是！
我是这个开罗的新手，这让我发疯。

```
#!/usr/bin/env python

import cairo

WIDTH, HEIGHT = 256, 256

pat = cairo.LinearGradient (0.0, 0.0,  0.0, 1.0)
pat.add_color_stop_rgb (1,    1,   0,  0) # First stop
pat.add_color_stop_rgb (0.5,  0,   1,  0) # Mid stop
pat.add_color_stop_rgb (0,    0,   0,  1) # Last stop

# A surface

surface0 = cairo.ImageSurface (cairo.FORMAT_RGB24, WIDTH, HEIGHT)
ctx0 = cairo.Context (surface0)
ctx0.scale (WIDTH, HEIGHT)

ctx0.set_source(pat)
ctx0.paint()

# My second surface

surface1 = cairo.ImageSurface (cairo.FORMAT_RGB24, WIDTH, HEIGHT)
ctx1 = cairo.Context (surface1)
ctx1.scale (WIDTH, HEIGHT) 

ctx1.set_source_surface(surface0, 0, 0)
ctx1.set_operator (cairo.OPERATOR_SOURCE)
ctx1.paint()

surface0.write_to_png("example0.png")
surface1.write_to_png("example1.png") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:54:15.680

您正在尝试做的事情：

*   创建一个名为`pat`
*   `surface0`以一定比例绘制该图案
*   复制`surface0`到`surface1`

正确的？

在这种情况下，您应该删除 call `ctx1.scale (WIDTH, HEIGHT)`。因此，您只会将第一个表面的左上角像素（？）绘制到第二个表面。

# java - jvm verbosegc 日志文件问题

> ID：12935329
> 
> 赞同：2
> 
> 时间：2012-10-17T13:22:49.057
> 
> 标签：java, glassfish, jvm, jvm-hotspot, verbosegc

我们在 linux 服务器上有一个 Glassfish 服务器，它开启了 verbose:gc，输出在 gc.log 文件中。

我们使用 flag `-XX:+PrintGCDetails`。生成的文件包含这样的行：

```
14.796: [GC [PSYoungGen: 432125K->45845K(454336K)] 537435K->153491K(624832K), 0.0304470 secs] [Times: user=0.12 sys=0.01, real=0.02 secs]
15.337: [GC [PSYoungGen: 269819K->25031K(464768K)] 377465K->154113K(635264K), 0.0361400 secs] [Times: user=0.10 sys=0.01, real=0.03 secs]
15.373: [Full GC (System) [PSYoungGen: 25031K->0K(464768K)] [PSOldGen: 129081K->123718K(170496K)] 154113K->123718K(635264K) [PSPermGen: 92038K->92038K(184384K)], 0.3855460 secs] 
```

如您所见，最后一行不包含该`[Times: ...]`部分。GC 事件行并没有完全写入日志文件，因为当下一次 GC 事件发生时，`[Times: ...]`前一行的一部分被写入，然后另一部分行被写入，给我们这样的东西：

```
14.796: [GC [PSYoungGen: 432125K->45845K(454336K)] 537435K->153491K(624832K), 0.0304470 secs] [Times: user=0.12 sys=0.01, real=0.02 secs]
15.337: [GC [PSYoungGen: 269819K->25031K(464768K)] 377465K->154113K(635264K), 0.0361400 secs] [Times: user=0.10 sys=0.01, real=0.03 secs]
15.373: [Full GC (System) [PSYoungGen: 25031K->0K(464768K)] [PSOldGen: 129081K->123718K(170496K)] 154113K->123718K(635264K) [PSPermGen: 92038K->92038K(184384K)], 0.3855460 secs] [Times: user=0.38 sys=0.01, real=0.39 secs]
3617.352: [GC [PSYoungGen: 431872K->8052K(439936K)] 585800K->161981K(718144K), 0.0085710 secs] 
```

由于该行未完成，因此不存在回车符，因此该行不会显示在诸如之类的工具中`multitail`

使用`-XX:+PrintGC`标志，我们不再有这个问题。但由于我们需要完整的细节，这不是一个好的解决方案。

JVM 版本，在 linux 上运行：

```
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode) 
```

所以问题是：是否可以强制 JVM 写入日志行（一种刷新技巧）？或者是否可以在没有最后一部分的情况下获得 GC 详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:01:07.543

检查 OpenJDK 6/7 源似乎`-XX:+PrintGCDetails`没有刷新

```
TraceCPUTime::~TraceCPUTime() {
  if (_active) {
    bool valid = false;
    if (!_error) {
      double real_secs;                 // walk clock time
      double system_secs;               // system time
      double user_secs;                 // user time for all threads

      double real_time, user_time, system_time;
      valid = os::getTimesSecs(&real_time, &user_time, &system_time);
      if (valid) {

        user_secs = user_time - _starting_user_time;
        system_secs = system_time - _starting_system_time;
        real_secs = real_time - _starting_real_time;

        _logfile->print(" [Times: user=%3.2f sys=%3.2f, real=%3.2f secs] ",
          user_secs, system_secs, real_secs);

      } else {
        _logfile->print("[Invalid result in TraceCPUTime]");
      }
    } else {
      _logfile->print("[Error in TraceCPUTime]");
    }
     if (_print_cr) {
      _logfile->print_cr("");
    }
  }
} 
```

由于这个[错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8004170)，它在 OpenJDK 8 中得到了修复。

```
TraceCPUTime::~TraceCPUTime() {
  if (_active) {
    bool valid = false;
    if (!_error) {
      double real_secs;                 // walk clock time
      double system_secs;               // system time
      double user_secs;                 // user time for all threads

      double real_time, user_time, system_time;
      valid = os::getTimesSecs(&real_time, &user_time, &system_time);
      if (valid) {

        user_secs = user_time - _starting_user_time;
        system_secs = system_time - _starting_system_time;
        real_secs = real_time - _starting_real_time;

        _logfile->print(" [Times: user=%3.2f sys=%3.2f, real=%3.2f secs] ",
           user_secs, system_secs, real_secs);

      } else {
        _logfile->print("[Invalid result in TraceCPUTime]");
      }
    } else {
      _logfile->print("[Error in TraceCPUTime]");
    }
    if (_print_cr) {
      _logfile->print_cr("");
    }
    _logfile->flush();
  }
} 
```

如果有人针对 6/7 提交它，它可能会被反向移植。

# javascript - 如何在 jStorage 中保存复选框状态

> ID：12935330
> 
> 赞同：0
> 
> 时间：2012-10-17T13:22:50.727
> 
> 标签：javascript, jquery, html, checkbox, jstorage

我之前问过一个类似的问题，我问我是否可以在 localStorage 中保存一个复选框，但我最近才发现 jQuery 的一部分称为 jStorage - 并且想知道我是否可以使用它来保存我创建的一对复选框在我的网络应用程序中？

HTML 代码如下（用于复选框）；

```
<li style = 'color: #FFFFFF;'>Notifications<span class = 'toggle'><input type = 'checkbox' class = 'toggle' name = 'notifications' id = 'notifications' /></span></li>
<li style = 'color: #FFFFFF;'>Preview<span class = 'toggle'><input type = 'checkbox' class = 'toggle' name = 'preview' id = 'preview' checked = "true" /></span></li> 
```

而且我还没有用于保存这些复选框状态的 JavaScript 代码 - 但是在我的 .js 文件中，我有两个函数 - *saveSettings*和*loadSettings*。如果有办法保存复选框的状态，然后在用户重新访问网络应用程序时重新加载到页面上，那么请告诉我，但如果需要我也可以创建一个新功能，请告诉我哪个选项你在告诉我:)

**编辑**

我的 saveSettings 函数（到目前为止）是这样编码的；

```
 function saveSettings(){ 

localStorage.name = $('#name').val();   
localStorage.email = $('#email').val(); 
localStorage.telephone = $('#telephone').val(); 

localStorage.other = $('#other').val(); 

jQT.goBack(); 

return false;  

 } 
```

我的 loadSettings 函数就是这样编码的；

```
 function loadSettings() {

$('#name').val(localStorage.name);
$('#email').val(localStorage.email);
$('#telephone').val(localStorage.telephone);

$('#other').val(localStorage.other);

 } 
```

**编辑结束**

非常感谢 - 任何帮助都非常感谢xxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:31:35.850

在您的 saveSettings 函数中，添加：

```
$.jStorage.set("notifications",$('#notifications').attr('checked'));
$.jStorage.set("preview",$('#preview').attr('checked')); 
```

在您的 loadSettings 函数中，添加：

```
 $.jStorage.get("notifications")?$('#notifications').attr('checked',$.jStorage.get("notifications")):false;
    $.jStorage.get("preview")?$('#preview').attr('checked',$.jStorage.get("preview")):true; 
```

由于我没有您的 loadSettings () 和 saveSettings() 代码功能，我无法为您提供更多帮助。

请不要插件规范：

> > > jStorage 利用可用的 HTML5 本地存储和 Internet Explorer 旧版本中的 userData 行为。
> > > 
> > > 如果浏览器不支持数据缓存，则不会引发异常——脚本仍然可以使用 jStorage，但实际上没有存储任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:31:53.140

只是一个更简单的解决方案：

保存

```
$.jsStorage.set('milk', $('.milk').prop('checked')); 
```

检索：

```
$('.milk').prop('checked',$.jsStorage.get('milk')==='true'); 
```

你的复选框是

```
<input type="checkbox" class="milk" name="option1" value="Milk"> 
```

# html - HTML和CSS中图像的最佳实践是什么

> ID：12935331
> 
> 赞同：0
> 
> 时间：2012-10-17T13:22:52.057
> 
> 标签：html, css, performance, wordpress, pagespeed

我创建了一个 WordPress 主题，并实现了一个功能，允许将图像嵌入到 HTML 文档和 CSS 文件中。

我的意思是，而不是在我的网站中添加图像：

```
<!-- In HMTL -->
<img src="http://www.some-url.ext/img/my_image.jpg" />

/* In CSS */
selector
{
    background-image: url(http://www.some-url.ext/img/my_image.jpg);
} 
```

以以下形式在我的网站中添加图像：

```
<!-- In HMTL -->
<img src="data:image/gif;base64,R0lG...." />

/* In CSS */
selector
{
    background-image: url(data:image/gif;base64,R0lG....);
} 
```

处理后的图像存储在缓存文件中以获得更好的性能。

我当前的主题还有一个全宽滑块，其中包含很大的图像。

问题是由于嵌入的图像，处理后的文档大小为 1.83MB。

此外，文档加载速度非常快，幻灯片下方的任何内容显示速度都会变慢:(

那么，将图像嵌入到文档中更好还是使用 URL 的常规方式更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:34:24.663

像往常一样，答案是“视情况而定”。以下是一些兴趣点：

*   嵌入图像可以通过减少 HTTP 请求的数量来加快页面速度，因此对于大量小文件，它会有所帮助。
*   以 base 64 编码将使图像的大小增加约 1/3。
*   因为浏览器必须解码图像，它会减慢渲染速度。

有关更详尽的优缺点列表，请参阅[http://en.wikipedia.org/wiki/Data_URI_scheme 。](http://en.wikipedia.org/wiki/Data_URI_scheme)

对于大图像，我会说你最好接受 HTTP 请求。您可以使用各种预加载方案来使 HTTP 命中对用户不那么可见。

PageSpeed、YSlow 等是指导方针，而不是福音。正如您所发现的，您应该始终测试更改并找出对*您的*站点有意义的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:28:35.870

通常，使用 Data URI 仅对小图像有意义（例如多个图标合并到一个精灵中）。大图像应作为单独的文件提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:38:19.007

我想这里隐含的标准是效率。出于缓存的原因，图像通常应该单独提供，因为这样每个图像都可以被缓存。否则只能缓存包含图像数据的整个文档，除非它是一个非常稳定的文档并且图像仅在该文档中使用，否则它会变得相当低效。

查看[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)了解有关缓存的一般信息。通常，任何合理的缓存友好服务器端（通常默认情况下）都会使图像可以很好地缓存，因为它们不会经常更改。

# database - 在组合框中输入值

> ID：12935333
> 
> 赞同：0
> 
> 时间：2012-10-17T13:22:55.723
> 
> 标签：database, forms, ms-access, combobox

我制作了一个组合框，允许我选择值列表，但是每次选择值时都会出现此错误消息：

'该字段太小，无法接受您尝试添加的数据量。尝试插入或粘贴更少的数据'

当我也尝试退出表单时，这会出现。我添加到链接表的数据是：

```
Code: TFS
Short code: FS
Branch: Flooring Shop
Address:
PostCode:
Phone Number: 
```

我用于组合框的编码是：

```
Private Sub branchComboBox_Click()

End Sub 
```

```
Row Source type: Browser FilterBranch
Row Source: Table/Query 
```

在此先感谢多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:57:46.203

这可能是由于您的表单和表格之间的脱节造成的。

也就是说，您的组合框正在尝试放置对于基础表来说太长的数据。如果您尝试添加比表格设计允许的更长的文本字符串，则会发生您看到的错误。

您应该检查您的表格设计并确保 Branch 允许您尝试添加的字符足够多。如果您应该使用代码，并且“Browser FilterBranch”是一个包含代码作为列的查询，请确保您的组合框`Bound Column`分配正确。

# node.js - 为什么我的 socket.io 事件没有在多个浏览器上得到处理？

> ID：12935338
> 
> 赞同：1
> 
> 时间：2012-10-17T13:23:09.440
> 
> 标签：node.js, socket.io

所以我正在写一个小的“共同浏览”演示。主要用于教育目的。

无论如何，计划是这样的。用户打开他们的浏览器到我的服务器并移动他们的鼠标。这样做时，浏览器将鼠标坐标发送到服务器，服务器将坐标转发回订阅频道的任何浏览器。然后坐标将显示在文本框中。

我正在使用`nodejs`和`socket.io`。

这是我的 server.js：

```
var app = require('http').createServer(handler),
    io = require('socket.io').listen(app),
    fs = require('fs');

app.listen(80);

function handler(req, res) {
    var file = __dirname + '/public/index.html';
    fs.readFile(file, 
        function(err, data) {
            if(err) {
                res.writeHead(500);
                return res.end('Error loading index.html');
            }

            res.writeHead(200);
            res.end(data);
        }
    );
}

io.sockets.on('connection', function(socket) {
    socket.on('m', function(data) {
        socket.emit('relay', {msg: 'MouseX: ' + data.x + ' MouseY: ' + data.y});
    });
}); 
```

这是我的客户：

```
<!doctype html>
<html>
    <head>
    </head>
    <body>

        <input id='box' type='text' size='200' />

        <script src='/socket.io/lib/socket.io.js'></script>
        <script>

            var socket = io.connect('http://localhost');
            var b = document.getElementById('box');

            socket.on('relay', function(data) {
                b.setAttribute('value', data.msg);
            });

            document.onmousemove = function(event) {
                event = event || window.event;
                socket.emit('m', {x: event.clientX, y: event.clientY});
            }

        </script>

    </body>
</html> 
```

现在，如果我打开两个浏览器并将它们都指向本地主机，我可以将鼠标移到一个窗口上，顶部的文本框就可以工作了。它显示坐标。但是，其他浏览器不执行任何操作。但是，如果我将鼠标移到另一个浏览器上，它就会在其窗口上显示坐标。就像它只中继到我当前悬停的浏览器一样。服务器控制台显示两个浏览器上的动作。

但是由于两个浏览器窗口都响应`relay`事件（通道），两个浏览器不应该回显坐标吗？这样浏览器 1 的鼠标移动会回显到浏览器 2，当我转到浏览器 2 时，它的坐标会回显到浏览器 1？

希望这是有道理的。

谢谢

** 解决方案 **

感谢 Victor Stanciu 的快速回答。这是我为修复服务器所做的。

```
var app = require('http').createServer(handler),
    io = require('socket.io').listen(app),
    fs = require('fs');

app.listen(80);

function handler(req, res) {
    var file = __dirname + '/public/index.html';
    fs.readFile(file, 
        function(err, data) {
            if(err) {
                res.writeHead(500);
                return res.end('Error loading index.html');
            }

            res.writeHead(200);
            res.end(data);
        }
    );
}

var sockets = [];
io.sockets.on('connection', function(socket) {
    sockets.push(socket);

    socket.on('m', function(data) {
        io.sockets.emit('relay', {msg: 'MouseX: ' + data.x + ' MouseY: ' + data.y});
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T13:28:32.420

那是因为您只向从以下位置接收信号的套接字发出信号：

```
io.sockets.on('connection', function(socket) {
    socket.on('m', function(data) {
        socket.emit('relay', {msg: 'MouseX: ' + data.x + ' MouseY: ' + data.y});
    });
}); 
```

这表示：“当从 'socket' 接收到 'm' 信号时，向它发出 'relay' 信号”。

你需要做的是——当一个新的套接字被连接时，将它添加到一个数组中——当一个套接字发出一个信号时，遍历所有连接的套接字并向它们中的每一个发出“中继”信号

```
var sockets =  [];
io.sockets.on('connection', function(socket) {
    sockets.push(socket);

    socket.on('m', function(data) {
        sockets.forEach(function (socket) {
            socket.emit('relay', {msg: 'MouseX: ' + data.x + ' MouseY: ' + data.y});
        });
    });
}); 
```

或者，而不是手动迭代连接的套接字，socket.io 提供了一种方法来做到这一点：

```
 io.sockets.emit('this', { will: 'be received by everyone'}); 
```

# iphone - 位置固定在 iPhone 中不起作用

> ID：12935345
> 
> 赞同：0
> 
> 时间：2012-10-17T13:23:27.653
> 
> 标签：iphone, css, css-position

我正在为我的网站创建一个 HTML 页面，但不幸的是，顶部导航菜单的固定位置在 iPhone 中不起作用。

谁能帮帮我吗 ？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:32:00.863

Position:fixed was supported as of iOS 5, if you are trying or hoping to make it work on anything older ( iOs4 ) you are out of luck as it was not supported. "iOS4 and below simply treats elements as static and scrolls them along with the rest of the page."

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:40:45.497

我在不久前制作的移动网站上遇到了同样的问题，最终成功了！

也许如果我可以看看你的源代码，看看它是否解决了问题并将它发回这里。:)

# shell - 重定向脚本输出，同时实时显示

> ID：12935347
> 
> 赞同：0
> 
> 时间：2012-10-17T13:23:29.390
> 
> 标签：shell, unix, stdout, tee

关于显示多个脚本的输出并同时将它们的 stout/stderr 写入日志文件，我有一个可能很简单（甚至可能已经回答）的问题：

我有一个脚本“my_script.sh”，它本身调用另一个这样的脚本：

```
./my_to_be_logged_script.sh 2>&1 | tee -a "$LOGFILE" 
```

my_to_be_logged_script.sh 在其他操作中调用 Python 脚本和另一个 shell 脚本，如下所示：

```
./my_to_be_logged_shell_subscript.sh
python "my_to_be_logged_py_subscript.py" 
```

首先，所有内容都正确记录到 LOGFILE。

shell 脚本输出是实时显示的，但控制台仅在 Python 脚本完成后才会显示 Python 脚本的输出。有没有办法实时显示 Python 输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:22:04.997

尝试 python -u "my_to_be_logged_py_subscript.py"

# android - Android自定义Galary View不滚动

> ID：12935348
> 
> 赞同：0
> 
> 时间：2012-10-17T13:23:29.497
> 
> 标签：android

我在 android 中使用自定义 Galary 视图。每行包含一个带有 Image 的 TextView。当我想滚动 Galary 列表时，就会出现问题。

如果我触摸文本部分，那么我可以成功滚动列表。但是当我尝试滚动触摸 ImageView 时，它不受支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:57:07.897

尝试在画廊视图上实现 ONCLickListener() 它将在两个触摸事件上滚动。

# android - 将签名放在布局中？

> ID：12935351
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:23:35.127
> 
> 标签：android

我正在做一个签名项目..我想做的是从用户那里得到一个签名，然后把它放在一个包含他的名字、地址和电话号码的视图中，在底部我必须添加签名......所以我已经使用位图和画布完成了签名部分。现在我想要做的是将它添加到这个视图中并将它一起保存为图像文件......所以我应该创建一个布局并将签名放入其中还是我应该制作另一个位图并将名称、添加、编号和签名整合在一起......？这是我到目前为止所做的......它工作正常并且完美地保存了一个签名......问题是如何和什么我下一步要做什么？？？

```
enter code here

/**
 * Constructor used for initializing variable
 * @param c
 *          = Context of the application
 * @param attrs
 *          = AttributeSet of XML tags for signatureView
 */
public Signature(Context c,AttributeSet attrs)
{

    super(c,attrs);
    ctx=c;
    initialize();

  //  tv1.setText((CharSequence) tv);

}

private void initialize()
{
    mBitmap = Bitmap.createBitmap(BITMAP_WIDTH,BITMAP_HEIGHT, Bitmap.Config.ARGB_8888);// i have used 480X800 resolution
    mCanvas = new Canvas(mBitmap);
    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    mPaint = new Paint();
    setpaint(Color.BLACK);
    mPaint.setColor(Color.BLACK);
    mPaint.setShadowLayer(10,color.darker_gray, 20, 20);
    mPaint.setTextSize(15);
    mPaint.setFlags(Paint.ANTI_ALIAS_FLAG);             
    mCanvas.drawBitmap(mBitmap, 0, 0, null);
}

/**
 * This method sets the required parameters for paint object to be used.
 * This method also sets drawing cache for SignatureView.
 * This method is private for class and only called by constructor.
 * @param color
 *          = It takes the Color as an argument in integer form which is
 *            used while drawing.
 */
private void setpaint(int color)
{
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(color);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);
    mPaint.setAlpha(255);
    mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));
    this.setDrawingCacheEnabled(true);
    this.setDrawingCacheBackgroundColor(Color.TRANSPARENT);
    this.setDrawingCacheQuality(DRAWING_CACHE_QUALITY_HIGH);
}

/**
 * This method clears canvas by reinitializing bitmap and canvas.
 */
public void clearCanvas()
{
    //mBitmap = Bitmap.createBitmap(BITMAP_WIDTH,BITMAP_HEIGHT, Bitmap.Config.ARGB_8888);
    //mCanvas=new Canvas(mBitmap);
    initialize();
    invalidate();
}

/**
 * This method enables saving drawing made on SignatureView.
 * @param file
 *          = This method takes a file object as parameter which is initialized 
 *            with the path and filename to be saved.
 * @return
 *      = It returns a boolean value whether file is saved successfully or not.
 */
public boolean sign(File file)
{   
    sign=this.getDrawingCache();
            ImageView iv = (ImageView) findViewById(R.id.Ivsignature);      
    try{
    iv.setImageBitmap(sign);
    }catch(Exception e)
    {

    }

    String filename = file.getAbsolutePath ();
    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream (file);
        sign.compress (CompressFormat.JPEG, 100, fos);
//      Toast.makeText(ctx, filename+"  saved", Toast.LENGTH_LONG).show();
        return true;
    } catch (Throwable ex) {
        Toast.makeText(ctx, "error: "+ex.getMessage(), Toast.LENGTH_LONG).show();
        return false;
    }

}

/* (non-Javadoc)
 * @see android.view.View#onSizeChanged(int, int, int, int)
 */
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) 
{
    super.onSizeChanged(w, h, oldw, oldh);
}

/* (non-Javadoc)
 * @see android.view.View#onDraw(android.graphics.Canvas)
 */
@Override
protected void onDraw(Canvas canvas) 
{
    canvas.drawColor(Color.TRANSPARENT);
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    canvas.drawPath(mPath, mPaint);
}

/**
 * This method is called in onTouchEvent on ACTION_DOWN event
 * this method resets path to draw on canvas and reinitializes 
 * with new coordinates. 
 * @param x
 *      =  x coordinate of ACTION_DOWN event
 * @param y
 *      = y coordinate of ACTION_DOWN event
 */
private void touch_start(float x, float y) 
{
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

/**
 * This method is called in onTouchEvent on ACTION_MOVE event
 * this method adds coordinates to path for drawing on canvas. 
 * @param x
 *      = x coordinate of while ACTION_MOVE event
 * @param y
 *      = y coordinate of while ACTION_MOVE event
 */
private void touch_move(float x, float y) 
{
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
        mX = x;
        mY = y;
    }
}

/**
 * This method is called in onTouchEvent on ACTION_UP event
 * this method draws path on canvas and resets path. 
 */
private void touch_up() 
{
    mPath.lineTo(mX, mY);
    mCanvas.drawPath(mPath, mPaint);
    mPath.reset();
}

/* (non-Javadoc)
 * @see android.view.View#onTouchEvent(android.view.MotionEvent)
 */
@Override
public boolean onTouchEvent(MotionEvent event) 
{
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            mCanvas.drawPoint(x, y, mPaint);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();
            break;
    }

    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:42:38.330

使用并在其中显示您保存的[`ImageView`](http://developer.android.com/reference/android/widget/ImageView.html)签名文件。在布局中包含后，您可以使用以下代码将布局的内容保存为：`ImageView`[`setImageBitmap`](http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap%28android.graphics.Bitmap%29)`ImageView``Bitmap`

```
LinearLayout layout = (LinearLayout)findViewById(R.id.myLayout);
layout.setDrawingCacheEnabled(true);
layout.buildDrawingCache();
Bitmap bitmap = layout.getDrawingCache(); 
```

# java - JTable 比较复杂

> ID：12935353
> 
> 赞同：1
> 
> 时间：2012-10-17T13:23:43.297
> 
> 标签：java, swing, calendar, jtable

我想知道是否可以使数据库列在 JTable 中显示为行。

从图形上看，这就是我的意思，它是一个时间表：

数据库

```
+--------------------+----------+------ -------------+----------+
|星期一(8.30 -10.30) | 星期一(10.30-12.30) | 周二(8.30-10.30) | 周二(10.30-12.30) |
|------------------------------------------------- --------------------------------------------------|
|可用 | 可用 | 不可用 | 可用 |
+--------------------+----------+------ -------------+----------+

```

表

```
+--------------------+------------------------+
|可用 | 不可用 |
|--------------------|------------|
|星期一(8.30-10.30) | 周二(8.30 - 10.30)|
|--------------------|------------|
|星期一(10.30-12.30) | |
|--------------------|------------|
|星期二(10.30-12.30)| |
+--------------------+------------------------+

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:42:40.250

可能——是的。容易——可能不会。

您将基本上进行`select * from [table]`查询并遍历结果。你会想看看这些：

*   [结果集](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)
*   [结果集.getMetaData()](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getMetaData%28%29)
*   [结果集元数据](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html)

（我假设您了解有关查询数据库的基础知识）

因此，当您将信息添加到表中时，请使用：

```
 JTable table = new JTable();
    DefaultTableModel model = (DefaultTableModel)table.getModel();
    ResultSet rs; // actually have your result set here
    ResultSetMetaData meta = rs.getMetaData();
    while(rs.next()){
        Object[] info = new Object[meta.getColumnCount()];
        for(int i = 0; i < meta.getColumnCount(); i++){
            info[i] = rs.getObject(i);
        }
        model.addColumn("Result" + rs.getRow(), info);
    }
    add(table); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:02:59.507

*   将所有列名放在 List<String> 中。

*   使用 List 构造您的 SQL 查询。

    从表中选择（来自 List<String> 的逗号分隔字符串）...

*   遍历 Available / Unavailable `ResultSet`，并将 List<String> 中的相应列名作为可用或不可用放入您的表模型中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:46:45.160

做起来并不简单。您想要（假设我理解得很好）议程，以天为列，以小时为行？

我认为更好的方法是根据需要多次扩展 AbstractTableModel（例如 DayTableModel、WeekTableModel ......）这是一个很好的例子：[http ://www.java2s.com/Code/JavaAPI/javax.swing.table /extendsAbstractTableModelCustomclasstype.htm](http://www.java2s.com/Code/JavaAPI/javax.swing.table/extendsAbstractTableModelCustomclasstype.htm)

我希望我对你有所帮助。

编辑：不明白。无论如何，我想最好的方法是扩展 AbstractTableModel （但只有一次）。

# gwt - GWT：我将 jScrollPane 与 jquery 一起使用，它会弄乱我的 ClickHandlers 吗？

> ID：12935354
> 
> 赞同：0
> 
> 时间：2012-10-17T13:23:52.417
> 
> 标签：gwt, jscrollpane, jquery-jscrollpane, gwtquery, gquery

我实现了 JScrollPane 以便在我的页面内看起来更清晰。

```
function scrollPane() {
$(".gwt-content").jScrollPane();
} 
```

添加了一个自定义小部件：

$(".jspPane").append($(new Content());

## 作品

```
$(html).click(new Function() {
public boolean f(Event e) {
System.out.println("yo");
return true;
}
}); 
```

## 没有

```
html.addClickHandler(new ClickHandler() {

@Override
public void onClick(ClickEvent event) {
System.out.println("yo1");
}
}); 
```

html 是一个 HTML 小部件，其中包含一些文本和另一个 HTML 小部件。

真正的问题是：我想在 jspPane 中添加一个 CellTable，但是 ClickableTextCell 中的监听器被删除了。我不知道我是否可以实现一个 CellTable 并使用 GWTQuery 添加一个 ClickListener。

好吧，如果您需要更多信息或来源告诉我，我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:50:36.117

为了让 JScrollPane 可以包含一个小部件，您必须将它提升为一个 gwt 面板，因为它是由 jquery 创建的。

Gwt 是严格的，因为您必须具有一致的小部件层次结构。

Gquery 操作 dom，并且使用它添加的小部件的元素被视为元素并且不会插入到小部件树中，除非您使用 gwtquery 中存在的特定方法来执行此操作。

您可以使用任何一种方式解决您的问题：

*Gquery*：这只适用于最后一个快照

```
Widget myContent = new Content();
Panel jsPane = $(".jspPane").as(Widgets.Widgets).panel().widget();
jsPane.add(myContent); 
```

*Gwt*：在这里你必须为你的 jsPane 设置一个 id

```
Widget myContent = new Content();
Panel jsPane = RootPanel.get("jsPaneId");
jsPane.add(myContent); 
```

# c - 交叉编译 GStreamer，Farstream for ARM11

> ID：12935355
> 
> 赞同：1
> 
> 时间：2012-10-17T13:24:02.033
> 
> 标签：c, arm, cross-compiling, gstreamer

我正在寻找一种交叉编译 GStreamer、Farstream 和使用这些库的小示例的方法。我需要知道几件事：

*   为 ARM11 交叉编译这些库的最佳方法是什么？我一直在谷歌中搜索一些信息，解决方案与安装 arm 编译器（这已经很明显）然后玩了有关`./configure`，但我不确定究竟应该作为参数传递什么。
*   编译库后，如何*将它们安装*到 ARM11 设备中？`./configure <options for arm11>`我的意思是，跑步后的下一步是什么`make`？
*   如何将示例与我为 ARM11 设备编译的库而不是系统中安装的库链接？

问候

编辑

抱歉没说。我正在使用 Arch Linux x64，目标设备也在运行 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:23:38.940

我建议你使用scratchbox2。该项目本身针对的是交叉编译情况，例如您所要求的特别涉及./configure。

# javascript - 使用jQuery按顺序交换图像

> ID：12935357
> 
> 赞同：0
> 
> 时间：2012-10-17T13:24:11.227
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 以设置顺序交换元素的背景图像以创建动画，其中每个图像都是不同的帧，它应该遍历帧，直到到达最后一帧，然后再次返回开始。

我的代码如下：

```
$spinner_currentFrame = 1;

            function UpdateSpinner(target, numFrames)
            {
                $spinner_currentFrame = ($spinner_currentFrame) + 1;
                if($spinner_currentFrame > numFrames) {
                    $spinner_currentFrame = 1;
                }
                $(target).css("background-image", "frame-" + $spinner_currentFrame + ".jpg");
            }

            $(document).ready(function()
            {
                $spinner_loadingAnim = setInterval(function ()
                {
                    UpdateSpinner('#spinner', 300);
                },
                24);
            }); 
```

我不使用精灵的原因是因为我有几百张图像，并且帧已经从 Flash 中导出，例如`frame-1.jpg, frame-2.jpg`. 但是我的代码没有报告任何错误，但没有添加背景图像......有什么想法吗？建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:28:11.927

`background-image`css 属性需要用`url("/path/frame-1.jpg")`.

```
$(target).css("background-image", "url('frame-" + $spinner_currentFrame + ".jpg')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:29:04.913

也许我错了，但不是必须像

```
$(target).css("background-image", "url(frame-" + $spinner_currentFrame + ".jpg)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:32:57.193

```
 $(target).css("background-image", "url('frame-" + $spinner_currentFrame + ".jpg')"); 
```

像问题[Setting background-image using jQuery CSS property](https://stackoverflow.com/questions/512054/setting-background-image-using-jquery-css-property)

编辑错字

# android - 如何将 2 个 UDP 套接字绑定到同一个端口，一个用于接收，另一个用于发送

> ID：12935358
> 
> 赞同：2
> 
> 时间：2012-10-17T13:24:13.677
> 
> 标签：android, linux, sockets, udp

我正在开发 Android 上的 RTP 流代码，我需要在端口（例如 5678）上**接收**RTP（**UDP**）数据包并从***同一端口*****（5678）发送**RTP 数据包。发送方代码和接收方代码位于不同的位置，因此单个套接字不能同时用于发送和接收。

 *为此，我需要使用**bind()**将发送方套接字和接收方套接字绑定到同一个端口。仅在 2 个套接字上使用 bind()，我在第二个 bind() 上出现错误。（如预期）

在对 StackOverflow 上的其他帖子进行搜索后，我发现了一个使用套接字选项**SO_REUSEADDR**的选项（**SO_REUSEPORT**在 Linux 上不可用）。

使用**SO_REUSEADDR**，我可以将两个套接字绑定到同一个端口。发送方套接字能够从该端口发送到（）。但是接收器套接字停止显示任何可用于读取的传入数据包（**select()** + **FD_ISSET()**侦听方法）。如果 bind() 到其他端口，接收器套接字正常接收另一个端口上的传入数据包。

如此有效，它只有一个套接字能够使用共享端口，而另一个套接字只是被剥夺了任何数据包。

任何改进 SO_REUSEADDR 方法或任何其他方法的建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:34:04.863

You don't need to bind two sockets on the same port. Android [`DatagramSocket`](http://developer.android.com/reference/java/net/DatagramSocket.html) is bidrectional socket. Simply create one socket and use its `receive` and `send` methods. You can use them from different threads (`receive` and `send`) if that's an issue.*

# java - 方法上的 Bean 验证

> ID：12935360
> 
> 赞同：4
> 
> 时间：2012-10-17T13:24:17.903
> 
> 标签：java, jsf, bean-validation

```
public class Register {
    @NotNull private String password;
    @NotNull private String passwordRepeat;
    @AssertTrue private boolean comparePasswords() { 
       return password.equals(passwordRepeat);
    }

    private Set<ConstraintViolation<Register>> violations;

    public void doRegister(AjaxBehaviorEvent event) {
        Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
        violations = validator.validate(this);

        if(violations.isEmpty()) {
            // This occurs
        }
    }
} 
```

如果我的两个密码都不为空，我的验证将通过，但它们不同。似乎最后一个约束不会被考虑在内，尽管我不知道为什么。有人有建议吗？

不，我不是在搜索 @Matches 或类似自定义验证器的任何实现。我只是想解决这个问题。

提前致谢。

**更新 1**

我已经对此进行了一些测试，希望结果能提供所需的信息。

*Bean.java*

```
@Named
@RequestScoped
public class Bean {
    @NotNull private String example1;
    @NotNull private String example2;
    @AssertTrue private boolean examplesMatch() { return example1.equals(example2); }

    private Set<ConstraintViolation<Bean>> violations;
    private FacesContext context;
    private Validator validator;

    @PostConstruct
    public void init() {
        context = FacesContext.getCurrentInstance();
        validator = Validation.buildDefaultValidatorFactory().getValidator();

        example1 = "abc";
        example2 = "def";
        runValidation(false, 1);

        example1 = "abc";
        example2 = "abc";
        runValidation(true, 2);

        example1 = "abc";
        example2 = null;
        runValidation(false, 3);
    }

    private void runValidation(boolean assertion, int testNr) {
        FacesMessage message;
        violations = validator.validate(this);
        if(violations.isEmpty() == assertion) {
            message = new FacesMessage("Passed test nr. " + testNr);
        }
        else {
            message = new FacesMessage("Failed test nr. " + testNr);
        }
        context.addMessage(FacesMessage.FACES_MESSAGES, message);
    } 
```

*索引.xhtml*

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <head>
        <title>TODO supply a title</title>
    </head>
    <body>
        #{bean}
        <h:messages />
    </body>
</html> 
```

*结果*

```
beanvalidation.Bean@31c5c3da

    Failed test nr. 1
    Passed test nr. 2
    Passed test nr. 3 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T08:45:57.607

*examplesMatch()*不是有效的[Java Bean](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)布尔属性获取器。它需要以*get*或*is*开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-24T07:15:52.700

@BalusC 像往常一样给出了一个很好的答案！

另请注意：在命名`jakarta.validation`空间与.`javax.validation``AssertTrue`

# java - 启动线程后，我们如何保持 run 函数运行？我有一堆想法，但我不确定哪个更专业？

> ID：12935364
> 
> 赞同：8
> 
> 时间：2012-10-17T13:24:47.530
> 
> 标签：java, multithreading, networking, tcp, thread-safety

在`Thread`调用之后`start()`，你知道它会调用类`run()`中的函数`Runnable`。在`run()`函数中，我希望线程只要从客户端接收到“Bye”消息就一直存在。如果我把它们放在while循环中，我认为它会占用大量内存，而且我没有使用线程的力量。顺便说一句，我不希望我的线程通过调用在运行函数中休眠。`Thread.sleep(6000);`还有其他方法可以留在运行函数中吗？

1.  如果答案是加入在哪里以及如何使用它？我是否应该在运行函数开始时弹出它并保持在那里直到我从客户端发送“Bye”？

2.  我应该说`while((request=in.readLine())!=null){`吗？它不起作用，因为我认为它会失去与客户端的连接，或者更好地说是客户端失去连接？

3.  当我接到“再见”的电话时，我应该说`while(Thread.isAlive)`然后杀死威胁，`Thread.stop`这有点危险吗？

这是我的简化代码：

```
while(true)
        {   
            ClientWorker w;
            try
            {                   
                w = new ClientWorker(serverSocket.accept());
                    Thread t = new Thread(w);
                    t.start();
                }
......  }

    class ClientWorker implements Runnable {
        public ClientWorker(Socket incoming)
        {
            myList = my;
            this.incoming = incoming;
        }
    public synchronized  void run()
    {
         in = new BufferedReader(new InputStreamReader(incoming.getInputStream()));
.
.
..
...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T14:53:19.277

在最简单的情况下，让你的 run 方法完成它的工作并在适当的时候终止，如下所示：

```
public void run() {
    boolean running = true;
    while(running) {
        running = doWork();
        if (Thread.interrupted()) {
            return;
        }
    }
} 
```

此处，当 doWork() 方法返回 false 时，该过程停止。让你的线程被中断也是很好的风格，特别是如果它需要运行很长时间，请参阅[本教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)。为了使这些工作，doWork() 应该定期返回。请注意，您无法重新启动线程，一旦 run 方法返回，系统就会回收该线程。

如果您需要对线程进行更多控制，您可以创建单独的 Worker 和 ThreadManager 类。

要让 ThreadManager 终止 Worker，请在您的 Worker 中创建一个 volatile 布尔字段，该字段会定期检查：

```
public class Worker extends Thread {

    private volatile boolean running;

    public void run() {
        running = true;
        while(running) {
            running = doWork();
            if (Thread.interrupted()) {
                return;
            }
        }
    }

    public void stopRunning() {
        running = false;
    }
} 
```

Worker 在被打断或工作完成时结束。ThreadManager 也可以通过调用 stopRunning() 方法请求 Worker 停止。

如果您的线程工作结束，它也可以调用 ThreadManager 上的 wait() 方法。这会暂停线程，直到它被通知有新的工作要做。当新工作到达时，ThreadManager 应该调用 notify() 或 notifyAll()（在本例中，ThreadManager 用作监视器）。

使用这种方法，您可以使 Worker 保持简单，并且只关心完成工作。ThreadManager 确定线程的数量并为它们提供工作，但不需要知道实际工作的细节。更进一步的做法是将“工作”也拆分为一个单独的类，您可以将其称为 Job。这方面的一个例子可以在我的[网络爬虫示例](https://github.com/akoster/x-converter/tree/master/src/main/java/xcon/example/webcrawler)中找到。这对于将新工作从 ThreadManager 传递到工作线程可能很有用。

编辑：澄清：如果线程不做任何工作，只需要等待某些条件，不要使用迭代等待，而是使用等待/通知（请参阅我给出的 webcrawler 示例）或简单的回调条件出现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-28T02:11:19.243

我知道这已经晚了，但这是一个更好的实现，并且通过忙等待来避免大量 CPU 使用 - 当线程等待信号时允许上下文切换。

将信号量设置为值 0 可确保当线程尝试获取权限以继续时，它不会得到它并等待。当您释放信号量时，计数增加 1，允许线程继续，计数减少回 0。

## 主要：

```
Semaphore sem = new Semaphore(0);
Worker t = new Worker(sem);
t.start();'

// The thread is now running but waiting, signal the semaphore to start work
sem.release(); 
```

## 线程

```
public class Worker(Semaphore sem) extends Thread {

    public void run() {
        sem.acquire();
        doWork();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T13:27:55.237

只是`return`从`run()`你得到`"bye"`

# iphone - 如何将动画图像设置为 UILabel 背景？

> ID：12935369
> 
> 赞同：0
> 
> 时间：2012-10-17T13:25:10.650
> 
> 标签：iphone, xcode, animation, uilabel

我尝试将动画图像设置为 UILabel 背景。我的标签从点 (x=0 y260 移动到 x=480 y=260) 我想在动画期间添加 UIImage。所以我尝试这样

```
UIImageView *myimg=[[UIImageView alloc]init];
        myimg.animationImages =[NSArray arrayWithObjects:   
                                [UIImage imageNamed:@"1ANI.png"],
                                [UIImage imageNamed:@"2ANI.png"],
                                [UIImage imageNamed:@"3ANI.png"],nil];

        myimg.animationDuration = 1.5;
        myimg.animationRepeatCount = 0;
        [myimg startAnimating]; 
        [lbl1 addSubview:myimg];
        [myimg release]; 
```

我像这样使用单个 UIImage 设置 UILabel 背景

```
UIImage *image=[UIImage imageNamed:@"1ANI.png"];
            lbl2.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

单个图像代码有效，但是当我尝试使用动画图像实现它（如上面我的代码显示）然后它不起作用有人可以指导我如何将动画图像设置为 UILabel Background.Thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:28:00.277

尝试这个

```
UILabel *label=[[UILabel alloc]initWithFrame:CGRectMake(10, 10, 100, 21)];
[label setText:@"asfsdf" ];
[label setBackgroundColor:[UIColor clearColor]];

UIImageView *imagView=[[UIImageView alloc]initWithFrame:CGRectMake(10, 10, 100, 21)];
imagView.animationImages =[NSArray arrayWithObjects:
                        [UIImage imageNamed:@"1ANI.png"],
                        [UIImage imageNamed:@"2ANI.png"],
                        [UIImage imageNamed:@"3ANI.png"],nil];

imagView.animationDuration = 1.5;
imagView.animationRepeatCount = 0;
[imagView startAnimating];
[self.view addSubview:imagView];
[self.view addSubview:label]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:29:54.107

首先不要将 UIImageView 添加到标签为子视图`[lbl1 addSubview:myimg];`

首先添加图像视图，然后在其上添加 uilabel。您的标签将是透明的并浮动在 uiimageview 上。

您可能还需要 `[imageView setuserinteractionEnabled:YES];`uiimageview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T23:42:35.977

这项工作在 iOS 7

[myLabel setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"panel_dev_header"]]];

# ajax - 如何修改 AJAX Control Toolkit Twitter 模板？

> ID：12935370
> 
> 赞同：1
> 
> 时间：2012-10-17T13:25:18.433
> 
> 标签：ajax, twitter, toolkit

谁能参考一篇关于**如何定义/修改 Ajax 控件工具包 Twitter 控件模板**（LayoutTemplate、StatusTemplate、AlternatingStatusTemplate 和 EmptyDataTemplate）的文章？

谢谢！

# c - strcpy 是如何实现的？

> ID：12935371
> 
> 赞同：6
> 
> 时间：2012-10-17T13:25:25.923
> 
> 标签：c, strcpy

我有一个关于使用 strcpy 的问题。我知道 ANSI C 标准说：源和目标不能重叠，否则行为是不可预测的。如果在 Linux 下使用旧的 gnu C 编译器编译，我将向您展示一段代码，它可以按我的预期工作。

```
#include <string.h>
#include <stdio.h>

char S[80],*P;

int main() {
    strcpy(S,"abcdefghi\r\njklmnopqr\r\nstuvwxyz\r\n");
    for (P=S; P=strchr(P,'\r'); P++) strcpy(P,P+1);
    printf("%s\n",S);
    return 0;
} 
```

此序列从输入字符串中删除每个`\r`（回车）。我知道（来自 Kernigham 和 Ritchie）strcpy 的一个非常简单的实现如下

```
while (*t++=*s++) ; 
```

现在我使用 gcc (Gentoo 4.5.4 p1.0, pie-0.4.7) 4.5.4 编译了我的程序，它打印了这个：

```
abcdefghi
jklmnpqr          <-- missing 'o'
stuvwxxyz         <-- doubled 'x' 
```

我想这个编译器（实际上是它的库）使用了一个非常复杂的序列 for `strcpy`，我不明白原因。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T13:29:19.203

你被警告不要那样做。原因是逐字节复制实际上非常慢，并且需要大量循环才能通过字符串。编译器可以很容易地对此进行优化（例如，通过一次复制一个`int`-size 的块，或者使用一些特定于平台的并行化。）

但是如果字符串重叠，那么这些优化会对您的数据做出不再有效的假设。结果，它们会给您未指定的结果。您的旧 GCC 很可能根本没有进行任何此类优化。

由于文档`strcpy()`说不要使用重叠字符串，*所以不要*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:28:48.100

弄清楚你的实现在做什么的最好方法当然是阅读它的库的源代码。

如果源不可用，下一个最佳选择可能是读取编译器生成的汇编代码。

您还可以查看该库的“严肃”开源实现，并可能从中得出一些结论。

一个想法可能是该库一次复制比一个字符更大的数据块，当您违反设计假设时，它会中断。

# c# - C# windows 服务在调试时安装，而不是在发布时安装

> ID：12935373
> 
> 赞同：0
> 
> 时间：2012-10-17T13:25:34.963
> 
> 标签：c#, windows-services, release

我有一个自定义构建的 Windows 服务，它使用我的团队构建的自定义库。它在调试模式下运行和安装正常，但是当我在发布模式下安装它时，出现错误“无法在 WindowsService.exe 程序集中获取安装程序类型”

有什么想法吗？我在 cmd 提示符下通过 installutil 安装它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:12:03.403

所以我解决这个问题的方法（可能是一个警察）是在任何 CPU 的平台上编译它使用的 dll 和发布模式的 windows 服务。试图将两者都保留在 x64 中，但不起作用。

# android - Android Wifi Direct 软 AP 配置

> ID：12935375
> 
> 赞同：3
> 
> 时间：2012-10-17T13:25:38.043
> 
> 标签：android, wifi, wifi-direct

我一直在玩 ICS 上的 Wifi Direct API，但我有点卡住了。

在 API 中有一个名为 createGroup 的方法，可以在手机上创建基于旧软件的接入点。这很棒并且有效，但我似乎找不到任何方法来更改密码或任何配置选项！有谁知道你是怎么配置的？

链接到 API 文档：http: [//developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:45:24.870

发现无法配置。它选择一个随机 AP 名称和一个随机密码。

来源：[https ://groups.google.com/forum/?fromgroups=#!searchin/android-platform/direct/android-platform/YrKKfEMACZk/zV-8AsJp6pgJ](https://groups.google.com/forum/?fromgroups=#!searchin/android-platform/direct/android-platform/YrKKfEMACZk/zV-8AsJp6pgJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:24:32.117

您可以打印出 adb logcat 消息并打印密码。

例如，这是我得到的“I/wpa_supplicant(386): p2p0: P2P-GROUP-STARTED p2p-p2p0-0 GO ssid="DIRECT-iU-Android_c38f" freq=2437 passphrase="EvYmhRs3" go_dev_addr=a2: 0b:ba:e9:c3:34"

我尝试使用上述密码连接到该网络，并且可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-04T08:27:20.597

如果您有 root，您可以修改`/data/misc/wifi/p2p_supplicant.conf`然后`pkill wpa_supplicant`应用更改。这应该适用于大多数设备。示例代码：[https ://github.com/Mygod/VPNHotspot/blob/ad0d5b8b5a8d96a2f7e0d07885375c804ea5265b/mobile/src/main/java/be/mygod/vpnhotspot/net/wifi/P2pSupplicantConfiguration.kt](https://github.com/Mygod/VPNHotspot/blob/ad0d5b8b5a8d96a2f7e0d07885375c804ea5265b/mobile/src/main/java/be/mygod/vpnhotspot/net/wifi/P2pSupplicantConfiguration.kt)

更新：您可以在 Android Q 中执行此操作（至少到 beta 3）。看到这个：[https ://github.com/Mygod/VPNHotspot/blob/ec6f7870d470f9f6b6037610bbff9c6fc061908b/mobile/src/main/java/be/mygod/vpnhotspot/RepeaterService.kt#L288-L319](https://github.com/Mygod/VPNHotspot/blob/ec6f7870d470f9f6b6037610bbff9c6fc061908b/mobile/src/main/java/be/mygod/vpnhotspot/RepeaterService.kt#L288-L319)

# mysqldump - 没有数据库名称的mysqldump

> ID：12935379
> 
> 赞同：2
> 
> 时间：2012-10-17T13:25:42.617
> 
> 标签：mysqldump

是否可以在输出中没有数据库名称的情况下以 xml 格式转储数据？

如果我使用 --xml 选项转储这样的输出：

```
$>mysqldump --xml my_database_name my_table > my_table.xml 
```

然后我的输出类似于

```
<?xml version="1.0"?>
<mysqldump xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<database name="my_database_name">
... 
```

您可以在输出中看到我不想要的数据库名称。

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:43:46.247

我认为 mysqldump 命令没有这样的选项。生成 XML 文件后，您始终可以使用脚本从转储文件中删除数据库标记。在 Windows 的 PowerShell 中，您始终可以使用以下命令：

```
${c:my_table.xml} -replace "`<database name=`"my_database_name`"`>" -replace "`<\database`>" > my_table_new.xml 
```

# php - php 文件在浏览器中运行，但长脚本导致尝试文件下载和脚本停止

> ID：12935380
> 
> 赞同：0
> 
> 时间：2012-10-17T13:25:44.877
> 
> 标签：php, zend-framework, mime-types

我最近在我的本地机器上安装了 zend 服务器 (Zend Server CE (PHP 5.3) 5.6.0 SP4) 以支持 php / mysql 站点构建。

我有一个现有的工作站点，并设法将 php 文件和数据库下载到我的本地计算机上，并在进行一些调整后使事情（大部分）正常工作。

我当前的问题让我难住了。我有两个 php 脚本。一旦读取文件位置的数据库并将每个文件下载到具有特定名称的本地目录。这需要一点时间并成功运行。这 30 个文件是 csv 数据馈送文件，总共大约 1GB。

第二个脚本将每个文件插入到 MySql 表中（使用 LOAD DATA LOCAL INFILE ....），进行一些更改，然后将每个文件插入到更大的主表中。

该脚本最初运行正常，第一个表插入正常，进行了更改，然后将此数据插入到主表中。与第二个、第三个和第四个相同，我处理了超过 70,000 行数据并将其插入到我的主表中。

然后...脚本停止运行，我得到一个对话框，询问我想将 php 文件保存在哪里？！

我环顾四周，针对导致立即保存为对话框的 php 脚本问题提供了一些修复，解决方案似乎大多是清除缓存，正确设置 php 文件的处理程序，尝试另一个浏览器。

我将此添加到 httpd.conf 并重新启动了 Apache，但没有成功：

` AddType application/x-httpd-php .php

```
<FilesMatch \.php$>

    SetHandler application/x-httpd-php

</FilesMatch>

AddType application/x-httpd-php-source .phps

<IfModule dir_module>

    DirectoryIndex index.php index.html

</IfModule> 
```

`

我的脚本处理然后失败，但前提是它们持续 30 秒左右。这发生在 Chrome 和 Firefox 中，并且在整个缓存被清除之后。

谁能建议该文件如何导致脚本处理但也触发下载以及如何停止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:23:32.023

更新：

我从未设法确定 Zend 服务器的问题。但...

我卸载了 Zend，并安装了 EasyPHP，它工作正常。

# .net - AJAX JSONP 请求集上的意外令牌错误

> ID：12935381
> 
> 赞同：1
> 
> 时间：2012-10-17T13:25:46.007
> 
> 标签：.net, ajax, json, web-services

我开发了一个使用 JSON 服务的移动网站。我使用 JSONP，因为它是跨域的。它正在工作并突然坏了，我无法理解为什么。这是我可以在浏览器中检查的内容：

**我的 Javascript 调用：**

```
$.ajax({
url: apiBaseURL + "getoperators?appKey=" + appKey,
dataType: 'jsonp',
success: function(data) {
    console.log(data);
},
    error: function(jqXHR, textStatus, errorThrown) {             }
}); 
```

**当我查看响应时，它的格式似乎正确，如下所示：**

{"GetOperatorsResult":{"Error":"","Results":[{"City":"Cape Town","IsPublic":true,"Mode":"Bus","Name":"Golden Arrow" },{"City":"开普敦","IsPublic":true,"Mode":"Shuttle","Name":"Jammie Shuttle"},{"City":"开普敦","IsPublic": true,"Mode":"Train","Name":"Metrorail"},{"City":"Cape Town","IsPublic":true,"Mode":"Bus","Name":"MyCiti" }],"状态":"成功"}}

**这是网络审计：**

请求地址：http://api.wimt.co.za/v1/json/public.svc/getoperators?appKey=EB478338-73C7-483F-8AB4-B4DE2219D4DC&callback=jQuery18208015921225305647_1350479608882&_=1350479608950 请求方法：GET 状态码：2 OK Headersview源接受：*/* Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3 Accept-Encoding:gzip,deflate,sdch Accept-Language:en-US,en;q=0.8 Cache-Control:max -age=0 Connection:keep-alive Host:api.wimt.co.za Referer:http://localhost:8300/index.html User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML , 如 Gecko) Chrome/22.0.1229.94 Safari/537.4 查询字符串参数查看 URL 编码的 appKey:EB478338-73C7-483F-8AB4-B4DE2219D4DC 回调:jQuery18208015921225305647_1350479608882 _:1350479608950 charset=utf-8 日期：2012 年 10 月 17 日星期三 13:13:43 GMT 服务器：Microsoft-IIS/7.5 X-Powered-By:ASP.NET

我们距离发布还有 1 天，但运行良好的东西已经坏了，我一辈子都无法弄清楚是什么。错误可能在 web.config 中，但我在那里有所有正确的标头/端点。

有人请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:56:43.900

似乎远程 API 不再发送 JSONP，而是发送纯 JSON。在有效的 JSONP 调用中，响应必须包含在回调名称中：

```
jQuery18208015921225305647_1350479608882({"GetOperatorsResult":{"Error":"","Results":[{"City":"Cape Town","IsPublic":true,"Mode":"Bus","Name":"Golden Arrow"},{"City":"Cape Town","IsPublic":true,"Mode":"Shuttle","Name":"Jammie Shuttle"},{"City":"Cape Town","IsPublic":true,"Mode":"Train","Name":"Metrorail"},{"City":"Cape Town","IsPublic":true,"Mode":"Bus","Name":"MyCiti"}],"Status":"Success"}}) 
```

您应该联系 API 的所有者或阅读文档以了解如何指定 JSONP 调用。

# php - Imagick 无法将 PDF 转换为 JPEG 但 ImageMagick 可以

> ID：12935384
> 
> 赞同：1
> 
> 时间：2012-10-17T13:26:00.457
> 
> 标签：php, imagemagick, imagick

首先，我将 ImageMagick 与 Imagick PHP5 扩展结合使用了一段时间，完全没有问题，直到我不小心删除了 GhostScript。从那以后，我试图让它重新工作，但无济于事。

重新安装所有内容后，ImageMagick 能够将 PDF 转换为 JPEG。`gs`但是，当我运行时，我在 DELEGATE 列表中找不到`convert -list configure`。当我运行`convert sample.pdf[1] sample.jpg`它时，它仍然可以完美运行。但是，当我通过它重新安装 php5-imagick 扩展`sudo apt-get install php5-imagick`时，当我尝试将 PDF 转换为图像时会引发错误。

`Fatal error: Uncaught exception 'ImagickException' with message 'no decode delegate for this image format`上传/guide.pdf'@错误/构成.c/ReadImage/533。`

它是由以下代码引发的：

```
<?php
//header("Content-type: image/jpeg"); 
$img = new imagick("upload/guide.pdf[1]"); 
$img->setImageFormat("jpg");
echo $img; 
?> 
```

我看不出问题出在哪里，因为 ImageMagick 本身工作正常，我想是 Imagick 不能很好地与 ImageMagick 交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:09:33.480

我通过不通过 Ubuntu 存储库安装 Imagick 解决了这个问题。当我运行`sudo apt-get autoremove php5-imagick`并尝试通过 pecl 安装它时，它抛出一个错误并说 Imagick 已经安装（这很奇怪，因为我卸载了它并重新启动了 apache）。

所以我通过卸载它`sudo pecl uninstall imagick`然后使用重新安装它`sudo pecl install imagick`然后添加`extension=imagick.so`到php.ini，并再次重新启动apache。现在一切都恢复正常了。希望这会帮助遇到同样问题的人。

# html - 创建对象后重定向，Django

> ID：12935385
> 
> 赞同：0
> 
> 时间：2012-10-17T13:26:01.610
> 
> 标签：html, django

我是 Django 的新手，我正在创建一个运动应用程序。我允许用户创建匹配项（选择他们的团队和他们的风格），并且我想在他们使用表单创建后将他们重定向到特定页面（他们的匹配项）。

这是我的表格：

```
 {% if user.is_authenticated %}
   <form method="post">
    {% csrf_token %}

    <input type="radio" name="supporting" value={{teamA.id}}  /> {{teamA}}
    <input type="radio" name="supporting" value="" /> Neutre
    <input type="radio" name="supporting"  value={{teamB.id}}  /> {{teamB}}
    <hr>
    <input type="radio" name="style" value="1" /> Funny
    <input type="radio" name="style" value="3" /> Mixed
    <input type="radio" name="style" value="2" /> Technical
    </br></br>

    <input type="submit" value="Create your match!" />

   </form>

 {% else %} 
```

当用户选择已创建的匹配项时，我可以重定向用户。但我不知道如何使用用于创建匹配的相同按钮重定向到特定页面。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:34:16.200

在您看来，`HttpResponseRedirect()`在处理表单后使用适当的 url，您可以重定向到新页面。参考文档：[在视图中使用表单](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#using-a-form-in-a-view)

**更新**：重定向到与 id 匹配的页面

如果您的匹配详细信息页面的 url 是这样的：

```
url(r'^match_detail/(?P<id>\d+)/$', 'myapp.views.match_detail', name='un_mdetail'), 
```

然后你可以使用这个重定向

```
HttpResponseRedirect(reverse('un_mdetail', args=(match.id,))) 
```

# ruby - 在 Ruby 中，我有一个包含变量的哈希值。如何获取它的命名空间？

> ID：12935388
> 
> 赞同：3
> 
> 时间：2012-10-17T13:26:13.470
> 
> 标签：ruby, hash, namespaces

我有一个包含变量的哈希值：

```
module Categories
  module Services
    PHOTOGRAPHY_VIDEO = "9115"
  end
end

hash = {"CatId" => Categories::Services::PHOTOGRAPHY_VIDEO}

puts(hash["CatId"]) # This returns "9115" but how do I get the "Services" category? 
```

我想向Ruby询问'CatId'的变量'value'等于'Services'的命名空间。我想做这样的事情：

```
def priced?
  (hash["CatId"]).unknown_method == Services
end 
```

如何获取它的命名空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:31:26.290

我不认为这是可能的。给定诸如“9115”之类的值，就无法知道已为特定视频设置了哪些常量（除了详尽的搜索，这只有在总数很小的情况下才实用）。

如果您需要获取此信息，我会重新考虑您存储的数据 - CatId 键的值可能包含更多信息（例如，包含 id 和文本描述的结构）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:31:46.023

`Categories::Services::PHOTOGRAPHY_VIDEO`是该类中的唯一常量。它的值与模型（你称之为命名空间）无关；在这种情况下，它只是一个字符串。您可以再次检查哈希值。

```
def priced?
  (hash["CatId"]) == Categories::Services::PHOTOGRAPHY_VIDEO
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:35:35.463

```
"#{hash["CatId"]}".include? 'Services::' 
```

更新 =>

哦，我现在更清楚了

```
module Categories
  module Services
    PHOTOGRAPHY_VIDEO = "9115"
  end
end

hash = {"CatId" => "Categories::Services::PHOTOGRAPHY_VIDEO"}

eval hash["CatId"] # => "9155" 
```

# c# - 将 Windows 窗体组合框绑定到匿名类型

> ID：12935392
> 
> 赞同：0
> 
> 时间：2012-10-17T13:26:25.810
> 
> 标签：c#, winforms

我有一个`Dictionary<string, List<string>>`where 字符串是文件的路径。我想在组合框中显示文件的名称，然后使用文件名作为值来捕获它`SelectedValueChanged`。

```
 var cmbDatasource = (from moduleReference in moduleReferences
                       select new { FilePath = moduleReference.Key, Filename = new FileInfo(moduleReference.Key).Name }).ToList();
  cmbModules.DataSource = cmbDatasource;
  cmbModules.DisplayMember = "Filename";
  cmbModules.ValueMember = "FilePath"; 
```

然后我在我的`SelectedValueChanged`活动中这样做

```
private void cmbModules_SelectedValueChanged(object sender, EventArgs e)
{
  var cmb = (ComboBox)sender;
  if (cmb != null)
  {
    var test = cmb.SelectedValue.ToString();
  }
} 
```

`test`现在成为匿名类型作为值成员（路径）的姿势。

> [使用带有 Linq 匿名类型的 ComboBox 的 SelectedItem 属性](https://stackoverflow.com/questions/530482/using-selecteditem-property-of-combobox-w-linq-anonymous-type)

我看过这里，但看不出我在做什么不同。

> ## 例子

```
Dictionary<string, List<string>> moduleReferences = new Dictionary<string, List<string>>();
moduleReferences.Add("C:\Test.txt", new List<string>()); 
```

`Test.txt`但是，当我捕获我希望`C:\Test.txt`在字典中查找的事件时，应该显示组合框。我在这里做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:40:02.870

我相信当你执行

```
var test = cmb.SelectedValue.ToString(); 
```

您只获取选择的值，而不是与 moduleReference.Key 类型相同的项目本身。如果你想得到你需要做的整个记录

```
var test = cmb.SelectedItem; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T13:29:50.480

也许我的回答会帮助某人找到解决方案。使用关键字动态，您可以这样做：

```
var cmbDatasource = (from moduleReference in moduleReferences
                             select (dynamic)new { FilePath = moduleReference.Key, Filename = new FileInfo(moduleReference.Key).Name }).ToList();
        cmbModules.DataSource = cmbDatasource;
        cmbModules.DisplayMember = "Filename";
        cmbModules.ValueMember = "FilePath"; 
```

然后在选定的值更改事件处理程序中：

```
private void cmbModules_SelectedValueChanged(object sender, EventArgs e)
{
  var cmb = sender as ComboBox;
  if (cmb != null)
  {
    dynamic item = (dynamic)cmb.SelectedItem;
    string fname = item.Filename;
    string fpath = item.FilePath;
  }
} 
```

但是将 SelectedItem 设置为组合框变得更加困难：

```
public void SelectFile(String fname)
{
    foreach (dynamic item in cmbModules.Items)
    {
        if (item.Filename == fname)
        {
            cmbModules.SelectedItem = item;
            break;
        }
    }
} 
```

PS，您需要添加对 Microsoft.CSharp 程序集的引用

# r - 在R中的for循环中求和

> ID：12935393
> 
> 赞同：1
> 
> 时间：2012-10-17T13:26:30.010
> 
> 标签：r, loops, for-loop

这个问题听起来可能与其他问题相似，但是当我检查它们时，它们与我正在寻找的有点不同。下面是我的代码，

```
Data <- rbind(c(54, 55, 51), c(52, 51, 57))
WMatrix <- rbind(c(0, 1), c(1, 0)) 

for(i in 1:2){
   for(j in 1:2){
      for(t in 1:2){
      print(WMatrix[i,j]*Data[j,t]*Data[i,t+1])
      }
   }
} 
```

此代码的输出是，

```
[1] 0
[1] 0
[1] 2860
[1] 2601
[1] 2754
[1] 3135
[1] 0
[1] 0 
```

现在，***我想从循环中立即生成这个输出的总和（不列出它）。也就是说，循环的输出应该是 11350，这是循环中所有生成的输出的总和***。我知道这个问题可能很简单，但我仍在学习基本编程。我试过这个，

```
for(i in 1:2){
   for(j in 1:2){
      for(t in 1:2){
      print(sum(WMatrix[i,j]*Data[j,t]*Data[i,t+1]))
      }
   }
} 
```

但是，输出仍然相同，有人可以帮助我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T13:58:40.703

一点点矩阵代数，一步就完成了：

```
sum(WMatrix * (Data[, -3] %*% Data[, -1]))
[1] 11350 
```

* * *

**编辑：**在 R 中，`*`运算符执行元素乘法，同时`%*%`给出矩阵乘积。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T13:39:57.257

在这里，这完全是低效的，读起来像 C 代码等，但我猜想打印你想要的。如果不知道您在这里实际尝试实现什么，这些操作是什么，我不会优化代码。

**编辑：查看更优越的替代答案。@Andrie 实际上猜到了你*想做*什么。**

```
sum <- 0 
for(i in 1:2){
  for(j in 1:2){
    for(t in 1:2){
      sum <- sum + WMatrix[i,j]*Data[j,t]*Data[i,t+1]
    }
  }
}
print( sum ) 
```

# android - facebook connect 仍然适用于 release-hashvalue，而 facebook 上的 hashvalue 仍然是 debug-hashvalue

> ID：12935394
> 
> 赞同：0
> 
> 时间：2012-10-17T13:26:42.740
> 
> 标签：android, eclipse, hash, publish, signing

所以我有一些奇怪的行为。

我正在开发一个允许用户将图像发布到 facebook 的应用程序，在调试阶段一切正常。

我在 facebook 上设置了应用程序并在我的应用程序中使用了 app-id，然后我使用了调试哈希键并输入了 facebook。一切正常，就像我说的那样，我能够发布图片。

但是，当我使用我打算用于发布的密钥签署我的应用程序时，该应用程序仍然有效，我能够在 Facebook 上发布图像。这应该是不可能的，因为 facebook 中的 hashkey 仍然是旧的调试密钥，而我的应用程序已经使用了 releasekey。（我使用默认的eclipse方式发布和创建密钥，即：导出->然后创建一个新密钥并使用它来签署应用程序）

当我使用 keytool 检查它时，releasekey 似乎很好，它显示了正确的密钥别名，并且只对正确的密码做出反应。

所以我去头并将releasekeys hashvalue输入facebook，然后我再次在我的应用程序上使用debugkey并尝试发布图像......它仍然有效，这又是不可能的，我现在知道为什么了。

我最后的办法是尝试在我的一个朋友帐户上创建一个新的 Facebook 应用程序。我拿走了他的 app-id 并将 releasehashkey 用于他的 facebook 应用程序。我无法再在 facebook 上发布图片，因为出现了令人讨厌的“发生错误，请稍后再试”错误。

因此，如果有人能告诉我这里到底发生了什么以及我做错了什么，我将非常感激，因为理论上一切都应该按预期工作。

PS：我通过将签名的 .apk 文件放在设备存储上，然后从那里安装它，在我的设备上安装了发布就绪应用程序。我在哪里使用 eclipse 运行配置的调试版本。

编辑：好吧，我做了另一种方法来确认我的假设，我做了以下

我删除了我的 PC 上的调试密钥，因此强制 eclipse 创建一个新密钥，我用 keytool 检查了调试密钥，哈希实际上是不同的。

因此，我删除了设备上的应用程序并从 eclipse 运行该应用程序，从而将其安装在使用新调试密钥签名的设备上。

我再次尝试在 facebook 上发帖，因为调试密钥不同，这一点应该是不可能的。但是我惊呆了，因为它仍然可以发布图像......

我现在的假设是哈希键对 facebook 根本没有任何意义，并且该应用程序实际上绑定到使用 facebook 连接时首次使用的 app-id。此信息似乎存储在 facebook 上的某个位置。

然而，这只是我的一个疯狂猜测，所以如果有人遇到同样的问题并找到答案或有任何关于该主题的情报，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:06:21.243

好吧，我要么是愚蠢的要么是盲目的......或者两者兼而有之，无论如何，错误是测试它的应用程序将其沙盒模式设置为禁用，因此任何使用该应用程序和 Facebook 帐户的人都可以发布内容。虽然我朋友的新应用程序的沙盒模式设置为启用，因此只有他能够发布内容。无论如何，这篇文章帮助我意识到我的错误 [Android Facebook SDK - 无法接收访问令牌](https://stackoverflow.com/questions/8818691/android-facebook-sdk-failed-to-receive-access-token)

# c# - 按值获取html元素

> ID：12935398
> 
> 赞同：3
> 
> 时间：2012-10-17T13:27:07.113
> 
> 标签：c#

鉴于 Winforms Webbrowser DOM 中的以下 html，我正在尝试获取第二个元素`value="type102"`

```
 <div class="Input"><input type="radio" name="type" value="type101" 
onclick="setType('type101');"><a href="javaScript:setType('type101');" 
onclick="s_objectID=&quot;javascript:setType('type101');_1&quot;;return this.s_oc?
this.s_oc(e):true">type101</a></div>

    <div class="Input"><input type="radio" name="type" value="type102" 
onclick="setType('type102');" checked="checked"><a href="javaScript:setType('type102');" 
onclick="s_objectID=&quot;javascript:setType('type102');_1&quot;;return this.s_oc?
this.s_oc(e):true">type102</a></div> 
```

我用过 `HtmlElement htmlElem = browser.Document.GetElementById(....`

和

`HtmlElement htmlElem = browser.Document.All.GetElementsByName(....`

之前，但在这种情况下，它们都是相同的，因此需要按值或 href 获取

是否可以在没有外部库的情况下直接获取第二个元素，或者我是否必须获取 GetElementsByName 的集合并遍历它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:36:01.340

```
HtmlElementCollection col=  webBrowser1.Document.GetElementsByTagName("input");
HtmlElement wanted;

foreach (HtmlElement item in col)
{
    if (item.GetAttribute("value")=="type102")
    {
        wanted = item;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:35:52.507

```
var elems = webBrowser1.Document.GetElementsByTagName("input");
var myInputElement = elems.First(e => !string.IsNullOrEmpty(e) && e.Trim().ToLower().Equals("type102"));
foreach (var elem in elems)
{
    var value = elem.GetAttribute("value");
    if (string.IsNullOrEmpty(value) && value.Trim().ToLower().Equals("type102"))
    {
        MessageBox.Show(value);
        break;
    }
} 
```

或者让它更短

```
var elems = webBrowser1.Document.GetElementsByTagName("input");
var myInputElement = elems.First(e => !string.IsNullOrEmpty(e) && e.Trim().ToLower().Equals("type102")); 
```

这是你想要的？您还可以查看[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)以了解此类内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:34:58.583

```
HtmlElement htmlElem = browser.Document.All.GetElementsByName(...)[1] 
```

# java - 在 Java 中完成后重新安排任务

> ID：12935399
> 
> 赞同：0
> 
> 时间：2012-10-17T13:27:10.093
> 
> 标签：java, job-scheduling

我想用 Java 开发一个应用程序，它会在完成后每 24 小时从 Internet 中获取一些文件。它会在每次启动时启动，并且会出现在 Window 的任务栏上。

## 脚步：

1.  启动 GUI（Windows 启动）；
2.  自动触发执行任务；
3.  做好工作；
4.  在 GUI 上打印任务结果；
5.  任务完成后，从现在开始安排24h的任务；

每次应用程序执行其任务时，都会重复步骤 3-5。

我在使用 Timer 和 TimerTask 时遇到了很多问题。

我在考虑类似这样的架构：

Main Runner 类（只是 GUI 和作业的初始化）；GUI 处理程序类；工作执行者类；

**在完成其目标后，我应该如何继续安排工作执行者课程再次执行？**

# debugging - Visual Studio 断点条件：当某些东西返回 false 时触发中断。可能吗

> ID：12935403
> 
> 赞同：0
> 
> 时间：2012-10-17T13:27:15.000
> 
> 标签：debugging, visual-studio-2008, optimization, triggers, conditional-breakpoint

我有一个函数体，其中包含许多其他函数调用，这些函数调用可能在某个时刻返回 false。把每一个断点都放在一行是很无聊的，因为每次的点都是这么多的。这是关于 Visual Studio 2008 的。有没有办法设置一些中断条件：例如：“当该主体中的某些内容返回 false 时 - 中断并等到 F10 或其他什么。” ? 如果您对此有所了解，我将非常高兴.. 或者可能是一个很好的插件。

# objective-c - 获取 iOS 中支持的货币列表

> ID：12935404
> 
> 赞同：8
> 
> 时间：2012-10-17T13:27:17.030
> 
> 标签：objective-c, ios, localization

我需要显示货币列表，以便用户可以选择一个。我想包括 iOS 支持的所有货币。

iOS 中有没有办法获取所有受支持货币的代码和名称？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T18:23:16.040

给你：

```
NSLocale *locale = [NSLocale currentLocale];
for (NSString *code in [NSLocale ISOCurrencyCodes]) {
    NSLog(@"%@ : %@", code, [locale displayNameForKey:NSLocaleCurrencyCode value:code]);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-12-16T13:57:40.193

### 斯威夫特 5

```
let currencys = Locale.isoCurrencyCodes 
```

所有唯一货币的数组：

```
let list = ["AED - AED","AFN - ؋","ALL - ALL","AMD - ֏","ANG - ANG","AOA - Kz","ARS - $","AUD - $","AWG - AWG","AZN - ₼&quot;,"BAM - KM","BBD - BBD","BDT - ৳&quot;,"BGN - BGN","BHD - د.ب.‏&quot;,"BIF - FBu","BMD - $","BND - $","BOB - Bs","BRL - R$","BSD - $","BTN - Nu.","BWP - P","BYN - Br","BZD - $","CAD - CA$","CDF - FC","CHF - CHF","CLP - $","CNY - ¥","COP - $","CRC - ₡&quot;,"CUP - $","CVE - ​&quot;,"CZK - CZK","DJF - Fdj","DKK - DKK","DOP - RD$","DZD - DA","EGP - ج.م.‏&quot;,"ERN - Nfk","ETB - Br","EUR - €&quot;,"FJD - $","FKP - FKP","GBP - £","GEL - ₾&quot;,"GHS - GH₵&quot;,"GIP - £","GMD - GMD","GNF - GNF","GTQ - Q","GYD - GYD","HKD - HK$","HNL - L","HRK - HRK","HTG - HTG","HUF - Ft","IDR - Rp","ILS - ₪&quot;,"INR - ₹&quot;,"IQD - د.ع.‏&quot;,"IRR - ریال","ISK - ISK","JMD - $","JOD - د.أ.‏&quot;,"JPY - ¥","KES - Ksh","KGS - сом","KHR - ៛&quot;,"KMF - CF","KPW - KPW","KRW - ₩&quot;,"KWD - د.ك.‏&quot;,"KYD - KYD","KZT - ₸&quot;,"LAK - ₭&quot;,"LBP - ل.ل.‏&quot;,"LKR - රු.","LRD - $","LYD - د.ل.‏&quot;,"MAD - MAD","MDL - L","MGA - Ar","MKD - ден","MMK - K","MNT - ₮&quot;,"MOP - MOP$","MRU - أ.م.","MUR - Rs","MVR - ރ.","MWK - MK","MXN - $","MYR - RM","MZN - MTn","NAD - $","NGN - ₦&quot;,"NIO - C$","NOK - NOK","NPR - नेरू","NZD - $","OMR - ر.ع.‏&quot;,"PAB - B/.","PEN - S/","PGK - K","PHP - ₱&quot;,"PKR - ر","PLN - zł","PYG - Gs.","QAR - ر.ق.‏&quot;,"RON - RON","RSD - RSD","RUB - RUB","RWF - RF","SAR - ر.س.‏&quot;,"SBD - $","SCR - SR","SDG - ج.س.","SEK - kr","SGD - $","SHP - £","SLL - SLL","SOS - S","SRD - SRD","SSP - £","STN - Db","SYP - LS","SZL - E","THB - ฿&quot;,"TJS - сом.","TMT - TMT","TND - DT","TOP - T$","TRY - ₺&quot;,"TTD - TTD","TWD - $","TZS - TSh","UAH - UAH","UGX - USh","USD - $","UYU - $","UZS - soʻm","VND - ₫&quot;,"VUV - VT","WST - WS$","XAF - FCFA","XCD - $","XOF - CFA","XPF - FCFP","YER - ر.ي.‏&quot;,"ZAR - R","ZMW - K"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-24T10:01:36.847

您可以使用 获取所有[ISO](https://en.wikipedia.org/wiki/ISO_4217)代码的列表`Locale`。

下面的代码将货币的所有 ISO 代码作为字符串数组返回。

```
Locale.isoCurrencyCodes 
```

您还可以将以下代码段复制到您的代码中

```
struct Currency {
    let name: String
    let code: String
}

extension Currency {
    static var allCurrencies: [Currency] {
        let currencies: [Currency] = Locale.isoCurrencyCodes.compactMap {
            guard let name = Locale.current.localizedString(forCurrencyCode: $0) else {
                return nil
            }
            return Currency(name: name, code: $0)
        }
        return currencies
    }
} 
```

这将为您提供货币类型的所有货币列表，您可以轻松访问名称、代码。此外，如果需要，您也可以附加符号。

# javascript - 从元素创建 XPath 在 IE 6 7 8 中不起作用

> ID：12935405
> 
> 赞同：0
> 
> 时间：2012-10-17T13:27:17.240
> 
> 标签：javascript, dom, xpath

我的功能适用于`IE9`9 版以下的任何东西，破解；

我用它来获取`XPath`已知的`DOM Element`；

有谁知道替代我的功能？

```
function createXPathFromElement(elm) {
    var allNodes = document.getElementsByTagName('*'); 
    for (segs = []; elm && elm.nodeType == 1; elm = elm.parentNode) 
    {
        if (elm.hasAttribute('id')) { 
            var uniqueIdCount = 0; 
            for (var n=0;n < allNodes.length;n++) { 
                if (allNodes[n].hasAttribute('id') && allNodes[n].id == elm.id) uniqueIdCount++; 
                if (uniqueIdCount > 1) break; 
            }; 
            if ( uniqueIdCount == 1) { 
                segs.unshift('id("' + elm.getAttribute('id') + '")'); 
                return segs.join('/'); 
            } else { 
                segs.unshift(elm.localName.toLowerCase() + '[@id="' + elm.getAttribute('id') + '"]'); 
            } 
        } else if (elm.hasAttribute('class')) { 
            segs.unshift(elm.localName.toLowerCase() + '[@class="' + elm.getAttribute('class') + '"]'); 
        } else { 
            for (i = 1, sib = elm.previousSibling; sib; sib = sib.previousSibling) { 
                if (sib.localName == elm.localName)  i++;
            }; 
            segs.unshift(elm.localName.toLowerCase() + '[' + i + ']'); 
        }; 
    };
    return segs.length ? '/' + segs.join('/') : null; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:57:01.083

您可能会查看[此答案](https://stackoverflow.com/questions/214862/equivalent-of-firebugs-copy-xpath-in-internet-explorer)以寻求解决方案。

至于你为什么在早期的 IE 中失败：[`hasAttribute`直到 IE8 才引入](http://msdn.microsoft.com/en-us/library/ie/cc304121(v=vs.85).aspx)。我不确定为什么要检查整个 DOM 是否有重复的 ID 属性，考虑到拥有多个具有相同 ID 的元素是无效的。但我知道现实世界的 HTML 并不总是有效的。也就是说，您应该能够只使用`if (elm.id && elm.id.length)`来检查 id 属性的存在。同上`class`。

如果您希望在 IE 的早期版本中使用该 XPath，您也会遇到问题，因为我认为 HTML 文档不支持它。我相信互联网上有解决方案，所以我会把它留给你（或其他一些更善良的人）去发现。

# javascript - 此脚本显示无不适用于 chrome

> ID：12935406
> 
> 赞同：0
> 
> 时间：2012-10-17T13:27:22.607
> 
> 标签：javascript, html, css, webforms

我有一个页面，用户必须在其中检查单选按钮 - 如果他是新用户，他将被重定向到不同的页面。

如果他是现有用户并且他选中此按钮，则会出现 2 个框：`username`和`password`

由于某种原因，此脚本不适用于 chrome。

谢谢您的帮助

```
<script>
    function dispLoing(val)
    {
        var obj = document.getElementById ? 
                     document.getElementById("loginForm").style :
                     document.all ?
                         document.all.loginForm :
                         document.loginForm;

        if (val == "new")
        {
            document.all.login(0).checked = true;
            obj.display = "none";
        }

        if (val == "existing")
        {
            document.all.login(1).checked = true;
            obj.display = "";
        }
    }
</script>

<td>
    <span id = "loginForm" style = "position: relative; top: 0px; left: 0px;
                                    z-index:80; display:none;">
        <table border=0>
            <tr>
                <td>
                    <font style = "font-size: 14px">Username:</font>
                </td>
                <td>
                    <input type = "text" name = "username" 
                          style = "width: 100px; height:17px; font-size: 12px;">
                </td>
            </tr>
            <tr>
                <td>
                    <font style = "font-size: 14px">Password:</font>
                </td>
                <td>
                    <input type = "password" name = "pass"
                          style = "width: 100px; height: 17px; font-size: 12px;">
                </td>
            </tr>
        </table>
    </span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:34:39.117

`document.all`是专有的 Microsoft 垃圾，仅当您需要支持 IE 4 时才有用。现在可以安全地假设它`document.getElementById`受支持。

当您分配 时`obj`，您会在尝试使用它之前测试它是否存在。

在你的两个`if`陈述中，你盲目地使用它。`obj.display`这会导致脚本在到达该行之前死掉。

```
function dispLoing(val) {
    var frm = document.getElementById("loginForm");
    var radios = frm.elements.login;
    if (val === "new") {
        radios[0].checked = true;
        frm.style.display = "none";
    } else if (val === "existing") {
        radios[1].checked = true;
        frm.style.display = "";
    }
} 
```

# python - 将 PositiveSmallIntegerField 迁移到 PositiveIntegerField 并在 Postgres 中使用 BIGINT 字段

> ID：12935407
> 
> 赞同：2
> 
> 时间：2012-10-17T13:27:24.387
> 
> 标签：python, django, postgresql, django-south, django-models

我的一个模型有一个定义为`PositiveSmallIntegerField`. 在描述该表时，我看到它已被定义为`INTEGER`.

我想存储更大范围的值，因此我修改了我的模型以使用`PositiveIntegerField`.

现在，当我运行 South 生成迁移时，它说模型中没有任何变化？我可以清楚地看到我的变化，但 South 忽略了这一点。为什么？

将使用Postgres`PositiveIntegerField`中的字段吗？`BIGINT`Django 是否支持`BIGINT`Postgres 领域？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T19:16:46.900

您可以使用 django 的内置`BigIntegerField`而不是`PositiveIntegerField`.

如果 South 仍然忽略此更改，您可以创建一个[空迁移](http://south.readthedocs.org/en/latest/commands.html#schemamigration)并将以下内容添加到您的`forwards`方法中：

```
db.alter_column('table_name', 'column', self.gf('django.db.models.fields.BigIntegerField')) 
```

希望能帮助到你 ：）

# django - 从用户密码安全生成的加密密钥？

> ID：12935409
> 
> 赞同：1
> 
> 时间：2012-10-17T13:27:45.683
> 
> 标签：django, security, encryption, hash, cryptography

我正在用 MySQL 构建一个 Django 网站。我已经决定使用 Django 内置的 pbkdf2-sha256 和随机生成的盐哈希来存储用户的密码。

但是，该网站还需要为许多其他网站（不使用 oauth）存储第三方登录凭据。所以我一直在研究 AES-256 加密，当然问题在于安全存储加密密钥的位置。

现在这是我的解决方案：让每个加密密钥 = 用户实际密码的哈希值和随机生成的盐值（不同于已用于密码存储哈希值的盐值）。盐将存储在表中，实际密码和它的哈希显然不是。因此，加密密钥将在登录时生成并临时存储，但在注销时过期。此外，如果不破解原始 pbkdf2-sha256 哈希，破坏服务器的人无法生成加密密钥，即使那样，它也只能用于那个用户，而不是通用密钥。

不利的一面是，如果他们更改/重置密码，他们将不得不为每个站点重新输入他们的凭据。但这并不是什么大不了的事，而且似乎比将密钥存储在服务器上的某个地方甚至不同的服务器上更安全。

但我在 24 小时前才知道哈希是什么，所以我知道什么。我是否忽略了某些东西，或者这是否合理安全？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T18:18:52.193

您提到的算法`PBKDF2`实际上是为此明确目的而设计的。

因此，工作流程将是生成随机盐。然后将其存储在用户的数据库中。

使用具有高迭代次数和盐的 PBKDF2，生成 640 位密钥材料（80 字节）。

前 128 位成为密码的 IV

接下来的 256 位成为密码密钥（用于 AES-256 的密钥）

最后的 256 位成为 MAC 密钥（用于验证加密的密钥）。

```
key = PBKDF2-SHA256(password, salt, 50000, 80)
iv = key[0:128]
cipherKey = key[128:384]
macKey = key[384:640] 
```

然后，使用这些密钥（伪代码）加密数据：

```
ciphertext = AES-256-CBC(data, cipherKey, iv)
authtext = SHA256-HMAC(ciphertext, macKey)
result = '{}{}'.format(authtext, ciphertext) 
```

现在，在解密时，只需倒退...

```
key = PBKDF2-SHA256(password, salt, 50000, 80)
iv = key[0:128]
cipherKey = key[128:384]
macKey = key[384:640]

authtext = result[0:32]
ciphertext = result[32:]

if !timingSafeComparison(authtext, SHA256-HMAC(ciphertext, macKey)):
    return false

return AES-256-CBC-DECRYPT(ciphertext, cipherKey, iv) 
```

是的，如果您的用户忘记了密码，所有加密数据都将消失。但这就是你想要的，对吧？

# php - 在 URL 中传递代码

> ID：12935416
> 
> 赞同：2
> 
> 时间：2012-10-17T13:28:08.337
> 
> 标签：php, mysql, apache, web

我在一些网站上看到过，比如 facebook、twitter 和 youtuBe。代码在 URL 中传递，如下例所示。

想知道是否有人知道它背后的完整逻辑（PHP，MYSQL）。提前致谢。

代码：QeAuADr0yL

例如：http: [//instagram.com/p/QeAuADr0yL](http://instagram.com/p/QeAuADr0yL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:36:04.747

```
 http://instagram.com/p/QeAuADr0yL 
```

上面的链接“QeAuADr0yL”指定了基于它获取数据的唯一标识符。这个标识符是通过使用 md5() 或 sha1() 或其他..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:45:27.300

当请求[http://instagram.com/p/QeAuADr0yL](http://instagram.com/p/QeAuADr0yL)被 apache web 服务器解析时，使用 .htaccess 文件中存储的代码，它知道第一个参数值为`p`，第二个参数值为`hdashfdsahgofosa`

您的请求可以翻译为`www.a.com/index.php?p1=a&p2=b`

其中`p1`和`p2`是变量，`a`并且`b`是它们的值

这些值可以使用`$_GET['a']`and`$_GET['b']`方法获得；

我会给你一个完整的 htaccess 文件示例和规则：

```
RewriteRule ^([a-zA-Z-]+)/(product)-([0-9]+)$ index.php?action=$1&product=$3 [NC,L] 
```

`www.a.com/aBcdE/product-1836455`上面的代码在浏览器中看起来像

它被翻译为：

```
$action = aBcde;

$product = 1836455; 
```

第一个参数的值可以在 az 之间和/或 AZ 参数 2 的值在 az AZ 0-9 之间 -

```
Options +SymLinksIfOwnerMatch

RewriteEngine on

RewriteRule ^([a-zA-Z-]+)/(producator)-([0-9]+)$ index.php?action=$1&producator=$3 [NC,L]
RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(producator)-([0-9]+)$ index.php?action=$1&id=$2&producator=$4 [NC,L]

RewriteRule ^([a-zA-Z-]+)/(producatorx)-([0-9]+)$ index.php?action=$1&producatorx=$3 [NC,L]
RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(producatorx)-([0-9]+)$ index.php?action=$1&id=$2&producatorx=$4 [NC,L]

RewriteRule ^([a-zA-Z-]+)$ index.php?action=$1 [NC,L]

RewriteRule ^([a-zA-Z-]+)-([0-9]+)$ index.php?action=$1&id=$2 [NC,L]

RewriteRule ^(tag)/([a-z0-9]+)$ index.php?action=tag&tag=$2 [NC,L]

RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(update)-([a-z0-9]+)$ index.php?action=$1&id=$2&saction=update&code=$4 [NC,L]
RewriteRule ^([a-zA-Z-]+)-([0-9]+)/(delete)-([a-z0-9]+)$ index.php?action=$1&id=$2&saction=delete&code=$4 [NC,L]

RewriteRule ^([a-zA-Z-]+)-([0-9]+)/([a-zA-Z-]+)-([0-9]+)$ index.php?action=$1&id=$2&saction=$3&sid=$4 [NC,L]

RewriteRule ^(.*)-([0-9]+).html$ index.php?action=details&id=$2 [NC,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:32:46.533

您指的是“GET”方法吗？

如果您看到诸如 www.someurl.com/?param=value&otherparam=othervalue 之类的网站，则这称为 GET。

它创建了一个可以在 PHP 中使用类似的东西访问的数组

```
 <?php echo $_GET["param"]; ?> 
```

这将打印出参数的值，在本例中为“值”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:37:59.193

在 URL 中传递的最常见的代码是哈希。有不同的算法，大多数人使用 md5 但有更安全的算法。您可以制作散列，然后如果您想根据散列的正确性限制对页面的访问，您可以检查该值。

url.com?x=5273909c02b8ce7ae42a4e21542b3326

```
if( $_GET['x'] == md5('hashcode') ) {
   // it matches
}else{
   // it doesn't
} 
```

还有其他的算法，[这里有一些文档。](http://php.net/manual/en/ref.hash.php)

当通过 .htaccess 文件用作路径的一部分时，您可以从 URL 中获取这些信息。

用于这些特定站点的特定算法可能是自定义的，但 PHP 中有许多预设函数可以让您模仿这一点。

要生成较短的字符，您可以使用 substr() 函数获取前几个所需字符，并使用数据库确保没有冲突。创建新代码时，将其截断到所需的长度并查询数据库以查看它是否已被使用，如果没有则插入。

或者您可以自己编写并使用与数据库相同的过程来确保没有冲突。

如果你有很多散列，你可能需要一些时间来制作一个包含所有字母和数字的好的随机字符串生成器，你的散列越短，冲突的机会就越大，可能的组合池就越小. 使用 md5 将可能的字符从 15^（使用的字符）增加到 36^（使用的字符）将***大大***增加您的可能组合池。

# jquery - 在 CanJs 中查找附加到元素的控件的名称

> ID：12935418
> 
> 赞同：2
> 
> 时间：2012-10-17T13:28:12.350
> 
> 标签：jquery, javascriptmvc, canjs, canjs-control

我正在使用 Canjs 构建我的 Web 应用程序。现在我在处理它时遇到了一个问题。

控制器在单个 HTML 元素上发生更改，并且附加到该特定元素的控制器在附加新控制器时不会被销毁。所以我决定在我附加其他东西之前销毁所有附加的控制器。

我有两个查询

1.  如何在特定元素上找到附加的控制器？因为 .controller() 不起作用

2.  我怎么称呼毁灭？

请帮助我提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:56:43.680

如果您使用的是[can.Control.plugin](http://canjs.us/#plugins-can_control_plugin)插件，则应该可以通过调用来访问元素上的所有控件`$(element).controls()`。

# ios - 如何将静态数据添加到 Core Data？

> ID：12935425
> 
> 赞同：1
> 
> 时间：2012-10-17T13:28:22.693
> 
> 标签：ios, core-data

我在我的应用程序中使用了核心日期。我搜索了核心数据函数。我学习了从核心数据中添加和获取数据。但我想静态添加我的数据。所以我想将数据添加到核心数据（不是在代码中，它们是默认数据）并在应用程序委托中使用它们。但我无法手动添加数据。那么有没有人可以帮助我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:00:37.397

您始终可以检查实体中是否存在对象，`CoreData`如果为空，则将对象添加到该实体（这将防止重复）。话虽如此，如果您在谈论在您的应用程序中拥有静态数据，为什么不使用`PList`? `CoreData`对于那种场景来说真的是矫枉过正。

顺便说一句 - 如果您没有使用[过 MagicalRecord](https://github.com/magicalpanda/MagicalRecord)（CoreData 辅助类），您应该检查一下。它使使用 CD 更容易 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:13:21.810

CoreData 本身无法预先打包任何数据，以便与应用程序一起交付。您必须将其打包成另一种格式，发布应用程序，然后在首次启动时将其全部复制到核心数据中。

例如，您可以在您的开发计算机上创建一个`.plist`文件，将其读入一个`NSDictionary`.，然后填充您的 CoreData 存储。或者，如果您能从所有这些额外的结构中受益，您也可以对本土 SQLite 商店做同样的事情。如果你真的很勇敢，你甚至可以从 Web 服务中提取数据。天空才是极限！

最后，您可能会考虑向 Apple 提交功能请求。在这种情况下，您的请求将作为请愿书上的签名，增加了数以千计多年来渴望类似功能的其他开发人员。

# objective-c - 在 mac 上将帧导出为视频

> ID：12935427
> 
> 赞同：0
> 
> 时间：2012-10-17T13:28:27.013
> 
> 标签：objective-c, macos, cocoa, video, mov

我使用 Black Magic SDK 管理从视频卡捕获视频帧。我可以存储视频帧。

我不知道如何从捕获的帧中导出（渲染）视频文件。我想从他们创建一个 .mov 视频并将其存储在硬盘上。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:39:01.890

查看[FrameByFrame 源代码](https://github.com/brend/FrameByFrame)，尤其是[FBQuickTimeExporter](https://github.com/brend/FrameByFrame/blob/master/Classes/FBQuickTimeExporter.m)类。`NSImage`此代码以所需的帧速率从单个对象生成电影（包装在`FBReel`对象中，但您可以忽略它）。

# asp.net - PetaPcoro T4 模板编译错误

> ID：12935429
> 
> 赞同：0
> 
> 时间：2012-10-17T13:28:27.910
> 
> 标签：asp.net, petapoco

我在我的数据库上运行 PetaPoco 模板 T4，它会生成以下错误：

```
Running transformation: System.InvalidOperationException: Sequence contains more than one     matching element 
```

从文件'database.tt报告

我的数据库建模正确，但是大多数表都没有记录，尽管我认为这与它无关，是吗？

我正在查询 MySQL 本地数据库。我在 web.config 中设置了连接字符串，这是 web.config 文件中唯一的连接字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:19:48.667

昨天我有同样的问题，我也使用 MySQL 和最后一个 Nuget 包。首先，我发现生成适用于所有数据库，我尝试了[官方页面](http://www.toptensoftware.com/petapoco/)的解决方案：

```
DatabaseName = "name"; 
```

但是我发现它不理解变量`DatabaseName`，现在它调用了`SchemaName`. 这修复了未知表上的错误。

其次我发现它在具有多个PK的表上抛出异常，因此`Database.cs`在T4模板编译后打开并检查最后一个表。我的解决方案是从主键中删除生成`PetaPoco.Generator.ttinclude`，然后手动编辑。

此外，您可以查看：[在 PetaPoco 中，如何装饰具有多列主键的表](https://stackoverflow.com/questions/7258553/in-petapoco-how-to-decorate-a-table-that-has-multi-columns-primary-keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:39:54.163

您是否有更多信息，例如堆栈跟踪？VS 通常会为我找到错误的位置，但有时会在实际模板解析开始之前出现初始错误。您没有不小心在配置文件中制作了连接字符串的第二份副本吗？

# mysql - 括号内选择不为空

> ID：12935441
> 
> 赞同：3
> 
> 时间：2012-10-17T13:28:54.600
> 
> 标签：mysql

我不太确定如何做到这一点：

```
SELECT contacts.first_name,
       contacts.last_name,
       (
            SELECT quotes.id
            FROM quotes 
            LEFT JOIN quotes_contacts ON quotes.id = quotes_contacts.quote_id
            WHERE quotes.id IS NOT NULL
            AND quotes_contacts.contact_id = contacts.id
            ORDER BY quotes.date_entered
            LIMIT 1
        ) AS 'first_quote'
FROM
contacts 
```

但是返回 as 的一些值`first_quote`被返回为`null`. 我怎么能阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:31:58.413

而不是一个子选择，对子查询使用一个`INNER JOIN`。这将消除 NULL。

```
SELECT contacts.first_name,
       contacts.last_name,
       quote_id AS first_quote
FROM 
  contacts 
  INNER JOIN (
    SELECT quotes.id, quotes_contacts.contact_id
    FROM 
     quotes 
     LEFT JOIN quotes_contacts ON quotes.id = quotes_contacts.quote_id
     JOIN (
       SELECT quotes_contacts.contact_id, MIN(quotes.date_entered) AS date_entered
       FROM 
             quotes 
         JOIN quotes_contacts ON quotes.id = quotes_contacts.quote_id
         GROUP BY contact_id
     ) minquote ON quotes.date_entered = minquote.date_entered AND qc.contact_id = minquote.contact_id
   ) firstquote ON contacts.id = firstquote.contact_id 
```

如果您*确定*`quote.id`是递增的，并且最低的`quote.id`per`contact_id`也具有最早的，这可能会更简单`date_entered`。在这种情况下，你可以做一个`MIN(quote.id)`

```
SELECT contacts.first_name,
       contacts.last_name,
       quote_id AS first_quote
FROM 
  contacts 
  INNER JOIN (
    SELECT MIN(quotes.id) AS quote_id, quotes_contacts.contact_id
    FROM quotes
    LEFT JOIN  quotes_contacts ON quotes.id = quotes_contacts.quote_id
    GROUP BY contact_id
  )minq ON contacts.id = minq.contact_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:33:44.457

如果子选择找到一行并且值为`id`空，则您的`WHERE`子句会阻止它被返回。但是每当子选择根本没有找到任何东西时， 的值`first_quote`仍然是空的。外面的额外警卫应该可以解决问题：

```
SELECT contacts.first_name,
       contacts.last_name,
       (
            SELECT quotes.id
              FROM quotes 
              LEFT JOIN quotes_contacts ON quotes.id = quotes_contacts.quote_id
             WHERE quotes.id IS NOT NULL
               AND quotes_contacts.contact_id = contacts.id
             ORDER BY quotes.date_entered
             LIMIT 1
        ) AS 'first_quote'
 FROM contacts
WHERE first_quote IS NOT NULL 
```

但是这里的 JOIN 比子选择更有效。

# google-analytics - Google Analytics for Mobile - 在实时服务器上显示的网页浏览量等于唯一身份访问者

> ID：12935442
> 
> 赞同：1
> 
> 时间：2012-10-17T13:29:02.667
> 
> 标签：google-analytics, pageviews

我在我的移动网站上实施了带有图像跟踪方法的谷歌分析。当我从本地服务器浏览时，谷歌跟踪工作正常，我发现黑白页面浏览量和唯一访问者存在差异。但是当我在生产服务器中浏览时，谷歌跟踪显示页面浏览量和唯一身份访问者的数量相同。以下是生产服务器的详细信息。请给我建议。

服务器详情：

操作系统：Ubuntu 10.04.2 Apache/2.2.14 PHP 5.3.2-1 Memcache 1.4.2 NFS 3 Rysnc 3.0.7 Varnish 2.1

# bash - 在 bash 脚本中访问第 9 个之后的命令行参数

> ID：12935444
> 
> 赞同：2
> 
> 时间：2012-10-17T13:29:08.277
> 
> 标签：bash, parameter-passing

我正在尝试在 bash 中读取命令行参数，但在第 10 列有问题要阅读。这是我的示例脚本：

```
#-------------------------------------------------------
#!/bin/bash
an=$2  mn=$4  dy=$6  der=$8  new=$10  sec=(${12} ${13})
echo $an $mn  $dy   $der  $new  $sec 
#-------------------------------------------------------- 
```

我已将上述脚本“test.sh”运行为

```
./test.sh -yr cat  -mn Jan  -dy  tuesday  -der tt  -new car -sec 001 001 
```

输出是：

```
cat Jan tuesday tt -yr0 001 
```

但是对于变量 $new ($10) 答案应该是`car` ，但我得到了`-yr0`

知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:34:47.363

`new=$10`给你`$1`（即'yr'）附加`0`。你需要一些大括号：`${10}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T13:39:45.203

这是修复：

```
#!/bin/bash
an=$2  mn=$4  dy=$6  der=$8  new=${10}  sec="${12} ${13}"
echo $an $mn  $dy   $der  $new  $sec 
```

1.  使用 ${10} 而不是 $10，即附加 0 的“$1”
2.  sec="..." 而不是使用括号，除非您打算使用数组

# php - 在不使用 xml 命名空间的情况下保存外部 xml 文件的副本

> ID：12935451
> 
> 赞同：1
> 
> 时间：2012-10-17T13:29:23.527
> 
> 标签：php, javascript, xml, namespaces

> **可能重复：**
> [如何检测和删除 PHP DOM 中不必要的 xmlns:<something> 属性？](https://stackoverflow.com/questions/3810569/how-to-detect-and-remove-unnecessary-xmlnssomething-attributes-in-php-dom)

也许你可以帮我解决这个问题。我在外部服务器上有一个 XML 文件，我只能通过浏览器中的 https 连接访问该文件（外部 XML 由外部公司提供）。我想将它保存为我网站的网络服务器上的新 XML 文件，但没有某些元素，例如名称空间声明（因为我想在 dreamweaver 中使用 XSL 进一步处理 CML）。如何在 PHP 或 Javascript 中执行此操作？我不是真正的程序员，但我知道 Javascript 和 PHP 足以做简单的事情。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:38:49.977

这段代码应该可以解决问题。只需替换数据以满足您的需求。

```
$feed = file_get_contents("http://www.sitepoint.com/recent.rdf");
$feed = preg_replace("/<.*(xmlns *= *[\"'].[^\"']*[\"']).[^>]*>/i", "", $feed); // This removes ALL default namespaces.
$xml_feed = simplexml_load_string($feed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:35:04.463

您可以使用 curl 或 file_get_contents（我更喜欢 curl）检索文件，然后使用 preg_match_all 或任何其他替换选项处理结果，以删除命名空间引用、定义和您需要的任何其他部分。

再见

# ios - iOS：在堆栈上创建 UITableview 单元格

> ID：12935452
> 
> 赞同：0
> 
> 时间：2012-10-17T13:29:28.157
> 
> 标签：ios

我以编程方式创建 UITableview 和单元格。当我创建单元对象时，它是否存储在堆栈内存中？它是否为我创建的每个单元对象存储在堆栈中？我想优化代码，所以想从技术上了解通过程序创建表格视图单元格时发生了什么。

请指教！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:53:39.680

Objective-C 中的所有对象都是在堆中创建的。

使用标准方法使可重用单元出队，系统将有效地重用它们，而不是在单元离开屏幕和新单元进入时分配新单元。

这是苹果文档的链接：

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

# android - 如何根据存储在 int 数组中的值查询 android 数据库？

> ID：12935453
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:29:29.763
> 
> 标签：android

我有一个整数数组说 int [] arr ={1,2,3,4,5,6} 。我有一个名为 student 的表，其中它们是一个名为 id 的列（包含 int 值，例如 1,2,6,7,8,12,13）。我想从数组 arr 中获取与任意数字匹配的所有行。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:46:48.987

首先从数组中创建一个字符串 String 应该包含

字符串 str = "1,2,3,4,5,6"; //取决于数组中的元素个数

```
SELECT * FROM tableName WHERE id IN (str) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T13:38:00.227

你应该给出更多的解释。你使用什么数据库？

你可以在 sql 中做一个简单的查询，例如：

```
SELECT 1,2,3,4,5,6 FROM student 
```

# javascript - 当我点击一个按钮时，onClick 函数没有被触发

> ID：12935456
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:29:34.803
> 
> 标签：javascript, jquery, onclick, prestashop

我正在尝试执行一个简单的函数，该函数显示 a`alert(message)`并`false`在用户使用此 HTML 标记单击特定按钮时返回

```
<input type="submit" class="online" id="comprar_boton" value="Agregar al carrito" name="Submit"> 
```

所以我构建了这段代码：

```
$('#comprar_boton').live('click', function(){
    alert("Recuerda que para comprar necesitas escoger la cantidad!");
    return false;
}); 
```

我使用 live() 因为它是 Prestashop 主题并且它使用 jQuery 1.4.4。我也测试了这个：

```
$("#comprar_boton").click(function(){
    alert("Recuerda que para comprar necesitas escoger la cantidad!");
    return false;
}); 
```

但没有一个对我有用。我一次又一次地检查我的代码，寻找一些错误，但什么也找不到。你可以在[这个网站上](http://sandbox.tiendaleones.com/189-banderin-logo-home-club.html)在线查看。我正在寻找的是当任何用户或访问者点击“Agregar al carrito”按钮时，会弹出一个警报弹出窗口，在这种情况下会说

> Recuerda que para comprar necesitas escoger la cantidad！

现在，这真的很有趣，因为我在同一个文件中有另一个类似于此处的代码，但是当我单击 ID = #comprar_boton_no 的按钮时触发了这个代码并且这个代码有效。HTML 标记几乎相同：

```
<input type="submit" id="comprar_boton_no" value="Agregar al carrito" name="Submit"> 
```

相关的 jQuery 代码是这样的：

```
$("#comprar_boton_no").click(function(){
    alert("Recuerda que para comprar necesitas escoger la talla y la cantidad!");
    return false;
}); 
```

这个可以在这个[地址](http://sandbox.tiendaleones.com/191-banderin-logo-coporativo-azul.html)测试。所以我现在完全迷失了。我的代码有什么问题？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:36:37.803

你把点击事件放在里面了`$(document).ready`吗？

如果没有，请尝试：

```
$(document).ready(function () {
    $('#comprar_boton').click(function (event) {
        alert("Recuerda que para comprar necesitas escoger la cantidad!");
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:33:49.880

Make sure the page is loaded before you assign a click handler.

```
$(document).ready(function() {
    $("#comprar_boton").click(function(){
        alert("Recuerda que para comprar necesitas escoger la cantidad!");
        return false;
    });
}) 
```

Or

```
$(document).ready(function() {
    $('#comprar_boton').live('click', function(){
        alert("Recuerda que para comprar necesitas escoger la cantidad!");
        return false;
    });
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T13:36:46.347

如果您想在特定元素上随时启用点击处理程序，请使用[JQuery.on](http://api.jquery.com/on/)方法：

```
 $(document).on("click", "#comprar_boton", function(e){
        e.preventDefault();
        alert("Recuerda que para comprar necesitas escoger la cantidad!");
    }); 
```

# cakephp - Cakephp 模型未链接到其表的所有字段

> ID：12935458
> 
> 赞同：0
> 
> 时间：2012-10-17T13:29:39.083
> 
> 标签：cakephp, webforms

我有一个我在本地机器上开发的 PHP 应用程序，最近已经放到服务器上。

一切正常，直到我在我的一个数据库表中创建了一些新字段。它们是布尔值（tinyInt1），所以在添加/编辑表单中我得到一个复选框。

这些字段是在网站上线后创建的，因此我在本地计算机和服务器上同时创建了它们。我本地机器上的应用程序找到这些新字段并“*自动*”在我的表单上创建复选框，但在服务器上，就好像模型没有检测到表中存在这些字段。

我用了：

```
print_r($this->Model->getColumnTypes()); 
```

确认这一点，果然服务器上的模型似乎不知道这些新字段，即使在我的本地机器上它也知道。

我对这个有点难过。我使用 CakePHP 已经有一段时间了，但我不是专家，所以我确信我一定只是忽略了一些东西......

编辑：解决了。在修复的服务器上将 debug 设置为 1 会导致模型开始从新的数据库字段中获取所有数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:33:52.643

Clear your model cache. Files in `app/tmp/cache/models/` folder.

# c# - EventHandler完成时导航到页面？

> ID：12935459
> 
> 赞同：1
> 
> 时间：2012-10-17T13:29:39.343
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-7.1.1

所以我试图在 WP7 中做一件非常简单的事情，比如：

MainPage中的一个按钮将启动相机，当相机成功拍照时，我想将图片传递给SecondPage并启动它。

这是我的代码：

在 MainPage 构造函数中，我初始化相机任务并设置委托：

`camTask.Completed += new EventHandler<PhotoResult>(camTask_Completed);`

然后我实施了`camTask_Completed`

```
 void camTask_Completed(object sender, PhotoResult e)
    {
        //throw new NotImplementedException();

        img = PictureDecoder.DecodeJpeg(e.ChosenPhoto);
        NavigationService.Navigate(new Uri("/SecondPage.xaml", UriKind.Relative));
    } 
```

该应用程序将在我拍照后按“接受”之前正常运行。

异常说：

`Exception {"Navigation is not allowed when the task is not in the foreground."} System.Exception {System.InvalidOperationException}`

我的理解是我不应该在方法中启动 SecondPage `camTask_Completed`。

那么我的问题是：如何在 EventHandler 的结果上启动另一个页面？

谢谢

**更新：（**有关此子问题的答案，请参阅此页面中的此[评论](https://stackoverflow.com/questions/12935459/navigate-to-a-page-when-eventhandler-compelete/12935907#comment17532242_12935907)）

单击按钮后我发现另一个错误（启动相机）：

它抛出一个异常说：

`"Type 'System.Windows.Media.Transform' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute."`

我在哪里可以序列化这些`Transform`东西？

我在谷歌上做了一些搜索，发现[了这个](http://social.msdn.microsoft.com/Forums/eu/csharpgeneral/thread/2b0a624e-17cc-4c0d-936c-aa00d3a5256e)：

> 找到了答案，错误实际上也暗示了它:)
> 
> [数据合约]
> 
> [KnownType(typeof(System.Windows.Media.MatrixTransform))]

似乎它可以解决这个问题，但我应该把这些线放在哪里？

这是我在 MainPage 上将图像传递给 SecondPage 的代码，`img`是`WriteableBitmap`：

```
 protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);
        var brush = new ImageBrush();
        brush.ImageSource = img;
        PhoneApplicationService.Current.State["bkg"] = brush;
    } 
```

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:36:38.547

也许您应该尝试使用调度程序：

```
activePage.Dispatcher.BeginInvoke(
     () => NavigationService.Navigate(new Uri("/SecondPage.xaml", UriKind.Relative))); 
```

这适用于 MetroApps。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:50:55.603

这是 CameraCaptureTask 的一个已知问题。
这是我使用的解决方法：

```
 void OnCameraCaptureTaskCompleted(object sender, PhotoResult args)
    {
        //Delay navigation until the first navigated event
        NavigationService.Navigated += new NavigatedEventHandler(navigateCompleted);
    }

    void navigateCompleted(object sender, EventArgs e)
    {
        //Do the delayed navigation from the main page
        this.NavigationService.Navigate(new Uri("/Page1.xaml", UriKind.Relative));
        NavigationService.Navigated -= new NavigatedEventHandler(navigateCompleted);
    } 
```

# phpmyadmin - PHPMyAdmin 创建页面之间的关系不起作用

> ID：12935460
> 
> 赞同：0
> 
> 时间：2012-10-17T13:29:42.103
> 
> 标签：phpmyadmin

您好我正在尝试在 phpMyAdmin 中创建两个数据库表之间的关系：

用户

用户 ID，用户名，用户密码

轮廓

profile_id , profile_name , profile_email , 个人资料地址 , user_id

单击创建关系按钮后，系统会要求我创建一个引用键，然后单击 USERS 表 user_id。之后，我被要求设置一个外国 id 并选择配置文件 user_id。接下来会出现一个带有两个按钮和一个标签的框，上面写着“创建关系”以及“确定”和“取消”按钮。我单击“确定”按钮但没有任何反应。我已经尝试这样做了十几次，但没有成功。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T12:02:38.983

The information surrounding the question is a bit weak, what storage engine is used etc. But I had a similar problem just now and the reason for it not working was because the referring key did not have an index. Usually this is handled automatically (I think phpMyAdmin is responsible for this but I do not know) but in some cases one will manually have to add the index to make it work.

# php - PHP MongoDB查询到具有未知键的数组

> ID：12935461
> 
> 赞同：0
> 
> 时间：2012-10-17T13:29:45.303
> 
> 标签：php, mongodb, key

我有一个这样的mongoDB设置：

```
fieldName: {
  "1": {
      client: "name-here",
      subfield: "more-junk-here"
   },
   "2": {
      client: "another-client-name-here",
      subfield: "more-data"
   },
   "3": {
      client: "client-num-3",
      subfield: "i-like-turkey-sandwiches"
   }
} 
```

如何查询“i-like-turkey-sandwiches”，而不知道它在第 3 位，也不搜索整个文档？我开始写这个，但我完全不知道如何进行搜索......

```
$cursor = $collection->findOne(array('fieldName' => 'i-like-turkey-sandwiches)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:41:05.510

（编辑：我的回答只有在 fieldName 内容是子文档数组而不是以“1”/2/3 作为键和子文档作为值的文档时才有效）

如果您查询

```
$cursor = $collection->findOne(
              array('fieldName.subfield' => 'i-like-turkey-sandwiches')); 
```

它将返回您在 fieldName 字段中具有该值的子字段的所有文档。

# logging - 有没有办法拦截来自 SAP PI 的出站消息？

> ID：12935464
> 
> 赞同：2
> 
> 时间：2012-10-17T13:29:47.277
> 
> 标签：logging, sap, trace, sap-xi, sap-pi

有什么方法可以拦截来自 SAP NetWeaver PI 7.1 和 7.3 的传出消息？最好的选择是在将消息转换为特定协议的表示之前（即在从 XML 转换为 SOAP/RFC/等之前）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-18T18:59:29.830

我猜你的意思是“拦截”来跟踪传出的消息有效负载。

您可以在 googe 代码上查看此审核记录器模块，该模块将有效负载写入您的审核日志以进行调试 ： [https](https://code.google.com/p/sap-process-integration/) ://code.google.com/p/sap-process-integration/ 下载：[https://code。 google.com/p/sap-process-integration/downloads/detail?name=AuditLogger.zip&can=2&q=](https://code.google.com/p/sap-process-integration/downloads/detail?name=AuditLogger.zip&can=2&q=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T11:52:35.630

请解释“拦截”的含义。至少有三个选项可用： 1\. 只需从 PI 复制任何（或特定）传出消息，导出到某个文件位置或发送到特殊系统，而不将消息传递给原始接收者 2\. 与 1) 相同但传递到原始接收器。3.从监控（历史）中提取消息

pp 1 和 2 可以通过映射的更改来实现，依此类推。

# javascript - 在动态添加的锚点上调用点击事件

> ID：12935467
> 
> 赞同：2
> 
> 时间：2012-10-17T13:29:53.957
> 
> 标签：javascript, jquery

再会，

请协助：我正在将列表项添加到无序列表中。在列表项中，我有一个没有 ID 的锚点。我正在尝试调用 click 事件处理程序，但显然我做错了什么。

列表项渲染：

```
this.RenderMeNav = function (params) {
        var ul, li, a, heading;
        var me = ARRAY.Search({
            List: params.Permissions,
            Properties: ["Group"],
            Value: "me"
        });
        heading = $("<a href=\"javascript:void(0);\" class=\"heading\">Me<span class=\"icon-vertical icon-up\"/></a>");
        ul = $("<ul />");
        for (var p in me) {
            li = $("<li></li>");
            a = $("<a href=\"" + me[p].Url.replace("~/", "") + "\">" + me[p].Name + "</a>");
            a.click(function (e) {
                ShowProcessing();
                ifrm.document.location.href = $(this).attr("href");
                e.preventDefault();
            });
            li.append(a);
            ul.append(li);
        }
        $("#menu").append(heading);
        $("#menu").append(ul);
    }; 
```

然后当点击其他东西时，我调用这个函数：

```
this.OpenSection = function (params) {
        $("#menu li").each(function () {
            if ($(this).text().toLowerCase() == params.Name.toLowerCase()) {
                $(this).click(); //I FOUND THE ANCHOR AND NOW I WANT TO INVOKE IT'S CLICK EVENT
            }
        });
    } 
```

我尝试了其他类似问题的一些建议，但无济于事。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:39:46.787

为了触发已经定义的点击事件，您需要使用函数[trigger()](http://api.jquery.com/trigger/)，

因此，将您的代码更改为：

```
this.OpenSection = function (params) {
        $("#menu li").each(function () {
            if ($(this).text().toLowerCase() == params.Name.toLowerCase()) {
                $(this).trigger('click'); //I FOUND THE ANCHOR AND NOW I WANT TO INVOKE IT'S CLICK EVENT
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:52:20.147

您将事件附加到锚点，但触发了对列表项的单击。尝试找到列表项中的锚点并触发它的点击：

```
this.OpenSection = function (params) {
        $("#menu li").each(function () {
            if ($(this).text().toLowerCase() == params.Name.toLowerCase()) {
                $(this).find("a").trigger("click");
            }
        });
    } 
```

# jruby - JRuby - TypeError：#没有公共构造函数

> ID：12935470
> 
> 赞同：0
> 
> 时间：2012-10-17T13:30:08.113
> 
> 标签：jruby

我正在尝试按照以下代码通过 JRuby 1.7 RC2 使用 java.security.KeyPairGenerator：

```
require 'java'
kp = java.security.KeyPairGenerator.getInstance("RSA")
puts kp #java.security.KeyPairGenerator$Delegate@45f177b 
```

但是，当我尝试调用初始化即

```
kp.initialize(2048) 
```

我得到以下异常： -

```
TypeError: no public constructors for #<Class:0x7efe8e7a> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:49:20.887

`initialize`这是 ruby​​ 的方法（它是 ruby​​ 世界中的构造函数）和这个特定 java 类中 的方法之间的一点冲突。

通常，不会调用`initialize`ruby​​ 类（而是调用`new`），但无论如何，它似乎给解释器造成了一些混乱。

如果您查看输出，`kp.methods`您会看到 JRuby 添加了一个`initialize__method`来规避冲突（注意双下划线）。

试试这个：

```
require 'java'
kp = java.security.KeyPairGenerator.getInstance("RSA")
kp.initialize__method(2048) 
```

另一种技术是使用[java_method](https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby)，当解释器无法选择正确的重载时，它也很有用。

例如：

```
m = kp.java_method :initialize, [Java::int]
m.call(2048) 
```

# ios - 在 UITableViews 中处理数据或这样做的正确方法

> ID：12935474
> 
> 赞同：0
> 
> 时间：2012-10-17T13:30:25.000
> 
> 标签：ios, uitableview

我有一个名为 test 的对象，它有很多属性。现在我的 RootViewController 有一个表，其中填充了 Array1.(Array1 contains testObject) .Array1 在用户添加对象时填充。现在，当我单击每个单元格时，我打开 ViewController 2。现在在 ViewController 2 中，我有一个名为 Array2 的数组，它是一个 [array of arrays]。所以，它就像 firstView 是文件夹，而 secondView 是关于文件夹内的项目。每当用户添加时，Array2 也会填充相同的 testObject。

现在我使用本地通知对文件夹内的这些项目设置提醒，对于用户设置的所有提醒，我将所有项目放在另一个名为 AlarmArray 的数组中，当本地通知弹出时，我打开另一个名为 AlarmViewcontroller 的ViewController并显示设置了警报的项目。在此 AlarmViewcontroller 中，项目可以来自任何文件夹。现在，当打开 AlarmViewcontroller 时，用户可以删除单元格。

现在问题来了，当用户从 AlarmViewController 中删除项目时，它也应该从 Viewcontroller2 中删除。这里我不明白，如何执行此过程，因为项目可以来自任何文件夹，并且它们可以是项目同名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:54:17.660

尝试使用：

```
[[NSNotificationCenter defaultCenter] postNotificationNamed:@"deleteReminder" withObject:strMyReminderName]; 
```

在您的 ViewController2 中为该通知添加一个观察者，并使用回调方法从 ViewController2 中删除提醒：

```
[[NSNotificationCenter defaultCenter] addObserver....];

-(void)deleteReminderCallback:(NSNotification *)notification
{
    NSString *strReminderName = [notification object];

   // use strReminderName to target and delete the correct reminder
} 
```

# visual-c++ - 如何用visual c++ express 2010构建C源代码？

> ID：12935478
> 
> 赞同：0
> 
> 时间：2012-10-17T13:30:30.187
> 
> 标签：visual-c++, compilation

我有想用 Visual Studio 2010 构建的 C 源代码。它引用了两个库，我认为我已将它们正确添加到我的项目中，请参见图像。

据我了解，我应该将源文件重命名为 name.c 以便编译为 C。当我构建我的解决方案时，我在 AssemblyInfo.cpp 上得到一个未定义的命名空间错误。

我该如何解决这些错误？

请注意，我还有一个 .OBJ、.LIB 和 .MAK 文件与该程序一起使用。打开 .MAK 文件时，出现以下错误：

编辑：

我将该项目重新创建为 Win32 控制台项目。编译解决方案时出现以下错误：

```
1>------ Build started: Project: SerialCommWin32, Configuration: Debug Win32 ------
1>  SerialCommWin32.cpp
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\asynch_1.h(44): error C2143: syntax error : missing ',' before '*'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\asynch_1.h(73): error C2143: syntax error : missing ',' before '*'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(272): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(272): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(272): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(272): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(272): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(447): error C2664: 'wrtst_a1' : cannot convert parameter 4 from 'uint *' to 'int *'
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(454): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(454): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(454): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(454): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(454): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(464): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(464): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(464): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(464): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(464): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(464): error C2143: syntax error : missing ';' before '{'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(491): error C2664: 'wrtst_a1' : cannot convert parameter 4 from 'uint *' to 'int *'
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(498): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(498): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(498): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(498): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(498): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(508): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(508): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(508): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(508): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(508): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(508): error C2143: syntax error : missing ';' before '{'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(532): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(546): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(585): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(710): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(728): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(746): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(765): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(779): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(779): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(779): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(779): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(779): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(782): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(782): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(782): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(782): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(782): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(946): warning C4309: '=' : truncation of constant value
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(1364): error C2664: 'rdst_a1' : cannot convert parameter 3 from 'uchar *' to 'char *'
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(1393): error C2146: syntax error : missing ')' before identifier 'far'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(1393): error C2065: 'far' : undeclared identifier
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(1393): warning C4197: 'volatile long' : top-level volatile in cast is ignored
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(1393): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(1393): error C2059: syntax error : ')'
1>c:\users\jgoddijn\documents\development\vanduijnen\serialcommwin32\serialcommwin32\serialcommwin32.cpp(1393): error C2143: syntax error : missing ';' before '{'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:44:33.760

编译器可能并不真正关心文件扩展名。您可以查看项目的设置：`C/C++ -> Advanced -> Compile As`然后选择`C Code`（尽管有效的 C 代码也应该是有效的 C++ 代码）。

此外，`AssemblyInfo.cpp`它仅适用于 C++/CLI 项目。因此，删除该文件或将其从构建中排除。

看起来将项目创建为 C++/CLI 项目，因此您可能需要编辑更多项目设置，或者（最好的解决方案 IMO）将项目文件重新创建为本机 C/C++ 项目（如*Win32 项目*或*Win32 控制台应用*）。

# c# - 将屏幕纹理存储在 HLSL 纹理变量 (XNA) 中

> ID：12935479
> 
> 赞同：2
> 
> 时间：2012-10-17T13:30:36.310
> 
> 标签：c#, xna, xna-4.0, hlsl

有什么方法可以将屏幕纹理存储在 HLSL 纹理变量中，而无需从 C# 代码中传递它？

例如，当前正在溺水的纹理可以通过使用

```
sampler TextureSampler : register(s0); 
```

有什么方法可以对当前屏幕上的内容做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T13:41:25.743

不，我假设您使用的是 SpriteBatch，因此寄存器 0 隐式设置为当前纹理。要获取屏幕上的当前像素，您必须将所有内容绘制到渲染目标，然后将该渲染目标传递给您的 HLSL。

# java - 我可以强制额外运行预定的执行吗？

> ID：12935481
> 
> 赞同：7
> 
> 时间：2012-10-17T13:30:43.173
> 
> 标签：java, concurrency, scheduledexecutorservice

我有一个 singleThreadExecutor，我正在用这样的 scheduleFixedDelay 喂一个 Runnable

```
Runnable periodic = new Runnable() { ... }

ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
executor.scheduleWithFixedDelay(periodic, 1, 1, TimeUnit.MINUTES); 
```

它将在两次执行之间延迟 1 分钟运行。问题是，有时我需要“按需”运行它。那可能吗？

我考虑过取消执行，运行 Runnable 并重新启动执行，但我真正想要的是一些简单的方法，它只是提前执行 Runnable 并重新安排它在一分钟内再次运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:34:36.997

当您希望任务运行时，您可以提交它

```
executor.submit(periodic); 
```

或延迟添加

```
executor.schedule(periodic, delay, units); 
```

# sql-server - SSIS：刚开始收到“密钥在指定状态下无效”。我计划的 SSIS 包上的错误

> ID：12935483
> 
> 赞同：10
> 
> 时间：2012-10-17T13:30:52.560
> 
> 标签：sql-server, sql-server-2005, ssis, ibm-midrange, bids

我在我的 SQL Server 2005 机器上安排了 2 个计划作业，这些作业计划在每天早上（凌晨 2:00 左右）运行。这些工作（大部分）多年来一直运行良好，虽然我遇到了一些小问题，但我不得不解决这个问题，这完全让我感到难过。

前两天早上，我的一个包开始报以下错误：

```
Executed as user: [Service Acount]. ...n 9.00.4035.00 for 32-bit
Copyright (C) Microsoft Corp 1984-2005\. All rights reserved.
     Started:  1:15:01 AM  Error: 2012-10-17 01:15:03.98
     Code: 0xC0016016
     Source:
       Description: Failed to decrypt protected XML node "DTS:Password" 
       with error 0x8009000B "Key not valid for use in specified state.". 
       You may not be authorized to access this information. This error 
       occurs when there is a cryptographic error. Verify that the 
       correct key is available.  End Error  Error: 2012-10-17 01:15:03.99
     Code: 0xC0016016
     Source:
       Description: Failed to decrypt protected XML node "DTS:Password" 
       with error 0x8009000B "Key not valid for use in specified state.". 
       You may not be authorized to access this information. This error 
       occurs when there is a cryptographic error. Verify that the 
       correct key is available.  End Error  Error: 2012-10-17 01:15:04.01
     Code: 0xC0016016     
Source:       
Description: Failed to ...  The package execution fa...  The step failed. 
```

这似乎是一个常见问题，但是，我发现的任何建议都不适用于我的场景，我的实例似乎也不匹配发生这种情况的大多数其他情况。以下是有关我的实施的重要细节。

*   该软件包将数据从 iSeries 系统导出到 SQL Server 2005 数据表。
*   此过程成功运行，但在一个特定的表导出时不断崩溃。事实上，它在死亡之前运行了 2 个多小时没有任何问题。检查与此步骤关联的所有属性后，我可以看到与其他表导出步骤相比，此步骤没有什么不同，除了表/列导出映射。
*   该软件包`ProtectionLevel`设置为`DontSaveSensitive`，并且 iSeries 凭据存储在 SQL Server 访问的配置文件中。
*   我可以在我的机器上执行失败的步骤，在 BIDS 中。无论如何，它在服务器上不起作用，尽管服务器使用完全相同的凭据。
*   正如我所提到的，我有两个包。它们实际上是一回事，除了一个是从一个 iSeries 数据库导出数据，另一个是从另一个 iSeries DB 导出几乎完全相同结构的数据。第一个包没有任何问题，即使它使用相同的 iSeries 凭据。
*   需要明确的是，几个月来我的服务器上没有任何变化（据我所知）。这只是昨天早上才开始发生的。

任何提示或想法都会非常有帮助。这种导出非常重要，许多用户/工作人员在日常工作中依赖这些数据。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T14:16:34.477

好吧，我讨厌不得不发布这样的回复，但我已经解决了这个问题。

我遇到这个问题的简短答案是因为数据表中的一个字段定义不正确。在这种情况下，它被声明为 a`decimal (11, 3)`并且应该是 a `decimal (13, 3)`。`(11, 3)`直到将一个值发布到不适合该范围的表中时，我才遇到此问题。

这个问题突出了我对 SSIS 最大的抱怨之一。有时我会遇到错误，这些错误通常在 Internet 上都有详细记录。我搜索了所有日志，并在错误消息是真实的假设下尝试设置各种测试场景。然而，当我最终解决问题时，它与写入日志文件的错误消息完全无关。

在这种情况下，上面提到的错误与问题完全无关？！事实上，我很幸运看到了这个问题。我知道我的桌子上的更新可能是一个潜在的修复，因为*我以前见过 SSIS 像这样误传*。

我想将此归咎于空间轰炸我的服务器的中微子，但从这次经历中最好的收获是尝试根据其他人的建议解决您的 SSIS 问题，*但是*，如果他们的建议没有帮助，请意识到该问题可能与 SSIS 错误消息无关，并三重检查与故障点相关的所有内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T18:23:18.917

我无法在评论中发布图像，因此将其发布为答案。

当您尝试将包导入 SQL Server 时，只要右键单击并执行“导入包”，您将看到以下窗口。

![在此处输入图像描述](../Images/24958d6916a043bb5641bab6999b3e91.png)

单击窗口右侧的矩形框。它将为您提供更改包保护级别的选项。将其更改为“不保存敏感”并尝试运行该包。请注意，这将要求您删除现有包并再次重新导入。因此，在接触现有配置之前，您可能想在另一台机器上尝试一下。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-16T12:52:25.657

对我来说，这只是 SSIS 中连接管理器的密码，没有保存。输入密码 -> 确定 -> 关闭 dtsx 文件并重新打开。错误消失了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-07T17:25:06.627

在 SQL Server 2012 中遇到相同的错误消息。对我来说，重新启动 SQL Server Management Studio 解决了这个问题。问题可能是由于几天前我的域密码在 SSMS 打开时更改造成的。如果您遇到类似的问题并且简单的重启并没有消失，请确保检查`Control Panel\User Accounts\Credential Manager`缓存的帐户信息和/或尝试重启。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-04T19:47:45.873

打开包 dtsx 然后转到属性集 ProtectionLevel EncryptSensitiveWithPassword 并输入密码。使用相同的密码连接打包形式的 sql server 作业。

请参阅[http://support.microsoft.com/kb/918760](http://support.microsoft.com/kb/918760)和[http://www.mssqltips.com/sqlservertip/2091/securing-your-ssis-packages-using-package-protection-level/](http://www.mssqltips.com/sqlservertip/2091/securing-your-ssis-packages-using-package-protection-level/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-05T17:30:30.360

这是一种解决方法，可以首先避免在包中保存敏感密码的问题。

我删除了 FTP 任务并使用文件系统任务通过 ftp 服务器上的网络共享将文件复制到同一位置，并避免使用 ftp 协议。

我还能够将包保存到文件系统而不是 sql 服务器存储中，并且运行良好。

希望它可以帮助你！

# python - 如何将直播视频添加到 django 网站？红5？

> ID：12935484
> 
> 赞同：6
> 
> 时间：2012-10-17T13:30:58.473
> 
> 标签：python, django, video-streaming, red5, live-streaming

我使用 Django 创建了一个网站，现在我想添加实时流视频组件，因为我的网站以用户为中心，用户能够流式传输其他用户可以观看的视频。我基本上已经准备好整个网站，除了视频部分，我似乎无法弄清楚。我将 Red5 服务器安装到我的计算机和 Flash Media Live Encoder 中，但似乎无法弄清楚是否/如何在我的项目中使用 Red5。任何人都可以就我应该做什么提供任何帮助或建议吗？我一直在尝试了解将视频功能添加到我的网站需要做些什么，但一直在兜圈子，无法找出正确的解决方案。一方面，我能找到的大部分信息是关于能够广播自己，这不是我打算做的（我的用户将成为广播的用户）。同样，该网站仍在开发中，因为它缺少这个主要部分，我无法弄清楚，但这是我在网站完成之前剩下的所有问题。我不介意其他选择，我只需要一个能够让我完成这个项目的解决方案。我非常感谢任何人可以为我提供的任何帮助，甚至只是链接到好的资源。提前致谢。甚至只是链接到好的资源。提前致谢。甚至只是链接到好的资源。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:49:03.737

很抱歉，您的问题可能会被观众否决，stackoverflow 不适合此类请求。您的问题是一般给出具体答案的方式。

我们正在开发一个基于 Red5 的开源视频会议应用程序：http: [//incubator.apache.org/openmeetings/](http://incubator.apache.org/openmeetings/) 它有一个 SOAP/REST API 来集成：http: [//incubator.apache.org/openmeetings/SoapRestAPI .html](http://incubator.apache.org/openmeetings/SoapRestAPI.html) 以及 Drupal 的插件： [http ://code.google.com/a/apache-extras.org/p/drupal-plugin-openmeetings/](http://code.google.com/a/apache-extras.org/p/drupal-plugin-openmeetings/)

您可以使用它而不是编写自己的代码，因为它已经有安装说明和一个活跃的社区，如果您是 red5 和视频流的新手，您可以寻求进一步的帮助。

塞巴斯蒂安

# java - Android SDK：如何设置屏幕亮度

> ID：12935488
> 
> 赞同：5
> 
> 时间：2012-10-17T13:31:19.223
> 
> 标签：java, android

我一直在环顾四周，我只能找到可以设置该活动亮度的代码。我正在尝试更改实际的电话设置。我试过的代码是：

```
public class AutoPowerManagerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        try {
            adjustBright();
        } catch (SettingNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void adjustBright() throws SettingNotFoundException {
        // TODO Auto-generated method stub
        int brightnessMode = Settings.System.getInt(getContentResolver(),
                Settings.System.SCREEN_BRIGHTNESS_MODE);
        if (brightnessMode == Settings.System.SCREEN_BRIGHTNESS_MODE_AUTOMATIC) {
            Settings.System.putInt(getContentResolver(),
                    Settings.System.SCREEN_BRIGHTNESS_MODE,
                    Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL);
        }

        WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
        layoutParams.screenBrightness = 0.5F;
        getWindow().setAttributes(layoutParams);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:56:37.977

您可以通过使用以下编码将亮度设置回自动，它对我有用。

```
layoutParams.screenBrightness=-1;
getWindow().setAttributes(layoutParams); 
```

这是完整的编码：

```
public class MainActivity extends Activity {

WindowManager.LayoutParams layoutParams;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        adjustBright();
    } catch (SettingNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Button btn=(Button)findViewById(R.id.button1);

    btn.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            // TODO Auto-generated method stub
            layoutParams.screenBrightness=-1;
            getWindow().setAttributes(layoutParams);
        }
    });

}

private void adjustBright() throws SettingNotFoundException {
    // TODO Auto-generated method stub
    int brightnessMode = Settings.System.getInt(getContentResolver(),
            Settings.System.SCREEN_BRIGHTNESS_MODE);
    if (brightnessMode == Settings.System.SCREEN_BRIGHTNESS_MODE_AUTOMATIC) {
        Settings.System.putInt(getContentResolver(),
                Settings.System.SCREEN_BRIGHTNESS_MODE,
                Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL);
    }

    layoutParams = getWindow().getAttributes();
    layoutParams.screenBrightness = 0.1F;
    getWindow().setAttributes(layoutParams);
}
} 
```

# iphone - 如何始终在地图视图中显示标注？

> ID：12935489
> 
> 赞同：0
> 
> 时间：2012-10-17T13:31:20.377
> 
> 标签：iphone

如何始终显示地图视图标注？如果我们点击地图标注隐藏再次点击它显示的图钉。我不想这样。我需要始终显示标注永远不会隐藏在任何情况下。在我的地图视图中，只有一个图钉和一个标注。我正在使用下面的代码来显示标注。

```
annotationView.canShowCallout  = YES; 
```

请帮我。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:31:33.053

如果代码中有此方法，请删除此方法

```
- (void)deselectAnnotation:(id < MKAnnotation >)annotation animated:(BOOL)animated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T22:43:31.190

取消选择注释时，您会通过以下方式收到通知

```
- (void)mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view 
```

所以在这个方法中，你可以重新选择它，使用

```
- (void)selectAnnotation:(id < MKAnnotation >)annotation animated:(BOOL)animated 
```

# java - 如何防止无限下载？

> ID：12935490
> 
> 赞同：0
> 
> 时间：2012-10-17T13:31:21.283
> 
> 标签：java, security, ssh, sftp

（到目前为止，这个问题纯粹是理论上的，因为我们已经找到了避免它的方法。但是，当它出现时我无法解决它。）

使用 Java，我想以固定的时间间隔通过 SSH FTP 从单个固定服务器发现和下载文件。
远程服务器、协议、时间和文件不在我的控制范围内。远程服务器由受信任的来源控制。

我目前正在使用 Java 实现`ls`并`get`下载文件。

我的客户非常注重安全，因此他希望尽可能多地防止技术攻击角度。

在考虑恶意实体冒充或控制远程服务器的可能性时，我注意到他们可能会用一个`ls`用无限的文件列表回复的实现替换普通的服务器，或者`get`用无限的字节流回复. 在某些时候，我的内存或硬盘驱动器会损坏并且我的程序崩溃。

假设我不知道文件可能占用的大小，有没有办法在不停止合法（但大）下载的情况下检测和防止此类攻击？
我正在考虑事先检查文件数量/文件大小，但即便如此，攻击者也只有在我进行此类检查后才能触发他的攻击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:49:00.373

> 在考虑恶意实体冒充或控制远程服务器的可能性时。

除非 SSH 的客户端实现存在缺陷或受信任站点的私钥被泄露或破解，否则应该不可能冒充该站点。

> 假设我不知道文件可能占用的大小，有没有办法在不停止合法（但大）下载的情况下检测和防止此类攻击？

我不这么认为。

> 我正在考虑事先检查文件数/文件大小......

问题是您如何区分“合法但大”的下载和来自受感染服务器的大下载？

* * *

我认为解决方案是限制下载大小。

另一件需要注意的是，即使坏人确实欺骗您进行“无限”下载：

1.  这实际上是一种拒绝服务攻击，而不是具有直接安全后果的攻击。
2.  有更简单、更有效的方式来发起拒绝服务攻击。
3.  下载不会真正无限。由于网络问题、系统重启等，连接最终会断开，或者有人会注意到下载需要很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:49:57.417

处理此类问题的最佳方法是定义一组规则，如果失败，将向某人发送警报（通过电子邮件或任何其他方式）。

例子：如果你从一个文件下载了超过30G，可能有问题，让我们来看看这个。

如果要下载的文件超过 10 亿个，请提醒某人...

您可能还想实现一些统计信息来检测 ls 和 get 可能存在的问题。

# android - how to save the states of multiple toggle button

> ID：12935502
> 
> 赞同：0
> 
> 时间：2012-10-17T13:31:51.503
> 
> 标签：android, list, togglebutton

I have a list(with uncertain numbers of items) with toggle button. Every time I press back button, and enter that page again, all toggle button become off as state in xml. How can I get the position of the toggle button and "setChecked" it ? or any method to check the toggle button I checked (set to ON) before. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:36:46.783

在活动中：

```
 private void SavePreferences(String key, String value){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
   }

   private void LoadPreferences(){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    String strSavedMem1 = sharedPreferences.getString("MEM1", "");
    String strSavedMem2 = sharedPreferences.getString("MEM2", "");
    textSavedMem1.setText(strSavedMem1);
    textSavedMem2.setText(strSavedMem2);
   } 
```

使用 Editor 对象以键/值方式放置数据，并使用 SharedPreferences 对象通过键检索它们。

# delphi - OnCalcFields causing StackOverflow

> ID：12935503
> 
> 赞同：1
> 
> 时间：2012-10-17T13:31:56.827
> 
> 标签：delphi, stack-overflow

Using Delphi 2005, I have a TwwDBGrid (InfoPower) that allows the user to select part(s) & quantities to generate a quote. Part of the selection process is to allow the user to add a discount for each part consisting of DiscountAmount and DiscountType. DiscountAmount is the amount of the discount and DiscountType is the type of discount amount (% off, $ off or flat price). This data is held in a ClientDataSet called ClientDataSetParts.

Within the OnCalc method (ClientDataSetPartsCalcFields) I have the following code which will recalculate the TotalPrice based on the parts cost and any discounts. RangePricing is used in the case where a price is calculated based on a quantity within a range (i.e., 1-100 = $100, 101-200 = $150, etc.):

```
procedure TfrmCustom_Services.ClientDataSetPartsCalcFields(
  DataSet: TDataSet);
begin
  inherited;
  // if part is selected then calculate Total
  if (ClientDataSetPartsSelected.Value) then begin
    // if range pricing is defined
    if (ClientDataSetParts.FieldByName('RangePricing').AsBoolean) then begin
      ClientDataSetParts.FieldByName('TotalPrice').Value :=
            ClientDataSetParts.FieldbyName('UnitPrice').Value;
    // otherwise use regular pricing
    end else begin
      ClientDataSetParts.FieldByName('TotalPrice').Value :=
          ClientDataSetParts.FieldbyName('UnitPrice').Value *
          ClientDataSetParts.FieldByName('Quantity').Value;
    end;

  // otherwise clear the Total
  end else begin
    ClientDataSetParts.FieldByName('TotalPrice').Clear;
    if (ClientDataSetParts.FieldByName('Quantity').Value <> null) then
      ClientDataSetParts.FieldByName('Quantity').Clear;
    if (ClientDataSetParts.FieldByName('DiscountAmount').Value <> null) then
      ClientDataSetParts.FieldByName('DiscountAmount').Clear;
    if (ClientDataSetParts.FieldByName('DiscountType').Value <> null) then
      ClientDataSetParts.FieldByName('DiscountType').Clear;
  end;

  // Update totals if Discount is applied
  // Only recalculate if both discount value and type are applied
  // otherwise will constantly get errors when switching fields
  if ((ClientDataSetPartsDiscountAmount.Value > 0) and (ClientDataSetPartsDiscountType.Value <> '')) then begin
    case StringToCaseSelect((ClientDataSetPartsDiscountType.Value), ['% Disc','$ Disc','Price']) of
      0 :
      begin
        ClientDataSetParts.FieldByName('DiscountDollarAmount').Value :=
            ClientDataSetParts.FieldByName('TotalPrice').Value * (ClientDataSetParts.FieldByName('DiscountAmount').Value/100);
        ClientDataSetPartsTotalPrice.Value := ClientDataSetPartsTotalPrice.Value - (ClientDataSetPartsTotalPrice.Value * (ClientDataSetPartsDiscountAmount.Value/100));
      end;
      1 :
      begin
        ClientDataSetParts.FieldByName('DiscountDollarAmount').Value := ClientDataSetPartsDiscountAmount.Value;
        ClientDataSetPartsTotalPrice.Value := ClientDataSetPartsTotalPrice.Value - ClientDataSetPartsDiscountAmount.Value;
      end;
      2 :
      begin
        ClientDataSetParts.FieldByName('DiscountDollarAmount').Value :=
            ClientDataSetPartsTotalPrice.Value - ClientDataSetPartsDiscountAmount.Value;
        ClientDataSetPartsTotalPrice.Value := ClientDataSetPartsDiscountAmount.Value;
      end;
    end;
  end;

end; 
```

The problem comes when I try to calculate DiscountDollarAmount (the actual dollar figure of the discount that I have to return to an outside source via API). Each time I set the ClientDataSetParts.FieldByName('DiscountDollarAmount').Value, ClientDataSetPartsCalcFields is called again causing endless calls and eventually a stack overflow.

How can I update this value without calling ClientDataSetPartsCalcFields recursively?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:02:02.630

当您修改非计算字段时会发生这种行为。该`OnCalcFields`事件不应对非计算字段进行任何修改。

我对您的数据库结构一无所知，但如果我的预感是正确的，那么您正在修改`OnCalcFields`事件处理程序中某处的非计算字段。并且因为你修改了一个非计算字段，所以需要重新计算计算字段。也因此`OnCalcFields`被称为。这会修改非计算字段。而且，好吧，你可以看到这是怎么回事！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:53:03.613

您进入的无限循环是由代码更改值，看到它已更改并重新开始更改（如您所知）引起的。为了解决这个问题，在过程开始时，将 OnCalc 事件设置为 nil，然后在结束时将其重新设置为过程。这样，事件监控将在其实际处理期间暂停，然后在处理完成并分配新值后恢复。

# c# - ASP.NET show and hide image at runtime

> ID：12935508
> 
> 赞同：1
> 
> 时间：2012-10-17T13:32:04.917
> 
> 标签：c#, asp.net, multithreading

I want to show loading picture when I'll click the button. And after finish my some calculation, make this picture is invisible. How to do it without AJAX and not using [WebMethod]? I know some tricks how to do it with AJAX or PageLoad, but I'm interesting, how to do it in the **different threads**, is it possible?

For example my code:

```
protected void btnDelete_Click(object sender, EventArgs e)
    {       
            imgLoading.Visible = true;
            lblCount.Visible = false;

            //doing some work
            bool isDone = TProfile.Delete(userId, someData);

            if (isDone)
            {
                imgLoading.Visible = false;
                lblCount.Visible = true;
            }

        BindList(true);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:38:18.513

您可以使用[OnClientClick](http://www.w3schools.com/aspnet/prop_webcontrol_button_onclientclick.asp)加载图像，当页面完成循环到您的服务器并重新加载页面时，它将消失。

# objective-c - UIView Drawing Best Practices

> ID：12935512
> 
> 赞同：6
> 
> 时间：2012-10-17T13:32:18.387
> 
> 标签：objective-c, ios, uiview, drawrect

My application is able to do some simple figure's drawing (until I get a more stable code, I am sticking with only one figure) and it's also able to re-size them. The code I use to create a `UIView` is the following :

```
- (void)drawRect:(CGRect)rect
{    
    CGContextRef context = UIGraphicsGetCurrentContext();

    [self setContextFillColor:context];
    [self setContextStrokeColor:context];
    [self setLineWidth:context];

    CGFloat lineThickness = [self lineWidth] ;
    CGFloat halfLineThickess = lineThickness / 2.0f;

    CGContextAddRect(context, CGRectMake(halfLineThickess,halfLineThickess, rect.size.width - lineThickness, rect.size.height - lineThickness));

    CGContextDrawPath(context, kCGPathEOFillStroke);
} 
```

Which gives me, with an input size of (100.0f,100.0f), this:

![enter image description here](../Images/12e0be48855323c3c529271eac3fa55f.png)

This figure is inside a "container" `UIView` which in turn is inside an `UIScrollView`. My problem with this is when I am re-sizing my figure and I reach sizes of around 1000*1000 (my "container" is 20,000*20,000), I start receiving memory warnings and the application finally gives up. So my questions are:

1) Should I consider putting a maximum size for the `UIView`?

2) How could I use the instruments to track this kind of problems, and see where the problem is coming (or where is the heavy lifting being done).

3) Should I use some kind of caching like [this](https://stackoverflow.com/questions/1798414/drawing-incrementally-in-a-uiview-iphone)?

4) Are there some general **best practices** to consider, when drawing an `UIView`?

5) Should I consider `CALayer`, although I need to listen to touches?

The re-sizing of the `UIView` is based mostly on [this](https://github.com/spoletto/SPUserResizableView).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:30:32.327

1）我认为如果您使用正确的方法，大小不是问题。

2) 你应该使用 Instruments 看看关于跟踪内存问题的 WWDC 视频

3,4) 我认为`- (void)drawRect:(CGRect)rect`这不是一个好习惯。如果你会看图纸会更好`CALayer`。您可以使用自定义`CGMutablePathRef`进行绘图。

所以 UIView 适合处理触摸但不适合绘制形状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:49:18.043

您不应该创建这么大的 UIView。它太大了。此类问题正是`CATiledLayer`旨在解决的问题。基本上，您需要跟踪形状的边界框，并使用这些边界框来确定哪些图块与哪些形状相交。当系统要求一个给定的图块时，您会绘制与其相交的所有形状。对于非常大和复杂的形状，您可以通过拆分形状来进一步优化，但通常不需要这样做。

# c# - 非用户文本的文字或资源文件

> ID：12935515
> 
> 赞同：4
> 
> 时间：2012-10-17T13:32:35.660
> 
> 标签：c#, resx

在编写库时，我已将所有字符串文字移动到资源文件中，即使它们是最终用户从未见过的东西，而且我不需要为其他开发人员的利益翻译文字（因为库是仅由一个团队开发）。

最近有人在进行代码审查，问我为什么将一些异常消息（最终用户永远不会看到）的字符串放入资源文件中。我假设是因为我们知道这个字符串不需要翻译。

我个人喜欢它，因为我发现很多地方都需要该字符串，并且它最终的功能与常量相同，因为 resx 为我生成了一个代码文件，所以我不需要维护它我。

我想知道是否有任何标准约定、最佳实践或官方指南。请记住，这仅适用于像字符串这样的消息，其他更适合作为常量的字符串我确实创建为常量，所以我只谈论异常消息或记录到 log4net 之类的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:08:23.340

将资源用于字符串文字有很多好处。我经常发现它们非常适合汇总错误/成功/验证消息。当产品即将完成时，通常的做法是收集所有消息，这样您就可以训练帮助台根据用户看到的内容回答问题。

为此，资源提供了一种易于访问的集中式资源来管理您向最终用户发送的所有消息。

此外，如果您想更改在特定条件下使用的语言，更改一个资源位置并影响整个库/应用程序会容易得多。否则，您将需要进行查找/替换，并且投入到项目中的新开发人员可能只会更新一个位置而错过其他位置。

# cakephp - 在 customHelper 中使用 $this->element

> ID：12935517
> 
> 赞同：3
> 
> 时间：2012-10-17T13:32:38.197
> 
> 标签：cakephp, cakephp-2.0, helper

我正在为我的应用程序构建一个自定义助手。在我尝试插入元素的一种方法中。为此，我正在使用：

```
$El = ClassRegistry::getObject('view'); 
$El->element('my_element', array('plugin'=>'my_plugin')); 
```

调试 $El 后，我得到的响应是错误的。

你们知道这个操作是否可以在 Helper 中进行吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:36:46.043

在 2.0 中，视图对象没有添加到类注册表中。在您的助手`$this->_View`中有对视图对象的引用。不建议在助手中包含元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T02:03:28.527

您可以将视图对象作为参数函数助手传递。例如：

```
class ComponentHelper extends AppHelper {
    public function checkboxes( $form, .... ) {
        ...
        $form->element( '...' );
        ...
    }
} 
```

在表格中：

```
$this->Component->checkboxes( $this, .... ); 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T03:44:24.250

在 CakePHP 2 中，`_View`如果尝试访问帮助程序中的元素，则需要调用该对象 - 例如：

```
$this->_View->Element($element, $options); 
```

这并不是真正可取的，听起来您应该考虑直接使用元素来支持 Helper。

例如：而不是`$this->CustomHelper->method($var)`像往常一样从视图中调用元素，`echo $this->element('element', ['var' => $var]);`如果需要，它可以执行 PHP/逻辑和/或调用其他帮助程序。

# jquery - How do I fade in vertical menu child items using Jquery

> ID：12935518
> 
> 赞同：0
> 
> 时间：2012-10-17T13:32:44.533
> 
> 标签：jquery, css, superfish

Here is my vertical menu [http://jsfiddle.net/3PD7D/13/](http://jsfiddle.net/3PD7D/13/)

If you hover over the menu items named folders nothing happens however if you go to where the menu items should appear(to the right of the "folder" menu item(s)) the jquery fades in the submenu items. How do I get them to fade in when the user hovers over the parent "folder" menu item?

**Edited** I apologize for not asking in the proper way. Here is the original code I should have posted. Many thanks to CasperOne and roasted for showing me the error of my ways.

$(document).ready(function(){

```
//Set the anchor link opacity to 0 and begin hover function
$("ul.child").css({"opacity" : 0}).hover(function(){ 

    //Fade to an opacity of 1 at a speed of 200ms
    $(this).stop().animate({"opacity" : 1}, 200); 

    //On mouse-off
    }, function(){

    //Fade to an opacity of 0 at a speed of 100ms
    $(this).stop().animate({"opacity" : 0}, 100); 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:38:08.603

见[那里](http://jsfiddle.net/3PD7D/14/)的工作样本。

```
$(document).ready(function(){ 

    //Set the anchor link opacity to 0 and begin hover function
    $("ul.child").parent().hover(function(){ 

        //Fade to an opacity of 1 at a speed of 200ms
        $(this).find("ul.child").stop().animate({"opacity" : 1}, 200); 

        //On mouse-off
        }, function(){

        //Fade to an opacity of 0 at a speed of 100ms
        $(this).find("ul.child").stop().animate({"opacity" : 0}, 100); 

    });

});​ 
```

# android - Sensors on standby mode

> ID：12935522
> 
> 赞同：1
> 
> 时间：2012-10-17T13:32:57.310
> 
> 标签：android, broadcastreceiver, android-sensors, android-wake-lock

I know this issue has been running for a while and that it not recommended to want to achieve this but I need my service sensors to work even when the phone is on standby mode.

So far here is what I've got :

```
public class SensorOrientation extends Service implements SensorEventListener{

    private     SensorManager   mSensorManager = null;
    private     Sensor          orientation;
    private     int             dureeDetection;
    private     int             angle;
    private     int             angleOrientation;

    public      static final int SCREEN_OFF_RECEIVER_DELAY = 500;

    public      static final String TAG         = SensorOrientation.class.getName();
    private     WakeLock            mWakeLock   = null;

    private static final String LOG_TAG = "SensorsOrientation";
    float x, y, z;
    protected BroadcastReceiver     mreceiver;

        public int onStartCommand(final Intent intent, final int flags,
            final int startId) {

                startForeground(1, new Notification());
                registerListener();
                mWakeLock.acquire();

                return START_STICKY;

    }

    private void registerListener() {
          mSensorManager.registerListener(this,
          mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
          SensorManager.SENSOR_DELAY_UI);
        }

    private void unregisterListener() {
        mSensorManager.unregisterListener(this);
    }

     public BroadcastReceiver mReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                Log.i(TAG, "onReceive("+intent+")");

                if (!intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
                    return;
                }

                Runnable runnable = new Runnable() {
                    public void run() {
                        Log.i(TAG, "Runnable executing.");
                        unregisterListener();
                        registerListener();
                    }

                };

                new Handler().postDelayed(runnable, SCREEN_OFF_RECEIVER_DELAY);
            }
        };

    public void onSensorChanged(SensorEvent event) {

            // update only when your are in the right case:
            Log.i(TAG, "onSensorChanged().");

            if (event.sensor.getType() == Sensor.TYPE_ORIENTATION) {
                // the azimuts
                x = event.values[0];
                // the pitch
                y = event.values[1];
                // the roll
                z = event.values[2];

                angleOrientation = -1 * ((int)y);

                if ((angle == 90 && angleOrientation <= 0)  || 
                (angle == 60 && angleOrientation <= 30)     || 
                (angle == 40 && angleOrientation <= 50)     ||
                (angle == 30 && angleOrientation <= 60 )) {

                    Toast.makeText(SensorOrientation.this,
                            "perte de verticalité",
                            Toast.LENGTH_SHORT).show();

                }

                //Log.d(LOG_TAG, "Sensor's values (" + ((int) x) + "," + ((int) y) + "," + ((int) z) + ")");
            }
        }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

     @Override
        public void onCreate() {
            super.onCreate();

            mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);

            PowerManager manager =
            (PowerManager) getSystemService(Context.POWER_SERVICE);
            mWakeLock = manager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, TAG);

            registerReceiver(mReceiver, new IntentFilter(Intent.ACTION_SCREEN_OFF));

            DBAdapter db    =   new DBAdapter(getApplicationContext());
            Cursor options  =   db.selectVerticalite();

            dureeDetection  =   options.getInt(options.getColumnIndex("duree_detection_verticalite"));
            angle           =   options.getInt(options.getColumnIndex("angle_detection"));

            options.close();
        }

     @Override
        public void onDestroy() {
            unregisterReceiver(mReceiver);
            unregisterListener();
            mWakeLock.release();
            stopForeground(true);
        }

} 
```

But this is not working, though it depends of the phone, is there something I'm not doing right? Or not doing at all?

Edit 1: It does work with SCREEN_DIM_WAKE_LOCK wich is an awfull workaround...

# java - 在异步线程中解析时出现致命错误 (AsyncTask.doInBackground())

> ID：12935523
> 
> 赞同：0
> 
> 时间：2012-10-17T13:32:58.260
> 
> 标签：java, android, android-asynctask, saxparser

尝试从class`XML`方法中的 URL解析时遇到问题。在它工作之前但在我的一些更改之后（现在解析链接）最有趣的是什么。我检查了 - 链接滋养正确的 XML。解析器有时会解析响应链接，但会产生致命错误。我非常希望你的帮助。`doInBackground``AsyncTask`

```
//analized DB & create var arrays with info about markers
        @Override
        protected Void doInBackground(Void ... param) {

            setButtonsClickListener();

            needShowLocation = 
                saxParserGetLocationRate.getIdAndRate(myLocationLatitudeDouble, myLocationLongitudeDouble);

        createArrayMarkersPlace();

        return null;
    } 
```

**解析器类**

```
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import android.util.Log;
import android.widget.Toast;

public class SAXParserGetLocationRate {

//Обработчик событий парсера
DefaultHandler handler = new DefaultHandler() {

    //Метод для отслеживания старта разбора документа
    @Override
    public void startDocument() {
        Log.d("SAXParser", "start document");
    }

    // Метод для отслеживание конца разбора документа
    @Override
    public void endDocument()
    {
        needShowLocation = new NeedShowLocation(needShowLoactionId, needShowLoactionRate);
        status = false;
        flag = false;
        Log.d("SAXParser", "end document");
    }

    //Метод для отслеживание открываемых тегов и их атрибутов
    @Override
    public void startElement(String uri, String lname, String qname, Attributes attr) {
        if(lname.equals("status"))status = true;
        Log.d("uri/lname/qname/attr/flagStatus", uri+"/"+lname+"/"+qname+"/"+attr.getLength()+"/"+flag);
        if(lname.equals("object") && flag){
            Log.d("/", "/");
            for(int i=0;i<attr.getLength();i++){
                Log.d("*", "*");
                if(i==0){
                    Log.d("-", "-");
                    Integer q = Integer.valueOf(attr.getValue(i));
                    Log.d("+", "+");
                    needShowLoactionId.add(q);
                    Log.d("needShowLoactionId.add", Integer.valueOf(attr.getValue(i))+"");
                }

                if(i==1){
                    atmosphearRating = Integer.valueOf(attr.getValue(i));
                }

                if(i==2){
                    peoplemeterRating = Integer.valueOf(attr.getValue(i));
                    needShowLoactionRate.add(Float.valueOf((atmosphearRating + peoplemeterRating)/2));
                    Log.d("needShowLoactionRate.add", ((atmosphearRating + peoplemeterRating)/2)+"");
                }
            }
        }
    }

    // Метод для отслеживания конца документа   
    @Override
    public void endElement(String uri, String lname, String qname) {
        //
    }

    // Метод для изьятия символьных даных тегов
    @Override
    public void characters (char[] data, int start, int lenght) throws SAXException {
        super.characters(data, start, lenght);                              // вызов метода с предыдущей реализацией
        StringBuilder lineBuilder = new StringBuilder();                    // создани экземпляра класа для формирования строки
        lineBuilder.append(data, start, lenght);                            //формирование строки на основе масива символов, откуда изымаються элементы в количестве lenght начиная с элемента start    
        String line =  lineBuilder.toString().trim();                       //создание строки с усеканием пробелов в начале и конце
        if(!(line.length()==0))                                             // условие проверяет не пустая ли строка
        {
            if(status && line.equals("ok")){
                flag = true;
                status = false;
                Log.d("need show location", line);
            }
            if(status && line.equals("error")){
                this.endDocument();
                Log.d("need show location", line);  
            }
        }
    }
};

public NeedShowLocation getIdAndRate(double latitude, double longitude) {
    Log.d("latitude/longitude", latitude+"/"+longitude);
    SAXParserFactory factory = SAXParserFactory.newInstance();              // создание класа-фабрики для парсера
    factory.setNamespaceAware(true);                                        //установка подержки пронстрансва имён
    try {
        saxParser = factory.newSAXParser();                                 //создание класа парсера
    } catch (ParserConfigurationException e1) {
        System.out.println("ParserConfigurationException "+e1);
    } catch (SAXException e1) {
        System.out.println("SAXException "+e1);
    }                           
    Log.d("source_parse", "http://&&&.&&&.&&&/places_data/?lat="+latitude+"&lng="+longitude);
    try {
        saxParser.parse("http://&&&.&&&.&&&/places_data/?lat="+latitude+"&lng="+longitude, handler);
    } catch (SAXException e) {
        System.out.println("SAXException "+e);
    } catch (IOException e) {
        System.out.println("IOException "+e);
    }
    return needShowLocation;
}
private NeedShowLocation needShowLocation = null;
private SAXParser saxParser;
private ArrayList<Integer> needShowLoactionId;
private ArrayList<Float> needShowLoactionRate;
private int atmosphearRating;
private int peoplemeterRating;  
private boolean status = false;
private boolean flag = false;
} 
```

**日志**

```
"$ 10-17 15:51:57.999: D/Facebook-Util(13671): GET URL: https://graph.facebook.com/me?access_token=AAAFGvgaKHNgBAJdQwSkb5j1hXG8b61RitnEjIW3vpiMnemIIDYh1lA9LDz9BNx9NZAp5sCoDqIDfRygPL7eHtlhtY50TTJZCWDiybn1QZDZD&format=json 10-17 15:51:58.639: D/dalvikvm(13671): GC_CONCURRENT freed 228K, 49% free 2884K/5639K, external 611K/1112K, paused 8ms+10ms 10-17 15:51:58.989: D/Expir.onPause()(13671): START 10-17 15:51:58.989: D/Expir.onPause()(13671): FINISH 10-17 15:51:59.389: D/dalvikvm(13671): GC_CONCURRENT freed 306K, 48% free 3112K/5895K, external 611K/1112K, paused 9ms+7ms 10-17 15:51:59.479: D/onCreate()(13671): START 10-17 15:51:59.639: D/dalvikvm(13671): GC_CONCURRENT freed 537K, 50% free 3134K/6151K, external 611K/1112K, paused 4ms+10ms 10-17 15:51:59.829: D/dalvikvm(13671): GC_CONCURRENT freed 381K, 47% free 3265K/6151K, external 673K/1112K, paused 4ms+5ms 10-17 15:52:00.039: D/dalvikvm(13671): GC_CONCURRENT freed 519K, 48% free 3279K/6279K, external 673K/1112K, paused 4ms+6ms 10-17 15:52:00.199: D/dalvikvm(13671): GC_CONCURRENT freed 329K, 45% free 3462K/6279K, external 673K/1112K, paused 5ms+5ms 10-17 15:52:00.369: D/szipinf(13671): Initializing inflate state 10-17 15:52:00.469: D/onCreate()(13671): FINISH 10-17 15:52:00.469: D/onStart()(13671): START 10-17 15:52:00.469: D/onStart()(13671): FINISH 10-17 15:52:00.469: D/onResume()(13671): START 10-17 15:52:00.479: D/onResume()(13671): FINISH 10-17 15:52:00.489: D/latitude/longitude(13671): 57.702966/11.973206 10-17 15:52:00.539: D/source_parse(13671): http://&&&.&&&.&&&/places_data/?lat=57.702966&lng=11.973206 10-17 15:52:00.599: I/MapActivity(13671): Handling network change notification:CONNECTED 10-17 15:52:00.599: E/MapActivity(13671): Couldn't get connection factory client 10-17 15:52:00.689: D/dalvikvm(13671): GC_CONCURRENT freed 558K, 49% free 3325K/6407K, external 910K/1112K, paused 4ms+9ms 10-17 15:52:00.799: D/dalvikvm(13671): GC_EXTERNAL_ALLOC freed 181K, 51% free 3144K/6407K, external 910K/1112K, paused 114ms 10-17 15:52:00.869: D/dalvikvm(13671): GC_FOR_MALLOC freed 1K, 51% free 3143K/6407K, external 1166K/1678K, paused 55ms 10-17 15:52:00.869: I/dalvikvm-heap(13671): Grow heap (frag case) to 6.693MB for 69582-byte allocation 10-17 15:52:00.929: D/dalvikvm(13671): GC_FOR_MALLOC freed <1K, 51% free 3211K/6535K, external 1166K/1678K, paused 53ms 10-17 15:52:01.029: D/dalvikvm(13671): GC_FOR_MALLOC freed 170K, 51% free 3258K/6535K, external 1166K/1678K, paused 56ms 10-17 15:52:01.139: D/dalvikvm(13671): GC_FOR_MALLOC freed 48K, 50% free 3292K/6535K, external 1166K/1678K, paused 58ms 10-17 15:52:01.139: I/dalvikvm-heap(13671): Grow heap (frag case) to 6.838MB for 69582-byte allocation 10-17 15:52:01.199: D/dalvikvm(13671): GC_FOR_MALLOC freed 63K, 51% free 3297K/6663K, external 1166K/1678K, paused 54ms 10-17 15:52:01.459: D/Expir.onStop()(13671): START 10-17 15:52:01.459: D/Expir.onStop()(13671): FINISH 10-17 15:52:01.659: D/SAXParser(13671): start document 10-17 15:52:01.659: D/uri/lname/qname/attr/flagStatus(13671): /content/content/0/false 10-17 15:52:01.659: D/uri/lname/qname/attr/flagStatus(13671): /status/status/0/false 10-17 15:52:01.659: D/need show location(13671): ok 10-17 15:52:01.659: D/uri/lname/qname/attr/flagStatus(13671): /object/object/5/true 10-17 15:52:01.659: D//(13671): / 10-17 15:52:01.659: D/*(13671): * 10-17 15:52:01.659: D/-(13671): - 10-17 15:52:01.659: D/+(13671): + 10-17 15:52:01.669: W/dalvikvm(13671): threadid=9: thread exiting with uncaught exception (group=0x40018560) 10-17 15:52:01.679: E/AndroidRuntime(13671): FATAL EXCEPTION: AsyncTask #1 10-17 15:52:01.679: E/AndroidRuntime(13671): java.lang.RuntimeException: An error occured while executing doInBackground() 10-17 15:52:01.679: E/AndroidRuntime(13671):     at android.os.AsyncTask$3.done(AsyncTask.java:200) 10-17 15:52:01.679: E/AndroidRuntime(13671):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274) 10-17 15:52:01.679: E/AndroidRuntime(13671):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125) 10-17 15:52:01.679: E/AndroidRuntime(13671):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308) 10-17 15:52:01.679: E/AndroidRuntime(13671):  at java.util.concurrent.FutureTask.run(FutureTask.java:138) 10-17 15:52:01.679: E/AndroidRuntime(13671):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 10-17 15:52:01.679: E/AndroidRuntime(13671):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 10-17 15:52:01.679: E/AndroidRuntime(13671):     at java.lang.Thread.run(Thread.java:1019) 10-17 15:52:01.679: E/AndroidRuntime(13671): Caused by: java.lang.NullPointerException 10-17 15:52:01.679: E/AndroidRuntime(13671):   at expir.java.file.SAXParserGetLocationRate$1.startElement(SAXParserGetLocationRate.java:54) 10-17 15:52:01.679: E/AndroidRuntime(13671):   at org.apache.harmony.xml.ExpatParser.startElement(ExpatParser.java:145) 10-17 15:52:01.679: E/AndroidRuntime(13671):   at org.apache.harmony.xml.ExpatParser.appendBytes(Native Method) 10-17 15:52:01.679: E/AndroidRuntime(13671):   at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:518) 10-17 15:52:01.679: E/AndroidRuntime(13671):  at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:479) 10-17 15:52:01.679: E/AndroidRuntime(13671):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:318) 10-17 15:52:01.679: E/AndroidRuntime(13671):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:291) 10-17 15:52:01.679: E/AndroidRuntime(13671):  at javax.xml.parsers.SAXParser.parse(SAXParser.java:390) 10-17 15:52:01.679: E/AndroidRuntime(13671):   at javax.xml.parsers.SAXParser.parse(SAXParser.java:266) 10-17 15:52:01.679: E/AndroidRuntime(13671):   at expir.java.file.SAXParserGetLocationRate.getIdAndRate(SAXParserGetLocationRate.java:114) 10-17 15:52:01.679: E/AndroidRuntime(13671):    at expir.java.file.MyMapActivity$AsyncLoader.doInBackground(MyMapActivity.java:572) 10-17 15:52:01.679: E/AndroidRuntime(13671):    at expir.java.file.MyMapActivity$AsyncLoader.doInBackground(MyMapActivity.java:1) 10-17 15:52:01.679: E/AndroidRuntime(13671):  at android.os.AsyncTask$2.call(AsyncTask.java:185) 10-17 15:52:01.679: E/AndroidRuntime(13671):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 10-17 15:52:01.679: E/AndroidRuntime(13671):  ... 4 more 10-17 15:52:01.689: D/onPause()(13671): START 10-17 15:52:01.719: D/onPause()(13671): FINISH 10-17 15:52:01.759: D/Expir.onRestart()(13671): START 10-17 15:52:01.759: D/Expir.onRestart()(13671): FINISH 10-17 15:52:01.759: D/Expir.onStart()(13671): START 10-17 15:52:01.759: D/Expir.onStart()(13671): FINISH 10-17 15:52:01.759: D/Expir.onResume()(13671): START 10-17 15:52:01.759: D/Expir.onResume()(13671): FINISH 10-17 15:52:02.049: D/onStop()(13671): START 10-17 15:52:02.049: D/onStop()(13671): FINISH 10-17 15:52:02.049: D/onDestroy()(13671): START 10-17 15:52:02.049: D/onDestroy()(13671): FINISH 10-17 15:52:02.079: E/WindowManager(13671): Activity expir.java.file.MyMapActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@406318d8 that was originally added here 10-17 15:52:02.079: E/WindowManager(13671): android.view.WindowLeaked: Activity expir.java.file.MyMapActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@406318d8 that was originally added here 10-17 15:52:02.079: E/WindowManager(13671):     at android.view.ViewRoot.<init>(ViewRoot.java:259) 10-17 15:52:02.079: E/WindowManager(13671):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148) 10-17 15:52:02.079: E/WindowManager(13671):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91) 10-17 15:52:02.079: E/WindowManager(13671):    at android.view.Window$LocalWindowManager.addView(Window.java:465) 10-17 15:52:02.079: E/WindowManager(13671):  at android.app.Dialog.show(Dialog.java:241) 10-17 15:52:02.079: E/WindowManager(13671):     at expir.java.file.MyMapActivity$AsyncLoader.onPreExecute(MyMapActivity.java:562) 10-17 15:52:02.079: E/WindowManager(13671):   at android.os.AsyncTask.execute(AsyncTask.java:391) 10-17 15:52:02.079: E/WindowManager(13671):     at expir.java.file.MyMapActivity.onCreate(MyMapActivity.java:75) 10-17 15:52:02.079: E/WindowManager(13671):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 10-17 15:52:02.079: E/WindowManager(13671):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722) 10-17 15:52:02.079: E/WindowManager(13671):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784) 10-17 15:52:02.079: E/WindowManager(13671):    at android.app.ActivityThread.access$1500(ActivityThread.java:123) 10-17 15:52:02.079: E/WindowManager(13671):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939) 10-17 15:52:02.079: E/WindowManager(13671):  at android.os.Handler.dispatchMessage(Handler.java:99) 10-17 15:52:02.079: E/WindowManager(13671):  at android.os.Looper.loop(Looper.java:130) 10-17 15:52:02.079: E/WindowManager(13671):  at android.app.ActivityThread.main(ActivityThread.java:3835) 10-17 15:52:02.079: E/WindowManager(13671):    at java.lang.reflect.Method.invokeNative(Native Method) 10-17 15:52:02.079: E/WindowManager(13671):     at java.lang.reflect.Method.invoke(Method.java:507) 10-17 15:52:02.079: E/WindowManager(13671):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847) 10-17 15:52:02.079: E/WindowManager(13671):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605) 10-17 15:52:02.079: E/WindowManager(13671):     at dalvik.system.NativeStart.main(Native Method) 10-17 15:57:01.779: I/Process(13671): Sending signal. PID: 13671 SIG: 9 " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:42:14.633

您正在将对象添加`needShowLoactionId`到. 在：`needShowLoactionRate``null``startElement`

```
needShowLoactionId.add(q);
...
needShowLoactionRate.add(Float.valueOf((atmosphearRating + peoplemeterRating)/2)); 
```

堆栈跟踪显示异常原因是 NullPointerException，发生在`SAXParserGetLocationRate$1.startElement`（第 54 行）。（“$1”表示该`startElement`方法出现在内部的第一个匿名内部类中——在`SAXParseGetLocationRate`这种情况下`DefaultHandler`。）

要解决此问题，请更改以下行：

```
private ArrayList<Integer> needShowLoactionId;
private ArrayList<Float> needShowLoactionRate; 
```

...到这样的事情：

```
private ArrayList<Integer> needShowLoactionId = new ArrayList<Integer>();
private ArrayList<Float> needShowLoactionRate = new ArrayList<Float>(); 
```

# ruby-on-rails - Rails and Paperclip - resizing issue

> ID：12935524
> 
> 赞同：1
> 
> 时间：2012-10-17T13:33:01.333
> 
> 标签：ruby-on-rails, paperclip, image-resizing

I know that the paperclip gem has an option to create several resized versions of an image. Example:

```
class User < ActiveRecord::Base
  # Paperclip
  has_attached_file :photo,
    :styles => {
    :thumb => "100x100#",
    :small  => "150x150>",
    :medium => "200x200" }
end 
```

I want the image to be resized to "500x500>" and only keep this resized version (discarding the original).

Is this possible? How?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:42:33.043

```
class User < ActiveRecord::Base
  # Paperclip
  has_attached_file :photo,
    :styles => {
    :original => "500x500>", #this will resize the original directly
    :thumb => "100x100#",
    :small  => "150x150>",
    :medium => "200x200" }
end 
```

# php - How to create one navigation with multiple commands

> ID：12935527
> 
> 赞同：0
> 
> 时间：2012-10-17T13:33:17.720
> 
> 标签：php, javascript, css

I am trying to build a navigation that determines the page the user in on and gives that link a different command to show a div tag if you click it on the current page. Example: you click on the home page to go to the home page. if you are on the home page and you click home again it causes a div tag to fade in. I have the div tag working but I don't know how to apply more than one command to an tag. I want the navigation to just be a sitewide include incase I have to make further updates to the site. Right now I have individual navigation on each page.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:37:38.187

[`$_SERVER['REQUEST_URI']`](http://php.net/manual/en/reserved.variables.server.php)在 PHP 中，您可以通过使用 in和相关条目的值来了解已请求的页面。

然后，您可以用它来决定您在哪个页面上，并根据请求的页面更改菜单的显示。

这允许您包含来自许多不同文件的菜单模板，无论这些文件位于页面结构中的哪个位置。

一个简短的示例，此处包含您建议的`PHP_SELF`条目和非目录结构：

```
<?php

    $currentPage = basename($_SERVER["PHP_SELF"]);

    /** define the menu **/
    $menu = array(
        array('index.php', 'home');
    );

    /** process the menu **/    
    foreach ($menu as &$entry) {
        list($page, $name) = $entry;
        $isCurrent = $currentPage === $page;
        if ($isCurrent) {                
            $href  = '#';
            $extra = ' onclick="MM_effectAppearFade(display, 2500, 0, 100, true)"';
        } else {
            $href  = $page;
            $extra = '';
        }
        $entry = array_merge($entry, array($href, $extra));
    }
    unset($entry);

    /** output the menu **/
?>
<ul>
    <?php foreach($menu as $entry) { ?>
        <li>
            <?php
                list($page, $name, $href, $extra) = $entry;
                printf(
                    '<a href="%s"%s>%s</a></li>', 
                    $href, $extra, htmlspecialchars($name)
                );
             ?>
        </li>
    <?php } ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:39:22.013

> 对标签应用多个命令

我假设您`onlick`在元素中使用属性。不要那样做。从单独的脚本中分配任何事件处理程序。您可以根据需要将尽可能多的事件绑定到元素（也可以根据需要对事件进行尽可能多的回调）。

jQuery 示例：

```
jQuery( '#menu a' ).on( 'click', function( event ) {
    if( event.target.attr( 'href' ) == window.location ) {
        event.preventDefault();
        jQuery( '#specialDivPopup' ).show();
    }
} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:40:37.943

简单的在onclick@同一个页面上放一个jquery hide div函数（试一下逻辑）

@ Home Page -> （点击代码以隐藏主页 DIV）

@ MYPAGE Page -> (PUT CODE to HIDE MYPAGE DIV ON CLICK)

# c - C preprocessor macro for pointer to structure member

> ID：12935529
> 
> 赞同：0
> 
> 时间：2012-10-17T13:33:33.553
> 
> 标签：c, pointers, macros, c-preprocessor

I want to make a **C** macro to replace an if statement.

I've never been able to get a good grasp of **C** macros, do I need to do token pasting?

```
#define BROWSER_HTML_HOW_OPENTAG 0x19939292
structure  { dword how;  } _tag;
structure  { _tag cur_tag;  } _ibot;

// works fine
foo()
{
    _ibot*ibot;
    if(ibot->cur_tag->how==BROWSER_HTML_HOW_OPENTAG) { } // do something
} 
```

but I want to implement this

```
#define browserTagCheck(tag,how)    (tag->how==how)
foo()
{
    _ibot*ibot;
    if(browserTagCheck(ibot->cur_tag,BROWSER_HTML_HOW_OPENTAG) {} // do something
} 
```

I get an error:

> error: expected identifier before numeric constant|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:35:54.490

我认为您`how`在两种意义上使用该名称：作为 的成员`cur_tag`，以及作为`browserTagCheck`宏的参数。尝试为宏参数使用不同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:21:22.677

Don't do that. Never try to re-invent the C language, it is very poor practice.

Instead, I would strongly suggest this:

```
inline bool browserTagCheck (const struct something_t* x)
{
  return x->tag == BROWSER_HTML_HOW_OPENTAG;
}

...

if(browserTagCheck(&ibot))
{
  doStuff();
} 
```

Inlining is most likely not even needed, since this appears to be some sort of web/html app with no real time requirements.

# header - Monotouch - 如何在分组部分的开头设置页眉样式？

> ID：12935530
> 
> 赞同：2
> 
> 时间：2012-10-17T13:33:35.783
> 
> 标签：header, xamarin.ios

我是一个完全的 Monotouch n00bie，我真的很难找出如何更改分组节标题的字体和行大小。

我正在创建我的 IUTableViewSource 并将其附加到我的 UITableView 但是更改所有节标题的语法在哪里？（每个分组部分上方的那些）。

我查看了 XCode IB 并猜到了 tableView.Header/Section/HeaderFont/Style 等

来自 ASP.NET c#，这是一项艰苦的工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:55:16.947

您可以使用 MonoTouch.Dialog 轻松做到这一点。

[https://github.com/migueldeicaza/MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)

它还带有 MonoTouch，只需添加对它的引用并添加 using 语句就可以了！

```
RootElement root = new RootElement("MyRootName");
Section mySection = new Section();
UIView mySectionHeaderView = // Do stuff here to make your custom header. Add UILabels, etc etc.
mySection.HeaderView = mySectionHeaderView;

StringElement strElement = new StringElement("This is a table cell"); // just to get you started
mySection.Add(strElement); // Add element to the section.
root.Add(mySection); // Add my section to the root element.
Root = root; // Sets my temp root, to the DialogViewControllers actual Root. You do this rather than working directly on Root to stop some display issues. 
```

这假定您获得 MonoTouch.Dialog 并且您的类是 DialogViewController 的子类。一旦我发现了这个 MT.DI，我就很少再去使用常规的 UITableViews 了！

# php - xml->add adding more than once

> ID：12935534
> 
> 赞同：0
> 
> 时间：2012-10-17T13:33:46.907
> 
> 标签：php, xml

I have several forms on my site. When the form submits we insert the lead into a database as well as send an email to several people. To ensure leads are not getting lost in either process I am attaching an ID($tracker) to each lead submission. The ID is pulled from an XML file that increments +1 on each submission.

The issue I am having is the increments are skipping numbers. The list of tracker IDs that I have is 1,6,8,9,10,19,22,23,41,48,50,59,66,68,69,74,79,82\. I DO NOT have more emails than database submissions or visa versa. Any suggestions as to why my XML increment may be skipping numbers.

Here is my XML file.

```
 <note>
    <data>82</data>
    <add>1</add>
    </note> 
```

Here is my code that increments the data # on submission.

```
 $xml = simplexml_load_file($_SERVER['DOCUMENT_ROOT'] . '/includes/catch.xml');
    $xml->data = $xml->add + $xml->data;
    $tracker = $xml->data; 
```

Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:49:51.733

我遇到的问题与在 XML 中增加的实际脚本无关。它与 mySQL 插入函数失败有关。即使数据库插入失败导致数字跳过，XML 也会继续增加。我现在有一个问题。

# objective-c - 按下时 UITextField 的动画大小

> ID：12935536
> 
> 赞同：0
> 
> 时间：2012-10-17T13:33:51.540
> 
> 标签：objective-c, uitextfield, core-animation

我有一个文本字段，当我在其中触摸时，我想更改其宽度和图像。图像更改没有任何问题，但宽度保持不变。问题在于触摸文本字段时触发的动作，因为当我创建一个简单的按钮时，动画会起作用。所以我的问题是如何在触摸文本字段时让动画工作。

动画在这里不起作用：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{

        [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationCurveEaseOut
                         animations:^{

                         self.textFieldSearchStore.background = [UIImage imageNamed:@"text-field-small.png"];
                         self.textFieldSearchStore.frame = CGRectMake(textFieldSearchStore.frame.origin.x, textFieldSearchStore.frame.origin.y, 248.0f, textFieldSearchStore.frame.size.height);

                     }
                     completion:^(BOOL finished){}
     ];

} 
```

动画在这里工作：

```
- (IBAction)test:(id)sender {

    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationCurveEaseOut
                     animations:^{

                         self.textFieldSearchStore.background = [UIImage imageNamed:@"text-field-small.png"];
                         self.textFieldSearchStore.frame = CGRectMake(textFieldSearchStore.frame.origin.x, textFieldSearchStore.frame.origin.y, 248.0f, textFieldSearchStore.frame.size.height);

                     }
                     completion:^(BOOL finished){}
     ];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:51:09.577

您是否以任何其他方法触摸 self.textFieldSearchStore 的框架，例如

```
– textFieldShouldBeginEditing:
– textFieldDidBeginEditing:
– textField:shouldChangeCharactersInRange:replacementString: 
```

或侦听以下通知的方法：

```
UIKeyboardWillShowNotification
UIKeyboardDidShowNotification 
```

或任何这些方法

```
– canBecomeFirstResponder
– becomeFirstResponder
– touchesBegan:withEvent: 
```

如果是这样，我会在这些方法上设置一个断点，以查看它们是否在上述方法之后被调用。让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:08:14.740

问题解决了。问题是我使用的是 Table View Controller。更改为常规视图控制器，现在可以正常工作了！

# solr - 带有分组的 Solr 查询不起作用

> ID：12935540
> 
> 赞同：0
> 
> 时间：2012-10-17T13:34:04.923
> 
> 标签：solr, lucene

以下查询工作正常：

```
q=field_one:value_one AND -field_two:[* TO *] AND -field_three:[* TO *] 
```

但是，只要我把括号放在那里，我就没有结果

```
q=field_one:value_one AND (-field_two:[* TO *] AND -field_three:[* TO *]) 
```

这两个查询不是等效的吗？

谢谢大家

*戴夫*

注意：我这样做是因为我需要将更多的“与”与“或”结合起来；而不仅仅是因为我喜欢括号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:27:28.210

稍微交换一下布尔值，我就有了一些有用的东西。

```
q=field_one:value_one AND -(field_two:[* TO *] OR field_three:[* TO *]) 
```

给出与没有括号的原始查询相同的结果。

不知道为什么 Solr 对其他语法如此挑剔。对我来说似乎有点奇怪。

# java - 如何使用反射在方法中传递类字段

> ID：12935542
> 
> 赞同：0
> 
> 时间：2012-10-17T13:34:06.337
> 
> 标签：java, reflection

```
class A {
    private TypeA a;
    Private TypeB b;
    ...
    Private TypeZ z;

    ...getters/setters...

   public add(Object o) {
       //blablabla
   }

   public testMethod() {
       add(a);
       add(b);
       add(c);
       ......
       add(z);

       /** here instead of calling add(a), add(b), add(c) one by one, I want to use reflection.
       **  something like:
       **  foreach(Field f : getDeclaredFields()) {
       **    add(f.getTheObjectReference());    <-- I made this method "getTheObjectReference" up
       **  }
       **/
   }
} 
```

所以在这个例子中，我可以使用 getDeclaredFields 获取所有字段 Field[az]，但是一旦我有了 Field 对象，如何将其转换为实际的对象引用？Field 类中没有名为“getTheObjectReference”的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:35:54.627

如果您尝试获取“当前”实例（`testMethod()`调用您的方法的实例）的字段值，您只想调用[`Field.get`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#get%28java.lang.Object%29)with`this`作为目标：

```
add(f.get(this)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:36:34.970

您是否尝试使用

```
for(Field field : getClass().getDeclaredFields()) {
    Object o = field.get(this);
    add(o);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:36:28.680

您尝试做的事情是不可能的，因为 Field 实例是指通用类方法，而不是特定的类实例方法！

# image - 在 Facebook 开放图形对象上使用多个图像进行布局

> ID：12935549
> 
> 赞同：1
> 
> 时间：2012-10-17T13:34:40.410
> 
> 标签：image, facebook-graph-api, layout

在 Facebook 对象图中，是否有可能更改已发布的对象布局以显示多个图像？

在开放图形对象数据中，可以包含多个图像，这使用户可以在发布他们想要发布的图像时进行选择。但是，如果我想更改对象布局以在同一个帖子中显示两个图像怎么办？可能吗？

# javascript - Javascript中的引号和转义

> ID：12935550
> 
> 赞同：1
> 
> 时间：2012-10-17T13:34:41.270
> 
> 标签：javascript, quotes

js中是否有一种聪明的方法来插入混合单引号和双引号，比如python

> “““细绳”””

句法？或类似的东西，我相信它们存在于 Perl 或 PHP 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:36:22.843

不，您被转义引号所困扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:27:13.377

是的，你必须使用`" + string + "`或`"string"`

# prolog - Prolog中谓词名称后的斜杠是什么意思？

> ID：12935552
> 
> 赞同：8
> 
> 时间：2012-10-17T13:34:49.950
> 
> 标签：prolog, predicate

我已经阅读了 SO 问题[，斜杠（/）在序言中做了什么？](https://stackoverflow.com/questions/10111625/what-does-slash-do-in-prolog)[Prolog (SWI-Prolog) 中谓词“simple/1”的含义是什么](https://stackoverflow.com/questions/9042879/what-is-the-meaning-of-predicate-simple-1-in-prolog-swi-prolog)，但这些链接似乎对我没有帮助。

我正在阅读一些关于 Prolog 的初学者教程。`Solve/4`喜欢或`Go/1`让我感到困惑的短语。那个斜线和数字是什么意思？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T13:41:10.440

它是函数在其签名中期望的参数数量。小心中缀运算符，它可以接受多个参数，即使它们的调用方式是将它们放在参数之间。也就是说，您可以将普通加法`+`, 视为二元运算符。所以`A+B`实际上与 相同`+(A,B)`，这意味着您将定义`+`为`+/2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:23:51.013

我引用了“Prolog：标准：参考手册”的第 8 页（当我搜索“prolog 谓词指示器”时的 2^ 条目[）](http://www.google.it/search?client=ubuntu&channel=fs&q=prolog%20predicate%20indicator)。

> 谓词指示符...它是名称/Arity 形式的基本术语

ISO 内置 functor/3 访问此类数据

```
?- functor(append(a,b,c),Name,Arity).
Name = append,
Arity = 3. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T10:06:45.483

正如 EMS 和 Chac 解释的那样，这个数字表示参数的数量。您会在文档中找到这个数字的原因是因为具有相同名称和不同数量（参数数量）的谓词是不同的谓词。

所以谓词：

```
my_predicate/3 
```

与谓词不同：

```
my_predicate/4 
```

和数字被包括在内，以清楚地表明他们正在谈论的是哪一个。

# iphone - 保存和恢复 uinavigation 控制器的状态

> ID：12935556
> 
> 赞同：0
> 
> 时间：2012-10-17T13:34:58.180
> 
> 标签：iphone, objective-c, ios

我对 UINavigationController 有疑问。

我有一个应用程序，它有很多视图控制器，我在使用导航控制器推送和弹出功能之间切换。

我的要求是这样的：在我的应用程序中，当用户在第 5 个屏幕上并且用户单击主页按钮并再次双击主页按钮并从多任务栏中删除或终止应用程序然后用户点击应用程序图标（打开应用程序）应用程序应该从它离开的地方开始，或者应用程序应该从第 5 个屏幕开始。

我在 applicationDidEnterBackground 和 applicationDidBecomeActive 的应用程序委托中执行代码，但这对我没有帮助

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.

    self.viewArray = [[NSMutableArray alloc] init];
    UINavigationController* navController = self.navigationController;
    int viewcountt = [navController.viewControllers count];

    NSLog(@"descbefor -- %@",[navController.viewControllers description]);
    NSLog(@"kountbefor -- %d",[navController.viewControllers count]);

    for (int cont=0; cont < viewcountt; cont++)
    {
        [self.viewArray addObject:[navController.viewControllers objectAtIndex:cont]];

    }
} 
```

我尝试保存 self.viewArray 但无法保存。并取回。

是否可以这样做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:49:49.410

我正在做类似的事情并创建了一个类来将不同分支的状态保存到`NSUserDefaults`. 当每个场景加载时，我调用一个类方法来保存当前场景为分支名称。

这是课程：

接口文件：

```
#import <Foundation/Foundation.h>

@interface SceneController : NSObject

+(NSString *)getSceneNameWithBranchName:(NSString *)name;

+(void)saveSceneNameWithBranchName:(NSString *)name andSceneName:(NSString *)sceneName;

@end 
```

实现文件：

```
#import "SceneController.h"

@implementation SceneController

+(NSString *)getSceneNameWithBranchName:(NSString *)name {
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSString *sceneName = [prefs valueForKey:name];

    return sceneName;
}

+(void)saveSceneNameWithBranchName:(NSString *)name andSceneName:(NSString *)sceneName {
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setValue:sceneName forKey:name];
    [prefs synchronize];
}

@end 
```

这对我来说效果很好，并且可以在应用重新启动后继续存在。

# .htaccess - PHP：标头过期不起作用

> ID：12935560
> 
> 赞同：7
> 
> 时间：2012-10-17T13:35:09.343
> 
> 标签：.htaccess, mod-expires, response-headers, expires-header

我的PHP代码：

```
$expires_date = date('D, j F Y H:i:s', strtotime('now + 10 years')) . ' GMT';           
header("Expires: $expires_date");
header('Content-type: text/javascript');

echo 'hello world'; 
```

当我检查响应标头时，我看到：

`Expires:Thu, 01 Jan 1970 00:00:00 GMT`

我究竟做错了什么？

**更新：**

只是在试验，但似乎我什至无法通过`header_remove('Expires');`. 我仍然看到 1970 年的日期。

**更新：**

我的回复标题：

```
Cache-Control:private
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:74
Content-Type:text/javascript
Date:Wed, 17 Oct 2012 22:40:45 GMT
Expires:Thu, 01 Jan 1970 00:00:00 GMT
Keep-Alive:timeout=5, max=98
Server:Apache/2.2.21 (Win32) PHP/5.3.9
Vary:Accept-Encoding
X-Powered-By:PHP/5.3.9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T06:32:12.267

查看您的 htaccess 文件：

```
<FilesMatch "\.(htm|html|php)$">
        Header set Expires "Thu, 01 Jan 1970 00:00:00 GMT"

        # TODO: Google.com's setting are the following
        # Expires -1
        # Cache-Control private, max-age=0
</FilesMatch> 
```

看起来您`FilesMatch .php`正在覆盖 .htaccess`Content-Type:text/javascript`规则，并且 PHP expires 标头因为脚本是一个**.php**文件。

在你的 .htaccess 中注释掉这个 header expires，看看 PHP header +10 year expires 是否仍然给出 1970 年 1 月 1 日的日期

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T00:06:37.763

您有格式错误。

*   使用`d`代替`j`
*   使用`M`代替`F`
*   使用`gmdate()`代替`date()`

从[标题定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)（14.21）：

> 它的一个使用例子是
> 
> ```
>  Expires: Thu, 01 Dec 1994 16:00:00 GMT
> 
>  Note: if a response includes a Cache-Control field with the max-
>  age directive (see section 14.9.3), that directive overrides the
>  Expires field. 
> ```
> 
> HTTP/1.1 客户端和缓存必须像过去一样对待其他无效的日期格式，特别是包括值“0”（即“已经过期”）。
> 
> 为了将响应标记为“已经过期”，源服务器发送一个等于 Date 标头值的 Expires 日期。（请参阅第 13.2.4 节中的到期计算规则。）
> 
> 要将响应标记为“永不过期”，源服务器会在响应发送后大约一年发送 Expires 日期。HTTP/1.1 服务器不应该在未来一年以上发送 Expires 日期。

所以你不应该在未来发送超过一年的 Expires。而是指示永不过期省略标头或使用`Expires: -1`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:20:25.323

尝试使用：

// 再次重新验证标头

```
header("Cache-Control: no-cache, must-revalidate"); 
```

// 然后设置过期日期

```
header("Expires: Sat, 26 Jul 2011 05:20:00 GMT"); // Date to expire 
```

它以前解决了我的问题

# java - Derby 数据库不支持 @Column 注释中的 columnDefinition="LONGTEXT" 吗？

> ID：12935561
> 
> 赞同：1
> 
> 时间：2012-10-17T13:35:11.297
> 
> 标签：java, jpa, junit, derby

我正在使用嵌入式 Apache Derby 数据库进行 JUnit 测试。我有一些 JPA 实体。有些实体包含这样的列：

```
@Column(nullable = false)
private String rawResults; 
```

这一切都适用于嵌入式 Derby，直到我厌倦了在生成的查询中替换`TEXT`into ，所以我制作了这样的列：`LONGTEXT``openjpa-maven-plugin`

```
@Column(nullable = false, columnDefinition = "LONGTEXT")
private String rawResults; 
```

现在`openjpa-maven-plugin`正在生成`LONGTEXT`而不是`TEXT`. 但这仅在我跳过测试时才有效。

然后我运行我的测试并进行了 Derby，所以一切都失败了，并出现如下错误：

```
org.apache.openjpa.lib.jdbc.ReportingSQLException: TYPE 'LONGTEXT' does not exist. {stmnt 23146419 CREATE TABLE Assessment -- Assessment_JpaImpl 
```

我正在使用 Derby 10.9.1.0，据我了解它不支持`columnDefinition = "LONGTEXT"`. 这是正确的吗？或者我需要设置一些配置让 derby 支持这个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:25:26.720

以下是 Derby 数据类型：[http ://db.apache.org/derby/docs/10.9/ref/crefsqlj31068.html#crefsqlj31068](http://db.apache.org/derby/docs/10.9/ref/crefsqlj31068.html#crefsqlj31068)

# c++ - Google 协议缓冲区 - 64 位 Vs2010

> ID：12935566
> 
> 赞同：-2
> 
> 时间：2012-10-17T13:35:33.307
> 
> 标签：c++, visual-studio-2010, protocol-buffers

我试图在 Vs2010 中构建 64 位的 Google 协议，但我收到了大量的链接器和其他错误。我下载了 protobuf-2.4.1.zip 并进入“vsprojects”文件夹，然后在 VS2010 中以 64 位架构打开 sln 文件。关于如何构建它的任何解决方案？这些是错误。

```
Error   2   error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    757 1   gtest
Error   5   error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    761 1   gtest
Error   8   error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    769 1   gtest
Error   11  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    773 1   gtest
Error   14  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    781 1   gtest
Error   17  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    785 1   gtest
Error   20  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    793 1   gtest
Error   23  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    797 1   gtest
Error   26  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    805 1   gtest
Error   29  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    809 1   gtest
Error   32  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    817 1   gtest
Error   35  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    821 1   gtest
Error   38  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    829 1   gtest
Error   41  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    833 1   gtest
Error   44  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    841 1   gtest
Error   47  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    845 1   gtest
Error   50  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    853 1   gtest
Error   53  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    857 1   gtest
Error   56  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    865 1   gtest
Error   59  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    869 1   gtest
Error   62  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    876 1   gtest
Error   65  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    882 1   gtest
Error   69  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    757 1   gtest
Error   72  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    761 1   gtest
Error   75  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    769 1   gtest
Error   78  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    773 1   gtest
Error   81  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    781 1   gtest
Error   84  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    785 1   gtest
Error   87  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    793 1   gtest
Error   90  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    797 1   gtest
Error   93  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    805 1   gtest
Error   96  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    809 1   gtest
Error   99  error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    817 1   gtest
Error   102 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    821 1   gtest
Error   105 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    829 1   gtest
Error   108 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    833 1   gtest
Error   111 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    841 1   gtest
Error   114 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    845 1   gtest
Error   117 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    853 1   gtest
Error   120 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    857 1   gtest
Error   123 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    865 1   gtest
Error   126 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    869 1   gtest
Error   129 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    876 1   gtest
Error   132 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    882 1   gtest
Error   136 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    757 1   gtest
Error   139 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    761 1   gtest
Error   142 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    769 1   gtest
Error   145 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    773 1   gtest
Error   148 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    781 1   gtest
Error   151 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    785 1   gtest
Error   154 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    793 1   gtest
Error   157 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    797 1   gtest
Error   160 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    805 1   gtest
Error   163 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    809 1   gtest
Error   166 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    817 1   gtest
Error   169 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    821 1   gtest
Error   172 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest

\include\gtest\internal\gtest-tuple.h   829 1   gtest
    Error   175 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    833 1   gtest
    Error   178 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    841 1   gtest
    Error   181 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    845 1   gtest
    Error   184 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    853 1   gtest
    Error   187 error C2039: 'type' : is not a member of 'std::tr1::tuple_element'  c:\users\Adam\downloads\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h    857 1   gtest
 2.4.1\gtest\include\gtest\internal\gtest-tuple.h   745 1   test_plugin
    Error   471 error LNK1104: cannot open file 'C:\Users\Adm\Downloads\protobuf-2.4.1\protobuf-2.4.1\vsprojects\Debug\libprotobuf.lib' C:\Users\Adam\Downloads\protobuf-2.4.1\protobuf-2.4.1\vsprojects\LINK   protoc
    Error   482 error MSB6006: "cmd.exe" exited with code 9009\. C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets   151 6   lite-test
    Error   542 error MSB6006: "cmd.exe" exited with code 9009\. C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets   151 6   tests 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:56:28.070

这些错误在`gtest`项目中，`libprotobuf`应该编译和链接正常。如果您需要更改 protobuf 库并在其上运行测试，请尝试单独下载[gtest](http://code.google.com/p/googletest/)框架，我认为旧版本与 protobuf 捆绑在一起，新版本应该与 VS2010 构建良好。

# java - SwingWorker 中抛出异常

> ID：12935568
> 
> 赞同：1
> 
> 时间：2012-10-17T13:35:37.250
> 
> 标签：java, swing, swingworker

我正在尝试`SwingWorker`在类的`importData(..)`方法中使用 a `TransferHandler`（以支持拖放）。我想显示我拖动的文件的导入进度。但是，它不起作用。我不明白问题是什么，或者是什么原因造成的。

```
private class FileImportTransferHandler extends TransferHandler {

    @Override
    public boolean importData(JComponent comp, final Transferable t) {

        SwingWorker<Void, String> worker = new SwingWorker<Void, String>() {

            @Override
            protected Void doInBackground() throws Exception {
                //When commenting this code it and everything else it doesn't
                DataFlavor[] flavors = t.getTransferDataFlavors(); //<---- throws exception 
                //..more code that doesn't run.
            }

            @Override
            protected void done() {
                super.done();

                try {
                    get();
                } catch (InterruptedException ex) {
                    Logger.getLogger(ImportBeanController.class.getName()).log(Level.SEVERE, null, ex);
                } catch (ExecutionException ex) {
                    Logger.getLogger(ImportBeanController.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
       //Starting worker etc here.
    }       
} 
```

例外：

> java.util.concurrent.ExecutionException: java.lang.NullPointerException at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222) at java.util.concurrent.FutureTask.get(FutureTask.java:83) at javax.swing.SwingWorker.get(SwingWorker.java:582) 在 com.jatech.app.controllers$ImportBeanController$1.done(ImportBeanController.java:158) 在 javax.swing.SwingWorker$5.run(SwingWorker.java:717)在 javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:814) 在 sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:95) 在 javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:824) 在javax.swing.Timer.fireActionPerformed(Timer.java:291) 在 javax.swing.Timer$DoPostEvent.run(Timer.java:221) 在 java.awt.event.InvocationEvent。dispatch(InvocationEvent.java:209) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641) at java.awt.EventQueue.access$000(EventQueue.java:84) at java.awt.EventQueue$1.run(EventQueue .java:602) 在 java.awt.EventQueue$1.run(EventQueue.java:600) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87) 在java.awt.EventQueue.dispatchEvent(EventQueue.java:611) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184) 在 java.awt.EventDispatchThread .pumpEventsForHierarchy(EventDispatchThread.java:174) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 引起：java.lang.NullPointerException 在 sun.awt.dnd.SunDropTargetContextPeer.getTransferDataFlavors (SunDropTargetContextPeer.java:176) 在 sun.awt.datatransfer.TransferableProxy.getTransferDataFlavors(TransferableProxy.java:48) 在 java.awt.dnd.DropTargetContext$TransferableProxy.getTransferDataFlavors(DropTargetContext.java:327)getTransferDataFlavors(TransferableProxy.java:48) 在 java.awt.dnd.DropTargetContext$TransferableProxy.getTransferDataFlavors(DropTargetContext.java:327)getTransferDataFlavors(TransferableProxy.java:48) 在 java.awt.dnd.DropTargetContext$TransferableProxy.getTransferDataFlavors(DropTargetContext.java:327)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:49:21.760

*   你没有参考`SwingWorker`和任何被/被调用的东西`doInBackground()`

*   请阅读[@trashgod 对我关于类似问题的问题的回答](https://stackoverflow.com/a/7054627/714968)

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，因为 FileIO 可能还有另一个问题（您可以即时生成文件到 \temp），

*   [我发现了另外两三个问题](https://stackoverflow.com/questions/7787998/how-to-generate-exceptions-from-repaintmanager)，也许是错误，也许不是，解决了`paintImmediately()`

# java - 在定期付 款贝宝中获取“令牌无效”和错误代码 11502

> ID：12935569
> 
> 赞同：0
> 
> 时间：2012-10-17T13:35:43.877
> 
> 标签：java, paypal

我正在使用贝宝订阅按钮和定期付款。

我按照贝宝网站的步骤创建了定期付款流程。

我创建了订阅按钮，并在我的代码中调用`SetExpressCheckout`并获得了一个运行良好的令牌。但是当我调用`CreateRecurringPaymentsProfileAPI`并传递从`setExpressCheckout`api 获得的令牌时，它会失败。

它说令牌无效并收到错误代码`11502`。

这是我收到的响应消息

```
TIMESTAMP=2012%2d10%2d17T13%3a22%3a12Z&CORRELATIONID=b64d1f16700ba&ACK=Failure&VERSION=57%2e0&BUILD=3926908&L_ERRORCODE0=11502&L_SHORTMESSAGE0=Invalid%20Token&L_LONGMESSAGE0=The%20token%20is%20invalid&L_SEVERITYCODE0=Error 
```

我尝试使用soap api和ad NVP api但得到同样的错误。

这是我的 SetExpressCheckout Api 调用代码

```
 encoder.add("RETURNURL", returnURL);
            encoder.add("CANCELURL", cancelURL);
            encoder.add("AMT", amount);
            encoder.add("PAYMENTACTION", paymentType);
            encoder.add("CURRENCYCODE", currencyCode);
            encoder.add("DESC", "Monthly Subscription");
            encoder.add("BILLINGTYPE","RecurringPayments"); 
```

和 CreateRecrringPayment api 调用代码

```
 encoder.add("METHOD", "CreateRecurringPaymentsProfile");
        encoder.add("TOKEN", getToken);
        encoder.add("AMT", "25.00");
        encoder.add("CURRENCYCODE", "USD");
        encoder.add("PROFILESTARTDATE", "2012-10-17 12:00:00");
        encoder.add("BILLINGPERIOD", "Day");
        encoder.add("BILLINGFREQUENCY", "1");
        encoder.add("VERSION", "51.0");
        encoder.add("PROFILEREFERENCE", "795");
        encoder.add("MAXFAILEDPAYMENTS", "1");
        encoder.add("DESC", "USBSwiper Monthly Subscription");
        encoder.add("AUTOBILLAMT", "AddToNextBilling");
        encoder.add("LOCALECODE", "US");
        encoder.add("BUTTONSOURCE", "test product"); 
```

请提出一些建议，如果可能的话，在 java soap 或 nvp api 中分享一些工作代码。

提前致谢`enter code here`

# android - 如何在 ActionBarSherlock 中更改 xlarge 屏幕上的布局

> ID：12935570
> 
> 赞同：2
> 
> 时间：2012-10-17T13:35:47.683
> 
> 标签：android, android-layout, tabs, actionbarsherlock, padding

我正在构建一个使用 ActionBarSherlock 的应用程序。我需要更改它的布局，因此没有填充环绕选项卡图标。现在看起来像这样：

```
| tab1 |  tab2 | tab3 | t 
```

但我想要这样：

```
 |tab1|tab2|tab3|tab4| 
```

通过更改该文件，我设法在正常大小的屏幕上这样做：

```
 library/res/values/abs__styles.xml 
```

但是在我的 Galaxy S3 上仍然有填充，我尝试从以下位置更改填充：

```
 library/res/values-xlarge/abs__dimens.xml 
```

但没有效果。我也尝试删除它，但仍然没有任何变化。

编辑：

仅供参考，我只使用图标而不使用顶部文本。我所有的图标都在 drawable-hdpi 中，这可能是个问题吗？我不这么认为，因为它们没有被重新占用，或者只是填充物出现：S

那就是价值观。

所以我也尝试用注释掉所有行

```
<dimen name="abs__action_bar_icon_vertical_padding">0dip</dimen> 
```

但没有效果……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T10:09:55.720

Action Bar Sherlock 库有一些限制。

**限制 1：无法调整操作栏中的操作菜单项**

**描述：您可以在操作栏中有不同的操作菜单项，也可以在操作栏中设置这些项目的图标。但是，调整操作项之间的填充，为操作栏中的操作项删除 Toast 是不可能的。因为 Action bar Sherlock 使用原生的 action bar。只有外观与 ICS 相似，但行为受到限制。**

**限制 2：活动娱乐**

**描述：当屏幕方向改变时，它将重新创建处于活动状态的活动。所以用户界面会更新，也不会保存应用程序或活动的状态。注意动作栏 Sherlock**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:15:46.070

如果您的 Galaxy S3 正在运行 ICS 或更高版本，ABS 将使用本机操作栏。您对库所做的任何更改都将无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T19:13:15.683

我不会直接将 ABS 用于选项卡导航。考虑使用与 ABS 兼容的 Viewpager 和 ViewPagerIndicator（同一作者），并且您可以更好地控制外观。这样用户也可以左右滑动来切换标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T19:32:31.527

无论如何都会发生这种情况？老实说，我并没有在原生操作栏上玩太多。如果你做类似[inset drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Inset)的事情怎么办？这会改变它的绘制方式并可能缩小图标，但在你找到更好的东西之前可能是一个解决方案。

# bash - bash 脚本：执行命令并将其输出传递给 awk

> ID：12935572
> 
> 赞同：2
> 
> 时间：2012-10-17T13:35:51.777
> 
> 标签：bash, awk, cluster-computing

我在使用 bash 脚本时遇到问题。基本上，在我的脚本中我运行命令

```
bjobs -u $1 
```

$1 是脚本参数，它是我集群上用户的 ID。如果用户 $1 在集群上没有正在运行/挂起的作业，则 bjob​​s 打印

```
 No unfinished jobs found 
```

到标准输出。此外，退出状态为 255。如果用户 $1 确实有作业，则 bjob​​s 打印：

```
JOBID   USER    STAT  QUEUE      FROM_HOST   EXEC_HOST   JOB_NAME   SUBMIT_TIME
45823   .......
45824   .......
.
. 
```

退出状态为 0。我希望 awk 解析 bjob​​s 的输出。我试过了

```
bjobs -u $1 | awk '...' 
```

其中 '...' 是我的 awk 解析程序。这不太好用，因为显然当用户 $1 没有运行/挂起的作业时，字符串“No unfinished jobs found”***不会***传递给 awk。同样的情况发生在

```
bjobs -u $1 > foo
awk '...' foo 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T13:43:27.927

也许该消息（我猜是某种错误）将出现在 STDERR 而不是 STDOUT 中。

您可以使用 > 将 bash 中的 IO 流重定向到文件描述符，而 2 是 STDERR。

尝试：

```
bjobs -u $1 2>&1 | awk '...' 
```

看看这是否能解决你的问题。2>&1 部分意味着将 STDERR (2) 重定向到 STDOUT (1)，而 STDOUT 是通过管道传输到 awk 的。

更多信息：[http ://www.tldp.org/LDP/abs/html/io-redirection.html](http://www.tldp.org/LDP/abs/html/io-redirection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:39:34.253

bjobs 可能会向 stderr 打印“未找到未完成的作业”。

添加 2>&1 将标准错误传送到标准输出。

[有关 bash IO 重定向的更多信息](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)

# vba - 外表。将文件夹添加到收藏夹组

> ID：12935579
> 
> 赞同：6
> 
> 时间：2012-10-17T13:35:57.247
> 
> 标签：vba, outlook, favorites

我现在正在处理 Outlook 宏，以将选定的文件夹添加到 Outlook 的收藏夹组。我试过用这个方法

```
Sub AddToFavorites()
  Dim olapp As Outlook.Application
  Dim objFolder As Outlook.MAPIFolder
  Set olapp = New Outlook.Application
  Set objFolder = olapp.ActiveExplorer.CurrentFolder
  objFolder.AddToPFFavorites 
End Sub 
```

但是 AddToPFFavorites 方法抛出错误“尝试的操作失败。找不到对象”。

我尝试使用上下文菜单中的“在收藏夹中显示”操作将目标文件夹添加到收藏夹，因为结果文件夹已在收藏夹组中显示而没有错误。

我的问题是：如何将文件夹添加到收藏夹组？“在收藏夹中显示”操作的 VBA 等效项是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:28:06.913

您可以通过访问邮件模块来管理 Outlook**收藏夹组。**[`NavigationPane`](http://msdn.microsoft.com/en-us/library/office/ff868233.aspx)

```
Outlook.MailModule mailModule = ThisAddIn.Application.ActiveExplorer().NavigationPane.Modules.GetNavigationModule(Outlook.OlNavigationModuleType.olModuleMail) as Outlook.MailModule;
Outlook.NavigationGroup favGroup = mailModule.NavigationGroups.GetDefaultNavigationGroup(Outlook.OlGroupType.olFavoriteFoldersGroup);
favGroup.NavigationFolders.Add(objFolder); 
```

# google-analytics - 如何在 google analytice 电子商务跟踪中查看城市/州/国家/地区？

> ID：12935586
> 
> 赞同：2
> 
> 时间：2012-10-17T13:36:25.657
> 
> 标签：google-analytics

我想使用谷歌分析电子商务来满足一些要求。所以，我使用了谷歌的以下代码片段。

```
_gaq.push(['_setAccount', 'UA-XXXXX-X']);
_gaq.push(['_trackPageview']);
_gaq.push(['_addTrans',
   '1234',           // order ID - required
   'Womens Apparel', // affiliation or store name
   '28.28',          // total - required
   '1.29',           // tax
   '15.00',          // shipping
   'San Jose',       // city
   'California',     // state or province
   'USA'             // country
]);
_gaq.push(['_addItem',
   '1234',           // order ID - necessary to associate item with transaction
   'DD44',           // SKU/code - required
   'T-Shirt',        // product name
   'Olive Medium',   // category or variation
   '11.99',          // unit price - required
   '1'               // quantity - required
]);
_gaq.push(['_trackTrans']); 
```

因此，有了这个代码示例，我的交易就会被跟踪。

但在我的谷歌分析资料中，我没有看到城市、州、国家。尽管正在跟踪诸如 order_id、运输等 SKU 等其他详细信息。

如果您对此有任何想法，请告诉我。

谢谢，乌塔姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:39:59.277

> addTrans 方法中的所有其他变量都是可选的。
> 
> *   附属字段不是必需的，已从 Google Analytics（分析）电子商务报告中删除。您仍然可以使用附属字段进行自定义报告和过滤。
>     
>     
> *   如果您有权访问这些变量，则税金和运费会出现在交易报告中。
>     
>     
> *   **Google Analytics 目前未使用城市、州和国家/地区，但仍在收集信息。但是，如果您需要这些字段，您可以在配置文件过滤器中使用它们。**

资料来源：[http ://www.roirevolution.com/blog/2009/05/stressing_about_your_ga_ecommerce.php](http://www.roirevolution.com/blog/2009/05/stressing_about_your_ga_ecommerce.php)

# java - Java：确定字符串是否满足多个标准的有效方法？

> ID：12935588
> 
> 赞同：1
> 
> 时间：2012-10-17T13:36:29.120
> 
> 标签：java, string, algorithm

我想找到一种**有效**的方法（不扫描字符串 10,000 次，或者创建大量中间字符串来保存临时结果，或者字符串抨击等）来编写一个接受字符串并确定它是否符合以下标准的方法：

*   长度至少为 2 个字符
*   第一个字符是大写的
*   第一个字符后的剩余子字符串至少包含 1 个小写字符

到目前为止，这是我的尝试：

```
private boolean isInProperForm(final String token) {
    if(token.length() < 2)
        return false;

    char firstChar = token.charAt(0);
    String restOfToken = token.substring(1);
    String firstCharAsString = firstChar + "";
    String firstCharStrToUpper = firstCharAsString.toUpperCase();

    // TODO: Giving up because this already seems way too complicated/inefficient.
    // Ignore the '&& true' clause - left it there as a placeholder so it wouldn't  give a compile error.
    if(firstCharStrToUpper.equals(firstCharAsString) && true)
        return true;

    // Presume false if we get here.
    return false;
} 
```

但正如你所看到的，我已经有 1 个`char`和 3 个临时字符串，而且感觉有些不对劲。一定有更好的方法来写这个。这很重要，因为此方法将被调用数千次（对于文本文档中的每个标记化单词）。所以它真的需要高效。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T13:40:52.160

这个函数应该覆盖它。每个 char 只检查一次，并且不创建任何对象。

```
public static boolean validate(String token) {
  if (token == null || token.length() < 2) return false;
  if (!Character.isUpperCase(token.charAt(0)) return false;
  for (int i = 1; i < token.length(); i++)
    if (Character.isLowerCase(token.charAt(i)) return true;
  return false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:40:21.973

第一个标准很简单`length`- 此数据缓存在字符串对象中，不需要遍历字符串。

您可以使用[`Character.isUpperCase()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isUpperCase%28char%29)来确定第一个字符是否为大写。也不需要遍历字符串。

最后一个条件需要对字符串进行一次遍历，并在您第一次找到小写字符时停止。

* * *

PS 组合 2+3 标准的另一种方法是使用[**正则表达式**](http://docs.oracle.com/javase/tutorial/essential/regex/)（不是更有效 - 但更优雅）：

```
return token.matches("[A-Z].*[a-z].*"); 
```

正则表达式正在检查字符串是否以大写字母开头，然后是包含至少一个小写字符的任何序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:41:08.917

*   长度至少为 2 个字符
*   第一个字符是大写的
*   第一个字符后的剩余子字符串至少包含 1 个小写字符

代码：

```
private boolean isInProperForm(final String token) {
    if(token.length() < 2) return false;
    if(!Character.isUpperCase(token.charAt(0)) return false;
    for(int i = 1; i < token.length(); i++) {
        if(Character.isLowerCase(token.charAt(i)) {
            return true; // our last criteria, so we are free 
                         // to return on a met condition
        }
    }
    return false; // didn't meet the last criteria, so we return false
} 
```

如果您添加了更多条件，则必须修改最后一个条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T13:45:35.353

关于什么：

```
return token.matches("[A-Z].*[a-z].*"); 
```

该正则表达式以一个大写字母开头，后面至少有一个小写字母，因此符合您的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-13T10:28:37.647

return token.matches("[AZ]. *[az].* ");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T13:39:47.460

要查找第一个字符是否为大写：

```
Character.isUpperCase(token.charAt(0)) 
```

检查是否至少有一个小写字母：

```
if(Pattern.compile("[a-z]").matcher(token).find()) {
    //At least one lowercase
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T13:39:52.407

要检查第一个字符是否为大写，您可以使用：

```
Character.isUpperCase(s.charAt(0)) 
```

# javascript - 如何根据窗口大小调整网页内容的大小

> ID：12935595
> 
> 赞同：0
> 
> 时间：2012-10-17T13:36:40.387
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个网页。它具有左右两个区域的内容。直到现在，我正在一个特定的窗口大小上测试它，它位于中心并且大小完全适合。但是，一旦我将它最小化或在不同大小的监视器上打开它，它就不会根据它调整大小。我该怎么做。这是我正在处理的网络链接。

[http://jsfiddle.net/efyJF/](http://jsfiddle.net/efyJF/)。

如果您看到，现在侧边的内容是固定大小的。所以，我需要一直向右滚动才能看到右内容边框的结尾。

我觉得这不是正常网页的工作方式。我怎样才能解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:53:15.093

您可以使用百分比来定义您的 css 值，`width: 20%`而不是使用固定值。或者尝试使用像[Blueprint](http://www.blueprintcss.org/)或[960 Grid System](http://960.gs/)这样的 css 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:51:58.107

如果我理解正确，您正在寻找这样的[东西](http://jsfiddle.net/aXsZK/)

容器具有`margin: 0 auto;`将其置于中心的属性，然后子 div 占据该父 div 的百分比。父级 (#container) 可以调整大小，子级将适当地填充它。

您犯的错误是使用绝对定位，这将完美地对齐您的屏幕，但其他屏幕看起来不一样。

# c++ - 将多个参数传递给 _beginThreadEx

> ID：12935602
> 
> 赞同：2
> 
> 时间：2012-10-17T13:37:00.193
> 
> 标签：c++, windows, multithreading, parameters, beginthreadex

是否可以将多个参数传递给 beginthreadex？

我知道我可以创建一个类或结构，但是如果我有一些不相关的数据我不想合并到一个类或结构中怎么办？

Boost库似乎允许多个参数，但我将如何为标准c ++ _beginThreadEx做多个参数？

```
#include <iostream>
#include <process.h>

unsigned __stdcall myThread(void *data)
{
    //C:\dev\default threads\_threads.cpp|6|error: invalid conversion from 'int*' to 'int' [-fpermissive]|
    int *x = static_cast<int*>(data);

    //int *x = (int*)data;

    std::cout << "Hello World! " << x;
}

int main()
{

    int x = 10;
    _beginthreadex(NULL, 0, myThread, &x, 0, NULL);
    while(true);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T13:40:11.860

定义一个结构或类。即使看起来发送单独值的东西最终也会在下面做同样的事情。你的两个值*是*相关的——至少，它们都是你的线程函数的参数。

# iphone - 来自 AppDelegate 的 NSNumber 无法正确比较

> ID：12935603
> 
> 赞同：4
> 
> 时间：2012-10-17T13:37:02.733
> 
> 标签：iphone, objective-c, nsnumber

我所拥有的是 a `NSNumber`，它是在 中创建的，`AppDelegate`并且持有 a`numberWithBool:TRUE`和 a `ViewController`，应该在其中进行比较。

我的问题是，`ViewController`不承认 my`NSNumber`设置为**1**。调试器证明`NSNumber`确实设置为**1**但没有发生任何事情。

```
if([appDelegate.gotUrl isEqualToNumber:[NSNumber numberWithBool:TRUE]])
{
    //will do nothing
} 
```

我的问题有什么解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T13:45:51.193

```
if([appDelegate.gotUrl boolValue])
{
    // might do something
} 
```

# javascript - jQuery 滑块动画

> ID：12935609
> 
> 赞同：0
> 
> 时间：2012-10-17T13:37:18.023
> 
> 标签：javascript, jquery

我想用 jquery animate 创建一个滑块，我想不出如何旋转和动画下一个元素这里是我的 HTML

```
 <div id="slider">
      <a href="http://somthing/" target="_blank">
        <img src="http://something/logosponso.jpg" title="Another" />
      </a>
      <a href="http://somthing2/" target="_blank">
        <img src="http://something/logosponso2.jpg" title="Another" />
      </a>
     …
     … 
```

我有第一个隐藏在 css 中的标签

```
 #slider a{
    display: none;
  } 
```

我想要发生的是在延迟 4 秒后，我淡入或滑入下一个标签并隐藏当前的一些动画。我想这样做直到我到达最后一个标签然后我想绕回第一个标签

到目前为止，我有这个，不确定我是否朝着正确的方向前进……有什么想法吗？

```
$("#slider a").fadeIn(500).delay(3000) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:02:14.223

```
$("#slider a:first").show();

$('#slider a').click(function(e) {
   e.preventDefault();
   $(this).hide();
   if ($(this).is('#slider a:last')) {
      $('#slider a:first').fadeIn(500);
   } else {
      $(this).next().fadeIn(500);
   }
}); 
```

我其实不明白你需要什么。但是，如果您想在页面上显示`$(document).ready(...`，您可以尝试下面的代码并根据需要进行修改：

```
$(document).ready(function() {
   $('#slider a').each(function() {
      if ($(this).is('#slider a:first')) {
         $(this).fadeIn(500);
      } else {
         if ($(this).prev().not(':hidden')) {
            $(this).fadeIn(500);
         }
      }
   });
}); 
```

# java - CodeModel 如何使用 com.sun.codemodel 在特定索引处获得价值

> ID：12935613
> 
> 赞同：2
> 
> 时间：2012-10-17T13:37:30.697
> 
> 标签：java, arrays, sun-codemodel

我正在使用 com.sun.codemodel 来生成我的类。我需要根据索引参数动态获取数组值。

所以我有一个调用，假设返回一个数组

```
 JcodeModel model = new JCodeModel();
 JPackage jPackage = codeModel._package(packageName);
     .....
 JType personType = codeModel._ref(Person.class);
 jVar personObject = method.decl(personType, "person", JExpr._new(personType));
 personObject.invoke("getRoles");??? 
```

在这种情况下 getRoles() 返回一个数组，我想在特定索引处获取一个对象。像这样的东西

```
int index = 0;
Person person = new Person();
String role = person.getRoles()[index]; 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:17:32.370

不知道我是否正确，但也许以下内容对您有用：

```
JInvocation invocation = personObject.invoke("getRoles");
JArrayCompRef arrayCompRef = invocation.component(indexExpression); 
```

在以下 JavaDoc 中找到了这个： [http](http://codemodel.java.net/nonav/apidocs/com/sun/codemodel/JExpressionImpl.html#component(com.sun.codemodel.JExpression) ://codemodel.java.net/nonav/apidocs/com/sun/codemodel/JExpressionImpl.html#component(com.sun.codemodel.JExpression )

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:08:59.083

最坏的情况你总是可以使用 JBlock.directStatement()...

# visual-studio-2010 - 在 VS 2010 中集成 FxCop 使用 Addin 修改 csproj 文件

> ID：12935616
> 
> 赞同：1
> 
> 时间：2012-10-17T13:37:49.817
> 
> 标签：visual-studio-2010, build-automation, add-in, projects-and-solutions, fxcop

我在 TFS 中有很多项目，使用 VS2010。我有一个插件 VS2010，它为我的公司添加了一些新的业务功能。

现在，需要为旧项目和新项目集成 FxCop 和 Visual Studio 2010。

我（我们）不想将 FxCopCmd.exe 添加到我的构建后事件中以在每次编译时运行 FxCop。

我（我们）不想修改 Microsoft.CSharp.targets 或 Microsoft.Common.targets。

我希望程序员不要做任何事情，不要修改属性项目，不要修改 xml csproj 文件。

当程序员在解决方案资源管理器中对项目进行构建时，我希望能够运行 FxCop，并且在 Addin 中以编程方式构建时也能够运行：

```
solution.DTE.ExecuteCommand("Build.RebuildSolution", "");
project.DTE.ExecuteCommand("Build.RebuildSelection", ""); 
```

我认为更好的选择是在 Addin VS2010 中使用解决方案事件来修改 csproj 文件

```
solutionEvents.ProjectAdded
solutionEvents.Opened 
```

关于这一切有什么建议吗？任何示例源代码？

# java - struts2，使用静态参数调用会话变量方法

> ID：12935618
> 
> 赞同：0
> 
> 时间：2012-10-17T13:37:52.143
> 
> 标签：java, jsp, struts2, permissions, ognl

我不知道我的权限检查是否正确，但我正在这样做。

```
public class User {
   public boolean hasPermission (String permission){
       // codes here to check from Roles.permissions if permission parameter exists
       // return true if exists, otherwise return false
   }
} 
```

在我的 JSP 中，如果在会话中保存为“currentUser”的用户没有“save.settings”权限，我想隐藏一个按钮。

为了组织我的代码，我声明了一个接口：

```
public interface Permission {
    public static final String SAVE_SETTINGS = "save.settings";
} 
```

这样我就可以在检查权限时访问我的 JSP 中的静态变量。

现在我如何在我的 JSP 中做到这一点？我试过了...

```
<s:if test="{#session.currentUser.hasPermission(@my.pkg.Permission@SAVE_SETTINGS)}">
     <div>
        <input id="iSave" type="button" value="Save" /> 
    </div>
</s:if> 
```

但它不起作用。

```
<constant name="struts.ognl.allowStaticMethodAccess" value="true"/> 
```

也在我的 struts.xml 中设置

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:43:23.160

利用

```
<s:if test="#session['currentUser'].hasPermission(@my.pkg.Permission@SAVE_SETTINGS)"> 
```

或者

```
<s:if test="#session.currentUser.hasPermission(@my.pkg.Permission@SAVE_SETTINGS)"> 
```

# python - 安装 ZeroMQ 时出错

> ID：12935623
> 
> 赞同：2
> 
> 时间：2012-10-17T13:37:59.177
> 
> 标签：python, zeromq, pyzmq

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/zmq/__init__.py", line 51, in <module>
    from zmq import core, devices
  File "/usr/local/lib/python2.7/dist-packages/zmq/core/__init__.py", line 26, in <module>
    from zmq.core import (constants, error, message, context,
ImportError: /usr/local/lib/python2.7/dist-packages/zmq/core/socket.so: undefined symbol: 
zmq_sendmsg 
```

我正在克服错误。我已按照 ZeroMQ 官方网站上给出的步骤进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T13:05:23.667

在为 Java 构建时遇到了类似的问题`UnsatisifedLinkError`，在将`so`库复制到之后`/usr/local/lib`，似乎您的问题可能是一样的......我通过注销然后重新登录来修复它，我读到了一些关于库不可见的内容，直到用户重新登录，很奇怪，但它对我有用。

# ios - iOS人脸检测器方向和CIImage方向的设置

> ID：12935626
> 
> 赞同：3
> 
> 时间：2012-10-17T13:38:05.393
> 
> 标签：ios, face-detection, core-image, ciimage, cifacefeature

***编辑***发现此代码有助于处理前置摄像头图像[http://blog.logichigh.com/2008/06/05/uiimage-fix/](http://blog.logichigh.com/2008/06/05/uiimage-fix/)

希望其他人有类似的问题，可以帮助我。还没有找到解决办法。（它可能看起来有点长，但只是一堆帮助代码）

我在从相机（正面和背面）获取的图像以及来自画廊的图像上使用 ios 面部检测器（我正在使用`UIImagePicker`- 用于通过相机捕获图像和从画廊中选择图像 - 不使用 avfoundation像在 squarecam 演示中那样拍照）

我真的搞砸了检测的坐标（如果有的话），所以我写了一个简短的调试方法来获取人脸的边界以及一个在他们上面画一个正方形的实用程序，我想检查检测器的方向正在工作：

```
#define RECTBOX(R)   [NSValue valueWithCGRect:R]
- (NSArray *)detectFaces:(UIImage *)inputimage
{
    _detector = \[CIDetector detectorOfType:CIDetectorTypeFace context:nil options:\[NSDictionary dictionaryWithObject:CIDetectorAccuracyLow forKey:CIDetectorAccuracy\]\];
    NSNumber *orientation = \[NSNumber numberWithInt:\[inputimage imageOrientation\]\]; // i also saw code where they add +1 to the orientation
    NSDictionary *imageOptions = \[NSDictionary dictionaryWithObject:orientation forKey:CIDetectorImageOrientation\];

    CIImage* ciimage = \[CIImage imageWithCGImage:inputimage.CGImage options:imageOptions\];

    // try like this first
    //    NSArray* features = \[self.detector featuresInImage:ciimage options:imageOptions\];
    // if not working go on to this (trying all orientations)
    NSArray* features;

    int exif;
    // ios face detector. trying all of the orientations
    for (exif = 1; exif <= 8 ; exif++)
    {
        NSNumber *orientation = \[NSNumber numberWithInt:exif\];

        NSDictionary *imageOptions = \[NSDictionary dictionaryWithObject:orientation forKey:CIDetectorImageOrientation\];

        NSTimeInterval start = \[NSDate timeIntervalSinceReferenceDate\];

        features = \[self.detector featuresInImage:ciimage options:imageOptions\];

        if (features.count > 0)
        {
            NSString *str = \[NSString stringWithFormat:@"found faces using exif %d",exif\];
                    \[faceDetection log:str\];
            break;
        }
        NSTimeInterval duration = \[NSDate timeIntervalSinceReferenceDate\] - start;
        NSLog(@"faceDetection: facedetection total runtime is %f s",duration);
    }
    if (features.count > 0)
    {
        [faceDetection log:@"-I- Found faces with ios face detector"];
        for(CIFaceFeature *feature in features)
        {
            CGRect rect = feature.bounds;
            CGRect r = CGRectMake(rect.origin.x,inputimage.size.height - rect.origin.y - rect.size.height,rect.size.width,rect.size.height);
            [returnArray addObject:RECTBOX(r)];
        }
        return returnArray;
    } else {
        // no faces from iOS face detector. try OpenCV detector
    } 
```

[1]

在尝试了大量不同的图片后，我注意到人脸检测器的方向与相机图像属性不一致。我从前置摄像头拍摄了一堆照片，其中 uiimage 方向为 3（查询 imageOrientation），但人脸检测器没有为该设置找到人脸。当运行所有的 exif 可能性时，人脸检测器最终会拾取人脸，但都是针对不同的方向。

![1]: [http://i.stack.imgur.com/D7bkZ.jpg](http://i.stack.imgur.com/D7bkZ.jpg)

我该如何解决这个问题？我的代码有错误吗？

我遇到的另一个问题（但与面部检测器密切相关），当面部检测器拾取面部时，但是对于“错误”的方向（主要发生在前置摄像头上），`UIImage`最初使用的在 uiiimageview 中正确显示，但是当我绘制了一个方形叠加层（我在我的应用程序中使用 opencv，所以我决定将其转换`UIImage`为 cvmat 以使用 opencv 绘制叠加层）整个图像旋转 90 度（只有 cvmat 图像而不是`UIImage`最初显示的 i）

我能想到的原因是人脸检测器弄乱了 UIimage 转换为 opencv mat 正在使用的一些缓冲区（上下文？）。我怎样才能分离这些缓冲区？

将 uiimage 转换为 cvmat 的代码是（来自`UIImage`某人制作的“著名”类别）：

```
-(cv::Mat)CVMat
{

    CGColorSpaceRef colorSpace = CGImageGetColorSpace(self.CGImage);
    CGFloat cols = self.size.width;
    CGFloat rows = self.size.height;

    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data, // Pointer to backing data
                                                    cols, // Width of bitmap
                                                    rows, // Height of bitmap
                                                    8, // Bits per component
                                                    cvMat.step[0], // Bytes per row
                                                    colorSpace, // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), self.CGImage);
    CGContextRelease(contextRef);

    return cvMat;
}

- (id)initWithCVMat:(const cv::Mat&)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize() * cvMat.total()];

    CGColorSpaceRef colorSpace;

    if (cvMat.elemSize() == 1)
    {
        colorSpace = CGColorSpaceCreateDeviceGray();
    }
    else
    {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }

    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

    CGImageRef imageRef = CGImageCreate(cvMat.cols,                                     // Width
                                            cvMat.rows,                                     // Height
                                            8,                                              // Bits per component
                                            8 * cvMat.elemSize(),                           // Bits per pixel
                                            cvMat.step[0],                                  // Bytes per row
                                            colorSpace,                                     // Colorspace
                                            kCGImageAlphaNone | kCGBitmapByteOrderDefault,  // Bitmap info flags
                                            provider,                                       // CGDataProviderRef
                                            NULL,                                           // Decode
                                            false,                                          // Should interpolate
                                            kCGRenderingIntentDefault);                     // Intent   

     self = [self initWithCGImage:imageRef];
     CGImageRelease(imageRef);
     CGDataProviderRelease(provider);
     CGColorSpaceRelease(colorSpace);

     return self;
 }  

 -(cv::Mat)CVRgbMat
 {
     cv::Mat tmpimage = self.CVMat;
     cv::Mat image;
     cvtColor(tmpimage, image, cv::COLOR_BGRA2BGR);
     return image;
 }

 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    self.prevImage = img;
 //   self.previewView.image = img;
    NSArray *arr = [[faceDetection sharedFaceDetector] detectFaces:img];
    for (id r in arr)
    {
         CGRect rect = RECTUNBOX(r);
         //self.previewView.image = img;
         self.previewView.image = [utils drawSquareOnImage:img square:rect];
    }
    [self.imgPicker dismissModalViewControllerAnimated:YES];
    return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T07:39:53.000

我认为旋转整束图像像素并匹配 CIFaceFeature 不是一个好主意。您可以想象在旋转方向重绘非常繁重。我遇到了同样的问题，我通过转换 CIFaceFeature 相对于 UIImageOrientation 的坐标系来解决它。我用一些转换方法扩展了 CIFaceFeature 类，以获取关于 UIImage 及其 UIImageView（或 UIView 的 CALayer）的正确点位置和边界。完整的实现发布在这里：[https](https://gist.github.com/laoyang/5747004) ://gist.github.com/laoyang/5747004 。你可以直接使用。

这是 CIFaceFeature 中点的最基​​本转换，返回的 CGPoint 基于图像的方向进行转换：

```
- (CGPoint) pointForImage:(UIImage*) image fromPoint:(CGPoint) originalPoint {

    CGFloat imageWidth = image.size.width;
    CGFloat imageHeight = image.size.height;

    CGPoint convertedPoint;

    switch (image.imageOrientation) {
        case UIImageOrientationUp:
            convertedPoint.x = originalPoint.x;
            convertedPoint.y = imageHeight - originalPoint.y;
            break;
        case UIImageOrientationDown:
            convertedPoint.x = imageWidth - originalPoint.x;
            convertedPoint.y = originalPoint.y;
            break;
        case UIImageOrientationLeft:
            convertedPoint.x = imageWidth - originalPoint.y;
            convertedPoint.y = imageHeight - originalPoint.x;
            break;
        case UIImageOrientationRight:
            convertedPoint.x = originalPoint.y;
            convertedPoint.y = originalPoint.x;
            break;
        case UIImageOrientationUpMirrored:
            convertedPoint.x = imageWidth - originalPoint.x;
            convertedPoint.y = imageHeight - originalPoint.y;
            break;
        case UIImageOrientationDownMirrored:
            convertedPoint.x = originalPoint.x;
            convertedPoint.y = originalPoint.y;
            break;
        case UIImageOrientationLeftMirrored:
            convertedPoint.x = imageWidth - originalPoint.y;
            convertedPoint.y = originalPoint.x;
            break;
        case UIImageOrientationRightMirrored:
            convertedPoint.x = originalPoint.y;
            convertedPoint.y = imageHeight - originalPoint.x;
            break;
        default:
            break;
    }
    return convertedPoint;
} 
```

以下是基于上述转换的类别方法：

```
// Get converted features with respect to the imageOrientation property
- (CGPoint) leftEyePositionForImage:(UIImage *)image;
- (CGPoint) rightEyePositionForImage:(UIImage *)image;
- (CGPoint) mouthPositionForImage:(UIImage *)image;
- (CGRect) boundsForImage:(UIImage *)image;

// Get normalized features (0-1) with respect to the imageOrientation property
- (CGPoint) normalizedLeftEyePositionForImage:(UIImage *)image;
- (CGPoint) normalizedRightEyePositionForImage:(UIImage *)image;
- (CGPoint) normalizedMouthPositionForImage:(UIImage *)image;
- (CGRect) normalizedBoundsForImage:(UIImage *)image;

// Get feature location inside of a given UIView size with respect to the imageOrientation property
- (CGPoint) leftEyePositionForImage:(UIImage *)image inView:(CGSize)viewSize;
- (CGPoint) rightEyePositionForImage:(UIImage *)image inView:(CGSize)viewSize;
- (CGPoint) mouthPositionForImage:(UIImage *)image inView:(CGSize)viewSize;
- (CGRect) boundsForImage:(UIImage *)image inView:(CGSize)viewSize; 
```

（需要注意的另一件事是在从 UIImage 方向提取面部特征时指定正确的 EXIF 方向。相当混乱......这是我所做的：

```
int exifOrientation;
switch (self.image.imageOrientation) {
    case UIImageOrientationUp:
        exifOrientation = 1;
        break;
    case UIImageOrientationDown:
        exifOrientation = 3;
        break;
    case UIImageOrientationLeft:
        exifOrientation = 8;
        break;
    case UIImageOrientationRight:
        exifOrientation = 6;
        break;
    case UIImageOrientationUpMirrored:
        exifOrientation = 2;
        break;
    case UIImageOrientationDownMirrored:
        exifOrientation = 4;
        break;
    case UIImageOrientationLeftMirrored:
        exifOrientation = 5;
        break;
    case UIImageOrientationRightMirrored:
        exifOrientation = 7;
        break;
    default:
        break;
}

NSDictionary *detectorOptions = @{ CIDetectorAccuracy : CIDetectorAccuracyHigh };
CIDetector *faceDetector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:detectorOptions];

NSArray *features = [faceDetector featuresInImage:[CIImage imageWithCGImage:self.image.CGImage]
                                          options:@{CIDetectorImageOrientation:[NSNumber numberWithInt:exifOrientation]}]; 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T11:42:08.197

**iOS 10 and Swift 3**

You can check apple example you can **detect face** or value of **barcode** and **Qrcode**

[https://developer.apple.com/library/content/samplecode/AVCamBarcode/Introduction/Intro.html](https://developer.apple.com/library/content/samplecode/AVCamBarcode/Introduction/Intro.html)

# iphone - 通过数据库检索html数据的函数

> ID：12935636
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:38:20.503
> 
> 标签：iphone, objective-c, ios, xcode, ios5

任何人都可以帮助我通过数据库使用 webview 检索 html 数据的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:48:05.417

您可以使用

```
- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL 
```

由于您没有提及您正在使用哪个数据库，这就是为什么我无法为此添加代码。从 DB 获取数据后，您可以将字符串传递给 loadHTMLString。

[UIWebView 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html)

# c# - 内联模型编辑器 MVC3

> ID：12935638
> 
> 赞同：0
> 
> 时间：2012-10-17T13:38:28.927
> 
> 标签：c#, asp.net-mvc-3, http-post

Ola.. 我在编辑表格中的几个模型时遇到问题。我在页面上有一个模型列表（带有foreach），例如

```
<table id="grid-table" >

@foreach (var image in ViewBag.Images)
{
    <tr>

        <td >
            <a href="@Url.Action("ShowFullImage", new { id = @image.ID })" rel="lightbox[roadtrip]" title="@image.Description" >
                <img src="@Url.Action("ShowImageThumbneil", new { id = @image.ID })" alt="@image.AlternateText" />
            </a>
        </td>

        <td >
            @using (Html.BeginForm("SaveImageInfo", "Admin", FormMethod.Post))
            {
                @Html.TextAreaFor(m => m.Description) <br />
                @Html.TextBoxFor(m => m.AlternateText) <br />
                @Html.LabelFor(m => m.ID)

                <div id="item-post" >
                    <input title="Подтвердить" type="submit" value="Подтвердить" />
                </div>
            }
        </td>

    </tr>
} 
```

我想有一种方法来编辑一个模型项目。在控制器中，我有这样的东西：

```
 [HttpPost]
    public ActionResult SaveImageInfo(ImageModel imageModel)
    {
        Image img = _core.GetImageByID(_client, imageModel.ID);
        img.AlternateText = imageModel.AlternateText;
        img.Description = imageModel.Description;

        _core.SaveImageInfo(_client, img);
        return View();
    } 
```

但是，当然，它不起作用..有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:44:29.710

更改`@Html.LabelFor(m => m.ID)`为`@Html.HiddenFor(m => m.ID)`。标签的内容不随 POST 发送，但隐藏字段的内容是..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:43:35.570

我猜测了一下，因为我不知道您到底看到了什么问题，但如果它与尝试重定向有关，请在保存后尝试更改：

```
Html.BeginForm 
```

到

```
Ajax.BeginForm 
```

# css - 为什么这种图像替换技术不起作用？

> ID：12935640
> 
> 赞同：0
> 
> 时间：2012-10-17T13:38:35.133
> 
> 标签：css, image, replace

我正在尝试练习图像替换技术，主要用于导航目的。我似乎无法弄清楚为什么它不起作用。悬停有效，但默认菜单项无效。我很确定事情写得正确。

[http://lrroberts0122.github.com/DWS/practical/index.html](http://lrroberts0122.github.com/DWS/practical/index.html)

这是导航的 HTML：

```
<ul id="nav">
    <li id="process"><a href="index.html" id="active">Our Process</a></li>
    <li id="function"><a href="function.html">Bio-Built Function</a></li>
    <li id="future"><a href="future.html">The Future</a></li>
    <li id="engage"><a href="engage.html">Engage Dio</a></li>
</ul> 
```

这是我的导航 CSS：

```
#nav {
    list-style: none;
    width: 244px;
    height: 124px;
    overflow: hidden;
    }

#nav li {
    float: left;
    }

#nav li a {
    width: 244px;
    height: 30px;
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
    display: block;
    background: url('../img/bg_nav.png');
    }

#process {
    background-position: 0 0;
    }

#process:hover {
    background-position: -244px 0;
    }

#function {
    background-position: 0 -31px;
    }

#function:hover {
    background-position: -244px -31px;
    }

#future {
    background-position: 0 -60px;
    }

#future:hover {
    background-position: -244px -62px;
    }

#engage {
    background-position: 0 -90px;
    }

#engage:hover {
    background-position: -244px -93px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:50:24.110

首先，您在那里编写的选择器之一与我在网站上看到的不匹配：`#nav li a`在`#nav li`您的网站上。

其次，您需要注意 CSS 选择器的特殊性：

```
#nav li 
```

将否决：

```
#process 
```

但：

```
#nav #process 
```

不会被否决。

你可以在这里找到一篇关于特异性的非常好的文章：http: [//coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:18:01.547

我将包括：

```
#nav li a {
    width: 244px;
    height: 30px;
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
    display: block;
    background: url('../img/bg_nav.png');
    } 
```

在 #process 中（顺便说一下，类可能会更好地工作）

```
 #process {
        width: 244px;
        height: 30px;
        text-indent: 100%;
        white-space: nowrap;
        overflow: hidden;
        display: block;
        background: url('../img/bg_nav.png'); 
```

摆脱**CSS 而不是 HTML 中**的 #nav li a ，试试这个：

```
 #process {
        width: 244px;
        height: 30px;
        text-indent: 100%;
        white-space: nowrap;
        overflow: hidden;
        display: block;
        background: url('../img/bg_nav.png');
        background-position: 0 0;
}

 #process:hover {
    background-position: -244px 0;
} 
```

等功能和其他...

如果我遗漏了任何内容或您有任何问题，请在评论中包含。

# php - 面向对象的结账流程设计

> ID：12935642
> 
> 赞同：1
> 
> 时间：2012-10-17T13:38:38.220
> 
> 标签：php, oop

我的同事和我在过去的 2 个小时里一直在讨论，试图找出最好的方法来设计我们新的在线商店处理客户购物篮的方面，但我仍然不确定我们是否已经完成一个很好的结论。

这听起来像是一个相当基本的问题，但我们发现实际上系统的不同部分之间存在大量的相互依赖关系。

部分（到目前为止！）是：

*   购物篮（跟踪客户选择购买的产品）。
*   交易（定义产品的促销活动，例如“以 20 英镑购买 3 个 x”或“购买 2 个 x 并获得 1 个免费”）。
*   低订单费用（在一定价值下，订单会增加额外费用）。
*   运费（基于一系列选项）。
*   代金券兑换。
*   客户信用（客户可能在其帐户上有信用，将从订单总额中扣除）。

我对所有这些对象相互交谈并从彼此获取价值，然后根据这些价值采取行动感到非常紧张。我想象它会变成一个庞大、复杂、无法维护的纸牌屋。

我确信让我的系统的不同部分直接相互交谈是不好的做法，更不用说允许他们改变彼此的状态（不管他们如何做到这一点），因为系统的部分最终依赖于其他部分在运行时处于不同的状态，如果它们都可以相互交谈，我不能确定某些东西没有改变我所依赖的其他东西。

但是有很多例子我看不到任何其他方式。例如：

*   当客户在购物篮中结账时，“买 X 送 Y”的交易需要将 Y 产品添加到购物篮中。所以交易有效地看起来和影响篮子。
*   确定是否应用低订购费是基于篮子中产品的价值，但在多买折扣之后（例如，3 代表 2 的价格）。因此，它需要查看篮子，同时还要考虑交易。
*   购物篮还需要在客户浏览网站时显示总价值，该总价值应考虑与产品相关的交易，但仅此而已。

我怎样才能做到这样的事情，而不是让自己陷入困境并编写可能以意想不到的方式影响大量其他代码的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:21:40.563

您似乎有以下抽象实体：

*   篮子
*   交易
*   费用（低订单，运费）
*   信用（凭证，未偿信用）

您可能可以将这些概念包装到单个业务逻辑类中，该类使用多个网关来访问具体模型。乍一看，业务逻辑看起来是“将任何交易添加到篮子，应用任何费用，然后赎回任何信用选项。” 这些组件中的每一个似乎都是装饰器的集合，每个装饰器都有可能作用于篮子。

这里的业务逻辑类的工作是获取每个网关（交易、费用、信用）并迭代它们的各个组件。每个组件都将通过篮子并询问它是否应该影响它。如果篮子应该受到影响，则应该应用效果并且可以继续迭代。

通过这种方式，业务逻辑被保存在一个地方，它定义了操作的顺序。每个组件都通过业务逻辑松散耦合到篮子中。

**更新**：[一种可能的方法](http://yuml.me/dc1be595)。

# regex - 如何在R中替换部分搜索字符串

> ID：12935643
> 
> 赞同：1
> 
> 时间：2012-10-17T13:38:38.740
> 
> 标签：regex, r

```
string <- c("tyuynmklabcwsqzp") 
```

如果我的任务是用“abc123”替换每个“abc”，代码是，

```
gsub("abc", "\\1123", string) 
```

但是，如果我必须搜索“abc”然后将其替换为“c123”，那我该怎么做呢？有没有办法将正则表达式分成几部分，以便我可以像 \1 一样拥有 \2？如果可能的话，那么我的命令是，

```
gsub("abc", "\\2123", string). 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:47:22.273

您可以使用括号将正则表达式的各个部分组合在一起，随后将重复运算符或反向引用应用于匹配的组。

在你的情况下，试试这个：

```
string <- c("tyuynmklabcwsqzp")
gsub("(ab)(c)", "\\2123", string)
# [1] "tyuynmklc123wsqzp" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:46:18.893

尝试使用

```
gsub("(abc)", "\\1123", string)   # abc → abc123 
```

和

```
gsub("ab(c)", "\\1123", string)   # abc → c123 
```

# linux - 如何知道哪个实例删除了我在 Linux 服务器上的文件？

> ID：12935645
> 
> 赞同：0
> 
> 时间：2012-10-17T13:38:43.967
> 
> 标签：linux

我有一个工作流管道，它将定期在 Linux 服务器上生成数据文件，还有一个清理服务，它将删除一周前的数据文件。

但是，有时我会发现一个新生成的数据文件会丢失，这个文件肯定不会超过一周。我不确定这是清理服务的逻辑错误，还是另一个程序做到了。目前我不知道如何调查这个问题。是否有任何方法可以记录所有文件删除活动和相关的进程 ID 以及进程名称？

提前致谢。

# java - 应用程序在服务启动时崩溃

> ID：12935646
> 
> 赞同：1
> 
> 时间：2012-10-17T13:38:48.347
> 
> 标签：java, android, eclipse, service

我试图从活动中启动服务，但是当按钮单击调用它时，模拟器停止我的应用程序并告诉我：“应用程序（...）已意外停止。请再试一次”

**在我的清单中，我有**：

`<service android:name=".MainService" android:enabled="true" android:label="Main Service"></service>`

**我用来调用服务的代码（来自 TimerGuardActivity）**：

`Intent i = new Intent(TimerGuardActivity.this, MainService.class); i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); TimerGuardActivity.this.startService(i);`

**整个服务本身**：

```
package com.AirplaneModeGuard;

import java.util.Calendar;

import android.app.Service;

import android.content.Intent;

import android.content.SharedPreferences;

import android.os.IBinder;

import android.preference.PreferenceManager;

import android.provider.Settings;

public class MainService extends Service {

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;    

}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);

    SharedPreferences preferences =     PreferenceManager.getDefaultSharedPreferences(getApplicationContext());     
    boolean guardE = preferences.getBoolean("guardenabled", false);
    boolean nightE = preferences.getBoolean("nightsleepenabled", false);

    if(guardE&&!nightE)
    {
        guard(false,-1);            
    }
    if(guardE&&nightE)
    {
        guard(true,checkTimeForGuard());
    }
    if(nightE&&!guardE)
    {
        nightSleep(false);
    }
    if(!guardE&&!nightE)
    {
        Intent i=new Intent(this,MainService.class);
        stopService(i);   
    }

}

private void guard(final boolean nightsleeptoggled, final int timeToRun)
{
    if(nightsleeptoggled&&timeToRun==-1){
        nightSleep(true);
        return;
    }
    new Thread(new Runnable(){
           int minutesCount=0;
           SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
           int minNum = preferences.getInt("checkeveryM", 10) ;//shared preferences

            public void run() {

                if(nightsleeptoggled)
                {
            while(true)
            {
               try {
                Thread.sleep(60000); // one minute (1000= 1sec)
                minutesCount++;

                if(minutesCount>= timeToRun)
                    break;
                if(minutesCount % minNum==0)
                {

                ToggleAirplaneMode(false);
                    Thread.sleep(60000);
                ToggleAirplaneMode(true);

                }  
                   } 
               catch (InterruptedException e) 
               {
                e.printStackTrace();
               } 
            }
            nightSleep(true);
                }

                else
                {
                    minNum*=6000;
                    while(true)
                    {
                       try 
                       {
                        Thread.sleep(minNum); // one minute
                        ToggleAirplaneMode(false);
                            Thread.sleep(60000);
                        ToggleAirplaneMode(true);                          
                       } 
                       catch (InterruptedException e) 
                        {
                        e.printStackTrace();
                        } 
                  }                     
                }

            }
            }).start();
    return;

}

private void nightSleep(boolean guardE)
{

    int TimeToSleep = checkTimeToSleep();
    if(TimeToSleep<0)
    {
        guard(true,checkTimeForGuard());
        return;
    }
    try{
        ToggleAirplaneMode(false);
        Thread.sleep(TimeToSleep*1000);
        ToggleAirplaneMode(true);

        if(guardE)
        {
            guard(true, checkTimeForGuard());
        }
        return;
    }
    catch (InterruptedException e) 
    {
    e.printStackTrace();
    } 

}

private int checkTimeToSleep()//take values of sleeptime and wakeuptime from shared preferences and calculate the total amount of minutes to sleep 
    //if the current hour is after the sleeptime use it as the sleeptime.
{
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    int sleepM = preferences.getInt("SleepM", 0);
    int sleepH = preferences.getInt("SleepH", 0);
    int wakeupM = preferences.getInt("WakeUpM", 0);
    int wakeupH = preferences.getInt("WakeUpH", 0);
    int finalTime=0;
    Calendar c = Calendar.getInstance(); 
    int minutes = c.get(Calendar.MINUTE);
    int hours = c.get(Calendar.HOUR_OF_DAY);

    if(sleepH==wakeupH)
    {
        if(sleepM>wakeupM)
            finalTime =wakeupM-sleepM;
        else
            finalTime=1440-(wakeupM-sleepM);
    }

    if(sleepH>wakeupH)
    {
        if(hours<wakeupH || hours>sleepH)
        {
            if(hours<24 && hours>sleepH){
                sleepH=hours;
                sleepM=minutes;
            }
            else{
                sleepH= hours+24;
                sleepM=minutes;
                }
        }
        if(hours==sleepH && minutes>sleepM)
            sleepM=minutes;
        if(hours==wakeupH && minutes<wakeupM)
        {
            wakeupM=minutes;
            sleepH=hours+24;
        }
        finalTime = 60*(24-sleepH+wakeupH);
        finalTime+=(wakeupM-sleepM);
    }

    else if(sleepH<wakeupH)
    {
        if(hours>=wakeupH && hours<=sleepH)
        {
            sleepH=hours;
            sleepM=minutes;
        }
        finalTime = 60*(sleepH-wakeupH);
        finalTime+=(wakeupM-sleepM);
    }

    return finalTime;
}

private int checkTimeForGuard() //checks the amount of minutes guard should run in case nightsleep is enabled
{
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    Calendar c = Calendar.getInstance(); 
    int minutes = c.get(Calendar.MINUTE);
    int hours = c.get(Calendar.HOUR_OF_DAY);
    int sleepM = preferences.getInt("SleepM", 0);
    int sleepH = preferences.getInt("SleepH", 0);
    int wakeupM = preferences.getInt("WakeUpM", 0);
    int wakeupH = preferences.getInt("WakeUpH", 0);

    int value=0;

    if(sleepH>wakeupH)
    {
        if(hours<wakeupH || hours>sleepH)  
            return -1;
        if(hours==sleepH && minutes>sleepM)
            return -1;
        if(hours==wakeupH && minutes<wakeupM)
            return -1;
        value = 1440-checkTimeToSleep();
        value-=((60*(hours-wakeupH))+(minutes-wakeupM));
    }

    else if(sleepH<wakeupH)
    {
        if(hours>wakeupH && hours<sleepH)
            return -1;
        if(hours==sleepH && minutes>sleepM)
            return -1;
        if(hours==wakeupH && minutes<wakeupM)
            return -1;

        if(hours>=sleepH)
        {
            value=60*(sleepH-hours);
            value+=(sleepM-minutes);
        }
        if(hours<=wakeupH)
        {
            value=60*(24+sleepH-hours);
            value+=(sleepM-minutes);
        }
    }

    return value;
}

private void ToggleAirplaneMode(boolean isEnabled)//turn off airplanemode (radiation on)=true, on=false
{
    Settings.System.putInt(
            getApplicationContext().getContentResolver(),
              Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);
}} 
```

编辑：

请帮助我，我在这里困了将近一个月

[http://imageshack.us/photo/my-images/89/error1poh.png/](http://imageshack.us/photo/my-images/89/error1poh.png/)

[http://imageshack.us/photo/my-images/405/errorlog.png/](http://imageshack.us/photo/my-images/405/errorlog.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T12:29:45.607

您的 stopService(i) 方法使应用程序崩溃。

# objective-c - 将自定义参数传递给按钮操作方法

> ID：12935647
> 
> 赞同：0
> 
> 时间：2012-10-17T13:38:47.883
> 
> 标签：objective-c

我将一堆图像加载到 UIScrollView 中，然后调整它们的大小并在每个图像上放置一个按钮，因此当我单击较小图像上的按钮时，它将在新视图中加载全尺寸图像。

我正在努力寻找一种体面的方法，以便在单击按钮时以某种方式将图像的 URL 作为参数传递给单击处理程序，并且根据我的阅读，将参数传递给回调函数是不可能的。

这是我到目前为止的代码，

```
for(Card *card in crd){

    pocketImage = [self imageWithImage:[UIImage imageNamed:@"pocket.png"] scaledToSize:CGSizeMake(245/2,80/2)];
    pocketImageView = [[UIImageView alloc] initWithImage:pocketImage];

    cardImage =  [self maskImage:[UIImage imageNamed:@"animal.jpg"]];
    cardImageView = [[UIImageView alloc] initWithImage:cardImage];

    y = (80/2) * inc;

    if (inc % 2){
        x = 125;
    } else {
        x = 10;
        y += (80/2);
    }

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    [btn addTarget:self action:@selector(testMe) forControlEvents:UIControlEventTouchUpInside];
    [btn setFrame:CGRectMake(x,y-40,pocketImageView.frame.size.width,pocketImageView.frame.size.height*2)];

    [pocketImageView setFrame:CGRectMake(x,y,245/2,80/2)];
    [cardImageView setFrame:CGRectMake(x,y-40,245/2,80/2)];

    //add the pocketImageView to the container
    [imageContainer addSubview:cardImageView];
    [imageContainer addSubview:pocketImageView];
    [imageContainer addSubview:btn];

    inc++;
} 
```

回调函数，

```
-(void)testMe {
    NSLog(@"works");
} 
```

所以基本上这只是遍历所有图像，然后将它们全部附加到 a `UIScrollView`，这工作正常，当我尝试将自定义参数传递给`testMe`方法时出现问题，据我所知，这是不可能的，那么我如何能够单击按钮，然后在新视图中显示相应的全尺寸图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:40:35.713

您可以为此使用 iVar / (private) @property。

只需像这样设置您想要的数据：

```
myTransferVariable = // something you need in you testMe method 
```

并像这样使用它

```
-(void)testMe {
    NSLog(@"%@", myTransferVariable);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:48:02.043

您应该能够将您的操作定义为`- (void)testMe:(id)sender {`并将其指定为`@selector(testMe:)`. 如果您随后为每个按钮提供一个标记，该标记（例如）是 URL 字符串数组的偏移量，则该方法应该能够通过使用`((UIButton *)sender).tag`.

# java - 如果与 Java 中的数据库建立连接，则接收消息

> ID：12935649
> 
> 赞同：-2
> 
> 时间：2012-10-17T13:38:50.180
> 
> 标签：java, message, connect

我写了这段代码，我想知道你是否想打赌我是否应该申请确认我如何连接？编码：

```
Class.forName("com.mysql.jdbc.Driver").newInstance  ();
String url="jdbc:mysql://localhost:3306/dbcn?user=root&password=";
Connection con= DriverManager.getConnection(url); 
```

例如在 php 中：

```
if ($resault)
echo "successful"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:47:06.320

如果您要问，您是否应该记录消息，连接成功，**是**。放置记录器消息总是有帮助的，但在服务器端。

这有助于以后解决问题。虽然不是强制性的。

# http - Http如何识别来自本地或远程的重定向

> ID：12935650
> 
> 赞同：0
> 
> 时间：2012-10-17T13:38:53.223
> 
> 标签：http, redirect, referrer

如何识别请求（通过 http 重定向）来自本地站点或其他站点？

例如，我有一个网站：www.my.com

并且 www.my.com/a.html 将重定向到 www.my.com/b.html

其他网站将重定向到 www.my.com/b.html

我如何确定重定向的来源？

HTTP Referrer 可能令人难以置信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:50:46.377

在服务器端，您可以跟踪 IP 地址并跨请求匹配这些地址。

但就个人而言，我会选择更简单的推荐人解决方案。

请参阅[HTTP 引荐来源网址陷阱？](https://stackoverflow.com/questions/936652/http-referrer-gotchas)对此进行进一步讨论。

如果您使用动态内容生成（例如 ASP、PHP 等），您还有一个选择是使用 URL 重写而不是通过客户端重定向。在这种情况下，客户仍然认为他们正在请求 www.my.com/a，但您返回 www.my.com/b 的内容。在生成 b 的代码中，您可以看到请求是针对 www.my。 com/a 以便您知道它们已被“重写”。

# asp.net - 检查会话超时asp .net

> ID：12935653
> 
> 赞同：1
> 
> 时间：2012-10-17T13:39:01.783
> 
> 标签：asp.net

> **可能重复：**
> [如何在asp.net中检查会话是否过期](https://stackoverflow.com/questions/10480110/how-to-check-whether-session-is-expired-or-not-in-asp-net)

页面检测会话是否在后面的代码中超时的最佳方法是什么？我在博客 ( [http://mattslay.com/detecting-session-timeout-in-asp-net/](http://mattslay.com/detecting-session-timeout-in-asp-net/) ) 中找到了以下代码。是好的还是有更好的方法？

```
if (Context.Session != null && Context.Session.IsNewSession)
{
     string cookieHeader = Page.Request.Headers["Cookie"];
     if ((null != cookieHeader) && (cookieHeader.IndexOf("ASP.NET_SessionId") >= 0))
          return true; // timeout occured
     else
          return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:00:22.263

我建议你在你的`Global.asax file`

```
void Session_End(object sender, EventArgs e)
{
   //Here you execute your treatments about end session
} 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatemodule.end.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatemodule.end.aspx)

# php - 具有图像转发器字段的多个 div

> ID：12935654
> 
> 赞同：0
> 
> 时间：2012-10-17T13:39:03.590
> 
> 标签：php, javascript, jquery, ajax, wordpress

我正在尝试使用中继器字段（ACF 插件）的图像显示多个 div。

例如，带有图像 1 的 Div 1 -带有图像 2 的 Div 2 - 等等...

使用此标记：

```
<div id="project" class="item">
     <a href="#">
        <img src="img/project1.jpg" alt="project1" width="240" height="173">
     </a>
     <div class="art_title">
         <p>SWEET LIFE #1</p>
     </div>
     <div class="mask"></div>
</div> 
```

所以，通过我显示所有图像的 html 重复它，但现在我将它集成到 wordpress 中，我有以下问题：

我正在使用转发器字段来获取所有图像，因此使用以下代码：

```
<?php  $slides = get_field('project_thumbnails');  
        // Grabs the array      
       // Check if there is any data in the array before looping
         if($slides) {     
            //we need to close this div
           echo '<div id="project_slider" class="item">';     
           foreach($slides as $s) {  
                  echo '<div class="aimagediv" >'; //adding the start tag of the div
                  echo '<a href="#">';          
                  echo '<img src="'.$s['project_thumb'].'" alt="" />';
                  echo '</a>';
                  echo '</div>'; //CLOSING THE DIV JUST ADDED     
                 }        
                  echo '<div class="art_title">';        
                  echo '<p>SWEET LIFE2</p>';        
                  echo '</div>';        
                  echo '<div class="mask">';        
                  echo '</div>';  

                  echo '</div>'; //closing the first div,not sure if you want this, its optional
             }  

?>  <?php endwhile; // end of the loop. ?> 
```

我得到了中继器的图像，但它显示在同一个 div 中，它不会创建一个新的 div id=¨project"。所以它显示如下：

并且在页面上创建的标记就像所有图像都在同一个 div 中一样。

```
<div id="project" class="item">
     <a href="#">
        <img src="img/project1.jpg" alt="project1" width="240" height="173">
        <img src="img/project1.jpg" alt="project1" width="240" height="173">
     </a>
     <div class="art_title">
         <p>SWEET LIFE #1</p>
     </div>
     <div class="mask"></div>
</div> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:43:31.517

```
<?php  $slides = get_field('project_thumbnails');  
        // Grabs the array      
       // Check if there is any data in the array before looping
         if($slides) {     
            //we need to close this div
           foreach($slides as $s) {  
                  echo '<div id="project_slider" class="item">';     
                  echo '<div class="aimagediv" >'; //adding the start tag of the div
                  echo '<a href="#">';          
                  echo '<img src="'.$s['project_thumb'].'" alt="" />';
                  echo '</a>';
                  echo '</div>'; //CLOSING THE DIV JUST ADDED     
                  echo '<div class="art_title">';        
                  echo '<p>SWEET LIFE2</p>';        
                  echo '</div>';        
                  echo '<div class="mask">';        
                  echo '</div>';  
                  echo '</div>'; //closing the first div,not sure if you want this, its optional
                 }
             }  

?>  <?php endwhile; // end of the loop. ?> 
```

# objective-c - 向下滚动时，GridView 总是崩溃

> ID：12935657
> 
> 赞同：0
> 
> 时间：2012-10-17T13:39:09.757
> 
> 标签：objective-c, ios, uitableview, core-data, gridview

我想用数据填充gridView。我正在使用从 Web 服务返回的数据来执行此操作。为了填满，我有一个属性 loopIndex ，它计算数组的哪个对象应该是下一个单元格。您可以在此处查看 CellForRowAtIndexPath 方法。

```
- (NRGridViewCell*)gridView:(NRGridView *)gridView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyCellIdentifier = @"MyCellIdentifier";

    NRGridViewCell* cell = [gridView dequeueReusableCellWithIdentifier:MyCellIdentifier];

    if(cell == nil){
        cell = [[NRGridViewCell alloc] initWithReuseIdentifier:MyCellIdentifier];

        [[cell textLabel] setFont:[UIFont boldSystemFontOfSize:11.]];
        [[cell detailedTextLabel] setFont:[UIFont systemFontOfSize:11.]];

    }
    NSLog(@"loopIndex: %d",_loopIndex);
    _players = [self getTeam];

       NSData *imgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[[_players objectAtIndex:_loopIndex]valueForKey:@"image"]]];
       UIImage *image = [[UIImage alloc]initWithData:imgData];
       cell.imageView.image = image;
        cell.textLabel.text = [[_players objectAtIndex:_loopIndex]valueForKey:@"name"];
        cell.detailedTextLabel.text = [[_players objectAtIndex:_loopIndex]valueForKey:@"position"];
    if(_loopIndex < [[self getTeam]count]){
    _loopIndex++;
    }else {
        _loopIndex = _loopIndex;
    }
    return cell;
} 
```

在这里你会看到错误。它总是在 NSData 线上崩溃。

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFArray objectAtIndex:]: index (30) beyond bounds (30)' 
```

我认为我的循环索引有问题。因为当我只使用静态值时。让我们说 1O 像这样

```
 cell.textLabel.text = [[_players objectAtIndex:_loopIndex]valueForKey:@"name"]; 
```

它不会崩溃。有人知道我该如何解决吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:42:42.903

尝试

```
 _loopIndex++;
    if(_loopIndex >= [[self getTeam]count]){
        _loopIndex = [[self getTeam]count]-1;
    } 
```

做正确你应该做如下：

```
cell = // new default cell;

// calculate _loopindex for next attempt
if (_loopindex < [[self getTeam]count])
{
    //do your job
}

return cell; 
```

如果您在 section 和 table 中正确设置了行数，`gridView cellForItemAtIndexPath`则应该根据需要准确调用该方法的次数。不多也不少。这将防止您返回 nil 或计算错误的`_loopindex`计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:14:48.400

您计算错误`_loopindex`，这就是您收到错误的原因，但更重要的是，您应该依靠`indexPath`变量而不是您正在计算的索引来在此协议方法中显示您的数据。

# php - .htaccess mod_rewrite，可能很简单

> ID：12935661
> 
> 赞同：0
> 
> 时间：2012-10-17T13:39:18.383
> 
> 标签：php, .htaccess

我正在尝试将我的链接 domain.com/view.php?id=12345 和我的链接设为 domain.com/view/12345

我不确定我需要做什么，或者这是我的问题：

1.  我需要创建一个视图文件夹并将文件放在那里吗？
2.  我将如何制定重写规则？
3.  如何使其重定向到新链接？
4.  我会将我的页面链接为什么？

这是我目前的重写规则。我知道它正在使用该文件，因为我之前从我发现的另一个问题中进行了测试。

```
RewriteEngine On
RewriteRule ^view/([0-9]+)/$ view.php?id=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:44:00.163

1.  您不需要文件夹。

2.  没关系。

3.  在 view.php 某处：

```
 $filteredId = someFilterFunction($_GET['id']);
header('Location: /view/' + $filteredId); 
```

但它可能会是一个无限重定向:) 所以不要这样做。例如，您应该检查请求 url。

4\. 我不明白这个问题。

# sql - 获取链接服务器上托管的数据库的大小？

> ID：12935664
> 
> 赞同：2
> 
> 时间：2012-10-17T13:39:24.297
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2012

有谁知道如何获取托管在不同服务器上的数据库的大小？我基本上想在我的服务器上的作业中监视该数据库的大小。我试过类似的东西：

```
select db_name(dbid), str(convert(dec(15),sum(size))* 8192/ 1048576,10) 
from [LINKEDSERVER].master.sys.sysaltfiles 
group by dbid order by 2 desc 
```

出于某种原因，这给了我当前服务器而不是远程服务器上的数据。另外，我在论坛上读到 sysaltfiles 仅在服务器重新启动时更新？这将使其无法用于监控，那么您有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:02:11.053

试试这个，它有效，我检查过

```
EXEC ('SELECT d.name,
ROUND(SUM(mf.size) * 8 / 1024, 0) Size_MBs
FROM sys.master_files mf
INNER JOIN sys.databases d ON d.database_id = mf.database_id
WHERE d.database_id > 4 
GROUP BY d.name
ORDER BY d.name') AT [LINKEDSERVER] 
```

# php - 使用预选时区的 PHP 计划电子邮件警报

> ID：12935666
> 
> 赞同：5
> 
> 时间：2012-10-17T13:39:31.733
> 
> 标签：php, timezone, dst

我一直在寻找很多，我似乎无法找到解决方案。

我有一个 PHP 网页，可以在其中安排特定时间的电子邮件警报。我选择发送警报的日期和时间。这以 UNIX 格式存储在 MySQL 表中。我有一份工作每 15 分钟执行一次，如果日期+时间是过去的，则发送电子邮件 - 这一切都很好，除了我需要为我的美国同事扩展它。我在爱尔兰，所以我需要管理美国各地的不同时区。我计划添加用户在注册后必须选择的时区列表……至少这是一个开始。管理时区很好，因为我认为我需要做的就是减去与服务器时间不同的时间，然后以 unix 格式保存日期时间。DST 是一个不同的问题 - 有人对如何克服这个问题有任何想法吗？

我已经读过使用 UTC 作为基准时间，但即使是这样，我仍然会遇到同样的问题吗？

谢谢一米！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:36:58.363

您的时间已经采用 UNIX 时间戳格式，因此您只需要计算用户的时间差（偏移量）。例如爱尔兰在`UTC/UTC+1`时区。所以你需要做的就是像**james_t**在他的评论中提到的那样做数学。如果您需要来自爱尔兰的用户来接收电子邮件，`9:00pm UTC+1`您必须将其发送到`8:00pm UTC`. 那么什么是想法？

允许用户选择时区，这意味着他们选择与 UTC 的偏移量。将其保存在数据库中的某个位置（您的用户表或其他表无关紧要）。

以秒为单位转换偏移量：

```
$delta_time = -1 * $offset * 3600 
```

然后计算你的触发时间：

```
$trigger_time = time() + $delta_time; 
```

现在您有时间让您的电子邮件发件人根据用户的时区设置在正确的时刻触发。

例如：

```
$offset = 1; // summer in Ireland
$server_time = time(); // at the moment 1350509127
$delta_time = -1 * $offset * 3600; // -3600
$trigger_time = $server_time + $delta_time; // 1350505527 
```

您只需要`$trigger_time`与数据库中的 UNIX 时间戳进行比较，然后决定是否发送电子邮件。

Ofc，使用[PHP 时区](http://php.net/manual/en/timezones.php)而不是纯 +/- 偏移量并在 DST 更改适用于某些位置时保持更新并不是一个坏主意。

做一些测试，这并不难。

这只是一个一般的想法，而不是完整的工作解决方案。

## 更新：

要计算任何两个时区之间的时间差（以秒为单位），您可以使用以下内容：

## 函数 delta_offset()

```
 function delta_offset($server_timezone, $user_timezone) {
    $dt = new DateTime('now', new DateTimeZone($server_timezone));
    $offset_server = $dt->getOffset();
    $dt->setTimezone(new DateTimeZone($user_timezone));
    $offset_user = $dt->getOffset();
    return $offset_user - $offset_server;
    } 
```

要在几秒钟内获得偏移量：

```
 $server_tz = "Europe/London";
  $user_tz = "America/New_York";
  $offset = delta_offset($server_tz, $user_tz);  // offset in sec. 
```

创建一些输出：

```
 $dt = new DateTime('now', new DateTimeZone('UTC'));
  echo "<pre>UTC date/time: " . $dt->format('l, F jS, <b>H:i:s</b>') . "\n";
  $dt = new DateTime('now', new DateTimeZone($server_tz));
  echo "London date/time: " . $dt->format('l, F jS, <b>H:i:s</b>') . "\n";
  $dt = new DateTime('now', new DateTimeZone($user_tz));
  echo "New York date/time: " . $dt->format('l, F jS, <b>H:i:s</b>') . "\n\n";
  echo "Time difference between London (UK) and New York (USA) is: <b>$offset_h</b> ($offset s)</pre>"; 
```

浏览器中的输出（在写这篇文章的时候）：

```
UTC date/time: Wednesday, October 17th, 22:32:27
London date/time: Wednesday, October 17th, 23:32:27
New York date/time: Wednesday, October 17th, 18:32:27

Time difference between London (UK) and New York (USA) is: -5:00 (-18000 s) 
```

在这种情况下，偏移量为 -5 小时（-18000 秒），但如果 DST 规则针对作为函数参数给出的任何时区发生更改，它会自动更改。

**Delta-offset**提供了您必须提前或推迟多少时间向不同时区的用户发送电子邮件的信息，您现在需要做的就是简单地`+/- delta-offset`使用电子邮件发件人的调度程序。

希望这可以帮助您为您的问题找到正确的解决方案。

## 更新 #2 - 示例（理论）

想象一下这种情况。

您当前的服务器时间是`X`并且它`7:00pm`目前在爱尔兰。我住在塞尔维亚，我们有相同的 DST 规则，但我比 (UTC+1/UTC+2) 晚一小时。你和我的时间差是`+3600 seconds`（1 小时）。

`10:00pm`现在您必须在(it's `9:00pm in Ireland`)中向我发送电子邮件。

*   当前时间是`X`。
*   Delta-offset 是`-1 * +3600 = -3600`（delta-offset 乘以 -1）。
*   晚上 10:00 发送到您所在位置的时间是`X + 10800`（3 小时后）。
*   晚上 10 点在我的位置发送时间是`X + 10800 + delta-offset = X + 7200`（2 小时后）。

检查实际时间是否等于或大于触发时间（发送时间）的公式是：

```
current_timestamp >= trigger_timestamp + delta_offset 
```

其中函数的 delta-offset`delta_offset()`必须乘以`-1`在公式中使用。

现在，您可以在需要时发送电子邮件，并确保将使用用户的本地时间（ofc，如果用户时区设置正确）发送电子邮件。

**注意：**与此示例的差异（塞尔维亚 - 爱尔兰 = +1 小时）在 DST 更改期间有所不同，这意味着我们每年有 1 小时处于同一时区 ( `0 delta-offset`)，而我们有 1 小时`+2 hours delta-offset`。这是可能的，因为 DST 更改是在塞尔维亚提前 1 小时应用的，所以当我们的时间更改 +1 时，您必须等待 60 分钟才能将相同的更改应用于爱尔兰时间 *然后我们是 +2），当我们带回时也是一样的时钟到正常时间（0 时差）。

# php - 开启安全模式的 PHP 会话

> ID：12935669
> 
> 赞同：1
> 
> 时间：2012-10-17T13:39:39.243
> 
> 标签：php, apache, safe-mode, php-safe-mode

我有一个自定义 cms，它使用会话来存储一些数据。我突然改变的网络服务器在 PHP 中打开了安全模式。这意味着我不能再使用会话了。当关闭安全模式不是选项时，是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:47:44.757

根据 php 手册`sessions`，您的服务器所在的事实`safe mode`不会导致您的会话出现问题。

[http://www.php.net/manual/en/intro.session.php](http://www.php.net/manual/en/intro.session.php)

但是，在以下情况下，该`session_start()`功能可能会在安全模式下被禁用：

```
The owner of a script must be the same as owner of a session.save_path directory if the default files session.save_handler is used. 
```

为了解决此问题，请联系您的托管公司并要求提供本地 ini 文件（php 设置），然后编辑 的值`session.save_path`并确保此路径存在于您的服务器中。

# facebook - 让网站和脸书同时登录

> ID：12935675
> 
> 赞同：0
> 
> 时间：2012-10-17T13:39:47.600
> 
> 标签：facebook, facebook-login

我正在创建一个人们可以从我的网站发送短信的网站，我想实现 facebook 登录到我的网站以及任何使用他的 facebook 帐户登录到我的网站并且在我的网站中没有帐户的人我想要为他创造一个。因为他以后应该输入他的电话号码并验证该号码，并且在我的网站上没有帐户是不可能的。现在的问题是，如果我使用他的 facebook 用户名创建帐户，可能会导致名称重复（因为其他人可能拥有该用户名）。

当有人使用已经在我的网站上拥有帐户的 facebook 登录时，我当然会结合现有帐户的信息。这不是问题。

你有什么建议？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:03:41.067

不要使用 Facebook 用户名作为`userName`用户数据库的列。您可以从 Facebook 用户那里获得许多其他独特的信息，例如电子邮件或 Facebook ID。使用它们在您的数据库详细信息中的信息和您从 Facebook 收到的信息之间“连接”。

例如：

注册您的网站时，您可以询问的字段之一是 Facebook 登录电子邮件。这就是用户可以选择通过 Facebook 登录您的网站的方式，而他的 Facebook 用户名和您的用户名之间没有任何联系。

在您的用户详细信息表中，只需添加一`facebookEmail`列，然后，在您实现 Facebook 登录 API 和用户登录后，检查他的电子邮件（来自 facebook）是否在您的表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:03:13.363

> 现在的问题是，如果我使用他的 facebook 用户名创建帐户，可能会导致名称重复（因为其他人可能拥有该用户名）。

好吧，那么要么构建一个检查用户名是否仍然空闲，如果没有则提示用户输入另一个；或者

通过使用计数器自动选择不同的用户名 fe - 如果 Facebook 的用户名是*foobar*并且已经被占用，则检查*foobar1*是否可用，等等。

如果自动创建它，也许您希望让用户可以在之后更改它。

# command - 运行 yeoman init 时出错

> ID：12935678
> 
> 赞同：0
> 
> 时间：2012-10-17T13:39:58.647
> 
> 标签：command, yeoman

当我运行`yeoman init angularù时出现以下错误，尽管角度部分无关紧要，因为我遇到了同样的错误：

```
create        test/lib/angular-mocks.js
<WARN> Unable to create directory "/Users/myuserfolder/test/lib" (Error code: ENOTDIR). Use --force to continue. </WARN> 
```

它似乎试图在我的主文件夹中创建一个文件，这很奇怪，因为我 cd'd 进入了为我的项目指定的文件夹。这里会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:26:24.830

这是由于您的主目录中有 Gruntfile 导致的已知[错误。](https://github.com/yeoman/yeoman/issues/635)

# javascript - jquery追加大写标签

> ID：12935681
> 
> 赞同：5
> 
> 时间：2012-10-17T13:40:05.917
> 
> 标签：javascript, jquery, html, dom

我想将大写标签附加到 dom 对象中。像这样尝试时，所有内容都转换为小写。

```
 $dom = $("<root/>");

 $dom.append("<LName>user10</LName>");

 alert($dom.html()) //<lname>user10</lname> 
```

我在stackoverflow中看到了一篇文章。他们建议这样做。

```
$dom.append($.parseXML("<LName>user10</LName>").documentElement); 
```

这在 FF、Chrome 和 safari 中效果很好。但它在IE中不起作用......

[小提琴](http://jsfiddle.net/sathyamoorthi/WmzHX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:29:29.107

请参阅：[使用 JavaScript 在内存中生成 XML 文档](https://stackoverflow.com/questions/3191179/generate-xml-document-in-memory-with-javascript)

但在你这样做之前，你真的必须问问自己用 Javascript 生成 XML 是否是个好主意。

我会做什么：

*   将表单数据发送到 php 文件
*   php 文件使用 SimpleXMLElement 生成 XML
*   php 文件使用 cURL 发送 XML
*   php 文件将数据返回到 javascript

# webserver - 在 Web 服务器端识别不同的用户机器

> ID：12935682
> 
> 赞同：0
> 
> 时间：2012-10-17T13:40:06.810
> 
> 标签：webserver, webclient, user-agent, identification

我已经阅读了一些关于[用户代理属性](http://www.w3.org/TR/NOTE-agent-attributes-971230) 甚至[客户端利用](http://ha.ckers.org/weird/)来恢复用户信息的内容。

我想知道是否可以使用当前可用的网络浏览器合法地将在特定计算机（不是智能手机）上运行的网络客户端识别为唯一设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:50:05.863

我个人会使用 cookie，但如果您想为计算机/浏览器提供 ID：

```
$id = md5($_SERVER['REMOTE_ADDR'].$_SERVER['USER_AGENT']); 
```

这将根据 IP 地址和用户代理创建一个唯一的 md5 和，因此即使在同一台机器上使用不同的浏览器也会给你一个不同的 ID。您可以使用此 ID 将信息存储在数据库或文件中。

该问题没有指定语言，因此我在示例中使用了 PHP，但无论如何原理与其他语言相同。

# javascript - 基本的 jQuery 滑块 javascript

> ID：12935684
> 
> 赞同：0
> 
> 时间：2012-10-17T13:40:11.627
> 
> 标签：javascript, jquery

我正在使用一个名为 Basic jQuery 滑块的插件。滑块工作正常，只是我收到了客户更改方向的荒谬请求，因此幻灯片向右滑出而不是向左滑出。

我没有可以设置的方向变量，所以我想知道自定义这个插件有多难？

我已经通过它改变了某些值，只是我看不到让它工作......

执行动画的脚本如下...

```
else if (settings.animation === 'slide') {

                    if (settings.showMarkers) {

                        markers.eq(slidePosition - 1).removeClass('active-marker');

                        if (next === slideCount - 1) {
                            markers.eq(0).addClass('active-marker');
                        } else if (next === 0) {
                            markers.eq(slideCount - 3).addClass('active-marker');
                        } else {
                            markers.eq(next - 1).addClass('active-marker');
                        }

                    }

                    $slider.animate({
                        'left': -next * settings.width
                    }, settings.animationDuration, function () {

                        if (next === 0) {
                            slidePosition = slideCount - 2;
                            $slider.css({
                                'left': -slidePosition * settings.width
                            });
                        } else if (next === slideCount - 1) {
                            slidePosition = 1;
                            $slider.css({
                                'left': -settings.width
                            });
                        } else {
                            slidePosition = next;
                        }

                        animating = false;

                    });

                } 
```

在“left：-settings.width”的情况下，我尝试更改为+而不是减号，但这似乎不起作用...

# ruby-on-rails - Rails：使用 Mechanize 将列表打印到视图

> ID：12935691
> 
> 赞同：0
> 
> 时间：2012-10-17T13:40:25.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, mechanize

希望这是一个基本的 Rails 问题。我只是在学习大笔画。

我正在使用带有 Mechanize 2.5.1 的 rails 3.2.8 进行屏幕抓取，并且我正在使用 Mechanize 的基本教程模型来抓取 Google.com（此处： http: [//mechanize.rubyforge.org/GUIDE_rdoc.html](http://mechanize.rubyforge.org/GUIDE_rdoc.html)）。在控制台中，它就像一个魅力。我得到了谷歌页面链接的完整列表。现在我想要我的网页上的那个列表。我破解它的方式，我的实例变量要么打印第一个或最后一个链接，因为它的以太只为一个链接运行，或者每次运行都重新分配（如果我理解正确的话）。我目前没有使用模型 b/c 它没有击中我的数据库（这是错的吗？）。只有控制器和视图与路由......

“views/listing/results.html.erb”包括：

```
<ul>
<li><%= link_to @listings %></li>
</ul> 
```

“controllers/listing_controller.rb”只有：

```
class ListingController < ApplicationController 
  def results
    require 'rubygems'
    require 'mechanize'
    agent = Mechanize.new
    page = agent.get('http://google.com')
    page.links.each do |link| # for each link print out the link.
      puts link.text
      @listings = link.text # this is getting re-assigned each time so ends up as last one
      # return @listings # returns first item on list 
    end
  end
end 
```

“config/routes.rb”文件包括：

```
match '/listing/results' => 'listing#results', :as => 'listing_button' 
```

我知道有办法做到这一点，但我必须在所有错误的地方寻找答案。我已经尝试了几种不同的情况来分配实例变量，但也许我做错了，我不知道。

谢谢

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:55:00.813

```
#Controller 
@listings = page.links.collect(&:text)

#View
<% @listings.each do |listing| %>
  <%= listing %>
<% end %> 
```

# javascript - 使用动态操作更改 Oracle Apex 区域网格列

> ID：12935693
> 
> 赞同：0
> 
> 时间：2012-10-17T13:40:28.680
> 
> 标签：javascript, oracle-apex

有没有办法通过动态操作更改 Oracle Apex 区域。我的意思是当我单击一个按钮时，我会执行动态操作来更改区域的列顺序或更改区域的网格列宽度。假设我有两个区域：regionA 和 RegionB。我需要做的是并排放置 RegionA（而不是在新行中），所以我必须将它放在列顺序 column1 和 column 2 中，但是我需要隐藏 RegionA 并全屏显示 RegionB，所以只有方法是动态地将 regionB 更改为第 1 列，因为我不希望 regionB 显示在屏幕的一半。

任何线索将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:58:41.020

就个人而言，我从不在 Oracle Apex 中使用列。我在上一个版本中遇到了太多问题（尤其是 3.2）...我被迫使用自定义区域位置构建一个新的自定义模板（因为当时 apex 使用`<table>`元素进行页面布局...我只使用了`<div>`元素+ CSS）。

在您的情况下，如果您需要并排的区域 A 和区域 B，我将在同一区域位置和同一列中创建两个区域，然后简单地应用于`float:left`这两个区域（添加`style="float:left"`区域属性）。

因此，当您隐藏其中一个时，另一个将填充页面宽度（当然，您可能需要更多的 CSS）。

然后为这两个区域提供一个静态 id，然后从 JavaScript/Jquery 中，您可以使用`$('#your_region_id').hide();`和轻松显示/隐藏它们`$('#your_region_id').show();`。

我经常使用它，它就像一个魅力。

# knockout.js - 生成 knockout.js 模板时浏览器没有响应

> ID：12935697
> 
> 赞同：3
> 
> 时间：2012-10-17T13:40:37.987
> 
> 标签：knockout.js

我希望我的浏览器可以立即访问，而不必等待加载模板。目前，当我提供一个大数组（在本例中为 1000 个元素）时，情况并非如此。我尝试使用[External Template Engine](https://github.com/ifandelse/Knockout.js-External-Template-Engine)，但这只会导致模板显示“正在加载...”，并且浏览器在完成加载之前没有响应。

为了说明，一个简短的例子：

JS：

```
function User(firstname, lastname) {
    this.firstname = ko.observable(firstname);
    this.lastname = ko.observable(lastname);
}

function UserViewModel() {
    this.allUsers = ko.observableArray([
        new User("John", "Doe"),
        new User("John", "Doe"),
        new User("John", "Doe"),
        // 1000 elements ...
        new User("John", "Doe")
    ]);
}

ko.applyBindings(new UserViewModel()); 
```

HTML：

```
<html>
    <head>
    ...
    </head>

    <body>

        <ul data-bind="template: { name: 'my-template', foreach: allUsers() }"></ul>

        <script type="text/html" id="my-template">
            <li>
                <h1 data-bind="text: firstname()"></h1>
                <h2 data-bind="text: lastname()"></h2>
            </li>
        </script>

    </body>
</html> 
```

所以基本上我想要的是在模板渲染时可以访问浏览器，并且一旦它们准备好它们就应该被可视化。我前面提到的外部模板引擎不能满足我的需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:40:30.110

您可能想尝试这种方法：

[淘汰赛渲染视图时显示进度条](https://stackoverflow.com/questions/8227704/show-progress-bar-while-knockout-is-rendering-the-view)

如果您查看链接的 jsFiddle ( [http://jsfiddle.net/rniemeyer/fdSUU/](http://jsfiddle.net/rniemeyer/fdSUU/) )，您将看到正在使用的方法。

您基本上从一个单独的数组中的数据开始，然后通过`setTimeout`调用一次将它们加载到数组中，例如 50 个项目。这会在数据加载时保持浏览器处于活动状态。

# c# - 将序列化的 JSON 数据绑定到转发器

> ID：12935698
> 
> 赞同：0
> 
> 时间：2012-10-17T13:40:38.317
> 
> 标签：c#, asp.net, ajax, jquery, json.net

```
 protected void BindData()
    {
        List<Product> products = product.GetRepeaterData(prod);
        string json = JsonConvert.SerializeObject(products);
        dataRepeater.DataSource = json;
        dataRepeater.DataBind();
    }

 <asp:Repeater ID="dataRepeater" runat="server">
    <HeaderTemplate>
        List<div id="accordion">
    </HeaderTemplate>
    <ItemTemplate>
        <h3>
            <a href="#" style="background-color: gray; height: 25px; color: White; text-decoration: none;">
                <%# DataBinder.Eval(Container.DataItem, "Name")%></a></h3>
        <div>
            <ul>
                <li><span>Id:
                    <%# DataBinder.Eval(Container.DataItem, "Id")%></span></li>
                <li><span>OrganizationId:
                    <%# DataBinder.Eval(Container.DataItem, "Organization")%></span>    </li>
                <li><span>ParentProduct:
                    <%# DataBinder.Eval(Container.DataItem, "Product")%></span></li>
        </div>
    </ItemTemplate>
    <FooterTemplate>
        </div></FooterTemplate>
</asp:Repeater>

error: DataBinding: 'System.Char' does not contain a property with the name 'Name'. 
 <%# DataBinder.Eval(Container.DataItem, "Name")%></a></h3> 
```

我是 JSON 和 Ajax 整个概念的新手。我们从 Web 服务中获取大量数据，因此它会减慢进程直到调用完成。我必须使用 JSON 和 Ajax 进行异步调用。目前我能够在绑定之前对数据进行序列化/反序列化，现在我在将数据反序列化到转发器后看不到任何绑定数据的点，所以我试图将序列化数据绑定到转发器，但它没有绑定。其次，任何人都可以告诉我如何将其作为 ajax 调用来执行吗？在客户端添加更新面板是否足以达到目的？很抱歉，我知道这个问题有点含糊，但我现在迷路了..任何文档或示例也会有所帮助..因为我不确定这是正确的做法....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:41:36.513

JSON 旨在用于客户端，您不会使用服务器端控件进行绑定。

如果你想要绑定语法，有很多框架可以做到这一点。淘汰赛，小胡子等

通常，您通过 ajax 调用获取 JSON，并使用该数据以您需要的方式将标记添加到 DOM。除非您想使用更新面板或类似工具，否则请忘记服务器端控件。

# c# - 使用 4 个实例运行相同的 Windows 服务时无法连接到远程服务器错误

> ID：12935699
> 
> 赞同：1
> 
> 时间：2012-10-17T13:40:41.313
> 
> 标签：c#, windows-services

我在 C# 中创建了一个 Windows 服务。我想为 4 个不同的数据库配置相同的服务并希望同时运行。为此，我创建了 4 个不同的设置项目并使用不同的服务项目程序集名称进行构建，但它给了我无法连接远程服务器错误。

```
Unable to connect to the remote server
   at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request)
   at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at MyService.CRMService1.CrmService.RetrieveMultiple(QueryBase query)
   at TitaniumService.clsCRM.loadEntityByAttributeValue(CrmService crmService, String EntityTypeName, String AttributeName1, Object AttributeValue1, String AttributeName2, Object AttributeValue2)
   at MyService.clsCRM.Product(CrmService service, Double price, String ProductNumber, String UM)
   at MyService.MyThread.UpdateProduct(clsCRM objCRM, CrmService objService, String RefID, String Product_pfx, String SO_Guid, Double SO_totalAmount, String CompanyID) 
```

此外，我只为运行完美的单个实例运行此服务，而没有给出上述错误消息。

谁能帮帮我吗？

# android - 在 Android 中使用 ViewPager 和 Fragments 在 EditText 出现 NullPointerException

> ID：12935705
> 
> 赞同：3
> 
> 时间：2012-10-17T13:41:03.550
> 
> 标签：android, nullpointerexception, android-fragments, android-edittext, android-viewpager

`NullPointerException`当我尝试设置/获取我的 EditText 时，我的应用程序会抛出一个错误。

似乎问题与我的`setContentView()`方法和未正确膨胀的 xml 布局有关。我相信我必须更改`findViewByID`我的 EditTexts，例如更改为`view.findViewByID`. 我已经试过了`this.findViewByID`，`mViewPager.findViewByID`但是我找不到错误..

我的部分代码：

```
private static ArrayList<String> roomList = new ArrayList<String>();
    private static ArrayList<String> deviceList = new ArrayList<String>();

    private static String project_name;
    private static String router_ip;
    private static String port;
    private static String device_name;
    private static String room_name;
    private static String datatype;
    private static String grpaddr;
    private static boolean status;

    private EditText et_project_name;
    private EditText et_router_ip;
    private EditText et_port;

    private Spinner spinner_dpt; 
    private CheckBox cb_checkStatus;
    private EditText et_device_name;
    private EditText et_groupaddress;
    private View textEntryView;

    private static final String[] items={"1.001 (Lichtschalter)", "5.001 (Dimmer/Jalousien)",
          "9.001 (Temperaturanzeige)", "1.008 (Jalousien)"};

    private SectionsPagerAdapter mSectionsPagerAdapter;
    private ViewPager mViewPager;

    private static ManualConfigDBAdapter dbHelper;

    /**
     * OnCreate
     * */ 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create_project_manually);

        setup();
    }

    /**
     * Setup
     * */ 
    public void setup(){

        //DATABASE
        // Add project to Database
        dbHelper = new ManualConfigDBAdapter(this);
        dbHelper.open();

        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        // set the app icon as an action to go home
        actionBar.setDisplayHomeAsUpEnabled(true); 
        //enable tabs in actionbar
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding tab.
        // We can also use ActionBar.Tab#select() to do this if we have a reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by the adapter.
            // Also specify this Activity object, which implements the TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }

        //get the controls from the layout
        et_project_name = (EditText) findViewById(R.id.project_name);
        et_router_ip = (EditText) findViewById(R.id.router_ip);
        et_port = (EditText) findViewById(R.id.port);

        //Use a input filter for the input of the IP adress
        InputFilter[] filters = new InputFilter[1];
        filters[0] = new InputFilter() {
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
                if (end > start) {
                    String destTxt = dest.toString();
                    String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);
                    if (!resultingTxt.matches ("^\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3})?)?)?)?)?)?")) { 
                        return "";
                    } else {
                        String[] splits = resultingTxt.split("\\.");
                        for (int i=0; i<splits.length; i++) {
                            if (Integer.valueOf(splits[i]) > 255) {
                                return "";
                            }
                        }
                    }
                }
            return null;
            }
        };

        et_router_ip.setFilters(filters);

    } 
```

和 LogCat：

```
02-16 20:09:25.755: E/AndroidRuntime(26658): FATAL EXCEPTION: main
02-16 20:09:25.755: E/AndroidRuntime(26658): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.bertrandt.bertrandtknx/de.bertrandt.bertrandtknx.CreateProjectManually}: java.lang.NullPointerException
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.os.Looper.loop(Looper.java:137)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.main(ActivityThread.java:4514)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at java.lang.reflect.Method.invokeNative(Native Method)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at java.lang.reflect.Method.invoke(Method.java:511)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at dalvik.system.NativeStart.main(Native Method)
02-16 20:09:25.755: E/AndroidRuntime(26658): Caused by: java.lang.NullPointerException
02-16 20:09:25.755: E/AndroidRuntime(26658):    at de.bertrandt.bertrandtknx.CreateProjectManually.setup(CreateProjectManually.java:152)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at de.bertrandt.bertrandtknx.CreateProjectManually.onCreate(CreateProjectManually.java:75)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.Activity.performCreate(Activity.java:4562)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
02-16 20:09:25.755: E/AndroidRuntime(26658):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
02-16 20:09:25.755: E/AndroidRuntime(26658):    ... 11 more
02-16 20:09:25.770: D/dalvikvm(26658): GC_CONCURRENT freed 396K, 4% free 14704K/15303K, paused 2ms+3ms 
```

XML 文件 activity_create_project_manually：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black" >

    <RelativeLayout
        android:id="@+id/project_save_text"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@color/black"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="10dp"
            android:text="@string/project_name"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/project_name"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView2"
            android:ems="10"
            android:hint="@string/project_name_hint" >
        </EditText>

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/project_name"
            android:layout_marginTop="10dp"
            android:text="@string/router_ip"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/router_ip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView4"
            android:digits="0123456789."
            android:ems="10"
            android:hint="@string/router_adress_info"
            android:inputType="numberDecimal|phone" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:contentDescription="@string/placeholder"
            android:src="@drawable/bertrandtlogoinv" />

        <TextView
            android:id="@+id/info_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/imageView1"
            android:layout_alignParentLeft="true"
            android:gravity="center"
            android:text="@string/info_settings"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textSize="16dp" />

        <ImageView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/ImageView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_above="@+id/info_text"
            android:layout_alignParentLeft="true"
            android:contentDescription="@string/placeholder"
            android:paddingBottom="2dp"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="2dp"
            android:scaleType="fitXY"
            android:src="@color/ics_blue" />

        <ImageView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/ImageView01"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignTop="@+id/imageView1"
            android:contentDescription="@string/placeholder"
            android:paddingBottom="2dp"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="2dp"
            android:scaleType="fitXY"
            android:src="@color/ics_blue" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/router_ip"
            android:layout_marginTop="10dp"
            android:text="@string/Port"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/port"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/textView3"
            android:digits="0123456789"
            android:ems="10"
            android:hint="@string/port_hint"
            android:inputType="number"
            android:maxLength="5" />

    </RelativeLayout>

</RelativeLayout> 
```

XML 文件设置_手动：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".CreateProjektManually" /> 
```

以下行引发错误：

```
et_router_ip.setFilters(filters); 
```

所有三个 EditText 字段的值是`null`如果我在调试模式下检查它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:16:30.797

要使用视图寻呼机创建 3 个不同的片段，您应该：

1）使用视图寻呼机和视图寻呼机适配器创建 FragmentActivity。

```
public class FragmentActivity extends FragmentActivity
{
    private FragmentAdapter adapter;
    private ViewPager pager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fragment);     
        adapter = new FragmentAdapter(getSupportFragmentManager());
        pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(adapter);
   } 
```

2）用静态实例创建3个片段

```
public final class Fragment1 extends Fragment
{   
    public static Fragment1 newInstance() {
        return new Fragment1();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        LinearLayout layout = new LinearLayout(getActivity());
// your fragment xml view
        return view;
    }
} 
```

3）用它填充视图寻呼机适配器；

```
public class FragmentAdapter extends FragmentPagerAdapter

{    
    public InstallFragmentAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int position) {     
        switch (position) {
            case 0:
                return Fragment1.newInstance();
            case 1:
                return Fragment2.newInstance();
            case 2:
                return Fragment3.newInstance();
        }
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T08:43:19.360

您应该在 onCreateView 而不是 onCreate 中设置您的 contentview 并调用 setup()。

# java - 根据枚举类型调用特定方法？

> ID：12935709
> 
> 赞同：12
> 
> 时间：2012-10-17T13:41:10.457
> 
> 标签：java

这是我的问题的一个抽象示例：我有一个`Car`具有类型 ( ) 的通用类 ( `brand`)。所有的对象都应该只因品牌而异，并根据这个品牌进行不同的处理。

此类的所有对象都收集在一个服务类的列表中。该服务应该对整个列表执行一个例程，这*几乎*是相同的。两者之间只有一个函数调用应该不同。

基于这种类型，我想调用不同的方法：目前我为枚举类型断言 equals 并根据结果调用不同的方法。但这有点难看，我想知道是否有更好的解决方案？

```
class Car {
    public enum Brand {
        BMW, AUDI;
    }

    private Brand brand;

    specificMeth1();
    specificMeth2();
}

class Service {

    List<Car> bmw;
    List<Car> Audi;

    processCar() {
        processList(bmw);
        processList(audi);
    }

    processList(List<Car> list) {
        for (Car car : list) {
            if (car.getBrand.equals(Brand.BMW)) {
                specificMeth1();
            } else {
                specificMeth2();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-17T13:43:03.300

您应该将该方法放在枚举中：

```
public enum Brand {
    BMW {
        @Override
        public void doSomething();
    },
    AUDI {
        @Override
        public void doSomething();
    };

    public abstract void doSomething();
}

var.getBrand().doSomething(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T13:46:41.240

考虑在枚举上定义一个抽象方法，如下所示：

```
public enum Brand {
    BMW {
        public void specificMethod() {
            System.out.println("meth1");
        }
    },

    AUDI {
        public void specificMethod() {
            System.out.println("meth2");
        }
    };

    public abstract void specificMethod();
} 
```

然后你可以调用：

```
for (Car car : list) {
    car.getBrand().specificMethod();
} 
```

# php - htaccess 将 .php 文件重命名为 .html 文件给出文件未找到错误？

> ID：12935718
> 
> 赞同：0
> 
> 时间：2012-10-17T13:41:53.593
> 
> 标签：php, html, .htaccess

我正在使用此代码将我的 php 文件重写为 html 文件，因此**Technical.php**将显示为**Technical.html**

```
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php [nc] 
```

但是在访问technical.html时它给了我一个404错误

```
Not Found

The requested URL /technical.php was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

我的 htaccess 中的顺序有误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:46:06.997

可能您还必须指定应用程序文件夹：

```
RewriteRule ^(.*)\.html$ appFolder/$1.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:50:24.880

在文件所在的子文件夹中添加 .htaccess 规则已解决此问题！我认为根目录中的一个 .htaccess 控制了整个站点。

# jquery - 在 MVC 4 中将多个参数传递给操作时，是否使用 GET 或 POST 感到困惑

> ID：12935720
> 
> 赞同：2
> 
> 时间：2012-10-17T13:41:54.683
> 
> 标签：jquery, post, get, asp.net-mvc-4, asp.net-web-api

我正在使用 Jquery 和 Jqgrid 开发 MVC 4 Web Api，直到现在我将多个数据发布到我的后控制器操作。

我的动作看起来像下面的那个......

```
[ActionName("FetchProducts")]
public List<ABC> PostProducts(Product model)
{
    return _service.GetSomething(model);
}

public class Product{
    public string Name {get;set;}
    public string Category {get;set;}
    //.... and alteast 5 more properties
} 
```

我的 jquery 调用类似于下面的调用...

```
$.ajax({  
type: "POST",  
url: /api/FetchProduct,  
data: this.getData(),  
contentType: "application/json; charset=utf-8",
dataType: "json",
success: callback
});

function getData(){
    return JSON.stringify({
            Name: "from somewhere" ,
            Category: "from somewhere",
            Price: "from somewhere",
            ABC: "from somewhere",
            XYZ: "from somewhere",
            //... and many more....
        }); 
} 
```

这行得通！但我工作的朋友说

> 我实际上只是在获取数据，应该使用“GET”而不是“POST”。因为 GET 用于检索远程数据，而 POST 用于插入/更新远程数据。

我也觉得他是对的。那么我应该如何使用 'GET' 来做到这一点？

我是否必须将所有这些参数（至少有 10 个）作为查询字符串传递？

例如：`api/FetchProduct/?Name='aaa'&&Category='vvv'&&.........`

所以我的问题是在这种情况下应该怎么做？我想知道其他开发人员对此有何看法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:48:59.683

随着查询字符串的增长，您将遇到 URL 的最大长度问题，这取决于浏览器。

如果您有很多参数要传递，那么即使您实际上只是获取数据，POST 也是完全可以接受的。但是，您将失去的是用户使用查询字符串为特定页面添加书签的能力。

绝对不应该使用 GET 的一种情况是，如果您传递的任何参数都是敏感的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:50:40.803

一般来说，你的朋友是对的。使用 GET 而不是 POST 也有缓存的好处。要切换到获取，您只需将代码从帖子更新为获取。

```
$.ajax({  
  type: "GET",  
  url: "/api/FetchProduct",  
  data: this.getData(),  
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: callback
}); 
```

@MattBurland 还提出了几点关于何时使用 GET 与 POST 的优点。

编辑：这是一个[jsfiddle](http://jsfiddle.net/pvanhouten/6tbxV/)示例。正如预期的那样，发送的请求是“/echo/json/?value1=1&value2=2”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:52:33.390

我同意你朋友的工作。GET 应该用于检索数据，POST 应该用于插入新数据。此 REST 约定使 API 的新开发人员或用户易于理解。可以在查询字符串中作为参数传递的信息相当长。通常这些只是为您的 GET 定义查询的过滤器。如果有一个项目用作查询的主键，您可以将其作为 URL 的一部分传递。例如，如果 Name 是主键或 ID，那么您的请求可能如下所示：

```
api/FetchProduct/aaa?Category=vvv&......... 
```

顺便说一句，url 的语法不需要/使用单引号，参数由单个 & 符号分隔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:22:53.840

如果您想使用 GET 而不是 POST。你的代码应该在下面。

```
$.ajax({  
  type: "GET",  
  url: "/api/FetchProduct",  
  data: this.getData(),  
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: callback
}); 
```

并且行动是

```
[ActionName("FetchProducts")]
public List<ABC> PostProducts([FromUri]Product model)
{
    return _service.GetSomething(model);
} 
```

注意：点是[FromUri]。

# android - 等待 Home ('android.process.acore') 启动

> ID：12935721
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:42:10.897
> 
> 标签：android, emulation

你能帮我吗..我已经等了2个小时或更长时间，然后模拟器将启动..伙计们两个小时太长了..如何解决..？？

我在同一个站点找到了一个解决方案，例如：“如果您收到此消息，然后再次右键单击项目并重新启动，您将获得另一个模拟器，它会工作..” - 但是该模拟器也需要半小时或更长时间才能启动应用程序..

所以任何人都有任何快速的解决方案，模拟器在 5 到最多 10 分钟内启动..!!

请帮我解决这个问题......

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:52:08.760

1.  转到命令提示符中的 Android SDK 工具目录
    1.  输入 adb kill-server
    2.  然后输入 adb start-server
    3.  启动adb server时没有报错，则adb启动成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:56:10.753

2h太长了，应该最多。5分钟。尝试擦除用户数据而不是从快照启动它？您使用的是什么 API？它是如何配置的？

# c# - c# 中的 Base64 编码文件在使用 smtp 协议发送时被 gmail 和 yahoo 解释不同

> ID：12935724
> 
> 赞同：0
> 
> 时间：2012-10-17T13:42:20.453
> 
> 标签：c#, smtp

至于紧凑型框架 SMTP 客户端不支持；我正在用 c# 编写自己的 SMTP 客户端（用于紧凑框架）。

我正在使用 SMTP 协议发送一个图像文件。但是在雅虎中打开时它已损坏并且在gmail中工作正常。

```
message = "--sdfsafsafsassfsfsfd" + Constant.CRLF
        + "Content-Type: application/image;" + Constant.CRLF
        + "Content-Transfer-Encoding: base64;" + Constant.CRLF
        + "Content-Disposition: attachment;" 
        + " filename=abc.jpg;" + Constant.CRLF + Constant.CRLF; 
```

以下是用于获取文件数据的 base64 字符串的代码。

```
public void SendFile(string fileName)//image/doc file
    {
      string base64;
      using (var fs = new FileStream(fileName, FileMode.Open, FileAccess.Read))
      {
        var buffer = new byte[fs.Length];
        fs.Read(buffer, 0, (int)fs.Length);
        base64 = Convert.ToBase64String(buffer);
      }

      Write(base64); 
    }

public void Write(string message)
{
  System.Text.ASCIIEncoding en = new System.Text.ASCIIEncoding();
  byte[] WriteBuffer = new byte[1024 * 5];
  WriteBuffer = en.GetBytes(message);
  NetworkStream stream = GetStream();
  stream.Write(WriteBuffer, 0, WriteBuffer.Length);
} 
```

我不明白我是否遗漏了什么。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:57:44.040

尝试使用“内容类型：图像/JPEG；” 而不是“应用程序/图像”。

# c++ - 旋转对象及其“子对象”

> ID：12935727
> 
> 赞同：0
> 
> 时间：2012-10-17T13:42:25.323
> 
> 标签：c++, opengl, glm-math

现在我正在旋转一个对象，我们称它为“mainBody”，但连接到 mainBody 的是几个附件，当我旋转我的 mainBody 时，它们也应该旋转，但现在它们没有。我没有使用父/子系统。主体有一个附件数组，并在 mainBody 绘制函数中绘制它们。

主体中的 glPopMatrix() 是在绘制设备项目后完成的。

我知道我过去用 pushMatrix(); 设法做到了这一点。和弹出矩阵（）；但现在它似乎不起作用。

我正在使用 c++、opengl 和 glm。

这是一些代码，向您展示了我现在拥有的内容：

```
{

    setupStartModelMatrix(); //<---- Has glPushMatrix();
    setupModelviewMatrix();  //<--- has all the gml stuff
    drawMainBody();

    }

    if(mNumberOfEquipementOwned != 0)

    {
        for(int i = 0; i < mNumberOfEquipementOwned; i++)
        {
            //obj is retrieved with a function 
            obj->render();
        }
    }

    setupEndModelMatrix();  // <--- Has glPopMatrix(); 
} 
```

和 glm 代码

```
void GameObject::setupModelviewMatrix()
{
    glm::mat4 Projection = glm::perspective(45.0f, 4.0f / 3.0f, 0.1f, 100.f);

    glm::mat4 Model = glm::scale( glm::mat4(1.0f), glm::vec3(1.0f)); 
    glm::mat4 ViewTranslate = glm::translate( glm::mat4(1.0f), glm::vec3(mPosition.x, mPosition.y, mPosition.z)); 
    glm::mat4 ViewRotateX = glm::rotate( ViewTranslate, mRotation.x, glm::vec3(1.0f, 0.0f, 0.0f));
    glm::mat4 ViewRotateY = glm::rotate( ViewRotateX, mRotation.y, glm::vec3(0.0f, 1.0f, 0.0f));
    glm::mat4 View = glm::rotate( ViewRotateY, mRotation.z, glm::vec3(0.0f, 0.0f, 1.0f)); 

    glm::mat4 MVP = View * Model;

    glUniformMatrix4fv( 0, 1, GL_FALSE, glm::value_ptr(MVP)); 

    glLoadMatrixf(glm::value_ptr(MVP));
} 
```

以及绘制设备代码

```
void Gun::render()
{
    glPushMatrix();
    setupModelviewMatrix();
    mMesh->render();
    glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:45:49.840

我的猜测是您正在调用`glPushMatrix()`，旋转，绘制主体，调用`glPopMatrix()`，然后绘制附件。如果这是真的，`glPopMatrix()`请在绘制附件后将调用移至。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:18:43.940

因为蒂姆，我注意到我的矩阵也没有通过其他矩阵。当我终于明白他在说什么时，这很容易解决，所以 100% 的道具都归他所有。

现在是任何可能需要它的人的代码。

```
{
    glm::mat4 startingModel(1.0);

    setupStartModelMatrix();
    startingModel = continuedModelvieuwMatrix(startingModel);
    drawMainBody();
    }

    if(mNumberOfEquipementOwned != 0)
    {
        for(int i = 0; i < mNumberOfEquipementOwned; i++)
        {
            //obj is retrieved with a function 
            obj->render(startingModel);
        }
    }

    setupEndModelMatrix();  // <--- Has glPopMatrix(); 
} 
```

和 glm 代码

```
glm::mat4 GameObject::continuedModelvieuwMatrix(glm::mat4 startingModel)
{
    glm::mat4 Model = glm::scale( glm::mat4(1.0f), glm::vec3(1.0f)); 
    glm::mat4 ViewTranslate = glm::translate( startingModel, glm::vec3(mPosition.x, mPosition.y, mPosition.z)); 
    glm::mat4 ViewRotateX = glm::rotate( ViewTranslate, mRotation.x, glm::vec3(1.0f, 0.0f, 0.0f));
    glm::mat4 ViewRotateY = glm::rotate( ViewRotateX, mRotation.y, glm::vec3(0.0f, 1.0f, 0.0f));
    glm::mat4 View = glm::rotate( ViewRotateY, mRotation.z, glm::vec3(0.0f, 0.0f, 1.0f)); 

    glm::mat4 MVP = View * Model;

    glUniformMatrix4fv( 0, 1, GL_FALSE, glm::value_ptr(MVP)); 

    glLoadMatrixf(glm::value_ptr(MVP));

    return MVP;
}

void GameObject::setupStartModelMatrix()
{
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
} 
```

以及绘制设备代码

```
void Gun::render(glm::mat4 startingModel)
{
    glm::math4 tempModel;
    tempModel = continuedModelvieuwMatrix(startingModel);
    mMesh->render();
} 
```

就是这样。我不能 100% 确定这段代码是否有效，因为由于我的对象构造，我必须以不同的方式为我自己修复它，但这至少应该为遇到同样问题的任何人提供一个良好的开端。

也不需要 glPopMatrix() 或 glPushMatrix() 来完成这项工作。

# entity-framework - EF 5 DBContext.Set .Remove(entity) 失败，但是当我调试并进入时成功

> ID：12935730
> 
> 赞同：1
> 
> 时间：2012-10-17T13:42:34.530
> 
> 标签：entity-framework, entity-framework-5

这里有一个非常奇怪的场景。

使用 DBContext 调用以下代码删除失败

```
int id = 5;
var sql = "SELECT * from dbo.Product WHERE productId = @id";
var data = dbContext.Set<Product>().SqlQuery(sql, new object[] {new SQLParameter("id", id)});

var entityToDelete = data.AsQueryable().FirstOrDefault();

dbContext.Set<Product>().Remove(entityToDelete); 
dbContext.SaveChanges(); 
```

我收到以下错误消息：

> “MyEntities.Products”中的实体参与“FK_Product_ProductType”关系。找到 0 个相关的“ProductType”。1 'ProductType' 是预期的。

现在每个产品都有一个对 ProductType 的外键引用。数据库中实际上为此外键设置了一个值。

这是踢球者。当我逐行调试并进入代码时，它成功了吗？很奇怪？为什么会这样？有任何想法吗？

**更新**

当我在调试时观察变量 entityToDelete 时，它​​成功了。但是如果我取下手表就会失败。这让我觉得这与延迟加载有关。

# scala - scala 不明确支持依赖类型的任何原因？

> ID：12935731
> 
> 赞同：114
> 
> 时间：2012-10-17T13:42:35.123
> 
> 标签：scala, path-dependent-type, dependent-type, shapeless

有路径依赖类型，我认为可以在 Scala 中表达 Epigram 或 Agda 等语言的几乎所有特性，但我想知道为什么 Scala 不更明确地支持[这一点](http://en.wikipedia.org/wiki/Dependent_type)，就像它在其他领域做得很好（比如, DSL) ? 我错过了什么，比如“没有必要”？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-10-17T15:27:43.750

除了语法便利之外，单例类型、路径依赖类型和隐式值的组合意味着 Scala 对依赖类型的支持非常好，正如我试图在[shapeless](https://github.com/milessabin/shapeless)中演示的那样。

Scala 对依赖类型的内在支持是通过[路径依赖类型](http://lampwww.epfl.ch/~odersky/papers/mfcs06.pdf)。这些允许类型依赖于通过对象（即值）图的选择器路径，如下所示，

```
scala> class Foo { class Bar }
defined class Foo

scala> val foo1 = new Foo
foo1: Foo = Foo@24bc0658

scala> val foo2 = new Foo
foo2: Foo = Foo@6f7f757

scala> implicitly[foo1.Bar =:= foo1.Bar] // OK: equal types
res0: =:=[foo1.Bar,foo1.Bar] = <function1>

scala> implicitly[foo1.Bar =:= foo2.Bar] // Not OK: unequal types
<console>:11: error: Cannot prove that foo1.Bar =:= foo2.Bar.
              implicitly[foo1.Bar =:= foo2.Bar] 
```

在我看来，以上内容应该足以回答“Scala 是一种依赖类型的语言吗？”这个问题。积极的一面：很明显，这里我们有类型，这些类型通过作为它们的前缀的值来区分。

然而，人们经常反对 Scala 不是一种“完全”依赖类型的语言，因为它没有在 Agda、Coq 或 Idris 中发现的[依赖求和和乘积类型](http://lambda-the-ultimate.org/node/1299)作为内在函数。我认为这在一定程度上反映了对形式而非基础的固执，不过，我将尝试证明 Scala 比通常公认的更接近这些其他语言。

尽管有术语，但依赖和类型（也称为 Sigma 类型）只是一对值，其中第二个值的类型取决于第一个值。这在 Scala 中可以直接表示，

```
scala> trait Sigma {
     |   val foo: Foo
     |   val bar: foo.Bar
     | }
defined trait Sigma

scala> val sigma = new Sigma {
     |   val foo = foo1
     |   val bar = new foo.Bar
     | }
sigma: java.lang.Object with Sigma{val bar: this.foo.Bar} = $anon$1@e3fabd8 
```

事实上，这是依赖方法类型编码的关键部分，需要在 Scala 2.10 之前（或更早通过实验性的 -Ydependent-method types Scala 编译器选项）[逃离“末日面包店” 。](https://stackoverflow.com/a/7861070/146737)

依赖产品类型（又名 Pi 类型）本质上是从值到类型的函数。它们是表示[静态大小的向量](http://www.cs.bu.edu/~hwxi/DML/DML.html)和其他依赖类型编程语言的典型代表的关键。我们可以使用路径相关类型、单例类型和隐式参数的组合在 Scala 中对 Pi 类型进行编码。首先，我们定义一个特征，它将表示一个从 T 类型的值到 U 类型的函数，

```
scala> trait Pi[T] { type U }
defined trait Pi 
```

我们可以定义一个使用这种类型的多态方法，

```
scala> def depList[T](t: T)(implicit pi: Pi[T]): List[pi.U] = Nil
depList: [T](t: T)(implicit pi: Pi[T])List[pi.U] 
```

`pi.U`（注意在结果类型中使用路径相关类型`List[pi.U]`）。给定类型 T 的值，此函数将返回与该特定 T 值对应的类型的值的（n 个空）列表。

现在让我们为我们想要保持的功能关系定义一些合适的值和隐含的见证，

```
scala> object Foo
defined module Foo

scala> object Bar
defined module Bar

scala> implicit val fooInt = new Pi[Foo.type] { type U = Int }
fooInt: java.lang.Object with Pi[Foo.type]{type U = Int} = $anon$1@60681a11

scala> implicit val barString = new Pi[Bar.type] { type U = String }
barString: java.lang.Object with Pi[Bar.type]{type U = String} = $anon$1@187602ae 
```

现在这是我们使用 Pi 类型的函数，

```
scala> depList(Foo)
res2: List[fooInt.U] = List()

scala> depList(Bar)
res3: List[barString.U] = List()

scala> implicitly[res2.type <:< List[Int]]
res4: <:<[res2.type,List[Int]] = <function1>

scala> implicitly[res2.type <:< List[String]]
<console>:19: error: Cannot prove that res2.type <:< List[String].
              implicitly[res2.type <:< List[String]]
                    ^

scala> implicitly[res3.type <:< List[String]]
res6: <:<[res3.type,List[String]] = <function1>

scala> implicitly[res3.type <:< List[Int]]
<console>:19: error: Cannot prove that res3.type <:< List[Int].
              implicitly[res3.type <:< List[Int]] 
```

（请注意，这里我们使用 Scala 的`<:<`子类型见证运算符，而不是`=:=`因为`res2.type`and`res3.type`是单例类型，因此比我们在 RHS 上验证的类型更精确）。

然而，在实践中，在 Scala 中，我们不会从编码 Sigma 和 Pi 类型开始，然后像在 Agda 或 Idris 中那样从那里开始。相反，我们将直接使用路径相关类型、单例类型和隐式。你可以找到很多关于这如何在无形中发挥作用的例子：[大小的类型](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/sized.scala)、[可扩展的记录](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/records.scala)、[全面的 HLists](https://github.com/milessabin/shapeless/blob/master/core/src/main/scala/shapeless/hlist.scala)、[废弃你的样板](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/sybclass.scala)文件、[通用拉链](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/zipper.scala)等。

我能看到的唯一剩下的反对意见是，在上述 Pi 类型的编码中，我们要求依赖值的单例类型是可表达的。不幸的是，在 Scala 中，这仅适用于引用类型的值，而不适用于非引用类型的值（尤其是 Int）。这是一种耻辱，但不是一个内在的困难：Scala 的类型检查器在内部表示非引用值的单例类型，并且已经进行了一些[实验](http://existentialtype.net/2008/07/21/literally-dependent-types/)[以](https://github.com/paulp/scala/tree/topic/literal-dot-type)使它们可以直接表达。[在实践中，我们可以通过对自然数进行相当标准的类型级编码来](https://github.com/milessabin/shapeless/blob/master/core/src/main/scala/shapeless/nat.scala)解决这个问题。

无论如何，我不认为这种轻微的域限制可以用来反对 Scala 作为依赖类型语言的地位。如果是这样，那么对于 Dependent ML（它只允许依赖于自然数值）也可以这样说，这将是一个奇怪的结论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T07:21:09.667

我认为这是因为（根据我的经验，在 Coq 证明助手中使用了依赖类型，它完全支持它们但仍然不是以一种非常方便的方式）依赖类型是一种非常高级的编程语言特性，它真的很难做对了——并且在实践中可能导致复杂性呈指数级增长。它们仍然是计算机科学研究的主题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-10T21:23:40.550

我相信 Scala 的路径依赖类型只能表示 Σ-types，而不能表示 Π-types。这个：

```
trait Pi[T] { type U } 
```

不完全是 Π 型。根据定义，Π型或依存积是结果类型取决于参数值的函数，表示全称量词，即∀x: A, B(x)。然而，在上面的例子中，它只依赖于类型 T，而不依赖于这个类型的某个值。Pi trait 本身是一个 Σ 型，一个存在量词，即∃x: A, B(x)。在这种情况下，对象的自引用充当量化变量。但是，当作为隐式参数传入时，它会简化为普通类型函数，因为它是按类型解析的。Scala 中依赖产品的编码可能如下所示：

```
trait Sigma[T] {
  val x: T
  type U //can depend on x
}

// (t: T) => (∃ mapping(x, U), x == t) => (u: U); sadly, refinement won't compile
def pi[T](t: T)(implicit mapping: Sigma[T] { val x = t }): mapping.U 
```

这里缺少的部分是将字段 x 静态约束到期望值 t 的能力，有效地形成一个表示类型 T 中所有值的属性的方程。与我们的 Σ 类型一起，用于表示具有给定属性的对象的存在，形成逻辑，其中我们的方程是一个需要证明的定理。

附带说明一下，在实际情况下，定理可能非常重要，以至于它无法从代码中自动推导出来，或者在没有大量工作的情况下无法解决。甚至可以用这种方式制定黎曼假设，只是发现签名不可能在没有实际证明的情况下实现，永远循环或抛出异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-06T02:40:03.357

问题是关于更直接地使用依赖类型的特性，在我看来，拥有比 Scala 提供的更直接的依赖类型方法会有好处。
当前的答案试图在类型理论层面上争论这个问题。我想对其进行更务实的旋转。这可以解释为什么人们在 Scala 语言中对依赖类型的支持程度存在分歧。我们可能有一些不同的定义。（不是说一个是对的，一个是错的）。

这并不是试图回答将 Scala 变成 Idris 之类的东西有多么容易（我想很难）或编写一个库来为 Idris 之类的功能提供更直接的支持（就像`singletons`尝试在 Haskell 中一样）。

相反，我想强调 Scala 和 Idris 之类的语言之间的语用差异。
什么是值和类型级别表达式的代码位？Idris 使用相同的代码，Scala 使用非常不同的代码。

Scala（类似于 Haskell）可能能够编码大量类型级别的计算。这由像`shapeless`. 这些库使用一些非常令人印象深刻和聪明的技巧来做到这一点。但是，它们的类型级别代码（当前）与值级别表达式完全不同（我发现在 Haskell 中这种差距更接近一些）。Idris 允许在类型级别 AS IS 上使用值级别表达式。

明显的好处是代码重用（如果您在两个地方都需要它们，则不需要将类型级别表达式与值级别分开编写）。编写价值级别的代码应该更容易。不必处理像单例这样的黑客应该更容易（更不用说性能成本了）。你不需要学两件事你学一件事。在务实的层面上，我们最终需要更少的概念。类型同义词，类型族，函数，......函数怎么样？在我看来，这种统一的好处要深入得多，而且不仅仅是语法上的便利。

考虑经过验证的代码。请参阅：
[https](https://github.com/idris-lang/Idris-dev/blob/v1.3.0/libs/contrib/Interfaces/Verified.idr)
://github.com/idris-lang/Idris-dev/blob/v1.3.0/libs/contrib/Interfaces/Verified.idr 类型检查器验证单子/仿函数/应用定律的证明，证明是关于实际的monad/functor/applicative 的实现，而不是一些可能相同或不同的编码类型级别等价物。最大的问题是我们在证明什么？

我也可以使用聪明的编码技巧来完成同样的事情（请参阅下面的 Haskell 版本，我还没有看到 Scala 的版本）
[https://blog.jle.im/entry/verified-instances-in-haskell.html](https://blog.jle.im/entry/verified-instances-in-haskell.html)
[https:// github.com/rpeszek/IdrisTddNotes/wiki/Play_FunctorLaws](https://github.com/rpeszek/IdrisTddNotes/wiki/Play_FunctorLaws)
除了类型非常复杂以至于很难看到规律，值级别表达式被转换（自动但仍然）到类型级别的东西，你也需要相信这种转换. 所有这些都存在错误的余地，这有点违背编译器作为证明助手的目的。

（2018.8.10 编辑）谈到证明辅助，这是 Idris 和 Scala 之间的另一个重大区别。Scala（或 Haskell）中没有任何东西可以阻止编写不同的证明：

```
case class Void(underlying: Nothing) extends AnyVal //should be uninhabited
def impossible() : Void = impossible() 
```

而 Idris 有`total`关键字阻止这样的代码编译。

尝试统一值和类型级别代码的 Scala 库（如 Haskell `singletons`）将是对 Scala 对依赖类型的支持的有趣测试。由于路径相关的类型，这样的库在 Scala 中可以做得更好吗？

我对 Scala 太陌生，无法自己回答这个问题。

# java - 实现一个简单的 UDP 网络，持续向其邻居广播

> ID：12935738
> 
> 赞同：6
> 
> 时间：2012-10-17T13:42:43.853
> 
> 标签：java, udp

![http://i.stack.imgur.com/97ERA.png](../Images/6d2eaa38b6e1d2d08f493192999b8784.png)

1.  我有 3 个节点 A、B 和 C 以及它们各自的端口号。
2.  我正在尝试编写一个接受**3 个参数**的 java 程序：它的**节点名称**和它的**2 个相邻节点的端口**并向它们广播一个字符串`"Hello I'm A"`（因此 A 将广播到 B 和 C）。它将每 3 秒执行一次。
3.  该程序将在 3 个单独的实例中运行。
4.  收到字符串后，它将打印它从哪个节点接收到它`"Received string"`（例如端口 B）。

我很难实现这一点，`multicasting`不过我听说过一些叫做 UDP 的东西。这是我到目前为止的工作，我做错了什么？

```
class UDP {
    public static void main(String[] args) throws Exception {
        String nodeName = args[0];
        int neighbourPort1 = Integer.valueOf(args[1]);
        int neighbourPort2 = Integer.valueOf(args[2]);

        while(true) {
            Thread.sleep(3000); //every 3 seconds
            //Continously broadcast and listen to neighbour1
            DatagramSocket socket1 = null;
            try {
                //CREATE SOCKET TO NEIGHBOUR1
                InetAddress host = InetAddress.getByName("localhost");
                socket1 = new DatagramSocket();
                socket1.connect(host, neighbour1);

                //CREATE DATAGRAMS FOR SENDING
                String message = "Hello I'm " + nodeName;
                byte[] sendData = message.getBytes();
                DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, host, port);
                socket1.send(sendPacket);

                //CREATE DATAGRAMS FOR RECEIVING
                byte[] receiveData = new byte[100]; //is there a way to determine the needed space?
                DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
                socket1.receive(receivePacket);
                System.out.println("Received string");

            } catch(Exception e) { }
            //Do the same for neighbour2, code is basically identical except for variables
            DatagramSocket socket2 = null;
            try {
                //CREATE SOCKET TO NEIGHBOUR2
                InetAddress host = InetAddress.getByName("localhost");
                socket2 = new DatagramSocket();
                socket2.connect(host, neighbour2);

                //FOR SENDING DATAGRAMS
                String message = "Hello I'm " + nodeName;
                byte[] sendData = message.getBytes();
                DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, host, port);
                socket2.send(sendPacket);

                //FOR RECEIVING DATAGRAMS
                byte[] receiveData = new byte[100]; //is there a way to determine the needed space?
                DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
                socket2.receive(receivePacket);
                System.out.println("Received string");

            } catch(Exception e) { }
        }

    }
} 
```

我知道我已经接近解决方案了。我能够正常广播，但让我受益的是不断倾听的部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:52:02.757

我认为最好使用单独的线程来监听您自己端口上的数据。

*   **A向****B**发送数据并阻塞，直到它从**B**获得数据包。
*   **B向****C**发送数据并阻塞，直到它从**C**获得数据包。
*   **C向****A**发送数据并阻塞，直到它从**A**获得数据包。

每个节点都在等待对方。只需发送数据包并等待 3 秒。另一个线程将**只听**。

```
public class UDP {

    public static void main(String[] args) throws Exception {
        final String nodeName = args[0];
        final int ownPort = Integer.valueOf(args[1]);
        final int neighbourPort1 = Integer.valueOf(args[2]);
        final int neighbourPort2 = Integer.valueOf(args[3]);

        // Don't create a new socket every time
        DatagramSocket neighbour1 = new DatagramSocket();
        DatagramSocket neighbour2 = new DatagramSocket();

        neighbour1.connect(InetAddress.getLocalHost(), neighbourPort1);
        neighbour2.connect(InetAddress.getLocalHost(), neighbourPort2);

        // You have to LISTEN
        new Thread() {
            @Override
            public void run() {
                try {
                    DatagramSocket socket = new DatagramSocket(ownPort);

                    byte[] buffer = new byte[socket.getReceiveBufferSize()];
                    DatagramPacket packet = new DatagramPacket(buffer, buffer.length);

                    while (true) {
                        // Blocks until it gets a packet
                        socket.receive(packet);

                        System.out.println("Received string");
                    }

                    // socket.close();
                } catch (final Exception e) {
                    e.printStackTrace();
                }
            }
        }.start();

        while (true) {
            Thread.sleep(3000);

            sendPacket(neighbour1, nodeName);
            sendPacket(neighbour2, nodeName);
        }

        // If you're not using an infinite loop:
        // neighbour1.close();
        // neighbour2.close();
    }

    private static void sendPacket(DatagramSocket to, String from) throws Exception {
        String message = "Hello I'm " + from;
        byte[] data = message.getBytes();

        DatagramPacket packet = new DatagramPacket(data, data.length);
        to.send(packet);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:48:31.980

这是一个简单的服务器框架，具有两个线程，一个写入和一个读取，将您的网络代码放置在正确的位置。

```
package testing;

import java.util.Scanner;

public class ThreadTest {
public class MyListenerThread extends Thread {

@Override
public void run() {
    /*
     * Open Datagram ...
     */
    while (true) {
    /*
     * Read data ...
     */
    Scanner scanner = new Scanner(System.in);
    System.out.println("read: " + scanner.next());
    try {
        Thread.sleep(3000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    }
}

}

public class MySenderThread extends Thread {
@Override
public void run() {
    /*
     * Open Multicast ...
     */
    while (true) {
    /*
     * Send ...
     */
    System.out.println("Send ...");
    try {
        Thread.sleep(3000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    }
}

}

public void start() {
MyListenerThread listener = new MyListenerThread();
MySenderThread sender = new MySenderThread();

listener.start();
sender.start();
}

public static void main(String[] args) {
ThreadTest server = new ThreadTest();
server.start();
}

} 
```

# php - 提供 PHP 应用程序的试用版，更容易替代 ioncube、zendguard 和 c。？

> ID：12935739
> 
> 赞同：0
> 
> 时间：2012-10-17T13:42:46.820
> 
> 标签：php, licensing, obfuscation, time-trial

我开发并分发了我销售的 PHP 软件的试用版。我使用 ioncube 对 PHP 源代码进行编码并在线查看安装日期。它工作得很好，但问题是大多数下载试用版的用户甚至没有安装它，可能是因为他们意识到他们需要编辑 php.ini 并将 ioncube 加载程序复制到他们计算机的某个位置。

几乎所有关于 stackoverflow 的类似问题都建议 ioncube、zend 或类似的解决方案......你能建议一个更简单的（从用户的角度来看）解决方案吗？我不在乎它是否不如 ioncube 安全，如果它可以正常工作并防止大多数用户破解，我可以。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:46:33.593

PHP 是一种脚本语言，它可以很容易解码（并禁用试用功能）

您可以尝试将其托管在演示服务器上，在有限的时间内授予对其的访问权限，然后在试用期结束后撤销访问权限

# jquery - jsonp & jquery jQuery 是否在 DOM 中创建脚本节点？

> ID：12935742
> 
> 赞同：2
> 
> 时间：2012-10-17T13:43:05.587
> 
> 标签：jquery, jsonp

jQuery 是否在 DOM 中创建一个`script`节点，将源设置为请求，然后删除该`script`节点？

我在萤火虫中调试它，我从来没有注意到任何额外的`script`节点被添加。想知道 jQuery 是如何处理这个问题的吗？

例如

```
$(document).ready(
    function(){
        $.ajax({
          url: "...",
          type: 'GET',
          dataType: 'jsonp'
        });
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:45:14.993

是的，jQuery`script`在 DOM 中创建了一个元素。（这是 JSON-P 可以工作的唯一方式。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:02:30.890

看一下`jQuery.ajaxTransport`jQuery源码中的函数源码。它返回一个对象，其`send`元素包含一个将脚本添加到 DOM 的函数。这个脚本元素有一个`onload`and `onreadystate`change 处理程序，可以将自己从 DOM 中删除。

# android - 方向更改使应用程序崩溃（如果在加载 SherlockFragment 时完成）

> ID：12935749
> 
> 赞同：2
> 
> 时间：2012-10-17T13:43:34.827
> 
> 标签：android, android-asynctask, android-fragments, actionbarsherlock, android-orientation

我的主要活动中托管了两个选项卡（我使用 ActionBarSherlock）。我的片段加载并解析一个遥远的 xml 以填充列表视图。

如果我在片段完全加载时更改设备方向，它会再次加载而不会出现新方向的问题。但是，如果我在片段加载时更改它，则应用程序强制在加载完成时关闭。

难道我做错了什么？

```
public class PartOne extends SherlockListFragment{

// All static variables
    static final String URL = "http://Y.xml";
    // XML node keys
    static final String KEY_ITEM = "item"; // parent node
    static final String KEY_TITLE = "title";
    static final String KEY_CAT = "category";
    static final String KEY_DESC = "description";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new BackgroundAsyncTask().execute();
    }

    public class BackgroundAsyncTask extends AsyncTask<String, String, ArrayList<HashMap<String, String>>> {

        @Override
        protected void onPreExecute() {
        }

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(String... paths) {

            ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML

            if (xml != null) {
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                if(i%2 != 1) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);

                // data to string (to modify them)
                String titre = parser.getValue(e, KEY_TITLE);
                String categorie = parser.getValue(e, KEY_CAT);           
                String description = parser.getValue(e, KEY_DESC);

                // adding each child node to HashMap key => value       
                map.put(KEY_TITLE, titre);
                map.put(KEY_CAT, categorie);
                map.put(KEY_DESC, description);

                // adding HashList to ArrayList
                menuItems.add(map);

                                    }       
                                                            }
                            }
            // selecting single ListView item
            ListView lv = getListView();

            lv.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // getting values from selected ListItem
                    String name = ((TextView) view.findViewById(R.id.title)).getText().toString();
                    String cost = ((TextView) view.findViewById(R.id.categ)).getText().toString();
                    String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();
                    // Starting new intent
                    Intent in = new Intent(view.getContext(), SingleMenuItemActivity.class);
                    in.putExtra(KEY_TITLE, name);
                    in.putExtra(KEY_CAT, cost);
                    in.putExtra(KEY_DESC, description);
                    startActivity(in);

                }
            });
            return menuItems;
                                                                                    }

        protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

            ListAdapter adapter = new SimpleAdapter(getActivity(),
                    result, R.layout.list_item,
                    new String[] {KEY_TITLE, KEY_DESC, KEY_CAT},
                    new int[] {R.id.title, R.id.desciption, R.id.categ});
            setListAdapter(adapter);
        }

    } 
```

日志 ：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:278)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.IllegalStateException: Content view not yet created
at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
at android.support.v4.app.ListFragment.getListView(ListFragment.java:222) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:04:22.017

**在onConfigurationChanged (Configuration newConfig)**方法中处理你的任务，像这样

```
 Thread th=null;
    public void onCreate(bundle savedInstanceState)
    {
      //Initialize layout

      if(th==null) //This is to check whether task is running
       { 
      //Assign your task
      th=new Thread();
      th.start();
       }
    } 

    //handle the same here
    public void onConfigurationChanged (Configuration newConfig)
    {

       //Do the  layout changes
       if(th==null)//This is to check whether task is running
       { 
       //Assign your task
       th=new Thread();
       th.start();
       }

    } 
```

# c++ - 如何使用空终止字符memset char数组？

> ID：12935752
> 
> 赞同：16
> 
> 时间：2012-10-17T13:43:43.120
> 
> 标签：c++, arrays, c++11, memset, null-terminated

使用空终止字符对整个字符数组进行 m​​emset 的正确和最安全的方法是什么？我可以列出一些用法：

```
...
char* buffer = new char [ARRAY_LENGTH];

//Option 1:             memset( buffer, '\0', sizeof(buffer) );
//Option 2 before edit: memset( buffer, '\0', sizeof(char*) * ARRAY_LENGTH );
//Option 2 after edit:  memset( buffer, '\0', sizeof(char) * ARRAY_LENGTH );
//Option 3:             memset( buffer, '\0', ARRAY_LENGTH );
... 
```

*   这些中的任何一个是否比其他（S）具有显着优势？

*   使用 1、2 或 3 时我会遇到哪些问题？

*   处理此请求的最佳方式是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-17T13:47:50.197

选项一和二是错误的。第一个使用指针的大小而不是数组的大小，因此它可能不会写入整个数组。第二个使用`sizeof(char*)`而不是`sizeof(char)`所以它会写到数组的末尾。选项3没问题。你也可以用这个

```
memset( buffer, '\0', sizeof(char)*ARRAY_LENGTH ); 
```

但`sizeof(char)`保证为1。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-17T13:44:38.207

惯用的方法是对数组进行值初始化：

```
char* buffer = new char [ARRAY_LENGTH](); 
```

**选项 1**仅将第一个`sizeof(char*)`字节设置为 0，或者如果`ARRAY_LENGTH < sizeof(char*)`. 这是由于使用指针的大小而不是类型的大小。

**选项 2**遇到未定义的行为，因为您尝试设置的字节数超过 ARRAY_LENGTH 字节。 `sizeof(char*)`几乎可以肯定大于 1。

由于这是 C++（`new`C 中没有），我建议您使用 a`std::string`代替。

对于 C（假设`malloc`不是`new[]`），您可以使用

```
memset( buffer, 0, ARRAY_LENGTH ); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-17T14:01:12.560

由于问题不断变化，我定义：

1：`memset( buffer, '\0', sizeof(buffer) );`

2a：`memset( buffer, '\0', sizeof(char*) * ARRAY_LENGTH );`

2b：`memset( buffer, '\0', sizeof(char) * ARRAY_LENGTH );`

3：`memset( buffer, '\0', ARRAY_LENGTH );`

如果问题仅仅是“调用的正确方法是什么`memset`”而不是“将该数组归零的最佳方法是什么”，那么 2b 或 3 都是正确的。1 和 2a 是错误的。

您可以在 2b 与 3 上进行风格大战：是否包含`sizeof(char)`- 有些人将其省略，因为它是多余的（我通常这样做），其他人将其放入以创建一种与相同代码设置的一致性的数组`int`。也就是说，即使他们知道大小为 1，他们总是将大小乘以多个元素。一个可能的结论是，对指向的数组进行 m​​emset 的“最安全”方法`buffer`是：

```
std::memset(buffer, 0, sizeof(*buffer) * ARRAY_LENGTH); 
```

如果缓冲区的类型发生变化，此代码仍然正确，当然前提是它继续具有`ARRAY_LENGTH`任何类型的元素，并且所有位为零仍然是正确的初始值。

“C++ is not C”程序员钟爱的另一个选择是：

```
/* never mind how buffer is allocated */
std::fill(buffer, buffer + ARRAY_LENGTH, 0); 
```

如果您关心，您可以自行检查您的编译器是否将其优化为与优化对`std::memset`.

`char *buffer = new char [ARRAY_LENGTH]();`在实践中很漂亮但在 C++ 中几乎没用，因为你几乎从来没有`new`首先分配数组。

`std::string buffer(ARRAY_LENGTH, 0);`介绍了一种管理缓冲区的特定方式，这可能是也可能不是您想要的，但通常是。在`char buffer[ARRAY_LENGTH] = {0};`某些情况下有很多话要说。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-17T14:09:42.903

> *   这些中的任何一个是否比其他（S）具有显着优势？
> *   使用 1、2 或 3 时我会遇到哪些问题？

第一个是错误的，因为`sizeof(buffer) == sizeof(char*)`.

2号和3号都可以。

> *   处理此请求的最佳方式是什么？

为什么不只是：

```
buffer[0] = '\0'; 
```

如果这是一个`char`数组，为什么还要打扰其余的字符呢？将第一个字节设置为零，您`""`的`buffer`.

当然，如果您真的坚持将所有内容`buffer`归零，请使用答案`std::fill`- 这是正确的方法。我的意思是`std::fill(buffer, buffer + ARRAY_LENGTH, 0);`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T13:47:06.090

如果您绝对必须在 C++ 中使用原始数组（这是一个非常不好的主意），请这样做：

```
char* buffer = new char [ARRAY_LENGTH](); 
```

因为 C++`memset`通常是无能者的最后避难所，尽管我在过去几个月中了解到，为了获得可接受的性能，使用当前的工具，当一个人实现自己的字符串类时，有必要降低到那个水平。

代替这些看起来可能需要的原始数组等，`memset`使用例如`std::string`（对于上述情况），`std::vector`等`std::array`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-29T01:23:11.677

从 C++ 11 开始，我会选择：

```
#include <array>

std::array<char, ARRAY_LENGTH> buffer{ '\0' };

buffer.fill('\0'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T13:48:13.947

`Option 3: memset( buffer, '\0', ARRAY_LENGTH ):`只会给你数组的长度，但实际上这个参数是总共有多少字节的内存。

`Option 1: memset( buffer, '\0', sizeof(buffer) ):`会给你错误的答案，因为，`buffer`是`char*`。`sizeof(buffer)`不会给你整个数组的大小，只有指针变量的大小。

选项2是对的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-28T23:49:03.617

好吧，我个人喜欢选项3：

```
memset( buffer, '\0', ARRAY_LENGTH ) 
```

`ARRAY_LENGTH`正是我想填补的记忆。

# php - CodeIgniter：控制器输出 JS - 如何防止响应头返回 cookie

> ID：12935754
> 
> 赞同：1
> 
> 时间：2012-10-17T13:43:46.773
> 
> 标签：php, codeigniter, session

我有一个输出一些 JS 变量（主要是语言变量）的 CI 控制器。我用函数等设置了MIME类型`header`。所以，输出的时候真的是JS。

查看标头响应，我看到正在返回会话数据。作为优化，我想防止它被返回（保存几个字节）。我有办法做到这一点吗？

对于我的常规 JS、CSS 等文件，我将它们放在不设置 session/cookies 的子域中。但是由于 JS 这来自我的应用程序的控制器，它有会话数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:38:48.860

只要尚未发送标头（即 cookie），[`header_remove`](http://php.net/header_remove)就可以使用该功能在将它们发送到浏览器之前将其删除。

这可能是特别有意义的，因为 codeigniter 将所有会话数据作为往返发送。

要检查传出的标头，PHP 的[`headers_list`](http://php.net/headers_list)功能很方便。

# sql - SQL 报告 - 按查询分组以获取 12 个月前的数据（包括本月）

> ID：12935755
> 
> 赞同：1
> 
> 时间：2012-10-17T13:43:47.210
> 
> 标签：sql, report

所以，我发现了这个不错的小查询：

```
Select    count(*) 
FROM      Table_X 
WHERE     year(DATE) = '2012' 
GROUP BY  month(DATE) 
```

这几乎完全符合我的需要.. 除了我需要查询当月的数据，直到 1 年前。因此，对于 2012 年 10 月、9 月、8 月、7 月、6 月、5 月、4 月、3 月、2 月、1 月和 2011 年 11 月 12 月。

所以我只能等到 12 月底再做报告 :) 。但一定有别的办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:46:44.697

尝试使用 DATEADD 计算 12 个月前的日期：

```
Select    count(*) 
FROM      Table_X 
WHERE     DATE > = DATEADD(YEAR,-1,GETDATE())
GROUP BY  month(DATE) 
```

如果问题比这更复杂，请发布它，我将添加到我的答案中。

# antlr - 如何访问 ANTLR AST 中的隐藏令牌？

> ID：12935757
> 
> 赞同：1
> 
> 时间：2012-10-17T13:43:55.117
> 
> 标签：antlr, antlr3

我正在尝试用 Java 为 ANTLR V3 生成的 AST 编写手动树遍历器。AST 是使用岛语法构建的，类似于[ANTLR 中指定的语法：从不同的语法中调用规则](https://stackoverflow.com/questions/6651289/antlr-call-a-rule-from-a-different-grammar)。

在 AST 中，我有一个表达式列表节点，每个表达式都作为子节点。现在我需要知道分隔表达式的逗号的行号。COMMA 存在于解析中，但在 AST 重写期间被删除。

我看到一些资源（[此处](http://www.antlr.org/wiki/pages/viewpage.action?pageId=557063)和[此处](http://www.antlr.org/pipermail/antlr-interest/2008-July/029383.html)）指向 CommonTokenStream.getTokens 的使用，但我不确定如何在处理 AST 时访问 CommonTokenStream。无论如何我可以获得用于构建 AST 的 CommonTokenStream 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:41:30.293

可以通过 访问完整的令牌列表`CommonTokenStream.getTokens()`，您可以在调用 tree walker 之前调用它。令牌列表将是 walker 的参数。无需更改 CommonTree，除非您希望将恢复的信息嵌入树中。

我已经使用标记列表将隐藏标记（例如注释和显式行号（想想 FORTRAN））与最近的可见标记相关联。这是在对 AST 进行后处理并查看可用于列表中的标记和 AST 中的节点的行、列和字符索引信息时完成的。

我在 AST 构建期间尝试这样做的尝试导致了 hacky、不可维护的代码。后处理代码 OTOH 是 Programming-101 算法。

# jquery - 如何在拖动时禁用单击

> ID：12935762
> 
> 赞同：3
> 
> 时间：2012-10-17T13:44:20.720
> 
> 标签：jquery, jquery-ui-draggable

我有这样的事情：

```
<div class="container">
  <img src=""><img src=""><img src=""><img src=""><img src=""><img src="">
  <div class="vid"></div>
</div> 
```

和 jQuery

```
jQuery(".container").draggable({
        cursor: "move",
        opacity: 0.85,
        axis: "x",
        containment: [-wystaje, 0, 0, 0]
    }); 
```

和

```
jQuery('img').each(function () {
  jQuery('.vid').fadeIn("slow");
 }); 
```

现在，当我单击图像并拖动时，会出现 div“vid”。怎么做：

我单击图像，拖动，释放鼠标按钮，然后单击图像并出现 div“vid”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-06T19:16:31.577

你可以试试这个：

```
.container{ 
    border: 1px solid blue;
    height: 400px;
}

.vid { 
    width: 100px;
    height: 100px;
    background: black;
    display: none;
}

img {
    width: 100px;
    height: 100px;
    background: purple;
} 
```

这是jQuery：

```
$(document).ready(function(){

    jQuery(".container").draggable({
        cursor: "move",
        opacity: 0.85,
        axis: "x"
    });

    jQuery('img').click(function () {
        jQuery('.vid').fadeIn("slow");
    });

}); 
```

# mysql - 我应该使用哪种技术来处理每 30 秒 100 万 * 100 万次计算

> ID：12935771
> 
> 赞同：1
> 
> 时间：2012-10-17T13:44:36.897
> 
> 标签：mysql, performance, hadoop

我开发了一个 GPS 应用程序，所有设备（在路上移动）每 30 秒将它们的坐标发送到服务器。现在我必须计算这些设备之间的距离，所以如果任何设备进入另一个设备的范围内，那么这两个设备都会收到通知。

我知道如何计算两个坐标之间的距离（感谢谷歌），但我不确定如何实现它；如果我们有 100 万台设备同时向服务器发送数据，那么服务器需要每 30 秒执行 100 万*（100 万 - 1）次距离计算。

请让我如何实现它。我是否需要使用 Hadoop 或 MySQL 数据库程序之类的东西来完成这项工作？计算在这里不是问题，但处理和计算这么多数据是一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:45:46.560

有一种称为[QuadTree](http://en.wikipedia.org/wiki/Quadtree)的数据结构。保持四叉树中的数据点更新，您将拥有一个小得多的数据集来比较这些值。

当客户端登录并移动并向您发送数据点时，您会更改它们在四叉树中的位置。现在，QuadTree 将拥有所有数据点的 2d 地图，分成桶。每个桶包含 4 个其他桶，其中可能有也可能没有点。当您试图找到给定数据点 X 内的每个人时，您会查看该点所在的桶中的所有点。然后查看桶中“围绕”该桶的所有点。（其中有 8 个。NSEW NW SW NE SE。）您继续前进，直到到桶的距离（以及其中的所有点）大于您的最小范围。

现在其他所有人，其中大多数人可能离得很远，都不需要接受测试。你永远看不到他们的水桶。

# hadoop - Hadoop Map Reduce 引用静态对象

> ID：12935774
> 
> 赞同：2
> 
> 时间：2012-10-17T13:44:52.887
> 
> 标签：hadoop, mapreduce

我的 map reduce 作业类中有一个静态对象，我想初始化一次（在 main 方法中），然后在每个映射中调用它的函数。所以我有这个对象，我声明为变量的 MyObject：

```
static MyObject obj; 
```

在我的主要功能中，在我开始工作之前，我调用：

```
obj = new MyObject();
obj.init(); 
```

然后在我的地图函数中我想调用：

```
obj.execute(); 
```

但是由于某种原因，当我尝试此操作时出现空指针异常（它说 obj 为空）。如果我在我的主函数中初始化它，映射器不应该将它视为已初始化吗？映射器是否看到静态变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T14:38:55.287

静态对象驻留在内存中。现在您的系统是分布式的，因此您创建的对象位于运行作业跟踪器的节点的内存中，而不是在其他系统上。

现在您不能将对象从作业传递到映射器，因为配置是写为 xml，但是有一种解决方法，将您的对象序列化为 JSON，然后将其作为字符串放入您的配置中，并在映射器中反序列化此 json 对象

为工作

```
job.getConfiguration().set("some key", "json string") 
```

用于映射器

```
Configuration conf = context.getConfiguration();
conf.get("some key"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T14:47:34.657

您的 main() 不会在每个节点上调用，它仅在您启动作业的地方运行。为了访问您的静态对象，需要在映射器的实例化时对其进行初始化。这样初始化将发生在每个运行地图任务的节点上。

但是可能还有另一种方法可以做你想要完成的事情，所以问题是，这个静态对象有什么作用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:16:46.947

由于我的对象实际上是在加载一个库，因此我最终使用了分布式缓存并仅在 M/R 方法中实例化该对象。

# ios6 - ZUUIRevealControler：在 iPhone（Retina 4Inch）中运行时，rearViewContriller 的视图大小出现问题

> ID：12935776
> 
> 赞同：4
> 
> 时间：2012-10-17T13:44:55.000
> 
> 标签：ios6, retina-display, iphone-5

我遇到了 ZUUIRevealController 的问题。

问题：

在 iPhone (Retina 4Inch) 模拟器中运行时，[rearViewController View] 的高度仍然是

```
frame = (0 0; 320 480) 
```

代替

```
frame = (0 0; 320 568). 
```

所以后视图似乎被截断了。

但是这个问题不存在于frontViewController。

这是我如何添加我的后视图控制器和前视图控制器

```
viewCont1 *frontViewController = [[viewCont1 alloc]initWithNibName:@"viewCont1" bundle:nil];

    navigationController = [[UINavigationController alloc] initWithRootViewController:frontViewController];

    viewCont2 *rearViewController = [[viewCont1 alloc] initWithNibName:@"viewCont1" bundle:nil];

    revealController = [[RevealController alloc] initWithFrontViewController:navigationController rearViewController:rearViewController];

    revealController.delegate = rearViewController; 
```

有没有人遇到过这样的问题？？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:43:14.640

我想通了。我们必须将前后VC都保留为navigationController

```
frontVc *frontViewController = [[frontVc alloc]initWithNibName:@"frontVc" bundle:nil];

frontNavigationController = [[UINavigationController alloc] initWithRootViewController:frontViewController];

rearVc *rearViewController = [[rearVc alloc] initWithNibName:@"rearVc" bundle:nil];

rearNavigationController = [[UINavigationController alloc] initWithRootViewController:rearViewController];

revealController = [[RevealController alloc] initWithFrontViewController:frontNavigationController rearViewController:rearNavigationController]; 
```

# jquery - 滑块淡出基于类的切换

> ID：12935777
> 
> 赞同：0
> 
> 时间：2012-10-17T13:44:58.740
> 
> 标签：jquery, class, jquery-animate

我正在制作一个滑块，并试图为缩略图写一些东西，所以当点击一个时，它会淡入淡出，其余的会淡出。我试图用类来做，所以它们都有类隐藏，我试图做一个 onclick 所有 div，隐藏类淡出，然后点击的 div 淡入。

```
$("#figure_lymph_blue").click(function(){
$("#standards_container_total").animate({
marginLeft: -2251
}, 750 );
figure_fadeout();
figure_fadein();
});

function figure_fadeout() {
$(".hide").animate({
    "opacity":      "0.0",
    "-moz-opacity": "0.0",
    "filter":       "alpha(opacity=0)"    
}, 450);
}

function figure_fadein() {
$(this).animate({
    "opacity":      "1.0",
    "-moz-opacity": "1.0",
    "filter":       "alpha(opacity=100)"    
}, 450);
} 
```

由于某种原因，淡入功能不起作用，但淡出工作正常，我不明白为什么。也许有更好的方法来做到这一点？

# java - 如何使用部署为 uberjar 的库？

> ID：12935783
> 
> 赞同：1
> 
> 时间：2012-10-17T13:45:18.110
> 
> 标签：java, jar, uberjar, reflections

我正在尝试使用作为 uber-jar 提供的 Reflections 0.9.8 库。如果我在项目的构建路径中添加它的 JAR（“reflections-0.9.8-uberjar”），那么 Eclipse 将找不到它的任何类类型：Reflection、ClasspathHelper 等等。

如果我提取单个“reflections-0.9.8.jar”（**不是****uber**的）并将其添加到构建路径中，那么在编译时一切正常，但是当我执行我的项目时，我得到一个 NoClassDefFoundError（我是很确定这是由于缺乏依赖关系造成的）。

我还尝试在 uber-jar 中添加每个 .jar，但我仍然会得到 NoClassDefFoundError。

我需要做什么才能使用这个作为 uberjar 分发的库？

**编辑：** 如果有帮助，这是我想调用反射的方法（这是我从[Can you find all classes in a package using reflection? 中摘录的一个片段？](https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection)）：

```
private static Set<Class<?>> getAllClassesInPackage(String pckg){
    List<ClassLoader> classLoadersList = new LinkedList<ClassLoader>();
    classLoadersList.add(ClasspathHelper.contextClassLoader());
    classLoadersList.add(ClasspathHelper.staticClassLoader());

    Reflections reflections = new Reflections(new ConfigurationBuilder()
        .setScanners(new SubTypesScanner(false), new ResourcesScanner())
        .setUrls(ClasspathHelper.forClassLoader(classLoadersList.toArray(new ClassLoader[0])))
        .filterInputsBy(new FilterBuilder().include(FilterBuilder.prefix(pckg))));

    return reflections.getSubTypesOf(Object.class);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T18:01:48.857

我和你有同样的问题，消息 NoClassDefFoundError。搜索了一段时间，我发现在其他 jar 中放置 jar，例如在反射 0.9.8.jar 中存在的那些会产生这个问题。然而，当我像你一样提取它时，我又看到了同样的问题。我推断这可能是由于 Reflection 包的编译版本（在 1.5 版本中编译），并且我的项目是在 1.6 上编译的。

我决定放弃使用 Reflections 包并发布了一个临时解决方案来检索包中的类：

[您可以使用反射找到包中的所有类吗？](https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection)

我希望它有所帮助。

# php - 如何在除数据库和字符串之外的 100% 等于的应用程序中存储字符串？

> ID：12935787
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:45:28.113
> 
> 标签：php, gettext

我在一些几乎相同的 php web 应用程序中工作，除了内容数据库、文本和主题。让我们考虑一些类似的可能是 stackexchange 网站。

目标是在同一个存储库中只维护一个项目，所以如果我引入一个新特性，我只需要实现一次，而不是针对每个站点。

对于主题和数据库来说不是问题，但对于我不知道如何继续的文本（现在文本被硬编码在 php 文件中）。

我在 SO 中进行了谷歌搜索和搜索，我发现了一些类似的问题，其中答案是使用 gettext for i18n。但就我而言，它并不完全是 i18n，因为有些网站使用相同的语言，但文本不同。

如何存储这些字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:57:20.993

例如，您可以在每个数据库中创建一个名为“texts”的表，其中包含该应用程序的特定文本。由于您已经必须为每个应用程序连接不同的数据库，因此您可以轻松实现始终获取`SELECT value FROM {current_database}.texts WHERE key = "headertext"`左右。

这样，您的代码可以保持不变，只有数据库彼此不同。

**更新：**当然 i18n 本地化也很容易以这种方式实现，通过在`texts`包含本地化值的表中添加另一列（如`en`，`de`或`nl`等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:22:09.317

有很多方法可以完成这项工作。我有一个合适的项目场景，我以不同的方式归档不同的东西：

*   一个项目的所有实例都来自同一个 SVN 文件夹。
*   每个实例都有自己的配置文件，它不包含在 SVN 中。

除此之外，每个项目都有自己的：

*   文本库（标签等）
*   模板集
*   内容

我使用自己的翻译系统在我的实例上分发文本库。您可以使用一些 php 的内置函数：http: [//verens.com/2008/04/03/translation-in-php/](http://verens.com/2008/04/03/translation-in-php/)

模板集只是由一个为模板引擎设置根目录的配置变量完成的：`./templates/instance-x/...`

内容也可以由配置变量引用。就我而言，我有一个商店系统，它使用一个产品库，所有实例都使用相同的产品库。要使产品对公众可用/可见，您必须将其分配给一个类别。类别和实例相关。

类别有一个特定于实例的 ID（在我的例子中是`shop_id`）。

# c++ - 如何将 kinect 图像帧传递给 Qt 标签？

> ID：12935790
> 
> 赞同：2
> 
> 时间：2012-10-17T13:45:32.643
> 
> 标签：c++, qt, kinect, kinect-sdk

我正在使用 Kinect SDK 和 Qt 工具包制作一个在 GUI 窗口中显示深度框架的应用程序。对于普通的 opencv 相机图像，我用来执行此操作：

```
qimage = QImage(image.data, 640, 480, QImage::Format_Indexed8);
    pixmap = QPixmap::fromImage(qimage);
    ui.DepthView->adjustSize(); 
```

但是对于 Kinect sdk，这是行不通的。当我抓住这样的框架时：

```
hr = m_pNuiSensor->NuiImageStreamGetNextFrame(m_pDepthStreamHandle, 
1000, &imageFrame); 
```

我无法将其转换为 Qimage。我还尝试在抓取框架后使用纹理：

```
hr = m_pNuiSensor->NuiImageFrameGetDepthImagePixelFrameTexture(m_pDepthStreamHandle,
&imageFrame, &nearMode, &pTexture); 
```

然后我尝试将 pTexture 转换为 Qimage，但这也不起作用。

我显然在这里做错了什么，有人可以给我一些指示吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:12:58.270

image.data 的值是否保留？它必须保持有效，直到 QImage 不再使用......

# android - 位图内存不足问题

> ID：12935793
> 
> 赞同：5
> 
> 时间：2012-10-17T13:45:45.310
> 
> 标签：android, android-camera

**我的问题**

我用我的安卓设备拍照。然后我从文件中解码该图片。

```
 Bitmap photo = BitmapFactory.decodeFile(EXTERNAL_IMAGE_PATH+File.separator+this._currentPhotoName+JPEG_FILE_SUFFIX);
        if (photo == null && data != null) 
            photo = (Bitmap) data.getExtras().get("data");
        else if (data == null && photo == null)
            Log.e("CCPhotoManager","Can't find image from file or from intent data."); 
```

然后我检查那张图片，看看它是否需要旋转到正确的方向。

```
 try {
                ExifInterface exif = new ExifInterface(EXTERNAL_IMAGE_PATH+File.separator+this._currentPhotoName+JPEG_FILE_SUFFIX);
                int rotation = CCDataUtils.exifToDegrees(exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,ExifInterface.ORIENTATION_NORMAL));
                Log.v("CCPhotoManager", "Rotation:"+rotation);
                if (rotation > 0) {
                    photo = this.convertSavedImageToCorrectOrientation(EXTERNAL_IMAGE_PATH+File.separator+this._currentPhotoName+JPEG_FILE_SUFFIX, photo, rotation);
                }
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } 
```

如果它确实需要旋转，我称之为这个方法。

```
public Bitmap convertSavedImageToCorrectOrientation(String filePath,Bitmap photo,int rotation) {
        Log.d("CCPhotoManager", "Changing Orientation of photo located at: "+filePath+" Rotating by:"+rotation);
        int width = photo.getWidth();
        int height = photo.getHeight();

        Matrix matrix = new Matrix();
        matrix.preRotate(rotation);

        Bitmap adjusted = Bitmap.createBitmap(photo, 0, 0, width, height, matrix, true);

        try {
               FileOutputStream out = new FileOutputStream(filePath);
               adjusted.compress(Bitmap.CompressFormat.JPEG, 100, out);
        } catch (Exception e) {
               e.printStackTrace();
        }

        return adjusted;
    } 
```

如果在线调用，我会收到**内存不足的**投诉`convertSavedImageToCorrectOrientation``Bitmap adjusted = Bitmap.createBitmap(photo,0,0,width,height,matrix,true);`

这只是在`Samsung Galaxy S3`. 它在和`Samsung Galaxy Ace`上运行良好。`HTC Hero``Sony Xperia U`

这是错误。

```
10-17 14:33:33.950: E/AndroidRuntime(12556): java.lang.OutOfMemoryError
10-17 14:33:33.950: E/AndroidRuntime(12556):    at android.graphics.Bitmap.nativeCreate(Native Method)
10-17 14:33:33.950: E/AndroidRuntime(12556):    at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
10-17 14:33:33.950: E/AndroidRuntime(12556):    at android.graphics.Bitmap.createBitmap(Bitmap.java:551) 
```

这也是一个巨大的内存量。

```
10-17 14:33:33.945: E/dalvikvm-heap(12556): Out of memory on a 31961104-byte allocation. 
```

我认为这与周围的位图数量有关，但我不确定如何阻止此错误的发生。

我知道你可以打电话`.recycle();`给他们，但它似乎不起作用。

**我的问题**

如何正确处理我的位图，这样我就没有这个 OOM 问题？

**提前致谢**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T01:17:38.710

我有完全相同的问题，在完全相同的设备上做完全相同的事情！不幸的是，在我的情况下，需要使用完整尺寸的原始图像将图像提交给网络服务。对我有用的是在清单的应用程序元素中打开[largeHeap](http://developer.android.com/guide/topics/manifest/application-element.html#largeHeap)。

这不会永久解决问题 - 设备可能会配备更大的相机，即使启用了 largeHeap，图像也无法放入内存。为了捕捉这种极端情况，我还在旋转图像的代码周围放置了一个 try catch，并向用户显示了一个很好的错误。

一个更完整的解决方案是编写您自己的 jpeg 操作代码，该代码可以使用基于流的方法旋转 jpeg，以便永远不需要将图像加载到内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T13:50:22.603

对于内存不足的问题

//解码图像并对其进行缩放以减少内存消耗

```
private Bitmap decodeFile(File f){

try {
    //Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(new FileInputStream(f),null,o);

    //The new size we want to scale to
    final int REQUIRED_SIZE=70;

    //Find the correct scale value. It should be the power of 2.
    int scale=1;
    while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
        scale*=2;

    //Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize=scale;
    return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
} catch (FileNotFoundException e) {}
return null;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T15:41:05.373

以下是如何调整大小/旋转的更完整示例，部分摘自 Android 开发人员指南（更改 REQ_WIDTH 和 REQ_HEIGHT）：

```
private static final int REQ_WIDTH = 450;
private static final int REQ_HEIGHT = 450;

/**
 * Resize, crop, rotate and Inserts the picture on the layout.
 * 
 * @param mImageView to insert the bitmap.
 * @param imageURI from wich to obtain the bitmap.
 * 
 */
private void setPic(ImageView mImageView, String imageURI) {
    // Get the original bitmap dimensions
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imageURI, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, REQ_HEIGHT, REQ_WIDTH);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    Bitmap bitmap = BitmapFactory.decodeFile(imageURI, options);

    //need rotation?
    float rotation = rotationForImage(getActivity(), Uri.fromFile(new File(imageURI)));

    if (rotation != 0) {
        //rotate
        Matrix matrix = new Matrix();
        matrix.preRotate(rotation);
        mImageView.setImageBitmap(Bitmap.createBitmap(bitmap, 0, 0, REQ_HEIGHT, REQ_WIDTH, matrix, true));
    } else {
        //use the original
        mImageView.setImageBitmap(BitmapFactory.decodeFile(imageURI, options));
    }
}

public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }
    }
    return inSampleSize;
}

public static float rotationForImage(Context context, Uri uri) {
    try {
        if (uri.getScheme().equals("content")) {
            String[] projection = { Images.ImageColumns.ORIENTATION };
            Cursor c = context.getContentResolver().query(uri, projection, null, null, null);
            if (c.moveToFirst()) {
                return c.getInt(0);
            }
        } else if (uri.getScheme().equals("file")) {
            ExifInterface exif = new ExifInterface(uri.getPath());
            int rotation = (int) exifOrientationToDegrees(exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL));
            return rotation;
        }
        return 0;

    } catch (IOException e) {
        Log.e(TAG, "Error checking exif", e);
        return 0;
    }
}

private static float exifOrientationToDegrees(int exifOrientation) {
    if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_90) {
        return 90;
    } else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_180) {
        return 180;
    } else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_270) {
        return 270;
    }
    return 0;
} 
```

# android - 链接到自定义谷歌地图

> ID：12935805
> 
> 赞同：3
> 
> 时间：2012-10-17T13:46:09.673
> 
> 标签：android, eclipse, google-maps

我正在尝试将 Map 元素添加到我正在开发的应用程序中。我知道如何添加谷歌地图，并通过网上的许多教程添加叠加层。然而，我想要做的是链接到我已经在谷歌地图“我的地方”中在线创建的谷歌地图（这有大约 100 个经常变化的地点标记）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:11:06.820

我决定将信息传递给谷歌地图应用程序，并让他们通过创建一个按钮来帮助他们，该按钮只需启动谷歌地图并将特定地图的链接作为 DataUri。下面是我的解决方案的代码，如果其他有类似需求的人偶然发现这个。

```
Button map = (Button)findViewById(R.id.map);
        map.setOnClickListener(new OnClickListener() {
            public void onClick(final View v) {
            String uri = String.format("https://maps.google.co.uk/....."); // the link copied and pasted from my maps in google 
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
            startActivity(intent);
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:51:09.517

也许你可以简单地添加一个网络视图并在里面加载你的谷歌地图，如果它是一个网络版本的话。

# ruby - Ruby 是否存在（实验性）类浏览器？

> ID：12935807
> 
> 赞同：21
> 
> 时间：2012-10-17T13:46:13.430
> 
> 标签：ruby, ide, smalltalk, pry, maglev

Ruby 是否存在（实验性）类浏览器？

我说的是类似于大多数 Smalltalk 实现的类浏览器/编辑器组合（即专注于 [运行时] 类/对象而不是 .rb 文件）

![Squeak Smalltalk 类浏览器](../Images/a614cf97eb206c6725619ffb17b27758.png)

PS：看起来 pry 已经能够做很多 smalltalk 风格的类浏览器需要的事情了？[https://speakerdeck.com/u/rahult/p/pry-an-irb-alternative-on-steroids](https://speakerdeck.com/u/rahult/p/pry-an-irb-alternative-on-steroids)

PS2：看起来 Seaside Smalltalk 框架有一个[基于 Web 浏览器的类浏览器](http://www.seaside.st/files/e5/j0odnetjvprbsy8kyp45g0q7blphkn/browser.png)

PS3：MagLev/Webtools 是我发现的最接近的：

![在此处输入图像描述](../Images/77a5ef2ec9ccc9c51476a2909d47d1f9.png)

PS4：显然[http://tibleiz.net/code-browser/index.html](http://tibleiz.net/code-browser/index.html)有 Ruby 支持，并且能够呈现类似 Smalltalk 的类浏览器：

![在此处输入图像描述](../Images/aa79584f583e5ab099cc608b2484dc30.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T14:34:13.680

查看[github 上](https://github.com/maglev/webtools/tree/refactoring)的 maglev/webtools 项目以及[ruby​​mirrors gem](https://github.com/timfel/rubymirrors)。它已经为多个 Ruby 实现提供了一个类浏览器和工作区，并且图形调试器也可以在 MagLev 上工作（在 MRI 上没有那么多）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T19:59:59.180

如果您想构建一个，最简单的方法是使用[MOOSE](http://www.moosetechnology.org)并在用 PetitParser 编写的 Ruby 解析器之上使用 Glamour 构建浏览器。然后你可以使用 Pharo 作为你的 Ruby IDE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-17T13:03:14.317

您也可以查看**Maglev Database Explorer** [1, 2]。

[1] 视频：[http ://www.youtube.com/watch?v=27mS1BNP7wQ](http://www.youtube.com/watch?v=27mS1BNP7wQ)

[2] 宝石：[https ://github.com/matthias-springer/maglev-database-explorer-gem](https://github.com/matthias-springer/maglev-database-explorer-gem)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T12:30:36.533

有。它被称为反身。[https://github.com/dolzenko/reflexive](https://github.com/dolzenko/reflexive)

（不过我从来没有花时间尝试过，所以我很好奇它的其他体验。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T14:08:35.867

我没有经验（而且它很旧），但可能[rbbr](http://ruby-gnome2.sourceforge.jp/hiki.cgi?rbbr)仍然有效。

# css - 最后使用问号 (?) 在浏览器中访问 CSS

> ID：12935808
> 
> 赞同：3
> 
> 时间：2012-10-17T13:46:16.553
> 
> 标签：css, web-applications, webserver

`CSS`有人可以通过在最后加上问号来解释在浏览器中访问的区别`?`以及为什么新的 CSS 对网站没有任何影响。

我已经`CSS`在 Web 服务器上部署了一个新的，但它没有产生任何影响。

我尝试在浏览器中打开 URL，如下所示：

`www.mysite.com/styles/css/main.css`

它会加载旧版本的`CSS`.

然后我尝试如下，它加载了新版本的 CSS。

`www.mysite.com/styles/css/main.css?`

做完这一切之后。新的 CSS 更改不会影响网站。它仍然显示旧设计。

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:10:30.100

您需要在 ? 然后在更改 CSS 时更改它。正在发生的事情是浏览器将缓存任何在特定时期内没有变化的东西，它通过检查文件名来做到这一点。所以main.css？仍然是 main.css 吗？问号后面的任何内容都是查询字符串，通常用于将数据传递到特定文件。在这种情况下，它仅用于更改文件字符串，因此浏览器每次更改时都会更新它，而不会影响文件本身。

有几种方法可以处理这个问题，第一种是手动更改版本，如果你有一个头文件，这可能是最简单的想法，就像在总是加载相同头数据的模板系统中一样。

```
<link rel="stylesheet" type="text/css" href="assets/css/main.css?ver1/> 
```

然后在下一次更改：

```
<link rel="stylesheet" type="text/css" href="assets/css/main.css?ver2/> 
```

如果您希望自动执行此操作，您可以在 css 行中添加一些 PHP 脚本，如下所示：

```
 <link rel="stylesheet" type="text/css" href="assets/css/main.css?time=<?php echo filemtime('./assets/css/main.css');?>" /> 
```

这实质上是添加一个值，每次保存文件时都会更改并导致类似的结果，下次我保存文件时 time= value 将更改：

```
<link rel="stylesheet" type="text/css" href="http://localhost/refficient/trunk/assets/css/main.css?time=1350305706" /> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-10T08:24:34.680

浏览器缓存是什么原因，添加？不推荐使用css之后。打开您的托管空间并清除缓存和线程池。

# java - 集成测试elasticsearch，计时问题，找不到文档

> ID：12935810
> 
> 赞同：14
> 
> 时间：2012-10-17T13:46:20.210
> 
> 标签：java, elasticsearch

我在 java 中有一个外观的集成测试，它做了一些事情，其中​​包括对弹性搜索数据库的索引操作。这个弹性搜索数据库的设置非常天真（实际上是开箱即用的东西，我正在学习中）。插入在该外观内完成，使用 java api，也非常天真，示例几乎完全从弹性搜索中复制粘贴，如下所述：[http ://www.elasticsearch.org/guide/reference/java-api /index_.html](http://www.elasticsearch.org/guide/reference/java-api/index_.html)。

之后我测试我的外观是否正确地完成了它的工作，其中一部分是检查该文档是否真的被插入到数据库中。我再次按照弹性在他们的网站上描述的方式这样做：[http](http://www.elasticsearch.org/guide/reference/java-api/search.html) ://www.elasticsearch.org/guide/reference/java-api/search.html 。我插入一个具有特定有效负载的文档并以相同的方式查找它。

如果我在调试中运行并在外观完成后设置断点，则此测试有效，但如果我不放置此断点或不在调试中运行，它会失败并且找不到结果。这让我觉得我真的做错了什么。此外，应用程序本身可以工作（插入等），所以我的集成测试可能有问题，而不是我复制粘贴的代码。

我猜在索引操作返回之后，索引还没有真正完成，或者在搜索之前有一些复制没有完成，或者类似的事情，但它让我不知道究竟是什么，我似乎不能解决它。我还没有尝试将弹性放在一个节点和一个分片上，也许那里有问题，但我真的不知道到底是什么，所以我还没有走那条路。就像我说的，刚开始使用弹性，所以我可能会遗漏一些重要的和初学者风格的东西。如果需要，我可以粘贴我的确切代码，但就像我说的那样，它归结为在测试中使用来自弹性搜索站点的两个代码片段。

卡斯帕

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-17T14:15:29.133

Elasticsearch 不会在调用索引操作后立即提供数据。默认情况下，它会等待 1 秒以等待更多数据到达。但是，您可以通过调用以下命令强制 elasticsearch 使所有数据立即可用`refresh`：

```
client.admin().indices().refresh(refreshRequest()).actionGet(); 
```

尝试在外观完成索引后添加此操作，然后再检查最终结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-28T13:45:49.397

找不到 refreshRequest 方法。我用过这样的东西，现在似乎可以工作了。我会做更多的测试

```
client.admin().indices().refresh(new RefreshRequest(indexName)).actionGet(); 
```

其中 indexName 是要刷新的索引的字符串名称

# eclipse-plugin - 比较 Eclipse 中的 ASTNode

> ID：12935814
> 
> 赞同：0
> 
> 时间：2012-10-17T13:46:31.047
> 
> 标签：eclipse-plugin, static-analysis, abstract-syntax-tree, eclipse-jdt

我正在为 Eclipse 编写一个插件，该插件会定期遍历 Eclipse JDT 提供的抽象语法树并将 IMarkers 放置在某些节点上 - 例如，突出显示 printStackTrace() 以供删除[（Youtube Demo）](http://www.youtube.com/watch?v=M1Ibg2UP_w8)。对于随后的每次步行，我想避免放置第二个（或第三个或第四个或......）标记。

这些节点的位置可以改变（如果在两次行走之间编辑了文档），但 IMarker 不会（在保存文档之前，IMarker 位置不会更新），所以我不能对这些对象使用 char_start 和 char_end 比较。

我也不能使用 ASTNode 的 .equals 方法，因为 ASTNode 的存储副本不会更新这些 charstart 和 charend 位置。我也尝试过比较 getParent() 节点，但这有其自身的问题（即两个 printStackTraces，在单独的 catch 块中，将有一个共同的[TryStatement](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fdom%2FTryStatement.html)父节点）

现在，我正在考虑扩展[ASTMatcher](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fdom%2FASTMatcher.html)并覆盖各种 match() 方法，但要调用每个 match()，我需要将其中一个节点从 ASTNode 转换为适当的子类。

在尝试使用大量 switch 语句和大量转换之前，是否有更优雅的解决方案来检查两个 ASTNode 是否相同而不依赖于 .equals()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:41:37.637

通常，验证器和构建器会在返回并为特定验证或构建添加自己的标记之前删除文件上的所有标记。我怀疑他们那样做而不是采用你的方法，因为那样更容易。除非有严重的性能原因不这样做，否则我会采用这种方法。

如果您确实需要在新旧之间进行比较，则需要编写一个 switch 语句并进行大量转换，尽管您至少可以使用某种工厂模式使其看起来优雅。

# cakephp - 如何删除cakephp中的记录

> ID：12935816
> 
> 赞同：6
> 
> 时间：2012-10-17T13:46:30.647
> 
> 标签：cakephp

谁能告诉我如何从数据库中删除记录？我完成了剩下的部分，只剩下删除了。我正在运行删除命令，但数据并未从数据库中删除。实际上，我在控制器（delete_user）中创建了一个操作，其中包含用于从数据库中删除用户的代码。电子邮件值存储在会话中，我正在访问它；使用下一个控制器中的会话读取功能的值。

`function delete_user() { $email=$this->Session->read('User.email'); $this->User->delete($email, $cascade = true); echo $this->Session->delete('User.email'); echo $this->Session->delete('User.username'); $this->redirect(array('action' => 'login')); } );`

我正在主页（查看）页面中创建一个链接。就是这样。

```
a href='/cakephp/cakephp/Users/delete_user'>Delete Profile</a> 
```

我这样做是对还是错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:42:39.010

在提出此类问题之前，请先查看在线[文档。](http://book.cakephp.org/2.0/en/models/deleting-data.html)

### 2012 年 18 月 10 日更新

尝试使用 CakePhp 的魔法查找类型：

```
$user = $this->User->findByEmail("bob@gmail.com");
$this->User->delete($user['User']['id']); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T18:17:55.630

在您的控制器中，将以下代码替换为删除操作：

```
public function delete($id = null) {
    if (!$this->request->is('post')) {
        throw new MethodNotAllowedException();
    }
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->User->delete()) {
        $this->Session->setFlash(__('User deleted'));
        $this->redirect(array('action' => 'index'));
    }
    $this->Session->setFlash(__('User was not deleted'));
    $this->redirect(array('action' => 'index'));
} 
```

并在 ctp 文件中添加以下链接：

```
 <?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', ID OF THE RECORD, null, __('Are you sure you want to delete # %s?', ID OF THE RECORD)); ?> 
```

那么你的问题就解决了……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:47:56.573

您只需将 id 作为第一个参数传递：

```
$this->User->delete($id, $cascade); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T15:03:59.213

有了这个，你可以在没有级联的情况下删除它：

```
 $this->Todo->delete($this->request->data('Todo.id')); 
```

您可以使用

```
function beforeDelete(){

} 
```

这是我的完整删除操作：

```
function delete($id = null){

     $this->Todo->recursive = 1;

            // new
            $todo = $this->Todo->read(null,$id);
            if($id == null || $todo == null) {
                $this->Session->setFlash('Todo existiert nicht.');
                $this->redirect(array('action' => 'index'));
                return;
            }
            $this->set('todo',$todo);
            $this->Todo->delete($this->request->data('Todo.id'));
            $this->redirect(array('action' => 'index'));
            return;

} 
```

# bash - 模块中的总大小

> ID：12935820
> 
> 赞同：0
> 
> 时间：2012-10-17T13:46:38.753
> 
> 标签：bash, shell, unix, size

我正在尝试`libc.a`使用 unix`size`命令查找模块的总大小。

运行它时，我得到了很多不同的文件总大小。我可以采取一种可能的方式来获取“大小”输出的一列（`dec`在这种情况下，该列具有十进制文件的总大小）并将它们相加？

这可以在命令行中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:52:31.520

一种方法：

```
size libc.a | awk '{ print " " $4 " " }' | tail -n +2 | paste -sd'+' | xargs expr 
```

步骤：

1.  用于`size`生成输出
2.  用于`awk`打印插入空格之间的第四个字段
3.  用于`tail`从第二行打印（即跳过第一行）
4.  用于`paste`连接所有行，用 a 分隔`+`
5.  用于`xargs`将结果作为参数传递给`expr`.
    1.  用于`expr`将值相加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:01:02.410

假设您对 的实际文件大小不感兴趣`libc.a`，但想计算 的`dec`输出中列的总和`size`，这里是一个命令行：

```
size libc.a | tail -n +2 | cut -f 4 | tr -d '\n' | sed "s/^ *//;s/ *$//;s/  */+/g;s/$/\n/" | bc 
```

# javascript - 为什么将 var 与“文本”进行比较不起作用？

> ID：12935828
> 
> 赞同：1
> 
> 时间：2012-10-17T13:46:49.827
> 
> 标签：javascript, if-statement

我在 Javascript 中做了一个`if`and`else`声明，但我无法让它工作。

这是我的代码，我希望你们能看到什么是错的

```
var int = "";
function fbLoop (userLoop)
{
    int=setInterval(function(){fbCheckloop(userLoop)},1000);
}

function fbCheckloop(userCheck)
{
    if(userCheck.login != 'false')
    {
        window.clearInterval(int);
        console.log(userCheck);
        fbUpload(userCheck);
    }
    else
    {
        $.get("uploadtofb.php", {functie: "checklogin", fotonaam: userCheck.fotonaam}, fbCheckloop);
    }
} 
```

`if(userCheck.login != 'false')`不起作用 。显示这个
所以 根据控制台日志他必须做，但他做了陈述。 `console.log(userCheck);`
`{"login":"false","fotonaam":"NAME"}`
`else``if`

我做错了什么？ 来自这个

：`userCheck`

`return json_encode($checklog = array( 'login' => 'false', 'fotonaam' => $_GET['fotonaam'] ));`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:50:05.443

您确定这`userCheck`是一个 JavaScript 对象，而不是必须解析的 JSON 字符串吗？您当前的控制台日志结果让我怀疑它是。产生什么`console.log(typeof userCheck)`？

如果是，请使用

```
userCheck = JSON.parse(userCheck) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:48:23.433

如果`userCheck.login`具有布尔值`false`，请使用`if(userCheck.login != false)`.

周围不需要引号`false`。

# symfony - 使用 YAML 使用 Symfony2 配置 Translatable Doctrine2 扩展

> ID：12935829
> 
> 赞同：8
> 
> 时间：2012-10-17T13:46:51.333
> 
> 标签：symfony, doctrine-orm, translation

# 简而言之

我正在编写一个 Symfony2 / Doctrine2 应用程序，并使用 YAML 安装和配置了 StofDoctrineExtensionsBundle 提供的可翻译扩展，但是没有生成额外的翻译表，并且在尝试使用具有可翻译属性的实体时抛出以下异常：

> 没有找到名为“/var/www/my-project/vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity/Translation.orm.yml”的类“Gedmo\Translatable\Entity\Translation”的映射文件。

# 更详细

我试图让 Translatable 扩展在[StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst)提供的 Symfony2 / Doctrine2 应用程序中工作，但是我能找到的大多数可用文档主要针对配置注释的使用，但我将使用 YAML，因为那是我是如何配置其他一切的。

## 我的配置

我已将以下内容添加到我的`composer.json`文件中并运行了`composer update`命令：`"stof/doctrine-extensions-bundle": "dev-master"`并且捆绑包已在我的`app/AppKernel.php`文件中注册。

我的`app/config/config.yml`文件具有以下配置：

```
doctrine:
  orm:
    auto_generate_proxy_classes: %kernel.debug%
      auto_mapping: true        
      mappings:
        gedmo_translatable:
          type: yml
          prefix: Gedmo\Translatable\Entity
          dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity"
          alias: GedmoTranslatable
          is_bundle: false

stof_doctrine_extensions:
  default_locale: en_GB
  translation_fallback: true
  orm:
    default:
      timestampable: true
      translatable: true 
```

然后我在 YAML 中定义了一个实体：

```
Foo\ContentBundle\Entity\Article:
  type: entity
  repositoryClass: Foo\ContentBundle\Repository\ArticleRepository
  table: article
  gedmo:
    translation:
      locale: locale
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    name:
      type: string
      length: 64
      gedmo:
        - translatable
    content:
      type: text
      gedmo:
        - translatable
    # ... #
  oneToMany:
    # ... # 
```

然后我运行了控制台命令`php app/console doctrine:generate:entities FooContentBundle`来生成实体类，并手动添加了语言环境属性和设置器：

```
class Article
{
    /* ... */
    private $locale;

    public function setTranslatableLocale($locale)
    {
        $this->locale = $locale;
    }
    /* ... */
} 
```

运行后`php app/console doctrine:schema:update --force`，我的文章表与其关联一起创建，但与翻译无关（我假设应该为此创建一个表......）

然后，当使用可翻译的实体时，我遇到了异常：

> 没有找到名为“/var/www/my-project/vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity/Translation.orm.yml”的类“Gedmo\Translatable\Entity\Translation”的映射文件。

异常引用的 YAML 文件在它正在查找的路径中不存在，我也无法在其他任何地方找到它。

有人对我哪里出错有任何想法吗？

## 更新：经过进一步调查...

运行`php app/console doctrine:mapping:info`显示我的所有实体，没有任何与翻译相关的内容，但是，如果我更新文件的`gedmo_translatable:`一部分`app/config/config.yml`并更改`type: yml`为`type: annotation`然后再次运行命令，我会列出以下内容：

```
[OK]   Gedmo\Translatable\Entity\MappedSuperclass\AbstractTranslation
[OK]   Gedmo\Translatable\Entity\Translation
[OK]   Gedmo\Translatable\Entity\MappedSuperclass\AbstractPersonalTranslation 
```

此时，我可以更新我的架构，并且我有一个新`ext_translations`表。但是，在使用我的实体时，没有任何东西被插入其中，大概是因为它现在期望通过注释而不是 YAML 进行配置，将我的配置更改回`type: yml`开始再次抛出异常，正如预期的那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:50:19.830

在尝试了文档建议不起作用的事情之后，即将注释和 YAML 配置混合在同一个包中，看起来我有一些工作。整个事情感觉像是一个错误或一个不完整的实现，但是我可能做错了什么。这就是工作...

在 中设置以下内容`app/config/config.yml`：`doctrine.orm.mappings.gedmo_translatable.type: annotation`

如我的原始问题中所述，在我的 YAML 模式定义中设置可翻译配置，**以及**我的类文件中的注释：

```
/* ... */
use Gedmo\Mapping\Annotation as Gedmo;
/* ... */
class Article
{
    /* ... */

    /**
     * @Gedmo\Translatable
     * @var string $name
     */
    private $name;

    /**
     * @Gedmo\Locale
     */
    private $locale;

    public function setTranslatableLocale($locale)
    {
        $this->locale = $locale;
    }
    /* ... */
} 
```

完成此操作后，将创建附加表，并在持久化实体时将翻译插入其中。

# iphone - 我的应用文本的配置文件

> ID：12935832
> 
> 赞同：0
> 
> 时间：2012-10-17T13:46:56.517
> 
> 标签：iphone, objective-c, ios

我正在为 iOS 开发一个应用程序，我想将我的应用程序中的所有字符串都放在一个文件中，这样我就可以将它们本地化，以防万一我想快速更改它们并拥有与 android 相同的文本版本。我怎么能做到？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:52:05.977

您需要做的就是创建一个字符串本地化文件，然后将您想要本地化的所有字符串放入该文件中。然后，您可以为每种其他语言创建额外的字符串本地化文件。

这是一个很好的链接，展示了如何创建实现字符串文件。 [http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

基本上，而不是调用类似的东西

```
label.text = @"Enter password"; 
```

你做

```
label.text = NSLocalizedString(@"ENTER PASSWORD", nil); 
```

你是这个例子中的字符串文件看起来像

```
"ENTER PASSWORD" = "Enter password"; 
```

# c# - 在 Graphsharp 中向边缘添加自定义样式

> ID：12935835
> 
> 赞同：7
> 
> 时间：2012-10-17T13:47:06.207
> 
> 标签：c#, wpf, xaml, graph-sharp

我正在使用文档很少的 GraphSharp 框架 (http://graphsharp.codeplex.com/)，并且我正在尝试更改某些边缘的颜色。

实际上是这样的（使这个边缘变红）。

```
g.AddEdge(new Edge<object>("A","B"), Color.Red); 
```

有没有人有任何代码片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T21:40:21.100

here is the solution. You should create a custom edge type, and store the color information in the edge object itself, or be able to create a converter that can calculate the color from the edge object.

Also, you should customize the `EdgeControl` with some `Style`.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using GraphSharp;
using QuickGraph;
using GraphSharp.Controls;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public IBidirectionalGraph<object, IEdge<object>> Graph { get; set; }

        public MainWindow()
        {
            var g = new BidirectionalGraph<object, IEdge<object>>();

            IList<Object> vertices = new List<Object>();
            for (int i = 0; i < 6; i++)
            {
                vertices.Add(i.ToString() );
            }

            for (int i = 0; i < 5; i++)
            {
                Color edgeColor = (i % 2 == 0) ? Colors.Black : Colors.Red;
                Console.WriteLine(edgeColor);

                g.AddVerticesAndEdge(new MyEdge(vertices[i], vertices[i+1]) { 
                    Id = i.ToString(),
                    EdgeColor = edgeColor
                });
            }

            Graph = g;

            Console.WriteLine(Graph.VertexCount);
            Console.WriteLine(Graph.EdgeCount);

            InitializeComponent();
        }
    }

    public class MyEdge : TypedEdge<Object>
    {
        public String Id { get; set; }

        public Color EdgeColor { get; set; }

        public MyEdge(Object source, Object target) : base(source, target, EdgeTypes.General) { }
    }

    public class EdgeColorConverter : IValueConverter
    {

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return new SolidColorBrush((Color) value);
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

XAML:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:graphsharp="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
        xmlns:my="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525"
        Name="root">
    <Grid>
        <Grid.Resources>
            <my:EdgeColorConverter x:Key="edgeToEdgeColorConverter"/>
            <Style TargetType="{x:Type graphsharp:EdgeControl}">
                <Style.Setters>
                    <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource Self},Path=Edge.EdgeColor,Converter={StaticResource edgeToEdgeColorConverter}}"/>
                </Style.Setters>
            </Style>
        </Grid.Resources>

        <graphsharp:GraphLayout x:Name="graphLayout" 
                                Graph="{Binding ElementName=root,Path=Graph}" 
                                OverlapRemovalAlgorithmType="FSA"
                                HighlightAlgorithmType="Simple"
                                LayoutAlgorithmType="FR"/>
    </Grid>
</Window> 
```

# documentation - 记录 Scrum 项目的一些有效方法？

> ID：12935838
> 
> 赞同：0
> 
> 时间：2012-10-17T13:47:12.523
> 
> 标签：documentation, scrum

这听起来很奇怪，但这就是我所需要的。一种记录 Scrum 项目的有效方法。

我同意制作用户故事和需求文档是浪费时间。

但有时我们需要了解软件当前的工作方式。

你是怎样做的？你知道这方面的一些最佳实践或案例场景吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:44:08.927

简短的回答是这样的：你可以写任何你想要或需要的关于任何项目、Scrum 或其他的东西。Scrum 不会告诉你如何记录，但也不会告诉你不要这样做。你记录的方式本身与 Scrum 无关。

也就是说，如果您需要了解该软件当前的工作原理，文档将无济于事。文档经常说谎。如果您试图了解该系统是如何工作的，那么一份文档只会告诉您人们认为或想要相信的事实。

您应该考虑的是使用**[可执行规范](http://specificationbyexample.com/key_ideas.html)**和测试驱动开发来**证明**您认为该软件所做的事情实际上是真实的。自动化测试将文档、示例和回归测试合二为一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:11:07.913

There are several kinds of documentation that can help you. It depends on your context which ones you need, and at what detail level. You could also use a tool such as [MOOSE](http://www.moosetechnology.org) to create project specific visualizations of your software at all levels. Some simple documents are:

*   [A story map](http://www.agileproductdesign.com/blog/the_new_backlog.html)
*   [Gherkin](https://github.com/cucumber/cucumber/wiki/Gherkin) style high-level features and scenarios

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:23:21.080

如果您已通过完成跟踪您的产品待办事项项目，包括每个项目的验收标准，您应该能够将已完成的产品待办事项项目列表作为文档指向。您编写的所有内容都应该与 PBI 相关联，因此完成的 PBI 会记录您的项目。

# php - 尽早刷新 HTML 文档 - 使用 ini_set('zlib.output_compression','ON')？

> ID：12935840
> 
> 赞同：2
> 
> 时间：2012-10-17T13:47:13.763
> 
> 标签：php, html, document, zlib, flush

我的目标是在我的 php 脚本将页面的其余部分拼接在一起并在完成后发送它时，尽早刷新我网站的标题部分。重要的是块被压缩发送到浏览器。（我正在使用 Apache/2.2 和 PHP/5.3.4）

现在我正试图通过在我的 PHP 脚本中调用 ini_set("zlib.output_compression", "On") 来实现这一点。但是，如果我在脚本中的任何地方使用 flush()，即使在最后，压缩也将不再起作用。

问题是：

a) 通过使用此方法，zlib 将刷新输出缓冲区并将压缩块发送到浏览器，一旦达到此输出缓冲区的大小？

*b）如果是这样，有没有*办法通过设置zlib的内部缓冲区大小来精细控制zlip何时发送我的块？默认为 4KB。

c) 是否有任何好的替代方案可以实现早期压缩冲洗，可能对我想要冲洗它的时间进行更精细的控制？也许我完全走错了路:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:30:48.813

自从我不得不在 OB 上使用 zlib 压缩以来已经很久了（稍后会详细说明原因）。但是，让我尝试说服您在 PHP 中关闭 OB 上的 zlib 压缩。首先，有一点背景，以确保我们在同一页面上。

OB是如何工作的

每次 php 打印一些东西，如果没有 OB，它将直接发送到 apache 并从 apache 发送到浏览器。相反，使用 OB，输出在 apache 处停止并等待数据刷新（到浏览器）或脚本结束并自动刷新数据。通过将 Apache 缓冲到进程的 Web 浏览器阶段来生成页面时，这可以节省大量时间和资源。

为什么不在 PHP 中使用 OB 压缩

为什么要让 PHP 压缩它？执行此类任务（以及压缩 js 文件）应该是服务器的工作。为了彻底释放 apache 来处理 php，您“应该”做的是将 NGINX 安装为公众面前。设置为反向代理非常容易，您甚至可以将其安装在与 php 和 apache 相同的服务器上。

所以将 NGINX 设置在 80 端口上，将 apache 设置在 8080 上（并且只允许 nginx 连接，但如果您将其公开一段时间，请不要担心，因为它已经公开并且非常适合调试绕过 nginx，所以没有安全问题应该上升-但我建议您不要将其公开太久）。然后使 nginx 反向代理到 apache，缓存所有从 apache 卸载的静态文件（因为 nginx 代替它们服务）意味着 apache 可以执行更多 php 请求，并让 nginx 执行 OUTPUT COMPRESSION ;) 释放 apache 和 php 甚至更多的请求。作为一个额外的好处，nginx 还可以比 Apache 更快地提供静态文件，并且 Nginx 也使用更少的内存并且可以处理更多的连接。

即使是 nginx 新手也可以在在线阅读一些教程并在 1 天内完成我刚才说的所有内容后进行 nginx 设置。1 天也度过了愉快的时光。

但是请记住将 PHP 到 Apache 的输出缓冲保持打开，但在 PHP 上关闭 zlib 压缩并在 nginx 上启用它。

# vba - 使用 VBA 从 LDAP 获取 organizationUnit

> ID：12935841
> 
> 赞同：0
> 
> 时间：2012-10-17T13:47:14.187
> 
> 标签：vba, ms-access, active-directory, ldap

我正在使用 Access 2003，并且已经有一个从 LDAP 中提取大量数据的代码。这是我得到的：

```
Set rootDSE = GetObject("LDAP://RootDSE")
domainContainer = rootDSE.Get("defaultNamingContext")

conn.provider = "ADSDSOObject"
conn.Open "ADs Provider"

ldapStr = "<LDAP://" & domainContainer & ">;(& (mailnickname=" & nickname & ") (| (&(objectCategory=person)(objectClass=user)(!(homeMDB=*))(!(msExchHomeServerName=*)))(&(objectCategory=person)(objectClass=user)(|(homeMDB=*)(msExchHomeServerName=*))) ));adspath;subtree"
exchangeRS.Open ldapStr, conn, adOpenStatic, adLockReadOnly
exchangeRS.MoveFirst

Do Until exchangeRS.EOF
    Set oUser = GetObject(exchangeRS.fields(0).value)

    ' The properties below are working
    'oUser.firstName
    'oUser.displayName
    'oUser.title
    'oUser.telephoneNumber
    'oUser.mobile
    'oUser.faxNumber
    'oUser.streetAddress
    'oUser.l
    'oUser.postalCode
    'oUser.mail
Next 
```

我能够为 LDAP 数据库中的每个人获取大量信息。但是，我也想得到*结构单元*。但是，`oUser.organizationUnit`不退出，`oUser.OU`只包含顶部单元，这不是我想要的。

有没有办法列出 oUser 的所有属性以找到正确的？是不是`ldapStr`缺少了什么？

这是我想要得到的图像（对不起，它是法语）：

![单元](../Images/7f745bc3a190449dc8a97bc065f5aefc.png)

这有可能没有存储在 LDAP 中吗？如果没有，有什么方法可以从 Outlook 通讯录中获取？但实际上我真的更喜欢从 LDAP 获取它，因为其他所有信息实际上都在那里（这让我相信这也应该在那里）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:55:43.413

查看 distinctName 属性。这是一个包含 OU 的相对专有名称 (RDN) 序列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-31T13:34:36.083

这是我发现找出哪些数据在哪些字段中的最佳方法。将架构转储为文本，然后将该文本加载回 Excel，只需少量连接操作即可制作输出行，然后将其反馈给 VBA 以转储 AD 中的所有数据，以便您查看哪些信息存储在何处.

第 1 步：获取架构字段

```
Function SchemaToText()
    Set objSysInfo = CreateObject("ADSystemInfo")
    Set objUser = GetObject("LDAP://" & objSysInfo.userName)
    Set objSchema = GetObject("LDAP://schema/user")
    OutFile = Application.DefaultFilePath & "\schemalist.txt"
    Debug.Print "Exporting to " & Application.DefaultFilePath & "\schemalist.txt"
    Open OutFile For Output As #1
    For Each strAttribute In objSchema.MandatoryProperties
        Write #1, strAttribute
    Next
    For Each strAttribute In objSchema.OptionalProperties
        Write #1, strAttribute
    Next
    Close #1
End Function 
```

第 2 步：您的所有字段周围都会有双引号，因此我们需要删除它们。在记事本（或您选择的其他文本编辑器）中打开 schemalist.txt，然后使用替换功能查找所有双引号并将其删除

第 3 步：将 schemalist.txt 加载到 Excel 中的新电子表格中（为了本教程，我们假设它已放入单元格 A1）

第 4 步：构建用于转储字段值的写入命令 - 在单元格 B1 中，输入以下内容：

```
=Concatenate("Write #1, ","""",".",A1,"|",""""," & .",A1) 
```

你现在应该有这样的东西：`Write #1, ".cn|" & .cn`. 现在您只需要为整个模式列表填写该连接公式。

第 5 步：将写入列表粘贴到以下公式中：

```
Function UserSchemaDump()
    Set objSysInfo = CreateObject("ADSystemInfo")
    Set objUser = GetObject("LDAP://" & objSysInfo.userName)
    OutFile = Application.DefaultFilePath & "\schemadump.txt"
    Debug.Print "Exporting to " & Application.DefaultFilePath & "\schemadump.txt"
    Open OutFile For Output As #1
    With objUser
        'paste all of the write lines here
        Write #1, ".cn|" & .cn
        Write ...
        Write #1, ".x500uniqueIdentifier|" & .x500uniqueIdentifier
    End With
    Close #1
    Debug.Print "Export complete"
End Function 
```

第 6 步：将 schemadump.txt 加载回 Excel，使用文本到列拆分`|`，然后格式化为没有标题的表格并对第 2 列进行排序，以查看正在使用的字段以及每个字段中放置的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T00:57:35.770

我所有测试的结果表明，这些数据没有存储在 LDAP 中。

# extjs4.1 - 如何在 extjs 中使用 zIndex

> ID：12935846
> 
> 赞同：2
> 
> 时间：2012-10-17T13:47:43.540
> 
> 标签：extjs4.1

```
Ext.onReady(function(){ 
    Ext.create('Ext.panel.Panel',{
    title:'MAin Panel',
    renderTo:Ext.getBody(),
    height:600,
    width:600,
     bodyStyle: {
            background: 'yellow',
            position:'absolute ',
            'z-index': -1
        },
        items:[
               {
                 xtype:  Ext.create('Ext.window.Window',{
                        height : 500,
                        width : 500,
                        id:'abc',
                        items : [
                                    {
                                        xtype : 'button',
                                        text : 'Open',
                                        handler : function(){
                                            /* w2.showAt(450,300);
                                            w1.disable(); */
                                        }
                                    },
                                    {
                                        xtype:'panel',
                                        title:'Inner Panel',
                                        height:200,
                                        width:200,
                                        style:{
                                             position:'absolute ',
                                            'z-index': 2
                                        }
                                    }
                                 ],
                         bodyStyle:{
                              background: '#000000',
                              opacity: 0.7,

                         },
                 style:{
                     position:'absolute',
                     'z-index': 1

                 }
                    })

               }

               ]

});
Ext.getCmp('abc').show();
w1.setTitle('Window 1');
w1.show();
}); 
```

我有上面的代码，我希望“内面板”应该出现在窗口“abc”上，并且不透明度属性不应该应用于“内面板”。窗口“abc”的子组件也得到了 opcaity。我已经尝试过样式：{ position:'absolute', 'z-index': 1}，相同的代码在 html 中工作，但在 extjs 中没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:32:46.470

我建议你使用[**ZIndexManager**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ZIndexManager)。

首先，注册所有容器，然后使用`bringToFront`方法显示您想要的容器。

# cognos - 如何将交叉表角拆分为与其下方列匹配的单元格？

> ID：12935849
> 
> 赞同：1
> 
> 时间：2012-10-17T13:47:52.380
> 
> 标签：cognos, cognos-8

在 Cognos 8 中重新创建 Cognos 7 报告时，我注意到旧报告做了我的报告无法做到的事情（我能说的最好）。该报表有一个交叉表角，它拆分为与交叉表的多列“行”部分匹配的单元格。我尝试在 Cognos 8 中重新创建它，但无济于事。

我不能使用`Structure > Headers and Footers > split list row cell`菜单选项；这基本上是我想要的，但仅适用于页眉/页脚，我猜这不算。我最接近的是使用交叉表角内的表格“：

![在此处输入图像描述](../Images/910657101d1c8b959dbdd2601b819824.png)

然而，这不会导致角的单元格与其下方的单元格匹配。而且由于交叉表的“行”部分中的内容是动态长度的，因此我无法手动使用边距/填充来对齐此标题。

如何将交叉表角拆分为与其下方列匹配的单元格，就像使用页眉/页脚一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:18:20.673

在与 Cognos 8 顾问交谈后，**您无法在 Cognos 8 中执行此操作**。Cognos 7 报告只能做到这一点，因为 Cognos 7 做交叉表的方式发生了变化。所以最好的选择是像我一样做，用单元格制作一个表格并添加一些填充以尝试使“标题”与下面的单元格大致匹配。我建议在单元格的左侧/右侧使用边框来清楚地显示标题的分隔。

# c# - 在此文件夹内创建文件之前确保文件夹存在

> ID：12935851
> 
> 赞同：-3
> 
> 时间：2012-10-17T13:47:56.647
> 
> 标签：c#

> **可能重复：**
> [C#检查目录中是否存在文件夹并创建它们](https://stackoverflow.com/questions/9092160/c-sharp-check-if-folder-exist-in-directory-and-create-them)

我有创建文件并需要将它们放在特定文件夹中的应用程序，检查文件夹是否存在以及不创建文件夹的最佳解决方案是什么？（我是新开发者）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:50:37.943

[Directory.Exists 方法](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)。这是给您的示例代码。

```
string path = @"C:\MyFolder";
if(!Directory.Exists(path))
{
Directory.CreateDirectory(path);
} 
```

此方法在`System.IO`命名空间中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:54:41.037

只需调用

```
Directory.CreateDirectory(path); 
```

它将检查目录是否存在，如果存在，它什么也不做。因此，`Directory.Exists()`根本不需要事先检查。

另请参阅[此答案](https://stackoverflow.com/a/9092195/57488)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:49:52.020

尝试这个

```
if(System.IO.Directory.Exists("c:\\temp"))
{
   //Folder exists
}
else
{
    //Folder does not exist
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:49:48.333

查看`Directory.Exists()`方法。[MSDN 文档在这里](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)

```
string path = "c:\\MyDirectory";

if (!Directory.Exists( path )) {
    DirectoryInfo di = Directory.CreateDirectory(path);
} 
```

# java - 在 spring mvc 应用程序中引用文件系统的最佳方法

> ID：12935852
> 
> 赞同：0
> 
> 时间：2012-10-17T13:47:56.977
> 
> 标签：java, spring-mvc

在 spring mvc 应用程序中，引用文件系统的最佳方法是什么？

假设我想知道我的应用程序路径的根？

我应该创建一个属性文件并在属性文件中硬编码这个值，然后为生产和开发环境创建不同的版本吗？

我可能还想在我的应用程序之外引用一个文件，所以我猜一个属性文件最适合这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:56:36.720

我将您的问题理解为配置/发布问题，而不是编码问题。如果你想访问文件（比如使用绝对路径），有不同的方法来实现它：

*   如果您使用 Maven 构建您的应用程序。创建具有相应属性的**maven 配置文件**`file.path`，例如并在构建时将属性填充到 spring bean（例如字符串）

*   创建不同的**属性文件**，其中包含不同环境的配置参数。并让maven填充spring conf中的占位符，应该使用哪个属性文件。

*   使用**弹簧型材**。将与服务器相关的 bean 放入配置文件中，您的应用程序在运行时选择正确的配置文件（bean 集）。

*   好吧，如果您为不同的环境使用不同的**数据库**，您可以考虑将一些配置参数保存在配置表中。应用程序在启动时或需要时加载这些数据。至少这是另一种选择。

这回答了你的问题吗？还是我只是在说别的？...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:54:47.473

获取真实路径并完成剩余动作

```
String realContextPath =  session.getServletContext().context.getRealPath(request.getContextPath()); 
```

# c# - 如何使用 IIS 实现轻量级 http 服务器

> ID：12935857
> 
> 赞同：1
> 
> 时间：2012-10-17T13:48:12.963
> 
> 标签：c#, .net

我想创建一个简单的 http 服务器，它只返回一个文本，但我需要使用 IIS。例如，一个人访问我的服务器的链接（http://anyUrl/abcdef），我的服务器返回一个新的 url，就像一个更短的 url。所以它必须非常快。我不想创建 webforms 项目或 MVC，我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T13:53:33.433

我相信最轻量级的实现方式是创建一个 ASP.NET HTTP 处理程序。[http://support.microsoft.com/kb/308001](http://support.microsoft.com/kb/308001)有一个简短的教程

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T13:54:00.200

你需要一个自定义的 HttpHandler，这种事情有据可查，例如

[http://support.microsoft.com/kb/308001](http://support.microsoft.com/kb/308001)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T13:54:47.713

也许您可以创建一个空的 ASP.Net 应用程序项目并添加一个通用处理程序 (.ashx)。

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Write("your stuff");
    } 
```

# javascript - 发布操作：error.code 等于 3501 时，错误消息中不再有 ID

> ID：12935860
> 
> 赞同：1
> 
> 时间：2012-10-17T13:48:22.937
> 
> 标签：javascript, facebook, facebook-graph-api

直到今天，当我的应用程序尝试为已经完成此操作的用户发布操作/对象时，在 response.error.message 中，我们能够检索相关的现有操作的 ID。今天，此信息已从消息中删除：(#3501) 用户已与唯一操作类型读取的对象相关联。ID: xxxxxxxxx 变为 (#3501) 用户已在唯一操作类型读取上与对象相关联。

所以这是我的问题：如何检索特定网址的操作 ID。我试过这个（在这个论坛的帖子之后），但它不起作用，因为它返回一组数据（我不想在找到我正在寻找的页面之前浏览所有页面）

```
FB.api(
    '/me/news.reads?article=myURL',
    'get',
    function(response) {
        if (!response || response.error) {
            alert('Error: ' + response.error.type + ' - ' + response.error.message);
            console.log(response);
        } else {
            console.log(response);
        }
    }); 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:08:23.470

好的，看来响应现在又回到了旧的方式，我又收到了 ID ...

为方便起见，抱歉，但如果有一种方法可以根据 url 检索操作 id，那会更容易。

# java - 背包 - 最低优先级，最小重量

> ID：12935861
> 
> 赞同：3
> 
> 时间：2012-10-17T13:48:26.590
> 
> 标签：java, knapsack-problem

我必须实现背包问题的以下变体。背包的每个物品都有优先级和重量。现在我指定一个权重 X。我必须知道计算权重总和至少为 X 且优先级最低的最小项目集。每个项目只能选择一次。例子：

```
 KnapsackItem a = new KnapsackItem("a", 1000, 0.1);
    KnapsackItem b = new KnapsackItem("b", 1000, 0.01);
    KnapsackItem c = new KnapsackItem("c", 1000, 0.01);

    Knapsack sack = new Knapsack(1900);
    sack.addItem(a);
    sack.addItem(b);
    sack.addItem(c);

    for (KnapsackItem item : sack.compute()) {
        System.out.println(item);
    } 
```

这应该返回 b,c。

我的解决方案返回 b，a。我不知道为什么。花了几个小时调试，但我就是不明白。也许有人可以查看或发布此问题变体的解决方案作为代码。

```
public class Knapsack {
/**
 * The sum of the priorities. For example "prisoSum.get(2) returns 5" means,
 * that element 2 returns a sum priority of 5.
 */
private HashMap<Integer, Double> prioSum = new HashMap<Integer, Double>();

/**
 * List of items.
 */
private ArrayList<KnapsackItem> items;

/**
 * Minimum weight. The sum of the weights of the items in the item list must
 * at least be equal to this value.
 */
private int minWeight;

/**
 * Constructor.
 *
 * @param minWeight
 *            the minimum weight.
 */
public Knapsack(final int minWeight) {
    this.items = new ArrayList<KnapsackItem>();
    this.minWeight = minWeight;
}

/**
 * Computes the items to select.
 *
 * @return list of items to select.
 */
public final ArrayList<KnapsackItem> compute() {
    ArrayList<KnapsackItem> ret = new ArrayList<KnapsackItem>();
    int weightLeft = this.minWeight;
    KnapsackItem item;

    while (weightLeft > 0) {
        ArrayList<KnapsackItem> diff = getDifference(this.items, ret);
        if (diff.size() == 0) {
            break;
        }

        item = computeBestItemForMinVal(diff,
                weightLeft);

        ret.add(item);
        weightLeft -= item.getWeight();
    }

    return ret;
}

/**
 * Gets the best item to select for a given weight.
 *
 * @param list
 *            List of items to select form
 * @param minVal
 *            given weight
 * @return best item from list for given weight
 */
private KnapsackItem computeBestItemForMinVal(
        final ArrayList<KnapsackItem> list, final int minVal) {
    int[] best = new int[minVal + 1];
    for (int w = 0; w <= minVal; w++) {
        for (int i = 0; i < list.size(); i++) {
            KnapsackItem curIt = list.get(i);

            // Current priority inclusive all antecessors
            double curVal = 0;
            if (prioSum.get(w - curIt.getWeight()) != null) {
                curVal = prioSum.get(w - curIt.getWeight())
                        + curIt.getPriority();
            } else {
                curVal = 0 + curIt.getPriority();
            }
            if (prioSum.get(w) == null) {
                prioSum.put(w, curVal);
                best[w] = i;
            } else if (prioSum.get(w) > curVal) {
                prioSum.put(w, curVal);
                best[w] = i;
            }
        }
    }
    return list.get(best[minVal]);
}

/**
 * Computes the difference between two given list of Knapsack items and
 * returns it.
 *
 * @param main
 *            first list
 * @param sub
 *            second list
 * @return difference
 */
private ArrayList<KnapsackItem> getDifference(
        final ArrayList<KnapsackItem> main,
        final ArrayList<KnapsackItem> sub) {
    ArrayList<KnapsackItem> ret = new ArrayList<KnapsackItem>();

    for (int m = 0; m < main.size(); m++) {

        boolean found = false;
        for (int s = 0; s < sub.size(); s++) {
            if (main.get(m).getName() == sub.get(s).getName()) {
                found = true;
                break;
            }
        }

        if (!found) {
            ret.add(main.get(m));
        }
    }

    return ret;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:35:36.617

我发现了我的错误。我必须添加 `prioSum.clear();` 到 computeBestItemForMinVal()。所以之前调用的数据被删除了。我现在也从 1 开始 for 循环，而不是 0：

```
private KnapsackItem computeBestItemForMinVal(
        final ArrayList<KnapsackItem> list, final int minVal) {
    int[] best = new int[minVal + 1];
    prioSum.clear();
    for (int w = 1; w <= minVal; w++) {
... 
```

# symfony - Symfony2 + Doctrine：从不是默认的特定数据库创建实体

> ID：12935866
> 
> 赞同：1
> 
> 时间：2012-10-17T13:48:50.620
> 
> 标签：symfony, doctrine-orm, entity, symfony-2.1

[Symfony2 Cookbook](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)提供了有关如何从现有模式创建实体的信息，但我无法找到从另一个不是默认的名为“legacy”（参见下面的 config.yml）的数据库导入的方法。

运行以下命令仅从默认数据库创建 YAML 文件

```
$ php app/console doctrine:mapping:convert yml ./src/Soapbox/DashboardBundle/Resources/config/doctrine/metadata/orm --from-database --force 
```

如果我不提供任何论据，我会收到建议，但不确定哪些是适用的。

```
doctrine:mapping:convert [--filter="..."] [--force] [--from-database] [--extend[="..."]] [--num-spaces[="..."]] [--namespace[="..."]] [--em[="..."]] to-type dest-path 
```

**应用程序/配置/config.yml**

```
# Doctrine Configuration
doctrine:
    dbal:
        default_connection:   default
        connections:
            default:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
            legacy:
                driver:   pdo_mysql
                host:     my.host
                port:     null
                dbname:   magazines
                user:     soapbox
                password: XXXXX
                charset:  UTF8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:16:44.187

如果我想清楚我可能不是，你有两个 EntityManager，默认和旧。

因此，您可以使用标志 --em "legacy" 让它从该特定数据库导入。

# php - PHP DateTime 对象 - 时间戳和时区冲突

> ID：12935867
> 
> 赞同：8
> 
> 时间：2012-10-17T13:48:51.620
> 
> 标签：php, datetime, timezone, unix-timestamp

从 DateTime 对象中，我对获取不同时区的时间感兴趣。正如[DateTime::setTimezone](http://www.php.net/manual/en/datetime.settimezone.php)文档中所解释的，当从字符串创建 DateTime 对象时，这非常有效：

```
$date = new DateTime('2000-01-01', new DateTimeZone('Pacific/Nauru'));
echo $date->format('Y-m-d H:i:sP') . "\n";

$date->setTimezone(new DateTimeZone('Pacific/Chatham'));
echo $date->format('Y-m-d H:i:sP') . "\n";

$date->setTimezone(new DateTimeZone('UTC'));
echo $date->format('Y-m-d H:i:sP') . "\n";

echo $date->getTimestamp() . "\n"; 
```

以上示例将输出：
2000-01-01 00:00:00+12:00
2000-01-01 01:45:00+13:45
1999-12-31 12:00:00+00:00
946641600

现在是有趣的部分：如果我们拿起我们的时间戳，并按照手动说明使用它启动我们的 DateTime 对象。

```
$date2 = new DateTime('@946641600');

$date2->setTimezone(new DateTimeZone('Pacific/Nauru'));
echo $date2->format('Y-m-d H:i:sP') . "\n";

$date2->setTimezone(new DateTimeZone('Pacific/Chatham'));
echo $date2->format('Y-m-d H:i:sP') . "\n";

$date2->setTimezone(new DateTimeZone('UTC'));
echo $date2->format('Y-m-d H:i:sP') . "\n";

echo $date2->getTimestamp() . "\n"; 
```

在这里我们得到： // [edit] 嗯...对不起，这个输出是错误的...
1999-12-31 12:00:00+00:00
1999-12-31 12:00:00+00： 00
1999-12-31 12:00:00+00:00
946641600

UTC 永远！！！我们不能再更改时区了！？！

是 PHP 还是我？版本 5.3.15

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T15:17:31.303

好吧，所以我自己生气了。当然，我是错的……为了直截了当，我将在[此处](http://www.php.net/manual/en/datetime.construct.php)和[此处](http://www.php.net/manual/en/datetime.settimezone.php)
的文档中挑选相关的内容。 手册说：

```
// Using a UNIX timestamp.  Notice the result is in the UTC time zone.
$date = new DateTime('@946684800');
echo $date->format('Y-m-d H:i:sP') . "\n"; 
```

因此，确实，您可以使用 setTimezone 在您的时区中再次获取时间（如果您的系统是这样设置的，这是可以预期的！）：

```
$timezone = new DateTimeZone('Europe/Madrid');
$date->setTimezone(new DateTimeZone('Pacific/Chatham')); 
```

注意

```
$date =  new DateTime('@1306123200', new DateTimeZone('Europe/Madrid')); 
```

具有误导性，因为无论如何您都会在UTC！（是的，在构造函数的文档中非常清楚地指定了它。所以要小心；）

谢谢@hakre 谢谢大家！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T14:23:18.627

这只是你。就 PHP 而言，一切都很好，花花公子，PHP 手册很好地涵盖了这一点：[http ://www.php.net/manual/en/datetime.construct.php](http://www.php.net/manual/en/datetime.construct.php)

# iphone - 我可以在新的 3.0 旁边导入旧的 Facebook SDK

> ID：12935868
> 
> 赞同：0
> 
> 时间：2012-10-17T13:48:53.337
> 
> 标签：iphone, objective-c, ios

我需要为新的 Facebook SDK 3.0 和已弃用的同一类中的一些功能，如下所示：

```
#import <FacebookSDK/FacebookSDK.h>
#import "Facebook.h" 
```

但是在同一个班级中导入这些一起时我遇到了一些问题。

我 80% 的代码都在使用新的 SDK 3.0 我只是将旧的用于发帖和好友请求，但我不能在同一个课程中同时使用它们。

那么有什么方法可以同时使用它们`ViewController`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:50:02.733

不，您不能直接这样做，您的项目中不能有两个同名的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:22:33.303

I solve it,,,

Instead of import all the library like this :

```
#import <FacebookSDK/FacebookSDK.h> 
```

I Just import the only I need beside the old Facebook SDK like this :

```
#import "FBSession.h"
#import "FBProfilePictureView.h"
#import "FBRequestConnection.h"
#import "FBLoginView.h"
#import "Facebook.h" 
```

And its working now :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:28:02.793

FacebookSDK.framework 文件夹中有符号链接，实际上这个文件夹看起来像这样

```
FacebookSDK -> ./Versions/A/FacebookSDK
Headers -> ./Versions/A/Headers
Resources -> ./Versions/A/Resources 
```

所以当前版本是 /Versions/A/Headers ，旧版本是 /Versions/A/DeprecatedHeaders ，你喊找到混合或制作“FacebookSDK_old.framework”的方法，例如，里面应该是

```
Headers -> ./Versions/A/DeprecatedHeaders 
```

# jquery - 签名板在 IE7 中不起作用

> ID：12935872
> 
> 赞同：3
> 
> 时间：2012-10-17T13:49:01.937
> 
> 标签：jquery, html, internet-explorer, digital-signature

我有以下签名板。

```
 <form method=post action="#" class=sigPad>        
               <label for=name>Print your name</label>        
               <input type=text name=name id=name class=name>        
               <p class="drawItDesc">Draw your signature</p>        
               <div class="sig sigWrapper"> <div class=typed></div>        
               <canvas class=pad width="585px" height="200px"></canvas>        
               <input type=hidden name=output class=output> </div>        
               <button type="submit" id="agree" style="opacity:0.2">I accept the terms of this agreement.</button>        
      </form> 
```

这是需要时调用的函数。

```
 function drawSigPad(){
         $('.sigPad').signaturePad({drawOnly:true});
            } 
```

当用户按下按钮时，会发生什么情况会绘制签名板。这在 Chrome 和 FF 中运行良好，但在 IE 不兼容模式下会中断。只要不打开非兼容性，它就可以工作。

我得到的错误如下。

```
 SCRIPT5007: Unable to get value of the property 'getContext': object is null or undefined 
          jquery.signaturepad.min.js, line 246 character 1 
```

有问题的行是这个

```
 i.bind("selectstart.signaturepad",function(a){
return c(a.target).is(":input")
}); 
```

任何人都知道为什么IE7会打破这个？或者解决这个问题的方法。

编辑：对不起，我正在使用 IE9 浏览器并使用非兼容模式以及使用浏览器工具检查 IE7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:53:12.560

IE7 不支持`canvas`标签。它仅在 IE8+ 中支持。

[这](http://code.google.com/p/explorercanvas/)是获取画布标签和任何其他 html5 标签的绝妙方法，可在 IE7 和 8 中使用。

它被称为 explorercanvas，它模拟画布，允许几乎任何浏览器显示您的 sig pad。

最好的是，您需要做的就是添加一个`<script>`标签。

# javascript - Javascript - 在对象中动态添加值

> ID：12935873
> 
> 赞同：1
> 
> 时间：2012-10-17T13:49:08.057
> 
> 标签：javascript

我在 Javascript 中有以下代码

```
var data = {
                    itemFromIndex :  status.next,
                    requestId :      status.requestId,
                    loggedInAdminId: self.loggedInAdminId,
                    fetchedAllTerms : status.fetchedAllTerms
       } 
```

以后如何将另一个项目添加到数据对象中？就像我想添加

```
dbTermsFetchToIndex : status.dbTermsFetchToIndex 
```

成数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T13:50:29.900

首先，这不是一个数组，它是一个对象字面量。其次，是的，您可以：

```
data.dbTermsFetchToIndex = status.dbTermsFetchToIndex; 
```

将具有与您首先在对象文字中声明它相同的效果。

# encoding - BCD16 是什么意思

> ID：12935875
> 
> 赞同：1
> 
> 时间：2012-10-17T13:49:16.130
> 
> 标签：encoding, bcd

我正在编写一个 Ama 文件生成模拟器。在 Ama 规范中，它给出了 BCD16、BCD12 等（BCD{a number}）字段的字节数（不是比特数）。

对于具有 BCD16 的字段，实际长度为 8 个字节。谁能告诉我BCD16是什么意思？我知道 BCD 是二进制编码的十进制，但不明白 BCD16 是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:51:14.330

它看起来像一个 2 字节（16 位）的 BCD 编码。见[这里](http://www.fsdeveloper.com/wiki/index.php?title=Variables_-_Formats_-_Encoding_-_Binary#BCD16_-_2_BYTES)。

> 这是 2 个字节，可以存储一个 4 位 BDC16 编码的数字，每个半字节存储一个 BCD 数字（又名半字节）。
> 
> 示例 - 0011-0110 0010-0101 是 3-6 2-5，即 3x100 + 6x10 + 2x1 + 5x0.1 = 362.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:12:59.390

我想在与一位前辈交谈后，我找到了一个定义。

BCD{x} 表示，对于单个数字，它需要 x 位。这样，如果是 BCD3，则需要三个位来表示一个数字。当然，我们不能代表每个组合。但是我们可以代表一些非常大的值。

例如：在 BCD1 中，我们可以使用一个字节来表示 - 11111111。

这就是我发现的。如果定义有问题，请纠正我。

# c - 使用Pro*C编程时如何知道SQL是否执行成功？

> ID：12935876
> 
> 赞同：2
> 
> 时间：2012-10-17T13:49:18.857
> 
> 标签：c, oracle, oracle-pro-c

我最近使用 Pro*C 编程访问 Oracle 数据库，如下所示：

```
cmd[128];
dpc_set_sqlca(&sqlca);
strcpy(cmd,"EXECUTE IMMEDIATE");
dpc_exec_immediate(sql_string);
SQLCODE = sqlca.sqlcode; 
```

如何知道SQL是否执行成功？

例如，如何知道oracle DB中是否存在表？如何知道一条`INSERT`语句是否执行成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:48:29.637

首先，在 Pro*C 中，可以使用`EXEC SQL`指令直接执行 SQL 语句，例如

`EXEC SQL INSERT INTO.... VALUES...`

所有其他 SQL 语句都可以以相同的方式执行。每个 Pro*C 都使用`SQLCA.H`类似的头文件`EXEC SQL INCLUDE SQLCA.H`；这一行告诉 Pro*C 预编译器该程序有需要在其中解释的 SQL 语句。

动态 sql 也可以在 Pro*C 中执行，比如

```
char *cmd = "INSERT INTO emp VALUES(1234, 'jon', 3)";
EXEC SQL PREPARE q FROM :cmd;
EXEC SQL EXECUTE q; 
```

或者

```
char cmd[255] = "TRUNCATE TABLE tab_name";
EXEC SQL EXECUTE IMMEDIATE :cmd; 
```

**注意`:`符号，这表示该变量是 SQL 引擎的绑定变量。

现在进入异常处理。下面是一些可用于处理 Pro*C 中的 SQL 错误的示例-

```
 EXEC SQL INSERT INTO .... VALUES...;
  if SQL_ERROR_FOUND  //Exception Handling starts
  {
       sprintf(err_data,"INSERT/SELECT");                  
       //write error to log file, use SQLCODE to see what particular error happened
       return(-1);
  } 
```

光标打开-

```
 EXEC SQL OPEN c_cursor;
 if SQL_ERROR_FOUND   //Exception Handling starts
 {
    sprintf(err_data,"CURSOR FETCH: cursor=c_item");
    //write error to log file
    return(-1);
 }
 else if NO_DATA_FOUND
 {//do something
 } 
```

或者使用动态 SQL-

```
 EXEC SQL EXECUTE IMMEDIATE :cmd;
  if SQL_ERROR_FOUND
  {
        sprintf(err_data,"EXECUTE DYNAMIC STATEMENT %s", cmd); 
        //write error to log file 
        return(FATAL);
  } 
```

依此类推...请记住，异常/错误处理`if..else`应该在`EXEC SQL <statement>`您想要处理错误的下方。

`SQLCODE (sqlca.sqlcode)`是最常用的错误代码。在程序顶部声明为 long ，最好在包含`SQLCA.H`as之后`long SQLCODE;`。SQLCODE 由 Oracle 在每个 SQL 语句之后填充，并保存 Oracle 服务器错误号。此代码也可用于错误处理和记录目的。

# android - 如何在Android listview中更改垂直滚动条的垂直大小

> ID：12935878
> 
> 赞同：1
> 
> 时间：2012-10-17T13:49:25.297
> 
> 标签：android, listview, scrollbar

请帮助，我正在寻找改变listview（Android）中垂直滚动条垂直大小的方法。基本上我想在列表视图中为垂直滚动条添加底部填充。这意味着滚动条不会从确切的底部绘制，而是从底部缩进一些（我的目的是 40 dp）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:47:04.843

创建具有透明背景的垂直滚动条图像并应用 9patch 来实现此效果。您可能必须为不同的密度创建特定于密度的图像。

[您可以从此处](http://developer.android.com/tools/help/draw9patch.html)了解有关 9-Patch 可绘制对象的更多信息。

![9 补丁](../Images/0a519c45cbd0bdb7a111e113fcc9d92e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:51:28.937

您可以更改 ScrollBar 的宽度，但我不知道您是否可以调整长度，因为 scollbars 是 ListView 的长度。

# json - 从 grails 1.3.4 升级到 grails 2.1.1 后无法使用“as JSON”

> ID：12935881
> 
> 赞同：2
> 
> 时间：2012-10-17T13:49:30.023
> 
> 标签：json, grails-2.0

我正在将 grails 插件从 1.3.4 升级到 grails 2.1.1。升级后，我现在有一个失败的集成测试，以前没有失败。使用“as JSON”（grails.converters.JSON）失败。

```
 @Test
public void testConvertCollectionOfEnvironmentSettingsToJSON() {
    EnvironmentSetting setting = configurationService.getEnvironmentSetting('ENFORCE_SCHEMA_INSTANCE_RULE')

    def jsonSetting = setting as JSON //exception thrown here
    def s = jsonSetting as String

    assertNotNull jsonSetting
} 
```

异常和堆栈跟踪：

```
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'com.company.ipsvc.configuration.domain.EnvironmentSettingAllRevs@48c12420' with class 'com.company.ipsvc.configuration.domain.EnvironmentSettingAllRevs' to class 'grails.converters.JSON'
at com.company.ipsvc.configuration.converter.json.basic.BasicEnvironmentSettingJSONIntegrationTests.testConvertCollectionOfEnvironmentSettingsToJSON(BasicEnvironmentSettingJSONIntegrationTests.groovy:28) 
```

我能够成功使用 encodeAsJSON() 。我也有与 XML 相同的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:00:44.387

我认为转换器（`as JSON`语法）默认情况下仅适用于域对象和集合。

`encodeAsJSON()`我相信，要转换任意对象，您应该使用转换器。或者使用对象编组器，告诉转换器如何处理您的对象。

不过，文档对此并不是很清楚..

看：

*   [http://grails.org/Converters+Reference](http://grails.org/Converters+Reference)（底部的对象编组部分）
*   [http://grails.org/doc/latest/ref/Plug-ins/codecs.html](http://grails.org/doc/latest/ref/Plug-ins/codecs.html)

但我注意到[http://grails.org/doc/latest/api/grails/converters/JSON.html#JSON%28java.lang.Object%29](http://grails.org/doc/latest/api/grails/converters/JSON.html#JSON%28java.lang.Object%29)说该对象转换 POGO .. 也许这意味着如果你有编组器？

我也确实找到了这个参考：

> 请注意，对于普通对象，'as' 运算符不会重载...
> 
> 域对象可以使用“as”运算符将对象转换为 JSON，与集合相同。因此，与 POGO 不同的是，它们必须被按摩成一个列表或明确调用 encodeAsJSON ...
> 
> [http://manbuildswebsite.com/2010/02/08/rendering-json-in-grails-part-2-plain-old-groovy-objects-and-domain-objects/](http://manbuildswebsite.com/2010/02/08/rendering-json-in-grails-part-2-plain-old-groovy-objects-and-domain-objects/)

这似乎描述了这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T20:46:17.513

对于非域对象，我们发现在运行测试时会出现这种情况……我们的解决方案是使用新的 JSON：

```
render new JSON( obj ) 
```

这将允许测试工作，并且代码做同样的事情（本质上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T15:49:33.037

Ran into a similar issue that broke unit test using grails 2.2.1 . At issue was a straight `obj as JSON` conversion attempt. But this was interpreted as type casting instead.

The workaround is to stuff your obj to be converted into a map like this `[data:obj] as JSON`

# r - 将乳胶添加到 knitr 多个图形

> ID：12935882
> 
> 赞同：3
> 
> 时间：2012-10-17T13:49:36.950
> 
> 标签：r, latex, ggplot2, sweave, knitr

嗨，我有一些代码生成多个图形，下面模拟了 knitr。生成的图形网格非常小，我想`\adjustbox{scale=1.25}{\includegraphic{**}}`在 knitr includegraphic 代码中添加一个，但对 cat(\includegrahics) 的明显尝试没有奏效。有没有一种简单的方法可以在生成的包含图形之前和之后添加乳胶命令？

```
\documentclass{article}
\usepackage{adjustbox}
\begin{document}
\SweaveOpts{echo=FALSE, warning=FALSE,message=FALSE,error=FALSE}

<<results='hide'>>=
require(gdata)
require(xtable)
source('~/Dropbox/Programming/R Resources/defs.R')
require(grid)
require(ggplot2)
require(reshape2)
@

<<results='hide'>>=
flows=structure(list(Fund.Domicile = c("A", "A", "A", "A", "A", "B", 
"B", "B", "B", "B", "C", "C", "C", "C", "C", "D", "D", "D", "D", 
"D"), Fund.Investment.Type = c("W", "W", "W", "W", "W", "X", 
"X", "X", "X", "X", "Y", "Y", "Y", "Y", "Y", "Z", "Z", "Z", "Z", 
"Z"), `2002` = c(-0.529898540845281, 0.772054875993179, -20.0331761409875, 
18.1013558280681, 5.24105768030327, -0.103737945556193, -21.1814709681659, 
-17.5440978426109, -15.5829977118454, -20.2260315293908, 40.1011996671901, 
31.7827753364134, 10.3285781074177, -0.439416156872641, 10.0561291484258, 
28.6005484483324, -0.78786653287941, -13.3541087171504, -23.2187998341653, 
-31.0039436462572), `2003` = c(14.7492468042958, -0.0275963287375104, 
-17.7708887712113, -21.6767106833672, 40.1833625101162, 11.123046653849, 
-7.75903264645413, -32.8999860636484, 2.08949747258285, -20.5043265068236, 
-1.36220948683688, -43.666119989502, 49.8895881388731, -6.77098667217137, 
-1.14679926989166, 1.95491694361459, -19.2996405333482, -27.7844292459854, 
-31.2344881507997, -19.5546235912165), `2004` = c(-23.7147297386606, 
-16.3947580155831, -26.2668449875697, 7.44336777160022, 10.5589478002836, 
-8.75005070668023, -1.86641790420448, 16.1977001332142, -22.1050631845402, 
-39.3516451994645, -49.0769487782368, -3.35924808913687, -24.4704066120435, 
-37.2442867971211, 0.683587234461294, -18.2706752984679, 41.5870386956072, 
-13.0489657114237, 15.9378239971014, 7.67697910507204), `2005` = c(-4.55959797613669, 
5.88565456256252, -1.69072856589651, 10.5241870675827, -14.6862822775804, 
17.5177606053963, -20.8386082504429, -19.4972967013319, -10.511857263532, 
-41.2074075438929, 24.5654545251262, 8.55786318066587, 5.44738422527871, 
0.634623938079709, 8.12292371061514, 23.4632529622168, 24.4070063548887, 
-11.0915520114019, 12.135207142526, 20.4497798625889), `2006` = c(9.75226025251804, 
-4.29865061171953, -2.09724392048597, 44.6666722837138, 30.661418933677, 
31.4006593587462, 7.81193825433631, 6.67455195559533, -21.4061513950816, 
-10.9347694700455, 21.679512353103, 3.00620296764385, -28.8652577925736, 
-2.40500496458537, -34.2999700917406, 4.16424846748192, 12.8570962420172, 
14.2386144440232, 24.8251023510994, -8.43426647739114), `2007` = c(5.63097110819688, 
24.5618516506043, -12.1851875872125, 1.47169500868284, -2.06314306074233, 
49.3156076715943, 22.1496090994165, -5.66968824427377, 19.0180156274722, 
9.60066029597923, -17.3853484334746, -20.3244695486896, 19.2245352517759, 
-27.0714138354969, -10.2816030397085, -32.7428648340247, -6.91534782810891, 
-22.5738223368588, -4.90194082412061, 4.5930516250516), `2008` = c(17.6132975354028, 
13.2825751589442, 10.9526114709831, 54.5347419688899, 10.2168636887397, 
22.7675434698984, 21.2966040483597, -5.48726279410465, -5.74273553195292, 
-15.9585829721537, -13.7289712451739, 7.30295584751816, -34.1484269522794, 
1.99774293039047, 20.1873723311578, -5.64271685865591, -15.2492762599638, 
14.8885666471535, -0.667785495902541, 25.3487149747655), `2009` = c(12.6895026843362, 
8.79135905052476, -31.1013615485344, 53.2336276071583, 0.850127605357284, 
-25.4230346228574, 0.685229220802603, 2.17685117184943, 22.9033401966985, 
4.99033888685287, -6.73959582268601, 1.64262497691941, -7.97937067923302, 
2.08671946596528, -1.49959272604534, -56.053302546395, -26.9877635637831, 
10.70792214362, 20.767800895652, 5.56759212862765), `2010` = c(9.12519719158834, 
56.4458682158794, 10.0924010459392, -26.1685287160829, 0.383729796176608, 
8.46399630560169, 13.9961555521805, 2.08243592536891, 9.30857371730836, 
-5.68931159712071, -1.90329476168925, 4.63803550621013, -9.6622478328383, 
38.2174244916787, -34.31334333628, -31.8687230108344, 22.2571919461198, 
18.0507770996133, -29.9436511641762, -5.15424637861403), `2011` = c(0.293475666658379, 
-37.6498026750657, 12.2168994671778, 35.4799718156936, -19.3929280696092, 
9.32638067918487, -29.0199397818446, -37.9432273617349, 2.94421967337048, 
-24.7995737867905, 27.0860382001494, 34.7688415979825, -6.63377573201861, 
14.2519054923501, 13.4697104157147, -7.33188207017677, 5.13471816288466, 
-5.04112561270486, -13.8230485866696, 44.0005209380284), `2012` = c(-1.46548181648837, 
11.469059790123, 21.0839248832524, 3.00780109149884, -32.9185824569684, 
22.120980240766, -3.46899628596499, 5.52026948842546, -10.1622646453992, 
-8.09625643479651, 1.20491472685827, 35.7200647592221, -25.2214669973592, 
27.114933346277, 4.11392575746633, -16.1856657167321, 22.0260776979833, 
-38.0714290042188, 23.4976820652487, 47.7740524641717)), .Names = c("Fund.Domicile", 
"Fund.Investment.Type", "2002", "2003", "2004", "2005", "2006", 
"2007", "2008", "2009", "2010", "2011", "2012"), class = "data.frame", row.names = c(NA, 
-20L))
@

<<results='hide'>>=
countries=unique(flows[['Fund.Domicile']])
ff=melt(flows,id.vars=c(1:2))
ff[['sign']]<-ifelse(ff[['value']] >= 0, 'positive', 'negative')
@

<<results='asis',fig.height=11,fig.width=9>>=
for(c in countries){
  ctry <- subset(ff,subset=(Fund.Domicile == c))
  grid.newpage()
  pushViewport(viewport(layout=grid.layout(4,3)))
  n=matrix(1:12,ncol=3,byrow=T)
  strats=unique(ctry[['Fund.Investment.Type']])
  k=length(strats)
  for(i in 1:12){
    if(i<=k){
      tmp2=subset(ctry,subset=(Fund.Investment.Type == strats[i]))
      xco=which(n == i,arr.ind=T)[1]
      yco=which(n == i,arr.ind=T)[2]
      xx=ggplot(tmp2,aes(variable,value,fill=sign)) +
        geom_bar(stat='identity') +
        xlab("Year") +
        ylab(bquote("US$ Millions")) +
        ggtitle(paste(c,'\n',strats[i])) +
        guides(fill=F) +
        theme(axis.title.x=element_text(size=6,colour='dark blue'),
              axis.title.y=element_text(size=6,colour='dark blue'),
              axis.text.x=element_text(size=4,angle=90),
              axis.text.y=element_text(size=4),
              plot.title=element_text(size=7,face='bold',colour='dark blue')) +
        scale_fill_manual(values=c('positive' = 'dark blue','negative' = 'red'))
          cat('\\adjustbox{scale=1.2}{',
  print(xx,vp=viewport(layout.pos.row=xco,layout.pos.col=yco)),"}")
    }
  }
}
@

\end{document} 
```

tex 输出添加在下面

```
\documentclass{article}\usepackage{graphicx, color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\definecolor{fgcolor}{rgb}{0.2, 0.2, 0.2}
\newcommand{\hlnumber}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlfunctioncall}[1]{\textcolor[rgb]{0.501960784313725,0,0.329411764705882}{\textbf{#1}}}%
\newcommand{\hlstring}[1]{\textcolor[rgb]{0.6,0.6,1}{#1}}%
\newcommand{\hlkeyword}[1]{\textcolor[rgb]{0,0,0}{\textbf{#1}}}%
\newcommand{\hlargument}[1]{\textcolor[rgb]{0.690196078431373,0.250980392156863,0.0196078431372549}{#1}}%
\newcommand{\hlcomment}[1]{\textcolor[rgb]{0.180392156862745,0.6,0.341176470588235}{#1}}%
\newcommand{\hlroxygencomment}[1]{\textcolor[rgb]{0.43921568627451,0.47843137254902,0.701960784313725}{#1}}%
\newcommand{\hlformalargs}[1]{\textcolor[rgb]{0.690196078431373,0.250980392156863,0.0196078431372549}{#1}}%
\newcommand{\hleqformalargs}[1]{\textcolor[rgb]{0.690196078431373,0.250980392156863,0.0196078431372549}{#1}}%
\newcommand{\hlassignement}[1]{\textcolor[rgb]{0,0,0}{\textbf{#1}}}%
\newcommand{\hlpackage}[1]{\textcolor[rgb]{0.588235294117647,0.709803921568627,0.145098039215686}{#1}}%
\newcommand{\hlslot}[1]{\textit{#1}}%
\newcommand{\hlsymbol}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlprompt}[1]{\textcolor[rgb]{0.2,0.2,0.2}{#1}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage{adjustbox}
\begin{document}

\adjustbox{scale=1.2}{ 
\includegraphics[width=\maxwidth]{figure/unnamed-chunk-4} 

\end{document} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T04:17:09.390

我`knitr` [在 userR 的演讲中强调了这一点！2012 年](http://yihui.name/slides/2012-knitr-RStudio.html)：

![不要猫包含图形](../Images/4fbf2b0bda887c288c7ece24fec5c8b8.png)

在`knitr`中，您可以使用块选项`out.extra`，例如`<<out.extra='scale=1.25'>>=`，避免邪恶`cat()`。见[http://yihui.name/knitr/options](http://yihui.name/knitr/options)

我刚刚在`knitr`测试您的案例时发现了一个错误，并在[开发版本](https://github.com/yihui/knitr)中修复了它。如果您使用的是 CRAN 版本，则必须`opt_chunk$set(out.width = NULL)`，否则您可以编写`<<out.extra='scale=1.25', out.width=NULL>>=`.

# c++ - 无需不断检查标志的 C++ kill 方法

> ID：12935888
> 
> 赞同：5
> 
> 时间：2012-10-17T13:49:58.467
> 
> 标签：c++, multithreading, c++11

我有几个工作函数，它们调用可能会发生不好的事情的附属函数。如果辅助功能确定发生了不好的事情，我希望能够停止工作功能，而无需在工作功能中进行大量标志检查。例如，

```
struct Worker {
    bool badhappened = false;
    Worker() {
        std::thread([&]() {
            while ( not badhappened );
            // kill the work
        }).detach();
    }
    int WorkComponent {
        if ( badhappening() )
            badhappened = true;
        return someint;
    }
    void DoWork {
        // WorkComponents called several times
    }
} 
```

但我不知道该打什么电话`kill the work`。在单独的线程中发生不是问题，但在 C++ 的线程中`DoWork`似乎没有等价物。`pthread_kill`有没有不涉及多次`if(badhappened) return;`调用的解决方案`DoWork`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T19:56:37.627

长话短说：

**没有安全的方法来停止非合作线程。**

是的，有一些工具可以强行关闭线程，但你是在自找麻烦。唯一安全的方法是就终止政策达成一致。这归结为在您编写时足够频繁地检查标志。

来自大师的更多信息：

[C++ 和超越 2011：Scott、Andrei 和 Herb - 问我们任何问题](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2011-Scott-Andrei-and-Herb-Ask-Us-Anything)

见30:44 有系统有原则的线程终止和程序终止是怎么回事？

* * *

在 POSIX 中取消线程也不是一个好主意：

[使用 pthread_cancel 取消线程：好的做法或坏的做法](https://stackoverflow.com/q/4760687/341970)

# javascript - 将字符串转换为 base36 语言之间的不一致。

> ID：12935891
> 
> 赞同：6
> 
> 时间：2012-10-17T13:50:05.073
> 
> 标签：javascript, python, base36

在将字符串转换为 base36 时，我注意到 Python 和 JavaScript 之间存在一些不一致。

**蟒蛇方法：**

```
>>> print int('abcdefghijr', 36) 
```

结果：37713647386641447

**Javascript方法：**

```
<script>
    document.write(parseInt("abcdefghijr", 36));
</script> 
```

结果：37713647386641450

是什么导致两种语言之间的结果不同？无论语言如何，产生相同结果的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T13:55:45.600

该数字需要 56 位来表示。JavaScript 的数字实际上是[双精度二进制浮点数](http://en.wikipedia.org/wiki/Double_precision)，或者`double`简称。它们总共是 64 位，并且可以表示比 64 位整数更*广泛*的值范围，但是由于它们是如何实现的（它们将数字表示为`mantissa * 2^exponent`），它们不能表示该范围内的*所有*数字，只是那些是`2^exponent`倍数适合尾数的倍数（包括 2^0 = 1，因此您可以获得尾数可以直接处理的*所有*整数）。尾数是 53 位，对于这个数字来说是不够的。所以它被四舍五入为一个*可以*表示的数字。

您可以做的是使用由第三方库（如`gwt-math`or ）定义的任意精度数字类型`Big.js`。如果你知道你的学校算术，这些数字并不难实现。有效地做到这一点是另一回事，但也是一个广泛研究的领域。如果您使用现有的库，这不是*您的问题。*

# google-chrome - 在 Chrome 中点击透明度

> ID：12935898
> 
> 赞同：1
> 
> 时间：2012-10-17T13:50:26.933
> 
> 标签：google-chrome, transparency

我在用透明度覆盖 div 并且能够单击 Chrome 中的两个图层（但不是 IE）时遇到问题。

在我寻找答案的过程中，我发现了以下示例来说明： [http ://www.searchlawrence.com/click-through-a-div-to-underlying-elements.html](http://www.searchlawrence.com/click-through-a-div-to-underlying-elements.html)

对该页面的来源进行了评论以解释透明度。

如果我在 IE 中查看此页面，我可以突出显示（即交互）框中的文本（“这是带有...的 div”）和顶部的文本（“此 DIV 覆盖在...”） . 但是，当我在 Chrome 中打开同一页面时，我无法选择顶部的文本。

这突出了我在使用包含链接的 iframe 时遇到的问题，但我也希望包含 iframe 的页面也允许点击链接。透明性在 Chrome 中起作用，我可以看到两组链接，但只能单击顶层（即 iframe）上的链接。顶部的 iframe 让我可以看到背后的内容，但不能与之交互。

我知道 pointer-events:none 但是，它会停止 iframe 上的链接。我基本上可以让它在背景 html 或覆盖的 iframe 上工作，但不能同时在两者上工作！

希望这一切都有意义，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T21:52:24.263

似乎专门针对chrome的解决方案是使用css：
`div#parent, div#parent div {pointer-events:none;}`

意思是 div，所有子 div 也应该启用点击。

我在这里找到了解决方案： [单击 Chrome 中的透明度](https://stackoverflow.com/questions/12935898/click-through-transparency-in-chrome)

# perl - 如何覆盖 usr bin env perl

> ID：12935908
> 
> 赞同：0
> 
> 时间：2012-10-17T13:51:05.790
> 
> 标签：perl, unix

这仅检查 PATH 变量？

我可以使用说 PERL=/usr/somelocal/perl 来“覆盖”路径吗

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:58:03.343

使用不同 Perl 二进制文件的三种方法：

1.  `PATH`执行脚本前设置环境变量；例如`PATH=/opt/alternative-perl/bin:$PATH /path/to/your/script.pl`
2.  执行要直接使用的 Perl 二进制文件，并使用脚本名称作为其参数：`/opt/alternative-perl/bin/perl /path/to/your/script.pl`
3.  如果您`$PATH`在“坏” Perl 二进制文件所在的目录之前包含一个目录，那么您可以在这样的目录中放置一个指向“好” Perl 二进制文件的符号链接。但是，这很混乱，只适用于某些情况，但它是比前两种更永久的解决方案。

如果您确实拥有对该脚本的写入权限并且您愿意修改它，那么@krishnang 的回复适用：修改第一行以指向要使用的二进制文件，例如`#!/opt/alternative-perl/bin/perl`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:53:06.167

您可以在脚本的开头使用它：

```
#!/usr/somelocal/perl 
```

参考[社邦声明](http://www.sthomas.net/roberts-perl-tutorial.htm/ch22/Shebang)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:53:31.940

您可以指定要使用的任何 perl 二进制文件的完整路径。 **env**不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T15:01:23.727

三个选项：

*   不要使用`#!`( `/usr/somelocal/perl script.pl`)
*   修复路径 ( `PATH="/usr/somelocal:$PATH" script.pl`)
*   修复不正确的`#!`. ( `#!/usr/somelocal/perl`)

# delphi - 如何在Delphi中使用WinAPI按名称查找组合框项的索引？

> ID：12935912
> 
> 赞同：3
> 
> 时间：2012-10-17T13:51:10.553
> 
> 标签：delphi, winapi, combobox, delphi-2009

我有一个 Delphi 应用程序 A，它需要在另一个 Delphi 应用程序 B 的组合框中选择某个项目。

A 知道要选择的组合框项目的文本。

为了选择组合框项目，应用程序 A 需要知道该项目在组合框中的索引。

当我只知道它的文本时，如何找出组合框项的索引？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T13:55:28.827

```
procedure TForm1.Button1Click(Sender: TObject);
var
  SItem: string;
begin
  SItem := 'Beta';
  Caption := IntToStr(SendMessage(ComboBox1.Handle, CB_FINDSTRINGEXACT,
    -1, LPARAM(PChar(SItem))));
end; 
```

( `uses CommCtrl`)。

# octave - 如何用 Octave 生成 棋盘格？

> ID：12935915
> 
> 赞同：0
> 
> 时间：2012-10-17T13:51:25.170
> 
> 标签：octave

我需要用 Octave 生成​​一个黑白棋盘格。我想使用这个虚拟图像将笛卡尔投影转换为极坐标或透视投影。任何人都可以显示脚本？谢谢

我试过这个：

```
clear all
close all
clc

img = magic(16);

%# convert coordinates from cartesian to polar
[r c] = size(img);
[X Y] = meshgrid(1:c,1:r);
[theta rho] = cart2pol(X, Y);

figure
subplot(121), image(img), axis square

colormap(gray(256))

subplot(122), surf(theta, rho,img),axis square;
view(0,90) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:57:11.527

这可以满足 OP 的要求。但是这个问题是几个月前提出的！

对 OP 的代码稍作修改。

```
clear all
close all
clc
%my changes start
img = zeros(8,8);
img(1:2:end,1:2:end)=255;
img(2:2:end,2:2:end)=255;
%my changes end

%# convert coordinates from cartesian to polar
[r c] = size(img);
[X Y] = meshgrid(1:c,1:r);
[theta rho] = cart2pol(X, Y);

figure
subplot(121), image(img), axis square

colormap(gray(256))

subplot(122), surf(theta, rho,img),axis square;
view(0,90) 
```

# php - Wordpress - 愿望清单成员：登录时重定向

> ID：12935918
> 
> 赞同：1
> 
> 时间：2012-10-17T13:51:30.487
> 
> 标签：php, redirect, wordpress

我目前在 Wordpress 上运行了一个站点，并安装了 Wishlist Member 插件来控制站点的会员功能。目前，如果非会员试图访问需要会员资格的页面，他们将被重定向到带有“注册”的页面，注册用户可以通过标题中的登录表单登录任何页面并被定向到带有 slug 'member-dashboard' 的页面。

我希望实现的目标（插件无法让我这样做）是让登录的用户有机会直接返回他们在登录前查看的页面（这将通过页面“成员仪表板”）。但是，我需要能够考虑到它们是否已被注册页面引用并有效地将它们返回 2 页。我还需要考虑他们是否无法正确登录。

我通过网络搜索查看了一些解决方案，但这些都不是很有效。这是我到目前为止所拥有的（请善待 - 我知道这是垃圾）

```
<?php if (strstr( $_SERVER['HTTP_REFERER'],"www.mydomain.co.uk/sign-up/" ) && is_page(9)) { ?>
<a href="#" onclick="window.history.go(-2);">Go back 2 pages as referred by 'sign-up'</a>
<? } elseif (is_page(9)) { ?>
<?php
$url = htmlspecialchars($_SERVER['HTTP_REFERER']);
echo "<a href='$url'>Go back 1 page as referred by another page</a>"; 
?>
<? } ?> 
```

我很清楚这是胡说八道，我不应该使用 Java 解决方案（这不会保留用户在返回第 2 页时已登录的事实）或 HTTP_REFERER（并且 PHP 需要也很整洁），但它应该证明我至少在实现之后是什么。此代码位于 Wordpress 的 page.php 中，因为插件的代码已加密，因此我无法使用它。

我猜我应该设置某种会话变量，以便最好地完成我在这种情况下需要做的事情，但我必须说实话 - 我没有设法挖掘出任何似乎有帮助的东西我在这方面。有人能至少指出我正确的方向吗？将不胜感激:)

# java - 如何在 Http Client 4.1 中禁用 log4j 登录以登录到 FileAppender

> ID：12935923
> 
> 赞同：4
> 
> 时间：2012-10-17T13:51:47.850
> 
> 标签：java, log4j, httpclient

这是我的 HTTP 客户端的 log4j 配置：

```
log4j.appender.HTTPCLIENT_APPDR=com.xxx.log.FileAppender
log4j.appender.HTTPCLIENT_APPDR.File=${user.dir}/log/access.log
log4j.appender.HTTPCLIENT_APPDR.layout=org.apache.log4j.PatternLayout
log4j.appender.HTTPCLIENT_APPDR_APPDR.layout.ConversionPattern=%d{dd MMM yyyy HH:mm:ss SSS}ms %-5p [%t] - %m%n
log4j.appender.HTTPCLIENT_APPDR.MaxFileSize=20000KB
log4j.appender.HTTPCLIENT_APPDR.MaxBackupIndex=30
log4j.logger.org.apache.http=DEBUG,HTTPCLIENT_APPDR 
```

我希望它`httpclient`根据我所处的环境关闭 CODE 的日志记录（我知道如何从 log4j.properties 禁用它）。

我尝试插入这些行：

```
+    System.setProperty("log4j.logger.org.apache.http", "ERROR"); 
```

或者

```
+    Logger.getLogger("log4j.logger.org.apache.http").setLevel(Level.off) 
```

在我的应用程序开始时，但它不起作用。

 ``1.  Can I access the log4j properties from the System class?
2.  When I look at the `Logger.getLogger("log4j.logger.org.apache.http")` the level is null? Should it not be DEBUG?

What worked finally,` 

```
Logger.getLogger("org.apache.http").setLevel(org.apache.log4j.Level.OFF); 
```

我没有使用正确的键。

问候，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T13:52:31.093

最终起作用的是 Logger.getLogger("org.apache.http").setLevel(org.apache.log4j.Level.OFF); 我没有使用正确的键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-06T22:16:26.773

如果您有 log4j.properties 文件，请添加此行

`log4j.logger.org.apache.http=WARN`

这仅在 Apache HttpClient 4 中测试`

# extjs - Extjs 4 - 应用程序上下文帮助 - 查找重点组件

> ID：12935928
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:52:11.023
> 
> 标签：extjs, extjs4, extjs-mvc

我正在考虑在我的应用程序中实现上下文帮助，我想知道是否可以按照我的想法实现它：

1.  注册 Ext.Body() ex 的全局快捷方式。ctrl+h
2.  快捷方式处理程序将找到焦点组件并调用其 showHelp 方法
3.  如果组件没有 showHelp 方法，它将移动到其父级并调用 showHelp 方法。

我想知道第2步是否可行？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:23:17.373

好的，我深入研究它。首先，我执行以下操作来实现上下文帮助：

1.  创建帮助插件并将其添加到应提供上下文帮助的每个组件中。插件将点击监听器注册到每个组件。
2.  触发的 click 事件将其源注册到静态 HelpManager 中，该 HelpManager 包含对最后一个焦点组件的引用
3.  然后按下快捷方式后，我从 HelpManager 获取最后一个组件并使用其帮助配置触发上下文帮助。

代码：

```
    Ext.define('GSIP.core.help.GSIPHelp',{
        别名：'plugin.help',
        初始化：函数（组件）{
            //var me = this;
            component.on('afterrender',function(c) {
                //为什么焦点事件不起作用？只有点击。
                c.getEl().on('点击',function() {
                    console.log('应该注册焦点');
                    GSIP.core.help.GSIPHelpMgr.registerFocus（组件）；
                });
            });
        }
    });

```

该解决方案存在严重缺陷。如果组件有父组件并且它们都获得了帮助插件，则单击事件将触发两次，父组件作为最后一个。

在编码期间，我在文档中找到了`Ext.FocusManager`，就是这样！使用它我能够找到重点组件。使用简单的功能：如果组件没有帮助，我会扫描其父级以找到一个，如果没有父级，我只显示索引，我能够创建上下文帮助。

```
    Ext.define('GSIP.core.help.Help',{
        混合：{
            文档：'GSIP.core.utils.Document'
        },
        url:'/GSIP/resources/gsip/core/help/html/',
        显示帮助：函数（comp）{

            if (comp.help != undefined) {
                this.showDocumentSrc(this.url + comp.help + '.html');
            }别的{
                如果（comp.ownerCt == 未定义）{
                    this.showDocumentSrc(this.url + 'index.html');
                }别的{
                    this.showHelp(comp.ownerCt);
                }
            }
        }
    });

```

# joomla - Joomla 中的 Mootools 手风琴远程触发器

> ID：12935935
> 
> 赞同：0
> 
> 时间：2012-10-17T13:52:37.527
> 
> 标签：joomla, triggers, mootools, accordion

我正在尝试自定义 Joomla 2.5 Accordion 联系人页面以添加可点击的地图来触发手风琴，我正在努力。手风琴部分工作正常，地图在可点击区域上工作正常，但我无法将两者联系起来。

触发手风琴的 mootools 手风琴脚本是这样的（非常标准的 Joomla 联系人页面版本除外，我在第 2 行添加了 'var OfficeAccordian ='：

```
window.addEvent('domready', function(){ 
    var OfficeAccordian = new Fx.Accordion(
        $$('div#contact-slider.pane-sliders > .panel > h3.pane-toggler'), 
        $$('div#contact-slider.pane-sliders > .panel > div.pane-slider'), {
        onActive: function(toggler, i) {
            toggler.addClass('pane-toggler-down');
            toggler.removeClass('pane-toggler');i.addClass('pane-down');
            i.removeClass('pane-hide');
            Cookie.write('jpanesliders_contact-slider',$$('div#contact-slider.pane-sliders > .panel > h3').indexOf(toggler));
        },
        onBackground: function(toggler, i) {
            toggler.addClass('pane-toggler');
            toggler.removeClass('pane-toggler-down');
            i.addClass('pane-hide');i.removeClass('pane-down');
            if($$('div#contact-slider.pane-sliders > .panel > h3').length==$$('div#contact-slider.pane-sliders > .panel > h3.pane-toggler').length)
                Cookie.write('jpanesliders_contact-slider',-1);
        },
        duration: 300,
        opacity: false,
        alwaysHide: true
    }); 
}); 
```

但是当我单击地图上的链接（列表中的标准锚按钮）时，我需要模拟手风琴触发器单击的脚本超出了我的范围。我已经尝试从不同的网站改编一些例子，但没有一个奏效。我的 javascript 技能还不够好，还不知道它们为什么不起作用或如何修复它们。（我不确定它是否需要 mootools，因为我已经加载了 mootools 和 jquery 并在网站上工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:26:04.657

Fx.Accordion 有一个接口（实例公开的方法 API，因此您可以控制它）。

只需要阅读手册：

[http://mootools.net/docs/more/Fx/Fx.Accordion#Fx-Accordion:display](http://mootools.net/docs/more/Fx/Fx.Accordion#Fx-Accordion:display)

```
OfficeAccordian.display(2); 
```

如果这还不够，请阅读源代码：

[https://github.com/mootools/mootools-more/blob/master/Source/Fx/Fx.Accordion.js#L157](https://github.com/mootools/mootools-more/blob/master/Source/Fx/Fx.Accordion.js#L157)

这表明您可以将第二个参数`.display`作为布尔值传递给是否使用 fx。

ps 这不是您如何拼写手风琴 ( `OfficeAccordian`)。:)

# nlp - 如何以编程方式访问 wordnet 层次结构？

> ID：12935936
> 
> 赞同：9
> 
> 时间：2012-10-17T13:52:45.413
> 
> 标签：nlp, wordnet, word-sense-disambiguation, jaws-wordnet

假设我想访问其 IS-A 父值和 HAS-A 值的任何单词，那么是否可以使用任何 api？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T12:16:14.643

您可以使用[Natural Language Toolkit](http://nltk.org/)的 python API 。在 Wordnet 中，IS-A 关系称为*hypernym*（反义词：*hyonym*），HAS-A 关系称为*meronym*（反义词：*holonym*）。

```
from nltk.corpus import wordnet
book = wordnet.synsets('book')[0]
book.hypernyms()
>>> [Synset('publication.n.01')]
book.part_meronyms()
>>> [Synset('running_head.n.01'), Synset('signature.n.05')] 
```

我还发现[NodeBox 语言学](https://nodebox.net/code/index.php/Linguistics)API 更易于使用：

```
import en
en.noun.hypernym('book')
>>> [['publication']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-30T14:14:27.273

您可以使用命令行。命令是“wn book -hypen”来获取名词书的上位词。对于meronyms，使用命令“wn book -meron”。-o 选项还提供了同义词集偏移量。 [这](https://wordnet.princeton.edu/documentation/wn1wn)是更多信息的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-05T15:01:41.523

无耻的插头：

我正在编写一个 Scala 库来访问 WordNet。虽然并非所有的相似性措施都已实施，但所有的词义和关系都是可用的。我将它用于我的研究，因此它正在积极开发中。

```
import com.github.mrmechko.swordnet._

SKey("book",SPos.Noun)
//> List(SKey("publication%1:10:00::"))

SKey("publication%1:10:00::").getRelation(SRelationType.hypernym) //Hypernyms

SKey("publication%1:10:00::").getRelation(SRelationType.hyponym) //Hyponyms etc 
```

[SWordNet](https://github.com/mrmechko/SWordNet)在 GitHub 和 Sonatype 上可用

# javascript - 需要在 ADD Gallery 幻灯片放映时显示灯箱弹出

> ID：12935941
> 
> 赞同：0
> 
> 时间：2012-10-17T13:53:02.140
> 
> 标签：javascript, jquery, html

我有一个`PHP`项目，我正在使用 ADD Gallery 图像幻灯片放映。在主图上，（大图）单击该大图时，我需要在像灯箱这样的弹出窗口中显示它。但我不知道怎么做。它是否适用于添加画廊和灯箱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:33:38.297

你不能仅仅通过`PHP, HTML and JAVASCRIPT`. 你需要`Modal Dialog boxes`. 这不仅需要良好的技能，`HTML & CSS`而且还需要`JQuery`。这里有 14 个你可能想要使用的 jQuery 模态弹出窗口。

[http://www.jquery4u.com/windows/14-jquery-modal-dialog-boxes/](http://www.jquery4u.com/windows/14-jquery-modal-dialog-boxes/)

根据您的要求自定义它们。

# sql - SQL Server - 根据值的顺序而不是时间戳合并时间序列数据

> ID：12935944
> 
> 赞同：1
> 
> 时间：2012-10-17T13:53:11.057
> 
> 标签：sql, sql-server, time-series

我希望我能解释这一点。

对于不同的业务对象，我有各种基于时间的读数。每个读数都有一个时间戳和一个值。每个业务对象的数据开始的实际时间对于每个对象是不同的。（即对象 1 的数据首次记录在 6 月，对象 2 的数据首次记录在 8 月）

我需要做的是根据读数的顺序（第一个值，第二个值）聚合（总和，平均值等）不同对象之间的值，而不考虑每个值的实际时间

所有数据点代表每个月的一个值。所以业务对象之间不存在匹配问题。每个业务对象的第二个值比第一个值晚一个月，等等。这些值的时间戳具有该月的最后一天，但这对数据的性质没有意义。年份和月份很重要。

我一直在通过为每个业务对象加载整组数据并通过代码合并数据来处理这个问题。但我想知道是否有办法通过 SOL 做到这一点。

有人有想法吗？

这是一些数据 这是数据的样子

```
object ID   Date           Value
1           2010-01-31      1.0
1           2010-03-31      2.0
1           2010-04-30      3.0
2           2011-06-30     10.0
2           2011-07-31     11.0
2           2011-08-31     12.0 
```

期望的结果是

```
month    Sum     Average
1        11.0     5.5
2        11.0    11.0 (there is no second month for the first object)
3        13.0     6.5
4         3.0     3.0 (there is no fourth month for the second object) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:04:24.000

使用新的示例数据，这是一个解决方案：

```
;WITH PREPARED_DATA 
     AS (SELECT *, 
                Datediff(MONTH, Min(DATE) OVER (PARTITION BY ID), DATE) 
                + 1 MONTH
         FROM   DATA_TABLE) 
SELECT MONTH, 
       Sum(VALUE) AS SUM_VALUE, 
       Avg(VALUE) AS AVG_VALUE 
FROM   PREPARED_DATA 
GROUP  BY MONTH 
```

[您可以在此处](http://sqlfiddle.com/#!3/7d863/4)找到一个工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:42:40.890

我的数学在第 3 个月的 mny 示例中不正确。这就是我得到的

```
 select sum (value), dataorder + 1 
    from  (select normaldata.value,
          ((year(NormalData.DATE) - 1900) * 12) + MONTH(normaldata.date) - mintab.Mindate AS DataOrder from NormalData, (select ObjectId,
 Min(((year(date) - 1900 )* 12) + MONTH(DATE)) as Mindate from
 NormalData group by ObjectID) as MINtab where (NormalData.ObjectID =
 mintab.ObjectID)
      ) AS OrderedData group by DataOrder 
```

这适用于 Access 和 SQL Server，但不适用于 Oracle。必须让这三个方面都发生一些事情。我会尝试你的方法，看看它的兼容性如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:55:37.390

```
WITH M AS (
SELECT [Object ID]
     , MIN([Date]) as [Date]
  FROM TBL
 GROUP BY [Object ID]
)
SELECT DATEDIFF(MONTH,M.[Date], D.[Date]) + 1 AS [MONTH]
     , SUM(VALUE) AS [SUM]
     , AVG(VALUE) AS [AVERAGE]
  FROM TBL D
 INNER JOIN M
    ON D.[Object ID] = m.[Object ID]
 GROUP BY DATEDIFF(MONTH,M.[Date], D.[Date]) 
```

通过查询是错误的，您第 3 个月的数学是错误的。

# sharepoint - 如何对 splistitemcollection 中的项目进行排序？

> ID：12935946
> 
> 赞同：3
> 
> 时间：2012-10-17T13:53:15.623
> 
> 标签：sharepoint, sorting, sql-order-by, caml

我在 sharepoint webpart 中遇到问题。我有一个自定义列表，其中我有一个带有类型编号的列名顺序。然后我创建了一个显示列表并按列顺序排序的 Web 部件。

我有这个 caml 查询
字符串 test =
`<Query>`+
   `<OrderBy>`+
      `<FieldRef Name='order0' Ascending='True' />`+
   `</OrderBy>`+
`</Query>`;

我的问题是当我像这个样本一样循环时

foreach (SPListItem 导致项目) { ..... }

结果总是这样：
4
1
2
3

我想要这样的地方：
1
2
3
4

请我真的需要你的帮助。我真的是sharepoint的新手，我没有接受过这方面的培训。

谢谢，
格蕾丝拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:56:32.103

您的查询看起来不错，它应该可以工作。

我看到的唯一可能性是您排序的字段“order0”不是带有数字的字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-10T15:27:56.747

很晚了，但这可以帮助别人。就我而言，我的列配置为 Sortable=FALSE。我们通过 feature/caml 部署它。所以这可能是它的原因。

很容易看出这是否是您的问题，只需尝试对列表中的列进行排序，您将在列标题中看到消息

> 此列类型无法排序

# python - 将额外信息添加到 zip

> ID：12935951
> 
> 赞同：0
> 
> 时间：2012-10-17T13:53:38.727
> 
> 标签：python

```
from itertools import groupby
#input
l = [['Cautus  B.V.', 'plein 92', '1129008', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['Cautus  B.V.', 'plein 92', '1129008', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['De company', 'tiellaan 42', 'KD0022232', '13', 'AVB', 'Geachte heer Tigch', 'De heer I. Tigch'] ,
['De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch'] ,
['Slever ', 'klopt 42', 'KD2220115', '17', 'AVB', 'Geachte heer Slever', 'De heer T. Slever']]
#script
l_clean = sorted(zip(zip(*l)[1], zip(*l)[4],))

l_final = [(k, zip(*v)[1]) for k,v in groupby(l_clean, key = lambda x:x[0])]

for k,v in l_final:

     print k,list(v)

#My output is:

Wei 9-11 ['AVB', 'BEDR']

klopt 42 ['AVB']

plein 92 ['AVB', 'BEDR']

tiellaan 42 ['AVB', 'DAS'] 
```

# 问题

我的问题是我似乎无法将其他数据添加到输出中，我还想在输出中包含的数据是：

```
['Cautus  B.V.','1019123', '10', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'](not only for this entry but for all entry's) 
```

我尝试了所有更改/添加密钥等的方法，但它似乎不起作用。我知道我的英语很模糊，所以如果我需要澄清一些词或任何事情，就这么说吧。已经提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:10:18.550

我很难理解您要做什么，但这也许会有所帮助：

```
from itertools import groupby
import operator
#input
l = [['Cautus  B.V.', 'plein 92', '1129008', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['Cautus  B.V.', 'plein 92', '1129008', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'] ,
['De company', 'tiellaan 42', 'KD0022232', '13', 'AVB', 'Geachte heer Tigch', 'De heer I. Tigch'] ,
['De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch'] ,
['Slever ', 'klopt 42', 'KD2220115', '17', 'AVB', 'Geachte heer Slever', 'De heer T. Slever']]
#script
sortkey = operator.itemgetter(1,4)
l_clean = sorted(l,key=sortkey)

l_final = [(k, list(v)) for k,v in groupby(l_clean, key = operator.itemgetter(1))]

for k,v in l_final:
   info_rest = v[0][:4]+v[0][5:]
   info_combine = map(operator.itemgetter(4),v) 
   print k,info_combine,info_rest 
```

基本上，我根据特定键对所有数据进行排序。这样您就不会在排序阶段丢失任何数据。然后我更改了密钥`groupby`以与新的数据布局保持一致并打印结果。

# java - JavaFX 类控制器场景参考

> ID：12935953
> 
> 赞同：9
> 
> 时间：2012-10-17T13:53:41.547
> 
> 标签：java, javafx-2, javafx, fxml

有什么方法可以从关联的类控制器中获取 FXML 加载文件的场景对象。

我正在做这样的事情：

```
@FXML
private AnchorPane anchor; 

Scene scene = anchor.getScene(); 
```

但我想要一个不引用 AnchorPane 控件的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T14:16:51.280

为什么不？Controller是一个抽象类，除非你故意让他知道，否则他不知道UI。

节点（包括 AnchorPane）是另一回事，它们几乎不存在于场景图之外。因此，向 Node 询问他的父母或场景是完全可以的。

如果您仍想单独处理，还有以下方法：

1.  您可以在加载程序之后创建自定义控制器并设置场景。请注意，在`initialize()`调用时它尚未初始化。

    ```
    public class MyController {
        private void Scene scene;
        public void setScene(Scene scene) { this.scene = scene; }

    }

    // loading code
    FXMLLoader fxmlLoader = new FXMLLoader();
    AnchorPane root = (AnchorPane) fxmlLoader.load(getClass().getResource("MyApp.fxml"));
    MyController myController = (MyController) fxmlLoader.getController();
    myController.setScene(scene); 
    ```

2.  您可以创建一个自定义 fxml 控件，该控件将包含控制器，他可以`getScene()`自己调用。在此处查看示例：[https ://stackoverflow.com/a/10718683/1054140](https://stackoverflow.com/a/10718683/1054140)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-19T13:56:02.513

我试过你的答案，但没有用，我在这里找到了原因：
[JavaFX：如何在初始化期间从控制器获取阶段？](https://stackoverflow.com/questions/13246211/javafx-how-to-get-stage-from-controller-during-initialization)
评论后：

```
// loading code 
```

不要使用静态加载方法

```
AnchorPane root=(AnchorPane) FXMLLoader.load(getClass().getResource("MyApp.fxml")); 
```

而是使用实例化加载器的方法

```
AnchorPane root=(AnchorPane) fxmlLoaded.load(getClass().getResource("MyApp.fxml")); 
```

# javascript - Highstock 为动态添加的系列添加点

> ID：12935954
> 
> 赞同：1
> 
> 时间：2012-10-17T13:53:43.323
> 
> 标签：javascript, highstock

我正在尝试创建一个 highstock 图表：

1.  使用一个系列渲染初始图表
2.  在一个事件（按钮单击）之后添加另一个系列
3.  通过添加点（到两个系列）来动态更新。

1 和 2 有效，但向新（动态）添加的系列添加点似乎不起作用，请参阅：http: [//jsfiddle.net/albertsikkema/KGTBB/1/](http://jsfiddle.net/albertsikkema/KGTBB/1/)

当我在图表创建时添加系列时，添加点工作，所以我猜它与如何添加系列有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:21:45.443

问题是您的导航器是chart.series 中的一个对象。

如果您控制台日志 chart.series 您将看到：

*   0 = 绘制线 A
*   1 = 导航器
*   2 = 绘制线 B

因此，您正在尝试将点添加到导航器系列中，而是执行以下操作：

```
 chart.series[0].addPoint([x, y], true, true);                
   chart.series[2].addPoint([x, y], true, true); 
```

或者，更好的方法是用他们的名字来定位你的系列。

# java - 不能从包含基类的 lst 转换和对象

> ID：12935955
> 
> 赞同：0
> 
> 时间：2012-10-17T13:53:47.823
> 
> 标签：java

我有一个空的抽象基类

```
abstract class Base{
    Base(){}
} 
```

然后我有几个类扩展了这个基类

```
class A extends Base{

} 
```

然后我将这些类实例化并放入列表中。

```
 A it = new A();
 ArrayList<Base> list = new ArrayList<Base>();
 list.add(it);  // add A object 
```

然后我想做类似的事情

```
 for(Base msg : List){
       if( msg instanceof A){
             A obj = (A)msg; 
        }

    }
But I'm getting errors. 
```

我究竟做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:56:42.940

不要检查它是否为 A。考虑一下

```
abstract class Base{
    Base(){}
    void doSomething() { System.out.println("AwesomePossum"); }
}

class A extends Base {
    @Override void doSomething() { System.out.println("Frankie O'Malley"); }
} 
```

然后，当你迭代时，而不是做类似的事情

```
for(Base msg : list) {
    if(msg instanceof A) // BAD
} 
```

做这个：

```
for(Base msg : List) {
    msg.doSomething();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:57:31.530

我通常希望`Base`声明由 提供的方法`A`，因此您可以拉出`Base`引用并使用它，*而不管*实现是`A`.

如果您列表中的类型不遵守通用接口合同，我会质疑您为什么将它们放在一个列表中。这会让生活变得非常困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:58:11.770

```
 for(Base msg : List){<---List is used variable name is list 
```

您没有使用变量`list`进行迭代，而是使用`List`. 这就是您遇到错误的原因。

它应该是

```
for(Base msg : list) 
```

# php - PHP JQuery 表单验证

> ID：12935956
> 
> 赞同：-1
> 
> 时间：2012-10-17T13:53:52.893
> 
> 标签：php, jquery, mysql

如果我想创建一个表单并验证它。如果验证成功，我会将这些数据插入到一个mysql数据库中。最好的方法是通过 HTML 创建一个表单，然后在 jQuery 中验证它并通过 PHP 将 post 方法中的数据提交到 mysql 数据库中？

欢迎任何简单的例子（提交名字和姓氏，两个字段都必须输入）。

我尝试了一些示例，但是当验证为假并且您丢失了文本框字段中的所有数据时，它们会重新加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:07:36.167

在我看来，在插入/更新语句之前仍然需要服务器端验证以避免损坏的数据。

您可以使用 ajax 调用 PHP 脚本。这样，您将不会重新加载页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:57:44.540

我的项目中的示例：

```
 function initContactForm(){
        $('#contact-form').validate({
            errorClass: 'invalid-input',
            validClass: 'valid-input',
            debug: false,
            rules: {
                name: {
                    required: true,
                    minlength: 3
                },
                sername: {
                    required: true,
                    minlength: 3
                },
                company_name: {
                    required: true,
                    minlength: 3
                },
                phone: {
                    required: true,
                    digits: true,
                    minlength: 7
                },
                mail: {
                    required: true,
                    email: true
                },
                message: {
                    required: true,
                    minlength: 20
                }
            },
            submitHandler: function(data){
                $('#loading').ajaxStart(function(){
                    $(this).show('fast');
                    $('.register-btn').hide('fast');
                });
                $('#loading').ajaxStop(function(){
                    $(this).hide('fast')
                });
                $('#contact-form').ajaxSubmit(function(html){
                    $('.control-group').animate({ opacity: 0.2 }, 500, function(){ opacity: 1 });
                    $('#formHandler').html(html);
                    $('#formHandler').show('fast');
                    $('.alert').bind('close', function(){
                        $('#contact-form').each(function(){ this.reset(); });
                        $('.controls input').removeClass();
                        $('.controls textarea').removeClass();
                        $('.register-btn').show('fast');
                        $('.control-group').animate({ opacity: 1 }, 500, function(){ opacity: 0.2 });
                    });
                });
            }
        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:11:04.020

每当您接受用户数据时，*都应*使用 JavaScript 对其进行验证，并且**必须**使用 PHP 对其进行验证。高级用户可以在他们的浏览器中禁用 JavaScript，这意味着他们可以忽略任何 JavaScript 或 jQuery 验证。

例如，此页面将使用客户端 JavaScript*和*PHP 验证数据：

```
<?php
//  index.php
$firstname_val = '';
$firstname_text = '';

//  if the firstname field isn't blank...
if(len(trim($_POST['firstname'])) > 0) {
    //  insert into your database
//  if the firstname field _is_ blank...
} else {
    //  load the page
    $firstname_val = 'This value cannot be blank';
      //  store the old value and re-insert it into the input field below
      $firstname_text = htmlspecialchars($_POST['firstname']);
}

?><!doctype html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script>
$(document).ready(function() {
    $("#go").click(function(e) {
        //  if the Firstname input isn't blank...
        if($("#firstname_field").val().trim().length > 0) {
            //  clear the error message
            $("#firstname_val").text("");

            //  submit the form
            $("#form").submit();
        //  otherwise, if it is blank...
        } else {
            //  prevent the form submission
            e.preventDefault();
            //  show an error message
            $("#firstname_val").text("This value cannot be blank");
        }
    });
});
</script>
</head>
<body>
<form action="index.php" method="post" id="form">
<input type="text" name="firstname" id="firstname_field" value="<?php echo $firstname_text;?>" /><br />
<span style="color:#f00;" id="firstname_val"><?php echo $firstname_val; ?></span><br />
<input type="submit" value="Go" id="go" />
</form>
</body>
</html> 
```

# java - 这个 Paypal 接口服务有什么问题？

> ID：12935963
> 
> 赞同：0
> 
> 时间：2012-10-17T13:54:14.493
> 
> 标签：java, soap, paypal

这是我第一次尝试生成 Web 服务客户端。我不知道如何纠正这个错误。

我有一个 PayPalAPIInterfaceService.java 和 Netbeans IDE 通知我这是一个错误：

```
public PayPalInterfaceService(WebServiceFeature...features){

super(__getwsdlLocation(), PAYPALINTERFACESERVICE_QNAME, features); 
```

这是错误消息：

> 找不到符号符号：method_getWsdlLocation() 位置：类 ebay.api.paypalapi.PayPalAPIInterfaceService

以及来自 Tomcat 的错误日志：

```
17-Oct-2012 06:24:16 org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class com.sun.xml.ws.transport.http.servlet.WSServletContextListener
com.sun.xml.ws.transport.http.servlet.WSServletException: WSSERVLET11: failed to parse runtime descriptor: java.lang.NoClassDefFoundError: org/apache/axis/encoding/AnyContentType
        at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:139)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3934)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4429)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:630)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:514)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1288)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
        at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1473)
        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:824)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:350)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:196)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NoClassDefFoundError: org/apache/axis/encoding/AnyContentType
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1850)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:890)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1354)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.getImplementorClass(DeploymentDescriptorParser.java:545)
        at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:223)
        at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147)
        at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:124)
        ... 36 more
Caused by: java.lang.ClassNotFoundException: org.apache.axis.encoding.AnyContentType
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
        ... 50 more 
```

我想知道原因是否是由于我从本地驱动器导入的 wsdl 的 url 位置？我必须在某个地方做一些修改。

```
@WebServiceClient(name = "PayPalAPIInterfaceService", targetNamespace = "urn:ebay:api:PayPalAPI", wsdlLocation = "file:/C:/Documents%20and%20Settings/Karen/Desktop/ShoppingCart/src/conf/xml-resources/web-services/NewWebServiceFromWSDL/wsdl/PayPalSvc.wsdl")
public class PayPalAPIInterfaceService
    extends Service 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:35:46.010

线索在...

```
java.lang.NoClassDefFoundError: org/apache/axis/encoding/AnyContentType 
```

您缺少调用 Web 服务所需的轴 jar。

[http://www.jarfinder.com/index.php/java/info/org.apache.axis.encoding.AnyContentType](http://www.jarfinder.com/index.php/java/info/org.apache.axis.encoding.AnyContentType)

如果您使用的是 Tomcat，jar 也应该在 web-inf/lib 中

# tfs - 是否可以自动停止在 TFS 中构建？

> ID：12935964
> 
> 赞同：2
> 
> 时间：2012-10-17T13:54:17.527
> 
> 标签：tfs, tfsbuild, tfs-alerts, tfs-events

我希望能够以编程方式停止构建某些构建定义。首先，我考虑创建一些事件处理程序（soap 服务或 TFS 插件）来解决这个问题。但不幸的是，TFS 中似乎没有适当的事件（在构建刚开始时会引发）。

有没有办法解决这个问题？

谢谢！

埃琳娜

**更新：** *问题已通过在 TFSBuild.proj 的第一个目标中调用自定义构建任务解决*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:55:55.847

大多数构建监视器似乎会定期轮询 TFS 以查看是否有任何新构建，这显然对您不起作用，因为取消构建会有太多延迟。

我建议您修改构建模板以在开始时执行 Web 请求。或者只是将取消构建的逻辑放入实际模板中。

我可以问一下为什么您仍然需要取消构建吗？可能有更好的选择。

# jakarta-ee - 如何在 EJB/MDB 调用期间更改用户主体？

> ID：12935965
> 
> 赞同：3
> 
> 时间：2012-10-17T13:54:17.213
> 
> 标签：jakarta-ee, authentication, ejb, jaas

我有一个应用程序，其中一些操作由 MDB 执行。这些MDB 都使用`@RunAs(SYSTEM)`注解将它们标记为系统元素。

其中一个 MDB 必须运行一些受保护的代码，显然`@RolesAllowed(WORKSPACE)`，`SYSTEM`角色没有这些代码，但是`user`启动该过程的（人类，请注意）具有这些代码。

所以，我的问题很简单：有什么方法（例如通过异步调用）让我的 MDB 将其主体更改为 my`user`而不是`SYSTEM`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:49:23.637

我假设*SYSTEM*是一个角色，而对于*用户*，您真的是指发送例如 JMS 消息来表示 MDB 正在侦听的队列的用户？

如果您想设置具有与该用户完全相同的角色的 Principal（基本上是传播用户的安全上下文或从 MDB 中进行容器登录），那么很遗憾，这是不可能的。有一个要求标准化 EJB 中的容器登录（请参阅 EJB 规范 JIRA），但现在这对您没有帮助。

一种解决方法可能是使用 JAX-RS 资源，它可以使用 Servlet API 来触发任何给定用户的登录。您必须在这里小心，不要造成巨大的安全漏洞（例如，仅允许通过用户名登录），但这是一种选择。

如果您只需要角色*WORKSPACE*，那么您不能简单地使用第二个@RunAs 吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:30:21.730

就像 Mike Braun 回答建议的那样，根据 JavaEE 规范这是**不可能的。**

这是不幸的。但是，不那么不幸的是，有一些代码可以做这种事情（特定于应用程序服务器），隐藏在`@RunAs`. 在 Glassfish 中，该特定代码在[`com.sun.enterprise.security.auth.login.LoginContextDriver`](http://www.jarvana.com/jarvana/view/org/glassfish/security/security/3.1.1/security-3.1.1-sources.jar!/com/sun/enterprise/security/auth/login/LoginContextDriver.java?format=ok)类中，尤其是在其`LoginContextDriver#loginPrincipal`方法中。

所以，为了让一部分代码使用特定的主体，我定义了一个接口

```
public interface Sudoer {
    public <Result> Result sudo(String user, SudoOperation<Result> operation);
} 
```

我为 Glassfish 实现的如下：

```
public class GlassfishSudoer implements Sudoer {
    @Override
    public <Result> Result sudo(String user, SudoOperation<Result> operation) {
        try {
            LoginContextDriver.loginPrincipal(user, "autocat");
            return operation.perform();
        } catch (Exception e) {
            throw new UnableToSudoException(e);
        } finally {
            LoginContextDriver.logout();
        }
    }
} 
```

并且在使用它时，想要有一些代码“sudoed”的部分只需要提供 SudoOperation 的实现，比如

```
 component.sudo(userLogin, new SudoOperation<Void>() {
        public Void perform() {
            /* do some sudoed code */
            return null;
        }
    }); 
```

这种方法的优点是，如果给定的应用程序服务器有一些代码要处理`@RunAs`，您可以使用该代码来实现您自己的 sudoer（我正在考虑将其提取到 sudo-ejb 库中......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:32:26.230

看看： [这里的一个最近的问题](https://stackoverflow.com/questions/12779566/login-a-user-programmatically-via-jaas)

它是一种更通用的方法。为我在 JBoss 工作。

# css - 在 IE 怪癖模式下垂直对齐 li 标签内的多行文本

> ID：12935967
> 
> 赞同：0
> 
> 时间：2012-10-17T13:54:23.870
> 
> 标签：css, internet-explorer, vertical-alignment, quirks-mode

我试图找到一个最跨浏览器的解决方案来垂直对齐可以跨越 li 标签内多行的文本。这是一个例子！

![确定对齐](../Images/bbde795778fa208ad31350becb66f1f3.png)

我阅读了很多关于该主题的内容，并根据少数线程组装了可以在以下小提琴[http://jsfiddle.net/xRC3y/15/](http://jsfiddle.net/xRC3y/15/)上找到的代码。这适用于大多数浏览器，但是在 IE 上，当通过开发人员工具以 quirks 模式推送时，它呈现如下：

![严重对齐](../Images/3b7228ff630b75229917d9416972f2b0.png)

我正在努力获得一个在 IE 怪癖模式下也可以工作的解决方案，感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:03:40.203

我最近遇到了类似的问题。这个问题可能有一个更优雅的解决方案，但我解决问题的方法是使用一些 Javascript/jQuery 有条件地设置元素的样式。不幸的是，这需要您通过将类 .vCenterIE7（或其他）添加到要居中的元素并将另一个类 .vCenterIE7Rel 添加到要居中的元素来更改 HTML 标记。

另外，我知道这不是检测用户是否在使用 IE7 的完全可靠的方法（modernizr 更可靠），但是来吧，如果您仍在使用 IE7，您可能没有操纵您的用户代理设置。

脚本：

```
function vCenterIE7() {
if (navigator.userAgent.toLowerCase().indexOf('msie 7') > -1) {
    var els = $('.vCenterIE7');
    for (var i = 0; i < els.length; i++) {
            var c = els.eq(i);
            var b = c.closest('.vCenterIE7Rel');
            var mtop = b.height() / 2;
            mtop -= c.height() / 2;
            c.css('margin-top',mtop);
    }
}
} 
```

# wpf - 为什么 WPF ComboBox 样式不符合预期？

> ID：12935968
> 
> 赞同：1
> 
> 时间：2012-10-17T13:54:27.460
> 
> 标签：wpf, combobox, styling

我有一个带有 ComboBox 的 WPF 应用程序，我想在其中设置项目的样式，但会根据选择的项目出现意外行为。

以下 XAML 片段演示了该问题：

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Page.Resources>
    <Style x:Key="ItemStyle" TargetType="{x:Type ComboBoxItem}">
        <Style.Triggers>
            <Trigger Property="Content" Value="ABC">
                <Setter Property="FontStyle" Value="Oblique"/>
                <Setter Property="Foreground" Value="Red"/>
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="BoxStyle" TargetType="{x:Type ComboBox}">
        <Style.Triggers>
            <Trigger Property="Text" Value="ABC">
                <Setter Property="FontStyle" Value="Italic"/>
                <Setter Property="Foreground" Value="Red"/>
            </Trigger>
        </Style.Triggers>
    </Style>
  </Page.Resources>
  <Border Width="200">  
      <ComboBox Style="{StaticResource BoxStyle}"
                ItemContainerStyle="{StaticResource ItemStyle}"
                Height="20">
          <ComboBoxItem>ABC</ComboBoxItem>
          <ComboBoxItem>DEF</ComboBoxItem>
          <ComboBoxItem>GHI</ComboBoxItem>
      </ComboBox>
  </Border>
</Page> 
```

这将显示一个包含三个项目的简单 ComboBox；ABC、DEF 和 GHI。请注意，ABC 显示在下拉列表中，带有倾斜的红色文本，并且在选择时也会显示在选择框中。

但是，如果我再次打开下拉列表，所有 3 个项目都显示为斜红色和红色。

如果选择了 DEF 或 GHI 项目，则这些项目以正常字体显示，黑色并在打开下拉列表时再次正确显示 - ABC 仍显示倾斜的红色。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:09:03.127

这是因为[Dependency Property Value Precedence](http://msdn.microsoft.com/en-us/library/ms743230.aspx "DP 值优先级")。When ABC is selected the `ComboBoxItem`s in the DropDown inherit the `FontStyle`and `Foreground`from the `ComboBox`.

这将修复代码，因为`ComboBoxItem`s 不会从 ComboBox 继承 FontStyle 和 Foreground：

```
 <Page.Resources>
            <Style x:Key="ItemStyle"
                   TargetType="{x:Type ComboBoxItem}">
                <Setter Property="FontStyle"
                        Value="Normal" />
                <Setter Property="Foreground"
                        Value="Black" />
                <Style.Triggers>
                    <Trigger Property="Content"
                             Value="ABC">
                        <Setter Property="FontStyle"
                                Value="Oblique" />
                        <Setter Property="Foreground"
                                Value="Red" />
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style x:Key="BoxStyle"
                   TargetType="{x:Type ComboBox}">
                <Style.Triggers>
                    <Trigger Property="Text"
                             Value="ABC">
                        <Setter Property="FontStyle"
                                Value="Italic" />
                        <Setter Property="Foreground"
                                Value="Red" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Page.Resources>
        <Border Width="200">
            <ComboBox Style="{StaticResource BoxStyle}"
                      ItemContainerStyle="{StaticResource ItemStyle}"
                      Height="20">
                <ComboBoxItem>ABC</ComboBoxItem>
                <ComboBoxItem>DEF</ComboBoxItem>
                <ComboBoxItem>GHI</ComboBoxItem>
            </ComboBox>
        </Border> 
```

# c# - 为什么正则表达式与 unicode 字符不匹配

> ID：12935972
> 
> 赞同：0
> 
> 时间：2012-10-17T13:54:45.940
> 
> 标签：c#, regex

因此，我试图在 c# (.NET) 中编写一个正则表达式，以匹配可能在字符串中找到的一系列 unicode 字符。作为一个简单的测试，我尝试匹配单个 unicode 字符 \u8221，即字符 ”。如果我使用正则表达式字符串“””，我会得到一个匹配包含该字符的测试字符串。但是，如果我将我的正则表达式更改为“\u8221”，我就找不到匹配项。任何人都知道为什么会这样以及如何让它发挥作用？我一直在把头发拉出来。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:59:15.150

您没有匹配正确的字符。 [`\u`需要十六进制的字符代码](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)。试试`\u201D`吧。

# asp.net - 空缓冲区错误

> ID：12935976
> 
> 赞同：1
> 
> 时间：2012-10-17T13:54:52.173
> 
> 标签：asp.net, memcached, session-state, enyim.caching

我刚刚注意到，在运行应用程序时，我会定期收到一条错误消息。

```
Server Error in '/' Application.
Buffer cannot be null.
Parameter name: buffer
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentNullException: Buffer cannot be null.
Parameter name: buffer 
```

堆栈跟踪：

```
 [ArgumentNullException: Buffer cannot be null.
Parameter name: buffer]
   System.IO.MemoryStream..ctor(Byte[] buffer, Boolean writable) +12627669
   MemcachedProviders.Session.Common.Deserialize(HttpContext context, Byte[] serializedItems, Int32 timeout) +47
   MemcachedProviders.Session.Db.SQLDbOperations.GetItem(String strSessionId, String strApplicationName, Int32 iTime, HttpContext context, Boolean lockRecord, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags) +1221
   MemcachedProviders.Session.SessionStateProvider.GetItemExclusive(HttpContext context, String id, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actions) +1069
   System.Web.SessionState.SessionStateModule.GetSessionStateItem() +178
   System.Web.SessionState.SessionStateModule.PollLockedSessionCallback(Object state) +299

[HttpException (0x80004005): Exception of type 'System.Web.HttpException' was thrown.]
   System.Web.SessionState.SessionStateModule.EndAcquireState(IAsyncResult ar) +11513726
   System.Web.AsyncEventExecutionStep.OnAsyncEventCompletion(IAsyncResult ar) +107 
```

我们的应用程序使用 Enyim memcached 和 MemcachedProviders 并在负载平衡的环境中运行。

该应用程序做了很多管理 PDF 报告和编译响应然后生成最终报告 pdf 的工作。所以我们经常使用流。

这个问题似乎只影响我们的管理应用程序，因为我们还公开了一个 Web 服务，而且在查看服务定义和 WSDL 时我从来没有遇到过错误。

通过查看数据库中的会话表，我可以看到它们正在被创建，但是它们中的许多在 SessionItems 字段中具有空值，并且锁定标志设置为 1。数据时间戳似乎与空缓冲区错误发生相关。

**这是缓冲区设置不正确或最大化的情况吗？**

# mysql - MySQL按不同计数排序

> ID：12935978
> 
> 赞同：4
> 
> 时间：2012-10-17T13:55:01.317
> 
> 标签：mysql, sorting

我有一个选择查询，它产生以下内容：

```
选择customers.city，books.title                                                                   
来自借来的、书籍、客户                                                                         
借出的.userID = 客户.userID                                                                
和出借的.bookID = books.bookID
+------------+-------------------+
| 城市| 标题 |
+------------+-------------------+
| 哈罗盖特 | 十字兔 |
| 哈罗盖特 | PHP 和 MySQL Web 开发 |
| 哈罗盖特 | PHP 和 MySQL Web 开发 |
| 怀特黑文 | 希腊神话 |
| 怀特黑文 | 恐龙翱翔 |
| 怀特黑文 | 恐龙翱翔 |
| 出售 | 魔术技巧 |
| 出售 | 魔术技巧 |
| 出售 | 魔术技巧 |
| 出售 | 恐龙翱翔 |
| 出售 | 恐龙翱翔 |
+------------+-------------------+
11 行（0.00 秒）

```

我想为每个城市找到最受欢迎的标题，所以我做了以下事情：

```
按城市分组
按计数排序（不同的标题） desc

```

但是，这不会产生正确的结果。我得到：

```
+------------+-------------------+
| 城市| 标题 |
+------------+-------------------+
| 出售 | 恐龙翱翔 |
| 怀特黑文 | 恐龙翱翔 |
| 哈罗盖特 | PHP 和 MySQL Web 开发 |
+------------+-------------------+
3 行一组（0.00 秒）

```

这似乎是按字母顺序排序的，而不是按受欢迎程度排序的。获得数据后，我认为按照我的要求对其进行排序很容易，但事实并非如此。我是否需要进行某种联接或更复杂的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:00:27.873

尝试用`distinct title`just替换`title`，这应该可以解决您的问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:31:59.787

我将分 3 步解决这个问题。首先获取每个城市的每本书的数量。

```
select customers.city, books.title, count(books.title) as count
from loaned, books, customers
where loaned.userID = customers.userID
and loaned.bookID = books.bookID
group by customers.city, books.title 
```

此查询将返回以下行。

```
+------------+-------------------------------+-------+
| city       | title                         | count |
+------------+-------------------------------+-------+
| Harrogate  | The cross rabbit              | 1     |
| Harrogate  | PHP and MySQL web development | 2     |
| Whitehaven | Greek Mythology               | 1     |
| Whitehaven | Dino-soaring                  | 2     |
| Sale       | Magic tricks                  | 3     |
| Sale       | Dino-soaring                  | 2     |
+------------+-------------------------------+-------+ 
```

使用该数据，然后我将使用它对每个计数最多的城市进行分组。

```
select city, max(count) as count
from 
(
  select customers.city , books.title, count(books.title) as count
  from loaned, books, customers
  where loaned.userID = customers.userID
  and loaned.bookID = books.bookID
  group by customers.city, books.title
) as city_book_max_count
group by city 
```

这将返回这些行，

```
+------------+-------+
| city       | count |
+------------+-------+
| Harrogate  | 2     |
| Whitehaven | 2     |
| Sale       | 3     |
+------------+-------+ 
```

使用 2 个表中的数据，我们可以将它们连接到 city 和 count，以获取在两个表上匹配的相应书籍。

```
select city_book_count.city, city_book_count.title
from 
(
  select customers.city , books.title, count(books.title) as count
  from loaned, books, customers
  where loaned.userID = customers.userID
  and loaned.bookID = books.bookID
  group by customers.city, books.title
) as city_book_count
join
(
  select city, max(count) as count
  from 
  (
    select customers.city , books.title, count(books.title) as count
    from loaned, books, customers
    where loaned.userID = customers.userID
    and loaned.bookID = books.bookID
    group by customers.city, books.title
  ) as city_book_count_temp
  group by city
) as city_book_max_count
on city_book_count.city = city_book_max_count.city
  and city_book_count.count = city_book_max_count.count 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:05:38.677

感谢所有回答的人。由于这是一个测试问题，我不想“剪切和粘贴”其他人的工作，而是使用他们的逻辑进行我自己的查询。这是我得到的：

```
选择城市，标题
从 （
    选择customers.city 作为城市，books.title 作为标题，count(books.title) 作为cnt
    来自书籍、客户、借来的
    借出的.userID = 客户.userID
    和出借的.bookID = books.bookID
    按标题、城市分组
    按cnt desc订购）作为tbl
按城市分组

```

结果：

```
+------------+-------------------+
| 城市| 标题 |
+------------+-------------------+
| 哈罗盖特 | PHP 和 MySQL Web 开发 |
| 出售 | 魔术技巧 |
| 怀特黑文 | 恐龙翱翔 |
+------------+-------------------+
3 行一组（0.00 秒）

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:05:17.400

我正在删除客户表，因为该表没有输出

```
select customers.city , books.title , count(books.title) Total                       
from loaned, books, customers                                                                         
where loaned.userID = customers.userID                                                       
and loaned.bookID = books.bookID 
    group by customers.city , books.title order by 3 desc 
```

# php - Symfony 2 中默认独白的自定义独白处理程序

> ID：12935979
> 
> 赞同：22
> 
> 时间：2012-10-17T13:55:04.203
> 
> 标签：php, symfony, monolog

[我想在Symfony](http://en.wikipedia.org/wiki/Symfony) 2的默认独白中添加一个自定义处理程序。

在我的`config.yaml`文件中，我有：

```
monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        myHandler:
            type:  Acme\MyBundle\Monolog\MyCustomHandler
            level: error 
```

我的班级如下所示：

```
// Acme\MyBundle\Monolog\MyCustomHandler
use Monolog\Logger;
use Monolog\Handler\SocketHandler;
use Monolog\Formatter\LineFormatter;

class MyCustomHandler extends AbstractProcessingHandler
{
    ...
} 
```

但即使在我填写课程之前，我也会收到一个错误：

> 为处理程序“myHandler”提供的处理程序类型“acme\mybundle\monolog\mycustomhandler”无效

如何在不创建新的独白服务的情况下将自定义处理程序添加到默认独白？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-17T14:52:01.367

试试这个：

```
monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        custom:
            type: service
            id: my_custom_handler

services:
    my_custom_handler:
        class: Acme\MyBundle\Monolog\MyCustomHandler 
```

如果您想将其用作默认处理程序，那么您应该更改我上面写的一些独白部分。

```
monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
            handler: custom
        custom:
            type: service
            id: my_custom_handler 
```

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-19T09:14:12.843

我刚刚发现它`Monolog`附带了一组不同的处理程序，所以你可能想使用其中一个而不是自己编写。我正在使用`LogEntriesHandler`日志记录到 logentries.com，但这里记录的还有更多：[https ://github.com/Seldaek/monolog#log-specific-servers-and-networked-logging](https://github.com/Seldaek/monolog#log-specific-servers-and-networked-logging)

我的 Symfony2 配置如下所示：

```
monolog:
    main:
        type:  fingers_crossed
        level: debug
        handler: nested
    custom:
        type: service
        id: monolog.handler.logentries
        level: error

services:
    monolog.handler.logentries:
        class: Monolog\Handler\LogEntriesHandler
        arguments:
            token: %logentries_token% 
```

# jquery - 如何在django框架中使用jquery文件上传插件和python

> ID：12935980
> 
> 赞同：2
> 
> 时间：2012-10-17T13:55:06.133
> 
> 标签：jquery, python, django, file-upload, multifile-uploader

我是 jquery 领域的新手，我想在我的网站上使用 jquery 文件上传插件，就像在这个演示中描述的那样： [jquery File Upload Demo](http://blueimp.github.com/jQuery-File-Upload/) 我不知道如何在 django 框架中使用它和 python 编程语言可以任何人请帮助我添加了插件，我已经在模板中使用了它，但在其他所有内容之前，页面看起来像这样： [问题](http://up.vatandownload.com/images2/5x8vqq4swew6wnau1whx.png)

我不知道如何修复这个错误，浏览按钮不应该在这里，也不应该有输入行，这允许用户只上传一个文件我真的很困惑，里面有很多文件互联网，但他们没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:27:21.520

不完全确定它会有所帮助，但就在前几天，我制作了一个[示例 django 项目](https://github.com/yaniv-aknin/django-s3upload)，该项目利用 jQuery File Upload 和 Amazon S3 的新 CORS 支持将文件直接上传到 django 项目中的 S3。

也许该代码示例（以及随附`README`的...）可能与您相关。

# debugging - 为什么在表达式引擎 2.5.3 中，当我的索引页面出现时，我会得到白屏？

> ID：12935990
> 
> 赞同：1
> 
> 时间：2012-10-17T13:55:40.113
> 
> 标签：debugging, templates, expressionengine

我在 ExpressionEngine 网站上工作，我安装了所有模板、频道和频道字段。我还在模板中添加了频道标签以指向相应的频道。唯一显示的页面是主页，但是当您导航到其他页面时，除了白色之外什么都没有。我花了一整天的时间试图调试这个问题，但没有成功。那么有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:44:03.927

我确实发现了这个问题。我的频道、模板和页面标题不一样。一旦我做了同样的事情，他们就开始加载了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:36:55.670

首先，确保在您的**index.php**文件`$debug`中设置为。这样，您应该会看到任何 PHP 错误。`1`

 **您是否[从您的 URL 中删除 index.php](http://expressionengine.com/user_guide/general/remove_index.php.html)？如果是这样，可能是您的服务器不合作，特别是如果您从子目录运行 EE，或者将 PHP 作为 CGI 运行。请参阅链接文档页面上的注释以解决这些情况。**

# conditional - 排版：图像内容对象的条件

> ID：12935998
> 
> 赞同：0
> 
> 时间：2012-10-17T13:56:20.760
> 
> 标签：conditional, typo3, typoscript

我有这个代码：

```
customers = CONTENT
                customers {
                    table = tx_nmshowroom_customers
                    select {
                        pidInList = {$plugin.tx_nmshowroom_pi1.pid.showroomData}
                        recursive = 10
                        where = FIND_IN_SET(uid, ###CUSTOMERSLIST###)
                        markers {
                            CUSTOMERSLIST.field = tx_nmshowroom_customers
                        }
                    }

                    customersList = COA
                    customersList {

                        10 = HTML
                        10.value.field = name
                        10.value.typolink{
                                    parameter = {$plugin.tx_nmshowroom_pi1.pid.customersDetailView}
                                    additionalParams = &tx_nmshowroom_pi1[customeruid]={field:uid}
                                    additionalParams.insertData = 1
                        }

                        10.stdWrap {
                            wrap = <p class='list'>|</p>
                            required = 1
                        }

                    }

                    renderObj < .customersList
                    renderObj.stdWrap {
                            wrap = <div class='label'><p>Auftrag:</p></div><div>|</div>
                            required = 1
                    }       

                } 
```

select 也可以不返回值，这意味着没有找到记录。

在这种情况下，我想用文本或另一个图像替换客户对象。

问题是，我不知道如何在“客户”上写条件：

`customers.override.if.....`完全不知道。

有谁能够帮我？

非常感谢您提前。戴维德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:00:30.070

我会建议这个解决方案：

```
customers.stdWrap.ifEmpty = Sorry, there is no content here 
```

如果你需要一个内容对象：

```
customers.stdWrap.ifEmpty.cObject = TEXT
customers.stdWrap.ifEmpty.cObject.value = Sorry, there is no content here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:29:14.363

```
customers = COA
customers {
  10 = CONTENT
  10 {
    table = tx_nmshowroom_customers
    select {
      pidInList = {$plugin.tx_nmshowroom_pi1.pid.showroomData}
      recursive = 10
      where = FIND_IN_SET(uid, ###CUSTOMERSLIST###)
      markers {
        CUSTOMERSLIST.field = tx_nmshowroom_customers
      }
    }

    renderObj = COA
    renderObj {
      10 = HTML
      10 {
        value.field = name
        value.typolink{
          parameter = {$plugin.tx_nmshowroom_pi1.pid.customersDetailView}
          additionalParams = &tx_nmshowroom_pi1[customeruid]={field:uid}
          additionalParams.insertData = 1
        }

        stdWrap {
          wrap = <p class='list'>|</p>
          required = 1
        }
      }

      wrap = <div class='label'><p>Auftrag:</p></div><div>|</div>
      required = 1
    }
  }

  20 = TEXT
  20 {
    if.isFalse.numRows < customers.10
    value = [substitute content]
  }
} 
```