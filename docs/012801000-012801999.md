# StackOverflow 问答 12801000-12801999

# grep - 如何在 linux 中从 mashup 数据文本文件中 grep IP 地址

> ID：12801003
> 
> 赞同：1
> 
> 时间：2012-10-09T13:20:32.513
> 
> 标签：grep

例如：

```
216.93.125.232 默认虚拟主机 97070789      
虚拟主机 216.93.125.232 默认 9705329
默认 9705329
9705329 默认虚拟主机 虚拟主机 216.93.125.232

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:24:32.763

一种使用方式`GNU grep`：

```
grep -oP "([0-9]{1,3}\.){3}[0-9]{1,3}" file.txt 
```

结果：

```
216.93.125.232
216.93.125.232
216.93.125.232 
```

# entity-framework - 实体框架取消长时间运行的查询

> ID：12801008
> 
> 赞同：3
> 
> 时间：2012-10-09T13:20:40.750
> 
> 标签：entity-framework, task-parallel-library, async-await

我是 TPL 的新手。我正在使用 TPL 对数据库进行一些异步调用。下面的 GetDocumentAsync 方法被多次调用，并且很好地将任务卸载到不同的线程上，以保持 UI 线程的响应。

这里有两个目标：1）保持 UI 线程响应 2）让用户能够中止请求。

我设法中止了请求，但是我无法中止实体框架已经放入数据库的请求并且查询正在数据库级别运行..或者它甚至还没有开始。

因此，GetDocuments 方法仍然返回有关已取消任务的文档。

有没有我可以中止来自 EF 的请求？我可以在我的实施中做得更好吗？

```
 Entities _context = new Entities();

    CancellationTokenSource _tokenSource = new CancellationTokenSource();

    public async void GetDocumentsAsync(string userName)
    {
        IList<Document> results;
        try
        {
            results = await 
            Task<List<Document>>.Factory.StartNew(() =>
            {
                _tokenSource.Token.ThrowIfCancellationRequested();
                return GetDocuments(userName);
            }, _tokenSource);

        }
        catch (OperationCanceledException ex)
        {
            Debug.WriteLine(string.Format("Task canceled for user {0} on thread", userName ));
        }

        if(!_tokenSource.IsCancellationRequested)
        {
            // results is used to update the UI 
        }
    }

    public void Abort()
    {
        _tokenSource.Cancel();
    }

    public List<Document> GetDocuments(string userName)
    {
        //I am using the connected model and need to use the Context for change tracking and other goodies..
        var query = from c in _context.Documents
                    where c.CreatedBy == userName
                    select c;

        query = query.Take(50); // I want to be able to cancel this query. Can this be done ???

        return query.ToList();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:57:38.850

异步支持是即将推出的 EF6 的一部分。

查看 KSA 的相关博客文章以获得概述。

[http://odetocode.com/Blogs/scott/archive/2012/08/26/async-in-entity-framework-6-0.aspx](http://odetocode.com/Blogs/scott/archive/2012/08/26/async-in-entity-framework-6-0.aspx)

这样，您将使用取消令牌切换到 ToListAsync。

[http://entityframework.codeplex.com/SourceControl/changeset/view/fe17fe748307#src%2fEntityFramework%2fIQueryableExtensions.cs](http://entityframework.codeplex.com/SourceControl/changeset/view/fe17fe748307#src%2fEntityFramework%2fIQueryableExtensions.cs)

# sql - sql 在运行查询和在存储过程中运行该查询时使用不同的执行计划？

> ID：12801011
> 
> 赞同：0
> 
> 时间：2012-10-09T13:20:53.333
> 
> 标签：sql, tsql, query-optimization, sql-execution-plan

我有这个疑问，

```
Declare @Prcocessrate float
declare @item varchar(20)
declare @process varchar(20)
declare @branch varchar(20)
set @item = 'shirt'
set @process = 'kt'
set @branch = '1'
select @Prcocessrate =  ProcessPrice from itemwiseprocessrate where itemname=@Item and Process=@process and branchid=@branch 
```

当我单手运行它时，执行计划只显示**3 个步骤**，你自己看看..

![在此处输入图像描述](../Images/df9e7867607be361ace363e73e543003.png)

但我有`procedure` `sp_newBooking`这个

```
ALTER PROC sp_newbooking
-- other arguements--
AS
BEGIN

--OTHER FLAGS--

ELSE IF (@Flag = 32)
        BEGIN

            declare @ItemId varchar(max),@ProcessRate float
            --set @BranchId='1'
            select @ProcessCode = DefaultProcessCode from mstconfigsettings where branchid=@BranchId
            select @ItemId= DefaultItemId from mstconfigsettings where branchid=@BranchId
            select @ItemName=  ItemName from itemmaster where itemid=@ItemId and branchid=@BranchId
            select @ProcessRate =  ProcessPrice from itemwiseprocessrate where itemname=@ItemName and ProcessCode=@ProcessCode and branchid=@BranchId
            if(@ProcessRate is not null)
            select @ItemName as ItemName,@ProcessCode as ProcessCode,@ProcessRate as ProcessRate
            else
            select @ItemName as ItemName,@ProcessCode as ProcessCode,'0' as ProcessRate
        END

-- OTHER FLAGS --

END 
```

现在！，当我运行这个

```
exec sp_newbooking
@flag = 32,
@Branchid = 1 
```

执行计划显示**6个步骤！**这是图片..！
见**查询 4**![](../Images/e089e20855cb68a95fe4e7934d6ba7f0.png)

**为什么**从程序执行时执行相同的查询需要 6 个步骤，而单独执行时需要 3 个步骤？这是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:20:22.480

SQL 可以使用不同的执行计划有很多原因。它可能是 ：

*   相同查询的不同参数（您在第一个示例中使用常量，第二个示例中的查询可能具有不同的值）
*   不同的数据（意味着您正在开发和生产上运行查询）
*   参数嗅探——更多下文，但首先传递过程可能具有“所需”参数
*   不同的数据类型 - 正如@MartinSmith 指出的那样，我们看不到参数声明。您可能有一个与其匹配的字段类型不匹配的变量。

**参数嗅探**
存储过程执行“[参数嗅探](http://msdn.microsoft.com/en-us/library/ms190439.aspx)”，这是一种祝福（如果它对您有用），也是一种诅咒（如果它对您不利）。首先通过某人搜索`Zebr%`zerbrowski。姓氏索引意识到这是非常具体的，并且会从一百万中返回 3 行——因此构建了一个执行计划。为低行结果编译 proc 后，下一个搜索是`S%`. 嗯，S 是您最常用的名称，匹配 100 万行中的 93,543 行。

**所以，你可以做什么？**
你可以采取很多步骤来检查这个....

*   仔细查看变量数据类型，比较您的即席查询、proc 和基础表 (sp_columns *mytable* )。
*   隔离运动部件
    *   确保您在同一系统中使用相同数据运行两个查询
    *   运行跟踪以确保 proc 的第一次运行使用预期的参数
    *   尝试使用几个不同的参数运行临时查询，看看执行计划如何变化。
    *   如果您无法隔离活动，请暂时添加`WITH RECOMPILE`到 proc 以比较执行计划。或者，`DBCC FREEPROCCACHE`在跑步前做一个。（**免责声明 - 如果这是一个实时系统，请确保您了解这些将做什么**）。

# java - 将字符串解析为整数并将它们存储在数组中

> ID：12801012
> 
> 赞同：2
> 
> 时间：2012-10-09T13:20:57.083
> 
> 标签：java, arrays, string, split

我对如何正确地做这件事有点困惑。我有一些方法进入它，现在我已经齐腰深了。所以我想要做的是解析一个文本文件，每行都有一堆数字，就像这样。

```
1 10
2 12 
3 13 
```

ETC....

每一个被一个空格分隔。我已经做到了，我什至可以为对象中的变量分配正确的数字。我的事情是它不断覆盖数组，并且不会用文本文件中的数据填充它的其余部分。如果我打印出数组，我认为它应该基本上打印出文本文件。

```
public static void main(String[] args) {

    Process [] pArray;
    //just need to have 10 Process
    pArray = new Process [10];

    //delimiter to parse string
    String delimiter = " ";
    String[] tokens;
    tokens = new String [10];

    /*
     * save this for input handeling
    Scanner input = new Scanner( System.in );
    System.out.println("Enter the Text file for data set");
    String fileDestination = input.next();
    * */

    //get data from the file
    File file = new File("C:/Users/Kenshin/Desktop/TestData.txt");
    FileInputStream fis = null;
    BufferedInputStream bis = null;
    DataInputStream dis = null;
    try {

        fis = new FileInputStream(file);     
        // Here BufferedInputStream is added for fast reading.     
        bis = new BufferedInputStream(fis);   
        dis = new DataInputStream(bis);    
        // dis.available() returns 0 if the file does not have more lines.    
        while (dis.available() != 0) {   
            // this statement reads the line from the file and print it to       
            // the console.        
            int g = 0;
            //System.out.println(dis.readLine());
            tokens = dis.readLine().split(delimiter);
            int aInt = Integer.parseInt(tokens[0]);
            int bInt = Integer.parseInt(tokens[1]);
            for( int i = 0; i < tokens.length; i ++)
            {

                //int aInt = Integer.parseInt(tokens[i]);
                pArray[g] = new Process(aInt, bInt);

            }

            g++;

        }

        // dispose all the resources after using them.     
        fis.close();     
        bis.close();
        dis.close();
    } catch (FileNotFoundException e) {  
        e.printStackTrace();
    } catch (IOException e) {  
        e.printStackTrace();
    }

    for(int i = 0; i < pArray.length; i ++)
    {
        System.out.print(pArray[i].arrivalTime + " ");
        System.out.println(pArray[i].burstTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:23:57.447

你不需要这样做吗

```
int g = 0; 
```

*在*你的循环之外？否则，您将不断地重写数组中的初始值，而不是推进该值（填充数组的其余部分）。

为了使这更简单，我将填充一个`ArrayList<Process>`或其他类似的集合，而不是一个固定长度的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:24:06.630

有两个问题：第一，你不需要`g`每次都重新初始化。其次，你的内部`for`循环什么都不做（唯一使用的行`i`被注释掉了）。尝试以下操作：

```
int g = 0;
while (dis.available() != 0) {   
    tokens = dis.readLine().split(delimiter);
    int aInt = Integer.parseInt(tokens[0]);
    int bInt = Integer.parseInt(tokens[1]);
    pArray[g++] = new Process(aInt, bInt);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:33:23.510

首先：您正在重新初始化`g`while 循环的每次迭代；其次：您必须`g`在 for 循环内递增或使用不同的变量作为`pArray`. 否则，它将在 for 循环的每次迭代中继续覆盖索引 0 处的值。

```
int g = 0;
while (dis.available() != 0) {
    // this statement reads the line from the file and print it to
    // the console.

    //System.out.println(dis.readLine());
    tokens = dis.readLine().split(delimiter);
    int aInt = Integer.parseInt(tokens[0]);
    int bInt = Integer.parseInt(tokens[1]);
    for( int i = 0; i < tokens.length; i ++) {
        //int aInt = Integer.parseInt(tokens[i]);
        pArray[g] = new Process(aInt, bInt);
        g++;
    }
} 
```

# android - 从包裹中读取的图书馆类型列表

> ID：12801013
> 
> 赞同：0
> 
> 时间：2012-10-09T13:21:01.910
> 
> 标签：android, parcelable

假设您在某个库（LibClass）中有一些可序列化的类

你有自己的班级

```
class Foo implements Parcelable {
   private List<LibClass> mLibraryList;

   public static final Parcelable.Creator<Foo > CREATOR
        = new Parcelable.Creator<Foo >() {

   public Foo createFromParcel(Parcel in) {
            return new Foo (in);
    }

   public Foo [] newArray(int size) {
        return new Foo [size];
    }
   };   
} 
```

问题是 - 如何从 Parcel 创建一个构造函数？

```
private Foo(Parcel in) {
   in.readList(mLibraryList, ???); // whoaps! where is the loader for lib class?
} 
```

# php - Mysql Null 值不包含在结果中

> ID：12801015
> 
> 赞同：2
> 
> 时间：2012-10-09T13:21:03.920
> 
> 标签：php, mysql

在 mysql 表中，我有一个枚举类型列踏面（'Y'，'I'，'N'，'D'）默认为 Null。当我从表中检索数据并将条件放在该列上时，例如tread！='D'，则具有 Null 值的列不包含在结果中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:22:40.227

因为空值必须分开处理

```
where tread <> 'D' or tread is null 
```

[使用 null](http://dev.mysql.com/doc/refman/5.1/en/working-with-null.html)

或者您可以在相等测试之前“转换”空值：

ANSI 版本（[合并](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)）

```
where COALESCE(tread, ' ') <> 'D' 
```

仅 mysql ( [IFNULL](http://dev.mysql.com/doc/refman/5.5/en//control-flow-functions.html#function_ifnull) )

```
where IFNULL(tread, ' ') <> 'D' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:25:15.623

还有另一种方法可以做到这一点

```
where not ifnull(tread, '-1') ='D' 
```

# jquery - jQuery ColorBox - 它会导致我当前页面的回发。如何预防？

> ID：12801016
> 
> 赞同：0
> 
> 时间：2012-10-09T13:21:04.310
> 
> 标签：jquery, postback, colorbox

下面给出的是我的一段代码。即使在所有正确的地方提供了“return false”，jQuery colorbox 也会导致我的页面发布到我想要避免的服务器。虽然颜色框可以正确呈现，但我不希望整个页面都发回相同的内容。提前致谢。

```
FI.quickView = {

    init: function (obj) {

        $(obj).click(function (e) {
            e.preventDefault();
        });

        $(obj).colorbox({
            href: "somefile.html",
            width: 890,
            height: 680,
            onLoad: function () { return false; },
            onOpen: function () { return false; }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:46:04.393

No need in this code, because it doesn't have any sense:

```
onLoad: function () { return false; }, 
onOpen: function () { return false; } 
```

It's hard to understand what is `obj`, but if you want prevent form submit, then use this:

```
$('form').submit(function(e){
    e.preventDefault();  
}); 
```

Where `form` is selector of your form and this code you can add to `onLoad` event.

# ios - 如何显示多个表格视图控制器，如应用商店？

> ID：12801020
> 
> 赞同：0
> 
> 时间：2012-10-09T13:21:24.227
> 
> 标签：ios, uitableview

![应用商店图片](../Images/b8e46689aa7567e54adb1d004a2798d4.png)

我应该使用什么才能在单个视图控制器中显示多个表视图控制器......就像 App Store 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:26:52.497

保留 3 个 UITableViews 并不是一个好主意，因为您已经必须声明 3 个 NSMutableArrays 来填充这些 tableViews。您可以获得相同的功能，而不是使用多个 TableView，而是使用不同的 NSMutableArrays 来填充单个 UITableView。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (isPaid)
    {   
        return [self.arrayForPaidApps count];                        
    }
    else if(isFree) {
        return [self.arrayForFreeApps count];
    }
    else {
        return [self.arrayForTopApps count];
    }
} 
```

同样 for `cellForRowAtIndexPath:`and`didSelectRowAtIndexPath:`方法，您将获得所需的东西。

只需在点击付费、免费或销售应用程序时不断重新加载表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:29:39.203

您是指可以在“付费”、“免费”和“最高票房”之间切换的事实吗？

我认为这里最好的方法是拥有一个表控制器（因为每种情况下的表示都是相同的），但是根据所选的选择从数据源委托方法提供适当的数据。

当用户更改顶部的选择时，使用 [tableView reloadData] 获取新数据集。

蒂姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:30:19.080

我不确定我是否正确地回答了您的问题，但是.. 不能是同一个表格视图并在某个时间点更改数据源吗？就像您在表中执行搜索时所做的一样..

# javascript - 为什么我不能用 jQuery 设置我的数据属性？

> ID：12801021
> 
> 赞同：0
> 
> 时间：2012-10-09T13:21:29.347
> 
> 标签：javascript, jquery

我有以下内容：

```
editCity: "/Admin/Citys/Edit?pk=0001I&rk=5505005Z"

$('#editCity')
    .attr('title', "Edit City " + rk)
    .data('disabled', 'no')
    .data('href', editCity)
    .removeClass('disabled'); 
```

当我使用开发人员工具检查 HTML 时，我看到：

```
<div class="button dialogLink" id="editCity" 
data-action="EditCity" data-disabled="yes" 
data-entity="City" title="Edit City 5505005Z" ></div> 
```

除了href，一切都更新了。任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:22:59.867

利用

```
var editCity = "/Admin/Citys/Edit?pk=0001I&rk=5505005Z"; 
```

你所做的是一个带[标签的语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)，只包含一个字符串文字并且缺少一个分号。

* * *

顺便说一句，jQuery 的[`.data()`方法](http://api.jquery.com/data/)不是用于数据属性，而只是用于将 JS 对象与 DOM 元素相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:25:08.783

我认为如果您第一次设置数据时它们不存在，jQuery 会在内部存储数据。如果你真的想强迫它：

```
$("#editCity").attr("data-href",editCity) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T13:23:37.333

您不能将 href 属性设置为 div。您可以改用 data-href，或者使用 a-tag 代替 div。

# node.js - 既然 connect 不再使用 parseCookie 方法，那么我们如何使用 express 获取会话数据呢？

> ID：12801027
> 
> 赞同：13
> 
> 时间：2012-10-09T13:21:41.663
> 
> 标签：node.js, session, authentication, express, socket.io

在 node.js 和 express 中，有很多例子展示了如何获取会话数据。

*   [Node.js 和 Socket.io](http://iamtherockstar.com/blog/2012/02/14/nodejs-and-socketio-authentication-all-way-down/)
*   [Express 和 Socket.io - 将它们捆绑在一起](http://www.danielbaulig.de/socket-ioexpress/)
*   [Socket.io 和会话？](https://stackoverflow.com/questions/4641053/socket-io-and-session)

正如您在访问第三个链接时所看到的，它是指向 StackOverflow 的链接。有一个很好的答案，但正如@UpTheCreek 在这些评论中指出的那样，connect 不再具有 parseCookie 方法。我也遇到了这个问题。我发现的所有教程都使用`parseCookie`了现在不存在的 connect 方法。所以我问他我们如何获得会话数据，他说他不知道最好的方法，所以我想我会在这里发布问题。使用`express@3.0.0rc4`, `socket.io`, 和`redis`时，我们如何获取会话数据并使用它来授权用户？我已经能够使用`require('connect').utils.parseSignedCookie;`，但是当我这样做时，握手时总是会收到警告/错误，

```
warn - handshake error Error 
```

从我读过的内容来看，这听起来无论如何都不是一个永久的解决方案。

* * *

**更新**

好的，我开始`session.socket.io`在我的服务器上工作。正如我所怀疑的那样，我被困在了授权点。我想我可能会以错误的方式解决这个问题，所以请随时纠正我。在我的 Redis 数据库中，我将拥有用户的信息。他们第一次登录时，我想更新他们的 cookie，以便它包含他们的用户信息。然后下次他们回到网站时，我想检查他们是否有 cookie 以及用户信息是否存在。如果它不存在，我想将它们发送到登录屏幕。在登录屏幕上，当用户提交信息时，它会根据 Redis 数据库测试该信息，如果匹配，它将使用用户信息更新 cookie。我的问题是：

**1) 如何通过 RedisStore 更新/更改 cookie？**

**2) 看起来会话数据只保存在 cookie 中。如果有人关闭了 cookie，我如何逐页跟踪用户信息？**

这是我的适用代码：

```
//...hiding unapplicable code...
var redis = require('socket.io/node_modules/redis');
var client = redis.createClient();
var RedisStore = require('connect-redis')(express);
var redis_store = new RedisStore();
var cookieParser = express.cookieParser('secret');

app.configure(function(){
  //...hiding unapplicable code...
  app.use(cookieParser);
  app.use(express.session({secret: 'secret', store: redis_store}));
});

//...hiding code that starts the server and socket.io

var SessionSockets = require('session.socket.io');
var ssockets = new SessionSockets(io, redis_store, cookieParser);

io.configure(function(){
  io.set('authorization', function(handshake, callback){
    if(handshake.headers.cookie){
      //var cookie = parseCookie(handshake.headers.cookie);
      //if(cookie.user){
      //  handshake.user = cookie.user;
      //}
    }
    callback(null, true);
  });
});

ssockets.on('connection', function(err, socket, session){ ... }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T14:27:35.530

看看 socket.io 的[wiki](https://github.com/learnboost/socket.io/wiki)。特别是[配置 Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)和[Authorization and handshaking](https://github.com/LearnBoost/socket.io/wiki/Authorizing)部分。

它展示了如何将 socket.io 与 a 一起使用，`RedisStore`并提供了两种不同的授权方法。

有关连接 express v3、redis 和 socket.io 的更多信息

*   [连接问题#588](https://github.com/senchalabs/connect/issues/588#issuecomment-8203119)
*   [socket.io 和 express 3](http://notjustburritos.tumblr.com/post/22682186189/socket-io-and-express-3)
*   [session.socket.io 模块](https://github.com/functioncallback/session.socket.io)
*   [socket.io-express 库](https://github.com/alphapeter/socket.io-express)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T21:29:50.807

切换到`session.socket.io`一段时间后，由于加载会话信息时模块的异步特性，我遇到了一些问题。所以我最终创建了自己的名为[**session.io**](https://github.com/AustP/session.io)的模块。它是这样使用的：

```
var express = require('express');
var app = express();
var server = require('http').createServer(app);

//Setup cookie and session handlers
//Note: for sessionStore you can use any sessionStore module that has the .load() function
//but I personally use the module 'sessionstore' to handle my sessionStores.
var cookieParser = express.cookieParser('secret');
var sessionStore = require('sessionstore').createSessionStore();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  //...truncate...//
  app.use(cookieParser);
  //make sure to use the same secret as you specified in your cookieParser
  app.use(express.session({secret: 'secret', store: sessionStore}));
  app.use(app.router);
});

app.get('/', function(req, res){
  res.send('<script src="/socket.io/socket.io.js"></script><script>io.connect();</script>Connected');
});

server.listen(app.get('port'), function(){
  console.log('Listening on port ' + app.get('port'));
});

var io = require('socket.io').listen(server);

io.configure(function(){
  //use session.io to get our session data
  io.set('authorization', require('session.io')(cookieParser, sessionStore));
});

io.on('connection', function(socket){
  //we now have access to our session data like so
  var session = socket.handshake.session;
  console.log(session);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T21:11:51.350

你的问题：

1.  如何通过 RedisStore 更新/更改 cookie？
2.  看起来会话数据仅保存在 cookie 中。如果有人关闭了 cookie，我如何逐页跟踪用户信息？

Cookies / Sessions / RedisStore 想法：

1.  通常，您只有一个 cookie，即会话 ID
2.  所有用户状态都存储在服务器上的“会话”中，可以通过会话 ID 找到
3.  您可以使用 Redis 作为会话数据的后端存储。
4.  Redis 将允许您保持会话状态，即使您的服务器重新启动（好事）
5.  您可以在会话中存储大量数据（req.session.key = value）
6.  会话中存储的所有数据都将保持不变，直到用户注销或会话过期

示例 node.js 代码：

```
var app = express.createServer(
  express.static(__dirname + '/public', { maxAge: 31557600000 }),
  express.cookieParser(),
    express.session({ secret: 'secret', store: new RedisStore({
          host: 'myredishost',
          port: 'port',
          pass: 'myredispass',
          db: 'dbname',
      }, cookie: { maxAge: 600000 })})
); 
```

会话和 Cookie 的想法：

1.  您的第二个问题是关于没有 cookie 的会话。这个有可能。
2.  基本上，您将会话 ID 放在您发送到服务器的每个请求的 url 上。
3.  我坚信大多数人都允许使用 cookie。
4.  如果这是一个要求，谷歌：[“没有 cookie 的会话”](https://www.google.com/search?q=session%20without%20cookie)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-09T17:49:09.383

会话数据可用于：

```
req.session 
```

# c# - 在图像上添加文本：GDI+ 中发生一般错误

> ID：12801029
> 
> 赞同：1
> 
> 时间：2012-10-09T13:21:45.930
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, gdi+

我想在特定图像上写 3 个文本。本地主机上没有任何问题。但是在服务器上，我尝试了一切，但没有任何改变。总是说：GDI+ 中发生了一般性错误。

如果我一步一步在图像上写文字，我会得到同样的错误。在我添加第一个文本后，第二个和第三个文本无法添加到图像上，因为使用第一个文本处理图像。

概括：

首先，我想在 img1 和 Dispose 上添加 text1。其次，我想在 img1 和 Dispose 上添加 text2。第三，我想在 img1 和 Dispose 上添加 text3。

```
 using (Bitmap bitmapMasterImage = new Bitmap(stringMasterImageName))
            {
                using (Graphics graphicsMasterImage = Graphics.FromImage(bitmapMasterImage))
                {
                    graphicsMasterImage.DrawString(stringText1, new Font("Arial", 20, FontStyle.Bold), new SolidBrush(colorStringColor), new Point(233, 134), stringformatWriteTextFormat);
                    graphicsMasterImage.DrawString(stringText2, new Font("Arial", 20, FontStyle.Bold), new SolidBrush(colorStringColor), new Point(233, 210), stringformatWriteTextFormat);
                    graphicsMasterImage.DrawString(stringText3, new Font("Arial", 20, FontStyle.Bold), new SolidBrush(colorStringColor), new Point(233, 300), stringformatWriteTextFormat);
                }

                Response.Clear();
                Response.ContentType = "image/jpeg";

                using (MemoryStream stream = new MemoryStream())
                {
                    bitmapMasterImage.Save(stream, ImageFormat.Jpeg);
                    bitmapMasterImage.Save(stringOutPutFileName);
                    stream.WriteTo(Response.OutputStream);
                }
            } 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:32:26.347

尝试关闭画笔流

```
using (var brush = new SolidBrush(colorStringColor))
{
   ...         
} 
```

或者使用内置刷子，这些不需要关闭。

```
graphicsMasterImage.DrawString(stringText1, font, Brushes.Black, new Point(233, 134), stringformatWriteTextFormat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:23:28.400

此消息通常出现在

*   您没有保存文件的**写入权限**
*   路径不存在
*   该文件正在使用中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:26:01.490

检查以确保服务器上的路径设置方式相同（即 stringMasterImageName）。此外，这可能是权限/安全问题。 [看这里](http://alperguc.blogspot.in/2008/11/c-generic-error-occurred-in-gdi.html "看这里")

# java - 如何在类路径中找到具有指定名称的所有资源？

> ID：12801032
> 
> 赞同：5
> 
> 时间：2012-10-09T13:21:52.747
> 
> 标签：java

我想在类路径中列出所有具有特定名称的文件。我期待多次出现，因此`Class.getResource(String)`将不起作用。

基本上，我必须在类路径中的任何位置识别所有具有特定名称（例如：xyz.properties）的文件，然后累积读取其中的元数据。

我想要一些效果`Collection<URL> Class.getResources(String)`，但找不到类似的东西。

PS：我没有使用任何第三方库的奢侈，因此需要一个本土解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:34:10.827

您可以在类加载器上使用[Enumeration getResources(String name)](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResources%28java.lang.String%29)来实现相同的目的。

例如：

```
Enumeration<URL> enumer = Thread.currentThread().getContextClassLoader().getResources("/Path/To/xyz.properties");
while (enumer.hasMoreElements()) {
    System.out.print(enumer.nextElement());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:35:13.653

我所做的是从类路径中读取 java 源文件并使用[ClassLoader](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)处理它们。我正在使用以下代码：

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();

assert (classLoader != null);

// pkgName = "com.comp.pkg"
String path = pkgName.replace('.', '/');

// resources will contain all java files and sub-packages
Enumeration<URL> resources = classLoader.getResources(path);

 if(resources.hasMoreElements()) {
        URL resource = resources.nextElement();     
        File directory = new File(resource.getFile());
        // .. process file, check this directory for properties files
 } 
```

希望这对您有所帮助。

# java - 如何使 JPopupMenu 透明？

> ID：12801035
> 
> 赞同：5
> 
> 时间：2012-10-09T13:21:57.763
> 
> 标签：java, swing, transparent, jpopupmenu, jpopup

我想自定义外观，`JPopupMenu`所以我创建了一个自定义类来扩展 JPopupMenu 类，因为我覆盖了该`paintComponent`方法，就像我对需要自定义的任何组件所做的那样。

```
public class CustomPopupMenu extends JPopupMenu {

    @Override
    public paintComponent(Graphics g) {
        //custom draw
    }
} 
```

我唯一知道的问题是我无法使`JPopupMenu`透明。我虽然`setOpaque(false)`就够了，但我错了。

我怎样才能使`JPopupMenu`透明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:57:53.907

> jpopupmenu 是一个窗口吗？

是的[JPopup](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html#popup)是容器，例如

![在此处输入图像描述](../Images/8288af3c3e208c614dde490d9c6188d6.png)

Java6 的代码（必须更改 Java7 的导入）

```
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class TranslucentWindow extends JFrame {

    private static final long serialVersionUID = 1L;
    private JMenuItem m_mniInsertRow;
    private JMenuItem m_mniInsertScrip;
    private JMenuItem m_mniDeleterRow;
    private JMenuItem m_mniDeleteExpiredScrip;
    private JMenuItem m_mniSetAlert;

    public TranslucentWindow() {
        super("Test translucent window");
        setLayout(new FlowLayout());
        add(new JButton("test"));
        add(new JCheckBox("test"));
        add(new JRadioButton("test"));
        add(new JProgressBar(0, 100));
        JPanel panel = new JPanel() {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 300);
            }
            private static final long serialVersionUID = 1L;

            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.red);
                g.fillRect(0, 0, getWidth(), getHeight());
            }
        };
        panel.add(new JLabel("Very long textxxxxxxxxxxxxxxxxxxxxx "));
        add(panel);
        final JPopupMenu popupMenu = new JPopupMenu();
        m_mniInsertRow = new JMenuItem("Insert a Row");
        m_mniInsertRow.setOpaque(false);
        m_mniInsertScrip = new JMenuItem("Insert a Scrip");
        m_mniInsertScrip.setOpaque(false);
        m_mniDeleterRow = new JMenuItem("Delete a Row");
        m_mniDeleterRow.setOpaque(false);
        m_mniDeleteExpiredScrip = new JMenuItem("Delete a Expired Scrip");
        m_mniDeleteExpiredScrip.setOpaque(false);
        m_mniSetAlert = new JMenuItem("Set Alert");
        m_mniSetAlert.setOpaque(false);
        popupMenu.add(m_mniInsertRow);
        popupMenu.add(m_mniInsertScrip);
        popupMenu.addSeparator();
        popupMenu.add(m_mniDeleterRow);
        popupMenu.add(m_mniDeleteExpiredScrip);
        popupMenu.add(new JSeparator());
        popupMenu.add(m_mniSetAlert);
        panel.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseReleased(MouseEvent e) {
                if (e.isPopupTrigger()) {
                    int x = e.getX();
                    int y = e.getY();
                    popupMenu.show(e.getComponent(), x, y);
                }
            }
        });
        setSize(new Dimension(400, 300));
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        JFrame.setDefaultLookAndFeelDecorated(true);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Window w = new TranslucentWindow();
                w.setVisible(true);
                com.sun.awt.AWTUtilities.setWindowOpacity(w, 0.7f);
            }
        });
    }
} 
```

编辑

`Translucency`对和的有趣支持`Nimbus L&F`，尤其是`Painter`再现非常正确`Color`的（梯度也在屏幕上移动），对 JPopupMenu 进行了重要更改的 ligth 版本，仍然来自 Java6

图片

![在此处输入图像描述](../Images/5b58bc59f4623a21709964a00a0c7db6.png)

从代码

```
import com.sun.java.swing.Painter;
import java.awt.*;
import javax.swing.*;

public class TranslucentWindow extends JFrame {

    private static final long serialVersionUID = 1L;
    private JPopupMenu popupMenu = new JPopupMenu();
    private JMenuItem m_mniInsertRow = new JMenuItem("Insert a Row");
    private JMenuItem m_mniInsertScrip = new JMenuItem("Delete a Row");
    private JMenuItem m_mniDeleterRow = new JMenuItem("Insert a Scrip");
    private JMenuItem m_mniDeleteExpiredScrip = new JMenuItem("Delete a Expired Scrip");
    private JMenuItem m_mniSetAlert = new JMenuItem("Set Alert");

    public TranslucentWindow() {
        super("Test translucent window");
        setLayout(new FlowLayout());
        add(new JButton("test"));
        add(new JCheckBox("test"));
        add(new JRadioButton("test"));
        add(new JProgressBar(0, 100));
        JPanel panel = new JPanel() {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(400, 300);
            }
            private static final long serialVersionUID = 1L;

            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.red);
                g.fillRect(0, 0, getWidth(), getHeight());
            }
        };
        panel.add(new JLabel("Very long textxxxxxxxxxxxxxxxxxxxxx "));
        panel.setComponentPopupMenu(popupMenu);
        add(panel);
        m_mniInsertRow.setOpaque(false);
        m_mniInsertScrip.setOpaque(false);
        m_mniDeleterRow.setOpaque(false);
        m_mniDeleteExpiredScrip.setOpaque(false);
        m_mniSetAlert.setOpaque(false);
        popupMenu.add(m_mniInsertRow);
        popupMenu.add(m_mniInsertScrip);
        popupMenu.addSeparator();
        popupMenu.add(m_mniDeleterRow);
        popupMenu.add(m_mniDeleteExpiredScrip);
        popupMenu.add(new JSeparator());
        popupMenu.add(m_mniSetAlert);
        setSize(new Dimension(400, 300));
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        try {
            for (UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    UIManager.getLookAndFeelDefaults().put("nimbusOrange", (new Color(127, 255, 191)));
                    UIManager.getLookAndFeelDefaults().put("PopupMenu[Enabled].backgroundPainter",
                            new FillPainter(new Color(127, 255, 191)));

                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
        } catch (InstantiationException ex) {
        } catch (IllegalAccessException ex) {
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Window w = new TranslucentWindow();
                w.setVisible(true);
                com.sun.awt.AWTUtilities.setWindowOpacity(w, 0.7f);
            }
        });
    }

    static class FillPainter implements Painter<JComponent> {

        private final Color color;

        FillPainter(Color c) {
            color = c;
        }

        @Override
        public void paint(Graphics2D g, JComponent object, int width, int height) {
            g.setColor(color);
            g.fillRect(0, 0, width - 1, height - 1);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T14:17:37.687

弹出菜单的问题在于它可能实现为顶层容器（Window），而一个窗口是不透明的，无论你用setOpaque()设置什么值，它都是不透明的。但是窗户也可以做成半透明的。

您可以通过强制使用重量级弹出窗口并粗暴地改变其不透明度来*破解它。*试试这个作为实验的起点（Java7）：

```
import java.awt.Window;

import javax.swing.JPopupMenu;
import javax.swing.SwingUtilities;

public class TranslucentPopup extends JPopupMenu {

    {
        // need to disable that to work
        setLightWeightPopupEnabled(false);
    }

    @Override
    public void setVisible(boolean visible) {
        if (visible == isVisible())
            return;
        super.setVisible(visible);
        if (visible) {
            // attempt to set tranparency
            try {
                Window w = SwingUtilities.getWindowAncestor(this);
                w.setOpacity(0.667F);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

} 
```

请注意，它*不会*使子菜单半透明！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T14:13:33.417

您不必扩展`JPopupMenu`类，只需使您的菜单不透明，然后`JMenuItems`改为透明（并且不透明）。

```
public class CustomMenuItem extends JMenuItem {
        public void paint(Graphics g) { 
                Graphics2D g2d = (Graphics2D) g.create(); 
                g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.2f)); 
                super.paint(g2d); 
                g2d.dispose(); 
        } 
} 
```

![在此处输入图像描述](../Images/8bc8b3e35c35b42a269d1e8e3602e4f9.png)

或者，做相反的事情，扩展`JPopupMenu`以使其透明并保持菜单和项目不透明（这样就不会像上面那样菜单的不透明边框）。

编辑：

请注意（不幸的是）当弹出菜单超出框架边界时它不起作用，正如@Durandal所说。

尽管您可以尝试进行一些计算并更改弹出窗口的位置（在需要时）以使其始终保持在框架内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-04T02:08:15.050

请参阅 Kirill Grouchnikov 撰写的这篇出色的 2008 年文章[Translucent and Shaped Swing Windows](https://today.java.net/pub/a/today/2008/03/18/translucent-and-shaped-swing-windows.html)。

根据上述文章中给出的示例和从 JGoodies 项目中借用的代码，您可以使用以下 2 个类安装自定义弹出窗口外观：

1.  TranslucentPopup 是自定义的 Popup，由 JPopupMenu 使用：

    ```
    /**
     * Translucent Popup
     *
     * @author Kirill Grouchnikov [https://www.java.net/pub/au/275]
     */
    public class TranslucentPopup extends Popup {
        final JWindow popupWindow;

        TranslucentPopup(Component contents, int ownerX, int ownerY) {
            // create a new heavyweight window
            popupWindow = new JWindow();
            // mark the popup with partial opacity
            com.sun.awt.AWTUtilities.setWindowOpacity(popupWindow, 0.7f);
            // determine the popup location
            popupWindow.setLocation(ownerX, ownerY);
            // add the contents to the popup
            popupWindow.getContentPane().add(contents, BorderLayout.CENTER);
            contents.invalidate();
            JComponent parent = (JComponent) contents.getParent();
            // set a custom border
            parent.setBorder(BorderFactory.createRaisedSoftBevelBorder());
        }

        public void show() {
            popupWindow.setVisible(true);
            popupWindow.pack();
            // mark the window as non-opaque, so that the
            // border pixels take on the per-pixel opacity
            com.sun.awt.AWTUtilities.setWindowOpaque(popupWindow, false);
        }

        public void hide() {
            popupWindow.setVisible(false);
        }
    } 
    ```

2.  TranslucentPopupFactory 需要安装自定义外观：

    ```
    /**
     * Translucent Popup Factory
     *
     * @author Kirill Grouchnikov [https://www.java.net/pub/au/275]
     * @author Karsten Lentzsch (JGoodies project)
     */
    public class TranslucentPopupFactory extends PopupFactory {
        /**
         * The PopupFactory used before this PopupFactory has been installed in
         * {@code #install}. Used to restored the original state in
         * {@code #uninstall}.
         */
        protected final PopupFactory storedFactory;

        protected TranslucentPopupFactory(PopupFactory originalFactory) {
            storedFactory = originalFactory;
        }

        public Popup getPopup(Component owner, Component contents, int x, int y) throws IllegalArgumentException {
            // A more complete implementation would cache and reuse popups
            return new TranslucentPopup(contents, x, y);
        }

        /**
          * Utility method to install the custom Popup Look and feel.
          * Call this method once during your application start-up.
          *
          * @author Karsten Lentzsch (JGoodies project)
          */
        public static void install() {
            PopupFactory factory = PopupFactory.getSharedInstance();
            if (factory instanceof TranslucentPopupFactory) {
                return;
            }

            PopupFactory.setSharedInstance(new TranslucentPopupFactory(factory));
        }

        /**
          * Utility method to uninstall the custom Popup Look and feel
          * @author Karsten Lentzsch (JGoodies project)
          */
        public static void uninstall() {
            PopupFactory factory = PopupFactory.getSharedInstance();
            if (!(factory instanceof TranslucentPopupFactory)) {
                return;
            }

            PopupFactory stored = ((TranslucentPopupFactory) factory).storedFactory;
            PopupFactory.setSharedInstance(stored);
        }
    } 
    ```

结果是所有弹出窗口（包括 JPopupMenu 和可能还有 ToolTips）现在都将是半透明的，并且可以选择具有自定义边框： ![World Wind Context Menu 示例应用程序中显示的半透明上下文菜单](../Images/79ec967faa8765a727db7232f4511f58.png)

# backbone.js - 从模型中获取属性值 - Backbone

> ID：12801036
> 
> 赞同：0
> 
> 时间：2012-10-09T13:22:00.983
> 
> 标签：backbone.js

我想从模型中获取属性。我试过了

```
this.model.get("group_description") and 

this.model.models.get("group_description") 
```

但他们似乎都没有任何帮助？下面是模型结构的快照...![在此处输入图像描述](../Images/5d354e32ee40f28d0a415acdfc2d97cb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:33:25.633

你的对象`d`( `this`) 是一个 Backbone.Collection，所以你想要

```
this.at(0).get("group_description") 
```

# javascript - SCRIPT438：对象不支持属性或方法“加入”

> ID：12801037
> 
> 赞同：3
> 
> 时间：2012-10-09T13:22:01.437
> 
> 标签：javascript, internet-explorer

我在 F12 开发工具下的 Internet Explorer 9.0 上遇到此错误，在以下语句中：

```
arr = [];
for (i = 0; i < items.length; i ++) {
  console.log(items[i]);
  arr.push(items[i].join(','));
} 
```

此方法适用于除 IE 以外的所有浏览器。为什么它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:33:13.420

这是我的猜测*（因为我们缺乏信息）*。

它可以是以下几种的组合：

*   您在 IE8 中进行测试，或者如果您使用的是 IE9，则您处于 Quirks 模式

*   构建数组时，包含了一个尾随`,`

在 Quirks 模式或 IE8 及更低版本中，如果您在 Array 文字语法中包含尾随逗号，它将*（错误地）*在 Array 末尾添加一个额外的项目。

这意味着您的最后一项将是`undefined`，并且您在使用时会收到错误消息`.join()`。

* * *

在 IE8 及更低版本或 Quirks 模式下的任何版本中，您将获得以下内容：

```
var items = [
    ["foo"],
    ["bar"],
    ["baz"], // <-- trailing comma
];

alert(items.length); // 4 (should be 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T19:37:52.523

通过将 arr = [] 更改为 var arr = []; 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T17:26:13.693

不是一个完整的答案，但会帮助我......

我以为我正在使用 join 方法作为 Array 类型的静态方法（这可能背叛了我的 C# 历史），如下所示：

> var s = Array.join(myArray, ",");

不出所料，我找不到其他人使用这种语法。令人惊讶的是它可以在 Firefox 中运行。没有在 IE 中，这就是导致我来到这里的原因。

更改为更常规的

> var s = myArray.join(",");

解决它！

# c++ - 命名空间“std”中没有名为“vsnprintf”的成员；你的意思是“vsprintf”吗？

> ID：12801040
> 
> 赞同：1
> 
> 时间：2012-10-09T13:22:14.463
> 
> 标签：c++, ios, c, macos, boost

我正在尝试在 iOS 下编译 boost，但是每次我尝试启动我的项目时都会出现这样的错误：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/include/c++/4.2.1/bits/c++locale.h:79:28: No member named 'vsnprintf' in namespace 'std'; did you mean 'vsprintf'?
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/include/c++/4.2.1/bits/c++locale.h:79:60: Too many arguments to function call, expected 3, have 4 
```

我认为主要原因是编译器，我尝试更改一些设置并使用编译器但每次出现新错误时，这是​​我当前的编译器设置，

1.  C 语言方言 - C99[-std=c99]
2.  C++ 语言方言符 - C++98[-std=C++98]
3.  C++ 标准库 - libstdc++

> Boost 版本是 1.44.0，XCode 版本是 4.5

有人知道我必须如何配置我的项目以在 iOS 下编译 boost 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:27:24.493

根据这个参考页面，[`vsnprintf()`](http://en.cppreference.com/w/cpp/io/c/vfprintf)它是在 C++11 中引入的，所以不要`-std=C++98`尝试`-std=C++0x`（但是，编译器可能不支持 C++11 中引入的所有功能）。

# mono - Linux 上的 mono 是否需要 X？

> ID：12801041
> 
> 赞同：1
> 
> 时间：2012-10-09T13:22:14.487
> 
> 标签：mono

使用 C#，您可以创建控制台应用程序。那么，它们是否在没有 X 的情况下在 Mono 中运行？

我知道，这可能是一个愚蠢的“老兄，试试看”问题，但关键是我做不到。我现在没有任何 Linux 安装，我将使用 Mono 制作一个 Raspberry Pi，我将订购使用。由于 Pi 还没有出现，我不能自己尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:25:31.207

是的，您绝对可以在 Raspberry Pi 上的 Mono 上运行控制台应用程序。这就是我用我的，主要是:)

顺便说一句，我建议安装 Arch 发行版；至少当我安装我的时，它在那个环境下拥有最稳定的 Mono 版本。请参阅[我的 Google+ 帖子](https://plus.google.com/u/0/109123888989768381249/posts/hUhuf4zcDLj)了解更多详细信息和其他一些来自人们的方便提示。

# php - 如何从同一客户端对同一页面执行多个 HTTP 请求

> ID：12801047
> 
> 赞同：1
> 
> 时间：2012-10-09T13:22:34.617
> 
> 标签：php, jquery, ajax, http

我想从同一个客户端在同一页面上运行一些 AJAX 调用。Ajax 调用正确启动，但服务器将请求排队并每次执行一个。

我还检查了开始请求时间和返回消息时间。研究第二个请求之间的差异比之前的请求多。

请帮帮我！

```
$("document").ready(function() { 
    $(".user-id").each(function() { 
        var id = $(this).html(); 
        getData(id); 
    }); 
}); 
function getData(id) { 
    $.ajax({ 
            url: 'loadOperatorDiagram.php', 
            type: 'GET', 
            data: {id: id}, 
            async: true, 
            cache: false, 
            success: function(resp) { 
                 $("#boxes").append(resp); 
                 draw(id); // A javascript function which draw into a canvas
             } 
    }); 
} 
```

loadOperatorDiagram.php 获取一些查询，其执行时间约为 5 秒。第一个 ajax 请求在 5 秒后响应，第二个在 10 秒后响应，依此类推。但是每个人都以几毫秒的差异异步且正确地启动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:43:17.640

如果您在 php 中使用会话（听起来很像，否则您可以同时执行至少 2 个请求...），您应该尽快在 php 脚本中关闭它，因为 php 会阻止会话。

只要[`session_write_close();`](http://php.net/manual/en/function.session-write-close.php)您从会话中获得所需的内容，就立即使用。

# c++ - c ++将数字的小数部分转换为整数

> ID：12801062
> 
> 赞同：6
> 
> 时间：2012-10-09T13:23:23.753
> 
> 标签：c++, math, integer

我需要将数字的小数部分转换为不带逗号的整数，例如我有 3.35 我只想得到不带零或逗号的 35 部分，

因为我使用 modf() 函数来提取小数部分，但如果有任何方法可以做到这一点或过滤“0”，它会给我一个 0.35。如果您向我展示如何使用更小的代码，我将非常感激，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:40:18.143

比转换为字符串并再次返回更有效：

```
int fractional_part_as_int(double number, int number_of_decimal_places) {
    double dummy;
    double frac = modf(number,&dummy);
    return round(frac*pow(10,number_of_decimal_places));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:17:20.303

```
#include <iostream>
#include <cmath>

double round(double r) {
    return (r > 0.0) ? std::floor(r + 0.5) : std::ceil(r - 0.5);
}

double floor_to_zero(double f) {
    return (f > 0.0) ? std::floor(f) : std::ceil(f);
}

double sign(double s) {
    return (s < 0.0) ? -1.0 : 1.0;
}

int frac(double f, int prec) {
    return round((f - floor_to_zero(f)) * prec) * sign(f);
}

int main() {
    double a = 1.2345;
    double b = -34.567;
    std::cout << frac(a, 100) << " " << frac(b, 100) << std::endl; // 23 57
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:35:15.400

另一种解决方案

```
int precision= 100;
double number = 3.35;
int f = floor(xx);
double temp = ( f - number ) * -1;
int fractional_part = temp * precision; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:37:37.053

如果您需要它作为字符串，一个非常简单的 C 风格解决方案将是（应该适用于可变的小数位数）：

```
 double yourNumber = 0.35f;
    char buffer[32];
    snprintf(buffer, 32, "%g", yourNumber);
    strtok(buffer, "."); // Here we would get the part before . , should still check
    char* fraction = strtok(NULL, ".");
    int fractionAsInt = atoi(fraction); 
```

此示例在字符串错误的情况下缺少错误处理，并且如果您只需要固定的小数位数，则不可行，因为算术方法在那里工作得更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T13:49:30.923

像这样的东西应该工作：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

static int get_frac(double value, unsigned short precision)
{
    return (int)((value - (long)value) * pow(10, precision));
}

static int get_frac_no_trailing_zeros(double value, unsigned short precision)
{
    int v = get_frac(value, precision);
    while (v % 10 == 0)
        v /= 10;
    return v;
}

int main(int argc, char *argv[])
{
    double v;

    v = 123.4564;
    printf("%.4f = %d\n", v, get_frac(v, 2));
    printf("%.4f = %d\n", v, get_frac(v, 4));
    printf("%.4f = %d\n", v, get_frac(v, 6));
    printf("%.4f = %d\n", v, get_frac_no_trailing_zeros(v, 6));

    return EXIT_SUCCESS;
} 
```

您可能还希望`pow`通过让用户首先提供 10 的幂的数字来避免呼叫，或者使用查找表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T13:55:06.133

使用一些 stl 魔法，[这里是](http://ideone.com/HffL6)示例代码：

```
typedef std::pair<int, int> SplitFloat;

SplitFloat Split(float value, int precision)
{
    // Get integer part.
    float left = std::floor(value);
    // Get decimal part.
    float right = (value - left) * float(std::pow(10, precision));

    return SplitFloat(left, right);
} 
```

它可以改进，但非常简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-04T08:21:15.813

我刚刚做了一些接近你想要做的事情，虽然我还是很新。尽管如此，当我来到这里寻找我的问题的结果时，也许这将有助于将来的某人。

第一步是确保包含 3.35 的变量是双精度数，但这可能很明显。

接下来，创建一个仅为整数的变量并将其值设置为等于双精度值。然后它将只包含整数。

然后从双精度数中减去整数 (int)。您将留下分数/小数值。从那里，只需乘以 100。

超过 100 个十进制值，您显然需要进行更多配置，但使用 if 语句应该相当简单。如果十进制值大于 .99，则乘以 1000，等等。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-09T13:27:42.300

这就是我将如何做到的。

```
#include <sstream>
#include <string>

int main()
{
    double d = yourDesiredNumber; //this is your number
    std::ostringstream out;
    out << setprecision(yourDesiredPrecision) << std::fixed 
        << std::showpoint << d;
    std::istringstream in(out.str());
    std::string wholePart; //you won't need this. 
    int fractionalPart;  
    std::getline(in, wholePart, '.');
    in >> fractionalPart;
    //now fractionalPart contains your desired value.
} 
```

我很确定你可以只使用一个对象而不是两个不同`istringstream`的对象，但我不确定细节（从未使用过该类）所以我没有在示例中使用它。`ostringstream``stringstream`

# android - ArrayList 未从 AsyncTask 正确填充

> ID：12801067
> 
> 赞同：0
> 
> 时间：2012-10-09T13:23:38.523
> 
> 标签：android, android-listview, android-asynctask, android-arrayadapter

我有一个`ArrayList`从网络服务填充的应用程序。Web 服务是从`AsyncTask`. 当我在`onPostExecute`. ArrayList 被定义为实例变量。为什么当 AsyncTask 完成时填充了 arrayList 但是当我之后测试实例变量本身时，它为空。似乎 Async 没有正确设置值。

异步完成后，我将 ArrayList 传递给 arrayAdapter，但我的 listView 为空。

测试：在`onPostExecute`

```
 Log.e(TAG, "array from WS = " + array.size());  // returns 4 
```

测试：在`onCreate`

```
 Log.e(TAG, "checking to see if array is null " + array.size()); // returns 0

 package com.carefreegroup;

 public class GetRotaDetails extends NfcBaseActivity implements OnItemClickListener
 {
ArrayList<ArrayList<String>> array;
MySimpleArrayAdapter arrayAdapter;
Intent intent;
private static final String TAG = GetRotaDetails.class.getSimpleName();
ListView listView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    array = new  ArrayList<ArrayList<String>>();
    nfcscannerapplication = (NfcScannerApplication) getApplication();
    intent = this.getIntent();
    setContentView(R.layout.getrotadetailslayout);
    listView = (ListView) findViewById(R.id.getrotadetailslistview);

    //set titlebar to carer's name
    Cursor cursorCarerName = nfcscannerapplication.loginValidate.queryAllFromCarer();
    cursorCarerName.moveToLast();
    String carerTitleName = cursorCarerName.getString(cursorCarerName
            .getColumnIndex(LoginValidate.C_CARER_NAME));
    setTitle(carerTitleName + " is currently logged in");

    callID = intent.getStringExtra("callIDExtra");
    Log.e(TAG, "callID = " + callID);
    String[] params = { callID };
    AsyncGetRotaDetails agrd = new AsyncGetRotaDetails();
    agrd.execute(params);

    Log.e(TAG, "checking to see if array is null " + array.size());
    if (arrayAdapter == null){
        MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, array);
        listView.setAdapter(arrayAdapter);
    }
    listView.setAdapter(arrayAdapter);
    listView.setOnItemClickListener(this);

}// end of onCreate

@Override
protected void onResume() {

    super.onResume();
}

private class AsyncGetRotaDetails extends AsyncTask<String, Void, String> {

    ProgressDialog progressDialog;
    String rotaDetails = null;

    @Override
    protected void onPreExecute() {
        progressDialog = ProgressDialog
                .show(GetRotaDetails.this, "Connecting to Server",
                        " retrieving rota details...", true);

    };

    @Override
    protected String doInBackground(String... params) { 

        try {
            Log.e(TAG, "inside doInBackground");

            rotaDetails = nfcscannerapplication.loginWebservice.getRotaDetail(params[0]);

        } catch (Exception e) {

            e.printStackTrace();

        }
        return rotaDetails;

    }

    @Override
    protected void onPostExecute(String xmlResult) {
        super.onPostExecute(xmlResult);
        if (progressDialog != null)
            progressDialog.dismiss();

        if (rotaDetails != null) {

            RetrieveExtraDetails red = new RetrieveExtraDetails();
           array = red.getExtraDetails(xmlResult);
            Log.e(TAG, "array from WS = " + array.size());

        } else {

            AlertDialog alertDialog = new AlertDialog.Builder(
                    GetRotaDetails.this).create();
            alertDialog.setTitle("Signal/Server Test");
            alertDialog.setMessage("No Phone Signal or Server Problem");

            alertDialog.setButton("OK",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {

                            onStart();
                        }
                    });

            alertDialog.show();

        }

    }// end of postExecute

}//end of Async

private class MySimpleArrayAdapter extends ArrayAdapter<String> {

    private final Context context;
    private final ArrayList<?> list;

    public MySimpleArrayAdapter(Context context, ArrayList<?> list) {

        super(context, R.layout.getrotadetailsrow);
        Log.e(TAG, "inside adapter constructor");
        this.context = context;
        this.list = list;

    }// end of constructor

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.getrotadetailsrow, parent,
                false);

        TextView recTypeID = (TextView) rowView
                .findViewById(R.id.rectypeid);

        TextView recType = (TextView) rowView
                .findViewById(R.id.rectype);

        TextView name = (TextView) rowView
                .findViewById(R.id.name);

        TextView relationship = (TextView) rowView
                .findViewById(R.id.relationship);

        TextView address = (TextView) rowView
                .findViewById(R.id.address);

        TextView postCode = (TextView) rowView
                .findViewById(R.id.postcode);

        TextView telNo = (TextView) rowView
                .findViewById(R.id.telno);

        TextView keySafe = (TextView) rowView
                .findViewById(R.id.keysafe);

        TextView notes = (TextView) rowView
                .findViewById(R.id.notes);

        TextView meds = (TextView) rowView
                .findViewById(R.id.meds);

        String record = list.get(position).toString();

        Log.e(TAG, "record = " + record);
        recTypeID.setText(record);
        return super.getView(position, convertView, parent);
    }

}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:33:16.057

实际上， AsyncTask 是异步运行的，它不是阻塞调用（就像在 onPostExecute() 执行之后返回的 execute() 方法一样）。因此，您需要在下载数据时在 onPostExecute() 中通知适配器。这是一个与多线程相关的问题，当执行execute() 行时，会为AsyncTask 创建一个线程，并且onCreate() 的执行移到下一行，因此同时，doInBackground() 和onCreate() 将在AsyncTask 线程和UI 中执行分别穿线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:03:28.677

使您的 ListView 成为班级中的一个字段，然后

采用

```
listView.setAdapter(arrayAdapter);
listView.setOnItemClickListener(this); 
```

在**onPostExecute(String result)**方法中

但我推荐的是：

使用加载微调器，直到获取数据并设置适配器，否则行为是 Activity 显示为空，并且在 3-5 秒后突然出现整个列表，这是一个糟糕的 UX。

通常，当获取的数据是 UI 的一小部分，而不是 UI 的主要组件 ListView 时，我们会使用没有任何加载微调器的异步任务。

并且不要在 onCreate() 中检查数组的长度。它将始终为 0。因为代码流将是：

**1\. 创建数组**

**2\. 在 onCreate //0 中检查它的长度，因为还没有添加任何内容**

**3.后台添加数据到Array**

**4.在onPostExecute(String result) //实际长度中检查它的长度**

# azure - CloudQueue GetMessage 与 GetMessages

> ID：12801076
> 
> 赞同：1
> 
> 时间：2012-10-09T13:23:57.790
> 
> 标签：azure, azure-storage

我想知道使用 GetMessage 与 GetMessages 逐一获取消息的开销是多少？我应该始终使用 GetMessages(32) 吗？它比 GetMessage() 有什么优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:38:56.587

假设您的队列中有 32 条消息，并且您的意图是获取队列中的所有消息，如果您调用 GetMessage()，则需要进行 32 次调用才能获取所有消息，因此需要 32 次 API 事务，就像您调用 GetMessages(32)您只需拨打一个电话即可获取所有消息，因此只需 1 笔交易。

不仅如此，我认为这取决于您的应用程序。例如，我一直在玩这个功能，我决定我的应用程序的工作角色（我们称之为“消费者”）实例一次可以处理 4 条消息。在这种情况下，对我来说，最好使用 GetMessages(4) 从队列中获取 4 条消息，并确保我的消费者实例处理的 4 条消息对其他调用者不可见。如果我使用了 GetMessage()，那么我将不得不进行 4 次此调用，如果我使用 GetMessages(32)，那么我的消费者实例将只处理那些额外的 28 条消息，而其他消费者实例将无法获得有机会处理这些消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:27:10.313

恕我直言，根据您的应用程序调用 GetMessages 是有意义的。如果按照设计，批量处理消息对我来说更有效，那么我应该批量获取它们（小消息，处理其中一条消息的开销低）但是如果处理一条消息需要 1-5 分钟，那么你会更好做 GetMessage 但有多个工人角色做这项工作。

所以，这取决于

# php - php mkdir 在服务器上不起作用

> ID：12801077
> 
> 赞同：0
> 
> 时间：2012-10-09T13:24:05.087
> 
> 标签：php

我的 php 脚本在本地主机上运行时遇到问题，但是当我将其上传到服务器时无法创建目录：

上传文件.php：

```
 $img_tmp = $_FILES['pic']['tmp_name'];
   $path = mkdir("../path/folder/$id", 0700);
   $filename = "pic.jpg";
   $location ="../path/folder/$id/";
   $move_file = move_uploaded_file($img_tmp,$location.$filename); 
```

服务器上的文件夹结构类似。

**FOLDER: path** => **FOLDER: folder** => 这里应该创建文件夹 $id。

**文件夹：upload_file** => upload_file.php

有人可以就问题/解决方案提出建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:38:56.807

请检查文件夹权限，文件夹权限应为 0777 才能上传文件。

所以尝试将文件夹权限设置为 0777 或 0775

```
$path = mkdir("../path/folder/$id", 0777); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:57:52.457

使用绝对路径：

```
$path = mkdir($_SERVER['DOCUMENT_ROOT']."/path/folder/$id", 0777); 
```

# java - 更改对对象的引用会导致以前的对象数据被覆盖

> ID：12801079
> 
> 赞同：1
> 
> 时间：2012-10-09T13:24:11.487
> 
> 标签：java, android

我似乎对 java 对象的引用有问题，这可能是由于多年使用 C 语言编程的结果。下面的代码应该使我能够在画布周围移动“WordPart”的对象。当我选择第一个对象时，它会按预期移动。当我释放第一个对象并选择第二个时，第一个和第二个对象的位置变得相同。（我已经删除了编译所需的代码，但与问题无关。）据我所知，activeImage 引用似乎同时指向 wordPartList 中的两个对象。请帮我找出我的误解。

```
...
public class ONG2Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(new SurfaceView2(this));
}

public class SurfaceView2 extends SurfaceView implements SurfaceHolder.Callback {    

ArrayList<WordParts> wordPartList;
WordParts activeImage;
Point activePosition;
String TAG = "SurfaceView2";
public SurfaceView2(Context context) {
super(context);        
wordPartList = NewPartList(context);
this.getHolder().addCallback(this);
setFocusable(true);
activeImage = null;
activePosition = new Point();
}
/**
 * 
 * @return list of word parts
 */
private ArrayList<WordParts> NewPartList(Context context) {
ArrayList<WordParts> newParts = new ArrayList<WordParts>();
newParts.add(new WordParts(context, new Point(400, 100), "foo"));
newParts.add(new WordParts(context, new Point(200, 100), "bar");
return newParts;
}
@Override
protected void onDraw(Canvas canvas) {
Log.d(TAG, "inside onDraw");
canvas.drawColor(Color.BLACK);
if (activeImage != null) {
activeImage.NewPosition(activePosition);
}
draw(canvas, BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher), new Point(100, 300));
draw(canvas, BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher), new Point(200, 300));
draw(canvas, BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher), new Point(300, 300));
for (WordParts wp : wordPartList) {
Point center = wp.getCenter();
Log.d(TAG, String.format("Word part %s at x=%d, y=%d", wp.mWordPartString, center.x, center.y));
draw(canvas, wp.getBitMap(), center);
}

}     
@Override    
public boolean onTouchEvent(MotionEvent event) {
Log.d(TAG, String.format("inside on touch, event is %s", event.toString()));
switch (event.getActionMasked()) {
case MotionEvent.ACTION_DOWN:
// if within wordPart, set as active
for (WordParts wp : wordPartList) {
if (wp.isInside(event)) {
activeImage = wp;
Log.d(TAG, String.format("Touch down inside word part %s", wp.mWordPartString));
break; // end iteration
}
}

break;
case MotionEvent.ACTION_UP:
for (WordParts wp : wordPartList) {
if (activeImage == wp){
wp.endTouch();
Log.d(TAG, String.format("Released word part %s", wp.mWordPartString));
}
}
activeImage = null;
break;

default:
break;
}
activePosition.x = (int) event.getX();
activePosition.y = (int) event.getY();
if (activeImage != null)
this.postInvalidate(); // force call to onDraw
return true;
}

/**
 * Draw the bitmap centered at specified point
 * @param canvas - target of drawing
 * @param bm - bitmap to draw
 * @param centerPt
 */
public void draw(Canvas canvas, Bitmap bm, Point centerPt) {
canvas.drawBitmap( bm, 
   centerPt.x - (bm.getWidth() / 2), 
   centerPt.y - (bm.getHeight() / 2), null); 
Log.d(TAG, String.format("canvas %s, bm %s, point %s", canvas.toString(), bm.toString(), centerPt.toString()));
}
public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) 
{     

}
public void surfaceCreated(SurfaceHolder holder) {
Log.d("surface", "Surface created");        
setWillNotDraw(false);
            }
public void surfaceDestroyed(SurfaceHolder holder) {
Log.d("surface", "Surface destroyed");
}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:38:19.783

我*怀疑*这是问题所在：

```
if (activeImage != null) {
    activeImage.NewPosition(activePosition);
} 
```

Unfortunately we don't have the code for unconventionally-named `NewPosition`, but presumably it sets the value of a field in a `WordParts`. If you set the value of two fields within two separate `WordParts` objects to refer to the same `Point`, then later when you change the values within that `Point` like this:

```
activePosition.x = (int) event.getX();
activePosition.y = (int) event.getY(); 
```

then yes, those changes *will* be visible via both `WordParts` objects, as they both refer to the same object.

If you're new to Java, I would *strongly* advise you to learn the basics of the language through simple console apps. Learn about objects, references and primitives, inheritance, the core collections and IO etc, *then* start working in the trickier environment of UIs and mobile.

# nhibernate - 使用 HNibernate HiLo 生成器以编程方式获取唯一整数

> ID：12801083
> 
> 赞同：0
> 
> 时间：2012-10-09T13:24:18.947
> 
> 标签：nhibernate, hilo

我需要生成一个唯一的整数，我用它来识别外部系统的订单。我在应用程序中使用 NHibernate HiLo 生成器，所以我可以通过编程方式访问生成器，让它返回一个唯一的整数吗？我不需要将其存储在任何数据库键中。我只想使用生成唯一整数的 NH 功能。

我将在 HiLo 表中添加一列，该列仅用于这个唯一的数字序列，而不用于任何真正的数据库键。例如，假设我在 hibernate_unique_key 表中添加了一列“Foo”。

然后我可以做点什么吗：

```
int n = GetNextId("Foo"); 
```

我只是在哪里传递列的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:07:46.183

您应该能够仅实例化`TableHiLoGenerator`or `SequenceHiLoGenerator`，对其进行配置并`Generate`在需要值时调用。

调用时`Generate()`，您可以传递`session.GetSessionImplementation()`第一个参数和`null`第二个参数。

现在，请记住，如果您没有真正存储这些数字，那么使用数据库生成它们可能不是最好的主意。GUID 实际上是唯一的 128 位数字，可以更轻松地生成。

# ruby-on-rails - 无法使用 Rails 运行 RabbitMq

> ID：12801086
> 
> 赞同：0
> 
> 时间：2012-10-09T13:24:31.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rabbitmq

我正在努力在 Rails 上运行 RabbitMq。我在我的本地机器上运行这个[示例](https://github.com/rabbitmq/rabbitmq-cloudfoundry-samples/tree/master/rails)，我试图调整，因为我不想使用 CloudFoundry。我知道这一点。我收到很多错误，例如未定义的方法无名交换、未定义的方法发布。我如何以这种方式对其进行调整，以便我可以在本地机器上运行并在除 cloudfoundry 之外的任何其他平台上部署相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:26:14.880

你可以试试[Iron.io](http://iron.io)的 IronMQ。有大量免费产品，您可以通过排队快速启动和运行。此外，任何平台都将 IronMQ 作为插件选项。

# linux - (QNAP NAS)Linux - 安装 pycurl (libcurl.a not found)

> ID：12801091
> 
> 赞同：2
> 
> 时间：2012-10-09T13:25:05.200
> 
> 标签：linux, libcurl, pycurl

我正在尝试在我的 NAS（QNAP TS-459）上安装 Pycurl，但出现错误“libcurl.a：没有这样的文件或目录”。以下是来自控制台的日志：

```
[admin@MYSERVER pycurl-7.19.0]# uname -mrs
Linux 2.6.33.2 i686

ipkg status | grep curl
Depends: zlib, openssl, libcurl, diffutils, rcs, expat
Package: libcurl
Package: libcurl-dev
Depends: libcurl
Package: py26-curl
Depends: python26, libcurl (>=7.19.0), openssl
Depends: libcurl, libxml2, openssl, zlib

python setup.py install
ldd /usr/lib/libcurl.soobjdump -Tlddobjdump -T/usr/lib/libcurl.sosodumpls /usr/lib/libcurl.soequery belongscho LD_LIBRARY_PATH$LD_LIBRARY_PATH$ls -la /usr/local/lib/libcurl*echo $LIBCURL_IPK_DIRwhich libcurllocatepython setup.py install
Using curl-config (libcurl 7.24.0)
running install
running build
running build_py
running build_ext
building 'pycurl' extension
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DHAVE_CURL_OPENSSL=1 -DHAVE_CURL_OPENSSL=1 -DHAVE_CURL_OPENSSL=1 -DHAVE_CURL_SSL=1 -I/opt/include -I/share/MD0_DATA/.qpkg/Python/include/python2.7 -c src/pycurl.c -o build/temp.linux-i686-2.7/src/pycurl.o
gcc -pthread -shared build/temp.linux-i686-2.7/src/pycurl.o -L/opt/lib -L/home/slug/optware/ts509/staging/opt/lib -L/home/slug/optware/ts509/staging/lib -L/home/slug/optware/ts509/staging/lib -L/home/slug/optware/ts509/staging/opt/lib -L/home/slug/optware/ts509/staging/lib -L/home/slug/optware/ts509/staging/lib -lcurl -lssl -lssl -lssl -lcrypto -lrt -lz -o build/lib.linux-i686-2.7/pycurl.so -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/slug/optware/ts509/staging/opt/lib /opt/lib/libcurl.a -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/slug/optware/ts509/staging/opt/lib
gcc: /opt/lib/libcurl.a: No such file or directory
error: command 'gcc' failed with exit status 1
[admin@MYSERVER pycurl-7.19.0]# ls /opt/lib
lib/     libexec/ 
[admin@MYSERVER pycurl-7.19.0]# ls /opt/lib/libcu*
/opt/lib/libcurl.so        /opt/lib/libcurl.so.4.2.0
/opt/lib/libcurl.so.4
[admin@MYSERVER pycurl-7.19.0]# 
```

知道如何解决问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:04:29.733

今天我在 Synology NAS 上遇到了同样的问题。问题是两者都`curl-config --libs`返回`curl-config --static-libs`一些输出。因此，pycurl 尝试为静态库和共享库进行编译。但是没有用于`libcurl`包的静态库。所以，我通过以下方式解决了这个问题：

`curl-config --static-libs`如果`curl-config --built-shared`返回，请不要运行`yes`。

这是补丁：

```
diff --git a/setup.py b/setup.py
index 1c3831b..69bc8b8 100644
--- a/setup.py
+++ b/setup.py
@@ -96,9 +96,13 @@ else:
                 include_dirs.append(e[2:])
         else:
             extra_compile_args.append(e)
-    libs = split_quoted(
-        os.popen("'%s' --libs" % CURL_CONFIG).read()+\
-        os.popen("'%s' --static-libs" % CURL_CONFIG).read())
+    libs = os.popen("'%s' --libs" % CURL_CONFIG).read()
+    is_libcurl_shared = os.popen("'%s' --built-shared" % CURL_CONFIG).read()
+    is_libcurl_shared = string.strip(is_libcurl_shared)
+    if is_libcurl_shared != 'yes':
+        libs = libs + \
+            os.popen("'%s' --static-libs" % CURL_CONFIG).read()
+    libs = split_quoted(libs)
     for e in libs:
         if e[:2] == "-l":
             libraries.append(e[2:]) 
```

适用于 v7.19.0。或者从[这里](https://github.com/ashumkin/pycurl-cvs/blob/v7.19.0-synology-fix/setup.py)获取最新版本的**setup.py**

# ruby-on-rails - 如何将计数器缓存值设置为给定值？

> ID：12801095
> 
> 赞同：1
> 
> 时间：2012-10-09T13:25:12.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations, counter-cache

我正在使用 Ruby on Rails 3.2.2，我想将计数器缓存值设置为“自定义”值。也就是说，此时（在我的迁移文件中）我正在尝试使用以下代码：

```
def up
  add_column :articles, :comments_count, :integer, :default => 0

  Article.reset_column_information

  Article.find_each do |article|
    # Note: The following code doesn't work (when I migrate the database it   
    # raises the error "comments_count is marked as readonly").
    Article.update_column(:comments_count, article.custom_comments.count)
  end
end 
```

*换句话说，我想将`:comments_count`值*（计数器缓存数据库表列）*设置为自定义值*（在我的情况下，该值是`article.custom_comments.count`-*注意*：这`custom_comments`不是 ActiveRecord 关联，而是`Article`模型类中声明的方法；它返回一个整数值）*，与关联**无关**`has_many`。*

也许，我可以/应该使用类似的东西

```
Article.reset_column_information

Article.find_each do |article|
  Article.reset_counters(article.id, ...)
end 
```

但似乎该方法没有关联[`reset_counters`](http://api.rubyonrails.org/classes/ActiveRecord/CounterCache.html#method-i-reset_counters)就无法工作。`has_many`

*如何将`:comments_count`计数器缓存值设置为与“自定义关联”相关的给定值？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-16T12:23:37.563

接受答案包括迭代方法，这对于:`comment_count`以外的现有值是错误的，*相*对于它的当前值设置计数器。要设置绝对值，请执行以下操作：`0``update_counter`

 *```
Article.update_counters(article.id, comments_count: comments.count - article.comments_count) 
```

如果您无论如何都必须获取每一行的正确计数，您还可以更轻松地使用`Article.reset_counters(article.id, :comments)`

要使用更少的查询来做到这一点，请使用以下命令：

```
Author
  .joins(:books)
  .select("authors.id, authors.books_count, count(books.id) as count")
  .group("authors.id")
  .having("authors.books_count != count(books.id)")
  .pluck(:id, :books_count, "count(books.id)")
  .each_with_index do |(author_id, old_count, fixed_count), index| 
    puts "at index %7i: fixed author id %7i, new books_count %4i,  previous count %4i" % [index, author_id, fixed_count, old_count] if index % 1000 == 0
    Author.update_counters(author_id, books_count: fixed_count - old_count)
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:28:13.847

您将 comments_count 描述为计数器缓存，但计数器缓存被严格定义为 has_many 关系中关联记录的数量，您说这不是。

如果获得所需值的唯一方法是通过 Article 上的方法，那么您将不得不遍历所有 Article 对象并更新每个对象。

```
Article.find_each do |article|
  article.update_attribute(:comments_count, article.custom_comments.count)
end 
```

这是非常低效的，因为它正在加载和保存每个对象。如果 custom_comments 的定义（您实际上并没有解释）是您可以用 SQL 表达的东西，那么在数据库中进行此更新无疑会更快。这可能看起来像这样：

```
CREATE TEMP TABLE custom_comment_counts_temp AS
  SELECT articles.id as id, count(comments.id) as custom_comments 
    FROM articles 
    LEFT JOIN comments ON articles.id = comments.article_id
    WHERE <whatever condition indicates custom comments>
    GROUP BY articles.id;

CREATE INDEX ON custom_comments_counts_temp(id);

UPDATE articles SET comments_count = (SELECT custom_comments FROM custom_comment_counts_temp WHERE custom_comment_counts_temp.id = articles.id);

DROP TABLE custom_comment_counts_temp; 
```

（这假设 postgresql - 如果您使用的是 MySQL 或其他数据库，它可能看起来不同。如果您根本不使用关系数据库，则可能不可能）

此外，由于根据 Rails 相当狭窄的定义，它不是计数器缓存，因此您需要编写一些回调来保持这些值更新 - 可能是`after_save`评论回调，如下所示：

评论.rb：

```
after_save :set_article_custom_comments

def set_article_custom_comments
  a = self.article
  a.update_attribute(:comments_count, a.custom_comments.count)
end 
```*

# php - Zend 框架 2 | 类型的实例

> ID：12801103
> 
> 赞同：1
> 
> 时间：2012-10-09T13:25:42.703
> 
> 标签：php, zend-framework2

我想知道为什么我在检查这个时会得到不同的结果：

这个的输出：

```
get_class($request); 
```

“Zend\控制台\请求”

第一个例子（输出为真）：

```
 use Zend\Console\Request as ConsoleRequest,

    class Module {
        public function test() {

          var_dump($request instanceof ConsoleRequest);
        }
    } 
```

第二个例子（输出为假）：

```
 class Module {
        public function test() {

          var_dump($request instanceof Zend\Console\Request);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:39:36.100

在第二种情况下，尝试使用完全限定的类名：

```
class Module {
    public function test() {

      var_dump($request instanceof \Zend\Console\Request);
    }
} 
```

否则，PHP 会尝试在您当前的命名空间中查找名为 Zend 的子命名空间。

# android - 在android中打开键盘时如何向上移动我的小部件

> ID：12801104
> 
> 赞同：1
> 
> 时间：2012-10-09T13:25:42.517
> 
> 标签：android, shell

当我在全屏模式下触摸编辑框时，如何在键盘打开时向上移动小部件。我使用了下面的代码，但它没有用，所以请帮助我，我完全卡住了。
android:windowSoftInputMode="adjustResize"
我已经使用此代码并在清单中设置但它不起作用提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:37:21.093

尝试给予：

```
 android:windowSoftInputMode="adjustPan" 
```

在你的清单中。

# c - 数组的realloc索引

> ID：12801105
> 
> 赞同：2
> 
> 时间：2012-10-09T13:25:43.983
> 
> 标签：c, arrays, malloc, realloc

有一个数组：

```
type **a;

a[0][data_0]
a[1][data_1]
a[2][data_2]
a[n][data_n] 
```

通过执行以下操作扩展此类数组时：

1.  `realloc()`到. `a`_`sizeof(type*) * (n + 1)`
2.  `malloc()` `(*a[n])`适合大小可变的`data_n`地方。`data_n`

`realloc()`of会不会有问题`a`？

`a[2]`总是指向`data_2`，即使在`a`内存中移动，或者该链接是否会丢失？

据我了解，我最终在内存中得到了这样的结果：

```
 Address               Address
a[0] => 0x###131, (*a[0]) => 0x####784
a[1] => 0x###135, (*a[1]) => 0x####793
a[2] => 0x###139, (*a[2]) => 0x####814 
```

在`realloc()`我最终得到类似的东西之后：

```
 Address               Address
a[0] => 0x###216, (*a[0]) => 0x####784
a[1] => 0x###21a, (*a[1]) => 0x####793
a[2] => 0x###21e, (*a[2]) => 0x####814
a[n] => 0x###zzz, (*a[n]) => 0x####yyy 
```

它是否正确？data_n 段被单独留下，或者它们也可以被移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:29:22.500

如果要重新分配到更大的大小，则原始字节不会改变。

例子：

```
char **a = malloc(n*sizeof(char *));
for (i=0; i!=n; ++i) {
  a[i] = malloc(m);
}

a = realloc(a,(n+1)*sizeof(char *));
// a[0]...a[n-1] are still the same
a[n] = malloc(m); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:29:44.260

> 它是否正确？data_n 段被单独留下，或者它们也可以被移动？

是的，`a[i]`, for的值`0 <= i < n`被复制到新位置，因此指针指向相同的位置，`data_i`并且不会移动。

> `realloc()`of会不会有问题`a`？

当然， a`realloc`总是可以失败并返回`NULL`，所以你不应该这样做

```
a = realloc(a, new_size); 
```

但使用临时变量来存储`realloc`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:28:39.683

是的，即使在 realloc() 之后，旧值的地址也保持不变

您可以在该程序的输出中看到：

```
shubhanshm@BANLSHUBHANSH /cygdrive/f/My Codes/Practice/C
$ ./a.exe
Original Array details before using realloc():
Printing array with size 4x4
1       0       0       19
2       4       0       19
3       6       9       27
4       8       12      16
Printing array addresses with size 4x4
a[0][0]=1       ->0x20010260
a[0][1]=0       ->0x20010264
a[0][2]=0       ->0x20010268
a[0][3]=19      ->0x2001026c

a[1][0]=2       ->0x20010270
a[1][1]=4       ->0x20010274
a[1][2]=0       ->0x20010278
a[1][3]=19      ->0x2001027c

a[2][0]=3       ->0x20010280
a[2][1]=6       ->0x20010284
a[2][2]=9       ->0x20010288
a[2][3]=27      ->0x2001028c

a[3][0]=4       ->0x20010290
a[3][1]=8       ->0x20010294
a[3][2]=12      ->0x20010298
a[3][3]=16      ->0x2001029c

Array details after using realloc():
Printing array with size 5x4
1       0       0       19
2       4       0       19
3       6       9       27
4       8       12      16
5       10      15      20
Printing array addresses with size 5x4
a[0][0]=1       ->0x20010260
a[0][1]=0       ->0x20010264
a[0][2]=0       ->0x20010268
a[0][3]=19      ->0x2001026c

a[1][0]=2       ->0x20010270
a[1][1]=4       ->0x20010274
a[1][2]=0       ->0x20010278
a[1][3]=19      ->0x2001027c

a[2][0]=3       ->0x20010280
a[2][1]=6       ->0x20010284
a[2][2]=9       ->0x20010288
a[2][3]=27      ->0x2001028c

a[3][0]=4       ->0x20010290
a[3][1]=8       ->0x20010294
a[3][2]=12      ->0x20010298
a[3][3]=16      ->0x2001029c

a[4][0]=5       ->0x20048300
a[4][1]=10      ->0x20048304
a[4][2]=15      ->0x20048308
a[4][3]=20      ->0x2004830c 
```

上述输出的源代码为：

```
#include<stdio.h>
#include<stdlib.h>

#define mul(x, y) (((x)+1)*((y)+1))

void printArr(int **a, int r, int c){
    int i, j;
    printf("Printing array with size %dx%d\n", r, c );
    for(i = 0; i < r; i++){
        for(j = 0; j < c; j++){
            printf("%d\t", a[i][j]);
        }
        printf("\n");
    }
}

void printArrAddress(int **a, int r, int c){
    int i, j;
    printf("Printing array addresses with size %dx%d\n", r, c );
    for(i = 0; i < r; i++){
        for(j = 0; j < c; j++){
            printf("a[%d][%d]=%d\t->%p\n", i, j, a[i][j], &a[i][j]);
        }
        printf("\n");
    }
}

int main(){
    int **a;
    int n = 4;
    a = (int**)malloc(sizeof(int*)*n);
    int i, j;
    for(i = 0; i< n; i++){
        a[i] = (int*)malloc(sizeof(int)*(i+1));
        for(j = 0; j < i+1; j++ )a[i][j] = mul(i, j);
    }
    printf("Original Array details before using realloc():\n");
    printArr(a, n, n);
    printArrAddress(a, n, n);

    a = (int**)realloc(a, sizeof(int*)*(n+1));
    a[n] = (int*)malloc(sizeof(int)*n);
    for( i = 0; i< n; i++){
        a[n][i] = mul(n, i);
    }
    printf("Array details after using realloc():\n");
    printArr(a, n+1, n);
    printArrAddress(a, n+1, n);
    return 0;
} 
```

我希望这可以澄清事情。

# r - 并行化 rfcv() 函数以在 randomForest 包中进行特征选择

> ID：12801108
> 
> 赞同：2
> 
> 时间：2012-10-09T13:25:50.640
> 
> 标签：r, parallel-processing, random-forest, feature-selection

我想知道是否有人知道如何并行化R-package ['randomForest'中实现的](http://cran.r-project.org/web/packages/randomForest/index.html)**rfcv()**函数。对不起，如果这个问题听起来很基本，但我尝试使用[“foreach”](http://cran.r-project.org/web/packages/foreach/index.html)来做到这一点，但没有任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:28:39.653

查看[caret](http://cran.r-project.org/package=caret)包及其文档。

它不仅更通用（允许比“仅”随机森林更多的模型），而且还集成了预处理和后处理 --- 同时还在可行的情况下为您提供并行执行，特别是对于评估和交叉验证，这是一个“令人尴尬的并行”问题。

# google-drive-api - 部分下载云端硬盘文档

> ID：12801119
> 
> 赞同：3
> 
> 时间：2012-10-09T13:26:11.987
> 
> 标签：google-drive-api

我想对 Google Drive 中的所有文件使用[部分下载](https://developers.google.com/drive/manage-downloads#partial_download)。

对于具有“downloadUrl”属性的文件 - 部分下载效果很好。但部分下载不适用于“exportLinks”。

```
range = "bytes=0-100"
result = client.execute!(:uri => url, :headers => {"Range" => range})
result.body.size
 => 3960 
```

如何使用 Google 文档（文档、电子表格、演示文稿等）的部分下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:17:09.800

有一种说法是导出链接的部分下载没有意义。导出下载中包含的媒体内容由 Google 文件转换过程动态生成。不能保证导出的数据总是相同的，例如。Google 可以轻松调整其 toHtml 转换，或在 PDF 中添加额外的元数据。

你的用例是什么——也许有不同的方法？在 AppEngine 上创建一个代理下载导出的内容然后提供部分下载应该不会太难。

# graylog2 - 自定义 GrayLog2 GELF 视图

> ID：12801126
> 
> 赞同：2
> 
> 时间：2012-10-09T13:26:45.710
> 
> 标签：graylog2

GrayLog2 流默认显示：日期、主机、严重性、设施等。我想删除冗余字段（主机、严重性和设施）。

是否可以自定义此视图？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:50:40.140

该视图可通过编辑文件 _table.html.erb 进行自定义

该文件位于 /data/servers/equinox_logs-apache/log_ui/app/views/messages

您可以注释掉 html 中不需要的列。

# c# - SL5 中 RIA 的批量更新

> ID：12801132
> 
> 赞同：1
> 
> 时间：2012-10-09T13:26:58.067
> 
> 标签：c#, silverlight, wcf-ria-services, silverlight-5.0

c# 我需要更新在 observableCollection 上退出的 4 个对象（实体）。如果它们未绑定到视图 (UI)

1.  最好的方法是什么或如何使用 RIA 更新它们？
2.  我不想创建 4 次访问数据库。
3.  这会生成 4 个 sql 更新命令吗？
4.  如果在用户决定更改什么时有一个时间框架，可能是其他用户更改实体之一。如果是这样呢？
5.  我可以阅读与这些问题相关的任何链接吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:38:39.543

至少应该知道您需要进行哪种更新，根据您的问题，我只是假设您需要用户更改某些实体上的一些任意值，因此，不能进行“优化”和组更新。

1.  domaincontext 将跟踪您的更改并将它们作为一个整体发送到单个变更集中。
2.  您将对数据库执行的次数与 WCF Ria 服务无关，而是您的数据层的一个功能，但是，如果您使用像 nHibernate 这样的 ORM，请查看它的批量大小，或 EF 取看看他的扩展：[http ://weblogs.asp.net/pwelter34/archive/2011/11/29/entity-framework-batch-update-and-future-queries.aspx](http://weblogs.asp.net/pwelter34/archive/2011/11/29/entity-framework-batch-update-and-future-queries.aspx)
3.  通常是的。我所知道的任何开箱即用的数据层解决方案都会生成 4 个不同的更新
4.  这称为**并发**。同样，您应该在数据层进行管理。在大多数情况下，如果其他用户更改了该行，则引发异常是一种合理的方式
5.  看看这个[http://blogs.infosupport.com/optimistic-concurrency-with-wcf-ria-services-and-the-entity-framework/](http://blogs.infosupport.com/optimistic-concurrency-with-wcf-ria-services-and-the-entity-framework/)

我建议您将您的问题重新表述为更具体的论点。其实太宽泛了，每一个点都需要分析你的需求，不可能指出方法。

# objective-c - 衡量 iOS 应用性能的策略

> ID：12801133
> 
> 赞同：0
> 
> 时间：2012-10-09T13:27:01.987
> 
> 标签：objective-c, ios, xcode, instruments

我有一个我想测量的 iOS 应用程序的简单案例：一个使用自定义扩展单元格构建的 UITableView。每个单元格是一个主视图和一些子视图的组合。基于某些标准，我在表格单元格中隐藏或显示子视图。

假设我必须决定是否在需要时添加子视图，或者使用所有插座构建 xib 并在需要时隐藏/显示。

在这两者之间做出决定的最佳方法是什么？

假设您还没有阅读有关单元格组成的 Apple 指南，您将通过代码（例如通过放置 NSLog 语句）或通过 Xcode 工具（选择哪一个等等）执行哪些具体步骤来确认选择.

这对我来说是一个相当新的问题，所以请尽可能具体。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T13:31:57.097

这个[http://blog.giorgiocalderolla.com/2011/04/16/customizing-uitableviewcells-a-better-way/](http://blog.giorgiocalderolla.com/2011/04/16/customizing-uitableviewcells-a-better-way/)是一个很好的资源。

拥有许多具有透明背景的子视图会降低滚动性能。

动态添加子视图可能难以跟踪，如果您没有“正确”执行此操作，那么您将通过单元重用排队机制得到具有太多“额外”子视图的单元。

您必须在单元格本身的 init 方法中添加子视图，而不是在数据源的 cellForRow 方法中。（除非您使用某种方式来跟踪任何给定子视图的创建/可用性，例如 viewWithTag 等）

# php - 根据其他两个选择框填写选择框 - jquery

> ID：12801137
> 
> 赞同：0
> 
> 时间：2012-10-09T13:27:04.867
> 
> 标签：php, jquery, mysql

我有三个下拉菜单。根据在两个列表中选择的项目，应填写第三个列表（ajax 帖子）。

这是html代码：

```
Source Language:
<select name='source_lang' id='source_lang' $dis size='6'>
<option value='en'>EN</option>
<option value='sq'>SQ</option>
.....
</select>

Target Language:
<select name='targ_lang' id='targ_lang' $dis size='6'>
<option value='en'>EN</option>
<option value='sq'>SQ</option>
.....
</select>

Supplier:
<select name='supplier_id' id='supplier_id'>
<option value='1'>Supplier 1</option>
<option value='2'>Supplier 2</option>
</select> 
```

更改目标语言和源语言时，应填写供应商选择列表。

任何人都可以帮助我使用 jquery 吗？我需要 ajax 发布源语言、目标语言值，并作为响应填写供应商选择列表和数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:39:52.963

这是你要找的东西吗？

```
$('#targ_lang, #source_lang').change(function(){
       $.ajax({
          url : '',
          method : 'post',
          type : 'json',
          data : {
            select1 : $('#targ_lang').val(),
            select2 : $('#source_lang').val()
          },
          complete : function(result){
            var options = $.parseJSON(result);
            $('#supplier_id').html("");
            for(i=0; i < options.length; i++) {
                $('#supplier_id').append(
                     '<option value="'+ options[i] + '">' + 'Supplier' + options[i] + '</option>'
                );
            }
          });
      });
}); 
```

在 PHP 端，您需要像这样发送结果：

```
$array = new Array(1,2,3,4); // supplier IDs
echo json_encode($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:46:19.500

使用 jQuery 的[.post()](http://api.jquery.com/jQuery.post/)方法的示例：

```
$('#targ_lang, #source_lang').change(function(){
   $.post("test.php", { source: $('#source_lang').val(), target: $('#targ_lang').val()},
     function(data) {
       //Change the data of the 3rd select
   });
}); 
```

# javascript - 如何使用 mongodb javascript 本机驱动程序访问 mongodb find() 操作的结果

> ID：12801141
> 
> 赞同：1
> 
> 时间：2012-10-09T13:27:12.343
> 
> 标签：javascript, node.js, mongodb

我在 mongodb 中有一个数据库，我通过 NodeJS 和 mongodb 本机驱动程序连接到它。我正在尝试编写一个 javascript 代码以在浏览器中打印通过 db.foo.find() 操作从数据库中检索到的信息。

我目前能够打印 json 数据的值部分。但是，我还需要打印关键部分。

示例：json data { key1:v1, key2:v2 ....} 我需要一种方法来通过 javascript 代码访问 key1 和 key2 值，而无需预先知道它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:32:22.687

您可以使用[for...in 语法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)来迭代对象的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:47:45.563

```
Object.keys(json).forEach(function (key) {
    console.log(key);
}); 
```

# sql - SQL Select 使用 distinct 和 Cast

> ID：12801145
> 
> 赞同：0
> 
> 时间：2012-10-09T13:27:30.380
> 
> 标签：sql, select, casting, distinct

> **可能重复：**
> [SQL 使用 CAST 选择 DISTINCT](https://stackoverflow.com/questions/12790953/sql-select-distinct-using-cast)

让我再试一次......我不是一个 sql 人，所以请耐心等待我尝试解释这个......我有一个`t_recordkeepingleg`包含三列数据的表。Column1 的名称`LEGTRIPNUMBER`恰好是一个以字母 Q 开头后跟 4 个数字的字符串。我需要去掉 Q 并将剩余的 4 个字符（数字）转换为整数。到目前为止，每个人都和我在一起吗？此表的 Column2 名为`LEGDATE`。Column3 被命名为`LEGGROUP`.

这是输入场景

```
LEGTRIPNUMBER    LEGDATE      LEGGROUP
Q1001            08/12/12       0001
Q1001            09/15/12       0002
Q1002            09/01/12       0001
Q1002            09/08/12       0003
Q1002            09/09/12       0002 
```

如您所见，输入表中有`LEGTRIPNUMBER`不止一次出现的行。我只想要第一次出现。

这是我当前的选择语句 - 它有效但返回所有行。

```
SELECT *, 
   CAST(
       substring("t_RecordkeepingLeg"."LEGTRIPNUMBER",2,4) as INT
   ) as Num_Trip_Num
   FROM   "1669"."dbo"."t_RecordkeepingLeg" "t_RecordkeepingLeg" 
   Where left "t_RecordkeepingLeg"."LEGTRIPNUMBER",1) = 'Q' 
```

我想修改它，使它只选择 Qnnnn 的一次出现。当该行被选中时，我想要拥有`LEGDATE`并`LEGGROUP`可供我使用。我该怎么做呢？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:33:03.843

可以像下面这样简单吗？我刚刚在 leggroup 上添加了条件为 0001

```
SELECT *,  
   CAST(substring("t_RecordkeepingLeg"."LEGTRIPNUMBER",2,4) as INT) as Num_Trip_Num 
 FROM   "1669"."dbo"."t_RecordkeepingLeg" "t_RecordkeepingLeg"  
 Where left ("t_RecordkeepingLeg"."LEGTRIPNUMBER",1) = 'Q'
    and "t_RecordkeepingLeg"."LEGGROUP"='0001' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:36:38.987

如果您的表中有一个唯一的主键，您可以执行以下操作；

```
SELECT CAST(
   substring("t_RecordkeepingLeg"."LEGTRIPNUMBER",2,4) as INT
) as Num_Trip_Num
FROM   "1669"."dbo"."t_RecordkeepingLeg" "t_RecordkeepingLeg" 
Where "t_RecordkeepingLeg"."ID" In(
   Select Min("t_RecordkeepingLeg"."ID")
   From "1669"."dbo"."t_RecordkeepingLeg" "t_RecordkeepingLeg" 
   Where left ("t_RecordkeepingLeg"."LEGTRIPNUMBER",1) = 'Q'
   Group By "t_RecordkeepingLeg"."LEGTRIPNUMBER"
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:47:09.723

*对于 distinct ，您想要`LEGDATE`&的*哪些*值？有多种不明确的可能性，“第一次出现”的概念只有在明确的顺序下才有效。`LEGGROUP``LEGTRIPNUMBER`*

 *`LEGDATE`例如，获取最早的值；

```
select Num_Trip_Num, LEGDATE, LEGGROUP from (
    select
       cast(substring(t_RecordkeepingLeg.LEGTRIPNUMBER, 2, 4) as INT) as Num_Trip_Num,
       row_number() over (partition by substring(t_RecordkeepingLeg.LEGTRIPNUMBER, 2, 4) order by t_RecordkeepingLeg.LEGDATE asc) as row,
       t_RecordkeepingLeg.LEGDATE,
       t_RecordkeepingLeg.LEGGROUP
    from t_RecordkeepingLeg
       where left (t_RecordkeepingLeg.LEGTRIPNUMBER, 1) = 'Q'
) T
    where row = 1 
```*

# asp.net-mvc - MVC3 Ajax.BeginForm 在验证之前挂钩提交事件

> ID：12801156
> 
> 赞同：0
> 
> 时间：2012-10-09T13:28:05.443
> 
> 标签：asp.net-mvc, form-submit, unobtrusive-validation

我正在使用带有不显眼验证的 Ajax.BeginForm。我想给用户一个选项，用最少数量的验证字段（可能为零）保存数据，但允许在空时保存一些必填字段。

我认为我的要求是：

*   向提交按钮添加事件处理程序
*   手动执行验证
*   确定哪些字段由于为空而未通过验证
*   确定哪些字段未通过验证数据有误

我可以通过在“文档就绪”中添加以下内容来捕获提交事件并验证表单

```
$(document).ready(function () {

    $('#submit-11').click(function () {
        if (!$("#form0").valid()) {
            alert("woops");
            return false;
        }
        return true;
    }); 
```

我现在的问题是如何识别哪些字段验证失败以及失败的原因。

我在谷歌上找不到任何东西（尽管这可能是我的搜索技能的一个功能，而不是问题所在。）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:19:52.327

你有没有尝试过

event.preventDefault();

只是在提交点击之后？ [http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

现在关于你更大的问题。我认为您可以使用 jquery 完成所有这些操作，这是一个示例

```
$(document).ready(function () {
    //form validation rules, including custom rules you'd like
    $("#form").validate({
        rules: {
            fieldOne: { required: true },
            fieldTwo: { required: function () { /*custom validation*/return true; } }
        },
        messages: {
            fieldOne: { required: "error" },
            fieldTwo: { required: "error" }
        }
    });
    //handle submit click
    $("#btnSubmit").click(function (event) {
        event.preventDefault(); //stops form from submitting immediately 
        if ($("#form").valid()) { //perform validation 
            //submit your data if valid
            $.post("/your/action", $form.serialize(), function (data) { 
                //do something with the result
            });
        }
    });

}); 
```

* * *

更新：所以也许你应该这样做，当你将验证处理程序添加到表单时，你可以实现 submitHandler 和 invalidHandler。现在你真正应该看的是 invalidHandler

```
 $(document).ready(function(){
            $("#form").validate({
                rules : {
                    field : {required : true}                   
                },
                messages : {
                    field : {required : ""}                 
                },
                submitHandler: function(form) {                     
                    form.submit(); //if all is good
                }, 
                invalidHandler: function(form, validator){
                    console.log(validator.errorList); //if something went wrong
                }
            }); 
```

此函数接收验证器，该验证器依次具有包含所有失败字段（和消息）的 errorList。例如，使用 chrome 的开发人员工具测试此代码，您将看到 errorList 中的内容。

# jakarta-ee - 使用 CTRL + F9 的 JRebel

> ID：12801157
> 
> 赞同：0
> 
> 时间：2012-10-09T13:28:23.080
> 
> 标签：jakarta-ee, struts2, maven-3, jrebel

我正在使用带有 struts2、Tiles、XML Validation、Properties 和 Tomcat 7 maven 插件的 maven 项目。

使用 Maven Tomcat 7 插件并与 JRebel 一起运行来测试我的工作和更改。对`-validation.xml`和`struts.xml`的更改`tiles.xml`不会反映在 JRebel 中。可能有插件可以与 struts 等一起使用。

**我所做的：**

我将 Tomcat 7 实例作为 JRebel 运行，`Ctrl``F9`如果我对 . 进行任何更改`-validation.xml`，`struts.xml`甚至`tiles.xml`创建任何文件，请按 (make project)。我刷新浏览器并更新更改，而无需使用 JRebel 停止/启动 Tomcat。

**我想知道，这是正确的方法还是我错过了什么？**

![叛逆者](../Images/81450e087aebd5baaa942e7207a44484.png)

**编辑：**

```
Struts2 version = 2.3.4.1
struts2-Tiles-Plugin = 2.3.4.1
Tiles-Core = 2.0.6

No xml filtering
struts.devMode=true 
```

*我在目标目录的类文件夹中看到所有 xml 文件。*

***rebel.xml -> 我在目标文件夹中看到并创建了它。***

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.zeroturnaround.com" xsi:schemaLocation="http://www.zeroturnaround.com http://www.zeroturnaround.com/alderaan/rebel-2_0.xsd">

    <classpath>
        <dir name="C:/Users/mypc/Desktop/Java/Projects/1_Struts2_Tiles_mvn/target/classes">
        </dir>
    </classpath>

    <web>
        <link target="/">
            <dir name="C:/Users/mypc/Desktop/Java/Projects/1_Struts2_Tiles_mvn/src/main/webapp">
            </dir>
        </link>
    </web>

</application> 
```

**项目结构**

![项目](../Images/7506508526c2665cbb648a3f72cf78b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:25:53.853

首先，请运行 JRebel 的夜间版本。Struts 2.3.4 中的一个变化打破了我们对它的集成。这已在夜间构建中修复，请使用它并查看它是否有帮助。每晚链接：http: [//zeroturnaround.com/software/jrebel/download/early-access/](http://zeroturnaround.com/software/jrebel/download/early-access/)

其次，rebel.xml 的内容看起来是正确的。确保 rebel.xml 位于 target/classes 目录中。它应该转到 .jar 文件的根目录（在构建 .jar 模块时）或 WEB-INF/classes （在构建 .war 模块时）。

JRebel 是否会在您正在运行的应用程序中重新加载对类或其他资源的更改？如果确实重新加载了其他修改并且只是那些 .xml 文件中的配置没有，那么请将您的 jrebel.log 文件发送到 support@zeroturnaround.com 以进行问题发生的会话。有关启用 JRebel 日志记录的说明，请参见此处：http: [//zeroturnaround.com/software/jrebel/sending-log/](http://zeroturnaround.com/software/jrebel/sending-log/)。从日志文件中，我可以检查 JRebel 从何处找到各种 .xml 文件，以及在文件系统中更新它们后是否尝试重新加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:49:26.900

您使用哪个版本的 Struts 和 Tiles？对struts.xml 和tiles.xml 的更改绝对应该被JRebel 采纳。不确定在您的情况下validation.xml 文件是什么。

其次，你是否在包中包含了 rebel.xml 配置文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:51:11.083

[您是否通过 Maven ( http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html) )过滤 .xml 文件？在这种情况下，JRebel 不会重新加载您的更改。struts.properties 或 struts.xml 中的 struts.devMode=true 是否存在？

您是否检查过 JRebel 配置中的 struts2 插件选项？ ![在此处输入图像描述](../Images/c3375beb083dcd3b4d0a195050259f69.png)

# basic-authentication - ashx 文件的 IIS 基本身份验证

> ID：12801160
> 
> 赞同：1
> 
> 时间：2012-10-09T13:28:26.183
> 
> 标签：basic-authentication, ashx

我需要将我的 ashx 文件的身份验证方法设置为基本身份验证。我将应用程序身份验证方法设置为基本身份验证。应用程序上的所有文件都要求提供用户名和密码，但 ashx 文件除外。

我在 Google 和 Stack Overflow 上阅读了很多内容，但没有合适的答案。如何将 .ashx 文件添加到列表中？

在此先感谢 telmessos

# python - Python(2.6) cStringIO unicode 支持？

> ID：12801166
> 
> 赞同：4
> 
> 时间：2012-10-09T13:28:41.370
> 
> 标签：python, pycurl, stringio

我正在使用 python pycurl 模块从各种网页下载内容。因为我还想支持潜在的 unicode 文本，所以我一直在避免使用 cStringIO.StringIO 函数，根据 python 文档：[cStringIO - Faster version of StringIO](http://docs.python.org/library/stringio.html#module-cStringIO)

> 与 StringIO 模块不同，该模块不能接受无法编码为纯 ASCII 字符串的 Unicode 字符串。

... 不支持 unicode 字符串。实际上它声明它不支持无法转换为 ASCII 字符串的 unicode 字符串。有人可以向我澄清一下吗？哪些可以转换，哪些不能转换？

我已经使用以下代码进行了测试，它似乎与 unicode 一起工作得很好：

```
import pycurl
import cStringIO

downloadedContent = cStringIO.StringIO()
curlHandle = pycurl.Curl()
curlHandle.setopt(pycurl.WRITEFUNCTION, downloadedContent.write)
curlHandle.setopt(pycurl.URL, 'http://www.ltg.ed.ac.uk/~richard/unicode-sample.html')

curlHandle.perform()
content = downloadedContent.getvalue()

fileHandle = open('unicode-test.txt','w')
for char in content:
    fileHandle.write(char) 
```

并且文件被正确写入。我什至可以在控制台中打印全部内容，所有字符都显示得很好......所以我很困惑的是，cStringIO 失败在哪里？有什么理由我不应该使用它吗？

[注意：我使用的是 Python 2.6，需要坚持这个版本]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:32:46.130

任何仅使用 ASCII 代码点（字节值 00-7F 十六进制）的文本都可以转换为 ASCII。基本上，任何使用美式英语中不常用字符的文本都不是 ASCII。

在您的示例代码中，您没有将输入转换为 Unicode 文本；您将其视为未解码的字节。有问题的测试页面以 UTF-8 编码，您永远不会将其解码为 Unicode。

如果您要将值*解码*为 Unicode 字符串，您将无法将该字符串存储在`cStringIO`对象中。

您可能想了解 Unicode 和文本编码（如 ASCII 和 UTF-8）之间的区别。我可以推荐：

*   Joel Spolsky 的[最小 Unicode 文章](http://www.joelonsoftware.com/articles/Unicode.html)
*   [Python Unicode](http://docs.python.org/howto/unicode.html) HOWTO 。

# ios - 获取已安装应用程序的列表并启动特定应用程序

> ID：12801169
> 
> 赞同：0
> 
> 时间：2012-10-09T13:28:48.390
> 
> 标签：ios, ios6

有什么方法可以在 iOS 设备上获取已安装的应用程序？我知道这在 iOS 5 或更早版本中是不可能的，但也许 iOS 6 提供了一些关于此的信息？

如果这不可能，我认为可以做到这一点的唯一方法是尝试获取应用程序的 URL 方案并检查它们是否已安装。那是对的吗？

另外，要启动我应该使用`openURL:`from的应用程序`UIApplication`，对吗？如果是这种情况，我需要知道我启动的应用程序何时完成或想要关闭，以便我可以显示我的应用程序；那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:39:49.593

不，没有 API 可以检查安装了哪些应用程序（您可以在 SDK 文档中检查这一点）。

您最好的猜测是使用 URL 方案来检查是否安装了已知应用程序。启动应用程序的唯一方法是通过其应用程序 URL 方案，无法检查应用程序是否已启动，现在有默认方式要求其他应用程序重新打开您的应用程序。因此，如果他们构建了这样的选项，您将任由其他应用程序开发人员摆布。

# php - php preg_replace 字符。+ 仅数字 + utf-8

> ID：12801174
> 
> 赞同：0
> 
> 时间：2012-10-09T13:29:05.583
> 
> 标签：php, preg-replace

我找到了这个解决方案

```
$content=preg_replace('/[^\pL\p{Zs}]+/u', '', $string); 
```

它会删除除 utf-8 字符之外的所有内容，但我需要除 utf-8 字符和数字之外的所有内容，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:37:31.203

您可以尝试在范围内添加数字 (\d)

```
$content=preg_replace('/[^\d\pL\p{Zs}]+/u', '', $string); 
```

# asp.net - Visual Studio Express 在 asp.net 源代码模式下查看事件

> ID：12801175
> 
> 赞同：0
> 
> 时间：2012-10-09T13:29:06.620
> 
> 标签：asp.net, visual-studio

只有我吗...

我真的希望能够在 GUI 的源模式下添加/访问控件的事件，而不必切换到设计模式。

我知道我可以只输入事件，但我确实喜欢能够双击属性窗口中的框并自动为我创建事件处理程序的便利。另外，我可以看到控件可用的所有相关属性。

如果有一个设置/选项总是显示我还没有找到的事件，社区是否找到了这个切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:46:55.300

在.Net Web开发中，可以在页面上使用`AutoEventWireup`并调整为`true`

此功能通过反射将委托与事件相关联

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.configuration.pagessection.autoeventwireup (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.configuration.pagessection.autoeventwireup(v=vs.80).aspx)

注意：您不需要将事件关联到您的委托

# php - PHP 数字格式作为输出

> ID：12801176
> 
> 赞同：2
> 
> 时间：2012-10-09T13:29:14.967
> 
> 标签：php, function, numbers

> **可能重复：**
> [PHP 中的格式数字](https://stackoverflow.com/questions/5722588/format-number-in-php)

我想要我的数字格式`12 char in length`，就像`12`它应该输出 的值一样`000000000012`

示例：如果值为`123.50`，则应输出`000000012350`No decimal（100 的倍数）

任何想法，将使用哪个功能？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:30:43.377

您可以使用[str_pad](http://php.net/manual/en/function.str-pad.php)

```
 echo str_pad(12, 12, "0", STR_PAD_LEFT); 
```

您也可以使用[printf](http://php.net/manual/en/function.printf.php) 或[sprintf](http://www.php.net/manual/en/function.sprintf.php)

```
 printf("%012s", 12); 
```

输出

```
000000000012 
```

一些解决方法

```
var_dump(formatOutput("12"));
var_dump(formatOutput("123.50"));
var_dump(formatOutput("123.378201"));

function formatOutput($no,$max = 15) {
    $no = str_pad("1", strlen(substr(strrchr($no, "."), 1)), "0", STR_PAD_RIGHT) * $no;
    if(strpos($no, "."))
        $no = str_replace(".", "", $no) . "0" ;
    return str_pad($no, $max, "0", STR_PAD_LEFT);
} 
```

输出

```
string '000000000000012' (length=15)
string '000000000001235' (length=15)
string '000001233782010' (length=15) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:30:56.253

见`str_pad()` [http://php.net/manual/en/function.str-pad.php](http://php.net/manual/en/function.str-pad.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:33:00.863

```
string str_pad ( string $input , int $pad_length [, string $pad_string = " " [, int $pad_type = STR_PAD_RIGHT ]] ) 
```

此函数将在左侧、右侧或两侧填充的输入字符串返回到指定的填充长度。如果未提供可选参数 pad_string，则使用空格填充输入，否则使用 pad_string 中的字符填充直到限制。

```
input 
```

输入字符串。

```
pad_length 
```

如果 pad_length 的值为负数、小于或等于输入字符串的长度，则不会发生填充。

```
pad_string 
```

如果所需的填充字符数不能除以 pad_string 的长度，则 pad_string 可能会被截断。

```
pad_type 
```

可选参数 pad_type 可以是 STR_PAD_RIGHT、STR_PAD_LEFT 或 STR_PAD_BOTH。如果未指定 pad_type，则假定为 STR_PAD_RIGHT。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:36:40.937

```
 sprintf(); 
```

检查 php.net 中的 php 手动[sprintf() 函数](http://php.net/manual/en/function.sprintf.php)

随着`printf()`可以做的工作。检查上面链接中的示例 7。

# opengl - 没有 GLUT 或 GLEW 的 OpenGL VBO

> ID：12801177
> 
> 赞同：-2
> 
> 时间：2012-10-09T13:29:17.330
> 
> 标签：opengl, vbo

我正在尝试使用 OpenGL 创建我自己设计的 3D 环境模拟器，但是我的设计要求我对运行时循环有非常直接的控制。

我正在尝试学习如何在 OpenGL 中实现 VBO，但我很难找到足够的资源。根据我的发现，几乎每个人都以某种方式使用 FreeGLUT 或 GLEW 或 GLFW 或 GL3.h 来解决一些特定于平台的问题。

虽然这些选项可能很棒，但我只是不想将其他人的包用于此代码。我想弄清楚如何使用大多数机器上开箱即用的标准香草 OpenGL 来使用 VBO。我可以使用一些帮助来寻找 OpenGL 中不使用任何这些外部包的 VBO 教程。

...在任何人建议之前，关于 VBO 的 NeHe 第 45 课使用了甚至不再编译的折旧代码（glux），所以这不是一个选择。:\

编辑：也许我不是很清楚，或者我被控制了，无论如何......问题的重点是找到**不依赖这些附加包的 OpenGL 中教授 VBO 的示例、教程或其他资源。**认真的人，告诉我“放弃”或“只使用 GLEW”......这无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T13:41:23.277

# java - 从 SPARQL 查询中仅获取“#”之后的名称

> ID：12801179
> 
> 赞同：1
> 
> 时间：2012-10-09T13:29:37.363
> 
> 标签：java, sparql, jena, ontology, owl

我有这个 java 代码，它使用 apache jena api 查询披萨本体

```
 String queryStr =
"prefix pizza: <" + PIZZA_NS + "> "               +
"prefix rdfs: <" + RDFS.getURI() + "> "           +
"prefix owl: <" + OWL.getURI() + "> "             +
"select ?pizza where {?pizza a owl:Class ; "      +
"rdfs:subClassOf ?restriction. "                  +
"?restriction owl:onProperty pizza:hasTopping ;"  +
"owl:someValuesFrom pizza:PeperoniSausageTopping" +
"}";

Query query = QueryFactory.create(queryStr);
QueryExecution qe = QueryExecutionFactory.create(query, model);
ResultSet rs = qe.execSelect();

ArrayList rsList = (ArrayList)ResultSetFormatter.toList(rs);
for(int i=0;i<rsList.size();i++){
    out.println(rsList.get(i).toString());
} 
```

它返回这个：

```
( ?pizza = <http://www.co-ode.org/ontologies/pizza/pizza.owl#AmericanHot> )
( ?pizza = <http://www.co-ode.org/ontologies/pizza/pizza.owl#FourSeasons> )
( ?pizza = <http://www.co-ode.org/ontologies/pizza/pizza.owl#American> ) 
```

但我只需要

> 美国热
> 
> 四个季节
> 
> 美国人

如何获得这个结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:21:38.200

我以这种方式解决了它。

```
for ( ; rs.hasNext() ; ){
  QuerySolution soln = rs.nextSolution() ;
  RDFNode x = soln.get("pizza") ;
  out.println(x.asNode().getLocalName());
} 
```

对于谁会有我同样的问题，其他信息可以从[这里检索](http://jena.sourceforge.net/ARQ/app_api.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T16:18:00.083

SPARQL 1.1 函数 STRAFTER 可以帮助：

```
SELECT ?pizza (strafter(str(?pizza), "#") AS ?localName)
WHERE 
```

但客户端解决方案同样出色，可与 SPARQL 1.0 一起使用。

# java - 即使连接关闭，c3p0 连接池也已满

> ID：12801184
> 
> 赞同：2
> 
> 时间：2012-10-09T13:29:41.400
> 
> 标签：java, jdbc, c3p0

我对 c3p0 连接池有这个问题，我是 c3p0 的新手。

我的桌面程序将 java 与 mssql 2008r2 一起使用，我使用的 jdbc 驱动程序是 jtds，对于连接池，我使用 c3p0

当程序运行一段时间时我遇到了一些问题，程序被卡住了，因为它正在等待从池中获取连接。

好像是连接池满了，导致sql语句无法执行。每次我完成执行 sql 语句时，我已经关闭了连接。

有人对 c3p0 有同样的问题吗？

注意：我使用 ComboPooledDataSource，当我想获得一些连接时，我使用 ComboPooledDataSource，getConnection() 方法。这个来自 ComboPooledDataSource 的 getConnection() 方法，它是否获得空闲连接？

如何连接到空闲？因为每次获得连接时我都已经关闭了连接。

谢谢。

这是我使用的代码：通常我有 2 个类：1.for 数据库连接（获取连接和池） 2.for 数据库事务（执行查询语句）

```
public final class DBConnection {
private static DatabaseProperties dbProp;
private static ComboPooledDataSource ds;

private DBConnection(){}

private static void create(){
    DatabaseProperties dp = getDatabaseProperties();
    boolean success = true;

    do{
        try{
            ds = new ComboPooledDataSource();
            ds.setDriverClass("net.sourceforge.jtds.jdbc.Driver");
            ds.setJdbcUrl("jdbc:jtds:sqlserver://"+ dp.getIpaddr()+":"+dp.getPort()+ "/"+dp.getDbname(););
            ds.setUser(dp.getUsername());
            ds.setPassword(dp.getPassword());

            ds.setMinPoolSize(3);
            ds.setAcquireIncrement(1);
            ds.setMaxPoolSize(20);
        } catch (Exception ex) {
            LoggerController.log(Level.SEVERE,"Database error on creating connection",ex,LoggerController.DATABASE);
            success = false;
        }
    }while(!success);
}
public static ComboPooledDataSource getDataSource(){
    if(ds == null)create();

    return ds;
}

public static Connection getConnection(){
    Connection con = null;
    try {
        con = DBConnection.getDataSource().getConnection();
    } catch (SQLException ex) {
        LoggerController.log(Level.SEVERE,"Database error on getting connection",ex,LoggerController.DATABASE);
    }

    return con;
}

public static void close(){
    ds.close();
} 
```

}

```
public class DBTrans {
private DBTrans(){}

public static DataTable executeQuery(String query) throws SQLException{
    DataTable dt = null;
    Connection con = null;
    try {
        con = DBConnection.getConnection();
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery(query);
        dt = new DataTable(rs);
    } catch (SQLException ex) {
        throw new SQLException("QUERY= ["+query+"]\n"+ex.getMessage());
    }
    finally{
        if(con!=null){
            con.close();
        }
    }
    return dt;
}

public static int executeUpdate(String query) throws SQLException{
    int sql = 0;
    Connection con = null;
    try {
        con = DBConnection.getConnection();
        Statement stmt = con.createStatement();
        sql = stmt.executeUpdate(query);
        con.close();
    } catch (SQLException ex) {
        throw new SQLException("QUERY=["+query+"]\n"+ex.getMessage());
    }
    finally{
        if(con!=null){
            con.close();
        }
    }
    return sql;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:01:38.910

鉴于您显示的代码，最终您的应用程序可能会泄漏连接，从而使连接池耗尽（即，所有连接都不可逆转地检出）。您需要始终如一地使用强大的资源清理习惯。参见例如

[http://old.nabble.com/Re:-My-connections-are-all-idle...-p27691635.html](http://old.nabble.com/Re:-My-connections-are-all-idle...-p27691635.html)

一旦你修改你的代码以可靠地连接连接，如果你仍然看到问题，c3p0 有设置来查找和调试未返回的连接。您可以临时设置 unreturnedConnectionTimeout 并使用 debugUnreturnedConnectionStackTraces 来追踪泄漏。看

[http://www.mchange.com/projects/c3p0/index.html#unreturnedConnectionTimeout](http://www.mchange.com/projects/c3p0/index.html#unreturnedConnectionTimeout)

[http://www.mchange.com/projects/c3p0/index.html#debugUnreturnedConnectionStackTraces](http://www.mchange.com/projects/c3p0/index.html#debugUnreturnedConnectionStackTraces)

但首先，只需修复您的资源清理代码，看看问题是否消失。捕获 debugUnreturnedConnectionStackTraces 是性能拖累；顾名思义，它应该只是临时使用，用于调试。

我希望这有帮助！

# ios - 无法使用适用于 LinkedIn 的 OAuth Starter Kit 共享

> ID：12801187
> 
> 赞同：-1
> 
> 时间：2012-10-09T13:29:51.440
> 
> 标签：ios, oauth, linkedin

我使用 OAuthStarter Kit 来访问 LinkedIn API。我成功获得了权限的访问令牌。

> **rw_ns**
> **r_basicprofile**
> **r_fullprofile**

可以获取个人资料详细信息以及仅共享评论以及共享 URL 或图像或描述等...我使用以下代码：

```
-(void)postUpdate
 {
   NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/shares"];
   OAMutableURLRequest *request =
   [[OAMutableURLRequest alloc] initWithURL:url
                            consumer:[self getConsumer]
                               token:self.accesstoken
                            callback:nil
                   signatureProvider:nil];

   NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:

                    [[NSDictionary alloc]
                     initWithObjectsAndKeys:
                     @"anyone",@"code",nil], @"visibility",
                    @"title goes here",@"title",
                    @"comment goes here", @"comment",
                    @"description goes here",@"description",
                     @"www.google.com",@"submitted-url",
                    @"http://economy.blog.ocregister.com/files/2009/01/linkedin-logo.jpg",@"submitted-image-url",
                    nil];
   [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];
   [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

   NSString *updateString = [update JSONString];
   [request setHTTPBodyWithString:updateString];
    [request setHTTPMethod:@"POST"];

   OADataFetcher *fetcher = [[OADataFetcher alloc] init];
   [fetcher fetchDataWithRequest:request
                 delegate:self
        didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
          didFailSelector:@selector(postUpdateApiCallResult:didFail:)];

  } 
```

但我收到如下响应错误：

```
 2012-10-09 18:27:29.906 SocialConnectTest[9460:19a03] data {
 "errorCode": 0,
 "message": "Invalid xml {Expected elements 'post-network-update@http://api.linkedin.com/v1 id@http://api.linkedin.com/v1 visibility@http://api.linkedin.com/v1 comment@http://api.linkedin.com/v1 attribution@http://api.linkedin.com/v1 content@http://api.linkedin.com/v1 private-message@http://api.linkedin.com/v1 share-target-reach@http://api.linkedin.com/v1' instead of 'submitted-url@http://api.linkedin.com/v1' here in element share@http://api.linkedin.com/v1}",
 "requestId": "W2G7WJDHOJ",
 "status": 400,
 "timestamp": 1349787449685
} 
```

而且我不知道问题是什么。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:05:53.273

我修好了它。问题出在帖子参数中

1.  根据 Linked in api 的文档，*如果我们在请求正文中使用 JSON，则 post 参数的键必须是**驼峰**式，而在 xml 中使用**“-”**分隔的键名*。
2.  共享参数，如**submitUrl 、 subsubmittedImageUrl 、 description、title **等。必须是名为 **content 的键的值**。

所以我修改了代码如下..

```
-(void)postUpdateHERE
{
  NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/shares"];
  OAMutableURLRequest *request =
  [[OAMutableURLRequest alloc] initWithURL:url
                            consumer:[self getConsumer]
                               token:self.accesstoken
                            callback:nil
                   signatureProvider:nil];

  NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:

                    [[NSDictionary alloc]
                     initWithObjectsAndKeys:
                     @"anyone",@"code",nil], @"visibility",

                    @"comment goes here", @"comment",
                    [[NSDictionary alloc]
                     initWithObjectsAndKeys:
                    @"description goes here",@"description",
                    @"www.google.com",@"submittedUrl",
                      @"title goes here",@"title",
                    @"http://economy.blog.ocregister.com/files/2009/01/linkedin-logo.jpg",@"submittedImageUrl",nil],@"content",
                    nil];
  [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];
  [request setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
  NSString *updateString = [update JSONString];
  [request setHTTPBodyWithString:updateString];
  [request setHTTPMethod:@"POST"];
  OADataFetcher *fetcher = [[OADataFetcher alloc] init];
  [fetcher fetchDataWithRequest:request
                 delegate:self
        didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
          didFailSelector:@selector(postUpdateApiCallResult:didFail:)];

} 
```

现在代码对我有用..

# android - 绘制具有底部对齐的平铺位图

> ID：12801189
> 
> 赞同：5
> 
> 时间：2012-10-09T13:29:55.740
> 
> 标签：android, android-layout, user-interface, bitmap, android-bitmap

我想绘制具有渐变背景的图像。我创建了一个可绘制的位图资源，如下所示

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/bg"
        android:tileMode="repeat"
        android:gravity="bottom"
        /> 
```

如您所知，定义 tileMode 时会忽略重力。我尝试创建自己的类，该类继承自 BitmapDrawable，但我无法成功。请帮我应用这两个属性：tileMode 和重力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T14:10:02.667

我没有清楚地理解这个问题。这里的目标是什么？

是否使用带有 tileMode 的渐变图像（如 .png .jpg）？

还是使用透明图标并使其成为背景渐变？

另外，为什么在使用 tileMode 时需要重力？tileMode 表示用相同的图像平铺位图的整个区域。由于它将对整个图像执行此操作，因此不会对该图像施加重力，因为所有图像都将被填充。

如果目标是在屏幕的某些部分使用此可绘制位图，请将其添加到您的布局中：

```
<ImageView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:src="@drawable/mydrawablebitmap"
android:id="@+id/imageview1" /> 
```

您可以将其放入您的 layout.xml 并设置您自己的宽度和高度，并根据您的喜好对齐。

如果目标是使用图像并制作其背景，那么您可以使用它：

在您的可绘制文件夹中创建一个 gradient.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
    android:startColor="#E0E0E0"
    android:endColor="#FFFFFF"
    android:angle="-90"/>
</shape> 
```

然后将此图像视图添加到您的布局中：

```
<ImageView
    android:id="@+id/myimagewithgradientbackground"
    android:layout_width="match_parent"
    android:layout_height="160dp"
    android:background="@drawable/gradient"
    android:src="@drawable/foregroundimage" /> 
```

如果您向我提供有关该问题的更多详细信息，我将继续并相应地编辑我的答案。

# linux - 运行 Ubuntu 的 VM Player 仅记录访客会话

> ID：12801190
> 
> 赞同：3
> 
> 时间：2012-10-09T13:29:59.190
> 
> 标签：linux

我在 VM Player 上运行 Ubuntu 12.04。一切运行良好，但突然之间，在启动后，Ubuntu 不再使用我的用户名登录。相反，我只有访客会话。如果我去切换用户，它是同样的故事。/etc/shadow 文件显示了我的用户名，正如预期的那样（在其余部分中）。

运行 su username 不会返回任何权限。有没有其他方法可以找回账号？我可以在访客会话中从终端切换到我的用户名吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T22:01:01.553

听起来您的自动登录设置已更改。您可以通过转到系统 - 管理 - 登录窗口来更改此设置。系统将提示您输入管理员权限，这可能是您的用户帐户。验证后，选中“启用自动登录”并输入您的帐户。或者要编辑的文件是 /etc/lightdm.conf。

话虽如此，在日常使用计算机时尽量不要使用管理员帐户。好的做法是每天使用普通用户帐户。

# mysql - 返回选择语句SQL的最大值

> ID：12801191
> 
> 赞同：0
> 
> 时间：2012-10-09T13:30:00.530
> 
> 标签：mysql, sql, oracle

实际上，我几乎忘记了如何使用 SQL 来执行此操作，问题是我有一个 SQL 选择语句，例如：

```
SELECT COUNT(*) NAME FROM `SomeTable` WHERE `SomeID` = xxx GROUP BY `Field` 
```

它确实返回一个包含一个字段和许多包含数字的记录的表。我想要的是获得这些记录中最大数量的单个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:39:18.770

它应该可以帮助你。只使用`MAX()`功能

```
SELECT MAX(COUNT(*)) FROM `SomeTable` WHERE `SomeID` = xxx GROUP BY `Field` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:31:04.007

只需添加限制：

```
SELECT COUNT(`NAME`) AS `NUM` FROM `SomeTable` WHERE `SomeID` = xxx GROUP BY `Field` ORDER BY `NUM`  DESC LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:32:29.887

```
select max(name) from
(
SELECT COUNT(*) NAME FROM `SomeTable` WHERE `SomeID` = xxx GROUP BY `Field`)a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:33:29.517

```
SELECT COUNT(*) NAME 
FROM `SomeTable` 
WHERE `SomeID` = xxx 
GROUP BY `Field`
order by NAME desc
limit 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T13:33:40.900

> 我想要的是获得这些记录中最大数量的单个值。

试试这个：

```
SELECT t1.*
FROM SomeTable t1
(
     SELECT SomeID, Max(Field) MaxField
     FROM SomeTable
     GROUP BY SomeID
) t2 ON t1.SomeID = t2.SomeID AND t1.Field = t2.MaxField
WHERE t1.SomeID = xxx 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T13:34:07.020

如果您只想要针对过滤器的最高值的单个结果，只需使用 Max：

```
SELECT MAX(MyField) NAME 
FROM `SomeTable` 
WHERE `SomeID` = xxx; 
```

或者，如果您想要按另一列分组的聚合，则语法如下：

```
SELECT Name, MAX(MyField) as MaxOfMyField -- Or COUNT(MyField) if you want the Count
FROM `SomeTable` 
WHERE `SomeID` = xxx 
GROUP By Name; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T13:34:37.807

MAX 函数的语法是：

```
SELECT MAX(expression )
FROM tables
WHERE predicates; 
```

例子

```
SELECT MAX(salary) as "Highest salary"
FROM employees; 
```

# html - 客户端在使用 jplayer 将 m4v 从 apache 流式传输到 chrome 时关闭连接

> ID：12801192
> 
> 赞同：5
> 
> 时间：2012-10-09T13:30:04.290
> 
> 标签：html, apache, video, streaming, jplayer

我已经建立了一个测试站点。我正在尝试实现一个 HTML5 视频以在我正在开发的站点上播放，并且我想使用 jplayer 以便它回退到一个 swf 文件，如果 html5 视频是不支持。

[http://dev.johnhunt.com.au/](http://dev.johnhunt.com.au/)是我目前所拥有的。[如果我为视频提供http://www.jplayer.org/video/m4v/Big_Buck_Bunny_Trailer_480x270_h264aac.m4v](http://www.jplayer.org/video/m4v/Big_Buck_Bunny_Trailer_480x270_h264aac.m4v)它工作正常，但是如果我将它托管在我自己的服务器上，它就永远不会开始播放。

mime 类型绝对正确，video/m4v。查尔斯代理 说：

```
Client closed connection before receiving entire response 
```

事实上，这是整个请求：

```
GET /Big_Buck_Bunny_Trailer_480x270_h264aac.m4v HTTP/1.1
Host    dev.johnhunt.com.au
Cache-Control   no-cache
Accept-Encoding identity;q=1, *;q=0
Pragma  no-cache
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4
Accept  */*
Referer http://dev.johnhunt.com.au/
Accept-Language en-US,en;q=0.8
Accept-Charset  ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie  __utma=120066461.1007786402.1349773481.1349773481.1349786970.2; __utmb=120066461.1.10.1349786970; __utmc=120066461; __utmz=120066461.1349773481.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)
Range   bytes=0- 
```

和回应：

```
Some binary data (maybe 3 or 4kbytes long) 
```

看起来不错。我假设“客户端”是我的 chrome 浏览器。为什么它放弃了？我怎样才能解决这个问题？这让我很生气，因为我在谷歌上找不到任何东西:(

当我在 jplayer.org 上使用 m4v 文件时，请求如下：

```
GET /video/m4v/Big_Buck_Bunny_Trailer_480x270_h264aac.m4v HTTP/1.1
Host    www.jplayer.org
Cache-Control   no-cache
Accept-Encoding identity;q=1, *;q=0
Pragma  no-cache
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4
Accept  */*
Referer http://dev.johnhunt.com.au/
Accept-Language en-US,en;q=0.8
Accept-Charset  ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie  __utma=24821473.325705124.1349773077.1349773077.1349773077.1; __utmc=24821473; __utmz=24821473.1349773077.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided)
Range   bytes=0- 
```

回复：

```
Lots of binary data (very long.. working) 
```

干杯，约翰。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T17:30:52.323

我发现当 Chrome 浏览器发送“范围：字节 = 0-”请求时，您不应该以“206 部分内容”响应进行响应。要让 Chrome 正确处理数据，您需要发回“200 OK”标头。

根据规格，我不知道这是否正确，但它可以让 Chrome 工作并且似乎不会破坏其他浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T18:45:15.640

刚刚使用 Chrome 遇到了这个问题，您似乎需要确保`Content-Range`您的服务器在响应中设置了标头。

来自[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)：

> byte-content-range-spec 值的示例，假设实体总共包含 1234 个字节：
> 
> ```
>       . 前 500 个字节：
>        字节 0-499/1234
>       . 第二个 500 字节：
>        字节 500-999/1234
>       . 除了前 500 个字节之外的所有内容：
>        字节 500-1233/1234
>       . 最后 500 个字节：
>        字节 734-1233/1234
> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:27:03.173

可能是你的 apache 的问题......大概你正在使用给定标签的 apache。

您是否已将 mime 类型添加到 apache？

例如

AddType video/mp4 mp4

AddType video/mp4 m4v

还要检查是否为媒体关闭了 gzip……它已经被压缩……并且不要 gzip Jplayer.swf。

你能发布你的apache配置吗？您是否正在使用诸如此类的流媒体模块[？](http://www.gnutoolbox.com/h264-streaming-module-apache/)

干杯罗宾

编辑

o 并且您可能还想在 apache 中接受范围字节。如果您仔细查看您提供 200 个链接的两个链接，它们提供 206 个部分数据。

# c++ - 我自己实现的异常类有什么问题吗？

> ID：12801194
> 
> 赞同：2
> 
> 时间：2012-10-09T13:30:12.877
> 
> 标签：c++, exception, inner-exception

我编写了自己的异常类，派生自有`std::runtime_error`错误 ID、时间戳和内部异常。它似乎有效，但有什么缺点吗？

我唯一看到的是复制构造函数中的深拷贝，当有许多嵌套异常时，它效率不高。但是异常应该是罕见的，并且不能嵌套太多，所以我认为这是我可以应对的不利因素。

```
#pragma once

#include <stdexcept>
#include <string>
#include <sstream>
#include <time.h>
#include <memory>

class MyException : public std::runtime_error
{
public:
    MyException(const MyException& exception)
        : std::runtime_error(exception.what()),
        exceptionId(exception.id()),
        ts(exception.timestamp()),
        innerException(NULL)
    {
        if (exception.inner() != NULL)
        {
            innerException = new MyException(*exception.inner());
        }
        else
        {
            innerException == NULL;
        }
    }

    MyException(const std::string& _Message)
        : std::runtime_error(_Message),
            exceptionId(0),
        innerException(NULL)
    {
        time(&ts);
    }

    MyException(const std::string& _Message, unsigned int id)
        : std::runtime_error(_Message),
        exceptionId(id),
        innerException(NULL)
    {
        time(&ts);
    }

    MyException(const std::string& _Message, unsigned int id, MyException* innerException)
        : std::runtime_error(_Message),
        exceptionId(id),
        innerException(new MyException(*innerException))
    {
        time(&ts);
    }

    virtual ~MyException()
    {
        delete innerException;
    }

    unsigned int id() const { return exceptionId; }
    time_t timestamp() const { return ts; }
    const MyException* inner() const { return innerException; }

private:
    unsigned int exceptionId;
    time_t ts;
    const MyException* innerException;
}; 
```

这就是我将如何使用它：

```
void handleException(MyException *ex)
{
    cout << "exception " << ex->id() << " - " << ex->what() << endl;
    const MyException* innerException = ex->inner();
    int t = 1;
    while (innerException != NULL)
    {
        for (int i=0; i<t; ++i)
        {
            cout << "\t";
        }
        ++t;
        cout << "inner exception " << innerException->id() << " - " << innerException->what() << endl;
        innerException = innerException->inner();
    }
}

void throwRecursive(int temp)
{
    if (temp == 0)
    {
        throw runtime_error("std::runtime_error");
    }

    try
    {
        throwRecursive(--temp);
    }
    catch (MyException &ex)
    {
        throw MyException("MyException", (temp+1), &ex);
    }
    catch (exception &ex)
    {
        throw MyException(ex.what(), (temp+1));
    }
}

void myExceptionTest()
{
    try
    {
        throwRecursive(3);
    }
    catch (MyException &ex)
    {
        handleException(&ex);
    }
} 
```

和输出：

```
exception 3 - MyException
        inner exception 2 - MyException
                inner exception 1 - std::runtime_error 
```

# java - 如何从 .jar 存档运行 java 类？

> ID：12801195
> 
> 赞同：0
> 
> 时间：2012-10-09T13:30:11.853
> 
> 标签：java, unix, jar, console

需要通过 unix 控制台从 jar 包中运行特定的 java 类。是否可以？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:36:25.333

无法从终端调用类的特定方法。

您只能调用 main 方法`java -cp JarFile.jar package.ClassName`

或者，如果您的 jar 包含清单文件，那么您可以执行以下操作：`java -jar pJarFile.jar`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:33:10.960

采用

```
java -cp myJar.jar myClass 
```

**-cp**选项在手动设置类路径时使用，即给出 jar 文件位置的完整路径，然后运行命令

例如。

```
C:> java -cp C:\java\MyClasses\myJar.jar myClass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T13:47:50.467

要运行 jar 文件，您可以**采用**以下任一方法。它们都要求您知道`main(String[] arg)`编写方法的类的完全限定名称。

假设您的类包含 main 方法是`com.myclass.MainClass`

1.  你可以直接运行jar。将 jar 文件保存在运行此命令的位置

    `java -cp yourjarfile.jar com.myclass.MainClass`

2.  创建`manifest.mf`具有以下内容的清单文件

    `Main-class: com.myclass.MainClass`

现在创建jar文件如下

```
 jar -cmf manifest.mf yourjarfile.jar <your class file location> 
```

使用以下命令运行此 jar

```
 java -jar yourjarfile.jar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:31:35.790

是的，使用 -jar 参数：

```
java -jar MyProgram.jar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T13:34:55.857

您可以通过执行以下操作提取特定的类文件：

```
jar xf MyProgram.jar theclass.class 
```

它将最终出现在您的当前目录中

然后只需运行类文件

```
java theclass 
```

# java - 在Java中，子类是否可以从其超类中获取私有字段和方法？

> ID：12801196
> 
> 赞同：-1
> 
> 时间：2012-10-09T13:30:12.553
> 
> 标签：java, inheritance, private

> **可能重复：**
> [子类是否继承了私有字段？](https://stackoverflow.com/questions/8152574/are-private-fields-inherited-by-the-subclass)

毫无疑问，子类不能直接访问私有字段。但是如果私有字段存在呢？实际上，我可以通过其公共或受保护的方法访问私有字段。

私有方法。

有没有人可以告诉我这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:38:02.387

您应该始终创建一个类的字段`private`。并提供`public`访问器方法，以访问这些字段..

通过这样做，您将达到`encapsulation`任何`OO language`..

此外，不允许直接访问的另一个好处是，您可以根据需要和安全性修改字段，然后再让外部类访问它。

其实一般建议`access the private fields`通过`getter methods`即使在**同一个班**也..'

**这也有助于轻松修改您的课程。**

假设将来，您想更改访问字段的方式（也就是说，您想在返回之前对字段进行一些处理）..现在，如果您甚至在自己的类中直接访问字段..您将不得不在每个地方进行更改..**但是**如果您曾经`getter`访问这些字段，则只需要使用`modify`您的`getter`方法..

```
public class A {  
    private int data;

    public int getData() {
        // Here apart from just return the `data`, you can perform some 
        // modification also according to your need..
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:33:07.970

这是一种正常的行为。超类为您提供了一个抽象，您应该处理。你不应该被实现细节所困扰。如果明天实现发生变化，您无需更改子类 - 超类将其隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:34:49.983

你看到的是[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。您正在通过方法控制对类成员的访问，而不是让它们被直接访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:35:34.623

在这种情况下，您可能需要阅读术语*public*、*protected*和*private的**含义。*

 ****如果这些字段是私有*的，则子类不能从其父类访问字段和方法，如果您希望子类能够访问这些字段和方法，那么您需要使用的可见性修饰符（在父类上）是*受保护*的。

*protected*的使用特别是子类，并且只有子类可以访问父类上的字段和方法。***

# zend-framework - 是否可以分析 Zend_Table 查询？

> ID：12801197
> 
> 赞同：0
> 
> 时间：2012-10-09T13:30:15.193
> 
> 标签：zend-framework, zend-db, profiler, zend-db-table

我正在寻找一种方法来分析由 Zend_Table 内部执行的查询。
例如，在完成快速入门课程后，如何分析所有执行的查询？
我试图从 application.ini 启用探查器，如下所示：

```
resources.db.profiler.class   = "Zend_Db_Profiler_Firebug"
resources.db.profiler.enabled = true 
```

并将下一行放在留言簿控制器中：

```
...
$db = Zend_Db_Table_Abstract::getDefaultAdapter();
$profiler = $db->getProfiler();

echo $profiler->getTotalElapsedSecs(); 
```

这给了我 0

我还尝试在 Bootstrap 文件中启用探查器，如下所示：

```
protected function _initProfiler() {
    $this->bootstrap("db");
    $profiler = new Zend_Db_Profiler_Firebug("All DB Queries");
    $profiler->setEnabled(true);
    Zend_Registry::get("db")->setProfiler($profiler);
} 
```

Whick 没有给我任何结果（我已经安装并测试了 Firebug 和 FirePHP，使用 Zend_Log_Writer_Firebug()）

我将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:48:39.733

我还没有尝试过 Firebug 分析器。但我确实使用 html 表在每个执行查询的页面底部输出分析器信息。

在 application.ini 中启用探查器

```
resources.db.params.profiler = true 
```

在布局中呈现配置文件结果：

```
<?php
    $this->addScriptPath(APPLICATION_PATH . '/views/scripts');
    echo $this->render('profiler.phtml')
?> 
```

profiler.phtml 要渲染的视图

```
<?php
// get the default db adapter
$adapter = Zend_Db_Table::getDefaultAdapter();
$profiler = $adapter->getProfiler();
if ($profiler->getEnabled() && $profiler->getTotalNumQueries() > 0) :
?>
    <div style='text-align:center'>
        <h2>Database Profiling Report</h2>
        <p>Total queries executed: <?php echo $profiler->getTotalNumQueries() ?></p>
        <p>Total elapsed time: <?php echo $profiler->getTotalElapsedSecs() ?></p>
    </div>
    <table class='spreadsheet' cellpadding='0' cellspacing='0' style='margin:10px auto'>
        <thead>
            <tr>
                <th>#</th>
                <th>Query</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody>
    <?php foreach ($profiler->getQueryProfiles() as $queryNumber => $query) : ?>
                <tr>
                    <td>(<?php echo $queryNumber + 1 ?>)</td>
                    <td><?php echo $query->getQuery(); ?></td>
                    <td><?php echo $query->getElapsedSecs(); ?></td>
                </tr>
    <?php endforeach ?>
        </tbody>
    </table>
    <?php endif ?> 
```

我不认为使用萤火虫探查器要困难得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:12:30.650

问题出在参数实例化中。当我进入

```
resources.db.params.profiler.class   = "Zend_Db_Profiler_Firebug"
resources.db.params.profiler.enabled = true 
```

而不是以前的配置，一切都很好。注意参数行的 .params 部分

# java - java xml 选项无法识别

> ID：12801203
> 
> 赞同：0
> 
> 时间：2012-10-09T13:30:37.220
> 
> 标签：java, eclipse, jvm, talend

我正在使用一个名为 Talend 的 BI 数据集成工具，该工具使用 Java 在 Eclipse 上构建。

在启动工作时，它说

```
Could not create the Java virtual machine.
Unrecognized option: --Xmx1024M 
```

ini 文件：

```
-vmargs
-Xms64m
-Xmx1536m
-XX:MaxPermSize=256m
-Dfile.encoding=UTF-8 
```

我有一台 4GB 32 位 Windows 电脑。2.85GB 可用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:31:35.597

你应该只使用一个破折号，例如

```
java -Xmx1024m  .... 
```

有关更多命令行选项信息，请参阅[文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html#options)。

# database - 将整个 DB 字符集设置为 Unicode 与 Oracle DB 中的某些 NVARCHAR2 的缺点？

> ID：12801207
> 
> 赞同：6
> 
> 时间：2012-10-09T13:30:47.580
> 
> 标签：database, oracle, database-design, unicode, oracle11g

我的表的某些列需要支持 Unicode 字符（假设是**我所有列的 1%**）。

我想我有以下两个选择：

1.  将 Unicode 列实现为**NVARCHAR2**；或者
2.  将整个数据库的字符集更改为支持 Unicode 的字符集（这样我可以使用**VARCHAR2**）。

我倾向于第二种选择（为了不必更改我已经存在的 VARCHAR2 脚本）。

我的问题是：与第一个选项相比，第二个选项的**缺点和优点是什么？**它的性能更低吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T13:52:03.767

我强烈倾向于更改数据库的字符集。

这样做有潜在的弊端

*   如果您在其他列中存储的数据不是 7 位 ASCII 字符集，您将增加存储数据所需的空间量。假设您现有的字符集是允许您存储英语和其他几种语言的 8 位字符集之一，那么数据中的任何非英语字符通常每个字符需要 2 个或更多字节的存储空间。例如，如果您要存储字符“h”，这是一个英文字符，它是 7 位 ASCII 字符集的一部分，因此在单字节字符集或 Unicode 字符集中需要 1 个字节。另一方面，如果要存储字符“À”，则它不是英文，也不属于 7 位 ASCII 字符集，因此它需要 2 个字节的 Unicode 字符集存储空间，而 现有单字节字符集中的 1 个字节。其他字符将需要 3 个字节的存储空间。
*   当你声明一个`VARCHAR2`. 默认情况下，`VARCHAR2(50)`分配 50 个字节的存储空间，如果您使用的是 AL32UTF8 字符集，则可以存储 16 到 50 个字符，而不是像使用单字节字符时那样进行简单的 1:1 映射放。这将需要您增加列的大小（即三倍）以确保它们存储适当数量的字符，或者您在声明列时指定字符长度语义（即`VARCHAR2(50 CHAR)`）或您将您设置`NLS_LENGTH_SEMANTICS`为`CHAR`之前创建对象以将默认值更改为字符长度语义。甲骨文全球化论坛上有讨论是否适合[在实例级别更改 NLS_LENGTH_SEMANTICS](https://forums.oracle.com/forums/thread.jspa?messageID=10180647&#10180647) -- Oracle 的顶级全球化专家之一 Sergiusz Wolicki 强烈反对它，尽管我个人更愿意在适当的情况下考虑它。您还可以`NLS_LENGTH_SEMANTICS`在会话级别设置，这是 Sergiusz 不反对但确实要求您在每次运行脚本时都这样做，这可能是一个问题。
*   大多数工具不能很好地处理针对使用字符语义创建列的数据字典的查询。他们没有正确使用`CHAR_LENGTH`和`DATA_LENGTH`列，他们想要字符长度与字节长度。如果您有现有的工具/脚本/等对数据字典运行查询以生成 DDL 或确定需要分配多少内存或您最终会遇到的其他情况，这对您来说可能是一个小问题或一个严重的痛苦得到时髦的结果。

但是，为所有数据使用单一字符集的优势远远超过了这些缺点

*   处理`NVARCHAR2`列通常需要更改应用程序代码。由于您将同时拥有`VARCHAR2`和`NVARCHAR2`列，因此这些代码更改和配置设置可能很重要，并且通常是一个主要的烦恼。不可避免地，您会发现在某些应用程序中错误地映射了特定列，并且您会遇到难以追踪的数据损坏错误。数据库和应用程序之间的抽象层越多，这一点就越真实。
*   如果今天有 1% 的列需要支持 Unicode，那么明天必然会有更多的列需要支持 Unicode。随着附加要求的增加，将列的数据类型从`VARCHAR2`更改为`NVARCHAR2`是一件痛苦的事情——您需要添加一个新列，复制数据，删除旧列，重命名新列，并处理导致的行迁移。然后，您必须对所有现有应用程序进行更改，以便它们正确映射列。当企业决定再增加一列以支持其他语言并且您的数据库和应用程序已经支持 Unicode 时，这种努力和测试水平似乎相当过分。
*   SQL 语句必须以数据库字符集编码。如果您想`NVARCHAR2`在应用程序中将列中的数据用作 SQL 语句中的文字（例如，避免绑定变量窥视或更好地利用直方图）或在需要时作为生产支持的一部分，这往往会产生问题跟踪数据中的问题。
*   [Unicode 字符集是 Oracle 强烈鼓励的方向](https://forums.oracle.com/forums/ann.jspa?annID=1794)，强烈反对使用`NVARCHAR2`列。这可能不会立即产生实际后果，但如果您的系统应该存在多年，那么将来很可能会产生后果。

[Sergiusz 在此线程](https://forums.oracle.com/forums/thread.jspa?messageID=9955254&#9955254)中很好地总结了 Oracle 的建议

> 甲骨文的建议：
> 
> *   对于任何新数据库，使用 AL32UTF8 字符集创建它并忘记 NCHAR 数据类型。
> *   对于要制作多语言的任何现有应用程序，请将后端数据库迁移到 AL32UTF8 并忘记 NCHAR 数据类型。
> *   对于为大型遗留应用程序系统提供服务的任何现有非 Unicode 数据库，成本太高或无法迁移到 Unicode，您被要求添加一个必须支持多语言数据的次要模块，并且单独的数据库没有多大意义，对于这种多语言数据，您可以考虑使用 NVARCHAR2 列。

# c# - 将 byte[] 转换为 String 并返回 c#

> ID：12801214
> 
> 赞同：1
> 
> 时间：2012-10-09T13:31:01.700
> 
> 标签：c#, string, byte

我正在尝试使用 Encoding.Unicode 将 byte[] 转换为字符串并返回。有时 Encoding.Unicode 能够将 byte[] 转换为字符串，有时输出是 != 输入。我究竟做错了什么？

谢谢你的帮助。

```
public static void Main(string[] args)
{
    Random rnd = new Random();
    while(true)
    {
        Int32 random = rnd.Next(10, 20);
        Byte[] inBytes = new Byte[random];
        for(int i = 0; i < random; i++)
            inBytes[i] = (Byte)rnd.Next(0, 9);

        String inBytesString = Encoding.Unicode.GetString(inBytes, 0, inBytes.Length);
        Byte[] outBytes = Encoding.Unicode.GetBytes(inBytesString);

        if(inBytes.Length != outBytes.Length)
            throw new Exception("?");
        else
        {
            for(int i = 0; i < inBytes.Length; i++)
            {
                if(inBytes[i] != outBytes[i])
                    throw new Exception("?");
            }
        }
        Console.WriteLine("OK");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:33:01.990

您不能为此使用编码：您必须使用 Convert.ToBase64String / Convert.FromBase64String 之类的东西。

编码假定 byte[] 是根据特定规则格式化的，而随机的非字符串 byte[] 则不是这种情况。

总结一下：

编码将任意字符串转换为格式化的字节[]

Base-64 将任意 byte[] 转换为/从格式化字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:34:51.297

```
you cannot use encoding use base64 
```

使用`base64`u 可以安全地将字节转换为字符串并返回

`base64 guaranteed to not to get "invalid" unicode sequences`喜欢：
没有后半部分的代理对的前半部分使用如下：

```
string base64 = Convert.ToBase64String(bytes);
byte[] bytes = Convert.FromBase64String(base64); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:46:58.173

这是一个示例，我将图像更改为位数组，然后将其转换回可读字符串。

```
protected bool isImageCMYK(HttpPostedFile image, Stream fileContent)
    {
            //creating byte array
        byte[] imageToByteArray = new byte[image.ContentLength];

            //filling the byte array
        fileContent.Read(imageToByteArray, 0 , image.ContentLength);

            //convering byte array back to a readable string
        UTF8Encoding byteToString = new UTF8Encoding();
        string imageString = byteToString.GetString(imageToByteArray);

        return imageString.ToLower().Contains("cmyk");
    } 
```

这是编辑后的代码，导致输出“OK”

```
public static void Main(string[] args)
        {
            Random rnd = new Random();
            while (true)
            {
                Int32 random = rnd.Next(10, 20);
                Byte[] inBytes = new Byte[random];
                for (int i = 0; i < random; i++)
                    inBytes[i] = (Byte)rnd.Next(0, 9);

                UTF8Encoding inBytesString = new UTF8Encoding(); 
                string byteString = inBytesString.GetString(inBytes, 0, inBytes.Length);
                //Byte[] outBytes = Encoding.Unicode.GetBytes(inBytesString);
                Byte[] outBytes = inBytesString.GetBytes(byteString);

                if (inBytes.Length != outBytes.Length)
                    throw new Exception("?");
                else
                {
                    for (int i = 0; i < inBytes.Length; i++)
                    {
                        if (inBytes[i] != outBytes[i])
                            throw new Exception("?");
                    }
                }
                Console.WriteLine("OK");
            } 
```

# php - 在 php 中创建相关的帖子脚本 - 不是 Wordpress

> ID：12801216
> 
> 赞同：1
> 
> 时间：2012-10-09T13:31:21.627
> 
> 标签：php, mysql, logic, blogs

我想知道是否有人有任何工作代码可以显示相关的博客文章，根据当前博客文章的类别说大约四五个。请注意，我没有使用 wordpress 或任何其他博客脚本，而是使用我在 php 中编写的简单博客脚本。

我的数据库很简单……我有一个包含所有帖子和一个类别列的表。所以数据库中的所有帖子都有一个固定的类别。我希望脚本根据提交的日期选择并返回任何最新的。

这是我当前的查询

```
select * from post where category = '$current_blog_post_category' order by post_date desc limit 4 
```

然而，这个问题的问题在于，一旦查询运行，它仍然会返回当前帖子作为结果。我希望在查询中忽略当前帖子。任何解决方法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:44:09.577

尝试这样的事情：

```
select * from post
where category = '$current_blog_post_category' 
      AND post.id <> '$current_blog_post_id'
order by post_date desc limit 4 
```

请注意，我认为“id”被命名为存储帖子 ID 的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:43:14.133

当前帖子应该有最新的id（还有post_date，但这个版本更可靠，因为理论上两个帖子可以有相同的post_date）：

```
SELECT * 
FROM post 
WHERE 
    category = '$current_blog_post_category' AND
    id!=MAX(id)
ORDER BY post_date desc 
LIMIT 4 
```

# c# - 如何知道异步函数何时完成c#

> ID：12801220
> 
> 赞同：2
> 
> 时间：2012-10-09T13:31:32.187
> 
> 标签：c#, asynchronous, webclient

我从网上下载了许多 url，但我不知道所有 url 何时完成下载。与此同时，我写了一些东西，但它看起来太垃圾了，虽然它有效。

在我的代码中，我从`dtPP`dataTable 下载所有 url 并将它们保存到`matUrlFharsing`数组中。

这是我的代码：

```
main()
{
    Parallel.For(0, dtPP.Rows.Count, i =>
    {
         string f = "";
         WebClient client = new WebClient();
         client.DownloadDataCompleted += new DownloadDataCompletedEventHandler(client_DownloadDataCompleted);
         lock (dtPP.Rows[i])
         {
              f = dtPP.Rows[i]["pp_url"].ToString();
         }
         client.DownloadDataAsync(new Uri(f), i);
    });
    while (end)
    {
    }
    DoSomething();
 }

void client_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
        {
            int h = (int)e.UserState;
            page = (int)e.UserState;
            myString = enc.GetString(e.Result);

            lock (matUrlFharsing[h])
            {
                lock (dtPP.Rows[h])
                {
                    //save in mat
                    matUrlFharsing[h] = Pharsing.CreateCorrectHtmlDoc(myString);
                }
            }

            lock (myLocker)
            {
                ezer = false;
                for (int j = 0; j < matUrlFharsing.Length && !ezer; j++)
                {
                    if (matUrlFharsing[j] == "")
                        ezer = true;
                }
                end = ezer;
            }
        } 
```

我可以做些什么来改进或改变它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:45:39.467

小改进：

End使用[AutoResetEvent](http://msdn.microsoft.com/ru-ru/library/system.threading.autoresetevent.aspx)而不是 bool。

```
AutoResetEvent autoResetEvent;

main()
{
    autoResetEvent = new AutoResetEvent(false);
    Parallel.For(0, dtPP.Rows.Count, i =>
    {
        // your code
    });
    autoResetEvent.WaitOne();
    DoSomething();
 }

void client_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
{
   ...
   if(ezer)
   {
       autoResetEvent.Set();
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:06:30.730

您可以使用 AutoResetEvent 数组，将它们作为参数发送到事件接收器并等待它们。

```
AutoResetEvent[] autoResetEvents;
main()
{
    autoResetEvent = new AutoResetEvent[dtPP.Rows.Count];
    Parallel.For(0, dtPP.Rows.Count, i =>
    {
         string f = "";
         WebClient client = new WebClient();
         client.DownloadDataCompleted += new DownloadDataCompletedEventHandler(client_DownloadDataCompleted);
         lock (dtPP.Rows[i])
         {
              f = dtPP.Rows[i]["pp_url"].ToString();
         }
         Object[] parameters = new Object[2];
         autoResetEvents[i] = new AutoResetEvent(false);
         parameters[0] = i;
         parameters[1] = autoResetEvent[i];

         client.DownloadDataAsync(new Uri(f), parameters);
    });
    WaitHandle.WaitAll(autoResetEvents);
    DoSomething();
 }

    void client_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
    {
        Object[] parameters = (object[])e.UserState;
        autoResetEvent = (AutoResetEvent)parameters[1];
        int h = (int)parameters[0];
        page = (int)e.UserState;
        myString = enc.GetString(e.Result);

        lock (matUrlFharsing[h])
        {
            lock (dtPP.Rows[h])
            {
                //save in mat
                matUrlFharsing[h] = Pharsing.CreateCorrectHtmlDoc(myString);
            }
        }
        autoResetEvent.Set();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:46:53.617

当异步函数完成时调用完成的事件。你在正确的道路上......

您可以在 While（结束）中改进您的代码。这个 While 语句将运行得非常快。你可以：

*   您可以休眠 1s 以减少 CPU 处理。
*   您可以在一段时间内设置超时以确保应用程序没有被锁定。

# java - 私有静态最终字段

> ID：12801223
> 
> 赞同：14
> 
> 时间：2012-10-09T13:31:35.990
> 
> 标签：java, field

我只是想澄清一下。有什么区别-

```
private static int STUDENT_AGE = 18; 
```

和

```
private static final int STUDENT_AGE = 18; 
```

场内？

Jon Skeet 解释为“根本与特定实例无关”，好吧，我想我明白了。那么 final 在这种情况下到底做了什么？

下面的代码不起作用是因为学生年龄被分配为静态最终？这是否意味着根本无法覆盖默认年龄？那么是否可以创建指定除默认年龄以外的年龄的构造函数？

```
private String myName;
private String myAddress;
private int myYearEnrolled;
private String myGender; 
private static final int STUDENT_AGE = 18; 

public Student(String name, String address, int year, String gender) {
    myName = name;
    myAddress = address;
    myYearEnrolled = year;
    myGender = gender; 
}

   public Student(int age)
{
     STUDENT_AGE = age; 
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T13:33:53.183

`static`表示“根本与特定实例无关” -`final`表示您无法在初始化后更改此值，并且*必须*初始化此值。

`final`和的组合`static`使您能够创建常量。这不再以公共方式推荐（完全可以，例如私有上下文中的幻数），因为它不是类型安全的。`Enum`按照 Joshua Blochs Effective Java 和[这个](https://stackoverflow.com/questions/367104/enums-for-constants-in-java-is-this-good-style)问题中的建议，使用post java 1.5 或创建自己的类型安全枚举 pre java 1.5。

*备注：大约一年后阅读这篇文章，我想我需要强调的是，一般来说字段没有错`public static final`，只是应该使用命名常量`enums`或其他类型安全的替代方案来实现。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T13:50:24.210

一旦声明了一个变量`final`，它的值就不能在以后更改。在您提供的代码示例中，声明了一个常量，用于定义特定活动的学生年龄。这可能意味着会有一个条件，对于某些活动，学生的年龄将与这个常数进行比较。如果学生的年龄大于 18 岁，那么只有他可以继续或不继续。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T13:34:33.717

```
 private static final int STUDENT_AGE = 18; 
```

这是不断的声明。您无法更改该值。

```
private static int STUDENT_AGE = 18; 
```

这是一个静态声明，但不是常量。该值可以更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:32:44.273

`final`变量只能初始化一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T13:33:02.463

字段上的`final`修饰符表示该字段的值一旦初始化*就不能*修改。

`STUDENT_AGE = age;`因此，除非它是非最终的，否则您无法设置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T13:34:32.000

简单地说，修饰符 final 意味着它的 FINAL。一旦定义，您就无法更改该值。

根据您的要求，如果您想在未提供任何内容的情况下提供默认年龄，则只需删除变量 STUDENT_AGE 的 final 修饰符。就像@Quoi 所说的

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-09T13:59:46.463

`final static`变量只能初始化一次，但不一定在声明时。但是一旦初始化，它的值就不能改变。所以，你可以`final static`在声明时或在静态块中初始化你的变量。

```
private static final int STUDENT_AGE = 20; 
```

或者

```
private static final int STUDENT_AGE;
static {
      STUDENT_AGE = 20;
} 
```

现在，`static`变量（也称为`class`变量）并不特定于任何实例。它在该类的所有实例之间共享..

看到这种方式，`Static`当类第一次加载时，变量被加载到内存中。这就是它被所有实例共享的原因。因此，任何实例对静态变量的任何更改都将反映到该类的所有其他实例（是的，您没看错。您也可以`static`通过类的实例变量访问变量。但是编译器最终会担心实际的类只要）

# google-api - Google Contacts API - Java：无法更新联系人

> ID：12801224
> 
> 赞同：2
> 
> 时间：2012-10-09T13:31:36.773
> 
> 标签：google-api, google-api-java-client

我正在尝试通过 Google Contacts API 和 Java 应用程序更新我的 Google Apps 用户的联系人。

我可以获取此特定用户的联系人，但如果我想更新某个联系人，则更新失败。

我的代码：

```
package com.haha;

import java.net.URL;

import com.google.gdata.client.*;
import com.google.gdata.client.Query.CustomParameter;
import com.google.gdata.client.authn.oauth.GoogleOAuthParameters;
import com.google.gdata.client.authn.oauth.OAuthHmacSha1Signer;
import com.google.gdata.client.authn.oauth.OAuthSigner;
import com.google.gdata.client.authn.oauth.OAuthParameters.OAuthType;
import com.google.gdata.client.contacts.*;
import com.google.gdata.data.contacts.ContactEntry;
import com.google.gdata.data.contacts.ContactFeed;

public class ContactsMain {

    private static final String APP_NAME = "haha.com";
    private static final String CONSUMER_KEY = "haha.com";
    private static final String CONSUMER_SECRET = "123456";
    private static final String SCOPE_CONTACTS = "https://www.google.com/m8/feeds/";
    private static final String FEED_URL_CONTACTS = "https://www.google.com/m8/feeds/contacts/default/base";
    private static final String MY_USER = "user@haha.com";
    private static final String MAX_RESULTS = "10000";

    public static void main(String[] args) {

        try {

            // Create the service
            ContactsService myService = new ContactsService(APP_NAME);

            // OAuth
            GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();
            oauthParameters.setOAuthConsumerKey(CONSUMER_KEY);
            oauthParameters.setOAuthConsumerSecret(CONSUMER_SECRET);
            oauthParameters.setScope(SCOPE_CONTACTS);
            oauthParameters.setOAuthType(OAuthType.TWO_LEGGED_OAUTH);
            OAuthSigner signer = new OAuthHmacSha1Signer();

            // Authenticate the service
            myService.setOAuthCredentials(oauthParameters, signer);

            // Build the query
            Query myQuery = new Query(new URL(FEED_URL_CONTACTS));
            myQuery.addCustomParameter(new CustomParameter("xoauth_requestor_id", MY_USER));
            myQuery.addCustomParameter(new CustomParameter("max-results", MAX_RESULTS));

            // Get all contacts
            ContactFeed resultFeed = myService.query(myQuery, ContactFeed.class);

            for (ContactEntry entry : resultFeed.getEntries()) {

                if (entry.hasName() && entry.getName().hasFamilyName()) {

                    if ((entry.getName().getFamilyName().getValue()).equals("Lastname")) {

                        System.out.println("Contact 'Lastname' was found");

                        entry.getName().getFamilyName().setValue("Lastname-EDIT");
                        entry.update();
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

Eclipse 的控制台输出：

```
Contact 'Lastname' was found
java.lang.NullPointerException: No authentication header information
    at com.google.gdata.util.AuthenticationException.initFromAuthHeader(AuthenticationException.java:96)
    at com.google.gdata.util.AuthenticationException.<init>(AuthenticationException.java:67)
    at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:608)
    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
    at com.google.gdata.client.Service.update(Service.java:1563)
    at com.google.gdata.client.Service.update(Service.java:1530)
    at com.google.gdata.client.GoogleService.update(GoogleService.java:597)
    at com.google.gdata.data.BaseEntry.update(BaseEntry.java:639)
    at com.haha.ContactsMain.main(ContactsMain.java:60) 
```

控制台输出的第一行证明可以读取联系人。ContactsMain.java:60 表示以下行：

```
entry.update(); 
```

有人知道我在这里做错了什么吗？在我想要更新之前，我是否必须向“条目”对象添加一些标记？

非常感谢每一个帮助。非常感谢，

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:55:42.960

我想只为 2-legged OAuth 启用了读取访问权限，但没有启用写入访问权限（这也是配置 api 发生的情况 - 我们一直在尝试从 Googe 获得写入访问权限最长时间，但他们从未提交过去做）。如果我是正确的，那么这很可能是更新失败的原因。（异常指向缺乏适当的身份验证）。

# weka - 如何在 Weka 中使用权重

> ID：12801228
> 
> 赞同：5
> 
> 时间：2012-10-09T13:31:44.193
> 
> 标签：weka

关于 Weka 的重量，我需要你的帮助。我正在对大规模数据进行一些实验：我正在将数据转换为实例并使用不同的分类器进行研究。现在我想研究赋予实例权重如何影响学习——有时我想赋予实例权重，有时不。我的问题是：

1.  可能的权重范围是多少？
2.  权重的效果是否因分类器而异？
3.  是否有默认权重（我在某处看到它可能是 1，但我想向它保证）？
4.  任何对相关信息的参考将不胜感激:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T15:56:01.980

问题 2 的答案是“是”，这也会影响问题 1 的答案。基本上，Weka 只将权重传递给实际的分类算法。允许的权重范围以及它们的使用方式完全取决于分类器的实现。关于问题3，默认权重将赋予所有实例相同的权重，实际数量并不那么重要。

例如，最近邻分类器完全忽略权重，即使它很乐意采用任何权重值。理论上，可以实现最近邻分类器来考虑权重，但这个特定的分类器没有。所以问题 2 的答案是它实际上取决于分类器的特定实现，甚至比分类器算法更多。

# java - Java：SimpleDateFormat 将 1 加到天和小时（时间跨度）

> ID：12801230
> 
> 赞同：6
> 
> 时间：2012-10-09T13:31:48.913
> 
> 标签：java, time, format, simpledateformat, timespan

我正在尝试以“天：小时：分钟：秒”的格式输出“900,000 毫秒”，我现在正在使用此代码：

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd:HH:mm:ss");
String formatted = simpleDateFormat.format(900000) 
```

900,000 毫秒应该是 15 分钟，所以我希望它返回

```
00:00:15:00 
```

或类似的东西......

但无论出于何种原因，它都会返回

```
01:01:15:00 
```

谁能告诉我为什么以及如何解决它？

我认为它必须与时区有关，但它也增加了 1 天数......？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T13:35:29.907

Day 是 01，因为它代表 1 月 1 日。01 小时可能与您的时区有关。尝试这个：

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd:HH:mm:ss");    
simpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
String formatted = simpleDateFormat.format(900000); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T13:44:19.763

通过使用你会出错`SimpleDateFormat`

`SimpleDateFormat`用于获取不计算时间的 DATE 实例

你应该使用`TimeUnit`

这是一个例子

```
 public static void main(String[] args) throws Exception {
        long millis = 900000;

        String s = String.format("%d min, %d sec",
                TimeUnit.MILLISECONDS.toMinutes(millis),
                TimeUnit.MILLISECONDS.toSeconds(millis)
                - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));

        System.out.println(s);

    } 
```

这会让你

`15 min, 0 sec`

只需格式化您的内心内容并添加日期和时间......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-09T13:42:08.690

传递给 SimpleDateFormat 的值 900,000 是一个时间点...... 1970 年 1 月 1 日 00:00:00 GMT 过去 15 分钟或：

格林威治标准时间 1970 年 1 月 1 日 00:15:00

在您所在时区的 1970 年的这个日期和时间，日为 1，小时为 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:43:02.900

答案是正确的。SimpleDate.format(900000) 语句格式化过去 900000 毫秒的时间，即第一个小时的 15 分钟

# java - Web 服务 - 传递参数

> ID：12801233
> 
> 赞同：1
> 
> 时间：2012-10-09T13:31:55.447
> 
> 标签：java, web-services

我在*DB*中有一张桌子：

```
id | name | surname | street 
```

对于*WebService*，我想调用一个*方法*并将*参数*传递给写入数据库的方法。但是，可以同时编写几行，例如：

```
1 | Jan | Nowak | Jasna

2 | Piotr | Kowalski | Ciemna 
```

ETC...

我需要作为参数传递名称、姓氏、街道。本来想传地图的，但是当我传了`key-value`(name-surname)的两个值的时候，这里却来了第三个值。如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:38:02.343

对通用 Web 服务执行此操作的普遍接受的方法是执行 HTTP POST，其正文包含描述要插入的值的 XML 或 JSON。

例如，您可能会 POST 到资源`"/people"`，如下所示：

```
<people>
  <person>
    <id>1</id>
    <name>Jan</name>
    <surname>Nowak</surname>
    <street>Jasna</street>
  </person>
  <person>
    <id>2</id>
    <name>Piotr</name>
    <surname>Kowalski</surname>
    <street>Ciemna</street>
  </person>
</people> 
```

然后在处理 POST 的代码中，您将 XML（使用 JAXB 或课程）解析为 Java 对象，然后通过 JDBC、Hibernate、MyBatis 等将这些写入您的数据库。

在这里使用 POST 很重要；通过 GET 传递太多参数是不可靠的，而不是使用 HTTP 的方式。

# sql - 内部查询和连接

> ID：12801236
> 
> 赞同：3
> 
> 时间：2012-10-09T13:32:10.720
> 
> 标签：sql, join

我编写了一个查询来从表 A 中获取一个代码，该代码不在表 B 中的相同 ID。我已经在查询中对 ID 进行了硬编码，我想知道如何获得所有 ID 的所需输出，而不仅仅是 539。下面是查询

```
SELECT
    a.code
FROM
    A
WHERE
    a.code NOT IN(
        SELECT
            b.code
        FROM
            B b
        WHERE
           b.ID='539'
        AND b.status <> 'D')
AND 
     (a.id='539')
AND 
     (a.status <> 'D') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:40:22.843

用左连接将表连接在一起，然后只选择表 B 中没有对应记录的记录

```
SELECT a.code
FROM A
LEFT JOIN B
  ON a.ID = b.ID
  AND a.code = b.code
  AND b.status <> 'D'
WHERE a.status <> 'D'
AND b.code IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:37:09.373

我认为你应该能够删除你正在查询的 id，你应该得到一切。

```
SELECT
    a.code
FROM
    A
WHERE
    a.code NOT IN(
        SELECT
        b.code
        FROM
        B b
        AND b.status <> 'D')
and AND a.status <> 'D' 
```

# android - 如何从可滚动选项卡中删除白条？

> ID：12801239
> 
> 赞同：0
> 
> 时间：2012-10-09T13:32:16.200
> 
> 标签：android

我已经制作了一个可滚动的标签，问题是它显示了一个白色条，表示有更多标签可用，如何从头到尾摆脱这个条？ ![末端有白色条的标签](../Images/35defd8f767d23e8019a552b53c360f0.png)

这是xml：

```
<HorizontalScrollView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:fillViewport="true"
                android:overScrollMode="never"
                android:scrollbars="none" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/menu_bg" />
            </HorizontalScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:10:43.570

尝试`android:fadingEdge="none"`在您的 xml 或[`setFadingEdgeLength`](http://developer.android.com/reference/android/view/View.html#setFadingEdgeLength%28int%29)代码中设置。

# c# - 执行 RDS 的类库中的 webbrowser 控件 - 无法更改 Internet 设置并且受信任的站点不起作用

> ID：12801244
> 
> 赞同：1
> 
> 时间：2012-10-09T13:32:23.723
> 
> 标签：c#, webbrowser-control, rds

我已经在**这个问题**上工作了一周：

我有一个托管.net webbrowser 控件的类库。这个 webbrowser 控件启动了一个 vbscript，它使用 RDS 技术与数据库进行通信。如果我将 Internet 选项更改为“允许跨域的数据源”，一切都可以正常工作。但是，由于明显的安全问题而发生部署时，这不是一个选项。那么问题是让解决方案在不改变全局 ie 设置的情况下工作。

**我尝试过的事情**： *将我们通过 RDS 访问的站点添加到我们的“受信任站点”（没有任何区别） *研究了 webbrowser 控件的自定义安全管理器 *除了自定义安全管理器，因为文档似乎缺乏并且实施起来很棘手

**我需要帮助**的地方：自定义安全管理器似乎是要走的路，但我不得不从多个帖子中提取，并且在.net 框架中如何使用 c# 实现它似乎存在差距。我在这里开始时遇到了一些麻烦。我想如果我有一些命名空间和项目引用的基础，我可能能够使用我发现的一些其他帖子，这些帖子似乎提供了 IInternetSecurityManager 的编码部分。似乎需要覆盖一个基类，然后从另一个基类继承它，但我在那里遇到了麻烦。因此，如果可能的话，我需要帮助开始，然后在我开始之后能够在整个过程中提出问题。

**我想了解** 的内容 似乎 webbrowser 控件对于脚本来说是不安全的，因此它不能完全模仿 IE。我想知道是否有办法提高我的类库的权限，或者注册它，或者给 webbrowser 控件更多的权限，而不必实现自定义安全管理器？

请帮忙。我淹没在这:)

# regex - 透明重定向到端口 8080

> ID：12801246
> 
> 赞同：3
> 
> 时间：2012-10-09T13:32:25.267
> 
> 标签：regex, apache, .htaccess, mod-rewrite, redirect

我的服务器上的 8080 端口上有一些 Web 应用程序可用。

由于我的一些用户由于他们的防火墙而无法访问端口 8080，我想在我的 apache 服务器上设置一个重定向。我想要以下网址

```
http://dev2.test.com/tomcat/somewebapp/restofthepath 
```

显示可访问的内容

```
http://dev2.test.com:8080/somewebapp/restofthepath 
```

当然，我不希望用户输入第一个地址来查看第二个地址。

我在中添加了以下`.htaccess`文件`/var/www`：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/(tomcat)
RewriteRule ^/tomcat/(.*)$ http://dev2.test.com:8080/$1 [P,QSA,L] 
```

但我得到这个错误`/var/log/apache2/error.log`：

```
[Tue Oct 09 15:23:06 2012] [error] File does not exist:  proxy:http://dev2.test.com:8080/tomcat/ 
```

你能告诉我我应该怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T15:04:33.983

您可能应该使用[`mod_proxy`](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#forwardreverse)而不是`mod_rewrite`.

```
ProxyPass /tomcat http://dev2.test.com:8000/
ProxyPassReverse /tomcat http://dev2.test.com:8000/ 
```

编辑 ：

此配置必须在 httpd.conf 中。它可能位于 VirtuaHost 部分或文件的根目录中。

您必须启用 mod_proxy。这可以使用

```
LoadModule  proxy_module         /usr/lib/apache2/modules/mod_proxy.so
LoadModule  proxy_http_module    /usr/lib/apache2/modules/mod_proxy_http.so 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:05:08.540

做你所做的只会将重定向发送到端口 8080 给用户（他们不能使用）。您需要使用[apache mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)或不同的代理服务器。

```
ProxyPass /foo http://foo.example.com/bar
ProxyPassReverse /foo http://foo.example.com/bar 
```

# sql-server - sql查询以获得所需的输出

> ID：12801247
> 
> 赞同：0
> 
> 时间：2012-10-09T13:32:25.173
> 
> 标签：sql-server

我的表中有两列`"Edition"`

现在，当我传递两个日期时，输出应该是所有行，但中间的所有行都应该添加`"New"`为结果。

所以，我的表包含：

```
id          edition_date            
----------- ----------------------- 
242         2011-01-01 00:00:00.000 
243         2011-02-01 00:00:00.000 
244         2011-03-01 00:00:00.000 
245         2011-04-01 00:00:00.000 
```

当我经过`2012-02-01`并且`2012-03-31`

**所需的输出：**

```
id          edition_date            Result   
----------- ----------------------- ----------- 
242         2011-01-01 00:00:00.000 
243         2011-02-01 00:00:00.000 New
244         2011-03-01 00:00:00.000 New
245         2011-04-01 00:00:00.000 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:34:22.123

```
declare @start datetime, @end datetime
select @start = convert(datetime, '2011-02-01',120),
       @end = convert(datetime, '2011-03-01',120)

select *,
    case when edition_date between @start and @end then 'New' end as Result
from
    Edition 
```

# php - 如何在 PHP 中使用 C 静态库（.a 文件）

> ID：12801257
> 
> 赞同：4
> 
> 时间：2012-10-09T13:32:49.517
> 
> 标签：php, c++, static, .a

在我们的一个项目中，我们**特别且强制**要求创建**C++ 静态库（.a 文件）**，然后**在 PHP（Web 应用程序）中使用它们。**我们成功地创建了 .a 文件，现在想知道是否有人可以帮助我们确定如何在 PHP 中使用它们。“.a 文件”将接受一些输入数据，并返回一些可在 Web 应用程序中使用的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:35:16.637

这是一个关于如何创建 PHP 扩展的不错的教程。我过去用过它，效果很好。

[https://web.archive.org/web/20150408110240/https://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend](https://web.archive.org/web/20150408110240/https://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend)

# stored-procedures - 过程中的光标问题

> ID：12801263
> 
> 赞同：0
> 
> 时间：2012-10-09T13:33:02.033
> 
> 标签：stored-procedures, plsql, oracle10g

```
CREATE TABLE TEST_CASE
  (
    ID NUMBER(19,2),
    CURRENCY_TYPE VARCHAR2(30),
    PAIDAMT NUMBER(19,2),
    RECVDAMT NUMBER(19,2),
    AMTDUE NUMBER,
    TRANSACTION_DATE VARCHAR2(30)
  ); 
```

我创建了一个程序来获取名称中包含**AMT**的字段。但是程序在执行时显示错误，我不知道为什么会产生这个错误。

```
create or replace procedure chk_amt
(
    vtbl varchar2
)
as
tblcursor sys_refcursor;
tblsqlstr varchar2(1000);
importedrows VARCHAR2(1000); 
BEGIN
    tblsqlstr := 'Select COLUMN_NAME from user_tab_columns where table_name= '|| vtbl ||' and COLUMN_NAME like upper(''%AMT%'')' ;   
    OPEN tblcursor for tblsqlstr;
loop
fetch tblcursor into importedrows;
DBMS_OUTPUT.PUT_LINE(importedrows); 
EXIT WHEN tblcursor%NOTFOUND;
end loop;
CLOSE tblcursor;
end;
/ 
```

错误是

```
ORA-00904: "TEST_CASE": invalid identifier
ORA-06512: at "***.CHK_AMT", line 11
ORA-06512: at line 2 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:29:01.803

除非您有使用动态 SQL 的特殊原因，否则使用静态 SQL 会容易得多。使用隐式游标通常也更容易，除非您有某些理由认为显式游标是有利的。由于您的代码片段不需要使用动态 SQL 或显式游标，因此可以将其简化为

```
create or replace procedure chk_amt
(
    vtbl varchar2
)
as
BEGIN
  FOR columns IN (SELECT column_name
                    FROM user_tab_columns
                   WHERE table_name = vtbl
                     AND column_name LIKE '%AMT%')
  LOOP
    DBMS_OUTPUT.PUT_LINE(columns.column_name);
  END LOOP; 
end; 
```

您得到的具体错误是将`vtbl`变量连接到动态 SQL 语句的结果。如果您要像这样将字符串连接在一起，则需要在字符串中的变量之前和之后放置一个单引号，并且您必须转义表名中的任何单引号（当然，很可能有表名中的任何单引号）。如果您必须使用动态 SQL，那么使用绑定变量会更好

```
tblsqlstr := 'Select COLUMN_NAME 
                from user_tab_columns 
                where table_name= :1 
                  and COLUMN_NAME like upper(''%AMT%'')' ;   
OPEN tblcursor for tblsqlstr using vtbl; 
```

除了更高效和避免潜在的 SQL 注入攻击之外，它还避免了在本地变量中转义数据的需要，并且避免了在字符串中添加额外引号的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:37:25.190

在您的动态语句中添加一些围绕 vtbl 的单引号，使其变为：-

```
tblsqlstr := 'Select COLUMN_NAME from user_tab_columns where table_name= '''|| vtbl ||''' and COLUMN_NAME like upper(''%AMT%'')' ; 
```

这意味着当你的代码运行时，如果 vtbl 有一个值 table_a，那么实际运行的语句将是 'table_a' 而不是 table_a。

注意不要公开这个过程，因为它容易受到 sql 注入的影响。理想情况下，您应该改用绑定变量。下面的例子： -

```
CREATE OR REPLACE PROCEDURE chk_amt(vtbl VARCHAR2) AS
tblcursor    SYS_REFCURSOR;
tblsqlstr    VARCHAR2(1000);
importedrows VARCHAR2(1000);
BEGIN
tblsqlstr := 'Select COLUMN_NAME from user_tab_columns where table_name= :val_bnd and COLUMN_NAME like upper(''%AMT%'')';
OPEN tblcursor FOR tblsqlstr USING vtbl;
LOOP
    FETCH tblcursor
        INTO importedrows;
    dbms_output.put_line(importedrows);
    EXIT WHEN tblcursor%NOTFOUND;
END LOOP;
CLOSE tblcursor;
END; 
```

# blackberry - 如何在黑莓中以编程方式发送短信

> ID：12801267
> 
> 赞同：3
> 
> 时间：2012-10-09T13:33:05.460
> 
> 标签：blackberry, sms, blackberry-simulator, blackberry-jde, sms-gateway

如何在 BlackBerry 中以编程方式发送 SMS？

我在某处读到，我需要服务器端和客户端代码来发送 SMS。这是真的吗？对于从一台设备向另一台设备或从模拟器向设备发送消息，我真的需要服务器端和客户端代码吗？

我在客户端的某个地方找到了这段代码，但我没有得到输出。

```
private void sendSMS(String phone, String message) throws RuntimeException, ServicesManagerException, IOException 
{
    // TODO Auto-generated method stub

    System.out.println("in send sms function");
    MessageConnection conn =
        (MessageConnection)Connector.open("sms://+919099087960");
    BinaryMessage msgOut = (BinaryMessage) conn.newMessage(MessageConnection.BINARY_MESSAGE);
    msgOut.setPayloadData("my binary payload".getBytes("UTF-8"));
    conn.send(msgOut);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:46:27.050

您不需要任何服务器端代码。检查以下代码。

```
static String msg="hai";
try {
    new Thread() {
        public void run() {
            if (RadioInfo.getNetworkType() == RadioInfo.NETWORK_CDMA) {
                DatagramConnection dc = null;
                try {
                    dc = (DatagramConnection) Connector.open("sms://+919099087960");
                    byte[] data = msg.getBytes();
                    Datagram dg = dc.newDatagram(dc.getMaximumLength());
                    dg.setData(data, 0, data.length);
                    dc.send(dg);
                    UiApplication.getUiApplication().invokeLater(new Runnable() {
                        public void run() {
                            try {
                                System.out.println("Message Sent Successfully : Datagram");
                                Dialog.alert("Message Sent Successfully");
                            } catch (Exception e) {
                                System.out.println("Exception  : " + e.toString());
                                e.printStackTrace();
                            }
                        }
                    });
                } catch (Exception e) {
                    System.out.println("Exception  : " + e.toString());
                    e.printStackTrace();
                } finally {
                    try {
                        dc.close();
                        dc = null;
                    } catch (IOException e) {
                        System.out.println("Exception  : " + e.toString());
                        e.printStackTrace();
                    }
                }
            } else {
                MessageConnection conn = null;
                try {
                    conn = (MessageConnection) Connector.open("sms://+919099087960");
                    //generate a new text message
                    TextMessage tmsg = (TextMessage) conn.newMessage(MessageConnection.TEXT_MESSAGE);
                    //set the message text and the address
                    tmsg.setAddress("sms://+919099087960");
                    tmsg.setPayloadText(msg);
                    //finally send our message
                    conn.send(tmsg);
                    UiApplication.getUiApplication().invokeLater(new Runnable() {
                        public void run() {
                            try {
                                System.out.println("Message Sent Successfully : TextMessage");
                                Dialog.alert("Message Sent Successfully : TextMessage");
                            } catch (Exception e) {
                                System.out.println("Exception  : " + e.toString());
                                e.printStackTrace();
                            }
                        }
                    });
                } catch (Exception e) {
                    System.out.println("Exception  : " + e.toString());
                    e.printStackTrace();
                } finally {
                    try {
                        conn.close();
                        conn = null;
                    } catch (IOException e) {
                        System.out.println("Exception  : " + e.toString());
                        e.printStackTrace();
                    }
                }
            }
        }
    }.start();
} catch (Exception e) {
    System.out.println("Exception  : " + e.toString());
    e.printStackTrace();
} 
```

# java - 使用java和aspose在xml中设置数据

> ID：12801271
> 
> 赞同：0
> 
> 时间：2012-10-09T13:33:10.763
> 
> 标签：java, xml, aspose, aspose-cells

我无法在每列之后设置任何数据，假设我有像 a1、a2、a3 这样的列，我只能为 a1 和 a3 而不是 a2 设置。我正在使用 aspose 在 xml 中设置数据并生成 xml。什么是我在这里做错了吗？

```
Worksheet workSheet = workerBook.getWorksheets().get(0);
style.setTextWrapped(true);
workSheetCell = workSheet.getCells().get("A1");
workSheet.getCells().merge(3, 0, headerRows, 1);
workSheet.getCells().merge(3, 1, headerRows, 1);
workSheet.getCells().merge(3, 2, headerRows, 1);
// workSheet.getCells().get("C4").putValue("Time");
workSheet.getCells().get("A4").putValue("Respondent");

workSheet.getCells().get("B4").putValue("Date");

workSheet.getCells().get("C4").putValue("Time"); 
```

生成字符串“日期未在 xml 中设置”。请让我知道这里出了什么问题。这是使用 aspose 完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:28:40.600

@pars，恐怕我不确定您上面提到的.xlkx 扩展名，最接近的扩展名是.xltx。修改最后一行后，我使用下面的相同代码生成了 xltx 文件。

示例代码。

```
int headerRows = 3;
Workbook workerBook = new Workbook();  
Worksheet workSheet = workerBook.getWorksheets().get(0);
//style.setTextWrapped(true);
Cell workSheetCell = workSheet.getCells().get("A1");
workSheet.getCells().merge(3, 0, headerRows, 1);
workSheet.getCells().merge(3, 1, headerRows, 1);
workSheet.getCells().merge(3, 2, headerRows, 1);
// workSheet.getCells().get("C4").putValue("Time");
workSheet.getCells().get("A4").putValue("Respondent");
workSheet.getCells().get("B4").putValue("Date");
workSheet.getCells().get("C4").putValue("Time");
workerBook.save(DIR + "SettingData.xltx", SaveFormat.XLTX); 
```

您能否测试最新版本，因为我无法注意到最新版本[Aspose.Cells for Java v7.3.2.2](http://www.aspose.com/community/forums/417271/postattachment.aspx) - 最新版本的问题。我生成的 xltx 文件可以从此[链接](http://sialkot.aspose.com/wiki/download/attachments/17432983/SettingData.xltx?version=1&modificationDate=1349953887948)访问。

下图显示了在 OpenOffice 中查看的文件。 ![在此处输入图像描述](../Images/e635d95000fae180b0df66e91c573598.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:56:29.823

根据我目前的理解，上面指定的代码并不紧凑，它有一些我不确定的指针/对象。还请分享有关此问题的更多详细信息。

但是，我已经使用 Aspose.Cells for Java v7.3.2 使用以下示例代码（类似于您正在使用的代码）测试了此场景，并且效果很好。“日期”和“时间”值被很好地插入到合并的 B4 和 C4 单元格中。

```
int headerRows = 3;
Workbook workerBook = new Workbook();  
Worksheet workSheet = workerBook.getWorksheets().get(0);
//style.setTextWrapped(true);
Cell workSheetCell = workSheet.getCells().get("A1");
workSheet.getCells().merge(3, 0, headerRows, 1);
workSheet.getCells().merge(3, 1, headerRows, 1);
workSheet.getCells().merge(3, 2, headerRows, 1);
// workSheet.getCells().get("C4").putValue("Time");
workSheet.getCells().get("A4").putValue("Respondent");
workSheet.getCells().get("B4").putValue("Date");
workSheet.getCells().get("C4").putValue("Time");
workerBook.save("SettingData.xlsx");
workerBook.save("myoutputSettingData.xml", SaveFormat.SPREADSHEET_ML); 
```

查看下图，它显示了生成的工作簿。![在此处输入图像描述](../Images/a9778a315e1f37cdacc06b05d9261fa4.png)

*PS，我在 Aspose 担任支持开发人员/技术传播者。*

# objective-c - iOS - 帧高度不是像素？

> ID：12801274
> 
> 赞同：1
> 
> 时间：2012-10-09T13:33:18.633
> 
> 标签：objective-c, ios, frame, cgrect

我只是有一个关于框架高度的问题。

框架.尺寸.高度 = 450;

当我设置一个高度为 450 的 CGRect 框架时，x = 0 和 y = 0。tableview 几乎一直延伸到底部。这个数字不是基于像素的，因为我在 iPhone 5 1136 上测试它。它甚至不应该延伸到一半。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T13:35:40.537

iOS 屏幕坐标以 UI 点为单位。在原始密度屏幕上，一个点是一个像素，因此在高分辨率/视网膜显示器上，一个点是两个像素。

2014 年更新：在 iPhone 6 Plus 上，1 点甚至是 3 个像素。（2018 年：以及 iPhone 6s Plus、7 Plus、8 Plus 和 X。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T13:37:00.100

你混淆了点和像素。有关详细信息，请参阅 Apple iOS 文档。

> 在 iOS 中，您在绘图代码中指定的坐标和底层设备的像素是有区别的。在使用 Quartz、UIKit、Core Animation 等原生绘图技术时，绘图坐标空间和视图坐标空间都是逻辑坐标空间，距离以点为单位。这些逻辑坐标系与系统框架用来管理屏幕像素的设备坐标空间分离。
> 
> 系统自动将视图坐标空间中的点映射到设备坐标空间中的像素，但这种映射并不总是一对一的。这种行为导致了一个重要的事实，你应该永远记住：
> 
> 一个点不一定对应一个物理像素。使用点（和逻辑坐标系）的目的是提供与设备无关的一致大小的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:41:45.537

正如 Jesper 和 Rikkles 所说，iPhone 5 配备 Retina 显示屏，这意味着您必须将设置的像素数量增加一倍，以匹配屏幕上实际显示的像素数量。

另外，不要忘记，如果您的容器视图是为原始 iPhone 分辨率 (320x480) 设计的，则在 iPhone 5 上使用时可能会调整其大小，使原始“450”设置为 450/480*568 = 533 像素高度.

# c - 如何控制 GtkWidget 中前导空格的数量？

> ID：12801278
> 
> 赞同：2
> 
> 时间：2012-10-09T13:33:31.537
> 
> 标签：c, gtk, gtk3

如何在 GtkWidget 中设置前导空格？正如您在下面的图像中看到的那样，当窗口开始时，用户名/密码小部件离水平线有点远

![在此处输入图像描述](../Images/14e3d6702ccfea2098f7e3cb6c7d52e8.png)

我的代码：

```
 GtkWidget *window;
  GtkWidget *login_label;
  GtkWidget *username_label, *password_label;
  GtkWidget *username_entry, *password_entry;
  GtkWidget *ok_button;
  GtkWidget *hbox0, *hbox1, *hbox2, *hbox3;
  GtkWidget *vbox;

  gtk_init(&argc, &argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title(GTK_WINDOW(window), "hello");
  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 200, 300);

  g_signal_connect(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);

  login_label    = gtk_label_new("Login");
  username_label = gtk_label_new("Username: ");
  password_label = gtk_label_new("Password: ");
  username_entry = gtk_entry_new();
  password_entry = gtk_entry_new();

  gtk_entry_set_visibility(GTK_ENTRY(password_entry), FALSE);
  ok_button = gtk_button_new_with_label("Enter");

  g_signal_connect(G_OBJECT(ok_button), "clicked", G_CALLBACK(print_username), ok_button);

  hbox0 = gtk_hbox_new(TRUE, 5);
  hbox1 = gtk_hbox_new(TRUE, 5);
  hbox2 = gtk_hbox_new(TRUE, 5);
  hbox3 = gtk_hbox_new(TRUE, 5);

  vbox =  gtk_vbox_new(FALSE, 10);

  gtk_box_pack_start(GTK_BOX(hbox0), login_label, TRUE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(hbox1), username_label, TRUE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(hbox1), username_entry, TRUE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(hbox2), password_label, TRUE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(hbox2), password_entry, TRUE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(hbox3), ok_button, FALSE, FALSE, 5);

  gtk_box_pack_start(GTK_BOX(vbox), hbox0, FALSE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(vbox), hbox1, FALSE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(vbox), hbox2, FALSE, FALSE, 5);
  gtk_box_pack_start(GTK_BOX(vbox), hbox3, FALSE, FALSE, 5);

  gtk_container_add(GTK_CONTAINER(window), vbox);

  gtk_widget_show_all(window);
  gtk_main(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:36:33.930

这取决于您用来保存这些小部件的容器类型。

假设它是最外层的[GtkVBox](http://developer.gnome.org/gtk3/stable/GtkBox.html)，行具有单个小部件或多个 GtkBox，您应该查看 的参数`[gtk_box_pack_start()](http://developer.gnome.org/gtk3/stable/GtkBox.html#gtk-box-pack-start)`，尤其是`fill`标志。

*更新*：根据您的评论，也许您应该尝试使用 a`[GtkGrid](http://developer.gnome.org/gtk3/stable/GtkGrid.html)`而不是框，使用网格更容易使事物整齐排列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:06:41.883

a 的`GtkGrid`内部`GtkDialog`可能更适合您尝试实现的布局，但是，至少让我帮助您的代码，就像现在一样。

对于包装，我假设您希望`GtkLabel`小部件具有固定宽度，左对齐。小`GtkEntry`部件将填满其余的水平空间。

首先，您可以控制`GtkLabel`. 由于 a`GtkLabel`是 a `GtkMisc`，您可以使用它来对齐文本。对齐是`0.0`一直到左/上和`1.0`一直到右/下的分数。

```
username_label = gtk_label_new("Username: ");
password_label = gtk_label_new("Password: ");

/* left align horizontally, center align vertically */
gtk_misc_set_alignment(GTK_MISC(username_label), 0.0, 0.5);
gtk_misc_set_alignment(GTK_MISC(password_label), 0.0, 0.5); 
```

假设您使用的是 GTK+ 3，您可能应该放弃不推荐使用的`gtk_hbox_new()`功能`gtk_vbox_new()`，转而使用`gtk_box_new()`. 我发现在 GTK+ 3 中使用那些不推荐使用的函数经常会出现意想不到的结果。

```
hbox0 = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 5);
hbox1 = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 5);
hbox2 = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 5);
hbox3 = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 5);
vbox =  gtk_box_new(GTK_ORIENTATION_VERTICAL, 10); 
```

最后，您可以更改包装，以便标签不会扩展，但条目会扩展。

```
/* login label fills all horiz space */
gtk_box_pack_start(GTK_BOX(hbox0), login_label, TRUE, TRUE, 5);

/* labels do NOT expand, but they will fill the space if it's there */
gtk_box_pack_start(GTK_BOX(hbox1), username_label, FALSE, TRUE, 5);
gtk_box_pack_start(GTK_BOX(hbox2), password_label, FALSE, TRUE, 5);

/* entries expand and fill all remaining space */
gtk_box_pack_start(GTK_BOX(hbox1), username_entry, TRUE, TRUE, 5);
gtk_box_pack_start(GTK_BOX(hbox2), password_entry, TRUE, TRUE, 5); 
```

虽然它有点过时了，但您可能想阅读我的 GTK+ 教程中[的包装如何影响布局](http://www.micahcarrick.com/gtk-glade-tutorial-part-1.html#How_Packing_Effects_the_Layout)。通过在[Glade](http://glade.gnome.org/)中使用打包属性，您可以在用 C 进行硬编码之前快速测试您的布局。

另请注意，从 GTK+ 3 开始，`"halign"`,`"valign"`和`"hexpand"`现在`"vexpand"`优先于`"expand"`and`"fill"`属性。

**编辑**

这是一种“更好”的方法，它可以更好地`GtkGrid`处理 GTK+ 3 的宽度与高度几何形状，并确保您同时拥有行和列。

首先，设置`hexpand`入口小部件的属性（而不是将它们“打包”到一个带有扩展的盒子中）：

```
/* allow entry widgets to expand */
gtk_widget_set_hexpand(username_entry, TRUE);
gtk_widget_set_hexpand(password_entry, TRUE); 
```

接下来，将所有小部件附加到网格。您可以跨多个列跨越“登录”标签和“确定”按钮：

```
grid = gtk_grid_new();

/* 5 pixels between rows and columns */
gtk_grid_set_row_spacing(GTK_GRID(grid), 5);
gtk_grid_set_column_spacing(GTK_GRID(grid), 5);

/* 5 pixels around entire grid */
gtk_container_set_border_width(GTK_CONTAINER(grid), 5);

/* "login" spans 2 columns */
gtk_grid_attach(GTK_GRID(grid), login_label, 0, 0, 2, 1);

gtk_grid_attach(GTK_GRID(grid), username_label, 0, 1, 1, 1);
gtk_grid_attach(GTK_GRID(grid), username_entry, 1, 1, 1, 1);
gtk_grid_attach(GTK_GRID(grid), password_label, 0, 2, 1, 1);
gtk_grid_attach(GTK_GRID(grid), password_entry, 1, 2, 1, 1);

/* "ok" button spans 2 columns */
gtk_grid_attach(GTK_GRID(grid), ok_button, 0, 3, 2, 1);

gtk_container_add(GTK_CONTAINER(window), grid); 
```

用于`gtk_grid_attach`指定每个小部件的位置、宽度和高度（以单元格，而不是像素为单位）的参数。查看[GtkGrid 的 API 文档了解](http://developer.gnome.org/gtk3/stable/GtkGrid.html)详细信息。

# android - 用于加载 WebView 的外部缓存？

> ID：12801280
> 
> 赞同：3
> 
> 时间：2012-10-09T13:33:43.577
> 
> 标签：android, caching, webview

我在我的应用程序中使用 WebView，我需要预先缓存一些网页以供以后使用。由于我希望缓存过程不那么令人讨厌，因此它必须不引人注意。所以最好在Service中实现。

我不知道如何实现这一点，因为 WebView 只能存在于一个活动中。有什么方法可以将网页缓存到本地存储，然后让 WebView 稍后加载？或者我怎样才能用另一种方法实现这些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:42:01.060

请阅读此主题，您应该在那里找到答案，详细说明：

[http://alex.tapmania.org/2010/11/html5-cache-android-webview.html](http://alex.tapmania.org/2010/11/html5-cache-android-webview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:59:17.090

只要网页在退出之前不调用 LocalStorage.clear，数据就应该在 SQLite 数据库中可用。

如果我的记忆正确在 4.03 以下，则路径类似于 /data/data//app_database/localstorage/file__0.localstorage

由于本地存储数据保存在名为 ItemTable 的 SQLite 表中，因此您可以使用 SQLite API 读取此数据（在相同的上下文中）。

因此，您可以通过插入该表来从您的服务中预填充该表。

很抱歉没有粘贴任何代码 - 我没有它，但这会起作用 - 我已经完成了

# xslt - 使用 xslt 删除命名空间 n 标记

> ID：12801283
> 
> 赞同：0
> 
> 时间：2012-10-09T13:33:50.003
> 
> 标签：xslt

我想使用 xslt 删除两个根标签和一个命名空间

```
<?xml version="1.0" encoding="UTF-8"?>
<sxi:Messages xmlns:sxi="http://sap.com/xi/XI/SplitAndMerge">
<sxi:Message1>
<ZDetails>
.
.
</ZDetails>
</sxi:Message1>
</sxi:Messages> 
```

我希望它是

```
<?xml version="1.0" encoding="UTF-8"?>
<ZDetails>
..
.
</ZDetails> 
```

不应更改标签 n 之间的任何数据。我尝试通过搜索加入一些 xslt 代码，但它们正在删除 ZDetails 之间的一些属性。所以发一个新的。任何人都可以帮助我了解相应的 xslt 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:22:24.970

这应该这样做：

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:sxi="http://sap.com/xi/XI/SplitAndMerge">

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="sxi:Messages">
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="sxi:Message1">
    <xsl:apply-templates/>
  </xsl:template>

</xsl:stylesheet> 
```

第一个模板复制所有内容，其他两个模板跳过`sxi:Messages`and`xsi:Message1`元素 - 仍然复制它们的内容。

如果要删除`http://sap.com/xi/XI/SplitAndMerge`命名空间中的所有元素：

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:sxi="http://sap.com/xi/XI/SplitAndMerge">

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="sxi:*">
    <xsl:apply-templates/>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:12:50.770

这是一种简单的方法，可以保证不会更改元素下的任何`<ZDetails>`内容：

```
<xsl:stylesheet version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <xsl:copy-of select="/*/*/ZDetails" />
  </xsl:template>

</xsl:stylesheet> 
```

模板简单地复制`<ZDetails>`最外层元素的孙子元素及其整个子树，并忽略其他任何内容。

# firefox - 在“chrome-document-global-created”之后访问 dom

> ID：12801285
> 
> 赞同：0
> 
> 时间：2012-10-09T13:33:57.403
> 
> 标签：firefox, dom, firefox-addon, domcontentloaded

`"chrome-document-global-created"`当 Mozilla 观察者事件被触发时，我需要获取 DOM 。因此，我有以下代码。但是我怎样才能从那里得到 DOM？数据是`null`（根据文档），有人可以告诉我我必须使用哪个对象吗？

非常感谢！

```
observe: function(subject, topic, data) {
  which object is it? document? window? cant find anything there about dom...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:04:50.033

如果你看[文档](https://developer.mozilla.org/en-US/docs/Observer_Notifications#Documents)，`subject`是一个窗口。您仍然需要使用[`QueryInterface()`](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISupports#QueryInterface%28%29)实际获取`nsIDOMWindow`界面，但之后事情变得非常明显：

```
var doc = subject.QueryInterface(Components.interfaces.nsIDOMWindow).document;
dump(doc.documentElement.innerHTML); 
```

请注意，此时文档中不会有太多内容 - 它刚刚创建。正如 Boris Zbarsky 在评论中指出的那样，您可能希望添加一个`DOMContentLoaded`事件侦听器来等待文档内容变为可用：

```
var wnd = subject.QueryInterface(Components.interfaces.nsIDOMWindow);
wnd.addEventListener("DOMContentLoaded", function(event)
{
  dump(wnd.document.documentElement.innerHTML);
}, false); 
```

# webcenter-sites - WebCenter Sites 11gr1 安装：无法继续进行 fwadmin 登录

> ID：12801286
> 
> 赞同：1
> 
> 时间：2012-10-09T13:34:05.980
> 
> 标签：webcenter-sites

我面临相关问题。我已经在 Weblogic 上安装了 WebCenter Sites。我的环境是

RHL 5 甲骨文 11gr1

在我们的托管服务器上部署“cs”期间，出现 log4j 错误。我必须编辑 weblogic.xml 并添加以下内容

```
<container-descriptor>
<prefer-web-inf-classes>true</prefer-web-inf-classes>
</container-descriptor> 
```

部署“cas”时发生相同的 log4j 错误，必须将上述内容添加到 cas weblogic.xml

然后是找不到 cas.properties 文件的错误。

该文件位于 /home/oracle/oracle/webcenter/sites/bin 以及其他三个文件

host.properties jbossTicketCacheReplicationConfig.xml 和 libsigar-amd64-linux.so

一旦我将它们复制到 /cas/WEB-INF/classes 中，我就能够毫无错误地部署 cas，并且 Webcenter Sites 安装成功。

我可以成功访问登录页面

[http://192.168.14.125:16400/cas/login?service=http%3A%2F%2F192.168.14.125%3A16400%2Fcs%2Fwem%2Ffatwire%2Fwem%2FWelcome]

一旦我尝试使用 fwadmin 登录，它就会进入重定向循环。

应用服务器消息

```
INFO: Reloading registered services.
Oct 9, 2012 2:36:22 PM org.jasig.cas.services.DefaultServicesManagerImpl load
INFO: Loaded 0 services.

Oct 9, 2012 2:38:43 PM org.jasig.cas.CentralAuthenticationServiceImpl grantServiceTicket
INFO: Granted service ticket [ST-11-ItqcwCaffbrXydPeBtMB-cas-192.168.14.125-1] for service [http://192.168.14.125:16400/cs/wem/fatwire/wem/Welcome] for user [fwadmin]
I have following in my sites.log file

2012-10-09 14:38:43,414] [ERROR] [.kernel.Default (self-tuning)'] [sso.cas.filter.CASFilter] Ticket ST-10-EpWYIR3xPPgVLtk2HmZf-cas-192.168.14.125-1 is already validated or CAS is not avalilable. Request [http://192.168.14.125:16400/cs/wem/fatwire/wem/Welcome] from 192.168.14.144
java.lang.RuntimeException: Unable to create XMLReader
at org.jasig.cas.client.util.XmlUtils.getXmlReader(XmlUtils.java:44)
at org.jasig.cas.client.util.XmlUtils.getTextForElement(XmlUtils.java:116)
at org.jasig.cas.client.validation.Cas20ServiceTicketValidator.parseResponseFromServer(Cas20ServiceTicketValidator.java:69)
at org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:188)
at com.fatwire.wem.sso.cas.CASProvider.validate(CASProvider.java:306)
at com.fatwire.wem.sso.cas.filter.CASFilter.doFilter(CASFilter.java:425)
at com.fatwire.wem.sso.SSOFilter.doFilter(SSOFilter.java:51)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused by: java.lang.ClassCastException: org.apache.xerces.jaxp.SAXParserFactoryImpl
at org.xml.sax.helpers.XMLReaderFactory.loadClass(Unknown Source)
at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(Unknown Source)
at org.jasig.cas.client.util.XmlUtils.getXmlReader(XmlUtils.java:42)
... 16 more 
```

我用这篇文章中提到的条目编辑了 setDomainEvn.sh

```
if [ "${PRE_CLASSPATH}" != "" ] ; then
PRE_CLASSPATH="/export/home/bea/domains/cas/WEB-INF/lib/commons-lang-2.4.jar;/export/home/bea/domains/cas/WEB-INF/lib/quartz-1.5.2.jar;/export/home/bea/domains/cas/WEB-INF/lib/jstl-api-1.2.jar;/home/oracle/oracle/webcenter/sites/MSXML.jar${COMMON_COMPONENTS_HOME}/modules/oracle.jdbc_11.1.1/ojdbc6dms.jar${CLASSPATHSEP}${PRE_CLASSPATH}"
export PRE_CLASSPATH
else
PRE_CLASSPATH="/export/home/bea/domains/cas/WEB-INF/lib/commons-lang-2.4.jar;/export/home/bea/domains/cas/WEB-INF/lib/quartz-1.5.2.jar;/export/home/bea/domains/cas/WEB-INF/lib/jstl-api-1.2.jar;/home/oracle/oracle/webcenter/sites/MSXML.jar${COMMON_COMPONENTS_HOME}/modules/oracle.jdbc_11.1.1/ojdbc6dms.jar"
export PRE_CLASSPATH
fi 
```

即使在那之后我也遇到了同样的错误。

观察者很有趣，我已经安装了带有 oracle 数据库选项的 Webcenter 站点，但是在我的 cas.properties 文件中，我有以下条目

```
#database.hibernate.dialect=org.hibernate.dialect.OracleDialect
#database.hibernate.dialect=org.hibernate.dialect.MySQLDialect
database.hibernate.dialect=org.hibernate.dialect.HSQLDialect 
```

任何想法这里发生了什么？

BR AAN

# sql - Db2 将列更改为行更新时间戳

> ID：12801289
> 
> 赞同：0
> 
> 时间：2012-10-09T13:34:09.523
> 
> 标签：sql, db2, timestamp, last-modified

在我的表中，我有一列 MODIFIED 类型为 TIMESTAMP。我想在更新行时自动更新此列

我可以将其用于新列

```
alter table my_table add column last_updated timestamp not null
 generated by default for each row on update as row change timestamp 
```

但我不能用它来编辑现有的列来自动更新

```
alter table my_table alter column modified set data type timestamp 
 not null generated by default for each row on update as row change timestamp 
```

我是否正确使用了改变？

错误信息是

```
Error: DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=alter table my_table alter column modified;BEGIN-OF-STATEMENT;<values>, DRIVER=3.50.152
SQLState:  42601
ErrorCode: -104 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:05:12.553

在这里找到一篇文章 [http://ibmsystemsmag.blogs.com/db2utor/2008/01/automate-row-ch.html](http://ibmsystemsmag.blogs.com/db2utor/2008/01/automate-row-ch.html)

***本质上它说***

*   *您不能使用 ALTER TABLE 语句将现有表上的列转换为使用 as-row-change-timestamp-clause。您必须删除表并使用 as-row-change-timestamp-clause 定义的列重新创建，或者 ALTER 表并使用 as-row-change-timestamp-clause 添加一个新列。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-27T15:07:07.023

您将能够在使用以下查询时添加带有时间戳的新列。

```
ALTER TABLE TABLE_NAME
  add column UPDATED_DATE_TIME TIMESTAMP GENERATED ALWAYS FOR EACH ROW
  ON UPDATE AS ROW CHANGE TIMESTAMP NOT NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:37:43.437

列存在后，您可以使用稍微不同的语法来更改数据类型和属性：

```
alter table my_table alter column my_column set generated by default ... 
```

# javascript - 单击上一个/下一个链接并在源更改时淡入图像并保留容器尺寸

> ID：12801292
> 
> 赞同：1
> 
> 时间：2012-10-09T13:34:20.643
> 
> 标签：javascript, jquery, image, slideshow, fadein

我有一些图像，当我单击上一个/下一个链接时，我将它们加载到特定的 div 中。图像循环。当我单击上一个或下一个按钮时，JS 会更改图像的来源，并加载下一个。该代码有效。

现在我的问题。我想在每个新图像完全加载时淡入淡出，以获得更好的效果，但我无法让它工作。我从各种来源汇总的代码仅适用于第一张图像。

我真的希望代码简单，因为我对 Jquery 的了解非常基础。我搜索了该站点，发现了很多类似的问题和解决方案，但没有一个对我有用。

**添加于 10 月 10 日。2012：** @jbabey 对我的基本问题给出了一个很好的答案（见下文），但随后又出现了另一个问题。当我单击 nex/prev 按钮并且新图像正在等待加载（并淡入）时，图像的容器会缩小。我知道这是因为新图像在完全加载之前是隐藏的。但是有没有办法改变 JS，它“记住”第一个加载图像的容器高度（在页面加载时加载的基本图像）。因此，当我单击 prev/next 时，图像的容器会保留前一个图像的高度。由于页面设计，我无法设置容器的高度。

任何帮助，将不胜感激。

原来的功能：

```
// Next image on button (and image) click
$('#swapnextimg,#imgId').click( function() {
    curIdx = (curIdx+1) % max;
    $("#imgId").attr('src', imgSrcBase+images[curIdx]+'.jpg');
});

// Prev image on button click
$('#swapprevsimg').click( function() {
    curIdx = (curIdx+max-1) % max;
    $("#imgId").attr('src', imgSrcBase+images[curIdx]+'.jpg');
}); 
```

**完整示例：http: [//jsfiddle.net/S_Ajd/6vHSb/](http://jsfiddle.net/S_Ajd/6vHSb/)**

**@jbabey 的代码：http: [//jsfiddle.net/jbabey/6vHSb/28/](http://jsfiddle.net/jbabey/6vHSb/28/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:41:01.293

只需将您编写的用于淡入第一张图像的代码放入前一个和下一个按钮的单击处理程序中即可。

```
// Next image on button (and image) click
$('#swapnextimg,#imgId').click( function() {
    curIdx = (curIdx+1) % max;
    $("#imgId").hide().attr('src', imgSrcBase+images[curIdx]+'.jpg')
    .load(function () {
        $(this).fadeIn(1000);
    });
});

// Prev image on button click
$('#swapprevsimg').click( function() {
    curIdx = (curIdx+max-1) % max;
    $("#imgId").hide().attr('src', imgSrcBase+images[curIdx]+'.jpg')
    .load(function () {
        $(this).fadeIn(1000);
    });
}); 
```

[http://jsfiddle.net/jbabey/6vHSb/28/](http://jsfiddle.net/jbabey/6vHSb/28/)

# jquery - jQuery检测div内的点击

> ID：12801295
> 
> 赞同：1
> 
> 时间：2012-10-09T13:34:26.593
> 
> 标签：jquery

我正在尝试使用 jQuery 来检测用户何时在页面上的 div 内单击。应该很容易，但它不起作用。

这是我的代码摘要（在 HTML 中）：

```
<div class="outerDiv">
    <object id="video">
      ...
     </object>
</div> 
```

在 jQuery 中：

```
$("body").on("click",function(e){
if(e.target.id=="outerDiv") {
   ... do something
}           
if(e.target.id=="video") {
    alert("Inside div");
}
 ...

}); 
```

但是，当在 ID 为“video”的对象内单击时，什么也没有发生。但是，如果我在“outerDiv”内部单击，则代码会拾取它。

可能是因为“视频” id 里面我有一个对象（在这种情况下是一个内置的 Flash 视频播放器）？

我究竟做错了什么？

干杯:)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:38:24.693

为什么不通过向“on”调用添加另一个参数来定位特定的 div？

```
$("body").on("click", "#flash_holder", function(e) {
   alert("clicked on flash_holder");
}); 
```

如果您只针对单个元素，可能根本不需要使用委托：

```
$("#flash_holder").click(function(e) {
   alert("clicked on flash_holder");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T13:37:27.213

显然*内部*点击事件是由 Flash 处理的。这种点击不会传播到您的 DOM 元素，除非您在 SWF 文件中手动实现它。

# android - 客户经理和身份验证令牌

> ID：12801300
> 
> 赞同：3
> 
> 时间：2012-10-09T13:34:34.070
> 
> 标签：android, accountmanager

我正在考虑使用 Android AccountManager 来创建我的自定义 AccountAuthenticator 等。但是，我尝试连接的服务器（连接代码已编写并正在工作）没有为我提供 Auth Token，所以我不必发送每次我想同步的用户密码。所以我问有没有一种方法可以实现 AccountAuthenticator 而无需使用 Auth Token 只是一个加密的密码？？？任何想法都非常受欢迎，代码插入点的一些帮助也会很棒。

我的问候，里本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:04:36.847

`AccountAuthenticator`默认情况下只是将密码保存在数据库中。如果你想加密它，你应该在你的实现中这样做。这留下了一个问题，即您将使用什么密钥以及将其存储在哪里。如果您只是将其嵌入到应用程序中，提取将是微不足道的。这是一个保存 Admob API 密码的示例实现。它虽然不加密它：

[https://github.com/AndlyticsProject/andlytics/blob/master/src/com/github/andlyticsproject/admob/AdmobAccountAuthenticator.java](https://github.com/AndlyticsProject/andlytics/blob/master/src/com/github/andlyticsproject/admob/AdmobAccountAuthenticator.java)

# sql - TSQL 获取历史中具有特定代码的所有订单

> ID：12801308
> 
> 赞同：1
> 
> 时间：2012-10-09T13:35:11.907
> 
> 标签：sql, tsql, sql-server-2005

我有一个包含订单状态更改的表：

```
ORDER_ID  |  CHANGE_DATE      |  CODE_1  |  CODE_2  |  CODE_3
=============================================================
1         |  2012-09-01 12:20 |  Z1      |  NULL    |  NULL
1         |  2012-09-01 12:21 |  Z2      |  S01     |  NULL
1         |  2012-09-01 12:22 |  Z2      |  S04     |  NULL
2         |  2012-09-01 12:22 |  Z1      |  S01     |  NULL
3         |  2012-09-01 12:23 |  Z1      |  S03     |  NULL
1         |  2012-09-01 12:24 |  Z1      |  S02     |  NULL
2         |  2012-09-01 12:29 |  Z1      |  S05     |  NULL
1         |  2012-09-01 13:29 |  Z5      |  T01     |  X01
2         |  2012-09-01 13:31 |  Z1      |  T01     |  NULL 
```

我需要为历史 CODE_2 IN (S01,S02,S03) 但后面没有 S04 和 S05 的每个订单选择 ORDER_ID。

在这种特定情况下，查询应该返回订单 1，因为在 CODE_2 之后没有 S04 和 S05，请注意订单 1 在历史记录中有 S04，但之后它有代码 S02。由于代码 S03，它还应该返回订单 3。订单 2 不应该被退回，因为他历史上的最后一个代码是 S05（最后一个来自 S 组）。

我可以在不加入其他表的情况下执行此操作吗？我只想从此表中选择 ORDER_ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:51:19.427

如果`CHANGE_DATE`实际上是允许对行进行排序的列，则以下内容就足够了：

```
declare @T table (ORDER_ID int,CHANGE_DATE datetime,CODE_1 char(2),CODE_2 char(3),CODE_3 char(3))
insert into @T(ORDER_ID,CHANGE_DATE,CODE_1,CODE_2,CODE_3) values
(1,'2012-09-01T12:20:00','Z1',NULL,NULL),
(1,'2012-09-01T12:21:00','Z2','S01',NULL),
(1,'2012-09-01T12:22:00','Z2','S04',NULL),
(2,'2012-09-01T12:20:00','Z1','S01',NULL),
(3,'2012-09-01T12:21:00','Z1','S03',NULL),
(1,'2012-09-01T12:24:00','Z1','S02',NULL),
(2,'2012-09-01T12:29:00','Z1','S05',NULL),
(1,'2012-09-01T13:23:00','Z5','T01','X01'),
(2,'2012-09-01T13:31:00','Z1','T01',NULL)

select distinct ORDER_ID from @T t where CODE_2 in ('S01','S02','S03')
and not exists(
    select * from @T t2 where
        t.ORDER_ID = t2.ORDER_ID and
        t2.CODE_2 in ('S04','S05') and
        t2.CHANGE_DATE > t.CHANGE_DATE
    ) 
```

# fdt - 如何在不挂 ANT 的情况下运行 IDB.exe -forward

> ID：12801314
> 
> 赞同：1
> 
> 时间：2012-10-09T13:35:22.947
> 
> 标签：fdt

我已经按照[本教程](http://fdt.powerflasher.com/2012/06/7602/)了解如何使用 USB 进行调试。

有一个小问题，当我运行目标以转发 USB 端口时，它会挂起 FDT JRE，因为这个任务永远不会结束。这里是任务

```
<target name="04\. forward ports for USB debug">
    <exec executable="${FDTProjectSdkPath}/lib/aot/idb/idb" >
        <arg value="-forward" />

        <!-- LOCAL_PORT -->
        <arg value="7936" />

        <!-- REMOTE_PORT -->
        <arg value="12345" />

        <!-- DEVICE_HANDLE -->
        <arg value="1" />
    </exec>
</target> 
```

我设法通过在命令行窗口中运行这个转发命令来完成这项工作。

有没有人遇到过这种问题？我需要能够在不挂起 JRE 的情况下运行此转发命令。

在此先感谢您的帮助:)

# dns - 配置 DNS 以使子域解析到特定 IP 地址

> ID：12801316
> 
> 赞同：2
> 
> 时间：2012-10-09T13:35:30.663
> 
> 标签：dns, a-records

我试图将我公司的一个子域直接指向我的服务器的 IP 地址。我`A`在我的 DNS 中创建了一条记录，并告诉它指向 IP 地址，如下所示：

```
Name: access.grupomudde.com.br
TTL: 14400
Class: IN
Type: A
Registry: 0.0.0.0 (my ip) 
```

但是，当我尝试 ping 时`access.grupomudde.com.br`，它无法解析为我的 IP 地址。相反，它会访问托管公司的 IP 地址。

我错过了什么？

* * *

**更新**：正如下面的答案所述 - 我所做的是正确的，只是需要时间来传播。我给了它一点时间，现在一切都正确解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:50:18.943

假设您正确设置它 - 看起来就像您所做的那样，只需确保它实际保存并生效。有时某些提供商需要 24 小时才能将控制面板中所做的更改实施到实际区域文件中。除此之外，可能还有两件事会阻止它通过。

*   14400 秒 TTL
*   DNS缓存

14400 TTL 需要在名称服务器开始传播记录之前过期。这是因为我确定您的托管服务提供商有一个指向主 IP 的 *.grupomudde.com.br。否则，您只会收到一条无法解析 access.grupomudde.com.br 的消息，而不是指向主 IP。

在 DNS 缓存上，您自己的计算机除了缓存任何中间名称服务器之外，还缓存它获得的 DNS 解析。在 Windows 上使用`ipconfig /flushdns`清除它。如果您在 Linux 或 Mac 机器上，您可以通过使用`dig`直接检查名称服务器来直接检查它是否通过。利用`dig @200.98.246.51 access.grupomudde.com.br`

# asp.net - Oracle.DataAccess TNS：无法解析指定的连接标识符

> ID：12801318
> 
> 赞同：0
> 
> 时间：2012-10-09T13:35:37.410
> 
> 标签：asp.net, oracle10g, oracle11g

我有一台安装了两个版本的 Oracle 的开发 PC，即 10g 和 11g。

我有一个 Web 应用程序（带有 Visual Basic 的 ASP.NET）。当我将 Web 应用程序部署到 IIS7（安装在我的本地 PC 上）时，两个版本都可以工作。但是，当我尝试在 Visual Studio 中使用它们时，我收到一个错误：“TNS：无法解析指定的连接标识符”。当我使用 MSDOS 对数据源进行 TNSPING 时，我得到了回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:48:30.380

可能是本地和 IIS 中尝试使用不同的驱动程序。您能否检查一下您的 TNSNames.ora 文件是否包含在 10G 和 11g 安装路径中？

# objective-c - 需要协助在没有控件的窗口中播放循环视频

> ID：12801321
> 
> 赞同：0
> 
> 时间：2012-10-09T13:35:48.273
> 
> 标签：objective-c, xcode, ipad, video

我已经能够全屏播放视频，但是当我尝试在一个窗口中（在 iPad 上）播放它时，视频控件只会显示它一直在加载。

我想要做的是在调用 viewDidLoad 后立即自动播放和循环播放视频。

到目前为止，这是我的代码..

```
NSString *url = [[NSBundle mainBundle]
                 pathForResource:@"Test"
                 ofType:@"mp4"];

MPMoviePlayerViewController *player =
[[MPMoviePlayerViewController alloc]
 initWithContentURL:[NSURL fileURLWithPath:url]];

[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];

player.view.frame = CGRectMake(500, 400, 200, 200);
[self.view addSubview:player.view];

//---play movie---

[player.moviePlayer play];
player = nil; 
```

任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:32:17.587

如果您将 player.play 语句放入 viewWillAppear，我发现这是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:54:46.993

不确定您是否仍在寻找解决方案，但这对我有用：

创建一个`UIView`用作视频容器的容器，并为其提供您想要的视频大小。即使您将设置视图的框架，似乎您仍然需要设置`movieplayer`' 框架。

然后你只需要在你的播放器上添加一些额外的修饰符。

```
UIView *movieView = [[UIView alloc] initWithFrame:CGRectMake(500, 400, 200, 200)];

player.view.frame = CGRectMake(0, 0, 253, 175);
player.moviePlayer.shouldAutoplay = YES;
player.moviePlayer.controlStyle = MPMovieControlStyleEmbedded;

[self.view addSubview:movieView];

[movieView addSubview:mpviewController.view]; 
```

如果不设置控件，`MPMovieControlStyleEmbedded`控件将显示巨大。比 200 x 200 的实际视频大。`MPMovieControlStyleHidden`也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-14T17:54:58.143

我制作了一个 UIView 子类，它正是这样做的。在这里查看：http: [//github.com/liaujianjie/VideoLoopView](http://github.com/liaujianjie/VideoLoopView)

**代码：**

```
self.videoView.videoUrl = [[NSBundle mainBundle] URLForResource:@"samplevideo.mov" withExtension:nil]; 
```

# php - magento - 自定义属性未显示

> ID：12801326
> 
> 赞同：0
> 
> 时间：2012-10-09T13:35:58.220
> 
> 标签：php, magento

我正在尝试在 magento 上为我的产品实现分层导航，因此我声明了一个自定义属性（类型为 'Dropdown'，范围为 'Global' 并配置为用于分层导航）。

我保存了一个带有“测试”属性组的属性集，以及里面的自定义属性。

然后，当我使用保存的属性集创建可自定义的产品时，magento 显示带有复选框的属性列表，以选择要激活的自定义属性，但是在产品创建屏幕中，“测试”选项卡没有显示，自定义属性。

如果将经典属性放在“测试”选项卡中，则该选项卡正在显示，但没有自定义属性。

我正在运行 magento 1.7.0.2 社区版。

# google-analytics - 如何使用 ZendGData Analytics 获取所有配置文件 ID？

> ID：12801328
> 
> 赞同：1
> 
> 时间：2012-10-09T13:36:01.467
> 
> 标签：google-analytics, zend-framework2, zend-gdata

我正在为 ZF2 使用 ZendGData 库。

我试图获取帐户的数据，但没有关于配置文件的数据。

```
$email = $this->config['email'];
$password = $this->config['password'];

$service = \ZendGData\Analytics::AUTH_SERVICE_NAME;
$client = \ZendGData\ClientLogin::getHttpClient($email, $password, $service);
$analytics = new \ZendGData\Analytics($client);

print_r($analytics->getAccountFeed()); 
```

如何获取我的帐户的个人资料（或个人资料 ID）列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:36:29.467

我找到了解决方案：

```
$email = $this->config['email'];
$password = $this->config['password'];

$service = \ZendGData\Analytics::AUTH_SERVICE_NAME;
$client = \ZendGData\ClientLogin::getHttpClient($email, $password, $service);
$analytics = new \ZendGData\Analytics($client);

$profileResult = $analytics->getDataFeed($analytics->newAccountQuery()->profiles());

$profileIds = array();
/**
 * @var \ZendGData\Analytics\DataEntry $dataBit
 */
 foreach ($profileResult as $dataBit) {
     /**
       * @var \ZendGData\App\Extension\Element $element
       */
     foreach ($dataBit->getExtensionElements() as $element) {
         $attributes = $element->getExtensionAttributes();
         if ($attributes['name']['value']=='ga:profileId') {
             $profileIds[] = $attributes['value']['value'];
         }
    }
} 
```

# asp.net - 如何在 ASP.NET 中的 RadGrid 回发上停止触发 onbeforeunload 函数

> ID：12801334
> 
> 赞同：1
> 
> 时间：2012-10-09T13:36:37.073
> 
> 标签：asp.net, asp.net-ajax, dom-events, radgrid, onbeforeunload

场景：我`onbeforeunload`在 .aspx 页面上有功能，用于在离开当前页面（ASP.NET 应用程序）之前显示一条消息。这个页面非常复杂，回传发生了很多次，例如我有多个按钮、Rad Grid、Rad Window PopUps 等。

因此，所有按钮`onbeforeunload`在被单击时都会调用，并且消息框会被不必要地调用。为了防止`onbeforeunload`消息显示，我只是`cancelEvent`在按钮`OnClientClick`事件上调用另一个函数，而我只是调用 null。通过这样做，所有按钮回发都得到处理，但我使用的 RadGrid 具有按钮列（删除），每当从网格中删除一行时，它都会刷新最终调用的网格`onbeforeunload`。

`onbeforeunload`谁能告诉我当我从 RadGrid 中删除任何内容时如何防止。以下是我正在使用的代码片段，并且在按钮上工作正常，但我需要网格删除列的帮助可能是一些事件，如按钮的`OnClientClick`事件，我可以用它来调用我的`cancelEvent`.

```
window.onbeforeunload = confirmExit;
function confirmExit() {
            window.event.returnValue = 'If you navigate away from this page any unsaved changes will be lost!';
}

function cancelEvent(event) {
            window[event] = function () {null}
}

<asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" CssClass="ActionButtons"
            ValidationGroup="vsDataEntry" OnClientClick="return cancelEvent('onbeforeunload')"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:53:25.090

尝试做类似下面的事情

```
<div onclick="return cancelEvent('onbeforeunload')">
    <telerik:RadGrid runat="server">
    </telerik:RadGrid>
</div> 
```

**解释**

当点击事件被触发时，它会在 DOM 中的所有元素中冒泡。我们将 Radgrid 包装在一个 div 内，每当在该 div 内发生任何点击时，我们都会删除 onbeforeunload。

# c# - 如何从服务参考中获取 HTTP 答案

> ID：12801336
> 
> 赞同：0
> 
> 时间：2012-10-09T13:36:38.350
> 
> 标签：c#, wcf, web-services, soap

编辑：对不起我的英语，这不是我的外语......

我在 Visual Studio 中使用服务引用来与 Web 服务进行讨论。为此，我集成了 Web 服务所有者提供给我的 WSDL。

但我认为 WSDL 一定是错误的，因为我看到了对象，我看到了方法，我可以调用它们，但答案总是“空”。

但是当我使用 HTTP 嗅探器 (Fiddler) 时，我会在 HTTP 数据包中看到 SOAP 答案。所以，如果我必须正确解释这个问题，似乎传输层和软件层之间的管道被打破了。

所以我正在寻找一种方法来直接从 web 服务实例中检索 HTTP 答案。我不知道是否需要创建自定义绑定或使用侦听器。

如果有人有小费请;）

提前致谢，

巴蒂斯特

# android - AnimationDrawable 用于具有各种大小的可绘制对象的动画列表？

> ID：12801346
> 
> 赞同：0
> 
> 时间：2012-10-09T13:37:07.207
> 
> 标签：android, android-animation

我有一个动画列表，其中包含（略微）不同大小的图像。我有一个`ImageView`with`layout_width`和`layout_height`set as `wrap_content`。我将动画列表设置为我的内容`ImageView`并按如下方式启动动画：

```
AnimationDrawable my_animation_list = (AnimationDrawable)getResources().getDrawable(
    R.drawable.my_animation_list);

myImageView.setImageDrawable(my_animation_list)
((AnimationDrawable)myImageView.getDrawable()).start(); 
```

我需要并且希望`ImageView`使用动画列表中的每个帧/图像调整其高度和宽度。相反，它看起来像`ImageView`获取动画列表中第一帧的高度和宽度，然后缩放动画列表中的所有帧以适应这个初始高度和宽度。任何人都知道我怎样才能得到一个`AnimationDrawable`由各种大小的图像组成的（动画列表）来使用`ImageView`，或者甚至是一个变通方法？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:58:12.223

我最终所做的就是像以前一样`AnimationDrawable`从我创建我的`animation-list`，如下......

```
// declaration in activity
private AnimationDrawable my_animation_list;

// load animation list in onCreate() method of activity or elsewhere
my_animation_list = (AnimationDrawable)getResources().getDrawable(
    R.drawable.my_animation_list); 
```

...但是，我现在做的是手动将动画列表中的帧分配给 my ，而不是将其分配`AnimationDrawable`给 my`ImageView`然后启动它`ImageView`，如下所示...

```
myImageView.setImageDrawable(my_animation_list.getFrame(myCurrentFrameIndex));
myCurrentFrameIndex++; 
```

...并且我使用`Handler`发送/接收/处理连续`Message`实例来更新显示的帧，确定每个帧的持续时间如下：

```
my_animation_list.getDuration(myCurrentFrameIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:44:12.977

这样做不是最有趣的，但您可以将位图包装在[InsetDrawables](http://developer.android.com/reference/android/graphics/drawable/InsetDrawable.html)中以使它们具有相同的大小。自己修复位图可能更容易。我没有看过AnimationDrawable的代码，所以可能有更好的方法......

# javascript - 如何在 jquery 插件中使用悬停事件？

> ID：12801349
> 
> 赞同：2
> 
> 时间：2012-10-09T13:37:14.187
> 
> 标签：javascript, jquery, jquery-plugins, jquery-hover

我正在制作一个简单的星级插件。但是我`hover`在这个插件中放置事件时遇到问题。

jQuery,

```
(function($){

    $.fn.extend({ 

        rater: function(options) {

            var defaults = {
            }

            var options =  $.extend(defaults, options);
            var o = options;

            var $this = this;

            $this.set_votes = function(object)
            {
                $(".replacement-radio",object).each(function(){

                    // Set variables.
                    var object = $(this);
                    var object_checked = object.attr('checked');

                    // Check if the object is checked.
                    if(object_checked === 'checked')
                    {
                        // Change stars.
                        $(this).next().prevAll('.button-star').andSelf().addClass('button-star-hover');
                        $(this).next().nextAll('.button-star').removeClass('button-star-hover'); 
                    }

                });

            }

            $('.button-star').hover(  
                // Handles the mouseover. 
                function() {  
                    $(this).prevAll('.button-star').andSelf().addClass('button-star-hover');  
                    $(this).nextAll('.button-star').removeClass('button-star-hover');  
                },  
                // Handles the mouseout . 
                function() {  
                    $(this).prevAll('.button-star').andSelf().removeClass('button-star-hover');  
                    $this.set_votes($(this).parent());
                }  
            ); 

            // You must call return after declaring the functions.
            return this.each(function() {

                // Set the object.
                var object = $(this);
                //alert(object.html());

                // Check if the object is present.
                if(object.length > 0)
                {
                    // Hide the object and add the star after it.
                    object.hide();
                    object.after('<span class="button-star"></span>');

                    // Attached click event to the button which created after the object.
                    $('.button-star').click(function(){

                        // Set the value into the radio button.
                        var $this_check = $(this).prev().attr('checked', true);
                        var $this_value = $(this).prev().val();

                    });    
                }

            });

        }
    });

})(jQuery);​ 
```

我不确定如何`hover`在插件中调用/使用事件。因此，下面的悬停事件在我的星级插件中不起作用，

```
$('.button-star').hover(  
    // Handles the mouseover. 
    function() {  
        $(this).prevAll('.button-star').andSelf().addClass('button-star-hover');  
        $(this).nextAll('.button-star').removeClass('button-star-hover');  
    },  
    // Handles the mouseout . 
    function() {  
        $(this).prevAll('.button-star').andSelf().removeClass('button-star-hover');  
        $this.set_votes($(this).parent());
    }  
); 
```

这是 jsfiddle[链接](http://jsfiddle.net/RgBqh/3/)。

知道我应该如何使它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:03:55.440

这是我的做法：

```
$(document).ready(function() {
    $(".replacement-radio").rater().binds();
});

(function($) {
    $.fn.extend({
        rater: function(options) {
            var $this = this,
                defaults = {}, 
                options = $.extend(defaults, options);

            $this.set_votes = function(object) {
                $(".replacement-radio", object).each(function(i,elm) {
                    if ($(elm).prop('checked')) {
                        $(elm).next().prevAll('.button-star').andSelf().addClass('button-star-hover');
                        $(elm).next().nextAll('.button-star').removeClass('button-star-hover');
                    }
                });
            }

            return this.each(function(i,elem) {
                if ($(elem).length) {
                    $(elem).hide().after('<span class="button-star"></span>');
                    $('.button-star').on('click', function() {
                        var $this_check = $(this).prev().prop('checked', true),
                            $this_value = $(this).prev().val();
                    });
                }
            });
        },
        binds: function() {
            $('.button-star').on({
                mouseenter: function() {
                    $(this).prevAll('.button-star').andSelf().addClass('button-star-hover');
                    $(this).nextAll('.button-star').removeClass('button-star-hover');
                },
                mouseleave: function() {
                    $(this).prevAll('.button-star').andSelf().removeClass('button-star-hover');
                    $this.set_votes($(this).parent());
                }
            });
        }
    });
})(jQuery);​ 
```

[**小提琴**](http://jsfiddle.net/RgBqh/14/)

您似乎使用了很多不必要的变量，变量名称相同，即使它们在不同的范围内，在同一个主函数中也会令人困惑。也`prop()`将是正确的方法`checked`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:52:14.193

我认为你需要等到所有评估代码都被执行并且类“button-star”是动态添加的，如果你在该函数中运行处理程序代码，那么类还不存在，所以没有什么可以挂钩处理程序。

***题外话***：如果您的应用程序开始变得更大，可以看看 Backbone.js 或 Knockout.js，它们可以帮助您的代码更加面向对象且易于维护。

这是代码

```
$(document).ready(function(){
    $(".replacement-radio").rater();
    $(".replacement-radio").AttachHandlers();
});

(function($){

    $.fn.extend({ 

        rater: function(options) {

            var defaults = {
            }

            var options =  $.extend(defaults, options);
            var o = options;

            var $this = this;

            $this.set_votes = function(object)
            {
                $(".replacement-radio",object).each(function(){

                    // Set variables.
                    var object = $(this);
                    var object_checked = object.attr('checked');

                    // Check if the object is checked.
                    if(object_checked === 'checked')
                    {
                        // Change stars.
                        $(this).next().prevAll('.button-star').andSelf().addClass('button-star-hover');
                        $(this).next().nextAll('.button-star').removeClass('button-star-hover'); 
                    }

                });

            }        

            // You must call return after declaring the functions.
            return this.each(function() {

                // Set the object.
                var object = $(this);
                //alert(object.html());

                // Check if the object is present.
                if(object.length > 0)
                {
                    // Hide the object and add the star after it.
                    object.hide();
                    object.after('<span class="button-star"></span>');

                    // Attached click event to the button which created after the object.
                    $('.button-star').click(function(){

                        // Set the value into the radio button.
                        var $this_check = $(this).prev().attr('checked', true);
                        var $this_value = $(this).prev().val();

                    });    
                }

            });

        },
        AttachHandlers: function(){
            $('.button-star').hover(  
            // Handles the mouseover. 
            function() {  
                    $(this).prevAll('.button-star').andSelf().addClass('button-star-hover');  
                    $(this).nextAll('.button-star').removeClass('button-star-hover');  
                },  
                // Handles the mouseout . 
                function() {    
                    $(this).prevAll('.button-star').andSelf().removeClass('button-star-hover');  
                    $this.set_votes($(this).parent());
                }   
            ); 
        }
    });

})(jQuery);​ 
```

像这样将其作为单独的功能进行。

[http://jsfiddle.net/RgBqh/9/](http://jsfiddle.net/RgBqh/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:56:18.280

您将悬停事件附加到不存在的元素 - 您`button-star`在底部的 return 语句中创建跨度。

如果您将事件处理程序更改为通过 使用事件委托`on()`，它可以正常工作：

```
$(document).on('mouseenter', '.button-star', function() {
    $(this).prevAll('.button-star').andSelf().addClass('button-star-hover');  
    $(this).nextAll('.button-star').removeClass('button-star-hover');  
})
.on('mouseleave', '.button-star', function() {
    $(this).prevAll('.button-star').andSelf().removeClass('button-star-hover');  
    $this.set_votes($(this).parent());
}); 
```

[http://jsfiddle.net/jbabey/RgBqh/11/](http://jsfiddle.net/jbabey/RgBqh/11/)

# c# - 当 Gridview 列被隐藏并单击更新按钮时，它会尝试为该隐藏字段插入空值

> ID：12801353
> 
> 赞同：0
> 
> 时间：2012-10-09T13:37:22.440
> 
> 标签：c#, asp.net, gridview, sqldatasource

问题类似于此处所示：[http ://forums.asp.net/t/945656.aspx/1](http://forums.asp.net/t/945656.aspx/1)

我有一个带有更新按钮的 gridview 来更新行。

隐藏列时，它会尝试将空值插入数据库并使用空值更新当前数据。我不希望这样，我想保持当前数据不变。

下面是我的sqldatasource

```
<asp:SqlDataSource ID="sds_OrderDetail" runat="server" ConnectionString="<%$ ConnectionStrings:MyDbConn %>"

    DeleteCommand="DELETE FROM [OrderDetail] WHERE [RowNo] = @RowNo" InsertCommand="INSERT INTO [OrderDetail] ([Id], [PONumber], [MaterialCode], [MaterialDescription], [MaterialCategory], [UnitOfMeasure], [Quantity], [ContainerId], [LoadingDate], [CutOffDate], [TransporterName], [BookingNo]) VALUES (@Id, @PONumber, @MaterialCode, @MaterialDescription, @MaterialCategory, @UnitOfMeasure, @Quantity, @ContainerId, @LoadingDate, @CutOffDate, @TransporterName, @BookingNo)"

    SelectCommand="SELECT * FROM [OrderDetail] WHERE ([Id] = @Id)" UpdateCommand="UPDATE [OrderDetail] SET [Id] = @Id, [PONumber] = @PONumber, [MaterialCode] = @MaterialCode, [MaterialDescription] = @MaterialDescription, [MaterialCategory] = @MaterialCategory, [UnitOfMeasure] = @UnitOfMeasure, [Quantity] = @Quantity, [ContainerId] = @ContainerId, [LoadingDate] = @LoadingDate, [CutOffDate] = @CutOffDate, [TransporterName] = @TransporterName, [BookingNo] = @BookingNo WHERE [RowNo] = @RowNo"

    OnSelected="sds_OrderDetail_Selected">

    <DeleteParameters>

        <asp:Parameter Name="RowNo" Type="Int32" />

    </DeleteParameters>

    <InsertParameters>

        <asp:SessionParameter DefaultValue="-1" Name="Id" SessionField="Id" Type="Int32" />

        <asp:Parameter Name="PONumber" Type="String" />

        <asp:Parameter Name="MaterialCode" Type="String" />

        <asp:Parameter Name="MaterialDescription" Type="String" />

        <asp:Parameter Name="MaterialCategory" Type="String" />

        <asp:Parameter Name="UnitOfMeasure" Type="String" />

        <asp:Parameter Name="Quantity" Type="String" />

        <asp:Parameter Name="ContainerId" Type="String" />

        <asp:Parameter Name="LoadingDate" Type="String" />

        <asp:Parameter Name="CutOffDate" Type="String" />

        <asp:Parameter Name="TransporterName" Type="String" />

        <asp:Parameter Name="BookingNo" Type="String" />

    </InsertParameters>

    <SelectParameters>

        <asp:SessionParameter DefaultValue="-1" Name="Id" SessionField="Id" Type="Int32" />

    </SelectParameters>

    <UpdateParameters>

        <asp:SessionParameter DefaultValue="-1" Name="Id" SessionField="Id" Type="Int32" />

        <asp:Parameter Name="PONumber" Type="String" />

        <asp:Parameter Name="MaterialCode" Type="String" />

        <asp:Parameter Name="MaterialDescription" Type="String" />

        <asp:Parameter Name="MaterialCategory" Type="String" />

        <asp:Parameter Name="UnitOfMeasure" Type="String" />

        <asp:Parameter Name="Quantity" Type="String" />

        <asp:Parameter Name="ContainerId" Type="String" />

        <asp:Parameter Name="LoadingDate" Type="String" />

        <asp:Parameter Name="CutOffDate" Type="String"  />

        <asp:Parameter Name="TransporterName" Type="String" />

        <asp:Parameter Name="BookingNo" Type="String" />

        <asp:Parameter Name="RowNo" Type="Int32" />

    </UpdateParameters>

</asp:SqlDataSource> 
```

下面是我的 GridView

```
<cc1:BulkEditGridView ID="begv_OrderDetail" runat="server" AutoGenerateColumns="False"
    DataKeyNames="RowNo" DataSourceID="sds_OrderDetail" SaveButtonID="btn_SaveAll"
    BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px"
    CellPadding="3" OnRowCommand="begv_OrderDetail_RowCommand" OnRowUpdated="begv_OrderDetail_RowUpdated"
    OnRowDeleted="begv_OrderDetail_RowDeleted" OnRowCreated="begv_OrderDetail_RowCreated">
    <Columns>
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="lbt_Update" runat="server" CausesValidation="false" CommandName="Update"
                    Text="Kaydet"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="lbt_Copy" runat="server" CausesValidation="false" CommandName="Copy"
                    CommandArgument='<%# Container.DataItemIndex %>' Text="Kopyala" Visible='<%# (Roles.IsUserInRole("Planlamacı") && Session["Status"].ToString()=="1")||(Roles.IsUserInRole("Depocu") && Session["Status"].ToString()=="2") %>'></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="lbt_Delete" runat="server" CausesValidation="false" CommandName="Delete"
                    Text="Sil" Visible='<%# (Roles.IsUserInRole("Planlamacı") && Session["Status"].ToString()=="1")||(Roles.IsUserInRole("Depocu") && Session["Status"].ToString()=="2") %>'></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Id" HeaderText="Id" SortExpression="Id" ReadOnly="true" />
        <asp:TemplateField HeaderText="PONumber" SortExpression="PONumber">
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("PONumber") %>' Enabled="false"
                    Width="94%"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="MaterialCode" SortExpression="MaterialCode">
            <EditItemTemplate>
                <asp:DropDownList ID="ddl_MaterialCode" runat="server" DataSourceID="sds_MaterialCodes"
                    DataTextField="MaterialCode" DataValueField="MaterialCode" SelectedValue='<%# Bind("MaterialCode") %>'
                    OnSelectedIndexChanged="ddl_MaterialCode_SelectedIndexChanged" Width="100%" AppendDataBoundItems="true"
                    Enabled='<%# (Roles.IsUserInRole("Planlamacı") && Session["Status"].ToString()=="1")||(Roles.IsUserInRole("Depocu") && Session["Status"].ToString()=="2") %>'>
                    <asp:ListItem Text="" Value=""></asp:ListItem>
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="MaterialDescription" SortExpression="MaterialDescription">
            <EditItemTemplate>
                <asp:TextBox ID="txt_MaterialDescription" runat="server" Text='<%# Bind("MaterialDescription") %>'
                    Enabled="false"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="MaterialCategory" SortExpression="MaterialCategory">
            <EditItemTemplate>
                <asp:TextBox ID="txt_MaterialCategory" runat="server" Text='<%# Bind("MaterialCategory") %>'
                    Enabled="false" Width="94%"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="UnitOfMeasure" SortExpression="UnitOfMeasure">
            <EditItemTemplate>
                <asp:DropDownList ID="ddl_UnitOfMeasure" runat="server" DataSourceID="sds_UnitOfMeasure"
                    DataTextField="UnitOfMeasure" DataValueField="UnitOfMeasure" SelectedValue='<%# Bind("UnitOfMeasure") %>'
                    Width="94%" Enabled='<%# (Roles.IsUserInRole("Planlamacı") && Session["Status"].ToString()=="1")||(Roles.IsUserInRole("Depocu") && Session["Status"].ToString()=="2") %>'>
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Quantity" SortExpression="Quantity">
            <EditItemTemplate>
                <asp:TextBox ID="txt_Quantity" runat="server" Text='<%# Bind("Quantity") %>' Width="94%"
                    Enabled='<%# (Roles.IsUserInRole("Planlamacı") && Session["Status"].ToString()=="1")||(Roles.IsUserInRole("Depocu") && Session["Status"].ToString()=="2") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="ContainerId" SortExpression="ContainerId">
            <EditItemTemplate>
                <asp:DropDownList ID="ddl_ContainerId" runat="server" DataSourceID="sds_Containers"
                    DataTextField="ContainerId" DataValueField="ContainerId" SelectedValue='<%# Bind("ContainerId") %>'
                    Enabled='<%# Roles.IsUserInRole("Depocu") && Session["Status"].ToString()=="2" %>'
                    Width="100%" AppendDataBoundItems="true">
                    <asp:ListItem Text="" Value=""></asp:ListItem>
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="FileNo" SortExpression="FileNo">
            <EditItemTemplate>
                <asp:TextBox ID="txt_FileNo" runat="server" Text='<%# Bind("FileNo") %>' Enabled="false"
                    Width="90%"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="LoadingDate" SortExpression="LoadingDate">
            <EditItemTemplate>
                <asp:TextBox ID="txt_LoadingDate" runat="server" Text='<%# Bind("LoadingDate", "{0:yyyy-MM-dd}") %>'
                    Enabled='<%# Roles.IsUserInRole("İhracat Uzmanı") && Session["Status"].ToString()=="3" %>'
                    Width="94%"></asp:TextBox>
                <asp:CalendarExtender ID="ce_LoadingDate" runat="server" TargetControlID="txt_LoadingDate"
                    Format="yyyy-MM-dd">
                </asp:CalendarExtender>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="CutOffDate" SortExpression="CutOffDate">
            <EditItemTemplate>
                <asp:TextBox ID="txt_CutOffDate" runat="server" Text='<%# Bind("CutOffDate", "{0:yyyy-MM-dd}") %>'
                    Enabled='<%# Roles.IsUserInRole("İhracat Uzmanı") && Session["Status"].ToString()=="3" %>'
                    Width="94%"></asp:TextBox>
                <asp:CalendarExtender ID="ce_CutOffDate" runat="server" TargetControlID="txt_CutOffDate"
                    Format="yyyy-MM-dd">
                </asp:CalendarExtender>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="TransporterName" SortExpression="TransporterName">
            <EditItemTemplate>
                <asp:DropDownList ID="ddl_Transporters" runat="server" DataSourceID="sds_Transporters"
                    DataTextField="TransporterName" DataValueField="TransporterName" SelectedValue='<%# Bind("TransporterName") %>'
                    Width="94%" AppendDataBoundItems="true" Enabled='<%# (Roles.IsUserInRole("Planlamacı") && Session["Status"].ToString()=="1")||(Roles.IsUserInRole("Depocu") && Session["Status"].ToString()=="2") %>'>
                    <asp:ListItem Text="" Value=""></asp:ListItem>
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="BookingNo" SortExpression="BookingNo">
            <EditItemTemplate>
                <asp:TextBox ID="txt_BookingNo" runat="server" Text='<%# Bind("BookingNo") %>' Enabled="false"
                    Width="94%"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="ContainerNo" SortExpression="ContainerNo">
            <EditItemTemplate>
                <asp:TextBox ID="txt_ContainerNo" runat="server" Text='<%# Bind("ContainerNo") %>'
                    Enabled="false" Width="94%"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="ReasonCode" SortExpression="ReasonCode">
            <EditItemTemplate>
                <asp:TextBox ID="txt_ReasonCode" runat="server" Text='<%# Bind("ReasonCode") %>'
                    Enabled="false" Width="94%"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Comment" SortExpression="Comment">
            <EditItemTemplate>
                <asp:TextBox ID="txt_Comment" runat="server" Text='<%# Bind("Comment") %>' Enabled="false"
                    Width="94%"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
    </Columns>
    <FooterStyle BackColor="White" ForeColor="#000066" />
    <HeaderStyle BackColor="#006699" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
    <RowStyle ForeColor="#000066" />
    <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
    <SortedAscendingCellStyle BackColor="#F1F1F1" />
    <SortedAscendingHeaderStyle BackColor="#007DBB" />
    <SortedDescendingCellStyle BackColor="#CAC9C9" />
    <SortedDescendingHeaderStyle BackColor="#00547E" />
</cc1:BulkEditGridView> 
```

我使用下面的解决方案来隐藏一列

[https://stackoverflow.com/a/4954976/1235655](https://stackoverflow.com/a/4954976/1235655)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:09:32.370

将隐藏列值添加为 datakeyname 可以解决此问题。

目前是

```
DataKeyNames="RowNo" 
```

将其更改为

```
DataKeyNames="RowNo,CutOffDate" 
```

解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T10:51:21.730

我过去曾通过对 UpdateCommand 中的每个隐藏列使用 IsNull() 解决了这个问题

例如

`ISNULL(@PONumber,PONumber)`如果PONumber是隐藏列，请使用`@PONumber`

```
UpdateCommand="UPDATE [OrderDetail] SET [Id] = @Id, [PONumber] = @PONumber, [MaterialCode] = @MaterialCode, [MaterialDescription] = @MaterialDescription, [MaterialCategory] = @MaterialCategory, [UnitOfMeasure] = @UnitOfMeasure, [Quantity] = @Quantity, [ContainerId] = @ContainerId, [LoadingDate] = @LoadingDate, [CutOffDate] = @CutOffDate, [TransporterName] = @TransporterName, [BookingNo] = @BookingNo WHERE [RowNo] = @RowNo" 
```

PS，隐藏列值在更新时为 NULL 的原因是因为隐藏列意味着它不在 DOM 中或呈现。

另一种方法是使用 CSS 类或样式（显示：无），以便仍然生成列，但请注意您可能在 HTML 中发送敏感信息。

# python - 在 windows 中添加十秒的创建时间

> ID：12801362
> 
> 赞同：1
> 
> 时间：2012-10-09T13:37:44.590
> 
> 标签：python

我正在尝试编写一个脚本，通过将文件的创建时间增加 10 秒来更改文件的创建时间。我在 Windows 7 上测试它，但也想在 XP 中运行它。我尝试遵循[如何从 Python 更改 Windows 文件的文件创建日期？](https://stackoverflow.com/questions/4996405/how-do-i-change-the-file-creation-date-of-a-windows-file-from-python)使用以下代码：

```
import os
import pywintypes, win32file, win32con
def changeFileCreationTime(fname, newtime):
    wintime = pywintypes.Time(newtime)
    winfile = win32file.CreateFile(
        fname, win32con.GENERIC_WRITE,
        win32con.FILE_SHARE_READ | win32con.FILE_SHARE_WRITE | win32con.FILE_SHARE_DELETE,
        None, win32con.OPEN_EXISTING,
        win32con.FILE_ATTRIBUTE_NORMAL, None)

    win32file.SetFileTime(winfile, wintime, None, None)

    winfile.close()

for (path, dirs, files) in os.walk('C:/Personal/fc/Images/Corvette'):
    for file in files:
        print(os.path.join(path, file))
        print(os.stat(os.path.join(path, file)))
        changeFileCreationTime(os.path.join(path, file),os.stat(os.path.join(path, file)).st_ctime+10)
        print(os.stat(os.path.join(path, file))) 
```

但我得到了错误：

```
Traceback (most recent call last):
  File "C:\Python31\Lib\site-packages\pythonwin\pywin\framework\scriptutils.py", line 326, in RunScript
   exec(codeObject, __main__.__dict__)
  File "C:\Users\hermamr1\Desktop\Script1.py", line 20, in <module>
   changeFileCreationTime(os.path.join(path, file),os.stat(os.path.join(path, file)).st_ctime+10)
  File "C:\Users\hermamr1\Desktop\Script1.py", line 11, in changeFileCreationTime
   win32file.SetFileTime(winfile, wintime, None, None)
ValueError: astimezone() cannot be applied to a naive datetime 
```

我正在 Python 3.1.3 上尝试这个，但如果需要，我可以使用 Python 2.7。我只需要在 Windows 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:12:02.533

似乎`astimezone()`在 python2.7 和 python3 中的实现略有不同。我试图在他们两个下运行你的代码，只有 python3 raises `ValueError`。所以，我的解决方案是切换到python2。
Upd.：我不是唯一一个认为这些实现不同的人，你可以看看[下面的对话](http://sourceforge.net/tracker/index.php?func=detail&aid=3438213&group_id=78018&atid=551954)（底部的第二个帖子）。

# xml - Amazon XML API 返回的价格数量较少

> ID：12801364
> 
> 赞同：1
> 
> 时间：2012-10-09T13:37:53.320
> 
> 标签：xml, amazon

我正在实施产品广告 API（API 版本 2011-08-01） [Amazon ItemLookup 文档](http://docs.amazonwebservices.com/AWSECommerceService/2011-08-01/DG/ItemLookup.html)

我正在尝试获取亚马逊产品的所有价格。但它只给了我新旧条件的最佳价格。

我尝试了不同的选择。

我的参数是：

```
http://ecs.amazonaws.com/onca/xml?
AWSAccessKeyId=xxx&
AssociateTag=0000&
Condition=All&
IdType=ASIN&
ItemId=B005IVL0RS&
MerchantId=All&
Operation=ItemLookup&
ResponseGroup=OfferFull&
Service=AWSECommerceService&
SignatureMethod=HmacSHA256&
SignatureVersion=2&
Timestamp=2012-10-09T12%3A54%3A34.000Z&
Version=2011-08-01&
Signature=xxxxxxxxxxxxxxxxxxxxx 
```

以前的帖子建议我使用 MerchantId=All & ResponseGroup=Offers 我也尝试过，但我从来没有得到 138 个商家（只有 2 个 1NEW/1OLD）

[以前的stackoverflow答案是针对类似问题的](https://stackoverflow.com/questions/8304757/i-dont-get-prices-with-amazon-product-advertising-api)

我什至没有运气尝试过。我总是只有2个商人。

请帮忙。有什么我可能会忽略的吗？

# objective-c - 检测 UIButton 上的部分触摸

> ID：12801365
> 
> 赞同：0
> 
> 时间：2012-10-09T13:37:56.743
> 
> 标签：objective-c, cocoa-touch, uibutton, uicontrolevents

我创建了一个 UIButton 并通过以下方式检测触摸事件：

```
[myButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

当我完全按下按钮时，一切正常。
我的问题是，如果我用手指按在按钮上的部分和按在外面的部分 - 未检测到事件。
我应该使用另一个事件吗？
我在这里做错了吗？

我相信人们会说你必须准确地按下按钮，但我正在努力提供最佳的用户体验并解决这个问题。
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:45:21.793

您可能想放大按钮，在图像周围形成一个透明区域。

或者也许使用`UIControlEventTouchDown`/`UIControlEventTouchUpOutside`而不是`UIControlEventTouchUpInside`?

# php - 计算目录PHP中有多少文件

> ID：12801370
> 
> 赞同：126
> 
> 时间：2012-10-09T13:38:12.683
> 
> 标签：php, file, count, directory

我正在做一个稍微新的项目。我想知道某个目录中有多少文件。

```
<div id="header">
<?php 
    $dir = opendir('uploads/'); # This is the directory it will count from
    $i = 0; # Integer starts at 0 before counting

    # While false is not equal to the filedirectory
    while (false !== ($file = readdir($dir))) { 
        if (!in_array($file, array('.', '..') and !is_dir($file)) $i++;
    }

    echo "There were $i files"; # Prints out how many were in the directory
?>
</div> 
```

这就是我到目前为止（从搜索中得到的）。但是，它没有正确显示？我添加了一些注释，因此请随时删除它们，它们只是为了让我尽可能地理解它。

如果您需要更多信息或觉得我描述得不够充分，请随时说明。

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2012-10-09T14:01:21.843

您可以简单地执行以下操作：

```
$fi = new FilesystemIterator(__DIR__, FilesystemIterator::SKIP_DOTS);
printf("There were %d Files", iterator_count($fi)); 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-10-09T13:44:02.883

您可以像这样获取文件计数：

```
$directory = "/path/to/dir/";
$filecount = 0;
$files = glob($directory . "*");
if ($files){
 $filecount = count($files);
}
echo "There were $filecount files"; 
```

如果`"*"`您愿意，您可以将其更改为特定的文件类型，`"*.jpg"`或者您可以像这样执行多种文件类型：

```
glob($directory . "*.{jpg,png,gif}",GLOB_BRACE) 
```

该`GLOB_BRACE`标志扩展 {a,b,c} 以匹配“a”、“b”或“c”

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-10-09T13:41:41.720

试试这个。

```
// Directory
$directory = "/dir";

// Returns an array of files
$files = scandir($directory);

// Count the number of files and store them inside the variable..
// Removing 2 because we do not count '.' and '..'.
$num_files = count($files)-2); 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2012-10-09T13:42:05.957

你应该有 ：

```
<div id="header">
<?php 
    // integer starts at 0 before counting
    $i = 0; 
    $dir = 'uploads/';
    if ($handle = opendir($dir)) {
        while (($file = readdir($handle)) !== false){
            if (!in_array($file, array('.', '..')) && !is_dir($dir.$file)) 
                $i++;
        }
    }
    // prints out how many were in the directory
    echo "There were $i files";
?>
</div> 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2019-02-18T02:59:45.700

我认为的最佳答案：

```
$num = count(glob("/exact/path/to/files/" . "*"));
echo $num; 
```

*   这不算数。和 ..
*   它是一个班轮
*   我为此感到自豪

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-10-22T09:29:45.957

因为我也需要这个，所以我很好奇哪种方法最快。

我发现——如果你想要的只是文件数——Baba 的解决方案**比**其他解决方案快得多。我很惊讶。

自己试试吧：

```
<?php
define('MYDIR', '...');

foreach (array(1, 2, 3) as $i)
{
    $t = microtime(true);
    $count = run($i);
    echo "$i: $count (".(microtime(true) - $t)." s)\n";
}

function run ($n)
{
    $func = "countFiles$n";
    $x = 0;
    for ($f = 0; $f < 5000; $f++)
        $x = $func();
    return $x;
}

function countFiles1 ()
{
    $dir = opendir(MYDIR);
    $c = 0;
    while (($file = readdir($dir)) !== false)
        if (!in_array($file, array('.', '..')))
            $c++;
    closedir($dir);
    return $c;
}

function countFiles2 ()
{
    chdir(MYDIR);
    return count(glob("*"));
}

function countFiles3 () // Fastest method
{
    $f = new FilesystemIterator(MYDIR, FilesystemIterator::SKIP_DOTS);
    return iterator_count($f);
}
?> 
```

测试运行：（显然，`glob()`不计算点文件）

```
1: 99 (0.4815571308136 s)
2: 98 (0.96104407310486 s)
3: 99 (0.26513481140137 s) 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2012-10-09T13:46:17.430

工作演示

```
<?php

$directory = "../images/team/harry/"; // dir location
if (glob($directory . "*.*") != false)
{
 $filecount = count(glob($directory . "*.*"));
 echo $filecount;
}
else
{
 echo 0;
}

?> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-03-07T05:45:12.487

我用这个：

```
count(glob("yourdir/*",GLOB_BRACE)) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-04-09T21:52:37.047

```
<?php echo(count(array_slice(scandir($directory),2))); ?> 
```

`array_slice`像`substr`函数一样工作，只是它适用于数组。

例如，这将从数组中删除前两个数组键：

```
$key_zero_one = array_slice($someArray, 0, 2); 
```

如果您省略第一个参数，就像在第一个示例中一样，数组将不包含前两个键/值对 *('.' 和 '..')。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-17T08:59:30.067

也许对某人有用。在 Windows 系统上，您可以通过调用 dir 命令让 Windows 完成这项工作。我使用绝对路径，例如`E:/mydir/mysubdir`.

```
<?php 
$mydir='E:/mydir/mysubdir';
$dir=str_replace('/','\\',$mydir);
$total = exec('dir '.$dir.' /b/a-d | find /v /c "::"'); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-01-03T19:31:44.177

根据接受的答案，这是一种递归计算目录中所有文件的方法：

```
iterator_count(
    new \RecursiveIteratorIterator(
        new \RecursiveDirectoryIterator('/your/directory/here/', \FilesystemIterator::SKIP_DOTS)
    )
) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-16T10:32:15.163

```
$it = new filesystemiterator(dirname("Enter directory here"));
printf("There were %d Files", iterator_count($it));
echo("<br/>");
    foreach ($it as $fileinfo) {
        echo $fileinfo->getFilename() . "<br/>\n";
    } 
```

这应该可以在 dirname 中输入目录。让魔法发生。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-10-16T13:40:55.557

```
$files = glob('uploads/*');
$count = 0;
$totalCount = 0;
$subFileCount = 0;
foreach ($files as $file) 
{  
    global $count, $totalCount;
    if(is_dir($file))
    {
        $totalCount += getFileCount($file);
    }
    if(is_file($file))
    {
        $count++;  
    }  
}

function getFileCount($dir)
{
    global $subFileCount;
    if(is_dir($dir))
    {
        $subfiles = glob($dir.'/*');
        if(count($subfiles))
        {      
            foreach ($subfiles as $file) 
            {
                getFileCount($file);
            }
        }
    }
    if(is_file($dir))
    {
        $subFileCount++;
    }
    return $subFileCount;
}

$totalFilesCount = $count + $totalCount; 
echo 'Total Files Count ' . $totalFilesCount; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-17T04:44:56.920

这是一个相当快的 PHP Linux 函数。有点脏，但它完成了工作！

$dir - 目录路径

$type - f、d 或 false（默认）

f - 仅返回文件数

d - 仅返回文件夹计数

false - 返回文件和文件夹总数

```
function folderfiles($dir, $type=false) {
    $f = escapeshellarg($dir);
    if($type == 'f') {
        $io = popen ( '/usr/bin/find ' . $f . ' -type f | wc -l', 'r' );
    } elseif($type == 'd') {
        $io = popen ( '/usr/bin/find ' . $f . ' -type d | wc -l', 'r' );
    } else {
        $io = popen ( '/usr/bin/find ' . $f . ' | wc -l', 'r' );
    }

    $size = fgets ( $io, 4096);
    pclose ( $io );
    return $size;
} 
```

您可以调整以适应您的需求。

请注意，这不适用于 Windows。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2015-01-02T13:37:53.907

```
 simple code add for file .php then your folder which number of file to count its      

    $directory = "images/icons";
    $files = scandir($directory);
    for($i = 0 ; $i < count($files) ; $i++){
        if($files[$i] !='.' && $files[$i] !='..')
        { echo $files[$i]; echo "<br>";
            $file_new[] = $files[$i];
        }
    }
    echo $num_files = count($file_new); 
```

简单的添加完成....

# c# - 7zip 中的 7z.sfx 和 7zsd.sfx 模块有什么区别？

> ID：12801371
> 
> 赞同：1
> 
> 时间：2012-10-09T13:38:14.290
> 
> 标签：c#, java, windows, file, zip

7zip中的`7z.sfx`和模块有什么区别？`7zsd.sfx`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:39:46.567

`7z.sfx`是 Windows 版本。

`7zSD.sfx`是安装程序的 Windows 版本（使用`MSVCRT.dll`）。

# c# - 在插入新记录之前检查表中的现有记录

> ID：12801384
> 
> 赞同：1
> 
> 时间：2012-10-09T13:38:57.677
> 
> 标签：c#, sql, asp.net, detailsview

我有一个详细信息视图，我用它来用值填充表格。它现在正在正确插入值，但我现在需要检查用户是否正在尝试输入会干扰先前记录的新记录。

如果用户输入了 2012 年 12 月 12 日的新事件，但该用户已经输入了 2012 年 12 月 12 日的记录，那么我希望抛出错误并且无法插入记录。

仅检查时间的唯一记录是行不通的，因为不同的用户可以创建一个偶数 2012-12-12 并且这是可以接受的。只有同一个用户不能创建相同的事件日期。所以我知道我需要检查表中的两个字段，但我不确定如何检查我的代码。

例如：

用户 1 新事件 2012-12-12 ----- 好的

用户 2 新活动 2012-12-12 ----- 好的

用户 3 新活动 2012-12-12 ----- 好的

用户 2 新事件 2012-12-12 ----- 应该引发错误并且不允许创建该记录。

用户 3 新活动 2012-10-12 ----- 好的

**已编辑**

目前我正在使用它来更新表格：

```
 public void UpdateForm(Int64 requestid,
                              Decimal empid,
                              String leave,
                              DateTime startdate,
                              DateTime enddate,
                              String starttime,
                              String endtime,
                              String standby,
                              String status,
                              String rsn,
                              String remarks,
                              String approver,
                              String with,
                              String reqleave,
                              String FIRSTNAME,
                              String LASTNAME)
    {

        var CurrUser = "a03       ";

        Account.Login uusr = new Account.Login();
        CurrUser = uusr.User.Identity.Name.ToString().ToUpper();

        var sql = "update TIME.request set empid=@empid, leave=@leave, with=@with, startdate=@startdate, reqleave=@reqleave, enddate=@enddate, starttime=@starttime, endtime=@endtime, standby=@standby, status=@status, rsn=@rsn, remarks=@remarks, approver=@approver where requestid = @requestid";

        using (iDB2Connection conn = new iDB2Connection(GetConnectionString()))
        {
            conn.Open();

            using (iDB2Command cmd = new iDB2Command(sql, conn))
            {
                cmd.DeriveParameters();
                cmd.Parameters["@requestid"].Value = requestid;
                cmd.Parameters["@empid"].Value = empid;
                cmd.Parameters["@leave"].Value = leave;
                cmd.Parameters["@startdate"].Value = startdate;
                cmd.Parameters["@enddate"].Value = enddate;
                cmd.Parameters["@starttime"].Value = starttime;
                cmd.Parameters["@endtime"].Value = endtime;
                cmd.Parameters["@standby"].Value = standby;
                cmd.Parameters["@status"].Value = status;
                cmd.Parameters["@rsn"].Value = rsn;
                cmd.Parameters["@remarks"].Value = remarks;
                cmd.Parameters["@approver"].Value = approver;
                cmd.Parameters["@reqleave"].Value = reqleave;
                cmd.Parameters["@with"].Value = with;

                cmd.ExecuteNonQuery();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:42:28.843

在列上创建唯一约束

[单击此处查看示例](http://www.w3schools.com/sql/sql_unique.asp)

```
ALTER TABLE <table_name>
ADD CONSTRAINT <constraint name> UNIQUE (user,date) 
```

**编辑：**

根据您的评论，请尝试以下操作：

```
ALTER TABLE TIME.request
ADD CONSTRAINT uc_request UNIQUE (empid, startdate, enddate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:46:32.137

创建一个存储过程并有一个输出参数，检查您插入的项目是否存在：

```
if exists(select 1 from table where user = @user and eventtime = @eventtime)
  begin
    set @output = 'event already exists'
  end 
else
 begin
    --Prevent DBNull output, see comments
    set @output = ''
   --Insert into table
 end 
```

通过C#向过程添加输出参数

```
 var output = new SqlParameter() { Direction = ParameterDirection.Output, ParameterName = "@Output" };
  var cmd = new SqlCommand("procname", connection)
  cmd.Parameters.Add(output);
  //Add other params
  cmd.ExecuteNonQuery();
  if (!string.IsNullOrEmpty(output.Value))
    //Handle the error
    throw new Exception("Already exists"); 
```

SQL 中的存储过程就是你要找的，上面有相关参数，如果有不明白的地方请评论。

编辑：如何创建和调用过程

```
CREATE PROCEDURE [dbo].[Prefix_SomeProcName]

--Parameters you need from the front end
@User varchar(50),
@EventTime datetime,
@Output varchar(100) output

--Created by: Your name
--Created date: Todays date
--Description: To do some stuff

AS

--Do your stuff here
if exists(select 1 from table where user = @user and eventtime = @eventtime)
  begin
    set @output = 'event already exists'
  end 
else
 begin
    --Prevent DBNull output, see comments
    set @output = ''
   --Insert into table
 end 
```

然后您需要导入`System.Data.SqlClient`并执行以下操作。

```
using(SqlConnection con = New SqlConnection("ConnectionString")
{
   SqlCommand cmd = new SqlCommand("Prefix_SomeProcName", con);
   cmd.CommandType = CommandType.StoredProcedure;
   var output = new SqlParameter() { Direction = ParameterDirection.Output, ParameterName = "@Output" };
   //Add your other parameters
   SqlDataAdapter sda = new SqlDataAdapter(cmd);
   DatatTable dt = New DataTable();
   sda.Fill(dt);
} 
```

如果其中`DataTable`有一个 select 语句，则现在将具有该过程的内容。此外，在`Fill()`命令之后，您可以访问 output.Value，如上述代码中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:44:01.013

如果此行为被预期并且您不希望捕获异常的开销，您可以在与 isert 相同的操作中检查是否存在：

插入 myTable(...)

```
select ...
where not exists (select 1 from myTable where....) 
```

这将适用于 Sql Server，但不适用于 MySql。

# java - 将二维数组读入三角形

> ID：12801387
> 
> 赞同：1
> 
> 时间：2012-10-09T13:39:19.473
> 
> 标签：java, arrays

我想将以下内容读入二维锯齿状数组：

```
3
7 4
2 4 6
8 5 9 3 
```

我需要增加每个输入的列大小。我不确定该怎么做。

我的代码如下：

```
int col = 1;
int[][] values = new int[rows][col];
for(int i = 0; i < values.length; i++){
  for(int j = 1; j < col; j++)
  {
     values[i][j] = kb.nextInt();
     col++;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:44:59.003

这应该这样做。

```
int[][] values = new int[rows][];
for(int i = 0; i < values.length; i++)
{
    values[i] = new int[i+1];

    for(int j = 0; j < values[i].length; j++)
    {
        values[i][j] = kb.nextInt();
    }
} 
```

基本上，你首先定义你的二维数组应该有多少行。

在`for`循环中，您为每一行定义一维数组及其长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:46:59.340

样本

```
// don't fix the second dimension
int[][] values = new int[rows][];

for(i = 0; i < rows;i ++){
    //column size increases for every line input
    values[i] = new int[i+1];

    for(j = 0; j < values[i].length; j++) {
         values[i][j] = kb.nextInt();
    }
} 
```

在 Java 中，数组不必是严格的矩形。该变量`values`是对`rows`数组的引用的元素数组`int`。这里，`values[0]`是一个 1 元素`int`数组，values[1] 是一个 2 元素`int`数组，等等。

# tomcat - MyFaces tomcat7：运行目标无法启动 ProtocolHandler “http-bio-8080”

> ID：12801391
> 
> 赞同：6
> 
> 时间：2012-10-09T13:39:36.223
> 
> 标签：tomcat, maven, deployment, jsf-2, myfaces

我使用 maven 原型创建了一个新的 MyFaces 项目`HelloWorld 2.0 OpenWebBeans`

并立即用`mvn clean -Dcontainer="tomcat7" tomcat7:run`. 一切顺利，直到启动tomcat。该过程陷入以下困境：

```
INFO: Starting ProtocolHandler ["http-bio-8080"] 
```

我等了20多分钟。这不可能。

信息：8080 端口上没有运行其他服务，也没有运行其他 tomcat。

为什么 ProtocolHandler 不启动？！我只想用 CDI 开发一个 JSF 应用程序，并使用 Maven 将它部署在 Tomcat7 上。如果有人对我有更好的解决方案，我 - 吐出来！;)

谢谢！

更新：感谢 jstack 技巧，非常酷的功能！这是来自 jstack 的完整 StackTrace：正如我所见，http-bio 有一个 AsyncTimeout 并且处于 TIMED_WAITING 状态......接下来我该怎么办？多谢你们！

```
Full thread dump Java HotSpot(TM) 64-Bit Server VM (23.3-b01 mixed mode):

"http-bio-8080-AsyncTimeout" daemon prio=6 tid=0x000000000c697000 nid=0xf3c waiting on condition [0x000000000d54f000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at org.apache.tomcat.util.net.JIoEndpoint$AsyncTimeout.run(JIoEndpoint.java:148)
        at java.lang.Thread.run(Thread.java:722)

"http-bio-8080-Acceptor-0" daemon prio=6 tid=0x000000000ae7a000 nid=0x97c runnable [0x000000000d25e000]
   java.lang.Thread.State: RUNNABLE
        at java.net.DualStackPlainSocketImpl.accept0(Native Method)
        at java.net.DualStackPlainSocketImpl.socketAccept(DualStackPlainSocketImpl.java:121)
        at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:398)
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:183)
        - locked <0x00000000f3670350> (a java.net.SocksSocketImpl)
        at java.net.ServerSocket.implAccept(ServerSocket.java:522)
        at java.net.ServerSocket.accept(ServerSocket.java:490)
        at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:60)
        at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:216)
        at java.lang.Thread.run(Thread.java:722)

"ContainerBackgroundProcessor[StandardEngine[Tomcat]]" daemon prio=6 tid=0x000000000be73800 nid=0x9c8 waiting on condition [0x000000000d36f000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1517)
        at java.lang.Thread.run(Thread.java:722)

"OwbConversationCleaner-/webapp" daemon prio=6 tid=0x000000000ab58800 nid=0x7f4 waiting on condition [0x000000000cb1e000]
   java.lang.Thread.State: TIMED_WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x00000000f3487a10> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2082)
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1090)
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:807)
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

"Service Thread" daemon prio=6 tid=0x0000000008ea1800 nid=0xfcc runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x0000000008e9f800 nid=0xb70 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x0000000008e9a800 nid=0x6ec waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Attach Listener" daemon prio=10 tid=0x0000000008e9a000 nid=0xa98 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x0000000008e92800 nid=0x85c runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=8 tid=0x0000000002499000 nid=0x918 in Object.wait() [0x000000000a17f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000000c0918c00> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
        - locked <0x00000000c0918c00> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

"Reference Handler" daemon prio=10 tid=0x0000000002492800 nid=0x994 in Object.wait() [0x000000000a05f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000000c0918910> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:503)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
        - locked <0x00000000c0918910> (a java.lang.ref.Reference$Lock)

"main" prio=6 tid=0x000000000239d800 nid=0xf20 in Object.wait() [0x000000000264e000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000000ebe51d28> (a java.lang.Object)
        at java.lang.Object.wait(Object.java:503)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.waitIndefinitely(AbstractRunMojo.java:835)
        - locked <0x00000000ebe51d28> (a java.lang.Object)
        at org.apache.tomcat.maven.plugin.tomcat7.run.AbstractRunMojo.execute(AbstractRunMojo.java:356)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)

"VM Thread" prio=10 tid=0x0000000008e12000 nid=0xf30 runnable

"GC task thread#0 (ParallelGC)" prio=6 tid=0x00000000023e4800 nid=0xeec runnable

"GC task thread#1 (ParallelGC)" prio=6 tid=0x00000000023e6000 nid=0xfe0 runnable

"GC task thread#2 (ParallelGC)" prio=6 tid=0x00000000023e7800 nid=0xd54 runnable

"GC task thread#3 (ParallelGC)" prio=6 tid=0x00000000023e9800 nid=0x8cc runnable

"VM Periodic Task Thread" prio=10 tid=0x0000000008eba000 nid=0xc40 waiting on condition

JNI global references: 272 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:08:54.950

尝试使用`jstack`来获取所有线程正在做什么的转储。它将显示每个线程及其当前正在执行的方法以及有关它是否正在运行、等待或阻塞的信息。

如果您可以使用该信息更新您的问题，那将很有帮助。

旁注，您可以获得 MyFaces、OpenWebBeans 和 Tomcat 开箱即用地集成在一起，并且在[TomEE中获得了 Java EE 6 认证](http://tomee.apache.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:34:24.650

我在使用 tomcat7-maven-plugin 时遇到了类似的问题。我试图通过将以下内容添加到我的 pom.xml 来让 tomcat 绑定到不同的端口：

```
<execution>
 <id>tomcat-run</id>
 <goals>
 <goal>run</goal>
 </goals>
 <phase>pre-integration-test</phase>
 <configuration>
 <port>19090</port>
</configuration>
</execution> 
```

当我把这个块拿出来时，问题就消失了。

# php - PHP 函数与 Echo

> ID：12801397
> 
> 赞同：0
> 
> 时间：2012-10-09T13:39:52.670
> 
> 标签：php

我发现自己最近在处理大量表格数据，我非常喜欢编写原始 html，但我想知道是否有更简单的方法（或值得实施的库）来帮助减少编写 html 标签的时间，例如

```
<tr><td></td></tr> 
```

我已经创建了自己的自定义函数，但我认为最终它不一定有帮助，并且可能会减慢我的脚本，现在我的项目很小，所以也许它可以应对，例如：

```
echo '<tr class="test_class">
    <td>' . $content . '</td>
    <td>' . $second_content . '</td>
<tr/>'; 
```

这是我当前功能的示例：

```
tr("test_class");
   td(); echo $content; escape(td);
   td(); echo $second_content; escape(td);
escape(tr); 
```

期待听到人们的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:43:52.833

如果您已`short_open_tags`打开（并假设您可以在必要时打开它），您可以使用模板语法，如下所示：

```
<table>
    <?php foreach($myList as $key => $value): ?>
    <tr>
        <td><?= $value["key1"] ?></td>
        <td><?= $value["key2"] ?></td>
        ...
    </tr>
    <?php endforeach; ?>
</table> 
```

在编写表格数据方面，这可能会使您的工作更轻松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:46:40.510

有多种方法可以做到这一点......

1.  编写您自己的 html 帮助程序库，该库将包含可以根据其数据源生成 html 元素的类。例如，您可以这样称呼它们：

    ```
    <?php
       HtmlHelper::Table("someArrayOfValues", "idOfTable", "styleOfTable");
    ?> 
    ```

    如果您正确实施此想法，这是一个很好的可重用解决方案。几天前我自己也在玩这个，真的很简单。

2.  如果您发现 1\. 困难，您可以将想法拆分...但不像您展示的那样深，而是生成整行。

    ```
    <?php
        foreach ($myArray as $key => $value)
        {
             echo HtmlHelper::Row(...);
        }
    ?> 
    ```

3.  查找一些提供此功能的库。恐怕在这件事上帮不了你。我喜欢控制生成的标记。

希望你能明白。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:46:20.293

PHP 在 Web 开发中的最大优势在于它与很少的调用有关，特别是在这种情况下，无需通过语言限制即可回显内容。所以总的来说，除非确实有必要，否则直接编写带有 echo 的 html 将是最简单的解决方案，可以充分利用 PHP 的优势，而且简单*总是*一件好事。

[话虽这么说，如果你有很多复杂的表生成，那么如果使用像http://pear.php.net/package/HTML_Table/](http://pear.php.net/package/HTML_Table/)这样的库，代码会更具可读性。此外，如果您希望执行诸如将对象序列化为表格显示之类的操作，那么创建一个为此而设计的序列化程序将是最符合该功能的解决方案。

在上面的代码中，我建议一个透明的实用程序函数当然不会受到伤害。但是，如果您始终拥有相同数量的列，那么您可以使用与表格单元格分隔标记（一次生成一行的函数）连接的数组，而不是您要走的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:43:31.550

使用一些模板引擎更舒服。试试[twig](http://twig.sensiolabs.org/)或[smarty](http://www.smarty.net/)

# algorithm - 找到点的质心

> ID：12801400
> 
> 赞同：4
> 
> 时间：2012-10-09T13:40:01.060
> 
> 标签：algorithm, math, geometry, physics

我有N分。每个点都有 X 和 Y 坐标。

我需要找到这个点的质心 X 和 Y。你能给我一个算法来完成这个任务吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-09T13:45:12.493

仅按质量取加权平均值有什么问题吗？

```
for each point n
{
    totalmass += n.mass
    totalx += n.x*n.mass
    totaly += n.y*n.mass
}
center = (totalx/totalmass,totaly/totalmass) 
```

根据需要添加其他尺寸。

# asp.net-mvc-4 - 具有成员资格电子邮件验证的 MVC 4 项目

> ID：12801402
> 
> 赞同：1
> 
> 时间：2012-10-09T13:40:04.683
> 
> 标签：asp.net-mvc-4

如何在 MVC 4 中将电子邮件验证添加到成员注册？我找到了一些示例，但它们适用于 MVC 3，并且似乎不起作用。

是否有任何可用的模板已经连接了此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:57:38.687

这是一个高级答案，但我认为您应该研究 ASP.NET Membership 的配置文件变量。然后，您可以为每个用户存储一个布尔型“requiresVerification”和“verificationCode”配置文件变量，在创建用户时设置为true。在用户创建期间，还将随机代码通过电子邮件发送到他们的电子邮件地址。

之后，构建需要用户名、密码和通过电子邮件发送的随机代码的页面。如果全部匹配，请将配置文件变量设置为 false（表示地址已通过验证）。

最后，在用户尝试登录时检查该变量。如果这是真的，不要让他们（并将他们重新指向验证页面）。

# php - 尝试访问 localhost 中的应用程序时出现 include_path 错误

> ID：12801403
> 
> 赞同：0
> 
> 时间：2012-10-09T13:40:08.133
> 
> 标签：php, facebook, apache

我意识到已经存在一个问题线程，但它已经关闭，并且 OP 没有回复答案。问题线程可以在这里找到：[https ://stackoverflow.com/questions/5547333/include-path-c-php5-pear](https://stackoverflow.com/questions/5547333/include-path-c-php5-pear)

所以，我的问题是这样的：

我在我的 htdocs 文件夹（我的 DocumentRoot）中本地有我的 facebook 应用程序，它需要 sdk/src/facebook.php。我在尝试查看页面时收到以下错误：

```
Warning: require_once(sdk/src/facebook.php) [function.require-once]: failed to open stream: No such file or directory in D:\Apache\Apache2\htdocs\www\immense-headland-4743\index.php on line 14

Fatal error: require_once() [function.require]: Failed opening required 'sdk/src/facebook.php' (include_path='d:\php\pear') in D:\Apache\Apache2\htdocs\www\immense-headland-4743\index.php on line 14 
```

我在 php.ini 文件中尝试了反斜杠和正斜杠的变体；我在我的主要 index.php 中尝试了 set_initial_path() 和 init_set() - 但没有任何效果。这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:30:36.730

我没有在这里看到问题，因为我盲目地遵循现有代码并且没有仔细研究它。解决方案是查看 php.ini 文件并查看 include_path 变量指向的位置——它指向我的 php 安装文件夹，而我需要的 php 在我的 apache 文件夹中。所以我将变量指向该文件夹，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T21:54:05.263

礼貌：[本地主机 PHP require_once 遇到麻烦的杯子](https://stackoverflow.com/questions/16172982/trouble-with-local-host-php-require-once)

正如他所说：如果你把你的 include/ 文件夹放到这个文件夹中；

/用户/jfloyd/IOD/包括/

然后在你的 PHP ini 中改变这一行：

```
include_path='.:/Applications/MAMP/bin/php/php5.4.10/lib/php' 
```

到

```
include_path='.:/Applications/MAMP/bin/php/php5.4.10/lib/php:/Users/jfloyd/IOD/' 
```

然后保存文件并重新启动服务器，然后应该找到包含文件。

这个 ini 指令可以设置在任意数量的位置，在每个文件中，在每个文件夹中使用 .htaccess 或在 httpd.conf 或 ini 文件中，正如我刚刚描述的那样。

# .net - 在 ASP.NET 4.0 中访问 .svc URL，IIS 7.5 返回 404

> ID：12801404
> 
> 赞同：2
> 
> 时间：2012-10-09T13:40:11.357
> 
> 标签：.net, wcf, sitecore

在对此进行了大量研究之后，让我声明以下内容：

*   目标框架是 .NET 4，64 位
*   对于 .NET 2 和 .NET 4、32/64 位，必要的处理程序已注册到 IIS
*   我期待服务通过 HTTP 运行
*   该服务是运行 WebForms 和 MVC 3.0 的大型 Web 应用程序的一部分
*   路由表包含 {resource}.svc 的忽略条目
*   该解决方案在本地或部署到其他服务器时不起作用
*   Web 应用程序是 Sitecore 6.6，我为 *.svc 文件所在的文件夹设置了忽略前缀。

对于非常感兴趣的人，我正在尝试设置 Sitecore Modules Weblog 评论服务。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:12:28.143

涉及两个问题，都与 WCF 配置没有直接关系。

1.  我的本地 PC 上的错误主机文件条目妨碍了我。
2.  用于规范主机名、尾部斜杠和小写 URL 的 IIS 7.5 URL 重写规则破坏了 WCF 通信流。

禁用 URL 重写规则解决了这个问题。

# windows - 缺少事件查看器说明

> ID：12801405
> 
> 赞同：0
> 
> 时间：2012-10-09T13:40:17.113
> 
> 标签：windows, service, registry, event-log

我正在为我们的一种产品创建一个新的安装包，但在获取 Windows 使用的事件消息描述 DLL 向事件查看器提供事件描述时遇到了很大的麻烦。我总是在事件属性中收到以下消息：

> 找不到 Source (MyProduct) 中事件 ID (39) 的描述。本地计算机可能没有必要的注册表信息或消息 DLL 文件来显示来自远程计算机的消息。您可以使用 /AUXSOURCE= 标志来检索此描述；有关详细信息，请参阅帮助和支持。以下信息是事件的一部分：MyProduct, , , , , , , , , MyProduct。

我以前的安装程序似乎在其他系统上运行良好。这里的目标操作系统是 WinXP SP3 和 Server 2008 R2，我在两者上都看到了同样的问题。事件消息文件在 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services 下的 Eventlog\Application 项下注册，EventMessageFile 和 TypesSupported 存在设置为正确的值。

为了解决这个问题，我尝试了以下方法：

*   将事件消息 DLL 移动到 System32 文件夹
*   确保事件日志服务对事件消息 DLL 具有完全访问权限（仅限 2008 - WinXP 不在域中，因此文件属性中没有安全选项卡。

任何想法，因为我用完了选项并且除了设置注册表之外在网上找不到任何东西，我从一开始就完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:08:45.187

最后发现我们的事件消息 DLL 中有一个编译错误（！）

# loops - 8086 汇编语言中的嵌套循环

> ID：12801409
> 
> 赞同：0
> 
> 时间：2012-10-09T13:40:22.307
> 
> 标签：loops, assembly, nested-loops, x86-16, tasm

我对我应该如何使用循环来获得该程序中的期望输出有疑问，

我想要做的是从用户那里输入任何数字，然后按降序对该数字进行排序，

我在这里尽力解释注释中代码的每一步。

这是我的代码，

```
STSEG SEGMENT
        DB 64 DUP(?)
STSEG ENDS

DTSEG SEGMENT
        SNAME    DB 24 DUP("$")

DTSEG ENDS

CDSEG SEGMENT
    MAIN PROC
    ASSUME CS:CDSEG, DS:DTSEG, SS:STSEG

    MOV AX,DTSEG
    MOV DS,AX
    MOV ES, AX     ;ES:DI

    MOV DX, OFFSET STRNG1
    MOV AH,09
    INT 21H

    XOR DX,DX

      MOV BYTE PTR SNAME, 40
      MOV DX, OFFSET SNAME  

      MOV AH, 0AH
      INT 21H

      PUSH DX ;Hold the input number in a stack until we clear the screen and set the cursor
      ; The clear screen and cursor position code is here which i didn't really mention.

      ;What we need to do now is to compare first number to each other number and store the greatest

 of two on first position.

      MOV BX,DX ;Copy un-sorted number to BX, 

      MOV AX,BX[1] ;the length of the number which is stored on the first position of the string
      XOR AH,AH      ;Empty AH
      MOV CL,AL  ;MOVE AL into CL for looping 6 times
      SUB CL,1

      MOV SI,02H ;the number is stored in string array from the 2nd position

;Suppose the input number is the following,
      ;[6][3][9][1][8][2][6]

      ;this is how it should work,

      ; Loop 6 times , CX = 6
      [7][6][3][9][1][8][2][6] ; 7 is length of the number which is already copied in CX above.
      ; but we need 6 iterations this is why we subtract 1 from CL above.

      ; 6 > 3 ? 
      ; Yes, then BX[SI] = 6 and BX[SI+1] = 3
      ; 6 > 9 ?
      ; NO, then BX[SI] = 9  and BX[SI+2] = 6
      ; 9 > 1   
      ; Yes, then BX[SI] = 9 and BX[SI+3] = 1
      ; 9 > 8
      ; Yes, then BX[SI] = 9 and BX[SI+4] = 8 
      ; 9 > 2
      ; Yes, then BX[SI] = 9 and BX[SI+5] = 2 
      ; 9 > 6
      ; Yes, then BX[SI] = 9 and BX[SI+6] = 6

; After first iteration the incomplete sorted number is,
;[9][3][6][1][8][2][6]

  ;Similarly here i need to loop 5 times now by comparing the 2nd number which is a 3 with all ;the number after it and then loop 4 times then 3 times then two times and then 1 time.

     L1: 
        ;Loop 1 must iterate 6 time for the supposed input number, 
;but i couldn't be able to write the proper code as i always get out of registers. kindly help me out   

        L2:

        LOOP L2

     Loop L1 
```

请帮助我解决我卡住的嵌套循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:55:25.487

该`loop`指令使用`cx`寄存器。

因此，您必须使用例如（在*L2*之前:) 和（之后）保留`cx`外部循环：`push cx`*`pop cx``loop L2`*

 *```
 mov  cx,5
L1:
    push cx
    mov  cx,6
L2:
    . . . do stuff inner
    loop L2
    pop  cx
    . . . do stuff outer 
    loop L1 
```

或记住`loop`大致等于`dec cx` `jnz`，例如

```
 mov  dx,5
L1:
    mov  cx,6
L2:
    ... do stuf inner
    loop L2
    .. do stuff outer
    dec  dx
    jnz  L1 
```

可能的错误是旨在并意味着作为读者的练习:-)*

# java - 当库将编译器从 1.5 切换到 1.6 时，库用户是否总是需要重新编译？

> ID：12801415
> 
> 赞同：2
> 
> 时间：2012-10-09T13:40:36.867
> 
> 标签：java, jvm, backwards-compatibility, java-6, java-5

请考虑以下场景：一个 Java 框架和一堆应用程序插件被部署为一个 Java SE 客户端应用程序。客户端*运行时*是 Java SE 6，而框架和应用程序插件是用 Java SE 5*编译的。*

现在框架使用 Java SE 6 重新编译，应用程序插件保持不变（使用 Java SE 5 编译）。

假设框架“接口”（应用程序插件直接使用的类/接口）仍然可以与 Java SE 5（语言级别和 API）编译，问题是：应用程序插件是否需要重新编译（针对重新编译的框架）在为了在运行时一起使用（使用 Java SE 6）？

也许问题归结为：在 SE6 运行时中，“SE5-classfiles”（v49）使用“SE6-classfiles”（v50）在什么情况下会出现问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:44:22.027

如果接口/类中没有[（二进制）不兼容](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html)的更改，并且运行时 VM 支持新的类文件版本，那么应该没有问题。

# java - 奇怪的 JVM 线程挂起 - 排除故障的建议？

> ID：12801417
> 
> 赞同：0
> 
> 时间：2012-10-09T13:40:41.643
> 
> 标签：java, multithreading, jvm, hung

在对生产环境中的一个 jvm 挂起问题进行故障排除时，我们遇到了执行以下记录器语句的线程之一

```
logger.debug("Loaded ids as " + ids + "."); 
```

在这一步挂起，线程状态为可运行。这里 ids 是一个集合。还有另一个线程通过倒计时锁存器等待上述线程以完成其任务。该软件每 15 分钟进行一次线程转储，两个线程的堆栈跟踪如下所示

```
Stack trace for [THREAD GROUP: Job_Executor] [THREAD NAME:main-Runner Thread][THREAD STATE: WAITING]
    ...sun.misc.Unsafe.park(Native Method)
    ...java.util.concurrent.locks.LockSupport.park(Unknown Source)
    ...java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(Unknown Source)
    ...java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(Unknown Source)
    ...java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(Unknown Source)
    ...java.util.concurrent.CountDownLatch.await(Unknown Source)
    ...com.runner.MainRunner.stopThread(MainRunnerRunner.java:1334)

Stack trace for [THREAD GROUP: Job_Executor] [THREAD NAME:task executor][THREAD STATE: RUNNABLE]    
    ...java.util.AbstractCollection.toString(Unknown Source)           
    ...java.lang.String.valueOf(Unknown Source)      
    ...java.lang.StringBuilder.append(Unknown Source)    
    ...com.runner.CriticalTaskExecutor.loadByIds(CriticalTaskExecutor.java:143) 
```

这个 jvm 挂了将近 24 小时，最后我们不得不杀死它才能继续前进。线程转储表明有 43 个线程处于 RUNNABLE 状态，包括上述线程。

上述线程在执行 collection.toString() 时处于 RUNNABLE 状态 24 小时的原因可能是什么？

关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:58:51.797

> 上述线程在执行 collection.toString() 时处于 RUNNABLE 状态 24 小时的原因可能是什么？

您没有提供足够的信息来诊断问题。我只会挑战你不要假设这里发生了 JVM 问题。

如果我们查看该`AbstractCollection.toString()`方法的源代码，我们会发现它遍历集合并输出大约“[item0, item1, item2]”。调用每个`item.toString()`方法来显示项目。

如果应用程序挂起在集合中，`toString()`那么我的猜测是集合上的迭代器存在问题。如果您的应用程序正在旋转，您可以知道这一点——使用接近 100% 的 CPU。也许`hasNext()`上的方法`Set`总是返回`true`？

如果应用程序挂起实际上是在内部，`item.toString()`那么我会确保您的项目只是显示简单的字段。请注意如果访问会进行 RPC 调用的字段，例如延迟加载的 ORM 包装字段。

如果您提供有关`Set`问题的详细信息并显示`id.toString()`代码，我们可以提供更多帮助。

现在听起来这是一组`Integer`对象。不知道为什么这会挂起您的应用程序。这里有几个其他的想法：

*   您是否以非同步方式访问此集合？是否有多个线程对集合进行了更改，从而导致其迭代器旋转而损坏？您可以尝试将其包装在`Collections.synchronizedSet(...)`.
*   任何机会`Set`都是*巨大*的并且您正在运行接近内存不足并且程序正在颠簸？但是，这不会挂起您的应用程序，而只会使其缓慢爬行。你会开始看到内存不足的异常。
*   有没有机会`toString()`被一遍又一遍地调用？我假设您会在日志中看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:50:26.863

这取决于`toString()`被调用的方法。当正在构建的堆对于堆来说太大时，我已经看到`AbstractCollection.toString`跌倒。`String`否则，问题可能出`toString`在集合中的对象上。

要弄清楚它是哪一个，需要更多的堆栈转储（10 个左右）。卡住的线程可能通常是`toString`导致问题的原因。

作为快速修复，更换

```
logger.debug("Loaded ids as " + ids + "."); 
```

和

```
logger.debug("Loaded ids as {}.", ids); 
```

（假设您使用的是 slf4j，否则在您的框架中查找适当的方法来进行参数化日志记录）。

如果未启用调试，这将跳过 toString。

# ruby-on-rails - 如何通过类似查询在 ruby on rails 中搜索数据库？

> ID：12801419
> 
> 赞同：0
> 
> 时间：2012-10-09T13:40:42.033
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我使用 rails 和 mongo db 作为数据库只是我想搜索我有一个字段名称角色现在我将搜索项发送到

```
params[:role]
params[:name] 
```

现在我有了模型 User 现在我可以查询什么来搜索 User 模型中的数据，例如我喜欢的 params[:name]

```
 @role = params[:role]
    @name = params[:name] 
     @data = User.{where(:role => @role)}.where("description LIKE (?)",
    "%#   {@name}%").desc(:created_at).
    excludes(:id    => current_user.id) 
```

以上查询只是分析。我的意思是说它应该像在理论中，但我没有得到 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:01:18.850

这行得通吗？（从我的脑海中......）

```
 @role = params[:role]
 @name = params[:name] 
 @users = User.where(:role => @role)
 @data = @users.where(users[:description].matches("%#{@name}%")).order("created_at desc").excludes(:id=> current_user.id) 
```

# svn - 跟踪发布校准更改

> ID：12801420
> 
> 赞同：0
> 
> 时间：2012-10-09T13:40:43.430
> 
> 标签：svn, version-control

我们使用 SVN 存储库来跟踪我们在嵌入式系统中的所有更改。我们有一个常用版本发送给多个客户，但每个客户的校准略有不同。除了一些变量定义之外的源代码是相同的。

有没有一种好方法可以跟踪我们发布的所有各种校准？只是为了标记对源没有实际影响的东西而增加版本号会变得混乱和混乱。也许这应该用一个单独的存储库来处理？或者也许SVN中有一个我不知道的功能......

有关如何处理此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:33:24.660

我想，你可以|必须

*   为客户的版本设置（团队内部）命名约定
*   使用 p.1 中的命名方案为每个“发布”创建标签（即 a）在主干中编辑*此客户*的数据文件，b）提交，c）标签，d）从标签构建版本并在*某些文件中添加 REVNO )* ... 为下一个等重复广告步骤)

PS - 数据文件中的修订号可以（将）在以后使用，当客户报告您的产品问题并且您有关于**何时发生的信息时**

# .net - 在 wsdl 中设置链接 https 协议

> ID：12801421
> 
> 赞同：2
> 
> 时间：2012-10-09T13:40:46.817
> 
> 标签：.net, wcf, iis, https, wsdl

我有一个通过负载均衡器保护的 WCF 服务。所以客户端连接是通过`https`但服务本身不在`https`IIS 下。这意味着其中的链接`wsdl`不安全，我相信这就是导致我们客户问题的原因。

例如在`wsdl`

```
<xsd:import schemaLocation="http://blah.com/whatever.svc?xsd=xsd0"
            namespace="http://blah.com" /> 
```

是否有某种方法可以将服务配置为输出`https`链接`wsdl`？或者有什么其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:13:17.373

您是否通过行为 (ServiceMetadataBehavior) 公开元数据，在这种情况下 HttpsGet 是否设置为 true？

请参阅：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.description.servicemetadatabehavior.httpsgetenabled (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicemetadatabehavior.httpsgetenabled(v=vs.100).aspx)

# android - Android IntentService 队列

> ID：12801422
> 
> 赞同：3
> 
> 时间：2012-10-09T13:40:47.350
> 
> 标签：android

假设我有两个继承自 IntentService 的类。现在从文档中引用

> 所有请求都在单个工作线程上处理——它们可能需要尽可能长的时间（并且不会阻塞应用程序的主循环），但一次只会处理一个请求。

现在假设我的类被调用`SericeA extends IntentService`，`ServiceB extends IntentService`现在当我为 ServiceA 类型的对象调用 startService 并为 ServiceB 类型的对象调用 startService 时，这两者将由同一个工作线程处理。是否存在系统范围的工作线程，或者只是与特定 IntentService 关联的工作线程。

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:42:36.177

> 这些都将由同一个工作线程处理吗

不。

> 或者只是一个与特定 IntentService 关联的工作线程。

是的。

您可以通过查看[源代码`IntentService`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/IntentService.java)并注意到每个都`IntentService`创建了自己的`HandlerThread`.

# objective-c - 如何使用 SDK 3.1 指定用户用于发布的应用程序名称（通过应用程序名称）

> ID：12801424
> 
> 赞同：0
> 
> 时间：2012-10-09T13:40:54.397
> 
> 标签：objective-c, ios, facebook

使用新的 Facebook SDK 3.1 和 iOS 6 有两种（实际上是 3 种）发帖方式。

（似乎新趋势是有更多选择让它更简单？？）OMG！

这是一个：

```
SLComposeViewController *fbPost = [SLComposeViewController      composeViewControllerForServiceType:SLServiceTypeFacebook];
[fbPost addURL:[NSURL URLWithString:href]];
[self presentViewController:fbPost animated:YES completion:nil]; 
```

这是使用本机对话框的另一种方式：

```
[FBNativeDialogs presentShareDialogModallyFrom:self
 initialText: nil
 image: nil
 url: [NSURL URLWithString:href]
 handler:^(FBNativeDialogResult result, NSError *error) {

     if (error) {

     }
     else
     {

         switch (result) {
             case FBNativeDialogResultSucceeded:

                 break;
             case FBNativeDialogResultCancelled:

                 break;
             case FBNativeDialogResultError:

                 break;
        }

     }

 }]; 
```

我们，开发人员，认为这很酷，因为我们为用户提供了一个很好的功能，还因为我们的应用程序名称出现在帖子中，这可以对应用程序进行一些推广。

有趣的是，最新的实现不允许指定发布的应用名称，名称出现在“via”之后。

我也尝试使用 SLRequest：

```
ACAccountStore *store = [[ACAccountStore alloc] init];

ACAccountType *fbType = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSMutableDictionary *options = [[NSMutableDictionary alloc] init];
(options)[@"ACFacebookAppIdKey"] = kFacebookAppID;
(options)[@"ACFacebookPermissionsKey"] = @[@"publish_stream"];
(options)[@"ACFacebookAudienceKey"] = ACFacebookAudienceFriends;

[store requestAccessToAccountsWithType:fbType options:options completion:^(BOOL granted, NSError *error) {
    if(granted) {
        // Get the list of Twitter accounts.
        NSArray *fbAccounts = [store accountsWithAccountType:fbType];

        NSMutableDictionary *params = [[NSMutableDictionary alloc] init];

        (params)[@"link"] = href;
//            (params)[@"picture"] = picture;
//            (params)[@"name"] = name;
        (params)[@"actions"] = @"{\"name\": \"Go Gabi\", \"link\": \"http://www.gogogabi.com\"}";

        //Set twitter API call
        SLRequest *postRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodPOST
                                                              URL:[NSURL URLWithString:@"https://www.facebook.com/dialog/feed"] parameters:params];
        //Set account

        [postRequest setAccount: [fbAccounts lastObject]];
        [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

            if(error)
            {
                NSLog(@"%@", error.description);
            }
            else
            {
                NSLog(@"%@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);

            }

        }];

    } else {

    }
}]; 
```

不幸的是，分享这个名字不再那么微不足道了，我想知道为什么以及谁在设计新的实现......我希望能得到一些帮助，在此先感谢。

我试着让我的问题变得有趣，因为花时间在如此琐碎的话题上太无聊了……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T03:38:53.353

当您使用 时`SLComposeViewController`，实际上是系统向您展示他们的控制器，并且是使用发布按钮发送的用户。因此在 Facebook 上它显示为“通过 iOS”。

没有办法改变它。

使用 Facebook SDK 3.1，在底层它也使用 iOS 6 原生集成，所以当你`FBNativeDialogs`在 iOS 6 上调用`SLComposeViewController`.

Facebook 继续开发他们的 SDK，因为他们提供了几个很好的模块来“开箱即用”使用 - 这包括朋友列表选择器等......但我相信 Facebook 继续支持他们的 SDK 以实现向后兼容性的最大原因。如果您不在 iOS 6 上，它会退回到它的库，如果您在 iOS 6 上，它会使用系统集成。

Facebook 是一件大事，现在它本身就可以使用，很多开发人员都会使用它，就像去年 Twitter 的集成一样。当然，问题在于开发人员可以选择放弃旧的 iOS 支持，或者......有很多重复的代码，从某种意义上说，他们将检查`SLComposeViewController`并且如果它不可用（iOS 5）然后使用旧的 Facebook SDK... 你可以想象这会很快变得非常混乱。

因此，如果可用，Facebook SDK (3.1) 正在使用 iOS 系统 Facebook 集成，否则，它是自己的。简而言之，除非你真的想要 Facebook SDK 的好东西（朋友纠察队举个例子），并且你不打算支持 iOS < 6，那么你不需要担心他们的 SDK，只需使用社交框架。

那么，回到你的问题，有 3 种方式可以发布到 Facebook 吗？实际上考虑到我提到的，iOS 6 中有 2 种方式：`SLComposeViewController`或者，`SLRequest`. 在较旧的 iOS 版本上，只有 1：Facebook SDK。

由于`SLComposeViewController`它归系统所有，而不是您的应用程序，因此它将始终以“通过 iOS”的形式共享。

另一方面`SLRequest`将显示您的应用程序名称。当您为您的 指定帐户时`SLRequest`，该帐户是通过`ACAccountStore`传递一些选项（包括）获得的`ACFacebookAppIdKey`，这些选项将用于确定您的 Facebook 应用程序名称，以作为帖子的一部分发布到用户提要中。

希望这可以帮助。

# c - Linux：检查消息队列是否为空

> ID：12801429
> 
> 赞同：12
> 
> 时间：2012-10-09T13:41:01.607
> 
> 标签：c, linux, ipc, message-queue

我想知道队列消息是否为空。我已经使用 msg_ctl() 如下它不起作用：

```
struct msqid_ds buf;
int num_messages;

rc = msgctl(msqid, IPC_STAT, &buf); 
```

我已经使用了这个 peek 功能：

```
int peek_message( int qid, long type )
{
    int result, length;
    if((result = msgrcv( qid, NULL, 0, type, IPC_NOWAIT)) == -1) {
        if(errno==E2BIG)
            return(1);
    }

    return(0);
} 
```

在这两种情况下，我在向队列发送消息之前和之后都会得到相同的结果。

消息成功到达队列，我已经通过阅读我发送的内容进行了测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:00:01.887

我编写了似乎可以正常工作的示例代码：

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <stdio.h>
#include <errno.h>

struct msgbuf {
    long mtype;       /* message type, must be > 0 */
    char mtext[1];    /* message data */
};

int main(void) {
    int msqid;
    //msqid = msgget(IPC_PRIVATE, (IPC_CREAT | IPC_EXCL | 0600));
    msqid = msgget((key_t)1235, 0600 | IPC_CREAT);

    printf("Using message queue %d\n", msqid);
    struct msqid_ds buf;

    int rc = msgctl(msqid, IPC_STAT, &buf);

    uint msg = (uint)(buf.msg_qnum);
    printf("# messages before post: %u\n", msg);

    printf("Posting message to queue...\n");
    struct msgbuf qmsg;
    qmsg.mtype = 100;
    qmsg.mtext[0] = 'T';

    int res = msgsnd(msqid, &qmsg, 1, MSG_NOERROR);

    rc = msgctl(msqid, IPC_STAT, &buf);

    msg = (uint)(buf.msg_qnum);
    printf("# messages after post: %u\n", msg);

    return 0;
} 
```

也许这对你有帮助？使用此代码时，队列上的消息数似乎确实正确增加了。

# scrollbar - MacVim：获取 Vsplit 宽度

> ID：12801430
> 
> 赞同：0
> 
> 时间：2012-10-09T13:41:02.997
> 
> 标签：scrollbar, vim

我想修改 Andreas Politz 创建的函数（在这里讨论：[https](https://groups.google.com/d/msg/vim_use/6bO-QKWj9_4/2cdqygSqcMgJ) : //groups.google.com/d/msg/vim_use/6bO-QKWj9_4/2cdqygSqcMgJ）也可以使用 vsplits。这个函数创建一个水平滚动条来指示文件中的当前位置（我实际上不喜欢 MacVim 默认的滚动条）。滚动条的大小取决于整个窗口的宽度，不适应vsplit。当我使用 NERDTree 插件时，每个 vsplit 都有一个超大的滚动条。

我在 StackOverflow 和 VIM wiki 上进行了一些搜索，但我只找到了调整 vsplit 大小的命令，没有找到实际大小的命令。

您对如何获得当前的 vsplit 宽度有任何线索吗？

PS：到目前为止我的结果：

*   `:set columns`返回实际窗口大小
*   `:set winwidth`返回窗口的最小宽度
*   `:set window`给我一个在我在拆分之间切换时不会改变的数字（`77`每次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:05:40.303

```
:echo winwidth(0) 
```

返回窗口的宽度`0`。

有关`:help functions`Vim 中可用函数的完整列表，请参阅参考资料。如果您正在寻找任何与 Vim 相关的内容，文档是您应该首先访问的地方。

# objective-c - NSString 常量指针指向常量指针

> ID：12801436
> 
> 赞同：0
> 
> 时间：2012-10-09T13:41:32.497
> 
> 标签：objective-c, pointers, constants

我有一个全局常量：

```
FOUNDATION_EXPORT NSString *const ENGModelItemText; // .h file
NSString *const XYZConstant1 = @"XYZConstant1"; // .m file 
```

...我想创建`XYZConstant2`一个指向`XYZConstant1`. 我认为它会像这样简单：

```
NSString *const XYZConstant2 = &XYZConstant1 
```

我玩了一下`*`，`&`但无法正确处理。我想摆脱我现在使用`#define`的`XYZConstant2`那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:50:56.783

这是一个常数，所以编译时间。如果你想指出它，你不能用一个常数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:17:08.390

您不能在 C 中（因此在 ObjC 中）创建这样的编译时别名。您可以通过在函数或方法内部声明来创建运行时别名`XYZConstant2`，但不能声明为静态别名。比较这个纯 C，它会产生相同的错误：

```
const char * const foo;
const char * const bar = foo; 
```

（另见[编译器错误：“初始化元素不是编译时常量”](https://stackoverflow.com/questions/6143107/compiler-error-initializer-element-is-not-a-compile-time-constant)。）

通常，当需要这种别名时（通常是因为字符串常量被重命名），您使用 a `#define`（我讨厌定义）。

也就是说，您不应该依赖两个对象指针是同一个地址这一事实，除非您的意思是“它是这个对象”而不是“它具有这个值”。（你永远不会对字符串这么说，因为字符串只有值。）写入语义，而不是实现细节。不要过早地优化比较。

# php - Codeigniter - 表单验证回调

> ID：12801437
> 
> 赞同：0
> 
> 时间：2012-10-09T13:41:34.263
> 
> 标签：php, codeigniter, webforms

这段代码有什么问题？问题是 is_empty 方法被调用但 is_image 没有。

```
$this->load->library('form_validation');
$this->form_validation->set_rules('userfile', 'image', 'callback_is_empty|callback_is_image'); 
```

这是 is_image 方法

```
public function is_image()
{
  echo 'Hello from is_image';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:17:02.477

您的自定义回调函数需要返回“True”或“False”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T14:17:10.497

我不确定，但是您是否尝试过使用

```
'callback_is_empty||callback_is_image' 
```

代替

```
'callback_is_empty|callback_is_image' 
```

你也读过这个：
[http ://ellislab.com/codeigniter/user_guide/libraries/form_validation.html#callbacks](http://ellislab.com/codeigniter/user_guide/libraries/form_validation.html#callbacks)

对不起，我不能更有用。

# windows - 需要在 Windows Server 2008 R2 中安装什么才能使其运行 ASPNET MVC 4 应用程序？

> ID：12801442
> 
> 赞同：-1
> 
> 时间：2012-10-09T13:41:45.307
> 
> 标签：windows, web-config, webserver, asp.net-mvc-4, redistributable

我已经使用 dotNetFx45_Full_x86_x64.exe 安装程序安装了 .NET 4.5 框架，并在 Windows 2008 R2 服务器中使用 AspNetMVC4Setup.exe 安装程序安装了 ASPNET MVC4 框架，但我不断收到消息“没有为扩展注册的构建提供程序'.cshtml'。在尝试运行我的 ASPNET MVC4 应用程序时。

我已经通过在我的 Web.config 中添加一个 buildProviders 部分暂时解决了这个问题，但我想知道如何设置服务器以便我可以使用当前框架而无需触摸我的 Web.config（我可以使用相同的方式在我的开发机器上运行它们）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:47:40.270

这是在黑暗中拍摄的，但也许是“aspnet_regiis -i”？

（确保在服务器上的正确目录中运行该版本）

[http://msdn.microsoft.com/en-us/library/k6h9cz8h(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h(v=vs.80).aspx)

更新：

您是否还在 Web 应用程序的 BIN 文件夹中部署了以下 .dll？

*   System.Web.Helpers.dll
*   System.Web.Mvc.dll
*   System.Web.WebPages.Deployment.dll
*   system.Web.WebPages.dll
*   System.Web.WebPages.Razor.dll

# visual-studio-2010 - 如何使用插件获取开放解决方案的调用关系

> ID：12801443
> 
> 赞同：4
> 
> 时间：2012-10-09T13:41:48.267
> 
> 标签：visual-studio-2010, vsx, vspackage, visual-studio-sdk, call-hierarchy

我尝试为 VS 2010 开发一个 VSPackage，它研究当前解决方案中所有可用的方法，并重建每个方法的调用关系，就像 VS 的内置调用层次结构特性一样。

我设法通过使用 DTE 自动化对象从解决方案到其项目、项目类/类型和类成员（最重要的是它的方法）来获取解决方案中类型及其成员的所有可用名称，但是我无法重建通话关系。我没有找到任何可以为我提供帮助的 VS/VS SDK 服务。有什么提示吗？

提前致谢！

# python - 返回 Python 中元组列表中最高的 6 个名称

> ID：12801444
> 
> 赞同：7
> 
> 时间：2012-10-09T13:41:58.890
> 
> 标签：python, list, tuples

请我想从下面的元组列表中返回具有最高对应整数的前 6 个名称（仅名称）。我已经能够返回从最高（短信）到最低（老板）的所有名字。

```
[('sms', 10), ('bush', 9), ('michaels', 7), ('operations', 6), ('research', 5), ('code', 4), ('short', 3), ('ukandu', 2), ('technical', 1), ('apeh', 1), ('boss', 1)] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T13:45:25.473

`heapq.nlargest`是你想要的：

```
import heapq
from operator import itemgetter
largest_names = [x[0] for x in heapq.nlargest(6,your_list,key=itemgetter(1))] 
```

它将比排序更有效，因为它只获取最大的元素并丢弃其余的元素。当然，如果由于其他原因对列表进行了预排序，则它的效率低于切片。

复杂：

*   堆：O（N）
*   排序：O(NlogN)
*   切片（仅在预先排序的情况下）：O(6)

解释：

```
heapq.nlargest(6,your_list,key=itemgetter(1)) 
```

此行返回 (name,value) 元组的列表，但只有 6 个最大的 - 比较由`key=itemgetter(1)`元组中的第二个 (index=1 --> ) 元素完成。

该行的其余部分是对 6 个最大名称、值元组的列表理解，它只获取元组的名称部分并将其存储在列表中。

* * *

您可能会感兴趣的是，您也可以存储这些数据`collections.Counter`。

```
d = collections.Counter(dict(your_list))
biggest = [x[0] for x in d.most_common(6)] 
```

仅仅为了做这个计算可能不值得转换（这毕竟是 heapq 的用途 ;-)，但它可能值得转换以使数据更易于使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T13:44:53.343

```
data=[('sms', 10), ('bush', 9), ('michaels', 7), ('operations', 6), ('research', 5), ('code', 4), ('short', 3), ('ukandu', 2), ('technical', 1), ('apeh', 1), ('boss', 1)]
return [x[0] for x in sorted(data, key=lambda x: x[1], reverse=True)[0:6]] 
```

执行以下操作：

*   `sorted`返回使用`key`函数排序的数据。由于标准排序顺序是从升序开始，`reverse=True`因此设置为降序；
*   `lambda x: x[1]`是匿名函数，它返回参数的第二个元素（在这种情况下是元组）；`itemgetter(1)`是更好的方法，但需要额外的导入；
*   `[0:6]`切片列表的前 6 个元素；
*   `[x[0] for x in ... ]`创建每个传递的元组的第一个元素的列表；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:43:48.913

如果数据已经排序，只需切掉前六个元组，然后获取名称：

```
first_six = data[0:6]  # or data[:6]
only_names = [entry[0] for entry in first_six] 
```

列表推导可以展开为：

```
only_names = []
for entry in first_six:
    only_names.append(entry[0]) 
```

如果列表*尚未*排序，您可以使用方法（或内置）的`key`关键字参数按分数排序：`sort``sorted`

```
data.sort(key=lambda entry: entry[1], reverse=True) 
```

`lambda`是一个匿名函数 - 等价于：

```
def get_score(entry):
    return entry[1]

data.sort(key=get_score, reverse=True) 
```

# sql - 在 null 的情况下将 varchar 转换为 numeric

> ID：12801446
> 
> 赞同：2
> 
> 时间：2012-10-09T13:42:01.730
> 
> 标签：sql, casting, int, varchar

如果值为 null，我如何处理此转换，以便它不会给出错误“将数据类型 varchar 转换为数字时出错”。

```
convert(numeric(19,2), mdmaster.check_no)as checkNbr, 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:43:32.570

您可以使用`ISNULL`：

```
convert(numeric(19,2), ISNULL(mdmaster.check_no, 0))as checkNbr, 
```

这将使任何`NULL`值转换为`0.00`.

## [这是一个现场演示](https://data.stackexchange.com/stackoverflow/query/edit/81974)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:47:51.543

您可以使用 ISNUMERIC，如果为 null，它将返回 0.00

```
DECLARE @t VARCHAR(50);
SELECT convert(numeric(19,2), ISNUMERIC (@t))as checkNbr 
```

或者，如果它符合您在 ms sql server 中的要求，您可以使用如下所示的方法

```
SELECT 
    CASE 
        WHEN Field NOT LIKE '%[^0-9]%'
        THEN CAST(Field AS INT)
        ELSE NULL 
    END 
```

# php - PHP 创建年度自动计划

> ID：12801450
> 
> 赞同：0
> 
> 时间：2012-10-09T13:42:12.853
> 
> 标签：php, calendar, schedule

我正在尝试为出版物创建年度自动计划。每个问题都有 3 个日期（星期三、星期五和星期一），每两周发生一次。在某些情况下，当一天是假期时，它应该自动调整并转到第二天。

我现在正在尝试在 PHP 中完成这一切，我已经完成了大部分工作，但是在第 7 期之后，脚本出错并且似乎跳过了一周。任何人都可以帮助或建议实现这一目标的方法吗？

这是我的逻辑的伪代码；

```
For 12 months
    Get the amount of days in a given month
        For days in a month
            If Wednesday
        assign date to a var
            Else if Friday
                assign date to a var
                print wednesday var
                print friday var
                print monday var
                increment counter in order to skip ahead to the next week
            Else if Monday
                assign date to a var 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:48:55.847

我认为这应该为您指明正确的方向（未经测试，但应该做您想做的事）。

```
$iYear = date('Y');

for($i = 1; $i <= 12; $i++) {
  $iNumDaysInMonth = date('t', mktime(0,0,0,$i,1,$iYear);

  for($j = 1; $j <= $iNumDaysInMonth; $j++) {
    $iDayNum = date('N', mktime(0,0,0,$i,$j,$iYear));

    if($iDayNum == 3) {
      // wednesday
    } elseif($iDayNum == 5) {
      // friday
    } elseif($iDayNum == 1) {
      // monday
    }
  }
} 
```

# libreoffice - LibreOffice Base - 查询 - 合并两行

> ID：12801451
> 
> 赞同：1
> 
> 时间：2012-10-09T13:42:13.120
> 
> 标签：libreoffice, libreoffice-base

我正在学习 LibreOffice Base (3.6.2)。不幸的是，医生很差。DB 是“.odb”文件格式。这是一个简单的多表查询：

![LibreOffice Base 查询](../Images/b11f3b7e4c7dbd2f589f576b177c2a1c.png)

我想将字段“refLogiciel.name”和“tblPosteLogiciel.version”合并到一个字段中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T17:31:21.650

您必须在 SQL 中为该查询创建查询。我也有同样的问题。目前还没有答案，但我至少在该领域取得了一些进展。这是我的问题的链接，可能会有所帮助：

[在 LibreOffice Base SQL 中查询 2 个字段的串联时出错](https://stackoverflow.com/questions/16675770/error-in-querying-concatenation-of-2-fields-in-libreoffice-base-sql)

编辑：哎呀，我不知道这篇文章有多老了。希望你知道怎么做，所以你可以分享给我。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T17:07:10.870

用作字段： CONCAT( "refLogiciel"."name" , "tblPosteLogiciel"."version") 如果您想在两者之间留一个空格，请使用： CONCAT( "refLogiciel"."name" , CONCAT( ' ', "tblPosteLogiciel “。“版本”））

# batch-file - 创建批处理文件以在多个文件夹中创建多个文件夹

> ID：12801452
> 
> 赞同：0
> 
> 时间：2012-10-09T13:42:13.617
> 
> 标签：batch-file, directory

我正在尝试创建一个批处理文件，它将在给定文件夹的所有子文件夹中创建文件夹。因此，例如，如果它在目录 C:\Example 中运行，它将在 20 个文件夹中的每个文件夹下创建一个文件夹 a、b 和 c，而不管它们的名称如何。

自动执行此操作要比将 .bat 文件复制到每个单独的文件夹以每次仅使用 md 创建 5 个相同的文件夹要容易得多。

到目前为止，我创造的一切都是一场灾难，所以我希望有人能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:46:16.027

```
for /d %%x in (*) do mkdir "%%x\a" "%%x\b" "%%x\c" 
```

# android - 如何在 DDMS 中指定 OR

> ID：12801453
> 
> 赞同：1
> 
> 时间：2012-10-09T13:42:21.933
> 
> 标签：android, ddms

我知道我可以在 DDMS 窗口中使用正则表达式，但不知道如何使用。假设，我有过滤器 1 按日志标签“A”过滤，过滤器 2 按日志标签“B”过滤，那么我在 ddms 编辑面板中打印什么，所以我有来自“A”和“B”的输出，没有别的?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:47:58.467

您可以在日志面板中使用正则表达式，假设您要按标签过滤，您可以在标签过滤器中编写：

```
^com.test.TestClassA$|^com.test.TestClassB$ 
```

它也接受简单的布尔逻辑，所以即使是这样的东西也可以工作：

```
com.test.TestClassA|com.test.TestClassB 
```

OR 条之间没有空格。

您甚至可以直接从 logcat 顶部窗口执行此操作，方法是为所需范围附加前缀：

```
tag:com.test.TestClassA|com.test.TestClassB 
```

或正则表达式

```
tag:^com.test.TestClassA$|^com.test.TestClassB$ 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:46:58.967

尝试使用正则表达式：

```
^TAG_A$|^TAG_B$ 
```

# tabs - 如何在 UITabBarController 中的两个选项卡之间传递值

> ID：12801454
> 
> 赞同：1
> 
> 时间：2012-10-09T13:42:25.357
> 
> 标签：tabs, uitabbarcontroller

我被困在一项任务中，我正在使用一个有两个选项卡的选项卡式应用程序。

在一个选项卡中，我有一个文本字段，我可以在其中输入我的详细信息，然后单击一个按钮，我想保存该文本字段数据并将其显示在第二个选项卡中。

我使用将变量作为字符串放在第二个选项卡的控制器中，并将其分配给文本字段值。它在第一个视图的控制器中被分配，但是当我试图在第二个选项卡的控制器中检索它时，我得到一个空值。

# php - 单击按钮后更改按钮的值并将其发布到php中的数据库

> ID：12801457
> 
> 赞同：-1
> 
> 时间：2012-10-09T13:42:31.113
> 
> 标签：php, phpmyadmin

stackovervlow 上有一些答案，但没有一个可以解决我的问题，我试图找到它，但我找不到它。

这是代码，我猜它一定很简单。

```
?><input type='submit' <?php echo "name= ".$Buttons[$Teller].""; ?> value='Schrijf in!'><br/><?php 
```

按下它后，一些信息会发送到数据库。但我想要**Schrijf！** *值*更改为**Schrijf uit！** 我真的找不到它，也找不到这里或谷歌:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:45:57.423

每次加载该页面时，您都必须进行数据库调用，以检查按钮是否应该显示“Schrijf in”或“Schrijf uit”。也许测试登录的用户是否已经在数据库表中或类似的东西中。然后根据该条件设置按钮值。

或者，您可以创建一个`$_SESSION`变量来跟踪用户是否已经单击了按钮。

# mysql - 根据记录的条目查找用户列表

> ID：12801458
> 
> 赞同：1
> 
> 时间：2012-10-09T13:42:33.697
> 
> 标签：mysql, distinct

对我来说，这种情况很难解释，但我想获得一份准备好参加解雇会议的用户（实际上是“患者”）列表。

**情况**

我有一个病人表：

```
PATIENT
id   (int)
name (varchar) 
```

患者遵循一个特殊的过程，我在其中定义了阶段：

```
PHASE
id   (int)
name (varchar) 
```

我记录了患者的所有阶段：

```
STATUS
id         (int)
phase_id   (int)
patient_id (int)
timestamp  (datetime) 
```

术语“准备会议”是指会议已计划好。此类计划会议记录在消息表中。计划会议的消息具有类型“meeting_planned”，例如，当会议结束时，会有一条新消息“meeting_done”。

```
MESSAGE
id         (int)
patient_id (int)
type       (enum)
value      (varchar)
timestamp  (datetime) 
```

**我的查询**

我现在正在寻找一个我真的想不出的查询。我的逻辑是：

1.  选择所有患者；
2.  最后**状态**（基于时间戳）来自阶段名称“C”或“D”；
3.  没有**类型为**meeting_planned**的**消息。

 **广告 2：患者可能处于两个阶段之一。当患者处于 A、B、E 或 F 阶段时，无法计划会议。当患者处于 C 阶段时，护士可能已经决定安排会议，但如果没有发生，它将在 D 阶段进行（D 始终跟随 C，即 A>B>C>D>E>F）。

广告 3：可能还有其他消息，但绝不是这种类型。在 type+patient_id 上有一个独特的约束。如果会议已计划并已发生，则有两条消息（类型 1 = meeting_planned，类型 2 = meeting_done）。如果尚未计划会议，则不会出现类型 meeting_planned，但可能已经设置了其他消息。

**我尝试了什么**

我现在想出了这个查询：

```
SELECT p.id, p.name, ph.name

FROM patient p

LEFT JOIN status s  ON p.id=s.patient_id
LEFT JOIN phase ph  ON ph.id=s.phase_id
LEFT JOIN message m ON p.id=m.patient_id

WHERE (ph.name='C' OR ph.name='D')
AND (ph.name != 'E')
AND (m.type != 'meeting_planned' OR m.type IS NULL) 
```

**我的问题**

在上面的查询中，我有两件事无法管理：

1.  我的名单中有双重患者。任何处于 D 阶段的患者也会作为处于 C 阶段的患者出现（所以加倍）。我尝试了`SELECT DISTINCT`但没有成功
2.  我现在根据名称排除阶段，但我想从状态中按时间戳排序阶段，并且只从那里查看最后状态

广告 1：它现在看起来像这样：

```
ID  NAME  PHASE
1   John  C
2   Jane  C
3   Tom   C
4   Pete  C
5   Anna  C
1   John  D
2   Jane  D
3   Tom   D 
```

显然我想要这个：

```
ID  NAME  PHASE
4   Pete  C
5   Anna  C
1   John  D
2   Jane  D
3   Tom   D 
```

我现在不能`GROUP BY`在这里使用，因为我必须使用`COUNT`类似或类似的分组函数。

这里有任何 SQL 大师来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:20:17.013

```
SELECT p.id, p.name, max(ph.name) as phase

FROM patient p

    LEFT JOIN status s  ON p.id=s.patient_id
    LEFT JOIN phase ph  ON ph.id=s.phase_id
    LEFT JOIN message m ON p.id=m.patient_id

WHERE (ph.name='C' OR ph.name='D')
    AND (m.type != 'meeting_planned' OR m.type IS NULL)
    AND p.id not in (
        select p.id
        from 
            patient p
            inner join
            status s on p.id = s.patient_id
            inner join
            phase ph on ph.id = s.phase_id
        where ph.name > 'D'
        ) s
group by p.id, p.name 
```**

# c# - 为什么结构中的匿名方法无法访问“this”的实例成员

> ID：12801462
> 
> 赞同：22
> 
> 时间：2012-10-09T13:42:37.067
> 
> 标签：c#

我有如下代码：

```
struct A
{
    void SomeMethod()
    {
        var items = Enumerable.Range(0, 10).Where(i => i == _field);
    }

    int _field;
} 
```

...然后我得到以下编译器错误：

> 结构中的匿名方法不能访问“this”的实例成员。

任何人都可以解释这里发生了什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T13:47:15.693

通过引用捕获变量（即使它们*实际上*是值类型；然后进行装箱）。

但是，`this`在 ValueType (struct) 中不能装箱，因此您无法捕获它。

Eric Lippert 有一篇关于捕获 ValueTypes 的惊喜的好文章。让我找到链接

*   [关于值类型的真相](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/the-truth-about-value-types)

* * *

回应 Chris Sinclair 的评论请注意：

> 作为快速修复，您可以将结构存储在局部变量中：`A thisA = this; var items = Enumerable.Range(0, 10).Where(i => i == thisA._field);`– [Chris Sinclair](https://stackoverflow.com/users/1269654/chris-sinclair) [4 分钟前](https://stackoverflow.com/questions/12801462/why-anonymous-methods-inside-structs-can-not-access-instance-members-of-this/12801567#comment17310741_12801462)

请注意，这会产生令人惊讶的情况：的*身份*与**不同**。更明确地说，如果您选择将*lambda*保留更长时间，它将通过引用捕获盒装**副本，而****不是**调用的实际实例。`thisA`**`this` ***`thisA`**`SomeMethod`*******

 ******** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:43:05.080

当您有一个匿名方法时，它将被编译成一个新类，该类将有一个方法（您定义的那个）。它还将引用您使用的超出匿名方法范围的每个变量。重要的是要强调它是该变量的引用，而不是副本。俗话说“lambdas 关闭变量，而不是值”。这意味着，如果您关闭 lambda 范围之外的变量，然后在定义匿名方法之后（但在调用它之前）更改该变量，那么您将在调用它时看到更改的值）。

那么，这一切的意义何在。好吧，如果您要关闭`this`一个结构，它是一种值类型，那么 lambda 有可能比结构更长寿。匿名方法将在一个*类*中，而不是在一个结构中，所以它会在堆上继续存在，只要它需要，你可以自由地传递对该类的引用（直接或间接）你想要的任何地方。

现在假设我们有一个局部变量，它具有您在此处定义的类型的结构。我们使用这个命名方法来生成一个 lambda，让我们暂时假设`items`返回了查询（而不是方法`void`）。然后将可以将该查询存储在另一个实例（而不是本地）变量中，并稍后在另一个方法上迭代该查询。这里会发生什么？本质上，一旦它不再在范围内，我们就会保留对堆栈上的值类型的引用。

这意味着什么？答案是，[我们不知道](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)。（请查看链接；这有点像我的论点的症结所在。）数据可能恰好相同，可能已被清零，可能已被完全不同的对象填充，无法知道。作为一门语言，C# 竭尽全力阻止你做这样的事情。诸如 C 或 C++ 之类的语言并不会那么努力地阻止您自己动手。

Now, in this particular case, it's possible that you aren't going to use the lambda outside of the scope of what `this` refers to, but the compiler doesn't know that, and if it lets you create the lambda it has no way of determining whether or not you expose it in a way that could result in it outliving `this`, so the only way to prevent this problem is to disallow some cases that aren't actually problematic.*******

# ruby - 在 RSpec 中捕获和断言 Meta 标签

> ID：12801463
> 
> 赞同：3
> 
> 时间：2012-10-09T13:42:44.007
> 
> 标签：ruby, ruby-on-rails-3, rspec

我正在尝试编写一个单元测试来断言一些元标记值（在响应部分下）。如何使用属性标签检查单个值？前任：

```
<meta property="keyword" content="site keywords" />
<meta property="description" content="site description" /> 
```

到目前为止，这就是我所得到的。但它以失败告终。

```
it "should check meta fields" do
  get :show, {:format => 'html' }
  r = response.body
  r.should have_selector('meta', :content => @site.title)
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:39:15.587

Capybara 的`have_selector`匹配器有一个选项`:text`，而不是`:content`：

```
r.should have_selector('meta', :text => @site.title) 
```

请参阅[此讨论](https://github.com/rspec/rspec-rails/issues/478)和github 上的[此讨论。](https://github.com/jnicklas/capybara/issues/525)

但是，这并不能解释为什么您的规范会失败，因为该`:content`选项被忽略了，如果有任何*更*宽松的情况，应该让您的测试。

此测试失败的最可能原因是它是从控制器规范调用的，在这种情况下响应将为空白，因为 rspec-rails[阻止 rails 实际呈现视图](https://stackoverflow.com/questions/1063073/rspec-controller-testing-blank-response-body)。如果是这种情况，您需要将规范移动到规范/请求/下的文件中，或者将指令添加[`render_views`](https://www.relishapp.com/rspec/rspec-rails/v/2-0/docs/controller-specs/render-views)到`describe`块内。

如果这不起作用，那么您必须提供有关规范上下文的更多信息，否则很难弄清楚出了什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-29T13:54:53.987

断言`<meta>`标签：

```
have_selector 'meta[property=keyword][content="site keywords"]', visible: false 
```

对于`<title>`Capybara 有一个内置的匹配器：

```
have_title 'The title of my website' 
```

# javascript - 使用 jQuery 存储数据的方式有优势吗？

> ID：12801464
> 
> 赞同：1
> 
> 时间：2012-10-09T13:42:43.213
> 
> 标签：javascript, jquery

我更了解 jQuery 如何存储数据。

做以下其中一项有什么好处：

```
$('#editCity').data('href', "xx");
var a = $('#editCity').data('href'); 
```

或者

```
$('#editCity').attr('data-href', "xx");
var a = $('#editCity').attr('data-href'); 
```

还有一个相关的问题。

如果我有这个：

```
var modal = { x: 'xx', y: 'yy' }; 
```

我也可以使用 .data( .. ) 存储它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:44:53.320

关于 data 函数最有趣的一点是你可以添加任何类型的对象，例如你的`modal`. 并且 jQuery，如[文档中所述](http://api.jquery.com/jQuery.data/)，在 DOM 更改时注意避免内存泄漏：

> jQuery.data() 方法允许我们将任何类型的数据附加到 DOM 元素上，这种方式对循环引用是安全的，因此不会出现内存泄漏。

对于字符串，内存泄漏是不可能的，但主要区别在于第一个解决方案更清晰（如果您可能在应用程序的其他部分存储字符串以外的其他数据，则更连贯），更清晰（意图很明显），并且没有t 强制 CSS 计算（DOM 没有改变）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:45:24.107

由于可能存在内存泄漏，将属性值直接存储在 DOM 元素上是有风险的。如果您仍然在使用 jQuery，那么该`.data()`机制是跟踪每个元素信息的绝妙且安全的方法。它也允许存储任意 JavaScript 数据结构，而不仅仅是字符串。

*编辑*——当您的 HTML 标记包含`data-foo`属性时，这些属性会在访问键时被隐式读取。也就是说，如果您的 HTML 如下所示：

```
<div id="div1" data-purpose="container"> 
```

然后在 jQuery 中：

```
alert( $('#div1').data('purpose') ); // alerts "container" 
```

此外，jQuery 还会对属性值进行一些“智能”分析。如果一个值看起来像一个数字，jQuery 将返回一个数字，而不是一个字符串。如果它看起来像 JSON，它会为您反序列化 JSON。

*编辑*——这是一个很好的技巧：在 Chrome 开发者控制台（“控制台”视图）中，您可以输入 JavaScript 表达式并对其进行评估。评估始终在您正在处理的页面的上下文中完成。如果您从“元素”视图中选择一个元素，那么在控制台中，JavaScript 符号`$0`将引用该选定的 DOM 元素。因此，您始终可以通过转到控制台并键入以下内容来检查元素的“数据”映射：

```
$($0).data("something"); 
```

如果不带参数调用该`.data()`函数，则返回*所有*键/值对：

```
$($0).data(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:51:02.740

它们都有优势……也就是说，99% 的时间你应该使用`.data('whatever', value)`

使用优势`.data('whatever', value)`：

*   不太容易导致内存泄漏，因为它不使用 DOM。
*   从内存中提取数据比从 DOM 中提取数据要快一些。
*   可以将任何类型的对象放入其中，而无需先将其序列化为 JSON。

使用优势`.attr('data-whatever', value)`：

*   兼容`.data('whatever')`
*   允许您按值选择元素：`$('[data-whatever=foo]')`
*   您可以将任何对象放入其中，但如果它是复杂类型，则需要对其进行序列化。

# sql - 打开/关闭 sql 连接 - 冗余代码

> ID：12801472
> 
> 赞同：3
> 
> 时间：2012-10-09T13:43:10.840
> 
> 标签：sql, database, vb.net

我想知道避免以下情况的最基本方法是什么。

```
 con.ConnectionString = connection_String
    con.Open()
    cmd.Connection = con

    'database interaction here

    cmd.Close() 
```

我在我的项目中一直在做这些行，但我认为必须有更好的方法来节省一遍又一遍地打字。它使代码看起来比现在更加草率！

结束了这个，对我来说效果很好。谢谢您的帮助 ：）

```
Public Sub connectionState()
    If con.State = 0 Then
        con.ConnectionString = connection_String
        con.Open()
        cmd.Connection = con
    Else
        con.Close()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:58:39.647

您可以尝试创建一个类（单例类），并在该类中编写数据库连接语法代码和异常，然后将一个对象调用到主类以创建数据库连接，这是性能上最好的方法，并且保持编写相同代码不断...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:07:58.053

这就是很多程序员想要创建一个“数据库层”的地方，该“数据库层”具有如下所示的方法签名的变体：

```
Public DataSet ExecuteSQL(ByVal sql As String) As DataSet 
```

这使您可以将所有样板连接代码隔离在一个地方。一个sql命令串进去，数据出来。简单的。

*不要这样做！*

这是朝着正确的方向前进，但有一个非常大的缺陷：它迫使您使用字符串操作将参数值替换到您的 sql 查询中。这会导致可怕的 sql 注入安全漏洞。

相反，请确保在方法中包含一些机制来分别提示输入 sql 参数。这通常以函数的附加参数的形式出现，并且可以像 KeyValuePairs 数组一样简单。如果您对 lambdas 感到满意，我的首选模式如下所示：

```
Public Iterator Function GetData(Of T)(ByVal sql As String, ByVal addParameters As Action(Of SqlParameterCollection), ByVal translate As Func(Of IDatarecord, T)) As IEnumerable(Of T)
    Using cn As New SqlConnection("connection string"), _
          cmd As New SqlCommand(sql, cn)

        addParameters(cmd.Parameters)

        cn.Open()
        Using rdr As SqlDataReader = cmd.ExecuteReader()
            While rdr.Read()
                Yield(translate(rdr))
            End While
        End Using
    End Using
End Function 
```

要调用该函数，您可以执行以下操作：

```
Dim bigCustomers = GetData("SELECT * FROM Customers WHERE SalesTotal > @MinSalesTotal", _
                   Sub(p) p.Add("@MinSalesTotal", SqlDbType.Decimal, 1000000), _
                   MyCustomerClass.FromIDataRecord) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:58:53.860

您可以使用 just `using block`，在处理结束时对非托管对象使用 execute dispose 。

链接： http: [//msdn.microsoft.com/en-us/library/htd05whh (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/htd05whh(v=vs.80).aspx)

# active-directory - LDAP 浏览器出现 AD 错误

> ID：12801474
> 
> 赞同：1
> 
> 时间：2012-10-09T13:43:15.807
> 
> 标签：active-directory, ldap

我正在尝试通过 LDAP 浏览器使用自定义架构连接到 Active Directory。

得到以下错误。

> 通信错误
> 服务器 'ldap:// tat domain:port 已关闭或不可用。重新连接？

正确提供了连接绑定凭据，并且 AD 服务已启动并正在运行。我在这里还缺少什么其他东西吗？

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:03:12.273

*   检查提供给 LDAP 客户端的主机名和端口是否正确。
*   检查目录服务器是否支持通信安全级别（SSL、StartTLS、非安全），以及连接安全的预期安全级别是否与提供给 LDAP 客户端的端口匹配。
*   使用已知的好工具`ldapsearch`（可能激活详细和调试选项）以提供给 LDAP 客户端的相同参数连接到目录服务器。

# c# - serialPort.DataReceived 在线程中运行不起作用

> ID：12801475
> 
> 赞同：0
> 
> 时间：2012-10-09T13:43:16.307
> 
> 标签：c#, multithreading, compact-framework, serial-port

我正在一个线程中检查 GPRS 连接`CompactFramework`。

线程的想法很简单：如果程序没有连接，那么我运行代码来连接（这段代码给了我错误），但如果连接正常，我会在 60 秒后再次检查，依此类推。

现在，专注于连接代码。以下代码检查它是否已连接，如果未连接，则我订阅`DataReceive`事件。

```
void initFormText()
{
    if (isThereConnect()) //true if it is connected
    {
       //enable timer to recheck if it's connected
    }
    else //it isn't connected
    {  

        serialPort1.DataReceived += new System.IO.Ports.SerialDataReceivedEventHandler(serialPort1_DataReceived);
        if (serialPort1.IsOpen)
        {
            serialPort1.Close();
        }
        serialPort1.Open();   

        timerStep.Enabled = true;
    }    
} 
```

现在问题来了，在 serialPort1_DataReceived 我检查数据并设置一个由 timerStep 测试的变量并执行一些步骤。

**问题发生**在 DataReceived 事件中，问题是当我在线程之外运行以下代码时它工作正常，它完成所有工作并建立连接，**但**在线程中它不起作用。我测试这个添加了一些`MessageBox`，我意识到 DataReceive 中的那些永远不会出现。

```
void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
    byte[] data = new byte[1024];
    int n = serialPort1.Read(data, 0, data.Length);
    string rec = Encoding.GetEncoding("windows-1252").GetString(data, 0, n);

    if (string.IsNullOrEmpty(rec))
    {
        return;
    }

    if (rec.Contains("AT+CIMI") && rec.Contains("OK"))
    {
        MessageBox.Show("serialPort 1");
        currState = 1;
    }
    else if (rec.Contains("READY"))
    {
        MessageBox.Show("serialPort 11");
        currState = 1;
    }
    else if (rec.Contains("0,1") || rec.Contains("0,5"))
    {
        MessageBox.Show("serialPort 2");
        currState = 2;
    }
} 
```

所以由于某种原因，serialPort 没有收到任何东西，我不知道为什么。它在线程之外工作但不在线程中工作的事实让我感到沮丧。

我很感激任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:51:07.377

该事件必须在您已经声明 serialPort1 的同一线程（我想是 UI 线程）中运行。您可以在不同的线程中执行来自 serialPort1_DataReceived 事件的代码。该线程应该由 serialPort1_DataReceived 事件处理程序启动。问题是 CompactFramework 没有 ParameterisedThreadStart 所以你不能有效地将接收到的数据传递给线程。您将需要使用委托设置一些全局字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:54:58.087

是的，但我认为您的线程在事件触发之前完成。您应该按照以下方式创建表单，请注意这是桌面代码，但模拟了 CompactFramework 中可用的内容，因为我没有在此处安装它。第一个 Form1 是主窗体，它启动线程，其中是 Form2。Form2 有一个正在工作的按钮和 Click EventHandler，但您需要使用 Application.Run() 显示您的 Form2。这是示例代码：

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Thread thread = new Thread(new ThreadStart(ThreadMethod));
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
    }
    void ThreadMethod()
    {
            Form2 f = new Form2();
            Application.Run(f);
    }
}  

public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Something");
    }
} 
```

希望它会以这种方式工作。

# java - 找不到类 FOP

> ID：12801477
> 
> 赞同：7
> 
> 时间：2012-10-09T13:43:22.167
> 
> 标签：java, apache-fop

嗨所以我正在尝试使用 FOP 将 xml 文件转换为 pdf 并且我一直遇到错误，现在我有错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/xmlgraphics/io/ResourceResolver
at org.apache.fop.apps.FopConfParser.<init>(FopConfParser.java:122)
at org.apache.fop.apps.FopFactory.newInstance(FopFactory.java:132)
at run.ExampleFO2PDF.main(ExampleFO2PDF.java:62) 
```

我在构建路径中有*FOP*库以及*xmlgraphics*和*commons 日志记录*和*Avalon 框架*

这是我要运行的代码

```
 import java.io.BufferedOutputStream;
        import java.io.File;
        import java.io.FileNotFoundException;
        import java.io.FileOutputStream;
        import java.io.IOException;
        import java.io.OutputStream;

        import javax.xml.transform.Result;
        import javax.xml.transform.Source;
        import javax.xml.transform.Transformer;
        import javax.xml.transform.TransformerConfigurationException;
        import javax.xml.transform.TransformerException;
        import javax.xml.transform.TransformerFactory;
        import javax.xml.transform.sax.SAXResult;
        import javax.xml.transform.stream.StreamSource;

        import org.apache.fop.apps.*;
        import org.xml.sax.SAXException;

       public class pdf{
        public static void main(String[] args) throws SAXException, IOException, TransformerException
  {
        FopFactory fopFactory = FopFactory.newInstance(new File("."));
                OutputStream out = new BufferedOutputStream(new FileOutputStream(new File("D:/temp/myfile.pdf")));
                try {
                  Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, out);
                  TransformerFactory factory = TransformerFactory.newInstance();
                  Transformer transformer = factory.newTransformer(); // identity transformer
                  Source src = new StreamSource(new File("D:/temp/test.xml"));
                  Result res = new SAXResult(fop.getDefaultHandler());
                  transformer.transform(src, res);
                } finally {
                  //Clean-up
                  out.close();
                }
           }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-20T07:17:07.660

```
abstract interface org.apache.fop.apps.MimeConstants implements org.apache.xmlgraphics.util.MimeConstants 
```

`org.apache.xmlgraphics.util.MimeConstants`属于**xmlgraphics-commons-1.5.jar**。只需在您的类路径中包含**xmlgraphics-commons-1.5.jar 即可**解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:09:15.900

我猜你已经知道了这个 - 但无论如何对于那些还没有的人：FOP 1.1 的主干确实有 FopConfParser 引用 xmlgraphics.io.ResourceResolver

[http://svn.apache.org/viewvc/xmlgraphics/fop/trunk/src/java/org/apache/fop/apps/FopConfParser.java?view=markup](http://svn.apache.org/viewvc/xmlgraphics/fop/trunk/src/java/org/apache/fop/apps/FopConfParser.java?view=markup)

并且 xmlgraphics commons 的主干确实有 ResourceResolver：

[http://svn.apache.org/viewvc/xmlgraphics/commons/trunk/src/java/org/apache/xmlgraphics/io/ResourceResolver.java?view=log](http://svn.apache.org/viewvc/xmlgraphics/commons/trunk/src/java/org/apache/xmlgraphics/io/ResourceResolver.java?view=log)

因此，作为解决方案，更新到主干！快乐编码:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-18T11:16:13.573

真的很老的线程，但我花了很长时间来解决这个问题，所以从 FOP 1.1 迁移到 2.0 在 pom 中进行了这样的更改：

从：

```
<dependency>
    <groupId>org.apache.xmlgraphics</groupId> 
    <artifactId>fop</artifactId> 
    <version>1.1</version>
</dependency> 
```

至：

```
 <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>fop</artifactId>
            <version>2.0</version>
            <exclusions>
                <exclusion>                  
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>xmlgraphics-commons</artifactId>
                </exclusion>  
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>batik-svg-dom</artifactId>
                </exclusion>  
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>batik-bridge</artifactId>
                </exclusion>  
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>batik-awt-util</artifactId>
                </exclusion>  
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>batik-gvt</artifactId>
                </exclusion>  
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>batik-transcoder</artifactId>
                </exclusion>  
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>batik-extension</artifactId>
                </exclusion>  
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>batik-ext</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>xmlgraphics-commons</artifactId>
            <version>2.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-svg-dom</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-bridge</artifactId>
            <version>1.8</version>
        </dependency>    
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-awt-util</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-gvt</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-transcoder</artifactId>
            <version>1.8</version>
            <exclusions>
                <exclusion>
                    <groupId>org.apache.xmlgraphics</groupId>
                    <artifactId>fop</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-extension</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-ext</artifactId>
            <version>1.8</version>
        </dependency>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T10:43:20.937

旧线程，为完整性添加了更多内容。

从 0.92b 更新到 FOP 1.1 时，我遇到了类似的问题，但找不到 MimeConstants 类。

我通过在我正在使用的 FOP 版本的源代码分发中使用 xmlgraphics-commons 版本来解决它。

尝试使用构建您的 FOP 版本时使用的 xmlgraphics-commons jar，该 jar 可以在 FOP 源代码分发的 lib 文件夹中找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:32:40.037

我找不到`xmlgraphics`罐子，但我确实找到[了 xmlgraphics-commons](http://mvnrepository.com/artifact/org.apache.xmlgraphics/xmlgraphics-commons)。这是你的意思吗？

从我上面链接的页面来看，它似乎不包含一个`org.apache.xmlgraphics.io`包，但它确实包含`org.apache.xmlgraphics.util.io`. 也许你的意思是那个？

# linq - linq 和 datagridview

> ID：12801478
> 
> 赞同：0
> 
> 时间：2012-10-09T13:43:22.713
> 
> 标签：linq, datagridview

为什么下面只显示网格内字段的长度而不显示数据？（网格中的列标题也是长度）

```
dim q as IQueryable = (from p in DB.Table select p.field1) 
```

虽然这显示了列和数据

```
dim q as IQueryable = (from p in DB.Table select p.field1, p.field2) 
```

两个字段都是字符串

提前致谢

# iphone - 将 NSFetchedResultsController 作为属性传递

> ID：12801484
> 
> 赞同：0
> 
> 时间：2012-10-09T13:43:47.530
> 
> 标签：iphone, ios, uitableview, nsfetchedresultscontroller

我的应用程序中有一个工作流程，用户将在其中构建复合过滤器，然后按下按钮查看过滤器的结果。

在构建过滤器的屏幕中，他们可以从字段列表中进行选择并设置值应该是什么。还有一个`UILabel`显示有多少结果与当前选择的过滤器匹配。

我使用 NSFetchedResultsController 来更轻松地获取计数和更改谓词等...

当用户按下“下一步”（或任何标记的按钮）时，他们将查看包含这些结果的 TableView。

`NSFetchedResultsController`将in 传递给 tableViewController是不好的做法吗？

或者我应该只传递构建新的`NSFetchedResultsController`（即`NSPredicate`）所需的信息。

我可以这样做，只是不确定这两种方法是否有任何优点/缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:58:58.130

NSFetchedResultsController 上有一个委托。在传递 NSFetchedResultsController 时，您必须分配一个新的委托，并且当您根据按下该按钮移除您呈现的视图控制器时，您必须再次分配该委托。还要记住，当您更改 NSFetchedResultsController 的 fetch 请求的谓词时，您正在执行另一个 fetch。基本上，您正在使您的架构复杂化，而基本上一无所获。创建一个新的 NSFetchedResultsController 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:59:39.107

NSFetchedResultsController 确实是您对 tableView 所需要的。

# javascript - 隐藏侧边栏 - marginRight / 使用 Javascript 显示 CSS 错误

> ID：12801487
> 
> 赞同：1
> 
> 时间：2012-10-09T13:43:58.187
> 
> 标签：javascript, jquery, css, hide, sidebar

当窗口的大小调整到某个宽度以下时，我想删除侧边栏。然后在窗口展开时再次显示。

html:

```
<style type="text/css">
    #sidebar{
       width:290px;
       float:right;
       /*...*/
    }
    #header{
       margin-right:290px;
       /*...*/
    }
    #navigation{
       margin-right:290px;
       /*...*/
    }
    #page{
       margin-right:290px;
       /*...*/
    }
</style>
<div id="wrapper">
    <div id="sidebar">
        ...
    </div>
    <div id="header">
        ...
    </div>
    <div id="navigation">
        ...
    </div>
    <div id="page">
        ...
    </div>
</div> 
```

Javascript：

```
<script type="text/javascript"><!--
function sbar_check(){

    var page = $("#page");
    var header = $("#header");
    var navigation = $("#navigation");
    var sidebar = document.getElementById("sidebar");

    //get width of page
    var pagew = page.width();

    if(pagew < 451) {

        //hide
        sidebar.style.display = 'none';

        header.css('marginRight',   '0');
        navigation.css('marginRight',   '0');
        /*
        //error
        page.css('marginRight',     '0');
        */

    } else {

        //show
/*
            header.css('marginRight',   '290');
            navigation.css('marginRight',   '290');
            page.css('marginRight',     '290');
*/

            sidebar.style.display = 'block';
    }

}

//initial sidebar check
$().ready(function(){
    sbar_check();
});
//sidebar check on resize
window.onresize = function(event){
    sbar_check();
};
//--></script> 
```

导致意外行为的行用 //error 标记。如果我不注释此行，标题和导航容器都会展开并且侧边栏会被删除。但是，如果我取消注释该行，则不会删除侧边栏。

我对这种行为没有任何解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:46:54.883

一种更简洁的方法是使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

```
@media (max-width: 451px) { /*when the screen is less than 451px wide*/
    #sidebar {
        display: none; /*hide the sidebar*/
    }
    /*more CSS to change margins, etc...*/
} 
```

# c# - 使用实体框架查询填充 DTO 类 List<>

> ID：12801488
> 
> 赞同：2
> 
> 时间：2012-10-09T13:43:58.740
> 
> 标签：c#, entity-framework

是否可以从 EF 查询中填充列表？我的 DTO 如下：

```
public DTO()
{
  public string ClientName { get; set;}
  public List<string> RelatedCodes { get; set;}
} 
```

我填充 DTO 的方法 =

```
Public DTO MyResult(string ClientCode)
{
   return (from o in repository.RelatedClient 
           where o.LeadCode == ClientCode 
           select new DTO { ClientName = o.ClientName, RelatedCodes = o.RelatedCodes.ToList()});
} 
```

我知道我不应该在查询中添加 ToList() ，或者如果我可以这样做的话，我做错了。任何人都可以建议这是如何完成的。对于这个示例，我的 DTO 被削减了，但是如果可能的话，我希望在一个 DTO 中拥有许多单个属性和一个 List<>（或多个 List），并带有一个实体查询？

所以下面的答案我认为没有办法直接查询这个。我原来的选择是：

```
Public DTO MyResult(string ClientCode)
{
         var temp = (from o in repositry.RelatedCode Where o.LeadCode == ClientCode select o).ToList();

          DTO dto = (from o in repository.LeadClient Where o.LeadCode == ClientCode Select o.ClientName).Firstordefault();

         foreach(string rc in temp)
            {    dto.RelatedCode.Add(rc);}  
         return dto;

  } 
```

我对此感到满意，但如果有人能建议这是否是在没​​有自动映射器之类的情况下处理的正确方法，我将不胜感激。我正在尝试学习实体框架并想检查我是否缺少一些内置功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:50:12.360

就像是：

```
var dtoEntity = repo.RelatedClient.SingleOrDefault(x => x.LeadCode == ClodeCode);

DTO d = new DTO();
d.ClientName = dtoEntity.ClientName;
foreach (var relatedCode in dtoEntity.RelatedCodes)
{
    d.RelatedCodes.Add(relatedCode);
}

return d; 
```

* * *

使用这种方法，您可以添加任意数量的属性。但是，我建议为此使用 AutoMapper。

在这里阅读更多：

[http://nuget.org/packages/automapper](http://nuget.org/packages/automapper)

# java - 如何使用 servlet 运行一个简单的连接 url 程序？

> ID：12801491
> 
> 赞同：0
> 
> 时间：2012-10-09T13:44:00.127
> 
> 标签：java, url, servlets, connection

以下代码存在于

[http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html)

哪个是oracle教程网站。

我的问题是理解 servlet。正如您在页面底部的文档中看到的那样：

如果您的 ReverseServlet 位于[http://example.com/servlet/ReverseServlet](http://example.com/servlet/ReverseServlet)，那么当您使用

[http://example.com/servlet/ReverseServlet](http://example.com/servlet/ReverseServlet) “逆转我”

为了运行这个例子，我用这个链接测试了我的程序

[http://docs.oracle.com/javase/tutorial/networking/urls/examples/ReverseServlet.java](http://docs.oracle.com/javase/tutorial/networking/urls/examples/ReverseServlet.java) “逆转我”

我得到了这个错误：

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 403 for URL: http://docs.oracle.com/javase/tutorial/networking/urls/examples/ReverseServlet.java
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
    at DemoURL.main(DemoURL.java:28) 
```

是我的 ReverseServlet 所在的地方还是我完全错了。如果这不是正确的方法，我该如何运行这个程序来检查教程中的这个例子？

这是我更改类名的代码：

```
 import java.io.*;
    import java.net.*;
    public class DemoURL {
        public static void main(String[] args) throws Exception {

            if (args.length != 2) {
                System.err.println("Usage:  java Reverse "
                    + "http://<location of your servlet/script>"
                    + " string_to_reverse");
                System.exit(1);
            }

            String stringToReverse = URLEncoder.encode(args[1], "UTF-8");

            URL url = new URL(args[0]);
            URLConnection connection = url.openConnection();
            connection.setDoOutput(true);

            OutputStreamWriter out = new OutputStreamWriter(connection.getOutputStream());

            out.write("string=" + stringToReverse);
            out.close();

            BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            String decodedString;
            while ((decodedString = in.readLine()) != null) {
                System.out.println(decodedString);
            }
            in.close();

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:49:46.313

您使用的[网址 http://docs.oracle.com/javase/tutorial/networking/urls/examples/ReverseServlet.java](http://docs.oracle.com/javase/tutorial/networking/urls/examples/ReverseServlet.java)不包含反向 servlet 的运行版本，仅包含源代码。

如果您想运行 servlet，您需要自己编译并将 servlet 部署到您选择的 servlet 容器中，例如[Tomcat](http://tomcat.apache.org)、[Jetty](http://jetty.codehaus.org/jetty/)或类似容器。servlet 容器处理接受请求、解析请求并将请求传递给 servlet。

以下是如何（相对）轻松地运行 servlet[部署 Java servlet 的最快方式](https://stackoverflow.com/questions/7032047/fastest-way-to-deploy-a-java-servlet)的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:51:23.597

> 如果您的 ReverseServlet 位于[http://example.com/servlet/ReverseServlet](http://example.com/servlet/ReverseServlet)

这意味着您需要创建自己的 Servlet。

# php - Drupal - 在文章正文中添加方形广告

> ID：12801509
> 
> 赞同：0
> 
> 时间：2012-10-09T13:44:36.020
> 
> 标签：php, html, drupal

我需要在网站上所有文章的中间插入一个 google adsense 方框。最好的方法是什么？

该站点在drupal中，所以我认为我可以连接到视图节点功能。这样广告就不会与文章一起保存。那有意义吗？如果是这样，那么问题是我如何确保我不会在广告的另一侧出现图像（广告向左对齐，应该占据文章宽度的 50%）？

我应该使用块吗？但是我怎么知道将块放在块内。

所以简而言之，我真的不知道从哪里开始实施它......这个东西是如何在所有新闻网站中实施的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T20:59:02.960

这个解决方案适用于 Drupal 7。对我有用的解决方案是我使用了 adsense 标签格式，然后使用这种格式在网站上展示广告。请注意，此行不需要任何 js 包含或脚本标记。您只需要启用 Adsense 标记格式（我的意思是短代码）。实际上，我正在为管理员禁用广告，而对于其他用户，我得到的是空白广告，页面上已占用空间，但没有显示任何内容。经过不同的调整和实验后，我得到了以下代码为我工作

[adsense:336x280:XXXXXXXXXX]

第二个参数是宽 x 高第三个参数：XXXXXXXXXX 表示谷歌广告位/id。

我希望这对其他人有帮助。

阿塔·穆斯塔法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:53:11.900

我会通过实现一个自定义输入过滤器来处理它，该过滤器会将 AdSense 代码（或[AdSense 模块](http://drupal.org/project/adsense)短代码，如果需要）插入到处理后的文本中。实现该自定义过滤器后，您必须以用于内容类型的文本格式启用它。

[要实现自定义过滤器，请在此处](http://drupal.org/project/examples)查看 filter_example 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T14:11:35.377

> 我需要在网站上所有文章的中间插入一个 google adsense 方框。最好的方法是什么？

根据我的经验：
在一些 drupal 网站上，我使用简单的节点编辑器将带有 adsense 的框放入内容中。对于节点不多的网站，它的最佳解决方案是：
1) Box 完美适合其余内容 - 您可以手动更改它。
2) 完全控制查看的框-图像、flash、文本添加等。
但是

对于具有许多节点的网站，这种解决方案看起来像是愚蠢的自杀。
更好的选择是更改主题文件夹中的 node.tpl 文件。但是有一些麻烦。
在此文件中，您有 $content 变量，其中包含此节点中的所有内容。这种情况使您能够将盒子向上或向下放置在该节点上。但是中间没有。也许解决方案是将 $content 分成 2x 个变量，其中包含一半的内容。但问题是——怎么办？或者也许当来自节点的内容被保存到数据库中时，你可以把一些带有adsense框的html代码？并通过正则表达式搜索放置框的最佳位置？或者可以通过直接在数据库中添加 html 框来更改所有节点？

> 我应该使用块吗？但是我怎么知道将块放在块内。

我记得，你不能把块放在另一个块里面。

# java - 在 xmmp 中接收消息

> ID：12801517
> 
> 赞同：-1
> 
> 时间：2012-10-09T13:45:07.300
> 
> 标签：java, android, xmpp

如何接收来自服务器的消息？我有一部分可以向服务器发送消息但不能从服务器接收消息？它应该怎么做？我使用 xmpp 作为传输协议

```
package com.example.xmpp.asmack;

import org.jivesoftware.smack.Chat;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;

    public class XMPPAsATransportProtocol extends Activity implements OnClickListener {
        XMPPConnection conn;
        TextView output;
        final String HOST = "vps01.fit3140hack.org";
        final int PORT = 5222;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Log.d("xmppasatransportprotocol", "got to start");
            setContentView(R.layout.main);
            View createbutton = findViewById(R.id.button1);
            View messagebutton = findViewById(R.id.button2);
            View closebutton = findViewById(R.id.button3);
            output = (TextView) findViewById(R.id.textView2);
            Log.d("xmppasatransportprotocol", "got buttons");

            createbutton.setOnClickListener(this);
            messagebutton.setOnClickListener(this);
            closebutton.setOnClickListener(this);
        }

        private void sendMessage() throws XMPPException {
            Log.d("xmppasatransportprotocol", "sendmessage");
            Chat chat = conn.getChatManager().createChat("22686274test2@" + HOST, null);
            EditText message = (EditText)findViewById(R.id.editText1);
            chat.sendMessage(message.getText().toString());
        }
        private void openConnection() throws XMPPException {
            Log.i("xmppasatransportprotocol", "openconnection");
            ConnectionConfiguration config = new ConnectionConfiguration(HOST, PORT);
            config.setSASLAuthenticationEnabled(true);
            conn = new XMPPConnection(config);

            conn.connect();
            conn.login("22686274test1", "dummy");
        }
        private void closeConnection() {
            Log.i("xmppasatransportprotocol", "closeconnection");

            conn.disconnect();
        }

        public void onClick(View v) {
            try {
                switch(v.getId()) {
                    case R.id.button1:
                        openConnection();
                        Log.i("xmppasatransportprotocol", "Connected to " + HOST + ":" + PORT);
                        output.setText("Connected to " + HOST + ":" + PORT);
                        break;
                    case R.id.button2:
                        sendMessage();
                        Log.i("xmppasatransportprotocol", "message sent");
                        EditText message = (EditText)findViewById(R.id.editText1);
                        output.setText("Message sent:\n" + message.getText().toString());
                        break;
                    case R.id.button3:
                        closeConnection();
                        output.setText("Disconnected");
                        break;
                    default:    
                        throw new Exception("screwed up exception");
                }
            } catch (Exception e) {
                Log.d("xmppasatransportprotocol", "exception caught:" + e.getMessage());
                output.setText("Error: " + e.getMessage());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:09:36.960

1.  确保您有在服务器中使用的帐户。

2.  你需要倾听错误。将侦听器附加到相应的连接发布者，如 conn.addConnectionCreationListener 等。为此，您需要实现 MessageListener、ConnectionCreationListener、org.jivesoftware.smack.ConnectionListener、PacketListener 等接口。在实现这些接口时，覆盖 connectionClosedOnError(Exception e) 可能会让您知道出了什么问题，在被覆盖的方法 processPacket(Packet packet) 中，您应该检查如下错误：

    ```
    if (packet.getError() != null) 
    {
        Exception e = new XMPPException(packet.getError())
        System.out.println(e);
    } 
    ```

# jquery - 如何通过 JQuery 访问 HTML DOM

> ID：12801518
> 
> 赞同：0
> 
> 时间：2012-10-09T13:45:06.830
> 
> 标签：jquery

对 JQuery 有点陌生，我不知道如何做到这一点：

我需要通过 JQuery 更改 DOM：

```
<li id="1_1_4" class="ui-widget-content ui-selectee">1.1.4</li> 
```

对此：

```
<li id="1_1_4" class="ui-widget-content ui-selectee ui-selected">1.1.4<span class="ui-icon ui-icon-check"
                style="float: right; margin: 2px 7px 0 0;"></span></li> 
```

**编辑：** 另外，如果我想恢复它，这意味着有一个`<Span>`并且我想删除它。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:47:42.547

## 附加

```
$(document).ready(function() {
  $('#1_1_4').append('<span class="ui-icon ui-icon-check" style="float: right; margin: 2px 7px 0 0;"></span>');
}); 
```

## 消除

```
$(document).ready(function() {
   $('#1_1_4 .ui-icon-check').remove();
}); 
```

或者

```
$(document).ready(function() {
   $('#1_1_4 span').remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:46:55.463

你可以使用 jQuery 的 .append() 函数：

```
$('.ui-widget-content .ui-selectee .ui-selected').append("<span class='ui-icon ui-icon-check' style='float: right; margin: 2px 7px 0 0;'></span>"); 
```

或者：

```
$('#1_1_4').append("<span class='ui-icon ui-icon-check' style='float: right; margin: 2px 7px 0 0;'></span>"); 
```

参考。 [http://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:46:48.360

见这里[http://api.jquery.com/category/manipulation/dom-replacement/](http://api.jquery.com/category/manipulation/dom-replacement/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:48:37.077

用这个：

```
 $( "#1_1_4" ).append( "<span class=\"ui-icon ui-icon-check\" style=\"float: right; margin: 2px 7px 0 0;\"></span>" ); 
```

# opengl - 在 64x 模式下编译 OpenGL 时出错

> ID：12801528
> 
> 赞同：0
> 
> 时间：2012-10-09T13:45:42.027
> 
> 标签：opengl

我刚刚安装了 OpenGL 库（实际上大部分源代码已经在我的计算机中完成）并且我尝试编译第一个程序。

但是，对于 x86，对于 x64，我配置并重定向 glut32.lib

> C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib

到

> C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib\x64

出现如下错误，我不知道如何解决这个问题。错误似乎我没有正确链接库？

```
error LNK2019: unresolved external symbol __imp_glutSwapBuffers referenced in function "void __cdecl drawcube(void)" (?drawcube@@YAXXZ)
error LNK2019: unresolved external symbol __imp_glutMainLoop referenced in function main
error LNK2019: unresolved external symbol __imp_glutIdleFunc referenced in function main
error LNK2019: unresolved external symbol __imp_glutDisplayFunc referenced in function main 
```

我的测试代码是这样的

```
<!-- language: cpp -->
void drawcube(void)
{

    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0, 1.0, 1.0);
    glMatrixMode(GL_MODELVIEW);
    glRotatef(angle, 0.0, 1.0, 0.0);
    glBegin(GL_LINE_LOOP);
    glVertex3iv(a);
    glVertex3iv(b);
    glVertex3iv(c);
    glVertex3iv(d);
    glEnd();
    glFlush();
    glutSwapBuffers();
}

<!-- language: cpp -->
int main(int argc, char **argv)
{

    glutInit(&argc, argv);
    glutInitWindowSize(800, 600);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);
    glutCreateWindow("Test OpenGL");
    glutDisplayFunc(drawcube);
    glutIdleFunc(drawcube);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-30.0, 30.0, -30.0, 30.0, -30.0, 30.0);
    glRotatef(30.0, 1.0, 0.0, 0.0);
    glMatrixMode(GL_MODELVIEW);
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glutMainLoop();

    return(0);
} 
```

* * *

@datenwolf 的回答很有用。

我只是更改为在 x64 中编译使用 freegult 而不会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:49:40.760

> 我刚刚安装了 OpenGL 库（实际上大部分源代码已经在我的计算机中完成），我尝试编译第一个程序。

嗯？您的意思是您安装了支持 OpenGL 的驱动程序（即从 GPU 制造商的网站下载驱动程序，而不是使用 Windows 附带的残缺驱动程序）？OpenGL 通常不以库的形式出现。它是一种规范，通常以驱动程序的形式存在其实现。此外，您不需要特殊的“OpenGL SDK”，因为所有编译器都附带编译 OpenGL 程序所需的一切。无论您安装什么，您可能都不需要它，而且它弊大于利。

> ```
> error LNK2019: unresolved external symbol __imp_glutSwapBuffers referenced in function "void __cdecl drawcube(void)" (?drawcube@@YAXXZ) 
> ```

好吧，那不是 OpenGL，那是 GLUT。GLUT 不是 OpenGL 的一部分。它是一个 3rd 方框架库，用于创建小而简单的 OpenGL 演示。*您实际上必须单独安装在系统上的那个。*我建议使用 FreeGLUT（或者根本不使用 GLUT）。与 OpenGL 在 32 位和 64 位架构上的 DLL 都称为 opengl32.dll 不同，您需要特定于架构的 GLUT 版本才能正确编译。旧的 GLUT 未维护，因此没有 64 位版本。因此我对 FreeGLUT 的推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T12:11:53.000

我做了简单的步骤，它对我有用 1）项目属性 2）将配置设置为所有配置集 3）将 PLATFORM 设置为 ALL PLATFORM 添加然后添加库，包括头文件。如果不起作用，则从主项目窗口 Ex 更改配置和平台。调试/发布和 x64/x86 等等.. 它会工作

# php - 如何使用 php simpleXML 获取多个 XML 元素属性

> ID：12801529
> 
> 赞同：0
> 
> 时间：2012-10-09T13:45:42.850
> 
> 标签：php, xml, simplexml

我有这个 XML

```
<STOREITEMS>
  <CREATED value="Tue Oct 9 5:30:01 BST 2012">
    <CATEGORY id="442" name="Hen And Stag Nights"></CATEGORY>
    <CATEGORY id="69" name="Games"></CATEGORY>
    <CATEGORY id="252" name="Love Zone"></CATEGORY>
    <CATEGORY id="202" name="Spotlight  Items"></CATEGORY>
  </CREATED>
</STOREITEMS> 
```

我需要使用 PHP 获取 Category - name 属性

到目前为止我有这个

```
$xml = simplexml_load_file("http://www.dropshipping.co.uk/catalog/xml_id_multi_info.xml");

foreach($xml->CATEGORY['name']->attributes() as $category)    
{    
    echo $category; 
} 
```

然而，这会返回致命错误：调用非对象上的成员函数属性（）

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:10:14.287

`CATEGORY`节点嵌套在节点内`CREATED`，因此您需要在那里访问它，并且访问`CATEGORY['name']->attributes()`没有意义，因为这将尝试访问`name`第一个`CATEGORY`节点的属性上不存在的属性。

那么你想检索所有节点的名称属性值`CATEGORY`，还是所有`CATEGORY`节点，或者可能只有那些`CATEGORY`具有`name`属性的节点？

所有`CATEGORY`节点：

```
foreach($xml->CREATED->CATEGORY as $category)
{
    echo $category['name'] . '<br />';
} 
```

只有`CATEGORY`节点名称属性：

```
foreach($xml->xpath('//CATEGORY/@name') as $name)
{
    echo $name . '<br />';
} 
```

只有`CATEGORY`具有 name 属性的节点：

```
foreach($xml->xpath('//CATEGORY[@name]') as $category)
{
    echo $category['name'] . '<br />';
} 
```

# perl - 为什么 Perl 的字符串乘法不会在 undef 上发出警告？

> ID：12801530
> 
> 赞同：20
> 
> 时间：2012-10-09T13:45:48.657
> 
> 标签：perl, warnings, undef

在下面

```
use strict;
use warnings;
my $foo = undef; 
```

表达式

```
$foo . '' 
```

和

```
"$foo" 
```

两者都生产

```
Use of uninitialized value $foo in ... at ... 
```

但下面的表达式给出了空字符串而没有警告：

```
$foo x 1 
```

Anyone knows why? I mean, it's cool to have a nice stringification idiom (`$_ x 1` is quite much shorter than `defined ? "$_" : ''`), but it feels a bit weird.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T18:00:46.740

我曾经在法学院的课堂上看过一个有场景的节目。讲师向他的学生展示了两个类似的案例，并询问他们为什么会导致不同的裁决。这是因为裁决是由法官做出的，而法官是人，他最终解释说。

那应该警告。从事 Perl 工作的开发人员是人。如果您愿意，请运行`perlbug`以发送错误报告。

# sql - 如何在存储过程中使用 DROP TABLE 等命令

> ID：12801533
> 
> 赞同：3
> 
> 时间：2012-10-09T13:45:57.780
> 
> 标签：sql, oracle, stored-procedures, oracle10g

我写了一个脚本，它打算在夜间运行以复制昨天的表、删除昨天的表、创建新表，然后比较更改。这作为计划任务运行良好，但我真的很难找到一种允许用户动态执行它以进行测试的方法。

我真正想做的是将它全部打包到一个存储过程中，因为我有一个 eForm 工具，它可以很容易地让用户（非常非技术性）能够通过单击来执行该过程。

这是脚本开始的示例。谁能帮我把它硬塞进一个存储过程，因为它显然不接受像 DROP TABLE 这样的命令作为标准。

谢谢。

```
DROP TABLE SQL2005TEST.ABSENCEFULLDATADIFF_YESTERDAY;
DROP TABLE SQL2005TEST.ABSENCELATESTSTART_YESTERDAY;
DROP TABLE SQL2005TEST.ABSENCELATESTEND_YESTERDAY;

CREATE TABLE SQL2005TEST.ABSENCEFULLDATADIFF_YESTERDAY
 AS SELECT * FROM SQL2005TEST.ABSENCEFULLDATADIFF;

CREATE TABLE SQL2005TEST.ABSENCELATESTSTART_YESTERDAY
 AS SELECT * FROM SQL2005TEST.ABSENCELATESTSTART;

CREATE TABLE SQL2005TEST.ABSENCELATESTEND_YESTERDAY
 AS SELECT * FROM SQL2005TEST.ABSENCELATESTEND; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T13:48:51.673

```
CREATE OR REPLACE PROCEDURE proc_name AS
BEGIN
EXECUTE IMMEDIATE 'DROP TABLE SQL2005TEST.ABSENCEFULLDATADIFF_YESTERDAY';
.....
EXECUTE IMMEDIATE 'CREATE TABLE SQL2005TEST.ABSENCELATESTEND_YESTERDAY
                       AS SELECT * FROM SQL2005TEST.ABSENCELATESTEND';
....
....
EXCEPTION
  ....
  ....
END; 
```

该`EXECUTE IMMEDIATE`语句在 PL/SQL 块、存储过程或包内执行动态 SQL 语句或匿名 PL/SQL 块。如果您需要运行 DDL 语句（如 等），则更具体地使用它`DROP`。`CREATE TABLE`您不能将 PL/SQL 中的 DDL 命令作为 DML 语句执行，因此唯一的方法是动态 SQL。更多信息[在这里](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm)和[这里](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems017.htm)。

# intellij-idea - 开始编写 IntelliJ 插件

> ID：12801536
> 
> 赞同：2
> 
> 时间：2012-10-09T13:46:06.677
> 
> 标签：intellij-idea, jython, pycharm

我希望编写一个类似于内置文档窗格的插件，您可以在其中看到对您选择的对象或方法进行空值搜索的结果（与文档窗格的行为相同），因为这样更容易查看开始使用新的库或框架时会出错的地方。

我可以在[confluence 页面](http://www.jetbrains.org/display/IJOS/Writing+Plug-ins)上看到如何创建插件项目，并尝试查看[jetbrains 的 github](https://github.com/JetBrains/intellij-plugins)上的示例，但我一直在努力了解需要去哪里才能使其工作。我有一个谷歌，但似乎没有任何容易搜索到的关于这个主题的资源 - 如果有人为 intelliJ 平台做过插件开发并且可以给我一些指示，他们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:52:07.757

[jetbrains.org](http://www.jetbrains.org/display/IJOS/Writing+Plug-ins)将您带到文档和[插件开发的 wiki 页面](http://confluence.jetbrains.net/display/IDEADEV/PluginDevelopment)非常方便。

# android - 是否可以通过更多功能扩展紧急活动？

> ID：12801552
> 
> 赞同：0
> 
> 时间：2012-10-09T13:46:48.047
> 
> 标签：android, android-activity

我有想法扩展紧急活动以添加一些个人数据信息，以防手机丢失（这是解锁手机时的屏幕，底部有一个快速呼叫选项，例如：911 或 112）。是否有可能以不难的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:52:03.933

> 是否有可能以不难的方式做到这一点？

如果下载安卓源代码，修改这个activity，将结果打包成一个ROM mod，然后安装到安卓设备上是一个“硬方式”，那么，不，不可能“以不硬方式制作”。

首先，Android SDK 应用程序无法拨打紧急号码，因此即使您能够拦截并替换此活动，您也无法执行该活动应做的事情。

另外，请记住，显示“在丢失手机时显示一些个人数据信息”已经在 Android 本身中实现，至少在 Android 4.x 中是这样。您可以在“设置”应用中设置个人信息。

# pymongo - 如何在pymongo上进行查询并以插入的相反顺序获取值

> ID：12801553
> 
> 赞同：3
> 
> 时间：2012-10-09T13:46:48.133
> 
> 标签：pymongo

我想实现一个函数，该函数需要 pymongo 集合中的值以与插入相反的顺序。

我可以想到几种方法：

```
cursor = collection.find(skip=collection.count()-LIMIT_VAL,limit=LIMIT_VAL)
rows = list(cursor).reverse() 
```

这种方式会有点糟糕，因为 LIMIT_VAL 是一个变量，我不想把整个事情放到内存中。我不想为`-ve`skip 参数提供值。

**或者**

```
rows = collection.find(sort={'$natural':-1}, limit=LIMIT_VAL) 
```

[我在这里](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)读到，您不能真正依赖自然排序顺序。我不知道这怎么可能不可靠

**或者**

我在每条记录中插入一个名为 order_of_insert 的值，并对其进行排序，以确保我得到插入的方式。

在我实施这个之前，我需要确定哪种方法是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:52:42.423

Mongodb ObjectID 存储精确到秒的时间戳信息。$natural 按此 _id 对其进行排序。如果您的应用程序要在同一秒内插入文档，则插入顺序将不明确。仅当您的收藏设置上限时，$natural 才会对应于广告订单。

1.  如果您的应用程序可以容忍大部分准确的插入顺序，并且您需要数据永久保存，请使用 $natural 而不限制集合。
2.  如果您需要准确的插入顺序并且数据集很小/半持久，请限制集合并使用 $natural 排序
3.  否则，您似乎需要根据自己的时间戳或其他字段进行排序以跟踪订单。

# asp.net - 使用 AutoMapper 时如何检索实体

> ID：12801559
> 
> 赞同：1
> 
> 时间：2012-10-09T13:46:54.860
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, automapper, automapper-2

我使用[AutoMapper](http://automapper.codeplex.com/)在 Asp.net 中使用 MVC 。

从这段代码可以看出

```
 Event eventObj = Mapper.Map<EventEditViewModel, Event>(eventEditViewModel); 
```

我正在尝试将地图 EventEditViewModel 转换为事件。

我需要使用我的服务层将 CandidateId 转换为实际的实体。

知道是否可以在 AutoMapper 中执行此操作？如何设置它

公共类事件（）{公共类候选人{get; 放;} }

```
public class EventEditViewModel()
{
    public string CandidateId {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:12:17.610

您应该避免使用 AutoMapper 从服务层检索实体。理想情况下，它应该用于直接映射给定类型的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:07:06.220

我认为您需要先创建一个地图，如下所示：

```
Mapper.CreateMap<EventEditViewModel, Event>(); 
```

在你使用它之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T01:15:41.333

有时这可能很有用，但是我尝试仅在我的服务层中使用 Automapper（也就是服务的所有输入和输出都是特殊的输入和输出模型）：

```
Mapper.CreateMap<int, Entity>().ConvertUsing( new RepoTypeConverter<Entity>() );

public class NullableRepoTypeConverter<T> : ITypeConverter<int, T>
{
    public T Convert( ResolutionContext context )
    {
        int? src = (int?)context.SourceValue;
        if (src != null && src.HasValue) {
            return Repository.Load<T>( src.Value );
        } else {
            return default(T);
        }
    }

    // Get Repository somehow (like injection)
    private IRepository repository;
    public IRepository Repository
    {
        get
        {
            if (repository == null) {
                repository = KernelContainer.Kernel.Get<IRepository>();
            }
            return repository;
        }
    }
} 
```

# powershell - Powershell - 设置前景窗口

> ID：12801563
> 
> 赞同：5
> 
> 时间：2012-10-09T13:47:04.817
> 
> 标签：powershell, powershell-2.0

使用 powershell 代码，我尝试更改窗口的位置（正常工作）并将此窗口“始终位于顶部”。

请在下面找到我的代码：

```
Import-Module C:/install/WASP/wasp.dll

for($i=1; $i -le 300000; $i++)
{
    $allWindow = Select-Window MyCheck*
    if($allWindow)
    {
        foreach ($currentWindow in $allWindow) 
        {
            $positionWindow = WindowPosition $currentWindow
            foreach ($currentPosition in $positionWindow) 
            {
                #if we find the correct windows
                if ( $currentWindow.title -match "\([0-9]*\)#" )
                {
                    #write-host "@@##@@"$currentWindow.title",(@@#@@)"$currentPosition.x",(@@#@@)"$currentPosition.y",(@@#@@)"$currentPosition.width",(@@#@@)"$currentPosition.height",(@@#@@)"$currentWindow.title",(@@#@@)"$currentWindow.IsActive

                    $id = $currentWindow.title.Substring($currentWindow.title.IndexOf("(")+1, $currentWindow.title.IndexOf(")")-$currentWindow.title.IndexOf("(")-1)
                    $allHUDWindow = Select-Window * | where {$_.Title -match "\($id\).*.txt"}
                    #If we find the second window, we have to superimpose $currentHUDWindow to $currentWindow
                    if($allHUDWindow)
                    {
                        foreach ($currentHUDWindow in $allHUDWindow) 
                        {

                            #I need to set $currentHUDWindow "Always on top"
                            Set-WindowActive $currentHUDWindow
                            Set-WindowPosition -X ($currentPosition.x-10) -Y ($currentPosition.y-30) -WIDTH ($currentPosition.width+20) -HEIGHT ($currentPosition.height+30) -Window $currentHUDWindow
                        }
                    }
                }
            }
        }
    }
} 
```

当前，我称之为“Set-WindowActive $currentHUDWindow”，但我还需要应用这种功能：

```
 [DllImport("user32.dll")]
 [return: MarshalAs(UnmanagedType.Bool)]
 public static extern bool SetForegroundWindow(IntPtr hWnd); 
```

我尝试将此函数添加到我的代码中并调用 SetForegroundWindow($currentHUDWindow)。但是我遇到了一个错误。

请你帮助我好吗 ？

我需要将窗口 $currentHUDWindow 放在顶部！

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T14:14:47.750

这就是 P/invoke 和使用的方式`SetForegroundWindow`

```
Add-Type @"
  using System;
  using System.Runtime.InteropServices;
  public class SFW {
     [DllImport("user32.dll")]
     [return: MarshalAs(UnmanagedType.Bool)]
     public static extern bool SetForegroundWindow(IntPtr hWnd);
  }
"@

$h =  (get-process NOTEPAD).MainWindowHandle # just one notepad must be opened!
[SFW]::SetForegroundWindow($h) 
```

# php - Jquery post函数不返回输出？

> ID：12801564
> 
> 赞同：2
> 
> 时间：2012-10-09T13:47:07.907
> 
> 标签：php, jquery, ajax, post

我正在尝试学习一点 AJAX，但在从 php 脚本中获取输出方面遇到了困难。

这是我目前正在使用的代码：

```
<form>
        <input type="text" id="url" name="url" value="" onkeydown="if (event.keyCode == 13 || event.which == 13) {go($('#url').val());} "/><input type="submit" id="submit" name="submit" value="SHORTEN" onclick="go($('#url').val());"/>
        </form>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="js/jquery.js" type="text/javascript"></script>

    <script type="text/javascript">
        function go(url){
            $.post('url.php', {url: url}, 
            function(data){
                $("#result").html(data).stop();
            });
            alert(url);
        };
    </script> 
```

目前 url.php 脚本只是为了测试目的而回显随机文本。

当我运行只有警报的 go() 函数时，它可以工作，但是 $.post() 函数似乎有问题，因为它没有从 url.php 获取回显字符串，并且输入时没有打开警报框或单击提交按钮。

谢谢

附言

下面是当您在文本字段中放置内容并提交下面的区域时我尝试执行的操作的示例，该区域未填充输出表单 url.php - chrissepham.co.uk

编辑 - 我正在使用谷歌浏览器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:48:37.743

您有一个 JavaScript 错误（特别是`url: url`- 您可能是指`{url: url}`“url=url”）。您应该保持控制台打开，以便在调试时看到错误。

此类错误也往往会停止脚本的执行，这可以解释为什么您没有看到警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:52:40.450

如果您的唯一目标是使用结果填充元素，请使用以下`.load()`方法：

```
$("#result").load("url.php", { "url": url } ); 
```

如[文档](http://api.jquery.com/load/)中所述：

> 如果数据作为对象提供，则使用 POST 方法；

`.post()`因此，它将具有与在原始代码中使用完全相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:59:28.560

我在 AJAX 和 Web2.0 应用程序中使用 jQuery 和 PHP。在我看来，您的 PHP 中很可能存在语法错误。如果您有语法错误，它将终止服务器端脚本，您将不会收到任何回复。尝试从您的 php 脚本中删除除“hello world”之类的 echo 语句之外的所有内容，然后使用 firebug 的控制台查看来自您的 POST 的回复。如果您还没有，我建议您阅读 XML。一旦你开始使用带有 AJAX 的 POST，就很难切换到标准化的数据通信形式，例如 XML（一旦你使用 PHP 进入 OOP，这使得数据解析变得非常容易）

# linux - 如何从 shell 脚本执行属性文件

> ID：12801566
> 
> 赞同：0
> 
> 时间：2012-10-09T13:47:11.983
> 
> 标签：linux, sonarqube

我已经为声纳编写了一个 sonar-project.properties 文件，现在我想从一个 shell 脚本执行这个文件，我如何从一个 shell 脚本调用一个属性文件，请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:13:04.480

如果要运行 Sonar 分析，则必须[安装 Sonar Runner](http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Runner)然后启动

```
sonar-runner 
```

在放置“sonar-project.properties”文件的文件夹中。

一切都在[文档](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Runner)中得到了完美的解释。

# c# - 解析 RSS 时出错

> ID：12801571
> 
> 赞同：0
> 
> 时间：2012-10-09T13:47:27.167
> 
> 标签：c#, .net-3.5, rss

我正在尝试解析 RSS 提要，然后将它们显示在我的网站上。在解析 techcrunch 和 arstechnica RSS 时，我的代码似乎可以正常工作。但是当我尝试解析 HackerNews [RSS](http://news.ycombinator.com/rss)时，我得到了一个错误。

```
 XmlReader readXML;
    readXML = XmlReader.Create(GetURL());
    SyndicationFeed News= SyndicationFeed.Load(readXML);
    readXML.Close();
    return News; 
```

**我在readXML = XmlReader.Create(GetURL());**上收到以下错误 geturl 是 rss 的 url。

* * *

> 服务器违反了协议。Section=ResponseStatusLine

* * *

为什么我会收到上述错误的任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:52:35.597

检查此链接：

[服务器违反了协议。Section=ResponseStatusLine](http://forums.asp.net/t/1155887.aspx/1)

1.) 您可以在 Web Config 文件中添加以下内容`<httpWebRequest useUnsafeHeaderParsing="true" />`来解决服务器提交的协议冲突

```
<configuration>
<system.net>
<settings>
<httpWebRequest useUnsafeHeaderParsing="true" />
</settings>
</system.net>
</configuration> 
```

2.)

**请注意所有使用 Skype 的 Web 开发人员！确保从 Tools\Options\Connection 对话框中取消选中使用端口 80 和 443 的选项。**

![在此处输入图像描述](../Images/c02af87e603a13dd33c15de3bba9df41.png)

# mysql - 如何更改或设置“乘客池空闲时间”？

> ID：12801578
> 
> 赞同：1
> 
> 时间：2012-10-09T13:47:47.477
> 
> 标签：mysql, ruby-on-rails, ruby, linux, passenger

我的应用程序乘客日志中有错误。

```
[error]Premature end of script headers: 
[ pid=xxxxx thr=x file=ext/apache2/Hooks.cpp:xxx time=2012-10-06 07:45:05.816 ]: The backend application (process 29746) did not send a valid HTTP response; 
instead, it sent nothing at all.
It is possible that it has crashed; 
please check whether there are crashing bugs in this application. 
```

我在网上搜索，发现这个问题可以通过设置乘客池空闲时间来解决。

有人可以建议如何设置吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:02:30.437

在您的 Apache httpd.conf 文件中，在“LoadModulepassenger_module”之后添加这一行

```
PassengerPoolIdleTime 300 
```

将“300”更改为应用程序进程在关闭之前可以空闲的秒数，以节省内存。

# c# - 从事件中获取事件处理程序？

> ID：12801580
> 
> 赞同：6
> 
> 时间：2012-10-09T13:47:50.457
> 
> 标签：c#, .net, events, delegates

> **可能重复：**
> [是否可以从一个控件“窃取”事件处理程序并将其提供给另一个控件？](https://stackoverflow.com/questions/293007/is-it-possible-to-steal-an-event-handler-from-one-control-and-give-it-to-anoth)

有没有办法从事件中获取事件处理程序的引用？

**例如：**

```
EventHandler evt = btn.Click; // or another way ? 
```

（这里`EventHandler`是委托，`Click`是按钮的事件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:50:59.457

如果您定义了事件并且访问它的代码在同一个类中（即不是派生的），那么您可以访问它并获取调用列表。

```
MulticastDelegate m = (MulticastDelegate)MyEvent;  

var list = m.GetInvocationList();  

foreach(Delegate d in list)  
{  
    // look at the delegate
} 
```

*   [http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_events01292006081130AM/csharp_events.aspx](http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_events01292006081130AM/csharp_events.aspx)

*   [http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/9a58321d-7fd5-45ca-bba0-44a0a336aeeb](http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/9a58321d-7fd5-45ca-bba0-44a0a336aeeb)

对于您想要访问在您无法修改其代码的类中定义的事件的调用列表的情况......

*   [C#如何查找事件是否已连接](https://stackoverflow.com/questions/1129517/c-sharp-how-to-find-if-an-event-is-hooked-up)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-09T13:51:08.933

您可以尝试使用此代码 - 只是`casting`

```
var result = (EventHandler)control.Click;
Console.WriteLine(result.Method.Name); 
```

# visual-studio-2010 - Visual Studio 2010 + IIS Express + Umbraco 多站点 = “端口 80 正在使用”或未检测到第二个主页

> ID：12801584
> 
> 赞同：2
> 
> 时间：2012-10-09T13:48:08.437
> 
> 标签：visual-studio-2010, umbraco, iis-express

我正在尝试使用 Visual Studio 2010、IIS Express (WebMatrix) 和 Umbraco v4.9.0 进行正确设置，以开发多站点网站。

我已经编辑了主机文件以包括：

```
127.0.0.1       umbraco.local
127.0.0.1       umbalt.local 
```

我在 IIS Express 中为我的网站编辑了 applicationhost.config 文件，使其具有：

```
<binding protocol="http" bindingInformation="*:8001:umbraco.local" />
<binding protocol="http" bindingInformation="*:8003:umbalt.local" /> 
```

或者

```
<binding protocol="http" bindingInformation="*:80:umbraco.local" />
<binding protocol="http" bindingInformation="*:80:umbalt.local" /> 
```

我使用了如下命令：

```
netsh http add urlacl url=http://umbalt.local:80/ user=everyone 
```

允许上述 4 个 URL 作为 WebMatrix/IIS Express 的标准用户正常工作。在 Umbraco 中，我在两个根目录上使用了“管理主机名”，因此一个例如包含：umbraco.local:8001 或普通（没有端口号）：umbraco.local

**我的问题是我被困在两个备用错误之间：**

A) 如果我对端口 80 使用上述变体，则网站在 WebMatrix 中可以正常启动，并且 Umbraco 可以根据我使用的本地域名中的哪一个来识别两个不同的主页。但是当我尝试从 Visual Studio 启动网站时，我收到“正在使用端口 80”弹出错误消息 - 就好像它试图在 localhost 上打开端口 80 两次，而不是我的两个备用域名！？

B) 如果我对端口 8001 和 8003 使用上述变体，那么 Visual Studio 可以毫无问题地启动 IIS Express，但现在 Umbraco 无法识别第二个主页 - umbalt.local:8003 将显示 umbraco.local 的主页： 8001（虽然对于 umbalt.local:8003 以下的子页面，Umbraco 会正确识别正确的网站）

注意：我正在开发的网站最终版本将在两个域上发布，但有一些共享数据——这就是为什么我需要一个 Umbraco 安装来服务两个网站，以及为什么我需要这个开发设置。

对于处理具有端口号的多个网站的 Umbraco 错误，或 Visual Studio 处理具有端口 80 的多个网站的任何建议 - 一个可以在 Visual Studio 中为处理多个 Umbraco 网站提供流畅的开发环境的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:04:35.177

好的，在灵感的时刻，在 umbraco 的两个根文件夹上使用“管理主机名”，我添加了没有端口号的域名 - 这很有效！

然后页面的属性选项卡将显示两个替代链接，一个带有“:8003”端口号，一个不带“:8003”端口号，这样 Umbraco 可以将两个站点分开，并且您有一个带有正确端口号的链接来打开预览。

# python - python/django中setattr和对象操作的区别

> ID：12801586
> 
> 赞同：40
> 
> 时间：2012-10-09T13:48:19.890
> 
> 标签：python, django, django-models, setattribute, setattr

我有以下模型：

```
class Ticket(models.Model):
    title = models.CharField()
    merged_to = models.ForeignKey("self", related_name='merger_ticket', null=True, blank=True)
    looser_ticket = models.BooleanField(default=False) 
```

有几种操作模型的方法：

**第一的**

```
ticket = Ticket.objects.get(pk=1)
ticket.title = "This is edit title"
ticket.merged_to_id = 2
ticket.looser_ticket = True 
```

**第二**

```
ticket = Ticket.objects.get(pk=1)
setattr(ticket, "title", "Edit Title")
setattr(ticket, "merged_to_id", 2)
setattr(ticket, "looser_ticket", True) 
```

当我操作这些东西时，在布尔值更新的视图中，第一种方法不起作用，但是第二种方法起作用。使用第一个和第二个有什么区别，什么时候应该使用？

谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-09T14:09:09.830

这更像是一个 Python 问题。

Python 是一种非常动态的语言。您可以提前编写代码（类），或者 Python 允许您在运行时完全动态地创建类。考虑以下简单向量类的示例。您可以提前创建/编码该类，例如：

```
class MyVector(object):
    x = 0
    y = 0 
```

或者您可以通过执行以下操作动态创建类：

```
fields = {'x':0, 'y':0}
MyVector = type('MyVector', (object,), fields) 
```

方法之间的主要区别在于，对于一​​个您提前知道类属性的方法，而对于您可以想象的第二种方法，您可以以编程方式创建`fields`字典，因此您可以完全动态地创建类。

因此，当您提前知道类的属性时，您可以使用对象表示法设置类属性：

```
instance.attribute = value 
```

请记住，这相当于：

```
instance.__setattr__("attribute", value) 
```

但是，在某些情况下，您不知道需要提前操作的类属性。这是您可以使用`__setattr__`函数的地方。但是，不建议这样做。因此，建议改为使用 Python 的内置方法，该方法在`setattr`内部调用该`__setattr__`方法：

```
setattr(instance, attribute, value) 
```

使用这种方法，您可以提前设置您不知道的属性，或者您甚至可以循环一些`dict`属性并从 dict 设置值：

```
values = {
    'title': 'This is edit title',
    ...
}
for k, v in values.items():
    setattr(ticket, k, v) 
```

不知道为什么常规符号不起作用。它可能与您用于设置属性的方法无关。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T13:50:38.610

如果您事先知道对象属性，您可能应该使用第一种方法。只需直接分配属性值。

当您需要为属性动态分配值时，第二个可能很有用。也许用户有能力改变许多不同属性的值，而你事先不知道哪一个会有值，你可以动态添加值

```
possible_fields = ['title', 'looser_ticket']
ticket = Ticket.objects.get(pk=1)
for field in possible_fields:
  if request.GET.get(field):
     setattr(ticket, field, request.GET[field]) 
```

“不工作”可能不取决于您设置值的方式，您确定您之后保存了更改吗？

# mdx - 如何计算 MDX 加权平均度量

> ID：12801592
> 
> 赞同：1
> 
> 时间：2012-10-09T13:48:38.227
> 
> 标签：mdx, activepivot

我们正在一家物流服务提供商处实施 ActivePivot，我们希望构建一个视图来帮助我们找出移动速度不够快的货物，并帮助了解如何改进此 KPI。我们有一个简单的 MDX 视图，以天为单位显示老化的库存以及客户的发货数量。

有没有一种简单的方法来计算按每个客户的出货量加权的老化库存？无论用于分析此度量的维度如何，有没有一种方法可以计算此加权平均值？

这是我们使用的 MDX 查询：

```
WITH
MEMBER [Measures].[Mean Storage Time] AS
    ([Measures].[Nb.DayPrestation.Started-Finished].Value / [Measures].[Nb.Prestation.Started-Finished].Value)
SELECT
NON EMPTY Order(Hierarchize({DrilldownLevel({[V_MODEL].[ALL].[AllMember]})}), ([Measures].[Mean Storage Time]), DESC) ON ROWS,
NON EMPTY {[Measures].[Mean Storage Time], [Measures].[NbP.PBK]} ON COLUMNS
FROM [OperationPrestationCube]
WHERE ([V_DESTINATION].[ALL].[AllMember], [P_STOCKAGE].[ALL].[AllMember].[true]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:44:33.400

下面的 MDX 添加了一个“加权平均存储”，它等于“NbP.PBK”加权的“平均存储时间”

```
WITH
MEMBER [Measures].[Weighted Mean Storage] AS
    Iif(([V_MODEL].CurrentMember.Level.Ordinal = 0), [Measures].[Mean Storage Time], Iif(IsEmpty([Measures].[Mean Storage Time]), NULL,(([Measures].[Mean Storage Time] * [Measures].[NbP.PBK]) / ([V_MODEL].DefaultMember, [Measures].[NbP.PBK]))))
MEMBER [Measures].[Mean Storage Time] AS
    ([Measures].[Nb.DayPrestation.Started-Finished].Value / [Measures].[Nb.Prestation.Started-Finished].Value)
SELECT
NON EMPTY Order(Hierarchize({DrilldownLevel({[V_MODEL].[ALL].[AllMember]})}), ([Measures].[Mean Storage Time]), DESC) ON ROWS,
NON EMPTY {[Measures].[Mean Storage Time], [Measures].[NbP.PBK], [Measures].[Weighted Mean Storage]} ON COLUMNS
FROM [OperationPrestationCube]
WHERE ([V_DESTINATION].[ALL].[AllMember], [P_STOCKAGE].[ALL].[AllMember].[true]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:45:52.290

您可以使用如下表达式计算加权平均值：

```
Sum('set on which you want to do weighted avg', 'your measure' * 'the weight') / Sum('set on which you want to do weighted avg', 'the weight') 
```

# jquery-ui-sortable - 将参数从指令传递到回调

> ID：12801593
> 
> 赞同：12
> 
> 时间：2012-10-09T13:48:49.763
> 
> 标签：jquery-ui-sortable, angularjs, directive

我正在尝试定义一个`sortable`包装 jqueryui 的可排序插件的指令。

角码是：

```
module.directive('sortable', function () {
    return function (scope, element, attrs) {
        var startIndex, endIndex;
        $(element).sortable({
            start:function (event, ui) {
                startIndex = ui.item.index();
            },
            stop:function (event, ui) {
                endIndex = ui.item.index();
                if(attrs.onStop) {
                    scope.$apply(attrs.onStop, startIndex, endIndex);
                }
            }
        }).disableSelection();
    };
}); 
```

html代码是：

```
<div ng-controller="MyCtrl">
    <ol sortable onStop="updateOrders()">
         <li ng-repeat="m in messages">{{m}}</li>
    </ol>
</div> 
```

的代码`MyCtrl`：

```
function MyCtrl($scope) {
    $scope.updateOrders = function(startIndex, endIndex) {
        console.log(startIndex + ", " + endIndex);
    }
} 
```

我想在我的回调中获取`startIndex`and并对它们做一些事情，但它会打印：`endIndex``updateOrders`

```
undefined, undefined 
```

如何将这些参数传递给我的回调？我的方法正确吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T08:50:55.240

这个小提琴显示了来自指令传递参数的热回调。主要技巧是使用范围来传递函数。 [http://jsfiddle.net/pkriens/Mmunz/7/](http://jsfiddle.net/pkriens/Mmunz/7/)

```
var myApp = angular.module('myApp', []).
directive('callback', function() {
    return { 
        scope: { callback: '=' },
        restrict: 'A',
        link: function(scope, element) {
            element.bind('click', function() {
                scope.$apply(scope.callback('Hi from directive '));
            })
        }
    };
})

function MyCtrl($scope) {
    $scope.cb = function(msg) {alert(msg);};
} 
```

然后 html 看起来像例如：

```
<button callback='cb'>Callback</button> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-09T23:57:14.930

`scope.$apply`接受函数或字符串。在这种情况下，使用函数会更简单：

```
 scope.$apply(function(self) {
    self[attrs.onStop](startIndex, endIndex);
  }); 
```

不要忘记将您的 html 代码更改为：

```
<ol sortable onStop="updateOrders"> 
```

（删除了`()`）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-13T17:10:39.013

**备选方案 1**

如果您没有此指令的隔离范围，我会为此使用 $parse 服务：

在控制器中：

```
...
$scope.getPage = function(page) {

   ...some code here...

} 
```

在视图中：

```
<div class="pagination" current="6" total="20" paginate-fn="getData(page)"></div> 
```

在指令中：

```
if (attr.paginateFn) {
   paginateFn = $parse(attr.paginateFn);
   paginateFn(scope, {page: 5})
} 
```

**备选方案 2**

现在，如果您有一个隔离范围，您可以将参数作为命名映射传递给它。如果您的指令是这样定义的：

```
scope: { paginateFn: '&' },

link: function (scope, el) {
   scope.paginateFn({page: 5});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T07:02:12.603

让@Peter Kriens answser 更进一步，您可以在范围内检查 a 的名称并直接调用它。

```
var myApp = angular.module('myApp', []).
directive('anyOldDirective', function() {
    return { 
        link: function(scope, element) {
            element.bind('click', function() {
                if (scope.wellKnownFunctionName) {
                      scope.wellKnownFunctionName('calling you back!'); 
                } else {
                      console.log("scope does not support the callback method 'wellKnownFunctionName');
                }
            })
        }
    };
})

function MyCtrl($scope) {
    $scope.wellKnownFunctionName= function(a) {console.log(a);};
} 
```

# appender - Log4cxx：在附加程序上设置阈值

> ID：12801597
> 
> 赞同：1
> 
> 时间：2012-10-09T13:48:55.683
> 
> 标签：appender, log4cxx

我是 log4cxx 的新手。我尝试为 appender 设置阈值。在我的代码中，我得到了 appender TERMINAL（它将写入我的 xterm 窗口）。

```
log4cxx::LoggerPtr loggerLog4cxx(log4cxx::Logger::getRootLogger());
log4cxx::AppenderPtr app = loggerLog4cxx->getAppender("TERMINAL"); 
```

我将为此附加程序设置关闭或全部级别。我已经看到 AppenderSkeleton 类有一个方法 setThreshold(log4cxx::Level)。但我不知道如何将我的 Appender 转换为 AppenderSkeleton。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:47:33.883

我已经为我的开发案例找到了解决方案。我将得到我所有的附加程序，并测试它们中的每一个。我需要知道它们是控制台还是文件附加器。

```
log4cxx::LoggerPtr loggerLog4cxx(log4cxx::Logger::getRootLogger());
log4cxx::AppenderList appList = loggerLog4cxx->getAllAppenders ();

for(log4cxx::AppenderList::iterator it=appList.begin(); it!=appList.end(); it++) {
    log4cxx::ConsoleAppenderPtr console = *it;
    if( console ) {
    console->setThreshold( log4cxx::Level::getOff() );
    } else {
    log4cxx::FileAppenderPtr file = *it;
        if ( file ) {
            file->setThreshold( log4cxx::Level::getOff() );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:04:58.613

您在记录器级别设置级别，而不是附加程序。查看文档 - [http://logging.apache.org/log4cxx/](http://logging.apache.org/log4cxx/)

`logger->setLevel(log4cxx::Level::getInfo());`

所以在你的情况下：

`loggerLog4cxx->setLevel(log4cxx::Level::getInfo());`

# php - 如果 PHP 中没有任何内容，则从数组中删除

> ID：12801598
> 
> 赞同：0
> 
> 时间：2012-10-09T13:48:55.043
> 
> 标签：php, arrays, dynamic

我正在开发一个在线预订系统，目前使用表格预订（id、slot id、治疗、用户、日期）、治疗（id、名称、描述、持续时间）、时间段（id、时间）。在预订的第一页，您会看到治疗选项和日历日期选择器。一旦你选择了日历日期，它就会将它发送到一个 php 页面并返回一个可用时间段的列表。

在这个 php 页面中，我有一个预订时间数组，一个包含所有插槽的数组。从所有可用时段中减去预订时间，然后将剩余的数组（所有可用时段）显示给用户，以便他们查看可以预约的所有时间。

现在我想在混合中添加一个持续时间变量。这意味着如果持续时间大于 2，则预订时间段（例如 3,5）和可用时间段（1,2,3,4,5,6,7,8,9,10）的数组，取第二个数组的第一个数组是（6,7,8,9,10）。如果持续时间为 2，则 (1,2,6,7,8,9,10)，如果持续时间为 1 (1,2,4,6,7,8,9,10)。有谁知道我怎么能做这样的事情？

只是为了获得建议的帮助，这是 php 页面：

```
<?php
include('connection.php');
error_reporting(E_ALL);
 $treatment = $_POST['treatment'];
$bookdate = $_POST['bookdate'];

if(!isset($treatment) && isset($bookdate)){

$else = mysql_query("SELECT * FROM SLOTS");
echo '<SELECT>';
while($array_else = mysql_fetch_array($else)){
echo "<OPTION value=".$array_else['SL_ID'].">".$array_else['SL_TIME']."</OPTION>";
}
echo "</SELECT>";
}else{

    $exp = explode("-", $bookdate);
    //determine what day of the week it is
    $timestamp = mktime(0,0,0,$exp[1],$exp[0],$exp[2]);
    $dw = date( "w", $timestamp); // sun0,mon1,tue2,wed3,thur4,fri5,sat6

    //find bookings with same date
    $q1 = mysql_query("SELECT BOOK_SLOT_ID FROM BOOKINGS WHERE BOOK_DATE='$bookdate'");
    //make array of booking slots
    $array1 = array();
    while ($s1 = mysql_fetch_array($q1)) {
    $array1[] = $s1['BOOK_SLOT_ID'];
    }
    $q2 = mysql_query("SELECT SL_ID FROM SLOTS");
    //make array of all slots
    $array2 = array();
    while ($s2 = mysql_fetch_array($q2)) {
    $array2[] =  $s2['SL_ID'];
    }
        if($dw == 6){
        $q = mysql_query("SELECT SL_ID FROM SLOTS ORDER BY SL_ID DESC LIMIT 4");
        $array = array();
        while ($s = mysql_fetch_array($q)) {
        $array[] = $s['SL_ID'];}
        $array_res_merge = array_merge((array)$array1,(array)$array);
        $arr_res = array_diff($array2, $array_res_merge);
        }elseif($dw != 6){
        //remove bookings from all slots
        $arr_res = array_diff($array2, $array1);
        }
    echo '<div>';
    //make selectable options of results
    echo '<SELECT id="timeslots">';
    foreach($arr_res as $op){
    $r = mysql_query("SELECT SL_TIME FROM SLOTS WHERE SL_ID='$op'");
    $q3 = mysql_fetch_array($r);
    echo "<OPTION value=".$op.">".$q3['SL_TIME']."</OPTION>";
    }
    echo '</SELECT>';
    echo'</div>';
}

?> 
```

非常感谢您对此问题的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:19:09.910

我想指出，通过提供更好的名称来改进对变量的描述将有助于阅读代码。我会指出逻辑，因为要弄清楚你的变量需要一段时间......

```
$my_slots_id = array(1,2,3,4,5,6,7,8,9);
$my_bookings = array(array("id"=>2,"duration"=>2),array("id"=>5,"duration"=>1));
foreach($my_bookings as $booking){
    array_splice($my_slots_id,array_search($booking["id"],$my_slots_id),$booking["duration"]);
} 
```

使用 array_slice 从数组中删除。第一个参数是数组，第二个参数是开始键，第三个参数是有趣的：它定义了要起飞的数量。

要删除从 id 开始并向后移动的项目，只需执行以下操作：

```
array_splice($my_slots_id,array_search($booking["id"],$my_slots_id)-$booking["duration"],$booking["duration"]); 
```

# android - Android SQLite 泄露

> ID：12801602
> 
> 赞同：19
> 
> 时间：2012-10-09T13:49:38.647
> 
> 标签：android, sqlite

我遇到了 sql 处理程序的问题

```
A SQLiteConnection object for database '/data/data/.../databases/queueManager' was leaked!  Please fix your application to end transactions in progress properly and to close the database when it is no longer needed. 
```

取自 Androidhive 教程并根据我的使用进行定制

桌子看起来像

```
+ ----------------------------------------------------------- +
: DATABASE_ID : DATABASE_QID : DATABASE_QUEUE : DATABASE_DATE :
+ ----------------------------------------------------------- + 
```

编码

```
 DBQueue searchDBqid(int id) {
       SQLiteDatabase db = this.getReadableDatabase();

        String selectQuery = "SELECT  * FROM " + TABLE_QUEUE + " WHERE " + DATABASE_QID + " = " + id; 

           Cursor cursornum = db.rawQuery(selectQuery, null);
           int dk = cursornum.getCount();
           cursornum.close();

           if (dk >0) {
               Cursor cursor = db.query(TABLE_QUEUE, new String[] { DATABASE_ID,
                       DATABASE_QID, DATABASE_QUEUE, DATABASE_DATE }, DATABASE_QID + "=?",
                       new String[] { String.valueOf(id) }, null, null, null, null);

               if (cursor != null) cursor.moveToFirst();

               DBQueue dbqueue = new DBQueue(Integer.parseInt(cursor.getString(0)),
                       cursor.getString(1), cursor.getString(2), cursor.getString(3));
               return dbqueue;
           }

       db.close();
       return null;
   }

   DBQueue getDBQueue(int id) {
       SQLiteDatabase db = this.getReadableDatabase();

       Cursor cursor = db.query(TABLE_QUEUE, new String[] { DATABASE_ID,
               DATABASE_QID, DATABASE_QUEUE }, DATABASE_ID + "=?",
               new String[] { String.valueOf(id) }, null, null, null, null);
       if (cursor != null)
           cursor.moveToFirst();

       DBQueue dbqueue = new DBQueue(Integer.parseInt(cursor.getString(0)),
               cursor.getString(1), cursor.getString(2), cursor.getString(3));
       return dbqueue;
   }

   public String getAllqid() {
       Time today = new Time(Time.getCurrentTimezone());
       today.setToNow();

       String selectQuery = "SELECT  * FROM " + TABLE_QUEUE + " WHERE " + DATABASE_DATE + " = '" + today.format("%d %m %Y") + "'";

       SQLiteDatabase db = this.getWritableDatabase();
       Cursor cursor = db.rawQuery(selectQuery, null);

       StringBuilder sb = new StringBuilder();       
       if (cursor.moveToFirst()) {
           do {
               if (sb.length() > 0) sb.append(',');
               sb.append(cursor.getString(1));
           } while (cursor.moveToNext());
       }

       String result = sb.toString();
       return result;
   }
   public void deleteDatedDBQueue() {
        Time today = new Time(Time.getCurrentTimezone());
        today.setToNow();
        String selectQuery = "SELECT  * FROM " + TABLE_QUEUE + " WHERE " + DATABASE_DATE + " != '" + today.format("%d %m %Y") + "'"; ;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        if (cursor.moveToFirst()) {
            do {
                db.delete(TABLE_QUEUE, DATABASE_ID + " = ?",
                       new String[] { String.valueOf(Integer.parseInt(cursor.getString(0))) });
            } while (cursor.moveToNext());
        }
        db.close();
    }
   public int getDBQueueCount() {
       String countQuery = "SELECT  * FROM " + TABLE_QUEUE;
       SQLiteDatabase db = this.getReadableDatabase();
       Cursor cursor = db.rawQuery(countQuery, null);
       cursor.close();

       return cursor.getCount();
   }
} 
```

有人可以告诉我如何解决这个泄漏吗？

完整代码：http: [//ijailbreak.me/databasehandler.txt](http://ijailbreak.me/databasehandler.txt)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-09T14:05:56.380

每个都`Cursor`应该在你完成后关闭。执行此操作的传统方法是：

```
Cursor cursor = db.query(...);
try {
    // read data from the cursor in here
} finally {
    cursor.close();
} 
```

但是现在，使用[try-with-resources](https://stackoverflow.com/questions/7153989/java-7-language-features-with-android)可以更加简洁：

```
try (Cursor cursor = db.query(...)) {
    // read data from the cursor in here
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T13:54:48.287

您多次忘记关闭光标，请确保在完成后始终关闭光标。

例如，第二个查询没有关闭游标，为了清楚起见，我已经做了 TODO

`SQLiteDatabase`此外，一旦完成，您就不会关闭`getDBQueue`，`getAllqid`并且`getDBQueueCount`，如果您更改设计以制作`SQLiteOpenHelper`单例，那么您将无需关闭`SQLiteDatabase`并避免泄漏

```
 DBQueue searchDBqid(int id) {
       SQLiteDatabase db = this.getReadableDatabase();

        String selectQuery = "SELECT  * FROM " + TABLE_QUEUE + " WHERE " + DATABASE_QID + " = " + id; 

           Cursor cursornum = db.rawQuery(selectQuery, null);
           int dk = cursornum.getCount();
           cursornum.close();

           if (dk >0) {

               // TODO: Close this cursor!
               Cursor cursor = db.query(TABLE_QUEUE, new String[] { DATABASE_ID,
                       DATABASE_QID, DATABASE_QUEUE, DATABASE_DATE }, DATABASE_QID + "=?",
                       new String[] { String.valueOf(id) }, null, null, null, null);

               if (cursor != null) cursor.moveToFirst();

               DBQueue dbqueue = new DBQueue(Integer.parseInt(cursor.getString(0)),
                       cursor.getString(1), cursor.getString(2), cursor.getString(3));
               return dbqueue;
           }

       db.close();
       return null;
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-26T04:03:24.670

每次打开数据库（可读或可写）时，必须使用“.close();”释放使用内存资源的游标。在每个数据库函数中使用结束后，例如：

```
 if (cursor != null) cursor.moveToFirst();

               DBQueue dbqueue = new DBQueue(Integer.parseInt(cursor.getString(0)),
                       cursor.getString(1), cursor.getString(2), cursor.getString(3));
               return dbqueue;
           }
cursor.close();

       db.close();
       return null;
   }

DBQueue getDBQueue(int id) {
       SQLiteDatabase db = this.getReadableDatabase();

       Cursor cursor = db.query(TABLE_QUEUE, new String[] { DATABASE_ID,
               DATABASE_QID, DATABASE_QUEUE }, DATABASE_ID + "=?",
               new String[] { String.valueOf(id) }, null, null, null, null);
       if (cursor != null)
           cursor.moveToFirst();

       DBQueue dbqueue = new DBQueue(Integer.parseInt(cursor.getString(0)),
               cursor.getString(1), cursor.getString(2), cursor.getString(3));
cursor.close();
db.close();
       return dbqueue;
   } 
```

等等....！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:07:39.897

第一次打开数据库，最后放这个代码。

```
 @Override
        protected void onDestroy() {
            // TODO Auto-generated method stub
         mdb.close();   
         super.onDestroy();
        } 
```

# asp.net-mvc - ASP.NET MVC 中模型实体的策略

> ID：12801604
> 
> 赞同：0
> 
> 时间：2012-10-09T13:49:43.123
> 
> 标签：asp.net-mvc

我正在构建的 Web 应用程序的一部分是用户管理。因此我需要一个用户实体。有几个涉及用户的用例，例如：

*   显示用户列表
*   显示单个用户
*   编辑用户联系信息
*   编辑用户登录信息（用户名和密码）
*   创建一个新用户

其中大多数需要访问相同的属性，因此在所有情况下使用相同的实体会很好。然后，如果我使用例如 DisplayName 属性，所有地方都将使用相同的显示名称：

```
[Display(Name = "Username")]
public string Username { get; set; } 
```

编辑用户时，我也想使用验证属性：

```
[Display(Name = "Username")]
[Required(ErrorMessage = "Username must be provided.")]
public string Username { get; set; } 
```

当我有一个编辑了某些属性但不是全部属性的视图时，就会出现问题。在“编辑用户联系信息”用例中，有些东西可以编辑（例如电话号码），但有些东西不能（例如用户名）。但是如果我使用相同的实体，所有具有验证属性的属性都将被验证。

我在 StackOverflow 上找到了一些[验证问题的解决方案](https://stackoverflow.com/questions/9604049/asp-net-mvc-3-validation-exclude-some-field-validation-in-tryupdatemodel)，但我想知道在创建实体和视图模型时是否有任何“最佳实践”？

我更喜欢尽可能多地重复使用，以确保例如显示名称和验证在整个应用程序中保持一致。但通常这会导致诸如上述问题或复杂的继承层次结构之类的问题。

我应该有：

*   几个相似（但不相同）的实体？
*   几个相似（但不相同）的视图模型？
*   一个实体+验证问题等问题的解决方法？
*   ...

**有什么建议么？你自己如何做到这一点？**

我应该注意，我经常显示的信息不仅仅是正在编辑的内容。例如，在编辑联系信息时，我将输入一些属性（例如 PhoneNumber 和 EmailAddress），但仍将其他属性作为信息显示给用户（例如用户名）。

*（如果重要的话，我正在使用 ASP.NET MVC 3）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:41:09.627

我会考虑使用[每个视图](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)方法的视图模型。虽然这看起来像是额外的工作，但我相信它会让你的控制器和视图更加简洁易懂。很清楚你在每种情况下的意图是什么，你仍然会得到强类型。

它还解决了另一个可能存在[批量分配漏洞](http://odetocode.com/blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx)的问题（绑定包含/排除也是如此）。

最后使用这种技术不需要任何额外的编码位，有些人可能认为这些位很神奇，或者至少需要更仔细地阅读代码来了解这个视图对模型的作用与其他视图相比，与其他视图相比，因为所有三个以稍微不同的方式使用相同的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:26:01.023

如果验证是您唯一的问题，我建议使用 fluentvalidation (http://fluentvalidation.codeplex.com)。这样您就可以为每个场景（每个操作）设置验证规则。

我会为每个场景使用单独的视图模型，并利用 fluentmvc 中的 RuleSets 功能，这样我就不会违反 DRY。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:07:30.033

要将变量验证逻辑添加到您的模型，您可以实现 IValidatableObject：

```
public class VariableValidationEntity : IValidatableObject
{
    public string UserName { get; set; }
    public bool ValidateMe { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (ValidateMe)
        {
            if (string.IsNullOrWhiteSpace(UserName))
            {
                yield return new ValidationResult("Username Required", new[] { "UserName" });
            }
        }
    }
} 
```

然后，您可以根据使用模型的环境指定验证逻辑。

或者，您可以为每个用例创建一个视图模型，甚至可以从基本模型中派生出经过验证的模型：

```
public class NonValidatedEntity
{
    public string UserName { get; set; }
}

public class ValidatedEntity : NonValidatedEntity, IValidatableObject
{
    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (string.IsNullOrWhiteSpace(UserName))
        {
            yield return new ValidationResult("Username Required", new[] { "UserName" });
        }
    }
} 
```

在我看来，后一种选择会更干净。

# vbscript - 使用多个用户通过路径而不是名称检索进程的 PID

> ID：12801616
> 
> 赞同：3
> 
> 时间：2012-10-09T13:50:26.557
> 
> 标签：vbscript, path, admin, pid

我正在尝试检索特定位置中所有软件实例的 PID。它是一个便携式应用程序，因此系统中可能有多个副本，但我只对一个特定位置感兴趣。此外，它可以由不同的用户、管理员以及标准用户同时启动。

我复制了这个 VBS 代码（来自[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)）

```
strComputer = "."

Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colProcesses = objWMIService.ExecQuery("SELECT * FROM Win32_Process WHERE Name = 'foobar.exe'")

For Each objProcess in colProcesses
    If objProcess.GetOwner(User, Domain) = 0 Then
        WScript.Echo "Process " & objProcess.Name & " belongs to " & Domain & "\" & User
    Else
        WScript.Echo "Problem " & Rtn & " getting the owner for process " & objProcess.Caption
    End If
Next 
```

我现在需要区分应用程序的完整路径。如果我使用（第 5 行），我只能看到**当前用户**`objProcess.ExecutablePath`启动的实例的完整路径，而使用（第 3 行）会出现某种语法错误。**`Where ExecutablePath`**

 **有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T22:05:35.337

如[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)所述，您需要管理员权限（更具体地说[`SeDebugPrivilege`](http://blogs.msdn.com/b/oldnewthing/archive/2008/03/14/8080140.aspx)）才能查看其他用户的进程。

使用`Where ExecutablePath = '...'`子句时遇到的语法错误可能是因为您没有在路径中转义反斜杠。WMI 中的反斜杠查询具有特殊含义的[转义](http://msdn.microsoft.com/en-us/library/windows/desktop/ms696030%28v=vs.85%29.aspx)字符，因此您需要将它们加倍以获得文字反斜杠：

```
Select * From Win32_Process Where ExecutablePath = 'C:\\Windows\\notepad.exe' 
```

不过，我只是在这里猜测，因为您决定省略带有 Where 子句的实际查询和它引发的错误。**

# c# - c# listview virtual readlines未加载日志文件> 100mb

> ID：12801617
> 
> 赞同：0
> 
> 时间：2012-10-09T13:50:26.850
> 
> 标签：c#

我一直在 listview 中玩弄虚拟模式，并试图读取一个大约 300mb 的日志文件，这是我到目前为止的代码。它在加载时冻结，但我使用虚拟模式并且只在需要时调用 readlines。我觉得我错过了什么，有人帮忙吗？

```
public partial class Form1 : Form
{

    private const int maxLines = 100;
    List<string> list = new List<string>();

    public Form1()
    {
        InitializeComponent();
    }

    private void toolStripButton1_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog(this) == DialogResult.OK)
        {
            foreach (string s in openFileDialog1.FileNames)
            {
                listBox1.Items.Add(s);
            }
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        listView1.VirtualMode = true;
        listView1.VirtualListSize = maxLines;

        PropertyInfo aProp = typeof(ListView).GetProperty("DoubleBuffered", BindingFlags.NonPublic | BindingFlags.Instance);
        aProp.SetValue(listView1, true, null);
    }

    private void listView1_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
    {
        ListViewItem lvi = new ListViewItem();
        lvi.Text = retrieveItem(e.ItemIndex);
        listView1.VirtualListSize = addList(textBox1.Text);
        ListViewItem.ListViewSubItem lvsi = new ListViewItem.ListViewSubItem();
        NumberFormatInfo nfi = new CultureInfo("de-DE").NumberFormat;
        nfi.NumberDecimalDigits = 0;
        lvsi.Text = e.ItemIndex.ToString("n", nfi);
        lvi.SubItems.Add(lvsi);
        e.Item = lvi;
    }

    string retrieveItem(int index)
    {
        list.Clear();
        addList(textBox1.Text);
        return list[index];
    }

    int addList(string keyword)
    {
        list.Clear();
        int counter = 0;
        foreach (string line in File.ReadLines("test.log"))
            {
                if (line.Contains(keyword))
                {
                    list.Add(line);
                    counter++;
                }
            }
        return counter;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ListViewItem foundItem = listView1.FindItemWithText(textBox1.Text, false, 0, true);
        if (foundItem != null)
        {
            listView1.TopItem = foundItem;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:27:52.363

使用 streamReader 而不是 file.readline 来获取文件内容，因为如果您遇到内存问题，这将有所帮助。您还可以使用 asynchfilestream 对象。

```
 using (StreamReader sr = new StreamReader(path)) 
        {
            while (sr.Peek() >= 0) 
            {
                Console.WriteLine(sr.ReadLine());
            }
        } 
```

如果您可以使用更新的 4.5 技术

```
 String result;
        using (StreamReader reader = File.OpenText("existingfile.txt"))
        {
            Console.WriteLine("Opened file.");
            result = await reader.ReadLineAsync();
            Console.WriteLine("First line contains: " + result);
        } 
```

# qt - 行元素内子元素的 FocusScope 和“焦点”属性

> ID：12801624
> 
> 赞同：2
> 
> 时间：2012-10-09T13:50:43.847
> 
> 标签：qt, qml

FocusScope 是否仅适用于子元素的“焦点”属性，或者它是否也考虑了大子元素的“焦点”属性。

即在下面的代码中，由于 Rectangle 元素不是 FocusScope 的直接子元素，在设置焦点时是否会考虑在内。

```
import QtQuick 1.1

FocusScope {
    width: 100
    height: 66
    Row {
        Rectangle {
            width: 100
            height: 62
            focus: true
            color: "red"
            Keys.onPressed: {
                console.log("hello")    
            }
        }
    }
} 
```

根据程序的输出，看起来 FocusScope 在设置焦点时考虑了 Rectangle 元素。此功能未记录在案。

来自[http://qt-project.org/doc/qt-4.8/qdeclarativefocus.html#qmlfocus](http://qt-project.org/doc/qt-4.8/qdeclarativefocus.html#qmlfocus) Qt docs *“在每个焦点范围内，一个元素可能会将 Item::focus 设置为 true。如果多个 Item 具有焦点属性set，设置焦点的最后一个元素将具有焦点，其他元素未设置，类似于没有焦点范围的情况。"*

目前尚不清楚 FocusScope 是否考虑了孙子（childrens of children）的“焦点”属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:51:46.900

该属性告诉当获得`focus`时哪个项目将成为焦点，你不应该有超过一个项目，但不管项目嵌套多深，总有一个只有一个焦点“结束”项目，如果焦点项目不使​​用，他所有的父母都可以收到关键事件。`FocusScope``activeFocus``focus: true;``FocusScope`

# facebook - 如何判断 Facebook 的服务器何时发出请求？

> ID：12801629
> 
> 赞同：1
> 
> 时间：2012-10-09T13:50:51.590
> 
> 标签：facebook, facebook-graph-api

好的，我的很多页面都是 facebook 对象，问题是其中一些需要几秒钟才能加载，但 facebook 在尝试抓取这些页面以获取元数据时似乎有一个非常小的超时。
我想知道是否有任何方法可以知道 Facebook 的服务器何时发出请求，以便我可以只呈现元数据并使页面加载更快以避免超时。
有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:18:03.547

正如 CBroe 在评论中指出的那样，在类似按钮文档中（为什么它在这里而不是在我不知道的开放图形文档中）它指出使用用户代理来识别 facebook 请求：
[Like Button - Scraper Info](https://developers.facebook.com/docs/reference/plugins/like/#scraperinfo)

# iphone - 隐藏表格视图中特定单元格上的按钮

> ID：12801633
> 
> 赞同：0
> 
> 时间：2012-10-09T13:51:03.210
> 
> 标签：iphone, uitableview

我在每个具有相同框架的单元格上使用两个按钮，一个将始终隐藏，我需要那个曾经单击的按钮，仅该单元格的按钮被隐藏或不隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:16:18.280

实现它的一种方法是有效地使用标签。

分配按钮时将标签设置为..

```
// in cellForRowAtIndexPath

[forwardButton setTag:indexPath.row + 1];
[backButton setTag:(indexPath.row + 1) * 1000]; //possible to avoid clash of tags 
```

为这两个按钮设置相同的操作方法

现在在目标方法中..假设 -(void)toggle;

```
 -(void)toggle:(UIButton *)sender{
     NSIndexPath *index = [NSIndexPath indexPathForRow:sender.tag inSection:0];

        UITableViewCell *cell = [t cellForRowAtIndexPath:index];

    if(sender.tag < 999){  //differentiate which button is clicked

        UIButton *forwardButtonToBeHidden = [cell.contentView viewWithTag:tag];

        UIButton *backButtonToBeEnabled = [cell.contentView viewWithTag:tag * 1000];

        [cell sendSubviewToBack:forwardButtonToBeHidden];

    [forwardButtonToBeHidden setHidden:YES];
    [forwardButtonToBeHidden setEnabled:NO];
        [cell bringSubviewToFront:backButtonToBeEnabled];
    [backButtonToBeEnabled setHidden:NO];
    [backButtonToBeEnabled setEnabled:YES];

    }
    else{
     UIButton *forwardButtonToBeHidden = [cell.contentView viewWithTag:tag ];

        UIButton *backButtonToBeEnabled = [cell.contentView viewWithTag:tag/1000];

        [cell sendSubviewToBack:forwardButtonToBeHidden];

    [forwardButtonToBeHidden setHidden:YES];
    [forwardButtonToBeHidden setEnabled:NO];
        [cell bringSubviewToFront:backButtonToBeEnabled];
    [backButtonToBeEnabled setHidden:NO];
    [backButtonToBeEnabled setEnabled:YES];

    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T09:44:09.587

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

UITableViewCell * cell = 
[tableHistory dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

if (cell == nil) {

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle    reuseIdentifier:SimpleTableIdentifier] autorelease];
}

else
{

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:SimpleTableIdentifier] autorelease];
}

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

[button setFrame:CGRectMake(270.0, 7.0, 30.0, 30.0)];

if([[arrayCheckUnchek objectAtIndex:indexPath.row] isEqualToString:@"check"])

    [button setImage:[UIImage imageNamed:@"right-with-bg.png"] forState:UIControlStateNormal];
else
    [button setImage:[UIImage imageNamed:@"tick-bg.png"] forState:UIControlStateNormal];

[button addTarget:self   action:@selector(buttonClicked:)forControlEvents:UIControlEventTouchUpInside];

[cell.contentView addSubview:button];

cell.textLabel.text = [cellDataArray objectAtIndex:indexPath.row];

cell.detailTextLabel.text = [arrayTktcode objectAtIndex:indexPath.row];

cell.selectionStyle = UITableViewCellSelectionStyleNone;

[cell addSubview:btnUnScan];

[cell addSubview:btnUScan];

return cell;

}

-(void)buttonClicked:(id)sender
{

CGPoint touchPoint = [sender convertPoint:CGPointZero toView:tableHistory];
NSIndexPath *indexPath = [tableHistory indexPathForRowAtPoint:touchPoint];

UIButton *button = (UIButton *)sender;

if([[arrayCheckUnchek objectAtIndex:indexPath.row] isEqualToString:@"Uncheck"])
{
    [button setImage:[UIImage imageNamed:@"right-with-bg.png"] forState:UIControlStateNormal];
    [arrayCheckUnchek replaceObjectAtIndex:indexPath.row withObject:@"check"];
}
else
{
    [button setImage:[UIImage imageNamed:@"tick-bg.png"] forState:UIControlStateNormal];
    [arrayCheckUnchek replaceObjectAtIndex:indexPath.row withObject:@"Uncheck"];
}
} 
```

# javascript - javascript windows phone if 语句破坏程序

> ID：12801636
> 
> 赞同：0
> 
> 时间：2012-10-09T13:51:10.493
> 
> 标签：javascript, windows-phone-7, nokia

这一行：

```
if(Debug===true){console.log('No jquery detected on host site, loading own jquery');} 
```

在诺基亚 Windows 手机中破坏我的脚本，如果我将该变量设置为 false，则一切正常，但如果设置为 true，脚本将停止。我也尝试发出警报而不是那个 console.log 但同样的停止行为。

有人知道或怀疑这种行为的原因吗？

编辑

Tks 对于所有回复，事实是，如果我取出整个 console.log 行并在 if 例如我将其留空或者我放置一个简单的 var 声明，相同的停止行为仍然存在，这让我怀疑与if 语句比使用控制台对象

第二次编辑

正如你们所说的那样是事实，console.log 破坏了它，我有一个隐藏的，找到它并且现在可以工作，所以与 if 无关，而是来自控制台对象的所有错误，tkyou all

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:59:26.033

我不会依赖`console`Windows 手机上存在的对象。您应该对您的声明进行防弹，以确保它不会爆炸：

```
if (Debug===true && typeof console !== 'undefined') {
    console.log('No jquery detected on host site, loading own jquery');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:57:47.047

`Console.Log`并且`Alert`在 WP7 上不受支持。您确定这是诺基亚特有的，而不仅仅是 WP7 特有的吗？我还没有尝试过，但是这个[库](https://github.com/arkitex/javascript-log-wp7)可能有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:56:19.390

嗯，这很奇怪。我不完全确定您为什么使用 if(Debug===true) 而不是 if(Debug) 甚至 if(debug==true)。=== 对于布尔值是不必要的。您可能想尝试一下，看看它是否能解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:57:19.217

不要依赖`console.log`现有的。如果您要使用它，请先检查它是否已定义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T13:57:28.553

我相信旧版本的 Internet Explorer 默认情况下不会定义`console`。您可以通过以下方式检查是否`console`已定义：

```
if(Debug===true){
    if(!!console){
        console.log('No jquery detected on host site, loading own jquery');
    } else {
        window.console = { log: function(m){ alert(m); } } //Define console to prevent future errors.
        alert('No jquery detected on host site, loading own jquery');
    }
} 
```

# r - 如何在使用存储在变量中的名称创建数据框时命名列？

> ID：12801638
> 
> 赞同：3
> 
> 时间：2012-10-09T13:51:18.907
> 
> 标签：r, dataframe

尝试像这样创建一个 data.frame ：

```
a = "foo"
bar = data.frame(a = 1:3) 
```

但列的名称是`a`，而不是`foo`：

```
> bar
  a
1 1
2 2
3 3 
```

创建data.frame后可以重命名该列，但是如何在同一个data.frame命令中通过变量轻松地为其分配名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T14:50:18.110

该`setNames()`功能应该适合您：

```
a <- "Numbers"
b <- "Letters"

bar <- setNames(data.frame(1:3, letters[1:3]), c(a, b))
bar
#   Numbers Letters
# 1       1       a
# 2       2       b
# 3       3       c 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T13:59:19.667

我不认为你可以在这里做你想做的事情，因为 R 解释你提供的参数名称的方式。实际上`get(a) = 1:3`，您希望 R 获取存储为的对象的值`a`而不是标签`a`本身，但是这里不允许使用该习语。

我会这样做：

```
> a <- "foo"
> bar <- data.frame(1:3)
> names(bar) <- a
> 
> bar
  foo
1   1
2   2
3   3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T03:44:29.130

尝试：

```
a = structure(data.frame(1:3), names="foo")
> a
foo
1   1
2   2
3   3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T02:55:40.393

使用链接对[Daniel Gerlanc 的答案](https://stackoverflow.com/questions/12801638/how-to-name-a-column-while-creating-a-data-frame-using-a-name-stored-in-a-variab/12811638#12811638)进行了轻微修改

```
a <- "foo"
a <- data.frame(1:3) %>% structure(names = c(a))

  foo
1   1
2   2
3   3 
```

当您从另一种数据类型（例如动物园系列）创建数据框时，链接很有用，

```
a <- c("foo","data")
bar
2016-01-01 2016-01-02 2016-01-03 2016-01-04 2016-01-05 
      0.78       0.46       0.82       1.07       1.04

a <- bar %>% as.data.frame() %>% tibble::rownames_to_column() %>% structure(names=a)

          foo data
1  2016-01-01 0.78
2  2016-01-02 0.46
3  2016-01-03 0.82
4  2016-01-04 1.07
5  2016-01-05 1.04 
```

# ios - 禁用/冻结视图控制器

> ID：12801640
> 
> 赞同：5
> 
> 时间：2012-10-09T13:51:22.447
> 
> 标签：ios

我需要知道如何禁用视图控制器的所有操作。换句话说，视图控制器中的所有对象都将被冻结。作为一种实践，我声明了一个按钮和一些对象，如文本字段、滑块等。然后当按下按钮时，所有对象都不能使用。

我需要**禁用**此视图控制器的所有活动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T14:11:44.993

您可以通过以下方式简单地禁用视图上的每个子视图；

```
[self.view setUserInteractionEnabled:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:54:14.803

在您的内部`ViewController.h`有一些按钮按下事件的功能：

```
- (IBAction)signInUser:(id)sender; 
```

在你`ViewController.m`只是引用所有控制器并禁用它们：

```
- (void)signInUser:(id)sender {
    someControl.enabled = NO;
} 
```

假设您连接了所有`IBOutlet`as 属性并合成了它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:21:20.947

设置您的视图结构，以便所有可见视图都包含在另一个 UIView 中。当您想要禁用所有“活动”（假设这意味着所有用户交互）时，请禁用外部视图上的用户交互。请注意，这也会禁用“禁用 UI”按钮。要允许此按钮保持启用状态，请不要将其包含在您的“外部视图”UIView 中。

故事板编辑器中的结构和视图控制器： ![在此处输入图像描述](../Images/1ae7953f30462487a2c3fb043b377337.png)

查看控制器标头：

```
#import <UIKit/UIKit.h>

@interface TestViewController : UIViewController

@property (weak) IBOutlet UIView *outerView;

-(IBAction)disableButtonTapped:(id)sender;

@end 
```

查看“禁用”按钮的控制器实现：

```
#import "TestViewController.h"

@interface TestViewController ()

@end

@implementation TestViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

-(IBAction)disableButtonTapped:(id)sender{

    self.outerView.userInteractionEnabled = NO;
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T17:18:39.723

如果你想禁用导航栏和标签栏，你也可以提供一个透明的视图控制器。这如果冻结您的窗口并且不会让用户与屏幕交互。

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
self.presentedVC = [storyboard instantiateViewControllerWithIdentifier:@"BlankViewController"];
self.presentedVC.view.backgroundColor = [UIColor clearColor];
self.presentedVC.modalPresentationStyle = UIModalPresentationCustom;
[self presentViewController:self.presentedVC animated:YES completion:nil]; 
```

要再次启用屏幕，只需关闭呈现的VC

```
[self.presentedVC dismissViewControllerAnimated:YES completion:^{

}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-13T08:14:37.563

巴图的好回答。这是斯威夫特版本。

```
self.view.isUserInteractionEnabled = false 
```

# windows-services - 使用 NSIS 脚本安装后无法运行我的应用程序？

> ID：12801643
> 
> 赞同：0
> 
> 时间：2012-10-09T13:51:32.087
> 
> 标签：windows-services, nsis

我为我的 java 项目成功构建了 nsis 脚本。我已将我的 java 项目转换为 bat（Windows 机器需要 bat 文件才能执行）文件，名为`test.bat`. 我的安装步骤成功完成。

安装后bat文件无法启动服务。我检查了以下路径

```
Start Menu -> Control Panel -> Administrative Tools -> Services. 
```

我可以看到此列表中的服务，但我看不到我的服务文件名。

我试过以下脚本行

```
!define MUI_FINISHPAGE_RUN "$INSTDIR\test.bat" 
```

我也试过这个

```
Function test
  ExecShell "" "$INSTDIR\test.bat"
FunctionEnd 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:53:12.117

[我使用http://wrapper.tanukisoftware.org](http://wrapper.tanukisoftware.org)的包装器安装了一个 java 服务，它能够将 jar 安装为服务。IIRC，您将需要在您的应用程序中安装 wrapper.exe、wrapper.dll 和 wrapper.jar。查看网站了解更多信息。

然后你让 NSIS 调用该包装器在目标机器上安装服务：

```
Detailprint "Installing service"
nsExec::Exec "$\"$INSTDIR\wrapper.exe$\" -i $\"$INSTDIR\wrapper.conf$\"" 
```

卸载程序部分：

```
Detailprint "Stopping service"
nsExec::Exec "$\"$INSTDIR\wrapper.exe$\" -p $\"$INSTDIR\wrapper.conf$\""

Detailprint "Removing service"
nsExec::Exec "$\"$INSTDIR\wrapper.exe$\" -r $\"$INSTDIR\wrapper.conf$\"" 
```

如您所见，您还必须创建一个 wrapper.conf 来指定有关服务的详细信息（例如，要使用哪个主类）。安装服务后，您应该可以使用类似...

```
Exec '"net start your_service_name"' 
```

# ios - IBOutlet 标签未获取数据

> ID：12801646
> 
> 赞同：3
> 
> 时间：2012-10-09T13:51:49.013
> 
> 标签：ios, uilabel, ios6

嗨，我是 StackOverFlow 和 iOS 6 的新手。

对于经验丰富的开发人员来说，这将非常简单..

在 .h 文件中..

```
@interface NotKnownDetailView : UITableViewController
@property (weak, nonatomic) IBOutlet UILabel *wordLabel;
@end 
```

在 .m 文件中..

```
@interface NotKnownDetailView ()
    - (void)configureView;
@end

@implementation NotKnownDetailView
@synthesize  wordLabel = _wordLabel ;

- (void)configureView{

    wordData *theSighting = self.word_data;

    if (theSighting) {

        UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Hello World!"
                                                          message:theSighting.verbal
                                                         delegate:nil
                                                cancelButtonTitle:@"OK"
                                                otherButtonTitles:nil];
        [message show];

        self.wordLabel.text = theSighting.word;

        UIAlertView *message2 = [[UIAlertView alloc] initWithTitle:@"Hello World!"
                                                          message: self.verbalLabel.text
                                                         delegate:nil
                                                cancelButtonTitle:@"OK"
                                                otherButtonTitles:nil];
        [message2 show];

    }
} 
```

问题如下。。

```
self.wordLabel.text = theSighting.word; 
```

尽管 theSighting.word 有数据，但 self.wordLabel.text 不包含任何数据...

当然，我在故事板中连接了 IBOutlet。

上面有什么问题？。

**已编辑。** 我添加了一些源代码。我希望你不会对此感到不舒服。

```
//  NotKnownDetailView.h
#import <UIKit/UIKit.h>

@class wordData ;

@interface NotKnownDetailView : UITableViewController
@property (strong, nonatomic) wordData *word_data;
@property (weak, nonatomic) IBOutlet UILabel *wordLabel;
@property (weak, nonatomic) IBOutlet UILabel *meanLabel;
@property (weak, nonatomic) IBOutlet UILabel *verbalLabel;
@end

//  NotKnownDetailView.m

#import "NotKnownDetailView.h"
#import "wordData.h"

@interface NotKnownDetailView ()
//@property (strong, nonatomic) UIPopoverController *masterPopoverController;
- (void)configureView;
@end

@implementation NotKnownDetailView
@synthesize word_data = _word_data, wordLabel = _wordLabel, meanLabel = _meanLabel, verbalLabel = _verbalLabel;

// it is getter setter.. 
- (void)setWord_data:(wordData *) newWord
{
    if (_word_data != newWord) {
        _word_data = newWord;
        [self configureView];
    }
}
- (void)configureView
{

    wordData *theSighting = self.word_data;

    if (theSighting) {
        NSLog(@" Word : %@" ,theSighting.word);

        self.wordLabel.text = theSighting.word;
        self.meanLabel.text = theSighting.mean;
        self.verbalLabel.text = theSighting.verbal;

    }
}
- (void)viewDidUnload
{
    self.word_data = nil;
    [super viewDidUnload];
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
   [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

@end

//  wordData.h

#import <Foundation/Foundation.h>

@interface wordData : NSObject

@property (nonatomic, copy) NSString *word;
@property (nonatomic, copy) NSString *mean;
@property (nonatomic, copy) NSString *verbal;
-(id)initWithName:(NSString *)word meaning:(NSString *)mean verbaling:(NSString *)verbal;
@end

//  wordData.m

#import "wordData.h"

@implementation wordData
@synthesize word = _word, mean = _mean , verbal = _verbal ;

-(id)initWithName:(NSString *)word meaning:(NSString *)mean verbaling:(NSString *)verbal{
    {
        self = [super init];
        if (self) {
            _word= word;
            _mean = mean;
            _verbal = verbal ;
            return self;
        }
        return nil;
    }

}
@end 
```

**有机发光二极管。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:44:36.450

我认为你在调用`-(void)configureView`before `-(void)viewDidLoad`，在这种情况下`wordLabel`是`nil`当你试图为它分配任何东西时。

试着`-(void)configureView`在里面打电话`-(void)viewDidLoad`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self configureView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:55:39.577

你能确认 theSighting.word 是一个 NSString 值吗？我还认为 if(theSighting) 使用不正确。确保它是一个布尔值。尝试使用 NSLog(@"%@" theSighting.word); 查看调试器控制台中是否打印任何内容。

# haskell - 在哪种意义上，守卫比命令式-if 更好？（haskell 新手）

> ID：12801649
> 
> 赞同：7
> 
> 时间：2012-10-09T13:52:02.960
> 
> 标签：haskell

这是我生命中第三次尝试学习 Haskell，这次是通过[Learn you a Haskell](http://learnyouahaskell.com) ...。
当作者解释守卫时，他展示了这个例子：

```
bmiTell :: (RealFloat a) => a -> String 
bmiTell bmi  
| bmi <= 18.5 = "You're underweight, you emo, you!"  
| bmi <= 25.0 = "You're supposedly normal. Pffft, I bet you're ugly!"  
| bmi <= 30.0 = "You're fat! Lose some weight, fatty!"  
| otherwise   = "You're a whale, congratulations!" 
```

并说

> 这很容易让人想起命令式语言中的一个大 if else 树，只有这个更好，更易读。虽然大的 if else 树通常不受欢迎，但有时问题的定义如此离散，以至于您无法绕过它们。守卫是一个很好的选择。

我可以看到警卫更具可读性，但我不明白为什么该语法“好得多”
它更灵活？它更强大？后卫的最大优势是什么？

我的大问题可能是句子

> 虽然大的 if else 树通常不受欢迎，但有时问题的定义方式如此离散，以至于您无法绕过它们

谁能举个例子？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T15:20:19.027

Don 给出了使用守卫的主要动机，但除此之外，它们还与模式匹配很好地结合在一起。如果一个模式上的所有守卫都失败了，它就会进入下一个模式，因此您可以同时检查模式和条件，而不会出现大量重复的失败案例。这是一个（非常人为的）示例：

```
expandRange x (Just lo, Just hi) | hi < lo = (Just x, Just x)
expandRange x (Just lo, hi) | x < lo = (Just x, hi)
expandRange x (lo, Just hi) | x > hi = (lo, Just x)
expandRange _ range = range 
```

如果我们认为`Nothing`是无界的，这需要一个元素进行比较，或者将负范围“扩展”到仅该元素，移动下/上限以包含该元素，或者如果该元素已经包含，则保持范围不变。

现在，考虑如何在不使用守卫的情况下编写上述内容！由于模式不同，您最终会复制多少次概念上相同的分支？是的，我意识到可以重写这个小例子来完全避免这个问题，但这并不总是可能的（或可取的）。

`if`在我看来，这种定义风格是您可以使用守卫表达的最重要的事情，尽管仍然可能，但如果将其编写为（无守卫的）模式案例和表达式的混合体，将会更加冗长且难以阅读.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T14:54:20.430

守卫在语法上更轻：

*   许多不同的案例
*   嵌套案例

相比：

```
describeLetter c
   | c >= 'a' && c <= 'z' = "Lower case"
   | c >= 'A' && c <= 'Z' = "Upper case"
   | otherwise            = "Not an ASCII letter" 
```

和：

```
describeLetter c =
    if c >= 'a' && c <= 'z'
        then "Lower case"
        else if c >= 'A' && c <= 'Z'
            then "Upper case"
            else "Not an ASCII letter" 
```

规则部分在语法上更清晰，更易于维护。

此外，它们与视图模式很好地组合以产生令人愉悦的语法。

```
 f x | Just t <- bar x = Right (f t)
       | otherwise       = Left "some error case" 
```

例如。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T15:12:47.913

任何带有大量 if 的问题都可以被可视化为决策图。您引用的 LYAH 示例的决策图将如下所示：

```
 .
                / \
               /   \
              /bmi? \
              \     /
               \   /
             /  \ /  \
            /  /   \  \
           /   |   |   \
          /    |   |    \
         /     |   |     \
        /      |   |      \
< 18.5 /18.5-25|   | 25-30 \ > 30
      /        |   |        \
    ...       ... ...       ... 
```

守卫的一大优点是它们让语法结构反映了决策图的结构。如果您所拥有的只是if-then-else，那么您将不得不使用一系列嵌套的if 来实现上述决策图，即用级联的两个分支选择来编码多分支选择。嵌套 if 模糊了算法的高级思想。

现在，我认为 LYAH 的作者在你引用的那句话中得到的意思是，有时你不能比使用嵌套的 if-then-else 做得更好。但这只有在选择相互依赖时才是正确的，即当您的决策图包含许多菱形框（选择）时，每个菱形框（选择）只有两个分支，并且不能以任何其他方式重写。请注意，在`bmiTell`示例中，每个分支都相互独立，因为 BMI 只能属于 4 个类别，而这两个类别都不与任何其他类别重叠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:23:14.100

守卫只是在视觉上更明显并且不那么冗长⁄关于它们的“噪音”更少。

相比：

```
bmiTell bmi
 | bmi <= 18.5 = "................................."
 | bmi <= 25.0 = "..........................................."
 | bmi <= 30.0 = "...................................."
 | otherwise   = "................................"

bmiTell bmi =
 if       bmi <= 18.5 then "................................."
 else if  bmi <= 25.0 then "..........................................."
 else if  bmi <= 30.0 then "...................................."
 else                      "................................" 
```

（另外，[CA McCann](https://stackoverflow.com/a/12803297/849891)对失败案例所说的话）。:)

# sql - 从两个不同的表中收集数据

> ID：12801652
> 
> 赞同：0
> 
> 时间：2012-10-09T13:52:04.553
> 
> 标签：sql

大家好，我目前正在从表`zuordnung`中收集数据，但我也想`users`在同一个查询中从表中收集数据。

这是我当前的 SQL 查询：

```
$sql = "SELECT `ID_Zuordnung`, `Username`, `Hostname_alt`, `Datum_Ausgabe` FROM `zuordnung` WHERE `Status_Tausch` = 'OK' AND `Status_Altgeraet` = 'NOK' ORDER BY `Hostname_alt` ASC" 
```

从表中`users`我想选择`Emailadresse, Abteilung`主键的列`Username`

我该怎么做我需要`inner join`或`full join`其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:54:28.690

你可以`JOIN`像这样的两个表：

```
SELECT 
  z.ID_Zuordnung, z.Hostname_alt, z.Datum_Ausgabe,
  u.Emailadresse, u.Abteilung, u.Username
FROM `zuordnung` z
INNER JOIN users u ON z.Username = u.Username
WHERE z.Status_Tausch    = 'OK' 
  AND z.Status_Altgeraet = 'NOK' 
ORDER BY z.`Hostname_alt 
```

# c# - MVC 模型绑定 - 验证每个属性？

> ID：12801658
> 
> 赞同：4
> 
> 时间：2012-10-09T13:52:27.327
> 
> 标签：c#, asp.net-mvc-3, validation

我有一些通用验证，我希望将毯子应用于每个模型上的每个字符串属性。我正在考虑`DefaultModelBinder`通过覆盖`BindProperty`方法来继承和添加逻辑。这是合适的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:59:05.073

1.  编写您自己的自定义模型绑定器。
2.  使用反射获取所有属性
3.  检查属性是否属于类型`string`
4.  使用反射获取属性的值
5.  运行您的自定义验证并将验证错误添加到`ModelState`

### 样本

```
public class MyCustomModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        foreach (var propertyInfo in typeof(bindingContext.Model.GetType().GetProperties(BindingFlags.Public|BindingFlags.Instance))
        {
           if (propertyInfo.PropertyType == typeof(string)) 
           {
               var value = propertyInfo.GetValue(bindingContext.Model);
               // validate
               // append to ModelState if validation failed
               bindingContext.ModelState.AddModelError(propertyInfo.Name, "Validation Failed");
           }
        }
    }
} 
```

### 使用模型绑定器

```
public ActionResult MyActionMethod([ModelBinder(typeof(MyCustomModelBinder ))] ModelType model)
{
  // ModelState.IsValid is false if validation fails
} 
```

### 更多信息

*   [ASP.NET MVC 自定义模型绑定](http://www.dotnetcurry.com/ShowArticle.aspx?ID=584)
*   [MSDN - Type.GetProperties 方法](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)
*   [MSDN-PropertyInfo.GetValue](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.getvalue.aspx)
*   [MSDN - 模型状态字典](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary%28v=vs.108%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:51:27.770

子类化`DefaultModelBinder`和覆盖`BindProperty`对我来说效果很好。调用 base.BindProperty 可确保设置模型的属性，然后我可以评估它以进行全局验证。

# jquery - jQuery 总是在视口内显示 div

> ID：12801662
> 
> 赞同：0
> 
> 时间：2012-10-09T13:52:41.250
> 
> 标签：jquery

我正在编写一个 jquery web 应用程序，它基本上会根据您用鼠标单击的位置打开一个 div“窗口”。你可以明显地想象，如果鼠标在视口的右侧或底部过多，则打开的 DIV 的一部分将不可见。

有没有办法，也许在 jQuery UI 中让新显示的 DIV 在它的一部分的正确方向上移动一点（可能在使用 draggable() 时）？如果没有，我将不得不编写自己的函数。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:27:37.543

就像使用默认的 jqueryUI 对话框一样简单！

这是一个工作[示例](http://jsfiddle.net/Vandeplas/GLwHN/)

```
$('body').click(function(e){
    console.log(e);
    $( "#dialog" ).dialog({ 
        position: [e.offsetX, e.offsetY]
    });
});​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T13:59:16.940

我认为您可以为此使用jqueryui（模态窗口或其他东西）。否则，您需要计算视口宽度/高度、元素位置、-width 和高度，并将定位限制为 viewportWidth 减去 elementWidth。

# java - 如何创建抛出 IOException 的 Java 迭代器

> ID：12801665
> 
> 赞同：9
> 
> 时间：2012-10-09T13:52:53.277
> 
> 标签：java, iterator, java-7, ioexception

我想实现一个从磁盘/网络检索对象的迭代器。

```
Iterator itr = getRemoteIterator();
while(itr.hasNext()) {
    Object element = itr.next();
    System.out.print(element + " ");
} 
```

然而问题是[Iterator](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)`hasNext()`对象的`next()`方法不允许 throw 。是否有任何其他标准接口可以解决此问题？`IOException`

所需的代码是：

```
public interface RemoteIterator<E> {
    boolean hasNext() throws IOException;
    E next() throws IOException;
    void remove();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T15:19:39.733

不幸的是，你不能这样做。声明的异常是方法签名的一部分，虽然您可以缩小它们，例如

```
interface FooCallable extends Callable<T> {
T call() throws IOException; // Narrows Exception from the parent interface
} 
```

您不能引入新的 throws 条款或扩大声明的条款。

`Iterator`是一个基本的 Java 接口，由增强的 for 使用，所以即使你可以做你想做的事，编译器也需要知道

```
for (T obj: ioExceptionThrowingIterable) { ... } 
```

要求被检查`IOException`者被抓住或抛出。

这是意见问题，但我认为您应该使用自定义子类`RuntimeException`并仔细记录您的界面。在现代框架（例如 Spring）中避免了检查异常，因为它们存在相关问题。

**编辑**：借用并改编自user949300的答案，您可以将返回的对象包装在例如

```
interface RemoteObject<T> {
    T get() throws IOException
} 
```

然后返回一个`Iterator<RemoteObject<T>>`，并强制调用者`IOException`在解包时处理`get`：

```
for (RemoteObject<Foo> obj: iterable) {
    try { 
       foo = obj.get()
    } catch (IOException ex) { 
    /*
     * 9 times out of 10, the lazy user just prints the stack trace 
     * or something else inappropriate
     * which is why I despise checked exceptions
     */
    }
} 
```

这种情况下不需要扩展`Iterator`，直接使用即可。事实上，`Collection`如果适用，您可以使用 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T19:40:48.097

这不是您想要的，但请考虑：

这是通过网络发生的，所以它可能很慢。您应该可能正在使用`Future` （或类似的）。

所以，不要让你的`RemoteIterator<E>`where`next()`返回一个 E，而是使用

`RemoteIterator<Future<E>>`, 它返回一个`Future<E>`.

在该`Future.get()`方法中，您可以将任何内容包装`IOException`在`ExecutionException`.

不完美，但`Future.get()`暗示事情可能会很慢，而且它*确实会抛出一个检查异常*，这会提示其他程序员正在发生的事情，自然的响应是调用`getCause()`. 所以这避免了大多数“WTF”方面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T14:06:17.610

Next() 正在抛出[http://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html](http://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html)，您可以编写一个自定义异常类，捕获该异常然后抛出 IOException。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T12:42:58.437

我宁愿建议 getRemoteIterator() 方法最好抛出一个 IOException，因为对象检索将发生在方法内部。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T13:03:23.177

迭代器是一种[众所周知的设计模式](http://en.wikipedia.org/wiki/Iterator_pattern)。如果 SDK 迭代器不能满足您当前的需求，您可以自己制作一个迭代器。

[我在这个网站上](http://www.oodesign.com/iterator-pattern.html)找到了一个很好的解释和示例代码。您可以将该代码作为参考，并自己实现所需的迭代器接口。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-13T13:14:24.973

基本问题是您希望能够通过不是为此而设计的 API 引发检查异常。

在没有黑魔法的情况下让它工作的唯一合法方法是使用未经检查的异常进行包装。最简单的是 RuntimeException：

```
} catch (IOException e) {
   throw new RuntimeException("failed in " + fileName, e);
} 
```

然后，您可以在调用代码中捕获 RuntimeException 并查看该`getCause()`方法。

如果您需要明确地确定这是*您的*例外，那么请考虑创建`FooBarDomainException extends RuntimeException`并实现您需要委派给的构造函数`super(...,e)`。然后，您可以改为捕获 FooBarException 并按`getCause()`上述方式处理。

我会建议你不要使用魔法来做到这一点。当魔法中断时，它往往以非常不明显的方式出现，很难找到和修复。此外，其他人将更难以维护。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-13T15:33:06.083

这是我的贡献，在堆栈的底部。

这不是你真正想要的，但它就在附近。

```
public class IOIterator<E>
   implements
      Iterator<E>
{
   @Override
   public boolean hasNext()
   {
      return index < 5;
   }

   @Override
   public E next()
   {
      try
      {
         if( index++ > 3)
         {
            throw new IOException( "True fault origin" );
         }
      }
      catch( Throwable t )
      {
         NoSuchElementException nse = new NoSuchElementException( "index: " + index );
         nse.initCause( t );
         throw nse;
      }
      return null;
   }

   @Override
   public void remove()
   {
      if( index == 0 ) throw new IllegalStateException( "call next first!" );
      try
      {
         if( index == 4 )
         {
            throw new IOException( "True fault origin" );
         }
      }
      catch( Throwable t )
      {
         UnsupportedOperationException uoe = new UnsupportedOperationException( "index: " + index );
         uoe.initCause( t );
         throw uoe;
      }
   }

   private int index;

   public static void main( String[] args )
   {
      IOIterator<Socket> it = new IOIterator<>();
      while( it.hasNext())
      {
         Socket socket = it.next();

      }
   }

} 
```

和异常堆栈跟踪：

```
Exception in thread "main" java.util.NoSuchElementException: index: 5
    at hpms.study.IOIterator.next(IOIterator.java:32)
    at hpms.study.IOIterator.main(IOIterator.java:67)
Caused by: java.io.IOException: True fault origin
    at hpms.study.IOIterator.next(IOIterator.java:27)
    ... 1 more 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T19:15:00.450

我建议您制作自己的界面，该界面在结构上与 Iterator 相似，但添加了您想要的界面约束。

听起来你在这里真正拥有的是一个对象流。我会走那条路，伴随着期望有时你会得到一个 EOFException 或类似的东西。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-16T21:37:11.977

还有另一种解决这个问题的方法。主要思想是扩展`NoSuchElementException`：

```
class RemoteIOException extends NoSuchElementException {
    ...
} 
```

缺点是`NoSuchElementException`扩展`RuntimeException`。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-10-09T14:33:22.300

已检查异常只是语法限制

以下代码来自 lombok [http://www.projectlombok.org/](http://www.projectlombok.org/)

你会得到

B.main(B.java:19) 处的线程“main”java.io.IOException 中的异常

```
public static RuntimeException sneakyThrow(Throwable t) {
    if (t == null) throw new NullPointerException("t");
    B.<RuntimeException>sneakyThrow0(t);
    return null;
}

@SuppressWarnings("unchecked")
private static <T extends Throwable> void sneakyThrow0(Throwable t) throws T {
    throw (T)t;
}

public static void main(String[] args) {
    throw sneakyThrow(new IOException());
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-10-15T11:56:34.760

[我在ideone](http://ideone.com/vSdSh)上发布了一些示例代码。基本思想是创建一个自定义 RuntimeException 类，该类`IOIteratorException`仅排除 IOException 作为原因。然后你可以写这样的代码

```
try
{
      iterator . next ( ) ;
}
catch ( IOIteratorException cause )
{
      cause . getCause ( ) ; // the compiler knows this is an IOException so you don't need to cast it
} 
```

# ios - 人脸识别IOS

> ID：12801666
> 
> 赞同：0
> 
> 时间：2012-10-09T13:52:53.160
> 
> 标签：ios, face-detection

> **可能重复：**
> [如何在 iOS 上执行面部识别？](https://stackoverflow.com/questions/8020842/how-can-i-perform-facial-recogntion-on-ios)

我们正在研究人脸检测算法，我们不仅想检测人脸微笑和眼睛，我们还想与其他照片的微笑和眼睛进行比较，并在我们想要的那些中找到最好的微笑和眼睛照片。

所以目前我们能够检测到微笑和眼睛，但我们无法找到解决方案来比较相同？

以前有人试过吗？

# java - 如何扩展 com.sun.jsf.mgbean.ManagedBeanBuilder

> ID：12801668
> 
> 赞同：1
> 
> 时间：2012-10-09T13:53:00.070
> 
> 标签：java, jsf, jsf-2, managed-bean

我想扩展*com.sun.jsf.mgbean.ManagedBeanBuilder*。我必须在哪里注册这样的课程？

原因是，我需要在 PostConstruct 之前的 bean-to-create 中设置一个值（基于正在创建的 bean）。所以我必须改变 *com.sun.faces.mgbean.BeanBuilder.build*方法：

```
public Object build(InjectionProvider injectionProvider, FacesContext context) {
  Object bean = newBeanInstance();
  injectResources(bean, injectionProvider);
  buildBean(bean, context);
  if (bean instanceof SomeInterface == false) {
    invokePostConstruct(bean, injectionProvider);
  }
  return bean;
} 
```

.. 之后在*MyManagedBeanELResolver*的 revoleBean （在 faces-config.xml 中注册为 el-resolver）方法中：

```
result = manager.create(beanName, builder, facesContext);
if (result instanceof SomeInterface) {
  ((SomeInterface) result).setValue(...)
  builder.invoktePostConstruct(result);
} 
```

有更好的解决方案吗？

**更新为什么我不能使用 kolossus 提出的 PhaseListener**
我不能使用 viewId 来获取 ManagedBean，因为我希望有*n*种类型的 Bean 当前处于活动状态，每种类型都通过它们的 bean 名称访问。

我在 viewId 和 ManagedBean 之间有 1:n 的关系，例如，我有一个*test.jsf*，它具有支持 bean *TestBean*。也有可能存在一个*TestBean0 ，它是一个**TestBean*的副本，但具有不同的值（我需要注入它，例如“userId”）。我的*test.jsf*（与*ControllerBean*一起能够确定应该访问哪个 ManagedBean，无论是*TestBean*还是*TestBean0*，它显示来自*TestBean*的内容（例如 userId=27）或 *TestBean_0* （例如 userId=33）。
这允许我有*1 个*视图（*test.jsf*)在同一页面中同时显示*n 个*模型 ( *TestBean )，例如我的 test.html 看起来像这样。*

```
....
<h:outputText value="#{controllerBean.getBean('testBean', component).name}" />
<f:subview id="someId">
  <ui:include src="/WEB-INF/templates/test.xhtml" />
</f:subview>
.... 
```

因此，我可以进行递归（在这种情况下，递归深度为 1），其中级别 0 的 outputText 显示名称“您的 userId 为 27”，包含的 test.xhtml 的 outputText 显示“您的 userId 为 33”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T07:06:57.747

我的解决方案如下（不完全是我想要的，但直到现在我还没有找到更好的方法）：

由于我无法扩展*ManagedBeanBuilder*，我决定创建自己的 BeanManager ( *MyBeanManager* )。它的行为与*com.sun.faces.mgbean.BeanManager*的*getBeanFromScope*和*create*方法相同，但在*getBuilder*上有所不同：

```
if (getRegisteredBeans() != null) {
  BeanBuilder builder = getRegisteredBeans().get(name);
  if (builder instanceof ManagedBeanBuilder) {
    builder = new MyManagedBeanBuilder(builder.getManagedBeanInfo());
  }
  return builder;
}
return null; 
```

所以我能够注入*MyManagedBeanBuilder*并使用我上面提出的构造：

```
public Object build(InjectionProvider injectionProvider,
    FacesContext context) {
  Object bean = newBeanInstance();
  injectResources(bean, injectionProvider);
  buildBean(bean, context);
  if (bean instanceof SomeInterface == false) {
    invokePostConstruct(bean, injectionProvider);
  }
  return bean;
} 
```

..并且为了在我将所需的值设置到bean之后调用*@PostConstruct*，我必须重写*invokePostConstruct*以使其*公开*而不是*受保护*

```
public void invokePostConstruct(Object bean, InjectionProvider injectionProvider) {
  try {
    injectionProvider.invokePostConstruct(bean);
  } catch (InjectionProviderException ipe) {
    String message = MessageUtils.getExceptionMessageString(
    MessageUtils.MANAGED_BEAN_INJECTION_ERROR_ID,
    beanInfo.getName());
    throw new ManagedBeanCreationException(message, ipe);
  }
} 
```

.. 最后在*MyManagedBeanELResolver*中，我能够将我想要的值设置到 bean 中，而无需之前调用*@PostConstruct 。*在*MyManagedBeanELResolver*中：

```
if (result instanceof SomeInterface) {
  ((SomeInterface) result).setValue(value);
  ((MyManagedBeanBuilder) builder).invokePostConstruct(result, getInjectionProvider());
} 
```

# c - 反转数组

> ID：12801671
> 
> 赞同：0
> 
> 时间：2012-10-09T13:53:17.703
> 
> 标签：c, arrays, pointers

我有一个反转数组的函数，我认为同样存在一些问题。请引导我走正确的道路来解决这个问题。

功能：

```
void reversearr (int arr[], int arrlen)

    {
        int a, b, arrtemp[arrlen];
        b=arrlen;
        for (a=0; a<=arrlen; a++)
        {
            arr[a] = arrtemp[b];
            b--;
        }
        printf("\nthe reversed array is");

        for(b=0; b<arrlen; b++)
        {
            printf("%d",arrtemp[b]);
        }
    } 
```

函数是这样调用的

```
reversearr(arr,max); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:56:33.047

```
void reversearr (int arr[], int arrlen)
{  
    int a, tmp;
    for (a = 0; a < arrlen / 2; ++a)
    {
         tmp = arr[a];
         arr[a] = arr[arrlen - a - 1];
         arr[arrlen - a - 1] = tmp;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T13:55:23.790

您正在复制`arrtemp`未初始化的内容。

我想你会想要类似的东西

```
void reversearr (int arr[], int arrlen)
{
    int a;
    for (a=0; a<arrlen/2; a++)
    {
        int tmp = arr[arrlen-1-a]
        arr[arrlen-1-a] = arr[a]
        arr[a] = tmp;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T13:56:08.220

中的两个问题

```
 int a, b, arrtemp[arrlen];
    b=arrlen;
    for (a=0; a<=arrlen; a++)
    {
        arr[a] = arrtemp[b];
        b--;
    } 
```

1.  `arrtemp[arrlen]`超出范围，有效索引为 0 到`arrlen - 1`，
2.  您正在从未初始化的复制`arrtemp`到原始`arr`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:56:57.890

您使用了错误的数组来存储反向。试试下面的代码：

```
void reversearr (int arr[], int arrlen)

    {
        int a, b, arrtemp[arrlen];
        b=arrlen;
        for (a=0; a<=arrlen; a++)
        {
            arrtem[a] = arr[b];
            b--;
        }
        printf("\nthe reversed array is");

        for(b=0; b<arrlen; b++)
        {
            printf("%d",arrtemp[b]);
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T13:55:22.930

有效索引为 0 到`arrlen - 1`，因此：

```
for(a = 0; i <= arrlen; a++) 
```

有一个错误。你需要`<`.

另请注意，使用具有动态长度的数组在 C 中是一个相当“新”的东西，它应该没问题，但需要 C99 编译器。与仅通过单个临时交换元素的 O(1)（存储中）方法相比，这样做没有任何好处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-31T15:05:39.817

在 JavaScript 中，如果有一个数组并且您必须反转每个元素的字符串：

```
var arr = ['woow is great budd','mu me lelo','wikindi'];

function reverseString(str){
    return (str === '') ? '' : reverseString(str.substr(1)) + str.charAt(0);
}

for(i=0;i<arr.length;i++){
   console.log(reverseString(arr[i]));
} 
```

# java - 如何将一个对象实例传递给java中的线程，这样即使实例值被更新也不应该影响使用它的线程

> ID：12801674
> 
> 赞同：4
> 
> 时间：2012-10-09T13:53:24.613
> 
> 标签：java, multithreading

我正在开发一个应用程序，在该应用程序中我不断接收消息。我将这些消息存储在内存数据结构中（比如列表）。我想将这些消息写入文件，但只有在列表大小达到某个阈值之后，例如 100 条消息（对消息执行批处理）。一种方法是我可以在收到每条消息后简单地检查列表大小，如果达到阈值，则调用函数将消息写入文件。但是这种方法的问题是：

1.  调用函数可能需要无限期地等待，直到所有消息都写入文件
2.  传入的消息可能会在此过程中丢失，或者可能需要等待存储在列表中。

其他方式可能是产生一个新线程，它将独立地将消息写入文件。但是，当我将列表（包含消息）传递给执行写操作的线程时，它会使用不断进来的新消息进行更新。因此，新到达的消息也会被写入文件中，这是不期望的。

这不应该发生，因为我打算在下一批中写入新消息。

有人可以建议我解决此要求，或者对上述方法进行任何改进以解决我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:03:24.387

我发现一个更干净的解决方案是支持自动批处理。即批次的大小随着传入数据的速率而调整。

为此，您可以使用 BlockingQueue

```
// unbound queue will not block the producer.
final BlockingQueue<T> queue = new LinkedBlockingQueue<T>();

// to add an element.
queue.add(element);

// to get a batch of data
List<T> list = new ArrayList<T>(maxElements);
while(writing) {
    T t = queue.take(); // wait for at least one element.
    list.add(t);
    queue.drainTo(list, maxElements-1);
    // process list, e.g. write to a file.
    list.clear();
} 
```

这种方法的好处是，如果生产者非常慢，你不会让元素保持不合理的时间，但随着速率的增加，批量大小自然会增长到任何能够跟上生产者的速度，这意味着你不必决定使用的最佳批量大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:00:54.760

我建议采用以下方法：

1.  将对消息列表的引用保存在`AtomicReference`.
2.  当列表足够满时，将其替换为新的空列表；
3.  将完整列表传递给将消息保存到文件的工作线程。

如果您从单个线程写入列表，则使用普通引用而不是`AtomicReference`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:02:19.070

重要的是要理解在 Java中你永远不会传递*对象——只有**引用*（或原始值）。

选项：

*   创建列表的副本，并将对该副本的引用传递给您的新线程
*   使用生产者/消费者队列，因此您的“生产”线程只会*将*值添加到队列中，而您的消费者线程只会从*队列*中获取项目以将它们写入磁盘。当然，您需要考虑在队列停止接受更多条目之前您希望队列可能达到多大。

我推荐后一种方法，使用[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-frame.html)包中的类来实现它；特别是[`BlockingQueue<E>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:02:58.867

为什么不让主消息接收进程在将旧消息列表传递给文件写入线程后创建一个新消息列表？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:03:08.940

`BoundedQueue`您可以使用接受说对象的[条件](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)来实现自定义`100`，然后一次性编写。

现在您可以 `BoundedQueue`与不同的线程共享这个类实例，这些线程会将对象放入其中，并且会有线程调用`writeAll()`方法，直到您想要调用它。

```
BoundedBuffer boundedBuffer  = new BoundedBuffer();
boundedBuffer.put("test"); ....... 
```

从写线程做下面

```
boundedBuffer.writeAll(); 
```

下面是示例代码

```
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

class BoundedBuffer {
final Lock lock = new ReentrantLock();
final Condition full = lock.newCondition();
final Condition empty = lock.newCondition();

final Object[] items = new Object[100];
int count;

public void put(Object x) throws InterruptedException {
    lock.lock();
    try {
        while (count == items.length) {
            empty.signal();
            full.await();
        }
        items[count] = x;
        ++count;
    } finally {
        lock.unlock();
    }
}

public void writeAll() throws InterruptedException {
    lock.lock();
    try {
        while (count < items.length)
            empty.await();
        // Write to file here After write finished signal full condition
        count = 0;
        full.signal();

    } finally {
        lock.unlock();
    }
}
} 
```

# install4j - 无法在 OS X Mountain Lion 上安装 install4j

> ID：12801675
> 
> 赞同：0
> 
> 时间：2012-10-09T13:53:32.010
> 
> 标签：install4j

当我尝试安装 install4j 时 - 我收到安装程序已损坏的错误。这是我刚刚从 install4j 网站下载的 .DMG 文件。我已经尝试重新下载文件，但仍然遇到同样的问题。有没有人看到这个问题。我在这里问是因为这是 install4j 网站指导我的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:54:56.167

问题是 Gatekeeper 不允许安装该应用程序。我必须去安全并检查我是否要允许来自不受信任的来源的安装。

# javascript - 如何防止在选择元素上选择和复制

> ID：12801679
> 
> 赞同：1
> 
> 时间：2012-10-09T13:53:46.410
> 
> 标签：javascript

我有一个选择元素，其中填充了数据库中的数据。此选择元素是隐藏的。

我想要的是禁用复制此 Select 的内容。用户现在可以进行复制的唯一方法是使用 Ctrl+A 或从菜单或查看源代码。如何防止这种情况？

（注意：我不希望整个页面被冻结。没有像 document.onselectstart= return false 这样的解决方案。只有选择元素的内容不应该被复制。）

这可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:57:43.187

不，这是不可能的。

而是重组您的应用程序。不要将敏感或机密数据作为 HTML 的一部分发送。

# mysql - 以 3 分钟的步骤插入时间戳值

> ID：12801680
> 
> 赞同：1
> 
> 时间：2012-10-09T13:53:51.573
> 
> 标签：mysql

我想将 3 分钟步长的时间戳值（给定开始和结束日期）插入到只有一个时间戳列的表中。

我目前从 sql server 切换到 mysql。我会知道如何为 SQL 中的前一个数据库执行此操作，但不确定后者。谢谢。

这是我目前（不工作）的悲惨尝试：

```
DELIMITER //
CREATE PROCEDURE test()
begin
    declare StartTS TIMESTAMP DEFAULT null;
    declare EndTS TIMESTAMP DEFAULT null;

    set StartTS = '2012-01-01 00:00:00';
    set EndTS = '2014-01-01 00:00:00';

    start transaction;
      while StartTS < EndTS do
        insert into timestamps (TimeStampEntry) values (StartTS);
        SET StartTS  = StartTS  + INTERVAL 3 MINUTE;
      end while;
      commit;
end
//

DELIMITER ;

call test(); 
```

PS：

```
create table TimeStamps (
        Id INTEGER NOT NULL AUTO_INCREMENT,
       TimeStampEntry DATETIME,
       primary key (Id)
    ) 
```

当前存储过程：

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `myProc`(IN t1 timestamp, IN t2 timestamp)
BEGIN

  WHILE t1 <= t2 DO
INSERT INTO timestamps (TimeStampEntry) Values (t1)  ;
    SET t1 = DATE_ADD(t1, INTERVAL 180 SECOND);
    #SET t1 = t1 + INTERVAL 180 SECOND;
  END WHILE;
END 
```

称呼：

```
CALL myProc('2010-01-01 00:00:00', '2014-01-01 00:00:00'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:34:01.410

尝试这样的事情：

```
CREATE PROCEDURE myProc(IN t1 timestamp, IN t2 timestamp)
BEGIN

  WHILE t1 <= t2 DO
INSERT INTO test (ts) Values (t1)  ;
    SET t1 = DATE_ADD(t1, INTERVAL 3 MINUTE);
  END WHILE;
END;

CALL myProc(now(), ADDDATE(NOW(), INTERVAL 15 MINUTE)); 
```

[http://sqlfiddle.com/#!2/5672e/9](http://sqlfiddle.com/#!2/5672e/9)

或更改您的线路：

```
SET StartTS  = StartTS  + INTERVAL 3 MINUTE; 
```

至

```
SET StartTS  = ADDDATE(StartTS, INTERVAL 3 MINUTE); 
```

# ruby-on-rails - Rails 搜索重定向到 subURI 托管生产应用程序中的错误 url

> ID：12801683
> 
> 赞同：0
> 
> 时间：2012-10-09T13:54:03.237
> 
> 标签：ruby-on-rails, search, production-environment

我有一个简单的搜索表单，用于搜索我的文章控制器的索引操作。我已将我的应用程序部署到子 URI，当我尝试搜索时，它重定向到`domain.eu/articles`而不是`domain.eu/app/articles`. 我已经创建了一个符号链接，所以其他所有页面在子 URI 下都可以正常工作，所以我不确定为什么这不起作用？

提前致谢！

我的搜索表格如下；

```
<%= form_tag("/articles", class: "navbar-search pull-left",  method: :get) do %>
                    <%= text_field_tag :search, params[:search], class: "search-query span3", placeholder: "search for articles" %>
                        <% end %> 
```

文章.rb

```
def self.search(search)
    if search
      find(:all, conditions: ['title LIKE ?', "%#{search}%"])
    else
      find(:all)
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:31:19.687

也许是因为您在这里输入了一个硬相对 URL，而在其他地方则使用了 ruby​​ 生成的 url？如果将其替换为应该在 routes.rb 中定义的“articles_path”会发生什么？

# tags - 关键字在 Google 搜索中不起作用

> ID：12801686
> 
> 赞同：0
> 
> 时间：2012-10-09T13:54:25.287
> 
> 标签：tags, keyword

我最近建立了这个网站 ( [http://www.sykeshr.co.uk](http://www.sykeshr.co.uk) )，但在尝试使用 Google 中的关键字搜索该网站时遇到问题。

这些是我设置的关键字：

```
<meta name="keywords" content="sykes, hr, sykeshr, human, resources, infrastructure, projects, buckinghamshire, slough, gerrards, cross, gerrards cross, london, recruitment, beaconsfield, chalfont st peter, amersham, chesham, performance, consultant, consultancy, personnel" /> 
```

但由于某种原因，如果我明确搜索“sykes hr”或“sykeshr”，我只能让谷歌返回该网站。例如，如果我搜索“sykes hr buckinghamshire”，Google 不会返回该网站。

知道这是为什么吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:30:37.583

如果它是最近上传的，搜索引擎将需要一些时间来检测/重新索引它。您可以通过网络工具向 google 或 Bing 询问重新索引。

# vb.net - 空引用不评估为空

> ID：12801687
> 
> 赞同：2
> 
> 时间：2012-10-09T13:54:25.593
> 
> 标签：vb.net

我试图在得到它的值之前测试一个对象是否什么都不是，但我得到一个错误“NullReferenceException”

发生在这里的第一行：</p>

```
If Not ORInvoiceLineRet.InvoiceLineRet.ItemRef.FullName Is Nothing Then
    li.FullName = ORInvoiceLineRet.InvoiceLineRet.ItemRef.FullName.GetValue()
End If 
```

System.NullReferenceException {“对象引用未设置为对象的实例。”}

我如何测试这一点，而不仅仅是处理 try/catch 中的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T14:00:10.793

涉及的对象更多，可能什么都不是：

*   `ORInvoiceLineRet`可以什么都不是
*   `ORInvoiceLineRet.InvoiceLineRet`可以什么都不是
*   `ORInvoiceLineRet.InvoiceLineRet.ItemRef`可以什么都不是
*   `ORInvoiceLineRet.InvoiceLineRet.ItemRef.FullName`可以什么都不是

所以这里唯一安全的方法是：

```
If ORInvoiceLineRet IsNot Nothing _
   AndAlso ORInvoiceLineRet.InvoiceLineRet IsNot Nothing _
   AndAlso ORInvoiceLineRet.InvoiceLineRet.ItemRef IsNot Nothing _
   AndAlso ORInvoiceLineRet.InvoiceLineRet.ItemRef.FullName IsNot Nothing  Then
    li.FullName = ORInvoiceLineRet.InvoiceLineRet.ItemRef.FullName.GetValue()
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T13:57:34.650

要么`ORInvoiceLineRet.InvoiceLineRet.ItemRef`是`Nothing`，要么`ORInvoiceLineRet.InvoiceLineRet`是，`Nothing`要么`ORInvoiceLineRet`是`Nothing`。

很难访问`Nothing`so a的属性`NullReferenceException`。

您可以使用[`OrElse`](http://msdn.microsoft.com/en-us/library/ea1sssb2%28v=vs.110%29.aspx)

```
If Not (ORInvoiceLineRet Is Nothing OrElse _
    ORInvoiceLineRet.InvoiceLineRet Is Nothing OrElse _
    ORInvoiceLineRet.InvoiceLineRet.ItemRef Is Nothing OrElse _
    ORInvoiceLineRet.InvoiceLineRet.ItemRef.FullName Is Nothing)

End If 
```

如果左表达式计算结果为`True`，[`OrElse`](http://msdn.microsoft.com/en-us/library/ea1sssb2%28v=vs.110%29.aspx)则不会计算右表达式。

# android - 错误日志 sqlite 无法从 /cachedGeoposition.db 加载

> ID：12801690
> 
> 赞同：5
> 
> 时间：2012-10-09T13:54:48.110
> 
> 标签：android, sqlite, cordova, jquery-mobile, error-log

我正在开发一个带有 phonegap 和 JQM 的应用程序。我有个问题。谁能告诉我为什么我在启动我的应用程序时在日志中出现此错误。

```
10-09 13:47:33.316: D/CordovaWebView(26882): >>> loadUrlNow()
10-09 13:47:33.320: D/DroidGap(26882): onMessage(onNativeReady,null)
10-09 13:47:33.320: D/DroidGap(26882): onMessage(onPageFinished,file:///android_asset/www/index.html)
10-09 13:47:33.363: E/SQLiteLog(26882): (14) cannot open file at line 30174 of [00bb9c9ce4]
10-09 13:47:33.363: E/SQLiteLog(26882): (14) os_unix.c:30174: (2) open(/CachedGeoposition.db) - 
10-09 13:47:33.371: D/WebKit(26882): ERROR: 
10-09 13:47:33.371: D/WebKit(26882): SQLite database failed to load from /CachedGeoposition.db
10-09 13:47:33.371: D/WebKit(26882): Cause - unable to open database file
10-09 13:47:33.371: D/WebKit(26882): external/webkit/Source/WebCore/platform/sql/SQLiteDatabase.cpp(71) : bool WebCore::SQLiteDatabase::open(const WTF::String&, bool)
10-09 13:47:33.461: D/DroidGap(26882): onMessage(networkconnection,3g) 
```

这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="***.mobile"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />    
    <supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:resizeable="true" 
android:anyDensity="true" />

<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<application
    android:icon="@drawable/icone"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"  >
    <activity 
        android:name="***.mobile.MainActivity" 
        android:label="@string/title_activity_main" 
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait" > 
        <intent-filter> 
            <action android:name="android.intent.action.MAIN" /> 
            <category android:name="android.intent.category.LAUNCHER" /> 
        </intent-filter>
    </activity> 
     <!-- ZXing activities --> 
 <activity android:name="com.google.zxing.client.android.CaptureActivity"  android:screenOrientation="landscape" android:configChanges="orientation|keyboardHidden"  android:theme="@android:style/Theme.NoTitleBar.Fullscreen"  android:windowSoftInputMode="stateAlwaysHidden"> 
    <intent-filter> 
    <action android:name="com.phonegap.plugins.barcodescanner.BarcodeScanner.SCAN"/>
    <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter> 
 </activity>

 <activity android:name="com.google.zxing.client.android.encode.EncodeActivity"  android:label="@string/share_name">
<intent-filter>
 <action android:name="com.phonegap.plugins.barcodescanner.BarcodeScanner.ENCODE"/>
 <category android:name="android.intent.category.DEFAULT"/>
</intent-filter>
</activity>
</application></manifest> 
```

这是我的主要活动

```
package **.mobile;
import org.apache.cordova.DroidGap;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebSettings;
import android.widget.Button;

public class MainActivity extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.spashscreen);
    //super.init();
    super.loadUrl("file:///android_asset/www/index.html", 4000);

 }} 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T17:06:18.480

You don't need to fix it as it is an innocuous log. The WebView component used by PhoneGap tries to load that DB file but it is only actually used by the Android Browser. You are safe to ignore it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:05:18.613

> SQLite 数据库无法从 /CachedGeoposition.db 加载

显然，缺少数据库路径。

# c++ - 如何将 3 个变量合并为一个变量

> ID：12801700
> 
> 赞同：-3
> 
> 时间：2012-10-09T13:55:24.210
> 
> 标签：c++, c

我有问题将 3 个变量合并为一个变量：

例子 ：

```
int var1,var2,var3;
int result;
var1 = 1;
var2 = 2;
var3 = 3;

result = ........??;

printf("Result %d",result);

output :
123 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:57:02.383

```
result = var1 * 100 + var2 *10 + var3; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T14:00:26.293

printf("结果 %d%d%d",var1, var2, var3);

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-09T14:07:42.977

是的，C++11 可变参数模板很棒！这是一个`N`可无限扩展的版本，假设`sum(args) < INT_MAX`

```
template<int max, int ...arguments>
int merge_integers()
{
    int args[] = { arguments... };
    int size = sizeof(args) / sizeof(int);
    int mul = 1;
    int result = 0;

    for (int i = size; i--; )
    {
        result += args[i] * mul;
        mul *= max;
    }

    return result;
} 
```

示例用法：

```
printf("%d\n", merge_integers<10, 5, 4, 3, 2, 1>());
printf("%x\n", merge_integers<16, 0xA, 0xB, 0x1, 0x3, 0x5>());
printf("%o\n", merge_integers<8, 1, 2, 3, 4, 7>()); 
```

输出：

```
54321
ab135
12347

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:00:06.570

应该是：

```
char str[100];
sprintf(str, "%d%d%d", var1, var2, var3);
sscanf(str, "%d", &result); // or atoi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:02:10.550

如果您不知道变量有多少位数，则必须通过 stringstream：

```
#include <iostream>
#include <sstream>

using namespace std;

int main() {
        int a = 10;
        int b = 12;
        int c = 2;
        stringstream ss;
        ss << a << b << c;
        int merge;
        ss >> merge;
        cout << merge << endl;
        return 0;
} 
```

[ideone](http://ideone.com/g3BxE)上的工作示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T14:17:04.300

你真的需要 int 变量吗？字符串是否满足您的要求？

```
#include <iostream>
#include <sstream>
#include <string>
using namespace std;

int
main()
{
    int var1 = 1;
    int var2 = 2;
    int var3 = 3;

    ostringstream oss;
    string result;

    oss<<var1<<var2<<var3;

    result = oss.str();
    cout<<result<<endl;
    return 0;
} 
```

# netbeans - OSGi Netbeans 开发

> ID：12801703
> 
> 赞同：0
> 
> 时间：2012-10-09T13:55:26.263
> 
> 标签：netbeans, osgi, netbeans-7.2

我正在使用 OSGi 开始一个项目，但我不知道该怎么做。我使用 Netbeans 7.2。我的疑问是 NetBeans 或 Eclipse 哪个更好？有人有好的教程吗？在 NetBeans 中我创建了一个项目，构建了一个 Activator 类，但是当我运行时，它启动了另一个 NetBeans，我不想启动另一个 netbeans，我想要一个干净的 OSGi 平台。请有人帮助我！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:28:55.380

看看 bndtools：[http ://bndtools.org/](http://bndtools.org/)

它只能作为 Eclipse 插件使用，但恕我直言，它提供了比 PDE 更好的 OSGi 开发体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:02:01.040

两个很好的分步教程：

*   [NetBeans 平台 7.2 快速入门](http://platform.netbeans.org/tutorials/nbm-quick-start.html)
*   [NetBeans IDE 7.2 插件快速入门](http://platform.netbeans.org/tutorials/nbm-google.html)
*   [使用 OSGi 的 NetBeans 平台快速入门](http://platform.netbeans.org/tutorials/nbm-osgi-quickstart.html)

以及[NetBeans 平台学习资源](http://netbeans.org/features/platform/all-docs.html)

[**Netbeans <--> Eclipse**](http://netbeans.org/features/platform/compare.html)之间的比较/区别[](http://netbeans.org/features/platform/compare.html)

 **> 但是当我运行时，它会启动另一个 NetBeans

您运行您的*Netbeans IDE*（用于开发）并在那里启动您的*Netbeans 平台*应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T10:17:03.853

Eclipse 对 OSGi 的支持比 NetBeans 更成熟；您必须在熟悉的开发平台（我假设）和更高级别的 OSGi 支持之间权衡取舍中的平衡点。（Eclipse 的 OSGi 开发支持有点隐藏，因为它都在插件开发环境或 PDE 中。）**

# javascript - iPad webapp：固定页脚和可缩放内容

> ID：12801704
> 
> 赞同：0
> 
> 时间：2012-10-09T13:55:27.063
> 
> 标签：javascript, ipad, web-applications, zooming, footer

我正在开发一个具有固定页脚的 web 应用程序，但内容仍然可以缩放，类似于谷歌地图。

我已经用 jquery mobile 试过了，但它不能按预期工作。

如果没有任何效果，我必须编写自己的完全自我缩放新的，但我不想要。

原谅我的英语不好。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:11:09.347

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />`

这是我要尝试的第一件事。固定或绝对位置在移动 safari 中是连线的，因为当滚动或缩放时不移动页面，而是移动视口。一旦我遇到类似的问题并尝试[了这个](http://cubiq.org/iscroll)，尝试解决这个问题的方法，但我的问题并不幸运。也许它可以帮助你

祝你好运……</p>

# c - 从 apache 过滤器中的分段错误中恢复

> ID：12801707
> 
> 赞同：2
> 
> 时间：2012-10-09T13:55:38.297
> 
> 标签：c, apache, filter, segmentation-fault

由于没有代码是防弹的，我想知道如何最好地准备对发送的原始内容进行操作的 apache 输出过滤器上的分段错误。

当然，很多 QA 是处理它的方法，但为了为计划外的情况做好准备，我想我应该能够在流程退出之前重新发送请求并发送内容而无需修改。

这完全可行吗？

有什么例子吗？

# gwt - 具有数据可视化能力的 GWT 框架

> ID：12801712
> 
> 赞同：0
> 
> 时间：2012-10-09T13:55:55.393
> 
> 标签：gwt, smartgwt

我正在寻找对于前端知识很少的人来说哪个 GWT 框架最容易使用。我希望使用动态图形和图表快速轻松地构建网站模型。我还需要常见的表单元素，例如复选框和单选按钮等。

我不是前端开发人员。java是我唯一知道的语言，但我需要建立一个网站模型并快速运行。我只知道少量的 HTML 和 CSS。性能也很重要。对于对前端知之甚少或一无所知的人来说，无论哪种 GWT 框架具有最简单的学习曲线都是可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:23:23.607

就像 Roddy 在他的评论中所写的那样，GWT 本身已经是一个不错的选择。我在一个项目中使用它，我必须可视化来自 Oracle 数据库的中小型数据。

与[GWT Designer](https://developers.google.com/web-toolkit/tools/gwtdesigner/ "GWT 设计师")结合使用，您将能够快速创建一个可工作且美观的应用程序，我认为这将满足您的需求。

至于图表，我可以推荐[GFlot](http://code.google.com/p/gflot/%20GFlot)，它是 JavaScript 库 Flot 的 GWT 包装器。通过这种方式，您可以生成美观且可自定义的图表。我已经成功地在条形图中使用大约 5,000 个数据点对其进行了测试。

# wordpress - 在 WooCommerce 的“我的帐户”页面中显示产品名称和购买说明

> ID：12801713
> 
> 赞同：6
> 
> 时间：2012-10-09T13:56:00.970
> 
> 标签：wordpress, woocommerce

为了通过 WooCommerce 为培训视频创建按观看次数付费的网站，我正在使用“购买备注字段”在订单完成后发送一封电子邮件，其中包含指向视频页面的超链接。这工作正常，但如果您访问我的帐户页面，客户将无法访问“我的帐户”并在一个地方查看他们的所有链接，因为他们可以使用“可用下载”。

我想在 my-account.php 页面的表格中显示两个额外的字段，“产品（项目）名称”和“购买说明”。目前标准表中有“订单”、“运费”、“总计”和“状态”4个字段。

由于我没有使用运输选项（只是一个虚拟产品），我想将此字段更改为产品（项目）名称。如前所述，我想添加“购买备注”字段（这将在付款完成后显示我的视频网址）重要的是，此购买备注字段只能在项目完成后显示。它已经在 order-details.php 页面中执行此操作，但我希望在 my-accounts.php 页面的表中包含此内容

order-details.php 字段中此购买备注字段的当前代码为：

```
// Show any purchase notes
            if ($order->status=='completed' || $order->status=='processing') :
                if ($purchase_note = get_post_meta( $_product->id, '_purchase_note', true)) :
                    echo '<tr class="product-purchase-note"><td colspan="3">' . apply_filters('the_content', $purchase_note) . '</td></tr>';
                endif;
            endif;

        endforeach;
    endif;

    do_action( 'woocommerce_order_items_table', $order );
    ?> 
```

谁能告诉我我需要在 my-account.php 中更改什么以完成此页面中的这两个额外字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:23:14.113

`my-account.php` is calling to several other templates, you need `my-orders.php`. Place a copy in your theme folder to make it update proof.

I am assuming you are using 1.6.6 here, because the my account page has changed from 2.0 and doesn't include the shipping address any longer.

remove line 50, which shows the shipping address. You can edit/replace this and call your purchase note with the following code:

```
get_post_meta( $order->id, '_purchase_note', true) 
```

then you can get the product name (from your question I'm assuming you only have one product per order?):

```
foreach($order->get_items() as $item) {
    $product_name = $item['name'];
} 
```

then simply call `$product_name` in an extra column (copy/paste/edit code another column)

# css - CSS 文件显示为“text/x-csrc”，在浏览器中被读取为 text/html 并被忽略

> ID：12801717
> 
> 赞同：1
> 
> 时间：2012-10-09T13:56:13.007
> 
> 标签：css, mime-types

Traq 安装包中包含的几个 css 文件在服务器上显示 MIME 类型为“text/x-csrc”。这些文件被浏览器读取为 text/html 并被忽略。

其他虚拟主机站点的 CSS 文件显示为 text/css。

![在此处输入图像描述](../Images/ff21bb9e258f84b3423d3a0dac8d5987.png)

我尝试将“text/x-csrc”文件的内容复制并粘贴到文本编辑器中，然后在服务器上创建一个新文件并使用 vi 粘贴。结果相同。

这是可疑文件[install.css](http://www.fileconvoy.com/dfl.php?id=g2f70e399152b7a74155102f8b62e2acf688c57)：

```
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

/*!
 * Traq Install
 * Copyright (c) 2009-2012 Traq.io
 * @license GNU General Public License v3 only
 */
body {
    font-family: Arial, Helvetica, sans-serif;
    background: #e9e9e9;
    color: #fff;
    margin: 30px; }

#wrapper {
    width: 580px;
    margin: 0 auto;
    border-radius: 5px;
    box-shadow: 0 0 25px 1px rgba(0, 0, 0, 0.4); }

header {
    background: #3478AA;
    padding: 10px;
    height: 20px;
    border-radius: 5px 5px 0 0; }
header h1 {
    font-weight: bold;
    float: left; }
header h2 {
    float: right;
    font-weight: bold; }

#page {
    background: #fff;
    color: #000;
    padding: 10px;
    border-radius: 5px;
    margin: -5px 0;
    z-index: 10;
    position: relative;
    font-size: 14px; }

code {
    font-family: "Courier New", Courier, monospace;
}

#licence, #config_code {
    width: 550px;
    height: 400px;
    overflow: scroll;
    margin: 0 auto;
    background: #F6F6F6;
    border: 1px solid #e4e4e4;
    padding: 4px;
    font-size: 12px;
    font-family: "Courier New", Courier, monospace; }
#config_code {
    height: 125px }

.tabular .group {
    margin: 0;
    padding: 5px 0;
    padding-left: 250px;
    clear: left; }
.tabular label {
    font-weight: bold;
    float: left;
    margin-left: -250px;
    text-align: right;
    width: 245px;
    font-size: 12px;
    padding-top: 3px; }
.tabular input {
    margin-top: 0px;
    vertical-align: middle; }
.tabular select {
    margin-top: 0; }

.actions {
    text-align: center;
    margin-top: 5px; }

.error label {
    color: red; }
.error input {
    border: 1px solid red;
    padding: 2px; }

footer {
    font-size: 11px;
    padding: 6px;
    padding-top: 10px;
    background: #d9d9d9;
    color: #000;
    border-radius: 0 0 5px 5px; } 
```

此文件中的哪些内容可能会触发错误的 MIME 类型？

**编辑：**

install.css 中的前两个字符是`/*`- 评论的开始标签。显然，我的 Apache 魔术文件将其解释为“C Source”而不是 CSS。

在默认 install.css 文件的开头添加一行 return 将 MIME 类型从 C Source 更改为 CSS。

该文件仍被 Chrome/Firefox 错误地识别为 text/html。我已将此添加到 httpd.conf：

```
AddType text/css .css 
```

还是没有骰子。Firefox 和 Chrome 都错误地将其读取为 text/html。

帮助？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T14:01:06.550

您是从外部数据库中读取的还是什么？我猜你错过了打开和关闭样式的标签。

# c - 链接静态库时如何将目标代码复制到可执行文件中？

> ID：12801719
> 
> 赞同：7
> 
> 时间：2012-10-09T13:56:14.610
> 
> 标签：c, linker, static-libraries

我正在阅读 O'Reilly 的书[21st Century C](http://shop.oreilly.com/product/0636920025108.do)，其中作者指出在链接静态库时：

> 编译器 [有效地] 将库的相关内容复制到最终的可执行文件中。

我试图通过创建我自己的包含这个模块的静态库来测试这个：

```
static char szStr[64];

char* single_func() {
    strcpy(szStr, "Hello string!\r\n");
    return szStr;
}

void func0() {
    strcpy(szStr, "Hello");
}

char* func1() {
    strcat(szStr, " string!\r\n");
    return szStr;
} 
```

为了测试，我创建了两个 C 文件，其中一个正在调用`single_func()`，另一个调用`func0()`和`func1()`.

在这两种情况下，生成的可执行文件都是 751290B。如果我直接从模块调用`strcpy`，`strcat`则两个可执行文件最终都是 7215B。

这是否与上述陈述不冲突，还是我错过了有关链接的一些细节？

一个相关的问题是静态库是1600B，那么这个大小的增加是从哪里来的呢？

* * *

额外的：

两个主文件都只包含调用函数和打印结果，如下所示：

主要0：

```
#include <stdio.h>
#include "sharedlib.h"
int main() {
    char* szStr = single_func();
    printf("%s", szStr);
    return 0;
} 
```

主要1：

```
#include <stdio.h>
#include "sharedlib.h"
int main() {
    char* szStr;
    func0();
    szStr = func1();
    printf("%s", szStr);
    return 0;
} 
```

文件是这样编译的：

```
gcc -static main0.c -L. -lsharedlib -o main0 
```

平台是linux，编译器是gcc v4.6.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:04:25.083

对于静态库，复制的单位是库中的目标文件。由于您的两个程序都从目标文件中调用一个函数，因此两个程序最终都包含可执行文件中的所有目标文件，因此大小相同（给定或获取调用`main()`程序的大小）。

可执行文件中的额外信息可能来自多个地方。其中一些将是控制和调试信息。如果您也静态链接它，其中一些可能来自 C 库。我们可能需要查看主程序和链接线，并了解平台以提出通货膨胀的其他原因。

# facebook-like - Facebook Like 按钮未显示

> ID：12801731
> 
> 赞同：1
> 
> 时间：2012-10-09T13:56:58.400
> 
> 标签：facebook-like

在 www.edwardrose.com 网站上，我们为各种公寓社区提供了许多“赞”按钮 - 但对于一个社区，“赞”按钮不显示。

这是一个显示“喜欢”按钮的示例页面：

[http://www.edwardrose.com/pms/prop.asp?p=F&propid=75](http://www.edwardrose.com/pms/prop.asp?p=F&propid=75)

这是未显示“喜欢”按钮的页面：

[http://www.edwardrose.com/pms/prop.asp?p=F&propid=87](http://www.edwardrose.com/pms/prop.asp?p=F&propid=87)

我已经对此进行了修改，如果我只修改 iFrame URL（'href=www.facebook.com%2FWindemereApartments'）中的 Facebook 页面引用，我可以显示“喜欢”按钮。如果我只是删除尾随的“s”，将“WindemereApartments”替换为“WindemereApartment”，则会显示该按钮。

我们将感谢您在解决此问题时提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:26:16.640

[http://www.facebook.com/windemereapartment](http://www.facebook.com/windemereapartment)和 [http://www.facebook.com/pages/Windemere-Apartments/301147187069](http://www.facebook.com/pages/Windemere-Apartments/301147187069)似乎都无法访问 - 当我尝试访问这些 URL 时，我被重定向到 FB主页。

在 Graph API Explorer 中查找页面名称或 id 也不会给出任何结果。

你*确定*这个页面存在，并且在这个名字下......？

如果是这样，关于观众位置或其他方面的任何限制可能吗？

# java - JUnit 4 入门

> ID：12801740
> 
> 赞同：2
> 
> 时间：2012-10-09T13:57:33.887
> 
> 标签：java, unit-testing, junit

因为我的项目想要开始测试驱动开发，所以我决定为我的项目编写一个关于 Junit 4（目前是带有 Eclipse Juno 的 JUnit 4.10）的小教程。

**比尔.java**

```
import java.util.ArrayList;
import java.util.List;

/**
 * @author funkymonkey
 * 
 *         Class Bill can store an id and a priceList (List<Float>)
 *         - id with setter and getter
 *         - prices can be added to the priceList
 *         - getter for priceList
 *         - total amount of price in priceList can be calculated
 */

public class Bill {
   private Integer     id;       // invoice number (one for every Bill)

   private List<Float> priceList; // list will contain prices of the products

   public Bill() {
      priceList = new ArrayList<Float>();
   }

   public Bill(Integer id) {
      this.id = id;

      priceList = new ArrayList<Float>();
   }

   public Integer getId() {
      return id;
   }

   public void setId(Integer id) {
      this.id = id;
   }

   public List<Float> getPriceList() {
      return priceList;
   }

   public void addPrice(Float price) {
      if (price <= 0) {
         throw new IllegalArgumentException("Value is less or equal zero");
      }

      priceList.add(price);
   }

   public float getTotalPrice() {
      float totalPrice = 0;

      for (Float p : priceList) {
         totalPrice = totalPrice + p;
      }
      return totalPrice;
   }
} 
```

**BillTest.java**

```
import static org.junit.Assert.assertArrayEquals;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertThat;
import static org.junit.Assert.assertTrue;
import static org.junit.matchers.JUnitMatchers.hasItems;

import java.util.ArrayList;
import java.util.List;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class BillTest {

   private static Bill       jBill1;
   private static final float FLOAT_1        = (float) 1;
   private static final float FLOAT_20       = (float) 20;
   private static final float FLOAT_3P345    = (float) 3.345;
   private static final float FLOAT_0P000001 = (float) 0.000001;

   @Before
   // initialize objects before running tests
   public void setUp() throws Exception {
      jBill1 = new Bill();
   }

   @After
   // something which should be done after running a single test
   public void tearDown() throws Exception {
   }

   @Test
   // test addPrice()
   public final void testAddPrice_priceIsGreaterThanZero() {
      jBill1.addPrice(FLOAT_1);
      jBill1.addPrice(FLOAT_20);
      jBill1.addPrice(FLOAT_3P345);
      jBill1.addPrice(FLOAT_0P000001);

      // check if expected values == results

      // we are comparing lists so we are using assertEquals(expected, result)
      List<Float> expectedList = new ArrayList<Float>();
      expectedList.add(FLOAT_1);
      expectedList.add(FLOAT_20);
      expectedList.add(FLOAT_3P345);
      expectedList.add(FLOAT_0P000001);
      List<Float> resultList = jBill1.getPriceList();

      assertEquals(expectedList, resultList);

      // we are comparing arrays so we can use assertArrayEquals(expected, result)
      Object[] expectedArray = { FLOAT_1, FLOAT_20, FLOAT_3P345, FLOAT_0P000001 };
      Object[] resultArray = jBill1.getPriceList().toArray();

      assertArrayEquals(expectedArray, resultArray);

      // we are comparing strings to we can use assertEquals(expected, result)
      String expectedString = expectedList.toString();
      String resultString = jBill1.getPriceList().toString();

      assertEquals(expectedString, resultString);

      // let us compare the size of the lists using assertTrue (boolean condition)
      Integer expectedLength = expectedList.size();
      Integer resultLength = jBill1.getPriceList().size();

      assertTrue(expectedLength == resultLength);
      // or use assertTrue(expectedLength.equals(resultLength));

      // you can also use your own matchers by using assertThat(result, matcher)
      assertThat(resultList, hasItems(expectedList.toArray(new Float[expectedList.size()])));
      // or assertThat(resultList, hasItems(FLOAT_1, FLOAT_20, FLOAT_3P345, (float)
      // 0.000001));

   }

   @Test(expected = IllegalArgumentException.class)
   // test will pass if exception is thrown from addPrice()
   public final void testAddPrice_priceIsZero() {
      // this will throw the exception IllegalArgumentException
      jBill1.addPrice((float) 0);
   }

   @Test(expected = IllegalArgumentException.class)
   // test will pass if exception is thrown from addPrice()
   public final void testAddPrice_priceIsLessThanZero() {
      // this will throw the exception IllegalArgumentException
      jBill1.addPrice((float) -1);
   }

   @Test
   // test if calculating works via getTotalPrice()
   public final void testGetTotalPrice() {
      jBill1.addPrice(FLOAT_1);
      jBill1.addPrice(FLOAT_20);
      jBill1.addPrice(FLOAT_3P345);
      jBill1.addPrice(FLOAT_0P000001);

      Float expectedValue = FLOAT_1 + FLOAT_20 + FLOAT_3P345 + FLOAT_0P000001;
      Float resultValue = jBill1.getTotalPrice();

      // we are comparing float values so we can use assertEquals(expected, result)
      assertEquals(expectedValue, resultValue);
   }
} 
```

我的问题是：

*   如何解释老式编码器（瀑布模型）他/她如何从 JUnit 中受益
*   可能有用的附加包（模拟框架？）
*   JUnit 中最重要的方法？
*   示例代码对解释junit的功能有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:09:35.633

一般来说：不要使用魔法硬编码数字。更好地定义常量，以便您可以在一个点编辑它们：

```
 public static final float FLOAT_1  =  1;
 public static final float FLOAT_20 = 20;

 public final void testAddPrice_priceIsGreaterThanZero() {
   expectedList.add((float) FLOAT_1);
   expectedList.add((float) FLOAT_20);
   List<Float> expectedList = new ArrayList<Float>();
   expectedList.add((float) FLOAT_1);
   expectedList.add((float) FLOAT_20);
   //...
 } 
```

像 JUnit 这样的单元测试被设计为“一项职责的一项测试”。因此，对于您的方法`#getPriceList()`等，`getPriceList().toString()`定义所有单独的测试（可以添加，`setUp()`因为每个测试都应该独立于其他测试运行）。JUnit 是快速失败的，这意味着在第一次失败的测试之后，它将破坏测试方法。因此，如果您在一个测试方法中接受它们，那么您在第一次失败的测试后会丢失所有测试。

您可以将 JavaDoc 添加到您的测试方法中，以描述它们如何测试功能。随机示例值、预期异常等

# google-chrome-extension - 部署 chrome 扩展

> ID：12801742
> 
> 赞同：0
> 
> 时间：2012-10-09T13:57:34.497
> 
> 标签：google-chrome-extension

我正在尝试将 crx 文件放在服务器上。该页面正在加载，但没有产生任何错误。

以下是一些信息，如果有人可以提供帮助 - 非常感谢。

服务器是 apache2，我在 mime.types 中添加了行 application/x-chrome-extension

在我的html页面中：

```
</script>
</head>
<body onload='init()'>
<pre id='output'></pre>
<embed type="application/x-chrome-extension" id="complex" width='0' height='0'  
        pluginspage="complex_to_pack.crx"/>
 </body>
</html> 
```

和 manifest.json：

```
{
 // Required
 "name": "complex",
 "version": "1",
 "manifest_version": 2,
 "plugins": [
 { "path": "npcomplex.dll", "public": true }
 ]
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:51:25.193

从您对 HTTP 服务器配置的描述来看，您似乎没有设置 content-type，这很可能默认为`X-Content-Type-Options: no sniff`，它必须是以下之一：

```
empty string
"text/plain"
"application/octet-stream"
"unknown/unknown"
"application/unknown"
"*/*" 
```

根据 chrome 扩展的托管文档 ( [http://developer.chrome.com/extensions/hosting.html](http://developer.chrome.com/extensions/hosting.html) ) -

`"The most common reason for failing to recognize an installable file is that the server sends the header X-Content-Type-Options: no sniff. The second most common reason is that the server sends an unknown content type—one that isn't in the previous list. To fix an HTTP header issue, either change the configuration of the server or try hosting the .crx file at another server."`

# apache - 转发http请求

> ID：12801743
> 
> 赞同：0
> 
> 时间：2012-10-09T13:57:35.477
> 
> 标签：apache, web-applications, dns, glassfish

我希望找到解决我的问题的方法。

这是我的场景：我使用 glassfish 开发了一个 Web 应用程序，我的应用程序实际上可以在`http://localhost:8080/myapp`. 我还购买了一个域并与我的公共 IP 地址相关联。请注意，我的应用程序位于虚拟主机（具有另一个 IP 地址）上，因此我需要将请求从公共 IP 地址转发到虚拟主机 IP 地址。我怎样才能做到这一点？在请求被转发到正确的 IP 地址后，我想使用域名而不是 IP 地址来启动我的应用程序，所以我想做这样的事情`http://www.mydomain.it`来启动我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:06:22.453

首先，您需要将应用程序提供给公共 IP 地址（我相信您使用虚拟主机是正确的）。

然后，您必须将流量从您的域重定向到应用程序可用的公共 IP 地址。这可以通过不同的方式完成，具体取决于您的域提供商。一些提供商有一个 Web 界面来执行此重定向，而另一些则没有。查看您的域名提供商提供的内容

# ruby - 从 Ruby 中的一个字节中获取两个半字节

> ID：12801749
> 
> 赞同：2
> 
> 时间：2012-10-09T13:57:45.813
> 
> 标签：ruby, byte, nibble

从Ruby中的一个字节获取两个半字节（作为整数）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:01:48.077

如果“字节”是 0 到 255 之间的数字：

```
n1, n2 = (byte & 0xf0) >> 4, byte & 0x0f 
```

# asp.net-mvc - 在 ASP.NET MVC 中，为什么在使用 /id 但 ?id= 有效时此 url 不匹配路由？

> ID：12801751
> 
> 赞同：0
> 
> 时间：2012-10-09T13:57:46.857
> 
> 标签：asp.net-mvc, routing

首先，路线如下：

```
routes.MapRoute("PlaceRoutes", "{b}/Places/Show/{id}/{subaction}",
    new { b = "yokota-ab-japan", controller = "Places", action = "Show", id = UrlParameter.Optional, subaction = UrlParameter.Optional }
    ); 
```

**这个网址：localhost/yokota-ab-japan/Places/Show/4b5bfc7ef964a520332029e3**

不匹配*，*

**这个网址：localhost/yokota-ab-japan/Places/Show?id=4b5bfc7ef964a520332029e3**

做。

事实上，当使用 /id 时，它只是简单地路由回根主页。当我在调试器中运行它时，它甚至从未触及 Places/Show 动作，它只是简单地返回。但是，如果我使用 ?id= 它路由很好。

我以前从未发生过这种情况……非常困惑。我尝试使用 Phil Haack 的路由调试器，但由于它甚至没有触及路由，只是循环回到主页，因此调试器无济于事。

**编辑 - 这是完整的路线列表**

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute("PlaceRoutes", "{b}/Places/Show/{id}/{subaction}",
        new { b = "yokota-ab-japan", controller = "Places", action = "Show", id = UrlParameter.Optional, subaction = UrlParameter.Optional }
        );

    routes.MapRoute("BaseRoutes", "{b}/{controller}/{action}/{id}",
        new { b = UrlParameter.Optional, controller = "Home", action = "Index", id = UrlParameter.Optional },
        new { controller = "Home|Member|Places|Search|Admin" }
        );

    routes.MapRoute(
        "NullBase",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        new { controller = "Home|Member|Places|Search|Admin|Auth" }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:15:46.533

如果它的 asp.net mvc 3.0，它是一个已知的错误，带有两个连续的可选参数

[http://haacked.com/archive/2011/02/20/routing-regression-with-two-consecutive-optional-url-parameters.aspx](http://haacked.com/archive/2011/02/20/routing-regression-with-two-consecutive-optional-url-parameters.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:41:53.480

经过大量挖掘，事实证明它只有一个网址。不知何故，它在过去获得了一个 HTTP 301 代码，将其重定向回主页......我猜浏览器会记住这一点。;)

# oracle - 在 Oracle 中使用 BLOB 对象

> ID：12801755
> 
> 赞同：3
> 
> 时间：2012-10-09T13:57:55.260
> 
> 标签：oracle, base64, converter

我有一个这样的 SQL 语句-

```
select utl_encode.utl_encode.base64_encode(IMAGE1) 
from IPHONE.accidentreports 
where "key" = 66 
```

但是当我运行它时，我得到了这个错误 -

```
ORA-00904: "UTL_ENCODE"."UTL_ENCODE"."BASE64_ENCODE": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Error at Line: 2 Column: 8 
```

我想将我的`BLOB`对象转换为`BASE64`. 怎么可能做到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:48:33.970

由于[UTL_ENCODE.BASE64_ENCODE](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_encode.htm#CACECFHF)函数适用于 RAW，因此它将适用于最多 32767 字节`PL/SQL`或 SQL 中 4000 字节的 BLOB。

如果您的图像较大，则必须编写自己的函数。这是一个例子：

```
CREATE OR REPLACE FUNCTION base64_encode_blob (p BLOB) RETURN BLOB IS
   l_raw    RAW(24573);
   l_base64 RAW(32767);
   l_result BLOB;
   l_offset NUMBER := 1;
   l_amount NUMBER := 24573;
BEGIN
   DBMS_LOB.createtemporary(l_result, FALSE);
   DBMS_LOB.open(l_result, DBMS_LOB.lob_readwrite);
   LOOP
      DBMS_LOB.read(p, l_amount, l_offset, l_raw);
      l_offset := l_offset + l_amount;
      l_base64 := utl_encode.base64_encode(l_raw);
      DBMS_LOB.writeappend(l_result, utl_raw.length(l_base64), l_base64);
   END LOOP;
EXCEPTION
   WHEN NO_DATA_FOUND THEN
      RETURN l_result;
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:04:37.333

首先`UTL_ENCODE.BASE64_ENCODE`处理值的二进制表示，`RAW`函数看起来像：

```
UTL_ENCODE.BASE64_ENCODE (
   r  IN RAW) 
RETURN RAW; 
```

所以，考虑`IMAGE1`是`RAW`类型：

```
SELECT UTL_ENCODE.BASE64_ENCODE(CAST(IMAGE1 AS RAW))  --if IMAGE1 is LOB
  FROM IPHONE.accidentreports 
 WHERE "key" = 66; 
```

更多信息[在](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions016.htm)`CAST`这里。

# php - CakePHP 复选框 - 忽略未选中的复选框

> ID：12801758
> 
> 赞同：2
> 
> 时间：2012-10-09T13:58:23.017
> 
> 标签：php, forms, cakephp, cakephp-2.0, cakephp-2.1

这应该是一个很好的简单问题。

在一个表单上，我有许多与为特定功能选择不同用户有关的复选框。复选框是这样创建的

```
$this->Form->input("user_select", array(
  "type"   => "checkbox",
  "name"   => "data[Registration][User][]",
  "id"     => "UserId" . $user['User']['id'],
  "value"  => $user['User']['id'],
  "label"  => false
)); 
```

提交此表单时，它会通过注册控制器，但 request->data 数组包含未选中的复选框，格式如下：

```
array(
  'Registration' => array(
    'Users' => array(
      (int) 0 => '0',
      (int) 1 => '0',
      (int) 2 => '0',
      (int) 3 => '0',
      (int) 4 => '31',
      (int) 5 => '0',
      (int) 6 => '11'
    ),
) 
```

现在数据没有问题，可以清楚地看到用户的 31 和 11 已被选中，但我更喜欢以下形式的数组：

```
array(
  'Registration' => array(
    'Users' => array(
      (int) 4 => '31',
      (int) 6 => '11'
    ),
) 
```

这将使处理和验证更加容易。

那么，**CakePHP 是否具有防止未选中的复选框显示在 request->data 数组中的功能？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:08:02.440

尝试添加`'hiddenField' => false`到您的 input() 调用中：

```
$this->Form->input("user_select", array(
  "type"        => "checkbox",
  "name"        => "data[Registration][User][]",
  "id"          => "UserId" . $user['User']['id'],
  "value"       => $user['User']['id'],
  "label"       => false,
  "hiddenField" => false
)); 
```

CakePHP 会自动添加一个隐藏字段，除非您告诉它不要这样做，大概是为了让表单的所有键都以`$this->data->request`. 查看[此页面](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:33:27.217

提交表单将始终返回所有复选框，无论它们是否被选中，由您决定如何处理这些数据。据我所知，CakePHP 没有您要求的此类功能，但您始终可以使用 PHP 来取消设置空元素...

```
 foreach( $array as $key => $val ) {
   if( empty($val) ) {
     unset( $array[$key] );
   }
 } 
```

# php - 如何在 Netbeans 中显示“打开”和“关闭”PHP 标签？

> ID：12801759
> 
> 赞同：1
> 
> 时间：2012-10-09T13:58:22.833
> 
> 标签：php, netbeans, tags

Netbeans以不同的颜色显示相应`{`的大括号。`}`Netbeans 中是否有办法找到`?>`现有 PHP 开放标记（`<?php`或）的相应 PHP 关闭标记（ `<?`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:07:40.053

目前（在 NetBeans 7.3 Beta 中），您无法通过工具 > 选项菜单通过为标记添加匹配类别来更改或自定义突出显示。最好的办法是更改 PHP 打开/关闭标记的语法颜色（在屏幕截图 2 中）

![在此处输入图像描述](../Images/203d4dff02c19dca2948b58c7639b95d.png) ![在此处输入图像描述](../Images/2b3d8d939b29d0518b2de36fde76501a.png)

# iphone - 核心图 - 设置初始可见区域

> ID：12801760
> 
> 赞同：1
> 
> 时间：2012-10-09T13:58:29.197
> 
> 标签：iphone, ios, core-plot

这里的问题很简单，但我就是想不通。

我有一个 CPTXYGraph，X 轴是 1 到 100 之间的整数，Y 轴是日期。图表中将有 50-100 个日期，我想最初只显示最后 7 天，并允许用户根据需要向后滚动。

我怎样才能做到这一点？无论我尝试什么，图表从第 1 天开始并强制用户向右滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:05:44.697

哎呀，想通了，我是个假人。

由于 x 轴是 1 天（我之前没有提到这一点，但一天可以有多个点），我有一个名为“oneDay”的值，它代表一天中的秒数。当您设置 xRange 时：

```
plotRangeWithLocation:CPTDecimalFromFloat(oneDay * 6.0f) 
```

将图表向右移动 6 天（从图表的开头）。所以我只需要弄清楚我想将图表移动多远。

```
NSTimeInterval oneDay = 24 * 60 * 60;

plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(oneDay * 6.0f) length:CPTDecimalFromFloat(oneDay * 5.0f)]; 
```

# java - 在 wicket 1.5.8 中强制页面过期

> ID：12801761
> 
> 赞同：3
> 
> 时间：2012-10-09T13:58:37.843
> 
> 标签：java, wicket, wicket-1.5

我正在尝试使用 Wicket 1.5.8 使给定页面的所有先前版本过期。在 wicket 1.4 中，它由`getPage().getPageMap().clear()`. 现在在 wicket 1.5 中，页面地图不见了，我不知道如何添加它。

我的用例是我有一个向导 (http://www.wicket-library.com/wicket-examples/wizard/) 来创建/编辑实体。提交向导后，用户将被重定向到实体列表。在这一点上，我不希望用户能够使用浏览器后退按钮返回到向导的状态，因此希望使用向导使以前版本的页面过期（我正在`getPageSettings().setRecreateMountedPagesAfterExpiry(true);`使用如果用户返回时页面过期，挂载的页面将在空白状态下重新创建，这是我想要的）。

环顾四周，我发现可以使用`Session.get().clear();`which 从会话中删除所有页面（我不知道 1.4 版本是删除所有页面还是仅删除用于访问 PageMap 的页面的所有版本 - 这对于多选项卡会更好支持）。但是，使用它只能部分工作，因为最后一页没有过期。

假设向导安装在`/wizard`，最后重定向到`/list`，流程将类似于：`/wizard?1`, `/wizard?2`, `/wizard?3`, `/list`。现在，当我使用后退按钮`/wizard?3`时，虽然`/wizard?1`和`/wizard?2`预期的一样，但并没有过期。会话清除和发送到列表页面是在`onFinish`向导的方法中完成的，如下所示：

```
@Override
public void onFinish() {
  Session.get().clear();
  Session.get().getFeedbackMessages().add(new FeedbackMessage(..));
  setResponsePage(ListPage.class);
} 
```

所以，回到问题本身：有人知道如何获得预期的行为，即过期`/wizard?3`吗？

谢谢

注意：`ListPage`是一个可收藏的页面，我也尝试过`setResponsePage(new ListPage());`

* * *

**根据安德里亚的建议更新我最终所做的事情**

需要注意的是，我的应用程序使用自定义会话对象扩展 wicket 的`Session`；让我们称之为`AppSession`。

1.  在 中`AppSession`，我添加了一个`boolean clearRequested`属性（默认为 false）
2.  在中`AppSession`，我添加了一个静态 void 方法`requestClear()`，它只是在会话中将*clearRequested*设置为 true的快捷方式
3.  在`onFinish()`我的向导中，就在调用之前`setResponsePage`，我调用`AppSession.requestClear()`
4.  最后我只是在`RequestCycleListener`我的应用程序中添加一个。

    ```
    getRequestCycleListeners.add(new AbstractRequestCycleListener() {
      @Override
      public void onBeginRequest(RequestCycle cycle) {
        super.onBeginRequest(cycle);
        AppSession session = AppSesssion.get();
        if (session.isClearRequested()) {
          session.clear();
          session.setClearRequested(false);
        }
      }
    }); 
    ```

现在，每当我需要在操作后清除会话以使页面过期时，我只需调用`AppSession.requestClear()`并在下一个请求中清除会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:40:19.120

您可以在 ListPage 中清除会话。由于此页面是可收藏的，您可以向它传递一个页面参数，指示 ListPage 必须删除会话中的页面。

# git - 将 git repo 中的子目录提取到另一个 repo 并保持 dir 结构？

> ID：12801763
> 
> 赞同：2
> 
> 时间：2012-10-09T13:58:39.587
> 
> 标签：git, git-filter-branch

我的仓库中有几个子树（例如`./sub1/`，，`./sub2/`..），我想将它们提取到单独的仓库中，保持提交历史和相同的目录结构，即一个新的仓库`sub1`应该有`./sub1/`来自主仓库的子树。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T11:41:06.327

您可以将 git 的过滤器分支与子树过滤器一起使用。

以下是步骤：

1.  克隆工作副本。此操作将更改本地 repo，因此我们必须首先有一个工作副本。你可以像下面那样做一个 git clone 或者只是复制它。

    ```
    git clone --no-hardlinks <original repository> <working copy> 
    ```

2.  使用子树过滤器。

    ```
    cd <working copy>

    git filter-branch --subdirectory-filter <subdir path to be splited> --prune-empty --tag-name-filter cat -- --all

    # reset current working directory
    git reset --hard 
    ```

3.  我们已经完成了我们的任务，最好做一些清理工作，因为很多旧对象变得无法访问。

    1.  删除旧遥控器

        ```
        git remote rm origin 
        ```

    2.  删除旧的 reflog

        ```
        # clean unneeded reflog in order to free space
        refbak=$(git for-each-ref --format="%(refname)" refs/original/)
        if [ -n "$refbak" ];then
            echo -n $refbak | xargs -n 1 git update-ref -d
        fi
        git reflog expire --expire=now --all 
        ```

    3.  重新打包并压缩 repo

        ```
        # prune loose objects
        git gc --aggressive --prune=now 
        ```

这将使回购结构从

```
repo/
    |-- sub1/
        |-- sub11
        |-- sub12
    |-- sub2 
```

至

```
repo/
    |-- sub11
    |-- sub12 
```

但是，看起来你希望它变成

```
repo/
    |-- sub1/
        |-- sub11
        |-- sub12 
```

然后，还需要做一个步骤，用 index-filter 重写 git commit 历史。

```
# replace <subdir path> with the actual subdir path, for this case, it should be "sub1"
git filter-branch --index-filter 'git ls-files -s | sed "s-\t-&<subdir path>/-" | GIT_INDEX_FILE=$GIT_INDEX_FILE.new git update-index --index-info && mv $GIT_INDEX_FILE.new $GIT_INDEX_FILE' HEAD 
```

# linux - 从金字塔中杀死 pserve(Gunicorn) 特定服务器

> ID：12801769
> 
> 赞同：3
> 
> 时间：2012-10-09T13:58:58.693
> 
> 标签：linux, web-services, pyramid, kill, gunicorn

我使用金字塔和 pserve 运行 Gunicorn，如下所示：

```
pserve production.ini 
```

生产.ini

```
[server:main]
use = egg:gunicorn#main
host = 0.0.0.0
port = 8080
workers = 3
worker_class = gevent
daemon = true 
```

它返回PID

```
Starting server in PID XXXXX. 
```

但我不能通过跑步来杀死它

```
# kill XXXXX
-bash: kill: (XXXXX) - No such process 
```

或者

```
# pserver --stop-daemon XXXXX
No PID File exists in pyramid.pid 
```

到目前为止，我一直在使用

```
pkill pserve 
```

但是现在，我有多个服务器正在运行，所以它会杀死我所有的服务器。

我怎样才能杀死特定的正在运行的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:45:28.660

if the server is actually running, I'd try something like that.

```
ps -ax | grep pserv[e] 
```

It will show all process with their pid on the first column. If something match what you are looking for. You can kill it. The `x` option should show the command line used to start the process. If you're lucky it will show that it was started in "that" directory or with "that" config file.

otherwise, it might be possible to check which process is listening to which port and getting its pid.

# asp.net - 从页面方法返回纯 html

> ID：12801775
> 
> 赞同：1
> 
> 时间：2012-10-09T13:59:19.617
> 
> 标签：asp.net, webforms

我想要一个 webmethod 返回一个纯 html 字符串。html 没有什么花哨的东西，一个表格和几个表单字段，其中填充了来自数据库的值。

他们是在 html 中构建 html 的简单方法吗？目前我只是动态地建立一个字符串，但它只是感觉很脏。

我可以制作一个完整的 aspx 页面，然后从结果页面中删除我不想要的位，留下纯 html。但这也让人觉得很脏。

或者有模板选项（nvelocity 等），但这似乎有点矫枉过正。

关于更有效的任何建议。

发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:50:28.873

1.  您可以构建一个像 xml 这样的模板文件来编写您的 html 的基本内容，使用 {0}{1}{2}{n} 将静态内容放入其中
2.  根据需要操作此模板服务器端。您可以将数据列表添加到此模板中。
3.  在您的页面上创建一个文字控件。
4.  将服务器端创建的 html 放入您的文字控制中。(myLiteral.Text)

您可以创建一个基本的 asp.net 文件，并通过从文字控件添加 html 模板在其中添加它。

# c++ - << 的奇怪行为（至少在我看来）

> ID：12801776
> 
> 赞同：5
> 
> 时间：2012-10-09T13:59:25.287
> 
> 标签：c++, cout

我无法意识到如何在没有编译器抱怨的情况下以这种方式打印字符串：

```
std::cout << "Hello " "World!"; 
```

事实上，上面这行代码的工作原理完全一样：

```
std::cout << "Hello " << "World!"; 
```

这种行为有解释吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T13:59:57.403

相邻的文字标记会自动连接，这是标准的一部分。

### 2.1 翻译阶段 [lex.phases]

> 6) 相邻~~普通字符串~~文字标记被连接起来。~~连接相邻的宽字符串文字标记。~~

(C++03)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:00:31.207

在 C++ 中，文字标记可以这样连接：

```
const char* thingy = "Hello" "World"; 
```

`"Hello"`和`"World`" 都是文字标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:25:00.320

这是字符串的正常行为。在第一行，指定的字符串由编译器自动连接。作为示例，您还可以指定多行以避免很长的行。

```
const char *strLine = "line 1 "
                      "line 1 "
                      "line 2 "; 
```

它会正常工作。第二行被清除，指定另一行输出。

# javascript - Javascript onkeydown 百分比或五位数

> ID：12801782
> 
> 赞同：4
> 
> 时间：2012-10-09T13:59:37.170
> 
> 标签：javascript, numbers, onkeydown

有什么方法可以查出用户是按百分比键还是 5 数字？它在 FireFox 中具有相同的键码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T14:01:48.067

您可以检查事件对象提供的修饰键。`event.shiftKey`适用于您的特定用例。此外，还有事件的`event.altKey`,`event.ctrlKey`和`event.metaKey`（用于 windows 中的 windows 键和 MAC 键盘中的 command 键）属性。在代码示例中，您必须在 keyCode 处理程序中执行检查：

```
var NUMBER_FIVE = 53;
element.onkeydown = function (event) {
    if (event.keyCode == NUMBER_FIVE) {
        if (event.shiftKey) {
            // '%' handler
        } else {
            // '5' handler
        }
    }
}; 
```

此外，在使用时，`event.keyCode`您正在处理用户在键盘上按下的内容。如果你想检查*特定的 ASCII 字符*，那么你可以使用它`event.charCode`，因为这个事件属性告诉你用户正在输入什么字符，而不是告诉你用户在键盘上按什么。[这是关于 quirksmode 的完整指南。](http://www.quirksmode.org/js/keys.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T14:03:58.233

如果使用`keydown`5 和 % 是相同的 keyCode。事件对象还有一个[`shiftKey`](https://developer.mozilla.org/en-US/docs/DOM/event.shiftKey)布尔属性，它会告诉您用户是否正在按住 shift。

```
document.onkeydown = function (e) {
    if (e.keyCode === 53) {
        if (e.shiftKey) {
            // they pressed %
        } else {
            // they pressed 5
        }
    }
}; 
```

如果要使用`keypress`，它们是两个不同的 keyCode：

```
document.onkeypress = function (e) {
    if (e.keyCode === 53) {
        // they pressed 5
    }

    if (e.keyCode === 37) {
        // they pressed %
    }
}; 
```

[该站点](http://www.asquare.net/javascript/tests/KeyCode.html)非常适合测试 keyCodes。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:03:45.003

检查 shiftKey 值：[jsfiddle](http://jsfiddle.net/94VA4/1/)

```
$(document).keydown(function(e){
  if( e.keyCode == 53 ){
      if(e.shiftKey){
        // %  pressed

     }
     else{
       // 5 pressed
     }
  }

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T19:20:45.660

我测试了 keyCode 和正在输入的字符的值。

```
$(document).on({
 keypress: function(event){
   var charCode = (event.which) ? event.which : event.keyCode;
   var mFive = String.fromCharCode(event.which); 
   if ((charCode == 53) && (mFive === "5")){
       return true;
   }else if ((charCode == 53) && (mFive !== "5")){
       return false;
   }
 }); 
```

# c - 在 C 中：如何将结构数组作为指针传递

> ID：12801784
> 
> 赞同：2
> 
> 时间：2012-10-09T13:59:39.837
> 
> 标签：c, pointers, structure

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T14:07:51.370

> 我有一个也是数组的结构

虽然没有“结构也是数组”这样的东西，但您可以制作一个结构数组。您应该首先解开变量的`typedef`和声明`struct`，如下所示：

```
typedef struct {
    char lastName[20];
    char firstName[20];
    int age;
} PERSON; 

PERSON person[10]; 
```

现在您可以将`PERSON`其用作类型的名称、声明 type 的变量`PERSON`、创建指向它们的指针、传递数组等等，就好像它是一个内置类型的值，例如`int`：

```
void displayArray(PERSON pPerson[], int count) {
    int i = 0;

    printf("Last Name   First Name  Age\n");
    while (i < count){
        printf("%s          %s          %d\n",
               pPerson[i].lastName,
               pPerson[i].lastName,
               pPerson[i].age);
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:32:35.560

*个人[]; 这是你真的想要用户还是你想要这样的东西： typedef PERSON *PPERSON;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:05:24.200

大致写成：** 随便 = * 随便[10]

所以你可能只想要 *PPerson

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:06:17.287

数组可以作为指针传递给函数，因此不要尝试作为指向数组的指针传递（顺便说一下，现在`PPERSON`定义为指针数组，这不是您所拥有的），只需将数组传递为 -是，并制作`PPERSON`一个普通的指针（即`typedef struct tagdata *PPERSON;`）。

然后您可以在函数中使用“指针”作为普通数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:04:14.600

您应该传递一个 void 指针并将其强制转换为 PERSON[10]。

如您所见，您没有将指针传递给 PERSON 结构，而是将指针传递给本身包含该结构的数组。他们不相等。

要使其正常工作，请传递一个 void 指针和一个整数，说明数组中的元素数。当您收到它时，它将帮助您避免读取超出其分配内存的数组。

# javascript - knockout.js 将字符串值绑定到函数

> ID：12801789
> 
> 赞同：0
> 
> 时间：2012-10-09T13:59:56.933
> 
> 标签：javascript, knockout.js

我使用的[JSFiddle 源代码](http://jsfiddle.net/M8KFd/700/)`hello.bind('Hi!!!')`
， 但在方法内部`hello`我得到了视图模型对象而不是字符串值。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:03:25.523

将您的标记更改为：

```
<button data-bind="click: hello.bind($data, 'Hi!!!')">Say hello</button> 
```

从文档中：

`Alternatively, if you prefer to avoid the function literal in your view, you can use the bind function, which attaches specific parameter values to a function reference.` 更多关于绑定的信息可以在[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)中找到。

# php - 表示相当于javascript数组的php关联数组

> ID：12801792
> 
> 赞同：0
> 
> 时间：2012-10-09T14:00:14.607
> 
> 标签：php, javascript, logic, business-logic

给定 PHP 数组：

```
$forColumnsArr['p_pl'] = array('datatype_names' => array('publisher', 'placement', 'placement_groups'), 'labels' => 'All Placements');
$forColumnsArr['a_st'] = array('datatype_names' => array('advertiser', 'campaign', 'strategy'), 'labels' => 'All Campaigns, All Strategies'); 
```

想要类似/等效的 javascript 数组

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:04:56.413

表示为对象：

```
var forColumnsArr = {
     p_pl : {
         datatype_names : { 
            0: 'publisher',
            1: 'placement',
            2: 'placement_groups'
         },
         labels : 'All Placements'
     },
     a_st : {
         datatype_names : { 
            0: 'advertiser',
            1: 'campaign',
            2: 'strategy'
         },
         labels : 'All Campaigns, All Strategies'
     }
}

// console.log(forColumnsArr.p_pl.datatype_names[0]); // publisher
// console.log(forColumnsArr.p_pl.datatype_names[1]); // placement
// console.log(forColumnsArr.p_pl.datatype_names[2]); // placement_groups 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:05:07.133

我个人更喜欢使用`JS objects`，您可以参考 Mihai 的答案。但是，既然您要求数组，那么您就可以了，

```
 var forColumnsArr['p_pl'] = new Array();
 forColumnsArr['p_pl']['datatype_names'][0] = 'publisher';
 forColumnsArr['p_pl']['datatype_names'][1] = 'placement'; 
 forColumnsArr['p_pl']['datatype_names'][2] = 'placement_groups';
 forColumnsArr['p_pl']['labels'] = 'All Placements'; 
```

同样，对于`forColumnsArr['a_st']`，这是[手册](http://www.w3schools.com/js/js_obj_array.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:06:56.257

[您可以使用json_encode](http://php.net/json_encode "json_encode")从 PHP 生成 JavaScript 数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:07:15.317

不要使用数组，使用对象。（好吧，JS 中的数组是一个对象，但现在我们不要去那里。）

```
$forColumnsArr['p_pl'] = array('datatype_names' => array('publisher', 'placement', 'placement_groups'), 'labels' => 'All Placements');

var forColumnsArr = {
'datatype_names': ['publisher', 'placement', 'placement_groups'],
'labels' : 'All Placements'
}; 
```

这称为“对象文字符号”。

还要查找 JSON，这是一个很好的节省时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:07:27.053

```
var p_pl = {
  datatype_names: ['publisher', 'placement', 'placement_groups'],
  labels: 'All Placements'
};

var a_st = {
  datatype_names: ['advertiser', 'campaign', 'strategy'],
  labels: 'All Campaigns, All Strategies'
}; 
```

从 php 分配它们

```
<?php 
$p_pl = json_encode($forColumnsArr['p_pl']);
$a_st = json_encode($forColumnsArr['a_st']);
?>
var p_pl = eval('(' + '<?php echo $p_pl; ?>' + ')');
var a_st = eval('(' + '<?php echo $a_st; ?>' + ')'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T14:11:02.827

```
var forColumnsArr = {
    p_pl: {
        datatype_names: {
             0:'publisher',
                1: 'placement', 
                2: 'placement_groups'

        },
        labels: 'All Placements'
    },
    a_st: {
        datatype_names: {
                0: 'advertiser', 
                1: 'campaign', 
                2: 'strategy'
        },
        labels: 'All Campaigns, All Strategies'
    }
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T14:12:34.273

使用对象和数组文字：

```
var forColumnsArr = {
     p_pl: {
         datatype_names : [
              'publisher',
              'placement',
              'placement_groups'
         ],
         labels : 'All Placements'
    },
    a_st: {
         datatype_names: [
             'advertiser',
             'campaign',
             'strategy'
         ],
         labels: 'All Campaigns, All Strategies'
    }
}; 
```

[访问这些对象的属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)就像在 PHP 中一样，可以使用括号或点表示法。

您可以通过调用PHP 对象上的[`json_encode`函数](http://www.php.net/manual/en/function.json-encode.php)轻松生成此 JSON 标记。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-09T14:19:40.860

```
var object = {
    'datatype_names' : {
        'publisher':'Value', 
        'placement':'Value', 
        'placement_groups':'Value'
    },
    'labels' : 'All Placements'
}

console.log(object); 
```

# javascript - Extjs domQuery 使用 grid.up().query()

> ID：12801803
> 
> 赞同：1
> 
> 时间：2012-10-09T14:01:06.190
> 
> 标签：javascript, extjs, extjs4

我在使用 domquery 时遇到问题，当网格单元处于编辑模式时，将注意力集中在网格之前的控件上，我正在尝试的是

1.check grid tabindex 加1，gridTabIndex = grid.dom.tabindex - 1

2.do grid.up() 寻找主要形式，

3.然后使用**domquery form.query('input[tabindex = gridTabIndex]')**搜索 tabindex = grid.tabindex - 1 的字段

使用 grid.up().query() 给出如下输出，如图所示

![grid.up().query() 的输出](../Images/484373e194248cc19e89fc189b7bec65.png)

所以第3点是我面临问题的地方。它给出一个空数组 // 输出是 []

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:25:57.180

`form.query` **不**查询 Dom 元素。它查询 ExtJs 组件。但是`form.getEl().query` **请**查询 Dom 元素。试试看。（注意，[Ext.dom.Element.query](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-query)仅从 4.1.0 开始可用）

# linux - linux中的GPIO API在时间上是确定性的吗？

> ID：12801804
> 
> 赞同：2
> 
> 时间：2012-10-09T14:01:10.480
> 
> 标签：linux, linux-kernel, linux-device-driver, gpio

我需要在我的驱动程序中调用`gpio_get_value`, `gpio_set_value`,`gpio_direction_input/output`并且有一个时间要求，要求函数调用在短时间内返回`5us`。

能`gpiolib`满足这个要求还是不是确定性的？如果没有，有什么解决办法？直接访问GPIO寄存器？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:37:57.517

调用其中一个函数涉及执行 linux 内核函数，因此至少有两个上下文切换：一个运行内核代码，一个返回用户空间。

这些开关可能意味着如果中断或信号进入执行，可能会浪费一些时间。

无论如何，如果您需要确定的时间期限，您需要切换到实时修补内核[实时 linux wiki 主页](https://rt.wiki.kernel.org/index.php/Main_Page "转发维基")

我不知道 5us 是否可行，这取决于系统负载、活动驱动程序（例如，有读/写文件系统？），但您可以测试。

# ruby-on-rails - Rails 中的时间行为

> ID：12801807
> 
> 赞同：0
> 
> 时间：2012-10-09T14:01:30.673
> 
> 标签：ruby-on-rails, ruby, time

> **可能重复：**
> [UTC 时间重置为 2000-01-01（红宝石）。如何防止时间重置？](https://stackoverflow.com/questions/7515398/utc-time-resets-to-2000-01-01-ruby-how-do-i-prevent-the-time-from-resetting)

在我的 application.rb 中，我有：

```
config.time_zone = "Eastern Time (US & Canada)" 
```

如果在我的应用程序中，我显示：

```
<%= Time.now %> 
```

一切看起来都如我所料（“ `2012-10-09 09:20:39 -0400`”）。

我还有一个`Session`模型，其属性为 ' `start`' 和 ' `end`' 类型`Time`。

如果，在我的应用程序代码中，我创建一个`Session`并设置`s.start=Time.now`，则时间在数据库中显示为 UTC 时间，如果为应用程序翻译这是可以的，但日期为`2000-01-01`, 并且，如果在应用程序中以相同的方式显示我有类似的东西：

```
<%= s.start %> 
```

此外，如果我稍后用 填充我的 ' `end`' 属性`s.end = Time.now`，我会得到一个类似的`2000-01-01`UTC 时间值。同时，我设置了一个`elapsed`时间属性为：

```
s.elapsed = s.end - s.start 
```

在数据库中，`elapsed`显示为一个非常大的数字（403056003），即使两者之间的差异`start`只有`end`几秒钟。

如果我稍后在我的应用程序中显示`s.elapsed`和（ ），则在数据库中显示大数字（显然），但计算显示正确！`s.end - s.start``s.elapsed``s.end - s.start`

对不起，如果这是漫无边际的。我显然错过了一些基本的东西，但无法到达那里。

# winforms - 我们可以在winforms 中创建datagridview 用户控件吗？

> ID：12801809
> 
> 赞同：0
> 
> 时间：2012-10-09T14:01:40.480
> 
> 标签：winforms, datagridview, user-controls

我是 winforms 的新手，我想创建一个 datagridview 用户控件。我们可以在 winforms 中创建 datagridview 用户控件吗？我用谷歌搜索但没有找到任何资源..任何输入将不胜感激..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:39:40.193

您可以创建一个 UserControl，使用从 ToolBox 拖放的方式在其上放置一个 DataGridView，然后自定义您的 DataGridView，构建项目，您可以从 ToolBox 中选择 UserControl 并在您想要的任何地方使用它。
[这](http://msdn.microsoft.com/en-us/library/a6h7e207%28v=VS.71%29.aspx)是开始使用 UserControls 的 C# 演练。

**编辑：**

要将数据绑定到您的 UserControl，您可以公开 DataGridView 的 DataSource 属性。假设在您的 UserControl 上有一个名为 dataGridView1 的 DataGridView ：

```
public class UcMyCustomizedGridView : UserControl
{
   public object DataSource 
   {
        get{ return dataGridView1.DataSource;}
        set{ dataGridView1.DataSource = value;}
    }

    public UcMyCustomizedGridView()
    {
        InitializeComponent();
    }
} 
```

在您的表单中，您可以像这样将数据绑定到 UserControl：

```
IEnumerable list;
// fill the list with your data
ucMyCustomizedGridView1.DataSource = list; 
```

# android - 如何在 C 中编写一个 android OpenGL 应用程序并在有根手机上使用 ADB 加载它？

> ID：12801812
> 
> 赞同：3
> 
> 时间：2012-10-09T14:01:55.903
> 
> 标签：android, c++, c, linux, opengl-es

我想编写一个用户空间应用程序，用它编写`c`或`c++`使用并在智能手机`OpenGL`上运行它。`Android`

在`AndroidManifest.xml`我有这些写：

```
android:label="Graphics/OpenGL ES/Compressed Texture"
android:label="Graphics/OpenGL ES/Cube Map"
android:label="Graphics/OpenGL ES/Frame Buffer Object"
android:label="Graphics/OpenGL ES/GLSurfaceView"
android:label="Graphics/OpenGL ES/OpenGL ES 2.0"
android:label="Graphics/OpenGL ES/Matrix Palette Skinning"
android:label="Graphics/OpenGL ES/Translucent GLSurfaceView" 
```

我使用[了本](http://my.safaribooksonline.com/book/programming/opengl/9780321563835/hello-triangle-an-opengl-es-2dot0-example/ch02#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODAzMjE1NjM4MzUlMkZjaDAybGV2MXNlYzM=)教程，但没有创建头文件，我找不到该`esUtil.h`文件。大多数教程中都包含 ( `#include "esUtil.h"`)。

我假设那是`.h` [文件](http://opengles-book-samples.googlecode.com/svn-history/r53/trunk/LinuxX11/Common/esUtil.h)。总结一下我想做的步骤：

1.  使用 OpenGL 编写 ac/cpp 代码。
2.  将其构建为可执行文件`a.out`。
3.  用于`adb`将其加载到手机中。
4.  `a.out`在手机上运行。（假设我已经植根手机）

请注意，***我不喜欢使用`glut`或`NDK`***

# javascript - TypeScript 中的区域

> ID：12801815
> 
> 赞同：76
> 
> 时间：2012-10-09T14:02:14.637
> 
> 标签：javascript, visual-studio-2012, typescript, regions

在我的 JavaScript (.js) 文件中，我使用 Visual Studio 2012 插件用于区域[（此处）](http://visualstudiogallery.msdn.microsoft.com/4be701d8-af03-40a4-8cdc-d2add5cde46c)，如下所示：

```
//#region "My Region"

//Code here

//#endregion "My Region" 
```

我也想在 TypeScript (.ts) 文件中有区域。现在有这种可能吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-21T16:41:57.153

您可以下载[Web Essentials 2012](https://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)，它允许您在 TypeScript 中使用区域。

如果您使用 Visual Studio 2015，这里是最新的链接。 [网络要点 2015.3](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.WebEssentials20153)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-28T15:15:52.313

Visual Studio 2017 还支持[此处](https://marketplace.visualstudio.com/items?itemName=MadsKristensen.JavaScriptRegions)的区域。

可在[此处](http://vswebessentials.com/download)找到通过 Web Essentials 对旧版本的支持。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-07-19T13:45:59.327

您可以在此处关注 TypeScript GitHub 问题

[TypeScript 区域 #11073](https://github.com/Microsoft/TypeScript/issues/11073)

目前还没有关于何时实施的预计时间，目前正在等待更多反馈。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-09T14:06:38.017

要请求 TypeScript 的新功能，您应该开始[讨论 Codeplex](https://typescript.codeplex.com/discussions)。

有很多[关于区域是一件坏事的观点](http://www.stevefenton.co.uk/Content/Blog/Date/201006/Blog/The-Dot-Net-Campaign-Against-Regions/)——也许他们告诉你你在一个文件中有太多的东西。TypeScript 有一种从许多不同文件加载模块的好方法，使用它来分离您的关注点可能会更好。

# php - 从 ext.data.store 获取实际数据

> ID：12801819
> 
> 赞同：0
> 
> 时间：2012-10-09T14:02:32.710
> 
> 标签：php, javascript, extjs

我有这个数据存储

```
 mystore= Ext.create('Ext.data.Store', {
        id: _id.boxesComboStore,
        fields: ['label', 'value', 'id', 'type'],
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'url/to/controller',
            reader: {
                type: 'json',
                root: 'MyModel'
            }
        }
}) 
```

如何轻松访问商店中的实际数据？例如第三条记录，如果我在商店中有多个记录，则类型的实际值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:21:43.863

如果您想要第三条记录，获取数据的一种方法是使用[`getAt(id)`](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-getAt)：

```
var store = Ext.getStore('StoreId');
var record = store.getAt(2).data
var type = record.type; 
```

为了[`Ext.getStore(name)`](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.app.Controller-method-getStore)工作，您必须`storeId`为您的商店定义一个。

# c# - VS2012 - 编辑项目文件 - 错误：命令“Project.UnloadProject”不可用

> ID：12801820
> 
> 赞同：0
> 
> 时间：2012-10-09T14:02:34.450
> 
> 标签：c#, .net-4.0, asp.net-mvc-4, visual-studio-2012

在 Visual Studio 2012 (Windows 8 x64) 中，我右键单击一个项目并选择“编辑项目文件”。这导致了以下错误：命令“Project.UnloadProject”不可用。

我在 MS Connect 上开了一张票：[https ://connect.microsoft.com/VisualStudio/feedback/details/766720/command-project-unloadproject-is-not-available](https://connect.microsoft.com/VisualStudio/feedback/details/766720/command-project-unloadproject-is-not-available)

还有其他人看到这个和/或有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:33:23.957

我今天试图解决同样的错误。这是我为其他在搜索相同问题时发现此问题的人找到的内容。

“编辑项目文件”是 Power Tools for Visual Studio 扩展添加的菜单选项。它调用内置的“卸载项目”命令。如果您查看上下文菜单并且“卸载项目”不在其上，则会收到您看到的错误，因为该命令无法调用。

就我而言，当我开始尝试更新一堆单个项目帮助解决方案时遇到了这个错误。当您使用单个项目加载解决方案时，“卸载项目”命令在项目的上下文菜单中不可用。

没有解决方法 - 您必须手动签出项目文件，使用文本编辑器对其进行编辑并重新签入。

编辑：我没有 VS 2012，因此无法确认该版本，但对于 VS 2010，您可以转到解决方案导航器（不是解决方案资源管理器），右键单击解决方案并选择卸载项目，然后右键单击该项目，您可以在 VS 中对其进行编辑。

编辑#2：Argh - 解决方案导航器来自另一个扩展，Visual Studio Productivity Power Tools。不知道它是否在 VS 2012 版本中，但这里是 VS 2010 版本的链接：http: [//blogs.msdn.com/b/visualstudio/archive/2010/07/20/solution-navigator-blog-post .aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/20/solution-navigator-blog-post.aspx)。

最后一次编辑，我发誓：工具、选项、项目和解决方案中有一个选项，一般为“始终显示解决方案” - 检查该选项，项目上下文菜单将显示卸载项目，并且不会发生错误。

# mysql - 错误回滚的 MySQL 脚本

> ID：12801821
> 
> 赞同：8
> 
> 时间：2012-10-09T14:02:38.110
> 
> 标签：mysql, transactions

我正在尝试在 MySql 中创建一个事务，该事务将在事务期间发生异常时回滚。在存储过程中使用以下类似。

```
DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK; 
```

这可以在不编写存储过程的情况下完成吗？例如，下面的代码片段应该回滚第一个插入，因为第二个插入会失败。

```
START TRANSACTION;
INSERT INTO mytable VALUE 'foo1',2,'foo3','foo4'
INSERT INTO mytable VALUE 'foo1','foo2','foo3','foo4'
COMMIT 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:27:33.317

如果我理解正确，您希望在单个事务中运行包含例如插入的 SQL 脚本，如果任何插入失败，该事务将回滚。是正确的？

我对此不是 100% 的，但我很确定您需要将其作为存储过程或以编程方式在 Java 中执行。

# mysql - 具有最大值的mysql嵌套查询

> ID：12801823
> 
> 赞同：0
> 
> 时间：2012-10-09T14:02:50.293
> 
> 标签：mysql, nested

我有如下三个表，并试图提取为成员的最高访问数提供问卷的次数。这样做的目的是防止在最近两次提示访问者的情况下向访问者提示问卷（一旦经过一定时间，visit_number 字段就会增加）。我的 bash 如下（如下表），但这显然是不对的，我得到了数千个结果。希望你至少能看到我想用它做什么

```
Members
->id

Visits
->id
->visit_number
->member_id

Questionnaire
->id
->visit_id

SELECT COUNT(*)
FROM questionnaires q
JOIN visits v 
ON q.visit_id = (SELECT MAX(id) FROM visits v WHERE v.member_id = ".$this->id.")
ORDER BY q.id DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:08:14.957

尝试这个：

```
SELECT COUNT(*)
FROM questionnaires q
INNER JOIN Visits v1 ON q.visit_id = v1.id
INNER JOIN
(
    SELECT MAX(visit_number) MaxVisitNumber, member_id
    FROM visits
    GROUP BY member_id
) v2 ON v1.member_id = v2.member_id AND v1.visit_number = v2.MaxVisitNumber
INNER JOIN members m ON v2.member_id = m.Id
WHERE m.Id = @someId 
```

# css - CSS中的导航栏圆形图像

> ID：12801837
> 
> 赞同：1
> 
> 时间：2012-10-09T14:03:26.917
> 
> 标签：css, rounded-corners

我在 CSS 中创建一个导航栏。导航栏有一个背景图像，我希望图像有圆角。我已经尝试过其他的东西，`-moz`但到目前为止没有任何效果。这是我的CSS：

```
ul{
    background-image: url(nav_bar.png); height: 60px;width: 35%;
    background-repeat: no-repeat;
    position: relative;
    margin:1;
    padding:0;
    left: 30%;
} 
```

我怎样才能给它圆角？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:07:06.563

`border-radius`与 一起使用`background-clipping: padding-box;`。除非您包含[PrefixFree 之](http://leaverou.github.com/prefixfree/)类的内容，否则这两个属性都需要特定于浏览器的前缀。

您添加的 CSS 如下所示：

```
ul {
    -moz-border-radius: 10px; /*increase the value to make it more round*/
    -webkit-border-radius: 10px;
    border-radius: 10px;
    -moz-background-clipping: padding-box;
    -webkit-background-clipping: padding-box;
    background-clipping: padding-box;
} 
```

# css - @media 适用于浏览器窗口调整大小，但不适用于手机

> ID：12801840
> 
> 赞同：4
> 
> 时间：2012-10-09T14:03:35.383
> 
> 标签：css, mobile, resize, media

已解决：汤姆：你说的太对了。不幸的是，由于插件，WordPress 函数 wp_head() 添加了 width=1100。谢谢！

我正在开发一个新的响应式网站，但似乎无法让 @media 查询正常工作。在我的桌面上调整浏览器窗口大小时它确实有效，但它不适用于我的 ipad、iphone 或 android 手机。

我究竟做错了什么？！

这里是链接：[http](http://demo.mindspins.com/atmnieuw/) ://demo.mindspins.com/atmnieuw/ 这里是 CSS 的链接：http: [//demo.mindspins.com/atmnieuw/wp-content/themes/atm/css/dynamic.php](http://demo.mindspins.com/atmnieuw/wp-content/themes/atm/css/dynamic.php)

提前致谢！

根据要求提供 CSS 代码：

```
@media all and (max-width: 1460px) {
    .site-width{ width: 1199px; }
    .main-width{ width: 719px; }
}
@media all and (max-width: 1220px) {
    .site-width{ width: 959px; }
    .main-width{ width: 479px; }
    #page-title h1.thetitle{
        font-size: 20px;
        line-height: 24px;
    }
    .sidebar .widget a.form-button-link, .sidebar .widget span.form-button-link{
        font-size: 20px;
        line-height: 24px;
    }
}
@media all and (max-width: 980px) {
    .site-width{ width: 719px; }
    .main-width{ width: 479px; }
    .right-width{ display: none; }
    #header-right{ display: none; }
    .widgets-wrapper-1{ display: block; }
    .widgets-wrapper-3{ display: block; position: relative; padding: 20px 0 0 20px; }
}
@media all and (max-width: 740px) {
    .site-width{ width: 95%; margin: 0 auto;}
    #header-wrapper{ width: 100%; }
    #header-left{ display: none; }
    #header-mid{ height: 80px; }
    #atmlogo a.atm {
        z-index: 100;
        top: 24px;
        left: 0;
    }
    .main-width{ width: 100%; }
    .left-width{ width: 100%; }
    .sidebar-left{ display: none; }
    .site-bg{ display: none; }
    #header-left span.header-contact{ height: 80px; width: 100%;}
    #main-nav{ height:auto !important; }
    #mobile-nav{
        margin: -4px 0 1px 0;
        display: block;
        position: relative;
        width: 100%;
    }
    #mobile-nav .nav-wrapper{
        display: block;
        color:  #fff;
        background: #cc0033;
        margin: 1px 0;
        height: 40px;
        padding: 0 10px;
    }
    #mobile-nav .nav-wrapper select.atm-dropdown{
        font-size: 12px;
        display: block;
        height: 40px;
        width: 100%;
        color:  #fff;
        background: #cc0033;
        border: 0;
        clear: both;
        -webkit-border-radius: 0;
        -webkit-appearance: none;
    }
    #mobile-nav .theme-s{
        width: 100%;
        background: #cc0033;
        color:  #fff;
    }

    #mobile-nav input.s{
        background: #cc0033;
        color:  #fff;
    }

    #mobile-nav input.searchsubmit{
        border-left: solid 1px #dcdcdc;
        color:  #fff;
        background: #cc0033;
        background-image: url(../images/icon_search.png);
        background-repeat: no-repeat;
        background-position: right top;
        -webkit-border-radius: 0;
        -webkit-appearance: none;
    }

    #primary{ display: none; }
    #main-content-header{
        height:auto !important;
        margin: 0 0 1px 0;
    }
    #main-content-header span.header-image{
        display: block;
        float: left;
        width: 25%;
        height:auto !important;
        margin: 0;
    }
    #main-content-header span.header-image img{
        line-height: 0px;
        margin: 0;
        padding: 0;
    }

    #page-title{
        height: 79px;
    }
}
@media all and (max-width: 500px) {
    body {
        font-size: 12px;
        line-height: 20px;
    }
        #footer-nav{ display: none; }
        #copyrights{ display: none; }
        .entry-content-bg{ padding: 20px; }
        #page-title .title-wrapper{ padding: 0 20px }
        #page-title h1.thetitle{
        font-size: 16px;
        line-height: 20px;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T14:07:52.840

您可以在 head 标签中使用此代码：

```
<meta name="viewport" content="width=device-width, initial-scale=1"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:51:04.807

再看一遍，当使用我的 iPhone 4S 和 iOS 6 中引入的 Remote Web Inspector 时，我找不到下面任何样式的任何样式`max-width: 1200px`，即使它们在 CSS 文件中。我不知道这是为什么。

另外，几个月前我写了一篇关于响应式设计和媒体查询的博文，如果你愿意，可以[在这里阅读。](http://5lin.es/blog/2012/07/30/responsive-design-and-media-queries/)并不是说你不擅长媒体查询（这是一个非常好的网站！）只是希望这对你来说会是一个有趣的阅读:)

编辑：再次查看您的网站，我注意到`head`（在底部）您有以下代码：

```
meta name="viewport" content="width=1100" 
```

这可能就是为什么样式在屏幕宽度低于 1100 像素或 1200 像素时无法应用的原因。把这个拿出来再试一次。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T15:09:33.063

这可能与将 CSS 放在单独的文件中有关。作为一般规则，您应该始终将所有 CSS 写入一个文件 ( `style.css`)。它不应该这样做，只是为了清楚起见将它们放在同一个文件中，看看会发生什么。如果它不起作用对此发表评论，我会再看看。

# iphone - 如何在iphone中使用自动释放

> ID：12801843
> 
> 赞同：1
> 
> 时间：2012-10-09T14:03:38.950
> 
> 标签：iphone, ios, autorelease

我想在我的应用程序中使用自动发布。我想实现这个方法 ![通过分析得到](../Images/b0ba54406052c78af8e72e9022bf7ac0.png)

```
- (void)selectorConnect: (NSArray *)args
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    //some code 

    [pool release];
} 
```

在线崩溃`[pool release]`。任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:07:05.290

当您清空自动释放池时，它会调用其中`autorelease`的所有对象。

如果您遇到`[pool release]`线路崩溃，那么您已将一个对象添加到自动释放池并自己释放它。

运行静态分析器，看看它会给你什么警告。

如果您仍然不知道，请启用`NSZombies`并查看两次释放的对象。

最后，如果这仍然没有帮助，请将您的代码添加到问题中，我们都可以看看:)

# c++ - 无法访问我的 UI 小部件

> ID：12801846
> 
> 赞同：0
> 
> 时间：2012-10-09T14:03:54.443
> 
> 标签：c++, qt

我有一个包含所有小部件的 MainWindow 类，我有一个 MyClass 类，我想在其中访问放置在主窗口（MainWindow 类）中的所有小部件。我怎样才能做到这一点？我尝试这样做（下面的代码） - 但它给了我一堆错误：

```
MyClass.h:4: error: 'Ui' has not been declared
MyClass.h:4: error: expected `)' before '*' token
MyClass.h:6: error: 'Ui' has not been declared
MyClass.h:6: error: ISO C++ forbids declaration of 'MainWindow' with no type
MyClass.h:6: error: expected ';' before '*' token 
```

这个由 QtCreator 创建的 MainWindow - 它是由 Qt Creator 创建的标准 GUI 窗口。

```
// -=-=-=-=-=-=-=-=-=-=[ MyClass.h ]=-=-=-=-=-=-=-=-=-=-=-=-=-
#include "MainWindow.h"
class MyClass {
    public:
        MyClass( Ui::MainWindow *ui );
    private:
        Ui::MainWindow *ui;
};

// -=-=-=-=-=-=-=-=-=-=[ MyClass.cpp ]=-=-=-=-=-=-=-=-=-=-=-=-=-

#include "MyClass.h"

MyClass::MyClass( Ui::MainWindow *ui ){
    this->myUI = ui; // myUI is desclared as: Ui::MainWindow *myUI
}

// -=-=-=-=-=-=-=-=-=-=[ MainWindow.h ]=-=-=-=-=-=-=-=-=-=-=-=-=-
....
namespace Ui {
    class MainWindow;
}
class MainWindow : public QMainWindow {
    Q_OBJECT    
    private:
        Ui::MainWindow *ui; // this has done by Qt Creator
    public:
        MyClass *myClass;
}
// -=-=-=-=-=-=-=-=-=-=[ MainWindow.cpp ]=-=-=-=-=-=-=-=-=-=-=-=-=-
#include "MainWindow.h"
MainWindow::MainWindow( QWidget *parent ): QMainWindow( parent ), ui( new Ui::MainWindow ) {
    ui->setupUi( this );
    myClass = new MyClass( ui ); // my attempt
} 
```

**更新：** 米色下面的评论中有有用的代码。它工作正常。但不是在我的情况下:(当我尝试从任何类（而不是 MainWindow.h）声明 MyClass 时：

// -=-=-=-=-=-=-=-=-=-=[ MyGLWidget.h ]=-=-=-=-=-=-=-=-=-=-=-= -=-

```
#include "MyClass.h"
class MyGLWidget : public QGLWidget {
   Q_OBJECT
   public:
     MyClass *myClass;
} 
```

它不起作用：

```
myclass.h:9: error: 'Ui' has not been declared
myclass.h:9: error: expected `)' before '*' token
myclass.h:12: error: 'Ui' has not been declared
myclass.h:12: error: ISO C++ forbids declaration of 'MainWindow' with no type
myclass.h:12: error: expected ';' before '*' token 
```

但为什么？我在 MyClass.h 中声明了“ui_mainwindow.h”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:08:13.030

MyClass 头文件必须包含从用户界面编译器生成的头文件。在您的情况下，它被称为 ui_mainwindow.h。MyClass 的构造函数将获取 Ui::MainWindow 参数并将其保存在私有成员变量中。

在 MainWindow 的构造函数中，您可以使用 MainWindow ui 初始化 MyClass 成员变量。

// -=-=-=-=-=-=-=-=-=-=[ myclass.h ]=-=-=-=-=-=-=-=-=-=-=-= -=-

```
#include <ui_mainwindow.h>

class MyClass
{
public:
    MyClass(Ui::MainWindow *ui);

private:
    Ui::MainWindow *myUi;
}; 
```

// -=-=-=-=-=-=-=-=-=-=[ myclass.cpp ]=-=-=-=-=-=-=-=-=-=-=-= -=-

```
MyClass::MyClass(Ui::MainWindow *ui)
{
    // Save the MainWindow-ui as private member of MyClass
    this->myUi = ui;
} 
```

// -=-=-=-=-=-=-=-=-=-=[ MainWindow.h ]=-=-=-=-=-=-=-=-=-=-=-= -=-

```
#include <QMainWindow>
#include "myclass.h"

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
    MyClass *myClass; // myClass member dont't has to be public
}; 
```

// -=-=-=-=-=-=-=-=-=-=[ MainWindow.cpp ]=-=-=-=-=-=-=-=-=-=-=-= -=-

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    // Initialize MyClass with the MainWindow-ui
    myClass = new MyClass(ui);
}

MainWindow::~MainWindow()
{
    delete myClass;
    delete ui;
} 
```

# ruby-on-rails - 32651：Float 与 Float 的错误比较失败 ruby

> ID：12801851
> 
> 赞同：5
> 
> 时间：2012-10-09T14:04:14.973
> 
> 标签：ruby-on-rails, ruby

我是 Rails 的新手，我遇到了一个错误，我似乎找不到问题所在。这是日志：

```
[32651:ERROR] 2012-10-09 13:46:52 :: comparison of Float with Float failed
[32651:ERROR] 2012-10-09 13:46:52 :: /home/sunny/backend/lib/analytics/lifetime.rb:45:in `each'
/home/sunny/backend/lib/analytics/lifetime.rb:45:in `max'
/home/sunny/backend/lib/analytics/lifetime.rb:45:in `max_growth'
/home/sunny/backend/lib/analytics/lifetime.rb:15:in `run'
/home/sunny/backend/lib/analytics/post_analytics.rb:102:in `lifetime'
/home/sunny/backend/lib/analytics/post_analytics.rb:27:in `run`run'
lib/endpoints/posts/index.rb:65:in `block in response'
lib/endpoints/posts/index.rb:62:in `each'
lib/endpoints/posts/index.rb:62:in `response'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/api.rb:163:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/rack/validation/required_param.rb:43:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/rack/params.rb:61:in `block in call'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/rack/validator.rb:40:in `safely'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/rack/params.rb:59:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/rack/async_middleware.rb:73:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/async-rack-0.5.1/lib/async_rack/async_callback.rb:114:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/async-rack-0.5.1/lib/async_rack/async_callback.rb:91:in `block in new'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/request.rb:163:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/goliath-1.0.0.beta.1/lib/goliath/request.rb:163:in `block in process' 
```

每当我转到文件并找到该行时，都没有`each`，我无法理解问题出在哪里。任何人都可以帮忙吗？不仅仅是修复，我想了解这个问题。

这是文件：

```
class Lifetime
  attr_reader :values

  GROWTH_CUT_OFF = 0.10

  def initialize(engaged_users_values)
    @values = engaged_users_values
  end

  def run
    growths      = growth(values)

    return [0] if growths.uniq.first == 0 || growths.empty?

    max_growth   = max_growth(growths)
    dead_growth  = least_growth(growths, max_growth)

    time_diff = time_diff(values.last['end_time'],
                          values.first['end_time'])
    return [time_diff] unless dead_growth

    dead_loc     = growths.index(dead_growth)
    dead_value   = values[dead_loc]
    lifetime(values.first, dead_value)
  end

  def time_diff(last, first)
    in_minutes(parse_time(last)-parse_time(first))
  end

  def parse_time(time)
    DateTime.parse(time)
  end

  def growth(values)
    values.each_cons(2).map do |one, two|
      one_value = one['value'].to_f
      two_value = two['value']

      ((two_value-one_value)/(one_value)*100).round(2)
    end
  end

  def max_growth(growths)
    growths.max
  end

  def least_growth(growths, max_growth)
    growth_cut = growth_cut(max_growth)
    growths.select {|g| g <= growth_cut}.first
  end

  def growth_cut(max_growth)
    max_growth*GROWTH_CUT_OFF
  end

  def lifetime(first_value, last_value)
    first = parse_time(first_value['end_time'])
    last  = parse_time(last_value['end_time'])

    result = last-first
    [in_minutes(result)]
  end

  def in_minutes(time)
    time.to_f*24*60
  end
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T14:35:55.297

如果两个浮点数之一是 NaN，那么您会收到此消息。因此，请防止出现 NaN 情况。

如果您发布错误的确切代码（max_growth 方法），我们可以为您提供更多信息

# powershell-2.0 - icacls 从 ACL 中删除所有组

> ID：12801852
> 
> 赞同：1
> 
> 时间：2012-10-09T14:04:14.910
> 
> 标签：powershell-2.0, acl

我正在尝试使用 icacls 修改文件上的 ACL。我希望这个文件归管理员所有，并且只有管理员可以访问。我发现了如何使管理员成为文件的所有者，并且我知道如何从安全列表中删除一个组，但是如果我不知道管理员组的名称，我不知道如何删除除管理员组之外的所有组其他组。

我正在寻找一种方法来告诉 Windows 我只想让管理员访问该文件并删除任何其他用户/组（如果有）。

我尝试使用通配符，但它不起作用。

这是我的脚本：

```
$domain     = [Environment]::UserDomainName
$user       = [Environment]::UserName
icacls $myinvocation.mycommand.path /setowner "$domain\$user" /T
icacls $myinvocation.mycommand.path /grant "$domain\$user"

icacls $myinvocation.mycommand.path 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:07:33.677

理论上，您可以`:r`在授权后使用（请参阅[Docs](http://technet.microsoft.com/en-us/library/cc753525%28v=ws.10%29.aspx)）。但是，在实践中，我无法完成这项工作。我认为`:r`意味着“仅替换*指定用户的权限*”。

我已经在 Powershell 中测试了以下解决方案，但它工作正常。

```
# Reset the folder to just it's inherited permissions
icaclsname c:\temp\test /reset 

# Then, disable inheritance and remove all inherited permissions
icacls c:\temp\test /inheritance:r

# Note the :r after grant. It's not now needed, but I've left it in anyway.
# Permissions replace previously granted explicit permissions.
# Also note the :F, where : is escaped with `. This grants FULL CONTROL.
# You can replace F with whatever level of control is required for you.
icacls c:\temp\test /grant:r $domain\$user`:F 
```

# ios - air3.4下如何获取ios设备令牌

> ID：12801857
> 
> 赞同：1
> 
> 时间：2012-10-09T14:04:29.300
> 
> 标签：ios, actionscript-3, air

应该内置新的 adobe air3.4 APN。但是我似乎无法让 ios 返回设备令牌。我的回调没有被调用。

所有相关的类都被导入。该应用程序会按预期安装和注册通知

我有以下代码（我确信它已被执行，因为我可以跟踪各种对象）：

```
 var remoteNotifier:RemoteNotifier = new RemoteNotifier();

                try 
                {
                    trace("try token");
                    remoteNotifier.addEventListener(RemoteNotificationEvent.TOKEN, tokenRecieved);
                }
                catch (err:Error)
                {
                    trace("token error: " + err.message);
                }

                try 
                {
                    trace("try statusevent")
                    remoteNotifier.addEventListener(StatusEvent.STATUS, subscriptionFailureCallback);
                }
                catch (err:Error)
                {
                    trace("statusevent error: " + err.message);
                }

                trace("remote notifier: " + remoteNotifier);

                // calling subscribe method without any subscribe options automatically subscribes 
                // for all notification styles supported on that platform
                //CONFIG::DEBUGGING { traceTF("subscribe - notifications"); }
                try 
                {
                    trace("try subscribe")
                    remoteNotifier.subscribe();

                }
                catch (err:Error)
                {
                    trace("subscribe error: " + err.message);
                } 
```

未调用 RemoteNotificationEvent 或 StatusEvent。该怎么办？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-13T07:47:22.647

您可能会错过想要订阅的通知类型。尝试添加这个：

```
var preferredStyles:Vector.<String> = new Vector.<String>();
preferredStyles.push(NotificationStyle.ALERT, NotificationStyle.BADGE, NotificationStyle.SOUND);
var subscribeOptions:RemoteNotifierSubscribeOptions = new RemoteNotifierSubscribeOptions();
subscribeOptions.notificationStyles = preferredStyles; 
```

然后，当您订阅时，您可以使用以下选项：

```
remoteNotifier.subscribe(subscribeOptions); 
```

# java - 我在 dalvik.system.PathClassLoader.findClass 的启动器主题 java.lang.ClassNotFoundException 上不断收到此错误

> ID：12801858
> 
> 赞同：0
> 
> 时间：2012-10-09T14:04:32.680
> 
> 标签：java, android

以下是来自开发者控制台的实际错误。我的启动器主题有一个应用程序，因此用户可以应用主题、联系我等...

```
 java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{bigdx.golauncher.serenity.red/bigdx.golauncher.serenity.red}: java.lang.ClassNotFoundException: bigdx.golauncher.serenity.red in loader dalvik.system.PathClassLoader[/data/app/bigdx.golauncher.serenity.red-1.apk]
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1722)
    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:974)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3821)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.ClassNotFoundException: bigdx.golauncher.serenity.red in         loader dalvik.system.PathClassLoader[/data/app/bigdx.golauncher.serenity.red-1.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1616)
    ... 11 more 
```

这是我的应用程序的 android 清单。第一次发帖的时候忘记加了

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="11" android:versionName="4.4"     package="bigdx.golauncher.serenity.red"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="7" />
<uses-permission android:name="android.permission.SET_WALLPAPER" />
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS" />
<application android:theme="@android:style/Theme.NoTitleBar" android:label="@string/theme_title" android:icon="@drawable/theme_icon">
    <activity android:label="@string/app_name" android:name=".HelperActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="com.anddoes.launcher.THEME" />
        </intent-filter>
    </activity>
    <activity android:label="@string/theme_title" android:name=".Icons" />
    <activity android:label="@string/wp_theme_title" android:icon="@drawable/wallpaper_icon2" android:name=".Wallpaper" android:screenOrientation="nosensor" android:finishOnCloseSystemDialogs="true">
        <intent-filter>
            <action android:name="android.intent.action.SET_WALLPAPER" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:label="@string/theme_title" android:icon="@drawable/theme_icon" android:name=".Docks">
        <intent-filter>
            <action android:name="android.intent.action.PICK" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/*" />
        </intent-filter>
    </activity>
    <activity android:label="@string/theme_title" android:icon="@drawable/theme_icon" android:name="bigdx.golauncher.serenity.red.GoLauncher">
        <intent-filter>
            <action android:name="com.gau.go.launcherex.theme" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <action android:name="com.gau.go.launcherex.theme.gowidget" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <provider android:name="bigdx.golauncher.serenity.red.DocksProvider" android:authorities="bigdx.golauncher.serenity.red.DocksProvider" />
    <receiver android:label="@string/analog_gadget" android:icon="@drawable/ic_widget_analog_clock" android:name="bigdx.golauncher.serenity.red.AnalogClockWidget">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data android:name="android.appwidget.oldName" android:value="com.android.deskclock.AnalogAppWidgetProvider" />
        <meta-data android:name="android.appwidget.provider" android:resource="@xml/analog_appwidget" />
    </receiver>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:18:02.940

问题是“HelperActivity”被允许将组件设置为 0，当用户尝试从市场或应用程序抽屉打开应用程序时，它会导致应用程序出错。当“HelperActivity”活动不再可访问时，辅助活动中的 APEX 意图也将删除 Apex 兼容性。

现在回答了这个线程。

对于更合适的替代品，您可能希望使用未启用“KILL_APP”标志的 SET_COMPONENT_ENABLED 标志，但这是另一种情况。

# java - 在 Mac OSX 上收听播放/下一个/上一个热键

> ID：12801859
> 
> 赞同：1
> 
> 时间：2012-10-09T14:04:35.160
> 
> 标签：java, macos, hotkeys

我正在使用[OsSupport-Connector](https://bitbucket.org/agynamix/ossupport-connector)让我的 Java 应用程序监听一些全局热键。但是，我找不到与每个 MacBook 键盘中都有的 play/next/previous 键相关的代码。

如何收听这些特定的热键？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:18:40.117

也许你会发现[这个项目](https://bitbucket.org/thebitguru/whitedragon)很有用。它不完全是您要寻找的东西，但如果您深入研究它，您可能会找到您的解决方案。

# windows - 控制台中的贝尔字符挂起 Windows 7

> ID：12801861
> 
> 赞同：5
> 
> 时间：2012-10-09T14:04:37.320
> 
> 标签：windows, debugging, windows-7, console, console-application

在控制台应用程序中打印响铃字符会导致装有 Windows 7 的 PC 挂起：

*   CPU 100% 加载，进程资源管理器为空（没有进程，没有我可以杀死的任务）。
*   鼠标光标正在移动，但系统不响应点击。
*   键盘仍然部分响应，所以我可以使用开始菜单注销。
*   禁用哔声服务或用 XP 中的相同文件替换 beep.sys 无济于事。

**我的系统：** Toshiba L300、Intel GMA x3100、Realtek HD Audio、Win7 Pro、最新驱动。
**重现步骤：** “echo”，Alt+7，在命令提示符下输入。
**解决方法**：Win+R，“taskkill /IM conhost.exe /F”，回车（杀死所有控制台窗口）。

它使调试和使用 3-rd 方控制台应用程序非常烦人。如何修复系统？

# c++ - 通过引用线程传递数组的问题

> ID：12801862
> 
> 赞同：4
> 
> 时间：2012-10-09T14:04:43.387
> 
> 标签：c++, arrays, multithreading

我正在学习线程，我发现了一些简单的例子。

我希望做的是创建 5 个线程，每个线程分配一个随机数给 20 个 int 的数组。然后最后有另外 5 个线程将这个数组重建为一个更大的 100 大小的 int。

这是我尝试过的一些先前的代码。我希望能够通过引用传递一个数组，但没有运气。

任何想法将不胜感激，请记住，我对线程完全陌生

```
#include <process.h>
#include <windows.h>
#include <iostream>
#include <fstream>
#include <time.h>
//#include <thread>

using namespace std;

void myThread (void *dummy );
void myThread2 (void *dummy );

int main()
{

    ofstream myfile;
    myfile.open ("coinToss.csv");

    int rNum;

    long numRuns;
    long count = 0;
    int divisor = 1;
    float holder = 0;
    int counter = 0;
    float percent = 0.0;

    int array1[1000000];
    int array2[1000000];

    srand ( time(NULL) );

    printf ("Runs (use multiple of 10)? ");
    cin >> numRuns;

    for (int i = 0; i < numRuns; i++)
    {
        _beginthread( myThread, 0, (void *) (array1) );
        _beginthread( myThread2, 0, (void *) (array2) );

    }

}

void myThread (void *param )
{
    int i = *(int *)param;

    for (int x = 0; x < 1000000; x++)
    {
        //param[x] = rand() % 2 + 1;
        i[x] = rand() % 2 + 1;
    }

}

void myThread2 (void *param )
{
    int i[1000000] = *(int *)param;

    for (int = 0; x < 1000000; x++)
    {
        i[x] = rand() % 2 + 1;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:16:20.847

首先你需要意识到：

```
 for (int i = 0; i < numRuns; i++)
    {
        _beginthread( myThread, 0, (void *) (array1) );
        _beginthread( myThread2, 0, (void *) (array2) );

    } 
```

来电*立即*`_beginthread`返回。他们不等待线程完成，甚至开始。它只是将操作系统调度程序中的线程排队并返回。

 *但是，上面的代码是`main()`函数的结尾。我非常怀疑在发布版本下，您的线程甚至会在整个程序退出之前*初始化。*您需要构建一种机制，通过该机制，您的主线程将在程序关闭之前等待工作线程完成它们的工作。这样做超出了 SO 帖子的范围，但请查看[CreateEvent()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)和[WaitForMultipleObjects()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)。

接下来你需要了解的是你发送给线程的*东西的生命周期和所有权语义。*您正在传递指向数组的指针，这些数组是范围内的自动变量`main()`：

```
 int array1[1000000];
 int array2[1000000]; 
```

一旦声明这些数组的范围（此处为`main()`）退出，变量*就不再存在*。将指向局部作用域变量的指针传递给工作线程很少是正确的——如果局部作用域在线程完成之前退出，则*永远不会正确。*

动态分配这些数组，然后将它们的所有权转移给工作线程将在这里解决这个问题。执行此操作时，请在管理这些对象/数组的所有权语义时小心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:02:45.570

**1、铸造：**

注意选角！

```
void myThread (void *param )
{
  int *i = (int *) param;
  for (int x = 0; x < 1000000; x++)
  {
    i[x] = rand() % 2 + 1;
  }
} 
```

**二、适用范围：**

两个线程都是开始`numRuns`时间。启动它们需要一些时间。也执行它们。不应该在不尊重线程的情况下结束。`main`您应该通过[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)监视线程。_beginthread() 返回一个`waitable handle`.

实施：

```
int main()
{
  long numRuns;
  HANDLE hThread[MAX_WAIT_OBJECTS];

  cin >> numRuns;
  // numRuns to be smaller than MAX_WAIT_OBJECTS/2!!!!

  for (int i = 0; i < numRuns; i++)
  {
     hThread[i * 2]     = _beginthread( myThread, 0, (void *) (array1) );
     hThread[i * 2 + 1] = _beginthread( myThread2, 0, (void *) (array2) );
     // or better use _beginthreadex(...)
  }
  WaitForMultipleObjects(numRuns * 2, hThread, TRUE, INFINITE);
  // bWaitAll flag set TRUE causes this statement to wait until all threads have finished.
  // dwMilliseconds set to INFINITE will force the wait to not timeout.
} 
```

这样，`main`只有在所有线程都完成工作后才会完成。

**3.访问：**

这两个数组都在该`main`部分中声明，因此线程*共享*它们。为了保护访问，您应该引入某种排他性。最简单的是[临界区对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)。当所有线程 2 只访问数组 2 并且所有线程 1 只访问数组 1 时，我建议使用 2 个临界区对象。一个临界区一次只能被一个线程访问。

执行：

```
CRITICAL_SECTION cs1,cs2; // global

int main()
{
  long numRuns;
  HANDLE hThread[1000];

  // critical section object need to be initialized before aquired
  InitializeCriticalSection(&cs1);
  InitializeCriticalSection(&cs2);

  cin >> numRuns;

  for (int i = 0; i < numRuns; i++)
  {
    hThread[i * 2]     = _beginthread( myThread, 0, (void *) (array1) );
    hThread[i * 2 + 1] = _beginthread( myThread2, 0, (void *) (array2) );
  }
  WaitForMultipleObjects(numRuns * 2, hThread, TRUE, INFINITE);
} 
```

和线程（这里只显示一个）：

```
void myThread1 (void *param )
{
  EnterCriticalSection(&cs1); //aquire the critical section object
  int *i = (int *) param;
  for (int x = 0; x < 1000000; x++)
  {
    i[x] = rand() % 2 + 1;
  }
  LeaveCriticalSection(&cs1); // release the critical section object
} 
```

**然而：**整个故事还有点不清楚。您希望多个线程同时从头到尾填充同一个数组。这听起来很奇怪。使用此处描述的临界区对象，无论如何，线程将一个接一个地执行。你的目标到底是什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:18:25.320

其他答案涵盖了要点：还有另一个问题通常是一个问题（至少在 LINUX 上：不确定 Windows）

```
int array1[1000000];
int array2[1000000]; 
```

将非常大的数组声明为局部变量存在溢出堆栈空间的危险，从而导致程序崩溃。*

# cmake - 更改 cmake 目录

> ID：12801863
> 
> 赞同：0
> 
> 时间：2012-10-09T14:04:44.743
> 
> 标签：cmake, fortran

我正在为具有以下结构的项目编写一个 cmake 文件

```
project/ (root)
  libraries/ (contains (precompiled) libraries
  src/
    code/ (contains a set of fortran files) 
```

我的 CMakeLists.txt 文件目前在`project/`并且实际上只是

```
cmake_minimum_required(VERSION 2.6)

enable_language(Fortran)
project(project1)

set(projsrc src/code)

set(libdir lib/)

find_library(PROJ_LIBRARY pr10 PATHS ${libdir})

add_executable (sc1 sc1.f90)
target_link_libraries(sc1 ${PROJ_LIBRARY}) 
```

这会在与源代码相同的文件夹中创建我的二进制文件，当我实际上想要它在上面的级别时（即在`src`文件夹中 - 这个结构将被更改，因此我们`bin`最终会有一个文件夹），但还没有弄清楚如何做它。

SO上的一些答案说你必须在每个文件夹中都有一个 CMakeLists.txt 文件 - 这是正确的吗？是否可以设置环境变量或使用 CMake 变量（例如[http://cmake.org/cmake/help/v2.8.8/cmake.html#command:set](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aset)）。从一些答案中也不是很清楚他们发布的解决方案是否特定于 C++（因为这似乎是 CMake 最常用于的语言）。

**编辑**

我发现我可以通过稍微修改它来将其更改为我想要的行为：

```
cmake_minimum_required(VERSION 2.6)
enable_language(Fortran)
project(project1)

set(projsrc src/code)

set(libdir lib/)

find_library(PROJ_LIBRARY pr10 PATHS ${libdir})

add_executable (src/sc1 ${projsrc}/sc1.f90)
target_link_libraries(src/sc1 ${PROJ_LIBRARY}) 
```

但是，这并不能解释*为什么*我的行为与应有的不同，根据下面的arrowdodger。我还在努力研究如何显示环境变量的值；我试过以下没有运气：

```
message(${RUNTIME_OUTPUT_DIRECTORY})
message($ENV{RUNTIME_OUTPUT_DIRECTORY})
message(${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
message($ENV{CMAKE_RUNTIME_OUTPUT_DIRECTORY}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:16:19.717

默认情况下，二进制文件将出现在构建目录的相应子目录中。各自的意思是包含调用`CMakeLists.txt`的目录。`add_executable()`

例如，如果您有以下`CMakeLists.txt`

```
add_executable(tgt1 src1.f90)
add_executable(tgt2 subdir/src2.f90) 
```

在根文件夹中，您将获得两个二进制文件`${CMAKE_BINARY_DIR}`。因此，如果您想`tgt2`加入`${CMAKE_BINARY_DIR}/subdir`，您需要在那里添加 CMakeLists.txt 并`add_executable(tgt2 src2.f90)`从那里调用。

您可以更改此行为：

[CMAKE_LIBRARY_OUTPUT_DIRECTORY](http://cmake.org/cmake/help/v2.8.9/cmake.html#variable%3aCMAKE_LIBRARY_OUTPUT_DIRECTORY)、[CMAKE_RUNTIME_OUTPUT_DIRECTORY](http://cmake.org/cmake/help/v2.8.9/cmake.html#variable%3aCMAKE_RUNTIME_OUTPUT_DIRECTORY)等。

您还可以设置[各自的目标属性](http://cmake.org/cmake/help/v2.8.9/cmake.html#section_PropertiesonTargets)。

# html - 使用 HTML5 的 PhoneGap 应用程序

> ID：12801874
> 
> 赞同：0
> 
> 时间：2012-10-09T14:05:14.730
> 
> 标签：html, cordova

我正在构建一个网站，然后将使用 PhoneGap 为 3 个操作系统（iOS、Android 和 Windows Phone）转换为移动应用程序。我的网页结构是这样的，它有 3 个垂直 DIV。我已经使用 Media-Queries 控制了这些 DIV 的宽度，它在桌面和 Android 模拟器上都可以正常工作。这意味着在桌面上，所有三个 DIV 将同时显示，但在移动应用程序上，我想一次只显示一个 DIV，当用户使用触摸水平滚动屏幕时，第二个 DIV 将显示在移动屏幕上，类似地，第三个 DIV 在使用触摸进一步滚动。简而言之，我希望每个 DIV 都成为移动应用程序上的一个页面。

但它在主屏幕上显示了所有三个 div。我想知道我将如何控制我的网页，当它在桌面上查看时，所有三个 DIV 将同时显示，而当使用 PhoneGap 应用程序在移动设备上查看时，用户一次只能看到一个 div。

希望我对你很清楚。我也在粘贴 HTML 代码

```
<!DOCTYPE html>
<html>
<head>
    <title>My Site</title>
    <link rel="stylesheet" href="main.css" />   
    <script type="text/JavaScript" src="CommonFunctions.js"></script>
    <meta name="viewport" content="width=device-with, initial-scale=1, user-scalable=yes">  
</head>
<body>
    <div id="topContainer" class="container">
        <div id="topSectionHeating" class="topSectionHeating">          
            DIV1
        </div>

        <div id="topSectionHotWater" class="topSectionHotWater">            
            DIV2
        </div>

        <div id="topSectionSchedule"  class="topSectionSchedule">       
            DIV3
        </div>      
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:55:49.017

你试过 jQuery 吗？您可以将 onClick() 分配给按钮并相应地显示/隐藏 div。

如果您不熟悉 jQuery，请从[这里开始，或者](http://www.w3schools.com/jquery/jquery_intro.asp)[这里](http://docs.jquery.com/Tutorials)提供了一些很好的教程

# css - 在样式表中应用 CSS 类

> ID：12801876
> 
> 赞同：4
> 
> 时间：2012-10-09T14:05:16.040
> 
> 标签：css

有没有办法在实际样式表中将类应用于与 CSS 选择器匹配的一组节点？

这当然可以在一行 jquery 中实现，但是可以在 css 本身中实现吗？

```
input[type='button']
{
// apply the class 'k-button' to these
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:07:14.853

> 有没有办法在实际样式表中将类应用于与 CSS 选择器匹配的一组节点？

不，目前没有办法使用符合标准的 CSS 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:11:17.300

不，没有办法用 css 附加类，但你可以用 jquery 使用这段代码

```
$(".YourClassName").addClass("YourNewClass"); 
```

最好的祝福

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:04:30.927

不，你不能用 CSS 做到这一点。您正在谈论更改标记，CSS 并不是专门设计来做的（内容：规则除外）。正如其他人所建议的那样，我会研究 SASS 中的“扩展”选项，或者如果需要的话使用 jQuery。

说了这么多——为什么你不能从类声明中复制相关的样式，并将它们粘贴到你的选择器中？或者，只需将您的选择器附加到类声明上？

# xcode4.5 - 构建项目后我无法关闭我的 iPhone。该怎么办？

> ID：12801882
> 
> 赞同：0
> 
> 时间：2012-10-09T14:05:36.923
> 
> 标签：xcode4.5

我正在建立一个项目。一切都很好。然后我将它安装在我的 iPhone 上。

我的 iPhone 堆栈在前面的屏幕上，就是这样。

长按关机键没用。

xcode 说无法启动“应用程序名称”。没有权限。

我应该等到 iPhone 没电了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:09:37.843

尝试使用此处的说明重新启动 iPhone：http: [//www.apple.com/support/iphone/assistant/phone/#section_1](http://www.apple.com/support/iphone/assistant/phone/#section_1)

“要重置 iPhone，请同时按住睡眠/唤醒按钮和主屏幕按钮至少 10 秒钟，直到出现 Apple 标志。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:35:30.783

我的 iPhone5 的显示屏变得如此之大，以至于我无法使用它。当我尝试像在 MacPro 上一样重置大小时，它不起作用。所以，我以为我会重新启动它，但是当我按下顶部按钮时，“滑动关机”的屏幕出现了，无法完成任务。这很令人沮丧，我想把电池拿出来重新装上，但后来我想试着用我的手写笔滑动条，它立即起作用了。

# excel - vba 格式列

> ID：12801884
> 
> 赞同：0
> 
> 时间：2012-10-09T14:05:43.340
> 
> 标签：excel, vba

我正在尝试格式化新创建的工作表上的列。我无法选择并使用语句，所以我尝试直接分配并遇到了同样的问题（一般错误 1004）。我尝试的最后一个代码是：

```
 Sheets("Survey Data").columns("A").NumberFormat = "0"
    Sheets("Survey Data").columns("A").VerticalAlignment = x1Bottom
    Sheets("Survey Data").columns("A").HorizontalAlignment = xlCenter
    Sheets("Survey Data").columns("A").ColumnWidth = 5 
```

检查输出时，`NumberFormat`似乎有效，但以下三个语句无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:15:18.733

尝试改变

```
Sheets("Survey Data").columns("A").VerticalAlignment = x1Bottom 
```

至

```
Sheets("Survey Data").columns("A").VerticalAlignment = xlBottom 
```

我看到的是“1”（一）而不是“l”（L）。它应该是**xlBottom**而不是**x1Bottom**

# dimension - 使用mysql实现SCD2逻辑

> ID：12801887
> 
> 赞同：1
> 
> 时间：2012-10-09T14:05:50.200
> 
> 标签：dimension, scd2

我需要将具有以下记录的表处理到 SD2 表中。这将需要读取前一行的值并确定其匹配，然后进行处理。如果分数记录没有变化，则更新，否则将其删除，因此在 SCD2 中将其标记为终止。

名称 分数 删除/更新 时间 Hemant 100 2012-08-01 Hemant 200 2012-08-10 Hemant 100 2012-08-11 Rahul 100 2012-08-01 Rahul 100 2012-08-02 Rahul 200 2012-08-03

数据需要像这样加载到表中：

名称 值 有效 从有效到 Hemant 100 - 2012-08-01 Hemant 200 2012-08-01 2012-08-10 Hemant 100 2012-08-10 2012-08-11 Rahul 100 - 2012-08-02 Rahul 200 2012- 08-02 2012-08-03

不能使用 group by 函数，因为相同的键值对可以在以后的日期或多个日期重复。任何建议将不胜感激。

问候

# javascript - 浏览器上下文菜单是否有关闭事件

> ID：12801898
> 
> 赞同：15
> 
> 时间：2012-10-09T14:06:38.873
> 
> 标签：javascript, jquery, dom-events, contextmenu

我正在`contextmenu`使用 jQuery 捕捉事件，如下所示：

```
$(document.body).on("contextmenu", function(e){
    //do stuff here
}); 
```

到目前为止，一切都很好。现在我想在它关闭时执行一些代码，但我似乎找不到正确的解决方案。

使用类似下面的东西可以捕捉到一些情况，但不是几乎所有情况：

```
$(document.body).on("contextmenu click", function(e){}); 
```

它不会在以下情况下执行：

*   浏览器失去焦点
*   选择了上下文菜单中的一个选项
*   用户单击浏览器中不在页面上的任何位置

**注意：**我没有使用 jQuery 上下文菜单，我只是使用它来捕获事件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T14:12:32.180

以下代码可能会对您有所帮助。[jsfiddle](http://jsfiddle.net/LfetN/1/)

```
var isIntextMenuOpen ;
$(document).on("contextmenu", function(e){

    isIntextMenuOpen = true;
});
function hideContextmenu(e){
       if(isIntextMenuOpen ){
            console.log("contextmenu closed ");
       }

     isIntextMenuOpen = false;
}
$(window).blur(hideContextmenu);

$(document).click(hideContextmenu); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-17T22:53:25.917

我需要检测上下文菜单何时关闭，因此我想出了一个解决方案。

小提琴： [https ://jsfiddle.net/kexp0nmd/1/](https://jsfiddle.net/kexp0nmd/1/)

```
var premenuelem;

var TempContextMenuCloseHandler = function(e) {
console.log('closed!');
//console.log(e);
	window.removeEventListener('keyup', TempContextMenuCloseHandler, true);
	window.removeEventListener('mousedown', TempContextMenuCloseHandler, true);
	window.removeEventListener('focus', TempContextMenuCloseHandler, true);

	var focuselem = document.getElementById('tempfocus');
	if (focuselem === document.activeElement)  premenuelem.focus();
	focuselem.style.display = 'none';
};

var TempContextMenuHandler = function(e) {
console.log('open!');
//console.log(e);
	premenuelem = document.activeElement;

	var focuselem = document.getElementById('tempfocus');
	focuselem.style.display = 'block';
	focuselem.focus();

	window.addEventListener('keyup', TempContextMenuCloseHandler, true);
	window.addEventListener('mousedown', TempContextMenuCloseHandler, true);
	window.addEventListener('focus', TempContextMenuCloseHandler, true);
};

window.addEventListener('contextmenu', TempContextMenuHandler, true);
```

```
html, body { min-height: 100%; }
```

```
<textarea></textarea>

<div id="tempfocus" tabIndex="-1" style="left: 0; bottom: 0; height: 50px; width: 100%; background-color: #CCCCCC; display: none; position: fixed; outline: none;"></div>
```

截至 2020 年 5 月，已在 Edge、Firefox 76 和 Chrome 80 的鼠标和键盘上进行测试和验证。移动/触摸支持未知。

该解决方案的关键方面是使用一个带有 a 的元素`tabIndex`。通过在上下文菜单出现之前显示并将焦点移动到该元素（焦点窃取），会导致 Edge 和 Chrome 在用户稍后关闭上下文菜单时发送焦点更改事件。我将 div 的背景设置为灰色，以便可以看到 - 在生产中，将其设置为透明背景并根据需要设置样式。

当`keyup`键盘关闭上下文菜单时，处理程序捕获 Escape/Enter 键的释放。该`mousedown`处理程序仅在 Firefox 中捕获 mousedown 事件。

据我所知，无法确定用户选择了哪个选项，或者即使他们确实选择了一个选项。至少，它允许在所有主要浏览器中一致地检测上下文菜单打开/关闭。

示例中的 textarea 只是为了提供其他可用于焦点处理的内容。

虽然此解决方案涉及临时焦点窃取，但它是最干净的跨浏览器解决方案，直到浏览器供应商和 W3C 向 DOM 添加“exitcontextmenu”事件或类似事件。

我刚刚遇到的一个小错误：显示上下文菜单并切换到另一个应用程序会关闭上下文菜单，但不会立即触发关闭事件。但是，在切换回 Web 浏览器时，会触发事件并运行关闭处理程序。向窗口添加“模糊”捕获可能会解决这个问题，但我必须重新测试所有内容，它可能会破坏某些东西（例如打开上下文菜单时的火焰模糊）。在极少数情况下可能会发生这种情况并且处理程序仍然会触发，因此不值得修复 - 它只是明显延迟了。

# visual-c++ - 编译包含 cpp 和 c 文件的项目

> ID：12801899
> 
> 赞同：0
> 
> 时间：2012-10-09T14:06:38.560
> 
> 标签：visual-c++

我正在做 c++ 项目。我的一个项目文件扩展名为`c`. 编译器会使用编译整个项目`c++`还是将`c++`文件单独编译为 c 文件，然后以某种方式链接它们？

我的 c 文件包含代码：

```
#ifdef __cplusplus
extern "C" {
#endif 
```

如果我设置，编译器将如何处理`c`文件`Compile as C++ Code(/TP)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:40:06.410

从[MSDN](http://msdn.microsoft.com/en-us/library/bb384838.aspx)，看起来像第二个选项（.cpp 作为 c++，.c 作为 c）。但是，如果您强制使用命令行选项，那么它将遵循命令行选项。请注意 -T 之后的 c 和 p 区分大小写，它可能表示所有文件或仅表示[此处](http://msdn.microsoft.com/en-us/library/032xwy55.aspx)描述的以下文件。

# wpf - 扫描图像并转换为 byte[]

> ID：12801900
> 
> 赞同：0
> 
> 时间：2012-10-09T14:06:49.433
> 
> 标签：wpf, c#-4.0

我用 wpfTwain 扫描图片。并将图像显示到`System.Windows.Control.Image`.

如何将图像转换为二进制？

我使用了以下方法：

```
public byte[] getJPGFromImageControl(BitmapImage imageC)
{
       MemoryStream memStream = new MemoryStream();              
        JpegBitmapEncoder encoder = new JpegBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(imageC));//error
        encoder.Save(memStream);
        return memStream.GetBuffer();
} 
```

调用为：

```
getJPGFromImageControl(firmaUno.Source as BitmapImage) 
```

错误为：imageC 为空！！！

为什么？

`firmaUno.Source`不为空！！但是使用 from ( `firmaUno.Source as BitmapImage`) ...`BitmapImage`为空！！！！

# android - Android 更改通知铃声

> ID：12801908
> 
> 赞同：2
> 
> 时间：2012-10-09T14:07:01.900
> 
> 标签：android

我想授予用户更改通知铃声的权限。它“必须”通过应用程序而不是通过设置。我尝试了以下代码。它显示铃声选择器，但“它没有设置选定的”。我知道它已经发布过很多次了。我究竟做错了什么 ？

```
private void setRington() 
{
    SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
    Uri soundFile = Uri.parse(settings.getString("timerSound", RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION).toString()));

    Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_NOTIFICATION);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Alert Tone");
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, soundFile);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_SILENT, false);     
    startActivityForResult(intent, 5);
}

@Override    
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{       
    if (resultCode == Activity.RESULT_OK && requestCode == 5) 
    {            
        Uri uri = intent.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI); 
        Log.i("Speak", "I picked this ringtone " + uri);
        if (uri != null) 
        {    
            RingtoneManager.setActualDefaultRingtoneUri(this, RingtoneManager.TYPE_RINGTONE, uri);
        }
    } 
} 
```

# java - Python 3.x：在 Python 3.x 中等效的 Java valueOf()

> ID：12801912
> 
> 赞同：3
> 
> 时间：2012-10-09T14:07:08.780
> 
> 标签：java, python-3.x, value-of

在学习 Python 3 并将我的一些代码从 Java 转换为 Python 3.3 时，我遇到了一个我无法解决的小问题。
在Java中我有这个代码（只是虚拟代码使它更小）：

```
public enum Mapping {
    C11{public int getMapping(){ return 1;}},
    C12{public int getMapping(){ return 2;}},
    public abstract int getMapping();
}

String s = "C11";
System.out.println(Mapping.valueOf(s)) 
```

工作正常并打印要求的“1”尝试在 Python 中执行此操作并不容易（还）。我试图模仿一个枚举：

```
class Mapping:
    C11=1
    C12=2

s = 'C11'
print(Mapping.Mapping.(magic should happen here).s) 
```

不幸的是，我不知道如何将字符串转换为要这样调用的属性（或类似的东西）。我需要这个，因为我在类 Mapping 中有一个巨大的列表，并且需要将从文本文件中读取的看似随机的单词转换为整数映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:10:14.230

您正在寻找[`getattr`](http://docs.python.org/library/functions.html#getattr)：

```
>>> getattr(Mapping, s)
1 
```

从文档中：

> **getattr（对象，名称[，默认值]）**
> 
> *返回object*的命名属性的值。*名称*必须是字符串。如果字符串是对象属性之一的名称，则结果是该属性的值。例如，`getattr(x, 'foobar')`等价于`x.foobar`。如果命名属性不存在，则返回*默认值*（如果提供），否则`AttributeError`引发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:10:27.023

使用[`getattr`](http://docs.python.org/library/functions.html#getattr)：

```
class Mapping:
    C11=1
    C12=2

print(getattr(Mapping, 'C11')) # prints 1 
```

# gwt - 在组合中选择的文本大小

> ID：12801915
> 
> 赞同：0
> 
> 时间：2012-10-09T14:07:15.160
> 
> 标签：gwt, smartgwt

正如我们在很多网站上看到的那样：我们可以增加或减少字体的大小。就像这个例子： http: [//blog.creonfx.com/examples/javascript/dynamic-font-resize.html](http://blog.creonfx.com/examples/javascript/dynamic-font-resize.html)

这在 GWT 中可行吗？那么我可以通过在图像上选择组合（1、2、3）中的大小来动态更改一般（=所有小部件）字体大小吗？

![在此处输入图像描述](../Images/3365f96361f37f28eb1e23a12582d032.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:24:35.030

根据小部件的不同，例如具有可以使用 Html 设置的内容属性的小部件我认为应该是可行的......如果您可以获得对要更改的 DOM 元素的引用，您可能能够更改通过一些特定的 javascript 样式。但无论如何，我认为在任何小部件上都没有直接的方法。你也可以看看[这个线程](http://forums.smartclient.com/showthread.php?t=15814&highlight=style%20dynamically)，它也表明了这个事实。

# objective-c - 如何使用本机对话框执行 apprequest

> ID：12801917
> 
> 赞同：0
> 
> 时间：2012-10-09T14:07:14.350
> 
> 标签：objective-c, facebook, apprequests

我们生活在令人困惑的时代，过去的文档与现在的文档合并。

我正在尝试发出应用请求，我有 FB SDK 3.1 和 iOS6。我正在检查地址中的代码： [https ://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

我不能让它工作，请注意下一段：

在您的应用程序委托中导入 Facebook.h 头文件并替换 Facebook 框架 "FacebookSDK/FacebookSDK.h" 导入声明：#import "Facebook.h"

我的图书馆里没有 Facebook 课程了。Facebook 类必须使用应用程序 ID、委托等进行初始化......我不知道它现在应该如何工作，特别是 FBSession 到位。

我的问题是，如何制作现代应用程序？而且......文档是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:58:24.730

您只能使用以前的 API 获取请求对话框，它不适用于当前 API。

确保您按照文档中的此步骤进行操作 -

可以在此处找到标头 ~Documents/FacebookSDK/FacebookSDK.framework/Versions/A/DeprecatedHeaders。拖动整个 DeprecatedHeaders 文件夹并取消选择“将项目复制到目标组的文件夹（如果需要）”选项以添加标题作为参考。

将这些标题添加到您的项目中，您将可以访问 Facebook 类。

# java - 我需要复制一组卡片，但我只得到了我需要复制的数组的地址

> ID：12801919
> 
> 赞同：2
> 
> 时间：2012-10-09T14:07:24.713
> 
> 标签：java, arrays, eclipse

我需要制作一个我无法直接访问的卡片数组的临时副本，因为它位于另一个名为 Hand 的类中。我得到了一个名为 getHand() 的方法，它返回对我需要在作为 Hand 的子类 RummyHand 类中的副本的数组的引用。变量 rummyHand 是 RummyHand 类中的一个实例变量，是一个 Hand 对象。如果这很重要，我也在日食中工作。

但这都不是：

> 卡 [] 临时 = 新卡 [8]；
> 
> temp = rummyHand.getHand();

或这个：

> Card[] temp = rummyHand.getHand();

像我想的那样复制了数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:20:43.803

你可以使用[Arrays.copyOf](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf)或[System.arrayCopy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)来复制一个数组，或者更简单的 clone()：

```
Card[] temp = rummyHand.getHand().clone(); 
```

请注意，使用`=`运算符永远不会*复制*任何数据。所做`=`的只是使变量引用不同的事物。理解这一点很重要，否则它会给你带来很多麻烦。

在（希望有用的）细节中：

```
new Card[8]; 
```

创建一个数组：一个足够大的新内存区域来保存指向 8 张卡片的指针。

```
Card[] temp 
```

创建一个必须指向某种卡片数组的变量。这

```
= 
```

中间使变量指向该内存区域。表达方式

```
rummyHand.getHand(); 
```

为您提供不同内存区域的地址。所以这条线

```
temp = rummyHand.getHand(); 
```

只是使`temp`变量指向该内存区域。`copyOf`，所有`arrayCopy`的`clone`工作都是通过创建一个新数组并用原始数组的引用填充它，然后将新数组交给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:22:00.650

您可以使用[`clone`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)复制数组：

```
Card[] temp = rummyHand.getHand().clone(); 
```

这将为您提供与原件长度相同的精确副本。如果您想要复制八个元素长而不管原件的长度，您可以使用[`Arrays.copyOf`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29)：

```
Card[] temp = Arrays.copyOf(rummyHand.getHand(), 8); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:22:10.220

有几种方法可以复制数组。最基本的是创建一个与源数组大小相同的数组，然后遍历源数组的元素并将每个元素添加到新副本中：

```
Card[] source = rummyHand.getHand();
Card[] temp = new Card[source.length];

// for loop:
for (int i = 0; i < source.length; i++)
    temp[i] = source[i]; 
```

但是有一些 Java 实用程序类可以为您执行此操作。见[`Arrays.copyOf`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28T%5b%5d,%20int%29)：

```
Card[] temp = Arrays.copyOf(source, source.length); 
```

但请注意，您的新数组将包含与`Card`源数组相同的引用，这意味着对数组中对象的任何更改*都不会*更改副本：它们会更改实际对象。如果您需要数组*内容*的副本，那么您需要使用循环，并在将每个`Card`内容添加到`temp`数组之前制作一个副本。

当您执行:`temp = rummyHand.getHand();`时，您将获得对原始数组的引用，*而不是*副本，因此您所做的任何更改都会更改`rummyHand`对象中的数组..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:25:53.043

采用

```
Card[] hand = rummyHand.getHand();
Card[] temp = new Card[hand.length()];
System.arraycopy(hand,0,temp,0,hand.length()); 
```

之后你有一个数组的副本 - 但请记住，对数组中卡片的引用仍然是相同的。因此，如果您更改卡片的属性，`temp`它也会更改卡片，`hand`因为两个数组都包含相同的“卡片实例”。

# php - 我对通过表单提交对单选按钮进行一些 PHP 验证有疑问？

> ID：12801924
> 
> 赞同：0
> 
> 时间：2012-10-09T14:07:39.923
> 
> 标签：php, radio-button, validation

我有以下表格：

```
<form action="?" method="post" name="contactform">
<?php if(@$errorsAndNotices):?>
<div class="error">
<p><?php echo @$errorsAndNotices; ?></p>
</div>
<?php endif; ?>

<div class="question">
<p><span><input type="radio" name="answer" value="Yes"/></span> Yes</p>
</div>
<div id="one" class="answers" style="display:none">
<p><input type="radio" name="answerdetail" value="Reason One" /> Reason One</p>
<p><input type="radio" name="answerdetail" value="Reason Two" /> Reason Two</p>
</div><!-- end answers -->

<div class="question">
<p><span><input type="radio" name="answer" value="No"/></span> No</p>
</div>
<div id="two" class="answers" style="display:none">
<p><input type="radio" name="answerdetail" value="Reason One" /> Reason One</p>
<p><input type="radio" name="answerdetail" value="Reason Two" /> Reason Two</p>
</div><!-- end answers -->

<div class="question">
<p><span><input type="radio" name="answer" value="Not sure" /></span> Not sure</p>
</div>
<div id="three" class="answers" style="display:none">
<p>No problem, we’ll drop you an email next week.</p>
</div>

<input type="submit" value="" class="submit" />
</form> 
```

如果选择“是”或“否”之一，则显示子单选按钮，然后您可以选择其中一个。

我有以下简单的验证：

```
orsAndNotices = '';
 if(!@$_REQUEST['answer'])                      { $errorsAndNotices .= "Please select Yes, No or Not sure.<br/>\n"; $nameFail = 1; }
 if(!@$_REQUEST['answerdetail'])                { $errorsAndNotices .= "Please select your answer.<br/>\n"; $emailFail = 1; } 
```

如果未选择任何内容，我会根据需要收到错误通知。

如果选择了“是”或“否”，但没有选择任何子单选按钮，我会再次收到错误通知。

问题是选择“不确定”时，我收到错误通知，因为没有选择子辐射按钮。我不想要这个错误。

如果选择了“是”或“否”，然后没有选择任何子单选按钮，我只想要一个错误通知。如果选择不确定，我希望表单提交时没有任何错误。

我希望我已经解释过了！

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:11:26.343

我会`Not Sure`在其他人之前检查单选按钮并将其设置在一个标志中以在所有其他条件下使用：

```
$notSure = (!empty($_REQUEST['answer']) && ($_REQUEST['answer'] == 'Not sure')); 
```

您可以将其用于：

```
if (!$notSure && !@$_REQUEST['answerdetail']) ... 
```

*旁注*（不是特定于答案）
使用`@`for 错误抑制可能会导致您的代码运行缓慢。对于检查是否`$_REQUEST`设置了值这样的简单任务，我建议使用`isset()`or`empty()`代替，例如：

```
if (!$notSure && empty($_REQUEST['answerdetail'])) ... 
```

# design-patterns - 使用 jUnit 进行 DAO 测试的设计模式

> ID：12801926
> 
> 赞同：2
> 
> 时间：2012-10-09T14:07:43.560
> 
> 标签：design-patterns, junit, dao

我正在寻找使用 jUnit 测试 DAO 类的最佳实践。我的 DAO 类有几个典型的 DAO 方法，例如 createUser(User user)、deleteUser(Long id)、updateUser(User user)、findUserById(Long id)...

所以 createUser 可能很简单，我可以创建一个用户，然后检查它是否有一个 id。如果是，则测试将通过。或者您更愿意创建一个用户，然后从数据库中读取用户并检查它是否 1) 找到用户 2) 返回用户的实例变量与之前保存的用户相同

那么 deleteUser 函数呢？它需要一个 ID，但为了获得 ID，我首先必须创建一个用户。那么如何做到这一点呢？使用测试方法中的 testCreateUser 方法还是 DAO 类中的 createUser 方法？

与 updateUser(User user) 相同，我需要先更新用户，而 findUserById(Long id) 我需要先更新 Id。

我认为我的要求很常见，所以我想知道是否有类似设计模式用于使用 jUnit 测试 DAO。

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:42:12.690

恕我直言，没有这样的设计模式来进行 JUnit 测试。您必须参考一些最佳实践。

例如，在以下情况下，您在删除之前不使用 testCreateUser 方法创建用户。为此，您必须使用 DAO 类。每个测试用例方法都是相互独立的。

> 那么 deleteUser 函数呢？它需要一个 ID，但为了获得 ID，我首先必须创建一个用户。那么如何做到这一点呢？使用测试方法中的 testCreateUser 方法还是 DAO 类中的 createUser 方法？

现在，要解决您的问题，您可以使用 setUp 和 tearDown 方法。在 setUp 方法中，您可以创建要测试的模拟对象，在 tearDown 中您可以删除它们。如果你这样做，每个测试方法都将获得相同的模拟数据集，你可以在这些数据上进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:28:24.900

我通常的方法是在同一个测试中使用 DAO 的其他方法。例如

```
user = UserStore.create(...);
id = user.id();
loadedUser = UserStore.load(id);
assertThat(loadedUser, eq(user)); 
```

如果您采用这种方法，单元测试中的“单元”就是整个类，而您通常一次对一个函数进行单元测试。这是可以接受的，并且会产生经过良好测试的课程。这种方法的问题是，失败的测试可能是由于 UserStore.create 或 UserStore.load 中的错误，但我发现对于小类，调试起来并不难，而且往往工作得很好。我尝试了其他方法，在测试后手动检查数据库，但我发现额外的工作通常不值得。

一些框架，如 Rails，采用不同的方法。它们为您提供了一种在测试运行之前用数据播种数据库的方法。这很好用，因为框架使它变得容易。随着越来越多的工具为这种方法提供支持，也许这将成为常态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:37:02.193

IMO 单元测试应该能够自行运行。

因此，例如，删除测试将首先创建一个用户，然后将其删除并检查它是否不再存在（通过尝试加载它）。

依赖之前的测试不是一个好方法，因为如果之前的测试由于任何原因失败，下一个测试也会失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T20:39:43.247

您可以使用内存数据库，该数据库在每次测试之前填充您的测试数据，并在测试执行完成后被丢弃。看看[德比](http://db.apache.org/derby/docs/10.7/devguide/cdevdvlpinmemdb.html)

要考虑的另一件事是，你真的应该对你的 DAO 层进行单元测试吗？Dao 的定义不应该包含业务逻辑，您最终会测试持久性框架。

# c# - 使用 VS 2012 在构建时生成 T4

> ID：12801927
> 
> 赞同：5
> 
> 时间：2012-10-09T14:07:45.533
> 
> 标签：c#, .net, t4

我正在尝试使用 VS2012 在我的项目的每个构建中生成代码。

我的解决方案中有 3 个项目：

*   项目 1 有一些课程
*   项目 2 具有通用模板
*   项目 3 具有读取 json 文件的模板，然后调用通用模板表单项目 2 以生成其文件。

当我点击 Build/Transform All T4 Templates 时，没有问题，生成顺利。

但我正在尝试将我的构建配置为在每个构建中自动包含此步骤。

我已将此代码添加到我的 csproj ：

```
<Import Project="$MsBuildToolsPath)\Microsoft.CSharp.Targets" />
<PropertyGroup>
   <TransformOnBuild>true</TransformOnBuild>
   <OverWriteReadOnlyOutputFiles>true</OverWriteReadOnlyOutputFiles>
</PropertyGroup>
<Import Project="$(MSBuildExtensionPath32)\Microsoft\VisualStudio\v11.0\TextTemplating\Microsoft.TextTemplating.targets"/> 
```

我已经从我的电脑上找到了路径“ *\Microsoft\VisualStudio\v11.0\TextTemplating\Microsoft.TextTemplating.targets ”。*我从中获取的示例是：[get-visual-studio-to-run-a-t4-template-on-every-build](https://stackoverflow.com/questions/1646580/get-visual-studio-to-run-a-t4-template-on-every-build)

问题来自我正在使用的这一行： <#@ include file="$(SolutionDir)\xxx\yyy\zzz\mytemplate.tt">

我收到错误：

> 无法解析文件的包含文本：D:\Projects\pppp\qqq\eeee\$(SolutionDir)\xxx\yyy\zzz\mytemplate.tt

由于模板在“手动”生成时效果很好（构建/转换所有 T4 模板），我想知道在构建时生成它可能是什么问题。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:17:07.097

问题是，当您在构建过程中运行模板时，它正在不同的主机下执行，并且 $(SolutionDir) 宏不存在。尝试使用相对路径，例如

```
<#@ include file="..\xxx\yyy\zzz\mytemplate.tt"> 
```

# android - 根据类别对项目列表进行排序 (Android)

> ID：12801929
> 
> 赞同：2
> 
> 时间：2012-10-09T14:07:50.637
> 
> 标签：android, list, sorting

实际上，这不是一个特定的 Android 问题/问题，只是我想要一个 Activity 中的嵌套/可扩展列表。

我正在为如何解决这个特定问题而苦苦挣扎：我想在列表（可能是嵌套/扩展列表）中显示基于类别的项目列表。这些项目按类别分组，并从数据库查询中接收。

下面是对数据库表的描述：

```
Table Categories
-----------------
CatID   CatName
01      Category1
02      Category2
03     Category3

Table Items
---------------------------------
ItemID  ItemName  Category
01      Item1     01
02      Item2     01
03      Item3     02
04      Item4     02
05      Item5     03
06      Item6     03 
```

查询结果示例：

```
Category1   Item1
Category1   Item2
Category2   Item3
Category2   Item4
Category3   Item5
Category3   Item6 
```

现在，我想知道的是如何按类别对项目进行排序，并列出它们。在 Android GUI 中，我希望它看起来像这样：

```
Category1
- Item1
- Item2
Category2
- Item3
- Item4
Category3
- Item5
- Item6 
```

有什么好方法可以实现这一点，而不是用一堆 if 来检查一个项目是否属于这个或那个类别，遍历所有列出的类别以避免重复的类别等？还是没有好的/整洁/标准化的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:12:49.040

我建议你在这里使用 ExpandableListView。创建两个单独的 getter-setter 类，一个作为 Group，另一个作为 Child。创建 Group 和 Child 的 ArrayList 来设置数据。

```
public class ExpandListGroup {

    private String Name;
    private ArrayList<ExpandListChild> childItems;

    public ArrayList<ExpandListChild> getChildItems() {
        return childItems;
    }
    public void setChildItems(ArrayList<ExpandListChild> childItems) {
        this.childItems = childItems;
    }
    public String getName() {
        return Name;
    }
    public void setName(String name) {
        this.Name = name;
    }
}

public class ExpandListChild {

    private String Name;

    public String getName() {
        return Name;
    }
    public void setName(String Name) {
        this.Name = Name;
    }
} 
```

现在您必须将 Group 和 Child 添加到 ArrayList 并将 Group 和 Child 的数据设置为 ExpandableList。

```
private ArrayList<ExpandListGroup> groups = new ArrayList<ExpandListGroup>();
private ArrayList<ExpandListChild> childs; 
```

获取游标中的数据并将其设置为 setter-getter 类，例如，

```
while(...){
 Group -> Category1, Category2, Category3,...
 Child -> Item1, Item2,....
} 
```

现在，您的 Group 的 ArrayList 充满了它的值和子项。只需将其设置为 ExpandableList Adapter，您就可以解决它。为了进一步说明，您可以找到[`here`](https://github.com/lalit3686/ExandableListViewDemo)如何使用 Group 和 Child 类填充 ExpandableList。

# count - 计算我的报告范围之外的事件

> ID：12801932
> 
> 赞同：2
> 
> 时间：2012-10-09T14:08:02.540
> 
> 标签：count

在 Crystal Reports XI 中，我正在编写一份报告，显示过去一周内所有已收到合法推荐的公司。我想在报告中添加一个字段，该字段可以计算过去每周被推荐的每家公司被推荐的次数（如果有的话）。我不确定如何执行此操作，因为我需要使用两个不同的日期参数。一份用于主要报告（1 周），一份用于过去计数（3 年）。

# c# - 使用 BackgroundAgent 时缺少程序集

> ID：12801934
> 
> 赞同：4
> 
> 时间：2012-10-09T14:08:14.770
> 
> 标签：c#, silverlight, windows-phone-7

当我尝试使用 BackgroundAgent 时，在系统设置中打开后台应用程序屏幕时收到以下错误消息。

> System.IO.FileNotFoundException 未处理消息=找不到文件或程序集名称“\Applications\Install\EC78F0AC-625D-482E-9ADD-D48D58BE633A\Install\MyAgent.dll”或其依赖项之一。StackTrace：在 Microsoft.Phone.BackgroundAgentActivator.LoadEntryPointAssembly(String assemblyName) 在 Microsoft.Phone 的 System.Reflection.Assembly.LoadFrom(String assemblyFile) 的 System.ThrowHelper.throwVersion37CompatException(ExceptionType newEType, String newString, ExceptionType oldEType, String oldString)。 Microsoft.Phone.BackgroundAgentActivator.Microsoft.Phone.IBackgroundAgentActivator.CreateBackgroundAgent(String assembly, String typeinfo) 在 Microsoft.Phone.BackgroundAgentDispatcher 的 BackgroundAgentActivator.LoadAgent(String assemblyName, String typeName)。

我使用了本教程：[http](http://rodrigueh.com/wp7-live-tiles-with-background-agents) ://rodrigueh.com/wp7-live-tiles-with-background-agents 。

提供的示例有效，但是当我尝试实现它时却没有。不幸的是，我无法在网上找到任何东西。

有什么想法吗？

亲切的问候，尼尔斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T09:38:47.753

通过查看异常，问题可能是您没有在主项目中引用 MyAgent.dll。添加后台任务作为参考，并确保将其添加到您的 WMAppManifest.xml（将其替换为实际程序集名称和任务类的名称。）

```
 <ExtendedTask Name="BackgroundTask">
    <BackgroundServiceAgent Specifier="ScheduledTaskAgent" Name="MyAgent" Source="MyAgent" Type="MyAgent.ScheduledAgent" />
  </ExtendedTask> 
```

# java - 使用 Java 1.5 在 Windows 中获取以太网适配器的 IPv4 地址

> ID：12801935
> 
> 赞同：7
> 
> 时间：2012-10-09T14:08:16.680
> 
> 标签：java, windows, networking

# 问题

我的 Windows 系统有多个以太网适配器。给定以太网适配器的名称，我需要找到它的 IP 地址。

例如，`ipconfig`我的系统命令的输出是：

```
Ethernet adapter GB1:

   Connection-specific DNS Suffix  . : 
   IP Address. . . . . . . . . . . . : 0.0.0.0
   Subnet Mask . . . . . . . . . . . : 0.0.0.0
   Default Gateway . . . . . . . . . : 

Ethernet adapter SWITCH:

   Connection-specific DNS Suffix  . : 
   IP Address. . . . . . . . . . . . : 10.200.1.11
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   IP Address. . . . . . . . . . . . : 10.200.1.51
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 

Ethernet adapter LAN:

   Connection-specific DNS Suffix  . : 
   IP Address. . . . . . . . . . . . : 10.1.2.62
   Subnet Mask . . . . . . . . . . . : 255.255.254.0
   IP Address. . . . . . . . . . . . : 10.1.2.151
   Subnet Mask . . . . . . . . . . . : 255.255.254.0
   Default Gateway . . . . . . . . . : 10.1.2.1 
```

注意：我不需要担心无线适配器或任何其他类型的适配器。我只需要为以太网适配器执行此操作。

对于这个系统，我需要编写一个行为如下所示的 Java 类：

```
C:>java NameToIp GB1
0.0.0.0

C:>java NameToIp SWITCH
10.200.1.11
10.200.1.51

C:>java NameToIp LAN
10.1.2.62
10.1.2.151 
```

# 什么不起作用

使用[java.net.NetworkInterface](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/NetworkInterface.html)没有帮助。它的[getName()](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/NetworkInterface.html#getName%28%29)和[getDisplayName()](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/NetworkInterface.html#getDisplayName%28%29)方法不会打印适配器连接名称，因为它出现在`ipconfig`Windows 网络连接的输出中或中。他们改为打印实际的设备名称。例如，考虑以下代码：

```
import java.util.Enumeration;
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.SocketException;
import java.net.UnknownHostException;

public class ListInterfaces 
{
    public static void main(String[] args) throws SocketException, UnknownHostException {

        Enumeration<NetworkInterface> nwInterfaces = NetworkInterface.getNetworkInterfaces();

        while (nwInterfaces.hasMoreElements()) {

            NetworkInterface nwInterface = nwInterfaces.nextElement();
            System.out.print(nwInterface.getName() + ": " +
                             nwInterface.getDisplayName());

            Enumeration<InetAddress> addresses = nwInterface.getInetAddresses();
            while (addresses.hasMoreElements()) {
                InetAddress address = addresses.nextElement();
                System.out.print(" - " + address.getHostAddress());
            }
            System.out.println();
        }
    }
} 
```

这将打印以下输出：

```
C:>java ListInterfaces
lo: MS TCP Loopback interface - 127.0.0.1
eth0: Broadcom BCM5709C NetXtreme II GigE (NDIS VBD Client) # 
eth1: Broadcom BCM5709C NetXtreme II GigE (NDIS VBD Client) #2 - 10.200.1.11 - 10.200.1.51
eth2: Broadcom BCM5709C NetXtreme II GigE (NDIS VBD Client) #3 - 10.1.2.62 - 10.1.2.151 
```

# 一个有效的丑陋黑客

我编写了一个丑陋的 hack，它从`ipconfig`. 这是代码。

```
import java.util.ArrayList;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.InputStream;
import java.io.IOException;

public class NameToIp
{
    public static ArrayList<String> getIP(String adapterName)
    throws IOException, InterruptedException
    {
        // Run the Windows 'ipconfig' command and get its stdout
        ProcessBuilder cmdBuilder = new ProcessBuilder("ipconfig");
        Process process = cmdBuilder.start();
        BufferedReader stdout = new BufferedReader(
                new InputStreamReader(process.getInputStream()));

        // Find the section for the specified adapter
        String line;
        boolean foundAdapter = false;
        while ((line = stdout.readLine()) != null) {
            line = line.trim();
            if (line.equals("Ethernet adapter " + adapterName + ':')) {
                foundAdapter = true;
                break;
            }
        }
        if (!foundAdapter) {
            process.waitFor();
            throw new IOException("Adapter not found");
        }

        // Find IP addresses in the found section
        ArrayList<String> ips = new ArrayList<String>();
        while ((line = stdout.readLine()) != null) {
            // Stop parsing if we reach the beginning of the next
            // adapter section in the output of ifconfig
            if (line.length() > 0 && line.charAt(0) != ' ') {
                break;
            }

            line = line.trim();

            // Extract IP addresses
            if (line.startsWith("IP Address.") ||
                line.startsWith("IPv4 Address.")) {

                int colonIndex;
                if ((colonIndex = line.indexOf(':')) != 1) {
                    ips.add(line.substring(colonIndex + 2));
                }
            }
        }
        process.waitFor();

        return ips;
    }

    public static void main(String[] args)
    throws IOException, InterruptedException
    {
        // Print help message if adapter name has not been specified
        if (args.length != 1) {
            StackTraceElement[] stack = Thread.currentThread().getStackTrace();
            String prog = stack[stack.length - 1].getClassName();

            System.err.println("Usage: java " + prog + " ADAPTERNAME");
            System.err.println("Examples:");
            System.err.println("  java " + prog +" \"Local Area Connection\"");
            System.err.println("  java " + prog +" LAN");
            System.err.println("  java " + prog +" SWITCH");
            System.exit(1);
        }

        ArrayList<String> ips = getIP(args[0]);
        for (String ip: ips) {
            System.out.println(ip);
        }
    } 
} 
```

# 问题

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:20:53.613

创建一个使用 Windows API 查询本地以太网地址并使用 JNI 调用该 dll 的 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:54:27.210

我会回答我自己的问题。按照[SpaceTrucker 的建议](https://stackoverflow.com/a/12802151/303363)，我使用 JNI 创建了一个 Java 类，如下所示。

```
// NwInterface.java
import java.util.ArrayList;

public class NwInterface {    

    public native ArrayList<String> getAddresses(String adapterName);    

    static
    {
        System.loadLibrary("nwinterface");
    }        
} 
```

然后我在 C++ 中创建了“nwinterface”库，如下所示。

```
// nwinterface.cc
#include <iostream>
#include <winsock2.h>
#include <iphlpapi.h>
#include "NwInterface.h"

#pragma comment(lib, "iphlpapi.lib")
#pragma comment(lib, "advapi32.lib")

bool GetFriendlyName(const char* adapterName, unsigned char* buffer,
                     unsigned long size)
{
    HKEY hKey;

    char key[1024];
    _snprintf_s(key, sizeof key, _TRUNCATE,
                "SYSTEM\\CurrentControlSet\\Control\\Network\\"
                "{4D36E972-E325-11CE-BFC1-08002BE10318}\\%s\\Connection",
                adapterName);

    long ret = RegOpenKeyEx(HKEY_LOCAL_MACHINE, key, 0, KEY_READ, &hKey);
    if (ret != ERROR_SUCCESS) {
        return false;
    }

    ret = RegQueryValueEx(hKey, "Name", 0, 0, buffer, &size);
    if (ret != ERROR_SUCCESS) {
        return false;
    }
    buffer[size - 1] = '\0';

    return true;
}

JNIEXPORT jobject JNICALL Java_NwInterface_getAddresses(JNIEnv *env, jobject obj,
                                                        jstring jAdapterName)
{
    // Create a Java ArrayList object
    jclass arrayClass = env->FindClass("java/util/ArrayList");
    jmethodID initMethod = env->GetMethodID(arrayClass, "<init>", "()V");
    jmethodID addMethod = env->GetMethodID(arrayClass, "add", "(Ljava/lang/Object;)Z");
    jobject ips = env->NewObject(arrayClass, initMethod);

    // Get information about all adapters
    IP_ADAPTER_INFO adapterInfo[128];
    unsigned long bufferSize = sizeof adapterInfo;
    unsigned long ret = GetAdaptersInfo(adapterInfo, &bufferSize);

    // If there is an error, return empty ArrayList object
    if (ret != NO_ERROR) {
        return ips;
    }

    // Iterate through the information of each adapter and select the
    // specified adapter
    for (PIP_ADAPTER_INFO adapter = adapterInfo; adapter != NULL;
         adapter = adapter->Next) {

        char friendlyName[1024];
        ret = GetFriendlyName(adapter->AdapterName,
                              (unsigned char *) friendlyName,
                              sizeof friendlyName);
        if (ret == false) {
            continue;
        }

        const char *adapterName = env->GetStringUTFChars(jAdapterName, 0);
        if (strncmp(friendlyName, adapterName, sizeof friendlyName) == 0) {

            for (PIP_ADDR_STRING addr = &(adapter->IpAddressList); addr != NULL;
                 addr = addr->Next) {

                const char *ip = addr->IpAddress.String;
                env->CallBooleanMethod(ips, addMethod, env->NewStringUTF(ip));
            }
            break;
        }

    }

    return ips;
} 
```

最后，我通过编写这个 Java 程序测试了 Java 类。

```
// NameToIp2.java
import java.util.ArrayList;

public class NameToIp2 
{
    public static void main(String[] args)
    {
        // Print help message if adapter name has not been specified
        if (args.length != 1) {
            StackTraceElement[] stack = Thread.currentThread().getStackTrace();
            String prog = stack[stack.length - 1].getClassName();

            System.err.println("Usage: java " + prog + " ADAPTERNAME");
            System.err.println("Examples:");
            System.err.println("  java " + prog +" \"Local Area Connection\"");
            System.err.println("  java " + prog +" LAN");
            System.err.println("  java " + prog +" SWITCH");
            System.exit(1);
        }

        // Use NwInterface class to translate 
        NwInterface nwInterface = new NwInterface();
        ArrayList<String> ips = nwInterface.getAddresses(args[0]);
        for (String ip: ips) {
            System.out.println(ip);
        }
    }
} 
```

编译和运行程序的步骤如下：

```
javac NameToIp2.java
javah -jni NwInterface
cl /LD /EHsc /I C:\jdk1.5.0_13\include /I C:\jdk1.5.0_13\include\win32 nwinterface.cc 
```

这是输出：

```
C:>java NameToIp2 GB1
0.0.0.0

C:>java NameToIp2 SWITCH
10.200.1.11
10.200.1.51

C:>java NameToIp2 LAN
10.1.2.62
10.1.2.151 
```

# git - git-subtree：从克隆的 repo 推送更改

> ID：12801936
> 
> 赞同：12
> 
> 时间：2012-10-09T14:08:33.117
> 
> 标签：git, git-subtree

我正在使用 git-subtree（来自 Avery Pennarun）。在我当前的 git repo 中，我当然有我所有的项目文件/文件夹和一个名为“lib”的子树。如果我现在使用克隆这个 git存储库，`git clone`我会得到所有项目文件和子树“lib”（应该是一切）。我现在尝试的是：我在克隆的仓库中更改了子树“lib”中的某些内容，并尝试使用 将更改推送回子树“lib”的远程仓库 `git subtree push`，但它没有用。问题是什么？我是否必须先使用 git subtree add 将其添加为子树？

提前谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T12:56:42.533

免责声明，我怀疑我只比你早几天了解子树:-)

如果您只是在使用`git subtree push`，那么您没有提供足够的信息来提取和推送您的更改。

如果您正确克隆了 repo，则子树将已经存在。子树需要被告知你想从哪个子树推送（即使你只有一个），它还需要知道推送到哪里——具体来说，你不想推送到顶级仓库。因此，你想要这样的东西：

```
git subtree push --prefix=lib git@github.com:arges-github/lib.git master 
```

显然，应该更改 repo 和 refspec 以匹配您的 repo。

如果您想查看这里发生的事情（它确实有帮助），子树实际上会将影响子树内文件的更改拆分到不同的分支，然后将其推送到子树存储库。要看到这种情况发生，请使用`subtree split`

```
git subtree split --rejoin --branch=shared-changes --prefix=lib 
```

然后看看你所做的分支：

```
git checkout lib-changes 
```

并且，手动推动它们

```
git push git@github.com:arges-github/lib.git master 
```

如果这不起作用，则可能是您尚未将子树合并到您的存储库中。添加子树时：

```
 git subtree add --squash --prefix lib git@github.com:arges-github/lib.git master 
```

您还需要合并子树并将其推回您的顶级仓库。

```
 git subtree pull --squash --prefix lib git@github.com:arges-github/lib.git master
 git push 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T00:33:55.110

我遇到了与您完全相同的问题，我基本上使用 Roger Nolan 建议的方法解决了它。但是，如果您不幸像我一样使用不区分大小写的文件系统，您还必须确保每次执行拉取和推送时，前缀的大小写保持不变。

当您最终错误地混淆了大小写时，git 会认为您有两个子树，而文件系统上只存在一个。

所以我最终得到的解决方案（以防它帮助任何人）是：

1.  创建一个将推送您的子树的脚本。调用它`publish_<your-subtree-name>`。
2.  创建另一个脚本来拉取您的子树。调用它`update_<your-subtree-name>`。
3.  在您的 HEAD 创建一个临时分支并测试更新。如果您的脚本是正确的，您的临时分支将不会移动。
4.  在别处克隆子树存储库，添加测试提交，推送它并尝试使用您刚刚编写的更新脚本将其拉入您的存储库。
5.  如果一切正常，请删除您的临时分支，然后将两个脚本签入超级项目存储库。
6.  然后，每当您需要推送或拉取子树时，请使用脚本。

PS> --squash 参数很重要，特别是如果您的存储库的不同分支正在拉取子树的不同分支，并且如果您的项目中有多个子树。

# wpf - 在 wpf 图表中将 ItemsSource 添加到 ColumnSeries 时出错

> ID：12801937
> 
> 赞同：0
> 
> 时间：2012-10-09T14:08:34.100
> 
> 标签：wpf, charts, wpftoolkit, toolkit

我有几个复选框（其中内容 = 数据库中的名称）。在 metchod checkbox_checked 中，我试图将 ColumnSeries 添加到 wpf 图表，但仍然出现错误：“对象引用未设置为对象的实例。”

这是xaml代码：

```
 <DVC:Chart Canvas.Top="80" Canvas.Left="10" Name="wykres1"  Background="LightSteelBlue">

</DVC:Chart> 
```

和代码隐藏：

```
CheckBox c = (CheckBox)sender;

            ColumnSeries b = new ColumnSeries();
            b.Title = c.Content.ToString();
            b.ItemsSource = null;
            b.ItemsSource =
                new KeyValuePair<string, int>[]{
                    new KeyValuePair<string, int>("Project Manager", 12),
                    new KeyValuePair<string, int>("CEO", 25),
                    new KeyValuePair<string, int>("Software Engg.", 5),
                    new KeyValuePair<string, int>("Team Leader", 6),
                    new KeyValuePair<string, int>("Project Leader", 10),
                    new KeyValuePair<string, int>("Developer", 4) };
            wykres1.Series.Add(b);

            categoryList.Add(c.Tag.ToString()); 
```

任何人都可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:37:50.707

现在工作。解决方案是：ColumnSeries b = new ColumnSeries {Title=c.Content.ToString(),IndependentValueBinding = new Binding("Key"), DependentValueBinding = new Binding("Value") };

# android - putextra中位置和名称的用途是什么？

> ID：12801938
> 
> 赞同：-1
> 
> 时间：2012-10-09T14:08:37.380
> 
> 标签：android

在Android中如何使用`.get[position]`and `name`in `.putextra`，以及如何使用数组？`position``putextra`

```
ainListView = (ListView) findViewById( R.id.mainListView );
mainListView.setOnItemClickListener(new OnItemClickListener() {
    int[] myImageList = new int[]{R.drawable.koala_copy, R.drawable.lighthouse_copy};

    public void onItemClick(AdapterView<?> parent, View view, int pos,
                            long id) {
        Intent b = new Intent(SimpleListViewActivity.this, Nextclass.class);
        b.putExtra("Name", myImageList.get[position]);
        b.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        finish();
        startActivity(b);
    }

    private ArrayAdapter<String> getListAdapter() {
        // TODO Auto-generated method stub
        return null; 
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:09:05.030

目前还不清楚你的意思。以及您的代码。首先，您想表达什么意图？看起来您正试图在数组中获得一个位置。.get 不是有效的数组方法。一个数组列表是的，但不是数组。即便如此，您也不会只放置一个空白变量。

我怀疑您希望将所选列表视图的位置放入一个意图中，然后启动下一个活动。

```
b.putExtra("Name", pos); 
```

不管你信不信，这就是你所需要的，因为 int pos（位置）很方便地作为 onclicklistener 的一个参数出现。也许在下一个活动中，您想在图像视图中显示两个图像中的一个。在那里你可以使用一个简单的 if 语句，或者如果你打算放更多的话，可以使用 case 来选择要显示的图像。到目前为止，我看不到那个 int 数组在哪里。

* * *

**编辑：** 在下一个活动中显示图像的实现没有魔法。就像直觉一样，您会得到刚刚放入意图的 int 。然后根据数字是多少，您对新的可绘制对象执行 imageview 可绘制分配。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        int listPos = getIntent().getExtras().getInt("Name");
        ImageView image = (ImageView) findViewById(R.id.imageView1);

        switch (listPos) {
        case 0: image.setImageResource(R.drawable.koala_copy);
        break;
        case 1: image.setImageResource(R.drawable.lighthouse_copy);
        break;
        }
    } 
```

至于从 sd 卡获取图像，也许这个网页会有所帮助： [http ://android-er.blogspot.com/2010/07/load-bitmap-file-from-sd-card.html](http://android-er.blogspot.com/2010/07/load-bitmap-file-from-sd-card.html)

它也有一个示例文件，您也可以下载。

最后，为了不只是给你一天的鱼，但帮助你钓鱼 - 我可以推荐一些视频教程吗？这是除了 stackoverflow 之外的一个很好的资源，用于获取有关 android 开发的知识：[http ://thenewboston.org/list.php?cat=6](http://thenewboston.org/list.php?cat=6)

# php - 在 PHP 中从类构建 XML 文件

> ID：12801939
> 
> 赞同：1
> 
> 时间：2012-10-09T14:08:39.173
> 
> 标签：php, xml, class

我想知道是否有人知道如何从类列表中动态构建 XML 文件？

这些类包含公共变量，看起来像这样。

```
class node {
    public $elementname;
} 
```

我确实注意到某些类的名称与变量相同，在这种情况下，节点将是节点的子节点元素：

```
class data {
   public $dataaset;
}

class dataset {
    public $datasetint;
} 
```

将会：

```
 <data>
  <dataset>datasetint</dataset>
 </data> 
```

可能是 SimpleXML 中的什么东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T14:30:13.730

我能想到的链接 2 个或更多不相关类的唯一解决方案是使用 `Annotations`.

默认情况下，注释在 PHP 中不受支持，但目前在[RFC（请求评论：类元数据）](https://wiki.php.net/rfc/annotations)中，但支持或拒绝弯曲时间，您可以使用`ReflectionClass`&`Comments`功能 创建您的

示例如果您有 3 个这样的课程

```
class Data {
    /**
     *
     * @var Cleaner
     */
    public $a;
    /**
     *
     * @var Extraset
     */
    public $b;
    public $runMe;

    function __construct() {
        $this->runMe = new stdClass();
        $this->runMe->action = "RUN";
        $this->runMe->name = "ME";
    }
}
class Cleaner {
    public $varInt = 2;
    public $varWelcome = "Hello World";

    /**
     *
     * @var Extraset
     */
    public $extra;
}
class Extraset {
    public $boo = "This is Crazy";
    public $far = array(1,2,3);
} 
```

然后你可以运行这样的代码

```
$class = "Data";
$xml = new SimpleXMLElement("<$class />");
getVariablesXML($class, $xml);
header("Content-Type: text/xml");
$xml->asXML('data.xml');
echo $xml->asXML(); 
```

输出

```
<?xml version="1.0"?>
<Data>
  <Cleaner name="a">
    <varInt type="integer">2</varInt>
    <varWelcome type="string">Hello World</varWelcome>
    <Extraset name="extra">
      <boo type="string">This is Crazy</boo>
      <far type="serialized">a:3:{i:0;i:1;i:1;i:2;i:2;i:3;}</far>
    </Extraset>
  </Cleaner>
  <Extraset name="b">
    <boo type="string">This is Crazy</boo>
    <far type="serialized">a:3:{i:0;i:1;i:1;i:2;i:2;i:3;}</far>
  </Extraset>
  <runMe type="serialized">O:8:"stdClass":2:{s:6:"action";s:3:"RUN";s:4:"name";s:2:"ME";}</runMe>
</Data> 
```

使用的功能

```
function getVariablesXML($class, SimpleXMLElement $xml) {
    $reflect = new ReflectionClass($class);
    foreach ( $reflect->getProperties(ReflectionProperty::IS_PUBLIC) as $property ) {
        $propertyReflect = $reflect->getProperty($property->getName());
        preg_match("/\@var (.*)/", $propertyReflect->getDocComment(), $match);
        $match and $match = trim($match[1]);
        if (empty($match)) {
            $value = $property->getValue(new $class());
            if (is_object($value) || is_array($value)) {
                $type = "serialized";
                $value = serialize($value);
            } else {
                $type = gettype($value);
            }
            $child = $xml->addChild($property->getName(), $value);
            $child->addAttribute("type", $type);
        } else {
            $child = $xml->addChild($match);
            $child->addAttribute("name", $property->getName());
            if (class_exists($match)) {
                getVariablesXML($match, $child);
            }
        }
    }
} 
```

# android - 电影无法在 Galaxy S GT-I9003 中播放？

> ID：12801942
> 
> 赞同：0
> 
> 时间：2012-10-09T14:08:50.137
> 
> 标签：android, android-mediaplayer

我有一部手机 Galaxy S (GT-I9003) 无法播放分辨率 (320x480) 的视频，而 Galaxy S 的所有其他型号都能够显示该视频。

这是日志

```
10-09 06:44:54.232: W/MediaPlayer(1907): info/warning (1, 26)
10-09 06:44:54.232: E/PlayerDriver(1278): Command PLAYER_INIT completed with an error or info PVMFFailure
10-09 06:44:54.232: E/MediaPlayer(1907): error (1, -1)
10-09 06:44:54.232: W/System.err(1907): java.io.IOException: Prepare failed.: status=0x1
10-09 06:44:54.240: W/System.err(1907):     at android.media.MediaPlayer.prepare(Native Method)
10-09 06:44:54.240: W/System.err(1907):     at com.MovieController.startMovie(MovieController.java:180)
10-09 06:44:54.240: W/System.err(1907):     at com.MovieController.show(MovieController.java:88)
10-09 06:44:54.240: W/System.err(1907):     at com.MovieController.play(MovieController.java:120)
10-09 06:44:54.240: W/System.err(1907):     at com.android.sphybrid.D2CommandController.execute(D2CommandController.java:73)
10-09 06:44:54.240: W/System.err(1907):     at com.android.sphybrid.WGFWebViewClient.doWithTitle(WGFWebViewClient.java:114)
10-09 06:44:54.240: W/System.err(1907):     at com.android.sphybrid.WGFWebViewClient.onPageFinished(WGFWebViewClient.java:93)
10-09 06:44:54.240: W/System.err(1907):     at jp.android.survivors.WebViewClient.onPageFinished(WebViewClient.java:96)
10-09 06:44:54.240: W/System.err(1907):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:281)
10-09 06:44:54.240: W/System.err(1907):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-09 06:44:54.240: W/System.err(1907):     at android.os.Looper.loop(Looper.java:123)
10-09 06:44:54.240: W/System.err(1907):     at android.app.ActivityThread.main(ActivityThread.java:4632)
10-09 06:44:54.240: W/System.err(1907):     at java.lang.reflect.Method.invokeNative(Native Method)
10-09 06:44:54.240: W/System.err(1907):     at java.lang.reflect.Method.invoke(Method.java:521)
10-09 06:44:54.240: W/System.err(1907):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
10-09 06:44:54.240: W/System.err(1907):     at dalvik.system.NativeStart.main(Native Method)
10-09 06:44:54.240: I/MovieFile(1907): Movie File: <null>
10-09 06:44:54.248: W/PlayerDriver(1278): PVMFInfoErrorHandlingComplete
10-09 06:44:54.279: I/AudioFlinger(1278): getNextBuffer() no more data for track 4096 on thread 0x34cc8
10-09 06:44:55.709: D/wpa_supplicant(1474): wpa_driver_tista_driver_cmd LINKSPEED
10-09 06:44:55.709: D/wpa_supplicant(1474): Link Speed command
10-09 06:44:55.709: D/wpa_supplicant(1474): buf LinkSpeed 54
10-09 06:44:56.287: I/AudioStreamOutALSA(1278): (virtual android::status_t android::AudioStreamOutALSA::standby())  enter
10-09 06:44:56.373: D/AudioStreamOutALSA(1278): Output standby called!!. Turn off PCM device.
10-09 06:44:56.373: I/ALSAStreamOps(1278): [ALSAStreamOps]codecOff mode = 0
10-09 06:44:56.373: D/ALSAControl(1278):  ALSAControl::set index = 0 
10-09 06:44:56.373: I/ALSAControl(1278): <set>id = 1079651552, info = 1079651272, name = Amp Enable
10-09 06:44:56.373: I/ALSAControl(1278): <set>mHandle Success 215600
10-09 06:44:56.420: D/BT HS/HF(1489): gsmAsuToSignal=27
10-09 06:44:56.420: D/ALSAControl(1278):  ALSAControl::set index = 0 
10-09 06:44:56.420: I/ALSAControl(1278): <set>id = 1079651552, info = 1079651272, name = Idle Mode
10-09 06:44:56.420: I/ALSAControl(1278): <set>mHandle Success 215600
10-09 06:44:56.490: I/AudioStreamOutALSA(1278): [AudioOutLock]Relase_wake_Lock 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:30:00.563

我刚刚发现我试图在 Android 2.2.1 中播放的电影在其他一些编解码器 (JVT/AC) 中，分辨率为 (320 x 480)。我在不改变分辨率的情况下将编解码器更改为 MPEG-4，它开始工作。我想这是一种不受支持的格式。

# windows-8 - 如何获取可见bing地图角落的坐标？

> ID：12801943
> 
> 赞同：2
> 
> 时间：2012-10-09T14:08:49.720
> 
> 标签：windows-8, bing-maps

我在 Windows 8 应用程序中使用 Bing 地图，我需要在多个位置显示图钉。

有什么方法可以获取可见地图角落的 GPS 坐标？

或者另一种方法来获取可见地图的距离？（例如40公里宽，60公里高）

我需要这个来限制我附加到地图的图钉的数量，使其仅是地图可见部分的图钉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:14:47.490

您可以直接从地图实例的*Bounds*属性中获取此信息，该属性返回由当前视图中显示的西北和东南纬度/经度位置定义的 LocationRect。 [http://msdn.microsoft.com/en-us/library/hh846504.aspx](http://msdn.microsoft.com/en-us/library/hh846504.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:19:12.397

尝试使用 TryPixelToLocation 方法。

```
Location locationOfPixel
if(MyMap.TryPixelToLocation(ThePointToLookUp, out locationOfPixel))
{
    //locationOfPixelshould contain the lat/long of the give point on the map.
} 
```

显然，您需要计算出地图控件的左上角、右上角、左下角和右下角的像素位置是什么，并相应地传递它们。

# asp.net - 使用 ASP.NET 将文本加载到网页上

> ID：12801945
> 
> 赞同：1
> 
> 时间：2012-10-09T14:08:53.147
> 
> 标签：asp.net

使用 ASP.NET 将文本加载到网页中的最佳方法是什么

我在 MS SQL 数据库表中有 3 条记录。每条记录将对应于网页中的一个段落。

桌子：

![在此处输入图像描述](../Images/aae801940225241e2386d52c468f2715.png)

关于我们页面的 HTML 代码如下所示（注意我放置了相应的段落）：

```
<div id="content-1b">
    <div id="content-1-1b">
        </div>
    <div id="content-1-2b"><p class="none">paragraph 1</p>
                           <p class="nonetop">paragraph 2</p>
        </div>
</div>

<div id="content-3b"><p class="nonetop">paragraph 3</p>
    </div> 
```

问候，茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:14:47.223

通过提供唯一的 ID 和 runat=server 将这些 Div 声明为服务器控件，以便您可以在后面的代码中访问该对象。

这些 div 等同于 HTMLGenericControl，所以你可以说 divid.innerHTML = content。

或者您也可以使用中继器并绑定到您的 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:37:03.270

将您的 div 或段落标签设置为带有 ID 的 runat="server" 将允许您访问 innerhtml/text

HTML：

```
<div id="content-1b">
    <div id="content-1-1b">
        </div>
    <div id="content-1-2b"><p class="none" id="p1" runat="server">paragraph 1</p>
                           <p id="p2" runat="server" class="nonetop">paragraph 2</p>
        </div>
</div>

<div id="content-3b"><p id="p3" runat="server" class="nonetop">paragraph 3</p>
    </div> 
```

运行代码如下：（假设您的内容在数据表中，并且您想要每行的第一项（0））

```
For each row as Datarow in dt
     p1.InnerHtml += Row.Item(0).ToString
Next 
```

将遍历您的数据表，从每一行获取第一列并将文本附加到段落标签。

**更新：**

对于单一内容

如果您的 SQL 返回 3 行，每个要填充的区域 1 行，只需执行以下操作：

假设 dt 是您要填写的数据表，并且每行的第一列是您的内容。

```
p1.InnerHTML = dt.rows(0).Item(0)
p2.InnerHTML = dt.rows(1).Item(0)
p3.InnerHTML = dt.rows(2).Item(0) 
```

# android - 自定义键盘符号代码android

> ID：12801946
> 
> 赞同：1
> 
> 时间：2012-10-09T14:08:53.613
> 
> 标签：android, android-layout, android-widget

我有一个带有数字和字母的自定义键盘。我需要在键盘上显示符号。

键盘.xml 作为

```
<?xml version="1.0" encoding="utf-8"?>
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
    android:keyWidth="10%p"
    android:horizontalGap="0px"
    android:verticalGap="0px">
   <Row>
    <Key android:codes="8" android:keyLabel="1" android:keyEdgeFlags="left"/>
        <Key android:codes="9" android:keyLabel="2"/>
        <Key android:codes="10" android:keyLabel="3"/>
        <Key android:codes="11" android:keyLabel="4"/>
        <Key android:codes="12" android:keyLabel="5"/>
        <Key android:codes="13" android:keyLabel="6"/>
        <Key android:codes="14" android:keyLabel="7"/>
        <Key android:codes="15" android:keyLabel="8"/>
        <Key android:codes="16" android:keyLabel="9"/>
        <Key android:codes="7" android:keyLabel="0" android:keyEdgeFlags="right"/>
   </Row>
    <Row>
        <Key android:codes="45" android:keyLabel="q" android:keyEdgeFlags="left"/>
        <Key android:codes="51" android:keyLabel="w"/>
        <Key android:codes="33" android:keyLabel="e"/>
        <Key android:codes="46" android:keyLabel="r"/>
        <Key android:codes="48" android:keyLabel="t"/>
        <Key android:codes="53" android:keyLabel="y"/>
        <Key android:codes="49" android:keyLabel="u"/>
        <Key android:codes="37" android:keyLabel="i"/>
        <Key android:codes="43" android:keyLabel="o"/>
        <Key android:codes="44" android:keyLabel="p" android:keyEdgeFlags="right"/>
    </Row>

    <Row>
        <Key android:codes="29" android:keyLabel="a" android:horizontalGap="5%p"
                android:keyEdgeFlags="left"/>
        <Key android:codes="47" android:keyLabel="s"/>
        <Key android:codes="32" android:keyLabel="d"/>
        <Key android:codes="34" android:keyLabel="f"/>
        <Key android:codes="35" android:keyLabel="g"/>
        <Key android:codes="36" android:keyLabel="h"/>
        <Key android:codes="38" android:keyLabel="j"/>
        <Key android:codes="39" android:keyLabel="k"/>
        <Key android:codes="40" android:keyLabel="l" android:keyEdgeFlags="right"/>
    </Row>

    <Row>
        <Key android:codes="54" android:keyLabel="z" android:horizontalGap="5%p"
                android:keyEdgeFlags="left"/>
        <Key android:codes="52" android:keyLabel="x"/>
        <Key android:codes="31" android:keyLabel="c"/>
        <Key android:codes="50" android:keyLabel="v"/>
        <Key android:codes="30" android:keyLabel="b"/>
        <Key android:codes="42" android:keyLabel="n"/>
        <Key android:codes="41" android:keyLabel="m"/>
         <Key android:codes="-3" android:keyLabel="Done"/>
        <Key android:codes="67" android:keyLabel="Delete"
                android:keyWidth="15%p" android:keyEdgeFlags="right"
                android:isRepeatable="true"/>
    </Row>

    <Row android:rowEdgeFlags="bottom">
        <Key android:codes="-3" android:keyLabel="\@" android:horizontalGap="20%p"
                android:keyWidth="15%p" android:keyEdgeFlags="left"/>
        <Key android:codes="-2" android:keyLabel=".com" android:keyWidth="15%p"/>
        <Key android:codes="-1" android:keyLabel="-"
                android:keyWidth="15%p" />
        <Key android:codes="-4" android:keyLabel="."
                android:keyWidth="15%p" android:keyEdgeFlags="right"/>
    </Row>
</Keyboard> 
```

我想显示符号和下一个选项来移动 listview 中存在的另一个编辑 text.edit 文本。Listview 包含 textview 和编辑 text。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-06T07:28:10.907

要显示符号，您必须创建另一个 xml 并在单击任何按钮时切换（更改键盘设计）

**符号.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<Keyboard android:keyWidth="10.000002%p" android:keyHeight="@dimen/key_height" android:horizontalGap="0.0px" android:verticalGap="4.0px"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <Row>
        <Key android:codes="49" android:keyEdgeFlags="left" android:keyLabel="1" />
        <Key android:codes="50" android:keyLabel="2" />
        <Key android:codes="51" android:keyLabel="3" />
        <Key android:codes="52" android:keyLabel="4" />
        <Key android:codes="53" android:keyLabel="5" />
        <Key android:codes="54" android:keyLabel="6" />
        <Key android:codes="55" android:keyLabel="7" />
        <Key android:codes="56" android:keyLabel="8" />
        <Key android:codes="57" android:keyLabel="9" />
        <Key android:codes="48" android:keyEdgeFlags="right" android:keyLabel="0" />
    </Row>
    <Row>
        <Key android:codes="64" android:keyEdgeFlags="left" android:keyLabel="\@" />
        <Key android:codes="35" android:keyLabel="\#" />
        <Key android:codes="36" android:keyLabel="$" />
        <Key android:codes="37" android:keyLabel="%" />
        <Key android:codes="38" android:keyLabel="&amp;" />
        <Key android:codes="42" android:keyLabel="*" />
        <Key android:codes="45" android:keyLabel="-" />
        <Key android:codes="61" android:keyLabel="=" />
        <Key android:codes="40" android:keyLabel="(" />
        <Key android:codes="41" android:keyEdgeFlags="right" android:keyLabel=")" />
    </Row>
    <Row>
        <Key android:keyWidth="14.999998%p" android:codes="-1" android:keyEdgeFlags="left" android:isModifier="true" android:isSticky="true" android:keyIcon="@drawable/sym_keyboard_shift" />
        <Key android:codes="33" android:keyLabel="!" />
        <Key android:codes="34" android:keyLabel="&quot;" />
        <Key android:codes="39" android:keyLabel="'" />
        <Key android:codes="58" android:keyLabel=":" />
        <Key android:codes="59" android:keyLabel=";" />
        <Key android:codes="47" android:keyLabel="/" />
        <Key android:codes="63" android:keyLabel="\?" />
        <Key android:keyWidth="14.999998%p" android:codes="-5" android:keyEdgeFlags="right" android:isRepeatable="true" android:keyIcon="@drawable/sym_keyboard_delete" />
    </Row>
    <Row android:rowEdgeFlags="bottom">
        <Key android:keyWidth="14.999998%p" android:codes="-11" android:keyLabel="ABC" />
        <Key android:keyWidth="13.999998%p" android:codes="-10" android:keyIcon="@drawable/e405" />
        <Key android:keyWidth="35.99999%p" android:codes="32" android:isRepeatable="true" android:keyIcon="@drawable/sym_keyboard_space" />
        <Key android:keyWidth="14.999998%p" android:codes="44" android:keyLabel="," />
        <Key android:keyWidth="20.000004%p" android:codes="10" android:keyEdgeFlags="right" android:keyIcon="@drawable/sym_keyboard_return" />
    </Row>
</Keyboard> 
```

# php - iOS - JSONString 到 PHP

> ID：12801948
> 
> 赞同：0
> 
> 时间：2012-10-09T14:09:04.743
> 
> 标签：php, ios, json

我在 JSONString 中发送 4 个不同的值。我需要以某种方式（解码？）将这些转换为 PHP 值以将其发送到 MySQL 数据库。

这个函数发送的是 php 文件：

```
- (void)myFuntionThatWritesToDatabaseInBackgroundWithLatitude:(NSString *)latitude longitude:(NSString *)longitude date:(NSString *)stringFromDate 
{
    _phonenumber = [[NSUserDefaults standardUserDefaults] objectForKey:@"phoneNumber"];

    NSMutableString *postString = [NSMutableString stringWithString:kPostURL];
    NSString*jsonString = [[NSString alloc] initWithFormat:@{\"id\":\"%@\",\"longitude\":\"%@\",\"latitude\":\"%@\",\"timestamp\":\"%@\"}", _phonenumber, longitude , latitude, stringFromDate];

    [postString appendString:[NSString stringWithFormat:@"?data=%@", jsonString]];
    [postString setString:[postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString ]];
    [request setHTTPMethod:@"POST"];

    [[NSURLConnection alloc] initWithRequest:request delegate:self ];
    NSLog(@"Post String =%@", postString);

    //    LocationTestViewController*locationTestViewController = [[LocationTestViewController alloc]init];
    //    phonenumber = locationTestViewController.telefoonnummer;
    NSLog(@"HERE1 : %@", _phonenumber);

} 
```

这部分可能会出错：

```
NSString* jsonString = [[NSString alloc] initWithFormat:@{\"id\":\"%@\",\"longitude\":\"%@\",\"latitude\":\"%@\",\"timestamp\":\"%@\"}", _phonenumber, longitude , latitude, stringFromDate]; 
```

这是我的日志：

```
2012-10-09 15:32:59.869 MyApp[626:c07] Post String=http://www.yourdomain.com/locatie.php?  data=%7B%22id%22:%220612833397%22,%22longitude%22:%22-143.406417%22,%22latitude%22:%2232.785834%22,%22timestamp%22:%2209-10%2015:05%22%7D 
```

它将它发送到这个 PHP 文件，其中需要为 MySQL 插入准备好 id、经度、纬度和时间戳

```
 <?php

    $id = $_POST['id'];
    $longitude = $_POST['longitude'];
    $latitude = $_POST['latitude'];
    $timestamp = $_POST['stringFromDate'];

    $link = mysql_connect('server', 'bla', 'bla') or die('Could not connect: ' . mysql_error());

    mysql_select_db('bla') or die('Could not select database');

    // Performing SQL query
    $query="INSERT INTO locatie (id, longitude, latitude, timestamp) 
    VALUES ($id, $longitude,$latitude,$timestamp)";
    $result = mysql_query($query) or die('Query failed: ' . mysql_error());
    echo "OK";

    // Free resultset
    mysql_free_result($result);

    // Closing connection
    mysql_close($link);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:51:15.147

试试这个代码：

```
$tmpdata = urldecode($_GET['data']);
$data = json_decode($tmpdata);
$id = $data['id'];
$longitude = $data['longitude'];
$latitude = $data['latitude'];
$timestamp = $data['stringFromDate'];

$link = mysql_connect('server', 'bla', 'bla') or die('Could not connect')

mysql_select_db('bla') or die('Could not select database');

// Performing SQL query
$query="INSERT INTO locatie (id, longitude, latitude, timestamp) 
VALUES ($id, $longitude,$latitude,$timestamp)";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());
echo "OK";

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:27:11.617

简单的错字。代替

```
NSString* jsonString = [[NSString alloc] initWithFormat:@{\"id\":\"%@\",\"longitude\":\"%@\",\"latitude\":\"%@\",\"timestamp\":\"%@\"}", _phonenumber, longitude , latitude, stringFromDate]; 
```

和

```
NSString* jsonString = [[NSString alloc] initWithFormat:@"\"id\":\"%@\",\"longitude\":\"%@\",\"latitude\":\"%@\",\"timestamp\":\"%@\"", _phonenumber, longitude , latitude, stringFromDate]; 
```

# c++ - 如果作为基类型引用传递，派生类型会解构吗？

> ID：12801955
> 
> 赞同：0
> 
> 时间：2012-10-09T14:09:21.633
> 
> 标签：c++, inheritance, pass-by-reference, destructor

我有一个 Base 类，它被认为是只读的，在它的虚拟析构函数中它什么也不做。现在我将该 Base 类派生为一个可写的 Derived 类，并且在它的析构函数中，它删除了 Base 成员：

```
class Base
{
    virtual ~Base() {}
    void* Data;
}
class Derive : public virtual Base
{
    virtual ~Derive() { delete Data; }
} 
```

忽略上面语法不正确的代码，如果我要将 Derive 实例传递给以 Base 类作为引用的 Function ：

```
void Function(const Base& base)
{
   ...
}

...
Derive der = Derive();
...
Function(der); 
```

Derived 析构函数会在函数作用域的末尾被调用吗？我在寻找正确的关键字来找到答案时遇到了麻烦，所以如果之前有人问过，我很抱歉。我假设 C++ 处理引用的类型是它们的类型，而不是它们可能的类型，但我可能是错的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:12:02.893

不，它不会，因为对象不会超出范围。它超出范围，并在调用后自动销毁`Function`。

```
{
  Derive der = Derive();
  //...
  Function(der);
  //...
  //der still alive here
} //der is destroyed here, all destructors are called correctly 
```

**如果您要按值**而不是按引用传递参数：

```
void Function(Base base)
{
   ...
} 
```

该对象将被**切片**。在内部创建的副本`Function`是类型`Base`（不是`Derive`）的对象，因此`Base`当函数退出时只会调用析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:32:40.617

> Derived 析构函数会在函数作用域的末尾被调用吗？

不会。当对象本身而不是对它的引用超出范围时，将调用 Derived 析构函数。引用不是对象。这只是一个别名。或者，将引用视为不能为空、不能重新分配、`.`用于访问成员而不是`->`. 除此之外，它们只是指针。当您将指针传递给函数时，仅仅因为指针在函数结束时超出范围并不意味着指向的对象超出范围。这同样适用于引用。

你的设计有点时髦。一些问题：

*   类中的那个`void*`数据成员是`Base`怎么回事？
*   为什么是`void*`指针？这有点 C 而不是 C++ 的味道。
*   类中是否有任何成员函数`Base`使用该数据成员？
    *   如果不是，为什么该数据成员是该类的一部分？
*   这`~Derive()`删除了这一点，而不是`~Base()`有点怀疑。这种设计背后的基本原理是什么？

# c# - 需要轮播控制帮助

> ID：12801956
> 
> 赞同：1
> 
> 时间：2012-10-09T14:09:27.687
> 
> 标签：c#, silverlight, xaml, winrt-xaml

通过参考 [http://silverlightcarousel.codeplex.com/](http://silverlightcarousel.codeplex.com/)

我在 c# xaml 中创建了带有动态项目的 3D 轮播控件。但是最多可以显示 7 或 10 个项目。但是当有超过10个项目时;它似乎更拥挤。

即使列表中的项目超过 3 或 5 个，我也想一次最多显示 5 或 3 个项目。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:12:39.057

创建一个新列表，其中仅包含您要在轮播中显示的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:17:43.693

如果您查看代码，则会分配一些常量值来创建在画布上显示的图标。

```
private const double DEFAULT_SCALE = 0.5;
private const double MINIMUM_SCALE = 0;
private const double MAXIMUM_SCALE = 1;
private double _scale = DEFAULT_SCALE; 
```

如果您更改缩放值的值，您将能够使项目远离选择（即在轮播的远端），变得比它们当前设置的要小。这应该会产生距离更远的错觉，但更重要的是允许您将更大的项目列表绑定到轮播。

# objective-c - 如何计算文件夹的大小。（此尺寸必须与 Finder 一致。）

> ID：12801957
> 
> 赞同：2
> 
> 时间：2012-10-09T14:09:27.100
> 
> 标签：objective-c, macos, cocoa, core-foundation

我需要计算 MacOS 中文件夹的大小。此尺寸值必须与 Finder 一致。我已经尝试了几种方法来做到这一点。但结果总是与 Finder 不同。

以下方法是我尝试过的。

```
typedef struct{
    //getResourceValue in NSURL
    unsigned long long fileSize;
    unsigned long long fileAllocSize;
    unsigned long long totalFileSize;
    unsigned long long totalFileAllocSize;
    //lstat in posix
    unsigned long long statSize;
    unsigned long long blockSize;
    //NSFileManager
    unsigned long long cocoaSizeNo;
    unsigned long long cocoaSizeYes
}sizePack;

- (sizePack)foldSize:(NSString *)direString{

    sizePack sizeP;
    memset(&sizeP, 0, sizeof(sizeP));

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSArray *tempArray = [fileManager contentsOfDirectoryAtPath:direString error:nil];
    for (NSString *fileName in tempArray) {
        BOOL flag = YES;
        NSString *fullPath = [direString stringByAppendingPathComponent:fileName];
        if ([fileManager fileExistsAtPath:fullPath isDirectory:&flag]) {
            if (!flag) {

                NSNumber* FileSize;
                NSNumber* FileAllocatedSize;
                NSNumber* TotalFileSize;
                NSNumber* TotalAllocatedSize;

                NSURL* url = [NSURL fileURLWithPath:fullPath];
                [url getResourceValue:&FileSize forKey:NSURLFileSizeKey error:nil];
                [url getResourceValue:&FileAllocatedSize forKey:NSURLFileAllocatedSizeKey error:nil];
                [url getResourceValue:&TotalFileSize forKey:NSURLTotalFileSizeKey error:nil];
                [url getResourceValue:&TotalAllocatedSize forKey:NSURLTotalFileAllocatedSizeKey error:nil];

                struct stat statbuf;
                stat([fullPath UTF8String], &statbuf);

                unsigned long long fileSize = [FileSize unsignedLongLongValue];
                unsigned long long fileAllocSize = [FileAllocatedSize unsignedLongLongValue];
                unsigned long long totalFileSize = [TotalFileSize unsignedLongLongValue];
                unsigned long long totalFileAllocSize = [TotalAllocatedSize unsignedLongLongValue];
                unsigned long long cocoaSizeNO = [[[NSFileManager defaultManager] fileAttributesAtPath:fullPath traverseLink:NO] fileSize];

                unsigned long long cocoaSizeYES = [[[NSFileManager defaultManager] fileAttributesAtPath:fullPath traverseLink:YES] fileSize];

                sizeP.fileSize += fileSize;
                sizeP.fileAllocSize += fileAllocSize;
                sizeP.totalFileSize += totalFileSize;
                sizeP.totalFileAllocSize += totalFileAllocSize;
                sizeP.statSize += statbuf.st_size;
                sizeP.blockSize += statbuf.st_blksize;
                sizeP.cocoaSizeNo += cocoaSizeNO;
                sizeP.cocoaSizeYes += cocoaSizeYES;
            }
            else {
                sizePack tmp = [self foldSize:fullPath];
                sizeP.fileSize += tmp.fileSize;
                sizeP.fileAllocSize += tmp.fileAllocSize;
                sizeP.totalFileSize += tmp.totalFileSize;
                sizeP.totalFileAllocSize += tmp.totalFileAllocSize;
                sizeP.statSize += tmp.statSize;
                sizeP.blockSize += tmp.blockSize*4096;
                sizeP.cocoaSizeNo += tmp.cocoaSizeNo;
                sizeP.cocoaSizeYes += tmp.cocoaSizeYes;
            }
        }
    }

    return sizeP;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:04:52.037

```
- (unsigned long long) folderSizeWithFSRef:(FSRef*)theFileRef
{
    FSIterator    thisDirEnum = NULL;
    unsigned long long totalSize = 0;

    // Iterate the directory contents, recursing as necessary
    if (FSOpenIterator(theFileRef, kFSIterateFlat, &thisDirEnum) ==
        noErr)
    {
        const ItemCount kMaxEntriesPerFetch = 256;
        ItemCount actualFetched;
        FSRef    fetchedRefs[kMaxEntriesPerFetch];
        FSCatalogInfo fetchedInfos[kMaxEntriesPerFetch];

        OSErr fsErr = FSGetCatalogInfoBulk(thisDirEnum,
                                               kMaxEntriesPerFetch, &actualFetched,
                                               NULL, kFSCatInfoDataSizes | kFSCatInfoRsrcSizes |
                                               kFSCatInfoNodeFlags, fetchedInfos,
                                               fetchedRefs, NULL, NULL);
        while ((fsErr == noErr) || (fsErr == errFSNoMoreItems))
        {
            ItemCount thisIndex;
            for (thisIndex = 0; thisIndex < actualFetched; thisIndex++)
            {
                // Recurse if it's a folder
                if (fetchedInfos[thisIndex].nodeFlags &
                    kFSNodeIsDirectoryMask)
                {
                    totalSize += [self
                                  folderSizeWithFSRef:&fetchedRefs[thisIndex]];
                }
                else
                {
                    // add the size for this item
                    totalSize += fetchedInfos[thisIndex].dataLogicalSize;
                    totalSize += fetchedInfos[thisIndex].rsrcLogicalSize;
                }
            }

            if (fsErr == errFSNoMoreItems)
            {
                break;
            }
            else
            {
                // get more items
                fsErr = FSGetCatalogInfoBulk(thisDirEnum,
                                             kMaxEntriesPerFetch, &actualFetched,
                                             NULL, kFSCatInfoDataSizes | kFSCatInfoRsrcSizes |
                                             kFSCatInfoNodeFlags, fetchedInfos,
                                             fetchedRefs, NULL, NULL);
            }
        }
        FSCloseIterator(thisDirEnum);
    }
    return totalSize;
}

- (unsigned long long) sizeOfFileWithURL:(NSURL *)aURL
{   
    NSDictionary *attr = [[NSFileManager defaultManager] attributesOfItemAtPath:aURL.path error:nil];

    if ([attr objectForKey:NSFileType] == NSFileTypeDirectory) {

        FSRef theFileRef;
        CFURLGetFSRef((__bridge CFURLRef)aURL, &theFileRef);

        return [self folderSizeWithFSRef:&theFileRef];
    } else {
        return [[attr objectForKey:NSFileSize] longValue];
    }
} 
```

我还注意到 finder 在计算大小时不会除以 1024，而是除以 1000。奇怪的

# javascript - 带有可视化的下拉菜单

> ID：12801959
> 
> 赞同：0
> 
> 时间：2012-10-09T14:09:32.803
> 
> 标签：javascript, html

我正在尝试添加一个下拉框菜单，我将在其中做出选择以可视化数据。如果没有下拉框，我的可视化效果很好，但是当我将它们放在一起时出现问题。在我的代码中，我想在选择 selection02 时可视化数据。有人可以帮我吗？

```
<html>
<head>

 <script type="text/javascript"
 src="//ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js"> 

 function allagi()
{
   if (document.getElementById("selection01").selected==true)
   {
      function01();
   }
   else if (document.getElementById("selection02").selected==true)
   {
      f1();
   }
   else if (document.getElementById("selection03").selected==true)
   {
      function03();
   }
   else if (document.getElementById("selection04").selected==true)
   {
      function04();
   }
}

 function f1(){
 {"dataSourceUrl":"//docs.google.com/spreadsheet/tq?key=0AihqKzH-MgAndERnaFVsYk1RLUM3S0pDSmNjcEQ4M1E&transpose=0&headers=0&range=A2%3AB13&gid=0&pub=1","options":{"vAxes":[{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}}],"booleanRole":"certainty","animation":{"duration":0},"useFirstColumnAsDomain":true,"hAxis":{"useFormatFromData":true,"viewWindowMode":"pretty","viewWindow":{}},"isStacked":false,"width":454,"height":285},"state":{},"chartType":"AreaChart","chartName":"\u0393\u03c1\u03ac\u03c6\u03b7\u03bc\u03b1 1"} }</script>

</head>
<body onLoad="loadContent();">

 <div id="logo"><select onchange="allagi()">
  <option id="selection01">Selection01</option>
  <option id="selection02">Selection02</option>
  <option id="selection03">Selection03</option>
  <option id="selection04">Selection04</option>
</select></div> 
<div id="contentArea" style="margin: 20px 0px 10px 10px; border: 1px solid #CCC; width: 780px; height: 250px; float: left;">

</div>

</body>
</html> 
```

# c++ - 在头文件中声明的函数中使用指向结构的指针

> ID：12801963
> 
> 赞同：0
> 
> 时间：2012-10-09T14:09:46.897
> 
> 标签：c++

我整个早上都在寻找如何做到这一点，但我找不到我要找的东西。我应该提到我对C相当陌生。

我正在尝试修改我的代码（在我尝试这样做之前一直有效）

目前在我的主要代码中：

```
#include<stdio.h>
#include<rfftw.h>
#include<stdlib.h>
#include<math.h>
#include<string.h>
#include <fstream>
#include <iomanip>
#include<complex>
#include<omp.h>

struct basic_gal {
   double ra,dec,z,dist,fkp,nbar;
   double cp[3];
   double RSD[3];
};

struct basic_gal *gal; 
int NGAL_MAX =200000;

main() {

  if(!(gal = (struct basic_gal*)malloc(NGAL_MAX*sizeof(struct basic_gal))-1)) 
  printf("memory allocation problem for galaxies\n");

  etc etc..
} 
```

然后我继续读取文件并将各种属性分配给结构。我想做的是将空结构（或指向它的指针）传递给函数，在函数中填充结构的元素，然后将其返回以再次在我的主程序中使用。

这需要 3 个文件，main.c、头文件、header.h 和包含函数操作 bin_gals.c 的文件

在我的头文件中

```
#include <stdlib.h>
#include <fstream>
#include <iomanip>
#include <stdio.h>
#include <math.h>
#include <string> 

void bin_NGP(int,int*,struct basic_gal*,int); 
```

在 bin_gals.c 文件中我有

```
#include "header.h"
#include <all_the_others>

void bin_NGP(int NGAL_MAX, int *NGAL, basic_gal *gal, int flag) {

/*read in files and add data etc*/

} 
```

在 main.c 文件中我有

```
#include "header.h"
#include <all_the_others>

struct basic_gal {
   double ra,dec,z,dist,fkp,nbar;
   double cp[3];
   double RSD[3];
};
struct basic_gal *gal;  
int NGAL_MAX = 200000;

main() {

  if(!(gal = (struct basic_gal*)malloc(NGAL_MAX*sizeof(struct basic_gal))-1)) 
  printf("memory allocation problem for galaxies\n");

  int NGAL =0;
  int *ipNGAL =&NGAL;
  bin_NGP(NRAN_MAX,ipNGAL,gal,1);
} 
```

问题是我认为我没有正确传递结构，但无法弄清楚如何做到这一点。

我的错误消息看起来像

```
bin_gals.c: In function ‘void bin_NGP(int, int*, basic_gal*, int)’:
bin_gals.c:150: error: ISO C++ forbids comparison between pointer and integer
bin_gals.c:151: error: invalid types ‘basic_gal*[int*]’ for array subscript 
```

我不知道如何解决这个问题。任何帮助将非常感激！

编辑： bin_gals.c 的 bin_NGP 部分的实际内容是：

```
void bin_NGP(const char *data, int NGAL_MAX, int *NGAL, double *min_x, double *min_y        ,double *min_z, double *max_x, double *max_y ,double *max_z ,struct basic_gal *gal, int     flag) {

  FILE *fp_rand;
  if((fp_rand=fopen(data,"r"))==NULL) printf("data file %d not opened\n", flag);
  const int bsz=100; char buf[bsz];  
  fgets(buf, bsz, fp_rand);                         //header line
  while((fgets(buf, bsz, fp_rand))!=NULL) { 
  double ra, dec, cz; 
  sscanf(buf,"%lf %lf %lf\n",&ra,&dec,&cz);
  if(++NGAL>NGAL_MAX) { NGAL--; break; }
  gal[NGAL].ra = ra*pi/180.;
      gal[NGAL].dec = dec*pi/180.;
      gal[NGAL].z = cz;
      gal[NGAL].dist = calc_dp(gal[NGAL].z);
      gal[NGAL].cp[0] = (gal[NGAL].dist*cos(gal[NGAL].dec)*cos(gal[NGAL].ra)); 
      gal[NGAL].cp[1] = (gal[NGAL].dist*cos(gal[NGAL].dec)*sin(gal[NGAL].ra));
      gal[NGAL].cp[2] = (gal[NGAL].dist*sin(gal[NGAL].dec));
      if (flag ==1) {
        if (gal[NGAL].cp[0] > max_x) max_x = gal[NGAL].cp[0];
        if (gal[NGAL].cp[1] > max_y) max_y = gal[NGAL].cp[1];
        if (gal[NGAL].cp[2] > max_z) max_z = gal[NGAL].cp[2];

        if (gal[NGAL].cp[0] < min_x) min_x = gal[NGAL].cp[0];
        if (gal[NGAL].cp[1] < min_y) min_y = gal[NGAL].cp[1];
        if (gal[NGAL].cp[2] < min_z) min_z = gal[NGAL].cp[2];
      }         
    }
    fclose(fp_rand);
} 
```

我试图通过删除一些输入参数来简化问题。也许我在掩饰一个错误。

编辑：固定。为了清楚起见，我已经包含了固定代码，以防有人遇到同样的问题。

```
void bin_NGP(const char *data, int NGAL_MAX, int *NGAL, double *min_x, double *min_y ,double *min_z, double *max_x, double *max_y ,double *max_z ,struct basic_gal *gal, int flag) {

  FILE *fp_rand;
  if((fp_rand=fopen(data,"r"))==NULL) printf("data file %d not opened\n", flag);
  const int bsz=100; char buf[bsz];  
  fgets(buf, bsz, fp_rand);                         //header line
  while((fgets(buf, bsz, fp_rand))!=NULL) { 
  double ra, dec, cz; 
  sscanf(buf,"%lf %lf %lf\n",&ra,&dec,&cz);
  if(++(*NGAL) > NGAL_MAX) { *NGAL--; break; }
  gal[*NGAL].ra = ra*pi/180.;
      gal[*NGAL].dec = dec*pi/180.;
      gal[*NGAL].z = cz;
      gal[*NGAL].dist = calc_dp(gal[*NGAL].z);
      gal[*NGAL].cp[0] = (gal[*NGAL].dist*cos(gal[*NGAL].dec)*cos(gal[*NGAL].ra)); 
      gal[*NGAL].cp[1] = (gal[*NGAL].dist*cos(gal[*NGAL].dec)*sin(gal[*NGAL].ra));
      gal[*NGAL].cp[2] = (gal[*NGAL].dist*sin(gal[*NGAL].dec));
      if (flag ==1) {
        if (gal[*NGAL].cp[0] > *max_x) *max_x = gal[*NGAL].cp[0];
        if (gal[*NGAL].cp[1] > *max_y) *max_y = gal[*NGAL].cp[1];
        if (gal[*NGAL].cp[2] > *max_z) *max_z = gal[*NGAL].cp[2];

        if (gal[*NGAL].cp[0] < *min_x) *min_x = gal[*NGAL].cp[0];
        if (gal[*NGAL].cp[1] < *min_y) *min_y = gal[*NGAL].cp[1];
        if (gal[*NGAL].cp[2] < *min_z) *min_z = gal[*NGAL].cp[2];
      }         
  }
  fclose(fp_rand);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:15:38.710

您需要为as中定义`struct basic_gal*`的声明转发声明。但是，将需要对的定义可用，因此您应该将其定义移出到单独的模块中：`bin_NGP()``struct basic_gal``main.c``struct basic_gal``bin_NGP()``main.c`

```
/* basic_gal.h */
#ifndef BASIC_GAL_DEFINITION
#define BASIC_GAL_DEFINITION

struct basic_gal {
   double ra,dec,z,dist,fkp,nbar;
   double cp[3];
   double RSD[3];
};

#endif 
```

请注意，如果这是 C，您需要使用`struct basic_gal`.

* * *

编辑后，这是违规行：

```
if(++NGAL>NGAL_MAX) { NGAL--; break; } 
```

as`NGAL`是一个`int*`并且`NGAL_MAX`是一个`int`. 取消引用`NGAL`：

```
if(++*NGAL > NGAL_MAX) { (*NGAL)--; break; } 
```

`NGAL`用作数组索引时的取消引用：

```
gal[*NGAL].ra = ra*pi/180.; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:19:33.060

你需要让你的结构对 main.c 和 bin_gals.c 都可见。将您的标头 bin_gals.h 修改为：

```
 #include <stdlib.h> 
 #include <fstream> 
 #include <iomanip> 
 #include <stdio.h> 
 #include <math.h> 
 #include <string>  

 struct basic_gal { 
    double ra,dec,z,dist,fkp,nbar; 
    double cp[3]; 
    double RSD[3]; 
 }; 

 void bin_NGP(int,int*,struct basic_gal*,int); 
```

bin_gals.c 然后看起来像

```
 #include "bin_gals.h"   
 #include <all_the_others>   

 void bin_NGP(int NGAL_MAX, int *NGAL, basic_gal *gal, int flag) {   

 /*read in files and add data etc*/   

 } 
```

您的主文件将如下所示：

```
#include "bin_gals.h"      
#include <all_the_others>      

struct basic_gal *gal;        
int NGAL_MAX = 200000;      

main() {      

  if(!(gal = (struct basic_gal*)malloc(NGAL_MAX*sizeof(struct basic_gal))-1))       
  printf("memory allocation problem for galaxies\n");      

  int NGAL =0;      
  int *ipNGAL =&NGAL;      
  bin_NGP(NRAN_MAX,ipNGAL,gal,1);      
} 
```

# android - 在登录时保存用户凭据

> ID：12801964
> 
> 赞同：0
> 
> 时间：2012-10-09T14:09:49.060
> 
> 标签：android, xamarin.android

我正在开发需要用户登录的android应用程序。该应用程序依赖Web服务器验证用户详细信息，以便用户可以登录。我的问题从这里开始，登录用户没有问题，但是当用户按下主页按钮并返回应用程序时，会显示登录屏幕这是非常糟糕的。

我听说过 SharedPrefrences 但我不知道如何使用它保存用户详细信息，以便用户可以直接移动到主要活动。

我在这里包含了我的源代码。如果任何熟悉 SharedPrefrences 的人可以帮助我解决这个问题。我的鳕鱼的例子会很有帮助。

```
using System;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;
using Android.Locations;
using RestSharp;
using TheNorthStar.Api.Requests;
using TheNorthStar.Api.Results;
using NorthStar.Driver.Application;
using Android.Preferences;
using Object = Java.Lang.Object;

namespace NorthStar.Driver
{
    public class DriverLogonAsync : AsyncTask

    {
        private ProgressDialog processDialog;
        private Context m_context;
        private DriverLogon m_driver;

        private bool _resterror;

        public DriverLogonAsync( Context context, DriverLogon driver )
        {
            m_context = context;
            m_driver = driver;

            _resterror = false;
        }

        /*
         * throws
         * should separate out logic and use MyMessagebox..
         */
        private void SetComfirmAlertBox(string carNum, DriverLogonResult result)
        {
            var api = new ConnectToSever(Helper.GetServer(m_context));
            string resultOfCarDetail; CarDetails res;
            try
            {
                resultOfCarDetail = api.ComfirmLogginOn(m_driver);
            }
            catch
            {
                Android.Util.Log.Info("EXC_conflogon1", "confirm logging on failed");
                throw;
            }
            try
            {
                res = Newtonsoft.Json.JsonConvert.DeserializeObject<CarDetails>(resultOfCarDetail);
            }
            catch (Exception ex)
            {
                Android.Util.Log.Info("EXC_conflogon2", "deserialize confirm logging on failed\n" + ex.Message);
                throw;
            }

            if (res.carExists != true)
            {
                MyMessageBox.SetAlertBox("Opps!!!!!!!!", "This Car Number Was Wrong!!!!", "OK", m_context);
            }
            else
            {
                string carType = res.carType;
                string seatNum = res.numOfSeats.ToString();
               // MainActivity act = new MainActivity( result.driverId );
                var mact = new Intent(m_context,typeof(MainActivity) );
                mact.PutExtra( "driverID",  result.driverId.ToString() );
                MyMessageBox.SetAlertBox("Comfirm!", "Your car is a: " + carType + " with " + seatNum + " seats??", "Yes", "No", mact,m_context);

            }
        }

        /*private void ChangeDriverStatues()
        {

        }*/

        protected override void OnPreExecute()
        {
            base.OnPreExecute();
            processDialog = ProgressDialog.Show( m_context, "Driver Loging On...", "Please Wait...", true, true);
        }

        protected override Object DoInBackground(params Object[] @params)
        {
            var api = new ConnectToSever(Helper.GetServer(m_context));

            string res = string.Empty;
            try
            {
                res = api.DriverLogingOn(m_driver);
            }
            catch
            {
                _resterror = true;
                Android.Util.Log.Info("EXC_dlogon1", "driver logon failed");
                return -1;
            }
            return res;
        }

        protected override void OnPostExecute(Object result)
        {
            base.OnPostExecute(result);
            //hide and kill the progress dialog
            processDialog.Hide();
            processDialog.Cancel();

            if (_resterror == true)
            {
                Android.Util.Log.Info("EXC_dlogon2", "logon connection has failed, noop");
                return;
            }

            DriverLogonResult resDriverDetail;
            try
            {
                resDriverDetail = Newtonsoft.Json.JsonConvert.DeserializeObject<DriverLogonResult>(result.ToString());
            }
            catch (Exception ex)
            {
                Android.Util.Log.Info("EXC_dlogon3", "logon deser has failed, noop\n" + ex.Message);
                return;
            }

            if (resDriverDetail.logonSuccess)
            {
                this.SetComfirmAlertBox( m_driver.carNum, resDriverDetail );  
            }
            else
            {
                MyMessageBox.SetAlertBox("Wrong!", "Wrong username or password!!!", "OK!",m_context);
            }
        }
    }

    [Activity(Label = "MyDriver-Driver", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
        private void CreateAlert()
        {

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.SetTitle("GPS is Off")
                .SetMessage("You need GPS to you this application."+ "\n" +
                             "Do you want to go to settings menu?")
                .SetPositiveButton("Setting",
                    (sender, e) =>
                    {
                        Intent intent = new Intent(Android.Provider.Settings.ActionLocationSourceSettings);
                        StartActivity(intent);
                        this.Finish();
                    })
                    .SetNegativeButton("No", (sender, e) => this.Finish());

            AlertDialog alert = builder.Create();
            alert.Show();
        }
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.Main);

            Android.Util.Log.Info("EXC_logstart", "**************** starting driver module ****************");

            Boolean isGPSEnabled = false;
            Boolean isNetworkEnabled = false;
            LocationManager _locationManager;
            _locationManager = (LocationManager)GetSystemService(LocationService);
            isGPSEnabled = _locationManager.IsProviderEnabled(LocationManager.GpsProvider);

            // getting network status
            isNetworkEnabled = _locationManager.IsProviderEnabled(LocationManager.NetworkProvider);

            if (!isGPSEnabled && !isNetworkEnabled)
            {
                CreateAlert();
            }

            // Get our button from the layout resource,
            // and attach an event to it
            EditText eTextUsername = FindViewById<EditText>(Resource.Id.UserNameBox);
            EditText eTextPassword = FindViewById<EditText>(Resource.Id.PasswordBox);
            EditText eTextCarNum = FindViewById<EditText>(Resource.Id.CarNumBox);
            Button viewPrefsBtn = FindViewById<Button>(Resource.Id.BtnViewPrefs);
            Button button = FindViewById<Button>(Resource.Id.MyButton);

            button.Click += delegate 
            {
                if (eTextCarNum.Text != "" && eTextPassword.Text != "" && eTextUsername.Text != "")
                {
                    DriverLogon driver = new DriverLogon();
                    driver.userName = eTextUsername.Text;
                    driver.password = eTextPassword.Text;
                    driver.carNum = eTextCarNum.Text;
                    DriverLogonAsync asyDriver = new DriverLogonAsync(this, driver);
                    asyDriver.Execute();
                }
            };

            viewPrefsBtn.Click += (sender, e) =>
            {
                StartActivity(typeof(PreferencesActivity));
            };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:19:18.373

```
public void savePrefrences(String key, String value)
    {
        SharedPreferences prefs = context.getSharedPreferences(context.getApplicationContext().getPackageName(), 0);
        prefs.edit().putString(key, value).commit();
    }

public String getPrefrences(String key)
    {
        SharedPreferences prefs = context.getSharedPreferences(context.getApplicationContext().getPackageName(), 0);
        return prefs.getString(key, "");
    } 
```

这样，即使您关闭并重新打开它，您的信息也可以从应用程序的任何位置获得。

在您的登录屏幕上-当用户成功登录时`savePrefrences("hasLoggenInPref", "true");` 现在，每当用户重新进入登录屏幕时-调用`getPrefrences("hasLoggenInPref")`并检查它是否`equals` `"true"`，如果是，则跳转到您的主屏幕，如果不是，则显示登录屏幕。

您可能应该`getPrefrences` 从启动屏幕或其他地方调用该函数，如果它返回 true，则打开您的应用程序，如果不是，则打开登录屏幕。

当用户注销时，只需调用`savePrefrences("hasLoggenInPref", "false");`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:22:13.650

不确定monodroid，但通常在您的应用程序中，所有需要授权的活动都必须从一个检查`onResume`用户是否具有有效会话的活动子类化（您在内存中存储有关成功登录的标志或会话ID，例如在您的`Application`班级中或任何适当的单例）。然后

*   如果检查失败 - 将用户返回到登录屏幕
*   如果成功 - 什么也不做，只是向他们展示他想要的活动

为避免活动堆栈出现问题（按主页按钮返回登录屏幕）并通过 Intent 在清单或相关属性中`LoginActivity`使用`android:noHistory="true"`

# design-patterns - Poltergeist 反模式示例

> ID：12801965
> 
> 赞同：6
> 
> 时间：2012-10-09T14:09:50.220
> 
> 标签：design-patterns, anti-patterns

我试图了解什么是 Poltergeist 反模式，以及它与命令或委托模式有何不同。我读了：

[http://en.wikipedia.org/wiki/Poltergeist_(computer_science)](http://en.wikipedia.org/wiki/Poltergeist_(computer_science)) [http://sourcemaking.com/antipatterns/poltergeists](http://sourcemaking.com/antipatterns/poltergeists)

但是没看懂区别。。。

所以为了清楚起见，我想看看它的代码示例（我更喜欢 C# 或 Java 语言）。

有人有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:36:17.247

维基百科用以下方式描述了命令模式：

> 命令模式是一种行为设计模式，其中对象用于表示和封装稍后调用方法所需的所有信息。一个组件可以向另一个特定组件发送命令，假设满足某些条件时，该命令将被触发。

这个概念很像函数式编程中的函子（函子基本上是一个黑匣子中的函数，参数和所有）

恶作剧鬼被描述为：

> poltergeist 是一个短暂的、典型的无状态对象，用于执行初始化或调用另一个类中的方法。

命令是通用的，必须能够包含足够的状态才能重用。捣蛋鬼通常是有特殊目的的，它们的存在只是为了让一些椅子嘎嘎作响，在地下室发出很大的噪音，然后消失。Poltergeists 通常用作帮助构造或初始化对象的拐杖，并且很少用于在构造后共享状态更改。

换句话说，是的，它们有点相似，但是 poltergeists 是不灵活的并且代表一个静态动作，而命令是通用的，可以重用，并且代表一个可配置的动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:47:44.490

值对象，顾名思义，往往属于这一类。

[http://en.wikipedia.org/wiki/Value_object](http://en.wikipedia.org/wiki/Value_object)

它们的存在是为了推动价值观，但不做任何事情。

# python - 使用ec2 python API boto，如何从SpotInstanceRequest 中获取spot instance_id？

> ID：12801966
> 
> 赞同：5
> 
> 时间：2012-10-09T14:09:50.970
> 
> 标签：python, amazon-ec2

使用*boto*时，Amazon aws python API。

```
ec2_connection.request_spot_instances(...)
# This will return an ResultSet of SpotInstanceRequest 
```

如何从 中获取 instance_ids `SpotInstanceRequest`？

**更新：**我是这样做的，经过大量的游戏和谷歌搜索，希望这会有所帮助：

```
ec2_connection.get_all_spot_instance_requests(request_ids=[my_spot_request_id, ]) 
```

这将返回*updated* `SpotInstanceRequest`，当*实例*准备好时，我们可以从中获取 *instance_id* 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-08T22:02:22.673

我做了类似的事情：定期检查返回的现场实例请求ID `ec2_connection.request_spot_instances(...)` 是否与结果中的实例匹配 `conn.get_all_spot_instance_requests(...)` ：

```
conn = boto.ec2.connect_to_region(region_name=region_name, aws_access_key_id=aws_access_key_id, aws_secret_access_key=aws_secret_access_key)
req = conn.request_spot_instances(price=MAX_SPOT_BID,instance_type=instance_type,image_id=AMI_ID,availability_zone_group=region_name,key_name=KEY_PAIR_PEM[:-4],security_groups=security_groups)
job_instance_id = None
while job_instance_id == None:
    print "checking job instance id for this spot request"
    job_sir_id = req[0].id # spot instance request = sir, job_ is the relevant aws item for this job
    reqs = conn.get_all_spot_instance_requests()
    for sir in reqs:
        if sir.id == job_sir_id:
            job_instance_id = sir.instance_id
            print "job instance id: " + str(job_instance_id)
            break
    time.sleep(SPINUP_WAIT_TIME) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T20:23:29.850

```
spot_instance_requests = aws.ec2_get_connection().request_spot_instances(...)
MAX_MINUTES = 180
spot_instance_request_ids = [sir.id for sir in spot_instance_requests]
for _ in range(MAX_MINUTES):
    log.info('waiting for spot instances to start', request_ids=spot_instance_request_ids, seconds=60)
    time.sleep(60)
    spot_instance_requests = aws.ec2_get_connection().get_all_spot_instance_requests(
        request_ids=spot_instance_request_ids)
    if any(sir.instance_id for sir in spot_instance_requests):
        log.info('spot instance started. waiting...', seconds=60*5)
        time.sleep(60*5)
        break
else:
    raise Exception("Spot instances didn't start in {0} minutes!".format(MAX_MINUTES)) 
```

# php - PHP 正则表达式以精确的给定模式搜索

> ID：12801967
> 
> 赞同：2
> 
> 时间：2012-10-09T14:09:53.433
> 
> 标签：php, regex

我想给正则表达式一个模式并强制它全部阅读..

`http://example.com/w/2/1/x/some-12345_x.png`

我想定位“some-12345_x”
我用了这个`/\/(.*).png/`，由于某种原因它不起作用

我如何强制它记住它必须以/开头并以.png结尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:17:33.370

如果您总是想获得最终的文件名，减去扩展名，您可以使用 PHP`substr()`而不是尝试提出正则表达式：

```
$lastSlash = strrpos($url, '/') + 1;
$name = substr($url, $lastSlash, strrpos($url, '.') - $lastSlash); 
```

此外，更易读的方法是使用 PHP 的`basename()`：

```
$filename = basename($url);
$name = substr($filename, 0, strpos($filename, '.')); 
```

要实际使用正则表达式，您可以使用以下模式：

```
.*/([^.]+).png$ 
```

要将其与 PHP 一起使用`preg_match()`：

```
preg_match('|.*/([^.]+).png$|', $url, $matches);
$name = $matches[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:18:58.433

在这种情况下，出于特定原因，您可能需要使用 reg-ex，但这里有一个您不需要的替代方法：

```
$url = "http://example.com/w/2/1/x/some-12345_x.png";
$value = pathinfo($url);
echo $value['filename']; 
```

输出：

```
some-12345_x 
```

手册中的[pathinfo()](http://php.net/manual/en/function.pathinfo.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:15:16.993

你可以做：

```
^.*/(.*)\.png$ 
```

它捕获了最后一个`/`直到最后发生的事情`.png`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T14:22:29.793

怎么样：

```
~([^/]+)\.png$~ 
```

这将匹配除字符串末尾`/`之外的任何内容。`.png`

# c# - WCF 流文件问题

> ID：12801968
> 
> 赞同：3
> 
> 时间：2012-10-09T14:09:54.817
> 
> 标签：c#, wcf, streaming, messagecontract

是否可以使用带有 MessageContract 的 WCF 流式传输文件，该 MessageContract 包含另一个 MessageContract，其中包含 Stream？我认为答案是否定的，但可以这么说，我更愿意将我的文件打包在“根”消息中。

换句话说，我的设置是这样的：

```
[MessageContract]
public class Transport
{
    [MessageHeader]
    private readonly Guid fId;

    [MessageHeader]
    private readonly DateTime fTimestamp;

    [MessageBodyMember(Order = 1)]
    public FileTransferMessage FileTransferMessage { get; set; }
}

[MessageContract]
public class FileTransferMessage : IDisposable
{
    [MessageBodyMember(Order = 1)]
    public Stream FileByteStream;

    [MessageHeader(MustUnderstand = true)]
    public long FileLength;

    [MessageHeader(MustUnderstand = true)]
    public string FileName;
} 
```

请求可以很好地发送和接收到服务，但是，Stream 似乎没有被正确反序列化并作为空引用返回。我知道我在某处阅读了一条规则，该规则在带有 Streaming 的 MessageContract 上声明 Stream 必须是 MessageContract 的主体，我认为这就是现在被违反的内容。我希望 FileTransferMessage 作为 Body，然后 Stream 作为 Body 是可以接受的。

有人对我可以在这里做什么有任何建议吗？我不希望将 Stream/FileName/FileLength 添加到我的 Transport 对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:43:39.977

作为设计 MessageContract 团队的一员，我可以告诉你答案是否定的 :) MessageContract 正好代表一个完整的 SOAP 消息，你不能将它们相互嵌套（你的示例中的 FileTransferMessage 只是交给序列化程序，它对 [MessageContract] 属性一无所知并忽略它，并且对任何特殊的 Stream 行为一无所知）。

由于没有创建自定义 Message 子类（甚至是自定义 Stream 子类），我想不出一个好的解决方案。如果每条消息上都有 fId 和 fTimestamp，请考虑使用自定义消息检查器来注入它们，然后在您的操作中使用 FileTransferMessage。

这里的权威文档是[http://msdn.microsoft.com/en-us/library/ms730255.aspx](http://msdn.microsoft.com/en-us/library/ms730255.aspx)和[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

# oracle - PL/SQL 动态 SQL

> ID：12801970
> 
> 赞同：2
> 
> 时间：2012-10-09T14:09:56.687
> 
> 标签：oracle, plsql, cursor, conditional

我需要帮助。我在构建 PL/SQL 块时遇到问题。在游标中，我构造了一个查询，我想在游标上插入一个过滤器。下面是一个例子：

```
DECLARE 
code NUMBER;
parameters_amb myOthertable%ROWTYPE;

CURSOR test is SELECT id from mytable
 if parameters_amb.test2 is not null  then
    where mytable.name = 'NAMETABLE'
 else
    where mytable.name = 'NAMETABLE2'; 
```

任何人都可以帮助我进行这个建设吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:22:35.633

您可以使用参数化游标：

```
DECLARE 
code NUMBER;
parameters_amb myOthertable%ROWTYPE;
param mytable.name%TYPE;

CURSOR test (p_name VARCHAR2) is 
  SELECT id 
    FROM mytable
   WHERE mytable.name = p_name;
BEGIN
  if parameters_amb.test2 is not null  then
    param := 'NAMETABLE'
  else
    param := 'NAMETABLE2';
  end if;

  OPEN test(param);

  -- Add code to fetch and read from cursor
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:18:10.140

```
DECLARE
 stmt varchar2(1000);
 code NUMBER;
 parameters_amb myOthertable%ROWTYPE;
BEGIN
 stmt := 'SELECT id from mytable';
 if parameters_amb.test2 is not null  
 then
    stmt := stmt||' where mytable.name = ''NAMETABLE''';
 else
    stmt := stmt||' where mytable.name = ''NAMETABLE2''';
 end if;

 OPEN test FOR stmt;
...
...
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:26:42.657

你可以这样尝试：

```
DECLARE  
  code NUMBER; 
  parameters_amb myOthertable%ROWTYPE;  
  CURSOR test is SELECT id 
                 from mytable  
                 WHERE (parameters_amb.test2 is not null AND mytable.name = 'NAMETABLE' )
                   OR (parameters_amb.test2 is null AND mytable.name = 'NAMETABLE2' ); 
```

或者像这样：

```
DECLARE  
  code NUMBER; 
  parameters_amb myOthertable%ROWTYPE;  
  CURSOR test is SELECT id 
                 from mytable  
                 WHERE mytable.name = 
                       CASE WHEN parameters_amb.test2 is not null THEN 'NAMETABLE'
                            WHEN parameters_amb.test2 is null THEN 'NAMETABLE2' END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T22:12:42.617

这是一个简单的解决方案：

声明代码号；参数_amb myOthertable%ROWTYPE;

CURSOR 测试是 SELECT id from mytable where mytable.name = NVL2(parameters_amb.test2, 'NAMETABLE', 'NAMETABLE2');

# asp.net-mvc - 为所有 viewModel 字段自动生成隐藏输入

> ID：12801971
> 
> 赞同：0
> 
> 时间：2012-10-09T14:10:04.223
> 
> 标签：asp.net-mvc, html-helper

为所有隐藏字段自动生成输入是否真实。我想要这样的扩展方法`Html.AutoGenerateHiddenFor(viewmodel)`

并输出：

```
<input type="hidden" name="field1" value="123"  />
<input type="hidden" name="field2" value="1234" />
<input type="hidden" name="field3" value="1235" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:14:39.573

您可以使用[MvcContrib 的](http://mvccontrib.codeplex.com/) [`Html.Serialize`](http://weblogs.asp.net/shijuvarghese/archive/2010/03/06/persisting-model-state-in-asp-net-mvc-using-html-serialize.aspx)方法：

```
@using (Html.BeginForm())
{
    @Html.Serialize(Model)
    <button type="submit">OK</button>
} 
```

然后在接收回发的控制器操作中：

```
[HttpPost]
public ActionResult SomeAction([Deserialize] MyViewModel model)
{
    ...
} 
```

它使用经典的 WebForms 的 ViewState 来序列化模型并发出一个隐藏的输入字段，该字段将包含序列化的模型。它有点模仿传统的 ViewState。

另一种解决方案是将您的模型保存到您的后端，然后在您的表单中简单地使用一个隐藏的输入字段，其中包含一个唯一的 ID，该 ID 将允许从该后端检索模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-31T18:48:23.360

```
public class ModelToPersistBetweenFormSubmits()
{
    public string field1 { get; set;}
    public string field2 { get; set;}
    public string field3 { get; set;}
    public string field4 { get; set;}
    public string GetHiddenFields(string excludeFields = "")
    {

            string[] excludeFieldList = excludeFields.Split(',');
            string val = string.Empty;
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            foreach (System.Reflection.PropertyInfo property in this.GetType().GetProperties())
            {
                if (excludeFieldList.Contains(property.Name))
                {
                    continue;
                }
                else if (property.GetIndexParameters().Length > 0)
                {
                    val = string.Empty; //sb.Append("Indexed Property cannot be used");
                }

                else 
                {
                    val = (property.GetValue(this, null) ?? "").ToString();
                }
                sb.Append(string.Format("<input type='hidden' id='{0}' name='{0}' value='{1}'/>", property.Name, val));

                sb.Append(System.Environment.NewLine);
            }

            return sb.ToString();
        }
}

//render hidden fields except for current inputs

@Html.Raw(Model.GetHiddenFields("field4,field3")) 
```

# java - 使用 Java 进行 Facebook 意见挖掘

> ID：12801972
> 
> 赞同：3
> 
> 时间：2012-10-09T14:10:04.177
> 
> 标签：java, facebook-graph-api, text-mining, web-crawler

为了毕业，我必须开发一个 Java 应用程序，用于在 Facebook 上进行意见挖掘。主题是在政党的 Facebook 页面上进行意见挖掘，以将 Facebook 用户的意见与官方民意调查进行比较。所以它只是公共页面上的公共数据。我正在使用`restfb`库来获取数据。我想获得帖子和评论。

到目前为止，我已经成功获取了数据，但是有一些我不明白的问题：

1.  我正在使用`graphApi`带有 URL 参数的调用获取数据。使用限制参数时，我在使用图形浏览器提供的访问令牌时获得的帖子数量与使用通过 Facebook 应用程序数据（appId、appSecret）登录提供的访问令牌时获得的帖子数量不同。这是为什么？

2.  与 Facebook Feed 上列出的帖子相比，一些（公开）帖子根本没有返回。这是什么原因？（正如我所说，我在`graphApi`调用中使用限制参数）

3.  一些返回的帖子似乎腐败。使用图形浏览器时，帖子如下所示：（我删除了省略的字段）

    ```
    {
      "id": "id omitted",
      "from": {
        "name": "name omitted",
        "category": "Political party",
        "id": "id omitted"
      },
      "story": "\"\" on their own link.",
      "type": "status",
      "created_time": "2012-10-09T11:13:09+0000",
      "updated_time": "2012-10-09T11:13:09+0000",
      "comments": {
        "count": 0
      }
    }, 
    ```

    处理这些帖子总是会引发异常，因为缺少许多数据，例如评论、喜欢等……这些是损坏的条目还是已删除的帖子？

# asp.net-mvc - Asp.Net Mvc 和 SqlServer 的最佳数据缓存策略

> ID：12801974
> 
> 赞同：0
> 
> 时间：2012-10-09T14:10:12.803
> 
> 标签：asp.net-mvc, quartz.net, data-caching

用户主要可以对 Web 应用程序进行 CRUD 操作。但是对于我的特定 Web 应用程序，情况有所不同。用户从不做 CUD。他们只能检索数据。

于是上图：

1-有一个服务更新数据库频繁（每秒7-8次更新）（调度框架是Quartz.Net）

2- Sql Server 2008 R2

3- Asp.Net MVC 4（网络用户只能从 Sql Server 读取数据！）

**要求：Web 用户永远不会从 Sql Server 获取数据！**

**策略A：（代号：主机为Web App）**

1- 从 Asp.Net MVC 调用服务库，所以我们可以更新数据库和缓存事务

2- Web 用户可以从缓存中读取

3- 在 App_Start 上，我们从 sql server 更新缓存数据。

4- 基于时间的应用程序池回收已关闭

**策略B：（代号：Web Pipe）**

1- 服务作为 exe 运行。

2- 服务不进行 Sql 更新，它向 Asp.Net MVC 应用程序发送 Web 请求。

3- 所以 Asp.Net MVC 应用程序（控制器的操作）确实更新和缓存事务

4- 在 App_Start 上，我们从 sql server 更新缓存数据。

5- 基于时间的应用程序池回收已关闭

对于这两个场景，Web 用户永远不会从 SqlServer 获取数据。他们总是从缓存中读取数据。他们总是使用对象缓存。Asp.Net Mvc 的最快缓存。没有序列化开销。

# java - Omar AL Zabir 的 Droptiles 支持哪些 HTML5 功能？

> ID：12801978
> 
> 赞同：1
> 
> 时间：2012-10-09T14:10:18.847
> 
> 标签：java, php, html, microsoft-metro

我想创建一个可以在台式机、平板电脑和移动设备上使用的 HTML5 网络应用程序/网站。我希望它能够灵活地使用 PHP 或 Java。经过深入的谷歌搜索，我找到了 Omar Al Zabir 的 Droptiles (droptiles.com)。由于我还考虑在我的移动网站中加入 Windows Live Tiles 的外观和功能，我认为这是一个不错的选择。我的问题是 Droptiles 支持哪些 HTML5 功能？在提交这个框架之前，我需要知道这一点。到目前为止，阅读它的文档我还没有阅读任何 html5 功能。我希望有使用 Droptiles 经验的人可以回答我的问题。提前致谢。

顺便说一下，我认为破坏交易的 html5 功能是

*   离线存储
*   支持视口元标记（或任何允许它根据使用的设备进行缩放的东西）
*   html5 输入类型（电子邮件、电话号码、日历等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:59:03.797

如果您有一个现有的网站，您可以在 c# 中使用 webview 元素加载该网站。

droptiles 是用 html5/javascript 构建的。所以一切都必须正常工作。Windows IE 引擎仅不支持 HTML5 type=color

# css - youtube视频后面的HTML覆盖

> ID：12801979
> 
> 赞同：0
> 
> 时间：2012-10-09T14:10:19.527
> 
> 标签：css, firefox

您好，我在网站内嵌入了一个 youtube 视频，但是当我单击按钮以获取叠加层时，叠加层位于 youtube 视频的后面。这只发生在 Firefox 14 中，它在其他任何地方都可以正常工作......我试图把 wmode="transparent/opaque" 但它不适用于其中一个或另一个......

覆盖框代码：

```
.box_4, .box_5, .box_6 {
  position: fixed;
  top: -1900px;
  left: 50%;
  z-index: 101;
  width: 883px;
  margin-left: -400px;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:15:13.323

问题是当您嵌入 youtube 链接时：

[https://www.youtube.com/embed/kRvL6K8SEgY](https://www.youtube.com/embed/kRvL6K8SEgY) 在 iF​​rame 中，默认的 wmode 是窗口化的，本质上它的 z-index 大于其他所有内容，它将覆盖任何内容。

尝试将此 GET 参数附加到您的 URL：

wmode=不透明

像这样：

```
https://www.youtube.com/embed/kRvL6K8SEgY?wmode=opaque 
```

确保它是 URL 中的第一个参数。其他参数必须在后面

在 iframe 标记中：

例子：

```
<iframe class="youtube-player" type="text/html" width="520" height="330" src="http://www.youtube.com/embed/NWHfY_lvKIQ?wmode=opaque" frameborder="0"></iframe> 
```

请参阅：[在 youtube iframe 上覆盖不透明 div](https://stackoverflow.com/questions/3820325/overlay-opaque-div-over-youtube-iframe)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:14:42.447

尝试`position: absolute`-

```
.box_4, .box_5, .box_6 {
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 9999;
  width: 883px;
  margin-left: 0px;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:13:48.240

`<param name="wmode" value="transparent" />`

试试这个参数，它应该修复它。

问候和好运……</p>

# linq-to-xml - 我的 Linq to Xml 查询中的重复节点问题

> ID：12801987
> 
> 赞同：0
> 
> 时间：2012-10-09T14:10:51.243
> 
> 标签：linq-to-xml

我已经设法从一个文件中查询一个 XML 文档，但是我只需要根据传递给我的 C# 的“id”从这个 XML 片段（当然还有它的子节点）中提取一个“过滤器”节点方法：

```
 <outBound>
   <body>
       <filter id="1">
          <name>A. All Portfolios</name>
          ...
          <query>
              ...
          </query>
       </filter>
       <filter id="2">
          <name>A. Busines Portfolios</name>
          ...
          <query>
              ...
          </query>
       </filter>
   </body>
  </outBound> 
```

我从我下载的一些 MS 示例中对我的 L2X 代码进行了建模，但我将如何仅提取过滤器？

```
 XDocument document = XDocument.Load(Server.MapPath("~/xml/portfolioFilters.xml"));  //portfolioFiltersResponse  //portfolioFilters            
        var portFilterAll = from x in document.Descendants()
                         where x.Name == "filter"
                         select x;

        var portFilt = new XElement("filter",
                            from x in document.Descendants("filter")
                            where (string)x.Element("name") == filterName
                            select new XElement("filter",
                                        x.Attribute("id"),
                                        x.Element("name"),
                                        x.Element("type"),
                                        x.Element("userId"),
                                        x.Element("security"),
                                        x.Element("queries")
                                       )); 
```

但是，我得到的最终结果是顶部的额外“过滤器”节点，如下所示：

```
 <filter>
     <filter id="1">
       <name>A. All Portfolios</name>
       ...
       <query>
          ...
       </query>
     </filter>
   </filter> 
```

有人可以根据“id”属性帮助我稍微调整一下以仅拉出我需要的“过滤器”节点吗？

谢谢你。鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:29:04.867

您创建一个顶级过滤器元素并选择并创建一个子过滤器元素。像这样选择你需要的东西怎么样：

```
var portFilt = from x in document.Descendants("filter")
               where (string)x.Element("name") == filterName
               select x; 
```

# xml - Perl XML::libxml 不再作为包访问？（视窗）

> ID：12801989
> 
> 赞同：1
> 
> 时间：2012-10-09T14:10:59.160
> 
> 标签：xml, perl, package, libxml2

我无法从图形安装在 Windows 系统上`Perl Package Manager`

我正在运行`Perl 5.16`，我已经添加了存储库 uwinnipeg，但它似乎不再可用。

[http://cpan.uwinnipeg.ca/dist/XML-LibXML](http://cpan.uwinnipeg.ca/dist/XML-LibXML) 不可用

我该怎么做才能`XML::libxml`在`Perl 5.16`（Windows）系统上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:15:29.093

因为 XML::LibXML 还没有为 Perl 5.16（Active Perl 或 Strawberry Perl）做好准备，所以我安装了 Perl 5.14 并且 XML:LibXML 又回到了 ppm 图形窗口中。我从那里安装...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T21:40:59.210

我尝试使用包括在路径中制作 zlib1.dll、iconv.dll 和 xmlm2.dll 的指令从 CPAN 编译 XML::LibXML，或者使用命令

`perl Makefile.PL INC=-Ic:\perl_libxml\include LIBS=-Lc:\perl_libxml\lib`

编译失败，出现关于 xmlm2.dll 的 dmake 错误 129。我假设我使用的 xmlm2.dll 版本与 XML::LibXML 2.0121 不兼容。

最后，据我所知，我找到了唯一的替代 ActivePerl 存储库，它有一个用于 XML::LibXML 2.0121 的包，它将安装在最高 5.20.x 的 perl 版本上。

您可以从此处获取包含 5.20.2 的 ActivePerl 版本：http: [//downloads.activestate.com/ActivePerl/releases/](http://downloads.activestate.com/ActivePerl/releases/)

替代存储库称为 Bribes de Perl，位于 bribes.org/perl/

在 ActivePerl 选项中输入的存储库的 URL 是[http://bribes.org/perl/ppm/](http://bribes.org/perl/ppm/)

# ios - 如何共享开发中的应用程序的当前状态

> ID：12801996
> 
> 赞同：1
> 
> 时间：2012-10-09T14:11:27.170
> 
> 标签：ios, xcode, ios-simulator, share, collaboration

我将为我的一位客户开发一个 iOS 应用程序，我想让他在开发阶段不断更新。为此，我正在寻找一种工具，它可以让我与我的客户分享应用程序的当前状态。目标是让我的客户在某种模拟器/模拟器或他自己的设备（iPhone 或 iPad）上亲自运行应用程序的最新原型。那可能吗？有没有我可以使用的工具（或一组工具）？

如果不可能，据我所知，唯一的选择是截屏或录制视频，对吗？如果我弄错了，请告诉我。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:14:45.470

据我所知，最好的方法是[TestFlight](http://testflightapp.com/)。

这允许您将应用程序的 AdHoc 构建上传到那里的服务器并允许您的客户下载它。

他们甚至提供了一个 SDK，它可以提醒用户该应用程序的新版本可用，您还可以在构建中添加一些调试功能（阅读崩溃报告）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:19:11.070

如果您愿意，一个优雅的解决方案是使用持续集成服务器从存储库中提取代码，进行临时构建并将其放置在可公开访问的地方。

整个解决方案可能需要一些时间来设置，并且很大程度上取决于您的开发环境。在我的公司里，我们实际上是用[Jenkins](http://jenkins-ci.org/)和一些 shell 脚本来做的。如果你谷歌一下关于 iOS 项目与 Jenkins 的持续集成，你会发现一些信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:19:36.897

可能不是最好的方法，但我不能相信像 TestFlight 这样的在线存储库。

这不是最简单但相当安全的解决方法；

*   让您的客户设备进入您的开发者帐户
*   创建新的开发配置文件（包含该设备）
*   通过存档分发您的应用程序，并保存它
*   将您的 IPA 发送给您的客户